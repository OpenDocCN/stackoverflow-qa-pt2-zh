# StackOverflow 问答 15223000-15223999

# c# - Selenium EventFiringWebDriver 导航事件

> ID：15223001
> 
> 赞同：3
> 
> 时间：2013-03-05T11:47:07.260
> 
> 标签：c#, selenium, selenium-webdriver

我正在使用 Selenium Web 驱动程序，我想监听浏览器中发生的事件。例如，当页面上的某些 javascript 导致 url 更改使用`window.location = "...";`

我有一个监听器连接到`Navigated`我的`EventFiringWebDriver`. 但是当浏览器的 url 改变时，这不会触发。我由此推断 Selenium 不能以这种方式收听事件？

是否有适当的方法附加到来自浏览器的浏览器或 DOM 事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:22:58.617

我能够使用该`OpenQA.Selenium.Support.UI.WebDriverWait`对象来实现这一点。我只需要指定谓词（浏览器 url 的比较）和时间跨度。Selenium 每 500 毫秒检查一次结果，直到它返回 true 或时间跨度过去，在这种情况下测试失败。不是完全由事件驱动，但它具有预期的效果：

```
 private readonly IWebDriver _driver = new FirefoxDriver();

    [Test]
    public void UrlIsCorrect()
    {
        var w = new WebDriverWait(_driver, TimeSpan.FromSeconds(30));
        w.Until(driver => driver.Url == "http://test.com");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:05:55.900

抱歉，不，WebDriver API 不支持直接侦听 DOM 事件，即使使用`EventFiringWebDriver`. 您可能可以使用 JavaScript 将事件处理程序附加到事件，在全局页面上下文中设置 JavaScript 变量，然后您可以从 WebDriver 读取该变量，但这有点令人费解。该`Navigated`事件是指 WebDriver 导航方法完成的时间。

# javascript - 使用 URL 中不带 # 的锚点滚动

> ID：15223006
> 
> 赞同：35
> 
> 时间：2013-03-05T11:47:18.927
> 
> 标签：javascript, html, hash

我需要使用 滚动浏览页面`anchor tag`。

现在我正在做：

```
<a href="#div1">Link1</a>

<div id='div1'>link1 points me!!</div> 
```

当我单击 Link1 时，这工作正常，页面滚动到 id 为“div1”的 div。
关键是，我不想更改我`#div`点击后作为后缀的 URL `Link1`。

我尝试使用锚href作为

```
void(0); 
```

和

```
location.hash='#div1';
return false;

e.preventdefault; 
```

如何避免更改 URL？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-05T11:50:56.710

使用 jQuery 的动画从 Jeff Hines 那里得到这个答案：

```
function goToByScroll(id){
    $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
} 
```

如果您使用 jQuery，请不要忘记将库添加到您的项目中。

编辑：另外，请确保您仍然“返回 false；” 在链接的点击处理程序中，否则它仍会将“#div1”添加到您的 URL（感谢@niacurshi）

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-05-17T14:49:51.903

`scrollIntoView`当所有其他方法都失败时，做得最好！

```
document.getElementById('top').scrollIntoView(true); 
```

`'top'`你想去的html标签的id在哪里。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-05T13:29:10.670

让您的生活更轻松，请尝试以下操作，如果还有其他问题，请告诉我 ;-)

```
<div>top</div>
<div style="height: 800px;">&nbsp;</div>
<div><a href="javascript:void(0);" onclick="window.scroll(0,1);">click here</a></div> 
```

**仅供参考：**您只需要使用一条/单条线`href="javascript:void(0);" onclick="window.scroll(0,1);"`就可以了。

祝你有美好的一天！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-25T14:46:55.813

仅在文档准备好时将此代码添加到 jquery 中

参考：[http ://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

```
$(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^/ / , '') == this.pathname.replace(/^/ / , '') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-18T08:06:09.103

为任何项目单击添加平滑滚动，包括锚点、按钮等，而无需将 div id 添加到 URL :)

***信息：*** **scrollIntoViewOptions（可选）** { 行为：“自动”| “即时” | “顺利”，块：“开始” | “结尾”， }

```
function scrollSmoothTo(elementId) {
  var element = document.getElementById(elementId);
  element.scrollIntoView({
    block: 'start',
    behavior: 'smooth'
  });
}
```

```
#userdiv {
  margin-top: 200px;
  width: 200px;
  height: 400px;
  border: 1px solid red;
}
```

```
<button onclick="scrollSmoothTo('userdiv')">
  Scroll to userdiv
</button>

<div id="userdiv">
  Lorem ipsum this is a random text
</div>
```

[演示](https://codepen.io/ProgrammingDIY/pen/XBvQQq)

参考：[https ://developer.mozilla.org/en/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en/docs/Web/API/Element/scrollIntoView)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-28T17:10:11.687

摆脱 Henser[的回答](https://stackoverflow.com/a/15223074/3425496)，我有一个已经设置好的情况，`window.location.hash`然后用户滚动回页面顶部（哈希链接所在的位置）。

由于哈希已经设置，您可以通过单击该链接重新定位：

```
$(window).scrollTop($('a[name='+id+']').offset().top); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-14T10:33:05.210

我知道我迟到了 4 年，但你们可以试试这个。

HTML：

```
<a href="#div1">Link1</a>
<!-- you can put <br />'s here to see effect -->
<div id='div1'>link1 points me!!</div>
<!-- <br />'s here, too, to see effect --> 
```

JavaScript/jQuery

```
$(document).ready(function(){
    $('a').on('click', function(event) {
        event.preventDefault();
        var hash = this.hash;
        $('html, body').animate({scrollTop: $(hash).offset().top}, 900);
    });
}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-29T14:30:27.317

```
document.getElementById('top').scrollIntoView(true); 
```

应该适用于所有浏览器，经过测试！

# ruby - 如何在 Ruby on Rails 中全局重命名函数？

> ID：15223010
> 
> 赞同：0
> 
> 时间：2013-03-05T11:47:31.663
> 
> 标签：ruby, ruby-on-rails-3, rubygems

我安装了 Active Admin，这与我遇到的相同错误 [http://www.rqna.net/qna/mrumzr-argumenterror-in-activeadmin-devise-sessionscontroller-create.html](http://www.rqna.net/qna/mrumzr-argumenterror-in-activeadmin-devise-sessionscontroller-create.html)

我想将“sign_in”函数全局重命名为“sign_in_”。我怎样才能正确地做到这一点？我不想搞砸其他任何事情。

我试过这个方法：模块 SessionsHelper alias :sign_in_ :sign_in undef :sign_in end

但是当我尝试启动我的 Rails 服务器时，它给了我这个错误。这是命令提示符中的完整错误消息输出

```
 Called from: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/action
pack-3.2.3/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initi
alize'.

Exiting
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/act
ive_support/dependencies.rb:469:in `load': C:/Users/Me/Desktop/sample_app/app/he
lpers/sessions_helper.rb:48: syntax error, unexpected keyword_end, expecting $en
d (SyntaxError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:225:in `require_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:135:in `block in modules_for_helpers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:131:in `map!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:131:in `modules_for_helpers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_controller/metal/helpers.rb:92:in `modules_for_helpers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:95:in `helper'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_controller/railties/paths.rb:18:in `block (2 levels) in with'
        from C:/Users/Me/Desktop/sample_app/app/controllers/application_controll
er.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/inherited_reso
urces-1.3.1/app/controllers/inherited_resources/base.rb:11:in `<module:Inherited
Resources>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/inherited_reso
urces-1.3.1/app/controllers/inherited_resources/base.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/base_controller/menu.rb:2:in `<module:ActiveAdmin>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/base_controller/menu.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/base_controller.rb:2:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/resource_controller/actions.rb:2:in `<module:ActiveAdmin>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/resource_controller/actions.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/resource_controller.rb:2:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/batch_actions.rb:7:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:25:in `call'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:25:in `block in dispatch'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:24:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:24:in `dispatch'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/application.rb:187:in `load!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/application.rb:213:in `routes'
        from C:in `routes'
        from C:/Users/Me/Desktop/sample_app/config/routes.rb:2:in `block in <top
 (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/routing/route_set.rb:260:in `draw'
        from C:/Users/Me/Desktop/sample_app/config/routes.rb:1:in `<top (require
d)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:245:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:245:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:40:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:40:in `load_paths'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:16:in `reload!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application.rb:108:in `reload_routes!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/reloader.rb:34:in `reload!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/reloader.rb:61:in `block in attach!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:429:in `_run__63132682__prepare__586461675
__callbacks'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:30:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:55:in `block in run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:54:in `run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application.rb:136:in `initialize!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from C:/Users/Me/Desktop/sample_app/config/environment.rb:5:in `<top (re
quired)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/Users/Me/Desktop/sample_app/config.ru:3:in `block in <main>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/builder.rb:51:in `instance_eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/builder.rb:51:in `initialize'
        from C:/Users/Me/Desktop/sample_app/config.ru:in `new'
        from C:/Users/Me/Desktop/sample_app/config.ru:in `<main>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/builder.rb:40:in `eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/builder.rb:40:in `parse_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/server.rb:200:in `app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands/server.rb:46:in `app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/server.rb:304:in `wrapped_app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib
/rack/server.rb:254:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands/server.rb:70:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:55:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:50:in `tap'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'

C:\Users\Me\Desktop\sample_app> 
```

然后，当我在 sessionhelper 文件中只包含没有“end”的别名和 undef 行时，尝试重新启动服务器时会得到以下错误输出

```
Exiting
C:/Users/Me/Desktop/sample_app/app/helpers/sessions_helper.rb:3:in `<module:Sess
ionsHelper>': undefined method `sign_in' for module `SessionsHelper' (NameError)

        from C:/Users/Me/Desktop/sample_app/app/helpers/sessions_helper.rb:1:in
`<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:225:in `require_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:135:in `block in modules_for_helpers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:131:in `map!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:131:in `modules_for_helpers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_controller/metal/helpers.rb:92:in `modules_for_helpers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/abstract_controller/helpers.rb:95:in `helper'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_controller/railties/paths.rb:18:in `block (2 levels) in with'
        from C:/Users/Me/Desktop/sample_app/app/controllers/application_controll
er.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/inherited_reso
urces-1.3.1/app/controllers/inherited_resources/base.rb:11:in `<module:Inherited
Resources>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/inherited_reso
urces-1.3.1/app/controllers/inherited_resources/base.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/base_controller/menu.rb:2:in `<module:ActiveAdmin>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/base_controller/menu.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/base_controller.rb:2:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/resource_controller/actions.rb:2:in `<module:ActiveAdmin>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/resource_controller/actions.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/resource_controller.rb:2:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/batch_actions.rb:7:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:25:in `call'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:25:in `block in dispatch'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:24:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/event.rb:24:in `dispatch'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/application.rb:187:in `load!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/application.rb:213:in `routes'
        from C:in `routes'
        from C:/Users/Me/Desktop/sample_app/config/routes.rb:2:in `block in <top
 (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/routing/route_set.rb:260:in `draw'
        from C:/Users/Me/Desktop/sample_app/config/routes.rb:1:in `<top (require
d)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:245:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/dependencies.rb:245:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:40:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:40:in `load_paths'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/routes_reloader.rb:16:in `reload!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application.rb:108:in `reload_routes!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/reloader.rb:34:in `reload!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activeadmin-0.
5.1/lib/active_admin/reloader.rb:61:in `block in attach!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:429:in `_run__81379729__prepare__328171315
__callbacks'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2
.3/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:30:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:55:in `block in run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/initializable.rb:54:in `run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/application.rb:136:in `initialize!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from C:/Users/Me/Desktop/sample_app/config/environment.rb:5:in `<top (re
quired)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:50:11.373

您需要在定义的同一模块中执行操作。

```
module SessionsHelper
  alias :sign_in_ :sign_in
  undef :sign_in
end 
```

# android - android将FrameLayout转换为Drawable

> ID：15223012
> 
> 赞同：1
> 
> 时间：2013-03-05T11:47:33.903
> 
> 标签：android, bitmap, android-framelayout

我的 LinearLayout 中有这个 FrameLayout ：

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/desktopsFramelayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="none"
        android:src="@drawable/accept" />

</FrameLayout> 
```

然后在代码中我尝试像这样在 Drawable 中转换它：

```
FrameLayout desktopFrameLayout = (FrameLayout)findViewById(R.id.desktopsFramelayout);

        desktopFrameLayout.setDrawingCacheEnabled(true);
        desktopFrameLayout.buildDrawingCache();     
        Bitmap bitmap = desktopFrameLayout.getDrawingCache(); 
```

是`bitmap`，`null`为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:53:25.273

查看此链接并阅读 nininho 的答案： [Android View.getDrawingCache return null, only null](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)

我认为它返回 null 因为您的视图具有尺寸 (0,0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:53:17.467

可能是因为您刚刚启用了 DrawingCache，但 FrameLayout 还没有时间构建它。

尝试在 xml 中分配 drawingCacheEnabled 并调用 desktopFrameLayout.getDrawingCache();

之后，当您要求它时，它可能会构建缓存。

如果不在生命周期的后期尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:57:41.377

```
Bitmap b = null;
desktopFrameLayout.post(new Runnable() {
    desktopFrameLayout.setDrawingCacheEnabled(true);
    desktopFrameLayout.buildDrawingCache();     
    b = desktopFrameLayout.getDrawingCache();
}); 
```

# xml - 如何查找实时板球比分的 XML 和 API？

> ID：15223014
> 
> 赞同：6
> 
> 时间：2013-03-05T11:47:36.473
> 
> 标签：xml, api

我想为 iPhone 和 Android 制作一个应用程序，我想显示现场板球比分。是否有任何网站可以为实时比分提供 API 和 rss/xml 提要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-01T15:55:06.040

这是来自 ESPNCricinfo - [http://static.cricinfo.com/rss/livescores.xml](http://static.cricinfo.com/rss/livescores.xml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:08:47.363

希望这会有所帮助：Cric API [http://www.cricapi.com/](http://www.cricapi.com/)

# c# - 无法在 dll 中找到函数的入口点

> ID：15223015
> 
> 赞同：1
> 
> 时间：2013-03-05T11:47:39.413
> 
> 标签：c#, dllimport

我在 C++ COM dll 中有一个函数

```
Write( Const VARIANT *pData); 
```

其中 VARIANT 是一个结构类型

```
struct VARIANT 
{
unsigned short vt;
unsigned short wReservered;
 .....

}; 
```

我必须从我的 C# 代码中调用这个写入函数，并且将一个多维数组传递给该函数。我正在按如下方式进行编组..

c++代码

* * *

在头文件中：

```
LBE.h
class CLBE
{
public: 

 __declspec(dllexport) HRESULT __stdcall Write (/*[in]*/ const VARIANT* pData);

} 
```

其中 VARIANT 是一个结构类型

```
struct VARIANT 
{
 unsigned short vt;
 unsigned short wReservered;
 .....

}; 
```

LBE.cpp

```
extern "C"
{

__declspec(dllexport) HRESULT __stdcall Write (const VARIANT* pData)
{

//impl
}
} 
```

c# 代码

* * *

```
namespace abc 

public class dataarea 
{

[DLLImport("sample.dll",CallingConvention = CallingConvention.StdCall, EntryPoint = "Write")]
public static extern int Write ([MarshalAs(UnmanagedType.Struct)] ref object pData);

.
.
.

public saveobject()
{

    object[,] pVariant;
    //  populating pVariant 
    object tempVar = pVarriant;
    Write(ref tempVar);
    }
  } 
```

但是当我从 c# 调用 write 函数时，它会抛出一个错误，说“无法找到入口点”写“。有人可以解决这个问题吗？

# perl - PERL LZW 压缩，输出代码为 9 位长

> ID：15223016
> 
> 赞同：0
> 
> 时间：2013-03-05T11:47:40.847
> 
> 标签：perl, compression, lzw

从页面： [http ://www.verypdf.com/document/pdf-format-reference/pg_0072.htm](http://www.verypdf.com/document/pdf-format-reference/pg_0072.htm)

我正在尝试使用相同的细节来压缩和解压缩，它不能工作任何 perl 模块（LZW）

```
Source ASCII codes : 45 45 45 45 45 65 45 45 45 66

Current Output :  20 1D 00 01 0014 01 01 24

Expected compressed code :80 0B 60 50 22 0C 0C 85 01 
```

我想创建一个执行 LZW 压缩的 perl 脚本

代码 ：

```
use strict ;
  use Compress::LZW;

  my $fatdata ='-----A---B';
  my $thindata = $fatdata;

  my $compressed = compress($fatdata);
  $fatdata    = decompress($compressed);

  my $smallcompressed = compress($thindata, 9);
  $thindata        = decompress($smallcompressed, 9);

print $smallcompressed; 
```

我使用过任何其他模块，上面的代码只是示例。但我仍然没有得到正确的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:01:01.087

该[文档](http://search.cpan.org/perldoc?Compress%3a%3aLZW)仅说`12`并且`16`是第二个参数的有效值。

# c# - MVC视图能否只支持两种操作：一种是httpget和httppost？

> ID：15223017
> 
> 赞同：0
> 
> 时间：2013-03-05T11:47:46.263
> 
> 标签：c#, .net, asp.net-mvc-3

我有 2 意见说`view1`和`view2`。其中`view1`有一个`view2`名为“创建新员工”的链接。当用户单击它时，`view2`将显示。`View2`包含员工填写其基本详细信息的表格。填写员工表格后点击保存，数据将保存在数据库中。现在查看显示所有员工的详细信息。每个员工详细信息后都有一个编辑链接。如果员工单击它，则`view2`再次显示填充数据和用户编辑，然后单击保存并将数据保存在数据库中。所以最后我们给出了以下三种情况：-

1) 显示`view2`：- 一种正常的操作方法，显示`view2`为空表，员工填写。

2）填写`view2`： - 一种`[HttpPost]`发布表格的操作方法

3) 编辑`view2`- 编辑`view2`填充并保存。

我的问题是这三种情况如何在保存视图中发生？我们只有两种写action方法的方法：一种是httpget，另一种是httppost，最终每次只完成两个场景。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:51:47.223

您将`[HttpPost]`在创建和保存用户时使用。事实上，它可能是处理这两种情况的相同方法：创建时，`Id`表单中的隐藏字段将为空，并且在编辑相同字段时将有一个值（`Id`在创建时分配）。

您的方法可以使用此字段的值来决定要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:56:06.303

您可以`HttpPut`用于编辑/更新。

[这个](http://en.wikipedia.org/wiki/Representational_State_Transfer#RESTful_web_services)矩阵很好地表示了 REST 和用于每个 CRUD 操作的动词。

现在默认情况下，ASP.NET MVC3 不支持`Put`Form 方法。您可以为此目的使用[MVCContrib](http://mvccontrib.codeplex.com/wikipage?title=SimplyRestfulRouting&referringTitle=Documentation)。`SimplyRestfulRouteHandler`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:59:42.920

我只会有一个 View2 的视图模型，其中包含一个模式变量，它可以是布尔值或枚举，以表示视图是处于编辑模式还是显示模式。

然后，在 HttpGet 版本的 action 方法中，填充视图模型对象并将这个视图模型对象提供给视图进行渲染。

然后，视图可以使用给定的信息渲染各种输入或其他 HTML 元素，并使用上述布尔值或枚举值来决定是以显示模式还是编辑模式渲染视图。

HttpPost 方法保持不变。

# django - 在 ForeignKey Django 模型上继承或设置选择

> ID：15223020
> 
> 赞同：0
> 
> 时间：2013-03-05T11:47:58.473
> 
> 标签：django, foreign-keys, default, models

让我们看看这些模型：

```
from .choices import STATUS_CHOISES   

class Status(models.Model):
    current_status = models.CharField("Current status", max_length=50, choices=STATUS_CHOICES, default='new')
    status_change_date = models.DateField(verbose_name="Status change date", default=datetime.datetime.now())

class ProductRequest(models.Model):
    destination = models.CharField("Product Destination", max_length=255)
    status = models.ForeignKey(Status) 
```

选择：

```
STATUS_CHOICES = (
('new', 'New'),
('ongoing', 'Ongoing'),
('finalized', 'Finalized'),
) 
```

我需要在 ForeignKey 上设置相同的默认值并使用原始模型中的相同选项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:23:22.560

决定去简单的属性：

```
class ProductRequest(models.Model):
    destination = models.CharField("Product Destination", max_length=255)
    status = models.CharField("Request Status", max_length=50, choices=STATUS_CHOICES, default='new') 
```

寻找一种存储状态更改日期的方法..

# django - Django 保存数据库当前上下文

> ID：15223031
> 
> 赞同：0
> 
> 时间：2013-03-05T11:48:31.513
> 
> 标签：django, django-models, django-templates

我有一个名为的表`Trend`，其中包含以下字段：

```
class Trend(models.Model):
   title             = models.CharField(max_length=40)
   short_description = models.CharField(max_length=200)
   long_description  = models.CharField(max_length=2000)
   date              = models.DateField('data published')
   rating            = models.IntegerField()
   picture           = models.ImageField(upload_to='images')
   category          = models.ForeignKey(Geographic, related_name='entries') 
```

我通过发送这张表的数据`context`并用一个表显示信息。在同一页面中，我有一些表单来创建过滤器，`Trends`然后在将这些过滤器应用于表的内容之后，我希望允许用户保存该信息。

基本上，我想获得当前的上下文：

```
trend = Trend.objects.filter(Q(category__country__contains='Denmark'))
return render(request, "trend-list.html", "{"trends":trend}) 
```

然后将当前的趋势列表保存到一个新的数据库中，表的模型如下：

```
class TrendLists(models.Model):
    name = models.CharField(max_length=40, blank=False)
    list = models.ManyToManyField(Trend)
    data = models.DateField() 
```

我的问题是

如何获取页面的当前上下文以将信息保存在数据库中？

我希望我们能一起找到解决办法。

按要求更新。

我无法添加所有代码，因为它太多了，但这是表格的一部分，也是我用来询问趋势列表名称的表格。

```
<form action="#" method="post">
    <a data-toggle="modal" href="#name_list_trend" class="btn" style="color:white; background: #415dff;">Gem som ny liste</a> <!-- Save the list -->
    <input type="button" value="Vaelg tilfaeldige">
    <input class="input_orange" type="button" value="Sorter efter sogeord">
    <input type="text">
</form>

{% comment %} MODAL window to introduce the name of the list {% endcomment %}
<div id="name_list_trend" class="modal hide fade in" style="display: none;">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>Do you want to save the current trend list?</h3><br>
        <h3>Introduce the name of the list:</h3>
    </div>
    <form action="#" method="post">{% csrf_token %}
        <div class="modal-body">
            <label for="name_list">Name: </label>
            <input type="text" name="name_trend_list" value="" id="name_list" />
            <input type="text" value="" name="trends" style="display:none;">
        </div>
        <div class="modal-footer">
            <input type="submit"  class="btn btn-success" value="Send >>">
        </div>
    </form>

    <table class="table table-striped" >
        {% comment %} Check if there are elements in the trend list{% endcomment %}
        {% if trends %}
            <thead>
                <tr>
                    <th>Rating</th>
                    <th></th>
                    <th>Title</th>
                    <th>Date</th>
                    <th></th>
                </tr>
            </thead>
        {% endif %}
        <tbody>
            {% for trend in trends %}
                <tr>
                    <td>
                        <div class="trend_star_{{ trend.rating }}"></div>
                    </td>
                    <td>
                        <div class="thumbnail">
                            <img src="{{ MEDIA_URL }}{{ trend.picture }}" title="{{ trend.title }}">
                        </div>
                    </td>
                    <td class="trend_description">
                        <h2>{{ trend.title }}</h2>
                        <div><p>{{ trend.short_description }}</p></div>
                    </td>
                    <td>
                        {{ trend.date|date:"d/m/Y" }}
                    </td>
                    <td>
                        <a href="{% url read_trend trend.pk %}"  class="btn">Read</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table> 
```

如您所见，我不知道如何处理表单，因为我不知道如何获取当前上下文`trends`并保存在`Trendlist`数据库中。

也许，我以错误的方式思考问题。

# mysql - MySQL显示范围内的所有日期

> ID：15223032
> 
> 赞同：3
> 
> 时间：2013-03-05T11:48:35.977
> 
> 标签：mysql, date, range

我想显示MySQL 中a`from`和日期之间的所有日期。`to`

例如`schedule`，具有`from`和`to`字段的表中的数据是：

`from`日期是`2013-3-13`，并且

`to`日期是`2013-3-20`,

我想要的结果是：

```
 2013-3-13
 2013-3-14
 2013-3-15
 2013-3-16
 2013-3-17
 2013-3-18
 2013-3-19
 2013-3-20 
```

如何仅使用 MySQL 查询来实现这一点（不必使用存储过程，因为我不熟悉它）？

**编辑：**

[这里的答案](https://stackoverflow.com/questions/2157282/generate-days-from-date-range)非常有帮助，尽管我仍然没有完全得到想要的东西。在[这个示例](http://sqlfiddle.com/#!2/a2581/5946)中，它只运行成功但不输出任何内容。而且我不知道似乎是什么问题。

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T13:13:36.607

您可以使用以下内容生成日期列表：

```
select a.Date,  s.*
from 
(
  select curdate() + INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY as Date
  from (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as a
  cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as b
  cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as c
) a
inner join schedule s
  on a.Date >= s.fromDate 
  and a.Date <= s.toDate 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/0cbc0/13)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-05T12:13:58.993

尝试从日期开始是 2013-3-13，到日期是 2013-3-20，

```
"SELECT * FROM schedule WHERE Field BETWEEN $fromdate AND $todate"; 
```

# serialization - 为什么 WebAPI 不会将我的 POCO 作为 XML 返回？

> ID：15223039
> 
> 赞同：2
> 
> 时间：2013-03-05T11:49:00.440
> 
> 标签：serialization, asp.net-web-api, poco

WebAPI 忽略了传入请求中的 Accept: 标头，并且似乎总是将我的 POCO 对象序列化为 JSON。我正在使用[WizTools RestClient](https://code.google.com/p/rest-client/downloads/list)来测试 API 调用，并设置请求 HTTP 标头：

```
GET /api/people/evh123
Accept: application/xml 
```

如果我修改我的控制器以返回`string[]`或其他一些本机类型，我会得到预期的 XML。我见过几个人建议将这一行添加到我的`Application_Start()`方法中：

```
GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

但就我而言，这没有任何区别。

我的 API 控制器：

```
using System.Web.Http;
using Spyglass.Api.Entities;

namespace Spyglass.Api.Controllers {
    public class PeopleController : ApiController {

        public Person Get(string personId) {
            var member = new Person(personId) { FullName = "Eddie van Halen" };
            return (member);
        }
    }
} 
```

我的路线配置：

```
using System.Web.Http;

namespace Spyglass.Api {
    public static class WebApiConfig {
        public static void Register(HttpConfiguration config) {
            config.Routes.MapHttpRoute(
                name: "PeopleApi",
                routeTemplate: "api/people/{personId}/{controller}/{id}",
                defaults: new {id = RouteParameter.Optional, controller = "People"}
                );
        }
    }
} 
```

我的 POCO：

```
namespace Spyglass.Api.Entities {
    public class Person {
        public string PersonId { get; set; }
        public string FullName { get; set; }

        public Person(string personId) {
            this.PersonId = personId;
        }
    }
} 
```

我是否缺少 POCO 的某种自定义序列化配置？没有通常会导致 XML 序列化程序头痛的循环引用或复杂类型……有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:05:00.033

你需要用 [DataContract] 和 [DataMember] 属性来装饰你的对象

```
[DataContract]
public class Person
{

    [DataMember]
    public string PersonId { get; set; }

    [DataMember]
    public string FullName { get; set; }

    public Person(string id)
    {
        PersonId = id;
    }
} 
```

或者，确保您的 POCO 具有默认的无参数构造函数。这是 DataContractSerializer 的限制。您也可以使用不同的序列化程序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-05T11:53:53.637

您可以尝试从 global.asx.cs 中删除 json 格式化程序；

```
GlobalConfiguration.Configuration.Formatters.Remove(GlobalConfiguration.Configuration.Formatters.JsonFormatter); 
```

这将只保留 XML 格式化程序。

# objective-c - [__NSCFString zOrder]：发送到实例的无法识别的选择器

> ID：15223040
> 
> 赞同：0
> 
> 时间：2013-03-05T11:49:00.473
> 
> 标签：objective-c, xcode, cocos2d-iphone, singleton

以前从未遇到过这个，有没有人遇到过以下日志的崩溃错误？

```
-[__NSCFString zOrder]: unrecognized selector sent to instance 0x11da100 
```

由于某种原因，它在这一行崩溃：

```
 [[MMClass alloc] init]; 
```

我的单例类实现如下所示：

```
static id instance = nil;

+ (MMClass *)sharedInstance {

    @synchronized([MMClass class])
    {
        if (!instance)
            [[MMClass alloc] init];
        return instance;
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:59:20.677

您没有将初始化的对象分配给您的变量。此外，最推荐的创建单例的方法是：

```
+ (MMClass *)sharedInstance {
    static dispatch_once_t onceToken;
    static MMClass* _sharedInstance = nil;
    dispatch_once(&onceToken, ^{
        _sharedInstance = [[MMClass alloc] init];
    });
    return _sharedInstance;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:55:21.463

如您所见，问题是一条消息`zOrder`被发送到`NSString`. 您应该在项目中搜索`zOrder`消息。

此外，Xcode 应该在调试器中运行并设置异常断点时查明有问题的代码。

# c++ - 为什么这段代码更快？

> ID：15223041
> 
> 赞同：-4
> 
> 时间：2013-03-05T11:49:06.290
> 
> 标签：c++, optimization

这个问题快把我逼疯了。顶部的代码在我的计算机上执行大约 0.3 秒，而底部的代码执行大约 2.7 秒。但是，我尝试将第二个代码调整为尽可能与第一个代码相似，但它似乎总是更慢。谁能告诉我为什么第一个代码的执行速度比第二个快得多？

**更快的代码**

```
#include <cstdio>
#include <set>
#define ls(x) (x & (-x))
using namespace std;
int tc, n;
set<long long> s;
long long p, a[35];
int main () {
    freopen("mini3b.in","r",stdin);
    scanf("%d", &tc);
    while (tc--) {
        s.clear();
        scanf("%lld%d", &p, &n);
        for (int i = 0; i < n; ++i) scanf("%lld", &a[i]);
        int h = n/2;
        for (int i = 0; i < (1<<h); ++i) {
            long long sum = 0;
            for (int j = 0; j < h; ++j) if (i&(1<<j)) sum += a[j];
            s.insert(sum);
        }
        bool found = false;
        for (int i = 0; (i < (1<<(n-h))) && !found; ++i) {
            long long sum = 0;
            for (int j = 0; j < n-h; ++j) if (i&(1<<j)) sum += a[h+j];
            if (s.find(p-sum) != s.end()) found = true;
        }
        printf(found? "YES\n":"NO\n");
    }
} 
```

**较慢的代码**

```
#include <cstdio>
#include <set>
using namespace std;
long long n, bars[35];
int t, p;
set<long long> s;
int main(){
    freopen("mini3b.in","r", stdin);
    scanf("%d", &t);
    while (t--){
        s.clear();
        scanf("%lld%d", &n, &p);
        for (int i=0;i<p;++i) scanf("%lld", &bars[i]);
        int limit=p/2;
        for (int i=0;i<(1<<limit);++i){
            long long sum=0;
            for (int j=0;j<limit;++j) if (i&(1<<j)) sum+=bars[j];
            s.insert(sum);
        }
        bool found=false;
        for (int i=0;i<(1<<(n-limit))&&!found;++i){
            long long sum=0;
            for (int j=0;j<p-limit;++j) if (i&(1<<j)) sum+=bars[limit+j];
            if (s.find(n-sum) != s.end()) 
                found=true;
        }
        printf(found?"YES\n":"NO\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:04:59.000

在第 4 个 for 循环中，您有

```
for (int i = 0; (i < (1<<(n-h))) && !found; ++i) { // fast one
                          ^ 
```

反对

```
for (int i=0;i<(1<<(n-limit))&&!found;++i){ // slow one
                    ^ 
```

请注意，快速代码中的“n”是慢代码中的“p”。所以你应该有

```
for (int i=0;i<(1<<(p-limit))&&!found;++i){ // slow one
                    ^ 
```

# php - 未定义变量：num

> ID：15223045
> 
> 赞同：0
> 
> 时间：2013-03-05T11:49:11.483
> 
> 标签：php, mysql, pdo

我正在尝试创建一个简单的登录系统，并且正在查询用户提供的用户名是否存在于数据库中。但是我在获取行数时遇到了麻烦。我一直在获取未定义的变量 num：错误。我也尝试使用，

```
$num = $stmt->rowCount(); 
```

但是，然后我在非对象错误上调用成员函数 rowCount()。我对 php 和 Web 开发非常陌生，这让我很困惑，我不知道如何让它工作，有人可以帮助我吗？这是 db.php 文件的代码

```
<?php
require "config.php";

function DBconnect($config) {
    try {
        $conn = new PDO('mysql:host=localhost;dbname=' . $config['database'],
                        $config['username'],
                        $config['password']);

        $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        return $conn;
    } catch(Exception $e) {
        return false;
    }
}

function query($query, $bindings, $conn) {
    $stmt = $conn->prepare($query);
    $stmt->execute($bindings);

    return $stmt;
} 
```

这是登录页面的 index.php 文件的代码。

```
<?php

// Allow sessions to be passed so we can see if the user is logged in
session_start();

// include the necessary files
require "db.php";
require "functions.php";
include "index.view.php";

//conect to the database so we can check, edit or ,data to our users table
$conn = DBconnect($config);

// if the user has submitted the form
if( $_SERVER["REQUEST_METHOD"] === "POST") {

    //protect the posted value then store them to variables
    $username = protect($_POST["username"]);
    $password = protect($_POST["password"]);

    //Check if the username or password boxes were not filled in
    if ( !$username || !$password ){
        // if not display an error message.
        echo "You need to fill in a username and password!";
    }else
        // if correct continue cheking

        //select all the rows where the username and password match the ones submitted by the user
        query(  "SELECT * FROM users WHERE username = :username",
                array("username" => $username),
                $conn);
        $num = $stmt->fetchColumn(); 

        //check if there was not a match
        if( $num == 0) {
            //if not display an error message
            echo "The username you entered does not exist!";
        }else{
            //if there was a mactch continue chekcing

            //select all rows where the username and password match the ones submitted by the user
            query( "SELECT * FROM users WHERE username =:username && password = :pasword",
                    array("username" => $username, "password" => $password ),
                    $conn);
            $num = $stmt->fetchColumn();    

            //check if there was not a match
            if( $num == 0) {
                //if not display error message
                echo "Username and password do not mactch";
            }else {
                //if there was continue checking

                //split all the fields from the correct row into an associative array
                $row = $user->fetch(PDO::FETCH_ASSOC);
                //check to see if the user has not activated their account
                if($row["active"] != 1) {
                    //if not display an error message
                    echo "You have not yet activated your account!";
                }else {
                    //if so then log them in

                    // set the login session storing their id. We use this to
                    // see if they are logged in or not.
                    $_SESSION["uid"] = $row["id"];
                    //show message confirming that they are loggd in
                    echo "You have succesfully logged in!";
                    //update the online field to 50 seconds in the future
                    $time = date("u")+50;
                    query( "UPDATE users SET online = :time WHERE id = :id",
                            array("time" => $time, "id" => $_SESSION["uid"]),
                            $conn);
                    //redirect them to the usersonline page
                    header("Location: usersOnline.php");
                }
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:53:59.687

您错过了`$stmt`作为`query()`. 将调用更改为：

```
$stmt = query(....);
$num = $stmt->rowCount(); 
```

* * *

请注意，提供有关以下内容的详细通知被认为是不安全的

*   用户名错误
*   密码错误
*   两者都是错误的。

如果这样做，攻击者很容易获得有效的用户名。Onece 拥有用户名，它需要更少的努力来获取有效帐户的密码。

此外，我不会使用`rowCount()`它，因为每个数据库驱动程序都不会返回行数。因此，如果您曾经使用不同的数据库，代码可能会失败。

将查询更改为：

```
SELECT count(*) AS number_of_rows, * FROM users WHERE username =:username && password = :pasword" 
```

...然后从结果集中获取“number_of_rows”：

```
if ( !$username || !$password ){
    // if not display an error message.
    echo "You need to fill in a username and password!";
}else

    //select the number of rows where the username and password match the ones submitted by the user
    query(  "SELECT count(*) as number_of_records, * FROM users WHERE username = :username AND password = :password",
            array("username" => $username, "password" => "$password"),
            $conn);
    $record = $stmt->fetch();
    if($record['number_of_records'] !== '1') {
        echo 'wrong username and / or password';
    }
} 
```

进一步说明：**切勿在数据库中存储未加密的密码**

相反，您应该存储由sha1 或 md5 等*加盐*单向散列函数散列的密码。为简洁起见，我不会在这里举一个例子。我会用谷歌搜索这个或问另一个关于 SO 的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:54:14.053

您的`query()`函数返回一个语句，但您没有从调用它的位置保存返回值。

改变

```
query(.....); 
```

到

```
$stmt = query(.....); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:11:42.667

我受不了这么臃肿的代码。所以，这是一个正确的版本，没有所有无用、不必要和错误的代码：

```
if( $_SERVER["REQUEST_METHOD"] == "POST") {
    $sql = "SELECT id,active FROM users WHERE username=? && password=?";
    $stm = query($sql, array($_POST["username"], $_POST["password"]), $conn);
    $row = $stm->fetch(PDO::FETCH_ASSOC);
    if(!$row) {
        echo "Username and password do not mactch";
    } elseif($row["active"] != 1) {
        echo "You have not yet activated your account!";
    } else {
        $_SESSION["uid"] = $row["id"];
        $time = date("u")+50;
        $sql  = "UPDATE users SET online=? WHERE id=?";
        query($sql, array($time, $row["id"]), $conn);
        header("Location: usersOnline.php");
        exit;
    }
} 
```

# wordpress - 网站迁移后 Wordpress 上传路径不正确

> ID：15223046
> 
> 赞同：1
> 
> 时间：2013-03-05T11:49:18.827
> 
> 标签：wordpress, upload

我最近迁移了一个 Wordpress 网站，除了尝试上传一些新媒体之外，一切都很好。我收到一条错误消息，指出上传失败，因为：

上传的文件无法移动到 /var/www/vhosts/mysite.org.uk/httpdocs/wp-content/uploads。

它似乎在不正确的站点 url 之后添加 /httpdocs/。这是在哪里定义的，我该如何更改？

# spring - springMvc Hibernate CRUD应用程序无法删除

> ID：15223050
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:49:33.697
> 
> 标签：spring, hibernate, spring-mvc, crud

我无法成功删除记录或数据。我认为我的问题出在 ProductController.java 内部。帮助我摆脱这个错误。

* * *

## 列表.jsp

```
<%@page session="false" %>
<%@page contentType="text/html;charset=UTF-8" %>
<%@page pageEncoding="UTF-8" %>

<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>:PharmaCloud System::</title>
    <c:import url="../css.jsp"/>
</head>
<body>
<div class="container">
    <h1>Products List</h1>

    <div class="span-28 last">
        <fieldset>
            <c:forEach items="${Product}" var="products">
                <p>Code : ${products.productid}</p>

                <p>ISBN : ${products.productname}</p>

                <p>Title : ${products.producttype}</p>

                <ul>
                    <li>
                        <form:form action="../${products.productid}" method="GET">
                        <input alt="Detail" type="image" value="Detail"/>
                        </form:form>
                    <li><form:form action="../${products.productid}" method="DELETE">
                        <input alt="Delete" title="Delete Person" type="image"
                               value="Delete"/>
                    </form:form></li>
                </ul>
            </c:forEach>
            <c:if test="${pageCount>1}">
                <c:forEach begin="1" end="${pageCount}" var="page" step="1">
                    <a href="<c:url value="../list/${page}"/>">${page}</a>

                </c:forEach>
            </c:if>
        </fieldset>
        <ul>
            <li><a href="<c:url value="/"/>">Main Menu</a></li>
            <li><a href="<c:url value="/products"/>">Create Product</a></li>
        </ul>
    </div>
</div>
</body>
</html> 
```

产品控制器.java

```
package com.os.springjpa.controller;

import javax.validation.Valid;
import java.lang.*;
import org.apache.log4j.Logger;
import org.hibernate.type.LongType;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.os.springjpa.dao.BookDao;
import com.os.springjpa.entity.Book;
import com.os.springjpa.utils.Utils;

/**
 * @author kris;
 *         This class is using Path Variable style as example like Rest
 *         Style. Path Variable will handling like url string but so simple then
 *         url string. I'm also still not found how to make url string as simple
 *         as posible in view layer.
 */
@Controller
@RequestMapping("/book")
public class BookController {

    @Autowired
    private BookDao bookDao;
    private final int PAGE_SIZE = 2;
    Logger logger = Logger.getLogger(BookController.class);

    @RequestMapping(method = RequestMethod.GET)
    public String form(Model model) {
    System.out.println(org.hibernate.Version.getVersionString());
        model.addAttribute(new Book());
        return "book/create";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String create(@Valid Book book, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            logger.info("Error has been detect");
            return "book/create";
        }
        if (bookDao.saveOrUpdate(book)) {
            book = bookDao.getByIsbn(book.getIsbn());
            return "redirect:/book/" + book.getId();
        } else {
            return "/exception";
        }
    }

    @RequestMapping(method = RequestMethod.PUT)
    public String update(@Valid Book book, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            logger.info("Error has been detect");
            return "book/update";
        }
        if (bookDao.saveOrUpdate(book)) {
            return "redirect:/book/" + book.getId();
        } else {
            return "/exception";
        }
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.DELETE)
    public String delete(@PathVariable("id") Integer id) {
        logger.info("Delete Method Has Call");
        Book book = bookDao.getById(id);
        if (bookDao.delete(book)) {
            return "redirect:/book/list/1";
        } else {
            return "/exception";
        }
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String detail(@PathVariable Integer id, Model model) {
        Book book = bookDao.getById(id);
        if (book == null) {
            return "/exception";
        }
        model.addAttribute(book);
        return "book/detail";
    }

    @RequestMapping(value = "/edit/{id}", method = RequestMethod.GET)
    public String edit(@PathVariable Integer id, Model model) {
        Book book = bookDao.getById(id);
        if (book == null) {
            return "/exception";
        }
        model.addAttribute(book);
        return "book/update";
    }

    @RequestMapping(value = "/list/{page}", method = RequestMethod.GET)
    public String listPaging(@PathVariable Integer page, Model model) {
        // Create simple pagination
        model.addAttribute("books", bookDao.getAll((page - 1) * PAGE_SIZE, PAGE_SIZE));
      //model.addAttribute("pageCount", Utils.getPageCount(PAGE_SIZE, (Long) bookDao.countAllBook().get(0)));
        model.addAttribute("pageCount", Utils.getPageCount(PAGE_SIZE, Long.parseLong(bookDao.countAllBook().get(0).toString())));
        return "book/list";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:30:39.293

错误在事务bean内部......所以我放置了会话管理和事务管理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:42:22.020

代码具有无法从数据库中删除的注释字段设置。

# android - Android 在 setContentView 内存不足

> ID：15223054
> 
> 赞同：1
> 
> 时间：2013-03-05T11:49:55.650
> 
> 标签：android

我制作了一个有 6 个屏幕的全屏点击应用程序。该应用程序在点击后从屏幕上消失。每个屏幕都有自己的活动（步骤 1、步骤 2、步骤 3 等，直到步骤 6）。没什么复杂的，布局很简单，只有一个背景图片和一个按钮。当问题开始时，我到达屏幕 3，突然下一个屏幕不会显示，但应用程序因内存不足错误而崩溃。我试过移动到屏幕 4、5、6，但没有运气，但如果我从屏幕 3 回到屏幕 2，那么它就可以了！有东西漏了，但我不知道是什么。背景图像很小。

我正在使用以下代码在活动之间进行更改：

```
Intent myIntent = new Intent(Step3.this, Step6.class); 
Step3.this.startActivity(myIntent); 
System.gc(); 
```

这是日志：

```
03-05 12:38:44.090: D/dalvikvm(22184): WAIT_FOR_CONCURRENT_GC blocked 0ms
03-05 12:38:44.115: D/dalvikvm(22184): GC_EXPLICIT freed 3622K, 8% free 55598K/59911K, paused 1ms+3ms, total 22ms
03-05 12:39:33.965: D/dalvikvm(22184): WAIT_FOR_CONCURRENT_GC blocked 0ms
03-05 12:39:34.040: D/dalvikvm(22184): GC_EXPLICIT freed 31K, 8% free 55633K/59911K, paused 11ms+5ms, total 74ms
03-05 12:39:34.040: I/Choreographer(22184): Skipped 2910 frames!  The application may be doing too much work on its main thread.
03-05 12:39:43.850: D/dalvikvm(22184): GC_FOR_ALLOC freed 34K, 8% free 55613K/59911K, paused 23ms, total 24ms
03-05 12:39:43.860: I/dalvikvm-heap(22184): Grow heap (frag case) to 58.364MB for 3686416-byte allocation
03-05 12:39:43.900: D/dalvikvm(22184): GC_CONCURRENT freed <1K, 7% free 59213K/63559K, paused 14ms+5ms, total 39ms
03-05 12:39:43.935: D/dalvikvm(22184): GC_FOR_ALLOC freed 0K, 7% free 59213K/63559K, paused 18ms, total 18ms
03-05 12:39:43.935: I/dalvikvm-heap(22184): Forcing collection of SoftReferences for 14745616-byte allocation
03-05 12:39:43.955: D/dalvikvm(22184): GC_BEFORE_OOM freed <1K, 7% free 59213K/63559K, paused 18ms, total 19ms
03-05 12:39:43.955: E/dalvikvm-heap(22184): Out of memory on a 14745616-byte allocation.
03-05 12:39:43.955: I/dalvikvm(22184): "main" prio=5 tid=1 RUNNABLE
03-05 12:39:43.955: I/dalvikvm(22184):   | group="main" sCount=0 dsCount=0 obj=0x413f0508 self=0x413e0468
03-05 12:39:43.955: I/dalvikvm(22184):   | sysTid=22184 nice=0 sched=0/0 cgrp=apps handle=1074609968
03-05 12:39:43.955: I/dalvikvm(22184):   | schedstat=( 1501533493 98715963 900 ) utm=116 stm=33 core=3
03-05 12:39:43.955: I/dalvikvm(22184):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
03-05 12:39:43.955: I/dalvikvm(22184):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:623)
03-05 12:39:43.955: I/dalvikvm(22184):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:476)
03-05 12:39:43.955: I/dalvikvm(22184):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
03-05 12:39:43.955: I/dalvikvm(22184):   at android.content.res.Resources.loadDrawable(Resources.java:1963)
03-05 12:39:43.955: I/dalvikvm(22184):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-05 12:39:43.955: I/dalvikvm(22184):   at android.widget.ImageView.<init>(ImageView.java:120)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.widget.ImageView.<init>(ImageView.java:110)
03-05 12:39:43.960: I/dalvikvm(22184):   at java.lang.reflect.Constructor.constructNative(Native Method)
03-05 12:39:43.960: I/dalvikvm(22184):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-05 12:39:43.960: I/dalvikvm(22184):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-05 12:39:43.960: I/dalvikvm(22184):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.Activity.setContentView(Activity.java:1924)
03-05 12:39:43.960: I/dalvikvm(22184):   at com.frogr4g.networktrial.Step6.onCreate(Step6.java:11)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.Activity.performCreate(Activity.java:5206)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.os.Looper.loop(Looper.java:137)
03-05 12:39:43.960: I/dalvikvm(22184):   at android.app.ActivityThread.main(ActivityThread.java:4898)
03-05 12:39:43.960: I/dalvikvm(22184):   at java.lang.reflect.Method.invokeNative(Native Method)
03-05 12:39:43.960: I/dalvikvm(22184):   at java.lang.reflect.Method.invoke(Method.java:511)
03-05 12:39:43.960: I/dalvikvm(22184):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-05 12:39:43.960: I/dalvikvm(22184):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-05 12:39:43.960: I/dalvikvm(22184):   at dalvik.system.NativeStart.main(Native Method)
03-05 12:39:43.960: A/libc(22184): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 22184 (4g.networktrial)
03-05 12:39:57.150: D/dalvikvm(22766): GC_FOR_ALLOC freed 64K, 6% free 12115K/12867K, paused 34ms, total 35ms
03-05 12:39:57.155: I/dalvikvm-heap(22766): Grow heap (frag case) to 15.883MB for 3686416-byte allocation
03-05 12:39:57.170: D/dalvikvm(22766): GC_CONCURRENT freed <1K, 5% free 15714K/16519K, paused 3ms+1ms, total 14ms 
```

编辑：我创建了一个类似的六个屏幕的应用程序，只有 textview 和一个按钮和一个导航链 (1 --> 2 --> 3 --> 4 --> 5 --> 6 --> 1) 没有任何图像，它就像黄油一样工作。（如预期的那样）。因此，这绝对与占用大量内存的图像有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:56:48.453

有几件事要看。

*   您是否提供了多个密度的背景图像？缩放有时会消耗大量内存。
*   你用`startActivity`or`startActivityForResult()`吗？在后一种情况下，您的旧 Activity 对象不能被销毁。
*   你在`Application`课堂上收集信息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:54:06.627

`recycle()`离开活动后，您的位图将转到另一个活动并重新排序代码：

```
bitmap.recycle();
System.gc();
Intent myIntent = new Intent(Step3.this, Step6.class); 
Step3.this.startActivity(myIntent); 
```

# c++ - 从 C++ 调用 Lua 5.2 函数

> ID：15223056
> 
> 赞同：5
> 
> 时间：2013-03-05T11:50:06.227
> 
> 标签：c++, lua, lua-5.2

我对Lua很陌生。我一直在看一些关于如何从 C++ 调用 Lua 函数的示例代码，但是示例代码使用 5.1，我正试图让它与 5.2 一起使用。

这是我的评论有问题的示例代码：

```
lua_State *luaState = luaL_newstate();
luaopen_io(luaState);
luaL_loadfile(luaState, "myLuaScript.lua");
lua_pcall(luaState, 0, LUA_MULTRET, 0);
//the code below needs to be rewritten i suppose
lua_pushstring(luaState, "myLuaFunction");
//the line of code below does not work in 5.2
lua_gettable(luaState, LUA_GLOBALSINDEX);
lua_pcall(luaState, 0, 0, 0); 
```

我在 5.2 参考手册（[http://www.lua.org/manual/5.2/manual.html#8.3](http://www.lua.org/manual/5.2/manual.html#8.3)）中读到需要从注册表获取全局环境（而不是上面的 lua_gettable 语句）但是我无法确定需要进行哪些更改才能使其正常工作。我试过了，例如：

```
lua_pushglobaltable(luaState);
lua_pushstring(luaState, "myLuaFunction");
lua_gettable(luaState, -2);
lua_pcall(luaState, 0, 0, 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:27:21.953

下面的代码应该适用于 5.1 和 5.2。

```
lua_getglobal(luaState, "myLuaFunction");
lua_pcall(luaState, 0, 0, 0); 
```

但请务必测试 和 的返回`luaL_loadfile`码`lua_pcall`。您可能会更好地使用`luaL_dofile`.

# c++ - Github项目上的C ++编译错误

> ID：15223064
> 
> 赞同：0
> 
> 时间：2013-03-05T11:50:23.823
> 
> 标签：c++

我正在尝试从下面的 github 位置编译代码并得到一个错误，非常感谢任何帮助

Github 项目是[https://github.com/aranetic/process-pst](https://github.com/aranetic/process-pst)

错误是

```
~/process-pst (master ✘)✭  ᐅ make
[  7%] Building CXX object CMakeFiles/ProcessPstLib.dir/edrm.cpp.o
/Users/gwest/process-pst/edrm.cpp: In function 'void<unnamed>::output_file(edrm_context&,        const std::wstring&, const std::wstring&, const std::vector<unsigned char,    std::allocator<unsigned char> >&)':
/Users/gwest/process-pst/edrm.cpp:177: error: 'class boost::filesystem::path' has no     member named 'file_string'
make[2]: *** [CMakeFiles/ProcessPstLib.dir/edrm.cpp.o] Error 1
make[1]: *** [CMakeFiles/ProcessPstLib.dir/all] Error 2
make: *** [all] Error 2 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:54:38.003

从您在[boost/filesystem/path.hpp](http://www.boost.org/doc/libs/1_52_0/boost/filesystem/path.hpp)中可以看到：

```
# if defined(BOOST_FILESYSTEM_DEPRECATED)
    //  deprecated functions with enough signature or semantic changes that they are
    //  not supplied by default 
    const std::string file_string() const               { return string(); }

    // ...

# endif 
```

file_string() 是“默认不提供”。所以你有三个选择：

1.  在没有 BOOST_FILESYSTEM_DEPRECATED 标志的情况下重新编译 boost
2.  使用较旧的 bo​​ost 库。
3.  正确的源代码你试图编译。

# javascript - 如何查看填写的字段数？

> ID：15223069
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:50:41.513
> 
> 标签：javascript, html, logic

我陷入了这个小问题：

我有一个页面，用户最多可以填写 10 个字段。但他不必，他也可以只填写一个。起初，用户只有一个字段，然后他可以通过`add`按钮添加更多字段。

我的问题是：我怎么知道用户添加并填写了多少字段，以便我可以将它们保存到数据库中？

我的愿景是这样的：

我将对字段进行计数，然后将此总和传递给服务器端代码。然后在那里，我将循环总和时间和......？我被困在这里，:(

有人可以建议我请更简单的逻辑，

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:53:45.540

您可以利用 HTML 元素的数组功能。

让所有字段都有`name`这样的：

```
<input type="text" name="Set[]"></input> 
```

在这种情况下，您的`$_POST`-array 将有一个名为 的数组`Set`，您可以对其进行迭代。丢弃那些，`empty()`返回的地方`true`，你都准备好了。

编辑：用自动增量替换固定索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:53:49.047

一个更好的主意可能是：

当您单击添加按钮以添加另一个文本字段时，会同时显示一个保存按钮并使用 jquery ajax 立即保存该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:56:17.897

```
var numberoffields = 0;
addfield(){
//your code to add field here
numberoffields += 1;
} 
```

并将“numberoffields”发布到您的服务器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:05:07.360

试试这个服务器端代码：

```
<?php
    $vals = array();
    foreach($_POST as $key=>$val) {
        if(!empty($val)) {
            $vals[] = $val;
        } 
    }
?> 
```

使用`$vals`. 你完成了。

# javascript - EaselJS BitmapAnimation 问题

> ID：15223082
> 
> 赞同：0
> 
> 时间：2013-03-05T11:51:12.590
> 
> 标签：javascript, easeljs

我让我的代码像这样

```
<script src="http://code.createjs.com/easeljs-0.6.0.min.js"></script>
<script src="http://code.createjs.com/preloadjs-0.3.0.min.js"></script>
<script type="text/javascript" src="src/easeljs/utils/UID.js"></script>
<script type="text/javascript" src="src/easeljs/geom/Matrix2D.js"></script>
<script type="text/javascript" src="src/easeljs/display/DisplayObject.js"></script>
<script type="text/javascript" src="src/easeljs/display/Container.js"></script>
<script type="text/javascript" src="src/easeljs/display/Stage.js"></script>
<script type="text/javascript" src="src/easeljs/events/MouseEvent.js"></script>
<script type="text/javascript" src="src/easeljs/display/Shape.js"></script>
<script type="text/javascript" src="src/easeljs/display/Graphics.js"></script>
<script type="text/javascript" src="src/easeljs/utils/Ticker.js"></script>
<script type="text/javascript" src="src/easeljs/display/SpriteSheet.js"></script>
<script type="text/javascript" src="src/easeljs/display/BitmapAnimation.js"></script>
<script type="text/javascript" src="src/easeljs/geom/Rectangle.js"></script>

<script>
var canvas;var stage;var rect;var bottle;
function init() {
canvas = new createjs.Stage("democanvas");
sheet = {"frames": [[120, 0, 60, 200, 0, -20, 0], [180, 0, 60, 200, 0, -20, 0], [240, 0, 58, 200, 0, -21, 0], [62, 0, 58, 200, 0, -21, 0], [0, 0, 62, 200, 0, -19, 0]], "images": ["swf/bottle.png"], "animations": {"sosro": {"frames": [1]}, "nu": {"frames": [2]}, "joy": {"frames": [0]}, "tra": {"frames": [4]}, "mizone": {"frames": [3]}}};
var ss = new createjs.SpriteSheet(sheet);
bottle = new createjs.BitmapAnimation(ss);
    canvas.addChild(bottle);
    bottle.x = 100;
    bottle.y = 100;
    createjs.Ticker.addEventListener('tick', canvas);
}
</script>
<canvas id="democanvas" width="500" height="200"  style="border:1px solid #000000; background-color:#999;" >
alternate content
</canvas>
<script>
    init();
</script> 
```

但不知何故，我的动画不会显示。我使用 Zoe 制作 png javascript 动画。我的脚本中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:34:15.523

我在社区网站上回答了这个问题。 [http://community.createjs.com/discussions/easeljs/967-bitmapanimataion-wont-show](http://community.createjs.com/discussions/easeljs/967-bitmapanimataion-wont-show)

确保在 BitmapAnimations 上使用 gotoAndStop 或 gotoAndPlay，否则它们不会显示。

# wcf - 将 WCF 服务操作的参数标记为必填

> ID：15223088
> 
> 赞同：2
> 
> 时间：2013-03-05T11:51:26.270
> 
> 标签：wcf, datacontract

我有以下服务合同：

```
[ServiceContract(Namespace = Constants.NAMESPACE)]
public interface IAuthenticationService
{
    [OperationContract]
    LoginResult Login(LoginData data);
}

[DataContract(Namespace = Constants.NAMESPACE)]
public class LoginData
{
    [DataMember(IsRequired = true, Order = 1)]
    public string SupplierName { get; set; }

    [DataMember(IsRequired = true, Order = 2)]
    public string Token { get; set; }
} 
```

当我使用 Soap UI 创建一个新请求时，请求显示如下：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://namepsace.org/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:Login>
         <!--Optional:-->
         <ws:data>
            <ws:SupplierName>?</ws:SupplierName>
            <ws:Token>?</ws:Token>
         </ws:data>
      </ws:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

我找不到`<!--Optional:-->`数据元素上方的原因。

上面的代码完全按照[如何根据需要指定 OperationContract 的参数中建议的答案](https://stackoverflow.com/questions/3406559/how-to-specify-a-parameter-of-an-operationcontract-as-required)

我需要做什么才能使 data 参数成为必需？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-05T14:37:59.117

[这](https://stackoverflow.com/questions/12836534/wcf-is-there-an-attribute-to-make-parameters-in-the-operationcontract-required)是您可以使用的，我在搜索此问题的答案时遇到了这个

# php - Jquery 在附加的 html 中追加

> ID：15223091
> 
> 赞同：0
> 
> 时间：2013-03-05T11:51:28.677
> 
> 标签：php, javascript, jquery

我有两个添加空值 (SPM) 的函数 add_spm，在每个 SPM 下，用户可以有多个 STATEMENTS。当我使用 javascript 函数添加一个 spm 时，它可以工作，然后当我在这个新创建的下添加一个 STATEMENT 时，它不会显示在 html 中（尽管正在创建），当我重新加载页面并调用 add_statement 函数时，它可以工作，所以我猜想 jquery 不会从 add_spm 函数（？）中读取新生成的 HTML。Insert 语句和 insert_spm.php 只是将此信息插入数据库并返回一个 ID。

```
function add_spm(spid, oid)
{
$.post('insert_spm.php',{ ci_caseid: '<? echo $ci_caseid; ?>', sp_id: spid, o_id: oid},  function(data) {
$('li#recordsArray_' + spid + '').after('<li id="recordsArray_' + data + '" class="list-spm"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span><span class="editspm" id="' + data + '"><? echo NYTT_SPM_ADDED; ?></span><div class="clearboth"></div><div class="settinn"><a href="/cb_kobling2_koble.php?action=spm_view&sp_id=' + data + '"><? echo HENT_STATEMENT; ?></a><br><a href="#" onClick="add_statement(' + data + '); return false;"><? echo SETTINN_STATEMENT; ?></a></div></li>');
$('.editspm').editable('savespm.php', {});
});

function add_statement(spid)
{
$.post('insert_statement.php',{ ci_caseid: '<? echo $ci_caseid; ?>', sp_id: spid},  function(data) {
$('ul.sortable[spid="' + spid + '"]').append('<li id="recordsArray_' + data  + '" class="list-statement"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span><span class="edit" id="' + data + '"><? echo NYTT_STATEMENT_ADDED; ?></span><div class="clearboth"></div></li>').find('.edit').editable('save.php', { })
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:53:36.520

将动态创建的 html 绑定到 jquery 使用`.on`jquery 的功能

参考：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

或者你可以使用`.delegate`函数

参考：[http ://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# jquery - 在多个手风琴中嵌套 Jquery 选项卡

> ID：15223092
> 
> 赞同：0
> 
> 时间：2013-03-05T11:51:34.867
> 
> 标签：jquery, menu, tabs, accordion

[http://jsfiddle.net/SamHats/gjFUT/](http://jsfiddle.net/SamHats/gjFUT/)

我正在尝试使用手风琴中的标签创建带有 JQuery 的菜单。我需要让标签内容显示在手风琴之外。

我目前只使用第一个显示标签的手风琴。

我的想法是我需要添加选项卡类，但我对 JQuery 很陌生。

```
$(function () {
    $("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");
    $("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:56:34.517

我猜你想要这个：我剪下菜单的 div 并将它放在手风琴上方

[http://jsfiddle.net/gjFUT/2/](http://jsfiddle.net/gjFUT/2/)

```
<body>
    <div id="tabs">
         <div>
                <ul>
                    <li><a href="#tabs-1">Records</a>

                    </li>
                    <li><a href="#tabs-2">Notes</a>

                    </li>
                    <li><a href="#tabs-3">Diary</a>

                    </li>
                </ul>
            </div>
        <div id="accordion" class="panel" style="clear:both">
                <h3>Darwin Tutorial</h3>

             <h4>User Guide</h4>

            <div>
                <ul>
                    <li><a href="#tabs-4">Other 4</a>

                    </li>
                    <li><a href="#tabs-5">Other 5</a>

                    </li>
                    <li><a href="#tabs-6">Other 6</a>

                    </li>
                </ul>
            </div>
             <h3>Support</h3>

            <div></div>
        </div>
        <div class="rightpanel">
            <div id="tabs-1">
                    <h2>Records</h2>

                <iframe width="560" height="315" src="http://www.youtube.com/embed/cJLzekuukEE"
                frameborder="0" allowfullscreen></iframe>
            </div>
            <div id="tabs-2">
                    <h2>Notes</h2>

                <iframe width="560" height="315" src="http://www.youtube.com/embed/cJLzekuukEE"
                frameborder="0" allowfullscreen></iframe>
            </div>
            <div id="tabs-3">
                    <h2>Diary</h2>

                <iframe width="560" height="315" src="http://www.youtube.com/embed/rtfS2eFwdgw"
                frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
        <div id="tabs-4">
                <h2>Other 4</h2>

            <iframe width="560" height="315" src="http://www.youtube.com/embed/cJLzekuukEE"
            frameborder="0" allowfullscreen></iframe>
        </div>
        <div id="tabs-5">
                <h2>Other 5</h2>

            <iframe width="560" height="315" src="http://www.youtube.com/embed/cJLzekuukEE"
            frameborder="0" allowfullscreen></iframe>
        </div>
        <div id="tabs-6">
                <h2>Other 6</h2>

            <iframe width="560" height="315" src="http://www.youtube.com/embed/rtfS2eFwdgw"
            frameborder="0" allowfullscreen></iframe>
        </div>
    </div> 
```

如果我把你的问题弄错了，请纠正我

# java - 读取对象方法

> ID：15223097
> 
> 赞同：0
> 
> 时间：2013-03-05T11:52:02.170
> 
> 标签：java, exception-handling, objectinputstream

无论如何要检查 ObjectInputStream 类的方法 readObject 是否已完成读取文件而不是捕获其抛出的异常？

如果没有。我怎样才能弄出Newmast.writeObject(accountRecord); 在这种情况下达成的声明？

```
// read oldmast.ser
    try {
        while (true) {
            accountRecord = (AccountRecord) inOldmast.readObject();
            //read trans.ser
            while (true) {
                transactionRecord = (TransactionRecord) inTrans.readObject();
                if (transactionRecord.getAccountNumber() == accountRecord.getAccount()) {
                    accountRecord.combine(transactionRecord);
                }//end if
            }//end inner while
            outNewmast.writeObject(accountRecord);
        }//end while
    }//end try 
    catch (ClassNotFoundException e) {
        System.err.println("Error reading file.");
        System.exit(1);
    }//end catch         
    catch (IOException e) {
        System.err.println("Error reading file.");
        System.exit(1);
    }//end catch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:59:47.883

最好的主意是预先序列化元素的数量，所以你可以这样做：

```
cnt = file.readInt();
for (int i=0;i<cnt;i++) {
   file.readObject();
} 
```

如文档中所述，@ChrisCooper 提出的方法不可靠。有些流没有实现它，或者返回近似结果（理论上，当还有一些数据时它甚至可以返回 0。示例 - 网络流）。

因此，查看相同的文档，我们发现了这个特定的块：

> 任何超出相应 writeObject 方法写入的自定义数据边界的对象数据的读取尝试都将导致抛出 OptionalDataException，并且 eof 字段值为 true。超出分配数据结尾的非对象读取将反映数据的结尾，就像它们指示流的结尾一样：按字节读取将返回 -1 作为字节读取或读取的字节数，以及原始读取将抛出 EOFExceptions。如果没有对应的 writeObject 方法，则默认序列化数据的结尾标志着分配数据的结尾。

所以，最好的办法是捕获一个`OptionalDataException`并检查它的`eof`字段`true`。

为了进一步消化答案，这是您想要的方法：

```
TransactionRecord readRecord(ObjectInputStream stream) throws OptionalDataException, IOException {
    try {
        transactionRecord = (TransactionRecord) stream.readObject();
    } catch (OptionalDataException e) {
        if (e.eof) {
            return null;
        } else {
            throw e;
        }
    }
    return transactionRecord;
}
.....
TransactionRecord record;
while ((record = readRecord(inTrans)) != null) {
    doSomethingWithRecord(record);
}
endOfFile(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:56:44.900

是的，检查输入流以查看是否有更多可用的内容：

[http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available()](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available())

```
if (inOldmast.available() > 0) {
  // read and process
} else {
  // Close the stream and clean up
} 
```

# asp.net-mvc-3 - 在渲染的局部视图中访问 Viewbag 数据

> ID：15223101
> 
> 赞同：4
> 
> 时间：2013-03-05T11:52:14.120
> 
> 标签：asp.net-mvc-3, viewbag

这个问题可能与 [Can't access ViewBag in a partial view in ASP.NET MVC3 的](https://stackoverflow.com/questions/5729784/cant-access-viewbag-in-a-partial-view-in-asp-net-mvc3)重复，但它似乎并没有断然否定这种可能性。

问题是访问`ViewBag`部分视图中的数据，该部分视图正在从视图中调用并正在传递一个模型，例如

```
@Html.Partial("name", object); 
```

调用此部分视图的主视图的 Action 方法具有一个`Viewbag`属性..`Viewbag`似乎无法使用`Partial view.`

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:12:35.123

谢谢你的时间..

在以下帖子中找到了解决方案

[MVC3 - 将模型之外的数据传递到局部视图](https://stackoverflow.com/questions/7177153/mvc3-passing-data-beyond-the-model-to-partial-view)

问候。

# android - 通过我的应用程序更新和删除 android 中的日历事件

> ID：15223107
> 
> 赞同：11
> 
> 时间：2013-03-05T11:52:22.697
> 
> 标签：android, events, calendar

谁能告诉我如何修改（编辑）和删除用户自己使用我的android应用程序添加的**android日历事件。**我已经尝试了很多，但没有一个适合我。我是第一次处理这些日历。我们有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-28T17:24:47.050

看看这个问题：[StackOverflow](https://stackoverflow.com/questions/20169149/android-calendar-specific-event-deletion)

这段代码对我有用。

```
Uri eventsUri = Uri.parse("content://com.android.calendar/events");
ContentResolver cr = getContentResolver();
Cursor cursor;
cursor = cr.query(eventsUri, new String[]{ "_id" },"calendar_id=" + 1, null, null);
while(cursor.moveToNext()) {
    long eventId = cursor.getLong(cursor.getColumnIndex("_id"));
    cr.delete(ContentUris.withAppendedId(eventsUri, eventId), null, null);
}
cursor.close();
// Show message
Toast.makeText(getApplicationContext(), "Calendar Cleared!",Toast.LENGTH_LONG).show(); 
```

# android - Android 实现，如 gtalk 状态

> ID：15223109
> 
> 赞同：0
> 
> 时间：2013-03-05T11:52:32.090
> 
> 标签：android, google-talk

我想实现类似于 gtalk 的应用程序的状态功能，但我无法理解我应该采用什么小部件或设计（我是 android 的初学者） gtalk 状态看起来像一个微调器。我无法理解：- 如何将图像和文本置于状态（忙碌/可用等的图像不同，因此不同的项目有不同的图像）。如何在 spinner 中添加客户消息。我们可以在运行时在 gtalk 应用程序中添加尽可能多的状态消息。主屏幕上有什么样的小部件栏，其中包含图像（您的图像）、电子邮件 ID 和状态（以下示例可用）？

[Gtalk 图片](http://www.techgoondu.com/wp-content/uploads/2011/04/Talk-videochat-buddylist.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:20:29.977

[此链接](http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text)中清楚地解释了使用自定义列表视图。这将对您有所帮助。

# java - sun.misc.BASE64 到 apache commons

> ID：15223111
> 
> 赞同：0
> 
> 时间：2013-03-05T11:52:47.690
> 
> 标签：java, base64, aes, apache-commons

我在这里有一个简单的代码，该代码使用了 Eclipse Java 7.0 中不可用的 sun.misc.BASE64Encoder 和 sun.misc.BASE64Decoder，我想让代码使用 Apache commons base 64 并且仍然可以完全一样的东西，

**变量**

```
private static final String ALGORITHM = "AES";
private static final byte[] keyValue = "2H5a1r5i6s3h8C1h".getBytes(); 
```

**原始代码**

```
public static String AESencrypt(String valueToEnc) throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encValue = c.doFinal(valueToEnc.getBytes());
    String encryptedValue = new BASE64Encoder().encode(encValue);
    return encryptedValue;
}

public static String AESdecrypt(String encryptedValue) throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.DECRYPT_MODE, key);
    byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedValue);
    byte[] decValue = c.doFinal(decordedValue);
    String decryptedValue = new String(decValue);
    return decryptedValue;
} 
```

**尝试修改为 apache commons 代码**

```
public static String AESencrypt(String valueToEnc) throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encValue = c.doFinal(valueToEnc.getBytes());
    String encryptedValue = new Base64().encodeBase64(encValue).toString();
    return encryptedValue;
}

public static String AESdecrypt(String encryptedValue) throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.DECRYPT_MODE, key);
    byte[] decordedValue = new Base64().decodeBase64(encryptedValue);
    byte[] decValue = c.doFinal(decordedValue);
    String decryptedValue = new String(decValue);
    return decryptedValue;
} 
```

原始代码工作正常，新代码抛出以下异常，

> 线程“main”javax.crypto.IllegalBlockSizeException 中的异常：在 com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:750) 在 com.sun.crypto 使用填充密码解密时，输入长度必须是 16 的倍数。 provider.CipherCore.doFinal(CipherCore.java:676) at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313) at javax.crypto.Cipher.doFinal(Cipher.java:2087) at trial2.encrypt .AESdecrypt(encrypt.java:28) at trial2.encrypt.main(encrypt.java:37) Java 结果：1

如何在不过多更改初始代码的情况下解决这个问题，这里和那里的几行就可以了。是否可以完全消除 Base64encoding 步骤并使其仅使用如下密码：

```
public static String AESencrypt(String valueToEnc) throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encValue = c.doFinal(valueToEnc.getBytes());
    return encValue.toString();
}

public static String AESdecrypt(String encryptedValue) throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.DECRYPT_MODE, key);
    byte[] decValue = c.doFinal(encryptedValue.getBytes());
    String decryptedValue = new String(decValue);
    return decryptedValue;
} 
```

上面的代码与第二个代码有类似的异常：

> 线程“main”javax.crypto.IllegalBlockSizeException 中的异常：在 com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:750) 在 com.sun.crypto 使用填充密码解密时，输入长度必须是 16 的倍数。 provider.CipherCore.doFinal(CipherCore.java:676) at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313) at javax.crypto.Cipher.doFinal(Cipher.java:2087) at trial2.encrypt .AESdecrypt(encrypt.java:26) at trial2.encrypt.main(encrypt.java:35) Java 结果：1

请帮助和TYVM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:38:10.863

错误在您的加密方法中。以下代码是错误的：

```
byte[] encValue = c.doFinal(valueToEnc.getBytes());
String encryptedValue = new Base64().encodeBase64(encValue).toString(); 
```

你正在调用`toString()`一个字节数组，它不会做你想要的！相反，请尝试：

```
byte[] encValue = c.doFinal(valueToEnc.getBytes());
String encryptedValue = Base64.encodeBase64String(encValue); 
```

这应该可以正常工作。

# javascript - JavaScript base62 编码性能影响

> ID：15223113
> 
> 赞同：1
> 
> 时间：2013-03-05T11:52:51.917
> 
> 标签：javascript, performance, base62

使用 base62 编码 JavaScript 文件会减小文件大小，但会降低性能。但是，究竟如何？

1.  加载 JavaScript 文件后，JavaScript 引擎是否只需要对文件进行一次解编码，还是必须在脚本运行时实时解编码？

2.  如果文件只未编码一次，它存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:57:57.807

> 加载 JavaScript 文件后，JavaScript 引擎是否只需要对文件进行一次解编码，还是必须在脚本运行时实时解编码？

每次加载脚本时（因此，每页加载一次）。

> 如果文件只未编码一次，它存储在哪里？

JavaScript 代码被执行，而不是被存储，并且执行的结果（可能涉及一些被存储的结构，例如函数）存在于 JavaScript 堆的内存中。

正如您提到的 Dean Edwards 的[packer](http://dean.edwards.name/packer/)，值得指出的是，他指出，[仅当您不能使用 gzip 压缩时，使用 Base62 编码才有用](http://dean.edwards.name/weblog/2007/08/js-compression/)，而这几乎总是可以的。浏览器支持本质上是通用的，服务器对动态 gzip 的支持也是如此（在好的服务器中，预压缩和缓存）。

# python - 我应该如何为球队、球员和比赛对象设计我的 django 模型？

> ID：15223126
> 
> 赞同：1
> 
> 时间：2013-03-05T11:53:25.753
> 
> 标签：python, django

我不知道怎么问这个问题？首先让我解释一下我有`Team`和`Player`模型。

```
class team()
        name = models.CharField(max_length=100) // name quato something like this

class player(models.Model) 
        point = models.IntegerField()
        assist = models.IntegerField() 
        rebound = models.IntegerField() //something like this 
        team = models.ForeignKey(team) 
```

我需要`Match`那场比赛的模特和球员（得分、助攻、篮板）；如何创建模型来表示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:49:34.550

这是一个简化假设的练习/作业，还是您在为现实世界的应用程序建模？例如，随着时间的推移，球员可能会更换球队：你将如何建模？为简单起见，让我们假设玩家不会更换球队。我会为您的案例建模如下：

```
class Team(models.Model):
    name = models.CharField(max_length=100)
    # other attributes that do not change over time

class Player(models.Model):
    name = models.CharField(max_length=100)
    team = models.ForeignKey(Team)
    # other attributes that do not change over time

class Match(models.Model):
    venue = models.CharField(max_length=100)
    date = models.DateField()
    # other non-redundant attributes

class PlayerMatch(models.Model):
    player = models.ForeignKey(Player)
    match = models.ForeignKey(Match)

    points = models.IntegerField()
    assists = models.IntegerField()
    rebounds = models.IntegerField() 
```

这里的重要部分是`PlayerMatch`仅保留统计信息。您不必重复它们 in`Player`或 in `Match`，那将是[多余](http://en.wikipedia.org/wiki/Data_redundancy)的。相反，可以在给定这些数据结构的情况下计算比赛或球员的统计数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:22:46.997

我会做：

```
class StatisticsBase(models.Model):
    class Meta:
        abstract = True

    points = models.IntegerField()   # plural form reads easier here
    assists = models.IntegerField()  # at least in English
    rebounds = models.IntegerField()

class Player(StatisticsBase):
    name = models.CharField(max_length=100)

class Match(StatisticsBase):
    players = models.ManyToManyField(Player)  # you should capitalize class names
    # any additional fields 
```

# jquery - 如何为 JQuery 可排序元素分配 ID 以允许对列表进行智能操作

> ID：15223127
> 
> 赞同：0
> 
> 时间：2013-03-05T11:53:31.307
> 
> 标签：jquery, jquery-ui-sortable

我已经修改了一些代码，在将新的可排序元素添加到列表时为其分配一个 ID。

ID 是允许删除特定元素和查询列表以防止某些元素被添加两次以上所必需的。

这是Javascript中添加和删除功能的代码。您可以看到 add 函数创建了一个带有名为 theId 的 ID 的新列表元素。删除功能删除了显然是整个列表的“this”。

**问题是显式引用列表中各个元素的语法是什么，以便我可以删除它们或从函数中查询列表中存在哪些元素。**

```
$('#add').click(function() {
  var $li = $(' <li class="ui-state-default">
  <span class="ui-icon ui-icon-arrowthick-2-n-s"> </span>Item 3</li>');
  var theId = 1;
  $li.attr("id", theId);
$('#sortable').append($li);
 alert('added id: ' + theId);
});

$("#sortable .delete").click(function() { 
$(this).parent().remove();
  }); 
```

[我的代码的 JS Fiddle](http://jsfiddle.net/GUpQw/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:01:02.017

y 不要简单地搜索它

```
$("#sortable .delete").click(function() { 
    $('#theId').remove()
}); 
```

**编辑**

```
$("#sortable .delete").click(function() { 
    $('#1').remove()
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:01:10.703

这里的 ID 有点像红鲱鱼（但请注意，当每个 li 需要唯一时，您正在为每个 li 创建相同的 ID）。

但是，问题是您说当单击删除按钮时，找到它的父级（在本例中为 ul #sortable）并将其删除。我假设您想要做的是从列表中删除最后一项。所以你可以说：

```
$("#sortable .delete").click(function() { 
    $('#sortable').find('li:last-child').remove();
}); 
```

# java - addStyleName() 的共同属性表达在 setStyleName() 甚至 setStylePrimaryName() 上！

> ID：15223128
> 
> 赞同：0
> 
> 时间：2013-03-05T11:53:33.337
> 
> 标签：java, css, gwt, styles, stylesheet

我是 GWT 的新手，正在通过在 Eclipse 中运行的一些示例来学习它。在其中一个按钮的程序中，我添加了`setStyleName(class)`（也用 选中`setStylePrimaryName()`）并使用 addStyleName(class) 添加了另一种样式。

我所期望的是该按钮应该显示使用`setStyleName()`/setStylePrimaryname 设置的css 类属性，因为这将是primaryStylename。

但令我惊讶的是，如果我使用 向按钮添加另一种样式`addStyleName()`，则该样式将成为按钮的样式，尽管它是其辅助样式名称！在这种情况下，为了表达主要样式名称，我必须使用添加辅助样式名称`addStyleDependentName()`。

我的代码设置样式如下。

```
final Button sendButton=new Button("Send");
final TextBox nameField=new TextBox();

sendButton.setStylePrimaryName("newButton");
sendButton.addStyleName("secondButton"); 
```

在css文件中

```
 .newButton{
    display:block;
    font-size: 16pt;
    color: black;
    background-color: maroon;
}
.secondButton{
    color:blue;
    margin: 15px 10px 10px;
    background-color: olive;

} 
```

该按钮始终以橄榄色背景颜色出现，除非将其添加为 addStyleDependentName("secondButton") 和

案例 2：在使用时`addStyleName("secondButton")`然后`setStyleName("newButton")`（因为`setStyleName()`将删除现有的辅助样式）。我还使用`getStylePrimaryName()`and检查了主要样式名称和其他样式的值`getStyleName()`。

getStylePrimaryName() 给出“newButton”，getStyleName() 给出 newButton,secondButton....所以即使有一个主要样式名称，为什么它总是显示通过 addStyleName() 添加的辅助样式属性（这里是 secondButton）？

****请注意：我已经在如下文本框上尝试了这个，它按预期表达了主要样式下提到的颜色****

```
final TextBox nameField=new TextBox();
nameField.setText("---Enter Name Here---");
nameField.setStylePrimaryName("textStyle");
nameField.addStyleName("myText");
nameField.addStyleName("bigText"); 
```

CSS如下

```
.myText{
    color:blue;
}

.bigText{
    font-size: large;
}
.textStyle{
    color:maroon;
    text-shadow: aqua;

} 
```

需要注意的一点是，除非我们不将辅助样式添加为 addStyleDependentName()，否则属性将按照 CSS 中类名出现的顺序显示...也就是说，如果主要样式名称定义在辅助样式之后，则主要得到显示，否则次要的......可以注意到改变CSS中定义类的顺序所以在我的按钮属性中，当我将顺序更改为

```
.secondButton{
    color:blue;
    margin: 15px 10px 10px;
    background-color: olive;

}

 .newButton{
    display:block;
    font-size: 16pt;
    color: black;
    background-color: maroon;
} 
```

按钮颜色越来越像栗色。如果将次要样式添加为 addStyleDependentName()，则主要样式的表达与 CSS 中的顺序无关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:38:19.423

根据文档：

```
Adds a secondary or dependent style name to this object. 
```

设置后，或`setStyleName()`addStyleName [()](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/UIObject.html#addStyleName%28java.lang.String%29)将添加另一个，您通过`setStylePrimaryName()``style``argument`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:19:47.517

*样式主名称*是添加后缀的一个*样式相关名称。*否则它只是一个*样式名称*，并且适用 CSS 规则（GWT 对此无能为力，最终在浏览器中只是 HTML+CSS+JS）

# iphone - 无法正确设置 datePicker 的默认日期，在 iOS 设备上崩溃

> ID：15223131
> 
> 赞同：2
> 
> 时间：2013-03-05T11:53:38.327
> 
> 标签：iphone, objective-c, datepicker

我在几个小时前创建了一个帖子，但那是不正确的，我弄错了导致崩溃的事情。所以我转发了，希望大家不要怪我。

我有一个拥有 datePicker 的视图，我的意思是在选择器上显示不是当前日期，而是显示“旧”日期（我选择 1987 年）。但是我不知道出了什么问题，当我在模拟器上启动应用程序时它工作得很好，但是当我在视图加载之前切换到 iPhone 应用程序崩溃。有代码：

```
-(void)defaultBirthdayPickerDate{

    NSString *dateString = @"09-Oct-1987";
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    dateFormatter.dateFormat = @"dd-MMM-yyyy";
    NSDate *date = [dateFormatter dateFromString:dateString];
    [self.birthdayPicker setDate:date];

} 
```

然后：

```
- (void)viewDidLoad
{

    [self defaultBirthdayPickerDate];
    [super viewDidLoad];
} 
```

有件事，某处导致崩溃：

```
2013-03-05 15:50:31.070 DeathLine[2985:907] *** Assertion failure in -[_UIDatePickerView _setDate:animated:forced:], /SourceCache/UIKit/UIKit-2380.17/_UIDatePickerView.m:302
2013-03-05 15:50:31.073 DeathLine[2985:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: date'
*** First throw call stack:
(0x325042a3 0x3a22197f 0x3250415d 0x32dd9ab7 0x344bdf15 0x344c6429 0x3458f989 0x14a6b 0x148db 0x3432b595 0x3438014b 0x34380091 0x3437ff75 0x3437fe99 0x3437f5d9 0x3437f4c1 0x3436db93 0x28f4c33 0x3436d833 0x343f70c5 0x343f7077 0x343f7055 0x343f690b 0x343f6e01 0x3431f5f1 0x3430c801 0x3430c11b 0x360225a3 0x360221d3 0x324d9173 0x324d9117 0x324d7f99 0x3244aebd 0x3244ad49 0x360212eb 0x34360301 0xcc21 0x3a658b20)
libc++abi.dylib: terminate called throwing an exception 
```

不知何故`[self.birthdayPicker.date]`不是NULL，我知道，但我不知道如何解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:01:08.050

我的猜测是这是由`NSLocale`您的设备和模拟器中设置的不同区域设置 ( ) 引起的。请注意，`09-Oct-1987`只有当格式化程序语言环境设置为英语（因为`Oct`代表`October`英语）时，格式化程序才能解析日期。否则它将返回`nil`并设置`nil`为`UIDatePicker`将导致您看到的错误。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:56:46.217

`date`大概是`nil`。您应该检查格式化程序是否按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:00:09.287

试试这个

```
-(void)defaultBirthdayPickerDate{
    [self.birthdayPicker setDatePickerMode:UIDatePickerModeDate];
    NSString *dateString = @"09-Oct-1987";
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd-MMM-yyyy"];
    if([dateFormat dateFromString: dateString])
    {
        NSDate *date = [dateFormat dateFromString: dateString];
        [self.birthdayPicker setDate:date];
    }
    [dateFormat release];
}

- (void)viewDidLoad{
     [super viewDidLoad];   //super method should be first in you code
     [self defaultBirthdayPickerDate];
} 
```

尝试将 DatePickerMode 设置为 UIDatePickerModeDate 这可能会解决您的问题

# c++ - makeDelegate 函数不起作用

> ID：15223132
> 
> 赞同：2
> 
> 时间：2013-03-05T11:53:40.133
> 
> 标签：c++, templates, c++11, delegates

对于产生这个问题的问题；

*   [多变量模板化委托系统](https://stackoverflow.com/questions/15222638/multiple-variadic-templated-delegate-system)

我有以下功能；

```
template<typename... Arguments, typename... Params> 
Runnable<Params...>* makeRunnable(void (*FunctionType)(Arguments..., Params...), Arguments... args)
{
    return new FunctionDelegate<Arguments..., Params...>(FunctionType, makeTuple(args...));
} 
```

我想适应'ForEveR'给出的解决方案，在上一个问题中，我试过没有任何运气。

```
template<typename... Arguments, typename... Params> 
Runnable<Params...>* makeRunnable(void (*FunctionType)(tuple<Arguments...>, tuple<Params...>), tuple<Arguments...> args)
{
    return new FunctionDelegate<tuple<Arguments...>, tuple<Params...>>(FunctionType, args);
} 
```

这会产生错误；

```
error: no matching function for call to ‘makeRunnable(void (&)(tuple<int, int>, tuple<int>), tuple<int, int>)’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:05:30.773

我设法自己修复它；

```
// Create a function delegate as runnable
template<typename... Arguments, typename... Params> 
Runnable<Params...>* makeRunnable(void (*FunctionType)(tuple<Arguments...>, tuple<Params...>), Arguments... args)
{
    return new FunctionDelegate<tuple<Arguments...>, tuple<Params...>>(FunctionType, makeTuple(args...));
} 
```

# qooxdoo - Qooxdoo - 多次调用 getInstance() 会导致内存泄漏吗？

> ID：15223146
> 
> 赞同：1
> 
> 时间：2013-03-05T11:54:41.557
> 
> 标签：qooxdoo

我有一个应用程序每 X 分钟更新一次。在更新例程中，它使用 getInstance() 方法调用多个作为单例的 qx 类。那会导致缓慢的内存泄漏吗？

注意：Firefox v18 和 IE8（我测试过的唯一版本）会在应用程序运行大约 24-30 小时后崩溃，但出于某种原因，Chrome v25 似乎没问题。这是我指的网站：preview.weather.gov/edd

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:09:37.907

这不应该是您的内存泄漏的原因。在 qooxdoo 内（以及根据定义）的实现`getInstance()`非常简单。作为一般经验法则，请尝试调用`dispose()`您不再需要的 qooxdoo 对象。

另请查看手册（这可能已过时）：

*   [http://manual.qooxdoo.org/2.1.1/pages/development/memory_management.html#finding-memory-leaks](http://manual.qooxdoo.org/2.1.1/pages/development/memory_management.html#finding-memory-leaks)
*   [http://qooxdoo.org/docs/general/snippets#support_for_finding_potential_memory_leaks](http://qooxdoo.org/docs/general/snippets#support_for_finding_potential_memory_leaks)

# list - 诺基亚 S-40 LWUIT 列表滚动问题

> ID：15223149
> 
> 赞同：0
> 
> 时间：2013-03-05T11:54:55.290
> 
> 标签：list, java-me, scroll, lwuit, nokia-s40

我的`List`应用程序中有一个，当我在整个屏幕上滚动时，`List`用于设置第一个元素，我的意思是如果我用红色箭头绘制手势，用户将被发送到列表的开头。

有人知道这个问题吗？

添加

[视频](http://www.swfme.com/view/1263042)

![列表照片](../Images/0a93c5045d42752f0ed027c996769d2e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:34:39.820

我不确定 S40 端口，因为我不确定他们在那里做了什么。其中许多事情都与将列表放置在可滚动容器中而不是将其放置在不可滚动容器的中心有关。

# c# - CLR 如何将 C++ 文件访问常量与 C# 枚举匹配？

> ID：15223151
> 
> 赞同：3
> 
> 时间：2013-03-05T11:55:06.413
> 
> 标签：c#, marshalling

例如，我想知道 CLR 如何与`GENERIC_READ`匹配`FileAccess.Read`。我已将此参数编组为 UnmanagedType.U4

`#define GENERIC_READ (0x80000000L)`

但

`FileAccess.Read = 1`

marshaler 如何知道需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:57:12.107

CreateFile 的 dwDesiredAccessMode 参数太不正常，无法干净地映射到枚举。所以 FileAccess 在代码中被映射到一个 int。从[Reference Source 的](http://referencesource.microsoft.com/netframework.aspx)FileStream.cs 源代码文件，FileStream.Init() 方法：

```
 int fAccess;
    ...
    fAccess = access == FileAccess.Read? GENERIC_READ:
    access == FileAccess.Write? GENERIC_WRITE:
    GENERIC_READ | GENERIC_WRITE;
    ...
    _handle = Win32Native.SafeCreateFile(tempPath, fAccess, ...etc) 
```

原始缩进复制，看起来很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:20:03.380

[编组](http://www.codeproject.com/Articles/66245/Marshaling-with-C-Chapter-1-Introducing-Marshaling)是类型之间的转换，而不是值之间的转换。所以换句话说，我认为 CLR 不会做任何事情来帮助你处理你的案子。

如果您有一个接受整数 ( `GENERIC_READ`) 的非托管函数，并从 .NET 调用它，则需要传递值 0x80000000 而不是 1。CLR 无法知道您想要`FileAccess.Read`成为 0x80000000。

# java - 抽象类上的Spring @Configurable：类型的层次结构不一致

> ID：15223153
> 
> 赞同：2
> 
> 时间：2013-03-05T11:55:10.743
> 
> 标签：java, spring, aspectj

我正在使用带有 AspectJ 和编译时编织的 Eclipse Juno，当我遇到这种情况时，我看到了这个烦人的错误消息：

```
@Configurable(preConstruction = true)
public abstract class AbstractEntity {  

    @Resource private Service service;

    public AbstractEntity () {
         service.doSomething();
    }
}

public class Response extends AbstractEntity {  

    public Response() {
        super();
    }
} 
```

该标记未显示在问题选项卡中，它仅在 Response 的类声明中显示一个红色 x 标记。清理不会改变任何东西，但是，如果我将 @Configurable 注释移动到 Response 类并将其从 AbstractEntity 中删除，错误标记就会消失，但是当超级构造函数尝试接触注入的服务时，我会得到 NPE。

同样重要的是要提到这个错误标记实际上并没有破坏任何东西，如果我让代码保持一切正常，那么每当我打开类（以及在任何扩展 AbstractEntity 的类上）时，我总是会看到那个错误标记。

有什么办法可以阻止这条消息显示？CTW 是否正在改变导致此消息的幕后构造函数层次结构？

# android - 禁用列表视图的滚动不起作用

> ID：15223158
> 
> 赞同：1
> 
> 时间：2013-03-05T11:55:41.653
> 
> 标签：android, listview

我实际上使用的是嵌套列表视图。父列表视图带有自定义适配器和子列表视图。

我知道我可以使用`expandable list view`. 但是在我的场景中，子项目处理起来更复杂。有很多组件。

这是我尝试过的，单击父列表中的按钮会显示相应的子列表项。这工作正常。但唯一的问题是滚动。我想滚动子列表，但父列表正在滚动。我为父母尝试了两者`setScrollContainer(false)`和`setClickable(false)`（只是尝试过），但没有用。

这是我的代码。

activity_main.xml

```
<RelativeLayout
    android:id="@+id/parent_rel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="@dimen/activity_vertical_margin" >

    <Button
        android:id="@+id/b_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:text="View" />

    <TextView
        android:id="@+id/parent_txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/b_view"
        android:layout_alignBottom="@+id/b_view"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="96dp"
        android:text="TextView" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/child_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/parent_rel"
    android:layout_below="@+id/parent_rel"
    android:visibility="gone" >

    <ListView
        android:id="@+id/ch_listView"
        android:layout_width="match_parent"
        android:layout_height="150dp"
        android:background="#000000" >
    </ListView>
</RelativeLayout> 
```

MainActivity.java

> 公共类 MainActivity 扩展 ListActivity {

```
ListView lv;
String[] prnt_items = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j" };
boolean isViewing = false;
RelativeLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    lv = getListView();
    lv.setCacheColorHint(Color.parseColor("#00000000"));
    lv.setAdapter(new ParentItems());

}

class ParentItems extends BaseAdapter {

    @Override
    public int getCount() {
        return prnt_items.length;
    }

    @Override
    public Object getItem(int position) {
        return prnt_items[position];
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        final View p_v = getLayoutInflater().inflate(
                R.layout.activity_main, parent, false);

        TextView tv = (TextView) p_v.findViewById(R.id.parent_txt);

        tv.setText(prnt_items[position]);
        Button sub_view = (Button) p_v.findViewById(R.id.b_view);

        sub_view.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (!isViewing) {
                    lv.setScrollContainer(false);
                    //lv.setClickable(false);
                    isViewing = !isViewing;
                    layout = (RelativeLayout) p_v.findViewById(R.id.child_view);
                    layout.setVisibility(View.VISIBLE);
                    ListView c_lv = (ListView) p_v.findViewById(R.id.ch_listView);
                    c_lv.setAdapter(new ArrayAdapter<String>(
                            getApplicationContext(),
                            android.R.layout.simple_list_item_1,
                            new String[] { "Hello", "Hai", "Oops!!!" }));
                    c_lv.setOnItemClickListener(new OnItemClickListener() {

                        @Override
                        public void onItemClick(AdapterView<?> arg0,View arg1, int arg2, long arg3) {
                            Toast.makeText(getApplicationContext(),
                                    "Click @ " + arg2, Toast.LENGTH_SHORT)
                                    .show();
                        }

                    });
                }
                else{
                    if(layout !=null){
                        isViewing = !isViewing;
                        lv.setScrollContainer(true);
                        //lv.setClickable(true);
                        layout.setVisibility(View.GONE);
                    }
                }
            }
        });

        return p_v;
    }
} 
```

}

感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T12:12:08.833

当您将具有自己滚动功能的视图放在具有滚动功能的另一个视图中时，就会出现问题。

这是您应该尝试使用内部列表视图的东西

```
ListView lv = (ListView)findViewById(R.id.myListView);  // your listview inside scrollview
lv.setOnTouchListener(new ListView.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            int action = event.getAction();
            switch (action) {
            case MotionEvent.ACTION_DOWN:
                // Disallow ScrollView to intercept touch events.
                v.getParent().requestDisallowInterceptTouchEvent(true);
                break;

            case MotionEvent.ACTION_UP:
                // Allow ScrollView to intercept touch events.
                v.getParent().requestDisallowInterceptTouchEvent(false);
                break;
            }

            // Handle ListView touch events.
            v.onTouchEvent(event);
            return true;
        }
    }); 
```

当孩子被触摸时，它会禁用父母的滚动。

# java - 在 executorservice 场景中等待另一个线程

> ID：15223165
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:56:01.123
> 
> 标签：java, multithreading

假设使用执行器服务创建了三个线程，现在我希望 t2 在 t1 之后开始运行，而 t3 在 t2 之后开始运行。在线程池的情况下如何实现这种场景？

如果它有任何使用thread.start（）创建的正常线程。我本可以使用 join() 方法等待。但是如何处理上述情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:59:51.767

线程 t1,t2 和 t3 可以实现可调用接口，并且可以从调用方法返回一些值。根据返回值，t1返回后，可以启动t2，t3也类似。

“可调用”是它的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:04:40.170

您混淆了线程的概念以及在线程上执行的内容。线程池中的线程何时“启动”无​​关紧要，但处理的执行何时开始或继续。所以更好的说法是你有 3 个`Callables`or`Runnables`并且你需要其中一个来等待另外两个，然后再继续。这是使用[CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)完成的。创建一个计数为 2 的共享锁存器。其中 2 个`Callables`将在锁存器上调用[countDown()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html#countDown%28%29)，应该等待的将调用[await()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html#await%28%29)（可能有超时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:11:08.153

提交给 ExecutorService 的作业必须相互独立。如果你试图通过等待 Semaphores、CountDownLatches 或类似的东西来建立依赖关系，那么当所有可用的工作线程执行等待已提交的作业但落后于当前作业的作业时，你将面临阻塞整个服务的风险。队列。你要确保你有比可能的阻塞工作更多的工人。在大多数情况下，最好使用多个 ExecutorService 并将依赖组的每个作业提交给不同的 Service。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:15:55.297

几个选项：

1.  如果这是您必须处理的唯一场景（t1->t2->t3），请不要使用线程池。依次运行这三个任务。

2.  使用一些线程间通知机制（例如 BlockingQueue、CountDownLatch）。这要求您的任务持有对您选择的同步工具的共享引用。

3.  使用新的可运行/可调用包装任何依赖序列，以作为单个任务提交。这种方法很简单，但不能正确处理非线性依赖拓扑。

4.  每个依赖于另一个任务的任务都应该提交另一个任务以执行，并等待其完成。这是具有依赖关系的线程池的通用方法，但它需要仔细调整以避免可能的死锁（正在运行的任务可能会等待没有可用线程运行的任务。请参阅我的回复[以](https://stackoverflow.com/questions/15084302/recursive-concurrency/15084851#15084851)获得简单的解决方案）。

# image - Azure，存储和部署静态内容（例如图像/css）的最佳方式？

> ID：15223167
> 
> 赞同：28
> 
> 时间：2013-03-05T11:56:05.580
> 
> 标签：image, azure, azure-blob-storage, static-content, azure-cdn

我们即将将 .NET Web 应用程序部署到 Azure Web 角色。我只是想知道其他人如何处理他们的静态内容，特别是图像和 css？目前我们的应用程序包大约 25mb，但其中 18mb 完全来自图像，例如导航按钮、图标和模板组件等很少更新的东西。将其从部署包中分区并将其移至 blob 存储是否明智？

我对这种方法有一些疑问，我想知道它们是否有效......

1.  我们网站的 80% 运行在 HTTPS 环境中。访问 blob 存储中的图像会引入跨脚本问题吗？

2.  如果有人试图恶意破坏我们的图像（大多数小于 20kb），是否存在资金泄露漏洞？

3.  我正在努力了解如何使用目录命名约定将文件上传到 blob 容器（来自 VS2010 + Azure SDK），所以我不需要重写 1000 个路径引用？我很欣赏目录是 blob 容器中的一个抽象概念，但我可以用正斜杠编写文件以在代码中模仿这一点。显然，在我上传到 Visual Studio 之前，Windows 不允许我这样做。

欢迎任何想法或替代策略。真正的目标是缩小我们的部署包以加快部署时间。我也很喜欢将图像服务卸载到专用节点以提高 Web 服务器性能的想法，也许我的图像集合太小以至于几乎不值得打扰？

**5 月 16 日更新 ----------------------------------------------- -------------------------**

这是我最后所做的：

1.将所有图像+ css转移到blob存储容器。我维护了 images 和 css 文件夹中所有子目录的结构。

2.在我们的 web.config 文件中应用 URL 重写规则，如下所示。

```
 <rewrite>
    <rules>
      <rule name="imagestoazure">
      <match url="images/(.*)" />
      <action type="Redirect" url="https://xxxxx.vo.msecnd.net/images/{R:1}" />
    </rule>
  </rules>
  </rewrite> 
```

3.从应用程序中排除图像+ css文件夹并部署。

我的部署现在要小得多，并且图像在 CDN 上运行，从而释放了带宽、提高了下载速度并释放了 Web 服务器的一些负载。

**更新：2015 年 9 月**

最近在查看此内容时，我遇到了 Microsoft 提供的以下指南。它更详细地介绍了如何使用查询字符串自动部署资产和缓存崩溃。

[在您的 Web 应用程序中提供来自 Azure CDN 的内容](https://azure.microsoft.com/en-us/documentation/articles/cdn-serve-content-from-cdn-in-your-web-application/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T13:53:53.517

一些评论：

> 将其从部署包中分区并将其移至 blob 存储是否明智？

绝对地。我可以看到这样做的许多好处：

1.  正如您所提到的，这将大大减少您的包大小，从而使部署变得更快。
2.  正如您所提到的，它会减轻您的网络服务器的负载，从而使您的网站更具响应性。
3.  如果您需要更新图像、js、css 文件，您只需替换 blob 存储中的这些文件即可。如果它们留在您的包中，您将需要重新部署您的包。
4.  您还可以利用 Windows Azure CDN，它在 blob 存储之外工作。

> 我们网站的 80% 运行在 HTTPS 环境中。访问 blob 存储中的图像会引入跨脚本问题吗？

只要您不通过 AJAX 阅读内容，我认为您不会遇到跨脚本问题（[如何从 azure 网站访问托管为 azure blob 的 XML](https://stackoverflow.com/questions/15135089/how-to-access-xml-hosted-as-azure-blob-from-azure-website/15136051#comment21418042_15136051)）。但是，如果您的页面是通过 https 提供的，并且您通过 http 引用静态资源，您的用户可能会收到混合内容（安全和不安全）消息。

> 如果有人试图恶意破坏我们的图像（大多数小于 20kb），是否存在资金泄露漏洞？

请查看此处的出站带宽定价：http: [//www.windowsazure.com/en-us/pricing/details/#header-11](http://www.windowsazure.com/en-us/pricing/details/#header-11)。目前，Windows Azure 正在进行一项促销活动，最多可以免费传输 5 GB 的数据，而且价格为 0.12 美元/GB，非常便宜。您还需要考虑存储交易，这也很便宜。我不会太担心它。在最坏的情况下，您始终可以恢复为共享访问签名并保护资源。

> 我正在努力了解如何使用目录命名约定将文件上传到 blob 容器（来自 VS2010 + Azure SDK），所以我不需要重写 1000 个路径引用？我很欣赏目录是 blob 容器中的一个抽象概念，但我可以用正斜杠编写文件以在代码中模仿这一点。显然，在我上传到 Visual Studio 之前，Windows 不允许我这样做。

有许多 3rd 方工具可供您使用，它们将在 Blob 存储中上传时保留本地计算机的文件夹结构。请查看 Windows Azure 存储团队的这篇博文：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2010/04/17/windows-azure-storage-explorers.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/04/17/windows-azure-storage-explorers.aspx)。显然，我个人最喜欢的是 Cerebrata 的 Cloud Storage Studio :) [我是该产品的开发人员之一]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-19T12:37:50.913

如果您的包变得太大，也许您可​​以从部署独立文件中受益，而不是一个大的单个包文件。至少在 Visual Studio 2012 中，发布向导现在具有以下部署选项：

*   **Web 部署**（我鼓励你这样做）
*   Web 部署包
*   FTP
*   文件系统

AFAIK，*Web Deploy*比较源文件和目标文件，仅物理传输**不同的文件**（它可能比较文件哈希，但我不了解内部结构）。

无论如何，我会尝试提供更多信息来解决您的问题：

> 我们网站的 80% 运行在 HTTPS 环境中。访问 blob 存储中的图像会引入跨脚本问题吗？

Gaurav Mantri 已经回答了这个问题，但只是为了提供一些最新信息，现在支持 HTTPS 访问 Azure CDN，因此您可以避免*混合内容消息*。（仍在等待对自定义域/SSL 证书的支持（UserVoice 请求，[此处](http://feedback.azure.com/forums/169397-cdn/suggestions/1332683-access-to-cdn-over-ssl-https)提供最新信息）。

顺便说一句，使用无协议约定 ( `://{domain}/{relative path}`)，浏览器将使用与基本文档完全相同的协议 HTTP 或 HTTPS。

> 我正在努力了解如何使用目录命名约定将文件上传到 blob 容器（来自 VS2010 + Azure SDK），所以我不需要重写 1000 个路径引用？我很欣赏目录是 blob 容器中的一个抽象概念，但我可以用正斜杠编写文件以在代码中模仿这一点。显然，在我上传到 Visual Studio 之前，Windows 不允许我这样做。

### 将静态文件同步到 blob

[AZCopy](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/12/03/azcopy-uploading-downloading-files-for-windows-azure-blobs.aspx)工具是同步静态文件的一种可编写脚本的选项。

另一种方法是这个[powershell 脚本](https://gallery.technet.microsoft.com/scriptcenter/Upload-Content-Files-from-41c2142a)（有关此[帖子的](http://azure.microsoft.com/en-us/documentation/articles/cdn-serve-content-from-cdn-in-your-web-application/#automate-content-upload-from-your-aspnet-application-to-your-cdn-endpoint)更多信息），它总结了：

1.  是否进行初始设置：

    ```
    $context = New-AzureStorageContext ` 
        -StorageAccountName $StorageAccount ` 
        -StorageAccountKey (Get-AzureStorageKey $StorageAccount).Primary 
    ```

2.  枚举 .\Content 和 .\Scripts 上的所有本地文件：

    ```
    $files = (ls -Path $ProjectPath\Content -File -Recurse) + (ls -Path $ProjectPath\Scripts -File -Recurse) 
    ```

3.  ...并循环上传每个文件：

    ```
    foreach ($file in $files)  
        { 
            $blobFileName = (Resolve-Path $file.FullName -Relative).TrimStart('.') 
            $contentType = switch ([System.IO.Path]::GetExtension($file)) 
            { 
                ".png" {"image/png"} 
                ".css" {"text/css"} 
                ".js" {"text/javascript"} 
                default {"application/octet-stream"} 
            } 

            Set-AzureStorageBlobContent ` 
                -Container $StorageContainer ` 
                -Context $context ` 
                -File $file.FullName ` 
                -Blob $blobFileName ` 
                -Properties @{ContentType=$contentType} ` 
                -Force 
        } 
    ```

### 引用 CDN 资产

另一个要解决的问题是如何引用 CDN 上的文件，而不是相关文件。有不同的解决方案，其中大多数使用帮助函数注入到相对路径的正确前缀（以下问题的一些答案可以帮助您：[ASP.NET MVC 相对路径](https://stackoverflow.com/questions/317315/asp-net-mvc-relative-paths)）。

我建议采用集中方式构建 CDN 资产 url，您甚至可以实现某种*缓存杀手*（为此，您需要在 Azure CDN 上启用查询字符串参数）：

剃刀：

```
<img src="@Helper.ToCdnUrl("images/asset1.png")"> 
```

辅助方法：

```
public static string ToCdnUrl(string relativePath)
{
    string prefix = ConfigurationManager.AppSettings["CdnUrlBasePath"];
    string sufix = ConfigurationManager.AppSettings["StaticFilesVersion"];
    return String.concat(prefix, relativePath, "?v=", sufix);
} 
```

应用设置：

```
<add key="CdnUrlBasePath" value="://<yourCDNName>.vo.msecnd.net/" />
<add key="StaticFilesVersion" value="1.01" /> 
```

呈现的 HTML：

```
<img src="://<yourCDNName>.vo.msecnd.net/images/asset1.png?v=1.01"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-25T07:36:42.580

如果 CDN 或 Blob 存储不是选项，在 Azure（或标准 IIS）中使文件夹服务文件的一种简单方法是在`Web.config`文件夹内创建一个文件，如下所示：

```
<configuration>
    <system.webServer>
        <handlers>
           <clear />
            <add 
                name="StaticFile" 
                path="*" verb="*" 
                modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" 
                resourceType="Either" 
                requireAccess="Read" />
        </handlers>
        <staticContent>
            <mimeMap fileExtension=".*" mimeType="application/octet-stream" />
        </staticContent>
    </system.webServer>
</configuration> 
```

# android - 为 crouton 库使用自定义布局

> ID：15223169
> 
> 赞同：1
> 
> 时间：2013-03-05T11:56:10.163
> 
> 标签：android, crouton

我有 crouton 库（[https://github.com/keyboardsurfer/Crouton](https://github.com/keyboardsurfer/Crouton)）使用默认的通知布局。我想为通知使用自定义布局 xml 文件，以便我可以设置不同的字体以`TextView`匹配我的应用程序的其余部分。我已经扩展了 a`TextView`以使自定义字体正常工作。

浏览库的源代码，我发现了一些可能对我有帮助的方法：

```
public static Crouton make(Activity activity, View customView, ViewGroup viewGroup) {
    return new Crouton(activity, customView, viewGroup);
}

public static Crouton make(Activity activity, View customView) {
    return new Crouton(activity, customView);
} 
```

但是我很难找到关于如何为面包块消息使用自定义布局以及如何为它们设置文本/消息样式的好例子（我已经使用定义了一些自定义样式`Style.Builder()`）。

我要使用的自定义布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/uk.co.volume.pinkmothballs"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >

    <com.myapp.ui.views.TypefacedTextView
        android:id="@+id/crouton_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="14sp"
        android:gravity="center"
        />

</RelativeLayout> 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:10:36.820

您可以通过自定义`Style`使用`resourceId`您的文本外观`Style.Builder.setTextAppearance(...)`。

这需要您的参考`styles.xml`并`TextView`在`Crouton`.

然后您可以调用`Crouton.makeText`或`Crouton.showText`使用您的自定义样式。

# makefile - make install 尝试复制文件两次

> ID：15223170
> 
> 赞同：0
> 
> 时间：2013-03-05T11:56:15.507
> 
> 标签：makefile, heartbeat, make-install

我正在尝试从源代码构建一个包。`./configure`and`make`步骤成功，但or`sudo make install`导致`sudo checkinstall`错误：

![在此处输入图像描述](../Images/c92723d7c73d90064ab2aebd0cab28e2.png)

我们可以看到*drbd*`/usr/bin/install -c`在该行中列出了两次。

问题是我真的不知道该怎么做。正如预期的那样，这个文件列表（ha 资源代理）不存在于任何 Makefile 或 install-sh 中，而是在旅途中以某种方式生成的。

关于在哪里寻找或如何从此列表中删除重复条目的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:11:14.023

实际上我弄错了，上面的列表出现在*Makefile.am*文件之一中。这是帮助我的[帖子](http://www.ogre3d.org/forums/viewtopic.php?f=2&t=54364&start=0#p369604)：

> 导致此问题的原因是，对于那些早期版本，我们错误地在 Makefile.am 中列出了两次指定的文件，而对于较新的 Automake 版本，这会导致您收到错误。

ps对不起，问这个问题有点匆忙。在这种情况下，让这个线程供参考。

# bash - bash find：查找路径排除到数组的变量列表

> ID：15223174
> 
> 赞同：2
> 
> 时间：2013-03-05T11:56:19.633
> 
> 标签：bash, find

我有一个脚本，它`find`遍历带有路径列表的外部文件，以便为`rsync`. 这些路径具有可变数量的路径排除（包括根本没有）。我正在尝试扩展一个`find`基于此构建排除项的变量。我已经研究了很多并且很难过。说：

`cat backuplist.conf`：

```
/mnt/some/dir1 /mnt/some/dir1/exclude/dirA /mnt/some/dir1/exclude/dirB
/mnt/some/dir2 
```

主备份脚本的相关部分是：

`cat backupscript.sh`：

```
while read backuppath excludedir1 excludedir2 excludedir3; do
    exclude=("${excludedir1}" "${excludedir2}" "${excludedir3}")  
    find ${backuppath} -not \( -path "*${exclude[0]}" "${exclude[@]:1}") -mtime -10 > file.list
    rsync -vPaz --files-from=file.list --otheroptions
  done < backuplist.conf 
```

我知道我的数组示例全错了（除其他外），但我什至不知道构建数组是否是正确的解决方案，因为它不知道会有多少排除项。谁能指出我正确的方向？重击/CentOS 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:19:10.603

将排除的目录存储在一个数组中，然后用于在命令`printf`中将它们打印出来。`find`

```
while read backuppath excludeDirs; do
    excludeArr=( $excludeDirs )
    if [[ ${#excludeArr[@]} == 0 ]]
    then
        find "${backuppath}" -mtime -10 > file.list
    elif [[ ${#excludeArr[@]} == 1 ]]
    then
        find "${backuppath}" -mtime -10 -not -path "${excludeArr[0]}"  > file.list
    else
        find "${backuppath}" -mtime -10  -not \( -path "${excludeArr[0]}" $(printf -- '-o -path "%s" ' "${excludeArr[@]:1}") \) > file.list
    fi
    rsync -vPaz --files-from=file.list --otheroptions
done < backuplist.conf 
```

# c++ - C 语言中的 Windows 8（应用商店）- 如何禁用 gzip 压缩？

> ID：15223176
> 
> 赞同：0
> 
> 时间：2013-03-05T11:56:22.723
> 
> 标签：c++, windows-8, http-headers

我有一个应用程序似乎`gzip`在向服务器发送数据时默认启用编码。

我们尝试`gzip`通过显式使用禁用压缩：

`IXMLHttpRequest2::SetRequestHeader(L"Accept-Encoding", L"")`（当然是在 HTTP 请求对象上）

这似乎仍然没有帮助。无论如何要禁用在 C++ 应用程序的 HTTP-Request 标头中启用的 GZIP？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:22:16.063

要*要求*服务器不使用特定编码，您应该提供一个`Accept-Encoding`值列表。从[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616) (HTTP/1.1) 的第 14.11 节，您可以看到它具有以下形式之一（值是示例）：

```
Accept-Encoding: compress, gzip
Accept-Encoding:
Accept-Encoding: *
Accept-Encoding: compress;q=0.5, gzip;q=1.0
Accept-Encoding: gzip;q=1.0, identity; q=0.5, *;q=0 
```

> 如果内容编码是 Accept-Encoding 字段中列出的内容编码之一，那么它是可接受的，除非它的 qvalue 为 0。（如第 3.9 节中所定义，a of 0 表示“不可接受”。）

然后*要求*服务器不使用`gzip`压缩，您应该提供以下值，而不是空字符串`Accept-Encoding`：

```
gzip;q=0 
```

这将要求服务器不要使用它，但您必须提供另一种编码。有关可用编码，请参见第 3.5 节。使用 quality`q`参数通知服务器您的偏好（不要忘记，如果它不能为您的请求提供该编码，它将回复错误 406）。

```
identity;q=1.0, gzip=0.5 
```

通过这种方式，您要求使用`identity`编码，如果它不可用，您也可以接受`gzip`编码（这将阻止服务器在由于任何原因无法为您的请求使用任何其他编码时回复错误）。您也可以尝试其他编码的性能（例如，`compress`和）。`deflate`

**代码**
然后，最后，您必须使用`IXMLHttpRequest2::SetRequestHeader(L"Accept-Encoding", L"identity;q=1.0, gzip=0.5")`. 在[SetRequestHeader](http://msdn.microsoft.com/en-us/library/hh831168.aspx)中，您会看到它是默认发送的标头的*附加*内容，因此如果您指定一个空字符串，则该值实际上不会更改（实际上它的解释方式可能取决于服务器，我没有找到任何适当的规范这，您可以检查您的 HTTP 请求和响应以检查实际发送/接收的内容）。

旧值：`Accept-Encoding: compress`
调用：`IXMLHttpRequest2::SetRequestHeader(L"Accept-Encoding", L"")`
新值：`Accept-Encoding: compress`

# python - 从方法内部访问列表的长度

> ID：15223188
> 
> 赞同：0
> 
> 时间：2013-03-05T11:57:04.157
> 
> 标签：python, list

我对这个有点困惑。在我的一个脚本中，我有以下方法。

```
ALIVES = []

def insert_in_alives(num):
    ALIVES.append(num)
    print len(ALIVES), "alives found." 
```

这里 ALIVES 只是在方法之外声明的一个列表。但是每当`update_alives`调用该方法时，它总是打印以下内容，无论实际长度`ALIVES`是多少。

```
>>>1 alives found. 
```

有人能告诉我为什么会这样吗？

更新：

在 shell 中尝试过，它可以工作：

```
In [2]: a = [1,2,3]

In [3]: print len(a)
3
In [4]: def test(num):
   ...:     a.append(num)
   ...:     print len(a)
   ...:     

In [5]: test(5)
4

In [6]: test(7)
5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:14:25.103

有两点不对：

*   如果您请求的 URL 返回一个空响应，您的`_get_data`函数将返回一个空字符串。因此，您的`proxy_alive()`函数也不会调用`insert_in_alives()`。

    改为`proxy_alive()`测试`None`：

    ```
    def proxy_alive(proxy):
        test = _get_data('http://m.naukri.com', proxy=proxy, silent=True)
        if test is not None:
            insert_in_alives(proxy) 
    ```

*   您正在检查线程中的代理，并且每个线程同时`insert_in_alives()` *调用*。这导致了一种竞争条件，插入物正在相互替换。

    您需要在那里添加一个线程锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:06:30.450

代码很好。

```
ALIVES = []

def update_alives(num):
    ALIVES.append(num)
    print ALIVES
    print len(ALIVES), "alives found."

update_alives(3)
update_alives(5)
update_alives(6) 
```

如果我这样做，我会在列表中添加一个 3，这会导致其中有一个元素。

如果我不止一次这样做，你会追加到列表中，增加它。

输出：

```
[3]
1 alives found.
[3, 5]
2 alives found.
[3, 5, 6]
3 alives found. 
```

# symfony - Symfony 2 和静态资源

> ID：15223189
> 
> 赞同：2
> 
> 时间：2013-03-05T11:57:12.357
> 
> 标签：symfony

我是 Symfony 2 的新手，我想知道一些事情。

看起来你必须把你的静态资源放到这个位置：`MyBundle/Resources/public`

但是如果我想使用 twig 之类的函数`asset`，最好将资源放在这个位置：`web/MyBundleName/`

为什么我必须复制我的资源？（一个在，`src/MyBundle/Resources/public`另一个在`web/MyBundle`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:59:32.127

运行[`app/console assets:install web`](http://symfony.com/doc/master/book/templating.html#including-stylesheets-and-javascripts-in-twig)以将资源从激活的包复制到`web/bundles`文件夹。

这不是重复。该`web/bundles`文件夹是安装所有捆绑包中的所有资产的地方。您的 VCS 应忽略该文件夹。

采用这种方法的原因是第 3 方捆绑包（以及您稍后将创建的可重用捆绑包）无权访问`web`应用程序的文件夹。使用命令安装资产解决了这个问题。

# iphone - 100 件同价的产品应该使用哪种类型的应用内购买？

> ID：15223190
> 
> 赞同：1
> 
> 时间：2013-03-05T11:57:30.693
> 
> 标签：iphone, ios, in-app-purchase

我创建了一个应用程序，其中有图像类别，每个类别都有解锁图像。大约有 10 个类别，每个类别有 50 个锁定图像。用户应该能够通过应用内购买为每张图片支付 0.99 美元。由于每张图片的价格相同，所以我可以为每张图片使用相同的产品标识符并制作该消耗品吗？或者我必须添加 500 个产品标识符并使​​其成为非消耗品？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:04:09.793

我会创建某种应用内货币，可以通过应用内购买（消耗品）购买，并可用于购买图像。为了防止用户丢失已经购买的图像，我会将它们上传到 iCloud。如果用户从其设备中删除该应用程序，他仍然可以在重新安装该应用程序后访问其他设备或同一设备上的图像。

此解决方案的另一个优点是您可以免费赠送图像/IA 货币，而替代解决方案无法做到这一点。赠送可能对营销非常有用（例如，在邀请朋友使用应用程序时赠送免费图片）。

*唯一的弱点是当用户手动从 iCloud 中删除图像或用户禁用 iCloud 功能时，当用户删除应用程序时图像将丢失。但我忽略了这个问题，并断言这是用户的错。如果您想解决该问题，则必须设置中央服务器并记录哪个用户购买了哪个图像。*

# php - PHP 卷曲文件上传多部分边界

> ID：15223191
> 
> 赞同：1
> 
> 时间：2013-03-05T11:57:31.973
> 
> 标签：php, file, curl, upload, boundary

编写代理文件上传的应用程序。我正在使用 CURL 发布文件，但有一些问题。发布到脚本是可以的，它从脚本发布到下一个服务器，这是问题所在。我不断从服务器收到此错误：

“请求被拒绝，因为没有找到多部分边界”

这是我的代码：

```
 $post = $_POST;

            // allow for file upload proxying
            if( !empty( $_FILES ) ){
                    // add to post data
                    foreach( $_FILES as $name => $upload ){
                            $post[ $name ] = '@' . $upload[ 'tmp_name' ] . ';type=image/png';
                    }   
            } 

            // init curl
            $ch = curl_init( $url );

            // configure options
            curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
            curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );

            // post data
            if( !empty( $post ) ){
                    curl_setopt( $ch, CURLOPT_POST, true );
                    curl_setopt( $ch, CURLOPT_POSTFIELDS, $post );
                    // for file uploads, multi-part
                    curl_setopt( $ch, CURLOPT_HTTPHEADER, array(
                            'Content-type: multipart/form-data;'
                    ) );
            }   

            // execute and get return value 
            $return = trim( curl_exec( $ch ) );

            // cleanup
            curl_close( $ch );
            unset( $ch ); 
```

我在网上阅读的所有内容都表明这应该可以工作，并且设置标题内容类型是不必要的，但是当我删除内容类型时，我得到了这个错误：

“请求不包含多部分/表单数据或多部分/混合流，内容类型标头为空”

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:35:45.380

不确定到底是什么问题，但是当我发布此内容时，我正在本地工作。将代码移到实时服务器上，问题就消失了……

# c++ - 抽象接口继承

> ID：15223192
> 
> 赞同：1
> 
> 时间：2013-03-05T11:57:32.050
> 
> 标签：c++

虚拟方法必须始终在派生类中实现吗？
我可以写这样的东西吗？

```
<!-- language: lang-cpp -->
class BaseInterface 
{
public:
   virtual void fun_a() = 0;
   virtual void fun_b() = 0;
   virtual ~BaseInterface(); 
};

class Derived : public BaseInterface
{
   void fun_a() { ... };
};

class FinalClass : public Derived
{
   void fun_b() { ... };
}

int main()
{
   FinalClass test_obj;
   test_obj.fun_a();  // use Derived implementation or fail ???
   test_obj.fun_b();  // use own implementation 
   BaseInterface* test_interface = new FinalClass();
   test_interface->fun_a(); // fail or ok ???
   test_interface->fun_b(); 
} 
```

上面的代码正确吗？
是否存在其他虚拟方法`outflank`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:02:51.000

> 纯虚方法总是必须在派生类中重新实现？

实际上是一个将被实例化的派生类。

在您的代码中，您没有从中创建对象，`Derived`所以没关系。

> 我可以写这样的东西吗？

是的。

你有一些我纠正的小错误：

```
class BaseInterface
{
public:
    virtual void fun_a() = 0;
    virtual void fun_b() = 0;

    virtual ~BaseInterface() {};  // You forget this
};

class Derived : public BaseInterface
{
public:
    void fun_a() {}  // This should be public as its base
};

class FinalClass : public Derived
{
public:
    void fun_b() {} // This should be public as its base
};

int main()
{
    FinalClass test_obj;
    test_obj.fun_a();
    test_obj.fun_b();
    BaseInterface* test_interface = new FinalClass();
    test_interface->fun_a();
    test_interface->fun_b();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:06:27.950

它还创建`Derived`了一个您无法实例化的抽象类，因为您没有`virtual`从它的基础中实现所有功能，它变成了一个您无法直接实例化的抽象类。

见这里：liveworkspace.org/code/6huYU$10

其余的，您的代码应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:09:39.847

代码是正确的。C++中没有*接口的特殊概念。*都是类。一些类方法可以是纯虚拟的。这仅意味着编译器无法创建此类的实例。

# url-rewriting - ASP.Net 登录状态控制不适用于 Intelligencia.UrlRewriter

> ID：15223195
> 
> 赞同：1
> 
> 时间：2013-03-05T11:57:39.680
> 
> 标签：url-rewriting

我使用 intelligencia.urlrewriter 重写我的 URL。但是我有一个问题，当我使用 asp.net 登录状态并尝试从站点注销时，LogoutPageUrl 正在更改为不干净的 URL。

例如，当我尝试注销时，我的 URL 是**example.com/Mysite/en** ，返回 URL 必须是[http://example.com/login?returnurl=/Mysite/en](http://example.com/login?returnurl=/Mysite/en)

但返回 URL 是[http://example.com/login?returnurl=default.aspx?page=Mysite&lang=en](http://example.com/login?returnurl=default.aspx?page=Mysite&lang=en)

我使用**weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx**回发问题，但此问题不适用于登录状态控制...

请帮助我，我需要解决这个问题。谢谢朋友。

# ios - UIPopOverControl 和 UIImageView

> ID：15223200
> 
> 赞同：0
> 
> 时间：2013-03-05T11:57:44.377
> 
> 标签：ios, objective-c, uiimageview, uipopovercontroller

我创建了一个按钮框架设置为与图像框架大小相同的位置`UIButton`。 `UIImageView`我愿意做的是一旦我触摸到它应该做的图像`PopOver`。按钮设置了动作。问题是，一旦我触摸它，它就只显示图像，而不是弹出。

我的代码有什么问题？

```
- (void)viewDidLoad {
    [super viewDidLoad];    
    UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(10, 10,100, 100)]; 
    imageView.image=[UIImage imageNamed:@"abc.jpg"];    
    [self.view addSubview:imageView];          
    imageView.userInteractionEnabled = YES;  
    UIButton *imageButton = [[UIButton alloc]init];
    [imageButton setFrame:CGRectMake(0, 0, 100, 100)];
    [imageButton addTarget:self action:@selector(imageTapped:) forControlEvents:UIControlEventTouchUpInside];
    [imageView addSubview:imageButton];
    [imageButton release];
    [imageView release];     
}

-(void)imageTapped:(UIButton*)in_sender {
    UIViewController *popoverContent = [[UIViewController alloc] init];
    CGRect theScreenFrame = [[UIScreen mainScreen] bounds];
    popoverContent.view.frame = CGRectMake(theScreenFrame.origin.x, theScreenFrame.origin.y,100, 100);
    popoverContent.view.backgroundColor = [UIColor whiteColor];
    popoverContent.contentSizeForViewInPopover = CGSizeMake(300, 300); 
    [popoverContent.view addSubview:imageButton];

    if(m_DetailPopover) {
        [m_DetailPopover release];
        m_DetailPopover = nil;
    }
    UIPopoverController m_DetailPopover = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
    [popoverContent release];   

    [m_DetailPopover presentPopoverFromRect:imageButton.frame inView:self.view
     permittedArrowDirections:UIPopoverArrowDirectionAny  animated:YES];    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:08:59.503

问题可能是代码中的错字：

```
UIPopoverController *m_DetailPopover = [[UIPopoverController alloc] initWithContentViewController:popoverContent]; 
```

另请注意，您不能在 imageTapped 中引用 imageButton，因为您在 viewDidLoad 中释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:04:34.227

您的 UIImageView 位于 UIButton 的前面，不允许获取按钮操作。为什么不使用图像创建自定义按钮？

这样做：

```
UIButton *imageButton = [UIButton buttonWithType:UIButtonTypeCustom];
[imageButton setImage:[UIImage imageNamed:@"abc.jpg"]];
[imageButton setFrame:CGRectMake(0, 0, 100, 100)];
[imageButton addTarget:self action:@selector(imageTapped:) forControlEvents:UIControlEventTouchUpInside];
[imageView addSubview:imageButton];
[imageButton release];
[imageView release]; 
```

**编辑**

```
UIPopoverController *m_DetailPopover = [[UIPopoverController alloc] initWithContentViewController:popoverContent];

[m_DetailPopover presentPopoverFromRect:imageButton.frame inView:self.view
 permittedArrowDirections:UIPopoverArrowDirectionAny  animated:YES];  
[popoverContent release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:05:20.213

不要将图像视图作为子视图添加到按钮，反之亦然。只需将图像（不是图像视图）作为背景图像分配给按钮。

# php - PHP 在包含 XML 数据的变量中搜索文本/数据

> ID：15223201
> 
> 赞同：0
> 
> 时间：2013-03-05T11:57:47.137
> 
> 标签：php

我在变量中有 XML 数据。

我现在需要在这个变量中搜索特定的文本。

谁能指出我正确的方向？我一直在谷歌搜索，但没有好的结果：o/

XML 数据如下所示：

```
<status>
<connection_status>successful</connection_status>
<operation_status>successful</operation_status>
<Options>
<data_2>
<data_7422731>
<id>7431</id>
<assetId>2</assetId>
<startDate>2013-03-05 11:00:00</startDate>
<endDate>2013-03-05 12:00:00</endDate>
</data_7422731>
</data_2>
</Options>
</status> 
```

我需要搜索指定的 ID。

例如 id "7431"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:00:18.237

使用[XML 解析器](http://php.net/simplexml)将[字符串加载到 XML](http://www.php.net/manual/en/function.simplexml-load-string.php)，然后[获取其子](http://www.php.net/manual/en/simplexmliterator.getchildren.php)级或使用[XPATH](http://www.php.net/manual/en/simplexmlelement.xpath.php)，例如：

```
/status/Options/data_2//id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:10:21.140

好吧，这与 XML 并不完全相关，但就像其他人所说的那样，除非您提供更多详细信息和代码，否则我们无能为力。

如果您不想为设置 XML 解析器而烦恼，这是一个快速的肮脏修复：

编辑：我更新了代码以修复一些小错误，我把它变成了一个函数，这样你就可以在任何标签中调用它。

```
function findID($mystring,$tag)
{
    $begintag="<$tag>";
    $endtag = "</$tag>";
    $beginpos = strpos($mystring, $begintag);
    $endpos = strpos($mystring,$endtag );

    $length = $endpos - ($beginpos + strlen($beginpos) +1);

    $extractedvariable = substr($mystring, $beginpos + strlen($beginpos) +1, $length); 

    return $extractedvariable;
} 
```

使用示例：

```
$data='<status>
            <connection_status>successful</connection_status>
            <operation_status>successful</operation_status>
            <Options>
            <data_2>
            <data_7422731>
            <id>7431</id>
            <assetId>2</assetId>
            <startDate>2013-03-05 11:00:00</startDate>
            <endDate>2013-03-05 12:00:00</endDate>
            </data_7422731>
            </data_2>
            </Options>
            </status>';

echo findID($data,'id'); 
```

如果您要使用变量中的大部分标签，或者如果您有多级 XML，我仍然建议您使用 XML 解析器。

# javascript - 同位素不工作/将类应用于由 Knockout 'foreach' 生成的 div

> ID：15223202
> 
> 赞同：1
> 
> 时间：2013-03-05T11:57:47.730
> 
> 标签：javascript, jquery, html, knockout.js, jquery-isotope

我有以下html：

```
<h2 class="groupHeader" id="succeededHeader"></h2>
    <div id="container" data-bind="foreach: successfulProjects">
        <div class="element">
            <div data-bind="attr: { 'class': StatusClass }">
                <h3 class="projectItemTitle" data-bind="text: ProjectName"></h3>
                <h2 class="buildConfigName" data-bind="text: BuildConfigName"></h2>
                <p>
                    Last build Time:<br />
                    <span class="lastBuildTime" data-bind="text: LastBuildTime"></span>
                </p>
                <p>Tests Passed:</p>
                <p>Tests Failed:</p>
            </div>
            </>
        </div> 
```

以及以下JS：

```
$(function () {
        var $container = $('#container');

        $container.isotope({
            itemSelector: '.element'
        });

        var $select = $('#filters select');

        $select.change(function () {
            var filters = $(this).val();
            console.log(filters);
            $container.isotope({
                filter: filters
            });
        });

    }); 
```

当使用 Knockout foreach 生成 html 时，它会出现：

```
<div id="container" class="isotope" data-bind="foreach: successfulProjects" style="position: relative; overflow: hidden; height: 0px;">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
<div class="element">
</div> 
```

没有同位素类别应用于其中的项目，也没有任何形式的分类或过滤工作。这些库真的混合了吗？同位素是否适用于以这种方式生成的元素？

任何帮助/建议将不胜感激。

基督教

# c# - MVC - 视图逻辑、子动作、部分视图或单独部分的正确位置

> ID：15223205
> 
> 赞同：1
> 
> 时间：2013-03-05T11:57:56.560
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我一直在阅读大量博客，并试图确定从模式和实践到性能的最佳方法是什么。

**选项 1** 我有一个部分视图 Index.cshtml，其中包含以下内容。

```
@if (Model.SomeBooleanProperty)
{
     <div>A chunk of HTML</div>
} 
```

**选项 2** 我有一个部分视图 Index.cshtml，其中包含以下内容。

```
@Html.Partial("SomeBooleanProperty", Model) 
```

并且该部分视图具有布尔逻辑。

```
@if (Model.SomeBooleanProperty)
{
     <div>A chunk of HTML</div>
} 
```

**选项 3** 我有一个部分视图 Index.cshtml，其中包含以下内容。

```
@Html.Action("AControllerMethod", "Controller", Model) 
```

和 AControllerMethod 如下

```
[ChildActionOnly]
[AcceptVerbs(HttpVerbs.Post | HttpVerbs.Get)]
public ActionResult AControllerMethod(SomeModel model)
{
   if (model.SomeBooleanProperty)
   {
    return View(model);
   }
   else
   {
        return new ContentResult() { Content = String.Empty };
        //return null
   }
} 
```

然后返回的部分将如下所示（无条件逻辑）

```
<div>A chunk of HTML</div> 
```

从关注点分离的角度来看，选项 3 对我来说似乎是最好的，因为我的观点没有逻辑，但在我看来它也是一种反模式，因为它肯定会影响性能，因为我一直在阅读说孩子的博客行动影响绩效。

任何帮助表示赞赏。Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:07:55.717

在我看来，这取决于您需要相同输出的其他地方。

如果您要在站点的其他部分重复使用该模型的显示逻辑，那么有一个包含 if 语句/标记的局部视图是有意义的，然后`@Html.Partial("SomeBooleanProperty", Model)`在需要显示局部视图的任何地方调用。

例如，如果您只在一个页面上添加此逻辑，则只需在主视图中添加 if 语句/标记，因为无需将其分开。

我不会使用选项 3 来控制显示逻辑，因为它是视图逻辑，在视图中执行条件逻辑没有问题。

选项 3 将简化您的视图模型，这意味着您不必将所需的所有数据传递到父视图中，但是调用所需的控制器会产生性能开销。

# android - 如何使用 Timidity++ 将 midi 转换为 wav？

> ID：15223208
> 
> 赞同：2
> 
> 时间：2013-03-05T11:58:04.403
> 
> 标签：android, c++, c, java-native-interface

我实际上是在尝试使用 jni 接口在我的 android 项目中使用 timidity lib。问题是我需要为包含一些 C 文件的共享库创建共享库。

我不知道其中用于上述任务的 C 文件/类和方法。所以请帮助我，如果你们中的任何一个 C 开发人员有想法或有使用这个库的经验。

# python - 为私有 Python 构建安装 pyuno (LibreOffice)

> ID：15223209
> 
> 赞同：5
> 
> 时间：2013-03-05T11:58:06.027
> 
> 标签：python, libreoffice, uno

[这里](https://stackoverflow.com/questions/7784438/how-do-you-install-or-activate-pyuno-in-libreoffice)有一些关于这个主题的相关主题，[但](https://stackoverflow.com/questions/4270962/using-pyuno-with-my-existing-python-installation)它们似乎有点过时了。

我刚刚下载了内置 Python 3.3.0 的 LibreOffice 4。使用该 Python，我可以很好地导入和使用 UNO，并从我的 Python 脚本控制 Office。但是，该 Python 中缺少我的许多其他模块，而我的 Python 中唯一缺少的模块是 UNO。

有什么方法可以为我的本地 Python 安装 pyuno？LibreOffice 源代码树包含一个 pyuno/ 源代码树，但我不确定如何将其构建/集成到另一个 Python 树中。

这里有什么经验吗？帮助？提示？做，不做，做？

**编辑**下面的[答案](https://stackoverflow.com/questions/15223209/installing-pyuno-libreoffice-for-private-python-build#19158549)`PYTHONPATH`适用于 Linux，我在那里扩展导入 uno没有问题。Mac 上的情况有所不同，因此请查看[其他答案](https://stackoverflow.com/questions/15223209/installing-pyuno-libreoffice-for-private-python-build#27975796)。

**编辑**在修改 Python 路径时绝对考虑到[这个问题！](https://stackoverflow.com/questions/15223209/installing-pyuno-libreoffice-for-private-python-build/28593413#28593413)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-18T20:36:06.550

一旦您尝试从任何其他 Python 可执行文件（而不是 LO 提供的可执行文件）运行 PyUNO，事情就会变得艰难。

Mac 上的 SEGV 是因为 LO 的 libpyuno.dylib（通过 libuno.dylib 加载，而后者又通过“import uno”加载）引用了@loader_path/LibreOfficePython.framework/Versions/3.3/LibreOfficePython（在其上运行“otool -L”文件；当前 LO 主机上的路径；各种 LO 版本的路径略有不同）。当从与 LO 不同的 python 进程运行时，这意味着该进程中将有两个 python 运行时（并且 LO 一个甚至可能没有正确初始化），这会导致该 LibreOfficePython 中某处的 SEGV。（这恰好在 Linux 上工作得更好，其中 libpyuno.so 引用 libpython3.3m.so，并且通常通过其 RPATH 找到 LO python 的旁边，但如果任何 libpython3.3m.so 恰好已经加载到进程中（来自另一条蟒蛇），

Mac 上的一个严重黑客攻击是使用 install_name_tool 来“重新连接”libpyuno.dylib 以引用其他 python 的 Python.framework/Versions/3.3/Python（通过绝对路径）而不是 @loader_path/LibreOfficePython.framework/Versions/3.3/LibreOfficePython。

另一个问题是 LO 的 python（在 Linux 和 Mac 上）实际上是一个围绕真正的 python 可执行文件的 shell 脚本。它需要设置一些环境变量（其目的甚至记录在脚本中）。要使 PyUNO 从不同的 python 工作，您也需要设置这些环境变量，尤其是。UNO_PATH、URE_BOOTSTRAP 和 PYTHONPATH 中查找特定于 LO 的库（而不是 python 本身附带的库）的部分。请注意，这些环境变量值的详细信息在 LO 版本之间有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-03T11:54:06.513

这是一个迟到的答案，我没有与你完全相同的设置，但对我来说，我可以简单地调整，以便 python 知道生活`PYTHONPATH`的目录。`uno.py`

```
bash> export PYTHONPATH=${PYTHONPATH}:/usr/lib/libreoffice/program
bash> python
>>> import uno 
```

一个要求是您的 LibreOffice/OO python 具有与常规版本相同的版本：Python 会将 .py 编译为 .pyc，并且该格式不能在版本之间转移（至少，不能保证）。

`locate uno.py`如果您不确定文件在哪里，请执行 a 。检查`/usr/bin/libreoffice`链接的位置也可能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-05T04:22:38.043

我最近想将 pyuno 与 django 一起使用（即我在电子表格中有一个定价引擎，django 应用程序打开它，填写用户输入，并在重新计算后检索价格）。唯一合理的解决方案是在您正在使用的任何平台上使用 docker 容器或 linux vm（我在 mac 上并为 ubuntu 机器使用并行）。任何其他解决方案都是对时间的巨大浪费。

当您在 linux 环境中时，您所要做的就是运行`apt-get install python3-uno`并将您的 python 路径设置为`$PYTHONPATH:/usr/lib/python3/dist-packages/`（即 apt-get 安装 python3-uno 的位置，一切都会好起来的（仅在 linux 环境中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T01:05:31.697

**Linux**

[dirkjot](https://stackoverflow.com/questions/15223209/installing-pyuno-libreoffice-for-private-python-build#19158549)对此线程的回答在 Linux 上效果很好。

**麦克**（优胜美地）

这里的事情有点棘手，从 LibreOffice 4.3 开始，我仍然无法将我的扩展`PYTHONPATH`到 LibreOffice 并且`import uno`不会在 Mac 上崩溃：

```
localhost ~ > PYTHONPATH=$PYTHONPATH:/Applications/LibreOffice64.app/Contents/MacOS python3.3
Python 3.3.6 (default, Nov 12 2014, 18:18:46) 
[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.54)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import uno
Segmentation fault: 11 
```

但这对我有用。*首先，*我必须确保 Python 和我的 LibreOffice 都是为 32b 或 64b 构建的；它们不能混合。我正在使用 Python 3.3 附带的 64b MacPorts Python 3.3 和 64b LibreOffice for Mac（[下载链接](http://www.libreoffice.org/download/libreoffice-fresh/?type=mac-x86_64&version=4.3&lang=en-US)）。*其次，*我必须确保运行正确的 Python 并`PYTHONPATH`正确扩展。因为我无法运行我的 MacPorts Python 并使用 LibreOffice 的路径对其进行扩展，所以我必须反过来：运行 LibreOffice Python 并使用我的 MacPorts Python 路径对其进行扩展：

```
localhost ~ > PYTHONPATH=$PYTHONPATH:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages /Applications/LibreOffice64.app/Contents/MacOS/python
Python 3.3.5 (default, Dec 12 2014, 10:33:58) 
[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.51)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import uno
>>> import lxml
>>> 
```

请注意如何`uno`从 LibreOffice 的 Python 路径导入，并`lxml`位于 MacPort 的 Python 路径中。

# android - 使用wifi在PC和android手机之间进行通信

> ID：15223212
> 
> 赞同：3
> 
> 时间：2013-03-05T11:58:16.473
> 
> 标签：android, visual-c++, client-server

我想开发一个客户端服务器应用程序，其中服务器位于具有 wifi 的 PC 上，客户端应用程序位于 android 手机上。我想在 android 中使用 vc++.Net 和客户端应用程序制作服务器应用程序。我是网络编程的新手，我无法在互联网上找到任何线索。而且我也不知道是否有可能使用 vc++.net 制作服务器而使用 android 制作客户端。

任何人都可以请指导我如何为此移动。如果可能的话，请给我一些与此相关的链接。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T12:11:06.247

您的问题含糊不清，并且对许多潜在的“正确”答案持开放态度。首先，整个 wifi 与 Internet 部分无关，您只想通过网络从您的 Android 设备与您的 PC 进行通信。

要查找的术语是`sockets`。您所做的是监听 PC 上的特定端口（“服务器”）。您必须在防火墙中打开相关端口。

然后，您编写一个与该服务器通信的 android 应用程序，请参阅[此处](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)以获得正确的介绍。

使用单个套接字（IP 地址 + 端口）连接多个设备是没有问题的，只要您的协议包含每个客户端识别自己的方式。

...

也就是说，您还可以在更高级别上执行所有这些操作，运行基于 SOAP/JSON 的客户端/服务器方案（而不是编写自己的基于套接字的协议）。有关示例，请参见[http://wiebe-elsinga.com/blog/?p=405 。](http://wiebe-elsinga.com/blog/?p=405)

什么是最合适的选择取决于您的确切要求（性能、部署）和您的经验水平。

**更新**

您可以使用 jmDNS 来实现这一点。这是一个非常有用的库，一旦你检测到所有连接到同一个 wifi 的设备，你就可以获得它们的 ip 和端口，这样你就可以建立连接。[您可以在此处](http://home.heeere.com/tech-androidjmdns.html)了解有关如何使用它的更多信息。

或者您可以使用仅适用于 API 级别 14+ 的 Android Wi-Fi Direct API。以下是有关 API 的更多信息：[Wifi-Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)。

[**如何使用java socket实现客户端和服务器之间的文件传输**](https://stackoverflow.com/q/4687615/1602230)

希望它是您正在寻找的东西！:)

# c# - 将两个不同类型的列表链接在一起

> ID：15223213
> 
> 赞同：-3
> 
> 时间：2013-03-05T11:58:16.727
> 
> 标签：c#

我正在尝试制作一个程序，让用户输入一些城市和城市的温度。稍后，带有温度的列表将自行排序，以便我可以得到列表中最冷和最热的城市。但问题是只有带有温度的列表才会被排序。这使得城市的温度与以前不同。

那么我可以将两个列表链接在一起，以便当第二个列表中的温度发生变化时，最初获得温度的城市会改变位置吗？

我对编程有点陌生。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:10:42.483

你可能想把城市名称和城市温度放在一起，比如

```
public class City
{
    public string Name;
    public double Temperature;
    // etc.
} 
```

然后创建一个`List<City>`，当您需要根据特定字段对该列表进行排序时，您可以使用 Linq( `using System.Linq;`) 对列表进行排序

```
List<City> sortedList = cityList.OrderBy(city => city.Temperature).ToList();
           // or if you want the list sorted the other way around:
           sortedList = cityList.OrderByDescending(city => city.Temperature).ToList(); 
```

**编辑：**

如果您使用的是 3.5 之前的 .NET 版本，则不会有任何 Linq，因此您需要一些替代方案：

*   如果只需要一种排序顺序，可以实现`IComparable`接口

    ```
    public class City : IComparable
    {
        public int CompareTo(object obj)
        {
            City other = obj as City;
            if (other == null)
                // obj was not a City, so this should throw an exception in my opinion
                throw new ArgumentException;

            return this.Temperature.CompareTo(other.Temperature);
        }
    } 
    ```

    然后你可以用`cityList.Sort()`

*   或者，如果您希望能够有时按温度、有时按名称对列表进行排序，则需要与代表一起工作

    ```
    cityList.Sort(delegate (City a, City b)
                  {
                      // -1 => a <  b
                      //  0 => a == b
                      //  1 => a >  b
                      return a.Name.CompareTo(b.Name);
                  });
    // cityList is now sorted by name

    cityList.Sort(delegate (City a, City b)
                  {
                      // -1 => a <  b
                      //  0 => a == b
                      //  1 => a >  b
                      return a.Temperature.CompareTo(b.Temperature);
                  });
    // cityList is now sorted by temperature 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:12:22.933

您需要具有将城市和温度结合在一起的结构..例如

```
public class CityInfo 
{ 
  public string CityName {get; set;}
  public float Temperature {get; set;}
} 
```

然后创建这个类的列表。

```
List<CityInfo> citiInfos = new List<CityInfo>(); 
```

然后你可以根据排序：

关于城市名称：

```
var sortedByCity = citiInfos.OrderBy(cityInfo => cityInfo.CityName); 
```

关于温度：

```
var sortedByTemp = citiInfos.OrderBy(cityInfo => cityInfo.Temperature); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:10:49.600

我建议您创建一个包含城市信息和相应温度的对象，例如

```
class City
{
    public string Name {get; private set;}
    public int Inhabitants {get; private set;}
    public float Temperature {get; private set;}

    public City (string name, int inhabitants, float temp)
    {
        Name = name;
        Inhabitants = inhabitants;
        Temperature = temperature;
    }
} 
```

然后创建一个`List<City>`，添加你的城市

```
cityListName.Add(new City("CityName",9000,16.5));
... 
```

然后你可以`List`按温度排序`cityListName.OrderBy((city)=>city.Temperature)`

我希望这会有所帮助。如果您还有其他问题，请随时提问。

# css - 为什么行流体被推倒？（引导程序，CSS）

> ID：15223214
> 
> 赞同：0
> 
> 时间：2013-03-05T11:58:19.197
> 
> 标签：css, twitter-bootstrap

我有一个页面在高分辨率（第一个屏幕截图）下看起来很棒，但在低分辨率（第二个屏幕截图）下，行流体被推过（所以它不符合 VG-ES 列表项）。有没有办法解决这个问题？

我的标记：

```
<div class="container">
  <div class="row-fluid">
    <div class="span8">Calendar</div>
    <div class="span4">Event info</div>
  </div>
</div> 
```

这是它的外观（1280 x 720）： ![高的](../Images/0b86a4dba753b413d527fa15c3aa26e7.png)

这就是它在低分辨率（1152x720 或更低）下的样子 ![低的](../Images/f58166f3c6b4b9b0410f8d1149191313.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:04:39.490

从我对引导程序的一点经验来看，这就是它的方式。bootstrap 在您提到的分辨率下通过 css 媒体查询定义了一些分辨率关键点。您可以编辑 CSS 媒体查询以满足您自己的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:16:14.290

如果问题是您希望日历相对于顶部菜单保持在同一位置，请仔细检查该菜单是否也在容器 > 行流体网格中。如果是，请尝试强制日历左对齐。

祝你好运！

# iphone - 将 JSON 格式的 NSString 转换为 NSMutableDictionary

> ID：15223220
> 
> 赞同：2
> 
> 时间：2013-03-05T11:58:49.000
> 
> 标签：iphone, json, nsstring, nsmutabledictionary

我有一个从 JSON 得到的字符串。

```
{
    "Audit_Description": "Request Approved",
    "Module_Name": "Resource Request",
    "Field_DisplayName": null",
    "Previous_Value": Education",
    "Current_Value": Employment",
    "Modified_Timestamp": "08-02-2013"
 },
 {
    "Audit_Description": "Request Approved",
    "Module_Name": "Resource Request",
    "Field_DisplayName": null",
    "Previous_Value": null",
    "Current_Value": null",
    "Modified_Timestamp": "08-02-2013"
} 
```

我想解析数据。从`JSON`，数据进来`NSString`如上。我想将它们提取为密钥对值。但我无法解析它们。这应该`NSMutableDictionary`像键值一样`"Audit_Description"`转换`"Request Approved"`

输出：

```
 @{
      @"Audit_Description" : @"Request Approved",
      @"Module_Name" = @"Resource Request",
      @"Field_DisplayName" : <null>,
      @"Previous_Value" : @"Education",
      @"Current_Value" : @"Employment",
      @"Modified_Timestamp" : @"08-02-2013"
  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T12:03:59.657

```
NSError *err = nil;
NSArray *arr = [NSJSONSerialization JSONObjectWithData:[str dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingMutableContainers error:&err];

// access the dictionaries
NSMutableDictionary *dict = arr[0];
for (NSMutableDictionary *dictionary in arr) {
  // do something using dictionary
} 
```

多亏了 NSJSONReadingMutableContainers，这创建了一个可变字典。

# php - 如何从 PHP 中的 XML 中删除所有命名空间（标签和属性）

> ID：15223224
> 
> 赞同：1
> 
> 时间：2013-03-05T11:59:04.123
> 
> 标签：php, xml, regex, xml-parsing, xml-namespaces

我最近对 ​​XML 名称空间感到非常痛苦，并在 PHP 中有效地处理它们。这是最坏的罪魁祸首的样本：

```
<dc:type xsi:type="TypeName" xsi:identifier="NN">Others</dc:type> 
```

我成功地使用 preg_replace 成功地使用以下方法“取消命名空间”标签（不破坏 URL）：

```
$xml = preg_replace(
  '/<(\/?)([^:" ].*):([^>\/ ].*)(\/?)>/msiU',
  '<$1$2_$3$4>',
  $x->readOuterXML()
);

# <dc_type xsi:type="TypeName" xsi:identifier="NN">Others</dc_type> 
```

由于缺乏正则表达式魔法，我无法将所有命名空间属性转换为相同的格式。我设法转换了第一次出现，但不知道如何设置可重复的条件。我删除了代码，因为它不起作用（我不记得我做了什么），但结果是这样的：

```
<dc_type xsi_type="TypeName" xsi:identifier="NN">Others</dc_type> 
```

而美丽的是这样的：

```
<dc_type xsi_type="TypeName" xsi_identifier="NN">Others</dc_type> 
```

有没有正则表达式大师可以提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T01:36:40.040

我一直在寻找同样的东西，但我知道最好不要尝试对 XML 使用正则表达式（搜索关于使用正则表达式解析 XML/HTML 的任何 StackOverfow 问题并阅读整个答案以找出原因。你会知道的你看）！

这是我想出的代码：

```
<?php
// Some test XML
$xml = <<<XML
<root xmlns:a="bogus.a" xmlns:b="bogus.b">
    <a:first>
        <b:second>text</b:second>
    </a:first>
</root>
XML;

$sxe = new SimpleXMLElement($xml);
$dom_sxe = dom_import_simplexml($sxe);

$dom = new DOMDocument('1.0');
$dom_sxe = $dom->importNode($dom_sxe, true);
$dom_sxe = $dom->appendChild($dom_sxe);

$element = $dom->childNodes->item(0);

// See what the XML looks like before the transformation
echo "<pre>\n" . htmlspecialchars($dom->saveXML()) . "\n</pre>";
foreach ($sxe->getDocNamespaces() as $name => $uri) {
    $element->removeAttributeNS($uri, $name);
}
// See what the XML looks like after the transformation
echo "<pre>\n" . htmlspecialchars($dom->saveXML()) . "\n</pre>";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:28:56.523

要重写完整的 XML 文档，例如重命名元素或属性名称以及更改与名称空间相关的数据（例如`xmlns`属性），您可以使用基于 expat 的 xml 解析器扩展：

*   [PHP XML 解析器](http://php.net/book.xml.php)

这通过解析文件并动态更改输出来工作。解析器调用回调函数（所谓的*handler*）来获取预先解析的数据，例如字符串形式的元素名称和数组形式的属性。

然后，您可以即时更改这些值并输出（可能更改的）数据。

通过这种方式，您不再需要关心正则表达式（这对于正确的 XML 解析来说很重要）。

[您可以在我以前的回答中](https://stackoverflow.com/a/15193159/367456)找到一些样板代码来开始此操作。

# c# - 为非关联对象执行 CollectionChanged 事件

> ID：15223225
> 
> 赞同：0
> 
> 时间：2013-03-05T11:59:04.187
> 
> 标签：c#

我有两个 ObservableCollection 对象，并且 obj1 已附加到集合更改事件。obj1 具有来自 obj2 的值，通过 obj1 = obj2。当我在 obj2 上添加任何项目时，它会执行对象 1 的集合更改事件。我不明白为什么会这样。

> ```
>  public MainWindow()
>     {
>         InitializeComponent();
> 
>         ObservableCollection<int> obj1 = new ObservableCollection<int>();
>         ObservableCollection<int> obj2 = new ObservableCollection<int>();
> 
>         obj1 = obj2;
> 
>         obj1.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(obj1_CollectionChanged);
> 
>         obj2.Add(1); 
> ```

}

```
 void obj1_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        MessageBox.Show("Testing");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:03:28.047

obj1 和 obj2 指的是同一个对象。上面的代码在内存中创建了两个对象，但是行

```
obj1 = obj2; 
```

将 obj1 的引用更改为 obj2 引用的对象。这意味着 CollectionChanged 事件注册在 obj1 和 obj2 引用的对象上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:11:45.930

`obj1 = obj2`不会在 obj1 中为您提供 obj2 的副本。在这一行中，您说“obj1 请指向与 obj2 相同的 ObservableCollection”。之前附加到 obj1 的 ObservableCollection 将被销毁，之后两个变量都指向同一事物。

如果您想要一个副本，请创建一个新的 ObservableCollection 并填写另一个集合。

```
obj1 = new ObservableCollection(obj2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:03:08.923

您只有一个 ObservableCollection 导致您`obj1`通过分配 的引用来覆盖变量的引用`obj2`。

你的代码：

```
obj1 = obj2; 
```

从那时起，两个变量都指向同一个 ObservableCollection。在分配之后，如果您使用变量`obj1`或`obj2`调用方法或在 ObservableCollection 上注册事件，则相同。

# c - 在 NTFS 上读取文件时如何清除 C 中的驱动器缓存

> ID：15223229
> 
> 赞同：1
> 
> 时间：2013-03-05T11:59:22.027
> 
> 标签：c, linux, caching, benchmarking, ntfs

我正在 Linux 操作系统上用 C 语言进行驱动器基准测试，但在 NTFS 文件系统上遇到了问题。下面是一些编写许多新文件的代码：

```
for ( int i = 0; i < 100; ++i )
{
    fd = open(nextfile, O_WRONLY | O_DIRECT | O_SYNC | O_CREAT );
    write(fd, buff, size);
    fsync(fd);
    close(fd);
} 
```

这很好用，但是当我想读取所有创建的文件时， fsync 功能似乎不起作用。下面是一些读取所有文件的代码：

```
for ( int i = 0; i < 100; ++i )
{
    fd = open(nextfile, O_RDONLY | O_DIRECT | O_SYNC);
    read(fd, buff, size);
    fsync(fd);
    close(fd);
} 
```

在测试我的旧笔式驱动器时，我的写入时间为 4MB/s，读取时间为 267MB/s，这显然不是真的，但在测试 ext4 文件系统时，读取时间是正确的。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:01:42.123

在执行读取测试之前卸载文件系统是确保没有缓存的常用方法。读取例程中的 fsync() 几乎没有意义（但可能会导致文件访问时间戳被刷新，具体取决于挂载选项）。我假设提供的代码只是一个草图，但我希望您的实际代码正在测试打开和读取的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:38:24.583

该问题可以通过在写入循环后添加以下代码来解决。

```
int fd;
char* data = "3";

sync();
fd = open("/proc/sys/vm/drop_caches", O_WRONLY);
write(fd, data, sizeof(char));
close(fd); 
```

# android - AutoCompleteTextView - 在调用 notifyDataSetChanged 时防止下拉菜单关闭

> ID：15223230
> 
> 赞同：4
> 
> 时间：2013-03-05T11:59:22.983
> 
> 标签：android

我正在使用我自己的`Adapter`和我自己的`Filter`来填充`AutoCompleteTextView`. 一切正常，除了每次我调用`notifyDataSetChanged`下拉菜单时都关闭然后重新打开新建议（这有点烦人）。

我想要实现的 - 与谷歌的行为相同。当您输入单词时，下拉列表中只会填充新值（无需重新打开）。有什么解决方法吗？

**附言**

适配器填充`Filter#publishResults`：

```
@Override
protected void publishResults(CharSequence constraint, FilterResults results) {
    if(results == null) {
        return;
    }

    mAdapter.clear(); //notifyDataSetChanged is NOT called here

    List<?> content = (List<?>) results.values;
    final int size = content.size();
    for(int i=0; i<size; i++) {
        mAdapter.add((City) content.get(i));
    }

    mAdapter.notifyDataSetChanged();
} 
```

# c# - 如何更改 DataList 中的列数（Webforms，C#）

> ID：15223234
> 
> 赞同：0
> 
> 时间：2013-03-05T11:59:26.363
> 
> 标签：c#, asp.net, web-applications, webforms, databinder

我制作了一个 Web 应用程序，它查询数据库并在 Datalist 中返回结果。

用户可以指定要返回的列。对于 Datalist，我已经这样做了：

```
 <asp:DataList runat="server" ID="list">
        <ItemTemplate>
            <%# DataBinder.Eval(Container.DataItem, columns[0])%>
            &nbsp &nbsp &nbsp
            <%# DataBinder.Eval(Container.DataItem, columns[1])%>
            &nbsp &nbsp &nbsp
            <%# DataBinder.Eval(Container.DataItem, columns[2])%>
            &nbsp &nbsp &nbsp
            <%# DataBinder.Eval(Container.DataItem, columns[3]) %>
            &nbsp &nbsp &nbsp
            <%# DataBinder.Eval(Container.DataItem, columns[4]) %>
            &nbsp &nbsp &nbsp
            <%# DataBinder.Eval(Container.DataItem, columns[5]) %>
        </ItemTemplate>
    </asp:DataList> 
```

如果用户选择 7 列来返回它只会显示 6 并且如果用户选择 5 列来返回它会抛出 ArgumentOutOfRangeExpection，这将起作用。

有没有办法放置一个 if 语句来检查它是否需要该列？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:20:53.723

将数据绑定到 datalist/gridview/repeater 时，更容易创建为对象列表并将其绑定到控件。这是一个使用网格视图的示例：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="False"
  AutoGenerateColumns="false" BackColor="White" 
  BorderWidth="2px" BorderStyle="Solid"
  CellPadding="4" ForeColor="#333333" GridLines="both" 
  EmptyDataText="No Log Messages">

     <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
     <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
     <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
     <Columns>                                  
       <asp:TemplateField Visible="false" ItemStyle-HorizontalAlign="Center" HeaderText="ID" HeaderStyle-ForeColor="white">
         <ItemTemplate>
            <asp:Label ID="lblId" runat="Server" Text=' <%#Eval("ID")%>' />
             </ItemTemplate>
        </asp:TemplateField>  
<asp:TemplateField Visible="false" ItemStyle-HorizontalAlign="Center" HeaderText="Address" HeaderStyle-ForeColor="white">
         <ItemTemplate>
            <asp:Label ID="lblAddress" runat="Server" Text=' <%#Eval("Address1")%>' />
             </ItemTemplate>
        </asp:TemplateField>                   
     </Columns>
 </asp:GridView> 
```

此示例创建一个包含两列的表。每列都期望对应的数据源具有名称为：ID 和 Address1 的列。在服务器端，您创建一个对象列表，其中包含具有这些名称的列，并将数据源绑定到控件。像这样：

首先，使用您的属性创建一个类：

```
Public Class myClassAddress
    Public Property ID  As String
    Public Property Address1  As String
End Class 
```

现在，在您拥有 gridview 的代码中，实例化该类并填充它：

```
 Dim myList As New List(Of myClassAddress)
    Dim newClass As myClassAddress

    newClass = New myClassAddress
    newClass.Address1 = "some address"
    newClass.ID = "1"
    myList.Add(newClass)

    newClass = New myClassAddress
    newClass.Address1 = "some address2"
    newClass.ID = "12"
    myList.Add(newClass) 
```

当然，在这个例子中，我只是对值进行硬编码。您可以使用来自数据库、xml 文件等的数据填充类。上面的示例创建了 myClassAddress 类的两个实例。它还创建这些类的列表并将每个实例添加到该列表中。现在，只需将列表绑定到您的控件：

```
me.gridView1.datasource = myList
me.gridview1.bindData() 
```

我知道这可能看起来很多，但一旦你习惯了它，这是将数据绑定到这些类型的控件的最简单方法。如果您有任何问题，请告诉我。

# iphone - 如何获得笑脸的Unicode

> ID：15223236
> 
> 赞同：0
> 
> 时间：2013-03-05T11:59:29.973
> 
> 标签：iphone, ios, objective-c, ipad, sqlite

我正在开发一个 iPhone 聊天应用程序，当我将包含文本的表情符号保存到 Sqlite3 数据库中并将它们取回时遇到问题。

或者我想知道是否有从 iPhone 的默认键盘（表情符号类型）输入的笑脸的 Unicode。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T12:03:22.217

[您可以在此处](http://en.wikipedia.org/wiki/Emoji)和[此处](http://opensource.apple.com/source/ICU/ICU-461.13/icuSources/data/translit/Any_SoftbankSMS.txt)找到表情符号或笑脸的 Unicode 字符

例如在标签上设置笑脸

```
self.label.text= @"\U0001F604"; 
```

如果您需要将 unicode 转换为 emoj，反之亦然

**将表情符号转换为 unicode**

```
 NSData *data = [strEmo dataUsingEncoding:NSNonLossyASCIIStringEncoding]; 
  NSString *valueUnicode = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

**将 unicode 转换为表情符号**

```
NSData *data = [strEmo dataUsingEncoding:NSUTF8StringEncoding];
NSString *valueEmoj = [[NSString alloc] initWithData:data encoding:NSNonLossyASCIIStringEncoding]; 
```

# c# - 按值排序字典

> ID：15223239
> 
> 赞同：1
> 
> 时间：2013-03-05T11:59:41.293
> 
> 标签：c#, mono

我想按值订购字典。似乎 Mono API 中不存在通常在 .Net 中完成的方式。

是否有任何特定的 API 调用或者我应该自己做这个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:31:11.963

正如所评论的， Dictionary 类没有排序。如果您想要一个有序的字典，则有[SortedDictionary](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)类。

但是 SortedDictionary 是按其键排序的。按其值保存排序字典似乎不是一项常见的任务。

无论如何，如果你想访问排序的值，你可以这样做：

```
dict.Values.OrderBy(v => v).ToList(); //Sorted list of the values of the dictionary dict 
```

或者

```
dict.OrderBy(kvp => kvp.Value).ToList(); //Sorted list (by value) of the key value pairs of the dictionary dict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:02:33.853

你可以使用Linq：

```
var dict = new Dictionary<string, int>();
var sorted = dict.OrderBy(kvp => kvp.Value).ToList(); 
```

# javascript - 使用 Java 中的 Action 中的对象列表填充 jqgrid 中的表

> ID：15223241
> 
> 赞同：0
> 
> 时间：2013-03-05T11:59:47.117
> 
> 标签：javascript, jquery, jqgrid, struts

我正在开发一个 Struts 应用程序，我需要在 jqGrid 中使用对象列表填充一个表。

我不想使用 ajax 来填充表格，我想在请求中传递对象列表并在 JSP 中用它生成表格。

我该怎么办？？

搜索我发现了一个与我相同的问题： http: [//www.coderanch.com/t/549822/Struts/fill-jqgrid-java-object-list](http://www.coderanch.com/t/549822/Struts/fill-jqgrid-java-object-list)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:16:49.000

您没有发布创建 jqGrid 的 JavaScript 代码的任何详细信息。所以我试着猜测你目前在做什么以及你可以做些什么来解决所描述的问题。我建议你尝试使用`datatype: "json"`，`loadonce: true`如下`jsonReader`：

```
jsonReader: {
    root: function (obj) { return obj; },
    repeatitems: false
} 
```

如果存在包含唯一信息（如主键）的网格列，或者在网格的每一行中都是唯一的，那么您应该添加`jsonReader`额外的属性，例如`id: "columName"`，其中`"columName"`是具有唯一信息的列的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:32:47.657

最后，我使用 JSON 将请求中的数据从 Java 传递到 Javascript

在 Struts Action 中，我这样做了

```
List<Object> dataList = Service.getData();
request.setAttribute("dataList", new Gson().toJson(dataList)); 
```

然后在 JSP 中的 Javascript 代码中，我对 JSON 值进行 eval 并将传递的字符串转换为数组：

```
<table id="tableExample"></table>

<script>

$("#tableExample").jqGrid({ 
    datatype: "local", 
    height: 250, 
    data: eval('<%= request.getAttribute("dataList") %>'),
    colNames:['col1','col2', 'col3', 'col4'], 
    colModel:[ 
        {name:'a1', index:'a1', width:150, align:"right", sorttype:"float"}, 
        {name:'a2', index:'a2', width:150, align:"right", sorttype:"float"}, 
        {name:'a3', index:'a3', width:150, align:"center", sorttype:"date", formatter:'date', formatoptions:{"srcformat":"d/m/Y","newformat":"d/m/Y"}}, 
        {name:'a4', index:'a4', width:150, align:"center", sorttype:"date", formatter:'date', formatoptions:{"srcformat":"d/m/Y","newformat":"d/m/Y"}}
    ], 
    caption: "Table Example"
}); 

</script> 
```

# jquery - 除非我指定高度，否则 Div 不会在屏幕上居中

> ID：15223248
> 
> 赞同：0
> 
> 时间：2013-03-05T12:00:08.430
> 
> 标签：jquery, css, html

我正在使用以下 jquery 代码在页面上居中 div，问题是除非我在 css 中为 div 指定高度，否则它不起作用，问题是 div 应该根据里面的内容调整大小. 如果我在 css 中设置 height:auto ，我仍然会遇到问题，但是如果我将 height:300px 例如放在页面上，那么它会将 div 居中。

我在这里有一个问题的 jsfiddle：http: [//jsfiddle.net/Vjvyz/](http://jsfiddle.net/Vjvyz/)

jQuery

```
var positionContent = function () {
    var width = $(window).width(); // the window width
    var height = $(window).height(); // the window height
    var containerwidth = $('.container').outerWidth(); // the container div width
    var containerheight = $('.container').outerHeight(); // the container div height
    if ((width >= containerwidth) && (height>=containerheight)){
        $('.container').css({position:'absolute',
            left: ($(window).width() - $('.container').outerWidth())/2,
            top: ($(window).height() - $('.container').outerHeight())/2 }); 
    } 
};
//Call this when the window first loads
$(document).ready(positionContent);
//Call this whenever the window resizes.
$(window).bind('resize', positionContent); 
```

HTML

```
<div class="container"></div>
<div class="container">
    <div class="logo"></div>
    <div class="menucontainer"></div>
    <div class="content">
        <p>Passion stands for the enthusiasm and fervour we put into everything we do in the company, and in developing the right organisational mix to help others in every possible way<br />
        we want every guest to experience that passion for life by having the most relaxing, blissful and luxurious stay possible, a time filled with personal discovery, recovery and spiritual fulfillment.</p>
        <p>We want every employee to taste that passion for life by growing in confidence and skills, and feeling part of a close-knit global family.</p>
    </div>
</div> 
```

CSS

```
.container {width:300px; background:#eee; height:300px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:09:02.567

使用此代码跨浏览器工作。

```
(function($)
{
    $.fn.center = function()
    {
        var element = this;
        $(element).load(function()
        {
            changeCss();
            $(window).bind("resize", function()
            {
                changeCss();
            });
            function changeCss()
            {
                var imageHeight = $(element).height();
                var imageWidth = $(element).width();
                var windowWidth = $(window).width();
                var windowHeight = $(window).height();
                $(element).css({
                    "position" : "absolute",
                    "left" : windowWidth / 2 - imageWidth / 2,
                    "top" : windowHeight /2 - imageHeight / 2
                });
            };
        });
    };
})(jQuery); 
```

然后将其用作`$('.container').center();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:03:23.910

添加`display:table-cell`

```
.container {width:300px; background:#eee; display:table-cell} 
```

**[演示](http://jsfiddle.net/Vjvyz/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:10:32.953

如果您的容器具有静态高度和宽度，则只能使用 CSS 来完成。比你可以使用下面的代码：

```
.container{
  width:300px; 
  background:#eee;
  height:300px;
  position:absolutel
  left:50%;
  top:50%;
  margin-left:-150px; /* 50% of your width with the - */
  margin-top:-150px; /* 50% of your height with the - */
} 
```

在你的代码中

```
<div class="container"></div><div class='container'> 
```

将其更改为：

```
<div class='container'> 
```

解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:48:17.697

可能有点hacky，但您可以尝试使用边距：

```
.container {margin-top:-25%;width:300px; background:#eee; height:inherit;position:relative;} 
```

# asp.net - 强制显示 Rad GridView 的寻呼机

> ID：15223255
> 
> 赞同：0
> 
> 时间：2013-03-05T12:00:39.957
> 
> 标签：asp.net, telerik, rad

![在这里，寻呼机还应该显示 0 条记录中的 0 条](../Images/ee59bdc6aa6ff652ef66f2ceed80832a.png)![在此处输入图像描述](../Images/c9c925dc290e74e754031cb5d0403bef.png)我正在使用 Telerik rad gridview。这是有分页。当记录超过页面大小时显示分页页脚。即使没有记录，我也希望分页页脚保持显示。它可能或应该显示类似“0 of 0 records display”的内容

我正在使用从 Telerik Rad Gridview 继承的 mlm:Gridview：

```
<mlm:GridView ID="mlmGridView" runat="server" OnItemDataBound="mlmGridView_ItemDataBound"AutoGenerateColumns="true" ShowGroupPanel="true" SkinID="Grid" AllowSorting="True" AllowMultiRowSelection="True" AllowPaging="True" PageSize="13">
    <MasterTableView Width="100%" Summary="GridView table">              
    <NoRecordsTemplate> 
        No records to display !  
    </NoRecordsTemplate>   
    <Columns>
    </Columns>
    </MasterTableView>
    <ClientSettings ReorderColumnsOnClient="True" AllowDragToGroup="True" AllowColumnsReorder="True">
    <Selecting AllowRowSelect="True"></Selecting>
    <Resizing AllowColumnResize="True" EnableRealTimeResize="True"></Resizing>                                
    </ClientSettings>             
    <GroupingSettings ShowUnGroupButton="true" />
</mlm:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:31:52.550

您可以将[PagerStyle-AlwaysVisible](http://www.telerik.com/help/aspnet-ajax/grid-pageritem.html)设置为`true`。

```
<mlm:GridView PagerStyle-AlwaysVisible="True" ...> 
```

# r - 过滤掉R中的多列

> ID：15223257
> 
> 赞同：1
> 
> 时间：2013-03-05T12:00:48.613
> 
> 标签：r, dataframe

假设一个数据集有几行和几列，其中一些列是 0（我的意思是列中的所有值都是 0）。如何过滤掉那些列？我已尝试使用以下代码，但无济于事。

```
training_data <- Filer(function(x) { !(all(x[, 1:99]==0))}, training_data) 
```

更新：

对不起。在数据集中，并非所有列都是数字的，因此我需要为列指定 1:99 的范围。

更新 V2：添加了我的数据集的一部分（使用`dput`）

```
structure(list(label = structure(c(1L, 1L, 1L, 2L, 1L, 1L), .Label = c("A", 
"B"), class = "factor"), f1 = c(15, 24, 10, 9, 6, 9), f2 = c(6, 
14, 5, 4, 2, 4), f3 = c(6, 7, 2, 2, 1, 2), f4 = c(0, 0, 0, 0, 
0, 0), f5 = c(9, 15, 6, 5, 3, 5), f6 = c(3, 7, 2, 2, 1, 2), f7 = c(1, 
0, 0, 0, 0, 0), f8 = c(4, 11, 5, 4, 2, 4), f9 = c(5, 3, 0, 0, 
0, 0), f10 = c(1, 3, 0, 0, 0, 0), f11 = c(1, 4, 2, 2, 1, 2), 
    f12 = c(0, 0, 0, 0, 0, 0), f13 = c(13, 15, 7, 6, 3, 6), f14 = c(0, 
    7, 1, 1, 1, 1), f15 = c(0, 0, 0, 0, 0, 0), f16 = c(20, 30, 
    11, 10, 6, 10), f17 = c(5, 0, 0, 0, 0, 0), f18 = c(0, 0, 
    0, 0, 0, 0), ft19 = c(28, 344, 399, 28, 82, 42), f20 = c(2.15, 
    15.64, 49.88, 4, 20.5, 6), f21 = c(0, 0, 0, 0, 0, 0), f22 = c(0, 
    0, 0, 0, 0, 0), f23 = c(6, 7, 2, 2, 1, 2), f24 = c(0, 0, 
    0, 0, 0, 0), f25 = c(19, 334, 395, 23, 79, 37), f26 = c(0, 
    26, 37, 6, 16, 7), f27 = c(11, 64, 101, 5, 17, 12), f28 = c(0, 
    0, 0, 0, 0, 0), f29 = c(2, 37, 101, 7, 26, 8), f30 = c(0, 
    18, 32, 2, 16, 4), f31 = c(0, 0, 0, 0, 0, 0), f32 = c(0, 
    0, 0, 0, 0, 0), f33 = c(3, 0, 1, 0, 1, 0), f34 = c(5, 44, 
    32, 4, 15, 5), f35 = c(0, 0, 0, 0, 0, 0), f36 = c(0, 0, 0, 
    0, 0, 0), f37 = c(0, 0, 0, 0, 0, 0), f38 = c(0, 0, 0, 0, 
    0, 0), f39 = c(6, 8, 10, 3, 2, 3), f40 = c(4, 6, 16, 4, 4, 
    3), f41 = c(18, 36, 37, 7, 5, 7), f42 = c(0, 18, 27, 0, 14, 
    1), f43 = c(0, 0, 0, 0, 0, 0), f44 = c(54, 743, 910, 65, 
    184, 100), f45 = c(14, 133, 91, 25, 18, 40), f46 = c(0, 0, 
    0, 0, 0, 0), f47 = c(4, 25, 17, 6, 6, 8), f48 = c(0, 0, 0, 
    0, 0, 0), f49 = c(0.46, 1, 1.5, 1.14, 1.5, 1.14), f50 = c(2.67, 
    1.86, 1.83, 1.88, 1.67, 1.88), f51 = c(3, 9, 1, 2, 1, 2), 
    f52 = c(0, 1, 2, 1, 1, 1), f53 = c(10, 12, 5, 4, 2, 4), f54 = c(0, 
    0, 0, 0, 0, 0), ft55 = c(3, 10, 3, 3, 2, 3), f56 = c(0.54, 
    0.07, 0.03, 0.32, 0.07, 0.21), f57 = c(0.21, 0.04, 0.01, 
    0.14, 0.02, 0.1), f58 = c(0.21, 0.02, 0.01, 0.07, 0.01, 0.05
    ), f59 = c(0, 0, 0, 0, 0, 0), f60 = c(0.32, 0.04, 0.02, 0.18, 
    0.04, 0.12), f61 = c(0.11, 0.02, 0.01, 0.07, 0.01, 0.05), 
    f62 = c(0.04, 0, 0, 0, 0, 0), f63 = c(0.14, 0.03, 0.01, 0.14, 
    0.02, 0.1), f64 = c(0.18, 0.01, 0, 0, 0, 0), f65 = c(0.04, 
    0.01, 0, 0, 0, 0), f66 = c(0.04, 0.01, 0.01, 0.07, 0.01, 
    0.05), f67 = c(0, 0, 0, 0, 0, 0), f68 = c(0.46, 0.04, 0.02, 
    0.21, 0.04, 0.14), f69 = c(0, 0.02, 0, 0.04, 0.01, 0.02), 
    f70 = c(0, 0, 0, 0, 0, 0), f71 = c(0.71, 0.09, 0.03, 0.36, 
    0.07, 0.24), f72 = c(0.18, 0, 0, 0, 0, 0), f73 = c(0, 0, 
    0, 0, 0, 0), f74 = c(1, 1, 1, 1, 1, 1), f75 = c(0.08, 0.05, 
    0.12, 0.14, 0.25, 0.14), f76 = c(0, 0, 0, 0, 0, 0), f77 = c(0, 
    0, 0, 0, 0, 0), f78 = c(0.21, 0.02, 0.01, 0.07, 0.01, 0.05
    ), f79 = c(0, 0, 0, 0, 0, 0), f80 = c(0.68, 0.97, 0.99, 0.82, 
    0.96, 0.88), f81 = c(0, 0.08, 0.09, 0.21, 0.2, 0.17), f82 = c(0.39, 
    0.19, 0.25, 0.18, 0.21, 0.29), f83 = c(0, 0, 0, 0, 0, 0), 
    f84 = c(0.07, 0.11, 0.25, 0.25, 0.32, 0.19), f85 = c(0, 0.05, 
    0.08, 0.07, 0.2, 0.1), f86 = c(0, 0, 0, 0, 0, 0), f87 = c(0, 
    0, 0, 0, 0, 0), f88 = c(0.11, 0, 0, 0, 0.01, 0), f89 = c(0.18, 
    0.13, 0.08, 0.14, 0.18, 0.12), f90 = c(0, 0, 0, 0, 0, 0), 
    f91 = c(0, 0, 0, 0, 0, 0), f92 = c(0, 0, 0, 0, 0, 0), f93 = c(0, 
    0, 0, 0, 0, 0), f94 = c(0.21, 0.02, 0.03, 0.11, 0.02, 0.07
    ), f95 = c(0.14, 0.02, 0.04, 0.14, 0.05, 0.07), f96 = c(0.64, 
    0.1, 0.09, 0.25, 0.06, 0.17), f97 = c(0, 0.05, 0.07, 0, 0.17, 
    0.02), f98 = c(0, 0, 0, 0, 0, 0), f99 = c(1.93, 2.16, 2.28, 
    2.32, 2.24, 2.38), f100 = c(0.5, 0.39, 0.23, 0.89, 0.22, 
    0.95), f101 = c(0, 0, 0, 0, 0, 0), f102 = c(0.14, 0.07, 0.04, 
    0.21, 0.07, 0.19), f103 = c(0, 0, 0, 0, 0, 0), f104 = c(0.02, 
    0, 0, 0.04, 0.02, 0.03), f105 = c(0.1, 0.01, 0, 0.07, 0.02, 
    0.04), f106 = c(0.11, 0.03, 0, 0.07, 0.01, 0.05), f107 = c(0, 
    0, 0.01, 0.04, 0.01, 0.02), f108 = c(0.36, 0.03, 0.01, 0.14, 
    0.02, 0.1), f109 = c(0, 0, 0, 0, 0, 0), f110 = c(0.11, 0.03, 
    0.01, 0.11, 0.02, 0.07)), .Names = c("label", "f1", "f2", 
"f3", "f4", "f5", "f6", "f7", "f8", "f9", "f10", "f11", "f12", 
"f13", "f14", "f15", "f16", "f17", "f18", "ft19", "f20", "f21", 
"f22", "f23", "f24", "f25", "f26", "f27", "f28", "f29", "f30", 
"f31", "f32", "f33", "f34", "f35", "f36", "f37", "f38", "f39", 
"f40", "f41", "f42", "f43", "f44", "f45", "f46", "f47", "f48", 
"f49", "f50", "f51", "f52", "f53", "f54", "ft55", "f56", "f57", 
"f58", "f59", "f60", "f61", "f62", "f63", "f64", "f65", "f66", 
"f67", "f68", "f69", "f70", "f71", "f72", "f73", "f74", "f75", 
"f76", "f77", "f78", "f79", "f80", "f81", "f82", "f83", "f84", 
"f85", "f86", "f87", "f88", "f89", "f90", "f91", "f92", "f93", 
"f94", "f95", "f96", "f97", "f98", "f99", "f100", "f101", "f102", 
"f103", "f104", "f105", "f106", "f107", "f108", "f109", "f110"
), class = "data.frame", row.names = c(NA, -6L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:07:34.660

```
training_data[, !colSums(training_data == 0)] 
```

**基于问题更新：（**过滤器应用于第 1 - 99 列）

```
idx <- which(as.logical(colSums(training_data[, 1:99] == 0))) # find columns
training_data[, setdiff(seq_along(test_data), idx)]           # exclude columns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:37:56.617

我认为在使用它的解决方案中使用`all(x == 0)`它的效率稍微高一些`any(x!=0)`，因为`any`在元素的第一个实例之后停止`!=0`，这对于行数的增加很重要。

`plyr`使用和`colwise`（`dat`作为`dput`数据）提供不同的解决方案：

```
library(plyr)
f0 <- function(x) any(x!=0) & is.numeric(x)
colwise(identity, f0)(dat) 
```

这个想法是遍历 dat 中的每一列并返回它（`identity`），但前提是`f0`返回`TRUE`，即该列至少有一个条目`!=0`并且该列`is.numeric`

**编辑**：为列表中的每个 data.frame 执行此操作，例如。`training_data <- list(dat, dat, dat, dat)`

```
training_data_clean <- lapply(training_data, function(z) colwise(identity, f0)(z))

sapply(training_data, dim)
     [,1] [,2] [,3] [,4]
[1,]    6    6    6    6
[2,]  111  111  111  111

sapply(training_data_clean, dim)
     [,1] [,2] [,3] [,4]
[1,]    6    6    6    6
[2,]   74   74   74   74 
```

**EDIT2**：保留标签列：

```
lapply(training_data, function(z) cbind(label = z$label, colwise(identity, f0)(z))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T12:07:26.550

您可以使用`colSums`

```
dat <- diag(10)
dat[1,1]  <- 0
dat[5,5]  <- 0

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0    0    0    0    0    0    0    0    0     0
 [2,]    0    1    0    0    0    0    0    0    0     0
 [3,]    0    0    1    0    0    0    0    0    0     0
 [4,]    0    0    0    1    0    0    0    0    0     0
 [5,]    0    0    0    0    0    0    0    0    0     0
 [6,]    0    0    0    0    0    1    0    0    0     0
 [7,]    0    0    0    0    0    0    1    0    0     0
 [8,]    0    0    0    0    0    0    0    1    0     0
 [9,]    0    0    0    0    0    0    0    0    1     0
[10,]    0    0    0    0    0    0    0    0    0     1

colSums(dat) == 0
 TRUE FALSE FALSE FALSE TRUE FALSE FALSE FALSE FALSE FALSE 
```

因此，要删除带有 0 的列，您只需执行此操作

```
dat[  ,colSums(dat)!=0]
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
 [1,]    0    0    0    0    0    0    0    0
 [2,]    1    0    0    0    0    0    0    0
 [3,]    0    1    0    0    0    0    0    0
 [4,]    0    0    1    0    0    0    0    0
 [5,]    0    0    0    0    0    0    0    0
 [6,]    0    0    0    1    0    0    0    0
 [7,]    0    0    0    0    1    0    0    0
 [8,]    0    0    0    0    0    1    0    0
 [9,]    0    0    0    0    0    0    1    0
[10,]    0    0    0    0    0    0    0    1 
```

**编辑**

这假设所有数据都具有相同的符号，以避免这种情况，

```
dat[  ,colSums(abs(dat[,1:99]))!=0] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T12:07:53.440

```
training_data[,apply(training_data, MARGIN = 2, FUN = function(x) !all(x == 0))] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T12:29:13.570

只是另一种使用方式，`lapply`因为它是`data.frame`. `apply`内部转换`data.frame`为`matrix`我相信的。

```
df[!unlist(lapply(df, function(x) all(x==0)))] 
```

或者在你的情况下：

```
df[, 1:99][!unlist(lapply(df[, 1:99], function(x) all(x==0)))] 
```

**编辑：**另一种使用`colSums`. 诀窍是在检查后使用它`0`。

```
df[!colSums(df == 0) == nrow(df)] 
```

如果您知道哪些列是数字的（例如 1:99），则替换`df`为：

```
df[,1:99][!colSums(df[,1:99] == 0) == nrow(df)] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T12:11:29.440

```
apply(df, 2, Filter, f = function(x){!all(x==0)}) 
```

我也有同样的[问题](https://stackoverflow.com/questions/14804539/undefined-columns-selected-when-trying-to-remove-nas-from-dfs-in-list)。

# project - 试图快速复活一个旧的 Maven 构建项目

> ID：15223259
> 
> 赞同：0
> 
> 时间：2013-03-05T06:35:15.050
> 
> 标签：project, build, maven

项目的第一天和 Maven 的第一天，我已经浪费了很多时间来构建它。

看来问题是这个旧项目有配置、POM 等，其中嵌入了许多损坏的 URL。即 Maven 生成的堆栈跟踪显示了许多在尝试下载项目依赖项时被破坏的 URL。

我只得到了包含 Maven 配置文件的项目源。我没有获得现有的 Maven 存储库、项目依赖库或任何构建环境等。我一直在修改这些文件，但每次构建尝试都没有走得太远。

我是在做一些根本错误的事情，还是这个 Maven 配置真的停留在 2008 年？

**更新：**

我的 POM 确实停留在 2008 年，也就是说，由于版本控制，它是一个及时的快照，而 Java 世界的其他部分仍在继续。

一些依赖项不再在任何存储库中，其中大部分是已失效的项目，所以我已经停止使用它们。我不得不重写整个 POM。我不得不花费大量时间来调整版本以确保依赖项之间和插件之间的兼容性。经过多番争战；一些插件就是不能共存，互相破坏。

总而言之，这是很多很多小时的努力......对于这个只有一个开发人员的项目来说太多了，我相信我现在才知道足够危险。在这种情况下，优秀的 IDE 构建系统会是更好的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:39:03.173

ftr 的建议（[在评论部分](https://stackoverflow.com/questions/15223259/trying-to-quickly-resurrect-an-old-maven-built-project#comment21458176_15223259)）是正确的：Maven 无法下载某些依赖项，但这并不一定意味着这些依赖项不再存在。可能只是 Maven 配置的 extra-repos 部分现在缺少某些存储库，和/或存在其他一些连接问题（例如错误的代理配置 - 这可能导致您能够访问某些存储库但不能访问其他存储库）。

我遇到过类似的情况，发现虽然最初 Maven 在尝试下载大约 80% 的依赖项时报告了错误，但在对 Maven 的配置进行各种调整后，我最终让它下载了所有的依赖项（除了一个实际上只是某人做的一个自定义 jar，它是直接从本地文件系统获取的，但除此之外）。

这是我要做的：

*   在 Maven 说它无法下载的所有依赖项中，尝试找出“众所周知”的 2 或 3 个（例如，如果它说它无法下载 Servlet 或某些 Spring 库，请写下他试图下载的确切 URL联系方式）。

*   手动检查这些 URL 是否确实可以访问（通过浏览器）。如果是这样，请确保 Maven 正在寻找的版本存在依赖项。也许自项目创建以来它们已经更新，并且不再保留旧版本。在这种情况下，90% 的解决方案是简单地更新 Maven 的 pom 以指向新版本。

*   如果手动检查依赖项的 URL 显示依赖项实际上存在，对于 Maven 正在寻找的版本，请确保没有代理或其他形式的互联网连接“额外配置”，这是为您的浏览器完成的，但不是为 Maven . 如果是这种情况，只需使用所有这些额外的参数（代理、代理身份验证等）更新 Maven 的配置。

*   如果依赖项 URL 根本不存在，请尝试使用谷歌搜索以查看该依赖项现在是否不存在于其他一些存储库中。例如，许多 JBoss 依赖项（如 Hibernate 等）在 2007-2009 年左右更改了 repo 位置。如果是这种情况，只需将新的 repo 添加到 Maven 的 repo 列表中（如果旧的不再存在，则删除它）。

*   最后，解决这个问题的好老可耻的方法是去找一位在某些时候与您的项目有（或曾经）有关的同事，并将他的本地 Maven 存储库复制到您的机器:)

# c# - 有效使用带有“StartsWith”、“Contains”和“EndsWith”的“Directory.GetFiles”来过滤文件名

> ID：15223267
> 
> 赞同：0
> 
> 时间：2013-03-05T12:01:15.867
> 
> 标签：c#, file, filtering, contains, startswith

有没有更有效的方法来使用 Directory.GetFiles 和 'StartsWith'、'Contains' 和 'EndsWith' 过滤文件名，而不是我目前的做法？

```
 _files = Directory.GetFiles(_path);

        if (!String.IsNullOrEmpty(_startsWith))
        {
            _files = _files.Where(x => x.StartsWith(_startsWith)).ToArray();
        }

        if (!String.IsNullOrEmpty(_contains))
        {
            _files = _files.Where(x => x.Contains(_contains)).ToArray();
        }

        if (!String.IsNullOrEmpty(_endsWith))
        {
            _files = _files.Where(x => x.EndsWith(_endsWith)).ToArray();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:30:08.083

您应该切换到`Directory.EnumerateFiles()`它是懒惰的，并且不需要首先建立完整的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:10:44.523

我认为以下重载将对您有所帮助：

```
Directory.GetFiles(strPath, "*" + strFilter, SearchOption.TopDirectoryOnly); // to get behaviour of EndsWith

Directory.GetFiles(strPath, "*" + strFilter + "*", SearchOption.TopDirectoryOnly); // to get behaviour of Contains

Directory.GetFiles(strPath, strFilter + "*", SearchOption.TopDirectoryOnly); // to get behaviour of StartsWith 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:11:28.007

如果您试图将所有内容都塞进一行 Linq 中，您可以执行以下操作：

```
_files = _files.Where(_ => !String.IsNullOrEmpty(_startsWith)).Where(x => x.StartsWith(_startsWith)).ToArray(); 
```

但是，如上所述，Directory.GetFiles 几乎可以肯定是这里代码中最慢的部分，您最好坚持使用更易于阅读的内容。

# microcontroller - 如何知道 8051 单片机是否发生了上电复位或软件复位

> ID：15223268
> 
> 赞同：2
> 
> 时间：2013-03-05T12:01:21.060
> 
> 标签：microcontroller, reset, 8051

我正在 8051 系列的 ATMEL AT89C51 上开发应用程序。

任何人都可以建议如何在编码中确定重置是由于电源循环还是通过软件完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T22:49:02.013

根据[Atmel 8051 微控制器硬件手册（PDF 链接）](http://www.atmel.com/Images/doc4316.pdf)，当 VCC 从 0 上升到其标称电压时，电源控制寄存器（PCON / 87h）中的断电标志（POF / 位 4）由硬件设置。断电标志复位值只有在上电（冷复位）后才会为 1。热复位（例如软件复位）不会影响该位的值。

我经常发现不同的供应商在 SFR 空间中实现了他们自己的寄存器，可以在这种情况下利用这些寄存器。例如，Silicon Labs 在其复位源寄存器 (RSTSRC) 中使用了上电复位标志 (PORSF)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:17:35.757

这真的取决于您是否想依赖某些特定的 8051 变体供应商。最好使用供应商提供的寄存器，但是如果您更改了供应商，您的代码将会崩溃，或者更糟糕的是，它会出现异常。

如果您的系统中有外部 RAM（并且它不是电池供电的），那么您可以在内存的保留部分的某处写入一系列字节（如 0xAA、0x55 ...），并检查它是否仍然存在启动后。如果没有，你已经冷启动了。当然，您应该修改汇编程序启动代码以确保它不会初始化这部分内存（或者在每次启动时为零），并且您应该指示链接器从链接中排除该内存，以便它不会得到被其他任何东西使用。

最后，在您的代码中包含条件编译，这样如果您有一些带有特殊寄存器的 8051 变体，就会使用它，如果没有，请尝试 B 计划。

我已经用几个字节的内部 8051 内存 / 我所有的外部 RAM 都是电池供电 / 然后我了解到不是每个 8051 变体在启动时都有一致的策略 - 有些已经初始化了所有的内部存储器，有些只初始化SFR 和其他一些特定区域给我留下了几个字节来使用所描述的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:05:53.907

我不认为有一种方法可以确定重置是如何发生的，因为一旦重置，一切都会从 8051 开始。

我想一种可行的方法是，

假设取一个变量 X，在每个复位软件代码之前，只需设置 X=1（表示软件复位）并将此变量存储在任何 ROM 中，如果您与外部接口。

在每次重置时，在开始时包含一个实例，该实例检查此变量 X 以查看发生了哪个重置并将 X 更改为 0，以便下次检测。

如果您没有外部 ROM，请至少连接一个 D-latch。

我希望这行得通。请告诉我这是否有效。

# asp.net-mvc - 通过 where 条件获取一些集合对象

> ID：15223271
> 
> 赞同：1
> 
> 时间：2013-03-05T12:01:41.497
> 
> 标签：asp.net-mvc, linq, entity-framework

我有一些“公司”模型的集合。我的公司模型具有以下属性：

```
public virtual ICollection<Useraccount> Useraccounts { get; set; } 
```

现在我试图让我所有的公司：

```
List<Company> companies = UnitOfWork.CompanyRepository.Get().ToList(); 
```

这工作没有问题。现在我想从所有公司获取所有用户帐户。我的方法调用会是什么样子？

代码如何从所有 id > 8 的公司获取所有用户？

我正在使用工作单元和通用存储库模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:07:53.380

尝试这个：

```
var result = companies.SelectMany(c => c.Useraccounts)
                      .Where(ua => ua.id > 8); 
```

或者，如果您的意思是公司的 id，那么：

```
var result = companies.Where(cmp => cmp.id > 8)
                      .SelectMany(c => c.Useraccounts); 
```

# android - 设置可点击字符串 - Textview (Android)

> ID：15223273
> 
> 赞同：0
> 
> 时间：2013-03-05T12:01:48.393
> 
> 标签：android, textview

我的代码看起来像这样，

```
String content = "Hi this is @Naveen. I'll meet @Peter in the evening.. Would you like to join @Sam??";

TextView contentTextView=(TextView)userHeader.findViewById(R.id.contentTextView);
contentTextView.setText(content); 
```

在文本视图中设置文本之前，我想为@Naveen、@Peter 和@Sam 添加点击事件。当用户点击这些文本时，我想打开一个新的意图。这可能吗？任何指针都会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:11:52.753

您可以尝试将[Linkify](http://developer.android.com/reference/android/text/util/Linkify.html)与自定义模式一起使用。

但是，如果这不适合您的需求，您可以尝试以下操作：

```
SpannableString ss = new SpannableString("Hi this is @Naveen. I'll meet @Peter in the evening.. Would you like to join @Sam??");
ClickableSpan clickableSpanNaveen = new ClickableSpan() {
    @Override
    public void onClick(View textView) {
        //Do Stuff for naveen
    }
};
ClickableSpan clickableSpanPeter = new ClickableSpan() {
    @Override
    public void onClick(View textView) {
        //Do Stuff for peter
    }
};
ClickableSpan clickableSpanSam = new ClickableSpan() {
    @Override
    public void onClick(View textView) {
        //Do Stuff for sam
    }
};

ss.setSpan(clickableSpanNaveen, 11, 17, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
ss.setSpan(clickableSpanPeter, 29, 35, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
ss.setSpan(clickableSpanSam, 76, 79, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
TextView contentTextView=(TextView)userHeader.findViewById(R.id.contentTextView);
contentTextView.setText(ss);
contentTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:07:21.683

您可以使用`Linkify`该类，它提供了将链接添加到`TextViews`. 您可以使用该`addLinks(TextView textView, Pattern pattern, String scheme)`方法，该方法需要您指定要匹配的文本的`TextView`a和将用于匹配的自定义方案，该方案可以与此类数据一起使用。单击链接时要打开的 必须在其. 希望这可以帮助。`Pattern``Activities``Activity``intent-filter`

# groovy - 执行 FitNesse 脚本时，出现“实例 scriptTableActor。不存在”错误。谁能解释这个错误的含义？

> ID：15223274
> 
> 赞同：1
> 
> 时间：2013-03-05T12:01:50.217
> 
> 标签：groovy, fitnesse

执行 FitNesse 脚本时，出现“实例 scriptTableActor。不存在”错误。任何人都可以解释这个错误的含义吗？

我在 eclipse 中创建了一个夹具：

```
/**
 * To enter text or numbers in a text field, add this row to your FitNesse script table:
 * <html> <br/> <br/>
 *    | Enter value xpath | value | in field |fieldXpath |
 *    <br/> <br/>
 * </html>
 * tags: setter
 * @param fieldXpath the field xpath assigned to the target field
 * @param input the characters to be entered
 * @return true if text entered successfully
 */
public boolean EnterValueInFieldByXpath(String xpath, String value) {
    try {
        println "in the EnterValueInFieldByXpath method "
        WebElement e = driver.findElement(By.xpath(xpath))
        e.clear()
        e.sendKeys(value)
        return true
    } catch (Exception e) {
        println "apparently did not find the $xpath Link: ${e}"
        return false
    }

} 
```

当我在 FitNesse 命令中使用这个夹具时，就会出现这样的错误。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:31:25.483

好吧，这里有两件事值得注意。首先是我假设您确实在尝试将其用作脚本表的一部分。为此，脚本表行不能是独立的。所以你需要一个脚本行。如果您打算使用决策表，这不是这样做的方法。请参阅：http: [//fitnesse.org/FitNesse.UserGuide.SliM.DecisionTable](http://fitnesse.org/FitNesse.UserGuide.SliM.DecisionTable)

其次，我很确定您的行与方法的签名不匹配。我认为应该是：

```
/**
 * To enter text or numbers in a text field, add this row to your FitNesse script table:
 * <html> <br/> <br/>
 *    | Enter value | value | in field |field| by xpath |
 *    <br/> <br/>
 * </html>
 * tags: setter
 * @param fieldXpath the field xpath assigned to the target field
 * @param input the characters to be entered
 * @return true if text entered successfully
 */
public boolean EnterValueInFieldByXpath( String value, String xpath) {
    try {
        println "in the EnterValueInFieldByXpath method "
        WebElement e = driver.findElement(By.xpath(xpath))
        e.clear()
        e.sendKeys(value)
        return true
    } catch (Exception e) {
        println "apparently did not find the $xpath Link: ${e}"
        return false
    }

} 
```

方法名称中的所有单词在表使用中都是必需的。您在示例区域中遗漏了一些内容。

最后，你的论点被推翻了。值应该在 xpath 之前，而不是相反。

# javascript - 复选框不确定状态逻辑

> ID：15223281
> 
> 赞同：1
> 
> 时间：2013-03-05T12:02:24.723
> 
> 标签：javascript, checkbox, logic

我嵌套了无序列表，列表项的标题看起来像这样。

```
<ul>
    <li><input type="checkbox" /> Header 1</li>
    <ul>
        <li><input type="checkbox" value="1" />Item 1</li>
    </ul>
    <li><input type="checkbox" /> Header 2</li>
    <ul>
        <li><input type="checkbox" value="1" />Item 1</li>
        <li><input type="checkbox" value="2" />Item 2</li>
        <li><input type="checkbox" value="3" />Item 3</li>
        <li><input type="checkbox" value="4" />Item 4</li>
    </ul>
    <li><input type="checkbox" /> Header 3</li>
    <ul>
        <li><input type="checkbox" value="5" />Item 5</li>
        <li><input type="checkbox" value="6" />Item 6</li>
        <li><input type="checkbox" value="7" />Item 7</li>
        <li><input type="checkbox" value="8" />Item 8</li>
        <li><input type="checkbox" value="9" />Item 9</li>
        <li><input type="checkbox" value="10" />Item 10</li>
        <li><input type="checkbox" value="11" />Item 11</li>
        <li><input type="checkbox" value="12" />Item 12</li>
        <li><input type="checkbox" value="13" />Item 13</li>
        <li><input type="checkbox" value="14" />Item 14</li>
        <li><input type="checkbox" value="15" />Item 15</li>
        <li><input type="checkbox" value="16" />Item 16</li>
    </ul>
</ul> 
```

请注意，项目 1 位于 Header 1 的列表和 Header 2 的列表中。

我正在努力完成一些事情。

1.  当我单击标题项时，它将自动选择或取消选择`li`其`ul`列表中紧随其后的所有列表项。
2.  当我单击`li`嵌套中的列表项时，`ul`我想检查其他项是否全部选中（在这种情况下，在标题列表项上放置复选标记）或未选中（在这种情况下，删除复选标记标题列表项）如果它是选中和未选中的混合，则将标题列表项设置为不确定状态。
3.  当我检查一个列表项时，例如显示在标题 1 的列表和标题 2 的列表中的列表项 1，我希望它取消选中这两个项目，或者检查两个列表中的两个项目，并导致检查要求 2在受影响的名单上。

我真的很难做到这一点，因为我并不是很擅长 JavaScript，而且到目前为止我读过的所有代码都没有真正接近我的需要。

任何帮助，将不胜感激。我使用的是 jQuery 1.9.1，但如果你想用最基本的 JavaScript 来做这件事，我也可以（因为当你在 Google 开发工具中设置一个刹车点以查看发生了什么时，它更容易遵循）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:33:42.360

我已将*topList*类添加到外部 UL 和*header*类添加到 LI 标头元素以简化选择器，因此您可能需要对其进行调整，但我认为这应该可以满足您的需求。[jsfiddle](http://jsfiddle.net/KWuy6/1/)上的完整示例

```
//selects all items under a header. This might also select checkboxes from other headers if they share a value. Assumes, "this" points to the header LI
function selectAll() {
    var $this = $(this);
    var isChecked = $this.find(":checkbox").prop("checked");
    $this.find("+ul :checkbox").each(function() {
        selectCheckbox($(this), isChecked);
    });
    $(".header + ul").each(updateHeaderState);
}

//selects or deselects a checkbox. Also, selects other checkboxes if they share a value
function selectCheckbox($checkbox, isChecked) {
    var value = $checkbox.val();
    $checkbox.prop("checked", isChecked);
    $(".topList :checkbox[value="+value+"]").prop("checked", isChecked);
}

//updates the state of the header checkbox. Assumes "this" points to the UL element following a header
function updateHeaderState() {
    var $this = $(this);
    var someChecked = $this.find(":checkbox:checked").length > 0;
    var someUnchecked = $this.find(":checkbox:not(:checked)").length > 0;

    var $header = $this.prev().find(":checkbox");
    $header.prop("indeterminate", someChecked && someUnchecked);
    $header.prop("checked", someChecked || !someUnchecked);
}

$(".header").click(selectAll);
$(".header + ul li").click(function() {
    var $this = $(this);
    var isChecked = $this.find(":checkbox").prop("checked");
    selectCheckbox($this.find(":checkbox"), isChecked);    
    $(".header + ul").each(updateHeaderState);
}); 
```

# dynamics-crm-2011 - 在 CRM 2011 中，向其他用户隐藏选项列表值

> ID：15223283
> 
> 赞同：1
> 
> 时间：2013-03-05T12:02:26.813
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

![为他人隐藏的价值观](../Images/fd60df47627321302c4107bc10783eb0.png)![价值观](../Images/2a20ef4a27069b90ae53b04235eb1307.png)所有者可见的值

嗨，我知道如何隐藏文本框中的值，如上所示，但不知道如何在选择列表中类似地隐藏值。如果有人有任何想法，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:17:14.183

选择列表中的文本没有“密码隐藏”选项。不过，您确实有几个选择：

1.  使用 CRM `setVisible`javascript 方法完全隐藏该字段。将代码设置为在表单的加载时运行。一个稍微“安全”的版本是最初在 CRM 表单编辑器中将其标记为不可见，然后使其对需要它的用户可见。

2.  为不需要访问的用户创建一个甚至不包含该字段的新表单。这是最“安全”的方法，但它需要基于角色的安全性，而且看起来您需要基于价值的安全性。

# java - 为什么在java的内部类中使用final变量

> ID：15223285
> 
> 赞同：-3
> 
> 时间：2013-03-05T12:02:32.187
> 
> 标签：java

我在问这个，因为 final 和 non-final 具有相同的范围，所以为什么 VARIABLE 在 java 中被添加为 final 变量 .. & 添加一些变量作为 final 的影响是什么，当它只在某个范围内访问时。

```
public void game()
{
    final String str = "a" ;
        //String str ="a" ;

    class hollow 
    {
        public void game ()
        {
            System.out.println(str);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:12:58.227

最终类和内部类[http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables](http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables)

> 当在方法体中定义匿名内部类时，在该方法范围内声明为 final 的所有变量都可以从内部类中访问。一旦它被赋值，最终变量的值就不能改变。这允许 Java 编译器在运行时“捕获”变量的值并将副本作为字段存储在内部类中。一旦外部方法终止并且它的堆栈帧被删除，原始变量就消失了，但内部类的私有副本仍然存在于类自己的内存中。

# git - 使用 git pre-commit hook 修复 mac/windows 新行？

> ID：15223290
> 
> 赞同：3
> 
> 时间：2013-03-05T12:02:48.990
> 
> 标签：git, githooks, git-bash

在我们的办公室，我们在一个由大约 10 名开发人员组成的团队中工作。他们中的大多数人都有一台Mac机器。最近我意识到当我检查我的工作的差异时（只更改了一行代码之后）几乎每一行都被更改了，但`git diff`表明你的更改与原来的完全相同。经过一番研究，结果证明这是一条不同的新路线。在我做任何事情之前它是 '\r\n' (CR+LF, 0x0D0A) 并且在我更改所有非 Unix 新行 (\r\n) 之后都更改为 Unix 之一 (\n)。

我意识到我可以要求我的同事更改他们的 IDE 设置，但我意识到我可以只准备一些脚本，这些脚本需要在他们每次提交时运行。

如何在 git commit 之前运行 bash 脚本？如何使用 git pre-commit 钩子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:25:05.543

一切都在[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings) 和这里[http://git-scm.com/docs/gitattributes#_checking-out_and_checking-in](http://git-scm.com/docs/gitattributes#_checking-out_and_checking-in)

对于 Linux/Mac 机器使用

```
git config --global core.autocrlf input 
```

对于 Windows 机器使用

```
git config --global core.autocrlf true 
```

使用此设置，git 会将所有`\r\n`行尾转换为`\n`每次提交之前。

# facebook - 超类没有空构造函数，但没有给出参数

> ID：15223297
> 
> 赞同：33
> 
> 时间：2013-03-05T12:03:14.787
> 
> 标签：facebook, spring, hibernate, inject, spring-social

我在我的应用程序中使用 Spring Social：

```
<spring.framework.version>3.2.0.RELEASE</spring.framework.version>
<hibernate.version>4.1.9.Final</hibernate.version>
<commons-dbcp.version>1.4</commons-dbcp.version>
<org.springframework.social-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social-version>
<org.springframework.social.facebook-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social.facebook-version>
<org.springframework-version>3.2.1.RELEASE</org.springframework-version>
<org.springframework.security.crypto-version>3.1.3.RELEASE</org.springframework.security.crypto-version> 
```

当我申请

```
private final Facebook facebook;

@Inject
public SearchController(Facebook facebook) {
    this.facebook = facebook;
} 
```

到我的 HomeController：

```
@Controller
public class HomeController {

    private final Facebook facebook;

    @Inject
    public HomeController(Facebook facebook) {
        this.facebook = facebook;
    }

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Model model) {
        return "home";
    }

} 
```

注入的工作原理很像，我可以从中获取信息`facebook`。但是，当我将它应用到像这样的其他 Cotroller 之一时

```
@Controller
@Transactional
@RequestMapping(value = "/search")
public class SearchController {

    private static final Logger logger = LoggerFactory.getLogger(SearchController.class);

    private final Facebook facebook;

    @Inject
    public SearchController(Facebook facebook) {
        this.facebook = facebook;
    }

    @PersistenceContext
    private EntityManager entityManager;

    ... 
```

我收到此错误：

```
mar 05, 2013 12:46:36 EM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/project] threw exception [Request processing failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'searchController' defined in file [C:\Users\Nilsi\Downloads\springsource\vfabric-tc-server-developer-2.7.2.RELEASE\base-instance\wtpwebapps\course_info\WEB-INF\classes\com\courseinfo\project\controller\SearchController.class]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.courseinfo.project.controller.SearchController]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given] with root cause
java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
    at org.springframework.cglib.proxy.Enhancer.emitConstructors(Enhancer.java:721)
    at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:499)
    at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)
    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
    at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)
    at org.springframework.cglib.proxy.Enhancer.create(Enhancer.java:285)
    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:205)
    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:111)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:477)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:362)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:412)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1492)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
    at org.springframework.web.method.HandlerMethod.createWithResolvedBean(HandlerMethod.java:202)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:233)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:55)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:297)
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1091)
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1076)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:896)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:827)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我的猜测是我不能将 facebook 注入带有注释 @Transactional 的控制器？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-05T17:52:59.513

CGlib 有一个重要限制：目标类必须提供默认构造函数。

如果你使用基于属性的注入而不是基于构造函数的注入，问题就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T16:05:20.877

我刚刚创建了一个空的默认构造函数来处理这个问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-08-15T13:18:30.263

如果您在代码中使用[Lombok](https://projectlombok.org/)，则只需添加以下注释即可消除此错误：

```
@NoArgsConstructor
public class SearchController { 
```

# c# - 释放由 WCF ChannelFactory 创建的 Channel

> ID：15223298
> 
> 赞同：10
> 
> 时间：2013-03-05T12:03:15.973
> 
> 标签：c#, .net, wcf, channelfactory

我正在寻找一种**干净的方式**让**ChannelFactory**为我创建通道，并**能够**在使用后处理它们。
这就是我得到的：

```
public class ClientFactory : IClientFactory
{
    private const string endpointName = "IMyService";
    private readonly ChannelFactory<IMyService> _factory;

    public ClientFactory()
    {
        _factory = new ChannelFactory<IMyService>(endpointName);
    }

    public Client<IMyService> GetClient()
    {       
        IMyService channel = _factory.CreateChannel();
        return new Client<IMyService>(channel);
    }
}

public class Client<T> : IDisposable
{
    public T Channel { get; private set; }

    public Client(T channel)
    {
        if (channel == null)
            throw new ArgumentException("channel");

        Channel = channel;
    }

    public void Dispose()
    {
        (Channel as IDisposable).Dispose();
    }
}

//usage
using (var client = _serviceFactory.GetClient())
{
    client.Channel.DoStuff();
} 
```

这是一个好的解决方案吗？
有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T12:58:06.653

不，没有更清洁的方法来包装频道。

另一种方法是使用 Action/Func 代替。它不干净，但可能更适合您的应用程序。

我就是这样做的：

```
internal class WrappedClient<T, TResult> : IDisposable
{
    private readonly ChannelFactory<T> _factory;
    private readonly object _channelLock = new object();
    private T _wrappedChannel;

    public WrappedClient(ChannelFactory<T> factory)
    {
        _factory = factory;
    }

    protected T WrappedChannel
    {
        get
        {
            lock (_channelLock)
            {
                if (!Equals(_wrappedChannel, default(T)))
                {
                    var state = ((ICommunicationObject)_wrappedChannel).State;
                    if (state == CommunicationState.Faulted)
                    {
                        // channel has been faulted, we want to create a new one so clear it
                        _wrappedChannel = default(T);
                    }
                }

                if (Equals(_wrappedChannel, default(T)))
                {
                    _wrappedChannel = _factory.CreateChannel();
                }
            }

            return _wrappedChannel;
        }
    }

    public TResult Invoke(Func<T, TResult> func)
    {
        try
        {
            return func(WrappedChannel);
        }
        catch (FaultException)
        {
            throw;
        }
        catch (CommunicationException)
        {
            // maybe retry works
            return func(WrappedChannel);
        }
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposing ||
            Equals(_wrappedChannel, default(T)))
            return;

        var channel = _wrappedChannel as ICommunicationObject;
        _wrappedChannel = default(T);
        try
        {
            channel.Close();
        }
        catch (CommunicationException)
        {
            channel.Abort();
        }
        catch (TimeoutException)
        {
            channel.Abort();
        }
    }

    public void Dispose()
    {
        Dispose(true);
    }
} 
```

然后你像这样使用服务

```
client.Invoke(channel => channel.DoStuff()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:10:42.710

做这样的事情：

```
public interface IMyServiceClient : IMyService, ICommunicationObject { } 
```

如果您为此创建一个通道，则可以将其丢弃。

# github - 如何使用 Aptana Studio 通过用户名和密码访问 GitHub 的存储库？

> ID：15223314
> 
> 赞同：3
> 
> 时间：2013-03-05T12:03:56.487
> 
> 标签：github, aptana

我以前一直在使用 git，我自己托管它并将我的 SSH 密钥上传到服务器。

这是我第一次使用 Github，想通过用户名和密码链接到它。

我已经链接了项目，当我尝试拉取时，我没有询问用户名和密码，而是收到以下错误消息：

```
/opt/Aptana_Studio_3/plugins/com.aptana.git.core_3.0.0.1350339236/os/linux/askpass.tcl: 3: exec: wish: not found
error: unable to read askpass response from '/opt/Aptana_Studio_3/plugins/com.aptana.git.core_3.0.0.1350339236/os/linux/askpass.tcl'
fatal: could not read Username for 'https://github.com': No such device or address 
```

我在哪里设置用户名和密码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T23:15:46.027

错误的 'exec: wish: not found' 部分意味着 tk 和 python-tk 包丢失。

## 快速解决

安装 tk 和 python-tk 软件包。

## 长期修复

通过按`Ctrl`+ `Alt`+`T`或`Ctrl`+ `Alt`+访问终端`F1`（`Ctrl`+ `Alt`+`F7`从 tty 返回到 Gnome）。

在终端中，键入以下内容：

```
sudo apt-get install tk && sudo apt-get install python-tk 
```

安装后，通过 Aptana Studio 再次尝试 push/pull git（单击“clogs”图标 > push/pull）。这一次，您应该会看到一个密码输入查询。

来源：[在 Eclipse 3.6.2 Helios 上使用 Egit 克隆 GitHub 存储库时出现问题](http://www.only10types.com/2011/11/problems-cloning-github-repo-using-egit.html)

# time - 今天的时间标签

> ID：15223317
> 
> 赞同：4
> 
> 时间：2013-03-05T12:04:00.917
> 
> 标签：time, html

对于日期范围，我目前使用这种格式（直到出现精确的规格）：

```
<time datetime="2012-11">November 2012</time> - <time datetime="2013-01">January 2013</time> 
```

我想知道是否有或将有一种方法来指示今天的日期。我的意思是，我知道我们可以这样做：

```
<time datetime="2013-03-05">Today</time> 
```

但我想要这样的东西：

```
<time datetime="now">Today</time> 
```

如果没有，我打算留下“今天”这个词，不做任何额外的标记。你会推荐一个更好的解决方案吗？

谢谢！

* * *

编辑：为了添加一些上下文，我正在构建一个在线简历，因此日期范围以及涉及的日期范围：`<time datetime="yyyy-mm">[Month] [Year]</time> - Present`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:09:04.883

感谢大家的努力。

只是为了澄清事情，我并没有寻找动态更新 datetime 属性内容的方法。我只是想知道是否有一种方法可以在语义上指示“现在”的日期或时间。

答案是：**不，没有办法做到这一点**。

我相信总有一天会发生变化。你们中的一些人想知道这什么时候有用。我同意目前没有必要这样做，但[可能有办法在未来的规范中指明日期范围](http://wiki.whatwg.org/wiki/Time_element)（毕竟该`<time>`元素仍在草稿中）。如果是这样，可能有范围从一个精确的点开始并且仍在继续，为“present”/“now”/...关键字 IMO 提供了一个用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:26:53.163

尝试使用 php 或 JavaScript 从用户的计算机获取本地时间，然后将其输出为文本。有关使用 php 执行此操作的说明，请参阅[http://php.net/manual/en/function.localtime.php](http://php.net/manual/en/function.localtime.php)。

编辑：它获取服务器时间，而不是用户时间。要获取用户的时间，您必须使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-30T18:37:27.167

我在网上冲浪时发现了这个问题，我认为回答这个问题会很酷，因为今天我们有了答案。

```
<time datetime="P4DT4H3M">four days, and three minutes</time> 
```

为了更好地理解，您可以在这里查看：

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/time](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/time)

# java - 为什么我在 web.xml 中列出 jdbcRealm 数据库中的安全角色？

> ID：15223318
> 
> 赞同：7
> 
> 时间：2013-03-05T12:04:07.127
> 
> 标签：java, jakarta-ee, jaas, security-roles

我在 Glassfish 3 上运行 JavaEE 6 Web 应用程序。我将 JAAS 与 jdbcRealm 和默认主体到角色映射一起使用。在我的数据库中，我有用于将用户名映射到其角色的表：

```
 username | role
----------+-------
 john     | admin
 mary     | user 
```

为什么我需要在我的 ? 中再次列出这些角色`web.xml`？

```
<security-role>
  <role-name>admin</role-name>
</security-role>
<security-role>
  <role-name>user</role-name>
</security-role> 
```

没有那个`isUserInRole()`总是返回`false`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T04:38:44.983

您不会在`web.xml`. 您列出它们，以便应用程序服务器知道它们在您的代码中的用途。

当您部署安全应用程序时，应用程序服务器会读取部署描述符以获取有关安全配置的信息。它知道您的应用程序中使用的角色。然后应用程序可以使用角色并期望应用程序服务器能够将它们映射到用户和组（最终再次解析给用户，因为用户是最安全的构建块）。

说到将角色映射到用户，这就是领域的用武之地。它提供了映射，因此您知道部署描述符中的角色 X 映射到数据库中的角色 X，而数据库中的角色 X 又映射到用户 A 和 B。

话虽如此，jdbcRealm 使用的数据库具有完全相同的角色，因为它们是应用程序服务器需要映射到应用程序角色的用户的键。

What you use in your code and a deployment descriptor is a logical name of a group of users that are resolved to real users via the mapping that's offered by the jdbcRealm.

# html - 视频，可让用户控制摄像机角度

> ID：15223323
> 
> 赞同：0
> 
> 时间：2013-03-05T12:04:39.200
> 
> 标签：html, video, html5-canvas, html5-video

场景：一个人沿着一条路线走，穿过泳池派对的人群。

相机设置是一个定制的装备，带有一系列 GoPro 覆盖 360 度的旋转。

最终结果需要是一个能让用户

*   单击并拖动视频以更改他对视频的看法。因此，例如，他可以将角度转向他身后，并会看到那个人从哪里走了过来。或者他可以边走边看。（也可能有一些上下运动）
*   暂停播放
*   放大/缩小

因此，例如，您在人群中发现了一个辣妹。当那个男人从她身边走过时，你会暂停、放大，然后播放观看她的视频。

如何使用 HTML5（非 Flash）方法实现这一点？

我什至不知道实现这样的事情需要什么技术，所以我希望在类似的事情上有一点经验的人可以给我一些关于所需的指示

*   编码语言
*   服务器技术
*   带宽考虑
*   ETC

谢谢你的帮助！
（ps：这是一个有偿客户的工作。所以如果你能做到这一点，让我们谈谈报价？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:24:50.920

你会尝试一些非常先进的东西。

我尝试的方法是将视频流式传输到客户端并使用 WebGL 显示它，然后客户端可以无延迟地对其进行操作。

[http://riaconnection.wordpress.com/2011/11/03/testing-live-video-streaming-to-webgl-and-html5-video-tag/](http://riaconnection.wordpress.com/2011/11/03/testing-live-video-streaming-to-webgl-and-html5-video-tag/)

一种方法可能是流式传输 6 个提要 - 顶部、底部、左侧、右侧、后部。这些将被预处理，因此当显示为从立方体中心查看的立方体时，透视图被校正。

如果客户端可以放大和缩小，那么这意味着您将需要更高分辨率的流。其中六个将意味着非常大的带宽。您必须在带宽、质量和延迟之间做出权衡。如果客户端放大并更改平移/倾斜，您可以权衡延迟并获得更好的质量和带宽，但代价是更高的服务器资源要求。

PHP 有很多视频处理库，这可能是我选择的服务器，但我有偏见。

# c - findig 数组中的重复元素，不起作用

> ID：15223325
> 
> 赞同：1
> 
> 时间：2013-03-05T12:04:40.057
> 
> 标签：c

嗨朋友们，我有这个数组，我试图找出有多少元素是重复的，以及剩余的元素是什么。但问题是它显示出不同的结果。请检查一下

```
#include <stdio.h>
#include <stdlib.h>

#define SIZE 30

int const arr_1[SIZE] = {3,4,3,7,4,90,45,23,57,68,23,14,57,
                   34,20,39,18,3,2,23,45,67,89,68,12,34,56,78,3
                   };

int main()
{

  int i,j,yes=0, no=0;

  for(i=0;i<SIZE;i++)
  {
     for(j=0; j<SIZE; j++)
     {
        if(arr_1[i] == arr_1[j])

              yes++; 
         else 

           no++;   

     }

  }

  printf("temp: %d\t Not: %d\n",yes,no);

  system("PAUSE");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:07:05.157

你的`temp`和`not`变量呢？你不使用`yes`and`no`吗？

实际上必须纠正算法：

```
for (i = 0; i < SIZE; i++)
{
    int notfound = 0;
    for (j = i + 1; j < SIZE; j++)
    {
        if (arr_1[i] == arr_1[j])
        {
            yes++; 
            notfound = 1; //found, no need to iterate anymore
            break;
        }
    }
    if (notfound == 0) //and we know that element isn't duplicate only here
        no++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:08:24.450

问题是您将每对元素比较两次。例如，您正在比较`arr_1[1] == arr_1[2]`，但稍后在您的循环中您也比较`arr_1[2] == arr_1[1]`，因此结果计数两次。此外，您将 element`i`与 element进行比较`i`，这将始终相同。要解决此问题，您应该更改：

```
for(j=0; j<SIZE; j++) 
```

至

```
for(j=i+1; j<SIZE; j++) 
```

这样，第二个循环从第一个循环的当前索引开始，您只检查每对一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:31:38.250

```
 #include <stdio.h>
    #include <stdlib.h>

    int arr_1[30] = {3,4,3,7,4,90,45,23,57,68,23,14,57,34,20,39,18,3,2,23,45,67,89};
    int main()
    {

      int i,j,yes=0;
      for(i=0;i<23;i++)
      {
      yes=0;

         for(j=0; j<23; j++)
         {
            if(i==j){continue;}
            if(arr_1[i] == arr_1[j])
                yes++; 

         }
         if(yes==0)
             { printf("\n%d unique element",arr_1[i]);
              }
         else
              { printf("\n%d repeat %d time(s) " ,arr_1[i],yes);}

      }

  return 0;
} 
```

![在此处输入图像描述](../Images/03474c17654646a95fa1ccd156a8b88c.png)

# c# - 如何在单元测试中模拟在代码的随机点抛出异常？

> ID：15223328
> 
> 赞同：2
> 
> 时间：2013-03-05T12:04:49.890
> 
> 标签：c#, unit-testing, exception, exception-handling

我读过[这个](https://stackoverflow.com/q/8851602/57428)关于模拟抛出异常的问题。答案建议我创建一个假装是真实对象的模拟对象。

那不是我想要的。如果我替换一个真实的对象，我会丢失一部分真实的代码。我想以最少的更改调用真实代码，并在该代码的随机点从其中抛出异常。

是否可以在从单元测试调用的代码的随机点抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:56:30.340

不要将随机性放入单元测试中。只会给你带来麻烦。单元测试应该总是有一些一致性。特别是如果你想让他告诉你他变红时出了什么问题。如果你在你的单元测试中实现一个随机异常，它可能会发生他有时会崩溃并返回一个红色条。也许下一次运行它的错误又消失了。这真的不是单元测试的目的，你将很难找到曾经发生过的失败测试的问题。

更好的方法是系统地测试代码的关键部分。用一个模拟对象替换每个关键方法，它会抛出你想要测试的异常类型，并像这样覆盖每个测试用例。当您查找该错误时，这将为您提供更多有关出现问题的信息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:22:44.583

似乎您正在尝试测试异常处理，我认为这不是随机抛出异常并检查它是否被咳嗽的好方法，如果您需要在某些条件下测试处理，您需要模拟真实的条件对象，例如应该导致异常的非法情况。

您仍然可以通过可以从外部（在您的单元测试中）设置的本地变量来产生这种行为，这将导致代码根据该变量抛出异常，但正如我所说，我认为这不是一个好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:12:12.653

我可以考虑解决这个问题。

1- 制作一个名为 RandomException() 的函数；如果随机值可被 3 整除，则该`throw`异常，否则不会抛出异常。确保这个函数被封装在这个代码块中。

```
#if DEBUG
void RandomException()
{
    // gen random value
    // if random value % 3 == 0 throw the exception now
}
#else
void RandomException()
{
}
#endif 
```

这样，当您发布代码时，这些函数调用不会影响程序。

我希望这个想法对你有所帮助。

# java - 确定 Maven 配置文件的日期

> ID：15223329
> 
> 赞同：1
> 
> 时间：2013-03-05T12:04:53.493
> 
> 标签：java, maven, testing

作为对此的进一步问题：[特定日期的假系统时钟](https://stackoverflow.com/questions/15200705/fake-system-clock-on-certain-date)

是否可以在 Maven 配置文件中设置特定日期？毕竟，我使用测试配置文件来确定测试数据库的使用情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:05:28.753

在您的 Maven 配置文件中，您可以通过 Surefire 将日期时间作为系统属性传递：

```
...
<profile>
    ...
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <systemPropertyVariables>
                        <testDateTime>2013-01-01T00:00:00.000Z</testDateTime>
                    </systemPropertyVariables>
                </configuration>
            </plugin>
        </plugins>
    </build>
</profile>
... 
```

然后在您的测试中使用它，如下所示：

```
final String dateTime = System.getProperty("testDateTime");
// parse date-time etc... 
```

这有帮助吗？

# c++ - 初始化输出后获取控制台大小

> ID：15223330
> 
> 赞同：0
> 
> 时间：2013-03-05T12:04:53.593
> 
> 标签：c++, c, visual-c++, gcc, mingw32

我正在创建一个跨平台应用程序，为此我打开 GCC/Mingw 的头源代码文件，并在需要时将定义从那里复制到我的头文件中。该项目现在运行正常，但现在遇到错误，代码是

控制台.c

```
 #include<console.h>
     HANDLE write_Console

int get_console_size(){
    if( ( write_Console = CreateFile( "CONOUT$", 
                  GENERIC_WRITE | GENERIC_READ, FILE_SHARE_READ | 
                  FILE_SHARE_WRITE, 0L, OPEN_EXISTING, 
                  FILE_ATTRIBUTE_NORMAL, 0L) ) == (HANDLE) -1 
             ) {
        printf("opened");
    }
    }

void console_settings_init(){

    //For writing on the console
    write_Console = GetStdHandle(STD_OUTPUT_HANDLE);

    //For Reading from Console
    read_Console = GetStdHandle(STD_INPUT_HANDLE);

    // Set up the required window size:
    SMALL_RECT windowSize = {0, 0, CONSOLE_WIDTH-1, CONSOLE_HEIGHT-1};

    // Change the console window size:
    SetConsoleWindowInfo(write_Console, TRUE, &windowSize);

    // Create a COORD to hold the buffer size:
    COORD bufferSize = {CONSOLE_WIDTH, CONSOLE_HEIGHT};

    // Change the internal buffer size:
    SetConsoleScreenBufferSize(write_Console, bufferSize);

    recheck_console():
} 
```

*如果，我不写函数 get_console_size 那么它编译得很好*

但是在添加 get_console_size 之后，它会使用 CreateFile 函数作为 __cdecl 产生以下错误：

```
 console.c:(.text+0x4a): undefined reference to `_CreateFile' 
```

但是当我尝试使用 __declspec(dllimport) 进行编译时，它会产生以下错误：

```
 console.c:(.text+0x4a): undefined reference to `__imp__CreateFile' 
```

使用的 GCC 编译命令：

```
 gcc -DHAVE_CONFIG_H -I. -I..  -I../include    
     -nostdinc -Wall -fno-builtin -Wno-pragmas -Werror -MT 
      console.o -MD -MP -MF .deps/console.Tpo -c -o console.o console.c
      mv -f .deps/console.Tpo .deps/console.Po 
```

谷歌搜索后发现它是 Kernel32.dll 中的内置函数。

现在，我只是想验证控制台大小是否正确设置？

可以使用任何其他方法或任何其他事情来做到这一点吗？

什么是 _ *imp* _CreateFile 和 `_CreateFile 函数以及它们的定义位置？

如何将 windows Kernel32.dll 与 GCC 项目链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:47:24.820

在 Windows 上，我认为您正在尝试做的事情在[此处](http://dslweb.nwnexus.com/~ast/dload/guicon.htm)进行了解释。基本上，链接文章调用`AllocConsole`以获取新控制台的句柄，然后`GetConsoleScreenBufferInfo`获取有关控制台的元数据，例如其宽度和高度。

# php - 从推文 id 获取推文内容

> ID：15223331
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:04:54.990
> 
> 标签：php, twitter

我如何使用推文 ID 检索推文内容？是否可以使用 twitter API？我正在使用 PHP

帮助是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:12:26.123

您可以使用[statuses/show/:id](https://dev.twitter.com/docs/api/1/get/statuses/show/%3aid)

```
json_decode(file_get_contents('http://api.twitter.com/1/statuses/show/308910231910490112.json')); 
```

*注意：file_get_contents 是必需[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php)的。*

虽然 twitter API 的第 1 版已被弃用，但在[1.1](https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3aid)版中，您将需要使用 Twitter 应用程序进行身份验证。请参阅[此处](https://dev.twitter.com/discussions/8045)了解如何创建 Twitter 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:08:08.963

你使用 Twitter API 来做到这一点。

请参阅此处了解如何使用 twit ID 获取消息：

[https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3Aid](https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3Aid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:09:19.057

这对你有用吗？

[https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid](https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid)

他们有非常丰富的[文档](https://dev.twitter.com/docs/platform-objects/tweets)和示例。

# boto - boto 2.8.0 和 cloudeach

> ID：15223337
> 
> 赞同：1
> 
> 时间：2013-03-05T12:05:09.907
> 
> 标签：boto, amazon-cloudsearch

嗨，我正在尝试按照以下方式将文档添加到 cloudsearch 域

[http://docs.pythonboto.org/en/latest/cloudsearch_tut.html#adding-documents-to-the-index](http://docs.pythonboto.org/en/latest/cloudsearch_tut.html#adding-documents-to-the-index)

我的代码 snppet 是：

```
import boto
conn = boto.connect_cloudsearch(aws_access_key_id='<>',aws_secret_access_key='<>')
domain = conn.lookup('testfoo')
doc_service = domain.get_document_service()
doc_service.add(doc_id, version, data) 
```

首先，我 [在 GAE 上遇到了相同的请求问题 Boto CloudSearch：TypeError: request() got an unexpected keyword argument 'config'](https://stackoverflow.com/questions/14719603/boto-cloudsearch-on-gae-typeerror-request-got-an-unexpected-keyword-argument)

所以我删除了 config kwarg （也不确定后果）然后我得到了

```
boto.cloudsearch.document.CommitMismatchError: Incorrect number of adds returned. Commit: 1 Response: 0 
```

我的数据是这样的

```
[
{
        "raw" : "whole bunch of raw text",
        "title" : "My new title",
        "blurb" : "A really exciting article",
        "document_type" : "Tech Guide",
        "url" : "http://www.foobar/7199/tech-advice"
}
] 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:25:30.247

事实证明，问题是当我在数据中构建 json 时，它不是 json 而是一个字符串。因此，当这产生发送到 cloudsearch 域的 json 并且它结合了 id 和“添加”操作时，它包括“字段”：“[{“原始”：“整个原始文本”，“标题”：“我的新title", "blurb" : "一篇非常激动人心的文章", "document_type" : "技术指南", "url" : " [http://www.foobar/7199/tech-advice](http://www.foobar/7199/tech-advice) " } ]" 作为字符串

解决方案就是数据需要json编码

doc_service.add(doc_id, 版本, **json.loads(data)** )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T07:32:57.550

这里只需从数据中删除 []。因为如果你有单个对象，那么你必须用字典传递它。{}

***[*** { "raw" : "一堆原始文本", "title" : "我的新标题", "blurb" : "一篇非常激动人心的文章", "document_type" : "技术指南", "url" : " [http ://www.foobar/7199/tech-advice](http://www.foobar/7199/tech-advice) " } ***]***

# actionscript-3 - 使用 NativeProcess、actionscript3 转换文件出现问题

> ID：15223338
> 
> 赞同：0
> 
> 时间：2013-03-05T12:05:15.040
> 
> 标签：actionscript-3

我正在尝试制作一个程序来转换 ATF 纹理中的 png 文件，但是当我尝试使用 NativeProcess 时遇到了一些麻烦......我正在使用带有 IntelliJ IDEA 的 actionscript 3。

我想将该提示命令传递`png2atf -c p -i starling-atf.png -o starling.atf`给我的 NativeProcess ...

所以，我从一个`File().load`对象中选择一个 png 文件，然后我想把这个文件作为参数发送给我`NativeProcess`，并通过提示命令 ( `png2atf -c p -i starling-atf.png -o starling.atf`) 进行对话....

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:56:06.457

@puggsoy你在写，问题是空格......我在args中放了一些空格，这就是为什么......这是正确的代码：

`f.nativePath = "C:/projects/SDK/Adobe Gaming SDK 1.0.1/Utilities/ATF Tools/Windows/png2atf.exe";`

 ````
 nativeProcessStartupInfo.executable = f;

    // now create the arguments Vector to pass it to the executable file
    var processArgs:Vector.<String> = new Vector.<String>();
    processArgs[0] = "-c";
    processArgs[1] = arg;
    processArgs[2] = "-i";
    processArgs[3] = input;
    processArgs[4] = "-o";
    processArgs[5] = output;
    nativeProcessStartupInfo.arguments = processArgs;
    process = new NativeProcess();
    process.start(nativeProcessStartupInfo); 
````

# php - 如何将网页干净地打印到通用/Txt 打印机？

> ID：15223339
> 
> 赞同：0
> 
> 时间：2013-03-05T12:05:15.910
> 
> 标签：php, web-applications, printing

我有一个生成小收据格式的 Web 应用程序。
当打印到通用/txt 打印机时.. 没有任何内容打印到工作表上

这是打印的样本.. 已 ***删除***

请问有没有办法可以将此网页打印到通用/txt 打印机

这是html

```
 <style>
    body{
        font-family:"Courier New", Courier, monospace;  
        font-size:13px;
    }
    .f1{
        text-transform:uppercase;
        display:block;
        text-align:center;
    }

    .f2{
        text-transform:uppercase;
        display:block;
        margin-left:10px;
    }

    .border_bottom{
        border-bottom:2px dashed #000;
    }
    .border_top{
        border-top:2px dashed #000;
    }

    .body_table{
        border:1px dashed #CCCCCC;
        padding:.5em;
    }
    </style>
    </head>

    <body onload="window.print();">
    <table width="300" cellpadding="0" cellspacing="0" class="body_table">
        <tr>
            <td><span class="f1">Official Receipt</span></td>
        </tr>
        <tr>
            <td><span class="f1">DreamWorks Pharmaceutical Industries Limited GH.</span></td>
        </tr>
        <tr>
            <td><span class="f1">Plot 14 Blk 8A</span></td>
        </tr> 
    <tr>
            <td class="border_bottom"><span class="f1">0241093621</span></td>
        </tr>   

    <tr>
            <td class=""><span class="f2">RECEIPT NO.: 0241093621</span></td>
        </tr>     

    <tr>
            <td class=""><span class="f2">VAT REG #.: </span></td>
        </tr>

    <tr>
            <td class=""><span class="f2">cashier.: </span></td>
        </tr> 

    <tr>
            <td class=""><span class="f2">date.:  time: </span></td>
        </tr>

    <tr>
            <td class="border_bottom"><span class="f2">customer.:  time: </span></td>
        </tr>

    <tr>
        <td>
            <table width="98%" align="center" cellpadding="0" cellspacing="0">
                <tr>
                    <td width="5%"><span class="f2">QTY</span></td>
                    <td width="60%"><span class="f2">item</span></td>
                    <td width="15"><span class="f2">price</span></td>
                    <td width="15"><span class="f2">amt.</span></td>                
                </tr> 

                        <tr>
                        <td class="f2">52</td>
                        <td>MALAREX TABS</td>
                        <td>2.6</td>
                        <td>135.20</td>
                        </tr>
                                </table>
        </td>
    </tr> 
    <tr>
        <td class="border_top border_bottom">
        <table width="100%" cellpadding="0" cellspacing="0" align="left" id="print_table7"> 
                    <tr>
                        <Td class="ash_backg" width="53%"><span>Subtotal</span></Td>
                        <td width="47%" align="right">135.20</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Discount</span></Td>
                        <td align="right">0.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>VAT</span></Td>
                        <td align="right">0.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Total Due</span></Td>
                        <td align="right">135.20</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Paid</span></Td>
                        <td align="right">135.20</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Change</span></Td>
                        <td align="right">0.00</td>
                    </tr>                                                
                 </table>
        </td>
    </tr>  

    <tr>
        <td>Thank You dear customer</td>
    </tr>

    <tr>
        <td>VAT Inclusive Where Applicable</td>
    </tr>                           
    </table>
    </body> 
```

这是收据格式 HTML

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/plain; charset=utf-8" />
    <title>Untitled Document</title>
    <style type="text/css">
    @media screen{
        body{
            font-family:"Courier New", Courier, monospace;  
            font-size:13px;
        }
        .f1{
            text-transform:uppercase;
            display:block;
            text-align:center;
        }

        .f2{
            text-transform:uppercase;
            display:block;
            margin-left:10px;
        }

        .border_bottom{
            border-bottom:2px dashed #000;
        }
        .border_top{
            border-top:2px dashed #000;
        }

        .body_table{
            border:1px dashed #CCCCCC;
            padding:.5em;
        }   
    }

    @media print{
        body{
            font-family:"Courier New", Courier, monospace;  
            font-size:8px;
            width:250px;
        }
    }
    </style>
    </head>

    <body onload="window.print();">
    <table width="300" cellpadding="0" cellspacing="0" class="body_table">
        <tr>
            <td><span class="f1">Official Receipt</span></td>
        </tr>
        <tr>
            <td><span class="f1">DreamWorks Pharmaceutical Industries Limited GH.</span></td>
        </tr>
        <tr>
            <td><span class="f1">Plot 14 Blk 8A</span></td>
        </tr> 
    <tr>
            <td class="border_bottom"><span class="f1">0241093621</span></td>
        </tr>   

    <tr>
            <td class=""><span class="f2">RECEIPT NO.: 0241093621</span></td>
        </tr>     

    <tr>
            <td class=""><span class="f2">VAT REG #.: </span></td>
        </tr>

    <tr>
            <td class=""><span class="f2">cashier.: </span></td>
        </tr> 

    <tr>
            <td class=""><span class="f2">date.:  time: </span></td>
        </tr>

    <tr>
            <td class="border_bottom"><span class="f2">customer.:  time: </span></td>
        </tr>

    <tr>
        <td>
            <table width="98%" align="center" cellpadding="0" cellspacing="0">
                <tr>
                    <td width="5%"><span class="f2">QTY</span></td>
                    <td width="60%"><span class="f2">item</span></td>
                    <td width="15"><span class="f2">price</span></td>
                    <td width="15"><span class="f2">amt.</span></td>                
                </tr> 

                        <tr>
                        <td class="f2">6</td>
                        <td>MALAREX TABS</td>
                        <td>0</td>
                        <td>0</td>
                        </tr>

                        <tr>
                        <td class="f2">1</td>
                        <td>PARAFEN PLUS TAB.</td>
                        <td>0</td>
                        <td>0</td>
                        </tr>

                        <tr>
                        <td class="f2">5</td>
                        <td>ASTHAX INHALER</td>
                        <td>5</td>
                        <td>25</td>
                        </tr>
                                </table>
        </td>
    </tr> 
    <tr>
        <td class="border_top border_bottom">
        <table width="100%" cellpadding="0" cellspacing="0" align="left" id="print_table7"> 
                    <tr>
                        <Td class="ash_backg" width="53%"><span>Subtotal</span></Td>
                        <td width="47%" align="right">25.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Discount</span></Td>
                        <td align="right">0.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>VAT</span></Td>
                        <td align="right">0.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Total Due</span></Td>
                        <td align="right">25.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Paid</span></Td>
                        <td align="right">25.00</td>
                    </tr>
                    <tr>
                        <Td class="ash_backg"><span>Change</span></Td>
                        <td align="right">0.00</td>
                    </tr>                                                
                 </table>
        </td>
    </tr>  

    <tr>
        <td>Thank You dear customer</td>
    </tr>

    <tr>
        <td>VAT Inclusive Where Applicable</td>
    </tr>                           
    </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:15:19.383

Yes, you can print the document as the above and you have to use the separate style sheet for the screen display and printing. CSS rules are:

```
@media screen
  {
  //Css
  }

@media print{
    @page { size:250px 375px; margin: 4px }
    body{font-family:"Courier New", Courier, monospace;  font-size:8px;}
    .f1{text-transform:uppercase; display:block; text-align:center;}
    .f2{text-transform:uppercase; display:block; margin-left:10px;}
    .border_bottom{ border-bottom:2px dashed #000;}
    .border_top{border-top:2px dashed #000;}
    .body_table{border:1px dashed #CCCCCC; padding:.5em;}
} 
```

In these you can describe the page size, colors and many more things Just Google the CSS Print specification and you would know more.

But, I think the another problem involved in your i.e. print using POS printer to print it. For that I would Like to suggest the way are:

Two simple ways to do it, depending on how much interference you're willing to accept in your interface.

Firstly, you can just use JavaScript to trigger your receipt page/iframe to print. This option is a little klunky, as it requires the cashier to confirm the print in the system dialogue.

But secondly, you always have the option of sharing each station's printer on the network. Your server-side component can print directly to it. And if it's a *nix server, it's pretty easy to do once each station's printer has added to / shared with the server. In PHP (with CUPs installed, I imagine):

```
// attempt to pipe to 'lp -d printername'
if (`echo "{$text}" | lp -d {$printer_name}`) {
    // print successful
    return true;
} else {
    // print failed
    return false;
} 
```

For second method, If you're running a windows server, it's probably much more complicated.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:10:29.167

您可以使用 CSS 媒体类型。使用一个用于屏幕，使其看起来不错，另一个用于打印，使其清晰。

例如：

```
@media screen
  {
  p.test {font-family:verdana,sans-serif;font-size:14px;}
  }
@media print
  {
  p.test {font-family:times,serif;font-size:10px;}
  } 
```

# c# - 手动回发在 asp.net 中不起作用

> ID：15223341
> 
> 赞同：2
> 
> 时间：2013-03-05T12:05:16.723
> 
> 标签：c#, javascript, jquery, asp.net

我正在尝试手动操作`PostBack`，`Page`但不知何故它不起作用。我不确定我在这里做错了什么。我正在使用 Jquery 对话框并在回发页面之前放置确认框。这是我的代码。

# HTML

```
 <form id="form1" runat="server">
          <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
          <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />

    <asp:CheckBox ID="cbIsCollected" runat="server"  AutoPostBack="false" Checked='<%# MWClickAndCollectHelper.CheckOrderCollectedStatus(AlwaysConvert.ToInt(Eval("OrderId"))) %>'
         OnCheckedChanged="cbIsCollected_CheckedChanged" CssClass="isCollectedCheckBox" />
</form> 
```

# JAVASCRIPT

```
var isCollectedCheckBox = $('.isCollectedCheckBox input[type=checkbox]');

var theForm = document.forms['form1'];
      if (!theForm) {
            theForm = document.form1;
      }
      function __doPostBack(eventTarget, eventArgument) {
            if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                  theForm.__EVENTTARGET.value = eventTarget;
                  theForm.__EVENTARGUMENT.value = eventArgument;
                  theForm.submit();
            }
      }

$(isCollectedCheckBox).on("change", function () {
                  var checked = this.checked;
                  var checkbox = this;
                  if (checked) {
                  checkbox.checked = true;
                  __doPostBack(checkbox, 'JavaScript');
                 }
                }); 
```

# 代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
      {
            ClientScript.GetPostBackEventReference(this, string.Empty);

                  string targetCtrl = Page.Request.Params.Get("__EVENTTARGET");
                  postbackId.Text = targetCtrl ?? "First Time Loaded";
                  if (!Page.IsPostBack)
                  {
                        BindGridView(gvOrders, CNCOrderCollection);
                  }
       } 
```

所以当我它应该回`Check`发`CheckBox`到服务器并且应该出现 ControlID 名称时。但在我的情况下，它总是显示“第一次加载”。这意味着页面不会将其识别为回发。我想引发服务器端`CheckBox_changed`事件。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:16:46.287

你为什么要“手动”回帖？复选框控件有一个回发处理程序。将 AutoPostBack 更改为 true 并将 OnCheckedChanged 设置为服务器端事件方法的名称。如果您想获得发送点击的控件，这就是发送者的目的。例子：

```
<asp:CheckBox ID="cbIsCollected" runat="server"  AutoPostBack="Trye" 
OnCheckedChanged="cbIsCollected_CheckedChanged" CssClass="isCollectedCheckBox" />

Protected Sub cbIsCollected_CheckedChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    dim cbSender as checkbox
    cbSender = ctype(sender, checkbox)

end Sub 
```

如果此代码没有完成您正在寻找的内容，请告诉我。

编辑：

如果您想从 JS 进行回发，您有两种选择。首先，您可以像这样调用 _doPostback：

```
function someFunction()
    {
     __doPostBack('btnName','');
    } 
```

其中 btnName 是页面上按钮的名称。

其次，您可以简单地在页面上有一个隐藏的按钮，但有一个与之关联的事件处理程序。您的客户端按钮单击调用作为 JS 函数的调用，该函数为您单击服务器按钮：像这样：

```
function clickButton() {
var getBtn = document.getElementById('<%= btnName.ClientId %>')
getBtn.click()
} 
```

当然，这似乎是多余的，因为为什么 Yes 按钮没有自己的事件处理程序，而 No 按钮是返回 false 的客户端按钮？

# entity-framework - 实体框架...四查询合一

> ID：15223347
> 
> 赞同：1
> 
> 时间：2013-03-05T12:05:42.257
> 
> 标签：entity-framework

我正在使用 EF5 并发现如下问题：

```
context.Questions
  .OrderBy(x => Guid.NewGuid())
  .Where(x => x.Difficulty == difficulty && x.Format == format); 
```

每个问题都有一个名为持续时间的字段，其值（2、4、6 和 8）以分钟为单位。

我有以下 int 数组： { 4, 0, 1, 2 } 这意味着：

得到 4 个 2 分钟的问题，0 个 4 分钟的问题，1 个 6 分钟的问题和 2 个 8 分钟的问题。

在 .OrderBy 和 .Where 之后，我需要得到提到的 7 个问题。

有没有办法在不加载所有问题或使用 4 个查询的情况下做到这一点？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:34:51.960

这是一种硬编码——但你明白了，并明确地解决了你的问题。您应该能够从这里将其转换为您需要的任何内容。

```
var questions =  context.Questions .OrderBy(x => Guid.NewGuid())
                        .Where(x => x.Difficulty == difficulty && x.Format == format);

var selectedQuestions = questions.Where(q => q.Duration == 2).Take(questionArray[0])
    .Union(questions.Where(q => q.Duration == 4).Take(questionArray[1]))
    .Union(questions.Where(q => q.Duration == 6).Take(questionArray[2]))
    .Union(questions.Where(q => q.Duration == 8).Take(questionArray[3])); 
```

由于您从不枚举可查询对象，因此 EF 将在 sql 中执行所有这些联合，并在一次调用中获取所有数据。

产生的SQL：

```
SELECT [Distinct3].[C1] AS [C1],
       [Distinct3].[C2] AS [C2],
       [Distinct3].[C3] AS [C3],
       [Distinct3].[C4] AS [C4]
FROM   (SELECT DISTINCT [UnionAll3].[C1] AS [C1],
                        [UnionAll3].[C2] AS [C2],
                        [UnionAll3].[C3] AS [C3],
                        [UnionAll3].[C4] AS [C4]
        FROM   (SELECT   [Distinct2].[C1] AS [C1],
                         [Distinct2].[C2] AS [C2],
                         [Distinct2].[C3] AS [C3],
                         [Distinct2].[C4] AS [C4]
                FROM     (SELECT DISTINCT [UnionAll2].[C1] AS [C1],
                                          [UnionAll2].[C2] AS [C2],
                                          [UnionAll2].[C3] AS [C3],
                                          [UnionAll2].[C4] AS [C4]
                          FROM   (SELECT   [Distinct1].[C1] AS [C1],
                                           [Distinct1].[C2] AS [C2],
                                           [Distinct1].[C3] AS [C3],
                                           [Distinct1].[C4] AS [C4]
                                  FROM     (SELECT DISTINCT [UnionAll1].[Id] AS [C1],
                                                            [UnionAll1].[Duration] AS [C2],
                                                            [UnionAll1].[Difficulty] AS [C3],
                                                            [UnionAll1].[Format] AS [C4]
                                            FROM   (SELECT   TOP (4) [Project1].[Id] AS [Id],
                                                                     [Project1].[Duration] AS [Duration],
                                                                     [Project1].[Difficulty] AS [Difficulty],
                                                                     [Project1].[Format] AS [Format]
                                                    FROM     (SELECT NEWID() AS [C1],
                                                                     [Extent1].[Id] AS [Id],
                                                                     [Extent1].[Duration] AS [Duration],
                                                                     [Extent1].[Difficulty] AS [Difficulty],
                                                                     [Extent1].[Format] AS [Format]
                                                              FROM   [dbo].[Questions] AS [Extent1]
                                                              WHERE  ([Extent1].[Difficulty] = @p__linq__0)
                                                                     AND ([Extent1].[Format] = @p__linq__1)
                                                                     AND (2 = [Extent1].[Duration])) AS [Project1]
                                                    ORDER BY [Project1].[C1] ASC
                                                    UNION ALL
                                                    SELECT   TOP (0) [Project3].[Id] AS [Id],
                                                                     [Project3].[Duration] AS [Duration],
                                                                     [Project3].[Difficulty] AS [Difficulty],
                                                                     [Project3].[Format] AS [Format]
                                                    FROM     (SELECT NEWID() AS [C1],
                                                                     [Extent2].[Id] AS [Id],
                                                                     [Extent2].[Duration] AS [Duration],
                                                                     [Extent2].[Difficulty] AS [Difficulty],
                                                                     [Extent2].[Format] AS [Format]
                                                              FROM   [dbo].[Questions] AS [Extent2]
                                                              WHERE  ([Extent2].[Difficulty] = @p__linq__2)
                                                                     AND ([Extent2].[Format] = @p__linq__3)
                                                                     AND (4 = [Extent2].[Duration])) AS [Project3]
                                                    ORDER BY [Project3].[C1] ASC) AS [UnionAll1]) AS [Distinct1]
                                  UNION ALL
                                  SELECT   TOP (1) [Project7].[Id] AS [Id],
                                                   [Project7].[Duration] AS [Duration],
                                                   [Project7].[Difficulty] AS [Difficulty],
                                                   [Project7].[Format] AS [Format]
                                  FROM     (SELECT NEWID() AS [C1],
                                                   [Extent3].[Id] AS [Id],
                                                   [Extent3].[Duration] AS [Duration],
                                                   [Extent3].[Difficulty] AS [Difficulty],
                                                   [Extent3].[Format] AS [Format]
                                            FROM   [dbo].[Questions] AS [Extent3]
                                            WHERE  ([Extent3].[Difficulty] = @p__linq__4)
                                                   AND ([Extent3].[Format] = @p__linq__5)
                                                   AND (6 = [Extent3].[Duration])) AS [Project7]
                                  ORDER BY [Project7].[C1] ASC) AS [UnionAll2]) AS [Distinct2]
                UNION ALL
                SELECT   TOP (2) [Project11].[Id] AS [Id],
                                 [Project11].[Duration] AS [Duration],
                                 [Project11].[Difficulty] AS [Difficulty],
                                 [Project11].[Format] AS [Format]
                FROM     (SELECT NEWID() AS [C1],
                                 [Extent4].[Id] AS [Id],
                                 [Extent4].[Duration] AS [Duration],
                                 [Extent4].[Difficulty] AS [Difficulty],
                                 [Extent4].[Format] AS [Format]
                          FROM   [dbo].[Questions] AS [Extent4]
                          WHERE  ([Extent4].[Difficulty] = @p__linq__6)
                                 AND ([Extent4].[Format] = @p__linq__7)
                                 AND (8 = [Extent4].[Duration])) AS [Project11]
                ORDER BY [Project11].[C1] ASC) AS [UnionAll3]) AS [Distinct3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:33:53.817

为什么不只获取每种类型的 4 个（或数组中的最大值）问题并在客户端上进行过滤？有 16 个结果应该很便宜 - 您可以使用 linq 分组按分钟对它们进行分组，然后应该很容易。这里另一个有趣的点是排序...如果您有超过 4 个问题，但在选择时总是对它们进行排序，您会看到前 4 个问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:44:05.963

我的查询有点复杂。基本上，我最终得到以下结果：

```
context.Questions
  .OrderBy(x => Guid.NewGuid())
  .Where(x =>
    x.AccessLevel >= accessLevel &&
    x.Enabled == true &&
    x.QuestionFormat == questionFormat
    x.Theme.Id == themeId
  )
  .Select(x => new {
    Answers = x.Answers.Select(y => new {
      Correct = y.Correct,
      Packs = y.Packs.SelectMany(z => z.Files, (z, v) => new {
        Id = z.Id,
        File = new { Key = v.Key, Mime = v.Mime }
      }),
      Text = y.Text
    }),
    Duration = x.Duration,
    Note = x.Note,
    Text = x.Text,
    Packs = x.Packs.SelectMany(y => y.Files, (y, z) => new {
      Id = y.Id,
      File = new { Key = z.Key, Mime = z.Mime }
    })
   })
   .GroupBy(x => x.Duration); 
```

所以我随机排序问题并过滤它们。

然后我得到每个问题的答案......

每个问题和答案都有一些与之关联的文件。

我将所有文件放在一张桌子上。这就是为什么我的查询中有包和文件的原因。

我只加载文件键和哑剧。不是数据。

所以你的建议是把所有问题按时间分组，对吧？

事实上，在做 AccessLevel / Enabled / QuestionFormat / Theme 过滤之后我永远不会有这么多问题......

因此，我可以像在此查询末尾所做的那样按 Duration 对它们进行分组。

根据我在开头发布的数组，获取每个持续时间的问题数量的快速方法是什么？

谢谢你，米格尔

# objective-c - 如何以不同的方法执行同一类的方法调用？

> ID：15223352
> 
> 赞同：0
> 
> 时间：2013-03-05T12:06:04.957
> 
> 标签：objective-c

我有一个地址簿类，在这个类中我有一个`searchName`方法，现在我想添加一个`removeName`从地址簿中删除名称的方法（当我写它时，我认为它很清楚......只是分享）。

无论如何，我虽然是使用`preformSelector:@selector(searchNames)`但我在这一行得到错误..这是我的代码：

```
//method to search address cards
-(NSMutableArray *) searchName:(NSString *) someName{

    NSMutableArray *namsFound = [[NSMutableArray alloc] init];

    for (AddressCards *addressCard in book){

        if ([addressCard.name rangeOfString:someName options:NSCaseInsensitiveSearch].location != NSNotFound)
            [namsFound addObject:addressCard];
        else if ([addressCard.email rangeOfString:someName options:NSCaseInsensitiveSearch].location != NSNotFound)
            [namsFound addObject:addressCard];
        else if ([addressCard.country rangeOfString:someName options:NSCaseInsensitiveSearch].location != NSNotFound)
            [namsFound addObject:addressCard];
        else if ([addressCard.workPlace rangeOfString:someName options:NSCaseInsensitiveSearch].location != NSNotFound)
            [namsFound addObject:addressCard];
    }

    return [namsFound count]? namsFound : nil;
} 
```

我必须使用这个返回的方法声明`BOOL`：

```
-(BOOL) removeName:(NSString *)theName{

    if ([theName performSelector:@selector(searchName:)] > 0){
        for (AddressCards *card in book)
            [book removeObject:theName];
        return YES;
    }

        else
            return NO;
} 
```

这就是我试图在 main.m 中测试它的方式：

```
AdressBook *myBook = [[AdressBook alloc] initWithName:@"Family Address Book"];

if([myBook removeName:@"nir"] == YES)
            [myBook list];
        else
            NSLog(@"Not in address book"); 
```

我在这一行得到线程 1 SIGBRT：for (AddressCards *card in book)

请帮我解决这个问题。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:17:15.213

为什么字符串对象要响应`-searchName:`？在 self 上调用它，以字符串作为参数。似乎没有理由在`-performSelector:`这里。您还想检查数组的计数，而不仅仅是纯粹的存在。

```
-(BOOL) removeName:(NSString *)theName{

    if ([self searchName:theName]){
        for (AddressCards *card in book)
            [book removeObject:theName];
        return YES;
    }
    return NO;
} 
```

* * *

好的，我又看了一下搜索名称。如果数组为空，则返回 nil。所以你不需要打电话`-count`。

* * *

尝试

```
-(BOOL) removeName:(NSString *)theName{
    NSArray *results = [self searchName:theName];
    if (results){
       [book removeObjectsInArray: results];
       return YES;
    }
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:10:00.283

你有一个名为的方法`searchName`

> 类我有一个 searchName 方法，

但你在`searchNames`这里打电话，把它改成`searchName:`

```
preformSelector:@selector(searchNames:)//one : as it takes one argument 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:10:30.880

那是因为 performSelector 没有任何返回值。为什么不能正常调用该方法？

```
if ([self searchName:theName]) // do stuff 
```

请注意，您也没有将参数传递给 searchCards:，并且您不应该像以前那样将它的值与 0 进行比较（如果没有找到，该方法将返回 nil）。

编辑：

您需要在 self 上调用该方法，而不是在 theName 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:17:55.747

您应该使用 preformSelector:@selector(searchNames:) 因为您在该方法中有一个参数

如果您想从该函数而不是对象返回值，您可以使用 NSInvocation

# matlab - MATLAB：堆叠 .figs

> ID：15223353
> 
> 赞同：0
> 
> 时间：2013-03-05T12:06:10.653
> 
> 标签：matlab, graph, plot, stacked-area-chart

我目前正在研究油耗。我有多个 .fig 文件，显示 L/100 Km 与时间的燃料消耗趋势。我有多个案例展示了不同条件下情节的行为，我不想展示它们之间的差异。该图的示例如下所示：

![在此处输入图像描述](../Images/3e8a22df801836c5605d8e3a532ce8d5.png)

无论如何，是否可以在 1 个 .fig 文件中堆叠来自不同 .fig 文件的图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:26:25.560

理想情况下，您希望使用[subplot](http://www.mathworks.se/help/matlab/ref/subplot.html)生成这些不同的图。

ZiV 在[mathworks 论坛](http://www.mathworks.com/matlabcentral/newsreader/view_thread/282820)中回答了您的确切问题：

> 一种方法是从现有图形中提取 xdata 和 ydata，然后根据需要在新图形窗口中重新绘制这些数据。例如，

```
open('gugu.fig');
h_gugu=get(gca,'Children');
x_gugu=get(h_gugu,'XData');
y_gugu=get(h_gugu,'YData');

open('lulu.fig');
h_lulu=get(gca,'Children');
x_lulu=get(h_lulu,'XData');
y_lulu=get(h_lulu,'YData');

figure
subplot(121)
plot(x_gugu,y_gugu);
subplot(122)
plot(x_lulu,y_lulu)
saveas(gcf,'gugululu','fig') 
```

# objective-c - Cocoa - 使用 Plist 搜索字段

> ID：15223354
> 
> 赞同：0
> 
> 时间：2013-03-05T12:06:16.073
> 
> 标签：objective-c, cocoa

很抱歉问这个问题，但我已经搜索了几个小时，但我真的不明白。请帮我。我的 Xcode 项目中有一个 .plist 文件，它的根是 Dictionary 类型。它包含大约 50 多个字典。字典里面包含字符串。（字典（根）>字典>字符串。我在工具栏中添加了一个搜索字段并将其链接到我的代码。我能够获取用户键入的内容，但是在获取用户键入的内容后如何“搜索”？是有一个方法，我如何将它链接到我的 .plist？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:10:26.197

您想在您的字典词典中搜索用户输入的字符串吗？

您将不得不迭代每个字典，`[dict objectForKey:userEntry]`在每个字典中询问。不确定您是否只想找到第一个匹配项或所有匹配项。

此外，您可能希望创建字典的抽象，以减少问题的规模并澄清 API。用更简单的术语来说，将您的字典词典包装在一个类中，并在其上放置一组合理的（非基于字典的）方法。这可能是值得的努力。

要将 plist 加载到字典中，请查看`[Dictionary dictionaryWithContentsOfFile]`.

**编辑：NSDictionary 上的过滤选项**

您是否查看过以下用于过滤 NSDictionary 中的值的选项：

*   [[NSDictionary keysOfEntriesPassingTest:]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/keysOfEntriesPassingTest:)（10.6 及更高版本）或
*   取`[rootDictionary allValues]` `NSArray`并使用[谓词](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html#//apple_ref/doc/uid/TP40001794-CJBDBHCB)，大概就是[这样](https://stackoverflow.com/questions/2457495/filter-entire-nsdictionaries-out-of-nsarray-based-on-multiple-keys)。

# r - 使用包中的评估调用包装 data.table

> ID：15223367
> 
> 赞同：4
> 
> 时间：2013-03-05T12:07:11.100
> 
> 标签：r, expression, eval, environment, data.table

我正在尝试`data.table`为拆分-应用-组合使用（如`aggregate`等`ddply`）编写一个简单的包装器，以便从`data.table`的速度中获益，但不使用其数据结构或语法。我尝试了以下方法。

```
fold = function(df, by, ...)
{
    library(data.table)
    dt = data.table(df)
    dt = dt[, eval(substitute(list(...))), by]
    df = as.data.frame(dt)
    return(df)
}

a = data.frame(x=c(1,1,1,2,2,2), y=runif(6))
b = fold(a, "x", y_min=min(y), y_max=max(y))
print(a)
print(b) 
```

当我把它放在一个脚本中时这很好用`source`，但是当我把这个函数放在一个包中时，安装它并尝试使用它，我得到

```
Error in eval(expr, envir, enclos) : object 'y' not found
Calls: fold -> [ -> [.data.table -> [.data.frame -> eval -> eval 
```

除了一般地尝试这个之外，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:22:02.237

在评论之后，FAQ 6.9 回答了这个问题：

> *FAQ 6.9 我创建了一个依赖于 data.table 的包。如何确保我的包支持 data.table，以便从 data.frame 继承有效？*
> 你不需要做任何特别的事情。只需包含`data.table`在包的说明文件的`Imports:`或字段中。`Depends:`

关于继承如何`data.frame`保持完全兼容的一些技术细节`[.data.frame`在这里：

[在我自己的包中使用 data.table 包](https://stackoverflow.com/questions/10527072/using-data-table-package-inside-my-own-package)

# symfony - symfony2 容器知道什么

> ID：15223368
> 
> 赞同：0
> 
> 时间：2013-03-05T12:07:12.743
> 
> 标签：symfony

我正在考虑编写自己的控制台命令。我注意到它使用容器感知？这是什么？

```
use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:09:18.400

它使您可以[在命令中访问服务容器，](http://symfony.com/doc/current/cookbook/console/console_command.html#getting-services-from-the-service-container)以便您可以从中获取服务。

# mongodb - 或在 yii mongo 套件或直接 mongo 套件中操作

> ID：15223370
> 
> 赞同：0
> 
> 时间：2013-03-05T12:07:16.013
> 
> 标签：mongodb, yii

在 yii 框架中使用时，我遇到了 mongo db 的问题。我尝试了 yii 扩展 yii mong 套件和直接 mongo 套件。我在使用这些扩展的 mongo 中实施或操作时遇到了麻烦。我在 yii mongo 套件中使用了此代码，但它返回了所有值。

```
$userDetail = $user->findAll(
              array(
            '$or' => array(
               "first_name" => "akash",
               "first_name" => "anoop"
         )
       )
   );   var_dump($userDetail);die; 
```

我不知道如何使用或操作直接 mongo 套件。请尽快帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T18:43:53.993

我知道这已经很晚了，但如果这有帮助，请告诉我。我正在使用 YiiMongoDbSuite。您可以检查名称是否在数组中。

$criteria = 新的 EMongoCriteria; $criteria->addCond("first_name","in",array("akash", "anoop"));

在此处阅读有关使用 EMongoCriteria 对象的更多信息：http: [//bit.ly/1oOFPBJ](http://bit.ly/1oOFPBJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:11:14.060

使用直接 MongoDBSuite，如果它直接实现 MongoDB，您`$or`应该如下所示：

```
$userDetail = $user->findAll(
    array(
        '$or' => array(
            array("first_name" => "akash"),
            array("first_name" => "anoop")
        )
    )
); 
```

# php - /在mysql中使用'时出现在文本中？

> ID：15223371
> 
> 赞同：0
> 
> 时间：2013-03-05T12:07:16.363
> 
> 标签：php, html, mysql, slash

我有一个 html 表单，我的网站的用户可以输入，单击提交，然后 mysql 将其插入数据库，并且由于某种原因，当它被提交到我的长文本和 utf8_unicode_ci 格式的“bio”列时，如果用户键入jame 显示为 jame\'s，我不想要这些斜线。

有谁知道为什么会发生这种情况以及我如何摆脱斜线？谢谢

html:

```
<form action="includes/changebio.php" method="post" id="form1">         
 <textarea id="bio" style="width: 448px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 120px;
    resize: none; 
    border: hidden;" textarea name="bio" data-id="bio" maxlength="710"><?php echo htmlspecialchars($profile['bio']); ?></textarea>
<input type="image" src="assets/img/icons/save-edit.png"class="bio-submit" name="submit" value="submit" id="submit"/>
</form> 
```

php:

```
<?php ob_start(); ?>
<?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
?>
<?php 
session_start();
include '_config/connection.php'; 
$bio = htmlspecialchars($_POST['bio']); 
$result = mysql_query("SELECT bio FROM ptb_profiles WHERE id=".$_SESSION['user_id']."");
if(!$result) 
{ 
echo "The username you entered does not exist"; 
} 
else 
if($bio!= mysql_result($result, 0)) 
{ 
echo ""; 
    $sql=mysql_query("UPDATE ptb_profiles SET bio ='".mysql_real_escape_string($bio)."' WHERE id=".$_SESSION['user_id'].""); 
}
header("Location: {$_SERVER['HTTP_REFERER']}");
?>
<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:14:42.557

Your server is probably quite old and it has enabled a good old PHP "feature" called [Magic Quotes](http://www.php.net/manual/en/security.magicquotes.php). That feature should have never existed in the first place and the best think you can do is trying to [disable it](http://www.php.net/manual/en/security.magicquotes.disabling.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:08:42.313

利用`strip_slashes`

`echo strip_slashes($string);`

用这个 ：

```
<?php echo htmlspecialchars(strip_slashes($profile['bio'])); ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T12:12:19.773

你在你的 sql 查询`mysql_real_escape_string()`中通过在它变成 \' 之前输入 \ 来逃避任何 ' 标记

所以 \' 存储在您的数据库中，然后当您在屏幕上显示输出时需要删除斜杠，以便您`<?php echo stripslashes($profile['bio']); ?`在文本区域中执行 >

请参阅[stripslashes()](http://php.net/manual/en/function.stripslashes.php)和[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)

您可能还想考虑转换为使用 PDO 或 mysqli 而不是旧的 mysql_ 函数，因为它们现在已被弃用

# java - Java检查连续数字的方法

> ID：15223372
> 
> 赞同：-2
> 
> 时间：2013-03-05T12:07:18.687
> 
> 标签：java

我需要编写一个名为 Continuous 的方法，该方法接受 6 个参数来检查 6 个输入是否是连续数字，而不管顺序如何。如果数字是连续的，则返回 true，否则返回 false。有人可以教我什么是最有效的方法吗？我尝试了这种方法，但如果我有 6 个数字，它会效率低下吗？

```
public static boolean consecutive(int numberOne,int numberTwo,int numberThree) {
    if(((numberTwo==numberOne-1) && (numberThree== numberTwo-1)) || ((numberTwo==numberOne+1) && (numberThree==numberTwo+1)) || ((numberTwo==numberOne+2) &&( numberThree==numberOne+1)) || ((numberTwo==numberOne-1)&& (numberThree==numberOne+1)) || ((numberTwo==numberOne-2) && (numberThree==numberOne-1)) ||((numberTwo==numberOne+1) && (numberThree==numberOne-1))){
        return true;
    }else{
        return false;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T12:11:30.250

将值添加到数组中，对数组进行排序，然后测试一组连续的值：

```
int[] test = new int[] {numberOne, numberTwo, etc...};
Arrays.sort(test);
for (int i = 0; i < test.length - 1; i++) {
  if (test[i] + 1 != test[i + 1]) {
    // Not sequential
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:32:44.240

假设没有重复的数字，增强@Chris 的答案：

```
public static boolean consecutive(
  int numberOne,int numberTwo,int numberThree, 
  int numberFour, int numberFive, int numberSix) {

 int [] ns = { 
   numberOne, numberTwo, numberThree, 
   numberFour, numberFive, numberSix };

 Arrays.sort(ns);

 return ( ns[ns.length-1] - ns[0] == ns.length-1 );
} 
```

# ruby-on-rails - S3cmd 在 ubuntu 中不起作用

> ID：15223381
> 
> 赞同：0
> 
> 时间：2013-03-05T12:07:45.253
> 
> 标签：ruby-on-rails, amazon-s3, ubuntu-11.10, s3cmd

我已经在我的机器上安装了 s3cmd，它是 ubuntu 11.10，当我尝试从 s3 下载一些数据时，它给了我这个错误，我还使用我拥有的访问密钥配置了 s3cmd（.s3cfg 文件在主文件夹中）

```
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    An unexpected error has occurred.
  Please report the following lines to:
   s3tools-bugs@lists.sourceforge.net
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Problem: KeyError: 'content-length'
S3cmd:   1.0.0

Traceback (most recent call last):
  File "/usr/bin/s3cmd", line 2006, in <module>
    main()
  File "/usr/bin/s3cmd", line 1950, in main
    cmd_func(args)
  File "/usr/bin/s3cmd", line 513, in cmd_object_get
    response = s3.object_get(uri, dst_stream, start_position = start_position, extra_label = seq_label)
  File "/usr/share/s3cmd/S3/S3.py", line 285, in object_get
    response = self.recv_file(request, stream, labels, start_position)
  File "/usr/share/s3cmd/S3/S3.py", line 691, in recv_file
    size_left = int(response["headers"]["content-length"])
KeyError: 'content-length'

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    An unexpected error has occurred.
    Please report the above lines to:
   s3tools-bugs@lists.sourceforge.net
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:18:24.300

请尝试更新版本的 s3cmd，例如昨晚在 SourceForge 或 github 上的 s3tools 项目上发布的 1.5.0-alpha2。在这种特定情况下，您正在尝试下载一个长度为 0 的文件，这会触发此错误

# javascript - 在 Twitter Bootstrap 中创建 custom.css

> ID：15223388
> 
> 赞同：1
> 
> 时间：2013-03-05T12:08:07.567
> 
> 标签：javascript, jquery, css, twitter-bootstrap

twitter bootstrap 中有一个“下拉菜单”类，例如。`<ul class="dropdown-submenu">`. 正如您所观察到的那样，它右侧有一个箭头。悬停时如何将箭头的颜色设置为深色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:19:19.700

您可以通过以下方式执行此操作：

对于下拉菜单悬停颜色更改：

```
.navbar .nav li.dropdown > a:hover .caret, .navbar .nav li.dropdown > a:focus .caret {
border-bottom-color: red;/*change color to your liking*/
border-top-color: red;/*change color to your liking*/
} 
```

激活时更改插入符号的颜色（下拉菜单）：

```
.navbar .nav li.dropdown.open > .dropdown-toggle .caret, .navbar .nav li.dropdown.active > .dropdown-toggle .caret, .navbar .nav li.dropdown.open.active > .dropdown-toggle .caret {
border-bottom-color: #008745;/*change color*/
border-top-color: #008745;/*change color*/
 } 
```

对于下拉子菜单

```
.dropdown-submenu > a:after {
border-color: transparent transparent transparent #000000;/*change here */
border-style: solid;
border-width: 5px 0 5px 5px;
content: " ";
display: block;
float: right;
height: 0;
margin-right: -10px;
margin-top: 5px;
width: 0;
} 
```

悬停颜色变化的下拉子菜单：

```
.dropdown-submenu:hover > a:after{
      border-left-color:#fff; /* change the color to anything of your choice*/

  } 
```

插入符号的默认颜色在此处设置，并且可以在下面提到的地方进行更改：

```
.caret {
border-left: 4px solid transparent;
border-right: 4px solid transparent;
border-top: 4px solid #FFFFFF; /* change the color to anything of ur liking */
content: "";
display: inline-block;
height: 0;
vertical-align: top;
width: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:19:22.297

只需切换 glyphicons 图像？

```
.dropdown-submenu:hover{
  i{
    background-image: url("../images/bootstrap/glyphicons-halflings-white.png");
  } 
```

[只需从google](https://www.google.co.in/search?q=glyphicons-halflings-white.png&hl=en&newwindow=1&client=firefox-a&rls=org.mozilla%3aen-US%3aofficial&channel=fflb&tbm=isch&tbo=u&source=univ&sa=X&ei=qeI1Uc6CBs-dkgWHlICICA&ved=0CD0QsAQ&biw=1024&bih=651#hl=en&newwindow=1&client=firefox-a&rls=org.mozilla%3aen-US%3aofficial&channel=fflb&tbm=isch&sa=1&q=glyphicons-halflings.png&oq=glyphicons-halflings.png&gs_l=img.3...972.972.0.1736.1.1.0.0.0.0.0.0..0.0...0.0...1c..5.img.TzWWbTvulkA&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43148975,d.dGI&fp=e53273fdaeca0e75&biw=1024&bih=651)或 glyphicons下载彩色图标图像文件或在 Photoshop 中更改自己

# java - Weblogic 10.3 类加载器问题

> ID：15223390
> 
> 赞同：2
> 
> 时间：2013-03-05T12:08:10.930
> 
> 标签：java, maven, classpath, weblogic-10.x, maven-war-plugin

**概括**

其应用程序在结构上未更改或任何代码更改，现在遇到类路径问题。唯一改变的是它所在的环境（新的solaris box）。

应用服务器：weblogic 10.3

Maven 战争插件：2.3

**错误**

在应用程序战争中，有 2 个依赖项具有同一类的不同版本，一个版本缺少某个构造函数……您可以看到这是怎么回事。我们得到一个运行时错误，因为错误的类版本（缺少构造函数）被定位。

现在这是一个 maven 项目，并且依赖项的排序方式使得该类的正确版本将在编译时首先出现在类路径中。

据我们目前所知，所有改变的只是新的构建框，构建部门在其上构建战争文件。

**测试完成**

如果我在自己的本地环境（windows）上创建战争并将其部署到 weblogic 环境服务器（unix 框），没问题。

但是，当它在构建框（solaris）上构建然后我将其部署到相同的环境时，我遇到了问题。

我比较了两个war文件，没有发现任何差异。

为了确认我的怀疑（首先在类路径上打错了类），我构建了不包括错误版本的包，令人惊讶的是它可以工作。weblogic 类加载器显然在另一个之前加载了这个不正确的类。

问题仍然存在，我需要确定现在突然发生这种情况的原因。

**问题**

在决定首先加载 lib 中的哪个依赖项方面，weblogic 的类加载器的规则是什么？

除了 MANIFEST 中的版本号之外，这种行为怎么可能在两个完全相同的不同战争之间发生变化？

非常感谢，

**用户编辑**

根据 Maven 依赖树的要求：

```
[INFO] com.xxx.web:adminapp:war:100462.7
[INFO] +- junit:junit:jar:4.11:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test
[INFO] +- struts:struts:jar:1.2.4:compile
[INFO] |  +- commons-beanutils:commons-beanutils:jar:1.6.1:compile
[INFO] |  +- commons-collections:commons-collections:jar:2.1:compile
[INFO] |  +- commons-digester:commons-digester:jar:1.5:compile
[INFO] |  |  \- xml-apis:xml-apis:jar:1.0.b2:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  +- commons-validator:commons-validator:jar:1.1.3:compile
[INFO] |  +- oro:oro:jar:2.0.7:compile
[INFO] |  +- antlr:antlr:jar:2.7.2:compile
[INFO] |  \- commons-lang:commons-lang:jar:2.6:compile (version managed from 2.0)
[INFO] +- displaytag:displaytag:jar:1.2:compile
[INFO] |  +- com.lowagie:itext:jar:1.3:compile
[INFO] |  +- org.slf4j:jcl104-over-slf4j:jar:1.4.2:compile
[INFO] |  \- org.slf4j:slf4j-log4j12:jar:1.4.2:compile
[INFO] |     +- org.slf4j:slf4j-api:jar:1.4.2:compile
[INFO] |     \- log4j:log4j:jar:1.2.13:compile
[INFO] +- taglibs:request:jar:1.0.1:compile
[INFO] +- org.apache.poi:poi:jar:3.8:compile
[INFO] |  \- commons-codec:commons-codec:jar:1.4:compile (version managed from 1.5)
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- javax.servlet:jsp-api:jar:2.0:provided
[INFO] +- com.xxx.busservices:cdm:jar:623377.7:compile
[INFO] +- com.xxx.busservices:homeratingservice-java-client:jar:1011147.2:compile
[INFO] +- com.xxx.busservices:motorratingservice-java-client:jar:1011147.2:compile
[INFO] +- com.xxx.techservices:entrefdata-java-client:jar:1011147.2:compile
[INFO] +- com.xxx.techservices:auditservice-java-client:jar:626434.4:compile
[INFO] +- com.xxx.framework:framework:jar:626434.4:compile
[INFO] +- com.xxx.ibis:xxx-logging:jar:956942.1:compile
[INFO] +- weblogic:wlfullclient:jar:10.3:provided
[INFO] +- commons-fileupload:commons-fileupload:jar:1.2.2:compile
[INFO] \- commons-io:commons-io:jar:2.1:compile 
```

`cdm.jar`包含一个名为 FactorValueLite 的类，它是正确的版本，并且在其中还`motorratingservice-java-client.jar`存在这个错误版本的类，这个 jar 似乎首先被加载到类路径中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:22:36.580

我怀疑你的本地存储库（在你正在构建的机器上）有过时的工件，它失败了。

尝试删除它，或指定不同的路径（只是为了测试）。例如：

```
mvn clean package -Dmaven.repo.local=/tmp/repository 
```

如果通过了，那么修复很简单：删除存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:11:24.767

您可以获取`Class.getProtectionDomain().getCodeSource().getLocation()`使用的 jar 的 URL（“file:jar:...”）。我的猜测是应用服务器的 lib 目录中有不同的 jar。

# xcode - 如何使 Xcode 自动完成@property

> ID：15223391
> 
> 赞同：4
> 
> 时间：2013-03-05T12:08:11.443
> 
> 标签：xcode, autocomplete

如何让 Xcode 自动完成`@property`指令？我在某人的Mac上看到了它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T13:52:28.827

正如 Alladinian 在评论中已经提到的那样，您可以使用 Xcode 中的自定义“代码片段”来实现这一点。要定义代码片段，首先在源文件中键入文本，例如

```
@property (nonatomic, strong) <#type#> *<#name#>; 
```

（`<#...#>`是一个特殊的占位符，以便您稍后可以使用制表键跳转到“类型”和“名称”。）

然后选择整行，并将其拖到“代码片段库”中：

![在此处输入图像描述](../Images/95559ef961661def5ae343923ed89a16.png)

双击新的代码片段，并为其命名和快捷方式：

![在此处输入图像描述](../Images/7d429e86c24a1d802b25b1d6a2907212.png)

现在，当您键入快捷方式时，Xcode 将提供补全：

![在此处输入图像描述](../Images/a0741d42fdf04e86af4ec511ad344886.png)

选择您的代码片段，它将被插入到源文件中：

![在此处输入图像描述](../Images/6e59f96b1ec96770a437e19debea79eb.png)

您可以使用制表符跳转到“类型”和“名称”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:41:54.287

选中 RedBox 中显示的框，您的 XCode 自动完成功能将起作用

![在此处输入图像描述](../Images/1deb02012005716684b1d9ef1930c98f.png)

编辑：

如果您能够在 .m 文件中看到，那么您的 .h 肯定包含一些语法错误。由于该错误，LLVM 编译器显示要更正的信号，并且您的自动完成功能不起作用。

编辑2：

根据您的评论，即使在 XCode4.6`@prop`中也不会显示自动完成功能`erty(,)`

![在此处输入图像描述](../Images/e9d0d3afaf7c482aaa60234c3213a4e4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:33:18.403

@property 不会自动完成自身。但是，@synthesize 可以。看到这个问题：

[Xcode [ESC] 无法自动完成 .m 文件中的属性](https://stackoverflow.com/questions/4577628/xcode-esc-fail-to-auto-complete-the-property-in-m-file)

# java - 霍夫曼节点和 NullPointerException

> ID：15223394
> 
> 赞同：1
> 
> 时间：2013-03-05T12:08:19.900
> 
> 标签：java, nullpointerexception, huffman-code

我得到一个 NullPointerException 并且我无法弄清楚它为什么会发生，也许有新观点的人可以帮助我摆脱它！

错误发生在第 53 行：

```
 if(aHuffmanTreesNode.isAHuffmanLeaf()) 
```

当我试图确定节点是否是霍夫曼树的叶子时。

对于一个小的压缩文件，有时它可以工作，但大多数时候会抛出 NullPointer 异常。

```
public class Uncompress {

    private HuffNode globalTree;
    private HuffNode aHuffmanTreesNode;
    private ObjectInputStream objectInputStream;
    private DataOutputStream dataOutputStream;
    private FHeader fileHeader;
    private long numberOfBytesWritten;

    public Uncompress(ObjectInputStream ois){

    objectInputStream = ois;
    numberOfBytesWritten = 0;

    }

    public void decodeIt (byte[] bytesArray) throws IOException
    {
        int actualPosition;
        byte byteToBeWritten;

           for(int i = 0; i < bytesArray.length; i++)
           {
               byte currentByte = bytesArray[i];
               for(int x = 7; x >= 0; x--)
               {
                   if(((currentByte >>> x) & 0x1) == 0)
                   {

                       aHuffmanTreesNode = aHuffmanTreesNode.getLeftChildNode();

                   } else {

                       aHuffmanTreesNode = aHuffmanTreesNode.getRightChildNode();

                   }

                   if(aHuffmanTreesNode.isAHuffmanLeaf())
                   {

                       actualPosition = aHuffmanTreesNode.getPosition();

                       if (actualPosition >= 128)
                       {

                           byteToBeWritten = (byte) (actualPosition - 256);

                       } else
                       {

                           byteToBeWritten = (byte) actualPosition;

                       }

                       dataOutputStream.writeByte(byteToBeWritten);
                       numberOfBytesWritten++;

                       if (numberOfBytesWritten == fileHeader.getTheHeaderLength())
                       {

                           return;

                       }

                       aHuffmanTreesNode = globalTree;
                   }
               }
           }
    }

    public void openAndDecodeAFile(String path) throws IOException
    {
        byte[] bytesArray;

        headerReader(path);

        int datasLength = objectInputStream.available();

        while (datasLength > 0)
        {
            bytesArray = new byte[datasLength];
            objectInputStream.read(bytesArray);
            decodeIt(bytesArray);
            datasLength = objectInputStream.available();
        }

        objectInputStream.close();
        dataOutputStream.flush();
        dataOutputStream.close();
    }

    private void headerReader(String path)
    {
        try {

            fileHeader = (FHeader) objectInputStream.readObject();
            dataOutputStream = new DataOutputStream(new FileOutputStream(path + fileHeader.getNameOfTheOriginalFile()));
            globalTree = fileHeader.getGlobalTree();
            aHuffmanTreesNode = globalTree;

        }

        catch (IOException io)
        {

            JOptionPane.showMessageDialog(null, "Erreur de lecture de l'entête !","Erreur !", JOptionPane.ERROR_MESSAGE);
            io.printStackTrace();

        }catch (ClassNotFoundException cnfe)
        {

            JOptionPane.showMessageDialog(null, "Problème de conversion !","Erreur !", JOptionPane.ERROR_MESSAGE);

        }

    }
} 
```

这是我的霍夫曼节点类：

```
public class HuffNode implements Serializable {

    private HuffNode leftChildNode;
    private HuffNode rightChildNode;
    private transient int frequence;
    private transient String code;
    private int position;

    public HuffNode()
    {
        frequence = 0;
        position = -1;
        code = "";
    }

    public HuffNode( int actualPosition)
    {
        frequence = 0;
        code = "";
        position = actualPosition;
    }

    public HuffNode getLeftChildNode()
    {
       return leftChildNode;
    }

    public void setLeftChildNode(HuffNode childNode)
    {
        leftChildNode = childNode;
    }

    public HuffNode getRightChildNode()
    {
        return rightChildNode;
    }

    public void setRightChildNode(HuffNode childNode)
    {
        rightChildNode = childNode;
    }

    public int getFrequence()
    {
        return frequence;
    }

    public void setFrequence(int freq)
    {
        frequence = freq;
    }

    public int getPosition()
    {
        return position;
    }

    public void setPosition(int p)
    {
        position = p;
    }

    public String getCode()
    {
        return code;
    }

    public void setCode(String c)
    {
        this.code = c;
    }

    public boolean isAHuffmanLeaf()
    {
        if(leftChildNode == null && rightChildNode == null)
        {
            return true;

        }else {

            return false;

        }
    }

    public void frequenceIncreaseByOne()
    {

        frequence++;

    }

} 
```

和 FHeader 类：

```
public class FHeader implements Serializable {

    private HuffNode globalTree;
    private long numberOfBytes;
    private String nameOfTheOriginalFile;

    public FHeader (String nof, HuffNode ght, long nob)
    {
        nameOfTheOriginalFile = nof;
        numberOfBytes = nob;
        this.globalTree = ght;
    }

    public String getNameOfTheOriginalFile()
    {
        return nameOfTheOriginalFile;
    }

    public long getNumberOfBytes()
    {
        return numberOfBytes;
    }

    public HuffNode getGlobalTree()
    {
        return globalTree;
    }

    public long getTheHeaderLength()
    {
        long sizeOfTheHeader = -1;

        try {
            File tempHeaderFile = new File("tmpHead.tmp");
            try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(tempHeaderFile))) {
                oos.writeObject(this);
                oos.flush();
                oos.close();
            }
            sizeOfTheHeader = tempHeaderFile.length();
            tempHeaderFile.delete();
        }catch (IOException ex)
        {

            JOptionPane.showMessageDialog(null,"Un problème est survenu lors de la lecture de l'entête !", "Erreur!", JOptionPane.ERROR_MESSAGE);

        }
        return sizeOfTheHeader;
    }

} 
```

这是堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at projet.huffman.Uncompress.decodeIt(Uncompress.java:54)
    at projet.huffman.Uncompress.openAndDecodeAFile(Uncompress.java:102)
    at projet.huffman.Huffman.launchTaskButtonActionPerformed(Huffman.java:313)
    at projet.huffman.Huffman.access$100(Huffman.java:23)
    at projet.huffman.Huffman$2.actionPerformed(Huffman.java:91)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:54:19.310

I think there are two possibilities:

*   There is some bug in your Huffman construction code, and the structure of `globalTree` is wrong.
*   There are some invalid bytes in you input file you try to decode.

You can verify the first problem by firing up a debugger and examine the structure of `globalTree`.

To address the second problem, you can simple put an `if` statement before `if(aHuffmanTreesNode.isAHuffmanLeaf())` to pint out a prompt:

```
if(aHuffmanTreesNode == null) { 
  System.err.println("invalid bytes!"); 
  return;
} 
```

BTW, your code is bit odd as by using `for(int x = 7; x >= 0; x--)`, you are assuming all your input data if full of 8-bits, I don't think it is the general pattern.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:57:55.580

由于您在 if/else 块中设置了 aHuffmanTreesNode，我会说 getLeftChildNode() 或 getRightChildNode() 返回 null。

# java - 如何在java中生成脚本代码？

> ID：15223396
> 
> 赞同：1
> 
> 时间：2013-03-05T12:08:23.927
> 
> 标签：java, template-engine

从 Java 生成代码的好方法是什么？

我有一个可视化`FlowChart`应用程序，并希望为特定图形集成一些代码生成。所以，我主要有一些对象（带有名称）和它们之间的一些联系（条件）。

我希望这些视觉表示以特定类型的脚本语言进行转换。

java中有什么东西可以让我以某种方式定义一个模板来生成我的脚本吗？例如，告诉模板从视觉对象中获取哪些属性，以及如何在输出语言中排列它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:12:52.913

尝试使用像[FreeMarker](http://freemarker.sourceforge.net/)这样的模板引擎，你可以生成任何你想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:24:58.013

您可以尝试[Apache Velocity](http://velocity.apache.org/engine/index.html)：

> Apache Velocity Engine 是一个免费的开源模板引擎。

[这里](http://freemarker.sourceforge.net/fmVsVel.html)有 FreeMarker 和 Velocity 的比较。

# python - 非 ASCII 字符的正则表达式

> ID：15223398
> 
> 赞同：1
> 
> 时间：2013-03-05T12:08:25.987
> 
> 标签：python, regex, unicode, python-3.x

考虑在 Python 3 中使用正则表达式的这个片段：

```
>>> t = "Meu cão é #paraplégico$."
>>> re.sub("[^A-Za-z0-9 ]","",t,flags=re.UNICODE)
'Meu co  paraplgico' 
```

为什么它会删除非 ASCII 字符？我试过没有旗帜，一切都一样。

作为奖励，任何人都可以在 Python 2.7 上进行这项工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:12:40.983

`[^A-Za-z0-9 ]`您正在用空白 ( )替换非字母数字字符 ( `""`)。非 ASCII 字符不在 AZ、az 或 0-9 之间，因此它们被替换。

您可以像这样匹配所有单词字符：

```
>>> t = "Meu cão é #paraplégico$."
>>> re.sub("[^\w ]","",t, flags=re.UNICODE)
>>> 'Meu cão é paraplégico' 
```

或者您可以像这样将字符添加到您的正则表达式中`[^A-Za-z0-9ãé ]`：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:52:24.280

```
[In 1]: import regex
[In 2]: t = u"Meu cão é #paraplégico$."
[In 3]: regex.sub(r"[^\p{Alpha} ]","",t,flags=regex.UNICODE)
[In 4]: print(regex.sub(r"[^\p{Alpha} ]","",t,flags=regex.UNICODE)) 
```

> Meu cãoé paraplégico

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:56:45.773

我通过切换到正则表达式库（来自 PyPI）解决了这个问题。

然后正则表达式命令变为：

```
regex.sub(ur"[^\p{L}\p{N} ]+", u"", t) 
```

# java - 具有多线程的客户端服务器

> ID：15223406
> 
> 赞同：0
> 
> 时间：2013-03-05T12:08:46.753
> 
> 标签：java, multithreading, client-server

我为发送-接收文件编写了一个带有多线程的程序客户端-服务器。程序运行，客户端发送，服务器接收。创建了文件但创建了空的新文件 为什么？请帮我

班级客户：

```
 import java.io.*;
  import java.net.Socket;

 public class Client extends Thread {

Socket socket = null;
Socket socket1 = null;
  public  void sendFile() throws IOException {

String host = "127.0.0.1";
String host1 = "127.0.0.2";

socket = new Socket(host, 1024);
socket1 = new Socket(host1, 1025);

File file = new File("/home/reza/Desktop/link help");
File file1 = new File("/home/reza/Desktop/hi");
long length = file.length();
long length1 = file1.length();
final byte[] bytes = new byte[(int) length];
final byte[] bytes1 = new byte[(int) length1];

FileInputStream fis = new FileInputStream(file);
FileInputStream fis1 = new FileInputStream(file1);

@SuppressWarnings("resource")
final BufferedInputStream bis = new BufferedInputStream(fis);
final BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());
@SuppressWarnings("resource")
final BufferedInputStream bis1 = new BufferedInputStream(fis1);
final BufferedOutputStream out1 = new BufferedOutputStream(socket1.getOutputStream());

 Thread t = new Thread(new Runnable() {

  public void run()
{

 while(socket.isConnected())
  {

 Wait2();

   try {
    System.out.println("ok");
    int count;

    while ((count = bis.read(bytes)) > 0) {
        out.write(bytes, 0, count);

   }
 } catch (IOException e) {

e.printStackTrace();
 }

  }
  }
  });

  Thread t1 = new Thread(new  Runnable() {
   public void run() {
 while(socket1.isConnected())
    {

     Wait2();

       try {
            System.out.println("ok1");
            int count1;
            while ((count1 = bis1.read(bytes1)) > 0) {
                out1.write(bytes1, 0, count1);

           }

    } catch (IOException e) {

    e.printStackTrace();
    }

    }

 }
 });
 t1.start();
 t.start();

socket.close();
socket1.close();
 }

 public void Wait2()

{

 try {

 Thread.sleep(3000);

 } catch (InterruptedException x) {

 System.out.println("Interrupted!");

 }

 }
 } 
```

班级服务器：

```
 import java.io.*;
  import java.net.*;
public class Server  {

public Server()
{
 Thread t = new Thread(new Client());
 t.start();
 Thread t1 = new Thread(new Client());
 t1.start();    
 }

  //@SuppressWarnings("null")
  public  void recivefile() throws IOException {
   ServerSocket serverSocket = null;
 ServerSocket serverSocket1 = null;

try {

   serverSocket = new ServerSocket(1024);

 } catch (IOException ex) {
    System.out.println("Can't setup server on this port number. ");
 }
 try {
     serverSocket1 = new ServerSocket(1025);

    } catch (IOException ex) {
        System.out.println("Can't setup server on this port number1\. ");
    }

Socket socket = null;
Socket socket1 = null;

InputStream is = null;
InputStream is1 = null;

FileOutputStream fos = null;
FileOutputStream fos1 = null;

BufferedOutputStream bos = null;
BufferedOutputStream bos1 = null;

int bufferSize = 0;
int bufferSize1 = 0;

try {
    socket = serverSocket.accept();
   socket1 = serverSocket1.accept();

} catch (IOException ex) {
    System.out.println("Can't accept client connection. ");
}

try {
    is = socket.getInputStream();
    is1 = socket1.getInputStream();

    bufferSize = socket.getReceiveBufferSize();
    bufferSize1 = socket1.getReceiveBufferSize();
    //bufferSize2 = socket2.getReceiveBufferSize();
    System.out.println("Buffer size: " + bufferSize);
    System.out.println("file recieved");
    System.out.println("Buffer size1: " + bufferSize1);
    System.out.println("file recieved");

    System.out.println("file recieved");
 } catch (IOException ex) {
    System.out.println("Can't get socket input stream. ");
 }

try {
    fos = new FileOutputStream("/home/reza/Desktop/reza");
    bos = new BufferedOutputStream(fos);
    fos1 = new FileOutputStream("/home/reza/Desktop/ali");
    bos1 = new BufferedOutputStream(fos1);

} catch (FileNotFoundException ex) {
    System.out.println("File not found. ");
}

byte[] bytes = new byte[bufferSize];

int count;

while ((count = is.read(bytes)) > 0) {
   bos.write(bytes, 0, count);

}
byte[] bytes1 = new byte[bufferSize1];

int count1;
while ((count1 = is1.read(bytes1)) > 0) {
       bos1.write(bytes1, 0, count1);
    }

bos.flush();
bos.close();
bos1.flush();
bos1.close();
is.close();
is1.close();
socket.close();
serverSocket.close();
socket1.close();
serverSocket1.close();

 }

 public static void main(String[] args)  throws IOException 
{
  System.out.println("server is run, please send file");

  Server s = new Server();
  s.recivefile();

}
} 
```

客户端测试类：

```
 import java.io.IOException;

 public class clientTest extends Thread {

public static void main(String[] args) throws IOException, InterruptedException 
{
   Client client = new Client();
   client.sendFile();
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:29:04.663

我相信服务器中的这段代码是你的问题：

```
while ((count = is.read(bytes)) > 0) {
   bos.write(bytes, 0, count);
}
byte[] bytes1 = new byte[bufferSize1];

int count1;
while ((count1 = is1.read(bytes1)) > 0) {
   bos1.write(bytes1, 0, count1);
}
bos.flush();
bos.close();
bos1.flush();
bos1.close();
is.close();
is1.close();
socket.close();
serverSocket.close();
socket1.close();
serverSocket1.close(); 
```

所以服务器已经连接到客户端，然后它立即检查是否有要读取的字节，如果没有，它会停止读取并关闭连接。如果这种情况发生的速度快于客户端可以传送任何字节的速度，那么繁荣，没有接收到数据。它会比客户端发送数据的速度更快，因为客户端正在连接然后启动线程来发送数据。

相反，只要客户端保持连接处于活动状态，服务器就应该读取每个连接。服务器需要等待接收数据。

请注意，在您的代码中，客户端正在等待服务器关闭连接。但是服务器应该如何知道所有数据何时发送？客户端必须关闭连接，或者客户端必须向服务器发送一个 EOF 类型的标记，指示数据结束并且可以安全地关闭连接。

# java - 加载面板时关注组件

> ID：15223416
> 
> 赞同：0
> 
> 时间：2013-03-05T12:09:08.303
> 
> 标签：java, swing, focus, jpanel

我有一个框架，我将面板加载到其中。它工作正常，但加载时没有焦点。按标签没有帮助。我必须使用鼠标按下文本字段。我试过了：`jtextfield1.requestFocus();`但`jtextfiel1.requestFocusInWindow();`它不起作用。

我究竟做错了什么？

中的构造函数`JPanel`：

```
public OpretOpdater(BrugerHandler brugerHandler, ReklamationHandler reklamationsHandler) {
    initComponents();
    jTextFieldOrdnr.requestFocusInWindow();
    this.brugerHandler = brugerHandler;
    this.rekH = reklamationsHandler;
    startUp();
} 
```

将面板放入 GUI 的框架中：

```
public static void opret(ReklamationHandler reklamationHandler) {
    rHandler = reklamationHandler;
    SwingUtilities.invokeLater(opret);
}

static Runnable opret = new Runnable() {
    @Override
    public void run() {
        JFrame f = jframe;
        f.getContentPane().removeAll();
        JPanel opret = new OpretOpdater(bHandler, rHandler);
        f.getContentPane().add(opret);
        f.pack();
        f.setLocationRelativeTo(null);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:32:35.623

`requestFocusInWindow()`仅当组件在容器上可见/显示时或在`pack()`已调用并且所有组件都已添加到容器中时才应调用，否则它将无法工作。

另外请务必在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建 Swing 组件。如果您还没有阅读[过 Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

我上面提到的原因是不在 EDT 上创建和操作 Swing 组件会导致代码中的随机伪影。即没有给予重点等。

创建下面的代码是为了显示如何`requestFocusInWindow`在组件可见之前调用将不起作用，但在其可见之后调用它会按预期工作。

另请注意，删除`SwingUtilities`块将导致`requestFocusInWindow`无法按预期工作（即，我们可能会获得焦点或不取决于我们的运气：P）：

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JTextField f1 = new JTextField(10);

        JTextField f2 = new JTextField(10);

        //f2.requestFocusInWindow(); //wont work (if uncomment this remember to comment the one after setVisible or you wont see the reults)

        JButton b = new JButton("Button");

        JPanel p = new JPanel();

        p.add(f1);//by default first added component will have focus
        p.add(f2);
        p.add(b);

        frame.add(p);

        //f2.requestFocusInWindow();//wont work
        frame.pack();//Realize the components.
        //f2.requestFocusInWindow();//will work
        frame.setVisible(true);

        f2.requestFocusInWindow();//will work
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {//if we remove this block it wont work also (no matter when we call requestFocusInWindow)
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

我建议阅读[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:39:58.393

通常最好在创建字段时指出您希望获得焦点的字段，而不是在框架变得可见时通过添加请求焦点来分隔代码。

看看[Dialog Focus](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)，它有一个同样适用于这种情况的解决方案。使用这种方法，您的代码将如下所示：

```
JTextField f2 = new JTextField(10);
f2.addAncestorListener( new RequestFocusListener() ); 
```

# javascript - 弹出框值

> ID：15223417
> 
> 赞同：-4
> 
> 时间：2013-03-05T12:09:11.053
> 
> 标签：javascript, html

如何将表格值放入弹出框中？它输出“未定义”而不是选定的表值

```
<script>
  function conf () {
    var x, res, y;
    res = document.getElementById('t').onclick
    if(document.formxml.num1.value >= 2) {
      var r = confirm("Reserve for " + document.formxml.num1.value + " persons in "+document.formxml.res. + "?");
    } else if(document.formxml.num1.value == 1) {
      var r = confirm("Reserve for " + document.formxml.num1.value + " person in " + document.formxml.res. + "?");
    } else if(document.formxml.num1.value < 0) {
      var r = confirm("You cannot input a negative number!");
    }

    if(r == true) {
      x = "";
      location.href = 'res3.html'
    } else if(r == false) {
      x = "";
    }
  }
</script>

</head>
<body>

  <style type="text/css">
    .txt {width:50px;}
  </style>

  <form action="" method="get" name="formxml">
    For how many persons?
    <input type="text" name="num1" value="" class="txt" id="num1" maxlength="2">
    <input type="button" value="Table 1" id="t" name="res" onclick="conf();">
    <input type="button" value="Table 3" id="t" name="res" onclick="conf();">
  </form> 
```

我不知道接下来会发生什么`var r=confirm("Reserve for "+document.formxml.num1.value+" person in "+document.formxml.res.+"?");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:11:06.600

你不断地`r`在每个`if`块中重新声明你的变量，实际上导致返回的值`confirm()`永远不会到达你读取它的行。

尝试`r`与其他变量一起一劳永逸地声明：

```
var x, res, y, r; 
```

并将`var`关键字放在您为其赋值的行上`r`。

# php - 如何将 3 个数组合并为一个大数组（相同的键）

> ID：15223428
> 
> 赞同：0
> 
> 时间：2013-03-05T12:09:50.800
> 
> 标签：php, arrays

我有 3 个名为 player1、player2、score 的数组：

```
Array ( [0] => player1 [1] => player1 [2] => player1 ) 
Array ( [0] => player2 [1] => player3 [2] => player2 ) 
Array ( [0] => 2-3 [1] => 1-3 [2] => 2-0 ) 
```

我需要的是像这样加入所有数组

```
[0] => player1, player2, 2-3
[1] => player1, player3, 1-3
[2] => player1, player2, 2-0 
```

我对 PHP 很陌生，我在发布之前使用了搜索栏。请不要投反对票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:14:06.393

试试这个 ：

```
array_unshift($array, null);
$res = call_user_func_array('array_map', $array);

echo "<pre>";
print_r($res); 
```

编辑：**[10now评论]**

```
 $res = array_map(null, $player1, $player2, $score); 
       echo "<pre>"; 
       print_r($res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:21:49.523

```
$array1 = array ( 'player1', 'player1', 'player1' );
$array2 = array ( 'player2', 'player3', 'player2' ) ;
$array3 = array ( '2-3', '1-3', '2-0' );

$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($array1));
$mi->attachIterator(new ArrayIterator($array2));
$mi->attachIterator(new ArrayIterator($array3));

$newArray = array();
foreach ( $mi as $value ) {
    $newArray[] = $value;
    list($team1, $team2, $result) = $value;
    echo $team1 , ' v ' , $team2, ' -> ', $result , '<br />';
}

var_dump($newArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:13:36.060

```
$x=0;
foreach($arr1 as &$e){
    $e.=", $arr2[$x], $arr3[$x]";
    $x++;
} 
```

这应该将第一个数组保留为所需的结果。

# javascript - 为什么 Coffeescript 认为阴影是一个坏主意

> ID：15223430
> 
> 赞同：16
> 
> 时间：2013-03-05T12:09:57.757
> 
> 标签：javascript, coffeescript

我想切换到 Coffeescript 有一段时间了，昨天我以为我终于被卖掉了，但后来我偶然发现了[Armin Ronachers](http://lucumr.pocoo.org/2011/12/22/implicit-scoping-in-coffeescript/)关于 Coffeescript 中阴影的文章。

Coffeescript 现在确实放弃了阴影，如果您对嵌套循环使用相同的迭代器，则该问题的一个示例是。

```
var arr, hab, i;

arr = [[1, 2], [1, 2, 3], [1, 2, 3]];

for(var i = 0; i < arr.length; i++){
  var subArr = arr[i];
  (function(){
      for(var i = 0; i < subArr.length; i++){
        console.log(subArr[i]);
      }
  })();
} 
```

因为 cs 仅在我无法在咖啡脚本中执行此操作时才声明变量

阴影已被有意删除，我想了解为什么 cs-authors 想要摆脱这样的功能？

**更新**：这是一个[更好的例子](https://gist.github.com/Kallikanzarid/4736201)，说明为什么影子很重要，源自[github 上有关此问题的问题](https://github.com/jashkenas/coffee-script/issues/2697)

PS：我不是在寻找一个答案，告诉我我可以插入带有反引号的纯 Javascript。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-05T16:08:50.447

如果您阅读了有关[此票证](https://github.com/jashkenas/coffee-script/issues/712)的讨论，您可以看到 CoffeeScript 的创建者 Jeremy Ashkenas 解释了禁止显式阴影之间的一些推理：

> 与词法作用域相比，我们都知道动态作用域不好，因为它很难推断变量的值。使用动态作用域，您无法通过阅读周围的源代码来确定变量的值，因为该值完全取决于调用函数时的环境。如果允许并鼓励变量遮蔽，则如果不向后跟踪源中最接近的 var 变量，则无法确定变量的值，因为完全相同的局部变量标识符在相邻范围内可能具有完全不同的值。在所有情况下，当您想要隐藏变量时，只需选择一个更合适的名称即可完成相同的操作。它'
> 
> 所以对于 CoffeeScript 来说，一块石头杀死两只鸟是一个非常慎重的选择——通过删除“var”概念来简化语言，并禁止将阴影变量作为自然结果。

如果您在 CoffeeScript 问题中搜索“范围”或“阴影”，您会发现这一直出现。我不会在这里发表意见，但要点是 CoffeeScript 创建者相信它会导致更简单的代码，不易出错。

好的，我会说一点：阴影并不重要。你可以想出一些人为的例子来说明为什么这两种方法都更好。事实是，无论是否有阴影，您都需要“向上”搜索范围链以了解变量的生命周期。如果您显式声明变量 ala JavaScript，您可能能够更快地短路。但这没关系。如果您不确定给定函数的范围内有哪些变量，那么您做错了。

在 CoffeeScript*中*可以使用阴影，但不包括 JavaScript。如果你*真的*需要一个你知道是局部作用域的变量，你可以得到它：

```
x = 15
do (x = 10) ->
  console.log x
console.log x 
```

因此，如果在实践中出现这种情况，有一个相当简单的解决方法。

就个人而言，我更喜欢显式声明每个变量的方法，并将提供以下内容作为我的“论据”：

```
doSomething = ->
  ...
  someCallback = ->
    ...
      whatever = ->
        ...
        x = 10
        ... 
```

这很好用。然后突然一个实习生出现并添加了这行：

```
x = 20
doSomething = ->
  ...
  someCallback = ->
    ...
      whatever = ->
        ...
        x = 10
        ... 
```

并且砰，代码被破坏了，但是直到很久以后才出现破坏。哎呀！有了`var`，就不会发生这种情况。但是对于“通常是隐式范围，除非您另有说明”，它会。所以。反正。

我在一家在客户端和服务器上使用 CoffeeScript 的公司工作，但在实践中我*从未*听说过这种情况。我认为不必在`var`任何地方都输入单词所节省的时间比范围错误（永远不会出现）所浪费的时间要多。

# 编辑：

自从写了这个答案，我已经看到这个错误在实际代码中发生了两次。每次发生这种情况，都非常烦人且难以调试。我的感觉已经改变，认为 CoffeeScript 的选择是糟糕的时期。

一些类似于 CoffeeScript 的 JS 替代品，例如 LiveScript 和 coco，为此使用了两种不同的赋值运算符：`=`声明变量和`:=`修改外部范围内的变量。这似乎是一个比仅仅保留关键字更复杂的解决方案，而且一旦被广泛使用`var`也不能很好地支持的东西。`let`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-11T00:23:15.027

这里的主要问题不是阴影，它的 CoffeeScript 将变量初始化和变量重新分配混为一谈，并且不允许程序员准确地指定他们的意图

当咖啡脚本编译器看到`x = 1`时，它不知道你的意思是

> *我想要一个新变量，但我忘记了我已经在上层范围内使用了该名称*

或者

> *我想为我最初在文件顶部创建的变量重新分配一个值*

这不是你禁止用一种语言遮蔽的方式。这就是你如何创建一种语言来惩罚那些不小心重用变量名的用户，这些用户带有微妙且难以检测的错误。

CoffeeScript 本来可以设计为禁止阴影，但通过保留`var`. 编译器只会抱怨这段代码：

```
var x = blah()

var test = -> 
  var x = 0 
```

带有“变量 x 已经存在（第 4 行）”

但它也会抱怨这段代码：

```
x = blah()

test = ->
  x = 0; 
```

“变量 x 不存在（第 1 行）”

但是，由于`var`已被删除，编译器不知道您的意思是“声明”还是“重新分配”并且无能为力。

对两种不同的事物使用相同的语法并不“更简单”，即使它看起来很简单。我推荐[Rich Hickey 的演讲，Simple made easy](http://www.infoq.com/presentations/Simple-Made-Easy)，他深入探讨了为什么会这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:02:37.417

> 因为 cs 仅在循环无法按预期工作时才声明变量。

这些循环的预期工作方式是什么？如果 不为空，则in 的条件`while i = 0 < arr.length`将始终为真`arr`，因此它将是一个无限循环。即使只有一个`while`循环无法按预期工作（假设无限循环不是您要寻找的）：

```
# This is an infinite loop; don't run it.
while i = 0 < arr.length
  console.log arr[i]
  i++ 
```

顺序迭代数组的正确方法是使用以下`for ... in`构造：

```
arr = [[1,2], [1,2,3], [1,2,3]]

for hab in arr
  # IDK what "hab" means.
  for habElement in hab
    console.log habElement 
```

我知道这个答案听起来像是在切线；重点是为什么 CS 不鼓励可变阴影。但是，如果要用例子来论证支持或反对某事，那么例子应该是好的。这个例子无助于鼓励变量阴影的想法。

## 更新（实际答案）

关于变量阴影问题，值得澄清的一件事是讨论是否应该在不同的*函数*范围之间允许变量阴影，而不是块。在同一个函数范围内，变量将提升整个范围，无论它们首先被分配到哪里；这个语义继承自 JS：

```
->
  console.log a # No ReferenceError is thrown, as "a" exists in this scope.
  a = 5

->
  if someCondition()
    a = something()
  console.log a # "a" will refer to the same variable as above, as the if 
                # statement does not introduce a new scope. 
```

有时被问到的问题是为什么不添加一种方法来显式声明变量的范围，例如`let`关键字（从而在封闭范围中隐藏其他具有相同名称的变量），或者`=`总是在该范围中引入一个新变量，并且有类似`:=`从封闭范围分配变量而不在当前范围中声明一个的东西。这样做的动机是避免这种错误：

```
user = ... # The current user of the application; very important!

# ...
# Many lines after that...
# ...

notifyUsers = (users) ->
  for user in users # HO NO! The current user gets overridden by this loop that has nothing to do with it!
    user.notify something 
```

CoffeeScript 没有为隐藏变量提供特殊语法的论点是，您根本不应该做这种事情。清楚地命名你的变量。因为即使允许使用阴影，如果有两个具有两种不同含义的变量具有相同的名称，一个在内部范围内，一个在封闭范围内，这将是非常令人困惑的。

根据你有多少上下文使用适当的变量名：如果你有很少的上下文，例如一个顶级变量，你可能需要一个非常具体的名字来描述它，比如`currentGameState`（*特别是*如果它不是一个常量并且它的值将随时间变化）；如果您有更多上下文，则可以使用描述性较少的名称（因为上下文已经存在），例如循环变量：`killedEnemies.forEach (e) -> e.die()`.

如果您想了解有关此设计决策的更多信息，您可能有兴趣阅读以下 HackerNews 线程中的 Jeremy Ashkenas 意见：[链接](http://news.ycombinator.com/item?id=4535885)、[链接](http://news.ycombinator.com/item?id=2864728)；或在讨论此主题的许多 CoffeeScript 问题中：[#1121](https://github.com/jashkenas/coffee-script/issues/1121)、[#2697](https://github.com/jashkenas/coffee-script/issues/2697)等。

# symfony - 再次调用 application->run()

> ID：15223436
> 
> 赞同：0
> 
> 时间：2013-03-05T12:10:13.913
> 
> 标签：symfony, console

我们有一个 symfony 2 控制台命令应用程序。在一个命令（扩展`\Symfony\Component\Console\Command\Command`）中，我们调用另一个命令。

[代码：](https://github.com/netz98/n98-magerun/blob/master/src/N98/Magento/Command/System/Setup/RunCommand.php#L30)

```
$this->getApplication()->run(new StringInput('cache:flush'), new NullOutput()); 
```

在更新到最新的 Symfony 版本之前，这一切正常

但现在我在下面的 Symfony 函数 ( `\Symfony\Component\Console\Input\ArgvInput::parseArgument()`)中遇到了异常

```
private function parseArgument($token)
{
    $c = count($this->arguments);  ## $c is 0 !

    // if input is expecting another argument, add it
    if ($this->definition->hasArgument($c)) {
        $arg = $this->definition->getArgument($c);
        $this->arguments[$arg->getName()] = $arg->isArray()? array($token) : $token;

    // if last argument isArray(), append token to last argument
    } elseif ($this->definition->hasArgument($c - 1) && $this->definition->getArgument($c - 1)->isArray()) {
        $arg = $this->definition->getArgument($c - 1);
        $this->arguments[$arg->getName()][] = $token;

    // unexpected argument
    } else {
        throw new \RuntimeException('Too many arguments.');  ### this exception is thrown
    }
} 
```

这两个命令（原始命令`dev:setup:run`和我们调用的命令`cache:flush`）都不需要参数。

参考资料：[https ://github.com/netz98/n98-magerun/issues/90](https://github.com/netz98/n98-magerun/issues/90)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:53:05.480

[正如您在评论中看到的那样，](https://github.com/symfony/symfony/commit/5b19c892cff52d8d50bcd4b1397cff8972acb9df#commitcomment-2722373)[此提交](https://github.com/symfony/symfony/commit/5b19c892cff52d8d50bcd4b1397cff8972acb9df)导致 Symfony2 的行为不像预期的那样。

然而，这个改变被恢复了，但只在 Symfony2.2 分支中（我猜这是一个错误）。您需要将控制台依赖项更新到某个 2.2.x 版本。
您可以节省地更新到 2.2.x 版本，因为控制台组件中没有 BC 中断（只是一些[非常酷的功能](http://symfony.com/blog/new-in-symfony-2-2-better-interaction-from-the-console)）

# regex - 如何编写 SED 正则表达式来提取由另一个字符串分隔的字符串？

> ID：15223437
> 
> 赞同：0
> 
> 时间：2013-03-05T12:10:17.707
> 
> 标签：regex, sed

我正在使用 GNU sed 4.2.1 版，我正在尝试编写一个非贪婪的 SED 正则表达式来提取一个由其他两个字符串分隔的字符串。当分隔字符串是单字符时，这很容易：

```
s:{\([^}]*\)}:\1:g 
```

在该示例中，字符串由左侧的“{”和右侧的“}”分隔。

如果分隔字符串是多个字符，比如 '{{{' 和 '}}}'，我可以像这样调整上面的表达式：

```
s:{{{\([^}}}]*\)}}}:\1:g 
```

所以中心表达式匹配任何不包含'}}}'结束字符串的东西。但这仅在匹配字符串根本不包含 '}' 时才有效。就像是：

```
{{{cannot match {this broken} example}}} 
```

不会工作，但

```
{{{can match this example}}} 
```

确实有效。当然

```
s:{{{\(.*\)}}}:\1:g 
```

总是有效但很贪心，因此不适合在同一行出现多个模式的情况。

我理解除此之外的`[^a]`任何东西`a`和除此之外的任何`[^ab]`东西，尽管它似乎有效，但我认为这不是排除 3 个连续字符序列的正确方法。`a``b``[^}}}]`

那么如何为 SED 编写一个匹配一个由其他两个字符串分隔的字符串的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:17:30.340

你是对的，那`[^}}}]`是行不通的。否定字符类匹配不是其中一个字符的任何内容。重复字符不会改变逻辑。所以你写的和`[^}]`. （当表达式中没有大括号时，很容易理解为什么这会起作用）。

在 Perl 和兼容的正则表达式中，您可以使用`?`a`*`或非`+`贪婪：

```
 s:{{{(.*?)}}}:$1:g 
```

这将始终匹配`}}}`打开后的第一个`{{{`。

但是，[这在 Sed 中是不可能的](https://stackoverflow.com/questions/1103149/non-greedy-regex-matching-in-sed)。事实上，我不认为 Sed 有任何方法可以进行这种匹配。唯一的其他方法是使用 Sed 也没有的高级功能，例如前瞻。

您可以通过选项轻松地以类似 sed 的方式使用 Perl `-pe`，这会导致它从命令行 ( `-e`) 获取一行代码并自动遍历每一行并打印结果 ( `-p`)。

```
perl -pe 's:{{{(.*?)}}}:$1:g' 
```

文件的`-i`就地编辑选项也很有用，但首先要确保您的正则表达式是正确的！

有关详细信息，请参阅[perlrun](http://perldoc.perl.org/perlrun.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:26:26.617

你`sed`可以这样做：

```
sed -e :a -e 's/\(.*\){{{\(.*\)}}}/\1\2/ ; ta' 
```

和：

```
{{{can match this example}}} {{{can match this 2nd example}}} 
```

这给出了：

```
can match this example can match this 2nd example 
```

这不是惰性匹配，而是通过从右到左替换我们可以利用 sed 的贪心。

# bash - 如何替换数组中的值？

> ID：15223442
> 
> 赞同：1
> 
> 时间：2013-03-05T12:10:28.773
> 
> 标签：bash

在以下数组中

```
ARR=(
"xxx" "xxxxxxxxxxxxxx"
"xxx" "xxxxxxxxxxxxxx"
"xxx" "xxxxxxxxxxxxxx"
"xxx" "ssssssssssssss"
"xxx" "xxxxxxxxxxxxxx"
"xxx" "xxxxxxxxxxxxxx"
) 
```

我需要将值替换`ssssssssssssss`为 `xxxxxxxxxxxxxx`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:26:48.053

使用参数扩展和替换：

```
ARR=("${ARR[@]/ssssssssssssss/xxxxxxxxxxxxxx}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:13:40.647

Simply assign new value:

```
ARR[7]="xxxxxxxxxxxxxx" 
```

If you don't know the position of "ssss..." string, you can interate over array:

```
i=0
for item in ${ARR[*]}
do
        if [ "$item" == "ssssssssssssss" ]
        then
                ARR[$i]="xxxxxxxxxxxxxx"
        fi
        ((i++));
done 
```

# angularjs - ng-repeat 角度指令和管道字符的语法

> ID：15223447
> 
> 赞同：6
> 
> 时间：2013-03-05T12:10:30.960
> 
> 标签：angularjs, angularjs-ng-repeat

我正在研究 angularJS 主页示例，并且遇到了 angularJS ng-repeat 指令的以下用法：

```
 <tr ng-repeat="project in projects | filter:search | orderBy:'name'"> 
```

**管道字符是 angularJS 关键字还是普通 JS 关键字？**另外，这个关键字的预期效果是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T12:17:46.583

[管道字符在 AngularJS表达式](http://docs.angularjs.org/guide/expression)语言中具有特殊含义，用于调用[过滤器](https://docs.angularjs.org/guide/filter)。

简而言之：这是调用过滤器**的 AngularJS 关键字。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:20:25.273

它是一个 Angular 关键字/符号，当您想对输入应用一些 Angular 过滤器时使用它。在这种情况下，您可以阅读如下表达式：

1.  采取`projects`收藏，
2.  对其应用`search`过滤器，
3.  比获取过滤器的结果`search`并在其上应用`orderBy`过滤器，
4.  比获取`orderBy`过滤器的结果并将其提供给 ng-repeat

# iphone - 从 UITableView didSelectRowAtIndexPath: 写入 plist 是否可取？

> ID：15223462
> 
> 赞同：0
> 
> 时间：2013-03-05T12:11:07.717
> 
> 标签：iphone, ios, objective-c, uitableview, plist

我有一个 UITableView 并且想知道在用户选择表中的一行后写入 plist 文件是否可取。基本上，用户选择一行（或多行），然后触摸应用按钮，plist 将被更新，记录用户选择了哪些行。

感谢您的任何帮助或建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:13:13.143

1.  **是的，你可以这样做。**
2.  我不认为这有什么问题。
3.  但是，请确保不要覆盖它。就像先把它弄清楚然后写下来。或者，它可能会导致您的逻辑冲突。

# c - 循环遍历 C 中 n 位的 2^n 个状态，其中 n > 32

> ID：15223465
> 
> 赞同：0
> 
> 时间：2013-03-05T12:11:09.143
> 
> 标签：c, loops, while-loop

我想在 C 中对 n 位的所有可能的 2^n 状态进行循环。例如，如果 n=4，我想循环遍历 0000、0001、0010、0011、...、1110、1111。这些位可以用任何方式表示，例如长度为 n 且值为 0 的整数数组或1，或者长度为 n 的字符数组，其值为“0”或“1”等，这并不重要。

对于较小的 n，我所做的是使用整数算术计算 x=2^n（n 和 x 都是整数），然后

```
for(i=0;i<x;i++) {
    bits = convert_integer_to_bits( i );
    work_on_bits( bits );
} 
```

这里 'bits' 在给定的位表示中，到目前为止有用的是一个长度为 n 的整数数组，其值为 0 或 1（但可以是其他任何值）。

如果 n>32 这种方法显然不适用于多头。

我将如何处理 n>32？

具体来说，我真的需要评估 2^n，还是有一种棘手的方法来编写不引用 2^n 的实际值但仍然迭代 2^n 次的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:13:15.967

对于 n > 32 使用`unsigned long long`. 这适用于 n 高达 64。对于即使接近 50 的值，您也必须等待**很长时间**才能完成循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:15:22.560

不清楚你为什么说如果n>32，它*显然是*行不通的。您关心的是位的宽度，还是您关心的是运行时间？

如果您担心数字宽度，请研究大型数学库，例如[http://gmplib.org/](http://gmplib.org/)。

如果您担心运行时间...如果宽度足够大，您将无法完成循环，因此请换一种爱好；）说真的...算出一次迭代的粗略运行时间通过你的循环，将它乘以 40 亿，除以 20 年，你就会估计出需要等待答案的祖先的世代数。

# prestashop - 在 Prestashop 商店中设置多个供应商

> ID：15223469
> 
> 赞同：1
> 
> 时间：2013-03-05T12:11:16.987
> 
> 标签：prestashop

我需要在我的 prestashop 商店中设置多个供应商。我可以有不同级别的供应商吗，例如供应商 1 将只能列出 100 种产品，2 级供应商将能够列出 200 种产品。我通过研究 [http://www.addons-modules.com/prestashop-tips/prestashop-multiple-seller-multiple-vendor-module/找到了这个链接](http://www.addons-modules.com/prestashop-tips/prestashop-multiple-seller-multiple-vendor-module/)

敏捷多卖家模块可以做到这一点吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-07T20:14:52.167

是的，您可以将此模块和敏捷成员模块一起使用来实现您的要求。这两个模块已经集成在一起。

# mysql - 锻造关键问题

> ID：15223470
> 
> 赞同：0
> 
> 时间：2013-03-05T12:11:25.367
> 
> 标签：mysql, sql, foreign-keys

我正在构建一个调查应用程序，它包含 3 个复选框和一个问题，当单击按钮时它会提交答案，但最近我在表中添加了一个外键，当我尝试提交答案时出现此错误：

```
A Database Error Occurred

Error Number: 1452

Cannot add or update a child row: a foreign key constraint fails (`user_test`.`tblanswers`, CONSTRAINT `tblanswers_ibfk_1` FOREIGN KEY (`answerid`) REFERENCES `credentials` (`cid`) ON UPDATE CASCADE)

INSERT INTO `tblanswers` (`questionid`, `answerA`, `answerB`, `answerC`, `comment`, `cid`) VALUES ('melynas ', 'melynas ', 'baltas', 'geltonas', 'testas', NULL)

Filename: C:\wamp\www\Surva\system\database\DB_driver.php

Line Number: 330 
```

谁能在这里帮助我并解释我做错了什么？tnx 提前。

**表结构**

我忘了提到我正在使用codeigniter。

**凭据表**

```
IF NOT EXISTS `credentials` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `second_name` varchar(255) NOT NULL,
  `phone` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  PRIMARY KEY (`cid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=98 ;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `credentials`
--
ALTER TABLE `credentials`
  ADD CONSTRAINT `credentials_ibfk_1` FOREIGN KEY (`cid`) REFERENCES `tblanswers` (`answerid`) ON UPDATE CASCADE;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION 
```

**答案**

```
CREATE TABLE IF NOT EXISTS `tblanswers` (
  `answerid` int(11) NOT NULL AUTO_INCREMENT,
  `userid` int(11) DEFAULT NULL,
  `cid` int(11) DEFAULT NULL,
  `questionid` int(11) NOT NULL,
  `answerA` varchar(255) NOT NULL,
  `answerB` varchar(255) NOT NULL,
  `answerC` varchar(255) NOT NULL,
  `comment` varchar(255) NOT NULL,
  PRIMARY KEY (`answerid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=205 ;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:22:54.023

这只是意味着您要在父表上不存在的子表上插入一个值。考虑以下架构。

```
Table1
- ID (PK)
- Name

Table2
- RecID (PK)
- OtherColumn
- Table1ID (FK) 
```

是列引用的`Table2`子表column 。`Table1ID``Table1``ID`

```
Table1 
ID      Name
1       John
2       Hello

Table2
RecID   OtherColumn     Table1ID
1       asd             1
2       qwe             2
3       rty             1 
```

如您所见， 的值`Table2`。`Table1ID`都出现在`Table1`. `ID`因为它依赖于`Table1`.

当您尝试`INSERT`将`Table2`. `Table1ID`上不存在的`Table1`，它将产生错误，因为外键强制引用完整性。

预期会失败的查询示例。

```
INSERT INTO Table2 (RecID, OtherColumn, Table1ID)
VALUES (1, 'xxx', 10) 
```

原因是`10`column的值`Table1ID`不存在于`Table1`. `ID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:21:35.083

如果您将外键放在当前表中，那么您不能在外列中插入不在主列中的记录。

就像你有桌子

tbl1主键：id

```
 id    username    password
      1     test1       123456
      2     test2       123 
```

你的第二张桌子

Tbl2 外键：t1_id

```
 ti_id    fname      address
      1        temp       strret
      3        tesp3      strrr 
```

您不能插入第二条记录，因为 Tbl1 中没有 id=3 的列

在你的情况下这种类型的问题

# php - 动态验证表单数据

> ID：15223471
> 
> 赞同：0
> 
> 时间：2013-03-05T12:11:26.680
> 
> 标签：php, javascript, jquery

我的网站中有一个表单字段，我需要知道用户想要使用的电子邮件是否尚未被其他用户使用。

我正在为此使用 JavaScript 和 PHP，但可以让它工作。

```
function validateEmail(){
    //testing regular expression
    var a = $("#email").val();
    var filter = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/;
    //if it's valid email
    if(filter.test(a)){
        if($("#email").val() != ""){
            $.getScript("http://localhost/sisdelivery/validaEmail.php?&email="+$("#email").val(), function(){
                if(resultadoEmail["email"] != ""){
                    email.addClass("error");
                    emailInfo.text("Email ja cadastrado!");
                    emailInfo.addClass("error");
                    return false;
                }
                else{
                email.removeClass("error");
                emailInfo.text("Email OK");
                emailInfo.removeClass("error");
                return true;
                }
            }
        }
    }
    //if it's NOT valid
    else{
        var valEmail = $("#email").val();
        if(valEmail == ""){
            email.addClass("error");
            emailInfo.text("Favor digitar um email!");
            emailInfo.addClass("error");
            return false;
        }
        else{
            email.addClass("error");
            emailInfo.text("O email digitado e invalido");
            emailInfo.addClass("error");
            return false;
        }
    }
} 
```

在数据库中查找数据的 PHP 代码：

```
<?php
include "conecta.php";
$email = $_GET['email'];

$consulta = "SELECT * FROM usuarios WHERE email = '$email';";
$result = mysql_query($consulta);
$num = mysql_num_rows($result);

if($num == 0)
    echo "var resultadoEmail = { 'email' : '' }";

else{
    while($row = mysql_fetch_object($result)){
        $email = $row -> email;
    }
    echo "var resultadoEmail = { 'email' : '$email' }";
}
?> 
```

我收到错误消息`Uncaught SyntaxError: Unexpected token }`，但找不到问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:17:58.493

首先，我只想告诉您，您的代码存在安全风险。这一行：

```
$email = $_GET['email'];
$consulta = "SELECT * FROM usuarios WHERE email = '$email';"; 
```

允许一个人对您的数据库运行 sql 并检索数据。这被称为 sql 注入。您至少应该在进行查询之前验证您的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:17:00.753

用这个

```
 return true;
  }
 });
  ^^^ // you forgot this 
```

# c++ - 使用 boost 查找数据集的峰度

> ID：15223476
> 
> 赞同：6
> 
> 时间：2013-03-05T12:11:34.820
> 
> 标签：c++, boost

我有一个数据向量，我想找到数据集的峰度。我想用 Boost 来做到这一点，这就是我目前所拥有的（不可编译）：

```
#include <boost/math/distributions.hpp>
using namespace std;

int main()
{
    vector<double> a;
    a.push_back(-1);
    a.push_back(0);
    a.push_back(1);

    cout << "Kurtosis:"<< kurtosis(a) << endl;
    return 0;
} 
```

为什么这不起作用？我的编译器给了我错误：“[...]\main.cpp|28|error: 'kurtosis' was not declared in this scope|”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:49:45.237

对于一个你没有包括标题`kurtosis`：

```
#include <boost/accumulators/statistics/kurtosis.hpp> 
```

即使您这样做了，正如您所看到的那样，它不适用于直接`vector`，您可能想要做的就是使用一个`accumulator_set`和更多的标题。

这是一个使用 的最小示例`accumulator_set`，它显示了解决问题的两种方法：

```
#include <boost/math/distributions.hpp>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics/stats.hpp>
#include <boost/accumulators/statistics/mean.hpp>
#include <boost/accumulators/statistics/variance.hpp>
#include <boost/accumulators/statistics/kurtosis.hpp>
#include <iostream>
#include <vector>

using namespace boost::accumulators;

int main()
{
    accumulator_set<double, stats<tag::mean, tag::kurtosis > > acc;
    accumulator_set<double, stats<tag::mean, tag::kurtosis > > acc2;

    acc(2) ;
    acc(3) ;
    acc(4) ;

    std::cout << mean(acc) << " " << kurtosis(acc) << std::endl ;

    std::vector<double> v1 ;

    v1.push_back(2);
    v1.push_back(3);
    v1.push_back(4);

    acc2 = std::for_each( v1.begin(), v1.end(), acc2 ) ;

    std::cout << mean(acc2) << " " << kurtosis(acc2) << std::endl ;
} 
```

这是`Accumulators Framework` [用户指南](http://www.boost.org/doc/libs/1_53_0/doc/html/accumulators/user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework)的链接。本指南有一些很好的例子。

这个先前的[线程](https://stackoverflow.com/questions/4316716/is-it-possible-to-use-boost-accumulators-with-vectors)找到了一种使用方法`vector`，虽然它根本不是直截了当的，我无法让它工作。

# javascript - 在 XHR 请求中动态指定 Header 属性名称

> ID：15223481
> 
> 赞同：0
> 
> 时间：2013-03-05T12:11:49.500
> 
> 标签：javascript, ajax

我正在创建 xhr 调用参数：

```
var CUSTOM_HEADER = "XAppName";
.
.
var xhrArgs = {
url: "../../rest/getCustomerData,
postData: dojo.toJson(custJSONObj),
handleAs: "json",
headers: { "Content-Type": "application/json", "Accept" : "application/json","REMOTE_USER" : "admin", CUSTOM_HEADER: "abc"}
} 
```

当我发布此请求时，在请求标头中，CUSTOM_HEADER 显示为请求标头属性而不是“XAppName”。

上述场景中如何动态设置头部属性名。我想内联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:16:04.210

试试吧

```
 var xhrArgs = {
    ...
    headers : { 
       "Content-Type": "application/json", 
       "Accept" : "application/json",
       "REMOTE_USER" : "admin"
    }
 };

 xhrArgs['headers'][CUSTOM_HEADER] = "abc"; 
```

# matlab - imadjust 将所有像素变为白色

> ID：15223486
> 
> 赞同：0
> 
> 时间：2013-03-05T12:11:59.687
> 
> 标签：matlab

我`imadjust`用来增强图像对比度或拉伸，例如：

```
image = imread(path)
result = imadjust(image, [0.01 0.6], []); 
```

但它会将所有图像像素变为白色。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T11:18:38.637

我遇到了同样的问题，但是当我使用 imagesc matlab 函数时，它可以工作，例如：

```
subplot(2,1,1);
imagesc(result)
colormap(gray);
axis off
title('Result') 
```

用于灰度图像。我希望这有帮助

# ios - 最佳实践：访问属性

> ID：15223491
> 
> 赞同：2
> 
> 时间：2013-03-05T12:12:04.330
> 
> 标签：ios, objective-c

在互联网上搜索似乎有关于如何以最佳方式访问属性的大量讨论。有些人似乎更喜欢点符号，有些人似乎完全厌恶点的使用。作为 Objective-C 和 cocoa 的新手，如果有人能告诉我以下哪一项在您的经验中应该被视为“最佳实践”，我将不胜感激。

```
@interface MyViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *myLabel;
@end 
```

以下哪一项应被视为最佳实践访问例如“隐藏” - UILabel 的属性？

**1**

```
self.myLabel.hidden = YES; 
```

**2**

```
[self.myLabel setHidden:YES]; 
```

**3**

```
[[self myLabel] setHidden:YES]; 
```

**4**

```
[self myLabel].hidden = YES; 
```

**5**

以上所有，但自动合成`_myLabel`

对不起，如果这是一个非常主观的问题，但真的很想听听您的意见！

**总结：**

都是“最佳实践”。选择你认为最漂亮的代码行并坚持下去。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:23:56.677

如果有人好奇：1-4 人都做同样的事情。具体来说，他们使用 getter 和 setter。5 是直接访问——它不使用 getter/setter。

我的建议是接受点表示法是消息传递，而消息传递几乎总是您与对象交互的方式，所以只需使用点表示法即可。

选择器匹配可以用点表示法更强：

```
// ARC
NSURL * url = nil;

NSObject<NSFilePresenter>* presenter = nil;
url = [presenter presentedItemURL]; // << match
url = presenter.presentedItemURL; // << property matched to presenter's method

NSObject * object = nil;
url = object.presentedItemURL; // << ERROR object/selector mismatch
url = [object presentedItemURL]; // << ERROR object/selector mismatch

id untyped = nil;
url = untyped.presentedItemURL; // << ERROR object/selector mismatch (Good compiler)
url = [untyped presentedItemURL]; // << OOPS, vague selector matched 
```

因此，您通过使用点符号引入的增强类型安全性可以节省您的维护以及未来的错误。

您不太可能将它与成员访问混淆，除非您认为您正在处理一个结构（或 C++ 类），并且有许多编译器检查会警告您直接 ivar 访问。

应避免直接访问（例如`_myLabel.prop`和）（除了少数极端情况）。`self->_myLabel.prop`这条规则的例外是在部分初始化的状态下——在你的初始化器中`-dealloc`，你应该使用直接访问，并且你不应该使用访问器方法。

当然，还有其他地方读起来不错：

```
return array.count; <<< OK - clear, although not strictly a @property 
```

......你可以走得太远：

```
NSString * string = NSString.alloc.init; <<< GROSS! you will not make friends using this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:14:04.093

我更喜欢使用这种表示法`[self.myLabel setHidden:YES];`，只是为了在我的代码中清楚地表明我正在为某些东西设置一个值。

就性能而言，它们之间并没有太大的区别。由你决定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:14:45.820

我所看到的是对属性使用点表示法，所以你会使用

```
self.myLabel.hidden = YES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:17:27.930

> 都是很好的做法。
> 
> 但**最佳实践**取决于您的选择。

尽管您忘记在列表中再提及一个。

> **_myLabel.hidden = 是；**

# c++ - C++ getter/setter 范例

> ID：15223504
> 
> 赞同：1
> 
> 时间：2013-03-05T12:12:26.700
> 
> 标签：c++, getter-setter, paradigms

我最近遇到了这个类，并对 getter 和 setter 的实现方式感到惊讶。

我以前没有遇到过这种情况，并欢迎一些第二意见。

你认为这是一个好的范式吗？是坏的吗？是邪恶的吗？

标题：

```
 class Tool
{
public:
    Tool();
    virtual ~Tool();

    bool setName(const std::string &name);
    bool getName(std::string &name) const;

    void clearName();

private:
    std::string m_name;
    bool m_nameSet;

}; 
```

cpp文件：

```
#include "Tool.h"

Tool::Tool()
: m_name("")
, m_nameSet(false)
{
}

Tool::~Tool()
{
}

bool Tool::setName(const std::string &name)
{
    m_name = name;
    m_nameSet = true;
    return (m_nameSet);
}    

bool Tool::getName(std::string &name) const
{
    bool success = false;
    if (m_nameSet)
    {
        name = m_name;
        success = true;
    }
    return (success);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:16:49.600

你为getter选择的方式不流行，程序员更喜欢`return`getter中的数据

```
std::string getName() const; 
```

为什么要在 getter 上重新检查之前设置或具有初始数据的项目？如果要验证数据，请在 setter 上进行验证。

但是，如果您坚持将值返回为“之前设置的名称”，则可以通过以下方式编写第三种方法`bool isNameSet() const;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:56:54.120

这看起来很像 C，通常返回状态代码以查看函数是否失败。

然后还有更好的方法来验证是否设置了名称。一个可能是使用 boost::optional 对我来说这是一种更好的方式来声明可能不会始终设置名称的意图。

然而，我想知道是否最好只通过一个将 std::string 作为参数的构造函数来确保始终设置名称。

```
class Tool
{
public:
  //Constructor already does the right thing
  Tool() = default;
  virtual ~Tool();

  //Use void or return the modified class, akin to operators
  void setName(const std::string& name)
  {
    m_name = name;
  }
  //Alternatively
  Tool& setName(const std::string &name)
  {
    m_name = name;
    return *this;
  }

  //Return const reference to the value if possible, avoids copying if not needed
  //This will fail at run time if name is not set
  //Maybe throw an exception if that is preferred
  const std::string& getName() const
  {
    return *m_name;

    //Or

    if(m_name) return *m_name;
    else throw some_exception;
  }

  //Or return the optional, then calling code can check if name where set or not
  const boost::optional<std::string>& getName() const
  {
    return m_name;
  }

  void clearName()
  {
    m_name = boost::optional<std::string>();
  }

private:
  boost::optional<std::string> m_name;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:38:44.997

我不会称之为*范式*。这似乎是架构的解决方案，其中一个字段可能处于未指定状态（为什么不呢？有时这是一个理智的要求）。不过，我不太喜欢这个解决方案，因为 getter 应该返回值（对称地，setter 应该设置它）并且约定通常需要特定的原型：

```
Type GetValue();
SetValue (const Type & newValue);
or
SetValue (Type & newValue);
or
SetValue (Type newValue); 
```

您应根据情况选择三个二传手之一，通常第一个或第二个适合。

如果一个字段可能处于未指定状态，我会选择另一种方法，正如 M M. 在他的回答中所建议的那样，我将冒昧地提供一个示例：

```
class C
{
private:
    int field;
    bool fieldSet;

public:
    C()
    {
        field = 0;
        fieldSet = false;
    }

    bool IsFieldSet()
    {
        return fieldSet;
    }

    int GetField()
    {
        if (!fieldSet)
            throw std::exception("Attempt to use unset field!");

        return field;
    }

    void SetField(const int newValue)
    {
        field = newValue;
        fieldSet = true;
    }
}; 
```

但请注意，我不会将这种实现 getter 的方式称为*evil*。使用起来可能会不舒服。

# django - 小部件中的空标签选择

> ID：15223506
> 
> 赞同：3
> 
> 时间：2013-03-05T12:12:33.163
> 
> 标签：django

在 Forms 中，我们可以使用[empty_label](https://docs.djangoproject.com/en/1.5/ref/forms/fields/#django.forms.ModelChoiceField.empty_label)。我使用小部件[Select](https://docs.djangoproject.com/en/1.5/ref/forms/widgets/#select)，我的选择来自数据库，可以在这里使用`empty_label`吗？在模型中我有：

```
position = forms.IntegerField(label=position_label, required=False, 
    widget=forms.Select(choices=Position.objects.all().values_list('id', 'position'),
    attrs={'class':'main', 'title': position_label},
    ), empty_label="(Empty)") 
```

但错误是：

```
TypeError: __init__() got an unexpected keyword argument 'empty_label' 
```

如何将标签设置为“空”？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T12:54:44.710

empty_label有两种实现方式：

```
class MyForm(forms.ModelForm):
    class Meta:
        model = MyModel

    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['field_name'].empty_label = "(Select here)"
        self.fields['field_name'].widget.attrs['class'] = 'main'
        self.fields['field_name'].queryset = Position.objects.all().values_list('id', 'position')

//OR   

class MyForm(forms.ModelForm):
    field_name = forms.ModelChoiceField(
        queryset=Position.objects.all().values_list('id', 'position'), 
        empty_label="(Select here)"
        )

    class Meta:
        model = MyModel 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:18:40.837

`empty_label`是字段的属性，而不是小部件。您已经`label`有一套 for `position`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T12:32:01.923

来自 Django 文档[https://docs.djangoproject.com/en/1.10/ref/forms/widgets/#django.forms.SelectDateWidget](https://docs.djangoproject.com/en/1.10/ref/forms/widgets/#django.forms.SelectDateWidget)

如果不需要**DateField ，则****SelectDateWidget**将在列表顶部有一个空选项（默认为 ---）。**您可以使用empty_label** **属性**更改此标签的文本。**empty_label**可以是字符串、列表或元组。使用字符串时，所有选择框都会有一个带有此标签的空选项。如果**empty_label**是 3 个字符串元素的列表或元组，则选择框将有自己的自定义标签。标签应按此顺序排列（'year_label'、'month_label'、'day_label'）。

# c# - 如何将参数传递给 SQL 查询？

> ID：15223518
> 
> 赞同：0
> 
> 时间：2013-03-05T12:13:09.350
> 
> 标签：c#, sql, oledb

******在 C# 中调用查询：* ***

```
OleDbCommand cmd = new OleDbCommand("SqlR",connection);
cmd.CommandType = CommandType.StoredProcedure;
OleDbParameter parameter = new OleDbParameter("@kalpiNum",s);//the operators
cmd.Parameters.Add(parameter); rdr = cmd.ExecuteReader(); 
```

我没有看到运营商 **查询：**

```
SELECT BO.MISHPAHA AS MISHPAHA,
       BO.PRATI AS PRATI,
       TM.LongShem AS LongShem,
       TM.SHEM AS SHEM,**
       TM.semel AS semel,
       TM.OT AS OT,
       (select SUM(KOLOT)
        from TOZAOTR
        where MUAMAD=BO.ZEUT AND kalpi =@kalpiNum) AS Total,
       (select sum(kolot)
        FROM TOZAOTR
        WHERE kalpi =@kalpiNum) AS SuMall,
       ROUND((Total/(SuMall+0.00001))*100,2) AS pre
FROM (MUAMADIM AS MU LEFT JOIN BOHARIM AS BO ON MU.ZEUT=BO.ZEUT)
LEFT JOIN TMIFLAGA AS TM ON MU.MIFLAGA=TM.SEMEL; 
```

# ios - how to access dynamically created uilabel in iphone

> ID：15223522
> 
> 赞同：0
> 
> 时间：2013-03-05T12:13:15.467
> 
> 标签：ios, objective-c

I have created dynamic `UILabel` with tag value and i have similar kind of other labels without tag values.

Now i want access only tag values labels but i was not able to acces the label text value.

Here is my code.

```
 Dynamic created Label
     for (int i= 0; i < [array count]; i++) {
        UILabel *defaultLbl = [[UILabel alloc] initWithFrame:CGRectMake(30, 70, 60, 21)];
        defaultLbl.text = @"Default";
        defaultLbl.backgroundColor = [UIColor clearColor];
        defaultLbl.textColor = [UIColor colorWithRed:51.0/255.0 green:51.0/255.0 blue:51.0/255.0 alpha:1.0];
        [defaultLbl setFont:[UIFont fontWithName:@"Helvetica" size:12]];
        defaultLbl.textAlignment = NSTextAlignmentCenter;
        defaultLbl.tag = i+1;
        [myButton addSubview:defaultLbl];
        [defaultLbl release];

        UILabel *masterProName = [[UILabel alloc] initWithFrame:CGRectMake(28, 20, 200, 21)];
        masterProName.text = [masterProjListArray objectAtIndex:i];//@"Lorem Ipusum";
        masterProName.backgroundColor = [UIColor clearColor];
        masterProName.textColor = [UIColor colorWithRed:51.0/255.0 green:153.0/255.0 blue:204.0/255.0 alpha:1.0];
        [masterProName setFont:[UIFont fontWithName:@"Helvetica-Bold" size:17]];
        masterProName.lineBreakMode = NSLineBreakByCharWrapping;
        [myButton addSubview:masterProName];
        [masterProName release];

        UILabel *masterProID = [[UILabel alloc] initWithFrame:CGRectMake(28, 45, 200, 21)];
        masterProID.text = [masterProjIDArray objectAtIndex:i];//@"133 FS";
        masterProID.backgroundColor = [UIColor clearColor];
        masterProID.textColor = [UIColor colorWithRed:51.0/255.0 green:51.0/255.0 blue:51.0/255.0 alpha:1.0];;
        [masterProID setFont:[UIFont fontWithName:@"Helvetica" size:17]];
        masterProID.lineBreakMode = NSLineBreakByCharWrapping;
        [myButton addSubview:masterProID];
        [masterProID release];
    } 
```

And `UILabel` access method after user press the long press button

```
- (void)longPressTap:(UILongPressGestureRecognizer *)sender
         {
          if ([recognizer.view tag]) {
                        UILabel *view = (UILabel *)recognizer.view;
                    NSLog(@"---%@", view.subviews);

                    for (UILabel *lbl in view.subviews) {
                        if (recognizer.view.tag == view.tag) {
                            NSString *text = view.text;
                            NSLog(@"---%@", text);
                        }
                    }
            }
        } 
```

here am putting the log

```
"<UIImageView: 0x75b9510; frame = (0 0; 379 100); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75acef0>>",
            "<UILabel: 0x88c4e50; frame = (28 20; 200 21); text = 'Aux Water Waste Trtmnt'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x88c49c0>>",
            "<UILabel: 0x88c52f0; frame = (28 45; 200 21); text = 'M10000'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x88c5380>>",
            "<UILabel: 0x88c56c0; frame = (30 70; 60 21); text = '**Default**'; clipsToBounds = YES; userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x88c5750>>",
            "<UIButton: 0x88c6440; frame = (240 10; 70 80); opaque = NO; userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x88c6500>>" 
```

In this log i want to access only "Default" text label

Please give me any suggestion on this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:22:09.617

好吧，您需要知道标签的文本中带有“默认”的标签具有哪个值。假设它是 42。那么

```
UILabel *label = [view viewWithTag:42]; 
```

会成功的。无论如何，您的解决方案也应该有效。查看您正在处理的实际标签值。我有一种胆量感觉，recognizer.view.tag 与标签中带有“默认”的标签的值不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:24:31.820

您还可以在运行时创建这些插座。

创建一个数组，然后继续添加每个标签的出口。

完成并需要检索它们后，您可以通过数组索引轻松访问。

即使您可以创建一个字典来存储 outlet，在这里您也可以通过键访问标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:20:56.380

当您将标签分配给 时`UILabel`，我们可以从标签中获取标签（如果我们知道，在您的情况下我们知道）。

所以试试这种方式

```
 for (int i = 0 ; i <[array count]; i++)
    {
        UILabel *lbl = (UILabel*)[self.view viewWithTag:i+1];
        NSLog(@"--- %@", lbl.text);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:29:38.640

获取`UILabel`基于它的`Tag`.

取`int i;`入`.h file`，并放入`i=1;`上面**的for循环**

```
for (NSObject *view in self.View.subviews) 
{
    if ([view isKindOfClass:[UILabel class]]) 
    {
        label = (UILabel *)[[self view] viewWithTag:i];
        NSLof(@"%@".label.text);
       // break;
    }
  i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:32:08.423

首先，你应该检查

```
 if (lbl.tag == view.tag) 
```

不是

```
if (recognizer.view.tag == view.tag) 
```

其次，无论如何它都不会起作用。所做的只是识别你所知道的已被触摸的视图。如何将您想要的标签中的标签值设置为唯一编号并进行测试

```
if (lbl.tag == <unique tag number>) 
```

# python - How to deal with thrift client disconnection issue

> ID：15223525
> 
> 赞同：4
> 
> 时间：2013-03-05T12:13:22.900
> 
> 标签：python, hbase, connection-pooling, thrift, reconnect

My project use bottle and HBase, client connect to HBase via python thrift client, code simplify like this

```
#!/usr/bin/env python

from bottle import route, run, default_app, request

client = HBaseClient()

@route('/', method='POST')
def index():
    data = client.getdata()
    return data 
```

Now the issue is if client disconnect, our request will be failed. So it requires to make sure client keep alive.

One solution is using connection pool, is there any connection pool I can refer to?

Any other solution for this issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T01:26:14.743

看起来[happybase](http://happybase.readthedocs.org/en/latest/)可以解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T19:50:26.183

HappyBase 有一个连接池，它试图在一定程度上处理断开的连接：http: [//happybase.readthedocs.org/en/latest/user.html#using-the-connection-pool](http://happybase.readthedocs.org/en/latest/user.html#using-the-connection-pool)

# c++ - 函数声明的返回类型中的 const 关键字

> ID：15223528
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:13:32.253
> 
> 标签：c++, function, constants, return-value, return-type

我用 C++ 编写了以下 3 个函数。请解释一下所有返回类型有何不同？以及返回值将如何存储在内存中？我知道 const 关键字适用于紧靠左侧的任何内容，但我需要更多解释。

```
const int* sample1();
int* const sample2();
int const* sample3(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:22:54.677

```
const int* sample1();
int const* sample3(); 
```

这些功能是相同的。它们返回指向常量内存的指针（此内存不能通过此指针更改）。但是我们可以改变指针本身。例如增加它。

```
int* const sample2(); 
```

此函数返回指向非常量内存的常量指针。我们不能改变指针本身，但我们可以改变它指向的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:18:10.153

*const*不必*适用于直接右侧的任何内容*。例如

```
class Foo
{ 
  void Bar() const;
  int var;
} 
```

这将禁止*Foo*中的函数*Bar*更改对象中的任何成员变量。除了这个*us2012*的评论总结了一切。

 **我可能完全喜欢，但这似乎是学校作业或其他什么？**

# asp.net-mvc - MVC view with two forms, why are both rendering to same action?

> ID：15223536
> 
> 赞同：2
> 
> 时间：2013-03-05T12:13:49.077
> 
> 标签：asp.net-mvc, razor, html-helper, html.beginform

```
@using (Html.BeginForm("Unassign", "Terminals_DataGroups"))
{ 
    @Html.HiddenFor(m => m.DeviceId)
    @Html.HiddenFor(m => m.DataGroupId)
    <input type="submit" value="Remove group from device" @(string.IsNullOrEmpty(Model.DataGroupName) ? "disabled=\"disabled\"" : "") />
}

@using (Html.BeginForm("Assign", "Terminals_DataGroups"))
{ 
    @Html.HiddenFor(m => m.DeviceId)

    <div class="editor-label">
        @Html.LabelFor(model => model.DataGroups)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.DataGroupsSelectedItem, new SelectList(Model.DataGroups, "Value", "Text"))
        @Html.ValidationMessageFor(model => model.DataGroupsSelectedItem)
    </div>

    <input type="submit" value="Assign Data Group" />
} 
```

Yet the HTML renders as:

```
<form action="/Terminals_DataGroups/Assign" method="post">
    <input data-val="true"
        data-val-number="The field DeviceId must be a number."
        data-val-required="The DeviceId field is required."
        id="DeviceId"
        name="DeviceId"
        type="hidden"
        value="15" />
    <input data-val="true"
        data-val-number="The field DataGroupId must be a number."
        id="DataGroupId"
        name="DataGroupId"
        type="hidden"
        value="1" />
    <input type="submit" value="Remove group from device"  />
</form>

<form action="/Terminals_DataGroups/Assign" method="post">
    <input data-val="true"
        data-val-number="The field DeviceId must be a number."
        data-val-required="The DeviceId field is required."
        id="DeviceId"
        name="DeviceId"
        type="hidden"
        value="15" />
    <div class="editor-label">
        <label for="DataGroups">Data groups</label>
    </div>
    <div class="editor-field">
        <select data-val="true"
            data-val-number="The field DataGroupsSelectedItem must be a number."
            id="DataGroupsSelectedItem"
            name="DataGroupsSelectedItem">
            <option value="2">DataGroup2</option>
            <option value="3">DataGroup3</option>
            <option value="5">New group</option>
        </select>
        <span class="field-validation-valid"
            data-valmsg-for="DataGroupsSelectedItem"
            data-valmsg-replace="true"></span>
    </div>
    <input type="submit" value="Assign Data Group" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T12:45:36.353

你必须添加 ID 标签和值对不起我的英语；）

# javascript - how to copy the contents of element and paste it to pdf using javascript without jsPDF

> ID：15223537
> 
> 赞同：0
> 
> 时间：2013-03-05T12:13:49.940
> 
> 标签：javascript, pdf, html

I am developing a web application using JavaScript. in a certain case i want to extract the contents inside a div element and paste it to the pdf file when i click the link "download to pdf".

I received some answers regarding this by using jsPDF lib, but is there any other way without using jsPDF? jsPDF is not supporting such things

```
 <div id="panel">
      //some codes 
      <a href=javascript:downloadPDF();>Download to PDF</a>
    </div>

    <script>
     function downloadPDF()
     {
      what to write here to convert to PDF
     }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:16:44.257

您可以使用 jsPDF .jsPDF 是一个开源库，仅使用 Javascript 即可生成 PDF 文档。

[http://jspdf.com/](http://jspdf.com/)

[https://code.google.com/p/jspdf/](https://code.google.com/p/jspdf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:16:58.350

可以*做到*，但不是10行练习。

最兼容的方法是获取要放入 PDF 的内容，将其发送到服务器，然后使用服务器端几个好的库中的任何一个来生成 PDF（在 Java 中，一个选项是[iText](http://itextpdf.com/)，在 .网络上有它的优秀端口，[iTextSharp](http://sourceforge.net/projects/itextsharp/)；[还有一个 PHP 模块](http://php.net/manual/en/book.pdf.php)用于执行 PDF）。

有一个名为[jspdf](https://code.google.com/p/jspdf/)的 JavaScript 库，可用于在 JavaScript 中生成 PDF，无论是通过 NodeJS 或类似的服务器端，还是`data:`在某些浏览器上生成 URI。

# java - Android Development: Nested Context Menus?

> ID：15223538
> 
> 赞同：2
> 
> 时间：2013-03-05T12:13:50.490
> 
> 标签：java, android, contextmenu

Is it possible to have nested context menus? I am working on an app which needs to provide the users with various functionality, and after much thought I came to the conclusion that using a context menu would be quite advantageous (would allow me to clean up my screen by getting rid of a few spinners etc)

However I was wondering if its even possible to have a context menu pop up, and then on the item select present the user with even more choices.

Something along these lines:

```
Context Menu 1 
 -> Change Font Color (on select generate context menu 2)
    ->Red
    ->Green
 -> Change Background Color (on select generate context menu 3)
    ->Red
    ->Green 
```

Would something like this be possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T04:27:32.617

你用的是什么IDE？你用 xml 或 Java 做什么？如果您使用的是 Eclipse，您可以在包含 xml 文件的“菜单”文件夹中创建一个菜单，然后使用他们的“管理器”创建一个子菜单。

这是一个名为 game_menu.xml 的示例菜单：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/new_game"
          android:icon="@drawable/ic_new_game"
          android:title="@string/new_game"
          android:showAsAction="ifRoom"/>
    <item android:id="@+id/help"
          android:icon="@drawable/ic_help"
          android:title="@string/help" />
</menu> 
```

要创建子菜单，您必须“嵌套`<menu>`元素”

[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

转到在 XML 中定义菜单

# javascript - Firefox OS 后台服务

> ID：15223542
> 
> 赞同：6
> 
> 时间：2013-03-05T12:14:05.280
> 
> 标签：javascript, firefox, mobile, background, firefox-os

我想构建和应用程序，用户可以通过它输入一些设置，并且应用程序将启动后台服务以根据这些设置执行一些任务。我只想在模拟器中运行应用程序和后台服务（我知道运行后台服务需要“认证”模式，但我现在不考虑在 Firefox Marketplace 上发布应用程序）。

有人可以为我提供一些关于如何在 FIrefox OS 平台上构建和运行后台服务的链接或教程吗？谁能解释一下如何在后台服务和应用程序之间进行通信？（我已经搜索了 MDN 和谷歌，但没有运气）。

另外，应用程序（常规应用程序或后台服务）是否有某种方法可以监听来自服务器的通知？（我正在寻找一种方法，其中应用程序不合并，但由服务器通知）。

谢谢， 塔玛什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:24:46.317

> 有人可以为我提供一些关于如何在 FIrefox OS 平台上构建和运行后台服务的链接或教程吗？

这是 Firefox OS 未来版本的计划。[请参阅https://wiki.mozilla.org/Webapi](https://wiki.mozilla.org/Webapi)上的“后台服务”

> 另外，应用程序（常规应用程序或后台服务）是否有某种方法可以监听来自服务器的通知？（我正在寻找一种方法，其中应用程序不合并，但由服务器通知）。

这似乎还没有实现。请参阅[https://wiki.mozilla.org/Webapi](https://wiki.mozilla.org/Webapi)和 [https://wiki.mozilla.org/WebAPI/SimplePush](https://wiki.mozilla.org/WebAPI/SimplePush)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T23:12:50.647

上面的 wiki 页面已经过时了——尽管它暗示了即将发生的事情。

目前 RequestSync API 已经登陆 - 它允许预定唤醒以用于同步目的。这*不是*一个永远在线的后台服务。它计划在 Firefox OS 的 2.2 版本中发布。

RequestSync 尚未在 MDN 上记录，但实现错误在这里：[https ://bugzilla.mozilla.org/show_bug.cgi?id=1018320](https://bugzilla.mozilla.org/show_bug.cgi?id=1018320)

在我们通过 Service Worker 进行完全后台同步之前，RequestSync 是一个部分解决方案。

Service Worker 现在处于实施阶段：[https ://bugzilla.mozilla.org/show_bug.cgi?id=903441](https://bugzilla.mozilla.org/show_bug.cgi?id=903441)

MDN 上的文档草案在这里：

[https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker_API](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker_API)

# map - SSIS Map a variable or an SQL command to a column

> ID：15223546
> 
> 赞同：1
> 
> 时间：2013-03-05T12:14:08.523
> 
> 标签：map, ssis

I'm facing an issue, I don't know how to map the result of an `SQL command` or even a `variable` to a `column`.

Here's what I'm trying to do : I have an `ADO source` (DB1) which I want to map to different tables (`DB2.table1, ..., DB2.table_5`), so I'm using a `broadcast tool`, with a flow per table, but one of my destination table requires that one field be mapped to the result of a select query. So I thought of variables which can be assigned the result of a command, but an `ADO destination` appears not to map a `column` with neither a `query` nor a `variable`.

SQL Server 2008 + Visual 2008.

Has anyone a solution ? Thanks in advance ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:02:16.190

[派生列转换](http://msdn.microsoft.com/en-us/library/ms141069(v=sql.105).aspx)支持使用变量以及现有列值来确定新列值。此屏幕截图显示了如何使用`System::StartTime`变量替换 的值`ColumnA`：

![在此处输入图像描述](../Images/2feaddd288daae9b796836f66ad3a514.png)

# sql - SQL 表 - 获取表中必填列的计数

> ID：15223548
> 
> 赞同：0
> 
> 时间：2013-03-05T12:14:18.073
> 
> 标签：sql, sql-server, database, tsql

如何获取（计数）表中必填列的编号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:19:10.133

我假设您的意思是`NOT NULL`，要在 SQL Server 中执行此操作，您可以执行以下操作：

```
SELECT sys.tables.name, c.name
FROM sys.tables
INNER JOIN sys.columns c ON c.object_id = sys.tables.object_id
WHERE COLUMNPROPERTY(OBJECT_ID(sys.tables.name),c.name,'AllowsNull') IS NOT NULL 
```

这将检索`mandatory`数据库中每个表的所有列。您可以通过仅指定一个表来修改此查询。

```
SELECT COUNT(name) FROM sys.columns
WHERE OBJECT_ID = OBJECT_ID('Client') 
AND COLUMNPROPERTY(OBJECT_ID('Client'),name,'AllowsNull') IS NOT NULL 
```

表`COUNT`的必填列`Client`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:20:07.287

这个查询可以帮助

我想 CHARacter_maximum_length>0 是强制性条件

```
SELECT Count(*)
FROM information_schema.columns WHERE table_name = 'Role' and CHARacter_maximum_length>0 
```

为了

IS_NULLABLE 比 IS_NULLABLE = 'Yes' 为真

IS_NULLABLE 比 IS_NULLABLE = 'No' 为假

```
SELECT Count(*)
FROM information_schema.columns WHERE table_name = 'Role' and IS_NULLABLE = 'Yes' 
```

# mysql - MySQL 事件调度程序不起作用，但一切都已设置

> ID：15223549
> 
> 赞同：2
> 
> 时间：2013-03-05T12:14:21.207
> 
> 标签：mysql, events

我的 MySQL 事件永远不想执行。
我使用最新的 5.6.10 版本，但问题也在 5.5 版本中。
我有 1 个主从配置。我想在 Master 上举办活动。

1.  在**my.ini**我已经设置 event_scheduler=ON

2，检查这个：

```
show variables like '%event_scheduler%';
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| event_scheduler | ON    |
+-----------------+-------+

show processlist\G

Id: 1
User: event_scheduler
Host: localhost
db: NULL
Command: Daemon
Time: 720
State: Waiting on empty queue
Info: NULL
... 
```

3，接下来我在主服务器上有一个重复事件。
这永远不想执行。我还尝试将日期更改为不同的时间。

```
CREATE EVENT IF NOT EXISTS dbname.event_xyz
ON SCHEDULE EVERY 1 DAY STARTS '2013-02-05 00:15:00'
ON COMPLETION PRESERVE
DISABLE ON SLAVE
COMMENT 'Collect data from ...'
DO CALL dbname._procedurename; 
```

我直接调用“_procedurename”过程没有错误。

4、事件和程序的创建者是“根”。

5、输出的

```
show events\G

Db: dbname
Name: event_xyz
Definer: root@localhost
Time zone: SYSTEM
Type: RECURRING
Execute at: NULL
Interval value: 1
Interval field: DAY
Starts: 2013-02-05 00:15:00
Ends: NULL
Status: SLAVESIDE_DISABLED
Originator: 1
character_set_client: utf8
collation_connection: utf8_general_ci
Database Collation: utf8_general_ci 
```

6，重新启动主服务器我在masterservername.err中得到以下几行：

```
...
Event Scheduler: Purging the queue. 0 events
...
Event Scheduler: Loaded 0 events
... 
```

和

```
show processlist\G 
```

表明 event_scheduler

```
State: Waiting on empty queue ! 
```

所以，我的问题是为什么不在我的主服务器上运行事件？
为什么事件调度器对先前定义的事件一无所知？
我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:39:54.663

也许这是一个错误。

解决方案是删除

```
DISABLE ON SLAVE 
```

来自事件声明命令的参数。

此后，事件状态变为“启用”状态并由主服务器上的事件调度程序触发。

在从站上，此事件的状态以“SLAVESIDE_DISABLED”状态复制。

那么，CREATE EVENT 语法中存在“DISABLE ON SLAVE”参数的目的是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T11:39:38.073

这可能是错误[http://bugs.mysql.com/bug.php?id=67191](http://bugs.mysql.com/bug.php?id=67191)，已在 5.6.14 中修复

# svn - Tortoise SVN中的拼写检查

> ID：15223552
> 
> 赞同：2
> 
> 时间：2013-03-05T12:14:25.773
> 
> 标签：svn, tortoisesvn, spell-checking

我用的是 SVN 乌龟（英文版）。可以附加其他语言的字典吗？
我想在写提交描述时检查拼写（波兰语）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:18:31.387

您可以在[TortoiseSVN 手册](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-intro-install-spell.html)中找到答案：

> TortoiseSVN 包含一个拼写检查器，它允许您检查您的提交日志消息。如果项目语言不是您的母语，这将特别有用。拼写检查器使用与 OpenOffice 和 Mozilla 相同的字典文件。
> 
> 安装程序会自动添加美国和英国英语词典。 **如果你想要其他语言，最简单的选择就是安装 TortoiseSVN 的语言包之一。这将安装适当的字典文件以及 TortoiseSVN 本地用户界面。** 安装完成后，字典也将可用。

# php - CCJavascript 返回 True 页面刷新错误

> ID：15223555
> 
> 赞同：0
> 
> 时间：2013-03-05T12:14:34.547
> 
> 标签：php, javascript, jquery, forms, refresh

我正在用 PHP 编写表单验证代码。下面是代码。

id 为 #questionSubmit 的元素是一个包含 6 个文本字段（代码、问题、答案、选项 1、选项 2、选项 3、选项 4、选项 5）和一个提交按钮的表单。

```
<form id="createQuestionForm" action="" method="POST">
    Question Code: <input id="code" class="createQuestionTextBox1" type="text" name="questionCode">
    Question Name: <input id="question" class="createQuestionTextBox1" type="text" name="questionName">
    Correct Answer: <input id="answer" class="createQuestionTextBox1" type="text" name="correctAnswer">
    Option 1: <input id="option1" class="createQuestionTextBox2" type="text" name="option_1">
    Option 2: <input id="option2" class="createQuestionTextBox2" type="text" name="option_2">
    Option 3 <input id="option3" class="createQuestionTextBox2" type="text" name="option_3">
    Option 4 <input id="option4" class="createQuestionTextBox2" type="text" name="option_4">
    Option 5 <input id="option5" class="createQuestionTextBox2" type="text" name="option_5">
    <input type="Submit" id="questionSubmit" value="Create Question"></input> 
</form>

function SubmitFormCreationData() {
    $("#questionSubmit").click(function() {
        if (CheckCodeField($("#code").val()) == false) {
            return false;
        } else if (CheckAnswerNameFields($("#question").val()) == false) {
            return false;
        } else if (CheckCorrectAnswerField($("#answer").val()) == false) {
            return false;
        } else if (CheckAnswerNameFields($("#option1").val()) == false) {
            return false;
        } else if (CheckAnswerNameFields($("#option2").val()) == false) {
            return false;
        } else if (CheckAnswerNameFields($("#option3").val()) == false) {
            return false;
        } else if (CheckAnswerNameFields($("#option4").val()) == false) {
            return false;
        } else if (CheckAnswerNameFields($("#option5").val()) == false) {
            return false;
        } else {
            $.post("InsertNewQuestion.php", $('#createQuestionForm').serialize());
            alert('Quiz Created');
            window.setTimeout(delay,2000);
            return true;
        }
        return false;
    });
}

function CheckAnswerNameFields(value) {
    var isValid = true;

    if (value == "") 
        isValid = false;
    if (value == null)
        isValid = false;
    for(LCV = 0;LCV <= (count(value)-1); LCV++) {
        if(value[LCV] == "'")
            isValid = false;
        if(value[LCV] == '"')
            isValid = false;
    }

    return isValid;
}

function CheckCodeField(value) {
    var isValid = true;

    if(isInteger(value) == false)
        isValid = false;
    if(value < 100000)
        isValid = false;
    if(value > 999999)
        isValid = false;

    return isValid;
}  

function CheckCorrectAnswerField(value) {
    var isValid = true;

    if(isInteger(value) == false)
        isValid = false;
    if(value < 1)
        isValid = false;
    if(value > 5)
        isValid = false;

    return isValid;
}

function isInteger(possibleInteger) {
    return /^[\d]+$/.text(possibleInteger);
} 
```

现在，如果正确输入了第一个字段，则输出如所愿，则返回 false。但是，如果第一个字段输入正确，其余字段为空白，则页面刷新，但它应该返回 false，因为我检查问题和选项字段是否为空白。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:11:06.547

```
 $("#questionSubmit").click(function() {
        $.post("InsertNewQuestion.php", $('#createQuestionForm').serialize(), function(data){
        if(data=='SUCCESS'){
               alert('Quiz Created');
               window.setTimeout(delay,2000);
               return true;
               }
            else{
                var alertx='';
                for(i=0;i<data.split('-').length-1;i++) alertx += data.split('-')[i].toString()+"\n";
                alert(alertx);
            }
        });
    return false;
}); 
```

插入新问题.php

```
extract($_POST);

 $errors = '';

if(!in_array($questionCode,range(100000,999999))) $errors .= 'Invalid code-';
if(!in_array($correctAnswer,range(1,5))) $errors .= "Invalid answer-";

 for($i=1;$i<=6;$i++){ 
   $var = $i==6 ? $questionName : ${'option_'.$i};
   if(empty($var) || strstr($var,'"') || strstr($var,"'")) $errors.= "Invalid ".($i==6?"question name":"option $i")."-"; 
    }

     echo $errors=='' ? 'SUCCESS':$errors; 
```

如果工作正常，请尝试并编写

# c - 字符串数据存储在哪里？

> ID：15223556
> 
> 赞同：6
> 
> 时间：2013-03-05T12:14:35.320
> 
> 标签：c, linux, string, assembly, x86

我写了一个小c程序：

```
#include <stdio.h>

int main()
{
    char s[] = "Hello, world!";
    printf("%s\n", s);
    return 0; 
} 
```

编译为（在我的 linux 机器上）：

```
 .file   "hello.c"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    subq    $32, %rsp
    movq    %fs:40, %rax
    movq    %rax, -8(%rbp)
    xorl    %eax, %eax
    movl    $1819043144, -32(%rbp)
    movl    $1998597231, -28(%rbp)
    movl    $1684828783, -24(%rbp)
    movw    $33, -20(%rbp)
    leaq    -32(%rbp), %rax
    movq    %rax, %rdi
    call    puts
    movl    $0, %eax
    movq    -8(%rbp), %rdx
    xorq    %fs:40, %rdx
    je  .L3
    call    __stack_chk_fail
.L3:
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2"
    .section    .note.GNU-stack,"",@progbits 
```

我不明白汇编代码，但我在任何地方都看不到字符串消息。那么可执行文件如何知道要打印什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T12:16:08.673

它在这里：

```
movl    $1819043144, -32(%rbp) ; 1819043144 = 0x6C6C6548 = "lleH"
movl    $1998597231, -28(%rbp) ; 1998597231 = 0x77202C6F = "w ,o"
movl    $1684828783, -24(%rbp) ; 1684828783 = 0x646C726F = "dlro"
movw    $33, -20(%rbp)         ;         33 =     0x0021 = "\0!" 
```

在这种特殊情况下，编译器会生成内联指令以在调用`printf`. 当然，在其他情况下，它可能不会这样做，而是将字符串常量存储在另一段内存中。底线：您不能对编译器将如何或在何处生成和存储字符串文字做出任何假设。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:16:27.800

字符串在这里：

```
movl    $1819043144, -32(%rbp)
movl    $1998597231, -28(%rbp)
movl    $1684828783, -24(%rbp) 
```

这会将一堆值复制到堆栈中。这些值恰好是您的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:16:38.860

字符串*常量*存储在应用程序的二进制文件中。究竟在哪里取决于您的编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:18:12.337

程序集没有“字符串”概念。因此，“字符串”实际上是一块内存。该字符串存储在内存中的某个位置（直到编译器），然后您可以使用它的内存地址（指针）来操作这块数据。

如果您的字符串是**常量**，编译器*可能*希望将其用作常量而不是将其存储到内存中，这样会更快。正如 Paul R 所指出的，这是您的情况：

```
movl    $1819043144, -32(%rbp)
movl    $1998597231, -28(%rbp)
movl    $1684828783, -24(%rbp) 
```

您不能假设编译器将如何处理您的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:54:37.823

除了上述之外，编译器可以看到您的字符串文字不能被直接引用（即不能有任何有效的指向您的字符串的指针），这就是它可以直接复制它的原因。但是，如果您改为分配字符指针，即

`char *s = "Hello, world!";`

编译器将在内存中的某处初始化字符串文字，因为您现在当然可以指向它。此修改在我的机器上产生：

```
.LC0:
    .string "Hello, world!"
    .text
    .globl  main
    .type   main, @function 
```

可以对字符串文字做出一个假设：如果将指针初始化为文字，它将指向内存中某处保存的静态 char 数组。因此，指针在程序的任何部分都有效，例如，您可以返回指向在函数中初始化的字符串字面量的指针，它仍然有效。

# ruby-on-rails - 使用 Rails 创建操作的多选

> ID：15223560
> 
> 赞同：1
> 
> 时间：2013-03-05T12:14:51.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一个 Collection_select，其中 Multiple 设置为 true

```
 #views/courses/new
<%=collection_select(:course, :department_id, Department.all, :id, :name, {},
:multiple =>true,:size => 8,:class=> "text")%> 
```

在我的模型中

```
#deparment Model
has_many :courses
#Course Model
belongs_to :deparment 
```

我想要一种情况，如果一门课程从多选列表中选择了多个部门，则此详细信息将保存在课程表中。My Current Implementation 仅保存课程的第一个选定部门，并丢弃其余部门。请我如何实现这一点。

```
def create
@course = Course.new(params[:course] || [])
if @course.save
  redirect_to courses_path, :notice => "Course Created Successfully"
else
  redirect_to new_course_path
  flash[:alert] = "Error Creating Course"
end
end 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:08:04.690

您将需要两个对象的 Has And Belongs To Many (HABTM) 关联。看看这个：

[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:49:31.733

首先..你应该有这样的联想。

**部门.rb**

```
has_and_belongs_to_many :courses 
```

**课程.rb**

```
has_and_belongs_to_many :departments 
```

而且你可以有这样的**观点/课程/新**的。

```
<%=text_field_tag :course_name)%>
<%=select_tag(:departments, options_from_collection_for_select(Department.all, :id, :name),:multiple =>true,:size => 8,:class=> "text")%> 
```

和**创建动作**将是这样的。

```
def create
  @course = Course.new(params[:course_name] || [])
  if @course.save
    params[:departments].split(',').each do |id|
      @course.departments << Department.find(id)
    end
    redirect_to courses_path, :notice => "Course Created Successfully"
  else
    redirect_to new_course_path
    flash[:alert] = "Error Creating Course"
  end
end 
```

**加入表的迁移**

```
class CreateCoursesDepartments < ActiveRecord::Migration
  def change
    create_table :courses_departments do |t|
      t.integer :course_id
      t.integer :department_id

    end
  end
end 
```

# mysql - is there a type definition similar to the oracle rowtype in mysql

> ID：15223561
> 
> 赞同：4
> 
> 时间：2013-03-05T12:15:01.950
> 
> 标签：mysql

I am developing a procedure where I need to insert all the columns of one table to another table including other calculation.

I have to fetch record by record, manipulate it and transfer it to another table.

is there a type definition similar to the oracle rowtype in mysql???

Any help like example or any link will be very helpful to me.

Thanks in advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T12:28:46.270

不，没有类似的东西。您必须为要获取的每一列声明一个变量（[http://www.mssqlforums.com/fetching-entire-row-cursor-t93078.html](http://www.mssqlforums.com/fetching-entire-row-cursor-t93078.html)）。

有关如何在 SQL-Server 中使用游标的示例，请参阅这篇文章：[Get Multiple Values in SQL Server Cursor](https://stackoverflow.com/questions/4974981/sql-server-cursor)

编辑：抱歉 Miljen Mikic，我的错 - 但对于 mysql 应用相同：请参阅这篇文章：[Conversion of Oracle %ROWTYPE to MySQL](http://doc.ispirer.com/sqlways/Output/SQLWays-1-040.html)

> MySQL 没有相当于 Oracle %ROWTYPE。在 MySQL 中，必须为每一列声明一个变量。

# php - 当 seo 友好 url 设置为 ON 时，如何在 Joomla 3 的菜单 url 中添加 &tmpl=component 参数

> ID：15223563
> 
> 赞同：0
> 
> 时间：2013-03-05T12:15:05.273
> 
> 标签：php, joomla, joomla-template

我想显示没有模板的文章内容（页眉、页脚、侧边栏等）。我只想显示内容。我使用 ajax 获取内容，所以不想在模板中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:12:00.523

由于您的用户可能正在使用一些自定义扩展来处理 SEF，因此最好在进行 ajax 调用时不要通过 JRoute 生成链接，这将使所有参数保持清晰。

如果这不是一个选项，并且您不希望您的模板呈现，您可以在视图的显示方法结束时发出退出命令，这将停止模板处理并获得与 tmpl=component 类似的结果，它只是最有可能不包括标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:37:51.477

在 url 中传递 tmpl=component 会呈现没有模板（页眉、页脚等）的页面，但它仍会呈现

我在模板的根目录中创建了自定义 component_ajax.php 组件文件，并在 ajax 请求中传递了 tmpl=component_ajax。在 component_ajax.php 中删除了所有不需要的部分，只保留。删除了所有其他 html 标签。所以我在 ajax 响应中得到的只是内容。

# c++ - How to perform an operation on a subset of elements in a Boost::uBlas::vector?

> ID：15223568
> 
> 赞同：1
> 
> 时间：2013-03-05T12:15:24.473
> 
> 标签：c++, boost, vectorization, ublas, boost-ublas

Suppose you have a long boost::numeric::ublas::vector and you want to perform an update operation on a subset of the elements. How many of the elements should be updated is somewhere between "all" or "none". Which elements to update is given by a sparse compressed_vector containing a "1" for each element that should be updated.

I could think of two ways to solve this problem:

1.  Just multiplying the right hand side with a mask:

    ```
    using namespace boost::numeric::ublas;
    vector<double> x,some,other,stuff;
    compressed_vector<int> update_mask;
    [...]
    noalias(x) += element_prod(update_mask, some+element_div(other,stuff)) 
    ```

    Problem with this is that it looks quite inefficient: wouldn't ublas calculate the whole vector and then just throw away all unused values in this case (ie. where update_mask==0)?

    I'd expect it to be even slower than just

    ```
    noalias(x) += some+element_div(other,stuff) 
    ```

    which would be horribly inefficient if only a few elements have to be updated.

2.  Loop over all values to update

    ```
    [....]
    for(compressed_vector<int>::iterator it = update_mask.begin(); it!=update_mask.end(); ++it)
        x[it.index()] += some[it.index()]+other[it.index()]/stuff[it.index()]); 
    ```

    The problem with this is that a) it looks awful, b) kinda defeats the purpose of using vectors in the first place and c.) should be horribly inefficient if a lot of indices are to be updated and/or the operation becomes more complex.

Any ideas on how to do this efficiently? I'm pretty sure this is a fairly common problem, but I couldn't find anything useful about it (and the ublas documentation is ... not fun).

# extjs - 如何使我的报告经理字段成为多选或超级框选择？

> ID：15223571
> 
> 赞同：2
> 
> 时间：2013-03-05T12:15:30.570
> 
> 标签：extjs, combobox, extjs4, multi-select

这是我在教程中发现的

```
items: [{
    anchor: '100%',
    xtype: 'multiselect',
    msgTarget: 'side',
    fieldLabel: 'Multiselect',
    name: 'multiselect',
    id: 'multiselect-field',
    allowBlank: false,
    store: {
        fields: ['number', 'numberName'],
        proxy: {
            type: 'ajax',
            url: 'Numbers',
            reader: 'array'
        },
        autoLoad: true
    },
    valueField: 'number',
    displayField: 'numberName',
    value: ['3', '4', '6'],
    ddReorder: true
}]; 
```

但是当我在我的代码中尝试它时发生了错误。除了将 xtype 从`combo`to更改`multiselect`为使其成为之外，还有其他需要做的事情`mutiselect`吗？

```
{
    xtype: 'combo',
    fieldLabel: 'Reporting Manager',
    labelWidth: '130px',
    store: 'LeaveRequest',

    displayField: 'reportingmanager',
    afterLabelTextTpl: required,
    name: 'reportingmanager',
    allowBlank: false,
    //dockedItems: 'multiselect-field',
    afterLabelTextTp1: required
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:19:08.120

Multiselect 是一个用户扩展类，如果您查看教程中代码的开头，则包含 ux 文件。

```
Ext.Loader.setPath('Ext.ux', '../ux');
Ext.require([
    'Ext.form.Panel',
    'Ext.ux.form.MultiSelect',
    'Ext.ux.form.ItemSelector'
]); 
```

您需要包含这些文件才能使多选工作

```
<script type="text/javascript" src="extjs/examples/ux/form/MultiSelect.js"></script>
<script type="text/javascript" src="extjs/examples/ux/form/ItemSelector.js"></script> 
```

如果已加载此文件，请检查您的 firebug/开发人员工具，然后您可以使用 xtype 多选；

# ektron - 在 Ektron 中获取智能表单内容的 HTML

> ID：15223574
> 
> 赞同：2
> 
> 时间：2013-03-05T12:15:41.793
> 
> 标签：ektron

我在 Ektron 8.0 中工作。

我在设置中创建了一个智能表单配置，我为文件夹分配了这个特定的智能表单配置并创建了一个智能表单内容。现在我正在尝试以编程方式访问智能表单内容。我将“XML”数据作为 content.Html 属性获取。有什么方法可以获取与 smartform 内容相对应的 HTML 数据，而不是这些 XML 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:07:06.403

有几种方法可以做到这一点，这里有两种。

**XSLT：**

```
 <CMS:ContentBlock runat="server" Visible="true" DisplayXslt="/xmlfiles/SmartForm.xslt" DefaultContentID="23" /> 
```

SmartForm.xslt 文件将 xml 转换为格式化的 html。

**使用 XSD 在后面的代码中访问 SmartForm 内容。**

这篇文章解释了这个过程。 [http://developer.ektron.com/Templates/KBDetail.aspx?id=603](http://developer.ektron.com/Templates/KBDetail.aspx?id=603)

您需要获取 .xsd 文件的副本并使用它为您的智能表单创建对象定义。

使用 xsd.exe 工具创建一个类。该命令如下所示。

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\xsd.exe" "C:\inetpub\site\xsd\SmartFormContet.xsd" /classes /language:CS /namespace:SmartForm.SmartFormContent 
```

这将生成一个名为 SmartFormContet.cs 的类文件

复制此文件并粘贴到页面后面的代码中。

从 Content.Html 属性反序列化 XML。

# c# - 无法解析符号 x509store

> ID：15223581
> 
> 赞同：0
> 
> 时间：2013-03-05T12:16:00.140
> 
> 标签：c#, windows-phone-7

我有这行代码：

```
X509Store certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser); 
```

它在控制台项目中运行良好，但在我的 Windows Phone 项目中却不行。在 Windows Phone 项目中，找不到 X509store。

为什么不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:24:56.363

[Bouncy Castle](http://www.bouncycastle.org/)让您满意，请查看他们的网站。下载源代码，创建新的 WP7 类库并添加所有文件。它应该编译。不要复制测试文件夹，因为它依赖于 NUnit 进行测试，您将不需要它。

那么你的应用程序的其余部分呢，你想要什么证书？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:29:58.547

对于 .NET compact framework / Windows Phone 应用程序，这里有一个解决方案：

[有没有办法在 .NET CF 中使用 X509Store？](https://stackoverflow.com/questions/2908097/is-there-any-way-to-use-x509store-in-net-cf).

# javascript - 如何将类添加到特定的 li？

> ID：15223582
> 
> 赞同：4
> 
> 时间：2013-03-05T12:16:01.097
> 
> 标签：javascript, jquery

我有这个 HTML：

```
<ul class="how-long">
    <li value="1">Any</li>
    <li value="1">1 day</li>
    <li value="2">Week end</li>
    <li value="7">1 Week</li>
    <li value="14">2 Week</li>
    <li value="21">3 Week</li>
</ul> 
```

准备好文档后，我想向第 4 个 li 元素添加新类。

这是我尝试过的：

```
$(".how-long li").slice(3).addClass('change-color'); 
```

如果我将警报设置为：

```
alert($(".how-long li").slice(3).html()); 
```

它给了我 **1 周**的时间，这是正确的，但是当我添加类时，该类在第 4 li 之后被添加到所有 li。

我想在不向每个 li 元素**添加 ID的情况下这样做。**我可以直接在 li 元素中对类进行硬编码，但我想使用 jQuery 动态地进行编码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T12:18:13.653

要在一个选择器中执行此操作，请使用`nth-child`or `eq`：

`nth-child`速度**要快得多**，请在此处查看我的 jsPerf：http: [//jsperf.com/nth-child-vs-eq](http://jsperf.com/nth-child-vs-eq)

![jsperf](../Images/21ce304061345cf30a89336c1799acbd.png)

`nth-child`：

```
$(".how-long li:nth-child(4)").addClass('change-color'); 
```

`eq`：

```
$(".how-long li:eq(3)").addClass('change-color'); 
```

根本区别在于，它将为您提供该类的**每个项目**`nth-child`的第 4 个元素（无论它是否是当前项目的子项），而将为您提供当前项目的子项。**`eq`**

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T12:17:10.153

```
$(".how-long li").eq(3).addClass('change-color'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T12:18:58.990

slice 不返回 jQuery 对象，因此您不能使用方法 addClass。做你想做的事情的正确方法是：

按索引：

```
$(".how-long li").eq(3).addClass('change-color'); 
```

通过引用值：

```
$(".how-long li[value=7]").addClass('change-color'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:21:19.970

如果要使用 slice 方法，则需要指定缺少的 end 属性

```
$(".how-long li").slice(3,4).addClass('change-color'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T12:22:52.237

它选择第 4 个，因为数组索引从 0 开始。

你总是可以使用 $('.how-long li:nth-child(4)');

更多信息在这里：[http ://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T12:29:32.593

您可以使用第[n 个子选择器](http://api.jquery.com/nth-child-selector/)：

```
 $(".how-long li:nth-child(4)").addClass('change-color');

 alert($(".how-long li:nth-child(4)").html()); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-05T12:20:15.233

这样做

```
$(".how-long li:nth-child(4)").attr({'class':'test'}); 
```

这将把类添加`test`到第 4 li

希望这个问题**

# c# - 64 位类型库和 32 位类型库不同步

> ID：15223584
> 
> 赞同：7
> 
> 时间：2013-03-05T12:16:04.877
> 
> 标签：c#, .net, com, regasm

这个问题让我头疼了好几天，一直找不到原因。我很确定这是我的机器特有的环境问题，但它仍然给我带来了测试问题。

我正在使用 Visual Studio 2010 Professional 在 C# 中创建一个 DLL。第一版如下；

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace TestCOM
{
    [ClassInterface(ClassInterfaceType.AutoDual)]
    [System.Runtime.InteropServices.ComVisible(true)]
    [System.Runtime.InteropServices.ProgId("TestCOM.Class1")]
    [System.Runtime.InteropServices.Guid("803A1B2F-1CDA-4571-9084-87500388693B")]
    public class Class1
    {
        public void showMessage()
        {
            MessageBox.Show("Hello from TextCom");
        }

    }
} 
```

这个程序集编译得很好，一切都很好。我运行以下脚本将其注册为 COM 对象（首先是 32 位，然后是 64 位）；

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\regasm.exe TestCOM.dll /codebase /nologo /tlb:TestCOM32.tlb
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\regasm.exe TestCOM.dll /codebase /nologo /tlb:TestCOM64.tlb 
```

然后使用以下脚本对其进行测试；

```
dim tc 
set tc = CreateObject("TestCOM.Class1")
tc.showMessage() 
```

我使用 csript 来测试脚本，所以我可以控制它使用的位深度——我用 32 位测试一次，用 64 位测试一次。到目前为止一切都很好。

现在，当我修改原始程序集添加一个功能时，如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace TestCOM
{
    [ClassInterface(ClassInterfaceType.AutoDual)]
    [System.Runtime.InteropServices.ComVisible(true)]
    [System.Runtime.InteropServices.ProgId("TestCOM.Class1")]
    [System.Runtime.InteropServices.Guid("803A1B2F-1CDA-4571-9084-87500388693B")]
    public class Class1
    {
        public void showMessage()
        {
            MessageBox.Show("Hello from TextCom");
        }

        public void HelloWorld()
        {
            MessageBox.Show("Hello World!!");
        }

    }
} 
```

在修改之前，我使用“regasm /unregister”注销了库，它报告了所有类型的注销成功。

当我注册库时，现在进行了更改，原始测试脚本可以完美运行。如果我扩展测试脚本来调用新的 HelloWorld 函数；

在 32 位脚本中，它可以完美运行。在 64 位脚本中，它抱怨 TestCOM.Class1 对象不存在这样的函数

我已经尽我所能尝试了这个，但我无法确定为什么新函数对 32 位调用者可用，但对 64 位调用不可用。

我究竟做错了什么 ？我不知道的 64 位内容是否有缓存，或者需要更改的注册表设置？

要清楚；1\. 构建程序集 2\. 使用 regasm 注册，一次用于 32，一次用于 64 3\. 使用脚本测试 - 一切正常 4\. 取消注册库 5\. 进行修改，重建 6\. 按照步骤 2 注册 7\. 测试工作在 32 位, 但不是 64\. wtf ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:51:24.160

显然，您正遭受 DLL Hell 的折磨，COM 总是在附近，它正在加载您的 DLL 的旧版本。你的 GAC 可能已经被早期的实验污染了，它总是会首先找到 GACed 版本。您通过指定 [Guid] 使情况变得更糟，使您的新类看起来与旧类相同，即使它并不相同。防止 COM 告诉您它找不到该类的新版本。

查看 DLL 来自何处的最可靠（尽管有噪声）的方法是使用 SysInterals 的 ProcMon 实用程序。您将看到它读取注册表项并加载 DLL。你可以看到它来自哪个目录。确保它不是 GAC，如果是这种情况，请使用 gacutil /u 将其删除，并确保通过检查文件上的时间戳来重建它。

# sql - Sql 查询从不同的表中查找总和

> ID：15223589
> 
> 赞同：1
> 
> 时间：2013-03-05T12:16:15.343
> 
> 标签：sql, sql-server-2008

嗨，我在编写查询时需要帮助。

表格是：

```
tblStandard1students
tblStandard2students
tblStandard1students
tblDivision
tblCandidateinfo 
```

tblStandard1students,tblStandard2students,tblStandard1studentstbl 包含有关参加标准 1,2 和 3 的学生的信息

tblStandrs1students

```
Candid  admitted
  1        Y
  2        N
  3        Y 
```

tblDivision 仅包含 2 列

```
 ID     Division
  1       A
  2       B
  3       C 
```

tbl候选人信息

```
Candid  gender Division
  1       M      1
  2       F      2 
```

等等...

现在我想要这样的桌子

```
Division  Students(Standard1)  Students(Standard2)  Students(Standard3)
           M           F         M          F        M          F
------------------------------------------------------------------------
 A         1           0         0          0         0         1
 B         2           2         3          3         4         4
 C         1           0         0          0         0         0 
```

我尝试了以下查询：

```
SELECT Division,

    ( SELECT count(*)
     FROM tblStandard1students A
     INNER JOIN tblCandidateinfo B ON A.Candid=B.Candid
     INNER JOIN tblDivision C ON C.ID=B.Division) AS Students(Standard1),

    ( SELECT count(*)
     FROM tblStandard2students A
     INNER JOIN tblCandidateinfo B ON A.Candid=B.Candid
     INNER JOIN tblDivision C ON C.ID=B.Division) AS Students(Standard2),

    ( SELECT count(*)
     FROM tblStandard3students A
     INNER JOIN tblCandidateinfo B ON A.Candid=B.Candid
     INNER JOIN tblDivision C ON C.ID=B.Division ) AS Students(Standard3)
FROM tblDivision Z 
```

但这只是我按性别区分的查询的一半……帮助我完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:46:56.573

```
;WITH combined AS
(
    SELECT ci.Division, 'Students(Standard1) ' + ci.gender AS grp
    FROM tblCandidateInfo ci
    INNER JOIN tblStandard1students s ON ci.Candid = s.Candid
    UNION ALL
    SELECT ci.Division, 'Students(Standard2) ' + ci.gender AS grp
    FROM tblCandidateInfo ci
    INNER JOIN tblStandard2students s ON ci.Candid = s.Candid
    UNION ALL
    SELECT ci.Division, 'Students(Standard3) ' + ci.gender AS grp
    FROM tblCandidateInfo ci
    INNER JOIN tblStandard1studentstbl s ON ci.Candid = s.Candid
)
SELECT Division, 
    [Students(Standard1) M], [Students(Standard1) F],
    [Students(Standard2) M], [Students(Standard2) F],
    [Students(Standard3) M], [Students(Standard3) F]
FROM
(
    SELECT d.Division, grp
    FROM tblDivision d
    LEFT OUTER JOIN combined c ON d.ID = c.Division
) x
PIVOT
(
    COUNT(grp)
    FOR grp IN ([Students(Standard1) M], [Students(Standard1) F],
        [Students(Standard2) M], [Students(Standard2) F],
        [Students(Standard3) M], [Students(Standard3) F])
) y
ORDER BY Division 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:08:40.607

选择 divison.Division ,IFNULL(stander1.M,0),IFNULL(stander1.F,0) FROM `test`。`tblDivision`divison Left join (SELECT division ,count(case gender when 'M' then 1 else null end) as M,count(case gender when 'F' then 1 else null end) as F FROM .tc inner join test.tblStandars1students `test`ts1`tblCandidateinfo`

ON tc.Candid=ts1.Candid

```
group by division) as stander1 on stander1.division= divison.id 
```

按 divison.id 分组；

Insted of IFNULL 使用 ISNULL 并对所有标准表进行左连接

# supercsv - 将 CsvListReader 限制为一行

> ID：15223593
> 
> 赞同：0
> 
> 时间：2013-03-05T12:16:30.343
> 
> 标签：supercsv

我正在开发处理大型 CSV 文件（数百 MB）的应用程序。最近我遇到了一个问题，起初看起来像是应用程序中的内存泄漏，但经过一番调查，它似乎是格式错误的 CSV 和 CsvListReader 尝试解析永无止境的行的组合。结果，我得到了以下异常：

```
at java.lang.OutOfMemoryError.<init>(<unknown string>)
at java.util.Arrays.copyOf(<unknown string>)
   Local Variable: char[]#13624
at java.lang.AbstractStringBuilder.expandCapacity(<unknown string>)
at java.lang.AbstractStringBuilder.ensureCapacityInternal(<unknown string>)
at java.lang.AbstractStringBuilder.append(<unknown string>)
at java.lang.StringBuilder.append(<unknown string>)
   Local Variable: java.lang.StringBuilder#3
at org.supercsv.io.Tokenizer.readStringList(<unknown string>)
   Local Variable: java.util.ArrayList#642
   Local Variable: org.supercsv.io.Tokenizer#1
   Local Variable: org.supercsv.io.PARSERSTATE#2
   Local Variable: java.lang.String#14960
at org.supercsv.io.CsvListReader.read(<unknown string>) 
```

通过基于转储结果分析堆转储和 CSV 文件，我注意到 CSV 行之一中的一列缺少右引号，这显然导致读者试图通过将文件内容附加到内部字符串缓冲区直到出现不再是堆内存。

无论如何，这就是问题所在，这是由于 CSV 格式错误 - 一旦我删除了关键行，问题就消失了。我想要实现的是告诉读者：

*   它应该解释的所有内容总是以换行符结尾，即使引号没有正确关闭（不支持多行）
*   或者，提供 CSV 行的特定限制（以字节为单位）

使用 CsvListReader（在我的情况下首选）在 SuperCSV 中是否有一些明确的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:07:52.247

该[问题](http://sourceforge.net/p/supercsv/bugs/31/)已被报告，我目前正在开发一些增强功能（用于未来的主要版本），这应该会使这两个选项更容易一些。

现在，您必须向读者提供您自己的 Tokenizer（因此 Super CSV 使用您的而不是它自己的）。我建议您复制一份 Super CSV 的[Tokenizer](http://supercsv.sourceforge.net/xref/org/supercsv/io/Tokenizer.html)并根据您的更改进行修改。这样您就不必修改 Super CSV，也不会浪费时间。

# python - 在循环初始化的内联中引用一个列表？

> ID：15223594
> 
> 赞同：1
> 
> 时间：2013-03-05T12:16:30.433
> 
> 标签：python, list, for-loop, initialization, inline

我希望能够写出这样的东西：

```
x = [0]
x = [x[i-1] for i in range(1,10)] 
```

我知道这个例子没有任何意义。但我想知道是否可以使用以前计算的值，同时以这种方式初始化列表。（也许是某种 lambda 表达式）

这是我需要的实际代码：

```
x = [(b[i] - sum([(a[i][j] * x[j]) for j in range(i)])) / a[i][i] for i in range(n)] 
```

这当然会出现以下错误：

```
UnboundLocalError: local variable 'x' referenced before assignment 
```

我知道有这种方法：

```
x = []
for i in range(n):                        
    x.append((b[i] - sum([(a[i][j] * x[j]) for j in range(i)])) / a[i][i]) 
```

但我真的很想知道第一个是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:27:47.650

即使有可能，我认为您甚至都不应该尝试这样做。*由于嵌套列表理解甚至不是该行的外部*部分，“冗长”的三行解决方案已经相当复杂。你里面还有一笔钱。

实际上，我什至将其拆分得更多，以便像这样分别进行列表理解：

```
x = []
for i in range(n):
    k = sum(a[i][j] * x[j] for j in range(i))
    x.append((b[i] - k) / a[i][i]) 
```

我相信可以进一步简化这一点，但如果没有任何关于它实际作用的上下文，也没有 , 和 的示例数据，仅通过这样看待它很难说`a`清楚。`b``n`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:35:17.447

尽管我完全同意您想要的不是一个好习惯。有一种方法可以做到（有点）。例如，让我们看看这个：

```
x = [1]
z = [x.append(x[i]*2) for i in range(10)] 
```

现在我们自然有：

```
>>> print z
[None, None, None, None, None, None, None, None, None, None] 
```

但是，`x`保持我们想要的值：

```
>>> print x
[1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024] 
```

因此，您可以以类似的怪异方式执行以下操作：

```
x = [some_init_value]
[x.append((b[i] - sum([(a[i][j] * x[j]) for j in range(i)])) / a[i][i]) for i in range(n)] 
```

请注意，这是**就地**`x`更改的，我们没有将列表推导分配给，因为列表推导将返回一堆s。**`x``None`**

 **我想强调这是**不好的**。良好实践表明列表推导不应该有副作用（就像我们的那样）。

**编辑**：显然在 CPython <= 2.6 中你有这个“病态的黑客”，其中列表理解有一个隐藏的值。[eryksun](https://stackoverflow.com/users/205580/eryksun)对斐波那契数列的绝妙破解：

```
fib = [[0,1][j] if j<2 else locals()['_[1]'][j-1] + locals()['_[1]'][j-2] for j in range(10)] 
```

自然，这在 CPython 2.7 和 PyPy 上失败了。**

# android - 如何从联系人列表中读取联系人姓名和号码

> ID：15223596
> 
> 赞同：0
> 
> 时间：2013-03-05T12:16:33.330
> 
> 标签：android

我正在尝试从用户联系人列表中读取联系人号码。这是我的代码

```
Cursor cursor = getContacts();
if(cursor.getCount()>0){
    while (cursor.moveToNext()) {
        String displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
        int numberField = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
        textViewDisplay.append("Name: ");
        textViewDisplay.append(displayName+"Number :"+numberField);
        textViewDisplay.append("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:27:37.830

你正在`cursor.getColumnIndex(COLUMN)`接受`int`. 所以它所说的方法返回`COLUMN`发送给它的索引作为参数。您需要永远不会包含的电话号码，`int`因为它的大小始终大于 4 个字节，并且它还包含一些特殊字符，例如`+`

所以你需要把你`Number`的一些`String`变量

采用`String numberField = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));`

正如 Anuj 所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:24:24.363

用这个

```
String numberField = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)); 
```

代替

```
int numberField = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:26:49.783

返回“1”表示联系人有电话号码。试试这个，

```
 String hasPhone = c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
                      String cNumber="";
                      if (hasPhone.equalsIgnoreCase("1")) 
                      {
                          Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null, 
                          ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ id,null, null);
                          phones.moveToFirst();
                          cNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                          phones.close();

                      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:39:14.880

试试这个：

```
public void readContacts() {
            ContentResolver cr = getContentResolver();
            Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,null, null, null);
            if (cur.getCount() > 0) {
                while (cur.moveToNext()) {
                    if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                        // Get contact id (id)
                        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID)); 

                        // Get contact name (displayName)
                        String displayName = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                        // Get Phone Number.... 

                        Uri URI_PHONE = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
                        String SELECTION_PHONE = ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = ?";
                        String[] SELECTION_ARRAY_PHONE = new String[] { id };

                        Cursor currPhone = cr.query(URI_PHONE, null,SELECTION_PHONE, SELECTION_ARRAY_PHONE, null);
                        int indexPhoneNo = currPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
                        int indexPhoneType = currPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE);

                        if (currPhone.getCount() > 0) {

                            while (currPhone.moveToNext()) {
                                String phoneNoStr = currPhone.getString(indexPhoneNo);
                                String phoneTypeStr = currPhone.getString(indexPhoneType);
                            }
                        }
                        currPhone.close();
                    }
                }
            }
            cur.close();
        } 
```

# php - 导出 SQL 数据库

> ID：15223600
> 
> 赞同：1
> 
> 时间：2013-03-05T12:16:41.437
> 
> 标签：php, mysql, phpmyadmin

在 phpMyAdmin 中，有一个选项可以将整个表（或数据库）导出到 .SQL 文件中。

我无法弄清楚他们是如何做到这一点的——因为我想把它放到 CRON 工作中，每天和每周备份数据库。但似乎没有任何单一的命令可以做到这一点 - 有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:45:55.930

您可以使用 PHP 运行这些命令，将以下代码复制到文件中并使用 cron 作业执行它。

```
<?php

//Backup:

//ENTER THE RELEVANT INFO BELOW
$mysqlDatabaseName ='databasename';
$mysqlUserName ='username';
$mysqlPassword ='password';
$mysqlHostName ='localhost';
//$mysqlExportPath ='database.sql';

$mysqlImportFilename ='myownsit_obsolcms.sql';

//DONT EDIT BELOW THIS LINE
//Export the database and output the status to the page
$command='mysql -h' .$mysqlHostName .' -u' .$mysqlUserName .' -p' .$mysqlPassword .' ' .$mysqlDatabaseName .' < ' .$mysqlImportFilename;
exec($command,$output=array(),$worked);
switch($worked){
    case 0:
        echo 'Import file <b>' .$mysqlImportFilename .'</b> successfully imported to database <b>' .$mysqlDatabaseName .'</b>';
        break;
    case 1:
        echo 'There was an error during import. Please make sure the import file is saved in the same folder as this script and check your values:<br/><br/><table><tr><td>MySQL Database Name:</td><td><b>' .$mysqlDatabaseName .'</b></td></tr><tr><td>MySQL User Name:</td><td><b>' .$mysqlUserName .'</b></td></tr><tr><td>MySQL Password:</td><td><b>NOTSHOWN</b></td></tr><tr><td>MySQL Host Name:</td><td><b>' .$mysqlHostName .'</b></td></tr><tr><td>MySQL Import Filename:</td><td><b>' .$mysqlImportFilename .'</b></td></tr></table>';
        break;
}

//Restore:
$mysqlExportPath ='path_to_file/database.sql';

//DONT EDIT BELOW THIS LINE
//Export the database and output the status to the page
$command='mysqldump --opt -h' .$mysqlHostName .' -u' .$mysqlUserName .' -p' .$mysqlPassword .' ' .$mysqlDatabaseName .' admin contents categires google_map cms_labels news pages page_contents partners photos plugins products social testimonials themes users youtube> ~/' .$mysqlExportPath;
//$command = "$ mysqldump -u $mysqlUserName -p $mysqlPassword $mysqlDatabaseName > myownsit_obsolcms.sql";
exec($command,$output=array(),$worked);
switch($worked){
    case 0:
        //echo 'Database <b>' .$mysqlDatabaseName .'</b> successfully exported to <b>~/' .$mysqlExportPath .'</b>';
        break;
    case 1:
        echo 'There was a warning during the export of <b>' .$mysqlDatabaseName .'</b> to <b>~/' .$mysqlExportPath .'</b>';
        break;
    case 2:
        echo 'There was an error during export. Please check your values:<br/><br/><table><tr><td>MySQL Database Name:</td><td><b>' .$mysqlDatabaseName .'</b></td></tr><tr><td>MySQL User Name:</td><td><b>' .$mysqlUserName .'</b></td></tr><tr><td>MySQL Password:</td><td><b>NOTSHOWN</b></td></tr><tr><td>MySQL Host Name:</td><td><b>' .$mysqlHostName .'</b></td></tr></table>';
        break;
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:19:54.933

是的，mysqldump： http: [//linuxcommand.org/man_pages/mysqldump1.html](http://linuxcommand.org/man_pages/mysqldump1.html)

不过，您需要拥有服务器访问权限才能使用它。此外，如果您喜欢冒险并希望保持一致的备份，请查找有关主/从设置的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:26:13.527

使用 mysqldump

```
 mysqldump -h hostname -u user -pPassword dbname >/path/to/file 
```

如果主机是本地主机，主机是可选的。根据某些设置，用户和密码也可能是可选的。请注意，您可能需要添加日期名称

```
 mysqldump -h hostname -u root mydb > /path/to/backup/$(date +%a) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:21:37.457

您可以创建一个 shell 脚本并通过 cron 作业调用该脚本。请参阅此工作[示例](http://blog.sleeplessbeastie.eu/2012/11/22/simple-shell-script-to-backup-mysql-databases/)

# php - 删除 cookie 不起作用

> ID：15223602
> 
> 赞同：2
> 
> 时间：2013-03-05T12:16:45.410
> 
> 标签：php, session, cookies, setcookie

你好，我正在疯狂地解决我试图获取的问题。

我无法像这样删除将在 index.php 上设置的 cookie：

```
$a = 'text';
setcookie('name_of_cookie', $a, time()+60*60*24*365); 
```

在 page-php 上，我可以调用该 cookie，内容就像 $a。我试图像这样在 page.php 上删除不同的方式：

```
setcookie('name_of_cookie', FALSE, time()-3600); 
```

我还找到了一个版本，我只将其设置为：

```
setcookie('name_of_cookie'); 
```

什么会像我在浏览器的设置中看到的那样设置另一个同名的cookie。该新 cookie 没有内容 - 当然，没有声明任何内容。

由于服务器位置，我还尝试在过去设置更高的时间，但这也不起作用。即使试图将时间设置为只是`1`不起作用。

我检查了几次名字的拼写，没有失败来自不同的名字。

如果有人能告诉我我做错了什么，我会很高兴？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T12:27:20.703

当您设置 cookie 时，请**非常具体地说明您是如何设置它们**的。**始终设置域名**（可以从 $_SERVER['SERVER_NAME'] 获取）**和路径**（我通常设置为“/”）。如果您不一致，某些事情可能会采取“聪明”的主动性并打破您的逻辑。当您在 JS 中设置 cookie 并尝试从 PHP 中删除它们（或相反）时，经常会发生这种情况。您可能有多个名称相同但子域或路径不同的 cookie。

例如，您这样设置 cookie：

```
setcookie( 'Foo', 'Bar', time() + 3600, '/', $_SERVER['SERVER_NAME'] ); 
```

你像这样取消它们：

```
setcookie( 'Foo', '', time() - 999999, '/', $_SERVER['SERVER_NAME'] ); 
```

缺少最后两个参数将使您处于当前的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:26:12.043

删除每个 cookie，如下所示。

```
if (isset($_SERVER['HTTP_COOKIE']))
{
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie) {
        $parts = explode('=', $cookie);
        $name = trim($parts[0]);
        setcookie($name, '', time()-1000);
        setcookie($name, '', time()-1000, '/');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-11T09:32:25.837

设置cookie时始终设置路径，否则不会破坏

# php - 数组的 PHP 中的 settype() 产生不同的输出

> ID：15223605
> 
> 赞同：0
> 
> 时间：2013-03-05T12:16:47.447
> 
> 标签：php

代码 1：从 Excel 工作表中读取数据。包含 12 个不同的值。

值为：48,600,5.3,5,1500,6000,85,30,70,30,70,14。

```
$BATTCONFIG=$objPHPExcel->getActiveSheet()->rangetoArray('C9:C20',null,true,true,true); 
```

代码 2：尝试使用 FOR 循环将数组 $BATTCONFIG 中的所有 VALUES 转换为 INTEGER。

```
$y1 = (array_values($BATTCONFIG));
var_dump(y1);
for( $i=0 ; $i<=11 ; $i++ )
{
    settype($y1[$i], "integer"); 
}
var_dump($y1); 
```

但我没有得到想要的输出，我得到的所有值都是 1 。

我的输出：

在 SETTYPE() 之前：

```
 array (size=12)
 0 => 
   array (size=1)
  'C' => float 48
1 => 
array (size=1)
  'C' => int 600
2 => 
array (size=1)
  'C' => float 0.3
3 => 
array (size=1)
  'C' => int 5
4 => 
array (size=1)
  'C' => float 1500
5 => 
array (size=1)
  'C' => int 6000
6 => 
array (size=1)
  'C' => int 85
7 => 
array (size=1)
  'C' => int 30
8 => 
array (size=1)
  'C' => int 70
 9 => 
array (size=1)
  'C' => int 30
10 => 
  array (size=1)
  'C' => int 70
 11 => 
array (size=1)
  'C' => float 14 
```

在 SETTYPE() 之后：

```
array (size=12)
0 => int 1
1 => int 1
2 => int 1
3 => int 1
4 => int 1
5 => int 1
6 => int 1
7 => int 1
8 => int 1
9 => int 1
10 => int 1
11 => int 1 
```

请帮帮我。我需要这些整数值作为输出来绘制我的图表。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:22:02.967

用它的值填充 $y1 时肯定有另一个错误。想象一下这个按预期工作的简化示例：

```
$arr = array('1','2','3','4','5');
for ($i = 0; $i < 5; $i++) {
    settype($arr[$i], "integer");
}

var_dump($arr); 
```

什么给了你：

```
array(5) {
  [0] =>
  int(1)
  [1] =>
  int(2)
  [2] =>
  int(3)
  [3] =>
  int(4)
  [4] =>
  int(5)
} 
```

* * *

在编辑问题后（现在在转换之前有 $y1 ）它指出，您不知道 $y1 是多维数组。您必须将代码更改为如下所示：

```
$ints = array(); 
foreach($y1 as $index => $cell) {
    $values = array_values($cell);
    $ints []= intval(round($values[0]));
}

var_dump($ints); 
```

另请注意，您正在尝试使用 settype() 函数将浮点数转换为 int。我会用`round()`它

# c# - 当我将日期和时间转换为仅时间时，单元格变为只读

> ID：15223608
> 
> 赞同：1
> 
> 时间：2013-03-05T12:16:51.927
> 
> 标签：c#, database, date

我想了解这背后的概念。

我正在用 c# 创建一个数据库。现在，我希望只有日期而不是日期和时间。

因此，我在 sql 查询窗格中使用了以下命令：

`SELECT CONVERT(varchar, deal_start_date, 101) AS 'deal_start_date' FROM client`

期望的结果来了，但数据变为只读，因此无法编辑。

![结果是按此快照](../Images/d83e648f10d86ac390d0728ec6e69ca3.png)

此外，它不会永久保留。我`show table data`的意思是，再次点击日期时间格式。

谁能告诉我为什么单元格变为只读以及如何仅通过 UI 永久保留更改？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:21:21.183

我对只读部分的猜测是，由于您现在正在转换原始值，因此您松开了指向数据库中列的链接。就像无法编辑计算列一样（例如，您将如何从定义为`A+B as 'C'`.

您在 GUI 中显示的是哪种类型的组件？也许您可以将查询保留为`SELECT deal_start_date FROM client`，并从组件中过滤掉时间部分？

或者，如果您不使用应用程序中任何其他位置的时间，请将数据库中的列从更改`datetime`为`date`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:58:31.720

我没有得到完美的答案，但我找到了替代方案。我在 MS SQL 数据库中尝试使用 datetime 数据类型。当我将其更改为 varchar(12) 时，我得到了想要的结果。即日期格式。（感谢*Øyvind Knobloch-Bråthen*提供的见解）

这实际上是不合适的，因为 varchar 中的大小为 12，时间部分被截断。（如果增加 varchar 的大小，时间部分将出现）但这符合我的目的。

但我仍在等待一个正确的答案，如果有的话。

# android - 在 ActionBar 上显示 SearchView 的软键盘

> ID：15223623
> 
> 赞同：14
> 
> 时间：2013-03-05T12:17:41.860
> 
> 标签：android, actionbarsherlock

我们在 ActionBar 上有一个 SearchView，它被设置为非图标化。由于在用户输入要搜索的内容之前我们在视图中没有任何内容，因此给予 SearchView 初始焦点是有意义的，并确保软键盘显示为用户输入文本做好准备 - 否则他们'总是必须先点击 SearchView。

我可以通过调用给 SearchView 焦点

```
searchView.requestFocus(); 
```

但我无法让软键盘出现。在我们的另一个片段中，我有一个 EditText 我们想要集中注意力我*可以*通过调用让软键盘出现在那里

```
InputMethodManager mgr = (InputMethodManager)getActivity().getSystemService(
            Context.INPUT_METHOD_SERVICE);
mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

但这在 SearchView 上不起作用。肯定有可能让它发挥作用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T13:43:20.853

进一步翻找 StackOverflow，我发现了这个问题：

[强制打开软键盘](https://stackoverflow.com/questions/2479504/forcing-the-soft-keyboard-open)

其中包含一个对我有用的解决方案：

```
((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).
    toggleSoftInput(InputMethodManager.SHOW_FORCED,
                    InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-14T13:41:16.643

我有一个类似的问题，这里提出的解决方案都不起作用。有些根本没有使键盘出现，有些则显示键盘，但是那里的按键不起作用。

唯一有效的是：

```
 // hack for making the keyboard appear
                    searchView.setIconified(true);
                    searchView.setIconified(false); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-26T17:21:48.320

我正在使用带有 setIconifiedByDefault(false) 的 SearchView。使用 Android 4.4.2 进行测试，我可以让键盘实际显示的唯一方法是查看 SearchView 的源代码并模仿它如何请求显示键盘。我已经尝试了我能找到/想到的所有其他方法，这是我能让键盘可靠显示的唯一方法。不幸的是，我的方法需要一些反思。

在 onCreateOptionsMenu(Menu) 中：

```
searchView.requestFocus();
searchView.post(new Runnable() {
    @Override
    public void run() {
        showSoftInputUnchecked();
    }
}); 
```

然后在InputMethodManager中创建一个调用隐藏方法“showSoftInputUnchecked”的方法：

```
private void showSoftInputUnchecked() {
    InputMethodManager imm = (InputMethodManager)
            getSystemService(Context.INPUT_METHOD_SERVICE);

    if (imm != null) {
        Method showSoftInputUnchecked = null;
        try {
            showSoftInputUnchecked = imm.getClass()
                    .getMethod("showSoftInputUnchecked", int.class, ResultReceiver.class);
        } catch (NoSuchMethodException e) {
            // Log something
        }

        if (showSoftInputUnchecked != null) {
            try {
                showSoftInputUnchecked.invoke(imm, 0, null);
            } catch (IllegalAccessException e) {
                // Log something
            } catch (InvocationTargetException e) {
                // Log something
            }
        }
    }
} 
```

与访问不在公共 API 中的方法的所有解决方案一样，我不能保证这不会与新版本的 Android 发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T05:34:36.653

它对我有用。

```
private SearchView mSearchView;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);

    SearchManager searchManager =
            (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    MenuItem searchItem = menu.findItem(R.id.action_search);
    mSearchView =
            (SearchView) searchItem.getActionView();
    mSearchView.setSearchableInfo(
            searchManager.getSearchableInfo(getComponentName()));

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();
    if (id == R.id.action_search) {
        mSearchView.setIconifiedByDefault(true);
        mSearchView.setFocusable(true);
        mSearchView.setIconified(false);
        mSearchView.requestFocusFromTouch();
    }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-11T02:13:10.267

如果您想显示软键盘并专注于输入框，您可以尝试

```
final MenuItem menuItem = menu.findItem(R.id.action_search);
menuItem.expandActionView();//expand show soft keyboard

 <item
    android:id="@+id/action_search"
    android:icon="@drawable/ic_actionbar_search"
    liven:showAsAction="collapseActionView|always" //always
    liven:actionViewClass="android.support.v7.widget.SearchView" />enter code here 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-28T09:38:36.737

每次您进行活动时，这都不会显示键盘

searchview.clearFocus();

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-05T12:31:08.183

使用 expandView 方法：您的 onCreateOptionsMenu 可能是这样的：

```
 @Override                                                                                                     
       public boolean onCreateOptionsMenu(Menu menu) {                                                          
 //Used to put dark icons on light action bar                                                              

     final SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());                   

       MenuItem mitem = menu.add("Search");                                                                  

       mitem.setIcon(ic_search_inverse)                                                                      
            .setActionView(searchView)                                                                       
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

        mitem.expandActionView();                                                      

        listsearch.setOnItemClickListener(this);                                                             

 return     true;                                                                                              
      } 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-08-20T16:16:12.557

你可以试试我做的。这对我来说效果很好。

```
 //set query change listener
     searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener(){
        @Override
        public boolean onQueryTextChange(String newText) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean onQueryTextSubmit(String query) {
            /**
             * hides and then unhides search tab to make sure keyboard disappears when query is submitted
             * 4 = INVISIBLE
             * 0 = VISIBLE
             */
                  searchView.setVisibility(4);
                  searchView.setVisibility(0);
            return false;
        }

     }); 
```

# jax-ws - 如何在 JAX-WS WebMethod 上使用 JSR-303 Bean 验证？

> ID：15223624
> 
> 赞同：3
> 
> 时间：2013-03-05T12:17:44.077
> 
> 标签：jax-ws, bean-validation

我想在我的 Web 服务中使用 bean 验证。最好的方法类似于这样的 Spring MVC 绑定：

```
@WebMethod void sayHello(@Valid HelloDTO hello) {...} 
```

目标是摆脱 Web 服务实现中的所有验证方法。我想将验证作为横切关注点来处理。

据我所知，Hibernate Validator >4.2 以及 Apache BeanValidation 应该能够验证方法参数。但我不知道如何挂钩到 JAX-WS 方法参数绑定。

我尝试编写一个拦截消息的处理程序，但我很难以一般方式解组有效负载，因为我无法确定参数是什么。此外，处理程序将是一个非常严格的验证。我想让 Web 服务的开发人员决定是否要验证输入参数。

**编辑**：
与此同时，我找到了一个使用 Spring AOP 来拦截对端点的调用的解决方案。但是，使用处理程序的解决方案会更好，因为验证的横切关注点将定义在一个更好的、预定义的位置：处理程序链。

这是 Spring 解决方案：

创建方面：

```
@Aspect
public class ValidationAspect {
    @Autowired private Validator validator;

    // Alternative: use @annotation(javax.validation.Valid) to validate only methods annotated with @Valid
    @Pointcut("execution(* (@javax.jws.WebService *).*(..))")
    public void webServiceWebMethods() {}

    @Before("webServiceWebMethods()")
    public void validateWebService(JoinPoint jp) throws WebParamValidationFault {
        for (Object arg : jp.getArgs()) {
            Collection<ConstraintViolation<Object>> errors = validator.validate(arg);
            // check validation and throw exception if errors occured
        }
    } 
```

配置 Spring-AOP：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

    <aop:aspectj-autoproxy proxy-target-class="true" />
    <bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />
    <bean id="validationAspect" class="ValidationAspect" />
</beans> 
```

这`proxy-target-class="true"`将启用 cglib 代理。这是必要的，因为 JAX-WS 运行时无法使用 Web 服务的 JDK 动态代理。原因是，这`@WebService`是不可继承的，并且代理声称缺少注释。解决方法是使用cglib **，并**声明web服务Spring绑定的实现类：

```
<wss:binding url="/demo">
    <wss:service>
        <ws:service bean="#DemoEndpoint" impl="com.example.DemoEndpoint" />
    </wss:service>
</wss:binding> 
```

任何不使用方面的解决方案都值得赞赏。

# log4net-configuration - log4net 安全上下文找不到域

> ID：15223626
> 
> 赞同：2
> 
> 时间：2013-03-05T12:17:49.560
> 
> 标签：log4net-configuration

我有一个配置文件来记录到 SQL 服务器数据库。当我使用 sql 帐户时，日志记录工作正常，但我需要使用 windows 帐户来访问数据库。因此，我更改了配置文件以包含 SecurityContext。

```
<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
<bufferSize value="1" />
<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
<connectionString value="data source=SERVER;initial catalog=DB;integrated security=false;persist security info=True" />
<securityContext type="log4net.Util.WindowsSecurityContext">
  <domain value ="DOMAIN"/>
  <userName value="USER" />
  <password value="PASSWORD" />      
</securityContext> 
```

但这不起作用。我打开了内部日志，令我惊讶的是我得到了

```
log4net:ERROR XmlHierarchyConfigurator: Cannot find Property [domain] to set object on [log4net.Util.WindowsSecurityContext] 
```

但是我在securityContext中定义了域。为什么它无法识别我的域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T08:35:06.513

遇到同样的问题后，我发现最有可能的解决方案是将属性重命名`domain`为`domainName`. 备查：

```
<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
    <bufferSize value="1" />
    <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <connectionString value="data source=SERVER;initial catalog=DB;integrated security=false;persist security info=True" />
    <securityContext type="log4net.Util.WindowsSecurityContext">
        <domainName value="DOMAIN" />
        <userName value="USER" />
        <password value="PASSWORD" />      
    </securityContext>
</appender> 
```

# ios - 减小 pdf 大小 - 目标 c

> ID：15223630
> 
> 赞同：3
> 
> 时间：2013-03-05T12:17:57.550
> 
> 标签：ios, objective-c, uiimage, quartz-2d

我有一个 pdf 生成项目，它包含一些文本和一个已经存储在 db 中的图像，我想预览并邮寄生成的 pdf，当只有文本数据时一切正常。

如果我们的数据中有图像，就会出现问题。邮件收到大小为 10MB 或以上的 pdf，即使它有大小为 1MB 或以下的图像。它在模拟器中工作正常。我绘制图像的代码如下所示：

```
 UIImage *plotImage=[[UIImage alloc]initWithContentsOfFile:[localPictureArray objectAtIndex:i]];                  
                CGSize imageSize=plotImage.size;
                CGFloat scaleFactor = 1.0;        

        if (imageSize.height>(maxHeight-currentPageY) || imageSize.width>maxWidth ) 
        {
           UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, kDefaultPageWidth, kDefaultPageHeight), nil);
           currentPageY = kMargin;

           if (!((scaleFactor = (maxWidth / imageSize.width)) > ((maxHeight-currentPageY) / imageSize.height)))
            { 
            scaleFactor = (maxHeight-currentPageY) /imageSize.height; 
            // scale to fit heigth. 
            }

           CGRect rect = CGRectMake(kMargin,currentPageY,
           imageSize.width * scaleFactor, imageSize.height * scaleFactor);
           //Draw the image into the rect
           [plotImage drawInRect:rect];
         }

  else
      {
        plotImage drawInRect:normal size)];//Normal size we need
        NSLog(@"%@",NSStringFromCGSize(plotImage.size));
      } 
```

由于我是初学者，我正在努力解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T11:29:47.353

我挣扎了很多..最后当使用下面的代码将jpeg格式的图像写入pdf页面时，尺寸减小了十倍！不知道是不是正确的方法...

```
UIImage *lowResImage = [UIImage imageWithData:UIImageJPEGRepresentation(plotImage, 0.02)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:23:58.317

您需要更改**CTM (Current Transform Matrix)** ，而不是在上下文中调整矩形的大小。

```
CGContextSaveGState(theContext);

CGContextScaleCTM(theContext, scaleFactor, scaleFactor); 
```

...在这里绘制命令...

```
CGContextRestoreGState(theContext); 
```

( [http://macdevcenter.com/pub/a/mac/2004/11/02/quartz.html](http://macdevcenter.com/pub/a/mac/2004/11/02/quartz.html) )

# android - 获取系统电话号码的安卓应用

> ID：15223639
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:18:16.613
> 
> 标签：android, sdk, device, apk

我正在尝试使用以下代码获取系统电话号码

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
mPhoneNumber = tMgr.getLine1Number(); 
```

但它不起作用。

**在我的手机中，我使用**

> 设置->关于手机-->状态-电话号码

有没有我可以使用的简单应用程序？，我在土耳其写信。sim卡有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:24:29.743

你可以尝试这样的事情。它完美地工作。

```
public  String getPhoneNumber(Context context) {
        TelephonyManager mTelephonyMgr;
        mTelephonyMgr = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        String num = mTelephonyMgr.getLine1Number();
        return fillPhoneNumber(num);
    }
private   String fillPhoneNumber(String num) {
    try{
        if (num != null && num.length() > 0) {
            if (num.length() >= 9) {
                num = num.replaceAll("\\D", "");
                if (num.substring(0, 1).equals("8")) {
                    num = "+3" + num;
                } else if (num.substring(0, 1).equals("0")) {
                    num = "+38" + num;
                } else if (num.substring(0, 1).equals("3")) {
                    num = "+" + num;
                }
            }
            return num;
        }

    }catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

**注意：** 并非所有电话都会返回电话号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:24:35.433

并非所有电信运营商都将电话号码存储在 SIM 卡上。仅当设备中的 SIM 卡上存储有手机号码时，您使用的方法才有效。

如果您在手机设置中看不到您的电话号码，则表示它没有存储在 SIM 卡上。如果您绝对需要，您必须手动要求用户将其输入您的应用程序。没有其他办法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T17:27:06.800

没有确定的方法可以找到 MSISDN。上述方法仅在 SIM 已存储 MSISDN 时有效。其他解决方法是从 facebook 检索号码。它也可能会或可能不会起作用。唯一确定的方法是使用一些 SMS 网关提供商（例如[http://trumpia.com](http://trumpia.com) ）创建帐户，然后将 SMS 发送到免费号码，然后调用 API 检索 MSISDN。

# wpf - Wpf 绑定无法正常工作

> ID：15223643
> 
> 赞同：1
> 
> 时间：2013-03-05T12:18:31.167
> 
> 标签：wpf, mvvm, binding

我的视图模型

```
public class MyViewModel : ViewModelBase
        {
            // INotifyPropertyChanged is implemented in ViewModelBase

            private String _propX;
            public String PropX
            {
                get { return _propX; }
                set
                {
                    if (_propX != value)
                    {
                        _propX = value;
                        RaisePropertyChanged(() => PropX);
                    }
                }
            }

            private String _propY;
            public String ServerIP
            {
                get { return _propY; }
                set
                {
                    if (_propY != value)
                    {
                        _propY = value;
                        RaisePropertyChanged(() => ServerIP);
                    }
                }
            }

            public A()
            {
                this._propY = "000.000.000.000";
                this._propY = "000.000.000.000";
            }
        }

// EDIT
// This is the command that resets the properties
    private RelayCommand _resetFormCommand;
    public ICommand ResetConnectionFormCommand
    {
        get
        {
            if (_resetFormCommand == null)
            {
                _resetFormCommand = new RelayCommand(param => this.ExecuteResetFormCommand(), param => this.CanExecuteResetFormCommand);
            }

            return _resetFormCommand;
        }
    }

    private bool CanExecuteResetFormCommand
    {
        get
        {
            return !String.IsNullOrWhiteSpace(this._propX) ||
                !String.IsNullOrWhiteSpace(this._propY);
        }
    }

    private void ExecuteResetFormCommand()
    {
        this._propX = "";
        this._propY = "";
    } 
```

我的视图

```
<TextBox Name="propX" Text="{Binding PropX }" PreviewTextInput="textBox_PreviewTextInput" />
<TextBox Name="propY" Text="{Binding PropY }" PreviewTextInput="textBox_PreviewTextInput" />
<Border>
    <Button Content="Reset" Name="resetBtn" Command="{Binding ResetFormCommand}" />
</Border> 
```

我的视图代码在后面

```
private MyViewModel vm;
public ConnectionUserControl()
{
    InitializeComponent();
    vm = new MyViewModel();
    this.DataContext = vm;
}

private void textBox_PreviewTextInput(object sender, TextCompositionEventArgs e)
{
    ValidateInput(sender as TextBox, e);
} 
```

重置命令重置我的视图模型中的属性，但文本框仍然包含它们的值，绑定无法正常工作:(我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:41:49.307

您应该重置属性，而不是私有成员：

私人无效 ExecuteResetFormCommand() { this.PropX = ""; this.PropY = ""; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:24:57.860

您如何重置值？重置值时，您可能会覆盖数据绑定。如果您发布单击按钮时执行的代码，这将很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:26:26.150

在您的 xaml 代码中，您必须设置如下绑定：

```
<TextBox Name="propX" Text="{Binding PropX, Mode=TwoWay}" .../> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:33:55.830

绑定必须是两种方式，以便文本框从视图模型更新自身

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:50:25.547

在您的代码隐藏中，您有一个 property `ServerIP`，我认为您想将其命名为`PropY`，因为您`TextBox`绑定到一个`PropY`属性。

```
<TextBox Name="propY" Text="{Binding PropY }" PreviewTextInput="textBox_PreviewTextInput" / 
```

此外，您应该在**ExecuteResetFormCommand**命令中将值分配给您的*属性，而不是您的**私有成员*，因为*私有成员*不会触发****`INotifyPropertyChanged`****

 ****```
private void ExecuteResetFormCommand()
{
    this.PropX = "";
    this.PropY = ""; // <-- Currently you have PropY declared as ServerIP
} 
```****

# jquery - 使用 javascript 拖动滑块的 jQuery UI Slider 文件组？

> ID：15223652
> 
> 赞同：0
> 
> 时间：2013-03-05T12:19:05.603
> 
> 标签：jquery, jquery-plugins, jquery-ui-slider

我想使用 JavaScript 控制 jquery UI 滑块。我想在触发事件时将滑块移动到某个位置。

```
 $('select#dn_event_date, select#up_event_date').selectToUISlider(

            {
                    // labels and tooltipSrc are selectToUISlider specific options
                    labels: 0                       
                    sliderOptions: {                        
                        // swapped out stop for change here
                    change: function(){
                            // Here i want to control to move slider to certain position                        
                            }
                      }
                }

        ); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:36:27.773

您只需要使用该`value()`功能

例如，假设您有按钮，当用户单击它时，您需要将滑块从开始移动大约 60%：

```
$('#btnRun').click(function(){
    $(".selector").slider("value",60);
}); 
```

检查[此](http://api.jqueryui.com/slider/#method-value)以获取更多信息。

# zend-framework - 当以批量邮件脚本发送数千封电子邮件时，Sendmail 出现异常。sendmail 是否对给定进程设置了电子邮件发送限制？

> ID：15223653
> 
> 赞同：3
> 
> 时间：2013-03-05T12:19:06.173
> 
> 标签：zend-framework, exception, sendmail, transactional-email, bulk-mail

我对我们的网络服务器中的问题感到有些绝望。我们的网络是一个拥有大量用户和活动的社区。我们向用户发送他们感兴趣的活动的个性化邮件。我们处理这些邮件的脚本有问题。

**当有数千封电子邮件要发送时，**我们的批量电子邮件脚本会失败。它通常工作正常，但是当它必须发送比平常更多的电子邮件（大约 25.000 封电子邮件）时，它会反复抛出异常：

```
Unable to send mail. mail():
Could not execute mail delivery program '/usr/sbin/sendmail -t -i ' 
```

奇怪的是**sendmail在web服务器等其他进程中正常工作**，而sendmail在PHP（Zend）中的调用方式相同。当大量电子邮件已经发送且没有错误时，Sendmail 只会在 PHP 批量邮件脚本中失败。**当第一个异常被抛出时，下一次对 sendmail 的调用也会失败**。似乎已经达到了一些队列限制，但仅限于此过程！

* * *

## PHP脚本代码

PHP 批量邮件 scipt 主循环执行了数千次。在每个循环中， pass 使用不同的`$email`and调用 sendMail `$user`：

```
// Sometimes, hundred thousands iterations
foreach($notifications as $j => $notification){
    ...
    $mail->setNotification($notification);
    $this->sendMail($mail, $user);
    ...          
} 
```

`$this->sendmail($mail, $user)`调用 Zend 内部方法发送邮件。它调用 PHP 本地方法[mail](http://php.net/manual/en/function.mail.php)。

```
/**
 * Send mail using PHP native mail()
 *
 * @access public
 * @return void
 * @throws Zend_Mail_Transport_Exception if parameters is set
 *         but not a string
 * @throws Zend_Mail_Transport_Exception on mail() failure
 */
public function _sendMail()
{
    ...

        set_error_handler(array($this, '_handleMailErrors'));

        // CALL TO MAIL PHP NATIVE METHOD
        $result = mail(
            $this->recipients,
            $this->_mail->getSubject(),
            $this->body,
            $this->header,
            $this->parameters);
        restore_error_handler();
    }

    if ($this->_errstr !== null || !$result) {
        /**
         * @see Zend_Mail_Transport_Exception
         */
        require_once 'Zend/Mail/Transport/Exception.php';

        // HERE THE EXCEPTION IS THROWN
        throw new Zend_Mail_Transport_Exception('Unable to send mail. ' . $this->_errstr);
    }
} 
```

* * *

## 进程`sendmail`运行

`ps -aux | grep sendmail`当批量邮件 scipt 工作正常时查看输出

```
$ ps -aux | grep sendmail
root      6756  0.0  0.0  62240  2468 ?        Ss   18:19   0:08 sendmail: MTA: accepting connections          
root     25766  0.0  0.0  62668  3536 ?        Ss   22:43   0:00 sendmail: MTA: ./r17Lh1fX025764 eml4.in.gr.: client DATA status
root     30978  0.0  0.0  62460  2876 ?        Ss   22:46   0:00 sendmail: MTA: ./r17Lk8li030976 s1.m1r3.onet.pl.: user open
root     31462  0.0  0.0  62672  3536 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkSIg031460 mx2.hotmail.com.: client DATA status
root     31474  0.0  0.0  62672  3540 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkT54031472 mx2.hotmail.com.: client DATA status
root     31494  0.0  0.0  62668  4404 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkUXC031492 gmail-smtp-in.l.google.com.: client RCPT
root     31498  0.0  0.0  62668  3536 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkUn1031496 mx4.hotmail.com.: client DATA status
root     31502  0.0  0.0  62672  3536 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkUti031500 mx3.hotmail.com.: client DATA status
root     31506  0.0  0.0  62672  3500 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkUHw031504 mx4.hotmail.com.: client RCPT
root     31510  0.0  0.0  62672  3496 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkUth031508 mx3.hotmail.com.: client MAIL
root     31514  0.0  0.0  62668  4436 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkVPb031512 gmail-smtp-in.l.google.com.: client DATA status
root     31518  0.0  0.0  62460  2888 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkV9o031516 mx1.hotmail.com.: client EHLO
root     31522  0.0  0.0  62668  4404 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkVD4031520 gmail-smtp-in.l.google.com.: client RCPT
root     31526  0.0  0.0  62460  2852 ?        Ss   22:46   0:00 sendmail: MTA: ./r17LkVcF031524 mx3.hotmail.com.: user open 
```

当脚本开始抛出异常时，`ps -aux | grep sendmail`输出几乎是空的，正如预期的那样

```
$ ps -aux | grep sendmail
root      6756  0.0  0.0  62240  2468 ?        Ss   Feb07   0:49 sendmail: MTA: accepting connections 
```

* * *

## 一些问题

我是 sendmail 的新手，所以我很感激任何帮助。如果您需要更多信息，请告诉我。

*   简而言之，sendmail 如何发送邮件？
*   sendmail 是否有发送邮件的限制（我们的服务器是专用的，没有托管服务提供商设置的特定限制）？
*   sendmail 是否有任何进程队列来限制给定进程可以发送的邮件数量？
*   百万美元的问题：为什么会抛出异常以及如何解决？:-)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:17:37.577

每发送一封电子邮件，您就创建一个 sendmail 进程。25_000 封电子邮件可能会为您的计算机创建过多的进程来处理。

PS 您可以尝试在 news:comp.mail.sendmail 中提出您的问题 - 添加一些内容以表明它不是“有问题的垃圾邮件发送者”问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:56:03.370

**sendmail 如何发送邮件？**

这不是一个短篇小说。无论如何，为了减少 sendmail 进程的数量，您可以将您的 php 配置为通过 smtp 协议发送到 127.0.0.1（环回接口）上的端口 25。它将**仅**创建“由 root 拥有”的 sendmail 进程。

您还应该定义 confDELAY_LA、confQUEUE_LA（延迟

当系统平均负载高于配置的限制时，confDELAY_LA 会减慢接受新邮件的速度。它可能/将使您的脚本运行时间更长。

confQUEUE_LA 跳过“一次”传递尝试 - 您很可能应该增加队列运行器进程的数量。

简而言之：您将 sendmail 服务器推送到超出限制的标准*简单*配置可以轻松处理。

# upgrade - “无法加载文件或程序集'TypeMock.Interceptors，版本 = 0.0.0.0”

> ID：15223657
> 
> 赞同：0
> 
> 时间：2013-03-05T12:19:12.437
> 
> 标签：upgrade, typemock, mscorlib

我们刚刚将 Typemock 从 6.0.2.0 升级到 Typemock 7.3.0.0。我们现在在运行时收到以下错误：

[System.IO.FileNotFoundException] = {“无法加载文件或程序集'TypeMock.Interceptors, Version=0.0.0.0, Culture=neutral, PublicKeyToken=00000000000000000'或其依赖项之一。系统找不到指定的文件。” :"TypeMock.Interceptors, Version=0.0.0.0, Culture=neutral, Pu...

在调试期间，我可以看到抛出它的源是 mscorlib。令人费解的是，我已经卸载了所有引用 Typemock.dlls 的项目，但仍然出现此错误。当我在 Typemock 菜单中选择“暂停模拟”时，一切正常。

在 GAC 中，我可以看到安装了 Typemock.Interceptors 7.3.0.0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:02:57.783

我打电话给 TypeMock 支持，他们确认这是 TypeMock 中的一个错误。他们给我发了一个更新的版本（7.3.2.0），这个问题现在已经消失了。

# mysql - mysql左连接不返回空行

> ID：15223658
> 
> 赞同：0
> 
> 时间：2013-03-05T12:19:18.950
> 
> 标签：mysql, left-join

我正在尝试获取其中存在子记录数量的类别列表。如果类别没有记录，它应该返回 NULL 或 0，但我的查询返回带有子记录的类别看起来就像它跳过了没有子记录的类别。...将非常感谢您的帮助。

这是我的代码：

```
SELECT 
t_gal.f_sub_category_id, 
t_sub_cat.f_sub_cat_name, 
t_gal.f_image_thumb, (
    SELECT COUNT(*)
    FROM t_gallery
    WHERE f_sub_category_id = t_gal.f_sub_category_id) 
    AS f_image_total
FROM    t_gallery t_gal
LEFT JOIN t_sub_category t_sub_cat ON t_sub_cat.r_id = t_gal.f_sub_category_id
GROUP BY t_sub_cat.r_id
ORDER BY t_gal.f_added_on DESC, t_gal.r_id DESC 
```

这是两张表：

![在此处输入图像描述](../Images/32c4574948f0028154d7e31b8340bbbe.png)

![在此处输入图像描述](../Images/b01f265ac22350055b8ae423a90f5f94.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:39:23.577

看起来对于每个子类别（先前选择的类别），您想要包括所有该子类别......并且，在这些子类别中，您想要计算该类别的图像数量画廊表中甚至没有图像。

您可能遇到的是用于对图像进行计数的 FIELD 的 select 语句……首先，这可能会成为性能杀手。相反，您可以直接对图库表进行左连接，并为相应的子类别计算图库中不同的 R_ID

```
SELECT 
      t_sub_cat.r_id,
      t_sub_cat.f_sub_cat_name, 
      MIN( COALESCE( t_gal.f_image_thumb, '' )) as JustOneThumbImg, 
      COUNT( DISTINCT( t_gal.r_id )) SubCategoryImageCount
   FROM 
      t_sub_category t_sub_cat 
         LEFT JOIN t_gallery t_gal
            ON t_sub_cat.r_id = t_gal.f_sub_category_id
   GROUP BY 
      t_sub_cat.r_id
   ORDER BY 
      t_sub_cat.f_added_on DESC 
```

由于您没有抓取所有画廊图像（因为某些可能不存在于给定的子类别中），因此按 t_gal.r_id 排序没有意义

另外，我没有在子查询中预先抓取聚合以加入反对的原因......我不想在不知道哪些子类别与您的类别相关联的情况下从每个类别/子类别中获取所有内容其实想要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:34:09.423

问题似乎是您的 group by 子句。

您正在按 LEFT JOINed 表上的字段进行分组，因此当它按该表上没有匹配行的所有行进行分组时，似乎会聚合成一行。

我认为您想要获得的是画廊项目列表，以及它们所在的类别（如果找到）以及同一类别中其他画廊的数量。如果是这样，请尝试以下操作（如果不让我知道！）

```
SELECT t_gal.f_sub_category_id, t_sub_cat.f_sub_cat_name, t_gal.f_image_thumb, Sub1.GalleryCount
FROM    t_gallery t_gal
LEFT JOIN t_sub_category t_sub_cat 
ON t_sub_cat.r_id = t_gal.f_sub_category_id
LEFT OUTER JOIN (SELECT f_sub_category_id, COUNT(*) AS GalleryCount FROM t_gallery GROUP BY f_sub_category_id) Sub1
ON Sub1.f_sub_category_id = t_gal.f_sub_category_id
ORDER BY t_gal.f_added_on DESC, t_gal.r_id DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:43:07.377

您的查询的问题是您在使用左连接时使用 t_gallery 作为主表，而不是 t_sub_category。

你可以试试这个：[sqlfiddle](http://www.sqlfiddle.com/#!2/86379/10)

```
select 
t_gal.f_sub_category_id, 
t_sub_cat.f_sub_cat_name, 
 (
    SELECT COUNT(*)
    FROM t_gallery
    WHERE f_sub_category_id = t_gal.f_sub_category_id) 
    AS f_image_total
from t_sub_category as t_sub_cat
left join t_gallery t_gal on t_gal.f_sub_category_id = t_sub_cat.r_id
GROUP BY t_sub_cat.r_id
ORDER BY t_gal.r_id DESC; 
```

# android - 从互联网下载数据 - 注意什么？

> ID：15223663
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:19:26.077
> 
> 标签：android, download, internet-connection

在我的应用程序中，我正在使用 xml 阅读器从网站下载数据。之后，我用他们建立了一个 sqlite 数据库。一切正常，但我担心下载过程中可能会发生某些事情（连接中断），导致数据库不完整。

有没有人有类似条件的列表，说明我需要做什么才能`save`下载？（例如：下载开始前检查连接）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:26:45.170

您可以在填充所有数据库后设置一个变量。

Ans 在访问该数据库时检查该变量是否设置了该变量？

如果未设置，则再次要求下载`Data is not completed download Please download again.`

或者

正如您在连接中断时建议您自己检查该变量是否在中断之前设置它意味着所有数据已下载，否则它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:35:46.300

解析 XML 并插入数据库时​​，您将执行以下代码：

```
db.beginTransaction();
try {

 // here you parse and insert onto the DB.
 // if any exception is reached (the XML reader connection was dropped or whatever)
 // it will catch the exception and end the transaction without making it successful
 // and SQLite will rollback all the actions you've done here.

  db.setTransactionSuccessful();
} catch(Exception e){
  Log.e("MyTag", "Transaction fail. " +
                  e.getClass().getSimpleName() + " - " + 
                  e.getMessage());
}finally {
  db.endTransaction();
} 
```

# java - XSLT：获取已声明实体的 URI

> ID：15223665
> 
> 赞同：2
> 
> 时间：2013-03-05T12:19:26.977
> 
> 标签：java, xslt, entity, uri, resolver

我有一个输入 XML，其中声明了实体。它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE doctype PUBLIC "desc" "DTD.dtd" [ 

<!ENTITY SLSD_68115_jpg SYSTEM "68115.jpg" NDATA JPEG>
]> 
```

DTD.dtd 文件包含必要的符号：

```
<!NOTATION JPEG SYSTEM "JPG" > 
```

在 XSLT 转换期间，我想使用名称“SLSD_68115_jpg”获取实体中声明的 URI，如下所示：

```
<xsl:value-of select="unparsed-entity-uri('SLSD_68115_jpg')"/> 
```

这样它就会返回类似“68115.jpg”的内容。

问题是它总是返回一个空字符串。我无法修改输入 xml。我知道这可能是我在互联网上发现的常见问题，但我还没有找到任何最终结论、解决方案或替代方案。

重要的是要注意我之前遇到过问题，因为我使用的是 StreamSource 并且必须手动设置诸如 systemId 之类的东西，我认为这可能是隐藏问题的地方。就像转换器无法解析具有给定 ID 的实体一样。

我正在使用 Xalan，我可能需要提供更多详细信息，但我不确定要添加什么，我会回答任何问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:31:32.913

我发现了为什么“unparsed-entity-uri”无法解析声明的实体。这可能是一个特殊情况，但我会发布这个解决方案，这样它可能会为其他人节省很多时间。

我是（非常）XSLT 新手。然而，作为一名学生，我使用的 xsl 文件非常极端，其中包含多个导入语句和包含超过 5K 行代码的文件。

只是当我到达需要实体的地步时，转换器使用了一个不同的文档，该文档本质上是原始文档的子文档，这没关系，但是例如实体声明不会传递给子文档。因此，我无法使用该点以后的实体。

现在就像我说我是 XSLT 的新手，但我认为像这样的行可能会导致问题：

```
<xsl:apply-templates select="exslt:node-set($nodelist)"/> 
```

因为在这之后，实体引用就不行了。

如果这是微不足道的，那么我很抱歉浪费了你的时间。

还是要感谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:38:06.960

代替 a `StreamSource`，尝试`SAXSource`使用验证解析器配置的 a ：

```
SAXParserFactory spf = SAXParserFactory.newInstance();
spf.setValidating(true);
spf.setNamespaceAware(true);
XMLReader xmlr = spf.newSAXParser().getXMLReader();

InputSource input = new InputSource(
    new File("/path/to/file.xml").toURI().toString());
// if you already have an InputStream/Reader then do
// input.setByteStream or input.setCharacterStream as appropriate
SAXSource source = new SAXSource(xmlr, input); 
```

或者你可以用`DOMSource`同样的方式使用

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setValidating(true);
dbf.setNamespaceAware(true);
File f = new File("/path/to/file.xml");
Document doc = dbf.newDocumentBuilder().parse(f);

DOMSource source = new DOMSource(doc, f.toURI().toString()); 
```

# c - C 函数 printf() 的长度有限制吗？

> ID：15223668
> 
> 赞同：2
> 
> 时间：2013-03-05T12:19:32.140
> 
> 标签：c

在调用 sprintf 函数格式化字符串时，打印了一些意想不到的东西

```
printf("%d;%s;%s;%d;%d;\n", ptr->programmaType, ptr->titel, ptr->zender, ptr->start, ptr->einde); 
```

打印“0;星际之门;科幻;0;0;” 尽管

```
printf("%d;", ptr->einde); 
```

打印“42”，这是 ptr->einde 的值。我也试过

```
printf("%d;%s;%s;%d;%d;", 0, "Stargate", "scifi", 0, 42); 
```

打印正确，所以我猜这个问题与变量有关。我尝试的最后一件事是

```
int bug = ptr->einde;
printf("%d;%s;%s;%d;%d;\n", ptr->programmaType, ptr->titel, ptr->zender, ptr->start, bug); 
```

也无法正确打印...我不知道到底发生了什么。

注意： ptr->start 和 ptr->einde 被定义为 time_t 类型，但是看到 printf 使用单个参数我怀疑这是一个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T12:33:23.473

你说的`ptr->start`是`ptr->einde`类型`time_t`。这种类型不是完全可移植的，可以是任何[“整数或实浮点类型”](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/types.h.html)`int` ，因此当您尝试将它们作为类型打印时，它们可能在您的系统上没有得到正确处理。

尝试将其转换为已知的内容，然后打印：

```
printf("%d;%s;%s;%ld;%ld;\n", ptr->programmaType, ptr->titel, 
    ptr->zender, (long)ptr->start, (long)ptr->einde); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:30:32.073

**我猜你**的定义`ptr->einde`不是type 。**`int`**

 **并且您`"%d"`在期望值的`printf`说明符中使用`int`。
为正确的类型和 printf 行为使用正确的说明符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:38:52.763

No`printf`的长度不受限制，除非在嵌入式实现中它必须能够打印至少 4095 个字符。

`time_t`可能是一个 64 位整数值。解决方案是将变量转换为`(uint64_t)`并使用`PRIu64`格式说明符。

```
printf("%d;%s;%s;%"PRIu64";%"PRIu64";\n", 
           ptr->programmaType, 
           ptr->titel, ptr->zender, 
           (uint64_t)ptr->start, 
           (uint64_t)ptr->einde); 
```**

# .net - 实体框架：将标量属性映射到 SP

> ID：15223669
> 
> 赞同：0
> 
> 时间：2013-03-05T12:19:40.027
> 
> 标签：.net, entity-framework, stored-procedures

我在 EF 设计器中为我的实体添加了一个新的标量属性，其值将由存储过程计算。我可以将标量属性映射到 SP 吗？

# php - 如何使用 php mysql 使用用户名或手机号码登录

> ID：15223672
> 
> 赞同：-6
> 
> 时间：2013-03-05T12:19:43.753
> 
> 标签：php, mysql, login

我用 PHP MySQL 创建了一个登录表单，我需要允许用户使用用户名或电话号码登录。

我有这个代码： -

```
<form method="post" action="">
User name:<input type="text" name="uname" />
PWD:<input type="password" name="pwd" />
<input type="submit" name="sub" /> 
```

PHP代码：

```
<?php 
include "config.php";
$uname = $_POST['uname'];
$pwd = $_POST['pwd']; 
$query=mysql_query("select * from users where userId='$uname' and pwd ='$pwd' ");
if($query){
    echo "login success":
}else
echo "login fail";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:56:24.417

改变这个；

```
$query=mysql_query("select * from users where userId='$uname' and pwd ='$pwd' "); 
```

到：

```
$query=mysql_query("SELECT * FROM users WHERE pwd ='$pwd' AND (userId = '$uname' OR PhoneNum = '$uname')"); 
```

这样做会获取**$uname**值并同时搜索 Userid 列和 Phone Num 列以进行匹配。请注意，*PhoneNum*是表中的列名。

您的数据库也有受到攻击的风险。MYSQL 注入。

# symfony - 通过 phpUnit / Test 中的服务使用助手渲染 Twig

> ID：15223675
> 
> 赞同：1
> 
> 时间：2013-03-05T12:19:47.610
> 
> 标签：symfony, phpunit, twig

我有服务。

```
manager.summary.order:
    class: Travelyo\CoreBundle\Services\Managers\Order\OrderSummaryManager
    arguments:
        template:       '@templating'
        router: '@router' 
```

该渲染 html（使用 twig）稍后将通过邮件发送或显示。

在我的 Symfony2.1 项目中使用此服务时，我没有任何问题。在这个树枝中，我有不同的调用，例如`app.request.locale`& `number_format_currency`。

在我的测试控制器中调用此服务时。

我得到那个错误

```
Twig_Error_Runtime: An exception has been thrown during the rendering of a 
template ("You cannot create a service ("request") of an inactive scope
 ("request").") in "TravelyoCoreBundle:Mail:confirmation_mail.html.twig" at line 63. 
```

这是我的控制器。

```
namespace Travelyo\ConfigurationBundle\Tests\Order;

use Travelyo\CoreBundle\Event\Order\OrderEvent;
use Travelyo\CoreBundle\Entity\Order\Order;
use Symfony\Component\EventDispatcher\EventDispatcher;
use Travelyo\CoreBundle\Session\EtSession;
use Travelyo\CoreBundle\Services\Managers\OrderProcessManager;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class OrderSaveToDbTest extends WebTestCase {
    private $summaryManger;
    public function setUp()
    {
        static::$kernel = static::createKernel();
        static::$kernel->boot();
        $client = static::createClient();
        $client->request(
                'GET', '/clients/123456',
                array('SERVER_NAME' => 'travelyo'), /* request params */
                array(), /* files */
                array('X-Requested-With' => "XMLHttpRequest",'SERVER_NAME' => 'travelyo'));

        $this->summaryManger = static::$kernel->getContainer()->get('manager.summary.order');
    }

    public function testSaveAndSend()
    {
        $this->summaryManger->generateHml();

    }
} 
```

知道如何不出现此错误吗？

我尝试将 scope=request 添加到我的服务中。但是此服务被我的应用程序中的其他服务使用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:22:47.007

要将请求放入您的服务中，请使您的服务 yml

```
manager.summary.order:
class: Travelyo\CoreBundle\Services\Managers\Order\OrderSummaryManager
arguments:
    template:       '@templating'
    router: '@router'
    - "@service_container" 
```

然后在您的服务文件中，您需要添加一个构造函数：

```
namespace Travelyo\ConfigurationBundle\Tests\Order;

class OrderSaveToDbTest extends WebTestCase {

    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    /* the rest of your controller/service */
} 
```

那么使用容器来获取请求就真的很简单了：

```
$request = $this->container->get('request'); 
```

我可能有一些不完全正确的，但它的一般想法。查看此链接以获取有关使用范围的更多信息：http: [//symfony.com/doc/2.1/cookbook/service_container/scopes.html](http://symfony.com/doc/2.1/cookbook/service_container/scopes.html)

# javascript - XMLHttpRequest：网络错误 0x2efd，由于错误 00002efd 无法完成操作

> ID：15223683
> 
> 赞同：7
> 
> 时间：2013-03-05T12:20:13.580
> 
> 标签：javascript, networking, azure, xmlhttprequest, socket.io

我正在将 socket.io 用于 Windows azure 项目。奇怪的是，socket.io 服务器在我刚刚部署 web 角色时启动，但是当我部署整个云项目时，socket.io 服务器没有启动，我收到这个错误 -

```
"SCRIPT7002: XMLHttpRequest: Network Error 0x2efd, Could not complete the operation due to error 00002efd." 
```

我完全不知道那是什么意思。谁能帮我解决这个问题？我整天都在为此头疼。

SocketClient.html

```
<script>
var socket = io.connect('http://127.0.0.1:4001');
socket.on('news', function (data) {
    console.log(data);       
});

$(function () {
    $("#sendresponse").bind("click", function () {
     socket.emit('server', 'Hello World');

    });
}
);
</script> 
```

应用程序.js

```
var app = require('express')(), server = require('http').createServer(app), io = require('socket.io').listen(server);

server.listen(4001);

app.get('/', function (req, res) {
res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
socket.emit('news', { hello: 'first time connect' });
socket.on('server', function (data) {
    console.log(data);
    socket.emit('news',"hello");
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T06:14:36.620

结果发现，当我部署云项目时，App.js 脚本没有运行，即我在 web.config 中放置的 iisnode 处理程序在部署整个云项目时没有完成它的工作。看完这篇[文章](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)后，我发现我必须将一些文件放在我的 web 角色的 bin 文件夹中，即 - ChangeConfig.ps1、download.ps1、node.cmd、setup_web.cmd。您可以在阅读该文章时生成这些文件。最后，您必须将此代码放入您的 ServiceDefinition.csdef

```
<Startup>      
 <Task commandLine="setup_web.cmd &gt; log.txt" executionContext="elevated">
    <Environment>
      <Variable name="EMULATED">
        <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
      </Variable>
      <Variable name="RUNTIMEID" value="node;iisnode" />
      <Variable name="RUNTIMEURL" value="" />
    </Environment>
  </Task>
</Startup> 
```

瞧！它就像一个魅力。您仍然需要通过在浏览器上运行 127.0.0.1/App.js 来启动 socket.io 服务器。我仍在研究如何以编程方式启动 App.js。

# sql - oracle中的正则表达式？

> ID：15223685
> 
> 赞同：0
> 
> 时间：2013-03-05T12:20:15.167
> 
> 标签：sql, oracle

我有一个像这样的字符串 '102/103/104/106'

现在，如果我将 102 作为输入传递，那么输出应该是下一个字段，即 103。如果是 103，那么输出应该是 104，如果是 106，那么输出应该是 null（至于最后一个字段，我没有任何进一步的表达）。我可以通过将字符串拆分为数组并进行比较来使用过程来做到这一点。但是我可以通过这样的sql语句来做到这一点吗

```
select '102/103/104/106' from dual where [expression 102 or 103]. 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:51:28.410

```
-- p_whole_string = '102/103/104/106'
-- p_prev = '102'
select 
  regexp_substr(p_whole_string, '(^|/)' || p_prev || '/([^/]+)', 1, 1, null, 2) 
  as next
from dual; 
```

如果输入 106，则添加 NVL 以返回最后一个值：

```
SELECT NVL(REGEXP_SUBSTR('102/103/104/106', '(^|/)' || '106' || '/([^/]+)', 1, 1, null, 2), REGEXP_SUBSTR('102/103/104/106', '[^/]+$')) as nxt
  FROM dual
/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:01:14.617

您可以在纯 SQL 中使用以下内容执行此操作：

```
--convert your string into rows
with vals as (
select
       substr('102/103/104/106', 
              instr('102/103/104/106', '/', 1, level)-3, 
              3
             ) col,
       level lvl
from dual
connect by level <= length('102/103/104/106')-length(replace('102/103/104/106', '/'))+1
)
select * 
from   (
select col, 
       lead(col) over (order by lvl) next_val -- find the next value in the list 
from   vals
)
where  col = :val; 
```

基本上，通过解析将字符串转换为行。然后使用解析`lead`找到“下一个”值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:08:53.417

适用于 Oracle 表格 10 以上。

```
SELECT 
REGEXP_SUBSTR(
  REGEXP_SUBSTR('102/103/104/106', '(^|/)102/[^/]+'), -- returns 102/103
  '[^/]+',1,2) val -- takes second part
FROM DUAL; 
```

带参数看起来像这样：

```
-- p_string_to_search = '102/103/104/106'
-- p_string_to_match = '102'

SELECT 
REGEXP_SUBSTR(
  REGEXP_SUBSTR(p_string_to_search, '(^|/)' || p_string_to_match ||'/[^/]+'), -- returns 102/103
  '[^/]+',1,2) val -- takes second part
FROM DUAL; 
```

# browser - IE8 和 IE9 模式问题

> ID：15223687
> 
> 赞同：0
> 
> 时间：2013-03-05T12:20:29.663
> 
> 标签：browser, internet-explorer-8, internet-explorer-9

我正在建立一个网站，可以在这里看到：http: [//alexconner.co.uk/marvel_2/index.html](http://alexconner.co.uk/marvel_2/index.html)

但是当您单击按钮打开模态窗口时，您只能看到 flash 动画背景，而不是窗口的内容（这种情况仅在 IE8 和 IE9 中发生）。我觉得这与 CSS 中的 position:absolute 有关。

# java - 根据条件插入时从集合中删除重复元素

> ID：15223689
> 
> 赞同：0
> 
> 时间：2013-03-05T12:20:33.183
> 
> 标签：java, set, duplicates

对于 ClassA 类，我有 2 个属性 - X 和 Y 我已经覆盖了 ClassA 的 equals 方法，以便通过检查属性 X 找到 2 个类的相等性。

```
ClassA {

Integer X,Y;

Integer getX(){return X;}
Integer getY(){return Y;}

boolean equals(object o){
      return getX().equals((ClassA)o).getX());
}

} 
```

现在我想从 List 中删除 ClassA 的所有重复元素但是如果发现 2 个元素是重复的，我想添加一个逻辑来删除基于 Y 标准的重复元素。所以基本上它如下所示

```
if(A.eqauls(B)){
  remove A , if A.getY() > B.getY()
  ore remove B , if A.getY() < B.getY()
} 
```

显然我会尝试对列表进行排序并查看相邻的重复元素，然后根据我们的逻辑删除重复项。我想知道我是否可以使用集合来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:44:22.540

像这样的东西：

```
Map<ClassA, ClassA> map = new HashMap();

for(ClassA elem : yourList)
{
   ClassA existing = map.get(elem);
   if(existing != null)
   {
      if(check your condition using "elem" and "existing" and getY)
      {
        continue;// don't replace the element in the map.
      }
   }
   map.put(elem, elem);
}
//map.values() will have your elements 
```

`LinkedHashMap`如果您想保留列表中的元素顺序，您也可以使用。

顺便说一句，HashSet 是使用 HashMap 以类似的方式实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:33:03.487

集合使用该`equals()`方法来确定元素是否已经在集合中。换句话说，如果您只使用正常插入，插入到集合中的第一个将是您被卡住的那个。

我认为您不能覆盖此行为（除非您实现自己的 set 类，在其中更改 add 方法以测试相等性*并*进行 Y 比较）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:37:56.587

如果不违反 的一般合同，您就无法做到这一点，该合同`Set`规定`add()`如果元素等于（根据`equals()`方法）集合中的元素，则永远不会添加元素。显然，如果您正在实现此行为，则可以*使用*a `Set`（您可以检查是否已经看到具有特定`X`值的元素）。A`Map`虽然会是一个更好的选择。

由于该行为很容易通过对列表进行排序和循环来实现，所以我会使用它。您不会通过使用 a 在实现时间或可维护性方面获得任何好处`Set`（可以说您正在使您的代码更难阅读），因此它确实是一个更好的选择。

# jquery - jQuery：对同一对象的链式操作

> ID：15223699
> 
> 赞同：2
> 
> 时间：2013-03-05T12:21:04.820
> 
> 标签：jquery, chaining, jquery-easyui

我知道已经有关于 jQuery 链接的各种问题，但我找不到这个（可能相当简单）的答案。原谅 jQuery 的新手。

我正在寻找的是一种将不同动作/事件应用于同一对象的简短方法。更具体地说，我有以下代码

```
$('#dlg').dialog('open').dialog('setTitle','Title').dialog('refresh','dlg.html'); 
```

有没有办法不写`.dialog`三遍，而是类似的东西

```
$('#dlg').dialog(action 1, action 2, etc.) 
```

? 我还不熟悉语法，所以我不知道参数是否需要放在花括号中，中间有分号，或者逗号，或者......感谢您的帮助！

PS：这个例子中的对话框是一个 jQuery EasyUI 对话框，如果这有什么不同的话。

* * *

**更新：**看到我的问题的答案似乎是“否”，编写上述命令的*最佳方法是什么？*即是

```
$('#dlg').dialog('open')
$('#dlg').dialog('setTitle','Title')
$('#dlg').dialog('refresh','dlg.html') 
```

与上面的行相比，在效率方面更好/更差，或者还有另一种（更好的）方法？感谢您的快速帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:27:16.910

对于你正在做的事情，基本上没有其他选择。你可以用循环做一些疯狂的事情，但归根结底，它只会增加复杂性，除非你在整个代码中这样做数百次，否则不值得付出努力。

我假设你知道你可以在一次调用中传递一个包含各种值的对象来初始化一个对话框，根据 EasyUI 文档：

```
$('#dd').dialog({  
    title: 'My Dialog',  
    width: 400,  
    height: 200,  
    closed: false,  
    cache: false,  
    href: 'get_content.php',  
    modal: true  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:23:39.410

不，在 jQuery 中没有办法实现这一点，但您可以检查具体的实现是否有任何支持。

另一种测试意志的解决方案`destroy`每次都会创建对话框。

```
$('#dlg').dialog('destroy');
$('#dlg').dialog({....}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:32:40.557

您也许可以一次设置一些小部件参数，但是之后您仍然必须调用诸如“打开”之类的方法

```
$('#target').dialog(
    width: 400,  
    height: 200,
    title:,
    // ...
}); 
$('#target').open()
// ... 
```

有关对话框参数和小部件签名的信息，请参阅[文档](http://api.jqueryui.com/dialog/)

# javascript - 从 JS 函数的原型中获取预先计算的变量/属性的标准方法

> ID：15223700
> 
> 赞同：0
> 
> 时间：2013-03-05T12:21:12.647
> 
> 标签：javascript, scope, prototype

我正在寻找计算一次变量的标准方法，然后在每次执行函数的范围内访问它，而不依赖于全局变量。

这似乎是原型属性（变量）的标准用法——但我能在 JS 原型上找到的每个示例都是基于原型方法（函数）的。我唯一能找到的关于在原型[中设置属性/变量的问题是来自那些也找不到任何关于这些信息的人的问题，询问这是好的还是坏的做法](https://stackoverflow.com/questions/6822838/using-prototype-for-variables)（tldr：很好，但记住牺牲可读性很少值得获得微小的性能提升）。

我有一种方法可以设置和获取有效的原型属性，但感觉很笨拙，因为它依赖于对函数的引用（本质上`var prop = thisfunctionname.prototype.someprop`）。由于我通过反复试验找到了它，我想问一下是否有一种更清洁、更标准的方法可以从函数中获取这些原型属性，而无需回到函数周围的范围并从那里获取函数？

* * *

这是一个简单的简单示例：一个虚构的[jQuery 插件，它将一个数字添加到另一个数字，](https://i.stack.imgur.com/ssRUr.gif)然后在带有用户名的句子中返回它。我们只想向用户询问他们的姓名一次，然后将该姓名存储在范围内以供重复使用：

```
(function($) {
  var sum = function( num1,num2 ) {
    var result = num1 + num2;

    // This works, but seems clunky since it depends on the variable `sum` 
    // from the scope around this function - is there a better way?
    var name = sum.prototype.name;

    $(this).text( num1+' plus '+num2+' is '+result+', '+name+'.');
    return $(this);
  };

  var name = prompt('Please enter your name','');

  // Is there a better way to set this default variable to be accessible 
  // in all calls to this function?
  sum.prototype.name = name;

  $.fn.basicArithmetic = sum;

})(jQuery); 
// end of plugin. Example usage...

$('<p/>').basicArithmetic(1,5).appendTo('body');
$('<p/>').basicArithmetic(2,2).appendTo('body');
$('<p/>').basicArithmetic(25,30).appendTo('body');
$('<p/>').basicArithmetic(92.3,15.17).appendTo('body'); 
```

[现场 jsbin 示例。](http://jsbin.com/okumam/1/edit)更现实的现实用例是当属性的计算在内存使用方面很昂贵或具有破坏​​性（例如，需要在计算期间更改 DOM）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:29:36.483

两个不同的答案，真的：

1.  通常的方法是在作用域函数中使用一个变量（在你的例子中你已经有了一个方便的）；根本不涉及原型。

    ```
    (function($) {
      var name;

      name = prompt('Please enter your name','');

      function sum( num1,num2 ) {
        var result = num1 + num2;

        $(this).text( num1+' plus '+num2+' is '+result+', '+name+'.');
        return $(this);
      }

      $.fn.basicArithmetic = sum;

    })(jQuery); 
    ```

    [更新 JSBin 示例](http://jsbin.com/okumam/2)| [来源](http://jsbin.com/okumam/2/edit)

    *（旁注：我还将您的匿名函数表达式更改为命名函数声明，但在这种情况下并不重要。）*

2.  *jQuery 插件中*的常用方法是将数据存储在应用插件的元素上。这不适用于您提供的示例，这要求数据对于插件来说是全局的，但通常（并非总是，只是通常）插件仅保留您通常存储的特定于实例的信息元素（可能通过`data`函数）。

# html - JSON 对象未正确更新

> ID：15223702
> 
> 赞同：1
> 
> 时间：2013-03-05T12:21:15.070
> 
> 标签：html, jquery

首先，我不确定我的标题是否正确描述了问题......我进行了搜索，但没有找到任何帮助我的东西......

我正在做的项目有一个`#orderList`. 所有订单都有删除选项。订单被删除后，列表会更新。

听起来很简单......不过我遇到了一个问题。

```
/**
 * Data returned at the end of selecting some options
 */
$.post(myUrl, $('#myForm').serialize(), function(data) {
    // I build the orderlist
    // The data returned is a JSON object holding session data (including orders)
    buildOrderList(data);
    ...
    // Do some other work
});

/*
 * function to build the html list
 */
function buildOrderList(data) {
    // Empty list
    $('#orderList').empty();

    // The click handler for the delete button is in here because it needs the data object
    $(document).on('click', '[id^=delete_]', function() {
        // Get the orderId from the delete button
        var orderId = $(this).attr('id').split('_');
        orderId = orderId['1'];
        // I call the delete function
        deleteOrder(orderId, data);
    });

    var html = '';
    // Loop the data object
    $.each(data, function(key,val){
        ...
        // Put html code needed in var html
        ...
    });
    $('#orderList').append(html);
}

/*
 * function to delete an order
 */
function deleteOrder(orderId, data) {
    // Because of it depends on other 'products' in the list if the user can
    // simply delete it, I use a jQuery dialog to give him some options.
    // These options I send to a php script so it knows what should be deleted.
    // This fires when a user clicks on the 'delete' button from a dialog.
    // The dialog uses data to show options but does not change the value of data.
    switch(data.type) {
        case 'A':
            delMsg += '<p>Some message for case A</p>';
            delMsg += '<select>with some options for case A</select>';
            $('#wizard_dialog').append(delMsg);
            $('#wizard_dialog').dialog('option', 'buttons',  [ 
                { text: "Delete", click: function() { 
                        $.post(myUrl, $('#myDeleteOptions').serialize(), function(newData) {
                            // Now the returned data is the updated session data
                            // So I build the orderList again...
                            buildOrderList(newData);
                            ...
                            // Do some other work
                        });
                        $( this ).dialog( "close" );
                        $(this).html(''); }},
                { text: "Cancel", click: function() { $( this ).dialog("close"); $(this).html(''); }}
            ] );
            break;
        case 'B':
            // Do the same thing but different text and <select> elements
            break;
    }
} 
```

更新正确，`orderList`但是如果我尝试删除另一个订单，jQuery 对话框会为我提供当前（正确产品）的选项以及之前拥有当前 id 的产品的选项。（希望我在试图解释问题时没有失去任何人）

主要问题是如何“刷新”发送到`buildOrderList`.

由于我在返回新数据对象的新 $.post 中调用该函数，它应该可以工作，不是吗？

```
/**
 * Enable the JQuery dialog
 * (#wizard_dialog)
     * this is the init (note that I only open the dialog in deleteOrder() and set text and buttons according to the data send to deleteOrder() )
 */
$('#wizard_dialog').dialog({
    autoOpen: false,
    resizable: false,
    modal: true,
    dialogClass: "no-close",
    open: function() {
        $('.ui-dialog-buttonpane').find('button:contains("Annuleren")').addClass('cancelButtonClass');
        $('.ui-dialog-buttonpane').find('button:contains("Verwijderen")').addClass('deleteButtonClass');
        $('.ui-dialog :button').blur(); // Because it is dangerous to put focus on 'OK' button
        $('.ui-widget-overlay').css('position', 'fixed'); // Fixing overlay (else in wrong position?)
        if ($(document).height() > $(window).height()) {
            var scrollTop = ($('html').scrollTop()) ? $('html').scrollTop() : $('body').scrollTop(); // Works for Chrome, Firefox, IE...
            $('html').addClass('noscroll').css('top',-scrollTop); // Prevent scroll without hiding the bar (thus preventing page to shift)
        }
    },
    close: function() {
        $('.ui-widget-overlay').css('position', 'absolute'); // Brake overlay again
        var scrollTop = parseInt($('html').css('top'));
        $('html').removeClass('noscroll'); // Allow scrolling again
        $('html,body').scrollTop(-scrollTop);
        $('#wizard_dialog').html('');
    }
}); 
```

**编辑：** 因为问题可能出在对话框中，所以我添加了一些代码。在第一个代码块中，我更改了 deleteOrder();

**解答** 解决方案相当简单。在添加新的单击处理程序之前，我忘记关闭单击处理程序。这将返回上一个事件和新事件。

```
$(document).off('click', '[id^=delete_]').on('click', '[id^=delete_]', function() {
        // Get the orderId from the delete button
        var orderId = $(this).attr('id').split('_');
        orderId = orderId['1'];
        // I call the delete function
        deleteOrder(orderId, data);
    }); 
```

# java - Perforce Java API 行尾样式

> ID：15223708
> 
> 赞同：1
> 
> 时间：2013-03-05T12:21:35.953
> 
> 标签：java, perforce

我的程序需要使用 Perforce 提供的 Java API 从 Perforce 存储库中读取文件列表。该程序使用共享只读登录名，并在不使用客户端工作区的情况下获取文件。

这一切都很好，但是我遇到的问题是文件似乎总是以 \r\n 行结尾签出。我尝试了各种顽皮的技巧（例如将系统属性 line.separator 设置为 \n），但这些都不起作用。我注意到 p4v 客户端中的行尾样式是在工作区中设置的。我是否需要有一个工作区来设置行尾样式？

不幸的是，虽然有一些文件永远不会改变，我可以将它们作为二进制文件提交，但我检索到的其他文件不能作为二进制文件提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:32:56.667

是 - 本地文件的行尾由调用“同步”时的客户端（又名工作区）设置确定。如果您在没有同步且没有客户端的情况下获取文件，那么您必须“打印”它们。在这种情况下，您必须自己进行行尾翻译。

也许您可以通过创建临时客户端来同步文件。 [这是一个示例](https://github.com/fdrueke/ivyp4/blob/master/src/com/orga/ivy/plugins/p4resolver/P4PublishTransaction.java)（查看方法 P4PublishTransaction）。

# python - 识别代码运行的类

> ID：15223714
> 
> 赞同：1
> 
> 时间：2013-03-05T12:21:52.453
> 
> 标签：python, metaprogramming

在下面的代码中，有人可以告诉我，在标记的行`#whereami`（第 3 行），我如何确定我现在在类 Person 中，而不是在实例化的 Programmer 对象中。

理想情况下，我想要一个类/类型对象，但如果无法返回类名“Person”，则可以使用。

```
class Person(object):
    def opinion(self):
        #whereami
        print "Time for a cup of tea"

class Programmer(Person):
    def opinion(self):
        super(Programmer, self).opinion()
        print "There is no spoon"

if '__name__' == '__main__':
    programmer = Programmer()
    programmer.opinion() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:36:14.287

尝试插入以下行

```
className=self.__class__.__name__ 
```

className 变量将当前类名的值作为字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:34:42.377

采用

```
type('object') 
```

请参阅下面使用 Python3.2 的示例

```
class Person(object):
    def opinion(self):
        print(type(self))
        print ("Time for a cup of tea")

class Programmer(Person):
    def opinion(self):
        super(Programmer, self).opinion()
        print ("There is no spoon")

if '__name__' == '__main__':
    programmer = Programmer()
    programmer.opinion()

p = Person()
p.opinion()
print('\n')
pg = Programmer()
pg.opinion() 
```

**结果**

```
<class '__main__.Person'>
Time for a cup of tea

<class '__main__.Programmer'>
Time for a cup of tea
There is no spoon 
```

您可以看出第一个结果是由“Person”类调用的。

# javascript - 为什么我在 TypeScript 中的伪字典似乎只存储键字符串？

> ID：15223715
> 
> 赞同：0
> 
> 时间：2013-03-05T12:21:57.480
> 
> 标签：javascript, asp.net-mvc, typescript

本着 Ryan Cavanaugh 接受的答案的精神，我不允许链接到该答案，它提出了以下结构：

```
var map: { [email: string]: Customer; } = { }; 
```

为了模拟一个`Customer`带有字符串键的字典，该字符串键是一个电子邮件地址，我试图实现一个类似的伪字典`SelectionOtherInputDescriptor`¹：

```
export class SelectionOtherInputDescriptor {
    constructor(public selectionName: string, public otherKey: any, public otherInputElementId: string) { }
}
export class SelectionOtherInputHelper {
    selectionsWithOther: { [selectionKey: string]: SelectionOtherInputDescriptor; } = {};
    getAllSelectionOthers() {
        var things = $("[" + ATT_SELECTION_OTHER_FOR + "]");           
        for (var i = 0; i < things.length; i++) {         
            var selectionName = $(things[i]).attr(ATT_SELECTION_OTHER_FOR);
            var desc = new SelectionOtherInputDescriptor(selectionName, 0, $(things[i]).attr("id"));
            this.selectionsWithOther[selectionName] = desc;
        };
        for (var i in this.selectionsWithOther) {
            window.console.log(i);
        }
    };
} 
```

但是，我的变量`selectionsWithOther`似乎总是只包含三个字符串（在具有三个选择和其他元素的测试页面中），即`selectionKey`值。

*¹描述当用户在选择元素上选择“其他”时捕获实际值的输入。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:11:59.423

这只是跟踪索引字符串（你的`selectionKey`）：

```
for (var i in this.selectionsWithOther) {
    window.console.log(i);
} 
```

要跟踪映射到该索引的值，您需要：

```
for (var i in this.selectionsWithOther) {
    window.console.log(this.selectionsWithOther[i]); // Will trace 'Object'
    window.console.log(this.selectionsWithOther[i].selectionName); // Should trace the value of the property on that object
} 
```

更多关于 JS 中的关联数组的信息：http: [//www.quirksmode.org/js/associative.html](http://www.quirksmode.org/js/associative.html)

# c# - Transfer 类的 SQL 身份验证

> ID：15223716
> 
> 赞同：1
> 
> 时间：2013-03-05T12:21:59.900
> 
> 标签：c#, .net, sql, authentication, transfer

我在使用传输类传输带有数据的数据库时遇到问题。它工作正常，无需传输数据。有了我得到的数据

> 错误：错误代码 = -1071636471 描述 = SSIS 错误代码 DTS_E_OLEDBERROR。
> 
> 发生 OLE DB 错误。错误代码 0x800040005/ oledb 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80004005 描述：2登录失败。登录来自不受信任的域，不能与 Windows 身份验证一起使用”

该类有一个属性`transfer.DestinationLoginSecure = false;`，当设置为 false 时，不使用集成安全性。我尝试设置各种属性无济于事。

在我使用它的所有其他实例中连接良好的连接字符串。

```
 using (SqlConnection conn = new SqlConnection(Connections.dbConnection_HTOUTER()))
            {
                conn.Open();
                Server server = new Server(new ServerConnection(conn));
                Database dbMaster = server.Databases[ConfigurationManager.AppSettings.Get("dbMaster")];
                Database dbProduction = server.Databases[ConfigurationManager.AppSettings.Get("dbProduction")];
                Transfer transfer = new Transfer(dbMaster);

                string login = ConfigurationManager.AppSettings.Get("login");
                string password = ConfigurationManager.AppSettings.Get("password");

                transfer.CopyAllObjects = true;
                transfer.CopyAllUsers = true;
                transfer.Options.WithDependencies = true;
                transfer.Options.ContinueScriptingOnError = true;

                transfer.DestinationServer = server.Name;
                transfer.DestinationDatabase = dbProduction.Name;
                transfer.DestinationLoginSecure = false;
                transfer.DestinationPassword = password;
                transfer.DestinationLogin = login;

                transfer.CopyAllRules = true;
                transfer.CopyAllRoles = true;

                //transfer.CopyAllObjects = true;

                transfer.DropDestinationObjectsFirst = true;
                transfer.CopySchema = true;
                transfer.CopyData = true;
                transfer.CreateTargetDatabase = false;
                transfer.Options.IncludeIfNotExists = true;
                transfer.Options.Indexes = true;

                transfer.TransferData();

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-26T00:53:37.280

您需要手动设置源服务器和目标服务器的用户、密码。

**这将起作用：**

```
SqlConnectionStringBuilder connectionBuilderOriginDatabase = new SqlConnectionStringBuilder(ConfigurationManager.ConnectionStrings["ORIGIN"].ConnectionString);

ServerConnection originConnection = new ServerConnection(connectionBuilderOriginDatabase.DataSource);
originConnection.LoginSecure = false;//very important
originConnection.Login = connectionBuilderOriginDatabase.UserID;
originConnection.Password = connectionBuilderOriginDatabase.Password;

Server server = new Server(originConnection);
Database dbMaster = server.Databases[ConfigurationManager.AppSettings.Get("dbMaster")];
Database dbProduction = server.Databases[ConfigurationManager.AppSettings.Get("dbProduction")];
Transfer transfer = new Transfer(dbMaster);

string login = ConfigurationManager.AppSettings.Get("login");
string password = ConfigurationManager.AppSettings.Get("password");

transfer.CopyAllObjects = true;
transfer.CopyAllUsers = true;
transfer.Options.WithDependencies = true;
transfer.Options.ContinueScriptingOnError = true;

//Here you are configuring the destination server
transfer.DestinationServer = server.Name;
transfer.DestinationDatabase = dbProduction.Name;
transfer.DestinationLoginSecure = false;
transfer.DestinationPassword = password;
transfer.DestinationLogin = login;

transfer.CopyAllRules = true;
transfer.CopyAllRoles = true;

//transfer.CopyAllObjects = true;

transfer.DropDestinationObjectsFirst = true;
transfer.CopySchema = true;
transfer.CopyData = true;
transfer.CreateTargetDatabase = false;
transfer.Options.IncludeIfNotExists = true;
transfer.Options.Indexes = true; 
```

# python - SQLAlchemy 反射：如何从特定列查询数据？

> ID：15223722
> 
> 赞同：1
> 
> 时间：2013-03-05T12:22:11.660
> 
> 标签：python, mysql, sqlalchemy

使用 SQLAlchemy 反射，如何查询特定列中的数据？

```
testtable = Table('member', Metadata, autoload=True)

def TestConnection():
    data = None
    loopCounter = 0 
    for data in session.query(testtable).filter_by(is_active=1, is_deleted=0): 
        print(loopCounter + 1, data)
        loopCounter += 1
    if data is None:
        raise Exception ("Could not find any data that matches your query")        
    else:
        print("It worked!")

TestConnection() 
```

**上面的查询为我提供了members**表中所有列中的所有数据。但是，我想要的是从列中获取特定数据。例如，我想检索**用户名**和**密码**列，但我无法正确使用语法。以下是我到目前为止的内容：

```
def TestConnection():
    loopCounter = 0 
    for password, username in session.query(testtable).filter_by(is_active=1, is_deleted=0):
        print(loopCounter + 1, data)
        loopCounter += 1
    if data is None:
        raise Exception ("Could not find any data that matches your query")        
    else:
        print("It worked!") 
```

失败并出现错误：

```
Traceback (most recent call last):
File "/home/workspace/upark/src/monitor.py", line 36, in <module>
TestConnection()
File "/home/workspace/upark/src/monitor.py", line 26, in TestConnection
for password, username in session.query(testtable).filter_by(is_active=1, is_deleted=0):
ValueError: too many values to unpack (expected 2) 
```

我正在使用来自 Oracle 的 Python3.2、SQLAchemy0.8 和 mysqlconnector。

**编辑：一些轻微的进展**

刚刚发现我可以在返回所有结果后“过滤”列，如下所示：

```
def TestConnection():
    data = None
    loopCounter = 0 
    for data in session.query(testtable).filter_by(is_active=1, is_deleted=0): 
        print(loopCounter + 1, data.password, data.username)
        loopCounter += 1
    if data is None:
        raise Exception ("Could not find any data that matches your query")        
    else:
        print("It worked!") 
```

这将给出：

```
1 pass1 userone
2 pass2 usertwo 
```

但正如你所看到的，那是在我把所有的列都拿回来之后。我想要的是只从我需要的列中获取数据。例如，成员表有 10 列。为了提高效率，我只需要从其中两个中获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:57:52.813

只需指定要选择的列 [ `session.query(testtable.c.password, testtable.c.username)`] 而不是整个表 [ `session.query(testtable)`]：

```
def TestConnection():
    data = None
    loopCounter = 0 
    for data in session.query(testtable.c.password, testtable.c.username).filter_by(is_active=1, is_deleted=0): 
        pwd, usr = data
        print(loopCounter + 1, pwd, usr)
        loopCounter += 1
    if data is None:
        raise Exception ("Could not find any data that matches your query")        
    else:
        print("It worked!") 
```

# algorithm - 生成数字列表的所有组合，其中组合之和 <= N

> ID：15223727
> 
> 赞同：4
> 
> 时间：2013-03-05T12:22:43.597
> 
> 标签：algorithm, combinations

我有`ArrayList<int>`包含可以在组合中使用的所有数字。我想生成这些不同长度的数字（整数个数）的所有可能组合，但所有组合的总和必须最接近 N，但 <= N（N 是输入数字）。列表中的所有数字都必须（且仅）使用一次。

**例子**

```
N = 10
list = {1, 5, 4, 3, 6, 9, 7, 4, 3, 8, 2, 1, 6, 3, 7} 
```

一种组合是 (1, 5, 4), (3, 6), (9), (7), (4, 3), (8, 2), (1, 6, 3), (7)

谁能帮我解决问题？我正在考虑一些递归实现。我在正确的轨道上吗？

**编辑**

好的，因为我不能完全按照我的意愿解释这个问题:) 让我们让它更简单。如何生成 sum <= N 的所有子列表，并且列表的每个数字只能包含一次。我会自己做剩下的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:19:08.563

有限集 S 的简单 k 组合是 S 的 k 个不同元素的子集。指定子集不会以特定顺序排列它们。

您可以使用 CombinatoricsLib。CombinatoricsLib 是一个用于生成组合对象的 java 库。[https://code.google.com/p/combinatoricslib/](https://code.google.com/p/combinatoricslib/)

使用这个：

```
 public static void main(String[] args) {

           // Create the initial vector
           ICombinatoricsVector<Integer> initialVector = Factory.createVector(
              new Integer[]  {1, 5, 4, 3, 6, 9, 7, 4, 3, 8, 2, 1, 6, 3, 7} );          

           int subsetMaxSize = 5;
           int upperLimit = 10;  
           int lowerLimit = 8;
           for(int i = 1; i <= subsetMaxSize; i++)
           {
               Generator<Integer> gen = Factory.createSimpleCombinationGenerator(initialVector, i);
               for (ICombinatoricsVector<Integer> combination : gen)
               {
                   int sum = vectorSum(combination);
                   if(validateSum(sum, lowerLimit, upperLimit))
                       printVector(combination);
               }   
           }
    }

    public static boolean validateSum(Integer value, Integer lowerLimit, Integer upperLimit)
    {
        if(value <= upperLimit && value > lowerLimit)   
            return true;
        return false;           
    }

    public static Integer vectorSum(ICombinatoricsVector<Integer> vect)
    {
        Integer sum = 0;    
        for(int i = 0; i < vect.getSize(); i++) 
            sum += vect.getValue(i);
        return sum;
    }

    public static void printVector(ICombinatoricsVector<Integer> vect)
    {
        String output = ""; 
        for(int i = 0; i < vect.getSize(); i++)
            output += vect.getValue(i) + ", ";
        System.out.println(output);
    } 
```

将返回输出

```
9, 
1, 9, 
1, 8, 
5, 4, 
5, 4, 
4, 6, 
4, 6, 
3, 6, 
3, 7, 
3, 6, 
3, 7, 
6, 4, 
6, 3, 
6, 3, 
9, 1, 
7, 3, 
7, 2, 
7, 3, 
4, 6, 
3, 6, 
3, 7, 
8, 2, 
8, 1, 
2, 7, 
6, 3, 
3, 7, 
1, 5, 4, 
1, 5, 3, 
1, 5, 4, 
1, 5, 3, 
1, 5, 3, 
1, 4, 4, 
1, 3, 6, 
1, 3, 6, 
1, 6, 3, 
1, 6, 2, 
1, 6, 3, 
1, 7, 2, 
1, 7, 1, 
1, 3, 6, 
1, 8, 1, 
1, 2, 6, 
1, 2, 7, 
1, 1, 7, 
1, 6, 3, 
5, 4, 1, 
5, 3, 2, 
5, 3, 1, 
5, 4, 1, 
5, 3, 2, 
5, 3, 1, 
5, 2, 3, 
5, 1, 3, 
4, 3, 3, 
4, 3, 2, 
4, 3, 3, 
4, 4, 2, 
4, 4, 1, 
4, 3, 2, 
4, 3, 3, 
4, 2, 3, 
3, 6, 1, 
3, 4, 3, 
3, 4, 2, 
3, 4, 3, 
3, 3, 3, 
3, 1, 6, 
6, 3, 1, 
6, 2, 1, 
6, 1, 3, 
7, 2, 1, 
4, 3, 2, 
4, 3, 3, 
4, 2, 3, 
3, 1, 6, 
2, 1, 6, 
2, 1, 7, 
1, 6, 3, 
1, 5, 3, 1, 
1, 5, 3, 1, 
1, 5, 2, 1, 
1, 5, 1, 3, 
1, 4, 3, 2, 
1, 4, 3, 1, 
1, 4, 4, 1, 
1, 4, 3, 2, 
1, 4, 3, 1, 
1, 4, 2, 3, 
1, 4, 1, 3, 
1, 3, 4, 2, 
1, 3, 4, 1, 
1, 3, 3, 2, 
1, 3, 3, 3, 
1, 3, 2, 3, 
1, 6, 2, 1, 
1, 4, 3, 2, 
1, 4, 3, 1, 
1, 4, 2, 3, 
1, 4, 1, 3, 
1, 3, 2, 3, 
1, 2, 1, 6, 
4, 3, 2, 1, 
4, 3, 2, 1, 
4, 2, 1, 3, 
3, 4, 2, 1, 
3, 3, 2, 1, 
3, 3, 1, 3, 
3, 2, 1, 3, 
4, 3, 2, 1, 
4, 2, 1, 3, 
3, 2, 1, 3, 
1, 3, 3, 2, 1, 
1, 3, 2, 1, 3, 
1, 3, 2, 1, 3, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:10:43.750

您可以使用递归，但是如果您能说出原始问题和约束是什么，那么可能会有更好的解决方案。对于递归，它将是这样的：

```
list = {1, 5, 4, 3, 6, 9, 7, 4, 3, 8, 2, 1, 6, 3, 7};
result = {};

function rec(index, max_sum) {
    if(index >= list.length) {
        print result;
        return;
    }
    for each list[i] where i >= index {
        // Case 1 - we take current element and go further
        if(list[i] <= max_sum) {
            result.insert(list[i]);
            rec(index + 1, max_sum - list[i]);
            result.remove(list[i]);
        }

        // Case 2 - we skip current element
        rec(index + 1, max_sum);
    }
}

N = 10;
rec(0, N); 
```

这只会生成所有可能的数字总和不超过 N 的组合。

# mysql - 在 MY SQL 的导出数据库脚本中创建视图语句序列问题

> ID：15223738
> 
> 赞同：0
> 
> 时间：2013-03-05T12:23:09.270
> 
> 标签：mysql, phpmyadmin

我在从 phpmyadmin 或我的 SQL 导出和导入数据库脚本时遇到问题 问题是我的数据库中有多个视图 一些视图也是从视图派生的手动检查并手动执行每个创建语句。

```
EX.
View A1 – Select From Table
View A2 – Select From Table
View A3 – Select From A1 and A2
View A4 – Select From A3 
```

当这些被导出时，我得到创建语句的序列，如

```
A1, A2, A4, A3 (this fails on Create A4 cause A3 is not created at the time) 
```

我想要的是

```
A1, A2, A3, A4 
```

# google-maps-api-3 - Google Maps API v3 - 圈圈

> ID：15223739
> 
> 赞同：-2
> 
> 时间：2013-03-05T12:23:10.340
> 
> 标签：google-maps-api-3, geometry

我想在由点、半径、startAngle 和 stopAngle 定义的地图上绘制圆的扇区。我发现了很多例子，但是对于我的情况来说，多边形等太复杂了。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:18:25.290

圆是没有定义边的对象。只有一个半径和一个中心点。您需要使用多边形来构建一个半圆，因为它是一个两个 sied 对象

**编码并不总是一个简单的出路，而且通常它们是做事的坏方法**（除非你谈论像 JQ/Bootstrap 这样的东西）

这是一个相当简单的软件实现

[http://googlemaps.googlermania.com/google_maps_api_v3/en/draw-semi-circle.html](http://googlemaps.googlermania.com/google_maps_api_v3/en/draw-semi-circle.html)

这在这个问题中提到了 [Google Maps Polygon Incorrectly Rendered](https://stackoverflow.com/questions/13993938/google-maps-polygon-incorrectly-rendered)

他们甚至为您提供了一个可行的示例来破解 [http://maps.forum.nu/temp/gm_bearing.html](http://maps.forum.nu/temp/gm_bearing.html)

# java - Java中MySQL临时表的连接字符串

> ID：15223744
> 
> 赞同：0
> 
> 时间：2013-03-05T12:23:28.640
> 
> 标签：java, mysql

我正在尝试在内存中创建一个临时表，以便在其中存储一些数据并在应用程序生命周期内使用它。

我正在尝试执行以下操作：

```
StringBuilder sb = new StringBuilder();
sb.append("CREATE TEMPORARY TABLE XmlItems ENGINE=MEMORY AS (");
// Continue with columns definitions
sb.append(")");

Class.forName("com.mysql.jdbc.Driver");
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/");
Statement stat = conn.createStatement();
stat.executeUpdate(sb.toString()); 
```

但是会抛出以下异常：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

我猜它必须对连接字符串做一些事情..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:27:29.423

您没有在 jdbc 连接 URL 中提供模式名称。在 URL 末尾添加架构名称后尝试。

```
jdbc:mysql://localhost:3306/myschema 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:28:32.527

检查以确保数据库在这种情况下 mysql 已启动/运行，`String`尽管您没有添加要使用的数据库名称而不是`"jdbc:mysql://localhost:3306/"`使用，但连接看起来很好`"jdbc:mysql://localhost:3306/databae_name"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:29:26.407

连接字符串必须包含要连接的数据库模式。

`DriverManager.getConnection("jdbc:mysql://localhost:3306/myTestDB");`

此外，请确保 MySQL 正在实际运行。“通信链路故障”听起来更像是拒绝连接到端口 3306。

# python - 提高python中函数的性能

> ID：15223749
> 
> 赞同：3
> 
> 时间：2013-03-05T12:23:44.243
> 
> 标签：python, performance, optimization

我有一个具有这种格式的几个 GB 的文本文件

```
0 274 593869.99 6734999.96 121.83 1,
0 273 593869.51 6734999.92 121.57 1,
0 273 593869.15 6734999.89 121.57 1,
0 273 593868.79 6734999.86 121.65 1,
0 273 593868.44 6734999.84 121.65 1,
0 273 593869.00 6734999.94 124.21 1,
0 273 593868.68 6734999.92 124.32 1,
0 273 593868.39 6734999.90 124.44 1,
0 273 593866.94 6734999.71 121.37 1,
0 273 593868.73 6734999.99 127.28 1, 
```

我有一个简单的函数可以在 Windows 上的 Python 2.7 中进行过滤。该函数读取整个文件，选择相同的行`idtile`（第一列和第二列）并返回点列表（x、y、z 和标签）和`idtile`.

```
tiles_id = [j for j in np.ndindex(ny, nx)] #ny = number of row, nx= number of columns
idtile = tiles_id[0]

def file_filter(name,idtile):
        lst = []
        for line in file(name, mode="r"):
            element = line.split() # add value
            if (int(element[0]),int(element[1])) == idtile:
                lst.append(element[2:])
                dy, dx = int(element[0]),int(element[1])
        return(lst, dy, dx) 
```

该文件超过 32 GB，瓶颈是文件的读取。我正在寻找一些建议或示例以加快我的功能（例如：并行计算或其他方法）。

我的解决方案是将文本文件拆分为图块（使用 x 和 y 位置）。该解决方案并不优雅，我正在寻找一种有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:52:05.503

速度的主要规则：少做。

*   您可以创建一个排序版本`huge.txt`并跟踪`idtitle`. 因此，如果您搜索 (223872, 23239)，您已经知道给定信息在文件中的哪个位置，并且可以跳过 ( `file.seek`) 之前的所有内容。有人可能会争辩说，此信息在某种程度上等于['INDEX'](http://en.wikipedia.org/wiki/Index#Computer_science)。
*   您可以使用`mmap`将文件映射到内存中。
*   您可以开始编写“工人”来处理不同的文件/职位
*   您可以将给定的文件传输到 SQL 服务器之类的东西中，并使用标准 SQL 来检索数据。是的，将 32gig 的数据传输到数据库需要时间，但可以将其视为一种预处理。之后，数据库将使用任何方式比您的方法更快地访问数据。

小想法：

*   您可以使用切片而不是`line.split()`避免大量微小的内存分配。

如何使用数据库的概述：

假设你有类似的东西`PostgreSQL`：

```
CREATE TABLE tiles
(
  tile_x integer,
  tile_y integer,
  x double precision,
  y double precision,
  z double precision,
  flag integer
); 
```

然后，您可以将输入文件中的所有空格替换为`|`和所有的`,`（`以创建一个 nice 和 shiney `.csv`）并将其直接输入数据库：`

 ````
 COPY "tiles" from "\full\path\to\huge.txt" WITH DELIMITER "|"; 
```

然后你可以做这样的花哨的事情：

```
SELECT * FROM "tiles";

tile_x | tile_y |     x     |     y      |   z    | flag
-------+--------+-----------+------------+--------+-----
     0 |    274 | 593869.99 | 6734999.96 | 121.83 |    1
     0 |    273 | 593869.51 | 6734999.92 | 121.57 |    1
     0 |    273 | 593869.15 | 6734999.89 | 121.57 |    1
     0 |    273 | 593868.79 | 6734999.86 | 121.65 |    1
     0 |    273 | 593868.44 | 6734999.84 | 121.65 |    1
     0 |    273 |    593869 | 6734999.94 | 124.21 |    1
     0 |    273 | 593868.68 | 6734999.92 | 124.32 |    1
     0 |    273 | 593868.39 |  6734999.9 | 124.44 |    1
     0 |    273 | 593866.94 | 6734999.71 | 121.37 |    1
     0 |    273 | 593868.73 | 6734999.99 | 127.28 |    1 
```

或者是这样的：

```
SELECT * FROM "tiles" WHERE tile_y > 273;

tile_x | tile_y |     x     |     y      |   z    | flag
-------+--------+-----------+------------+--------+-----
     0 |    274 | 593869.99 | 6734999.96 | 121.83 |    1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:39:22.677

也许最好和最快的方法是在（大规模）并行系统上使用 map reduce 算法来解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:37:02.283

您可以通过进行字符串比较来避免在每一行上执行`split()`and ：`int()`

```
def file_filter(name,idtile):
    lst = []
    id_str = "%d %d " % idtile
    with open(name) as f:
        for line in f:
            if line.startswith(id_str):
                element = line.split() # add value
                lst.append(element[2:])
                dy, dx = int(element[0]),int(element[1])
    return(lst, dy, dx) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:39:31.123

我建议您更改代码，以便您读取一次大文件并为每个磁贴 id 编写（临时）文件。就像是：

```
def create_files(name, idtiles=None):
    files = {}
    for line in open(name):
         elements = line.split()
         idtile = (int(elements[0]), int(elements[1]))
         if idtiles is not None and idtile not in idtiles:
             continue
         if idtile not in files:
             files[idtile] = open("tempfile_{}_{}".format(elements[0], elements[1]), "w")
         print >>files[idtile], line
    for f in files.itervalues():
        f.close()
    return files 
```

`create_files()`将返回一个`{(tilex, tiley): fileobject}`字典。

一种在写入每一行后关闭文件的变体，以解决“打开的文件过多”错误。此变体返回一个`{(tilex, tiley: filename}`字典。应该会慢一些。

```
def create_files(name, idtiles=None):
    files = {}
    for line in open(name):
         elements = line.split()
         idtile = (int(elements[0]), int(elements[1]))
         if idtiles is not None and idtile not in idtiles:
             continue
         filename = "tempfile_{}_{}".format(elements[0], elements[1])
         files[idtile] = filename
         with open(filename, "a") as f:
             print >>f, line
    return files 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T12:41:35.957

你的'idtile'似乎有一定的顺序。也就是说，样本数据表明，一旦您遍历某个“idtile”并点击下一个，则不可能再次出现带有该“idtile”的行。如果是这种情况，您可能会在`for`处理完您想要的“idtile”并点击不同的“idtile”后打破循环。在我的头顶上：

```
loopkiller = false
for line in file(name, mode="r"):
    element = line.split()
    if (int(element[0]),int(element[1])) == idtile:
        lst.append(element[2:])
        dy, dx = int(element[0]),int(element[1])
        loopkiller = true
    elif loopkiller:
        break; 
```

这样，一旦你完成了某个“idtile”，你就会停下来；而在您的示例中，您继续阅读直到文件末尾。

如果您的 idtiles 以随机顺序出现，也许您可​​以尝试先编写文件的有序版本。

此外，单独评估您的 idtile 的数字可能会帮助您更快地遍历文件。假设您`idtile`是一个两位数和三位整数的二元组，可能类似于以下内容：

```
for line in file(name, mode="r"):
    element = line.split()
    if int(element[0][0]) == idtile[0]:
        if element[1][0] == str(idtile[1])[0]:
            if element[1][1] == str(idtile[1])[1]:
                if element[1][2] == str(idtile[1])[2]:
                    dy, dx = int(element[0]),int(element[1])
                else go_forward(walk)
            else go_forward(run)
         else go_forward(sprint)
     else go_forward(warp) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T14:47:36.400

这是一些统计数据。随着更多解决方案的出现，我将对其进行更新。以下程序适用于包含问题中重复行的文件。

```
import sys

def f0(name, idtile):
    lst = []
    dx, dy = None, None
    with open(name) as f:
        for line in f:
            pass

"""def f0(name, idtile):
    lst = []
    dx, dy = None, None
    with open(name) as f:
        for line in f:
            line.split()"""

def f1(name, idtile):
    lst = []
    dx, dy = None, None
    with open(name) as f:
        for line in f:
            element = line.split() # add value
            if (int(element[0]),int(element[1])) == idtile:
                lst.append(element[2:])
                dy, dx = int(element[0]),int(element[1])
    return(lst, dy, dx)

def f2(name, idtile):
    lst = []
    dx, dy = None, None
    with open(name) as f:
        for line in f:
            element = line.split() # add value
            pdx, pdy = int(element[0]),int(element[1])
            if (pdx, pdy) == idtile:
                lst.append(element[2:])
                dy, dx = pdx, pdy
    return(lst, dy, dx)

def f2(name, idtile):
    lst = []
    dx, dy = None, None
    with open(name) as f:
        for line in f:
            element = line.split() # add value
            pdx, pdy = int(element[0]),int(element[1])
            if (pdx, pdy) == idtile:
                lst.append(element[2:])
                dy, dx = pdx, pdy
    return(lst, dy, dx)

def f3(name,idtile):
    lst = []
    id_str = "%d %d " % idtile
    with open(name) as f:
        for line in f:
            if line.startswith(id_str):
                element = line.split() # add value
                lst.append(element[2:])
                dy, dx = int(element[0]),int(element[1])
    return(lst, dy, dx)

functions = [f0, f1, f2, f3]

functions[int(sys.argv[1])]("./srcdata.txt",(0, 273)) 
```

计时的 shell 脚本很简单：

```
#!/bin/sh
time python ./timing.py 0
time python ./timing.py 1
time python ./timing.py 2 
```

我更喜欢以这种方式运行它，以避免以前运行的函数影响其他函数的时间。

结果是：

```
0.02user 0.01system 0:00.03elapsed
0.42user 0.01system 0:00.44elapsed
0.32user 0.02system 0:00.34elapsed
0.33user 0.01system 0:00.35elapsed 
```

好消息：**读取文件不是瓶颈**，**消除对 int 的额外传输是有效的**。

坏消息：我现在仍然不知道如何显着优化它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-05T13:30:20.550

我的解决方案是将大文本文件拆分为每个 idtile 的许多小二进制文件。为了更快地阅读文本文件，您可以使用 pandas：

```
import pandas as pd
import numpy as np
n = 400000 # read n rows as one block
for df in pd.read_table(large_text_file, sep=" ", comment=",", header=None, chunksize=n):
    for key, g in df.groupby([0, 1]):
        fn = "%d_%d.tmp" % key
            with open(fn, "ab") as f:
                data = g.ix[:, 2:5].values
                data.tofile(f) 
```

然后您可以通过以下方式获取一个二进制文件的内容：

```
np.fromfile("0_273.tmp").reshape(-1, 4) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-05T12:56:08.497

您可以将过滤器转换为生成器函数：

```
def file_filter(name):
        lst = []
        idtile = None
        for line in file(name, mode="r"):
            element = line.split() # add value
            if idtile is None:
               idtile = (int(element[0]), int(element[1]))
            if (int(element[0]), int(element[1])) == idtile:
                lst.append(element[2:])
                dy, dx = int(element[0]),int(element[1])
            else:
                yield lst, dx, dy
                lst = []
                idtile = None 
```

如果文件在 idtile 上排序，此函数应`list_of_data, dx, dy`为每个 idtile返回一个元组

新的你可以像这样使用它：

```
for lst, dx, dy in file_filter('you_name_it'):
    process_tile_data(lst, dx, dy) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-05T12:59:45.090

我建议比较一下完整阅读过程所用的时间，以及只阅读线条而不对它们做任何事情的时间。如果这些时间很接近，您唯一能做的就是改变方法（拆分文件等），因为您可能可以优化的是数据处理时间，而不是文件读取时间。

我还在您的代码中看到了两个值得修复的时刻：

```
with open(name) as f:
    for line in f:
        pass #Here goes the loop body 
```

1.  用于`with`显式关闭您的文件。您的解决方案应该在 CPython 中运行，但这取决于实现，并且可能并不总是那么有效。

2.  您将字符串转换为`int`两次。这是一个相对缓慢的操作。通过重用结果删除第二个。

PS它看起来像地球表面上一组点的深度或高度值数组，并且表面被分割成瓷砖。:-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-05T13:19:08.357

好的。如果您需要多次执行此操作，您显然需要创建某种索引。但是，如果这不是一个频繁的活动，最好的选择是像这样多线程。

```
NUMWORKERS = 8
workerlist = []
workQ = Queue.Queue()

def file_filter(name,idtile, numworkers):
    for i in range(NUMWORKERS):
        worker = threading.Thread(target=workerThread, args=(lst,))
    lst = []
    for line in file(name, mode="r"):
        workQ.put(line)                
    for i in range(NUMWORKERS):
        workQ.put(None)
    workQ.join()
    return lst , idtile[0], idtile[1]

def workerThread(lst):
    line = workQ.get()
    if not line:
        return
    element = line.split() # add value
    if (int(element[0]),int(element[1])) == idtile:
        lst.append(element[2:]) 
```

如果这是每个idtile都发生的非常频繁的活动，那么解决方案将大不相同。对多个 idtile 一起执行此操作将为您提供最佳的摊销性能。因为任何已知数量的 idtile 都可以在文件的单个循环中处理。`

# android - GridView 中的 EditText

> ID：15223750
> 
> 赞同：0
> 
> 时间：2013-03-05T12:23:44.890
> 
> 标签：android, android-gridview

我想在我的网格视图项目中显示编辑文本。问题是在这种情况下 GridView 不处理 ItemClick 事件（因为它写[在这里](https://stackoverflow.com/questions/8183609/onitemclicklistener-not-triggered-on-android-gridview)）

我的 GridView 项目如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/main_resume_item_layout"
            android:layout_height="160dip"
            android:layout_width="150dip">

<ImageView
    android:id="@+id/item_icon"
    android:layout_height="120dip"
    android:layout_width="fill_parent"
    android:src="@drawable/icon"
    android:layout_gravity="center"/>

<LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_marginTop="70dip"
    android:orientation="vertical"
    android:paddingLeft="30dip"
    android:background="#FF5"
    android:paddingRight="10dip">

    <TextView
        android:id="@+id/created"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Created"
        android:gravity="center"
        android:textColor="#000"/>

    <TextView
        android:id="@+id/resume_date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="18.01.2013"
        android:gravity="center"
        android:textColor="#000"/>

    <ProgressBar
        android:id="@+id/resume_progress"
        android:layout_width="fill_parent"
        android:layout_height="6dip"
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:max="70"
        android:progress="50"
        android:background="@drawable/progress"
        android:progressDrawable="@drawable/progress"/>

</LinearLayout>

<TextView
    android:id="@+id/resume_title"
    android:layout_below="@id/item_icon"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Example resume"
    android:textColor="#5544FF"
    android:textStyle="bold"
    android:textSize="18sp"
    android:gravity="center"/>

<EditText
    android:id="@+id/resume_title_edit"
    android:layout_below="@id/item_icon"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Example resume"
    android:textColor="#5544FF"
    android:textStyle="bold"
    android:textSize="18sp"
    android:gravity="center"
    android:inputType="text"
    android:visibility="invisible"/> 
```

我想知道有没有办法在 GridView 中有 EditText 并处理 ItemClick 事件？也许有人知道一些解决方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:34:40.027

```
android:focusableInTouchMode="false"
android:focusable="false" 
```

将此添加到布局中除edittext之外的所有其他视图。

或者，您可以在适配器类中添加点击事件。

# asp.net - 我对下拉列表的视图状态有疑问

> ID：15223751
> 
> 赞同：0
> 
> 时间：2013-03-05T12:23:48.097
> 
> 标签：asp.net, visual-studio-2008

我尝试在链接按钮单击事件上填充 gridview 行内的下拉列表。Dropdown 已填充，但是当我选择值并回发以供以后处理时，DropDown 显示为空..所以这意味着没有为控件写入视图状态..视图状态在页面、GridView、Dropdown 的任何地方都启用。并且请不要告诉我在 onInit 中填充 Dropdown，因为那样它将完全没有意义。有人可以帮助它已经一个星期我刚刚在这种情况下完全无助..
这个问题之前被问过，该问题的链接在这里[DropDownList-Items are null on postback](https://stackoverflow.com/questions/15202717/dropdownlist-items-are-null-on-postback) code is present there..

# asp.net-mvc-3 - 使用 jquery 访问对象成员

> ID：15223756
> 
> 赞同：0
> 
> 时间：2013-03-05T12:24:01.937
> 
> 标签：asp.net-mvc-3, jquery

我有对象列表作为 javascript 中服务器的响应。我如何访问对象成员或如何使用 jquery 循环访问对象。？

这是我当前的脚本。

```
main.addDrodownOptionsforRoom = function (selector, data)
        {
            var dropdown = $(selector);
            if (dropdown !== null)
            {
                dropdown.html("");
                dropdown.append($('<option></option>').val("").html("Select..."));
                dropdown.append($('<option></option>').val("All").html("All"));
                $.each(data, function (index, val)
                {
                    dropdown.append($('<option></option>').val(val).html(index)); 
                });
                $(selector).removeAttr("disabled");
            }
        }; 
```

在“数据”中，我可以看到对象列表。任何机构都可以告诉我如何访问其中的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:47:23.903

试试这个

```
main.addDrodownOptionsforRoom = function (selector, data)
{
    var dropdown = $(selector);
    if (dropdown !== null)
    {
        dropdown.html("");
        var html = '';
        html += '<option value="">Select...</option>';
        html += '<option value="ALL">All</option>';
        dropdown.append(html);

        var options = '';
        $.each(data, function (key, val)
        {
            options += '<option value="'+key+'">'+val+'</option>';
        });
        dropdown.append(options);

        $(selector).removeAttr("disabled");
    }
}; 
```

但是由于我不知道您的对象是如何构建的，因此我无法为您提供确切的解决方案。如果是这样的：

```
obj = [name:'a name',number:'555']; 
```

您可以执行以下操作：

```
alert(obj.name); // displays 'a name'
alert(obj.number); // displays '555' 
```

# sql - 使用“限制”查询不返回结果

> ID：15223757
> 
> 赞同：1
> 
> 时间：2013-03-05T12:24:21.273
> 
> 标签：sql, oracle

这是我的查询：

```
select * 
  from (SELECT "MYTABLE".* FROM "MYTABLE" ORDER BY "COMPANY" ASC, "SURNAME" ASC) 
 where ROWNUM between 0 and 20 
```

效果如预期，但是当我尝试获取接下来的 20 条记录时：

```
select * 
  from (SELECT "MYTABLE".* FROM "MYTABLE" ORDER BY "COMPANY" ASC, "SURNAME" ASC) 
 where ROWNUM between 20 and 40 
```

结果集是空的？为什么会这样，我该怎么做才能获得接下来的 20 条记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:31:32.400

您必须嵌套 rownum ，因为 rownum 仅在获取行后才会增加。所以说哪里`rownum > 1`永远不会返回一行。例如

```
select *
  from (select a.*, rownum r 
          from (select mytable.*
                  from mytable 
                 order by company asc, surname asc) a
         where rownum <= 40
       )
 where r >= 20
 order by r; 
```

或者你可以使用`row_number()`分析

```
select *
  from (select mytable.*, row_number() over (order by company asc, surname asc) rn
          from mytable) 
 where rn between 20 and 40
 order by rn; 
```

# django - 如何在 vim 中运行 django 单元测试？

> ID：15223768
> 
> 赞同：3
> 
> 时间：2013-03-05T12:24:57.483
> 
> 标签：django, vim, integration-testing, nose

我一直在为 vim 使用一个名为[qtpy](https://github.com/ameade/qtpy-vim/issues)的鼻子测试运行器，当我的测试很简单 unittest.TestCase 时一切都很好，但是当我需要一个数据库时，很明显鼻子测试运行器在运行之前不会同步数据库。

是否存在会在每次运行之前同步数据库的测试运行程序？如果不是，人们在运行更像集成的 django 测试时如何解决这个问题？

如果重要的话，我正在使用模拟设置文件，所以我的 DJANGO_SETTINGS_MODULE 已设置。此外，创建了 sqlite db 文件并可供测试运行程序使用。但是当鼻子运行“django”测试时，它无法同步数据库并导致类似这样的结果

```
 23     return Database.Cursor.execute(self, query, params)
 24 DatabaseError: no such table: foo_bar
 25 -------------------- >> begin captured logging << --------------------
 26 django.db.backends: DEBUG: (0.001) CREATE TABLE ROLLBACK_TEST (X INT); args=()
 27 django.db.backends: DEBUG: (0.000) INSERT INTO ROLLBACK_TEST (X) VALUES (8); ar...
 28 django.db.backends: DEBUG: (0.000) SELECT COUNT(X) FROM ROLLBACK_TEST; args=()
 29 django.db.backends: DEBUG: (0.001) DROP TABLE ROLLBACK_TEST; args=()
 30 django.db.backends: DEBUG: (0.000) INSERT INTO "foo_bar" ("first", "last" ...
 31 --------------------- >> end captured logging << - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:18:38.097

你在使用 django 内置的[unittest](https://docs.djangoproject.com/en/dev/topics/testing/overview/#writing-tests)吗？

`from django.utils import unittest`

django unittest 会在运行每个测试之前自动删除和同步数据库

似乎您在运行测试并让它识别您的 django 项目和设置的方式上可能存在一些问题？如果你使用 django 的 unittest，你可以无缝地测试你的 django 项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T14:04:57.970

我终于找到了一个用 python 编写的与 django 一起使用的坚如磐石的 vim 插件。

[https://github.com/JarrodCTaylor/vim-python-test-runner](https://github.com/JarrodCTaylor/vim-python-test-runner)

它只需要在项目根目录下有一个配置文件（切换项目时无需反复修改 vimrc）

:e .vim-django

将您的每个应用程序名称放入逗号分隔列表中，以及您希望它们运行的​​设置（即 - test / dev / ci / etc）

```
{"app_name": "website", "environment": "test"} 
```

上面的 django 应用程序只有一个已安装的应用程序（网站），我想使用测试设置运行所有内容。

您还需要使用鼻子作为测试运行器，因此请确保您在测试设置中有此设置

```
INSTALLED_APPS += ('django_nose', )
TEST_RUNNER = 'django_nose.NoseTestSuiteRunner' 
```

# javascript - 确定一条路线是否属于谷歌地图中的另一条路线

> ID：15223771
> 
> 赞同：3
> 
> 时间：2013-03-05T12:25:00.907
> 
> 标签：javascript, html, css, jsp, google-maps

![在此处输入图像描述](../Images/b7ebcedfaf32eb094c719201412df15c.png)我使用谷歌地图的折线构造函数将一个城市划分为多个区域。

现在我必须在每个区域内浮动一些路线，并检查哪些路线有共同的路线图。

让我举个例子，只取 2 条路线

我想在 Google 地图上显示 4 个位置：`A`、`B`和。`A'``B'`

`A--->B`构成路线1。

`A'--->B'`构成路线2。

现在我的要求是检查路线 1 是否与路线 2 在同一路线内。

我必须对多条路线做同样的事情。但最初我想知道是否可以在谷歌地图中为两条路线完成。

我关注了这篇文章 [https://groups.google.com/forum/?fromgroups=#!topic/google-maps-api/0tU9wr2eMpI](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-api/0tU9wr2eMpI)并做了同样的事情。

但是这段代码只检查路线是否在直线上。它不考虑路线图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:27:32.963

这是一个使用 google.maps.geometry.poly.isLocationOnEdge[的快速而肮脏的示例。](http://jsfiddle.net/vCWFQ/3/)

循环遍历折线的 MVC 数组的路径，并对照另一条折线检查它。

```
 path.forEach(function(element, index) {
       console.log(element);    
        if (google.maps.geometry.poly.isLocationOnEdge(element, polyline)) {
                console.log(element + " on edge");
            } else {
                console.log(element + " not on edge");
            }
    }); 
```

编辑：更新了小提琴，这样你就可以看到另一行在哪里并稍微修改了坐标。

# regex - 正则表达式仅适用于整数而不是空白字符串

> ID：15223774
> 
> 赞同：-7
> 
> 时间：2013-03-05T12:25:26.920
> 
> 标签：regex

请你帮帮我，我需要一个正则表达式来只允许整数并且字符串不能为空。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:27:12.410

```
/^-?\d+$/ 
```

此正则表达式将匹配一个或多个数字。所以不会根据需要允许空白，并且只允许整数
实际上`+`之后`\d`强制输入字符串中至少存在一位数字。开头检查 a ，以下
使其可选。`-``-``?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:26:42.597

你应该试试这个：

```
^\d+$
```

^：要捕获的字符串的开头
$：要捕获的字符串的结尾
\d：所有数字（相当于 [0-9]）
+：至少一个类

# android - 移动浏览器上的 HTML5 视频全屏 (android)

> ID：15223777
> 
> 赞同：6
> 
> 时间：2013-03-05T12:25:30.013
> 
> 标签：android, html, html5-video, fullscreen

经过大量研究，我还没有找到我的问题的任何答案。我想通过**FullScreenAPI**实现我的目标，但任何移动浏览器都不支持它（Firefox 19 和黑莓浏览器除外 - 但我需要一个跨浏览器解决方案）。[这是来源](http://caniuse.com/fullscreen)。我还在原生 android 浏览器和移动 Chrome 上使用适当的前缀全屏功能测试了**FullScreenAPI**。每个函数都是 type `undefined`。

另一种方法是**rtsp 协议**，它通常由外部播放器处理。[这](https://stackoverflow.com/a/9371037/1069604)是假设 m.youtube.com 使用该解决方案的人 - 我认为这不是真的（也许答案已经过时）。Youtube 使用原生视频的全屏。在移动 Chrome 上，当您点击播放按钮时，电影会立即全屏显示。

虽然，我搜索的每个来源都*告诉*我，原生全屏在 android 浏览器上是不可能的，但**HTML5 视频元素及其原生控件**仍然为我们提供了一个可以完美运行的全屏按钮。

由于我不想要本机控件，任何人都可以分享任何巧妙的解决方案`How to trigger HTML5 video fullscreen button's`**`event`**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:06:18.777

您可以在播放 HTML5 视频时使用绝对的关闭按钮以 100% 的宽度/高度弹出窗口。

旧的，简单的和肮脏的把戏......但有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T10:00:04.123

所有你需要为移动设备处理“webkitbeginfullscreen”和“webkitendfullscreen”事件，我认为它会

```
<!doctype html>
<html>
<head>
 <title>video</title>
 <script type="text/javascript">
 function videoControl() {
    var myVideo = document.getElementById('myVideo');
    myVideo.addEventListener("webkitbeginfullscreen", enteringFullscreen, false);
    myVideo.addEventListener("webkitendfullscreen", exitingFullscreen, false);
}

function enteringFullscreen() {
    alert("entering full-screen mode");
}

function exitingFullscreen() {
    alert("exiting full-screen mode");
}
 </script>
</head>
<body onload="videoControl()">
 <div id="videoContainer">
 <video id="myVideo" src="myVideo.m4v" autoplay controls>
 </video>
 </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T03:56:03.480

在用户交互事件处理程序中尝试 video.webkitEnterFullscreen()（例如：点击）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T23:11:26.627

大多数人面临这个问题是因为 HTML5 视频是在内部实现的`<iframe>`。

在 iframe 中添加三个属性以在 android chrome 中启用全屏 `<iframe allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-04T04:02:20.963

这是我使用的应该在任何地方都可以使用的东西：

```
function toggleFullScreen() {
  var doc = window.document;
  var elem = doc.body; //the element you want to make fullscreen

  var requestFullScreen = elem.requestFullscreen || elem.webkitRequestFullScreen || elem.mozRequestFullScreen || elem.msRequestFullscreen;
  var cancelFullScreen = doc.exitFullscreen || doc.webkitExitFullscreen || doc.mozCancelFullScreen|| doc.msExitFullscreen;

  if(!(doc.fullscreenElement || doc.mozFullScreenElement || doc.webkitFullscreenElement || doc.msFullscreenElement)) {
      requestFullScreen.call(doc.body);
  }
  else {
    cancelFullScreen.call(doc);
  }
} 
```

# c++ - CMake：何时使用 add_definitions 而不是 set_target_properties（目标 PROPERTIES COMPILE_DEFINITIONS 定义）

> ID：15223779
> 
> 赞同：38
> 
> 时间：2013-03-05T12:25:44.150
> 
> 标签：c++, cmake

在 CMake 文档中，我们可以阅读：

**[添加定义](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:add_definitions)**

> 为当前目录及以下目录中的源代码添加标志到编译器命令行。

**[目录上的 COMPILE_DEFINITIONS 属性](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_dir:COMPILE_DEFINITIONS)**

> COMPILE_DEFINITIONS：用于编译目录源的预处理器定义。

**[目标上的 COMPILE_DEFINITIONS 属性](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_tgt:COMPILE_DEFINITIONS)**

> COMPILE_DEFINITIONS：用于编译目标源的预处理器定义。

**[源文件的 COMPILE_DEFINITIONS 属性](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_sf:COMPILE_DEFINITIONS)**

> COMPILE_DEFINITIONS：用于编译源文件的预处理器定义。

`COMPILE_DEFINITIONS`和`add_definitions`功能似乎重叠。`COMPILE_DEFINITIONS`属性似乎更灵活。

所以看起来 COMPILE_DEFINITIONS 属性完成了 add_definitions 所做的一切，甚至更多。

**那么，在哪些情况下我们*必须*调用 add_definitions 因为 COMPILE_DEFINITIONS 属性不能使用？**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-07T04:40:45.980

`add_definitions`自从十多年前第一个 CMake 版本上线以来，CMake 就已经存在。

`COMPILE_DEFINITIONS`只是更新、更灵活、更细粒度的方法。

它们都将永远存在：由于世界上 99% 以上的现有`CMakeLists.txt`文件都使用`add_definitions`，因此将其删除是不明智的。CMake 开发人员非常努力地保持向后兼容性……有时会损害清晰度和简单性。有时以多种不同的方式做本质上相同的事情。

所以：`add_definitions`主要用于配置预先存在的 CMakeLists 文件——对于那些自`COMPILE_DEFINITIONS`引入之前就已经存在的项目。而且，由于这些项目使用它，任何基于人们从阅读这些 CMakeLists 文件中学到的新项目也很有可能使用`add_definitions`.

但是，如果`COMPILE_DEFINITIONS`单独使用就足以满足您的需求，那肯定没有错。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-09T01:15:39.260

如果你想添加`compile definition for target`，你可以使用这个`target_compile_definitions`更方便的功能，比如`compile definitions`一次添加多个，比如：

```
add_executable (trie_io_test demo12.cpp)
target_compile_definitions(trie_io_test PRIVATE UNIT_TESTING=1 IO_TEST=1) 
```

您可以从这个[https://cmake.org/cmake/help/v3.0/command/target_compile_definitions.html](https://cmake.org/cmake/help/v3.0/command/target_compile_definitions.html)看到这个问题[如何为目标可执行文件设置多个编译定义以](https://stackoverflow.com/q/30546677/6329006)获取更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T18:22:39.110

我并不是说**必须**使用某些东西。

这只是你的习惯问题。

一些建议：

*   当您想为当前目录及以下目录中的源添加到编译器命令行时，请使用**add_definitions 。**它只是更短的类型。

*   使用**COMPILE_DEFINITIONS**对目标或特定源进行微调。

# jquery - JQuery Safari 动画跳跃

> ID：15223781
> 
> 赞同：0
> 
> 时间：2013-03-05T12:25:52.553
> 
> 标签：jquery, safari, hover, jquery-animate

让这个导航概念在 Chrome 和 Firefox 中运行良好，但在 Safari 中却非常不稳定。它似乎先在 Safari 中进行一半动画，然后才能正常运行。有任何想法吗？

```
<ul id="navigation">
    <a href="#"><li id="first"><span id="logo"></span><span class="navigation-text">Home</span></li></a>
    <a href="#"><li class="standard"><span class="gallery_icon"></span><span class="navigation-text">Gallery</span></li></a>
    <a href="#"><li class="standard"><span></span><span class="navigation-text">Gallery</span></li></a>
    <a href="#"><li class="standard"><span></span><span class="navigation-text">GalleryGallery123</span></li></a>
    <li id="last" class="standard"></li>
</ul>

<script type="text/javascript">
$(document).ready(function() {

    // On hover:
    $('#navigation li').hoverIntent(function () {
        width = $(this).children('span:nth-child(2)').width();
        text = $(this).children('span:nth-child(2)');          

        var newwidth = (width + 15) // Original width + 15px padding        
        text.filter(':not(:animated)').animate({"width":"0px"}, 0).show(); // Make the width 0px and make the element visible
        text.animate({"width":+newwidth+"px"}, 300); // Animate the width to the new size

    },
    function () {
        text.filter(':not(:animated)').animate({"width":"0px"}, 150); // Animate the width to 0px and hide the element
        text.animate({"width":+width+"px","float":"left"}, 0);
        setTimeout(function() {
            text.hide();
        },100);
    });

});

</script> 
```

JSF中：

[http://jsfiddle.net/7HWax/](http://jsfiddle.net/7HWax/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:48:16.583

事实证明 Safari 不喜欢将动画设置为 0px。将 0px 更改为 1px 排序动画闪烁 :)

# java - Http Session - 实现类

> ID：15223783
> 
> 赞同：1
> 
> 时间：2013-03-05T12:26:00.220
> 
> 标签：java

我对 HTTPSession 接口的实现有疑问 - javax.servlet.http

也就是说，在哪里可以找到 Http Session 的实际实现？

我的目的是我需要修改 HTTPSession.getID 函数的实现，该函数为每个会话提供唯一的会话 ID 以满足我的需要。

为此，我需要了解 getID 函数是如何实现的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:30:20.280

该实现由您的 servlet 容器提供。为什么要拥有特定的会话 ID？很可能有一种更简单的方法来解决您的潜在问题，而不是通过弄乱 Servlet API 的实现来影响会话 ID。

# html - 将值设置为 GWT 复选框

> ID：15223786
> 
> 赞同：1
> 
> 时间：2013-03-05T12:26:03.620
> 
> 标签：html, gwt, user-interface, checkbox

我想将值（数字或字符串）设置为复选框。这段代码

```
final CheckBox checkBox = new CheckBox("Some label");
checkBox.getElement().setAttribute("value", i.toString());
checkBox.getElement().getStyle().setProperty("color", colorList.get(i));
checkBox.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            Object sender = event.getSource();
            if (sender == checkBox) {
                CheckBox checkBox = (CheckBox)event.getSource();
                Window.alert(checkBox.getFormValue());
            }
        }
}); 
```

创建以下 HTML：

```
<td align="left" style="vertical-align: top;">
<span class="gwt-CheckBox" value="3" style="color: rgb(128, 105, 155);">
<input id="gwt-uid-4" type="checkbox" value="on" tabindex="0">
<label for="gwt-uid-4">Some label</label>
</span>
</td> 
```

该属性`value`设置为`span`而不是`input`。`Window.alert(checkBox.getFormValue())`显示带有字符串“on”而不是“3”的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:28:46.073

属性“value= on / off”对复选框有一些预定义的含义。所以不要使用属性“值”来存储数字。

如果您真的想存储数字，请使用您自己的自定义属性，例如 -

```
checkBox.getElement().getFirstChildElement().setAttribute( "customProperty", "3" ); 
```

并访问属性使用 -

```
checkBox.getElement().getFirstChildElement().getAttribute( "customProperty" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:42:09.780

设置`checkBox`要`"someValue"`使用的值[`setFormValue`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/CheckBox.html#setFormValue%28java.lang.String%29)

```
 checkBox.setFormValue("someValue"); 
```

# c++ - cin 不会循环工作

> ID：15223793
> 
> 赞同：0
> 
> 时间：2013-03-05T12:26:24.797
> 
> 标签：c++, for-loop, cin

好的，所以我正在尝试学习 c++，我正在做一个模拟，但 cin 对我不起作用:(

```
void Simulation::initialize(){
    cout<<"Choose number of players: " <<endl;
    cin>> numberOfPlayer;
    string name;
    int accurasy;
    int life;
    for(int index=0; index <=numberOfPlayer;++index){
        cout<<"Enter name, accurasy and life for player"<<index +1 <<": " <<endl;
        cin>>name;
        cin>>accurasy;
        cin>>life;
        Kombatant comb(name,accurasy,life);
        vect->push_back(comb);

    }
} 
```

这是对我不起作用的代码。我正在尝试将玩家添加到模拟中。一切都按预期工作，直到我进入 for 循环。出于某种原因，它只在第一次循环中有效，直到我开始工作。然后它跳过生命输入和之后的每个输入（所有循环中的每个输入）。任何人有任何想法是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:30:07.627

这是因为最后一个换行符仍在输入缓冲区中。因此，当您循环输入名称时，将看到换行符并给您一个空输入。

您必须告诉输入流明确跳过它：

```
// all your input...

// Skip over the newline in the input buffer
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n') 
```

# lua - 改变电晕中移动物体的行进方向

> ID：15223796
> 
> 赞同：0
> 
> 时间：2013-03-05T12:26:28.853
> 
> 标签：lua, coronasdk

我是 Corona 的新手，正在寻找操纵移动物体的一些帮助：

基本上我想要一个设置，当我可以单击移动对象时，会弹出一个对话框，让我可以选择更改对象的速度和行进矢量。我很确定我可以弄清楚事件处理和对话框，但我坚持简单地将行进方向更改为新向量

在一个简单的例子中，我有一个矩形向上移动屏幕，如下所示：

```
obj1 = display.newRect(500, 800, 10, 40)
transition.to(obj1,{x=500, y = 100, time = 40000}) 
```

我知道我可以通过调整时间来改变速度，但如果我使用

```
obj1:rotate(30) 
```

将物体旋转 30 度，我如何让它向新的方向移动？

我应该使用物理 - 例如线性脉冲，而不是过渡？

抱歉，如果这是一个愚蠢的问题，但我一直在寻找解决方案但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:26:19.730

这听起来像你正在尝试做的事情。您必须修改位以适合您的代码，但这是一个工作示例。所以如果你将它复制到一个新的 main.lua 文件并运行它，你可以看到它是如何工作的。（单击以旋转 obj）。

```
local obj = display.newRect(50,50, 10, 40)
local SPEED = 1
local function move(event)

    obj.x = obj.x + math.cos(math.rad(obj.rotation)) * SPEED
    obj.y = obj.y + math.sin(math.rad(obj.rotation)) * SPEED

end

local function rotate(event)
    obj.rotation = obj.rotation + 45
end

Runtime:addEventListener("enterFrame", move)
Runtime:addEventListener("tap", rotate) 
```

基本上，我使用“enterFrame”事件来“移动”矩形，方法是使用每帧的旋转（很容易修改）重新计算对象位置的 x 和 y。

# asp.net-web-api - Web-Api 身份验证问题

> ID：15223797
> 
> 赞同：0
> 
> 时间：2013-03-05T12:26:29.417
> 
> 标签：asp.net-web-api

这是我的第一个 ASP.NET 项目，我想轻松登录。我试过这个：[链接](https://stackoverflow.com/questions/11014953/asp-net-web-api-authentication)

但我无法理解基本的东西：

```
public class AccountController : ApiController
{
    public bool Post(LogOnModel model)
    {
        if (model.Username == "john" && model.Password == "secret")
        {
            FormsAuthentication.SetAuthCookie(model.Username, false);
            return true;
        }
        return false;
    }
} 
```

1）如何编写对该控制器的正确调用？

2）不应该像“凭证”或“用户名+密码”这样的东西而不是LogOnModel吗？

# ssrs-2008 - 在 SSRS 中，如何在参数值的下拉列表中显示两列？

> ID：15223798
> 
> 赞同：0
> 
> 时间：2013-03-05T12:26:29.993
> 
> 标签：ssrs-2008, reporting-services

在 SSRS 中，如何在参数值的下拉列表中显示两列？例如，如何在参数下拉列表中显示产品 ID 和名称？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:38:40.777

我将创建一个**计算字段**，它连接您用来填充**Parameter**的**Dataset**`ProductID`中的and 。`ProductName`

 ****例如使用**数据集**：

![在此处输入图像描述](../Images/e6470352c2be66453220f9bb67196330.png)

我创建了一个用表达式调用的新**计算字段：**`ProductIDName`

```
=CStr(Fields!ProductID.Value) & ": " & Fields!ProductName.Value 
```

现在使用这个新字段来填充您的**Parameter**：

![在此处输入图像描述](../Images/aa3c5cf68d0b5782006a7c79ae4fde76.png)

最终结果：

![在此处输入图像描述](../Images/f5fce2a164768615107de4d698630fb4.png)****

# spring - 具有通用项目模板的许多类/接口

> ID：15223799
> 
> 赞同：1
> 
> 时间：2013-03-05T12:26:34.067
> 
> 标签：spring, hibernate, templates, jsf-2

我正在寻找一个通用项目模板来构建具有以下技术的 Web 应用程序：JSF2、Spring3 和 Hibernate4

我找到了[一篇](http://www.onlinetechvision.com/?p=566)提出模板的文章，但我犹豫了，因为我的数据库中的每个表都需要 5 个类/接口：

*   2个接口（dao + service）
*   2个实现类
*   1个豆

那这正常吗？有人可以帮助更好的架构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:31:31.713

我将在 Spring Data JPA 模块之上构建架构。这将为您留下一个用于实体的类和一个用于存储库的接口（在正常情况下）。

有关更多信息，请查看[Spring 文档](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/)。

**缩短示例：**

弹簧配置：

```
<!-- Directory to scan for repository classes -->
<jpa:repositories
   base-package="x.y.z.repositories" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
  <property name="entityManagerFactory" ref="entityManagerFactory" />
  <property name="jpaDialect">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
  </property>
</bean>

<bean id="entityManagerFactory"
  class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="jpaVendorAdapter">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
      <property name="generateDdl" value="true" />
      <property name="database" value="HSQL" />
    </bean>
  </property>
</bean> 
```

实体：

```
@Entity
public class Product {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(name = "id")
  private Long id;

  @NotNull
  private String name;
} 
```

存储库：

```
public interface ProductRepository extends CrudRepository<Product, Long> {

  public List<Product> findByName(String name);

} 
```

为了使用存储库，您只需注入它：

```
@Autowired
private ProductRepository productRepository; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:43:15.613

如果将 CGLib 作为依赖项包含在内，则可以摆脱接口。除非您从一开始就有不同的服务实现，否则您将不需要它们。仅在确实需要时才介绍它们（如果您问我，1:1 Service:ServiceImpl 是一种反模式）。

Hibernates/JPA`EntityManager`已经是一个通用的 CRUD DAO，所以你不必为每个实体创建一个 DAO。在必要时立即介绍它们，并`EntityManager`在您的服务中使用直到那时。

免责声明：这是一种精简的 Java EE 方法，非常接近 Adam Bien 在他的《Java EE 模式》一书中推荐的方法。我们为春天调整了这个，到目前为止它工作得很好。

顺便说一句，这是一个很好的问题，Java 人经常忘记问自己“我们真的需要这个吗？”。

# wordpress - the_editor_content 过滤器在添加/编辑帖子部分更改 wp admin 中其他文本区域的内容？

> ID：15223801
> 
> 赞同：1
> 
> 时间：2013-03-05T12:26:36.417
> 
> 标签：wordpress, filter, richtextarea

我在后添加/编辑部分的 wp admin 中有多个文本区域，我正在尝试更改 wp 的默认 textarea 的内容，但是当我执行 the_editor_content 过滤器时，它会更改默认 textarea 的内容，但它也会更改其他textarea的内容，有没有办法改变默认textarea的内容？

注意* 其他文本区域有不同的 id

我使用的代码：

```
add_filter( 'the_editor_content', 'my_editor_content' );
function my_editor_content() {
    global $post;
    return search_keywords($post->post_content, $keyword1,$keyword2,$keyword3);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:51:39.267

我认为你需要`default_content`像这样

```
add_filter( 'default_content', 'my_editor_content' );

function my_editor_content( $content ) {

$content = "This is my default content!";

return $content;
} 
```

# web-services - 用于实时系统的 SOAP 与 REST Web 服务

> ID：15223802
> 
> 赞同：0
> 
> 时间：2013-03-05T12:26:36.683
> 
> 标签：web-services, rest, soap, real-time

哪种类型的 Web 服务最适合实时系统？我的应用程序服务器旨在始终尽可能快地向客户端提供信息，我发现最好的方法是设置 Web 服务与客户端通信。我的系统是一个“实时”系统，并且可靠性、可扩展性和快速响应是最关键的。

我将不胜感激任何建议或帮助！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:33:23.140

我假设如果您正在进行实时数据更新，则数据很小（通常是增量或小数据）。

SOAP 服务的开销比 REST 服务大。单独的 SOAP 信封可能大于它包含的数据的大小。

我更喜欢 REST 服务主要是因为这个原因；与基于 SOAP 的服务相比，它们可以是轻量级和高效的。

# mule - ESB MULE 将参数传递给 java 方法

> ID：15223807
> 
> 赞同：2
> 
> 时间：2013-03-05T12:26:45.923
> 
> 标签：mule, invoke, payload, inbound

我使用 MULE 版本 3.3.0 CE，我想从入站的标头中获取一些值，然后将其传递给 java 方法，在 java 方法中对传递的值进行一些更改，最后我再次将它从 java 方法传递到出站？ ？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:20:33.747

您可以仅使用 MEL 来执行此操作，而不是将您的 Java bean 绑定到 Mule API（使用`Callable`），例如：

```
<invoke object-ref="yourBean"
        method="yourMethod"
        methodArguments="#[message.inboundProperties['inboundPropertyName']]" />

<set-property propertyName="outboundPropertyName"
              value="#[payload]" /> 
```

需要注意的是消息有效负载受`invoke`元素影响。如果这是一个问题，那么您可以使用：

```
<expression-component>
    propVal = app.registry.yourBean.yourMethod(message.inboundProperties['inboundPropertyName']);
    message.outboundProperties['outboundPropertyName'] = propVal;
</expression-component> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T13:00:41.583

1.  让你的 Java 组件实现 org.mule.api.lifecycle.Callable
2.  在其 onCall 中，您可以获得如下消息：

    MuleMessage 消息 = eventContext.getMessage();

3.  现在您可以获得入站属性：

    Object someProp = message.getInboundProperty("some_prop_name");

4.  对其进行操作后，将其作为出站属性放回：

    message.setOutboundProperty("some_prop_name", someProp);

# vba - Excel VBA复制查询将数据从工作表复制到文本文件

> ID：15223810
> 
> 赞同：0
> 
> 时间：2013-03-05T12:26:48.887
> 
> 标签：vba, excel

我有一个小代码，可以从工作表中复制第 1-300 行的所有文本，然后将其保存到 UTF-8 格式的文本文件中。我希望它扩展，所以它只复制带有文本的行中的文本。我不是 VBA 人，请帮助我。

```
Sub tgr()

Dim oStream As Object
Dim sTextPath As String
Dim sText As String
Dim rIndex As Long, cIndex As Long

sTextPath = Application.GetSaveAsFilename("import.txt", "Text Files, *.txt")
If sTextPath = "False" Then Exit Sub

For rIndex = 1 To 300
  If rIndex > 1 Then sText = sText & vbNewLine
  For cIndex = 1 To Columns("BC").Column
    If cIndex > 1 Then sText = sText & vbTab
    sText = sText & Sheets("IMPORT-SHEET").Cells(rIndex, cIndex).Text
  Next cIndex
Next rIndex

Set oStream = CreateObject("ADODB.Stream")
With oStream
  .Type = 2
  .Charset = "UTF-8"
  .Open
  .WriteText sText
  .SaveToFile sTextPath, 2
  .Close
End With

Set oStream = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:45:11.260

试试这个，它应该希望排除所有没有文本的行。

```
Sub tgr()

Dim oStream As Object
Dim sTextPath As String
Dim sText As String
Dim sLine As String
Dim rIndex As Long, cIndex As Long

sTextPath = Application.GetSaveAsFilename("import.txt", "Text Files, *.txt")
If sTextPath = "False" Then Exit Sub

sText = ""

For rIndex = 1 To 300
  sLine = ""
  For cIndex = 1 To Columns("BC").Column
    If cIndex > 1 Then 
      sLine = sLine & vbTab
    End If
    sLine = sLine & Sheets("IMPORT-SHEET").Cells(rIndex, cIndex).Text
  Next cIndex
  If Not Len(Trim(Replace(sLine, vbTab, ""))) = 0 Then
    If rIndex > 1 Then
      sText = sText & vbNewLine & sLine
    End If
  End If
Next rIndex

Set oStream = CreateObject("ADODB.Stream")
With oStream
  .Type = 2
  .Charset = "UTF-8"
  .Open
  .WriteText sText
  .SaveToFile sTextPath, 2
  .Close
End With

Set oStream = Nothing

End Sub 
```

# java - 面板内的 JavaFX 面板自动调整大小

> ID：15223812
> 
> 赞同：49
> 
> 时间：2013-03-05T12:26:57.557
> 
> 标签：java, css, javafx-2, fxml, pane

我有一个只有一个 FXML 文件的 JavaFX 应用程序。在这个文件中，我有一个 AnchorPane，里面有一个 StackPane。这是屏幕截图：

![我的面板应用程序内的面板](../Images/51ac8b1bfd41cb37dba9380962a70e80.png)

当我启动这个应用程序时，我想使用 AnchorPane 自动调整 StackPane 的大小。因此; StackPane 将自动获取当前可用的宽度和高度。在我调整应用程序大小的那一刻，AnchorPane 正在自动调整大小，但 StackPane 保持其固定大小。

如何自动调整 StackPane 的大小并使其在其父面板内完全拉伸？

**我的代码**

*主.java*

```
package app;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class Main extends Application {

  public static void main(String[] args) {
      Application.launch(args);
  }

  @Override
  public void start(Stage stage) throws Exception {
      Parent root = FXMLLoader.load(getClass().getResource("Main.fxml"));
      Scene scene = new Scene(root,800,600);
      scene.getStylesheets().add(this.getClass().getResource("/app/style1.css").toExternalForm());
      stage.setScene(scene);
      stage.show();
  }
} 
```

*主控制器.java*

```
package app;

import java.net.URL;
import java.util.ResourceBundle;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.StackPane;

public class MainController implements Initializable {

   @FXML
   private AnchorPane anchorPane;
   @FXML
   private StackPane stackPane;

   @Override
   public void initialize(URL url, ResourceBundle rb) {
     stackPane.setPrefSize(anchorPane.getPrefWidth(), anchorPane.getPrefHeight()); //didn't work
   }    
} 
```

*主文件*

```
<?xml version="1.0" encoding="UTF-8"?>
<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane fx:id="anchorPane" xmlns:fx="http://javafx.com/fxml" fx:controller="app.MainController">
    <StackPane fx:id="stackPane" ></StackPane>
</AnchorPane> 
```

*样式1.css*

```
#anchorPane { 
    -fx-border-width: 2px;
    -fx-border-color: chartreuse;
}
#stackPane {
    -fx-border-width: 2px;
    -fx-border-color: red;

    /* didn't work */
   -fx-hgap: 100%;
   -fx-vgap: 100%;
} 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-05T12:59:14.633

经过数小时的搜索和测试，终于在发布问题后得到了它！

您可以使用值为“0.0”的“ ***AnchorPane.topAnchor、AnchorPane.bottomAnchor、AnchorPane.leftAnchor、AnchorPane.rightAnchor*** ”fxml 命令来适应/拉伸/对齐 AnchorPane 内的子元素。因此，这些命令告诉子元素在调整大小时跟随其父元素。

我更新的代码 Main.fxml

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane fx:id="anchorPane" xmlns:fx="http://javafx.com/fxml" fx:controller="app.MainController">
    <!--<StackPane fx:id="stackPane" ></StackPane>--> <!-- replace with the following -->
    <StackPane fx:id="stackPane" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" ></StackPane>
</AnchorPane> 
```

结果如下：

![在此处输入图像描述](../Images/7784a35edf9755d597766e46fbd585b0.png)

对于 api 文档：[http ://docs.oracle.com/javafx/2/api/javafx/scene/layout/AnchorPane.html](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/AnchorPane.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-18T13:13:08.260

我在 SceneBuilder 中设计了一个 GUI，试图让主容器适应任何窗口大小。它应始终为 100% 宽。

这是您可以在 SceneBuilder 中设置这些值的地方：

![SceneBuilder 中的 AnchorPane 约束](../Images/e6b68760f86c838a68e882f8d531cb1b.png)

切换虚线/红线实际上只会添加/删除 Korki 在他的解决方案中发布的属性（AnchorPane.topAnchor 等）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-09T01:46:35.910

也见[这里](https://stackoverflow.com/questions/22270994/javafx-fxml-how-to-make-the-child-to-extend-its-size-to-fit-the-parent-pane/22271898?noredirect=1#22271898)

```
@FXML
private void mnuUserLevel_onClick(ActionEvent event) {
    FXMLLoader loader = new FXMLLoader(getClass().getResource("DBedit.fxml"));
    loader.setController(new DBeditEntityUserlevel());

    try {
           Node n = (Node)loader.load();
           AnchorPane.setTopAnchor(n, 0.0);
           AnchorPane.setRightAnchor(n, 0.0);
           AnchorPane.setLeftAnchor(n, 0.0);
           AnchorPane.setBottomAnchor(n, 0.0);
           mainContent.getChildren().setAll(n);
    } catch (IOException e){
           System.out.println(e.getMessage());
    }
} 
```

该场景是将子 fxml 加载到父 AnchorPane 中。为了让孩子根据其父母使用 AnChorPane.setxxxAnchor 命令进行伸展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-14T05:08:16.060

没必要让步。

只需**选择窗格**，**右键单击**然后**选择适合父级**。

它会自动调整窗格大小以锚定窗格大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-14T05:20:05.300

这很简单，因为您使用的是**FXMLBuilder**。

只需按照以下简单步骤操作：

1.  在 FXMLBuilder 中打开 FXML 文件。
2.  选择堆栈窗格。
3.  打开布局选项卡 [FXMLBuilder 的左侧选项卡]。
4.  设置在舞台调整大小期间要计算窗格大小的边值，如 TOP、LEFT、RIGHT、BOTTOM。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-18T08:37:32.320

如果您使用的是 Scene Builder，您将在右侧看到一个手风琴面板，该面板通常具有三个选项（“属性”、“布局”和“代码”）。在第二个（“布局”）中，您将看到一个名为“[父布局] 约束”的选项（在您的情况下为“AnchorPane 约束”）。

您应该将“0”放在代表父布局的元素的四个侧面。

# c++ - 三等式条件带来奇怪的结果

> ID：15223813
> 
> 赞同：0
> 
> 时间：2013-03-05T12:27:00.373
> 
> 标签：c++, debugging, visual-studio-2012

我正在编写一个简单的代码来以后序迭代地打印二叉树，但我偶然发现了这个奇怪的调试步骤：

![在此处输入图像描述](../Images/65b403d4ab106ba86bf9a752e23d5843.png)

图像没有以任何方式进行 photoshop 或修改，“locals”窗口显示两个指针具有不同的值，但是当将它们与自身和 NULL 进行比较时，相等性返回 true 和“Wat??” 打印出来了，怎么回事？？

我错过了什么吗？

如果我将其重写为

```
if(pointer1 == NULL && pointer2 == NULL)
    cout << "This won't be printed"; 
```

它工作正常

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T12:30:42.133

相等比较运算符 ( `operator ==`) 是与左侧关联的**二元运算符。**因此，您的条件：

`pointer1 == pointer2 == NULL`

变成：

`(pointer1 == pointer2) == NULL`，它变成：

`true == NULL`如果`(pointer1 == pointer2)`; 或者

`false == NULL`如果`(pointer1 != pointer2)`.

由于`NULL`转换为 boolean `false`，因此此条件的计算结果为`true`if 且仅当`pointer1 != pointer2`。

如您所见，这与：

```
(pointer1 == NULL && pointer2 == NULL) 
```

它评估为`true`当且仅当既不是`pointer1`也不`pointer2`是`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:33:28.280

它像这样工作

编译器首先检查，pointer1 == pointer2，它是假的（整数值 0）。现在使用 NULL 检查结果 0，NULL 也为零。因此它返回true。

# java - WebSockets 和异步 Servlet 技术之间有什么联系？

> ID：15223815
> 
> 赞同：5
> 
> 时间：2013-03-05T12:27:13.857
> 
> 标签：java, html, servlets, asynchronous, websocket

从我对 WebSocket 和异步 Servlet 技术的基本了解来看，似乎两者都是支持*服务器将*数据推送到浏览器的技术。我想了解这两种技术的重叠之处？它们是互补的，还是具有共同目标的两种技术？

PS：我从客户端和服务器的角度来看这两种技术之间的联系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:42:23.200

从 wiki 的定义来看：“WebSocket 是一种通过单个 TCP 连接提供全双工通信通道的 Web 技术”，因此它就像一个客户端和服务器之间的通信协议，就像 HTTP 协议一样。

异步 Servlet 技术是 Java 用于处理异步请求的 servlet 解决方案。它只是一种在服务器端支持异步的编程方法，而不关心客户端和服务器之间的通信协议（这是 servlet 容器的工作）。

目前使用 servlet 规范 3，不支持 WebSockets。但似乎我们可以在下一个 Servlet 规范中看到，然后我们可以直接在 Tomcat 或 Jetty 等一些 Servlet 容器下使用 WebSockets，但异步 Servlet 技术可能仍然和我们今天使用的一样。

这只是我的理解，希望它是正确的和帮助。

# jquery - 如何使用jquery将字符串转换为时间

> ID：15223824
> 
> 赞同：1
> 
> 时间：2013-03-05T12:27:34.850
> 
> 标签：jquery, asp.net

我有这样的字符串`"8:00 Am"`我需要将它转换为时间格式我怎么能用jquery做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:29:06.457

你可以使用[date.js](http://www.datejs.com/test/parseExact/index.html)

例子

```
Date.parseExact("8:00 AM", "hh:mm tt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:30:17.050

如果您正在使用，请`date.js`尝试

```
Date.parseExact("8:00 Am", "hh:mm tt"); 
```

如果您正确加载了 javascript，这将为您提供日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:39:17.130

**[工作演示](http://jsfiddle.net/vuURb/25/)**

```
 var time = Date.parse('8:00 AM');
 alert(time); 
```

# c# - 应用内购买 在 WINDOWS STORE 应用中

> ID：15223827
> 
> 赞同：0
> 
> 时间：2013-03-05T12:27:45.147
> 
> 标签：c#, windows-8, windows-store-apps, in-app-purchase

我们正在使用 C# 开发 Windows Store 应用程序。我的申请是新闻报纸申请。
如果**用户当时想购买（下载）任何报纸，应用内购买将起作用，之后如果用户想下载任何其他报纸，则必须再次检查应用内购买（身份验证）。**
我在网上搜索了很多并尝试了 MSFT 示例，但我没有得到我需要的解决方案。你能建议我如何实现这些类型的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:21:53.373

由于您的应用内购买数量有限，因此您需要在此处使用第三方提供商。有几个，但一个想法是使用贝宝进行购买。

[http://paypal.github.com/Windows8SDK/](http://paypal.github.com/Windows8SDK/)

# apache - 如何使多个帐户共享一个public_html 网络空间？

> ID：15223831
> 
> 赞同：0
> 
> 时间：2013-03-05T12:27:59.310
> 
> 标签：apache

给定带有 cPanel 的 VPS 上的 Apache/2.2.22，我希望多个帐户共享一个 public_html，如下所示：
`ln -s /home/site1/public_html /home/site2/public_html`

显然权限是大问题。是否可以正确配置用户/组以使其正常工作？

# java - JVM 执行应用程序时是否多次读取 jar 文件？

> ID：15223834
> 
> 赞同：4
> 
> 时间：2013-03-05T12:28:20.017
> 
> 标签：java, jvm

对于长时间运行的程序，JVM 是否`.jar`多次从磁盘读取文件，还是只读取一次并且整个图像都在内存中，直到 JVM 终止？

我正在运行一项大约需要 26 小时的工作，并且在接近尾声时出现了一个未定义的对象异常 ( `NoClassDefFoundError`)，我认为这可能是由于我正在更改代码并`.jar`从开发环境重新导出 (当应用程序运行时，我在磁盘上与旧磁盘相同的位置创建了一个新磁盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:08:46.627

不，JVM 每次需要加载新类时都会从 jar 中读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:19:23.570

你可能想用标志运行你的代码，`-verbose:class`你会发现类加载非常懒惰。JVM 只加载它绝对必须继续运行的类。如果在你的程序结束时，你正在做的事情需要一个以前绝对不需要的类，它就会在那时被加载。

这很好地解释了您遇到的错误，您应该注意到您不应该替换正在运行的 jar（或类）文件，正是出于这个原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:32:38.680

如果您正在使用导入并正常使用类，则每个类只使用一次。

如果您使用类加载器，反射比您可以进行额外的读取和“非计划行为” - 这意味着每个类很多次。

# bigdata - 大数据文本分析

> ID：15223838
> 
> 赞同：2
> 
> 时间：2013-03-05T12:28:32.917
> 
> 标签：bigdata

你们能推荐一些可以对大数据（多结构）进行文本分析并且应该是开源的好工具或框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:33:59.930

查看 NLTK [http://nltk.org/](http://nltk.org/)和 Google Prediction API。我认为这是好东西。

# java - 识别会话超时

> ID：15223841
> 
> 赞同：5
> 
> 时间：2013-03-05T12:28:52.680
> 
> 标签：java, servlets, session-timeout

我正在使用 servlet 构建一个 java web 棋盘游戏。我需要知道用户何时没有回答 30 秒，我正在使用

```
session.setMaxInactiveInterval(30); 
```

但是一旦时间结束，我需要在服务器端知道，这样我才能完全制作这个播放器。

就像现在一样，一旦玩家返回并尝试做某事，他将获得超时，我可以在服务器上看到。

一旦会话超时，我如何在 servlet 中知道？！

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T12:44:08.497

您需要实现[`HttpSessionListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)接口。它在创建或销毁会话时接收通知事件。特别是，它的方法`sessionDestroyed(HttpSessionEvent se)`在会话被销毁时被调用，这发生在超时时间结束/会话无效之后。您可以通过调用获取存储在会话中的信息，`HttpSessionEvent#getSession()`然后对会话进行任何必要的安排。此外，请务必在以下位置注册您的会话侦听器`web.xml`：

```
<listener>
    <listener-class>FQN of your sessin listener implementation</listener-class>
</listener> 
```

如果您最终想区分失效和会话超时，您可以在侦听器中使用以下行：

```
long now = new java.util.Date().getTime();
boolean timeout = (now - session.getLastAccessedTime()) >= ((long)session.getMaxInactiveInterval() * 1000L); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:24:24.283

我最终使用了 HttpSessionListener 并以大于 setMaxInactiveInterval 的间隔刷新。

因此，如果在 40 秒后的下一次刷新中，使用的 30 秒没有做任何事情，我将进入 sessionDestroyed()。

同样重要的是，您需要创建新的 ServletContext 才能访问 ServletContext。

```
ServletContext servletContext=se.getSession().getServletContext(); 
```

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T20:03:05.310

根据空闲时间间隔猜测的另一种方法是在用户触发注销时在会话中设置一个属性。例如，如果您可以在处理用户触发的注销的方法中添加如下内容：

```
httpServletRequest.getSession().setAttribute("logout", true);
// invalidate the principal
httpServletRequest.logout();
// invalidate the session
httpServletRequest.getSession().invalidate(); 
```

那么您可以在 HttpSessionListener 类中包含以下内容：

```
@Override
public void sessionDestroyed(HttpSessionEvent event) {
    HttpSession session = event.getSession();
    if (session.getAttribute("logout") == null) {
        // it's a timeout
    }
} 
```

# ios - 无法正确加载 iPhone 4" 图像

> ID：15223842
> 
> 赞同：1
> 
> 时间：2013-03-05T12:28:54.013
> 
> 标签：ios, ios5

我的应用程序应该支持 iOS 5.0+ 我有背景 UIImage，它应该根据设备加载正确的图像。因此，我创建了 5 张具有相应分辨率的图像。

*   图片.png
*   img@2x.png
*   img-568h@2x.png
*   img~ipad.png
*   img@2x~ipad.png

我还设置了 Default-568h@2x.png 初始图像。然后我在 viewDidLoad 中检测我的应用正在运行和使用哪个设备

```
[bkgImageView setImage:[UIImage imageNamed:@"img.png"]]; 
```

加载适当的图像。所有分辨率都加载得很好，除了 iPhone 4" 之一，即 img-568h@2x.png。如果我明确加载这个

```
[bkgImageView setImage:[UIImage imageNamed:@"img-568h@2x.png"]]; 
```

比例不正确。那么如何自动或手动加载 4" 视网膜图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:24:28.240

添加`-568h`到文件名的末尾不起作用。唯一支持的修饰符是`@2x`,`~ipad`和`~iphone`. 唯一`-568h`可行的情况是启动映像，其中映像必须专门命名为`Default-568h@2x.png`.

您应该使用自动布局（或支柱和弹簧）来相应地调整您的屏幕。

您的问题是它会自动拉伸已经足够大的图像。

解决方案：

如果您为该设备显式加载图像，则应加载“image-568h”，并让它自动添加@2x。这样，它就知道这是一张高分辨率图像，并且不会尝试拉伸它。

此外，您可以在底部设计具有额外空间以适应 4 英寸屏幕的图像，而不是检测设备，将图像设置为 Aspect Fill，并让它为较小的设备剪辑。

# c# - 使异步任务接口向后兼容 monodroid

> ID：15223846
> 
> 赞同：0
> 
> 时间：2013-03-05T12:29:05.927
> 
> 标签：c#, xamarin.android, xamarin, xamarin-studio

我在将返回类型定义为任务的核心类库中为存储库提供了一堆接口。这些接口在其他项目中用于定义异步方法。

我需要在 Xamarain monodroid 项目中实现这些相同的接口，并且想知道如何在不使用异步等待的情况下使用相同的返回类型，因为 MonoDroid 尚不支持。如果可能的话，我根本不想修改现有的核心库接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:49:53.567

从技术上讲，您不必*使用*`async`/ `await`；这比“手工”做要容易得多。您的实现只需返回`Task`从未`null`启动且已经启动的 s（如果适用）。

[TAP 文档](http://msdn.microsoft.com/en-us/library/hh873175.aspx)有一些有用的技术和指南。一种密钥类型`TaskCompletionSource<TResult>`可用于包装任何异步实现（例如，APM）。同步实现[可以](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)使用(这`Task.FromResult`只是.`TaskCompletionSource``Task.Factory.StartNew` `Task.Run``ContinueWith`

换句话说，所有 .NET 4.0 TPL 技术都可以使用，只要您返回`Task`的 s 始终启动。（获得一个未启动的唯一方法`Task`是使用构造函数构造它`Task`而不是调用`Start`。所以只要你不这样做，你应该没问题。）

# python - Django如何处理任何一种形式的内容？

> ID：15223851
> 
> 赞同：0
> 
> 时间：2013-03-05T12:29:23.507
> 
> 标签：python, django, django-forms, request

用户可以提交 POST 请求。通过上传文件或使用服务器上的示例。发布文件效果很好，但我在实施第二部分时遇到了麻烦。这是我的模型：

```
class UploadFileForm(forms.Form):
    file  = forms.FileField()
    from_server = forms.BooleanField(required=False,initial=False) 
```

我的模板。我认为最好使用两种形式。但是我无法在我的视图中检查传入数据的内容/类型/键。

```
<div class="fieldWrapper">
    <form action="flot" enctype="multipart/form-data" method="post">{% csrf_token %}
        <label for="id_file">File:</label>
        {{ form.file }}
        <input id="upload" type="submit" value="Upload">
</form>
</div>

<div class="fieldWrapper">
<form action="flot" method="post">{% csrf_token %}
    <label for="id_from_server">Gebuik een sample file op de server</label>
             {{ form.from_server }}
        <input id="server" type="submit" value="Go" name="Go">
        <!--<input id="upload" type="submit" value="Go">-->
</form>
</div> 
```

这是我的看法。我不确切知道如何检查他们从哪个表单提交的传入数据。看看`request.POST.getlist('Go')`我的最后一次尝试。测试方面，我将返回一个 Http404。

```
if request.method == 'POST':
    form = UploadFileForm(request.POST, request.FILES)
    if form.is_valid(): 
        if 'Go' in request.POST.getlist('Go'): 
            raise Http404 
        else:
            err, line_z1, line_z2 = handle_uploaded_file(request.FILES['file'])
            if err == None:
                return render_to_response('flot.html',
                                          {
                                          'form': form,
                                          'line1':simplejson.dumps(line_z1),
                                          'line2':simplejson.dumps(line_z2)
                                          },
                                          context_instance=RequestContext(request))
    else:
        form = UploadFileForm()
        return render_to_response('flot.html',
        {'form': form,
         'error': err
         },
         context_instance=RequestContext(request))

else:
    form = UploadFileForm()
    return render_to_response('flot.html',
                             {'form': form},
                             context_instance=RequestContext(request)) 
```

# excel - 在 F# (Office.Interop) 中按字母顺序对 Excel 行进行排序

> ID：15223856
> 
> 赞同：2
> 
> 时间：2013-03-05T12:29:35.240
> 
> 标签：excel, sorting, f#, office-interop

我正在使用 Visual Studio 2010 中的 Excel 互操作来尝试按字母顺序对所有这些数据行进行排序。有些已经按字母顺序排列。

```
Accountancy Graduate, Trainees  Banking, Insurance, Finance
Accountancy Graduate, Trainees  Customer Services
Accountancy Graduate, Trainees  Education
Accountancy Graduate, Trainees  Health, Nursing
Accountancy Graduate, Trainees  Legal
Accountancy Graduate, Trainees  Management Consultancy
Accountancy Graduate, Trainees  Media, New Media, Creative
Accountancy Graduate, Trainees  Oil, Gas, Alternative Energy
Accountancy Graduate, Trainees  Public Sector & Services
Accountancy Graduate, Trainees  Recruitment Sales
Accountancy Graduate, Trainees  Secretarial, PAs, Administration
Accountancy Graduate, Trainees  Telecommunications
Accountancy Graduate, Trainees  Transport, Logistics 
```

我的代码的当前版本如下（我让我的代码在将其放入 fs 文件之前以交互方式工作）。

```
#r "office.dll"
#r "Microsoft.Office.Interop.Excel.dll"

open System;;
open System.IO;;
open Microsoft.Office.Interop.Excel;;

let app = new ApplicationClass(Visible = true)
let inputBook = app.Workbooks.Open @"C:\Users\simon.hayward\Dropbox\F# Scripts\TotalJobsSort\SortData.xlsx" //work
//let inputBook = app.Workbooks.Open @"C:\Users\Simon Hayward\Dropbox\F# Scripts\TotalJobsSort\SortData.xlsx"  //home
let outputBook = app.Workbooks.Add()
let inSheet = inputBook.Worksheets.[1] :?> _Worksheet
let outSheet = outputBook.Worksheets.[1] :?> _Worksheet

let rows = inSheet.UsedRange.Rows.Count;;

let toSeq (range : Range) =
      seq {
           for r in 1 .. range.Rows.Count do
                  for c in 1 .. range.Columns.Count do
                      let cell = range.Item(r, c) :?> Range
                      yield cell
              }
for i in 1 .. rows do 

      let mutable row = inSheet.Cells.Rows.[i] :?> Range

      row |> toSeq |> Seq.map (fun x -> x.Value2.ToString()) |> Seq.sort |> 

     (outSheet.Cells.Rows.[i] :?> Range).Value2 <- row.Value2;;

app.Quit();; 
```

但是类型有问题。退出命令前的最后一行

```
(outSheet.Cells.Rows.[i] :?> Range).Value2 <- row.Value2;; 
```

智能感知用红色下划线，我得到的错误是

“这个表达式应该有类型 seq -> 'a 但这里有类型 unit”。

我得到了 VS 试图告诉我的内容，但我现在已经多次尝试解决这个问题，但我似乎无法解决类型问题。

谁能告诉我如何将管道设置为正确的类型，以便输出写入我的输出表？

编辑 1：这是我得到的完整错误消息，其中 sorted 变量注释如下

```
let sorted = row |> toSeq //|> Seq.map (fun x -> x.Value2.ToString()) |> Seq.sort 
```

错误信息是：-

> System.Runtime.InteropServices.COMException (0x800A03EC)：来自 HRESULT 的异常：System.RuntimeType.ForwardCallToInvokeMember 的 0x800A03EC(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData) at Microsoft.Office.Interop.Excel.Range .get_Item(Object RowIndex, Object ColumnIndex) at FSI_0122.toSeq@34-47.Invoke(Int32 c) in C:\Users\Simon Hayward\Dropbox\F# Scripts\TotalJobsSort\sortExcelScript.fsx:Microsoft.FSharp 的第 36 行。 Collections.IEnumerator.map@109.DoMoveNext(b& ) 在 Microsoft.FSharp.Collections.IEnumerator.MapEnumerator `1.System-Collections-IEnumerator-MoveNext() at Microsoft.FSharp.Core.CompilerServices.RuntimeHelpers.takeOuter@651[T,TResult](ConcatEnumerator`2 x，单位 unitVar0) 在 Microsoft.FSharp.Core.CompilerServices.RuntimeHelpers.takeInner@644[T,TResult](ConcatEnumerator `2 x, Unit unitVar0) at <StartupCode$FSharp-Core>.$Seq.MoveNextImpl@751.GenerateNext(IEnumerable`1&下一个）在 Microsoft.FSharp.Core.CompilerServices.GeneratedSequenceBase`1.MoveNextImpl() at Microsoft.FSharp.Core.CompilerServices.GeneratedSequenceBase`1.System-Collections-IEnumerator-MoveNext() at Microsoft.FSharp.Collections.SeqModule.ToArray[T](IEnumerable `1 source) at Microsoft.FSharp.Collections.ArrayModule.OfSeq[T](IEnumerable`1 source) at .$FSI_0122.main@() in C:\Users\Simon Hayward\Dropbox\F# Scripts\TotalJobsSort\sortExcelScript.fsx:line 42 由于错误而停止

编辑 2：这个问题可能是由于 toSeq 函数被设计为将整个工作表变成一个序列吗？在我应用它的地方，我只希望它适用于一行。

我尝试将 toSeq 中的 r 变量限制为 1，但这没有帮助。

我的实际数据是锯齿状数组这一事实是否重要？它并不总是每行有 3 个条目，它在 1 到 4 之间变化。

编辑 3：

这是我的代码的当前迭代，基于 Tomas 的建议

```
#r "office.dll"
#r "Microsoft.Office.Interop.Excel.dll"

open System;;
open System.IO;;

open Microsoft.Office.Interop.Excel;;

let app = new ApplicationClass(Visible = true);;
let inputBook = app.Workbooks.Open @"SortData.xlsx" //workbook
let outputBook = app.Workbooks.Add();;
let inSheet = inputBook.Worksheets.[1] :?> _Worksheet
let outSheet = outputBook.Worksheets.[1] :?> _Worksheet

let rows = inSheet.UsedRange.Rows.Count;;
let columns = inSheet.UsedRange.Columns.Count;;

// Get the row count and calculate the name of the last cell e.g. "A13"
let rangeEnd = sprintf "A%d" columns

// Get values in the range A1:A13 as 2D object array of size 13x1
let values = inSheet.Range("A1", rangeEnd).Value2 :?> obj[,]

// Read values from the first (and only) column into 1D string array
let data = [| for i in 1 .. columns -> values.[1, i] :?> string |]
// Sort the array and get a new sorted 1D array
let sorted1D = data |> Array.sort
// Turn the 1D array into 2D array (13x1), so that we can write it back
let sorted2D = Array2D.init 1 columns (fun i _ -> data.[i])

// Write the data to the output sheet in Excel
outSheet.Range("A1", rangeEnd).Value2 <- sorted2D 
```

但是因为实际数据在每一行中都有可变数量的条目，所以我得到了标准范围异常错误（这至少是对过去几天的 HRESULT 异常错误的改进）。

所以我需要为每一行定义列，或者只是将行的长度绑定到 for 循环中的一个变量。（我猜）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:07:14.870

看起来您`|>`在行尾有一个附加运算符`Seq.sort`- 这意味着列表已排序，然后编译器尝试将其传递给执行赋值的表达式（它不接受任何参数并且具有类型`unit`）。

应该编译这样的东西（尽管可能存在其他一些运行时问题）：

```
for i in 1 .. rows do 
  let row = inSheet.Cells.Rows.[i] :?> Range
  let sorted = row |> toSeq |> Seq.map (fun x -> x.Value2.ToString()) |> Seq.sort
  (outSheet.Cells.Rows.[i] :?> Range).Value2 <- Array.ofSeq sorted 
```

请注意，您不需要标记`row`为可变，因为代码会创建一个副本（并且 - 在我的版本中 - 将其分配给一个新变量`sorted`）。

我还使用`Array.ofSeq`将排序后的序列转换为数组，因为我认为 Excel 互操作更适用于数组。

在范围上设置`Value2`属性时，范围的大小应与您分配给它的数组的大小相同。此外，根据您要设置的范围，您可能需要一个二维数组。

**编辑**关于运行时错误，我不完全确定您的代码有什么问题，但这是我将如何进行排序（假设您只有一列带有字符串值并且您想要对行进行排序）：

```
// Get the row count and calculate the name of the last cell e.g. "A13"
let rows = inSheet.UsedRange.Rows.Count
let rangeEnd = sprintf "A%d" rows

// Get values in the range A1:A13 as 2D object array of size 13x1
let values = inSheet.Range("A1", rangeEnd).Value2 :?> obj[,]
// Read values from the first (and only) column into 1D string array
let data = [| for i in 1 .. rows -> values.[i, 1] :?> string |]
// Sort the array and get a new sorted 1D array
let sorted1D = data |> Array.sort
// Turn the 1D array into 2D array (13x1), so that we can write it back
let sorted2D = Array2D.init rows 1 (fun i _ -> data.[i])

// Write the data to the output sheet in Excel
outSheet.Range("A1", rangeEnd).Value2 <- sorted 
```

# c# - 无法运行从 c# 创建的 .exe 文件

> ID：15223857
> 
> 赞同：0
> 
> 时间：2013-03-05T12:29:35.550
> 
> 标签：c#, exe

我在 Visual Studio 2010 中使用 C# 创建了一个 Windows 窗体应用程序，连接 SQL server 中的数据库。在我的所有开发完成后，我复制在我的机器中生成的 exe 文件并粘贴到另一台机器上并尝试执行它，但它不起作用。

我可以看到该进程在任务管理器中启动，但在 5 秒后关闭。我什至尝试为此应用程序创建设置并安装在该机器上，但我仍然面临同样的问题。

但在我的机器中，这两种方式都可以完美运行。任何人都可以帮助我找到我出错的地方。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:32:02.477

也许您有一些引用的程序集没有与应用程序本身一起复制。

或者，连接字符串在从另一台机器运行时无效（如果您使用本地 SQL 数据库，或在网络上或其他任何机器上，并且在另一台机器上无法访问）

或者，您无权在另一台机器上运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:36:23.023

由于您没有提供错误，因此您得到的答案和评论是有根据的猜测。

**您应该检查事件查看器是否有错误...**

这将使您了解正在发生的事情。如果您无法修复它，**请将此信息添加到您的问题**中。

由于您没有发布异常消息，因此您可能没有正确[捕获异常](http://msdn.microsoft.com/en-gb/library/ms173162%28v=vs.80%29.aspx)。只是为了确保在 Try/Catch 中包含您的主要功能。

在 Catch 中，编写一些代码将消息异常转储到文件中，或者更好地使用 Log4Net。为简单起见，现在只需添加一些代码以写入文件。就像是：

```
 static void Main()
    {
        try
        {
            //Your code
        }
        catch (Exception ex)
        {
            //Write ex.Message to a file
            using (StreamWriter outfile = new StreamWriter(@".\error.txt"))
            {
                 outfile.Write(ex.Message.ToString());
            }
        }
    } 
```

PS：如果是控制台应用程序，您可以使用 Console.Write 生存

# vba - 自动过滤器未按预期工作

> ID：15223860
> 
> 赞同：0
> 
> 时间：2013-03-05T12:29:37.283
> 
> 标签：vba, excel

我正在尝试使用自动过滤器删除列中包含特定值的所有行。由于某种原因，它没有按预期工作，只删除了一些具有指定值的行，我决心找出**原因**

我的代码很简单：

```
Function GetRowRange(sheet, column, value) As Range
'check for a valid section column
sheet.AutoFilterMode = False
sheet.UsedRange.AutoFilter Field:=column, Criteria1:=value
Set GetRowRange = sheet.AutoFilter.Range.SpecialCells(xlCellTypeVisible)
sheet.AutoFilterMode = False
End Function 
```

 ~~~~```
With GetRowRange(importsheet, importsheet.UsedRange.Find("stato_4").column, "0")
    .Offset(1, 0).Resize(.Rows.Count - 1, .Columns.Count).Delete
End With 
```~~  ~~**更新** 没有意义。我尝试将删除功能更改为：

```
For Each Row In GetRowRange(importsheet, importsheet.UsedRange.Find("stato_4").column, "0").Offset(1, 0).Rows
    Row.EntireRow.Delete
    iront = iront + 1
Next
MsgBox iront 
```

它会识别出该范围内有 42 行（iront = 42），但它们都没有被删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:22:57.420

我认为如果您的行数少于 8192 行（Excel 2010 之前），您可以使用特殊单元格删除它们吗？

添加一个公式列，如果该行包含您要测试的值，则会引发错误。

试试这个：

' 现在，此公式将在列与条件匹配的每一行中放置一个 #N/A。

```
 Range("C1:C" & Range("A1").End(xlDown).Row).FormulaR1C1 = "=IF(C[-2]=criteria,NA(),"""")" 
```

'然后使用带有错误代码 xlErrors 的 SpecialCells 返回包含要删除的行的范围。

```
 Range("C1:C" & Range("A1").end(xldown).row).SpecialCells(xlCellTypeFormulas,xlErrors).entirerow.delete 
```

[Oxgrid](http://www.ozgrid.com/VBA/special-cells.htm) HTH上还有更多内容

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:50:28.847

不确定`UsedRange`是否可靠。尝试使用类似的东西`Range("A1").CurrentRegion`~~~~

# javascript - 具有模型中的属性和方法的Angularjs类

> ID：15223865
> 
> 赞同：1
> 
> 时间：2013-03-05T12:29:49.110
> 
> 标签：javascript, angularjs

这是一个好习惯吗？这是一个正确的方法吗？

```
function UsersCtrl ($scope, $window, $http) {

    $scope.Users = {

        data : [],

        load : function () {
            $http.get('users/').success(function (data) {
                $scope.Users.data = data;
            });
        },

        emailUser : function (user) {        
            // send email (just an example)
        }

    };
} 
```

一个HTML：

```
<li ng-repeat="user in Users.data">
</li>

<a href="#" ng-click="Users.load()">
    Load
</a>

<a href="#" ng-click="Users.emailUser(user)">
    Email
</a> 
```

我担心性能！

我在网上搜索，我没有看到任何这样的代码。它们中的大多数将特定 $scope 模型中的方法和属性分开。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:47:22.833

此特定代码不会影响性能，但会影响应用程序的可测试性和可读性。另外，这与关注点分离原则和标准 MVC 模式相冲突。

您的用户对象应该在服务工厂内定义，然后在需要的地方注入。

如果您要在控制器中定义它，那么如果您需要在其他控制器中使用相同的 Users 对象，则必须再次重新定义它。

也就是说，您没有看到任何这样的代码也就不足为奇了。

# xml - 区分两个 XML 文件

> ID：15223866
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:29:56.470
> 
> 标签：xml, diff

我有这样的xml文档：

```
<datatypes xmi:id="ID_01"</datatypes>
<datatypes xmi:id="ID_02">
  <fields xmi:id="ID_03">
    <datatype xmi:idref="ID_01"></datatype>
  </fields>
</datatypes> 
```

我也有更改 xml 文件的 spesil 工具。它允许您添加新节点属性并更改旧节点属性，但使用后所有 ID 都会更改。

使用后工具：

```
<datatypes xmi:id="ID_11"</datatypes>
<datatypes xmi:id="ID_12">
  <fields xmi:id="ID_13">
    <datatype xmi:idref="ID_11"></datatype>
  </fields>
  <something_new/>

</datatypes> 
```

我想比较两个 xml 文件并只找到**<something_new/>**。当我使用标准差异时，我会看到所有更改（ID 也是）

有没有简单的方法来解决这个问题？如果没有，我应该使用什么语言（IDE）来更快地编写这样的比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:35:52.690

您可以尝试[diffxml](http://diffxml.sourceforge.net/)。

[XMLUnit](http://xmlunit.sourceforge.net/)有一个[diff](http://xmlunit.sourceforge.net/api/org/custommonkey/xmlunit/Diff.html)特性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:37:59.660

我会查看 Spesil 的文档（这是一个库吗？我在任何地方都找不到此文档），看看这种行为是否符合预期，可能有一些配置会阻止 id 号被替换。 .

如果有此 XML 消息的模式，您可以使用 JAXB 将您的 XML 解组为您可以访问的模型，您可以传递之前和之后（编组两者），然后编写一个例程来查找更改）。如果您需要访问更改的更多属性/元素，这将是一个很好的方法，因为您可以将更改作为对象访问（而不仅仅是文本更改，就像使用 diff 工具的情况一样）。我想这取决于您打算如何使用这些更改！

爱

# javascript - 获取调用的 javascript 文件上的查询字符串

> ID：15223884
> 
> 赞同：16
> 
> 时间：2013-03-05T12:31:02.760
> 
> 标签：javascript, file, url, query-string

是否可以在调用的 javascript 文件上使用 javascript 获取查询参数，如下所示：

```
// in html
<script src="/file.js?query=string"></script>

// in file.js
console.log(this.location.query) 
```

这是否可能，或者我必须使用服务器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T12:36:08.467

您可以将 id 属性附加到脚本标记，如下所示：

```
<script src="/file.js?query=string" id="query"></script> 
```

然后调用它：

```
console.log(document.getElementById("query").src.split("query=")[1]); 
```

一个小的工作示例代码如下：

```
<html>
<head>
<script src="aaa.js?query=abcd" id="query"></script>
</head>
<body></body>
</html> 
```

这是 aaa.js 中的代码：

```
window.onload=function(){
    alert(document.getElementById("query").src.split("query=")[1]);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-13T10:11:05.290

我可以用下面的代码得到 src 。所以我认为你可以解析queryString。

```
document.currentScript.src 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T12:39:16.613

不，这是不可能的，因为脚本文件在全局 javascript 范围内没有表示。您只能在 DOM 中找到它的元素，如 haitaka 所示，但这是一种非常不标准的方式，当然也不推荐将参数传递给脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-05T01:41:37.470

我知道这是旧的，但我认为你不会介意（再）两美分......

如果您不向脚本元素添加 id，James Smith 有[一个不需要 id 属性的片段](http://loopj.com/2010/06/12/simple-way-to-extract-get-params-from-a-javascript-script-tag/)。而且这种无 id 的特性是巨大的，因为您的脚本文件不需要与调用方的 ID 相结合。

```
// Extract "GET" parameters from a JS include querystring
function getParams(script_name) {
  // Find all script tags
  var scripts = document.getElementsByTagName("script");

  // Look through them trying to find ourselves
  for(var i=0; i<scripts.length; i++) {
    if(scripts[i].src.indexOf("/" + script_name) > -1) {
      // Get an array of key=value strings of params
      var pa = scripts[i].src.split("?").pop().split("&");

      // Split each key=value into array, the construct js object
      var p = {};
      for(var j=0; j<pa.length; j++) {
        var kv = pa[j].split("=");
        p[kv[0]] = kv[1];
      }
      return p;
    }
  }

  // No scripts match
  return {};
}
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-18T22:24:29.107

我知道这是旧的，但我想我会投入我的两分钱......

如果您已经在脚本元素中添加了一个 id，为什么不也添加一个自定义属性：

```
<script src="/file.js" id="query" value="string"></script> 
```

然后您可以使用 getAttribute 获取值：

```
document.getElementById('query').getAttribute('value'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-20T14:50:24.387

您可以使用`document.currentScript.src`（仅在适当的时间）`URLSearchParams`从调用的 JavaScript 文件中提取查询字符串。

例子：

在您的 HTML 中：

```
<script src="querystring.js?foo=bar&foo=bar2"></script> 
```

在您的 JavaScript 文件中：

```
/**
 * When this is being run, the document's last element will be this very script.
 * Explanations on http://feather.elektrum.org/book/src.html
 */
var scripts = document.getElementsByTagName('script');
var index = scripts.length - 1;
var myScript = scripts[index];
  // document.currentScript.src will be this file's URL, including its query string.
  // e.g. file:///mytests/querystring.js?foo=script

/**
 * Now just turn the query string (if any) into a URLSearchParams
to let us easily check values.
 */
var querystring = document.currentScript.src.substring( document.currentScript.src.indexOf("?") );
var urlParams = new URLSearchParams( querystring );

console.log( urlParams.getAll('foo') ); // Array [ "bar", "bar2" ] 
```

记住：

*   当脚本通过异步包含时，这可能不起作用。
*   获取还是全部获取？
    *   `urlParams.get`只会返回第一个值（作为字符串）
    *   `urlParams.getAll`将返回一个数组（如果只提供一个值，则大小为 1。）

我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-12T21:06:07.987

当 HTML 文件使用带有包含查询字符串的**src属性的****Script**标记来加载 JavaScript 程序时，您不能使用 location.search 来检索查询字符串，因为 location 不包含 URL（与**href**属性一样） ）。可以使用“new URL(here.src).search”获取 URL，其中“here”是您在 Script **id**属性中使用的字符串。

 ******因此，一种解决方案（来自其他地方的另一个答案，不解码参数）是

```
var queryDict = {};
new URL(here.src).search.substr(1).split("&").forEach(function(item) {queryDict[item.split("=")[0]] = item.split("=")[1]}) 
```

运行此代码后，queryDict 是一个包含参数属性/值对的对象。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-03-05T12:36:18.367

尝试像这样使用javascript获取查询的值

```
alert(window.location.href.split["?"][1].split["="][1]); 
```******

# magento - Magento 更新限制为 1095？

> ID：15223886
> 
> 赞同：1
> 
> 时间：2013-03-05T12:31:05.737
> 
> 标签：magento, sql-update, magento-1.7

嗨，我正在运行一个脚本来更新我的客户产品的所有延期交货和 in_stock。目前我们有大约8700种产品。但是，我注意到当我尝试调用该函数来更新它时，它似乎重定向到 500 内部服务器错误。

我进行了收集计数并设置了一个限制以查看中断点在哪里 - 1095。

因此，任何超过 1095 种产品的产品都失败了。

我正在使用 Magento 社区版 1.7.0.2

/// 下面的代码

```
umask(0);
require_once 'app/Mage.php';
Mage::app('admin');   

$collection = Mage::getModel('catalog/product')->getCollection();

# Magento SQL queries

$collection->addAttributeToSelect('*'); 
$collection->getSelect()->limit(1096);
$collection->addFieldToFilter(array(
 array('attribute'=>'preorder', 'eq'=>'1'),

)); 

echo $collection->count();
die();
foreach ($collection as $product) {

    #echo $product->getData('sku')." - ".$product->getData('name')." with preorder status of - ".$product->getData('preorder')."<br/>" ;

    $sku = $product->getData('sku');
    $_product = Mage::getModel('catalog/product')->loadByAttribute('sku', $sku);
    $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product);

    $stock->setBackorders("2");
    $stock->setUse_config_backorders("0");
    $stock->setIs_in_stock("1");
    $stock->save();

    echo $product->getData('sku')." - ".$product->getData('name')." with backorder status of - ".$stock->getData('backorders')." - Use config? - ".$stock->getData('use_config_backorders')." is in stock ? - ".$stock->getData('is_in_stock')."<br/>" ;
    #die();
} 
```

任何帮助是极大的赞赏。

谢谢，

朱利安

# c# - FileSystemWatcher.Filter - 在缓冲区之前还是之后？

> ID：15223889
> 
> 赞同：4
> 
> 时间：2013-03-05T12:31:13.773
> 
> 标签：c#, buffer, filesystemwatcher, internal

我正在处理一个项目，其中有大量文件被修改和创建/删除。多个 FSW 内部缓冲区填充和必须扩展存在一些问题。

我在网上发现了关于“.Filter”是否过滤掉`BEFORE`或`AFTER`检测到的更改是否添加到缓冲区的冲突信息。如果实际上在单个 FSW 之后进行事件排序可能更有意义。

有谁知道这里肯定是哪个？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:18:56.060

`FileSystemWatcher`包装本机 W32 方法[`ReadDirectoryChangesW`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465%28v=vs.85%29.aspx)，该方法又负责将文件系统事件放入提供的缓冲区中。`Filter`在事件已经在私有方法中缓冲后，该属性在 CLR 端强制执行，该私有`MatchPattern`方法告诉监视器是否报告文件事件。

使用该`Filter`物业不太可能对您目前的情况有所帮助。[`InternalBufferSize`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.internalbuffersize.aspx)相反，增加值以避免溢出缓冲区可能更有利。或者，网上还有许多其他文件系统事件监控类旨在解决同样的问题。

# css - 溢出时文本不会在框内居中

> ID：15223891
> 
> 赞同：0
> 
> 时间：2013-03-05T12:31:15.380
> 
> 标签：css, overflow, centering, fluid

如果文本溢出容器，我似乎无法使文本保持在容器的中心。在我的示例中，它是流体布局中的水平菜单。在浏览器窗口缩小到足以使文本溢出之前，它可以正常工作。一旦发生这种情况，它就不再居中，而是仅在右侧重叠。

我怎样才能让它保持居中，即使它不得不溢出它的容器？

这是我的代码：

```
<style type="text/css">

#access {
    background: #e2e2e2;
    width: 100%;
    margin-left:auto;
    margin-right:auto;
}

#access div {
    width: 100%
    margin-left:auto;
    margin-right:auto;
}

#access ul {
    font-size: 0.9em;
    list-style: none outside none;
    display: inline-block;
    width: 100%;
    text-align: center;
}

#access li {
    width: 15%;
    position: relative;
    margin-right: 1%;
    float: left;
}

#access a {
    color: #fff;
    width: 62%;
    margin-left:auto;
    margin-right:auto;
    background: #CB2027;
    display: inline-block;
    line-height: 2.2em;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    font-size: 1.2em;
    padding: 0px 1em;
    white-space: nowrap;
}
</style>
<nav id="access" role="navigation"> 

<div class="menu-test-menu-container"><ul id="menu-test-menu" class="menu">
<li id="menu-item-29"><a href="http://google.com/">Home</a></li>
<li id="menu-item-30"><a href="http://google.com/">Item 1</a></li>
<li id="menu-item-31"><a href="http://google.com/">Long item</a></li>
<li id="menu-item-32"><a href="http://google.com/">Item 3</a></li>

</ul></div></nav> 
```

这里是现场直播：http: [//jsfiddle.net/Psymz/](http://jsfiddle.net/Psymz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:35:27.777

给[`min-width`](https://developer.mozilla.org/en-US/docs/CSS/min-width)财产`#access`。像这样的东西：

```
#access{
     min-width: 1024px; /* low resolution value */
} 
```

[**工作小提琴**](http://jsbin.com/ekibom/1/)（*调整窗口大小以检查*）

# c# - 奇怪：播放 .WMV 文件时出现 MF_MEDIA_ENGINE_ERR_SRC_NOT_SUPPORTED 错误

> ID：15223892
> 
> 赞同：3
> 
> 时间：2013-03-05T12:31:17.020
> 
> 标签：c#, encoding, windows-8, media-player, windows-store-apps

播放从 Web 服务获取的一些电影预告片时出现错误。

在`MediaElement`'s `MediaFailed`-event 上引发错误：

```
MF_MEDIA_ENGINE_ERR_SRC_NOT_SUPPORTED : HRESULT - 0xC00D0035 
```

到目前为止，我发现它可能与转码等有关 - 所以这里有一些关于文件的事实：

```
Size: 13.1 MB
Frame width / height: 640 * 360 px
Data rate: 704 kbps
Total bitrate: 800 kbps
Frame rate: 25 fps 
```

请注意，这只发生在少数几个视频中（几天前可以使用，但自上次测试运行以来数据可能已更改）。另一个播放完美的视频具有完全相同的规格（〜相同的大小），但高度为 274 像素。

这两个视频都可以在 Windows 8 的媒体播放器应用程序中完美播放。

关于从哪里开始的任何想法？

已解决：查看 HRESULT 代码（0xC00D0035）后，我发现了它背后的含义：

```
0xC00D0035
NS_E_SERVER_NOT_FOUND 
```

这非常有意义——因为我的 REST-API 给了我一些无关紧要的数据（有些有斜线，有些没有）。基本上 - 我的源 URL 有时是错误的！:-)

# wpf - 如何读取 WPF Datagrid 中隐藏列的单元格值

> ID：15223898
> 
> 赞同：0
> 
> 时间：2013-03-05T12:31:47.503
> 
> 标签：wpf, datagrid

我正在尝试读取 DataGrid 隐藏列的单元格值....

但它给出空值..

我的代码是

```
 FrameworkElement BId = dgFindBatch.Columns[1].GetCellContent(dgFindBatch.CurrentItem);
            int intBoardID = Convert.ToInt32(((TextBlock)BId)); 
```

如何获取隐藏列、单元格值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:31:08.180

这可能取决于，

例如，如果每一行都是由字符串数组构建的

你可以很容易地试试这个

```
 string str = ((string[])dataGrid1.SelectedItem)[1];

 int intBoardID = 0;

 Int32.TryParse(str, out intBoardID); 
```

但是如果还有其他类型，您需要将每个类型转换为自己的类型。

附言。

你不能这样做

```
 Convert.ToInt32(((TextBlock)BId)); 
```

由于 BId 为空，它没有崩溃。

# git - 匹配任何目录名称的 Git 路径

> ID：15223899
> 
> 赞同：5
> 
> 时间：2013-03-05T12:31:49.343
> 
> 标签：git, glob

在 git 中我们可以`*`用来指定文件名，比如`*.jpg`, `*.*`，但是目录呢？

有什么方法可以指定所有目录吗？

这不起作用：

```
git rm firstdirectory/*/thirddirectory 
```

`*`不会产生“所有目录”的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:57:50.397

您的命令不起作用，因为您正在为 git 指定目录。您的外壳进行了正确的扩展，但最终 git 收到`git rm firstdirectory/somedir/thirddirectory`了 git 不喜欢的（`git rm`期望文件）

要使您的命令正常工作，请使用`-r`标志，然后 git 接受目录：

```
git rm -r firstdirectory/*/thirddirectory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:49:12.263

您描述的 glob 表达式扩展不是由 git 执行的，而是由 shell 执行的。如果您执行类似的操作，您可以看到这一点`echo *`。该命令接收一个参数列表，这些参数是文件名 - 而不是带有星号的单个参数。

在您的情况下，`find . -ipath`这可能是识别您需要的路径的最有用的方法。您可能想添加一个`-type d`来获取目录。find 有许多用于选择匹配对象的选项。然后，您可以将其输入`xargs`以使用`git`. 例如：

```
find firstdirectory -ipath 'firstdirectory/*/thirddirectory' | xargs git rm 
```

# php - PHP 变量连接和文本文件换行符

> ID：15223901
> 
> 赞同：0
> 
> 时间：2013-03-05T12:31:55.170
> 
> 标签：php, line-breaks

我的 php 变量就像

```
$boothsizetopges = "CHILDREN'S CLUB MARCH 2013
EHIBITING COLLECTION NAME: $company
BOOTH SIZE: $booth_size
"; 

$companyinfo = "
CONTACT INFORMATION
EXHIBITING COLLECTION NAME: $company
BOOTH NUMBER: $booth
CONTACT: $contact
BOOTH SIZE: $booth_size
CONTACT CELL: $contact_cell
CONTACT EMAIL: $email
STREET ADDRESS: $street
CITY, STATE, ZIP: $city ";

$message = $boothsizetopges . $companyinfo ; 
```

我将 $message 写入 .txt 文件的代码是

```
$myFile = "exfiles/".str_replace(" ","-",$_POST['companyname'])."_".time().".txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $message;
fwrite($fh, $stringData);
fclose($fh); 
```

在这里，我的问题是 .txt 文件输出在单行中打印而没有换行符。但是在邮件中，每一行中的数据都很好。

需要帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:36:02.587

您是否在 Windows 中打开文本文件？如果是这样，当您需要使用 Window 的样式 (\r\n) 时，您可能正在编码 unix 样式的换行符 (\n)。作为一个简单的测试添加到您的第一个代码块的末尾：

```
$message = str_replace("\n", "\r\n", $message); 
```

不过，一般来说，您只想坚持使用 unix 风格（恕我直言）

# java - 带有特殊字符的列注释

> ID：15223903
> 
> 赞同：0
> 
> 时间：2013-03-05T12:31:57.673
> 
> 标签：java, jpa, orm

我将通过兼容 JPA 的 ORM 来阅读 MS-ACCESS 97 数据库。重点是数据库中的列名有特殊字符：

```
@Column(name="FechPró")
Date nextDate; 
```

在执行时我得到了这个

```
Caused by: java.sql.SQLException: Column not found
at sun.jdbc.odbc.JdbcOdbcResultSet.findColumn(JdbcOdbcResultSet.java:1849)
at sun.jdbc.odbc.JdbcOdbcResultSet.getObject(JdbcOdbcResultSet.java:1742) 
```

可能我必须做这样的事情

```
@Column(name=new String("FechPró".getBytes("ISO-8859-1"))) 
```

但这不会编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:55:31.780

也许我说的是显而易见的，但是...您是否尝试将编译器传递给编码参数？喜欢[这篇](http://illegalargumentexception.blogspot.it/2009/05/java-rough-guide-to-character-encoding.html#javaencoding_sourcefiles)文章？

也许我再次说明了这个选项：如果您使用像 eclipse 这样的 IDE，您可以搜索首选项来为您的项目设置编码。

# c++ - 等待 N 个线程完成的唯一同步对象

> ID：15223904
> 
> 赞同：1
> 
> 时间：2013-03-05T12:31:59.873
> 
> 标签：c++, multithreading, synchronization, thread-safety

我有一个 Threadpool 类，这个类有一个 wait() 方法。现在，这个类可以创建N个线程，当一个线程被创建时，它的句柄被插入到一个容器中。我实现wait()函数的经典方法，就是遍历容器，等待单个句柄，像这样：

```
thread_handle_iterator th = get_first_thread_handle_iterator();
thread_handle_iterator th2 = get_last_thread_handle_iterator();

while (th != th2)
{
     joint(*th);
     ++th;
} 
```

这非常有效。现在，不用这个循环，我可以让原子计数器在每个线程开始运行时递增，然后在线程完成运行时递减。当 count==0 [最后一个线程正在完成] 时，会触发一个事件 [或 posix 中的条件变量]。像这样：

```
int
thread_entrypoint(Threadpool * p)
{
    int result;
    p->atomic_thread_count.add();
    result = p->getRunnable()->run();  // execute the thread code.
    if (p->atomic_thread_count.fetchAndAdd(-1) == 1) // this is the last thread!
    {
           p->event.signal(); // fires the event/condition variable
    }
    return result; // the thread returns the result and exits.
} 
```

所以，基本上通过这种方式，我不会有一个烦人的容器，并且我可以在创建它们时分离所有线程：这将大大简化我的代码。然后，即使线程池的线程被分离，我仍然可以等待它们完成，只需调用`Threapool::wait() { event.wait(); }`

另外，我的优势是我可以添加一个全局原子计数器，所以我可以等待*每个*Threadpool 实例创建的*每个*线程，如下所示：

 *```
AtomicInt global_threads_count;
WaitEvent global_all_threads_exited_event;

int
thread_entrypoint(Threadpool * p)
{
    int result;
    p->atomic_thread_count.add();
    global_threads_count.add();

    result = p->getRunnable()->run();  // execute the thread code.
    if (p->atomic_thread_count.fetchAndAdd(-1) == 1) // this is the last thread!
    {
           p->event.signal(); // fires the event/condition variable
    }

    if (global_threads_count.fetchAndAdd(-1) == 1) // this is the last thread of *ALL* threads!
    {
           global_all_threads_exited_event.signal(); // fires the event/condition variable
    }
    return result; // the thread returns the result and exits.
} 
```

我可以通过调用来等待*所有线程完成*`Threapool::waitForAllThreads() { global_all_threads_exited_event.wait(); }`

——这是一个可靠、快速和有效的设计吗？*

# canvas - 在画布上禁止点击

> ID：15223909
> 
> 赞同：0
> 
> 时间：2013-03-05T12:32:15.863
> 
> 标签：canvas, click, html5-canvas

我需要防止在画布的某些地方单击。例如; 下面的画布。在 (0,250)-(0,300) 坐标为 (x,y) 之间，如果用户单击此区间内的任何位置，则什么都不会发生。

```
<script>

window.onload = function(){
    document.getElementById('lbltipAddedComment').innerHTML = '  ';
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
}
</script>

<div id="ccontainer">
<canvas id="myCanvas" width="800" height="500"></canvas>   
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:57:30.627

画布不会自行响应点击。它需要代码来做到这一点。就目前而言，默认情况下禁止在整个画布上单击。您的代码将使它能够对点击做出反应。因此，只需编写代码以按照您想要的方式对点击做出反应。

一个简单的方法是在画布上放置一个透明的 html 元素（使用 CSS 定位它）。设置一个单击处理程序，可能使用 JQuery，因此当单击该透明元素时，它会执行您想要的操作。

# java - 语音控制Java？

> ID：15223910
> 
> 赞同：1
> 
> 时间：2013-03-05T12:32:16.203
> 
> 标签：java, speech-recognition, speech-to-text

我将构建一个语音控制应用程序，例如 Ironman 电影中的“Jarvis”。我在互联网上找到了许多家庭控制系统的示例，但没有找到它们是如何实现的。

我的愿望是 Java 应用程序支持跨平台，但我找不到任何好的文本 api 语音或如何使用它的示例。

在谷歌我发现了 Sphinx-4，但最后一个版本是 2009 年的，我不确定这是最好的选择。

也许你可以帮助我。

# html - 从 HTTP 标头运行可执行文件

> ID：15223911
> 
> 赞同：1
> 
> 时间：2013-03-05T12:32:22.493
> 
> 标签：html, http, executable

我目前正在构建一个应用程序，该应用程序要求用户首先登录网页，然后他或她可以从该网页运行该应用程序。该网站托管在服务器上，最终我需要在客户端上启动应用程序。

该网站是使用 .NET 构建的。是否可以发送一些打开已安装程序的 http 请求或 html url？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:41:29.463

您可以通过在与您的程序相关联的机器上注册一个 URI 方案并让浏览器导航到该方案的 URI 来做到这一点。

例如 Steam 就是这样做的——有一个 steam:// URI 方案由 Steam 安装程序注册并与桌面应用程序相关联。当浏览器或其他应用程序浏览到 steam://something 时，它会作为参数传递给 Steam 以对其进行操作。

此方法不需要特殊权限，并且会提示用户授予启动应用程序的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:41:17.607

您是否考虑过使用[ClickOnce](http://msdn.microsoft.com/en-gb/library/t71a733d%28v=vs.110%29.aspx)部署应用程序？这可以充当您的启动器、部署器，并将确保应用程序是最新的。

# php - 父级中的PHP preg_match_all 元素？

> ID：15223916
> 
> 赞同：1
> 
> 时间：2013-03-05T12:32:43.507
> 
> 标签：php, regex, preg-match

编辑：

似乎人们认为我正在尝试解析 HTML，而我已经强调了几次**我正在尝试解析日志**，并且`<option>`结构**类似于**我的日志。

我的日志看起来像这样：

```
!# [2013-03-04 14:51:31] // cluster1 BEGIN \\ 
!## apache: 41
!## mysql: 31
!## tomcat: 81
!## lotus: 985
!# [2013-03-04 14:51:56] // cluster1 END \\ 
!# [2013-03-04 14:51:56] // cluster2 BEGIN \\ 
!## apache: 13
!## mysql: 61
!## tomcat: 6
!## lotus: 513
!# [2013-03-04 14:52:13] // cluster2 END \\ 
```

* * *

我不能让这个正则表达式工作，也许这是不可能的..需要帮助:)

基本上，我试图一次从父实体中对多个子元素进行正则表达式。为简洁起见，我将使用下拉`<select>`HTML 元素作为示例。这实际上将用于日志解析，但我还不确定它将是什么格式，并且下拉元素与我需要的一样接近，而无需解释日志的结构。

所以让我们假设我们有一个下拉列表：

```
<select class="parent">
    <option value="1">First child</option>
    <option value="2">Second child</option>
    <option value="3">Third child</option>
    ...
</select> 
```

要将`<option>`元素与父元素分开，我会使用这个：

```
preg_match_all('/<select class="parent">(.*)<\/select>/is', $source, $matches); 
```

这是伟大的。但是现在我必须花一点时间`preg_match()`来过滤掉我的`<option>`元素，所以它看起来像这样：

```
preg_match_all('/<option value="(.*?)" >(.*?)<\/option>/is', $matches['1'], $finalMatches); 
```

我的结果很好。但是有没有办法将这两个命令组合成一个规则？所以它会找到父元素，在这种情况下是一个`<select class="parent">*</select>`块，并过滤掉在该父元素中找到的每个`<option value="*">*</option>`条目？然后我会留下一个完美的父子组合数组，而不是迭代第一个结果，然后让每次迭代完成另一个 preg_match 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:11:49.687

我想这就是你要找的：

```
preg_match_all(
    '~(?:<select class="parent">|\G)\s*<option value="(.*?)">(.*?)</option>~i',
    $source, $matches); 
```

`\G`将匹配锚定到前一个匹配结束的位置（如果没有前一个匹配，则锚定到输入的开头）。因此，第一个匹配项将包含开始`<select>`标记和第一个`<option>`元素，之后的每个匹配项都将包含*下一个* `<option>`元素——它不会跳过在后面的`<select>`元素中查找匹配项。

**[这是一个演示](http://ideone.com/IYO1fN)**。我还使用`\K`了 Match Start Reset 运算符，但这不是必需的；我只是认为它使输出更易于阅读。它有效地将之前的所有内容转变为积极的回顾，而没有通常的限制。

# junit - 为大型企业级 Web 应用程序编写测试用例时的一般方法

> ID：15223918
> 
> 赞同：0
> 
> 时间：2013-03-05T12:32:53.880
> 
> 标签：junit, testng

我们有一个企业级应用程序，其中包含相互依赖的不同实体，例如管理员、合作伙伴和客户。ADMIN 可以有多个客户，其下的合作伙伴同样可以有客户。所以这里我们有一个层次结构。因此，在执行测试用例之前，我想动态设置具有最少实体的数据库，然后我想在这个特定的数据库上执行剩余的测试用例。

那么有人可以为此提出好的方法吗？

我不想在测试用例中有依赖关系，一旦数据库设置完成，它们应该独立执行。

有什么建议么？

# ios - 指向非常量类型 Tile * 的指针，没有明确的所有权

> ID：15223923
> 
> 赞同：9
> 
> 时间：2013-03-05T12:33:05.247
> 
> 标签：ios, objective-c, automatic-ref-counting

我正在尝试在我的应用程序中启用 arc，但是当 xcode 检查我的项目时，它会在下面给出一个错误。

```
Tile ***grid; 
```

**错误：**指向非常量类型 Tile * 的指针，没有明确的所有权。

请指导我如何解决这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T12:39:13.723

ARC 无法推断它应该使用什么存储类型。所以你必须告诉它！

```
 Tile * __strong **grid; // Strong reference to grid

    Tile * __weak **grid; // Weak reference to grid 
```

更多关于强引用和弱引用的信息可以在[这里找到](https://stackoverflow.com/a/11013715/1861458)

# c++ - 防病毒软件不断将我的项目检测为病毒

> ID：15223927
> 
> 赞同：3
> 
> 时间：2013-03-05T12:33:15.347
> 
> 标签：c++, directx, virus

美好的一天，我正在尝试为我的游戏创建框架，以使我更容易编码。我刚刚创建了添加对象的函数，但是在创建了创建索引缓冲区的部分之后，防病毒软件一直告诉我：“发现病毒：Win32：Evo-gen [Susp]”，我不知道为什么。加载对象的函数代码：

```
HRESULT Framework::AddObject(Object* obj){
    std::vector<short> indices;
    std::vector<VertexType> vertices;
    obj->GetData(indices,vertices);
    IDirect3DVertexBuffer9* cVBuffer;
    IDirect3DIndexBuffer9* cIBuffer;
    int at=vertexBuffers.size();
    vertexBuffers.push_back(cVBuffer);
    indexBuffers.push_back(cIBuffer);
    unsigned int sOfVerts=vertices.size()*sizeof VertexType;
    unsigned int sOfIndices=indices.size()*sizeof(short);
    vCount.push_back(vertices.size());
    iCount.push_back(indices.size());
    HRESULT hr=device->GetDevice()->CreateVertexBuffer(sOfVerts,0,D3DFVF_VertexType,D3DPOOL_DEFAULT,&vertexBuffers[at],NULL);
    if(FAILED(hr)){
        EndWithError("Failed to load object",hr);
        return hr;
    } else {
        void* p_vertices;
        hr=vertexBuffers[at]->Lock(0,sOfVerts,(void**)&p_vertices,0);
        if(FAILED(hr)){
            EndWithError("Failed to lock buffer",hr);
            return hr;
        } else {
            applog<<"Successfuly created VertexBuffer for object "<<obj->GetClass()<<"["<<at<<"], vertices size: "<<sOfVerts<<", vertices count: "<<vertices.size()<<std::endl;
            memcpy(p_vertices,&vertices[0],sOfVerts);
            vertexBuffers[at]->Unlock();
        }
    }
    hr=device->GetDevice()->CreateIndexBuffer(sOfIndices,D3DUSAGE_WRITEONLY,D3DFMT_INDEX16,D3DPOOL_MANAGED,&indexBuffers[at],NULL);
    if(FAILED(hr)){
        EndWithError("Failed to load indices",hr);
        return hr;
    } else {
        void* p_indices;
        hr=indexBuffers[at]->Lock(0,sOfIndices,(void**)&p_indices,0);
        if(FAILED(hr)){
            EndWithError("Failed to lock index buffer",hr);
            return hr;
        } else {
            memcpy(p_indices,&indices[0],sOfIndices);
            indexBuffers[at]->Unlock();            
        }
    }
    return S_OK;
}
//device->GetDevice() - returns IDirect3DDevice9*
//obj->GetData(vector<int>& indices,vector<VertexType>& vertices); //gets vertices and indices
//obj->GetClass() const; - returns name of class of object, because Object is base class for another objects 
```

渲染函数如下所示：

```
void Framework::RenderFrame(){
    IDirect3DDevice9* dev=device->GetDevice();
    if(dev!=NULL){
        dev->Clear(0,NULL,D3DCLEAR_TARGET,D3DCOLOR_XRGB(32,32,64),1.0f,0);
        if(SUCCEEDED(dev->BeginScene())){
            for(unsigned int i=0;i<vertexBuffers.size();i++){
                IDirect3DDevice9* dev=device->GetDevice();
                dev->SetStreamSource( 0, vertexBuffers[i], 0, sizeof( VertexType ) );
                dev->SetFVF( D3DFVF_VertexType );
                dev->SetIndices(indexBuffers[i]);
                //dev->DrawPrimitive( D3DPT_TRIANGLELIST, 0, 1 );
                dev->DrawIndexedPrimitive(D3DPT_TRIANGLELIST,0,0,vCount[i],0,iCount[i]/3);
            }
            dev->EndScene();
        }
        dev->Present(NULL,NULL,NULL,NULL);
    }
} 
```

谁能告诉我是什么原因，为什么防病毒软件将其检测为病毒以及如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:11:27.093

问题解决了。它几乎与索引缓冲区无关。原因是因为 2 个未关闭的输出文件流。

总之谢谢大家！我至少学到了一些新东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:46:52.130

防病毒软件使用“启发式”（“高级猜测”的花哨词！）来检测“不良模式”。这听起来像是“误报”。

正确的解决方法是将问题报告给您的 AV 提供商，并让他们发布新版本的“检测”，该版本不会错误地检测到有效代码。但是，除非您有一个非常好的 AV 提供商，否则您在接下来的几周内不太可能从中看到太多。

因此，实际的解决方案通常是完全删除 AV 或用不同的产品替换它 [顺便说一下，这两者都可能非常棘手，因为 AV 软件往往会使自己难以卸载——当然有充分的理由，您不希望第一个病毒感染您的计算机来卸载您的 AV 软件 - 这意味着有时 AV 卸载本身并没有卸载它应该卸载的所有内容]。

有时只需关闭“实时扫描”就足够了。

# emacs - eassist-function-tags：无效功能：语义查找标签按类

> ID：15223929
> 
> 赞同：1
> 
> 时间：2013-03-05T12:33:15.660
> 
> 标签：emacs, cedet

我在使用函数“eassist-list-methods”时遇到了这个问题，

```
eassist-function-tags: Invalid function: semantic-find-tags-by-class 
```

你能帮我解决吗？我用最新的cedet-devel版本emacs版本是：24.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T03:16:37.807

[http://sourceforge.net/p/cedet/mailman/message/30564469/](http://sourceforge.net/p/cedet/mailman/message/30564469/)

我在那里贴了一个：（需要'语义/查找），它应该可以解决这些问题。如果出现任何其他未知函数，只需在某个地方的 lisp/cedet/ 包中对其进行 grep 操作（例如，假设任何以语义开头的东西都在语义包中），然后将所述要求添加到 eassist 中。

```
<pre>
diff -Naur eassist.el.orig eassist.el
--- eassist.el.orig 2015-08-11 11:03:58.544695143 +0800
+++ eassist.el  2015-08-11 10:59:17.456679391 +0800
@@ -103,6 +103,7 @@
 ;;; Code:

 (require 'semantic)
+(require 'semantic/find)

 ;; ================================== My STRING utils ========================
 (defun eassist-string-without-last (string n)

</pre> 
```

函数semantic-find-tags-by-class是一个宏，所以你需要用我上次提供的补丁重新编译eassist。那应该最终解决问题。

你可以通过打开 eassist.el 来做到这一点，然后做

Mx 字节编译文件 RET

接着：

Mx 加载库 RET 辅助 RET

你可以试试这个： [https ://github.com/liugang/taglist](https://github.com/liugang/taglist)

taglist 插件是 Emacs 的源代码浏览器插件，提供编程语言文件结构的概述

# ruby-on-rails - Rails，在 json 中包含自己的名称

> ID：15223934
> 
> 赞同：1
> 
> 时间：2013-03-05T12:33:23.847
> 
> 标签：ruby-on-rails, json, dynamic

在 C# 中：

```
var cities = clients.Select(c => 
                                new { 
                                      DisplayText = c.CityName, 
                                      Value = c.CityId 
                            });
return Json(new { Result = "OK", Options = cities }); 
```

如何在 Rails 中执行此操作？

目标json：

```
{
 "Result" : "OK",
 "Options": [
              { "DisplayText" : "clientName1", "Value" : 1},
              { "DisplayText" : "clientName2", "Value" : 2},
            ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:40:16.030

你可以这样做：

```
cities = Clients.all.map { |client| {:DisplayText => client.CityName, :Value => client.CityID} }

render :json => {:Result => 'OK', :Options => cities} 
```

请注意，大写在 ruby​​ 中并不常见。

我会做这样的事情：

```
cities = Clients.all.map { |client| {:displayText => client.cityName, :value => client.cityID} }

render :json => {:result => 'OK', :options => cities} 
```

# php - 带有作业队列系统的 PHP/Laravel 中的逻辑代码

> ID：15223938
> 
> 赞同：6
> 
> 时间：2013-03-05T12:33:30.837
> 
> 标签：php, web-scraping, screen-scraping, laravel, resque

我正在使用 Laravel 3 制作一个网络爬虫，并有一个队列系统`resque`。

**问题：**我应该将抓取逻辑代码放在哪里？

*   在工人/工作阶层？

*   在工人/工作类静态调用的库类中？

*   在控制器功能中并让工人/作业类触发控制器功能？

我目前在控制器函数中有它，所以我可以通过访问它的 url 来测试它。这也允许使用 Cron 重复作业，因为`resque`不允许重复作业。我仍然需要保留这种简单的方法来测试抓取功能。

**尝试：**这就是我的想法，您将如何为此目的组织代码？

**工人阶级**

```
class ScraperWorker
{
    public function perform()
    {
        $url = $this->args['url']
        Scraper::do_scrape($url);
    }
} 
```

**刮痧类**

```
class Scraper
{
    public static function do_scrape($url) {
        //some scraping code
    }
} 
```

**控制器类**

*用于快速测试和 Cron 作业*

```
class Scraper_Controller extends Base_Controller {

    public function test_scrape($url) {
        Scraper::do_scrape($url);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:57:53.623

我认为你在正确的轨道上。您可以更改的一件事是使 Scraper 及其方法不是静态的。这不会使它更难使用，但更容易进行单元测试。当 Scraper 变得更加复杂并需要配置时，这一点变得尤为重要。

PS。检查[PHP-Spider](https://github.com/mvdbos/php-spider)：一个可扩展和可配置的蜘蛛/爬虫。它可以为您节省大量工作。完全披露：我写的。

# zend-framework2 - Gaufrette 和 Dropbox 适配器：Dropbox_Exception_Forbidden: Forbidden

> ID：15223941
> 
> 赞同：1
> 
> 时间：2013-03-05T12:33:33.243
> 
> 标签：zend-framework2, dropbox-php

当我运行 $filesystem->has('foo') 时出现以下错误。我究竟做错了什么？

Dropbox_Exception_Forbidden：禁止。这可能意味着错误的 OAuth 请求，或者目标位置已存在文件或文件夹。签名无效或缺失

# clojure - Clojure 序列中的子序列位置

> ID：15223942
> 
> 赞同：6
> 
> 时间：2013-03-05T12:33:43.630
> 
> 标签：clojure, sequences

Clojure 是否提供任何内置方法来查找给定序列中子序列的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:05:33.343

[Clojure 为简单的Java Interop](http://clojure.org/java_interop)提供了一种内置方式。

```
(java.util.Collections/indexOfSubList '(a b c 5 6 :foo g h) '(5 6 :foo))
;=> 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T13:21:00.350

序列是抽象的，而不是具体的。可以通过序列抽象使用的某些实体有一种方法可以找到子序列的位置（例如字符串和 Java 集合），但序列通常不会，因为底层实体不必有索引.

但是，您可以做的是创建元素标识和索引函数的并列。看看[map-indexed](http://clojuredocs.org/clojure_core/clojure.core/map-indexed)。

这是一个简单的实现，它将懒惰地找到序列中（所有）子序列的位置。只需使用 first 或取 1 只找到一个：

```
(defn find-pos
  [sq sub]
  (->>
    (partition (count sub) 1 sq)
    (map-indexed vector)
    (filter #(= (second %) sub))
    (map first)))

=> (find-pos  [:a :b \c 5 6 :foo \g :h]
                [\c 5 6 :foo])
(2)

=> (find-pos  "the quick brown fox"
                (seq "quick"))
(4) 
```

请注意，基于索引的算法通常不是您在函数式语言中会做的事情。除非有充分的理由在最终结果中需要索引，否则过度使用索引查找被认为是代码异味。

# jqgrid - 如何在jqgrid中设置列宽

> ID：15223943
> 
> 赞同：4
> 
> 时间：2013-03-05T12:33:44.237
> 
> 标签：jqgrid

我需要动态设置 jQgrid 中的列宽。当调整列大小时，我们需要将该宽度存储在会话中，并在再次加载页面时，我们必须动态设置该宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:45:45.860

没有`width`动态设置的方法，但是可以修改我在[答案](https://stackoverflow.com/a/14265456/315935)`resizeStop`中发布的代码以创建相应的方法。在[演示](http://www.ok-soft-gmbh.com/jqGrid/SubgridWithLocalGridAndHiddenColumnHeaders1.htm)中，子网格的列宽将根据主网格的列宽进行更改。所以回调代码只是*将网格的某些列（在这种情况下为子网格）的宽度设置为新值*。这正是动态设置所需要的。`resizeStop`*`width`*

 *如果您只需要为页面保存列并在下次加载同一页面时使用用户的最后一个宽度选择，那么您可以*创建*每列具有相应宽度的网格。从[答案](https://stackoverflow.com/a/8547852/315935)和[另一个](https://stackoverflow.com/a/8436273/315935)看[演示](http://www.ok-soft-gmbh.com/jqGrid/ColumnChooserAndLocalStorage2_single.htm)。如果您更改某些列的列宽并重新加载页面，您将看到最后更改宽度的网格。我认为这是您可以使用的。*

# css - JSF - 过滤 IE 中的文本框外观

> ID：15223944
> 
> 赞同：1
> 
> 时间：2013-03-05T12:33:45.527
> 
> 标签：css, internet-explorer, jsf, google-chrome, firefox

我有以下CSS

```
<style type="text/css"> 
.taskFilter {
    float: left;
    padding-left: -5px;
    border: 1px;
}
</style> 
```

在 JSF 中使用这个 CSS

```
<rich:column sortBy="#{report.taskName}"
id="taskName" filterMethod="#{myBean.filterTaskName}" />
<f:facet name="header">
<h:panelGroup>
<h:outputText value="Task Name" />
<h:inputText class="taskFilter" value="#{myBean.filterValue}" id="filterInput"
onclick="Event.stop(event)">
<a4j:support event="onkeyup" reRender="dataTable, ds" ... />
...
</rich:column> 
```

在 Firefox 和 Chrome 中运行良好，如下所示： ![在此处输入图像描述](../Images/9a39f047b7d923a8caecf50d742e683e.png)

然而 IE 奇怪地呈现它：

![在此处输入图像描述](../Images/ceb9a7e30f96cfd0d67717c4016ec18b.png)

有什么解决方法吗？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:54:17.810

由于您`input`在自己的行中清除，`float`所以您有：

```
.taskFilter {
    float: left;
    clear:both;
    padding-left: -5px;
    border: 1px;
} 
```

# visual-studio-2012 - 如何将我处理的一些文件组织到 Visual Studio 2012 中的某种自定义解决方案资源管理器视图中

> ID：15223945
> 
> 赞同：2
> 
> 时间：2013-03-05T12:33:48.793
> 
> 标签：visual-studio-2012

我有一个相当大的解决方案，有 50 多个项目。其中我只使用了 2 个，它们位于项目列表的对角。在这两个项目中，我只使用了几个文件。有没有办法像解决方案资源管理器一样在 Visual Studio 2012 中的多个项目中仅查看我感兴趣的那些文件，但仅限于我的文件集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:42:07.763

1.  好的，有一个名为“打开文件过滤器”的标准功能对我来说非常有用。基本上在解决方案资源管理器中，它只显示当前打开的文件。因此，只要您不关闭这些选项卡，您就会看到包含相同文件集的视图。

    有一个快捷方式可以将解决方案资源管理器切换到“打开文件过滤器”模式`Ctrl + [`：`O`

2.  另一个节省时间的方法是在解决方案资源管理器中右键单击文件夹或项目时，通过在上下文菜单中选择“新解决方案资源管理器视图”来启动新的解决方案资源管理器。

3.  此外，解决方案资源管理器顶部的“待更改”过滤器也有很大帮助。

# javascript - IE9 在表单提交上打开新选项卡（表单具有目标属性，指向动态创建的 iframe）

> ID：15223948
> 
> 赞同：0
> 
> 时间：2013-03-05T12:34:02.600
> 
> 标签：javascript, post, internet-explorer-9

我有一个 javascript 函数，它为表单动态创建 iframe，因此表单被发送到 iframe。该代码适用于 Chrome、Opera 和 Firefox，但是当我提交表单时 IE 会打开新选项卡。

如何解决这个问题？

**HTML**：

```
<form id="form1" name="form1" action="/post.php" method="post">
  <input type="text" name="foo" value="bar">
  <button type="submit" name="send">Send</button>
</form> 
```

**Javascript** *（在页面加载时运行）*：

```
var form = document.getElementById("form1");
if(!form.target) {
  var frame = document.createElement("iframe");
  frame.name = "frame" + Math.random();
  frame.id = frame.name;

  document.body.appendChild(frame);

  form.target = frame.id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T14:12:00.673

form.target 必须是 iframe 名称，而不是 id。

# python - 任务栏的 wxpython 图标

> ID：15223952
> 
> 赞同：5
> 
> 时间：2013-03-05T12:34:12.863
> 
> 标签：python, icons, wxpython

我正在尝试在我的 wxpython 程序中设置一个图标。到目前为止，在阅读了许多页面和示例之后，我能够在窗口中设置一个图标，这在使用 alt+tab 时也可以工作（我正在使用 Windows 7）。

但是任务栏上的图标是通常的python默认图标。

我不明白为什么这么简单的任务会有这么多麻烦。

这是我的代码：

```
class GraphFrame(wx.Frame):
    """ The main frame of the application
    """
    title = 'My first wxprogram'

    def __init__(self):
        wx.Frame.__init__(self, None, -1, self.title)

        ico = wx.Icon('dog.ico', wx.BITMAP_TYPE_ICO)
        self.SetIcon(ico)
        self.set_icon  

        self.create_menu()
        self.create_status_bar()
        self.create_main_panel()
        #... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T10:34:52.133

我在另一个与 PyQt 相关的 SO 问题/答案中找到了我在第二个答案中描述的问题的解决方法。在创建 GUI 之前将此代码添加到您的应用程序：

```
import ctypes
myappid = 'mycompany.myproduct.subproduct.version' # arbitrary string
ctypes.windll.shell32.SetCurrentProcessExplicitAppUserModelID(myappid) 
```

该图标将通过任一任务栏按钮设置正确设置。

可以在这里找到解释：[https ://stackoverflow.com/a/1552105/674475](https://stackoverflow.com/a/1552105/674475)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:59:16.957

目前无法通过 wxPython 设置任务栏图标（除非您破解系统变量），这是因为 Windows 从可执行文件中获取应用程序图标（在您的情况下是 Python）

如果您使用`pyinstaller`或`py2exe`（我更喜欢前者），则在编译时可以设置应用程序图标 - 这将使任务栏图标正确。

如果使用`pyinstaller`，您需要在规范文件中设置图标：

```
exe = EXE(pyz,
          a.scripts,
          a.binaries,
          a.datas,
          name=os.path.join('..\\path\\to\\output', 'AppName.exe'),
          icon='C:\\abs\\path\\to\\icon\\icon.ico',
          debug=False,
          strip=False,
          upx=False,
          console=False ) 
```

该`icon=...`行设置任务栏图标。

你的 python 代码的其余部分就可以了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T11:14:47.207

TyrantWave 和我的答案在特定情况下都是正确的。这取决于 Windows 7 设置：

![任务栏按钮设置](../Images/6b2cec131cef43426f09314c7b60a141.png)

隐藏标签时，图标似乎没有设置：

![在此处输入图像描述](../Images/f8190889a4b253157c858e05e9f480ac.png)

显示标签后，它可以正常工作：

![在此处输入图像描述](../Images/330c0c5fce52a2618fa11a505c3d8229.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T08:30:06.843

它应该按预期工作。我猜你的问题只是图标格式。我通常使用`img2py.py`wxPython 附带的脚本在代码中嵌入图标。这是一个工作示例：

![在此处输入图像描述](../Images/b1b4ab6a70f352bb531e8d1af3847a90.png)

```
import wx
from wx.lib.embeddedimage import PyEmbeddedImage

plane = PyEmbeddedImage(
    "iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAABgVJ"
    "REFUWIXtknlQ1GUYx7+/3WWBXWm5F4RFLh1mNZR1UYMBw1tMCM3RUNHRxswuxtIoGGeiqEkp"
    "J/PWvEJFvIIUFfBsN664N3OJ5VgC2WVPYJe93/5oKrM4KpvxDz///d739zzf7/N9H+AJjyNG"
    "ty2+j6KPiEr0Sc6VRI66IKvQxMu+pb4peL9Q9fLRtpf+i7iTE4Na/lllZeBOiWa4/2gPfrQ2"
    "99rl0kb+2g0LvCoHWg+d0/J3n8imXP6NgdwbmFeoHjOt1z/UY9QGTm3hdeu13CR5WZX55dRZ"
    "2CO68GpZZEfZivcbJoxGNPaVi75UbQ8LAO6re7aaOP4j1tAePjibwa/UGLze1FY1YpEwDANj"
    "nWN7x5nFh5sD0oZrVHuZYpGgAPHE76wV7nOzMwouX5s1GtNDUqoLO3iwrpNktQ6QNImezMyv"
    "JQXGiYerpXO8hqp57yauYbuGOL9dThiLdhNs1xDnfCMZToc+1EUDO/BaKGd1fLg3PVhjJxjj"
    "64Uq2TLBt21zlzA8EtqVNQXND9fklaaFF8cJn43wYoILPUzq+7pJS1aXe0o2Virab6n+WQQA"
    "skTj/D8sbr57VmEkLzWoyPomNVkj0ZGZp2vIBeuUQ8KEg94AwL4cMm1BrXdNYlGXRdKlIF0K"
    "Jcm52/fr9Dt/JrSsKkfSRcv1bSL3dYbx63we1KBGMsHfULJpRjRrz+wl01Aq14NGAXQmE4re"
    "PtiUJpkxIKqvXK6MSg8xIZNPh85OUKYHdl6sG3w6MKxBYTT46Cx2jkpr8Oq+10q9mZy8PjeJ"
    "deS3/n9ZwgfJl3oLFdr2nUU9AWgub8MMLht2AhhNFqjJU7huDwibSpNHSeeasX6cHTUaKz4S"
    "a5Fzpk49OyAm+dQLQc9syr3L9zpwMvw12AK7v8kf32lhHx91ArGvf6liOLtpqu78ELRwbkxF"
    "UmqU8JyexS6V0/BqqBkbeHbUDQIVAwQOUGhuUqL+Up1UWStJJNKPW0dKFxhmCQFgXTHL2CGO"
    "iLEp9dP5KWmSwi7tcgHXhZk3xQx3FkGemkAyCNhBwQoKDA4T3lyW1d+P2xvYNrWxU3/VNpKB"
    "EXdgzsdtE95In7dNcvvsyiWCIPgxCKSaQdTbmLC4jYHcYIXWaPl1GhoNYDqho6ULHCPV8LNI"
    "linetejycP2H3AHVpL1+srAVOyaGKWrdFaKVr8UEw5PmQKcVaIIrCs41ovx0mZ3X3Y04bxeE"
    "uDFBAbAOmhEc4gfXCN/JdIHnpWO9wcfu6WaPG3UCobMoF5/4qxtjJvttjRvv7h/LcwfDZoXO"
    "AbRYGChpMeDM+WrERUdfEV2pyBjr5uA5sW0nZy+exokI9YSK4YLWfjP6TFYwnJnQaAag/6lL"
    "NSjTfmgO/npv1fp91iEN9EzevHRXbvq2YDdTZGIEF2OIDf12gg4TUG1i4sy5RrS3dSsTowSZ"
    "RzaGHwaAD64ajn4iuZeGp8NoLjeqsPgpLYmKj6KcArnoIXT0GC2w0ujolnWDa3etfi5yfsay"
    "UOmNP03NeJFOL8P0PZlFNUSq0hG9TkN6VCrSpFCTMy0aklrURjyWHiFvi+l5OuqPODdu13GC"
    "U3P6w3OLCdacInGbi+9knYdQxnl++ck6Y2lOYbVtr+Q+yZUbyFstAyS1XkXij4odxUS4n8Xb"
    "HPB7AuyUj7Ky05M/WCcIArGYoHZQkPUTiA0MfLVPBLoLTTrV3z+9YIvg6sNPVsGMX7l11apX"
    "pvAjj88MiTmydKnD/tsdc/6ByZp7V1Z/sSt7uYuHc6Azzw+9TFc0tith7lTf/+l2zS7kS72F"
    "7HnFhk9F/aRTrSLlXWqyv62PJBxoIKxF+6zXGAk7tr97nTPUEo2GOx6fu5eoI1aerjeVZJ+v"
    "cByUKknGXQ2ZmVvWQW0t+rGBaXCPbGK54tloBm7fkONmnhiClNhvSZP0nVu7U8r/i/jDnJBG"
    "Tp3zjOfa76vLeYVXWjZRM7IvWJJSpjvdkunR8L3MFukXIor2GXvikxbf4/ZMm+NRiv8dVIl9"
    "fgLNk71QGMHX+Q6QYssPOfX/t+gTnvCEx4pfALyBxD1SVtncAAAAAElFTkSuQmCC")

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)
        self.SetIcon(plane.GetIcon())
        self.panel = wx.Panel(self)
        self.Show()

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

# excel-2010 - 工作表中一系列单元格的下拉列表

> ID：15223955
> 
> 赞同：0
> 
> 时间：2013-03-05T12:34:31.847
> 
> 标签：excel-2010

我有一个单元格 A1 到 A150 的下拉列表。我需要在文件中的所有工作表中显示相同范围（A1 到 A150）的相同下拉列表。我在同一文件的单独工作表中定义列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:34:46.027

1.  在您的第一个工作表（您已应用验证的位置）上选择 Range A1:A150，然后按 Ctrl-C 复制它。
2.  单击第一张空白表的选项卡，按住 shift 键并单击最后一张（它们都将被选中并显示为白色）。
3.  选择 A1 并单击主页 > 粘贴下方的箭头 > 选择性粘贴，然后选择验证。

# c# - monodroid 中的 DataAnnotations

> ID：15223956
> 
> 赞同：3
> 
> 时间：2013-03-05T12:34:38.017
> 
> 标签：c#, mono, xamarin, xamarin-studio, xamarin.android

我想与 MonoDroid 项目共享核心库中的一些模型，但`System.ComponentModel.DataAnnotations`不适用于 monodroid 目标。我尝试`System.ComponentModel.DataAnnotations`从单声道源代码中获取代码并将源代码编译到项目中，但最终陷入了一个兔子洞，试图让它与它的所有依赖项一起编译。

有人对我如何在 Xamarin monodroid 和 monotouch 项目中包含该命名空间有任何建议或步骤吗？

如果没有，也许是关于如何在我的 xamarin 项目中包含我的模型类库而不会出现构建错误的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T17:30:11.470

Soner，看起来它们目前在 Xamarin 中仍然不可用。但是，我在便携式类库中使用 DataContract 和 DataMember 注释没有任何问题。如果您不使用 PCL，我强烈推荐它用于任何代码共享场景。祝你好运！

# magento - Magento Paypal Express 按钮未显示

> ID：15223965
> 
> 赞同：1
> 
> 时间：2013-03-05T12:35:00.440
> 
> 标签：magento, paypal, magento-1.5

我正在运行 Magento 1.5.1，最近推出了一个新网站。目前我通过 Paypal Payments PRO 接受付款，并设置了 Paypal API 签名。我还启用了 Paypal Express 付款方式，并在配置中包含了我的 Paypal 电子邮件地址。出于某种原因，Paypal 付款选项未显示在购物车或结帐页面上。我的货币设置为美元，我的模板配置为显示所有付款方式。我的贝宝账户上也启用了贝宝快递。当我将商品添加到购物车并导航到[http://www.mydomain.com/paypal/express/start/](http://www.mydomain.com/paypal/express/start/)时，我会使用所有正确信息将其转发到贝宝。

任何想法为什么按钮没有显示？我花了过去 4 个小时试图找到解决方案，在网上搜索了所有内容，但仍然无法确定解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:10:34.347

PayPal 徽标是否出现在最终结帐页面上或根本不出现？

如果仅在最终结帐页面上，请查看您的 Express Checkout 配置。应该有一个名为“购物车快捷方式”的设置，需要设置为是。

要检查这一点，请执行以下操作：

*   登录 Magento 管理员
*   将鼠标悬停在“系统”上单击“配置”
*   在“销售”下左侧菜单的下一页上，单击“PayPal”
*   在“快速结帐设置”部分下，确保“购物车快捷方式”设置为“是”。

如果 PayPal 根本没有出现，这通常是由于模板问题。要对此进行测试，请尝试将购物车更新为默认模板，然后检查是否出现 PayPal。

# android - 从活动开始服务，2 个应用程序

> ID：15223966
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:00.903
> 
> 标签：android, android-service

我有两个应用程序。一个应用程序具有 Activity，另一个应用程序是后台服务。我如何从活动中启动服务？

我试过了：

```
Intent intent = new Intent () ;
intent.setClassName("com.example.mySerive","com.example.mySerive.service") ;
this.startService(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:05:06.233

首先，您应该在您的第二个应用程序的 AndroidManifest 上声明您的服务：

与活动（和其他组件）一样，您必须在应用程序的清单文件中声明所有服务。

要声明您的服务，请添加一个元素作为该元素的子元素。例如：

```
 <application ... >
      <service android:name=".ExampleService" />
      ...
  </application> 
```

如果您计划仅在本地使用您的服务（其他应用程序不使用它），那么您不需要（也不应该）提供任何意图过滤器。如果没有任何意图过滤器，您必须使用明确命名服务类的意图来启动服务。下面讨论了有关启动服务的更多信息。

当您想在外部应用程序上使用时，您必须定义一个 IntentFilter ：

```
<service android:name=".ExampleService" />
    <intent-filter>
        <action android:name="br.com.androidzin.MyService" />
    </intent-filter>
</service> 
```

之后，您可以通过以下方式在外部应用程序上启动服务：

```
 Intent intent=new Intent("br.com.androidzin.MyService");  
  this.startService(intent); 
```

# php - Magento 索引器问题

> ID：15223967
> 
> 赞同：5
> 
> 时间：2013-03-05T12:35:01.693
> 
> 标签：php, mysql, magento

我已经在服务器上设置了 Cron，每天午夜运行自定义导入配置文件。从该配置文件中创建或更新了数千种产品。'core_url_rewrite' 表会一天天变大。Magento Indexer 从 Magento 后端运行时无法正常工作。它随着消息而停止。

我正在尝试从命令行运行 Magento 索引器。但得到表“core_url_rewrite”锁定异常。如果此表被截断并运行 Magento 索引器，它运行正常，但是当自定义导入配置文件更新或插入产品时，它再次分解并触发相同的异常。

什么是最好的解决方案？由于每天由自定义导入配置文件创建/更新产品，因此每次截断表并不是一个好主意。

任何好的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:04:14.827

可能你需要增加表“core_url_rewrite”的表空间。以下是解决此问题的好文章。

[桌子满了](http://dev.mysql.com/doc/refman/5.0/en/full-table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T17:53:47.737

这听起来像您正在达到重新索引 URL 重写的内存或超时限制。

尝试使用此扩展程序通过仅索引需要重新索引的内容而不是全部数据量来最小化重新索引 URL 重写所需的时间。

[http://www.magentocommerce.com/magento-connect/dn-d-patch-index-url-1.html](http://www.magentocommerce.com/magento-connect/dn-d-patch-index-url-1.html)

# java - 应用程序中的多个线程 - 设计约定？

> ID：15223968
> 
> 赞同：2
> 
> 时间：2013-03-05T12:35:03.253
> 
> 标签：java, multithreading, design-patterns

假设在 java 中我们有一些对象/组（服务对象、控制器等），我们在单线程应用程序中使用它们。让我们用“A”来称呼这个对象。

一段时间后，我们正在扩展我们的线程模型并希望在其他线程（例如侦听器线程等）中也使用这些对象。

当然，在这种情况下，我们必须注意同步问题等等。但是直到现在使用对象“A”的开发人员无法意识到我们的架构更改，如果他将向类/（对象）“A”添加一些东西，他可能无法正确处理同步。当然，这个开发人员应该检查代码中所有出现的类“A”，但如果他不习惯这个类用于多线程环境，他可能不会这样做。

我的问题是......这种情况有什么好的模式，它将类/（对象）“A”标记为“多线程可用”。例如，某些接口的实现仅用于“信息”目的等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:46:06.627

我通常在代码顶部的 JavaDoc 中添加注释，表明某些内容是为多线程使用而设计的。

我也经常加单元测试，这样用处就清楚了。

然后由其他开发人员阅读文档和单元测试，以便他们了解预期用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:13:37.257

如果该对象与其所有客户端[松散耦合](http://en.wikipedia.org/wiki/Loose_coupling)，则应该可以创建“A”的线程安全版本。

直接来自 JDK 的示例：

```
java.lang.Appendable - the interface
java.lang.StringBuilder - regular implementation
java.lang.StringBuffer - thread-safe implementation 
```

客户端不必知道它是否是线程安全版本，因为它通过接口间接使用对象：

```
void doSomething(Appendable a) {
   a.append(...);
} 
```

从实际的角度来看，使用[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)可以显着帮助。使用接口进行业务合同声明，使用 Spring（或任何其他依赖注入框架）进行组件注入（是否线程安全仅取决于配置）。

**底线：您可以通过****松散耦合**和智能架构设计（关注点分离等）来防止此类问题。

# vba - 在 VBA 数组中存储时间数组

> ID：15223969
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:03.753
> 
> 标签：vba, excel, excel-2010

我想在 VBA 中存储一系列时间，就像这样，但 VBA 拒绝。

```
Dim timeA() As Variant
timeA = Array(01:42:32.75, 02:26:34.22, 05:03:23.54) 
```

相反，我必须像这样将它存储为串行。

```
Dim timeA() As Variant
timeA = Array(0.0712123842592593, 0.101784953703704, 0.21068912037037) 
```

我该怎么做才能将时间存储在 hh mm ss 中。短信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:06:00.943

试试这个：

```
Dim timeA() As Variant
timeA = Array(#01:42:32#, #02:26:34#, #05:03:23#) 
```

不幸的是，这不适用于几分之一秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:36:30.533

试试这个，有用吗？

```
Dim timeA() As Variant
timeA = Array("01:42:32.75", "02:26:34.22", "05:03:23.54") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:23:21.393

Timeserial 会将小时、分钟和秒转换为时间，但它不处理毫秒。如果你不需要毫秒，你可以使用

```
Sub storetime()

    Dim vaTime As Variant
    Dim i As Long

    vaTime = Array(TimeSerial(1, 42, 32.75), TimeSerial(2, 26, 34.22), TimeSerial(5, 3, 23.54))

    For i = LBound(vaTime) To UBound(vaTime)
        Debug.Print Format(vaTime(i), "hh:mm:ss")
    Next i

End Sub 
```

您可以添加 ms 喜欢

```
vaTime = Array(TimeSerial(1, 42, 32) + (0.75 / 24 / 60 / 60), TimeSerial(2, 26, 34) + (0.22 / 24 / 60 / 60), TimeSerial(5, 3, 23) + (0.54 / 24 / 60 / 60)) 
```

检查这些值似乎可行，但我无法显示毫秒，所以我不确定它对你有什么好处。

# script# - Script# 生成的 javascript 文件类名使用美元符号而不是点 '.' 分隔。

> ID：15223973
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:07.367
> 
> 标签：script#

我正在使用从 Script# 网站下载的 Script# 的自定义构建，并且生成的输出 javascript 文件具有以下代码示例：

```
// GeneralJS_v4.Wrappers.Elements.MyElementEventHandlers

function GeneralJS_v4$Wrappers$Elements$MyElementEventHandlers(element) {
  this._element = element;
  this._handlersMap = {};
} 
```

如您所见，生成的类名是`GeneralJS_v4$Wrappers$Elements$MyElementEventHandlers`. 问题是，每当一个不同的项目引用另一个项目时，它不会`$`使用`.`符号（例如`GeneralJS_v4.Wrappers.Elements.MyElementEventHandlers`）来引用它们，因此它会给出找不到类的错误。

知道为什么它使用`$`生成的类名而不是`.`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:21:23.100

[Script# 0.8 对生成代码](https://stackoverflow.com/questions/14557863/script-0-8-changes-in-generated-code)的更改也涵盖了相同的主题。

总结是生成的代码*现在*位于脚本模块中（实现为函数闭包），并且模块对象具有挂在其上的所有公共类型，供模块的使用者按照 AMD 模式访问。有关 AMD 模式本身的一些详细信息，请参见此处：http: [//addyosmani.com/writing-modular-js/](http://addyosmani.com/writing-modular-js/)

出于说明目的，如果您的程序集对应于“foo”模块，则生成的脚本将类似于：

```
define('foo', ['ss'], function(ss) {

 // GeneralJS_v4.Wrappers.Elements.MyElementEventHandlers

 function GeneralJS_v4$Wrappers$Elements$MyElementEventHandlers(element) {
   this._element = element;
   this._handlersMap = {};
 }

 var $exports = ss.module('basic', null,
   {
     MyElementEventHandlers: [ GeneralJS_v4$Wrappers$Elements$MyElementEventHandlers, GeneralJS_v4$Wrappers$Elements$MyElementEventHandlers$, null ]
   });

 return $exports;
}); 
```

查看生成的输出并使用 ScriptTemplate 元数据属性改变输出的一个很好的例子是单元测试 - 请参阅[https://github.com/nikhilk/scriptsharp/tree/cc/tests/TestCases/Basic/Simple](https://github.com/nikhilk/scriptsharp/tree/cc/tests/TestCases/Basic/Simple)

具有对`foo`模块的引用的调用者将能够访问您的类型，`foo.MyElementEventHandlers`即使用 object.member 样式。

例如：

```
require(['foo'], function(foo) {

  var o = new foo.MyElementEventHandlers(...);
}); 
```

除了单元测试之外，这也显示在 github 存储库中的各种示例中，这些示例显示使用生成的脚本与 script# AMD 脚本加载器（AroundMe 示例），更知名的 requirejs AMD 加载器（KOWorld 示例） ，以及不使用 AMD 模式（FishTank 示例）。

希望有帮助。

# c++ - Visual Studio C++ 中的 DDALine

> ID：15223975
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:19.913
> 
> 标签：c++, visual-c++

我用 C++ 在 Visual-Studio 中编写了 DDALine 算法，但 Visual-Studio 说

> 'putpixel'：找不到标识符.....

我正在使用`graphics.h`，但是不起作用？？

我的源代码

```
#include "graphics.h"
#include "stdlib.h"
#include "stdio.h"
#include "conio.h"
#include "dos.h"
#include "stdafx.h"
#include "math.h"

void ddaline(int x1,int y1,int x2,int y2,int color)
{

int dx,dy,len,i;
float xinc,yinc,x,y;
dx=x2-x1;
dy=y2-y1;
if (abs(dx)>abs(dy))
len=abs(dx);
else
len=abs(dy);
     if (len!=0)
{
xinc=((dx*1.0)/(len));
yinc=((dy*1.0)/(len));
 }
 x=x1;
 y=y1;
  for(i=0;i<=len;i++)
  {
  putpixel(x,y,color);
  x=x+xinc;
  y=y+yinc;
  }

       }
     void main()
  {

 ddaline(1,1,640,400,4);

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:45:13.303

`<graphics.h>`并且`<conio.h>`不是 C++ 标准头文件。你的项目旁边有吗？！

您应该在 Turbo C++ 中测试您的代码，并且可能使用 DOSBOX（新的 Windows 版本不支持 DOS 全屏模式）

# c++ - libcurl + openssl 无法下载大于 2GB 的文件

> ID：15223979
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:32.957
> 
> 标签：c++, curl, openssl, libcurl

我正在尝试使用 libcurl 7.20.0 和 openssl 0.9.8l（但我将库更新为 7.29.0 和 1.0.1e）、Windows 7 下载文件，一切都在为 amd64 编译以下载一个大文件。我使用 curlpp 作为 curl 的包装器。问题是，一旦达到 2GB，下载就会停止并出现错误`Failed writing body (0 != 8999)`。我用来执行请求的代码是：

```
boost::shared_ptr<curlpp::Easy> curl_request(boost::make_shared<curlpp::Easy>());
curl_request.setOpt(new curlpp::options::HttpVersion(CURL_HTTP_VERSION_1_0));
curl_request.setOpt(new curlpp::options::Timeout(3600));
curl_request.setOpt(new curlpp::options::SslVerifyHost(0));
curl_request.setOpt(new curlpp::options::SslVerifyPeer(0));
curl_request->setOpt(new curlpp::options::Url(request_uri));
if (cookies.size() == 0) {
    curl_request->setOpt(new curlpp::options::CookieList("dummy"));
} else {
    BOOST_FOREACH(const std::string &cookie, m_cookies) {
        curl_request->setOpt(new curlpp::options::CookieList(cookie));
    }
}
curl_request->setOpt(new curlpp::options::Post(true));
curl_request->setOpt(new curlpp::options::PostFields(query_string));
curl_request->setOpt(new curlpp::options::WriteStream(stream.get()));

try {
    curl_request->perform();
} catch (std::exception &ex) {
    error = true;
    std::cerr << "caught Unknown error: " << ex.what() << std::endl;
} 
```

**编辑**流是字符串流，我使用的是 MS VS 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:02:45.893

这不是 libcurl 或 OpenSSL 限制。这是您的文件系统（FAT？）或 WriteStream 实现（或类似的）阻止它工作。

该错误消息似乎暗示突然写入磁盘失败，这可能是当写入溢出最大支持大小时。

# hadoop - 使用 ImageIO.write 保存图像时出现 ArrayIndexOutOfBoundsException

> ID：15223982
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:47.693
> 
> 标签：hadoop, javax.imageio, indexoutofboundsexception

我正在尝试构建一个 mapreduce 代码来读取和写入图像，但是 `ArrayIndexOutOfBoundsException`在使用 ImageIO.write 保存图像时我得到了，尽管我没有对图像进行任何更改。这是代码：

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;
import java.util.ArrayList;
import java.io.InputStream;
import java.io.OutputStream;
import javax.imageio.ImageIO;
import java.io.BufferedInputStream;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.hadoop.io.Writable;

public class mrimage implements Writable {
private static final Log log = LogFactory.getLog(mrimage.class);

BufferedImage reader = null;
String FileName;

public mrimage(){

}

public mrimage(BufferedImage buff,String fileName){
    this.reader = buff;
    this.FileName = fileName;
}

public BufferedImage getImage(int i){
return this.reader;
}

//reading generated image files
@Override
public void readFields(DataInput in) throws IOException { 
    try{
        reader = ImageIO.read(new BufferedInputStream((InputStream)in));

    }
    catch(Exception e){
        log.info(e);
    }
}

//writing the image files 
@Override
public void write(DataOutput out) throws IOException {

    try{
          ImageIO.write(reader, "jpg", (OutputStream)out);

    }
    catch(Exception e){
    }
}
} 
```

有人可以帮忙吗？

这是我收到的完整错误消息：

```
java.lang.ArrayIndexOutOfBoundsException
at java.lang.System.arraycopy(Native Method)
at java.io.ByteArrayInputStream.read(ByteArrayInputStream.java:174)
at java.io.DataInputStream.read(DataInputStream.java:132)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
at javax.imageio.stream.FileCacheImageInputStream.readUntil(FileCacheImageInputStream.java:121)
at javax.imageio.stream.FileCacheImageInputStream.read(FileCacheImageInputStream.java:167)
at javax.imageio.stream.ImageInputStreamImpl.readFully(ImageInputStreamImpl.java:337)
at javax.imageio.stream.ImageInputStreamImpl.readFully(ImageInputStreamImpl.java:347)
at com.sun.imageio.plugins.bmp.BMPImageReaderSpi.canDecodeInput(BMPImageReaderSpi.java:66)
at javax.imageio.ImageIO$CanDecodeInputFilter.filter(ImageIO.java:541)
at javax.imageio.spi.FilterIterator.advance(ServiceRegistry.java:793)
at javax.imageio.spi.FilterIterator.<init>(ServiceRegistry.java:787)
at javax.imageio.spi.ServiceRegistry.getServiceProviders(ServiceRegistry.java:491)
at javax.imageio.ImageIO.getImageReaders(ImageIO.java:620)
at javax.imageio.ImageIO.read(ImageIO.java:1412)
at javax.imageio.ImageIO.read(ImageIO.java:1326)
at imagetojpeg.KUImage.readFields(KUImage.java:33)
at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:67)
at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:40)
at org.apache.hadoop.mapreduce.ReduceContext.nextKeyValue(ReduceContext.java:116)
at org.apache.hadoop.mapreduce.ReduceContext.nextKey(ReduceContext.java:92)
at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:175)
at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:649)
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417)
at org.apache.hadoop.mapred.Child$4.run(Child.java:261)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
at org.apache.hadoop.mapred.Child.main(Child.java:255) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-12-18T19:44:25.207

我遇到了这个问题，结果证明我声明输出文件和输入文件的方式不匹配。在上一步中，我将输出文件定义为 type `SequenceFileAsBinaryOutputFormat`，但在下一步中，我将输入声明为 type `SequenceFileInputFormat`。一旦我将输入格式更改`SequenceFileAsBinaryInputFormat`为问题就消失了。

# xml - 想要提取xml文件的整个节点

> ID：15223983
> 
> 赞同：0
> 
> 时间：2013-03-05T12:35:52.673
> 
> 标签：xml, vb.net

我在 vb.net 中有这样的代码

```
Dim str As String

        Dim xmlText As String = File.ReadAllText(Server.MapPath("~/reply.xml"))
        Dim doc As New XmlDocument()

        doc.LoadXml(xmlText)

        Dim nsmgr As XmlNamespaceManager = New XmlNamespaceManager(doc.NameTable)
        nsmgr.AddNamespace("ns1", "http://schemas.xmlsoap.org/soap/envelope/")
        nsmgr.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/envelope/")
        Dim root As XmlElement = doc.DocumentElement

        Dim node As XmlNode = root.SelectSingleNode("//soapenv:Body", nsmgr)
        Dim s As String = node.InnerXml 
```

它对我来说很好我能够提取 soapenv:Body 节点的整个内部 xml。但我想提取 soapenv:Body 节点的子子节点。

我对此的表达是：

```
 Dim node As XmlNode = root.SelectSingleNode("//soapenv:Body/ns1:OTA_AirLowFareSearchRS/ns1:PricedItineraries", nsmgr) 
```

但它什么也没提取。我的xml是这样的：

```
<?xml version="1.0" encoding="utf-8" ?>
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
    <ns1:OTA_AirLowFareSearchRS Version="2.001" xmlns="http://www.opentravel.org/OTA/2003/05" xmlns:ns1="http://www.opentravel.org/OTA/2003/05">
      <ns1:Success />
        <ns1:PricedItineraries>
        <ns1:PricedItinerary CompositeFlightNumber="S2" CountCompositeFlightNumber="1" FareType="Non-Refundable" InboundSegmentReference="1" MatrixFare="true" Mode="" OriginDestinationRPH="BLRMAAS242336620130329" OutboundSegmentReference="1" Priority="1" RecommendationRPH="1" Refundable="true" ReturnOnly="false" SequenceNumber="1.0" SupplierCode="1AWS">
          <ns1:AirItinerary SupplierSystem="Amadeus">
            <ns1:OriginDestinationOptions>
            <ns1:OriginDestinationOption Duration="00:45:00" FlightID="BLRMAAS24233662013-03-29" MajorityCarrier="S2" ReturnOnly="false" SupplierCode="1AWS" SupplierSystem="Amadeus" UniqueIdentifier="1.0">
                <ns1:FlightSegment ArrivalDateTime="2013-03-29T20:20:00" CabinCode="Y" DeliveryMethod="Courier" DepartureDateTime="2013-03-29T19:35:00" Duration="00:45:00" FlightNumber="4233" LTD="1AWS" LineNumber="Y" NumberInParty="BLRMAA" RPH="1" ResBookDesigCode="G" TicketType="Physical" ValidConnectionInd="1AWS">
                <ns1:DepartureAirport AirPortName="Bengaluru" CityName="Bangalore" LocationCode="BLR" />
                <ns1:ArrivalAirport AirPortName="Chennai" CityName="Chennai" LocationCode="MAA" Terminal="D" />
                <ns1:OperatingAirline Code="S2" />
                <ns1:BookingClassAvail FareType="RP" ResBookDesigCode="G" ResBookDesigQuantity="7" Status="7" WebFareName="G2SAP30" />
                <ns1:Equipment AirEquipType="739" />
                <ns1:MarketingAirline Code="S2" MatrixCode="66" Name="JetKonnect" YTAirlineCode="77" />
                <ns1:ValidatingCarrier Code="S2" />
              </ns1:FlightSegment>
                <ns1:FormData>
                <ns1:FBC Destination="MAA" FlightNumber="4233" LineNumber="Y" Origin="BLR" SeatToSell="7" WebFareName="G2SAP30" />
                 <ns1:FareDifference>
                  <ns1:TotalFare ADT="2" BaseFare="1140-ADT 570" CHD="0" Cabin="Economy" HostName="railserver" INF="0" Rbd="RP - G -" Tax="TTL-4806">5957</ns1:TotalFare>
                </ns1:FareDifference>
                <ns1:TicketingInfo DeliveryMethod="Courier" TicketTimeLimit="2013-03-05 4:19:00" TicketType="Physical" />
                <ns1:AgentMarkup>
                   <ns1:Airlines>
                          :
                          :
                          :
                          : 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:39:54.977

您`"ns1"`在`XmlNamespaceManager`. 根据您尝试解析的 XML 文档，它应该是：

```
nsmgr.AddNamespace("ns1", "http://www.opentravel.org/OTA/2003/05") 
```

前缀`ns1:`在 XML 和 XPath 中都使用，但这根本不重要。重要的是您在 XPath 中使用的前缀绑定到正确的名称空间 URI。

你可以这样写你的代码：

```
nsmgr.AddNamespace("zzz", "http://www.opentravel.org/OTA/2003/05")
nsmgr.AddNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/") 
```

然后是这样的 XPath：

```
//soap:Body/zzz:OTA_AirLowFareSearchRS/zzz:PricedItineraries" 
```

只要 URI 与文档中的元素匹配，它仍然可以工作。

记住：文档中的前缀并不重要；只有命名空间 URI 很重要。您可以决定为 XPath 使用哪些前缀，只要它们绑定到您期望的元素的正确 URI。

# asp.net - 第一个项目的测试概念

> ID：15223992
> 
> 赞同：1
> 
> 时间：2013-03-05T12:36:10.847
> 
> 标签：asp.net, testing, web-applications

我目前正在为我的项目做我的功能规范文档。唯一仍然缺少的是测试概念。我的项目是关于一个网络应用程序，我可以用它记录和管理我 ojt 公司的员工出勤情况。我正在使用 c# 作为编程语言在 asp.net Web 表单中执行该应用程序。我正在使用的 ide 是 vs for web 2012。

现在我需要编写一个测试概念。我已经阅读了一些关于系统和模块测试的文献。我用几个模型类设计了我的应用程序，它们的唯一方法是 get() 和 set() 方法。可能我会写一些需要参数的方法，这有多重要。

我不太确定我将计划进行哪些测试。你能帮我吗？一些粗略的例子也会很有帮助......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:06:24.537

您应该根据您的要求执行以下操作：

*   单元测试
*   集成测试
*   回归测试
*   功能测试
*   端到端测试
*   负载测试
*   压力测试
*   性能测试
*   Beta测试
*   安全测试
*   可用性测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:17:50.873

功能测试有很多例子。像登录，添加，编辑，删除等在这里你只需检查这些功能是否正常工作。这是您的应用程序中的基本内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:55:57.983

在这里，如果您了解测试，则不需要测试用例和测试计划。仅供您的客户参考。首先，您只需进行功能测试，这将有助于您的项目状态。如果每个功能都正常工作，那么应用程序将没有大问题。然后只需进行回归和冒烟测试

# android - 哈希图和谷歌地图

> ID：15223993
> 
> 赞同：2
> 
> 时间：2013-03-05T12:36:11.227
> 
> 标签：android, google-maps, hashmap

我想实现这样的事情：

**我有什么我** 有 JSON 数据`lat`和`lng`值，我已经把所有这些都放进去`Hashmap`，我已经完成了它并且它的工作

**我需要什么我** 如何将这些存储`lat`和`lng`值放入带有更多标记的 Google 地图中？

我有这段代码用于解析 JSON 数据

```
 ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    JSONParser jParser = new JSONParser();
    JSONArray json = jParser.getJSONFromUrl(url);
    try {
           for(int i = 0; i < json.length(); i++){
                JSONObject c = json.getJSONObject(i);

                String lat = c.getString(TAG_LAT);
                String lng = c.getString(TAG_LNG);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_LAT, lat);
            map.put(TAG_LNG, lng);

            // adding HashList to ArrayList
            contactList.add(map);
           }
    } catch (JSONException e) {
        e.printStackTrace();
        Log.e("JSON Parser", "Error parsing data " + e.toString());

    } 
```

**问题**

我不知道我应该从哪里开始，如何将超过 1 个标记放入 Google 地图？

```
 SupportMapFragment mapFrag=
                    (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);
            initListNav();
            map=mapFrag.getMap();

            CameraUpdate center=
                    CameraUpdateFactory.newLatLng(latvalue, lngvalue);

            CameraUpdate zoom=CameraUpdateFactory.zoomTo(13);

            map.moveCamera(center);
            map.animateCamera(zoom);

            addMarker(map, latvalue , lngvalue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:21:16.047

是否迭代数组才是问题所在，而不是你这样做的方式。

```
for (HashMap<String, String> hashMap : contactList) {
    map.addMarker(new MarkerOptions()
      .position(new LatLng(hashMap.get(TAG_LAT) , hashMap.get(TAG_LNG)))
      .title("Another marker"));
} 
```

编辑：

```
 mMap = ((SupportMapFragment) 
    getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    mMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);

    ArrayList<LatLng> contactList = new ArrayList<LatLng>();

    contactList.add(new LatLng(48.8742, 2.3470));
    contactList.add(new LatLng(0, 0));

    for (LatLng latLon : contactList) {
        mMap.addMarker(new MarkerOptions().position(latLon).title("Another marker"));
    } 
```

编辑2：与哈希图相同

```
ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

//Paris
{
    // creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();

    // adding each child node to HashMap key => value
    map.put(TAG_LAT, "48.8742");
    map.put(TAG_LNG, "2.3470");

    // adding HashList to ArrayList
contactList.add(map);
}

//London
{
    // creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();

    // adding each child node to HashMap key => value
    map.put(TAG_LAT, "51.5171");
    map.put(TAG_LNG, "0.1062");

    // adding HashList to ArrayList
    contactList.add(map);
}

for (HashMap<String, String> hashMap : contactList) {
    mMap.addMarker(new MarkerOptions()
        .position(new LatLng(Double.parseDouble(hashMap.get(TAG_LAT)) ,        
            Double.parseDouble(hashMap.get(TAG_LNG))))
        .title("Another marker"));
} 
```

编辑 3，如何在标记点击时获得回调：

```
mMap.setOnMarkerClickListener(new OnMarkerClickListener() {

    @Override
    public boolean onMarkerClick(Marker arg0) {
        Log.e("onMarkerClick", "test: "+arg0.getTitle());
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T13:12:54.110

您应该使用 Google Maps API V2。在[Google Maps API Demo V2](https://developers.google.com/maps/documentation/android/intro#sample_code)中，您可以看到标记是如何添加到`GoogleMap mMap`.

```
 // Uses a custom icon.
mSydney = mMap.addMarker(new MarkerOptions()
        .position(SYDNEY)
        .title("Sydney")
        .snippet("Population: 4,627,300")); 
```

在此示例`SYDNEY`中是一个`LatLong`点，标题和片段用于自定义信息窗口。只需查看您的 Hashmap 并将每个标记添加到地图中。您不一定需要将每个标记分配给一个`Marker`变量（就像他们在示例中所做的那样`mSydney`）。

# php - Php DOM 和 Xpath - 替换节点但保留旧节点的子节点

> ID：15223995
> 
> 赞同：0
> 
> 时间：2013-03-05T12:36:14.333
> 
> 标签：php, dom, xpath

考虑以下 html：

```
<html>
    <title>Xyz</title>
    <body>
        <div>
            <div class='mycls'>
                <div>1 Books</div>
                <div>2 Papers</div>
                <div>3 Pencils</div>
            </div>
        </div>
    <body>
</html>
$dom = new DOMDocument();
$dom->loadHTML([loaded html of remote url through curl]);
$xpath = new DOMXPath($dom);
$nodes = $xpath->query('html/body/div[@class="mycls"]'); 
```

直到这里它工作正常，我需要更换节点才能获得以下信息：

```
<body>
        <div>
            <span>
                <div>1 Books</div>
                <div>2 Papers</div>
                <div>3 Pencils</div>
            </span>
        </div>
    <body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:57:19.330

像下面这样的东西应该适合你：

```
$dom = new DOMDocument();
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$oldNode = $xpath->query('//div[@class="mycls"]')->item(0);
$span = $dom->createElement('span');

if ($oldNode->hasChildNodes()) {
    $children = [];
    foreach ($oldNode->childNodes as $child) {
        $children[] = $child;
    }
    foreach ($children as $child) {
        $span->appendChild($child->parentNode->removeChild($child));
    }
}

$oldNode->parentNode->replaceChild($span, $oldNode);

echo htmlspecialchars($dom->saveHTML()); 
```

演示：[http ://codepad.viper-7.com/WNTrR5](http://codepad.viper-7.com/WNTrR5)

请注意，在演示中，我还修复了您完全损坏的 HTML :-)

如果您的演示确实是您从 cURL 调用返回的 HTML，并且您无法更改它（无法控制它），您可以执行以下操作：

```
$libxmlErrors = libxml_use_internal_errors(true); // at the start 
```

和

```
libxml_use_internal_errors($libxmlErrors); // at the end 
```

为了防止错误弹出