# StackOverflow 问答 13270000-13270999

# java - 为什么logstash启动/加载需要这么长时间？

> ID：13270004
> 
> 赞同：11
> 
> 时间：2012-11-07T12:40:44.810
> 
> 标签：java, jar, jruby, logstash

**编辑：**我更改了标题，因为问题不是我最初的想法。事实上，logstash 需要*一分钟多的时间*才能启动，这可能会被误解为“沉默”......

* * *

我试图让logstash运行，所以我按照官方网站上的说明进行独立安装： http: [//logstash.net/docs/1.1.4/tutorials/getting-started-simple](http://logstash.net/docs/1.1.4/tutorials/getting-started-simple)

基本上，我得到了`logstash-1.1.4-monolithic.jar`文件，然后构建了一个非常简单的配置文件：（`example.conf`）

```
input {
  stdin { type => "stdin-type"  }
}
output {
  stdout { debug_format => "json" }
} 
```

但是当我运行 logstash 时，什么也没有出现（我在 STDIN 中输入随机文本，但没有得到响应）：

```
# java -jar logstash-1.1.4-monolithic.jar agent -f example.conf
Test
toto
hey ??? Wakeup !!!
^C 
```

（供参考：Java 版本正确）

```
# java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) Client VM (build 20.1-b02, mixed mode, sharing) 
```

拜托，有人能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T22:07:46.863

好的，我自己找到了。

一切正常。只是logstash启动时间太长了。在我的（不起眼的）服务器上超过 60 秒！添加到那个巨大的开始时间，启动时没有打印任何内容......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T11:56:04.017

因为这个问题仍然相关，所以我想指出，如果您在 Java <8 上运行，那么您在 Linux（也许还有 Solaris）上的启动时间可能会很慢的一个原因是因为 Oracle JVM 在那些平台在获取随机数方面存在错误。

即使被告知从 /dev/urandom 获取其随机数，它也不会（至少，不完全是？）。如果您从 /dev/./urandom 读取它，它是相同的，但与内部损坏的逻辑不匹配，那么您很可能会发现 Java 启动得更快（尤其是在 J2EE 中间件环境中）。

[http://bugs.java.com/view_bug.do?bug_id=6521844](http://bugs.java.com/view_bug.do?bug_id=6521844)

也就是说，即使使用 Java 8，logstash --configtest 的启动速度仍然非常慢；这可能是因为服务器模式下的 64 位 JVM 会在启动时做很多优化工作（即便如此，我怀疑 JRuby 正在做很多与 Ruby 相关的事情）。

JRuby wiki 有一个关于其他启动性能改进的文档 ( [https://github.com/jruby/jruby/wiki/Improving-startup-time](https://github.com/jruby/jruby/wiki/Improving-startup-time) )，但不太适用于更快地获取 logstash。我可以将“logstash --configtest”的启动时间缩短到大约 8 秒：

```
[root@node-2 ~]# DEBUG=1 /opt/logstash/bin/logstash help
DEBUG: exec /opt/logstash/vendor/jruby/bin/jruby --1.9 -J-XX:+UseParNewGC -J-XX:+UseConcMarkSweepGC -J-Djava.awt.headless=true -J-XX:CMSInitiatingOccupancyFraction=75 -J-XX:+UseCMSInitiatingOccupancyOnly -J-XX:+HeapDumpOnOutOfMemoryError -J-Xmx1g -J-XX:HeapDumpPath=/opt/logstash/heapdump.hprof /opt/logstash/lib/bootstrap/environment.rb logstash/runner.rb help 
```

获取它将执行的命令，删除所有 java 选项，并替换为`--dev`

```
[root@node-2 ~]# time /opt/logstash/vendor/jruby/bin/jruby /opt/logstash/lib/bootstrap/environment.rb logstash/runner.rb agent --configtest --config /etc/logstash/logstash-submission.conf 
Configuration OK

real    0m13.367s
user    0m12.966s
sys 0m0.321s
[root@node-2 ~]# time /opt/logstash/vendor/jruby/bin/jruby --dev /opt/logstash/lib/bootstrap/environment.rb logstash/runner.rb agent --configtest --config /etc/logstash/logstash-submission.conf 
Configuration OK

real    0m6.954s
user    0m6.629s
sys 0m0.286s 
```

7 秒仍然不是很好，但比 14 秒左右要好。7 秒是喝一口咖啡的最佳时间，因此可以避免在喝完咖啡之前尴尬地完成测试。乙^)

一个简单的别名可能是一个有用的快速取胜：

```
alias logstash-configtest="/opt/logstash/vendor/jruby/bin/jruby --dev /opt/logstash/lib/bootstrap/environment.rb logstash/runner.rb agent --configtest" 
```

我相信您也可以使用 USE_RUBY=1 标志运行 logstash 以使用“ruby”而不是供应商的 jruby - 您不会为正常运行 logstash 执行此操作，但它可能对 --configtest 有用经常使用它。——你确实需要确保你拥有所有不同的 Ruby 模块，然后你的原生 ruby​​ 和供应商的 jruby 之间会有版本偏差……但也许 Ruby 爱好者可以接受这个想法并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T14:20:12.970

我大约一周前开始使用logstash。真的被@jordansissel 仇恨驱动的发展所吸引。最后几天在#logstash irc 上与 ppl 就包括您提到的问题在内的问题进行了交谈。

在我的 ubuntu 12.04 上启动 logstash-web（一个稀疏的 sinatra Web 服务器）需要 29（！）秒。

我相信logstash必须远离使用java。Logstash 肯定可以像 sensu 一样作为 ruby​​ 应用程序运行，并以更少（或没有）痛苦提供相同的价值。

在控制台上使用 java(jruby)`puts "bla"`需要 7 秒。

简短的回答是：java 在杯子里好，在电脑里不好。如果您看到类似“先决条件：Java”之类的内容，请准备好浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T18:36:19.420

我认为您会草率地得出结论，只需激活 --debug 日志并查看发生了什么+您甚至可以使用您的工具包对其进行分析并准确查看属于什么的。

# php - Joomla 2.5 检查当前页面

> ID：13270005
> 
> 赞同：1
> 
> 时间：2012-11-07T12:40:49.117
> 
> 标签：php, html, css, joomla

在 Joomla 2.5 中，我如何检查用户当前在哪个页面上？我有这个检查它们是否在主页上：

```
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) { 
```

我需要类似的东西来检查它们是否在网站的另一个页面上并返回不同的模板。这将如何完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:54:42.390

```
$app = JFactory::getApplication();
$menu = $app->getMenu();
$active = $menu->getActive();

if ($active->id == 139){
//some code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T07:26:36.317

Joomla php 检查用户是否正在查看特定页面。

有几种方法可以将您的首页与网站中的其他页面区分开来。

$active = JFactory::getApplication()->getMenu()->getActive();

回声 $active-> 别名；

# javascript - 将数组或对象传递给函数将其转换为字符串

> ID：13270010
> 
> 赞同：0
> 
> 时间：2012-11-07T12:41:02.097
> 
> 标签：javascript, jquery

这是我的要求，我有一个包含日期数据的数组，例如

```
$.each(dateWiseArr, function(index, currentDate){
    myDateArray[currentDate] = "myData";
    dateWiseOtherId[currentDate] = "otherId";
});
alert(myDateArray+"::"+dateWiseOtherId);//working fine and showing right data
$("#myBtn").attr("onClick", "myPassingFunction("+myDateArray+", "+dateWiseOtherId+")");

function myPassingFunction(myDateArray, dateWiseOtherId){
    alert(myDateArray[0]);//throw undefined
} 
```

现在，当我按下按钮函数调用成功但变量变为字符串时。

如果您需要更多理解，请告诉我。

注意：我的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:46:05.550

绑定函数而不是绑定字符串，则不需要将值转换为字符串：

```
$("#myBtn").click(function(){
  myPassingFunction(myDateArray, dateWiseOtherId);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:49:08.633

下面试试。它应该工作。

```
$.each(dateWiseArr, function(index, currentDate){
    myDateArray[currentDate] = "myData";
    dateWiseOtherId[currentDate] = "otherId";
});

alert(myDateArray+"::"+dateWiseOtherId);//working fine and showing right data

$("#myBtn").click(function (event) {
     myPassingFunction(myDateArray, dateWiseOtherId);
});

function myPassingFunction(myDateArray, dateWiseOtherId){
    alert(myDateArray[0]);//throw undefined
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:55:44.990

绑定事件的正确方法：检查这个工作小提琴[http://jsfiddle.net/vC4Yk/](http://jsfiddle.net/vC4Yk/)

```
var myDateArray = ["some data"];
var dateWiseOtherId = ["some other data"];

alert(myDateArray+"::"+dateWiseOtherId);//working fine and showing right data

$("#myBtn").click(function(){
   myPassingFunction(myDateArray, dateWiseOtherId);      
});

function myPassingFunction(myDateArray, dateWiseOtherId){
    alert(myDateArray[0]);
}   ​ 
```

# java - 计算在 android 上下载文件时的下载百分比和剩余时间

> ID：13270012
> 
> 赞同：0
> 
> 时间：2012-11-07T12:41:07.680
> 
> 标签：java, android, android-progressbar, download

我有一个 android 应用程序，可以将歌曲从服务器下载到设备。我正在为此显示一个进度对话框。我需要向用户显示下载的大小、剩余大小、经过的时间和剩余时间

我如何从 Android 中的应用程序中获取这些东西？

任何指针都是最有用的。

问候伦吉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:24:12.420

您应该使用异步任务并覆盖 onProgressUpdate()

```
 @Override
 protected void onProgressUpdate(Integer... values) {
     Log.i("Value", values[0].toString());
     count++;
     progressBar.setProgress(count);
 } 
```

看看这个链接。[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)。链接中的答案应该对您有所帮助。

[计算其他应用程序中的下载百分比和剩余时间](https://stackoverflow.com/questions/11927853/calculate-percentage-downloaded-and-time-remaining-for-in-other-application)。 [计算剩余下载时间的最佳方法是什么？](https://stackoverflow.com/questions/798800/whats-the-best-way-to-calculate-remaining-download-time)

# php - 删除从浏览器发送到服务器的标头

> ID：13270013
> 
> 赞同：6
> 
> 时间：2012-11-07T12:41:09.667
> 
> 标签：php, apache, api, header, sinemacula

## 问题和我的问题

我目前正在尝试优化我网站上返回大量缩小 javascript 的页面。

通过优化，我的意思是加快速度:-)

我试图加快此页面速度的方法之一是减少浏览器发送到服务器的标头。24 小时前，我不认为这是可能的，但是，从那时起，我发现了一个可以做到这一点的页面，并想知道如何以及是否值得进一步调查。

我的页面位于[https://libraries.sinemaculammviii.com/](https://libraries.sinemaculammviii.com/)

我要比较的页面是[https://www.google.com/jsapi](https://www.google.com/jsapi)

**我已经使用[http://tools.pingdom.com](http://tools.pingdom.com)测试了这两个页面的速度，其中清楚显示的一件事是缺少Google 页面发送的*请求标头***

**他们怎么做到的？我应该这样做吗？**

**有人对我如何加快此页面的速度有任何其他建议吗？**

我目前正在使用：

1.  gzip 压缩页面
2.  JSPacker 缩小 javascript
3.  我将应用缓存标头（**我还没有这样做**）
4.  虽然这可能不会有所作为，因为页面不是静态的，但我已经通过 CloudFlare CDN 路由了我的站点

## 解决方案的证据

如果您比较以下链接中的标头（显示在展开的结果中），您可以清楚地看到 Google 页面没有发送请求标头：

**[我的页面](http://tools.pingdom.com/fpt/#!/NY9ZnxDZ7/https://libraries.sinemaculammviii.com/)**

**[谷歌页面](http://tools.pingdom.com/fpt/#!/kIHgA861d/https://www.google.com/jsapi)**

**更新 1**

我想我可能已经想出了第一步，或者至少是可能的第一步。**Apache是​​否有可能只是删除标题？**

**更新 2**

![我的页面](../Images/f704b8b81ed7767e0064597118a3abe3.png)

![谷歌页面](../Images/c181f7406205e23350ea1766afaaeec2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:15:05.087

谷歌的速度不是来自于标题的删除，尽管我相信这并没有什么坏处。真正的速度来自它对慢启动算法的修改。欲了解更多信息 - 去这里：[http ://blog.benstrong.com/2010/11/google-and-microsoft-cheat-on-slow.html](http://blog.benstrong.com/2010/11/google-and-microsoft-cheat-on-slow.html)

# prolog - prolog-罗马数字

> ID：13270015
> 
> 赞同：1
> 
> 时间：2012-11-07T12:41:13.577
> 
> 标签：prolog, roman-numerals

我正在尝试定义一个序言谓词数字（X，Y），如果 X 是十进制数 Y 的罗马数字，则它是正确的。

```
numerals(X,Y) :- X is ('M'), Y>=1000.
numerals(X,Y) :- X is  ('CM'), Y>=900.
numerals(X,Y) :- X is  ('D'), Y>=500.
numerals(X,Y) :- X is  ('CD'), Y>=400.
numerals(X,Y) :- X is  ('C'), Y>=100.
.
.
.
. 
```

当我运行我的代码时，我得到一个错误：

```
?-numerals(M,1001).
ERROR: toplevel: Undefined procedure: numerals/2 (DWIM could not correct goal) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:47:13.460

您还没有加载程序。试着`listing`看看这个 - 否则请参考[我的第一个回复](https://stackoverflow.com/a/13269846/772868)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:49:25.370

Prolog是基于生成然后测试的。两部分之间的顺序很重要。你想测试什么，你想生成什么？

此外，您确定要使用“is”。这是用于算术运算的。

最后，您真的打算编写没有相互依赖关系的规则吗？使用递归算法可能是个好主意……或者您必须为任何可能的数字编写规则。

# c++ - 获取 QTextEdit 中每一行的大小

> ID：13270016
> 
> 赞同：4
> 
> 时间：2012-11-07T12:41:17.290
> 
> 标签：c++, qt, qtextedit

嗨，我是 Qt 编程的新手，我想知道如何获取 QTextEdit 中每一行的大小。

**更新**：
我需要获取文本中每一行（行）的宽度，而不是 QTextEdit 中所有文本的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:15:37.840

**更新**

如果您想以像素为单位获取文本的大小（宽和高）和每个字符串的长度`QTextEdit`，您可以执行以下操作：

```
// split all text into list of strings by separator '\n' (new line symbol)
QStringList strLst = ui->textEdit->toPlainText().split('\n');
// gather font metrics in QTextEdit
QFont textEditFont = ui->textEdit->font();
QFontMetrics fm(textEditFont);
foreach (QString str, strLst)
{
    int pixelsWide = fm.width(str);
    int pixelsHigh = fm.height();
    qDebug() << QString("Row: %1:\n\tsymbols count = %2,\tpixels wide = %3,"
             "\tpixels high = %4")
                .arg(str)
                .arg(str.length())
                .arg(pixelsWide)
                .arg(pixelsHigh);
} 
```

# joomla - 使用 mootools 和 joomla 发出警报

> ID：13270022
> 
> 赞同：0
> 
> 时间：2012-11-07T12:41:28.213
> 
> 标签：joomla, mootools

我必须尝试使用​​ mootools 和 joomla 2.5 进行一些非常简单的操作，但不起作用。

当我点击我的菜单链接时，我只能显示警报

我只想显示一个警报，firebug 不会重新识别任何错误，但不会显示警报。

```
 window.addEvent('domready', function() {
            var opt = {
                slides: 'sliders',
                duration: 1500,
                auto: true,
                delay: 5000,
                buttons: {next:'go-prev', prev:'go-next'},
                transition: Fx.Transitions.Quint.easeOut
            }
            var scroller = new QScroller('carrusel', opt);
            scroller.load();

          $$('.item-1 a').addEvent('click', function(event){
                alert('clicked!');
            });

        });
        </script>

<ul class="menu">
<li class="item-1">
<a href="/index.php/descripcion">Click here!</a></li>

</ul> 
```

解决方案

```
window.addEvent('domready', function() {
$$('.item-1 a').addEvent('click', function(event){
                alert('clicked!');
            });

            var opt = {
                slides: 'sliders',
                duration: 1500,
                auto: true,
                delay: 5000,
                buttons: {next:'go-prev', prev:'go-next'},
                transition: Fx.Transitions.Quint.easeOut
            }
            var scroller = new QScroller('carrusel', opt);
            scroller.load();

        });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:56:21.107

```
$$('a').addEvent('click', function(event){
    event.stop();
    alert('clicked!');
});​ 
```

[jsFiddle](http://jsfiddle.net/Sh7yQ/2/)

试试上面的代码，让我知道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:05:58.057

你的代码有语法错误试试这个 -

[JSFIDDLE](http://jsfiddle.net/Lt8Gg/1/)

```
window.addEvent('domready', function(event) {
 $$('.item-1').addEvent('click', function(event){
                    alert('clicked!');
     event.stop();
 });
}); 
```

# sqlite - iOS中的CommonCrypto【sqlite文件加密】

> ID：13270026
> 
> 赞同：0
> 
> 时间：2012-11-07T12:41:44.490
> 
> 标签：sqlite, core-data, commoncrypto

我在我的 iOS 应用程序中使用 Core Data API。此外，当应用程序状态更改（背景/前景）时，我正在使用 commoncrypto 库（CCCrypt（））加密/解密驻留在文档文件夹中的数据库文件（.sqlite 文件）。

我面临的问题是......当应用程序被用户从后台状态手动杀死时，数据库中的一些记录会丢失，这个问题是不一致的。

我只是将 sqlite 文件内容转换为 NSData 并用作 CCCrypt() 函数的输入来加密/解密，并且我没有在 crypt 操作中解码任何输入数据。

有人可以帮助我.....数据丢失的原因是什么？也只有当应用程序从后台状态被手动杀死时......对于加密和解密操作，CCCrypt函数返回状态为kCCSuccess......

在 CCCrypt 操作之前是否需要使用任何类型的解码输入数据（原始字节）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T06:13:30.567

可能您应该使用生命周期方法在数据被杀死之前保存数据。尝试在 applicationWillTerminate 中保存数据。通过此讨论了解有关 [在此处输入链接描述][1] 的更多详细信息

**[1]: [applicationWillTerminate 什么时候被调用，什么时候不被调用](https://stackoverflow.com/questions/7818045/applicationwillterminate-when-is-it-called-and-when-not/)“在被杀死之前保存数据”**

# nfc - 黑莓 10 NFC 支持

> ID：13270028
> 
> 赞同：1
> 
> 时间：2012-11-07T12:41:49.423
> 
> 标签：nfc, blackberry-10

我必须为 BB 10 设备开发一个应用程序，该应用程序通过 NFC 将数据发送到连接到 PC 的 USB NFC 阅读器。我是 BB 10 设备的新手，不知道支持的卡类型和数据协议是什么。如果有人有，请分享 BB 10 设备的 NFC 功能。我对 BB 10 NFC 架构有以下疑问。可以使用 BB 10 设备读取哪些受支持的卡类型（ISO 14443-4、Mifare、Desfire...）？

支持的 Pear to Pear 数据交换（SNEP、LLCP、...）协议有哪些？

支持的卡模拟（ISO 14443-4、Mifare、...）模式有哪些？

我更喜欢卡模拟模式来与 USB NFC 读卡器 (ACS ACR 122 U) 交换数据。BB 10 alpha 设备是否可以做到这一点。在此先感谢.... 最好的问候 Pranav

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:56:30.477

您可能会发现以下链接很有用：http:
[//supportforums.blackberry.com/t5/tkb/articleprintpage/tkb-id/java_dev@tkb/article-id/656](http://supportforums.blackberry.com/t5/tkb/articleprintpage/tkb-id/java_dev@tkb/article-id/656)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T08:39:59.317

黑莓 10 对 NFC 有出色的支持。我将首先[查看文档](http://developer.blackberry.com/native/documentation/cascades/device_comm/nfc/)：

此外，BlackBerry 开发人员博客上有一个 6 部分系列文章，其中介绍了开发 NFC 应用程序的所有主要方面。[第一部分在这里。](http://devblog.blackberry.com/2013/09/porting-blackberry-java-nfc-applications-to-blackberry-10-part-1-reading-nfc-tags/)

具体来说，您可能想看看[第 5 部分，其中讨论了虚拟卡仿真](http://devblog.blackberry.com/2013/10/porting-blackberry-java-nfc-applications-to-blackberry-10-part-5-virtual-tag-and-card-emulation/)

# c# - 寻找高级 Instagram/Microsoft Word 之类的图像处理库

> ID：13270031
> 
> 赞同：2
> 
> 时间：2012-11-07T12:41:53.887
> 
> 标签：c#, .net, winforms, image-processing

目前，我正在为 WinForms 项目寻找（商业或免费）.NET/C# 图像处理库，以应用 Instagram 或 Microsoft Office Word 等可定制的效果，例如：

![在此处输入图像描述](../Images/91509aa84a3cb0ce8b9a35fac361ad20.png)

我发现了很多图像库，例如：

*   [ImageMagick](http://www.imagemagick.org/script/index.php)
*   [铅工具](http://www.leadtools.com/)
*   [免费图片](http://freeimage.sourceforge.net/)
*   [点图](https://www.atalasoft.com/products/dotimage-sdk-1)
*   ...

不幸的是，所有这些库似乎都提供了一种相当低级的图像处理方式。当涉及到边框、旋转、Instagram 等老式滤镜等高级效果时，我发现零库。

（具有讽刺意味的是，对于 JavaScript，[那里有很多库](https://stackoverflow.com/questions/8192317/create-instagram-esque-filters-with-javascript)）

也许这样的库没有市场，但我仍然希望在我的应用程序中拥有这个功能，而不需要自己做任何事情。

**因此我的问题是：**

是否有可用的 .NET 库以可自定义和可扩展的方式将各种高级过滤器应用于图像？

# xml - 使用 JAXBContext 进行编组时保留字符“&”

> ID：13270037
> 
> 赞同：0
> 
> 时间：2012-11-07T12:42:28.490
> 
> 标签：xml, encoding, character-encoding, jaxb

我正在使用 JAXBContext 来解组 XML 字符串。但是如果字符串在标签内包含“&”字符，我的代码将失败。但我需要保持这样的价值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:58:00.620

根据您的评论回复，您有“xml”之类的

```
<category>Play & Boy</category> 
```

这*不是*xml，因为 xml 规则禁止在此位置使用未转义的 '&' 字符。

您应该将此类“xml”更改为

```
<category>Play &amp; Boy</category> 
```

在源 xml 中，使其成为格式良好的 xml。

您可以在预处理器中为这个格式不正确的 xml 将“&”编码为“&”，但您必须自己编写该预处理代码，并注意转义已经是一部分的“&”字符的编码，例如`&amp;`or `&lt;`，因为您不想将它们转换为`&amp;amp;`and `&amp;lt;`。

如果你能做到，你最好让这个 xml 的供应商提供格式良好的 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:45:48.933

您的问题有两种可能性：

1.  删除 &: 之前和之后的所有空格`<category>Play&Boy</category>`应该可以工作。
2.  更好的解决方案：`<category><![CDATA[Play & Boy]]></category>`将被解组为“Play & Boy”。

# java - 将所有替换为具有正则表达式通配符的字符串

> ID：13270039
> 
> 赞同：0
> 
> 时间：2012-11-07T12:42:29.830
> 
> 标签：java, regex, string

> **可能重复：**
> [没有正则表达式的 java String.replaceAll](https://stackoverflow.com/questions/4316710/java-string-replaceall-without-regex)

我有一个字符串，我需要替换它的某些部分。
替换文本虽然包含正则表达式通配符。例子：

```
String target = "Something * to do in ('AAA', 'BBB')";    
String replacement = "Hello";    
String originalText = "ABCDEFHGIJKLMN" + target + "ABCDEFHGIJKLMN";  
System.out.println(originalText.replaceAll(target, replacement)); 
```

我得到：
`ABCDEFHGIJKLMNSomething * to do in ('AAA', 'BBB')ABCDEFHGIJKLMN`

为什么不发生替换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:45:32.773

因为`*`,`(`和`)`都是正则表达式中的元字符。因此，所有这些都需要逃脱。看起来Java对此有一个方便的方法：

```
java.util.regex.Pattern.quote(target) 
```

但是，更好的选择可能是，不使用正则表达式`replaceAll`函数[，而只是简单地`replace`](https://stackoverflow.com/questions/4316710/java-string-replaceall-without-regex)使用. 那么你不需要逃避任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:45:21.420

`String.replaceAll()`接受一个正则表达式，因此它试图扩展这些元字符。

一种方法是*转义*这些字符（例如`\*`）。

[另一种方法是通过使用String.indexOf()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)并找到包含的字符串的开头来自己进行替换。`indexOf()`不采用正则表达式，而是采用普通字符串。

# ruby - 获取公共（远程）IP 地址

> ID：13270042
> 
> 赞同：21
> 
> 时间：2012-11-07T12:42:46.713
> 
> 标签：ruby

我想知道是否有一种简单的方法可以使用 Ruby 获取计算机的公共 IP 地址。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-07T13:25:00.007

Akamai 提供了一个“我的 IP 是什么”页面，您可以获取该页面：

```
require 'open-uri'
remote_ip = open('http://whatismyip.akamai.com').read 
```

但是，有一些替代方案可以做同样的事情：

*   [http://whatismyip.akamai.com](http://whatismyip.akamai.com)
*   [http://ipecho.net/plain](http://ipecho.net/plain)
*   [http://icanhazip.com](http://icanhazip.com)
*   [http://ident.me](http://ident.me)
*   [http://bot.whatismyipaddress.com](http://bot.whatismyipaddress.com)

您还可以将`ipv4`和`ipv6`子域与`icanhazip.com`.

如果您不想依赖第三方，您可以在单行机架应用程序中推出自己的应用程序，并将其免费部署在 Heroku 或其他任何地方。它考虑到`X-Forwarded-For`可能包含逗号分隔的代理 IP 地址列表，并且只返回客户端 IP。

```
# config.ru

run lambda { |env|
  remote_ip = env['HTTP_X_FORWARDED_FOR'] || env['REMOTE_ADDR']
  remote_ip = remote_ip.scan(/[\d.]+/).first
  [200, {'Content-Type'=>'text/plain'}, [remote_ip]] 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-24T03:13:50.160

不需要刮！

我使用[ipify](https://www.ipify.org/)，一个返回您的公共 IP 地址的开放 API。如果您想要一个 json 响应（此处未显示），这很有用。

```
require 'net/http'
public_ip = Net::HTTP.get URI "https://api.ipify.org"
=> "12.34.56.78" 
```

或卷曲：

```
public_ip = `curl https://api.ipify.org`
=> "12.34.56.78" 
```

不要激动，那不是我的公共 IP 地址 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T00:03:48.610

我使用卷曲：

```
my_ip = `curl http://ipecho.net/plain` 
```

这不使用 Ruby stdlib，但需要 curl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T16:16:17.607

我会使用诸如[http://www.whatsmyip.website/](http://www.whatsmyip.website/)之类的服务以编程方式获取 IP。使用 Linux curl 之类的东西会自动返回 IP，但如果您使用不同的应用程序/语言，您可能需要查看他们的 API。

```
ip = `curl http://www.whatsmyip.website` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-23T12:42:56.847

我正在寻找同样的问题，并找到了基于 API 的出色解决方案。

要获取公共 IP 地址，我们可以使用以下代码：

```
require "net/http"

ip = Net::HTTP.get(URI("https://api.ipify.org"))
puts "My public IP Address is: " + ip 
```

API 网站网址：`https://www.ipify.org/`

现在回答这个问题为时已晚，但我认为这对其他人来说可能是有害的。

# java - 处理Java中的渲染异常？

> ID：13270044
> 
> 赞同：0
> 
> 时间：2012-11-07T12:42:59.610
> 
> 标签：java, exception, rendering

你能解释一些处理渲染异常的方法吗？当您绘制某些东西时会发生渲染，因此解决方案应该处理正确的重新绘制。这与构建失败无关，而仅与渲染有关。

我唯一想到的就是重新粉刷。我想还有更多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:00:54.230

对此没有通用的运行时解决方案。正如 Joachim 所指出的，如果您只是尝试重新绘制，那么重新绘制很可能会触发相同的异常，并且您的用户界面将被锁定。

最好的方法是找出导致异常的原因并修复代码，以便消除异常的根本原因，或者绘制代码采取适当的措施来避免问题。（仅当绘画代码是您的代码时，第二种选择才适用......）

* * *

> 如果我使用的库由于编码错误或其他原因而无法渲染怎么办？

您修复库，或实施某种解决方法来避免触发库故障的情况（如果可能的话）。如果这不起作用，则将库替换为正常工作的替代方案。

> 如果渲染因未知原因（无法计算）而失败怎么办？

那么你有一个**大**问题。如果您无法弄清楚是什么触发了故障，您将无法找到可靠的补救措施。你留下了有问题/不可靠的补救措施……你的申请很可能是不可靠的。

> 我想知道当所有其他保护系统都失败时该怎么办。

如果您无法正确描述不可靠性的性质和/或原因，则无法从不可靠的组件构建可靠的系统。

* * *

还应该注意的是，Java 应用程序中的很多“随机不可靠性”是由于同步不足造成的；即一个线程正在更新某个对象或数据结构，而另一个线程可能正在尝试读取它。大多数基于 GUI 的应用程序本质上都是多线程的。如果您有一个看起来不可靠的库，那么真正的问题*可能*是您的应用程序级代码没有正确同步。

# android - OSMDroid 如何使外部提供者与本地一起工作？

> ID：13270047
> 
> 赞同：0
> 
> 时间：2012-11-07T12:43:07.250
> 
> 标签：android, osmdroid

所以我终于让 osmdroid 使用本地目录，但我想在本地丢失时从 Mapnik 加载图块。我不确定我错过了什么。

我的实现如下：

```
private MapView mapView = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.osm_map);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setMultiTouchControls(true);

    MapController mapController = mapView.getController();
    mapController.setZoom(5);
    GeoPoint point2 = new GeoPoint(55708545, 10006348);
    mapController.setCenter(point2);

    //TODO Save to SD
    AssetManager assetManager = getAssets();
    InputStream is;
    String fileName = "test.zip";
    String path = Environment.getExternalStorageDirectory() + File.separator + fileName;    //TODO Path to save it to
    try {
        is = assetManager.open(fileName);

        FileOutputStream fo = new FileOutputStream(path);

        byte[] b = new byte[1024];
        int length;
        while((length = is.read(b)) != -1) {
            fo.write(b, 0, length);
        }
        fo.flush();
        fo.close();
        is.close();
    } catch (IOException  e) {
        e.printStackTrace();
    }

    File tileFile = new File(path);
    IArchiveFile[] archives = new IArchiveFile[1];
    archives[0] = ArchiveFileFactory.getArchiveFile(tileFile);

    CustomTileSource customTiles = new CustomTileSource("Mapnik", null, 0, 24, 256, ".png");    // the name should match the name of the folder that is zipped

    MapTileModuleProviderBase[] providers = new MapTileModuleProviderBase[2];
    providers[0] = new MapTileFileArchiveProvider(new SimpleRegisterReceiver(getApplicationContext()), customTiles, archives);
    providers[1] =  new MapTileDownloader(TileSourceFactory.MAPNIK);
    mapView.setUseDataConnection(false);
    mapView.setTileSource(TileSourceFactory.MAPNIK);

    MapTileProviderArray tileProvider = new MapTileProviderArray(customTiles, null, providers);
    TilesOverlay tilesOverlay = new TilesOverlay(tileProvider, getApplicationContext());
    mapView.getOverlays().add(tilesOverlay);
    mapView.invalidate();
} 
```

和

```
public class CustomTileSource extends BitmapTileSourceBase {

    public CustomTileSource(String aName, string aResourceId,
            int aZoomMinLevel, int aZoomMaxLevel, int aTileSizePixels,
            String aImageFilenameEnding) {
        super(aName, aResourceId, aZoomMinLevel, aZoomMaxLevel, aTileSizePixels,
                aImageFilenameEnding);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:00:03.187

好的，所以我终于找到了解决方案。它非常复杂且漫长，但它有效：D

现在在我的 OsmDroidFragment （是片段中的地图）中，我有以下内容：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    RelativeLayout view = (RelativeLayout) inflater.inflate(R.layout.osm_map, container, false);
    RelativeLayout mapContainer = (RelativeLayout) view.findViewById(R.id.osm_map_parent);

    mMapView = new OsmCustomMapView(getActivity(), 256, 10, 13);    // I've made a custom implementation in order to limit zoom, you can just use regular osmdroid mapview
    LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    mMapView.setLayoutParams(params);
    mapContainer.addView(mMapView);

    mMapView.setBuiltInZoomControls(true);
    mMapView.setMultiTouchControls(false);  // pinch zoom works bad on osmdroid

    MapController mapController = mMapView.getController();
    mapController.setZoom(11);  // must set zoom before setCenter, else we get the wrong position
    GeoPoint center = new GeoPoint(0,0);
    mapController.setCenter(center);

    // save zip to sd
    AssetManager assetManager = getActivity().getAssets();
    InputStream is;
    String fileName = "map.zip";    // the zip file lies in assets root
    String path = this.getActivity().getExternalFilesDir(null) + File.separator + fileName; // the path I save SD to

    File tileFile = new File(path);
    if(!tileFile.exists()) {
        try {
            is = assetManager.open(fileName);

            FileOutputStream fo = new FileOutputStream(path);

            byte[] b = new byte[1024];
            int length;
            while((length = is.read(b)) != -1) {
                fo.write(b, 0, length);
            }

            fo.flush();
            fo.close();
            is.close();
        } catch (IOException  e) {
            e.printStackTrace();
        }
    }

    IArchiveFile[] archives = new IArchiveFile[1];
    archives[0] = ArchiveFileFactory.getArchiveFile(tileFile);

    // Simple implementation that extends BitmapTileSourceBase and nothing else
    CustomTileSource customTiles = new CustomTileSource("Maverik", null, 10, 14, 256, ".png");  // Maverik is the name of the folder inside the zip (so zip is map.zip and inside it is a folder called Maverik)

    MapTileModuleProviderBase[] providers = new MapTileModuleProviderBase[2];
    providers[0] = new MapTileFileArchiveProvider(new SimpleRegisterReceiver(getActivity().getApplicationContext()), customTiles, archives);    // this one is for local tiles (zip etc.)
    providers[1] =  new MapTileDownloader(TileSourceFactory.MAPNIK);    // MAPNIK web tile source

    mMapView.setUseDataConnection(true);

    MapTileProviderArray tileProvider = new MapTileProviderArray(customTiles, 
            new SimpleRegisterReceiver(getActivity().getApplicationContext()), providers);
    TilesOverlay tilesOverlay = new TilesOverlay(tileProvider, getActivity().getApplicationContext());
    tilesOverlay.setLoadingBackgroundColor(Color.TRANSPARENT);  // this makes sure that the invisble tiles of local tiles are transparent so we can see tiles from web, transparent have a minor performance decline.

    mMapView.getOverlays().add(tilesOverlay);

    mMapView.invalidate();

    return view;
} 
```

# python - 如何将一个类中的元素添加到另一个类列表，python

> ID：13270048
> 
> 赞同：0
> 
> 时间：2012-11-07T12:43:07.677
> 
> 标签：python, class

```
class lista(object):
    listanumere=[]
    def printer(self):
        print self.listanumere
    def adds(self,numar):
        self.listanumere.append(numar)

class movies():
    def __init__(self,ide,nume):
        self.__nume=nume
        self.__ide=ide

listarez=lista
a=movies(1,"David")
lista.adds(a)
lista.printer() 
```

**错误：**

```
TypeError: unbound method adds() must be called with lista instance as first argument (got movies instance instead) 
```

所以我的问题是：如何创建一个包含在另一个类中定义的元素列表的类，例如一个包含电影列表的类和一些修改列表的方法，例如添加新电影或删除带有一定的身份证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T12:47:26.880

您似乎混淆了类方法和实例方法。你可能想做：

```
listarez = lista() 
```

接着

```
listarez.adds(a)
listarez.printer() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:54:12.527

简短的回答：

```
class lista(object):
    listanumere=[]
    def printer(self):
        print "\n".join( [ str(elem)for elem in self.listanumere ] )
    def adds(self,numar):
        self.listanumere.append(numar)

class movies():
    def __init__(self,ide,nume):
        self.__nume=nume
        self.__ide=ide
    def __str__(self):
        return ":".join( [ str(self.__nume) , str(self.__ide) ] )

listarez=lista()
a=movies(1,"David")
b=movies(2,"Goliath")

listarez.adds(a)
listarez.adds(b)

listarez.printer() 
```

如果我是你，我会使用从字典派生的类（例如 {'ID string' : movie object }）和正确的重载方法（init、str、..）。这样你就可以利用诸如 itertools 等标准方法。

# php - 如何从 Kohana 3.2 中的查询结果中获取索引数组？

> ID：13270051
> 
> 赞同：1
> 
> 时间：2012-11-07T12:43:26.650
> 
> 标签：php, kohana, kohana-3, kohana-3.2, kohana-db

如何获得 INDEXED 数组结果？

```
$qry1 = DB::select('name')->from('people')->execute();

$assoc_array = $qry1->as_array();
$object      = $qry1->as_object();

// $indexed_array = [...] 
```

仅供学习之用，谢谢。

就像是：

```
$indexed_result[0]; // Name
// $indexed_result[1];
// $indexed_result[2]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:34:58.500

你想得到一个名字的数组`array(0 => 'John', 1 => 'Sam')`吗？

你应该打电话`$names = $gry1->as_array(NULL, 'name')`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:35:37.030

[http://kohanaframework.org/3.3/guide/database/results#select-asobject-and-asassoc](http://kohanaframework.org/3.3/guide/database/results#select-asobject-and-asassoc)

> as_assoc() 方法将删除对象名称并将结果集返回到关联数组。由于这是默认设置，因此很少需要此方法。

因此，只需执行您的操作即可。

但是，如果您只想要一行，请查看该`current()`方法。

# soapui - Soap UI DB 自定义身份验证

> ID：13270055
> 
> 赞同：1
> 
> 时间：2012-11-07T12:43:43.573
> 
> 标签：soapui

我试图弄清楚如何扩展 Soap UI 以启用数据库身份验证以使用自定义加密/解密类进行数据库连接，并且应该能够读取加密密码。请指导我在哪里可以找到扩展接口或者是否有任何其他方法。谢谢，乔什

# c# - 有没有办法可以找出 C# 中的字符串是否不包含数字和字符 0-9 和 AZ？

> ID：13270060
> 
> 赞同：1
> 
> 时间：2012-11-07T12:44:04.977
> 
> 标签：c#

我见过某种正则表达式测试，但是如何检查字符串是否不包含任何 0-9 数字或 AZ 字符？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T12:46:39.717

您不需要正则表达式：

```
string s = ...
bool hasLetterOrDigit = s.Any(c => char.IsLetterOrDigit(c));

bool onlyLetterOrDigit = s.All(c => char.IsLetterOrDigit(c)); 
```

该`IsLetterOrDigit()`函数使用 Unicode 分类 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.char.isletterordigit.aspx) )。

如果您想要精确控制：

```
string s = ...
string allowedChars = "abcdefABCDEF0123456789";

bool onlyAllowedChar = s.All(c => allowedChars.Contains(c)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:51:32.103

尝试使用正则[表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

```
bool Exists=Regex.IsMatch(input, @"[^A-Z0-9]+"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:48:00.713

就像是...

```
if ((Regex.IsMatch(value, "[^A-Z0-9]+")
{
   //do something
} 
```

编辑：更改为符合马特的建议。

# c# - 我的扩展方法是否有任何内置的 .NET Framework 替代方案？

> ID：13270063
> 
> 赞同：1
> 
> 时间：2012-11-07T12:44:12.247
> 
> 标签：c#, .net, linq, extension-methods, ienumerable

我得到了这个在很多情况下都使用的好方法。

```
internal static IEnumerable<TResult> RoundTrip<TSource, TResult>
 (this IEnumerable<TSource> e, Func<TSource, TSource, TResult> currentNextAction)
{
    using (IEnumerator<TSource> enumer = e.GetEnumerator())
    {
        if (!enumer.MoveNext())
            yield break;

        bool flag = true;
        TSource first = enumer.Current;

        do
        {
            TSource current = enumer.Current;
            TSource next = (flag = enumer.MoveNext()) ? enumer.Current : first;
            yield return currentNextAction(current, next);
        } while (flag);
    }
} 
```

我在[MSDN](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)中寻找了一些内置的替代品，但找不到它们。有没有？

而且，这段代码有什么可以改进的吗？

**编辑**：不可枚举方法的新代码。

```
internal static IEnumerable<TResult> RoundTrip<TSource, TResult>
 (this IEnumerable<TSource> e, Func<TSource, TSource, TResult> currentNextAction)
{
    bool flag = false;
    TSource first = default(TSource);
    TSource previous = default(TSource);

    foreach (TSource item in e)
    {
        if (!flag)
        {
            flag = true;
            first = previous = item;
            continue;
        }

        yield return currentNextAction(item, previous);
        previous = item;
    }

    if (flag)
        yield return currentNextAction(previous, first);
    else
        yield break;
} 
```

（顺便说一下，我喜欢第一个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:06:13.327

你有 Enumerable.Zip

```
var result = e.Zip(e.Skip(1).Concat(e.Take(1)), action) 
```

它当然会枚举序列两次（+1 元素），除非你先列出一个列表

编辑：错过了往返

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:51:00.747

没有内置任何东西，但你可以真正简化它：

```
var lst = e.ToList();

lst.Add(lst[0]);
var result = lst.Take(lst.Count - 1).Select((x, i) => action(x, lst[i + 1])); 
```

# ios - 如何在 UIPanGestureRecognizer 方法中获取当前触摸点和上一个触摸点？

> ID：13270075
> 
> 赞同：9
> 
> 时间：2012-11-07T12:45:09.937
> 
> 标签：ios, objective-c, uipangesturerecognizer, uitouch, touchesbegan

我是 iOS 新手，我`UIPanGestureRecognizer`在我的项目中使用。在拖动视图时，我需要获取当前的接触点和上一个接触点。我正在努力获得这两点。

如果我使用`touchesBegan`method 而不是 using `UIPanGestureRecognizer`，我可以通过以下代码得到这两点：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    CGPoint touchPoint = [[touches anyObject] locationInView:self];
    CGPoint previous=[[touches anyObject]previousLocationInView:self];
} 
```

`UIPanGestureRecognizer`我需要在事件触发方法中得到这两点。我怎样才能做到这一点？请指导我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-07T13:08:06.477

你可以使用这个：

```
CGPoint currentlocation = [recognizer locationInView:self.view]; 
```

如果找不到，则通过设置当前位置并每次添加当前位置来存储以前的位置。

```
previousLocation = [recognizer locationInView:self.view]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T13:08:43.853

当您将 an 链接[`UIPanGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)到 IBAction 时，每次更改都会调用该操作。手势识别器还提供了一个名为的属性，该属性`state`指示它是第一个`UIGestureRecognizerStateBegan`、最后一个`UIGestureRecognizerStateEnded`还是只是介于`UIGestureRecognizerStateChanged`.

要解决您的问题，请尝试如下：

```
- (IBAction)panGestureMoveAround:(UIPanGestureRecognizer *)gesture {
    if ([gesture state] == UIGestureRecognizerStateBegan) {
        myVarToStoreTheBeganPosition = [gesture locationInView:self.view];
    } else if ([gesture state] == UIGestureRecognizerStateEnded) {
       CGPoint myNewPositionAtTheEnd = [gesture locationInView:self.view];
       // and now handle it ;)
    }
} 
```

您还可以查看名为[`translationInView:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIPanGestureRecognizer/translationInView%3a).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-15T16:08:12.250

如果你不想存储任何东西，你也可以这样做：

```
let location = panRecognizer.location(in: self)
let translation = panRecognizer.translation(in: self)
let previousLocation = CGPoint(x: location.x - translation.x, y: location.y - translation.y) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:10:06.450

您应该按如下方式实例化您的平移手势识别器：

```
UIPanGestureRecognizer* panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)]; 
```

然后您应该将 panRecognizer 添加到您的视图中：

```
[aView addGestureRecognizer:panRecognizer]; 
```

该`- (void)handlePan:(UIPanGestureRecognizer *)recognizer`方法将在用户与视图交互时调用。在 handlePan: 中，您可以像这样触摸点：

```
CGPoint point = [recognizer locationInView:aView]; 
```

您还可以获得 panRecognizer 的状态：

```
if (recognizer.state == UIGestureRecognizerStateBegan) {
    //do something
} else if (recognizer.state == UIGestureRecognizerStateEnded) {
   //do something else
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-26T09:12:57.680

UITouch中有一个函数可以获取视图中的上一个触摸

*   (CGPoint)locationInView:(UIView *)view;
*   (CGPoint)previousLocationInView:(UIView *)view;

# delphi - 如何创建一个接受可变数量可变参数的函数？

> ID：13270081
> 
> 赞同：0
> 
> 时间：2012-11-07T12:45:37.253
> 
> 标签：delphi

可以创建一个接受可变数量参数的函数：

```
function f(const x: array of const): String; 
```

并以这种方式使用它：

```
f([1,3,4, "hello"]); 
```

也可以将参数定义为“可变的”：

```
function g(var x: Byte): String;

var B: Byte;
g(B); 
```

但是是否有可能定义一个函数，它可以接受任意数量的任何类型的参数并更改它们的所有值？我知道我可以使用指针来做到这一点，但是我不知道传递的参数的类型，所以弄乱它们是非常不安全的。

* * *

我只想创建一个函数，它可以返回多种不同类型的变量，而不仅仅是一种类型或只有 1 个变量。而且我不想写无数行来使用这个函数——它应该只是函数本身，在函数调用之前没有 SetLength() 或任何东西。所以这是我迄今为止所做的最好的事情：

```
type TVarArr = Array of Variant;
     PVarArr = ^TVarArr;
Procedure f(a: PVarArr);
var
 i:Integer;
begin
  SetLength(A^, 4);
  a^[0] := 46;
end;

ar: TVarArr;
begin
f(@ar);
caption := IntToStr(ar[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:11:34.957

Tom 将无法使用此答案，因为他的 Delphi 版本不够高，但 D2010 或更高版本的任何人都可以在此类挑战中充分利用扩展的 rtti 的 TValue。

以下是一个小型控制台应用程序，展示了如何：

*   从一个开放的数组参数创建一个动态的 TValue 数组；
*   将 TValue 的动态数组复制到一个新的动态数组，在途中修改各个值；
*   “就地”修改动态 TValues 数组中的项目。

享受。

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.Rtti,
  System.SysUtils,
  System.TypInfo;

const
  StringKinds: set of TTypeKind = [tkChar, tkString, tkWChar, tkLString, tkWString, tkUString];

type
  TValueArray = array of TValue;

function ValueArrayFromConstArray(const aSource: array of TValue): TValueArray;
var
  idx: Integer;
begin
  SetLength(Result, Length(aSource));
  for idx := Low(aSource) to High(aSource) do
    Result[idx] := aSource[idx];
end;

function ReturnNewArray(const aSource: TValueArray): TValueArray;
var
  idx: Integer;
begin
  SetLength(Result, Length(aSource));
  for idx := Low(aSource) to High(aSource) do
    if aSource[idx].Kind in StringKinds then
      Result[idx] := 'Dest' + aSource[idx].ToString
    else
      if aSource[idx].Kind in [tkInteger] then
        Result[idx] := 10 + aSource[idx].AsInteger
      else
        Result[idx] := aSource[idx];
end;

procedure ModifyArrayValues(var aArray: TValueArray);
var
  idx: Integer;
begin
  for idx := Low(aArray) to High(aArray) do
    if aArray[idx].Kind in StringKinds then
      aArray[idx] := 'Dest' + aArray[idx].ToString
    else
      if aArray[idx].Kind in [tkInteger] then
        aArray[idx] := 10 + aArray[idx].AsInteger
      else
        ;//aArray[idx] := aArray[idx];
end;

var
  Source: TValueArray;
  Destination: TValueArray;
  Item: TValue;
  idx: Integer;
begin
  Source := ValueArrayFromConstArray(['Some', 42, TObject]);
  Destination := ReturnNewArray(Source);
  idx := 0;
  WriteLn('', #9, 'Old', #9, 'New');
  WriteLn('-', #9, '----', #9, '----');
  for Item in Source do
  begin
    WriteLn(idx, #9, Item.ToString, #9, Destination[idx].ToString);
    Inc(idx);
  end;
  WriteLn;
  WriteLn;
  WriteLn('', #9, 'Modified');
  WriteLn('-', #9, '----');
  Source := ValueArrayFromConstArray(['first', 50, TValue.From<TFloatValue>(fvCurrency)]);
  ModifyArrayValues(Source);
  for Item in Source do
  begin
    WriteLn(idx, #9, Item.ToString);
  end;
  ReadLn;
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:59:02.150

```
Procedure All(var a:Array of Variant);
var
 i:Integer;
begin
  for I := Low(a) to High(a) do
      begin

        if VarType(a[i])=258  then
          a[i] := a[i] + ' modified';

      end;
end;

Procedure AllConst( a:Array of Variant);
var
 i:Integer;
begin
  for I := Low(a) to High(a) do
      begin
        Showmessage(a[i]);
      end;
end;

procedure TForm3.Button1Click(Sender: TObject);
var
 a:Array of Variant;
begin
  AllConst([1,2,'Test']);
  SetLength(a,3);
  a[0] := 3.141;
  a[1] := 'Test';
  a[2] := 27;
  all(a);
  Showmessage(a[1]);
end; 
```

# delphi - Delphi - E2033 实际和正式 var 参数的类型必须相同

> ID：13270083
> 
> 赞同：2
> 
> 时间：2012-11-07T12:45:50.993
> 
> 标签：delphi, delphi-2010

我是 Delphi 的新手，试图对多年前实施的项目进行调试。我的 ide 是 Delphi 2010 和有错误的代码；

```
function DrawTextExW(hDC: HDC; lpString: PWideChar; nCount: Integer; var lpRect:
TRect; uFormat: UINT; dtp: PDRAWTEXTPARAMS): Integer;

const
   MAX_STATIC_BUFFER = 8192;
const
   STATIC_BUFFER_LEN: integer = 8192;
const
   DT_PREFIXONLY = $00200000;

var
...
  tm: TTextMetricA;
...

begin
  ...

  GetTextMetrics(hDC, tm);    //Error Line
  if (uFormat and DT_EXTERNALLEADING) = DT_EXTERNALLEADING then
    lh := tm.tmHeight + tm.tmExternalLeading
  else
    lh := tm.tmHeight;

  ...
end 
```

在该行中出现“[DCC 错误] ElVCLUtils.pas(3555)：E2033 实际和正式 var 参数的类型必须相同”错误。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T13:16:27.293

你应该使用

```
var
...
  tm: TTextMetric;
...

begin
  ...

  GetTextMetrics(hDC, tm); 
```

或者

```
var
...
  tm: TTextMetricA;
...

begin
  ...

  GetTextMetricsA(hDC, tm); 
```

第一个版本更可取。

# html - 使用 ajax 请求和 servlet 上传文件

> ID：13270085
> 
> 赞同：0
> 
> 时间：2012-11-07T12:46:07.080
> 
> 标签：html, jquery, file-upload

我正在使用以下 html 代码调用 servlet 并正确上传文件

```
 <html>
   <body>
   <h3>File Upload:</h3>
    Select a file to upload:
   <form action="Upload" method="post" enctype="multipart/form-data" id="mainForm"> 
   <div id="upload">

   <input type="file" name="file" id="file" size="50" multiple/>
   </div>

   <input type="submit" id="action" value="Upload File" />
  </form>
  </html> 
```

但是，当我序列化表单详细信息并以 ajax 格式发送此请求时，请求内容在 servlet 中不可用...

```
 $.ajax({
             type: "POST",
             url: "UploadServlet",
             contentType: "multipart/form-data; charset=UTF-8; boundary=---------------------------" + boundary,
             data: $("#mainForm").serialize(), // serializes the form's elements.
             success: function(data)
             {
                 alert("ajax response data"+data); // show response from the php script.
             }

         }); 
```

在我的 servlet 中，需要处理请求，并从中获取必须上传的文件.....

但是使用 ajax 请求不会将任何表单元素返回到 servlet 任何人都可以建议如何使用 ajax 请求来完成。

提示：我尝试在 ajax 请求中使用以下参数，但它不起作用

```
 cache:false,
       contenttype:false,
       processData:false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:22:54.143

AJAX 请求不可能使用 Iframe，它可能有用。

# php - 如何使用来自 json 数组的 ajax 提醒多个结果

> ID：13270086
> 
> 赞同：0
> 
> 时间：2012-11-07T12:46:14.597
> 
> 标签：php, jquery, mysql, ajax, json

我有这个查询

```
$result = mysql_query("SELECT * FROM ship_data WHERE id = $ship") or die(mysql_error());
$rows = array();
while($r = mysql_fetch_assoc($result)) {
    $rows = $r; 
echo json_encode($rows);
} 
```

而这点ajax来返回结果

```
 $.ajax({
            type: "POST",
            dataType: "json",
            data: "ship=" + ship,
            cache: false,
            url: "/getdata.php",
            success: function (data) {
                alert(data.carrier);
            }
        }); 
```

如果数组中只有一个结果，它可以工作，如果数组中有多个结果，则不会发出任何警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:48:10.167

`while`将循环更改为...

```
$rows = array();
while($r = mysql_fetch_assoc($result)) {
    $rows[] = $r;
}

echo json_encode($rows); 
```

你的 JavaScript应该*总是*用`data`.`$.each()`

# android - Android - 如何管理每次更改时更新的 Wifi 连接

> ID：13270087
> 
> 赞同：0
> 
> 时间：2012-11-07T12:46:17.643
> 
> 标签：android, broadcastreceiver, wifi

我正在开发一个应用程序，它`WebView`可以从网络加载一些内容。

我正在尝试做的是检测每个 Wi-Fi 更改（连接或未连接），并在 Wi-Fi 未连接时显示对话框或`WebView`如果已连接则显示内容。

我实施了一个`BroadcastReceiver`with 行动`android.net.wifi.WIFI_STATE_CHANGED`：

```
public class SyncOfflineDataOnWifiReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        NetworkInfo info = (NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
        if (info!=null && info.getDetailedState() == DetailedState.CONNECTED) {
            Application.setInternet(true);
        }else{
            Application.setInternet(false);
        }
    }
} 
```

因此，当 Wi-Fi 连接标志`boolean Internet`设置为`true`（否则`false`）。

我需要的是一个模块，它会尝试重新连接到同一个 Wi-Fi（保存的那个）直到它没有连接。有可能有这样的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:57:26.000

当然有可能。它在 WiFi 管理器 API 中。回顾一下，特别是`reassociate()`和`reconnect()`方法：http: [//developer.android.com/reference/android/net/wifi/WifiManager.html](http://developer.android.com/reference/android/net/wifi/WifiManager.html)

# c# - c#如何获取网站或可执行文件的有意义的名称

> ID：13270089
> 
> 赞同：2
> 
> 时间：2012-11-07T12:46:21.573
> 
> 标签：c#, asp.net, application-name

我们有一个内部错误报告系统（在我们的函数 dll 中），我们发送的信息之一是导致它的应用程序的名称。

当前代码：

```
string applicationname= Assembly.GetCallingAssembly().GetName().Name; 
```

问题是当错误是从我们的一个网站发送的，因为它发送了诸如“App_Code.6p_c415d”之类的应用程序名称。

一种可能的方法是确定应用程序是可执行文件还是网站（我们如何做到这一点？），如果是网站，则获取包含它的文件夹......

但是，如果您有更好的方法，我们对任何想法都持开放态度^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:27:54.860

您可以使用 AppSettings 中的密钥来识别您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:46:12.103

我们最终创建了以下函数，它工作正常：

```
public static string getApplicationName()
{
    return string.IsNullOrEmpty(HttpRuntime.AppDomainAppId)?
        Assembly.GetEntryAssembly().GetName().Name : 
        new DirectoryInfo(HttpContext.Current.Server.MapPath("")).Name;
} 
```

# android - 将应用程序设置为默认主页

> ID：13270090
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:46:23.980
> 
> 标签：android, android-layout, android-intent

我已将我的应用程序设置为默认主页，一切正常，但如果我的应用程序将 Launcher 设置为默认主页（错误地），那么我的应用永远不会要求将我的应用设置为默认主页并直接打开 Launcher 主页。我想要这样，直到我的应用程序被设置为默认主页，它要求用户设置为默认值。请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:49:43.410

使用布尔条件创建首选项 ....

存储值 false 作为默认值...

通过检查此条件启动启动器

如果用户将您的应用设置为默认启动器，则使布尔偏好设置为 true ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:06:04.733

您可以通过这段代码检查当前的默认启动器：

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    ResolveInfo resolveInfo = getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);
    String currentHomePackage = resolveInfo.activityInfo.packageName; 
```

如这个答案所示：[如何在 android 2.3 及更高版本中获取当前启动器的包名称？](https://stackoverflow.com/questions/10344824/how-can-i-get-the-package-name-of-the-current-launcher-in-android-2-3-and-above)

因此，只需检查是否`currentHomePackage`等于您的应用程序包并采取相应措施。

如果用户将另一个应用程序设置为默认启动器，则只有在他删除启动器默认值或删除/安装可以充当默认启动器的应用程序时，才会再次出现选择默认启动器的对话框。

# asp.net-mvc - 操作可能会破坏运行时的稳定性，在本地工作，而不是在服务器上

> ID：13270097
> 
> 赞同：1
> 
> 时间：2012-11-07T12:46:59.703
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

这是我的行动：

```
Imports PagedList

<EmployeeAuthorize()>
Function SearchFoods(Optional ByVal date1 As String = "", Optional ByVal keyword As String = "", Optional page As Integer = 1) As ActionResult

    If String.IsNullOrEmpty(date1) Then
        date1 = Date.Now
    End If

    If String.IsNullOrEmpty(keyword) Then
        keyword = Nothing
    End If

    Dim food = db.Tbl_Foods.Where(Function(x) x.Shrt_Desc.Contains(keyword)).OrderBy(Function(x) x.Food_ID).ToList

    For Each item In food
        item.Shrt_Desc = item.Shrt_Desc.Replace(",", ", ")
    Next

    ViewBag.MyDate = date1
    ViewBag.MyKeyword = keyword

    ' set the page size and number
    Dim pageSize = 20
    Dim pageNumber = page

    TempData("CurrentPage") = "My Wellness"
    TempData("CurrentWellnessPage") = "Food Log"
    Return View("", "_FinalWellnessSubPageLayout", food.ToPagedList(pageNumber, pageSize))

End Function 
```

我相信这是由“ToPagedList”引起的，因为这是我第一次使用它。它在本地工作正常，但当我发布到服务器时却不行。堆栈跟踪如下所示：

> [VerificationException：操作可能会破坏运行时。]
> PagedList.PagedList `1..ctor(IEnumerable`1 superset, Int32 pageNumber, Int32 pageSize) +0
> PagedList.PagedListExtensions.ToPagedList(IEnumerable`1 superset, Int32 pageNumber, Int32 pageSize) +62

它还说：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

有什么例外？如何找到“执行期间发生的异常”？

有谁知道如何在服务器上修复此错误？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:15:02.810

我在 IIS 7.5 上也遇到了同样的问题，它在 IIS 6.0 上运行良好，所以我重新安装了 Pagedlist 包，它就像一个魅力。

# javascript - jQuery scrollTop - 动画不起作用

> ID：13270098
> 
> 赞同：2
> 
> 时间：2012-11-07T12:47:02.933
> 
> 标签：javascript, jquery, html, jquery-animate

使用[此处](http://speckyboy.com/2012/03/07/scroll-to-internal-link-with-jquery/)找到的示例，我正在尝试相同的实现。当我单击导航链接时，它会跳转到选定的 div 而不是滑动/滚动。

**HTML：**

导航

```
<div class="span3">
        <a href="#about-me"><img class="img-circle" src="http://placehold.it/200x200/e36b23/fff/&text=About+Me+"></a>
</div> 
```

分区

```
<div class="row-fluid" id="about-me"> ... </div> 
```

**JS：**

```
<script>
$(document).ready(function(){

    $('nav ul li a').click(function(){
        var el = $(this).attr('href');
        var elWrapped = $(el);

        scrollToDiv(elWrapped,40);

        return false;
    });

    function scrollToDiv(element, navheight){
        var offset = element.offset();
        var offsetTop = offset.top;
        var totalScroll = offsetTop - navheight;

        $('body,html').animate({
            scrollTop: totalScroll
        }, 1000);
    }
});
</script> 
```

所以它到达了“点击”的 div，但不是幻灯片动画——这就是我想要的。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:58:23.580

您不会阻止默认行为，即直接导航（“跳转”）到锚点。所以这里是：

```
$('nav ul li a').click(function(evt){
  evt.preventDefault();
  ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:54:32.060

您需要调整 jQuery 选择器以匹配您的 html 类 - 您没有使用与您引用的示例相同的`ul`/ `li`，例如

```
$('.span3 a').click(function(){ 
```

看[这里](http://jsfiddle.net/fhjyv/13/)的小提琴：

# ios - 你如何构造 NSFetchRequest setHavingPredicate: 的谓词？

> ID：13270107
> 
> 赞同：5
> 
> 时间：2012-11-07T12:47:27.403
> 
> 标签：ios, core-data, nspredicate, having-clause

对于我的一生，我似乎无法让它发挥作用。

假设我们的实体是一个具有状态字段和订单字段的托管对象。

我将如何获取具有多个相同订单的所有orderedEntries？

**请没有答案告诉我只在主谓词中使用 @count 进行子查询，因为我知道该解决方案，所以这篇文章的重点是了解如何在核心数据中使用 having 谓词，这可能比无论如何，子查询。（除非你解释为什么我不能使用having子句）**

以下代码将返回一个字典数组，其中包含每个订单号的订单数。我想要的是能够添加一个having子句来限制我的请求只返回代表那些计数大于1的订单对象的字典。

这是到目前为止的代码和我对谓词的尝试：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"OrderedEntry"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];
[fetchRequest setResultType:NSDictionaryResultType];

NSPredicate *predicate = [NSPredicate predicateWithFormat:
                 @"(status == %@)",[NSNumber numberWithInt:EntryStatusAlive]];

[fetchRequest setPredicate:predicate];

NSExpression *keyPathExpression = [NSExpression expressionForKeyPath: @"order"]; // Does not really matter
NSExpression *maxExpression = [NSExpression expressionForFunction: @"count:"
                                                        arguments: [NSArray arrayWithObject:keyPathExpression]];
NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
[expressionDescription setName: @"orderCount"];
[expressionDescription setExpression: maxExpression]; 
[expressionDescription setExpressionResultType: NSInteger32AttributeType];

[fetchRequest setPropertiesToFetch: [NSArray arrayWithObjects:expressionDescription,@"order",nil]];

[fetchRequest setPropertiesToGroupBy:[NSArray arrayWithObjects:@"order",nil]];
//[fetchRequest setHavingPredicate:[NSPredicate predicateWithFormat:@"@count > 1"]];
//[fetchRequest setHavingPredicate:[NSComparisonPredicate predicateWithLeftExpression:maxExpression rightExpression:[NSExpression expressionForConstantValue:[NSNumber numberWithInteger:1]] modifier:NSDirectPredicateModifier type:NSGreaterThanPredicateOperatorType options:NSCaseInsensitivePredicateOption]];

NSError *error;

NSArray * array = [context executeFetchRequest:fetchRequest error:&error]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:08:19.690

我最终为任何感兴趣的人选择了这个

```
-(BOOL)ordersAreSaneOnDay:(NSNumber*)dayNumber forUser:(User*)user inContext:(NSManagedObjectContext*)context {
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"BasicEntry"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];
[fetchRequest setResultType:NSDictionaryResultType];

NSPredicate *predicate = [NSPredicate predicateWithFormat:
                 @"(status == %@) && ((type != %@) && (type != %@) && (dayNumber == %@))  && ((user == NIL) || (user == %@))",[NSNumber numberWithInt:EntryStatusAlive],[NSNumber numberWithInt:EntryTypeTask],[NSNumber numberWithInt:EntryTypeCompletedTask],dayNumber,user];

[fetchRequest setPredicate:predicate];

NSExpression *keyPathExpression = [NSExpression expressionForKeyPath: @"order"]; // Does not really matter
NSExpression *maxExpression = [NSExpression expressionForFunction: @"count:"
                                                        arguments: [NSArray arrayWithObject:keyPathExpression]];
NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
[expressionDescription setName: @"orderCount"];
[expressionDescription setExpression: maxExpression]; 
[expressionDescription setExpressionResultType: NSInteger32AttributeType];

[fetchRequest setPropertiesToFetch: [NSArray arrayWithObjects:expressionDescription,@"order",nil]];
[expressionDescription release];

[fetchRequest setPropertiesToGroupBy:[NSArray arrayWithObjects:@"order",nil]];
//[fetchRequest setHavingPredicate:[NSPredicate predicateWithFormat:@"self.order.@count > 1"]];
//[fetchRequest setHavingPredicate:[NSComparisonPredicate predicateWithLeftExpression:maxExpression rightExpression:[NSExpression expressionForConstantValue:[NSNumber numberWithInteger:1]] modifier:NSDirectPredicateModifier type:NSGreaterThanPredicateOperatorType options:NSCaseInsensitivePredicateOption]];

NSError *error;

NSArray * array = [context executeFetchRequest:fetchRequest error:&error];
array = [array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"orderCount > 1"]];
//NSLog(@"it worked %@",array);
[fetchRequest release];

if ([array count]) return FALSE;
return TRUE; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-22T09:50:25.690

我已经使用以下方法进行了这项工作：

```
[fetchRequest setHavingPredicate:[NSPredicate predicateWithFormat:@"$orderCount > 1"]]; 
```

使用您的 expressionDecription 的名称作为变量`$orderCount`。或者，您可以使用

```
NSExpression *countExpression = [NSExpression expressionForVariable:@"orderCount"];
[fetchRequest setHavingPredicate:[NSPredicate predicateWithFormat:@"%@ > 1", countExpression]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:10:55.120

首先，每当我尝试与您正在做的事情类似的事情时，我都会收到一个错误，您无法将一对多关系传递给`setPropertiesToFetch:`. [NSFetchRequest 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/doc/uid/TP30001170-SW25)支持这一点：“属性描述可能表示**属性、一对一关系或表达式。** ”这就是问题 #1。

问题 #2 是您似乎也不能按对多关系进行*分组*（这在文档中没有明确说明，但您会遇到相同的错误，这也是有道理的）。

从要获取的属性中删除“订单”。按属性分组。修改您的主要谓词以仅包含您分组的那些属性（或仅将其删除）。在您的谓词中指定“顺序”。

```
[fetchRequest setPropertiesToGroupBy: @[ @"???" ]];
[fetchRequest setHavingPredicate: [NSPredicate predicateWithFormat: @"self.order.@count > 1"]]; 
```

现在您会看到请求会起作用，但结果可能不是您所期望的：

```
 - NSArray
     - NSDictionary { status = @"alive", orderCount = "4" }
     - NSDictionary { status = @"alive", orderCount = "9" }
     - NSDictionary { status = @"alive", orderCount = "2" }
     - etc... 
```

`NSDictionaryResultType`实际上并没有给你任何东西来识别这些对象——它只是给你值。

因此，下一步是取回这些`OrderedEntry`对象的 ID。诀窍是[包含一个表达式](https://stackoverflow.com/a/4792331/1151216)，它将返回 NSManagedObjectID 作为每个字典中的键。

我不知道这是否真的会给您带来更好的性能（不仅仅是将其与主要谓词相结合）。根据我的经验，提高获取性能的最佳方法之一是创建单例 NSPredicates 并使用替换变量来设置每次获取。谓词解析可能很昂贵。

字典结果类型可能很痛苦。通常只构造一个好的谓词就更好了。我倾向于只将它们用于表达式（即在返回值的图形上执行统计类型的计算）。如果您查看有关要获取和分组的属性的所有限制以及谓词限制，这似乎就是 Apple 的意图。我什至不确定是否可以通过分组和使用 having 谓词来做你想做的事情 - 例如，你打算按什么分组？如果按状态（您需要按状态分组以包含在您的谓词中），那不会折叠所有 OrderEntries 并且您不会获得单独的 objectID 和 orderCounts 吗？最好坚持使用主要谓词，而不是分组和拥有谓词。

# jquery - 如何用 jQuery 知道两个中最后一个更改的选择元素？

> ID：13270113
> 
> 赞同：0
> 
> 时间：2012-11-07T12:47:38.930
> 
> 标签：jquery

有两个`select`要素。它们的默认值为“”，显示文本“选择一个值”。我想知道`jQuery`在他们的值都不是 "" 的情况下，用户最后选择了哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:52:50.820

您可以手动跟踪：

```
<select id="s1" class="watched">
   ...
</select>
<select id="s2" class="watched">
   ...
</select> 
```

...

```
var lastChanged = $();
$('select.watched').on('change'){
  lastChanged = $(this);
} 
```

请注意，只要您可以`select`通过其他方式识别s（例如`$('form#my-form select')`，或者即使页面上`$('select')`没有其他`select`s），就不必设置类。

# cakephp-2.0 - CakePHP Web 应用程序中的@font-face（不适用于各种浏览器类型）

> ID：13270115
> 
> 赞同：1
> 
> 时间：2012-11-07T12:47:44.377
> 
> 标签：cakephp-2.0, font-face

@font-face 在我的 CSS 中设置似乎很简单，但是我定义的字体没有被使用。这是在 CakePHP 2.2 webapp 中，尽管尝试了各种 CSS URL 路径组合、外部 CSS -v- 内联 CSS 和 CSS 中的单引号/无引号/双引号；没有任何工作。

这是CSS：

```
<style> 
@font-face {
    font-family:TerminatorTwo;
    src: url(../files/TerminatorTwo.ttf) format('truetype');
}

div {font-family: TerminatorTwo}
</style> 
```

我的应用程序具有默认的 CakePHP 文件夹结构，因此 CSS 位于 app/webroot/css 中，字体（只是 .ttf）位于 app/webroot/files 中

而不是 CSS 中的 div 部分，我尝试在特定 div 上定义内联样式。没用。所见的代码不起作用，无论我尝试在 CSS 中添加引号，它都不起作用，正如我在其他地方的其他示例中看到的那样。所有这些都在最新版本的 IE8（是的，8，糟糕）、Firefox 和 Chrome 中进行了尝试。哦，还有适用于 Android 的 Chrome。

我也弄乱了路径，但无济于事。

彻底沮丧。本来就是这么简单！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:40:45.453

由于路径无效，可能未加载字体文件。在这些情况下最好使用[HtmlHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html)，因为相对路径在 Cake 安装中必然会变得混乱。使用`url()`方法指向`files`目录。

```
@font-face {
  font-family:TerminatorTwo;
  src: url(<?php echo $this->Html->url('/files/TerminatorTwo.ttf'); ?>) format('truetype');
} 
```

Cake 将确保 URL始终指向`files`目录。`/app/webroot`

或者，您可以放弃内联 CSS 并使用外部样式表来避免 Cake 中正确路径的问题。在这种情况下，如果 CSS 文件在`app/webroot/css`目录中，您可以使用该`../files/TerminatorTwo.ttf`符号。

# javascript - ajax请求后无法识别中文字符串

> ID：13270123
> 
> 赞同：0
> 
> 时间：2012-11-07T12:48:08.197
> 
> 标签：javascript, web-services, jquery, cordova, encode

我编写了一个 Ajax 请求来发布数据。webservice XML 信息如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:xsd="http://www.w3.org/2001/XMLSchema"     xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
<AddNewStory xmlns="http://X.X.X.X/StoryForMac/">
  <StoryID>+story_id+</StoryID>
  <UserName>+User_Name+</UserName>
  <Story_CreateTime>+Story__CreateTime+</Story_CreateTime>
  <StoryName>+Story_Name+</StoryName>
</AddNewStory>
  </soap:Body>
</soap:Envelope>

        $.ajax({
            type: "POST",
            url: webServiceAddNewStoryImgUrl,
            contentType: "text/xml",
            dataType: "xml",
            data: soap_add_new_story_image,     
            success: process_update_pic_success,
            error: process_add_new_img_Error        
        }); 
```

我从文本文件中获取中文字符串，将其分配给变量 Story_Name。之后，我向webservice发出请求，但中文字符串显示????????。无论我输入什么，它都只是显示中文字符串“？？？？？？”....

据我所知，在 web 服务上声明的字符串（用 C# 实现）被编码为 Unicode，而 javascript 字符串也被编码为 UTF-8（？）。
我不明白为什么会这样。
我做了一个测试：我在webservice上运行调试器，直接输入中文字符串。这一次，它显示正确！
为什么会这样？

ps：我基于Android系统创建应用，使用PhoneGap API读取移动设备上的字符串。
有什么建议吗？？

请提供任何帮助或建议。我在这个问题上花了几天时间，尝试了很多方法，但都是徒劳的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:17:22.247

有一个例子显示@ [http://www.webtoolkit.info/javascript-utf8.html](http://www.webtoolkit.info/javascript-utf8.html)

-谢谢

# android - 使用 Rhhub 构建的 .apk 文件无法在设备上运行

> ID：13270129
> 
> 赞同：0
> 
> 时间：2012-11-07T12:48:21.770
> 
> 标签：android, apk, rhomobile

在我的设备中安装 .apk 文件后，当我试图打开它时，它说不幸的是应用程序已停止。它在我的 Rhomobile 的 Android Rhosimulator 上运行良好，然后我不明白为什么会这样说。

更新：今天我在本地机器上构建了 .apk 文件，其大小为 11mb，而我在 Rhhub 上构建的 .apk 文件大小为 3.5mb，一个有趣的事实是，在本地机器上构建的文件正在运行但它又产生了 2 个问题： 1\. .apk 文件大小对于我的开发人员纯粹基于 android 和 java 构建的简单应用程序来说太大了，它只有 1 mb。2.我包含的css文件在我打开应用程序时有时会工作，有时它不起作用。

伙计们，你能帮我减小文件大小吗？我知道跨平台（Rhomobile）的大小可能很大，但 11 倍太大了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:53:46.320

好吧，伙计们，我不知道它是怎么发生的，我想是因为我没有尝试使用任何其他 android 版本运行该应用程序。
所以最后我的应用程序成功创建并且只用了 2.5mb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:18:25.490

我的情况也是如此。我只有 Rholog.txt，我有一个问题，我们是否需要在 Rhostudio 中配置的本地系统上的 Android SDK 才能使应用程序在实际的 android 设备上运行。

为了测试，我在 rhostudio 中使用 rhosimulator。

# c++ - 调用析构函数重用数据后保留对象指针的另一个副本

> ID：13270131
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:48:23.920
> 
> 标签：c++, constructor, destructor

我正在开发像跳棋这样的棋盘游戏。棋盘上的每一块瓷砖都有一定的属性。在更改棋盘状态之前，我想保存它的状态并用它来撤消最后一步。随着状态的变化，所有对象都被破坏并创建新对象。有没有办法保留这些指针以及调用析构函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:54:43.310

这是一个设计问题，而不是指针/实现问题。一种考虑撤消/重做的方法是两个堆栈，每个任务一个

每当您进行移动时，您将配置/游戏状态、对象等作为一个元素向下推入撤消堆栈，当您按下撤消时，您弹出该堆栈的一个元素，将其应用于您的游戏并将该元素推送到重做堆栈。完成新的移动时清除重做堆栈

在调用其析构函数、指针或无指针后，您不能使用对象。您可以在将对象推入堆栈之前将其作为一个整体复制，也可以使用指向它的指针，无论适合您

您可能对使用共享指针感兴趣，因为它们为您提供了更多可能性

Another approach other than saving the whole game state if you want to effectively use memory, is to just save the changes in the game instead of a snapshot of the whole game, but this usually requires more work, though its the clever approach

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:51:22.580

您不想以这种方式保留指针。如果您在这些指针被删除后尝试通过这些指针访问数据，您将遇到访问冲突。一旦它们被删除，它们指向的内存就不应通过这些指针访问。

如果您复制这些指针，它们也将具有相同的地址，因此通过您复制的副本访问该内存将导致同样的事情发生。您需要考虑不同的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:53:13.797

您可以采用两种方法来保留游戏状态：

*   将构成游戏状态的每个对象序列化到内存或存储中，从而有效地保存状态并能够返回到它。
*   只保留从一种游戏状态到另一种游戏状态的变化。

我不认为使用指针是您设计的核心。没有必要保留旧的指针，而且，据我所知，根本不需要指针。您要么保存对象本身的旧状态，要么保存一系列更改。在这种情况下，我会选择后者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:11:07.890

Why don't you use a Link to UNDO list in same tile object ... as a linked list or so, and when user undo the state you manipulate the data in this list and the data in title

# mysql - 在mysql数据库中存储文本/图像文件

> ID：13270133
> 
> 赞同：-2
> 
> 时间：2012-11-07T12:48:38.887
> 
> 标签：mysql

是否可以将 .doc/.txt 或图像文件直接存储到数据库中以生成 blob 类型的属性？我需要一个很好的工作示例来将文件存储在数据库中，并且显然也可以从数据库中检索它们作为原始文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:52:17.570

博客条目[http://mirificampress.com/permalink/saving_a_file_into_mysql](http://mirificampress.com/permalink/saving_a_file_into_mysql)非常详细地描述了 php 的整个过程。

# php - 从具有行跨度的表中的数据库中获取记录

> ID：13270137
> 
> 赞同：0
> 
> 时间：2012-11-07T12:48:41.650
> 
> 标签：php, database, html-table

我已经尝试了很多方法来让这张桌子打印得尽可能好，但我失败了。我知道这很简单，所以我希望你能帮助我。
这是我的代码：

```
<?php
    include('../connect.php');
    $id=$_SESSION['login_user'];
    $sql = "Select CourseName , Studentname from course p natural join student t"; 
    $rs_result = mysql_query ($sql, $connection); 

    echo "<center>";
    echo "<table>";
    echo "<tr> <th>Course Name</th> <th> Students Name</th>  </tr>";

    // loop through results of database query, displaying them in the table
    while($row = mysql_fetch_array( $rs_result )) {
        // echo out the contents of each row into a table
        echo "<tr>";
        echo '<td>' . $row['CourseName'] . '</td>';
        echo "<td rowspan=''> $row[Studentname] </td> ";
        echo "</tr>";
    }

    echo "</table>"; 
    echo "</center>";
?> 
```

我想成为这样的人

```
Course   |  Name   |   Student name  |
Math101  |  john, Mike               |
... 
```

另外，两个表之间的 JOIN 查询是否正确？

这两个表是：
Course ( Course name - Course id )
Student ( Student name - Course id )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:08:31.793

试试这个查询

```
$sql ="SELECT cor.CourseName,GROUP_CONCAT(stu.StudentName) AS StudentName
        FROM course AS cor
        LEFT JOIN student AS stu
           ON stu.CourseId = cor.CourseId"; 
```

并更改下面的行

```
echo "<td rowspan=''>" . $row['Studentname'] . "</td> "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:56:04.440

这一行：

```
 echo "<td rowspan=''> $row[Studentname] </td> "; 
```

您正在不正确地访问数组元素。**Studentname**应该有单引号，如下所示：

```
 echo "<td rowspan=''>" . $row['Studentname'] . "</td> "; 
```

此外，在您的查询中，这可能会更好：

```
$sql = "SELECT c.CourseName, s.StudentName
        FROM course AS c
        INNER JOIN student AS s
           ON s.CourseId = c.CourseId"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:00:02.360

请使用以下格式

```
SELECT CourseName , Studentname 
    FROM course
    INNER JOIN student
    ON course.id = student.id 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:00:18.520

问题在于您的`rowspan`属性 - 您需要为其提供要跨越的确切行数。无论如何，我认为这是`collspan`您要使用的属性，例如

```
echo "<td collspan='2'> {$row['Studentname']} </td> "; 
```

这意味着它将跨越 2 列，因此 stundet 的名称将同时位于`Name`和`Student name`列下。

这是你所期待的吗？

此外，我强烈建议不要使用`mysql_`函数，而是学习如何使用[mysqli](http://php.net/mysqli)或至少[PDO](http://php.net/PDO)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T13:18:33.170

我的印象是，您想为每个单独的 CourseName 显示参加每门课程的所有学生的姓名的逗号分隔列表。在这种情况下，您可以将 SQL 查询更改为以下内容：

```
SELECT CourseName, GROUP_CONCAT(Studentname SEPARATOR ', ') as names
FROM Course p NATURAL JOIN Student t
GROUP BY CourseName; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-06T15:29:14.297

您好，请看一下这个答案。[从数据库中获取记录时的动态行跨度](https://stackoverflow.com/questions/6173455/dynamic-rowspan-while-fetching-records-from-database/30684275#30684275)

我认为这可能会有所帮助。

# ssas - 具有更改值的 SSAS MDX 查询以进行测试

> ID：13270139
> 
> 赞同：1
> 
> 时间：2012-11-07T12:48:52.737
> 
> 标签：ssas, mdx

我正在执行一个 MDX 查询，该查询每次运行都会更改结果，无论多维数据集中有什么数据。

所以我从

```
WITH 
   MEMBER [Measures].[MyMeasure2] AS
   [Measures].[MyMeasure] * 1.0 // replace 1.0 with??
SELECT
    NON EMPTY(... 
```

像 RANDOM() 这样的东西会很好，但这似乎在 SSAS 中不存在。其他选择会是像当前第二个这样的东西吗？如果我知道如何检索它，那将起作用。

欢迎任何其他想法。目标是有一个变异的结果集，这样我就可以测试模型随时间变化的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:25:16.323

在我的 SSAS 2008 R2 实例上，我能够做到这一点：

```
WITH 
MEMBER [Measures].[MyMeasure2] AS
    [Measures].[MyMeasure] * RND()
SELECT
    NON EMPTY(... 
```

# windows - 相当于 Ollydbg（或其他 Windows 调试器）中 GDB 的“调用”

> ID：13270140
> 
> 赞同：3
> 
> 时间：2012-11-07T12:49:00.403
> 
> 标签：windows, debugging, windbg, ollydbg

在 GDB 中，我可以通过发出类似`call foo("123")`.

我如何在 OllyDbg（或者可能是其他一些主要的 Windows 调试器）中做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:39:09.280

我不知道如何使用 OllyDbg 来做到这一点，但由于您提到了其他 Windows 调试器，您可以`.call`在 WinDbg 中使用该命令。

```
0:001> .call ABC!DoSomething(1,2)
Thread is set up for call, 'g' will execute.
WARNING: This can have serious side-effects,
including deadlocks and corruption of the debuggee.
0:001> r
eax=7ffde000 ebx=00000001 ecx=00000001 edx=00000003 esi=00000004 edi=00000005
eip=10250132 esp=00a7ffbc ebp=00a7fff4 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246
ABC!DoSomething:
10250132 55               push    ebp
0:001> dd esp
00a7ffbc  00a7ffc8 00000001 00000002 ccfdebcc 
```

最好的解释来自[The Old New Thing](http://blogs.msdn.com/b/oldnewthing/archive/2007/04/27/2292037.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:13:58.277

In its default installation, Ollydbg can do this only for DLLs which have exports:

*   Debug > Call DLL export

For executables and DLLs without exports, you will have to build a plugin to do this.

# c# - 网格视图的分页

> ID：13270152
> 
> 赞同：0
> 
> 时间：2012-11-07T12:49:52.850
> 
> 标签：c#, asp.net, gridview

我正在使用 asp.net 4.0 的网格视图。我想使用分页。我正在使用 SQL 查询处理分页。我只得到记录的数量，我想在我的网格中显示。我想将记录总数设置为我的网格，以便我的网格根据我的记录总数显示页码（例如 1 2 3 ....8）。我的网格应该告诉我当前查看的页码是多少。我无法根据我的总记录数设置页码。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:58:33.680

我曾经为此获得过更好的方法，使用存储过程并返回基于 PageIndex 和 PageSize 的数据。

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
 <Columns>
    //your data
 </Columns>
 </asp:GridView> 
```

**这显示了分页**

```
<asp:Repeater ID="rptPager" runat="server">
<ItemTemplate>
    <asp:LinkButton ID="lnkPage" runat="server" Text = '<%#Eval("Text") %>' CommandArgument = '<%# Eval("Value") %>' Enabled = '<%# Eval("Enabled") %>' OnClick = "Page_Changed"></asp:LinkButton>
</ItemTemplate>
</asp:Repeater> 
```

您想要的都在这里：[使用 SQL Server 存储过程在 ASP.Net GridView 中自定义分页](http://www.aspsnippets.com/Articles/Custom-Paging-in-ASP.Net-GridView-using-SQL-Server-Stored-Procedure.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:59:03.580

带回整个结果集以获取分页可能不是您想要的方式。您应该真正扩展 GridView 控件并引入虚拟项目计数属性。然后，您应该将虚拟项目计数传递给网格中所有记录的计数。此外，您还应确保 OnPageIndexChanging 事件应将当前页面索引设置为下一页。

# javascript - 带有溢出-y的jQuery轮播显示容器外的弹出窗口

> ID：13270157
> 
> 赞同：1
> 
> 时间：2012-11-07T12:50:20.493
> 
> 标签：javascript, jquery, css

我需要创建一个基于 jQuery 的轮播。将鼠标悬停在轮播项目上时，它应该会在其上方弹出一个相关的弹出 div。

这个弹出 div 需要定位到显示在轮播包装之外，但仍保持沿 x 轴悬停的轮播项目上方的位置。结果，我将弹出 div 放置在轮播项目内，因此它可以绝对定位，在 CSS 中使用负顶部属性但相对于轮播项目。

我遇到了一个问题，溢出：隐藏需要应用于轮播，因此它不会在页面加载时显示所有轮播项目，但是当它需要出现在悬停时，这会切断弹出 div。

在轮播包装器上的 CSS 中，我尝试使用以下内容，但这没有奏效，它最终表现得像溢出：隐藏

```
overflow-x: hidden;
overflow-y: auto; 
```

或者

```
overflow-x: hidden;
overflow-y: visible; 
```

我提供了一个示例是使用 caroufredsel 插件的 JSFiddle。在这个例子中，为了清楚起见，我让示例弹出 div 始终可见，而不是悬停。您可以看到文本，并且红色 div 的顶部被切断。

[http://jsfiddle.net/melon/jRp2r/9/](http://jsfiddle.net/melon/jRp2r/9/)

想到的一种解决方案是在轮播包装器之外标记弹出 div，这将解决它被切断的问题。但随之而来的问题是确定相对于悬停的轮播项目以及悬停的项目在哪里定位/显示它。在我走这条路之前，我想看看是否还有其他想法，也许是更好的想法。

如果有人可以给我任何方向来实现我所概述的目标，无论是通过 CSS 还是一些自定义 JS 都会很棒。

感谢期待。

更新：

公认的解决方案意味着如果轮播位于页面中间，则在滚动页面时弹出 div 将不会沿 Y 轴保持在同一位置。

我已将我的初始解决方案与接受的答案合并。我在轮播之外创建了一个单独的 div，我将用悬停的轮播项目的弹出 HTML 填充它。然后我会使用 Jquery 来完全重新定位它。以下代码示例解决了我的问题，例如：

```
$('.carousel_item').mouseenter(function() {
   var $this = $(this);
   var posLeft = ($this.offset().left);
   var posTop = ($this.offset().top);

   //Pop up height
   var popHeight = ($('.popup', this).height());

   //Turn into negative number
   posTop = Math.abs(popHeight) * -1;;

   var popup_html = $('.popup', $this).html();

   $('#outside_popup').html(popup_html).css({
       top: posTop,
       left: posLeft
   }).fadeIn('fast');

}).mouseleave(function() {
     $('#outside_popup').fadeOut('fast');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:37:21.873

我不得不自己做一次类似的事情。我相信这里有人会提出更好的解决方案，但这就是我的做法：

用幻灯片嵌套你的弹出窗口：

```
<div class="slide">
    <div class="slide_content"></div>
    <div class="popup">Hello!</div>            
</div> 
```

在鼠标悬停时，获取幻灯片的位置。设置弹出窗口相对于悬停幻灯片的位置。`position: fixed;`是这里的关键。然后让它出现：

```
$('.slide').mouseenter(function() {
    var $this = $(this);
    var posLeft = ($this.offset().left)-10
    var posTop = ($this.offset().top)-10
    $('.popup', $this).css({
                            position: 'fixed',
                            top: posTop,
                            left: posLeft
                           }).fadeIn('fast');

    }).mouseleave(function() {
        $('.popup', this).fadeOut('fast');
    }); 
```

[单击此处查看非常基本的示例](http://jsfiddle.net/dLzuE/) ​在 IE7-9、Firefox、Chrome 中测试

编辑：[这是您的代码的工作示例](http://jsfiddle.net/jRp2r/10/)

# xml - 从 Java Restful Web 服务中删除默认 XML 标记名称

> ID：13270159
> 
> 赞同：1
> 
> 时间：2012-11-07T12:50:22.903
> 
> 标签：xml, web-services, rest

我在 JAVA 上的 REST Web 服务开发中遇到问题。

问题：我的网络服务从 SQL Server 数据库中获取数据。它包含字段数。有一个字段包含一个 XML 标记。所以我必须创建包含所有数据库字段的 XML 文件并将 XML 标记附加到它。

在这里，我可以从数据库中获取数据并构建 XML 文件，但我无法删除默认的 XML 标记名称。

如何删除默认的 XML 标记名称？我尝试过@XMLElement 选项，但从未成功。请帮忙！

电流输出：

```
<CardProfile>
    <cardID="1">
    <accountType>1</accountType>
    .
    .
    .   
    </card>
    <ProfileXML><Profile ID="1"><Signature>adfalfjalj/Signature></Profile></ProfileXML>
</CardProfile> 
```

期望的输出：

```
<CardProfile>
    <card cardID="1">
    <accountType>1</accountType>
    .
    .
    .   
    </card>
    <Profile ID="1"><Signature>adfalfjalj/Signature></Profile>
</CardProfile> 
```

卡片.java

```
package pinpad.repositoryservice;

import javax.xml.bind.annotation.*;

public class Card {
    private int CardID;
    private String CardHolderName;
    private String Track1Data; 
    private String Track2Data;
    private String Track3Data;
    private String PANNumber;
    private String ExpiryDate;
    private String CVV;
    private String Address;
    private String ZipCode;
    private String DriverID;
    private String AccountTypeCreditDebit;

    @XmlAttribute (name = "ID") 
    public int getCardID() {
        return CardID;
    }

    public void setCardID(int id) {
        this.CardID = id;
    }

    @XmlElement
    public String getCardHolderName() {
        return CardHolderName;
    }

    public void setCardHolderName(String CardHolderName) {
        this.CardHolderName = CardHolderName;
    }

    @XmlElement
    public String getTrack1Data() {
        return Track1Data;
    }

    public void setTrack1Data(String Track1Data) {
        this.Track1Data = Track1Data;
    }

    @XmlElement
    public String getTrack2Data() {
        return Track2Data;
    }

    public void setTrack2Data(String Track2Data) {
        this.Track2Data = Track2Data;
    }

    @XmlElement
    public String getTrack3Data() {
        return Track3Data;
    }

    public void setTrack3Data(String Track3Data) {
        this.Track3Data = Track3Data;
    }

    @XmlElement
    public String getPANNumber() {
        return PANNumber;
    }

    public void setPANNumber(String PANNumber) {
        this.PANNumber = PANNumber;
    }

    @XmlElement
    public String getExpiryDate() {
        return ExpiryDate;
    }

    public void setExpiryDate(String ExpiryDate) {
        this.ExpiryDate = ExpiryDate;
    }

    @XmlElement
    public String getCVV() {
        return CVV;
    }

    public void setCVV(String CVV) {
        this.CVV = CVV;
    }

    @XmlElement
    public String getAddress() {
        return Address;
    }

    public void setAddress(String Address) {
        this.Address = Address;
    }

    @XmlElement
    public String getZipCode() {
        return ZipCode;
    }

    public void setZipCode(String ZipCode) {
        this.ZipCode = ZipCode;
    }

    @XmlElement
    public String getDriverID() {
        return DriverID;
    }

    public void setDriverID(String DriverID) {
        this.DriverID = DriverID;
    }

    @XmlElement
    public String getAccountTypeCreditDebit() {
        return AccountTypeCreditDebit;
    }

    public void setAccountTypeCreditDebit(String AccountTypeCreditDebit) {
        this.AccountTypeCreditDebit = AccountTypeCreditDebit;
    }
} 
```

CardProfile.java

```
package pinpad.repositoryservice;

import javax.xml.bind.annotation.*;

@XmlRootElement(name = "CardProfile")
@XmlAccessorType(XmlAccessType.FIELD)
public class CardProfile {

    @XmlElement (name = "Card")
    public Card cards = new Card();

    public String ProfileXML;

    /**
     * @return the cards
     */
    public Card getCards() {
        return cards;
    }

    /**
     * @param cards the cards to set
     */
    public void setCards(Card cards) {
        this.cards = cards;
    }

    /**
     * @return the profileXML
     */
    public String getProfileXML() {
        return ProfileXML;
    }

    /**
     * @param profileXML the profileXML to set
     */
    public void setProfileXML(String profileXML) {
        ProfileXML = profileXML;
    }
} 
```

CardProfileRepositoryService.java

```
package pinpad.repositoryservice;

import javax.ws.rs.*;

/*
 * Holds Card and Profiles and exposes REST interface to answer a profile and card data 
 * based on profile ID and card ID
 */
@Path("/cardprofile")
public class CardProfileRepositoryService {

    CardProfile cardprofiles = new CardProfile();

    @GET
    @Path("/query/")
    @Produces("application/xml")
    public CardProfile getCardProfile(
                    @QueryParam("cardid") int CardID, 
                    @QueryParam("profileid") int ProfileID) {   

        DatabaseManager databaseManager = new DatabaseManager();

        databaseManager.getConfigProperties();
        databaseManager.getDataBaseConnection();
        cardprofiles = databaseManager.executeSprocGetCardProfile(CardID, ProfileID);
        databaseManager.closeDataBaseConnection();

        return cardprofiles;
    }
} 
```

标签值完全来自数据库。所以我想删除标签名称，所以它只会是 Value.. 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:16:34.280

这是一个应该可行的想法：您可以拥有一个实际的 Java 对象 Profile，它也具有 JAXB 注释，而不是将 XML 作为 String 保存在 CardProfile 中。然后，当您从数据库中提取配置文件字符串时，您将使用 JAXB 将其解组为配置文件对象，将该对象设置为 CardProfile.profile，然后编组整个 CardProfile。

```
CardProfile {
  @XmlElement
  public Card cards;

  @XmlElement
  public Profile Profile;
 } 
```

当然，它会增加一些开销，因此如果您有高性能要求，可能并不理想，但它会起作用。一般来说，除非您的 XML 文档很大，否则编组/解组应该是相当轻量级的操作。

# asp-classic - 经典 ASP，相对路径与绝对路径

> ID：13270160
> 
> 赞同：0
> 
> 时间：2012-11-07T12:50:29.150
> 
> 标签：asp-classic, relative-path, absolute-path

我无法确定经典 ASP 中的相对路径与绝对路径。

在 IIS 7.5 中，我创建了一个指向 c:/inetpub/wwwroot/websitename 的网站。在那个网站上，我有一个页面显示一些 mp4 视频的链接。它们位于 c:/inetpub/wwwroot/websitename/DVD 中。

这些链接指向 localhost/websitename/DVD/videoname.mp4

在某些计算机中，单击其中一个视频会给我一个错误。基本上，它说该文件在 c:/inetpub/wwwroot/websitename/websitename/dvd/videoname.mp4 中不存在

这个问题会怎么处理。（我希望够清楚）坦克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:34:17.260

只需使用这样的路径：

```
<a href="DVD/videoname.mp4">videoname</a> 
```

这样您就不必在链接中弄乱 localhost 或 websitename，它只会在与包含链接的文件相同的位置查找名为“DVD”的文件夹并从那里获取文件。

# sql - 在生产环境中与定制的业务 Web 应用程序一起运行 Drupal 是否安全/明智？

> ID：13270161
> 
> 赞同：1
> 
> 时间：2012-11-07T12:50:34.370
> 
> 标签：sql, drupal, iis, production-environment

我很想知道一般社区对在生产服务器上运行 Drupal 和定制的、业务关键的 ASP.NET MVC 应用程序的安全性的感受。

以前，我雇主的基于 Drupal 的“访问者网站”作为托管服务与第三方托管。虽然 LoB 站点是在内部托管的。该第 3 方不再可用，因此我正在考虑我的选择：

1.  将 Drupal 引入内部
2.  寻找另一个第三者

我担心的是我在 Drupal 管理方面几乎没有经验（也没有保护它的经验），并且将 PHP 添加到我的 IIS 服务器会带来安全风险。

在这种情况下，我可以遵循最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:16:31.863

漩涡五是对的。这更像是一个系统管理员问题。

现在在[https://serverfault.com/questions/446366/is-it-safe-wise-to-run-drupal-alongside-bespoke-business-web-apps-in-production](https://serverfault.com/questions/446366/is-it-safe-wise-to-run-drupal-alongside-bespoke-business-web-apps-in-production)

# nancy - 如何在 Nancy 中提供静态内容

> ID：13270163
> 
> 赞同：28
> 
> 时间：2012-11-07T12:50:45.623
> 
> 标签：nancy

我无法在 Nancy 中提供静态内容，例如 JavaScript。

例如使用[自托管示例](https://github.com/NancyFx/Nancy/tree/master/src/Nancy.Demo.Hosting.Self)，我在 Views 文件夹中添加了一个 test.js 并添加了一个

```
<script type="text/javascript" src="test.js"></script> 
```

标记到 staticview.html 页面。如果我在浏览器中查看此页面，则 JavaScript 会正确执行。

但是，当我运行示例时，不会执行 JavaScript。如果我在 FireBug 中查看该页面，我会看到 test.js 出现 404 错误。

我试过添加

```
Get["{file}"] = p =>
{
    string path = string.Format("Views/{0}", p.file);
    return Response.AsJs(path);
}; 
```

当我设置断点并在即时窗口中执行 Response.AsJs(path) 时，我得到 NotFound 的 StatusCode

我也尝试过添加一个 StaticContentConvention 例如

```
protected override void ConfigureConventions(NancyConventions conventions)
{
    base.ConfigureConventions(conventions);
    conventions.StaticContentsConventions.Add(
        StaticContentConventionBuilder.AddDirectory("/", "Views"));
    conventions.StaticContentsConventions.Add(
        StaticContentConventionBuilder.AddDirectory("Views", "Views"));
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-22T17:45:14.873

您可以使用`NancyConventions`. 使用以下引导程序中的代码，您可以将所有静态内容（css/js/html/etc）放在应用程序根目录下名为*“static”的文件夹中。*

```
namespace Application
{
    public class ApplicationBootstrapper : DefaultNancyBootstrapper
    {
        protected override void ConfigureConventions(NancyConventions nancyConventions)
        {
            nancyConventions.StaticContentsConventions.Add(StaticContentConventionBuilder.AddDirectory("Static", @"Static"));
            base.ConfigureConventions(nancyConventions);
        }
    }
} 
```

完成此操作后，您可以访问静态内容，例如脚本

```
<script type="text/javascript" src="/static/test.js"></script> 
```

或CSS

```
<link rel="stylesheet" type="text/css" href="/static/styles.css"> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-28T09:03:09.880

如果您没有特殊原因，您不必配置任何约定。

> Nancy ... 附带了一个默认约定，它将在 `content`您的应用程序路径中查找文件。
> 
> [来自[NancyFx | 管理静态内容](https://github.com/NancyFx/Nancy/wiki/Managing%20static%20content)]

我通过这样做也达到了同样的效果：

1.  在项目中添加一个名为“content”的文件夹，在其中添加静态内容（.js、.xap、.ico、...）
2.  对于每个内容文件，设置其属性：*Build Action* : Embedded Resources；*复制到输出目录*：如果较新则复制。
3.  更改路径以匹配新位置，例如：

`<script type="text/javascript" src="content/test.js"></script>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-27T19:29:04.017

添加只是为了完整性：如果您碰巧在自己的主机中运行 Nancy 并通过 Visual Studio 调试运行，并且您发现所有静态内容请求都得到 404，您必须确保构建操作设置为“始终复制” " 用于您的所有静态内容文件！

如果您不这样做，那么这些文件将不会被复制到您的输出目录，因此将不存在，因此 404。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T13:07:44.803

对于自托管的 Nancy 应用程序，我认为您需要将文件标记为嵌入式资源 - 您为视图做。对于视图，您还需要在引导程序中执行此操作：

```
protected override NancyInternalConfiguration InternalConfiguration
{
  get
  {
    return NancyInternalConfiguration.WithOverrides(
      x => x.ViewLocationProvider = typeof (ResourceViewLocationProvider));
  }
} 
```

您可能必须做类似的事情。

或者，您应该（从记忆中）使用 .AsJsFile 而不是 .AsJs。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-05T14:41:44.583

第一次在线分享解决方案。我花了 4 天时间才找到一个快速的 hack，它可以在我浏览教程和学习 nancy 时起作用。这是简单的解决方案：

确保您的 project.json 文件中有正确的设置：

```
"buildOptions": {
"emitEntryPoint": true,

"copyToOutput": [ "Views/Car/*" ]
}, 
```

接下来，转到您的 CarModule.cs：

```
Get("/status", _ => View["Car"]); 
```

当您第一次编译代码时，您的视图将起作用。但是，在您编辑 html 并尝试再次编译后，您需要这个小技巧：

改变：

```
Get("/status", _ => View["Car"]); 
```

到：

```
Get("/status", _ => View["Car.html"]); 
```

我们欺骗编译器认为它需要将 HTML 附加到程序集。

我希望这可以帮助像我这样的菜鸟，这些菜鸟不能直接从 NacyFx 文档中的上述评论中获得太大的工作意义。

# c++ - 向量，不同大小的图像数组

> ID：13270164
> 
> 赞同：1
> 
> 时间：2012-11-07T12:50:49.890
> 
> 标签：c++, opencv

我在使用矢量时遇到问题，

我希望只使用向量而不是数组。例如。下面显示了数组的用法。

```
IplImage* bdrInt[a] = cvCreateImage(cvSize(cImg.at(a)->width+2*left, 
cImg.at(a)->height+2*top), IPL_DEPTH_8U, 1); 
```

1.  图像大小不同。
2.  如果我打算使用向量而不是数组。是否可以？（cvCreateImage 不允许从 IplImage 转换为矢量类型）这种类型有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:09:35.597

我认为您需要将`IplImage`指针保存在`vector<IplImage *>`. 向量只存储指针，它不关心图像大小。

```
vector<IplImage*> bdrInt;
bdrInt.push_back( cvCreateImage(cvSize(cImg.at(a)->width+2*left, cImg.at(a)->height+2*top), IPL_DEPTH_8U, 1) ); 
```

# blackberry - 黑莓 Jar 文件错误

> ID：13270166
> 
> 赞同：0
> 
> 时间：2012-11-07T12:51:09.263
> 
> 标签：blackberry, blackberry-eclipse-plugin

我的应用程序代码大小为 90kb，编译时出现运行时错误

> 错误：jar 命令失败：jar -cfm "E:\Blackberry Workspace\Kenexa\deliverables\Standard\7.1.0\Kenexa.jar" C:\Users\Acer\AppData\Local ...
> 打包项目 Kenexa 失败（花了 9.129秒）

我已经在系统变量中设置了类路径，但它不是我认为的路径问题，它与我猜的鳕鱼大小有关。当我删除任何类或当 cod 文件大小缩小到 89kb 时，它就会运行。如何解决这个问题？

# jquery - jquery绑定第二个ajax成功

> ID：13270167
> 
> 赞同：1
> 
> 时间：2012-11-07T12:51:19.517
> 
> 标签：jquery, ajax

我有一个显示成功数据的 ajax 请求。完成后，我想做点别的事情，问题是我无法触摸 ajax 代码。我本来可以这样做：

`$.ajax().success(bla).`但我无法触摸此代码。

我必须在其他地方绑定第二个函数，并确保它在第一个 onsuccess 之后出现。可以做到吗？

在我可以使用的成功事件之后是否有一个全局事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:55:48.377

为什么不将第二个函数绑定到第一个函数

```
$.ajax().success(bla(new function() {
    //do whatever you want
})); 
```

在这里，`bla`将 a`function`作为参数。

还是我误会了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:57:51.607

您应该这样使用全局事件，在所有 AJAX 成功回调之后调用它：

```
$.ajaxSuccess(function(){
//do my global thing here
}); 
```

也许同时调用 ajaxSetup 成功回调？没有测试

```
$.ajaxSetup({
    success: function() {
       // local within the ajaxSetup
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:08:58.810

这

```
 complete: function(){
     // Handle the complete event
   } 
```

在成功函数之后触发，与全局相同

```
ajaxComplete() 
```

# linux-kernel - 未设置 VM_GROWSDOWN 标志导致的 get_user_pages -EFAULT 错误

> ID：13270171
> 
> 赞同：0
> 
> 时间：2012-11-07T12:51:32.223
> 
> 标签：linux-kernel, opencl, linux-device-driver, dma

我将继续我的 FGPA 驱动程序的[工作](http://www.stackoverflow.com/questions/9381571/streaming-dma-in-pcie-linux-kernel-driver)。

现在我正在添加 OpenCL 支持。所以我有以下[测试](http://pastebin.com/CL9RfgAb)。它只是添加 NUM_OF_EXEC 次相同缓冲区的写入和读取请求，然后等待完成。

每个写入/读取请求在驱动程序中序列化并作为 DMA 事务顺序执行。DMA相关代码可以在[这里](http://pastebin.com/APD7MKzN)查看。

因此驱动程序接受一个事务，执行它（rsp_setup_dma 和 fpga_push_data_to_device），等待来自 FPGA 的中断（fpga_int_handler），释放资源（fpga_finish_dma_write）并开始一个新的。当 NUM_OF_EXEC 等于 1 时，似乎一切正常，但如果我增加它，就会出现问题。在某些时候 get_user_pages（在 rsp_setup_dma）返回 -EFAULT。调试内核时，我发现分配的 vma 没有设置 VM_GROWSDOWN 标志（在 mmap.c 中的 find_extend_vma 处）。但是在这一点上我卡住了，因为我不确定我理解为什么需要这个标志，我也不知道为什么没有设置它。为什么 get_user_pages 会因上述症状而失败？我该如何调试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:21:26.447

在某些架构上，堆栈会增长，而在其他架构上，堆栈会下降。请参阅 hppa 和 hppa64 了解需要此类标志的怪人。

因此，每当您必须为内核线程或进程设置堆栈时，您也必须提供堆栈增长的方向。

# postgresql - postgresql中的按日期聚合函数分组

> ID：13270172
> 
> 赞同：18
> 
> 时间：2012-11-07T12:51:33.917
> 
> 标签：postgresql, group-by

运行此查询时出错

```
SELECT date(updated_at), count(updated_at) as total_count 
FROM "persons"
WHERE ("persons"."updated_at" BETWEEN '2012-10-17 00:00:00.000000' AND '2012-11-07     12:25:04.082224') 
GROUP BY date(updated_at)
ORDER BY persons.updated_at DESC 
```

我收到错误错误：列“persons.updated_at”必须出现在 GROUP BY 子句中或用于聚合函数第 5 行：ORDER BY people.updated_at DESC

如果我通过调用从组中删除 date( 函数，则此方法有效，但是我正在使用 date 函数，因为我想按日期分组，而不是按日期时间分组

有任何想法吗

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-07T12:57:59.047

目前尚不清楚您希望 Postgres 返回什么。您说它应该按顺序排序，`persons.updated_at`但您没有从数据库中检索该字段。

我想，你想做的是：

```
SELECT date(updated_at), count(updated_at) as total_count 
FROM "persons"
WHERE ("persons"."updated_at" BETWEEN '2012-10-17 00:00:00.000000' AND '2012-11-07     12:25:04.082224') 
GROUP BY date(updated_at)
ORDER BY count(updated_at) DESC -- this line changed! 
```

现在您明确告诉数据库按来自 COUNT 聚合的结果值进行排序。您还可以使用: `ORDER BY 2 DESC`，有效地告诉数据库按结果集中的第二列排序。但是，为了清楚起见，我非常喜欢明确说明该列。

**请注意**，我目前无法测试此查询，但我认为这应该可行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T13:09:21.450

问题是，因为您是按 分组`date(updated_at)`，所以值`updated_at`可能不是唯一的，不同的值`updated_at`可以返回相同的值`date(updated_at)`。您需要告诉数据库它应该使用*哪些*可能的值，或者使用 group by 返回的值，可能是其中之一

```
SELECT date(updated_at) FROM persons GROUP BY date(updated_at)
ORDER BY date(updated_at) 
```

或者

```
SELECT date(updated_at) FROM persons GROUP BY date(updated_at)
ORDER BY min(updated_at) 
```

# image-processing - facedetect.cpp 检测裁剪图像中的眼睛

> ID：13270174
> 
> 赞同：3
> 
> 时间：2012-11-07T12:51:42.850
> 
> 标签：image-processing, opencv, artificial-intelligence, computer-vision, face-detection

我正在使用 OpenCV 进行面部和眼睛检测。首先，我在 OpenCV/Samples/c/facedetect.cpp 中测试了示例程序。我给这个 facedetect.exe 提供了两张图像作为输入 - 一张是完整的，另一张是同一个人的裁剪脸。现在，facedetect.cpp 可以很好地处理完整图像，而它甚至无法检测以裁剪图像作为输入的人脸。

尽管裁剪后的图像仅包含使用 OpenCV 人脸检测器裁剪的人脸，但在某些不好的情况下，我只会得到嘴巴或嘴唇或只有部分人脸。所以我在这里的要求是检查两只眼睛是否在图像中。

以下是两张示例图片，一张是完整图像，我得到了正确的输出： ![在此处输入图像描述](../Images/b385eaf083828ac2e0f2ebfb7613ca4d.png)

下面是我需要使用 facedetect.cpp 检测眼睛的图像：

![在此处输入图像描述](../Images/883213f9d025c9f88a3118ecd7cf5e4d.png)

所以我的问题是如何检测裁剪图像中的眼睛？

以下是样本 facedetect.cpp 的代码

```
#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

static void help()
{
    cout << "\nThis program demonstrates the cascade recognizer. Now you can use Haar or LBP features.\n"
            "This classifier can recognize many ~rigid objects, it's most known use is for faces.\n"
            "Usage:\n"
            "./facedetect [--cascade=<cascade_path> this is the primary trained classifier such as frontal face]\n"
               "   [--nested-cascade[=nested_cascade_path this an optional secondary classifier such as eyes]]\n"
               "   [--scale=<image scale greater or equal to 1, try 1.3 for example>\n"
               "   [filename|camera_index]\n\n"
            "see facedetect.cmd for one call:\n"
            "./facedetect --cascade=\"../../data/haarcascades/haarcascade_frontalface_alt.xml\" --nested-cascade=\"../../data/haarcascades/haarcascade_eye.xml\" --scale=1.3 \n"
            "Hit any key to quit.\n"
            "Using OpenCV version " << CV_VERSION << "\n" << endl;
}

void detectAndDraw( Mat& img,
                   CascadeClassifier& cascade, CascadeClassifier& nestedCascade,
                   double scale);

String cascadeName = "../../data/haarcascades/haarcascade_frontalface_alt.xml";
String nestedCascadeName = "../../data/haarcascades/haarcascade_eye_tree_eyeglasses.xml";

int main( int argc, const char** argv )
{
    CvCapture* capture = 0;
    Mat frame, frameCopy, image;
    const String scaleOpt = "--scale=";
    size_t scaleOptLen = scaleOpt.length();
    const String cascadeOpt = "--cascade=";
    size_t cascadeOptLen = cascadeOpt.length();
    const String nestedCascadeOpt = "--nested-cascade";
    size_t nestedCascadeOptLen = nestedCascadeOpt.length();
    String inputName;

    help();

    CascadeClassifier cascade, nestedCascade;
    double scale = 1;

    for( int i = 1; i < argc; i++ )
    {
        cout << "Processing " << i << " " <<  argv[i] << endl;
        if( cascadeOpt.compare( 0, cascadeOptLen, argv[i], cascadeOptLen ) == 0 )
        {
            cascadeName.assign( argv[i] + cascadeOptLen );
            cout << "  from which we have cascadeName= " << cascadeName << endl;
        }
        else if( nestedCascadeOpt.compare( 0, nestedCascadeOptLen, argv[i], nestedCascadeOptLen ) == 0 )
        {
            if( argv[i][nestedCascadeOpt.length()] == '=' )
                nestedCascadeName.assign( argv[i] + nestedCascadeOpt.length() + 1 );
            if( !nestedCascade.load( nestedCascadeName ) )
                cerr << "WARNING: Could not load classifier cascade for nested objects" << endl;
        }
        else if( scaleOpt.compare( 0, scaleOptLen, argv[i], scaleOptLen ) == 0 )
        {
            if( !sscanf( argv[i] + scaleOpt.length(), "%lf", &scale ) || scale < 1 )
                scale = 1;
            cout << " from which we read scale = " << scale << endl;
        }
        else if( argv[i][0] == '-' )
        {
            cerr << "WARNING: Unknown option %s" << argv[i] << endl;
        }
        else
            inputName.assign( argv[i] );
    }

    if( !cascade.load( cascadeName ) )
    {
        cerr << "ERROR: Could not load classifier cascade" << endl;
        cerr << "Usage: facedetect [--cascade=<cascade_path>]\n"
            "   [--nested-cascade[=nested_cascade_path]]\n"
            "   [--scale[=<image scale>\n"
            "   [filename|camera_index]\n" << endl ;
        return -1;
    }

    if( inputName.empty() || (isdigit(inputName.c_str()[0]) && inputName.c_str()[1] == '\0') )
    {
        capture = cvCaptureFromCAM( inputName.empty() ? 0 : inputName.c_str()[0] - '0' );
        int c = inputName.empty() ? 0 : inputName.c_str()[0] - '0' ;
        if(!capture) cout << "Capture from CAM " <<  c << " didn't work" << endl;
    }
    else if( inputName.size() )
    {
        image = imread( inputName, 1 );
        if( image.empty() )
        {
            capture = cvCaptureFromAVI( inputName.c_str() );
            if(!capture) cout << "Capture from AVI didn't work" << endl;
        }
    }
    else
    {
        image = imread( "lena.jpg", 1 );
        if(image.empty()) cout << "Couldn't read lena.jpg" << endl;
    }

    cvNamedWindow( "result", 1 );

    if( capture )
    {
        cout << "In capture ..." << endl;
        for(;;)
        {
            IplImage* iplImg = cvQueryFrame( capture );
            frame = iplImg;
            if( frame.empty() )
                break;
            if( iplImg->origin == IPL_ORIGIN_TL )
                frame.copyTo( frameCopy );
            else
                flip( frame, frameCopy, 0 );

            detectAndDraw( frameCopy, cascade, nestedCascade, scale );

            if( waitKey( 10 ) >= 0 )
                goto _cleanup_;
        }

        waitKey(0);

_cleanup_:
        cvReleaseCapture( &capture );
    }
    else
    {
        cout << "In image read" << endl;
        if( !image.empty() )
        {
            detectAndDraw( image, cascade, nestedCascade, scale );
            waitKey(0);
        }
        else if( !inputName.empty() )
        {
            /* assume it is a text file containing the
            list of the image filenames to be processed - one per line */
            FILE* f = fopen( inputName.c_str(), "rt" );
            if( f )
            {
                char buf[1000+1];
                while( fgets( buf, 1000, f ) )
                {
                    int len = (int)strlen(buf), c;
                    while( len > 0 && isspace(buf[len-1]) )
                        len--;
                    buf[len] = '\0';
                    cout << "file " << buf << endl;
                    image = imread( buf, 1 );
                    if( !image.empty() )
                    {
                        detectAndDraw( image, cascade, nestedCascade, scale );
                        c = waitKey(0);
                        if( c == 27 || c == 'q' || c == 'Q' )
                            break;
                    }
                    else
                    {
                        cerr << "Aw snap, couldn't read image " << buf << endl;
                    }
                }
                fclose(f);
            }
        }
    }

    cvDestroyWindow("result");

    return 0;
}

void detectAndDraw( Mat& img,
                   CascadeClassifier& cascade, CascadeClassifier& nestedCascade,
                   double scale)
{
    int i = 0;
    double t = 0;
    vector<Rect> faces;
    const static Scalar colors[] =  { CV_RGB(0,0,255),
        CV_RGB(0,128,255),
        CV_RGB(0,255,255),
        CV_RGB(0,255,0),
        CV_RGB(255,128,0),
        CV_RGB(255,255,0),
        CV_RGB(255,0,0),
        CV_RGB(255,0,255)} ;
    Mat gray, smallImg( cvRound (img.rows/scale), cvRound(img.cols/scale), CV_8UC1 );

    cvtColor( img, gray, CV_BGR2GRAY );
    resize( gray, smallImg, smallImg.size(), 0, 0, INTER_LINEAR );
    equalizeHist( smallImg, smallImg );

    t = (double)cvGetTickCount();
    cascade.detectMultiScale( smallImg, faces,
        1.1, 2, 0
        //|CV_HAAR_FIND_BIGGEST_OBJECT
        //|CV_HAAR_DO_ROUGH_SEARCH
        |CV_HAAR_SCALE_IMAGE
        ,
        Size(30, 30) );
    t = (double)cvGetTickCount() - t;
    printf( "detection time = %g ms\n", t/((double)cvGetTickFrequency()*1000.) );
    for( vector<Rect>::const_iterator r = faces.begin(); r != faces.end(); r++, i++ )
    {
        Mat smallImgROI;
        vector<Rect> nestedObjects;
        Point center;
        Scalar color = colors[i%8];
        int radius;
        center.x = cvRound((r->x + r->width*0.5)*scale);
        center.y = cvRound((r->y + r->height*0.5)*scale);
        radius = cvRound((r->width + r->height)*0.25*scale);
        circle( img, center, radius, color, 3, 8, 0 );
        if( nestedCascade.empty() )
            continue;
        smallImgROI = smallImg(*r);
        nestedCascade.detectMultiScale( smallImgROI, nestedObjects,
            1.1, 2, 0
            //|CV_HAAR_FIND_BIGGEST_OBJECT
            //|CV_HAAR_DO_ROUGH_SEARCH
            //|CV_HAAR_DO_CANNY_PRUNING
            |CV_HAAR_SCALE_IMAGE
            ,
            Size(30, 30) );
        for( vector<Rect>::const_iterator nr = nestedObjects.begin(); nr != nestedObjects.end(); nr++ )
        {
            center.x = cvRound((r->x + nr->x + nr->width*0.5)*scale);
            center.y = cvRound((r->y + nr->y + nr->height*0.5)*scale);
            radius = cvRound((nr->width + nr->height)*0.25*scale);
            circle( img, center, radius, color, 3, 8, 0 );
        }
    }
    cv::imshow( "result", img );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:58:40.247

原始示例首先通过 检测人脸`cascade.detectMultiScale`，然后通过 找到检测到的人脸中的眼睛`nestedCascade.detectMultiScale`。

如果您只需要检测眼睛，只需`nestedCascade.detectMultiScale`在完整图像上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:04:30.020

如果您检测到人脸（正面），则使用如下所示的人体测量关系估计左眼和右眼区域的粗略位置。 ![在此处输入图像描述](../Images/ae795fb0043f53b0d6fe9a9b4a8450c5.png)![在此处输入图像描述](../Images/e82943fcf03060356754d1d281803154.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T00:40:22.790

更改级联分类器名称：

```
String cascadeName = "../../data/haarcascades/haarcascade_frontalface_alt.xml"; 
```

将其更改为

```
String cascadeName = "../../data/haarcascades/haarcascade_eye_tree_eyeglasses.xml"; 
```

并将图像的位置作为参数传递。

# ruby-on-rails - 使用 CDN 和 https 的问题：（Rails）

> ID：13270175
> 
> 赞同：0
> 
> 时间：2012-11-07T12:51:42.763
> 
> 标签：ruby-on-rails, cdn

在我的 Rails 应用程序中，我使用了 CDN。我已经通过添加 cdn url 来配置 cdn

```
config.action_controller.asset_host = "http://cdn.mydomain.com" 
```

在 production.rb 文件中。

现在我正在尝试使用`https://`某些页面，例如**登录和注册**

但是由于资产是从 CDN 提供的，因此 https 与 cdn 路径冲突。

我对此的解决方案是使登录和注册页面不使用 CDN 资产，并应指向本地资产。

我的解决方案正确吗？如果是这样，我如何限制某些布局文件使用 CDN 资产路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:12:54.590

我会看看这个回复：[Configure dynamic assets_host in Rails 3](https://stackoverflow.com/questions/3966451/configure-dynamic-assets-host-in-rails-3)

我认为您想要做的是根据您的页面是否通过 https 服务将asset_host 更改为动态的。就像是：

```
config.action_controller.asset_host = Proc.new { |source, request|
"#{request.ssl? ? '/assets' : 'http://cdn.mydomain.com'}" 
```

}

我的语法可能有点偏离，因为我正在即时输入它，但它应该接近你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:25:57.293

**注意：**`request.try(:ssl?)`即使我运行 https 版本，代码也总是返回 false。我正在寻找解决方案，一旦我找到它就会发布。

找到了解决方案

```
config.action_controller.asset_host = Proc.new do |*args|
  source, request = args
  if request.try(:ssl?)
    'https://mydomain.com'
  else
    'http://cdn.mydomain.com'
  end
end 
```

# junit - 如何在eclipse中使用tempus-fugit在不修改源码的情况下并行运行junits？

> ID：13270178
> 
> 赞同：1
> 
> 时间：2012-11-07T12:51:59.563
> 
> 标签：junit, parallel-processing

根据以下链接中的信息，我可以通过添加`@RunWith(ConcurrentTestRunner.class)`到我的测试类从 eclipse 并行运行 junit。

[https://stackoverflow.com/a/13063715/825707](https://stackoverflow.com/a/13063715/825707)

但是我有一个遗留代码，其中包含大约 400 个 junit 测试类和大约 4000 个测试用例。我不想更新 400 个 java 文件`@RunWith(ConcurrentTestRunner.class)`，有没有办法创建一个套件或更改插件，以便我能够在不修改我的源代码的情况下并行运行所有这些文件？

谢谢沙克蒂

# c# - 如何结束单元格的编辑，单击时更改其内容？

> ID：13270181
> 
> 赞同：2
> 
> 时间：2012-11-07T12:52:08.837
> 
> 标签：c#, winforms

我已将 a 更改`DataGridViewCheckBoxCell`为在 CheckBox 右侧包含一个反映 CheckBox 值的字符串。为 时`true`，字符串为“Value1”；当它的`false`字符串应该更改为“Value2”。

字符串值只有在`DataGridViewCheckBoxCell`失去焦点后才会改变。我希望在 CheckBox 值更改后立即更改字符串值。我怎样才能做到这一点？

作为参考，这是我的个性化`DataGridViewCheckBoxCell`课程：

```
public class MyDGVCheckBoxCell : DataGridViewCheckBoxCell
{
    public static string TRUE_VALUE = "Excitada";
    public static string FALSE_VALUE = "Monitorada";

    public MyDGVCheckBoxCell(bool isExcitada)
    {
        FalseValue = FALSE_VALUE;
        TrueValue = TRUE_VALUE;
        Value = isExcitada ? TRUE_VALUE : FALSE_VALUE;
    }

    protected override void Paint(Graphics graphics, Rectangle clipBounds, Rectangle cellBounds, int rowIndex, DataGridViewElementStates elementState, object value, object formattedValue, string errorText, DataGridViewCellStyle cellStyle, DataGridViewAdvancedBorderStyle advancedBorderStyle, DataGridViewPaintParts paintParts)
    {
        base.Paint(graphics, clipBounds, cellBounds, rowIndex, elementState, value, formattedValue, errorText, cellStyle, advancedBorderStyle, paintParts);

        Rectangle contentBounds = this.GetContentBounds(rowIndex);

        Point stringLocation = new Point();

        stringLocation.Y = cellBounds.Y + 4;
        stringLocation.X = cellBounds.X + contentBounds.Right + 1;

        graphics.DrawString(this.Value.ToString(), Control.DefaultFont, System.Drawing.Brushes.Black, stringLocation);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:18:57.413

您通常会为已检查的案例找到一个事件。您可以修改该事件中的字符串。

这是有关该事件的更多信息。

[http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/38f26111-671f-457d-a460-fd5e19b16378](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/38f26111-671f-457d-a460-fd5e19b16378)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T08:46:39.407

我用事件`CurrentCellDirtyStateChanged`来管理`CommitEdit`

这是一个示例：

```
 void dgv_CurrentCellDirtyStateChanged(object sender, EventArgs e)
    {
        if (dgv.Columns[dgv.CurrentCell.ColumnIndex].GetType() == typeof(DataGridViewCheckBoxColumn))
        {
            if (dgv.Columns[dgv.CurrentCell.ColumnIndex].DataPropertyName.StartsWith("_nodb_"))
            {
                dgv.CommitEdit(DataGridViewDataErrorContexts.Commit);
            }
        }            
    } 
```

# c# - 通过反射设置属性时的类型转换问题

> ID：13270183
> 
> 赞同：31
> 
> 时间：2012-11-07T12:52:17.233
> 
> 标签：c#, reflection

我们有一个类型的属性，`long?`它被一个`int`.

当我直接设置属性时，这很好用，`obj.Value = v;`但是当我尝试通过反射设置属性时，`info.SetValue(obj, v, null);`它给了我以下异常：

> “System.Int32”类型的对象无法转换为“System.Nullable`1[System.Int64]”类型。

这是一个简化的场景：

```
 class TestClass
    {
        public long? Value { get; set; }
    }

    [TestMethod]
    public void TestMethod2()
    {
        TestClass obj = new TestClass();
        Type t = obj.GetType();

        PropertyInfo info = t.GetProperty("Value");
        int v = 1;

        // This works
        obj.Value = v;

        // This does not work
        info.SetValue(obj, v, null);
    } 
```

为什么直接设置属性时设置属性时不起作用`reflection`而直接设置属性时不起作用？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-07T12:59:39.367

查看全文： [如何使用反射设置属性的值？](http://technico.qnownow.com/how-to-set-property-value-using-reflection-in-c/)

如果您正在为可空类型设置值，则为完整代码

```
public static void SetValue(object inputObject, string propertyName, object propertyVal)
{
    //find out the type
    Type type = inputObject.GetType();

    //get the property information based on the type
    System.Reflection.PropertyInfo propertyInfo = type.GetProperty(propertyName);

    //find the property type
    Type propertyType = propertyInfo.PropertyType;

    //Convert.ChangeType does not handle conversion to nullable types
    //if the property type is nullable, we need to get the underlying type of the property
    var targetType = IsNullableType(propertyType) ? Nullable.GetUnderlyingType(propertyType) : propertyType;

    //Returns an System.Object with the specified System.Type and whose value is
    //equivalent to the specified object.
    propertyVal = Convert.ChangeType(propertyVal, targetType);

    //Set the value of the property
    propertyInfo.SetValue(inputObject, propertyVal, null);

}
private static bool IsNullableType(Type type)
{
    return type.IsGenericType && type.GetGenericTypeDefinition().Equals(typeof(Nullable<>));
} 
```

* * *

您需要像这样转换值，即您需要将值转换为您的属性类型，如下所示

```
PropertyInfo info = t.GetProperty("Value");
object value = null;
try 
{ 
    value = System.Convert.ChangeType(123, 
        Nullable.GetUnderlyingType(info.PropertyType));
} 
catch (InvalidCastException)
{
    return;
}
propertyInfo.SetValue(obj, value, null); 
```

您需要这样做，因为您无法将任何任意值转换为给定类型...所以您需要像这样转换它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T13:01:06.960

当你写：

```
obj.Value = v; 
```

编译器知道如何为您进行正确的转换并实际编译

```
obj.Value = new long?((long) v); 
```

当您使用反射时，没有编译器可以帮助您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:01:43.303

因为该类型`long`具有隐式转换方法。

[6.1.2 隐式数值转换](http://msdn.microsoft.com/en-us/library/aa691282%28v=vs.71%29.aspx)

您可以将隐式转换方法视为存在于`=`符号后面的隐藏方法。

它也适用于可为空的类型：

```
int i = 0;
int? j = i; // Implicit conversion
long k = i; // Implicit conversion
long? l = i; // Implicit conversion 
```

但是反过来是行不通的，因为不存在将 a 传递`null`给非 null 的隐式转换：

```
int? i = 0;
int j = i; // Compile assert. An explicit conversion exit... 
int k = (int)i; // Compile, but if i is null, you will assert at runtime. 
```

您不必将 a 显式转换`int`为`int?`... 或 a `long?`。

但是，当您使用反射时，您将绕过隐式转换并将值直接分配给属性。这样，您必须显式转换它。

```
info.SetValue(obj, (long?)v, null); 
```

反射跳过所有隐藏在背后的甜蜜的东西`=`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-20T16:39:51.693

按照 SilverNinja的建议（并由[thecoop](https://stackoverflow.com/users/175679/sliverninja)回答）巩固和扩展[Pranay Rana](https://stackoverflow.com/users/314488/pranay-rana)对处理s 的回答，[并将](https://stackoverflow.com/users/79439/thecoop)积累的知识集中在一个地方。这是一个多一点的复制/粘贴。`enum`

```
private void SetApiSettingValue(object source, string propertyName, object valueToSet)
{
    // find out the type
    Type type = source.GetType();

    // get the property information based on the type
    System.Reflection.PropertyInfo property = type.GetProperty(propertyName);

    // Convert.ChangeType does not handle conversion to nullable types
    // if the property type is nullable, we need to get the underlying type of the property
    Type propertyType = property.PropertyType;
    var targetType = IsNullableType(propertyType) ? Nullable.GetUnderlyingType(propertyType) : propertyType;

    // special case for enums
    if (targetType.IsEnum)
    {
        // we could be going from an int -> enum so specifically let
        // the Enum object take care of this conversion
        if (valueToSet != null)
        {
            valueToSet = Enum.ToObject(targetType, valueToSet);
        }
    }
    else
    {
        // returns an System.Object with the specified System.Type and whose value is
        // equivalent to the specified object.
        valueToSet = Convert.ChangeType(valueToSet, targetType);
    }

    // set the value of the property
    property.SetValue(source, valueToSet, null);
}

private bool IsNullableType(Type type)
{
    return type.IsGenericType && type.GetGenericTypeDefinition().Equals(typeof(Nullable<>));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T01:06:41.690

在反射性地创建新对象时，我也遇到了这个问题。

这是不这样做的方法：

```
 var newOne = Activator.CreateInstance(srcProp.GetType());

  srcProp.SetValue(newGameData, newOne, null); 
```

这是如何做到的：

```
 var newOne = Activator.CreateInstance(srcProp.PropertyType);

  srcProp.SetValue(newGameData, newOne, null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-24T14:21:19.020

这是旧线程。但是此页面中的解决方案不起作用。我做了一些调整并且效果很好（在 .netcore 2.0 中）！

```
obj = Activator.CreateInstance<T>();
foreach (PropertyInfo prop in obj.GetType().GetProperties())
{
    if (!object.Equals(this.reader[prop.Name], DBNull.Value))
    {
        if (prop.PropertyType.Name.Contains("Nullable"))
        {
            prop.SetValue(obj, Convert.ChangeType(this.reader[prop.Name], Nullable.GetUnderlyingType(prop.PropertyType)), null);
        }
        else
        {
            prop.SetValue(obj, this.reader[prop.Name], null);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-15T13:46:56.807

var properties = propTypes.GetProperty(attribute);

TypeCode typeCode = Type.GetTypeCode(properties.PropertyType);

```
switch (typeCode)
{
  case TypeCode.Int32:
  properties.SetValue(m, Convert.ToInt32(value.AsPrimitive().Value));
  break;
  case TypeCode.Int64:
  properties.SetValue(m, Convert.ToInt64(value.AsPrimitive().Value));
  break;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-16T05:58:59.060

您可以尝试这样的方法，它对我转换为双倍有用吗？：

```
Type propType = propInfo.PropertyType;

if (propType.AssemblyQualifiedName.StartsWith("System.Nullable`1[[System.Double"))
{
    if (dataRow[column.ColumnName] == DBNull.Value)
    {
        propInfo.SetValue(obj, null, null);
    }
    else
        propInfo.SetValue(obj, (double?)dataRow[column.ColumnName], null);
}
else
    propInfo.SetValue(obj, dataRow[column.ColumnName], null); 
```

# sql-server - SQL Server 2008 R2 智能感知不起作用

> ID：13270186
> 
> 赞同：3
> 
> 时间：2012-11-07T12:52:29.713
> 
> 标签：sql-server, intellisense, ssms

SQL Server 2008 R2 Management Studio intellisense 虽然已启用，但在一个月前停止工作。我读到这个问题可能是由 .NET framework 4.0 SP1 引起的，并尝试了一些建议，但没有任何效果：

*   我已经安装了累积更新包：`SQLServer2008R2_RTM_CU7_2507770_10_50_1777_x64`
*   我重新注册了`TextMgrP.dll`

任何其他建议可以做什么？

SSMS 版本为：Microsoft SQL Server Management Studio 10.50.1617.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:56:13.867

1.  确保您已连接到 SQL Server 2008 Edition。IntelliSense 不适用于以前版本的 SQL Server。

2.  应启用 IntelliSense。有两种方法可以验证是否启用了 IntelliSense。a) 从工具栏 b) 转到工具 -> 选项 -> 文本编辑器 -> Transact-SQL -> IntelliSense

3.  IntelliSense 应使用数据库中的最新更改进行刷新。a) 按 CTRL+SHIFT+R b) 转到编辑 -> IntelliSense -> 刷新本地缓存

4.  转到工具 -> 选项 -> 文本编辑器 -> Transact-SQL -> 常规 -> IntelliSense 选择自动列出成员并检查参数信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T12:59:34.243

我遇到了同样的问题。
对我来说，唯一可行的方法是从源代码中手动选择数据库。

我只是添加

```
use MYDATABASE;
GO 
```

在我的情况下，看起来源代码无法与默认数据库相关联。

# oauth - Foursquare OAuth 令牌格式

> ID：13270194
> 
> 赞同：0
> 
> 时间：2012-11-07T12:52:51.860
> 
> 标签：oauth, foursquare

如[OAuth 令牌的特征是什么？](https://stackoverflow.com/questions/1115287)和[https://www.rfc-editor.org/rfc/rfc6750](https://www.rfc-editor.org/rfc/rfc6750)没有为 OAuth 令牌定义有效字符。

但是，我注意到 Foursquare 似乎只使用了 48 个 ASCII {UPPER, DIGIT} 字符，这适用于 GET 请求（尽管忽略了大小写）。

Foursquare OAuth 令牌有效性规则是否记录在某处，我们能否确定 API 未来版本的政策？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:55:35.737

这是 OAuth 令牌的当前形式。没有计划对其进行更改，但您应该遵守规范并接受任何形式的 OAuth 令牌。

# jquery - jquery获取属性

> ID：13270197
> 
> 赞同：1
> 
> 时间：2012-11-07T12:52:54.633
> 
> 标签：jquery, css

我有以下代码

```
<a href="#" class="chosenflag" data-flag="<?php echo $lang;?>"><img class="flag" src="/img/flag/United Kingdom.png" alt="" /></a>

<ul class="choices">
<li><a href="#" data-flag="uk"><img class="flag" src="/img/flag/United Kingdom.png" alt="" /></a></li>
<li><a href="#" data-flag="de"><img class="flag" src="/img/flag/Germany.png" alt="" /></a></li>
<li><a href="#" data-flag="es"><img class="flag" src="/img/flag/Spain.png" alt="" /></a></li>
<li><a href="#" data-flag="fr"><img class="flag" src="/img/flag/France.png" alt="" /></a></li>
<li><a href="#" data-flag="it"><img class="flag" src="/img/flag/Italy.png" alt="" /></a></li>
</ul> 
```

与“chosenflag”类的链接是活动标志，它选择一个 php 变量，它可以是 uk、de、es、fr、it。

我想要发生的事情是以某种方式将 img src 从 ul 列表中获取到所选标志 img src，具体取决于 data-flag 属性。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:54:12.933

要获得选择的标志，请执行

```
var flag = $('a.chosenflag').data('flag'); 
```

要获得具有特定的列表元素中`src`的图像，请执行`a``data-flag`

```
var src = $('ul a[data-flag='+flag+'] img').attr('src'); 
```

[示范](http://jsfiddle.net/jMvGn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:03:41.383

如果您单击其中一个标志，这应该可以工作。它应该将其标志图像放在所选的标志图像位置。

```
$chosen = $('.chosenflag')
$('.choices').on('click', 'a', function () {
  // changes data-flag on .chosenflag
  var dataFlag = this.data('flag');
  $chosen.data('flag', dataFlag);
  // 'this' is the clicked on <a>
  var src = this.find('img').attr('src');
  $chosenImg = $chosen.find('img');
  $chosenImg.attr('src', src);
}); 
```

我想这就是你要找的。

# toolkit - Trigger.io ToolKit 无法正常启动

> ID：13270200
> 
> 赞同：1
> 
> 时间：2012-11-07T12:53:08.973
> 
> 标签：toolkit, trigger.io

我一直在尝试使用 Trigger.io，并在上周成功使用它。

但是，我今天一直在尝试新的东西，并且无法正确打开 Trigger Toolkit。我不知道为什么——也许我不小心删除了一些东西。

返回的错误如下：

```
Error in remote call to app.list: Expecting property name: line 25 column 2 (char 482) Details Close
Traceback (most recent call last):
File "/Users/josholdham/Library/Trigger Toolkit/build-tools/forge/async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
File "/Users/josholdham/Library/Trigger Toolkit/trigger/api/app.py", line 24, in list
    return forge_tool.singleton.list_local_apps()
File "/Users/josholdham/Library/Trigger Toolkit/trigger/forge_tool.py", line 175, in list_local_apps
    app_config = self._app_config_for_path(path)
File "/Users/josholdham/Library/Trigger Toolkit/trigger/forge_tool.py", line 147, in _app_config_for_path
    app_config = json.load(app_config_file)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 278, in load
    **kw)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 366, in decode
    def raw_decode(self, s, idx=0):
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 382, in raw_decode
ValueError: Expecting property name: line 25 column 2 (char 482) 
```

我已经尝试卸载并重新安装工具包几次，但没有任何乐趣。

非常感谢任何帮助/建议。

谢谢乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:57:32.443

所以我想通了，我有点愚蠢：

我必须访问 Mac 上的隐藏文件才能找到 Users/josholdham/Library/Trigger Toolkit 文件夹，然后我将其删除。

再次启动 Toolkit 然后工作正常。

这就是我们在 Mac 上查找隐藏文件的方式，以防不清楚。

[http://www.mikesel.info/show-hidden-files-mac-os-x-10-7-lion/](http://www.mikesel.info/show-hidden-files-mac-os-x-10-7-lion/)

希望对某些人有所帮助-感谢所有以前的帮助者的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:44:28.993

这看起来`src/config.json`在您的一个应用程序中格式不正确。

我建议查看`src/config.json`您的应用程序目录并检查第 25 行附近的 JSON 语法。

将来，您可以通过使用 Toolkit 中的 App Config 选项卡更改配置来避免这些问题，而不是`src/config.json`直接编辑。

# php - 将多个文件上传到服务器并

> ID：13270210
> 
> 赞同：3
> 
> 时间：2012-11-07T12:53:43.093
> 
> 标签：php, html, mysql, post, file-upload

我的第一篇文章，所以要温柔！我试过搜索这个并且有很多类似的帖子，但我似乎找不到与我的问题完全一样的东西，而且我已经在这个问题上待了好几个小时！：-/

我正在用 PHP (5.3) 和 MySQL 构建一个系统，部分功能是用户需要根据以前的选择上传一些文件。一个示例表格如下：

```
<form action="" method="post" enctype="multipart/form-data" id="uploadFiles">
<p>
<label for="file1">Upload file 1:</label>
<input type="file" name="file1" id="image">
</p>
<p>
<label for="file2">Upload file 2:</label>
<input type="file" name="file2" id="image2">
</p>
<p>
<input type="submit" name="upload" id="upload" value="Upload">
</p>
</form> 
```

在这种情况下，用户需要上传两个不同的文档。这一切都对我有用，我可以将 2 个文件保存到服务器，然后通过循环“$_FILES”将 2 个记录插入到数据库中的表中，其中包含文件名、文件类型（pdf、jpg）和用户 ID 等我的上传课程。

然而，我想要做的是以某种方式将 name 属性添加`<input name="foo">`到插入的行中，以便“文件 1”在名为 document_type 的列中具有“file1”，而“文件 2”将具有“file2”。这样我就可以在 MySQL 中做一个基本的检查，看看用户是否上传了适当的文件。

切入正题，有没有办法在我的 Upload 类中将 INPUT“名称”属性分配或关联到 $_FILES 中的每个文件，以便当我循环访问 $_FILES 时，会有一个唯一的 document_type？

如果您需要有关我的设置的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:00:31.477

```
foreach ($_FILES as $inputName => $uploadedFile) {
    echo $inputName, ':', PHP_EOL;
    print_r($uploadedFile);
} 
```

**输出**

```
file1:
Array (
    'name' => ...
    'tmp_name' => ...
    ...
)
file2:
Array (
    'name' => ...
    'tmp_name' => ...
    ...
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:09:07.927

文件 INPUT 的名称应该是`$_FILES`数组中行的键。例如，在您的示例中， $_FILES 数组应该有两行可以像这样引用：`$_FILES['file1']`和`$_FILES['file2']`. 因此，当您遍历数组时，只需查找该键值并将其插入行中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:34:24.687

最简单的方法是输入没有不同的名称，但将相同的名称写成数组，例如 name="file[]"。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T15:39:26.977

我相信这个问题已经得到解答，但是对于未来的建议，如果您需要有关 CI 中传递参数的更多信息，您可以使用 Xdebug（我与 Netbeans 一起使用）。我只用了一个星期，它是一个很棒的工具！

# xslt - 从源 XML 获取 nil 值

> ID：13270215
> 
> 赞同：0
> 
> 时间：2012-11-07T12:54:02.450
> 
> 标签：xslt, xml-nil

我做了 XSLT 转换。

我缺少的是 nil 属性。我的意思是，如果源元素具有 nil 元素 true，我想将其映射到目标 XML。

```
<xsl:if 
test="string-length(soapenv:Envelope/soapenv:Body/b:getBLResponse/b:result/BResult:BLOut/Class:ID)=0">
    <xsl:attribute name="i:nil">true</xsl:attribute>
</xsl:if> 
```

if 以上适用于特定节点，但我想将其作为通用模板，而不是检查每个字段

可能可以创建将接收 xml 节点的模板，如果节点具有 nil 属性，则将进行验证，否则它将返回 nil 属性，否则没有 nil 属性。

下面是例子

零：输入：

```
<TEST>
    <Child i:nil="true">asdf</Child>
</TEST>
Output:

<TEST xmlns:i="whatever" >
    <OutputChild i:nil="true">asdf</OutputChild >
</TEST>

Without nil: Input + Output the same

<TEST>
    <OutputChild >example</OutputChild >
</TEST> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:56:23.087

我不确定这是否正是您要查找的内容（**请记住始终包含输入和所需的输出 XML**），但是在这里您有一个通用模板，它在应用任何其他处理之前递归地查找空节点和属性（如果您不需要属性检查，只需删除“或”之后的部分）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:i="whatever">
    <xsl:output method="xml" indent="yes"/>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="/*">
        <xsl:copy>
            <xsl:variable name="nil">
                <xsl:apply-templates select="." mode="nil"/>
            </xsl:variable>
            <xsl:if test="$nil='true'">
                <xsl:attribute name="i:nil">true</xsl:attribute>
            </xsl:if>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="*" mode="nil">
        <xsl:choose>
            <xsl:when test="string-length(.)=0 or @*[string-length(.)=0]">
                <xsl:value-of select="'true'"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:apply-templates select="*" mode="nil"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

零：输入：

```
<TEST>
    <Child test="aaa" secondtest="">asdf</Child>
</TEST> 
```

输出：

```
<TEST xmlns:i="whatever" i:nil="true">
    <Child test="aaa" secondtest="">asdf</Child>
</TEST> 
```

没有零：输入+输出（什么都不做）：

```
<TEST>
    <Child test="aaa" secondtest="bbb">asdf</Child>
</TEST> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:56:11.593

为了解决它，我编写了模板，它接收映射节点和新元素名称。检查元素是否为空后，模板返回 nil 属性

```
<xsl:template name="TransformNode" >
        <xsl:param name="pCurrentNode"/>
        <xsl:param name="elementName"/>
        <xsl:element name = "{$elementName}">
            <xsl:if test="$pCurrentNode/@i:nil='true'"><xsl:attribute name="nil">true</xsl:attribute></xsl:if>      
            <xsl:value-of select="$pCurrentNode"/>
        </xsl:element>
    </xsl:template> 
```

# wordpress - 自定义模板的wordpress url重写

> ID：13270218
> 
> 赞同：1
> 
> 时间：2012-11-07T12:54:17.957
> 
> 标签：wordpress, url-rewriting

我对 wordpress 很陌生，对如何为 wordpress 自定义模板创建自定义 url 重写感到困惑。我也尝试在谷歌上找到它，但没有运气。我找不到合适的解决方案。

这是我当前的 url 结构：

```
http://example.com/chiptuning/search/?brand=Audi 
```

使用自定义 url 重写我想将其转换为

```
http://example.com/chiptuning/search/brand/audi 
```

或者它可能是

```
http://example.com/chiptuning/search/Audi 
```

还请提及在哪里放置代码。

**更新**

@Mike Lewis 提供的答案已经被我使用，但它没有提供我正在寻找的东西，无论如何感谢@Mike Lewis 的回复。

还有人对这个问题有什么建议吗？我需要它，请快点。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:39:54.523

WordPress 在查找要使用的模板文件方面发挥了自己的作用。如果您了解重写规则，可以查看以下页面：

*   [http://codex.wordpress.org/Rewrite_API/add_rewrite_rule](http://codex.wordpress.org/Rewrite_API/add_rewrite_rule)
*   [http://codex.wordpress.org/Class_Reference/WP_Rewrite](http://codex.wordpress.org/Class_Reference/WP_Rewrite)

或者，这里有一些更简单的解决方案：

**使用分层页面**

site.com/page1/子页面/子页面/

您必须使用浏览器通过 /wp-admin/ 添加页面，然后您可以在其中设置其父页面。您还可以选择要使用的特定模板（PHP 主题文件）（请参阅：[主题开发](http://codex.wordpress.org/Theme_Development)并向下滚动到自定义页面模板）。

**使用分层类别**

您还可以使用分层类别来标记帖子，然后在类别存档页面上列出它们。例如：

您可以拥有 site.com/category/brand/audi/（请注意，您可以在 wordpress 设置中更改此网址的“类别”基本部分）。

您可以为各种标签存档页面创建模板文件：category-brand.php 将为`site.com/category/brand/`url 加载，category-audi.php 将为`site.com/category/brand/audi/`url 加载。

注意：根据您的网站需要的动态程度，您可能需要跳过使用 category-{tag}.php，这样它就可以使用通用 category.php。在这种情况下，我相信上述两个 url 都会使用通用 category.php（在没有更具体的模板文件的情况下 -[模板层次结构](http://codex.wordpress.org/Template_Hierarchy)向下滚动以查看模板层次结构图）。

这将使您不必为每个单独的标签创建单独的文件。使用 get_query_var() 方法获取特定的类别标签。

**最后但并非最不重要的**

如果您仍然感到困惑，还有另一种方法可以对 url 进行切片和切块，而无需使用重写规则。BuddyPress（wordpress 的插件）有一个功能，可以将 url 分成几部分（/one/two/three/），然后在 PHP 中使用它们。我不确定这是如何工作的，但如果你想看看，你可以谷歌/下载 BuddyPress，然后查看`buddypress/bp-core/bp-core-catchuri.php`文件。

这是文档块：

```
/**
 * Analyzes the URI structure and breaks it down into parts for use in code.
 * BuddyPress can use complete custom friendly URI's without the user having to
 * add new re-write rules. Custom components are able to use their own custom
 * URI structures with very little work.
 *
 * @package BuddyPress Core
 * @since BuddyPress (1.0)
 *
 * The URI's are broken down as follows:
 *   - http:// domain.com / members / andy / [current_component] / [current_action] / [action_variables] / [action_variables] / ...
 *   - OUTSIDE ROOT: http:// domain.com / sites / buddypress / members / andy / [current_component] / [current_action] / [action_variables] / [action_variables] / ...
 *
 *  Example:
 *    - http://domain.com/members/andy/profile/edit/group/5/
 *    - $bp->current_component: string 'xprofile'
 *    - $bp->current_action: string 'edit'
 *    - $bp->action_variables: array ['group', 5]
 *
 */
function bp_core_set_uri_globals() { 
```

# jquery - Bootstrap 的 IE8 中不显示占位符

> ID：13270219
> 
> 赞同：15
> 
> 时间：2012-11-07T12:54:22.110
> 
> 标签：jquery, twitter-bootstrap, internet-explorer-8, placeholder

我正在为我的项目使用 Bootstrap。除 Internet Explorer 8 及以下版本外，所有浏览器的占位符都可以正常显示。

是否有任何解决方案可以在 IE8 中获得占位符支持？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T09:30:04.650

你可以使用这个插件 [https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder) 甚至可以在 IE6中使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T12:56:46.847

您可以为此使用jquery水印插件

[https://code.google.com/p/jquery-watermark/](https://code.google.com/p/jquery-watermark/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:12:48.120

如果没有插件，应该不难解决这个问题，我猜接近这个的东西可以解决问题：

```
var test = document.createElement('input');
if (!('placeholder' in test)) {
    $('input').each(function () {
        if ($(this).attr('placeholder') != "" && this.value == "") {
            $(this).val($(this).attr('placeholder'))
                   .css('color', 'grey')
                   .on({
                       focus: function () {
                         if (this.value == $(this).attr('placeholder')) {
                           $(this).val("").css('color', '#000');
                         }
                       },
                       blur: function () {
                         if (this.value == "") {
                           $(this).val($(this).attr('placeholder'))
                                  .css('color', 'grey');
                         }
                       }
                   });
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-27T03:37:25.070

从鲁本斯的回答中添加，这里有一个演示

[http://mathiasbynens.be/demo/placeholder](http://mathiasbynens.be/demo/placeholder)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T12:57:18.347

IE9 及以下不支持该`placeholder`属性。看到[这个](http://caniuse.com/#search=placeholder)

不过，您可以使用[EZPZ 提示](https://github.com/enriquez/ezpz-hint/)来补充它。如果浏览器是 IE，只需加载脚本

```
 <!--[if lt IE 10]>
      <script src="PATHTOFILE"></script>
    <![endif]--> 
```

EZPZ 提示允许您继续使用`placeholder`现代浏览器。

例子：

```
<input type="text" id="search" placeholder="Search" />

$("input[type=text]").ezpz_hint(); 
```

# unity3d - 在 4 个顶点平面上绘制纹理

> ID：13270221
> 
> 赞同：1
> 
> 时间：2012-11-07T12:54:32.797
> 
> 标签：unity3d, blender

我有一个统一创建的标准平面，并将其网格过滤器（具有 121 个三、202 个顶点）替换为在搅拌机中制造的具有 2 个三 / 4 个顶点的网格过滤器。

如果我用纹理设置材质，我只能在平面上绘制一小部分纹理。如何在新飞机上绘制完整的纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:58:19.663

您需要调整 UV 贴图，使 4 个顶点覆盖整个图像。看看[这个演示文件](http://files.scio.de/public/SO/Plane.blend.zip)，尤其是在 UV 场景布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T02:20:33.260

如果纹理以这种方式显示，则意味着导入模型的 UV 错误或材质中的纹理倾斜或偏移错误。

除了为这种简单的形状导入网格之外，您还可以在如下代码中创建一个网格：[https ://github.com/doukasd/Unity-Components/blob/master/ProceduralPlane/Assets/Scripts/Procedural/ProceduralPlane.cs](https://github.com/doukasd/Unity-Components/blob/master/ProceduralPlane/Assets/Scripts/Procedural/ProceduralPlane.cs)

# objective-c - 返回一个 nsmutuableArray 作为一个可变副本的指针

> ID：13270228
> 
> 赞同：0
> 
> 时间：2012-11-07T12:55:09.373
> 
> 标签：objective-c

我不想退货`manch`，因为如果我`autorelease` 在退货之前，它将对其他人无效。所以我在想这个：

```
 classA
-(NSMutableArray*)set:(NSMutableArray*)data
    {
        manch=  [[data mutableCopy]autorelease]  ;
        int count=2*[data count]; //to not enter infinity loop

        for(int k=0;k< count;k=k+2)
        {
            if(k==count-1)
                [manch addObject:[NSNumber numberWithInt:![[manch objectAtIndex:k] integerValue] ] ];
        }

        data=[manch mutuableCopy];
        return data;
    } 
```

我的目标是创建一个可以`NSMutuableArray` 做一些计算的类，而不是返回它，并且不再**依赖**于这个类。

**编辑 ：**

正如这里的人所问。在另一个类B（上述方法的用户）中，我在界面中有：

```
NSMutuableArray *data ; 
```

在 .m 文件初始化方法上我有

```
data=[[NSMutuableArray alloc]init]; 
```

要使用我的问题中的功能，我会：

```
mIns=[[classA alloc]init];
data= [mIns set:[self decimalToBinary:autoWord]]; 
```

比我松的`data`晚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:27:23.463

> 我不想退货，因为如果我在退货之前自动释放，它对其他人无效。所以我在想这个：

这是一个不正确的说法，您可以返回一个自动释放的对象，这是明智的做法。值得注意的是，您应该正确设计方法名称以告知用户返回的对象类型。任何名称以 `alloc`、`new`、`copy`或开头的方法`mutableCopy`都将返回一个保留对象。（[来源](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)）

在您的情况下，您的方法名称是`set:`，它通知该方法的用户它将返回一个非保留对象（几乎总是一个`autoreleased`对象）。这是因为它没有以上述任何单词为前缀。

在这种情况下，您遇到的问题与该方法的用户有关；他们没有保留对返回对象的引用。因此，该方法的用户应该这样使用它：

```
@interface ClassName () {
    NSMutableArray* m_ivarArray;
}
@property (nonatomic, retain) NSMutableArray* propertyArray;
@end

NSMutableArray* data = ...;

// If using a property with retain, setting via "self." will retain it for you
self.propertyArray = [self set:data];

// If using an ivar (which doesn't do the retain for you)
m_ivarArray = [[self set:data] retain]; 
```

您可以通过使用自动引用计数（ARC，[更多信息](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)）来避免这些问题，它将为您处理这种内存管理。**使用正确的命名约定仍然很重要，因为 ARC 将根据此判断如何管理您的内存（在某些情况下）**

**更新：**看到您的更新后，我可以看到问题。

```
data=[[NSMutuableArray alloc]init]; 
```

这是创建一个新的实例`NSMutableArray`，一个被正确保留的实例（由于我之前提到的）。

```
data= [mIns set:[self decimalToBinary:autoWord]]; 
```

这是用`data`一个新的 NSMutableArray 替换保存的对象，它是自动释放的。您创建的前一个实例已丢失，您已将其替换为另一个实例。这个新实例**没有**被保留，因此将被意外释放。

要修复，您需要改用它：

```
NSMutableArray* data = [[mIns set:[self decimalToBinary:autoWord]] retain]; 
```

如果稍后将由其他对象填充变量，则不需要分配/初始化变量。我强烈建议重新了解这一切是如何运作的，[这可能是一个好的开始](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW1)。

# architecture - 新ERP（三层）的设计方法-请指教

> ID：13270229
> 
> 赞同：3
> 
> 时间：2012-11-07T12:55:09.107
> 
> 标签：architecture, 3-tier, erp

我目前正在设计一个新的 ERP，它将有 10 个不同的模块。

我正在使用 SQL 服务器作为数据库。.NET 平台进行编程。

对于桌面部分，我使用 WPF，对于 Web，ASP.NET

我有兴趣了解您对软件架构的看法。我还应该使用实体框架和 WCF 吗？

我以前编写过 ERP，但使用的是 2 层方法。这将是我第一次尝试新的平台和概念。

我目前有一组库，用于处理来自/到数据输入窗口（表单或网页）的数据操作，使用类（作为表的包装器）和数据库。

我很乐意听到这些建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:19:21.543

我想建议你两件事：

1.  创建数据库抽象，以便您可以连接到 SQL 服务器或 Oracle 数据库。

2.  确保界面看起来相同

3.  集中您的数据库。

...

问候

# c# - 如何将字符串转换为 BinaryExpression 对象？

> ID：13270230
> 
> 赞同：5
> 
> 时间：2012-11-07T12:55:11.063
> 
> 标签：c#, .net, expression

假设我们有如下字符串：

```
string s1 = "a < 5";
string s2 = "b >= 7";
string s3 = "c <= 8";
... 
```

我想将这样的字符串转换为 BinaryExpression 对象，类似于我们通过使用得到的对象：

```
 BinaryExpression b1 = Expression.MakeBinary( ExpressionType.LessThan, Expression.Parameter( typeof( int ), "a" ), Expression.Constant( 5, typeof( int ) ) );
  BinaryExpression b2 = Expression.MakeBinary( ExpressionType.GreaterThanOrEqual, Expression.Parameter( typeof( int ), "b" ), Expression.Constant( 7, typeof( int ) ) );
  BinaryExpression b3 = Expression.MakeBinary( ExpressionType.LessThanOrEqual, Expression.Parameter( typeof( int ), "c" ), Expression.Constant( 8, typeof( int ) ) ); 
```

我创建了以下方法：

```
BinaryExpression ConvertStringToBinaryExpression( string exp )
{
  string[] s = exp.Split( ' ' );
  string param = s[ 0 ];
  string comparison = s[ 1 ];
  int constant = int.Parse( s[ 2 ] );
  if ( comparison == "<" )
    return Expression.MakeBinary( ExpressionType.LessThan, Expression.Parameter( typeof ( int ), param ), Expression.Constant( constant, typeof ( int ) ) );
  else if ( comparison == "<=" )
    return Expression.MakeBinary( ExpressionType.LessThanOrEqual, Expression.Parameter( typeof ( int ), param ), Expression.Constant( constant, typeof ( int ) ) );
  else if ( comparison == ">" )
    return Expression.MakeBinary( ExpressionType.GreaterThan, Expression.Parameter( typeof ( int ), param ), Expression.Constant( constant, typeof ( int ) ) );
  else if ( comparison == ">=" )
    return Expression.MakeBinary( ExpressionType.GreaterThanOrEqual, Expression.Parameter( typeof ( int ), param ), Expression.Constant( constant, typeof ( int ) ) );
  else
    throw new ArgumentException( "Invalid expression.", "exp" );
} 
```

但是，例如，如果我们有如下字符串，则上述方法无法正常工作：

```
string s4 = "a< 5"  // no space between 'a' and '<'
string s5 = "b>=9"  // no space at all
string s6 = "c <=7"  // no space betwen '<=' and '7' 
```

使它更健壮和可靠的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:08:48.050

使用正则表达式匹配某些类型的可能表达式（如果您有一个详尽且合理短的可能表达式列表）。如果它与您的正则表达式不匹配，也解析字符串以检查任何意外字符。

编辑：正则表达式和解析将帮助您“清理”字符串，然后才能使用您的 switch/if-else 案例。

[http://www.c-sharpcorner.com/UploadFile/prasad_1/RegExpPSD12062005021717AM/RegExpPSD.aspx](http://www.c-sharpcorner.com/UploadFile/prasad_1/RegExpPSD12062005021717AM/RegExpPSD.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:47:22.473

正如 Harsha 指出的那样，`regex`这将使您的任务变得简单

```
Match m=Regex.Match("var4 <= 433",@"(?'leftOperand'\w+)\s*(?'operator'(<|<=|>|>=))\s*(?'rightOperand'\w+)");
m.Groups["leftOperand"].Value;//the varaible or constant on left side of the operator
m.Groups["operator"].Value;//the operator
m.Groups["rightOperand"].Value;//the varaible or constant on right side of the operator 
```

# c++ - 如何使用 SOCI 和 C++ 检查表中有多少行？

> ID：13270231
> 
> 赞同：1
> 
> 时间：2012-11-07T12:55:17.363
> 
> 标签：c++, soci

简单的问题。我有一个表人。我有两行：

```
1 Joe Doe joe.doe@ymail.com
2 Vivien Doe v.doe@gmail.com 
```

如何编写 SOCI 语句，它将告诉我（返回）我的表中有多少行？（在这里，在我的示例中，我有 2 行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:57:41.430

要获取 SQL 表中的行数，请使用如下`count(*)`函数：

```
select count(*) from Person 
```

更具体地说 - 将数字输入 C++ 变量使用：

```
int count;
sql << "select count(*) from person", into(count); 
```

# java - OutOfMemoryError 有可用内存

> ID：13270232
> 
> 赞同：1
> 
> 时间：2012-11-07T12:55:28.187
> 
> 标签：java, memory-leaks

我有一个使用 java 线程池在后台执行一些繁重处理的应用程序。

线程池配置为记录执行期间发生的异常

```
public enum ExceptionLogger implements Thread.UncaughtExceptionHandler {
    INSTANCE;

    private static final Logger log = LoggerFactory.getLogger(ExceptionLogger.class);

    @Override
    public void uncaughtException(Thread t, Throwable e) {
        log.error("Exception occurred at thread " + t.getName() + "\n", e);
    }
  } 
```

在我的应用程序日志中，我随机获取，`java.lang.OutOfMemoryError: Java heap space`但如果我使用记录内存使用情况，`Runtime.getRuntime().freeMemory()`我可以看到大量可用的可用堆空间。

此外，在我收到此异常后，应用程序继续工作。

`OutOfMemoryError`收到此消息还有其他原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:03:12.550

当内存分配失败时，您将收到 OutOfMemoryError。

这可能发生在

*   你的内存用完了。
*   您的 GC 车削参数阻止它使用所有内存。例如，为未满的代设置最小尺寸。
*   你分配了一大块内存。在此失败后，您仍然有空闲内存，只是不足以分配大块。
*   你会得到一个不适用于堆的 OutOfMemoryError，例如 PermGen 或直接内存或虚拟内存（用于线程等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:51:25.673

除了 Peter Lawrey 的出色回答之外，您还遇到了“达到 GC 开销限制”错误。

当 JVM 没有足够的处理时间来进行垃圾收集或 GC 占用了过多的总可用处理能力时，就会发生这种情况。主要发生在您有大量非常短暂的对象以及 CPU 饥饿的应用程序并且没有足够的平均可用堆（最大堆大小 - 长期对象）时。

对此的解决方案各不相同，但通常意味着您必须限制 CPU 消耗（在您的情况下是线程数）和/或增加堆大小。

# c# - 在 asp.net(c#) 中显示确认/对话框

> ID：13270236
> 
> 赞同：1
> 
> 时间：2012-11-07T12:55:46.143
> 
> 标签：c#, jquery, asp.net, dialog, popup

我需要实现的功能是：Confirmbutton_Click

显示一个弹出/对话框：

单击是，我需要验证提交的电子邮件 ID 和其他个人详细信息。如果验证失败，则显示错误消息并返回 false。如果电子邮件 ID 和其他详细信息正确，则隐藏/显示几个 Div。

我已经在 jQuery 中实现了这个功能，但现在我应该在服务器端实现它。首先是因为 Div 每次都没有正确显示，其次是出于安全考虑。

我在谷歌上搜索的建议要求在服务器端编写完整的代码（在脚本标签中）。这太多了，因为我需要验证许多字段。
另外，有没有办法我可以在客户端进行验证并返回服务器端并根据验证结果显示我的 Div？客户端脚本将在服务器端之前执行，因此是可以实现的。

我不想为此创建一个新的弹出页面。

如果有人可以帮助我提供正确的代码或指向一个的指针，如何验证和显示 div（显示要从服务器端完成的 div）。

## 更新：

我在中途，如果有人可以帮助我：

在页面加载（不是回发）中，我添加了：

```
btnConfirm.Attributes.Add("onclick", "if(confirm('Confirm - Are you sure you want to go ahead.')) onConfirm(); else return false;"); 
```

在 jQuery 代码中，我将验证添加为：

```
function onConfirm() {    
    //Check if email-id is not blank, else show message and return to the page
    if (isBlank($('#emailAddress').val()) == false) {
        $('#errorBlankEmail').show();
        return false;
    }
}
    //Text validation functions
    function isBlank(valueSent) {
        if ($.trim(valueSent) == "")
            return false;
        else
            return true;
} 
```

和按钮代码为：

```
<asp:Button ID="btnConfirm" runat="server"   Text="Confirm"  onclick="Confirm_Click" /> 
```

以及用于此的服务器端代码：

```
protected void Confirm_Click(object sender, EventArgs e)
    {
        divConfirm.Visible = true;
    } 
```

现在，当我单击按钮时，它会一直工作，直到我验证并且验证失败，它会执行服务器端代码。如果客户端点击代码中的结果为假，有没有办法可以避免服务器端代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:09:20.513

您可能想尝试使用[http://www.telerik.com/](http://www.telerik.com/) ASP.net AJAX 控件或 Ajax Control Toolkit Modal Extender。我都用过，它们正是你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:14:34.777

我不建议这样做，但也许这会为您指明更好的解决方案。

正如你提到的，从服务器端你可以使用静态函数

```
var script = @"<script> $("#somediv").dialog()  </script>", false);
ClientScript.RegisterClientScriptBlock(GetType(), "some", , false); 
```

(#somediv) 封装了用户控件并包含所有验证逻辑。问题是您的 div 的服务器验证，因为在 div 上回发后（在服务器端验证）您的 div 将被关闭，并且您需要再次从服务器上启动它，这种方法会搞砸事情......我会使用将返回结果的新弹出窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:22:21.400

你不会在服务器上得到确认。服务器在请求/响应中没有用户交互的概念。它只能接收请求、处理请求并发送响应。

您可以做的是发送一个请求以生成一个要求用户确认的响应。然后用户将单击“是”，这将创建另一个请求。服务器将接收请求，处理请求并发送响应。

但是您不能做的是在服务器上处理请求时要求用户确认请求。该确认必须已经完成。

您可以在服务器上验证请求，但这只是标准验证。那里没什么好做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:24:34.437

您可以使用[jQuery ui 对话框 - 模态确认](http://jqueryui.com/dialog/#modal-confirmation)

并在确认使用 __doPostback 触发事件“Confirmbutton_Click”

这只是另一种方式，但它不会像 Telerik 控制那样简单。

```
<script>
    $(function() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Confirm": function() {
                    $( this ).dialog( "close" );
                    __doPostBack('#<%= Confirmbutton.UniqueID %>', null)
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    </script> 
```

而作为 html，

```
<div id="dialog-confirm" title="Empty the recycle bin?">
    <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>
<asp:button id="Confirmbutton" runat="Server" OnClick="Confirmbutton_Click" style="display:none;" /> 
```

# css - 删除行中最后一项的边距

> ID：13270238
> 
> 赞同：0
> 
> 时间：2012-11-07T12:55:50.903
> 
> 标签：css

我有 3 列和 3 行 div 元素。

使用 CSS 从每三个项目中删除右边距的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:58:59.090

`:nth-child(3n)`将选择每第三个项目。这是一个无序列表的示例：http: [//jsfiddle.net/894p6/](http://jsfiddle.net/894p6/)。

IE8 或更低版本不支持它。你可以使用 jQuery 选择器来解决这个问题，但如果你需要的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:00:23.497

您可以使用`:nth-child`

```
div:nth-child(3n+3) {  
    margin-right: 0;
} 
```

看看这个链接，非常有帮助：[http ://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-07T12:59:46.237

您可以为您的第三个项目添加一个自定义类，并将边距设置为 0 px，但您仍然必须使用动态的东西（如果您的行可以变化）来应用 stile。

对于动态，我的意思是 if 语句检测项目是否是第三个

# c# - 写入大于 100MB 的 XML 文件后的垃圾回收会导致应用程序冻结吗？

> ID：13270244
> 
> 赞同：0
> 
> 时间：2012-11-07T12:55:59.733
> 
> 标签：c#, xml, garbage-collection, codesynthesis

因此，我编写了一个 WPF 应用程序，它从数据库中获取各种数据，然后使用 Code Synethesis 它根据数据编写 XML 文件。问题是，有时在完成写入后，应用程序似乎只是挂在那里，带有 Windows Cursors.Wait 图标，如果我单击应用程序，它会完全冻结，我必须从任务管理器关闭应用程序的进程。

查看完整的 XML 文档 (*.xml)，其大小约为 100MB 到 200MB（包括标签和所有内容），具体取决于数据类型。垃圾收集是否可能是应用程序似乎忙碌了这么长时间的原因？有时它会持续 +30 分钟，最终会解决，但不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:04:22.050

垃圾收集不会是这个原因。GC 每秒可以轻松收集数百万个对象，而且很可能您没有那么多对象。

如果您可以在 Visual Studio 中调试时重复此操作，请点击`Break All`中断执行。然后，使用`Threads`工具窗口 ( `Ctrl+D,T`) 检查所有正在运行的线程，并切换到每个线程以查看它在哪里等待。如果您的 GUI 被冻结，它可能是在`Main Thread`（GUI 线程）内部。

最有可能的是，您遇到了某种死锁，并且您的应用程序正在等待获取锁。

# jquery - Controlling breaks in a multi-column layout generated by the jQuery plugin Textify.js

> ID：13270247
> 
> 赞同：0
> 
> 时间：2012-11-07T12:56:09.907
> 
> 标签：jquery, layout, jquery-plugins, joomla, multiple-columns

I am using the textify.js jQuery plugin available on CodeCanyon and I am having problems managing how text-based content breaks in a multi-column, multi-page layout.

One of the most pressing problems I am having relates to lists. Sometimes, list items break incorrectly.

In the code below, columns are set to a fixed height of 330px. Some of the list items break mid-item and are continued on the next column. The result is a new list item is started on the next column when that happens.

```
<ul>
    <li>Vous raccommoder avec votre conjoint après avoir exprimé clairement vos attentes de changement, en surmontant vos différends.</li>
    <li>Consulter un tiers autorisé (psychologue, conseiller familial, prêtre) à titre individuel pour faire le point sur votre situation personnelle.</li>
    <li>Consulter un conseiller/médiateur familial avec votre conjoint.</li>
    <li>Vous séparer de fait (sans requérir l'intervention d'un juge, et avec ou sans une convention écrite avec votre conjoint).</li>
    <li>Requérir du juge des mesures protectrices de l'union conjugale  (en demandant ou non  l'attribution du logement familial, c'est-à-dire en menant ou non une vie séparée).</li>
    <li>À noter que requérir des mesures protectrices de l'union conjugale pour organiser la vie séparée peut-être un moyen de préparer un divorce unilatéral si le conjoint refuse de divorcer.</li>
    <li>Si les conditions en sont réalisées, introduire une action en séparation de corps (cas échéant d'accord avec votre conjoint).</li>
</ul> 
```

Effectively, it breaks and creates a new `<li>` as such:

```
<ul>
    <li>Vous raccommoder avec votre conjoint après avoir exprimé clairement vos attentes de changement, en surmontant vos différends.</li>
    <li>Consulter un tiers autorisé (psychologue, conseiller familial, prêtre) à titre individuel pour faire le point sur votre situation personnelle.</li>
    <li>Consulter un conseiller/médiateur familial avec votre conjoint.</li>
    <li>Vous séparer de fait (sans requérir l'intervention d'un</li>
    <li>juge, et avec ou sans une convention écrite avec votre conjoint).</li>
    <li>Requérir du juge des mesures protectrices de l'union conjugale  (en demandant ou non  l'attribution du logement familial, c'est-à-dire en menant ou non une vie séparée).</li>
    <li>À noter que requérir des mesures protectrices de l'union conjugale pour organiser la vie séparée peut-être un moyen de préparer un divorce unilatéral si le conjoint refuse de divorcer.</li>
    <li>Si les conditions en sont réalisées, introduire une action en séparation de corps (cas échéant d'accord avec votre conjoint).</li>
</ul> 
```

I need to be able to control that. Any of the following options would address the issue for me:

1.  The line breaks to the next column but does not create a new `<li>`
2.  The column height grows only enough to allow the `<li>` not to break onto a new column.
3.  The `<li>` does not break mid-sentence, but rather if it is too long to display in the column, it breaks before the `<li>`

The site can be viewed here: [http://alisamii.dyndns.org/ergonomiq/domains/clients/sosd2/](http://alisamii.dyndns.org/ergonomiq/domains/clients/sosd2/)

If this requires custom coding (I am a novice at jQuery) then I would be happy to contract out the modifications to someone.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:37:24.803

Download the latest version (1.1). now the problem has been solved

# android - 在快速变化的视图上捕获 onclick

> ID：13270250
> 
> 赞同：2
> 
> 时间：2012-11-07T12:56:17.690
> 
> 标签：android, click, capture

我得到了 parentView 和许多 childViews [（图片）](http://i.stack.imgur.com/6MOAJ.png) 我想在 childView 上捕获 onClick 事件。所有子视图每秒刷新大约 30 次（通过删除视图创建新视图并重新放置）。设置 onClick 侦听器等标准方法不起作用，因为在设置 onClick 之前，视图已被删除。我设法通过 childView 上的 onInterceptTouchEvent 捕获 onTouch 事件，然后匹配孩子的位置和我收到的 MotionEvent 的位置。有没有更可靠和有效的方法来做到这一点？

# wcf - IIS 7.5 上的 .Net 4.5 WCF 错误 404.3

> ID：13270255
> 
> 赞同：4
> 
> 时间：2012-11-07T12:56:48.200
> 
> 标签：wcf, iis, asp.net-mvc-4, .net-4.5

我部署了一个包含 wcf 服务的 MVC4 Web 应用程序。当我尝试浏览到 .svc 文件时，我收到错误 404.3（错误代码 0x80070032）。

我尝试了我阅读的所有相关答案： 1\. 添加 .svc mime 2\. 检查服务器的 ISAPI 过滤器是否包括 32 位和 64 位的 ASP.Net 4。3\. 检查服务器管理器功能是否包括 WCF 激活。

我已经在同一台服务器上运行了一个带有 WCF 服务的 MVC3 Web 应用程序。

您能否指出可能导致此问题的原因？

我注意到，在处理程序映射中的 IIS 管理器上，运行应用程序的两个域之间存在差异。工作的几乎是空的（仅包括静态文件），而新的启用了一长串处理程序（我不知道它是否相关）。

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T00:42:09.910

我不得不在 Windows Server 2012 的“添加角色服务”中勾选“HTTP 激活”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:06:04.140

以管理员身份在命令提示符下运行命令 aspnet_regiis -iru，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:06:41.220

确保两个 WCF 服务没有在同一个端口上运行——也就是说，您没有连接到 MVC3 WCF 服务。请参阅[如何从一个客户端使用多个 WCF 服务](https://stackoverflow.com/questions/686112/how-to-consume-multiple-wcf-services-from-one-client)以了解如何执行此操作。

# ios - 重新加载数据后选择行崩溃

> ID：13270256
> 
> 赞同：0
> 
> 时间：2012-11-07T12:56:48.577
> 
> 标签：ios, uitableview, exc-bad-access, reloaddata

我有一个 UITableView 的问题。我在后台线程中从数据库服务器加载数据，如果完成，它会发送通知。在通知中，我更新了视图的数据数组并在 tableview 上使用了 reloadData。然后 tableview 取消选择选定的行（这意味着数据被重新加载），如果我想选择另一行，我会在 didSelectRowAtIndexPath 的第一行得到 EXC_BAD_ACCESS，即使它只是一个 NSLog。

如果我不分配新数组，后台线程会给我变量数据并且不使用 reloadData 我对 didSelectRowAtIndexPath 没有问题，但表格视图不显示最近的记录。用户必须关闭视图并再次打开它才能看到更改。这真的很糟糕，我想在后台线程完成从服务器加载记录后立即显示更改。

.h 文件中声明的变量：

-downloadThread 是一个 NSThread，

-data 是一个 NSArray，

-manager 是我的 SQL 接口。

```
-(void)viewDidLoad
{
    ...
    [super viewDidLoad];
    NSMutableArray *arr = [[manager getTeilnehmerList] retain];
    data = arr;
    [self.tableView reloadData];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(KundenUpdated:) name:@"ContactUpdate" object:nil]; // to be notified when updating thread is finished

downloadThread = [[NSThread alloc] initWithTarget:self selector:@selector(teilnehmerLoad:) object:nil]; //Thread to get actual data on Background
[downloadThread performSelector:@selector(start) withObject:nil afterDelay:2];
    ...
}

-(void)teilnehmerLoad:(id)sender
{
    [manager loadTeilnehmerFromServerAndInsertIntoDatabase];
    //data = [manager getTeilnehmerList];
    [self.tableView reloadData];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ContactUpdate" object:nil];

}
-(void)KundenUpdated:(NSNotification*)notifaction
{
    @synchronized(self) 
    {
        //needs function to select row that was selected before reload if the data record is still there after sync with server
        [self.tableView reloadData];
        NSLog(@"count data in kundenupdated: %i",data.count);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:13:47.337

我怀疑在您的后台线程中调用了 teilnehmerLoad，它正在调用 reloadData，这是一个禁忌。

更改它（和/或 KundenUpdated）以使用 performSelectorOnMainThread 来执行 reloadData。

确保您没有从后台线程执行任何其他 UI 操作。

# multithreading - 使用 web.py 强制单线程请求处理

> ID：13270257
> 
> 赞同：3
> 
> 时间：2012-11-07T12:56:50.823
> 
> 标签：multithreading, thread-safety, web.py

我正在使用 web.py 框架。出于调试目的，我想强制所有请求由单个线程处理，或者使用互斥锁模拟这种行为。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:19:54.100

让我提出这样的建议，但它只会将当前应用程序堆栈锁定在您的控制器方法上。

```
import web
from threading import Lock

urls = ("/", "Index")

class Index:

    def GET(self):
        # This will be locked
        return "hello world"

def mutex_processor():
    mutex = Lock()

    def processor_func(handle):
        mutex.acquire()
        try:
            return handle()
        finally:
            mutex.release()
    return processor_func

app = web.application(urls, globals())

app.add_processor(mutex_processor())

if __name__ == "__main__":
    app.run() 
```

UPD：如果您需要锁定整个应用程序堆栈，那么您可能必须`app.wsgifunc`使用自己的 WSGI 中间件进行包装。要获得一个想法，请检查我[对这个问题](https://stackoverflow.com/questions/6960295/changing-the-static-directory-path-in-webpy?rq=1)的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-04T08:06:15.220

为了使事情体面地进入单线程调试模式，可以使用单线程 WSGI 服务器运行 web.py 应用程序。

这样的服务器“几乎”由 web.py 本身提供，因为`web.httpserver.runbasic()`它使用 Python 的内置`BaseHTTPServer.HTTPServer`- 而且`SocketServer.ThreadingMixIn`. 然而，这`ThreadingMixIn`可以被这样的东西阻止：

```
# single threaded execution of web.py app

app = web.application(urls, globals())

# suppress ThreadingMixIn in web.httpserver.runbasic()
import SocketServer
class NoThreadingMixIn:
    pass
assert SocketServer.ThreadingMixIn
SocketServer.ThreadingMixIn = NoThreadingMixIn

web.httpserver.runbasic(app.wsgifunc()) 
```

或者您可以复制相当短的`web.httpserver.runbasic()`代码。

# sql - 将 2 个列值加在一起并格式化输出 Oracle SQL

> ID：13270261
> 
> 赞同：0
> 
> 时间：2012-11-07T12:57:11.370
> 
> 标签：sql, oracle10g, two-columns

我猜这是一项直截了当的任务，但似乎无法让它发挥作用。我想一起添加到列值，然后在 Oracle SQL 中格式化结果。所以我想我可以做类似的事情：

```
to_char(INVOICE_NET, '9,999,999.99') + to_char(INVOICE_TAX, '9,999,999.99')  AS GROSS_PRICE 
```

这失败了，因为我猜这些不再是数字然后我认为这可能有效：

```
INVOICE_NET + INVOICE_TAX AS to_char(GROSS_PRICE, '9,999,999.99') 
```

这也失败了。任何人都可以让我直截了当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:06:32.647

为什么不确实**:)**谢谢，我希望这是直截了当的。我在**net**和**tax**列中添加了`nvl()`函数。

 ****所以现在看起来像这样：

```
to_char(nvl(INVOICE_NET,0) + nvl(INVOICE_TAX,0), '9,999,999.99') AS GROSS_PRICE 
```

非常感谢您的帮助 wxyz****

# jquery - 如何使用jQuery将文件存储在谷歌应用程序中

> ID：13270269
> 
> 赞同：0
> 
> 时间：2012-11-07T12:57:28.217
> 
> 标签：jquery, google-apps-script

你好。如何使用 jQuery 在谷歌应用程序中存储文件。我正在使用[这里](http://blueimp.github.com/jQuery-File-Upload/)给出的插件。但它不起作用。我的 HTML 代码是：

```
<form id="fileupload" action="<%= blobstoreService.createUploadUrl("/fileloadupload") %> method="POST" enctype="multipart/form-data"> 
```

在我的项目中，当我将文件存储在谷歌应用程序中时，我同时将 blobkey 存储在我的数据库中。我正在使用 servlet 和 jsp。请帮助我如何使用 jQuery 在谷歌应用程序中存储文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:15:23.443

您可以使用 HtmlService 创建 HTML 表单。提交按钮将调用 gs 函数。在此示例中，它将上传到您的 Google 文档。

HTML 文件：

```
<html>
<form id='myForm'>
<input name='myFile' type='file'><br>
<input type='button' value="Upload" onclick='google.script.run.uploadFile(this.parentNode)'>
</form>
<html> 
```

gs 文件：

```
function doGet(){
  return HtmlService.createTemplateFromFile('html').evaluate();
}

function uploadFile(theForm){
  var file = theForm.myFile;
  DocsList.createFile(file);
} 
```

# android - ListView 从底部而不是从顶部填充

> ID：13270274
> 
> 赞同：17
> 
> 时间：2012-11-07T12:57:48.573
> 
> 标签：android, android-layout, listview

我有一个向上扩展而不是向下扩展的 listView。我在另一个页面上有另一个 listView 可以正常工作并从顶部填充自身 - > bot。为什么我的 listView 从底部而不是顶部开始？

我的 XML `

```
<ListView
    android:id="@+id/list_view_showRegister"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/showRegister"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="50dp"
    android:clickable="false" >

</ListView>` 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-03-07T11:38:34.097

您`ListView`实际上仍然是从上到下填充。只是不是从页面顶部。

您已设置`layout_height="wrap_content"`和`layout_above="@+id/showRegister"`。高度为`wrap_content`时，视图*将仅与它的内容一样大*。然后，由于您使用`layout_above`了 ，它将*直接在另一个视图上方*。

列表视图不是从底部填充，而是从顶部（列表视图）填充 - 但列表视图本身仅从屏幕的一半开始。listview 上方的任何内容*实际上都不是 listview 的一部分*，而是空白空间。

**解决方案是设置标签`layout_height="match_parent"`或删除`layout_above`标签。**

我知道这是一个老问题，但我希望这对可能通过谷歌发现这个问题的其他人有所帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T13:14:12.800

请参阅[android:stackFromBottom](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3astackFromBottom)属性。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-07T13:19:20.970

看看这些链接。[是否可以从底部填充 ListView？](https://stackoverflow.com/questions/9987402/is-it-possible-to-make-a-listview-populate-from-the-bottom). 从底部填充。 [将新项目添加到 Android 上的列表视图顶部？](https://stackoverflow.com/questions/5903597/add-new-items-to-top-of-list-view-on-android). 在列表顶部添加新项目。

# java - java gwt不显示光标

> ID：13270275
> 
> 赞同：0
> 
> 时间：2012-11-07T12:57:49.930
> 
> 标签：java, gwt, cursor

我在标签上添加了一个点击处理程序，效果很好。但是当我将鼠标悬停在标签上时，会显示光标而不是鼠标箭头（点击处理程序仍然可以正常工作）。是否可以设置一些东西以便保留鼠标箭头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:09:47.130

如果你有这样的标签

```
<g:Label addStyleNames="{style.mytext}">MyText</g:Label> 
```

只需将以下内容添加到其样式中

```
.mytext {
   cursor: default;
} 
```

或者`cursor: pointer`, `cursor: help`, ...

**选择**

或者把`<g:Label>`变成`<g:Anchor href="..." addStyleNames="{style.myanchor}">`. 为避免默认下划线，您可能需要添加样式

```
.myanchor {
  text-decoration: none;
} 
```

# titanium - 如何在文本字段上动态更改背景图像

> ID：13270278
> 
> 赞同：0
> 
> 时间：2012-11-07T12:58:04.143
> 
> 标签：titanium, titanium-mobile

我执行以下操作

当我点击文本字段时，我会显示一个选择器，并更改文本字段的背景图像。

当该人完成选择器（他们单击“完成”）时，我将文本字段背景更改回白色。

当我再次单击文本字段时，即使出现选择器，背景图像也不会改变。

我能做些什么？我想要它，以便每当我单击它并显示选择器时，文本字段就会不断更改为绿色背景。然后当我点击它并且选择器消失时又变回白色。

```
tf1.addEventListener('focus', function(e) {
    Titanium.API.info('Triggered focus on date txtField');

    tf1.setBackgroundImage('../images/selected.gif');

    Titanium.API.info(tf1.backgroundImage);

    var winDatePicker1 = Titanium.UI.currentWindow;

    var minDate = new Date();
    minDate.getFullYear();
    minDate.getMonth();
    minDate.getDate();

    var maxDate = new Date();
    maxDate.setFullYear(2018);
    maxDate.setMonth(9);
    maxDate.setDate(30);

    var datePicker = Ti.UI.createPicker({
        type : Ti.UI.PICKER_TYPE_DATE_AND_TIME,
        minDate : minDate,
        maxDate : maxDate,
        bottom : 0,
        minuteInterval : 10
    });

    var tview = Ti.UI.createView({
        height : '100%',
        width : '100%',
        top : 0,
        backgroundColor : 'transparent'
    });

    var done1 = Ti.UI.createImageView({
        title : '',
        width : 80,
        right : 12,
        height : 40,
        image : '../images/done.gif',
    });

    var toolbar1 = Ti.UI.createView({
        height : 43,
        backgroundImage : '../images/toolbar.gif',
    });

    toolbar1.add(done1);

    done1.addEventListener('click', function() {
        tf1.backgroundImage = '';
        toolbar1.hide();
        datePicker.hide();
        tview.hide();
    });

    tview.addEventListener('click', function() {
        toolbar1.hide();
        datePicker.hide();
        tview.hide();
    });

    // turn on the selection indicator (off by default)
    datePicker.selectionIndicator = true;

    datePicker.addEventListener('change', function(e) {

        Titanium.API.info('E value = ' + e.value);

        var pickerDate = e.value;

        var day = pickerDate.getDate();
        day = day.toString();

        if (day.length < 2) {
            day = '0' + day;
        }

        var month = pickerDate.getMonth();
        month = month + 1;
        month = month.toString();

        if (month.length < 2) {
            month = '0' + month;
        }

        var year = pickerDate.getFullYear();
        var hr = pickerDate.getHours();
        var min = pickerDate.getMinutes();

        if (hr < 10) {
            hr = '0' + hr;
        }

        if (min < 10) {
            min = '0' + min;
        }

        var datestr = '';

        if (hr >= 12) 
        {
            datestr += ' ' + (hr == 12 ? hr : hr - 12) + ':' + min + ' PM';
        } else {
            datestr += ' ' + hr + ':' + min + ' AM';
        }

        var newdate = month + "/" + day + "/" + year + datestr;

        Titanium.API.info('converted value = ' + newdate);

        tf1.setValue(newdate);

    });

    tview.add(datePicker);
    tview.add(toolbar1);

    winDatePicker1.add(tview);

    winDatePicker1.show({
        view : tf1,
        animated : true
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:03:12.023

```
make setVisible(true) or setVisible(false)

show() and hide() will not give proper toggle at some conditions. 
```

# json - Grails 以 JSON 格式发送请求并在控制器中解析它

> ID：13270279
> 
> 赞同：6
> 
> 时间：2012-11-07T12:58:12.243
> 
> 标签：json, grails, request, grails-2.0

我想以 JSON 格式发送一个请求，并且在我的控制器中我想解析这个 JSON 并获取我想要的参数。例如这是请求：

```
{"param1":"val1"} 
```

我想解析这个请求并获得“param1”值。我使用了 request.JSON 但仍然为空。有没有其他方法可以解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:12:49.067

您可以使用以下方法之一来测试您的东西（这两个选项最终都可以重新用作自动化测试 - 单元和集成）：

为您的控制器编写单元测试（无需启动服务器）：

```
void testConsume() {
     request.json = '{param1: "val1"}'
 controller.consume()       
 assert response.text == "val1"
} 
```

假设您的 controller.consume() 执行以下操作：

```
def consume() {
    render request.JSON.param1
} 
```

或者您可以使用 Jersey 客户端对您的控制器进行调用，这次部署：

```
public void testRequest() {
    // init the client
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);

    // create a resource
WebResource service = client.resource(UriBuilder.fromUri("your request url").build());
    // set content type and do a POST, which will accept a text/plain response as well
    service.type(MediaType.APPLICATION_JSON).accept(MediaType.TEXT_PLAIN).put(Foo.class, foo);
} 
```

，其中 foo 是这样的 Foo：

```
@XmlRootElement
public class Foo {
    @XmlElement(name = "param1")
    String param1;

    public Foo(String val){param1 = val;}      
} 
```

以下是有关如何将 Jersey 客户端用于各种 REST 请求的更多示例： [https ://github.com/tavibolog/TodaySoftMag/blob/master/src/test/java/com/todaysoftmag/examples/rest/BookServiceTest.java](https://github.com/tavibolog/TodaySoftMag/blob/master/src/test/java/com/todaysoftmag/examples/rest/BookServiceTest.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T13:08:59.987

像这样在你的 UrlMappings 中设置它：

```
static mappings = {
    "/rest/myAction" (controller: "myController", action: "myAction", parseRequest: true)
} 
```

[在最新的 Grails 指南](http://grails.org/doc/latest/guide/webServices.html)中搜索 parseRequest 。

然后验证它是否与 curl 一起正常工作：

```
curl --data '{"param1":"value1"}' --header "Content-Type: application/json" http://yourhost:8080/rest/myAction 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:37:23.757

在控制器方法中，检查`request.format`. 它应该指定`json`. 我猜它不会在这里，但它可能会为您提供有关如何解释有效负载的线索。

在您的 Config.groovy 文件中，我将设置以下值：

```
grails.mime.file.extensions = false
grails.mime.use.accept.header = false 
```

在同一个文件中，检查您的`grails.mime.types`. 确保它包括 `json: ['application/json', 'text/json']`，它可能会，但把它放在上面`*/*`。这些条目是按顺序评估的（这在 2.1 之前的版本中是正确的，现在还没有验证，但到底是什么）。与此相结合，正如 aiolos 所提到的，将您的`content-type`标题设置为上述 mime 类型之一。

最后，根据 Tomasz Kalkosiński 使用 curl 进行测试，或者，要使用 RESTClient for FF，单击客户端页面最顶部的“标题”（左上角有 4 个可点击的项目；标题是一个。从一个新鲜的RESTClient，您可能必须选择“自定义标题”。我不记得了）

# r - 在 Rstudio 中打开 SHP 文件时出错

> ID：13270286
> 
> 赞同：1
> 
> 时间：2012-11-07T12:58:40.413
> 
> 标签：r, rstudio, maptools

我正在使用 maptools 在 R 中打开 shapefile，但在 Rstudio 中出现以下错误：

```
library(maptools)
basins = readShapeSpatial("H:GIS/shapefiles/basins")
Error in getinfo.shape(fn) : Error opening SHP file 
```

当我在 RGui（而不是 Rstudio）中尝试完全相同的代码时，它可以工作！我想继续使用 Rstudio，因为它非常方便，所以有人知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T00:51:05.080

我无法回答它为什么起作用`Rstudio`，但问题是您的驱动器路径/驱动器名称是非标准的

```
 'H:/GIS/shapefiles/basins' 
```

更标准，并且适用于两者。

# asp.net-mvc - 使用 GZip 面临的问题

> ID：13270288
> 
> 赞同：1
> 
> 时间：2012-11-07T12:58:46.860
> 
> 标签：asp.net-mvc, gzip

我在尝试使用 GZip 时遇到问题。我在我的配置文件中使用了以下条目，即 applicationHost.config 和 web.config

```
<httpCompression>
  <staticTypes>
    <add mimeType="text/*" enabled="true" />        
    <add mimeType="*/*" enabled="false" />
  </staticTypes>
  <dynamicTypes>
    <add mimeType="text/*" enabled="true" />        
    <add mimeType="*/*" enabled="false" />
  </dynamicTypes>
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" dynamicCompressionLevel="4" />
</httpCompression>
<urlCompression doDynamicCompression="true" doStaticCompression="true"/> 
```

我将我的应用程序部署在 IIS 7.5 上。我在网上看到了这些建议，并且碰巧听说我不需要编写专有的流代码。配置文件的条目就足够了。但是当我的 WCF 服务返回一个包含超过 1000 条记录的集合对象时，我仍然收到错误消息。该对象是一个可序列化的对象。请在这个问题上帮助我

# javascript - 如何在 window.load 之前和加载 DOM 之后执行代码？

> ID：13270290
> 
> 赞同：28
> 
> 时间：2012-11-07T12:58:53.827
> 
> 标签：javascript, dom-events

情况如下：我有 2 页：

*   1 个 html 页面

*   1 x 外部 Javascript

现在在 html 页面中，将有内部 Javascript 编码以允许放置`window.onload`和其他页面特定的方法/功能。

`window.onload`但是，在外部 Javascript 中，我希望在触发事件之前完成某些事情。这是为了允许首先初始化自定义组件。

`window.onload`有没有办法确保在触发事件之前在外部 Javascript 中进行初始化 ？

我问这个的原因是试图制作可重用的代码（构建一次 - 全部使用），外部脚本必须在主 html/jsp/asp 中的 Javascript 之前检查它是否处于“顺序/检查”中/PHP 页面接管。而且我也不是在 jQuery @_@ 中寻找解决方案

以下是我浏览过的有关 Stack Overflow 的一些链接以寻求解决方案：

*   [Javascript - 如何检测文档是否已加载（IE 7/Firefox 3）](https://stackoverflow.com/questions/978740/javascript-how-to-detect-if-document-has-loaded-ie-7-firefox-3)

*   [如何检查页面是否已完全加载（脚本和所有）？](https://stackoverflow.com/questions/8448907/how-to-check-if-page-has-fully-loadedscripts-and-all)

*   [当页面完全加载时执行 Javascript](https://stackoverflow.com/questions/1033398/execute-javascript-when-page-has-fully-loaded)

有人可以帮助或指导我找到解决方案，您的帮助将不胜感激。

* * *

[更新回复 - 2012 年 11 月 19 日]

大家好，感谢您的建议和建议的解决方案，它们在搜索和测试可行的解决方案时都很有用。虽然我觉得我对自己的结果不是 100% 满意，但我知道您的建议和帮助使我更接近解决方案，并且确实可能​​会帮助处于类似情况的其他人。

这是我想出的：

test_page.html

```
<html>
<head>
<title></title>
<script type="text/javascript" src="loader.js"></script>
<script type="text/javascript" src="test_script_1.js"></script>
<script type="text/javascript" src="test_script_2.js"></script>
<script type="text/javascript">
window.onload = function() {
    document.getElementById("div_1").innerHTML = "window.onload complete!";
}
</script>

<style type="text/css">
div {
    border:thin solid #000000;
    width:500px;
}
</head>
<body>
    <div id="div_1"></div>

    <br/><br/>

    <div id="div_2"></div>

    <br/><br/>

    <div id="div_3"></div>
</body>
</html> 
```

加载器.js

```
var Loader = {
    methods_arr : [],

    init_Loader : new function() {
        document.onreadystatechange = function(e) {
            if (document.readyState == "complete") {
                for (var i = 0; i < Loader.methods_arr.length; i++) {
                    Loader.method_arr[i]();
                }
            }
        }
    },

    load : function(method) {
        Loader.methods_arr.push(method);
    }
} 
```

test_script_1.js

```
Loader.load(function(){initTestScript1();});

function initTestScript1() {
    document.getElementById("div_1").innerHTML = "Test Script 1 Initialized!";
} 
```

test_script_2.js

```
Loader.load(function(){initTestScript2();});

function initTestScript2() {
    document.getElementById("div_2").innerHTML = "Test Script 2 Initialized!";
} 
```

这将确保在调用`window.onload`事件处理程序之前调用脚本，而且还确保首先呈现文档。

您如何看待这种可能的解决方案？

再次感谢大家的帮助和帮助：D

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T13:07:10.130

基本上，你正在寻找这个：

```
document.onreadystatechange = function(e)
{
    if (document.readyState === 'complete')
    {
        //dom is ready, window.onload fires later
    }
};
window.onload = function(e)
{
    //document.readyState will be complete, it's one of the requirements for the window.onload event to be fired
    //do stuff for when everything is loaded
}; 
```

[有关更多详细信息，请参阅 MDN](https://developer.mozilla.org/en-US/docs/DOM/document.onreadystatechange)。

请记住，这里可能会加载 DOM，但这并不意味着外部 js 文件已加载，因此您*可能*无法访问该脚本中定义的所有函数/对象。如果要检查，则必须使用`window.onload`, 以确保所有外部资源也已加载。

因此，基本上，在您的外部脚本中，您将需要 2 个事件处理程序：一个用于`readystatechange`，它执行您需要在 DOMready 上完成的操作，以及一个 window.onload，根据定义，它将在文档*之后*触发准备好了。（这会检查页面是否已完全加载）。
就像你知道的那样，在 IE<9`window.onload`中会导致内存泄漏（因为 DOM 和 JScript 引擎是两个独立的实体，`window`对象永远不会完全卸载，并且侦听器不会被 GC 处理）。有一种方法可以解决这个问题，[我已经在这里发布了](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)，虽然它很冗长，但你知道......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T13:04:36.873

如果您想在不等待任何事件的情况下立即完成某事，那么您可以在 JavaScript 中完成 - 您无需为您的代码立即运行做任何事情，只是不要做任何会让您的代码等待。所以它实际上比等待事件更容易。

例如，如果您有以下 HTML：

```
<div id=one></div>
<script src="your-script.js"></script>
<div id=two></div> 
```

那么 your-script.js 中的任何代码都将在 id=one 的 div 之后但在 id=two 的 div 被解析之前运行。只是不要注册事件回调，而是立即在 JavaScript 中执行您需要的操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T13:03:19.557

javascript从上到下运行。这意味着.. 如果您在内部 javascript 之前包含外部 javascript，它只会在内部 javascript 运行之前运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-01T20:14:07.250

也可以使用接口的`DOMContentLoaded`事件`Window`。

```
addEventListener("DOMContentLoaded", function() {
    // Your code goes here
}); 
```

上面的代码实际上是在`window`对象中添加了事件监听器，虽然它没有被限定为，`window.addEventListener`因为`window`对象也是网页中 JavaScript 代码的全局范围。

`DOMContentLoaded`发生在之前`load`，当网页的图像和其他部分仍未完全加载时。但是，在初始调用堆栈中添加到 DOM 的所有元素都保证在此事件之前已经添加到它们的父级。

# jquery - 选择输入框时如何淡入：focus？

> ID：13270296
> 
> 赞同：0
> 
> 时间：2012-11-07T12:59:11.277
> 
> 标签：jquery, focus, fadein

我正在尝试解决如何在选择输入框时淡入 :focus 伪选择器。

我尝试了以下方法，但它似乎不起作用。我认为我没有正确设置参数，所以这里欢迎一些帮助。

```
$('input').click(function() {
    $('input').fadeIn('fast', function() {
        $('input').focus();
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:07:32.283

我不知道我是否正确理解了您的问题，但也许这可能是解决方案：

```
jQuery('input').on('focus', function() {
    jQuery(this).fadeIn('fast');
}); 
```

所以会发生什么是你检查你的输入框并在你关注它时添加一个监听器。然后你告诉 jQuery 什么时候框必须淡入。当你想在页面上的所有输入框上这样做时，最安全的方法是这样的：

```
jQuery('input').each(function() {
    jQuery(this).on('focus', function() {
        jQuery(this).fadeIn('fast');
    });
}); 
```

# mysql - MySQL：显示不满足关系的 A.id 和 B.id

> ID：13270301
> 
> 赞同：0
> 
> 时间：2012-11-07T12:59:34.297
> 
> 标签：mysql, join, relational-database

我有以下表格：

```
Table A
id | name
1  | foo
2  | bar

Table B
id | name | default
1  | 123  | 1
2  | 321  | 0
3  | 456  | 1

Table C
A_id | B_id
1    | 2
1    | 3 
```

现在我想获得不在 C 中的 AB 对（条件是这些对具有 B.default = 1）

所以预期的结果是：

```
A_id | B_id
1    | 1
2    | 1
2    | 3 
```

但我对如何加入表 B 完全感到困惑：

```
SELECT A.id, B.id
FROM A

LEFT OUTER JOIN C
ON C.A_id = A.id

LEFT OUTER JOIN B
AND C.B_id = B.id
AND B.default = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:10:16.253

首先生成所有 A 对，然后与 C 进行比较

NOT EXISTS 比 LEFT JOIN 更正确（反半连接）

```
SELECT
    X.A_id, X.B_id
FROM
    (
    SELECT
      A.id AS A_id,
      B.id AS B_id
    FROM
      A CROSS JOIN B
    WHERE
      B.default = 1
    ) X
WHERE
   NOT EXISTS (SELECT *
      FROM
         C
      WHERE
         C.A_id = X.A_id
         AND
         C.B_id = X.B_id) 
```

然而，这给出了这个结果。只有 (1,3) 的 C 元组匹配 4 个 AB 对

```
A_id | B_id
1    | 1
2    | 1
2    | 3 
```

# c# - C# webbrowser 不显示更新的结果

> ID：13270303
> 
> 赞同：3
> 
> 时间：2012-11-07T12:59:42.163
> 
> 标签：c#, browser, ftpwebrequest

我在使用 webbrowser 时遇到问题，或者可能是 ftp。我正在上传一张图片，当我浏览网络浏览器时，它会向我显示旧照片，但我上传的图片会到达 ftp 并被覆盖。这是代码：

```
 webBrowser1.Refresh(WebBrowserRefreshOption.Completely);
        webBrowser1.Navigate("www.google.com");
        openFileDialog1.ShowDialog();
        string filename = Path.GetFullPath(openFileDialog1.FileName);

        FileInfo toUpload = new FileInfo(@"upload.jpg");
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://fingercube.co.cc/public_html/objimg/" + toUpload.Name);
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.Credentials = new NetworkCredential("username", "pass");
        Stream ftpStream = request.GetRequestStream();
        FileStream file = File.OpenRead(filename);
        int lenght = 2;
        byte[] buffer = new byte[lenght];
        int bytesRead = 0;
        do
        {
            bytesRead = file.Read(buffer, 0, lenght);
            ftpStream.Write(buffer, 0, bytesRead);
        }

        while (bytesRead != 0);
        file.Close();
        ftpStream.Close();

       webBrowser1.Navigate("http://fingercube.co.cc/objimg/"+toUpload.Name); 
```

它每次都向我显示旧照片，但每次都上传照片。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:13:51.887

如果缓存建议不起作用，请尝试执行以下操作。

```
this.webBrowser1.Navigate("about:blank");
HtmlDocument doc = this.wbbFinalise.Document;
doc.Write(string.Empty); 
```

然后导航到您的 ftp 位置。

我在尝试在 Web 浏览器中刷新本地生成的 HTTP 页面时遇到了类似的问题，这解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:09:01.280

图像被缓存到 IE 缓存中。您必须在刷新控件之前清除缓存。看看这里：[http ://www.gutgames.com/post/Clearing-the-Cache-of-a-WebBrowser-Control.aspx](http://www.gutgames.com/post/Clearing-the-Cache-of-a-WebBrowser-Control.aspx)

另外，关于 SO 的相关问题：[WebBrowser control caching issue](https://stackoverflow.com/questions/1608543/webbrowser-control-caching-issue)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T13:15:52.577

得到了解决方案..问题在于缓存简单的解决方案是每次都发出新请求。

# google-apps-script - 可以让应用脚本提供从动态电子表格中提取的实时信息吗？

> ID：13270306
> 
> 赞同：0
> 
> 时间：2012-11-07T12:59:48.107
> 
> 标签：google-apps-script

我有一个动态电子表格，每分钟都会提取数据。我有一个应用程序脚本，可以在格式化表格中显示这些数据。我想知道是否有办法让它每分钟左右刷新一次数据？我尝试设置以下内容，并将 resetForm() 链接到触发器......但这不起作用。触发器仅在服务器上运行......而不是客户端。如果我刷新页面，新值就会出现。任何建议将不胜感激！

```
function resetForm(e){
var app = UiApp.getActiveApplication();
app.remove(0);
return createApp(app);
}

function doGet(e){
return createApp(UiApp.createApplication().setTitle('Enterprise Operations Requests'));
}

function createApp(e){

var app = UiApp.getActiveApplication();
//This is where I have the code for the table with dynamic data
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:06:21.880

您可以在 HtmlService 中执行此操作，但不能在 UiApp 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:40:45.213

Google Apps 脚本中没有可用于实现此功能的 onTimer 函数。但是，我在旧论坛 ( [http://productforums.google.com/forum/#!mydiscussions/apps-script/2pqhh_eTIvQ](http://productforums.google.com/forum/#!mydiscussions/apps-script/2pqhh_eTIvQ) ) 中提供了一个复杂的解决方法作为对问题的答复。

请查看我在此处发布的代码，如果您还有其他问题，请告诉我。

# java - 无法从 My Android App 获取数据到 Web 应用程序

> ID：13270307
> 
> 赞同：1
> 
> 时间：2012-11-07T12:59:52.663
> 
> 标签：java, android, web-applications, connection

我以两种方式构建了一个应用程序：

1.  安卓
2.  Web 应用程序（jsp+servlet 内置的动态 Web 项目）。

我的目标是将数据从我的 android 应用程序获取到我托管的 Web 应用程序。

我能够将数据从本地网页发送到托管的 Web 应用程序，并能够从 Android 应用程序（在手机中运行）获取数据到我的本地主机（当我的动态 Web 项目在本地主机上运行时）。

我无法从 Android 应用程序（安装在独立设备中的 .apk 文件）获取数据到我的托管 Web 应用程序。

为什么我无法将数据从 android 应用程序获取到我的托管 Web 应用程序？

# java - 将 java 对象转换为 POJO 样式的 http 参数

> ID：13270308
> 
> 赞同：0
> 
> 时间：2012-11-07T12:59:59.013
> 
> 标签：java, json, playframework, playframework-2.0, pojo

我正在使用 playframework，有没有办法将 java 对象转换为 Play 可识别的 pojo 参数列表？例如我有两节课

```
public class A{
    B b;
    String room;
}
public class B{
    String name;
} 
```

当我得到一个A实例a时，我可以把它改成两个参数

```
a.room=myroom&a.b.name=myname 
```

我是否必须遍历从该实例转换的 json？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:45:13.750

我用jackson.databind编写了一个Util来将Object转换为playframework友好的参数列表

```
public static List<MutablePair> getPojoParam(Object base, Object obj, boolean firstLevel) {
    List<MutablePair> ret = new ArrayList<MutablePair>();
    String realBase = (firstLevel) ? (String) base : ("." + base);

    if (obj instanceof Collection) {
        int count = 0;
        for (Object o : (Collection) obj) {
            List<MutablePair> subPair = getPojoParam(base, o, false);
            for (MutablePair p : subPair) {
                p.left = realBase + "[" + (count++) + "]" + p.left;
                ret.add(p);
            }
        }
    } else if (obj instanceof Map) {
        Map<Object, Object> map = (Map<Object, Object>) obj;
        for (Object k : map.keySet()) {
            List<MutablePair> subPair = getPojoParam(k, map.get(k), false);
            for (MutablePair p : subPair) {
                p.left = realBase + p.left;
                ret.add(p);
            }
        }
    } else {
        ret.add(new MutablePair(realBase, obj));
    }
    return ret;
} 
```

用法：

```
ATest a = new ATest();
ObjectMapper mapper = new ObjectMapper(); 
Map<String, Object> data = mapper.readValue(new Gson().toJson(a), Map.class);
List<MutablePair> ret = ObjectToPOJO.getPojoParam("source", data, true);
for (MutablePair key : ret) {
    System.out.println(key.left + "=" + key.right);
} 
```

我希望它是正确的。

添加依赖项以使用 MutablePair 和 jackson.databind

```
require:
    - com.fasterxml.jackson.core -> jackson-databind 2.1.0
    - org.apache.commons -> commons-lang3 3.1 
```

# c# - 使用 odb.net 从 c# 访问 oracle 数据库

> ID：13270315
> 
> 赞同：1
> 
> 时间：2012-11-07T13:00:31.290
> 
> 标签：c#, visual-studio, oracle11g, odp.net

我正在尝试访问 Oracle 11g 数据库。根据 connectionstring.com ， connstring 应该是：

```
Driver={Oracle in OraClient11g_home1};Dbq=myTNSServiceName;Uid=user;Pwd=passwd; 
```

无论如何我得到一个 ArgumentException: 'Driver' is not a valid word。

谢谢你。

问候

R·巴达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:40:59.603

看起来您正在尝试使用适用于 Oracle ODBC 驱动程序的连接字符串。

[您应该在Oracle Data Provider for .NET / ODP.NET](http://www.connectionstrings.com/oracle#oracle-data-provider-for-net-odp-net)部分中寻找适合 ODP.NET 的连接字符串。最好是使用以下之一：

```
Data Source=TNSServiceName;User Id=user;Password=passwd; 
```

或者

```
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID)));User Id=user;Password=passwd; 
```

第一个适合您使用 TNS 时，第二个允许您在连接字符串中提供服务定义。

# git - git - 从多个分支变基

> ID：13270316
> 
> 赞同：3
> 
> 时间：2012-11-07T13:00:34.307
> 
> 标签：git, branch, rebase

我正在使用 3 个分支，我想同时从另外两个分支中重新设置一个分支。

* * *

我得到了什么

```
git log --graph --decorate --pretty=oneline --abbrev-commit 
```

以下是：

分支 A：

```
* f751d1a (A) commit2
* 4e552f3 (master) commit1 
```

B分公司：

```
* 3770d35 (B) commit3
* 4e552f3 (master) commit1 
```

分支 C，我首先从 A 和 B 重新定位：

```
* 9740b0e (HEAD, C) commit4
* a280f0a commit2                   //same commit name but different sha code
* 3770d35 (B) commit3
* 4e552f3 (master) commit1 
```

* * *

当我表演

```
git checkout C
git rebase A 
```

我得到以下信息：

```
* 2e08816 (HEAD, C) commit4
* bbc77ad commit3                   //different sha-code
* f751d1a (A) commit2
* 4e552f3 (master) commit1 
```

* * *

当我表演

```
git checkout C
git rebase B 
```

我得到以下信息：

```
* bf67d55 (HEAD, C) commit4
* f69ecdd commit2                   //different sha code
* 3770d35 (B) commit3
* 4e552f3 (master) commit1 
```

* * *

但是，我真正需要的是制作 C 分支

```
* 1234567 (HEAD, C) commit4
* 3770d35 (B) commit3
* f751d1a (A) commit2
* 4e552f3 (master) commit1 
```

不改变分支 A 和 B。

我做了一些研究，但不知道该怎么做。**有可能吗，有没有办法做到这一点？**

**换句话说，我该如何转换**

```
master---A
      \
       B---C
or

master---B
      \
       A---C 
```

至

```
 A
      /
master---B
      \
       A---B---C

or something like this. 
```

提前致谢...

## 附加问题：

谢谢你，（@Brian Phillips，@Useless）！合并后，它似乎按我的意愿工作。但是，后来，我在 B 中进行了提交，并`git rebase master -i`使用行进行了“修复”。

```
pick 3770d35 commit3
fixup 3cbf79d commit4 
```

它变成了以下内容`git merge B`：

```
*   5fa9192 (HEAD, C) Merge branch 'B' into C
|\  
| * 147258a (B) commit3 //changed content after fixup
* |   7768962 Merge branch 'B' into C
|\ \  
| * | 3770d35 B commit3
| |/  
* | f751d1a (A) commit2
|/  
* 4e552f3 (master) commit1 
```

也与`git rebase B`，它变成：

```
* 0e1355b (HEAD, C)
* 147258a (B) commit3 //changed content after fixup
* 4e552f3 (master) commit1 
```

有没有办法让它像：

```
*  (HEAD, C) 5454215 Merge branch 'B' into C
|\ 
| * 147258a (B) commit3 //changed content after fixup
| |  
* | f751d1a (A) commit2
|/  
* 4e552f3 (master) commit1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:17:34.777

由于 git 的 SHA1 提交 ID 不仅基于提交的内容，而且还基于这些提交的时间和祖先（除其他外），因此您要求的内容是不可能的。提交 ID 3770d35 不能作为它开始的确切位置以外的任何内容存在（缺少 SHA-1 哈希冲突）。如果对这个主题感兴趣，您可能想阅读更多关于 git 内部的信息（[http://git-scm.com/book/en/Git-Internals-Git-Objects](http://git-scm.com/book/en/Git-Internals-Git-Objects)可能对初学者有好处）。

我会鼓励您不要对提交 ID 赋予如此重要的意义，并更多地考虑提交内容（和排序，如果感兴趣的话）。您在上面列出的第一次尝试（`git checkout C; git rebase A`）似乎在语义上是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:31:30.230

当你变基时，你会创建一个*新*的提交，内容*相同*，但有*新*的元数据（祖先等）。所以，你不能轻易地使用 rebase 来做到这一点。

让我们看看你的目标状态：

```
 2 [A]
          /
1 [master]--- 3 [B]
          \
           2 -- 3 -- 4 [c] 
```

（我重写了它，在分支名称旁边显示您的提交）。这是*不可能*的，因为提交 3 的两个副本具有不同的元数据（它们具有不同的父提交）。

但是，您可以这样做：

```
 2 [A] ----
          /           \
1 [master]--- 3 [B] -- m -- 4 [C] 
```

通过创建一个合并分支 A 和 B 的合并提交 (m)，然后在此基础上重新设置 C。

# android - 给予 Cleartop 后，活动堆栈未清除

> ID：13270320
> 
> 赞同：0
> 
> 时间：2012-11-07T13:00:56.413
> 
> 标签：android, android-activity, activity-stack

我在底部有 4 个按钮。假设 A、B、C、D。这些按钮是我作为小部件创建的，并包含在每个布局中。在每个按钮单击上，我打开一个我在 Common 类中实现的活动。当我的应用程序启动时，A 将处于选中状态，在 AI 下启动一些活动 A1、A2、A3。当我按下 B 时，B 将处于选中状态并开始 B1 活动。我在启动 B1 时设置了 CLEAR_TOP 标志，但是我在 A 下启动的活动没有清除。当我再次单击 A 按钮时，将启动 A1 活动，并清除 A2 和 A3（以前启动的）等所有活动。但是B1，B2没有被清除。为什么会这样。

```
public class TabBar implements OnClickListener{

private Context fContext;
//private Activity fActivity;
private Button btnHome, btnReward, btnProfile, btnFav;

private Activity activity;

//private Button venues,orders,about;

public TabBar(Activity activity, Context context) {
    this.activity = activity;
    btnHome = (Button)activity.findViewById(R.id.btn_tab_home);
    btnReward = (Button)activity.findViewById(R.id.btn_tab_rew);
    btnProfile = (Button)activity.findViewById(R.id.btn_tab_profile);
    btnFav = (Button)activity.findViewById(R.id.btn_tab_fav);
    btnHome.setOnClickListener(this);
    btnReward.setOnClickListener(this);
    btnProfile.setOnClickListener(this);
    btnFav.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    int id = v.getId();
    switch (id) {
    case R.id.btn_tab_home:

            Intent int1 = new Intent(activity, HomeActivity.class);
            int1.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            int1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
            activity.startActivity(int1);
            activity.finish();
            activity.overridePendingTransition(0, 0);

        break;

    case R.id.btn_tab_rew:

            Intent int2 = new Intent(activity, Rewards.class);
            int2.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            int2.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
            activity.startActivity(int2);
            activity.finish();

        break;

    case R.id.btn_tab_profile:

            Intent int3 = new Intent(activity, ProfileActivity.class);
            int3.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            int3.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
            activity.startActivity(int3);
            activity.finish();

        break;

    case R.id.btn_tab_fav:

            Intent int4 = new Intent(activity, FavouritesActivity.class);
            int4.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            int4.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
            activity.startActivity(int4);
            activity.finish();

        break;

    default:
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:03:59.680

注意，清除顶部堆栈，如果某个活动的顶部存在于活动堆栈中，将从活动堆栈中清除所有活动。如果它不存在于活动堆栈中，则它将新活动 B1 推送到活动堆栈上。

在您的情况下，活动 B1 不存在于活动堆栈中，因此它不会从活动堆栈中弹出任何活动，只会在活动堆栈上推送一个新活动 B1。

如果你想实现 TabBar，那么你应该使用 TabFragment 或 TabActivity 。

# c# - 如何将文本放置在pdf中新页面的所需位置？

> ID：13270321
> 
> 赞同：0
> 
> 时间：2012-11-07T13:01:04.713
> 
> 标签：c#, asp.net, pdf, itextsharp

我正在使用 CSharp 和 iTextSharp 创建 pdf。

这是我放置文本的代码：

```
 PdfContentByte cb = writer.DirectContent;
        cb.BeginText();
        cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, width, height, 0);
        cb.EndText(); 
```

在我使用创建新页面之后。

```
 doc.NewPage(); 
```

并尝试将文本放在新页面中，这样不起作用：

```
 cb.BeginText();
        cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, width, height, 0);
        cb.EndText(); 
```

但这是有效的：

```
 ColumnText.ShowTextAligned(cb, Element.ALIGN_LEFT,
        new Phrase(Petrol[i], font), 451 + i * x, 684, 0) 
```

有人可以解释为什么 cb.ShowTextAligned() 不起作用。

谢谢。

# bash - 避免 Bash 循环中的通配符扩展

> ID：13270322
> 
> 赞同：1
> 
> 时间：2012-11-07T13:01:06.070
> 
> 标签：bash, list, shell, for-loop, wildcard

我想使用列表作为 for 循环的参数；但是*使用*双引号时，列表不会被理解为列表，而*没有*引号时，通配符会被评估为文件名。

```
A="a* b*"

for ex in "$A"; do
    echo "$ex";
done

for ex in $A; do
    echo "$ex";
done 
```

第一个打印：

```
a* b* 
```

后者打印：

```
a.txt
b.txt 
```

我想：

```
a*
b* 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:41:40.737

您可以`set -f`禁用路径名扩展：

```
A="a* b*"

( set -f
  for ex in $A ; do
      echo "$ex"
  done
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T13:46:27.903

使用数组：

```
A=("a*" "b*")
for ex in "${A[@]}"; do
    echo "$ex"
done 
```

# sql - 将 DATEPART 用于 AM 可以正常工作，但不适用于 PM 查询

> ID：13270325
> 
> 赞同：0
> 
> 时间：2012-11-07T13:01:10.713
> 
> 标签：sql, sql-server, datepart

我正在使用查询为我们的第三班人员提取报告。

当报告以 0 个结果邮寄时，我刚刚注意到的问题是，我现在将其设置为从下午 6 点运行到第二天早上 5:59。由于我有日期字段 = `GETDATE`，因此它看不到前一天晚上的结果（1800-2359）。我想把这个从-12小时拉出来，但可以随时按下按钮来查看结果。

因此，如果他们在班次结束之前推送它，它将显示一些第一班次条目。我希望它只在第二天早上从 1800-0559 运行，无论是在午夜之前还是在午夜之后按下按钮。我希望这是有道理的。我什至不确定在击中 2359 后中间是否识别到 00。我已将其内置到 VB.net 应用程序中，他们可以随时按下按钮以获得结果。这是为了让管理层跟踪正在做的事情，因为员工需要在问题发生时实时输入数据。

谢谢你的帮助。希望我有足够的意义！:D

```
SELECT 
   Assignment, Datemodified, General, 
   IncNumber, NextSteps, PDCRStatus, 
   RootCause, Status, Summary, 
   Timings, UserID 
FROM 
   Turnover 
WHERE DATEPART(HOUR, datemodified) between 18 and 05 
AND CONVERT(NVARCHAR(50),datemodified,103) = CONVERT(NVARCHAR(50),GETDATE(),103); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T10:52:02.680

我假设您想要从昨天 18:00 开始的所有数据。

```
SELECT 
   Assignment, Datemodified, General, 
   IncNumber, NextSteps, PDCRStatus, 
   RootCause, Status, Summary, 
   Timings, UserID 
FROM 
   Turnover 
WHERE datemodified >= dateadd(HH,-6,convert(datetime,convert(date,GETDATE()))) 
```

我正在使用 getdate 获取当前日期时间并提取日期。将其转换回日期时间时，我有 00:00，所以我用 dateadd 减去 6 小时，因此选择昨天 18:00。但是我不知道这在某些时间应该如何表现。它总是会转到**昨天的 18:00**，这意味着当您在 23:59 开始时，您会看到 29 小时 59 分钟的间隔。在 00:00 开始时，您将看到 6 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:12:23.117

我猜当您检查特定时间范围时，日期会随着时间的推移而变化，即一天的 1800 小时到下一天的 0500 小时。我看到您的查询仅检查时间，但不考虑日期。我想如果你可以一起检查日期和时间，它应该可以工作。到目前为止，我的机器上没有 sql server，否则会帮助您进行示例查询。

干杯，希望它有帮助！

# git - 将现有 Git 存储库与 Perforce 集成 (P4)

> ID：13270326
> 
> 赞同：9
> 
> 时间：2012-11-07T13:01:12.227
> 
> 标签：git, perforce, git-p4

我浏览了网络，但找不到答案。我想做的是以下几点：

1.  我有一个 git 存储库，它已经使用了 1 年多，有很多提交
2.  由于产品化，代码必须移动到 P4 代表中。
3.  但是，代码库（传输后）可能会在 git 和 P4 中发生变化

现在让我们假设 git 中的参考分支是*master*

我所做的是以下内容：

1.  将 git 中的最新代码复制到 P4 并在那里提交
2.  使用 git-p4 sync --branch=refs/remotes/p4/masterp4 //../ 在我现有的存储库中创建一个新分支
3.  git 将*master*合并到*masterp4*
4.  不起作用，因为缺少一个常见的提交
5.  此外，git-p4 submit 无论如何都无法处理合并提交

另一种选择是变基

1.  从 P4 中的空存储库开始
2.  使用 git-p4 sync 在 git 中创建一个空的*masterp4*分支
3.  *将master**重新定位*到masterp4
**   将masterp4*重新设置为**remote/p4/master**   导致数千个 p4 更改列表。*

 *主要问题是主分支和这个 masterp4 分支之间的链接断开。我想知道是否没有更简单的解决方案。不幸的是，我是一个 git n00b。

感谢您的任何想法，

菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:05:33.503

我会创建 1000 次 Perforce 提交，以便保留历史记录。*

# iphone - 如何在单击某些按钮时刷新 UIViewController 视图

> ID：13270328
> 
> 赞同：0
> 
> 时间：2012-11-07T13:01:13.060
> 
> 标签：iphone, objective-c, ios

我正在开发一个 iPhone 应用程序，我的 AppDelegate 中有一个 UINavigationController。我在其他视图上有刷新按钮。按钮在单击按钮时有一个 IBAction 方法。我正在使用此代码

```
 [AppDelegate.navigationController.topViewController.view setNeedsDisplay]; 
```

我的问题是如何在单击这些按钮时刷新我的页面（重新加载），setNeedsDisplay 方法不称为视图生命周期方法，例如。viewDidLoad,viewWillAppear

我这样做是正确的还是有办法做我所做的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:02:07.767

您应该编写一个（或两个，或更多）方法来刷新您需要的数据，而不是重新加载 viewController。这将在您稍后添加功能时避免附带问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:04:27.870

setNeedsDisplay 不会调用视图**控制器**生命周期方法，如 viewDid/Will ... - 您在 UIView 上调用 setNeedsDisplay，而不是在 UIViewController 上。

setNeedsDisplay 触发 UIView 及其子视图的重绘；在视图的 drawRect: 中放置一个断点，按下按钮时会看到它被击中。

# android - 函数在 return 语句中卡住/冻结

> ID：13270329
> 
> 赞同：0
> 
> 时间：2012-11-07T13:01:25.960
> 
> 标签：android, arraylist, return, freeze

我有一个函数应该返回一个数组列表对象，但由于某种原因它卡在了 return 语句中。return 语句之前的一切都在工作。我有一个错误，其中 ArrayLists 只包含一个使函数工作的值，但当然返回错误的数据。

```
package com.burninglobster.TP;

import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;

public class Chart2Activity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    Object graphdata[] = graphsetup();
            Log.d("This message is NOT shown", "");

    List<Double> distances = (List<Double>) graphdata[0];
    List<Double> accall = (List<Double>) graphdata[1];
    List<Double> accdir = (List<Double>) graphdata[2];
    List<Double> accdist = (List<Double>) graphdata[3];
    List<Double> meandir = (List<Double>) graphdata[4];
    List<Double> meandist = (List<Double>) graphdata[5];
    linegraph lgraph = new linegraph();

    setContentView(R.layout.splot);

    LinearLayout layout1 = (LinearLayout) findViewById(R.id.splot2);
    layout1.addView(lgraph.getView1(this, distances, accall));

    LinearLayout layout2 = (LinearLayout) findViewById(R.id.splot3);
    layout2.addView(lgraph.getView2(this, distances, accdir, meandir));

    LinearLayout layout3 = (LinearLayout) findViewById(R.id.splot4);
    layout3.addView(lgraph.getView2(this, distances, accdist, meandist));
}

public Object[] graphsetup() {

    SharedPreferences rprefs;
    rprefs = getSharedPreferences("com.burninglobster.TP.tprefs",
            Context.MODE_WORLD_READABLE);
    double setdist = rprefs.getFloat("setdist", 0);

    String[] sourcesarray = rprefs.getString("sourcesarray", "Standarddef")
            .split(",");
    String setdisc = sourcesarray[rprefs.getInt("spindiscpos", 0)];
    DBHelper dbHelper = new DBHelper(Chart2Activity.this);
    SQLiteDatabase db;
    db = dbHelper.getReadableDatabase();
    String graphquery = "SELECT " + DBHelper.SHOOTER + "," + DBHelper.WDIR
            + "," + DBHelper.WSTR + "," + DBHelper.SMOD + ","
            + DBHelper.DIST + "," + DBHelper.R_DIST + ","
            + DBHelper.OS_DIST + " FROM " + DBHelper.TABLE + " WHERE "
            + DBHelper.SHOOTER + "='" + setdisc + "'" + " ORDER BY "
            + DBHelper.DIST;
    Cursor graphcursor = db.rawQuery(graphquery, null);
    int rows = graphcursor.getCount();

    int ishooter = graphcursor.getColumnIndex(DBHelper.SHOOTER);
    int iwdir = graphcursor.getColumnIndex(DBHelper.WDIR);
    int iwstr = graphcursor.getColumnIndex(DBHelper.WSTR);
    int ismod = graphcursor.getColumnIndex(DBHelper.SMOD);
    int idist = graphcursor.getColumnIndex(DBHelper.DIST);
    int irdist = graphcursor.getColumnIndex(DBHelper.R_DIST);
    int iosdist = graphcursor.getColumnIndex(DBHelper.OS_DIST);

    List<Double> accall = new ArrayList<Double>();
    List<Double> accdir = new ArrayList<Double>();
    List<Double> meandir = new ArrayList<Double>();
    List<Double> accdist = new ArrayList<Double>();
    List<Double> meandist = new ArrayList<Double>();
    List<Double> accdirtemp = new ArrayList<Double>();
    List<Double> accdisttemp = new ArrayList<Double>();
    List<Double> distances = new ArrayList<Double>();

    double dalla = 0;
    double ddira = 0;
    double ddista = 0;
    double ddirm = 0;
    double ddistm = 0;
    double currentdist = 0;

    graphcursor.moveToFirst();
    if (rows > 0) {
        currentdist = graphcursor.getDouble(idist);
    }

    for (int i = 0; i < rows; i++) {
                    // REMOVED ERROR CAUSING SINGLE VALUE IN ARRAYLISTS:
                    // currentdist=graphcursor.getDouble(idist);
        if (graphcursor.getDouble(idist) < (currentdist + 5)) {

            accdirtemp.add(graphcursor.getDouble(irdist));
            accdisttemp.add(graphcursor.getDouble(iosdist));

        } else {

            for (int u = 0; u < accdirtemp.size(); u++) {

                ddira += Math.pow(accdirtemp.get(u), 2);
                ddista += Math.pow(accdisttemp.get(u), 2);
                dalla += Math.pow(accdirtemp.get(u), 2)
                        + Math.pow(accdisttemp.get(u), 2);
                ddirm += accdirtemp.get(u);
                ddistm += accdisttemp.get(u);

            }

            accall.add(Math.sqrt(dalla / accdirtemp.size()));
                    Double.toString(Math.sqrt(dalla / accdirtemp.size())));
            accdir.add(Math.sqrt(ddira / accdirtemp.size()));
            accdist.add(Math.sqrt(ddista / accdirtemp.size()));
            meandir.add(ddirm / accdirtemp.size());
            meandist.add(ddistm / accdirtemp.size());
            distances.add(currentdist);
            dalla = 0;
            ddira = 0;
            ddirm = 0;
            ddista = 0;
            ddistm = 0;

            currentdist = graphcursor.getDouble(idist) + 5;
            accdirtemp.clear();
            accdisttemp.clear();
            accdirtemp.add(graphcursor.getDouble(irdist));
            accdisttemp.add(graphcursor.getDouble(iosdist));

        }

        graphcursor.moveToNext();
    }

    for (int u = 0; u < accdirtemp.size(); u++) {

        ddira += Math.pow(accdirtemp.get(u), 2);
        ddista += Math.pow(accdisttemp.get(u), 2);
        dalla += Math.pow(accdirtemp.get(u), 2)
                + Math.pow(accdisttemp.get(u), 2);
        ddirm += accdirtemp.get(u);
        ddistm += accdisttemp.get(u);

    }

    accall.add(Math.sqrt(dalla / accdirtemp.size()));
    accdir.add(Math.sqrt(ddira / accdirtemp.size()));
    accdist.add(Math.sqrt(ddista / accdirtemp.size()));
    meandir.add(ddirm / accdirtemp.size());
    meandist.add(ddistm / accdirtemp.size());
    distances.add(currentdist);

    db.close();
    dbHelper.close();

            Log.d("This message", " is shown");
    return new Object[] { distances, accall, accdir, accdist, meandir,
            meandist };

}

} 
```

我有一个类似的功能可以正常工作，但我看不出有什么区别：

```
package com.burninglobster.TP;

import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;

public class ChartActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    Object plotdata[] = plotsetup();
            Log.d("This message", " is also shown");

    List<Double> rd1 = (List<Double>) plotdata[0];
    List<Double> osd1 = (List<Double>) plotdata[1];
    List<Double> rd2 = (List<Double>) plotdata[2];
    List<Double> osd2 = (List<Double>) plotdata[3];
    List<Double> rd3 = (List<Double>) plotdata[4];
    List<Double> osd3 = (List<Double>) plotdata[5];
    scatterplot plot = new scatterplot();
    setContentView(R.layout.tplot);
    LinearLayout layout = (LinearLayout) findViewById(R.id.chart);
    layout.addView(plot.getView(this, rd1, osd1, rd2, osd2, rd3, osd3));
}

public Object[] plotsetup() {

    SharedPreferences rprefs;
    rprefs = getSharedPreferences("com.burninglobster.TP.tprefs",
            Context.MODE_WORLD_READABLE);

    double setdist = rprefs.getFloat("setdist", 0);
    String[] sourcesarray = rprefs.getString("sourcesarray", "Standarddef")
            .split(",");
    String setdisc = sourcesarray[rprefs.getInt("spindiscpos", 0)];

    DBHelper dbHelper = new DBHelper(ChartActivity.this);
    SQLiteDatabase db;
    db = dbHelper.getReadableDatabase();

    String plotquery = "SELECT " + DBHelper.SHOOTER + "," + DBHelper.WDIR
            + "," + DBHelper.WSTR + "," + DBHelper.SMOD + ","
            + DBHelper.DIST + "," + DBHelper.R_DIST + ","
            + DBHelper.OS_DIST + " FROM " + DBHelper.TABLE;
    Cursor plotcursor = db.rawQuery(plotquery, null);
    int ishooter = plotcursor.getColumnIndex(DBHelper.SHOOTER);
    int iwdir = plotcursor.getColumnIndex(DBHelper.WDIR);
    int iwstr = plotcursor.getColumnIndex(DBHelper.WSTR);
    int ismod = plotcursor.getColumnIndex(DBHelper.SMOD);
    int idist = plotcursor.getColumnIndex(DBHelper.DIST);
    int irdist = plotcursor.getColumnIndex(DBHelper.R_DIST);
    int iosdist = plotcursor.getColumnIndex(DBHelper.OS_DIST);

    int rows = plotcursor.getCount();

    List<Double> rd1 = new ArrayList<Double>();
    List<Double> osd1 = new ArrayList<Double>();
    List<Double> rd2 = new ArrayList<Double>();
    List<Double> osd2 = new ArrayList<Double>();
    List<Double> rd3 = new ArrayList<Double>();
    List<Double> osd3 = new ArrayList<Double>();

    plotcursor.moveToFirst();
    int disccount = 0;
    int array1 = 0;
    int array2 = 0;
    int array3 = 0;
    double cursordist;

    for (int i = 0; i < rows; i++) {
        if (plotcursor.getString(0).equals(setdisc)) {
            cursordist = plotcursor.getDouble(idist);
            if (cursordist > (setdist - 5) && cursordist < (setdist + 5)) {
                rd1.add(plotcursor.getDouble(irdist));
                osd1.add(plotcursor.getDouble(iosdist));
                array1++;
            } else if (cursordist > (setdist)
                    && cursordist < (setdist + 10)) {
                rd2.add(plotcursor.getDouble(irdist));
                osd2.add(plotcursor.getDouble(iosdist));
                array2++;
            } else if (cursordist > (setdist - 10)
                    && cursordist < (setdist)) {
                rd3.add(plotcursor.getDouble(irdist));
                osd3.add(plotcursor.getDouble(iosdist));
                array3++;
            }
            disccount++;
        }
        plotcursor.moveToNext();
    }
    db.close();
    dbHelper.close();

            Log.d("This message", " is shown");
    return new Object[] { rd1, osd1, rd2, osd2, rd3, osd3 };
}
} 
```

我在 return 语句之前添加了一个“Log.d”，然后在活动中的函数调用之后添加了另一个，并且只显示了第一个。它冻结 ½-1 分钟，然后显示等待或终止的对话。我不知道如何获得有关该问题的更多信息。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:12:59.660

好的，所以我觉得发布这个并浪费编码人员的时间很愚蠢！

我的问题将在其他地方找到。真正的问题是，我使用 Log.d 错误。如果文本字符串为空，似乎它没有被发送到日志： `Log.d("This return","something")`; `Log.d("This returns nothing","")`:S[日志.d](/questions/tagged/log.d "显示标记为“log.d”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:26:47.113

不知道问题出在哪里，您将不得不解释“卡在退货声明中”。代码不会简单地“卡住”。

但是你会帮助自己解决很多问题。

例如，如果您创建了一个类并处理该类的实例而不是无类型的对象数组，那么您的代码将更容易编写、更容易调试和更容易维护。这样做还可以使编译器在您需要寻求帮助之前捕获很多错误:)

每当你想使用“对象”时，你应该停下来问问自己。当然，有时 Object 很有用，有时您别无选择，但它们是例外的，应该有充分的理由这样做 - 不是因为您没有花时间思考正确的解决方案。

您还应该为变量选择更好的名称并使用正确的 Java 命名约定。在这里，我将对象命名为 Thing 是因为您的代码没有提供适当的线索来说明 dalla、ddira、ddista 等是什么以及它们在注释或代码中如何相互关联（这是一件坏事——这段代码可能只有你见过，但当你一年后回来时，你会希望你做过这些事情）。

例如：

```
class Thing{

    double dalla = 0;
    double ddira = 0;
    double ddista = 0;
    double ddirm = 0;
    double ddistm = 0;
    double currentdist = 0;

} 
```

然后，在您的循环或方法或其他任何内容中，

```
ArrayList<Thing> things = new ArrayList<Thing>();

...

Thing thing = new Thing();
for (int u = 0; u < accdirtemp.size(); u++) {

    thing.ddira += Math.pow(accdirtemp.get(u), 2);
    thing.ddista += Math.pow(accdisttemp.get(u), 2);
    thing.dalla += Math.pow(accdirtemp.get(u), 2)
            + Math.pow(accdisttemp.get(u), 2);
    thing.ddirm += accdirtemp.get(u);
    thing.ddistm += accdisttemp.get(u);
}

things.add(thing);

... 
```

等等。现在花点时间重构您的代码，以免它变得更加难以阅读。

# sql-server - 报表生成器/SSRS 和 RDL - HTML支持？

> ID：13270332
> 
> 赞同：4
> 
> 时间：2012-11-07T13:01:41.820
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008

我对 SSRS 完全陌生，如果这是一个愚蠢的问题，我深表歉意。我有一个带有 HTML 占位符的 RDL，但是如果我`<img>`在数据集中传递一个标签，这不会呈现。

我在[这篇 Technet](http://technet.microsoft.com/en-us/library/ff519562.aspx)文章中看到有一个受支持标签的列表，遗憾的是不包括`<img>`. 我已经能够基于使用数据集字段的表达式添加具有外部源的图像，因此您不能在 HTML 占位符中使用图像似乎有点奇怪。有解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:12:32.167

解决方法正是您所暗示的：将图像添加到报告中，并根据您的数据集设置其源。这些图像可以在 tablix 中，因此对每个组或数据元素重复。

我不认为文本占位符是完整的“HTML 占位符”。它们是真正的文本占位符，您可以在其中选择遵守 HTML 文本格式代码。不支持表格和嵌入图像等布局。

SSRS 旨在将图像作为背景图像或与 Image 对象一起处理。

如果您确实需要文本中的内嵌图像，那么我会查看 SSRS 以外的其他内容或调查一些客户端 JavaScript 黑客行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T10:58:18.087

请投票支持开箱即用的支持！

[https://connect.microsoft.com/SQLServer/feedback/details/786595/adding-image-and-table-as-html-tags-in-placeholder-of-ssrs-reports](https://connect.microsoft.com/SQLServer/feedback/details/786595/adding-image-and-table-as-html-tags-in-placeholder-of-ssrs-reports)

[https://connect.microsoft.com/SQLServer/feedback/details/3113483](https://connect.microsoft.com/SQLServer/feedback/details/3113483)

# iphone - 通过 iOS 发送邮件

> ID：13270338
> 
> 赞同：0
> 
> 时间：2012-11-07T13:02:13.383
> 
> 标签：iphone, objective-c, ipad

我想在我的应用程序中发送一封带有 .PHP 文件作为附件的邮件：

```
if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
    mailViewController.mailComposeDelegate = self;
    [mailViewController setSubject:@""];
    [mailViewController setMessageBody:@"" isHTML:NO];
    mailViewController.navigationBar.tintColor = [UIColor blackColor];
    NSData *myData = [NSData dataWithContentsOfFile:[self getScriptPath]];
    NSString *fileName = @"upload.php";
    [mailViewController addAttachmentData:myData mimeType:@"text/html" fileName:fileName];
    [self presentViewController:mailViewController animated:YES completion:nil];
    [mailViewController release];
}
else 
    NSLog(@"Device is unable to send email in its current state."); 
```

正在发送邮件，但没有附件！...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:08:56.940

我敢打赌，您的`[self getScriptPath]`方法返回无效路径或不存在文件的路径，因此`[NSData dataWithContentsOfFile:...]`可能会返回`nil`.

您应该使用断点或 NSLog 来检查返回的值`getScriptPath`并相应地修复它。

例如，如果您将`"upload.php"`文件嵌入到您的应用程序中（您将它添加到您的 Xcode 项目中，以及您的应用程序的其他资源中），您应该使用它来获取脚本文件在您的包中的有效路径：

```
-(NSString*)getScriptPath
{
    return [[NSBundle mainBundle] pathForResource:@"upload" ofType:@"php"];
} 
```

有关更多信息，请参阅[Bundle Programming Guide](https://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFBundles/AccessingaBundlesContents/AccessingaBundlesContents.html#//apple_ref/doc/uid/10000123i-CH104-SW8)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:05:49.003

使用此代码附加图像文件。

```
UIImage *emailImage = [UIImage imageNamed:@"loveCoding.png"];
[mailViewController addAttachmentData:UIImageJPEGRepresentation(emailImage, 1) mimeType:@"image/png" fileName:@"loveCocoa.png"]; 
```

附加文件

```
 NSString *fileName = [NSString stringWithFormat:@"Documents/%@.txt",sGame.userName];
    NSString *fullFilePath = [NSHomeDirectory() stringByAppendingPathComponent:fileName];

    NSString *emailFileName = [NSString stringWithFormat:@"%@_Report.txt",sGame.userName];

    NSData *myData = [NSData dataWithContentsOfFile:fullFilePath];

    [email addAttachmentData:myData mimeType:@"text/plain" fileName:emailFileName]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:07:02.717

看起来您的 NSData 没有正确加载。从 getScriptPath 检查您的路径

# oop - ddd：实体或VO

> ID：13270345
> 
> 赞同：3
> 
> 时间：2012-11-07T13:02:39.107
> 
> 标签：oop, design-patterns, domain-driven-design

假设我有一个`Passenger`应该包含`Passport`(government id) 对象的对象。我`Passenger`从`PassengerRepository`. `PassengerRepository`创建对服务器的请求并获取数据（json），而不是解析接收到的数据并存储在存储库中。

我很困惑，因为我想存储`Passport`为实体并将其放入，`PassportRepository`但所有关于密码的信息都包含在 json 中，而不是我在上面收到的。

我想我应该将`Passport`其用作 VO 并将其放入`Passenger`（聚合）对象中。或者我可以创建一个`PassengerService`包含`PassengerRepository`和`PassportRepository`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:08:42.873

值对象是由它们的属性定义的对象——具有相同属性值的两个实例本质上是相同的值。如果这对您的`Passport`类型是正确的，那么它应该是 VO。

如果它确实是一个 VO，那么你就被排序了——它只能通过聚合来访问。

但是，如果情况并非如此，并且您域中的护照具有无论属性更改如何都保持不变的身份（例如，有人更改了他们的名字），那么您需要考虑是否在您的域中只做`Passport`实体附加到`Person`或不附加时有意义。如果它们只在这种情况下有意义，那么它们也应该只能通过聚合来访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:09:40.680

我会说护照是VO。一个人可以更换她的护照，这意味着签发了新护照（新系列）。我认为 Passport 只是政府的实体，因为它需要跟踪每个独特的实体。对于我们其他人来说，我们不在乎新护照是否与旧护照具有相同的身份证件。我们关心拥有有效的护照。

# eclipse - Lua os.execute() 不起作用

> ID：13270346
> 
> 赞同：2
> 
> 时间：2012-11-07T13:02:38.340
> 
> 标签：eclipse, lua, command-prompt

Lua os.execute() 命令有问题。

我只想回显一个单词并将其写入文件，例如`echo 'aword' > C:\folder\tempworkspace\foo`尝试 os.execute() 命令。目录 C:\folder\tempworkspace 存在，“foo”是我希望命令创建并填充“aword”的文件的名称。稍后，当它起作用时，我想调用 R，使用`R -q -e "rbinom(1000,1,0.7)" > C:\folder\tempworkspace\foo`.

我已经尝试过 [Lua 编程中提供的所有建议 - os.execute() 在 Windows 中不起作用](https://stackoverflow.com/questions/5007266/lua-programming-os-execute-is-not-working-in-windows)，[为什么 Program Files 中的应用程序不能在 lua 中使用 os.execute 运行？](https://stackoverflow.com/questions/3587788/why-wont-applications-in-program-files-run-using-os-execute-in-lua) 但我的问题似乎是另一个问题，甚至可能不在语法上，而是在其他地方？

当我直接在命令提示符中键入这些命令时，它们就起作用了。我使用 Windows 7 Professional 作为管理员，使用 Lua 5.1.4 和 Eclipse。

这是我到目前为止所尝试的：

```
os.execute("echo 'hehe' > C:\folder\tempworkspace\foo")
os.execute [["echo 'hehe' > C:\folder\tempworkspace\foo"]]
os.execute [["echo 'hehe' > 'C:\folder\tempworkspace\foo'"]]
os.execute [[echo 'hehe' > C:\folder\tempworkspace\foo]]
os.execute [[echo 'hehe' > C:\\folder\\tempworkspace\\foo]]
os.execute[[cmd.exe /c echo 'hehe' > C:\folder\tempworkspace\foo]]
os.execute("cmd.exe /c echo 'hehe' > C:\\folder\\tempworkspace\\foo")
os.execute("cmd.exe /c echo 'hehe' > 'C:\\folder\\tempworkspace\\foo'") 
```

对于改进我的代码的任何建议，我将不胜感激。（注意：我正在写入一个文件，因为我想稍后在 lua 中使用输出。另一种方法是使用 io.popen() 已在某处提出，但据说它依赖于平台，无论如何我的当我尝试使用时 Lua 崩溃`x = io.popen("R -q -e 'rnorm(10)'")`）。

编辑，在第一个答案后：

您的 sendMsg 功能不知何故在我的计算机上也不起作用，而且我没有收到任何错误，我真的想知道是什么问题。对于 pcall，我这样做对吗？由于该行`print(err)`没有打印任何内容，我想知道我是否做得正确。

```
function sendMsg(cmd, msg, fpath)
  local output = cmd.. " ".. msg.. " > ".. fpath
  print(output)
  os.execute(output)
end
function sendMsgArgs()
  sendMsg("echo", "huhu", "C:\\merret\\tempworkspace\\foo");
end
err = pcall(sendMsgArgs) 
if err == true then
  print("THIS WORKED")
else
  print("THIS DID NOT WORK")
  print(err)
end 
```

编辑：这实际上是一个 Eclipse/编辑器问题。所以想加一些标签，比如lua-eclipse，但是不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:20:02.623

已经有一段时间了，但最后（感谢一位同事），我发现问题不在于 Lua 代码，而实际上是从 Eclipse 执行 Lua（我使用的是 Lua Eclipse 插件）。

使用代码执行 lua 文件

```
x = os.execute('R -q -e rnorm(10) > C:/folder/something/foo') 
print(x) 
```

从命令提示符或使用 Crimson 编辑器（见下文），它运行良好，并返回状态代码 0（而不是从 Eclipse 执行时的 -1）。

无论如何，非常感谢所有帮助者！那个东西

PS：对于任何感兴趣的人，我使用 Lua 作为 TerraME 环境的一部分，[http://www.terrame.org/doku.php](http://www.terrame.org/doku.php)。那里还有如何使用 Crimson Editor 的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:18:43.443

如果您尝试写入的路径包含空格，则在 Windows 下必须用双引号括起来；单引号会抛出错误。

因此，以下对我来说很好：

```
os.execute([[ echo test > "C:\\Program Files\\xyz.txt" ]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:38:06.530

这段代码适用于我的 Win7 机器：

```
function sendMsg(cmd, msg, fpath)
    local output = cmd.. " ".. msg.. " > ".. fpath
    print(output)
    os.execute(output)
end

sendMsg("echo", "hehe", "C:\\path\\to\\foo"); 
```

在尝试写入文件之前，您需要确保该文件存在。你是从 lua 解释器运行这个吗？当写入失败时，您是否收到任何错误消息？

或者-您可以使用 io.open() 并以这种方式编写。如果您有某种窗口问题打开/读取该位置，则将其包装在一个函数中并使用 pcall() 调用它可能会为您提供更多信息。

```
local fout = io.open("C:\\path\\to\\foo", "w+")
fout:write("hehe")
fout:close() 
```

使用 pcall 的示例：

```
local result, error = pcall(sendMsg, "echo", "huhu", "C:\\merret\\tempworkspace\\foo")
if result == false then
    print(error)
else
    print("success!")
end 
```

# java - BigInteger divide() 方法不起作用？

> ID：13270348
> 
> 赞同：0
> 
> 时间：2012-11-07T13:02:46.470
> 
> 标签：java, biginteger

我正在划分 2 个`BigInteger`值

```
 N = 94400567826854724487909837398348327858277687772498043028143080274141357168982328449151039212940544180753206250882172215623025263699414679367833398858755440423828380162368132951103946930488990027827989933432181959968836035369641054955336867327681756681532771354933952141599581827698618739724580124555641633861

 e = 44598251142417535121365176389097472886004547620498587196637028250785621416609954924107228171779826812564450558386070863338405090708203920066925426522584172770629487602232360693706521107911895310319989921169318202224097739016252544913819802671755649536088117809831381940146419602124919706024152810967126830967 
```

我正在使用此代码执行此操作

```
System.out.println(e.divide(N)); 
```

它打印出 0。divide 方法有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T13:04:20.493

您的`e`值小于您的`N`值，并且您正在执行整数运算，因此您将获得 0 值。

如果您想要非整数除法，请`BigDecimal`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:06:15.760

您正在将数字 x 划分为大约 2x 的数字。这意味着结果将介于 0 和 1 之间。由于它是 Big **Integer**，因此结果将是 Big **Integer**，即 0。

如果您想要十进制值，请`BigDecimal`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:05:53.590

您可能以错误的顺序划分它们，这对我有用：

```
new BigInteger("94400567826854724487909837398348327858277687772498043028143080274141357168982328449151039212940544180753206250882172215623025263699414679367833398858755440423828380162368132951103946930488990027827989933432181959968836035369641054955336867327681756681532771354933952141599581827698618739724580124555641633861")
       .divide(new BigInteger("44598251142417535121365176389097472886004547620498587196637028250785621416609954924107228171779826812564450558386070863338405090708203920066925426522584172770629487602232360693706521107911895310319989921169318202224097739016252544913819802671755649536088117809831381940146419602124919706024152810967126830967")) 
```

并产生... `2`（四舍五入 9/4，因为`BigInteger`仅用于整数值）。

# asp.net - 如何处理断开连接的对象图中的重复项？

> ID：13270349
> 
> 赞同：2
> 
> 时间：2012-11-07T13:02:47.670
> 
> 标签：asp.net, entity-framework-4, save, poco, object-graph

我在 ASP.NET 应用程序中更新断开连接的 POCO 模型时遇到问题。

假设我们有以下模型：

1.  用户
2.  区
3.  订单

一个用户可以负责0个或多个区，一个订单属于一个区，一个用户可以是一个订单的所有者。

当用户登录时，加载相关的分区。稍后用户加载订单，并将自己设置为订单的所有者。用户（和相关地区）和订单（和相关地区）在两个不同的调用中加载，具有两个不同的 dbcontexts。当我在用户将自己分配给订单后保存订单时。我得到一个例外，说 acceptchanges 不能继续，因为对象的键值与另一个对象冲突。

这并不奇怪，因为同一个地区既可以出现在用户负责的地区列表中，也可以出现在订单上。

我一直在寻找解决这个问题的方法，但我找到的答案似乎是：

1.  在我的情况下，不要加载对象之一的相关实体，这将是用户的区域。
2.  不要使用对象将用户分配给订单，只需在订单对象上设置外键 id。
3.  使用 nHibernate，因为它显然可以处理它。

我尝试了 1 并且可行，但我觉得这是错误的，因为我要么必须在将其与订单相关联之前加载没有其区域的用户，要么进行浅层克隆。这对于这里的这个简单案例来说很好，但问题是在我的案例中，区域可能会在图表中出现多次。而且这似乎毫无意义，因为我有对象，所以为什么不让我连接它们并更新图表。我需要订单的整个图表的原因是我需要向用户显示所有信息。所以既然我得到了所有的对象，为什么我需要重新加载或浅克隆它才能让它工作？

我尝试使用 STE，但遇到了同样的问题，因为我无法将对象附加到由另一个上下文加载的图形。所以我回到了广场1。

我认为这是除了教程代码之外的任何常见问题。然而，我似乎找不到任何好的解决方案。这让我觉得要么我在任何情况下都不理解使用 POCO/EF，要么我很讨厌使用谷歌来找到这个问题的答案。

我已经从 Julia Lerman 的 O'Reilly 购买了两本“Programming Entity Framework”书籍，但似乎也无法在这些书中找到任何解决我问题的方法。

有没有人可以阐明如何处理某些对象可能重复且不一定从同一上下文加载的图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:00:09.103

EF 不允许将具有相同密钥的两个实体附加到上下文的原因是 EF 无法知道哪个实体是“有效的”。例如：您`District`的对象图中可能有两个对象，都带有一个 key `Id = 1`，但两者具有不同的`Name`属性值。哪一项代表必须保存到数据库中的数据？

现在，您可以说如果两个对象都没有更改也没关系，您只想将它​​们附加到 state 中的上下文`Unchanged`，也许是为了建立与另一个实体的关系。在这种特殊情况下，重复可能不是问题。但我认为，处理对象可能必须决定重复对象是否导致歧义的所有情况和不同状态实在是太复杂了。

无论如何，EF 在对象引用标识和键属性值之间实现了严格的标识映射，只是不允许将多个具有给定键的实体附加到上下文。

我认为这类问题没有通用的解决方案。除了您问题中的解决方案之外，我只能添加一些想法：

*   将 附加`User`到您正在加载订单的上下文中：

    ```
    context.Users.Attach(user); // attaches user AND user.Districts
    var order = context.Orders.Include("Districts")
        .Single(o => o.Id == someOrderId);
    // because the user's Districts are attached, no District with the same key
    // will be loaded again, EF will use the already attached Districts to
    // populate the order.Districts collection, thus avoiding duplicate Districts
    order.Owner = user;
    context.SaveChanges();
    // it should work without exception 
    ```

*   仅将实体附加到您需要的上下文以执行特殊更新：

    ```
    using (var context = new MyContext())
    {
        var order = new Order { Id = order.Id };
        context.Orders.Attach(order);
        var user = new User { Id = user.Id };
        context.Users.Attach(user);

        order.Owner = user;

        context.SaveChanges();
    } 
    ```

    这足以更新`Owner`关系。对于此过程，您不需要整个对象图，您只需要必须为其创建关系的实体的正确主键值。如果您有更多更改要保存或不知道究竟可以更改什么，那么它当然不会那么容易。

*   根本不要将对象图附加到上下文。而是从数据库中加载表示当前存储在数据库中的对象图的新实体。然后使用分离的对象图更新加载的图，并保存应用于加载（=附加）图的更改。[此处](https://stackoverflow.com/a/5540956/270591)显示了此过程的一个示例。它是安全且非常通用的模式（但不是通用的），但对于复杂的对象图可能非常复杂。

*   遍历对象图并将重复的对象替换为唯一的对象，例如仅使用您找到的类型和键的第一个对象。您可以构建一个唯一对象的字典，您可以查找以替换重复项。一个例子是[here](https://stackoverflow.com/a/8419239/270591)。

# vba - 如果列为空而不是第一个单元格，请执行此操作

> ID：13270350
> 
> 赞同：1
> 
> 时间：2012-11-07T13:02:55.020
> 
> 标签：vba, excel, excel-2010

底部的代码检查单元格 (1,b) 是否为空，然后复制到列中并在其上的列中执行文本。但是，我希望它检查 b 列是否为空，而不仅仅是第一个单元格。它应该很简单，但我所做的任何更改都没有奏效。例如我试过：

```
If Excel.WorksheetFunction.CountBlank(Excel.Sheets("TOP LINE").Columns(b)) <> 1048576 Then
b = b+1 
```

代替：

```
If Cells(1, b) <> "" Then b = b + 1 
```

请帮忙！

```
For a = 2 To 60

If Excel.WorksheetFunction.CountBlank(Excel.Sheets("Paste In").Columns(a)) <> 1048576 Then

    Excel.Sheets("Paste In").Columns(a).Copy

    b = Excel.Sheets("TOP LINE").Cells(1, Columns.Count).End(Excel.xlToLeft).column

    Excel.Sheets("TOP LINE").Select

    If Cells(1, b) <> "" Then b = b + 1

        Excel.Sheets("TOP LINE").Columns(b).EntireColumn.Select
        Excel.ActiveSheet.Paste

        Excel.Application.CutCopyMode = False
        Selection.TextToColumns Destination:=Cells(1, b), DataType:=xlDelimited, _
                TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
                Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
                :=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True

End If 
```

下一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:18:49.053

您可以使用 worksheet 函数计算列索引为 a 的列中的非空单元格：

`If Application.WorksheetFunction.CountA(Excel.Sheets("Paste In").Columns(a)) > 0 Then`

您的代码中既有 a 也有 b，请在这两个实例中使用此代码：

第 2 行 ( `If Excel.WorksheetFunction.CountBlank(Excel.Sheets("Paste In").Columns(a)) <> 1048576 Then`) 变为：

`If Application.WorksheetFunction.CountA(Excel.Sheets("Paste In").Columns(a)) > 0 Then`

第 6 行 ( `If Cells(1, b) <> "" Then b = b + 1`) 变为：

`If Application.WorksheetFunction.CountA(Excel.Sheets("TOP LINE").Columns(b)) > 0 Then`

# android - 如何制作启动应用程序

> ID：13270353
> 
> 赞同：2
> 
> 时间：2012-11-07T13:03:09.327
> 
> 标签：android, android-intent, android-emulator

我想制作一个设备策略管理器应用程序，当我启动该应用程序时，它将有两个按钮，一个用于访客用户，一个用于管理员用户，我将为管理员和访客登录设置密码，然后添加密码当我启动我的设备时，它应该向我显示我的主页，询问管理员登录和访客登录，当我点击访客时，它将作为访客密码，当我点击管理员时，它将作为管理员密码，除非我提供任何我的设备不应该进入主屏幕，一旦我提供了正确的密码，它应该进入主屏幕，就像在我的应用程序中一样，我想绑定来自访客登录和管理员登录的某些应用程序的使用，这应该是使能够。

就我而言，当我这样做时，我无法这样做，它只会在提供密码后进入活动，一旦我按下主页按钮，它就会进入主页按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:54:23.930

root 设备并获得超级用户权限，您可以在 adb shell 命令中创建两个用户。sice 操作系统是基于 linux 的，它可能但很困难。可能您需要使用内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:08:20.770

1）首先你应该使用合适的方法来root设备。例如 razorclaw.apk（或适合您设备的）。

2）获取隐藏状态栏的逻辑。前任。

```
process = Runtime.getRuntime().exec(new String[]{"su","-c","service call activity 79 s16 com.android.systemui"});
process.waitFor(); 
```

3) 编写一个广播接收器

```
public class MyBootRecever extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub      
    intent.setClass(context, UserLogin.class);
        context.startActivity(intent);
    }
} 
```

4）在AndroidManifest.xml中配置BroadcastReceiver

```
<receiver android:name="MyBootRecever">
<intent-filter>
<action android:name="android.intent.action.BOOT_COMPLETED" />              
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</receiver> 
```

# matlab - 如何在matlab中编辑单元格数组

> ID：13270356
> 
> 赞同：3
> 
> 时间：2012-11-07T13:03:11.773
> 
> 标签：matlab, cells

我有这个单元格数组，它来自生成杜威 ID 的 mat lab 代码：

```
 POT1 = 

        'a0'      []      []      []
        'a0'    'c0'      []      []
        'a0'    'b0'      []      []
        'a0'    'c1'      []      []
        'a0'    'd0'      []      []
        'a0'    'c0'    'd1'      []
        'a0'    'b0'    'd2'      []
        'a0'    'd0'    'd3'      []
        'a0'    'd0'    'c2'      []
        'a0'    'd0'    'b1'      []
        'a0'    'd0'    'd4'      []
        'a0'    'c1'    'c3'      []
        'a0'    'c1'    'b2'      []
        'a0'    'c1'    'c3'    'd5'
        'a0'    'c1'    'b2'    'd6'
        'a0'    'd0'    'b1'    'd7'
        'a0'    'd0'    'c2'    'd8' 
```

请注意，第 1 列是第 2 列的父项，第 2 列是第 3 列的部分。等等

所以我想构建一个代码，给出每个单元格的全名，如下所示：

POT1 =

```
 a0      []       []          []
  a0    a0.c0      []          []
  a0    a0.b0      []          []
  a0    a0.c1      []          []
  a0    a0.d0      []          []
  a0    a0.c0    a0.c0.d1      []
  a0    a0.b0    a0.b0.d2      []
  a0    a0.d0    a0.d0.d3      []
  a0    a0.d0    a0.d0.c2      []
  a0    a0.d0    a0.d0.b1      []
  .
  .
  .
  . 
```

我构建的代码不完整，并给了我：“索引超出矩阵尺寸”错误：

```
for i=1:length(POT1)
      for j=3:size(POT1,2)
          if ~isempty(POT1{i,j})
          POT1{i,j}=[POT1{i,j-2} POT1{i,j-1} POT1{i,j}];
          end
      end
  end
  POT1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:22:51.407

我认为你在正确的轨道上，但如果你逐列处理它会更容易。这样，您只需为每个条目回看一列：

```
for jj=2:size(POT1,2)
    for ii=1:size(POT1,1)
        if ~isempty(POT1{ii,jj})
            POT1{ii,jj}=[POT1{ii,jj-1} '.' POT1{ii,jj}];
        end
    end
end 
```

顺便说一句：[长度](http://www.mathworks.nl/help/matlab/ref/length.html)返回`Length of vector or largest array dimension`，所以下次，更好地使用`size`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:14:31.023

如果您在空白处有带有“ %Two spaces ”的向量，那将非常容易。

您可以将其转换为矩阵，其余的很简单：

```
[POT1(:,1:2) '.' POT1(:,3:4)] 
```

之后，您可以删除空格并完成。

# mysql - 将多个参数值插入单个列

> ID：13270358
> 
> 赞同：2
> 
> 时间：2012-11-07T13:03:14.443
> 
> 标签：mysql

我在这里使用表单中的参数插入我的数据库。

该表单有 4 个输入字段（current_no、current_street、current_city、current_state）。我已经对其进行了设置，以便客户端可以在网页上显示这些值中的每一个，但他们想要的是能够在单个列中查看这些值。

所以基本上从...

> 当前_否 | 当前街道 | 当前城市 | 当前状态

至...

> | current_no current_street current_city current_state |

我决定在表中添加另一列来存储这个“完整”值，我认为填充它可能很容易，但我认为我在这里遗漏了一些东西：

```
insert into customers(current_address) values (current_no + ' ' + current_street + ' ' + current_city + ' ' + current_state) 
```

虽然这不会给我任何错误，但它只会将`current_no`值插入到列中。

如何将所有值（字符串类型）连接到数据库端的列中？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:05:54.013

尝试使用

```
INSERT INTO customers (current_address)
SELECT
  CONCAT_WS(' ', current_no, current_street, current_city, current_state) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T13:04:55.533

在`mySQL`使用中**[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)**

```
insert into customers(current_address) values 
(
   (CONCAT(current_no,' ',current_street,' ',current_city,' ',current_state)
) 
```

或[**CONCAT_WS()**](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

```
insert into customers(current_address) values 
(
   (CONCAT_WS(' ', current_no,current_street,current_city,current_state)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:11:57.063

其他人提出了建议`CONCAT_WS`，这是正确的。正如您所发现的，SQL 语言的`+`运算符不会连接字符串。

但是，请考虑为此向表中添加新列的计划。具有冗余数据的新列通常不是一个好主意。

如果您已经拥有包含数据的列，我建议您在*读取*表时使用 SELECT 查询来创建连接列。这将利用您已有的数据，而无需在表中放置冗余数据。

```
 SELECT CONCAT_WS(' ', current_no,current_street,current_city,current_state) 
        AS current_address 
```

# android - 如何使用 android sdk 3.0 beta 获得 Facebook 附加权限？

> ID：13270359
> 
> 赞同：4
> 
> 时间：2012-11-07T13:03:15.953
> 
> 标签：android, facebook, permissions, facebook-android-sdk, beta

我正在使用官方 sdk beta 3.0 为 Android 开发一个简单的 Facebook 应用程序。

我想在不使用 LoginButton 的情况下为用户登录（user_likes、user_interests、friends_likes 等）获得额外的权限（如此处所述[https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with -facebook/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)），事实上，我通过方法获得了额外的权限

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        List<String> permission=new ArrayList<String>();
        permission.add("user_birthday");
        permission.add("user_likes");
        permission.add("user_questions");
        permission.add("user_interests");
        permission.add("user_relationships");
        permission.add("user_groups");
        permission.add("user_religion_politics");
        permission.add("friends_birthday");
        permission.add("friends_interests");
        permission.add("friends_likes");
        permission.add("friends_groups");
        permission.add("friends_questions");
        permission.add("friends_relationships");
       // this.openSession();
          this.openSessionForRead(app_id, permission);

    } 
```

实际上，它会打开登录视图，请求获得额外权限。

现在，我会知道如何获得额外的权限，因为当我调用 user.get* *** () 时，它不会显示除基本信息之外的其他方法。

谢谢！

* * *

我得到一个 Null.pointer.exception 使用

> 私有 GraphObject mUser；... // 分配您从调用中获得的用户对象以获取用户的信息
> 
> 字符串宗教 = mUser.getProperty("religion").toString();

这是我的日志：

```
11-08 14:21:47.908: E/AndroidRuntime(1306): FATAL EXCEPTION: main
11-08 14:21:47.908: E/AndroidRuntime(1306): java.lang.NullPointerException
11-08 14:21:47.908: E/AndroidRuntime(1306):     at com.********.*****.Main$1.onCompleted(Main.java:123)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at com.facebook.Request$1.onCompleted(Request.java:248)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at com.facebook.Request$4.run(Request.java:1197)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at android.os.Handler.handleCallback(Handler.java:615)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at android.os.Looper.loop(Looper.java:137)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at java.lang.reflect.Method.invokeNative(Native Method)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at java.lang.reflect.Method.invoke(Method.java:511)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 14:21:47.908: E/AndroidRuntime(1306):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:27:54.017

创建会话后，您可以附加权限。不关闭会话

```
Session.NewPermissionsRequest newPermissionsRequest = new Session
                    .NewPermissionsRequest(this, Arrays.asList("user_groups"));

            session.requestNewReadPermissions(newPermissionsRequest); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-28T17:29:34.450

向 Facebook Android SDK 项目中的 com.facebook.Session.java 类添加一个方法：

```
public static Session openActiveSession(Activity activity, boolean allowLoginUI, StatusCallback callback, List permissions) {
    return openActiveSession(activity, allowLoginUI, new OpenRequest(activity).setCallback(callback).setPermissions(permissions));
}
```

然后，您可以从您的代码中直接调用

```
Session.openActiveSession(LoginActivity.this, true, new Session.StatusCallback() {

    // callback when session changes state
    @Override
    public void call(Session session, SessionState state, Exception exception) {

        if (session.isOpened()) {

            //YOU CALLBACK CODE

        }
    }

}, Arrays.asList("email","OTHER_PERMISSIONS_YOU_WANT_TO_REQUEST"));
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:40:27.630

GraphUser 只有一组有限的公共属性，您可以提取和阅读，例如：生日。要阅读其他内容，例如说宗教，您可以执行以下操作：

```
private GraphObject mUser;
...
// Assign the user object you get from a call to get the user's info

String religion = mUser.getProperty("religion").toString(); 
```

希望这能回答你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:03:03.133

检查 mUser 是否不为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:14:21.747

这是[Graph api explorer](http://developers.facebook.com/tools/explorer/)的链接。您只需选择正确的应用程序并单击创建访问令牌。进入弹出对话框，您可以设置首选权限。

正如您在名为“SessionLoginSample”的原始示例中看到的 - 在您收到 TOKEN 后，您可以调用 JSON 文件结构，该结构可从“ [https://graph.facebook.com/me?access_token=insert_your_real_token&format=json](https://graph.facebook.com/me?access_token=insert_your_real_token&format=json) ”获得

该 json 文件响应用户的私人设置而提供的所有信息。

我希望我有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-26T20:23:31.503

```
 Session.Builder bui = new Builder(this); //should be an activity
    Session session  = bui.build();
    Session.OpenRequest openRequest = new OpenRequest(context);
    List<String> permission=new ArrayList<String>();
        permission.add("user_birthday");
        permission.add("user_likes");
        permission.add("user_questions");
        permission.add("user_interests");
        permission.add("user_relationships");
        permission.add("user_groups");
        permission.add("user_religion_politics");
        permission.add("friends_birthday");
        permission.add("user_location");
        permission.add("friends_likes");
        permission.add("friends_groups");
        permission.add("user_education_history");
        permission.add("friends_relationships");
        permission.add("email");

    openRequest.setPermissions(permission);
    Session.setActiveSession(session);//This will take care of the null pointer
    openRequest.setCallback(this);//the callback
    session.openForRead(openRequest); 
```

**Session.setActiveSession(session);**
是您的代码中缺少的行...（和构建器）

# javascript - 单击页面时，文档上的 keydown 不起作用？

> ID：13270363
> 
> 赞同：-1
> 
> 时间：2012-11-07T13:03:37.950
> 
> 标签：javascript, jquery, document, keydown

我在用

```
$(document).keydown(function (event) {
  alert(event.keyCode);
}); 
```

加载页面时，此功能非常有用..现在，当我单击页面的任何部分，然后当我按下任何键时，此事件不会触发并且警报不会出现..

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:16:45.123

> jsfiddle.net/5cyqC/3 单击此处，然后单击其他任何地方的 Server Error oe... 然后查看

您正在将焦点设置为 iframe 的内容。

这是一个单独的文档，事件不会从它冒泡到父文档中。

如果要从中捕获事件，则需要将事件处理程序绑定到框架中加载的文档。

将适用[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

当同源策略阻止正常通信时，有关跨 iframe 通信的问题，请参阅[此问题。](https://stackoverflow.com/questions/6460200/can-cross-origin-resource-sharing-headers-authorize-x-domain-iframe-access)

请注意，无法仅从一侧解决它，因为这将是一个主要的安全漏洞。（例如，有人可以将银行网站放在一个框架中，然后以银行的形式监听按键事件以窃取密码。）

# ruby-on-rails - 使用 rails 和 ffmpeg 进行实时视频转码（流式上传）

> ID：13270365
> 
> 赞同：3
> 
> 时间：2012-11-07T13:03:44.970
> 
> 标签：ruby-on-rails, file-upload

我正在开发一个 Rails 应用程序，用户可以在其中上传任何格式的视频，并使用 ffmpeg 将其转换为 mp4。我有兴趣减少将文件转换为 mp4 所需的时间。我知道 ffmpeg 可以将流作为输入并对其进行转码。因此，当文件上传时，如果我可以将此流传递给 ffmpeg，它可以在文件上传时转换文件。Transloadt.com 使用 nodejs 和强大的进行这种实时编码。（https://transloadit.com/blog/2010/12/realtime-encoding-over-150x-faster）。我们有什么办法可以使用 rails 来做到这一点？

我正在使用 2.0 版本的[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)上传文件，并且我在 Rails 2.3.5 上。带乘客的 Apache 是我的服务器。无论如何在将文件上传到rails应用程序时将文件传递给ffmpeg？

# codeigniter - 在 config.php 中定义自定义变量并在视图中访问

> ID：13270367
> 
> 赞同：0
> 
> 时间：2012-11-07T13:03:52.100
> 
> 标签：codeigniter, view, config

我在 config.php 中定义了 image_path，现在需要在视图中访问这个变量，就像我们使用 base_url() 一样。

霍斯有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:51:29.577

使用constants.php，这就是它的用途，这是我用于图像路径的constants.php。

```
/*Constant paths*/
define('LOGO_PATH',APPPATH.'assets/images/manulogos/');
define('PROD_IMAGE_PATH',APPPATH.'../assets/images/prod_images/'); 
```

然后你只需在你需要的地方调用常量。

```
$imageName = $this->doUpload($control,PROD_IMAGE_PATH,$image,'all') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:38:28.907

您将需要扩展`url_helper`. 请参阅文档中的[“扩展助手”](http://codeigniter.com/user_guide/general/helpers.html)部分。

简而言之，`MY_url_helper.php`在您的`application/helpers`文件夹中创建一个文件名。（假设`$config['subclass_prefix'] = 'MY_'`，在您的配置文件中。）

添加以下方法。

```
if ( ! function_exists('image_path'))
{
    function image_path() 
    {
        $CI =& get_instance();
        return $CI->config->item('image_path');
    }
} 
```

这应该可以解决问题。

# android - 尝试使用 Calimero Java 库通过 WiFi 连接时出现“android.os.NetworkOnMainThreadException”

> ID：13270372
> 
> 赞同：5
> 
> 时间：2012-11-07T13:04:07.123
> 
> 标签：android, sockets, networking, android-wifi, networkonmainthread

我正在使用一个使用开源 java 库 (Calimero) 的 Android 应用程序。当我尝试通过 WiFi 连接到 KNXnet/IP 路由器时，我的代码出错。

这里是问题代码：

```
private static KNXNetworkLinkIP connect(InetSocketAddress isaLocalEP, InetSocketAddress isaRemoteEP)
  {
    KNXNetworkLinkIP netLinkIp = null;

    int serviceMode = KNXNetworkLinkIP.TUNNEL; // tunnel to IP router
    boolean useNAT = true; // NAT not used for PC true or false , but needed for emulator = true
    KNXMediumSettings tpSettings = new TPSettings(true); // TP1 medium

    try
    {
      // Output the local end point address

      if (m_debugOutput == true)
      {
        System.out.println("..Tunneling, NAT ignored, TP1 medium");

        // Should be the PC's VPN address

        System.out.print("..Local  EP:");
        System.out.println(isaLocalEP.getHostName() + ":" + isaLocalEP.getPort());

        System.out.print("..Remote EP:");
        System.out.println(isaRemoteEP.getHostName() + ":" + isaRemoteEP.getPort());

        System.out.print("..useNAT:");
        System.out.println(useNAT);

        System.out.println();
      }

      netLinkIp = new KNXNetworkLinkIP(serviceMode, isaLocalEP, isaRemoteEP, useNAT, tpSettings);
    }
    catch (KNXLinkClosedException e)
    {
      System.out.println("connect:KNXLinkClosedException = " + e.getMessage());
    }
    catch (KNXFormatException e)
    {
      e.printStackTrace();
      System.out.println("connect:KNXFormatException = " + e.getMessage());
    }
    catch (KNXException e)
    {
       e.printStackTrace();
      System.out.println("connect:KNXException = " + e.getMessage());
    }
    catch (Exception e)
    {
      e.printStackTrace();
      System.out.println("connect:Exception = " + e.getMessage());
    }
    return netLinkIp;

  } // connect(isaLocalEP, isaRemoteEP) 
```

在以下位置引发此错误`KNXException e`：

```
11-07 10:16:32.085: W/System.err(17185): android.os.NetworkOnMainThreadException
11-07 10:16:32.090: W/System.err(17185):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
11-07 10:16:32.090: W/System.err(17185):    at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175)
11-07 10:16:32.090: W/System.err(17185):    at libcore.io.IoBridge.sendto(IoBridge.java:463)
11-07 10:16:32.090: W/System.err(17185):    at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
11-07 10:16:32.090: W/System.err(17185):    at java.net.DatagramSocket.send(DatagramSocket.java:287)
11-07 10:16:32.090: W/System.err(17185):    at tuwien.auto.calimero.knxnetip.ConnectionImpl.connect(ConnectionImpl.java:360)
11-07 10:16:32.090: W/System.err(17185):    at tuwien.auto.calimero.knxnetip.KNXnetIPTunnel.<init>(KNXnetIPTunnel.java:117)
11-07 10:16:32.090: W/System.err(17185):    at tuwien.auto.calimero.link.KNXNetworkLinkIP.<init>(KNXNetworkLinkIP.java:179)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.KNXNetwork.connect(KNXNetwork.java:148)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.KNXNetwork.connect(KNXNetwork.java:121)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.KNXNetwork.tryConnecting(KNXNetwork.java:79)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.HelloKNXNetwork.connect(HelloKNXNetwork.java:67)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.HelloKNXNetwork.onClickActivity(HelloKNXNetwork.java:42)
11-07 10:16:32.090: W/System.err(17185):    at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:16:32.090: W/System.err(17185):    at java.lang.reflect.Method.invoke(Method.java:511)
11-07 10:16:32.095: W/System.err(17185):    at android.view.View$1.onClick(View.java:3111)
11-07 10:16:32.095: W/System.err(17185):    at android.view.View.performClick(View.java:3644)
11-07 10:16:32.095: W/System.err(17185):    at android.view.View$PerformClick.run(View.java:14313)
11-07 10:16:32.095: W/System.err(17185):    at android.os.Handler.handleCallback(Handler.java:605)
11-07 10:16:32.095: W/System.err(17185):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-07 10:16:32.095: W/System.err(17185):    at android.os.Looper.loop(Looper.java:137)
11-07 10:16:32.095: W/System.err(17185):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-07 10:16:32.095: W/System.err(17185):    at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:16:32.095: W/System.err(17185):    at java.lang.reflect.Method.invoke(Method.java:511)
11-07 10:16:32.095: W/System.err(17185):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
11-07 10:16:32.095: W/System.err(17185):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
11-07 10:16:32.095: W/System.err(17185):    at dalvik.system.NativeStart.main(Native Method) 
```

ConnectionImpl.java 的第 360 行是`socket.send(p);`

从这个方法：

```
protected void connect(InetSocketAddress localEP, InetSocketAddress serverCtrlEP,
        CRI cri, boolean useNAT) throws KNXException
    {
        ctrlEP = serverCtrlEP;
        isNatAware = useNAT;
        logger = LogManager.getManager().getLogService(getName());
        try {
            // if we allow localEP to be null, we would create an unbound socket
            if (localEP == null)
                throw new KNXIllegalArgumentException("no local endpoint specified");
            logger.info("establish link from " + localEP + " to " + ctrlEP);
            socket = new DatagramSocket(localEP);
            // HPAI throws if wildcard local address (0.0.0.0) is supplied
            final HPAI hpai =
                new HPAI(HPAI.IPV4_UDP, isNatAware ? null : (InetSocketAddress) socket
                    .getLocalSocketAddress());
            final byte[] buf = PacketHelper.toPacket(new ConnectRequest(cri, hpai, hpai));
            final DatagramPacket p =
                new DatagramPacket(buf, buf.length, ctrlEP.getAddress(), ctrlEP.getPort());
            socket.send(p);
        }
        catch (final IOException e) {
            if (socket != null)
                socket.close();
            logger.error("communication failure on connect", e);
            if (localEP.getAddress().isLoopbackAddress())
                logger.warn("try to specify the actual IP address of the local host");
            LogManager.getManager().removeLogService(getName());
            throw new KNXException(e.getMessage());
        }
        logger.info("wait for connect response from " + ctrlEP + " ...");
        startReceiver();
        final boolean changed = waitForStateChange(CLOSED, CONNECT_REQ_TIMEOUT);
        if (state == OK) {
            (heartbeat = new HeartbeatMonitor()).start();
            logger.info("link established");
            return;
        }
        // quit, cleanup and notify client
        receiver.quit();
        socket.close();
        KNXException e;
        if (!changed)
            e = new KNXTimeoutException("timeout connecting to control endpoint "
                    + ctrlEP);
        else if (state == ACK_ERROR)
            e = new KNXRemoteException(
                "acknowledge error, failed to connect to control endpoint " + ctrlEP);
        else
            e = new KNXInvalidResponseException("invalid connect response from " + ctrlEP);
        setState(CLOSED);
        logger.error("establishing connection failed", e);
        LogManager.getManager().removeLogService(getName());
        throw e;
    } 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T13:08:52.030

你得到的例外清楚地表明你不能在 UI 线程上进行网络操作。改为使用 AsyncTask。请参阅[此处并在](http://developer.android.com/reference/android/os/AsyncTask.html)[此处](https://stackoverflow.com/questions/9671546/asynctask-android-example)获取示例

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T13:06:46.727

这不是 Wi-Fi 的问题。从 Android 3.0 开始，UI 线程（主线程）上不允许进行网络操作。您必须在单独的线程中进行网络通信。
看到[这个](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)
即使你使用低于 3.0 的 android 版本，任何持续超过**5 秒**的网络操作（即如果 UI threda 超过 5 秒无响应）将强制关闭应用程序。所以应该避免。

# android - Android/IOS 回合制多人游戏（如 WordFeud/Scrabble）

> ID：13270376
> 
> 赞同：1
> 
> 时间：2012-11-07T13:04:31.927
> 
> 标签：android, asp.net, ios, multiplayer

我已经四处寻找了一段时间，但似乎无法找到正确的答案。

我正在尝试开发一个android多人游戏，以后它也必须能够连接到IOS和Windows Mobile 8。

这是一款类似于 WordFeud/Scrabble 的游戏，每场游戏最多可容纳 4 名玩家。

我想做的是在我的 asp.NET 服务器上完成大部分复杂的编码，如验证、播放板的同步、统计信息等。（因为我是 C# 程序员）。

所以设备上的应用程序将是 GUI 和一些要同步的逻辑。

现在像自动同步（或推送）、回合制、查找玩家等。

我怎样才能做到这一点？

当我希望全世界成千上万的玩家能够互相对抗时，这是要走的路吗？

从我的研究来看，使用网络服务进行同步/游戏逻辑似乎是一个逻辑选项。

我不太喜欢 Parse、Skiller、Openfeint 等工具。因为它们都需要很多钱，而且你依赖它们。

亲切问候！

# entity-framework - 实体框架性能问题，同时循环更多记录

> ID：13270379
> 
> 赞同：0
> 
> 时间：2012-11-07T13:04:36.687
> 
> 标签：entity-framework

我有超过 4000 名员工的员工详细信息。在检索这些行时，由于循环，我面临着性能问题。那么我能做些什么来提高性能呢？

这是我提到的循环：

```
List<EmployeesEntityObject> lstEmployee = new List<EmployeesEntityObject>();

foreach (var item in lst)
{
           EmployeesEntityObject obj = new EmployeesEntityObject();
           obj.EmployeeID = item.EmployeeID;
           obj.EmployeeName = item.EmployeeName;       
           lstEmployee.Add(obj);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:38:42.710

您可以尝试看看当您完全“linqify”您的代码时会发生什么：

```
var lstEmployee = lst.Select(emp => new EmployeesEntityObject
                                   {
                                       EmployeeID = item.EmployeeID,
                                       EmployeeName = item.EmployeeName
                                   }).ToList(); 
```

但正如 marc_s 所说，您的代码中没有任何性能问题的明显原因。除非，如上所述，属性的构造函数和/或设置器隐藏了耗时的代码。顺便说一句，这两者都不值得推荐。

# java - 如何将密码插入电子邮件“模板”文件？

> ID：13270385
> 
> 赞同：0
> 
> 时间：2012-11-07T13:05:07.680
> 
> 标签：java, email

我的网络应用程序发送“忘记密码”和其他电子邮件。我想在文件中的某处有电子邮件正文模板，以便每个客户都可以更改“忘记密码”电子邮件的外观。

例如：

```
Dear App Name user,
Your new password is: %password%

Your App Name Team. 
```

我知道消息正文可以放入文件中，但是如何从我的 Java 代码中替换 %password% 呢？

任何其他想法应该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:09:40.497

您可以使用：

```
String template="Dear App Name user,\nYour new password is: %s \n\nYour App Name Team."

String email=String.format(template,password); 
```

基本上，您可以`%s`用作占位符，它将通过 String.format 填充密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:06:29.113

您可以尝试使用[freemarker 模板](http://viralpatel.net/blogs/freemaker-template-hello-world-tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:06:53.233

您有多种选择：

*   采用[`String.format()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)
*   采用[`MessageFormat.format()`](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html#format%28java.lang.String,%20java.lang.Object...%29)
*   使用 Velocity 或 FreeMarker 等模板引擎

# asp.net-mvc - 无法弄清楚asp.net mvc中的路由

> ID：13270396
> 
> 赞同：0
> 
> 时间：2012-11-07T13:05:54.373
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在尝试开发 web api 在 asp.net mvc 中迈出第一步。

我有以下路由功能：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "cdApiDefault",
        url: "api/{controller}/{action}/{token}/{mid}/{id}",
        defaults: new {
            token = UrlParameter.Optional,
            mid = UrlParameter.Optional,
            id =  RouteParameter.Optional }
    );
} 
```

和以下控制器：

```
namespace cdapi.Controllers
{
    public class PostsController : ApiController
    {
        // GET api/posts
        public IEnumerable<string> Get()
        {
            return new string[] { "GET_value1", "GET_value2" };
        }

        // GET api/posts/5
        public string Get(int id)
        {
            return "value!!!!!!!!!!!!!!!!!";
        }

        // POST api/posts
        public void Post([FromBody]string value)
        {
        }

        // PUT api/posts/5
        public void Put(int id, [FromBody]string value)
        {
        }

        // DELETE api/posts/5
        public void Delete(int id)
        {
        }

        public String GetTest(String token, String mid)
        {
            return token + " - " + mid;
        }
    }
} 
```

以下调用

> hxxp://localhost:52628/api/posts/5

（在我的浏览器中）产生一些结果，即函数 GET 被调用并返回一个值。

但是，当我尝试

> hxxp://localhost:52628/api/posts/GetTest/MyTestToken/myTestMid

返回*“找不到资源”*错误消息。

我认为**{Action}**应该包含要调用的函数，并且**“token”**和**“mid”**应该包含我指定的值。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:50:49.853

ApiController 与常规 MVC 控制器的工作方式不同。在这里，方法名称（GET、POST、PUT、DELETE）表示 HTTP VERBS，而不是 url 片段。在您的第一次通话中，

```
/api/posts/5 
```

这调用`Get(int)`.

要按照您的意愿进行路由，请通过继承`System.Web.Mvc.Controller`而不是切换到标准 MVC`System.Web.Http.ApiController`并修改您的方法以返回`ActionResult`

# java - 解析的日期有微小的差异

> ID：13270403
> 
> 赞同：0
> 
> 时间：2012-11-07T13:06:11.843
> 
> 标签：java, datetime

所以我试图解析Java中的日期字符串。我得到了正确的时间，但分钟似乎已经过了大约 5 到 10 分钟。我在下面显示我的代码以及输入字符串和日期对象`toString()`输出。

有什么想法我哪里出错了吗？这是在 Android 上，所以我不想使用 JodaTime。

```
DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSSSSS'Z'"); 

Date date = sdf.parse(input);

return date; 
```

> 输入字符串 = 2012-11-07T12:47:05.0581816Z
> 
> 日期 toString() = 2012 年 11 月 7 日星期三 12:56:46 GMT（毫秒 = 1352293006816）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:12:26.763

您正在尝试将微秒精度的日期解析为毫秒精度。

0581816 是添加到时间 12:47:05 的毫秒数，而不是您可能期望的秒的小数部分。

由于毫秒以下的精度不能用 表示`java.util.Date`，最简单的选择是截断小数部分并调整日期格式，如下所示：

```
final DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
String input = "2012-11-07T12:47:05.058234234Z";
input = input.replaceFirst("(?<=\\.\\d{3})\\d+", "");
System.out.println(input);
System.out.println(sdf.parse(input)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:20:18.350

请确保在将字符串转换为日期对象时使用相同的时区，反之亦然

# d3.js - 在 django 中使用 d3

> ID：13270406
> 
> 赞同：1
> 
> 时间：2012-11-07T13:06:15.617
> 
> 标签：d3.js

我已经开始使用 d3 和 django 构建一个网络应用程序。d3 当然建立在 DOM 之上，我不清楚堆栈对象和函数应该驻留在哪里以及如何传递。例如，我有一个*items*模型，它具有一定的价值，比如*size*。现在我想根据大小显示这些元素，例如半径。我有一个清单并将它们传递给 d3。我先进行缩放，然后传递原始值，而不是使用 d3.scale。我使用 django 模板来生成 javascript 代码，这似乎不是一个好主意。

从 d3 的描述来看，似乎有很多重叠之处：“D3 允许您将任意数据绑定到文档对象模型 (DOM)，然后将数据驱动的转换应用于文档。” 我也在研究 CouchDB 和 MongoDB，有点困惑所有这些层如何交互。

```
// simple example using django with d3
// routing with django
values = [float(item.size) for item in itemlist] // get model-data
//scale values in django/python                   
values = [round(x/(max(values)),3) for x in values]                         
html += t.render(Context({'values':values})) 

//template producing javascript given the values from python
{% for value in values %}                                                 
     data.push({"x":{{value}},"y":0.5})                                     
{% endfor %} 

//paint data with d3 based on DOM 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T09:48:52.570

我发现最好的方法可能是在使用 d3 时不要使用 django，而是使用自己的映射器等（Cherrypy、Pylons 等）。

# php - 如果用户点击后退浏览器按钮，我们可以导航到不同的页面吗？

> ID：13270407
> 
> 赞同：0
> 
> 时间：2012-11-07T13:06:19.290
> 
> 标签：php, javascript, jquery, ajax, browser

我从 Eric 那里收到了一个非常有用的答案，关于如何显示确认是用户单击浏览器的后退按钮，让用户选择是否要返回。

以下是他的回答：

您可以使用`beforeunload`事件来实现这一点。

```
$(window).bind("beforeunload", function() {
    return "HI"; // Return whatever message you want
});​ 
```

## [小提琴](http://jsfiddle.net/CDSAF/)

*（要使用小提琴，只需重新加载页面或导航离开或诸如此类。）*

我还建议您在有人以所需方式（取消按钮？）离开页面时取消绑定，否则您可能会遇到不良行为。

例如：

```
$("a").click(function() {
    $(window).unbind("beforeunload");
}); 
```

**问题**

下面是我们讨论的内容，我们不知道是否有一种干净的方法可以做到这一点，但我想尝试并实现的是，如果用户确实确认他们想要离开页面，那么我想导航用户到不同的脚本（Text4.php），在这个脚本中它只是破坏会话并将用户注销。但我想知道首先这是否可能，其次你有什么想法来回答这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:12:53.040

这是不可能的。您不能在用户访问的页面上模拟用户。不要试图为我控制浏览器，只要确保您的页面在我访问它时在浏览器上显示并正常工作即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:14:26.807

不，当用户决定关闭选项卡、窗口或返回时，您无法更改 url。这是有充分理由的。在我决定离开页面后，我不希望任何人将我导航到某个附属/垃圾邮件/任何网站：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:16:09.813

考虑对您的注销脚本进行异步调用，然后将用户指向所需的页面。

**标记**

```
<a href="path/to/logout" id="yourlogoutlink">Logout</a> 
```

**JS**

```
$("#yourlogoutlink").click(function(e) {

    e.preventDefault();

            if(!confirm("Leave the page?"))
                return;

    $.post( $(this).attr('href'), function(data){

        $(window).unbind("beforeunload");
        window.location.href = '/some/url';

    } );

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:16:42.593

您可以尝试使用历史 API ...

您可以尝试这些跨浏览器 API。

[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

[https://github.com/devote/HTML5-History-API](https://github.com/devote/HTML5-History-API)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T13:17:31.050

您不需要 JavaScript 来执行此操作。我会在您的初始页面中执行以下操作。

```
session_start();
if(isset($_session['token']){
 //do log out stuff
} else {
 $_session['token'] = //generate random var here
} 
```

当页面加载时，它会查看是否设置了变量，如果是，则注销，如果不是。

# mysql - 是否可以更新 mysql 中的 KEY_COLUMN_USAGE 表？

> ID：13270411
> 
> 赞同：0
> 
> 时间：2012-11-07T13:06:39.880
> 
> 标签：mysql, constraints, information-schema

重命名表后，我注意到一些约束在 INFORMATION_SCHEMA.KEY_COLUMN_USAGE 中仍然具有 REFERENCED_TABLE_NAME 的旧名称。是否可以在某些行上更改该字段，或者必须放弃这些约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:50:09.813

这是系统视图；它无法更新。

* * *

此行为的可能原因（当 information_schema 未更新时）是可以打开表，例如该表上有一个打开的游标/读取器。首先关闭这个表，或者只运行[FLUSH TABLES table_name](http://dev.mysql.com/doc/refman/5.5/en/flush.html)。

查看打开的表，检查`In_use`列 -

```
SHOW OPEN TABLES; 
```

# c# - 可访问性不一致：基类比类更难访问

> ID：13270414
> 
> 赞同：21
> 
> 时间：2012-11-07T13:06:42.793
> 
> 标签：c#, dll, access-specifier

所以我在 DLL 中有一个抽象基类和该类的子类。我希望孩子是公开的，但基础是私有的，这样就不能在 dll 之外访问它。

我怎么做？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-07T13:08:16.180

你没有，你也不能。

如果要将类公开为`public`，则基类型**必须**为`public`。另一种选择是使用`public interface`, 并且仅通过 公开类型`interface`（可能在某处使用工厂方法来创建实例）。

最后一种选择是*封装*基类而不是继承它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T14:39:05.790

制作它`public`，制作所有构造函数`internal`（如果您使用的是默认构造函数，请添加一个无参数构造函数来覆盖它）。

然后在公开且未密封的情况下，它不能被外部代码子分类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:14:05.557

只是为了澄清我在对@Marc Gravel 的回答的评论中所说的话，你*可以*

```
public ChildClass : ParentClass
{

}

public ParentClass
{
   internal void MethodIdontWantToExpose()
  {

  }

} 
```

那说一个`interface`可能是最好的解决方案

# css - 如何在环绕的水平多行菜单的行之间放置边框？

> ID：13270416
> 
> 赞同：2
> 
> 时间：2012-11-07T13:06:43.983
> 
> 标签：css, menu, border

我有一个基于嵌套无序列表的菜单。所有样式和显示都是通过 css 完成的。

菜单被包裹在一个固定宽度的 div 中。对于某些顶级项目，子菜单的一行包含太多项目，这些项目会换行到第二行甚至第三行，从而扩大了 div 高度。这工作正常。

我想要做的是在子菜单项的行之间添加一条水平线/分隔线/边框，无论行数如何，并且宽度等于下面或上面的行（最好是下面）。显然，如果只有一行项目，则不会出现任何行。

我尝试在整个顶部添加背景`<ul id="submenu">`，然后使用 将其从第一行中删除`ul#submenu:first-line{}`，然后意识到这无法完成（headslap）。

然后我更改了菜单的结构以使用`<p>`嵌套在 div 中的元素，再次使用`div#submenu:first-line{}`，但测试这给了我奇怪的结果。例如，背景颜色将显示在第一行，但只有子菜单项高度的一半；背景图像出现在子菜单项的中间。有时在我单击当前顶级菜单项之前什么都没有显示。

`<p>`我什至尝试用包含一系列元素的单个元素替换列表结构`<a>`，并得到了相同的结果。

证据表明我没有`:first-line`正确使用伪元素，但在网上阅读表明这应该可行。

关于我做错了什么以及如何获得这些水平线的任何建议，最好是使用 CSS 而没有 JS？

这是我的代码：

```
#subMenuContainer {
    width:100%;
    margin-top:20px;
}
#subMenu {
    width:600px;
    margin:0 auto;
    text-align:center;
    background:#ddd;
}
#sub {
    border-top:2px solid green;
    padding:0px;
    line-height:30px;
}
#sub::first-line {
    border-top:2px solid red; /* doesn't work */
    background-color:pink; /* works */
    color:yellow; /* doesn't work */
}
#sub p {
    display:inline-block;
    padding:0px;
}
#sub p a {
    padding:0px 0px;
    line-height:1em;
}​
<div id="subMenuContainer">
    <div id="subMenu">
        <div id="sub" >
            <p><a href="#">MenuItem1</a></p>
            <p><a href="#">MenuItem2</a></p>
            <p><a href="#">MenuItem3</a></p>
            <p><a href="#">MenuItem4</a></p>
            <p><a href="#">MenuItem5</a></p>
            <p><a href="#">MenuItem6</a></p>
            <p><a href="#">MenuItem7</a></p>
            <p><a href="#">MenuItem8</a></p>
            <p><a href="#">MenuItem9</a></p>
            <p><a href="#">MenuItem10</a></p>
        </div>
    </div>
</div> 
```

[在 jsfiddle 中也是如此](http://jsfiddle.net/KhnBT/4/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:16:44.167

我认为您应该使用 :first-child 而不是 :first-line 伪类。

*   :first-line 指的是文本元素的第一行
*   :first-child 是指父元素的第一个子元素。例如，你的 ul 中的第一个 li。

有关详细信息，请参阅[http://www.w3schools.com/css/css_pseudo_classes.asp 。](http://www.w3schools.com/css/css_pseudo_classes.asp)

如果这不能解决您的问题，您可以发布您的标记吗？

五。

# performance - Entityframework DbContext 周围的泛型导致性能下降？

> ID：13270418
> 
> 赞同：1
> 
> 时间：2012-11-07T13:06:52.810
> 
> 标签：performance, entity-framework, generics, dbcontext

我编写了一个简单的导入/导出应用程序，它使用 EntityFramework 和 AutoMapper 从源 -> 目标转换数据。它基本上：

1.  **`batchSize`从源表中**选择记录****
***   来自源->目标实体的“**映射”数据***   **将**新的目标实体添加到目标表并**保存**上下文**

 ***我在 5 分钟内*移动了大约50 万条记录。在我*使用泛型**重构*代码后，性能*在 5 分钟内急剧下降到 250 条记录。*

 ****我的代表是否会返回导致这些问题`DbSet<T>`的属性？`DbContext`还是发生了其他事情？**

# 快速非通用代码：

```
public class Importer
{        
    public void ImportAddress()
    {
        const int batchSize = 50;
        int done = 0;
        var src = new SourceDbContext();

        var count = src.Addresses.Count();

        while (done < count)
        {
            using (var dest = new DestinationDbContext())
            {
                var list = src.Addresses.OrderBy(x => x.AddressId).Skip(done).Take(batchSize).ToList();
                list.ForEach(x => dest.Address.Add(Mapper.Map<Addresses, Address>(x)));

                done += batchSize;

                dest.SaveChanges();
            }
        }

        src.Dispose();
    }
} 
```

# （非常）缓慢的通用代码：

```
public class Importer<TSourceContext, TDestinationContext>
    where TSourceContext : DbContext
    where TDestinationContext : DbContext
{
    public void Import<TSourceEntity, TSourceOrder, TDestinationEntity>(Func<TSourceContext, DbSet<TSourceEntity>> getSourceSet, Func<TDestinationContext, DbSet<TDestinationEntity>> getDestinationSet, Func<TSourceEntity, TSourceOrder> getOrderBy) 
        where TSourceEntity : class
        where TDestinationEntity : class
    {
        const int batchSize = 50;
        int done = 0;
        var ctx = Activator.CreateInstance<TSourceContext>();
        //Does this getSourceSet delegate cause problems perhaps?

        //Added this
        var set = getSourceSet(ctx);

        var count = set.Count(); 

        while (done < count)
        {
            using (var dctx = Activator.CreateInstance<TDestinationContext>())
            {
                var list = set.OrderBy(getOrderBy).Skip(done).Take(batchSize).ToList(); 
                //Or is the db-side paging mechanism broken by the getSourceSet delegate?
                //Added this
                var destSet = getDestinationSet(dctx);
                list.ForEach(x => destSet.Add(Mapper.Map<TSourceEntity, TDestinationEntity>(x)));

                done += batchSize;
                dctx.SaveChanges();
            }
        }

        ctx.Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:08:28.060

问题是调用`Func`您经常做的代表。将结果值缓存在变量中就可以了。****

# r - 通过列内容对数据框进行子集化

> ID：13270424
> 
> 赞同：1
> 
> 时间：2012-11-07T13:07:24.730
> 
> 标签：r, list, dataframe, subset

我有以下数据框：

```
Test <- data.frame(Species = c("A","B","C","D"), 
       WB1=c(0.1,1.1,0.9,1.2), 
       WB2=c(1, 0.8, 1.3, 1),
       WB3=c(0.5, 0.7, 1.2, 0.9),
       WB4=c(1.3, 1.2, 0.9, 0.6)) 
```

我想为每个物种获得一个新的数据框，只列出`WB's`大于一个的数据框。所以在这个例子中，对于物种`A`来说

```
WB1 WB4
1.0 1.3 
```

我尝试了以下方法：

```
AllSpecies <- Test$Species
AllWaterbodies <- colnames(Test)
for(species in AllSpecies)
{ 
  ind <- which(Test$Species == species)
  x <- Test[ind,]
  colnames(x) <- AllWaterbodies 
```

如果说`species <- "A"`，那么这已经给了我：

```
 Species WB1 WB2 WB3  NA
1       A 0.1   1 0.5 1.3 
```

现在我只想列出`WB's`大于一的，这就是我卡住的地方。任何机构都可以帮助我完成我的循环吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:58:51.887

使用 R 的基础解决方案`lapply`：

```
 lapply(split(Test[,-1], Test$Species), function(x) x[which(x>1)])
$A
  WB4
1 1.3

$B
  WB1 WB4
2 1.1 1.2

$C
  WB2 WB3
3 1.3 1.2

$D
  WB1
4 1.2 
```

与@Basterfield 的结果相同，但无需安装额外的软件包。

您要求的值大于 1，但在所需的输出中显示的值大于或等于 1，因此您要查找的代码可能如下：

```
lapply(split(Test[,-1], Test$Species), function(x) x[which(x>=1)])
$A
  WB2 WB4
1   1 1.3

$B
  WB1 WB4
2 1.1 1.2

$C
  WB2 WB3
3 1.3 1.2

$D
  WB1 WB2
4 1.2   1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:36:17.477

这就是你想要的吗？

```
library("plyr")
dlply( Test, "Species", function(x){
  x[ ,c( F, x[,2:5] > 1), drop = FALSE ]
}) 
```

输出：

```
$A
  WB4
1 1.3

$B
  WB1 WB4
2 1.1 1.2

$C
  WB2 WB3
3 1.3 1.2

$D
  WB1
4 1.2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:08:41.570

这是一个两条线......
它会生成一个名为的列表`results`，其中包含每个所需物种的一个 data.frame。
每个数据帧都是原始帧中相应行的子集`Test`，因此仅保留通过 >= 1.0 过滤器的列。

```
results <- list()
for (spc in c('A', 'B', 'C', 'D')) 
   results[[spc]] <- Test[Test$Species==spc, 
                          c( TRUE, Test[Test$Species==spc, -1] >= 1.0)]

> results
$A
  Species WB2 WB4
1       A   1 1.3
$B
  Species WB1 WB4
2       B 1.1 1.2
$C
  Species WB2 WB3
3       C 1.3 1.2
$D
  Species WB1 WB2
4       D 1.2   1 
```

当然`for (spc in Test[, "Species"])`，当我们希望获取*所有*物种时，我们可以使用而不是明确的列表。
此外，可以调整片段以使列表元素具有更漂亮的名称和/或从各个 data.frames 中排除 Species 列。例如。

```
> results <- list()
> for (spc in c('A', 'C')) 
     results[[paste("Record for Species", spc)]] <-
            Test[Test$Species==spc, 
                 c(FALSE , Test[Test$Species==spc, -1] >= 1.0)]
> results
$`Record for Species A`
  WB2 WB4
1   1 1.3

$`Record for Species C`
  WB2 WB3
3 1.3 1.2 
```

# android - 使用 UI 反馈动态控制 ViewPager 可以滚动的方向

> ID：13270425
> 
> 赞同：4
> 
> 时间：2012-11-07T13:07:24.137
> 
> 标签：android, android-viewpager

我正在开发一个使用许多页面进行滑动的应用程序，但是在某些页面上，我希望能够防止滚动到下一页，直到他们选择了某些内容。

目前我已经扩展了 ViewPager：

```
/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager#onInterceptTouchEvent(android.view.MotionEvent)
 */
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.canGoLeft || this.canGoRight) {
        return super.onInterceptTouchEvent(event);
    }

    return false;
}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager#onTouchEvent(android.view.MotionEvent)
 */
@Override
public boolean onTouchEvent(MotionEvent ev) {
    boolean lockScroll = false;
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        lastX = ev.getX();
        lockScroll = false;
        return super.onTouchEvent(ev);
    case MotionEvent.ACTION_MOVE:
        if (canGoLeft && lastX < ev.getX()) {
            lockScroll = false;
        } else if (canGoRight && lastX > ev.getX()) {
            lockScroll = false;
        } else {
            lockScroll = true;
        }

        lastX = ev.getX();

        break;
    }

    lastX = ev.getX();

    if (lockScroll) {
        //make callback to prevent movement
        if (mOnPreventCallback != null) {
            mOnPreventCallback.onPreventMovement();
        }
        return false;
    } else {
        return super.onTouchEvent(ev);
    }
} 
```

注意：我已经尝试实现防止滑动到上一页，但是您仍然可以滑动到上一页，但是您需要从最左侧滑动并向右滑动一点。它是喜怒无常的，但它并不能完全阻止滑动。

我想在这里做三件事：

1.  防止滚动到下一个屏幕，直到他们选择了一个项目或其他东西
2.  防止滚动到上一个屏幕（部分实现）
3.  向用户提供反馈以显示滚动已禁用，就像 Android 以渐变方式显示顶部和底部屏幕的方式一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:21:23.580

当我遇到类似的问题时，我用一个手势检测器制作了自己的监听器，让它根本不响应滑动，您可以轻松地将其调整为仅在某些情况下不响应向右滑动。这应该回答您的数字 1 和 2。

这是听众：

```
public class OnSwipeTouchListener implements OnTouchListener {

@SuppressWarnings("deprecation")
private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

public boolean onTouch(final View v, final MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}

private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        onTouch(e);
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
               // onTouch(e);
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
}
public void onTouch(MotionEvent e) {
}
public void onSwipeRight() {
//call this only if your condition was set
}

public void onSwipeLeft() {
//nothing, this means,swipes to left will be ignored
}

public void onSwipeTop() {
}

public void onSwipeBottom() {
}
} 
```

这是一个使用示例：

```
viewPager.setOnTouchListener(new OnSwipeTouchListener() {
public void onSwipeRight() {
  if(your conditionIsMet){
// move your pager view to the right
     }
   }

}); 
```

可能有一个更简单、更优雅的解决方案，但这对我来说效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T08:04:00.700

我一直在谷歌搜索解决这个问题的好方法......我尝试覆盖ontouchevent等......

我认为这对我来说是最好的解决方案（而且不那么老套）..只是实现一个最大或最小跟踪器并将其设置为当前页面

```
 maxPageToScroll = viewPager.getCurrentItem();
        minPageToScroll = viewPager.getCurrentItem(); 
```

然后添加到“onPageSelected”方法：

```
public void onPageSelected(int position) {

        if (position < minPageToScroll) {
            viewPager.setCurrentItem(maxPageToScroll);
        }
        else if (position > maxPageToScroll) {
            viewPager.setCurrentItem(maxPageToScroll);
            // you can alert here that user needs to do certain actions before proceeding
        }
        else { 
            // enter normal commands here
        } 
```

因此，当满足条件时，您只需将 maxpage 增加 1..

```
 maxPageToScroll = viewPager.getCurrentItem() + 1; 
```

请注意，这不会阻止用户表单滚动......它只是阻止查看寻呼机更改页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T07:28:08.087

我认为不需要扩展 ViewPager。您需要做的是即时修改提供给 PagerAdapter 的页面列表。这意味着，您检查某个页面是否标记为“已完成”，然后才将下一页添加到列表中。这就是 ViewPager 的工作原理。

看看[Roman Nurik 的向导-寻呼机实现](https://github.com/romannurik/android-wizardpager)。在 MainActivity 中有一个名为 recalculateCutOffPage 的方法，它可以按照我说的做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-21T10:07:44.610

您可以使用自定义视图寻呼机

```
public class CustomViewPager extends ViewPager
{   
float mStartDragX;
OnSwipeOutListener mListener;
Context context;
public static boolean enabled;

public CustomViewPager(Context context, AttributeSet attrs)
{
    super(context, attrs);
    this.context = context;
    enabled = true;
}

@Override
public boolean onTouchEvent(MotionEvent event)
{

    if (enabled) //view pager scrolling enable if true
    {
        return super.onTouchEvent(event);
    }
    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev)
{

    if (enabled)enter code here
    {
        return super.onInterceptTouchEvent(ev);
    }
    else  // view pager disable scrolling 
    {
        float x = ev.getX();
        switch (ev.getAction())
        {
            case MotionEvent.ACTION_DOWN:
                mStartDragX = x;

                break;
            case MotionEvent.ACTION_MOVE:
                if (mStartDragX < x - 100)//100 value velocity
                {
                    //Left scroll 
                    //return super.onInterceptTouchEvent(ev); 
                }
                else
                    if (mStartDragX > x + 100)
                    {
                        //Right scroll 
                        //return super.onInterceptTouchEvent(ev);
                    }
                break;
        }
    }

    return false;

}

public void setOnSwipeOutListener(OnSwipeOutListener listener)
{
    mListener = listener;
}

public interface OnSwipeOutListener
{

    public void onSwipeOutAtStart();

    public void onSwipeOutAtEnd();
} 
```

}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-06T12:49:25.327

我为具有用户无法通过的最大页面的向导实现了 viewpager。

最后，解决方案在适配器中。我更改了 PagerAdapter 的计数，这样可以阻止用户传递最大页面：

```
@Override
public int getCount() {
    return mProgress; //max page + 1
} 
```

当用户进入下一页时：

```
private void setWizardProgress(int progress) {
    if(progress > mProgress) {
        mProgress = progress;
        mWizardPagerAdapter.notifyDataSetChanged();
    }
} 
```

这样，当用户处于最大页面时，他无法向右滚动，直到进度更新。

# c# - 使用偏移量将字符串转换为 DateTime

> ID：13270429
> 
> 赞同：3
> 
> 时间：2012-11-07T13:07:33.807
> 
> 标签：c#, datetime

这是字符串：`2007-08-31T06:59:40+02:00`
如何将其转换为`DateTime`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T13:11:14.537

DateTimeOffset 还处理时区偏移：

```
DateTimeOffset.Parse("2007-08-31T06:59:40+02:00") 
```

或者

```
DateTimeOffset.ParseExact("2007-08-31T06:59:40+02:00", "yyyy-MM-ddTHH:mm:sszzzz"
                          ,System.Globalization.CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T13:14:17.027

您应该使用[`DateTimeOffset.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.parseexact.aspx)- 您知道您期望的*确切*格式，并且由于这可能来自另一台计算机而不是用户输入，因此如果失败，则肯定是*错误。*同样，您应该指定不变的文化以表明这不依赖于执行线程的“当前文化”。

```
var value = DateTimeOffset.ParseExact(text,
                                      "yyyy'-'MM'-'dd'T'HH':'mm':'sszzz",
                                      CultureInfo.InvariantCulture); 
```

`DateTimeOffset`是准确表示信息的类型 -`DateTime`将*不得不*丢失一些信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-07T13:09:08.957

使用`DateTime.Parse()`：

```
DateTime dt = DateTime.Parse ("2007-08-31T06:59:40+02:00") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T13:11:57.573

您可以使用 DateTimeOffset.TryParse 方法。

[http://msdn.microsoft.com/en-us/library/bb397029.aspx](http://msdn.microsoft.com/en-us/library/bb397029.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T13:12:41.553

使用`DateTimeOffset.Parse()`.

然后使用`DateTime`属性或`DateTimeUtc`属性来获取 DateTime（但您应该调查是否可以继续使用 DateTimeOffset。

# mysql - SQL 查询和字符串搜索

> ID：13270431
> 
> 赞同：1
> 
> 时间：2012-11-07T13:07:50.390
> 
> 标签：mysql, sql

我有那个数据库图（MySQL）。每个`Book`人都分配了一个`BookLanguage`. 每个`BookLanguage`都有两个不同`LanguageNames`的（全球化目的）。而且，每个都`Book`可以有一个额外的`BookLanguage` **（但不是必需的）**。

这就是问题所在 - 我在构建用于搜索的 SQL 查询时被困在这里`Books`，其在`BookLanguageNames`. 通过加入来构建查询很简单，`BookLanguage`但是`BookLanguageNames`如何应对`AdditionalBookLanguages`？

![在此处输入图像描述](../Images/a5f0e9f2f1048a11a4cd76602708e4ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:03:05.390

如何简化数据库设计？有三个表`Book`，`BookLanguageName`（它们的结构都与你的相似），而不是`AdditionalBookLanguage`和`BookLanguage`有一个“查找表” - `BookLanguage`：

1.  `Book`- 在这里您保留有关书籍的所有信息。
2.  `BookLanguage`- 只有三列：BookID、BookLanguageID（或代码）和一个布尔值 is_additional。BookID 和 BookLanguageID 将是复合主键。
3.  `Language`- 在这里您保留与特定语言相关的所有信息。

在这种情况下，编写查询会更容易。

# c++ - 在新编译期间浏览以前的编译错误？

> ID：13270454
> 
> 赞同：8
> 
> 时间：2012-11-07T13:09:04.617
> 
> 标签：c++, emacs, ide, compilation

如何设置 emacs 以便在新编译期间浏览以前的编译错误？

有两件事对我不起作用：

1.  Mg Mg (next-error) 功能在第二次编译正在进行时不起作用。

2.  我将我的 emacs 分成 5 个不均匀的窗口（split-windows-horizo​​ntally），编译“窗口”的大小是两倍（dbl 监视器设置）。当我启动编译时，它总是出现在最后一个双编译窗口中。现在它为自己打开了一个新窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:11:33.320

这是一个似乎可以满足您所有要求的解决方案：

*   缓冲区始终保持在`*compilation-old*`同一个窗口中
*   `next-error`不打破
*   `*compilation-old*`当编译过程终止时，所有连续的编译输出都将附加在末尾

```
(defun my-compilation-finish-function (buffer msg)
  ;; Don't do anything if we are in a derived mode
  (when (with-current-buffer buffer (eq major-mode 'compilation-mode))

    ;; Insert the last compilation output at the end of *compilation-old*
    (if (get-buffer "*compilation-old*")
        (with-current-buffer "*compilation-old*"
          (save-excursion
            (goto-char (point-max))
            (insert-buffer buffer)))
      (with-current-buffer buffer
        (rename-buffer "*compilation-old*")))))

(add-hook 'compilation-finish-functions 'my-compilation-finish-function)

(defadvice compile (around my-compile-show-old activate)
  "Show the *compilation-old* buffer after starting the compilation"
  (let ((buffer (current-buffer)))
    (when (get-buffer "*compilation-old*")
      (pop-to-buffer "*compilation-old*")
      (switch-to-buffer "*compilation*"))
    ad-do-it
    (when (get-buffer "*compilation-old*")
      (switch-to-buffer "*compilation-old*")
      (pop-to-buffer buffer)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:46:48.100

将以下内容放入您的 init 文件中会将编译缓冲区重命名为`*compilation-old*`编译命令终止时的名称。

请注意，如果您从旧的编译缓冲区运行新的编译过程，这将不起作用（因为`compile`在这种情况下将重用缓冲区而不是创建新的缓冲区）

```
(defun my-rename-compilation-buffer (buffer message)
  ;; Don't do anything if we are in a derived mode
  (when (with-current-buffer buffer (eq major-mode 'compilation-mode))
    (let* ((old-compilation-buffer-name "*compilation-old*")
           (old-compilation-buffer (get-buffer old-compilation-buffer-name)))

      ;; Kill old compilation buffer if necessary
      (when old-compilation-buffer
        (kill-buffer old-compilation-buffer))

      ;; Rename the current compilation buffer
      (with-current-buffer buffer
        (rename-buffer old-compilation-buffer-name)))))

(add-hook 'compilation-finish-functions 'my-rename-compilation-buffer) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:38:40.220

这有点像 Kludge，但试试这个：

在开始新的编译之前，将当前编译缓冲区保存（写入，Cx Cw）到一个文件中。如果新文件的缓冲区丢失了“编译模式”设置，只需重新打开编译模式（Mx 编译模式）。

# file-upload - EXTJS MVC 中的文件上传字段

> ID：13270458
> 
> 赞同：2
> 
> 时间：2012-11-07T13:09:16.733
> 
> 标签：file-upload, extjs4, extjs4.1, extjs-mvc

我有一个由各种文本字段和组合框以及文件上传字段组成的表单。该文件已成功上传，但是当我尝试访问其他表单字段时，在 firebug 的 post 参数中看不到它们。控制器的代码如下：

```
uploadFile : function(button) {

    **var form = button.up('form');
    var Title = form.down('Title');
    console.log(Title);** // This returns null

    if (form.getForm().isValid()) {
        form.getForm().submit({

            url : 'data/Downloads.aspx',
            waitMsg : 'Saving the file...',

            params : {
                mode : 'UPLOADFILE',
                client : SYSTEM.CLIENT
            },

            success : function(f, a) {
                Ext.Ajax.request({

                    url : 'data/Downloads.aspx',
                    params : {
                        mode : 'SAVE',
                        fileName : a.result.fileName

                    },

                    success : function() {
                        this.mWin = Ext.create('Campus.view.GenMessage');
                        this.mWin.addMessage(true, LANG.SUCT, LANG.SUCTxt2);
                    },

                    failure : function() {

                    }
                });

            },

            failure : function() {

            }
        })
    }
}, 
```

我如何访问其他表单字段并将其发送到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:18:43.270

我不太明白你在做什么。您似乎提交了表单，然后您正在对服务器进行 ajax 调用？？？

无论如何，所有表单字段都会与文件输入一起发送到服务器。由于文件上传，框架不使用 ajax 像往常一样提交表单，请参阅有关此的文档：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.form .Basic-method-hasUpload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-hasUpload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:41:17.517

谢谢你的指导dbrin。

实际上，我正在尝试上传文档，同时将有关文件的信息保存在数据库中。而且，这就是我试图发出 AJAX 请求的原因。但是，这就是我所做的：

```
uploadFile : function(button) {

        var form = button.up('form');

        if (form.getForm().isValid()) {
            form.getForm().submit({

                url : 'data/Downloads.aspx',
                waitMsg : 'Saving the file...',

                params : {
                    mode : 'UPLOADFILE',
                    client : SYSTEM.CLIENT

                },

                success : function(form, a) {
                    this.mWin = Ext.create('App.view.GenMessage');
                    this.mWin.addMessage(true, LANG.SUCT, LANG.SUCTxt1);

                },

                failure : function() {

                }
            })
        }
    }, 
```

# sql - Case when in variable declaration

> ID：13270462
> 
> 赞同：0
> 
> 时间：2012-11-07T13:09:27.020
> 
> 标签：sql, sql-server, tsql

![enter image description here](../Images/e4132d3977ddfbab566a21510b0e7d24.png)

I'm looking for another column that will give the overall total counts from each gender next to the `eduCounts` column. The rest of the query works fine. Finding the distinct gender counts in this case has to be done by `select count(distinct patid) from...`

first try:

```
declare @sexcounts int
set @sexcounts = case when members.sex 'm' then (select COUNT(distinct patid) from members where sex='m')
                 when members.sex 'f' then (select COUNT(distinct patid) from members where sex='f')

select sex, edutext, COUNT(*) as eduCounts from 
(
select distinct m.patid, m.sex, e.eduText
    from members as m
    inner join claims as c on c.patid=m.PATID
    inner join icdClm as ic on ic.clmid=c.clmid
    inner join tblICD as t on t.ICD=ic.icd
    inner join EducationTable as e on e.eduID=m.education
    inner join IncomeTable as i on i.incomeID=m.income
    where ISNUMERIC(ic.icd)=1 and SUBSTRING(ic.icd,1,3)='707'
)t
group by sex, eduText
order by sex 
```

second try:

```
declare @sexcounts int
set @sexcounts = (select COUNT(distinct patid),case when sex 'm' then (select COUNT(distinct PATID) from members where sex='m') else (select COUNT(distinct patid) from members where sex='f') 
                    from members)

    select sex, edutext, COUNT(*) as eduCounts from 
    (
    select distinct m.patid, m.sex, e.eduText
        from members as m
        inner join claims as c on c.patid=m.PATID
        inner join icdClm as ic on ic.clmid=c.clmid
        inner join tblICD as t on t.ICD=ic.icd
        inner join EducationTable as e on e.eduID=m.education
        inner join IncomeTable as i on i.incomeID=m.income
        where ISNUMERIC(ic.icd)=1 and SUBSTRING(ic.icd,1,3)='707'
    )t
    group by sex, eduText
    order by sex 
```

I know I could make a derived table and join on the sex column, but I'd like to know how to do it with a variable if at all possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:32:59.107

Do you mean this:

```
select Sex, eduText, eduCounts, sum(eduCounts) over (Partition by Sex) from(
select Sex, eduText, count(eduText) eduCounts
From TableName group by Sex, eduText)x 
```

# java - 摆动中的重叠组件

> ID：13270463
> 
> 赞同：2
> 
> 时间：2012-11-07T13:09:30.733
> 
> 标签：java, swing

我正在开发一个应用程序来设计一个关键系统。主界面由一个复选框“矩阵”组成，显示锁和钥匙之间的对应关系。可以为每个锁和钥匙命名，以帮助将它们分配给适当的所有者。为了节省空间，我想稍微倾斜一下锁名称的文本框。

![目前的混乱](../Images/d241e64d15d17937e24c35694ca0c47a.png) ![目标](../Images/872f73f60ba0614b2b36eb02cba4be0a.png)

我最初的尝试显示在屏幕截图中（边框涂成红色），以及我的目标的绘图。JXTransformer类让我[可以](http://weblogs.java.net/blog/alexfromsun/archive/2006/07/jxtransformer_t.html)旋转字段，现在字段只是绝对定位，没有布局管理器。

问题是旋转的文本字段似乎有一个不透明的“背景”，它以随机的方式模糊了其他文本字段。我不确定这是否是 JXTransformer 的产物，或者是否根本不可能在 Swing 中让组件重叠。

我非常感谢任何帮助或证明这确实是不可能的。

编辑：为了澄清，布局被冻结，不需要调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:58:24.647

这在一定程度上取决于您使用的 Java 版本。Alexander Potochkin 编写了一个名为 JXLayer 的库，您可以将其用于 Java 7 之前的版本。您可以在此处找到对此的简短介绍： [JXLayer 简介](http://weblogs.java.net/blog/alexfromsun/archive/2008/06/the_new_jxlayer.html)

这已经演变成 JLayer，您现在可以在 Java 7 中找到它。您可以在以下页面上找到一些基本演示： [JLayer 视频](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

基本上你可以做的是在你的组件之上编写一个 UI，它会进行 2D 旋转。我过去曾成功地使用过这种方法。

![在此处输入图像描述](../Images/cab16913b5b6e6903ae4eb6f51783935.png)

```
import java.awt.*;

import javax.swing.*;
import javax.swing.plaf.LayerUI;

/**
 * Example of rotation using {@link JLayer} in Java7.
 */
public class TiltedApproach {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Tilted components");
                LayerUI<JComponent> layerUI = new RotateUI();
                JPanel panel = new MyPanel();
                JLayer<JComponent> jLayer = new JLayer<JComponent>(panel, layerUI);
                frame.getContentPane().add(jLayer);
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setMinimumSize(new Dimension(800, 450));
                frame.setLocationRelativeTo(null); // Center
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    static class MyPanel extends JPanel {

        MyPanel() {
            add(new JLabel("Hello"));
            add(new JLabel("World"));
        }
    }

    static class RotateUI extends LayerUI<JComponent> {
        @Override
        public void paint(Graphics g, JComponent c) {
            Graphics2D g2 = (Graphics2D) g.create();
            g2.rotate(0.4);
            super.paint(g2, c);
            g2.dispose();
        }
    }
} 
```

# javascript - jvector地图中的国家代码转换问题

> ID：13270464
> 
> 赞同：3
> 
> 时间：2012-11-07T13:09:31.107
> 
> 标签：javascript, jquery, jvectormap

我正在尝试使用 jvectormap，它以 ISO 3166-1 alpha-2 国家代码格式输入。

我的输入是国名的形式。我检查了 JavasSript 中的名称到代码转换器，但没有。

我想知道如何进行转换，以便我可以将我的输入与 jvectormap 输入相匹配。有任何想法吗？

检查链接：http: [//jsfiddle.net/sprugman/fkRnC/7/](http://jsfiddle.net/sprugman/fkRnC/7/)

jvectormap 输入模型就像

```
var gdpData = {
"US": 25,
"CA": 50,
"RU": 100,
"AO": 200,
"AG": 200,
"AR": 400,
"BR":200 
 }; 
```

谷歌[地理图表](https://developers.google.com/chart/interactive/docs/gallery/geochart)也比这个更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:36:20.107

您可以使用`world_mill_en`地图和`name`属性中的国家名称值生成以国家名称为键的新地图：

```
//Clone the world map that uses ISO-2 keys
var countriesByName = $.extend(true, {}, jvm.WorldMap.maps['world_mill_en']);

countriesByName.paths = {}; //clear the paths

$.each(jvm.WorldMap.maps['world_mill_en'].paths, function(key, obj){
   //create new path entries, keyed by the country name
   countriesByName.paths[obj.name] = obj; 
});  

//Add this new data map, to be loaded
$.fn.vectorMap('addMap', 'world_mill_en_byName',countriesByName); 
```

然后加载键控国家名称的数据并引用新创建的地图：

```
//data with country name as key
var gdpData = {
    "United States of America": 25,
    "Canada": 50,
    "Russia": 100,
    "Angola": 200,
    "Argentina": 400
};

$(function() {
    $('#map').vectorMap({
        map: 'world_mill_en_byName', //load up the map with country name as key
        backgroundColor: '#eeeeee',
        regionStyle: {
            initial: {
                fill: '#cccccc'
            }
        },
        series: {
            regions: [{
                values: gdpData,
                scale: ['#C8EEFF', '#0071A4'],
                min: 0,
                max: 400,
                normalizeFunction: 'polynomial'}]
        },
        hoverOpacity: 0.7,
        hoverColor: false
    });

    var mapObj = $('#map').vectorMap('get', 'mapObject');
    var steps = 4;
    for (var i = 0; i <= steps; i++) {
        var val = 400 / steps * i;
        var color = mapObj.series.regions[0].scale.getValue(val);
        $('#key').append('<div style="background-color:' + color + ';">' + val + ' - ' + color + '</div>');
    }
}); 
```

适用于您发布的 jsfiddle：http: [//jsfiddle.net/hansenmc/fkRnC/8/](http://jsfiddle.net/hansenmc/fkRnC/8/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:44:16.157

这是一个常见的要求，但很难一劳永逸地解决这个问题，因为写国家甚至国家地区的名称有很多变体。[因此，这里的解决方案可能是使用来自维基百科](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)或任何其他来源的数据将国家名称转换为国家代码。

# php - 动态 Google 加一个 +1 按钮（带有更改的网址）

> ID：13270465
> 
> 赞同：2
> 
> 时间：2012-11-07T13:09:34.227
> 
> 标签：php, javascript, web, google-plus, google-plus-one

我有一个带有照片库的网站，我希望加一个按钮指向照片页面而不是画廊本身，这意味着当用户翻阅图像时我需要动态更改它。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T14:16:29.973

在 head 标签中写下：

```
// Load +1 script
(function() {
  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
  po.src = 'https://apis.google.com/js/plusone.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})(); 
```

HTML 代码：

```
<div id="plusone_container">

</div> 
```

并在任何你想设置 +1 按钮的 url 的地方写下这个 jQuery：

```
 $("#plusone_container").html('<div id="plusone"></div>');
    gapi.plusone.render("plusone", { "href": "Your URL" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:15:49.210

从[官方文档](https://developers.google.com/+/plugins/+1button/?hl=en#target-url)：

> 设置 +1 目标网址
> 
> +1 的 URL 按以下顺序确定：
> 
> 1.  按钮的 href 属性 此属性明确定义 +1 目标 URL。
> 2.  页面标签 如果未提供 +1 按钮的 href 属性，Google 将使用该页面的规范 URL。有关为页面定义规范 URL 的更多信息，请参阅此帮助文章。
> 3.  document.location.href 提供的 URL，不推荐使用。如果这些项目都不存在，Google 将使用在 DOM 中找到的页面 URL。由于此 URL 可能包含会话 ID、锚点或其他实际上不属于规范 URL 的参数，因此我们强烈建议您为 +1 按钮设置 href 属性或向您的页面添加标签。

假设您有一组代表不同照片的标签。让我们假设每张照片都由以下内容表示：

```
<div class="single-photo">
    <img/>
    <a href="http://single.photo.com/path">My photo</a>

</div> 
```

添加 +1 按钮的最简单方法就是这样做：

```
<div class="single-photo">
    <img/>
    <a href="http://single.photo.com/path">My photo</a>
    <div class="g-plusone" data-href="http://single.photo.com/path" data-other-parameter="other-parameter-value"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:28:31.277

通过创建显式呈现的按钮并更改规范链接的 href 解决了该问题。如果没有向按钮提供 url，它会从规范链接属性中获取它的 url，然后通过重新渲染它，我可以让它每次都指向不同的 url。

# sql-server - 如何从 Visual Studio 2012 连接到 SQL Server 2000 数据库

> ID：13270467
> 
> 赞同：2
> 
> 时间：2012-11-07T13:09:38.643
> 
> 标签：sql-server, visual-studio-2012

我有一个 SQL Server 2000 数据库，需要从 Visual Studio 2012 访问。不用说，SQL Server 的数据提供者需要 SQL Server 2005 或更高版本，而 OLE 的数据提供者声称支持 SQL Server 2000 或更高版本，说“SQL Server Native Client 11.0 不支持连接到 SQL Server 2000 或更早版本。”

是否可以安装某种插件来访问 SQL Server 2000？

最终我的应用程序将运行在服务器本身上。访问这个较旧的数据库是否需要一些特殊的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:10:10.710

...而且您不能使用实体框架...

但是，您必须像这样创建一个连接字符串：

```
 String sConexion = "Asynchronous Processing=true;"
                    + " Pooling=false;User ID=" + user + "; "
                    + " password= " + password + "; "
                    + " Initial Catalog=" + database + "; "
                    + " Data Source=" + server;// + ",1433";
SqlConnection conexion = new SqlConnection(sConexion);
conexion.Open(); 
```

您可以从这里 [ConnectionStrings获得一些参考](http://www.connectionstrings.com/sql-server)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-10T09:24:31.753

这也可以使用 GUI。我使用的是 Visual Studio 2013，但我怀疑 2012 年也是如此。

在“添加连接”窗口中，窗口底部有一个“高级”按钮。在此范围内，即使对于 OLEDB，默认提供程序似乎也是“SQLNCLI11”。但是，可以将其更改为“SQLOLEDB”，然后它甚至可以与 SQL Server 2000 一起使用。

![OLEDB窗口](../Images/253a48c9ce7d55a76760adc9c0de2594.png)

# django-registration - Django-registration：处理表单输入并将其放入数据库的views.py文件在哪里？

> ID：13270470
> 
> 赞同：1
> 
> 时间：2012-11-07T13:09:48.940
> 
> 标签：django-registration

我正在尝试使用 django-registration 在我正在构建的站点上设置注册和身份验证，并且我已经尽可能地遵循了有关该主题的所有教程（例如[http://www.michelepasin.org/blog /2011/01/14/setting-up-django-registration/](http://www.michelepasin.org/blog/2011/01/14/setting-up-django-registration/)等等）。我无法理解的是 django-registration 获取views.py 文件以实际将表单输入放入数据库的位置。我试过使用默认后端（'registration.backends.default.DefaultBackend'），但注册文件夹中似乎没有实际的views.py代码来处理表单输入。

似乎它应该从registration.views 导入这个（即从registration.views 导入激活，从registration.views 导入寄存器），但同样没有包含views.py 文件。一定要自己写吗？我假设默认后端应该自己处理这个问题，否则后端基本上没用。谁能告诉我这里缺少什么？

对于提出这样一个菜鸟问题，我深表歉意，但我在过去一两天的大部分时间里都在研究这个问题，并且基本上放弃了在没有帮助的情况下寻找答案。我也是 django 和 python 的新手，所以如果有人可以在这里提供帮助，那就太好了......

# java - Maven多模块项目问题？

> ID：13270472
> 
> 赞同：1
> 
> 时间：2012-11-07T13:09:55.413
> 
> 标签：java, maven

嗨，我有类似这样的多模块 Maven 项目..

> 父母
> 
> 1.  核
> 2.  网络

并且我的**Web**项目依赖于**Core**项目类，因此我在**Web**项目**pom.xml**文件中添加了**Core**项目作为依赖项。但是当我运行**Web项目时，从 Eclipse 内部，lib 目录在****类路径**中不包含**Core-project.jar**文件，因此项目没有运行。如何解决这个问题？..我在**Web Projec** * *Pom.xml* * 文件中使用的插件..

 *******```
<plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <wtpversion>2.0</wtpversion>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
            </plugin>
        </plugins> 
```

我正在使用 Tomcat6 服务器。

我的 Web 项目 pom.xml 文件中的这个依赖标记...

```
<dependency>
            <groupId>org.csdc</groupId>
            <artifactId>core-java</artifactId>
            <version>5.0.0</version>
        </dependency> 
```

当我从 Eclipse 内部运行 web 项目时，我没有在这条路径中获取**core.jar ......**

> workspace_maven.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\web\WEB-INF\lib

任何人有任何这样的问题。如果是，请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:36:03.453

在 Eclipse 下：您不需要在类路径中包含 core.jar。检查你的库（web->properties->java build path->librairies），你应该看到你的核心文件夹，而不是你的 core.jar。

确保在您的 Maven 构建目标中选中“解决工作空间依赖项”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:57:05.610

为 eclipse 安装 m2e 和 m2e-wtp 插件。m2e-wtp 处理 web 项目和 tomcat。您不需要您在问题中记录的 pom 的插件部分。

要让 maven 在 eclipse 中使用项目，您需要确保父项目与子项目处于同一级别，并且父项目的 pom 如下所示

```
<modules>
    <module>../project1</module>
    <module>../project2</module>
</modules> 
```

不幸的是，这是让 maven 在 eclipse 和 jenkins 中正常工作以进行多模块构建的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:12:52.087

不完全清楚这就是您要查找的内容，但是 jar 不会出现在 Eclipse 中的 lib 目录下，因为它们在您的存储库中。

当我右键单击项目时，我的 Eclipse 版本有一个“maven”菜单。如果您也这样做，请确保您选择了“启用 Maven 自然”。这将使项目名称旁边出现一个小 M 和项目中的一个新文件夹，其中包含您的 pom.xml 中列出的所有依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:26:44.317

运行 mvn clean package 后检查目标目录中的战争。如果它在那里丢失，请检查 pom.xml 中“Web”的“Core”依赖范围，确保没有提供或测试它。

从你的 pom 片段中听起来你正在使用 mvn eclipse:eclipse （你不应该再使用它了），而是使用 m2eclipse 插件： http: [//www.sonatype.org/m2eclipse](http://www.sonatype.org/m2eclipse)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T16:57:20.973

1.转到 web 项目构建路径 -> 库 - 添加变量 -> 配置变量 -> 新建 -> 输入名称为 M2_REPO 和路径为 C:\Users\usernmee.m2\repository 并单击确定。所有依赖项都将在项目构建路径中配置。所以在 web 项目中没有编译错误。
2.Maven项目需要采取war并部署在任何Web容器（tomcat等）中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T13:18:20.033

安装正确的插件集并正确配置它们。

如果您需要更详细的答案，您应该向我们提供更多信息，您尝试实现什么，您使用哪些插件，什么样的 Web 服务器，您如何部署，您是使用 Maben 部署还是使用 Eclipse WTP 等。

**[编辑]**当您在 Eclipse 中启动项目时，您不会在 project/WEB-INF/lib 中看到任何内容 - 没有必要在其中放置任何内容，因为未使用此文件夹。

相反，您可能会将项目部署到 Web 服务器。有 Eclipse 的插件可以做到这一点（即启动一个 Web 服务器，将您的项目部署到其中）但是由于您没有提及您是如何在 Eclipse 中“启动”项目的，因此您正在使用哪个版本的 Eclipse 和你点击了哪些按钮，你如何配置 Eclipse 等等。真的很难帮助你。*******

# jquery - 如何使用新的 jQuery .on() 函数（使用 CoffeeScript）？

> ID：13270474
> 
> 赞同：0
> 
> 时间：2012-11-07T13:09:55.300
> 
> 标签：jquery, ruby-on-rails-3, coffeescript

`.on()`似乎没有像`.live()`. 我想做的只是一个简单的提醒让我继续前进。我的页面上有以下元素：

```
<a class="add_showcase_item" href="javascript://">621015</a> 
```

我有以下 CoffeeScript：

```
$("a").live "click", ".add_showcase_item", ->
  alert "hello"
  false 
```

不幸的是，这会导致警报在每个链接上都响起。我知道这没有任何意义。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:15:31.880

正如[jQuery 文档](http://api.jquery.com/on/)所说，您需要指定委托，然后作为参数提供您要侦听的实际选择器：

```
$("body").on "click", "a.add_showcase_item" , -> //... 
```

# ember.js - 将更改恢复为关联后，Ember 关联的子记录消失

> ID：13270479
> 
> 赞同：4
> 
> 时间：2012-11-07T13:10:10.030
> 
> 标签：ember.js, ember-data

在更改关联然后将其更改回来（几次）后，关联将丢失。

```
 var newCar = MyApp.CarModel.find('hummer');
    MyApp.Person.find('wycats').set('car', newCar);
    var oldCar = MyApp.CarModel.find('toyota');
    MyApp.Person.find('wycats').set('car', oldCar); 
```

不太容易解释，但在这个 jsfiddle 中很容易看到：

[http://jsfiddle.net/Vz3E6/2/](http://jsfiddle.net/Vz3E6/2/)

按此顺序点击按钮，您会看到关联丢失：1、2、1、2

我正在使用`ember-latest`和`ember-data-latest`。

*编辑*：我在此处的 ember-data 问题跟踪器上创建了此问题的副本作为问题：[#465](https://github.com/emberjs/data/issues/465)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:15:38.613

这是最新版本的 Ember Data 中的一个错误。当 Ember Data 检测到对子节点的更改将有效地撤消较早的尚未提交的更改时，它会回滚父节点，但实际上无法回滚子节点并且（由于一些混乱的内部细节）最终设置它改为 null 。

我们有[一个开放的拉取请求，引入了 hasOne 关联](https://github.com/emberjs/data/pull/475)，恰好用[这条线](https://github.com/mhelabs/ember-data/commit/592d85ad2914cd5f24ef61188f1264a1ea87ded0#L5R283)修复它，正如[这个测试](https://github.com/mhelabs/ember-data/commit/592d85ad2914cd5f24ef61188f1264a1ea87ded0#L13R544)所证明的那样。

# cakephp - cakephp 2.2.3 - 无法通过 hasMany 获取关联数据（加入模型）

> ID：13270480
> 
> 赞同：2
> 
> 时间：2012-11-07T13:10:12.227
> 
> 标签：cakephp, cakephp-2.2

我无法通过（加入模型）关联使用 hasMany 获取关联的模型数据。我正在使用 cakephp 2.2.3 相同的发现在 cakephp 1.3 中没问题，所以我不知道是怎么回事......

事件 hasMany ScoresToEvent。Scores 有很多 ScoresToEvent。ScoresToEvent 属于事件和分数。

ScoresToEvent 会有额外的信息，所以我不能使用 HATBM。

一些代码：

```
event.php    
class Event extends AppModel{
      public $name='Event';
      public $hasMany=array('ScoresToEvent');
      public $belongsTo=array('Entity');
      public $actsAs=array('containable');
} 

score.php
class Score extends AppModel{
      public $name='Score';
      public $hasMany=array('ScoresToEvent');
      public $belongsTo=array('Entity');
}

scores_to_event.php
class ScoresToEvent extends AppModel{
   public $name='ScoresToEvent';
   public $belongsTo=array('Event','Score');
} 
```

当我检索数据时，我得到以下结果：

```
$this->Event->ScoresToEvent->find('all', array('recursive'=>2))
array(
    (int) 0 => array(
        'ScoresToEvent' => array(
            'id' => '8',
            'event_id' => '7',
            'score_id' => '1'
        )
    ),
    (int) 1 => array(
        'ScoresToEvent' => array(
            'id' => '9',
            'event_id' => '7',
            'score_id' => '3'
        )
    )
) 
```

在这种情况下，我必须获取事件和分数数据。

如果我尝试使用可包含它会返回*模型“ScoresToEvent”与模型“Score”*和此数组无关，因此它不会检索分数数据......

```
$this->Event->find('all', array(
      'contain'=>array(
         'Entity',
         'ScoresToEvent'=>array('Score'=>array('Entity'))
      ),
      'conditions'=>array('Event.id'=>7));

array(
    (int) 0 => array(
        'Event' => array(
            'id' => '7',
            'entity_id' => '17',
            'start_date' => '2012-07-24',
            'status' => null,
            'end_date' => null
        ),
        'Entity' => array(
            'id' => '17',
            'title' => 'y',
            'content' => '',
            'subtitle' => '',
            'type' => 'Evento',
            'avatar' => null,
            'image' => null
        ),
        'ScoresToEvent' => array(
            (int) 0 => array(
                'id' => '8',
                'event_id' => '7',
                'score_id' => '1'
            ),
            (int) 1 => array(
                'id' => '9',
                'event_id' => '7',
                'score_id' => '3'
            )
        )
    )
) 
```

我的错在哪里？代码的哪一部分是错误的？我在全新的 cakephp 2.2.3 安装上试过这个

谢谢大家

ps 相同的代码在 cakephp 1.3 中正常工作 pps 不考虑“实体”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:19:10.807

我认为是模型名称的问题。尝试将文件重命名`scores_to_event.php`为`ScoresToEvent.php`. 但在这种情况下，我认为这个模型的最佳名称是：ScoreEvent.php，更合适。在尝试像这个例子一样向您的模型插入更多信息之后：进入 ScoreEvent.php

```
public $belongsTo = array(
        'Event' => array(
            'className'    => 'Event',
            'foreignKey'   => 'event_id'
        ),
       'Score' => array(
            'className'    => 'Score',
            'foreignKey'   => 'score_id'
        )
); 
```

# symfony - 在 Symfony2 中覆盖单个路由

> ID：13270484
> 
> 赞同：5
> 
> 时间：2012-11-07T13:10:26.200
> 
> 标签：symfony, routes

如何在 Symfony2 中覆盖单个路由？

我有一个附带**`bundle_routing.yml`**文件的捆绑包。
在扩展此父捆绑包的捆绑包中，我也有路由文件： 请注意，文件的名称不同。 **`routing.xml`**

在这个路由文件中，我喜欢覆盖单个父路由。
我试图简单地重新声明它并改变模式。
但它没有应用。

家长：

```
MyParentBundle_detailpage:
    pattern:  /detail
    defaults: { _controller: "MyParentBundle:Item:detail" } 
```

孩子：

```
<route id="MyParentBundle_detailpage" pattern="/itemDetails">
        <default key="_controller">MyParentBundle:Item:detail</default>
</route> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T13:33:44.267

自己找到原因：是因为主路由文件中的导入顺序。

```
app/config/routing.yml 
```

必须先导入父路由，然后必须导入子捆绑包的路由。

```
MyParentBundle:
    resource: "@MyParentBundle/Resources/config/bundle_routing.yml"
    prefix:   /
MyChildBundle:
    resource: "@MyChildBundle/Resources/config/routing.xml"
    prefix:   / 
```

# logging - 如何将输入记录到 Fuse ESB 中的代理服务？

> ID：13270486
> 
> 赞同：0
> 
> 时间：2012-11-07T13:10:39.133
> 
> 标签：logging, proxy, fuseesb

我在 Fuse ESB 中配置了一个代理服务。我想将输入记录到代理中。有一个日志组件，但除了硬编码消息之外，我无法记录任何内容。我试图记录 $body 以获取 SOAP 消息，但这失败了，因为它似乎中断了在我的代理中传递的消息（我正在重新路由到 ESB 中的另一个端口）这是我的 blueprint.xml

```
<?xml version="1.0" encoding="UTF-8"?>
            <blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:camel="http://camel.apache.org/schema/blueprint"
                   xsi:schemaLocation="
                   http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
                   http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd">

              <camelContext trace="false" id="blueprintContext" xmlns="http://camel.apache.org/schema/blueprint">
                <route id="httpBridge">
                    <from uri="jetty:http://0.0.0.0:8282/cxf/PersonServiceCF?matchOnUriPrefix=true"/>
                    <log message="&quot;The message contains ${body}&quot;" loggingLevel="INFO" logName="OutputLog" id="OutputLog">
                        <description>logs output
            &lt;log message="&amp;quot;The message contains ${body}&amp;quot;" loggingLevel="INFO" logName="InputLog" id="InputLog"&gt;
                        &lt;description&gt;logs input&lt;/description&gt;
                    &lt;/log&gt;</description>
                    </log>
                    <to uri="jetty:http://localhost:8181/cxf/PersonServiceCF?bridgeEndpoint=true&amp;throwExceptionOnFailure=false"/>
                </route>
            </camelContext>
            </blueprint> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:20:26.967

找到答案仅供参考 - 您需要在您的

# css - Wordpress 的返回顶部按钮

> ID：13270489
> 
> 赞同：0
> 
> 时间：2012-11-07T13:10:52.960
> 
> 标签：css, wordpress, html

[http://themeforest.net/item/retro-portfolio-one-page-vintage-wordpress-theme/full_screen_preview/1708109](http://themeforest.net/item/retro-portfolio-one-page-vintage-wordpress-theme/full_screen_preview/1708109)

我希望创建类似的东西，但是有一个漂亮的按钮可以将人带回页面顶部，以及一个静态标题 DIV。

会是我固定顶部 div 的情况吗？

```
#div{position: fixed; } 
```

back to top 函数也可以使用：

```
"<a href="#top">LINKING TEXT HERE</a>" 
```

但是有一些 CSS 样式？

谢谢克里斯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:31:53.067

有一个非常好的插件可以用来实现这一点。你可以在这里找到它：[http ://wordpress.org/extend/plugins/dynamic-to-top/](http://wordpress.org/extend/plugins/dynamic-to-top/)

# java - 如何将两个数组之间的交集作为新数组？

> ID：13270491
> 
> 赞同：72
> 
> 时间：2012-11-07T13:11:01.430
> 
> 标签：java, c++, c, algorithm

我在各种情况下多次遇到这个问题。尽管我对 C 或 Java 很熟悉，但它对所有编程语言都是通用的。

让我们考虑两个数组（或集合）：

```
char[] A = {'a', 'b', 'c', 'd'};
char[] B = {'c', 'd', 'e', 'f'}; 
```

如何将两个数组之间的公共元素作为新数组？在这种情况下，数组 A 和 B 的交集是`char[] c = {'c', 'd'}`。

我想避免一个数组在另一个数组中的重复迭代，这将增加执行时间（A 的长度乘 B 的长度），这在大型数组的情况下太多了。

有什么方法可以在每个数组中进行一次传递以获取公共元素？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-11-07T13:15:23.347

```
foreach element e in array A
    insert e into hash table H

foreach element e in array B
    if H contains e 
        print e 
```

这个算法是`O(N)`在时间和`O(N)`空间上的。

为了避免额外的空间，您可以使用基于排序的方法。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-07T14:20:58.053

效率的下限是 O(n) - 您至少需要读取所有元素。然后有几种方法：

## 最简单的方法

在数组 2 中搜索数组 1 中的每个元素。时间复杂度 O(n^2)。

## 排序方法

您只需要对数组 1 进行排序，然后使用二进制搜索从数组 2 中搜索元素。时间复杂度：排序O(nlogn)，搜索O(n * logn) = O(nlogn)，总计O(nlogn)。

## 哈希方法

从数组一元素创建一个哈希表。在哈希表中从第二个表中搜索元素。时间复杂度取决于散列函数。您可以在最佳情况下实现 O(1) 搜索（所有元素将具有不同的哈希值），但在最坏情况下实现 O(n) （所有元素将具有相同的哈希值）。总时间复杂度：O(n^x)，其中 x 是哈希函数效率的一个因子（介于 1 和 2 之间）。

一些散列函数可以保证构建一个没有冲突的表。但是对于每个元素，建筑不再需要严格的 O(1) 时间。在大多数情况下它将是 O(1)，但如果表已满或遇到冲突，则需要重新哈希表 - 花费 O(n) 时间。这种情况并不经常发生，比干净添加的频率要低得多。所以 AMORTIZED 时间复杂度是 O(1)。我们不关心一些添加花费 O(n) 时间，只要大多数添加花费 O(1) 时间。

但即便如此，在极端情况下，每次插入都必须重新哈希表，因此严格的时间复杂度为 O(n^2)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-07T13:32:25.870

我知道某些语言中有一些方法可以完全满足您的要求，您是否考虑过查看其中的一些实现？

PHP - [array_intersect()](http://php.net/manual/en/function.array-intersect.php)

```
$array1 = array("a" => "green", "red", "blue");
$array2 = array("b" => "green", "yellow", "red");
$result = array_intersect($array1, $array2);
print_r($result);

>> green
   red 
```

Java - [List.retainAll](https://docs.oracle.com/javase/8/docs/api/java/util/List.html#retainAll-java.util.Collection-)

```
Collection listOne = new ArrayList(Arrays.asList("milan","dingo", "elpha", "hafil", "meat", "iga", "neeta.peeta"));
Collection listTwo = new ArrayList(Arrays.asList("hafil", "iga", "binga", "mike", "dingo"));

listOne.retainAll( listTwo );
System.out.println( listOne );

>> dingo, hafil, iga 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-07T13:32:47.557

因为这在我看来像一个字符串算法，所以我暂时假设不可能对这个序列（因此是字符串）进行排序，然后你可以使用[最长公共序列算法（LCS）](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

假设输入大小是恒定的，那么问题的复杂度为 O(nxm)，（两个输入的长度）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-07T13:42:41.910

```
 public static void main(String[] args) {
        char[] a = {'a', 'b', 'c', 'd'};
        char[] b = {'c', 'd', 'e', 'f'};
        System.out.println(intersect(a, b));
    }

    private static Set<Character> intersect(char[] a, char[] b) {
        Set<Character> aSet = new HashSet<Character>();
        Set<Character> intersection = new HashSet<Character>();
        for (char c : a) {
            aSet.add(c);
        }
        for (char c : b) {
            if (aSet.contains(c)) {
                intersection.add(c);
            }
        }
        return intersection;
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-07T23:22:09.937

```
int s[256] // for considering all ascii values, serves as a hash function

for(int i=0;i<256;i++)
s[i]=0;

char a[]={'a','b','c','d'};
char b[]={'c','d','e','f'};

for(int i=0;i<sizeof(a);i++)
{
   s[a[i]]++;
 }

 for(int i=0;i<sizeof(b);i++)//checker function
 {
     if(s[b[i]]>0)
       cout<<b[i]; 
  }

  complexity O(m+n);
  m- length of array a
  n- length of array b 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-07T14:35:51.237

# 谷歌番石榴

对此已经有很多很好的答案，但是如果您想要使用库进行延迟编码的单线方法，我会使用[Google Guava](http://code.google.com/p/guava-libraries/) (for Java) 及其[`Sets.intersection`](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html#intersection(java.util.Set,%20java.util.Set))方法。

*^(（手头没有编译器，请耐心等待）)*

```
char[] A = {'a', 'b', 'c', 'd'};
char[] B = {'c', 'd', 'e', 'f'};

Set<Character> intersection = Sets.intersection(
    Sets.newHashSet<Character>(Chars.asList(a)),
    Sets.newHashSet<Character>(Chars.asList(b))
); 
```

显然，这是假设两个数组都没有重复项，在这种情况下，使用集合数据结构会更有意义，并且允许更有效地进行这种操作，特别是如果您从一开始就没有从基元数组开始.

可能适合也可能不适合您的用例，但对于一般情况来说，这是一种不费吹灰之力的方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-07T13:15:52.097

1.  对两个数组进行排序。
2.  然后循环，直到它们具有共同的元素或数组之一到达其末尾。

渐近地，这需要排序的复杂性。即 O(NlogN) 其中 N 是较长输入数组的长度。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-07T16:39:50.007

如果您关心重复，请使用哈希映射来索引列表 A，其中键是元素，值是该元素已被看到的次数。

您遍历 A 中的第一个元素和每个元素，如果它不存在于地图中，则将其放入其中，值为 1，如果它已存在于地图中，则将其添加到该值。

接下来，遍历 B，如果值存在，则减 1。如果不存在，则将 -1 放入表中该元素的值中。

最后，遍历地图，对于任何值为 != 0 的元素，打印出差异。

```
private static <T> List<T> intersectArrays(List<T> a, List<T> b) {
    Map<T, Long> intersectionCountMap = new HashMap<T, Long>((((Math.max(a.size(), b.size()))*4)/3)+1);
    List<T> returnList = new LinkedList<T>();
    for(T element : a) {
        Long count = intersectionCountMap.get(element);
        if (count != null) {
            intersectionCountMap.put(element, count+1);
        } else {
            intersectionCountMap.put(element, 1L);
        }
    }
    for (T element : b) {
        Long count = intersectionCountMap.get(element);
        if (count != null) {
            intersectionCountMap.put(element, count-1);
        } else {
            intersectionCountMap.put(element, -1L);
        }            
    }
    for(T key : intersectionCountMap.keySet()) {
        Long count = intersectionCountMap.get(key);
        if (count != null && count != 0) {
            for(long i = 0; i < count; i++) {
                returnList.add(key);
            }
        }
    }
    return returnList;
} 
```

这应该在 中运行`O(n)`，因为我们只对 List 进行一次迭代，对 Map 进行一次。Java 中使用的数据结构应该是高效的，因为其`HashMap`构造的容量可以处理最大大小的列表。

我使用 a`LinkedList`作为返回值，因为它为我们提供了一种为未知大小的交集添加和迭代列表的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-07T13:18:56.337

最好的方法是根本不从数组开始。数组最适合随机访问元素，但不是最适合搜索（这就是找到交集的全部意义所在）。当您谈论*交集*时，您必须将数组视为集合。所以使用更合适的数据结构（在Java中，a `Set`）。然后任务效率更高。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-11-07T13:27:05.330

您可以使用树，但时间将是 O(n(log n)) 并且元素必须具有可比性

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-11-14T12:28:31.587

首先，使用最佳排序算法对两个数组进行排序。
然后，通过线性搜索，您可以获得公共元素。

如果提供了额外的空间，那么我们可以使用哈希表来做到这一点。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-03-12T01:25:18.640

在红宝石中你可以说

```
a = ['a', 'b', 'c', 'd']
b = ['c', 'd', 'e', 'f']
c = a & b 
```

c 包含 ['c','d']

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-10-01T14:29:24.113

首先对两个数组进行排序，然后迭代它们，如果它们是相同的元素，则添加到要返回的数组中。

代码在这里：

```
public static void printArr(int[] arr){
    for (int a:arr){
        System.out.print(a + ", ");
    }
    System.out.println();
}

public static int[] intersectionOf(int[] arr1, int[] arr2){
    Arrays.sort(arr1);
    Arrays.sort(arr2);

    printArr(arr1);
    printArr(arr2);

    int i=0, j=0, k=0;
    int[] arr = new int[Math.min(arr1.length, arr2.length)];

    while( i < arr1.length && j < arr2.length){
        if(arr1[i] < arr2[j]){
            i++;
        } else if(arr1[i] > arr2[j]){
            j++;
        } else {
            arr[k++] = arr1[i++];
            j++;
        }
    }
    return Arrays.copyOf(arr, k);
}

public static void main(String[] args) {
    int[] arr1 = {1, 2, 6};
    int[] arr2 = {10, 2, 5, 1};
    printArr(intersectionOf(arr1,arr2));
} 
```

输出：

```
arr1: 1, 2, 6, 
arr2: 1, 2, 5, 10, 
arr: 1, 2, 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-11-07T18:33:06.687

假设您正在处理 ANSI 字符。该方法应该与 Unicode 类似，只需更改范围即可。

```
char[] A = {'a', 'b', 'c', 'd'};
char[] B = {'c', 'd', 'e', 'f'};
int[] charset = new int[256]

for(int i=0; i<A.length; i++) {
  charset[A[i]]++;
} 
```

现在遍历 B，您可以检查被迭代字符的相应字符集值是否大于 0。您可以将它们存储在列表或任何其他集合中。

这种方法需要 O(n) 时间复杂度和用于检查的恒定空间，而不考虑用于保存公共元素的新数组/列表。

这在空间复杂度方面优于 HashSet/Hashtable 方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-08-08T08:00:57.533

您可以在 .NET 3.5 或更高版本中使用 HashSet。示例 C# 代码：

```
HashSet<int> set1 = new HashSet<int>(new int[]{8, 12, 13, 15});

HashSet<int> set2 = new HashSet<int>(new int[] { 15, 16, 7, 8, 9 });

set1.IntersectWith(set2);

foreach (int i in set1)

   Console.Write(i+ " "); 
```

//输出：8 15

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-10-15T13:55:10.773

现在对其中一个数组 (m Log(m) ) 排序

总时间复杂度：- **(n+m)Log(m)**。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-12-14T05:30:09.363

我希望以下内容会有所帮助。这是两种不同的方法：

*   简单的交集，您可以将一个数组中的所有元素与另一个数组进行比较。

*   基于排序和搜索的方法，该方法对一个数组进行排序并使用二进制搜索在第一个数组中搜索第二个数组元素。

`//`

 ````
public class IntersectionOfUnsortedArrays {
    public static void main(String[] args) {
        int[] arr1 = { 12, 4, 17 };
        int[] arr2 = { 1, 12, 7, 17 };
        System.out.println("Intersection Using Simple Comparision");
        printArray(simpleIntersection(arr1, arr2));
        System.out.println("Intersection Using Sort and Binary Search");
        printArray(sortingBasedIntersection(arr1, arr2));
    }

    /*
     * Simple intersection based on the comparison without any sorting.
     * Complexity O(n^2)
     */
    public static int[] simpleIntersection(int[] a, int[] b) {
        int minlen = a.length > b.length ? b.length : a.length;
        int c[] = new int[minlen];
        int k=0;
        for(int i=0;i<a.length;i++){
            for(int j=0;j<b.length;j++){
                if(a[i]==b[j]){
                    c[k++]=a[i];
                }
            }
        }
        int arr[] = new int[k];
        // copy the final array to remove unwanted 0's from the array c
        System.arraycopy(c, 0, arr, 0, k);
        return arr;
    }

    /*
     * Sorting and Searching based intersection.
     * Complexity Sorting O(n^2) + Searching O(log n)
     */

    public static int[] sortingBasedIntersection(int[] a, int[] b){
        insertionSort(a);
        int minlen = a.length > b.length ? b.length : a.length;
        int c[] = new int[minlen];
        int k=0;
        for(int i=0;i<b.length;i++){
            int result = binarySearch(a,0,a.length,b[i]);
            if(result > -1){
                c[k++] = a[result];
            }
        }
        int arr[] = new int[k];
        // copy the final array to remove unwanted 0's from the array c
        System.arraycopy(c, 0, arr, 0, k);
        return arr;
    }

    public static void insertionSort(int array[]) {
        for (int i = 1; i < array.length; i++) {
            int j = i;
            int b = array[i];
            while ((j > 0) && (array[j - 1] > b)) {
                array[j] = array[j - 1];
                j--;
            }
            array[j] = b;
        }
    }

    static int binarySearch(int arr[], int low, int high, int num) {
        if (high < low)
            return -1;
        int mid = (low + high) / 2;
        if (num == arr[mid])
            return mid;
        if (num > arr[mid])
            return binarySearch(arr, (mid + 1), high, num);
        else
            return binarySearch(arr, low, (mid - 1), num);
    }

    public static void printArray(int[] array) {
        for (int value : array) {
            System.out.print(" "+value);
        }
        System.out.println("\n");
    }
} 
````  `* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-11-03T02:25:08.637

如果集合已经排序，如问题所示，那么最好的解决方案（尚未提及）是在 O(n+m) 中运行的类似合并排序的算法。

比较每个集合的第一个元素。如果它们相同，则将元素添加到交集并从它们的集合中弹出两个元素。如果元素不同，则弹出与另一个元素相比更大的元素。重复直到一个集合为空。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-12-16T03:07:03.510

使用 Java 8 特性，这里有一个算法，它尊重列表中的重复项，而不是将列表转换为集合。没有排序，所以没有`n log n`。

1.  将其中一个列表转换为地图，其值为出现次数（成本：O(n)）。
2.  对于另一个列表中的每个项目，如果该项目存在于地图中，则将出现次数减少一（成本：O（n））。

因此，总成本为 O(n)。代码：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

public class Dup {
  public static void main(String[] args) {
    List<Integer> listA = Arrays.asList(3, 1, 4, 1, 9, 5, 9);
    List<Integer> listB = Arrays.asList(2, 6, 5, 3, 5, 8, 9, 7, 9, 3, 2, 3);
    findCommons(listA, listB);
  }

  static void findCommons(List<Integer> listA, List<Integer> listB) {
    Map<Integer, Long> mapA = 
        listA.stream().collect(
            Collectors.groupingBy(Integer::intValue, Collectors.counting()));

    List<Integer> commons = new ArrayList<>();
    listB.stream()
        .filter(e -> mapA.get(e) != null)
        .filter(e -> mapA.get(e) > 0)
        .forEach(e -> {
            mapA.put(e, mapA.get(e) - 1);
            commons.add(e);
        });

    System.out.println(commons);
  }
} 
```

上面的代码将给出这个输出：`[5, 3, 9, 9]`.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-09-28T03:36:48.487

导入 java.util.Scanner；

公共类数组公共{

```
public static void main(String[] args) {
    Scanner sc=new Scanner(System.in);
    // display common element in two diffrent array
    int sizea,sizeb,i=0,j=0,k=0;
    int count=0;
    System.out.println("enter the size array A:"+'\n');
    sizea=sc.nextInt();
    System.out.println("enter the size array B"+'\n');
    sizeb=sc.nextInt();
    int a[]=new int[sizea];
    int b[]=new int[sizeb];
    int c[]=new int[sizea];

    System.out.println("enter the element in array A:"+'\n');
    for (i = 0; i < sizea; i++) {

        a[i]=sc.nextInt();
    }
    System.out.println("enter the element in array B:"+'\n');
    for (i = 0; i < sizeb; i++) {

        b[i]=sc.nextInt();
    }
    System.out.println("the element in array A:"+'\n');
    for (i = 0; i < sizea; i++) {

        System.out.print(a[i]+" ");

    }
    System.out.println('\n');
    System.out.println("the element in array B:"+'\n');
    for (i = 0; i < sizeb; i++) 
    {

        System.out.print(b[i]+" ");
    }

    for (i = 0; i <sizea; i++) 
    {
        for (j = 0; j < sizeb; j++) 
        {
           if(a[i]==b[j])
           {
               count++;
               c[k]=a[i];
               k=k+1;
           }
        }
    }
    System.out.println('\n');
    System.out.println("element common in array is");

    if(count==0)
    {
        System.out.println("sorry no common elements");
    }
    else
    {
        for (i = 0; i <count; i++) 
        {

        System.out.print(c[i]+" ");
        }
    }

} 
```

}

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-03-17T12:22:16.323

```
 simply search each element of first array with each element of second array and stored matched result in third array
class Union
{
  public static void main(String[] args) {
  char a[] ={'f','g','d','v','a'};
  char b[] ={'a','b','c','d','e'};
  char temp[] = new char[5];
  int p=0;
  for(int i=0;i<a.length;i++)
  {
    for(int j=0;j<b.length;j++)
    {
      if(a[i]==b[j])     //searches if both array has common element
      {

        temp[p] = a[i];   //if match found store it in a new array
        p++;
      }

    }

  }
  for(int k=0;k<temp.length;k++)
  {
      System.out.println(temp[k]);
  }

  }
} 
````

# asp.net - 在 jQuery AJAX 方法中获得成功后如何使 texbox 为空

> ID：13270495
> 
> 赞同：0
> 
> 时间：2012-11-07T13:11:09.647
> 
> 标签：asp.net, ajax, jquery

当我用 jQuery 的 AJAX 方法添加我的评论时，我感到窒息，压力很大后，我想让这个文本框为空

我的 Ajax 方法是这样的：

```
function AddComments() {
            $(".Comment input[type=text]").keypress(function (e) {
                if (e.which == 13) {
                    var comment = $("#" + this.id).val();
                    var textId = "#" + this.id.replace("txt", "div");
                    $(textId).append(comment);
                    $.ajax({
                        type: "POST",
                        url: "Posts.aspx/AddComments",
                        data: "{'id': '" + this.id.replace("txt", "") + "','comments': '" + comment + "'}",
                        dataType: "json",
                        contentType: "application/json",
                        success: function (response) {
                            $("#" + this.id).val("");
                            //alert(response.d);
                        }
                    });
                }
            });
        } 
```

我想要的是成功，我想让当前文本框为 NULL

```
$("#" + this.id).val(""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:15:02.817

这是一个范围界定问题。`this`在`success`处理程序中保存对`window`对象的引用，而不是`input`被`keypress`触发的对象。您只需要将 缓存`input`在您可以在`success`处理程序中使用的变量中。试试这个：

```
function AddComments() {
    $(".Comment input[type=text]").keypress(function (e) {
        if (e.which == 13) {
            var $input = $(this);
            var comment = $input.val();
            var textId = "#" + this.id.replace("txt", "div");

            $(textId).append(comment);
            $.ajax({
                type: "POST",
                url: "Posts.aspx/AddComments",
                data: "{'id': '" + this.id.replace("txt", "") + "','comments': '" + comment + "'}",
                dataType: "json",
                contentType: "application/json",
                success: function (response) {
                    $input.val("");
                    //alert(response.d);
                }
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:14:03.880

你不能在 jquery ajax 中访问它 像这样将你的对象保存在任何变量中

```
function AddComments() {
            $(".Comment input[type=text]").keypress(function (e) {
                if (e.which == 13) {
                    var Element=this;
                    var comment = $("#" + this.id).val();
                    var textId = "#" + this.id.replace("txt", "div");
                    $(textId).append(comment);
                    $.ajax({
                        type: "POST",
                        url: "Posts.aspx/AddComments",
                        data: "{'id': '" + this.id.replace("txt", "") + "','comments': '" + comment + "'}",
                        dataType: "json",
                        contentType: "application/json",
                        success: function (response) {
                            $(Element).val("");
                            //alert(response.d);
                        }
                    });
                }
            });
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T13:17:29.610

您的成功功能在另一个上下文中，您不能使用它，您必须在 json 响应中发送 id 并执行以下操作：

```
success: function (response) {
  $('#'+response.div_id).val("");
} 
```

并且您的 json 响应应包含在 ajax 请求中传递的 div_id

# c# - 为 Umbraco 后台创建自定义弹出窗口

> ID：13270497
> 
> 赞同：1
> 
> 时间：2012-11-07T13:11:18.530
> 
> 标签：c#, popup, umbraco

[最终编辑] 这是[我编写的代码的链接](https://www.dropbox.com/sh/2ab982wca53wqcc/AhQRsxcWYK)，以防它帮助任何人。

> 我想我有一个解决办法。Umbraco 使用 asp.net 文件作为他们的弹出窗口，这是我还没有使用过的东西，但我想我可以掌握它。我不知道如何从我的类中访问 aspx，我应该在部分类后面编写代码吗？
> 
> 谢谢你的帮助。

我正在使用 Umbraco 开发一个多语言站点，其中内容节点在创建时会自动复制到每种语言。有没有办法实现自定义弹出窗口以确认它应该被复制到所有人？

这实际上不会在网站上，而是在后台。

或者是否可以使用 c# 打开浏览器弹出窗口，因为我真正需要的只是消息框中的布尔值？

[编辑：添加可能的解决方案]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:28:22.813

我通过调整 Umbraco 自己的 create 函数对此进行了排序。我创建了一个新的 .aspx 文件，并将我需要的功能添加到后面的代码中。

我能够添加[一个上下文菜单项](http://umbraco.com/help-and-support/video-tutorials/developing-with-umbraco/events/add-items-to-the-context-menu/TVPlayer)，允许我调用我的新页面并从那里调用一种方法来复制内容。

从该方法中，我传递了新节点并获取父 ID。然后我比较所有匹配的节点名称，并使用 umbraco`document.copy()`方法在正确位置重新创建每种语言下的内容。

如果我可以使代码更通用，那么我会将它作为一个包上传到 Umbraco。

# php - 有没有办法检查网站是否根据那里的 URL 放置 cookie？

> ID：13270499
> 
> 赞同：1
> 
> 时间：2012-11-07T13:11:26.867
> 
> 标签：php, cookies, affiliate

有没有办法检查网站是否根据其 URL 放置 cookie？我宁愿在 PHP 中执行此操作。想知道我是否需要使用 CURL？

只是想弄清楚如何 ping 一个 url 以查看它是否会在我的机器上放置一个 cookie，然后获取有关该 cookie 的一些信息。我这样做的原因是因为我试图找到一种简单的方法来为我的品牌捕获拼写错误，所以我想看看是否为我的附属程序放置了附属像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:33:35.917

要通过向 url 发送 get 请求来获取收到的标头，请使用：

```
$headers = get_headers('http://example.com'); 
```

之后，只需在标题中查找 cookie。get_headers 规范在这里：[http://php.net/manual/en/function.get-headers.php](http://php.net/manual/en/function.get-headers.php)

# asp.net - 无效的 JSON 原语

> ID：13270500
> 
> 赞同：3
> 
> 时间：2012-11-07T13:11:30.347
> 
> 标签：asp.net, json

我收到以下错误。我浏览了论坛，似乎找不到任何帮助。主要问题是我无法复制它，我尝试过不同的浏览器等，但我无法复制它。

我只在几台客户端机器上得到它。

```
[ArgumentException: Invalid JSON primitive: .]
   System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject() +930307
   System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth) +376
   System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer) +120
   System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit) +57
   Telerik.Web.UI.RadButton.LoadPostData(String postDataKey, NameValueCollection postCollection) +238
   System.Web.UI.Page.ProcessPostData(NameValueCollection postData, Boolean fBeforeLoad) +1018
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2653 
```

您能否就我在哪里可以找到错误提供任何建议。

我想澄清我无法复制这个问题，它似乎发生在一些客户端机器上，但我无法弄清楚错误的根源可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:18:26.770

问题可能不是 JSON 响应中的句点 (.)。查看实际的 JSON 响应字符串，看看它是否包含任何无关字符。对我来说，JSON 对象周围有一个意想不到的方法名称。

```
string json = "WeirdMethodName({...});" 
```

我只需要删除无关的方法名称。

```
var json = client.DownloadString(apiUrl);
json = json.Replace("WeirdMethodName(", "").Replace(");","");
var serializer = new JavaScriptSerializer();
var someModel = serializer.Deserialize<SomeModel>(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:18:46.473

看起来你在某个地方有一个值，只是一个句号。不是字符串、整数、日期或对象。这可能会导致问题。找出“。”在哪里 来自，您应该能够解决序列化问题。

# sql - sql - 这两个查询有什么区别？

> ID：13270502
> 
> 赞同：-1
> 
> 时间：2012-11-07T13:11:31.383
> 
> 标签：sql, performance

```
select a.Name from rat. Assessment a where a.AssessmentId = '3'
select a.Name from rat. Assessment a where a.AssessmentId = 3 
```

性能方面有什么不同？第一个慢吗？

我如何知道 sql server 是否已将列或值转换为与列类型或值类型匹配？

我看到了执行计划。不能理解太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:15:56.433

如果不知道您使用哪个数据库、涉及的类型是什么，这并不容易说出来。

许多数据库尝试一次将常量类型转换/强制转换为列类型，因此在从磁盘读取每一行时它们不必这样做。但不能保证这种情况会发生，当它发生时。

但并非每个数据库都尝试匹配类型。所以对于其中一些，你会得到一个错误或者你不会得到任何结果（因为数字不是字符串，所以查询并不真正匹配任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:14:08.507

尽管这两种方法都有效，但如果数据类型`AssessmentID`是数字，则第二个查询会更快，因为不需要转换，而第一个查询需要服务器首先将值转换为数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:14:10.463

第一个需要类型转换（假设 AssessmentID 是数字数据类型），这有其性能开销。在这种情况下，它可以忽略不计，但在更复杂的查询中可能存在性能差异。在某些情况下，如果 MySQL 需要进行类型转换，它就不能有效地使用索引。

# pgadmin - Windows上的pgagent - 无法连接到数据库

> ID：13270505
> 
> 赞同：0
> 
> 时间：2012-11-07T13:11:41.093
> 
> 标签：pgadmin, pgagent

嗨，我需要一点帮助才能让 pgagent 在带有 postgres 9.2.1（ipv4 和 ipv6）的 Windows 2008 上运行

我已登录服务器（远程桌面）并尝试运行作业。

如果我检查作业的输出：

```
SELECT j.jobname, s.jstname, l.jslstart, l.jslduration, l.jsloutput
   FROM pgagent.pga_jobsteplog l
   JOIN pgagent.pga_jobstep s ON s.jstid = l.jsljstid
   JOIN pgagent.pga_job j ON j.jobid = s.jstjobid
  WHERE l.jslstart > 'now'::text::date
  ORDER BY j.jobname, s.jstname, l.jslstart DESC; 
```

我在 jsloutput 中得到**了这个 = 无法连接到数据库！**

使用pgadminIII查看作业时：

```
Enabled = checked
Connection type = local
Database = cachedb
Connection string = (It's empty can't fill when using local connection type)
Kind = sql
(doesn't help to select remote connection and fill the connection string) 
```

这是我的 pg_hba.conf

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             0.0.0.1/0            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

知道我错过了什么吗？

*   尼尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-16T12:38:47.537

在服务器上找到连接文件 C:\Users\[pgagent service username]\AppData\Roaming\postgresql\pgpass.conf 并确保连接字符串在那里。

如果您在安装 pgAgent 时提供了到默认 postgres 数据库的连接，那么即使用户具有访问权限，您也将无法在其他数据库上运行作业。至少根据我的经验，我必须为每个数据库添加连接字符串。

# php - PHP：根据值确定文本颜色

> ID：13270506
> 
> 赞同：-3
> 
> 时间：2012-11-07T13:11:43.740
> 
> 标签：php, css

我已将值存储在一个数组中，并且我想在访问它们时将条件格式应用于输出。我希望值的文本，小于或等于 10，以红色显示，或者，大于 10，以绿色显示。

例如，在下面，我希望结果值 5 显示为红色。

我是这方面的新手，但我认为我需要 CSS 的帮助来实现这一点。

任何意见，将不胜感激。

```
<?php

$total_sql=array();
$total_sql[]=5;
$total_sql[]=10;
$total_sql[]=15;
$total_sql[]=20;

print($total_sql[0]);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:18:14.443

```
<?php

$total_sql=array();
$total_sql[]=5;
$total_sql[]=10;
$total_sql[]=15;
$total_sql[]=20;

print($total_sql[0]);

?>

foreach($total_sql as $item)
{
if($item >10)
{
    echo '<p class="green">'.$item.'</p>';
} else {
    echo '<p class="red">'.$item.'</p>';
}

.red{color:red;}
.green{color:green} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:42:27.717

一个班轮：

```
echo '<div style="color: '.(($score == '5') ? 'red' : 'black').';">'.$score.'</div>'; 
```

比较运算符可以是：

```
$score == 'x'
        > 'y'
       >= 'z'
etc... 
```

我在这里使用了内联样式，但您也可以使用`class=`。

# c# - 大量进程的并行处理

> ID：13270508
> 
> 赞同：0
> 
> 时间：2012-11-07T13:11:51.227
> 
> 标签：c#, process, parallel-processing, threadpool

我使用 a`ThreadPool`来并行执行多个进程，就像[这里](http://www.mindstick.com/Articles/8a6ce546-6516-46c7-9398-edc0d28a38f1/)显示 的那样，不同之处在于我使用一些参数启动了我自己的进程/程序。简而言之，这个程序会计算一些值并将它们写入一个文本文件，然后我会进行比较。

```
public void StartProcess()
{
    string par = @"-p ""foo"" -c 17";
    Process p = Process.Start(@"C:\MyProgramm.exe", par); 
    p.EnableRaisingEvents = true;
    p.Exited += new EventHandler(p_Exited);
}

void p_Exited(object sender, EventArgs e)
{            
    // Indicates that the process has been completed
    this.doneEvent.Set();
    Console.WriteLine("thread {0} end...", ThreadIndex);
} 
```

对于少量线程，它可以正常工作。就我而言，我必须启动大约 200 个线程，但在`WaitHandle.WaitAll`方法中我得到了一个`NotSuppotedException`

> waitHandles 中的对象数量大于系统允许的数量。

我现在的问题是：类是否有可能`ThreadPool`管理大量线程？类似于队列的东西，当其他进程完成时启动新进程。简单地说，在我的情况下，进程 = 线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:25:19.507

创建单个字段

```
private volatile int ProcessesStillRunning; 
```

在开始您的流程之前，将其初始化为正确的值

```
this.ProcessesStillRunning = 200;
this.StartProcesses(200);
// now wait on your doneEvent 
```

修改您的处理程序以在进程退出后减少此字段

```
if (System.Threading.Interlocked.Decrement(ref this.ProcessesStillRunning) == 0)
    this.doneEvent.Set(); 
```

当然，您现在应该知道您的方法不会使用任何 .NET 内置的并行限制，只会运行 200 个进程。然后是操作系统如何处理这个问题。

# scala - Scala Liftweb - 模式类型与预期类型不兼容

> ID：13270511
> 
> 赞同：7
> 
> 时间：2012-11-07T13:12:09.477
> 
> 标签：scala, lift

我正在尝试使用以下功能检查某些网页是否已启动：

```
import net.liftweb.common.{Failure, Empty, Full, Box}               // 1
                                                                    // 2
def isAlive = {                                                     // 3
    httpClient.getAsString("http://www.google.com", Nil) match {    // 4
       case f : Full[String] => true                                // 5
       case f : Failure => false                                    // 6
       case Empty => false                                          // 7
    }                                                               // 8
}                                                                   // 9 
```

函数 getAsString 返回类型是`net.liftweb.common.Box[String]`

该函数工作得很好，但我的问题是当我用这一行替换第 6 行时：

```
 case Failure => false                                        // 6 
```

我收到错误：

```
error: pattern type is incompatible with expected type;
found   : object net.liftweb.common.Failure
required: net.liftweb.common.Box[String]
case Failure => false 
```

（第 5 行也是如此）

为什么会这样？为什么我必须使用变量进行匹配，而不能仅根据类型进行匹配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:19:03.837

您不能根据类型进行匹配，如果您使用失败作为模式，则必须在构造函数上匹配：

```
case Failure(_, _, _) => false 
```

# c# - 使用“Like”表达式，LINQ to Entity

> ID：13270512
> 
> 赞同：-1
> 
> 时间：2012-11-07T13:12:18.253
> 
> 标签：c#, linq-to-entities, sql-like

我花了很长时间试图解决这个问题，但我无处可去，所以我帮助别人帮助我。我有一个搜索表单，我希望在文本框中使用 Like % 运算符。

这是我的代码片段：

```
var data = mg.DatabaseTable.Where(m => m.UserName.StartsWith(TextBoxUserID.Text) &&
                                       m.Content.Like(%TextBoxBarcode.Text&) &&
                                       m.Action.StartsWith(DropDownListStatus.Text) &&
                                       m.Site.Contains(TextBoxSite.Text)); 
```

我希望它可以用`"%%"`在它`m.Content(textbox)`或它的制造方式中。

我知道`StartsWith`,`EndWith`和的使用`Contains`。我希望可以选择如何通过使用来查询搜索`"like %"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:19:04.803

您可以使用：

```
m.Content.StartsWith(TextBoxBarcode.Text); 
```

为了

```
like 'search%' 
```

或者：

```
m.Content.EndsWith(TextBoxBarcode.Text); 
```

为了

```
like '%search' 
```

或者：

```
m.Content.Contains(TextBoxBarcode.Text); 
```

为了

```
like '%search%' 
```

如果您希望用户能够选择搜索类型，那么您需要有一个开关，然后是三个不同的查询。复制查询或执行一次基本查询，然后根据开关过滤结果：

```
var data = mg.DatabaseTable.Where(m => m.UserName.StartsWith(TextBoxUserID.Text) &&
                                       m.Action.StartsWith(DropDownListStatus.Text) &&
                                       m.Site.Contains(TextBoxSite.Text));

if (searchMode == StartsWith)
{
    return data.Where(m => m.Content.StartsWith(TextBoxBarcode.Text);
}
else if (searchMode == EndsWith)
{
    return data.Where(m => m.Content.EndsWith(TextBoxBarcode.Text);
}
else
{
    return data.Where(m => m.Content.Contains(TextBoxBarcode.Text);
} 
```

# django - Django：ManyToMany过滤器匹配列表中的所有项目

> ID：13270513
> 
> 赞同：22
> 
> 时间：2012-11-07T13:12:19.077
> 
> 标签：django, django-queryset, manytomanyfield, django-orm

我有这样一个 Book 模型：

```
class Book(models.Model):
    authors = models.ManyToManyField(Author, ...)
    ... 
```

简而言之：

我想检索其作者严格等于给定作者集的书籍。我不确定是否有一个查询可以做到这一点，但任何建议都会有所帮助。

长篇：

这是我尝试过的，（未能运行获取 AttributeError）

```
# A sample set of authors
target_authors = set((author_1, author_2))

# To reduce the search space, 
# first retrieve those books with just 2 authors.
candidate_books = Book.objects.annotate(c=Count('authors')).filter(c=len(target_authors))

final_books = QuerySet()
for author in target_authors:
    temp_books = candidate_books.filter(authors__in=[author])
    final_books = final_books and temp_books 
```

...这就是我得到的：

```
AttributeError: 'NoneType' object has no attribute '_meta' 
```

一般来说，我应该如何查询具有其 ManyToMany 字段包含一组给定对象的约束的模型，就像我的情况一样？

ps：我发现了一些相关的SO问题，但无法得到明确的答案。任何好的指针也会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T17:34:48.957

与@goliney 的方法类似，我找到了解决方案。但是，我认为效率可以提高。

```
# A sample set of authors
target_authors = set((author_1, author_2))

# To reduce the search space, first retrieve those books with just 2 authors.
candidate_books = Book.objects.annotate(c=Count('authors')).filter(c=len(target_authors))

# In each iteration, we filter out those books which don't contain one of the 
# required authors - the instance on the iteration.
for author in target_authors:
    candidate_books = candidate_books.filter(authors=author)

final_books = candidate_books 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T13:27:12.710

您可以[对 Q 对象使用复杂的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

```
from django.db.models import Q
...
target_authors = set((author_1, author_2))
q = Q()
for author in target_authors:
    q &= Q(authors=author)
Books.objects.annotate(c=Count('authors')).filter(c=len(target_authors)).filter(q) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-08T21:51:59.503

Q() & Q() 不等于 .filter().filter()。他们的原始 SQL 不同，其中使用 Q 和 &，它的 SQL 只是添加一个条件，如 `WHERE "book"."author" = "author_1" and "book"."author" = "author_2"`. 它应该返回空结果。

The only solution is just by chaining filter to form a SQL with inner join on same table: `... ON ("author"."id" = "author_book"."author_id") INNER JOIN "author_book" T4 ON ("author"."id" = T4."author_id") WHERE ("author_book"."author_id" = "author_1" AND T4."author_id" = "author_1")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T08:41:49.383

我遇到了同样的问题并得出了与 iuysal 相同的结论，直到我不得不进行中型搜索（有 1000 条记录和 150 个过滤器，我的请求会超时）。

在我的特殊情况下，搜索将导致没有记录，因为单个记录与所有 150 个过滤器对齐的机会非常罕见，您可以通过在应用更多过滤器之前验证 QuerySet 中有记录来解决性能问题以保存时间。

```
# In each iteration, we filter out those books which don't contain one of the 
# required authors - the instance on the iteration.
for author in target_authors:
   if candidate_books.count() > 0:
      candidate_books = candidate_books.filter(authors=author) 
```

出于某种原因，Django 将过滤器应用于空查询集。但是，如果要正确应用优化，则需要使用准备好的 QuerySet 和正确应用的索引。

# python - 一个简单的 python 正则表达式中的可选分组

> ID：13270514
> 
> 赞同：3
> 
> 时间：2012-11-07T13:12:19.283
> 
> 标签：python, regex, regex-group

我想要做的就是在一个字符串中搜索两个连续数字的实例。如果找到这样的实例，我想对它进行分组，否则为该特定组返回 none。我认为这将是微不足道的，但我不明白我要去哪里错了。在下面的示例中，删除可选 (?) 字符会得到数字，但在没有数字的字符串中，`r`计算结果为 None，因此 r.groups() 会引发异常。

```
p = re.compile(r'(\d{2})?')
r = p.search('wqddsel78ffgr')
print r.groups()
>>>(None, )    # why not ('78', )? 
```

`# --- update/clarification --- #`

感谢您的回答，但给出的解释让我一无所知。这是另一个准确指出我不明白的地方的方法。

```
pattern = re.compile(r'z.*(A)?')
_string = "aazaa90aabcdefA"
result = pattern.search(_string)
result.group()
>>> zaa90aabcdefA
result.groups()
>>> (None, ) 
```

我明白为什么`result.group()`会产生结果，但为什么不`result.groups()`产生`('A', )`？我认为它是这样工作的：一旦正则表达式命中`z`它，然后使用`.*`. 尽管`.*`匹配所有内容，正则表达式引擎知道它传递了一个可选组，并且由于`?`意味着它会尝试匹配，如果可以，它应该向后工作以尝试匹配。替换`?`为`+`确实返回`('A', )`。这表明`?`如果没有必要，它不会尝试匹配，但这似乎与我读过的关于该主题的大部分内容（尤其是 J. Friedl 的优秀书籍）形成鲜明对比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:30:00.897

这对我有用：

```
p = re.compile('\D*(\d{2})?')
r = p.search('wqddsel78ffgr')
print r.groups()  # ('78',)

r = p.search('wqddselffgr')
print r.groups()  # (None,) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:26:21.980

使您的`?`正则表达式匹配空字符串。如果你省略它，你可以像这样检查结果：

```
p = re.compile(r'(\d{2})')
r = p.search('wqddsel78ffgr')
print r.groups() if r else ('',) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:55:33.700

请记住，您可以使用以下命令轻松搜索字符串中 RE 的所有匹配项[`findall()`](http://docs.python.org/2/library/re.html#re.RegexObject.findall)：

```
re.findall(r'\d{2}', 'wqddsel78ffgr') # => ['78'] 
```

如果您不需要匹配发生的位置，这似乎是一种更简单的方法来完成您正在做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:15:24.370

使用正则表达式模式

```
(\d{2}|(?!.*\d{2})) 
```

（见[这个演示](http://ideone.com/MtjAQ6)）

如果您想确保恰好有 2 个连续数字而不是 3 个或更多，请使用

```
((?<!\d)\d{2}(?!\d)|(?!.*(?<!\d)\d{2}(?!\d))) 
```

（见[这个演示](http://ideone.com/14patM)）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T13:27:01.093

? - 是 0 或 1 次重复。所以正则表达式处理器首先尝试找到 0 个重复，然后......找到它:)

# iphone - 如何在 iPhone 中的 facetime 通话结束后返回我的应用程序

> ID：13270519
> 
> 赞同：0
> 
> 时间：2012-11-07T13:12:32.113
> 
> 标签：iphone, objective-c, ipad, ios-4.2, facetime

如何在 iPhone 中结束**Facetime**通话后返回我的应用程序。

我在下面提到了这个答案，但它正在调用 facetime 但不返回我的应用程序。

**NO 就像当您的应用程序开始通话时，在您关闭通话后无法让您的应用程序回到前台。对于您的第一个问题，您需要添加联系数据（电子邮件或电话号码）。另请注意，facetime:// url 方案适用于任何 iPhone/iPod Touch，即使它们不能进行 facetime。如果设备不支持 facetime，它只会显示一个空白屏幕。**

分享你的想法..

# sql - SQL Server 2008 R2 中更新前的有序数据

> ID：13270543
> 
> 赞同：0
> 
> 时间：2012-11-07T13:14:02.133
> 
> 标签：sql, sql-order-by, temp-tables

我在存储过程中有一个临时表。

我正在做的是从不同的表中获取数据并将其插入到临时表中

```
INSERT INTO #TempTable
  SELECT * FROM t1
  INNER JOIN t2 ON t1.ID = t2.ID 
```

插入后，我需要更新一列。在更新临时表之前，我想按另一列对临时表数据进行排序。

如何`ORDER By`在临时表的更新子句之前应用子句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:40:47.760

确保您的临时表有一个 IDENTITY 字段。

```
CREATE TABLE #TempTable 
(
  ID int identity(1,1) primary key
  ...
) 
```

在您的初始插入时下订单：-

```
INSERT INTO 
  #TempTable
SELECT * FROM t1
INNER JOIN 
  t2 
ON t1.ID = t2.ID
ORDER BY [Your Field] 
```

**基本原理：-** 有些人可能会争辩说没有必要将标识字段放入其中，或者实际上临时表中行的顺序并不重要。我不同意。

首先，拥有一个 ID 字段允许您进行如下连接：-

```
SELECT 
   t1.*, t2.SpecificThing
FROM
   #TempTable t1
INNER JOIN
   #TempTable t2
ON  t1.ID = ( t2.ID + 1) 
```

这对于任何运行总计/累积技巧都很方便。

至于在临时表中排序不重要，我不同意 - 至少在**SQL Server**上。SQL Server 上的 UPDATE 语句按*顺序*更新行。如果没有，这个迷人的（并且非常快速的）运行总技巧将永远不会奏效。

```
CREATE TABLE #CustomerInfo 
(
   ID int identity(1,1) primary key,
   CustomerId int,
   SaleValue money,
   RunningTotal money
)

-- Assume customer is populated

DECLARE @RunningTotal decimal(18,4)
DECLARE @CustomerId INT

SELECT @CustomerId = CustomerId FROM #CustomerInfo WHERE Id = 1
SET @RunningTotal = 0

-- This only works in SQL Server because under the hood, the engine is updating
-- iteratively in order.
-- 
-- Starts at row 0, then row 1 - with each row the value of @RunningTotal
-- is reassigned.
UPDATE #CustomerInfo
SET 
   @RunningTotal = 
   RunningTotal = 
   CASE WHEN 
      -- Are we still looking at the same customer?
      @CustomerId = CustomerId 
   THEN 
     -- Yes. Add sale value to @RunningTotal
     @RunningTotal + SaleValue
   ELSE
     -- No, reset @RunningTotal to SaleValue of this row
     SaleValue
   END 
   ,@CustomerId = CustomerId
 FROM #CustomerInfo 
```

# c# - 如何查询名称中带有命名空间的 XML？

> ID：13270546
> 
> 赞同：0
> 
> 时间：2012-11-07T13:14:06.937
> 
> 标签：c#, linq, linq-to-xml

我正在使用这样的 XML：

```
<ListOfLore>
      <q1:Lore xmlns:q1="http://www.rold.com/Data.xsd">                
        <q1:LoreNumber>15642</q1:LoreNumber>        
      </q1:Lore>
      <q1:Lore xmlns:q1="http://www.rold.com/Data.xsd">
        <q1:LoreNumber>15644</q1:LoreNumber>        
      </q1:Lore>
</ListOfLore> 
```

我正在这样做，但我什么也没得到

```
var lores = (from ListOfLore in pjs.Descendants("ListOfLore")
                              from Lore in ListOfLore.Descendants()
                              where Lore.Name.LocalName == ("Lore") 
                              select Lore); 
```

我想`Lore`从`ListOfLore`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:15:57.740

```
XNamespace ns = "http://www.rold.com/Data.xsd";
var lores = (from lore in pjs.Descendants(ns + "Lore")
             select lore); 
```

正如 Jon 所说，您不需要查询语法。以下内容更简短、更清晰：

```
XNamespace ns = "http://www.rold.com/Data.xsd";
var lores = pjs.Descendants(ns + "Lore"); 
```

# assembly - 如何编写汇编语言 - 我需要设置什么

> ID：13270554
> 
> 赞同：2
> 
> 时间：2012-11-07T13:14:33.560
> 
> 标签：assembly

我读过学习低级语言可以帮助编写高级语言（尽管不是必需的）。

但是，我不知道如何设置。

如果有人对我说：“我想学习 VB.NET 或 C#.NET，我该怎么做？” 我会回答：获取一台装有 Windows 操作系统的 PC，下载 .NET 框架，下载 Visual Studio，这里有一个“hello world”教程。

我有完全相同的问题，但使用的是汇编语言。我很欣赏每种语言可能会有所不同，但我并不重视您选择解释哪种语言。

这样做的原因是，我可以在我的机器上本地运行代码，但我觉得汇编器更多的是关于硬件，这需要一个模拟器还是必须在现场完成（我需要一块硬件才能工作） ）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:35:32.780

您最近的一个选择是购买[Raspberry Pi](http://www.raspberrypi.org/)并遵循本教程：[http ://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/](http://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/)

另一种选择是购买这本书： http: [//nostarch.com/hacking2.htm](http://nostarch.com/hacking2.htm)。它带有一个 LiveCD 已经设置好让你开始修补，你可以在这里免费下载：http: [//nostarch.com/hackingCD.htm](http://nostarch.com/hackingCD.htm)

快乐的黑客:)

编辑：

6502 组装的免费电子书在这里：http: [//skilldrick.github.com/easy6502/](http://skilldrick.github.com/easy6502/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:20:26.953

另一个有趣的游戏是 MARS MIPS 模拟器。您不需要购买任何额外的硬件来运行它，它会在您使用它时向您显示内存中发生的情况。此外，它是免费的。

链接[在这里](http://courses.missouristate.edu/kenvollmar/mars/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T01:55:36.170

有了所有其他答案，您应该一切顺利，我没有注意到的一件事是示例代码或任何可以帮助您开始编写代码的东西。试试这个链接： [http ://www.gabrielececchetti.it/Teaching/CalcolatoriElettronici/Docs/i8086_instruction_set.pdf](http://www.gabrielececchetti.it/Teaching/CalcolatoriElettronici/Docs/i8086_instruction_set.pdf)

试试这个代码：

```
a200 

Db"Hello World$"

A190

MOV DX,0200;    MOVE DX TO LOCATION WHERE THE STRING IS AT

MOV AH,09;  09 IS THE OUTPUT STRING SELECTION

INT 21; DOS SERICES...WRITING TO THE SCREEN

RET

a100

call 190; write the string starting at location 0200

int 3 
```

我还没有测试过这段代码，所以如果有错误......快乐编码！

# ruby-on-rails - 如何通过数组将“长”表转换为“宽”表？

> ID：13270558
> 
> 赞同：3
> 
> 时间：2012-11-07T13:14:50.023
> 
> 标签：ruby-on-rails, arrays, multidimensional-array, datatable

我想做的事情如下：我有一个从数组构建的表。比方说：

```
_________
| a | b |
| c | d |
| e | f | 
```

现在我希望它“转换”为：

```
_____________
| a | c | e |
| b | d | f | 
```

### 使用：

红宝石：`1.9.3`
导轨：`3.2.8`

### 目标：

```
a = [['a','b'],
     ['c','d'],
     ['e','f']]

array_for_table = conv_array_for_table a
=> [['a','c','e'],
    ['b','d','f']] 
```

### 研究：

[Array Class Doc](http://www.ruby-doc.org/core-1.9.3/Array.html)，但我在这里找不到任何相关信息。

以为我可能不得不对哈希数组或其他东西做一些事情..所以
[，问题](https://stackoverflow.com/questions/9270972/convert-array-of-2-element-arrays-into-a-hash-where-duplicate-keys-append-addit)

> 给定一个数组：
> `array = [[:a,:b],[:a,:c],[:c,:b]]`
> 
> 返回以下哈希：
> `hash = { [:a => [:b,:c]] , [:c => :b] }`
> 
> Hash[array] 覆盖以前的关联，产生：
> `hash = { [:a => :c] , [:c => :b] }`

### 没有积极结果的自我思考

也许我应该用哈希做点什么？

```
1.9.3p194 :018 > def conv_array a=[]  
1.9.3p194 :019?>   conv_a = []  
1.9.3p194 :020?>   a.each do |k,v|  
1.9.3p194 :021 >       conv_a.push(k)  
1.9.3p194 :022?>   end  
1.9.3p194 :023?>   a.each do |k,v|
1.9.3p194 :024 >       conv_a.push(v)
1.9.3p194 :025?>   end
1.9.3p194 :026?> end 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:18:24.870

我认为你正在寻找的是矩阵转置..看看这里：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/matrix/rdoc/Matrix.html#method-i-transpose](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/matrix/rdoc/Matrix.html#method-i-transpose)

所以基本上你所要做的就是打电话：

```
a.transpose() 
```

甚至更短：

```
a.t 
```

# c# - ReplaySubject.First() 意外阻塞

> ID：13270559
> 
> 赞同：2
> 
> 时间：2012-11-07T13:14:54.123
> 
> 标签：c#, .net, multithreading, system.reactive

我在我正在处理的 Silverlight 应用程序中遇到了绝对奇怪的行为。请看以下代码：

```
var replaySubject = new ReplaySubject<string>(1);
    replaySubject.OnNext("This can never block... surely?");

var s = replaySubject.First();
Debug.WriteLine(s); 
```

基本上，我的应用程序通过这段代码重复出现，它总是打印出消息......除了在线程阻塞在线的一个特定场景中`First()`。

它总是在 UI 线程上。如果我在行上设置一个断点`First()`，并使用调试器深入研究`replaySubject`，我可以在其队列中看到该字符串。

谁能想到任何会导致`First()`呼叫在此处阻塞的情况？

顺便说一句：这是 RX 版本 1.1.11111

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:14:33.377

好的，事实证明，默认情况下，`ReplaySubject`使用`Scheduler.CurrentThread`.

如果我明确地将 设置`ReplaySubject`为使用`Scheduler.Immediate`or `Scheduler.ThreadPool`，那么它会按预期工作。

```
var replaySubject = new ReplaySubject<string>(1, Scheduler.Immediate);
    replaySubject.OnNext("This can never block... surely?");

var s = replaySubject.First();
Debug.WriteLine(s); 
```

我仍然需要调查 UI 线程是如何在我的特定场景中陷入这种混乱的，但现在，这解决了这个问题。

--- 编辑 ---

OK, on further investigation, it turns out that the above piece of code for most of the time is initiated on a ThreadPool thread. Even though, when it reaches the code, it is on the Dispatcher thread, Scheduler.CurrentThread puts the ReplaySubject back onto the original ThreadPool thread.

However, in the scenario where it is breaking, everything starts with the user clicking a button. This is obviously on the UI thread, and when it reaches this piece of code, Scheduler.CurrentThread is now the UI thread, and since we are already on the UI thread, we have a deadlock. First is waiting for the ReplaySubject to pump - but the pump is queued up behind the current action. Subtle and something of which to be aware.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:40:52.037

从您的代码看来，这里没有注册订阅者`Observable`。所以它可能会等待一个订阅，这样它就可以给你第一个可用的。

您可以尝试`FirstOrDefault`查看它是否为空。

# iphone - UICollectionView 的补充视图或装饰视图的 indexpath 是什么？

> ID：13270563
> 
> 赞同：8
> 
> 时间：2012-11-07T13:15:05.467
> 
> 标签：iphone, ios, uicollectionview

`indexpath`UICollectionView的supplementaryView或者decorationView是什么意思？

```
layoutAttributesForSupplementaryViewOfKind:atIndexPath: 
layoutAttributesForDecorationViewOfKind:atIndexPath: 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T14:23:47.820

该[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewLayoutAttributes_class/Reference/Reference.html)说：

> 由您决定如何使用 indexPath 参数来识别给定的补充视图。通常，您使用 elementKind 参数来标识补充视图的类型，并使用 indexPath 信息来区分该视图的不同实例。

装饰视图也是如此。

换句话说，对应于数据源中某个位置的单元格 indexPath 与对应于您想要的任何内容的补充或装饰视图的 indexPath 之间绝对没有相关性。

# windows - 如何在 Windows 上调用使用 scan() 的脚本？

> ID：13270564
> 
> 赞同：2
> 
> 时间：2012-11-07T13:15:08.807
> 
> 标签：windows, r, rscript

如何调用 R 脚本，如下所示

```
scan() 
```

在 Windows 中？使用`R`or`Rscript`时，不会读取任何内容。使用`Rscript`or `littler`（都在 Linux 上），脚本按预期工作。

```
# Doesn't work because stdin is already redirected
R --no-save < test.R

# Works on Linux, doesn't on Windows
Rscript test.R

# Works on Linux, doesn't exist in Windows
r test.R 
```

有没有办法在不更改 R 代码的情况下实现这一点？

`--interactive`也许相关：为什么Windows中没有开关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:07:02.677

因此，正如我们在评论中讨论并确认@nograpes，您可以使用以下内容：

```
scan(file("stdin"), what=character()) 
```

在脚本中，而不是`scan()`在命令行界面中执行脚本时从标准输入交互式读取。
然后，您需要在 Windows 下按`Ctrl`+`Z`结束扫描（在 Mac 上是 +）`Ctrl`。`D`

# objective-c - 关于objective-c的xmlrpc

> ID：13270567
> 
> 赞同：1
> 
> 时间：2012-11-07T13:15:21.710
> 
> 标签：objective-c, ios, xml-rpc

最近我一直在做一个 iOS 项目。我想将我的图片发送到服务器。我使用 xmlrpc 来执行此操作，但是当我编写这样的代码时：

```
- (void)uploadImage:(UIImage *)sourceImage ForName:(NSString *)imageName
{
    NSData *imageData = UIImagePNGRepresentation(sourceImage);

    NSString  *imageString = [imageData base64EncodedString];

    NSURL *URL = [NSURL URLWithString: SERVER_URL];  
    XMLRPCRequest *request = [[XMLRPCRequest alloc]
                              initWithURL:URL];

    NSArray *params = [NSArray arrayWithObjects:imageName,imageString,nil];
    [request setMethod:@"upload_image" withParameter:params]; 
```

我给参数“imageName”，它会失败。但是如果我写这样的代码

```
- (void)uploadImage:(UIImage *)sourceImage

{

    NSData *imageData = UIImagePNGRepresentation(sourceImage);

    NSString  *imageString = [imageData base64EncodedString];

    NSURL *URL = [NSURL URLWithString: SERVER_URL];  
    XMLRPCRequest *request = [[XMLRPCRequest alloc]
                              initWithURL:URL];
    NSString *imageName = @"hello.png";
    NSArray *params = [NSArray arrayWithObjects:imageName,imageString,nil];
    [request setMethod:@"upload_image" withParameter:params]; 
```

没关系，我可以将图片上传到服务器。我不知道为什么，有人可以解释一下吗？

# javascript - 使用变量访问 JS 对象

> ID：13270568
> 
> 赞同：0
> 
> 时间：2012-11-07T13:15:21.530
> 
> 标签：javascript, jquery, arrays, object

我在使用 javascript 中的变量访问特定对象时遇到问题。这是我正在使用的代码：

```
global_grouplist = getTenantGroupList();
console.log(global_grouplist)
var currentgroup = getSelectedGroupName();
console.log(currentgroup)
console.log(global_grouplist.currentgroup); 
```

'global_grouplist' 返回一大堆对象，我想从那里得到一个特定的值。如果我取 currentgroup 将等于的值，并像这样运行它：

```
console.log(global_grouplist.actualvalue) 
```

它给了我想要的东西。但是，当我这样做时。

```
var currentgroup = actualvalue
console.log(global_grouplist.currentgroup) 
```

这是 getTenantGroupList() 函数：

```
function getTenantGroupList(){
    return jQuery.parseJSON($.ajax({
            url: 'tenantgrouplist.json',
            dataType: 'json',
            async: false
    }).responseText);
} 
```

这是 getSelectedGroupName 函数：

```
function getSelectedGroupName(){
        var retval = null;
        $('#grouplist li a').each(function(){
            if($(this).parent().hasClass('group-selected'))
                retval=$(this).html();
        });
        return retval;
    } 
```

这没用。我在这里缺少一些基本的东西吗？如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:19:12.530

有了这一行

```
var currentgroup = actualvalue 
```

您正在给出 to 的当前值，`actualvalue`并且`currentgroup`不要让两个元素都指向同一个属性！

如果你想`currentgroup`用作变量的占位符，你应该使用它来代替：

```
var currentgroup = 'actualvalue';
console.log(global_grouplist[currentgroup]); 
```

这样，您将所需属性的名称作为字符串分配给`currentgroup`并使用方括号表示法来访问对象的相应属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:18:15.193

要以这种方式访问​​属性，您需要使用数组表示法。试试这个：

```
var currentgroup = getSelectedGroupName(); // Returns a string like: 'actualvalue';
console.log(global_grouplist[currentgroup]) 
```

# eclipse - 如何为现有的 eclipse 插件项目生成 pom 文件？

> ID：13270581
> 
> 赞同：0
> 
> 时间：2012-11-07T13:15:53.050
> 
> 标签：eclipse, maven, eclipse-plugin, pom.xml

我并没有真正使用 maven，所以这可能是菜鸟问题。

我有 Eclipse 插件项目，在部署它之前，我需要生成一个 pom 文件。常规的 pom 文件是为 java 项目设计的，如果我尝试从它们生成，我会丢失我的插件依赖项。有没有办法让 Maven 也包含它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:12:32.337

将标准的 Eclipse 插件项目转换为 Maven 结构化项目并不像生成 pom 文件那么简单。该项目需要位于 Maven 期望的相同目录结构中。

如果您想将 Eclipse 插件构建为 Maven 项目，请查看 Tycho ( [http://www.eclipse.org/tycho/](http://www.eclipse.org/tycho/) )。

# linux - 为什么失效的进程正在使用CPU？

> ID：13270584
> 
> 赞同：3
> 
> 时间：2012-11-07T13:16:02.707
> 
> 标签：linux

我对已失效的流程有些困惑。也就是说，为什么已失效的进程正在使用 CPU。我在 top 命令中吸收了已失效进程的 CPU 时间利用率。有时，已失效的进程占用超过 55 个 CPU 时间。但是，根据一些文档，已失效的进程不应使用 CPU。

```
 PID   TID CLS RTPRIO  NI PRI PSR %CPU STAT WCHAN           COMMAND                                                                                                   
15304 15304 TS       -   0  19   0  0.6 Z    -              My.pl <defunct>
15494 15494 TS       -   0  19   7  0.4 Z    -              My.pl <defunct>
17075 17075 TS       -   0  19   5  0.5 Z    -              My.pl <defunct>
17659 17659 TS       -   0  19   2  0.6 Z    -              My.pl <defunct>
18118 18118 TS       -   0  19   7  0.8 Z    -              My.pl <defunct>
18388 18388 TS       -   0  19   4  1.1 Z    -              My.pl <defunct>
18520 18520 TS       -   0  19   3  0.7 Z    -              My.pl <defunct>
18864 18864 TS       -   0  19   3  0.7 Z    -              My.pl <defunct>
19291 19291 TS       -   0  19   5  1.1 Z    -              My.pl <defunct>
19479 19479 TS       -   0  19   3  1.0 Z    -              My.pl <defunct>
19544 19544 TS       -   0  19   1  1.3 Z    -              My.pl <defunct>
19806 19806 TS       -   0  19   6  1.1 Z    -              My.pl <defunct>
19809 19809 TS       -   0  19   4  2.0 Z    -              My.pl <defunct>
20056 20056 TS       -   0  19   7  1.3 Z    -              My.pl <defunct>
20577 20577 TS       -   0  19   5  2.2 Z    -              My.pl <defunct>
22239 22239 TS       -   0  19   4  6.9 Z    -              My.pl <defunct>
22246 22246 TS       -   0  19   3  2.2 Z    -              My.pl <defunct>
22269 22269 TS       -   0  19   7  2.1 Z    -              My.pl <defunct>
23337 23337 TS       -   0  19   5  3.2 Z    -              My.pl <defunct>
23950 23950 TS       -   0  19   4  7.2 Z    -              My.pl <defunct> 
```

你能解释一下为什么失效的进程正在使用 CPU 吗？

# java - Selenium：JUnit4：WebDriver：IE：使用 IE 时的 NoSuchElementException

> ID：13270585
> 
> 赞同：5
> 
> 时间：2012-11-07T13:16:02.403
> 
> 标签：java, internet-explorer, selenium, webdriver

我在 Selenium IDE 中记录了我的测试；它在 Firefox 和 Chrome 中运行良好。当我在 IE 9 中运行它时，我不断收到此错误。我是编码新手，无法找到答案。如果有人可以用外行的方式向我解释正在发生的事情/为什么会这样，我将不胜感激。

```
org.openqa.selenium.NoSuchElementException: Unable to find element with css selector == BODY (WARNING: The server did not provide any stacktrace information) 
```

Java 代码：

```
assertTrue(driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*Final[\\s\\S]*$")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:46:16.113

我建议在调用之前打印出 driver.getPageSource() 并检查当前页面上的 html 是否符合您的期望。

如果它确实符合您的预期，那么我将打印出所有匹配的标签的文本内容，`By.cssSelector("BODY")`并查看它们是否包含您所期望的文本。

这将缩小错误所在的范围 - 您可能需要找到另一种查找此元素的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T23:48:05.240

内部通过使用 XPath 和 Internet Explorer 的大小写问题。

尝试使用

```
assertTrue(driver.findElement(By.cssSelector("body")).getText().matches("^[\\s\\S]*Final[\\s\\S]*$")); 
```

代替

```
assertTrue(driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*Final[\\s\\S] 
```

*$"));

我相信这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T21:12:14.157

IE 浏览器不支持不区分大小写的 CSS 属性选择器。尝试使用

```
driver.findElement(By.cssSelector("body")); 
```

# jquery - jQuery自动完成公式编辑器插件

> ID：13270589
> 
> 赞同：4
> 
> 时间：2012-11-07T13:16:18.837
> 
> 标签：jquery, autocomplete, tagging, formula-editor

这个问题的答案接近这里给出的答案：[jQuery autocomplete tagging plugin like StackOverflow's input tags?](https://stackoverflow.com/questions/519107/jquery-autocomplete-tagging-plug-in-like-stackoverflows-input-tags)

然而我的有一个转折点。

我想允许输入“非标签”字符串。

我想创建一个文本字段，允许用户根据可用变量（我们的标签）键入公式。用户应该能够输入类似“[Variable 1] x [Variable 2] / [Variable 2]”的内容。

“[]”中的内容是一个标签，应该与其他字符串不同地显示。此外，文本框的实际值会略有不同。类似于“{{1}} * {{2}} / {{3}}”。

我不是在问如何做到这一点（尽管也可以接受这种答案），但是如果有任何类似的东西已经可以作为 jQuery 插件使用。

我试过用谷歌搜索并在这里查看 SO，但我总是最终使用几乎相同类型的标记插件：也许我使用了错误的搜索字符串:)

# php - 分配时内存耗尽

> ID：13270594
> 
> 赞同：0
> 
> 时间：2012-11-07T13:16:45.833
> 
> 标签：php, memory, memory-management

**代码：**

```
if (flock($fp, LOCK_EX))
{
    fwrite($fp, serialize($this->_contents));
    flock($fp, LOCK_UN);
} 
```

**错误：**

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 17805286 bytes)..... 
```

**错误行：**

```
fwrite($fp, serialize($this->_contents)); 
```

知道如何解决这个问题吗？我的网站托管在共享主机上，所以我没有机会更改内存设置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:23:39.900

最有可能`serialize($this->_contents)`是问题所在。
我通常倾向于建议不要使用序列化将内容存储在数据库或文件中。

您应该将内部数据拆分`_contents`并单独写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:35:14.110

> *它可能无法解决您的内存问题（因为您无法更改无法更改），但它可能允许您进行更多控制：*

对于 或 类`$this`，`$this->_content`您可以实现[`Serializeable`](http://php.net/class.serializable)以更优化内存的方式返回数据的 。

如果你真的可以内存优化它，你可以透明地使用它`serialize`。

# jsp - Jsp表格以错误的方式打印

> ID：13270597
> 
> 赞同：0
> 
> 时间：2012-11-07T13:16:55.357
> 
> 标签：jsp, jdbc

我的jsp中有以下代码。在输出中，行显示为列，列显示为行。

![在此处输入图像描述](../Images/98c85df49d79ad5831d47533a567951f.png)

```
<%@page import="com.sun.crypto.provider.RSACipher"%>  
<%@include file="DBCon.jsp" %>  
<body><form action="Export1.jsp" method="post">  
<table border="1px"><TR>  
<%  
    ps=con.prepareStatement("Select * from Scope2");  
    rs=ps.executeQuery();  
    ResultSetMetaData rsmd=rs.getMetaData();  
    int NumOfCol=rsmd.getColumnCount();  
for(int i=1;i<=NumOfCol;i++)  
{%></tr>  

<%  
try  
               {  
    ps=con.prepareStatement("Select * from Scope2");  
    rs=ps.executeQuery();  
       while(rs.next()){  

           %>  
                  <td><%=rs.getString(i)%></td>  
           <%  
       }  

}  
catch(Exception e)  
               {  
    out.println(e);  
}}%>  
   </table><table><tr>  
    <input type="Submit" value="Export"></tr></table></form></body> 
```

并且输出与屏幕 1 中的一样，但我希望输出与屏幕 2 中的一样。请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:20:00.157

您忘记了每个循环`</tr>`结束时的标签。`for`所以这可能会产生格式问题。

为什么要在`for`循环中再次执行该查询，而您可以使用`ResultSet rs`之前获得的相同查询？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:46:05.423

您弄乱了行格式和循环。这是更新的代码 -

```
<body><form action="Export1.jsp" method="post">  
<table border="1px">  
<%  
    ps=con.prepareStatement("Select * from Scope2");  
    rs=ps.executeQuery();  
    ResultSetMetaData rsmd=rs.getMetaData();  
    int NumOfCol=rsmd.getColumnCount();  

while(rs.next())  
{%>
<TR>
<%  
try  
     {  
       for(int i=1;i<=NumOfCol;i++){  

           %>  
                  <td><%=rs.getString(i)%></td>  
           <%  
       }  

}  
catch(Exception e)  
{  
    out.println(e);  
}
%></TR><%}%>  

</table><table><tr>  
<input type="Submit" value="Export"></tr></table></form></body> 
```

希望有帮助。

# xml - XML - 添加新行

> ID：13270600
> 
> 赞同：10
> 
> 时间：2012-11-07T13:17:06.543
> 
> 标签：xml, ms-word, docx

我将 MS word doc 保存为`.docx`. 我想通过编辑 docx 的 XML 文件在我的文本中插入新行。我已经尝试过`&#xA;`, `&#13;`, `&#10;`, `&#x9;`, amd 它总是只给我空间而不是新行。

它能做什么：

（XML 代码） `<w:t>hel&#xA;lo</w:t>`

当我打开`.docx`文件时，它会更改为：

`Hel lo`不是因为我想`Hel`在一条线上和`lo`二线。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-07T13:55:59.000

使用`<w:br/>`标签。

我通过创建 Word 文档、将其保存为 XML（通过另存为）、使用 Shift Enter 添加强制换行符并检查更改来找到它。本质区别似乎只是`w:br`标签，显然反映了HTML`br`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-16T12:23:06.077

如果它对任何人有帮助，以下 C# 代码将创建多行 XML 结构

```
//Sets the text for a Word XML <w:t> node
//If the text is multi-line, it replaces the single <w:t> node for multiple nodes
//Resulting in multiple Word XML lines
private static void SetWordXmlNodeText(XmlDocument xmlDocument, XmlNode node, string newText)
{

    //Is the text a single line or multiple lines?>
    if (newText.Contains(System.Environment.NewLine))
    {
        //The new text is a multi-line string, split it to individual lines
        var lines = newText.Split("\n\r".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

        //And add XML nodes for each line so that Word XML will accept the new lines
        var xmlBuilder = new StringBuilder();
        for (int count = 0; count < lines.Length; count++)
        {
            //Ensure the "w" prefix is set correctly, otherwise docFrag.InnerXml will fail with exception
            xmlBuilder.Append("<w:t xmlns:w=\"http://schemas.microsoft.com/office/word/2003/wordml\">");
            xmlBuilder.Append(lines[count]);
            xmlBuilder.Append("</w:t>");

            //Not the last line? add line break
            if (count != lines.Length - 1)
            {
                xmlBuilder.Append("<w:br xmlns:w=\"http://schemas.microsoft.com/office/word/2003/wordml\" />");
            }
        }

        //Create the XML fragment with the new multiline structure
        var docFrag = xmlDocument.CreateDocumentFragment();
        docFrag.InnerXml = xmlBuilder.ToString();
        node.ParentNode.AppendChild(docFrag);

        //Remove the single line child node that was originally holding the single line text, only required if there was a node there to start with
        node.ParentNode.RemoveChild(node);
    }
    else
    {
        //Text is not multi-line, let the existing node have the text
        node.InnerText = newText;
    }
} 
```

上面的代码将创建必要的子节点和回车，并处理前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-17T08:49:32.913

根据上面@Lenny的回答，这就是我在Mac上使用MS Word 2011的情况下使用Obj-C的方法：

```
- (NSString *)setWordXMLText:(NSString *)str
{
    NSString *newStr = @"";
    // split the string into individual lines
    NSArray *lines = [str componentsSeparatedByString: @"\n"];

    if (lines.count > 1)
    {
        // add XML nodes for each line so that Word XML will accept the new lines
        for (int count = 0; count < lines.count; count++)
        {
            newStr = [newStr stringByAppendingFormat:@"<w:t>%@</w:t>", lines[count]];

            // Not the last line? add a line break
            if (count != lines.count - 1)
            {
                newStr = [newStr stringByAppendingString:@"<w:br/>"];
            }
        }

        return newStr;
    }
    else
    {
        return str;
    }
} 
```

# php - Magento - 更新价格脚本 - 多个商店

> ID：13270608
> 
> 赞同：0
> 
> 时间：2012-11-07T13:17:32.410
> 
> 标签：php, magento

我正在尝试将一些（但不是全部）价格从一家商店更新到另一家商店。例如，一件衬衫应该是第二家商店价格的 1.2 倍

我只想根据实体标签更新一些项目组，但我正在努力从 magento 中提取所有数据（除了我可以在下面的代码中得到的数据）。我缺少的是价格和实体标签。我知道他们住在哪些表中，但不确定访问它们的正确 magento 语法，例如 Mage::getModel('catalog/product') 并且我正在尝试使用 Magento 友好代码而不是查询来实现这一点

使用企业 1.11，现阶段不考虑购买插件，任何建议都非常感谢

```
$mageFilename = 'app/Mage.php';
require_once $mageFilename;
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID); #important
$product_id = '8782';
$collection = Mage::getModel('catalog/product')
         ->load($product_id);
        echo "Collection: " . $collection->getName();
        echo "<br>";
        echo "Attribute Set: " . $collection->getAttributeSetId() . " SKU: " . $collection->getSku();
        echo "<br>"; 
        echo "Entity ID: " . $collection->getEntity_id() . " Product Type (Attribute Label): " . $collection->getProducttype(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:03:14.527

只是澄清：

在您展示的示例中， $collection 对象并不是真正的“集合”。它是一个“目录/产品”对象的实例。

要修改一个目录/产品对象的价格，您会考虑执行以下操作：

```
$product = Mage::getModel('catalog/product')->load($product_id);
$product->setPrice($product->getPrice() * 1.2)
        ->save(); 
```

如果您想对一堆产品执行此操作，您可能需要使用“目录/产品”对象的集合，并应用一些属性过滤器（归结为将 WHERE 子句添加到最终生成的 SQL 中）。（[这是 magento 集合查询语法的一个摘要](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)。）

我不确定您所说的“实体标签”是什么意思。这是您附加到产品的自定义属性吗？

一个通用示例，将此价格更改应用于具有特定 SKU 的所有产品：

```
$product_collection = Mage::getModel('catalog/product')->getCollection()
                                                       ->addAttributeToFilter('sku', array('like' => 'FOO01-%'));

foreach($product_collection as $product) {

    $new_price = calcNewPrice($product->getPrice());
    $product->setPrice($new_price)
            ->save(); 

} 
```

在哪里，如果您要跨商店进行价格计算，“calcNewPrice”可能看起来像这样：

```
function calcNewPrice($product) {
    $other_store_product = Mage::getModel('catalog/product')->setStoreId($other_store_id)
                                                            ->load($product->getId());
    if ($other_store_product) {
        return $other_store_product->getPrice() * 1.2;
    }
    // else ???
} 
```

希望这可以帮助。

# xpath - 使用 xpath 进行节点比较

> ID：13270610
> 
> 赞同：1
> 
> 时间：2012-11-07T13:17:38.643
> 
> 标签：xpath, xpath-2.0

我有以下 xml 文档（仅显示结构的摘要，因为它很长）：

```
<document>    
<article>
            <head>ISA Savers Could Lose Tax Relief</head>
            <text>
                <paragraph>Tax relief could be withdrawn from tens of thousands of Individual Savings Account, sheltering up to £500 million from tax, because some banks and building societies are flouting not only the spirit, but the letter of the laws governing them.</paragraph>
                <paragraph>This will come as alarming news to thousands of savers who invested in fixed rate Isas which they thought would offer them security combined with a tax shelter The Inland Revenue is writing to all Britain's savings institutions reminding them of the basic Isa rules and warning that tax relief will be withdrawn if these are manipulated in anyway.</paragraph>
                <paragraph>Furthermore, the Revenue will castigate some deposit-takers for already breaching the rules and demand they speedily rewrite their terms and conditions, or face loss of tax-relief.</paragraph>
                <paragraph>The guardian of the nations coffers is known to be deeply disturbed at the rapid recent growth of fixed- rate Isas which lock savers in for several years, maintaining these are unlawful. It is sending a stark reminder to all savings institutions that customers must be allowed to withdraw their cash, and requiring those which don't, to address the violation.</paragraph>
                <paragraph>At the front of the firing line are Bradford &amp; Bingley, Liverpool Victoria, and Julian Hodge Bank, which attracted huge inflows of money because they have been consistently among the best buys. All three specifically prohibit withdrawals. The Ipswich Building Society joined them last week, becoming the latest to offer a fixed- rate Isa, outlawing withdrawals until the end of the term.</paragraph>
                <paragraph>A written statement from the Revenue said:"When ISAs were introduced Ministers made it clear that one of the their main objectives was to encourage non-savers to start saving, and people with small amounts saved, to save more. It was therefore important that ISAs would not lock in savers' money as this would exclude people with limited resources who might need access to their money quickly.</paragraph>
                <paragraph>"We do not consider that a product whose terms and conditions actually prevented withdrawals or transfers during a fixed term would be consistent with Ministers' intentions or the statutory rules."</paragraph>
                <paragraph>So serious are the Revenue's concerns that they no longer trust banks and building societies to monitor themselves. They plan to introduce a new requirement which insists institutions submit full details of all Isa accounts to them for approval, before they becomes available to the public. Until now, banks merely had to satisify themselves they were not breaking the rules.</paragraph>
                <paragraph>Paul James, marketing manager of Julian Hodge Bank, said the fixed accounts were launched in response to customer demand.</paragraph>
                <paragraph>He said:"People were asking for a fixed rate, and those who have taken them out over the past couple of years have done well. We understood that Isas had to be transferable on notice, which we took to be the end of the fixed period.</paragraph>
                <paragraph>"We were audited by the Revenue last year, and the issue was not raised at that stage, so we thought everything was OK. If we have been successfully audited then the accounts can't be otherwise but OK surely?"</paragraph>
                <paragraph>Nigel Snell, a spokesman for Liverpool Victoria said that its range of five Isas prohibiting withdrawals did include a proviso in the small print allowing access to funds "in exceptional circumstances and by permission of the trustees".</paragraph>
                <paragraph>He added:"We make it clear to people that their money is locked away, but thought the account was compliant because of this clause in the small print."</paragraph>
                <paragraph>An Ipswich spokesman said it was aware there was some ambiguity when its account was launched last week. However, it acknowledged it may have to review its terms and conditions again, after seeing the letter from the Revenue.</paragraph>
            </text>
            <date>
                <day>10</day>
                <month>05</month>
                <year>2002</year>
            </date>
            <source>Sexymoney</source>
            <portal>Finance</portal>
            <ID number="2610981009.98103"/>
        </article>
.
.
. 
```

我必须找到每篇文章中出现在头节点之后和门户节点之前的所有节点。

我不知道如何遍历文章节点的所有子节点和孙节点，并将其与同一文章节点的头节点和门户节点进行比较。

这是我解决 xpath 查询的尝试之一（这显然不起作用，因为我不知道如何遍历所有节点进行比较）：

```
for $x in //article return $x[$x/text >> $x/head and $x/text << $x/portal]//* 
```

提前感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:34:48.600

**一、XPath 2.0 解决方案**：

**使用**：

```
/*/article/*[. >> ../head and ../portal >> .] 
```

* * *

**二、XPath 1.0 解决方案**（它也是一个 XPath 2.0 解决方案）：

```
/*/article/head/following-sibling::*[following-sibling::portal] 
```

* * *

**三、基于 XSLT 的验证**：

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:sequence select="/*/article/*[. >> ../head and ../portal >> .]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<document>
    <article>
        <head>ISA Savers Could Lose Tax Relief</head>
        <text>
            <paragraph>Tax relief could be withdrawn from tens of thousands of Individual Savings Account, sheltering up to £500 million from tax, because some banks and building societies are flouting not only the spirit, but the letter of the laws governing them.</paragraph>
            <paragraph>This will come as alarming news to thousands of savers who invested in fixed rate Isas which they thought would offer them security combined with a tax shelter The Inland Revenue is writing to all Britain's savings institutions reminding them of the basic Isa rules and warning that tax relief will be withdrawn if these are manipulated in anyway.</paragraph>
            <paragraph>Furthermore, the Revenue will castigate some deposit-takers for already breaching the rules and demand they speedily rewrite their terms and conditions, or face loss of tax-relief.</paragraph>
            <paragraph>The guardian of the nations coffers is known to be deeply disturbed at the rapid recent growth of fixed- rate Isas which lock savers in for several years, maintaining these are unlawful. It is sending a stark reminder to all savings institutions that customers must be allowed to withdraw their cash, and requiring those which don't, to address the violation.</paragraph>
            <paragraph>At the front of the firing line are Bradford &amp; Bingley, Liverpool Victoria, and Julian Hodge Bank, which attracted huge inflows of money because they have been consistently among the best buys. All three specifically prohibit withdrawals. The Ipswich Building Society joined them last week, becoming the latest to offer a fixed- rate Isa, outlawing withdrawals until the end of the term.</paragraph>
            <paragraph>A written statement from the Revenue said:"When ISAs were introduced Ministers made it clear that one of the their main objectives was to encourage non-savers to start saving, and people with small amounts saved, to save more. It was therefore important that ISAs would not lock in savers' money as this would exclude people with limited resources who might need access to their money quickly.</paragraph>
            <paragraph>"We do not consider that a product whose terms and conditions actually prevented withdrawals or transfers during a fixed term would be consistent with Ministers' intentions or the statutory rules."</paragraph>
            <paragraph>So serious are the Revenue's concerns that they no longer trust banks and building societies to monitor themselves. They plan to introduce a new requirement which insists institutions submit full details of all Isa accounts to them for approval, before they becomes available to the public. Until now, banks merely had to satisify themselves they were not breaking the rules.</paragraph>
            <paragraph>Paul James, marketing manager of Julian Hodge Bank, said the fixed accounts were launched in response to customer demand.</paragraph>
            <paragraph>He said:"People were asking for a fixed rate, and those who have taken them out over the past couple of years have done well. We understood that Isas had to be transferable on notice, which we took to be the end of the fixed period.</paragraph>
            <paragraph>"We were audited by the Revenue last year, and the issue was not raised at that stage, so we thought everything was OK. If we have been successfully audited then the accounts can't be otherwise but OK surely?"</paragraph>
            <paragraph>Nigel Snell, a spokesman for Liverpool Victoria said that its range of five Isas prohibiting withdrawals did include a proviso in the small print allowing access to funds "in exceptional circumstances and by permission of the trustees".</paragraph>
            <paragraph>He added:"We make it clear to people that their money is locked away, but thought the account was compliant because of this clause in the small print."</paragraph>
            <paragraph>An Ipswich spokesman said it was aware there was some ambiguity when its account was launched last week. However, it acknowledged it may have to review its terms and conditions again, after seeing the letter from the Revenue.</paragraph>
        </text>
        <date>
            <day>10</day>
            <month>05</month>
            <year>2002</year>
        </date>
        <source>Sexymoney</source>
        <portal>Finance</portal>
        <ID number="2610981009.98103"/>
    </article>
</document> 
```

**计算 XPath 2.0 表达式并将所有选定节点复制到输出**：

```
<text>
            <paragraph>Tax relief could be withdrawn from tens of thousands of Individual Savings Account, sheltering up to £500 million from tax, because some banks and building societies are flouting not only the spirit, but the letter of the laws governing them.</paragraph>
            <paragraph>This will come as alarming news to thousands of savers who invested in fixed rate Isas which they thought would offer them security combined with a tax shelter The Inland Revenue is writing to all Britain's savings institutions reminding them of the basic Isa rules and warning that tax relief will be withdrawn if these are manipulated in anyway.</paragraph>
            <paragraph>Furthermore, the Revenue will castigate some deposit-takers for already breaching the rules and demand they speedily rewrite their terms and conditions, or face loss of tax-relief.</paragraph>
            <paragraph>The guardian of the nations coffers is known to be deeply disturbed at the rapid recent growth of fixed- rate Isas which lock savers in for several years, maintaining these are unlawful. It is sending a stark reminder to all savings institutions that customers must be allowed to withdraw their cash, and requiring those which don't, to address the violation.</paragraph>
            <paragraph>At the front of the firing line are Bradford &amp; Bingley, Liverpool Victoria, and Julian Hodge Bank, which attracted huge inflows of money because they have been consistently among the best buys. All three specifically prohibit withdrawals. The Ipswich Building Society joined them last week, becoming the latest to offer a fixed- rate Isa, outlawing withdrawals until the end of the term.</paragraph>
            <paragraph>A written statement from the Revenue said:"When ISAs were introduced Ministers made it clear that one of the their main objectives was to encourage non-savers to start saving, and people with small amounts saved, to save more. It was therefore important that ISAs would not lock in savers' money as this would exclude people with limited resources who might need access to their money quickly.</paragraph>
            <paragraph>"We do not consider that a product whose terms and conditions actually prevented withdrawals or transfers during a fixed term would be consistent with Ministers' intentions or the statutory rules."</paragraph>
            <paragraph>So serious are the Revenue's concerns that they no longer trust banks and building societies to monitor themselves. They plan to introduce a new requirement which insists institutions submit full details of all Isa accounts to them for approval, before they becomes available to the public. Until now, banks merely had to satisify themselves they were not breaking the rules.</paragraph>
            <paragraph>Paul James, marketing manager of Julian Hodge Bank, said the fixed accounts were launched in response to customer demand.</paragraph>
            <paragraph>He said:"People were asking for a fixed rate, and those who have taken them out over the past couple of years have done well. We understood that Isas had to be transferable on notice, which we took to be the end of the fixed period.</paragraph>
            <paragraph>"We were audited by the Revenue last year, and the issue was not raised at that stage, so we thought everything was OK. If we have been successfully audited then the accounts can't be otherwise but OK surely?"</paragraph>
            <paragraph>Nigel Snell, a spokesman for Liverpool Victoria said that its range of five Isas prohibiting withdrawals did include a proviso in the small print allowing access to funds "in exceptional circumstances and by permission of the trustees".</paragraph>
            <paragraph>He added:"We make it clear to people that their money is locked away, but thought the account was compliant because of this clause in the small print."</paragraph>
            <paragraph>An Ipswich spokesman said it was aware there was some ambiguity when its account was launched last week. However, it acknowledged it may have to review its terms and conditions again, after seeing the letter from the Revenue.</paragraph>
        </text>
<date>
            <day>10</day>
            <month>05</month>
            <year>2002</year>
        </date>
<source>Sexymoney</source> 
```

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/article/head/following-sibling::*[following-sibling::portal]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**在提供的 XML 文档（上图）上计算 XPath 1.0 表达式并将所选节点复制到输出，产生完全相同的结果（上图）**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:31:29.567

如果第一层只有一个头和门户节点，可以枚举一个头之后和门户节点之前的所有节点，然后取它们的子节点：

```
//head/following::*[following::portal]/descendant-or-self::* 
```

或者如果有多篇文章：

```
//article/head/following-sibling::*[following-sibling::portal]/descendant-or-self::* 
```

# eclipse - Tomcat没有在eclipse上启动

> ID：13270615
> 
> 赞同：0
> 
> 时间：2012-11-07T13:18:00.707
> 
> 标签：eclipse, jakarta-ee, tomcat, timeout

在 Eclipse 的 Java EE 项目中启动 tomcat 7.0 时遇到了一些问题。启动服务器时出现超时错误。我不知道出了什么问题。我尝试将超时限制增加到 1800 秒，但它没有改变任何东西。

以下是tomcat尝试启动时的日志：

```
7 nov. 2012 13:59:33 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
7 nov. 2012 13:59:33 org.apache.tomcat.util.digester.SetPropertiesRule begin
ATTENTION: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:test' did not find a matching property.
7 nov. 2012 13:59:33 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
7 nov. 2012 13:59:33 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
7 nov. 2012 13:59:33 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 590 ms
7 nov. 2012 13:59:33 org.apache.catalina.core.StandardService startInternal
INFO: Démarrage du service Catalina
7 nov. 2012 13:59:33 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.32
7 nov. 2012 13:59:35 org.apache.catalina.core.ContainerBase startInternal
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/test]]
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/test]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
... 7 more
Caused by: java.lang.NoClassDefFoundError: Lorg/apache/commons/logging/Log;
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
at java.lang.Class.getDeclaredFields(Class.java:1743)
at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87)
at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:140)
at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.Log
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
... 21 more
7 nov. 2012 13:59:35 org.apache.catalina.core.ContainerBase startInternal
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
7 nov. 2012 13:59:35 org.apache.catalina.startup.Catalina start
GRAVE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more
7 nov. 2012 13:59:35 org.apache.catalina.startup.Catalina start
INFO: Server startup in 1846 ms 
```

谢谢您的答复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:32:35.157

> 信息：服务器在 1846 毫秒内启动

具体来说，作为应用服务器的 Tomcat 已成功启动（如堆栈跟踪中的最后一行所示`test`）正如您从

> 无法启动组件 [StandardEngine[Catalina].StandardHost[localhost] **.StandardContext[/test]]** 原因：java.lang.NoClassDefFoundError: Lorg/apache/commons/logging/Log;

[从这里](http://mirror.olnevhost.net/pub/apache//commons/logging/binaries/commons-logging-1.1.1-bin.tar.gz)下载缺少的依赖项

为避免将来出现麻烦，请复制您从上面的链接下载的公共库 jar，并将它们放在部署包的文件`WEB-INF\lib`夹（文件夹或 .war 文件）中。`test`

或者，

[从此处](http://mirror.olnevhost.net/pub/apache//commons/logging/binaries/commons-logging-1.1.1-bin.tar.gz)的 Commons 站点下载并安装 Apache Commons Logging 库的最新副本，然后复制到`TOMCAT_HOME\common\lib`文件夹中（如果路径不存在，请创建路径）。`TOMCAT_HOME`指的是你的tomcat安装文件夹。不要将jar复制到多个位置，这会导致以后出现问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:30:45.610

由于缺少已安装的 Web 应用程序的依赖项，Tomcat 无法启动。从您的堆栈跟踪中（消除嗡嗡声：P）

```
...[blah blah]...
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.Log
at org.apache.catalina.loader.WebappClassLoader.loadClass [...]
...[blah blah]...
GRAVE: A child container failed during start
...[blah blah]... 
```

尝试删除所有已部署的 Web 应用程序，然后重新开始。如果 Tomcat 将启动，那么您可以尝试找出您的 Web 应用程序是什么导致了所有这些混乱。

# java - 如何使用java获取系统托盘中打开的应用程序列表

> ID：13270618
> 
> 赞同：0
> 
> 时间：2012-11-07T13:18:04.417
> 
> 标签：java, swing

我找到了这个[SO 链接](https://stackoverflow.com/questions/9661198/how-to-find-the-names-of-currently-opened-applications-on-taskbar-in-windows)来获取任务栏中当前打开的应用程序。

1.  此外，我需要使用 Java 让应用程序在系统托盘中运行。
2.  如果有其他好方法可以在任务栏中找到打开的应用程序，还建议我。
3.  如何找到鼠标单击和击键发生在哪个应用程序中？
4.  我还想通过查看特定鼠标单击打开的应用程序来跟踪鼠标单击。

我希望这个应用程序能够在 Linux 和 Windows 环境中运行。我需要在我的一个使用 Java 的应用程序中完成上述所有操作。

# django - 使用 oracle 后端从 blob 列中读取原始二进制数据

> ID：13270619
> 
> 赞同：0
> 
> 时间：2012-11-07T13:18:04.280
> 
> 标签：django, oracle, orm, blob, blobstorage

我正在使用 oracle 遗留数据库，需要读取和写入二进制数据（png 图像和 MDL Molfiles）。Django 的 inspectdb 命令为这些列生成了文本字段，说这只是一个猜测。现在，当我试图从此类字段中检索一个值时，我得到：DjangoUnicodeDecodeError: 'utf8' codec can't decode byte 0x89 in position 0: invalid start byte。错误。

有没有办法读写这些列？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:51:59.643

```
class BlobField(models.TextField):
    description = "Stores raw binary data"

    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwds):
        kwds = _adjust_keywords(kwds)
        super(BlobField, self).__init__(*args, **kwds)

    def get_internal_type(self):
        return "BlobField"

    def get_db_prep_value(self, value, connection=None, prepared=False):
        return value

    def to_python(self, value):
        return Blob(value) 
```

# svnkit - 如何使用java获取SVN目录中存在的文件夹列表

> ID：13270621
> 
> 赞同：2
> 
> 时间：2012-11-07T13:18:09.593
> 
> 标签：svnkit

我在我的应用程序中使用 svnkit-1.3.5.jar。在单击按钮的其中一个屏幕上，我需要显示一个 jQuery 对话框，其中包含 SVN 中特定路径中存在的文件夹列表。svnkit 是否提供任何方法来检索存在于特定位置的所有文件夹名称？我如何在java中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-18T11:20:56.640

这是我用于相同目的的代码（使用[svnkit 库](http://svnkit.com/download.php)）。@mstrap 代码的修改版本更清晰。

```
public static String NAME = "svnusername";
public static String PASSWORD = "svnpass";
public final String TRUNK_VERSION_PATH = "svn://192.168.1.1/path";
public static List<String> apiVersions;

   public List<String> getApiVersion() {
        logger.info("Getting API Version list....");
        apiVersions = new ArrayList<String>();
        SVNURL repositoryURL = null;
        try {
            repositoryURL = SVNURL.parseURIEncoded(TRUNK_VERSION_PATH);
        } catch (SVNException e) {
            logger.error(e);
        }

        SVNRevision revision = SVNRevision.HEAD;
        SvnOperationFactory operationFactory = new SvnOperationFactory();
        operationFactory.setAuthenticationManager(new BasicAuthenticationManager(NAME, PASSWORD));
        SvnList list = operationFactory.createList();
        list.setDepth(SVNDepth.IMMEDIATES);
        list.setRevision(revision);
        list.addTarget(SvnTarget.fromURL(repositoryURL, revision));
        list.setReceiver(new ISvnObjectReceiver<SVNDirEntry>() {
            public void receive(SvnTarget target, SVNDirEntry object) throws SVNException {
                String name = object.getRelativePath();
                if(name!=null && !name.isEmpty()){
                    apiVersions.add(name);
                }
            }
        });
        try {
            list.run();
        } catch (SVNException ex) {
            logger.error(ex);
        }

        return apiVersions;
    } 
```

干杯！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:31:47.523

```
final URL url = ...
final SVNRevision revision = ...
final SvnOperationFactory operationFactory = ...

final SvnList list = operationFactory.createList();
list.setDepth(SVNDepth.IMMEDIATES);
list.setRevision(revision);
list.addTarget(SvnTarget.fromURL(url, revision);
list.setReceiver(new ISvnObjectReceiver<SVNDirEntry>() {
    public void receive(SvnTarget target, SVNDirEntry object) throws SVNException {
        final String name = object.getRelativePath();
        System.out.println(name);
    }
});

list.run(); 
```

# android - 样式用户选择实现

> ID：13270622
> 
> 赞同：0
> 
> 时间：2012-11-07T13:18:13.607
> 
> 标签：android, layout, styles

我创建了一个样式 xml 来保存用户可以选择的不同样式。但是，无论用户选择什么，我的样式都默认为最后一个样式（绿色）。我错过了什么吗？菜单类

```
 public class UserMenu extends Activity implements OnClickListener {
    Button preview;
    Spinner spinnerColor;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            if("Red".equals(getIntent().getStringExtra("Theme")));
            {
                setTheme(R.style.Theme_Red);
            }
            if("Green".equals(getIntent().getStringExtra("Theme")));
            {
                setTheme(R.style.Theme_Blue);
            }
            if("Blue".equals(getIntent().getStringExtra("Theme")));
            {
                setTheme(R.style.Theme_Green);
            }

            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_user_menu);

            spinnerColor = (Spinner) findViewById(R.id.spinnerColorMenu);
            //TextView Title = (TextView)findViewById(R.id.ViewModuleTitle);

            preview = (Button)findViewById(R.id.previewButton);
               preview.setOnClickListener(this);

        }

        public void onClick(View v)

        {
            String bgColor = spinnerColor.getSelectedItem().toString();
            if(bgColor.equals("Red"))
             {
                Intent intent = getIntent();
                intent.putExtra("Theme", "Red");
              finish();
              startActivity(intent);
             }
             else if(bgColor.equals("Blue"))
             {
                 Intent intent = getIntent();
                intent.putExtra("Theme", "Blue");
               finish();
               startActivity(intent);
             }

             else if(bgColor.equals("Green"))
             {
                 Intent intent = getIntent();
                intent.putExtra("Theme", "Green");
               finish();
               startActivity(intent);
             }

        }
    } 
```

布局

```
 <TextView
        android:id="@+id/ViewModuleTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:text="@string/addModule"
        android:textSize="22dp"
        style="?textTitle" />

    <TextView
        android:id="@+id/lableTextModuleCode"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/enterModuleCode"
        android:layout_marginLeft="10dp"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        style="?textBody"/>

     <Spinner
        android:id="@+id/spinnerColorMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:entries="@array/colorMenu"/>

     <Button
          android:id="@+id/previewButton"
          android:layout_width="150dp"
          android:layout_height="wrap_content"
          android:layout_marginBottom="10dp"
          android:onClick="previewButton"
          android:text="@string/addModule" />

     </LinearLayout> 
```

风格

```
<style name ="redBody">
         <item name="android:textColor">@color/red</item>
        <item name ="android:background">@color/white</item>
    </style>

    <style name ="redTitle">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/red</item>
    </style>

    <style name ="blueBody">
         <item name="android:textColor">@color/darkBlue</item>
        <item name ="android:background">@color/white</item>
    </style>

    <style name ="blueTitle">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/darkBlue</item>
    </style>

    <style name ="greenBody">
         <item name="android:textColor">@color/green</item>
        <item name ="android:background">@color/white</item>
    </style>

    <style name ="greenTitle">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/green</item>
    </style>

    <style name = "Theme" parent="@android:style/Theme">
        </style>

    <style name = "Theme.Red" >
        <item name="textTitle">@style/redTitle</item>
        <item name="textBody">@style/redBody</item>

        </style>

    <style name = "Theme.Blue" >
        <item name="textTitle">@style/blueTitle</item>
        <item name="textBody">@style/blueBody</item>

        </style>
    <style name = "Theme.Green">
        <item name="textTitle">@style/greenTitle</item>
        <item name="textBody">@style/greenBody</item>

        </style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:28:16.037

尝试将您的主题名称保存在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中。

```
private SharedPreferences preferences;

@Override
protected void onCreate(Bundle state){
   super.onCreate(state);
   . . .

   // Restore preferences
   preferences = getSharedPreferences("YourPrefsName", 0);
   String theme = preferences.getString("THEME", false);

   //set your theme.
}

public void onClick(View v) {
    SharedPreferences.Editor preferencesEditor = preferences.edit();
    String bgColor = spinnerColor.getSelectedItem().toString();
    preferencesEditor.putString("THEME", bgColor);
    preferencesEditor.commit();
} 
```

# sharepoint - 设置初步站点列表信息

> ID：13270626
> 
> 赞同：0
> 
> 时间：2012-11-07T13:18:16.147
> 
> 标签：sharepoint, sharepoint-2010, infopath

我在一个站点中有很多列表。作为要求，应提示网站所有者通过表单添加某些信息（以设置初步列表数据）。一旦在表格中填写此信息，该信息将永远消失。

我正在考虑创建一个位于主页上的 Web 部件，并检查需要初步信息的字段组是否已填写（如果他们没有显示表单）。

除了创建自定义 Web 部件之外，还有其他方法吗？我有 infopath，想知道是否可以使用 Infopath

# html - ASP.NET MVC 在 Ajax 调用控制器后显示视图

> ID：13270637
> 
> 赞同：4
> 
> 时间：2012-11-07T13:18:50.267
> 
> 标签：html, asp.net-mvc, jquery, razor, json

我有一个带有提交表单的视图：当我单击它时，会调用一个 jquery/ajax 函数。此函数必须对 View Model 进行编码，调用 Controller 操作并显示返回的 View。现在，这是我的功能：

```
<script type="text/javascript">
function Analyze() {
    var urlact = '@Url.Action("Analysis")';
    var model = '@Html.Raw(Json.Encode(Model))';
    $.ajax({
        data: model,
        type: "POST",
        url: urlact,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            //WHAT HERE??
        }
    });
}
</script> 
```

*分析*动作是一种

```
public ViewResult Analysis(IEnumerable<Azienda> aziende) {
        Debug.WriteLine(aziende.Count());
        return View(aziende);
    } 
```

返回视图！如何在成功时显示该视图：函数（数据）？我尝试将 dataType 更改为*html*并调用成功**警报（数据）**，但我遇到了编码模型的问题，我尝试评论 contentType 行但同样的模型编码问题。

有人知道该怎么做吗？js/query/ajax 变通方法也很好。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T11:28:10.073

创建一个以 aziende 作为其模型的单独的局部视图，并在您的分析操作中返回它，然后将结果附加到您视图中的 div 中：

```
//action returning a partial view
public ActionResult Analysis(IEnumerable<Azienda> aziende) 
{
    Debug.WriteLine(aziende.Count());
    return PartialView("_partialView", aziende);
}

//then append the result to a div in your javascript
success: function (data) {
    $("#some-div").html(data); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T11:06:06.090

利用

```
return PartialView() 
```

代替

```
return View() 
```

在您的控制器中。然后在 ajax 调用的成功函数中，使用 jQuery .html() 函数更新您希望在 html 中更新的元素。请参阅[Query.html()](http://api.jquery.com/html/)和[View() 与 PartialView()](https://stackoverflow.com/questions/4210138/view-vs-partialview)

# java - 从 Eclipse 外部保存的文件会自动编译吗？

> ID：13270646
> 
> 赞同：0
> 
> 时间：2012-11-07T13:19:11.063
> 
> 标签：java, eclipse

我在eclipse中配置了一个spring mvc web项目。Web 应用程序通过 Eclipse 内部构建的 tomcat 服务器运行。我已经看到，只要我更改某些内容并保存代码，项目就会重新构建，并且可以浏览新的 Web 应用程序。所有这些构建部署都是在幕后完成的。

如果我通过 eclipse 在服务器上运行我的项目，并且我从一些外部工具（如 notepad++）更改了一个项目文件并从那里保存，我的新更改会在 eclipse 中自动构建部署吗？

如果没有，我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:25:14.110

我想如果您在从记事本更改某些文件后在 Eclipse 中刷新项目，它将自动部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:27:59.887

刷新其中文件已更改的项目，并且该项目将/应该自动构建并发布

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:32:25.573

您是否尝试过 Window / Preferences / General / Workspace 然后检查

使用本机挂钩刷新或在访问时轮询刷新

# testing - 有人用 Sikuli 作为测试工具吗？

> ID：13270648
> 
> 赞同：4
> 
> 时间：2012-11-07T13:19:12.760
> 
> 标签：testing, automated-tests, sikuli

嗨，我有一个 Swing 应用程序要测试，我发现 Sikuli 是一个很好的工具，但我有点担心社区的规模，以及它是否正在不断开发并被其他公司使用。

你用它吗？

为了什么？

稳定吗？

它是您所需工作的最佳工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:12:42.070

我也在公司里使用它。它可以很容易地用于不太复杂的 gui 测试。Sikuli 去年没有开发，但现在开发再次增加。尽管社区不是很大，但启动板上的 Sikuli-FAQ 部分中的问题得到了快速回答。在我的公司中，Sikuli 用于之前由人类测试人员完成的 gui 测试。它节省了一些时间，但并非一切都可以使用 Sikuli 自动化，例如 OCR 功能不可靠（但将在不久的将来从 tesseract 2.04 更新到 3）。

对于我的工作来说，它是最好的工具，因为它是我发现的唯一一个开源（=免费）工具，它提供基于屏幕截图的自动化，可以与 CI 系统等其他系统集成，并且可以使用 Java 和 Python 进行编程，这使得单元测试变得容易可以使用 JUnit 或 PyUnit。

希望我能帮上忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T16:57:09.483

是的，我们在内部使用它进行测试。它得到了积极的支持。我已经报告了 Sikuli 中的错误，并在几天内提出了建议和解决方法，这些错误在下一个版本中修复。

它相当稳定。我遇到的问题通常来自未正确指定图像以及程序选择了不正确的屏幕区域。

我们更独特的用途之一是为遗留嵌入式系统创建一组自动化基准测试。该系统是用汇编编写的，没有单元测试功能。它与定制的旧式 PC 应用程序进行通信。我们没有尝试定位 PC 源代码、对设计进行逆向工程，然后编写一些有意义的基准测试，而是创建了许多 Sikuli 脚本来与 PC 应用程序交互。它节省了数周的开发时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:21:02.943

是的，我们用它来自动化 GUI 测试。它主要用于没有测试驱动后端的旧系统。（即：没有测试API）

我们测试了一些非常复杂的工具，包括使用 Sikuli 的调试器。

我们倾向于不使用 Sikuli IDE。

# android - 如果满足条件，则获取包含可选进一步数据的所有日期（Android - SQLite）

> ID：13270649
> 
> 赞同：1
> 
> 时间：2012-11-07T13:19:12.413
> 
> 标签：android, sql, sqlite

# 是）我有的

我正在开发一个带有学校食堂菜单的 Android 应用程序。我从远程网站下载数据并将它们保存到内部 SQLite 数据库到此类表中（所以 Markdown 不支持表，因此我将其列为列表）：

*   ID
*   TEXT - 餐点名称
*   NUMBER - 用餐的数量（我们可以选择更多）
*   ORDERED - 布尔值，是否订购特定餐点
*   DATE - 送餐时的日期（时间戳）

（还有一些不重要的列）

# 我需要的

我想为用户提供一个列表，其中每天当食堂做饭时，有他点的饭菜或他当天没有点任何东西的信息。

问题是，当我需要获取时应该如何查看我的查询：

*   表中的每个日期（一次）。
*   对于每个日期，关于订购的餐点的信息，或者（如果没有订购的餐点）我可以告诉用户那天会饿的东西。

因为我希望我的用户也能够看到他们没有订购的餐点（以便他们的朋友可以看到他们可能有什么），所以我拒绝只保留订购的餐点。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:10:38.210

```
SELECT *, MAX(Ordered) FROM MyTable GROUP BY "Date" 
```

`GROUP BY "Date"`确保您每天获得一个结果；如果可能，`MAX(Ordered)`确保该结果是有序的。

# google-app-engine - Apache Httpclient 和云

> ID：13270654
> 
> 赞同：0
> 
> 时间：2012-11-07T13:19:26.040
> 
> 标签：google-app-engine, heroku, httpclient, cloud-foundry, apache-httpclient-4.x

我想将使用 Apache HttpClient 的抓取服务放到云端。我读到 Google App Engine 可能会出现问题，因为它是直接网络访问和线程创建被禁止的。其他云托管服务提供商怎么样？有没有人体验过 Apache HttpClient + 云？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:05:43.057

AppEngine 具有[线程](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager)和[直接网络访问](https://developers.google.com/appengine/docs/java/urlfetch/)（仅限 HTTP）。有一种[解决方法可以使其与 HttpClient 一起使用](http://peterkenji.blogspot.com/2009/08/using-apache-httpclient-4-with-google.html)。

此外，如果您计划并行使用许多解析任务，您可以查看[Task Queue](https://developers.google.com/appengine/docs/java/taskqueue/overview)甚至[mapreduce](http://code.google.com/p/appengine-mapreduce/)。

顺便说一句，GAE 中有一个“错误功能”，您无法在请求中完全设置自定义用户代理标头 - GAE 总是在其末尾添加“AppEngine”（这会中断对某些站点的请求 - 尤其是 iTunes）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:52:57.273

当然可以从 CloudFoundry 创建线程并访问其他网站，只是每个进程的时间有限。例如，如果您查看[http://rack-scrape.cloudfoundry.com/](http://rack-scrape.cloudfoundry.com/)，它是一个简单的机架应用程序，可以检查来自 Google.com 的“a”标签；

```
require 'rubygems'
require 'open-uri'
require 'hpricot'

run Proc.new { |env| 

  doc = Hpricot(open("http://www.google.com"))
  anchors = (doc/"a")

  [200, {"Content-Type" => "text/html"}, [anchors.inspect]]
} 
```

至于 Apache HttpClient，我没有这方面的经验，但我知道它不再维护。

# ruby-on-rails - 邮箱不发送电子邮件：参数数量错误（1 代表 0）

> ID：13270656
> 
> 赞同：4
> 
> 时间：2012-11-07T13:19:48.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

发送消息时，我可以在控制台中看到：

```
Sent mail to You should add method :mail_email in your Messageable model (2093ms
)
Date: Wed, 07 Nov 2012 14:08:50 +0100
From: mail@myemail.com
to: You should add method :mail_email in your Messageable model 
```

Mailbox gem 的初始化器：

```
Mailboxer.setup do |config|

  #Configures if you applications uses or no the email sending for Notifications and Messages
  config.uses_emails = true

  #Configures the default from for the email sent for Messages and Notifications of Mailboxer
  config.default_from = "mail@myemail.com"

  #Configures the methods needed by mailboxer
  config.email_method = :mail_email
  config.name_method = :name

  #Configures if you use or not a search engine and wich one are you using
  #Supported enignes: [:solr,:sphinx] 
  config.search_enabled = false
  config.search_engine = :solr
end 
```

在我的用户模型中，我有：

```
acts_as_messageable
  def name
    email
  end

 def mail_email
    @mail_email = self.email
 end 
```

但是在发送消息时我看到了这个错误：

```
 ArgumentError in ConversationsController#reply

wrong number of arguments (1 for 0)

Rails.root: C:/rails/sitesale
Application Trace | Framework Trace | Full Trace

app/models/user.rb:17:in `mail_email'
app/controllers/conversations_controller.rb:22:in `reply' 
```

控制器方法回复：

```
 def reply
    current_user.reply_to_conversation(conversation, *message_params(:body, :subject))
    redirect_to conversation
  end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:38:58.817

它应该是：

```
def mail_email(object)
    email
end 
```

（**对象）**很重要。

# javascript - 具有全屏背景的响应式滑块

> ID：13270658
> 
> 赞同：0
> 
> 时间：2012-11-07T13:19:52.880
> 
> 标签：javascript, jquery, slider, responsive-design

我一直在尝试制作一个具有所有分辨率的全屏背景的滑块。

这是示例： [http ://www.ssplab.com/clients/Polimeks/index.html](http://www.ssplab.com/clients/Polimeks/index.html)

我正在使用 RoyalSlider。但它只是不能正常工作以及我的预期。

我看着超大滑块。但它只是通过图像滑动，我也需要内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T08:53:13.737

我在某天之前为我的项目搜索了带有内容的全屏滑块，并且我使用以下链接的示例成功：-

[http://nicinabox.github.com/superslides/#5](http://nicinabox.github.com/superslides/#5)

希望对你有用....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T12:20:29.030

您可以购买此全屏图片库： http: [//www.codegrape.com/item/jquery-fullscreen-image-gallery-v2/1439](http://www.codegrape.com/item/jquery-fullscreen-image-gallery-v2/1439)

# javascript - 检测虚拟键盘与硬件键盘

> ID：13270659
> 
> 赞同：35
> 
> 时间：2012-11-07T13:19:55.307
> 
> 标签：javascript, jquery, keyboard, virtual, tablet

我一直在考虑这个问题，但我想不出办法来处理它。有什么方法可以检测用户是使用虚拟（软件）键盘还是传统（硬件）键盘？

新的 Windows Surface 在封面上有自己的键盘，对于 Android / iPad 有很多不同的蓝牙键盘。

那么，你们中有人对此有任何意见吗？
我的目标是 Android、IOS 和 Windows 平板电脑/手机。

* * *

**动机：（**非常主观）

在为平板电脑/智能手机开发 Web 应用程序时，我了解到在许多情况下使用 JavaScript 键盘而不是操作系统的软件键盘更容易。

假设您要输入 PIN 码。而不是让键盘填满屏幕的一半：

软件 (OS) 键盘：

```
|----------------|
|    [ input]    |
|                |
|----------------|
|  1  2  3  4  5 |
|  6  7  8  9  0 |
|----------------| 
```

JavaScript 键盘：

```
|----------------|
|    [ input]    |
|    | 1 2 3|    |
|    | 4 5 6|    |
|    |_7_8_9|    |
|                |
|                |
|----------------| 
```

如果您需要处理大量输入，也许您想对`div`输入进行叠加并使用软件键盘：

```
|----------------|
| P1 P2    P3 P4 |
| [inp 1][inp 2] |
|----------------|
|    KEYBOARD    |
|                |
|----------------| 
```

但如果用户有自己的硬件键盘，我们希望将编辑内联。

* * *

我一直在环顾四周，发现了这篇文章：[iPad Web App: Detect Virtual Keyboard Using JavaScript in Safari?](https://stackoverflow.com/questions/2593139/ipad-web-app-detect-virtual-keyboard-using-javascript-in-safari) ...但是这个接缝只适用于 IOS - 不确定浏览器。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-12T08:02:13.323

我认为最好的方法是将 HTML5 表单属性与可选的虚拟键盘链接相结合。

HTML5 表单属性可用于触发不同类型的键盘。例如`<input type="email">`，`<input type="number">`和`<input type="tel">`会在 iOS 上触发适当的键盘类型（不确定 Android/WinPho/other，但我想它会这样做），允许用户更轻松地输入数据。

如果您愿意，您还可以在文本字段下为旧的不兼容 HTML5 的移动浏览器提供一个按钮来触发自定义小键盘。这些会将新的 HTML5 字段显示为标准文本字段。

您可以使用浏览器嗅探来检测移动浏览器，但不要忘记那些仍然可以支持诸如蓝牙键盘之类的东西。嗅探还有一个问题，它几乎肯定会错过某些浏览器，并错误地检测到其他浏览器，因此您不应该仅仅依赖它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T21:48:50.820

我不认为覆盖默认屏幕键盘是一个好主意，我建议按照 Jani 的建议进行 - 虚拟键盘也可以适应。

但我确信可以检测到大多数键盘与`resize`事件配对并聚焦在场上或通过监控`window.innerHeight`（或其他一些 [az]*Height）并比较场焦点前后的值。

这是一个奇怪的特征检测案例，因此需要大量的实验。如果我是你，我不会这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-20T16:20:42.007

截至 2017 年 11 月 20 日，适用于 Chrome/Safari 等以及 Android 和 iOS 的最重要的教授解决方案将是检测`div`具有`vh`高度单位（视口高度）的 a 的高度变化

然后在输入/文本区域的任何模糊/焦点更改时，检查它`div`现在的高度是否比该模糊/焦点事件之前的高度（以像素为单位）少 30%。

CSS：

```
#height-div{height: 10vh;} 
```

jQuery：

```
$(document).ready(function() {
    var initialHeight = $("#height-div").height();//gives current height in pixels! We save it for later comparisons 
} 
```

现在这是魔术：

```
$("input, textarea").focus(function(){
        setTimeout(function(){
            if((initialHeight*0.7) > $("#height-div").height()){//if the current viewport height is smaller than 70% of the original size, it means that the keyboard is up
                //ENTER YOUR LOGIC HERE
            }else if((initialHeight*0.7) < parent.$submit.height()){//if the current viewport height is larger than 70% of the original size, it means that the keyboard is down
            //ENTER YOUR LOGIC HERE
            }
        },500);
});

$("input, textarea").blur(function(){
        setTimeout(function(){
            if((initialHeight*0.7) > $("#height-div").height()){//if the current viewport height is smaller than 70% of the original size, it means that the keyboard is up
                //ENTER YOUR LOGIC HERE
            }else if((initialHeight*0.7) < parent.$submit.height()){//if the current viewport height is larger than 70% of the original size, it means that the keyboard is down
            //ENTER YOUR LOGIC HERE
            }
        },500);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T01:07:13.913

它可能没有检测到键盘。但我会尝试检测用户是否在移动浏览器上。由于具有本机虚拟键盘的设备几乎一致地运行在移动浏览器上。

[这是一个使用 jquery 的不错的小脚本](http://jquerybyexample.blogspot.com/2012/03/detect-mobile-browsers-using-jquery.html)

如果它们不是移动设备，请显示您的标准输入字段。

如果他们是移动设备，则不要显示输入字段（因此他们不会获得虚拟键盘），而是有一个隐藏字段或列表，当他们单击您的 pinpad 按钮时会使用 jquery 进行更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T11:56:17.737

前几天我遇到了一个较新的问题，一个很好的答案可能对您的键盘问题有所帮助。

[jquery 悬停超时（触摸）](https://stackoverflow.com/questions/13421303/time-out-on-jquery-hover-function)

本质上，它使用一个 JQuery 函数，如果它能够创建一个触摸事件，则返回一个布尔值。

```
$(document).ready(function() {

    function hasTouch() {
        try {
           document.createEvent("TouchEvent");
           return true;
        } catch (e) {
           return false;
        }    
    }

    var touchPresent = hasTouch();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T11:42:50.483

[WURFL](http://wurfl.sourceforge.net/)是一个服务器端框架，可为您提供有关请求设备功能的大量信息。使用 wurfel，您的应用程序将能够为各种设备/设备组提供优化的输出/标记。

最简单的场景之一是区分台式机、桌子和智能手机。

数据库（xml 文件）定期更新，官方 api 可用于 java、php 和 .net

# c# - 如何在 C# linq 中制作 AND 运算符？

> ID：13270662
> 
> 赞同：3
> 
> 时间：2012-11-07T13:20:09.870
> 
> 标签：c#, linq

```
IEnumerable<WireUsrTgInfo> lstWireData = 
    (from var in lstWireUsrTgInfo
     where var.bWireData == true && var.bWireData == false --> This is not working
     select var).AsEnumerable<WireUsrTgInfo>(); 
```

这个怎么做 ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:22:51.260

根据提供的代码

```
var.bWireData == true && var.bWireData == false 
```

它不能工作，因为同一个变量不能*同时*等于两个相反的值。

如果你需要参数化，你可以这样做：

```
bool expectedValue = true; //OR False
IEnumerable<WireUsrTgInfo> lstWireData = (from var in lstWireUsrTgInfo
            where var.bWireData == expectedValue
            select var).AsEnumerable<WireUsrTgInfo>(); 
```

**编辑**

并且不要`var`在查询中使用，它是上下文（如 Monkieboy 所说）`C#`关键字。需要明确的是：您**可以**使用它，但您**必须**避免这样做，因为它会造成混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T13:22:17.987

`bWireData`不能同时为真和假。你的逻辑有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:26:16.243

正如其他答案所述，您的过滤条件是错误的。但我还想补充一点：

不要将布尔数据与`true`or进行比较`false`。布尔数据实际上是对问题的答案`true`。

```
var query = from info in lstWireUsrTgInfo
            where info.bWireData // selects data which is true
            select info; 
```

也是`var`一个关键字；

也不要在变量名中使用前缀（考虑更好的命名代替 - `HasWireData`, `wireUserTagInfos`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:24:07.943

这永远行不通：这 `WHERE bWireData == true && bWireData == false`是不合逻辑的，因为 bWireData 不能同时为真和假。

`var`是一个关键字，为避免混淆，因此不应用作变量的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T15:34:17.407

&& 是正确的运算符。但是，正如其他海报所指出的那样，您的查询就相当于说“如果奥巴马是总统而奥巴马不是总统，请让我高兴”。基本上你已经建立了一个矛盾，它总是会评估为假，因此不会返回任何结果。顺便说一句，您可能有兴趣了解 && 是一个条件与，这意味着只有在第一项为真时才评估第二项，因此如果结果不可避免地为假，则可以保存对第二项的处理。

# java - 最佳Jtable大小java

> ID：13270664
> 
> 赞同：2
> 
> 时间：2012-11-07T13:20:13.270
> 
> 标签：java, swing, jtable, pixel, text-size

我编写了一个程序，它读取 csv 文件并将其放入`jTable`将单独显示`jFrame`为预览的程序中。一切正常，但我想`jTable`在预览框架中使用最佳尺寸。

那么该怎么做呢？因为例如，如果我为文本选择另一种字体，那么列会更宽还是更小？有没有办法以像素（大小）为单位获取文本长度？`

该类如下所示：

[http://pastebin.com/Gqz10pci](http://pastebin.com/Gqz10pci)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:44:20.887

`JTable`实现`Scrollable`，并且`preferredViewportSize`任意设置为`Dimension(450, 400)`。该大小是通过将表格包装在 a 中`JScrollPane`并调用`pack()`封闭的 来获得的`Window`。请注意一些重要的[注意事项](https://stackoverflow.com/q/7229226/230513)，您可以使用它`setPreferredScrollableViewportSize()`来更改默认大小。倍数`getRowHeight()`可能是高度的合适选择。

# sql - 如何使用powershell检查sql表中是否存在复合主键值？

> ID：13270668
> 
> 赞同：0
> 
> 时间：2012-11-07T13:20:19.643
> 
> 标签：sql, powershell

我在 sql 表中有 2 个主键，例如：ApID 和 AnID。如果存在特定的复合主键值，我想更新 sql 表（dbo.ApAn），否则**通过 powershell将新值插入表中**

**如何在powershell中获取sql表的复合主键？**使用连接或什么？

就像是：

```
IF (ApId_AnID-eq 0) { 
#SQL INSERT CODE
} else { 
#SQL UPDATE CODE
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:40:24.923

您可以使用 sql server 控制台客户端`sqlcmd`或`Invoke-Sqlcmd`cmdlet [http://technet.microsoft.com/en-us/library/cc281720.aspx](http://technet.microsoft.com/en-us/library/cc281720.aspx)。

有关特定查询，请参阅[在 SQL 中检索列信息（复合键）](https://stackoverflow.com/questions/7662587/retrieving-column-information-composite-key-in-sql)

# ruby - 在 Ruby 中解析转发电子邮件的发件人的原始电子邮件地址

> ID：13270672
> 
> 赞同：0
> 
> 时间：2012-11-07T13:20:28.457
> 
> 标签：ruby, ruby-on-rails-3

设想：

user1 向 user2 发送了一封电子邮件（我们称之为 USER1-EMAIL）

user2 将 USER1-EMAIL 转发给 user3

user3 将 USER1-EMAIL 转发给 user4

user4 将电子邮件转发到我的电子邮件解析器（Sendgrid Parse API）

我想要的是获取原始发件人的电子邮件，在这种情况下是 user1 的电子邮件地址

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:08:17.310

我会使用[邮件](http://rubygems.org/gems/mail)宝石。它不仅会为您提供发件人地址，而且还可以为您提供所有其他部分。

```
mail = Mail.read_from_string(email)

mail.from #=> ["original.sender@gmail.com"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:27:02.963

从你单独发布的内容来看，我想我会选择：

```
from = email[/From: .*<(.*?)>/, 1] 
```

# xml - XML Schema 中的枚举定义是多余的

> ID：13270674
> 
> 赞同：3
> 
> 时间：2012-11-07T13:20:40.937
> 
> 标签：xml, xsd

请确认（或反驳）模式定义（.xsd 文件）中的此枚举是多余的（由于第二个 simpleType 只允许任何长度为 5 个字符或更少的内容）：

```
<simpleType name="decision">
    <annotation>
        <documentation>It will decide the flow</documentation>
    </annotation>
    <union>
        <simpleType>
            <restriction base="string">
                <enumeration value="yes"/>
                <enumeration value="no"/>
                <enumeration value="maybe"/>
            </restriction>
        </simpleType>
        <simpleType>
            <restriction base="string">
                <maxLength value="5"/>
            </retriction>
        </simpleType>
    </union>
<simpleType> 
```

我们的应用程序中有很多这样的东西，所以我们应该优化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:22:20.193

如果您只使用模式进行验证，那是多余的。

如果您将模式用于数据绑定、模式感知的 XSLT/XQuery 处理、文档、生成实例或生成表单，那么这种设计有时会很有用。它有时还可以使您的架构更具可扩展性/可定制性。（但这些是关于工会的一般观点，我不确定你的具体情况是否有用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:00:45.427

您所看到的更像是 XSD 作者用来为我所说的“可扩展枚举”提供前向/后向兼容性的模式。

对于某些人来说，这是一个矛盾的说法。对我来说，这意味着一个人必须准备好执行该合约，以**优雅地**处理列出的值以外的值。

合约设计者决定，对于那些特定类型，不应该仅仅因为一些消费者可能没有围绕枚举值的业务逻辑，而**其他**消费者可能没有“快速失败”拒绝（通常由 XSD 验证器完成） 。

当然，它最终似乎确实是一种“令人困惑”的文档方式......想象一下，尽管 XSD 到代码实现（如 .NET 的 xsd.exe、svcutil.exe 或 Java JAXB）会非常聪明（它们不是）至于仍然创建一个枚举类型，具有`yes`、`no`、`maybe`和**other**，后者是所有其他值的全部。我想知道，假设上述情况，您是否仍会认为这是多余的？代码覆盖专家会喜欢它...

# database-design - 树的数据库模式

> ID：13270676
> 
> 赞同：1
> 
> 时间：2012-11-07T13:20:52.520
> 
> 标签：database-design, tree, database-schema

我想为一棵树创建一个数据库模式。除了根记录之外，每条记录都有一个父记录。

**树表**

```
 id | name 
-------------
  1 |  tree1
  2 |  tree2
  3 |  tree3 
```

将给出每棵树中的节点。

**树节点表**

```
 id | name | tree_id | parent_id
---------------------------------
  1 |  a   |   1     |   NULL  
  2 |  b   |   1     |    1
  3 |  c   |   1     |    2
  4 |  d   |   1     |    2
  5 |  e   |   1     |    4
  6 |  f   |   2     |   NULL  
  7 |  g   |   2     |    6
  8 |  h   |   2     |    7
  9 |  i   |   2     |    7
 10 |  j   |   2     |    9 
```

我觉得它不是优化的，有人有更好的设计吗？

更新：`tree_id`用于快速识别记录所属的树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:34:32.803

用一张表保持简单：

```
create table trees (
  id        integer primary key,
  name      varchar not null,
  parent_id references trees) 
```

这为您提供了所需的所有逻辑元素。如果您需要更多特定优化，请在确定对它们的真正需求后考虑它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:28:09.060

离开第一个表，离开第二个表中的“tree_id”列。

除此之外，你的设计非常好。对于少数不提供递归/循环查询的数据库，有“嵌套集”树模型更适合使用非递归或循环查询进行读取，但我会远离它 - 它在更改时性能非常糟糕大树。

# blackberry - Blackberry AppWorld - 描述语言

> ID：13270677
> 
> 赞同：2
> 
> 时间：2012-11-07T13:20:54.043
> 
> 标签：blackberry, blackberry-webworks, appworld

我正在向 AppWorld 添加一个应用程序，并在“描述”字段中添加一个西班牙语描述（我的应用程序支持）。问题是我们的应用程序只支持英语，因为它是针对本地市场的。不幸的是，它仍然要求我提供它的英文详细信息（如描述），所以我的问题是......是否必须提供英文描述？即使我们的应用程序不支持（或将）支持任何其他语言。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:34:14.737

是的，您确实需要包含英文描述，因为无论应用程序以何种语言运行，它都是强制性的。

为什么？应用程序不会像按设备型号或操作系统那样按语言过滤。由于任何设备（无论语言如何）都可以查看或下载该应用程序，因此当不存在特定于语言的描述时，默认使用英语。

如果您的申请是用西班牙语发布的，我强烈建议您在简短的英语描述中包含一个解释事实的声明，然后再以西班牙语对提交的申请进行更详细的单独描述。

# ravendb - 从不同的应用程序访问单个 RavenDB

> ID：13270681
> 
> 赞同：1
> 
> 时间：2012-11-07T13:21:03.453
> 
> 标签：ravendb

我有一个将对象存储在 raven db 中的 Web 项目。为简单起见，这些类位于 Web 项目中。

我现在有一个批处理作业，它是一个单独的应用程序，需要查询同一个数据库并从中提取信息。

有没有办法告诉 raven 将文档映射到批处理作业项目中与 Web 项目中具有相同属性的类。

如果需要，我可以创建一个仅包含这些类的共享 dll。虽然似乎不必要的麻烦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:47:37.060

只要您要反序列化的类的结构与数据的结构部分匹配，它就不会产生影响。

RavenDB 服务器根本不关心您在客户端使用什么类。如果您针对不同的平台，您当然可以共享一个 dll，甚至共享一个可移植的 dll。但是你是对的，没有必要。

但是，您应该了解`Raven-Clr-Type`元数据值。RavenDB 客户端在存储原始文档时会设置此项。客户端使用它来协助反序列化，但它没有完全强制执行。逻辑基本上是这样的：

```
is there ClrType metadata?
  if yes, do we have that type loaded in the current app domain?
    if yes, then deserialize into that type

if none of the above, then deserialize dynamically and cast into the type
requested (basically, duck-typing) 
```

[您可以在 github 上的源代码中](https://github.com/ayende/ravendb/blob/master/Raven.Client.Lightweight/Document/InMemoryDocumentSessionOperations.cs#L429)查看这部分内部结构。

# java - 骆驼守护进程不会解析端点

> ID：13270683
> 
> 赞同：0
> 
> 时间：2012-11-07T13:21:12.700
> 
> 标签：java, xslt, apache-camel

我有一个使用 xslt 组件的骆驼上下文。当我在本地开发机器上运行我的路线时，我没有遇到任何问题。

但是当我在远程服务器上部署我的项目时，我遇到了 xslt 组件的一些问题。我对项目进行了守护，所以我可以在后台运行，也许这会导致问题？我检查了 xsl 文件的路径（测试了在我的日志中找到的路径），它们是正确的，我什至使用绝对路径。

有人有一些提示吗？或者一个想法为什么会出错？

错误日志记录了这些错误：

```
ERROR:  'Syntax error in '()'.'
FATAL ERROR:  'Could not compile stylesheet'
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.commons.daemon.support.DaemonLoader.start(DaemonLoader.java:243)
Caused by: org.apache.camel.RuntimeCamelException: org.apache.camel.FailedToCreateRouteException: Failed to create route route2 at: >>> To[ref:hoo_transformer] <<< in route: Route[[From[jms:incomingHoo]] -> [To[ref:hoo_transformer], T... because of Failed to resolve endpoint: ref://hoo_transformer due to: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hoo_transformer': FactoryBean threw exception on object creation; nested exception is org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: xslt://file:/var/java/sws/xslt/transform_hoo.xsl due to: Could not compile stylesheet
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1140)
    at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:103)
    at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:237)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:303)
    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:911)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:428)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at org.apache.camel.spring.Main.createDefaultApplicationContext(Main.java:219)
    at org.apache.camel.spring.Main.doStart(Main.java:173)
    at org.apache.camel.impl.ServiceSupport.start(ServiceSupport.java:65)
    at org.apache.camel.impl.ServiceSupport.start(ServiceSupport.java:52)
    at org.apache.camel.impl.MainSupport.run(MainSupport.java:114)
    at nl.kabisa.seacon.SwsDeamon.start(SwsDeamon.java:17)
    ... 5 more
Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route route2 at: >>> To[ref:hoo_transformer] <<< in route: Route[[From[jms:incomingHoo]] -> [To[ref:hoo_transformer], T... because of Failed to resolve endpoint: ref://hoo_transformer due to: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hoo_transformer': FactoryBean threw exception on object creation; nested exception is org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: xslt://file:/var/java/sws/xslt/transform_hoo.xsl due to: Could not compile stylesheet
    at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:773)
    at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:174)
    at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:610)
    at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:1514)
    at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:1306)
    at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:1213)
    at org.apache.camel.spring.SpringCamelContext.doStart(SpringCamelContext.java:164)
    at org.apache.camel.impl.ServiceSupport.start(ServiceSupport.java:65)
    at org.apache.camel.impl.ServiceSupport.start(ServiceSupport.java:52)
    at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:1191)
    at org.apache.camel.spring.SpringCamelContext.maybeStart(SpringCamelContext.java:203)
    at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:101)
    ... 18 more
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: ref://hoo_transformer due to: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hoo_transformer': FactoryBean threw exception on object creation; nested exception is org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: xslt://file:/var/java/sws/xslt/transform_hoo.xsl due to: Could not compile stylesheet
    at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:437)
    at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:47)
    at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:189)
    at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:110)
    at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116)
    at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:64)
    at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:58)
    at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:394)
    at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:172)
    at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:770)
    ... 29 more
Caused by: org.apache.camel.RuntimeCamelException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hoo_transformer': FactoryBean threw exception on object creation; nested exception is org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: xslt://file:/var/java/sws/xslt/transform_hoo.xsl due to: Could not compile stylesheet
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1140)
    at org.apache.camel.impl.PropertyPlaceholderDelegateRegistry.lookup(PropertyPlaceholderDelegateRegistry.java:56)
    at org.apache.camel.component.ref.RefComponent.lookupEndpoint(RefComponent.java:52)
    at org.apache.camel.component.ref.RefComponent.createEndpoint(RefComponent.java:41)
    at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:75)
    at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:419)
    ... 38 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hoo_transformer': FactoryBean threw exception on object creation; nested exception is org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: xslt://file:/var/java/sws/xslt/transform_hoo.xsl due to: Could not compile stylesheet
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:109)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1414)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:245)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)
    at org.apache.camel.spring.spi.ApplicationContextRegistry.lookup(ApplicationContextRegistry.java:41)
    at org.apache.camel.impl.PropertyPlaceholderDelegateRegistry.lookup(PropertyPlaceholderDelegateRegistry.java:54)
    ... 42 more
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: xslt://file:/var/java/sws/xslt/transform_hoo.xsl due to: Could not compile stylesheet
    at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:437)
    at org.apache.camel.core.xml.AbstractCamelEndpointFactoryBean.getObject(AbstractCamelEndpointFactoryBean.java:57)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 49 more
Caused by: javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:843)
    at org.apache.camel.builder.xml.XsltBuilder.setTransformerSource(XsltBuilder.java:231)
    at org.apache.camel.builder.xml.XsltBuilder.setTransformerInputStream(XsltBuilder.java:261)
    at org.apache.camel.component.xslt.XsltComponent.createEndpoint(XsltComponent.java:120)
    at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:75)
    at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:419)
    ... 51 more
Cannot start daemon
Service exit with a return value of 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:02:06.250

我发现了这个问题。

我正在将这个旧的骆驼项目转换为作为守护进程运行。因为该项目是 mavenized 我相信每个库都是远程获取的。显然 pom 还包含一个本地库的路径，包含在项目的 git repo 中。实际缺少的 jar 是 XSLT 组件所需的 Saxon jar。

因此，当我在本地运行项目时，我没有遇到任何问题，因为 jar 就在那里。但是当我构建 jar 并部署它时，没有包含 Saxon jar。

我的解决方案：

我向我们的 Nexus 服务器添加了一个新的托管存储库，并将该依赖项包含到 pom 文件中。所以不再有本地依赖。

# cross-browser - 哪些浏览器目前支持标准 css 边框半径

> ID：13270687
> 
> 赞同：-5
> 
> 时间：2012-11-07T13:21:37.230
> 
> 标签：cross-browser, css

哪些浏览器当前支持标准 css 边框半径。

现在省略 -moz-border-radius 和 -webkit-border-radius 元素是否安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:26:00.187

当前所有的浏览器都支持border-radius 属性，但是为了优雅的降级目的，最好也包含供应商前缀。

这是一个包含更详细信息的链接：

[http://caniuse.com/border-radius](http://caniuse.com/border-radius)

# c - 创建 pthread 时使用来自另一个源文件的 start_function

> ID：13270688
> 
> 赞同：2
> 
> 时间：2012-11-07T13:21:36.770
> 
> 标签：c, pthreads

在一个源文件的 main() 方法中，我调用了 pthread_create()，如下所示：

```
pthread_t pth_chanrecv;
pthread_create(&pth_chanrecv, NULL, chanrecv_run, NULL); 
```

“chanrecv_run”是我编写的另一个源文件中的一个函数。
这是函数原型：

```
void *chanrecv_run(void *arg); 
```

函数原型位于我已包含在包含 main() 方法的源文件中的头文件中。

我正在使用以下语句编译我的程序：

```
gcc -lpthread -o bin/main2 src/main2.c 
```

chanrecv_run() 函数位于名为“chanrecv.c”的文件中，也在 src 文件夹中。

每次我尝试编译它时，都会收到以下错误：

```
/tmp/ccHxRSTk.o: In function `main':
main2.c:(.text+0x256): undefined reference to `chanrecv_run'
collect2: ld returned 1 exit status 
```

我不知道出了什么问题。我搜索了网络，试图找到另一个人试图使用 pthread_create 函数调用另一个文件中的函数并且完全空白的实例。这甚至可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:25:34.933

您需要将其添加到编译器调用中，以便在编译器启动链接时使其可用：

```
gcc -Wall -o main2 main2.c chanrecv.c -pthread 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:25:20.483

这个问题与 pthreads 无关。由于您尚未链接包含该`chanrecv_run`函数的第二个 .c 文件，因此链接器正在呻吟。

你需要：

```
gcc -lpthread -o bin/main2 src/main2.c src/file_with_chanrecv_run_in.c 
```

# android - 在 mmap 之后在 memcpy 中获取分段错误 SIGSEGV

> ID：13270689
> 
> 赞同：1
> 
> 时间：2012-11-07T13:21:44.417
> 
> 标签：android, c++, segmentation-fault, mmap, memcpy

我编写了一个简单的 Android 本机函数，它获取文件名和更多参数，并通过映射（mmap）它的内存来读取文件。

因为它是 mmap，我真的不需要调用“read()”，所以我只需从 mmap() 返回的地址中调用 memcpy()。

但是，在某个地方我得到了一个 SIGSEGV 可能是因为我试图访问我不允许的内存。但我不明白为什么，我已经要求映射所有文件的内存！

我附上了我的代码和我得到的错误：

**编辑**

我修复了终止循环，但在读取 25001984 个字节后仍然得到 SIGSEGV。该函数适用于这些参数： jn_bytes = 100,000,000 jbuffer_size = 8192 jshared=jpopulate=jadvice=0

```
void Java_com_def_benchmark_Benchmark_testMmapRead(JNIEnv* env, jobject javaThis,
        jstring jfile_name, unsigned int jn_bytes, unsigned int jbuffer_size, jboolean jshared, jboolean jpopulate, jint jadvice) {
    const char *file_name = env->GetStringUTFChars(jfile_name, 0);

    /* *** start count  *** */
    int fd = open(file_name, O_RDONLY);
    //get the size of the file
    size_t length = lseek(fd, 0L, SEEK_END);
    lseek(fd, 0L, SEEK_SET);
    length = length>jn_bytes?jn_bytes:length;

    // man 2 mmap: MAP_POPULATE is only supported for private mappings since Linux 2.6.23
    int flags =  0;
    if (jshared) flags |= MAP_SHARED; else flags |= MAP_PRIVATE;
    if(jpopulate) flags |= MAP_POPULATE;
    //int flags = MAP_PRIVATE;
    int *  addr = reinterpret_cast<int *>(mmap(NULL, length , PROT_READ, flags , fd, 0));
    if (addr == MAP_FAILED) {
        __android_log_write(ANDROID_LOG_ERROR, "NDK_FOO_TAG", strerror(errno));
        return;
    }
    int * initaddr = addr;
    if(jadvice > 0)
        madvise(addr,length,jadvice==1?(MADV_SEQUENTIAL|MADV_WILLNEED):(MADV_DONTNEED));
    close(fd);

    char buffer[jbuffer_size];
    void *ret_val = buffer;
    int read_length = length;
    while(ret_val == buffer || read_length<jbuffer_size) {
/*****GETTING SIGSEGV SOMWHERE HERE IN THE WHILE************/
        ret_val = memcpy(buffer, addr,jbuffer_size);
        addr+=jbuffer_size;
        read_length -= jbuffer_size;
    }
    munmap(initaddr,length);
    /* stop count */
    env->ReleaseStringUTFChars(jfile_name, file_name);
} 
```

和错误日志：

```
 15736^done
(gdb) 
15737 info signal SIGSEGV
&"info signal SIGSEGV\n"
~"Signal        Stop\tPrint\tPass to program\tDescription\n"
~"SIGSEGV       Yes\tYes\tYes\t\tSegmentation fault\n"
15737^done
(gdb) 
15738-stack-list-arguments 0 0 0
15738^done,stack-args=[frame={level="0",args=[]}]
(gdb) 
15739-stack-list-locals 0
15739^done,locals=[]
(gdb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:08:34.780

这里有一个大问题：

```
 addr+=jbuffer_size; 
```

您按字节增加，而您只想按字节增加`addr`它。`sizeof(int) * jbuffer_size``jbuffer_size`

我的猜测是`sizeof(int)`你的系统上的 4，因此你在循环的大约 25% 处崩溃，因为你`addr`在每次迭代中增加了 4 倍太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:58:53.563

中的条件`while(ret_val == buffer || read_length<jbuffer_size)`是错误的。`ret_val == buffer`将始终为真，如果`read_length<jbuffer_size`在到达循环时为真，它将始终保持`read_length`为真，因为只会减少（嗯，直到它下溢 INT_MIN）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:55:22.613

这个循环永远不会终止，因为`ret_val`总是等于`buffer`

```
void *ret_val = buffer;
int read_length = length;
while(ret_val == buffer || read_length<jbuffer_size) {
    /*****GETTING SIGSEGV SOMWHERE HERE IN THE WHILE************/
    ret_val = memcpy(buffer, addr,jbuffer_size);
    addr+=jbuffer_size;
    read_length -= jbuffer_size;
} 
```

`memcpy`总是返回它的第一个参数，所以`ret_val`永远不会改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T14:56:04.163

`while`循环是无限的：

```
while(ret_val == buffer || read_length<jbuffer_size) {
    ret_val = memcpy(buffer, addr,jbuffer_size);
    addr+=jbuffer_size;
    read_length -= jbuffer_size;
} 
```

一如既往[`memcpy()`](http://en.cppreference.com/w/c/string/byte/memcpy)地返回目的地缓冲区，所以`ret_val == buffer`总是如此`true`（因此作为终止条件的一部分是无用的）。这意味着在循环的每次迭代中都会`addr`增加`jbuffer_size`字节并传递给 `memcpy()`，从而导致访问无效内存。

# actionscript-3 - 如何在 Flash 的 FileReference.browse 对话框中将按钮标签从“保存”更改为“打开”

> ID：13270692
> 
> 赞同：2
> 
> 时间：2012-11-07T13:22:09.860
> 
> 标签：actionscript-3, flash, apache-flex

在 AS3 中，该`FileReference.browse()`函数始终具有“保存”按钮标签。事实上，对话框的标题似乎是“选择要上传的文件...”，然后按钮标签上写着“保存”，这完全是奇怪的。

有没有办法将按钮标签从`Save`to更改`Open`为什么？

底部的“另存为格式”下拉菜单也是如此。如果对话框用于打开文件，这是非常具有误导性的。这是一个错误吗？

![在此处输入图像描述](../Images/7e2bf8eb44aa53c0e48c560bbe35bd51.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:28:04.570

从此文档中，您似乎无法[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29)

这似乎只有在 Adob​​e AIR 中才有可能：

> 注意：Adobe AIR 中提供的 File 类包括用于访问更具体的系统文件选择对话框的方法。这些方法是 File.browseForDirectory()、File.browseForOpen()、File.browseForOpenMultiple() 和 File.browseForSave()。

# c++ - 如何使用未饱和核心的 z3 拆分子句并尝试再次找出未饱和核心

> ID：13270696
> 
> 赞同：1
> 
> 时间：2012-11-07T13:22:14.773
> 
> 标签：c++, split, z3, seek

你能告诉我如何拆分 unsat cores 的子句吗？这里是关于在发现未饱和核心后的问题2，我将再次尝试寻找。你想告诉如何做到这一点？

非常感谢。

* * *

如何拆分子句如下

```
`and` (`or` (`<=_int` 1002 x1) (`<=_int` 1000 x1)) (`and` (`or` (`<=_int` 0 (`+_int` x2 (`*_int` -1003 x1))) (`<=_int` 0 (`+_int` x2 (`*_int` -1230 x1)))) (`and` (`or` (`<=_int` 0 (`+_int` x3 (`*_int` -1999 x2))) 
```

关于问题2，

```
cout<<s.check(3,assumptions)<<endl;
    expr_vector core = s.unsat_core();
................

expr assumptions2[2] = {p1,p3};
                    cout<<"check next"<<s.check(2,assumptions2)<<endl;
                    expr_vector core1 = s.unsat_core();
                    for(unsigned int k=0;k<core1.size();++k){
                            cout<<"New core size "<<k<<endl;
                            cout<<"New unsat core "<<core1[k]<<endl;
                    } 
```

再次调用 unsat 核心函数，它不能再次给 unsat 核心。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:09:51.677

我不确定我是否理解你的问题。看来您有一个表单的断言，并且`(and c1 (and c2 c3))`您想要单独跟踪。`c1``c2``c3`

在 Z3 中，我们使用答案文字来跟踪断言。答案文字本质上是一个新的布尔值，用于跟踪断言。也就是说，断言是否（由 Z3 使用）来显示整个断言集的不可满足性。例如，如果我们想跟踪 assertion `F`，我们创建一个新的 Boolean 变量`p`和 assert `p implies F`。然后，我们为`p`check 方法提供一个参数。

如果`F`是一个大连词，我们想单独跟踪它的元素，我们应该提取它的元素并为每个元素创建一个答案文字。这是解决问题的完整示例。您可以通过将其`example.cpp`包含在 Z3 发行版中包含的文件中来对其进行测试。请注意，您必须包括`#include<vector>`.

```
/**
   \brief Unsat core example 2
*/
void unsat_core_example2() {
    std::cout << "unsat core example 2\n";
    context c;
    // The answer literal mechanism, described in the previous example,
    // tracks assertions. An assertion can be a complicated
    // formula containing containing the conjunction of many subformulas.
    expr p1 = c.bool_const("p1");
    expr x  = c.int_const("x");
    expr y  = c.int_const("y");
    solver s(c);
    expr F  = x > 10 && y > x && y < 5 && y > 0;
    s.add(implies(p1, F));
    expr assumptions[1] = { p1 };
    std::cout << s.check(1, assumptions) << "\n";
    expr_vector core = s.unsat_core();
    std::cout << core << "\n";
    std::cout << "size: " << core.size() << "\n";
    for (unsigned i = 0; i < core.size(); i++) {
        std::cout << core[i] << "\n";
    }
    // The core is not very informative, since p1 is tracking the formula F
    // that is a conjunction of subformulas.
    // Now, we use the following piece of code to break this conjunction
    // into individual subformulas. First, we flat the conjunctions by
    // using the method simplify.
    std::vector<expr> qs; // auxiliary vector used to store new answer literals.
    assert(F.is_app()); // I'm assuming F is an application.
    if (F.decl().decl_kind() == Z3_OP_AND) {
        // F is a conjunction
        std::cout << "F num. args (before simplify): " << F.num_args() << "\n";
        F = F.simplify();
        std::cout << "F num. args (after simplify):  " << F.num_args() << "\n";
        for (unsigned i = 0; i < F.num_args(); i++) {
            std::cout << "Creating answer literal q" << i << " for " << F.arg(i) << "\n";
            std::stringstream qname; qname << "q" << i;
            expr qi = c.bool_const(qname.str().c_str()); // create a new answer literal
            s.add(implies(qi, F.arg(i)));
            qs.push_back(qi);
        }
    }
    // The solver s already contains p1 => F
    // To disable F, we add (not p1) as an additional assumption
    qs.push_back(!p1);
    std::cout << s.check(qs.size(), &qs[0]) << "\n";
    expr_vector core2 = s.unsat_core();
    std::cout << core2 << "\n";
    std::cout << "size: " << core2.size() << "\n";
    for (unsigned i = 0; i < core2.size(); i++) {
        std::cout << core2[i] << "\n";
    }
} 
```

# php - 基于单选按钮选择的下拉菜单

> ID：13270699
> 
> 赞同：0
> 
> 时间：2012-11-07T13:22:22.947
> 
> 标签：php, javascript, drop-down-menu

我有四个单选按钮，我想根据所选单选按钮获取下拉菜单。如果我只是编写所有这些下拉菜单并根据选择显示它们是最好的，还是有办法使用 ajax 来做到这一点（因为下拉值来自数据库）？以下是单选按钮：

```
<input type="radio" name="some" value="someValue1">
<input type="radio" name="some" value="someValue2">
<input type="radio" name="some" value="someValue3">
<input type="radio" name="some" value="someValue4"> 
```

这是下拉菜单：

```
<select name="reason">
<?php
$data = WorkReason::all();
foreach ($data as $d) {
?>
 <option value="<?php echo $d->code; ?>"><?php echo $d->reason; ?></option>
<?php
}
?>
</select> 
```

我正在使用 php ActiveRecords 从数据库中获取值。因此，如果有人知道这样做的好方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:29:32.693

制作不同的下拉列表并添加一个 php 条件来检查单击了哪个单选按钮并显示该列表。

```
if (isset($_POST['checkbox1']) {

echo '<select>...'

} else if (isset($_POST['checkbox2']) {

echo '<select>...'

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:10:54.143

制作不同的下拉列表并添加一个 php 条件来检查单击了哪个单选按钮并显示该列表。您可以使用数组为您选择正确的代码。

```
$radio2select = array ("someValue1" => "<select>..." , "someValue2" => "...", "someValue3" => "..."); // you get the idea
echo $radio2select($_REQUEST['radio']) ; 
```

使用数组是避免使用 switch 语句的一个技巧，当你的下拉框已经被预先计算时，它可以很好地工作。

否则，创建一个构建下拉框的函数：

```
function select_reasons($which){
<select name="reason">
<?php
  $data = WorkReason::all(array('conditions' => array ( 'reason = ?' => $which)));
  foreach ($data as $d) {
?>
 <option value="<?php echo $d->code; ?>"><?php echo $d->reason; ?></option>
<?php
 }
?>
</select>
} 
```

然后只需传递`$_REQUEST[‘radio']`即可生成相应的下拉列表。

请注意，我不知道您的数据库架构，但我认为它应该可以帮助您入门。

此外，此代码可以在常规 Get 或 Post 上运行，也可以嵌入到 ajax 往返中（这取决于您使用的框架）。与基于 CSS 的解决方案相比，另一个优点是页面中仅包含必要的 html 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:30:14.787

只需加载所有下拉菜单并显示用户之前使用 CSS 选择的菜单：

```
display:block
display:none 
```

# c# - 如何将自动生成的列移动到左侧？

> ID：13270700
> 
> 赞同：2
> 
> 时间：2012-11-07T13:22:22.837
> 
> 标签：c#, asp.net

我有gridview，我在运行时使用数据表作为数据源添加行。但我想将删除命令字段添加到网格视图。我添加并运行它。但我在左侧位置有删除按钮。我想更改删除按钮到最后的gridview。自动生成列之后的意思。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:29:00.637

这篇文章有你需要知道的把你生成的列放在最左边的部分：

[在 GridView 列的 LeftMost 部分移动 AutoGenerate 列](https://stackoverflow.com/questions/2011574/how-can-i-change-gridview-templatecolumn-order-dynamically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:42:52.430

您可以通过执行以下操作更改顺序：-

```
YourDataColumn.SetOrdinal(0); 
```

这允许您将列移动到非位置。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T10:00:31.030

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e){

        GridViewRow row = e.Row;
        // Intitialize TableCell list
        List<TableCell> columns = new List<TableCell>();
        foreach (DataControlField column in GridView1.Columns)
        {
            if (row.Cells.Count > 0)
            {
            //Get the first Cell /Column
            TableCell cell = row.Cells[0];
            // Then Remove it after
            row.Cells.Remove(cell);
            //And Add it to the List Collections
            columns.Add(cell);
            }
        }

        // Add cells
        row.Cells.AddRange(columns.ToArray());
} 
```

# suffix-tree - 字符串索引和后缀树

> ID：13270703
> 
> 赞同：1
> 
> 时间：2012-11-07T13:22:41.113
> 
> 标签：suffix-tree, string-search, suffix-array

我必须从大型 PDF 文档中构建某种“字符串目录”，以便更快地搜索字符串/子字符串。

该机制应该像这样工作：PDF 扫描仪扫描 PDF 文档中的字符串，并在我的目录中调用回调方法来索引该字符串。

现在，应该使用什么技术来构建这样的目录？我听说过： - 后缀树 - 广义后缀树 - 后缀数组

我主要倾向于广义后缀树。那我是对还是错？我猜“普通”后缀树只适用于索引单个字符串。

但是后缀数组呢？那里有通用的后缀数组吗？

我在 C/C++ 中发现了很多用于从字符串构建后缀树的代码，但没有用于构建通用后缀树的代码！

# http - Spring RestTemplate - 带有请求正文的 http GET

> ID：13270708
> 
> 赞同：15
> 
> 时间：2012-11-07T13:22:57.690
> 
> 标签：http, get

> **可能重复：**
> [带有请求正文的 HTTP GET](https://stackoverflow.com/questions/978061/http-get-with-request-body)

我在这里阅读了一些不提倡通过 HTTP GET 发送内容的讨论。可以通过客户端（Web 浏览器）发送的数据大小存在限制。处理 GET 数据也依赖于服务器。请参阅下面的**资源**部分 。

但是，我被要求测试使用 RestTemplate 通过 HTTP GET 发送内容的可能性。我在春季论坛上提到了一些讨论，但没有得到答复。（请注意通过 http Post 发送数据可以正常工作）。[这里](https://stackoverflow.com/questions/11091160/rest-api-get-request-with-body)的讨论建议改用 POST。

开发环境 - JBoss AS 5.1，Spring 3.1.3

**客户**

```
 @Test
public void testGetWithBody()
{
    // acceptable media type
    List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
    acceptableMediaTypes.add(MediaType.TEXT_PLAIN);

    // header
    HttpHeaders headers = new HttpHeaders();
    headers.setAccept(acceptableMediaTypes);

    // body
    String body = "hello world";
    HttpEntity<String> entity = new HttpEntity<String>(body, headers);

    Map<String, Object> uriVariables = new HashMap<String, Object>();
    uriVariables.put("id", "testFile");

    // Send the request as GET
    ResponseEntity<String> result = restTemplate.exchange(
            "http://localhost:8080/WebApp/test/{id}/body",
            HttpMethod.GET, entity, String.class, uriVariables);

    Assert.assertNotNull(result.getBody());
} 
```

**服务器**@Controller

```
 @RequestMapping(value = "/{id}/body", method = RequestMethod.GET)
public @ResponseBody
String testGetWithBody(@PathVariable String id,
        @RequestBody String bodyContent)
{
    return id + bodyContent;
} 
```

**问题**- 执行此测试用例返回 500 Internal Server Error。在调试时，我发现控制器没有被击中。

1.  理解 RestTemplate 提供了将数据作为请求正文发送的方式是否正确，但是由于服务器无法处理请求正文而发生错误？

2.  如果通过 HTTP Get 发送的请求正文不是传统的，为什么 RestTemplate 提供 API 来允许发送它？这是否意味着很少有服务器能够通过 GET 处理请求正文？

> **资源**- 在春季论坛上使用 RestTemplate 通过 HTTP GET 发送正文的讨论

[http://forum.springsource.org/showthread.php?129510-Message-body-with-HTTP-GET&highlight=resttemplate+http+get](http://forum.springsource.org/showthread.php?129510-Message-body-with-HTTP-GET&highlight=resttemplate+http+get)

[http://forum.springsource.org/showthread.php?94201-GET-method-on-RestTemplate-exchange-with-a-Body&highlight=resttemplate+http+get](http://forum.springsource.org/showthread.php?94201-GET-method-on-RestTemplate-exchange-with-a-Body&highlight=resttemplate+http+get)

> **资源**- 关于通过 HTTP GET 发送正文的一般讨论

[获取请求体](https://stackoverflow.com/questions/978061/http-get-with-request-body)

[is-this-statement-correct-http-get-method-always-has-no-message-body](https://stackoverflow.com/questions/5216567/is-this-statement-correct-http-get-method-always-has-no-message-body)

[阅读请求正文时获取或发布](https://stackoverflow.com/questions/6031136/get-or-post-when-reading-request-body)

[http-uri-get-limit](https://stackoverflow.com/questions/266322/http-uri-get-limit)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T13:38:06.757

> 理解 RestTemplate 提供了将数据作为请求正文发送的方式是否正确，但是由于服务器无法处理请求正文而发生错误？

您可以通过查看网络流量（是否使用请求正文和 GET 方法发送请求？）和服务器日志（您收到的 500 结果必须具有记录的服务器端效果，如果没有，请配置服务器这样做）。

> 如果通过 HTTP Get 发送的请求正文不是传统的，为什么 RestTemplate 提供 API 来允许发送它？这是否意味着很少有服务器能够通过 GET 处理请求正文？

因为它是一个通用类，还允许您制作可以包含消息正文的请求。

如[带有请求正文的 HTTP GET 中](https://stackoverflow.com/questions/978061/http-get-with-request-body)所述：

> 换句话说，任何 HTTP 请求消息都允许包含消息体，因此 [服务器] 必须考虑到这一点来解析消息。但是，GET 的服务器语义受到限制，因此主体（如果有）对请求没有语义意义。解析的要求与方法语义的要求是分开的。

GET 上的主体*不能*在语义上做任何事情，因为您正在*请求*资源。就像你告诉服务器：*“给我资源 X，哦，吃些苹果！”* . 服务器不会关心你的苹果并乐意为资源 X 提供服务——或者抛出一个错误，因为它不喜欢请求中的任何提议。

> 但是，我被要求测试通过 HTTP GET 发送内容的可能性

请告诉提出此请求的人，这是一个不必测试的案例，因为没有明智的实现支持它。

# android - 在 ListView 行之间画线

> ID：13270714
> 
> 赞同：2
> 
> 时间：2012-11-07T13:23:27.493
> 
> 标签：android, listview, overriding

我有 ListView 和 ImageView 在行中。

我需要在这些 ImageViews 之间画线。

因此，一行从 ImageView 位置的第一行开始，在 ImageView 位置的第二行结束。等等。

画这些线的最佳方法是什么？

谢谢你。

更新。很抱歉，我无法上传图片，而且我的英语说得不太好。

它不是行之间的水平分隔线。如果为了简化它：行从 ImageView 位置的一行的垂直中心开始，到 ImageView 位置的下一行的垂直中心结束。

我想我应该尝试：

1.  覆盖行视图。在我创建行视图的适配器的 GetView 处，传递到相邻行的此行视图坐标。在视图的 onDraw 方法中计算坐标并画线。

2.  覆盖 ListView。在它的 OnDraw 方法中，尝试获取 ImageView 的位置并绘制所有线条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:30:10.463

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

      <ListView 
         android:id="@+id/android:list"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:divider="#FFCC00"
         android:dividerHeight="4px"/>

      </LinearLayout> 
```

有一个列表视图分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:27:33.473

我不确定我是否正确理解了您的问题，但这应该在行之间产生非常好的渐变线：

```
 mListView = getListView();
    mAdapter = new ServersListAdapter(this, new String[] {},
            new String[] {}, new String[] {});
    int[] colors = { Color.parseColor("#D3D3D3"), Color.parseColor("#D3D3D3"), Color.parseColor("#D3D3D3") };
    mListView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-06T00:06:26.667

这是一个可以在其中画线的视图示例。创建此类，如果需要，请刷新您的调色板。

```
public class LineTextView extends AppCompatTextView {

    private Paint paint = new Paint();

    public LineTextView(Context context) {
        super(context);
    }

    public LineTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public LineTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        paint.setColor(Color.parseColor("#000000"));
        paint.setStrokeWidth(2);
        paint.setStyle(Paint.Style.FILL);
        canvas.drawLine(0, 0, 0, getHeight(), paint);
    }
} 
```

现在你可以在你的`layout`

```
<LinearLayout

        android:layout_width="2dp"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <com.example.taskmodel.view.LineTextView
            android:id="@+id/lineTextViewTopHalf"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:visibility="invisible"/>

        <com.example.taskmodel.view.LineTextView
            android:id="@+id/lineTextViewBottomHalf"
            android:layout_width="2dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

    </LinearLayout> 
```

# android - 无法定义意图数据来处理链接意图

> ID：13270715
> 
> 赞同：0
> 
> 时间：2012-11-07T13:23:27.770
> 
> 标签：android, android-intent, linkify

我有一个包含以下过滤器的活动：

```
 <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />

        <action android:name="android.intent.action.VIEW" />

        <data
            android:host="com.ibs.shababeek.search"
            android:path="/posts/*"
            android:scheme="content" />
    </intent-filter> 
```

linkfiy 文本触发了这个意图：

```
act=android.intent.action.VIEW dat=content://com.ibs.shababeek.search/posts/#test 
```

但它一直告诉我：没有找到处理意图的活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:12:52.880

```
android:path="/posts/*" 
```

你可能想要`android:pathPattern`，不是`android:path`。

# android - 如何在android中的secondaryActivity上打开视频、音频和图像

> ID：13270720
> 
> 赞同：2
> 
> 时间：2012-11-07T13:23:55.683
> 
> 标签：android, listview, video, media, internal

我是Android的新学生。我能够从网站获取 xml 以在列表视图中显示文本以及缩略图。我可以使用默认应用程序显示该项目。它主要打开浏览器或媒体 plyaer，但我想在辅助活动中显示应用程序中的内容。它应该从 xml 的标签中检测媒体类型，并使用相关的模块/类将其显示在辅助活动中。我不知道如何在内部添加更多活动并打开不同的媒体类型。下面是我现在使用的代码。请指导我记住我是一个完全的新手。提前致谢。

xml 看起来像：

```
<items count="1">
  <item>
     <title>This is title no 1</title>
     <description>this is description</description>
     <type>mp3, image, video</type>
     <date>date of item</date>
     <thumb>url of an thumbnail</thumb>
     <url>url to play item from</url>
  </item>
</items> 
```

//listview点击代码：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
 String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
 String description = ((TextView) view.findViewById(R.id.desc)).getText().toString();
 String type = ((TextView) view.findViewById(R.id.type)).getText().toString();
 String cTime = ((TextView) view.findViewById(R.id.time)).getText().toString();

 Element e = (Element) nl.item(position);  //using final var to get previously declared xmls
 String imageurl = parser.getValue(e, KEY_URL);  
 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(imageurl))); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:34:59.023

首先，您需要通过 INTENT API ......它们有助于从一个活动切换到另一个活动......其次，当您尝试播放媒体文件时，Android 操作系统会检测媒体类型并选择从您的设备播放该文件的可用应用程序。它会自动从您的应用程序到媒体播放器。前提是您已经完成了对 xml 的解析。如果不存在可以显示您的文件的应用程序，或者说，如果您的设备不支持特定的媒体类型（例如 mp4、wmv、flv 等），则会向您抛出错误，媒体无法播放，因为它不受支持。

“它主要打开浏览器或媒体 plyaer，但我想在辅助活动中显示应用程序中的内容”

这是我之前提到的。如果您希望媒体从您的应用程序中播放您的文件，那么您可能应该编写自己的媒体播放器类，您可以将意图传递给该类

# iphone - UIButton 用动画添加颜色

> ID：13270721
> 
> 赞同：6
> 
> 时间：2012-11-07T13:24:06.297
> 
> 标签：iphone, uibutton, uicolor, uianimation

我想要做的是，当用户单击按钮时，按钮应该用从下到上的动画填充颜色。

我试过这个添加颜色但没有添加动画效果。

```
float originalY = btn.frame.origin.y;
float originalH = btn.bounds.size.height;

[UIView animateWithDuration:3.0f
                      delay:1.0f
                    options:UIViewAnimationOptionTransitionFlipFromBottom
                 animations:^{

    btn.frame = CGRectMake(btn.frame.origin.x, (originalY + originalH), btn.bounds.size.width, 0);
    [btn setBackgroundImage:[UIImage imageNamed:@"Screen Shot 2012-11-07 at 4.22.30 PM.png"] forState:UIControlStateNormal];
    [btn setTitleColor:[[UIColor alloc]initWithRed:38.0/255.0 green:38.0/255.0 blue:38.0/255.0 alpha:1.0] forState:UIControlStateNormal];
} completion:^(BOOL finished) {
}]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T19:58:51.563

最好的解决方案是继承 UIButton 并添加一个将背景图像的 alpha 值从 0 更改为 1 的方法。

或者你可以重写 drawRect 方法并在那里用颜色填充背景。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-12T10:46:07.743

我想你可能会做这样的事情，我使用 UIlabel 它也可能适用于 UIButton 。

```
#import <QuartzCore/QuartzCore.h> 
```

……

'theLabel.layer.backgroundColor = [UIColor whiteColor].CGColor;

[UIView animateWithDuration:2.0 动画：^{ theLabel.layer.backgroundColor = [UIColor greenColor].CGColor; } 完成：NULL];'`

# javascript - JavaScript 中列出变量的区别

> ID：13270724
> 
> 赞同：1
> 
> 时间：2012-11-07T13:24:15.317
> 
> 标签：javascript, jquery, variables

> **可能重复：**
> [在 JavaScript 中声明多个变量](https://stackoverflow.com/questions/694102/declaring-multiple-variables-in-javascript)

我想知道在 JavaScript（和 JS 库）中列出变量是否有区别。

**示例**：

```
var $this = $(this),
    $body = $("body"),
    $main-wrap = $("body > section.wrapper"); 
```

**或者**

```
var $this = $(this);
var $body = $("body");
var $main-wrap = $("body > section.wrapper"); 
```

我一直认为区别只在于符号。第一个示例更短，执行起来可能更快。最近我做了一些测试，现在我不确定了。任何人都可以清除这个吗？

执行速度、结果、方法有区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:25:48.880

那不是 jQuery，它只是简单的 JavaScript 变量声明。

就区别而言，没有一个。您可以获得的唯一速度提升是停止旋转多个 jQuery 对象并重新引用现有对象以进行进一步处理。例如

```
var body = $('body'),
    wrapper = body.children('section.wrapper'); 
```

另请参阅[JavaScript 变量定义：逗号与分号](https://stackoverflow.com/questions/3781406/javascript-variable-definition-commas-vs-semicolons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:57:50.953

[当我开始使用jsLint](http://www.jslint.com)时，我打破了使用多个`var`语句的习惯。它总是抓住这一点，并说用逗号分隔会更快。

对此进行更多研究，似乎有很多消息来源同意这一点。

**来自[jsLint #scope](http://www.jslint.com/lint.html#scope)**

> 建议每个函数使用单个 var 语句。

**从[列表分开](http://www.alistapart.com/articles/javascript-minification-part-II/)：**

> var 语句定义一个或多个变量。有时你会看到如下代码：

```
var image = document.getElementById("myImage");
var div = document.getElementById("myDiv"); 
```

> This code defines two variables, one right after the other. I often see this pattern for 10 or more variables in a row. Doing so artificially inflates the size of your code because multiple var statements can be combined into one using a comma operator:

```
var image = document.getElementById("myImage"),
div = document.getElementById("myDiv"); 
```

> This code also defines two variables and provides the same initialization. However, you’ve saved the three bytes that another var would have cost. Three bytes might not seem like a big deal, but if you’re able to find dozens of places where there’s currently an extra var statement, the savings can really add up.

**However,**

here are two fairly compelling reasons to use multiple `var` statements from [SO posters](https://stackoverflow.com/questions/694102/declaring-multiple-variables-in-javascript). [and here](https://stackoverflow.com/questions/9672635/javascript-var-statement-and-performance)

# sql - 从 EAV 审计表重新创建历史字段更改

> ID：13270727
> 
> 赞同：1
> 
> 时间：2012-11-07T13:24:29.740
> 
> 标签：sql, tsql, entity-attribute-value

编辑：- 对于任何有类似问题的人，这里有一篇很好的文章涵盖了各种解决[方案](https://www.red-gate.com/simple-talk/sql/t-sql-programming/filling-in-missing-values-using-the-t-sql-window-frame/)

给定以下表 recs 和 audit，SQL 中的一个如何转换为结果表。

一点背景知识，前一个表是标准 SQL 表的简化示例，用于 CRUD 应用程序收集数据。在对列进行任何更新时，一条记录都会以 EAV 形式写入审计表。现在需要将 recs 表转换为历史表，其中包含每行的副本，因为它在报告的时间点（数据最终将存储在星型模式数据仓库中。

看起来这在程序语言中足够简单，并且使用游标可以管理（如果丑陋），但是是否有一种基于集合的方法可以工作？

我现在正在使用 T-SQL，但我想我可以从任何足够丰富的 SQL 方言中移植任何示例或想法。

## 设置

```
create table recs
(
    ID int identity(1,1) not null primary key,
    Column1 nvarchar(30) not null,
    Column2 nvarchar(30) not null,
    sys_updated_on datetime not null
)

create table audit
(
    ID int identity(1,1) not null primary key,
    recs_id int not null,
    fieldname nvarchar(30) not null,
    old_value nvarchar(30) not null,
    new_value nvarchar(30) not null,
    sys_updated_on datetime not null
)

insert into recs (Column1, Column2, sys_updated_on)
values ('A', 'B', '2012-10-31 22:00')
    , ('C', 'D', '2012-10-31 22:30')

insert into audit (recs_id, fieldname, old_value, new_value, sys_updated_on)
values (1, 'Column1', 'Z', 'A', '2012-10-31 22:00')
    , (2, 'Column2','X', 'D', '2012-10-31 22:30')
    , (1, 'Column1', 'Y', 'Z', '2012-10-31 21:00') 
```

## 结果数据

```
记录            

ID Column1 Column2 sys_updated_on
1 AB 2012 年 10 月 31 日 22:00:00
2 光盘 2012 年 10 月 31 日 22:30:00

```

```
审计                   

ID recs_id 字段名 old_value new_value sys_updated_on
1 1 列 1 ZA 2012 年 10 月 31 日 22:00:00
2 2 列 2 XD 31/10/2012 22:30:00
3 1 Column1 YZ 31/10/2012 21:00:00

```

## 期望的结果

```

recs_id sys_updated_on Column1 Column2
1 空 YB
1 2012 年 10 月 31 日 21:00:00 中币
1 2012 年 10 月 31 日 22:00:00
2 空 CX
2 2012 年 10 月 31 日 22:30:00 光盘

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:44:21.463

有趣的....

试试这个

```
;with cte as
(   
    select recs_id, sys_updated_on, column1, column2, 
        ROW_NUMBER() over (order by sys_updated_on) rn
    from audit a
    pivot 
        (max(old_value) for fieldname in (column1,column2)) p
)
select 
    recs_id,
    case when ud1>ud2 then ud1 else ud2 end as updateddate,
    coalesce(cte.column1,mc1,recs.column1),
    coalesce(cte.column2,mc2,recs.column2)
from cte
    outer apply 
        (
        select top 1 
            column1 as mc1, sys_updated_on as ud1 
        from cte prev1 
        where prev1.recs_id=cte.recs_id and prev1.rn<cte.rn 
        order by prev1.rn desc
        ) r1
    outer apply 
        (
        select top 1 
            column2 as mc2, sys_updated_on as ud2 
        from cte prev2 
        where prev2.recs_id=cte.recs_id and prev2.rn<cte.rn 
        order by prev2.rn desc
        ) r2
    inner join recs on cte.recs_id = recs.id
where cte.sys_updated_on is not null
union
    select id, sys_updated_on, Column1, Column2 from recs
order by recs_id, cte.updateddate 
```

# javascript - 简单的 sum javascript 函数在 IE 中不起作用

> ID：13270730
> 
> 赞同：0
> 
> 时间：2012-11-07T13:24:38.397
> 
> 标签：javascript, internet-explorer, google-chrome

此代码适用于 Chrome，但不适用于 IE。为什么？？这很简单，但我没有看到我的错误。

```
<script>

function calc() {

        var summ = (parseFloat(q2.value) + parseFloat(q3.value) + parseFloat(q4.value)+ ( parseFloat(qn2.value) + parseFloat(qn3.value) + parseFloat(qn4.value) ) * 6 ) * 1.13;

        summ = parseFloat(summ).toFixed(2);

        document.getElementById('sum2').innerHTML = summ;

        alert(summ);
}

</ script> 
```

和html（删除所有文本，只输入）

```
<form method="" action="">

<input type="number" onClick="calc();" onChange="calc();" onblur="if (this.value == '') {this.value = '00.00';}" value="00.00" maxlength="14" size="4" id="q2"/>

<input type="number" onClick="calc();" onChange="calc();" onblur="if (this.value == '') {this.value = '00.00';}" value="00.00" maxlength="14" size="4" id="q3"/>

<input type="number" onClick="calc();" onChange="calc();" onblur="if (this.value == '') {this.value = '00.00';}" value="00.00" maxlength="14" size="4" id="q4"/>

<input type="number" onClick="calc();" onChange="calc();" onblur="if (this.value == '') {this.value = '0';}" value="0" maxlength="14" size="4" id="qn2"/>

<input type="number" onClick="calc();" onChange="calc();" onblur="if (this.value == '') {this.value = '0';}" value="0" maxlength="14" size="4" id="qn3"/>

<input type="number" onClick="calc();" onChange="calc();" onblur="if (this.value == '') {this.value = '0';}" value="0" maxlength="14" size="4" id="qn4"/>

<p><span id="sum2" style="color: red; font-weight: bold;">00.00</span> the result</p>   

<center><input type='button' onclick='calc()' value='Обновить'/></center>

</ html> 
```

我究竟做错了什么？我已经发现 IE 不喜欢`name="..." tag`并从代码中删除所有这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:29:17.357

查看控制台，它告诉你有错误

```
SCRIPT5009: 'q2' is undefined show, line 22 character 9 
```

不要直接通过 id 引用元素，您需要使用 document.getElementById()

你需要做的是

```
parseFloat(document.getElementById("q2").value) 
```

# objective-c - QLPreviewController.currentPreviewItemIndex 的键值观察

> ID：13270731
> 
> 赞同：5
> 
> 时间：2012-11-07T13:24:43.607
> 
> 标签：objective-c, io, uikit, key-value-observing

当 QLPreviewController 更改显示的文档时，我有一个需要通知的对象。QLPreviewController 具有 currentPreviewItemIndex 属性，该属性会在文档更改时更新。我已将我的对象添加为 currentPreviewItemIndex 的观察者，并且当我的代码中更改属性时它会收到通知，到目前为止一切都很好。问题是用户可以更改在屏幕上滑动显示的文档，我发现在这种情况下不会生成通知。

在这种情况下也有任何接收通知的解决方案？我想当调用属性 currentPreviewItemIndex 的设置器时生成通知，并且可能在用户滑动对象 QLPreviewController 内部更改属性时生成通知。

另一种解决方案可能是禁用 QLPreviewController 中的水平滑动，但保留垂直滑动（有箭头按钮可以更改显示的文档）。你是怎样做的？

在此先感谢您的帮助。

詹南德里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:01:17.547

在 QLPreviewController 上创建一个类别并调整适当的方法，然后为 KVO 添加 willChange/didChange ;)

不过说真的：我尝试了 KVO，但它对我也不起作用.. 1) 向苹果提交了一个错误，说明你需要这个

但作为一种解决方法

*   (id)previewPanel:(QLPreviewPanel *)panel previewItemAtIndex:(NSInteger)index {

这被称为好的，每次我们滑动时我都会“破解”它来触发你自己正确的 KVO。就像是

```
 static NSInteger oldIndex = -1; //reset when the panel is hidden or shown
     int newIndex = qlController.displayedIndex;
     if(oldIndex != newIndex) {
         oldIndex = newIndex;
         [qlController willChangeValueForKey:@"displayedIndex"];
         [qlController didChangeValueForKey:@"displayedIndex"];
     } 
```

我在这里内联写了它，所以肯定会有错别字和错误，但我认为一般方法可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-25T11:21:56.077

//1\. 声明一个静态上下文：

```
static void *changePageContext = &changePageContext; 
```

//2。在 viewDidLoad 中，将 self 作为观察者添加到 QLPreviewController 的强引用的 currentPreviewItemIndex 属性：

```
[self.previewController addObserver:self forKeyPath:@"currentPreviewItemIndex" options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld) context:changePageContext]; 
```

//3\. 实现观察者方法：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
    change:(NSDictionary *)change context:(void *)context
{
    if (context == changePageContext)
    {
        NSLog(@"newValue:%ld",(long)self.previewController.currentPreviewItemIndex);
    }
    else
    {
        // Any unrecognized context must belong to super
        [super observeValueForKeyPath:keyPath
                             ofObject:object
                               change:change
                              context:context];
    }
} 
```

//4\. 移除 viewWillDisappear 中的观察者：

```
-(void)viewWillDisappear:(BOOL)animated
{
    if (![[self.navigationController viewControllers] containsObject: self])
    {
        [self.previewController removeObserver:self forKeyPath:@"currentPreviewItemIndex"];
    }
} 
```

# objective-c - UITableVIew 不能与 UINavigationController 一起使用

> ID：13270732
> 
> 赞同：0
> 
> 时间：2012-11-07T13:24:51.360
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller

当我实现navigationController时，我遇到了一个非常奇怪的行为。我有一个带有 UITableView 的 LogInViewController，其中的单元格填充如下：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0) {
        return cellUsername;
    }
    if (indexPath.row == 1){
        return cellPassword;
    }
    else{
        return nil;
    }
} 
```

cellUsername 和 cellPassword 是我在 .xib 上创建的单元格。当我将此 LogInViewController 作为 rootViewController 添加到我的 appDelegate 中时，它工作正常！我想实现一个navigationController，所以我用navController @property创建了RootViewController，在我的appDelagate中我这样称呼它

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

RootViewController *rootView = [[RootViewController alloc]init];
rootView.navController = [[UINavigationController alloc] initWithRootViewController:rootView];

self.window.rootViewController = rootView.navController;
[self.window makeKeyAndVisible];
return YES; 
```

在 viewDidLoad 上的 RootViewController 中，我有以下代码：

```
[super viewDidLoad];
self.navController = [[UINavigationController alloc]init];
LogInViewController *loginView = [[LogInViewController alloc]init];
[[self navigationController] pushViewController:loginView animated:YES]; 
```

It opens my LogInViewController,but only the first cell,cellUsername is added to my UiTableView, what is wrong? Am still a beginner,so I might be missing something stupid probably.. but it works wihout navigationController,so am pretty confused.. Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:31:47.537

in AppDelegate file

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

RootViewController *rootView = [[RootViewController alloc]init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:rootView];

self.window.rootViewController =  navController;
[self.window makeKeyAndVisible];
return YES; 
```

Further there is no need to create another navigationController in the viewDidLoad of the RootViewController class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:30:23.423

I'm not sure if this has anything to do with your problem, but you shouldn't be using this line in your viewDidLoad:

```
self.navController = [[UINavigationController alloc]init]; 
```

Your RootViewController is already embedded in a navigation controller, so you can just use self.navigationController to get a reference to it.

I'm also not sure about this code, it may be ok, but it's not the way it's usually done:

```
RootViewController *rootView = [[RootViewController alloc]init];
rootView.navController = [[UINavigationController alloc] initWithRootViewController:rootView];
self.window.rootViewController = rootView.navController; 
```

The usual way to do it is like this:

```
RootViewController *rootView = [[RootViewController alloc]init];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:rootView];
self.window.rootViewController = nav; 
```

# sql - SQL - 不同的不区分大小写的排序规则查询 - 检索小写行而不是第一个

> ID：13270733
> 
> 赞同：0
> 
> 时间：2012-11-07T13:24:52.967
> 
> 标签：sql, distinct, collation

使用具有不区分大小写排序规则的独特查询`SQL_Latin1_General_CP1_CI_AS`将检索任何不区分大小写的行的第一次出现。

但如果两种情况都存在，我想检索小写字母。

*如果数据中只有一个案例，我想检索该案例。（唯一出现的大写字母应保留在结果集中的大写字母中）*

**桌子：**

```
id | col1  
----------
1 | Ab  
2 | ab  
3 | cd  
4 | Cd  
5 | Ef 
```

询问：

```
SELECT DISTINCT [col1] COLLATE SQL_Latin1_General_CP1_CI_AS 
FROM dbo.table 
```

将检索：`Ab, cd, Ef`

**但我想检索：** `ab, cd, Ef`

**有没有可以给我想要的结果的排序规则？**

优先考虑小写而不是第一种情况。

如果不是，我必须使用子选择。

1.  使用区分大小写的排序规则选择所有不同的值（奇怪的是自动排序，几乎是我想要的用例！）
2.  使用不区分大小写的排序规则从 1 中选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:33:03.563

这样的事情应该这样做：

```
WITH cte As
(
   SELECT
      ID,
      Col1,
      ROW_NUMBER() OVER
      (
         PARTITION BY
            Col1 COLLATE SQL_Latin1_General_CP1_CI_AS
         ORDER BY
             Col1 COLLATE SQL_Latin1_General_CP1_CS_AS DESC,
             ID
      ) As RowNumber
   FROM
      dbo.Table
)
SELECT
   ID,
   Col1
FROM
   cte
WHERE
   RowNumber = 1
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:48:37.727

可能是这样的

```
select
    min(T.col1 collate SQL_Latin1_General_CP1_CS_AS)
from dbo.Table as T
group by T.col1 collate SQL_Latin1_General_CP1_CI_AS 
```

# c++ - 常量 QList 警告 = QList () << 0; gcc 4.7.2 的段错误

> ID：13270738
> 
> 赞同：4
> 
> 时间：2012-11-07T13:25:17.960
> 
> 标签：c++, qt, gcc4.7

所以主题行中提到的代码会导致 Qt 4.8.3 和 gcc 4.7.2 出现分段错误

这位于 .cpp 文件的任何类/结构之外，适用于 gcc 4.4

```
const QList<int> warnings = QList<int>() << 0 << 3 << 7; 
```

Traces 给出了这两个提示：

```
__do_global_ctors()
__static_initialization_and_destruction_0 
```

因此，在将后一个列表插入其中时，似乎“警告”尚不可用。

如果我将其更改为以下内容，则适用于 4.7.2：

```
global scope: QList< int> warnings; 
```

这是一些功能：

```
warnings = QList<int>() << 0 << 3; 
```

我想知道为什么会这样？

**编辑：**

我想我最初从我的问题中剪掉了太多东西，但是警告应该是文件范围（.cpp-file）中的 const 用于保存一堆枚举。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T14:42:06.120

我的精神调试能力告诉我，有问题的行存在于全局/文件范围内，而不是在类/函数范围内。因此，您的线路可以在静态初始化期间的任何时候被调用。使用您的旧 gcc，恰好在调用您的行*之前初始化了 QT。*使用新的 gcc，它重新排序（完全合法）静态 init 以首先调用您的函数，然后 QT 准备好创建对象并将其插入其中。

解决方案是推迟创建它，`QList`直到`main`开始之后。使用指针或静态本地对象是两种常见的实现。

# android - 如何通过.net webservice将音频文件从android上传到服务器？

> ID：13270746
> 
> 赞同：1
> 
> 时间：2012-11-07T13:25:47.510
> 
> 标签：android, asp.net-mvc, asp.net-mvc-3

我们有一个用 MVC3 制作的 Web 应用程序，它也托管在 Android 和 Iphone 中。现在，android 开发人员正试图通过我们在控制器中作为 http post 方法编写的方法上传音频文件。他们说他们正在以多部分块或字节缓冲区主体的形式发送文件。所以我在我的方法中采用了 byte array[] 类型的变量，但类型与它们的 datatype 不一致。我什至尝试保留字符串、字节、httppostedfilebase 类型，但仍然没有成功。任何帮助，将不胜感激 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:42:39.893

查看[VoiceModel](http://voicemodel.codeplex.com/)开源项目，了解如何使用 ASP.NET MVC 保存音频的示例。那里有一个名为[RecordingExample](http://voicemodel.codeplex.com/SourceControl/changeset/view/20136)的示例项目，它获取从 VoiceXML 浏览器或交互式语音响应 (IVR) 系统发送的音频文件并将其保存到文件系统。这是接收音频文件并将其保存到磁盘的代码。

```
[HttpPost]
 public ActionResult SaveRecording(HttpPostedFileBase CallersMessage)
 {
     if (CallersMessage != null && CallersMessage.ContentLength > 0)
     {
         // extract only the fielname
         var fileName = Path.GetFileName(CallersMessage.FileName);
         // store the file inside ~/App_Data/uploads folder
         var path = Path.Combine(Server.MapPath(recordingPath), fileName);
         _log.Debug("Received recording and will save as " + path);
         CallersMessage.SaveAs(path);
     }

     string vm_id = Request.QueryString["vm_id"];
     string vm_event = Request.QueryString["vm_event"];
     string vm_result = "";
     return VoiceView(vm_id, vm_event, vm_result);
 } 
```

# jsp - 什么情况下不发送jsessionid？

> ID：13270749
> 
> 赞同：1
> 
> 时间：2012-11-07T13:26:03.893
> 
> 标签：jsp, jsessionid

我刚刚修复了 Web 应用程序中的一个错误，该错误导致发送到服务器的一些数据被忽略。我怀疑这与不匹配的会话有关，所以我记录了一些请求，很快我就得到了答案：某些请求没有发送带有 jsessionid 的 cookie，而且我注意到这只发生在发送相同请求时。

所以我在我的表单的序列化中添加了一个无用的count属性，现在每次都发送cookie。

有人知道这种行为的原因或这种机制的规范吗？

这些请求是使用 jQuery 的 Ajax 函数发出的。

# javascript - 在光标位置将文本插入文本区域时出现 IE 问题

> ID：13270750
> 
> 赞同：3
> 
> 时间：2012-11-07T13:26:08.190
> 
> 标签：javascript, jquery, internet-explorer, textarea

我有一个场景，我需要将光标放在文本区域上，然后单击同一页面上的树视图节点，以便在单击树节点之前将节点的文本选择到我放置光标的文本区域中。

我得到了很多关于堆栈溢出的答案，包括以下内容，

[如果光标放置，则在光标位置的文本区域中插入文本，否则文本应最后附加在 IE 中](https://stackoverflow.com/questions/11360003/inserting-text-in-textarea-at-cursor-position-if-cursor-placed-else-text-should)

[在文本区域中的光标位置之后插入文本](https://stackoverflow.com/questions/5203428/inserting-text-after-cursor-position-in-text-are)

[使用 jQuery 将文本插入 textarea](https://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery)

[如何在文本区域的当前插入符号位置插入文本](https://stackoverflow.com/questions/4456545/how-to-insert-text-at-the-current-caret-position-in-a-textarea)

[使用Javascript在文本区域中的光标处插入文本](https://stackoverflow.com/questions/3308292/inserting-text-at-cursor-in-a-textarea-with-javascript)

[如何在光标所在的位置插入一些文本？](https://stackoverflow.com/questions/7404366/how-do-i-insert-some-text-where-the-cursor-is)

FF 和 Chrome 在上述解决方案中运行良好，但 IE 8 或更低版本会在焦点移到其他控件时失败（未使用 IE9 检查）。

几乎所有帖子中都有以下或类似的 IE 实现：

```
(function ($) {
    $.fn.getCursorPosition = function () {
        var el = $(this).get(0);
        var pos = 0;
        if ('selectionStart' in el) {
            pos = el.selectionStart;
        } else if ('selection' in document) {
            el.focus();
            var Sel = document.selection.createRange();
            var SelLength = document.selection.createRange().text.length;
            Sel.moveStart('character', -el.value.length);
            pos = Sel.text.length - SelLength
        }
        return pos;
    }
})(jQuery); 
```

注意：我们也可以使用`if(el.selectionStart || el.selectionStart == '0')` 代替`if ('selectionStart' in el)` 和 `if(document.selection)`代替`if ('selection' in document)`

但是，当焦点首先移动到其他控件然后执行它时，这将失败。在我的情况下，当用户遍历节点时，焦点将移至树节点。

这种情况有什么解决方案吗？

我正在考虑在文本区域上编写 onkeyup 和 onclick 并将其光标位置保存到隐藏字段中，因此当焦点移动到其他控件时，我将有隐藏字段来获取文本区域的光标位置。我稍后会在这里发布，同时如果有人有什么好主意，请分享。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:39:41.693

正如我上面提到的，我有下面的代码使它在 IE 中也能工作，（也考虑过只有 onblur 而不是这两个事件，但是当执行进入我的代码以设置隐藏变量时它没有工作，因为焦点已经丢失）

下面的实现它在我的情况下工作正常。

> ```
> if ($("#myTextArea").get(0).selectionStart == undefined) {
>     $("#myTextArea").click(function (e) {
>         $("#hdnTextAreaPosition").val($("#myTextArea").getCursorPosition());
>     });
>     $("#myTextArea").keyup(function (e) {
>         $("#hdnTextAreaPosition").val($("#myTextArea").getCursorPosition());
>     });
> } 
> ```

以上事件（keyup 和 click）在全局脚本中，只有在未定义 selectStart 的情况下才会附加

> ```
> function getTextAreaCursorPosition() {
>     if ($("#myTextArea").get(0).selectionStart == undefined) {
>         return $("#hdnTextAreaPosition").val();
>     }
>     else {
>         return $("#myTextArea").getCursorPosition();
>     }
> }
> 
> function insertToMyTextArea(textToInsert) {
>     $("#myTextArea").focus();
>     var cursorPosition = getTextAreaCursorPosition();
>     var myContent = $("#myTextArea").val();
>     $("#myTextArea").val(myContent.substring(0, cursorPosition) + textToInsert + myContent.substring(cursorPosition));
> } 
> ```

insertToMyTextArea 是我在单击树节点时调用的主要函数。

如果有任何替代解决方案可用而不是举办活动，请分享您的观点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:50:32.787

我建议使用[我的 jQuery 插件](http://code.google.com/p/rangyinputs/)与一些额外的东西结合使用，以在失去焦点之前保存 textarea 的选择或光标位置。

我在之前的回答中已经介绍了这个确切的情况：

[https://stackoverflow.com/a/5890708/96100](https://stackoverflow.com/a/5890708/96100)

# c# - 从串口接收数据时出错

> ID：13270754
> 
> 赞同：0
> 
> 时间：2012-11-07T13:26:27.457
> 
> 标签：c#, wpf, serial-port

我有几个窗口的应用程序（实际上它的两个几乎相同的窗口具有某些功能）。该功能之一是从 COM 端口读取数据（从称重机读取重量）。问题是，它在第​​一个窗口上运行完美，但是当我关闭它并打开另一个窗口，然后单击相同的功能（让我们称之为计算重量）时，我收到此错误消息：访问端口“COM1”被拒绝。

代码：

```
 private void calculateWeight_Click(object sender, RoutedEventArgs e)
{
    sp = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
    tekst = string.Empty;
    sp.Open();
    sp.WriteLine(((char)5).ToString());
    sp.WriteLine(((char)17).ToString());
    sp.DataReceived += new SerialDataReceivedEventHandler(sp_DataReceived);
}
private delegate void UpdateUi(string s);
void sp_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    tekst += sp.ReadExisting();
    if (tekst.Contains('S') && tekst.Length > 14)
        Dispatcher.Invoke(DispatcherPriority.Send, new UpdateUi(czytajWage), tekst);
}
string tekst = string.Empty;

void czytajWage(string s)
{
    string w = "";
    for (int i = 5; i < 14; i++)
    {
        w += s[i];
    }
    MessageBox.Show(w);
    w = "";
    tekst = "";

    sp.DataReceived -= sp_DataReceived;
} 
```

任何人都可以帮忙吗？;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:38:57.170

方法`calculateWeight_Click`打开串口。因此，我假设您在`Open`调用时会遇到异常，因为在以下情况下可能会抛出[文档](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.open.aspx)状态：`UnauthorizedAccessException`

> 当前进程或系统上的另一个进程已经通过 SerialPort 实例或在非托管代码中打开了指定的 COM 端口。

因此，如果您想重用现有实例，您的解决方案是`Close`在您`Dispose` `sp`完成或使用之后。`IsOpen`

# java - 如何将两个属性文件添加到 JSF

> ID：13270759
> 
> 赞同：2
> 
> 时间：2012-11-07T13:26:37.457
> 
> 标签：java, jsf, properties

我有两个属性文件，但是出了点问题，inputStream 总是为空？

```
<application>
    <resource-bundle>
        <base-name>resources/Bundle</base-name>
        <var>bundle</var>
    </resource-bundle>
    <locale-config>
        <default-locale>fi</default-locale>
        <supported-locale>fi</supported-locale>

    </locale-config>

    <resource-bundle>
        <base-name>resources/avainsanat</base-name>
        <var>avainsanat</var>
    </resource-bundle>
</application>

 public static List getAvainsanat() throws IOException {
    InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("avainsanat.properties");

    Properties properties = new Properties();
    List<String> values = new ArrayList<>();
    System.out.println("InputStream is: " + input);

    for (String key : properties.stringPropertyNames()) {
        String value = properties.getProperty(key);
        values.add(value);

    }
    return values;
} 
```

是否有可能在 faces-config 中有两个或多个属性文件？如果没有，我如何才能从我的包中只读取那些键具有前缀 key_ 的属性？

谢谢萨米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:34:23.750

您忘记将`resources`包包含在路径中。上下文类加载器总是相对于类路径根进行搜索。

```
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("resources/avainsanat.properties"); 
```

更正确的方法是在这种特殊情况下使用[`ResourceBundle#getBundle()`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale%29)，这也正是 JSF 在幕后使用的`<resource-bundle>`：

```
ResourceBundle bundle = ResourceBundle.getBundle("resources.avainsanat", FacesContext.getCurrentInstance().getViewRoot().getLocale());
// ... 
```

*（请注意，您实际上应该使用 a `<base-name>resources.avainsanat</base-name>`）*

或者，如果 bean 是请求范围的，您也可以只`#{avainsanat}`作为托管属性注入：

```
@ManagedProperty("#{avainsanat}")
private ResourceBundle bundle; 
```

或者以编程方式评估它：

```
FacesContext context = FacesContext.getCurrentInstance();
ResourceBundle bundle = context.getApplication().evaluateExpressionGet(context, "#{avainsanat}", ResourceBundle.class);
// ... 
```

# javascript - Google Analytics JS-Function 原来是空的？

> ID：13270767
> 
> 赞同：0
> 
> 时间：2012-11-07T13:27:07.550
> 
> 标签：javascript, google-analytics, implementation

我正在尝试实施 Google-Analytics，但结果很奇怪：

在加载页面时，这个脚本部分：

```
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

被这个取代：

```
(function() )(); 
```

自然导致语法错误。

我试图从页面中删除 Jquery（当我在某处读到这会导致问题）但它没有帮助......

有任何想法吗？

# c# - 为什么不在正确的位置寻找视图

> ID：13270775
> 
> 赞同：1
> 
> 时间：2012-11-07T13:27:42.120
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我是 MVC 新手，所以这听起来很简单。我`LoginForm`在 Views 中调用的文件夹中有我的 2 个视图（EnterLogin.aspx，ShowLogin.aspx）。这是我的 Global.asax.cs 下面

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "LoginForm", action = "ShowLogin", id = UrlParameter.Optional } // Parameter defaults
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterRoutes(RouteTable.Routes);
    }
} 
```

这是我的 ShowLogin.aspx 设计代码

```
<form method="post" action="EnterLogin" runat="server">
    Hello, i'm login page
    Enter Name   <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
    <input type="submit" value="PressMe" />
</form> 
```

这是我的控制器

```
public class LoginFormController : Controller
{
    public ActionResult ShowLogin()
    {
        return View();
    }

    public ActionResult EnterLogin()
    {
        return View("EnterLogin");
    }
} 
```

在运行应用程序时，它首先加载 url

```
http://localhost:50224/ 
```

并显示 ShowLogin.aspx 视图

单击按钮时，我正在调用`EnterLogin`控制器以显示`EnterLogin`视图，但它在 URL 中查找

```
http://localhost:50224/EnterLogin 
```

代替

```
http://localhost:50224/LoginForm/EnterLogin 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:37:01.407

你没有登陆你想要的地方的原因是`action`你的表格的一部分：

```
action="EnterLogin" 
```

这应该遵循正确的路线以确保它击中`LoginFormController`. 例如

```
action="/LoginForm/EnterLogin" 
```

请记住，传入请求需要匹配`RegisterRoutes`. 因为您没有任何直接匹配的`EnterLogin`内容，所以它会尝试使用then default to`EnterLogin`填写作为操作（导致请求失败）。基本上：`{controller}``ShowLogin`

```
EnterLogin  ==resolves==>  EnterLogin  /ShowLogin/
                           {controller}/{action} /{id} 
```

或者，如果您想简写它，您可以创建一个将重定向到正确位置的命名路由：

```
action="LogMeIn" 
```

进而：

```
routes.MapRoute(
    "Login",
    "LogMeIn",
    new { controller = "LoginForm", action = "EnterLogin" }
); 
```

现在请求`/LogMeIn`将执行`LoginForm`的`EnterLogin()`动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:35:10.177

Global.asax 中定义的默认路由定义了具有 /controller/action 的路由。

您的控制器称为 LoginForm，您的操作称为 EnterLogin，因此这是预期的行为。

如果您想从 URL 中排除 LoginForm，您需要定义一个自定义路由以允许这样做。

```
 routes.MapRoute(
        "LoginForm_EnterLogin", // Route name
        "LoginForm/EnterLogin/{id}", // URL with parameters
        new { controller = "LoginForm", action = "ShowLogin", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:24:12.933

你可以做这样的事情

Global.asax.cs :-

```
 routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "LoginForm", action = "ShowLogin", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

ShowLogin.aspx :-

```
 <form method="post" action="EnterLogin" runat="server">
     Hello, i'm login page
    Enter Name   <input type="text" name="txtName"/>
     <input type="submit" value="PressMe" /> </form> 
```

登录表单控制器：-

```
public class LoginFormController : Controller
{
    public ActionResult ShowLogin()
    {
        return View();
    }

    [HttpPost]
    public ActionResult EnterLogin(FormCollection collection)
    {
        string Yourtxtname=Collection["txtName"]; //You will get input text value

        return View();
    }
} 
```

# java - Liferay + JSON + AJAX

> ID：13270776
> 
> 赞同：0
> 
> 时间：2012-11-07T13:27:45.427
> 
> 标签：java, json, liferay

我有一个代码

```
@RenderMapping
    public ModelAndView model(RenderRequest renderRequest, ModelMap map) {

        map.put("form", form);

        ModelAndView view = new ModelAndView("view", map);

        PortletSession portletSession = renderRequest.getPortletSession(true);
        if(portletSession != null) {  
        MappingJacksonJsonView v = new MappingJacksonJsonView();
        view.setView(v);
        view.addObject("dataListCustomer", portletSession.getAttribute("listCustomer"));
        }

        init(renderRequest, view);
        return view;
    } 
```

我有一个错误：

```
java.lang.IllegalArgumentException: application/json is not a supported mime type
    at com.liferay.portlet.MimeResponseImpl.setContentType(MimeResponseImpl.java:159) 
```

错误是由`view.setView(v);`

如何将 listCustomer 添加到 JSON？在 listCustomer 我有一个 ModelMap

* * *

我有代码：

```
 @ResourceMapping(value="customer")
        public ModelAndView customer(
                ResourceRequest req,
                ResourceResponse res) {

    log.debug("List Customer Resource: " + context.getCustomer());

            ModelAndView mav = new ModelAndView();
            MappingJacksonJsonView v = new MappingJacksonJsonView();
            v.setBeanName("ajaxResult");

            mav.setView(v);
            mav.addObject("customer", context.getCustomer());

            return mav;

} 
```

客户在@Act​​ionMapping 函数中设置，没问题。

在 JSP 中，我有：

```
<portlet:resourceURL escapeXml="false" id="customer" var="customer"/> 
```

如何调用@ResourceMapping 函数？因为我 `log.debug("List Customer Resource: " + context.getCustomer());`在日志中看不到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:56:19.480

对于 ajax（带有门户），您不能使用 RenderMapping（或 ActionMapping），您必须使用 ResourceMapping（如果需要，还使用 ​​ResourceRequest 和 ResourceResponse 作为方法参数）。

例如，不使用 spring 但更改是微不足道的，[请参阅这个 SO answer](https://stackoverflow.com/questions/9272930/how-to-submit-form-using-ajax-request-in-liferay/9376240#9376240)。

# android - 从自定义适配器 Android 打开选项菜单

> ID：13270780
> 
> 赞同：0
> 
> 时间：2012-11-07T13:28:03.603
> 
> 标签：android

我有一个填充列表视图的自定义适配器。

每行都有一个复选框，该复选框在 getView() 方法中设置了 OnCheckedChangeListener。

在这方面一切正常，但是我想在我的活动中打开选项菜单，该菜单从适配器中的事件侦听器“托管”我的列表视图。

我尝试传入我的 Activity 实例无济于事，并且我无法从 Adapter 类中访问我的 Activity 中使用 openOptionsMenu() 的静态方法，因为 openOptionsMenu() 是非静态的。

有任何想法吗？

我像这样分配我的适配器，

`mAdapter = new CustomFileAdapter<String>(this, filenames, this);`（上下文、数组、活动）

和适配器中的构造函数一样，

`public CustomFileAdapter(Context context, String[] images, Activity a)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:30:22.770

适配器在您的 Activity 类中吗？它可以通过简单的方式访问父级

`Activityname.this`

否则，请发布您尝试通过活动的方式，我们可以看到您哪里出错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:50:36.700

通过在 Adapter 类中创建一个回调来通知我的主要活动来解决这个问题。

# hibernate - 我在这个 postgreSQL 配置中做什么（Tapestry）

> ID：13270783
> 
> 赞同：0
> 
> 时间：2012-11-07T13:28:24.677
> 
> 标签：hibernate, tapestry

**休眠.cfg.xml**

```
 <session-factory>
                <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
                <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/thetable</property>
                <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
                <property name="hibernate.connection.username">postgres</property>
                <property name="hibernate.connection.password">postgres123</property>
                <property name="hibernate.show_sql">true</property>
                <property name="hibernate.format_sql">true</property>
</session-factory> 
```

**pom.xml**

```
<dependency>
            <groupId>org.apache.tapestry</groupId>
            <artifactId>tapestry-hibernate</artifactId>
            <version>${tapestry-release-version}</version>
</dependency>
<dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901.jdbc4</version>
</dependency> 
```

**错误**

```
HTTP ERROR 500

Problem accessing /blah/balahhh. Reason:

    Exception constructing service 'ValueEncoderSource': Error invoking service contribution method org.apache.tapestry5.hibernate.HibernateModule.contributeValueEncoderSource(MappedConfiguration, boolean, HibernateSessionSource, Session, TypeCoercer, PropertyAccess, LoggerSource): Exception constructing service 'HibernateSessionSource': Error invoking constructor public org.apache.tapestry5.internal.hibernate.HibernateSessionSourceImpl(org.slf4j.Logger,java.util.List): Could not initialize class org.hibernate.annotations.common.reflection.java.JavaReflectionManager 
```

它在我使用“hsqldb”之前工作过。但现在我得到了显示的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:28:34.720

第一印象是您缺少类路径中的驱动程序类。这可能是由许多因素引起的，包括 Maven、您的部署等。

在您的 AppModule 中，在您的`bind`方法中（如果没有则创建）尝试以下操作：

```
public static void bind(ServiceBinder binder)
{
    try
    {
        Class.forName("org.postgresql.Driver");
        System.out.println("driver found in classpath");
    }
    catch(Throwable e)
    {
        System.out.println("driver not found in classpath");
        e.printStackTrace();
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:30:29.407

这个项目的问题是我定义了 pom.xml 来下载不同的依赖库。但是 log4j 已经从两个不同的存储库（tapestry 和 tika）下载了两次。版本不同。所以我所做的是检查 maven 树并为它下载旧 slf4j 的地方添加了排除项。

```
 <dependency>
            <groupId>org.apache.tika</groupId>
            <artifactId>tika-parsers</artifactId>
            <version>1.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
            </exclusions>          
        </dependency>
        <dependency> 
```

# iphone - iPhone 中的 cookie 和会话

> ID：13270787
> 
> 赞同：0
> 
> 时间：2012-11-07T13:29:03.473
> 
> 标签：iphone, ios, session, cookies

我想在 iPhone 应用程序的网络浏览器中设置会话并存储诸如 cookie 之类的值。可能吗？如何在 iPhone 中实现这一点？任何人都可以提出一个好的解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:33:51.053

只需像这样设置cookie

```
 NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
 NSHTTPCookie* testCookie = [NSHTTPCookie cookieWithProperties:
[NSDictionary dictionaryWithObjectsAndKeys:
  @"1", NSHTTPCookieValue,
  @"test_cookie", NSHTTPCookieName,
  @".facebook.com", NSHTTPCookieDomain,
  @"/", NSHTTPCookiePath,
  nil]];
  [cookies setCookie:testCookie]; 
```

并得到像这样的饼干

```
 NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (NSHTTPCookie* cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
        //here you can get you specific cookies
    } 
```

# android - 如何在android中运行媒体扫描仪

> ID：13270789
> 
> 赞同：16
> 
> 时间：2012-11-07T13:29:06.580
> 
> 标签：android, android-camera, android-gridview, android-mediascanner

我想在捕获图像时运行媒体扫描仪。捕获后，图像在网格视图中更新。为此，我需要运行媒体扫描仪。我找到了两种运行**媒体扫描仪**的解决方案，一种是**广播** 事件，另一种是**运行媒体**扫描仪类。我认为在 Ice Cream Sandwich (4.0) 中引入了媒体扫描器类。在版本之前需要设置广播事件以运行媒体扫描器。

谁能指导我如何以正确的方式运行媒体扫描仪。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-07T13:39:52.410

如果您知道文件名，我发现最好（更快/最低开销）在特定文件上运行媒体扫描程序（而不是运行它来扫描所有文件以查找媒体）。这是我使用的方法：

```
/**
 * Sends a broadcast to have the media scanner scan a file
 * 
 * @param path
 *            the file to scan
 */
private void scanMedia(String path) {
    File file = new File(path);
    Uri uri = Uri.fromFile(file);
    Intent scanFileIntent = new Intent(
            Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, uri);
    sendBroadcast(scanFileIntent);
} 
```

当需要在多个文件上运行时（例如初始化具有多个图像的应用程序时），我在初始化时保留新图像文件名的集合，然后为每个新图像文件运行上述方法。在下面的代码中，`addToScanList`将要扫描的文件添加到`ArrayList<T>`，并`scanMediaFiles`用于启动对数组中每个文件的扫描。

```
private ArrayList<String> mFilesToScan;

/**
 * Adds to the list of paths to scan when a media scan is started.
 * 
 * @see {@link #scanMediaFiles()}
 * @param path
 */
private void addToScanList(String path) {
    if (mFilesToScan == null)
        mFilesToScan = new ArrayList<String>();
    mFilesToScan.add(path);
}

/**
 * Initiates a media scan of each of the files added to the scan list.
 * 
 * @see {@see #addToScanList(String)}
 */
private void scanMediaFiles() {
    if ((mFilesToScan != null) && (!mFilesToScan.isEmpty())) {
        for (String path : mFilesToScan) {
            scanMedia(path);
        }
        mFilesToScan.clear();
    } else {
        Log.e(TAG, "Media scan requested when nothing to scan");
    }
} 
```

# ios - 将 iOS 个人版切换到企业版

> ID：13270792
> 
> 赞同：2
> 
> 时间：2012-11-07T13:29:28.573
> 
> 标签：ios, enterprise-distribution

我以 99 美元的价格获得了标准的 iOS 个人开发者许可证。现在我需要 iOS Enterprise 许可证，需要 299 美元。我可以将现有许可证用于企业分发本身（只需支付 199 美元）还是需要获得新许可证？

请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:37:43.747

您需要一个新的许可证，并记住您必须是具有 DUNS 编号的公司或组织才能申请。

更多信息可以在这里找到：[https ://developer.apple.com/support/ios/enterprise.html](https://developer.apple.com/support/ios/enterprise.html)

这条信息基本上说您需要一个单独的 Apple ID 才能加入每个程序，因此您不能“升级”

> 我可以使用与我的 iOS 企业帐户关联的 Apple ID 加入其他计划吗？
> 
> 不能。与 iOS 企业计划关联的 Apple ID 不能用于标准 iOS 或 Mac 开发者计划。

# universal-image-loader - 使用通用图像加载器下载图像并在自定义列表视图中显示它们的问题？

> ID：13270797
> 
> 赞同：1
> 
> 时间：2012-11-07T13:29:48.307
> 
> 标签：universal-image-loader

我是 android 编程的新手，我现在面临任务中的问题。我已经制作了我的自定义 listView，它显示了从 JSON 对象解析的数据。现在，我还必须展示要从互联网上下载的图像。为此，我正在尝试使用来自 github 的通用图像加载器，但是在我的适配器类中我会这样做

```
imageLoader.init(ImageLoaderConfiguration.createDefault(context)); 
```

我在初始化时收到错误说

> 令牌“init”的语法错误，此令牌后应有标识符

我究竟做错了什么？

# android - 如何从 .java 文件在 TableLayout 中插入数据？

> ID：13270805
> 
> 赞同：0
> 
> 时间：2012-11-07T13:30:36.953
> 
> 标签：android, android-tablelayout

我`TableLayout`在我的 android 应用程序中有一个。我是新手，`TableLayout's`所以我不知道如何在我的 .java 文件的所有行中插入数据。
这是我的 xml 文件，其中包含`TableLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
            <TableRow android:id="@+id/tabla_cabecera" android:layout_width="match_parent" android:layout_height="match_parent"></TableRow>
            <TableLayout android:id="@+id/tabla_cuerpo" android:layout_height="match_parent" android:layout_width="match_parent">
                <TableRow android:id="@+id/tableRow1" android:layout_width="match_parent" android:layout_height="wrap_content">

                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>

                </TableRow>
                <TableRow android:id="@+id/tableRow2" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView></TableRow>

                <TableRow android:id="@+id/tableRow3" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                    <TextView  android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>

                </TableRow>
                <TableRow android:id="@+id/tableRow4" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView  android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>

                </TableRow>
            </TableLayout>

</LinearLayout> 
```

我知道如何膨胀布局以及如何简单地插入数据`TextView`：

```
View v = inflater.inflate(R.layout.subject_report_layout, container,false);
TextView tv = (TextView ) v.findViewById(R.id.tv);
TableRow tr = (TableRow) v.findViewById(R.id.tableRow2);
tv.setText("Text"); 
```

如何对表格的所有行和列执行相同操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:46:31.523

您必须在 XML 文件中定义 TableLayout，如下所示：

```
<TableLayout
                    android:id="@+id/tableview"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/bg_listview"
                    android:cacheColorHint="#00000000"
                    android:divider="@android:color/transparent" >
                </TableLayout> 
```

在您的 Java 文件中，您可以在下面进行编码：

```
tableview = (TableLayout) findViewById(R.id.tableview);
    tableview.setPadding(15, 3, 15, 3);

    for (int i = 0; i <10; i++) {

            TableRow row = new TableRow(this);

            TableLayout.LayoutParams lp = new TableLayout.LayoutParams(
                    TableLayout.LayoutParams.FILL_PARENT,
                    TableLayout.LayoutParams.WRAP_CONTENT);
            row.setLayoutParams(lp);

            row.setPadding(15, 3, 15, 3);

            row.setBackgroundColor(Color.parseColor("#E4CC91"));

            TextView Header = new TextView(this);

            Header.setGravity(Gravity.CENTER);
            Header.setText("YOUR_TEXT_HEADER");
            Header.setTextSize(25.0f);
            Header.setPadding(15, 0, 15, 0);
            Header.setTextColor(Color.parseColor("#FFFFFF"));
            Header.setTypeface(null, Typeface.BOLD);

            row.addView(Header);

            for (int j = 0; j < 5; j++) {
                TextView Values = new TextView(this);
                Values.setPadding(15, 0, 15, 0);
                Values.setGravity(Gravity.CENTER);
                Values.setTextSize(25.0f);
                Values.setTextColor(Color.parseColor("#FFFFFF"));
                Values.setTypeface(null, Typeface.BOLD);
                Values.setText("YOUR_TEXT_RAW");
                row.addView(Values);
            }
            tableview.addView(row);
    } 
```

# jquery - 如何使用jquery中的id获取a内文本框的值

> ID：13270807
> 
> 赞同：3
> 
> 时间：2012-11-07T13:30:36.670
> 
> 标签：jquery

我有一张这样的桌子

```
<table>
<tr id ='1tr'>
<td><input type='textbox' value='1'></td>
 <td><input type='textbox' value='2'></td>
 </tr> 
 <tr id ='2tr'>
  <td><input type='textbox' value='3'></td>
  <td><input type='textbox' value='4'></td>
  </tr>
 </table> 
```

我如何获得 id 为 2tr 的第二个 td 中文本框的值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:33:18.790

试试这个代码：

```
$('#1 input').val();​ 
```

编辑答案后的新代码

```
$('#2tr td:eq(1) input').val(); 
```

是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:33:12.730

tr 中没有 id 为“1”的文本框，所以我猜你在 tr 中使用了 id 为“2”的文本框...

你可以写：

```
$('#2 td input').val() 
```

但不建议在 HTML-DOM 中使用数字作为 ID！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:34:02.203

那将是：

```
$('#2 input').val() 
```

如果您的代码比您的示例更复杂，您可能需要使选择器更具体，例如：

```
$('#2 > td > input[type=text]').val() 
```

请注意，您应该避免使用数字作为 id。这在某些情况下会导致问题。

另请注意，类型应该是`text`，而不是`textbox`：

```
<input type='text' value='1'> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:34:10.927

你可以试试

```
$('#1 input[type="text"]').val(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T13:35:35.823

您可以使用：

```
$('table tr input').val()

$('#2 input').val() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T15:54:02.900

我认为你可以使用这种方式。

在这里，我可以访问每个 txttexboxname 并获取值

```
$("#tablename input[name='txttexboxname']").each(function(indice){
    alert($(this).val()) //show the value
    alert($("#tablename [id='txttexboxname']:eq("+(index)+")").val()) //show the value
} 
```

# php - Ical 与谷歌日历动态同步

> ID：13270816
> 
> 赞同：0
> 
> 时间：2012-11-07T13:31:29.230
> 
> 标签：php, icalendar

我使用 iCalcreator 创建了 iCal 事件。我想让谷歌日历自动同步。我可以创建将通过 URL 导入或添加的 .ical 文件。在我登录 Gmail 后，它就可以工作了。如何通过动态使用 URL 使我的事件自动添加到日历中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:51:23.920

会在下的功能

> 其他日历

```
 >import by URL 
```

是你在找什么？

如果您的 URL 始终指向最新的日历，您的 google 日历将始终是最新的（直到 google 日历的同步频率），并且您或与您共享 google 日历 url 的任何人都可以访问它

# html - 如何使用 CSS 更改链接颜色

> ID：13270817
> 
> 赞同：5
> 
> 时间：2012-11-07T13:31:31.193
> 
> 标签：html, css

我正在使用链接颜色，并且正在为一个特定问题而苦苦挣扎。

我的 CSS 代码是：

```
a:link {
  text-decoration: none;
  colour: white;
}

a:visited {
  text-decoration: none;
  color: purple;
}

a:hover {
  text-decoration: underline;
  color: #C0C0C0;
} 
```

一切都运行良好，除了默认链接颜色没有改变。悬停和访问的颜色会根据命令发生变化，我可以在默认链接样式中添加或删除下划线，我可以更改默认文本背景的颜色，一切正常。这只是我似乎无法操作的默认链接的文本颜色。我试过只使用 a: 而不是 a:link 但这没有区别。如果我用旧的

```
<body link="white"> 
```

技术然后默认颜色根据需要更改，但我需要在 CSS 中执行此操作。

谁能建议为什么只有这一个功能对我不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T13:32:42.107

你有一个错字：

```
colour: white; 
```

应该：

```
color: white; 
```

# qt - 如何在 QML 中访问中继器子级的属性？

> ID：13270818
> 
> 赞同：21
> 
> 时间：2012-11-07T13:31:45.393
> 
> 标签：qt, qml, repeater, element, qt-quick

你能告诉我下面的代码有没有办法改变 imgx 元素的属性。我必须使用 javascript 更改 imgx.x 值。或者还有其他方法吗？我搜索 qt 文档但没有帮助。谢谢。

```
Row {
    Repeater {
        id:mmm
        model : 10
        Rectangle{
            clip: true
            width: 54
            height: 80
            color:"transparent"
            Image {
                id:imgx
                //x:-160
                //x:-105
                //x:-50
                x:0
                source: "images/tarama_lights.png"
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-07T15:20:03.307

您必须将属性添加到中继器的直接子级（在您的情况下为矩形）并将其设置为内部子级中的属性的目标（在您的情况下为图像）。然后您可以使用`mmm.itemAt(<index of the element>).<property> = value`. 代码：

```
Repeater {
  id:mmm
  model : 10
  Rectangle{
    clip: true
    width: 54
    height: 80
    color:"transparent"
    property int imageX: 0 //adding property here

    Image {
      id:imgx
      x: parent.imageX //setting property as the target
      source: "images/tarama_lights.png"
    }
  }
} 
```

然后，您可以像这样更改属性：

```
onPropertyChange: {
  mmm.itemAt(index).imageX = newValue //the index defines which rectangle you change
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-10T09:52:15.460

JuliusG 的答案是正确的使用`itemAt`. 但是不需要将其设置为内部子项中属性的目标（在您的情况下为图像）。你可以**拥有你的代码，**而不是

```
onPropertyChange: {  mmm.itemAt(index).imageX = newValue //the index defines which rectangle you change } 
```

用这个：

```
onPropertyChange: {  mmm.itemAt(index).children[0].x = newValue //the index defines which rectangle you change } 
```

希望能帮助到你。

# mysql - 无法使用主机名通配符连接到 MySQL

> ID：13270821
> 
> 赞同：1
> 
> 时间：2012-11-07T13:31:52.083
> 
> 标签：mysql, macos, mamp

我安装`MySQL`到我的 Mac（使用 MAMP 安装程序）并且遇到了问题。当我以这种方式创建具有“@%”主机名的用户时：

```
CREATE USER 'test'@'%' IDENTIFIED BY 'test'; 
```

我尝试通过 CLI: 连接`mysql -u test -ptest`，我收到此错误：

> 错误 1045 (28000): 用户 'test'@'localhost' 的访问被拒绝（使用密码：是）

但是当我将主机名更改为 localhost 时：

`RENAME USER 'test'@'%' TO 'test'@'localhost';`

有用。

知道如何让 MySQL 使用通配符吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:57:15.580

正如 YaK 所暗示的，这是因为`''@'localhost'`MySQL 安装创建的匿名用户。删除此用户后问题已解决。非常感谢雅克！

# scala - 有没有一种简单的方法可以将 Stream 作为 RowParser 的输出？

> ID：13270825
> 
> 赞同：2
> 
> 时间：2012-11-07T13:32:01.390
> 
> 标签：scala, playframework-2.0, anorm

根据我目前看到的代码示例，鉴于`rowParser`type `RowParser[Photo]`，这就是你如何解析来自 table 的行列表：`photo`

```
def getPhotos(album: Album): List[Photo] = DB.withConnection { implicit c =>
  SQL("select * from photo where album = {album}").on(
    'album -> album.id
  ).as(rowParser *)
} 
```

运算符在其中`*`创建类型为 的解析器`ResultSetParser[List[Photo]]`。现在，我想知道是否同样有可能获得一个产生 a 的解析器`Stream`（认为更懒惰总是更好），但我只是想出了这个：

```
def getPhotos(album: Album): Stream[Photo] = DB.withConnection { implicit c =>
  SQL("select * from photo where album = {album}").on(
    'album -> album.id
  )() collect (rowParser(_) match { case Success(photo) => photo })
} 
```

它有效，但似乎过于复杂。我当然可以调用我从第一个函数中得到的，但我的目标是只应用于`toStream`实际读取的行。有没有更简单的方法来实现这一点？`List``rowParser`

编辑：如果事先知道感兴趣的行数，我知道`limit`应该在查询中使用它。我也知道，在很多情况下，无论如何你都会使用整个结果，所以懒惰不会提高性能。但是在某些情况下，您可能会节省几个周期，例如，如果由于某种原因，您有无法或不想在 SQL 中表达的搜索条件。所以我觉得奇怪的是，鉴于 anorm 提供了一种获得 a `Stream`of 的方法`SqlRow`，我没有找到一种直接的方法来应用 a `RowParser`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:18:00.693

我最终创建了自己的`stream`方法，该方法对应于该`list`方法：

```
def stream[A](p: RowParser[A]) = new ResultSetParser[Stream[A]]  {
      def apply(rows: SqlParser.ResultSet): SqlResult[Stream[A]] = rows.headOption.map(p(_)) match {
        case None => Success(Stream.empty[A])
        case Some(Success(a)) => {
          val s: Stream[A] = a #:: rows.tail.flatMap(r => p(r) match {
            case Success(r) => Some(r)
            case _ => None
          })  

          Success(s)
        }
        case Some(Error(msg)) => Error(msg)
      }
   } 
```

请注意，播放`SqlResult`只能是成功/错误，而每一行也可以是成功/错误。我只处理第一行，假设其余部分相同。这可能适合您，也可能不适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T08:34:22.670

您最好使用`limit`and进行较小的（分页）查询`offset`。

如果您要将（大）结果保存在内存中并从那里流式传输，Anorm 需要进行一些修改。然后另一个问题是 JVM 的新内存要求。您将如何处理服务级别的缓存？看，以前您可以轻松地缓存类似 的`photos?page=1&size=10`内容，但现在您只有`photos`，并且缓存技术不知道如何处理流。

更糟糕的是，可能在 JDBC 级别上，将 Stream 包装在`limit`ed 和`offset`-ed`execute`语句周围，并且只是在幕后多次调用数据库，但这听起来需要相当多的工作来移植 Scala 的 Stream 代码生成到 Java 领域（与 Groovy、jRuby 等一起使用），然后在批准的 JDBC 5 或 6 路线图上获得它。这个想法可能会因为太复杂而被回避，事实就是如此。

你可以环绕`Stream`你的整个 DAO（`limit`和`offset`诡计发生的地方），但这几乎听起来比它的价值更麻烦:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T01:29:06.027

我遇到了类似的情况，但是当用于转换为 Streams 的内置异常函数尝试解析结果集时遇到了*调用堆栈溢出异常。*

为了解决这个问题，我选择放弃异常的 ResultSetParser 范式，并回退到 java.sql.ResultSet 对象。

我想使用 anorm 的内部类来解析结果集行，但是，从 2.4 版开始，他们已经将所有相关的类和方法设为其包的私有，并弃用了其他几种更直接的方法使用。

我结合使用 Promises 和 Futures 来解决 anorm 现在返回的 ManagedResource。我避免了所有已弃用的功能。

```
import anorm._
import java.sql.ResultSet
import scala.concurrent._

def SqlStream[T](sql:SqlQuery)(parse:ResultSet => T)(implicit ec:ExecutionContext):Future[Stream[T]] = {
  val conn = db.getConnection()
  val mr = sql.preparedStatement(conn, false)
  val p = Promise[Unit]()
  val p2 = Promise[ResultSet]()
  Future {
    mr.map({ stmt =>
      p2.success(stmt.executeQuery)
      Await.ready(p.future, duration.Duration.Inf)
    }).acquireAndGet(identity).andThen { case _ => conn.close() }
  }
  def _stream(rs:ResultSet):Stream[T] = {
    if (rs.next()) parse(rs) #:: _stream(rs)
    else {
      p.success(())
      Stream.empty
    }
  }
  p2.future.map { rs =>
    rs.beforeFirst()
    _stream(rs)
  }
} 
```

这个函数的一个相当简单的用法是这样的：

```
def getText(implicit ec:ExecutionContext):Future[Stream[String]] = {
  SqlStream(SQL("select FIELD from TABLE")) { rs => rs.getString("FIELD") }
} 
```

当然，这种方法也有缺点，但是，这解决了我的问题并且不需要包含任何其他库。

# javascript - struts2 optiontransferselect标签上的事件更改

> ID：13270827
> 
> 赞同：1
> 
> 时间：2012-11-07T13:32:14.720
> 
> 标签：javascript, struts2, dom-events

有人可以告诉我是否有办法启用排序选项`optiontransferselect`？当项目从一个列表移动到另一个列表时，在箭头按钮上调用以下脚本

```
<input type="button"
 value="&lt;-" onclick="moveSelectedOptions(document.getElementById('myForm_deliverableIPObject_selectedLibGroups'), document.getElementById('libGroup'), false, '');" /><br /><br /> 
```

如果应该启用自动排序，这里的第三个参数应该是 true。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:09:29.103

AFAIK 唯一的选择是将 FreeMarker 模板更改为`optiontransferselect`. 从简单主题复制`optiontransferselect.ftl`到您的项目并将此参数更改为 true。

# javascript - 用于计算的javascript函数

> ID：13270834
> 
> 赞同：0
> 
> 时间：2012-11-07T13:32:41.007
> 
> 标签：javascript

遇到功能上的麻烦。实际上我需要使这个函数对一些文本字段执行计算。当我在一条线上工作时没有问题。但是最近有人要求做一个多行的表（可以动态添加一行）所以，我做了以下功能，它不仅可以复制行，而且可以更改所有相关字段的id，所以我将类添加到这些字段. 因此我进行如下处理：

```
function clone(line) {

     newLine = line.cloneNode(true);
     line.parentNode.appendChild(newLine);
     var tab = document.getElementsByClassName('libelle_debours')
     var i = -1;
     while (tab[++i]) {
         tab[i].setAttribute("id", "_" + i);
     };
     var cab = document.getElementsByClassName('ht_no_tva')
     var j = -1;
     while (cab[++j]) {
         cab[j].setAttribute("id", "_" + j);
     };
     var dab = document.getElementsByClassName('ht_tva')
     var k = -1;
     while (dab[++k]) {
         dab[k].setAttribute("id", "_" + k);
     };
     var eab = document.getElementsByClassName('taux')
     var l = -1;
     while (eab[++l]) {
         eab[l].setAttribute("id", "_" + l);
     };
     var fab = document.getElementsByClassName('tva')
     var m = -1;
     while (fab[++m]) {
         fab[m].setAttribute("id", "_" + m);
     };

 }

 function delRow() {
     var current = window.event.srcElement;
     //here we will delete the line
     while ((current = current.parentElement) && current.tagName != "TR");
     current.parentElement.removeChild(current);
 } 
```

问题实际上是用于进行计算的第二个函数：

```
 function calcdebours() {
            var taux = document.getElementById('debours_taux_tva').value;
            var ht_no_tva = document.getElementById('debours_montant_ht_no_tva').value;
            var ht_tva = document.getElementById('debours_montant_ht_tva').value;
            var tva = Math.round((((ht_tva) * (taux)) / 100) * 100) / 100;;
            if (taux == '') {
                taux = 0;
            }
            if (ht_no_tva == '') {
                ht_no_tva = 0;
            }
            if (ht_tva == '') {
                ht_tva = 0;
            }
            document.getElementById('debours_montant_tva').value = tva;
            document.getElementById('debours_montant_ttc').value = (tva) + parseFloat(ht_tva) + parseFloat(ht_no_tva)

        }

        function 

montant_debours() {
        var ttc = document.getElementById('debours_montant_ttc').value;
        var ttc2 = document.getElementById('debours_montant_ttc2').value;
        if (ttc == '') {
            var ttc = 0;
        } else {
            var ttc = document.getElementById('debours_montant_ttc').value;
        }
        if (ttc2 == '') {
            var ttc2 = 0;
        } else {
            var ttc2 = document.getElementById('debours_montant_ttc2').value;
        }
        tx = parseFloat(ttc) + parseFloat(ttc2);
        document.getElementById('ttc_cheque').value = Math.round(tx * 100) / 100;
    } 
```

由于 Id 不一样，我是否必须创建与行一样多的函数？

是否可以使用单个函数来处理每一行？

如果是这样，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T04:48:59.913

如果我没记错的话，您可以使用 for 循环并将增量附加到元素 ID 的末尾。像这样：

```
trs = document.getElementById('container Id').getElementsByTagName('tr');
For (var i = 1, i <= trs.length; i++)
{
    var el = document.getElementById('debours_montant_ttc' + i);
} 
```

# sql - 使用多个连接、排序和小限制优化 PostgreSQL 查询

> ID：13270848
> 
> 赞同：5
> 
> 时间：2012-11-07T13:33:31.277
> 
> 标签：sql, postgresql, query-optimization

我需要一些技巧来优化从大表中获取的查询。

在这个例子中，我有 5 个表：

```
Brands
- id_brand
- b_name

Products
- id_product
- p_name
- ean
...
- fk_brand

Prod_attributes
- id_prod_att
- size_basic
...
- fk_product

Stores
- id_store
- s_name
...

Stocks
- id_stock
- stock_amount
- fk_prod_att
- fk_store 
```

我需要一个带有有限股票有序列表的查询，所以这是我使用的一般方法：

```
SELECT stores.s_name, stocks.stock_amount, prod_attributes.size_basic, 
products.p_name, products.ean, brands.b_name 

FROM (stocks 
    INNER JOIN stores 
    ON stocks.fk_store = stores.id_store) 
    INNER JOIN (prod_attributes 
        INNER JOIN (products 
            INNER JOIN brands 
            ON products.fk_brand = brands.id_brand) 
        ON prod_attributes.fk_product = products.id_product) 
    ON stocks.fk_prod_att = prod_attributes.id_prod_att 

ORDER BY s_name, p_name, size_basic 

LIMIT 25 OFFSET 0 
```

这在小表上运行很快，但是当表增长时，查询变得非常昂贵。Stocks 中有 3,5M 行，Prod_attributes 中有 300K 行，25K 产品在超过 8800 毫秒内执行，这对我来说是不可接受的。

所有伪造的密钥都有索引，最近对 DB 进行了真空分析。

我知道问题在于 ORDER BY 部分，因此查询不使用索引并进行顺序扫描。如果我删除排序，那么查询会非常快。

为了解决这个问题，我知道我可以删除 ORDER BY，但这对我来说不是可行的选择。数据库或物化视图的非规范化在这里也可能有所帮助 - 如果可能的话，我想再次避免这种情况。

我还能做些什么来加快这个查询？

解释分析：
- 订购缓慢： http: [//explain.depesz.com/s/AHO](http://explain.depesz.com/s/AHO)
- 快速无订购：[http ://explain.depesz.com/s/NRxr](http://explain.depesz.com/s/NRxr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:24:10.043

一种可能的方法是`stores`从联接中删除。相反，您可以：

*   在存储过程或源代码中循环遍历`stores`（order by ），并且对于每个存储，在 上执行连接过滤。只要获得足够数量的记录，就可以中断循环。`s_name``stocks.fk_store`

*   `stocks`如果可能，使用key进行分区`fk_store`，以大量减少连接中的元组数量。

这样，你应该有一个很好的好处。

# sql - 从一个数据库链接多个表

> ID：13270849
> 
> 赞同：0
> 
> 时间：2012-11-07T13:33:31.240
> 
> 标签：sql, vba, ms-access

我实际上有这个小功能按预期工作：

```
Function createAttached(strTable As String, strPath As String, strBaseTable As String) As Boolean
    On Error GoTo CreateAttachedError

    Dim tdf As TableDef
    Dim strConnect As String
    Dim fRetval As Boolean
    Dim myDB As Database

    DoCmd.SetWarnings False

    Set myDB = CurrentDb
    Set tdf = myDB.CreateTableDef(strTable)

    With tdf
        .Connect = ";DATABASE=" & strPath
        .SourceTableName = strBaseTable
    End With

    myDB.TableDefs.Append tdf
    myDB.TableDefs.Refresh

    fRetval = True

    DoCmd.SetWarnings True

CreateAttachedExit:
    createAttached = fRetval
    Exit Function

CreateAttachedError:
    If Err = 3110 Then
        Resume CreateAttachedExit
    Else
        If Err = 3011 Then
            Resume Next
        Else
            If Err = 3012 Then
                Set tdf = myDB.TableDefs(strTable)
                tdf.Connect = ";DATABASE=" & strPath
                tdf.RefreshLink
                fRetval = True
                GoTo CreateAttachedExit
            End If
        End If
    End If
End Function 
```

此代码工作正常，我可以多次调用该函数，因为我想从另一个数据库中添加指向表的链接。但是，我有大约 30 个表要从同一个数据库中导入，并且每次调用该脚本时都会从头开始重新启动。由于数据库位于另一台服务器上，因此链接 30 个表大约需要 1 分钟。

当我需要链接来自同一个数据库的多个表时，我可以用这个函数做些什么来让它更快地工作？我希望它在参数中使用多个 strTable 和 strBaseTable 而不是一个（也许是数组？），但我不知道该怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:39:51.527

您可以循环访问外部数据库中的 tabledefs 集合，或者使用列出所有要连接的表和外部数据库的表的表。

```
Dim db As Database
Dim ThisDb As Database

Set ThisDb = CurrentDB
sDb = "z:\docs\test.accdb"
Set db = OpenDatabase(sDb)

For Each tdf In db.TableDefs
    ''Connect
    If Left(tdf.Name, 4) <> "MSys" Then
        If IsNull(DlookUp("Name","MsysObjects","Type In (1,4,5,6) And Name='" _
           & tdf.Name & "'")) Then
           DoCmd.TransferDatabase acLink, "Microsoft Access", _
             sDb, acTable, tdf.Name, tdf.Name
        Else
          If ThisDb.TableDefs(tdf.Name).connect <> vbNullString Then
             ThisDb.TableDefs(tdf.Name).connect = ";DATABASE=" & sDb
             ThisDb.TableDefs(tdf.Name).RefreshLink
          End If
        End If
    End If
Next 
```

表格的表格将以类似的方式工作，因为您可以从表格中选择数据库（选择不同的）并循环通过该记录集附加表格以进一步选择（选择数据库...的表格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:40:24.367

您还可以做的是在不同的子系统中设置数据库连接以及数据库断开连接（我可能在这里遗漏了？）。

那么正常调用这个脚本的代码（我假设你有一个循环）将如下所示：

`call function/sub that opens the connection to DATABASE= strPath`

`your loop that calls Function createAttached`

`call function/sub that closes the connection to DATABASE= strPath`

这样您就可以避免重复（通常很耗时）连接到外部数据库

# sockets - FIN,ACK 在 PSH,ACK 之后

> ID：13270851
> 
> 赞同：0
> 
> 时间：2012-11-07T13:33:35.037
> 
> 标签：sockets, networking, tcp, tcpdump, tcp-ip

我正在尝试实现遗留系统和 Linux 系统之间的通信，但我经常遇到以下情况之一：

（遗留系统是服务器，Linux 是客户端）

```
Function recv(2) returns 0 (the peer has performed an orderly shutdown.)
> SYN
< SYN, ACK
> ACK
< PSH, ACK  (the data)
> FIN, ACK
< ACK
> RST
< FIN, ACK
> RST
> RST

Function connect(2) returns -1 (error)
> SYN
< RST, ACK 
```

当服务器发送数据后，客户端应该回复数据，但我得到一个“FIN, ACK” 为什么会这样？我该如何解释这个？我对这个级别的 TCP 不太熟悉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:43:49.370

> 当服务器发送数据后，客户端应该回复数据，但我却得到一个“FIN, ACK” 为什么会这样？我该如何解释这个？

可能是一旦服务器发送了数据（第 4 行），客户端关闭套接字或提前终止，操作系统关闭其套接字并发送`FIN`（第 5 行）。服务器回复`FIN`with`ACK`但客户端已经不复存在，其操作系统回复`RST`. （我希望客户端操作系统在臭名昭著的`TIME-WAIT`状态下默默地忽略并丢弃任何到达关闭连接的 TCP 段，但由于某种原因这不会发生。）

[http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_termination](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_termination)：

> 某些主机 TCP 堆栈可能会实现半双工关闭序列，就像 Linux 或 HP-UX 所做的那样。如果这样的主机主动关闭连接但仍未读取堆栈已从链接接收的所有传入数据，则该主机发送 RST 而不是 FIN（RFC 1122 中的第 4.2.2.13 节）。这允许 TCP 应用程序确保远程应用程序已经读取了之前发送的所有数据——当它主动关闭连接时，它会等待来自远程端的 FIN。但是，远程 TCP 堆栈无法区分连接中止 RST 和此数据丢失 RST。两者都会导致远程堆栈丢弃它收到的所有数据，但应用程序仍然没有读取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T04:38:06.543

在 FIN、PSH、ACK 之后 --> 一个事务完成 第二个请求接收但发送 [RST] seq=140 win=0 len=0

# java - JPA 2 标准 API：如何在不使用元模型的情况下从各种连接表中选择值？

> ID：13270857
> 
> 赞同：1
> 
> 时间：2012-11-07T13:33:56.697
> 
> 标签：java, jpa-2.0, criteria-api

我有以下类型的查询，我希望将其转换为 jpa 条件查询和以下表结构：

```
Table A 1-->1 Table B  1<--* Table C (proceedings) *-->1 Table D(prcoeedingsstatus)
--------      --------       -------                     -------
 aID           bID           cID                         dID
 ...           ....          timestamp                   textValue
 f_bID         ....          f_bID       
                             f_dID 
```

1 A 有 1 B，1 B 有很多程序，每个程序都有一个程序状态。

```
SELECT a.*

FROM ((a LEFT JOIN b ON a.f_b = b.id)
        LEFT JOIN proceedings ON b.id = proceedings.f_b)
        RIGHT JOIN proceedingsstatus ON proceedings.f_d = proceedingsstatus.id

WHERE   d.textValue IN ("some unique text")
        AND c.timestamp BETWEEN 'somedate' AND 'anotherdate' 
```

当我现在尝试为谓词做这样的事情时：

```
Predicate conditions = (root.join("tableB")
                            .joinList("proceedings")
                            .join("proceedingsstatus").get("textValue"))
                            .in(constraintList.getSelectedValues());

Predicate time = cb.between((root.join("tableB")
                            .joinList("proceedings")
                            .<Date>get("timestamp")), dt1.toDate(), dt2.toDate());

constraints = cb.and(conditions, time); 
```

现在，如果在 A 的任何程序中“时间戳”与我构建的时间谓词匹配，它会根据条件谓词选择至少出现 1 次正确程序状态的条目 A。因此，如果至少有一个条目 C 属于 A 且 D 中的文本值正确，那么它也会在 C.timestamp 对 D 中带有错误 textValue 的过程正确时选择条目 A。

我怎样才能改变它，使它只选择诉讼状态具有正确价值且收益时间正确的A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:04:34.957

重用连接，而不是为每个谓词创建新的连接。

```
Join proceedings = root.join("tableB").joinList("proceedings"); 
```

# java - 将输入流分成两个流

> ID：13270859
> 
> 赞同：1
> 
> 时间：2012-11-07T13:34:04.557
> 
> 标签：java, inputstream

我需要结合到 inpustreams，一个只有`string`一个，另一个是一个`avi`文件。我可以轻松地将其中两个组合起来，如下所示：

> InputStream is = new SequenceInputStream(stringStream, aviStream);

但是，当涉及到单独获取字符串和 avi 时，我失败了。avi 文件与其第一个大小不匹配，不知何故我失去了一些大小。

我可以通过使用 a`is`来阅读，但在这种情况下，avi 流将是并且我将丢失信息。`Scanner``delimiter``String`

知道如何分离输入流吗？我想读回我的字符串，我应该将流的其余部分作为输入流。

**编辑**：我正在考虑将流转换为字节数组，然后根据分隔符将数组分成两部分。然后第二部分，即 avi 部分，我可以将其转换回输入流。不过好像很麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:39:30.497

Scanner 仅用于文本数据，而不是二进制数据。二进制数据（例如 AVI）可以包含每个字节值，这意味着您可以使用不会出现在数据中的分隔符。

您可以通过以下方式将文本与原始数据结合起来。

```
DataOutputStream dos = new DataOutputStream(...);
dos.writeUTF(string);
dos.writeInt(bytes.length);
dos.write(bytes); 
```

要反转该过程，您可以将 DataInputStream 与 readUTF、readInt 和 readFully() 一起使用

# c# - Visual Studio 2010 C#单元测试

> ID：13270860
> 
> 赞同：3
> 
> 时间：2012-11-07T13:34:08.430
> 
> 标签：c#, visual-studio-2010, unit-testing

尝试为我的方法创建单元测试，但似乎无法正确配置。我去新测试->单元测试向导->选择我的方法->填写测试方法值，但我总是得到 Assert.Inconclusive 失败。验证此测试方法的正确性。

这是一个示例方法：

```
namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
        }

        public int Mult(int a, int b)
        {
            return a * b;
        }
    }
} 
```

和测试方法：

```
[TestMethod()]
        public void MultTest()
        {
            Program target = new Program(); // TODO: Initialize to an appropriate value
            int a = 4; // TODO: Initialize to an appropriate value
            int b = 5; // TODO: Initialize to an appropriate value
            int expected = 20; // TODO: Initialize to an appropriate value
            int actual;
            actual = target.Mult(a, b);
            Assert.AreEqual(expected, actual);
            Assert.Inconclusive("Verify the correctness of this test method.");
        } 
```

看起来很简单，但我错过了一些微不足道的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:37:11.730

Assert.Inconclusive 主要是一个标记，告诉您需要为测试方法正确地执行您自己的验证步骤。换句话说，对于你正在做的事情，它可以被删除，因为你已经添加了你自己的断言。

如果您的测试中有一些逻辑会阻止您的测试完全运行，也可以使用它。因此，例如，如果由于某种原因您无法创建您尝试测试的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:38:36.600

确定你这样做：

```
Assert.Inconclusive("Verify the correctness of this test method."); 
```

您的测试说不确定，因此测试结果不确定。您应该使用此语法“Assert.Inconclusive”仅涵盖您真正了解的边缘情况。

AFAIC，我从不使用它。

# php - 如何在 PHP-CLI 模式下在 opensuse 上启用 pdo_pgsql

> ID：13270862
> 
> 赞同：1
> 
> 时间：2012-11-07T13:34:12.987
> 
> 标签：php, opensuse

我安装了带有 php 5.4.x 的 opensuse 12.2，pdo 和 pdo_pgsql 在 apache 下运行良好，但它不适用于内部服务器 $php -S localhost:8080

$php -m

```
[PHP Modules]
Core
ctype
date
dom
ereg
fileinfo
filter
gd
hash
iconv
interbase
json
libxml
mbstring
pcre
PDO
pdo_sqlite
Phar
posix
Reflection
session
SimpleXML
sockets
SPL
sqlite3
standard
tokenizer
xml
xmlreader
xmlrpc
xmlwriter
zlib

[Zend Modules] 
```

$php --ini

```
Configuration File (php.ini) Path: /etc/php
Loaded Configuration File:         /etc/php/php.ini
Scan for additional .ini files in: (none)
Additional .ini files parsed:      (none) 
```

我在 php.ini 中添加以下两行

```
extension=pgsql.so
extension=pdo_pgsql.so 
```

然后我得到：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/extensions/pgsql.so' - /usr/lib64/php/extensions/pgsql.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/extensions/pdo_pgsql.so' - /usr/lib64/php/extensions/pdo_pgsql.so: cannot open shared object file: No such file or directory in Unknown on line 0 
```

但我确信 pgsql.so 和 pdo_pgsql.so 都位于 /usr/lib64/php/extensions/ 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:41:07.857

您应该`php_info();`浏览一个网页，这样您就可以看到您的 Web 服务器正在使用的配置。将其与您的 CLI 配置进行比较。

此外，您应该检查`/usr/lib64/php/extensions`.

# c# - 将字符串“172406”快速转换为整数 17、24、06

> ID：13270865
> 
> 赞同：3
> 
> 时间：2012-11-07T13:34:19.320
> 
> 标签：c#, algorithm

我需要将格式为“HHmmss”的字符串快速转换为 DateTime 或整数。我已经测试过这样的代码：

```
Console.WriteLine("decoding " + text);
long microseconds = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
Console.WriteLine("start time " + microseconds);
field = DateTime.ParseExact(text, "HHmmss", null);
microseconds = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
Console.WriteLine("finish time " + microseconds); 
```

输出是

```
解码 172400
开始时间 121
完成时间 244

解码 172400
开始时间 236
完成时间 383

解码 172400
开始时间 116
完成时间 416

解码 172400
开始时间 235
完成时间 421

解码 172359
开始时间 149
完成时间 323

```

所以平均大约150微秒。有很多时间，我正在编写 HFT 软件，而最好的 HFT 平均有 10 微秒的“tick-to-trade”时间（这包括一切！）。我知道使用 c# 这是不可能的，但是我仍然认为即使使用 c# 150 微秒也太多了。

现在我想使用另一种算法，但是我不知道如何从文本中“提取”整数：

```
field = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, /*extract hour, min, sec from text*/) 
```

你有什么建议，最快的方法是什么？请不要问我为什么关心性能，而只是建议如何更快地做到这一点。

**结果：**

使用`DateTime.ParseExact(text, "HHmmss", null)`大约 6-8 个刻度

使用`TimeSpan ts = TimeSpan.ParseExact(text, "hhmmss", null);`大约 3-4 个刻度

使用`int hour = 10 * text[0] + text[1] - 11 * '0';`... 大约 0 滴答声

如果使用循环进行测量，则实际上远小于 0 滴答声。实际上发现上一个版本比其他版本快 100 倍。

**代码：**

```
 long startMicroseconds = sw.ElapsedTicks /*/ (Stopwatch.Frequency / (1000L * 1000L))*/;

    //TimeSpan ts = TimeSpan.ParseExact(text, "hhmmss", null);

    //int hour = 10 * text[0] + text[1] - 11 * '0';
    //int minute = 10 * text[2] + text[3] - 11 * '0';
    //int second = 10 * text[4] + text[5] - 11 * '0';

    field = DateTime.ParseExact(text, "HHmmss", null);

    long finishMicroseconds = sw.ElapsedTicks /*/ (Stopwatch.Frequency / (1000L * 1000L))*/;
    Console.WriteLine("elappsed " + (finishMicroseconds - startMicroseconds)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T13:38:54.913

这种方法不使用任何字符串子字符串或解析方法。它只使用索引和简单的算术：

```
int hour   = (s[0] - '0') * 10 + s[1] - '0';
int minute = (s[2] - '0') * 10 + s[3] - '0';
int second = (s[4] - '0') * 10 + s[5] - '0'; 
```

下一个版本可能会更快，因为已经对计算进行了部分评估以帮助编译器。因此，阅读和理解会稍微困难一些：

```
int hour   = s[0] * 10 + s[1] - '0' * 11;
int minute = s[2] * 10 + s[3] - '0' * 11;
int second = s[4] * 10 + s[5] - '0' * 11; 
```

对于踢，您可能还想看看这是否更快，尽管我怀疑此代码将与以前的版本相同：

```
int hour   = s[0] * 10 + s[1] - 528;
int minute = s[2] * 10 + s[3] - 528;
int second = s[4] * 10 + s[5] - 528; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T13:39:14.953

如果您真的想要性能而不是可读性，您可以直接使用原始字符：

```
hour   = 10*s[0] + s[1] - 11*'0';
minute = 10*s[2] + s[3] - 11*'0';
second = 10*s[4] + s[5] - 11*'0'; 
```

* * *

顺便提一句。`DateTime.Now`速度很慢，因为它需要将当前时间转换为本地时区。你应该`DateTime.UtcNow`改用。在我的补偿上花费 9ns `DateTime.UtcNow`，`DateTime.Now`花费 900ns。

你也应该`DateTime.UtcNow`只取一次，否则你会得到一个竞争条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:38:01.793

这真的太慢了​​吗？

```
TimeSpan ts = TimeSpan.ParseExact("172406", "hhmmss", null);
int hh = ts.Hours;
int mm = ts.Minutes;
int ss = ts.Seconds; 
```

至少很容易理解。

# maven - 是否可以在 Maven 原型中为 groupId 定义默认值？

> ID：13270867
> 
> 赞同：3
> 
> 时间：2012-11-07T13:34:24.153
> 
> 标签：maven, maven-archetype

我目前正在为我们的项目更新一个 maven 原型，并希望减少用户在使用此原型时必须提供的信息量。例如，groupId 将始终相同。

那么，是否可以在 Maven 原型中为 groupId 定义默认值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:46:44.967

如果你在一个固定的组织工作，这个值不会在每个项目的基础上改变：使用父 POM。通过您的存储库分发它（您使用某种中央存储库，即使它只是一个网络驱动器，对吗？）。

纳入项目

```
<artifactId>greattool</artifactId>
<packaging>war</packaging>
<parent>
    <groupId>com.example</groupId>
    <artifactId>master-parent-pom</artifactId>
    <version>0.0.1</version>
</parent> 
```

父 POM

```
<groupId>com.example</groupId>
<artifactId>master-parent-pom</artifactId>
<version>0.0.1</version>
<packaging>pom</packaging>
<description>Parent POM for our projects, specific project type POMs derive from this.</description> 
```

因此项目 POM 中没有组 id，将使用来自父 POM 的组 id。当然，您正在用包含父 POM 的方式替换组 id，但这很有帮助，因为您可以进一步自定义 Maven 以满足您组织的特定需求。

如果您使用构建和测试服务器，您甚至可以将父级设置`version`为`-SNAPSHOT`自动将父 POM 中的更改分发到项目 POM。

# java - 存储由 JSP 呈现的 HTML 文件

> ID：13270869
> 
> 赞同：0
> 
> 时间：2012-11-07T13:34:30.517
> 
> 标签：java, html, jsp

我需要使用 Servlet 和 jsp 创建报告。我的问题是，有一个页面列出了以前生成的报告。可以单击列表中的任何此报告并再次查看该报告。为此，我必须在服务器上保留由 jsp 呈现的静态 html 文件。我怎样才能得到这个。我不想渲染 jsp 文件两次，因为这很耗时。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:48:44.700

基本上，您应该将 HTTP 响应对象的主体写入网络服务器上的文件，并编写某种服务/servlet 来检索这些文件。我想最简单的方法是编写一个 ServletFilter 来拦截 JSP 的响应。

当前的 Oracle Java EE 6 教程关于过滤器的内容相当简短，但您可以在之前的版本中阅读所有相关信息：http: [//docs.oracle.com/javaee/5/tutorial/doc/bnagb.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnagb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:50:19.790

您可以通过添加[过滤器](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)来缓存报告。过滤器可以检查已经渲染的版本是否可用并返回该文件的内容。如果不存在文件，它可以将结果响应写入缓存。

# php - 在 foreach 循环 PHP 中每隔三个项目包装一个 div

> ID：13270870
> 
> 赞同：4
> 
> 时间：2012-11-07T13:34:31.003
> 
> 标签：php, arrays, loops, foreach

```
//set the array
$info = array(
'andy' => 'blue',
'andrew' => 'black',
'mark' => 'green',
'jane' => 'orange',
'simon' => 'red',
'joan' => 'pink',
'sue' => 'yellow',
'alan' => 'black') 

$i = 1;

foreach($info as $key => $val){

    <div class="holder">
        <div class="name">
            <?php echo $Name ?> 
        </div>
        <div class="colour">
            <?php echo $colour ?> 
        </div>
    </div>
} 
```

这显示了每个“持有人”类......但我想要做的是在“持有人”类周围包装一个容器，并在每个“容器”中有3个“持有人”。例如：

```
<div class="container">
    <div class="holder">
            <div class="name">
                <?php echo $Name ?> 
            </div>
            <div class="colour">
                <?php echo $colour ?> 
            </div>
        </div>
    <div class="holder">
            <div class="name">
                <?php echo $Name ?> 
            </div>
            <div class="colour">
                <?php echo $colour ?> 
            </div>
        </div>
    <div class="holder">
            <div class="name">
                <?php echo $Name ?> 
            </div>
            <div class="colour">
                <?php echo $colour ?> 
            </div>
        </div>
</div> 
```

我不知道如何获取关联数组的索引，或者如何在 %3 == 0 后打破 foreach 循环。

任何建议都会很棒！

-韦德

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T13:38:55.880

您需要有一个单独的计数器变量：

```
$i = 0;
foreach($info as $key => $val){
  if($i%3 == 0) {
    echo $i > 0 ? "</div>" : ""; // close div if it's not the first
    echo "<div class='container'>";
  }
  ?>
    <div class="holder">
        <div class="name">
            <?php echo $Name ?> 
        </div>
        <div class="colour">
            <?php echo $colour ?> 
        </div>
    </div>
<?php
$i++;
}
?>
</div> <!-- close last container div --> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T13:38:52.650

你在找这个吗？[php.net/array_chunk](http://php.net/array_chunk)

而且，那里有一些语法错误

```
foreach($info as $key => $val){ 
```

这应该是

```
foreach($info as $key => $val){ ?> 
```

关闭 php 以启动 HTML 标记

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:39:32.260

在这种情况下，你会想做这样的事情。确保变量正确。

```
$i = 1;

foreach($info as $key => $val){
    if ($i % 3 == 0) {
         ?>
         <div name='container'>
         <?php
    }
    ?>
    <div class="holder">
        <div class="name">
            <?php echo $key; ?> 
        </div>
        <div class="colour">
            <?php echo $val; ?> 
        </div>
    </div>

    if ($i % 3 == 2) {
         ?>
         </div>
         <?php
    }

    <?php
    $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:39:19.510

您可以`$i`在 foreach 循环内增加它，例如：

```
$i = 0;
foreach ($info as $key => $val) {
    if ($i % 3 == 0) {
        ...
    } else {
        ...
    }
    $i++;
} 
```

# java - Twisted python 服务器和 Java 聊天

> ID：13270871
> 
> 赞同：0
> 
> 时间：2012-11-07T13:34:31.380
> 
> 标签：java, python, client-server, twisted

我在 raywenderlich.com 上找到了这个很棒的教程：

[http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

它创建了一个 Twisted Python 服务器，并与应用程序 iphone 聊天交谈，我会让服务器也与 Java 聊天交谈，现在我编写了一些代码，这是 python 服务器：

```
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor

class IphoneChat(Protocol):
def connectionMade(self):
    #self.transport.write("""connected""")
    self.factory.clients.append(self)
    print "clients are ", self.factory.clients

def connectionLost(self, reason):
    self.factory.clients.remove(self)

def dataReceived(self, data):
    #print "data is ", data
    a = data.split(':')
    if len(a) > 1:
        command = a[0]
        content = a[1]

        msg = ""
        if command == "iam":
            self.name = content
            msg = self.name + " has joined"

        elif command == "msg":
            msg = self.name + ": " + content

        print msg

        for c in self.factory.clients:
            c.message(msg)

def message(self, message):
    self.transport.write(message + '\n')

factory = Factory()
factory.protocol = IphoneChat
factory.clients = []

reactor.listenTCP(1025, factory)
print "Chat server started"
reactor.run() 
```

然后我创建一个简单的 java 示例来连接到服务器：

```
import java.net.*;
import java.io.*;
import java.util.*;

public class MyClassSocket  {

private ObjectInputStream sInput;       // to read from the socket
private ObjectOutputStream sOutput;     // to write on the socket
private Socket socket;

private String server, username;
private int port;

MyClassSocket(String server, int port, String username) {
    this.server = server;
    this.port = port;
    this.username = username;
}

private void display(String msg) {

    System.out.println(msg);      // println in console mode

}

public boolean start() {

    try {
        socket = new Socket(server, port);
    }
    // if it failed not much I can so
    catch(Exception ec) {
        display("Error connectiong to server:" + ec);
        return false;
    }

    String msg = "Connection accepted " + socket.getInetAddress() + ":" + socket.getPort();
    display(msg);

    try
    {

        sInput  = new ObjectInputStream(socket.getInputStream()); //<-------- block here
        sOutput = new ObjectOutputStream(socket.getOutputStream());
    }
    catch (IOException eIO) {
        display("Exception creating new Input/output Streams: " + eIO);
        return false;
    }

    return true;

}

public static void main(String[] args) {

    MyClassSocket client = new MyClassSocket("localhost",1025,"PieroJava");
    client.start();
}

} 
```

代码冻结在我在上面的代码中注释的点，我可以在服务器终端中看到有一个新连接，我可以在客户端看到我连接但不要在这里：

```
sInput  = new ObjectInputStream(socket.getInputStream()); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:30:46.207

我建议不要使用 ObjectInputStream 和 ObjectOutputStream。无论如何，让这些与 Python 服务器很好地交互可能是具有挑战性的，而且它们无论如何都没有实现一个很好的协议。我推荐一个更简单的协议，具有更好的跨语言支持，例如[AMP](http://amp-protocol.net/Implementations)。

无论如何，`new ObjectInputStream`似乎预计会阻塞，直到它可以从连接中读取字节。如果您想让它成功，您的基于 Twisted 的服务器将需要将 Java 对象流的开头写入连接。

# c# - 在 WPF 应用程序中加载大量 Azure blob 数据

> ID：13270873
> 
> 赞同：1
> 
> 时间：2012-11-07T13:34:41.847
> 
> 标签：c#, .net, azure, azure-storage, azure-blob-storage

我的任务是为应用程序构建原型。我还没有任何代码，因为我提出的解决方案概念充其量看起来很臭......

**问题：**

该解决方案由各种 Azure 项目组成，这些项目对存储在 Azure SQL db-s 中的大量数据进行处理。几乎每个发生的操作都会在 blob 存储中创建一个 gzip 压缩的日志文件。所以这是每个日志条目一个 .gz 文件。

我们还应该有一个小型桌面 (WPF) 应用程序，它应该能够读取、过滤和排序这些日志文件。

我对如何完成日志记录的影响绝对为 0，因此这是无法更改以解决此问题的东西。

**我提出的可能的解决方案（概念上）：**

**1：**

*   连接到 blob 存储
*   打开容器
*   读取/下载 blob（应用过滤器）
*   解压 .gz 文件
*   读取和显示

这样做的问题是，根据过滤器的不同，这可能意味着要下载大量数据（速度很慢）和处理（也不会很快速）。我真的看不出这是一个可用的应用程序。

**2：**

*   创建一个将运行 WCF 或 REST 服务的 Web 角色
*   该服务将获取过滤器参数和其他内容并返回包含数据的单个 xml/json 文件，处理将在云端完成

使用这种方法，如果有很多文件，我会在解压缩这些文件时遇到问题（它会占用运行服务的存储/计算实例的额外空间）。

**编辑：**我所说的过滤器的意思是按日期和严重性（信息、警告、错误）限制结果。.gz 文件保存在一个结构中，这使得这很容易，我不会通过查看文件本身来过滤。

**3：**

*   我不知道的其他一些优雅而简单的解决方案

我还需要某种方法让应用程序实时更新显示的日志，我想这需要通过对 blob 存储/服务的重复请求来完成。

* * *

这不是那些“给我代码”的问题之一。我正在寻找有关最佳实践的建议，或适用于类似问题的类似解决方案。我也知道这可能是那些“没有一个正确答案”的问题之一，因为人们有不同的解决问题的方法，但我有一些时间来构建一个原型，所以我会尝试不同的东西，我会选择正确的答案，这将是一个显示有效解决方案的解决方案，或者是引导我朝着正确方向前进的解决方案，即使在我实际构建某些东西并对其进行测试之前确实需要一些时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:02:20.633

据我了解，您在 Azure Blob 存储中有一组以特定方式 (gzip) 格式化的日志文件，并且您希望显示它们。

这些文件有多大？您是否在日志文件中显示每条信息？

假设如果这是一个日志文件，它是静态的和历史的……这意味着一旦创建了 log/gzip 文件，它就无法更改（一旦 gzip 文件在博客存储中出现，您就不会更新它）。只能创建新文件...

一种解决方案

* * *

为什么不创建一个工作角色/作业进程，它会定期退出并扫描 blob 存储并构建一个持久的“数据库”，以便您可以显示。这样做的好处是您没有将解压缩/业务逻辑用于在 WPF 应用程序或 UI 中提取日志文件。

1) 我会让工作人员角色扫描 Azure Blob 存储中的日志文件 2) 有某种机制来跟踪处理了哪些文件以及当前“状态”可能是最后一个 gzip 文件的 UTC 日期 3) 完成所有解压缩/提取辅助角色中的日志文件 4) 让辅助角色将内容放在 SQL 数据库、Azure 表存储或分布式缓存中以供访问 5) 可以通过 REST 服务（ASP.NET Web API/节点）进行访问.js 等）

如果您需要扩展它，您可以添加更多内容，例如将其作为作业运行以从给定时间重新执行所有日志文件（全部刷新）。我不知道您的数据大小，所以我不确定这是否可行。

这样做的好处是，如果您需要扩展您的工作（一夜之间），您可以启动 2、3、6 个工作角色...提取内容，将结果传递给将插入 SQL 的服务总线或存储队列，缓存等访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:02:37.863

仅仅存储 blob 是不够的。您要过滤的元数据应存储在其他易于过滤和检索所有元数据的地方。所以我认为你应该把它分成两个问题：

> A. 我如何有效地列出所有“gzip”及其元数据，以及如何对这些 gzip 应用过滤器以便在我的客户端应用程序中显示它们。

**解决方案**

*   Blob：列出 Blob 很慢，并且无法过滤（您可以每月或每周或用户或用户在容器中分组......但这不是过滤）。
*   表存储：非常快，但是搜索很慢（只索引PK和RK）
*   SQL Azure：您可以创建一个表，其中包含“gzip”列表以及一些其他元数据（例如创建 gzip 的用户、时间、总大小......）。使用具有一些良好索引的存储过程可以使搜索速度非常快，但 SQL Azure 并不是最具可扩展性的解决方案
*   Lucene.NET：有一个适用于 Windows Azure 的[AzureDirectory](https://azuredirectory.codeplex.com/)，可以在您的应用程序中使用 Lucene.NET。这是一个超快速的搜索引擎，允许您索引您的“文档”（元数据），这将非常适合过滤和返回“gzips”列表

**更新：**由于您只过滤日期和严重性，您应该查看 Blob 和 Table 选项：

*   Blob：您可以按日期+严重性（20121107-low、20121107-medium、20121107-high ...）创建一个容器。假设每个数据+严重性没有太多 blob，您可以直接从容器中直接列出 blob。您在这里可能遇到的唯一问题是，用户希望查看上周（7 天）以来严重性较高的所有项目。这意味着您需要列出 7 个容器中的 blob。
*   表：即使您说不能选择表存储或数据库，也请考虑表存储。使用分区和行键，您可以轻松地以非常可扩展的方式进行过滤（您也可以使用[CompareTo](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/11/06/how-to-get-most-out-of-windows-azure-tables.aspx)来获取一系列项目（例如，11 月 1 日到 7 日之间的所有记录）。在表存储中完全可以接受重复数据。您可以在表存储实体中包含来自 gzip 的一些数据，以便在您的 WPF 应用程序中显示它（过滤后要显示的最重要的信息）。这意味着您只需要在用户打开/加倍时处理 blob单击 WPF 应用程序中的记录

> B. 如何在我的应用程序中显示“gzip”（例如双击搜索结果后）

**解决方案**

*   从 WPF 应用程序连接到存储帐户，下载文件，解压缩并显示它。这意味着您需要将存储帐户存储在 WPF 应用程序中（或使用 SAS 或容器策略），如果您决定在后端更改文件存储方式，您还需要更改WPF 应用程序。
*   **连接到 Web 角色**。此 Web 角色从 blob 存储中获取 blob，将其解压缩并通过网络发送（或将其压缩发送以加快传输速度）。如果您存储文件的方式发生变化，您只需更新 Web 角色

# nginx - 在 nginx 服务器上使用 Yii returnUrl

> ID：13270875
> 
> 赞同：1
> 
> 时间：2012-11-07T13:34:44.937
> 
> 标签：nginx, yii, returnurl

我正在使用带有 Yii 应用程序的 nginx 服务器。

我的问题是，`Yii::app()->user->returnUrl`在成功登录后重定向我的 SiteController.php 中的值始终是 - mysite/index.php ，无论我来自哪个页面。

如何将其修复为上一页 URL 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:58:31.600

这是您看到的默认行为，如果您想更改，有一些选择！这些选择中的相同部分是您应该扩展 CWebUser 并添加功能

```
class WebUser extends CWebUser
{
} 
```

＆您需要并在配置中提及它

```
'user'=>array(
    'class' => 'WebUser',
    'loginUrl' => array('user/login'),
    'defaultDashboard' => array('user/dashboard'),
) 
```

完成了，现在的选择！如果你想要的 returnUrl 是固定的，在函数 beforeLogin 中设置它，你应该在 WebUser 类中重写这个函数并手动设置 returnUrl，更多信息在[Official API for CWebUser](http://www.yiiframework.com/doc/api/1.1/CWebUser#beforeLogin-detail "API")。但是，如果 returnUrl 不固定并且您希望几乎为每个需要登录的操作设置它，那么您应该覆盖 loginRequired 函数

```
public function loginRequired() {
    $app=Yii::app();
    $request=$app->getRequest();
    $controller=$app->controller;
    $actionParameters=$controller->actionParams;

    if(!$request->getIsAjaxRequest()) {
        if(empty($actionParameters))
            $this->setReturnUrl(array($controller->route));
        else
            $this->setReturnUrl(array($controller->route,$actionParameters));
    }
    if(($url=$this->loginUrl)!==null) {
        if(is_array($url)) {
            $route=isset($url[0]) ? $url[0] : $app->defaultController;
            $url=$app->createUrl($route,array_splice($url,1));
        }
        $request->redirect($url);
    }
    else
        throw new CHttpException(403,Yii::t('yii','Login Required'));
} 
```

& 登录成功后最后一步防止循环

```
if($model->validate() && $model->login()){
    $returnUrl=Yii::app()->user->returnUrl;
    $url=(is_array($returnUrl))?$returnUrl[0]:$returnUrl;
    if(isset($returnUrl)&&stripos(strtolower($url),'logout')==false&&stripos(strtolower($url),'login')==false) {
        $this->redirect($this->createUrl($returnUrl[0],$returnUrl[1]));
    } else {
        $this->redirect($this->createUrl($returnUrl[0],$returnUrl[1]));
    } 
```

# android - EditText 文本用作文件名

> ID：13270876
> 
> 赞同：-1
> 
> 时间：2012-11-07T13:34:49.597
> 
> 标签：android, android-edittext, soundpool

我有一个应用程序，可以在外部存储上搜索歌曲并通过单击按钮来播放它。`String path = getFullFilePath(getApplicationContext(), "FILENAME");`如果我输入类似 song.mp3 之类的内容，我使用它，它工作正常......我尝试使用`EditText.getText().toString();` 除“文件名”之外的东西，但它不起作用。这是我在 OnCreate 中的代码：

```
EditText et = (EditText) findViewById(R.id.et1);
            String string = et.getText().toString();
        sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
        String path = getFullFilePath(getApplicationContext(), string);
        mSoundId = sp.load(path, 1); 
```

LogCat 说 `11-07 14:26:39.909: W/SoundPool(12627): sample 1 not READY

但是如果我输入`et.setText("SongName");`它工作正常..我想在edittext中输入一些东西，然后将它用作文件名！谢谢`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:52:23.770

在 OnCreate 中执行此操作：

```
mEditText = (EditText) findViewById(R.id.et1); 
mSoundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
mSoundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {
    public void onLoadComplete (SoundPool soundPool, int sampleId, int status) {
        mStreamId = soundPool.play(sampleId, 1, 1, 1, 0, 1f);
    }
} 
```

然后在你的 onClick 做：

```
public void yourOnClickMethod(View view) { 
    if (mStreamId != 0) { 
        mSoundPool.stop(mStreamId); 
    } 

    String path = getFullFilePath(getApplicationContext(), EditText.getText().toString());
    mSoundId = mSoundPool.load(path, 1); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:41:45.737

OnCreate 在 Activity 的每个生命周期中只会被调用一次。所以 OnCreate 用于初始化 UI。所以它不会在 EditText 上得到改变。有一个按钮。单击从edittext获取数据。那应该可以解决您的问题。

# python - 如何在没有 pip/easy_install 的情况下手动安装 pypi 模块？

> ID：13270877
> 
> 赞同：116
> 
> 时间：2012-11-07T13:34:55.187
> 
> 标签：python, installation, pip, growl

我想使用[gntp 模块](https://github.com/kfdm/gntp)为 C/C++ 软件显示类似于烤面包机的通知。我想打包软件的所有依赖项，以便在另一台计算机上自行执行。

该`gntp`模块只能通过`pip`安装程序获得，无法使用（运行该软件的计算机没有互联网连接）

如何从源代码安装它？

我不希望强制用户安装`easy_install`/`pip`并手动将 pip 路径添加到`%PATH`.

PS：我在 Windows 机器上使用 Python 2.7。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-11-07T13:55:58.147

1.  下载包
2.  如果是压缩的就解压
3.  `cd`进入包含 setup.py 的目录
4.  如果文档中包含任何安装说明，请阅读并遵循说明 否则
5.  输入`python setup.py install`

您可能需要管理员权限才能执行第 5 步。您在此处执行的操作取决于您的操作系统。例如在 Ubuntu 中你会说`sudo python setup.py install`

* * *

**编辑**- 感谢 kwatford（见第一条评论）

要在上述第 5 步中绕过对管理员权限的需求，您可以使用该`--user`标志。这样您就可以仅为当前用户安装软件包。

文档说：

> 文件将被安装到 site.USER_BASE 的子目录中（以后写为 userbase）。此方案将纯 Python 模块和扩展模块安装在同一位置（也称为 site.USER_SITE）。

更多细节可以在这里找到：http: [//docs.python.org/2.7/install/index.html](http://docs.python.org/2.7/install/index.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-04T15:13:22.817

为了进一步解释[Sheena 的答案](https://stackoverflow.com/a/13271241/1762224)，我需要***安装 setup-tools***作为另一个工具的依赖项，例如***more-itertools***。

### 下载

单击`Clone or download`按钮并选择您的方法。我将它们放在`dev/py/libs`我的用户主目录中的一个目录中。它们保存在哪里并不重要，因为它们不会安装在那里。

*   **设置工具：** [https ://github.com/pypa/setuptools](https://github.com/pypa/setuptools)
*   **更多-itertools：** [https ://github.com/erikrose/more-itertools](https://github.com/erikrose/more-itertools)

### 安装设置工具

您需要在*setup-tools*目录中运行以下命令。

```
python bootstrap.py
python setup.py install 
```

### 一般依赖安装

现在您可以导航到*more-itertools*目录并正常安装它。

1.  下载包
2.  如果是存档，请解包
3.  导航 ( `cd ...`) 到包含`setup.py`
4.  如果此处包含的文档中包含任何安装说明，请阅读并遵循说明 否则
5.  输入：`python setup.py install`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-21T11:28:46.803

即使[Sheena 的](https://stackoverflow.com/a/13271241/5337834)回答完成了工作，`pip`但并不止于此。

来自Sheena的回答：

> 1.  下载包
> 2.  如果是压缩的就解压
> 3.  cd 进入包含 setup.py 的目录
> 4.  如果此处包含的文档中包含任何安装说明，请阅读并遵循说明 否则
> 5.  输入`python setup.py install`

最后，您将得到`.egg`一个`site-packages`. 作为用户，这不应该打扰您。你可以`import`和`uninstall`包正常。但是，如果您想这样做`pip`，您可以继续以下步骤。

在`site-packages`目录中，

6.  `unzip <.egg file>`
7.  将`EGG-INFO`目录重命名为`<pkg>-<version>.dist-info`
8.  现在你会看到一个带有包名的单独目录，`<pkg-directory>`
9.  `find <pkg-directory> > <pkg>-<version>.dist-info/RECORD`
10.  `find <pkg>-<version>.dist-info >> <pkg>-<version>.dist-info/RECORD`. 这`>>`是为了防止覆盖。

现在，查看`site-packages`目录，你永远不会意识到你安装了没有`pip`. 到`uninstall`了，就照常办吧`pip uninstall <pkg>`。

# c++ - 为什么以下代码会在 Visual Studio 2010（x64 应用程序）中引发非法指令异常？

> ID：13270885
> 
> 赞同：-5
> 
> 时间：2012-11-07T13:35:20.580
> 
> 标签：c++, loops, exception

我有一个 2D 游戏，其中每个位置都是用 3 个坐标构建的（x = 宽度，y = 高度和地板 = z）

我试图编写一个函数，它会向我抛出从开始到结束位置的所有地砖列表。

下面的代码抛出了一个“非法指令”——异常。我很困惑：

```
std::list<Tile*> Map::getTileArea(Position positionStart, Position positionEnd)
{
    std::list<Tile*> tileAreaList;

if(positionStart.x > positionEnd.x) {
    std::swap(positionStart.x, positionEnd.x);
}

if(positionStart.y > positionEnd.y) {
    std::swap(positionStart.y, positionEnd.y);
}

if(positionStart.z > positionEnd.z) {
    std::swap(positionStart.z, positionEnd.z);
}

    for(int _x = positionStart.x; _x < positionEnd.x; _x++) {//<-Exception occurs here.
        //Procedurestepping told me that but I cannot find an explanation for this.
        for(int _y = positionStart.y; _y < positionEnd.y; _y++) {
        for(int _z = positionStart.z; _z < positionEnd.z; _z++) {
            Tile* tile = getTileByPosition(Position(_x, _y, _z));
            if(tile != NULL) {
                tileAreaList.push_back(tile);
                }
            }
        }
    }

    return tileAreaList;
} 
```

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:40:32.707

看起来像剪切粘贴错误：

```
if(positionStart.y > positionEnd.y) {
     std::swap(positionStart.y, positionEnd.y);
}

if(positionStart.z > positionEnd.z) {
    std::swap(positionStart.z, positionEnd.z);
} 
```

# python - python2.6 ubuntu 10.04‏‏

> ID：13270886
> 
> 赞同：1
> 
> 时间：2012-11-07T13:35:23.767
> 
> 标签：python, tinyos

我使用 ubuntu 10.04 和 tinyos-2.1.1。当我想运行“make micaz sim”时遇到问题。问题如下：

```
mkdir -p simbuild/micaz
make: python2.6.5-config: Command not found
make: python2.6.5-config: Command not found
make: python2.6.5-config: Command not found 
```

我尝试更新并安装“python2.6-dev”

```
sudo apt-get install python2.6-dev 
```

我也加

```
export PYTHONPATH=$PYTHONPATH:/usr/include/python2.6 
```

我还在 /support/make 中的“sim-fast.extra”、“sim-sf.extra”和“sim.extra”文件中进行了修改

```
PYTHON_VERSION=2.6.5 
```

你有什么想法吗？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:39:35.080

您需要将版本设置为`2.6`，而不是`2.6.5`：

```
PYTHON_VERSION=2.6 
```

# python - 为什么startswith比slicing慢

> ID：13270888
> 
> 赞同：53
> 
> 时间：2012-11-07T13:35:27.787
> 
> 标签：python, startswith

为什么执行[`startwith`](http://docs.python.org/2/library/stdtypes.html#str.startswith)比切片慢？

```
In [1]: x = 'foobar'

In [2]: y = 'foo'

In [3]: %timeit x.startswith(y)
1000000 loops, best of 3: 321 ns per loop

In [4]: %timeit x[:3] == y
10000000 loops, best of 3: 164 ns per loop 
```

令人惊讶的是，即使包括长度的计算，切片仍然显得更快：

```
In [5]: %timeit x[:len(y)] == y
1000000 loops, best of 3: 251 ns per loop 
```

*注意：此行为的第一部分在[**Python for Data Analysis**](http://shop.oreilly.com/product/0636920023784.do)（第 3 章）中有说明，但未提供任何解释。*

.

如果有帮助：[这里是 C 代码`startswith`](http://hg.python.org/cpython/file/4ebe1ede981e/Objects/stringobject.c#l2903)；这是输出[`dis.dis`](https://stackoverflow.com/questions/12673074/how-should-i-understand-the-output-of-dis-dis)：

```
In [6]: import dis

In [7]: dis_it = lambda x: dis.dis(compile(x, '<none>', 'eval'))

In [8]: dis_it('x[:3]==y')
  1           0 LOAD_NAME                0 (x)
              3 LOAD_CONST               0 (3)
              6 SLICE+2             
              7 LOAD_NAME                1 (y)
             10 COMPARE_OP               2 (==)
             13 RETURN_VALUE        

In [9]: dis_it('x.startswith(y)')
  1           0 LOAD_NAME                0 (x)
              3 LOAD_ATTR                1 (startswith)
              6 LOAD_NAME                2 (y)
              9 CALL_FUNCTION            1
             12 RETURN_VALUE 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-07T13:48:59.767

*一些*性能差异可以通过考虑`.`操作员完成工作所花费的时间来解释：

```
>>> x = 'foobar'
>>> y = 'foo'
>>> sw = x.startswith
>>> %timeit x.startswith(y)
1000000 loops, best of 3: 316 ns per loop
>>> %timeit sw(y)
1000000 loops, best of 3: 267 ns per loop
>>> %timeit x[:3] == y
10000000 loops, best of 3: 151 ns per loop 
```

另一部分差异可以用`startswith`一个*函数*来解释，即使是无操作函数调用也需要一些时间：

```
>>> def f():
...     pass
... 
>>> %timeit f()
10000000 loops, best of 3: 105 ns per loop 
```

这并不能*完全*解释差异，因为使用切片和`len`调用函数的版本仍然更快（与`sw(y)`上面相比——267 ns）：

```
>>> %timeit x[:len(y)] == y
1000000 loops, best of 3: 213 ns per loop 
```

我唯一的猜测是，也许 Python 优化了内置函数的查找时间，或者`len`调用被高度优化（这可能是真的）。可以使用自定义`len`函数对其进行测试。或者这可能是[LastCoder](https://stackoverflow.com/a/13271036/577088)确定的差异所在。还要注意[larsmans](https://stackoverflow.com/a/13271349/577088)的结果，这表明`startswith`对于较长的字符串实际上更快。上面的全部推理仅适用于我所说的开销实际上很重要的那些情况。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-07T14:03:18.493

比较是不公平的，因为您只是在测量`startswith`返回的情况`True`。

```
>>> x = 'foobar'
>>> y = 'fool'
>>> %timeit x.startswith(y)
1000000 loops, best of 3: 221 ns per loop
>>> %timeit x[:3] == y  # note: length mismatch
10000000 loops, best of 3: 122 ns per loop
>>> %timeit x[:4] == y
10000000 loops, best of 3: 158 ns per loop
>>> %timeit x[:len(y)] == y
1000000 loops, best of 3: 210 ns per loop
>>> sw = x.startswith
>>> %timeit sw(y)
10000000 loops, best of 3: 176 ns per loop 
```

此外，对于更长的字符串，`startswith`速度要快得多：

```
>>> import random
>>> import string
>>> x = '%030x' % random.randrange(256**10000)
>>> len(x)
20000
>>> y = r[:4000]
>>> %timeit x.startswith(y)
1000000 loops, best of 3: 211 ns per loop
>>> %timeit x[:len(y)] == y
1000000 loops, best of 3: 469 ns per loop
>>> sw = x.startswith
>>> %timeit sw(y)
10000000 loops, best of 3: 168 ns per loop 
```

当没有匹配时，这仍然是正确的。

```
# change last character of y
>>> y = y[:-1] + chr((ord(y[-1]) + 1) % 256)
>>> %timeit x.startswith(y)
1000000 loops, best of 3: 210 ns per loop
>>> %timeit x[:len(y)] == y
1000000 loops, best of 3: 470 ns per loop
>>> %timeit sw(y)
10000000 loops, best of 3: 168 ns per loop
# change first character of y
>>> y = chr((ord(y[0]) + 1) % 256) + y[1:]
>>> %timeit x.startswith(y)
1000000 loops, best of 3: 210 ns per loop
>>> %timeit x[:len(y)] == y
1000000 loops, best of 3: 442 ns per loop
>>> %timeit sw(y)
10000000 loops, best of 3: 168 ns per loop 
```

因此，`startswith`对于短字符串可能会更慢，因为它针对长字符串进行了优化。

[（从这个答案](https://stackoverflow.com/a/2782859/166749)中获取随机字符串的技巧。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-07T13:43:59.370

`startswith`比切片更复杂...

```
2924 result = _string_tailmatch(self,
2925 PyTuple_GET_ITEM(subobj, i),
2926 start, end, -1); 
```

这不是大海捞针开始时发生的简单字符比较循环。我们正在查看一个 for 循环，它遍历一个向量/元组 (subobj) 并`_string_tailmatch`在其上调用另一个函数 ( )。多个函数调用在堆栈、参数完整性检查等方面有开销......

`startswith`是一个库函数，而切片似乎是内置在语言中的。

```
2919 if (!stringlib_parse_args_finds("startswith", args, &subobj, &start, &end))
2920 return NULL; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-07T14:44:45.907

要引用[文档](http://docs.python.org/2/library/stdtypes.html#str.startswith)，`startswith`您可能会想到更多：

> `str.startswith(prefix[, start[, end]])`
> 
> > `True`如果字符串以前缀开头，则返回，否则返回`False`。prefix 也可以是要查找的前缀元组。使用可选 的*start*，测试从该位置开始的字符串。使用可选的*end*，停止在该位置比较字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T13:46:00.370

调用函数非常昂贵。但是，我不知道用 C 编写的内置函数是否也是这种情况。

但请注意，切片也可能涉及函数调用，具体取决于所使用的对象。

# phpmyadmin - 即使 auth_type = cookie，phpmyadmin 登录也固定为 http

> ID：13270893
> 
> 赞同：0
> 
> 时间：2012-11-07T13:35:35.227
> 
> 标签：phpmyadmin

我已经重新安装了 RHEL6（也尝试使用 CENTOS6），当我安装 phpmyadmin（来自 epel）并且`cp config.sample.inc.php config.inc.php`，将河豚更改为大约 12 个字符长的随机内容并检查`auth_type = cookie`时，它只会弹出一个 HTTP 基本身份验证表单，而不是html表单。

我试过谷歌搜索，但似乎找不到答案。也尝试过设置`chmod 777`为 php session 文件夹。我什至尝试过重新启动:(有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:52:07.240

Your config.inc.php should look something like this:

```
 $cfg['blowfish_secret'] = 'xampp'; 
    $i = 0;
    $i++;
    $cfg['Servers'][$i]['auth_type']  = 'cookie';
/*more text below*/ 
```

For me this gives out the login form

![enter image description here](../Images/1e5c7aacd8eba7d50c7672734372aaa0.png)

# ruby-on-rails - 在 Rails 中，我可以将视图放在“供应商”目录中吗？

> ID：13270895
> 
> 赞同：2
> 
> 时间：2012-11-07T13:35:41.860
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我有一些想要放入的视图（布局、部分），`vendor/views`而`vendor/views/layouts`不是`app/views`. `assets`但是，只有和`plugins`放入的指南（和基本项目结构）暗示了这一点`vendor`。不过，我可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:48:59.097

我曾经操作过 view_path，Rails 正在那里寻找视图。我这样做是因为我需要有两个版本的视图。所以你可以做到的方式是操纵

ActionController::Base.view_paths = ["app/views", "app/views/my_app", "app/views/your_app"] 或 ActionController::Base.prepend_view_path "app/views/my_app"

但是正如这篇[博客文章](http://www.axehomeyg.com/2009/06/10/view-path-manipulation-for-rails-with-aop/)中提到的，你不应该因为它真的很贵（代码取自这篇文章）。如果您在帖子中进一步阅读，则会提供解决方案。也许这有助于作为一个起点。

# c - 2d 矩阵分配函数 segfault（参数返回的矩阵）

> ID：13270899
> 
> 赞同：2
> 
> 时间：2012-11-07T13:35:49.380
> 
> 标签：c, arrays, 2d, malloc, exc-bad-access

我在尝试编写分配有以下函数的矩阵的第二行（段错误`exc_bad_access`和）时遇到问题：`kern_invalid_address`

这是我的分配函数：

```
int amatrix(char*** m, const int i, const int j) 
{

    int k;

    (*m) = (char**) malloc(sizeof(char*) * i);
    if ((*m) == NULL) {
        return ERROR;
    }

    for (k = 0; k < i; k++) {
        (*m)[k] = (char*) malloc(sizeof(char) * j);
        if ((*m)[k] == NULL) {
            return ERROR;
        }
    }

    return SUCCESS;
} 
```

我使用以下方法调用它：

```
char** matrix;
if (amatrix(&matrix, i, j)) { ... 
```

**编辑：** 根据要求：

```
#define ERROR 00
#define SUCCESS 01 
```

问题出在的访问：

```
int gmatrix(char*** m, const int i, const int j)
{
int k, l;

for (k = 0; k < i; k++) {
    for (l = 0; l < j; l++) {
        printf("Matrix[%d][%d] = ", k, l);
        scanf(" %c", m[k][l]);
    }
}

return SUCCESS;
} 
```

感谢您的快速回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:19:26.307

Your `gmatrix` function should take `m` as a `char**` parameter, not `char***`, because it does not need to change its value like `amatrix` does (only what it points to).

Then you should change the scanf call to:

```
scanf(" %c", &m[k][l]); 
```

Your current code (with `char*** m`) doesn't work because `m[k]` will give undefined behavior when `k!=0`, because `m` points only to a single `char**`.

If `m` is a `char***`, the scanf call would need to look like:

```
scanf(" %c", &(*m)[k][l]); 
```

# php - 选择 onchange 问题

> ID：13270901
> 
> 赞同：2
> 
> 时间：2012-11-07T13:35:58.960
> 
> 标签：php, javascript, html

我正在研究品牌过滤器。当我从下拉列表中更改品牌名称时，我什么也得不到；似乎没有触发任何事件。

下面是我的代码：

```
<select onchange="location.href=[server.url type='fullpage' query='sort=price&brand=$brand']">

<?php 
  $brands = dfr_get_brands_list($category);
foreach ($brands as $brand) : ?>

       <option><?php echo $brand; ?></option>

<?php endforeach; ?>

</select> 
```

`[server.url type='fullpage' query='']`返回当前页面的完整 URL，例如：`http://www.mysite.com/store/category/shoes/`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:42:35.463

您不能混合使用 JavaScript 和 PHP。JavaScript 运行在客户端，PHP 运行在服务器上，它们不能一起运行。

打破 HTML 标记的逻辑并创建一个函数，调用该函数 onchange。清理代码，使其更易于阅读和维护。

您需要做的是更改代码以将品牌动态添加到 url 的末尾

```
function gotoPage(){
    var url = "theBaseUrlHere";
    var sel = document.getElementById("yourSelectId");
    var brand = sel.options[sel.selectedIndex].text;
    window.location.href = url + "&brand=" + brand;
} 
```

# html - Windows 8 Metro 应用程序中是否存在 2 个或更多后退按钮？

> ID：13270903
> 
> 赞同：0
> 
> 时间：2012-11-07T13:36:13.580
> 
> 标签：html, windows-8, microsoft-metro, winjs

嗨我有一个地铁应用程序，我试图在我的页面中使用 3 个按钮，第一个是默认后退按钮，一个是提交按钮，另一个是取消按钮。当我点击取消按钮页面需要重定向到之前页面意味着它必须像 Metro 后退按钮默认功能一样工作。我应该为这个取消按钮做什么，谁能帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:13:34.043

确保您已从 Navigation App 项目模板启动您的应用程序，因为它为您提供了导航框架。如果您没有这样做，并且您的应用程序很好并且需要添加导航，您可以通过关注我的博客文章[来](http://codefoster.com/Page-Navigation-in-Windows-8-JavaScript-Apps)完成。

然后，您需要做的就是为该取消按钮编写一些 JavaScript 并使用 WinJS.Navigation.back()

在您的准备功能中，您可以使用类似...

```
element.querySelector("#myCancelButton").onclick = function(e) {
    WinJS.Navigation.back();
} 
```

希望有帮助。

# scala - 将 Scala String 转换为 StringContext 并虚拟转发引用

> ID：13270906
> 
> 赞同：2
> 
> 时间：2012-11-07T13:36:24.727
> 
> 标签：scala

在 Scala 2.10.0-RC1 中有一个很棒的特性，*[字符串插值](http://docs.scala-lang.org/sips/pending/string-interpolation.html)*。

这像这样工作：

```
scala> val x = 1
x: Int = 1

scala> val y = s"Interpolated String $x"
y: String = Interpolated String 1 
```

但是我正在用 Scala 构建一个内部 DSL，因此我需要处理一种*前向引用*。您已经想到了 DSL 的样子（用于文档生成）：

```
object Main {

  § > "Heading"

  § >> "Subheading"

  ++ txt """
    Lorem ipsum Abb. ${Main.fig.number} dolor sit amet, consetetur sadipscing elitr, sed diam
    nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
    sed diam voluptua.
  """

  val fig =
  ++ figure(
    src="https://...",
    desc="example figure"
  )
} 
```

但是这个问题在语义上看起来像这样：

```
object X {
  val y = s"$x with reverse reference"
  val x = 3
} 
```

这不起作用，因为实际上是前向引用。我可以写`x`为`lazy val`，但编译器会移动`x`并使其`y`可用。但是对于我的 DSL 设计`y`，`x` *必须*保留顺序！

到目前为止，我的解决方案是一个闭包，如下所示：

```
object X {
  val y = () => s"$x with reverse reference"
  val x = 3
} 
```

`X.y()`当*所有*变量都可用时，这允许我在最后调用。但缺点是，*“丑”*，没有域用户会懂这种魔法！域用户必须写这样的东西（但它有效！）：

```
++ txt (() => s"""
  Lorem ipsum Abb. ${Main.fig.number} dolor sit amet, consetetur sadipscing elitr, sed diam
  nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
  sed diam voluptua.
""") 
```

所以这个想法是将闭包魔法移动到我的 DSL api 中，但因此我需要`"$x with reverse reference"`像普通一样传递`String`并将这个字符串最后解析为`StringContext`(s"...")，它解析了`$`-references。但到目前为止，我什么也没找到，如何投射这个。总之我怎么能`"foo $x bar`投到`s"foo $x bar"`？

我[发现](http://dcsobral.blogspot.co.uk/2012/01/string-interpolation-on-scala-210.html)的是，如何个性化`StringContext`，但不知道如何使用它来解决我的问题：

```
scala> case class StringContext(parts: String*) {
     |   def rr (args: Any*) = scala.StringContext(parts: _*).s(args: _*)
     | }
defined class StringContext

scala> rr"hi"
res3: String = hi

scala> rr"hi $s"
res4: String = hi 1 
```

另一个想法是不那么“嘈杂”的 lambda 表示法，但我怎样才能写出类似（或类似）的东西：

```
++ txt => s"""... ${Main.fig.number} ...""" 
```

这样的符号是合理的。我不一定要编写自己的带有引用解析的字符串解析器。有人有什么鬼主意吗？

DSL api 在语义上是这样构建的：

```
object ++ {
  def txt (s: String) = ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:30:28.987

[有了这个问题](https://stackoverflow.com/questions/13307418/scala-variable-argument-list-with-call-by-name-possible/)的想法和解决方案，一个可能的解决方案看起来像这样（可在*Scala 2.10.0-RC2*上运行）：

```
implicit def byname_to_noarg[A](a: => A) = () => a

case class StringContext(parts: String*) {
  def $ (args: (() => Any)*) = () => {
    val unpacked = args.map(a => a())
    scala.StringContext(parts: _*).s(unpacked: _*)
  }
}

class A {
  def meth = "A's result"
}

object X {
  val y = $"foo $x bar ${z.meth}. Forward reference solved."
  val x = 3
  val z = new A
}

// Execute
X.y() 
```

谢谢你，雷克斯科尔！:)

# html-table - 设置检票口表中的列数

> ID：13270909
> 
> 赞同：0
> 
> 时间：2012-11-07T13:36:37.510
> 
> 标签：html-table, wicket, repeater

在过去的几天里，我一直在学习 wicket 6，但是尽管我已经看遍了所有内容，但我找不到这个看似简单的问题的答案。我有一个要在 html 表中显示的对象实体列表。该表将具有一定数量的列和未知数量的行。

所以

```
List myList=Arrays.asList(obj1, obj2, obj3, obj4) 
```

变成了一个 html 表：

```
col1  col2  col3

obj1  obj2  obj3
<br>obj4 
```

我已经尝试过 ListView 并尝试阅读一些检票口中继器类，但我看到的所有示例都使用每个表行的单个对象实体，一行中的每个单元格都包含一个实体字段值。在我的示例中，我希望每个单元格都有一个实体，并且能够定义列数，因此如果实体多于适合的数量，它们将显示在新行上。

有人可以帮助我提供一些适当的检票口类，这些检票口类可以将列表元素放入上面的表格中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:56:15.140

在制定我的第一个答案时，我遇到了[GridView](http://www.wicketframework.org/wicket-extensions/apidocs/wicket/extensions/markup/html/repeater/data/GridView.html)组件。它看起来非常适合您的问题，但我还没有完整地查看它。

# html - html 列表链接不起作用

> ID：13270910
> 
> 赞同：0
> 
> 时间：2012-11-07T13:36:47.787
> 
> 标签：html, css, html-lists

由于某种原因，我的导航列表不可点击（链接不起作用），并且无论我在#languagenav 类中键入的任何属性（即文本对齐：中心）它都不会显示任何结果。我究竟做错了什么？

网站链接：http: [//bit.ly/VSSoul](http://bit.ly/VSSoul)

HTML：

```
<div id="content">
        <div class="languagenav">
            <ul class="languagenav">
                <li>English - Spanish</li>
                <li><a href"./booksdictengger.html">English - German</a></li>
                <li><a href"./booksdictengfre.html">English - French</a></li>
            </ul>
        </div>
</div> 
```

CSS：

```
.languagenav li {
    display: inline;
    margin-left: 1em;
    font-size: 15pt;
    font-family: 'Dosis', Arial, sans-serif;
    font-weight: 500;
    color: #25271e;
}

.languagenav a {
    color: #6d0839; 
    text-decoration: none;
}

#languagenav {
    width: 100%;
    text-align: center;
} 
```

当我们在它的时候。对于每本书，文本相对于图像居中，如何使文本与图像顶部对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:38:40.157

您缺少一个`=`. 没有这个，你有无效的 HTML。

```
<a href"./booksdictengger.html"> 
```

应该：

```
<a href="./booksdictengger.html"> 
```

* * *

关于中心对齐问题，您的 CSS 规则`#languagenav`应该是`.languagenav`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:42:40.690

标签中没有等号`a`：`<a href=".`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T13:38:32.323

试试这样：

```
<div id="content">
    <div class="languagenav">
        <ul class="languagenav">
            <li>English - Spanish</li>
            <li><a href="/booksdictengger.html">English - German</a></li>
            <li><a href="/booksdictengfre.html">English - French</a></li>
        </ul>
    </div>
</div> 
```

LE：锚的正确语法是：

```
<a href="#"></a> 
```

不是：

```
<a href""></a> 
```

你忘了等号。

# cakephp - cakephp模型中的条件验证

> ID：13270911
> 
> 赞同：2
> 
> 时间：2012-11-07T13:36:55.617
> 
> 标签：cakephp, cakephp-2.0

我想要有条件的验证，在更新我的密码字段时隐藏并且密码验证是“6到15个”字符！所以密码以哈希格式存储在数据库中，因此不允许我更新。我的型号代码如下，

```
<?php
class User extends AppModel {

    public $belongsTo = array(
        'Group',
        'City',
        'Area',
    );

    public $validate = array(
        'name' => array(
            'rule'     => 'alphaNumeric',
            'required' => true,
            'message'  => 'Only alphabets and numbers are allowed!'
        ),
        'email' => array(
            //~ 'rule1' => array(
                //~ 'rule' => 'isUnique',
                //~ 'message' => 'Email address already exists!',
                //~ 'last' => true
            //~ ),
            'rule2' => array(
                'rule' => 'email',
                'message' => 'Invalid Email!',
                'last' => true
            )
        ),
        //~ 'password' => array(
                //~ 'rule'    => array('between', 6, 15),
                //~ 'required' => true,
                //~ 'message' => 'Password must be of 6 to 15 characters'
        //~ ),
        //~ 'confirm_password' => array(
            //~ 'rule' => 'confirmPassword',
            //~ 'message' => 'Confirm password do not match!'
        //~ ),
        //~ 'address' => array(
            //~ 'allowEmpty' => false,
            //~ 'required' => true,
            //~ 'message'  => 'Description is required'
        //~ ),
        //~ 'phone_number' => array(
            //~ 'rule' => 'phone',
            //~ 'allowEmpty' => false,
            //~ 'required' => true,
            //~ 'message'  => 'Phone Number is required'
        //~ )
    );

    public function beforeSave() {
        if (isset($this->data[$this->alias]['password'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
        return true;
    }

    public function confirmPassword() {
        debug('model');
        if ($this->data[$this->alias]['confirm_password'] != '') {
            debug('model in');
            if(strcmp($this->data[$this->alias]['password'], $this->data[$this->alias]['confirm_password']) == 0) {
                debug('model in in');
                return true;
            }
        }
        return false;
    }

} 
```

我也有确认密码验证。所以告诉我任何条件验证的解决方案！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:14:19.657

您可以拥有多个 validates 数组，并在保存之前选择要使用的数组：

在模型中：

```
public $validate = array(
   // default validation rules
);

public $validateWithPassword = array(
   // validation rules including password validation
); 
```

现在，在您的控制器操作中，您可以选择使用以下密码字段进行验证：

```
$this->User->validate = $this->User->validateWithPassword; 
```

# javascript - 如何以多种方式设置引导弹出窗口的样式？

> ID：13270916
> 
> 赞同：4
> 
> 时间：2012-11-07T13:37:06.803
> 
> 标签：javascript, css, twitter-bootstrap, popover

我正在使用 Boostrap 编写单页网站。在图表中，我在鼠标悬停时有一些弹出窗口，效果很好。问题是当我尝试为弹出框设置多个样式时：即一些弹出框必须是黄色的，其他的必须是蓝色等。我尝试在 css 中添加新样式并在 html 中替换它（即：“popover2”），或者使用内联 css，但弹出框样式与弹出框脚本相关联，我看不到任何更改。我认为的“问题​​”从这里开始：

```
$.fn.popover = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('popover')
        , options = typeof option == 'object' && option
      if (!data) $this.data('popover', (data = new Popover(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.popover.Constructor = Popover

  $.fn.popover.defaults = $.extend({} , $.fn.tooltip.defaults, {
    placement: 'right'
  , trigger: 'click'
  , content: ''
  , template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
  })

}(window.jQuery); 
```

我什至尝试过复制 .js 并使用 popover2 作为新对象......没办法......任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:07:48.063

你可以很容易地用纯 HTML/CSS 做到这一点。弹出框出现在链接/按钮之后，这意味着您可以使用`+`CSS 中的选择器来定位它。您可以在这里尝试：

的HTML：

```
<a rel="popover" data-color="yellow" data-etc="...">My popover</a> 
```

的CSS：

```
[rel=popover][data-color=yellow] + .popover {
    background: yellow;
} 
```

编辑：它有效，这是[小提琴](http://jsfiddle.net/Calou/4cfHL/)。

# ios - 为什么每次添加新设备时都会出现多个 AdHoc 配置文件？

> ID：13270917
> 
> 赞同：4
> 
> 时间：2012-11-07T13:37:08.067
> 
> 标签：ios, ios6

(Xcode 4.5.2)

iOS 配置门户继续让我感到害怕。每次我将设备添加到我的 AdHoc 配置文件并在管理器中刷新它时，它都会添加另一个 AdHoc 条目而不是替换它。新条目具有正确的“团队”，但旧条目具有“未知”的“团队”。那些旧的为什么会留在身边？

当您处于项目的“代码签名”区域并且您有一堆相同的 AdHoc 配置文件可供选择时，这会让人感到非常困惑。

另外，我也有 10 个 iOS 团队配置文件。

这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:17:47.597

每次您将新设备添加到现有配置文件时，配置文件都会“重建”并且您从门户下载新设备。

管理器不会自动删除旧配置文件，因此当您导入新配置文件时，所有旧配置文件都会保留。但是你可以自己做！

打开管理器，配置配置文件，删除所有引用应用程序的 AdHoc 重复配置文件。然后，您可以导入新的（只需双击配置文件）。

# php - codeigniter datatable 将变量发送到数据表查询

> ID：13270920
> 
> 赞同：0
> 
> 时间：2012-11-07T13:37:17.850
> 
> 标签：php, javascript, json, codeigniter, datatable

我使用了库数据表和 codeigniter

我有一个变量

```
$afd = "1" 
```

在这个视图中我有一个 javascript

```
<script type="text/javascript" charset="utf-8">

$(document).ready(function() {
$('#datatables').dataTable( {
"bJQueryUI":true,

"bProcessing": true,

"bServerSide": true,

"sPaginationType":"full_numbers",

"sAjaxSource": "<?=base_url()?>index.php/report/report/ajax_view_panen/",

"aaSorting": [[ 0, "asc" ]]

});

});  </script> 
```

在控制器 codeigniter 中调用数据表。功能控制器是“ajax_view_panen”

这是我的控制器

```
function ajax_view_panen()
{
$this->load->library('Datatables');
$this->datatables->from('panen');
$this->datatables->select('id,jml_panen,hariff_blok_id,hariff_afdeling_id,tgl_panen,bulan');
$this->datatables->where('id', $afd);
echo $this->datatables->generate();
} 
```

问题是如何将变量发送`$afd`到我的控制器。所以变量在查询中`$this->datatables->where('id', $afd);`，所以数据表显示`id = 1`

对不起我的英语不好。

BR

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:49:05.900

最简单的方法是通过 CI 函数参数发送

```
function ajax_view_panen($afd)
{
  ...
  $this->datatables->where('id', $afd);
  echo $this->datatables->generate();
} 
```

所以您需要将此变量传递到您的视图中并调用正确的 url：

```
<script type="text/javascript" charset="utf-8">
...
"sAjaxSource": "<?=base_url()?>index.php/report/report/ajax_view_panen/<?=$afd?>",
...
</script> 
```

请注意，您可能需要清理输入以确保安全。

类似于`$afd = intval($afd)`如果那是一个数字参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:02:17.753

Serg 是正确的 您可以将值添加到 GET 变量列表中。

否则，如果要添加到帖子中：

```
$(document).ready(function() {
$('#datatables').dataTable( {
"bJQueryUI":true,
"bProcessing": true,
"bServerSide": true,
"sPaginationType":"full_numbers",
"sAjaxSource": "<?=base_url()?>index.php/report/report/ajax_view_panen/",
"aaSorting": [[ 0, "asc" ]],
"fnServerParams": function ( aoData ) {
        aoData.push( { "afd": "<? php echo $afd; ?>"} );
 }

});

}); 
```

# android - android TextView 删除隐式边距

> ID：13270923
> 
> 赞同：1
> 
> 时间：2012-11-07T13:37:22.073
> 
> 标签：android, margin, textview

好吧，这就是我所拥有的：

![在此处输入图像描述](../Images/e51160abd784fdaa8fa544b86f7ce187.png)

这就是我想要的：

![在此处输入图像描述](../Images/92d87205737067f44d5acd47130f2446.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <TextView
      android:layout_alignParentLeft="true"
      android:layout_alignParentTop="true"
      android:text="3"
      android:textSize="500px"
      android:includeFontPadding="false"
      android:paddingTop="0px"
      android:paddingBottom="0px"
      android:paddingLeft="0px"
      android:paddingRight="0px"
      android:layout_marginTop="0px"
      android:layout_marginBottom="0px"
      android:layout_marginLeft="0px"
      android:layout_marginRight="0px"
      android:background="@null"
      android:layout_width="match_parent"
      android:layout_height="match_parent" >
  </TextView>
</RelativeLayout> 
```

如您所见，我使用了所有已知的魔法：`includeFontPadding`、、`background="@null"`边距、填充等。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:49:07.520

您可以使用

```
 <TextView 
        android:id="@+id/text1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="3" 
        android:textSize="500px" 
android:background="@null"
        android:paddingTop="0px" 
        android:gravity="top">

    </TextView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:43:05.493

尝试给出高度和宽度来`wrap_contant`代替`match_parent`

# java - 渴望在 Hibernate 中使用 DetachedCriteria 获取嵌套对象

> ID：13270924
> 
> 赞同：7
> 
> 时间：2012-11-07T13:37:23.700
> 
> 标签：java, database, hibernate, detachedcriteria

我必须修改一个大型 Hibernate DetachedCriteria 查询来获取一些额外的关联。

我的对象图类似于下面的结构，我想获取与每辆汽车相关的销售额：

```
<class name="Showroom" table="showroom">
    ...
    <bag name="cars" lazy="false">
        <one-to-many class="Car" />
    </bag>
    ...
</class>

<class name="Car" table="car">
    ...
    <set name="sales" lazy="true">
        <one-to-many class="Sale" />
    </set>
    ...
</class> 
```

我想做的是：

```
DetachedCriteria criteria = DetachedCriteria.forClass(Showroom.class);
// ... Existing criteria query code ...
criteria.setFetchMode("cars.sales", FetchMode.JOIN); 
```

但是 setFetchMode 中的 associationPath 参数似乎忽略了点符号，我得到了一个 LazyInitializationException：

> 引起：org.hibernate.LazyInitializationException：未能延迟初始化角色集合：Car.sales，没有会话或会话已关闭

我四处搜索，到目前为止没有发现任何示例或信息。[Hibernate 文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-dynamicfetching)没有提供有关如何获取嵌套关联的示例，而 setFetchMode 的Javadoc[似乎](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Criteria.html#setFetchMode%28java.lang.String,%20org.hibernate.FetchMode%29)表明我的点符号方法应该有效......

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T10:29:53.683

```
DetachedCriteria dc = DetachedCriteria.forClass(ShowRoom.class, "showRoom");
criteria.setFetchMode("showRoom.cars", FetchMode.JOIN);
criteria.createAlias("showRoom.cars", "car", CriteriaSPecification.LEFT_JOIN);
criteria.setFetchMode("car.sales", FetchMode.JOIN); 
```

您不能在条件查询中链接属性。即使在 HQL 查询中，`cars.sales`也是无效的，因为它`cars`指的是一个集合，而不是 Car 的一个实例。为了能够引用汽车集合中的汽车，连接是必需的。这就是`createAlias()`调用的作用。以上类似于

```
select showRoom from ShowRoom
left join fetch showRoom.cars car
left join fetch car.sales 
```

# c# - Visual Studio 解决方案：获取与构建配置相关的项目

> ID：13270926
> 
> 赞同：0
> 
> 时间：2012-11-07T13:37:25.977
> 
> 标签：c#, configuration, visual-studio-2012, projects, solution

对于我们构建服务器上的构建后步骤，我想在与特定配置相关的 C# Visual Studio 2012 解决方案中获取所有项目。

这是一个示例 sln 文件：[pastebin](http://pastebin.com/Hya1s9E7)

该文件有两个项目：TestApplication1 和 TestApplication2，有两个配置：App1 和 App2。App1 将仅构建 TestApplication1，而 App2 仅构建 TestApplication2。

现在，当我说“显示配置 App1 I 的所有项目”时，想要返回 TestApplication1。
问题是我看不到任何指定应该在哪个配置下构建哪个项目的条目。sln 文件看起来每个项目都与每个配置相关。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:50:39.250

sln 文件中的 ProjectConfigurationPlatforms 全局部分应该包含该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:54:25.877

查看带有“Build.0”的行

为了检查这一点，您可以使用 Notepad++ 打开解决方案文件，将内容复制到新文档，在 VS 中更新您的构建配置，“保存所有文件”，在 Notepad++ 中重新加载解决方案文件，然后单击“ALT+D "以获取差异。

# java - 当 JVM 在运行时内存不足时会发生什么？

> ID：13270933
> 
> 赞同：20
> 
> 时间：2012-11-07T13:37:44.103
> 
> 标签：java, memory, memory-management, garbage-collection, jvm

在考虑了很长时间提出这个问题的通用方法（并且没有找到）之后，我只是将它作为一个具体的例子来问：

假设我有一台 Linux 机器，它有 1 Gb 的内存，它可以分配给进程（物理和交换总计 1 Gb）。

我在机器上安装了标准的 Oracle Hotspot JVM 版本 7。如果在给定时刻，有足够多的程序正在运行，使得 1 Gb 中只有 400 Mb 是空闲的，那么我此时使用以下 JVM 标志启动一个 Java 程序：

```
java -Xms256m -Xmx512m -jar myJar.jar 
```

发生了什么？：

A. JVM 是否无法立即启动，因为它将尝试分配所有 512 Mb 内存并失败（由于目前没有足够的可用内存）？

如果 JVM 启动：

如果在某个时候，正在运行的 Java 进程需要超过 400 Mb 的内存（并且除了当前 Java 进程已经使用的内存之外，仍然只有 400 Mb 的可用内存），将会发生什么：

B. Java 进程是否会因 OutOfMemroyError 而失败？

C. 它会因其他（标准）错误而失败吗？

D. 是未定义的行为吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T13:44:38.887

-Xmx 只是定义了堆的最大大小。它不能保证是否有这么多内存。它只确保堆永远不会大于给定值。也就是说，选项 B.) 将发生，将抛出 outOfMemoryError。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T13:43:23.193

> 假设我有一台 Linux 机器，它有 1 Gb 的内存，它可以分配给进程（物理和交换总计 1 Gb）。

我的第一反应是，除非您在谈论电话，否则我会获得更多内存。您可以以不到 100 美元的价格购买 16 GB（b = 位，B = 字节）。

> JVM 是否无法立即启动，因为它将尝试分配所有 512 Mb 内存并失败（由于目前没有足够的可用内存）？

如果您的系统没有 512 MB（加上一些开销），则可能会发生这种情况，因为它会在启动时分配用于堆的连续虚拟内存。

即使您有 550 MB 可用空间，程序也可能无法启动，因为它需要加载的不仅仅是堆。

> Java 进程会因 OutOfMemoryError 而失败吗？

如果您的程序在运行时使用 512 MB，则无论您的机器有多少内存，都会发生这种情况。此错误只会在您的 JVM 启动后发生。如果它无法启动，您将不会收到此错误。

> 它会因其他（标准）错误而失败吗？

如果您在程序启动后用完交换空间，这是可能的。这种情况很少见，而且只发生在严重超载的机器上。我所看到的是由于低级操作系统未能分配内存而导致 JVM 崩溃。

[Java 6 Update 25 VM 崩溃：内存不足](https://stackoverflow.com/questions/6344546/java-6-update-25-vm-crash-insufficient-memory)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:42:55.120

[`OutOfMemroyError`](http://docs.oracle.com/javase/6/docs/api/java/lang/OutOfMemoryError.html)将是*“当 Java 虚拟机因为内存不足而无法分配对象时抛出，并且垃圾收集器无法提供更多内存。”*

因此，本质上，*“B. Java 进程失败并显示`OutOfMemroyError`”*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T13:50:55.057

如果您占用的内存太多，以至于可用空间甚至无法维持空闲的 JVM，您会收到一些错误，说明程序没有足够的内存，或者 JVM 会崩溃。

如果可以运行 JVM，则可以使用 -Xmx 指定堆空间限制。这并不意味着所有堆都将在启动时由 JVM 分配 - 这只是一个内部限制。如果 JVM 想要增加堆空间，但是没有足够的内存，或者你需要比 -Xmx 指定的更多的堆，你会在当前运行的 Java 程序中得到 OutOfMemoryError。

在非常极端的情况下，您可能会在 JVM 运行时耗尽可用内存，同时 JVM 需要更多内存用于其内部操作（而不是堆空间） - 然后 JVM 会告诉您它需要更多内存，但无法得到任何，并终止，否则将彻底崩溃。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T13:49:35.873

JVM 进程将在虚拟内存中运行，因此其他进程运行的分配问题是相关的，但不是完全决定性的。

当 JVM 无法分配更多内存时（无论出于何种原因），进程本身不会终止，而是开始在 JVM`OutOfMemoryError` *内*抛出，而不是在 JVM 外部。换句话说，JVM 继续运行，但在 JVM 中运行的程序通常会失败，因为大多数程序没有充分处理低内存条件。在这种相当常见的情况下，当程序不做任何事情来处理错误时，JVM 将终止程序并退出。最终，这是来自内存分配，但不是直接如此。一段代码有可能在内存不足的情况下自行缩减并继续运行。

其他人指出，有时 JVM 本身不能很好地处理低内存，但这是一个非常极端的情况。

# android - PHP/mySQL 网站的 Android 应用程序端口 - 我应该使用 WebViews 吗？

> ID：13270935
> 
> 赞同：-1
> 
> 时间：2012-11-07T13:37:49.907
> 
> 标签：android, android-webview, leaflet

我正在学习如何为我的网站制作安卓应用程序。

我学会了如何制作菜单、导航等。我只是对执行我正在尝试开发的内容的最佳方式感到好奇。

所以..我的网站使用传单javascript映射框架在地图上显示输入邮政编码的给定距离内的机构。

本质上，我希望我的应用程序具有相同的功能，除了使用用户 GPS 位置。

根据我非常基础的知识/研究，Google Maps 直接与 android SDK 集成。但是我不想使用谷歌地图，因为它的使用限制等。

我是否正确地认为在我的应用程序中使用传单，唯一的方法是使用 WebView？如果没有，有哪些替代方案，哪个是最好的？

除上述内容外，在网站的网络版本上，您可以单击一个机构，它将带您进入详细信息/评论页面。

我知道有一种方法，但是再次简单地使用 webview 来加载我的网站的特定于应用程序的简化版本会更合乎逻辑吗？

其他可以添加到应用程序功能中的小东西 - 如果我想允许用户更新他们的个人资料等。这可以通过 webview 完成，但也可以通过表单和操作链接完成菜单..

基本上我的问题是，鉴于网络版本是用 PHP、mySQL 和 javascript 开发的。将它移植到简单的 android 应用程序的最佳方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:17:13.457

您可以尝试在 Android 中执行部分功能，并通过 http 连接重用网页的 php 模块。

您可以使用任何 Android 库或应用程序（如 Google Places（地图））开发传单功能。

# c# - 如何编写 3 个表的 LINQ 查询？

> ID：13270938
> 
> 赞同：1
> 
> 时间：2012-11-07T13:38:01.250
> 
> 标签：c#, linq

*   Table1 CAR (CARID, CarModelID ,CARuniqueinfo1, CARUniqueinfo2)：contians 所有的汽车都已入库。

*   表2 CarModel (CarModelID ,Modelinfo1 ,Modelinfo2 )

*   表 3 销售（SaleID、CarID、clientID、EmpID）

返回的 Linq 查询是什么：

仅针对 ModelID=101 的已售汽车数量

```
DataClassesDataContext db = new DataClassesDataContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:49:03.267

简单方法：

```
var result =
    db.Sale
        .GroupBy(item => item.CarId)
        .Select(item => new { item.Key, item.Count() }); 
```

不错的方法：

```
var result =
    from sale in db.Sale

    join car in db.CAR
    on car.CARID equals sale.CarID

    join carModel in db.CarModel
    on carModel.CarModelID equals car.CarModelID

    select new 
    { 
        Model = carModel,
        SoldCars = db.Sale.Count(item => item.CarID == car.CARID)
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:50:20.710

```
var counts = Model.GroupBy(m => m.CarModelID)
                  .Select(grp => ModelId = grp.Key, Count = grp.Count()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:58:55.170

```
private int GetCarsSoldCount(int modelId)
{
  return db.Sale.Count(x => x.CarID == modelId);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:58:59.327

```
 var r = from car in CarTable
                from sale in SalesTable
                where sale.CarID == car.CarID
                group sale by car.CarModelID into g
                select new { Model = g.Key, Count = g.Count() }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T13:44:13.523

假设您具有以下导航属性`Sale(CarID)`：

```
int all = db.Models
            .Where(m => m.Cars.SelectMany(c => c.Sales).Any())
            .Select(m => new {m.ModelID, m.Cars.Count}).ToArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T13:52:45.380

这个：

```
Dictionary<int, int> carsSold = new Dictionary<int, int>();
foreach (Car in Cars) {
 carrsold.Add(x => x.Id, Sales.Where(y => y.CarId == x.Id).Count());
} 
```

会给你一个字典，将汽车 ID 映射到销售量。

`carsSold[1]`将返回 id 为 1 的汽车售出的金额。

# vbscript - 使用 vbscript 连接在远程桌面上进行更改

> ID：13270943
> 
> 赞同：0
> 
> 时间：2012-11-07T13:38:15.707
> 
> 标签：vbscript, remote-desktop

我需要在远程桌面上工作并通过使用 vbscript 连接对其进行更改，这样做我使用下面的代码连接到远程桌面，但是我不知道如何在远程桌面上进行更改，我怎么能将命令发送到远程桌面而不是我的计算机。（当我尝试在远程桌面上打开命令提示符时，它会在我的计算机中打开）

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Set cloner = CreateObject("WScript.Shell")
cloner.run"mstsc"
'run remote desktop connection
WScript.Sleep 1000
cloner.SendKeys"Ip of the server"
cloner.SendKeys("{Enter}")
WScript.Sleep 1000
cloner.SendKeys"Password"
cloner.SendKeys("{Enter}")
WScript.Sleep 1000
cloner.run"cmd" 
```

对不起我的英语不好，感谢您的帮助！

# php - MySql 多个查询或临时表？

> ID：13270945
> 
> 赞同：1
> 
> 时间：2012-11-07T13:38:28.050
> 
> 标签：php, mysql, sql

我在这里需要 SQL 大师的帮助...

我有以下格式的数据：

```
Key  Value
100  A
100  B
300  A
400  B
500  A
500  B
500  C
600  B
600  W 
```

如果我想找到所有带有 A 或 B 以及 A 和 B 的键，而不是带有其他任何东西的 AB ......我该怎么做？我需要一个临时表还是可以以某种方式将表连接到自身？

编辑：所需的输出将是 Key 100，因为它具有 A 和 B，Key 300 因为它具有 A，Key 400 因为它具有 B。不是 Key 500，因为它还包含 C，而不是键 600，因为它还包含 W

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:01:55.883

这应该适合你：

```
SELECT DISTINCT t1.`key`
FROM table1 t1
WHERE t1.value in('A', 'B')
GROUP BY t1.`key`
HAVING COUNT(t1.value) = (SELECT COUNT(t2.value) 
                          FROM Table1 t2 
                          WHERE t1.`key` = t2.`key`) 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2ae08/25)

这仅返回键：

*   有`A`而且`B`只有，没有别的所以`key = 500`不应该被退回。但`key = 100`应该包括在内。
*   只有`A`. 如`key = 300`.
*   has only `B`so`key = 600`不应该返回，因为它包含的值比`B`is多一个`w`。但`key = 400`应该包括在内。

**更新：**这是如何工作的

如果任何键有一个值`IN('A', 'B')`，那么它也可以包含其他值。

这就是我添加该`HAVING`子句的原因：

```
HAVING COUNT(t1.value) = (SELECT COUNT(t2.value) 
                          FROM Table1 t2 
                          WHERE t1.`key` = t2.`key`) 
```

对于每个值，通过使用相关子查询，将 与同一键的值`COUNT(t1.value)`的总和进行比较。因此，如果当前键包含的值不是那么将不等于同一键的所有值。例如 key = 500 有一个 count = 3 但使用：`COUNT``SELECT COUNT(t2.value) FROM Table1 t2 WHERE t1.key = t2.key``t1.value``'A', 'B'``COUNT(t1.value)``COUNT`

```
SELECT DISTINCT t1.`key`
FROM table1 t1
WHERE t1.value in('A', 'B')
GROUP BY t1.`key` 
```

没有该`HAVING`子句也将包括它，因为它具有`A'`或“B”。但是该`HAVING`子句消除了这个键，因为它的计数 = 3 不等于 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:51:01.930

你应该更好地解释你的问题，如果我能正确理解你需要什么，你可以使用这样的东西：

```
SELECT Distinct K
FROM tab
WHERE
  value IN ('A', 'B') AND
  NOT EXISTS (SELECT Null from tab tab_1
              WHERE tab_1.K = tab.K and tab_1.value not in ('A', 'B')) 
```

# android - 尽管 Theme.NoTitleBar.Fullscreen 仍然出现状态/通知栏

> ID：13270949
> 
> 赞同：2
> 
> 时间：2012-11-07T13:38:31.087
> 
> 标签：android, notifications, android-manifest, android-notifications, android-notification-bar

在我的 AndroidManifest.xml 中，我使用`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`了应用程序标记中的属性。当我从应用程序菜单启动我的应用程序时，它可以工作：标题栏和状态栏都被隐藏并且应用程序使用全屏。

但是，当我在启动时启动我的应用程序（它是默认主屏幕），该应用程序仍然使用全屏，但状态栏是可见的。

看起来我的应用程序正在后台运行。在同一个应用程序中启动新活动不会改变这种行为。我需要重新启动应用程序才能隐藏状态栏。

有什么解决办法吗？

使用安卓 2.3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:29:31.870

我发现了问题！我已经覆盖了以下方法：

```
@Override
public void onAttachedToWindow()
{  
    System.out.println("Onactivity attached :");
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
} 
```

似乎`TYPE_KEYGUARD`在第一个活动中设置窗口类型会导致麻烦。我将代码放入另一个活动中，现在它可以工作了，状态栏永远不会显示:)

# opencart - 为什么 OpenCart SubTotal 和 Order Total 会出现两次？

> ID：13270956
> 
> 赞同：10
> 
> 时间：2012-11-07T13:38:52.510
> 
> 标签：opencart

我已经安装了 OpenCart。购物车页面显示 Total 和 Subtotal 两次。它也不会显示最终的总计。即使客户尚未将其添加到购物车，礼券也会出现。他们是一个解决方案吗？我需要在管理员中编辑我的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T12:18:41.760

小计用于不包括任何税金或增值税的主要价格，总计显示最终价格，包括所有税金、增值税和礼券或优惠券。

并且可能您还没有从 vqmod 清除缓存，因此它可能会与您的价格和您放置的价格地点相冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T10:53:20.297

假设小计在总计之前排序。这将检查它们是否具有相同的值。

```
<file path="catalog/controller/" name="checkout/cart.php,checkout/confirm.php,module/cart.php">
    <operation>
        <search position="before"><![CDATA[
        $this->data['totals'] = $total_data;
        ]]></search>
        <add><![CDATA[
        // Remove sub-total is same as total
        foreach($total_data as $i => $result){
            if($result['code'] == 'sub_total' && $total_data[$i+1]['code'] == 'total' && $result['value'] == $total_data[$i+1]['value']){
                unset($total_data[$i]);
            }
        }
      ]]></add>
    </operation>
</file> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:34:57.247

检查您在“订单总额”下的设置可能是值得的。在管理员中，转到“扩展”->“订单总计”。在那里，您可以查看、编辑和排序各种订单总额。如果您无法立即看到您的副本是哪一个，那么可能一次禁用它们，然后在结帐时查看结果，然后您就可以看到这些总数中的哪一个是您不想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T23:40:14.207

小计是您的产品成本，总计是含税或增值税的金额。

# css - 如何增加挂毯中复选框的高度和宽度

> ID：13270957
> 
> 赞同：0
> 
> 时间：2012-11-07T13:38:52.403
> 
> 标签：css

> **可能重复：**
> [复选框大小](https://stackoverflow.com/questions/306924/checkbox-size)

我正在使用挂毯为 iphone 开发 Web 应用程序。我在我的注册页面中使用复选框。

请任何人说如何增加复选框的宽度和高度。

# c# - 模拟 ExchangeServer Web 服务

> ID：13270962
> 
> 赞同：1
> 
> 时间：2012-11-07T13:38:57.330
> 
> 标签：c#, web-services, exchangewebservices, exchange-server

如您所知，Win7 Outlook 可以连接到 ExchangeServer。 [http://www.washington.edu/itconnect/wares/uwexchange/outlook2010.html](http://www.washington.edu/itconnect/wares/uwexchange/outlook2010.html)

我想用 C# 开发服务器应用程序，Outlook 也可以连接到该应用程序。所有这些都是为了将​​我的服务器数据（联系人、日历、任务等）与 Outlook 同步。

我所知道的是 ExchangeServer 使用 EWS 进行客户端通信。我可以开发基于 EWS 托管 API 的 Web 服务来与 Outlook 通信/同步吗？

如果不能，其他选项是什么（托管或非托管代码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:28:13.797

是的，您可以模拟/模拟 EWS API 以实现您的目标。但是有几件事您可能想看看 - 1\. Outlook 使用 MAPI API 与 Exchange 连接，所以我不确定 Outlook 是否内置了 EWS 客户端？我最好的猜测是它没有。

在这种情况下，这就是您需要做的 - 1\. 创建一个使用 ews 客户端 API 同步联系人/日历等的 Outlook 插件。 2\. 创建将与该客户端对话并执行同步内容的 ews 服务。

或者，您也可以在两端使用 activesync api，但 EWS 是您更好的选择，因为您将获得大量社区支持。

虽然看起来有点困难，但实际上并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:44:08.440

我看不出为什么不能这样做——毕竟，GMail 模拟了 Exchange ActiveSync 协议。

不过，您可能会发现这非常困难。

一个合理的起点可能是捕获和分析 Outlook 和 Exchange 之间的一些网络流量，以了解您面临的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:32:51.370

是的，您可以使用我认为用 C# 编写的 EWS 托管 API，并使用请求您需要的所有数据。然后，您可以将从 EWS 调用获得的响应包装在您自己的 RESTful/SOAP Web 服务中，您可以将其公开给需要使用它的任何人。

如果您只想获取供您个人使用的数据，那么您可能不需要将 EWS 托管 API 调用包装在您自己的 Web 服务中。只需将您从 Exchange 获得的结果用于您需要的任何内容。

另一种选择是使用开箱即用的 Exchange 附带的 WEB 服务。(http://msdn.microsoft.com/en-us/library/bb421489(v=exchg.80).aspx) 它是一个 SOAP Web 服务，并提供与托管 API 和它相同的所有功能会给你你的网络服务。我使用过 EWS SOAP Web 服务，发现它非常强大并且有大量的在线支持

# ios - iOS 中的音频信号处理

> ID：13270963
> 
> 赞同：4
> 
> 时间：2012-11-07T13:38:59.683
> 
> 标签：ios, signal-processing, audio

我即将开始开发用于音频处理的 iOS 应用程序。目前还不太确定申请的要求是什么，因为这是一个研究项目。但基本要求至少是从麦克风输入检测线、现场。因此，我重视您对您认为对此类工作有益的可用库的意见。我想尽可能远离第三方图书馆。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T13:48:11.783

我建议使用 Novocaine 库。如果您从头开始自己做音频，那真的很痛苦……

[https://github.com/alexbw/novocaine](https://github.com/alexbw/novocaine)

## 他们是这样说的：

在 iOS 和 Mac OS X 中使用 Audio Units 实现真正快速的音频很难，而且会让你伤痕累累。过去需要几天的时间现在只需几行代码即可完成。

## 获取音频

```
Novocaine *audioManager = [Novocaine audioManager];
[audioManager setInputBlock:^(float *newAudio, UInt32 numSamples, UInt32 numChannels) {
    // Now you're getting audio from the microphone every 20 milliseconds or so. How's that for easy?
    // Audio comes in interleaved, so,
    // if numChannels = 2, newAudio[0] is channel 1, newAudio[1] is channel 2, newAudio[2] is channel 1, etc.
}]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T13:43:37.133

我使用音频单元。
没有第三方的东西，只有普通的音频单元，这是 iOS 上最好的音频接口。
开始有点棘手，但阅读文档，你会很高兴的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T01:46:10.583

音频图 ( [https://github.com/tkzic/audiograph](https://github.com/tkzic/audiograph) ) 演示了如何从麦克风、音频文件和 MIDI 文件中读取音频。它还在时域和频域中处理它们（对于和弦检测，您可能需要在频域中进行一些分析）。作为 Apple 的 MixerHost 示例的修改，它不使用任何第三方库。

Apple 的Aurio Touch ( [https://developer.apple.com/library/ios/samplecode/aurioTouch2/Introduction/Intro.html](https://developer.apple.com/library/ios/samplecode/aurioTouch2/Introduction/Intro.html) ) 有点难学，但包含你需要开始的东西。而且这不涉及任何第三方库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T15:59:56.940

Core Audio 和 Accelerate 框架内置在 iOS 中。不需要任何 3rd 方库。苹果开发者网站上有很多文档。对于实时低延迟音频输入，请尝试同样内置于 iOS Core Audio 中的 RemoteIO 音频单元。

还有一本关于学习核心音频的书。

Accelerate 框架包含许多基本的 DSP 构建块，例如 FFT、矩阵数学和双二阶滤波器。

# c# - 在 Monotouch 中使用 CoolStorage 映射问题

> ID：13270964
> 
> 赞同：1
> 
> 时间：2012-11-07T13:39:02.230
> 
> 标签：c#, xamarin.ios, one-to-many, relationships, coolstorage

我正在使用 Monotouch 试用 Vici CoolStorage，但似乎遇到了人际关系方面的问题。使用以下内容，我尝试使用单个调查填充数据库，然后使用 for 循环生成 5 个问题的列表。

当我运行它时，似乎存在将问题映射到数据库中的调查的问题，因此，如果有人能告诉我我错过了什么，将不胜感激！给出的错误是“Vici.CoolStorage.CSException：无法读取关系调查”。

## 课程

```
[MapTo("Survey")]
public class Survey : CSObject<Survey, int>
{
    public int SurveyId { get { return (int)GetField ("SurveyId"); } }
    public string Title { get { return (string)GetField ("Title"); } set { SetField ("Title", value); } }
    public DateTime DateCreated { get { return (DateTime)GetField ("DateCreated"); } set { SetField ("DateCreated", value); } }
    public bool IsCurrent { get { return (bool)GetField ("IsCurrent"); } set { SetField ("IsCurrent", value); } }

    [OneToMany(LocalKey="SurveyId", ForeignKey="QuestionId")]
    public CSList<Question> Questions { get { return (CSList<Question>)GetField("Questions"); } }

}

[MapTo("Question")]
public class Question : CSObject<Question, int>
{
    public int QuestionId { get { return (int)GetField ("QuestionId"); } }
    public string Text { get { return (string)GetField ("Text"); } set { SetField ("Text", value); } }
    public int SurveyId { get { return (int)GetField ("SurveyId"); } }

    [ManyToOne(LocalKey="QuestionId", ForeignKey="SurveyId")]
    public Survey Survey { get { return (Survey)GetField ("Survey"); } set { SetField ("Survey", value); } }
} 
```

## 数据库表

```
CSDatabase.ExecuteNonQuery (@"CREATE TABLE Survey (SurveyId INTEGER PRIMARY KEY AUTOINCREMENT, Title TEXT(100) NOT NULL, DateCreated TEXT(50) NOT NULL, IsCurrent INTEGER)");
CSDatabase.ExecuteNonQuery (@"CREATE TABLE Question (QuestionId INTEGER PRIMARY KEY AUTOINCREMENT, Text TEXT(100) NOT NULL, SurveyId INTEGER REFERENCES Survey(SurveyId))"); 
```

## 环形

```
for (int i = 1; i <= 10; i++) 
{
            Question q = Question.New ();
            q.Text = String.Format ("Question {0}", i);
            survey.Questions.Add (q);
}
survey.Save(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:50:36.767

您尚未在映射字段中链接正确的外键。关系应声明为：

```
[OneToMany(LocalKey="SurveyId", ForeignKey="SurveyId")]
public CSList<Question> Questions ... 
```

和

```
[ManyToOne(LocalKey="SurveyId", ForeignKey="SurveyId")]
public Survey Survey... 
```

# sql - 如何在 tableAdapter.update vb 之后获取自动增量 ID

> ID：13270967
> 
> 赞同：0
> 
> 时间：2012-11-07T13:39:04.413
> 
> 标签：sql, vb.net, data-binding

我正在使用compactSQL。

我能够进行提交更改，但不知道如何将自动增量 ID 插入表中。

```
 Dim row As Integer = CustomerTableAdapter.Update(ArfDynamicsDataSet.Customer) 
```

该行显示在 db 中添加的行数，但我怎样才能获得新添加的 autoincement id。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:05:47.257

您可以获得最后一个 IDENTITY Insert "Using SCOPE_IDENTITY with CommandBuilder and DataAdapter"

在存储过程中：

```
CREATE PROCEDURE dbo.InsertCategory
  @CategoryName nvarchar(15),
  @Identity int OUT
AS
INSERT INTO Categories (CategoryName) VALUES(@CategoryName)
SET @Identity = SCOPE_IDENTITY() 
```

在 VB.net 中：

```
SqlParameter identParam = new SqlParameter("@Identity", SqlDbType.BigInt, 0, pKeyName);
identParam.Direction = ParameterDirection.Output; 
```

请查看以下链接：

[可以使用 SqlCommandBuilder（不使用存储过程）在插入时检索 IDENTITY 列值吗？](https://stackoverflow.com/questions/136536/possible-to-retrieve-identity-column-value-on-insert-using-sqlcommandbuilder-wi)

[http://www.codeproject.com/Tips/288850/Using-SCOPE_IDENTITY-with-CommandBuilder-and-DataA](http://www.codeproject.com/Tips/288850/Using-SCOPE_IDENTITY-with-CommandBuilder-and-DataA)

[http://msdn.microsoft.com/en-us/library/vstudio/ks9f57t0(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/vstudio/ks9f57t0(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

# regex - 无法获得正确的匹配开始和结束偏移

> ID：13270971
> 
> 赞同：0
> 
> 时间：2012-11-07T13:39:14.460
> 
> 标签：regex, perl

我有一个正则表达式如下：

```
$regex = qr/(?sx-im:(?sx-im:(?:^|(?<=\n)))(?=(?sx-im:[\ \t]*)(?sx-im:(?:^|(?<=\n))Data\ and\ value)(?sx-im:[\ \t\r]*(?:$|\n))))/; 
```

我将其与以下文本进行匹配：

```
$text ="Data and value"; 
```

现在我想获取匹配开始偏移量、匹配结束偏移量和匹配文本。

通常我使用`@-`,`@+`并`$&`得到这些如下：

```
if($text  =~ m/$regex/) 
{
        print "START Offset = ".$-[0];
        print "END Offsset  = ".$+[0];
        print "Matched Text = ".$&;
} 
```

在这种情况下，**匹配成功**，但我无法获得正确的偏移量和匹配的文本。它只是打印`0`为比赛开始偏移量和比赛结束偏移量。对于匹配的文本，它的打印为空。

我想了解这个正则表达式的不同组成部分。具体是什么`(?sx-im:`，以及**如何获得匹配的文本**。

请不要问我这种正则表达式的原因或建议我更改正则表达式。这是一个软件生成的正则表达式。为了提问，我简化了我的问题。

请指导我从哪里开始理解这个正则表达式并获得匹配偏移量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:49:15.560

`(?: ... )`是非捕获组。它不会创建反向引用。

同样，`(?= ... )`是一个零宽度的前瞻断言。它不包含匹配的字符串到`$&`.

请参阅[扩展模式](http://p3rl.org/perlre#Extended-Patterns)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:03:23.223

该错误存在于您的正则表达式中，而不是您对匹配偏移量的理解。它匹配字符串开头的零宽度字符串，并正确报告 0 的开始和结束偏移量。

现在*为什么*它匹配这是另一个好问题。您可以因此拆分正则表达式（未经测试）：

```
qr/(?sx-im:
  (?sx-im:(?:^|(?<=\n)))
  (?=(?sx-im:[\ \t]*)(?sx-im:(?:^|(?<=\n))Data\ and\ value)(?sx-im:[\ \t\r]*(?:$|\n)))
)/x 
```

你可以看到它的两个连续的部分：

*   第一个匹配行的开头或后面的匹配`\n`- 即两者都是零宽度。
*   第二个是一大堆东西的前瞻匹配，但同样是零宽度匹配。

您似乎试图用正则表达式做太多事情，特别是匹配行的开头和结尾。考虑逐行阅读您的源文件并处理单独的行，而不是尝试使用正则表达式完成所有操作。

# android - android每5分钟向服务器发布一些数据，即使在锁定屏幕时也是如此

> ID：13270985
> 
> 赞同：0
> 
> 时间：2012-11-07T13:40:09.683
> 
> 标签：android, service, lockscreen

我想每 5 分钟向服务器发布一次数据，但是当我锁定屏幕时，网络处于离线状态，我不确定我的服务是否正在运行。

连接不仅是WIFI，还有GPRS和3G。

有人解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:56:04.653

您应该设置警报（使用 AlarmManager），并使用 WakeLock 唤醒手机并执行您的操作，以确保您的操作发生（无论电话服务是否可用）。

这是一个关于此的线程（还有很多其他线程）：[AlarmManager 和 WakeLock](https://stackoverflow.com/questions/5362177/alarmmanager-and-wakelock)

与其他人的观点相反，这是完全合理的做法（假设您已经考虑了这些选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:43:37.913

您应该使用[WifiLock](http://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html)。即使屏幕变暗，连接也不会丢失。如果你想使用 3G，看[这里，特别是](https://stackoverflow.com/questions/4628058/partial-wakelock-for-3g-in-android)[CommonsWare](https://stackoverflow.com/users/115145/commonsware)的回答，你应该使用部分 WakeLock。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:50:21.110

做这样的事情不是一个好主意。您应该研究您的情况并确定何时真正需要发布一些数据。

看看[这个](https://stackoverflow.com/questions/13209639/use-android-application-class-run-a-thread-background-to-post-some-data-to-webse)也许对你有帮助。

# .net - 如何在 WinRT 应用程序中创建自签名证书？

> ID：13270988
> 
> 赞同：2
> 
> 时间：2012-11-07T13:40:21.590
> 
> 标签：.net, windows-runtime, x509, windows-store-apps

我正在尝试编写一个与 Windows Azure 的管理 API 通信的 WinRT 应用程序。为此，必须上传满足某些要求的证书，然后应用程序使用该证书对请求进行身份验证。

为了提供更好的用户体验，我希望能够为他们生成证书并配置应用程序以使用该证书。通常，我会访问`System.Security.Cryptography`命名空间，但它似乎无法从完整框架的“.NET for Windows Store app”子集中获得。

有什么想法可以在不调用外部服务的情况下创建这个自签名证书吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:41:26.663

虽然通常可以使用 CertEnrol COM 库（Windows 的一部分）创建证书，但沙盒 WinRT 环境中没有可用的内置机制。

唯一真正的解决方案是在外部进程（例如 ASP.NET 网站）中生成证书，然后通过 TLS 安全连接将证书及其私钥和密码作为 Base-64 编码字符串传输。

一旦编码数据在 WinRT 应用程序中可用，该[`ImportPfxDataAsync`](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.security.cryptography.certificates.certificateenrollmentmanager.importpfxdataasync)方法用于使证书可用于 WinRT 应用程序以供进一步使用。

有关在 .NET 代码中创建自签名证书的更多信息，请参阅[如何使用 C# 创建自签名证书？](https://stackoverflow.com/questions/13806299)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:11:00.547

您可能想要调查 Windows.Security.Cryptography.Certificates 命名空间。

# joomla - 将图像放在锚标签内

> ID：13270991
> 
> 赞同：1
> 
> 时间：2012-11-07T13:40:24.753
> 
> 标签：joomla, joomla1.5

我在 Joomla 中遇到问题。（我正在使用 Joomla 1.5）

当我在 Joomla 编辑器中编写这样的代码时：

```
[a tag href="www.something.com"][img src="modules/someimage.jpeg"/][/a] 
```

锚标签不来。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:15:55.693

试试这个。如果您遇到任何问题，请告诉我。

```
<a href="www.something.com"><img src="modules/someimage.jpeg" /></a> 
```

# jquery - 如何执行相当复杂的 RavenDB 查询并在结果中包含 Lucene 分数？

> ID：13270998
> 
> 赞同：8
> 
> 时间：2012-11-07T13:40:56.140
> 
> 标签：jquery, razor, ravendb

说我有以下`User`

```
public class User
{
    // ... lots of other stuff
    public string Id{ get; set; }
    public double Relevance { get; set; }
    public bool IsMentor { get; set; }
    public string JobRole { get; set; }
    public bool IsUnavailable { get; set; }
    public List<string> ExpertiseAreas { get; set; }
    public List<string> OrganisationalAreas { get; set; }
} 
```

现在我想执行搜索，以找到完全符合以下条件的所有用户：

*   `IsMentor`等于*真*
*   `IsUnavailable`等于*假*
*   `Id`不等于单个排除用户（进行搜索的人）

我还希望结果完全或部分匹配以下条件，但前提是提供了搜索词，否则我希望忽略约束。

*   `JobRole`= [*价值*]
*   `ExpertiseAreas`包含来自 [ *value-1* , *value-2* , *value-n* ]的项目
*   `OrganisationalAreas`包含来自 [ *value-1* , *value-2* , *value-n* ]的项目

从该查询返回的用户列表可能并不完全符合条件。有些会比其他匹配更好。所以我想根据它们的匹配程度来排序我的结果。

当我显示我的结果时，我希望给每个结果一个星级（1-5），表明用户与搜索的匹配程度。

我花了几天时间研究如何做到这一点。因此，我现在将回答我自己的问题，并希望为您节省一些精力。答案当然不会是完美的，所以，如果你能改进它，请这样做。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-07T13:40:56.140

首先，我需要一个包含我将要搜索的所有字段的 RavenDB 索引。这很简单。

**指数**

```
public class User_FindMentor : AbstractIndexCreationTask<User>
{
    public User_FindMentor()
    {
        Map = users => users.Select(user => new
        {
                user.Id,
                user.IsUnavailable,
                user.IsMentor,
                user.OrganisationalAreas,
                user.ExpertiseAreas,
                user.JobRole
        });
    }
} 
```

接下来我需要一个服务方法来执行查询。这就是所有魔法发生的地方。

**搜索服务**

```
public static Tuple<List<User>, RavenQueryStatistics> FindMentors(
        IDocumentSession db,
        string excludedUserId = null,
        string expertiseAreas = null,
        string jobRoles = null,
        string organisationalAreas = null,
        int take = 50)
{
    RavenQueryStatistics stats;
    var query = db
            .Advanced
            .LuceneQuery<User, RavenIndexes.User_FindMentor>()
            .Statistics(out stats)
            .Take(take)
            .WhereEquals("IsMentor", true).AndAlso()
            .WhereEquals("IsUnavailable", false).AndAlso()
            .Not.WhereEquals("Id", excludedUserId);

    if (expertiseAreas.HasValue())
        query = query
                .AndAlso()
                .WhereIn("ExpertiseAreas", expertiseAreas.SafeSplit());

    if (jobRoles.HasValue())
        query = query
                .AndAlso()
                .WhereIn("JobRole", jobRoles.SafeSplit());

    if (organisationalAreas.HasValue())
        query = query
                .AndAlso()
                .WhereIn("OrganisationalAreas", organisationalAreas.SafeSplit());

    var mentors = query.ToList();

    if (mentors.Count > 0)
    {
        var max = db.GetRelevance(mentors[0]);
        mentors.ForEach(mentor =>
                        mentor.Relevance = Math.Floor((db.GetRelevance(mentor)/max)*5));
    }

    return Tuple.Create(mentors, stats);
} 
```

请注意，在下面的代码片段中，我还*没有*编写自己的 Lucene 查询字符串生成器。事实上，我确实写了这个，它很漂亮，但后来我发现 RavenDB 有一个*更好*的流畅界面来构建动态查询。因此，请节省您的眼泪并从一开始就使用本机查询界面。

```
RavenQueryStatistics stats;
var query = db
        .Advanced
        .LuceneQuery<User, RavenIndexes.User_FindMentor>()
        .Statistics(out stats)
        .Take(take)
        .WhereEquals("IsMentor", true).AndAlso()
        .WhereEquals("IsUnavailable", false).AndAlso()
        .Not.WhereEquals("Id", excludedUserId); 
```

接下来您可以看到我正在检查搜索是否为查询的条件元素传递了任何值，例如：

```
if (expertiseAreas.HasValue())
    query = query
            .AndAlso()
            .WhereIn("ExpertiseAreas", expertiseAreas.SafeSplit()); 
```

这使用了一些我发现通常有用的扩展方法：

```
public static bool HasValue(this string candidate)
{
    return !string.IsNullOrEmpty(candidate);
}

public static bool IsEmpty(this string candidate)
{
    return string.IsNullOrEmpty(candidate);
}

public static string[] SafeSplit(this string commaDelimited)
{
    return commaDelimited.IsEmpty() ? new string[] { } : commaDelimited.Split(',');
} 
```

然后我们得到了`Relevance`计算每个结果的位。请记住，我想让我的结果显示 1 到 5 颗星，所以我希望我的相关性值在这个范围内归一化。为此，我必须找出最大相关性，在本例中是列表中第一个用户的值。这是因为如果您不指定排序顺序，Raven 会自动按相关性对结果进行排序 - 非常方便。

```
if (mentors.Count > 0)
{
    var max = db.GetRelevance(mentors[0]);
    mentors.ForEach(mentor =>
                    mentor.Relevance = Math.Floor((db.GetRelevance(mentor)/max)*5));
} 
```

提取相关性依赖于另一种扩展方法，该方法从 ravendb 文档的元数据中提取 lucene 分数，如下所示：

```
public static double GetRelevance<T>(this IDocumentSession db, T candidate)
{
    return db
        .Advanced
        .GetMetadataFor(candidate)
        .Value<double>("Temp-Index-Score");
} 
```

最后，我们使用新的小部件返回结果列表以及查询统计信息`Tuple`。如果您像我一样没有使用过之前的方法，那么它是一种在不使用参数`Tuple`的情况下从方法中发送多个值的简单方法。`out`就是这样。所以定义你的方法返回类型，然后使用'Tuple.Create()'，像这样：

```
public static Tuple<List<User>, RavenQueryStatistics> FindMentors(...)
{
    ...
    return Tuple.Create(mentors, stats);
} 
```

这就是查询。

但是我提到的那个很酷的星级呢？好吧，因为我是那种想要moon-on-a-stick 的编码员，所以我使用了一个不错的jQuery 插件，叫做[raty](http://www.wbotelhos.com/raty/)，它对我来说很好用。这是一些 HTML5 + razor + jQuery 给你的想法：

```
<div id="find-mentor-results"> 
    @foreach (User user in Model.Results)
    {
        ...stuff
        <div class="row">
            <img id="headshot" src="@user.Headshot" alt="headshot"/>
            <h5>@user.DisplayName</h5>
            <div class="star-rating" data-relevance="@user.Relevance"></div>
        </div> 
        ...stuff                       
    }
</div>

<script>
    $(function () {
        $('.star-rating').raty({
            readOnly: true,
            score: function () {
                return $(this).attr('data-relevance');
            }
        });
    });
</script> 
```

就是这样。有很多需要咀嚼，有很多需要改进。如果您认为有更好/更有效的方法，请不要退缩。

这是一些测试数据的屏幕截图：

![在此处输入图像描述](../Images/340ee892322f3db4efc89aeca71e33fb.png)

# silverlight - 隐藏silverlight控件和其他控件应该自动升档

> ID：13270999
> 
> 赞同：0
> 
> 时间：2012-11-07T13:40:57.577
> 
> 标签：silverlight

我有一个 silverlight 表单（xaml），上面有多个控件，如标签、文本框和网格，在某些情况下我必须隐藏一些控件，我正在这样做

```
ctrl.Visibility = Visibility.Collapsed; 
```

它从表单中隐藏了控件，但控件占用的空间不会缩小。我想要的是当这些控件被隐藏时，表单的其他控件将自动向上移动。

```
<controls:ChildWindow x:Class="IPVWorkbench.Views.CommentsDialog"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
           xmlns:telerikGrid="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.GridView"  
           xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"  
           xmlns:ipvmodel="clr-namespace:IPVWorkbench.Models"
           Width="557" Height="800" 
           Title="Comments" xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk">
    <Grid x:Name="LayoutRoot" Margin="2">
        <Grid.RowDefinitions>
            <RowDefinition Height="104" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="28" />
            <RowDefinition Height="72" />
            <RowDefinition Height="72" />
            <RowDefinition Height="50" />
            <RowDefinition Height="72" />
            <RowDefinition Height="72" />
            <RowDefinition Height="23" />
            <RowDefinition Height="32" />
            <RowDefinition Height="21*" />
        </Grid.RowDefinitions>

        <Button x:Name="CancelButton" Content="Cancel" Click="CancelButton_Click" Width="75" Height="23" HorizontalAlignment="Right" Margin="0,6,5,3" Grid.Row="9" TabIndex="8" />
        <Button x:Name="OKButton" Content="OK" Click="OKButton_Click" Width="75" Height="23" HorizontalAlignment="Left" Margin="373,6,0,3" Grid.Row="9" TabIndex="7" />
        <TextBox Height="45" HorizontalAlignment="Left" Grid.Row="3" Margin="34,0,0,11" Name="txtComments" VerticalAlignment="Bottom" Width="454" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" TabIndex="1" />
        <sdk:Label Height="28" Content="Comments:" Grid.Row="3" HorizontalAlignment="Left" Margin="34,0,0,0" Name="commentsLabel" VerticalAlignment="Top" Width="120" />
        <sdk:Label Height="17" Content="Trader Comments:" Grid.Row="7" HorizontalAlignment="Left" Margin="34,4,0,0" Name="traderCommentsLabel" VerticalAlignment="Top" Width="120" />
        <TextBox Height="36" HorizontalAlignment="Left" Grid.Row="7" Margin="34,22,0,0" Name="traderCommentsTextBox" VerticalAlignment="Top" Width="454" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" TabIndex="5" />
        <TextBlock Height="78" HorizontalAlignment="Left" Margin="34,12,0,0" Name="messageTextBox" Text="TextBlock" VerticalAlignment="Top" Width="454" />
        <CheckBox Content="Is Trader Review Complete?" Height="16" Grid.Row="8" HorizontalAlignment="Left" Margin="34,4,0,0" Name="isTraderReviewCompleteCheckBox" VerticalAlignment="Top" TabIndex="6" />
        <TextBox Height="40" HorizontalAlignment="Left" Grid.Row="6" Margin="34,24,0,0" Name="escalationCommentsTextBox" VerticalAlignment="Top" Width="454" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" TabIndex="4" />
        <sdk:Label Content="Escalation Comments:" Height="16" Grid.Row="6" HorizontalAlignment="Left" Margin="34,4,0,0" Name="escalationCommentsLabel" VerticalAlignment="Top" Width="120" />
        <ComboBox Height="23" HorizontalAlignment="Left" Grid.Row="5" Margin="34,22,0,0" Name="escalationReasonComboBox" VerticalAlignment="Top" Width="454" ItemsSource="{Binding EscalationEnum}" TabIndex="3" />
        <sdk:Label Content="Escalation Reason:" Height="23" Grid.Row="5" HorizontalAlignment="Left" Margin="34,4,0,0" Name="escalationReasonLabel" VerticalAlignment="Top" Width="120" />
        <TextBox Height="48" HorizontalAlignment="Left" Grid.Row="4" Margin="34,17,0,0" Name="txtUserNotes" VerticalAlignment="Top" Width="454" VerticalScrollBarVisibility="Auto" TabIndex="2" TextWrapping="Wrap" />
        <sdk:Label Height="25" HorizontalAlignment="Left" Grid.Row="4" Margin="34,0,0,0" Name="userNotesLabel" VerticalAlignment="Top" Width="102" Content="User Notes:" />
        <!--START: Added by Rohit Vyas for HPQC#1967-->
        <sdk:Label Content="Are you sure you want to send these positions for approval?" Height="18" HorizontalAlignment="Left" Margin="34,2,0,0" Grid.Row="2" Name="lblSure" VerticalAlignment="Top" Width="454" />
        <Grid x:Name="PositionNotTaken" Grid.Row="1" Visibility="Collapsed" >
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <sdk:Label Content="Positions That are not eligible:" Height="19" HorizontalAlignment="Left" Margin="34,2,0,0" Grid.Row="0" Name="lblpositionsNotValid" VerticalAlignment="Top" Width="285" />
        <telerikGrid:RadGridView x:FieldModifier="public" x:Name="EditableGV" AutoGenerateColumns="True" Margin="34,29,25,45" Height="141">

        </telerikGrid:RadGridView>
        </Grid>
        <!--END: Added by Rohit Vyas for HPQC#1967-->
    </Grid>
</controls:ChildWindow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T06:01:06.193

我遇到了同样的问题，我可以通过将我要隐藏的所有控件放在 StackPanel 中来完成上述操作。如果您将控件的可见性设置为 StackPanel 内的 Collapsed，则此面板会自动将下面的元素移动到顶部。