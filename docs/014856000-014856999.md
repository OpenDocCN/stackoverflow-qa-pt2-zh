# StackOverflow 问答 14856000-14856999

# wordpress - 如何在 212 主题的 wordpress 默认菜单中添加博客链接

> ID：14856003
> 
> 赞同：3
> 
> 时间：2013-02-13T14:39:57.567
> 
> 标签：wordpress, wordpress-theming

我开发了一个基于二十主题的新主题，实时链接在[这里](http://www.photokamp.com/) 我设置了一个静态页面作为主页。现在我需要将我的“博客”页面添加到主导航中。

我用谷歌搜索并做了所有的试验。但是一切都提供了我非常了解的自定义导航信息。

这里的案例是将默认的博客链接添加到主导航。

请帮帮我

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T09:47:02.130

它非常简单。创建一个名为“博客”的新页面。转到设置 -> 阅读。在“首页显示”下的“帖子页面”选择框中选择“博客”。单击“保存更改”。

而已。

# git - 哪个提交引入了文件？

> ID：14856004
> 
> 赞同：2
> 
> 时间：2013-02-13T14:39:59.533
> 
> 标签：git

我想找出哪个提交引入了一个文件。我目前正在做：

```
git log --reverse --pretty="%h" <filename> | head -n 1 
```

但我意识到这是非常昂贵的。有没有办法更快（使用更便宜的管道命令）？也许通过平分历史？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:24:09.997

这应该可以解决问题：

```
git log --oneline <filename> | tail -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:14:02.970

也许您不需要`git log`，而只是`git rev-list`：

```
git rev-list HEAD -- <filename> | tail -n 1 
```

或者

```
git rev-list --reverse HEAD -- <filename> | head -n 1 
```

与 基本相同的命令`git log`，但它只返回提交的 SHA-1，因此格式化日志消息的开销丢失了。与遍历历史相比，这种开销是否显着是另一个问题。

可以使用它`git rev-list --bisect`来实现您自己的二分搜索，但几乎可以肯定，重复调用`git rev-list`必要的方法比仅通过管道调用`head`or 或`tail`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T09:09:49.213

使用 diff-filter=A

```
git log --reverse --format=%H --name-status --diff-filter=A -- file1 file2 | grep ^A | cut -f2 
```

对于任意数量的文件，您将在一次遍历中获得所需的排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:43:39.123

如果您对添加文件的时间有一个粗略的了解，可以尝试

```
git log --reverse --until 2012-06-01 -n 1 -- <filename> 
```

如果您相当确定该文件不是在 2012 年 6 月 1 日之后引入的。`--reverse`和的组合`-n 1`仅显示早于给定日期的第一次提交。如果你没有得到任何结果，你的估计太早了，你需要稍后再试。

鉴于`git`存储历史的方式（使用有向无环图），我认为`git log`通过将较低级别的管道命令串在一起所需的工作量并不会显着增加。

# windows - 赢得批量正则表达式搜索和替换

> ID：14856009
> 
> 赞同：2
> 
> 时间：2013-02-13T14:40:23.293
> 
> 标签：windows, batch-file

我有一组这样的数据

> 7859 10000:00 7859 10000:00 (xfer#1, to-check=1033/1035)
> 
> 32768 000:17 22174479 10000:00（xfer#2，待检查=1032/1035）

它们是从文件中读取并逐行传递给我的批处理脚本中的方法我想要在该方法中做的只是提取

> 7859
> 
> 22174479

从这行来看，基本上是“\d+:\d\d\s+”之后的任何内容，然后是我需要的数字，然后是另一个“\d\d.*”

这是否可能仅使用批处理脚本正则表达式和搜索和替换？我尝试并阅读了一堆文章但找不到解决方案我想添加数字

谢谢

***编辑***
*根据 Andrei 对 David Ruhmann 的回答的评论，Andrei 想要之前 2 个位置的令牌`(xfer#`，而不是从一开始的第 3 个令牌。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:26:18.733

根据您对 David Ruhmann 的回答的评论，您需要在`(xfer#`字符串前 2 个位置的标记。我想它可以使用本机批处理命令来完成，但这是一个讨厌的问题。

我假设您仅限于 Windows 本机的命令 - 没有下载的可执行文件。

我希望您可以使用 JScript，因为它是 Windows 原生的。

我编写了一个名为“REPL.BAT”的混合 JScript/Batch 实用程序脚本，它执行正则表达式搜索和替换。尽管不需要太多代码，但它是一个非常有用的实用程序。该实用程序使解决方案非常简单。

我使用 FINDSTR 过滤掉在`(xfer#`. 我将这些结果通过管道传输到我的 REPL 实用程序并仅保留所需的令牌。结果被发送到标准输出。

```
findstr /r /c:" [^ ][^ ]* [^ ][^ ]* (xfer#" test.txt | repl ".* ([^ ]+) ([^ ]+) \(xfer#.*" "$1" 
```

这是 REPL.BAT 实用程序脚本的代码。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:10:53.647

**请注意，批处理不是用于正则表达式的最佳语言！Cmd 一次处理一行输入，而 regex 允许多行处理。**

听起来您只需要从线路中执行令牌抓取。假设该行的更完整的正则表达式看起来像这样`[\d+\s+\d+:\d\d\s+]+\(xfer#\d+, to-check=\d+/\d+\)`。

这让我们知道行中有常量分隔符。`:`冒号和`\s+`空格。从那里只需使用这些锚来确定令牌位置。

* * *

从该行中提取由单行空格分隔的第三个标记。

```
for /f "tokens=3" %%A in ("line") do echo %%A 
```

从行中由冒号分隔的第二个标记中提取由单行空格分隔的第二个标记。

```
for /f "tokens=2 delims=:" %%A in ("line") do (
    for /f "tokens=2" %%B in ("%%A") do echo %%B
) 
```

* * *

**更新**

提取最后一个冒号之前的第二个标记。

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
set "Line=32768 004:47 2686976 2200:03 11707819 10000:01 (xfer#5264, to-check=1020/6975)"

set "Last="
for /f "delims=" %%A in ('echo("%Line::="^&echo("%"') do (
    for /f "tokens=2" %%B in ("%%A") do (
        if defined This set "Last=!This!"
        set "This=%%B"
    )
)
echo %Last%

endlocal
pause >nul 
```

**限制**

1.  包含奇数个双引号的`"`行将导致脚本崩溃。防止这种情况的一种方法是在 for 循环之前用`set Line=%Line:"=%`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:18:04.100

完成您想要的最简单和最灵活的方法是使用GnuWin32 中的[awk](http://gnuwin32.sourceforge.net/packages/gawk.htm)（正则[表达式示例](http://www.math.utah.edu/docs/info/gawk_5.html)）或[sed](http://gnuwin32.sourceforge.net/packages/sed.htm)（例如`sed -i -r -e "s/(\d+:\d\d\s+)\d+/\1replacementstring/g" filename`：），它们都支持 Perl 正则表达式语法。我认为您所参与的正是 awk 的设计目的。

如果您只使用可用的东西而不必使用 3rd 方工具，您可以使用 vbscript 执行正则表达式匹配。您可以通过将脚本回显到 .vbs 文件、调用 cscript vbsfile 并捕获其输出来调用 vbscript。这是一个概念证明。

```
@echo off & setlocal enabledelayedexpansion

:: rxp.bat
:: rxp /? for usage instructions

if #%4==# goto usage
set global=false
set replace=false
for %%I in (%*) do (
    if not #!next!==# (
        if !next!==string set string=%%I
        if !next!==pattern set pattern=%%I
        if !next!==replace set replace=%%I
        set next=
    )
    if #%%I==#/s set next=string
    if #%%I==#/p set next=pattern
    if #%%I==#/r set next=replace
    if #%%I==#/g set global=true
)
if #%string==# goto usage
if #%pattern==# goto usage

set string=!string:"=""!
set string=!string:\=!
set pattern=!pattern:"=""!
set pattern=!pattern:\=!
if #!replace!==#false (
    call :rxp !string:~1,-1! !pattern:~1,-1! !global!
) else (
    set replace=!replace:"=""!
    set replace=!replace:\=!
    call :rxp !string:~1,-1! !pattern:~1,-1! !global! !replace:~1,-1!
)
goto :EOF

:rxp string pattern global replacement
echo Set rxp = New RegExp>regexp.vbs
echo rxp.Pattern = %2>>regexp.vbs
echo rxp.Global = %3>>regexp.vbs
if #%4==# (
    echo Set res = rxp.Execute^(%1^)>>regexp.vbs
    echo For Each match in res>>regexp.vbs
    echo Wscript.Echo match.value>>regexp.vbs
    echo Next>>regexp.vbs
) else (
    echo Wscript.echo rxp.Replace^(%1, %4^)>>regexp.vbs
)
cscript /nologo regexp.vbs
del /q regexp.vbs
goto :EOF

:usage
echo Usage: %~nx0 /s "string" /p "regexp" [/g] [/r "replacement text"]
echo;
echo    /s -- search string
echo;
echo    /p -- regular expression pattern
echo          Example: /p "<[^>]+>" to search for markup tags
echo          matches ^<span class='a'^> or similar
echo;
echo    /r -- replacement text (optional)
echo          If specified, replace the matched text
echo          Example: /p "(<div class=')blue('>)" /r "$1red$2"
echo          matches ^<div class='blue'^>
echo          replaces match with ^<div class='red'^>
echo;
echo    /g -- global match (optional)
echo          match every occurrence (matches only the first by default)
echo;
echo notes: If the regexp pattern includes capturing parentheses, use ^$1-^$9 as
echo backreferences in your replacement text.  If any of your strings include
echo quotation marks, they can be escaped with a backslash (\).
echo;
echo Example:
echo %~nx0 /s "text begin <div id=\"foo\"> text end" /p "(<div)[^>]+(>)"
echo /r "$1 class=\"bar\"$2"
echo;
echo matches ^<div id="foo"^>, replaces match with ^<div class="bar"^>
echo output: text begin ^<div class="bar"^> text end 
```

示例输出：

```
C:\Users\me\Desktop>rxp /s "7859 10000:00 7849 10000:00 (xfer#1, to-check=1033/1035)" /p "(\d+:\d\d\s+)\d+" /r "$1foo"
7859 10000:00 foo 10000:00 (xfer#1, to-check=1033/1035)

C:\Users\me\Desktop>rxp
Usage: rxp.bat /s "string" /p "regexp" [/g] [/r "replacement text"]

   /s -- search string

   /p -- regular expression pattern
         Example: /p "<[^>]+>" to search for markup tags
         matches <span class='a'> or similar

   /r -- replacement text (optional)
         If specified, replace the matched text

   /g -- global match (optional)
         match every occurrence (matches only the first by default)

notes: If the regexp pattern includes capturing parentheses, use $1-$9 as
backreferences in your replacement text.  If any of your strings include
quotation marks, they can be escaped with a backslash (\).

Example:
rxp.bat /s "text begin <div id=\"foo\"> text end" /p "(<div)[^>]+(>)"
/r "$1 class=\"bar\"$2"

matches <div id="foo">, replaces match with <div class="bar">
output: text begin <div class="bar"> text end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T02:53:52.320

```
 :: Does %variable% =~ s/old/new/
  setlocal ENABLEDELAYEDEXPANSION     
  for /f "delims=" %%a in ('echo !variable! ^|perl -pe "s/regexp/replace/" ') do set variable=%%a 
```

# c# - 事件发生时无时间间隔刷新 div 和 table

> ID：14856019
> 
> 赞同：0
> 
> 时间：2013-02-13T14:40:58.067
> 
> 标签：c#, jquery, asp.net, .net, ajax

我在 div 中使用表，表包含该记录的编辑和删除功能。当我删除该记录时，新数据必须填写表，我如何通过 ajax 和 jquery 来做到这一点。任何建议请..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:50:47.153

您应该将 onclick 事件处理程序添加到该 div 删除按钮。在处理该事件的函数中，您应该向某个“BlackBox”发出 Ajax 请求，该请求将返回带有“新鲜数据”的 JSON 作为结果，您将在 JavaScript 中使用它来填充您的表格。作为“黑盒”，它可以是一些 Web 服务、MVC 控制器操作（返回的不是视图而是 JSON）或其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T11:07:20.863

我建议您使用[jQuery dataTable](http://datatables.net/index)以获得更好的布局和大量的可能性。

当您使用 .Net 时，我强烈建议您使用 MVC 模式。

# python - Qt 4.8.4：无法将插槽连接到 QListView::currentChanged() 信号

> ID：14856020
> 
> 赞同：0
> 
> 时间：2013-02-13T14:41:07.817
> 
> 标签：python, qt, signals, pyside, qlistview

当使用自动连接将插槽连接到 QListView::currentChanged(current, previous) 信号时，我得到：

```
QMetaObject::connectSlotsByName: No matching signal for on_modelosView_currentChanged(QModelIndex,QModelIndex) 
```

不使用自动连接我得到：

```
AttributeError: 'builtin_function_or_method' object has no attribute 'connect' 
```

我正在使用 PySide，我的代码如下：

```
class Modelos(QtGui.QDialog):
def __init__(self, parent):
    QtGui.QDialog.__init__(self, parent)
    self.ui = Ui_Dialog()
    self.ui.setupUi(self)

    # Inicializa o modelo
    self.model = ModelosModel(self)
    self.ui.modelosView.setModel(self.model)
    # Inicializa o mapper
    self.mapper = QtGui.QDataWidgetMapper(self)
    self.mapper.setModel(self.model)
    self.mapper.addMapping(self.ui.modelosEdit, 0)
    self.mapper.toFirst()
    self.ui.modelosView.currentChanged.connect(self.onmodelosView_currentChanged)

@QtCore.Slot(QtCore.QModelIndex, QtCore.QModelIndex)
def onmodelosView_currentChanged(self, current, previous):
    self.mapper.setCurrentIndex(current.row()) 
```

其中：ModelosModel 是 QtAbstractListModel 的子类，modelosView 是 QListView 小部件。

我的目标是使用此信号更新映射器索引，以便用户可以在 QListView 中选择他想要的项目并使用映射器在 QPlainTextEdit 中对其进行编辑。

编辑：为了消除混淆，这是产生第一个错误的代码：

```
class Modelos(QtGui.QDialog):
def __init__(self, parent):
    QtGui.QDialog.__init__(self, parent)
    self.ui = Ui_Dialog()
    self.ui.setupUi(self)

    # Inicializa o modelo
    self.model = ModelosModel(self)
    self.ui.modelosView.setModel(self.model)
    # Inicializa o mapper
    self.mapper = QtGui.QDataWidgetMapper(self)
    self.mapper.setModel(self.model)
    self.mapper.addMapping(self.ui.modelosEdit, 0)
    self.mapper.toFirst()

@QtCore.Slot(QtCore.QModelIndex, QtCore.QModelIndex)
def on_modelosView_currentChanged(self, current, previous):
    self.mapper.setCurrentIndex(current.row()) 
```

我显然在使用自动连接功能，但出现错误：

```
QMetaObject::connectSlotsByName: No matching signal for on_modelosView_currentChanged(QModelIndex,QModelIndex) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:22:51.143

它不是来自你的`connect()`陈述，而是来自`setupUi()`。

默认情况下，`setupUi()`添加对 的调用，传递给的参数`QMetaObject::connectSignalsByName(widget)`在哪里（在您的情况下为：） 。`widget``setupUi()``self`

反过来，该调用将查找`self`名称类似于

```
on_ChildObjectName_SignalName 
```

并会尝试找出*是否`self`有一个名为的子对象`ChildObjectName`*（在`QObject::objectName()`; 如果是这样的话，*它会尝试将其连接`SignalName`*到那个插槽。显然你没有这样的事情。

长话短说：**除非****您`on_Child_Signal`**打算使用`connectSignalsByName`.

（另一方面，使用 Designer 创建的小部件非常方便：由于 Designer 总是为子小部件命名，您可以使用此功能轻松连接到它们的信号，只需创建一个名为的插槽`on_Child_Signal`，它就会神奇地工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T13:29:35.647

好的，我第十次检查文档，才意识到 QListView::currentChanged(...) 实际上是一个插槽而不是一个信号。我刚刚使用我需要的信号创建了 QListView 的自定义子类，并让 currentChanged 发出该信号。

# bash - bash 和 nohup 捕获

> ID：14856024
> 
> 赞同：0
> 
> 时间：2013-02-13T14:41:33.643
> 
> 标签：bash, shell

我有一个看起来像这样的 scp 脚本：

```
#!/bin/bash
scp -r /usr/local/htdocs/$1 httpd@$2:/local/htdocs 
```

我想从命令行调用它，并传递一个目录和目标服务器，类似于：

```
move_site.sh website  servername 
```

但是，我想在包含 2 个参数的文件中捕获输出。

所以我尝试了这个，但是在使用 nohup 调用时它没有打印任何内容

```
#!/bin/bash
scp -r /usr/local/htdocs/$1 httpd@$2:/local/htdocs > $1$1.out 
```

如何构建脚本和调用命令，使其在后台运行，并根据目标和站点捕获输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:46:41.647

如果要将两个或多个单词作为单个参数传递，则必须用引号括起来：

```
$ cat s.sh 
#!/bin/bash
echo "param1: $1, param2: $2" 
```

所以我们得到：

```
$ ./s.sh "a b" c
param1: a b, param2: c 
```

按照这个例子，你必须相应地调整你的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:00:29.720

您的脚本应该可以工作，但是尝试*scp*时可能出现错误，这就是您的输出文件为空的原因？要将错误消息也捕获到输出文件，请更改`>`为`>&`：

```
#!/bin/bash
scp -r /usr/local/htdocs/$1 httpd@$2:/local/htdocs >& $1$2.out 
```

要在后台运行脚本，只需`&`在命令末尾添加：

```
move_site.sh website  servername & 
```

PS*网站*和*服务器*`$1$2.out`名不应包含任何字符，如果您坚持在表格中使用它们，则文件名中不允许出现这些字符。

# c++ - 如何在执行之前配置 KDevelop 进行构建？

> ID：14856026
> 
> 赞同：5
> 
> 时间：2013-02-13T14:41:36.240
> 
> 标签：c++, kdevelop

在大多数 IDE（例如 Visual Studio、所有 Java IDE 等）中，默认情况下，源是在用户选择执行或调试应用程序时构建的。我如何配置 KDevelop 来做同样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T14:48:00.010

转到“运行”->“启动配置”菜单项。

您可以在那里配置启动配置，包括参数、工作目录等。

在底部，有一个依赖项块，您可以在其中指定应该在执行启动配置之前运行的构建目标。

# java - java.lang.ClassNotFoundException：net.sourceforge.jtds.jdbc.Drive

> ID：14856027
> 
> 赞同：0
> 
> 时间：2013-02-13T14:41:36.797
> 
> 标签：java, testng, jtds

我需要在我的 selenium 测试中连接到 SQL Server，我使用 jtds 1.3 驱动程序，我将它添加到我的项目的 Buildpath 中。

这是连接代码：

```
Class.forName("net.sourceforge.jtds.jdbc.Drive");
String url = "jdbc:jtds:sqlserver:localhost:1433/db_name;instance=SQLEXPRESS;"; 
final Connection con = DriverManager.getConnection(url, "login", "password"); 
```

但后来我运行我的项目，得到错误

```
java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Drive
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at com.SQLConnection.connectToSQL(SQLConnection.java:16)
at com.SqlRun.insert(SqlRun.java:58)
at com.SqlRun.insert(SqlRun.java:80)
at com.test.SQLRequest.checkTestPreconditions(SQLRequest.java:39)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:564)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:138)
at org.testng.TestRunner.beforeRun(TestRunner.java:641)
at org.testng.TestRunner.run(TestRunner.java:609)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
at org.testng.TestNG.run(TestNG.java:1036)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:43:18.357

接口的 jTDS 实现`java.sql.Driver`是`Driver`，不是`Drive`。

更改`Class#forName`方法参数应该可以解决问题：

```
Class.forName("net.sourceforge.jtds.jdbc.Driver"); 
```

# java - 如何在while循环中跳过迭代/循环

> ID：14856028
> 
> 赞同：23
> 
> 时间：2013-02-13T14:41:45.030
> 
> 标签：java

有没有一种优雅的方法可以跳过 while-loop 中的迭代？

我想做的是

```
 while(rs.next())
  {
    if(f.exists() && !f.isDirectory()){
      //then skip the iteration
     }
     else
     {
     //proceed
     }
  } 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-13T14:45:30.810

# `continue`

```
while(rs.next())
  {
    if(f.exists() && !f.isDirectory())
      continue;  //then skip the iteration

     else
     {
     //proceed
     }
  } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-13T14:46:06.790

虽然您可以使用 a `continue`，但为什么不直接反转 if 中的逻辑呢？

```
while(rs.next())
{
    if(!f.exists() || f.isDirectory()){
    //proceed
    }
} 
```

你甚至不需要，`else {continue;}`因为如果`if`条件不满足，它仍然会继续。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-13T14:42:57.297

尝试添加 `continue;`要跳过 1 次迭代的位置。

*与 break 关键字不同， continue 不会终止循环。相反，它跳到循环的下一个迭代，并停止执行该迭代中的任何进一步的语句。这允许我们绕过当前序列中的其余语句，而无需停止循环中的下一次迭代。*

[http://www.javacoffeebreak.com/articles/loopyjava/index.html](http://www.javacoffeebreak.com/articles/loopyjava/index.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-13T14:42:39.953

你正在寻找`continue;`声明。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-13T14:43:41.933

您不需要跳过迭代，因为它的其余部分在`else`语句中，它只会在条件不成立时执行。

但是如果你真的需要跳过它，你可以使用该`continue;`语句。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-13T14:45:27.060

```
while (rs.next())
{
  if (f.exists() && !f.isDirectory())
    continue;

  //proceed
} 
```

# java - 队列数组未编译 - 找不到符号错误

> ID：14856030
> 
> 赞同：1
> 
> 时间：2013-02-13T14:41:45.583
> 
> 标签：java

我试图让基数排序与队列数组一起使用，以避免冗长的 switch 语句，但我在正确初始化数组时遇到了一些麻烦。下面给出了构造函数和一个实现的例子。

当我尝试编译时，我只是得到一个找不到符号错误。

```
 public static radixj(){
    IntQueue[] buckets = new IntQueue[10];
    for (int i = 0; i < 10; i++)
    buckets[i] = new IntQueue();
   }

 public static void place(int temp, int marker)
 {
  int pos = temp % marker; 
  buckets[pos].put(temp);
 } 
```

我很确定这是我正在犯的一个非常简单的错误，但我找不到它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:44:10.547

在您的代码中

```
IntQueue[] buckets = new IntQueue[10]; 
```

是函数的局部变量

```
public static radixj() 
```

必须有一个返回类型

```
public static void radixj() 
```

所以你不能在另一个函数中使用它

```
buckets[pos].put(temp); 
```

您应该声明一个静态类变量

```
class Foo {
    static IntQueue[] buckets = new IntQueue[10];
    ... 
```

并使用以下方式访问它：`Foo.buckets`

```
class Foo {
    public static IntQueue[] buckets = new IntQueue[10];
    public static void radixj() {
        for (int i = 0; i < 10; i++) {
            Foo.buckets[i] = new IntQueue();
        }
    }

    public static void place(int temp, int marker) {
        int pos = temp % marker;
        Foo.buckets[pos].put(temp);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:45:43.383

`radixj()`缺少返回类型，`buckets`无法解析为变量

# python - 正则表达式 - 将 * 与一组字符一起使用

> ID：14856033
> 
> 赞同：2
> 
> 时间：2013-02-13T14:41:50.717
> 
> 标签：python, regex

我在正则表达式方面相当新，我遇到了一个我无法弄清楚的问题：

我正在尝试匹配以任意数量的 AZ、0-9 和 _ 字符开头的字符集，这些字符可以选择后跟一个括在一组括号中的数字，并且可以通过 a 与原始字符串分隔空间（或没有）

这应该找到的示例：

```
_ABCD1E
_123FD(13)
ABDF1G (2) 
```

这是我当前的正则表达式：

```
[A-Z_0-9]+\s*\({0,1}[\d]*\){0,1} 
```

它发现一切都很好，但是如果我有以下问题，就会出现问题：

```
_ABCDE ) 
```

它应该只抓取 _ABCDE 而不是“）”，但它当前抓取 '_ABCDE）'

如果整个模式不存在，是否有某种方法可以获取 (#) 但不会获得额外的字符？

如果可能的话，请解释我想要学习的语法，而不仅仅是得到答案。

答案：以下代码适用于我目前所需要的：

```
[A-Z_0-9]+(\s*\([\d]+\)){0,1}
# or, as has been mentioned, the above can be simplified
# and cleaned up a bit to be
[A-Z_0-9]+(\s*\(\d+\))?
# The [] around \d are unnecessary and {0,1} is equivalent to ? 
```

在 (#) 模式周围添加括号允许使用 ? 或整个模式上的 {0,1}。我还将 [\d]* 更改为 [\d]+ 以确保括号内至少有一个数字。

感谢您的快速回答，所有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:47:40.713

您的正则表达式表示每个括号（打开和关闭）可能独立存在也可能不存在。相反，您应该说 number-enclosed-in-parens 可能存在也可能不存在：

```
(\([\d]*\)){0,1} 
```

请注意，这允许括号中没有任何内容；这就是你的正则表达式所说的，但我不清楚这就是你真正想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:50:40.793

怎么样

```
^[A-Z0-9_]+\s*(\([0-9]+\))?$ 
```

顺便说一句，从你的例子中，第一部分不仅接受`[A-Z_]`，而且`[0-9]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:51:04.047

这似乎可以完成这项工作。

```
[1-9A-Z_]+\s*(?:\([1-9]*\))? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:52:32.567

您似乎想要以下正则表达式：

```
^[A-Z\d_]+(\s*\(\d+\))?$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T14:54:09.697

我使用了一个非捕获组来避免在结果中分组匹配：

```
>>> pattern = r'[A-Z_]+\s*(?:\(\d+\)|\d*)'
>>> l = ['_ABCD1E', '_123FD(13)', 'ABDF1G (2)', '_ABCDE )', 'A_B (15)', 'E (345']
>>> [re.search(pattern , i).group() for i in l]
['_ABCD1', '_123', 'ABDF1', '_ABCDE ', 'A_B (15)', 'E '] 
```

# sql - 触发器有时不会在更新和插入时触发

> ID：14856034
> 
> 赞同：2
> 
> 时间：2013-02-13T14:41:50.023
> 
> 标签：sql, triggers

我有两张桌子

第一个表 Listexecutionaction 由 no 组成。的行动。表结构如下

```
QueueId  ActionId  Executed
135      44         1
135      45         1
135      46         1
135      47         1
135      48         1 
```

第二个表 Listqueue 包含已完成的全部操作的摘要。结构如下

```
DDBMSKEY    NoOfActivities   Completed
135         5                3 
```

我的要求是对于 Listexecutionaction 表上的每个插入和更新，它应该计算 NoOfActivities 和完成的操作数。为此，我在 Listexecutionaction 的表上编写了触发器，如下所示。

```
ALTER TRIGGER [Common].[ActivityStatus_AfterInsertUpdate] ON  [Common].[ListExecutionAction] AFTER Insert,Update
AS 
BEGIN
    UPDATE COMMON.LISTQUEUE   
    SET 
        NOOFACTIVITIES=
                    (SELECT count(ID) FROM common.listexecutionaction WHERE queueid=lstact.queueid),
        Completed=
                    (SELECT count(ID) FROM common.listexecutionaction WHERE queueid=lstact.queueid And Executed=1)
    FROM common.listqueue lstqueue left join common.listexecutionaction lstact 
    ON lstqueue.DDBMSKey= lstact.queueid 
    WHERE lstqueue.DDBMSKey in (Select queueid from Inserted)

END 
```

我想要的表 Listqueue 的输出应该如下

```
DDBMSKEY  NoOfActivities  Completed
135       5               5 
```

但有时触发器正在计算错误的结果。完成的动作并给出结果为

```
DDBMSKEY  NoOfActivities  Completed
135       5               3 
```

请提出触发器中有什么问题。有时它工作正常，有时会失败。我想同时触发插入和更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:00:09.447

您的查询似乎可以简化为：

```
ALTER TRIGGER [Common].[ActivityStatus_AfterInsertUpdate] 
    ON  [Common].[ListExecutionAction] AFTER Insert,Update
    AS 
    BEGIN
        UPDATE COMMON.LISTQUEUE   
        SET 
            NOOFACTIVITIES=
                        (SELECT count(ID) 
                         FROM common.listexecutionaction 
                         WHERE queueid=lstact.queueid),
            Completed=
                        (SELECT count(ID) 
                         FROM common.listexecutionaction 
                         WHERE queueid=lstact.queueid And Executed=1)
        WHERE lstqueue.DDBMSKey in (Select queueid from Inserted)

    END 
```

我认为这不会解决问题，至少查询更短。

# r - 由两个变量组成的 data.table (.SD) 子集

> ID：14856036
> 
> 赞同：4
> 
> 时间：2013-02-13T14:41:56.687
> 
> 标签：r, data.table

我正在尝试重写我已经使用了一段时间的函数。简化是这样的：

```
dat = data.table(dataframe) 

getRecentRow <- function(data) {
    #Get most recent row (with highest time)
    row = data[order(-Time)][1]
    return(row)     
    }

# Run getRecentRow on each chunk given an ID
output = dat[,getRecentRow(.SD), by=ID] 
```

此功能为我提供每个 ID 的最新条目（因此具有最高的时间）。但是，对于每个 ID，可以有多个条目。这些条目可以用 SUBID 来区分。我想更深入地挖掘一个级别，而不是获取每个 ID 的最新条目，我想要每个 SUBID 的最新条目。由于 SUBID 不是唯一的，因此还必须考虑 ID。因此，我想要每个 ID、每个 SUBID 的最新条目。

总结：getRecentRow() 函数的输入不应按 ID 进行子集化，而应按 ID 和 SUBID 进行子集化。

我试过了：

```
dat = data.table(dataframe) 

    getRecentRow <- function(data) {
    #Get most recent row (with highest time)
    row = data[order(-Time)][1]
    return(row)     
    }

# Run getRecentRow on each chunk given an ID
output = dat[,getRecentRow(.SD), by=list(ID, SUBID)] 
```

但这会返回不正确的输出，输出更多所需的行。我认为重新制定这应该是一个简单的解决方法，`by=list(ID, SUBID)`但我不知道如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:41:58.913

问题不在函数中。该功能实际上一直在做它的工作。问题在于输入。ID 号有时会取一个非常大的值，导致由于某种原因拆分失败。将此数字转换为字符后。问题解决了，功能也很好。

# templates - XSL 页面链接

> ID：14856039
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:42:00.007
> 
> 标签：templates, xslt, href, apply-templates

我是 XSL 的新手，如果我的问题太简单，请原谅。

看代码

```
<table class="foot_table">
    <tr>
        <td>
            <div id="open_all">
            <a href="/shop/showall">show all</a>
            </div>
            </td>   
        <td>
<div id="producers_footer">
close
    </div>
</td>
</tr>
</table> 
```

所以我有页面 showall.xsl。如何将 xslt 模板与该页面连接？因为现在我的页面（showall）是空的。你能给我一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:59:34.887

不完全确定，但我认为您正在寻找 XSLT 处理器。XSLT 处理器获取源代码（在您的情况下为 html）并在其上执行 showall.xslt 并产生新的输出。

一些参考资料： [http :](http://www.xml.com/pub/a/2000/08/30/xsltandhtml/index.html) [//www.xml.com/pub/a/2000/08/30/xsltandhtml/index.html http://en.wikipedia.org/wiki/Category:XSLT_processors](http://en.wikipedia.org/wiki/Category:XSLT_processors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:36:20.303

您可以下载 Visual Studio Express 2012 的免费副本并在其中处理 xslt 和 xml。

# javascript - 迭代 ICanHaz.js / Mustache 中的根

> ID：14856045
> 
> 赞同：0
> 
> 时间：2013-02-13T14:42:12.523
> 
> 标签：javascript, jquery, mustache, icanhaz.js

我在使用 ICanHaz.js / Mustache 时遇到了迭代问题。我想遍历 JSON 结构的根并提取特定参数。这是我的 JSON：

```
{
"1": {
    "param1": "true",
    "param2": "false",
    "param3": "false",
    "targetMe": "ADMINUSERS"
},
"2": {
    "param1": "true",
    "param2": "false",
    "param3": "false",
    "targetMe": "ADMINUSERS"
},
"3": {
    "param1": "true",
    "param2": "false",
    "param3": "false",
    "targetMe": "ADMINUSERS"
}
} 
```

这是我的 ICanHaz 模板：

```
<script id="groupselect_template" type="text/html">
     {{ /. }}
        <option value="{{name}}">{{name}}</option>
     {{ /. }}
</script> 
```

这是我的 JS：

```
var iterationFunc = function(data) {
var temp = ich.groupselect_template(data);
$('#selectdiv').append(temp); 
```

}

我根据这些过去的答案（[here](https://stackoverflow.com/questions/11891123/mustache-js-iterate-over-a-list-received-via-json)、[here](https://stackoverflow.com/questions/11819006/mustache-js-template-with-json-collection)和[here](https://stackoverflow.com/questions/13399816/mustache-js-loop-through-json-data)）建立了这个结构，但我似乎无法让它发挥作用。任何人都可以帮忙吗？由于 ICH 里面有胡须，我知道更广泛的基于胡须的解决方案可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:25:15.323

我认为你不能在小胡子中轻松地遍历对象属性。但是你可以通过数组来做到这一点，所以如果可以的话，将你的 JSON 更改为类似

```
[{
    "param1": "true",
    "param2": "false",
    "param3": "false",
    "targetMe": "ADMINUSERS"
},{
    "param1": "true",
    "param2": "false",
    "param3": "false",
    "targetMe": "ADMINUSERS"
},{
    "param1": "true",
    "param2": "false",
    "param3": "false",
    "targetMe": "ADMINUSERS"
}] 
```

或者在将数据应用到模板之前，遍历它并将其更改为数组，例如使用 jQuery

```
var dataArray = [];
$.each(data, function(key, item){
    dataArray.push(item);
}); 
```

[这是](http://jsfiddle.net/Y8XBj/3/)一个工作小提琴

# java - 不同服务器上的 jruby 应用程序和 java 应用程序之间的通信

> ID：14856049
> 
> 赞同：0
> 
> 时间：2013-02-13T14:42:19.490
> 
> 标签：java, ruby-on-rails, ruby, jboss, jruby

任何人都有在（使用或其他）上`Jruby project`运行的经验，并且能够与不在 jruby 应用程序所在的同一个 jboss 上的另一个“japps”通信，即另一个 jboss 上的某个 java 项目？`Jboss``torquebox`

我知道有一个`torque-messanging`但不知道是否可以与外部（在 jruby-app 的 jboss 之外）应用程序通信？

欢迎最佳实践。
提前致谢。

PS 将其他应用程序放在 jruby 应用程序不可接受的解决方案的 jboss 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:49:55.940

我可以推荐你使用[Thrift](http://thrift.apache.org)并通过它们建立通信。

Thrift 为您需要的两种语言（Java 和 JRuby）提供生成器，并提供良好和快速的通信。

更新：Thrift 是 Facebook 开发的 RPC（远程过程调用）框架。[您可以在Wiki](http://en.wikipedia.org/wiki/Apache_Thrift)中详细了解它。

用几句话来节省您的时间，它是什么以及如何使用它：

您在 .thrift 文件（文件）中描述数据结构和服务接口。并从此文件生成一种或几种语言（您需要的）的所有需要​​的源文件（都需要序列化）。比你可以简单地用几行创建服务器和客户端

在客户端中使用它看起来就像你只使用简单的类。

使用 Thrift，您可以使用使用的协议和传输。在大多数情况下，通过阻塞或非阻塞传输使用二进制或紧凑协议。因此，网络通信将轻巧快速+快速序列化。

SOAP（基于 HTTP 上的 XML）包，它要大几倍，不适合发送二进制数据，但不仅如此。XML序列化也很慢。因此，使用 SOAP，您会收到很大的开销。同样使用soap，您需要编写（或使用第三方）lib 来调用服务器（微小的网络层），thrift 已经为您做好了。

SMTP 和基本上 JMS 不适合实时和问答通信。我的意思是，如果您只需要将一些消息放入队列中并且有人有时会给出此消息并处理它 - 您可以（并且应该）使用 JMS 或任何其他 MQ 服务（Thrift 可以这样做，但 MQ 架构更适合这个问题）。但是如果您需要实时查询-应答调用，您应该使用 RPC，作为协议，它可以是 HTTP（REST，SOAP）、二进制（Thrift、ProtoBuf、JDBC 等）或任何其他协议。Thrift（和 ProtoBuf）为生成客户端和服务器提供了框架，因此它可以将您从低级问题中封装起来。

PS：我在过去的[https://github.com/imysak/using-thrift](https://github.com/imysak/using-thrift)中做了一些例子（通过 Thrift Java 服务器 + Java 客户端或 node.js 客户端进行通信），也许它对某人有用。但是你可以找到更简单更好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:58:43.993

您可以为此使用 Web 服务或 JMS

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:14:31.627

Torquebox 支持 JMS。您指定的 gem`torquebox-messaging`允许在运行 JRuby 应用程序的本地 JBoss AS 服务器/集群上发布和处理 HornetQ 消息。我认为它目前不支持连接到远程服务器。

在您的 JRuby 应用程序中使用此功能，您可以在另一台服务器上配置您的 Java 应用程序，以与在 JRuby 应用程序运行的 JBoss AS 中运行的 HornetQ 通信。

或者，您总是可以实现自己的通信协议或使用另一个 Java 库——您可以访问任何想要从 JRuby 运行的 Java。

# html - 表溢出父 div

> ID：14856054
> 
> 赞同：2
> 
> 时间：2013-02-13T14:42:37.923
> 
> 标签：html, css, twitter-bootstrap, responsive-design

在[本页](http://festivals.ie/festival/list?types=HEADLINE&types=MUSIC&types=COMEDY&types=SPORT&types=ARTS&types=FILM&types=FOOD_AND_DRINK&types=OTHER&location=EUROPE)的主要内容区域，我使用的是 Bootstrap 提供的响应式网格。我希望表格占据一列而不是占据页面宽度的 75%，过滤器占据剩余的 25%，所以我将其标记为：

```
<div class="row-fluid">
    <div class="span9" id="table-container">
        <!-- table markup goes here -->
    </div>

    <div class="span3">
        <!-- filter markup goes here -->
    </div>
</div> 
```

但由于某种原因，表格水平溢出它的父元素（带有 ID `table-container`）并延伸到显示过滤器的列中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:47:53.133

`table-layout:fixed`将解决问题，但您需要设置列的宽度，这在响应式上下文中可能会很麻烦。

# css - 溢出隐藏 - 锚链接溢出内容

> ID：14856055
> 
> 赞同：0
> 
> 时间：2013-02-13T14:42:38.127
> 
> 标签：css

导航到以前的评论时，内容会溢出隐藏，请参阅链接。

示例： http: [//justfortest.cba.pl/misc/index.html](http://justfortest.cba.pl/misc/index.html)（显示完整内容） [http://justfortest.cba.pl/misc/index.html#comment-3](http://justfortest.cba.pl/misc/index.html#comment-3)（内容被剪切到锚链接）

我发现当我删除溢出时：隐藏；从 .content>div 然后内容没有溢出，但设计被破坏：背景问题和 div 太长。

去除溢出后：隐藏；（div长度和背景的问题）。justfortest.cba.pl/misc/index2.html#comment-3

更新：

这是内容部分的代码：

```
.content {padding: 40px 0; border-top: 5px solid #e3e4e6; border-bottom: 1px solid #d8d8d8; background: url("images/bg.png");}
.content>div { width: 980px; margin: 0 auto; border: 1px solid #d8d8d8; background: #fff;}
.main {float: left; overflow: hidden; width: 610px; margin-bottom: -5000px; padding: 15px 35px 5030px;}
.sidebar {float: right; width: 260px; margin-bottom: -5000px; padding: 15px 19px 5030px; border-left: 1px solid #e8e8e8; background: #fafbfc;} 
```

你能帮忙解决这个问题吗？

任何帮助将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:34:14.467

尝试这个

```
.main {
  float: left;
  margin-bottom: 0; /* from -5000px */
  overflow: hidden;
  padding: 15px 35px 30px; /* from 15px 35px 5030px */
  width: 610px;
} 
```

# asp.net-mvc-4 - 身份验证错误：密钥不能为空。参数名称：key

> ID：14856060
> 
> 赞同：0
> 
> 时间：2013-02-13T14:42:56.133
> 
> 标签：asp.net-mvc-4

我不断收到错误`Key cannot be null. Parameter name: key`。看起来它丢失了 authCookie，但`Request.IsAuthenticated` 仍然设置为 true。它快把我逼疯了。如果用户未登录，我也已经准备好处理。但错误仍然出现。

例如这里失败的地方

```
 @if (User.IsInRole("Admin"))
      {
        <button class="button-green white">Save</button>
      } 
```

但是如果查看用户拥有的属性，它仍然`IsAuthenticated = true`显示并且名称和角色也是正确的，并且票仍然有效。

这是调用堆栈

```
 System.ArgumentNullException was unhandled by user code
HResult=-2147467261
Message=Key cannot be null.
Parameter name: key
Source=System
ParamName=key
StackTrace:
at System.Collections.Specialized.HybridDictionary.get_Item(Object key)
at System.Web.Security.RolePrincipal.IsInRole(String role)
at ASP._Page_Views_Admin_EditText_cshtml.Execute() in d:\SubVersion\Oline\Project1\Source\Oline.Portal\Views\Admin\EditText.cshtml:line 78
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
at System.Web.WebPages.StartPage.RunPage()
at System.Web.WebPages.StartPage.ExecutePageHierarchy()
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
InnerException: 
```

这是我的自定义 RoleProvier

```
public override string[] GetRolesForUser(string username)
{
  var user = (string)HttpContext.Current.Session["UserRoles"];
  var ret = new[] { user };
  return ret;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:30:38.627

问题的解决方案是 this section`var user = (string)HttpContext.Current.Session["UserRoles"];`变为空。特别是我回去继续，在 Visual Studio 2012 中进行更改。感谢您的建议 :)

# character-encoding - 如何在 Aptana Studio 3 中将字符集更改为 CP1250？

> ID：14856062
> 
> 赞同：1
> 
> 时间：2013-02-13T14:42:59.610
> 
> 标签：character-encoding, aptana, cp1250

我使用带有 CP1250 字符集的 PSPad，现在我切换到 Aptana Studio 3，但我遇到了编码问题。是否可以向 Aptana 添加新字符集？因为，在 Aptana 中，字符集是 UTF-8、UTF-16 和 ISO-8859-1，但没有一个可以工作。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:19:47.077

您可以在 Project > Properties > Resource > Text File Encoding 下为您的项目设置编码。有一个从容器继承的选项，或者从下拉列表中选择（您也可以在此框中键入新的编码类型）。

[这个问题](https://stackoverflow.com/questions/8209144/solved-aptana-studio-3-on-mac-set-file-encoding-to-windows-1250)可能重复。

# php - PHP-MySQL 标记

> ID：14856065
> 
> 赞同：2
> 
> 时间：2013-02-13T14:43:09.413
> 
> 标签：php, mysql

我有一个漫画网站，目前允许用户按类别选择他们查看的漫画：图表、办公室、生活、杂项等。

我想实现一个标记系统，类似于我们在 StackOverflow 上的系统，它将更多地描述每部漫画的内容而不是其类别。例如：在图表类别中，我有几个与业务相关的...

我的简单解决方案是按照我处理分类的方式处理它 -

1.  使用 tagid、tagname、tagdescription 创建一个“Tags”表
2.  在漫画表中添加一个 tagid_ForeignKey 字段，并为每个帖子添加一个标签。
3.  当用户点击一个标签时，它只会显示那些带有该标签的帖子......或者如果还指定了一个类别，它将显示带有该特定标签的特定类别。

* * *

然而，这种方法似乎将我限制为每个类别一个标签。如果我有一个与业务和关系相关的漫画怎么办......所以它需要这两个标签。

我如何能够为每部漫画附加多个标签？

* * *

**编辑：**

还有几个问题：

1）我在我的新关系表中插入什么......什么？

2）另外，对于`while ($row = $tag->fetch_assoc()) {`，如果有一个连接，我如何循环遍历一个表？那不是关联数组吗？

3) 问题是我正在呼应标签选择，所以一旦用户点击一个链接，你怎么能允许他们点击另一个链接来分配第二个标签？

![在此处输入图像描述](../Images/8671f867ad9c23e19bbe805d0b23ba5e.png)

```
function getTags() {
include 'dbconnect.php';
global $site;

$tag = $mysqli->query("SELECT tagid, tagname FROM tags");   
//$tag = $mysqli->query("SELECT * FROM comics c INNER JOIN comictags ct ON (c.comicID = ct.comicID) WHERE ct.tag_id IN (1, 2, 3) GROUP BY c.comic_id");

mysqli_close($mysqli);

while ($row = $tag->fetch_assoc()) {        
    echo "<a href='?action=homepage&site=" . $site . "&tag=" . $row['tagid'] . "&tagname=" . $row['tagname'] . "'/>" . $row['tagname'] . "</a><br />";
  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T14:44:41.467

只需添加另一个表。然后你有三个：一个用于标签，一个用于漫画，一个用于关系。您必须拥有此间接表才能正确存储多对多关系。这允许每个漫画有零个或多个标签（反之亦然）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:46:02.243

您可以通过多对多关系来完成此操作。多对多关系使用如下所示的关系连接表：

```
+---------------+---------------+
|   comic_id    |     tag_id    |
+---------------+---------------+
|       1       |        2      |
+---------------+---------------+
|       1       |        3      |
+---------------+---------------+
|       1       |        4      |
+---------------+---------------+ 
```

现在，在您的查询中：

```
SELECT * FROM comics c INNER JOIN comic_tags ct ON (c.comic_id = ct.comic_id) WHERE ct.tag_id IN (1, 2, 3) GROUP BY c.comic_id 
```

其中 1、2、3 是用户选择他们希望看到的标签。

# ruby - 如何从目录中逐行打开和读取文件？

> ID：14856073
> 
> 赞同：2
> 
> 时间：2013-02-13T14:43:29.897
> 
> 标签：ruby

我正在尝试从包含大约 200 个文本文件的目录中读取文件行，但是，我无法让 Ruby 逐行读取它们。我以前做过，使用一个文本文件，而不是从目录中读取它们。

我可以将文件名作为字符串获取，但我很难打开它们并读取每一行。

以下是我尝试过的一些方法。

方法一：

```
def readdirectory
  @filearray = []
Dir.foreach('mydirectory') do |i|
 # puts i.class
    @filearray.push(i)
    @filearray.each do |s|
     # @words =IO.readlines('s')
      puts s
    end#do
 #   puts @words
end#do

end#readdirectory 
```

方法二：

```
def tryread
 Dir.foreach('mydir'){
   |x| IO.readlines(x)
 }

end#tryread 
```

方法三：

```
def tryread
 Dir.foreach('mydir') do |s|
   File.readlines(s).each do |line|
               sentence =line.split
   end#inner do

 end #do
end#tryread 
```

每次尝试打开循环函数传递的字符串时，我都会收到错误消息：

```
Permission denied - . (Errno::EACCES) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:04:40.780

感谢所有回复，我做了一些试验和错误并让它工作。这是我使用的语法

```
 Dir.entries('lemmatised').each do |s|
      if !File.directory?(s)

        file = File.open("pathname/#{s}", 'r')

        file.each_line do |line|
          count+=1
          @words<<line.split(/[^a-zA-Z]/)
        end # inner do
            puts @words
      end #if
    end #do 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T05:41:31.143

@the Tin Man -> 你需要避免处理“。” 和“..”列出`Dir.foreach`并给出权限被拒绝错误。一个简单的`if`应该解决你所有的方法。

```
Dir.foreach(ARGV[0]) do |f|
  if f != "." and f != ".."
    # code to process file
    # example
    # File.open(ARGV[0] + "\\" + f) do |file|
    # end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T13:46:30.993

试试这个，

```
#it'll hold the lines
f = []

#here test directory contains all the files,
#write the path as per the your computer,
#mine's as you can see, below

#fetch filenames and keep in sorted order
a = Dir.entries("c:/Users/lordsangram/desktop/test")

#read the files, line by line
Dir.chdir("c:/Users/lordsangram/desktop/test")

#beginning for i = 1, to ignore first two elements of array a,
#which has no associated file names
2.upto(a.length-1) do |i|
    File.readlines("#{a[i]}").each do |line|
        f.push(line)
    end  
end

f.each do |l|
    puts l
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:52:48.797

`sudo ruby reader.rb`或者你的文件名是什么。

由于权限是基于进程的，如果进程读取没有权限，则您无法读取具有提升权限的文件。

唯一的解决方案是运行具有更多权限的脚本，或者调用另一个已经在运行且具有更高权限的进程来为您读取。

# php - 致命错误：未定义的类常量

> ID：14856075
> 
> 赞同：17
> 
> 时间：2013-02-13T14:43:37.733
> 
> 标签：php, class, constants

所以我正在尝试使用[这个](http://www.phpclasses.org/package/7800-PHP-MySQL-database-access-wrapper-using-MySQLi.html)mysqli 连接类（下面的代码），但我收到错误消息：**致命错误：未定义的类常量 'DBUSER' [...]**我不知道为什么，因为我已经设置了所有数据库连接凭据并包含配置文件。

我的 db.config.class.php：

```
class config {

    public static $DBSERVER = "localhost"; // Set the IP or hostname of the database server you wish to connect to
    public static $DBNAME = "**REMOVED**"; // Set the name of the database you wish to connect to
    public static $DBUSER = "**REMOVED**"; // set the database user name you wish to use to connect to the database server
    public static $DBPASSWORD = "**REMOVED**"; // set the password for the username above
    public static $DBPORT = 3306;
    public static $TABLEPREFIX = "";

} 
```

mysqli.class.php：

```
include('db.config.class.php');

/**
 * My-SQL database class
 *
 * @name        mysql
 * @version     2
 * @author      Leigh Edwards
 * @category    PHP
 */

class Dbconnect {

    // leave blank if used for multiple users and call setUser method
    private $sqlUser = "";

    // leave blank if used for multiple users and call setPassword method
    private $sqlPassword = "";

    // set this to the database name you wish to use. If this class is used to access a number of Databases
    // leave blank and call the select method to select the desired database
    private $sqlDatabase = "";

    // set this to the database server address. If you are using this class to connect to differant server
    // leave blank and call the setHost method
    private $sqlHost = "";

    // Set this to the prefix of your tables if you set one while installing.
    // default = ""
    public $table_prefix = "";
    private $result; // Query result
    private $querycount; // Total queries executed
    private $linkid;

    /////////////////////////////////////////END CONFIG OPTIONS/////////////////////////////////////////////////////

    function __construct() {

        $this->loadDefaults ();

        $this->connect ( $this->sqlHost, $this->sqlUser, $this->sqlPassword, $this->sqlDatabase );

        $this->select ( $this->sqlDatabase );

    }

    /*
     * method to load the object with the defaut settings
     */

    private function loadDefaults() {
        $this->sqlUser = config::DBUSER;
        $this->sqlPassword = config::DBPASSWORD;
        $this->sqlHost = config::DBSERVER;
        $this->sqlDatabase = config::DBNAME;
        $this->table_prefix = config::TABLEPREFIX;
    }

    public function getResult() {

        return $this->result;

    }

    /**
     * method to return the prefix for the sql tables
     *
     * @return = string $this->table_prefix
     */

    public function get_tablePrefix() {

        return $this->table_prefix;

    }

    /**
     * function to return a string from within another string
     * found between $beginning and $ending
     *
     * @param string $source
     * @param string $beginning
     * @param string $ending
     * @param string $init_pos
     */

    function get_middle($source, $beginning, $ending, $init_pos) {

        $beginning_pos = strpos ( $source, $beginning, $init_pos );

        $middle_pos = $beginning_pos + strlen ( $beginning );

        $ending_pos = strpos ( $source, $ending, $beginning_pos + 1 );

        $middle = substr ( $source, $middle_pos, $ending_pos - $middle_pos );

        return $middle;

    }

    /**
     * method to connect to the MySQL database server.
     *
     * @param   string  $sqlHost
     * @param   string  $sqlUser
     * @param   string  $sqlPassword
     **/

    function connect($sqlHost, $sqlUser, $sqlPassword, $sqlDatabase) {
        try {
            $this->linkid = mysqli_connect ( $sqlHost, $sqlUser, $sqlPassword, $sqlDatabase, 3306 );
            if (! $this->linkid) {
                die ( 'Connect Error (' . mysqli_connect_errno () . ') ' . mysqli_connect_error () );
            }
        } catch ( Exception $e ) {
            die ( $e->getMessage () );
        }
    }

    /**
     * method to select the database to use
     * @param string $sqlDatabase
     */

    function select($sqlDatabase) {
        try {
            if (! @mysqli_select_db ( $sqlDatabase, $this->linkid )) {
                throw new Exception ( "The Selected Database Can Not Be Found On the Database Server. $sqlDatabase (E2)" );
            }
        } catch ( Exception $e ) {
            die ( $e->getMessage () );
        }
    }

    /**

     * method to query sql database
     * take mysql query string
     * returns false if no results or NULL result is returned by query
     * if query action is not expected to return results eg delete
     * returns false on sucess else returns result set
     *
     * NOTE: If you requier the the actual result set call one of the fetch methods
     *
     * @param string $query
     * @return boolian true or false
     */

    function query($query) {
        // ensure clean results
        unset ( $this->result );
        // make query
        $this->result = mysqli_query ( $query, $this->linkid );
        if (! $this->result) {
            echo "<br>Query faild: $query";
            return FALSE;
        } else {
            return true;
        }
    }

    /**
     * method to return the number of rows affected by the
     * last query exicuted
     * @return int
     */

    function affectedRows() {

        $count = mysqli_affected_rows ( $this->linkid );
        return $count;

    }

    /**
     * method to return the number of rows in the result set
     * returned by the last query
     */

    function numRows() {

        $count = @mysqli_num_rows ( $this->result );

        return $count;

    }

    /**
     * method to return the result row as an object
     * @return  object
     */

    function fetchObject() {

        $row = @mysqli_fetch_object ( $this->result );

        return $row;

    }

    /**
     * method to return the result row as an indexed array
     * @return array
     */

    function fetchRow() {

        $row = @mysqli_fetch_row ( $this->result );

        return $row;

    }

    /**
     * method to return the result row as an associative array.
     * @return array
     **/

    function fetchArray() {

        $row = @mysqli_fetch_array ( $this->result, mysqli_ASSOC );

        return $row;

    }

    /**
     * method to return total number queries executed during
     * the lifetime of this object.
     *
     * @return int
     */

    function numQueries() {

        return $this->querycount;

    }

    function setResult($resultSet) {

        $this->result = $resultSet;

    }

    /**
     * method to return the number of fields in a result set
     * @return int
     **/

    function numberFields() {

        return @mysqli_num_fields ( $this->result );

    }

    /**
     * method to return a field name given an integer offset
     * @return  string
     **/

    function fieldName($offset) {

        return @mysqli_field_name ( $this->result, $offset );

    }

    /**
     * method to return the results of the last query
     * in html table
     *
     * This method uses the $actions string to pass html code
     * this is added to the table to enable display of images or links
     * in the last columb of the table
     *
     * if boolian false is passed no html is add to the result table
     * $startCol sets the col to start displaying 0 being the first
     *
     * @param int $startCol
     * @param string or boolian false $actions
     * @return string containing html code to dispay the table
     */

    function getResultAsTable($startCol, $actions = "") {

        if ($this->numrows () > 0) {

            // Start the table
            $resultHTML = "<table width=\"80%\" border=\"0\" align=\"center\" cellpadding=\"1\" cellspacing=\"0\"><tr>";

            $resultHTML .= "<td><table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\"><tr>";

            $x = $startCol;

            // Output the table header
            $fieldCount = $this->numberFields ();

            for($i = $x; $i < $fieldCount; $i ++) {

                $rowName = $this->fieldName ( $i );

                $resultHTML .= "<th align=\"left\">$rowName</th>";

            }

            if (! $actions === false) {

                $resultHTML .= "<th align=\"left\">actions</th>";

            }

            $resultHTML .= "</tr>";

            while ( $row = $this->fetchRow () ) {

                $resultHTML .= "<tr>";

                for($i = $x; $i < $fieldCount; $i ++)

                    $resultHTML .= "<td align=\"left\">" . htmlentities ( $row [$i] ) . "</td>";

                if (! $actions === false) {

                    // Replace VALUE with the correct primary key
                    $action = str_replace ( "VALUE", $row [0], $actions );

                    $resultHTML .= "<td nowrap align=\"left\">$action</td>";

                }

                $resultHTML .= "</tr>";

            }

            $resultHTML .= "</table></td></tr></table>";

        } else {

            $resultHTML = "";

        }

        return $resultHTML;

    }

    /**
     * method to retun the value of a given colum using one where clause
     * @param $table
     * @param $col
     * @param $val1
     * @param $col2
     */

    function getRow($table, $col, $val1, $col2) {

        $query = "SELECT '$col2' FROM " . $this->table_prefix . $table . " WHERE $col = '$val1'";

        $this->query ( $query );

        $resultArray = $this->fetchArray ();

        return $resultArray [$col2];

    }

    /**
     * method to test if a row conatining $x in the feild $y exists in the given $table
     * method returns true or false
     * @param $table
     * @param $col
     * @param $val
     * @return boolian
     */

    function rowExistsInDB($table, $col, $val) {
        $this->query ( "SELECT $col FROM '" . $this->table_prefix . $table . "' WHERE '$col' = '$val'" );
        if ($this->numRows () > 0) {
            return true;
        } else {
            return false;
        }
    }

    function rowExistsInDB2($table, $col, $val, $col2, $val2) {

        $query = "SELECT " . $col . " FROM " . $this->table_prefix . $table . " WHERE " . $col . " = '" . mysqli_real_escape_string ( $val ) . "' AND " . $col2 . " = '" . mysqli_real_escape_string ( $val2 ) . "'";
        $this->query ( $query );
        if ($this->numRows () > 0) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * method to delete all rows where $col=$val in $table
     * returns int of number of affected rows or false on fail
     *
     * @param string $table
     * @param string $col
     * @param string $val
     * @return int
     */
    function deleteRow($table, $col, $val) {
        $this->query ( "DELETE FROM '" . $this->table_prefix . $table . "' WHERE '$col' = '$val'" );
        return $this->result;
    }

    // Misc methods to do some convertions and stuff

    // round or pad to 2 decimal points
    function formatNum($num, $dec = 2) {
        for($x = 0; $x <= 5; $x ++) {
            $num = sprintf ( "%01." . ($dec + $x) . "f", $num );
            return $num;
        }
    }
    /**
     * method to reverse the order of a given date
     * and fix to mysql date format
     * so DD/MM/YYYY becomes YYYY-MM-DD
     *
     * @param string $date
     * @return string
     */

    function revDate($date) {

        // first split the date string @ / int o three parts
        $dateArray = explode ( '/', $date, 3 );

        // then reorder them to YYY-MM-DD
        $revDate = array_reverse ( $dateArray );

        $i = 0;

        foreach ( $revDate as $eliment ) {

            $correctDate .= $eliment;

            if ($i < 2) {

                $correctDate .= "-";

            }

            $i ++;

        }

        return $correctDate;

    }

    /**
     * method to revers dates taken from sql database
     * so YYYY-MM-DD becomes DD/MM/YYYY
     *
     * @param string $date
     * @return string
     */

    function revSqlDate($date) {

        // first split the date string @ / int o three parts
        $dateArray = explode ( '-', $date, 3 );

        // then reorder them to DD/MM/YYYY
        $revDate = array_reverse ( $dateArray );

        $i = 0;

        foreach ( $revDate as $eliment ) {

            $correctDate .= $eliment;

            if ($i < 2) {

                $correctDate .= "/";

            }

            $i ++;

        }

        return $correctDate;

    }

} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-13T14:45:26.653

写为：

```
config::$DBUSER; 
```

等等。

# ruby-on-rails - 载波文件删除

> ID：14856076
> 
> 赞同：5
> 
> 时间：2013-02-13T14:43:40.100
> 
> 标签：ruby-on-rails, ruby, carrierwave

我再次需要你的帮助。现在我需要了解如何使用 Carrierwave 上传的文件（在我的情况下 - 图像）中删除。

***模型/附件.rb：***

```
class Attachment < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true
  attr_accessible :file, :file
  mount_uploader :file, FileUploader
end 
```

***模型/post.rb：***

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title, :attachments_attributes, :_destroy
  has_many :attachments, :as => :attachable
  accepts_nested_attributes_for :attachments
end 
```

***意见/帖子/_form.html.erb :***

```
<%= nested_form_for @post, :html=>{:multipart => true } do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div id="field">
    <%= f.label :Nosaukums %>:<br /><br />
    <%= f.text_field :title %><br /><br />
  </div>
  <div id="field">
    <%= f.label :Raksts %>:<br /><br />
    <%= f.text_area :content %><br /><br />
  </div>

    <%= f.fields_for :attachments do |attachment| %>
    <% if attachment.object.new_record? %>
      <%= attachment.file_field :file %>

    <% else %>
      <%= image_tag(attachment.object.file.url) %>
      <%= f.check_box :_destroy %>
    <% end %>
  <% end %>

    <%= f.submit "Publicēt", :id => "button-link" %>
<% end %> 
```

当我尝试删除以前上传的文件时，出现此错误：

```
unknown attribute: _destroy 
```

也许有问题，因为我有多个文件上传，而不仅仅是一个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-06T22:45:06.983

这些都不适合我，但在挖掘之后，我发现[这篇文章](https://stackoverflow.com/questions/15447127/carrierwave-cannot-remove-image?rq=1)真的很有帮助。基本上...

表单（其中**f**是您的表单对象）：

```
<%= f.check_box :remove_image %> 
```

然后，如果您选中该框并提交表单，您将收到以下错误：

> 无法批量分配受保护的属性：remove_image

`remove_image`只需将其添加到`attr_accessible`模型上的列表即可轻松解决。最后它看起来像：

```
class Background < ActiveRecord::Base
  attr_accessible :image, :remove_image
  belongs_to :user
  mount_uploader :image, BackgroundUploader
end 
```

在我的情况下，它是属于用户的背景图像。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T14:52:30.803

根据[文档](https://github.com/jnicklas/carrierwave#removing-uploaded-files)，复选框应该被调用`remove_file`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-22T20:19:29.723

它应该是 **<%= attachment.check_box :_destroy%>**

这个对我有用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T00:01:37.310

您在错误的模型上调用该方法。您的文件挂载在附件上。

错误告诉你出了什么问题。

```
undefined method 'remove_file' for #<Post:0x471a320 
```

错误的关键点是当需要在 Attachment 模型上调用该方法时，正在 Post 模型上调用该方法。

也许尝试将复选框的输入范围限定为正确的模型。

```
<%= attachment.check_box :remove_file %> 
```

# wordpress - 一个 div 元素破坏了我的 wordpress 网站

> ID：14856077
> 
> 赞同：1
> 
> 时间：2013-02-13T14:43:40.840
> 
> 标签：wordpress, html, position

我正在尝试建立一个 wordpress 网站，我正在把它放在一起。添加滑块后，我想在其下添加一条灰线，但我完全搞砸了整个网站。

我在主页的代码（index.php）中将它添加到这样的 div 中：

```
<div id="line" class="line" style="width:1000px;height:5px;background:#ccc;margin-left:8px;"/> 
```

这将我的侧边栏推到了页面的中间并弄乱了我的页脚，我试图改变这个 div 的位置但它没有帮助，而且问题是它太长而且它只是与侧边栏 div 重叠。

也许这只是我把 div 放在了错误的地方，但我想不通。

该网站是[http://www.enyx.sk](http://www.enyx.sk)

感谢您的帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:53:13.177

不要`div`在 HTML 中使用“自关闭” `/>`，浏览器不会将其解释为关闭标记。因此，您最终只打开 a `div`，而不再关闭它。

另请参阅[此问题](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5)以供参考。

# symfony - symfony2 你如何创建自己的自定义 yml 文件以在全球范围内共享？

> ID：14856080
> 
> 赞同：5
> 
> 时间：2013-02-13T14:43:52.223
> 
> 标签：symfony, configuration, yaml

我正在寻找创建自己的 yml 文件来存储一些可以在我的项目中重复使用的全局设置和变量。我在这里搜索并找到了另一个答案，但它对我不起作用

[在 symfony2 中设置自己的参数](https://stackoverflow.com/questions/12127927/how-to-set-my-own-paramers-and-config-symfony2)

我正在寻找添加**report_settings.yml**文件，以便它在我的项目中自动加载。

这就是我迄今为止所基于的

```
#app/config/config.yml
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }
    - { resource: report_settings.yml }

 .. rest of config file -- 
```

我试图包含的文件看起来像这样

```
#report_settings.yml
something:
    something1: "test" 
```

它返回以下错误

```
FileLoaderLoadException: Cannot import resource "/var/www/pcPortal/app/config/report_settings.yml" from "/var/www/pcPortal/app/config/config.yml". 
```

和

```
InvalidArgumentException: There is no extension able to load the configuration for "something" (in /var/www/pcPortal/app/config/report_settings.yml). Looked for namespace "something", found "framework", "security", "twig", "monolog", "swiftmailer", "assetic", "doctrine", "sensio_framework_extra", "jms_aop", "jms_di_extra", "jms_security_extra", "sj_query", "web_profiler", "sensio_distribution" 
```

从阅读错误消息看来我错过了什么？我需要添加某种扩展吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:45:52.190

最简单的方法是将您的配置放入参数部分，例如：

```
#report_settings.yml
parameters:
    something.something1: "test" 
```

您还可以使用自己的扩展程序处理配置，请参阅[http://symfony.com/doc/master/book/service_container.html#importing-configuration-via-container-extensions](http://symfony.com/doc/master/book/service_container.html#importing-configuration-via-container-extensions)

# prototypejs - 原型 JS - 无法链接 element.previous(0).match()

> ID：14856081
> 
> 赞同：1
> 
> 时间：2013-02-13T14:43:54.680
> 
> 标签：prototypejs

长话短说，我在这里有一个很长的故事，但将其简化为问答以帮助他人！

我有以下循环：

```
$$('#leftCntr label').each(function(elem){
    if($(elem).previous(0).match('h3'))
    {
        console.log($(elem).previous(0).innerHTML);
    }
}); 
```

它没有工作......但问题很明显......

**我必须检查是否真的有以前的，否则你不能链接功能**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:54:21.250

有些元素没有以前的元素...... -_- 当然只有父母，我只花了3到4个小时就解决了这个问题|-) 所以我希望我能帮助别人！

```
$$('#leftCntr label').each(function(elem){

    if($(elem).previous(0) && $(elem).previous(0).match('h3'))
    {
        console.log($(elem).previous(0).innerHTML);
    }

}); 
```

ps 刚从一个 stackoverflow 帐户开始，因为它是最好的网站，我也想帮忙！！:) 我希望在遇到尴尬的问题时为大家提供更多我的解决方案！

# c# - 来自 MemoryStream UTF8 编码的 StreamReader

> ID：14856084
> 
> 赞同：10
> 
> 时间：2013-02-13T14:43:58.520
> 
> 标签：c#, streamreader, memorystream

我想在 MemoryStream 中打开一个 XML 文件（来自 zip 存档）并从该流创建一个 StreamReader 以将其放入 GridView。

我使用这段代码：

```
MemoryStream ms = new MemoryStream();
entry.Extract(ms);
StreamReader reader = new StreamReader(ms);
DataSet ds = new DataSet();
ds.ReadXml(reader);
dataGridView1.DataSource = GlobalDs.Tables[0]; 
```

如果我的 XML 文件是用 ANSI 编码的，那么它可以完美运行。但是当我加载以 UTF8 编码的文件时，它会失败，即使我这样初始化`StreamReader`：

```
StreamReader reader = new StreamReader(ms, System.Text.Encoding.UTF8); 
```

我希望有人有一个想法来解决我的问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T14:47:41.357

尝试使用：

```
StreamReader reader = new StreamReader(ms, System.Text.Encoding.UTF8, true); 
```

第三个参数是 for `detectEncodingFromByteOrderMarks`( [msdn](http://msdn.microsoft.com/en-us/library/ms143457.aspx) )

# jquery - 用 jquery ajax 调用填充 a

> ID：14856085
> 
> 赞同：0
> 
> 时间：2013-02-13T14:43:58.867
> 
> 标签：jquery, ajax, innerhtml

我正在尝试为一系列 ' 中的每一个进行 ajax 调用，并将 td 的内部 html 替换为来自 ajax 调用的已处理数据。

由于我被锁定到电子商务 cms 系统，我的 ajax 调用是一个完整的页面，其中包含以下字符串：**！#249,00！#349,00**！#5 ltr！#**

下面的代码将其拆分为：
var pprices = ['','249,00','349,00'];
var plabels = ['','5 ltr',''];

注意：pprices 中的数字使用逗号而不是句号。

问题是最后一行： $(this).html(endprice); 用默认值“999999”而不是新值填充单元格。似乎该行在ajax调用完成之前执行。

**如何确保将for循环中找到的数据发送到td？**

我目前的代码是这样的：

```
 $(".pricetag").each( function() {
  var pgroup = $(this).attr('group');
  var plink = "Default.aspx?ID=14&groupid=" + pgroup + "&mode=-1";
  var endprice = "999999";
  var endlabel = "";
  $.ajax({url:plink,done:function(result){
    pprices = result.split("**")[1];
    plabels = result.split("**")[2];
    prices = pprices.split("!#");
    labels = plabels.split("!#");
    for(i=0;i<prices.length;i++) { 
        j=parseInt(prices[i]); k=parseInt(endprice); 
        if(j!=0 && j<k) { endprice = prices[i]; endlabel = labels[i]; }}
  }});
  $(this).html(endprice);
  }); 
```

HTML：

```
<table><tr>
  <td> label </td>
  <td class="pricetag" group="<!--@Ecom:Group.ID-->"> price </td>
</tr></table> 
```

<!--@Ecom:Group.ID--> 从电子商务系统中获取一个 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:11:39.767

查看 jQuery.ajax 文档，在我看来它不是`done:`一个有效的设置。我认为您想在`success:`$.ajax() 返回的 jqXHR 对象上使用或调用 done()。

也就是说，您的假设是正确的，即“该行在 ajax 调用完成之前执行”......您需要将该行移到您的成功处理程序函数中，例如：

```
$.ajax({url:plink,
        context: $(this),
        success:function(result){
            pprices = result.split("**")[1];
            plabels = result.split("**")[2];
            prices = pprices.split("!#");
            labels = plabels.split("!#");
            for(i=0;i<prices.length;i++) { 
                j=parseInt(prices[i]); k=parseInt(endprice); 
                if(j!=0 && j<k) { endprice = prices[i]; endlabel = labels[i]; }}
            $(this).html(endprice);
       }}); 
```

请注意，我添加了上下文设置，以便`this`从传入`each()`，以便成功函数与正确的`this`.

我没有测试这个。但我相信它应该工作。如果遇到问题，您可能需要查看[jQuery.ajax()文档。](http://api.jquery.com/jQuery.ajax/)

# javascript - 使用 VBS 或 JavaScript 更改默认邮件客户端

> ID：14856087
> 
> 赞同：1
> 
> 时间：2013-02-13T14:44:06.597
> 
> 标签：javascript, windows, email, vbscript

我想将默认邮件客户端更改`http://inotes/`为 Outlook。

我知道`http://inotes/`公众无法访问

我想运行一个 .js 文件或一个 .vbs 文件并更改客户端以及其他内容。

理想情况下，它很少或没有用户交互（我知道在 Windows 7 中，UAC 可能会弹出允许某些操作并且没问题）

## 我的代码

```
<script>
function changeMailClient(){
 location.href="mailto:https://inotes/";
}
</script>
<body onload="changeMailClient();">
</body> 
```

# javascript - geoXML3，如何加载文件夹中的所有 KML 文件？

> ID：14856089
> 
> 赞同：1
> 
> 时间：2013-02-13T14:44:14.010
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, geoxml3

我在 javacript 中有以下代码，使用 geoXML3 成功加载/解析并显示显示的 KML 文件。

```
 var geoXml = new geoXML3.parser({map: map, singleInfoWindow: true});
    geoXml.parse('/myapp/resources/kml/fileone.kml'); 
```

然而，`/myapp/resources/kml/`文件夹/uri 包含许多 KML 文件。我如何一次加载/解析它们以一次将它们全部显示在谷歌地图上？

我不能简单地命名它们，因为它们对于应用程序的不同安装会有所不同。通配符似乎不起作用；

```
 var geoXml = new geoXML3.parser({map: map, singleInfoWindow: true});
    geoXml.parse('/myapp/resources/kml/*.kml'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:12:51.840

如果您可以提供列表，geoxml3 只能打开文件。geoxml3 是用[javascript 实现的，所以它不能访问文件系统](https://stackoverflow.com/questions/2924935/list-files-in-a-directory-using-only-javascript)。如果您提供一组文件名（具体，没有通配符），它将打开并解析它们。

# c - 线程分配内存，主进程死亡，会发生什么？

> ID：14856090
> 
> 赞同：3
> 
> 时间：2013-02-13T14:44:19.577
> 
> 标签：c, windows, memory-leaks

我目前正在检查我的一些代码是否存在内存泄漏，这种可能性让我很震惊。基本上我正在做的伪代码如下，

```
void thread_func()
{
    char *fileName = malloc(someSize);
    /* Do something with fileName and other things */
    /* Enter a critical section */
    modify some global variables
    /*Exit critical section */
    free(fileName);
    return;
} 
```

此函数驻留在 DLL 中。临界区和其他东西由同样驻留在同一个 DLL 中的函数初始化。

现在，我的主进程（这是一个 GUI）有一个取消按钮。当用户单击该按钮时，我调用 DLL 的清理函数，该函数恰好破坏了我的关键部分。

我发现如果用户在执行过程中点击了取消`thread_func()`，`thread_func()`会继续执行。当它到达临界区代码时，临界区是无效的，所以我就退出了。这就是我在线程内检查取消事件的方式（因为我的应用程序中没有其他任何东西可以在执行期间调用 DLL 的清理`thread_func()`）。

当我发现关键部分无效时，我无法释放`fileName`。`thread_func()`我的猜测是因为主进程退出`thread_func()`后已经无法访问。`fileName`我的猜测对吗？我的主要问题是，如果我在这种情况下不释放`fileName`，我是否会面临内存泄漏的风险？

我已经搜索了很多相关信息，到目前为止还没有找到任何东西。如果有人能指出我正确的方向/回答我的问题，我会非常高兴。

谢谢！

**编辑 ：**

我决定根据kol的建议做一些初步测试（见下面的答案）。我注意到一些我无法理解的非常奇怪的东西。现在我的代码如下：

```
void thread_func()
{
    char *fileName = malloc(someSize);
    /* Do something with fileName and other things */

    if(threadTerminated)
    {
        /* Cleanup */
        return;
    }

    /* Enter a critical section */
    modify some global variables
    /*Exit critical section */
    free(fileName);
    return;
} 
```

在我的 GUI 中，我的 OnCancel 事件处理程序类似于：

```
void OnCancel()
{
    threadTerminated = TRUE;
    WaitForMultipleObjects(noOfRunningThreads, threadHandles, TRUE, INFINITE);

    /* Other cleanup code */
} 
```

我注意到它`WaitForMultipleObjects()`无限期地挂起，我的 GUI 变得无响应。不应该`WaitForMultipleObjects()`很快回来吗？此外，没有任何清理发生在`thread_func()`if `threadTerminated`is 中`TRUE`。

这是IMO最奇怪的部分。当我删除时`WaitForMultipleObjects()`，我的代码工作得很好！所有的清理工作都会发生，包括内部的清理`thread_func()`。有人可以帮我理解吗？

请注意，我现在`threadTerminated`只检查一个点。稍后我将在其他重要点检查它。我这样做只是为了看看我是否明白发生了什么。

再次感谢！您的回答非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:50:56.370

当一个进程终止时，操作系统将释放它分配的所有内存，因此不调用已分配的内存`free`不会`fileName`导致任何问题。

无论如何，我会通过以下方式更改代码：

1.  定义一个标志，指示线程是否应该终止：`bool terminated;`
2.  当进程即将终止时，设置`terminated`为`true`，并[等待线程终止](http://www.codeproject.com/Articles/2855/Waiting-for-a-thread-to-terminate)。
3.  在线程函数中，检查`terminated`重要点（例如，在每个循环的条件检查中）。如果`terminated`是`true`，则停止线程所做的一切（例如，停止循环），释放资源（例如，线程分配的空闲内存），然后返回。
4.  在线程终止后（即线程函数返回后），进程可以释放所有剩余资源（例如，进程分配的空闲内存、删除临界区等）并退出。

这样，您可以避免在线程终止之前删除关键部分，并且可以释放每个分配的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:21:46.153

*   您的线程可能应该具有某种形式的循环才有意义。
*   使用线程时，您需要发明一些方法以安全、可预测的方式优雅地终止它们。
*   关键部分是钝的，用线程可以等待的互斥对象替换它们。

设计它的正确方法是这样的：

```
HANDLE h_event_killthread = CreateEvent(...);
HANDLE h_mutex = CreateMutex(...);

...

void thread_func()
{
  const HANDLE h_array [] = 
  { 
    h_event_killthread,
    h_mutex 
  };

  ... // malloc etc

  bool time_to_die = false;

  while(!time_to_die)
  {
    DWORD wait_result;
    wait_result = WaitForMultipleObjects(2,         // wait for 2 handles
                                         h_array,   // in this array
                                         FALSE,     // wait for any handle
                                         INFINITE); // wait forever

    if(wait_result == WAIT_OBJECT_0) // h_event_killthread
    {
      time_to_die = true;
    }
    else if(wait_result == (WAIT_OBJECT_0+1)) //h_mutex
    {
      // we have the mutex
      // modify globals here
      ReleaseMutex(h_mutex);

      // do any other work that needs to be done, if meaningful
    }
  }

  cleanup();
}

// and then in the GUI:

void cancel_button ()
{
  ...
  SetEvent(h_event_killthread);
  WaitForSingleObject(the_thread, INFINITE);
  ...
} 
```

**编辑 ：**

请记住，创建和删除线程会产生大量开销代码，并且可能会减慢程序的速度。除非它们是工作线程，与开销相比，工作量很大，否则请考虑在程序的整个生命周期内保持线程处于活动状态但处于休眠状态。

# javascript - jQuery单击事件多次触发一次单击

> ID：14856091
> 
> 赞同：3
> 
> 时间：2013-02-13T14:44:20.203
> 
> 标签：javascript, jquery, html

当仅单击一个元素时，我在 jQuery 中注册多次单击时遇到问题。我已经阅读了[Stack Overflow](https://stackoverflow.com/questions/2024389/jquery-click-event-is-firing-multiple-times-when-using-class-selector)上的其他一些线程来尝试解决它，但我认为这是我编写的代码。HTML 代码无效，但这是由某些 HTML 5 和使用 YouTube 嵌入代码引起的。没有什么会影响点击。

jQuery，在 document.ready 上触发

```
function setupHorzNav(portalWidth) {
    $('.next, .prev').each(function() {
        $(this).click(function(e) {
            var target = $(this).attr('href');
            initiateScroll(target);
            console.log("click!");
            e.stopPropagation();
            e.preventDefault();
            return false;
        });
    });

    function initiateScroll(target) {
        var position = $(target).offset();
        $('html, body').animate({
            scrollLeft: position.left
        }, 500);
    }
} 
```

示例 HTML

```
<nav class="prev-next">
    <a href="#countdown-wrapper" class="prev">Prev</a>
    <a href="#signup-wrapper" class="next">Next</a>
</nav> 
```

在 Firefox 中，单击即可记录“单击！” 16次！Chrome 只看到一个，但两种浏览器都显示上述代码存在问题。

是我写错了代码还是有错误？

-- 一些额外的信息 ------------------------------------------

setupHorzNav 由我的代码中的另一个函数调用。我已经对此进行了测试并确认它仅在初始加载时被调用一次。

```
if ( portalWidth >= 1248 ) {
    wrapperWidth = newWidth * 4;
    setupHorzNav(newWidth);
}
else
{
    wrapperWidth = '100%';
} 
```

nav 'prev-next' 有多个实例。所有目标都是不同的锚点。所有都在同一个html页面中。

```
<nav class="prev-next">
    <a href="#video-wrapper" class="prev">Prev</a>
</nav> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:51:04.333

尝试像这样解绑点击事件

```
$(this).unbind('click').click(function (e) {    
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T14:48:56.937

您不需要`.each()`绑定事件处理程序。试试这个：

```
$('.next, .prev').click(function(e){
        var target = $(this).attr('href');
        initiateScroll(target);
        console.log("click!");
        e.stopPropagation();
        e.preventDefault();
        return false;
}); 
```

**编辑：** 我认为这是您从`setupHorzNav`导致它的函数中附加事件处理程序的方式。将其更改为仅从说`$(document).ready()`或其他内容中附加一次。

我已经设法通过从事件处理程序调用的函数中附加事件处理程序来了解多个事件处理程序的情况。结果是单击事件处理程序的数量随着每次单击而呈几何级数增长。

这是代码：（和[jsfiddle](http://jsfiddle.net/FloydPink/aRYVq/2/)演示）

```
function setupNav() {
    $('.next, .prev').each(function () {
        $(this).click(function (e) {
            setupNav();
            var target = $(this).attr('href');
            console.log("click!");
            e.stopPropagation();
            e.preventDefault();
            return false;
        });
    });
}

setupNav(); 
```

查看从 click 事件处理程序调用函数如何在连续单击时`setupNav()`添加多个事件处理程序（和日志消息）`click`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T14:51:10.380

由于从您的问题中不清楚您是否多次调用绑定函数，因此快速而肮脏的修复将是：

```
$('.next, .prev').unbind('click').click(function() {
    ...
}); 
```

您在这里所做的是*取消绑定*任何先前绑定的事件处理程序`click`并重新绑定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T14:54:05.233

其他地方没有其他点击绑定吗？

你是用ajax加载页面吗？

你也可以试试这个：

```
$('.next, .prev').click(function (e) {
    var target = $(this).attr('href');
    initiateScroll(target);
    console.log("click!");
    e.stopPropagation();
    e.preventDefault();
    return false;
}); 
```

# php - GNUPG解密在php中失败

> ID：14856093
> 
> 赞同：0
> 
> 时间：2013-02-13T14:44:20.853
> 
> 标签：php, gnupg, pgp

我正在使用 GnuPG 库来加密解密消息。我已经成功地在我的服务器上配置了 GPG 扩展并生成了一个密钥对。我也成功地导入了另一个公钥并使用该公钥加密数据。

我还使用我的公钥加密数据并使用我的私钥对其进行解密。

但是当其他人使用我的公钥加密数据时，我无法解密它。错误是

```
Warning: gnupg_decrypt(): decrypt failed in pgpdecrypt.php on line 22 
```

我的代码是

```
$Message = $_REQUEST["Message"];

// Specify custom location of GnuPG binary.
$res = gnupg_init();

gnupg_seterrormode($res, GNUPG_ERROR_WARNING); 

$rtv = gnupg_adddecryptkey($res, "rizwan@google.com", "0000");
echo gnupg_geterror($res) . "<br>"; // Print if any errors

$enc = gnupg_decrypt($res, $Message); // ERROR IS AT THIS LINE
echo gnupg_geterror($res) . "<br>"; // Print if any errors
echo $enc; 
```

同样的代码正在解密我在我的机器上加密的数据。

我无法提取错误详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:02:02.420

密码算法 6 参考 DES。GnuPG 不支持 DES，而是使用 3DES/Triple-DES。我使用 3DES 加密了数据，并在我的站点成功解密。

希望这有助于其他遇到同样问题的人。:)

# liferay - Liferay：菜单的顺序任意变化

> ID：14856094
> 
> 赞同：0
> 
> 时间：2013-02-13T14:44:23.227
> 
> 标签：liferay

我真的被这个问题发疯了！在我网站的顶部导航栏中，我有 4 个菜单：例如，菜单 1、菜单 2、菜单 3、菜单 4。从昨天开始，在我添加了一个新页面（后来我删除了）之后，菜单的顺序是相反的，即菜单 4、菜单 3 等等。在控制面板中，我按照应有的方式重新排序它们，但是当我单击保存按钮离开控制面板时，顺序再次更改，这次是随机的。

知道为什么会这样吗？我正在使用 Liferay 6.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:52:09.327

我设法通过访问数据库并更改/更新菜单的优先级值来解决问题。现在它应该是这样。出于某种原因，在订购出错时，无论我通过控制面板更改订单并保存了多少次，该设置都保留在数据库中。

# jackrabbit - 等效于 JCR SQL2 查询的 OCM 查询

> ID：14856095
> 
> 赞同：0
> 
> 时间：2013-02-13T14:44:28.580
> 
> 标签：jackrabbit, jcr-sql2

我正在 Jackrabbit 存储库上实现全文搜索。[在浏览了http://jackrabbit.apache.org/ocm-search.html](http://jackrabbit.apache.org/ocm-search.html)中给出的示例之后，当谓词中只需要“and”时，我可以编写对存储库执行全文搜索。例如：

```
select * from test where name like '%abc%' and type = 'mainPage' and language = 'english' 
```

可以写成

```
Filter filter = queryManager.createFilter(Paragraph.class);
filter.addContains('name', 'abc');
filter.addEqualTo('type', 'mainPage');
filter.addEqualTo('language ', 'english'); 
```

但是，如果我尝试为以下查询编写 OCM 实现

```
select * from test where (name like '%abc%' or name like '%def%' ) and type = 'mainPage' and language = 'english' 
```

如下所示，我得到空列表

```
Filter mainFilter= queryManager.createFilter(Paragraph.class);
Filter filter = queryManager.createFilter(Paragraph.class);
filter.addContains('name', 'abc');
Filter filter1 = queryManager.createFilter(Paragraph.class);
filter.addContains('name', 'def');
mainFilter = filter .addOrFilter(filter1 );
mainFilter .addEqualTo('type', 'mainPage');
mainFilter .addEqualTo('language ', 'english'); 
```

我认为我无法正确使用 OCM 全文搜索。请建议我实施 OCM 全文搜索的正确方法，其中谓词包含大量“和”和“或”条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:23:36.000

当我使用 filter.addLike('name','%def%');

它工作正常。我仍然想知道为什么 addContains() 不起作用。

# python - Django1.4：如何在模板中使用order_by？

> ID：14856097
> 
> 赞同：7
> 
> 时间：2013-02-13T14:44:38.370
> 
> 标签：python, django, django-models, python-2.7, django-1.4

Django1.4：如何在模板中使用order_by？

模型.py

```
from django.db import models
from django.contrib.auth.models import User
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class Note(models.Model):
    contents = models.TextField()
    writer = models.ForeignKey(User, to_field='username')
    date = models.DateTimeField(auto_now_add=True)

    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

class Customer(models.Model):
    name = models.CharField(max_length=50,)
    notes = generic.GenericRelation(Note, null=True) 
```

以上是我的models.py。

我想使用'order_by'（[https://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by）](https://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by)

和...

视图.py

```
from django.views.generic import DetailView
from crm.models import *

class customerDetailView(DetailView):
    context_object_name = 'customerDetail'
    template_name = "customerDetail.html"
    allow_empty = True
    model = Customer
    slug_field = 'name' 
```

我的views.py 使用DetailView（[https://docs.djangoproject.com/en/1.4/ref/class-based-views/#detailview](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#detailview)）。

和

customerDetail.html

```
<table class="table table-bordered" style="width: 100%;">
    <tr>
        <td>Note</td>
    </tr>
    {% for i in customerDetail.notes.all.order_by %}<!-- It's not working -->
        <tr>
            <th>({{ i.date }}) {{ i.contents }}[{{ i.writer }}]</th>
        </tr>
    {% endfor %}
</table> 
```

我想在模板中使用 order_by ...

我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T15:43:10.467

查看[dictsort](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#dictsort)过滤器，我认为这几乎就是您要寻找的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T14:52:02.383

order_by 至少需要一个参数，而 Django 不允许您将参数传递给模板内的函数或方法。

一些替代方案是：

*   使用[Jinja2](http://jinja.pocoo.org/docs/)模板引擎而不是 Django 的模板引擎（Jinja2 可以让你将参数传递给方法，据说性能更好）
*   在视图中对数据集进行排序
*   使用“ [Meta:ordering](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering) ”属性为您的模型定义默认排序标准
*   编写一个自定义过滤器，以便您可以`queryset|order_by:'somefield'`（[请参阅此片段](http://djangosnippets.org/snippets/741/)）
*   正如[Michal](https://stackoverflow.com/users/225718/michal-cihar)所建议的，您可以使用预定义的方法为您需要的订单编写[自定义管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)

# javascript - Javascript到图像循环

> ID：14856098
> 
> 赞同：0
> 
> 时间：2013-02-13T14:44:40.937
> 
> 标签：javascript

简单的请求，但我不知道该怎么做。我有一系列 10 个图像（image0.gif、image1.gif image2.gif 等），当按下另一个图像时，它们需要更改为序列中的下一个图像（在 9 个之后循环）。这是我目前所拥有的......

```
 <html>  
    <head></head>
    <body bgcolor="#808080">
        <script type="text/javascript">
            var c = 0;
            function preload(img) {
                var a = new Image();
                a.src = img;
                return a;
            }

            if (needed) {
                time0 = preload("image0.gif");
                time1 = preload("image1.gif");
                time2 = preload("image2.gif");
                time3 = preload("image3.gif");
                time4 = preload("image4.gif");
                time5 = preload("image5.gif");
                time6 = preload("image6.gif");
                time7 = preload("image7.gif");
                time8 = preload("image8.gif");
                time9 = preload("image9.gif");
            }

            function clickme() {
                // update image
                c += 1;
                // alert(c)
            }
        </script>
        <div align="center">
            <center>
                <img src="images/image0.gif" width="20" height="55" name="time0"> <a href="#" onMouseDown="return clickme()">
                    <img src="images/button.gif" border="0" width="96" height="55">
                    </a>
                </td>
                </tr>
                </table>
            </center>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:51:44.140

首先，您可以而且应该利用这样一个事实，即每个 umage 名称中唯一不同的是数字。因此，您可以存储编号并创建任何图像名称：

```
function getImage(id) {
    return "image"+id+".gif";
} 
```

然后，您应该有办法访问要更改的图像。就像添加`id`到他元素：

```
<img id="changing" src="image0.png" /> 
```

应该有`onclick`，没有`onmousedown`。用户可能会改变主意并将鼠标移开 - 那不是点击：

```
<a href="#" onclick="clickme()" /> 
```

最后，更改图像元素：

```
var c=0;
var max = 9;
function clickme() {
   c++;
   if(c>max)
     c=0;   //looping back to zero
   docment.getElementById("changing").src = getImage(c);  //getImage is defined above
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:47:08.390

在图像上放置一个 id（`the-image`例如 ）。

```
function clicme() {
    c += 1;
    document.getElementById('the-image')
        .setAttribute('src', 'image' + (c % 10) + '.gif');
} 
```

也没有`href`元素。我想你的意思是输入`<a href`.

# ajax - ajax表单错误

> ID：14856103
> 
> 赞同：0
> 
> 时间：2013-02-13T14:44:44.863
> 
> 标签：ajax, forms, duplicates, send

按下按钮后，我收到以下警告并且表单重复。代码中有错误吗？

![http://divran.com/s/upload/images/fso5xclhcdpbwamj153s.gif](../Images/0deaa57da3b5520d36a0a12061c5fb8a.png)

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=windows-1254" />
            <script src="jquery-ui-1.10.0.custom/jquery-1.9.1.min.js" type="text/javascript"></script>
            <title>jquery AJAX</title>
            <script language="javascript">
                $(document).ready(function(){
                            var name    = $("#name").val();
                            var sname   = $("#sname").val();
                            var email   = $("#email").val();

                        $("#b1").click(function(){          
                            $.ajax({
                                type    :"POST",
                                URL     :"save.php",
                                data    :"name="+name+"&sname="+sname+"&email="+email,
                                dataType:"text",
                                success :function (data, textStatus, jqXHR) {                           
                                            if (data == 'success'){
                                                $("#res").html("sonuc :"+data); 
                                            }else{
                                                $("#res").html(data +":"+textStatus+":"+jqXHR);
                                                }
                                }
                            });             
                        }); 
                    });

            </script>
            </head>
            <body>
            <input type="text" id="name"/><br />
            <input type="text" id="sname"/><br />
            <input type="text" id="email"/><br />
            <button id="b1">send</button>
            <div id="res"></div>
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:49:51.287

它正在做它应该做的事情。错误在这部分：

```
success :function (data, textStatus, jqXHR) {                           
    if (data == 'success'){
        $("#res").html("sonuc :"+data); 
    }else{
        $("#res").html(data +":"+textStatus+":"+jqXHR);
    }
} 
```

只要 AJAX 调用成功，就会触发此回调，但随后您检查`data`键是否等于`success`，它不是，因此现在触发 else 子句（如您的屏幕截图所示）。我相信您实际上要检查的是是否`textStatus`成功。所以，替换：

```
if (data == 'success'){ 
```

有了这个：

```
if (textStatus == 'success') { 
```

结果，您应该得到一个`sonuc :`跟随的数据。

**请注意**，尽管整个 if/else 实际上没有用，因为这已经`success`是仅在 AJAX 请求成功时才返回的回调。你可能想把这个：

```
$("#res").html(data +":"+textStatus+":"+jqXHR); 
```

进入错误回调，所以你会得到：

```
success: function (data, textStatus, jqXHR) {                           
    $("#res").html("sonuc :"+data); 
},
error: function (jqXHR, textStatus, errorThrown) {
    $("#res").html(data +":"+textStatus+":"+jqXHR);
} 
```

# scala - 访问惰性 val 的类型会导致它被评估吗？

> ID：14856106
> 
> 赞同：3
> 
> 时间：2013-02-13T14:44:52.643
> 
> 标签：scala, types, lazy-evaluation

正如问题标题所述，访问成员是否`type`会`lazy val`导致对该成员的评估？或者它只是使用它的静态类型？

这是一个示例代码，其中我有一个`implicit lazy val`，我想在接受该类型的方法中使用它的`implicit val`类型：

> `implicit lazy val nonSpaces: Array[(Point, Part)]`

...

> `def randomNonSpaceCoordinate(implicit nonSpaces: this.nonSpaces.type): Point = nonSpaces(Utils.Random.randUpTo(nonSpaces.length))._1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T15:04:38.563

不。类型级计算（除了它们的影子自身“反射”）是编译时的事情。

你可以验证这样的事情：

```
scala> lazy val lv1 = { println("Initializing lv1"); "lv1" }
lv1: String = <lazy>

scala> def m1(s: lv1.type): Int = s.length
m1: (s: lv1.type)Int

scala> lv1
Initializing lv1
res5: String = lv1 
```

但是，您可能需要更仔细地考虑`.type`像这样使用，因为它是一种所谓的**路径依赖类型**，在这种情况下，它可能太窄而无法使用：

```
scala> m1(lv1)
res6: Int = 3

scala> m1("42")
<console>:10: error: type mismatch;
 found   : String("42")
 required: lv1.type
              m1("42") 
```

在您的情况下，您将只能调用`randomNonSpaceCoordinate`with `nonSpaces`，这使得将其作为参数传递根本没有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T14:59:33.207

让我们来看看：

```
scala> object Test {
     |   lazy val test: String = {println("bang!"); "value"}
     |   val p: this.test.type = null
     |   def testDef(p: this.test.type) = println(p)
     | }
defined module Test

scala> Test.testDef(Test.p)
null

scala> Test.testDef(Test.test)
bang!
value 
```

如您所见，仅访问类型并不需要实际评估惰性 val。

# java - 泛型集合 PECS

> ID：14856109
> 
> 赞同：6
> 
> 时间：2013-02-13T14:45:04.127
> 
> 标签：java

我对此方法有疑问`java.util.Collections`：

```
public class Collections {  
  public static <T> void copy(List<? super T> dest, List<? extends T> src) {  
      for (int i=0; i<src.size();i++)   
        dest.set(i,src.get(i));   
  }   
} 
```

我了解如何`<? super T>`工作，但是，我不明白为什么第一个参数是`List<? super T>`而不是`List<T>`. 我认为在这种情况下它是没有用的。
使用`List<T>`应该也可以，不是吗？
如果可能的话，你能给我一些例子来理解它吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T14:51:46.363

不，这是有道理的。例如，考虑这种情况：

*   `T`是`InputStream`
*   `dest`是一个`List<Object>`
*   `src`是一个`List<FileInputStream>`

这绝对没问题。当然，您*可以*在这种情况下进行`T`或在这种情况下进行 - 但假设您是`Object`从*具有*以下签名的方法调用它：`FileInputStream`

 *```
public void doSomething(List<? super InputStream> streams) {
    // I want to use copy in here for some reason
} 
```

你不知道它是一个`List<InputStream>`- 只是它是一个`List<? super InputStream>`. 如果in中的`dest`参数*只是*，我们会被卡住......但是按照它*的*编写方式，我们很好。`copy` *`List<T>`*

 **就我们对目标列表的要求而言，这也是有意义的——我们*只*需要能够在`T`其中设置值。同样，我们对源列表的所有要求就是我们可以从中获取值`T`。`<? super T>`并`<? extends T>`很好地表达这些要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:53:21.750

如果您将其分解为使用列表的原因，则会更加清楚。

当一个方法打算填充一个列表时，您可以将其限制为使用特定类型 T，但通常您可能希望限制较少。

例如，假设您有一个方法`populateWithStudents(List<Student> list)` 并且您有`Student extend Person`

这意味着`List<Person>`即使 Student 扩展了 Person，您也不能使用带有 a 的方法来填充 Student 对象。

因此，另一方面，如果我们想允许我们将其更改为`populateWithStudents(List<? super Student> list)`. 这样，我们就是说，只要我们可以将 Student 放入列表中，无论它是 Student 对象的列表，还是它的任何超类的列表，都是允许的。

这不仅仅是在明显填充时，而且这个例子有助于理解这个概念。***

# sql - IIS 尝试以不存在的用户身份连接到数据库

> ID：14856114
> 
> 赞同：1
> 
> 时间：2013-02-13T14:45:24.913
> 
> 标签：sql, asp.net-mvc, sql-server-2008, iis, windows-server-2008

在我的网络服务器上，我有一个运行良好的旧 asp.net mvc 应用程序，但我决定删除它。现在我安装了新的，当我尝试打开我的网站时出现以下错误：

```
Cannot open database "MyDbName" requested by the login. The login failed.
Login failed for user 'NT AUTHORITY\NETWORK SERVICE'. 
```

问题是，我的系统中没有名为“NT AUTHORITY\NETWORK SERVICE”的用户。现在要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:46:44.880

检查网站应用程序池上的身份。这就是设置此帐户的位置。

此外，该帐户在您的计算机上可用，它是内置的。在权限对话框中只需键入“网络服务”，然后它将解析为该帐户。

# android - 具有 1 个值的数组的自定义 X-Labels 上的时间戳

> ID：14856118
> 
> 赞同：1
> 
> 时间：2013-02-13T14:45:29.457
> 
> 标签：android, achartengine

当 ArrayList 中有一个值时，我对 aChartEngine 中的 xlabels 有这个问题。我为折线图生成了自己的 XLabel，但是当有一个数据数组值时，我在生成的 XLabel 之上得到了一个不需要的时间戳。

我的代码：

```
private XYMultipleSeriesDataset getDemoDataset() {

        Calendar cal = Calendar.getInstance();
        Date date = new Date();

        date_value = new String[list.size()];
        value_value = new String[list.size()];

        for(int k = 0; k < list.size(); k++){
            date_value[k] = list.get(k).get(DATE);
            value_value[k] = list.get(k).get(VALUE);
        }

        TimeSeries series = new TimeSeries("Line Graph");

        for(int j=0; j < date_value.length; j++) {

                series.add(formatter.stringToDate(date_value[j]), Integer.parseInt());

                }   

            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
                 dataset.addSeries(series);
         return dataset;
         } 
```

设置图表设置：

```
private void setChartSetting(XYMultipleSeriesRenderer renderer){
        renderer.setXRoundedLabels(true);
        renderer.setXTitle("DATES");
        renderer.setYTitle(kpiname);
        renderer.setApplyBackgroundColor(true);
        renderer.setFitLegend(false);
        renderer.setAxesColor(Color.DKGRAY);
        renderer.setShowGrid(true);
        renderer.setZoomEnabled(false);
        renderer.setXLabels(0);
        renderer.setYLabels(10);
        renderer.setZoomEnabled(false, false);
        renderer.setPanEnabled(false, false);

        //String[] date_value = new String[list.size()];
        //String[] value_value = new String[list.size()];

        if(list.isEmpty() || list.size() == 0 || list == null ){
            return;
        } 

        if(name.equals(RECOVERED) || name.equals(CONVERSION)){
            largest_size = (int)Double.parseDouble(value_value[0]);
        }else{
               if(!(value_value.length == 0)){
               largest_size = Integer.parseInt(value_value[0]);
              }else{
                  return;
              }
        }

        //used to determine the maximum value for the y-axis
        for(int x =0; x < value_value.length; x++){

                if(Integer.parseInt(value_value[x]) > largest_size){
                    largest_size = Integer.parseInt(value_value[x]);
                }   
            }

        renderer.setYAxisMax((double)largest_size);
        renderer.setYAxisMin(0);

        int value_size = value_value.length;
        int m = 0;
        //int add =  value_size/10;
        int add =  largest_size/10;

        /*instance variables for setting the labels on the X-Axis based on weather the values in the array are
         * more than 10 items or less*/

        double d;
        Long l;
        Long l1;
        double d1;

        if(date_value.length <= 1){

          int last = date_value.length;
          int mod = 0;
              //int add_mod = Math.round(last/10);
              int add_mod = (int)Math.round((double)Math.round(last));

                l = Long.valueOf(formatter.stringToDateReport(date_value[0]).getTime());
                d = l.doubleValue();
                   /*tried this to see if i can remove the timestamp*/
                //renderer.addXTextLabel(0.0, "");
                //renderer.removeXTextLabel(0.0); 
                //renderer.clearXTextLabels();
                renderer.addXTextLabel(d, date_value[0]);

        }

            else if(date_value.length < 10){    

            for(int i = 0; i < date_value.length; i++){

                  if(i >= date_value.length){
                      break;
                  }

            l = Long.valueOf(formatter.stringToDateReport(date_value[i]).getTime());
            d = l.doubleValue();
            renderer.addXTextLabel(d, date_value[i]);

           }

        } else if(date_value.length >= 10){

              int last = date_value.length;
              //int last = 28;
              //Log.d(TAG, "last is " + last);      
              int mod = 0;
              //int add_mod = Math.round(last/10);
              int add_mod = (int)Math.round((double)Math.round(last) /10);  // do this to get the decimal value with a double and then round to get nearset whole with int

              for(int i =0; i < date_value.length; i++){

                  if(mod >= date_value.length){
                      break;
                  }

                  l1 = Long.valueOf(formatter.stringToDateReport(date_value[mod]).getTime());
                  d1 = l1.doubleValue();

                  renderer.addXTextLabel(d1, date_value[mod]); 
                  mod+=add_mod;
              }
        }

    } 
} 
```

进而：

```
chartView = ChartFactory.getLineChartView(context, getDemoDataset(), setChartSettings(renderer)); 
```

当有多个值时，它会使用我的自定义 XLabel（格式为 MMM-yyyy）很好地绘制图形，但是当 ArrayList 中只有一个值时，它会生成时间戳。

这是一张图片：

![在此处输入图像描述](../Images/580e9827d5be22c1c03645dca17f3e76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:42:45.963

这确实是一个错误。[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含修复功能的版本。

# swing - jar 文件无法使用 oracle 驱动程序

> ID：14856124
> 
> 赞同：0
> 
> 时间：2013-02-13T14:45:44.680
> 
> 标签：swing

您好我创建了一个项目，其中包含摇摆类。这是访问oracle sql数据库。在 Eclipse 上运行时，我的项目运行良好。但是当我将它导出到一个 jar 文件时，我得到一个错误，它无法找到 oracle 驱动程序类。代码没有问题，因为它在 Eclipse 中正常运行。此外，我喜欢将 ojdbc jar 添加到 lib 文件夹以及 java 配置中的类路径。我还用 7 zip 检查了我导出的 jar 文件，它包含 ojdbc 驱动程序。

# ios - 在类别中使用关联引用

> ID：14856125
> 
> 赞同：1
> 
> 时间：2013-02-13T14:45:45.553
> 
> 标签：ios, objective-c, clang, categories

尽管使用关联引用似乎是最广泛使用的伪造类别变量的方法，但我不禁将其视为一种 hack。我可能是错的。于是这个问题。所以，我知道 Apple 对许多框架类使用类别，并且在 3.1 之前（当添加关联引用时）他们这样做了。这让我想知道，他们是以不同的方式做的吗？Apple 是否推荐以这种方式使用关联引用？（任何支持这一点的文档？）从设计的角度来看，向类别添加存储是要避免的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:54:58.087

关联对象**不是**hack，因为它们是作为[“现代”运行时](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_setAssociatedObject)中的标准函数提供给我们的。

你是对的，在“现代”运行时之前没有实现关联对象，但是苹果对它们没有用处。如果他们希望将变量添加到一个类，它是通过在主类中结合一个显式的 setter/getter/internal iVar 来完成的（你会注意到这一点，尤其是像 NSSplitView 这样的旧 Cocoa 类）（因为你为什么需要如果您拥有该框架，是否使用关联对象？）Apple 使用类别是将相似功能组合在一起的旧方式，类似于语言级别`#pragma mark -`。

# excel - 用于在 Excel 中自动添加行的宏

> ID：14856127
> 
> 赞同：2
> 
> 时间：2013-02-13T14:45:54.320
> 
> 标签：excel, vba

我有一个包含数千个条目的 Excel 表，如下表 A 所示。现在，由于一些需求变化，我想为每个“名称”添加 3 个额外的“标签”，如表 B 所示。例如，名称 n1 将具有标签 t1、t2、t3 和 t4，并且对应于每个标签，有将是一个单独的评论。(A) 实现此目的的一种方法是在每列中添加三个新行（可以有 3 个空白行） (B) 另一种方法是在同一个文件中对应于每个标签再添加 3 个工作表。(C) 第三种方法可能是为 Tag 列设置一些过滤器......

有人可以建议一种自动化上述（A）的方法吗？（将不胜感激宏代码）如果有人可以共享代码来做（C）..或任何优雅的问题解决方案，那就更好了。谢谢！

表A

```
Name id Tag     Comment
n1    1  t1    my t1 comment for id 1
n2    2  t1    my t1 comment for id 2
n3    3  t1    my t1 comment for id 3
n4    4  t1    my t1 comment for id 4
n5    5  t1    my t1 comment for id 5 
```

* * *

表 B

```
Name  id  Tag         Comment
n1    1   t1        my t1 comment for id 1*
n1    1   t2        my t2 comment for id 1
n1    1   t3        my t3 comment for id 1
n1    1   t4        my t4 comment for id 1
n2    2   t1        my t1 comment for id 2
n3    3   t1        my t1 comment for id 3
n4    4   t1        my t1 comment for id 4
n5    5   t1        my t1 comment for id 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T18:59:29.900

在您的桌子上测试了此代码，它应该可以工作

```
Sub NewRows()

Dim i As Long
Dim k As Long
Dim lastRow As Long
Dim wb As Workbook
Dim ws As Worksheet

Set wb = ThisWorkbook
Set ws = wb.Sheets("test")
lastRow = Range("B" & Rows.Count).End(xlUp).Row ' I assume that your unique ID's are in column B

For i = lastRow To 2 Step -1 '3 is the first row where you have data
    For k = 4 To 2 Step -1 'Amount of new lines you want to insert
          ws.Rows(i + 1).Insert shift:=xlShiftDown ' insert row
          ws.Range("A" & i + 1).Value = ws.Range("A" & i).Value 'copy value in column A from original entry
          ws.Range("b" & i + 1).Value = ws.Range("b" & i).Value 'copy value in column A from original entry
          ws.Range("C" & i + 1).Value = "T" & k 'update tag info for each new line
          ws.Range("d" & i + 1).Value = "this is " & ws.Range("C" & i + 1).Value & " comment for " & ws.Range("A" & i + 1).Value

    Next k
Next i

End Sub 
```

我不确定你如何用评论填充 D 列，但同样的原则也适用。

# sql - 计算报告和计数（解码（））

> ID：14856128
> 
> 赞同：0
> 
> 时间：2013-02-13T14:45:53.897
> 
> 标签：sql, sqlplus

任何人都可以在这里向我解释此代码的细分，以便我更好地理解它：

```
COMPUTE SUM LABEL TOTAL OF "xxx" ON REPORT 
```

据我了解，我正在计算标有“xxx”的列的总和，称为总计，它将在列底部显示总计，但让我失望的是 ON REPORT 部分。这意味着什么？

还：

```
COUNT(DECODE()) 
```

这段代码也让我失望。感谢您阅读我的问题，并提前感谢您的任何解释！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:25:57.383

> decode 函数的语法是：
> 
> 解码（表达式，搜索，结果 [，搜索，结果]... [，默认]）
> 
> ***表达式***是要比较的值。
> 
> ***search***是与表达式进行比较的值。
> 
> ***result***是返回的值，如果表达式等于搜索。
> 
> ***默认***是可选的。如果未找到匹配项，则解码将返回默认值。如果省略默认值，则解码语句将返回 null（如果未找到匹配项）

我在[Tech on the Net 上](http://www.techonthenet.com/oracle/functions/decode.php)找到了这些信息。我发现它非常有用，所以我想我会分享！这与 sgeddes 提供的内容相结合，这是指向[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12014.htm)找到的 COMPUTE 命令的 Oracle 文档的链接，回答了我的问题。

# actionscript-3 - 阻止 url 加载器

> ID：14856129
> 
> 赞同：0
> 
> 时间：2013-02-13T14:45:56.210
> 
> 标签：actionscript-3, flash

我需要在运行时加载一些图像，但我不能使用事件，因为我有这样的代码块：

```
loader.load(request);
//do something with loaded resource 
```

我想避免主动等待

```
 while (condition) <sleep> 
```

循环...没有办法使 load() 方法阻塞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:30:00.303

不，你不能。Flash本质上是非阻塞的。作为单线程，这是允许应用程序在执行 I/O 时响应用户事件和更新屏幕的唯一方法。即使在最新版本的 Flash Player 中添加了 Workers，它们仍然不允许您执行类似的同步操作。

# android - 带分隔符的 CursorAdapter - 如何获得正确的光标？

> ID：14856130
> 
> 赞同：0
> 
> 时间：2013-02-13T14:45:56.883
> 
> 标签：android, android-sqlite, android-cursoradapter

我正在尝试使用在视图之间添加分隔符`CursorAdapter`。

我知道如何自己添加分隔符，但我不确定如何获得适合`Cursor`此类任务的方法。存储在内部的所有数据都`CotentProvider`以 SQLite 数据库为后盾。

分隔符存储为：`_id, name`

项目存储为：`_id, name, ... , separator_id`

**到目前为止我看到的解决方案**

1.  获取所有分隔符。对于每个分隔符独立地检索项目。我认为会有很大的开销......还是我错了？
2.  加入表格`item.separator_id = separator._id`并按分隔符的某些字段对结果进行排序。然后，在内部`CursorAdapter`查找更改`separator_id`并插入分隔符视图。很乱，我想。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:25:50.220

最好使用分隔符枚举。但在你的情况下

```
public Cursor getItemList(){
     return db.rawQuery("SELECT * FROM Items NATURAL JOIN Separators ON Item.separator_id = Separators._id");
    } 
```

创建您的自定义 CursorAdapter 并以您的方式在 bindView 方法中管理它。带有视图分隔符的布局应包含 ImageView 作为分隔符。

```
public class MyCursorAdapter extends CursorAdapter {
      LayoutInflater inflater;
      public MyCursorAdapter(Context context, Cursor c) {
        super(context, c);
        inflater = LayoutInflater.from(context);
      } 
```

```
@Override
      public void bindView(View view, Context context, Cursor cursor) {
        //cursor is already setted to requared position, just get your column
        TextView tv1 = (TextView)view.findViewById(R.id.textView1);
        TextView tv2 = (TextView)view.findViewById(R.id.textView2);
        tv1.setText(cursor.getString(1));
        tv2.setText(cursor.getString(2));
        ImageView myImageView = (ImageView)fimdViewById(R.id.my_image_view);
        if(cursor.getString(5) == "line"){
          myImageView = getResources().getIdentifier("yourpackagename:drawable/line.png");
        }else if(cursor.getString(5) == "wave"){
          myImageView = getResources().getIdentifier("yourpackagename:drawable/wave.png");
        ...
      } 
```

```
 @Override
          public View newView(Context context, Cursor cursor, ViewGroup parent) {
            //here is view for each raws
            return inflater.inflate(R.layout.my_raw_view, parent, false);
          }
        } 
```

# c# - 会话终止时的链接

> ID：14856139
> 
> 赞同：1
> 
> 时间：2013-02-13T14:46:15.113
> 
> 标签：c#, asp.net-mvc, authentication

您好，任何人都可以帮我解决我遇到的问题。每次我在我的 mvc c# web 应用程序中注销时，问题如下我想要的是重定向到登录页面。
它可以通过在控制器中使用以下内容来完成：

```
[Authorize]
public ActionResult Details(int id = 0){
    if (!Request.IsAuthenticated){
        return RedirectToAction("Login","Account");
    }
    else{
        // TODO if user is logged in
    }
} 
```

但是代码永远不会被命中，而是调用帐户控制器中的登录操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:51:24.917

我还没有对此进行测试，但是您可以想象在单击链接时对您的应用程序进行轻量级的 jQuery AJAX 调用。如果 AJAX 调用成功，您将登录并打开模式。如果不成功，重定向到登录页面。

# url - 如何设置动作 url 和更改 css

> ID：14856144
> 
> 赞同：0
> 
> 时间：2013-02-13T14:46:28.880
> 
> 标签：url, wordpress

我有一个按钮，按下时会在屏幕上打开一个窗口有没有办法让窗口自动打开一个 URL？此站点的示例[http://karevn.com/](http://karevn.com/)有按钮 FEEDBEACK 我希望窗口将仅使用命令 URL 打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:52:22.093

您提到的站点正在使用此插件-> [http://wordpress.org/extend/plugins/usernoise/](http://wordpress.org/extend/plugins/usernoise/)

但是，该插件不是最新的，因此只需在使用它之前对其进行测试，然后备份文件/数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:51:14.403

karevn 使用像 FancyBox 这样的 jquery 插件（请参阅本页[http://fancybox.net](http://fancybox.net)中的 ajax 部分或 iframe ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:55:32.237

打开带有超链接的窗口

[单击超链接时如何打开新窗口？](https://stackoverflow.com/questions/1580987/how-to-open-a-new-window-when-clicking-a-hyperlink)

如果你想要反馈按钮，那么

[http://www.script-tutorials.com/css3-modal-popups/](http://www.script-tutorials.com/css3-modal-popups/)

祝你好运

# spring - Spring 请求映射：与 url 模式匹配

> ID：14856149
> 
> 赞同：0
> 
> 时间：2013-02-13T14:46:56.103
> 
> 标签：spring, servlets, spring-mvc

我有一个带有 Spring MVC 的 Web 应用程序。

web.xml

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.do</url-pattern>
    <url-pattern>/companies/*</url-pattern>
</servlet-mapping> 
```

弹簧控制器方法：

```
class RealmInfoController{

    @ResponseBody
    @RequestMapping(value = {"/companies/{companyId}/realms/{realmName}"})
    public RealmInfo realmInfo(@PathVariable long companyId, @PathVariable String realmName) 
```

处理程序匹配：

```
http://localhost:6122/context/companies/15877/realms/firstRealm 
```

当服务器获得这个 url 时，spring servlet 被调用。但它不能匹配控制器方法。

但是，如果我将请求映射更改为“/{companyId}/realms/{realmName}”，那么它与控制器方法匹配。但是定义没有'/companies'的url映射并不好。是否可以以某种方式指示 Spring 查找匹配项，包括 servlet 中指定的 url 模式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:42:47.937

如果您想在请求映射中使用“公司”，您应该将调度程序 servlet 映射到根：

```
<url-pattern>/*</url-pattern> 
```

# asp.net - Razor、intellisense 和 lambda 表达式的类型错误

> ID：14856156
> 
> 赞同：2
> 
> 时间：2013-02-13T14:47:15.910
> 
> 标签：asp.net, razor, intellisense

我正在使用 Visual Studio 2012、ASP.NET MVC 4 和 Razor 视图。考虑以下代码：

```
@{
    Action<Action<int>> fun = x => { x(42); };
    fun(x =>  { PrintX(x); }); // This is OK
    fun(x =>  { var z = PrintX(x); }); // This produces error
    // "Argument 1: cannot convert from 'lambda expression' to
    // 'System.Action<int>'"
}
@helper PrintX(int x) { <div>@x</div> } 
```

不知何故，将字符添加`var z =`到 lambda 函数的内容使其无法将其转换为正确的类型（实际上，任何形式的获取该函数的值都会给出这种情况）。

但是，此错误仅由 IntelliSense 产生。它在运行时工作。

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:07:33.070

呵呵，自己解决了。:) 问题是该方法返回一个类型`System.Web.WebPages.HelperResult`，该类型在程序集中定义`System.Web.WebPages`。不幸的是，就 IntelliSense 而言，该程序集没有加载，所以奇怪的事情开始发生。

要修复它，我需要做的就是将以下行添加到我的 web.config 中：

```
<add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/> 
```

（是的，毕竟我还在使用旧的 MVC 3。我的错误，解决了这个问题）

# android - 从 ActionBar 获取项目视图

> ID：14856167
> 
> 赞同：2
> 
> 时间：2013-02-13T14:47:42.647
> 
> 标签：android, actionbarsherlock, activity-lifecycle, android-inflate

我的栏中有一个带有一个菜单项的 ActionBarSherlock。当我调用 `View item = findViewById(R.id.my_item);`活动的按钮时，`onClick`一切都按预期工作。但是，当我尝试在其中或什至在其中执行此操作时`onCreate`，`onResume`它`onPostResume`总是`null`. 在从资源中扩充我的菜单后，我也尝试过这样做`onCreateOptionsMenu(Menu menu)`，但没有任何成功。

因此，我无法理解何时创建操作栏项目以及如何捕捉这一刻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:37:19.083

正如[这里](https://stackoverflow.com/a/14286818/571914)和[这里](https://stackoverflow.com/a/8610783/571914)所说的，`getActionView`返回我们设置的视图`setActionView`。[因此，这里](https://stackoverflow.com/questions/8598015/different-look-style-for-specific-menu-item-on-actionbar)描述的唯一一种自定义操作栏菜单项的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T09:21:48.970

实际上，即使没有自定义，也可以获得操作项的视图。

但是，请注意，有时操作项会位于溢出菜单内，因此您可能会得到一个空值。

那么，你怎么能做到呢？

这是一个示例代码：

```
public boolean onCreateOptionsMenu(final Menu menu) {
  getSupportMenuInflater().inflate(R.menu.main, menu);
  new Handler().post(new Runnable() {
    @Override
    public void run() {
      final View syncItemView = findViewById(R.id.action_search);
      ... 
```

这是在 android 4.1.2 和 android 2.3.5 上使用 actionBarSherlock 库时测试的。

另一种选择是使用更广泛的方式，在[showcaseView 库](https://github.com/Espiandev/ShowcaseView)上使用，[here](https://github.com/amlcurran/ShowcaseView/blob/master/library/src/main/java/com/github/amlcurran/showcaseview/ShowcaseView.java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T23:45:53.217

首先得到一个菜单参考如下：

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
     getMenuInflater().inflate(R.menu.custom_menu, menu);
     customMenu = menu;
     return super.onCreateOptionsMenu(menu);
 } 
```

之后你可以得到你需要的项目如下

```
 customMenu.getItem(0); 
```

# highstock - Highstock 在柱状图缩放后返回不正确的 x 值（日期时间）

> ID：14856170
> 
> 赞同：0
> 
> 时间：2013-02-13T14:47:49.167
> 
> 标签：highstock

在任何类型的缩放（鼠标拖动、范围选择器、日期输入）之后，从点单击事件返回的日期时间通常是不正确的。使用面积图时我还没有发现这个问题，使用条形图和柱形图都发现了它。
要重新创建：运行小提琴，使用鼠标在几列上缩放，单击一个数据点。警报将显示返回的日期时间。请注意，它与工具提示不同（这是正确的）。
通常在第一次单击后会失败，即使对于相同的数据点也是如此。
顺便说一句，useUTC 设置无关紧要。

小提琴：http: [//jsfiddle.net/jrEDT/](http://jsfiddle.net/jrEDT/)

完整性代码：

```
$(function() {
var seriesOptions = [],
    yAxisOptions = [],
    seriesCounter = 0,
    names = ['MSFT'],
    colors = Highcharts.getOptions().colors;

$.each(names, function(i, name) {

    $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename='+ name.toLowerCase() +'-c.json&callback=?',   function(data) {

        seriesOptions[i] = {
            name: name,
            data: data,
            type: 'column'
        };

        // As we're loading the data asynchronously, we don't know what order it will arrive. So
        // we keep a counter and create the chart when all the data is loaded.
        seriesCounter++;

        if (seriesCounter == names.length) {
            createChart();
        }
    });
});

// create the chart when all data is loaded
function createChart() {
    Highcharts.setOptions({
        global: {
            useUTC: false // datetime reflects time on db (ie, local) rather than GMT
        }
    });
    chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container',
            zoomType: 'x'
        },
        exporting: {
            enabled: false
        },
        rangeSelector: {
            selected: 4
        },
        yAxis: {
            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }],
            offset: 25
        },
        plotOptions: {
            series: {
                cursor: 'pointer',
                allowPointSelect: true,
                point: {
                    events: {
                        click: function() {
                            var series = this.series.name;
                            var utc = this.x;
                            var d = Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x);
                           alert(d);
                        }
                    }
                }
            }
        },
        tooltip: {
            formatter:function(a,b,c){
                var d = Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x);
                return d;
            },
            enable:true
        },
        series: seriesOptions
    });
} 
```

});

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:18:44.460

您是否尝试过禁用数据分组[http://api.highcharts.com/highstock#plotOptions.series.dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)？

# python - django web 应用程序竞争条件在文件中

> ID：14856175
> 
> 赞同：0
> 
> 时间：2013-02-13T14:47:57.717
> 
> 标签：python, django, multithreading, apache, race-condition

我有一个提供 C 代码编辑器的 django web 应用程序，文本被发送到托管在另一台服务器中的另一个 django 应用程序，该服务器将代码写入 .c 文件中编译它并发送回响应。

当应用程序与多个用户一起使用时，问题是编写和编译文件会导致竞争条件问题。

这就是我发送数据的方式：

```
def comp(request):   
encoded_data = urllib.urlencode(request.POST)    
url = urllib2.urlopen('http://serverIpadress/compile/?' + encoded_data)    
tml = url.read()
return HttpResponse(tml) 
```

这就是在第二个 django 应用程序上处理数据的方式

```
def compile(request):
data2=urllib.urlencode({'': request.GET.get('content','')})
request.encoding ='koi8-r'
data=request.GET.get('content','')
handle=open('/home/user/file.c','r+')
handle.write(request.GET['content'])
handle.close()
res = commands.getstatusoutput('gcc -Wall /home/user/file.c -o /home/user/file;home/user/file')
return HttpResponse(res) 
```

我试过使用信号量

```
sem = threading.BoundedSemaphore()
sem.aquire()
writing to file
compiling
sem.release() 
```

但问题仍然存在

我一直在寻找解决方案，但我发现的唯一解决方案是关于使用事务的数据库

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:59:45.867

似乎您`/home/user/file.c`对每个请求都使用一个文件。所以，比赛条件迫在眉睫。

有两种解决方案：

1）写入临时文件。临时文件可以从 tempfile 模块生成，或者您可以创建随机文件名。

2）写入内存文件。您可以使用`StringIO`（或更快`cStringIO`的）模块来创建这样的文件，然后您可以将其通过管道传输到 gcc。

对于解决方案1），有很多方法可以做到这一点，但这是我的解决方案：

改变这部分

```
data=request.GET.get('content','')
handle=open('/home/user/file.c','r+')
handle.write(request.GET['content'])
handle.close() 
```

至

```
# you need 'random', 'string', 'os' modules imported
data=request.GET.get('content','')
filename = "".join(random.sample(string.letters, 10)) + ".c" #sample 10 letters from A-z
filepath = os.path.join('home','user','filename')
handle=open(filepath,'r+')
handle.write(request.GET['content'])
handle.close()
res = commands.getstatusoutput('gcc -Wall %s -o /home/user/file;home/user/file' %filepath)
os.remove(filepath) #remove temporary file after compiling 
```

此外，该`commands`模块已被弃用。你应该使用`subprocess.call`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:52:17.717

您应该为每个请求生成随机文件并使用它。[tempfile](http://docs.python.org/2/library/tempfile.html)模块可以帮助您。

此外，如果您不关心生成的二进制文件，那么使用`-o /dev/null`是个好主意。

# python - 定义它们时如何引用现有的类变量

> ID：14856180
> 
> 赞同：4
> 
> 时间：2013-02-13T14:48:15.643
> 
> 标签：python

我想做：

```
class Whatevs(object):
    foo = 3
    bar = foo * 3

    def __init__(self):
        # enhance! 
```

或我如何才能使其正常工作。;)

**编辑：**

好的，事实证明这不是问题，上面的工作正常，*但是*：

```
class Whatevs(object):
    foo = 3
    zap = list(foo for _ in range(10)) 
```

哦，你，蟒蛇！我可以想出一些解决方法，但是有人可以向我解释到底发生了什么吗？为什么生成器不能访问类变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:04:39.760

生成器推导实际上是显式定义生成器的简写。在幕后，您尝试编写的内容相当于：

```
class Whatevs(object):
    foo = 3
    def _gen():
        for _ in range(10):
            yield foo
    zap = list(_gen()) 
```

不幸的是，您无法访问范围变量，例如`foo`从生成器内部或类主体中定义的函数（并且您不能使用`Whatevs.foo`，因为`Whatevs`尚不存在。

一种选择是将代码移到类主体之外：

```
class Whatevs(object):
    foo = 3

Whatevs.zap = list(Whatevs.foo for _ in range(10)) 
```

另一种选择是将 foo 转换为参数：

```
def _init_zap(foo):
    return list(foo for _ in range(10))

class Whatevs(object):
    foo = 3
    zaps = _init_zap(foo) 
```

在 Python 2.x 中，列表推导在这里有效，但 Python 3.x 的变化之一是列表推导也使用单独的范围（即隐藏函数），就像生成器推导一样，因此列表推导在 Python 3 中也会中断.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:51:51.753

你可以试试：

```
class Whatevs(object):
    foo = 3
    zap = [foo] * 10 
```

甚至：

```
class Whatevs(object):
    foo = 3
    zap = [foo for _ in range(10)] 
```

原因是 Python 中的类有自己的命名空间。引入此命名空间的作用域无法访问此命名空间，因此，从生成器表达式的作用域中，您无法访问`Whatevs`' 命名空间内的变量。

我的列表理解并没有引入新的作用域——至少在 Python 2.x 中是这样。在 Python 3.x 中，这已经改变，所以我的选项 2 也不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:50:55.087

一个通用的解决方案是包装一个 lambda 函数，在 Python2 和 Python3 中的工作方式相同

```
class Whatevs(object):
    foo = 3
    zap = (lambda foo=foo:list(foo for _ in range(10)))() 
```

# javascript - 使用 404 页面进行 ajax 回退？

> ID：14856182
> 
> 赞同：0
> 
> 时间：2013-02-13T14:48:19.607
> 
> 标签：javascript, ajax, http, http-status-code-404

我想制作一个单页网站，它使用 history.pushstate 来更改 url。我可以让我的网站只有一个 html 文件，即 404 页面。这样无论人们输入什么网址，他们都会进入该页面。

我的问题是：以这种方式滥用 404 页面有缺点吗？

谷歌在乎吗？有浏览器怪癖吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:50:52.650

更好的解决方案是让除 / 以外的所有 URL 都永久重定向到 /。在任何情况下，您都不应该真正返回 404 状态代码，因为至少某些版本的 IE 会显示自己的错误页面，而不是您发回的任何 HTML。

# javascript - Bulletproof 使用 jQuery 显示/隐藏动画框

> ID：14856183
> 
> 赞同：0
> 
> 时间：2013-02-13T14:48:24.817
> 
> 标签：javascript, jquery, jquery-animate

我正在尝试实现以下最终结果：在页面加载时，有一个带有标题（或图像、某些元素等）的内容框。当您将鼠标悬停在此内容框上时，原始内容会淡出，并被新内容替换。此外，该框将通过动画放大。在鼠标移出时，内容框将在页面加载时通过淡出新内容、淡入旧内容并将内容框返回到其原始高度来恢复其原始状态。

我所做的确实有效，但它不是防弹的。您可以将鼠标悬停在该框上，鼠标悬停，然后再次将鼠标悬停在该框上，它将以原始高度显示该框并带有新内容。

我试图找出一种防弹的方法来做到这一点，并让它在 IE8+/Chrome/Safari/Firefox 中工作。必须有一些我忽略的简单方法来完成此操作，但我在寻找一种好方法时遇到了一些麻烦。

我尝试向元素添加一个动画类，动画完成后将其删除，然后`setTimeout`在 400 毫秒后检查该类是否仍然存在，但我在 IE8 中使用该方法时遇到了一些问题。

不太确定我可以尝试的其他任何事情，如果有人有任何建议，我将非常感谢您的帮助。

提供的 JSFiddle 提供了我正在尝试做的基本想法。我只是在寻找一种防弹的方法来做到这一点。

JSFiddle：http: [//jsfiddle.net/Ur78U/1/](http://jsfiddle.net/Ur78U/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:10:02.057

我想出的解决方案是使用 jQuery`fadeTo()`方法。

这确保了动画将完成并且不会像我的示例中那样卡住。

这是一个小提琴：http: [//jsfiddle.net/Ur78U/2/](http://jsfiddle.net/Ur78U/2/)

# android - android gcm中的通知类型

> ID：14856186
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:48:30.590
> 
> 标签：android, push-notification, google-cloud-messaging

我决定在 GCM 上使用推送通知。android 推送通知的类型有哪些？我说的是适用于 android 的 Google 云消息服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:17:38.990

没有类型。你可以发送任何你想要的，只要不超过 4096 字节。您的 Android 应用程序负责接收数据并随心所欲地处理它（例如，它可以将其显示为通知，它可以打开在特定活动中发送通知的应用程序等...）。没有用于在客户端显示 GCM 消息的预定义 GUI。

# windows - 向 Windows localhost 添加一些延迟

> ID：14856188
> 
> 赞同：1
> 
> 时间：2013-02-13T14:48:31.927
> 
> 标签：windows, flash, testing, localhost, latency

好的，自从我开始寻找解决方案以来已经快 2 天了，还没有希望。我们正在开发一款使用 Flash 的实时动作游戏。不同的玩家通过对等连接相互连接。所以我在我的电脑上测试了这个应用程序，同时有两个或更多的客户端。现在由于不同客户端之间存在 P2P 连接，并且它们都在我的计算机上运行，​​它们之间几乎没有延迟（5-10 毫秒），所以当我测试它看起来不错，当我们通过互联网测试它时延迟较大（最多 100 毫秒）时，会出现一些同步问题。我不可能一直通过互联网测试这个应用程序，因为我需要查看客户端之间的差异以了解要更改的内容。

由于客户端之间的连接是无缝的，我无法找出这些客户端使用哪些端口，所以我实际上无法使用所有这些“本地主机代理”程序。我发现了一个很棒的工具 WANem，它可以为通过它的所有流量增加一些延迟。所以主要问题是 - 我无法通过任何命令重新路由我的本地主机（127.0.0.1）流量

```
route add 127.0.0.1 mask 255.255.255.255 192.168.0.15 
```

根本不起作用。如果我想向它添加一个 localhost 接口

```
route add 127.0.0.1 mask 255.255.255.255 192.168.0.15 if 0x1 
```

它只是打印出一些错误。192.168.0.15是WANem的IP地址

除了路由我的本地主机流量之外的一切都工作得很好。

再一次 - 我几乎搜索了整个互联网，并没有关于在 Windows 上路由本地主机流量。也许还有另一种方法可以在不知道端口的情况下向 localhost 添加一些延迟。

# javascript - 移动 div 时的不透明度而不是鼠标向下 JavaScript

> ID：14856191
> 
> 赞同：0
> 
> 时间：2013-02-13T14:48:42.197
> 
> 标签：javascript

我已经为可拖动的 div 设置了不透明度，但问题是我不想在鼠标按下时添加不透明度，只有当我开始移动 div 时。应该连接到 X 和 Y，但我真的不明白如何。

这就是我所拥有的。

```
 function startDrag(evt) { // To start the opacity function

        this.style.opacity = "0.5";
} 
```

并停在 och mouse up

```
 function changeClass() {
            var diceClass = document.getElementsByClassName("draggble");
            for (var i = 0; i < diceClass.length; i++) {
                diceClass[i].style.opacity="1";
            }
        } 
```

jsFiddle [http://jsfiddle.net/dymond/tQdFZ/6/](http://jsfiddle.net/dymond/tQdFZ/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:51:50.257

我`this.style.opacity = "0.5";`从`startDrag`一个功能转移到`moveAlong`另一个功能。

[演示](http://jsfiddle.net/tQdFZ/7/)

```
(function (document) {

    var draggable = document.getElementsByClassName('draggable'),
        draggableCount = draggable.length,
        i, currZ = 1;

    function startDrag(evt) {

        var diffX = evt.clientX - this.offsetLeft,
            diffY = evt.clientY - this.offsetTop,
            that = this;

        this.style.zIndex = currZ++;

        function moveAlong(evt) {
            that.style.left = (evt.clientX - diffX) + 'px';
            that.style.top = (evt.clientY - diffY) + 'px';
            that.style.opacity = "0.5";
        }

        function stopDrag() {
            document.removeEventListener('mousemove', moveAlong);
            document.removeEventListener('mouseup', stopDrag);
            changeClass()
        }

        function changeClass() {
            var diceClass = document.getElementsByClassName("draggable");
            for (var i = 0; i < diceClass.length; i++) {
                diceClass[i].style.opacity = "1";
            }
        }

        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('mousemove', moveAlong);
    }

    for (i = 0; i < draggableCount; i += 1) {
        draggable[i].addEventListener('mousedown', startDrag);
    }
}(document)); 
```

# php - eclipse / Zend Studio：如何从外部添加 PHP 服务器和调试配置？

> ID：14856198
> 
> 赞同：0
> 
> 时间：2013-02-13T14:49:02.457
> 
> 标签：php, eclipse, debugging, automation, zend-studio

是否可以创建新的 PHP 服务器

![在此处输入图像描述](../Images/8c9a11cfc3b480d7046a98ed1088e2aa.png)

和调试配置集

![在此处输入图像描述](../Images/6ef147c12ec958e1136b5e12b5e7b338.png)

![在此处输入图像描述](../Images/af0211afe73bd3f70865d065adb07a2c.png)

在日食之外？我需要创建/更改哪些文件才能执行此操作？

我想编写一个脚本来自动化这个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:56:29.257

我在 Eclipse 社区论坛中得到了[答案。](http://www.eclipse.org/forums/index.php/mv/msg/455361/1012283/#msg_1012283)

> PHP 服务器保存在 {workspace}/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.php.server.core.prefs
> 
> 调试（启动）配置存储在 {workspace}/.metadata/.plugins/org.eclipse.debug.core/.launches
> 
> （直接编辑那些文件当然是有悖常理的）

# math - 基于用户输入的代价函数的加权输出

> ID：14856199
> 
> 赞同：0
> 
> 时间：2013-02-13T14:49:02.690
> 
> 标签：math, weighted-average

嗨，我正在创建一个 Android 应用程序，它将为使用路线查找器的用户生成自行车路线。

我试图让用户更喜欢距离或存在自行车道的路线。

我有一个从 0 到 10 的滑块，其中 0 表示用户想要最短的路线，而 10 表示用户想要带有自行车道的道路（如果有的话）。

道路表示为图表，我有一个函数可以计算从一个点到另一个点的最短路径。

给定此函数的输出：如果道路上有自行车道，我想对结果进行加权，以便用户选择的数字越大，道路成本越低，反之亦然。

我不太确定加权函数是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:34:01.140

如果您使用类似 dijkstra 的算法计算路线，在自行车道边缘的情况下，您应该根据滑块值将两点之间的距离简单地减少某个值

# java - 编辑文本文件 dojo

> ID：14856200
> 
> 赞同：0
> 
> 时间：2013-02-13T14:49:05.270
> 
> 标签：java, javascript, dojo, ejb-3.1

我正在学习道场和初学者。我想使用 Dojo 从界面加载和编辑文本文件。请指导我 dojo 中的哪个组件足以满足此要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:55:06.600

从对我的评论的回答来看，我的理解是你想要：

1.  在网页上的表单中输入文件名。
2.  然后，Dojo 将从您的服务器加载该特定文本文件。
3.  然后该文件需要以某种编辑组件显示在屏幕上。
4.  然后，用户需要该工具将文件发布回服务器。

我会认为最好的方法是使用[dojo/request](http://dojotoolkit.org/documentation/tutorials/1.8/ajax/)来获取文本文件，然后再次使用它来回发。您可以使用各种[道场 dijit](http://dojotoolkit.org/reference-guide/1.8/dijit/form.html#dijit-form)来进行选择和显示。

一个非常粗略的解决方案是：

```
<form data-dojo-type="dijit/form/Form">

    <input type="text" id="fileName" data-dojo-type="dijit/form/TextBox" />
    &nbsp;<button data-dojo-type="dijit/form/Button" type="button">Get
        <script type="dojo/on" data-dojo-event="click">
            require([
                "dijit/registry",
                 "dojo/request"
            ], function(registry, request) {
                var fileName = registry.byId("fileName").get("value");

                request(fileName, {
                    "handleAs": "text"
                }).then(function(content){
                    registry.byId("content").set("value", content);
                });
            }); 
        </script>
    </button><br /><br />

    <textarea id="content" data-dojo-type="dijit/form/TextBox"></textarea>
    <button data-dojo-type="dijit/form/Button" type="button">Send
        <script type="dojo/on" data-dojo-event="click">
            require([
                "dijit/registry",
                "dojo/request"
            ], function(registry, request) {
                var content = registry.byId("content").get("value");
                request("myhandler.php", {
                    "method": "post",
                    "data": {
                        "content": content
                    }
                }).then(function(content){
                    // deal with the response
                });
            }); 
        </script>
    </button>

</form> 
```

这将使用您在文本框中输入的文件名加载一个文本文件（单击*get*之后）。内容被加载到文本区域中进行编辑，并且可以通过单击发送回服务器脚本*发送*。

正如我所说，这是“一个非常粗略的例子”。但是，它显示了使用[dojo/request](http://dojotoolkit.org/documentation/tutorials/1.8/ajax/)来接收和发布信息到/从服务器。显然，您需要一个更复杂的解决方案，在适当的时候隐藏/显示小部件。您可能希望用通过您的服务器代码填充的某种组合替换文件名文本框......等等。

我建议您[编写自己的小部件](http://dojotoolkit.org/documentation/tutorials/1.8/templated/)来封装整个操作，而不是在标记中全部声明。您可以使用[dojo/request](http://dojotoolkit.org/documentation/tutorials/1.8/ajax/)从服务器加载 json 文件以填充组合框以选择文件。您还需要确保回发的信息来自受信任的来源。

**重要的！**这仅在文本文件和您的网页位于同一域中时才有效。它不适用于跨域请求。如果你想做跨域，你需要创建一个 json 解决方案。

# machine-learning - 任何用于 MATLAB 的快速提升工具箱？

> ID：14856201
> 
> 赞同：0
> 
> 时间：2013-02-13T07:24:21.143
> 
> 标签：machine-learning, matlab

我找到了一些 MATLAB 工具箱，但它们的执行速度非常慢，因此我正在寻找更快的实现。如果您对此有任何建议，请与我分享。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:05:36.057

网上有很多版本，但我找不到适合我需要的版本，所以我自己做了，你可以在[https://sites.google.com/site/carlosbecker/resources/gradient-boosting-找到增强树](https://sites.google.com/site/carlosbecker/resources/gradient-boosting-boosted-trees)。

它是多线程的，提供 MATLAB mex 文件并允许回归和分类。它非常快，尤其是与 MATLAB 的内置分类器相比。

希望有帮助！

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:38:46.567

The Matlab Statistics Toolbox includes a regression ensemble ([http://www.mathworks.com/help/stats/regressionensembleclass.html](http://www.mathworks.com/help/stats/regressionensembleclass.html)) and a classification ensemble class ([http://www.mathworks.com/help/stats/classificationensembleclass.html](http://www.mathworks.com/help/stats/classificationensembleclass.html)), both of which are reasonably fast.

# javascript - javascript 数组长度未显示在我的控制台日志中

> ID：14856208
> 
> 赞同：1
> 
> 时间：2013-02-13T14:49:39.680
> 
> 标签：javascript, arrays, for-loop

我正在开发一个 HTML5 画布游戏，并且我有一组图像被绘制到画布上。数组中的图像当前都被正确绘制，我有一个 console.log 行，我想用它来在控制台中显示数组的大小。但由于某种原因，控制台一直告诉我数组长度未定义。

我用来打印数组长度的行是：

```
console.log("sources array length = " + sources.length); 
```

它在一个 for 循环中：

```
 for (index=0;index < numImages ;index++){
        console.log(index);
        images[index] = new Image();
        images[index].src = sources[index];
        console.log("Adding " + sources[index]);
        callback(images[index]);
        console.log("sources array length = " + sources.length);
    } 
```

如您所见，我在循环中有另一个 console.log 语句，用于记录每次运行循环...

```
console.log(index); 
```

此行在每次运行循环时打印变量 index 的值，从 0 开始，每次增加 1，直到循环到达等于变量 'numImages' 的值时结束。

但是，由于某种原因，每次循环运行时，应该打印数组长度的行都显示“源数组长度=未定义”，而不是数组的实际长度。

谁能向我指出这是为什么？每次运行循环时，如何让它显示源数组的长度？

**编辑 13/02/2013 @ 15:10**

源数组在同一个文件中定义，使用以下行：

```
var sources = {}; 
```

我没有为数组定义设定长度的原因是因为我需要它的长度是动态的。然后我使用这样的行将元素添加到数组中：

```
sources[0] = document.getElementById("building").src,
sources[1] = document.getElementById("chair").src,
sources[2] = document.getElementById("drink").src,
sources[3] = document.getElementById("food").src, 
```

所以我想要我的console.log 行做的是告诉我当前数组的长度，即添加了多少元素。正如您在原始帖子中的第一段代码中看到的那样，我有一个 console.log ，每次将元素添加到源数组时，它都会向控制台打印一条消息 - 它们显然被正确添加，否则，它们不会显示在画布上......因此数组必须具有在图像绘制到画布时定义的长度，否则它们不会在要绘制的数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:52:03.567

> 但是，由于某种原因，每次循环运行时，应该打印数组长度的行都显示“源数组长度=未定义”，而不是数组的实际长度。

...这告诉我们`sources`没有`length`属性，因此不是数组。完全有可能构建*不是*数组但仍然具有名称如`0`,`1`等的属性。例如：

```
var sources = {0: "zero", 1: "one", 2: "two"};
console.log(sources[0]); // "zero"
console.log(sources.length); // "undefined" 
```

如果您`sources`通过输出一些服务器端信息来获得，它很可能以上面的形式输出（一个带有数字属性名称的普通对象，可能会用引号引起来）而不是一个实际的数组，看起来像这：

```
var sources = ["zero", "one", "two"]; 
```

* * *

重新编辑

> 源数组在同一个文件中定义，使用以下行：
> 
> ```
> var sources = {}; 
> ```
> 
> 我没有为数组定义设定长度的原因是因为我需要它的长度是动态的。然后我使用这样的行将元素添加到数组中：
> 
> ```
> sources[0] = document.getElementById("building").src,
> sources[1] = document.getElementById("chair").src,
> sources[2] = document.getElementById("drink").src,
> sources[3] = document.getElementById("food").src, 
> ```

这不是问题，JavaScript 数组是动态的（事实上，它们[根本不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html) ——或者至少，标准类型不是，有更新的类型实际上是数组）。所以只要改变

```
var sources = {}; 
```

到

```
var sources = []; 
```

使它实际上是一个数组。然后你可以按照你已经在做的方式添加到数组中（这绝对没问题）*，或者*你可以使用`sources.push(document.getElementById("chair").src);`等来代替。

# javascript - 从 mousedown 处理程序中取消单击处理程序

> ID：14856209
> 
> 赞同：0
> 
> 时间：2013-02-13T14:49:39.983
> 
> 标签：javascript, jquery, events, handlers

我试图阻止单击处理程序根据同一元素的 mousdown 处理程序内的条件触发。考虑一下：

```
var bool = true;

$('button').click(function() {
  console.log('clicked');
}).mousedown(function(e) {
  bool = !bool;
  if ( bool ) {
    // temporary prevent the click handler, how?
  }
}); 
```

有没有一种巧妙的方式来在处理程序之间进行交叉通信？这是一个垃圾箱：http: [//jsbin.com/ipovon/1/edit](http://jsbin.com/ipovon/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:23:46.747

这可行，不过，我不确定这是否是您正在寻找的答案。`bool=false;`如果您最初设置，它基本上是一个双击功能。

```
var bool = true;

$('button').mousedown(function(e) {
  bool = !bool;
  if ( bool ) {
    $(this).unbind('click');
  }
  else
  {
    $(this).click(function(){
        console.log('clicked');
    });
  }
}); 
```

**更新**

`mousedown`此外，如果您愿意，您可以像这样拉出点击功能：

```
var bool = true;
function buttonClick(){
  console.log('clicked');
}
$('button').mousedown(function(e) {
  bool = !bool;
  if ( bool ) {
    $(this).unbind('click');
  }
  else
  {
    $(this).click(buttonClick);
  }
}); 
```

# c# - ORA-01008并非所有变量都绑定（合并语句）

> ID：14856212
> 
> 赞同：1
> 
> 时间：2013-02-13T14:49:48.063
> 
> 标签：c#, oracle, oledb, ora-01008

我想知道我在下面的代码中做错了什么。我正在尝试将 oledbparameters 传递给合并语句。

```
cmd.CommandText = "MERGE INTO MAPPINGS " +
                          "USING DUAL " +
                          "ON ( MAP_KEY = ? AND MAP_FROM = ? ) " +
                          "WHEN MATCHED THEN UPDATE SET MAP_TO = ? " +
                          "WHEN NOT MATCHED THEN INSERT (MAP_ID, MAP_KEY, MAP_FROM, MAP_TO) " +
                          "VALUES (seq_mappings.nextval,UPPER(?),LPAD(?,10,'0'),UPPER(?)) ";

            cmd.Parameters.Add("MAP_KEY1", OleDbType.VarChar);
            cmd.Parameters.Add("MAP_FROM1", OleDbType.VarChar);
            cmd.Parameters.Add("MAP_TO1", OleDbType.VarChar);
            cmd.Parameters.Add("MAP_KEY2", OleDbType.VarChar);
            cmd.Parameters.Add("MAP_FROM2", OleDbType.VarChar);
            cmd.Parameters.Add("MAP_TO2", OleDbType.VarChar);

            cmd.Parameters["MAP_KEY1"].Value = "AUART";
            cmd.Parameters["MAP_FROM1"].Value = cs_.CustomerNr;
            cmd.Parameters["MAP_TO1"].Value = cs_.AUART;
            cmd.Parameters["MAP_KEY2"].Value = "AUART";
            cmd.Parameters["MAP_FROM2"].Value = cs_.CustomerNr;
            cmd.Parameters["MAP_TO2"].Value = cs_.AUART;

            cmd.ExecuteNonQuery(); 
```

在调试时，我可以看到传递给参数的所有值都不为空，但随后我得到“ORA-01008 - 并非所有变量都绑定”。

我认为我以错误的方式解析参数，但我不知道正确的方式是什么。我也知道 oledbcommand 也不支持命名参数。所以我尝试按照正确的顺序传递参数......但也没有成功的结果。

非常感谢，对不起我的英语

# c++ - DirectShow 原始捕获

> ID：14856213
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:49:49.527
> 
> 标签：c++, directshow

我有 DirectShow 的问题。我正在尝试从网络摄像头录制视频并以原始格式保存在磁盘上。有人可以告诉我简单的例子怎么做吗？我是新手，由于工作原因，我没有足够的时间开始学习然后去做。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:15:37.190

[MSDN 上的 DirectShow 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375468%28v=vs.85%29.aspx)：

*   AmCap Sample Capture 视频捕获应用程序。
*   PlayCap 示例捕获 简单的捕获应用程序。

使用 GraphEdit SDK 工具，您可以交互地将网络摄像头过滤器连接到[WM ASF 编写器过滤器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390985%28v=vs.85%29.aspx)并生成 Windows Media 文件（同样可以在代码中以编程方式重复）。

# graph-theory - 如何预测加权有向图网络上的边/链接/连接？

> ID：14856218
> 
> 赞同：0
> 
> 时间：2013-02-13T14:50:08.790
> 
> 标签：graph-theory, directed-graph, adjacency-matrix

给定加权有向图的邻接矩阵 A（因此矩阵元素不只是 0/1 并且矩阵不是对称的），是否有任何预测新边的好方法？

我有一个非常大（数十亿个节点）的数据集，其中一些连接的已知边缘和未观察到的连接的 NULL 值，我想使用已知边缘来预测未观察到的边缘。

如果方法不精确，那很好——事实上，如果预测低于某个阈值，我想将边保持为 NULL 或 0，只是为了保持矩阵尽可能稀疏以适应数据大小和处理速度。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:28:27.783

您可能希望深入研究随机图生成和图挖掘文献，尤其是在无标度网络上的工作。快速的互联网搜索产生了一些可能相关的论文。

*   现实世界动态网络[的概述，包括它们的属性、合适的模型和分析技术。](http://www.cs.rpi.edu/research/pdf/08-08.pdf)

*   [关于无标度网络的开创性论文](http://www3.nd.edu/~networks/Publication%20Categories/03%20Journal%20Articles/Physics/EmergenceRandom_Science%20286,%20509-512%20%281999%29.pdf)。

*   [这篇调查文章](http://web.cse.msu.edu/~cse835/Papers/Graph%20Mining%20Laws,%20Generators,%20and%20Algorithms.pdf)侧重于可在合成图生成中利用的真实图的属性。

*   [本文](http://www.cs.cmu.edu/~jure/pubs/kronecker-pkdd05.pdf)解决了作者声称在大型现实世界图中经常出现的致密化和直径缩小问题。引用了测试用例。

*   [本文](http://www.cs.purdue.edu/homes/tlafond/SurfingChungLu.pdf)专门处理生成合成社交网络图。

将给定的参考文献视为有些武断的选择。我希望有大量相关资源。

我自己的一些粗略的高级想法：您是否有任何关于实际图表的（统计）属性、权重的聚合度量或其统计分布的信息？你有关于你的抽样策略属性的任何信息（特别是偏见）吗？你的观察是否有时间标记？

如果您有统计模型，请查看最大似然估计。如果您到目前为止只有观察到的连接，并且您可以假设它们是独立同分布的，您可以将引导方法应用于您的观察集以估计图形属性的统计信息（例如，度数/的均值/方差/等）连通性/周长/重量等）。根据所讨论的度量，这条轨道可能是矫枉过正的——假设你的观察集没有偏差，而是从给定的图表中计算度量。

将此信息输入随机图生成器，该生成器允许使用启动图进行初始化。

希望这个大纲有所帮助，尽管它很模糊。此致。

# objective-c - 确定 viewcontroller 是否已经在堆栈上，如果是，则转到或关闭它

> ID：14856219
> 
> 赞同：0
> 
> 时间：2013-02-13T14:50:13.160
> 
> 标签：objective-c, xcode

我有一个正在开发的应用程序，它有一个带有两个按钮的主屏幕。一个会带你到 GPS（地图）的视图，然后在那里（新的 VC）它可以选择设置该位置或显示已标记的所有位置的列表（tableview，另一个 VC）。

在 VC 列表中，如果您单击表格单元格，它将显示带有地图的 VC。问题是，这会在堆栈上添加相同的 VC bak。如果用户单击取消按钮，他们返回一个屏幕，然后取消返回另一个屏幕，等等......直到返回主屏幕。

我知道我可以做 [self.navigationController popToRootViewControllerAnimated:YES]; 弹回根目录，但这并不总是我想要的。

另外，我知道我可以做到： [[[self presentingViewController] presentingViewController] dismissModalViewControllerAnimated:YES];

我想我的意思是我想“重用”GPS 地图视图，以便可以从其他 VC 调用它，这就是为什么我没有使用“回传”来调用 VC。那么，当按下按钮并呈现新的 VC 时，是否可以在显示新的 VC 后关闭前一个？这样，解雇当前的 VC 会带我回到我需要的地方。

我希望是有道理的，而且这个问题不属于“不是一个实际的问题”类别。

非常感谢任何帮助或更好的建议。谢谢

地理...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:32:13.147

如果您想在导航控制器的 VC 堆栈中跳回一些级别，您可能需要使用它的[`popToViewController:animated:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/popToViewController%3aanimated%3a)方法。要确定特定视图控制器是否在该堆栈上，请查看导航控制器的[`viewControllers`](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instp/UINavigationController/viewControllers)属性。不过要小心，因为这种跳跃是一种相当不标准的 UI 行为（即使有它的 API），这可能会使您的用户感到困惑。

此外，使用导航控制器和模态显示并不是管理多个视图控制器的唯一方法——您始终可以`rootViewController`自己设置窗口（并使用 UIView 动画为更改设置动画），甚至可以将自定义转换类型包装在自定义`UIStoryboardSegue`中喜欢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:26:59.853

您可以在表格视图中放置一个委托。因此，当按下单元格时，信息将传递给 VC 中的委托方法，该方法将关闭表格视图并使用新信息重新加载自身。您必须在该 VC 中实现刷新方法。

# java - maven - 用于 Spring 接口和实现的独立模块

> ID：14856225
> 
> 赞同：26
> 
> 时间：2013-02-13T14:50:34.787
> 
> 标签：java, spring, maven

我们正在对我们的 java 项目进行 Maven 化，我们希望在每个模块的接口和实现之间建立一个清晰的分离。为此，我们希望将每个模块分成两个子模块，一个用于它们使用的接口和数据对象，另一个用于实现。例如：

```
 +commons 
  +commons-api 
  +commons-impl 
```

模块的 POM 将被配置为没有模块依赖于 impl 子模块。这样，一个模块中的任何代码都无法“看到”另一个模块的实现细节。

我们遇到的麻烦是将我们的 spring XMLs 放在哪里。在我们的项目中，我们使用通配符导入自动导入 spring XML 文件，例如

`<import resource="classpath*:**/*-beans.xml"/>`

这样，Spring XML 的位置在运行时并不重要，因为所有模块都被加载到同一个类加载器中，并且 POM 中严格的单向依赖规则不适用。

但是，在开发过程中，我们希望 IDE（我们使用 Intellij IDEA）识别从 spring XML 引用的实现类。我们还希望 IDEA 能够识别在其他模块中定义的 bean。

如果我们将 spring XMLs 放在 API 子模块中 - 他们将不会“看到” impl 子模块中的实现类。如果我们将它们放在 impl 子模块中，它们的 bean 将不会被其他模块“看到”。可能可以将 IDEA 项目配置为从没有依赖关系的模块中识别 spring XML，但我们更喜欢我们的 POM 保存所有项目结构信息而不依赖于 IDEA 项目文件。

我们考虑创建第三个子模块来保存 Spring XML（也许还有 hibernate xml）。例如：

```
 +commons 
  +commons-api 
  +commons-impl 
  +commons-config 
```

外部模块将同时依赖于**commons-api**和**commons-config**并且**commons-config**将同时依赖于**commons-api**和**commons-impl**，对**commons-impl**的依赖被标记为“provided”（以防止传递解析）。

然而，这似乎是一个复杂而笨拙的解决方案，我们认为必须有一种更好、更简单的方法来实现与 Maven 和 Spring 的接口/实现分离。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-01T15:44:36.640

您需要的是运行时依赖范围：

> **运行时**- 此范围表示编译不需要依赖项，但需要执行。它在运行时和测试类路径中，但不在编译类路径中。

（[https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)）

定义从一个 impl 模块到另一个 impl 模块的运行时依赖项，您可以在其中使用 *-beans.xml 配置中的 impl 类。Intellij 将在 spring 配置文件中正确识别这一点，但不会在代码中自动完成它们（但它会在测试代码中完成）。

此外，如果有人使用代码中的类，通过 maven 编译将失败，因为运行时依赖项不在编译类路径上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-03T05:43:44.160

你可以像这样实现 api 和 impl 的解耦：

```
+ commons (pom)
  + pom.xml         <--- serves as a parent aggregator (see below)
  + commons-api (jar)  <--- contains models, interfaces and abstract classes only
  + commons-impl (jar)  <--- depends on commons-api
  + commons-config (jar) <--- depends on commons-impl only (no need to depend on commons-api as it is brought in transitively)

 + external-project (war or jar) <--- has commons-config as a dependency 
```

父聚合器 pom（指定构建顺序）：

```
<modules>
  <module>commons-api</module>
  <module>commons-impl</module>
  <module>commons-config</module>
</modules> 
```

如果config模块只包含spring应用上下文配置，则可以省略。应用程序配置 xml 应位于包含您正在部署的工件的模块的类路径和文件夹结构中。因此，如果您正在构建一个战争工件，应用程序上下文应该在那里。

应该在您的 commons 模块中的唯一配置将在您的 impl 模块的测试包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:28:32.380

简而言之，您希望 Idea 覆盖 Maven 依赖关系图，但避免将此配置保留在 IDEA 项目文件中？

一种选择是在 Maven 配置文件中对实现依赖项进行分组。默认情况下不会启用此配置文件，但您应该能够将其标记为在想法下处于活动状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-05T23:04:32.927

1.  尽量减少模块数量；

    这加快了项目构建时间并简化了其布局。

2.  保持模块结构尽可能简单：单个根 + 同一文件夹中的所有子模块，例如：

    ```
    pom.xml
    commons-api/
    commons-runtime/
    module-a-api/
    module-a-runtime/
    ... 
    ```

当模块数量非常高（> 50）时，这简化了整个项目的导航

3.  仅在需要时向运行时模块提供运行时范围的依赖项；

    这使您的架构保持清晰。使用模拟而不是显式依赖另一个运行时模块。

4.  将您的 api spring 上下文保存在 api 模块中，将您的公共 bean 定义为抽象 bean + 接口；

5.  将您的实现上下文保存在运行时模块中，通过 spring 配置文件用您的实现覆盖 api bean（使用 <beans profile="default"）。

结果：简单、透明的布局和设计；完整的IDE支持；对运行时模块内部没有显式依赖。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-02T11:43:38.507

*   外部模块中运行时范围内的 commons-impl

    1.  公地（pom 依赖管理）=>

        +commons-api (编译)

        +commons-impl (编译)

        +commons-config (编译)

    2.  commons-impl（pom 依赖项）=>

        +commons-api (编译)

        +commons-config (编译)

    3.  外部模块（pom 依赖项）=>

        +commons-impl (**运行时**)

        +commons-api (编译)

        +commons-config (编译)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-01T09:32:46.573

想到两个想法：

1.  您将拥有一个（或多个）模块，其中所有模块（api+impl）都是依赖项，您可以将 spring 配置文件放在那里。
2.  将 spring 配置文件放在 api 模块中，并声明对具有范围的 impl 模块的依赖关系，`provided`这样就可以知道实现，而部署时没有 api 依赖关系。

# c# - 如何格式化日期？

> ID：14856233
> 
> 赞同：-4
> 
> 时间：2013-02-13T14:51:00.133
> 
> 标签：c#, .net, date, format

```
 //This will get the month as an int (e.g. 4)
        DateTime dLastMonth = DateTime.Today.AddMonths(-1);
        int iLastMonth = dLastMonth.Year; 
```

如何使上述代码输出 01、02 等...而不是 1、2、3...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:54:06.857

我对您的问题感到困惑，但是如果您想将其格式化为字符串（01、02、03 等），请使用：

```
var formatted = iLastMonth.ToString("D2")
Console.WriteLine(formatted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:54:21.283

你应该看看这篇文章[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

但是您需要做的就是：

```
Convert.ToInt32(dLastMonth.Year.ToString("yy")); 
```

# iphone - NSDateFormatter 返回不正确的字符串？

> ID：14856239
> 
> 赞同：0
> 
> 时间：2013-02-13T14:51:09.943
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我在 NSDate 上编写了一个方法作为类别，它从日期返回一个字符串。格式为{四年数字}{两个月数字}{两天数字}。出于某种原因，格式化程序将当前年份作为四年数字返回，而不是返回日期的年份。这是我的代码：

```
- (NSString *) YYYYMMDD{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];

    [formatter setTimeStyle:NSDateFormatterNoStyle];
    [formatter setDateStyle:NSDateFormatterFullStyle];
    [formatter setDateFormat:@"YYYYMMdd"];   // This line is doing something odd, not sure why yet.

    NSString *dateAsString = [formatter stringFromDate:self];

    NSLog(@"Date: %@ String: %@", [self description], dateAsString);

   return dateAsString; 
```

}

查看记录的行，您会注意到年份是不灵活的并且坚持当前年份，即使应该由日期对象表示的年份不是当前年份。

知道这是为什么吗？我使用了不正确的格式化程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:56:41.457

Y 应为小写：y

这对我有用：

```
+ (NSDateFormatter *) dateFormatter {
    static NSDateFormatter * formatter = nil ;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc] init] ;
       [formatter setDateFormat:@"yyyyMMdd"] ;
    }
    return formatter ;
} 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:59:08.247

正如[数据格式指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)中的评论所述：

> 一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

所以试试：

```
[formatter setDateFormat:@"yyyyMMdd"]; 
```

# google-oauth - Google oauth2 的状态参数的 URL 编码在重定向期间被解码

> ID：14856241
> 
> 赞同：1
> 
> 时间：2013-02-13T14:51:12.447
> 
> 标签：google-oauth

我正在为访问 Google Drive 进行初始授权。我想在“state”参数中传递一个完整的 URL，这样我就可以从我在“redirect_uri”中发送的页面名称进行额外的重定向。所以我的请求 URL 看起来像这样......

[https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=000000000000.apps.googleusercontent.com&redirect_uri=https%3A%2F%2Fmy.server.com%2Fx%2Fws-catch.php&scope=https% 3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&access_type=offline&](https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=000000000000.apps.googleusercontent.com&redirect_uri=https%3A%2F%2Fmy.server.com%2Fx%2Fws-catch.php&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&access_type=offline&) ***state=https%3a%2f%2fmy.server.com%2fRoot%2fDirectory%2fGoogle.php%3fpid%3dc907a55c-87f8-4ba8-8a16-478a9e6cba70%26prov %3dsrv50758c7a0cfcd6.527662862***

请注意，“state”参数是 URL 编码的。谷歌文档说这个参数是往返的，所以我得到了我传入的值。但是，当它到达“redirect_uri”中指定的页面时，状态参数似乎已经部分解码。这是当我拒绝身份验证请求时浏览器会去的地方......

[https://my.server.com/x/ws-catch.php?error=access_denied&state=https://my.server.com/Root/Directory/Google.php?pid%3Dc907a55c-87f8-4ba8-8a16- 478a9e6cba70%26prov%3Dsrv50758c7a0cfcd6.527662862](https://my.server.com/x/ws-catch.php?error=access_denied&state=https://my.server.com/Root/Directory/Google.php?pid%3Dc907a55c-87f8-4ba8-8a16-478a9e6cba70%26prov%3Dsrv50758c7a0cfcd6.527662862)

注意未编码的“？” 字符现在在“状态”参数中。这是谷歌重定向时的问题吗？我读了一篇文章，建议对我可以做的参数进行 base64 编码，但我想了解为什么它不能使用 URL 编码。

***编辑

这是来自 Google 的原始 302。应该与上面粘贴的 URL 相同。

```
HTTP/1.1 302 Moved Temporarily
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Date: Thu, 14 Feb 2013 16:23:37 GMT
Location: https://my.server.com/x/ws-catch.php?error=access_denied&state=https://my.server.com/Root/Directory/Google.php?pid%3Dc907a55c-87f8-4ba8-8a16-478a9e6cba70%26prov%3Dsrv50758c7a0cfcd6.527662862
Content-Type: text/html; charset=UTF-8
Content-Encoding: gzip
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Content-Length: 325
Server: GSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:23:30.947

URL 编码不需要编码'?' 或 ':' 或 '/' 当作为查询参数值出现时。因此，Google 生成的响应已正确编码，不应在您的服务器上导致任何解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T22:12:15.287

对整个状态参数进行 Base64 编码是一种安全的方式，可以完全按照您发送的方式将其取回。

# asp.net - 当下拉列表放置在 ASP.NET 的更新面板中时，Ajaxfileupload 不起作用

> ID：14856244
> 
> 赞同：0
> 
> 时间：2013-02-13T14:51:20.970
> 
> 标签：asp.net, ajax, file-upload

加载页面后，我可以使用 ajaxfileupload 并选择要上传的文件。在我选择第一个下拉列表的值并且更新面板内的第二个下拉列表通过部分回发填充之前，这非常有效。从这个事件开始，ajaxfileupload 控件的选择按钮就失效了。这是一个错误还是如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:59:36.053

在更新面板中设置`dropdown`'s ID 。`PostBackTrigger`

**更新：**

```
<UpdatePanel ID="upd1">
    <asp:DropDownList ID="ddl1" onselectedIndexChanged="ddl_changed" />
</UpdatePanel>

<UpdatePanel ID="upd2">
    <Ajax:FileUploader />
</UpdatePanel>

protected void ddl1_changed(object sender, EventArgs e)
{
    //your code

    upd2.Update();
} 
```

这可能会帮助你:)

# java - 如何以编程方式用红宝石按键？

> ID：14856248
> 
> 赞同：3
> 
> 时间：2013-02-13T14:51:27.220
> 
> 标签：java, ruby, windows

我在windows环境下。我想启动具有全球范围的热键。我将它与 selenium webdriver 一起使用。使用 Java，我可以通过以下方式做类似的事情

```
Robot robot = new Robot(); 
// Robot start writting 
robot.keyPress(KeyEvent.VK_CONTROL); 
robot.keyPress(KeyEvent.VK_I); 
```

# php - 嵌套数组到 HTML 存档。包含示例代码

> ID：14856249
> 
> 赞同：0
> 
> 时间：2013-02-13T14:51:28.570
> 
> 标签：php, html

我已经生成了一个日期数组。这是一个快速示例

```
Array
(
[2013] => Array
    (
        [Feb] => 2013
        [Jan] => 2013
    )

[2012] => Array
    (
        [Oct] => 2012
        [Jun] => 2012
        [May] => 2012
    )

) 
```

示例代码：

```
<?php
$posts = get_posts(array('numberposts' => -1, 'post_status' => 'publish', 'post_type' => 'post', ));
#       $i=1;
print '<pre>';
foreach ($posts as $post) {
    #       $post_results[$post->ID][month] = get_the_time('m', $post->ID);
    #       $post_results[$post->ID][year]  = get_the_time('Y', $post->ID);
    $year = get_the_time('Y', $post -> ID);
    $month = get_the_time('M', $post -> ID);
    $post_results[$year][$month] = get_the_time('Y', $post -> ID);
    #       echo "$i. Post ID: "  .$post->ID." - " .get_the_time('Y-m-d', $post->ID)."<br/>";
    #       $i++;
}

foreach ($post_results as $key => $value) {
    echo "Month: " . $key . " Year: " . $value . "<br/>";
}

print_r($post_results);
print '</pre>';
?> 
```

我想以与此网页相同的格式列出所有日期[http://www.smartpassiveincome.com/archives/](http://www.smartpassiveincome.com/archives/)

我需要的是帮助让我的数组像你在上面看到的那样分隔值。我可以自己做链接部分，我只需要将数据拉入易于使用的变量中。

例如，我想说“对于每一年，列出所有月份，然后输入，`<td>$year</td><td>$month</td>`然后转到上一年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:57:33.150

这将为您提供所需的东西。只需更改`$currentDate`为您想要开始的任何日期的时间戳即可。

```
$currentDate = strtotime('January 1st, 2000');
$newestDate = strtotime(date('Y-m-01'));
$yearMonthArray = array();

while ($currentDate <= $newestDate) {
    if (!array_key_exists($year = date('Y', $currentDate), $yearMonthArray)) {
        $yearMonthArray[$year] = array();
    }

    $yearMonthArray[$year][] = date('M', $currentDate);

    $currentDate = strtotime('next month', $currentDate);
}

var_dump($yearMonthArray); 
```

编辑：这只是让你得到所有的年/月组合。您应该能够将此示例与您的代码结合使用，以获得仅显示几个月的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:12:55.243

这是我认为您需要的，他是实现以下目标的一种方法：

2013 | 二月 | 2012 年1
月 | 十月 | 君 | 可能

**原来的：**

```
$arrYears = array(2013=>array("Feb"=>2013, "Jan"=>2013), 2012=>array("Oct"=>2013, "Jun"=>2013, "May"=>2013));
        foreach($arrYears as $strYear=>$arrMonths) {
            echo $strYear;
            // This is our logic for each year
            foreach($arrMonths as $strMonth=>$strYear2) {
                echo " | ".$strMonth;
            }
            echo "<br />";
        } 
```

**编辑：将月份放入嵌套列表中**

```
 $arrYears = array(
                 2013=>array("Feb"=>2013, "Jan"=>2013),
                 2012=>array("Oct"=>2013, "Jun"=>2013, "May"=>2013)
              );

 echo "<ul>";
     foreach($arrYears as $strYear=>$arrMonths) {
         echo "<li>";
             echo $strYear;
             echo "<ul>";

                foreach($arrMonths as $strMonth=>$strYear2) {
                    echo "<li><a href='#'>".$strMonth."</a></li>";
                }

             echo "</ul>";
         echo "</li>";
     }
 echo "</ul>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:15:38.480

我自己想通了，这是我的新代码

```
$posts = get_posts(
    array(
        'numberposts' => -1,
        'post_status' => 'publish',
        'post_type' => 'post',
    )
);
foreach ($posts as $post) {
    $year = get_the_time('Y', $post->ID);
    $month = get_the_time('M', $post->ID);
    $post_results[$year][$month]  = $month;
}

foreach ($post_results as $key => $value) { 
    echo "<b>"  .$key."</b> ";

    foreach ($value as $sub_key => $sub_value) { 
        echo $sub_key." ";
    }
    echo "<br/>";

} 
```

# unit-testing - 创建和提供模拟对象作为参数

> ID：14856256
> 
> 赞同：1
> 
> 时间：2013-02-13T14:51:52.360
> 
> 标签：unit-testing, interface, mocking

我正在尝试重组我的项目，以便我正在开发一个接口，最终能够创建用于测试的模拟对象，但我在实现/理解某些概念时遇到了麻烦。我有一个`IProducts`由`Products`. 但显然我希望能够创建一个模拟 Products 对象。

如何让它依赖于接口而不是实现？

```
public void AddNewProduct()
        {
            IDatabase db = new Database();
            IProducts products = new Products();
            products.addProductsToCache();
        } 
```

即我将如何指定此代码来使用该`MockDatabase`对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:57:45.570

假设您有一个要测试的 Inventory 类。Inventory 依赖于 IProducts。所以它不应该关心它使用哪个 Iproducts 实现。唯一重要的是它必须是 IProducts 的一个实例。在生产中，IProducts 的实例将是 Products 的实例。在测试中，它将是模拟 Iproducts 的实例。

如果你引入了一个接口（IProducts），但是 Inventory 仍然依赖于具体的 Products 类，那么你的接口就没用了。它应该只依赖于接口，而不是实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:55:53.363

我会将产品传递给方法：

```
public class YourProductContainerClass
{
    private readonly IDatabase _database;
    private readonly IProducts _products;

    public YourProductContainerClass(
        IDatabase database,
        IProducts products)
    {
        _database = database;
        _products = products;
    }

    public void AddNewProduct(IProduct product)
    {
        products.Add(product);
    }
} 
```

只要我的2美分就可以了。我从不创建一个`interface`公正的“因为我可能会在稍后的时间点编写一个测试”。我编写了我的单元测试，因此我需要一个接口。

> 如果我不编写单元测试，那么我也不会创建接口。

**为什么不？**因为很可能由于各种原因，对单元测试的需求永远不会得到足够的优先级。然后你有更新代码+接口的维护成本，而它并没有真正在你的设计中添加一些东西（除了增加 LoC 的数量）。

所以，恕我直言：习惯于在函数之前编写测试。如果出于某种原因您看不到单元测试的必要性，还要考虑为类编写接口是否有意义。

PS：像这样的工具`Resharper`可以很容易地在以后的时间点提取界面并将遗留的界面重构到您的界面中。这也是TDD的一个魅力，它可以消除很多痛苦。

# javascript - 如何从 iframe 打开新标签页？

> ID：14856259
> 
> 赞同：6
> 
> 时间：2013-02-13T14:52:00.910
> 
> 标签：javascript, jquery, html, iframe, browser

我有一个用 php 构建的网站，在某些页面中，我显示了一个带有另一个网站链接的 iframe，它显示了它的登录屏幕。

两个网站都在不同的域中。

喜欢主网站：[http](http://www.abcd.com) : //www.abcd.com Iframe href：[http ://www.xyz.com](http://www.xyz.com)

现在我的用户在 abcd.com 中看到一个页面，其中有一个 iframe `<iframe src="http://www.xyz.com/" style="width:688px; height:384px;"></iframe>`

其中显示 xyz.com 的登录屏幕

现在我想要的是，如果用户登录到 xyz.com，另一个新选项卡应该在主页上打开，在 xyz.com 和 abcd.com 选项卡登录后应该关闭。

是否可以使用适用于包括 IE 7、8、9 在内的所有浏览器的 javascript 或 jquery ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:16:27.723

打开一个新标签

关联

```
<a href="foo.html" target="_blank">linky</a> 
```

弹出

```
window.open("foo.html", "_blank"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-07T10:40:49.327

将以下javascript代码放在`<head>`xyz.com主页的标签中（但如果您仍想将登录页面保留在iframe中，请不要将其放在登录页面中）：

```
<script type="text/javascript">
    if (top.location!= self.location){
        top.location = self.location
    }
</script> 
```

现在，当打开 xyz.com 的主页时，此代码将中断`<iframe>`并将当前选项卡从 abcd.com 更改为 xyz.com 的主页

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-16T02:03:21.393

我不知道你的意思，但是从 iframe 打开一个新标签只是正常的代码。

```
<a href="WebAdress.netdom" target="_blank"><button>Open New Tab</button></a> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T18:01:11.350

你想要做的事情是不可能的，你只在 iFrame 内提供一个登录页面，因此你无法控制“登录”按钮的实际作用，它由另一个网站控制。

其他网站需要自己编辑操作并添加 target='_blank'，但这不会发生，因为他们的用户在登录时将有另一个选项卡。

# ios - 如何为我的 Selector gestureRecoqnizer 指定附加信息？

> ID：14856263
> 
> 赞同：0
> 
> 时间：2013-02-13T14:52:05.800
> 
> 标签：ios, objective-c, xcode4.5, uitapgesturerecognizer

```
UITapGestureRecognizer *gestureRecoqnizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTaped:)];
[ImageView addGestureRecognizer:gestureRecoqnizer]; 
```

发送给 imageTaped 的唯一参数是发送者。

我想发送其他东西，比如 ImageView 本身或其他对象。

我如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:04:11.850

sender.view 将是您的 ImageView。如果您想要另一个对象，请将其添加到您的 ImageView 类中。

```
ImageView *imageview = (ImageView*)sender.view;
NSLog(@"%@", imageview.someObject); 
```

**编辑**

以下是我能想到的可能解决方案。

1.  如上所述，具有对象的`UIImageView`子类。`@property`
2.  在 UIImageView 上设置标签并使用`sender.view.tag`并有某种方式将标签与对象相关联。

基本上，您的 ImageView 需要某种信息才能将您连接到您的对象。

# netbeans - 第 80 列标记的用途是什么？

> ID：14856265
> 
> 赞同：1
> 
> 时间：2013-02-13T14:52:08.727
> 
> 标签：netbeans, coding-style

我刚刚切换到 netbeans，默认情况下第 80 列标记处于打开状态。第 80 列标记的用途是什么？

![在此处输入图像描述](../Images/f2be1256ff9e41da4fe14fbcd356e527.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:54:18.610

这样一来，如果您使用要求所有代码宽度小于 80 列的编码约定，则可以很容易地看到何时超出限制。尽管监视器比以前宽得多，但 80（或 100 或其他）列限制仍然是有利的，这样您就可以始终并排比较代码，而无需在代码审查期间换行。

如果您对坚持某些列限制*不感兴趣，我希望您可以将其关闭。*

（顺便说一下，Eclipse 具有相同的功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:56:24.413

80 个字符是打印机单行可以容纳的典型字符数。大多数 IDE 都设置了该值，以便您可以看到适合打印输出的内容

# javascript - 如何在 jQuery 中选择我的第一个孩子

> ID：14856267
> 
> 赞同：1
> 
> 时间：2013-02-13T14:52:13.343
> 
> 标签：javascript, jquery, css-selectors

我在选择 jQuery 中的第一个孩子时遇到了一些麻烦。我试图这样做是为了避免有很多 if 语句。基本上，您单击一个按钮。此类选择器设置为处理我的 JS 中的点击。一旦你进入 JS，我想得到刚刚被点击的项目的孩子，但我没有任何快乐。

这是我的 JS 中的内容：

```
$('.itemClicked').click(function(){

var id = $(this).attr('id').first();
    // it can't find the method first() here. If I just find the id, I get the 
    // correct ID of what I just clicked.          

var test = id.first();
    // I tried the above to seperate the ID from the first() method request
    // no joy with this either.

test.toggleClass("icon-tick");
    // this is my ultimate aim, to toggle this icon-tick class on the item
    // clicked.

}); 
```

如果您能在这里帮助我，请提前致谢。我可能只是在做一些愚蠢的事情，但我很难意识到那是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:53:47.843

您当前的版本不起作用，因为`.attr('id')`只是将 ID 作为字符串返回，而不是 jQuery 对象。此外，`.first()`返回 jQuery 集合中的第一项，而不是它们的子项。

所以，你只想要：

```
var test = $(this).children().first(); 
```

或者：

```
var test = $('>:first-child', this); 
```

或者：

```
var test = $(this).children(':first'); 
```

或（在较新的浏览器上）：

```
var test = $(this.firstElementChild); 
```

在使用 Chrome 25 进行的[jsperf](http://jsperf.com/first-child-methods/edit)`.firstElementChild`测试中，该方法非常快，但在 MSIE < 9 上不可用。`.children()`.first() `was the fastest portable option, and the`>:first-child' 方法非常非常慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:54:05.347

也许

```
$('.itemClicked').click(function(){
    $(':first-child',this).toggleClass('icon-tick');
}); 
```

是你所追求的。

现场示例：http: [//jsfiddle.net/ySMLG/](http://jsfiddle.net/ySMLG/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-13T14:58:24.217

如果您要做的只是在单击的项目上切换类“icon-tick”，那么这将起作用：

```
$('.itemClick').click(function () {
    $(this).toggleClass('icon-tick');
}); 
```

该声明：

```
$(this).attr('id').first() 
```

不起作用，因为 attr() 方法返回属性的值，而不是 jQuery 对象，因此它不可链接。

# c# - 后台通知 + Windows 8

> ID：14856271
> 
> 赞同：0
> 
> 时间：2013-02-13T14:52:19.367
> 
> 标签：c#, windows, background

我有一个简单的 Windows 8 应用程序，它在计时器达到 0 时显示通知。现在我希望这些通知仅在 APP 处于后台时显示。

我该如何检查？

```
protected void Back_Tick(object sender, object e)
        {
            if (stageSequence.Current.RemainningTime == TimeSpan.Zero)
            {
                if(stageSequence.MoveNext() == true)
                {
                    var typeOfNotification = TypeOfNotification.EndOfStage;
                    // Check If it is on background
                    ToastAlarmNotification(lblStage.Text, typeOfNotification);
                    lblStage.Text = stageSequence.Current.Name;
                    lblTime.Text = stageSequence.Current.RemainningTime.ToString();
                    mediaElementEndOfStage.Play();
                }
                else
                {
                    var typeOfNotification = TypeOfNotification.EndOfStage;
                    dispatcherTimer.Stop();
                    // Check If it is on background
                    ToastAlarmNotification(lblStage.Text, typeOfNotification);
                    typeOfNotification = TypeOfNotification.EndOfList;
                    ToastAlarmNotification(lblStage.Text, typeOfNotification);
                    mediaElementFinal.Play();
                    return;
                }
            }

            stageSequence.Current.RemainningTime = stageSequence.Current.RemainningTime.Subtract(TimeSpan.FromSeconds(1));
            lblTime.Text = stageSequence.Current.RemainningTime.ToString();
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:07:06.857

您可以在 UI 线程中注册[CoreWindow.VisibilityChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.visibilitychanged.aspx)`VisibilityChangedEventArgs.Visible`事件并存储值。

# c# - Implement a "click-here-to-expand" container

> ID：14856277
> 
> 赞同：6
> 
> 时间：2013-02-13T14:52:40.440
> 
> 标签：c#, .net, dialog, containers

I have no better way of explaining it, but I want to implement a container that only is shown after the user clicked "Advanced" or a plus sign somewhere in the dialog. I have a login form and want to add some "Advanced" settings. But they should normally out of view.

Of course, the dialog has to resize nicely to hold the extended content.

How should I go to implement such a thing. I have tried some Google searches, but can't find the right search words. Windows doesn't seem to have it by default.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:37:12.760

as John Willemse suggested, I ended up creating the functionality myself. I added a `Panel` in the form that I just set visible or invisible.

In the Form's constructor (to hide it on first view):

```
 public FrmLogin() {
        InitializeComponent();

        pnlAdvanced.Visible = false;
        Height -= pnlAdvanced.Height;
    } 
```

Then, I added a `LinkLabel` with this `Clicked` handler:

```
 private void linkLabel1_LinkClicked(object sender, 
                            LinkLabelLinkClickedEventArgs e) {
        if (pnlAdvanced.Visible == false) {
            Height += pnlAdvanced.Height;
            pnlAdvanced.Visible = true;
        } else {
            Height -= pnlAdvanced.Height;
            pnlAdvanced.Visible = false;
        }
    } 
```

Works perfectly and no extra code needed.

# python - Python - 创建有意义的崩溃日志/崩溃报告

> ID：14856278
> 
> 赞同：2
> 
> 时间：2013-02-13T14:52:45.287
> 
> 标签：python, crash, crash-reports

**实际问题（崩溃日志生成）**

是否有 python 模块可以帮助我生成有意义的崩溃日志？还是生产它们的好方法？

我希望我的崩溃日志包含：

*   当前执行堆栈中的所有变量
*   所有全局变量
*   调用时的参数（即标志、它们的值等）

这是我最好自己写的东西吗？

**背景（不是特别相关）**

我有一个由我负责支持的公司内很多人使用的程序。不幸的是，它并不总是能正常工作（大约 1000 次中的 1 次），而且我很难追踪错误。我认为拥有可靠的崩溃日志在这里真的很有帮助，这样我的用户就可以提交这些日志，而不是模糊地打电话寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:57:09.780

您可以查看 django 如何生成其错误页面：[https ://github.com/django/django/blob/master/django/views/debug.py#L59](https://github.com/django/django/blob/master/django/views/debug.py#L59)

在非调试模式下，这些会被邮寄到设置文件中的管理员列表中。超级好用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:58:16.170

python [logging](http://docs.python.org/2/library/logging.html)模块已经拥有你需要的一切。

# android - 从 AudioRecord 缓冲区中检索字符串

> ID：14856279
> 
> 赞同：0
> 
> 时间：2013-02-13T14:52:45.670
> 
> 标签：android, buffer, basic4android, audiorecord

我正在使用 Basic4Android 和基于[此的 AudioRecord 库](http://developer.android.com/reference/android/media/AudioRecord.html)

我想知道如何从缓冲区中检索字符串

简而言之，如果您在音频记录中注册了一个单词（例如，“hello”），您可以从缓冲区中检索它以获得字符串值“hello”？

谢谢阿尔贝托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:51:36.717

仅使用 audiorecord 库，我认为您无法获得语音识别，据我所知，您可以从那里获得原始声波，但请尝试使用[SpeechRecognizer ，](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)[这里](http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial/)是演示应用程序教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-22T19:59:32.883

我很高兴看到其他使用基本 4 android 的你也会在这里找到几个库 [https://www.b4x.com/android/forum/pages/results/?query=speech+recognizer](https://www.b4x.com/android/forum/pages/results/?query=speech+recognizer)

这似乎是答案： [https ://www.b4x.com/android/forum/threads/another-speechrecognizer-library.37584/#content](https://www.b4x.com/android/forum/threads/another-speechrecognizer-library.37584/#content)

# jsp - 在 2no 的乘法上得到 NaN。jsp

> ID：14856280
> 
> 赞同：0
> 
> 时间：2013-02-13T14:52:53.817
> 
> 标签：jsp, nan

我想将 2 个文本框的值相乘并显示在第 3 个文本框上 我在 javascript 中尝试了这些编码，但没有得到正确的 m 得到 NaN

```
function cal()
{
   var as1=document.getElementById("sa").value;  
   var not1= parseInt(document.getElementById("not").value);
   var rs1= parseInt(document.getElementById("r1").value);
    if(as1>=not1)
    {
        if(document.getElementById('r1').checked)
        {
          var c= rs1*not1;
          document.getElementById("ta").value= c;
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:55:58.133

看起来像一个错字。“as1”应该是“rs1”，对吧？

# ocaml - ocaml 进程 ID

> ID：14856281
> 
> 赞同：1
> 
> 时间：2013-02-13T14:52:57.353
> 
> 标签：ocaml

ocaml 如何在 ocaml 内部运行的当前进程上发出信号（通过 Lwt_unix.on_signal 处理）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:35:21.043

如果我理解正确，您希望您的程序向自身发送信号。这个怎么样，使用[Unix](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html)模块？

```
let signal_to_itself number = Unix.kill (Unix.getpid ()) number 
```

[Sys](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html)模块中有一个信号编号列表，因此您可以像这样使用该函数：

```
signal_to_itself Sys.sigfpe 
```

如果您没有使用 Lwt_unix.on_signal 安装处理程序，程序将终止：

```
Floating point exception (core dumped) 
```

# jquery - 如何在jquery中使用焦点？

> ID：14856285
> 
> 赞同：2
> 
> 时间：2013-02-13T14:53:20.100
> 
> 标签：jquery, html

我有一个脚本，我可以在其中单击 div 并将信息添加到 textarea。这是可行的，但是光标始终位于我插入的信息的开头。

```
<div id="click">Click to insert</div>
<textarea id="info">I want to</textarea> 
```

这是jQuery：

```
<script>
    $(document).ready(function(){
        $('#click').on('click',function(){
            var i=$('#info').val();
            var n="Insert this";//information to be inserted
            $('#info').val(i + n).focus();
        });
    });
</script> 
```

现在整个事情应该是**我想插入这个**，然后是光标。相反，光标像这样在中间，**我想 [cursor] 插入 this**。有什么方法可以让光标聚焦在字段内容的末尾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:05:02.163

试试这个 JSFiddle [http://jsfiddle.net/adiioo7/2D9Td/](http://jsfiddle.net/adiioo7/2D9Td/) :-

```
$(document).ready(function () {
    $('#click').on('click', function () {
        var i = $('#info').val();
        var n = "Insert this"; //information to be inserted
        $('#info').focus().val(i + n);
    });
}); 
```

只是在最后一次 js 调用中更改了 focus 和 val 的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:07:05.363

jQuery插件怎么样？

```
$.fn.setCaretToEnd = function () {
    return this.each(function () {
        if (this.setSelectionRange) {
            this.focus();
            this.setSelectionRange(this.value.length, this.value.length);
        } else if (this.createTextRange) {
            var range = this.createTextRange();
            range.collapse(true);
            range.moveEnd('character', this.value.length);
            range.moveStart('character', this.value.length);
            range.select();
        }
    });
};

$(document).ready(function () {
    $('#click').on('click', function () {
        var i = $('#info').val();
        var n = "Insert this";

        $('#info').val(i + n).focus().setCaretToEnd();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/vJWCz/1/)

# jquery - 比较来自 2 个 jsonp 调用的数据

> ID：14856289
> 
> 赞同：0
> 
> 时间：2013-02-13T14:53:28.687
> 
> 标签：jquery, jsonp

我希望能够比较来自 2 个单独的 jsonp 调用的信息。我目前正在使用 $.getJSON 但我也尝试过 $.ajax 但没有运气。我的印象是问题是异步执行 $.getJSON 调用，这就是问题所在。这就是为什么我尝试了 $.ajax async: false，但它仍然不起作用。我想做这样的事情。

```
$.getJSON('url1', function(data){ var a = data.information };
$.getJSON('url2', function(data){ var b = data.information };
if(a === b) { whatever }; 
```

有没有办法完成我正在寻找的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:06:37.763

JSONP 本质上总是异步的（即使不是，您仍然应该使用异步版本；`async:false`是**万恶之源**）。你无法改变这一点。为了完成你想要做的事情，你可以使用`$.when`：

```
var requests = [];
var data1, data2;

requests.push(
    $.getJSON( 'url1', function(data) { data1 = data.information; } )
);
requests.push(
    $.getJSON( 'url2', function(data) { data2 = data.information; } )
);

$.when.apply( $, requests ).then( function( ) {
    if (data1===data2) {
        // do something
    }
}); 
```

# ajax - 使用 ajax 组件在 JSF-html 中将 outputText 更改为 inputText

> ID：14856291
> 
> 赞同：0
> 
> 时间：2013-02-13T14:53:33.313
> 
> 标签：ajax, jsf-2, xhtml

我想要达到这样的目标，让我们有一个：

```
 <h:outputText id="name" value="#{Bean.foo.name}"/> 
```

在数据表的某个列中，我想通过单击布局上的此输出文本来实现，以便更改为：

```
<h:inputText value="#{Bean.foo.name}"/> 
```

换句话说，通过单击输出文本更改为经典输入字段，有没有办法使用 ajax 组件来做到这一点，谁能给我一些概念，我会非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:56:12.257

如果在这里使用 PrimeFaces 组件不是问题，那就是；就地[组件](http://www.primefaces.org/showcase/ui/input/inplace.xhtml)

# php - 从哪里开始开发 WordPress / WooCommerce 主题？

> ID：14856293
> 
> 赞同：8
> 
> 时间：2013-02-13T14:53:42.007
> 
> 标签：php, html, wordpress, e-commerce, woocommerce

我收到了一些 PSD，需要使用 WordPress 和 WooCommerce 创建一个电子商务网站。我找到了一些用于创建 WordPress 主题的资源... [http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development) [http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/](http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/)

...但是因为我要使用 WooCommerce，我还需要遵循这些指南，还是 WooCommerce 开发阶段会使上述指南变得多余？

我已经对此进行了研究，但是如果您是 WordPress 和 WooCommerce 的新手，我发现的资源并不清楚从哪里开始。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:45:33.840

[我的建议是像平常一样开发 WordPress 主题，最好是使用像Toolbox](http://wordpress.org/extend/themes/toolbox)这样的优质父主题作为子主题，它将提供大部分 html 和功能，让您自定义 CSS。

然后安装 WooCommerce 并从那里添加到您的主题。在设置中，取消选中“使用 WooCommerce 样式”并将 woocommerce 样式表复制到您的主题文件夹中`/woocommerce/store.css`。然后，您可以随意编辑默认的 woocommerce 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:57:58.213

过去我创建了一些主题（不兼容 wootheme），但最近，我在 themeforest 的产品中发现了令人惊叹的主题，我一直担心个性化并使我的网站看起来与众不同，但这不是问题，每个主题都是可以在多种布局/颜色等中进行配置。如果您通过 woocommerce 标签搜索，您会发现一堆兼容的主题 [http://themeforest.net/category/wordpress/ecommerce/woocommerce](http://themeforest.net/category/wordpress/ecommerce/woocommerce)

# html - 行内块表单元素在应用填充并且之间存在空格时换行

> ID：14856294
> 
> 赞同：0
> 
> 时间：2013-02-13T14:53:47.200
> 
> 标签：html, css, twitter-bootstrap

我的问题是，对于 div 类`form-profile`，`form-profile-side`如果我想要其中 2 个 div，它们必须在 HTML 中的同一行：

```
<div class="span13">
  <form class="form-profile-side"></form><form class="form-profile"></form>
</div> 
```

如果我把第二个类放在一个新的行上，它会弄乱布局（这就是我想要做的）：

```
<div class="span13">
  <form class="form-profile-side"></form>
  <form class="form-profile"></form>
</div> 
```

**CSS：**

```
.form-profile-side {
  display: inline-block;
  vertical-align: top;
  width: 120px;
  background-color: #fff;
  border: 1px solid #d6d6d6;
  border-right: 0;
  -webkit-border-radius: 0px 0px 0px 0px;
  -moz-border-radius: 0px 0px 0px 0px;
  border-radius: 0x 0px 0px 0px;
  -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
  -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
}

.form-profile {
  display: inline-block;
  width: 817px;
  padding: 15px 15px 15px;
  background-color: #fff;
  border: 1px solid #d6d6d6;
  -webkit-border-radius: 0px 5px 5px 5px;
  -moz-border-radius: 0px 5px 5px 5px;
  border-radius: 0px 5px 5px 5px;
  -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
  -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
} 
```

**我如何做到这一点，以便我可以使用该类在 HTML 中创建一个新行，而不是将它们全部放在一行上？**

JSFiddle：http: [//jsfiddle.net/VzTxM/4/](http://jsfiddle.net/VzTxM/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:12:52.190

我相信您遇到的问题（如果我理解正确的问题）是 display:inline-block; 当 HTML 位于两行单独的行时添加一个 lil 分隔符 - 您可以通过浮动元素来解决这个问题？

**CSS**

```
.form-profile-side,.form-profile {
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
    box-shadow: 0 1px 2px rgba(0,0,0,.05);
    border: 1px solid #d6d6d6;
    background-color: #fff;
    float:left;
}
.form-profile-side {
  -webkit-border-radius: 0px 0px 0px 0px;
  -moz-border-radius: 0px 0px 0px 0px;
  border-radius: 0x 0px 0px 0px;
  vertical-align: top;
  border-right: 0;
  width: 120px;
}
.form-profile {
  -webkit-border-radius: 0px 5px 5px 5px;
  -moz-border-radius: 0px 5px 5px 5px;
  border-radius: 0px 5px 5px 5px;
  padding: 15px 15px 15px;
  width: 817px;
}

.clear {
    clear:both;
} 
```

**HTML**

```
<div class="span13">
  <form class="form-profile-side"><br><br></form>
  <form class="form-profile"><br><br></form>
  <div class="clear"></div>
</div> 
```

# android - Fragments 和 EventBus 的空指针异常

> ID：14856296
> 
> 赞同：5
> 
> 时间：2013-02-13T14:53:52.907
> 
> 标签：android, android-fragments, greenrobot-eventbus

我已经通过各种方法来完成这个项目，最终选择了 Green Robot 的 EventBus。我与此相关的第二个问题在这里：-[活动通信的多个片段](https://stackoverflow.com/questions/14505130/multiple-fragment-to-activity-communication)。

我被引导到那里的 Event Bus 路线。我已经加入了适当的图书馆，我认为我非常接近让它发挥作用。在包含

```
eBus.post(Str); 
```

我相当肯定它，因为我没有正确注册 eBus。我知道 Fragment 没有这样的上下文，但我也尝试使用 getActivity() 也无济于事。我在下面发布了 MainActivity、CoreFragment 和 LogCat。如果有人可以提供帮助，我将不胜感激。这一直持续，断断续续近一个月！

```
import de.greenrobot.event.EventBus;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.EditText;

public class MainActivity extends Activity {

EditText editText1;
String Txt;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    editText1 = (EditText) findViewById(R.id.editText1);
    Txt = "";
    EventBus eBus = new EventBus();
    eBus.register(this);<--This I removed.
        eBus.getDefault().register(this);<--This is the new line you suggested  
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onEvent(String event){
    Txt = Txt + event;
    editText1.setText(Txt);<--Left this as it was,it worked
}

}//End 
```

这是片段代码：

```
import de.greenrobot.event.EventBus;
import android.app.Activity;
import android.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.os.Bundle;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.view.View.OnClickListener;

public class CoreFragment extends Fragment{

int index;
Button Button1,Button2,Button3;
String Str,data;
EventBus eBus;

@Override
public void onAttach(Activity a) {
    super.onAttach(a);
    EventBus eBus = new EventBus();
    eBus.getDefault().register(this);
    }

public static CoreFragment newInstance(int index) {
    CoreFragment coreFragment = new CoreFragment();
    coreFragment.index = index;
    return coreFragment;
}

public void onEvent(String event){
// Crash Stopper
    }   

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    if (container == null) {
        // We have different layouts, and in one of them this
        // fragment's containing frame doesn't exist. The fragment
        // may still be created from its saved state, but there is
        // no reason to try to create its view hierarchy because it
        // won't be displayed. Note this is not needed -- we could
        // just run the code below, where we would create and return
        // the view hierarchy; it would just never be used.
        return null;
    }
    RelativeLayout mRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.corefragment,
            container, false);

    Button Button1 = (Button) mRelativeLayout.findViewById(R.id.Button1);
    Button Button2 = (Button) mRelativeLayout.findViewById(R.id.Button2);
    Button Button3 = (Button) mRelativeLayout.findViewById(R.id.Button3);

    Button1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    Str = "I ";
    eBus.post(Str);<--Old code, removed in working version
        eBus.getDefault().post(Str);<--Changed as suggested
    }

         });

    Button2.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Str = "want ";
    eBus.post(Str);<--Old code, removed in working version
        eBus.getDefault().post(Str);<--Changed as suggested
    }

         });

    Button3.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Str = "more ";
    eBus.post(Str);<--Old code, removed in working version
        eBus.getDefault().post(Str);<--Changed as suggested
    }

         });

    return mRelativeLayout;
}

}//end 
```

我尝试了各种排列方式，例如 eBus.register(this);、eBus.register(this, String.Class);、eBus.register(getActivity()); 等等。这是按下按钮 1 时的 LogCat：-

```
02-13 13:56:40.717: W/dalvikvm(26237): threadid=1: thread exiting with uncaught exception (group=0x40acf228)
02-13 13:56:40.747: E/AndroidRuntime(26237): FATAL EXCEPTION: main
02-13 13:56:40.747: E/AndroidRuntime(26237): java.lang.NullPointerException
02-13 13:56:40.747: E/AndroidRuntime(26237):    at com.epsilonitsystems.fragger.CoreFragment$1.onClick(CoreFragment.java:65)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at android.view.View.performClick(View.java:3549)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at android.view.View$PerformClick.run(View.java:14393)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at android.os.Handler.handleCallback(Handler.java:605)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at android.os.Looper.loop(Looper.java:154)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at android.app.ActivityThread.main(ActivityThread.java:4945)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at java.lang.reflect.Method.invokeNative(Native Method)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at java.lang.reflect.Method.invoke(Method.java:511)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-13 13:56:40.747: E/AndroidRuntime(26237):    at dalvik.system.NativeStart.main(Native Method) 
```

我尝试过的所有各种方法都编译得很好，没有错误，但每次按下屏幕上的按钮时都强制关闭。请问有人有什么想法吗？？谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T21:00:50.877

尝试以下建议：

1\. 在您注册到事件总线的任何地方使用：

```
EventBus.getDefault().register(this); 
```

2.当您要发布活动时，请使用：

```
EventBus.getDetault().post(new MyEvent(aString)); 
```

3\. 如果您要对 UI 进行更改，请务必将您的事件方法命名如下：

```
 public void onEventMainThread(MyEvent event){
        editText1.setText(event.getString());
    } 
```

4\. 定义一个事件类来保存结果：

```
public class MyEvent(){
  private mString;

  public MyEvent(String string){
    mString = string;
  }

  public getString(){
    return mString;
  }
} 
```

5\. 不要忘记通过调用以下方法从 EventBus 中注销您的组件：

```
EventBus.getDefault().unregister(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T08:44:03.340

您不必声明
**EventBus eBus = new EventBus();** 在你的代码中。

你只需调用**EventBus.getDefault().register(this);**

# caching - 在 Grails 应用程序中使用 Oracle Coherence 作为 IBatis 的二级缓存

> ID：14856299
> 
> 赞同：0
> 
> 时间：2013-02-13T14:53:58.463
> 
> 标签：caching, grails, grails-orm, ibatis, oracle-coherence

在将 IBatis 用于 ORM（而不是 GORM/Hibernate）的 Grails 应用程序中，是否可以将 Oracle Coherence 指定为 IBatis 的二级缓存？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:45:50.483

[https://github.com/akhil/mybatis-coherence](https://github.com/akhil/mybatis-coherence)针对规范进行了单元测试。从未尝试过使用grails。

# java - Eclipse RCP 写入控制台开销

> ID：14856300
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:01.393
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我有没有控制台的 Eclipse RCP 应用程序。但是在我的这个应用程序的源代码中，很多信息都写入了控制台。我的问题是：这种情况是否会花费我的开销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:33:26.313

如果您的意思是控制台视图，那么它可能会导致一些问题。比如在当前项目中，我们也经常使用控制台，输出一些调试信息。在某些时候，客户端提出了该错误，该应用程序已崩溃（或不再无响应，我不记得确切）。挖掘之后，我们发现，由于控制台的原因，我们已经用完了线程，我们不得不将其关闭。

# asp.net - 如何调用两次相同的 WebMethods？（Ajax 控制工具包）

> ID：14856301
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:01.553
> 
> 标签：asp.net, ajaxcontroltoolkit

通过仅使用一个功能，但使用这两个仅适用于第一个。我不能这样吗？我必须做另一个相同的 WebMethod 来操作这两个？

```
<asp:DropDownList ID="ddl_1" runat="server" DataValueField="Id" DataTextField="Name" ClientIDMode="Static"  />
<asp:CascadingDropDown ID="cdd_1" runat="server" UseContextKey="true" TargetControlID="ddl_1"
     Category="Test" PromptText="--Selecct--" BehaviorID="Test"
     ServicePath="/WebService/Catalogs.asmx" ServiceMethod="LoadMethod" LoadingText="Loading..." />

<asp:DropDownList ID="ddl_2" runat="server" DataValueField="Id" DataTextField="Name" ClientIDMode="Static"  />
<asp:CascadingDropDown ID="cdd_2" runat="server" UseContextKey="true" TargetControlID="ddl_2"
     Category="Test" PromptText="--Selecct--" BehaviorID="Test"
     ServicePath="/WebService/Catalogs.asmx" ServiceMethod="LoadMethod" LoadingText="Loading..." /> 
```

注意：两个 CascadingDropDown 是独立的

我需要两个具有相同数据的不同下拉列表，因为一个是给客户的，另一个是给公司的，无论如何这个控件（CascadingDorpDown）可以调用相同的webmethos？

如何调用两次相同的 WebMethods？

提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:04:43.360

使用此代码

```
<asp:DropDownList ID="ddl_1" runat="server" DataValueField="Id" DataTextField="Name" ClientIDMode="Static"  />

<asp:CascadingDropDown ID="cdd_1" runat="server" UseContextKey="true" TargetControlID="ddl_1"
 Category="Test" PromptText="--Selecct--" BehaviorID="Test"
 ServicePath="/WebService/Catalogs.asmx" ServiceMethod="LoadMethod1" LoadingText="Loading..." />

<asp:DropDownList ID="ddl_2" runat="server" DataValueField="Id" DataTextField="Name" ClientIDMode="Static"  />

<asp:CascadingDropDown ID="cdd_2" runat="server" UseContextKey="true" TargetControlID="ddl_2"
 Category="Test" PromptText="--Selecct--" BehaviorID="Test"
 ServicePath="/WebService/Catalogs.asmx" ServiceMethod="LoadMethod2" LoadingText="Loading..." /> 
```

`ServiceMethod="LoadMethod1"`使用以下两种方法调用`ServiceMethod="LoadMethod2"`

它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:27:35.017

经证明，Ajax CascadingDropDown 控件工具包可以加载相同的WebMethod。

我的错误是我的属性 BehaviorID 具有相同的 ID

```
<asp:DropDownList ID="ddl_1" runat="server" DataValueField="Id" DataTextField="Name" ClientIDMode="Static"  />
<asp:CascadingDropDown ID="cdd_1" runat="server" UseContextKey="true" TargetControlID="ddl_1"
 Category="Test" PromptText="--Selecct--" **BehaviorID="Test_1"**
 ServicePath="/WebService/Catalogs.asmx" ServiceMethod="LoadMethod" LoadingText="Loading..." />

<asp:DropDownList ID="ddl_2" runat="server" DataValueField="Id" DataTextField="Name" ClientIDMode="Static"  />
<asp:CascadingDropDown ID="cdd_2" runat="server" UseContextKey="true" TargetControlID="ddl_2"
 Category="Test" PromptText="--Selecct--" **BehaviorID="Test_2"**
 ServicePath="/WebService/Catalogs.asmx" ServiceMethod="LoadMethod" LoadingText="Loading..." /> 
```

# xml - 如何在 GSA 提要中指定多种语言

> ID：14856302
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:02.743
> 
> 标签：xml, feed, google-search-appliance

我们从我们的应用程序生成 GSA 提要 XML。GSA 使用此 XML 来爬取可用页面。

问题：

我们有**英文**页面：

[http://oursite.com/en/web/design/startpage](http://oursite.com/en/web/design/startpage)

和**德语**：

[http://oursite.com/de/web/design/startpage](http://oursite.com/de/web/design/startpage)

是否可以指定： http: [//oursite.com/web/design/startpage](http://oursite.com/web/design/startpage)

并将可用*语言*指定为属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T09:52:03.583

不，那是不可能的。

GSA 需要特定的 URL 来编制索引。在您的情况下，此功能会很好，但假设您必须在提要中为每个 URL 添加一些元标记。每种语言可能都有自己的价值观。

提供特定网址的确切问题是什么？您可以为每种网站语言生成一个提要，并按语言分别推送它们。这样您就可以使用相同的提要，每种语言具有不同的语言参数。这样您就可以添加新语言而无需任何进一步的编码。

# c++ - 将 C++ 枚举转换为 python int

> ID：14856304
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:04.373
> 
> 标签：c++, python

我有一个用于返回枚举的 C++ 函数的 python 包装器。

当我执行以下操作时：

returnValue = mylibrary_py.getRole() # 这会返回一个枚举

加载网页时出现以下错误：

```
No to_python (by-value) converter found for C++ type: mynamespace::MyRole 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:05:32.913

Python 包装器是如何生成的？Enum 隐式转换为`int`（和其他整数类型），因此 Python 包装器必须做一些特殊的事情来防止这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T09:51:21.887

在以下位置找到如何将枚举类型公开给 python 的方法： [从 C++ 到 Python 的枚举](http://www.boost.org/doc/libs/1_57_0/libs/python/doc/v2/enum.html)

# ruby-on-rails - 使用ajax渲染部分

> ID：14856308
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:09.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery, ruby-on-rails-3.2

看起来很简单，但我的部分没有使用 ajax在视图（ *dash.html.erb ）中呈现。*

**路线.rb**

```
match "users/dash" => "users#dash" 
```

**用户控制器**

```
def dash
     respond_to do |format|
    format.js
  end
   end 
```

**破折号.html.erb**

```
<div id= "mydiv">This view is not shown using ajax.</div> 
```

**破折号.js.erb**

```
$('#mydiv').html('<%= raw escape_javascript render("cart_payment") %>'); 
```

**我的部分-_cart_payment.html.erb**

```
<p>This is a partial.</p> 
```

更新：

**用户/index.html.erb**

```
<script type= "text/javascript">

$.ajax({
  url: "users/dash",
  data: {  
  //params if needed

  }
});

</script> 
```

请注意，我正在`users url`调用浏览器，因为 ajax 是从这里调用的。这是不正确的方式还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:10:37.007

当您`dash`远程调用该方法时，它实际上是在执行`$('#mydiv').html...`代码。问题是，您的`index.html.erb`文件首先没有`<div id='mydiv'>`更新。

如果你`index.html.erb`用这个替换你的，它应该可以工作：

```
<div id='mydiv'></div>

<script type= "text/javascript">
  $.ajax({
    url: "users/dash",
    data: {  
    //params if needed
    }
  });
</script> 
```

# java - 从广播接收器恢复以前的活动

> ID：14856316
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:45.420
> 
> 标签：java, android, android-intent, android-activity, broadcastreceiver

这是我的问题：

*   我在活动A
*   Activity A 启动一个新的Activity B 呼叫一个号码（Intent.ACTION_CALL）
*   怎么可能恢复活动 A - 我不想完成活动 B，我只是想把活动 A 带到前面

目前我有一个广播接收器，它能够在呼叫发生时启动一个新的活动实例 A。如果我从那里使用“FLAG_ACTIVITY_SINGLE_TOP”开始活动 A，我会收到错误消息

```
Calling startActivity() from outside of an Activity
context requires the FLAG_ACTIVITY_NEW_TASK flag.
Is this really what you want? 
```

但我不想要新任务，我想恢复活动 A

非常感谢！

编辑：也许我可以简单地模拟点击后退按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:22:13.620

考虑到您的用例 - BroadcastReceiver 没有启动活动的任务 -`singleTask`在清单中应该做你想做的事。

> “singleTask” 系统创建一个新任务并在新任务的根目录下实例化活动。但是，如果活动的实例已经存在于单独的任务中，系统会通过调用其 onNewIntent() 方法将意图路由到现有实例，而不是创建新实例。一次只能存在一个活动实例。
> 
> 注意：虽然活动在一个新任务中开始，但“后退”按钮仍将用户返回到上一个活动。

取自：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:00:07.733

你试过使用`FLAG_ACTIVITY_REORDER_TO_FRONT`吗？

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)

它似乎完全符合您的需要。

# android - 为什么我的 ListFragment 只有一个加载圈而不显示我从远程服务器获取的数据？

> ID：14856317
> 
> 赞同：0
> 
> 时间：2013-02-13T14:54:47.197
> 
> 标签：android, android-listfragment

我在 android 中有一个应用程序，它可以从远程服务器获取数据并将其显示在 ListFragment 上。它成功地获取了我的 LogCat 上显示的数据，但它没有显示在 ListFragment 所在的 Activity 本身上。它只是显示加载循环，无论我等待多长时间，它仍然会做同样的事情。我正在使用 httprequest 获取数据并使用 AsyncTask 来获取它们。

这是主要活动代码：

```
package com.thesis.menubook;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

public class MenuMain extends ListActivity {
    JSONParser jsonParser = new JSONParser();
    ArrayList<HashMap<String, String>> categoryList = new ArrayList<HashMap<String, String>>();
    private ProgressDialog pDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu_main);

        // Populate Category List from database
        new GetCategories().execute();

        //set list on click listener for category
            // on category list click update fragment using dbase query

        // set swipe listener
            // on swipe update fragment using dbase query

        // set add button listener
            // on click add to order list list adapter

        // set order list listener
            // on click remove from list

        // set send button listener
            // update remote database using order list
    }

    class GetCategories extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
             super.onPreExecute();
             pDialog = new ProgressDialog(MenuMain.this);
             pDialog.setMessage("Loading Categories. Please wait...");
             pDialog.setIndeterminate(false);
             pDialog.setCancelable(false);
             pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... param) {
            Bundle b = getIntent().getExtras();
            String ipaddress = b.getString("IPAddress");

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            Log.d("IP ADDRESS", ipaddress +" ");

            JSONObject json = jsonParser.makeHttpRequest("http://"+ipaddress+"/MenuBook/selectCategories.php", "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Categories: ", json.toString() + " ");
            int num = 1;
            try {
                // Checking for SUCCESS TAG
                int success = json.getInt("success");

                if (success == 1) {
                    // products found
                    // Getting Array of Products

                    JSONArray category_list = json.getJSONArray("category_list");

                    // looping through All Products
                    for (int j = 1; j < category_list.length(); j++) {
                        JSONObject c = category_list.getJSONObject(j);

                        // Storing each json item in variable
                        String category = c.getString("category");

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put("category", category);

                        Log.d("category #"+num+"", category + " ");
                        num = num + 1;
                        // adding HashList to ArrayList
                        if(categoryList.contains(map) != true)
                        {
                            categoryList.add(map);
                        }
                        Log.d("Category List", categoryList.toString() + " ");
                    }
                } 
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String result) {
            pDialog.dismiss();

            ArrayAdapter<ArrayList<HashMap<String, String>>> arrayAdapter = new ArrayAdapter<ArrayList<HashMap<String, String>>>(MenuMain.this, R.layout.activity_menu_category);
            arrayAdapter.add(categoryList);

            if(arrayAdapter.isEmpty() == true)
            {
                setListAdapter(null);
            }
            else
            {
                setListAdapter(arrayAdapter);
            }
        }

    }

} 
```

这是 ListFragments 代码：

```
package com.thesis.menubook;

import android.annotation.TargetApi;
import android.app.ListFragment;
import android.os.Build;
import android.os.Bundle;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class MenuCategory extends ListFragment {

    @Override
    public void onActivityCreated(Bundle savedState) {
        super.onActivityCreated(savedState);

    }

} 
```

这是 ListFragments XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</ListView> 
```

如果有帮助，这里是 LogCat ：

```
02-13 22:57:35.422: V/TLINE(1349): new: android.text.TextLine@4066c0c0
02-13 22:57:36.702: V/TLINE(1349): new: android.text.TextLine@40674c00
02-13 22:57:59.142: D/dalvikvm(1349): GC_FOR_ALLOC freed 161K, 5% free 6481K/6791K, paused 162ms
02-13 22:57:59.184: I/dalvikvm-heap(1349): Grow heap (frag case) to 6.926MB for 513744-byte allocation
02-13 22:57:59.562: D/dalvikvm(1349): GC_CONCURRENT freed 13K, 5% free 6969K/7303K, paused 50ms+26ms
02-13 22:58:02.334: D/NetWork Info(1349): NetworkInfo: type: mobile[UMTS], state: CONNECTED/CONNECTED, reason: simLoaded, extra: internet, roaming: false, failover: false, isAvailable: true
02-13 22:58:08.841: D/Response(1349): org.apache.http.message.BasicHttpResponse@406867f8--response from apache
02-13 22:58:08.841: D/IP Address(1349): 192.168.10.149:80
02-13 22:58:09.181: D/NEXT VALUE --in Async on postexecute(1349): true
02-13 22:58:18.232: D/dalvikvm(1349): GC_CONCURRENT freed 139K, 4% free 7258K/7559K, paused 40ms+13ms
02-13 22:58:18.802: D/URL(1349): http://192.168.10.149:80/MenuBook/checkTable.php
02-13 22:58:23.082: D/Check Table(1349): {"success":1,"tabledb":[{"table_location":"UP","table_seat":"5","table_status":"AVAILABLE","table_ID":"001"}]}
02-13 22:58:23.082: D/Table Status in doinbg(1349): AVAILABLE
02-13 22:58:23.192: D/Table Status in post execute(1349): AVAILABLE
02-13 22:58:25.622: D/IP ADDRESS(1349): 192.168.10.149:80 
02-13 22:58:28.432: D/dalvikvm(1349): GC_CONCURRENT freed 353K, 7% free 7356K/7879K, paused 14ms+264ms
02-13 22:58:32.556: D/All Categories:(1349): {"success":1,"category_list":[{"category":"MAIN DISH"},{"category":"MAIN DISH"},{"category":"DESSERT"}]} 
02-13 22:58:33.273: D/Category List JSON Array(1349): [{"category":"MAIN DISH"},{"category":"MAIN DISH"},{"category":"DESSERT"}]
02-13 22:58:33.852: D/category #1(1349): MAIN DISH 
02-13 22:58:34.982: D/Category List(1349): [{category=MAIN DISH}] 
02-13 22:58:35.164: D/category #2(1349): DESSERT 
02-13 22:58:35.382: D/Category List(1349): [{category=MAIN DISH}, {category=DESSERT}] 
02-13 22:58:35.664: D/Category List(1349): [{category=MAIN DISH}, {category=DESSERT}] 
```

# mmap - 使用 mmap 保留地址空间的开销

> ID：14856319
> 
> 赞同：2
> 
> 时间：2013-02-13T14:54:55.450
> 
> 标签：mmap

我有一个程序经常使用大量数组，其中内存是使用分配的`mmap`

有谁知道在提交内存之前大量分配地址空间的典型开销，无论是使用稀疏文件分配`MAP_NORESERVE`空间还是使用稀疏文件支持空间？It5 让我印象深刻，mmap 不能免费，因为它必须为分配的空间创建页表条目。在实现我正在考虑的算法之前，我想对这种开销有所了解。

显然，答案将取决于平台，我对 x64 linux、sparc solaris 和 sparc linux 最感兴趣。我认为 1mb 页面的可用性使得 sparc 的开销比 x64 少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T03:43:57.960

的开销`mmap`取决于您使用它的方式。当您以适当的方式使用它时，它通常可以忽略不计。

在linux内核中，`mmap`操作可以分为两部分：

1.  寻找可以保存映射的空闲地址范围

2.  在地址空间中创建/扩大 vma 结构 ( `mm_struct`)

所以分配大量的内存使用`mmap`不会比小的内存引入更多的开销。

**所以你应该在每次分配内存尽可能大。（避免多次小`mmap`）**

**您可以明确提供起始地址（如果可能）。这可以在内核中节省一些时间来寻找足够大的可用空间。**

如果您的应用程序是多线程程序。**您应该避免同时调用`mmap`**. 那是因为地址空间受到读写锁的保护，而 mmap 总是使用写锁。`mmap`在这种情况下，延迟将大几个数量级。

此外，`mmap`只创建映射而不创建页表。页面被触摸时在页面错误处理程序中分配。页面错误处理程序将获取保护地址空间的读卡器锁，也会影响`mmap`性能。

**在这种情况下，您应该始终尝试重用您的大数组，而不是一次又一次地重用`munmap`它`mmap`。**（避免页面错误）

# java - 为什么 string.length() 是一个方法，而 int[].length 是一个属性？

> ID：14856327
> 
> 赞同：1
> 
> 时间：2013-02-13T14:55:17.430
> 
> 标签：java, arrays, string, integer

为什么 String.length() 是一个方法，而 int[].length 是一个属性（见下文）？

```
int[] nums = {2,4,7,12,43};
String phrase = "Hello, world.";

System.out.length(nums.length);
System.out.length(phrase.length()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:58:11.833

我不认为必须有充分的理由，而且我认为可能有很多原因。

但一个是通过创建`String#length()`一个属性，它可以在接口中声明（在这种情况下[`CharSequence`](http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html#length%28%29)）。接口不能声明公共实例字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:01:20.670

这是`String::length()`函数的样子：

```
public int length() {
    return count;
} 
```

所以本质上`count`可以被调用`length`并公开为类似于数组（`final`毕竟）。

这可能只是一个设计决定。可能有一些我们可以推测的促成因素（其中一个可能是`CharSequence`马克彼得斯提到的事情）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:00:20.160

因为 String 不是这样的数组。Java 的设计者将数组（它们是对象）设计为有一个名为`length`.

另一方面，String 有一个给出长度的方法。通常，将成员字段设为私有并使用方法访问它们是一种更传统的方法，但在数组的情况下则不然。

就您而言，它们是具有不同签名的不同对象。A`String`不是 a `char[]`（尽管在内部它可能以这种方式实现）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:07:22.700

没有特别的原因，我想。事实上，在 C#（一种非常相似的语言）中，`String.length`是一个属性[http://msdn.microsoft.com/en-us/library/system.string.length.aspx](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)。但是看看 C# 设计师对这个设计的看法：

```
The Length property returns the number of Char objects in this instance, not the number of Unicode characters.
The reason is that a Unicode character might be represented by more than one Char. Use the 
System.Globalization.StringInfo class to work with each Unicode character instead of each Char. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T15:08:17.210

**为什么 int[].length 是一个属性？**

数组是java中的特殊对象，它们有一个名为length的简单属性，它是final。

数组没有“类定义”（在任何 .class 文件中都找不到），它们是语言本身的一部分。

1.  公共最终字段长度，其中包含数组的组件数。长度可以是正数或零。

2.  公有方法clone，覆盖Object类中的同名方法，不抛出检查异常。数组类型 T[] 的克隆方法的返回类型是 T[]。

3.  多维数组的克隆是浅的，也就是说它只创建一个新数组。子数组是共享的。

4.  继承自类Object的所有成员；Object 唯一不被继承的方法是它的 clone 方法。

资源： [JSL 10.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)

[为什么 String.length() 是一个方法？](https://stackoverflow.com/questions/8720220/why-is-string-length-a-method)

# java - java中的3d建模加载、更新和渲染

> ID：14856328
> 
> 赞同：3
> 
> 时间：2013-02-13T14:55:17.850
> 
> 标签：java, jogl, java-3d

我是 java 3d 的新手。我遇到过这样的情况，我想在我的 java 程序中加载在 3d studio max 或 Maya 等 3d 建模软件中开发的任何对象的现成开发的 3d 模型[例如鞋]，然后更新其纹理或颜色属性等渲染它，然后将更新的模型显示给最终用户。

所以我问所有的 3d 专家我应该如何继续实现我的目标？我应该将哪个输入加载到我的程序中？如何更新加载的模型、渲染它并将更新的模型显示给最终用户？

**简单来说，我想让我的用户能够通过他们的交互来修改 3d 模型，他们提供了鞋子的 3d 模型，例如默认颜色和纹理以及鞋底颜色等一些字段，如果他们选择红色，那么加载的 3d模型的鞋底颜色为红色（即更新），然后以红色橡胶鞋底鞋代替默认颜色的鞋显示给最终用户。**

请建议我完成我的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:42:57.983

好的，首先，复杂的对象通常是使用一些 3D 编辑软件创建的，例如 Blender 或 Art of Illusion。这些程序可以将对象输出为几种不同的文件格式，最常见的是 .obj 文件格式：

*   [http://en.wikipedia.org/wiki/Wavefront_.obj_file](http://en.wikipedia.org/wiki/Wavefront_.obj_file)

另一种常见的格式是 .3ds，以我的经验，这比它的价值要多得多。他们确实为 Java3D 制作了一个 .3ds 文件加载器，该页面可以在这里找到：

*   [http://www.starfireresearch.com/services/java3d/inspector3ds.html](http://www.starfireresearch.com/services/java3d/inspector3ds.html)

我对你的建议是只使用 .obj 文件格式，它更容易使用。您也可以为它制作自己的解析器，这并不像听起来那么难。这样您就可以准确地知道您的对象是如何加载到环境中的。Java 确实带有它自己的解析器，有关如何使用它的说明在这里：

*   [http://www.vrupl.evl.uic.edu/LabAccidents/java3d/lesson08/indexa.html](http://www.vrupl.evl.uic.edu/LabAccidents/java3d/lesson08/indexa.html)

不幸的是，在使用这种文件格式时，我在使用 Blender 导出的文件时遇到了很多麻烦，他们现在可能已经解决了这个问题，但我不确定。当我以前做更多的 3D 东西时，我只是使用 Art of Illusion，甚至知道 Blender 更强大。Blender 可以在 Mac 上运行，但在正确设置的 Windows 上运行更加流畅。祝你好运！如果您需要一些示例代码，请告诉我，我很乐意为您发布一些示例代码。

幻觉艺术：

*   [http://www.artofillusion.org](http://www.artofillusion.org)

*   [http://www.artofillusion.org/documentation#](http://www.artofillusion.org/documentation#)

搅拌机：

*   [http://www.blender.org](http://www.blender.org)

*   [http://www.blender.org/education-help/tutorials/](http://www.blender.org/education-help/tutorials/)

我不确定您希望用户如何更改对象。如果您希望他们能够更改颜色，或鞋子的类型或诸如此类的东西，那并不是什么大不了的事。如果您希望用户能够更改花边长度或更改实际对象结构的东西，则需要深入了解 3D 结构。如果你想改变颜色，只需改变材料。如果您希望能够更改鞋子的类型，只需加载不同的鞋子对象即可。我希望这对你有帮助。

在评论中，您还谈到了纹理映射，根据我的经验，在 Blender 中比在 Art of Illusion 中更容易做到。我可能会使用搅拌机来完成这个：

*   [http://wiki.blender.org/index.php/Doc:2.6/Manual/Textures/Mapping/UV](http://wiki.blender.org/index.php/Doc:2.6/Manual/Textures/Mapping/UV)

约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:00:53.580

我假设您只是希望用户选择不同的纹理/颜色，对吧？

然后看看那里的 Java3D 教程，例如这个：[http ://www.java3d.org/tutorial.html](http://www.java3d.org/tutorial.html)

我进一步猜想你的鞋子实际上是一个两部分的模型，即只有鞋底应该有另一种颜色，而其余的可能会有不同的纹理，对吧？

在这种情况下，您需要 2 个模型/形状，每个模型/形状都有自己的外观。然后，例如，根据需要更改鞋底外观，例如通过指定不同的材料或更改材料的颜色。

# yql - 如何从 url 更新存储的数据？

> ID：14856333
> 
> 赞同：0
> 
> 时间：2013-02-13T14:55:23.197
> 
> 标签：yql

使用以下命令在 yql 的托管存储中创建记录后：

```
insert into yql.storage.admin (url) values ("http://hostingdomain.com/mytable.xml") 
```

如何从 url 更新该记录？

该文档仅显示：

```
update yql.storage set value="new value" where name="store://3cc85a99-6a89-4600-ade1-f7f83ecc4b83" 
```

但这需要您直接输入值，而不是从 url 获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:52:13.530

For those who might be interested, I found the answer:

```
update yql.storage set url="[url]" where name="store://[updatename]" 
```

# php - CakePHP - 不保存消息的验证

> ID：14856334
> 
> 赞同：0
> 
> 时间：2013-02-13T14:55:23.423
> 
> 标签：php, validation, cakephp, controller

从事我的第一个 CakePHP '项目'。当我添加 $this->request->is('post') 时，我无法让 CakePHP (2.3) 在提交时正确显示验证消息。如果我删除它，我会收到验证消息（好！），但它会验证并在页面加载时显示它们..（坏！）。

**编辑：**澄清：问题是它没有自动显示验证错误。

**/app/view/Feedback/add.ctp**

```
echo $this->Form->create('Feedback');
echo $this->Form->input('Feedback.browser', array('type' => 'hidden', 'value' => $_SERVER['HTTP_USER_AGENT']));
echo $this->Form->input('Feedback.ip', array('type' => 'hidden', 'value' => $_SERVER['REMOTE_ADDR']));
echo $this->Form->input('Feedback.suggestie', array('rows' => '3', 'label' => false));
echo $this->Form->end('Send'); 
```

**/app/Controller/FeedbackController.php**

```
public function add($site = null, $page = null)
{
    if( $this->request->is('post') )
    {
        if( $this->Feedback->save( $this->request->data ) )
        {
            $subject = "Feedback ontvangen voor ".$this->data['Feedback']['site'];
            $mailBody = "Er is feedback ontvangen voor ".$this->data['Feedback']['site'] .":<br/>
                        <br/>
                        Pagina: ".$this->data['Feedback']['page']."<br/>
                        IP: ".$this->data['Feedback']['ip']."<br/>
                        Browser: ".$this->data['Feedback']['browser']."<br/>
                        <br/>
                        Pagina beoordeling: ".$this->data['Feedback']['rating']."<br/>
                        <br/>";
            if( $this->data['Feedback']['suggestie'] ) {
                $mailBody .= "Suggestie:<br/>"
                          .$this->data['Feedback']['suggestie']."<br/>";
            }

            if( $this->data['Feedback']['foutmelding'] ) {
                $mailBody .= "Foutmelding:<br/>"
                          .$this->data['Feedback']['foutmelding']."<br/>
                          <br/>
                          Contact voor foutmelding: ".$this->data['Feedback']['foutmeldingctc'];
            }

            $email = new CakeEmail();
            $email->emailFormat( 'html' );
            $email->from( array( 'xxxx' => 'High Profile Locaties Feedback' ) );
            $email->to( 'xxxx' );
            $email->subject( $subject );
            $email->send( $mailBody );

            //naar bedank pagina
            $this->redirect( '/pages/bedankt' );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T14:59:52.183

使用 empty($this->request->data) 测试表单是否已发布：

```
if (!empty($this->request->data)) {

    // form posted

    if ($this->Feedback->save($this->request->data)) {
        // save successful
    }
    else {
        // errors happened
    }

}
else {

    // form not posted yet

} 
```

# javascript - 如何在 $(document).ready 之后调用带参数的函数

> ID：14856335
> 
> 赞同：1
> 
> 时间：2013-02-13T14:55:25.413
> 
> 标签：javascript, jquery

我认为这对 jquery 专业人士来说很容易。

我做了一个全局函数。它由更改事件调用。但它也应该在 $(document).ready 之后调用一次

没有参数的函数的简单故事。

```
$(document).ready(function() {

function_to_call_after_ready();

}) 
```

但我必须用参数调用它，如下所示：

```
({param1: "1"}, function_to_call_after_read) 
```

尝试了几种组合，但我无法弄清楚。

这是更改事件调用的原始代码：

```
$("#Verbrauch_Typ").change({param1: "#Verbrauch_Einheit", param2: "#Verbrauch_Typ"}, einheiten_filtern); 
```

作品！

```
einheiten_filtern({param1: "#Verbrauch_Einheit", param2: "#Verbrauch_Typ"}); 
```

不会并“禁用”整个脚本。更改电话也不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:27:16.530

它看起来像是`einheiten_filtern()`一个事件处理程序，它从它接收到的事件对象中收集额外的数据。

您可以使用[on()](http://api.jquery.com/on/)绑定到`ready`事件，同时提供额外的数据：

```
$(document).on("ready", {
    param1: "#Verbrauch_Einheit",
    param2: "#Verbrauch_Typ"
}, einheiten_filtern); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:57:07.443

`$(document).ready()`您赋予它的功能或功能没有什么特别之处。只需使用普通的方法调用。

```
$(document).ready(function() {
  function_to_call_after_ready("1");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:01:04.650

我不确定您要做什么，但是如果您想调用具有可变数量参数的函数，请使用`.apply`：

```
function_to_call.apply(window, arrayOfArguments); 
```

如果要更改`this`函数的上下文，请使用`.call`或`.apply`：

```
function_to_call.apply(jQuery, arrayOfArguments); 
```

`.call`工作方式相同，但采用单个参数而不是所有参数的数组。

如果您想以这种方式*绑定*函数而不是立即调用它，请使用（`.bind`如果可用）或 jQuery 的`$.proxy`：

```
$(document).ready(function_to_call.bind(jQuery, arg1, arg2)); 
```

既不`.bind`也不`$.proxy`将一组参数作为参数。它们都采用可变数量的参数。

# sql - CASE WHEN 语句中的 SQL 不等式由于 NULL 值而不起作用

> ID：14856338
> 
> 赞同：1
> 
> 时间：2013-02-13T14:55:34.780
> 
> 标签：sql

我有一个包含以下语句的 SQL 查询

```
SELECT
    (CASE 
        WHEN field1 > 0 THEN field1 
        ELSE (field2 * field3) 
    END) AS result
FROM table 
```

应该返回 field1 的值，除非它是“0”，在这种情况下，语句返回两个其他字段的乘积。

我遇到的问题是如果 field1 为 NULL，此语句将返回 NULL。

我想修改我的 SQL，以便在 field1 为 NULL 时返回字段 2 和 3 的乘积，就像在 field1 为“0”时一样。

我尝试了以下方法：

```
SELECT
    (CASE 
        WHEN field1 > 0 THEN field1 
        WHEN field1 IS NULL THEN (field2 * field3)
        ELSE (field2 * field3) 
    END) AS result
FROM table 
```

但是 NULL 似乎仍然渗透到语句中，并且只要 field1 为 NULL，NULL 仍然会被返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:09:13.673

您的查询已经完成了您想要的。何时返回`field1`产品。如果其中之一是，则（退回的）产品将为。`NULL``field2 * field3``field2``field3``NULL``NULL`

如果您想`0`在其中任何一个是时返回一些值（也许）`NULL`，您可以更改`CASE`：

```
SELECT
    (CASE 
        WHEN field1 > 0                         -- when field1 > 0
            THEN field1 
        WHEN field2 IS NULL OR field3 IS NULL   -- when field1 = 0 or NULL
            THEN 0
        ELSE field2 * field3 
    END) AS result
FROM table ; 
```

或者简单地说：

```
SELECT
    (CASE 
        WHEN field1 > 0  
            THEN field1 
        ELSE COALESCE(field2 * field3, 0) 
    END) AS result
FROM table ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T13:20:36.597

您可以使用[COALESCE / IFNULL](https://www.w3schools.com/sql/sql_isnull.asp) (SQL Server / MySQL)

简单如：

```
SELECT
   COALESCE((CASE 
      WHEN field1 > 0 THEN field1 
      ELSE (field2 * field3) 
   END), 0) AS result
FROM table 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T14:58:54.943

为了帮助您诊断此问题，请使用以下内容：

```
SELECT
    (CASE 
        WHEN field1 > 0 THEN field1 
        WHEN field1 IS NULL THEN (field2 * field3)
        ELSE (field2 * field3) 
    END) AS result,
    field1, field2, field3

FROM table
WHERE 
   (CASE 
        WHEN field1 > 0 THEN field1 
        WHEN field1 IS NULL THEN (field2 * field3)
        ELSE (field2 * field3) 
    END) IS NULL 
```

问题是什么将立即变得显而易见。

# javascript - 如何在 three.js/WebGL 中更改 STL 对象的不透明度？

> ID：14856339
> 
> 赞同：2
> 
> 时间：2013-02-13T14:55:34.840
> 
> 标签：javascript, three.js, webgl, opacity

我正在为一个我想从事的项目自学 WebGL，但我对 Three.js 的所有漂亮特性都很陌生。

我有一个 STL 对象，我正在使用 STL 加载程序将其导入 3-D 查看器。现在，我希望能够更改该对象的不透明度，并且可能删除该对象的某些特征以查看 STL 图像的内部。如何改变对象的不透明度，也许创建一个按钮来改变不透明度。我该怎么做？

另外，如果可能的话（因为加载的模型由几个部分组成）删除某些结构？也许侧面有一个工具栏，上面写着第 1 部分、第 2 部分、第 3 部分，对于每个部分，您只看到那个部分。

非常感谢！！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:24:58.547

在您的代码中，您必须使用 STLLoader 加载 STL 文件。而且由于 STL 文件没有材料，您将添加一个材料定义，如下所示：

```
var material = new THREE.MeshPhongMaterial ({ color: 0xFF0000 });
var mesh = new THREE.Mesh (object, material); 
```

其中 object 是从 addEventListener 函数中的 event.target 分配的，因为这是加载 STL 文件的方式。您可以将材料定义更改为：

```
var material = new THREE.MeshPhongMaterial ({ color: 0xFF0000, opacity: 0.5, transparent: true });
var mesh = new THREE.Mesh (object, material); 
```

得到红色透明材料。您不必使用 Phong，也可以使用 LambertMaterial。

# android - 如何在 Android 的应用程序内连接 Playstore 支付网关？

> ID：14856343
> 
> 赞同：1
> 
> 时间：2013-02-13T14:55:55.303
> 
> 标签：android, google-play, google-play-services

我正在创建一个对几个模块免费的应用程序，我希望用户为这个应用程序中可用的其他模块付费。我不希望用户付费并从 Playstore 下载完整版。相反，我希望用户使用我的应用程序来支付和激活完整版。

我在很多游戏中都看到过这种情况......但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T21:37:54.770

您可以使用[Google Play Billing](http://developer.android.com/google/play/billing/index.html)做到这一点。使用所有模块开发您的游戏，并根据用户购买的内容启用/禁用模块。为了进行此验证，请为代表模块的应用[注册产品](http://developer.android.com/google/play/billing/billing_admin.html)

# c++ - 什么时候应该在函数返回值上使用 std::move？

> ID：14856344
> 
> 赞同：147
> 
> 时间：2013-02-13T14:55:56.090
> 
> 标签：c++, c++11, move-semantics

在这种情况下

```
struct Foo {};
Foo meh() {
  return std::move(Foo());
} 
```

我很确定移动是不必要的，因为新创建的`Foo`将是一个 xvalue。

但是在这样的情况下呢？

```
struct Foo {};
Foo meh() {
  Foo foo;
  //do something, but knowing that foo can safely be disposed of
  //but does the compiler necessarily know it?
  //we may have references/pointers to foo. how could the compiler know?
  return std::move(foo); //so here the move is needed, right?
} 
```

那里需要搬家，我想？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-02-13T15:07:24.790

在12.8/32的情况下`return std::move(foo);`是多余的：`move`

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由一个右值指定的。

`return foo;`是 NRVO 的情况，因此允许复制省略。`foo`是一个左值。因此，为“复制” from`foo`到返回值的构造函数选择的构造函数`meh`必须是移动构造函数（如果存在）。

但是，添加`move`确实有潜在的影响：它可以防止移动被忽略，因为`return std::move(foo);`它*不*符合 NRVO 的条件。

据我所知，12.8/32 列出了左值的副本可以被移动替换的*唯一*条件。通常不允许编译器在复制后检测到未使用的左值（例如使用 DFA），并主动进行更改。我在这里假设两者之间存在可观察到的差异——如果可观察到的行为相同，则适用“as-if”规则。

因此，要回答标题中的问题，`std::move`当您希望它被移动并且它不会被移动时，请使用返回值。那是：

*   你希望它被移动，并且
*   它是一个左值，并且
*   它不符合复制省略的条件，并且
*   它不是按值函数参数的名称。

考虑到这很繁琐，而且移动*通常*很便宜，您可能想说在非模板代码中您可以稍微简化一下。在以下情况下使用`std::move`：

*   你希望它被移动，并且
*   它是一个左值，并且
*   你不必担心它。

通过遵循简化的规则，您会牺牲一些移动省略。对于`std::vector`那些移动起来很便宜的类型，你可能永远不会注意到（如果你注意到了，你可以优化）。对于像`std::array`这样移动起来很昂贵的类型，或者对于你不知道移动是否便宜的模板，你更有可能担心它。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-13T14:58:38.517

在这两种情况下，移动都是不必要的。在第二种情况下，`std::move`这是多余的，因为您要按值返回局部变量，并且编译器会理解，由于您不再使用该局部变量，因此可以将其移出而不是复制。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-02-13T15:39:29.730

在返回值上，如果返回表达式直接引用本地左值的名称（即此时为 xvalue），则不需要`std::move`. 另一方面，如果返回表达式**不是**标识符，它不会自动移动，例如，`std::move`在这种情况下你需要显式：

```
T foo(bool which) {
   T a = ..., b = ...;
   return std::move(which? a : b);
   // alternatively: return which? std::move(a), std::move(b);
} 
```

当直接返回一个命名的局部变量或一个临时表达式时，你应该避免显式的`std::move`. 在这些情况下，编译器*必须*（并且将来会）自动移动，并且添加`std::move`可能会影响其他优化。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-02-13T15:36:36.520

关于什么时候不应该移动它有很多答案，但问题是“什么时候应该移动它？”

下面是一个人为的例子，说明何时应该使用它：

```
std::vector<int> append(std::vector<int>&& v, int x) {
  v.push_back(x);
  return std::move(v);
} 
```

即，当您有一个接受右值引用的函数时，对其进行修改，然后返回它的副本。（在[c++20](/questions/tagged/c%2b%2b20 "显示标记为“c++20”的问题")中，行为发生了变化）现在，在实践中，这种设计几乎总是更好：

```
std::vector<int> append(std::vector<int> v, int x) {
  v.push_back(x);
  return v;
} 
```

这也允许您采用非右值参数。

基本上，如果您在要通过移动返回的函数中有右值引用，则必须调用`std::move`. 如果你有一个局部变量（无论它是否是参数），隐式返回它`move`（并且这个隐式移动可以被忽略，而显式移动不能）。如果你有一个函数或操作接受局部变量，并返回对所述局部变量的引用，你必须`std::move`让 move 发生（例如，三元`?:`运算符）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-27T22:49:25.223

C++ 编译器可以免费使用`std::move(foo)`：

*   如果已知它`foo`已经到了生命周期的尽头，并且
*   除了 C++ 规范允许的语义效果之外，隐式使用`std::move`不会对 C++ 代码的语义产生任何影响。

这取决于 C++ 编译器的优化能力，在遵守 C++ 规范规则的同时，它是否能够计算从`f(foo); foo.~Foo();`到的哪些转换`f(std::move(foo)); foo.~Foo();`在性能或内存消耗方面是有利可图的。

* * *

**从概念**上讲，2017 年的 C++ 编译器，例如 GCC 6.3.0，**能够优化**此代码：

```
Foo meh() {
    Foo foo(args);
    foo.method(xyz);
    bar();
    return foo;
} 
```

进入这段代码：

```
void meh(Foo *retval) {
   new (retval) Foo(arg);
   retval->method(xyz);
   bar();
} 
```

这避免了调用 . 的复制构造函数和析构函数`Foo`。

* * *

2017 年的 C++ 编译器，例如 GCC 6.3.0，**无法优化**这些代码：

```
Foo meh_value() {
    Foo foo(args);
    Foo retval(foo);
    return retval;
}

Foo meh_pointer() {
    Foo *foo = get_foo();
    Foo retval(*foo);
    delete foo;
    return retval;
} 
```

进入这些代码：

```
Foo meh_value() {
    Foo foo(args);
    Foo retval(std::move(foo));
    return retval;
}

Foo meh_pointer() {
    Foo *foo = get_foo();
    Foo retval(std::move(*foo));
    delete foo;
    return retval;
} 
```

这意味着 2017 年的程序员需要明确指定此类优化。

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2013-02-13T15:01:52.120

`std::move`从函数返回时完全没有必要，并且真正进入了你的领域——程序员——试图照看你应该留给编译器的东西。

当你`std::move`从一个不是该函数局部变量的函数中得到什么时会发生什么？你可以说你永远不会写出那样的代码，但是如果你写的代码很好，然后重构它并且心不在焉地不改变`std::move`. 你会很高兴跟踪那个错误。

另一方面，编译器大多不会犯这类错误。

另外：需要注意的是，从函数返回局部变量**不一定**会创建右值或使用移动语义。

[看这里。](http://en.wikipedia.org/wiki/Return_value_optimization)

# objective-c - 如何在 aws s3 中停止/取消下载请求

> ID：14856349
> 
> 赞同：3
> 
> 时间：2013-02-13T14:56:19.013
> 
> 标签：objective-c, xcode, xcode4, amazon-web-services, amazon-s3

从 amazon s3 下载文件时，我试图取消/停止文件。但我无法得到任何解决方案。所以请给我一个解决方案。谢谢

```
S3GetObjectRequest *downloadRequest = [[[S3GetObjectRequest alloc] initWithKey:path withBucket:SECRET] autorelease];
    downloadRequest.delegate=self;
    [s3 getObject:downloadRequest];
    NSData *myData2;
        myData2 = response.body;
        [myData2 writeToFile:filePath atomically:YES]; 
```

这是我用于下载的代码片段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:54:53.777

[S3GetObjectRequest](http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/S3GetObjectRequest.html)有一个名为[urlConnection](http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AmazonServiceRequest.html#//api/name/urlConnection)的属性。您可以致电`cancel`酒店`urlConnection`取消您的下载请求。

# php - 电子邮件管道不适用于 PHP 脚本。本地交付失败错误

> ID：14856355
> 
> 赞同：0
> 
> 时间：2013-02-13T14:56:53.607
> 
> 标签：php, email, pipe, piping

在 cPanel 中，我将以下内容通过管道传输到我的脚本中：

```
alerts@XXX.com  to  |/home/XXX/public_html/client/inc/msg/mailReader.php 
```

我收到以下电子邮件：

> 此消息是由邮件传递软件自动创建的。
> 
> 您发送的邮件无法传递给一个或多个收件人。这是一个永久性错误。以下地址失败：
> 
> 由 alerts@XXX.com 生成的到 |/home/XXX/public_html/client/inc/msg/mailReader.php 的管道本地传递失败

mailReader.php 的路径绝对正确，mailReader.php 中shebang 中的PHP 路径也是正确的。第 1 行是：

```
#!/usr/local/lib/php -q<?php 
```

您知道为什么它会返回“本地交付失败”错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:22:42.957

该目录实际上是#!/usr/bin/php -q。我有 2 个其他目录包含 PHP 文件，但这不是在寻找 PHP 目录，而是在名为“php”的 bin 中寻找已编译的 PHP 文件。

# objective-c - NSTask 应用程序失去焦点

> ID：14856374
> 
> 赞同：2
> 
> 时间：2013-02-13T14:58:01.693
> 
> 标签：objective-c, cocoa, nstask

我正在使用 NSTask 启动外部应用程序。但此时，我的应用失去了焦点。我不想要这个。另一个应用程序只是在文件中写入一些信息，而我的应用程序读取并显示这些信息。是否可以在后台启动 NSTask 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:03:21.500

如果您使用`open`命令 ( [manpage](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html) ) 启动应用程序，您可以尝试使用该`-g`选项来避免将应用程序置于前台：

```
-g  Do not bring the application to the foreground. 
```

所以不要`NSTask`直接启动应用程序；习惯`open`，错误，打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:57:43.850

为什么不在启动 NSTask 后调用“performSelector:withObject:afterDelay”？使用它，您可以在适当的延迟后调用重新激活您的应用程序的选择器。您在这里不需要任何花哨的东西，只需让其他应用程序出现在前面，然后重新激活您自己的应用程序即可。

这将起作用。只需将延迟设置为所需的任何值。

```
[[NSRunningApplication currentApplication] performSelector:@selector(activateWithOptions:) withObject:[NSNumber numberWithUnsignedInteger:NSApplicationActivateIgnoringOtherApps] afterDelay:5.0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:28:04.970

我认为您可能不想使用 NSTask，而是使用[NSWorkspace](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)的`launchApplicationAtURL:options:configuration:error:`. 如果您`NSWorkspaceLaunchWithoutAddingToRecents | NSWorkspaceLaunchWithoutActivation | NSWorkspaceLaunchAndHide`作为`options:`参数传递，它应该实际上是不可见的。（我显然没有在你的特殊情况下尝试过，但这就是它的预期工作方式。）

# java - 对话框内的 Facebook 登录按钮

> ID：14856375
> 
> 赞同：2
> 
> 时间：2013-02-13T14:58:04.953
> 
> 标签：java, android, facebook, mobile

如果用户已登录，我想在某个部分显示某些内容。但是，如果用户未登录，我想显示一个提示用户登录的对话框。我还想在此对话框中显示 facebook 登录按钮。

但是，对话框内的登录按钮似乎不起作用。当我将它放在活动布局中时，它确实有效。

有没有办法让它在对话框中正常工作？

这是对话框xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/heart"
        android:layout_width="80dp"
        android:layout_height="70dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="70dp"
        android:background="@drawable/favorite_dialog"/>

    <TextView
        android:id="@+id/question_favorites"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#FFFFFF" 
        android:layout_below="@+id/heart"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="30dp"
        android:layout_marginRight="20dp"
        android:layout_centerHorizontal="true"
        android:textStyle="bold"
        android:textSize="20sp"/>

     <TextView
        android:id="@+id/explanation_favorites"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#FFFFFF" 
        android:layout_below="@+id/question_favorites"
        android:layout_marginTop="20dp"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dp"
        android:textSize="18sp"
        android:textStyle="italic"
        android:layout_centerHorizontal="true"/>

     <com.facebook.widget.LoginButton
        android:id="@+id/authButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_above="@+id/button"
        android:layout_centerHorizontal="true"
        />

    <Button 
        android:id="@+id/button"
        android:layout_height="40dp"
        android:layout_width="200dp"
        android:text="Cancelar"
        android:textStyle="bold"
        android:textSize="18sp"
        android:layout_marginTop="10dp"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="30dp"
        android:background="@drawable/cancel"/>

</RelativeLayout> 
```

此对话框显示在 onCreate 方法上，它包含一个取消按钮，可将其关闭。

我将不胜感激任何帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:05:23.213

我想出了这个，它很简单，但不是那么优雅。

我所做的是将 facebook 登录按钮隐藏在主布局中。然后，我在对话框按钮上设置了一个监听器，并在其中添加了“facebookLogin.performClick();”。

这将点击重定向到 facebook 登录侦听器。

无论如何谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T10:09:37.760

我也遇到了同样的错误。但最后我设法让它工作：

所以：MainActivity 打开 WelcomeFragment。WelcomeFragment 打开 LoginDialog（我自己的对话框）。在 LoginDialog 我有 facebookLogin 按钮。在 MainActivity 中，根据 facebook 的教程，我拥有了我应该拥有的一切：UiLifecycleHelper uiHelper 实例，它在 onResume、onActivityResult、onPause、onDestroy 和 onSaveInstanceState 中调用。LoginDialog 中的登录按钮通过以下方式初始化：

```
LoginButton authButton = (LoginButton) findViewById(R.id.facebookLogin);
authButton.setReadPermissions(Arrays.asList("email"));
authButton.setFragment(welcomeFragment); 
```

但这在我将 onActivityResult 添加到 WelcomeFragment 之前不起作用，与 MainActivity 中相同：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    ((MainActivity)getActivity()).uiHelper.onActivityResult(requestCode, resultCode, data);
} 
```

它还在[https://developers.facebook.com/docs/android/login-with-facebook/v2.2](https://developers.facebook.com/docs/android/login-with-facebook/v2.2)上进行了描述：

“在身份验证流程中，默认情况下将结果返回给主活动。您的活动需要通过覆盖 onActivityResult() 方法来处理结果。为了允许片段接收 onActivityResult() 调用而不是活动，您可以在 LoginButton 实例上调用 setFragment() 方法。”

# ios - 在 iOS 上的 OpenGL ES 2.0 中使用 Quads 自定义文本的好教程

> ID：14856380
> 
> 赞同：-1
> 
> 时间：2013-02-13T14:58:22.200
> 
> 标签：ios, opengl-es, bitmap, textures

我目前是 OpenGL ES 的新手，并且正在自学如何编写 iOS 游戏。我目前正在玩一个项目，我想在 HUD 上放置一些自定义文本。我不想使用 UILabel 来执行此操作，并且目前不知道如何使用 Quads 来剪切 png 或这样的完整文本并将它们附加到用于显示的普通文本上。我希望最终结果是为命令/方法提供一个简单的字符串，并使用四边形的纹理/位图显示输出。说 glPrint("Hello World");。谁能指导我正确的方向？似乎没有一个关于如何为 OpenGL ES 2.0（只是 OpenGL）执行此操作的好的教程。我还想尽量避免使用 3rd 方 API。我真的需要/想了解如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:09:38.627

当我开始为我当前的 2D 项目使用 OpenGL ES 时，我使用了[Ray 的教程](http://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and-glkit-part-1)，它帮助我掌握了渲染纹理 2D 四边形的方法。结合他的[3D OpenGL ES 教程](http://www.raywenderlich.com/5235/beginning-opengl-es-2-0-with-glkit-part-2)，你也许可以拼凑出你想做的事情。请注意，您可能不会像教程中那样单独渲染每个四边形，因为这样效率非常低。相反，您会将字符的所有顶点收集到两个大数组/顶点缓冲区中并批量渲染字符。渲染每一帧的基本流程可能如下所示：为 3D 渲染传递一个正常的透视投影矩阵，以某种方式将 3D 场景的顶点信息传递给着色器，然后渲染 3D 场景。这部分你已经完成了。对于文本，紧随其后，传入一个正交投影矩阵，绑定你的字体纹理（通常在前面生成`GLKTextureLoader`类）到活动纹理单元，为字符生成两个大的纹理和几何顶点数组/如果文本已更改，则更新 VBO，将其传入，然后使用`glDrawArrays`or一次批量渲染所有字母`glDrawElements`（这需要索引）。

此外，由于我也是使用 OpenGL 的新手，因此其中一些可能是错误的/效率低下的。我还没有使用 OpenGL ES 来渲染任何 3D，所以我不确定在渲染 3D 场景和 2D 场景（文本）之间除了不同的投影矩阵之外可能需要哪些其他状态更改（启用、禁用等） .

似乎仅使用 OpenGL 绘制文本是一项相对困难且乏味的任务，因此，如果您只想渲染显示帧速率和其他内容的 HUD 叠加层，则最好使用`UILabel`s 并省去麻烦，尤其是如果您的项目是不是很复杂。这也使您不必处理换行、字距调整、字体大小、颜色、不同语言和大量其他内容，如果您需要更复杂的内容，这些内容会使文本渲染变得非常复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:48:43.397

与其跟踪每个字母的位置，不如使用 Core Graphics 将整个字符串绘制成位图，然后将其作为纹理上传？您只需要从位图中获取尺寸即可知道为该文本字符串绘制的四边形大小。

在我的开源 GPUImage 框架中，我有一个称为 GPUImageUIElement 的输入类，它执行类似的操作。该输入的相关代码如下：

```
CGSize layerPixelSize = [self layerSizeInPixels];

GLubyte *imageData = (GLubyte *) calloc(1, (int)layerPixelSize.width * (int)layerPixelSize.height * 4);

CGColorSpaceRef genericRGBColorspace = CGColorSpaceCreateDeviceRGB();    
CGContextRef imageContext = CGBitmapContextCreate(imageData, (int)layerPixelSize.width, (int)layerPixelSize.height, 8, (int)layerPixelSize.width * 4, genericRGBColorspace,  kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
CGContextTranslateCTM(imageContext, 0.0f, layerPixelSize.height);
CGContextScaleCTM(imageContext, layer.contentsScale, -layer.contentsScale);

[layer renderInContext:imageContext];

CGContextRelease(imageContext);
CGColorSpaceRelease(genericRGBColorspace);

glBindTexture(GL_TEXTURE_2D, outputTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (int)layerPixelSize.width, (int)layerPixelSize.height, 0, GL_BGRA, GL_UNSIGNED_BYTE, imageData);

free(imageData); 
```

此代码采用 CALayer（直接或来自 UIView 的支持层）并将其内容呈现到纹理。在此之前我已经初始化了纹理，因此代码设置了位图上下文，使用 将图层渲染到该上下文中`-renderInContext:`，然后将该位图上传到纹理以在 OpenGL ES 中使用。

辅助方法`-layerSizeInPixels`仅考虑当前的 Retina 比例因子，如下所示：

```
- (CGSize)layerSizeInPixels;
{
    CGSize pointSize = layer.bounds.size;
    return CGSizeMake(layer.contentsScale * pointSize.width, layer.contentsScale * pointSize.height);
} 
```

如果您为视图使用了 UILabel 并使其自动调整大小以适合其文本，您可以在其上设置文本，使用上面的内容来渲染和上传您的纹理，然后获取元素的像素大小来确定您的四边形大小。`-drawAtPoint:withFont:fontForSize:`但是，仅使用NSString 等自己绘制文本可能会更有效。

使用 Core Graphics 渲染您的文本可以轻松地将文本作为 NSString 进行操作，并使用 Core Graphics 的所有排版功能，而不是自己滚动。

# python - 在 Python (2.7) 中拆分字符串

> ID：14856385
> 
> 赞同：1
> 
> 时间：2013-02-13T14:58:32.497
> 
> 标签：python, regex, string, python-2.7

我有一个字符串，如下所示：

```
26   (passengers:22  crew:4) 
```

或者

```
32   (passengers:?  crew: ?) 
```

. 我要做的是拆分代码，以便只提取代表乘客和机组人员数量的数字。如果它是一个问号，我会寻找它被替换为“”。

我知道我可以使用 string.replace("?", "") 来替换 ? 但是我该如何分别提取机组人员或乘客的数字字符？这些数字可能从两位数到三位不等，因此我无法将最后几个字符从字符串中或以特定间隔切开。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T15:01:23.150

匹配这些的正则表达式是：

```
r'\(\s*passengers:\s*(\d{1,3}|\?)\s+ crew:\s*(\d{1,3}|\?)\s*\)' 
```

加入了一些额外的空白容差。

结果：

```
>>> import re
>>> numbers = re.compile(r'\(\s*passengers:\s*(\d{1,3}|\?)\s+ crew:\s*(\d{1,3}|\?)\s*\)')
>>> numbers.search('26   (passengers:22  crew:4)').groups()
('22', '4')
>>> numbers.search('32   (passengers:?  crew: ?)').groups()
('?', '?') 
```

# ruby - Ruby 正则表达式匹配我网站的所有子域？

> ID：14856386
> 
> 赞同：0
> 
> 时间：2013-02-13T14:58:32.717
> 
> 标签：ruby, regex

我是使用正则表达式的新手。我需要接受所有子域，例如：

```
something.mysite.com
something2.mysite.com
anotherthing.mysite.com 
```

如果我想做类似的事情，我可以放什么样的正则表达式：

```
rack_env['SERVER_NAME'].match <regex> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:08:14.553

你不应该在这里使用正则表达式。要走的路是：

```
rack_env['SERVER_NAME'].end_with?(".mysite.com") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:01:12.500

类似的东西`\.mysite\.com$`应该起作用。[http://rubular.com](http://rubular.com)是测试正则表达式的好资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:02:47.440

```
[a-zA-Z0-9]+\.[a-z]+\.com

something.mysite.com //ok
something2.mysite.com //ok
anotherthing.mysite.com //ok
something2mysite.com //not ok
anotherthing.mysitecom //not ok 
```

但这是有风险的，因为 you.can.have.as.many.subdomain.as.you.want 在未来

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:03:31.337

如果只是正在更改的子域，您可以使用：

```
/\w+\.mysite\.com/ 
```

# html - 一列填充剩余宽度的最小宽度表？

> ID：14856395
> 
> 赞同：2
> 
> 时间：2013-02-13T14:58:55.040
> 
> 标签：html, css

我有一个表格，我不希望其宽度小于 540 像素，在此表格中，如果内容小于 540 像素宽，我希望单列填充剩余宽度。

如果我将此列的宽度设置为 99%，它在 Firefox、Safari 和 Chrome 中有效，但在 Internet Explorer（任何版本）中无效，表格会增长到整个页面宽度。

我需要它才能在 IE7 及更高版本中工作。

编辑：

添加了一些代码：

```
<div class="container">
    <table class="my-table">
        <tr>
            <td class="first"><img src="my-img.png"></td>
            <td class="expand">Some text here... should grow</td>
            <td class="meta">short text</td>
            <td class="end-col">final column</td>
        </tr>
    </table>
</div> 
```

CSS：

```
.container {
    min-width: 540px;
    display: inline-block;
}
.expand {
    width: 99%;
} 
```

.first、.meta 和 .end-col 都应该收缩到各自的内容。

这适用于除 Internet Explorer 之外的所有应用程序。

# wpf - 如何在 ItemsControl 中访问 ScrollViewer

> ID：14856397
> 
> 赞同：1
> 
> 时间：2013-02-13T14:59:04.553
> 
> 标签：wpf, itemscontrol, scrollviewer

我正在尝试在下面的 XAML 中访问名为“ScrollViewerItems”的 ScrollViewer，并在后面的代码中使用它。该名称似乎无法识别，可能是因为它嵌入在 ItemsControl 中。我不需要命名访问，但是如何在后面的代码中访问 ItemsControl 的 ScrollViewer？

```
<ItemsControl x:Name="EnteredItemsView" ItemsSource="{Binding LineItems}"  VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.Template>
        <ControlTemplate>
            <ScrollViewer x:Name="ScrollViewerItems" Focusable="False">
                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
            </ScrollViewer>
        </ControlTemplate>
    </ItemsControl.Template>
    <ItemsControl.ItemTemplate>
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:06:21.220

ScrollViewer 是 ItemsControl 的可视子项：

```
var scrollViewer =
    VisualTreeHelper.GetChild(EnteredItemsView, 0) as ScrollViewer; 
```

* * *

请注意，必须先加载 ItemsControl，然后才能访问子项。

您可以将`Loaded`处理程序添加到 ItemsControl

```
<ItemsControl Loaded="ItemsControlLoaded" ...> 
```

您访问 ScrollViewer 的位置

```
private void ItemsControlLoaded(object sender, EventArgs e)
{
    var itemsControl = sender as DependencyObject;
    var scrollViewer =
        VisualTreeHelper.GetChild(itemsControl, 0) as ScrollViewer;
} 
```

# jpa - JPA EntityManager TypedQuery - 返回与实体模型不同的类（ViewModel/DTO）？

> ID：14856398
> 
> 赞同：2
> 
> 时间：2013-02-13T14:59:03.777
> 
> 标签：jpa, entitymanager

来自实体框架背景我可以将我的 ORM 结果转换为包含完整后端模型数据子集的类。

我有一个 JAX-RS REST 服务，我通常会返回类似的东西

```
MyEntity result = em.createQuery(select e from MyEntity e ... blah blah blah). 
```

我知道我可以这样做：

```
Object result = em.createQuery(select e.Title, e.Version, e.Date from MyEntity e... blah blah blah). 
```

但是我可以a：将我的结果转换为一个单独的类，或者B在我的createquery中命名我的字段，以便在返回我的JSON时命名它们？

例如在 .Net Land 中，我可以做类似......

```
(select new {Title = e.Title, Version = e.Version}) 
```

然后将其转换为另一种类型。我尝试使用 typedquery 和强制转换，但我收到“类型 X 与返回类型 Y 不兼容”类型错误。

我的目标是返回我的信息的特定子集（视图模型/ DTO）以在特定场景中使用。

例如，我的模型很大，我不想每次都返回大量数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T15:06:44.373

`NEW`是的，可以使用 JPA 构造函数表达式（即关键字）创建非实体类型 ：

```
List<DTO> dtos = em.createQuery("SELECT NEW com.example.DTO( o.title, o.version) FROM Entity o").getResultList(); 
```

DTO 必须有一个包含所有相关字段的构造函数。

不需要铸造。

# mysql - MySQL longblob错误“数据包大于最大值......”

> ID：14856399
> 
> 赞同：0
> 
> 时间：2013-02-13T14:59:06.357
> 
> 标签：mysql, sql, database, sqldatatypes

我正在尝试导入一个 Wordpress 插件数据库，该数据库使用`longblob`数据类型将文件存储在表中。数据库在一台服务器上，所以我将其导出到另一台服务器上导入，但收到了各种错误，其中最新的是**“得到了一个大于 'max_allowed_pa​​cket' 字节的数据包”。**

以前，这些命令是在服务器上运行的：`set global max_allowed_packet=10000000;` 并且`set global net_buffer_length=1000000;`从那时起服务器已重新启动。

关于什么会导致这种情况的任何想法？我对这一切都很陌生，所以我可能没有提供所有必要的信息。让我知道是否需要澄清。

在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:23:18.213

在 my.cnf 文件中设置变量。在 linux 上，您可以在 /etc/my.cnf 中找到它并添加以下行：

```
max_allowed_packet = 64M 
```

进行此更改后，不要忘记重新启动 mysql。

# sql-server - 从命令行安装 SQL Server Express 以创建防火墙异常

> ID：14856400
> 
> 赞同：0
> 
> 时间：2013-02-13T14:59:07.143
> 
> 标签：sql-server

我正在使用以下命令行语句来安装 SQL Server。

```
start /wait E:\UnInstall\SQLSERVER\SQLEXPR32And64.EXE /qb username="EZITek" companyname="Ezitek Soft" addlocal=ALL disablenetworkprotocols="2" instancename="CBEServer" SECURITYMODE="SQL" SAPWD="cbeserver123" 
```

我想添加一些东西，以便安装程序也为 SQL 服务器创建防火墙异常。

有没有可能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:08:18.583

那种东西应该由操作系统/防火墙处理。服务器应用程序不应该在防火墙中请求例外。请在安装服务器后单独配置防火墙设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:09:27.060

可以使用`netsh`命令或 PowerShell 添加防火墙例外。

*   [http://technet.microsoft.com/en-us/library/cc776229(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc776229(v=ws.10).aspx)

# jquery - 通过手风琴条目上的 JQuery AJAX 更改手风琴 div OUTSIDE 中的内容（需要是 a ）

> ID：14856402
> 
> 赞同：0
> 
> 时间：2013-02-13T14:59:10.000
> 
> 标签：jquery, ajax, html, jquery-ui-accordion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:10:38.497

# php - Symfony2 分离实体与多对一关联

> ID：14856405
> 
> 赞同：2
> 
> 时间：2013-02-13T14:59:19.343
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1, cascade

**背景：**

在我的应用程序中，我有一个具有**自引用** `ManyToOne`关联的实体*（许多孩子可以指向一个单亲）*。而且我有一项功能可以使用 Doctrine ORM 一次对许多实体进行大规模更新。为了防止由于加载了许多实体而导致性能急剧下降，I`detach`实体一旦被更新。

**问题：**

当我`detach`一个有*孩子*的实体后来尝试更新这些*孩子*中的任何一个时， Doctrine 抱怨它不再认识*父母*。即使我在尝试更新子实体之前*是*`merge`父*实体*。

 ***问题：**

*分离父*实体时我做错了什么？我已经尝试在父列上执行 cascade="merge" 和/或“分离”，当我尝试坚持时，Doctrine 仍然抱怨*父级是一个未知实体。*

我已经模拟了一个简单的例子来重现这一点。见下文。

**测试代码：**

**实体\事物.php**

```
/**
 * @ORM\Entity()
 * @ORM\Table(name="things")
 */
class Thing
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Thing", inversedBy="children", cascade={"detach","merge"})
     * @ORM\JoinColumn(name="parentId", referencedColumnName="id", onDelete="SET NULL")
     */
    protected $parent;

    /**
     * @ORM\OneToMany(targetEntity="Thing", mappedBy="parent")
     */
    protected $children;

    /**
     * @ORM\Column(type="string", length=64)
     */
    protected $name;

    public function __construct($name = null)
    {
        $this->children = new ArrayCollection();
        $this->name = $name;
    }

    // .. SNIP ...
} 
```

**测试动作：**

```
public function testThingAction($_route)
{
    $em = $this->getDoctrine()->getEntityManager();
    $repo = $em->getRepository('AcmeThingBundle:Thing');

    // simple setup of a couple things in the DB
    $t1 = $repo->findByName('Thing1');
    if (!$t1) {
        $t1 = new Thing('Thing1');
        $t2 = new Thing('Thing2');
        $t2->setParent($t1);

        $em->persist($t1);
        $em->persist($t2);
        $em->flush();
        return $this->redirect($this->generateUrl($_route));
    }

    list($t1, $t2) = $repo->findAll();

    // detach and re-merge Thing1
    // This should cause Thing1 to be removed and then re-added 
    // to the doctrine's known entities; but it doesn't!?
    $em->detach($t1);
    $em->merge($t1);

    // try to update T2
    $t2->setName('Thing2 - ' . time());
    $em->persist($t2);
    // will fail with: 
    // A new entity was found through the relationship Thing#parent
    $em->flush();

    return array();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:04:53.403

问题是子对象与不再由 Doctrine 管理的特定父对象有关系。当您调用时，`$entityManager->merge($entity)`您会从该函数中获得一个新的托管实体。

当您恢复时，您需要`setParent()`使用新管理的实体手动调用您的每个孩子。*

# c# - 在哪里可以找到要下载的 MVC4 模板以及如何安装它们？

> ID：14856410
> 
> 赞同：1
> 
> 时间：2013-02-13T14:59:35.713
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4, jquery-templates

我有些困惑。搜索了一堆 ASP.NET 相关站点，但找不到答案。我一定错过了一些搜索词..

我想找到一个 MVC4 模板库（免费/便宜）并将它们应用到我的项目中。我从哪里做呢？我找到了一个 codeplex 项目（[http://mvccontribgallery.codeplex.com/](http://mvccontribgallery.codeplex.com/)），但是当我尝试通过复制申请时，出现了一堆错误（它使用了一个叫做 SiteMaster 的东西，而我的项目似乎使用了一个叫做 _layout 的东西） .

我看到大量关于使用它们、应用它们的人的参考资料，但我一定错过了一些非常基本的东西，因为我什至不知道如何找到可下载模板的列表。

在我的 MVC4 项目上查找/获取/安装模板的简单 1/2/3 步骤是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:30:08.087

您应该寻找合适的 HTML 模板而不是 MVC 特定的模板。

完成后，您需要修改主模板（通常是 Views/Shared/_layout）以使用您选择的模板中包含的 HTML 和 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T06:53:31.417

对于 MVC3 或 MVC4，您不需要下载任何模板。**只需在更高版本的 Visual Studio 2010 中[安装 MVC4](http://www.asp.net/mvc/mvc4)，然后选择选项创建新项目**即可。请参阅下面的屏幕截图：

![在此处输入图像描述](../Images/dec449765dff2eeaebf8d25205d07040.png)

**当您选择上述任何一个标记为红色框的选项时，Microsoft 将自动为您提供默认的 MVC 项目架构或在您的术语 MVC 模板中。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:55:49.913

mvc4模板是什么意思？我假设您的意思是“网站模板”。使用 MVC，您可以使用任何 html 模板，没有针对 MVC 的特定模板（这就是您找不到任何模板的原因）。您只需找到任何网站模板并将其调整为 mvc 上下文（将 css 和图像放在“Content”文件夹下，并将 html 代码放在 _layout 中并像 masterpage 一样使用它），一点也不难。事实上，在您知道没有人发布特定的改编版本之后，这很容易做到:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T19:58:07.097

跟着这些步骤：

（注意：如果您有 Asp.Net MVC 4，3 将无法正确安装（无论如何对我来说），因此请按顺序卸载并安装）。

[http://tedgustaf.com/blog/2011/4/installing-asp-net-mvc3-on-visual-studio-2010-sp1/](http://tedgustaf.com/blog/2011/4/installing-asp-net-mvc3-on-visual-studio-2010-sp1/)

# postgresql - 函数获取正确的年份周数

> ID：14856412
> 
> 赞同：7
> 
> 时间：2013-02-13T14:59:36.787
> 
> 标签：postgresql, postgresql-9.2, week-number

我想创建一个函数来获得正确的年份周数。我已经在[此处](https://stackoverflow.com/questions/14815929/getting-the-right-week-number-of-year/)发布以找到“本机”解决方案，但显然没有。

我尝试根据这个[mysql 示例创建函数](https://stackoverflow.com/questions/10656996/week-of-the-year-for-weeks-starting-with-saturday?lq=1)

下面是翻译成 postgresql 的代码：

```
CREATE OR REPLACE FUNCTION week_num_year(_date date)    
RETURNS integer AS
$BODY$declare 
_year integer;
begin

select date_part('year',_date) into _year; 
return ceil((to_char(_date,'DDD')::integer+(to_char(('01-01-'||_year)::date,'D')::integer%7-7))/7);           

end;$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

但它给出了错误的结果，有人可以帮助我吗？

我的配置：PostgreSQL 9.2

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T16:13:44.213

如果您想要正确的周数，请使用：

```
select extract(week from '2012-01-01'::date); 
```

这将产生结果`52`，如果您查看日历，这是正确的。

现在，如果您真的想将周数定义为“从一年的第一天开始每 7 天”，那很好，尽管它与其他人使用的周数不匹配并且有一些奇怪的怪癖：

```
select floor((extract(doy from '2011-01-01'::date)-1)/7)+1; 
```

顺便说一句，解析日期字符串并用字符串函数破解它们几乎总是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T16:41:28.580

```
create or replace function week_num_year(_date date)
returns integer as
$body$
declare
_year date;
_week_number integer;
begin
select date_trunc('year', _date)::date into _year
;
with first_friday as (
    select extract(doy from a::date) ff
    from generate_series(_year, _year + 6, '1 day') s(a)
    where extract(dow from a) = 5
)
select floor(
        (extract(doy from _date) - (select ff from first_friday) - 1) / 7
    ) + 2 into _week_number
;
return _week_number
;
end;
$body$
language plpgsql immutable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-06T13:14:08.763

您可以通过运行以下命令检索星期几和一年中的星期几：

```
 select  id,extract(DOW from test_date),extract(week from test_date), testdate,name from yourtable 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T15:17:08.423

那么内置提取功能呢？

```
SELECT extract (week from current_timestamp) FROM A_TABLE_FROM_YOUR_DB; 
```

# wolfram-mathematica - 在 Mathematica 中向后读取文件——如何？

> ID：14856414
> 
> 赞同：3
> 
> 时间：2013-02-13T14:59:42.137
> 
> 标签：wolfram-mathematica

我有一个包含 n 个“记录”的大文件（用 Mathematica 编写），每个记录都是一个固定长度 m 的列表，其中 n > 10,000 和 500 < m < 600（字节）。请注意，我的系统没有能力将所有记录保存在内存中 --- 将它们写入文件的原因。我有一个应用程序（在 Mathematica 中）需要以相反的顺序处理这些记录；即写出的最后一条记录是要处理的第一条记录。如何以相反的顺序从文件中读取这些记录？

同时（在对 Mathematica I/O 进行了一些试验和错误之后）我找到了一个解决方案。请注意，这是一个可能的解决方案的精简示例。

```
 fname = "testfile";

    strm = OpenWrite[fname];
    n = 10; (* In general, n could be very large *)
    For[k = 1, k <= n, k++,
      (* Create list on each pass through this loop ... *)

      POt = {{k, k + 1}, {k + 2, k + 3}};
      Print[POt];

      (* Save to a file *)
      Write[strm, POt];
    ];
    Close[strm];

    (* 2nd pass to get byte offsets of each record written to file *)
    strm = OpenRead[fname];
    ByteIndx = {0};
    For[i = 1, i <= n, i++,
      PIn = Read[strm];
      AppendTo[ByteIndx, StreamPosition[strm]];
    ];
    Drop[ByteIndx, -1]

    (* Read records in reverse order *)
    For[i = n, i >= 1, i--,
      SetStreamPosition[strm, ByteIndx[[i]]];
      PIn = Read[strm];
      Print[PIn];

      (* Process PIn ... *)

    ];
    Close[strm]; 
```

如果可以消除第二遍（获取字节偏移量）会很好，但我还没有找到如何做到这一点......此外，这些字节偏移量可以写入文件（类似于记录的处理方式) 然后一次读回一个，如果仍然存在内存问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:49:17.130

为了给出答案，您的第二遍可以简洁地写成：

```
strm = OpenRead[fname];
ByteIndx=Reap[While[Sow[StreamPosition[strm]]; !TrueQ[Read[strm ] == EndOfFile]]][[2,1,;;-2]]
n=Length[ByteIndx] 
```

# ruby-on-rails - 建立用户注册页面

> ID：14856415
> 
> 赞同：0
> 
> 时间：2013-02-13T14:59:45.833
> 
> 标签：ruby-on-rails

我正在尝试设置用户注册。我被建议不要使用脚手架。

到目前为止，我已经运行此命令为所有配置文件信息生成模型：

```
rails generate model User name email birthday:date zip_code time_zone sexuality career education religion politics children height does_user_smoke does_user_drink about_me:text career 
```

我希望用户首次访问网站时所需的注册信息是姓名、电子邮件、生日、邮政编码和密码。我不确定下一步是什么。至于构建页面以让用户注册。我知道我必须编辑 app/views/users/new.html.erb。当我完成教程时，我运行了为我完成工作的脚手架，但现在有几个人告诉我不要使用脚手架，而要自己做所有事情。但是我没有阅读教程，也没有在互联网上找到任何可以引导我在 Rails 中构建用户注册页面的示例。

所以我不知道我是否应该重新使用脚手架，或者希望有人可以从用户注册页面开始为我指明正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:30:44.627

是的，有关于身份验证的教程。[我个人喜欢 Ryan Bates从头开始](http://railscasts.com/episodes/250-authentication-from-scratch)​​的截屏认证。该教程应该包括你需要的一切。

至于脚手架，我认为这真的取决于你在这里想要实现的目标。脚手架所做的只是为您在模型上创建基本的 CRUD（创建、读取、更新、删除）操作，包括控制器、视图和测试。例如，由于您需要这些视图，因此您可以使用它。预先编写的测试很棒。

但是，在这种情况下，我只会使用截屏视频而不使用脚手架。脚手架对于任何不需要像身份验证这样花哨的东西，而只需要基本的 CRUD 操作的模型都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:06:00.630

尝试分析您想要视图/控制器/模型还是全部。

由于这个问题是特定于用户注册的，所以您可能只需要用户注册视图和用户模型以及执行注册逻辑的控制器。

如果你想要一个完整的 MVC 功能，脚手架对于自动化你的任务很有用。

例如：

如果您使用控制器生成器，这将生成控制器操作和视图。

```
rails g controller controllername new create 
```

这将创建新的并使用其相关视图创建操作。

# c# - 继承 Windows 窗体的奇怪行为

> ID：14856421
> 
> 赞同：2
> 
> 时间：2013-02-13T15:00:00.483
> 
> 标签：c#, winforms, inheritance

在加载表单时，我需要进行`X`大量检查以确定是否打开或关闭表单。下面是一个简单的例子。

```
public partial class BaseForm : Form
{
  private void BaseForm_Load(object sender, EventArgs e)
  {
    if(!IsUserValid())
      MessageBox.Show("User is not valid");
  }
  private bool IsUserValid()
  {
    List<string> allowedUsernames = new List<string>();
    using (SqlConnection con = new SqlConnection(_connectionString))
    {
      //Get a list of usernames, none of which are "Developer" usernames
    }
    return allowedUsernames.Any(username => username == Environment.UserName);
  }
}
public partial class DerivedForm : BaseForm
{

} 
```

上面的示例，无论我的用户名如何，我都可以在设计器中完美加载表单。如果我做另一个表单，`DerivedForm`并继承基，那么它会调用`Load`，因此将显示一个`MessageBox`，然后`Close`在设计模式下显示一个表单，它不允许我访问设计器，为什么派生`WindowsForm`需要使用`Load`事件但基不需要? 如果您正在使用继承进行继承，`WindowsForms`那么不使用 Load 事件是否明智？

我只是觉得这很奇怪，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:32:01.270

还有另一个[问题](https://stackoverflow.com/questions/2427381/how-to-detect-that-c-sharp-winform-code-is-executed-within-visual-studio)解决了类似的问题。此外，接受的答案提供了克服这种行为的解决方案：[https](https://stackoverflow.com/a/2427420/674700) ://stackoverflow.com/a/2427420/674700 。

基本上，在您的情况下，添加`DesignTimeHelper`类并使用以下修改来查看差异：

```
private void BaseForm_Load(object sender, EventArgs e)
{
    if (!DesignTimeHelper.IsInDesignMode)
    {
        if (!IsUserValid())
        {
            MessageBox.Show("User is not valid");
        }
    }
    else
    {
        MessageBox.Show("Called from VS");
    }
} 
```

# c# - Tapi3 CallerIDNumber 返回 9900

> ID：14856422
> 
> 赞同：0
> 
> 时间：2013-02-13T15:00:00.080
> 
> 标签：c#, telephony, cisco, tapi

我正在为客户做一个简单的 CRM 呼叫程序，但我遇到了他们的电话系统问题。他们有一个具有内部路由的 Cisco IP 电话系统，当我执行以下代码时，我总是得到“9900”作为来电显示号码。有没有办法得到路由号码？我大多是 TAPI 新手，所以提前感谢您的帮助。

```
cn = tapi.RegisterCallNotifications(line, true, true, TAPI3Lib.TapiConstants.TAPIMEDIATYPE_AUDIO, 2);
if (cn.Call.CallState == TAPI3Lib.CALL_STATE.CS_OFFERING){
string c = cn.Call.get_CallInfoString(TAPI3Lib.CALLINFO_STRING.CIS_CALLERIDNUMBER);
} 
```

亚伦刹车

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:48:30.917

我不熟悉这个系统，它可能是一个很长的镜头，但您是否尝试过查看 ConnectedIdNumber（也在 CallInfo 结构中）。在接受呼叫之前，该值可能不会被填充（不等于被应答），但它是否确实显示了正确的呼叫线路标识符，它可能仍然是您的一些问题......祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T15:53:22.757

有点老问题，所以我希望你能找到答案，但只是为了后代，我对 UCCM 电话系统做了类似的工作，并发现系统使用 UCCX 进行呼叫队列/寻线管理时的一个关键限制。

使用 UCCX 时，线路的实际传入呼叫“驻留”在 UCCX 层为此目的设置的一组分机中的一个上。当呼叫然后被转发到呼叫中心代理的线路时，TAPI 客户端上监视该线路的软件可见的事件将获得 UCCX 用于将呼叫暂留为呼叫者 ID 的分机，而不是原始外部号码。我永远无法找到如何使用 TAPI 来获取原始呼叫背后的号码，但是 UCCX 会跟踪，因此我们最终的解决方案是简单地在 UCCX 中创建一个脚本，该脚本将使用正确的源号码来查询我们的数据库以获得更高级CID 信息（这是原始 TAPI 应用程序的要点，最初设计用于针对“普通”UCCM 800 块）。

# flash - 在您多次刷新之前，无法在 IE 或 Firefox 上加载 Flash swf（已中止）

> ID：14856425
> 
> 赞同：2
> 
> 时间：2013-02-13T15:00:07.020
> 
> 标签：flash, iis, jwplayer

在 IE / firefox 中嵌入以下内容：

```
<embed src="http://video.dmu.ac.uk/player51.swf" width="320"  height="260"  allowscriptaccess="always"  allowfullscreen="true"  flashvars="height=260&width=320&file=13610046_hi.mp4&streamer=rtmp://flash.dmu.ac.uk/media2/mp4:&searchbar=false&autostart=false&image=http://video.dmu.ac.uk/thumbnails/13610046.jpg"  /> 
```

在这里服务：

[http://www.streaming.co.uk/lee/legacy.htm](http://www.streaming.co.uk/lee/legacy.htm)

在 IE（例如 9）上，它大多数时候都无法加载（flash 似乎无法启动），直到您多次点击刷新。

执行此操作后，URL“ [http://video.dmu.ac.uk/player51.swf](http://video.dmu.ac.uk/player51.swf) ”中的直接引用无法加载（已中止），并显示在开发人员工具的结果列 - 网络中。

Firefox 在嵌入 html 检索时直接在调试网中显示“已中止”。

但是，一旦嵌入确实正确刷新，直接 url 似乎还可以。

另一台服务器正常。哪个指向问题服务器上的 IIS？

任何线索任何人？

# session - 使 Grails 中过滤器单元测试的会话无效

> ID：14856426
> 
> 赞同：1
> 
> 时间：2013-02-13T15:00:16.413
> 
> 标签：session, testing, grails, filter, invalidation

我想测试一个过滤器来验证会话是否有效，但我不知道该怎么做。

我的过滤器是这样的。

```
class SampleFilters {
  def filters = {
    sessionFilter(controller:'*', action:'*') {
        before = {
            if(request.getRequestedSessionId() != null && !request.isRequestedSessionIdValid()) {
                //doSomething
            }
        }
    }
  }
} 
```

我想为此过滤器创建一个单元测试。我想要的是在运行测试时它应该输入“if”子句来执行“doSomething”。目前，我有这样的事情。

```
import grails.test.mixin.*
import grails.test.mixin.web.FiltersUnitTestMixin;

import org.junit.*;

@TestMixin(FiltersUnitTestMixin)
class SessionFiltersTests {
  def controller

  @Test
  void testFilter() {
    controller = mockController(TestController)

    //I want to make sure when running the test it will enter the "if" clause

    withFilters(action: "testAction") { controller.testAction() }
    assert response.text
  } 
} 
```

我仍然是单元测试的新手，所以如果有人可以帮助我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:59:54.077

我找到了一种方法来做到这一点。我不知道这是否是最好的选择，但我已经没有想法了。这就是我离开它的方式：

```
import grails.test.mixin.*
import grails.test.mixin.web.FiltersUnitTestMixin;

import org.junit.*;

@TestMixin(FiltersUnitTestMixin)
class SessionFiltersTests {
  def controller

  @Test
  void testFilter() {
      controller = mockController(TestController)
      // Simulate session timeout
      controller.request.requestedSessionId = 1
      controller.request.requestedSessionIdValid = false
      withFilters(action: "test") { controller.test() }
      // Add your asserts
  }
} 
```

# session - 如何从外部 PHP 页面查看 drupal 7 会话？

> ID：14856427
> 
> 赞同：0
> 
> 时间：2013-02-13T15:00:17.090
> 
> 标签：session, drupal, drupal-7, drupal-modules, session-variables

我安装了 drupal 7，我需要在用户配置文件页面中包含一段 PHP 代码。

我创建了一个新块并将此代码放入其中：

```
"include (http://mysite/sites/all/themes/campi_aggiuntivi.php)" 
```

在“campi_aggiuntivi.php”中，我输入了以下代码：

```
session_start ();
print_r ($ _SESSION); 
```

但它返回一个空数组。

我如何与这个外部页面中的 drupal 会话进行交互？

非常感谢您的回答。

* * *

谢谢大家的答案。我正在尝试按照我的建议安装一个模块并将其插入到块平均中。

我创建了文件 test.info

```
name = Test Block
description = description Test Block
package = package Test Block
core = 7.x
dependencies[] = block

; Information added by drupal.org packaging script on 2013-02-01
version = "7.x-1.x-dev"
core = "7.x"
project = "Test Block"
datestamp = "1359680350" 
```

但我不知道我在文件 test.module 中放置了哪个函数，以插入测试模块管理屏幕块

你能帮我吗？再次感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:59:54.753

我要建议的第一件事是不要包括这样的：

```
"include (http://mysite/sites/all/themes/campi_aggiuntivi.php)" 
```

改用本地路径：`"include (sites/all/themes/campi_aggiuntivi.php)"`

但这取决于您从哪里调用，如果两个文件位于同一位置（在用户配置文件 tpl 文件中调用），那么这可能有效：`"include (campi_aggiuntivi.php)"`

我认为您需要会话详细信息来确定用户 ID，该信息可以从 $profile 变量或 arg(1) 中检索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:37:03.903

我认为您需要包括 Drupal Bootstrap 和其他一些必要的程序。这是指向可能有帮助[的问题的链接。](http://drupal.org/node/166409#comment-260846)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T22:55:51.523

根据您的更新..听起来您现在正在尝试以编程方式创建一个块。您可以在 Drupal.org上下载[示例模块](http://drupal.org/project/examples/)。该下载中有一个块模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:01:46.800

我没有测试您的代码，但您尝试做的方式不是扩展 Drupal 功能的传统方式。

我也希望 print_r ( **$ _SESSION** ); 实际上是 print_r ( **$_SESSION** ); 在您的代码中，即没有空格。

如果您想在用户个人资料页面中添加一个块，我建议您使用 drupal 方式。

Drupal 已经有一个以编程方式创建块的优秀示例。[这是链接](http://drupal.org/project/examples)。

看看里面的 block_example 模块。它将为您提供可用于创建块的相关示例代码。

该示例还包含有关如何使块默认显示在某些页面中的信息。

创建块后，将它们放置在您想要的区域中，例如在用户个人资料页面上启用的相关主题的左侧边栏、内容等。

在您的自定义模块中，您将访问 $_SESSION 变量。

从这里开始，您可以将 campi_aggiuntivi.php 中的代码包含在模块本身中。

或者使用以下万无一失的方法来加载文件。当您从主题中调用它时，这甚至会起作用。

假设您想使用位于自定义模块中的 custom_module_name.campi_aggiuntivi.inc，从主题中，您可以使用[module_load_include](http://api.drupal.org/api/drupal/includes!module.inc/function/module_load_include/7)

例如，

```
 module_load_include('inc', 'custom_module_name', 'custom_module_name.campi_aggiuntivi'); 
```

上述调用将从**custom_module_name**模块文件夹加载**custom_module_name.campi_aggiuntivi.inc 。**这样您就不必对访问文件所需的路径进行硬编码。

# css - CSS 标签样式 Vaadin

> ID：14856429
> 
> 赞同：3
> 
> 时间：2013-02-13T15:00:20.703
> 
> 标签：css, vaadin

我正在尝试在 Vaadin 中进行内联编辑。我认为实现这一点的好方法是设置文本字段的样式，使它们看起来像标签，并在聚焦时切换到文本字段的样式。

是否可以将文本字段设置为看起来像标签？如果可能的话，我怎么能做到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:37:20.600

您可以在自己的主题中覆盖 Vaadin 样式。如果您还没有主题，请在名为 VAADIN 的目录下创建一个目录，`themes`并以您的主题名称在主题中创建一个子目录，例如。主题。

**瓦丁 6：**

1.  调用`setTheme("mytheme")`你的应用程序类
2.  调用`myTextField.setStyleName("labelstyle");`你的代码
3.  在新的主题目录中创建 styles.css。
4.  在styles.css 中添加以下内容：

样式.css：

```
 @import "../reindeer/styles.css";

 .v-textfield-labelstyle {
     background: none repeat scroll 0 0 #F5F5F5;
     border-color: #F5F5F5;
     border-image: none;
     border-left: 1px solid #F5F5F5;
     border-radius: 3px 3px 3px 3px;
     border-right: 1px solid #F5F5F5;
     border-style: solid;
     border-width: 1px;
 } 
```

**瓦丁 7：**

1.  在您的 UI 类中添加`@Theme("mytheme")`注释
2.  调用`myTextField.setStyleName("labelstyle");`你的代码
3.  创建样式。**scss**在您的新主题目录中。
4.  在样式中添加以下内容。**scss**

样式.css：

```
 @import "../reindeer/reindeer.scss";

 .mytheme {
    @include reindeer;

    .v-textfield-labelstyle {
        background: none repeat scroll 0 0 #F5F5F5;
        border-color: #F5F5F5;
        border-image: none;
        border-left: 1px solid #F5F5F5;
        border-radius: 3px 3px 3px 3px;
        border-right: 1px solid #F5F5F5;
        border-style: solid;
        border-width: 1px;
    }
} 
```

1.  通过调用`java -cp '../../../WEB-INF/lib/*' com.vaadin.sass.SassCompiler styles.scss styles.css`你的主题目录来编译你的主题

这个小技巧将为您提供一个类似标签的 TextField，当聚焦时它会变成一个普通的 TextField。

请注意，这仅在使用 Reindeer 主题和默认背景颜色 #F5F5F5 时有效。如果您使用其他主题或背景颜色与原始颜色不同，则必须对其进行一些调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:33:08.677

文本字段由以下 HTML 表示：

```
<input type="text" class="v-textfield v-widget" tabindex="0" style=""> 
```

应用这个怎么样：[如何删除文本/输入框周围的边框（轮廓）？(Chrome)](https://stackoverflow.com/questions/3397113/how-to-remove-border-outline-around-text-input-boxes-chrome)在“v-textfield v-widget”CSS 上？

# haskell - Haskell 中数据类型的别名

> ID：14856433
> 
> 赞同：1
> 
> 时间：2013-02-13T15:00:38.330
> 
> 标签：haskell, types

所以我有一个这样的结构：

```
data Maybe a = Nothing | Just a 
```

但我想要一个定义为的结构

```
data MaybeInt = Nothing | Just Int 
```

有没有办法定义`MaybeInt`using `Maybe a`，如果是这样，如何定义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T16:07:51.170

有几种方法可以定义`MaybeInt`. 我会陈述他们然后有一些评论。

*直接的*

```
data MaybeInt = NothingInt | JustInt Int 
```

*新型*

```
newtype MaybeInt = MI (Maybe Int) 
```

*类型同义词*

```
type MaybeInt = Maybe Int 
```

*清楚的*

```
-- just use `(Maybe Int)` wherever you would write `MaybeInt` 
```

**评论**

最常见的是，人们会使用*简单*的方法，因为大多数人都熟悉`Maybe`并知道如何使用`Just`和`Nothing`匹配它。这使它对图书馆有好处——非常透明。*类型同义词*方法是一种常见的文档方法，但对于您的同义词基本上没用。它使得它`foo :: Int -> Maybe Int`具有`bar :: Int -> MaybeInt`相同的类型签名。这也意味着一旦有人知道`MaybeInt === Maybe Int`他们可以使用`Just`/`Nothing`构造函数进行匹配。

newtype方法*变得*相当有趣。每次要使用*type*时，您都必须在此处开始“包装”和“展开”`MI` *构造函数*。比较：`MaybeInt`

 *```
baz :: MaybeInt -> Bool
baz (MI Nothing) = False
baz (MI (Just int)) = True 
```

这很好，因为如果您不*导出* `MI`，那么没有人将能够匹配`MaybeInt`（尽管对其中发生的事情有很好的猜测）。这对于制作稳定的 API 非常有用。的另一个有趣的属性`newtype`是你可以编写不同于's 内置的new`instance`的 s 。例如，您可以覆盖实例`MaybeInt``Maybe``Monoid`

```
instance Monoid MaybeInt where
  mempty = MI Nothing
  mi `mappend` (MI Nothing) = mi
  _  `mappend` mi           = mi 
```

这与包含s 的`Last a`内置 newtype相同。`Data.Monoid``Maybe a`

最后，我们得到了完整的`data`实例。它更冗长、更容易出错、速度稍慢（因为编译器必须跟踪新的、唯一的数据类型），并且需要人们学习新的构造函数。对于如此明显相同`Maybe Int`的功能，根本没有理由使用它。*

# dojo - 使用 dojo 1.8 自定义滚动条有哪些选项？

> ID：14856436
> 
> 赞同：2
> 
> 时间：2013-02-13T15:00:45.357
> 
> 标签：dojo

我目前正在开发一个dojo 应用程序，但需要对滚动条进行一些自定义。基本上任何模仿多个基于 jQuery 的自定义滚动条插件中的任何一个的东西都应该足够了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:30:40.760

似乎还没有模仿 jquery 滚动条插件的东西，但是您可以使用 css 自定义它们的外观！

卢西安

资源：

[http://dojo-toolkit.33424.n3.nabble.com/Custom-Scrollbars-tp2776041.html](http://dojo-toolkit.33424.n3.nabble.com/Custom-Scrollbars-tp2776041.html)

# objective-c - 需要帮助理解方法和异常 [objectiveC]

> ID：14856437
> 
> 赞同：0
> 
> 时间：2013-02-13T15:00:50.563
> 
> 标签：objective-c

我对老师给出的一个练习题有疑问。我什至不明白这个问题在问什么，所以任何帮助将不胜感激。

“要练习方法和类，编写一个带有引发异常的方法的类。为调用前一个方法的类编写另一个方法，捕获并处理异常。使用 main 函数测试您的代码。”

我唯一了解的是使用主要功能对其进行测试。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:06:21.043

您正在寻找的是一个包含 try/catch 语句的方法

```
@try {
    //do something
}
@catch (NSException *exception){
   //do something if the code in the try failed

   //OR
   @throw exception; //this will make the method called "above" this method handle the exception (eg a method calling another method, that fails, passes the exception back to the top level one)
} 
```

# sql - SYSDATETIME() 是否比 GETDATE() 花费更多？

> ID：14856438
> 
> 赞同：5
> 
> 时间：2013-02-13T15:00:52.573
> 
> 标签：sql, sql-server, tsql, datetime, sysdatetime

有什么理由我应该每次都停止使用 SYSDATETIME() 而不是 GETDATE() ？

他们不是都问 cpu 现在是什么时间，还是 sysdatetime 需要更多指令来计算分数？Getdate 是否可以四舍五入？sysdatetime 可以更快，因为它不能进行舍入吗？

如果我不存储纳秒，我显然不会使用 sysdatetime，但我问的是存储大小以外的成本。（我正在开发的当前应用程序每秒运行 sysdatetime() 至少 280 次）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T15:17:38.223

```
SELECT SYSDATETIME();
GO
DECLARE @d DATETIME2(7) = SYSDATETIME();
GO 10000
SELECT SYSDATETIME();
GO
DECLARE @d DATETIME = SYSDATETIME();
GO 10000
SELECT SYSDATETIME();
GO
DECLARE @d DATETIME2(7) = GETDATE();
GO 10000
SELECT SYSDATETIME();
GO
DECLARE @d DATETIME = GETDATE();
GO 10000
SELECT SYSDATETIME(); 
```

结果：

*   将 SYSDATETIME 分配给 DATETIME2(7)：3.4 秒
*   将 SYSDATETIME 分配给 DATETIME：3.3 秒
*   将 GETDATE 分配给 DATETIME2(7)：3.4 秒
*   将 GETDATE 分配给 DATETIME：3.3 秒

所以这似乎无关紧要。重要的是您将其分配给哪种类型的变量，即使这样也不是很多。10000/0.1 秒意味着增量非常非常小，不足以担心。在这种情况下，我宁愿保持一致。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T15:14:59.117

在一些设计极差的测试中，在我的机器上看起来`SYSDATETIME()` *可能*更快：

```
select sysdatetime()
go
declare @Dt datetime
select @dt = sysdatetime()
select @dt = DATEADD(day,1,@dt)
go 15000
select sysdatetime()
go
declare @Dt datetime
select @dt = GETDATE()
select @dt = DATEADD(day,1,@dt)
go 15000
select sysdatetime()
go 
```

在我的机器上，这往往会在前两个结果集之间产生约 1 秒的差距，在第二和第三个结果集之间产生约 2 秒的差距。颠倒两个测试的顺序可以颠倒差距。

# c - gdb 核心文件：交叉编译时查找共享库源路径

> ID：14856439
> 
> 赞同：0
> 
> 时间：2013-02-13T15:00:52.700
> 
> 标签：c, gdb, cross-compiling, gdbserver

我在交叉编译环境中使用 gdb，在其中为目标架构构建了一个 linux 树，包括许多共享库。

**问题：**当我分析核心转储时，gdb 找到了我的 .so 文件及其符号的路径，但没有找到它们的源文件。

**主机设置：**

`tree/`<-- 构建根目录

`tree/apps/myapp/myapp`<--我的崩溃应用

`tree/libs/mysharedlib/`<-- 共享库是从这样的路径构建的，并安装在 target/

`tree/target/` <-- 目标构建根

`tree/target/usr/bin/`<-- 我崩溃的二进制文件放在这里

`tree/target/lib`<-- 一些 .so:s

`tree/target/usr/lib`<-- 还有一些 .so:s

**示例输出：**

```
...
#9 0x2b038cfc in start_thread (arg=0x32dff4d0) at pthread_create.c:302
302 pthread_create.c: No such file or directory.
in pthread_create.c
... 
```

gdb 如何知道默认在哪里搜索源文件？

我知道可以在 gdb 中使用 'directory' 命令手动指定源目录，并且它可以工作，但我不想对每个共享库都这样做。我想设置构建我所有东西的根。**当我**使用 gdbserver 进行实时调试时，gdb 会自动查找所有共享库的源，因此我希望核心文件具有相同的行为。

是只有在二进制文件的调试信息中指定的 .c 文件名还是它们也有路径？相对还是绝对？

# c# - 在 C# 中检测 Arduino 端口

> ID：14856440
> 
> 赞同：2
> 
> 时间：2013-02-13T15:00:56.740
> 
> 标签：c#, visual-studio-2010, serial-port, usb, arduino

我正在尝试打开每个端口并`<mccon>`串行发送，我的微控制器将对此做出响应`<connected>\n`，之后 C# 代码必须退出 for each 循环。

我的`serialPort.PortName = str;`线路有问题。两次迭代后，它不再继续。

我也尝试过手动执行此操作。我做了一个下拉菜单并一一选择了端口。在第二个端口之后，不允许更改串行端口。但如果我在两次尝试中选择，它工作正常。

我知道 C++ 中的 OOP。但我是 C# 新手。我不确定为什么循环失败。

```
public Form1()
{
    InitializeComponent();
    send_button.Enabled = false;

    //Availabe COM ports
    SerialPort tmp;
    foreach(string str in SerialPort.GetPortNames())
    {
        tmp = new SerialPort(str);
        if (tmp.IsOpen == false)
        {
            serialPort.PortName = str;

            try
            {
                //Open serial port
                serialPort.Open();
                serialPort.BaudRate = 9600;
                serialPort.WriteTimeout = 10;
                serialPort.ReadTimeout = 10;
                serialPort.Write("<mccon>");
                readtxt.Text = serialPort.ReadTo("\n");
                if (readtxt.Text == "<connected>")
                {
                    send_button.Enabled = true;
                    port_combobox.Enabled = false;
                    break;
                }
                else
                {
                    serialPort.Close();
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:30:26.480

我没有多个串口，但是当我编译并执行你的代码时，我注意到如果在读取过程中出错，你并没有关闭串口。我建议你修改你的代码如下：

```
 SerialPort tmp;
        foreach (string str in SerialPort.GetPortNames())
        {
            tmp = new SerialPort(str);
            if (tmp.IsOpen == false)
            {

                serialPort.PortName = str;

                try
                {
                    //open serial port
                    serialPort.Open();
                    serialPort.BaudRate = 9600;
                    serialPort.WriteTimeout = 10;
                    serialPort.ReadTimeout = 10;
                    serialPort.Write("<mccon>");
                    String s = serialPort.ReadTo("\n");
                    if (s == "<connected>")
                    {
                        break;
                    }
                    else
                    {
                        serialPort.Close();
                    }
                }
                catch (TimeoutException)
                {
                    serialPort.Close();
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message, "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
            }
        } 
```

I'm not sure the effect on changing the port name while it's open, but it could well cause the issues you are seeing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:36:21.437

Could you execute this code and return what it shows? It might show some information about the Arduino port which you can then use for the serialport.

Add a reference to `System.Management` and also add the using, and then try the code:

```
using System.Management;

try
{
    ManagementObjectSearcher searcher =
        new ManagementObjectSearcher("root\\CIMV2",
                                     "SELECT * FROM Win32_PnPEntity");

    foreach (ManagementObject queryObj in searcher.Get())
    {
        if (queryObj["Caption"].ToString().ToUpper().Contains("ARDUINO"))
        {
            Console.WriteLine(queryObj["Caption"]);
            foreach (PropertyData pd in queryObj.Properties) { Console.WriteLine(pd.Name + " : " + pd.Value); }
        }
    }
}
catch (ManagementException e)
{
    Console.WriteLine(e.Message);
}
Console.ReadKey(); 
```

# corba - 使用 Corba string_dup 与使用指向 const 的指针

> ID：14856441
> 
> 赞同：2
> 
> 时间：2013-02-13T15:01:00.740
> 
> 标签：corba

有什么不明白的，请赐教。

以下（客户端代码）之间有区别吗？1) blah = (const char *)"dummy"; 2) 等等 = CORBA::string_dup("dummy");

...只是谷歌搜索了一下我看到 string_dup() 返回一个 char * 所以 2 可能是等价的。我在想 2) 做 2 个深拷贝而不是 1 个。

无论如何，我现在要提出这个问题，请简要确认。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T13:55:05.353

```
const char* blah = "dummy"; 
```

C++ 编译器在可执行文件的数据部分的某处生成一个以空字符结尾的常量字符数组。`blah`得到一个指向它的指针。

```
char* blah = CORBA::string_dup("dummy"); 
```

该函数`string_dup()`使用一个参数调用，该参数是一个指向该常量字符数组的指针。`string_dup()`然后从空闲存储中分配内存并将字符串数据复制到空闲存储分配的内存中。指向自由存储内存的指针返回给调用者。完成后处理内存是调用者的工作`CORBA::string_free()`。从技术上讲，ORB 实现允许使用一些特殊的免费存储，但很可能它只是使用您的应用程序的其余部分正在使用的标准堆/免费存储。

这样做通常要好得多：

```
CORBA::String_var s = CORBA::string_dup("dummy"); 
```

的析构函数会在超出范围时`String_var`自动调用。`string_free()``s`

# titanium-mobile - 将事件侦听器添加到 webview 中加载的链接？（钛移动）

> ID：14856448
> 
> 赞同：0
> 
> 时间：2013-02-13T15:01:13.860
> 
> 标签：titanium-mobile

我正在开发一个使用钛的示例应用程序。我创建了一个 webview 并加载了一个本地 html，如下所示

```
var webview = Ti.UI.createWebView({ borderWidth:0, paddingRight:10,width:310,top:25, height:210,left:5 });
webview.html = '<div><a href="http://google.com" id="ggle"></a></div>' 
```

我可以为 html 中指定的锚标记添加事件侦听器吗？如果是这样怎么办？如果没有，请建议我任何其他可能的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:28:18.947

是的，您可以像这样添加自定义事件：

```
<div><a href="http://google.com" id="ggle" onclick="Ti.App.fireEvent('openLink', {linkUrl: 'http://google.com'});"></a></div> 
```

并在 app.js 文件中监听事件：

```
Ti.App.addEventListener('openLink', function(e){
    Ti.Platform.openURL(e.linkUrl);
}); 
```

[WebViews 和 Titanium 之间的通信](https://wiki.appcelerator.org/display/guides/Communication+Between+WebViews+and+Titanium)的完整细节

# c# - Modal Popup Extender 中的 Gridview - 回发问题？

> ID：14856451
> 
> 赞同：0
> 
> 时间：2013-02-13T15:01:26.893
> 
> 标签：c#, asp.net, html, ajax

我在 Ajax 模态弹出窗口 (VS2008) 中有一个带有 gridview 的 C# .Net 应用程序。我将网格视图设置为在启用分页的情况下每页返回 10 条记录。

当用户单击以更改网格视图中的页面时，会有一个回发关闭模式窗口，然后使用 ModalPopup.show() 再次打开它；

有什么方法可以避免整个页面的回发，而只是回发gridview，同时保持模式窗口处于活动状态？此刻整个页面的回传给人一种闪烁的感觉……

```
<asp:Panel ID="Panel1" runat="server" Font-Italic="True" 
     Font-Names="Times New Roman" Font-Size="Small" ForeColor="#82B8DE">        

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
        CellPadding="4" ForeColor="#333333" GridLines="None" 
        onpageindexchanging="GridView1_PageIndexChanging" 
        onrowdatabound="GridView1_RowDataBound" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" 
        SelectedIndex="0" ShowHeader="False" Width="700px" ControlID="GridView1" 
        EventName="PageIndexChanging" Font-Italic="True" Font-Names="Times New Roman" 
        Font-Size="Medium">
         <PagerSettings PageButtonCount="12" />
         <RowStyle CssClass="RowStyle" BackColor="#EFF3FB" Font-Italic="True" 
             Font-Names="Times New Roman" Font-Size="Small" ForeColor="#82B8DE" /> 
        <Columns>
            <asp:BoundField DataField="Address" ReadOnly="True">
            <ItemStyle Width="385px" />
            </asp:BoundField>
            <asp:BoundField DataField="XCoord" ReadOnly="True" ShowHeader="False" >
            <ItemStyle CssClass="Hidden" />
            </asp:BoundField>
            <asp:BoundField DataField="YCoord" ReadOnly="True" ShowHeader="False" >
            <ItemStyle CssClass="Hidden" />
            </asp:BoundField>
        </Columns>
        <FooterStyle CssClass="FooterStyle" BackColor="#507CD1" Font-Bold="True" 
            ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle CssClass="SelectedRowStyle" BackColor="#D1DDF1" 
            Font-Bold="True" ForeColor="#333333" />
        <HeaderStyle CssClass="HeaderStyle" BackColor="#507CD1" Font-Bold="True" 
            ForeColor="White" />

        <EditRowStyle BackColor="#2461BF" Font-Italic="True" 
             Font-Names="Times New Roman" Font-Size="Medium" />
        <AlternatingRowStyle BackColor="White" />

    </asp:GridView>

</asp:Panel>

<ajax:ModalPopupExtender ID="ModalPopupExtender1" runat="server" PopupControlID="Panel1" TargetControlID="dummy" 
BackgroundCssClass="ModalBackgroundGrid" BehaviorID="ModalGrid">
</ajax:ModalPopupExtender> 
```

还有后面的代码...

```
public void Page_Load(object sender, EventArgs e)
{

    try
    {
        if (!(Page.IsPostBack))
        {
            GridView1.EnableViewState = true;
            GridView1.AllowPaging = true;
            GridView1.PageSize = 10;
            GridView1.PagerSettings.Mode = PagerButtons.Numeric;
            GridView1.Visible = true;             

        }

        if (!m_bDisclaimerShown)
        {
            m_bDisclaimerShown = true;
            mpe1.Show();
            TabContainer.Visible = true;
            ScaleBar1.Visible = true;

        }
    }
    catch (Exception ex)
    {
        ShowMsg("Error - " + ex.Message);
    }

}

protected void btnHide_Click(object sender, EventArgs e)
{
    mpe1.Hide();
    TabContainer.Visible = true;
    ScaleBar1.Visible = true;

}

protected void cmdZoomAddress_Click(object sender, EventArgs e)
{
    try
    {

        if (txtPostCode.Text.Length >= 7 && OpenDB())
        {
            string strPostcode = txtPostCode.Text;
            strPostcode = strPostcode.Substring(0, 4) + strPostcode.Substring(strPostcode.Length - 3, 3);

            SqlCommand sqlCmd = new SqlCommand();
            sqlCmd.Connection = m_sqlConn;
            sqlCmd.CommandType = System.Data.CommandType.StoredProcedure;
            sqlCmd.CommandText = "sde.dbo.sp_selAddressByPostcode";
            sqlCmd.Parameters.Add("@Postcode", SqlDbType.VarChar);
            sqlCmd.Parameters["@Postcode"].Value = strPostcode;

            SqlDataAdapter sqlAdapter = new SqlDataAdapter(sqlCmd);
            m_sqlDataTable = new DataTable();
            sqlAdapter.Fill(m_sqlDataTable);

            GridView1.DataSource = m_sqlDataTable;
            GridView1.DataBind();
            GridView1.Visible = true;

            ModalPopupExtender1.Show();

        }

        else
        {
            ShowMsg("Error - No Postal Addresses Returned");
        }
    }
    catch (Exception ex)
    {
        ShowMsg("Error - " + ex.Message);
    }
    finally
    {
        CloseDB();
    }

}

protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    if (sender != null)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridView1.DataSource = m_sqlDataTable;
        GridView1.DataBind();
        ModalPopupExtender1.Show();

    }
}

protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow GVRow = GridView1.SelectedRow;
    int iX = (int)Convert.ToSingle(GVRow.Cells[1].Text);
    int iY = (int)Convert.ToSingle(GVRow.Cells[2].Text);
    GridView1.Visible = false;

    MoveMap(iX, iY);
}

public void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.DataItemIndex >= 0)
    {
        e.Row.Attributes["style"] = "cursor:pointer";
        e.Row.Attributes.Add("onMouseOver", "this.style.cursor='hand';");
        e.Row.Attributes.Add("onclick", ClientScript.GetPostBackEventReference(GridView1, "Select$" + e.Row.RowIndex.ToString()));
    }

}

protected override void Render(HtmlTextWriter writer)
{

    foreach (GridViewRow r in GridView1.Rows)
    {
        if (r.RowType == DataControlRowType.DataRow)
        {
            Page.ClientScript.RegisterForEventValidation(GridView1.UniqueID, "Select$" + r.RowIndex);
        }
    }

    base.Render(writer);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:15:19.143

谢谢你的建议。我已将gridview放入...

```
<asp:UpdatePanel>
<ContentTemplate> 
```

模态现在仍然存在，但是当我单击网格视图中的记录时，它不会关闭！

# c# - 具有许多方法或具有外键的实体的存储库

> ID：14856452
> 
> 赞同：0
> 
> 时间：2013-02-13T15:01:28.127
> 
> 标签：c#, entity-framework, entity-relationship

我有一个包含客户、供应商和服务的数据库（这很简单，我真的有大约 100 个表）

我正在开发一个新的实体框架库来访问这些表。

> 一个客户有很多供应商
> 
> 供应商有许多服务

我正在尝试决定采用哪种方法-

**A）** 使用映射将客户连接到供应商，将供应商连接到服务，然后每次加载客户时，我都会获取他的所有供应商及其服务（以及加载的其他表）

**B )** 实体之间没有映射，但在相关存储库中提供方法；例如，在供应商存储库中，我将拥有`IEnumerable<Supplier> GetSupplierByCustomerID(int customerID)`

**编辑** *根据建议在上面更改为 IEnumerable。*

这是使用 EF 时的两种主要方法吗？从您的角度来看，哪个被认为更好。

还有另一种我不考虑的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:11:28.943

我会亲自公开许多简单的方法。

> 使用映射将客户连接到供应商并将供应商连接到服务，然后每次加载客户时，我都会获取他的所有供应商及其服务（以及加载的其他表）

如果您只需要`Name`从其获取客户的`ID`，那么上述解决方案将要求您加载无用且繁重的对象图，除非您使用延迟加载，但由于您可能有一些序列化过程（3 层架构？），它是对您来说是个问题，因为在这种情况下您不能使用延迟加载。

因此，您可以公开例如：

```
Supplier GetSupplierByID(int supplierID)
IEnumerable<Supplier> GetSuppliersByCustomerID(int customerID)
... 
```

我也建议不要暴露`IQueryable`。如果可能，请`IEnumerable`改用。有关在所有含义都不为人知时使用的危险的更多详细信息，请参阅[本文。](http://www.weirdlover.com/2010/05/11/iqueryable-can-kill-your-dog-steal-your-wife-kill-your-will-to-live-etc/)`IQueryable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:08:30.490

一般来说，我觉得在 EF 上放置一个存储库总是一个好主意。您可以从客户端逻辑（甚至业务逻辑）中抽象出数据库逻辑。而且您提到的特定情况还可以带来另一个好处：只有在您特别需要时才能获得所需的信息（`GetSupplierByCustomerID`例如您提到的示例。

您可能会考虑的另一种方法是我在回答[这个问题](https://stackoverflow.com/questions/14780776/unitofwork-and-entity-framework-contexts/14780847#14780847)时提到的方法：Bounded Contexts。您在应用程序中的关注点分离得越多，从长远来看，它对您和您的其他程序员（尤其是当您想要对它进行单元测试时）会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:29:30.227

这只是我的意见，我不知道这是否适合您的情况，因为这取决于您的业务需求，但我通常更喜欢第三种选择。

1.  所有存储库都返回`IEnumerable`s，而不是`IQueryable`s：这使得所有数据库操作都可以在运行任何业务逻辑之前完成。
2.  所有存储库都公开了带有可选参数的方法，可以声明包含的导航属性：这可以调用具有所需导航实体的存储库方法。
3.  创建一个基本通用存储库并在您的每个存储库中继承它。
4.  实施工作单元模式以共享上下文并启用事务。

来自基本存储库的示例方法签名（`T`是实体的类型）：

```
 IEnumerable<T> Find(Expression<Func<T, bool>> criteria, params Expression<Func<T, object>>[] navigationList) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T16:04:16.900

当它要映射或不映射时，我会选择 A。导航属性（如`Customer.Supplier`）有很多优点，并且有很多方法可以控制延迟/急切加载。

导航属性的优点是 linq 查询更容易编写。你几乎不需要写一个连接：

加入：

```
from supp in db.Supliers
join serv in db.Services on supp.SupplierId equals serv.SupplierId
select ... 
```

带导航属性

```
from supp in db.Supliers
from serv in supp.Services
select ... 
```

或者是这样的：

```
from supp in db.Supliers
select new { supp.Name, ServicesCount = supp.Services.Count() } 
```

EF 将弄清楚如何在 SQL 中进行连接。

拥有导航属性并不意味着它们总是被加载。要发生延迟加载，必须满足两个条件

1.  该属性必须定义为`virtual`使 EF 能够在代理类型中覆盖它，并通过连线来执行延迟加载。
2.  上下文必须启用延迟加载。它们是默认设置，但您可以通过设置为每个实例关闭它`context.Configuration.LazyLoadingEnabled = false`。

所以这也展示了两种控制延迟加载的方法：您可以在结构上或临时启用/禁用它。

除此之外，您可以通过两种方式控制相反的急切加载：

1.  使用[`Include`](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)语句：

    ```
    db.Suppliers.Include(s => s.Services) 
    ```

2.  在投影中包括导航属性：

    ```
    from supp in db.Supliers
    from serv in supp.Services
    select new { supp.Name, serv.ServiceName } 
    ```

（还有更多方法，但这些是最重要的）

这适用于在您的服务或存储库中编写 linq 查询。正如其他人所说：不要`IQueryable`向您的服务/存储库方法的消费者公开。

最后一个重要的注意事项：延迟加载只能在生命上下文的范围内进行。如果释放了上下文并且处理了延迟加载导航属性，则会引发异常。同时建议使用生命周期较短的上下文实例。所以存在两难境地：公开实体对象或仅公开 DTO 或视图模型或类似的东西。当您公开启用延迟加载的实体对象时，消费者可能会无意中处理尚未加载的导航属性，并且上下文已消失。

# javascript - and javascript: can I force audio files to be redownloaded each time they're used?

> ID：14856454
> 
> 赞同：1
> 
> 时间：2013-02-13T15:01:34.530
> 
> 标签：javascript, html, caching, audio

我正在开发一个音频验证系统。我的问题是，当包含用户必须输入的数字的音频文件在服务器上更新时，浏览器不会刷新它。相反，它会播放旧的无效音频，直到浏览器关闭。如何让元素在每次调用加载和播放时重新缓冲音频而不是播放存储的版本？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:05:48.157

浏览器通常喜欢缓存它们以完全相同的文件名发送的元素。通常，在 javascript 中避免这种情况的最佳方法是添加一个函数，该函数将一些无用的随机字符串添加到资源中。例如`audioNotToBeCached.snd?1421124sjam2`

问号后面的随机字符串被忽略，浏览器不能再根据文件名缓存。

[这里](https://stackoverflow.com/questions/1349404/generate-a-string-of-5-random-characters-in-javascript)有很多选择。

# javascript - 在返回 this.each jquery 插件之前，我的代码正在消失

> ID：14856455
> 
> 赞同：0
> 
> 时间：2013-02-13T15:01:45.430
> 
> 标签：javascript, jquery, ajax

```
( function( $ ) {              
    jQuery.support.cors = true;

    function CleanQueryString( query )
    {
        return encodeURI( query ); 
    };

    $.fn.GoogleSearchResult = function( options ) {  

        var settings = $.extend( {
            query: null,
            googleApiKey: "something",
            googleUrl: "https://www.googleapis.com/shopping/search/v1/public/",
            concatUrl: "",
            country: "UK",
            cleanQuery: ""
        }, options); 

        alert("im here"); // THIS ALERTS

        return this.each( function() {
            alert("q:" +settings.query); // THIS DOES NOT?  
            if( settings.query )
            {                                 
                alert(":" + settings.query);
                settings.cleanQuery = CleanQueryString( settings.query );
                $.ajax({       
                    dataType: "json", 
                    async: false,  
                    url: settings.googleUrl,       
                    data: {
                        key: settings.googleApiKey,
                        country: settings.country,
                        q: settings.cleanQuery,
                        alt: 'json'
                    },      
                    success: function( data ) {    
                        alert( data );
                        return data;           
                    },
                    error: function(xhr, status, error) { 
                        alert("error " + status + " " + error); 
                    }   
                });
            }  
        } );     
    };  
} )( jQuery ); 
```

在返回 this.each jquery 插件之前，我的代码已经失效了，有什么想法吗？

我打电话给它：

```
$.fn.GoogleSearchResult( { 
     query: "the apple ipad"
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:05:20.997

该`.each()`函数迭代作为它的上下文的 jQuery 对象的内容。在您的情况下，您根本没有上下文对象，因此`.each()`什么也不做。

鉴于您的函数的性质，我不明白为什么将它作为一个 jQuery 函数是有意义的。我猜你可以把它直接挂在`$`物体上，如果你这样做，那么你根本不需要`.each()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:08:18.613

这就是你所说的方式。您需要在选择器而不是 fn 上调用它。

# cordova - 在 Google Nexus 上使用 PhoneGap + Bootstrap 的更大应用

> ID：14856463
> 
> 赞同：0
> 
> 时间：2013-02-13T15:02:07.393
> 
> 标签：cordova, twitter-bootstrap, usability, galaxy-nexus

谷歌 Nexus 手机提供了巨大的（对我而言）屏幕分辨率，而我所有的移动应用程序构建的 PhoneGap 看起来都很小。例如，在台式计算机上测试应用程序时，一切正常，但在将其编译并安装到 Google Nexus 手机上后，按钮变得很小，文本几乎无法阅读。

我正在使用 Twitter Bootstrap，但我担心我会在这款手机上的任何其他框架上得到类似的结果。

移动版网页在 Mobile Chrome 中显示时，可以轻松适应并可以在台式计算机或任何其他设备上使用。只有PhoneGap 的应用程序看起来那么小。

这个问题有什么简单的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:05:21.753

默认情况下，Bootstrap 不支持[响应式布局](http://twitter.github.com/bootstrap/scaffolding.html#responsive)。它的解释非常专业：“*默认情况下，Bootstrap 不包含响应式功能，因为并非所有内容都需要响应式。与其鼓励开发人员删除此功能，我们认为最好根据需要启用它*”。

在部分中更改一个`meta`标签并将引用从普通 CSS 替换为响应式标签`<head>`确实解决了相关问题：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

在这个简单的更改之后，PhoneGap 应用程序正确地适应大屏幕尺寸和密度，并以正确的尺寸显示 Bootstrap 元素。

# delphi - 如何将表格变成形状位图或gif？

> ID：14856467
> 
> 赞同：2
> 
> 时间：2013-02-13T15:02:21.557
> 
> 标签：delphi, delphi-7, vcl

有没有像 TAdvShaper ( [http://www.tmssoftware.com/site/advshape.asp](http://www.tmssoftware.com/site/advshape.asp) ) 这样的免费组件/功能？

# ruby - https://github.com/twilio/hurl 和 Heroku

> ID：14856468
> 
> 赞同：0
> 
> 时间：2013-02-13T15:02:24.640
> 
> 标签：ruby, postgresql, heroku, github, rack

[https://github.com/twilio/hurl](https://github.com/twilio/hurl)

我无法通过自述文件中的步骤在 Heroku 上运行服务器。

我做的步骤：

```
git clone git://github.com/twilio/hurl
cd hurl
gem install bundler
bundle install
heroku create
git push heroku master
heroku open 
```

使用`heroku logs`我看到连接到的错误`PG`

```
"/app/app/models/db.rb:16:in `initialize': could not connect to server: Connection refused (PG::Error)" 
```

请帮助我做错了什么..

**更新：**

```
file:`db.rb`
    15      class PostgresDB < AbstractDB
    16        CONN = PG::Connection::new(
    17         ENV.fetch("POSTGRES_HOST", "localhost"),
    18          ENV.fetch("POSTGRES_PORT", 5432), 
    19          :dbname => ENV.fetch("POSTGRES_DATABASE", "hurls"),
    20          :user => ENV.fetch("POSTGRES_USER", "postgres"),
    21          :password => ENV.fetch("POSTGRES_PASSWORD", "postgres")
    22        ) 
```

从 postgresql 的配置 heroku 插件服务器更改了详细信息并收到此错误：

```
Starting process with command `bundle exec rackup config.ru -p 16112`
2013-02-14T07:55:41+00:00 app[web.1]: LINE 1: INSERT INTO hurls VALUES ($1::varchar, $2::bytea)
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1137:in `new'
2013-02-14T07:55:41+00:00 app[web.1]: /app/app/models/db.rb:39:in `exec': ERROR:  relation "hurls" does not exist (PG::Error)
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/app/app.rb:35:in `initialize'
2013-02-14T07:55:41+00:00 app[web.1]:   from config.ru:1:in `new'
2013-02-14T07:55:41+00:00 app[web.1]:                     ^
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.1.0/lib/sinatra/base.rb:1137:in `new'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/bin/rackup:4:in `<top (required)>'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/app/helpers.rb:69:in `each'
2013-02-14T07:55:41+00:00 app[web.1]:   from config.ru:13:in `block in <main>'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:162:in `app'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `load'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:248:in `wrapped_app'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `<main>'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:46:in `instance_eval'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:100:in `start'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/app/helpers.rb:70:in `block in setup_default_hurls'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/app/helpers.rb:69:in `setup_default_hurls'
2013-02-14T07:55:41+00:00 app[web.1]:   from config.ru:1:in `<main>'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/app/app.rb:245:in `save_hurl'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:46:in `initialize'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:35:in `eval'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/app/models/db.rb:39:in `save'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:35:in `parse_file'
2013-02-14T07:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:213:in `start'
2013-02-14T07:55:42+00:00 heroku[web.1]: Process exited with status 1
2013-02-14T07:55:42+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-14T07:55:43+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=my-hurl-*****.herokuapp.com fwd=95.65.21.178 dyno= queue= wait= connect= service= status=503 bytes= 
```

**有人实现了正常的heroku服务器吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:13:39.827

**解决了**

使用以下方法添加所有配置变量：

```
$ heroku config:add POSTGRES_DATABASE=your_database
$ heroku config:add POSTGRES_HOST=your_host
$ heroku config:add POSTGRES_USER=your_user
$ heroku config:add POSTGRES_PASSWORD=your_password
$ heroku config:add POSTGRES_PORT=5432 
```

**或在一行中：** `$ heroku config:add POSTGRES_DATABASE=your_database POSTGRES_HOST=your_host POSTGRES_USER=your_user POSTGRES_PASSWORD=your_password POSTGRES_PORT=5432`

否则手动创建表：

```
$ heroku pg:psql
create table users (id character(40), content bytea);
create table hurls (id character(40), content bytea); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:19:17.023

除了由 rails 控制台生成的 config 目录中的文件之外，gemfile 也需要正确编辑才能与 postgresql 一起使用，通常 rails 生成 db.rb 以使用 sqlite3 并且 gemfile 中也提到了相同的 db，它们都需要工作使用 postgresql，因为 heroku 使用 postgres，希望它可能会有所帮助。

# mysql - 在 dataTables Rails 中渲染数据库视图

> ID：14856469
> 
> 赞同：-2
> 
> 时间：2013-02-13T15:02:31.480
> 
> 标签：mysql, ruby-on-rails, ruby, json, rails-activerecord

基于一个表`employees`，我在我的 MySQL 数据库中创建了一个视图，名为`Employees_by_gender`：

```
select count(gender_id) AS "Number of Employees",gender_id AS "Gender" from employees group by gender_id;

mysql> select * from Employee_by_gender;
+--------+---------------------+
| Gender | Number of Employees |
+--------+---------------------+
|      1 |                3890 |
|      2 |                1087 |
+--------+---------------------+ 
```

如何在客户端表中呈现此数据库视图的输出？我一直在使用“dataTables bootstrap rails”来渲染所有正常的表格。

![表格截图](../Images/be110ee70745e4b529e364c19715eb27.png)

如何在类似表格的显示中获取这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:55:10.280

我不确定 dataTables 的细节，但您可以为视图创建一个 ActiveRecord 模型，就好像它是一个普通（只读）表一样：

```
class EmployeesByGender < ActiveRecord::Base
  self.table_name 'Employees_by_gender'
end 
```

但是，除非您将视图列名称重命名为不包含空格，否则您将遇到非常困难的情况。

如果您必须在列名中保留空格，请遵循此处的建议：

[https://groups.google.com/forum/?fromgroups=#!topic/comp.lang.ruby/SNZNQu_h92w](https://groups.google.com/forum/?fromgroups=#!topic/comp.lang.ruby/SNZNQu_h92w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:35:54.387

试试看这个[Railscasts #340 datables](http://railscasts.com/episodes/340-datatables) ...希望它有帮助。实现非常简单。

# java - 如果确定它不应该运行，如何停止 java 程序？

> ID：14856470
> 
> 赞同：9
> 
> 时间：2013-02-13T15:02:36.650
> 
> 标签：java

如果我想检查是否存在一些先决条件以运行 java 程序，什么是最好的？
做： `System.exit(1);`

或者抛出一个`RuntimeException`结束`main`主线程？（还没有其他线程在运行）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T15:05:06.300

理想情况下，您可以优雅地终止线程。`System.exit(1)`也可以，但是如果你的线程得到信号，他们需要停止他们正在做的事情并通过完成他们正在做的事情来终止（即执行他们的方法直到最后），那就更好了。这显然取决于您的设计。

投掷 a`RuntimeException`似乎太不雅了，可能会导致您做出您实际上并不想要的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:05:42.523

您最好调用`exit`异常，因为异常用于帮助您捕获编程流程中的错误并相应地处理它们。

从用户的角度来看，让应用程序打印到`System.err`问题然后优雅地关闭比查看堆栈跟踪或其他`EXCEPTION`不应期望他们理解的代码符号更直观。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T15:06:25.510

如果您想要堆栈跟踪，请使用`RuntimeException`，如果不是`System.exit(1)`更清洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T15:04:51.447

没有比您发布的信息更多的信息，我会这样做：

```
public static void main(String[] args) {
    boolean precondition = ... // determine your precondition here
    if (precondition) {
        // run program
    } else {
        System.out.println("Preconditions not satisfied.");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T15:07:46.563

两者都很好，但我更喜欢使用 ，`System.exit()`因为`RuntimeException`可能会被认为具有误导性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T20:56:41.503

切勿强行退出。以允许您的应用程序用尽方法并自行关闭的方式对您的运行时方法进行编程。我建议在任何结构应用之前绘制图表。

# postgresql - 如何通过 Informix DB 中的数据为 DB PostgreSQL/PostGIS 提供数据？

> ID：14856474
> 
> 赞同：0
> 
> 时间：2013-02-13T15:02:51.433
> 
> 标签：postgresql

我在 postgresql 方面没有太多经验，但想要一些关于如何执行以下操作的线索：

我打算通过 Informix DB 中的数据提供数据库 PostgreSQL/PostGIS，我可以通过 ODBC 访问这些数据。简而言之，我打算在 Informix DB 中进行“选择”，并能够将该信息直接导入 DB PostgreSQL/PostGIS。

据我了解，似乎可以通过 DBLink 做到这一点。是这样吗？我在哪里可以获得有关此过程的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:50:33.267

我建议以 CSV 等文本格式从您拥有的任何数据库中转储数据，然后使用 COPY 命令将数据加载到 PostgreSQL 中。

# python - 构建具有外部依赖项的库——pep8

> ID：14856477
> 
> 赞同：3
> 
> 时间：2013-02-13T15:02:58.080
> 
> 标签：python

我们为工作中的各种代码保留了一个 python 库。这是共享代码、只实现一次、保持一致等的好方法。它的一部分依赖于外部库，并且对此有几个解决方案，但没有一个感觉是正确的。

一种解决方案是将整个外部库包含在我们的库中。争论的是外部库的版本是可以控制的，但是这增加了一堆代码，很丑，而且没有pythonic的感觉。

如果导入失败，另一种解决方案是`try import`出现打印错误。这感觉很好，是 pep8，但是我们的库有各种各样的模块，你经常需要其中的一部分，而不是另一部分。使用此解决方案，您会在不影响您的情况下看到错误。有投诉。

```
try:
    import zmq
    import simplejson
except:
    print "Install zmq and simplejson to use the LiveFeedSubscription()." 
```

我建议放入`try imports`Class `__init__`（解决上述问题），但不是 pep8；并且可以说更难判断依赖项是什么，因为它们没有在模块顶部导入。

```
def __init__(self, msg_type='', msg_types=[], debug=False):
    try:
        import zmq
        import simplejson
    except:
        print "Install zmq and simplejson to use the LiveFeedSubscription()." 
```

在具有如此不同模块的库中包含外部库的python最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T15:05:27.800

请改用适当的`setup.py`安装脚本，其中列出了您的依赖项。请参阅[Python 打包用户指南](https://packaging.python.org/en/latest/)和[Setuptools 文档](http://pythonhosted.org/setuptools/)。

或之类`easy_install`的工具也会根据需要安装您的依赖项。`pip``zc.buildout`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:08:02.267

您可以使用pip[支持](http://www.pip-installer.org/en/latest/index.html)的[需求文件。](http://www.pip-installer.org/en/latest/requirements.html)这看起来像：

```
zmq
simplejson==1.2.3 
```

然后，您将安装要求（假设上面`requirements.txt`使用的是：

```
pip install -r requirements.txt 
```

# mapquest - Mapquest Open Aerial 新的瓦片服务器 url？

> ID：14856481
> 
> 赞同：2
> 
> 时间：2013-02-13T15:03:22.000
> 
> 标签：mapquest

[开放式空中 api](http://developer.mapquest.com/web/products/open/map)的 MapQuest 页面声明该 url 将于 2013 年 2 月 15 日贬值并且不再有效。页面未列出新网址！！！有谁知道在哪里可以找到这些信息？地图任务？？任何人？

```
Alert:
The tile URL for the Open Aerial Tiles has changed. Please be aware that accessing
tiles through the oatile subdomain is deprecated and http://oatile1.mqcdn.com/ 
will be  unavailable after February 15, 2013. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:08:52.200

新 URL 列在页面下方；基本上 oatile1 已更改为 otile1，因此 URL 与用于 MapQuest Open Map Tiles 的 URL 更加一致。

以下是开放式空中瓷砖的示例 URL：http: [//otile1.mqcdn.com/tiles/1.0.0/sat/15/5240/12661.jpg](http://otile1.mqcdn.com/tiles/1.0.0/sat/15/5240/12661.jpg)

如果您在 URL 中将 ..../sat/... 更改为 .../map/...，您将获得该特定区域的 Open Map Tile。

# asp.net - 具有相同功能的组合框替代品

> ID：14856486
> 
> 赞同：0
> 
> 时间：2013-02-13T15:03:32.573
> 
> 标签：asp.net, ajax, combobox

您好，我有一个包含 CUSTOMERS 的组合框，然后是一个带有网格视图的更新面板，也包含 CUSTOMERS（与组合框相同）。用户从组合框中选择一个客户，然后 gridview 得到更新，组合框总是有所有的客户。我遇到的问题是更新面板仅在用户第一次选择客户时触发组合框 selectedindexchanged ，因此如果他们想更改客户，则不会发生任何事情。调试它根本不会触发。如果我将组合框放在更新面板中，它确实有效，但速度很慢。是否有任何替代组合框具有相同的搜索/下拉/自动完成功能？

如果您想查看，这是我当前的代码

```
 <asp:ComboBox ID="cbCustomer" runat="server" AutoCompleteMode="SuggestAppend" 
        AutoPostBack="True" DataSourceID="dataSourceCBCust" DataTextField="CUST_NAME" 
        DataValueField="CUST_NO" MaxLength="0" style="display: inline;">
    </asp:ComboBox>
    <asp:UpdatePanel ID="upCustomer" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="cbCustomer" EventName ="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="gvSiteAddress" EventName ="SelectedIndexChanged" />
        </Triggers>
        <ContentTemplate>
            <br />
            <asp:GridView ID="gvCustomer" runat="server" AllowPaging="True" DataSourceID="dataSourceGVCust" 
            AutoGenerateColumns="True" DataKeyNames="CUST_NO" Visible="False">
                <Columns>
                    <asp:CommandField ShowSelectButton="True" />
                </Columns>
                <SelectedRowStyle BackColor="#CE5D5A" Font-Bold="True" ForeColor="White" />
            </asp:GridView>
        </ContentTemplate> 
    </asp:UpdatePanel> 
```

后端

```
Protected Sub cbCustomer_SelectedIndexChanged(sender As Object, e As EventArgs) _
    Handles cbCustomer.SelectedIndexChanged
    dataSourceGVCust.SelectCommand = _
          ConfigurationManager.AppSettings("SelectCustomer") _
        & "  WHERE CUST_NO LIKE '%" _
        & cbCustomer.Text.TrimEnd _
        & "%' ORDER BY CUST_NAME"
    gvCustomer.Visible = True
End Sub 
```

# ios - iOS plist中的新数组用新键覆盖旧数组用不同的键

> ID：14856487
> 
> 赞同：3
> 
> 时间：2013-02-13T15:03:34.863
> 
> 标签：ios, arrays, nsmutablearray, nsdictionary

我正在使用下面的代码将一个新数组添加到 plist 中，但是每次我在我的应用程序中添加一个带有文本字段的新数组时，它都会覆盖旧数组，即使它有一个全新的键..有什么想法吗？

```
- (IBAction)saveViewerItems
{
    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

    // set the variables to the values in the text fields
    self.data = [[NSMutableArray alloc] initWithCapacity:20];

    // create dictionary with values in UITextFields
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: data, nil] forKeys:[NSArray arrayWithObjects: (@"%@", text), nil]];

    NSString *error = nil;
    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check is plistData exists
    if(plistData)
    {
        // write plistData to our Data.plist file
        [plistData writeToFile:plistPath atomically:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:19:24.547

为了获取文件中已有的词典，请使用：

```
NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)filePath]; 
```

为了在该字典中写入另一个数组（使用不同的键），请使用：

```
[dictionary setObject:(id)myArray forKey:(NSString *)myKey]; 
```

为了写回文件，请使用：

```
[dictionary writeToFile:(NSString *)filePath atomically:YES]; 
```

没有必要使用`NSData`类。有关更多信息，请查看[Apple NSDictionary 类](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:20:55.977

试试这个

```
 // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

    NSMutableDictionary *plist = [[NSDictionary dictionaryWithContentsOfFile:plistPath] mutableCopy];

    // set the variables to the values in the text fields
    self.data = [[NSMutableArray alloc] initWithCapacity:20];

   [plist setObject:[NSArray arrayWithObjects: data, nil] forKey:forKeys:[NSArray arrayWithObjects: (@"%@", text)];
   [plist writeToFile:path atomically:YES];
   [plist release]; 
```

# resize - 如何在 Javafx 中检测窗格正在调整大小

> ID：14856492
> 
> 赞同：0
> 
> 时间：2013-02-13T15:03:59.360
> 
> 标签：resize, javafx, pane

我想知道是否有人对如何在调整窗格大小时进行检测有什么**想法**。基本上我在窗格上绘制了多个线程，并且希望在调整窗格大小时线程停止。当我滚动窗格内部时，我可以通过组合使用 setOnMouseDragged、setOnMousePressed 和 setOnMouseReleased 并将布尔值设置为 true 或 false 来停止所有线程。效果很好！欣赏任何例子。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:21:14.437

解决了！只要宽度或高度属性发生变化，它就会将布尔值变为真。尝试绘制的线程在布尔值为真时暂停，然后在大约 100 毫秒后将布尔值转回假，允许它们继续绘制。

# php - 使用 AJAX 将值从 html 传递到 php

> ID：14856499
> 
> 赞同：0
> 
> 时间：2013-02-13T15:04:23.697
> 
> 标签：php, html, ajax

我正在尝试从具有多个地点名称的列表下拉菜单中传递值。这些名称将使用 AJAX 传递给 php，以用作查询要在 xls 中导出的特定地点表的参数。但是php代码没有被执行。谁能帮我解决这个问题。谢谢

以下是代码：

索引.html

```
<li><a href="#">Reports by Barangay</a>
<ul>
<li><a href="" id="libertad">Libertad</a></li>
<li><a href="#" id="sanvicente">San Vicente</a></li>
<li><a href="#" id="ampayon">Ampayon</a></li>
<li><a href="#" id="mahogany">Mahogany</a></li>
</ul>
</li>

<script type="text/javascript">// <![CDATA[
$(document).ready(function(){
    $("#libertad").click(function(){

    var libertad=$("#libertad").val();

var postdata={

    'libertad':libertad

};

$.ajax({
        type: "POST",
        url: "export.php",
        data: postdata,
        success: function(msg)
        {
          alert('success');
        }
    });

});
</script> 
```

导出.php

```
<?php

$value=$_POST['libertad'];

$DB_Server = "localhost";
$DB_Username = "root";
$DB_Password = "";
$DB_DBName = "places";
$DB_TBLName = $value;

$sql = "Select * from $DB_TBLName";

$Use_Title = 1;

$now_date = DATE('m-d-Y H:i');

$title = "RDI files on $now_date";

$Connect = @MYSQL_CONNECT($DB_Server, $DB_Username, $DB_Password)
 or DIE("Couldn't connect to MySQL:<br>" . MYSQL_ERROR() . "<br>" . MYSQL_ERRNO());
//select database
$Db = @MYSQL_SELECT_DB($DB_DBName, $Connect)
 or DIE("Couldn't select database:<br>" . MYSQL_ERROR(). "<br>" . MYSQL_ERRNO());
//execute query
$result = @MYSQL_QUERY($sql,$Connect)
 or DIE("Couldn't execute query:<br>" . MYSQL_ERROR(). "<br>" . MYSQL_ERRNO()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:08:32.857

`val()`用于表单元素，如`input`,`select`和`textarea`

如果要获取链接中的文本，可以使用[`text()`](http://api.jquery.com/text/)：

```
var libertad=$("#libertad").text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:18:09.963

在 js 中`ul id='abc'`赋予函数`.click`

# excel - 用单元格中的换行符替换逗号

> ID：14856501
> 
> 赞同：44
> 
> 时间：2013-02-13T15:04:33.320
> 
> 标签：excel

在下面的单元格中，我想将用逗号分隔的任何内容换成新行。我可以使用 alt+enter 手动添加这些换行符，但这次我想自动化它。

> BCM:Open,Event:Site XXXX is down,Service Affected :2G,Impact :Coverage Recovered at XXXX area,原因:正在调查中,恢复时间:30 分钟,开始时间:14:25:13,结束时间:15:18 :03,持续时间:00:52:50,SLA:1 小时。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-01-03T20:53:52.540

出于某种原因，以上都不适合我。然而，这确实：

1.  选择了我需要替换的单元格范围。
2.  转至`Home > Find & Select > Replace`或`Ctrl`+`H`
3.  找什么：`,`
4.  替换为：`CTRL`+ `SHIFT`+`J`
5.  点击`Replace All`

不知何故`CTRL`++`SHIFT`被`J`注册为换行符。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-13T15:15:05.260

要使用换行符替换逗号，请使用以下公式（假设要更改的文本在单元格 A1 中）：

`=SUBSTITUTE(A1,",",CHAR(10))`

然后您可能必须更改行高才能查看单元格中的所有值

我对你问题的另一部分发表了评论

* * *

编辑：这是此工作的屏幕截图 -我必须在“格式化单元格”对话框中**打开“换行文本” 。**

![在此处输入图像描述](../Images/7db26e6dae15f015663b61a27b5937c9.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T15:16:11.750

利用

```
=SUBSTITUTE(A1,",",CHAR(10) & CHAR(13)) 
```

这将用新行替换每个逗号。更改`A1`为您引用的单元格。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T15:42:45.300

您也可以在没有 VBA 的情况下从查找/替换对话框中执行此操作。我的答案在[https://stackoverflow.com/a/6116681/509840](https://stackoverflow.com/a/6116681/509840)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-30T19:07:54.490

Windows（与其他一些操作系统不同，如 Linux）使用 CR+LF 换行：

*   CR = 13 = 0x0D = ^M = \r = 回车

*   LF = 10 = 0x0A = ^J = \n = 换行

如果您希望换行符在复制到其他 Windows 程序时始终可见，则字符需要按该顺序排列。所以 Excel 函数将是：

=SUBSTITUTE(A1,",",CHAR(13) & CHAR(10))

# java - 关于方向变化的主题

> ID：14856512
> 
> 赞同：1
> 
> 时间：2013-02-13T15:05:08.000
> 
> 标签：java, android, multithreading, orientation-changes

最近这真的让我很困惑。我有一个我启动的线程，它一直运行直到我杀死它 - 通过将它的 while 变量设置为 false。

这一切正常，但是我在方向更改时与线程失去了联系，所以我无法阻止它。我写了这个来试图澄清这个问题：

```
public class FTTest extends Activity {

boolean isPlaying = false;
Player player = new Player();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fttest);
}

public void play(View v) {
    if (!isPlaying) {
        Log.d("Play Button", "Start Pressed");
        player.start();
        isPlaying = true;
    } else {
        Log.d("Play Button", "Stop Pressed");
        player.going=false;
        isPlaying = false;
    }
}

} 
```

播放器是这样的：

```
public class Player extends Thread{
int i;
public boolean going=true;

public void run(){
    while(going){
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        i++;
        Log.d("Thread", "Running "+i+" times");
    }
}

} 
```

我一直在阅读有关使用片段来解决这个问题的文章——但我只是不知道如何在这种情况下使用它们。我缺少一些简单的东西吗？

谢谢你的帮助，

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:14:09.597

这个想法是您允许保留片段（片段不会被破坏..它将在您的方向更改中持续存在）。您的活动将被重新创建，并将重新附加到仍在运行您的线程的 Fragment..

```
public class FTTest extends Activity {

    private FTFragment fragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState == null) {
            fragment = new FTFragment();
            getFragmentManager().beginTransaction().add(android.R.id.content, fragment).commit();
        }
        else {
          fragment = (FTFragment)getFragmentManager().findFragmentById(android.R.id.content);
        }
    }
} 
```

保留的片段类

```
public class FTFragment extends Fragment
{
    boolean isPlaying = false;
    Player player = new Player();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    public void play(View v) {
        if (!isPlaying) {
            Log.d("Play Button", "Start Pressed");
            player.start();
            isPlaying = true;
        } else {
            Log.d("Play Button", "Stop Pressed");
            player.going=false;
            isPlaying = false;
        }
    }

} 
```

在您打电话的活动中，`play(View)`您现在应该打电话`fragment.play(View);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:19:54.367

我认为正在发生的事情是，在您改变方向时，活动正在重新创建（就像它通常在 android 中所做的那样）。当这种情况发生时，`Player`对象也被重新初始化。

因此，您实际上将引用一个新`Player`对象，而旧对象将继续在您的控制之外愉快地运行。

有很多方法可以处理这个问题。这篇博文会有所帮助：

[http://blog.andresteingress.com/2011/09/27/fighting-orientation-changes-in-android/](http://blog.andresteingress.com/2011/09/27/fighting-orientation-changes-in-android/)

# iphone - UIScrollView：动画横幅效果

> ID：14856514
> 
> 赞同：0
> 
> 时间：2013-02-13T15:05:11.367
> 
> 标签：iphone, ios, animation, uiscrollview, transition

我有一个带有 PageControl 的 UIScrollView，它在视图中显示一些图片。

我想创建一个动画，例如在 X 秒后自动更改图像的横幅效果。

*   可以用 UIScrollView 做到这一点还是我应该使用另一种方式？

**编辑：@选择器**

```
- (void) changePage:(UIPageControl *)sender
{
    if ([pageControl currentPage]  < 3) {

        [pageControl setCurrentPage:[pageControl currentPage] + 1];
    } else{
        [pageControl setCurrentPage:0];
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:10:01.910

UIScrollView 很好。您必须在 scrollView 上设置 pagingEnabled，并在一段时间后更改在 scrollView 上选择的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T13:33:05.907

其简单的 pagingEnabled 将当前位置更改为页面。

换成`pageControl.pagingEnabled` _`pageControl.scrollEnabled`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T13:35:20.710

`scrollEnabled`：滚动时像 x/y 轴一样滚动

`pagingEnabled`：像当前滚动视图一样滚动，作为每个滚动的页面。

现在替换你的 `pagingEnabled`into `scrollEnabled`.

# css - 使用 em 导航侧边栏 - 剩余主体容器使用什么单位？

> ID：14856521
> 
> 赞同：0
> 
> 时间：2013-02-13T15:05:35.410
> 
> 标签：css

我有一个带有侧边栏的网页，其中包含该网站的导航选项。侧边栏的宽度为 6em（右：0px，高度：100%，位置：固定）。

我希望其余内容利用页面的大部分其余部分（总宽度的 100%，负 7em）。

现在，我在主要内容上使用百分比 - 有没有更聪明/更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:09:44.753

当然，在剩余页面上保持 100% 宽度并添加

> 左填充：7em；

（您的剩余页面应放置在包含 div 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:10:15.033

很难说没有看到一些 HTML，但我只需将您的内容 div 设置为 100% 宽度并添加 7em 的右填充以适应侧边栏。您在内容 div 中执行的操作由您自行决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:13:26.823

如果主要内容是`display: block`，默认会用完整个可用区域。无需将其指定为`100%`宽度。为确保没有重叠，请给它一个右边距`6em`（或导航栏的宽度）。根据您的某些内部元素样式，可能会出现问题，但不太可能。

[http://jsfiddle.net/XFaeZ/](http://jsfiddle.net/XFaeZ/)

请注意“内容”是如何可见的，即使它浮动到右侧。如果`#content`div 设置为`width: 100%`，它的边距会*超出*页面的宽度，并且“内容”会被遮挡。

# php - 如何在服务器超时之前加快我的 php 循环完成？

> ID：14856522
> 
> 赞同：0
> 
> 时间：2013-02-13T15:05:39.693
> 
> 标签：php, apache, while-loop, timeout

请耐心等待，因为我对此有点陌生。我有一个页面在提交表单后调用另一个页面。新页面包含一个冗长的 php 循环，该循环在页面显示之前运行。问题是，服务器在循环有时间完成之前发送了 500 错误。我与 GoDaddy 有经济共享的 linux 托管，但他们不允许我访问错误日志。我很确定这不是内存问题。我怀疑apache只是超时了。我已经缩短了循环并且它工作正常，所以我确信代码没有任何问题，但我想知道是否有任何技巧可以更好地编码循环，或者欺骗 apache 给循环更多时间，或任何使这项工作。在此先感谢，这是代码：

循环开始前的一些变量：

```
$usernum1 = $_POST['num1']; 
$usernum2 = $_POST['num2']; 
$usernum3 = $_POST['num3']; 
$usernum4 = $_POST['num4']; 
$usernum5 = $_POST['num5']; 
$usernum6 = $_POST['num6']; 
$usernum7 = $_POST['num7']; 

$usernumbers = array($usernum1, $usernum2, 
                     $usernum3, $usernum4, 
                     $usernum5, $usernum6, 
                     $usernum7);

sort($usernumbers, SORT_NUMERIC);

$i = 0;
$counter = 0;
set_time_limit(0);
$input = range(1, 49); 
```

这是循环：

```
do   {

$rand_keys = array_rand($input, 7);
sort($rand_keys, SORT_NUMERIC);

if ($input[$rand_keys[0]] == $usernumbers[0] && 
    $input[$rand_keys[1]] == $usernumbers[1] && 
    $input[$rand_keys[2]] == $usernumbers[2] && 
    $input[$rand_keys[3]] == $usernumbers[3] && 
    $input[$rand_keys[4]] == $usernumbers[4] && 
    $input[$rand_keys[5]] == $usernumbers[5] && 
    $input[$rand_keys[6]] == $usernumbers[6]) 
 {   
  $i = 1;
 }

$counter = $counter + 1;

     } while ($i == 0); 
```

您可以看到循环在 $i == 1 时结束，并且当所有数字匹配时 $i 被分配 1。还要提一下，我在服务器上的php5.ini文件中添加了max_execution_time = 1000，当我查看phpinfo时，似乎已经生效了。就是这样！不是很复杂。如果有人可以帮我找出一些技巧或更好的方法，请帮忙，因为我已经为此绞尽脑汁了 2 天。
我只需要循环有更多的时间来完成。再次提前感谢:-)

编辑：对于那些希望看到脚本正常工作的人，我将它用于只有六个号码的彩票，更容易中奖，并且不会超时。转到此处并确保选择顶部选项（乐透 649）。[http://diablogosse.com/test/lottosims.php](http://diablogosse.com/test/lottosims.php)

EDIT2：对不起，如果这很糟糕，但我只是想在很多帖子之后澄清一些事情。我的问题不是“我为什么要以上帝的名义这样做？？”。这个问题更像是：“我怎样才能让我想做的事情发挥作用。”。;-)

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:10:22.267

你可以使用

```
set_time_limit ( int $seconds ) 
```

在循环开始时和每次旋转后，脚本时间限制将增加 x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:13:30.593

当 PHP 处于安全模式时，set_time_limit 不起作用，GoDaddy 似乎就是这种情况。

见这里：[ini_set, set_time_limit, (max_execution_time) - 不工作](https://stackoverflow.com/questions/1590441/ini-set-set-time-limit-max-execution-time-not-working)。

我可以问你你想用那个循环实现什么吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:33:58.927

只是一个想法：

应用目标：

*   用户输入 1 到 49 之间的六个最喜欢的数字，即 [1..49]
*   应用程序生成 1 到 49 之间的六个随机数，即 [1..49]
*   如果两组数字相同，则用户 WINSssss..

模拟目标：

*   让用户知道幸运数字中奖需要多少天

在**javascript**中实现将为您节省大量服务器资源。与其循环这么多次，不如在每次检查后返回。如果有匹配用户获胜。如果用户没有获胜，则回复嘲讽消息以激起用户再次玩。

`You were so close, 4 matching numbers!`想再玩吗？

# python - 在 Python 中解析 Twitter JSON 对象

> ID：14856526
> 
> 赞同：2
> 
> 时间：2013-02-13T15:05:53.770
> 
> 标签：python, json, twitter, tweepy

我正在尝试从 twitter 下载推文。

为此，我使用了 python 和 Tweepy。虽然我对 Python 和 Twitter API 都很陌生。

我的 Python 脚本如下：#!usr/bin/python

```
#import modules
import sys
import tweepy
import json

#global variables
consumer_key = ''
consumer_secret = ''
token_key = ''
token_secret = ''

#Main function
def main():
    print sys.argv[0],'starts'
    auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(token_key, token_secret)
    print 'Connected to Twitter'
    api = tweepy.API(auth)
    if not api.test():
        print 'Twitter API test failed'

    print 'Experiment with cursor'
    print 'Get search method returns json objects'

   json_search = api.search(q="football")
   #json.loads(json_search())
   print  json_search

#Standard boilerplate to call main function if this file runs

if __name__ == '__main__':
    main() 
```

我得到的结果如下：

```
[<tweepy.models.SearchResult object at 0x9a0934c>, <tweepy.models.SearchResult object at 0x9a0986c>, <tweepy.models.SearchResult object at 0x9a096ec>, <tweepy.models.SearchResult object at 0xb76d8ccc>, <tweepy.models.SearchResult object at 0x9a09ccc>, <tweepy.models.SearchResult object at 0x9a0974c>, <tweepy.models.SearchResult object at 0x9a0940c>, <tweepy.models.SearchResult object at 0x99fdfcc>, <tweepy.models.SearchResult object at 0x99fdfec>, <tweepy.models.SearchResult object at 0x9a08cec>, <tweepy.models.SearchResult object at 0x9a08f4c>, <tweepy.models.SearchResult object at 0x9a08eec>, <tweepy.models.SearchResult object at 0x9a08a4c>, <tweepy.models.SearchResult object at 0x9a08c0c>, <tweepy.models.SearchResult object at 0x9a08dcc>] 
```

现在我很困惑如何从这些信息中提取推文？我尝试对这些数据使用 json.loads 方法。但它给了我错误，因为 JSON 需要字符串或缓冲区。示例代码将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T15:23:03.360

Tweepy 为您提供更丰富的对象；它为您解析了 JSON。

这些`SearchResult`对象与 Twitter 发送的 JSON 结构具有相同的属性；只需查看[Tweet 文档](https://dev.twitter.com/docs/platform-objects/tweets)以查看可用的内容：

```
for result in api.search(q="football"):
    print result.text 
```

演示：

```
>>> import tweepy
>>> tweepy.__version__
'3.3.0'
>>> consumer_key = '<consumer_key>'
>>> consumer_secret = '<consumer_secret>'
>>> access_token = '<access_token>'
>>> access_token_secret = '<access_token_secret>'
>>> auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
>>> auth.set_access_token(access_token, access_token_secret)
>>> api = tweepy.API(auth)
>>> for result in api.search(q="football"):
...     print result.text
... 
Great moments from the Women's FA Cup http://t.co/Y4C0LFJed9
RT @freebets: 6 YEARS AGO TODAY: 

Football lost one of its great managers. 

RIP Sir Bobby Robson. http://t.co/NCo90ZIUPY
RT @Oddschanger: COMPETITION CLOSES TODAY!

Win a Premier League or Football League shirt of YOUR choice! 

RETWEET &amp; FOLLOW to enter. http…
Berita Transfer: Transfer rumours and paper review – Friday, July 31 http://t.co/qRrDIEP2zh [TS] #nobar #gosip
@ajperry18 im sorry I don't know this football shit
@risu_football おれモロ誕生日で北辰なんすよ笑
NFF Unveils Oliseh As Super Eagles Coach - SUNDAY Oliseh has been unveiled by the Nigeria Football... http://t.co/IOYajD9bi2 #Sports
RT @BilelGhazi: RT @lequipe : Gourcuff, au tour de Guingamp http://t.co/Dkio8v9LZq
@EDS_Amy HP SAUCE ?
RT @fsntweet: マンＣの塩対応に怒りの炎！ベトナム人ファン、チケットを燃やして猛抗議 - http://t.co/yg5iuABy3K 

なめるなよ、プレミアリーグ！マンチェスターＣのプレシーズンツアーの行き先でベトナム人男性が、衝撃的な行
RT @peterMwendo: Le football cest un sport collectif ou on doit se faire des passe http://t.co/61hy138yo8
RT @TSBible: 6 years ago today, football lost a true gentleman. Rest in Peace Sir Bobby Robson. http://t.co/6eHTI6UxaC
6 years ago today the greatest football manger of all time passed away SIR Bobby Robson a true Ipswich and footballing legend
The Guardian: PSG close to sealing £40m deal for Manchester United’s Ángel Di María. http://t.co/gAQEucRLZa
Sir Bobby Robson, the #football #legend passed away 6 years ago. 

#Barcelona #newcastle #Porto http://t.co/4UXpnvrHhS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T19:22:12.397

您可以使用**JSON 解析器**来实现这一点，这是我在 App Engine 上的代码，它处理准备用于 JQuery 客户端的**JSONP响应：**

```
import webapp2
import tweepy
import json
from tweepy.parsers import JSONParser

class APISearchHandler(webapp2.RequestHandler):
    def get(self):

        CONSUMER_KEY = 'xxxx'
        CONSUMER_SECRET = 'xxxx'
        ACCESS_TOKEN_KEY = 'xxxx'
        ACCESS_TOKEN_SECRET = 'xxxx'

        auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)
        auth.set_access_token(ACCESS_TOKEN_KEY, ACCESS_TOKEN_SECRET)
        api = tweepy.API(auth, parser=JSONParser())

        # Query String Parameters
        qs = self.request.get('q')
        max_id = self.request.get('max_id')

        # JSONP Callback
        callback = self.request.get('callback')

        max_tweets = 100
        search_results = api.search(q=qs, count=max_tweets, max_id=max_id)
        json_str = json.dumps( search_results )

        if callback:
            response = "%s(%s)" % (callback, json_str)
        else:
            response = json_str

        self.response.write( response ) 
```

所以关键是

```
api = tweepy.API(auth, parser=JSONParser()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-12T14:03:44.610

我不使用全局变量，而是在 python 中重新组织代码`class`：

```
import tweepy

class TweetPrinter():
    """
        Simple class to print tweets
    """
    def __init__(self, consumer_key, consumer_secret, access_token, 
                 access_token_secret):
        self.consumer_key = consumer_key
        self.consumer_secret = consumer_secret
        self.access_token = access_token
        self.access_token_secret = access_token_secret
        self.auth = tweepy.OAuthHandler(self.consumer_key, 
                                        self.consumer_secret)
        self.auth.set_access_token(access_token, access_token_secret)

    def tweet_print(self):
        api = tweepy.API(self.auth)
        football_tweets = api.search(q="football")
        for tweet in football_tweets:
            print(tweet.text)

def main():
    tweet_printer = TweetPrinter(my_consumer_key, my_consumer_secret, 
                              my_access_token, my_access_token_secret)

    tweet_printer.tweet_print()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:12:38.173

将我的代码用于 tweepy：

```
def twitterfeed():
   auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
   auth.set_access_token(access_key, access_secret)
   api = tweepy.API(auth)
   statuses = tweepy.Cursor(api.home_timeline).items(20)
   data = [s.text.encode('utf8') for s in statuses]
   print data 
```

# javascript - 用正则表达式匹配同一个词两次，而不关心这个词是什么

> ID：14856532
> 
> 赞同：21
> 
> 时间：2013-02-13T15:06:23.083
> 
> 标签：javascript, regex

接受以下输入：

```
foo.foo aefhiuafhiauefheiauh bar.bar jgoeiajgoieajogiae baz.foo ogiejaogijaeoigjea 
```

假设我想匹配`x.x`x 在点的两侧相同的位置。所以我不想匹配`x.y`。因此，使用示例输入，我会得到`foo.foo`，`bar.bar`而不是`baz.foo`

我想做的是

```
(\w+)\.$1 
```

但这当然行不通。

这可能以任何理智的方式使用正则表达式，还是我应该匹配`x.y`和处理代码中的`x`比较`y`？

为了这个问题，假设我使用的是 Javascript 正则表达式引擎。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-13T15:11:04.297

试试这个：

```
/(\w+)\.\1/g 
```

这使用`\1` [反向引用](https://en.wikipedia.org/wiki/Regular_expression#backreferences)来匹配第一个捕获组的文本`(\w+)`。

[在http://regexpal.com/](http://regexpal.com/)上测试并有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T15:15:09.013

应该是全球的！

```
/(\w+)\.\1/g; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-20T10:49:57.540

我正在为使用 Visual Studio 2017 的人们提供对已接受答案的改编，以查找在同一行中重复的相同变量名称。

我使用的搜索是：

```
(\w+) = \1 [&] 
```

我正在搜索 VB 字符串连接，我想考虑用 stringbuilder 或简化的 &= 运算符替换它们，所以我想替换：

```
MyString = MyString & something 
```

和

```
MyString &= something 
```

该表达式适用于 find all 所以我能够找到所有实例

# java - 从集群的所有计算机访问 HDFS 文件

> ID：14856535
> 
> 赞同：0
> 
> 时间：2013-02-13T15:06:30.810
> 
> 标签：java, linux, hadoop, mapreduce, hdfs

我的hadoop程序原本是以本地模式启动的，现在我的目的变成了以完全分布式模式启动。为此，有必要从集群的所有计算机上提供对在 reducer 和 mapper 函数中执行读取的文件的访问权限，因此我在[http://answers.mapr.com/questions/4444/上提出了一个问题hadoop 脚本中的选项文件语法](http://answers.mapr.com/questions/4444/syntax-of-option-files-in-hadoop-script)（也因为不知道要在哪台计算机上执行映射器功能（程序逻辑中的映射器将只有一个，并且程序将仅使用一个映射器启动），有必要还提供所有访问群集到到达映射器函数输入的文件）。在这方面我有一个问题：是否可以直接使用hdfs-files：即预先将文件从Linux的文件系统复制到HDFS的文件系统中（因此，我假设这些文件在a的所有计算机上都可用如果不是这样，请更正）然后使用 HDFS Java API 在集群计算机上执行的 reducer 和 mapper 函数中读取这些文件？

如果对这个问题的回答是肯定的，请给出一个从 Linux 文件系统复制到 HDFS 文件系统中的示例，并通过 HDFS Java API 将这些文件用 java 读取到程序中，并将其内容记录在 java-string 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:44:41.067

将所有输入文件复制到*主*节点（可以使用 来完成`scp`）。然后登录到您的*主*节点 ( `ssh`) 并执行以下操作以将文件从本地文件系统复制到 hdfs：

`hadoop fs -put $localfilelocation $destination`

现在在您的 hadoop 作业中，您可以使用输入为`hdfs:///$destination`. 无需使用任何额外的 API 从 HDFS 读取。

如果您真的想从 HDFS 读取文件并将其用作输入文件以外的其他信息，请参阅[此](https://sites.google.com/site/hadoopandhive/home/hadoop-how-to-read-a-file-from-hdfs).

# python - 基于对象字典中的字符串值键实现对象相等

> ID：14856536
> 
> 赞同：0
> 
> 时间：2013-02-13T15:06:31.557
> 
> 标签：python, oop

我创建了一个类。

```
class DictToObject(object):
    def __init__(self, entries): 
        self.__dict__.update(entries)

    def id(self):
        keyColumn = self['KEY_COL_TX']
        keyValue = self[keyColumn]
        return keyValue # a string 
```

`o1.id()`如果等于，则此类的实例将被视为相等`o2.id()`

但我认为不可能为所有字符串值创建一个唯一的整数，所以我需要一些其他方法来比较对象相等性而不使用`__hash__()`

# java - java - 如何从java中的其他类访问私有类中decleared的变量？

> ID：14856537
> 
> 赞同：0
> 
> 时间：2013-02-13T15:06:32.967
> 
> 标签：java, class, private

我有带有 2 个文本字段和一个登录按钮的登录页面。单击登录按钮时，会从 txtfield 中检索用户名和密码，并检查数据库中的用户名和密码。如果密码和用户名正确，则进入主页。我要获取用户名并在主页中显示名称。但是所有检查数据库并从数据库中检索数据的代码都在 buttonActionPerformed 的私有类中。即使我从数据库中检索用户名并将其存储在变量中，我也无法从其他类访问它，因为它是私有类。那么我该怎么做才能访问我在私有类中清除的变量。我试图在私有类之外清除变量并在私有类中更新它，但是当我从其他类调用时我仍然空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:27:31.180

> 那么我该怎么做才能访问我在私有类中清除的变量。我试图在私有类之外清除变量并在私有类中更新它，但是当我从其他类调用时我仍然空白。

反射 API 用于访问私有变量。如果您有一个名为 Database 的类并且其中的私有字段是 defPU，您将访问它（并将其设置为 null），如下所示：

```
Field defPUField = Database.class.getDeclaredField("defPU");
defPUField.setAccessible(true);
Field modsField = Field.class. .getDeclaredField("modifiers");
modsField.setAccessible(true);
modsField.setInt(defPUField, 10);
defPUField.set(null, testVal); 
```

我建议您在幕后使用[dp4j](http://dp4j.com)为您生成反射代码：

```
@com.dp4j.TestPrivates
void aMethod(){
 Database.defPU = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:41:50.873

```
public class PrivateInformationRetreiving{
private int PrivateInfo;
public void setPrivateInfo(int PrivateInfo)
{
this.PrivateInfo=PrivateInfo;
}
public int getPrivateInfo(){return PrivateInfo;}
} 
```

* * *

# 解释

`PrivateInfo`首先，声明了变量`private`，这意味着只有类内部的方法`PrivateInformationRetreiving`会知道`PrivateInfo`。
所以，当我们想知道私有变量`PrivateInfo`时，我们必须用`public`方法来做。
`public`元素不仅可以在类中访问，还可以在类外访问。
因此，`setPrivateInfo()`可以`PrivateInfo`在类内访问。
因此，我们必须使用数学方法，`setPrivateInfo()`并`getPrivateInfo()`作为接口来访问`PrivateInfo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:15:19.017

成功登录后，只需将用户数据放入会话，然后重定向。当您需要当前登录的用户名时，您不必向数据库创建另一个请求，因此它更快更高效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T15:14:59.343

如果您将其声明为私有，则不能在类上下文之外访问它。

一种选择是公开公共 getter/setter 以与您的变量进行交互。

```
public class MyClass {
    private int x;
    public int getX(){
        return x;
    }
    public void setX(int value){
        x = value;
    }
} 
```

# visual-studio-2012 - Visual Studio 2012 准备 - 安装警告？

> ID：14856541
> 
> 赞同：4
> 
> 时间：2013-02-13T15:06:41.513
> 
> 标签：visual-studio-2012

我在 VS2012Pro 安装结束时收到了我不理解的警告，想知道是否有其他人有同样的问题或知道原因/修复。我收到 2 个几乎相同的警告：

Microsoft Visual Studio 准备 系统找不到指定的文件。和 Microsoft Visual Studio 2012 准备 系统找不到指定的文件。

我正在从 ISO 安装。我尝试使用 Virtual Clone Drive 进行安装，然后使用 7-Zip 提取文件并使用 exe。两种情况都会发出警告。

有什么建议吗？谢谢。

# git - github 命令

> ID：14856545
> 
> 赞同：0
> 
> 时间：2013-02-13T15:06:51.400
> 
> 标签：git, github

我想创建一个新分支，获取一个存储库，更改一个文件并将其推送到存储库。

这些命令是正确的方法吗？

```
git checkout -b marker_up_down          //create a branch and make it as a default
git clone git@github.com:user/mygit.git // get the repository of mygit 
```

假设我更改了一个名为：“main.html”的文件并想要推送它，所以我这样做：

```
git add path/main.html
git commit                             // add a comment of this push
git push origin marker_up_down 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:14:51.503

我相信你想做的是

1.  克隆远程存储库
    `git clone git@github.com:user/mygit.git`

2.  创建一个分支
    `git checkout -b marker_up_down`

3.  更改（编辑）您的文件

4.  添加并提交您的文件
    `git add path/main.html`
    `git commit`

5.  将更改推送到远程
    `git push origin marker_up_down`

# mercurial - 使用 hg log 和 revsets 时转义数字标签

> ID：14856548
> 
> 赞同：1
> 
> 时间：2013-02-13T15:07:08.577
> 
> 标签：mercurial

我正在尝试做一个相当简单的 hg log -r rev1::rev2 来获取两个标签之间的变更集列表。

然而，在这个特定的存储库中，构建服务器会根据软件版本自动为构建创建数字标签，例如 2.12.5.0。当我尝试使用这些数字标签执行 hg log -r 时，我收到来自 mercurial 的未知修订版“2.12.5.0”响应。我试过用引号转义而没有改变。是否可以使用数字标签发出此命令，它适用于非数字标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:39:16.000

我相信`tag`修订集可以处理：

```
hg log -r tag(2.12.5.0)::tag(2.12.5.2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:07:57.453

Ry4an revset 的缩短版本（源自`hg help revsets`）

`hg log -r "2.12.5.0::2.12.5.2"`

# iphone - 如何在 iPhone 上创建 Stocks 应用程序的 UI？

> ID：14856549
> 
> 赞同：0
> 
> 时间：2013-02-13T15:07:15.503
> 
> 标签：iphone, ios, stocks

我对获取股票数据不感兴趣，但我想创建一个与 iPhone 上的 Apple Stocks 应用程序具有完全相同 UI 的类似应用程序。

有人知道可以向我展示如何执行此操作的教程或开放代码仓库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:23:40.977

不会有这样的教程，因为股票应用程序使用了大量不同的技术和图形效果。

如果您阅读了 ViewController 编程指南，然后阅读了 CoreGraphics (Quartz) 指南，那么您就可以自己动手了。

再次询问您是否有更具体的问题。

# python - Python中的动态三重嵌套列表

> ID：14856551
> 
> 赞同：0
> 
> 时间：2013-02-13T15:07:18.763
> 
> 标签：python, list, dynamic, nested

我正在寻找在 Python 中创建一个三重嵌套列表。这意味着是 N 个个人的列表，每个人都有 L 个单词的词汇表，对于每个单词，我想存储一个结尾 (e) 和该个人最后一次使用单词 (t) 以来的时间。我知道如何做一个双重嵌套列表，本质上是给一个人一个词汇表：

`individual_vocab = [[e,t] for L in range(L)]`

如果我有五个词，这会给我这样的东西：

`[[e,t,],[e,t],[e,t],[e,t],[e,t]]`

我可以改变一个词的结尾而不改变另一个词。

现在，我想用这个词汇表初始化一个个体群体，如果一开始就相同，那很好（事实上，更可取），但它们必须是动态的。我的第一直觉是这样的：

`population =[individual_vocab for N in range(N)]`

但当然，问题在于这不是动态的：在这种情况下，人口中的所有个体都是彼此的直接副本（即指向个人词汇），因此不会独立改变，如果我这样做这个 N 为 3，然后尝试为第一个个体的第一个单词的单词结尾分配一个新值，我得到这个（其中一个是 e，2s 是 t），它改变了第一个单词的结尾每个人的词：

> > > 人口[0][0][0] = "新结局"
> > > 
> > > 人口

`[[['new ending', 2], [1, 2], [1, 2], [1, 2], [1, 2]], [['new ending', 2], [1, 2], [1, 2], [1, 2], [1, 2]], [['new ending', 2], [1, 2], [1, 2], [1, 2], [1, 2]]]`

如何有效地制作列表列表的动态列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:16:27.940

使用`copy`模块：

```
import copy

individual_vocab = [[e,t] for l in range(L)]

population = [copy.deepcopy(individual_vocab) for n in range(N)] 
```

添加我的意见 - 我认为这种嵌套级别必须使您成为 Python 中的[三星级 C 程序员](http://c2.com/cgi/wiki?ThreeStarProgrammer)。此时我将开始使用类以保持您的代码可读性。

# c++ - 如何在 boost::spirit::qi 中捕获字符而不消耗它

> ID：14856554
> 
> 赞同：2
> 
> 时间：2013-02-13T15:07:30.877
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我`boost::spirit::qi`用来解析看起来像这样的“模板”格式：

```
/path/to/:somewhere:/nifty.json 
```

其中`:somewhere:`表示由名称标识的任何字符串`somewhere`（名称可以是两个字符之间的任意一系列`:`字符）。我有一个可以工作的解析器，但我想做一个额外的改进。

我想知道`:somewhere:`占位符后面的字符（在本例中为 a `/`）。但是我的解析器的其余部分仍然需要了解这一点`/`并将其作为下一部分的一部分使用。

我如何在不实际使用它的情况下“读取”`/`之后`:somewhere:`的内容，以便解析器的其余部分可以看到并使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T15:18:49.897

你正在寻找

*   [正向前瞻解析器运算符 ( `&`)](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/operator/and_predicate.html)
*   [负前瞻解析器运算符 ( `!`)](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/operator/not_predicate.html)

例子：

```
 myrule = lexeme [ *~char_(":") ] >> ":" >>
       (  (&lit('/') >> absolute_path)
        | (relative_path)
       ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:04:43.663

正如 sehe 所提到的，这可以使用[前瞻解析器运算符 &](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/operator/and_predicate.html)来完成，但如果你也想发出字符，你还需要[boost.phoenix](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/quick_reference/phoenix.html)、[qi::locals](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/parser_concepts/nonterminal.html#spirit.qi.reference.parser_concepts.nonterminal.locals)和[qi::attr](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/auxiliary/attr.html)。

例如：

```
#include <boost/fusion/include/std_pair.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/qi.hpp>

#include <iostream>
#include <string>

namespace qi = boost::spirit::qi;

int main(int argc, char** argv)
{
    std::string input("foo:/bar");
    std::pair<char, std::string> output;

    std::string::const_iterator begin = input.begin(),
                                end = input.end();

    qi::rule<std::string::const_iterator, qi::locals<char>, std::pair<char, std::string>()> duplicate =
          "foo"
       >> qi::omit[
             &(":" >> qi::char_[qi::_a = qi::_1])
          ]
       >> qi::attr(qi::_a)
       >> ":"
       >> *qi::char_;

    bool r = qi::parse(begin,
                       end,
                       duplicate,
                       output);

    std::cout << std::boolalpha
              << r << " "
              << (begin == end) << " '"
              << output.first << "' \""
              << output.second << "\""
              << std::endl;

    return 0;
} 
```

这输出：

```
true true '/' "/bar" 
```

# javascript - 显示视图中的Rails下拉状态更改？

> ID：14856557
> 
> 赞同：-1
> 
> 时间：2013-02-13T15:07:35.883
> 
> 标签：javascript, ruby-on-rails, ruby, drop-down-menu, twitter-bootstrap

我在我的表单中有这个用于状态更改（使用 simple_form gem）。

```
<%= f.input :state, collection: [ ['bids', 'Bid'], ['in_progress', 'In Progress'], ['complete', 'Complete'] ], as: :radio_buttons, label_method: :last, value_method: :first %> 
```

我还想做的是允许用户在使用简单的下拉菜单创建“作业”后在显示视图中更改此状态：http: [//twitter.github.com/bootstrap/components.html#按钮下拉菜单](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

所以下拉菜单显示当前状态，如果用户点击并选择不同的状态，模型会自动更新。我想在没有提交按钮的情况下执行此操作 - 自动提交 - javascript，我想？

我是否需要对我的控制器进行更改（编辑/更新）？我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:17:32.577

您基本上想在该下拉列表的更改事件中添加一个 Javascript 挂钩，获取当前选择的值，然后向您的控制器执行 AJAX POST。`update`它与您可能在 Rails 中实现的任何其他功能没有什么不同。

# c# - 无法在我的 C# 应用程序中添加静态端口映射

> ID：14856559
> 
> 赞同：7
> 
> 时间：2013-02-13T15:07:42.333
> 
> 标签：c#, .net, networking, upnp

我正在尝试在我的 c# 应用程序中添加新的静态端口映射。因为我的应用程序作为服务器运行，我希望它在端口 8000 上侦听。

```
NATUPNPLib.UPnPNATClass upnpnat = new NATUPNPLib.UPnPNATClass();
NATUPNPLib.IStaticPortMappingCollection mappings = upnpnat.StaticPortMappingCollection;
mappings.Add(8000, "TCP", 8000, "192.168.1.100", true, "Local Web Server"); 
```

但它不起作用！，例外情况如下：

> 你调用的对象是空的。

有人可以帮助我吗？

这就是我正在做的事情：http: [//pietschsoft.com/post/2009/02/05/NET-Framework-Communicate-through-NAT-Router-via-UPnP.aspx](http://pietschsoft.com/post/2009/02/05/NET-Framework-Communicate-through-NAT-Router-via-UPnP.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:09:28.433

您需要将映射设置为新实例：

例如：

```
var mappings = new List<Mapping>(); 
```

然后你可以调用：

```
mappings.Add(8000, "TCP", 8000, "192.168.1.100", true, "Local Web Server"); 
```

**从您的编辑：**

```
upnpnat.StaticPortMappingCollection; // this is your problem. 
```

该集合返回为空。因此，您不能添加到集合中。

您可能必须这样做：

```
NATUPNPLib.IStaticPortMappingCollection mappings = new StaticPortMappingCollection(); 
```

**来自 Codesleuth 的评论：**

> 我相信答案是他的路由器没有配置为 UPnP 网关，或者他没有权限。如果其中任何一种情况为真，则 StaticPortMappingCollection 为空。我建议您将其编辑到您的答案中，因为无论如何您都有正确的错误原因。首先检查 null 是处理错误的唯一方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:09:37.570

如果没有更多代码，我们将能够提供帮助，但如果异常在您提供的行上，则表示该异常为`mappings`null 且未设置。

检查该行之前的代码，看看您是否真的在创建和设置`mappings`变量。

根据您的评论，返回的对象`upnpnat.StaticPortMappingCollection`是空的。检查文档以确保您正确初始化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:11:02.783

仅基于您的*错误消息*，这就是我们所拥有的；

```
var mappings = new List<Mapping>();
mappings.Add(8000, "TCP", 8000, "192.168.1.100", true, "Local Web Server"); 
```

编辑后，可能使用like；

```
NATUPNPLib.IStaticPortMappingCollection mappings = new StaticPortMappingCollection(); 
```

好像忘记使用了`()`

# java - HashMap 覆盖下一个值 Java

> ID：14856565
> 
> 赞同：2
> 
> 时间：2013-02-13T15:08:00.807
> 
> 标签：java, hashmap

假设我有 hashmap 存储，它包含例如-(11,name1) (11,name2)，我调用 HashMap.get(11)，它只显示 name2，这意味着它覆盖了 11 的第一个输入。我如何存储ID 11 的 name1 和 name2 都使用 hashmap？我知道我可以同时使用 HashMap 和 HashSet，但我不想为 HashMap 创建每个 HashSet。我只想使用 hashSet 。我该怎么做？我希望你能帮助我。谢谢你。

```
public void insert(int ID, String key){
        int hashKey = Hash(key);
        System.out.println("Hash Key" + hashKey);
        int node = Find(ID,hashKey);

        storeR.put(node, key);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T15:09:22.123

您可以使用：

```
HashMap<Integer, List<String>> 
```

`HashMap`您必须为每个键输入一个值。因此，当然，如果您两次输入相同的键，则该值将被覆盖。

解决方案是为每个键保存一组值。

在您的代码中，而不是：

```
storeR.put(node, key); 
```

你应该写：

```
List<String> nodeValues = storeR.get(node);
if (nodeValues == null) {
    nodeValues = new ArrayList<String>();
    storeR.put(node, nodeValues  );
}
nodeValues.add(key); 
```

而且您还应该将`storeR`类型更改为`HashMap<Integer, List<String>>`

`MultiMap`也是类似的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T15:10:05.040

您可能可以使用Apache Commons Collections 中的[MultiMap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:10:03.437

您将必须有一个`HashMap`其中每个键的值是另一个集合（列表或集合）或将字符串值连接在一起（例如逗号分隔）。

或者，您可能能够找到一个支持每个键多个值的数据集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T15:17:04.950

要为单个键存储多个值，请使用`HashMap`包含列表作为值的 a。`HashMap`的实现覆盖现有键的值。

```
HashMap<Integer,List<String>> 
```

此外，您可以`MultiMap`从 Apache Commons 使用，或者，如果您只是使用，`Integer`我可以建议您`array`直接使用：

```
List<String>[] yourList = new List<String>[initCapacity]; 
```

因此，您可以像这样访问该列表：

```
yourList[0].add("A New Value"); 
```

最后一点，您可以使用任何您认为合适的集合，如果性能对您很重要并且您不会为同一索引存储重复值，甚至可以使用 HashSet。

# python - 使用 Python 读取 Google 电子表格并将值与文本文件进行比较

> ID：14856568
> 
> 赞同：0
> 
> 时间：2013-02-13T15:08:10.080
> 
> 标签：python

我有一个包含域列表的 Google 电子表格，我还有一个文本文件中的域列表。我想使用适用于 Python 的 Google API 打开电子表格，并检查文本文件中是否存在域，如果没有设置值 0，则在单元格中设置标志值 1。

到目前为止，我有这个代码：

```
feed = gdataclient.GetListFeed(spreadsheet_key,
                                       worksheet_id)
row = 2
  #column index=12 corresponds to column name 'validdomain'
  col = 11
  domains = [domain.strip() for domain in open(domains_file,'r')]
  for row_entry in feed.entry:
    record = text_db.Record(row_entry=row_entry)
    if record.content['domainname'] in domains:
      gdataclient.UpdateCell(row = row,
                                 col = col,
                                 inputValue = '1' ,
                                 key = spreadsheet_key,
                                 wksht_id = worksheet_id)
    else:
      gdataclient.UpdateCell(row = row,
                                 col = col,
                                 inputValue = '0' ,
                                 key = spreadsheet_key,
                                 wksht_id = worksheet_id)
    row += 1 
```

因为电子表格很大，所以这段代码会一直超时。

# css - H3的百分比宽度

> ID：14856570
> 
> 赞同：0
> 
> 时间：2013-02-13T15:08:16.750
> 
> 标签：css

这更像是一个数学问题而不是编程问题，但这里是：

我有一个 100% 宽的容器 div。

在里面，我有两个浮动的 div。左边的 div 是 66% 宽并且向左浮动。右边的 div 是 30% 并且向右浮动。

我在左侧 div 中有一个 h2 元素，我希望它超出其父级的约束并延伸到其父级的最右边缘。

如果其父元素是顶部容器的 66%，则计算 h2 元素百分比宽度的公式是什么。

我目前通过反复试验将其设置为 151.5%，但我讨厌这只是一个目不转睛的猜测。我真的很想知道您将如何计算出正确的百分比。

由于它是响应式设计，我不能使用固定尺寸，它必须是百分比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:17:53.987

您可以更轻松地将您的位置放置`<h2>`在这样的绝对位置

```
h2 {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
} 
```

然后添加`position: relative;`到您的左列。但是，如果您在该列中只有一个标签，这将很有效。否则，当您尝试放置其他`<h2>`元素或使用 javascript 计算较大容器的宽度时，您需要做更多的数学运算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:28:57.170

没关系，想通了。100%（容器宽度）除以左 div 的宽度（66%）= 151.515152 我的错误是将我的 css 百分比四舍五入到 66% 而不是 66.66666667%。

感谢所有的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:31:03.457

如果我理解正确，这是您问题的解决方案：http: [//jsfiddle.net/pgJeC/1/](http://jsfiddle.net/pgJeC/1/)

注意：颜色设置仅用于显示分层

```
.id1 {
    width:66%;
    float:left;
    background:maroon;
}
.id2 {
    width:30%;
    float:right;
    background: green;
 }
h3 {
    color:red;
    width:100%;
    white-space: nowrap;
    display:block;
} 
```

# xml - 使用逗号分隔的枚举列表的 XSD 架构

> ID：14856575
> 
> 赞同：2
> 
> 时间：2013-02-13T15:08:18.937
> 
> 标签：xml, xsd

我正在尝试为现有的 XML 文档创建 XSD。我真的无法更改 XML，所以我需要让 XSD 适合它（我知道这有点倒退）。

在 XML 中，有一个称为 Group 的元素。该元素具有一个或多个特征。大约有 40 个有效的特征名称。所以我选择将它们建模为枚举。枚举看起来像这样：

```
<xs:simpleType name="FeatureNamesEnumType">
    <xs:restriction base="xs:normalizedString">
        <xs:enumeration value="Feature1"/>
        <xs:enumeration value="Feature2"/>
        <xs:enumeration value="Feature3"/>
    </xs:restriction>
</xs:simpleType> 
```

然后，对于该组，我有以下内容：

```
<xs:complexType name="groupType">
    <xs:attribute type="FeatureNamesEnumType" name="features" use="required"/>
  </xs:complexType> 
```

我一直遇到的问题是，在 XML 文件中，属性可能设置为以逗号分隔的功能列表。例如：

```
<group name="Group1"
       features="Feature1,Feature2"
</group> 
```

这不会针对 XSD 进行验证，因为这个逗号分隔的列表在枚举中是 no。

我知道最好让一个组包含一系列功能，但这不是一个选项，因为我无法更改 XML 文件。

如果功能与枚举值不匹配，我的目标是导致验证失败。因此，例如，我希望以下内容无效：

```
<group name="Group1"
           features="Feature1,Featur2"
</group> 
```

拼写错误应该导致它无效。我的 XSD 中有没有办法表明 Group 上的 features 属性接受一个逗号分隔的列表，该列表仅由有效的枚举值组成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:29:04.433

就其本身而言，XSD 1.0 不能用于定义您需要的约束。如果您可以对这些字段进行预处理或后处理以用空格替换逗号，那么您可以定义一个 xsd:list 的`FeatureNamesEnumType`.

正确的方法取决于您的平台。例如，如果在 .NET 上，我会将这些字段定义为字符串，可能受 xsd:pattern; 约束。然后我会根据上面定义为 xsd:list 的简单类型手动验证每个字段的值——这在 .NET 中是一件非常简单的事情。您将如何有效地到达这些领域，将取决于您的处理模型......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-12T18:04:24.173

使用正则表达式`xs:pattern`可以完全验证`features`XSD 中属性的值。根据您的需要，例如`<xs:simpleType><xs:restriction base="xs:token"><xs:pattern value="(Feature1|Feature2|Feature3)(,(Feature1|Feature2|Feature3))*"/></xs:restriction></xs:simpleType>`.

# regex - 使用正则表达式消除文件中的块（iCal 文件中的分类事件）

> ID：14856576
> 
> 赞同：0
> 
> 时间：2013-02-13T15:08:19.193
> 
> 标签：regex, windows, icalendar, non-greedy, editpad

我有一个 .ics 文件，我想根据事件类别创建单独的新 .ics 文件（我无法让 egroupware 仅导出一个类别的事件，我想根据类别创建新日历）。我的预期方法是重复消除除一类事件之外的所有事件，然后使用 EditPad Lite 7 (Windows) 保存文件。

我正在努力使正则表达式正确。.+? 仍然太贪婪并且否定字符串（例如从一个类别中消除除*事件之外*的所有事件）也不起作用。

样本

```
 BEGIN:VEVENT
    DESCRIPTION:Event 2
    END:VEVENT
    BEGIN:VEVENT
    DESCRIPTION:Event 3
    CATEGORIES:Sports
    END:VEVENT
    BEGIN:VEVENT
    DESCRIPTION:Event 4
    END:VEVENT 
```

正则表达式`BEGIN:VEVENT.+?CATEGORIES:Sports.+?END:VEVENT`应该只匹配体育赛事，但它会捕获从第一个`BEGIN`到第一个`END`类别的所有内容。

编辑：否定也不起作用：`BEGIN:VEVENT.+?((?!CATEGORIES:Sports).).+?END:VEVENT`.

我错过了什么？任何指针都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:18:47.780

我猜换行符被删除或忽略了，因为你的正则表达式不关心它们。

我只有在 CATEGORIES 之后对比赛进行更正

```
BEGIN:VEVENT.+?CATEGORIES:Sports.*?END:VEVENT
                                 ^
                               Zero or more 
```

您的正则表达式的第一部分看起来不错，也许EditPad 中的*正则表达式引擎*不太好。尝试使用不同的编辑器或脚本语言（如 Eclipse 或 perl 或 Notepad+ 或 Notepad2）

您可以拆分输入，然后 grep 匹配的体育赛事

```
@sportevents = grep /Sports/, split /END:VEVENT/, $input
map $_.="END:VEVENT", @sportevents 
```

这是 perl，也许你可以从 EditPad 启动一个脚本来完成它。
第二行只是恢复拆分期间剥离的 END:VEVENT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:09:46.973

好的。解决了。我在[这里](http://wiki.zimbra.com/wiki/Ajcody-Calendar-Issues#ical-split.pl)找到了一些可以用来分割 ics 文件的东西。我对其进行了调整以使用类别而不是文件名中的摘要，然后根据类别合并单独生成的文件。我在所有文件中添加了常用的 ics 页眉和页脚，瞧，我有单独的日历文件。

# jquery - 在不重新生成滑块的情况下将图像添加到 WOWslider

> ID：14856577
> 
> 赞同：0
> 
> 时间：2013-02-13T15:08:22.817
> 
> 标签：jquery

再会

关于伟大的 jQuery 插件：[WOWSlider](http://wowslider.com/)

我想将图像添加到滑块，但在 html 文件中手动添加它们会在 Chrome 和 IE 中产生问题（请参阅附图）

我需要在 script.js 或 wowslider.js 文件中添加什么（滑块需要两个 js 文件）才能使滑块在 Chrome 和 IE 中正常工作

这是我的代码：

HTML

```
 <div id="wowslider-container1">
               <div class="ws_images">
                        <ul>
                            <li><img src="images/wowslider/wallpaper307776.jpg" alt="wallpaper-307776" title="wallpaper-307776" id="wows1_0"/></li>
                            <li><img src="images/wowslider/wallpaper2538242.jpg" alt="wallpaper-2538242" title="wallpaper-2538242" id="wows1_1"/></li>
                            <li><img src="images/wowslider/wallpaper2624538.jpg" alt="wallpaper-2624538" title="wallpaper-2624538" id="wows1_2"/></li>
  <!--  **********************************************
  I tried to add these two images below manually:
  -->   *****************************************
                            <li><img src="images/wowslider/wallpaper2561740.jpg" alt="wallpaper-2624538" title="wallpaper-2624538" id="wows1_3"/></li>
                            <li><img src="images/wowslider/wallpaper2623792.jpg" alt="wallpaper-2624538" title="wallpaper-2624538" id="wows1_4"/></li>
                        </ul>
                </div>
                <div class="ws_bullets">
                    <div>
                        <a href="#" title="wallpaper-307776"><img src="images/wowslider/tooltips/wallpaper307776.jpg" alt="wallpaper-307776"/>1</a>
                        <a href="#" title="wallpaper-2538242"><img src="images/wowslider/tooltips/wallpaper2538242.jpg" alt="wallpaper-2538242"/>2</a>
                        <a href="#" title="wallpaper-2624538"><img src="images/wowslider/tooltips/wallpaper2624538.jpg" alt="wallpaper-2624538"/>3</a>
                        <a href="#" title="wallpaper-2624538"><img src="images/wowslider/tooltips/wallpaper2624538.jpg" alt="wallpaper-2624538"/>4</a>
                        <a href="#" title="wallpaper-2624538"><img src="images/wowslider/tooltips/wallpaper2624538.jpg" alt="wallpaper-2624538"/>5</a>
                    </div>
                </div>

                <div class="ws_shadow"></div>
  </div> 
```

JS：wowslider.js 文件

```
jQuery.fn.wowSlider=function(x){var D=jQuery;var k=this;var h=k.get(0);x=D.extend({effect:function(){this.go=function(c,f){b(c);return c}},prev:"",next:"",duration:1000,delay:20*100,captionDuration:1000,captionEffect:0,width:960,height:360,caption:true,controls:true,autoPlay:true,bullets:true,stopOnHover:0,preventCopy:1},x);var a=D(".ws_images",k);var I=a.find("ul");function b(c){I.css({left:-c+"00%"})}D("<div>").css({width:"100%",visibility:"hidden","font-size":0,"line-height":0}).append(a.find("li:first img:first").clone().css({width:"100%"})).prependTo(a);I.css({position:"absolute",top:0,animation:"none","-moz-animation":"none","-webkit-animation":"none"});var q=x.images&&(new wowsliderPreloader(this,x));var i=a.find("li");var B=i.length;function w(c){return((c||0)+B)%B}var t=navigator.userAgent;if((/MSIE/.test(t)&&parseInt(/MSIE\s+([\d\.]+)/.exec(t)[1],10)<8)||(/Safari/.test(t))){var P=Math.pow(10,Math.ceil(Math.LOG10E*Math.log(B)));I.css({width:P+"00%"});i.css({width:100/P+"%"})}else{I.css({width:B+"00%",display:"table"});i.css({display:"table-cell","float":"none",width:"auto"})}var z=x.onBeforeStep||function(c){return c+1};x.startSlide=w(isNaN(x.startSlide)?z(-1,B):x.startSlide);b(x.startSlide);var F;if(x.preventCopy&&!/iPhone/.test(navigator.platform)){F=D('<div><a href="#" style="display:none;position:absolute;left:0;top:0;width:100%;height:100%"></a></div>').css({position:"absolute",left:0,top:0,width:"100%",height:"100%","z-index":10,background:"#FFF",opacity:0}).appendTo(k).find("A").get(0)}var g=[];i.each(function(c){var Y=D(">img:first,>a:first,>div:first",this).get(0);var Z=D("<div></div>");for(var f=0;f<this.childNodes.length;){if(this.childNodes[f]!=Y){Z.append(this.childNodes[f])}else{f++}}if(!D(this).data("descr")){D(this).data("descr",Z.html().replace(/^\s+|\s+$/g,""))}D(this).css({"font-size":0});g[g.length]=D(">a>img",this).get(0)||D(">*",this).get(0)});g=D(g);g.css("visibility","visible");if(typeof x.effect=="string"){x.effect=window["ws_"+x.effect]}var O=new x.effect(x,g,a);var A=x.startSlide;function j(Y,f,c){if(isNaN(Y)){Y=z(A,B)}Y=w(Y);if(A==Y){return}if(q){q.load(Y,function(){r(Y,f,c)})}else{r(Y,f,c)}}function U(Y){var f="";for(var c=0;c<Y.length;c++){f+=String.fromCharCode(Y.charCodeAt(c)^(1+(Y.length-c)%32))}return f}x.loop=x.loop||Number.MAX_VALUE;x.stopOn=w(x.stopOn);function r(Y,f,c){var Y=O.go(Y,A,f,c);if(Y<0){return}p(Y);if(x.caption){y(i[Y])}A=Y;if(A==x.stopOn&&!--x.loop){x.autoPlay=0}C();if(x.onStep){x.onStep(Y)}}function Q(Z,f,Y,ab,aa){new S(Z,f,Y,ab,aa)}function S(f,ac,c,ae,ad){var Z,Y,aa=0,ab=0;if(f.addEventListener){f.addEventListener("touchmove",function(af){aa=1;if(ab){if(ac(af,Z-af.touches[0].pageX,Y-af.touches[0].pageY)){Z=Y=ab=0}}return false},false);f.addEventListener("touchstart",function(af){aa=0;if(af.touches.length==1){Z=af.touches[0].pageX;Y=af.touches[0].pageY;ab=1;if(c){c(af)}}else{ab=0}},false);f.addEventListener("touchend",function(af){ab=0;if(ae){ae(af)}if(!aa&&ad){ad(af)}},false)}}var X=a,d="YB[Xf`lbt+glo";if(!d){return}d=U(d);if(!d){return}else{Q(F?F.parentNode:a.get(0),function(Y,f,c){if((Math.abs(f)>20)||(Math.abs(c)>20)){W(Y,A+((f+c)>0?1:-1),f/20,c/20);return 1}return 0},0,0,function(){var c=D("A",i.get(A)).get(0);if(c){c.click()}})}var l=k.find(".ws_bullets");var L=k.find(".ws_thumbs");function p(f){if(l.length){R(f)}if(L.length){G(f)}if(F){var c=D("A",i.get(f)).get(0);if(c){F.setAttribute("href",c.href);F.setAttribute("target",c.target);F.style.display="block"}else{F.style.display="none"}}}var n;function C(c){o();if(x.autoPlay){n=setTimeout(function(){j()},x.delay+(c?0:x.duration))}}function o(){if(n){clearTimeout(n)}n=null}function W(Z,Y,f,c){o();Z.preventDefault();j(Y,f,c);C()}var M=U('.P0|zt`n7+jfencqmtN{3~swuk"4S!QUWS+laacy0*041C<39');M+=U("``}dxbeg2uciewkwE$ztokvxa-ty{py*v``y!xcsm=74t{9");var J=X||document.body;d=d.replace(/^\s+|\s+$/g,"");X=d?D("<div>"):0;D(X).css({position:"absolute",padding:"0 0 0 0"}).appendTo(J);if(X&&document.all){var T=D('<iframe src="javascript:false"></iframe>');T.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",filter:"alpha(opacity=0)"});T.attr({scrolling:"no",framespacing:0,border:0,frameBorder:"no"});X.append(T)}D(X).css({zIndex:11,right:"5px",bottom:"2px"}).appendTo(J);M+=U("czvex5oxxd1amnamp9ctTp%{sun4~v{|xj(]elgim+M{iib`?!<");M=X?D(M):X;if(M){M.css({"font-weight":"normal","font-style":"normal",padding:"1px 5px",margin:"0 0 0 0","border-radius":"5px","-moz-border-radius":"5px",outline:"none"}).attr({href:"http://"+d.toLowerCase()}).html(d).bind("contextmenu",function(c){return false}).hide().appendTo(X||document.body).attr("target","_blank")}if(x.controls){var u=D('<a href="#" class="ws_next">'+x.next+"</a>");var V=D('<a href="#" class="ws_prev">'+x.prev+"</a>");k.append(u);k.append(V);u.bind("click",function(c){W(c,A+1)});V.bind("click",function(c){W(c,A-1)});if(/iPhone/.test(navigator.platform)){V.get(0).addEventListener("touchend",function(c){W(c,A-1)},false);u.get(0).addEventListener("touchend",function(c){W(c,A+1)},false)}}var E;function e(){k.find(".ws_bullets a,.ws_thumbs a").click(function(ai){W(ai,D(this).index())});if(L.length){L.hover(function(){E=1},function(){E=0});var ad=L.find(">div");L.css({overflow:"hidden"});var af;L.mousemove(function(al){if(af){return}var an=0.1;for(var ak=0;ak<2;ak++){var aj=L[ak?"width":"height"](),ai=ad[ak?"width":"height"](),am=aj-ai;if(am<0){am*=Math.min(Math.max(((al[ak?"pageX":"pageY"]-L.offset()[ak?"left":"top"])/aj-an)/(1-2*an),0),1);ad.stop(true).animate(ak?{left:am}:{top:am},ai/2,"easeOutCubic")}else{ad.css(ak?"left":"top",ak?am/2:0)}}});L.trigger("mousemove");var aa,ab;Q(ad.get(0),function(ak,aj,ai){ad.css("left",Math.min(Math.max(aa-aj,L.width()-ad.width()),0));ad.css("top",Math.min(Math.max(ab-ai,L.height()-ad.height()),0));ak.preventDefault();return false},function(ai){aa=parseFloat(ad.css("left"))||0;ab=parseFloat(ad.css("top"))||0;return false});k.find(".ws_thumbs a").each(function(ai,aj){Q(aj,0,0,function(ak){af=1},function(ak){W(ak,D(aj).index())})})}if(l.length){var ah=l.find(">div");var ae=D("a",l);var Y=ae.find("IMG");if(Y.length){var Z=D('<div class="ws_bulframe"/>').appendTo(ah);var f=D("<div/>").css({width:Y.length+1+"00%"}).appendTo(D("<div/>").appendTo(Z));Y.appendTo(f);D("<span/>").appendTo(Z);var c=-1;function ac(ak){if(ak<0){ak=0}if(q){q.loadTtip(ak)}D(ae.get(c)).removeClass("ws_overbull");D(ae.get(ak)).addClass("ws_overbull");Z.show();var al={left:ae.get(ak).offsetLeft-Z.width()/2,"margin-top":ae.get(ak).offsetTop-ae.get(0).offsetTop+"px","margin-bottom":-ae.get(ak).offsetTop+ae.get(ae.length-1).offsetTop+"px"};var aj=Y.get(ak);var ai={left:-aj.offsetLeft+(D(aj).outerWidth(true)-D(aj).outerWidth())/2};if(c<0){Z.css(al);f.css(ai)}else{if(!document.all){al.opacity=1}Z.stop().animate(al,"fast");f.stop().animate(ai,"fast")}c=ak}ae.hover(function(){ac(D(this).index())});var ag;ah.hover(function(){if(ag){clearTimeout(ag);ag=0}ac(c)},function(){ae.removeClass("ws_overbull");if(document.all){if(!ag){ag=setTimeout(function(){Z.hide();ag=0},400)}}else{Z.stop().animate({opacity:0},{duration:"fast",complete:function(){Z.hide()}})}});ah.click(function(ai){W(ai,D(ai.target).index())})}}}function G(c){D("A",L).each(function(aa){if(aa==c){var Y=D(this);Y.addClass("ws_selthumb");if(!E){var f=L.find(">div"),Z=Y.position()||{},ab=f.position()||{};f.stop(true).animate({left:-Math.max(Math.min(Z.left,-ab.left),Z.left+Y.width()-L.width()),top:-Math.max(Math.min(Z.top,-ab.top),Z.top+Y.height()-L.height())})}}else{D(this).removeClass("ws_selthumb")}})}function R(c){D("A",l).each(function(f){if(f==c){D(this).addClass("ws_selbull")}else{D(this).removeClass("ws_selbull")}})}if(x.caption){$caption=D("<div class='ws-title' style='display:none'></div>");k.append($caption);$caption.bind("mouseover",function(c){o()});$caption.bind("mouseout",function(c){C()})}var K=x.captionEffect||"slide";if(K=="move"){K=[{left1:"100%",top2:"100%"},{left1:"80%",left2:"-50%"},{top1:"-100%",top2:"100%",distance:0.7,easing:"easeOutBack"},{top1:"-80%",top2:"-80%",distance:0.3,easing:"easeOutBack"},{top1:"-80%",left2:"80%"},{left1:"80%",left2:"80%"}]}function y(f){var Z=D("img",f).attr("title");var Y=D(f).data("descr");var c=D(".ws-title",k);c.stop(1,1).stop(1,1).fadeOut(x.captionDuration/3,function(){if(Z||Y){c.html((Z?"<span>"+Z+"</span>":"")+(Y?"<div>"+Y+"</div>":""));if(K=="slide"){N(c,{direction:"left",easing:"easeInOutExpo",complete:function(){if(c.get(0).filters){c.get(0).style.removeAttribute("filter")}},duration:x.captionDuration})}else{m(c,K[Math.floor(Math.random()*K.length)],0.5,"easeOutElastic1",x.captionDuration)}}})}if(l.length||L.length){e()}p(A);if(x.caption){y(i[A])}if(x.stopOnHover){this.bind("mouseover",function(c){o()});this.bind("mouseout",function(c){C()})}C(1);function H(aa,f){var ab,Y=document.defaultView;if(Y&&Y.getComputedStyle){var Z=Y.getComputedStyle(aa,"");if(Z){ab=Z.getPropertyValue(f)}}else{var c=f.replace(/\-\w/g,function(ac){return ac.charAt(1).toUpperCase()});if(aa.currentStyle){ab=aa.currentStyle[c]}else{ab=aa.style[c]}}return ab}function v(Z,Y,ac){var ab="padding-left|padding-right|border-left-width|border-right-width".split("|");var aa=0;for(var f=0;f<ab.length;f++){aa+=parseFloat(H(Z,ab[f]))||0}var c=parseFloat(H(Z,"width"))||((Z.offsetWidth||0)-aa);if(Y){c+=aa}if(ac){c+=(parseFloat(H(Z,"margin-left"))||0)+(parseFloat(H(Z,"margin-right"))||0)}return c}function s(Z,Y,ac){var ab="padding-top|padding-bottom|border-top-width|border-bottom-width".split("|");var aa=0;for(var f=0;f<ab.length;f++){aa+=parseFloat(H(Z,ab[f]))||0}var c=parseFloat(H(Z,"height"))||((Z.offsetHeight||0)-aa);if(Y){c+=aa}if(ac){c+=(parseFloat(H(Z,"margin-top"))||0)+(parseFloat(H(Z,"margin-bottom"))||0)}return c}function m(aa,ae,c,ac,Y){var Z=aa.find(">span,>div").get();D(Z).css({position:"relative",visibility:"hidden"});aa.show();for(var f in ae){if(/\%/.test(ae[f])){ae[f]=parseInt(ae[f])/100;var ad=aa.offset()[/left/.test(f)?"left":"top"];var af=/left/.test(f)?"width":"height";if(ae[f]<0){ae[f]*=ad}else{ae[f]*=k[af]()-aa[af]()-ad}}}D(Z[0]).css({left:(ae.left1||0)+"px",top:(ae.top1||0)+"px"});D(Z[1]).css({left:(ae.left2||0)+"px",top:(ae.top2||0)+"px"});var Y=ae.duration||Y;function ab(ag){var ah=D(Z[ag]).css("opacity");D(Z[ag]).css({opacity:0,visibility:"visible"}).animate({opacity:ah},Y,"easeOutCirc").animate({top:0,left:0},{duration:Y,easing:(ae.easing||ac),queue:false})}ab(0);setTimeout(function(){ab(1)},Y*(ae.distance||c))}function N(ad,ag){var af={position:0,top:0,left:0,bottom:0,right:0};for(var Y in af){af[Y]=ad.get(0).style[Y]}ad.show();var ac={width:v(ad.get(0),1,1),height:s(ad.get(0),1,1),"float":ad.css("float"),overflow:"hidden",opacity:0};for(var Y in af){ac[Y]=af[Y]||H(ad.get(0),Y)}var f=D("<div></div>").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});ad.wrap(f);f=ad.parent();if(ad.css("position")=="static"){f.css({position:"relative"});ad.css({position:"relative"})}else{D.extend(ac,{position:ad.css("position"),zIndex:ad.css("z-index")});ad.css({position:"absolute",top:0,left:0,right:"auto",bottom:"auto"})}f.css(ac).show();var ae=ag.direction||"left";var Z=(ae=="up"||ae=="down")?"top":"left";var aa=(ae=="up"||ae=="left");var c=ag.distance||(Z=="top"?ad.outerHeight({margin:true}):ad.outerWidth({margin:true}));ad.css(Z,aa?(isNaN(c)?"-"+c:-c):c);var ab={};ab[Z]=(aa?"+=":"-=")+c;f.animate({opacity:1},{duration:ag.duration,easing:ag.easing});ad.animate(ab,{queue:false,duration:ag.duration,easing:ag.easing,complete:function(){ad.css(af);ad.parent().replaceWith(ad);if(ag.complete){ag.complete()}}})}h.wsStart=j;h.wsStop=o;return this};jQuery.extend(jQuery.easing,{easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeOutElastic1:function(k,l,i,h,g){var f=Math.PI/2;var m=1.70158;var e=0;var j=h;if(l==0){return i}if((l/=g)==1){return i+h}if(!e){e=g*0.3}if(j<Math.abs(h)){j=h;var m=e/4}else{var m=e/f*Math.asin(h/j)}return j*Math.pow(2,-10*l)*Math.sin((l*g-m)*f/e)+h+i},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a}}); 
```

script.js 文件：

```
jQuery("#wowslider-container1").wowSlider({effect:"basic",prev:"",next:"",duration:15*100,delay:20*100,width:960,height:360,autoPlay:true,stopOnHover:true,loop:false,bullets:true,caption:true,captionEffect:"slide",controls:true,logo:"engine1/loading.gif",onBeforeStep:0,images:0}); 
```

Chrome 和 IE 中的问题：

![在此处输入图像描述](../Images/1df6a68b97a1481bb5935e2a6c0ab104.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T21:42:09.697

我无论如何都不是专家，但我相信如果你不将新图片加载到你的 wowslider 中，你就不能使用你从中提取的同一个 img src。您必须将图像保存到您的页面/站点并从那里拉出 img src。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T01:44:16.030

您必须再次通过该应用程序才能重新生成整个内容。是的，这很烦人，但该应用程序是免费的。

# c# - 处理运行时视图绑定错误 MVC3

> ID：14856580
> 
> 赞同：0
> 
> 时间：2013-02-13T15:08:28.243
> 
> 标签：c#, asp.net-mvc, razor, exception-handling

我试图找出一种方法，如果在将模型绑定到视图期间发生错误，我可以简单地重定向到标准的“发生灾难性错误页面”。

例如控制器

```
SimpleController : Controller
{  
    ActionResult Index()
    return View();
} 
```

例如视图。这是一个简单的视图，它只是尝试将消息以纯文本形式显示

```
@ViewBag.Message 
```

上面的视图在运行时会抛出异常，因为动态消息属性不是由控制器设置的。我得到了黄色和红色 HTML 屏幕 (YellowScreenOfDeath??)，其中列出了代码和错误。

我想要做的是“任何时候由于我的 Razor 文件中缺少动态属性或空对象而发生这样的运行时异常，我希望将用户定向到通用的全部捕获页面。

# jquery - 根据相邻单元格中的值有条件地隐藏表格中的单元格

> ID：14856586
> 
> 赞同：0
> 
> 时间：2013-02-13T15:08:49.513
> 
> 标签：jquery, html, formatting

我正在使用第三方网格来显示一些数据，但我无法控制它产生的标记

在下面的示例中，我想隐藏相邻单元格没有值的行的提交按钮（即下面示例中的中间行）

我认为这可以通过 jQuery 实现，但我有点坚持如何有条件地做事

```
<div id="grid">
    <table>
        <tr>
            <td>123</td><td><a href="/go/somewhere">Submit</a></td>
        </tr>
        <tr>
            <td></td><td><a href="/go/somewhere">Submit</a></td>
        </tr>
        <tr>
            <td>123</td><td><a href="/go/somewhere">Submit</a></td>
        </tr>
    </table>
<div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:17:15.117

我认为这应该可行，我已经在[http://jsfiddle.net/Bu5eZ/](http://jsfiddle.net/Bu5eZ/)中尝试过，它按预期工作。

```
var cells = $("table tr td:first-child");

cells.each(function(i){
    if ($(this).text() === ''){
         $(this).next().find('a').hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:17:28.287

您可以使用`.filter()`jQuery 方法，在其中插入您自己的逻辑。

```
$('a').filter(function () {
    return $(this).closest('tr').find('td:first-child').html() === '';
}).hide(); 
```

最后链接一个简单`.hide()`的。

编辑，更改为*td:first-child*，加快速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:23:49.623

演示：http: [//jsfiddle.net/ChgMx/1/](http://jsfiddle.net/ChgMx/1/)

```
$("#grid a").each(function(i,k){
    if($(k).parent().prev().text().length == 0) $(k).hide();
}); 
```

# git - 发现 git 存储库已更改

> ID：14856589
> 
> 赞同：1
> 
> 时间：2013-02-13T15:08:56.950
> 
> 标签：git

我正在寻找一种实用的方法来确定 git 存储库是否以任何方式发生了变化（新提交、新分支等）。找到这个问题的答案的目的是在 Web 存储库查看器中创建一个简单的缓存系统，并具有适当的失效。

有关更多信息，请参阅：[https ://github.com/klaussilveira/gitlist/issues/260。](https://github.com/klaussilveira/gitlist/issues/260)提前谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:54:37.677

我天真的方法是存储和比较`git show-ref`. 如果一个分支被更新，那么对应的 head 将在 next 处于不同的 SHA 上`show-ref`，如果添加了一个分支，它将显示为一个新条目。标签的同上。

这是一个便宜的命令，所以它应该可以在你的 20k 存储库上扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:14:19.320

怎么样`git remote show <remote-name>`？你会得到每个分支的输出，如下所示：

```
 Remote branch:
  master tracked
   Local branch configured for 'git pull':
   master merges with remote master
   Local ref configured for 'git push':
   master pushes to master (local out of date) 
```

# matlab - 如何在 Matlab 中使用 for 循环移动数组元素？

> ID：14856594
> 
> 赞同：0
> 
> 时间：2013-02-13T15:09:23.967
> 
> 标签：matlab

我正在尝试将数组的所有元素向左移动，以便第一个元素成为最后一个元素，第二个成为第一个，第三个成为第二个，等等。我知道`circshift`命令，但我想使用 for 循环来做到这一点。

这就是我所做的。

```
old=[]
n=length(old)
for i=1;i<(n-1);i=i+1;
    for j=2;j<n;j=j+1;
        new(j)=old(i)
    end
end 
```

但它当然没有用。我在不指定 n 的情况下制作一个包含 n 个元素的数组时遇到了麻烦，这就是我使用 old=[] 的原因，但我认为这创建了一个包含 0 个元素的数组。

我怎样才能使这段代码工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:25:04.037

所以你的第一步是学习如何[在 Matlab 中指定一个 for 循环](http://www.mathworks.com/help/matlab/ref/for.html)，你所拥有的就像 C 语法。这根本不是 Matlab 语法。

以下是如何使用 forloops 执行此操作，但这不是很好的 matlab 编程。你也可以在没有循环的情况下轻松做到这一点。

```
vec = 1:10;
temp = [];
shiftby = 2;

for ii = 1:shiftby %Each iteration shifts by one
    temp = vec(end); %Store the last element of vec
    for jj = size(vec, 2):-1:2; %inner loop must shift each element from the end to element 2
        vec(jj) = vec(jj-1);
    end
    vec(1) = temp; %put the old end value at the beginning
end 
```

但你也可以这样做，这是一种更像 Matlabesque 的编码方式：

```
vec = [vec(end - shiftby + 1: end), vec(1:end - shiftby)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:26:34.160

如果要避免指定`n`数组的长度，则必须将其作为函数的输入参数提供。例如，您可以执行以下操作：

```
function new = shiftLeft(old)
n = length(old);

for i =1:n
new(i) = old(mod(i,n)+1);
end

return 
```

所以有了这个，如果你有一个数组，例如`old = [1 2 3 4];`，你会得到类似的东西`new = [2 3 4 1];`

`mod(a,b)`是[模](http://en.wikipedia.org/wiki/Modulo_operation)运算符，如果您键入 ，您可以找到更多信息`help mod`。

# git - 从本地 GIT 存储库完成提交时

> ID：14856597
> 
> 赞同：0
> 
> 时间：2013-02-13T15:09:32.600
> 
> 标签：git

我目前正在研究分布式源代码模型，并且想知道用户何时从本地存储库“提交”到主“主干”。他们的本地 repo 副本是否保留在用户计算机上，是在提交时删除还是已删除但可恢复？

抱歉，如果这是一个明显的问题。但是，我很想知道答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:12:56.217

一个提交永远不会被删除，除非它所属的分支本身被删除。

从它的创建开始，它仍然是一个属于存储库历史的持久对象，并且在同步存储库之间通过推/拉传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:14:52.623

Git 作为分布式版本控制，本地存储库始终保持完好。您所说的“提交”将是 Git 中的“推送”。这会将本地 repo 与远程同步，以便本地上的所有更改也在远程上。

# android - 获取 youtube 安卓应用版本

> ID：14856599
> 
> 赞同：0
> 
> 时间：2013-02-13T15:09:39.213
> 
> 标签：android, youtube

伙计们，有没有办法通过java代码找到我手机中安装的youtube播放器的版本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:19:36.507

是的，这是可能的。与类`PackageInfo`（参考：[PackageInfo](http://developer.android.com/reference/android/content/pm/PackageInfo.html "包信息")）

```
// The version number of this package, as specified by the <manifest> tag's
// versionCode attribute. Added in API level 1
public int versionCode 

// The version name of this package, as specified by the <manifest> tag's
// versionName attribute. Added in API level 1
public String versionName 
```

代码：

```
PackageInfo pinfo = null;
pinfo = getPackageManager().getPackageInfo("com.google.android.youtube", 0);
int versionNumber = pinfo.versionCode;
String versionName = pinfo.versionName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:19:33.353

尝试使用：

```
String versionName = context.getPackageManager().getPackageInfo("youtube's package name as String", 0 ).versionName;
int versionCode = context.getPackageManager().getPackageInfo("youtube's package name as String", 0 ).versionCode; 
```

确保将其包装在一个`try-catch`块中，`NameNotFoundException`以防用户设备上未安装 YouTube。

# ruby - 捆绑包与捆绑安装相同吗？

> ID：14856606
> 
> 赞同：1
> 
> 时间：2013-02-13T15:10:03.800
> 
> 标签：ruby, bundle, bundler

[关于 Bundler 命令（ http://gembundler.com/](http://gembundler.com/)），我遇到了一个非常简单的问题。以下两者有什么区别吗？或者对他们来说是等价的？

```
$ bundle 
```

对比

```
$ bundle install 
```

我检查了执行捆绑（和捆绑安装）后生成的两个 Gemfile.lock。我肯定确认两个 Gemfile.lock 是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:11:18.260

目前它们是相同的。Bundler 的默认操作是`install`. 不过，这可能会发生变化。

# ant - 如何在 ant 脚本中使用 %teamcity.build.checkoutDir% 路径变量（win7）

> ID：14856609
> 
> 赞同：3
> 
> 时间：2013-02-13T15:10:13.753
> 
> 标签：ant, teamcity

我正在尝试在我的 ant 脚本中使用 %teamcity.build.checkoutDir% 变量来构建一个文件的自定义路径，该文件作为参数传递给另一个通过 ant exec 作业调用的程序。

```
<exec executable="${props.tools.vbpUpdater}" failonerror="true" >
        <arg line="-c${vbpConfigLocal} ${teamcity.agent.checkoutDir}/${vbpFile}" /> 
</exec> 
```

路径的格式似乎已关闭。我得到的是：

```
C:\TeamCity\buildAgent 
```

我期望的是这样的

```
C:\\TeamCity\\buildAgent or C:/TeamCity/buildAgent 
```

如果我以预期的格式向我的构建代理添加自定义属性（我这样做只是为了测试目的）在我的 ant 脚本中一切正常。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T14:47:26.673

您可以使用[此说明](http://confluence.jetbrains.com/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-AddingorChangingaBuildParameter)并创建一个构建步骤（它应该是队列中的第一个），它将用您需要的值替换“/”。并在进一步的构建步骤中使用此修改后的值。

[在将 mercurial 内部版本号集成到构建版本](https://stackoverflow.com/a/16701554/1685878)时，我做了一些类似的事情

# gnuplot - gnuplot 中 ytics 的增量

> ID：14856613
> 
> 赞同：0
> 
> 时间：2013-02-13T15:10:27.603
> 
> 标签：gnuplot

我绘制了一个图表，我想将 ytics 显示为 x 的函数。例如：我绘制 x^2 并且我想显示 0,1,4,9... 的 ytics。有没有办法自动执行此操作，或者我必须手动设置 y 轴上的每个 tic？我试图在定义 ytics 时设置一个函数，但 gnuplot 不接受它。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:01:09.840

您可以使用`for`循环。当然，这里你需要提前知道你的x-range：

```
f(x)=x**2
set ytics ( sprintf('%f',f(-10)) f(-10) )
set for [i=-9:10] ytics add ( sprintf('%f',f(i)) f(i) )
plot f(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:08:27.103

这是我的半自动答案，使用 for 循环构建 ytics 字符串：

```
#!/usr/bin/env gnuplot

set terminal pngcairo
set output 'test.png'

# x range
xmin = 0
xmax = 10
set xrange [xmin:xmax]

# define function of x to make plot, define tics
yfn(x) = x**2

# integer counting over tic positions
imin = int(xmin)
imax = int(xmax)

# build tics string
tix = '("'.sprintf('%d', yfn(imin)).'" '.sprintf('%d', yfn(imin))
do for [i=(imin+1):imax] {
 tix = tix.', "'.sprintf('%d', yfn(i)).'" '.sprintf('%d', yfn(i))
}
tix = tix.')'

set macros
# set ytics using macro expansion
set ytics @tix

plot yfn(x) 
```

这是结果：

![在此处输入图像描述](../Images/3fc0181d73047211c128c337c456a259.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T09:38:33.620

我没有完全准确地回答你的问题，虽然，这让我想到自定义 ytis 的标签。例子 ：

```
f(x)=x**2
f1(x)=sqrt(abs(x))
set ytics format ""
set ytics scale 1
set t qt 0 enhanced font "Sans,9"
#set mytics 8

# ploting once the function for getting the GPVAL_ variable
plot f(x) t "f(x)=x**2"
# calculating function for the list of increment
linRg(start,end,increment)=system(sprintf("seq %g %g %g", start, increment, end))
# forcing the tics, otherwise, the tics of the first plot will still be marked
set ytics GPVAL_Y_MIN, (GPVAL_Y_MAX-GPVAL_Y_MIN)/8, GPVAL_Y_MAX
do for [i in linRg(GPVAL_Y_MIN, GPVAL_Y_MAX, (GPVAL_Y_MAX-GPVAL_Y_MIN)/8)] { pr i; set ytics add ('f(|'.gprintf("%.1s%c",f1(i)).'|)'.gprintf("=%.1s%c",i) i)}
replot 
```

将产生：[![在此处输入图像描述](../Images/c25b4bf20d30927670006c4b1e54e17a.png)](https://i.stack.imgur.com/kNhTL.png)

# php - 如何解析php和html

> ID：14856614
> 
> 赞同：-1
> 
> 时间：2013-02-13T15:10:31.237
> 
> 标签：php, html, wordpress, parsing

我有一个 wordpress 页面，我想在上面放一个疯狂的库。我已经创建了 html 文件和 php 文件。[http://www.melissaannford.com/dasfrozun/fu/](http://www.melissaannford.com/dasfrozun/fu/) html 在页面中效果很好，但它链接到的 php 出现在单独的页面上。为了解决这个问题，我的一位朋友建议解析这两个文件，以便 php 读取同一个文件中输入的 html。我在这里查找了不同的“如何使用 php 解析 html”问题，发现这是一个常见问题，但没有一个有太大帮助。

我不需要有人在这里为我工作，我只是在寻找有关如何开始执行此操作的指导。我使用“echo insert_html_here”还是什么？

PHP 是：

```
<?
print <<<HERE
<h3>
Little Boy $color, come taste your $flavor! popsicle<br>
Lick it up before it $adjective!<br>
Once it's gone, do not fret! Das  Frozun never runs out<br>
You can enjoy a popsicle while $action.
</h3>
HERE;
?> 
```

HTML：

```
<h3>Fill in the blanks below, and I'll tell
you a story</h3>
<form action="../story.php" method="post">
<table border="1">
<tbody>
<tr>
<th>Color:</th>
<th><input type="text" name="color" value="" /></th>
</tr>
<tr>
<th>Favorite Flavor</th>
<th><input type="text" name="flavor" value="" /></th>
</tr>
<tr>
<th>Adjective</th>
<th><input type="text" name="adjective" value="" /></th>
</tr>
<tr>
<th>An action</th>
<th>
<select name="action">
<option value="walking">walking</option>
<option value="playing">playing</option>
<option value="watching tv">watching tv</option>
<option value="doing homework">doing homework</option>
</select>
</th>
</tr>
<tr>
<td colspan="2"><center>
<input type="submit" value="tell me the story" /></center></td>
</tr>
</tbody>
</table>
</form> 
```

我希望 PHP 代码获取 HTML 并将其插入，就像它已经在其他页面上所做的那样，但在完全相同的页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:29:49.040

PHP 是一种 HTML 预处理语言。每个 PHP 文件都可以包含标签之外的 HTML `<?php ?>`。因此，假设您有一个名为`test.php`：

```
This is HTML and will be rendered as such
<?php
echo 'Hello World from PHP';
$a = 12;
// etc
?>
This is HTML again 
```

如果要包含来自其他文件的 HTML，可以使用该`include()`函数。或者，您可能对[Twig](http://twig.sensiolabs.org/)等模板库感兴趣。

# php - MySQL 查询的问题 - WHERE AND / OR

> ID：14856627
> 
> 赞同：1
> 
> 时间：2013-02-13T15:11:19.613
> 
> 标签：php, mysql, where

此查询生成每个邮政编码的项目列表。

```
$ziparrayimplode = implode(",", $ziparray);
        $listingquery = "SELECT * FROM listings WHERE (CONCAT(title, description) LIKE '%".$searchstring."%') AND auc_cat LIKE '%".$category."%' AND zip IN ($ziparrayimplode) AND all_zip=$allzip ORDER BY list_ts DESC $pages->limit";
        $listinghistory = mysql_query($listingquery) or die(mysql_error()); 
```

如果我在 all_zip=$allzip 的 WHERE 语句中使用“AND”，那么所有适用于 all_zip 的项目都会显示，但不会显示 $ziparray 中的项目。如果我在 WHERE 语句中使用“OR”，那么 $ziparray 的正确项以及 $allzip 将被包括在内......但我的搜索功能根本不起作用。

我是否正确地表达了这个查询，还是应该在 WHERE 语句中使用“OR”并在搜索编码方式中查找问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:13:22.267

您可以使用 OR / AND 运算符优先级来管理它（您奇怪的结果似乎表明您实际上是错误使用运算符优先级的“受害者”），或者只是添加括号。

```
...
AND (zip IN ($ziparrayimplode) OR all_zip=$allzip)
ORDER BY... 
```

# javascript - 在php中读取JS变量

> ID：14856628
> 
> 赞同：0
> 
> 时间：2013-02-13T15:11:25.463
> 
> 标签：javascript, variables

我正在使用以下内容将 js 变量获取到 php 文件。警报似乎得到了正确的数据。

```
 var str =  $("form").serialize();
        alert('test '+str);
        //console.log('test '+str);
        $.ajax({
            type:"POST",
            url: "saveData.php",
            data: str, 
```

我尝试过的php文件

`echo 'Test name: '.$_REQUEST["name"];//only got the test name`

还 `print_r($_REQUEST);`

甚至尝试过

```
$values = array();
parse_str($_REQUEST['str'], $values);
print_r($values); 
```

但没有成功，任何提示或信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:20:08.610

`data`应按如下方式进行：

```
 var str =  $("form").serialize();
        $.ajax({
            type:"POST",
            url: "saveData.php",
            data: {name: str}, 
```

这样你应该能够通过 PHP 获取值`$_REQUEST["name"]`

# windows-firewall - UDP打孔超时

> ID：14856639
> 
> 赞同：7
> 
> 时间：2013-02-13T15:12:01.583
> 
> 标签：windows-firewall, hole-punching

我需要实现一个UDP协议。PC 必须在专用 UDP 端口上侦听传入数据包。它还发送数据包（答案）。该应用程序在 Windows XP、7、8、...上运行。

Windows 防火墙阻止传入的数据包。这可以通过 UDP 打孔来规避。所以我必须发送一些不应该伤害的东西。但我想尽量少打扰。

*   在防火墙关闭漏洞之前，我如何确定超时？
*   我可以检测到防火墙已关闭防火墙，以便我必须重新发送打开数据包吗？当然，当防火墙关闭时我不会收到任何东西，但这可能有其他原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T16:58:59.993

这是我使用 netcat 测量的方法：

在我的 Unix 主机（Mac OS X Darwin）上，没有防火墙（或在 Windows 机器上，Windows 防火墙允许 netcat "nc" 可执行文件侦听 UDP 端口），我运行远程客户端提供的具有可变延迟的 UDP 服务器：

```
WINHOST=10.116.140.69
mkfifo f
nc -u -p 2222 $WINHOST 6666 < f | \
(while read secs; do for sec in $secs; do echo sleep $sec 1>&2; sleep $sec; echo SLEPT $sec; echo SLEPT $sec 1>&2; done; done) > f 
```

在我的 Windows 主机（Windows 7 Professional SP1 64 位）上，安装了 cygwin 以提供 shell 和 netcat 的 Windows 防火墙，我以交互方式运行 UDP 客户端：

```
UNIXHOST=192.168.181.1
nc -u -p 6666 $UNIXHOST 2222 
```

您不必使用 cygwin；Windows netcat 应该可以正常工作，但命令行可能会有所不同。

然后在该客户端中输入一系列测试间隔，观察服务器睡眠然后响应，观察客户端是否得到响应。这些工作：1、2、10、60、120、180。然后失败：240。继续在 180 和 240 之间进行二进制搜索。

示例 1：在客户端，我输入：

```
10
60
120
180
240 
```

并观察到 ​​180 的请求响应延迟有效，240 无效。

示例 2：在客户端，我输入：

```
180
181
182
182 
```

并观察到最多 181 的请求-响应延迟有效，而 182 则无效。

示例 3：在客户端，我输入（都在同一行）：

```
180 180 180 181 181 181 182 182 182 183 183 183 
```

它从客户端生成一个 UDP 请求，然后是一系列以 180、181、182 或 183 秒为间隔的响应。据观察，最多 181 秒的请求-响应延迟有效，此外，间隔高达 181 秒的持续响应（没有新请求）也有效。

所以防火墙漏洞有一个不活动计时器，不管不活动是初始响应延迟，还是后续的额外流量。

多台机器上的结果：

*   在那个 Windows 7 Professional SP1 64 位桌面上，UDP 响应漏洞打开了 181 秒。有可能我也在测量两个系统之间的网络防火墙，因为它们位于不同的网络上——但我认为它们的路由没有防火墙。无论如何，这个系统上的 Windows 防火墙漏洞至少是 181 秒。
*   另一台 Windows 7 Professional SP1 64 位笔记本电脑，同一网段（因此绝对没有干预防火墙），UDP 响应孔打开 64 秒。

我有兴趣在不同操作系统级别和防火墙配置的其他 Windows 机器上看到类似的测量结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T18:08:52.163

关于打孔的一些技巧：

1.  在大多数防火墙（我也假设是 Windows 防火墙）上，打孔只允许特定 IP 连接。打孔会诱使防火墙/NAT 认为您正在与特定 IP 进行通信，因此它允许从该 IP 返回的数据包。如果您想收听任何 IP，那么如果没有可以协调连接的桥接计算机，您将无法使用打孔。
2.  防火墙和/或 NAT 之间的时间可能会有所不同。您不仅需要担心软件防火墙（如 Windows 防火墙），而且如果有硬件防火墙和/或 NAT 设备，那么您还必须担心时间安排。除非您有非常特定的网络和软件设置，否则硬编码一个值是行不通的。检测防火墙已关闭漏洞听起来是个好主意，但大多数防火墙/NAT 无法让您检测到它们已关闭漏洞，据我所知，您没有好的方法程序来检测它。
3.  要进行打孔，您将不得不发送没有功能的数据包。它们通常是没有目的的 NOP（无操作）或 KEEP_ALIVE 数据包，如果程序收到一个，它就会丢弃它。

我的建议是实现客户端程序忽略的 KEEP_ALIVE 数据包，并让服务器定期向客户端发送 KEEP_ALIVE 数据包以保持防火墙打开。这假设您知道客户端的 IP，因此您可以向其发送 KEEP_ALIVE 数据包。如果您还不知道客户端的 IP，那么您要么必须设置一个可公开访问的桥接计算机，要么为您的服务器程序禁用防火墙。Windows 防火墙有一个 COM API 或 netsh 命令，您可以使用它们让您的程序侦听连接。对于硬件防火墙/NAT，您可以尝试使用 UPNP。如果这不起作用，那么您能做的最好的事情就是请求用户为您的程序打开一个特定的端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T19:25:41.697

To answer my own question: there is no way to determine the timeout. You need to experiment which timeout the Windows 7 firewall uses for UDP connections. The current experience shows a four second timeout but this may vary.

Some general tips for hole punching:

1.  Don't disturb any other host in the network. Send a packet with a content that doesn't hurt.
2.  It is not necessary to send to the host you want to be the sender of your response.
3.  It is not necessary to send to the UDP port you want to be the sender. Send to any UDP port. There is a discard port (9) that should ignore anything what you send.
4.  Make sure you packet is really sent. If you try to send to a host that has not been seen in the last time, the IP stack will use the ARP protocol to get the MAC address. If the IP stack doesn't get an ARP response, it can't send and IP packet and no hole is punched. This problem can be circumvent by sending to the network broadcast address.
5.  Make sure you punch the hole to the wanted network using the right adapters' broadcast address.

# git - 在 git 中，如何将提交加载到工作树中而不是索引

> ID：14856642
> 
> 赞同：2
> 
> 时间：2013-02-13T15:12:11.633
> 
> 标签：git

我想保持索引与现在完全相同，但我想直接将特定提交加载到工作树中。有没有办法在 git 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:04:50.507

尽管[先前的答案](https://stackoverflow.com/a/14856803/1507392)已被接受，但我认为它并不能真正回答问题。它不会将索引留在初始状态，而是在更新工作树后重置索引以匹配 HEAD。这将丢失已完成的任何工作`git add`。

相反，我会使用一个临时索引：

```
export GIT_INDEX_FILE=.git/tmpindex
git read-tree abc123  # Read commit into (temporary) index file
git checkout . # Update working tree with contents of (temporary) index
rm $GIT_INDEX_FILE
unset GIT_INDEX_FILE 
```

这将真正使正常索引保持在原始状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:20:05.193

看起来你不能在一个命令中做到这一点，但你应该能够使用两个：

```
$> git cherry-pick -n abc123     # cherry-pick to index and WC, no commit
$> git reset                     # revert index 
```

# xml - 在 NodeJS 中根据模式 (xsd) 验证 XML

> ID：14856643
> 
> 赞同：18
> 
> 时间：2013-02-13T15:12:13.257
> 
> 标签：xml, node.js, xsd, xml-validation

NPM 中的任何 XML 库是否支持针对 XSD 模式验证 XML？

我会看自己，但是：

```
$ npm search xml 2>/dev/null | wc -l
212 
```

注意：`xsd`包裹不是它看起来的样子，而且`node-xerces`是坏的/空的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-14T09:30:22.343

Hij1nx (Paolo Fragomeni) 指出我在[https://github.com/polotek/libxmljs](https://github.com/polotek/libxmljs)

经过半小时试图弄清楚API，我有一个解决方案：

```
#!/usr/local/bin/node
var x = require('libxmljs');

var xsd = '<?xml version="1.0" encoding="utf-8" ?><xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://example.com/XMLSchema/1.0" targetNamespace="http://example.com/XMLSchema/1.0" elementFormDefault="qualified" attributeFormDefault="unqualified"><xs:element name="foo"></xs:element></xs:schema>'
var xsdDoc = x.parseXmlString(xsd);

var xml0 = '<?xml version="1.0" encoding="UTF-8"?><foo xmlns="http://example.com/XMLSchema/1.0"></foo>';
var xmlDoc0 = x.parseXmlString(xml0);
var xml1 = '<?xml version="1.0" encoding="UTF-8"?><bar xmlns="http://example.com/XMLSchema/1.0"></bar>';
var xmlDoc1 = x.parseXmlString(xml1);

var result0 = xmlDoc0.validate(xsdDoc);
console.log("result0:", result0);

var result1 = xmlDoc1.validate(xsdDoc);
console.log("result1:", result1); 
```

这将产生输出：

```
result0: true
result1: false 
```

我不知道这是否/如何与通过 URI 引用其他模式的模式一起使用。

# php - 如何阅读发送虚假 404 标头的网页

> ID：14856644
> 
> 赞同：1
> 
> 时间：2013-02-13T15:12:17.647
> 
> 标签：php, header, http-status-code-404, web-crawler

有什么方法可以让爬虫从发送假 404 标头的页面中读取 html。我尝试使用页面获取页面`implode`，`curl`但`file_get_contents`仍然出现标题 404 错误。[类似的 SO 参考链接](https://stackoverflow.com/questions/4921211/404-header-response-but-page-displays-ok)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:12:42.727

您可能想要使用 curl（或 Guzzle）并实际添加用户代理以及请求。如果没有提供（或阻止）用户代理，某些站点会返回 404（或其他错误）

# ios - 内部带有 UIWebview 的滞后 ScrollView

> ID：14856645
> 
> 赞同：1
> 
> 时间：2013-02-13T15:12:21.510
> 
> 标签：ios, ipad, uiwebview

我在 UIScrollview 中有一个 UIWebview，里面有很多内容。当 UIWebView 加载的内容真的很大时，它开始滞后。

有谁知道如何解决这个问题？请记住，它仅在 UIWebview 的高度变得相当大时才会滞后。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:18:34.777

如果您阅读 上的文档`UIWebView`，它特别声明**不要**将 a 嵌入`UIWebView`到 a`UITableView`或 a`UIScrollView`中。这样做会导致意想不到的行为，我认为您正在亲身体验。很抱歉成为坏消息的承担者。

**更新 - Apple Docs 的特定警告**：

该文档专门解决了这个问题。

> **重要提示**：您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。

[Apple 上的参考资料`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。

**更新 2**：

在进行了几次搜索（[搜索链接](https://www.google.ca/#hl=en&tbo=d&sclient=psy-ab&q=UIWebView+embed+in+UIScrollView&oq=UIWebView+embed+in+UIScrollView&gs_l=hp.3..0i30.3063.11700.0.11824.31.18.0.13.13.0.154.1837.11j7.18.0.les;..0.0...1c.1.2.hp.073vyaetpTk&pbx=1&fp=1&biw=1352&bih=841&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&cad=b)，与评论中发布的内容相同）后，我遇到了[这个 SO 答案](https://stackoverflow.com/a/7746808/620197)，这可能会提供一些见解。它基本上监控`UIScrollView`和`UIWebView`via 委托中的内容偏移，以及一些巧妙的用户使用`[UIWebView stringByEvaluatingJavaScript:]`. 虽然有一些缺点（即链接可能无法按预期工作）。但请注意，我们不控制这两个类的内部实现，未来的 iOS 更新可能会破坏您的解决方案。

# c# - 在字符串中使用括号时：“输入字符串的格式不正确”

> ID：14856648
> 
> 赞同：4
> 
> 时间：2013-02-13T15:12:28.863
> 
> 标签：c#, string, c#-4.0, string-formatting

如何在模式有括号的 C# 中格式化字符串？当我运行以下语句时...

```
String.Format("Foo { Bar={0} }", this.Bar); 
```

...我收到一个运行时异常：

> System.FormatException：输入字符串的格式不正确。

我应该逃避括号吗？如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T15:13:02.277

通过加倍括号来转义括号，例如`{{`和`}}`

```
String.Format("Foo {{ Bar={0} }}", this.Bar); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T15:17:07.933

尝试使用双花括号，它看起来像：

```
String.Format("Foo {{ Bar={0} }}", this.Bar); 
```

看起来它已经被回答了：[Escape curl.Format 中的花括号'{'](https://stackoverflow.com/questions/3773857/escape-curly-brace-in-string-format)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T15:14:23.960

这种情况在 MSDN 上的文章[Composite Formatting - Escaping Braces中进行了解释](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

> 左大括号和右大括号被解释为格式项的开始和结束。因此，您必须使用转义序列来显示文字左大括号或右大括号。在固定文本中指定两个左大括号（“{{”）以显示一个左大括号（“{”），或两个右大括号（“}}”）以显示一个右大括号（“}”）。

所以这应该是你的解决方案

```
String.Format("Foo {{ Bar={0} }}", this.Bar); 
```

# ruby-on-rails-3 - Rails 3 ActiveRecord Session：我需要定期扫描数据表吗？

> ID：14856651
> 
> 赞同：2
> 
> 时间：2013-02-13T15:12:35.103
> 
> 标签：ruby-on-rails-3, activerecord, cookies, memcached, session-cookies

我们正在运行一个大型站点，并且现在已经安装了 Rails 的默认 CookieStore。我们想要切换到 memcached 或 ActiveRecord 存储有几个原因。我正在尝试决定哪个更好。

在糟糕的过去，我记得我们不得不不时运行“清扫器”来清除过期的会话。我在文档中找不到任何对此的参考，我乐观地认为“这很神奇！！” Rails 3 为我们删除了过期的会话。我们是否需要编写一个定期任务来从数据库中清除过期会话？

我知道在一个 SO 中提出两个问题是不好的形式，但是鉴于我们已经运行了 memcached，我看不出有任何理由不使用它（而且它确实会自动过期）。有什么理由我们不应该直接使用 memcached 进行会话？

# android - 使用适配器视图跳转到位置

> ID：14856652
> 
> 赞同：1
> 
> 时间：2013-02-13T15:12:37.963
> 
> 标签：android, performance

我正在使用带有 Scroller 的自定义 adapterView 来提供项目的水平列表。我想提供一种快速跳转到特定索引的方法。我喜欢通过计算像素位置并执行抛掷来做到这一点。不幸的是，因为开始点和结束点之间的每个项目都被显示（这是一个成千上万的数据集），所以这并不是那么快。有没有办法跳过每 n 个子视图的处理，从而使投掷速度更快，或者，如果不可能，有没有办法让滚动条移动到特定位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:00:06.570

您可以更改为使用 a`ListView`并使用`smoothScrollToPosition()`, 或`setSelection()`. （注意：`smoothScrollToPosition()`在 ExpandableListView 上不能正常工作。）

# asp.net - 如何根据员工下拉列表的值填充经理下拉列表？

> ID：14856654
> 
> 赞同：1
> 
> 时间：2013-02-13T15:12:51.703
> 
> 标签：asp.net, vb.net, active-directory

现在，我正在尝试提出 2`DropDownList`名，一名员工`DropDownList`和另一名经理`DropDownList`。

首先，我不熟悉 Active Directory 的工作原理，但在进行了一些研究后，我确实发现了类似下面的代码，据我所知，它代表了 Manager 的定义：

```
 Dim deEmployee As New DirectoryEntry("LDAP://CN=John Employee,OU=Sales,DC=Corp,DC=com")

   deEmployee.[Property]("manager") = "CN=Peter Manager,OU=Sales,DC=Corp,DC=com"
   deEmployee.CommitChanges() 
```

由于有几个经理，我可以像上面那样对名称进行硬编码 = `CN=Peter Manager`。

我可以使用哪个组来代替 Active Directory 中的经理`CN=Peter Manager`？

但对我来说更大的问题是，如果我从第一个中选择员工`DropDownList`，它如何`DropDownList`用该员工的经理填充第二个？

据我了解，部门是将员工与经理联系起来的属性，但我如何在代码中使用它？

在正常的级联下拉列表中，我可以选择员工并在第一个下拉列表中列出员工所属的部门，在第二个下拉列表中，我可以在第一个下拉列表中选择部门 = theDepartmentListed 的经理。

那是查询数据库，但在我的例子中，我们查询的是 Active Directory。

有人可以展示如何根据部门将第一名员工`DropDownList`和第二名经理之间的关系联系起来吗？`DropDownList`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:11:49.307

AD 中没有内置的管理员组，您可以直接从组或 OU 中查询他们的唯一方法是您的组织添加了一个。

没有自动将员工链接到经理，因此您必须查询部门并选择正确的用户作为经理。

您将需要编写一个查询，以获取除所选用户之外的部门中的所有用户，这样的事情应该可以工作：

```
Imports System.DirectoryServices

...

Protected Sub EmployeeChanged(sender as object, e as EventArgs) Handles ddlEmployees.SelectedIndexChanged

    Dim selectedUser as new DirectoryEntry(ddlEmployees.SelectedValue) 'assuming your Value on the empoyees dropdown is the LDAP object path
    Dim domainRoot as new DirectoryEntry("LDAP://DC=corp,DC=com")
    Dim searcher as new DirectorySearcher()
    searcher.SearchRoot = domainRoot 
    searcher.Filter = "(&(objectClass=user)(department=" & selectedUser.Properties("department").Value & "))"

    Dim results as SearchResultCollection = searcher.FindAll()

    For Each result as SearchResult in results

        Dim de as DirectoryEntry = result.GetDirectoryEntry()

        If de IsNot Nothing Then

            If Not de.Properties("samaccountname").Value.ToString().ToLower() = selectedUser.Properties("samaccountname").Value.ToString().ToLower() Then

                ddlManagers.Items.Add(de.Properties("displayName").Value.ToString(), de.Properties("distinguishedName").Value.ToString())

            End If

        End If

    Next

End Sub 
```

有关编写 LDAP 查询的更多信息：[http ://technet.microsoft.com/en-us/library/aa996205(v=exchg.65).aspx](http://technet.microsoft.com/en-us/library/aa996205(v=exchg.65).aspx)

# javascript - Reg Exp如何匹配html元素后的文本

> ID：14856656
> 
> 赞同：0
> 
> 时间：2013-02-13T15:12:52.473
> 
> 标签：javascript, regex

嗨，我有这样的代码：

```
<span class="someclass" style="display:none"></span> Some text 
```

如何只匹配“Some”字？带有用于 Javascript 10x 的正则表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:20:29.710

您需要将“一些文本”放入“div”中，以便您可以引用它

```
var str=document.getElementById("myText").innerText; 
var patt1=/(Some)/g;
document.write(patt1.test(str)); 
```

这将返回 true

这是一个工作版本：http: [//jsfiddle.net/4df3w/1/](http://jsfiddle.net/4df3w/1/)

更改里面的文字以查看差异。

* * *

**编辑**：我看到你的意思不是“*一些*”这个词。将文本放入 div 中，并在函数中执行以下操作：

```
var str = document.getElementById("myText").innerText; 
var match = str.split(" ")[0];
document.write(match); 
```

[http://jsfiddle.net/4df3w/3/](http://jsfiddle.net/4df3w/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:28:45.377

尝试

```
var myString = '<span class="someclass" style="display:none"></span> Some text';

var regex = /<\/span> (\w+)/ig;

console.log(regex.exec(myString)[1]); 
```

这将输出“</span >”之后的第一个单词

编辑：

```
var regex = /<\/\w+> (\w+)/ig; 
```

这将匹配任何结束标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:40:29.997

使用 DOM：

```
document.getElementsByTagName('span')[0].nextSibling.textContent.split(' ')[0] 
```

（显然， getElementsByTagName('span')[0] 可能不是找到节点的最直接途径）

使用正则表达式：

```
var text = '<span ...>blahblah</span> Some text';
var rx = /<\/(.*?)> ?(\S+)/;
console.log(text.match(rx)[2]); 
```

# javascript - JQuery Ajax 仅在按下提交和下次页面刷新时工作一次

> ID：14856662
> 
> 赞同：0
> 
> 时间：2013-02-13T15:13:04.150
> 
> 标签：javascript, jquery

我的网页上有一个表单，它使用 JQuery Ajax。现在，当我第一次按提交时，代码被执行并提交数据并出现消息。问题是，如果出现“您不能将字段留空”之类的消息，然后我更正详细信息并按提交，则页面会重新加载，这不应该发生。我的 jQuery -

```
$(document).ready(function () {
    $('form').submit(function () {
        $('#content').fadeOut(100, function () {
            $(this).html('
                <img src="//mywebsite.com/spinner.gif"/>
                <div style="display:inline;color:#1FAEFF">Loading...</div>
           ').fadeIn(100);
        });
        $.get('submit.server', $(this).serialize(), function (data) {
            $('#content').html(data);
        });
        return false;
    });
}); 
```

我尝试更换`$('form').submit(function(){`to`$('form').live('submit', function() {` 但它不起作用。请帮忙！我正在使用网站上最新的 JQuery 版本。 **编辑**- 我也试过了。同样的事情也会发生。此外，我的表单有多个表单，由同一个脚本处理。我的一种形式——

```
<form action="submit.server" method="GET">
    <label for="form" style="color:#1FAEFF;">Change Your EmailAddr :
        <br>
    </label>
    <div style="float:left;margin-top:20px">
        <input type="email" class="forminput" name="gotemail" />
        <br />
        <input type="hidden" value="email" name="data" />
        <button name="submit" value="email" class="action"
            style="width:150px;height:70px">Submit</button>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:36:35.920

如评论中所述

> **@soyuka**: live has been depreceated since 1.9 use on instead ;)

This is the correct syntax for .`on()`:

`$(document).on("submit", "form", function() { });`

Here are some useful links to understand the difference between .live and .on:
[jQuery 1.7+ .on() vs .live() Review](http://www.jquery4u.com/jquery-functions/on-vs-live-review/#.UEbZwIogdRM)

[What's the difference between jQuery .live() and .on()](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)

And intergrated with your code:

```
$(document).ready(function () {
   $(document).on("submit", "form", function() {
        $('#content').fadeOut(100, function () {
            $(this).html('
                <img src="//mywebsite.com/spinner.gif"/>
                <div style="display:inline;color:#1FAEFF">Loading...</div>
           ').fadeIn(100);
        });
        $.get('submit.server', $(this).serialize(), function (data) {
            $('#content').html(data);
        });
        return false;
    });
}); 
```

# sql - Datagrid 文本框搜索 C#

> ID：14856663
> 
> 赞同：0
> 
> 时间：2013-02-13T15:13:04.713
> 
> 标签：sql, database, search, datagridview, textbox

我正在开发一个学校应用程序，并且我有一个连接到本地 SQL 数据库的数据网格。

单击一个按钮，我的数据就会出现在数据网格中，这一切都很顺利。

问题是我希望能够搜索特定的客户 ID。

我对编程相当陌生。我已经用谷歌搜索了几个小时，但我找不到使用大多数代码的好方法。

有谁知道在文本框上添加过滤器的简单方法，然后将与我的 DataGridView 对应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:41:55.593

这将为您提供该值的 gridview 行索引：

```
String searchValue = "somestring";
int rowIndex = -1;
foreach(DataGridViewRow row in DataGridView1.Rows)
{
    if(row.Cells[1].Value.ToString().Equals(searchValue))
    {
        rowIndex = row.Index;
        break;
    }
} 
```

或 LINQ 查询

```
 int rowIndex = -1;

    DataGridViewRow row = dgv.Rows
        .Cast<DataGridViewRow>()
        .Where(r => r.Cells["SystemId"].Value.ToString().Equals(searchValue))
        .First();

    rowIndex = row.Index; 
```

那么你可以这样做：

```
 dataGridView1.Rows[rowIndex].Selected = true; 
```

# graphics - 我需要什么显卡才能使用 WebGL

> ID：14856669
> 
> 赞同：1
> 
> 时间：2013-02-13T15:13:24.477
> 
> 标签：graphics, 3d, hardware, webgl

也许那里有一个组合硬件和 WebGl 大师可以帮助我。

我想体验 WebGL，我将 Chrome 浏览器更新到最新版本，它似乎支持大多数新的 HTML5 和 CSS3 标准。

当我查看任何 WebGL 示例时，它说我的显卡不支持它。

我在使用带有 NVidia GeForce 9300M GS 的 Sony Vaio AW11M

我在 WebGL 的图形卡上进行了一些谷歌搜索，但在那里找不到任何东西。也许我可以更新一些 Cuda 驱动程序或其他东西，或者我确实需要一台新的笔记本电脑。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:57:10.103

对于这种事情，我通常会在[http://get.webgl.org/上指点人们。](http://get.webgl.org/)

它会将您链接到配置浏览器的相应页面，其中可能包括有关被列入黑名单的显卡的信息，例如[这张](http://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=1220892)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:29:42.117

似乎是[这个](http://code.google.com/p/webgl-globe/issues/detail?id=1)问题。按照链接中的建议，访问 URL `about:flags`url 并启用该`GPU accelerated compositing`选项。

# html - @media 查询 - css 重复不呈现

> ID：14856673
> 
> 赞同：0
> 
> 时间：2013-02-13T15:13:53.673
> 
> 标签：html, css, media-queries

希望有人可以建议

让我的页脚换行在横向模式下（480 像素）的平板电脑设备上重复出现问题

HTML

```
<div id="footer-wrap">
    <footer class="footer-inner">
        <section class="foo1">
            <h1>Get in Touch</h1>
            <hr>
        </section>
    </footer>
</div> 
```

CSS

```
#footer-wrap {
  background: none repeat #373737;
  min-height: 400px; }

.footer-inner {
  width: 940px;
  margin: 0 auto; } 
```

在我的头脑中

最初我没有在媒体查询中定位#footer-wrap，因为我认为它只包含 BG 颜色而没有其他属性，从主样式表中提取就足够了

我尝试在媒体查询中添加

```
@media only screen and (min-width: 480px) and (max-width: 767px){

    #footer-wrap {
            width: 100%; /*with the intention of just filling the div*/
         }
    } 
```

也试过

```
#footer-wrap {
        width:767px;
    background: none repeat #373737;
     } 
```

两者都没有工作

任何人都可以建议，我相信答案在我的眼睛之间，但我无法为我的生活弄清楚，因为它是我在这个项目上落后

提前谢谢了

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:22:32.853

在媒体查询中：-

```
@media (max-width: 767px){

#footer-wrap{

margin-left: -20px;
margin-right: -20px; 
```

} }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:33:18.053

我想我可以补充一下这是如何完全解决的，如果不是为了关闭，但也许可以帮助其他人

页脚容器需要最小宽度 100%

这就是全部...... 3 小时，这就是它所需要的一切

可能会帮助像我一样困惑的其他人

问题完全解决

R

约翰

# java - jQuery幻灯片淡入淡出内容

> ID：14856674
> 
> 赞同：0
> 
> 时间：2013-02-13T15:13:57.193
> 
> 标签：java, jquery, css, ajax

我发现此代码可将其放入其中一页。但是我无法弄清楚如何在网站上立即使其中一个活跃起来。现在可以直接链接到第一项。我们如何在进入网站后立即激活第一个链接？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
        <title>Demo: jQuery Slide &amp; Fade Content</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <script type="text/javascript" src="slide-fade-content.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('.more').live('click',function(){
                    var href = $(this).attr('href');
                    if ($('#ajax').is(':visible')) {
                        $('#ajax').css('display','block').animate({height:'1px'}).empty();
                    }
                    $('#ajax').css('display','block').animate({height:'200px'},function(){
                        $('#ajax').html('<img class="loader" src="loader.gif" alt="">');
                        $('#ajax').load('slide-fade-content.html #'+href,function(){
                            $('#ajax').hide().fadeIn().highlightFade({color:'rgb(253,253,175)'});
                        });
                    });
                    return true;
                });
            });
        </script>
    </head>
    <body>
        <div id="wrap">
            <div id="demo">
                <table width="900" border="1"><tr><td width="150" valign="top"><ul>
                    <li><a class="more" href="#first-item">First Item</a></li>
                    <li><a class="more" href="#second-item">Second Item</a></li>
                    <li><a class="more" href="#third-item">Third Item</a></li>
                </ul></td>
                <td width="750"><div id="ajax"></div></td></tr></table>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:18:13.340

我通常完成此操作的方式是在加载时手动触发事件，如下所示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
        <title>Demo: jQuery Slide &amp; Fade Content</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <script type="text/javascript" src="slide-fade-content.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('.more').live('click',function(){
                    var href = $(this).attr('href');
                    if ($('#ajax').is(':visible')) {
                        $('#ajax').css('display','block').animate({height:'1px'}).empty();
                    }
                    $('#ajax').css('display','block').animate({height:'200px'},function(){
                        $('#ajax').html('<img class="loader" src="loader.gif" alt="">');
                        $('#ajax').load('slide-fade-content.html #'+href,function(){
                            $('#ajax').hide().fadeIn().highlightFade({color:'rgb(253,253,175)'});
                        });
                    });
                    return true;
                });

             $('.more').first().click();
            });
        </script>
    </head>
    <body>
        <div id="wrap">
            <div id="demo">
                <table width="900" border="1"><tr><td width="150" valign="top"><ul>
                    <li><a class="more" href="#first-item">First Item</a></li>
                    <li><a class="more" href="#second-item">Second Item</a></li>
                    <li><a class="more" href="#third-item">Third Item</a></li>
                </ul></td>
                <td width="750"><div id="ajax"></div></td></tr></table>
            </div>
        </div>
    </body>
</html> 
```

`$('.more').first().click();`绑定click事件后添加一个。然后我拿第一个`more`链接和`click`它。在这里看到它[http://jsfiddle.net/eEk2v/](http://jsfiddle.net/eEk2v/)

# javascript - 使用单个按钮或图像作为音频播放器

> ID：14856676
> 
> 赞同：0
> 
> 时间：2013-02-13T15:13:58.850
> 
> 标签：javascript, jquery, html

我想使用图像作为 HTML5 的音频播放器的播放/暂停按钮。

我不需要显示控件。有什么办法可以做到这一点，比如隐藏音频元素并在单击图像时使用 Javascript 或 jQuery 播放/暂停音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:15:56.247

是的，请查看我的播放器（仍在建设中）：http: [//zachrip.net/p](http://zachrip.net/p)如果您查看源代码，您可以看到制作音乐播放器的许多基本内容。编辑：如果您愿意，我也可以向您发送一些基本的源代码，我通过查看然后复制然后使用它来学习最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:20:03.517

是的，你可以使用这个：

**HTML**

```
<audio id="player">
  <source src="file.ogg" type="audio/ogg">
  <source src="file.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
```

**JS**

```
var player = document.getElementById('player');
player.play(); 
```

并暂停

```
player.pause(); 
```

如果您需要更多帮助，请告诉我 :)

# clojure - 包括特定于平台的 java 依赖项（不要让我的头发着火）

> ID：14856678
> 
> 赞同：5
> 
> 时间：2013-02-13T15:14:06.837
> 
> 标签：clojure, leiningen

我想使用 Clojure 的[HDF5 java 库](http://www.hdfgroup.org/hdf-java-html/)。不幸的是，包含 java 依赖项的常用方法（即通过 Leiningen 对 Maven 存储库的支持）不可用。这可能是因为 HDF5-Java 库是 JNI 包装的一组已编译 C++ 和 Fortran 代码。

我查看了 Maven 化 HDF5-Java 的最新版本，但不明白如何处理特定于平台的版本/决定这太痛苦了。假设我被 HDF 小组发布的特定于平台的 jar 卡住了，有没有一种相对好的方法来处理这些，同时继续大部分时间生活在 Leiningen 的舒适世界中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:09:25.937

我自己从未尝试过这个，但看起来你应该能够通过按照[此处](https://github.com/swannodette/native-deps)描述的目录结构将 HDF5 库打包到 JAR 文件中，在 Maven 中安装它，并添加一个常规依赖项，从而在 Leiningen 中建立本地依赖项中的图书馆`project.clj`。Leiningen 应该处理检测你的操作系统和架构的繁琐工作，并在你的项目类路径中包含正确的部分。

如需更多阅读，请查看：

[http://nakkaya.com/2010/04/05/managing-native-dependencies-with-leiningen/](http://nakkaya.com/2010/04/05/managing-native-dependencies-with-leiningen/)

[http://bially.posterous.com/using-jogl-in-your-clojure-project](http://bially.posterous.com/using-jogl-in-your-clojure-project)

[Clojure、Lein、JavaFx、本机部门](https://stackoverflow.com/questions/11111467/clojure-lein-javafx-native-deps)

# ios - 为什么（复制，非原子）NSMutableArray 属性会创建 NSArrays？

> ID：14856681
> 
> 赞同：23
> 
> 时间：2013-02-13T15:14:17.207
> 
> 标签：ios, objective-c, nsmutablearray, nsarray

我在创建 TableView 时犯了一个错误`class`，并且不小心保留了我`@property`定义`copy`它时的样子：

```
@property (copy, nonatomic) NSMutableArray *words; 
```

我“正确”地初始化了数组：（注意这是第三次尝试，所以请忽略我没有使用 mutableCopy 和其他更好的方法的事实）

```
NSArray *fixedWords = @[@"Eeny", @"Meeny", @"Miny", @"Moe", @"Catch", @"A", @"Tiger", @"By", @"His", @"Toe"];
NSMutableArray *mutWords = [[NSMutableArray alloc] initWithArray:fixedWords];
self.words = mutWords; 
```

但是，当我后来重新排序数组时，它在 removeObjectAtIndex 行上崩溃了：

```
id object = [self.words objectAtIndex:fromIndexPath.row];
NSUInteger from = fromIndexPath.row;
NSUInteger to = toIndexPath.row;
[self.words removeObjectAtIndex:from]; 
```

带有错误消息

```
unrecognized selector sent to instance 
```

花了很多时间才弄清楚这是因为副本意味着分配 NSMutableArray 会导致创建标准（非可变）NSArray。谁能解释为什么这是正确的行为？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-13T15:19:47.900

-copy，由可变的 Cocoa 类实现，总是[返回它们的不可变副本](https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/ObjectCopying.html)。因此，当一个 NSMutableArray 被发送 -copy 时，它返回一个包含相同对象的 NSArray。

因为`words`有内存限定符`copy`，所以这一行：

```
NSMutableArray *mutWords = [[NSMutableArray alloc] initWithArray:fixedWords];
self.words = mutWords; 
```

扩展到：

```
NSMutableArray *mutWords = [[NSMutableArray alloc] initWithArray:fixedWords];
self.words = [mutWords copy]; 
```

鉴于 NSMutableArray 是 NSArray 的子类，编译器不会抱怨，而且您现在手上有一颗定时炸弹，因为 NSArray 无法识别它是可变子类的方法（因为它不能改变它的内容）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T15:28:25.453

属性并不神奇，它们只是简写。在您的对象上声明 a`@property`会告诉编译器为其创建一个支持实例变量和访问器方法。实际生成的代码取决于您在属性上设置的属性。

请务必记住，使用点语法设置属性也是简写。当你打电话时……</p>

```
self.words = mutWords; 
```

…您实际上是在后台调用生成的访问器方法，如下所示：

```
[self setWords:mutWords]; 
```

由于您在`copy`属性上指定了属性，因此您已经告诉编译器`-setWords:`使用如下所示的代码生成该访问器方法：

```
- (void)setWords:(NSMutableArray *)words
{
    _words = [words copy];
} 
```

了解了所有这些，您就可以看到发生了什么：生成的 setter 方法将调用`-copy`输入参数，并将结果分配给支持的实例变量。因为该`-copy`方法总是被实现为返回一个非可变对象（执行`[aMutableString copy]`将返回一个 NSString，依此类推）设置该属性将始终存储一个非可变副本。

# c# - 是否可以在 MediaLibrary 中创建一个新文件夹？

> ID：14856685
> 
> 赞同：0
> 
> 时间：2013-02-13T15:14:22.887
> 
> 标签：c#, windows-phone-8

我已经阅读了 msdn 页面，只发现似乎我只能将图像保存到名为“Saved Pitures”和“Camera Roll”的图像中。
但我想专门为我的应用程序创建一个文件夹。
（因为我不想弄乱那些不是由我的应用程序创建的图片。）
我看到 MediaLibrary 下有一个相册属性。我可以用它做点什么，比如创建一张新专辑吗？
我想要实现的是，我需要创建一个可以在“图片”应用程序中看到并能够在其上保存图片的文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:42:04.290

不可以，您不能在媒体库中创建自己的文件夹。将媒体库中的照片与您的应用相关联的唯一方法是通过[Lenses](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206990)。

# xml - xsl 文字和变量的不同行为

> ID：14856691
> 
> 赞同：1
> 
> 时间：2013-02-13T15:14:41.870
> 
> 标签：xml, xslt, xalan

这是我模板的一部分： `<xsl:value-of select="format-number(469802.00*30.05, '#.00')"/>` 使用时，它会生成 14117550.10。

但是，当我第一次将产品存储在变量中并`format-number`随后应用时： `<xsl:variable name="end"> <xsl:value-of select="469802.00*30.05"/> </xsl:variable> <xsl:value-of select="format-number($end, '#.00')"/>` 结果是 nAn

我使用 XALAN。

为什么行为不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:34:55.293

**我无法重现撒克逊人的问题。**

**尝试**：

```
<xsl:variable name="end" select="469802.00*30.05"/>
<xsl:value-of select="format-number(number($end), '#.00')"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:47:17.507

我手头没有 Xalan，但是从您的代码中，我想知道这是否与`<xsl:value-of>`元素内`<xsl:variable>`元素两侧的空格有关。

尝试确保`<xsl:variable>`样式表中的元素内没有空格。

# java - 如何从 Java Netbeans 中删除无用的库

> ID：14856701
> 
> 赞同：4
> 
> 时间：2013-02-13T15:15:00.770
> 
> 标签：java, libraries

我正在制作一个 Java Swing 项目，它包括 80-90 个库。我没有使用它们中的大多数，但我在它们成包时添加了它们。例如，我已经从 javamail 添加了所有 lib 文件，尽管我知道我只使用 SMTP。有什么方法可以找出我没有使用哪些库？？？。有没有一种安全的方法可以在不引起冲突的情况下删除这些库？我正在使用 Netbeans IDE。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:24:07.827

这意味着管理库依赖项。有**ant/ivy 组合**，但我使用**maven**构建基础设施。

在 NetBeans 中新建一个 maven 项目，添加所有源（到 src/main/java），然后开始添加**依赖**项（出现在项目资源管理器中）。

传递依赖被处理。

这是理想的，因为还维护了库版本。

注意：maven 首先将库及其元数据加载到本地“存储库”中，默认为用户目录中的 .m2。

我只能推荐maven。

# pug - 带括号的jade mixin参数引发语法错误

> ID：14856702
> 
> 赞同：0
> 
> 时间：2013-02-13T15:15:04.637
> 
> 标签：pug

我做了一个这样的mixin（用于淘汰虚拟元素绑定）

```
mixin ko(condition)
  != "<!-- ko "+condition+'-->'
  // /ko 
```

但是当我想打电话时

```
+ko('if:condition()') 
```

它抛出一个错误： Uncaught SyntaxError: Unexpected token ILLEGAL

也许是一个 ast 解析问题，但现在我想有一种方法可以解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:11:24.077

好吧，我找到了一个丑陋的方法来处理它

```
+ko("if:condition(\u0029") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T19:43:07.503

这是一个更好的解决方案：

```
mixin ko(bind)
    | <!-- ko #{bind} -->
    if block
        block
    | <!-- /ko --> 
```

# tridion - 尝试将二进制文件部署到已存储不同二进制文件的位置 现有二进制文件

> ID：14856708
> 
> 赞同：4
> 
> 时间：2013-02-13T15:15:14.657
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我收到以下错误。[我在其他 SO 帖子（此处](https://stackoverflow.com/questions/12458609/attempting-to-deploy-a-binary-to-a-location-where-a-different-binary-is-already)）中看到了这一点，并且我联系了 SDL 支持，但我仍然无法解决问题。有人可以提供一个简单的解决方案吗？我认为导致这种情况的步骤如下：

1) 发布带有 PDF 1001 链接的页面。
2) 从页面中删除 PDF 1001 并将其从 CM 中删除
3) 上传与 1001 同名的 PDF 1002。
4) 现在如果您尝试并发布，您将收到错误消息。

所以我需要取消发布 PDF 1001，但它已从 CM 中删除。我该如何解决这个问题？SDL 支持建议修复涉及编辑发布事务期间生成的 ZIP 文件。但我什至取消了出版物的所有页面并确认它们已经消失。错误仍然存​​在...

> **错误：**阶段：部署准备提交阶段失败，无法准备事务：tcm：0-11111-66560，尝试将二进制文件 1002 部署到已存储不同二进制文件的位置现有二进制文件：1001：，尝试部署二进制文件1002 到已经存储了不同二进制文件的位置现有二进制文件：1001：，无法准备事务：tcm：0-13573-66560，尝试将二进制文件 1002 部署到已存储不同二进制文件的位置现有二进制文件：1001 :, 尝试将二进制文件 1002 部署到已存储不同二进制文件的位置现有二进制文件：1001：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T15:27:27.023

所以该文件已从 CM 中删除，但 CD 仍然有对它的引用（根据 CD，它仍然存在并且仍然被某些东西使用）。

您应该在删除 1001*之后、添加 1002**之前*发布页面。这应该会从 CD 数据库中删除引用。然后你应该可以添加 1002 并再次发布页面。

[编辑]对不起，现在才读到您说您未发布所有内容。显然不是，因为仍然有对它的引用……打开虚拟机，将返回更新。

[EDIT2] 如果您取消发布，仍然不明白它是如何保持冲突的，但这是我在服务器上观察到的：

*   将二进制文件添加到页面，发布
    *   添加到 CD 中“REFERENCE_ENTRIES”表的参考
*   从页面中删除二进制文件，发布
    *   从“REFERENCE_ENTRIES”表中删除引用，删除二进制文件
*   取消发布页面（重新添加二进制文件后，重新发布）
    *   从“REFERENCE_ENTRIES”表中删除引用，删除二进制文件

所以，就我而言，我看到了我所期望的。在删除二进制文件后尝试发布页面，如果可能，请检查 REFERENCE_ENTRIES 表中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:23:02.460

此错误通常是由于默认情况下，Tridion 使用上传二进制文件的原始文件名作为其在内容交付端的文件名。如果您没有指定要部署到的不同结构组，那么如果您有两个具有相同原始上传文件名的多媒体组件，Tridion 将尝试将它们部署到内容交付的相同位置。幸运的是，Content Delivery 库足够聪明，可以检测到潜在的覆盖，但您却得到了这个错误。

Firstly - this scenario is way more likely in testing situations. For example, you need to create a bunch of test MMCs, so you copy and paste some that you already have. Guess what - their upload filenames will be the same.

The solution is to ensure that the filename is unique in the structure group you're deploying to. You have a lot of choice about how to do this, but a common approach is to introduce the component ID into the filename when you call AddBinary().

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:38:00.647

We encounter this failsafe pretty much every install. While sure, it is a lot more common on development and testing environments, the failsafe can happen in other situations as well. In fact, it can effectively break your entire site if you try and publish an image that's already there (where images are being replaced by the imfamous 'broken image' icon). Not sure how that works, but it can.

To make absolutely sure that uploaded binaries are posted are unique, I'd recommend writing a TBB that checks all binaries and adds the tcm uri to the filename. Add this on every page template to ensure this does not happen. The sooner you do this, the less likely the error occurs. Do bear in mind that this might mean that the upload will always publish a new binary, and if you add the tbb to COMPONENT templates, pages tend to get conflicted. However, it will save you the hassle of explaining the workflow to editors who don't understand (or better, accept) the failsafe.

this page might help you get started: [Unique Binary filenames](http://www.urbancherry.net/blogengine/post/2010/02/09/Unique-binary-filenames-for-SDL-Tridion-Multimedia-Components.aspx)

# ios - 重新提交 iOS 应用后，Apple App Store URL 可以更改吗？

> ID：14856712
> 
> 赞同：4
> 
> 时间：2013-02-13T15:15:21.620
> 
> 标签：ios, url, app-store, submit

我没想到会这样，但在我们打印传单之前我需要 100% 确定......如果我们将来提交新版本，我们的应用程序的 URL（已经在应用程序商店中）会改变吗？

我们应用的网址是： [https ://itunes.apple.com/gb/app/OUR-APP-NAME/idOUR-APP-ID?mt=8](https://itunes.apple.com/gb/app/OUR-APP-NAME/idOUR-APP-ID?mt=8)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T15:22:58.960

只要您在更新您的应用程序，即提交新版本，URL 就不会改变。您的应用名称和应用 ID 将保持不变，因此 URL 不会更改。我的网页中有一个链接，该链接链接到我在应用商店中的应用，并且多年来一直在使用我的应用的许多版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:27:09.990

为什么不使用一些重定向？打印您的传单，使其指向您自己的网站 www.mycompany.com/myGreatApp.html，并在该页面上有指向 Apple Store 的链接。

通过这种方式，您可以获得 2 大好处。首先，您的 URL 更短且更易于键入，其次，您不必担心 Apple 会更改 URL。正如 GabCas 指出的那样，他们不会，但无论如何，您自己的网页在印刷媒体中要好得多。

# c# - 如何以安全的方式获取弱引用的目标

> ID：14856714
> 
> 赞同：8
> 
> 时间：2013-02-13T15:15:31.220
> 
> 标签：c#, .net, garbage-collection, weak-references

考虑这段代码：

```
var weakRef = new WeakReference(new StringBuilder("Mehran"));
if (weakRef.IsAlive)
{
    // Garbage Collection might happen.
    Console.WriteLine((weakRef.Target as StringBuilder).ToString());
} 
```

可以`GC.Collect`在检查之后`weakRef.IsAlive`和使用`weakRef.Target`.

我错了吗？如果可能的话，ss有一种安全的方法吗？

例如，类似的 API`weakRef.GetTargetIfIsAlive()`将是合适的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T15:17:15.423

该 API 已经存在；如果对象已经被垃圾回收，则`weakRef.Target`返回。`null`

```
StringBuilder sb = weakRef.Target as StringBuilder;
if (sb != null)
{
    Console.WriteLine(sb.ToString());
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T22:55:08.217

该`IsAlive`属性的存在不是为了代码的利益，如果它是活着的，它会想要使用目标，而是为了代码的利益，它想要找出目标是否已经死亡，但不会有兴趣以任何方式访问它案子。如果代码要`Target`针对 null 进行测试，那将导致`Target`暂时具有强根引用（针对 null 进行测试的代码），并且生成这种根引用的行为可能会阻止对象在它被垃圾收集时否则会。如果代码不感兴趣，`Target`只是想知道它是否已经失效，那么代码就没有理由获取引用。它可以简单地进行测试`IsAlive`，并在返回时采取适当的措施`false`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:19:50.433

获取目标的本地副本并检查是否为空。

`WeakReference.Target`如果目标已被收集，则将返回`null`，但您担心它是在您`.IsAlive`检查和获取目标之间收集的。

```
var weakRef = new WeakReference(new StringBuilder("Mehran"));

if (weakRef.IsAlive)
{
    var stringBuilder = weakRef.Target as StringBuilder;

    if (stringBuilder != null)
    {
        Console.WriteLine(stringBuilder.ToString());
    }
} 
```

`Console.WriteLine((weakRef.Target as StringBuilder).ToString());`如果转换失败，将抛出空引用异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-16T22:55:15.497

我相信您正在寻找的是`TryGetValue`. 您的代码应如下所示：

```
var weakRef = new WeakReference(new StringBuilder("Mehran"));
if (weakRef.TryGetValue(out StringBuilder sb)
{
    Console.WriteLine(sb.ToString());
} 
```

# matlab - 在 MATLAB 中表示径向树状图

> ID：14856715
> 
> 赞同：3
> 
> 时间：2013-02-13T15:15:32.653
> 
> 标签：matlab

我想用弧线表示径向线的树状图。

到目前为止，我已经尝试过

```
t2=linkage(squareform(t1),'single')
dendrogram(t2,0,'colorthreshold',0.5) 
```

并得到输出![http://i48.tinypic.com/1zpgnyq.jpg](../Images/0b591f61094ec089641e69052b0b29f0.png)

您能否让我知道如何在 MATLAB 中表示与径向树状图相同的内容，如下图所示。

![http://i45.tinypic.com/ebaag2.png](../Images/8563ad7af021cd0d168b02f8572062c4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T01:12:07.127

您可以从 MATLAB Central 尝试我的 Polar Dendrogram 函数：http: [//www.mathworks.co.uk/matlabcentral/fileexchange/21983-draw-a-polar-dendrogram](http://www.mathworks.co.uk/matlabcentral/fileexchange/21983-draw-a-polar-dendrogram)

希望这对你有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:53:11.570

Matlab 没有用于制作径向树状图的内置函数。快速搜索出现了[一个关于分层随机图的页面](http://tuvalu.santafe.edu/~aaronc/hierarchy/)，其中包含可能对您有用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T09:05:18.837

我修改了@Sam Roberts 提供的 Matlab 代码，并附上了文件的差异：

```
1c1
< function [h,T,perm] = polardendrogram(Z,varargin)
---
> function [h,T,perm] = polardendrogram(Z, labels, varargin)
47,48c47,49
<     [x,y]=pol2cart((((i-minx)/xrange)*(pi*11/6))+(pi*1/12),1.1);
<     text(x,y,num2str(perm(i)));
---
>     [x,y]=pol2cart((((i-minx)/xrange)*(pi*11/6))+(pi*1/12),1.01);
>     THETA = (((i-minx)/xrange)*330 + 15); % pi/12 = 15° 
>     text(x,y,labels(perm(i)), 'rotation', THETA); 
```

如您所见，这需要在您通常传递给 Polardendrogram() 所基于的 Matlab 内置 dendrogram() 函数的参数之前指定标签。

可能有一种更清洁的方法可以做到这一点，但这对我有用。

如果您对此有任何意见，请告诉我。

# javascript - 如果用户选择的文本包含在链接中，则获取链接

> ID：14856719
> 
> 赞同：1
> 
> 时间：2013-02-13T15:15:39.293
> 
> 标签：javascript, jquery

好的，所以我想弄清楚如果用户突出显示的文本包含在文本中，如何获取链接href...

例如，如果以下是一个链接

```
<a href="http://www.google.com">Find us on Google</a> 
```

并且用户突出显示文本“Google”

```
<a href="http://www.google.com">Find us on Google</a> 
```

所以问题是：在用户突出显示文本（如复制和粘贴）之后，他们很好地点击了一个按钮，它将返回所选文本的链接。

我希望我说清楚了，我真的不知道如何表达它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T15:22:44.437

```
window.getSelection().anchorNode.parentNode.href; 
```

或在 IE 中：

```
document.selection.createRange().parentElement().href; 
```

应该在选择文本的地方获取元素的href？

# jquery - 动态加载字体html jquery

> ID：14856721
> 
> 赞同：4
> 
> 时间：2013-02-13T15:15:44.753
> 
> 标签：jquery, html, fonts

我正在一个网站上工作，该网站允许用户输入一些文本并将其拖到适当的位置等。我已经到了一个我想提供字体选择的地步。我可以动态加载字体而不是一次全部加载吗？例如，用户输入他们的文本并选择使用“通用字体 1”是否可以使用 jquery 加载该字体？这样我就可以提供一堆字体，而无需在页面加载时全部加载。我也希望使用谷歌网络字体，但不是必须的。为清楚起见，我目前正在使用几种自定义字体，它们加载得很好。

再一次，谢谢你……托德

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-13T15:19:10.903

这是我最近编写的用于动态添加 Google 网络字体的函数...

```
function addGoogleFont(FontName) {
    $("head").append("<link href='https://fonts.googleapis.com/css?family=" + FontName + "' rel='stylesheet' type='text/css'>");
}

addGoogleFont("Junge"); // for example 
```

之后，您只需`font-family`像往常一样应用字体。

# php - IE 不允许用户通过 PHP 上传 jpg 文件 - 其他图像扩展也可以使用

> ID：14856724
> 
> 赞同：3
> 
> 时间：2013-02-13T15:16:00.933
> 
> 标签：php, file-upload, image-uploading

我正在为允许 png、jpg、jpeg 和 gif 扩展名的用户运行图像上传脚本。

使用 IE 7-9 时，用户只能成功提交 png's 或 gif's。IE 用户似乎无法上传 jpg。

由于这个 IE 问题，我了解 pjpeg 并相应地修改了代码，但是问题仍然存在。IE 上的用户无法上传 jpg，但其他扩展程序工作正常。

有什么提示吗？谢谢！

**PHP**

```
 $filename = basename($_FILES['photo']['name']);
            $ext = substr($filename, strrpos($filename, '.') + 1);

            //Edit as per comments below
            $ext = strtolower($ext);

            //Check if the file is a JPG, JPEG, GIF or PNG image and it's size is less than 5Mb
            $allowedExts = array('jpg', 'jpeg', 'gif', 'png');
            if ( (in_array($ext, $allowedExts)) &&
            ($_FILES["photo"]["type"] == "image/jpeg") ||
            ($_FILES["photo"]["type"] == "image/png") ||
            //Edit as per comments below
            ($_FILES["photo"]["type"] == "image/x-png") ||
            ($_FILES["photo"]["type"] == "image/gif") ||
            ($_FILES["photo"]["type"] == "image/pjpeg")
            && ($_FILES["photo"]["size"] <= 5242880) ){

            //Name it and determine the path to which we want to save this file
            $newname = str_replace( ' ', '_', trim( strip_tags( $_POST['first-name'].'_'.$_POST['last-name'] ) ) ) . '_' . $formKey->generateKey() . '_' . time() . '.jpg';
            ... 
```

**形式**

```
<form id="submit-photo" action="index.php?p=uploader" enctype="multipart/form-data" method="POST">
        <?php if(!isset($_SESSION['flash_message']) && isset($_SESSION['recent_field']) ) unset($_SESSION['recent_field']); ?>
        <?php $formKey->outputKey(); ?>
        <input type="hidden" name="MAX_FILE_SIZE" value="5242880" />
                <div id="upload-photo">
                        <input type="file" name="photo" id="photo" />
                </div>
                ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:22:25.747

我在 IE（尤其是 7 和 8）上遇到过类似的问题，通常是由于 IE 在上传 png 图像时触发的“image/x-png”MIME 类型。尝试将其添加到您的 MIME 列表中

```
$_FILES["photo"]["type"] == "image/x-png" 
```

考虑认为 MIME 类型可以被欺骗，并且它不是对图像的完全可靠的评估。您应该使用类似[`getimagesize()`](http://php.net/manual/en/function.getimagesize.php)检查真实图像的方法，并 `pathinfo($file, PATHINFO_EXTENSION)`（参见[手册](http://php.net/manual/en/function.pathinfo.php)）从文件中获取扩展名；

# javascript - HTML5 - JS：从正面射击子弹

> ID：14856725
> 
> 赞同：4
> 
> 时间：2013-02-13T15:16:05.663
> 
> 标签：javascript, html, mouse

我正在开发一款自上而下的 HTML5 射击游戏。我目前正试图让子弹从我的角色面向角度发射。

我的角色总是面向鼠标位置（旋转）。所以，当我发射子弹时，我需要考虑到旋转。

我快到了，唯一的问题是子弹从我的实际鼠标位置开始，尽管 - 它朝着正确的方向移动。

我相信我的数学在我的速度变量中是错误的：

```
var b = new Rectangle( this.x + (this.width / 2) - 4, this.y + (this.height / 2) - 4, 8, 8);

var velocityInstance = new Vector2(0, 0);
velocityInstance.x = input.mouseX - (this.localX + this.width/2);
velocityInstance.y = input.mouseY - (this.localY + this.height/2);

var bulletInstance = new Bullet(velocityInstance, b, this.bullets.length + 1);

this.bullets.push(bulletInstance);
this.shotBullet = true; 
```

'this' 指的是我的 Player。localX/Y 是我角色的中心位置（他总是在屏幕的中心，并且场景围绕着他移动）。

如果有人可以帮我检查一下，将不胜感激。谢谢！

- - - 编辑 - - -

这是我的子弹功能：

```
Bullet = function(vel, rectangle, index){

    this.velocity = vel;
    this.rect = rectangle;
    this.index = index;

    this.Update = function(){
        this.rect.x += this.velocity.x;
        this.rect.y += this.velocity.y;

        //Collisions
        for(var c = 0; c < GameObjects.length; c++){
            if(this.rect.Intersects(GameObjects[c])){
                console.debug("Bullet Hit: " + GameObjects[c].tag);

                //Player.bullets.splice(index, 1);
            }
        }
    };

    this.Draw = function(ctx){

        this.rect.Draw(ctxMap);
    };

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:00:41.810

实际上，我建议**不要**使用三角函数，只是为了提高效率。Math.atan2、Math.cos 和 Math.sin 可能会变得很昂贵。

你已经有（稍微重命名）

```
var deltaX = input.mouseX - (this.localX + this.width/2);
var deltaY = input.mouseY - (this.localY + this.height/2); 
```

为什么不直接这样跳呢？

```
var magnitude = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
var velocityScale = bulletSpeed / magnitude;
velocityInstance.x = deltaX * velocityScale;
velocityInstance.y = deltaY * velocityScale; 
```

它的功能相同，但只使用一个泰勒级数而不是 3，因此应该更有效。越快越好，对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:50:09.920

弄清楚了。我需要使用 Math.cos 和 Math.sin：

```
var targetX = input.mouseX - (this.localX + this.width/2);
var targetY = input.mouseY - (this.localY + this.height/2);

this.rotation = Math.atan2(targetY, targetX);

velocityInstance.x = Math.cos(this.rotation) * bulletSpeed;
velocityInstance.y = Math.sin(this.rotation) * bulletSpeed; 
```

无论如何感谢社区！帮助我解决了这个问题！

# session - 编辑信息后刷新用户会话数组 CAKEPHP

> ID：14856727
> 
> 赞同：4
> 
> 时间：2013-02-13T15:16:12.670
> 
> 标签：session, cakephp, cakephp-2.3

我想知道如何在用户更新他们的信息后重新加载数组（Auth.User）。

目前这不会发生，直到用户注销然后重新登录，因为那是它加载数组（Auth.User）的时候。

到目前为止，我已经尝试了一些解决方案[，例如](http://ask.cakephp.org/questions/view/refresh_user_data_for_auth).

我也尝试添加 `$user = $this->User->field('name', array('User.id' => $this->Session->read('Auth.User.id'))); $this->Session->write('Auth.User', $user);` 到应用程序控制器中。

但没有一个是成功的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T15:27:17.813

你就在那儿。请记住，返回的数组`$user`包含一个“用户”键，例如：

```
array(
  'User' => array(
    'id' => 1
  )
) 
```

因此，将其`Auth.User`保存到会话中实际上会像这样保存会话数组：

```
array(
  'Auth' => array(
    'User' => array(
      'User' => array(
        'id' => 1
      )
    )
  )
) 
```

相反，将其保存到 Auth 密钥中，您就可以像往常一样继续访问它：

```
$user = $this->User->field('name', array(
  'User.id' => $this->Session->read('Auth.User.id')
)); 
$this->Session->write('Auth', $user); 
```

现在会话密钥已被清除，有一种更简单快捷的方式重新登录用户，正如[马克](https://stackoverflow.com/users/461173/mark)在评论中所说：使用`$this->Auth->login()`。

```
$user = $this->User->field('name', array(
  'User.id' => $this->Session->read('Auth.User.id')
)); 
$this->Auth->login($user); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-08T08:47:51.097

就我而言，我使用的是 CakePHP 4，

我已经加载了身份验证组件。

我正在使用此代码来刷新我的身份验证信息。

```
$user = (new UserService())->Users;
$user = $user->find()->where(['Users.id' => $this->userId])->contain(['RELATION1', 'RELATION2'])->first();

$this->Authentication->setIdentity($user); 
```

现在您可以使用...获取登录用户的数据

```
$this->Authentication->getIdentity()->getOriginalData(); 
```

# r - 评估线性混合模型中的似然函数（lme4）

> ID：14856731
> 
> 赞同：5
> 
> 时间：2013-02-13T15:16:48.893
> 
> 标签：r, statistics, multi-level, lme4, mixed-models

我目前正在编写一个脚本来评估用于线性混合模型的（受限）对数似然函数。我需要它来计算模型的可能性，其中一些参数固定为任意值。也许这个脚本对你们中的一些人也有帮助！

我使用`lmer()`from`lme4`和`logLik()`检查我的脚本是否正常工作。看起来，事实并非如此！由于我的教育背景并不真正关心这个级别的统计数据，我有点迷失了发现错误。

接下来，您将找到一个使用 sleepstudy-data 的简短示例脚本：

```
 # * * * * * * * * * * * * * * * * * * * * * * * * 
  # * example data

  library(lme4)
  data(sleepstudy)
  dat <- sleepstudy[ (sleepstudy$Days %in% 0:4) & (sleepstudy$Subject %in% 331:333) ,]
  colnames(dat) <- c("y", "x", "group")

  mod0 <- lmer( y ~ 1 + x + ( 1 | group ), data = dat)  

  # + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + #
  #                                                             #
  #   Evaluating the likelihood-function for a LMM              #
  #   specified as: Y = X*beta + Z*b + e                        #
  #                                                             #
  # + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + 

  # * * * * * * * * * * * * * * * * * * * * * * * * 
  # * the model parameters

  # n is total number of individuals
  # m is total number of groups, indexed by i
  # p is number of fixed effects
  # q is number of random effects

  q <- nrow(VarCorr(mod0)$group)                  # number of random effects
  n <- nrow(dat)                                  # number of individuals
  m <- length(unique(dat$group))                  # number of goups
  Y <- dat$y                                      # response vector

  X <- cbind(rep(1,n), dat$x)                     # model matrix of fixed effects (n x p)
  beta <- as.numeric(fixef(mod0))                 # fixed effects vector (p x 1)

  Z.sparse <- t(mod0@Zt)                          # model matrix of random effect (sparse format)
  Z <- as.matrix(Z.sparse)                        # model matrix Z (n x q*m)
  b <- as.matrix(ranef(mod0)$group)               # random effects vector (q*m x 1)

  D <- diag(VarCorr(mod0)$group[1:q,1:q], q*m)    # covariance matrix of random effects
  R <- diag(1,nrow(dat))*summary(mod0)@sigma^2    # covariance matrix of residuals
  V <- Z %*% D %*% t(Z) + R                       # (total) covariance matrix of Y

  # check: values in Y can be perfectly matched using lmer's information
  Y.test <- X %*% beta + Z %*% b + resid(mod0)
  cbind(Y, Y.test)

  # * * * * * * * * * * * * * * * * * * * * * * * * 
  # * the likelihood function

  # profile and restricted log-likelihood (Harville, 1997)
  loglik.p <- - (0.5) * (  (log(det(V))) + t((Y - X %*% beta)) %*% solve(V) %*% (Y - X %*% beta)  )
  loglik.r <- loglik.p - (0.5) * log(det( t(X) %*% solve(V) %*% X ))

  #check: value of above function does not match the generic (restricted) log-likelihood of the mer-class object
  loglik.lmer <- logLik(mod0, REML=TRUE)
  cbind(loglik.p, loglik.r, loglik.lmer) 
```

也许这里有一些 LMM 专家可以提供帮助？无论如何，非常感谢您的建议！

编辑：顺便说一句，LMM 的似然函数可以在 Harville (1977) 中找到，（希望）可通过此链接访问： [方差分量估计和相关问题的最大似然方法](http://www.jstor.org/stable/10.2307/2286796)

问候，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-01T16:21:00.483

解决方案（截至 2013 年 3 月）是安装开发版本`lme4`并使用该`devFunOnly`参数。

自 2014 年 3 月 14 日起[，CRAN 上的 lme4](http://cran.r-project.org/web/packages/lme4/index.html)提供了该开发版本以及此功能，并且[参考指南](http://cran.r-project.org/web/packages/lme4/lme4.pdf)提供了补充包作者 (Ben Bolker) 对原始问题的评论的解释。

# java - 更改自定义列表视图行背景颜色

> ID：14856742
> 
> 赞同：0
> 
> 时间：2013-02-13T15:17:16.403
> 
> 标签：java, android, android-listview

我有一个带有自定义列表视图的应用程序，它有一个文本视图和一个图像（删除），当我单击图像时，该行的背景颜色应该改变，当我再次单击同一个图像时，它的背景应该改变为默认颜色。我可以更改背景颜色，但只能更改一次，我无法更改两次，我的意思是我无法恢复为默认颜色。

这是我的代码...

**自定义列表视图.java**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    holder = null;
    DataFields rowItems = (DataFields) getItem(position);
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.home_field_row, null);
        holder = new ViewHolder();
        holder.dataFields = items.get(position);
        holder.mName = (TextView) convertView
                .findViewById(R.id.hmFieldName);
        holder.mDeleteImage = (ImageView) convertView
                .findViewById(R.id.hmFieldDeleteImage);
        holder.mDeleteCheck = (ImageView) convertView
                .findViewById(R.id.hmFieldDeleteCheck);
        holder.mDeleteMainRL = (RelativeLayout) convertView
                .findViewById(R.id.hmFieldMainRL);
        holder.mDeleteImage.setTag(position);

        final View clickView = convertView;
        holder.mDeleteImage
                .setOnClickListener(new ImageView.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        int status = 0;

                        HomeActivity.mDeleteFieldLL
                                .setVisibility(View.VISIBLE);
                        HomeActivity.hmAddField
                                .setVisibility(View.INVISIBLE);

                        holder.dataFields = items.get(position);

                        if (mFieldId.size() == 0) {
                            mFieldId.add(holder.dataFields);
                            ++count;
                            HomeActivity.hmDeleteSelected
                                    .setText("Delete (" + count + ")");

                            clickView.setBackgroundColor(R.color.list_row_bg);

                        } else {
                            for (int i = 0; i < mFieldId.size(); i++) {
                                if (mFieldId.get(i).getId() == holder.dataFields
                                        .getId()) {
                                    status = 1;
                                }
                            }

                            if (status == 0) {
                                mFieldId.add(holder.dataFields);
                                ++count;
                                HomeActivity.hmDeleteSelected
                                        .setText("Delete (" + count + ")");

                                clickView.setBackgroundColor(R.color.list_row_bg);

                            } else if (status == 1) {
                                mFieldId.remove(holder.dataFields);
                                --count;
                                if (count < 0)
                                    count = 0;

                                clickView.setBackgroundColor(R.color.list_row_bg_default); //doesnt changes back to default color

                                HomeActivity.hmDeleteSelected
                                        .setText("Delete (" + count + ")");
                            }
                        }
                    }
                });

        convertView.setTag(holder);
    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mName.setText(rowItems.getName());

    return convertView;
} 
```

还有一个问题是，背景颜色不是我在 color.xml 中提到的颜色，我通过放置不同的颜色进行了测试，但是当我单击图像时，颜色只会变成一种特定的颜色。

因此，简单地说，我需要在单击图像时更改 listview 行的背景颜色，并在再次单击时恢复为默认颜色。

非常感谢任何形式的帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:32:40.553

我认为颜色可能已经改变了，但是你在 setBackgroundColor() 处犯了错误，所以看起来颜色没有改变。

对于颜色问题，请尝试使用此代码

```
clickView.setBackgroundColor(context.getResources().getColor(R.color.list_row_bg)); 
```

实例化适配器时必须传递 Context 对象。

或者你可以使用类似的东西

```
layout.setBackgroundColor(0xFFFFFFFF); 
```

# scrollbar - JavaFX 滚动条有时不会出现在 TableView 中

> ID：14856744
> 
> 赞同：0
> 
> 时间：2013-02-13T15:17:18.837
> 
> 标签：scrollbar, javafx-2, tableview

我的应用程序将外部数据加载到 observablist 中，然后加载到 TableView 中。滚动条在那里有一些奇怪的行为。大多数时候它会出现，但有时不会。当我加载它几次时，它会显示出来，我可以滚动列表。我有一列图像不知道这是否会引起麻烦。窗口大小似乎与这个问题无关。

这是代码：

```
for (int i = 0; i < listOfProducts.getLength(); i++){
    xmlData.add(
        new Products(img.get(i), formatList.get(i),
            titleList.get(i), 
            pubList.get(i), pageList.get(i), publisherList.get(i), 
            heightList.get(i)));
}

productTable.setItems(xmlData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:20:58.700

该问题可能是由于 tableview 内部侦听器（侦听可观察列表项更改）不是由 productTable.setItems() 触发的。要触发他们尝试

```
productTable.getItems().addAll(xmlData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:50:20.797

看起来像一个问题[http://javafx-jira.kenai.com/browse/RT-11873](http://javafx-jira.kenai.com/browse/RT-11873)

但它在很久以前就修好了。你有哪个版本的 JavaFX？

# java - 导出到 excel 时使用 ireport 4.8 或 ireport 4.7 不显示颜色格式

> ID：14856747
> 
> 赞同：0
> 
> 时间：2013-02-13T15:17:28.553
> 
> 标签：java, jakarta-ee, web-applications, jasper-reports, ireport

我对 ireport 有一个严重的问题，我将文本的背景色设置为 [231,233,219] 的 RGB 值，并在使用 excel 预览时将 opaque 属性设置为 true，我能够查看相同的颜色，但在将报告保存为 pdf 或导出到pdf 通过代码将颜色 RGB 值更改为 [255,255,204]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:40:40.087

ireport 使用基本配色方案生成 excel 报告。但是如果我们想使用一些高级配色方案，我们应该遵循以下程序

1.  获取 jxl 2.6 jar
2.  获取itext 2.1.7.jar
3.  用户 JExcelApiExporter 用于开发 excel 报告并将 JExcelApiExporterParameter.CREATE_CUSTOM_PALETTE 设置为 true

# c# - 构建 Web 项目时未在 obj\Debug\Package 处创建 Zip 文件

> ID：14856753
> 
> 赞同：0
> 
> 时间：2013-02-13T15:17:50.263
> 
> 标签：c#, asp.net, visual-studio, iis

我已激活此设置，但在项目 buildt 之后没有 zip 文件。有人知道为什么吗？

![在此处输入图像描述](../Images/1f74b5f28c0adad3890b40c6c2d8b2c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:24:48.940

构建与发布不同。您必须发布 Web 应用程序才能使用它来创建 zip。

# asp.net - SignalR WebSocketServerUrl 不为空

> ID：14856755
> 
> 赞同：1
> 
> 时间：2013-02-13T15:17:58.133
> 
> 标签：asp.net, websocket, signalr

在与 SignalR 服务器协商时，我们通常会得到响应的 WebSocketServerUrl 成员的空值。SignalR 团队的某个人能否解释一下它的实际含义是什么，以及在什么条件下我们确实为该成员获得了价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:15:35.933

它已被弃用，从未使用过。最初的意图是能够使用 SignalR 运行单独的 websocket 服务器（如 fleck [https://github.com/davidfowl/SignalR.Fleck](https://github.com/davidfowl/SignalR.Fleck)）。

# javascript - 是否可以在 localStorage 中缓存外部库？

> ID：14856758
> 
> 赞同：0
> 
> 时间：2013-02-13T15:18:05.097
> 
> 标签：javascript, local-storage

我对做这个跨域很感兴趣。

我想知道如何获取源代码，在下载并执行它之后

```
<script src = "libary_i_want_to_cache"> 
```

script 标签，并将此源放入 localStorage。

```
localStorage.script_source = the_source; 
```

我知道浏览器等提供的所有其他缓存机制，但在这种特殊情况下，我想将我的脚本存储在 localStorage 中。

我可以使用脚本标记参数吗？

我检查了[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/script)，但没有找到。使用 cors 是否相关？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:25:49.013

我不知道没有 ajax 有任何方法可以做到这一点。脚本标签本身不提供对其下载的脚本源的访问。

如果您的脚本来自与您的网页相同的域并且您愿意使用 ajax，那么您可以使用 ajax 来检索脚本的文本，然后您可以将该文本存储在本地存储中。

要从本地存储加载脚本，您需要将本地存储中的脚本读取到字符串变量中，然后使用`eval()`它来解析/执行它。

综上所述，浏览器的内置缓存机制似乎更合适，除非您帮助我们了解为什么它们不适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:20:22.767

通常，浏览器会为你做缓存，给定来自服务器的正确缓存头。

此外，在这种情况下，您所说的[应用程序缓存](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache)更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:41:23.670

是的，您可以使用 localStorage 来存储 javascript。设置 innerHTML 将执行脚本内容，但更好的方法是使用 window.URL.createObjectURL 设置为 src。

# backup - Perforce：将搁置的文件从工作区移动到备份

> ID：14856761
> 
> 赞同：2
> 
> 时间：2013-02-13T15:18:17.257
> 
> 标签：backup, perforce, shelve, unshelve

我在长期未决的 Perforce 更改列表中有一些搁置的旧文件，我可能永远不会提交。我想摆脱那些更改列表，因为它们污染了我的空间，但我不想丢失所有东西以防万一有一天我需要它们，所以我需要备份。

**有没有办法将搁置的文件从更改列表移动到文件系统的某个位置？**

将搁置的文件从 P4V 拖放到 Windows 资源管理器不起作用。命令行工具[`p4 unshelve`](http://www.perforce.com/perforce/r12.2/manuals/cmdref/unshelve.html)似乎没有这样的选项。我还想避免在备份文件之前先取消搁置文件，因为如果这些文件已经通过编辑签出，这将意味着额外的麻烦。

**编辑**

阅读答案让我意识到我真正想要的是保持这种变更列表的安全，但远离视图（即远离我通常的工作区）。我不在乎它是在我的文件系统上还是在其他地方。所以我的问题实际上是：

**有没有办法将搁置的文件从工作区移走以进行备份？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T05:35:11.617

扩展 Williams 的帖子，我建议您创建另一个工作区，而不是同步，而是存储搁置的更改列表！

为此，请从“连接”菜单中选择“创建新工作区”。取消选中“立即切换到新工作区”。使名称与当前工作空间相同，并附加诸如“-shelf”之类的后缀。任何根路径都可以，您将不需要它。现在只需选择要“收起”的更改列表，右键单击它们，选择“更改所有权”，输入新工作区名称的名称，它将转移到新工作区，您当前的工作区会很好整齐的。

如果您想查看架子上的内容，您可以简单地展开“待处理”选项卡顶部的过滤器，然后单击工作区行上的小圆圈 X，perforce 将向您显示所有更改列表，允许您浏览和取消搁置到当前工作区。

perforce 服务器是备份的最佳位置。Perforce 会跟踪每个搁置文件的基本修订版本，如果您将其移出 perforce，则此信息将丢失，可能会使以后的集成更加困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T03:18:28.163

您可以从搁置的变更集中创建补丁文件并将补丁文件存储在本地：

```
p4 describe -S -du CHANGE > CHANGE.patch 
```

如果您需要重新应用补丁，GNU`patch`程序将不喜欢 Perforce 使用的文件标记，如下所示：

```
==== //depot/path/file#revision (type) ==== 
```

但你可以编写一个脚本来按摩它：

```
+++ //depot/path/file 
```

（甚至首先将文件同步到指定的修订版）。

请注意，`p4 describe`遗憾的是没有列出添加或删除文件的差异，因此这仅适用于已编辑的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T16:35:27.933

如何使用适当的映射和根位于您希望文件结束的位置创建一个临时工作区，然后切换到该工作区并取消搁置它们。这样就不会有冲突了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T02:57:29.537

男孩，我认为将它们留在服务器中是一个**很好**的长期存储位置。我没有发现货架“污染了我的空间”；将它们保存在服务器中似乎是一种干净的方式来存储我想要记录但还没有准备好提交的实验工作。

有时，我不是做一个架子，而是在服务器上做一个单独的分支；它可以是一个稀疏的分支，只包含我书架上的文件。然后我将我搁置的文件提交到那个稀疏的分支。

无论哪种方式，我宁愿将部分完成的工作保存在服务器上，也不愿保存在工作站上的某个随机文件夹中。

# c# - 从 SQL 表中获取值并在其上设置条件

> ID：14856762
> 
> 赞同：0
> 
> 时间：2013-02-13T15:18:20.597
> 
> 标签：c#, sql

我有一个名为`tbDepartment`(id, title, abbreviation) 的表和一个`GridView`包含两列 Title 和 Abbreviation

我需要知道用户在 gridView 中插入的 Title 是否与 table 中的相同`tbDepartment`。如果为真，我想获取 id，否则我需要创建新用户。

我写的不是进入 if 语句。有人可以告诉我如何纠正吗？

```
string sql2 = "Insert into tbDepartment ([Title], [Abbreviation]) values (@Desc, @DepCode)";

string sqlDep = "Select [ID] from tbDepartment where Title = '" + gridView3.GetRowCellValue(i, gridView3.Columns[DepCode]).ToString() +"'" ;
SqlCommand cmdDep = new SqlCommand(sql2, connection);

if (sqlDep == 0)
{
    cmdDep.Parameters.Add("@Desc", SqlDbType.VarChar,50);
    cmdDep.Parameters.Add("@DepCode", SqlDbType.VarChar, 50);
    cmdDep.Parameters["@Desc"].Value = Convert.ToString(gridView3.GetRowCellValue(i, gridView3.Columns[DepDesc]));
    cmdDep.Parameters["@DepCode"].Value = Convert.ToString(gridView3.GetRowCellValue(i, gridView3.Columns[DepCode]));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:27:01.357

首先使用 ExecuteScalar 执行查询以获取 ID。如果它返回一个非空值（意味着您找到了标题），那么您就有了您的 ID。否则执行新数据的插入。

同时，不要使用字符串连接来执行 sql 命令。（[SQL 注入](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)）

```
string sql2 = "Insert into tbDepartment ([Title], [Abbreviation]) values (@Desc, @DepCode)";
string sqlDep = "Select [ID] from tbDepartment where Title = @title" 

SqlCommand cmdDep = new SqlCommand(sqlDep, connection);
cmdDep.Parameters.AddWithValue("@title", gridView3.GetRowCellValue(i, gridView3.Columns[DepCode]).ToString();
object result = cmdDep.ExecuteScalar();
if(result != null)
{
    cmdDep.Parameters.Clear();
    cmdDep.CommandText = sql2;
    cmdDep.Parameters.AddWithValue("@Desc", Convert.ToString(gridView3.GetRowCellValue(i, gridView3.Columns[DepDesc]);
    cmdDep.Parameters.AddWithValue("@DepCode", Convert.ToString(gridView3.GetRowCellValue(i, gridView3.Columns[DepCode]));
    cmdDep.ExecuteNonQuery();
}
else
    int id = Convert.ToInt32(result); 
```

其中的一部分，在您上面的查询中有一些**不太正确的地方。**您得到要搜索的值`Title`但是`gridView3.GetRowCellValue(i, gridView3.Columns[DepCode])` 在插入查询中，您使用同一个网格单元格来更新列的值，`Abbreviation` 而`Title`使用另一个单元格更新列`gridView3.GetRowCellValue(i, gridView3.Columns[DepDesc]))`可能正确的插入文本是：

```
string sql2 = "Insert into tbDepartment ([Title], [Abbreviation]) values (@DepCode, @Desc)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:25:19.587

`SqlCommand.ExecuteScalar`返回查询返回的结果集中第一行的第一列。这就是您获取 id 或 null 的方式。

```
string sql2 = "Insert into tbDepartment ([Title], [Abbreviation]) values (@Desc, @DepCode)";

string sqlDep = "Select [ID] from tbDepartment where Title = '" + gridView3.GetRowCellValue(i, gridView3.Columns[DepCode]).ToString() +"'" ;
SqlCommand cmdDep = new SqlCommand(sql2, connection);
SqlCommand cmdUser = new SqlCommand(sqlDep , connection);

var id = cmdUser.ExecuteScalar() as int?;

if (id == null) //nothing found
{
   //add new
    cmdDep.Parameters.Add("@Desc", SqlDbType.VarChar,50);
    cmdDep.Parameters.Add("@DepCode", SqlDbType.VarChar, 50);
    cmdDep.Parameters["@Desc"].Value = Convert.ToString(gridView3.GetRowCellValue(i, gridView3.Columns[DepDesc]));
    cmdDep.Parameters["@DepCode"].Value = Convert.ToString(gridView3.GetRowCellValue(i, gridView3.Columns[DepCode]));
}
else
{
   //edit
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:37:04.137

确保在执行之前打开连接。使用`using`将确保在使用后处理连接。首先执行 DateReader 以检查任何记录，然后执行 NonQuery 以插入。此外，您可以在单个查询中或使用存储过程来执行此操作。

```
using(SqlConnection con = new SqlConnection("YourConnectionString"))
{
   string selectQuery = "Select [ID] from tbDepartment where Title = @Title";
   SqlCommand cmd = new SqlCommand(selectQuery, con);

   cmd.Parameters.AddWithValues("@Title", "Title_Value");
   con.Open();
   SqlDataReader reader = cmd.ExecuteReader();

   if(!reader.HasRows){
       string insertQuery = "Insert into tbDepartment ([Title], [Abbreviation]) " +
                            "values (@Title, @Abb)";

       cmd.CommandText = insertQuery;
       cmd.Parameters.AddWithValues("@Abb", "Abb_Value");
       cmd.ExecuteNonQuery();
   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:20:08.330

但是`sqlDep`设置为字符串的一个实例。它永远不会为空。你需要重新评估你的逻辑。

# datagridview - DataGridView - 获取实际的列宽

> ID：14856770
> 
> 赞同：2
> 
> 时间：2013-02-13T15:18:47.553
> 
> 标签：datagridview, screenshot, column-width, drawtobitmap

我正在开发一个 ASP.NET 网站，其中有一些数据表。我想生成这些数据的图像，以便我可以在论坛上显示这些图像（例如）。我过去使用的方法很简单：我在内存中创建一个 System.Windows.Forms.DataGridView 控件（是的，winforms 控件！），设置样式，加载一些列和行，然后使用它的 DrawToBitmap 方法生成图像（基本上是控件的“屏幕截图”）。

例子：

```
 private static Image WriteGrid(List<object[]> data)
    {
        var grid = new DataGridView();
        grid.Columns.Add("Column 1", "Column 1");  
        grid.Columns.Add("Column 2", "Column 2"); 
        grid.Columns.Add("Column 3", "Column 3");        

        // Ensure columns are large enough to display all data
        grid.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;

        foreach (var row in data)
            grid.Rows.Add(row);         

        var width = GetWidth(grid);
        var height = GetHeight(grid);

        grid.Width = width;
        grid.Height = height;

        var bmp = new Bitmap(width, height);
        grid.DrawToBitmap(bmp, grid.Bounds);
        bmp.Save(Util.Server.MapPath("~/Images/grid.png"), ImageFormat.Png);
        return bmp;
    } 
```

这非常有效，但是我无法计算我应该生成的图像的大小，以及 DataGridView 控件本身的大小。默认情况下，它是 100x100（我认为），因此会删除大部分数据，这对于图像生成毫无用处，因为您显然无法滚动图像......

所以我想计算 DataGridView 应该的宽度和高度，以便它可以在没有滚动条的情况下显示所有数据。

我认为这很简单：遍历列并添加它们的 Width 属性以获得总宽度，然后遍历行并添加它们的 Height 属性以获得总高度：

```
 private static int GetWidth(DataGridView grid)
    {
        int width = 0;
        foreach (DataGridViewColumn col in grid.Columns)
        {
            width += col.Width;
        }
        return width;
    }

    private static int GetHeight(DataGridView grid)
    {
        int height = grid.ColumnHeadersHeight;
        foreach (DataGridViewRow row in grid.Rows)
        {
            height += row.Height;
        }
        return height;
    } 
```

不过，这就是问题所在……每列的 Width 属性始终返回 100，我假设这是列的（默认）MinimumWidth，而不是列的实际宽度。因此，对于三列，我的网格始终为 300 像素宽，即使这些列实际上每列都比 100 像素宽得多。

我猜这是由于我在内存中创建网格而不是实际将其绘制到某个表格这一事实引起的？我相信这应该可行，但出于某种原因，无论我做什么，列宽总是 100 ......这使我的整个想法毫无用处，因为我无法计算网格和图像的必要宽度。我想我可以测量每列中的所有数据字符串并基本上手动调整它们的大小，但我真的不想......一定有更好的方法吗？

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T19:30:02.503

使用 col.GetPreferredWidth(DataGridViewAutoSizeColumnMode.AllCells, true) 这似乎返回您期望的宽度（至少对我而言）。

# regex - 正则表达式基本；防止外标点

> ID：14856773
> 
> 赞同：0
> 
> 时间：2013-02-13T15:18:58.690
> 
> 标签：regex

假设我有一个邮政编码的正则表达式。

```
'\<[0-9]{5}(-[0-9]{4})?\>' 
```

这适用于：

```
XXXXX
XXXXX-XXXX 
```

但它也匹配以下数字：

```
XXXX-
.XXXX- 
```

我用什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:23:59.850

您似乎想将匹配从字符串的开头[锚定](http://www.regular-expressions.info/anchors.html)到结尾，否则它也会尝试匹配输入的部分内容：

```
'^\<[0-9]{5}(-[0-9]{4})?\>$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:24:08.790

您没有指定此字符串必须是它的开头和结尾。只需添加`^`来指示行的开头和`$`来指示行的结尾。

所以结果将是：（假设`\<`and`\>`是您的语言或其他东西所需要的）。

```
'\<^[0-9]{5}(-[0-9]{4})?$\>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:27:19.007

这是原始海报。

```
'^\<[0-9]{5}(-[0-9]{4})?\>$' 
```

和

```
'\<^[0-9]{5}(-[0-9]{4})?$\>' 
```

不要在有噪音的线路上匹配，例如：

```
lskdjfasfldj  XXXXX asfsdfsdf
sdkdsa XXXXX-XXXX asdfsd 
```

这两个正则表达式只匹配一行的开头，而不是一行的中间。

另外，我在带有 grep -E 的 Unix 系统上使用基本的正则表达式。

# javascript - 按属性定位链接

> ID：14856775
> 
> 赞同：0
> 
> 时间：2013-02-13T15:19:03.350
> 
> 标签：javascript

我正在尝试通过 javascript 激活一个链接，如下所示：

```
<a class="second_link nobold" data-type="via_mail" href="http://swap.mtr.com/index.php?id=10&ctid=546432#">Send via mail</a> 
```

我考虑过通过 定位链接`class`，但该类有很多链接。
如何通过 激活链接`data-type="via_mail"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:24:12.610

如果您只针对现代浏览器，您可以使用`document.querySelector`

```
document.querySelector('a.second_link[data-type="via_mail"]').click(); 
```

如果你可以使用 jQuery：

```
$('.second_link[data-type="via_mail"]').click(); 
```

如果以上都没有帮助，你需要再写一些......

```
var ele = document.getElementsByTagName('a');
for (var i = 0; i < ele.length; i++)
    if (ele[i].getAttribute('data-type') == 'via_mail')
        ele[i].click(); 
```

[**现场演示**](http://jsfiddle.net/fz4xb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:24:33.583

根据您计划支持的浏览器，您可以`querySelectorAll`使用大多数现代浏览器：

```
document.querySelectorAll("a[data-type='via_mail']"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:25:58.840

正如其他人所展示的，如果使用/可以使用jQuery，你可以简单地拥有：

```
var link = $("a[data-type='via_mail']")[0]; 
```

但是，如果您要支持的浏览器实现`querySelector`/ `querySelectorAll`，您可以简单地拥有：

```
var link = document.querySelector("a[data-type='via_mail']"); 
```

无需额外的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:22:22.440

这个 javascript 应该适用于每个浏览器：

```
var anchors = document.getElementsByTagName("a");
for (i=0; i < anchors.length; i++) {
    if (anchors[i].getAttribute("data-type") == "via_mail") {
        // GOTCHA!
    }
} 
```

如果你可以使用 jQuery 属性选择器：

```
$('a[data-type="via_mail"]'); 
```

# ember.js - Playframework 2.1 预编译 ember 车把

> ID：14856779
> 
> 赞同：5
> 
> 时间：2013-02-13T15:19:11.240
> 
> 标签：ember.js, playframework-2.0, handlebars.js, rhino, precompile

我正在尝试为 PlayFramework 2.1 编写一个 SBT 插件，它将预编译位于 app/assets/templates 中的车把模板。我当然会在完成后分享这个插件。我发现这个方法[http://eng.netwallet.com/2012/04/25/emberhandlebars-template-precompilation-with-play/](http://eng.netwallet.com/2012/04/25/emberhandlebars-template-precompilation-with-play/)有点过时了，但将它改编为 Play 没问题！2.1。

然后我尝试编译一个简单的模板文件，但 SBT 失败并显示以下内容：

```
ember: processing template test

[error] /.../templates/test.handlebars: Compilation error[unexpected exception during Ember compilation (file=/.../templates/test.handlebars, options=List(), ember=ember-1.0.0-pre.4.js): org.mozilla.javascript.EvaluatorException: missing name after . operator (ember-1.0.0-pre.4.js#3309)]

[error] (MyProject/*:play-copy-assets) @6dap83075: Compilation error in /.../templates/test.handlebars:null

[error] (MyProject/compile:resources) @6dap83075: Compilation error in /.../templates/test.handlebars:null 
```

第 3309 行的 ember-1.0.0-pre.4.js 有一个 volatile 关键字，这显然是在 Rhino 中保留的。

我远不是犀牛专家，这就是为什么我想知道是否有人知道解决这个问题的方法？我现在不是在寻找 5* 解决方案。任何有可能适用于大多数简单车把模板的解决方案（即使是快速而肮脏的 hack，比如使用自定义的 ember.js）都可以工作，一旦功能存在并且 SBT 插件出来，我们会担心对其进行优化。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:16:44.583

我为 Grails 编写了一个等效的插件。如果我从 rhino 1.7R4 切换到 1.7R2，我会得到完全相同的错误。你必须切换到 org.mozilla:rhino:1.7R4。

如果您遇到更多问题，建议您查看我的源代码。你可以从这里开始：[https ://github.com/florent-blanvillain/grails-ember-templates-precompiler/blob/master/src/groovy/org/grails/plugin/ember/handlebars/Precompiler.groovy](https://github.com/florent-blanvillain/grails-ember-templates-precompiler/blob/master/src/groovy/org/grails/plugin/ember/handlebars/Precompiler.groovy)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:29:29.337

这是由于 ember 使用了为 rhino 保留的关键字 volatile，因为它符合 JavaScript EC3。设置 rhino 使用 EC5 没有效果

见[https://github.com/emberjs/ember.js/issues/1202](https://github.com/emberjs/ember.js/issues/1202)

这在 ember-1.0.rc1 中更糟，因为它们使用了其他保留关键字。一个解决方案是使用重命名这些关键字的自定义 ember.js 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:58:30.940

我在 play 2.1 中用于 ember 预编译的插件正在运行。它支持 ember-1.0.0-pre.2、ember-1.0.0-rc.1 和 ember-1.0.0-rc.3 并解决与 rhino 相关的问题。

见 [https://github.com/krumpi/play-emberjs](https://github.com/krumpi/play-emberjs)

# javascript - Javascript OOP，函数

> ID：14856785
> 
> 赞同：-3
> 
> 时间：2013-02-13T15:19:31.043
> 
> 标签：javascript, oop, function, addchild

我正在尝试使用 EnchantJS 制作一个 HTML5/JavaScript 游戏，其中包含一个 6x6 的彩色方块网格。我有 1 张图像要显示，但不是有 36x4 行代码来显示我想将其全部移动到函数中的所有图像。代码在第 62 行中断`this.addChild(block);`。我似乎无法弄清楚为什么这不起作用。过去几天我一直在阅读什么是函数以及如何在函数之间调用信息。我无法弄清楚自己做错了什么，也无法通过搜索找到答案。我来自纯粹的 Java 和 C++ 背景，所以我认为我弄乱了语法并且不理解某些东西。

```
enchant();

window.onload = function() {

    /*
     *  Game width and height.
     *  Note: Game scale is half so actual width=width/2 and 
     *  actual heigh it height/2.
     */
    var game = new Game(1280,768);

    /*
     *  Game Preload Vars
     */
    game.preload('res/bg2x.png',
     'res/block.png');

    game.fps = 30;
    game.scale = 0.5;

    game.onload = function() {

      console.log("Game Loaded");
      var scene = new SceneGame;
      game.pushScene(scene);

    }

    game.start();
    window.scrollTo(0, 0);

    var SceneGame = Class.create(Scene, {

      initialize: function() {

        var game, bg;
        Scene.apply(this);
        game = Game.instance;

        // Background
        bg = new Sprite(1280,768);
        bg.image = game.assets['res/bg2x.png'];

        // Populate Screen
        this.addChild(bg);

        gridBuilder(500,75);

      }

    });

    var gridBuilder = function(x,y) {

      this.x=x;
      this.y=y;

      block = new Block;
      block.x = x;
      block.y = y;
      this.block = block;

      this.addChild(block); // THIS IS WHERE THE ERROR IS OCCURING.

    };

    var Block = Class.create(Sprite, {

        // The player character.     
        initialize: function() {
         // 1 - Call superclass constructor
         Sprite.apply(this,[100, 100]);
         this.image = Game.instance.assets['res/block.png'];
         // 2 - Animate
         this.animationDuration = 0;
         this.addEventListener(Event.ENTER_FRAME, this.updateAnimation);
        },

        updateAnimation: function (evt) {        
          this.animationDuration += evt.elapsed * 0.001;       
          if (this.animationDuration >= 0.25) {
              this.frame = (this.frame + 1) % 4;
              this.animationDuration -= 0.25;
          }
        },

    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:24:47.313

`gridBuilder`是一个函数，仅此而已。它没有`addChild`方法。`addChild`起作用的原因是`SceneGame`因为我认为它具有内在的方法。要么创建与创建类相同的方式，要么重新考虑你真正想做的事情。一种或另一种方式，你正在做的事情没有加起来，你需要考虑你实际上期望你的 JS 完成什么。`SceneGame``Class.create``addChild``gridBuilder``SceneGame``gridBuilder`

# silverlight-5.0 - ServiceStack、Silverlight、LOB。接口和服务实现 程序集 - 最佳实践

> ID：14856786
> 
> 赞同：1
> 
> 时间：2013-02-13T15:19:30.797
> 
> 标签：silverlight-5.0, servicestack, lob

我对 ServiceStack 中的服务合同定义有点困惑。

正如这里提到的[https://github.com/ServiceStack/ServiceStack/wiki/SilverlightServiceClient](https://github.com/ServiceStack/ServiceStack/wiki/SilverlightServiceClient)

它可以使用可移植类库或链接项目。（好的，PCL 的限制是不支持`[RestService]`属性或一般来说，任何外部引用。）

实际上，现在总是有一个`RouteAttribute`used 而不是`RestServiceAttribue`.

有一个新的 API： [https ://github.com/ServiceStack/ServiceStack/wiki/New-Api](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)

因此，可以直接使用泛型或类型来代替`MyCall`,`MyCallResponse`和类，例如：`MyCallService`

```
[Route("/reqstars")]
public class AllReqstars : IReturn<List<Reqstar>> { }

public class ReqstarsService : Service
{
    public List<Reqstar> Get(AllReqstars request) 
    {
        return Db.Select<Reqstar>();
    }
} 
```

现在想想一个香草项目：

1.  我想有一个地方来定义和共享我的 DTO 和“模型”。我只想定义它们一次，用验证属性等标记它们，然后在任何 silverlight 项目以及我流利的 ​​nhibernate 程序集中重用它们以进行数据访问。这就是我所说的合同大会。这可以是每个技术堆栈的 PCL 或链接项目，在我的例子中：Silverlight 和 .NET 4（服务器端）。我不想每天都生成我的服务客户端，这就是为什么我想做通道工厂方法/服务堆栈客户端的方式。

2.  除了拥有 DAL（这不是我的问题的一部分）之外，我还想为服务逻辑本身提供一个单独的程序集。合同和业务逻辑的严格分离。我注意到的第一件事是，我无法找到任何匹配的 nuget-package 来从`Service`（ServiceStack 一个）继承我的服务实现，而不会收到程序集垃圾邮件。最后，我决定使用：

    PM> Install-Package ServiceStack.Host.AspNet ....

    成功将“Microsoft.Web.Infrastructure 1.0.0.0”添加到 HR.RoBP.Services。

    成功将“WebActivator 1.5.3”添加到 HR.RoBP.Services。

    成功将“ServiceStack.Redis 3.9.35”添加到 HR.RoBP.Services。

    成功将“ServiceStack.OrmLite.SqlServer 3.9.35”添加到 HR.RoBP.Services。

    成功将“ServiceStack 3.9.35”添加到 HR.RoBP.Services。

    成功将“ServiceStack.Host.AspNet 3.9.33”添加到 HR.RoBP.Services。

并删除了项目中还添加的文件（App_Start、jquery...等）。

Service 项目由 Host 项目引用和托管。

**路由应该在哪里完成？** 现在我必须在合同中或在主机程序集中手动完成。我假设服务应该说明它应该如何访问/路由。

**我应该将请求/响应模式类移动到服务程序集中吗？**

**我的方法完全错误吗？**

在我使用 WCF 之前。我在合同程序集中有我的模型、请求/响应和 IService 定义，在服务程序集中实现了 IService。主机只需要一个 .svc 文件，它就可以工作。我也能够在没有任何通信框架的情况下直接调用服务（例如，从命令行应用程序而不实例化 wcf 端点）来使用它。

```
var result = new MyCallService().Execute(new MyCall() { MyParamater="Value"}) 
```

对比

```
var result = new MyCallService().MyCall("Value"); 
```

我是否应该介绍 IMyCallService 的老式方式，实现它，并在 MyCallService (ServiceStack) Execute() 方法中调用它，使用 ioc 的东西......

```
public class MyCallSevice : Service
{
    // use DI
    [Import]
    public IMyCallService ServiceInstance { private get; set; }
    public MyCallResponse Execute(MyCall request)
    {
        return new MyCallResponse(ServiceInstance.MyCall(request.MyParameter));
    }
}

// or use the Request Response directly in the Service? so that it looks like this:

public class MyCallSevice : Service
{
    // use DI
    [Import]
    public IMyCallService ServiceInstance { private get; set; }
    public MyCallResponse Execute(MyCall request)
    {
        return ServiceInstance.MyCall(request);
    }
} 
```

我的目标是提高应用程序执行时的速度以及编码速度。添加新方法时，我不想有太多的地方或步骤。

**我应该做的最佳做法是什么？** 欢迎任何提示或经验数据！

非常感谢！

# php - 显示特定字母的数组值

> ID：14856787
> 
> 赞同：2
> 
> 时间：2013-02-13T15:19:31.507
> 
> 标签：php, loops

下面的代码显示了存储在数组中的所有值，但我的目标输出仅显示以字母 T 开头的值。

有人可以帮我转换此代码以仅提取以字母 T 开头的值吗？

```
<?php
$cars=array("Volvo1","Volvo2","Volvo3","Volvo4","Volvo5","Volvo6",
            "BMW1","BMW2","BMW3","BMW4","BMW5","BMW"6,
            "Toyota1","Toyota2","Toyota3","Toyota4","Toyota5","Toyota6");
$arrlength=count($cars);

for($x = 0;$x < $arrlength; $x++)
  {
  echo $cars[$x];
  echo "<br>";
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:30:07.840

你可以试试这样的东西吗？

```
<?php
       $cars=array("Volvo1","Volvo2","Volvo3","Volvo4","Volvo5","Volvo6","BMW1","BMW2","BMW3","BMW4","BMW5","BMW", "Toyota1","Toyota2","Toyota3","Toyota4","Toyota5","Toyota6");
       $arrlength=count($cars);

       for($x = 0;$x < $arrlength; $x++)
       {
            // substr(string, start, length)
            if(substr($cars[$x], 0, 1) === 'T')
            {
               echo $cars[$x];
               echo "<br>";
            }

            // or use this
            // 0 is first character of the string
            if($cars[$x][0] === 'T')
            {
               echo $cars[$x];
               echo "<br>";
            }

        }
?> 
```

但更好的方法是使用循环而不是使用`for`循环`foreach`，如下所示，

```
<?php
           $cars=array("Volvo1","Volvo2","Volvo3","Volvo4","Volvo5","Volvo6","BMW1","BMW2","BMW3","BMW4","BMW5","BMW", "Toyota1","Toyota2","Toyota3","Toyota4","Toyota5","Toyota6");

           foreach($cars as $car)
           {
                // substr(string, start, length)
                if(substr($car, 0, 1) === 'T')
                {
                   echo $car;
                   echo "<br>";
                }

                // or use this
                // 0 is first character of the string
                if($car[0] === 'T')
                {
                   echo $car;
                   echo "<br>";
                }

            }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:35:44.777

```
<?php
$cars=array("Volvo1","Volvo2","Volvo3","Volvo4","Volvo5","Volvo6",
            "BMW1","BMW2","BMW3","BMW4","BMW5","BMW6",
            "Toyota1","Toyota2","Toyota3","Toyota4","Toyota5","Toyota6");
$arrlength=count($cars);

$key = "T"; //Or what you want
for($x = 0;$x < $arrlength; $x++)
  {
    if($cars[$x][0]==$key) 
    {
        echo $cars[$x];
        echo "<br>";
    }   
  }
?> 
```

# ios - 我可以使用 Monotouch.dialog 自定义搜索栏吗

> ID：14856793
> 
> 赞同：2
> 
> 时间：2013-02-13T15:19:48.673
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我创建了一个自定义的单点触控对话框视图控制器，并且我设置了：

```
EnableSearch = true 
```

但是，我使用的是深灰色背景色，并且我也有黑色 UINavigationBar。所以出现在我的 DialogViewController 中的默认搜索栏看起来很不合适。

有没有办法可以自定义它的颜色，或者子类 UISearchBar 或类似的东西来让这个搜索栏适合我在我的应用程序中使用的其他颜色？

感谢您的任何帮助或指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:24:24.007

看起来我应该在发布这个问题之前在最初的搜索中尝试使用“tint”这个词。这个问题的答案是关于以下问题：[Monotouch.Dialog - UISearchBar Tint](https://stackoverflow.com/questions/8622200/monotouch-dialog-uisearchbar-tint)

总结一下这个线程中提到的内容，您只需将 TableView.TableHeaderView 转换为 UISearchBar 并使用 TintColor 属性来设置您想要的值。

```
((UISearchBar) TableView.TableHeaderView).TintColor = UIColor.Black; 
```

:)

# session - 使用会话而不在 Application.cfm 中声明会话

> ID：14856795
> 
> 赞同：-4
> 
> 时间：2013-02-13T15:19:50.210
> 
> 标签：session, coldfusion, application.cfm

我需要在coldfusion中使用会话而不在application.cfm中声明会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:50:03.533

你有没有想过不做会话但做一个客户端变量？

```
<CFQUERY NAME="getLogin" datasource="#reqest.dsn#">
     SELECT int_pk_id
     FROM tbl_users
     WHERE var_email = <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FORM.Email#">
</CFQUERY>
<CFSET CLIENT.User_ID = "#getLogin.int_pk_id#"> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-14T12:02:35.303

我认为，可以在页面上声明具有空值的会话变量，并且可以在您想要使用的地方使用。

# android - 获取资源编号值时没有包标识符

> ID：14856796
> 
> 赞同：5
> 
> 时间：2013-02-13T15:19:52.743
> 
> 标签：android

我已经阅读过类似标题的问题。 ![在此处输入图像描述](../Images/51c0461b78d7ca16245dbf90e54ce5f2.png)

就像你可以看到没有太多的信息。

我在 R 文件中检查了没有 0x00000021c 资源。

当我按下一个按钮并且我正在创建一个新的 Intent 并且我想将一个新的 Activity 加载到屏幕上时，就会发生这种情况。它就像一个“下一个屏幕”按钮......

新**活动很大**，现在我正在拆分动态和静态部分：很多 xml-s，而不是一个简单的 1-2 视图。大约总共 100 次观看？

当我看到其他问题和答案时，我想我有一个 .setText("Some invalid stuff here")

**知道如何找到那条线，除了调试器一步一步地超过数千行吗？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T09:30:09.967

请同时检查按钮设置值，并执行 a`setText(""+intValue)`而不是`setText(intValue)`

# java - 数百个 CLOSE_WAIT 连接正在吞噬我的线程池

> ID：14856799
> 
> 赞同：2
> 
> 时间：2013-02-13T15:19:56.317
> 
> 标签：java, tcp, jboss, wait

我们的处境非常残酷。我们在德国有一个网站，它是一家在线商店。一天多次，我们有大量处于 CLOSE_WAIT 状态的连接出现在 netstat 中，来自同一个 IP。不同的IP，但都在中国。我们确实还有中国客户。检查访问日志，我们看到来自问题ip的流量来自一个浏览器（useragent，session id），但它看起来不像真正的流量，例如连续请求/ 500次，没有请求css ,js,它背后的图像。所以我们最终得到的是在 socketWrite0 中有 1000 个线程，其中 820 个线程将绑定到相同的 ip：

```
"http--0.0.0.0-8443-1201" daemon prio=10 tid=0x00007f7435257800 nid=0x5361 runnable [0x00007f73e162a000]
   java.lang.Thread.State: RUNNABLE
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:724)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)
    at org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:748)
    at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:126)
    at org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:559)
    at org.apache.coyote.Response.doWrite(Response.java:594)
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:398)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
    at org.apache.catalina.connector.OutputBuffer.realWriteChars(OutputBuffer.java:473)
    at org.apache.tomcat.util.buf.CharChunk.flushBuffer(CharChunk.java:469)
    at org.apache.tomcat.util.buf.CharChunk.append(CharChunk.java:295)
    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:505)
    at org.apache.catalina.connector.CoyoteWriter.write(CoyoteWriter.java:143)
    at org.apache.catalina.connector.CoyoteWriter.write(CoyoteWriter.java:152)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:240)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:488)
    at x.y.z.common.web.dispatch.StartPageDispatcherServlet.forward(StartPageDispatcherServlet.java:52)
    at x.y.z.common.web.dispatch.StartPageDispatcherServlet.service(StartPageDispatcherServlet.java:37)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at net.anotheria.moskito.web.MoskitoFilter.doFilter(MoskitoFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at net.anotheria.moskito.web.MoskitoFilter.doFilter(MoskitoFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at net.anotheria.moskito.web.filters.JourneyFilter.doFilter(JourneyFilter.java:84)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at net.anotheria.moskito.web.filters.MoskitoCommandFilter.doFilter(MoskitoCommandFilter.java:26)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at x.y.z.common.web.useragent.TouchScreenDeviceFilter.doFilter(TouchScreenDeviceFilter.java:42)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at x.y.z.common.web.LandingPageFilter.doFilter(LandingPageFilter.java:44)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at x.y.z.common.web.CharsetFilter.doFilter(CharsetFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397)
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.rewrite.RewriteValve.invoke(RewriteValve.java:466)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    at java.lang.Thread.run(Thread.java:722) 
```

grepping netstat 输出显示此 ip 在 CLOSE_WAIT 中有 817 个连接，在 ESTABLISHED 状态中有 3 个连接。

访问日志显示：

```
140.206.78.100 [13/Feb/2013:15:20:48 +0100] http--0.0.0.0-8443-364 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1276 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:50 +0100] http--0.0.0.0-8443-364 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1259 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:51 +0100] http--0.0.0.0-8443-477 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 2991 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:53 +0100] http--0.0.0.0-8443-428 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 2456 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:54 +0100] http--0.0.0.0-8443-639 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1305 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:54 +0100] http--0.0.0.0-8443-491 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1326 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:56 +0100] http--0.0.0.0-8443-491 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1293 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:57 +0100] http--0.0.0.0-8443-663 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1315 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:20:59 +0100] http--0.0.0.0-8443-663 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 1277 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
140.206.78.100 [13/Feb/2013:15:21:02 +0100] http--0.0.0.0-8443-225 GET  o1uNdliDOQhJkDnbvXo4RIZ2.undefined 2427 HTTP/1.1 443 / 200 Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
1 
```

我们使用 Jboss AS 7、java 6/7（两者都试过）、vm 上的 ubuntu、ssl 卸载和使用 alteon 负载平衡器的负载平衡。

PS：添加了 netstat 示例，其中三个：

```
tcp        0      0 my.public.ip:8443       140.206.78.100:14186    ESTABLISHED
tcp        0  35040 my.public.ip:8443       140.206.78.100:14620    ESTABLISHED
tcp        0  35040 my.public.ip:8443       140.206.78.100:13859    ESTABLISHED 
```

其中817个：

```
tcp        1  35040 my.public.ip:8443       140.206.78.100:13233    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:11649    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:11605    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:11892    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:13692    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:11988    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:13055    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:13242    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:13073    CLOSE_WAIT 
tcp        1  37960 my.public.ip:8443       140.206.78.100:10176    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:14557    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:12288    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:12509    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:11049    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:11839    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:14208    CLOSE_WAIT 
tcp        1  35040 my.public.ip:8443       140.206.78.100:14662    CLOSE_WAIT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:50:36.637

您正在受到拒绝服务攻击。将该客户端 IP 地址列入黑名单。

# python - psycopg2 数据库异常：UnicodeError

> ID：14856801
> 
> 赞同：1
> 
> 时间：2013-02-13T15:20:01.410
> 
> 标签：python, django, psycopg2

带有 psycopg2 的 django 中的 DatabaseErrors 有时是非 ascii 字节字符串：

```
DatabaseError('FEHLER:  Wert zu lang f\xc3\xbcr Typ character varying(10)\n',) 
```

这会导致 UnicodeErrors .....

所有其他 unicode 处理工作正常。有没有机会从 psycopg2 获取错误消息作为 unicode 字符串？

版本：python-psycopg2-2.4.4-2.1.x86_64

# assembly - Turbo 汇编器 cs 部分解释

> ID：14856809
> 
> 赞同：2
> 
> 时间：2013-02-13T15:20:20.573
> 
> 标签：assembly, tasm

我正在尝试跟踪我使用 turbo 汇编器搜索过的程序，但我储存了以下值：

```
cs:0006->8ED8           mov ds,ax
cs:0392->66B800060000   mov eax,00000600
cs:039A->66B900000000   mov ecx,00000000 
```

有人可以帮我解释一下吗？特别是cs部分显示的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:22:33.823

“cs”指的是当前代码段，后面的数字指的是段内的偏移量。箭头后面的数字是指令的操作码。

```
cs:0006->8ED8           mov ds,ax
 ^   ^     ^
 |   |     |
 |   |     +-- Opcode of the "mov ds,ax" instruction
 |   |
 |   +-- Offset of the instruction within the code segment (6 bytes)
 |
 +-- Current code segment, see contents of your CS register 
```

有关更多详细信息，另请参阅[X86 内存分段](http://en.wikipedia.org/wiki/X86_memory_segmentation)。

有关 x86 操作码的列表，请参阅[http://ref.x86asm.net/](http://ref.x86asm.net/)

# sitecore - Sitecore 为文件夹分配模板

> ID：14856812
> 
> 赞同：0
> 
> 时间：2013-02-13T15:20:34.117
> 
> 标签：sitecore, sitecore6

我知道在 sitecore 6.5 中，您可以分配（通过配置选项卡）用户在插入新项目时可以使用的特定模板，但是您如何在代码中做到这一点？

我在代码中创建常规文件夹，我想为每个创建的文件夹分配特定的模板，但我没有看到“项目”类的任何“分配”、“配置”选项。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:36:27.467

您指的是项目的插入选项。这存储在系统字段**__Masters**`Insert Options`中的项目本身上，就像您选中功能区`Standard Fields`上的复选框一样显示`View`。

在该字段中，您可以添加要允许插入的模板的模板 ID（如果您有多个 ID，则用管道分隔）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:37:07.090

在内容树中选择项目后，您可以导航到“配置”选项卡并选择“分配”以将特定插入选项添加到项目。

此外，您可以创建一个插入选项规则，以根据一个或多个条件动态地将插入选项分配给项目。您可以在此处找到几个插入选项规则的示例：/sitecore/Settings/Rules/Insert Options/Rules。

与在特定项目上设置插入选项相比，插入选项规则提供了一些优势——例如，能够将插入选项规则与内容项目本身分开打包。如果有人意外删除了您的一个内容项，这也很有用。如果在项目本身上设置了插入选项，如果内容编辑器删除该项目，您将失去该逻辑。使用插入选项规则，如果您或其他人在其位置创建了新项目并且该新项目满足插入选项规则中定义的条件，则您不一定需要重新创建这些插入选项。

# mysql - 我想从每个类别（4 个类别）中获取访问量最大的文章

> ID：14856818
> 
> 赞同：2
> 
> 时间：2013-02-13T15:20:52.450
> 
> 标签：mysql, sql, select, group-by

我在数据库的表中有**4 个类别**。
我想从数据库中的每个类别中获取访问次数最多的四篇文章。
这意味着得到`(4 articles most visited from category1)`+ `(4 articles most visited from category2)`+ `(4 articles most visited from category3)`+ `(4 articles most visited from category4)`= Total `16 articles`from `4 categories`。

我想通过一个查询来做到这一点。

普通查询：

```
$sql="select ID,name,country from article where `active`='yes' order by `visit` desc limit 16 "; 
```

**文章表结构：**

```
CREATE TABLE `article` (
  `ID` int(11) NOT NULL auto_increment,
  `name` varchar(255) NOT NULL default '',
  `country` varchar(50) NOT NULL default '',
  `town` varchar(30) NOT NULL default '',
  `other_town` varchar(30) NOT NULL default '',
  `title` varchar(255) NOT NULL default '0',
  `size` varchar(30) NOT NULL default '',
  `type` varchar(30) NOT NULL default '',
  `tel` varchar(30) NOT NULL default '',
  `mobile` varchar(30) NOT NULL default '',
  `connect` varchar(30) NOT NULL default '',
  `email` varchar(30) NOT NULL default '',
  `photo1` varchar(100) NOT NULL default '',
  `print` varchar(30) NOT NULL default '',
  `small_pic1` varchar(100) NOT NULL default '',
  `detail` text NOT NULL,
  `add_by` int(11) NOT NULL default '0',
  `cat` int(11) NOT NULL default '0',
  `goods_type` enum('new','old') NOT NULL,
  `add_date` date NOT NULL default '0000-00-00',
  `end_date` date NOT NULL default '0000-00-00',
  `period` varchar(30) NOT NULL default '',
  `visit` int(11) NOT NULL default '0',
  `comment` int(30) NOT NULL default '0',
  `fav` varchar(15) NOT NULL default '',
  `favorite` varchar(15) NOT NULL default '',
  `active` varchar(15) NOT NULL default '',
  `rate` int(11) NOT NULL default '0',
  `short` text NOT NULL,
  `add_to` varchar(50) NOT NULL default '',
  `author` varchar(50) NOT NULL default '',
  `author_img` varchar(50) NOT NULL default '',
  `lang` varchar(10) NOT NULL default '',
  `budget` varchar(50) NOT NULL default '',
  PRIMARY KEY  (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ; 
```

**类别表结构：**

```
CREATE TABLE `category` (
  `ID` int(11) NOT NULL auto_increment,
  `name` varchar(255) NOT NULL default '',
  `img` varchar(255) NOT NULL default '',
  `sub` int(11) NOT NULL default '0',
  `type` varchar(20) NOT NULL default '',
  `lang` varchar(10) NOT NULL default '',
  `active` varchar(25) NOT NULL default '',
  `add_by` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:59:51.860

这可以做到，但不是 100% 直截了当。我从我以前读过的一个 SO 问题中为这篇文章添加了书签（也会尝试查找/链接）。基本上，如果您希望每个查询都使用这一组，您可以只使用 ORDER BY 和 LIMIT，但是要在一个查询中完成所有操作，请按照链接的文章进行详细介绍。

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

对于后代，我将尝试根据他提供的第一种方法发布一个示例摘要查询，该方法可以与类别数量成比例地随时间呈指数增长：

```
select ID, name, country, cat, visit
from article
where visit = (select max(visit) from article as a where a.cat = article.cat)
or visit = (select max(visit) from article as a where a.cat = article.cat
   and visit < (select max(visit) from article as a2 where a2.cat = article.cat))

or visit = (select max(visit) from article as a where a.cat = article.cat
  and a.visit < (select max(a2.visit) from article as a2 where a2.cat = article.cat
  and a2.visit < (select max(a3.visit) from article as a3 where a3.cat = article.cat)))

or visit = (select max(visit) from article as a where a.cat = article.cat
  and a.visit < (select max(a2.visit) from article as a2 where a2.cat = article.cat
  and a2.visit < (select max(a3.visit) from article as a3 where a3.cat = article.cat
  and a3.visit < (select max(a4.visit) from article as a4 where a4.cat =    article.cat))))
order by cat, visit desc 
```

或者，如果您想要在不指定类别的情况下订购，只需访问 desc 订购

这将返回每个类别中的前四名，但请注意您要查找的每个级别的查询嵌套，如果您需要继续深入，请按照他的说明获取更好的选择（他，我将其描述为 YUCK） .

SQL小提琴：[http ://www.sqlfiddle.com/#!2/e115f/26](http://www.sqlfiddle.com/#!2/e115f/26)

同样为了后代，我的测试数据：

```
CREATE TABLE article (
 ID int auto_increment primary key, 
 name varchar(20), 
 country varchar(30),
 cat int,
 visit int
);

INSERT INTO article (name, country, cat, visit) VALUES
 ('Test1', 'Canada', 1, 7),('Test2', 'Canada', 1, 2),('Test3', 'Ireland', 1, 1),
 ('Test5', 'Ireland', 1, 3),('Test6', 'Ireland', 1, 8),('Test7', 'India', 1, 9),
 ('Test8', 'Canada', 2, 11),('Test9', 'Canada', 2, 13),('Test10', 'Ireland', 2, 6),
 ('Test11', 'Ireland', 2, 5),('Test12', 'Ireland', 2, 1),('Test13', 'India', 3, 1),
 ('Test14', 'India', 3, 9),('Test15', 'India', 3, 8),('Test16', 'India', 3, 54); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:02:58.363

这应该这样做。基本上确定每个类别的行号，然后按访问列排序并选择前 4 个。这是一个精简版本，但应该明白这一点（添加您需要返回的字段）：

```
SELECT Id, Cat, Visit, Name
FROM (
    SELECT 
      @curRow:=CASE WHEN @prevRow = A.cat THEN @curRow+1 ELSE 1 END AS rn,
      A.Id, 
      A.Visit,
      A.Cat, A.Name, 
      @prevRow:=A.cat AS clset
    FROM (SELECT A.Id, C.Id as Cat, A.Visit, C.Name
          FROM Articles A
            JOIN Category C ON A.cat = C.id
          ORDER BY A.Cat, A.Visit DESC
          ) A
      JOIN (SELECT @curRow:=0) r
      JOIN (SELECT @prevRow:=0) r2
  ) B
  WHERE rn <= 4 
```

还有一些小提琴：[http ://sqlfiddle.com/#!2/b7260/1](http://sqlfiddle.com/#!2/b7260/1)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:03:15.077

尝试这个：

```
SELECT ID, NAME, country, catCnt 
FROM (SELECT ID, NAME, country, cat, IF(@cat=(@cat:=cat), @cnt:=@cnt+1, @cnt:=1) catCnt 
      FROM (SELECT ID, NAME, country, cat FROM article WHERE `active`='yes' ORDER BY cat, `visit` DESC) A, 
           (SELECT @cat := 0, @cnt:=1) B
      ) A 
GROUP BY cat HAVING catCnt <= 4; 
```

**或者**

```
SELECT ID, NAME, country
FROM (SELECT ID, NAME, country, cat, IF(@cat=(@cat:=cat), @cnt:=@cnt+1, @cnt:=1) catCnt 
      FROM (SELECT ID, NAME, country, cat FROM article WHERE `active`='yes' ORDER BY cat, `visit` DESC) A, 
           (SELECT @cat := 0, @cnt:=1) B
      ) A 
WHERE catCnt <= 4; 
```

# css - 外部字体（@font-face）不适用于 Firefox

> ID：14856820
> 
> 赞同：2
> 
> 时间：2013-02-13T15:21:06.963
> 
> 标签：css, firefox

这是我的代码

```
@font-face {
    font-family: 'WebSymbolsRegular';
    src: url('websymbols-regular-webfont.eot');
    src: url('websymbols-regular-webfont.eot?#iefix') format('embedded-opentype'),
        url('websymbols-regular-webfont.woff') format('woff'),
        url('websymbols-regular-webfont.ttf') format('truetype'),
        url('websymbols-regular-webfont.otf') format('opentype'),
        url('websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

这是我的头文件

```
<link rel="stylesheet" href="css/fontstylesheet.css" type="text/css" media="screen" />
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T09:38:29.563

检查字体文件路径。如果您将字体放在 css 文件夹之外的单独字体文件夹中，则意味着提到 css 中的字体包路径并尝试它工作正常..

```
@font-face {
    font-family: 'WebSymbolsRegular';
    src: url('../fonts/websymbols-regular-webfont.eot');
    src: url('../fonts/websymbols-regular-webfont.eot?#iefix') format('embedded-opentype'),
        url('../fonts/websymbols-regular-webfont.woff') format('woff'),
        url('../fonts/websymbols-regular-webfont.ttf') format('truetype'),
        url('../fonts/websymbols-regular-webfont.otf') format('opentype'),
        url('../fonts/websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# ios - 向 UIView 添加填充

> ID：14856821
> 
> 赞同：73
> 
> 时间：2013-02-13T15:21:07.690
> 
> 标签：ios, iphone, cocoa-touch, uiview, uikit

我正在寻找一种将`padding`属性添加到 UIView 的方法。理想情况下，我想避免子类化并将其放在一个类别中。用法类似于：

```
myview.padding = UIEdgeInsetsMake(10, 10, 10, 10); 
```

并且可能还有一个`paddingBox`属性，它将返回`CGRect`描述内部填充框的大小和位置。

现在，如何在一个类别中实现类似的东西。我最初虽然使用`bounds`，但不幸的`bounds`是， 的大小与`frame`（始终相同）的大小相关，只有坐标可以不同。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-13T15:46:10.470

这通常通过在视图中设置边界来完成。所以如果你想要一个 10 的插页，你可以这样做：

```
view.bounds = CGRectInset(view.frame, 10.0f, 10.0f); 
```

边界定义了视图的可绘制区域，相对于框架。所以这应该有效地填充。然后，您可以仅从边界获取“填充框”。

希望这可以帮助！:)

在 Swift 5+ 中更新，它是

```
view.bounds = view.frame.insetBy(dx: 10.0, dy: 10.0); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2017-01-31T21:34:08.457

**Swift 3 更新**

```
view.bounds = view.frame.insetBy(dx: 10.0, dy: 10.0) 
```

:)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-01-31T21:41:32.513

**更新**：由于 iOS11 你应该使用`directionalLayoutMargins`而不是`layoutMargins`.

来源：[https ://developer.apple.com/documentation/uikit/uiview/1622566-layoutmargins?language=objc](https://developer.apple.com/documentation/uikit/uiview/1622566-layoutmargins?language=objc)

从 iOS 8 开始，每个视图现在都有一个`layoutMargins`对应于 padding 的属性。

```
myview.layoutMargins = UIEdgeInsetsMake(10, 10, 10, 10); 
```

当您使用 AutoLayout 时，带有 的格式`|-[subview]-|`将`|-`引用用 定义的边缘`layoutMargins`。

来源：[https ://developer.apple.com/reference/uikit/uiview/1622566-layoutmargins?language=objc](https://developer.apple.com/reference/uikit/uiview/1622566-layoutmargins?language=objc)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-11-27T16:19:55.897

您可以覆盖 alignmentRectInsets 属性。这是 Swift 4 中的一个示例

```
class YourCustomView: UIView {

    override var alignmentRectInsets: UIEdgeInsets {
        return UIEdgeInsets(top: 10, left: 10, bottom: 10, right: 10)
    }
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-05-01T23:14:20.360

您真正需要做的是创建一个视图并向其中添加一个子视图。将一个视图作为背景并为其提供所需的框架。然后使用边缘插图使第二个子视图成为您想要的框架。

```
UIView backgroundView = new UIView(CGRect.FromLTRB(0, 0, 100, 100))
{
    BackgroundColor = backgroundGray,
};

//Will have a right edge inset of 10
UIView edgyView = new UIView(CGRect.FromLTRB(0, 0, 90, 100))
{
    BackgroundColor = backgroundGray,
}

backgroundView.AddSubview(edgyView); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-03-13T15:59:05.120

Swift 4 的更新：

```
self.yourView.layoutMargins = UIEdgeInsets(top: 8, left: 8, bottom: 8, right: 8) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-25T03:24:48.273

您可以像这样插入视图的框架/边界：

```
 yourView.frame = yourView.frame.inset(by: UIEdgeInsets(top: .zero, left: 5.0, bottom: 5.0, right: .zero) 
```

# php - wpdb 类中的 sprintf() 函数出错

> ID：14856822
> 
> 赞同：0
> 
> 时间：2013-02-13T15:21:10.157
> 
> 标签：php, printf, wordpress

当我尝试运行我的 PHP 应用程序时，出现错误：

致命错误：在第 1499 行的 J:\sambit\UniServer\www\bbplan_console\inc\wp-db.php 中调用未定义函数 __()

第 1499 行的代码是：

```
function select( $db, $dbh = null ) {
   if ( is_null($dbh) )
      $dbh = $this->dbh;

   if ( !@mysql_select_db( $db, $dbh ) ) {
      $this->ready = false;
      //wp_load_translations_early();

      // Line 1499 follows:
      $this->bail( sprintf( __( '<h1>Can&#8217;t select 
```

`sprintf()`是一个函数。我不知道为什么这会显示错误，因为这是 wp-db 类本身的功能。我没有创建这个。

# ruby-on-rails - 嵌套表单未插入数据库？

> ID：14856824
> 
> 赞同：1
> 
> 时间：2013-02-13T15:21:11.720
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes

我有一个嵌套表单，它拒绝将新记录插入数据库，尽管父级插入很好。毫无疑问，这是一个显而易见的问题，但有人能告诉我为什么吗？

父模型：

```
class Delivery < ActiveRecord::Base
  attr_accessible :orders_attributes
  has_many :orders, as: :orderable
  accepts_nested_attributes_for :orders 
```

嵌套模型

```
class Order < ActiveRecord::Base
  attr_accessible :info
  belongs_to :orderable, polymorphic: true
  belongs_to :delivery 
```

父控制器

```
 def new
    @delivery = Delivery.new
    order = @delivery.orders.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @delivery }
    end
  end 
```

形式

```
= form_for @delivery do |f|

  = fields_for :orders do |builder|
    = builder.label :info
    = builder.text_area :info
  .actions
    = f.submit 
```

输出：

> 在 2013 年 2 月 13 日 16:06:53 +0100 开始 POST "/deliveries" for 127.0.0.1 由 DeliveriesController#create 作为 HTML 参数处理：{"utf8"=>"✓", "authenticity_token"=>"MdNjphnBQaaHdxelT7RnWDNG2XPpDTQipDKAOKT57h0= ", "orders"=>{"info"=>"1222"}, "commit"=>"Create Delivery"} (0.1ms) 开始事务 SQL (2.7ms) INSERT INTO "deliveries" ("created_at", " updated_at") VALUES (?, ?) [["created_at"，2013 年 2 月 13 日星期三 15:06:53 UTC +00:00]，["updated_at"，2013 年 2 月 13 日星期三 15:06:53 UTC +00 :00]] (1.3ms) 提交事务重定向到

您可以看到它正在发布订单数据，但它没有将其正确放入数据库......我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:26:13.913

我想你需要

```
form_for @delivery do |f|

  = f.fields_for :orders do |builder|
    = builder.label :info
    = builder.text_area :info
  .actions
    = f.submit 
```

注意 f.fields_for 是不同的

# ios - 在 iBook 中打开 .ibook 文件的 iOS 应用

> ID：14856825
> 
> 赞同：-1
> 
> 时间：2013-02-13T15:21:22.190
> 
> 标签：ios, ibooks

我的应用程序会将一些 .ibook 文件下载到应用程序支持目录中的 iphone。现在想使用 iBook 应用程序打开这个 .ibook 文件，方法是打开“itms-books://xxxxxxx”之类的 URL

我的问题是 .ibook 文件的正确路径应该是什么？

我曾经使用路径“file://....”访问我的应用程序中的本地文件。

在模拟器的情况下，它将是“file://localhost/Users/.../Library/Application%20Support/iPhone%20Simulator/6.1/Applications/5C67C211-6DC6-43A1-A25A-B1FBB4000C64/Library/Application%20Support/书夹/example.ibooks"

我只是将它附加到“itms-books://”。虽然 iBook 应用程序已启动，但它并没有打开我的 example.ibooks，而是将我带到书店。

任何人都可以给我一个简单的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:22:13.560

您**无法**在 iBooks 应用程序中打开*.ibook 。*

# android - android.webkit.WebView.loadUrl 崩溃报告中的 trigger.io java.lang.NullPointerException

> ID：14856826
> 
> 赞同：1
> 
> 时间：2013-02-13T15:21:25.180
> 
> 标签：android, android-webview, trigger.io

我从 Google Play 收到了一些使用 Trigger.io 创建的 Android 应用程序的崩溃报告。

我如何追踪这里发生的事情？这是我收到的报告：

android.webkit.WebView.loadUrl 中的 java.lang.NullPointerException

```
java.lang.NullPointerException
at android.webkit.WebView.loadUrl(WebView.java:1900)
at android.webkit.WebView.loadUrl(WebView.java:1912)
at io.trigger.forge.android.core.ForgeActivity$4.run(ForgeActivity.java:442)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4196)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

# html - 假设我可以控制服务器，包含 在我的 HTML 中是否有任何意义？

> ID：14856827
> 
> 赞同：0
> 
> 时间：2013-02-13T15:21:38.297
> 
> 标签：html, http, utf-8, character-encoding, meta-tags

我正在运行一个网站，我可以完全控制服务器和页面内容。

我目前使用 UTF-8 文本编码为所有页面提供服务。我在 HTTP`Content-Type`标头 ( `text/html; charset=utf-8`) 和 HTML ( `<meta charset="utf-8">`) 中声明了这一点。

据我了解，用户代理应该（并且确实）将 HTTP 标头优先于 HTML 标记。

鉴于我在 HTTP 标头中声明了编码，是否也将其包含在 HTML 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:23:05.893

是的。

这将确保页面被正确地呈现给被破坏的代理后的用户，这些代理会剥离或破坏标题。

# java - 为什么这种方法是错误的？

> ID：14856833
> 
> 赞同：0
> 
> 时间：2013-02-13T15:21:58.477
> 
> 标签：java

这个问题更像是谜题而不是真正的问题，

这种方法有什么问题：

```
public boolean areEqual(Long a, long b)
{
return a==b;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T15:24:20.067

它没有任何问题，除了它可以抛出一个`NullPointerException`if `a`is `null`（自动拆箱将抛出一个 NPE）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:24:56.000

这取决于...

例如，如果你传递 null 作为第一个参数（你可以），你会得到一个`NullPointerException`, 因为`toLongValue`将在对象上调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:24:29.167

由于自动装箱/拆箱

这种方法没有任何问题（好吧，只有当`a`它为空时，它才能抛出 NPE）......

但是如果错误意味着不好的做法，那么您没有使用良好的缩进并且不遵循 java 编码约定（第一行的括号）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:29:11.300

您的 a 值可以为 null（Long 类型）而 b 不能为（long 类型）因此 a==b 在 a==null 时会导致 nullpointer。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T15:26:18.230

Long a 应该是一个指向 long 值的指针

long b 应该是一个 long 值

所以如果你测试等于你测试一个指针（值）与一个长值

# java - 使用 apache poi (.xlsx) 的 excel 2007 不可读内容

> ID：14856834
> 
> 赞同：3
> 
> 时间：2013-02-13T15:22:02.173
> 
> 标签：java, excel, excel-2007, row, apache-poi

我在使用 XSSF 的 apache poi for excel 2007 时遇到问题

我在下面有两个代码片段（胖手指）。第一个似乎有效，因为工作簿在 excel 2007 中正确打开，并且有一些变化。

如果我运行第二个代码片段然后在 excel 2007 中打开，我会收到有关不可读内容的错误。我必须单击一个确认框，然后 excel 会打开我的文件。

为什么第二个代码片段会导致此错误？唯一的区别是第二个我试图将所有行从第 2 行（零索引）向上移动两行......

我真正想做的就是删除一些标题行，然后从文件中删除一些页脚行。我没有做任何花哨的事情。我猜我误解了 API，但我已经为此奋斗了一段时间。

有任何想法吗？我还应该移动行，还是删除它们，或者两者兼而有之？

```
String filename = "C:\\file.xlsx";
FileInputStream file = new FileInputStream( new File(fileName) );

XSSFWorkbook wb = new XSSFWorkbook(file);

XSSFSheet sheet = wb.getSheetAt(0);
int lastRow = sheet.getlastRow();

sheet.shiftRows(1, lastRow, -1);

file.close()
FileOutputStream out = new FileOutputStream(fileName);
wb.write(out);
out.flush();
out.close(); 
```

* * *

```
String filename = "C:\\file.xlsx";
FileInputStream file = new FileInputStream( new File(fileName) );

XSSFWorkbook wb = new XSSFWorkbook(file);

XSSFSheet sheet = wb.getSheetAt(0);
int lastRow = sheet.getlastRow();

sheet.shiftRows(2, lastRow, -2);

file.close()
FileOutputStream out = new FileOutputStream(fileName);
wb.write(out);
out.flush();
out.close(); 
```

编辑：实际上，第一个片段也引起了问题……有时？？？？我的印象是我做错了什么......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T11:11:20.153

I have run into a similar problem. I think that the problem might lie with the handling of comments. In my case, the excel file was reported as "damaged" by Excel whenever a shift was done when comments were present. Excel repaired the file and reported that it deleted the comments part and the rest was fine. Excel files without comments but with the same processing code, did not cause any problems.

Sorry that this does not solve the problem, but maybe it provides for a workaround. In my case, I delete all the comments programmatically (ugly).

# c++ - 由于 Qt 中的拖放导致未知的间歇性崩溃

> ID：14856836
> 
> 赞同：1
> 
> 时间：2013-02-13T15:22:04.827
> 
> 标签：c++, qt, crash, valgrind

一天多来我一直试图找到这个错误，我开始发疯了......我已经重新编写并仔细检查了拖放代码，但无济于事。

它发生在主 Qt 事件循环 a.exec() 中，来自 valgrind 的堆栈跟踪如下所示。它有时会在 QMutex::Lock() 上崩溃（我只使用一个 QThread（主 qt 事件循环），所有其他线程都包含在后端并且是安全的）

由于我自己使用鼠标花了一个多小时才出现这个错误，所以我编写了一个函数来移动鼠标关于按下、释放、单击、双击。这会导致错误在大约十分钟内发生。

我会发布一些代码，但它们是几千行用于拖放的东西（除了这个烦人的错误之外，它完美地工作）

拖动可以发生在两种类型的项目中，并且两者基本相同。在鼠标移动事件中，drag->exec() 被调用。

我正在使用子类 mime 数据来允许它包含我需要的内容。

任何帮助都会很棒...

```
Invalid read of size 8
  in main in Src/Program/main.cpp:77
Address 0x40 is not stack'd, malloc'd or (recently) free'd  
  1: QCoreApplication::postEvent(QObject*, QEvent*, int) in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1
  2: /usr/lib/x86_64-linux-gnu/libQtGui.so.4.8.1
  3: QApplication::x11ClientMessage(QWidget*, _XEvent*, bool) in /usr/lib/x86_64-linux-gnu/libQtGui.so.4.8.1
  4: QApplication::x11ProcessEvent(_XEvent*) in /usr/lib/x86_64-linux-gnu/libQtGui.so.4.8.1
  5: /usr/lib/x86_64-linux-gnu/libQtGui.so.4.8.1
  6: g_main_context_dispatch in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.3
  7: /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.3
  8: g_main_context_iteration in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.3
  9: QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1
  10: /usr/lib/x86_64-linux-gnu/libQtGui.so.4.8.1
  11: QEventLoop::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1
  12: QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1
  13: QCoreApplication::exec() in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1
  14: main in 
```

主要的：

```
 QApplication a(argc, argv);

    if (testing)
    {
      UnitTest::RunAllTests();
      return 0;
    }

    MainWindow w(debug, testing);
    w.show();
    w.InitialiseGUI();
    return a.exec();   <- line 77 
```

创建拖动对象时：

```
void ElementItem::mouseMoveEvent(QMouseEvent * event)
{
  if
      (
       (event->buttons() & Qt::LeftButton) &&
       ((event->pos() - _drag_start_position).manhattanLength() > DRAG_START_DISTANCE)
       )
  {

    _control_and_status->_drag_control_object->NotifyDragStarted();

    try
    {

      // Ensure that if something goes wrong and old widget does not get deleted.
      // create a new drag object
      _drag = new QDrag(this);

      // create a custom mime type (subclass of QMimeType)
      WidgetMimeType *mimeData = new WidgetMimeType;

      ChainWidgetBase * base_widget = LoadElementAndWidget();

      // Set the widget as this object
      if (base_widget)
      {
        mimeData->_widget = (QWidget *) base_widget;
        mimeData->_delete_on_failure = true;
        mimeData->_widget_deletion_required = &_widget_deletion_required;
      }
      else
      {
        delete _drag;
        _drag = NULL;
        throw GeneralException(ErrorReporting::ERROR_IN_DROPPABLE_CONTAINER, "Null widget");
      }

      _drag->setMimeData(mimeData);

      Qt::DropAction dropAction = _drag->exec();

    }
    catch(...)
    {
    }

    DragStopped();
  }
} 
```

这是创建拖动对象的地方之一，还有 3 个做不同的事情，但使用相同的方法

子类 mime 数据：

```
#pragma once
#include <QtGui>

class WidgetMimeType : public QMimeData
{
public:
  WidgetMimeType():
    _widget(NULL),
    _delete_on_failure(false),
    _deletion_required_dummy(false),
    _widget_deletion_required(&_deletion_required_dummy)
  {
  }

  ~WidgetMimeType()
  {
  }

  QWidget * _widget;
  bool _delete_on_failure;
  bool _deletion_required_dummy;
  bool * _widget_deletion_required;
}; 
```

编辑：我添加了 QT 源，崩溃的位置：

```
void QCoreApplication::postEvent(QObject *receiver, QEvent *event, int priority)
{
    if (receiver == 0) {
        qWarning("QCoreApplication::postEvent: Unexpected null receiver");
        delete event;
        return;
    }

    QThreadData * volatile * pdata = &receiver->d_func()->threadData;
    QThreadData *data = *pdata; <--- CRASHES HERE
    if (!data) {
        // posting during destruction? just delete the event to prevent a leak
        delete event;
        return;
    }

    // lock the post event mutex
    data->postEventList.mutex.lock();

    // if object has moved to another thread, follow it
    while (data != *pdata) {
        data->postEventList.mutex.unlock();

        data = *pdata;
        if (!data) {
            // posting during destruction? just delete the event to prevent a leak
            delete event;
            return;
        }

        data->postEventList.mutex.lock();
    } 
```

崩溃发生在上面显示的行，它说 <---- CRASH HERE。它来自取消引用指针。这些信息足以确定发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-27T22:58:10.083

`Qt::DropAction dropAction = _drag->exec();`这是您的代码可能崩溃的行。我没有完全阅读您的代码，但我假设在拖动小部件后，您正在使用 deleteLater() 函数删除原始小部件。如果是这种情况，那么对于窗口平台 tit 将工作正常，因为`_drag->exec()`会阻止事件，如果它是 mac 或 Linux，它不会阻止事件。这样，`_drag->exec()`在执行事件时获取空指针的事件。

我知道`deleteLater()`当控件返回事件循环时将删除对象时执行此操作。

一般来说，deleteLater() 是在 _drag->exec() 完成之前执行的。

# python - 如何查找 int 是否在数组数组中？

> ID：14856837
> 
> 赞同：2
> 
> 时间：2013-02-13T15:22:05.847
> 
> 标签：python, arrays, boolean

我有一个数组，每个索引都是另一个数组。如果我有一个 int，我如何编写代码来检查 int 是否存在于 python 数组中每个数组元素的前 2 个索引中。

例如：3 英寸

```
array = [[1,2,3], [4,5,6]] 
```

会产生 False。

3 英寸

```
array = [[1,3,7], [4,5,6]] 
```

会产生真。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T15:24:01.687

您可以对数组进行*切片*以获取其中的一部分，然后像这样使用`in`运算符和`any()`函数：

```
>>> array = [[1,2,3], [4,5,6]]
>>> [3 in elem[:2] for elem in array]
[False, False]
>>> any(3 in elem[:2] for elem in array)
False

>>> array = [[1,3,7], [4,5,6]]
>>> [3 in elem[:2] for elem in array]
[True, False]
>>> any(3 in elem[:2] for elem in array)
True 
```

`any()``True`如果可迭代对象中的至少一个元素是 ，则函数返回`True`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T15:23:44.673

```
>>> a = [[1,2,3], [4,5,6]]
>>> print any(3 in b[:2] for b in a)
False

>>> a = [[1,3,7], [4,5,6]] 
>>> print any(3 in b[:2] for b in a)
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:49:33.377

您可以使用`numpy.array`

```
import numpy as np

a1 = np.array([[1,2,3], [4,5,6]]) 
a2 = np.array([[1,3,7], [4,5,6]]) 
```

你可以做：

```
>>> a1[:, :2]
array([[1, 2],
       [4, 5]])
>>> 3 in a1[:, :2]
False
>>> 3 in a2[:, :2]
True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:27:03.133

想到的第一个方法是

```
len([x for x in array if 3 in x[:2]]) > 0 
```

# android - 返回应用程序后重新创建的第一个活动

> ID：14856841
> 
> 赞同：2
> 
> 时间：2013-02-13T15:22:24.497
> 
> 标签：android, android-activity, actionbarsherlock, roboguice

## 背景

我有一个非常奇怪的情况，我从未在我创建的任何应用程序上看到过。

该应用程序有多个活动，而第一个活动用于一些初始化和启动屏幕。

## 问题

假设应用程序有活动“A”、“B”、“C”、...，并且最终用户从“A”（初始屏幕的第一个）转到“B”，然后按下home 键，然后通过单击启动器上的图标返回应用程序。

简而言之，场景是：

应用程序启动 -> 活动 A（启动） -> 活动 B -> 按下主页 -> 返回应用程序（通过启动器） -> ？

预期结果：应用程序应返回到显示的最后一个活动，即“？” = 活动 B

实际结果：应用程序实际上返回到活动“A”，意思是“？” = 活动 A ，然后是我离开的活动（在本例中为 B ）

清单和代码中没有太多可显示的内容，因为它们都是非常标准的。

## 解决问题的线索

但是，有一些线索可能会说明造成这种情况的原因：

1.  每个活动可能需要一些内存来显示图像，但它们不会占用很多。

2.  所有活动都从 roboSherlock 活动变体扩展而来，包括从 RoboSplashActivity 扩展而来的闪屏活动。

3.  在第一个活动（启动屏幕）上，我没有让调用 super.andFinishThisOne(); 在 andFinishThisOne 方法中，因为我需要初始化除 roboguice 注入之外的更多内容。但是，当一切准备就绪时，我开始新活动并使用 finish() 关闭当前活动。

4.  有一个描述类似情况的错误报告（[此处）。](http://code.google.com/p/roboguice/issues/detail?id=204)不知道有多相似，以及可以做些什么来处理它。

## 到目前为止我尝试过的

到目前为止，我已经尝试了下一个解决方案：

1.  为清单中的第一个活动（主要是 launchMode ）使用不同的标志和属性，但没有任何帮助。

2.  在初始屏幕活动上使用 startActvityForResult ，而不调用 finish() 。它也没有工作并重新创建了活动。

现在，我只是添加了下一个代码来跳过第一个活动，以防它不是根活动，但这更像是一种解决方法而不是真正的解决方案。

```
if (!isTaskRoot()) {
    finish();
    return;
} 
```

# java - 如何在java中的文本文件中打印此输出？

> ID：14856842
> 
> 赞同：-3
> 
> 时间：2013-02-13T15:22:24.983
> 
> 标签：java, file, io

我已经计算了单词，现在在控制台中显示它。但我想将控制台输出写入文本文件。这个怎么做？

```
String[] wrds   = counter.getWords(WordCounter.SortOrder.BY_FREQUENCY);
int[] frequency = counter.getFrequencies(WordCounter.SortOrder.BY_FREQUENCY);        

int n = counter.getEntryCount();
for (int i=0; i<n; i++) 
{
    This should be written in text file///// System.out.println(frequency[i] + " " + wrds[i]+" "+ counter.getWordCount()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:27:11.243

```
String[] wrds   = counter.getWords(WordCounter.SortOrder.BY_FREQUENCY);
int[] frequency = counter.getFrequencies(WordCounter.SortOrder.BY_FREQUENCY);        
String texttoWrite = "";
int n = counter.getEntryCount();
for (int i=0; i<n; i++) 
{
    texttoWrite += frequency[i] + " " + wrds[i]+" "+ counter.getWordCount();
}
try{
 FileWriter fstream = new FileWriter("out.txt");
 BufferedWriter out = new BufferedWriter(fstream);
 out.write(texttoWrite);
 out.close();
 }catch (Exception e){
  System.err.println("Error: " + e.getMessage());
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:32:17.130

使用文件对象打开一个文件。并写入文件而不是控制台（或两者都做）。关闭文件。真正的问题是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:26:37.233

这样的事情怎么样？

```
FileWriter fstream = new FileWriter(fileName);
BufferedWriter fbw = new BufferedWriter(fstream);
for (int i=0; i<n; i++) {
    fbw.write(frequency[i] + " " + wrds[i]+" "+ counter.getWordCount()+ "\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:27:10.250

查看[FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)

```
FileWriter fw = new FileWriter("path location");
fw.write(frequency[i]....);
fw.close(); 
```

# sql - 如何在 Rails 的迁移中编写 SQL

> ID：14856856
> 
> 赞同：62
> 
> 时间：2013-02-13T15:23:08.623
> 
> 标签：sql, postgresql, ruby-on-rails-3, migration, rails-activerecord

我有以下需要执行的 SQL

```
CREATE TABLE cars_users2 AS SELECT DISTINCT * FROM cars_users;

DROP TABLE cars_users;

ALTER TABLE cars_users2 RENAME TO cars_users; 
```

因为我不能使用 heroku 数据剪辑来删除表，所以我不能使用数据剪辑。

所以我想我需要在迁移中这样做。

如何将此 sql 编写为迁移？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-02-13T15:33:27.483

对于您的向上迁移：

```
execute "CREATE TABLE cars_users2 AS SELECT DISTINCT * FROM cars_users;" 
drop_table :car_users  
rename_table :car_users2, :car_users 
```

和向下：

```
raise ActiveRecord::IrreversibleMigration 
```

完全迁移：

```
class TheMigration < ActiveRecord::Migration
    def up
        execute "CREATE TABLE cars_users2 AS SELECT DISTINCT * from cars_users;" 
        drop_table :car_users  
        rename_table :car_users2, :car_users  
    end

    def down
        raise ActiveRecord::IrreversibleMigration
    end
end 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-13T15:31:59.163

您可以尝试使用该[`execute`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/AbstractMysqlAdapter.html#method-i-execute)方法。

像这样的东西（未经测试，某种创意）

```
class UpdateCarUserTable < ActiveRecord::Migration
  def up
    execute "CREATE TABLE cars_users2 AS SELECT DISTINCT * FROM cars_users"
    execute "DROP TABLE cars_users"
    execute "ALTER TABLE cars_users2 RENAME TO cars_users"
  end 
```

由于没有等效`down`方法，`ActiveRecord::IrreversibleMigration`因此尝试向下迁移时应提高 an 。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-24T04:05:49.163

我更喜欢这里的文档：

```
execute <<-SQL
  CREATE TABLE cars_users2 AS SELECT DISTINCT * FROM cars_users;
  DROP TABLE cars_users;
  ALTER TABLE cars_users2 RENAME TO cars_users;
SQL 
```

**注意：** 这仅适用于 *PostgreSQL*，如果您使用的是 MySQL，您应该为适配器设置[CLIENT_MULTI_STATEMENTS](http://dev.mysql.com/doc/refman/5.1/en/mysql-real-connect.html)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-05-03T23:10:35.390

如果您需要使用`change`而不是，`up`您`down`可以使用`reversible`. 它适用于 Rails 4 或更高版本。

```
class ExampleMigration < ActiveRecord::Migration
  def change
    create_table :distributors do |t|
      t.string :zipcode
    end

    reversible do |dir|
      dir.up do
        # add a CHECK constraint
        execute <<-SQL
          ALTER TABLE distributors
            ADD CONSTRAINT zipchk
              CHECK (char_length(zipcode) = 5) NO INHERIT;
        SQL
      end
      dir.down do
        execute <<-SQL
          ALTER TABLE distributors
            DROP CONSTRAINT zipchk
        SQL
      end
    end

    add_column :users, :home_page_url, :string
    rename_column :users, :email, :email_address
  end
end 
```

资料来源：[http ://edgeguides.rubyonrails.org/active_record_migrations.html#using-reversible](http://edgeguides.rubyonrails.org/active_record_migrations.html#using-reversible)

[https://apidock.com/rails/ActiveRecord/Migration/reversible](https://apidock.com/rails/ActiveRecord/Migration/reversible)

# cpu - “top”命令显示%CPU为1360，正常吗？

> ID：14856857
> 
> 赞同：-1
> 
> 时间：2013-02-13T15:23:10.883
> 
> 标签：cpu, top-command

当我使用 top 命令检查进程时，我看到一个 1360 的进程作为 %CPU 百分比。正常吗？我该如何解释这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:27:34.550

`top`将 cpu 使用率报告为单个 cpu 核心的 %-age。如果您的硬件有多个内核和/或多个 cpu，则总数将高于 100%。

例子：

具有 6 个 CPU 且每个具有 4 个核心的服务器将在最大负载时报告 2400%。

# c# - SortedDictionary 的异常函数的奇怪行为

> ID：14856862
> 
> 赞同：1
> 
> 时间：2013-02-13T15:23:27.547
> 
> 标签：c#

我正在尝试利用 SortedDicationary 的异常功能，但我快疯了，因为它的行为不像我预期的那样。只要字典的条目是简单数据类型，Excpet 函数就可以工作。但是，我想将对象存储在字典中。

这是我的示例：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

namespace DictionaryTest
{
    class Program
    {
        static void Main(string[] args)
        {

            SortedDictionary<string, Object> objects = new SortedDictionary<string, Object>();
            SortedDictionary<string, Object> objects2 = new SortedDictionary<string, Object>();

            objects.Add("A", new Object());
            objects.Add("B", new Object());
            objects2.Add("A", new Object());

            IEnumerable<KeyValuePair<string, Object>> objects_a_only = objects.Except(objects2);

            foreach (KeyValuePair<string, Object> o in objects_a_only)
            {
                Console.WriteLine(o.Key);

            }
            Console.WriteLine("Program finished. Press any key to continue");
            Console.ReadKey();

        }
    }
} 
```

我期望只得到'A'作为输出，但它实际上返回'A'和'B'。

据我了解，匹配仅根据每个条目的键进行。所以我看不出有任何理由使用定制的比较类。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:24:55.347

`Except`不是上的方法`SortedDictionary<TKey, TValue>`。
它是一种扩展方法`IEnumerable<T>`。
在排序字典的情况下，`T`实际上是`KeyValuePair<TKey, TValue>`.

因此，`Except`比较`KeyValuePair<TKey, TValue>`. 如果 the和 the相同，则认为
of 的两个实例相同。因为您每次都 创建一个新实例，所以所有三个实例都被认为彼此不相等。 您可以通过将代码更改为此轻松验证这一点：`KeyValuePair<TKey, TValue>``Key``Value`
`object``KeyValuePair<TKey, TValue>`

```
var o = new object();
objects.Add("A", o);
objects.Add("B", new Object());
objects2.Add("A", o); 
```

的结果`objects.Except(objects2)`现在将只是带有 key 的条目`"B"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:29:54.637

当你使用[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)它时，它使用默认的相等比较器，它对于`KeyValuePair`类型比较键和值。您可以改用这种方法：

```
IEnumerable<KeyValuePair<string, Object>> objects_a_only = objects
        .Where(kvp => !objects2.ContainsKey(kvp.Key)); 
```

# background-image - CSS - 身体背景中心忽略最小宽度

> ID：14856864
> 
> 赞同：2
> 
> 时间：2013-02-13T15:23:30.530
> 
> 标签：background-image, center, css

该站点在 BODY 中有一个“min-width:600px”，并在 Center 中使用了一个 backgroundImage。

当我调整大小并且它低于 600 像素时，它会创建滚动条，很好。但背景不会停止居中。背景忽略最小宽度。

我的例子在这里：http: [//jsfiddle.net/XD4QM/](http://jsfiddle.net/XD4QM/)

```
<html>
    <body>
        <div>
            background ignores the min-width

        </div>
    </body>
</html>

body{
    min-width:600px;
    background:url(http://mrknobbymusic.com/wp-content/uploads/2011/08/example-last-ones-standing.jpg) center top;

} 
```

## 附加信息：

我有一个很大而且很糟糕的网站要修复。所以就像我想做的第一步一样。当这个人的宽度小于 1024 像素（600 只是一个例子）时，这个网站看起来很糟糕。所以我更喜欢水平滚动，让网站最小宽度：1024px，不要破坏网站。只是为了让客户满意，直到我重新制作和修复所有东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:18:03.207

更新 2：

jsfiddle.net/persianturtle/XD4QM/5

```
body{
    width:600px
    margin: 0 auto;
}

img {
    max-width:100%;
    min-width:800px;
    display: block; 
    margin-left: auto; 
    margin-right: auto
} 
```

更新：

这个怎么样？

[http://jsfiddle.net/persianturtle/XD4QM/3/](http://jsfiddle.net/persianturtle/XD4QM/3/)

与其将图像放到无法控制的背景中，不如将图像放在可以控制的 div 中？

```
img {
    max-width:100%;
} 
```

您没有告诉浏览器停止重复背景。

看看这个 jsFiddle：

[http://jsfiddle.net/persianturtle/XD4QM/2/](http://jsfiddle.net/persianturtle/XD4QM/2/)

```
body{
    min-width:600px;
    background:url(http://mrknobbymusic.com/wp-content/uploads/2011/08/example-last-ones-standing.jpg) center top;
    background-repeat:no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:20:28.003

就我而言，我现在这样做并工作了。

```
@media screen and (max-width :600px){
    body{
        background-position:-<tested value>px 0px;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:10:12.770

好吧，我不会采用上述任何一种方法，而是将代码更改为以下

`background:url("http://mrknobbymusic.com/wp-content/uploads/2011/08/example-last-ones-standing.jpg") repeat scroll center top / cover transparent;`

注意**顶部/封面**。**封面**确保**背景始终与 div 一起调整大小，**并且在这种情况下，当您调整书的大小时，将背景设置为书的封面，封面会自行调整大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:24:56.003

尝试在“滚动”和“固定”之间切换。background-attachment 属性设置背景图像是固定的还是与页面的其余部分一起滚动。

```
body{
    min-width:600px;
    background:url(example-last-ones-standing.jpg)
    center
    top
    scroll
    no-repeat;
} 
```

# c# - 使用 LinqDataSource 和 Formview 自定义分页

> ID：14856866
> 
> 赞同：0
> 
> 时间：2013-02-13T15:23:40.287
> 
> 标签：c#, formview, linqdatasource

我正在尝试使用 LinqDataSource 的`Selecting`事件来过滤 FormView 的数据，但是我似乎无法让它正确分页。我只能设法在 FormView 中显示一条记录，但分页控件不显示。`Selecting`我在 LinqDataSource事件中有以下代码：

```
e.Arguments.StartRowIndex = 0;
e.Arguments.MaximumRows = 1;

var result = db.Personnels.AsQueryable();

if (!String.IsNullOrEmpty(txtFirstName.Text))
{
    result = result.Where(r => r.First_Name.Contains(txtFirstName.Text));
}

if (!String.IsNullOrEmpty(txtLastName.Text))
{
    result = result.Where(r => r.Last_Name.Contains(txtLastName.Text));
}

e.Arguments.TotalRowCount = result.Count();

e.Result = result.Skip(fvMain.PageIndex).Take(1); 
```

如上所述，此代码有效，但是仅显示一条记录，并且分页控件未显示在 FormView 上。我也尝试`e.Result`使用以下内容进行修改，但出现`Object reference not set to an instance of an object.`异常：

```
e.Result = result; 
```

使用 LinqDataSource 的选择事件对 FormView 进行分页的正确方法是什么？

* * *

**编辑 1**

根据要求，这里是 FormView 和 LinqDataSource 的标记：

```
<asp:FormView ID="fvMain" runat="server" CssClass="full" 
    DataKeyNames="Worker_ID" DataSourceID="ldsMain" DefaultMode="Edit" 
    AllowPaging="True" onitemupdating="fvMain_ItemUpdating">
    <EditItemTemplate>
        <table class="pad5 full">
            <tr>
                <td class="field-name" style="width: 100px">Worker ID:</td>
                <td style="width: 80px"><asp:TextBox ID="txtWorkerID" runat="server" Text='<%#Eval("Worker_ID") %>' ReadOnly="true" style="width: 75px" /></td>
                <td class="right"><input type="button" value="Injuries/LTA/WCB for this Person" onclick="openModalColorbox('Injuries.aspx?id='+$('#plcMain_fvMain_txtWorkerID').val(), 'Injuries')" /></td>
            </tr>
        </table>
        <table class="pad5 full">
            <tr>
                <td class="field-name">Type Of Person:</td>
                <td colspan="3">
                    <cc1:DataBindDropDownList ID="cboTypeOfPerson" runat="server" 
                        AppendDataBoundItems="True" DataSourceID="ldsPersonTypes" 
                        DataTextField="Type_of_Person" DataValueField="Type_of_Person" 
                        SelectedValue='<%#Bind("Type_Of_Person") %>'>
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>
                    <asp:LinqDataSource ID="ldsPersonTypes" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" 
                        OrderBy="Type_of_Person" TableName="Personnel_Types">
                    </asp:LinqDataSource>
                </td>
            </tr>
            <tr>
                <td class="field-name">Employee Number:</td>
                <td><asp:TextBox ID="txtEmployeeNumber" runat="server" Text='<%#Bind("Employee_Number") %>' /></td>
                <td class="field-name">SIN:</td>
                <td><asp:TextBox ID="txtSIN" runat="server" Text='<%#Bind("SIN") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">Last Name:</td>
                <td><asp:TextBox ID="txtLastName" runat="server" Text='<%#Bind("Last_Name") %>' /></td>
                <td class="field-name">Previous Last Name:</td>
                <td><asp:TextBox ID="txtPreviousLastName" runat="server" Text='<%#Bind("Previous_Last_Name") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">First Name:</td>
                <td><asp:TextBox ID="txtFirstName" runat="server" Text='<%#Bind("First_Name") %>' /></td>
                <td class="field-name">Marital Status:</td>
                <td>
                    <cc1:DataBindDropDownList ID="DropDownList1" runat="server" 
                        AppendDataBoundItems="True" SelectedValue='<%# Bind("Marital_Status") %>' 
                        DataSourceID="ldsMaritalStatuses" DataTextField="Marital_Status" 
                        DataValueField="Marital_Status">
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>
                    <asp:LinqDataSource ID="ldsMaritalStatuses" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" 
                        OrderBy="Marital_Status" TableName="List____Employee__Marital_Status">
                    </asp:LinqDataSource>
                </td>
            </tr>
            <tr>
                <td class="field-name">Division:</td>
                <td>
                    <cc1:DataBindDropDownList ID="cboDivision" runat="server" 
                        AppendDataBoundItems="True" SelectedValue='<%# Bind("Division") %>' 
                        DataSourceID="ldsDivisions" DataTextField="Division" 
                        DataValueField="Division">
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>
                    <asp:LinqDataSource ID="ldsDivisions" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" GroupBy="Division" 
                        OrderBy="Division" Select="new (key as Division, it as Areas)" 
                        TableName="Areas">
                    </asp:LinqDataSource>
                </td>
                <td class="field-name">DOB:</td>
                <td>
                    <asp:TextBox ID="txtDOB" runat="server" Text='<%#Bind("DOB", "{0:dd MMM yyyy}") %>' />
                    <asp:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="txtDOB" Format="dd MMM yyyy" />
                </td>
            </tr>
            <tr>
                <td class="field-name">Department:</td>
                <td>
                    <cc1:DataBindDropDownList ID="cboDepartment" runat="server" 
                        AppendDataBoundItems="True" SelectedValue='<%# Bind("Department") %>' 
                        DataSourceID="ldsDepartments" DataTextField="Department" 
                        DataValueField="Department">
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>
                    <asp:LinqDataSource ID="ldsDepartments" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" GroupBy="Department" 
                        OrderBy="Department" Select="new (key as Department, it as Areas)" 
                        TableName="Areas">
                    </asp:LinqDataSource>
                </td>
                <td class="field-name">Terminated:</td>
                <td>
                    <cc1:DataBindDropDownList ID="cboTerminated" runat="server" 
                        SelectedValue='<%# Bind("Terminated") %>'>
                        <asp:ListItem Text="" Value="" />
                        <asp:ListItem Text="Yes" Value="Yes" />
                        <asp:ListItem Text="No" Value="No" />
                    </cc1:DataBindDropDownList>
                </td>
            </tr>
            <tr>
                <td class="field-name">Occupation:</td>
                <td>
                    <cc1:DataBindDropDownList ID="cboOccupation" runat="server" 
                        SelectedValue='<%# Bind("Occupation") %>' AppendDataBoundItems="True" 
                        DataSourceID="ldsOccupations" DataTextField="Occupation" 
                        DataValueField="Occupation">
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>

                    <asp:LinqDataSource ID="ldsOccupations" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" OrderBy="Occupation" 
                        TableName="List____Employee__Occupations">
                    </asp:LinqDataSource>
                </td>
                <td class="field-name">Team:</td>
                <td>
                    <cc1:DataBindDropDownList ID="cboTeam" runat="server" 
                        SelectedValue='<%# Bind("Shift") %>' AppendDataBoundItems="True" 
                        DataSourceID="ldsShifts" DataTextField="Shift" 
                        DataValueField="Shift">
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>

                    <asp:LinqDataSource ID="ldsShifts" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" OrderBy="Shift" 
                        TableName="List____Employee__Shifts">
                    </asp:LinqDataSource>
                </td>
            </tr>
            <tr>
                <td class="field-name">Lock Number:</td>
                <td><asp:TextBox ID="txtLockNumber" runat="server" Text='<%#Bind("Lock_Number") %>' /></td>
                <td class="field-name">Address:</td>
                <td><asp:TextBox ID="txtAddress" runat="server" Text='<%#Bind("Address") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">City:</td>
                <td><asp:TextBox ID="txtCity" runat="server" Text='<%#Bind("City") %>' /></td>
                <td class="field-name">Company:</td>
                <td><asp:TextBox ID="txtCompany" runat="server" Text='<%#Bind("Company") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">Province:</td>
                <td><asp:TextBox ID="txtProvince" runat="server" Text='<%#Bind("Province") %>' /></td>
                <td class="field-name">Company Contact:</td>
                <td><asp:TextBox ID="txtCompanyContact" runat="server" Text='<%#Bind("Company_Contact") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">Postal:</td>
                <td><asp:TextBox ID="txtPostal" runat="server" Text='<%#Bind("Postal") %>' /></td>
                <td class="field-name">Phone:</td>
                <td><asp:TextBox ID="txtPhone" runat="server" Text='<%#Bind("Phone") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">HCN:</td>
                <td><asp:TextBox ID="txtHCN" runat="server" Text='<%#Bind("HCN") %>' /></td>
                <td class="field-name">HCN Province:</td>
                <td><asp:TextBox ID="txtHCNProvince" runat="server" Text='<%#Bind("HCN_Province") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">Comments:</td>
                <td colspan="3">
                    <asp:TextBox ID="txtComments" runat="server" Text='<%#Bind("Comments") %>' TextMode="MultiLine" Rows="3" />
                </td>
            </tr>
        </table>

        <h2>H.R.I.S.</h2>
        <table class="pad5 full">
            <tr>
                <td class="field-name">NOK Name:</td>
                <td><asp:TextBox ID="txtNOKName" runat="server" Text='<%#Bind("NOK_Name") %>' /></td>
                <td class="field-name">NOK Relation:</td>
                <td>
                    <cc1:DataBindDropDownList ID="cboNOKRelation" runat="server" 
                        SelectedValue='<%# Bind("NOK_Relation") %>' AppendDataBoundItems="True" 
                        DataSourceID="ldsNOKRelations" DataTextField="Relationship" 
                        DataValueField="Relationship">
                        <asp:ListItem Text="" Value="" />
                    </cc1:DataBindDropDownList>

                    <asp:LinqDataSource ID="ldsNOKRelations" runat="server" 
                        ContextTypeName="PRIDE.PRIDEDataContext" EntityTypeName="" 
                        OrderBy="Relationship" TableName="List____Employee__Relations">
                    </asp:LinqDataSource>
                </td>
            </tr>
            <tr>
                <td class="field-name">NOK Address:</td>
                <td><asp:TextBox ID="txtNOKAddress" runat="server" Text='<%#Bind("NOK_Address") %>' /></td>
                <td class="field-name">NOK City:</td>
                <td><asp:TextBox ID="txtNOKCity" runat="server" Text='<%#Bind("NOK_City") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">NOK Province:</td>
                <td><asp:TextBox ID="txtNOKProvince" runat="server" Text='<%#Bind("NOK_Province") %>' /></td>
                <td class="field-name">NOK Postal:</td>
                <td><asp:TextBox ID="txtNOKPostal" runat="server" Text='<%#Bind("NOK_Postal") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">NOK Phone:</td>
                <td><asp:TextBox ID="txtNOKPhone" runat="server" Text='<%#Bind("NOK_Phone") %>' /></td>
            </tr>
        </table>

        <div class="center">
            <asp:Button ID="btnSave" runat="server" Text="Save Changes" 
                onclick="btnSave_Click" />
        </div>
    </EditItemTemplate>
    <PagerSettings Mode="NextPreviousFirstLast" 
                FirstPageText="&amp;lt;&amp;lt; First" LastPageText="Last &amp;gt;&amp;gt;" 
                NextPageText="Next &amp;gt;" PreviousPageText="&amp;lt; Previous" 
                Position="TopAndBottom" />
            <PagerStyle CssClass="pager" />
</asp:FormView>
<asp:LinqDataSource ID="ldsMain" runat="server" 
    ContextTypeName="PRIDE.PRIDEDataContext" EnableDelete="True" 
    EnableInsert="True" EnableUpdate="True" EntityTypeName="" 
    TableName="Personnels" onselecting="ldsMain_Selecting">
    <UpdateParameters>
        <asp:Parameter ConvertEmptyStringToNull="true" Name="Employee_Number" />
    </UpdateParameters>
    <InsertParameters>
        <asp:Parameter ConvertEmptyStringToNull="true" Name="Employee_Number" />
    </InsertParameters>
</asp:LinqDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:47:36.627

从[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linqdatasource.autopage.aspx)中我们可以看到，默认情况下设置为的`AutoPage`属性。从文档：`LinqDataSource``true`

> 当 AutoPage 属性设置为 true 时，LinqDataSource 控件仅检索数据绑定控件中一页的足够记录。它使用`Skip<TSource>`and`Take<TSource>`方法来检索当前页面的记录。

所有这一切的结果是您需要更改一些内容才能使分页正常工作。

1.  目前您正在设置`e.Arguments.StartRowIndex = 0;`. 您不需要每次都这样做，因为它会干扰分页。
2.  做`e.Result = result.Skip(fvMain.PageIndex).Take(1);`也没有必要。应该`e.Result = result;`没问题。

我认为这两件事的结合导致了你的问题。但是，我们现在需要处理您的某个过滤器启动的情况。

第一个问题是我们需要将先前应用的过滤器持久化到 ViewState 中，否则我们将无法判断何时刚刚应用了过滤器以及何时应用了现有过滤器。

灵感来自[在对连接到 GridView 的 linqdatasource 应用过滤器后，单击编辑将我带回旧数据](https://stackoverflow.com/questions/6747958/after-applying-a-filter-to-linqdatasource-connected-to-gridview-clicking-edit-b)，向您的页面添加一个属性（您将需要另一个属性作为姓氏）：

```
public string FirstNameFilter 
{
    get
    {
        return (string)this.ViewState["FirstNameFilter"] ?? string.Empty;
    }

    set
    {
        this.ViewState["FirstNameFilter"] = value;
    }
} 
```

然后在您的`Selecting`事件处理程序中，运行以下代码：

```
var result = db.Personnels.AsQueryable();

if (!string.IsNullOrEmpty(txtFirstName.Text))
{
    if (this.FirstNameFilter != txtFirstName.Text)
    {
        this.FirstNameFilter = txtFirstName.Text;
        e.Arguments.StartRowIndex = 0;
    }

    if (!string.IsNullOrEmpty(this.FirstNameFilter))
    {
        result = result.Where(r => r.First_Name.Contains(txtFirstName.Text));
    }
}

if (!string.IsNullOrEmpty(txtLastName.Text))
{
    if (this.LastNameFilter != txtLastName.Text)
    {
        this.LastNameFilter = txtLastName.Text;
        e.Arguments.StartRowIndex = 0;
    }

    if (!string.IsNullOrEmpty(this.LastNameFilter))
    {
        result = result.Where(r => r.First_Name.Contains(txtLastName.Text));
    }
}

e.Arguments.TotalRowCount = result.Count();

e.Result = result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:07:35.927

我不知道为什么，但我的问题是通过将读取的行更改`e.Result = result...`为`e.Result = result.Skip(0)`. 之后，分页工作完美。

# python - 检查编码并转换为 Unicode

> ID：14856872
> 
> 赞同：1
> 
> 时间：2013-02-13T15:23:47.183
> 
> 标签：python, unicode, encoding

我有一个包含不同字符串的列表。有时他们在`cp1251`，`ASCII`或其他地方。我需要处理它们（转换为 Unicode），因为我遇到了一个错误（UncicodeDecodeError），尤其是当我试图将这些数据转储到 JSON 时。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:48:58.897

您可以使用[chardet](http://pypi.python.org/pypi/chardet)来检测字符串的编码，因此将它们的列表转换为 unicode（在 Python 2.x 中）的一种方法是：

```
import chardet

def unicodify(seq, min_confidence=0.5):
    result = []
    for text in seq:
        guess = chardet.detect(text)
        if guess["confidence"] < min_confidence:
            # chardet isn't confident enough in its guess, so:
            raise UnicodeDecodeError
        decoded = text.decode(guess["encoding"])
        result.append(decoded)
    return result 
```

...你会这样使用：

```
>>> unicodify(["¿qué?", "什么？", "what?"])
[u'\xbfqu\xe9?', u'\u4ec0\u4e48\uff1f', u'what?'] 
```

**CAVEAT**：像 chardet 这样的解决方案只能作为最后的手段使用（例如，在修复因过去错误而损坏的数据集时）。在生产代码中依赖它太脆弱了；相反，正如@bames53 在对此答案的评论中指出的那样，您应该首先修复损坏数据的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:33:00.617

如果您知道编码，那应该很容易：

```
unicode_string = encoded_string.decode(encoding) 
```

如果您不知道编码，则可能很难检测到它，但这取决于您期望的编码和语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:49:21.117

尝试使用 unicode 函数将字符串转换为内置的 unicode 类型。

```
>>> s = "Some string"
>>> s = unicode(s)
>>> type(s)
<type 'unicode'> 
```

对于您的问题，请尝试创建一个新的 unicode 字符串列表。

```
new = []
for item in myList:
    new.append(unicode(item)) 
```

或使用列表理解

```
new = [unicode(item) for item in myList] 
```

阅读官方 Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)。

# java - Java 24 位数字签名

> ID：14856873
> 
> 赞同：5
> 
> 时间：2013-02-13T15:23:46.387
> 
> 标签：java, casting, integer, long-integer

我目前正在做一些让我使用一些 24 位整数的工作。

本质上，我需要能够从这些 24 位中获取有符号和无符号值。

目前我正在使用以下代码将三个字节放在一起并将它们的值返回给我。

```
private static int bytesToInt(byte[] input) {
    if (input.length == 3) {
        return (input[2] & 0xFF) << 16 | (input[1] & 0xFF) <<8 | (input[0] & 0xFF);
    }
} 
```

我给它的输入是字节：`0x42 0x87 0xfe`返回的结果是：`16680770`

这（我相信）是正确的无符号值，但是我也需要它的有符号值，我认为是`-96446`

我猜我必须在这里做一些位移来解决它，但我不知道如何完成这个。

我已经尝试将结果转换为一个和一个长，但都没有返回有符号的值。我也尝试过 Math.abs(result)，但我认为我没有正确使用它。

任何输入将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T15:27:41.647

```
private static int bytesToUInt(byte[] input) {
    if (input.length == 3) {
        return (input[2] & 0xFF) << 16 | (input[1] & 0xFF) <<8 | (input[0] & 0xFF);
    }
}
private static int bytesToSInt(byte[] input) {
    if (input.length == 3) {
        return (input[2]) << 16 | (input[1] & 0xFF) <<8 | (input[0] & 0xFF);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:27:03.873

一种选择是用 1 填充前 8 位：

```
int x = 16680770;
int y = x | 0xff000000;
System.out.println(y); // -96446 
```

或者你可以减去`1 << 24`：

```
int y = x - (1 << 24); 
```

# ruby - 如何使用 watir-webdriver 从 text_area 调用 id？

> ID：14856880
> 
> 赞同：2
> 
> 时间：2013-02-13T15:24:02.823
> 
> 标签：ruby, watir-webdriver

```
for i in 0..10
  if @b.text_field(:cols  => "40", :index => i).exists?
    id = @b.text_field(:cols  => "40", :index => i)
    if profile_profile_qualifications_attributes_new_(\d)+_comment/.match(id)
      @b.text_field(:cols  => "40", :index => i).set "Rock!"
    end
  end
end 
```

上面的代码失败了

```
错误：无法将 Watir::TextField 转换为字符串 (TypeError)
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:39:23.360

```
id = @b.text_field(:cols  => "40", :index => i).id 
```

# php - 如何继续从 PHP 中的一个套接字读取？

> ID：14856881
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:03.937
> 
> 标签：php, sockets

我有一个服务器，它总是将消息（从 Java 套接字）发送到任何连接的套接字。它还接收消息并执行它们。后者工作正常，但读取源源不断的消息流并将它们提供给用户几乎是不可能的。我不能在不丢失套接字资源的情况下进行任何 HTML 交互，而且我不能丢失与服务器的连接，因为我会丢失消息。有任何想法吗？

# excel - 在 Excel 公式中引用动态命名范围

> ID：14856889
> 
> 赞同：9
> 
> 时间：2013-02-13T15:24:15.893
> 
> 标签：excel, dynamic, excel-formula, named-ranges

我在 Excel 中有一个表格，其列标题对应于我工作簿中其他地方的动态命名范围的一部分。例如，我有这些列标题：“10”、“20”等，以及这些动态命名范围：“ExampleRange10”、“ExampleRange2”等。我想通过连接输入引用 ExampleRange10 的 VLookup 公式字符串“ExampleRange”和列标题“10”。这将允许我简单地将公式扩展到表中的所有列，而不是在每列的公式中手动键入“ExampleRange10”、“ExampleRange20”等。

我知道 INDIRECT 函数，并且过去曾成功地将其用于命名范围，但在这种情况下，它似乎不适用于*动态*命名范围。我猜这是一个细微差别，与 Excel 如何定义动态命名范围有关（它们不会显示在公式栏左侧的命名范围下拉列表中，并且它们在 VBA 中有一些有趣的属性， 例如）。有没有一种方法可以将 INDIRECT 公式与动态命名范围结合使用，或者是否有另一种方法可以解决这个问题？

**编辑**：这是使用的确切公式。
这是主要公式：`=VLOOKUP(B2,INDIRECT("ExampleRange"&C1),2,FALSE)`其中 C1 包含“10”，而我的名为“ExampleRange10”的动态命名范围的公式是：`=OFFSET(Sheet1!$F$2,0,0,COUNTA(Sheet1!$F$2:$F$25),2)`。主公式返回“#REF！”，但当我删除动态命名范围公式并简单地将“ExampleRange10”定义为静态范围时，它可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T12:58:01.800

在进一步研究之后，我可以说，Excel 的`INDIRECT`功能根本不适用于动态范围。可能有一种巧妙的方法可以绕过使用`INDIRECT`和坚持非 VBA Excel 世界，但我不知道这种方法。相反，我最终创建了一个与[此处](http://dailydoseofexcel.com/archives/2005/03/01/indirect-and-dynamic-ranges/)描述的非常相似的用户定义函数。我将主要公式更改为，我创建的 VBA 函数的名称在`=VLOOKUP(B2,DINDIRECT("ExampleRange"&C1),2,FALSE)`哪里。`DINDIRECT`

这种替代方案的唯一缺点（可能是也可能不是缺点，取决于您如何看待它）是工作簿必须保存为启用宏的工作簿，并且使用自定义函数不是非常自我记录和需要向其他用户稍作解释。不过，考虑到所有因素，这对我来说是一个可以接受的解决方案。

对于链接厌恶，这里的代码：

```
Public Function DINDIRECT(sName As String) As Range
     Dim nName As Name

     On Error Resume Next
          Set nName = ActiveWorkbook.Names(sName)
          Set nName = ActiveSheet.Names(sName)
     On Error GoTo 0

     If Not nName Is Nothing Then
          Set DINDIRECT = nName.RefersToRange
     Else
          DINDIRECT = CVErr(xlErrName)
End Function 
```

注意：尽管此解决方案有效，但我不会接受我的回答，因为我不想阻止其他人发布更好的解决方案。另外，我是该网站的新手，如果我通过回答我自己的问题来破坏任何礼仪规范，非常抱歉......我只是想我会分享我使用的确切解决方案，以防其他人发现它有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T18:01:10.777

我最近碰到了这堵确切的砖墙，您已经猜到的答案就是您不能使用 INDIRECT 引用动态命名范围。

但是，您可以使用动态范围公式*本身*作为 INDIRECT 的参数，但这对您想要做的事情没有用。有点像 PITA，因为它是一种非常有用的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-26T21:08:53.237

如果您的数据具有 10、20 等标题，则无需使用 Indirect。为什么不直接使用索引/匹配来选择您需要的数据？

例如，将整个表命名为 ExampleRanges 并使用以下公式：

```
Index(ExampleRanges, match(B2, index(ExampleRanges, , 1), 0), match(C1, index(ExampleRanges, 1,), 0)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-16T15:10:22.577

我知道这已经很老了，但我只是遇到了这个问题，并认为我会添加一个避免任何 VBA 编码的解决方案，以防它帮助其他任何偶然发现这个问题的人：

```
=VLOOKUP(B2,CHOOSE(C1/10,example10,example20,example30,example40),2,0) 
```

这是假设命名约定为 10、20、30 等，对于数百个范围来说并不理想。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T18:05:10.600

未经测试，但我认为这会起作用：

用户定义的函数返回动态命名范围的地址：

```
Function Named_Range_Address(Range_Name As Range, _ 
    Optional SheetName As Boolean) As String 

    Dim strName As String 
    Application.Volatile 

    If SheetName = True Then 
        strName = "'" & Range_Name.Parent.Name & "'!" & Range_Name.Address 
    Else 
        strName = Range_Name.Address 
    End If 

    Named_Range_Address = strName 
End Function 
```

那么你应该能够使用你的 vlookup 公式：

```
=VLOOKUP(B2,INDIRECT(named_range_address("ExampleRange"&C1,TRUE)),2,FALSE) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-12T08:37:21.680

今天我正在修改 Excel 命名范围，我发现，虽然您确实无法在`INDIRECT()`调用本身中计算范围的名称，但您仍然可以通过添加中间步骤以纯“Excel 方式”获得它：只需创建一些隐藏单元格，您可以在其中计算命名范围。

例如，假设`A1`包含范围名称的“动态部分”，然后`A2`使用公式`= "ExampleRange" & A1`，现在您有了完整的范围名称，您可以将其用作`= INDIRECT(A2)`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-07T20:29:53.020

我知道这是一个非常古老的线程，但我遇到了同样的问题，所以也许我的解决方案可以帮助未来的人们。

基本上，我创建了一个宏，它会在保存时删除并重新定义范围，并为其命名。因此，INDIRECT 函数将起作用，因为范围不是动态的。您需要做的就是在将任何值添加到命名范围后保存工作簿

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

Dim a, b, c, d, e, f As Integer
Dim data As Worksheet

Set data = ThisWorkbook.Worksheets("Data")

a = data.Range("A" & Rows.count).End(xlUp).row
b = data.Range("B" & Rows.count).End(xlUp).row
c = data.Range("C" & Rows.count).End(xlUp).row
d = data.Range("D" & Rows.count).End(xlUp).row
e = data.Range("E" & Rows.count).End(xlUp).row
f = data.Range("F" & Rows.count).End(xlUp).row

ActiveWorkbook.Names("KP").Delete
ActiveWorkbook.Names("KPT").Delete
ActiveWorkbook.Names("AP").Delete
ActiveWorkbook.Names("APT").Delete
ActiveWorkbook.Names("DISC").Delete
ActiveWorkbook.Names("SEATS").Delete

ActiveWorkbook.Names.Add Name:="KP", RefersTo:="=Data!$A$2:$A$" & a
ActiveWorkbook.Names.Add Name:="KPT", RefersTo:="=Data!$B$2:$B$" & b
ActiveWorkbook.Names.Add Name:="AP", RefersTo:="=Data!$C$2:$C$" & c
ActiveWorkbook.Names.Add Name:="APT", RefersTo:="=Data!$D$2:$D$" & d
ActiveWorkbook.Names.Add Name:="DISC", RefersTo:="=Data!$E$2:$E$" & e
ActiveWorkbook.Names.Add Name:="SEATS", RefersTo:="=Data!$F$2:$F$" & f

End Sub 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-17T19:35:18.097

添加一个新的转折点，可以将命名范围与 Address 和 Indirect 函数一起使用。我有一个案例，我正在为一系列表设置命名范围并使用以下内容：

```
Named Range: WWDH-FF-PI which points to Linear!$A$19 (first cell in table) 
```

获取地址： $T$56: =ADDRESS(MATCH(S56,Linear!A:A,0),1,1,1,"Linear")

然后使用多次复制的偏移函数创建数据透视表：

```
=OFFSET(INDIRECT($T$56),C5,$T$57-1) 
```

因此，可以将 Address 函数嵌入（或包装）到 Indirect 函数中以创建动态单元格地址。

# javascript - 将 html 输入值放入 javascript 对象中

> ID：14856890
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:16.110
> 
> 标签：javascript, jquery

为什么这段代码没有给我一个对象，其中键作为`id`文本输入的 s，值作为文本输入的值？

JS

```
$(document).ready(function () {
    $('body').on('click', '#btn', function () {
        var address = {};
        $('input[type="text"].address').each(function (index, element) {
            address[element.id] = $(element).val();
        });
        console.log(address);
    });
}); 
```

HTML

```
 <input class="address" id="attn" value="john doe">
  <input class="address" id="address_1" value="1234 sample st">
  <input class="address" id="address_2" value="Suite 1">
  <input class="address" id="city" value="chicago">
  <input class="address" id="state" value="IL">
  <input class="address" id="zip" value="12345">
  <input class="address" id="country" value="US">
  <input type="button" id="btn" value="btn" /> 
```

[jsbin](http://jsbin.com/osufok/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:27:08.527

这是因为您的输入没有，`type="text"`因此`$('input[type="text"].address')`没有返回任何内容。

最好添加它们以表示输入是文本类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:28:05.437

您的输入没有该`[type=text]`属性，因此您的选择器与它们都不匹配。只需删除它，或使用[`:text`](http://api.jquery.com/text-selector/)选择器：

```
var address = {};
$(':text.address').each(function (index, element) {
    address[element.id] = element.value;
});
console.log(address); 
```

（[更新的演示](http://jsbin.com/osufok/10/edit)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:33:18.007

jQuery 属性选择器（以及浏览器查询选择器）使用 DOM 元素而不是它们的属性。如果您没有`type`在输入元素上明确声明属性，`$("[type]")`并且`document.querySelector("[type]")`即使其 type*属性*为`text`( [http://jsfiddle.net/g76UC/](http://jsfiddle.net/g76UC/) ) 也不会找到该元素。

最简单的解决方案是添加`type=text`到 HTML 中的输入元素。另一种是使用不需要此属性定义的不同选择器。最后（也是最不希望的）是创建一个单独的选择器，例如`:prop`检查元素的类型*属性*。然而，这已经以 jQuery 的`:text`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:32:44.047

采用`this`

```
 $('input.address').each(function () {      
        address[this.id]= $(this).val();
 }); 
```

演示[http://jsbin.com/osufok/12/edit](http://jsbin.com/osufok/12/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T15:34:14.807

试试这个[http://jsfiddle.net/adiioo7/TPYtg/](http://jsfiddle.net/adiioo7/TPYtg/)

```
$(document).ready(function () {
    $('#btn').on('click', function () {
        var address = {};
        $('.address').each(function (index, element) {
            address[element.id] = $(element).val();
        });
        console.log(address);
    });
}); 
```

# forms - 创建访问表单

> ID：14856891
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:19.620
> 
> 标签：forms, ms-access

我不会假装对在 Access 中创建表单一无所知，这对我来说是一个全新的概念。我有一个可以访问的数据库，其中包含许多表和查询。我想创建一个可以用作搜索表单的访问表单，以查找我需要的任何特定字段。我只需输入我要查找的内容，就会出现与之相关的表/查询列表。这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:04:35.313

简短的回答：是的。

更长的答案：我不知道你的背景是什么。如果这是您的第一个数据库项目，那么您有很多阅读工作要做，我会去给自己买一本好的 ACCESS 书并阅读它，或者在 Microsoft Technet 上花费大量时间。这就是我从问题本身所能得到的具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:11:14.497

您的问题“这可行吗”的简短回答是：是的，这绝对可行。

一个好的起点是使用表单向导。然后接受一些关于如何设计表格的培训（大量在线）。Dlookup 可能会成为您的朋友。

或者，报告是另一种显示特定记录的方式，基于某些指定标准（显示人员 A 的地址）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T11:32:08.713

也许为您提供解决方案：

步骤 A：创建表单

创建表单的方法有很多。你可以试试这个：

1) 在“访问对象”窗口（屏幕最左侧）中，标记您希望表单基于的表或查询。这意味着：表单应显示该特定表或查询中的所有字段。

2) 标记表或查询后，在功能区的“创建”窗格中，单击“表单”按钮。这将创建一个基本表单，其中表或查询中的所有字段以或多或少的合理方式排列。（如果您不喜欢这些字段的排列方式，您可以重新排列它们、调整它们的大小或删除它们中的一些等）

3) 关闭此表格。关闭时，系统会要求您输入它的名称，以便您以后识别它。

步骤 B：使用表单进行过滤

1）打开该表单（当然现在在“表单”视图中，而不是“设计”视图中）

2）在功能区的主页部分，在排序和过滤区域中，单击小按钮“高级”，然后从下拉列表中选择“按表单过滤”。完成此操作后，您可以在表单的字段中输入各种标准。其中一些可能会显示下拉菜单以从现有内容中进行选择。在某些字段中，您可能需要输入诸如

```
Like "*liv*" 
```

它将搜索包含任何 live、lively、oblivious、olive 等的内容。

3) 要应用过滤，在功能区、主页部分、排序和过滤区域中，单击“切换过滤器”。这将使您的表单仅显示符合您的标准的记录。

4) 要清除您的过滤条件，请使用高级按钮 --> 清除所有过滤器。

这是对 Access 核心功能的非常基本的介绍。一般来说，我会支持这里的其他贡献者说：去你当地的图书馆，拿他们那里的各种 Access 介绍性书籍，阅读它，然后尝试你阅读的内容。你会进步很快。（你也可以阅读互联网上的任何教程，但我个人会推荐一本书：你会很开心地在书页上漫步，也许坐在你的花园里，遇到你可能没想到的有趣的东西。这将极大地帮助您取得进步。）

# c# - 实体框架 6：给定多重约束，相应的“CProperty”也必须处于“已删除”状态

> ID：14856896
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:26.317
> 
> 标签：c#, .net, sql, database-design

我尝试了以下设计模型的代码。第一次调用`SaveChanges()`成功，但第二次调用失败。

我已经为此工作了 18 个小时，但无法弄清楚问题所在。特别是当我可以使用 MSSQL 服务器资源管理器手动实现代码目标时！

谁能给我一个解决方案？

![在此处输入图像描述](../Images/07bb488a9b96975ece8851fceb922780.png)

```
 var mc = new Model1Container1();

        mc.Categories.Add(new Category() { Text = "Laptop" });
        mc.Categories.Add(new Category() { Text = "TV" });
        mc.SaveChanges();

        var cat = mc.Categories.Where(c => c.Text == "Laptop").FirstOrDefault();
        CKey ck = new CKey() { Key = "RAM" };
        cat.CKeys.Add(ck);

        for (int i = 1; i < 100; i++)
        {
            var ia = new Item() { Text = "MSI GX780-R", Category = cat };

            ia.CProperties.Add(new CProperty() { Value = "4GB", CKey = ck });

            mc.Items.Add(ia);
            mc.SaveChanges();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:03:06.743

您正在尝试将同一`CKey`实例与 100 个实例相关联`CProperty`，但根据多重性图，给定的实例`CKey`最多只能与 1 相关联`CProperty`。

`CKey`在循环的每次迭代中创建一个新实例，或者修改您的架构。

# python - 以编程方式模拟浏览器和控制

> ID：14856899
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:34.380
> 
> 标签：python, google-chrome, firefox, selenium, flash

我正在尝试运行一个无头浏览器，当我传递一个 URL 时，它会模拟整个网页，就像从任何流行的浏览器运行一样。重要的是，它必须设法运行 Adob​​e Flash Player（以及因此的 Flash 视频）。我听说过有关 selenium webkit 的消息，但我不确定它的功能，因为我从未使用过它，尤其是在处理 Flash 内容时。事实上，如果我要缩小问题范围，我只想在网站中运行 Flash 内容，但在我的程序（最好是 python）下的互联网浏览窗口之外运行。如果这是可能的，有人可以指出我正确的方法。如果问题需要进一步澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:25:58.250

尝试一下[http://phantomjs.org/](http://phantomjs.org/)，它与无头 webkit 和 flash 配合使用效果很好。您可以查看[http://jeanphix.me/Ghost.py/](http://jeanphix.me/Ghost.py/)以使用 Python 控制 phantomjs。

# twitter-bootstrap - 如何延迟显示模式的标题，直到在 Twitter 引导程序中返回 ajax 调用？

> ID：14856901
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:41.493
> 
> 标签：twitter-bootstrap

我正在使用普通的 twitter 引导模式，例如：

```
<a data-toggle="modal" data-id="983E46EC-9DFE-4E5F-80E3-524C982FCC67" title="" class="open-signal btn btn-primary" href="#addSignal">Add signal</a> 
```

data-id 在一小段 jQuery 中用于发出 ajax 请求，渲染出一些 html，然后将其注入 modal-body div：

```
$(document).on('click', '.open-signal', function () {
    var id = $(this).data('id');
    $.get('@Url.Action("CreateSignal")', { "id": id })
        .done(function (d) {
            $('.modal-body', '#addSignal').html(d);
            $('#addSignal').modal('show');                    
        });
    }); 
```

然而，模式的页眉和页脚已经显示，而 ajax 调用可能是几秒钟或更长时间，已经显示并且只有当 ajax 调用完成时，它才会注入检索到的 html。

如何延迟模式（页眉+页脚）完全出现，直到 ajax 调用完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:39:36.017

`data-toggle="modal"`从`<a>`标签中删除。但是请注意，您还应该抓住`.error`$.get 并向用户提供反馈，否则单击*Add 信号*似乎没有任何作用。

这里的例子：http: [//jsfiddle.net/mccannf/HK26K/2/](http://jsfiddle.net/mccannf/HK26K/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T12:49:34.110

Bootstrap 文档有一个示例，该示例使用`show.bs.modal`事件作为触发器将[ajax 加载到模式对话框](http://getbootstrap.com/javascript/#modals-related-target)中，而不是打开器上的 click 事件。我在我的解决方案中修改了该模式：

```
$('#mainModal')
    .on('show.bs.modal', function (e) {
        var $source = $(e.relatedTarget);
        var $modal = $(this);
        var title = $source.data('modalTitle'); //data-modal-title="@item.Name"
        var url = $source.attr("href"); //assumes source is a hyperlink

        if (title && url) {
            $modal.find('.modal-title').text(title);
            $modal.find(".modal-body").load(url, function () {
                //the call to modal('show') triggers the event again, 
                //but the $source won't have a title or an href
                $modal.modal('show'); 
                $modal.find('.modal-body input').first().focus();
            });

            //don't show the dialog immediately
            return e.preventDefault();
        }
    }); 
```

# linux - 如何使用 linux 命令访问 Raima DB - 访问和列出表

> ID：14856904
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:46.440
> 
> 标签：linux, raima

我正在处理一个使用 Raima 作为数据库管理器的遗留系统。我希望能够使用这种类型的管理系统访问数据库。我是新手，想了解它是如何工作的，以及如何使用 linux 命令对此数据库进行基本查询。那么对于初学者来说，我如何访问数据库以及如何列出数据库中的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:47:04.017

虽然它很有用，但让我把它放在这里：

> [RDMe 交互式数据库访问实用程序指南](http://books.raima.com/rdme/11_0/PDFIDA.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:43:03.930

这里有一些关于此的信息：

[http://www.raima.com/sql-create-database/](http://www.raima.com/sql-create-database/)

# ios - touchesBegan, touchesEnded, touchesMoved 用于移动 UIView

> ID：14856906
> 
> 赞同：20
> 
> 时间：2013-02-13T15:24:48.083
> 
> 标签：ios, objective-c, xcode, uiview, touchesbegan

我需要拖动我的 UIView 对象。我使用此代码，但它不起作用

```
float oldX, oldY;
BOOL dragging;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self];

    if ([[touch.view class] isSubclassOfClass:[UILabel class]]) {
        UILabel *label = (UILabel *)touch.view;
        if (CGRectContainsPoint(label.frame, touchLocation)) {
            dragging = YES;
            oldX = touchLocation.x;
            oldY = touchLocation.y;
        }
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    dragging = NO;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self];

    if ([[touch.view class] isSubclassOfClass:[UILabel class]]) {
        UILabel *label = (UILabel *)touch.view;

        if (dragging) {
            CGRect frame = label.frame;
            frame.origin.x = label.frame.origin.x + touchLocation.x - oldX;
            frame.origin.y =  label.frame.origin.y + touchLocation.y - oldY;
            label.frame = frame;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T16:05:45.153

我建议使用`UIPanGestureRecognizer`：

```
-(void)dragging:(UIPanGestureRecognizer *)gesture
{
    // Check if this is the first touch
    if(gesture.state == UIGestureRecognizerStateBegan)
    {
        // Store the initial touch so when we change positions we do not snap
        self.panCoord = [gesture locationInView:gesture.view];
        [self.view bringSubviewToFront:gesture.view];

    }

    CGPoint newCoord = [gesture locationInView:gesture.view];

    // Create the frame offsets to use our finger position in the view.
    float dX = newCoord.x-self.panCoord.x;
    float dY = newCoord.y-self.panCoord.y;

    gesture.view.frame = CGRectMake(gesture.view.frame.origin.x+dX,
                                    gesture.view.frame.origin.y+dY,
                                    gesture.view.frame.size.width, 
                                    gesture.view.frame.size.height);
} 
```

这只是我的一个偏好。对我来说，使用手势识别器要比使用`touchesBegan`, `touchesEnded`,简单得多`touchesMoved`。`UIPanGestureRecognizer`我将在不起作用的情况下使用这些。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-13T16:25:58.077

这是移动 UIView 对象的工作代码

浮动旧X，旧Y；BOOL 拖动；

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:touch.view];
    if ([[touch.view class] isSubclassOfClass:[UILabel class]]) {
        dragging = YES;
        oldX = touchLocation.x;
        oldY = touchLocation.y;
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    dragging = NO;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:touch.view];    
    if ([[touch.view class] isSubclassOfClass:[UILabel class]]) {
        UILabel *label = (UILabel *)touch.view;
        if (dragging) {
            CGRect frame = label.frame;
            frame.origin.x = label.frame.origin.x + touchLocation.x - oldX;
            frame.origin.y = label.frame.origin.y + touchLocation.y - oldY;
            label.frame = frame;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:15:45.053

你的代码有些奇怪。

您询问位置`self`，一些 UIView 大概包含`UILabel`您要检查的内容。这就引出了一个问题，即为什么您不将 touchesXXX 添加到您的某些 UILabel 子类中。

当您使用根据其 superview.bounds 定义的 label.frame （您询问触摸位置的父 UIView）时，这会抵消，但这并不是最直接的方式来遵循什么是继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T11:28:59.033

使用此代码，我可以将我的 UIView 对象移动到任何地方。我的 ViewController.swift 看起来像这样。

```
// code from below

import UIKit

class ViewController: UIViewController {

    var location = CGPoint(x: 0, y: 0)

    @IBOutlet weak var Person: UIImageView!

    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {

        var touch : UITouch! =  touches.first! as UITouch

        location = touch.location(in: self.view)

        Person.center = location

    }

    override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent?) {

        var touch : UITouch! =  touches.first! as UITouch

        location = touch.location(in: self.view)

        Person.center = location
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.

        Person.center = CGPoint(x: 160, y: 330)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }

}

//ends 
```

希望它有所帮助，尽管它是另一种方法，而不是所提到的方法。

# jquery - 如果我需要进行 CORS 所需的 jQuery.Ajax POST 调用，JSONP 是唯一的解决方案吗？

> ID：14856908
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:50.507
> 
> 标签：jquery, jsonp, http-post, cors

我需要调用位于不同域的 WCF RESTful 服务。

我通过 jQuery.Ajax 进行 HTTP POST 调用。

我想做一个 HTTP POST 而不是 GET 的原因是我的 JavaScript 对象的属性中有一些特殊字符；我不想浪费时间处理这个问题。

它在 IE9 上运行良好，但在 FF 和 IE8 上失败（如果有兴趣，请参阅相关问题： [为什么它失败了？](https://stackoverflow.com/questions/14855427/what-is-wrong-here-so-that-ie9-can-do-cors-ajax-call-but-ie8-and-firefox-can-not)

人们建议我使用 JSONP。

**问题**：是否有任何其他更快的方法可以使 CORS 所需的 jQuery.Ajax HTTP POST 调用适用于所有浏览器 - 而无需 JSONP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:26:35.897

您可以通过您的服务器代理 HTTP 请求。然后你就不需要 JSONP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:28:30.860

如果您可以控制 RESTful 服务，则可以在服务响应中添加此标头：

`'Access-Control-Allow-Methods', 'POST'`

`'Access-Control-Allow-Origin', 'YOUR_CLIENT_DOMAIN'`

使用此标头，您可以绕过浏览器中的 CORS。

# jquery - 主页中的 Joomla 弹出式覆盖

> ID：14856909
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:50.980
> 
> 标签：jquery, joomla, login, popup, overlay

我想在主页上添加一个 jquery 弹出窗口。如果您未登录：弹出窗口应仅在单击页面上的任意位置后出现，并且必须包含登录表单和注册-

如果您已登录，则不会出现弹出窗口。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:22:02.130

```
<?php 

   $session = JFactory::getSession();
   $isUserLogged = $session->get('YOUR_SESSION_VARIABLE');

   if(empty($isUserLogged )):
?>
      <script type='text/javascript'>
         $(document).ready(function(){
            //OPEN LOGIN MODAL AND SET THE SESSION COOKIE
         });
      </script>
 <?php
  endif;
 ?> 
```

希望它有效:)

# yii - Yii 动态验证。还有其他方法吗？

> ID：14856911
> 
> 赞同：0
> 
> 时间：2013-02-13T15:24:54.803
> 
> 标签：yii

我有一些模型。根据 typeId 的值，应该需要一些参数

```
typeId=1    Required:       param2  param3  param4  param5  param6  param7      param9  
typeId=2    Required:   param1      param3  param4  param5                  
typeId=3    Required:   param1      param3                  param8  param9  
typeId=4    Required:   param1      param3                          
typeId=5    Required:   param1                                  param10 
```

所以我以这种方式解决了它：

```
public function rules()
{
    return array(
        array('typeId, param1, param2', 'numerical', 'integerOnly'=>true),
        array('param3, param4, param5, param6, param7, param8, param9', 'length', 'max'=>20),
        array('param10, param11', 'length', 'max'=>255),
        array('created, deleted', 'safe'),

        array('typeId', 'required', 'on'=>'insert, update'),
        array('typeId', 'exist', 'attributeName'=>'id', 'className'=>'Type', 'message'=>'Select {attribute}'),

        array('id, typeId, param1, param2, param3, param4, param5, param6, param7, param8, param9, param10, param11, created, deleted', 'safe', 'on'=>'search'),            

        //dynamic rules

        array('param1', 'required', 'on'=>'type2, type3, type4, type5'),
        array('param1', 'exist', 'attributeName'=>'id', 'className'=>'Param1', 'message'=>'Select {attribute}', 'on'=>'type2, type3, type4, type5'),

        array('param2', 'required', 'on'=>'type1'),
        array('param2', 'exist', 'attributeName'=>'id', 'className'=>'Param2', 'message'=>'Select {attribute}', 'on'=>'type1'),
        array('param3', 'required', 'on'=>'type1, type2, type3, type4'),
        array('param4', 'required', 'on'=>'type1, type2'),
        array('param5', 'required', 'on'=>'type1, type2'),
        array('param6', 'required', 'on'=>'type1'),
        array('param7', 'required', 'on'=>'type1'),
        array('param8', 'required', 'on'=>'type3'),

        array('param9', 'required', 'on'=>'type1, type3'),
        array('param10', 'required', 'on'=>'type5'),
    );
}

public function validate($attributes=null, $clearErrors=true)
{
    if($clearErrors)
        $this->clearErrors();
    if($this->beforeValidate())
    {
        foreach($this->getValidators() as $validator)
            $validator->validate($this,$attributes);

        //validate dynamic rules
        if(!$this->hasErrors())
        {
            $scenario=$this->scenario;
            if($this->scenario=$this->getSubscenario($this->signalId))
            {
                foreach($this->getValidators() as $validator)
                    $validator->validate($this,$attributes);
            }
            $this->scenario=$scenario;
        }
        $this->afterValidate();
        return !$this->hasErrors();
    }
    else
        return false;
}

public function getSubscenario($typeId)
{
    switch($typeId)
    {
        case Signal::TYPE_1:
            return 'type1';
        case Signal::TYPE_2:
            return 'type2';
        case Signal::TYPE_3:
            return 'type3';
        case Signal::TYPE_4:
            return 'type4';
        case Signal::TYPE_5:
            return 'type5';
        default:
            return false;
    }
} 
```

还有其他方法吗？

# php - 从php中的下拉菜单创建项目列表

> ID：14856921
> 
> 赞同：0
> 
> 时间：2013-02-13T15:25:20.120
> 
> 标签：php, javascript, jquery, html, drop-down-menu

我一直在尝试实现一个下拉列表，如果做出选择，它将在下拉列表上方列出所选项目。

我正在使用下面的网站

[http://odyniec.net/articles/multiple-select-fields/](http://odyniec.net/articles/multiple-select-fields/)

我正在使用的特定部分在**"Fancy Javascript Method"**下面，但是我将代码放在 jsfiddle 中，它不起作用，如图所示。

谁能帮帮我吗？任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:51:08.143

试试这个：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html" />
    <title>Ingredients</title>

    <script type="text/javascript">
    <!--
        function selectIngredient(select)
    {
      var option = select.options[select.selectedIndex];
      var ul = select.parentNode.getElementsByTagName('ul')[0];

      var choices = ul.getElementsByTagName('input');
      for (var i = 0; i < choices.length; i++)
        if (choices[i].value == option.value)
          return;

      var li = document.createElement('li');
      var input = document.createElement('input');
      var text = document.createTextNode(option.firstChild.data);

      input.type = 'hidden';
      input.name = 'ingredients[]';
      input.value = option.value;

      li.appendChild(input);
      li.appendChild(text);
      li.setAttribute('onclick', 'this.parentNode.removeChild(this);');     

      ul.appendChild(li);
    }
    -->
    </script>
</head>

<body>

<?php

if ( isset( $_POST['ingredients'] ) ) {

    if ( !empty( $_POST['ingredients'] ) ) {

        echo '<fieldset><legend>Your ingredients</legend>';

        foreach ( $_POST['ingredients'] as $ingredient ) {

            echo '<p>- ', $ingredient, '</p>';

        }

        echo '</fieldset>';

    } else {

        echo '<p>No ingredients selected!</p>';

    }

}

?>
<form action="" method="post">

<ul>
 <li onclick="this.parentNode.removeChild(this);">
  <input type="hidden" name="ingredients[]" value="Cheese" />
  Cheese
 </li>
 <li onclick="this.parentNode.removeChild(this);">
  <input type="hidden" name="ingredients[]" value="Ham" />
  Ham
 </li>
 <li onclick="this.parentNode.removeChild(this);">
  <input type="hidden" name="ingredients[]" value="Mushrooms" />
  Mushrooms
 </li>
</ul>

<select onchange="selectIngredient(this);">
 <option value="Cheese">Cheese</option>
 <option value="Olives">Olives</option>
 <option value="Pepperoni">Pepperoni</option>
</select>

<input type="submit" value="go" />
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:55:07.317

我清理了一下，代码有点不对劲。

```
function selectIngredient(select) {
    var value = select.val();
    var $ul = $(select).prev('ul');

  if ($ul.find('input[value=' + value + ']').length == 0)
    $ul.append('<li onclick="$(this).remove();">' +
      '<input type="hidden" name="ingredients[]" value="' + 
      value + '" /> ' + value + '</li>');
}

$('select.options').on('change' , function() {
    selectIngredient($(this)); 
}); 
```

**演示：http: [//jsfiddle.net/c5s9c/](http://jsfiddle.net/c5s9c/)**

# linq - 尝试使用 linq 检索结果

> ID：14856925
> 
> 赞同：0
> 
> 时间：2013-02-13T15:25:47.610
> 
> 标签：linq

嗨，我有一个表，其中有一列 AllowStockEdit，有点

我正在尝试检查用户是否具有编辑权限，然后在 radgridview 上显示编辑和删除按钮

这是我正在使用的代码

```
 protected void AccessLevels(object sender, EventArgs e)
{
    LINQDataContext dc = new LINQDataContext();
    UserPermission up = dc.UserPermissions.Where(a => a.ID == (int)Session["Permission"]).SingleOrDefault();
    up.AllowStockEdit = true;
}

    /*show hide buttons */

    protected void SelectedStockGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            // show the edit button when user has correct access level

            if  
            {
                Button btnEdit = (Button)e.Row.FindControl("ShowEditButton");
                Button btndelete = (Button)e.Row.FindControl("ShowDeleteButton");

                btnEdit.Visible = true;
                btndelete.Visible = true;

            }
        }
    } 
```

我正在尝试检查用户是否显示按钮是否具有编辑权限

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:47:51.417

像这样的东西：

```
 protected bool AccessLevels()
{
    LINQDataContext dc = new LINQDataContext();
    return dc.UserPermissions.Where(a => a.ID == (int)Session["Permission"]).SingleOrDefault().AllowStockEdit;

}

 protected void SelectedStockGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            // show the edit button when user has correct access level

            if(AccessLevels() == true) 
            {
                Button btnEdit = (Button)e.Row.FindControl("ShowEditButton");
                Button btndelete = (Button)e.Row.FindControl("ShowDeleteButton");

                btnEdit.Visible = true;
                btndelete.Visible = true;

            }
        }
    } 
```

# wicket - 空检查手动转换的 TextField 值

> ID：14856928
> 
> 赞同：1
> 
> 时间：2013-02-13T15:25:52.193
> 
> 标签：wicket

我有一个 TextField 覆盖它的 getConverter 方法来添加一个 Joda 时间转换器：

```
new TextField<P>(id) {
    @Override
    public <P> IConverter<P> getConverter(Class<P> type) {
        return (IConverter<P>) new JodaDateTimeConverter();
    }
}; 
```

如果输入无效，转换器将返回 null。但是，我希望能够根据**需要标记此字段**，但我不知道该怎么做：

*   textField.isRequired(true) 不起作用，因为在转换之前完成了必需的检查。这不适用于非空但无效的输入。
*   textField.add(.. some validator ..) 不起作用，因为如果转换器返回 null，则不会调用验证器。

我真的看不到根据需要标记我的日期字段的方法。你知道怎么做吗？可能我的方法根本不适合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:00:21.953

如果你添加一个[INullAcceptingValidator](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/validation/INullAcceptingValidator.html)而不是一个常规的，它也会被调用为空值。

将验证器子类化以返回 true`validateOnNullValue()`也可能会有所帮助。

来自 JavaDocs：

> 指示是否验证值为空的值。如果值为 null，通常希望跳过验证，除非我们想确保该值实际上为 null（一个罕见的用例）。扩展此方法并希望确保值为 null 的验证器应覆盖此方法并返回 true。

# php - 用户授予的 facebook 电子邮件权限未收到正确的电子邮件

> ID：14856929
> 
> 赞同：0
> 
> 时间：2013-02-13T15:25:52.850
> 
> 标签：php, facebook

我遇到了一些 Facebook 帐户的问题。用户授予电子邮件权限，因此我从 facebook 获取包含电子邮件的用户信息。与用户核实，他确实保存了一封电子邮件，但我的应用没有收到实际的电子邮件，而是收到了一些奇怪的 app+e7mq0tl2e9.1atcj2t.9af3a401e9285e669c0480d3c4aa5fbe@proxymail.facebook.com

有什么想法为什么我会收到这个而不是实际用户的电子邮件？

先感谢您！

* * *

为什么我要问这个，因为根据用户的电子邮件我保存了他的用户名（'@'之前的所有内容） - 但是当我没有收到真实的用户电子邮件时，我可能应该强制用户输入他的电子邮件和用户名。一般来说，是否有任何关于 facebook 和我的网站应用程序交互的有用文章或文档。对我来说，问题是一旦用户通过 facebook 唱歌以正确保存用户的唯一标识符，因此下次用户决定登录时，他可以输入用户名和密码（或者仍然使用我认为与 facebook 相同的 facebook 登录报名）。但是通过 facebook 注册用户没有指定他的密码，所以我需要生成/要求用户输入它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:30:57.400

Facebook 用户在使用 scope=email 进行身份验证时可以选择使用 Facebook 提供的匿名电子邮件地址。发送到该地址的电子邮件将被传递到他们的实际电子邮件。

这样做的好处是在用户删除您的应用时被禁用（对于 Zynga 游戏等潜在的垃圾应用非常方便）。您不能禁用此功能，您应该将它们视为合法电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:49:44.450

使用 facebook 签名的全部意义在于，用户不必输入他们的用户名和密码（因为他们已经用 facebook 完成了。）在你的情况下，下次他们想登录时，他们会点击“ facebook”按钮，您将使用 facebook 对其进行身份验证。如果他们已经登录 facebook，则无需输入密码。因此，不要向他们询问密码或用户名。

如果您希望他们在您的网站上拥有用户名和密码，那么请不要费心进行 facebook 登录。

出于识别目的，请使用 facebook 为您提供的其中一个 facebook id。

# xml - XML 文件转为 UTF-8 无结果

> ID：14856932
> 
> 赞同：0
> 
> 时间：2013-02-13T15:25:58.840
> 
> 标签：xml, utf-8

为什么以下代码不转换为 UTF-8

```
var doc = new XmlDocument();
doc.Load(FileName);

XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, Indent=true };

using (var fileStream = File.OpenWrite(destinationFile))
{
  using (var writer = XmlWriter.Create(fileStream, settings))
  {
    //  writer.WriteStartDocument();

    doc.Save(writer);
  }
} 
```

我的目标是将给定的 xml 文件转换为 utf-8，但上述代码的结果是文件来自 Ansi。这个试了一百次，没有结果。

# sql - 不使用子查询的基本 SQL 查询

> ID：14856933
> 
> 赞同：-3
> 
> 时间：2013-02-13T15:25:58.967
> 
> 标签：sql, ms-access, subquery

tbl销售：

```
EmployeeID, 
DailyDate, 
Sales# 
```

如何进行查询以返回每个员工的销售额最低的天数#？

我特别想从一条 SQL 语句中运行它，我对此进行了研究，但我可以弄清楚！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:36:56.087

我有点困惑，因为这个问题的标题和内容似乎没有关联。标题指的是一个似乎不相关的子表单。该问题还指出您可以使用子查询来执行此操作，但您想在一个语句中执行此操作，但带有子查询的查询仍然是一个语句。

因此，我从您的主要问题中提出：**“我如何进行查询以返回每个员工的销售额最少的天数#？”** **，以及您想在一个**声明中实现这一点的事实。在这种情况下，您可以使用：

```
SELECT  T.EmployeeID,
        COUNT(*) AS MinDays
FROM    YourTable T
        INNER JOIN
        (   SELECT  DailyDate, MIN([Sales#]) AS MinSales
            FROM    YourTable
            GROUP BY DailyDate
        ) T2
            ON T2.DailyDate = T.DailyDate
            AND T2.[MinSales] = T.[Sales#]
GROUP BY T.EmployeeID; 
```

# python - 为 MultiIndex 中的缺失日期插入 0 值

> ID：14856941
> 
> 赞同：6
> 
> 时间：2013-02-13T15:26:11.823
> 
> 标签：python, pandas

假设我有一个 MultiIndex，它包含日期和一些类别（在下面的示例中为简单起见），并且对于每个类别，我都有一个包含某个过程值的时间序列。我只有在有观察时才有一个值，现在我想在那个日期没有观察时添加一个“0”。我发现了一种似乎非常低效的方法（堆叠和拆解，在数百万个类别的情况下会创建许多列）。

```
import datetime as dt
import pandas as pd

days= 4
#List of all dates that should be in the index
all_dates = [datetime.date(2013, 2, 13) - dt.timedelta(days=x)
    for x in range(days)]
df = pd.DataFrame([
    (datetime.date(2013, 2, 10), 1, 4),
    (datetime.date(2013, 2, 10), 2, 7),
    (datetime.date(2013, 2, 11), 2, 7),
    (datetime.date(2013, 2, 13), 1, 2),
    (datetime.date(2013, 2, 13), 2, 3)],
    columns = ['date', 'category', 'value'])
df.set_index(['date', 'category'], inplace=True)
print df
print df.unstack().reindex(all_dates).fillna(0).stack()
# insert 0 values for missing dates
print all_dates

                        value
date       category       
2013-02-10 1             4
           2             7
2013-02-11 2             7
2013-02-13 1             2
           2             3

                      value
            category       
2013-02-13 1             2
           2             3
2013-02-12 1             0
           2             0
2013-02-11 1             0
           2             7
2013-02-10 1             4
           2             7
[datetime.date(2013, 2, 13), datetime.date(2013, 2, 12),
    datetime.date(2013, 2, 11),     datetime.date(2013, 2, 10)] 
```

有人知道实现相同目标的更聪明的方法吗？

编辑：我发现了另一种实现相同目标的可能性：

```
import datetime as dt
import pandas as pd

days= 4
#List of all dates that should be in the index
all_dates = [datetime.date(2013, 2, 13) - dt.timedelta(days=x) for x in range(days)]
df = pd.DataFrame([(datetime.date(2013, 2, 10), 1, 4, 5),
(datetime.date(2013, 2, 10), 2,1, 7),
(datetime.date(2013, 2, 10), 2,2, 7),
(datetime.date(2013, 2, 11), 2,3, 7),
(datetime.date(2013, 2, 13), 1,4, 2),
(datetime.date(2013, 2, 13), 2,4, 3)],
columns = ['date', 'category', 'cat2', 'value'])
date_col = 'date'
other_index = ['category', 'cat2']
index = [date_col] + other_index
df.set_index(index, inplace=True)
grouped = df.groupby(level=other_index)
df_list = []
for i, group in grouped:
    df_list.append(group.reset_index(level=other_index).reindex(all_dates).fillna(0))
print pd.concat(df_list).set_index(other_index, append=True)

                    value
           category cat2       
2013-02-13 1        4         2
2013-02-12 0        0         0
2013-02-11 0        0         0
2013-02-10 1        4         5
2013-02-13 0        0         0
2013-02-12 0        0         0
2013-02-11 0        0         0
2013-02-10 2        1         7
2013-02-13 0        0         0
2013-02-12 0        0         0
2013-02-11 0        0         0
2013-02-10 2        2         7
2013-02-13 0        0         0
2013-02-12 0        0         0
2013-02-11 2        3         7
2013-02-10 0        0         0
2013-02-13 2        4         3
2013-02-12 0        0         0
2013-02-11 0        0         0
2013-02-10 0        0         0 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-12-22T03:05:49.100

您可以根据所需索引级别的笛卡尔积创建新的多索引。然后，使用新索引重新索引您的数据框。

```
(date_index, category_index) = df.index.levels
new_index = pd.MultiIndex.from_product([all_dates, category_index])
new_df = df.reindex(new_index)

# Optional: convert missing values to zero, and convert the data back
# to integers. See explanation below.
new_df = new_df.fillna(0).astype(int) 
```

而已！新数据框具有所有可能的索引值。现有数据已正确编入索引。

请继续阅读以获取更详细的说明。

* * *

## 解释

### 设置样本数据

```
import datetime as dt
import pandas as pd

days= 4
#List of all dates that should be in the index
all_dates = [dt.date(2013, 2, 13) - dt.timedelta(days=x)
    for x in range(days)]
df = pd.DataFrame([
    (dt.date(2013, 2, 10), 1, 4),
    (dt.date(2013, 2, 10), 2, 7),
    (dt.date(2013, 2, 11), 2, 7),
    (dt.date(2013, 2, 13), 1, 2),
    (dt.date(2013, 2, 13), 2, 3)],
    columns = ['date', 'category', 'value'])
df.set_index(['date', 'category'], inplace=True) 
```

这是示例数据的样子

```
 value
date       category
2013-02-10 1             4
           2             7
2013-02-11 2             7
2013-02-13 1             2
           2             3 
```

### 创建新索引

使用[from_product](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.MultiIndex.from_product.html)我们可以创建一个新的多索引。这个新索引是您传递给函数的所有值的[笛卡尔积。](https://en.wikipedia.org/wiki/Cartesian_product)

```
(date_index, category_index) = df.index.levels

new_index = pd.MultiIndex.from_product([all_dates, category_index]) 
```

### 重新索引

使用新索引重新索引现有数据框。

现在所有可能的组合都出现了。缺失值为空 (NaN)。

```
new_df = df.reindex(new_index) 
```

现在，扩展的、重新索引的数据框如下所示：

```
 value
2013-02-13 1    2.0
           2    3.0
2013-02-12 1    NaN
           2    NaN
2013-02-11 1    NaN
           2    7.0
2013-02-10 1    4.0
           2    7.0 
```

### 整数列中的空值

可以看到新数据框中的数据已经从整数转换为浮点数。[Pandas 在整数列中不能有空值](http://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na)。或者，我们可以将所有空值转换为 0，并将数据转换回整数。

```
new_df = new_df.fillna(0).astype(int) 
```

结果

```
 value
2013-02-13 1      2
           2      3
2013-02-12 1      0
           2      0
2013-02-11 1      0
           2      7
2013-02-10 1      4
           2      7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T20:05:21.440

签出这个答案：[如何以 pythonic 方式填充 Pandas 数据框的缺失记录？](https://stackoverflow.com/questions/12390336/how-to-fill-the-missing-record-of-pandas-dataframe-in-pythonic-way)

您可以执行以下操作：

```
import datetime
import pandas as pd

#make an empty dataframe with the index you want
def get_datetime(x):
    return datetime.date(2013, 2, 13)- datetime.timedelta(days=x)

all_dates = [ get_datetime(x) for x in range(4)]
categories = [1,2,3,4]
index = [ [date, cat] for cat in categories for date in all_dates ]

#this df will be just an index
df = pd.DataFrame(index)
df =print df.set_index([0,1])
df.columns = ['date', 'category']
df = df.set_index(['date', 'category'])

#now if your original df is called df_original you can reindex against the other values
df_orig = df_orig.reindex_axis(df.index)

#and to add zeros
df_orig.fillna(0) 
```

# javascript - Fancybox 使用什么参数以便 IFRAME 在自动大小的窗口中打开？

> ID：14856943
> 
> 赞同：0
> 
> 时间：2013-02-13T15:26:14.440
> 
> 标签：javascript, jquery

正如标题所说的那样。我正在使用 Fancybox，这是我网站上流行的 jQuery 灯箱脚本。

我设置了一个超链接，它使用请求页面的 IFRAME 弹出打开灯箱。

这工作正常，但是......

灯箱太大，我希望它根据内容自动调整大小。在[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)的文档中，您可以在表格中看到一个 autosize 参数。

是这样吗，知道jQuery的人可以帮我看看这在我的脚本配置中是如何出现的吗？

这是我当前的配置：-

```
$(document).ready(function() {
    $(".fancybox").fancybox({
 type: 'iframe',
 nextClick: false
     });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:43:36.600

我已经`autoSize`在您的网站上尝试过，但它似乎不起作用。但是这段代码似乎可以解决问题：

```
$(".fancybox").fancybox({
    type: 'iframe',
    beforeShow: function(){
        this.width = $('.fancybox-iframe').contents().find('div:first').width();
    },
    nextClick: false
}); 
```

我在[这个答案](https://stackoverflow.com/a/11039317/1606729)中找到了它并将其调整为您的布局以从根 div 检索宽度。

但最好了解为什么`autoSize`对您加载的 iframe 没有任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:49:17.727

查看您的 URL，IFRAME 在第一个 div 元素上具有 520px 的固定宽度。

```
<div style="width: 520px; margin: 0 auto;"> 
```

根据您的需要，尝试移除或减小该宽度以使其不那么宽。

# c# - Infopath 2007 - 如何在后面的 C# 代码中以编程方式设置 ScreenTip？

> ID：14856944
> 
> 赞同：1
> 
> 时间：2013-02-13T15:26:14.637
> 
> 标签：c#, sharepoint, infopath

我需要在后面的信息路径代码中以编程方式设置信息路径屏幕提示。我读了一些关于这个的东西，这是不可能的，但是，我做了这样的事情：

```
 XPathNavigator field1 = MainDataSource.CreateNavigator().SelectSingleNode(xpath1, NamespaceManager);

        XPathNavigator field2 = MainDataSource.CreateNavigator().SelectSingleNode(xpath2, NamespaceManager);

        if (field1.Value.ToString() == "none")
        {

            this.Errors.Add(field2, "XXX", "XXxxxXX", "xxXXxxXX");

        } 
```

但我仍然将字段更改为“不能为空白”任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:24:58.813

我遇到了和你一样的问题，并没有真正找到一个简单而干净的解决方案。我必须检查是否正确输入了 IBAN。使用额外的字段和方法对我来说不够干净，所以我通过 Errors-property 尝试了它，你说它不起作用。这是我使用的代码：

```
XPathNavigator navigator = MainDataSource.CreateNavigator();
XPathNavigator ibanField = navigator.SelectSingleNode("/my:.../my:.../my:FldIban", NamespaceManager);
Errors.Add(ibanField , "Invalid IBAN", "The given IBAN is not formatted correctly"); 
```

无论如何，希望这会有所帮助，它对我有用。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:22:51.057

我在 value = true 时使用 hide 创建了按钮和特殊字段，并在 true 时显示。

> public void CTRL32_7_Clicked(object sender, ClickedEventArgs e) { // XPathNavigator test = MainDataSource.CreateNavigator().SelectSingleNode("/my:myFields/my:field11", NamespaceManager);

```
 XPathNavigator test2 = MainDataSource.CreateNavigator().SelectSingleNode("my:myFields/my:buttonSet", NamespaceManager);
        if (test2.Value == "FALSE")
        {
            test2.SetValue("TRUE");
        }
        else
        {
            test2.SetValue("FALSE");
        }
        XPathNavigator tooltip = MainDataSource.CreateNavigator().SelectSingleNode("my:myFields/my:tooltip", NamespaceManager);
        tooltip.SetValue("Custom Tooltip DEMO");
    } 
```

# eclipse - IntelliJ中的eclipse ctrl+k等效快捷方式

> ID：14856947
> 
> 赞同：47
> 
> 时间：2013-02-13T15:26:34.190
> 
> 标签：eclipse, intellij-idea

在*Eclipse*中，如果光标在一个单词上并按下`Ctrl`+ `K`，您将跳转到文件中该单词的下一个出现。

*IntelliJ*中是否有类似的快捷方式？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-13T17:02:53.980

**在插入符号处查找单词**，默认为`Ctrl`+ `F3`，可以在`File`|中更改 `Settings`| `Keymap`：

![在插入符号处查找单词](../Images/b9061e87e07a44555c35cdedab5659ca.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-16T19:33:21.423

您将需要 2 个步骤来归档类似行为：

步骤1：

按`Ctrl`+`F3`开始搜索当前选择集文本（如果未选择文本，则将采用整个单词）。

第2步：

按`F3`跳到**下一个**事件或`Shift`+`F3`跳到上**一个**。

如果您切换到另一个文件，这种方法甚至会继续搜索文本。只需按下`F3`，您将跳转到另一个文件中的下一个匹配项。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-03T12:04:08.787

`Shift`+`F3`在*Android Studio / IntelliJ*中为我工作，在 eclipse 中我们使用`Ctrl`+`K`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-05T10:08:57.800

您可以使用宏来做到这一点：

*   编辑 -> 宏 -> 开始宏录制
*   编辑 -> 查找 -> 在插入符号处查找单词
*   编辑 -> 查找 -> 查找下一个/移动到下一个事件
*   编辑 -> 宏 -> 停止宏录制
*   给宏起个名字，例如“模拟 Eclipse `Ctrl`+ `K`”
*   文件 -> 设置 -> 键盘映射 -> 找到宏“模拟 eclipse `Ctrl`+ `K`” -> 绑定热键`Ctrl`+`K`

`Ctrl`++也可以这样做（使用查找上一个/移动到上一个事件）`Shift`。`K`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-22T07:38:22.523

我认为*Android Studio/IntelliJ*的播放效果不是很好，对我来说，我将*Android Studio Keymap*更改为*Eclipse*，就像我以前一样（[我的收藏提示](http://ask.osify.com/qa/812)）并使用`Ctrl`+ `K`，我先按搜索字符串：

*   选择我们要搜索的文本
*   按`Ctrl`+ `F`,`Enter`
*   然后可以在我们所在的任何文件中使用： `Ctrl`+`K`

这就是我正在做的，希望可以帮助某人。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-14T00:50:00.790

有 2 个选项，如下所示：设置 -> 键盘映射 -> 主菜单 -> 查找

*   查找下一个/移动到下一个事件
*   查找上一个/移动到上一个事件

对我来说，这在开始时不起作用，因为 GIT 推送快捷方式使用相同的键（`Ctrl`+ `K`& `Ctrl`+ `Shift`+ `K`）。更改冲突的 GIT 快捷方式后一切都很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-25T13:58:32.653

[![在此处输入图像描述](../Images/b1ecd09cd367c06266c56a426cabaefb.png)](https://i.stack.imgur.com/viY0P.png)

您需要先对选定的单词执行 Ctrl+F，现在它会被缓存，然后您可以使用 Ctrl+L 和 ctrl+shitf+L 分别向下和向上。这已经存在。它只是你使用 ctrl+L 而不是 ctrl+K。小变化一样的效果

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-10T08:09:37.347

### 键盘映射：Mac OS X 10.5+

*   要开始/添加到您的离散多项选择：`CTRL`+`G`
*   跳过当前选择并移至下一个：`CMD`+`G`

参考： [IntelliJ 是否有 `Ctrl` + `K`、`Ctrl` + `D` Sublime 等价物？在 Android Studio 中使用 Alt+J 进行多项选择时如何跳过匹配项？](https://stackoverflow.com/questions/30049740/does-intellij-have-a-ctrl-k-ctrl-d-sublime-equivalent-how-do-i-skip)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-05T12:23:41.890

在 IntelliJ 中，如果光标在一个单词上并且您按下`Command`+ `G`，您将跳转到文件中该单词的下一个匹配项。同样，您按`Command`+ `Shift`+`G`您将跳转到文件中该单词的上一次出现

# python - TypeError：最多输入 1 个参数，得到 3 个

> ID：14856953
> 
> 赞同：3
> 
> 时间：2013-02-13T15:26:59.203
> 
> 标签：python

我正在用 Python 制作一个小型猜谜游戏，计算机猜测玩家选择的数字。当我尝试询问用户输入时出现错误：

```
answer = input("Is it", guess, "?") 
```

这条线抛出

> TypeError：最多输入 1 个参数，得到 3 个

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T15:28:22.300

`input`只接受*一个*参数，您正在传递它 3\. 您需要使用字符串格式或连接使其成为一个参数：

```
answer = input(f"Is it {guess} ?") 
```

您将此与函数混淆了，该`print()`函数确实需要多个参数，并将值连接到一个字符串中。

# php - 当他们问“你的典型堆栈是什么？”时，他们到底是什么意思？

> ID：14856957
> 
> 赞同：2
> 
> 时间：2013-02-13T15:27:02.470
> 
> 标签：php, objective-c, backend

我是一名学习计算机科学的学生。关于潜在的实习，一家公司刚刚给我发了一封电子邮件，询问“后端，你的典型堆栈是什么？”

我不确定如何回应……我对 Objective-C 和 Cocoa API 有很深的理解，但我认为那里询问我的 Web 开发经验。我对前端的 HTML 和 CSS 以及后端的 Python 和 PHP 有相当的了解。

有人可以解释一下我的潜在雇主的要求以及我应该如何回应吗？谢谢！

# accordion - 使用 Jquery 单击按钮后加载 Jquery Accordion

> ID：14856964
> 
> 赞同：1
> 
> 时间：2013-02-13T15:27:14.207
> 
> 标签：accordion, jquery-ui-accordion

我正在使用 JQuery UI Accordion，它适用于静态内容。但是，当我从 ajax 休息服务调用中加载手风琴的 H3 和 Div 标记时。数据正常出现，但手风琴没有加载

```
onSuccess: function (data) {
        var results = data.d.query.PrimaryQueryResult.RelevantResults.Table.Rows.results;
        var html = "";

        for (var i = 0; i < results.length; i++) {
            html += "<div><h3><a href=\"#\">";
            html += results[i].Cells.results[3].Value;
            html += "</a></h3><p>"
            html += results[i].Cells.results[6].Value;
            html += "</p></div>";
        }
$("#results_accordion").accordion(); 
```

我的 Accordion Div 最初是空的，我想在单击按钮时填写来自上述服务调用的数据。

```
$("#results_accordion").accordion(); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:33:39.473

这是我的实际点击事件，称为..

```
function onclic(queryTerms) {

Results = {
    element: '',
    url: '',

    init: function (element) {
        Results.element = element;
        Results.url = someurl;
    },

    load: function () {
        $.support.cors = true;
        $.ajax(
                {
                    url: Results.url,
                    method: "GET",
                    headers: {
                        "accept": "application/json;odata=verbose",
                    },
                    success: Results.onSuccess,
                    error: Results.onError
                }
            );
    },

    onSuccess: function (data) {
        var results = data.d.results;
        var html = "";

        for (var i = 0; i < results.length; i++) {
            html += "<div><h3><a href=\"#\">";
            html += results[i].Cells.results[3].Value;
            html += "</a></h3><p>"
            html += results[i].Cells.results[6].Value;
            html += "</p></div>";
        }

        Results.element.html(html);
        $("#results_accordion").accordion();
    },

    onError: function (err) {
        alert(JSON.stringify(err));
    }
}

Results.init($('#results_accordion'));
Results.load();
$("#results_accordion").accordion(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:29:30.837

```
$("#results_accordion").html(html).accordion(); 
```

在执行手风琴功能之前，您应该首先将 html 内容添加到您的页面

# android - setOrientationHint() 对 Gingerbread 没有任何作用，但适用于更高版本

> ID：14856968
> 
> 赞同：3
> 
> 时间：2013-02-13T15:27:27.190
> 
> 标签：android

我正在尝试录制视频`portrait orientation`。

将相机设置`DisplayOrientation`为 90 度会使视频预览以`portrait`.

但是，当`setOrientationHint()`使用任何给定号码（0,90,180,270）呼叫时，创建的视频始终以纵向创建。

当我在 Jellybean 和 ICS 上对其进行测试时，视频方向是我使用该`setOrientationHint()`方法设置的方向。

下面是`MediaRecorder`初始化代码：

```
private void initRecorder() {
    Camera camera = Camera.open();
    camera.setDisplayOrientation(90);
    camera.unlock();
    recorder.reset();
    recorder.setCamera(camera);
    recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
    recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
    file = new File("/sdcard/test.mp4");
    if (!file.exists()) {
        try {
            file.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    recorder.setOrientationHint(90);//doesn't seem to work on 2.3

    recorder.setOutputFile(file.getAbsolutePath());
    recorder.setMaxDuration(30000);
    recorder.setMaxFileSize(1000000);
} 
```

这就是我准备的地方`MediaRecorder`：

```
public void surfaceCreated(SurfaceHolder holder) {
    this.holder = holder;
        recorder.setPreviewDisplay(holder.getSurface());
    try {
        recorder.prepare();
    } catch (IllegalStateException e) {
        e.printStackTrace();
        finish();
    } catch (IOException e) {
        e.printStackTrace();
        finish();
    }
} 
```

**编辑：**

**测试：**

1.  三星 Galaxy S 运行安卓 2.2。

2.  运行安卓 2.3 的三星 Galaxy W。

3.  运行 ICS 的三星 Galaxy S2**工作**正常。

4.  运行 Jelly Bean 的三星 Galaxy s3 -**工作**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:02:25.773

`setOrientationHint()`之前需要调用`prepare()`。检查是否发生这种情况。

另请注意，此方法仅适用于`3gpp`和`mpeg4`格式，并且某些视频播放器选择完全忽略此属性。您正在使用的视频播放器可能会忽略它。

# c# - 从列表框项目到具有重复项目的文本框

> ID：14856973
> 
> 赞同：0
> 
> 时间：2013-02-13T15:27:37.667
> 
> 标签：c#, .net, c, visual-studio-2010, vb.net-2010

我有 1 个列表框、2 个按钮和 2 个文本框。当我按下按钮时，我的列表框显示 + 我的所有数据。

在列表框中，我有大约 30 个名字。里面有不同的名字。有些名字是一样的。

当我按下另一个按钮时，应该在一个文本框中（我已经完成）。显示我在列表中选择的名称。但！棘手的部分来了。

我想在最后一个文本框中有一个列表框中的名称，该列表框可以计算所有同名的名称。

如果我在列表中选择“彼得”并且彼得在该列表中出现 3-4 次。我怎样才能把它写出来让它显示3次？我的意思是 3 (int) 次。

这是代码：

```
 public Form1()
    {
        InitializeComponent();

    }

    private void button1_Click(object sender, EventArgs e)
    {

        _items.Add("Per Lindmark, 2012-05-01");
       // add more items
        _items.Add("Elin Ivarsson, 2012-05-13");

        listBox1.DataSource = _items;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        textBox1.Text = listBox1.SelectedItem.ToString();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:33:23.730

您可以遍历列表中的所有项目并比较名称：

```
int counter = 0;    
foreach (string item in listBox1.Items)
{
    if (item == name)
        counter++;
} 
```

当然，您必须正确地从列表中的项目中提取名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:30:32.047

这是一种解决方案。

```
var name = txtBox1.Text.Split(' ')[0];
if (string.IsNullOrEmpty(name))
{
     return;
}
var items = listBox1.DataSource as List<string>;
var count = items.Count(x => x.Split(' ')[0] == name);
textBox2.Text = count.ToString(); 
```

我希望我理解你的问题:)

# c# - PooledRedisClientManager 不释放连接

> ID：14856975
> 
> 赞同：4
> 
> 时间：2013-02-13T15:27:42.393
> 
> 标签：c#, redis, castle-windsor, servicestack

我将 json 数据列表存储在 redis 中，并使用 ServiceStack c# 客户端访问它。我本质上是在管理我自己的外键，我在其中存储一个`zrange`id，并使用我的应用程序内部的一个接口`zrange`从我的申请。

正如我预期的那样，我正在使用`PooledRedisClientManager`Redis 托管在与执行代码的服务器不同的服务器上。

我正在使用 MSOpenTech Redis 服务器在 Windows 8 上本地完成我的所有开发工作。目前我最大的挑战是客户端连接没有被关闭。

我的 Redis 持久化器被注入了一个`IRedisClientManager`（IoC 是 CastleWindsor）的实例。此代码在 azure worker 角色的上下文中执行。

这就是我从 zrange 中获取项目的方式：

```
public class MyRedisPersister<T> : IResourcePersister<T>
{ 
    IRedisClientManager _mgr;
    public MyRedisPersister(IRedisClientManager mgr)
    {
        _mgr = mgr;
    }

    public IResourceList<T> Get<T>(string key, int offset, int count) where T
    {
        using (var redis = _clientManager.GetClient())
        {
            var itemKeys = redis.GetRangeFromSortedSet(key, offset, offset + count - 1).ToList();
            var totalItems = redis.GetSortedSetCount(key);

            if (itemKeys.Count == 0)
            {
                return new ResourceList<T>
                    {
                        Items = new List<T>(),
                        Offset = 0,
                        PageSize = 0,
                        TotalItems = 0,
                        TotalPages = 0
                    };
            }
            else
            {
                return new ResourceList<T>
                    {
                        Items = itemKeys.Select(k => redis.Get<T>(k)).ToList(),
                        Offset = offset,
                        PageSize = count,
                        TotalItems = totalItems,
                        TotalPages = (int) Math.Ceiling((float) totalItems/count)
                    };
            }
        }
    }
} 
```

这是我用来注册的代码`IRedisClientManager`

```
var mgr = new PooledRedisClientManager(100, 10, "localhost:6379");
container.Register(Component.For<IRedisClientsManager>().Instance(mgr).LifeStyle.Singleton); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T19:04:03.210

**目前我最大的挑战是客户端连接没有被关闭。**

您正在使用“PooledRedisClientManager”，所以我的理解是不应关闭客户端连接，只需将其放入池中以供重用。看起来您的池大小是 100 个连接。

您可以尝试使用 `var mgr = new BasicRedisClientManager("localhost:6379")` which should dispose 客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:43:33.540

*编辑*不建议使用以下方法 - 您应该依赖 IRedisClientsManager 并将所有 redis 客户端调用包装在 using() 块中，否则您**将**被 gremlins 咬住。

我在让 Windsor 与 PooledRedisClientsManager 很好地配合时遇到了类似的问题，最后这似乎奏效了：

```
 container.Register(
            Component.For<IRedisClientsManager>()
                     .Instance(redisClients)
                     .LifestyleSingleton(),

            Component.For<IRedisClient>()
                     .UsingFactoryMethod(c => c.Resolve<IRedisClientsManager>().GetClient(),
                                        managedExternally: true));
    } 
```

managedExternally 参数告诉 Windsor 不要尝试将停用问题应用于 IRedisClients，并让 PooledRedisClientsManager 处理回收。

# oracle - 删除插播字符

> ID：14856980
> 
> 赞同：3
> 
> 时间：2013-02-13T15:27:53.363
> 
> 标签：oracle, varchar2

我正在寻找一些方法来删除 varchar2 中的 interpunction。这意味着我想从“Marián”中获得“Marian”，从“Černický”中获得“Cernicky”感谢您的任何帮助或建议 Ondrej

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:37:25.840

```
with x as (
  select 'Černický' name from dual union all
  select 'Marián' from dual
)
select convert(name, 'US7ASCII')  
  from x; 
```

将适用于在 US7ASCII 字符集中有问题字符的适当替换字符的任何名称。不一定每个可能的字符都是这种情况——例如，Õ 和 Ø 都将转换为问号 (?)。但这确实适用于您的两个示例。

# matlab - Ghostscript postscript pswrite 正在编码文本

> ID：14856981
> 
> 赞同：1
> 
> 时间：2013-02-13T15:27:53.310
> 
> 标签：matlab, ghostscript, postscript

为什么 Ghostscript pswrite 在其输出中对我的文本进行编码？考虑以下 MWE：

```
%!PS-Adobe-3.0 
%%Title: mwe.ps
%%Pages: 001
%%BoundingBox: 0 0 595 842
%%EndComments

%%Page: 1 1
%%PageBoundingBox: 0 0 595 842
0 0 1 setrgbcolor
0 0 595 842 rectfill
1 0 0 setrgbcolor
247 371 100 100 rectfill
/Times-Roman findfont
72 scalefont
setfont
newpath
247 300 moveto
(Chris) show
showpage 
```

将此 MWE 保存到文件并在 GSview 中查看将显示一个带有红色方块的蓝色页面，下面是我的名字。现在使用以下命令行通过 Ghostscript 9.06 运行此文件：

```
"c:\Program Files\gs\gs9.06\bin\gswin64c.exe" ^
  -dSAFER -dBATCH -dNOPAUSE ^
  -sDEVICE=pswrite -sPAPERSIZE=a4 -r72 -sOutputFile=mwe_gs.ps mwe.ps 
```

请参阅下面的 Ghostscript 输出。有人可以解释一下这里发生了什么。虽然两个 rectfill 命令仍然很明显，但我的文本 (Chris) 已被编码并且不再可区分。

请问有没有替代的后记设备可以保留我的文字？

```
<snip>
%%Page: 1 1
%%PageBoundingBox: 0 0 595 842
%%BeginPageSetup
GS_pswrite_2_0_1001 begin
595 842 /a4 setpagesize
/pagesave save store 197 dict begin
1 1 scale
%%EndPageSetup
gsave mark
255 0 r6
0 0 595 842 rf
255 0 r3
247 371 100 100 rf
Q q
0 0 595 0 0 842 ^ Y
255 0 r3
249 299 43 50 /5D
$C
,6CW56m1G"ZORNkWR*rB:!c2;9rlWTH="2^^[(q"h>cG<omZ2l^=qC[XbO:8_[?kji-8^"N#3q*
jhL~>
,
289 300 41 49 /0P
$C
4r?0p$m<EkK3,0>s8W-!s8W-!s8W,u]<1irI=*p=<t0>_@<)>Is8K6,aTi'$~>
,
325 300 30 33 /5I
$C
49S"pc4+Rhs8W-!s8W)oqdD:saRZq[4+k%):]~>
,
349 300 24 49 /0T
$C
4q%Ms%;PqCs8W-!s8W%1_qkn/K?*sYFSGd:5Q~>
,
377 299 23 34 /5M
$C
-TQR7$&O'!K+D:XribR9;$mr4#sqUi.T@,dX=Y&Llg+F`d^HC#%$"]~>
,
cleartomark end end pagesave restore
 showpage
%%PageTrailer
%%Trailer
%%Pages: 1
%%EOF 
```

注意：这可能看起来很奇怪，但我正在探索使用 Ghostscript 来“清理”来自 Matlab 应用程序的 postscript 输出的想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T08:34:08.580

“文本”已转换为*图像*，而不是矢量路径。这是 pswrite 设备的严重限制，也是不推荐使用的原因之一，您应该改用 ps2write 设备。仍然包含 pswrite 设备的唯一原因是 epswrite 使用它（这就是 pswrite 和 epswrite 输出看起来相同的原因）。在某个时候会有一个 eps2write 设备，并且 pswrite 将被分箱。

ps2write 输出默认是压缩的。如果您想要未压缩的输出，请在命令行上使用 -dCompressPages=false 开关。

如果您想要的只是文本的位置，您可以考虑使用 txtwrite 设备。默认实现会创建输入的纯文本表示，但您可以让它输出伪造的 XML，而不是包含文本来源等内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:30:55.017

下面是一个简单的示例，显示操作符被重新定义以显示有关节目的位置信息，同时执行标准的节目操作。使用 ghostscript，您可以运行多个文件，因此头文件将是另一个文件的前缀，这会改变标准行为。

重新定义的节目可能包括字体名称和大小。数据可能已写入磁盘文件，而不是转储到控制台。也可以重新定义任何其他运算符，例如 rectfill、fill、stroke... 因为原来的运算符也被调用，所以您可以使用 pdfwrite 设备将 .ps 转换为 .pdf，同时获取位置信息。

```
gswin32c.exe -dBATCH -dNOPAUSE  header.ps trash.ps
gswin32c.exe -sDEVICE=pdfwrite -dCompressPages=false -sOutputFile=test.pdf header.ps trash.ps 
```

输出

```
currentpoint  x:247.0 y:300.0  pathbbox 249.015,298.992 400.066,349.184   text:Chris  currentrgbcolor:1.0,0.0,0.0( )
currentpoint  x:50.0 y:90.0  pathbbox 50.8682,89.2852 181.327,139.184   text:Fred  currentrgbcolor:1.0,0.0,0.0( )
currentpoint  x:150.0 y:200.0  pathbbox 150.867,184.298 304.154,247.673   text:Mary  currentrgbcolor:1.0,0.0,0.0( )
currentpoint  x:300.0 y:350.0  pathbbox 300.867,348.993 598.79,398.681   text:Mr. Green  currentrgbcolor:0.0,1.0,0.0( )
currentpoint  x:100.0 y:400.0  pathbbox 100.866,399.202 358.547,449.183   text:Mr. Blue  currentrgbcolor:0.0,0.0,1.0( ) 
```

头文件.ps

```
/mydict 5 dict def
mydict begin
/show 
    {
    (currentpoint ) print 
    currentpoint exch 10 string cvs ( x:) print print  10 string cvs ( y:) print print
    gsave dup false charpath flattenpath 

    (  pathbbox ) print 
    pathbbox  
    4 -1 roll 10 string cvs print (,) print 
    3 -1 roll 10 string cvs print ( ) print 
    2 -1 roll 10 string cvs print (,) print 
    10 string cvs print ( ) print 
    grestore
    (  text:) 10 string cvs print   
    dup print ( ) print
    ( currentrgbcolor:) print 
    currentrgbcolor
    3 -1 roll 10 string cvs print (,) print
    2 -1 roll 10 string cvs print (,) print
    10 string cvs print ( ) ==
    systemdict /show get exec
} def 
```

垃圾.ps

```
%!PS-Adobe-3.0 
%%Title: mwe.ps
%%Pages: 001
%%BoundingBox: 0 0 595 842
%%EndComments
%%Page: 1 1
%%PageBoundingBox: 0 0 595 842
0 0 1 setrgbcolor
0 0 595 842 rectfill
1 0 0 setrgbcolor
247 371 100 100 rectfill
/Times-Roman findfont
72 scalefont
setfont
newpath
247 300 moveto (Chris) show
50 90 moveto (Fred) show
150 200 moveto (Mary) show
0 1 0 setrgbcolor
300 350 moveto (Mr. Green) show
0 0 1 setrgbcolor
100 400 moveto (Mr. Blue) show
showpage 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:48:38.620

文本已转换为矢量路径。249 299 43 50 /5D 开始第一个字母“C”，然后 289 300 是“h”，289 300 是“r”......

pswrite 所做的是消除了对字体的需求，因此当您的原始代码使用 /Times-Roman 时，蒸馏代码不需要任何字体，而是使用矢量绘制文本。

我不确定您到底在追求什么，但您可以尝试“ps2write”或“epswrite”作为“pswrite”的替代品。pswrite 用于写入 ps 级别 1 标准，而 ps2write 将写入 ps 级别 2 输出。没有人需要 ps 级别 1 了，所以级别 2 是可以接受的。epswrite 将写入封装后记 (eps)。

# magento - 将额外物品添加到购物车（观察者）

> ID：14856984
> 
> 赞同：2
> 
> 时间：2013-02-13T15:28:01.113
> 
> 标签：magento

我尝试在购物车中添加额外的产品。我为此创建了一个观察者。

```
<?php
class WP_Plugadapter_Model_Observer
{

    public function hookToControllerActionPostDispatch($observer)
    {
        if($observer->getEvent()->getControllerAction()->getFullActionName() == 'checkout_cart_add')
        {
            Mage::dispatchEvent("add_to_cart_after", array('request' => $observer->getControllerAction()->getRequest()));
        }
    }

    public function hookToAddToCartAfter($observer)
    {

        $request                = $observer->getEvent()->getRequest()->getParams();
        $_product               = Mage::getModel('catalog/product')->load($request['product']);
        $extra_functions        = $_product->getExtra_functions();

        if(!empty($extra_functions)){

            $extra_functions    = explode(',', $extra_functions);
            if(array_search('121', $extra_functions)){

                $cart           = Mage::getSingleton('checkout/cart'); 
                $cart->addProduct(10934, 1);
                $cart->save();

                if (!$cart->getQuote()->getHasError()){
                   Mage::log("Product ADD TO CART is added to cart.");
                }else{
                   Mage::log("BOEM");
                }

            }  

        }

    }

} 
```

当我检查我的系统日志时，我看到以下日志消息。*产品添加到购物车已添加到购物车。*

我不知道我做错了什么。当独立加载脚本时，它工作正常。例如：

```
<?php

include_once '../app/Mage.php';

Mage::app();
umask(0);

$session        = Mage::getSingleton('core/session', array('name'=>'frontend'));        
$cart           = Mage::getSingleton('checkout/cart'); 
$cart->addProduct(10934, 1);
$cart->save(); 
```

是否有可能在观察者中您可以以不同的方式进行操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T16:39:41.630

问题是购物车的报价对象没有保存到数据库中，稍后在请求处理中被会话中的报价对象覆盖。为什么不保存购物车报价非常令人困惑。报价模型的`save`方法期望内部属性`_hasDataChanges`设置为*true*。但是，即使产品已添加到报价单中，此属性仍保持为*false 。*

您可以通过使用以下方法将一些数据（任何属性都可以）添加到引用中来强制将该属性设置为*true*`setData`：

```
 $cart = Mage::getSingleton('checkout/cart'); 
                $cart->addProduct(10934, 1);
                //force _hasDataChanges to true
                $cart->getQuote()->setData('updated', true);
                $cart->save(); 
```

或者，您可以使用结帐会话报价对象将产品添加到购物车

```
 if(array_search('121', $extra_functions)){

            $cart           = Mage::getSingleton('checkout/cart'); 
            $qty = 1;
            $quote =  Mage::getSingleton('checkout/session')->getQuote()
                ->addProduct(
                    Mage::getModel('catalog/product')->load(10934),
                    $qty)
                ->save();
            $cart->save();

            if (!$cart->getQuote()->getHasError()){
               Mage::log("Product ADD TO CART is added to cart.");
            }else{
               Mage::log("BOEM");
            }

        } 
```

# c# - 等待/异步还是 SocketAsyncEventArgs？

> ID：14856990
> 
> 赞同：2
> 
> 时间：2013-02-13T15:28:26.467
> 
> 标签：c#, asynchronous

所以我已经用`SocketAsyncEventArgs`socket.***Async 方法编写了一个 tcp-server。但我确实喜欢使用and方法`await/async`编写代码的方式。`Stream.ReadAsync``Stream.WriteAsync`

在性能/内存方面有什么不同，还是我只是在语法上有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:46:46.370

使用 socketasynceventargs 的优点是减少垃圾收集器的压力，并将套接字的缓冲区分组以防止内存不足异常。

通过使用 SocketAsyncEventArgs 池，您无需为每次读取和写入调用创建和收集 IAsyncResult。

其次，可以为每个 SocketAsyncEventArgs 分配一个大字节 [] 块的一部分。这可以防止内存碎片，从而有助于减少内存占用。虽然这在技术上也可以通过 Begin/End 调用来完成，但更容易为每个 SocketAsyncEventArgs 永久分配其自己的缓冲区，而不是每次使用 Begin/End 方法调用读取或写入时分配一个块。

最后一个可能很重要的区别是，根据 MSDN 库，当套接字缓冲区已满时，Begin/End Send 方法可能会阻塞。SocketAsyncEventArgs 不会阻塞，而是根据套接字缓冲区中的空间量仅写入一定数量的字节，回调将指定写入的字节数。

除非是边缘情况，否则优势实际上并不明显。除非您遇到指定的任何一个问题，否则我建议您选择最适合您且可维护的问题。

# bash - 使用 awk 将 cli 命令的结果输出到文件以获取列

> ID：14856995
> 
> 赞同：0
> 
> 时间：2013-02-13T15:28:39.130
> 
> 标签：bash, awk, sh

我想记录某个点的RSSI，该点与路由器的距离。距离将是用户输入，输出文件名也是如此，因此用户将键入如下内容：

```
sh rssi.sh output.csv 20 
```

其中 output.csv 是我要将结果附加到的 csv，20 是距离

目前 rssi.sh 看起来像：

```
#!/bin/bash

RSSI_CSV=$1
DISTANCE=$2
RSSI=$(iwconfig wlan0 | awk -F'[ =]+' '/Signal level/ {print $7}\')

awk '{print $DISTANCE, $RSSI}' > $RSSI_CSV 
```

这会根据用户输入创建 RSSI_CSV，但不会在其中打印所需的值，我不知道为什么。

我想它是

```
awk '{print $DISTANCE, $RSSI}' > $RSSI_CSV 
```

不能作为 echo RSSI 或 echo DISTANCE 都将值输出到屏幕。我正在使用 awk 因为我想要列所以我可以输出一个 csv 文件，也许有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:32:09.727

您`awk`需要使用该`-v`选项传递变量并使用该`BEGIN`块，因为没有给出输入，因此存在一些问题。另请注意，单个`>`不会附加**但**会覆盖文件。对于附加，您需要`>>`：

```
awk -vD=$DISTANCE -vR=$RSSI 'BEGIN{print D,R}' >> $RSSI_CSV 
```

演示：

```
$ DISTANCE=20

$ RSSI=$(iwconfig wlan0 | awk -F'[ =]+' '/Signal level/ {print $7}')

$ awk -vD=$DISTANCE -vR=$RSSI 'BEGIN{print D,R}' 
20 -47 
```

注意：我相信你想要逗号分隔的值，所以：

```
$ awk -vD=$DISTANCE -vR=$RSSI 'BEGIN{print D","R}' 
20,-47 
```

但是`awk`对于打印变量来说是过大的，只是使用旧的`echo`：

```
$ echo "$DISTANCE,$RSSI"
20,-47 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:45:49.120

您不需要`awk`打印两个 shell 变量。

```
printf "%s,%s\n" "$DISTANCE" "$RSSI" >> "$RSSI_CSV" 
```

# php - Foreach 循环未按预期传递所有值

> ID：14856997
> 
> 赞同：2
> 
> 时间：2013-02-13T15:28:42.083
> 
> 标签：php

我正在尝试遍历一个由从文本文件收集的 IP 地址组成的数组。这样做的最终目标是检索每个 IP 的主机名。我的问题是我只能从阵列中的最后一个 IP 获得结果。我想这会很简单，但我显然错过了一些东西。

```
<?php
$thefile = 'myfile';
$arr = file($thefile.".txt");

foreach ($arr as $data) {
echo $hostname = gethostbyaddr($data);" <br>";
?> 
```

文本文件包含几个我知道有关联名称的 IP，但我得到了

“警告：gethostbyaddr() [function.gethostbyaddr]: Address is not a valid IPv4 or IPv6 address in...”
除了最后一个实例之外的每个实例，它返回正确的结果。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:31:39.643

```
<?php

$thefile = 'myfile';
$arr = file($thefile . '.txt',FILE_SKIP_EMPTY_LINES);

foreach ($arr as $data) 
{
    $hostname = gethostbyaddr(trim($data));
    echo $hostname . "<br>";
}

?> 
```

您可能有换行符或一些空格，因此在传递给函数之前使用[trim()删除它们。](http://us3.php.net/manual/en/function.trim.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:35:05.883

假设您的输入文件很好，看起来像这样：

```
 100.100.100.100
    100.100.100.101
    100.100.100.102 
```

根据 PHP 手册`file`：“返回数组中的文件。数组的每个元素对应于文件中**的一行，换行符仍然附加**。”

你需要去掉那些换行符，使用[`trim`](http://php.net/manual/en/function.trim.php)应该可以解决问题。