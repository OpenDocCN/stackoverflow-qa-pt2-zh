# StackOverflow 问答 13236000-13236999

# c# - 使用时强制文件夹重命名

> ID：13236000
> 
> 赞同：2
> 
> 时间：2012-11-05T16:14:32.857
> 
> 标签：c#

我有一个在网络服务器上运行的服务，该服务等待将 zip 放入文件夹中，将其解压缩，然后将其移动到某个目录。由于我们要替换有问题的目录，它重命名现有文件夹（非常大的文件夹，需要几分钟才能删除），然后将提取的文件移动到其位置，然后删除旧文件夹。问题是：当它尝试重命名现有文件夹时，它会得到“拒绝访问路径 '<>'。”，我相信是因为该文件夹一直被 web 服务使用。有没有办法强制文件夹重命名，或者控制并等待它不被使用？或者还有其他方法可以实现这个目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:35:33.640

当任何进程拥有文件夹的底层操作系统句柄时，您不能“强制”重命名（如果您能够这样做，那将是可怕的）。

你可以：

*   为 web 服务实现暂停/恢复功能，以便它可以被告知暂停其工作并释放句柄，然后在完成后恢复。或者
*   完全停止网络服务，做你的工作，然后启动网络服务

# php - CodeIgniter Active Record 返回 Mysql 数据类型而不仅仅是字符串

> ID：13236002
> 
> 赞同：3
> 
> 时间：2012-11-05T16:14:32.463
> 
> 标签：php, mysql, codeigniter, types, sqldatatypes

我正在使用 codeIgniter 2.0.3 版。我想知道是否有一种简单的方法可以返回具有正确数据类型的数据。例如对于架构：

```
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| term  | varchar(255) | NO   |     | NULL    |                |
| level | int(11)      | NO   |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+ 
```

活动记录`result_array`返回：

```
array(4) {
  [0]=>
  array(3) {
    ["id"]=>
    string(1) "1"
    ["term"]=>
    string(11) "Mesoamerica"
    ["level"]=>
    string(1) "1"
  }
  [1]=>
  array(3) {
    ["id"]=>
    string(1) "2"
    ["term"]=>
    string(6) "Mexico"
    ["level"]=>
    string(1) "1"
  }
  [2]=>
  array(3) {
    ["id"]=>
    string(1) "3"
    ["term"]=>
    string(10) "indigenous"
    ["level"]=>
    string(1) "2"
  }
  [3]=>
  array(3) {
    ["id"]=>
    string(1) "4"
    ["term"]=>
    string(5) "ruins"
    ["level"]=>
    string(1) "2"
  }
} 
```

这个想法是让类型通过结果集。 `ID`应该是`INTEGER`，`level`应该是`INTEGER`。我通常只是对需要使用的数据进行类型转换。我在文档中没有看到任何将其推送到 codeIgniter 的方法，但我希望有一种简单的方法可以做到这一点。我已经看到了在 PDO 中执行此操作的方法，但 codeIgniter 是否为我提供了某种便利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T20:37:52.350

**这是我做的一个助手：**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/**
 * cast_fields
 *
 * Casts string values provided from database into
 * the appropriate datatype of possible.
 */
if ( ! function_exists('cast_fields'))
{
    function cast_fields($fields, $results)
    {
        for($i=0; $i<count($fields); $i++) {
            $name = $fields[ $i ]->name;
            $type = $fields[ $i ]->type;
            $int_types = array(
                'int',
                'tinyint',
                'smallint',
                'mediumint',
                'bigint'
            );
            if(in_array($type, $int_types)) {
                for($j=0; $j<count($results); $j++) {
                    $casted = intval( $results[ $j ]->{ $name } );
                    $results[ $j ]->{ $name } = $casted;
                }
            }
        }
        return $results;
    }

}

/* End of file field_data_helper.php */
/* Location: ./application/helpers/field_data_helper.php */ 
```

到目前为止，它仅适用于整数。您可以对其进行扩展以支持其他数据类型。

**如何使用它：**

```
// Get rows from database.
$query = $this->db->get_where( $this->table, $criteria, $limit, $offset );
$results = $query->result();

// Cast data to the correct datatypes.
$fields = $this->db->field_data( $this->table );
$this->load->helper('field_data_helper');
$results = cast_fields($fields, $results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T06:14:30.920

我采取了这种不幸的方法：我只是更改了`/system/database/DB_Result.php`文件

`Line 85`in 方法`custom_result_object`如下所示：

```
$object->$key = $value; 
```

将其更改为：

```
if(is_numeric($value)) $object->$key = (int)$value;
else $object->$key = $value; 
```

然后将此方法添加到任何地方：

```
/**
* Scans a rowset to cast valid ints as integers instead of strings
*/
private function recast($row)
{
    foreach($row as $key => $value)
    {
        if(is_object($row)) {
            if(is_numeric($value)) $row->{$key} = (int)$value;
        } else {
            if(is_numeric($value)) $row[$key] = (int)$value;
        }

    }

    return $row;
} 
```

然后在`result_object()`找到

```
$this->result_object[] = $row; 
```

在该行之上，添加

```
$row = $this->recast($row); 
```

然后在`result_array()`找到

```
$this->result_array[] = $row; 
```

在该行之上，添加

```
$row = $this->recast($row); 
```

然后在 中`custom_row_object()`，找到

```
$this->current_row = $n; 
```

在该行之上，添加

```
$n = $this->recast($n); 
```

然后在 中`row_object()`，找到

```
$this->current_row = $n; 
```

在该行之上，添加

```
$n = $this->recast($n); 
```

然后在 中`row_array()`，找到

```
$this->current_row = $n; 
```

在该行之上，添加

```
$n = $this->recast($n); 
```

当然，recast 函数可以根据您的解析需求进行修改和更新，现在它只是在需要的地方转换整数，而不使用正则表达式。这种方法让日期时间戳保持不变，但是任何应该是数值的东西都会被解析。还可以对浮点数等进行一些额外的检查。

我只需要为 API 函数执行此操作，因为 json_encode 将我所有的整数转换为硬字符串，`id:"1"`而不是整数`id:1`，并且需要一个能够反映整个站点的解决方案。

# ruby-on-rails - Rails：为循环的每个循环打印图像？

> ID：13236003
> 
> 赞同：0
> 
> 时间：2012-11-05T16:14:47.853
> 
> 标签：ruby-on-rails

嗨，我正在制作一个烹饪食谱应用程序，食谱有“评级”（一个整数）。我想让它为每 1 个评分点打印一个星（如果评分 = 4，则打印出 4 个星）。但是，我的循环没有打印出任何东西。任何人都可以帮助我应该如何循环它吗？

```
<div>
    <h4>Rating:</h4>
    <%= @recipe.rating.times{ |i| image_tag("star.jpg") } %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:18:51.870

循环的`=`前面不会按您期望的方式工作。像这样使用它：

```
<div>
    <h4>Rating:</h4>
    <% @recipe.rating.times do |i| %>
        <%= image_tag(locationofstarpic) %>
    <% end %>
</div> 
```

您也可以直接从内联块打印到响应，但不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:18:54.690

声明的结果

```
5.times { "foo" } 
```

是 5，而不是块内的任何东西。所以你需要的是：

```
<% @recipe.rating.times do |i| %>
  <%= image_tag(locationofstarpic) %>
<% end %> 
```

# r - 使用 R 中 randomForest 包中的 rfimpute 出现内存错误

> ID：13236005
> 
> 赞同：2
> 
> 时间：2012-11-05T16:14:52.780
> 
> 标签：r, out-of-memory, random-forest

我想尝试在我目前正在处理的数据集中填写我的缺失值。数据有 13300 个观测值和 9 个特征。我想运行一个随机森林，所以我尝试使用 rfimpute 来填充这些缺失值。我收到以下错误：无法分配大小为 678.4 Mb 的向量。我在具有 8 gb 内存的 Windows 机器上运行它。这是我做的电话：

```
datos.imputados <- rfImpute(vo~P4.Plan.Esp+P11.Comprador+SegmentoDisipado+PersMcKinsey+Kids+IndefDulceSal+lugarcons+Compania,data=datos,ntrees=300,iter=6) 
```

这里发生了什么？670 mbs 听起来并不多...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-16T19:42:03.020

我在具有 16GB RAM 和超线程四核的 MacMini 上使用 rfImpute 时遇到了同样的问题。对于您的日常数据分析问题，没有什么是它无法处理的。问题是 rfImpute 通过生成邻近矩阵来工作。邻近矩阵为 N x N，这对于您的应用程序意味着 rfImpute 创建一个具有 13300^2 个条目的背景对象。就我而言，它是 93000^2。

您可以做的一件事是将数据分成 K 个不同的段并将 rfImpute 应用于每个切片，然后手动重新组合：

```
slices <- 8 
idx <- rep(1:slices, each = ceiling(nrow(X)/slices))
idx <- idx[1:nrow(X)]

imputedData <- do.call('rbind', lapply(1:slices, function(SLICE){
    print(SLICE)
    require(randomForest)
    rfImpute(X[idx == slice, ], Y[idx == slice])
  })) 
```

您可以使用 parLapply 将其并行化，如下所示：

```
slices <- 8 
idx <- rep(1:slices, each = ceiling(nrow(X)/slices))
idx <- idx[1:nrow(X)]

cl <- makeCluster(8)
clusterExport(cl, c('idx', 'slices', 'X', 'Y'))
  imputedData <- do.call('rbind', parLapply(cl, 1:slices, function(SLICE){
    require(randomForest)
    rfImpute(X[idx == SLICE, ], Y[idx == SLICE])
  }))
stopCluster(cl) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T07:48:28.773

我有同样的问题。如 Roland 评论中所述，您需要额外的 700 MB 内存，而您在此阶段可能没有。

你可以尝试释放你的记忆，或者寻找一种不太复杂的方法来估算。就像`impute`这里描述的那样[https://stackoverflow.com/a/13114887/55070](https://stackoverflow.com/a/13114887/55070)。

# php - 动态where子句mysql php

> ID：13236007
> 
> 赞同：0
> 
> 时间：2012-11-05T16:14:58.763
> 
> 标签：php, mysql, dynamic-sql

我在这里有一个问题.. 我有 1 个动态表.. 我想问 ua 问题，是否可以根据我的动态表创建 where 子句.. 让我解释一下..

这是我的桌子

表属性

```
_____________________
idAttribute | Name
_____________________
1           | Width
2           | Diameter
3           | AR
etc 
```

是否可以仅基于该 table.Name 值创建自动/动态 where 子句

```
width = ? AND Diameter = ? AND AR = ? AND etc 
```

有什么建议吗？

让我再解释一下。。

假设我有一个包含我的条件的变量 $query...

```
$query = "SELECT * FROM xxx WHERE ".$where; 
```

不..在我的 $where 变量中，如果我正常编写，根据我上面的表格，它将是..

```
$where = "width = ? AND diameter = ? AND AR = ?"; 
```

我的问题是如何根据我上面的表格创建 $where 动态，所以如果我上面的表格是

```
idAttribute | Name
__________________
1           | Width
2           | Diameter
3           | AR
4           | Weight 
```

会自动变成这样

```
$where = "width = ? AND diameter = ? AND AR = ? AND weight = ?"; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:45:16.283

由于您没有提供很多详细信息，因此不清楚您在问什么。我根据您详述的一张表做了一些假设。如果您要查询基于该`name`值的数据，您可以使用以下内容：

```
select i.name i_name,
  a.name a_name,
  ia.value
from item i
left join item_attribute ia
  on i.itemid = ia.itemid
left join attribute a
  on ia.idattribute = a.idattribute
where a.name = 'Width'
  and ia.value = 100 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/889df/7)

但是通过首先将数据转换为列然后搜索来查询数据可能更容易，类似于以下内容：

```
select *
from
(
  select i.name i_name,
    sum(case when a.name = 'Width' then ia.value end) width,
    sum(case when a.name = 'Diameter' then ia.value end) diameter,
    sum(case when a.name = 'AR' then ia.value end) ar,
    sum(case when a.name = 'Weight' then ia.value end) weight
  from item i
  left join item_attribute ia
    on i.itemid = ia.itemid
  left join attribute a
    on ia.idattribute = a.idattribute
  group by i.name
) src
where width = 100 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/889df/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:45:26.377

完全在 SQL 中执行聚合：

```
$qry = $dbh->execute('
  SELECT GROUP_CONCAT(
    "`", REPLACE(Name, "`", "``"), "` = ?"
    ORDER BY ...
    SEPARATOR " AND "
  ) FROM Attribute
');
$where = $qry->fetchColumn(); 
```

或者部分 SQL，部分 PHP：

```
$qry = $dbh->execute('
  SELECT   CONCAT("`", REPLACE(Name, "`", "``",), "` = ?")
  FROM     Attribute
  ORDER BY ...
');
$where = implode(' AND ', $qry->fetchAll(PDO::FETCH_COLUMN, 0)); 
```

或者完全在 PHP 中：

```
mb_regex_encoding($charset); // charset of database connection

function foo($n) {return '`'.mb_ereg_replace('`','``',$n).'` = ?';}
$qry = $dbh->execute('SELECT Name FROM Attribute ORDER BY ...');
$where = implode(' AND ', array_map('foo', $qry->fetchAll(PDO::FETCH_COLUMN, 0))); 
```

请注意，您可能希望对获取列的顺序进行排序（如上所示），以便您知道应向出现的语句提供参数的顺序；或者使用命名参数而不是匿名占位符。

# javascript - java脚本 - 无法从谷歌地图标记信息窗口中的信息窗口向函数发送参数

> ID：13236009
> 
> 赞同：0
> 
> 时间：2012-11-05T16:15:03.063
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我在地图上显示了一些标记。单击时，会出现一个信息窗口。此窗口包含 2 个按钮，每个按钮发送 ajax 请求。问题是当我向按钮 onClick 事件发送任何东西（下面的标记参数除外）时，它不起作用。我在 HTML 页面的第一行而不是脚本文件的第一行收到错误“adminmap.html:1 Uncaught SyntaxError: Unexpected token ILLEGAL”。

```
function handleButtonApprove(id) {
    //error happens here when I send any parameter except marker8(defined below)
    //console.log(id);
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: VERIFY_OBSTACLES_URL,
            //data: { markerID:sentID , approved:0 },
            success: function (data) {
                alert(data);
            }
        });
    });
}

function handleButtonReject() {
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: VERIFY_OBSTACLES_URL,
            //data: { markerID:marker.id , approved:0 },
            success: function (data) {
                alert(data);
            }
        });
    });
}

function attachInfo(marker8, num) {
    //var markerID = marker.get("id");
    //console.log(markerID);
    var infowindow = new google.maps.InfoWindow({
        //Here is the error , if I sent num.toString, num or any string , it does not work. If send marker8.getPosition() for example it works. May I know the reason ?
        content: '<div id="info_content">Matab Info</div> <button onclick="handleButtonApprove(' + num.toString() + ')">Verify</button> </br> <button onclick="handleButtonReject()">Remove</button>'
    });
    google.maps.event.addListener(marker8, 'click', function () {
        infowindow.open(marker8.get('map'), marker8);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:16:49.317

当您想提供一个（非数字）字符串作为 handleButtonApprove() 的参数时，您必须用引号将字符串括起来：

```
content: '<div id="info_content">Matab Info</div> \
          <button onclick="handleButtonApprove(\'' + num.toString() + '\')">\
             Verify</button>\
          </br> <button onclick="handleButtonReject()">Remove</button>' 
```

但这不是问题，因为当您不使用引号时，错误应该是未定义的变量而不是语法错误。究竟是`num`什么？

# gdb - mplayer mingw 64 位信号 11

> ID：13236014
> 
> 赞同：2
> 
> 时间：2012-11-05T16:15:40.217
> 
> 标签：gdb, segmentation-fault, mplayer

我很难生成可执行文件。我得到这个错误运行

> MPlayer 被模块中的信号 11 中断：demux_open
> 
> *   MPlayer 因 CPU/FPU/RAM 使用不当而崩溃。使用 --enable-debug 重新编译 MPlayer 并进行“gdb”回溯和反汇编。DOCS/HTML/en/bugreports_what.html#bugreports_crash 中的详细信息。
> *   MPlayer 崩溃了。这不应该发生。它可能是 MPlayer 代码*或*驱动程序*或*gcc 版本中的错误。如果您认为是 MPlayer 的错，请阅读 DOCS/HTML/en/bugreports.html 并按照那里的说明进行操作。除非您在报告可能的错误时提供此信息，否则我们不能也不会提供帮助。

与 gdb

我不明白为什么那条路，它不是我的mingw。

> 程序收到信号 SIGSEGV，分段错误。
> 
> __gdtoa 中的 0x0000000001060853 (fpi=, be=, bits=0x0, kindp=0x800, mode=0, ndigits=0, decpt=0x0, rve=0x0) 在 c:/crossdev/src/mingw-w64-svn/mingw- w64-crt/gdtoa/gdtoa.c:630
> 
> 630 **c:/crossdev/src/mingw-w64-svn/mingw-w64-crt/gdtoa/gdtoa.c**：没有这样的文件或目录。

带有新快照

> 检测到 libavformat 版本 54.35.100（内部）MPEG-PS 文件格式。视频：MPEG2 720x576 (aspect 3) 25.000 fps 9800.0 kbps (1225.0 kbyte/s) 在 ../ [VO_SDL] 中加载字幕 使用驱动程序：windib。==================================================== ======================== 打开视频解码器：[ffmpeg] FFmpeg 的 libavcodec 编解码器系列 libavcodec 版本 54.71.100（内部）[mpeg2video @ 00000000016D96C0]警告：未使用线程支持编译，使用线程仿真
> 
> # 选择的视频编解码器：[ffmpeg2] vfm：ffmpeg (FFmpeg MPEG-2)
> 
> ==================================================== ======================== 打开音频解码器：[ffmpeg] FFmpeg/libavcodec 音频解码器 [ac3 @ 00000000016D96C0]警告：未编译线程支持，使用线程仿真
> 
> 程序收到信号 SIGSEGV，分段错误。
> 
> decode_frame () 中的 0x00000000009d4fee

# ios - 在不登录的情况下请求 Facebook 访问令牌？

> ID：13236015
> 
> 赞同：1
> 
> 时间：2012-11-05T16:15:39.873
> 
> 标签：ios, access-token, facebook-ios-sdk

我想使用 FacebookSDK 3.1.1 从公司的 Facebook 页面下载事件信息以呈现在 UITableView 中。只要用户登录到他/她的 Facebook 帐户，它就可以正常工作。

如果我从开发人员 Facebook 手动请求访问令牌并将其与 Facebook URL 请求一起发送，它也可以正常工作。

我可以在不登录的情况下从 iPhone 中请求访问令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:27:26.443

我发现 facebook 开发人员页面有点难以浏览。无论如何，这是答案：http: [//developers.facebook.com/docs/concepts/login/access-tokens-and-types/](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

# android - 在 Android 中将 24 小时转换为 12 小时

> ID：13236016
> 
> 赞同：1
> 
> 时间：2012-11-05T16:15:43.307
> 
> 标签：android

您好，我想在 Android 中将 24 小时转换为 12 小时。时间来自时间选择器对话框中的用户输入，然后将其显示在文本视图中。如果用户单击选择器对话框中的 PM 按钮，它应该会自动在文本视图中显示该按钮。例如，用户点击 3:00 AM，它应该在 textview 中显示为 3:00 AM，而另一个用户点击 3:00 PM，它应该在 textview 中显示为 3:00 PM 而不是 15:00。请问有什么帮助吗？

请检查我下面的代码：

```
 public void onTimeSet( TimePicker view, int selectedHour,
                int selectedMinute ) {
            // Gets current time
            Calendar c = Calendar.getInstance();

            hour = selectedHour;
            minute = selectedMinute;

            // set waking time into textview

           String getWT = wakingtime.getText().toString();
           wakingtime.setText( new StringBuilder().append( pad( hour ))
                    .append( ":" ).append( pad( minute ))); 

            // Assign hour set in the picker
            c.set( Calendar.HOUR, selectedHour );
            c.set( Calendar.MINUTE, selectedMinute );

            // Have Calendar calculate the substraction of hours and minutes
            c.add( Calendar.HOUR, SUB_HOUR );
            c.add( Calendar.MINUTE, SUB_MINUTE );

            // Get the hour and the minute calculated
            hour = c.get( Calendar.HOUR );
            minute = c.get( Calendar.MINUTE ); 
```

如果您没有看到任何格式，请原谅..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T16:52:33.203

改变这个：

```
 wakingtime.setText( new StringBuilder().append( pad( hour ))
                        .append( ":" ).append( pad( minute ))); 
```

这样：

```
StringBuilder sb = new StringBuilder();
if(hour>=12){                      
    sb.append(hour-12).append( ":" ).append(minute).append(" PM");
}else{
    sb.append(hour).append( ":" ).append(minute).append(" AM");
}
wakingtime.setText(sb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:46:08.423

您可以使用

```
String s;
if(hour>=12){                      
     s=String.formate((hour-12)+":"+minute+"PM");
 }else{
      s=String.formate(hour+":"+minute+"AM");
 }

 txtview.setText(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T14:53:39.233

```
 scheduleTime.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Calendar mcurrentTime = Calendar.getInstance();
            int hour = mcurrentTime.get(Calendar.HOUR_OF_DAY);
            int minute = mcurrentTime.get(Calendar.MINUTE);
            TimePickerDialog mTimePicker;
            mTimePicker = new TimePickerDialog(activity, new TimePickerDialog.OnTimeSetListener() {
                @Override
                public void onTimeSet(TimePicker timePicker, int selectedHour, int selectedMinute) {

                    String choosedHour = "";
                    String choosedMinute = "";
                    String choosedTimeZone = "";
                    if(selectedHour > 12){
                        choosedTimeZone = "PM";
                       selectedHour = selectedHour - 12;
                        if(selectedHour < 10){
                            choosedHour = "0"+selectedHour;
                        }else{
                            choosedHour = ""+selectedHour;
                        }
                    }else{
                        choosedTimeZone = "AM";
                        if(selectedHour < 10){
                            choosedHour = "0"+selectedHour;
                        }else{
                            choosedHour = ""+selectedHour;
                        }
                    }

                    if(selectedMinute < 10){
                        choosedMinute = "0"+selectedMinute;
                    }else{
                        choosedMinute= ""+selectedMinute;
                    }

                    scheduleTime.setText(choosedHour + ":" + choosedMinute +" "+choosedTimeZone);
                    //scheduleTime.setText(selectedHour + ":" + selectedMinute);
                    //scheduleTime.setText( strHrsToShow+":"+datetime.get(Calendar.MINUTE)+" "+am_pm );
                }
            }, hour, minute+30, false);//Yes 24 hour time
            mTimePicker.setTitle("Select Time");
            mTimePicker.show();
        }
    }); 
```

我用这个逻辑来解决我的问题。

# java - 将复合对象呈现为 HTML 的 Java/JSP 库？

> ID：13236023
> 
> 赞同：0
> 
> 时间：2012-11-05T16:15:58.627
> 
> 标签：java, jsp, jstl

是否存在将传入对象的内容呈现为 HTML 内容的现有开源 Java 或 JSTL 标记库？我正在考虑这样的对象：

```
Object Cat {
    String name;
    Integer age;
    String color;
    Coat coat;  // Enum: LONG/MEDIUM/SHORT
} 
```

理想情况下，您可以传入一个 Cat 对象并取回该对象内容的 HTML 表示形式，也许可以使用可点击的链接来展开/折叠内容：

```
<H1>Object Type: Cat </H1>
<ul>
    <li><span>name</span><span>"Fluffy"</span></li>
    <li><span>age</span><span> 9</span></li>
    <li><span>color</span><span> "Tabby"</span></li>
    <li><span>coat</span><span> LONG</span></li>
</ul> 
```

似乎有人可能已经写了一些东西。我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:33:44.177

你可以试试[Xstream](http://xstream.codehaus.org/tutorial.html)库。它将您的 java 代码转换为 xml。使用 XSLT，您可以将您的 xml 转换为 html 格式（使用 xslt 的简单 xml 转换[在这里](http://xstream.codehaus.org/manual-tweaking-output.html)- XML 转换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:22:30.230

当重新发明轮子比去商店买一个更容易时，为什么不呢？这是一个简化的 JSP（假设您已经`Cat`在变量中包含了您的 JSP `cat`）：

```
<H1>Object Type: Cat </H1>
<ul>
    <li><span>name</span><span>"<%=cat.name%>"</span></li>
    <li><span>age</span><span> <%=cat.age%></span></li>
    <li><span>color</span><span> "<%=cat.color%>"</span></li>
    <li><span>coat</span><span> <%=cat.coat%></span></li>
</ul> 
```

如果您想为任何对象生成它，请使用反射来遍历您的属性并动态获取它们以及对象类型。

# android - 为我的布局设置 ScrollView

> ID：13236025
> 
> 赞同：0
> 
> 时间：2012-11-05T16:16:04.603
> 
> 标签：android, listview, scrollview

在我的布局中，我想为 ListView 和 imageView 设置滚动视图。我尝试如下所示。但它没有用。如果我删除 Scrollview，那么我可以滚动 Listview。Listview 中的 Items 是通过从 Internet 下载的代码添加的。

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/firstImage"
            android:layout_width="fill_parent"
            android:layout_height="200dip"
            android:layout_margin="4dp"
            android:scaleType="fitXY" />

        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="4dip"
            android:layout_weight="1"
            android:background="#ffffff" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:28:15.767

您不需要滚动视图。在任何情况下，都不建议在 Android UI 中使用嵌套滚动。

只需将 ImageView 与 ListView 一起使用，并将 Listview 的权重设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:38:15.260

listview 是可滚动的，所以你不需要使用 scrollview

# c# - 碰撞，位置被重置

> ID：13236027
> 
> 赞同：1
> 
> 时间：2012-11-05T16:16:11.950
> 
> 标签：c#, xna, collision

我的碰撞有点问题，在终于弄清楚如何让它碰撞之后，我只能让 pacman 重置到一个设定的位置，不知道如何让他留在他应该呆的地方。

```
 player.update();

        for (int y = 0; y < NrOfTilesY; y++)
        {
            for (int x = 0; x < NrOfTilesX; x++)
            {

                if (tileArray[x, y] is Nest)
                {
                    Rectangle rectW = tileArray[x, y].Bounds();
                    Rectangle rectP = Player.pacmanBounds;
                    if(rectW.Intersects(rectP))
                    {
                        Player.pacmanBounds.X = 32;
                        Player.pacmanBounds.Y = 32;
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:18:40.123

在移动播放器之前，复制其位置。

如果它在您移动后发生碰撞，请将其重新放置到最后一个位置。

另外，我认为值得注意的是，您不需要测试棋盘上的每个图块，而只需要测试玩家周围的图块。玩家的位置应该让您知道它在哪个图块上，并且应该很容易找到与该图块相邻的图块。

# memcached - 如何在多个服务器之间使用 memchached 方法分配缓存？

> ID：13236030
> 
> 赞同：1
> 
> 时间：2012-11-05T16:16:20.420
> 
> 标签：memcached, enyim, enyim.caching

我正在尝试跨多个服务器分配缓存。我已经在 2 个 Linux 服务器上安装了 Memcached。我正在使用 .Net 客户端库来操作这些服务器上的缓存。

它总是在配置的第一台服务器上存储价值。我试图改变服务器的顺序，它只存储在列表中的第一个。

我使用 Putty 检查服务器上是否存在对象。

问题是：

如何同时在两台服务器上存储对象？

如果我想验证该对象是否存储在配置文件中的所有服务器上

我如何从客户端库中做到这一点？

这是我的代码示例：

```
static void Main(string[] args)
{ 
     var mc = new MemcachedClient();
     mc.FlushAll();
     mc.Store(StoreMode.Add, "key1", "some information");            
     Console.WriteLine(mc.Get("key1"));
} 
```

和配置

```
<enyim.com>
    <memcached>
      <servers>
        <add address="20.23.24.105" port="11211"/>
        <add address="20.23.24.106" port="11211"/>
      </servers>
      <socketPool minPoolSize="10" maxPoolSize="100" connectionTimeout="00:10:00" deadTimeout="00:02:00"/>
    </memcached>
  </enyim.com> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:53:59.720

我不认为使用 .NET 客户端可以做到这一点，因为这不是 Memcached 应该如何工作的。在内部，客户端会将每个密钥散列到仅一个服务器。如果该服务器出现故障，客户端将在对未来的密钥进行散列时考虑到这一点。解决此问题的一种方法是为每个服务器单独设置一组。这将需要您创建两个客户端，一个连接到每个服务器，然后发送两次请求。如果 .NET 客户端提供异步集，那么您可以这样做，延迟时间仅为两个集操作中最长的一个。

# c# - 获取无线网络的 Host-IP

> ID：13236032
> 
> 赞同：-2
> 
> 时间：2012-11-05T16:16:24.960
> 
> 标签：c#, .net, compact-framework, wifi

> **可能重复：**
> [从移动设备获取局域网中的所有 IP 主机](https://stackoverflow.com/questions/13233808/get-all-ip-hosts-in-lan-from-mobile-device)

如何以编程方式获取无线网络中的所有主机？

我知道我正在使用的 wlan，并且我已连接到它。现在我想显示一个主机列表（或者至少是它们的 IP 地址）。

我怎样才能做到这一点，如果我在具有紧凑框架的 Windows Mobile 上工作并想要这样做，是否有特别之处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:21:10.780

有很多方法。例如：

*   ARP：

[http://msdn.microsoft.com/en-us/library/aa366358%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa366358%28VS.85%29.aspx)

*   西米：

[http://weblogs.sqlteam.com/mladenp/archive/2010/11/04/find-only-physical-network-adapters-with-wmi-win32_networkadapter-class.aspx](http://weblogs.sqlteam.com/mladenp/archive/2010/11/04/find-only-physical-network-adapters-with-wmi-win32_networkadapter-class.aspx)

*   ICMP：

[http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/8a528983-915b-4d94-836e-804b03e6261f](http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/8a528983-915b-4d94-836e-804b03e6261f)

ETC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:17:46.577

简单的答案是：你不能。更详细地说：除非你有一个协议来发现你的主机，否则你不能，例如，NetBIOS。您可以通过 pInvoke 调用 NetBEUI（NetBios 用户界面）。看看这个之前的帖子：

[.NET 中的 Netbios 支持？](https://stackoverflow.com/questions/6248606/netbios-support-in-net)

您可以使用的另一种方法是 ping WLAN 范围内的所有 IP 地址并等待响应。这不是一个好方法，因为它非常消耗资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:23:26.207

获取网络中所有主机的唯一方法是使用网络扫描。

您可以 ping 设备所在网络的所有有效 IP。

或者，您可以在本地 DNS 服务上检查网络的每个有效 IP 以获取名称，并列出您找到的具有相应 IP 的不同名称。

如果子网掩码对应的位与设备拥有的 IP 相同，则 IP 有效。

# android - SQLite 在 Android 上的使用

> ID：13236034
> 
> 赞同：-1
> 
> 时间：2012-11-05T16:16:40.163
> 
> 标签：android, sqlite

对于我的应用程序，我需要一个数据库，其中包含一个包含 4 列的表。此表及其参数在创建后将是静态的，因此它们将与要在列表视图中列出的相同数据保持在同一位置。

我为此目的使用了 DatabaseHandler，但我要问的是如何在代码中定义这个数据库？它是每次发布都重新构建还是仅在第一次发布时构建？它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:22:41.040

有很多方法可以做到这一点。我遵循的是我将在启动活动中创建数据库和表。然后我将通过计算表中的记录数来插入数据（仅适用于静态表）。`if(number of records == 0)`然后将数据插入数据库。否则为您的应用程序编写代码。它应该工作。

**编辑**

这是获取数据库中记录总数的代码

在数据库类中

**你的数据库**

```
public class YourDatabase extends SQLiteOpenHelper{

   //coding for table create and insert records goes here
   //Your tables total number of records can be identified by following code
 public long yourTableCount()
 {
  SQLiteDatabase db = getReadableDatabase(); 
     return DatabaseUtils.queryNumEntries(db, YOURTABLE_NAME);  
 }
} 
```

**您的活动**

从您的活动中调用数据库类

```
YourDatabase db = new YourDatabase(this);

long numberofrecords = db.yourTableCount();
            if(numberofrecords == 0)
            {
                         //Insert your data in to database
                         //This will happen only in first launch because after that the     numberofrecords == total number of records inserted in the database.
                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:20:30.103

您可以使用数据库管理器手动创建数据库。在资产文件夹中定义数据库后，它将保留在那里并在构建时压缩在 apk 文件中。试试 SQLiteManager，它有一个免费试用版，可以让你设计你的数据库。或者在这里使用 firefox 插件：[https ://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)

# android - 警报对话框即使在关闭后也会弹出

> ID：13236035
> 
> 赞同：1
> 
> 时间：2012-11-05T16:16:43.973
> 
> 标签：android, android-alertdialog

我有这个问题中讨论的相同问题

[即使在关闭它后也会弹出警报对话框](https://stackoverflow.com/questions/12436370/alert-dialog-pops-up-even-after-dismissing-it)

问题是当用户输入无效数据并单击提交按钮时，会打开失败的警报对话框。我在失败的警报对话框上有一个按钮（继续），单击它后我写了 dialog.dismiss(); 使其消失，以便用户可以重新检查数据并进行修改。但问题是在重新检查和修改数据时，如果他改变了方向，那么即使没有单击提交按钮，也会再次弹出失败的警报对话框。请建议。

这是我的代码，请帮助我....

```
final EditText Name = (EditText) findViewById(R.id.editText1);

    final EditText Phone = (EditText) findViewById(R.id.editText2);

    final EditText Email = (EditText) findViewById(R.id.editText3);

    final EditText Message = (EditText) findViewById(R.id.editText4);

    final AlertDialog alertDialog = new AlertDialog.Builder(Contact.this)
            .create();

    alertDialog.setButton("Continue..",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    // here you can add functions
                    alertDialog.dismiss();
                }
            });

    Submit = (ImageButton) findViewById(R.id.bSubmit);
    Submit.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            if (Name.getText().toString().length() > 0) {

                if (Phone.getText().toString().matches("^[0-9]{1,10}$")) {

                    if (Email.getText().toString()
                            .matches("[a-zA-Z0-9._-]+@[a-z]+.[a-z]+")) {

                        if (Message.getText().toString().length() > 10) {

                            //Calling async class and sending data to server

                        } else

                            alertDialog.setMessage("msg is tooo short...");
                        alertDialog.show();
                    } else
                        alertDialog.setMessage("Invalid email ID");
                    alertDialog.show();
                } else

                    alertDialog.setMessage("Invalid Number...");
                alertDialog.show();

            } else

                alertDialog.setMessage("Enter the Name...!");
            alertDialog.show();

        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:30:02.567

更改方向会破坏活动并通过调用 onCreate 重新启动。您可能必须在覆盖的 onResume() 中处理此问题，以确保正在清除对话框。在此处查看活动生命周期。 [http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:21:03.467

```
alertDialog.show(); 
```

根据您的代码，这被调用了两次。只需从其他任何地方删除上面的行并在最后使用一次。

# php - 在服务类 Android 中运行同步方法

> ID：13236043
> 
> 赞同：0
> 
> 时间：2012-11-05T16:17:27.337
> 
> 标签：php, android, json, http, sync

过去一周我一直在搞砸一个问题......

我需要一个接一个地运行在同一个类中定义的方法。他们确实连接到网络服务并向它发送巨大的 JSON ......

我正在做的是...

```
public class something extends service {
// Run method which are too defined in the same class
public void onStartCommand() {
run();
}
public void run() {
method1();
method2();
method3();
method4();
method5();
}
} 
```

此外，在我使用的每种方法中，都将超过 250 个 JSONObjects 存储在一个 JSONArray 中......当我运行应用程序时，web 上的 php 脚本只读取第一种方法中的数组对象，后来它休息！我无法弄清楚这是什么问题！

服务器上处理它的php是......

```
<?php
    function write_contact($imei,$name,$phone) {
        $mysql = "config/mysql.php";
        require $mysql;
        mysql_select_db($db_name,$db_conn);
        $name_new = mysql_real_escape_string($name);
        $phone_new = mysql_real_escape_string($phone);
        $sql = "SELECT * FROM ".$imei."_contact WHERE `name`='$name_new' AND `phone`='$phone_new'";
        $query = mysql_query($sql,$db_conn);
        if(mysql_num_rows($query) < 1){
            $new_sql = "INSERT INTO ".$imei."_contact (`name`,`phone`) VALUES ('$name_new','$phone_new')";
            $new_query = mysql_query($new_sql,$db_conn);
        }
    }
    $jArray = file_get_contents('php://input');
    $jData = utf8_encode($jArray);
    $jSync = json_decode($jData);
    foreach($jSync as $jFetch) {
        $imei = $jFetch->imei;
        $name = $jFetch->name;
        $phone = $jFetch->phone;
        write_contact($imei,$name,$phone);
    }
?> 
```

我正在执行的一种 Android 方法...

```
public void syncContact() {
        Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
    JSONArray jContact = new JSONArray();
        String imei = getIMEI();
        while (phones.moveToNext())
        {
            String name = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phone = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            JSONObject contactSync = new JSONObject();
            try {
            contactSync.put("imei", imei);
            contactSync.put("name", name);
            contactSync.put("phone", phone);
            } catch (JSONException ex) {
                Log.i("Error",ex.getMessage());
            }
        jContact.put(contactSync);
        }
        postSync("contactSync.php",jContact);
        phones.close();
    }

//Post Method

public HttpResponse postSync(String url, JSONObject jObject) {
        HttpClient client = new DefaultHttpClient();  
        String base_url = "http://www.myurl.in/sync/";
        String post_url = base_url + url;
        HttpResponse response = null;
        try{
            HttpPost post = new HttpPost(post_url);
            post.setHeader("JSON",jObject.toString());
            StringEntity se = new StringEntity(jObject.toString());    
            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));  
            post.setEntity(se);  
            response = client.execute(post);
            Log.i("HTTP JSON",jObject.toString());
            }
            catch(Exception ex){
                Log.e("Error",ex.getMessage());
            }
            int status = response.getStatusLine().getStatusCode();  
            System.out.println("HTTP post status = " + status);
            return response;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:28:50.463

看起来你想做线程，这是正确的方法，但你没有正确地做。实现 run() 方法只是其中的一部分。一个对象必须显式地实现可运行接口，该接口定义了您拥有的 run() 方法。然后必须将可运行对象传递给 Thread 构造函数，并且必须通过 start() 启动生成的 Thread 对象。您还可以定义 Thread 类并在其中实现 run 方法。所以有几种方法可以做到这一点，但在你的情况下，最简单的可能看起来像这样：

```
onStartCommand()
{
   new Thread()
   {
     public void run()
     {
        method1();
     }
   }.start();

   new Thread()
   {
     public void run()
     {
        method2();
     }
   }.start();
  ...
} 
```

等等。这样做是定义一个匿名内部类 (new Thread() { }) 并在该匿名内部类上由 new Thread() 构造函数实例化的对象上调用 start()。这些匿名内部类中的每一个都会产生自己的执行线程，这将导致 JVM 在每个内部类中执行 run() 方法。然后，run 方法将调用您的 method1()、method2() 等“worker”方法，每个方法都将“同时”执行

# sharepoint-designer - 如何使用xmldocument读取excel文件

> ID：13236044
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:59:40.290
> 
> 标签：sharepoint-designer, excel, xml, openxml

我需要使用 Xmldocument 读取 Excel 数据。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:07:15.653

你不应该。

更好地使用 Microsoft 的 Office Open XML 库。

我不能给出一些代码，但是您必须使用 System.IO.Packaging 提取 xlsx 内容，找到您需要的工作表，然后将其加载到 XmlDocument 中。

但请注意，这样做非常棘手，并且有很多注意事项。

# opengl - glViewport 和 glFrustum 之间到底有什么联系？

> ID：13236046
> 
> 赞同：0
> 
> 时间：2012-11-05T16:17:35.890
> 
> 标签：opengl, opengl-es, opengl-es-1.1, frustum

假设我想画以下几行：

```
 const GLfloat lineX[] = {
        FrustumData.left * FrustumData.ratio , (FrustumData.top + FrustumData.bottom) / 2 * FrustumData.ratio, FrustumData.zFar, //point A
        FrustumData.right * FrustumData.ratio , (FrustumData.top + FrustumData.bottom) / 2 * FrustumData.ratio, FrustumData.zFar //point B
    };
    const GLfloat lineY[] = {
        (FrustumData.left + FrustumData.right) / 2 * FrustumData.ratio , FrustumData.bottom * FrustumData.ratio, FrustumData.zFar, //point A
        (FrustumData.left + FrustumData.right) / 2 * FrustumData.ratio , FrustumData.top * FrustumData.ratio, FrustumData.zFar //point B
    };
    const GLfloat lineZ[] = {
        (FrustumData.left + FrustumData.right) / 2 * FrustumData.ratio, (FrustumData.top + FrustumData.bottom) / 2 * FrustumData.ratio, FrustumData.zFar, //point A
        (FrustumData.left + FrustumData.right) / 2 , (FrustumData.top + FrustumData.bottom) / 2 , FrustumData.zNear //point B
    }; 
```

其中 ratio = zFar/zNear 和其他一切都是 glFrustum 参数。

我不应该看到任何选择 Frustum 参数的行，还是它取决于 glViewport？

因为我现在看不到他们，我不明白为什么。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:28:28.513

两者之间没有直接联系。但它们都对屏幕上出现的位置有直接影响。

本质上，glFrustum 是一个创建某种*投影*变换的函数，即创建透视图的函数。我建议阅读我[写的另一个答案，它解释了 OpenGL 的转换阶段。](https://stackoverflow.com/a/13223392/524368)

在那个答案中，我写道：

> 这种变换将眼睛空间中的一些体积映射到具有特定边界的特定体积，几何图形被剪裁到该特定体积。

glFrustum 正在定义这样一个卷。它看起来像一个金字塔，其尖端切割为（平截头体），尖端位于眼睛空间原点，“切割”是近剪辑平面，金字塔的底部是远剪辑平面。参数*left、right、bottom*和*top*以眼睛空间单位定义近剪裁平面的范围。

# c++ - 是否可以禁止引用对象

> ID：13236048
> 
> 赞同：17
> 
> 时间：2012-11-05T16:17:44.863
> 
> 标签：c++

我想做与创建类的实例相反的事情`noncopyable`，即确保特定类的实例*只能*作为副本而不是作为引用传递。如果任何函数试图通过引用接收它，我希望它给出编译错误（理想情况下）或运行时错误。

我不认为`operator &`私有化会这样做，是否有合法的方式来做到这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-05T16:23:00.383

这不可能。任何命名变量都可以绑定到适当类型的引用变量。这就是语言的工作方式。

特别是，你永远不可能有一个有你的限制的*复制构造函数*，所以你实际上不能按值传递对象！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T16:27:22.323

> 我认为将运营商和私有化不会这样做，是否有合法的方式来做到这一点。

不，因为`&`您在函数签名中用于传递引用的不是运算符。您说的是地址运算符（一元）或按位与运算符（二进制）。所以它与传递引用无关。

**没有办法禁止 type 的传递引用**。

我怀疑你的动机是否足够强大，并且你似乎对传递机制有一个不好的理解：

> 如果任何函数试图通过引用接收它，我希望它给出编译错误（理想情况下）或运行时错误。

函数要么通过引用传递参数，要么通过值传递。它是由它的声明决定的，我认为你的困惑源于这里。例如：

```
void foo(X x); 
```

按值获取参数`x`。没有办法通过引用传递它。没门。同样地：

```
void foo(X& x) 
```

引用它，它总是会的。

# javascript - Javascript评估代码问题

> ID：13236050
> 
> 赞同：3
> 
> 时间：2012-11-05T16:17:48.267
> 
> 标签：javascript, oop, eval, user-defined-functions

我有一个问题，我想在 javascript 中创建一个“钩子”，所以我创建了一个小函数来做到这一点。

这是我的代码：

```
GoogleMaps.prototype.callUserFunc = function( func, args ){
  eval('GoogleMaps.' + func + '.apply(func, args)');
} 
```

我遇到的问题是我真的不想使用 eval() 函数，有没有更好的方法呢？

我为这个愚蠢的问题道歉，我的 javascript 有点糟糕。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:19:36.190

您可以使用**方括号表示法**来访问对象的属性。

例子：

```
var x = {
    someProperty: 5
};

console.log(x["someProperty"]); // => 5
console.log(x.someProperty); // => 5

var y = 'someProperty';
console.log(x[y]); // => 5 
```

`x["someProperty"]`与 相同`x.someProperty`。

你可以像这样使用它。

```
GoogleMaps.prototype.callUserFunc = function( func, args ){
  GoogleMaps[func].apply(func, args);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:19:55.433

```
GoogleMaps.prototype.callUserFunc = function( func, args ){
  GoogleMaps[func].apply(func, args);
  //eval('GoogleMaps.' + func + '.apply(func, args)');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:22:41.767

真正的直通函数将返回该函数返回的值，并将在`GoogleMaps`.

您的主要问题是不知道可以在任何对象上使用数组访问表示法：

```
GoogleMaps.prototype.callUserFunc = function(func, args) {
    return GoogleMaps[func].apply(GoogleMaps, args);
}; 
```

不过，总的来说，您最好将代码编写为：

```
GoogleMaps[func](...args...); 
```

但这一切都假设`GoogleMaps`包含静态可访问的函数，并且没有被用作实例化对象的构造函数。

在不知道如何`GoogleMaps`使用的情况下，您的传递函数可能应该在`callUserFunc`被调用的对象实例之外执行：

```
GoogleMaps.prototype.callUserFunc = function(func, args) {
    return this[func].apply(this, args);
}; 
```

# javascript - 找出最后一个 div 是否可见，然后禁用下一个按钮？

> ID：13236051
> 
> 赞同：2
> 
> 时间：2012-11-05T16:17:49.920
> 
> 标签：javascript, jquery, html

我有一个分布在多个 div 中的表单，这些 div 使用 jQuery 打开和关闭。我想在第一个和最后一个 div 可见时禁用下一个和上一个按钮。

根据我对 jQuery 的了解，这听起来像是一项简单的任务，但事实证明，考虑到我当前的代码，它比我想象的要困难得多。

这是我当前的下一个和上一个按钮功能

```
 var sel = "div[data-type='form']";
    var current = $(sel).get(0);

    $(sel).not(current).hide();

    $("#next").click(function () {
        if ($(form).valid()) {
            current = $(current).next(sel);
            $(current).show();
            $(sel).not(current).hide();
        } 
    });

    $("#prev").click(function () {
        current = $(current).prev(sel);
        $(current).show();
        $(sel).not(current).hide();

    }); 
```

这是目前正在发生的事情的一个小提琴[http://jsfiddle.net/GZ9H8/6/](http://jsfiddle.net/GZ9H8/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:38:13.717

这[有效](http://jsfiddle.net/GZ9H8/7/)（注意：我出于测试目的删除了验证）。

```
$("#next").click(function () {
    if (true) {
        current = $(current).next(sel);
        $(current).show();
        $(sel).not(current).hide();
        if (!$(current).next(sel).get(0)){
            $(this).hide();
        }
        if ($(current).prev(sel).get(0)){
             $("#prev").show();
        }
    }
});

$("#prev").click(function () {
    current = $(current).prev(sel);
    $(current).show();
    $(sel).not(current).hide();
    if ($(current).next(sel).get(0)){
       $("#next").show();
    }
    if (!$(current).prev(sel).get(0)){
        $(this).hide();
    }
}); 
```

请注意，上一个按钮可能应该从一开始就隐藏起来。此外，您可以根据需要禁用而不是隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:40:47.410

这可能有用：

```
$("#next").click(function () {
    if ($(form).valid()) {
        current = $(current).next(sel);
        $(current).show();
        $(sel).not(current).hide();

        // Last element's index is equal to length - 1
        $(this).attr('disabled', current.index(sel) == $(sel).length - 1);
        // First element's index is equal to 0
        $("#prev").attr('disabled', current.index(sel) == 0);
    }
});

$("#prev").click(function () {
    current = $(current).prev(sel);
    $(current).show();
    $(sel).not(current).hide();

    // Last element's index is equal to length - 1
    $("#next").attr('disabled', current.index(sel) == $(sel).length - 1);
    // First element's index is equal to 0
    $(this).attr('disabled', current.index(sel) == 0);
}); 
```

问候

# java - 引起：java.lang.ClassNotFoundException：org.hibernate.Interceptor

> ID：13236055
> 
> 赞同：0
> 
> 时间：2012-11-05T16:18:08.463
> 
> 标签：java, hibernate

我正在尝试运行一个实用程序类，该类从 .bat 文件中调用一些特定于项目的类。实用程序类在 Eclipse IDE 中运行良好，但从命令行我得到`Caused by: java.lang.ClassNotFoundException: org.hibernate.Interceptor`.
我假设要解决这个问题，我应该从项目的 lib 文件夹中找到相应的 jar，并将其显式设置到 bat 文件的 CLASSPATH 中。但我找不到任何类 org.hibernate.Interceptor 的 jar。

我的方法有什么问题？我的 lib 文件夹中有以下与休眠相关的 jar：

*   hibernate3.jar
*   hibernate-jpa-2.0-api-1.0.0.Final.jar

批处理文件只有两个命令

```
@ECHO OFF
java -cp .;D:\Projects\Name\webapps\WEB-INF\classes dbchanges.CreateQuery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:59:26.990

找到了答案。我必须将所有必要的 jars 包含到 CLASSPATH 中。

对不起愚蠢的问题:(

# php - 使用 PHP 读取 Word XML 文件

> ID：13236059
> 
> 赞同：1
> 
> 时间：2012-11-05T16:18:41.630
> 
> 标签：php, xml, ms-word

有人对如何使用 PHP 读取 Word (2007-2013) 文件有任何建议吗？我正在使用内置样式来标记一个 word 文档，并且希望最好用 PHP 来阅读它以分析内容。我试过搜索谷歌和这个网站，但没有运气。如果有人对此有任何经验或对我将从哪里开始的想法，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-17T12:05:15.410

如果您只是对 Word 文档的内容感兴趣，例如将其转换为 HTML 页面。我不推荐 PHPWord，因为它的内部结构相当复杂。以下代码仅使用 PHP 原生功能来读取 docx 文档的所有段落。

```
 /*DOCX is actually a ZIP file containing other files, document.xml 
holds the text of you document, sadly not the styles, you need to drill
further into other files to extract the styles*/

    $result = file_get_contents('zip://word.docx#word/document.xml');

    //Load the document XML into PHP's SimpleXML
    $xml = simplexml_load_string($result,null, 0, 'w', true);
    $body = $xml->body;
    foreach($body[0] as $key => $value){
        echo "<p>";
        if($key == "p"){
            foreach ($value->r as $kkey => $vvalue) {
                echo (string)$vvalue->t;
            }
        }
        echo "</p>";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T04:52:33.807

干得好 ：）

```
$zip = new ZipArchive;
$zip->open("MyFile.docx");
if (($index = $zip->locateName("word/document.xml")) !== false) {
    $text = $zip->getFromIndex($index);
    $xml = DOMDocument::loadXML($text, LIBXML_NOENT | LIBXML_XINCLUDE | LIBXML_NOERROR | LIBXML_NOWARNING);
    echo $xml->saveXML();
}
$zip->close(); 
```

如果你需要安装 zip 分机，你可以在这里找到它：http: [//php.net/manual/en/zip.installation.php](http://php.net/manual/en/zip.installation.php)

希望它可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:16:29.453

你可以使用PHPWord！我相信它具有阅读文档的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T03:47:43.653

我知道这不是您想要的，但您能否让他们以 .odt 格式重新保存 Word 文档？

如果您到了那个阶段，这篇文章可能会有所帮助： [在 php 中读取 odt 文件](https://stackoverflow.com/questions/4069852/reading-odt-files-in-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T23:06:40.610

我没有直接的答案，但我的偏好是将这样的复杂问题分解成更简单的部分。

我将使用的方法是在 Word（或 OpenOffice 或 LibreOffice）中打开它并保存为 HTML。然后我会在前面添加一条指令，并使用 PHP 中可用的许多 XML 类/扩展之一来阅读它。

[我发现这个问题是因为我在谷歌上搜索一个框架，它可以让我浏览 Word 生成的 HTML 并清理它——将它变成合法的 XHTML1.0，删除 Word 创建的无用样式信息，同时保留我的用户- 生成的样式等。那第二个需要一些实验来确定我想要保留什么以及我想要丢弃什么，但我认为这完全在我的业余爱好者的能力范围内。]

# java - Java SaaS 架构 - 可扩展性

> ID：13236062
> 
> 赞同：1
> 
> 时间：2012-11-05T16:18:44.000
> 
> 标签：java, architecture, amazon-ec2, cloud, saas

我正在考虑构建一个基于 Java EE 的服务集并将这些服务许可给我的客户。虽然我们的目标是使这些服务对任何客户都通用，但现实情况是，需要根据客户的具体情况进行定制和新服务。

该堆栈很可能是部署到 EC2 云的 Java 应用程序，可能会利用 Spring 等框架。

一个人会为我的客户规定一个托管应用程序的架构，同时也使他们能够构建自己的自定义扩展。是否有人拥有构建可在平台端扩展的托管 SaaS 服务的公司的技术或业务示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:45:58.550

我还没有这样做，但是 AFAIK 你也可以在服务器端使用诸如 OSGi 之类的模块系统来编写模块化、可扩展的服务器端应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T02:39:36.457

[Atlassian](http://www.atlassian.net/)就是这样做的。您基本上需要付费才能拥有自己的源代码、平台 SDK，甚至是托管实例（不过，这个实例似乎不可扩展）

在内部，它们中的大多数依赖于一个 OSGi 容器（我认为它的 Felix），因此它相应地管理依赖关系，以及 DI 和扩展点。也许值得一试

# javascript - 用于表单验证的 JQuery 插件

> ID：13236063
> 
> 赞同：2
> 
> 时间：2012-11-05T16:18:43.733
> 
> 标签：javascript, jquery, jquery-plugins, validation

我想*立即*验证我的表单字段（可能在`change`事件中），而不是在提交时验证整个表单。它应该看起来像*Pinterest*注册[表单](https://pinterest.com/join/register/)

`jquery plugin`您会为此推荐 哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:21:58.500

jQuery 验证插件：

> 该插件由 Jörn Zaefferer 编写和维护，他是 jQuery 团队的成员、jQuery UI 团队的首席开发人员和 QUnit 的维护者。它始于 2006 年 jQuery 的早期，并从那时起进行了更新和改进。

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

[文档](http://docs.jquery.com/Plugins/Validation)

[演示](http://jquery.bassistance.de/validate/demo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:21:10.877

我会推荐[jQuery Validate](https://github.com/jzaefferer/jquery-validation)。我使用它并且喜欢它。几乎你所要做的就是添加类`required`，它将遵循 html5 标记类型`email`等`number`，并确保它匹配

# jquery - jQuery 向导插件验证名称

> ID：13236081
> 
> 赞同：0
> 
> 时间：2012-11-05T16:19:38.450
> 
> 标签：jquery, cakephp, jquery-validate, cakephp-2.1

我正在使用[jQuery Wizard](http://www.wbotelhos.com/stepy/)插件并使用 jQuery Validate 插件进行验证 - 在 CakePHP 2.1 中开发

jQuery 向导/验证。

它应该是这样设置的：

```
$(function(){
$("#JobAdCreateForm").formwizard({ 
    historyEnabled : true,
    validationEnabled: true,
    focusFirstInput : true,
    outDuration : 100,  
    validationOptions : {
        rules: {
            JobAdJobTitle: "required",
            JobAdCategoryId: "required"
        },
        messages: {
            JobAdJobTitle: "Please enter a job title.",
            JobAdCategoryId: "Please select a category.",
        }
    }
});  
}); 
```

在 CakePHP 中，该字段的 name 属性如下所示： `data[JobAd][job_title]`现在当我将上面的 name 属性更改为`data[JobAd][job_title]`. `jquery.validate`如果使用`id`属性而不是属性，它会很完美`name`。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:43:08.287

如果引用 name 属性呢？

```
rules: {
    "data[JobAd][job_title]": "required"
    // etc
} 
```

# ruby-on-rails - 当加载根命名空间中的另一个同名类时，Rails 类加载会跳过命名空间类

> ID：13236083
> 
> 赞同：7
> 
> 时间：2012-11-05T16:19:56.057
> 
> 标签：ruby-on-rails, ruby, classloader

我有两个命名空间，每个都有自己的控制器和演示者类： `Member::DocumentsController` `Member::DocumentPresenter` `Guest::DocumentsController` `Guest::DocumentPresenter`

两个演示者都继承自`::DocumentPresenter`.

控制器在没有指定命名空间的情况下访问它们各自的演示者，例如：

```
class Guest::DocumentsController < ActionController::Base
    def show
        DocumentPresenter.new(find_document)
    end
end 
```

这通常会在同一命名空间中调用演示者。但是有时在开发环境中我看到 base :: DocumentPresenter 正在被使用。

我怀疑原因是 base ::DocumentPresenter 已经加载，因此 Rails 类自动加载不会费心再看。有可能是这种情况吗？它也可以在生产环境中发生吗？

我可以想到两个解决方案：

*   将基类重命名为 DocumentPresenterBase
*   在控制器文件中明确要求适当的演示者文件

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:45:58.847

您的假设是正确的 - 如果您没有指定命名空间，Ruby 从当前命名空间开始并向上查找类，并且因为命名空间类尚未自动加载，所以`::DocumentPresenter`找到并且自动加载器不会触发。

**作为一种解决方案**，我建议重命名`::DocumentPresenter`为`DocumentPresenterBase`，因为当您忘记命名空间或明确要求某处时，这可以保护您免受错误的影响。

要考虑的**第二个选项**实际上是在所有地方使用特定的命名空间类名，但是当您不小心忘记命名某个调用时，这会出现错误。

```
class Guest::DocumentsController < ActionController::Base
  def show
    Guest::DocumentPresenter.new(find_document)
  end
end 
```

**第三个选项**将是您的第二个选项 - 事先明确要求初始化程序中的所有类。我已经使用 Rails API 完成了这项工作，该 API 接收嵌入的模型，`JSON`并且当实际模型尚未加载时，Rails 倾向于为它们命名。

**选项 3.5**您可能会欺骗自动加载器来完成繁重的工作（尽管这看起来更像是一种 hack）：

```
class Guest::DocumentsController < ActionController::Base

  # trigger autoload
  Guest::DocumentPresenter

  def show
    # This should refer Guest::DocumentPresenter
    DocumentPresenter.new(find_document)
  end

  def show
    # As will this
    DocumentPresenter.new(find_document)
  end
end 
```

最干净的方法仍然是重命名基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:47:07.070

我认为如果您想使用名称，在 3 个解决方案中，一个是您的第二个解决方案。

1) 在控制器文件中明确要求适当的演示者文件

2）执行完整的环境类路径，如：

```
class Guest::DocumentsController < ActionController::Base
    def show
        Guest::DocumentPresenter.new(find_document)
    end
end 
```

3）在初始化目录上创建一个文件并手动执行要求（最糟糕的选择：S）

# sql - VB.NET MDB 创建表命令和自动编号类型

> ID：13236085
> 
> 赞同：1
> 
> 时间：2012-11-05T16:20:01.137
> 
> 标签：sql, vb.net, ms-access

我正在使用以下命令在 mdb 数据库中创建一个表，当我删除自动编号类型时它工作正常

```
"CREATE TABLE pxs(sid Autonumber , Adress Text , Port Text, user Text, pass Text, sreq Integer, freq Integer)" 
```

那么我应该如何将 id 列定义为自动编号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:23:44.543

您可以使用：

```
CREATE TABLE pxs(sid counter primary key, ... 
```

请注意，这`user`是一个保留字，因此您可能希望使用其他名称。

# python - ipython笔记本中的Unicode

> ID：13236086
> 
> 赞同：7
> 
> 时间：2012-11-05T16:20:19.670
> 
> 标签：python, unicode, matplotlib, ipython, ipython-notebook

我试图从 ipython 笔记本的 matplotlib 图中获得一个“度”符号（°）。

当我跑

```
ax = plt.gca()
ax.set_xlabel("something at 55" + unicode("\xc2", errors='replace'))
ax.plot([0.,1.,], [0.,1.]) 
```

我得到了一个情节，但不是度数符号，而是一个带有问号的奇怪黑色方块。当我尝试`savefig`将图形转换为 PDF 时也会发生这种情况。

如果我尝试跑步

```
ax = plt.gca()
ax.set_xlabel("something at 55°")
ax.plot([0.,1.,], [0.,1.]) 
```

我收到一个错误（见下文）。

知道我做错了什么吗？

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/usr/lib/python2.7/dist-packages/IPython/zmq/pylab/backend_inline.pyc in show(close)
    100     try:
    101         for figure_manager in Gcf.get_all_fig_managers():
--> 102             send_figure(figure_manager.canvas.figure)
    103     finally:
    104         show._to_draw = []

/usr/lib/python2.7/dist-packages/IPython/zmq/pylab/backend_inline.pyc in send_figure(fig)
    188     """
    189     fmt = InlineBackend.instance().figure_format
--> 190     data = print_figure(fig, fmt)
    191     # print_figure will return None if there's nothing to draw:

    192     if data is None:

/usr/lib/python2.7/dist-packages/IPython/core/pylabtools.pyc in print_figure(fig, fmt)
    102     try:
    103         bytes_io = BytesIO()
--> 104         fig.canvas.print_figure(bytes_io, format=fmt, bbox_inches='tight')
    105         data = bytes_io.getvalue()
    106     finally:

/usr/lib/pymodules/python2.7/matplotlib/backend_bases.pyc in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, **kwargs)
   1981                     orientation=orientation,
   1982                     dryrun=True,
-> 1983                     **kwargs)
   1984                 renderer = self.figure._cachedRenderer
   1985                 bbox_inches = self.figure.get_tightbbox(renderer)

/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.pyc in print_png(self, filename_or_obj, *args, **kwargs)
    467 
    468     def print_png(self, filename_or_obj, *args, **kwargs):
--> 469         FigureCanvasAgg.draw(self)
    470         renderer = self.get_renderer()
    471         original_dpi = renderer.dpi

/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.pyc in draw(self)
    419 
    420         try:
--> 421             self.figure.draw(self.renderer)
    422         finally:
    423             RendererAgg.lock.release()

/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/lib/pymodules/python2.7/matplotlib/figure.pyc in draw(self, renderer)
    896         dsu.sort(key=itemgetter(0))
    897         for zorder, a, func, args in dsu:
--> 898             func(*args)
    899 
    900         renderer.close_group('figure')

/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in draw(self, renderer, inframe)
   1995 
   1996         for zorder, a in dsu:
-> 1997             a.draw(renderer)
   1998 
   1999         renderer.close_group('axes')

/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/lib/pymodules/python2.7/matplotlib/axis.pyc in draw(self, renderer, *args, **kwargs)
   1052         self._update_label_position(ticklabelBoxes, ticklabelBoxes2)
   1053 
-> 1054         self.label.draw(renderer)
   1055 
   1056         self._update_offset_text_position(ticklabelBoxes, ticklabelBoxes2)

/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/lib/pymodules/python2.7/matplotlib/text.pyc in draw(self, renderer)
    524         renderer.open_group('text', self.get_gid())
    525 
--> 526         bbox, info = self._get_layout(renderer)
    527         trans = self.get_transform()
    528 

/usr/lib/pymodules/python2.7/matplotlib/text.pyc in _get_layout(self, renderer)
    303         baseline = 0
    304         for i, line in enumerate(lines):
--> 305             clean_line, ismath = self.is_math_text(line)
    306             if clean_line:
    307                 w, h, d = get_text_width_height_descent(clean_line,

/usr/lib/pymodules/python2.7/matplotlib/text.pyc in is_math_text(s)
    987             return s, 'TeX'
    988 
--> 989         if cbook.is_math_text(s):
    990             return s, True
    991         else:

/usr/lib/pymodules/python2.7/matplotlib/cbook.pyc in is_math_text(s)
   1836     except UnicodeDecodeError:
   1837         raise ValueError(
-> 1838             "matplotlib display text must have all code points < 128 or use Unicode strings")
   1839 
   1840     dollar_count = s.count(r'$') - s.count(r'\$')

ValueError: matplotlib display text must have all code points < 128 or use Unicode strings 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T16:27:54.037

错误消息告诉您该怎么做：

```
ValueError: matplotlib display text must have all code points < 128 
or use Unicode strings 
```

制作`xlabel`一个 unicode 字符串：

```
ax.set_xlabel(u"something at 55°") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T16:31:36.680

问题是您用于编写标签的字体没有° 符号。尝试改用 matplotlib 的[mathtext](http://matplotlib.org/users/mathtext.html#mathtext-tutorial)并用乳胶格式化°：

```
ax.set_xlabel("something at 55$^\circ$") 
```

# c# - 为什么 log4net 不写入文件？

> ID：13236091
> 
> 赞同：4
> 
> 时间：2012-11-05T16:20:30.250
> 
> 标签：c#, visual-studio-2012, log4net

我已经添加了 log4net 的所有部分，但是它没有写入文件。
我正在使用 VS2012 LoadTest 项目。

运行 LoadTest 项目时， `System.Console.WriteLine`or都不起作用。`Debug.WriteLine()`

我添加了装配信息行：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "web.config", Watch = true)]   //For log4net 1.2.10.0 
```

我已经：
- 添加了 webconfig 部分
- 初始化了一个已配置的 XML 初始化程序
- 使用正确的日志初始化了新的 log4net

我的 app.config：

```
 <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>

  <log4net debug="true">
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="Settings_CacheExplosion.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n" />
      </layout>
    </appender>

    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
  </log4net>

</configuration> 
```

我的课：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace WebAndLoadTestProject1
{
    using System;
    using System.Collections.Generic;
    using System.Diagnostics;
    using System.Text;
    using log4net;
    using log4net.Core;
    using Microsoft.VisualStudio.TestTools.WebTesting;

    public class Settings_CacheExplosion : WebTest
    {
        private static readonly ILog activityLog = LogManager.GetLogger("Activity"); 

        private static int _ctidsCounter { get; set; }

        public static int CtidsCounter
        {

            get
            {

                if (_ctidsCounter == 2000)
                {
                    _ctidsCounter = 1000;
                }
                return _ctidsCounter++;
            }
            set
            {
                _ctidsCounter = value;
            }
        }

        public Settings_CacheExplosion()
        {
            this.PreAuthenticate = true;

            CtidsCounter = 1000;

            log4net.Config.XmlConfigurator.Configure();
        }

        public override IEnumerator<WebTestRequest> GetRequestEnumerator()
        {
            WebTestRequest request1 = new WebTestRequest("http://clientservice.mam.qasite-services.com/settings");

            request1.Method = "POST";

            Debug.WriteLine(string.Format("ctid={0}", CtidsCounter));

            request1.QueryStringParameters.Add("ctid", CtidsCounter.ToString(), false, false);
            StringHttpBody request1Body = new StringHttpBody();
            request1Body.ContentType = "";
            request1Body.InsertByteOrderMark = false;
            request1Body.BodyString = "";
            request1.Body = request1Body;

            activityLog.Debug(string.Format("ctid={0}", CtidsCounter));
            //Console.WriteLine(string.Format("ctid={0}", CtidsCounter));

            yield return request1;
            request1 = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:26:36.147

如果您希望 log4net 从 app.config 中读取，您必须将其添加到您的`AssemblyInfo.cs`文件中：

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T16:38:39.557

查看您的**app.config**：

`<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />`

这可以确保应用程序将拒绝在 .NET 4.0 上启动并在启动时出错。

如果您使用的是 Framework .NET4.5，log4net 不支持它。[请参阅http://logging.apache.org/log4net/release/features.html](http://logging.apache.org/log4net/release/features.html)中的框架部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:16:42.663

使用`<param name = "Activity" value="Settings_CacheExplosion.txt" />`而不是`<file value="Settings_CacheExplosion.txt" />`. 在您的 xml 配置部分中。

# video - Red5 1.0 并不总是发送视频的时长

> ID：13236095
> 
> 赞同：2
> 
> 时间：2012-11-05T16:20:40.983
> 
> 标签：video, stream, red5, duration

我创建了一个基于 Red5 的录像机/流媒体，问题是如果我播放以前录制的视频，客户端并不总是能获得流的持续时间。我认为服务器不能可靠地发送它......知道吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:44:04.727

要获取播放视频的当前运行时间，您只需调用：

```
this._ns.time 
```

_ns 是一个 flash.net.NetStream 方法，请参见： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#time](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#time)

抱歉，关于获取视频的总时长我无话可说，我们已经从其他地方获得了这些信息......

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:16:33.253

我并不孤单，有解决方法，我找到了一个总是有效的方法。

```
NetConnection.call("getStreamLength", Responder, stream) 
```

使用它我总是得到流的长度。我在 之后立即调用它`NetStream.play(stream)`。

# ios - HelloWorld facebook 示例代码 - 模拟器和设备上的结果不同？

> ID：13236096
> 
> 赞同：0
> 
> 时间：2012-11-05T16:20:46.993
> 
> 标签：ios, iphone, facebook, facebook-wall

我刚刚开始着手将 FB 代码集成到应用程序中。我已经尝试了“hello world”示例代码，它在模拟器上按预期工作 - 它张贴在我的墙上，旁边是脚本“8 分钟前通过（我的应用程序名称）”一切都很好！

但是，如果我在我的 ipod touch 上运行该应用程序，而不是显示我要发布的文本的预填充屏幕，我会得到一个空白的“fb 文本输入”屏幕，当它发送到我的墙上时，它只有 '8几分钟前通过iOS'旁边...

很难清楚地解释清楚，对我来说更难弄清楚问题是什么——有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:47:05.573

发生的情况是，当您在 iPod 中运行 HelloFacebookSample 时，它​​正在使用 iOS6 本机对话框。这是因为您可能已在 iOS 设置中登录 Facebook。但是，在您的模拟器中，它使用的是非 iOS6 本机对话框。提要故事中的属性不同，因为 iOS6 帖子始终显示“通过 iOS”，因为此帖子贯穿 iOS6 流程。如果您共享来自 Mobile Safari 的链接，您将获得相同的归属。

# python - 如何仅将 csv 文件中的特定列加载到 DataFrame 中

> ID：13236098
> 
> 赞同：9
> 
> 时间：2012-11-05T16:20:58.973
> 
> 标签：python, pandas, csv

假设我有一个包含 400 列的 csv 文件。我无法将整个文件加载到 DataFrame 中（不适合内存）。但是，我真的只想要 50 列，这将适合内存。我没有看到任何内置的 Pandas 方法可以做到这一点。你有什么建议？我愿意使用该`PyTables`界面，或者`pandas.io.sql`.

最好的情况是这样的函数： `pandas.read_csv(...., columns=['name', 'age',...,'income'])`. 即，我们传递将被加载的列名（或数字）列表。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-10T05:41:17.987

伊恩，我实现了一个`usecols`完全符合您描述的选项。它将在即将发布的 pandas 0.10 中；开发版本将很快推出。

* * *

因为`0.10`，你可以使用[`usecols`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html)like

```
df = pd.read_csv(...., usecols=['name', 'age',..., 'income']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:30:58.537

目前没有默认的方法来执行此操作。我建议对文件进行分块并对其进行迭代并丢弃您不想要的列。所以像`pd.concat([x.ix[:, cols_to_keep] for x in pd.read_csv(..., chunksize=200)])`

# php - j-query 表可以从数据库中读取 2000 行吗？

> ID：13236102
> 
> 赞同：0
> 
> 时间：2012-11-05T16:21:10.390
> 
> 标签：php, mysql, database, jquery

我有一个有 2000 行和 200 列的表，我想从 mysql 中读取 4 列并在浏览器中显示主题......女巫方式最适合我我想用用户请求如名称或......（如 j -查询 Ajax 表）

j-query 表是可能的还是它很重？
[http://www.jtable.org/](http://www.jtable.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:35:40.223

您必须亲自尝试并在您的应用程序上应用某些指标。

您面临的问题不止一个领域需要解决。

*   从数据库中获取数据的速度有多快？如果你只想要 4 列，你最终会得到 2000 行，每行 4 列。这可能不会对您的应用程序造成太大负担，但很可能取决于您检索数据的方式、服务器上的负载、缓存（如果有）等。
*   你能以多快的速度将该数据传输到用户的浏览器以便 jQuery 可以显示它。这将是浏览器缓存的结果集吗？这将是一个 ajax 请求，用户会看到屏幕和一个微调器来表示数据传输吗？数据是否会以块的形式发送，其中一些会立即显示，而另一些则会排队返回？
*   发送数据时会使用压缩吗？

在我看来，这些问题和需要解决的领域，将为您的查询提供答案。您还可以使用[Fiddler2](http://www.fiddler2.com/fiddler2/) (Windows)，它将为您提供有关指标、传输速率等方面的良好信息。Linux 和 MacOS 平台中存在类似的工具。

最后，我个人建议将[AngularJS](http://angularjs.org)作为 jTable 的替代品。在不止一种情况下，我已经看到 AngularJS 实现在渲染数据方面比 jQuery 更快，但我不能肯定地说你的项目就是这种情况。

# excel - Excel VBA 到电子邮件

> ID：13236104
> 
> 赞同：0
> 
> 时间：2012-11-05T16:21:16.390
> 
> 标签：excel, vba, outlook, paste

我正在尝试创建一个宏，该宏从 excel 中获取表格并将其粘贴到电子邮件中并发送。我可以做到这一点，但表格仍然是表格，我想粘贴特殊图像。我尝试了很多不同的方法和很多谷歌搜索，但无济于事。请帮助...谢谢。

到目前为止的代码

```
TempFile = Environ$("temp") & "/" & Format(Now, "dd-mm-yy h-mm-ss") & ".htm"

'Copy the range and create a new workbook to past the data in
rng.Copy
Set TempWB = Workbooks.Add(1)
With TempWB.Sheets(1)
    .Cells(1).PasteSpecial Format:="Picture (Enhanced Metafile)"  'Paste:=2
    .Cells(1).PasteSpecial xlPasteValues, , False, False
    .Cells(1).PasteSpecial xlPasteFormats, , False, False
    .Cells(1).Select
    Application.CutCopyMode = False

    On Error Resume Next
    .DrawingObjects.Visible = True
    .DrawingObjects.Delete
    On Error GoTo 0
End With

'Publish the sheet to a htm file
With TempWB.PublishObjects.Add( _
     SourceType:=xlSourceRange, _
     Filename:=TempFile, _
     Sheet:=TempWB.Sheets(1).Name, _
     Source:=TempWB.Sheets(1).UsedRange.Address, _
     HtmlType:=xlHtmlStatic)
    .Publish (True)
End With

'Read all data from the htm file into RangetoHTML
Set fso = CreateObject("Scripting.FileSystemObject")
Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
RangetoHTML = ts.ReadAll
ts.Close
RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                      "align=left x:publishsource=")

'Close TempWB
TempWB.Close savechanges:=False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:31:54.997

以下是将所选表格复制为位图图片的代码，然后您可以使用标准粘贴命令将表格粘贴为图片。

```
Selection.CopyPicture Appearance:=xlScreen, Format:=xlBitmap 
```

# facebook - Facebook sharer.php 无法传递 t 值

> ID：13236105
> 
> 赞同：0
> 
> 时间：2012-11-05T16:21:19.640
> 
> 标签：facebook, facebook-graph-api

阅读文档，但仍然无法正确格式化我的名称值对，以便我的消息通过并显示在用户的时间轴中。例如，这有效

```
http://www.facebook.com/sharer/sharer.php?u=apple.com 
```

但是在下面的“你好”没有出现......使用“;amp”而不是“&”没有区别。

```
http://www.facebook.com/sharer/sharer.php?u=apple.com&t=hello 
```

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:40:48.150

使用`u`从页面中提取元数据，因为它出现在developers.facebook.com/tool/debug 下。

您可以尝试使用旧格式

`https://www.facebook.com/sharer/sharer.php?s=100&p%5Btitle%5D=hello&p%5Burl%5D=google.com`

# php - 不同链接上的不同 Jquery 悬停弹出 div

> ID：13236108
> 
> 赞同：0
> 
> 时间：2012-11-05T16:21:35.770
> 
> 标签：php, javascript, jquery, popup, hover

我有一个 php for 循环，它从 Json 对象中查找数据，并根据这些信息创建不同的 div 和不同的链接：

```
echo $remoteTownFB . " - " . 
  "<a href=\"#\" id=" . $remoteTownFB . "_trigger>" .$eventName . "</a></br>"; 
```

之后，我编写了一个 Java 脚本来创建不同的 div（具有不同的名称），它应该在鼠标悬停时弹出（使用 Jquery 脚本）

```
<script type="text/javascript">
var samplediv = document.createElement('div');
samplediv.id = '<?php echo $remoteTownFB . "_info" ?>';
var txt = document.createTextNode("Informationen über: <?php echo $eventName?>");
document.getElementById('pop-up').appendChild(samplediv);
document.getElementById('pop-up').appendChild(txt);
</script> 
```

我的问题现在是 Jquery 脚本。我在每个城镇名称所在的阵列上进行了尝试`$.each`，但我无法弄清楚。这是我的基地：

```
$(function() {
  var moveLeft = 20;
  var moveDown = 10;

  $('a#trigger').hover(function(e) {
      $('div#pop-up').show().;
    }, function() {
      $('div#pop-up').hide();
    }
  );

  $('a#trigger').mousemove(function(e) {
    $("div#pop-up").css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft);
  });

}); 
```

有什么帮助或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:48:38.180

首先你忘了关闭 id-property：

```
echo $remoteTownFB . " - " . 
"<a href=\"#\" id=" . $remoteTownFB . "_trigger\">" .$eventName . "</a></br>"; 
```

然后，要使弹出窗口正常工作，您可以尝试：

```
<script type="text/javascript">
var samplediv = document.createElement('div');
samplediv.id = '<?php echo $remoteTownFB . "_info" ?>';
samplediv.style.display = 'none';
var txt = document.createTextNode("Informationen über: <?php echo $eventName?>");
samplediv.appendChild(txt);
document.getElementById('pop-up').appendChild(samplediv);    
</script> 
```

jquery 部分将是：

```
<script type="text/javascript">
$(function() {
    $('a[id$="_trigger"]').hover(
        function() {
            var targetSelector = '#' + this.getAttribute('id').replace('_trigger', '_info');
            $('#pop-up, ' + targetSelector).show();
        }, 
        function() {
            var targetSelector = '#' + this.getAttribute('id').replace('_trigger', '_info');
            $('#pop-up, ' + targetSelector).hide();
        }
    );
});
</script> 
```

我不太确定你想用这个`mousemove`电话做什么，所以我就不管了。

# sql-server - Windows 无法在本地计算机上启动 SQL Server Express

> ID：13236110
> 
> 赞同：1
> 
> 时间：2012-11-05T16:21:36.157
> 
> 标签：sql-server, sql-server-express

我明天有一个 SQL 考试，我不知道该怎么做，我需要尽快帮助。这是我得到的错误：

![打印屏幕](../Images/14427687f1d0488c53c33143cf8e8ca1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:46:48.040

您的`master`数据库已损坏。您必须从备份中恢复一个，或重新安装 sqlexpress。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:27:26.677

在 cmd C:\Windows\System32\eventvwr.exe 中运行它

这将打开事件查看器。在那里，您将找到有关 SQL 未启动原因的更多详细信息。仅从您发送的屏幕截图中无法判断。错误代码 3417 有点笼统，因此请在从日志中获取错误代码后粘贴该错误的完整详细信息。

# javascript - 链接到 Windows 应用商店中的应用

> ID：13236111
> 
> 赞同：0
> 
> 时间：2012-11-05T16:21:43.697
> 
> 标签：javascript, html, windows-8

我已经为 Windows 应用商店创建了一些应用程序，并希望在我的关于页面中提供一个链接，以便用户可以直接进入我在 Windows 8 应用商店中的其他应用程序的下载页面，从而方便查找我的应用程序。知道怎么做吗？我正在使用 HTML5/Javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:31:34.780

您必须使用 ms-windows-store 协议，在我的情况下，我通过查看商店网页预览来做到这一点：

[http://apps.microsoft.com/webpdp/hr-HR/app/coolinarika/b44b0383-dc60-430c-9461-58b2ada70042](http://apps.microsoft.com/webpdp/hr-HR/app/coolinarika/b44b0383-dc60-430c-9461-58b2ada70042)

如果您查看 url 构造如下的来源：

> ms-windows-store:PDP?PFN=

然后添加应用程序 ID，我的情况是这样的：

> ms-windows-store:PDP?PFN=WebMarketing.Coolinarika_tp6yaakah33yj

尝试将上面的链接复制/粘贴到 IE 中，它将使用我们的应用程序打开 Windows 商店。

这是一个官方的方法：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh974767.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974767.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T10:51:00.177

在这里，您可以找到如何从您的应用程序中链接到商店的说明：

[http://www.win8tutorial.net/windows-store/link-programmatically-to-store/](http://www.win8tutorial.net/windows-store/link-programmatically-to-store/)

问候

基督教

# php - Magento 显示特定当前父类别 PHP 的子类别

> ID：13236112
> 
> 赞同：1
> 
> 时间：2012-11-05T16:21:54.717
> 
> 标签：php, magento, categories

我正在尝试在我的商店中展示品牌。我同时销售男装和女装，所以我有两个独立的品牌类别。

我的类别结构如下所示：

男士品牌 x 品牌 女士品牌 y 品牌

我想展示产品的品牌。

我找到了这段代码：

```
$children = Mage::getModel('catalog/category')->getCategories(10);
foreach ($children as $category) {
    echo $category->getName();
} 
```

但是，它仅适用于一个类别，并显示父类别中的所有子类别，而不是产品拥有的子类别。

如何修改它以显示当前品牌类别的子类别。

我希望这是有道理的，我感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:22:26.873

显示给定类别的子类别列表

```
$_category = Mage::registry('current_category');

$subcategories = Mage::getModel('catalog/category')->getCategories($_category->getId());

foreach ($subcategories as $subcategory){
     print_r($subcategory->getData()
} 
```

查看更多[@Magento：显示子类别列表](https://stackoverflow.com/questions/1820012/magento-display-sub-category-list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T21:28:42.217

老问题很老了，但我想我会插话，因为这个问题没有得到回答，其他人可能会觉得这很有用..

所以，首先，这段代码依赖于产品列表循环，即：

```
$_productCollection=$this->getLoadedProductCollection();
foreach ($_productCollection as $_product) {
    *... your product list output here ...*
} 
```

其次，此代码取决于使用“BRANDS”作为 Magento 根类别的子类别（无论它被称为什么）的设置，并且每个品牌名称都被设置为“BRANDS”子类别的子类别. 您可能需要在下面的代码中增加该猫的名称或更改您的类别结构以匹配我的。

因此，在 app/design/frontend/your-package/your-theme/template/catalog/product/list.phtml 中已经设置的“ProductCollection”循环中，您可以放置​​此代码段以呼应品牌名称。

```
$categories = $_product->getCategoryCollection()
                       ->addAttributeToSelect('name')
                       ->addAttributeToFilter('is_active', array('eq' => 1));

foreach($categories as $category) {
    $catID = $category->getId();
    $catParent = Mage::getModel('catalog/category')->load($catID)
                                                   ->getParentCategory();
    if ( $catParent->getName() == 'BRANDS' ) {
        echo '<a href="'.$category->getUrl().'">'.$category->getName().'</a>';
    }
} 
```

额外编辑：添加代码以将品牌名称包装在品牌类别页面的链接中。

# java - 在 Java 注释处理器中获取环境变量

> ID：13236114
> 
> 赞同：1
> 
> 时间：2012-11-05T16:22:00.713
> 
> 标签：java, annotations, websocket, environment-variables, javac

我正在尝试在 Windows 上的注释处理器中打开一个 http 套接字，并得到以下堆栈跟踪：

```
java.net.SocketException: Unrecognized Windows Sockets error: 10106: create
    at java.net.Socket.createImpl(Socket.java:397)
    at java.net.Socket.connect(Socket.java:527)
    at java.net.Socket.connect(Socket.java:478)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
... 
```

我稍微调查了一下这个错误，似乎可能是因为注释处理器（通过 javac 运行）无法访问环境变量，例如 SystemRoot。我通过从我的注释处理器调用来测试`System.getenv("SystemRoot")`它，它返回 null。在正常代码中，它`C:\Windows`按预期返回。

有没有办法将环境变量传递给javac？甚至以编程方式设置它们，尽管我怀疑这是邪恶的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T09:00:29.697

Java 工具集现在包含在 Java 的运行时中。如果您想使用 设置 Java 变量`-D`，您所要做的就是从您自己的应用程序中调用这些工具。然后，您可以传递`-Dmy.variable="hello world"`给`java`而不是`javac`.

# javascript - 将javascript数组发送到服务器

> ID：13236115
> 
> 赞同：7
> 
> 时间：2012-11-05T16:22:02.723
> 
> 标签：javascript, jquery, ajax

我有一个数组，我想在我的服务器上获取其内容。我一直在浏览互联网页面，试图找到如何做到这一点，但尚未成功。

假设我有一个服务器，我希望我的 javascript 中的这个数组进入我服务器上的一个文件，我该怎么做？

我一直在浏览互联网页面寻找如何做到这一点，我想出了以下代码：

```
<html>
    <!-- installs jquery and ajax. -->
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script>
        var arr = ["one","two","three"];
        arr = JSON.stringify(arr);

        $.ajax({
            url: "http://url_name_here.com",
            type: "POST",
            data: {
                myArray : arr
            }
        });

        alert('hello');
    </script>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T16:24:46.693

那是一个数组，不需要对其进行字符串化，jQuery 会将数据转换为您的有效查询字符串

```
var arr=["one","two","three"];

$.ajax({
    url: "/urltoMyOwnSite.php",
    type: "POST",
    data: {myArray : arr}
}); 
```

PHP（如果这是你正在使用的）

```
$array = $_POST['myArray']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:44:52.743

# 前端的东西

```
<html>
    <!-- installs jquery and ajax. -->
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script>
    $(function(){
     var arr = ["one","two","three"];
        arr = JSON.stringify(arr);

        $.ajax({
            url: "http://url_name_here.com",
            type: "POST",
            data: {
                myArray : arr
            }
        }).done(function(data,text,jQxhr){
       alert("success");
    });
});
    </script>
</html> 
```

# 后端服务器（java b/c 这是我在 dev atm 中打开的）

```
 import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    import java.io.IOException;
    import org.json.simple.JSONObject;
    import java.nio.ByteBuffer;
    import java.nio.channels.FileChannel;
    import java.io.FileOutputStream;

    public class MyServlet extends HttpServlet
    {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException,
                IOException
        {
            JSONObject jsonObj = (JSONObject) org.json.simple.JSONValue.parse(request.getParameter("myArray"));
           // write out your file IO.
JSONObject jsonObj = (JSONObject) org.json.simple.JSONValue.parse(request.getParameter("myArray"));
        FileOutputStream file = new FileOutputStream(java.io.File.createTempFile("myArray-",Long.toString((new Date()).getTime())));
        FileChannel fc = file.getChannel();
        ByteBuffer sw = ByteBuffer.allocate(jsonObj.toJSONString().length());
        sw.clear();
        sw.put(jsonObj.toJSONString().getBytes());
        sw.flip();

        while(sw.hasRemaining()) {
            fc.write(sw);
        }
fc.close();
//because its much easier than a flat file, we can write it back in the server response.
        org.json.simple.JSONValue.writeJSONString(jsonObj, response.getWriter());
        }

    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException,
                IOException
        {
            doGet(request, response);
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:25:57.693

jQuery 将为您对数组进行字符串化，因此您在示例中有效地对其进行了两次编码，这导致了您的问题。试试这个：

```
var arr = ["one","two","three"];
$.ajax({
    url: "http://url_name_here.com",
    type: "POST",
    data: { myArray : arr }
}); 
```

# c# - 实体框架，更新相关对象的问题

> ID：13236116
> 
> 赞同：62
> 
> 时间：2012-11-05T16:22:03.927
> 
> 标签：c#, entity-framework, ef-code-first

我目前正在使用最新版本的 Entity Framework 开发一个项目，但遇到了一个似乎无法解决的问题。

在更新现有对象时，我可以相当轻松地更新对象属性，直到涉及到一个引用另一个类的属性。

在下面的示例中，我有一个名为 Foo 的类，它存储各种属性，其中 2 个是其他类的实例

```
public class Foo
{
     public int Id {get; set;}
     public string Name {get; set;}
     public SubFoo SubFoo {get; set}
     public AnotherSubFoo AnotherSubFoo {get; set}
} 
```

当我使用下面的`Edit()`方法时，我传入了我希望更新的对象，并且我可以设法`Name`正确更新，但是我还没有设法找到一种方法来改变 SubFoo 的属性。例如，如果`SubFoo`该类具有 , 的属性`Name`，并且该属性已更改并且在我的 DB 和 之间有所不同`newFoo`，则它不会得到更新。

```
public Foo Edit(Foo newFoo)
{
    var dbFoo = context.Foo
        .Include(x => x.SubFoo)
        .Include(x => x.AnotherSubFoo)
        .Single(c => c.Id == newFoo.Id);

    var entry = context.Entry<Foo>(dbFoo);
    entry.OriginalValues.SetValues(dbFoo);
    entry.CurrentValues.SetValues(newFoo);

    context.SaveChanges();

    return newFoo;
} 
```

任何帮助或指示将不胜感激。

更新：根据 Slauma 的评论，我将方法修改为

```
public Foo Edit(Foo newFoo)
{
    var dbFoo = context.Foo
        .Include(x => x.SubFoo)
        .Include(x => x.AnotherSubFoo)
        .Single(c => c.Id == newFoo.Id);

    context.Entry(dbFoo).CurrentValues.SetValues(newFoo);
    context.Entry(dbFoo.SubFoo).CurrentValues.SetValues(newFoo.SubFoo);

    context.SaveChanges();

    return newFoo;
} 
```

现在运行它时，我收到错误：

> 实体类型 Collection`1 不是当前上下文模型的一部分。

为了尝试解决这个问题，我添加了代码来尝试将`newFoo`子类附加到上下文，但是这是通过一个错误说`ObjectManager`已经有一个相同的实体：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-05T17:29:28.990

`CurrentValues.SetValues`仅更新标量属性但不更新相关实体，因此您必须对每个相关实体执行相同操作：

```
public Foo Edit(Foo newFoo)
{
    var dbFoo = context.Foo
                       .Include(x => x.SubFoo)
                       .Include(x => x.AnotherSubFoo)
                       .Single(c => c.Id == newFoo.Id);

    context.Entry(dbFoo).CurrentValues.SetValues(newFoo);
    context.Entry(dbFoo.SubFoo).CurrentValues.SetValues(newFoo.SubFoo);
    context.Entry(dbFoo.AnotherSubFoo).CurrentValues.SetValues(newFoo.AnotherSubFoo);

    context.SaveChanges();

    return newFoo;
} 
```

如果可以完全删除或创建关系，您还需要明确处理这些情况：

```
public Foo Edit(Foo newFoo)
{
    var dbFoo = context.Foo
                       .Include(x => x.SubFoo)
                       .Include(x => x.AnotherSubFoo)
                       .Single(c => c.Id == newFoo.Id);

    context.Entry(dbFoo).CurrentValues.SetValues(newFoo);
    if (dbFoo.SubFoo != null)
    {
        if (newFoo.SubFoo != null)
        {
            if (dbFoo.SubFoo.Id == newFoo.SubFoo.Id)
                // no relationship change, only scalar prop.
                context.Entry(dbFoo.SubFoo).CurrentValues.SetValues(newFoo.SubFoo);
            else
            {
                // Relationship change
                // Attach assumes that newFoo.SubFoo is an existing entity
                context.SubFoos.Attach(newFoo.SubFoo);
                dbFoo.SubFoo = newFoo.SubFoo;
            }
        }
        else // relationship has been removed
            dbFoo.SubFoo = null;
    }
    else
    {
        if (newFoo.SubFoo != null) // relationship has been added
        {
            // Attach assumes that newFoo.SubFoo is an existing entity
            context.SubFoos.Attach(newFoo.SubFoo);
            dbFoo.SubFoo = newFoo.SubFoo;
        }
        // else -> old and new SubFoo is null -> nothing to do
    }

    // the same logic for AnotherSubFoo ...

    context.SaveChanges();

    return newFoo;
} 
```

`Modified`如果关系已更改，您最终还需要设置附加实体的状态*以及*标量属性。

**编辑**

如果 - 根据您的评论 -`Foo.SubFoo`实际上是一个集合而不仅仅是一个参考，您将需要这样的东西来更新相关实体：

```
public Foo Edit(Foo newFoo)
{
    var dbFoo = context.Foo
                       .Include(x => x.SubFoo)
                       .Include(x => x.AnotherSubFoo)
                       .Single(c => c.Id == newFoo.Id);

    // Update foo (works only for scalar properties)
    context.Entry(dbFoo).CurrentValues.SetValues(newFoo);

    // Delete subFoos from database that are not in the newFoo.SubFoo collection
    foreach (var dbSubFoo in dbFoo.SubFoo.ToList())
        if (!newFoo.SubFoo.Any(s => s.Id == dbSubFoo.Id))
            context.SubFoos.Remove(dbSubFoo);

    foreach (var newSubFoo in newFoo.SubFoo)
    {
        var dbSubFoo = dbFoo.SubFoo.SingleOrDefault(s => s.Id == newSubFoo.Id);
        if (dbSubFoo != null)
            // Update subFoos that are in the newFoo.SubFoo collection
            context.Entry(dbSubFoo).CurrentValues.SetValues(newSubFoo);
        else
            // Insert subFoos into the database that are not
            // in the dbFoo.subFoo collection
            dbFoo.SubFoo.Add(newSubFoo);
    }

    // and the same for AnotherSubFoo...

    db.SaveChanges();

    return newFoo;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T02:38:31.513

只是想我会发布下面的链接，因为它真的帮助我了解如何更新相关实体。

[在asp net mvc应用程序中使用实体框架更新相关数据](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

注意：我确实稍微更改了 UpdateInstructorCourses 函数中显示的逻辑以满足我的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T04:17:10.390

您也可以独立调用表格

```
MyContext db = new MyContext
// I like using asynchronous calls in my API methods 
var OldFoo = await db.Foo.FindAsync(id);
var OldAssociateFoo = db.AssociatedFoo;  
var NewFoo = OldFoo;
var NewAssociatedFoo = OldAssociatedFoo;

NewFoo.SomeValue = "The Value";
NewAssociatedFoo.OtherValue = 20;

db.Entry(OldFoo).CurrentValues.SetValues(NewFoo);
db.Entry(OldAssociatedFoo).CurrentValues.SetValues(NewAssociatedFoo);

await db.SaveChangesAsync(); 
```

# c++ - 如何在 C++ (Linux/Win) 中跨平台远程过程调用

> ID：13236119
> 
> 赞同：2
> 
> 时间：2012-11-05T16:22:11.697
> 
> 标签：c++, linux, windows, cross-platform, rpc

我希望 linux 主机上的一个应用程序从 VM 中 Win7x64 上的应用程序调用过程。我猜VM在linux主机上运行并不重要，因为它应该使用套接字。如何处理这个计划？互联网上有任何图书馆吗？

**编辑：**

好吧，我看了看所有这些。XMLRPC 似乎是 SOAP 的某种前身。在我看来，Prototbuf 喜欢专注于大对象的简单序列化。所以我的决定落在了 SOAP 上。但现在我正在寻找一个好用的 c++ 绑定。我阅读了 apache axis2 手册的几页，但其他所有内容都很好用，而且无论如何都是用 C 语言编写的。

在我的具体情况下的另一个问题是：发送一些文本数字和参数以识别以文本形式调用和回复的程序，因为我知道被调用程序的签名，是否更容易发送？

**Edit2：** 由于 SOAP 只是一个标准，而 RPC 只是好奇，（想象一下类似 IP 上的函数指针：D），恕我直言，它们都不是解决方案。但是 ZeroMQ 确实是一个进步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:04:57.773

RPC 没有魔法。我建议看看 ZeroMQ 和[Google protobuf](http://code.google.com/p/protobuf/)的组合。ZeroMQ 是一个非常易于使用的消息传递系统（您的通信层）。您将使用[REQ/REP 模式](http://zguide2.zeromq.org/cpp%3ahwclient)。Google protobuf 用于描述和序列化/反序列化您的消息。这两个库都是跨平台的，甚至是跨语言的（ruby、python、c++ 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:10:28.823

一个不错的替代方案是 XMLRPC，它运行在 HTTP 之上。至少它比 SOAP 简单。我用它来进行 Java-Python 通信，当时代码不多，但不知道有什么 C++ 库可以推荐，所以我就说[http://en.wikipedia.org/wiki/XML- RPC](http://en.wikipedia.org/wiki/XML-RPC)及其 C++ 部分。

编辑后编辑问题：对于一个非常简单的解决方案，只需使用普通 HTTP，将请求路径映射到函数并使用 GET 或 POST 提供参数。尽可能简单地返回 HTTP 响应数据中的值：数字或字符串的纯文本，对于更复杂的返回值，如果可以确保二进制兼容性，则返回二进制 blob（相同的 CPU、相同的字长、普通结构，如果使用编译器结构打包选项需要），或者作为 json（甚至是 XML，但是你开始重新发明 SOAP/XMLRPC ......）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:53:19.087

你看过[SOAP](http://en.wikipedia.org/wiki/SOAP)吗？它有利有弊，但可能会满足您的需求。

您的 Windows 机器是虚拟机这一事实应该不会有什么不同，只要它已启动并正在运行，并且只要您选择的系统通常将服务器视为逻辑上独立的套接字，您的解决方案将保持灵活。

# android - 如何在android中使grid-view水平滚动

> ID：13236123
> 
> 赞同：35
> 
> 时间：2012-11-05T16:22:32.930
> 
> 标签：android, android-layout

我已经为 gridview 编写了代码，我可以在其中显示图像和文本，但我想在单个可滚动行中显示所有图像，例如 Pulse 新闻应用程序。我已经在 xml 中为 gridview 实现了水平滚动视图，但它根本不起作用。我正在将 pageviwer 用于选项卡，并且正在使用片段。

这是我的xml代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
   <HorizontalScrollView 
   android:id="@+id/horizontalScrollView1" 
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content"
   android:fillViewport="true"
   android:scrollbars="horizontal" >
<GridView
    android:layout_width="500dp"
    android:layout_height="400dp"
    android:id="@+id/gridview"
    android:columnWidth="300dp"
    android:numColumns="3"
    android:horizontalSpacing="10dp"
    android:scrollbars="horizontal">
</GridView>
 </HorizontalScrollView>
</RelativeLayout> 
```

这是我的图像适配器代码

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] mobileValues;
private TextView t;
public ImageAdapter(Context context, String[] mobileValues) {
    this.context = context;
    this.mobileValues = mobileValues;
}
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View gridView;
    if (convertView == null) {
        gridView = new View(context);
        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.showlist_item, null);
       // set value into textview
        TextView textView = (TextView) gridView
                .findViewById(R.id.grid_item_label);
        textView.setText(mobileValues[position]);
        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);
        String mobile = mobileValues[position];
        if (mobile.equals("Windows")) {
            imageView.setImageResource(R.drawable.test_play_image);
        } else if (mobile.equals("iOS")) {
            imageView.setImageResource(R.drawable.test_play_image);
        } else if (mobile.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.test_play_image);
        } else {
            imageView.setImageResource(R.drawable.test_play_image);
        }
    } else {
        gridView = (View) convertView;
    }
    return gridView;
}
private void clickedButton(TextView tv){
    int num = Integer.parseInt(tv.getText().toString());
    ++num;
    tv.setText(Integer.toString(num));
}
private void clickedButtonm(TextView tv){
    int num = Integer.parseInt(tv.getText().toString());
    if(num>0){
        --num;
        tv.setText(Integer.toString(num));
    }
}
public int getCount() {
    return mobileValues.length;
}
public Object getItem(int position) {
    return null;
}
public long getItemId(int position) {
    return 0;
}
class MyOnClickListener implements OnClickListener{
    public final TextView tv;
    public MyOnClickListener(TextView tv){
        this.tv=tv;
    }
    public void onClick(View v) {
        // TODO Auto-generated method stub
        clickedButton(tv);
    }
}
class MyOnClickListenerm implements OnClickListener{
    public final TextView tv;
    public MyOnClickListenerm(TextView tv){
        this.tv=tv;
    }
    public void onClick(View v) {
        // TODO Auto-generated method stub
        clickedButtonm(tv);
    }
} 
```

我想像这样向右滚动显示。 ![在此处输入图像描述](../Images/49ec852d5c1a74d63d6e90c2c93cbfe2.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-10-27T16:29:34.917

从现在开始，Android 中有一个很好的解决方案（正如 Zainodis 在[其评论](https://stackoverflow.com/questions/13236123/how-to-make-grid-view-horizontally-scrollable-in-android/13322441#comment51499159_13322441)中所说）： Horizo [​​ntalGridView](http://developer.android.com/reference/android/support/v17/leanback/widget/HorizontalGridView.html)。

## 1\. Gradle依赖

```
dependencies {
    compile 'com.android.support:leanback-v17:23.1.0'
} 
```

* * *

## 2\. 将其添加到您的布局中

**your_activity.xml**

```
<!-- your stuff before... -->
        <android.support.v17.leanback.widget.HorizontalGridView
            android:layout_width="wrap_content"
            android:layout_height="80dp"
            android:id="@+id/gridView"
            />
<!-- your stuff after... --> 
```

* * *

## 3.布局网格元素

为您的网格元素 ( **grid_element.xml** ) 创建一个布局。我创建了一个简单的，其中只有一个按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="New Button"
        android:id="@+id/button" />
</LinearLayout> 
```

* * *

## 4\. 创建适配器

深受此链接的启发：[https ://gist.github.com/gabrielemariotti/4c189fb1124df4556058](https://gist.github.com/gabrielemariotti/4c189fb1124df4556058)

```
public class GridElementAdapter extends RecyclerView.Adapter<GridElementAdapter.SimpleViewHolder>{

    private Context context;
    private List<String> elements;

    public GridElementAdapter(Context context){
        this.context = context;
        this.elements = new ArrayList<String>();
        // Fill dummy list
        for(int i = 0; i < 40 ; i++){
            this.elements.add(i, "Position : " + i);
        }
    }

    public static class SimpleViewHolder extends RecyclerView.ViewHolder {
        public final Button button;

        public SimpleViewHolder(View view) {
            super(view);
            button = (Button) view.findViewById(R.id.button);
        }
    }

    @Override
    public SimpleViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        final View view = LayoutInflater.from(this.context).inflate(R.layout.grid_element, parent, false);
        return new SimpleViewHolder(view);
    }

    @Override
    public void onBindViewHolder(SimpleViewHolder holder, final int position) {
        holder.button.setText(elements.get(position));
        holder.button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Toast.makeText(context, "Position =" + position, Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public int getItemCount() {
        return this.elements.size();
    }
} 
```

* * *

## 5.在你的活动中初始化它：

```
private HorizontalGridView horizontalGridView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_activity);
    horizontalGridView = (HorizontalGridView) findViewById(R.id.gridView);
    GridElementAdapter adapter = new GridElementAdapter(this);

    horizontalGridView.setAdapter(adapter);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-21T10:37:32.567

```
 <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/seatLegendLayout">

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="match_parent">

                <LinearLayout
                    android:id="@+id/linearLayout_gridtableLayout"
                    android:layout_width="900dp"
                    android:layout_height="match_parent"
                    android:orientation="horizontal">

                    <GridView
                        android:id="@+id/gridView1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_margin="4dp"
                        android:columnWidth="100dp"
                        android:gravity="center"
                        android:numColumns="9"
                        android:horizontalSpacing="1dp"
                        android:scrollbarAlwaysDrawHorizontalTrack="true"
                        android:scrollbarAlwaysDrawVerticalTrack="true"
                        android:scrollbars="horizontal"
                        android:stretchMode="none"
                        android:verticalSpacing="1dp">

                    </GridView>

                </LinearLayout>
            </FrameLayout>
        </HorizontalScrollView> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-18T05:51:05.933

我在 github 上发现[Two-way GridView很有帮助。](https://github.com/jess-anders/two-way-gridview)

它有一些方法：

`scrollDirectionPortrait (vertical | horizontal)`

`scrollDirectionLandscape (vertical | horizontal)`

```
numRows() 
```

ETC

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-17T09:12:40.130

我已经测试了一个更好的更清洁的工作解决方案，没有任何额外的依赖项，只需更改您的布局 xml，如下所示。

```
 <HorizontalScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true">

    <android.support.v7.widget.RecyclerView
        android:id="@+id/horizontal_grid_view"
        android:layout_width="wrap_content"
        android:layout_height="112dp"
        android:scrollbarAlwaysDrawVerticalTrack="true"></android.support.v7.widget.RecyclerView>
</HorizontalScrollView> 
```

在分配网格布局管理器时，还可以根据您的要求设置跨度计数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-10T13:26:24.497

我不认为 gridviews 可以水平滚动。Android 已为此目的提供了 galleryView。你可以用那个。这是一个可以帮助您将galleryView作为水平gridview工作的thead：- [android gridview中的水平滚动](https://stackoverflow.com/questions/5418775/horizontal-scrolling-in-android-gridview)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-26T06:24:25.107

您可以将 recyclerView 用作 GridView，如果您觉得困难，则无需使用 GridView。看看下面

```
<androidx.recyclerview.widget.RecyclerView 
    android:id="@+id/rvQuickAccess"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:spanCount="2"
    android:gravity="center"
    android:orientation="horizontal"
    tools:listitem="@layout/layout_item"
    app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
    android:scrollbarAlwaysDrawHorizontalTrack="true"/> 
```

您可以通过 app:spanCount = " " 设置列数。不要忘记将 layoutManager 设置为 GridLayoutManager 和方向“Horizo​​ntal”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-22T17:22:40.143

[Justin(zzhouj)](https://github.com/zzhouj)的[Android-DraggableGridViewPager](https://github.com/zzhouj/Android-DraggableGridViewPager)库

提供以下功能

*   网格视图布局拆分为页面。
*   在 support-v4 库中水平滑动页面，如 ViewPager。
*   设置列和行数。
*   设置监听器：页面更改、项目点击、项目长按、重新排列。

帮助我创建了一个带有页面指示器的水平滚动网格，希望它可以帮助尝试实现类似功能的人。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-02-04T11:16:43.467

对于一小组数据，一个很好的方法是为您的容器使用如下布局：

```
<HorizontalScrollView
        android_id="@+id/scroll_view"
        android_width="match_parent"
        android_height="wrap_content">
    <LinearLayout
            android_id="@+id/my_list"
            android_width="wrap_content"
            android_height="wrap_content" >
    </LinearLayout>
</HorizontalScrollView> 
```

列表项的不同布局 (list_item.xml)：

```
<FrameLayout
        android_id="@+id/item_container"
        android_width="100dp"
        android_height="100dp">
    <ImageView
            android_id="@+id/item_background"
            android_width="match_parent"
            android_height="match_parent" />
    <TextView
            android_id="@+id/item_title"
            android_width="match_parent"
            android_height="50dp"
            android_background="#80000000"
            android_gravity="center_vertical" />
</FrameLayout> 
```

然后根据需要以编程方式添加视图：

```
public void addItensToLayout(String... mobileValues, LayoutInflater inflater) {
    LinearLayout list = (LinearLayout) findViewById(R.id.my_list);
    for (String item : mobileValues) {
        FrameLayout item = inflater.inflate(R.layout.list_item, list, false);
        TextView textView = (TextView) gridView
            .findViewById(R.id.item_title);
        textView.setText(item);
        ImageView imageView = (ImageView) item
            .findViewById(R.id.item_background);
        String mobile = mobileValues[position];
        if (mobile.equals("Windows")) {
            imageView.setImageResource(R.drawable.test_play_image);
        } else if (mobile.equals("iOS")) {
            imageView.setImageResource(R.drawable.test_play_image);
        } else if (mobile.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.test_play_image);
        } else {
            imageView.setImageResource(R.drawable.test_play_image);
        }
        list.addView(item);
    }
} 
```

通过这样做，您不再使用适配器。如果你真的需要使用适配器，你应该使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，在 android 文档中有很多这样做的信息，或者你可以从 StackOverflow 开始：

[在我的应用程序中使用 viewpager](https://stackoverflow.com/questions/8392520/using-viewpager-in-my-application) [android viewPager 实现](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

如果我错过了那里的任何一点，请询问更多信息。

# c++ - 如何实现一个最简单的 C++ 可调用对象包装器？

> ID：13236124
> 
> 赞同：4
> 
> 时间：2012-11-05T16:22:39.683
> 
> 标签：c++, c++11, function-pointers, functor

我想实现一个类 FuncWrapper，它的行为如下所示，但我发现它并不像预期的那么容易。

```
int OrdinaryFunction(int n)
{
    return n;
}

struct Functor
{
    int operator ()(int n)
    {
        return n;
    }
};

int main()
{
    FuncWrapper<int(int)> f1(OrdinaryFunction);
    cout << f1(1); // output 1;

    Functor functor;
    FuncWrapper<int(int)> f2(functor);
    cout << f2(2); // output 2;

    return 0;
} 
```

我的问题是：如何在 PURE C++（即没有 STL）中实现类 FuncWrapper 来编译代码？

我部分实施了 FuncWrapper，如下所示：

```
template<class T>
class FuncWrapper;

template<class ReturnType, class Parameter1>
class FuncWrapper<ReturnType(Parameter1)>
{
public:
    typedef ReturnType (*FunctionPtr)(Parameter1);

    template<class Functor>
    FuncWrapper(Functor fn) 
    {
        // ???
    }

    FuncWrapper(FunctionPtr fn)
        : fn(fn)
    {}

    ReturnType operator ()(Parameter1 p1)
    {
          return this->fn(p1);          
    }

private:
    FunctionPtr fn;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:08:36.260

好吧，你可能认为做你正在尝试的事情很简单，但它非常复杂。

在您的情况下，您希望能够添加一个仿函数以及一个实际函数，这使事情变得复杂。毕竟，如果您的类将构造函数用于称为 Functor 的仿函数，那么您将在哪里存储对象？

boost 在其共享指针类中用于存储删除器的一种方法是实际拥有一个基类和一个派生类。您的构造函数将构造一个派生自基类的对象（带有 new），然后您使用多态性来调用。

boost 在其函数和 binder / mpl 库中使用了各种巧妙的技术，但现在我建议你使用这个。

如果你真的反对使用 boost 或任何类型的共享指针，你将不得不管理这个对象的内存。（烦人，因为你希望你的外部类是可复制和可分配的）。

我将使它变得简单，并说我可以使用 shared_ptr。我现在也将简化签名。

作为大纲...

```
template< typename R, typename P > class FunctorBase
{
 public:
      virtual ~FunctorBase() {}
      virtual R call(P p) = 0;
};

template< typename R, typename P > class FunctionWrapper
{
     shared_ptr< FunctorBase< R, P > > impl;
  public:
     template< typename F > // a functor
     FunctionWrapper( Functor f )
     {
          // create appropriate impl for functors
     }

     FunctionWrapper( (R (func*)(P) )
     {
          // create appropriate impl for functions
     }

     R operator()( P p )
     {
          return impl->call(p);
     }
}; 
```

您的仿函数实现可能类似于：

```
template< typename R, typename P, typename F >
class FunctorImpl : public FunctorBase< R, P >
{
    F f;

   public: 
     FunctorImpl( F fparam ) : f( fparam )
     {
     }

     R call( P p )
     {
        return f( p );
     }
}; 
```

所以现在你看到了你可以在哪里存储仿函数..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:31:47.063

只需向您的仿函数添加一个构造函数，该构造函数接受指向函数的指针（带有您想要的函数签名）。将指针存储在函子中并从 operator() 执行指向的函数。

如果我对您的理解正确，您需要一个包装器，该包装器将为仿函数和函数公开类似函数的行为。在包装器中存储指向函子的指针，而不是指向函数的指针。以函子为参数的构造函数将把函子存储在里面。以 func 作为参数的构造函数将创建一个仿函数（就像我在答案中写的那样）并将其存储在里面。

# excel - 在 Excel 中提取前 10% 的列值并放在另一列中

> ID：13236127
> 
> 赞同：2
> 
> 时间：2012-11-05T16:22:52.273
> 
> 标签：excel, vba

我有一个 Excel 电子表格，其中有一列中的值。我需要的是一个 VBA 代码，它将识别前 10% 的列值，并将它们放在相邻的列中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T16:29:40.080

为什么不忽略 VBA 并使用 percentile 函数创建一个真假列并对其进行过滤。

例如。B2 中的值是否在 B 列中前 10% 的值中？

```
=B2>=PERCENTILE($B$2:$B$17,0.90) 
```

# c# - 使用 DetailView 中的选定 ID 作为参数

> ID：13236129
> 
> 赞同：0
> 
> 时间：2012-11-05T16:22:59.090
> 
> 标签：c#, asp.net

如果我在给定 ID 的表中找到 3 个“是”，那么我将发送一封电子邮件。因此，您可以看到下面的代码使用查询字符串作为参数并在我的选择语句中使用它，但我想要做的是在 DetailView 中使用选定的 ID 而不是查询字符串。这是使用查询字符串的代码：

```
protected void Check_ItemUpdated(object sender, DetailsViewUpdatedEventArgs e)
    {

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);

        SqlCommand cmd = new SqlCommand("SELECT count(*) from MyTable WHERE ID =@ID And (field1='Yes' And field2='Yes' And field3='Yes')", con);
        cmd.Parameters.Add("@ID", Request.QueryString["ID"]);
        cmd.Connection = con;
        con.Open();
        int result = (int)cmd.ExecuteScalar();

        if (result == 1)
        {
           send email...
        } 
```

这是我修改并尝试使用DetailView ID但无法正常工作的更新代码，我在这里做错了什么请帮助：

```
 protected void Check_ItemUpdated(object sender, DetailsViewUpdatedEventArgs e)
    {

        string ID = Detailview1.Rows[0].Cells[1].Text;
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        SqlCommand cmd = new SqlCommand("SELECT count(*) from MyTable WHERE ID =@ID And (field1='Yes' And field2='Yes' And field3='Yes')", con);
        cmd.Parameters.Add("@ID", SqlDbType.VarChar).Value = ID;

        cmd.Connection = con;
        con.Open();
        int result =(int) cmd.ExecuteScalar();

        if (result == 1)
        {
        send email...
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:31:09.613

看起来你总是在看同一行，在大多数情况下这是标题。

```
string ID = Detailview1.Rows[0].Cells[1].Text; 
```

取而代之的是，您应该使用事件的参数，例如`e`，如果您正确设置了所有内容，则可以通过`e.Keys`. 您可以在调试模式下检查它的值。

# c++ - 使用 cout 的向量运算符不匹配

> ID：13236131
> 
> 赞同：-3
> 
> 时间：2012-11-05T16:23:01.947
> 
> 标签：c++, cout

我写了一个程序，它应该只打印向量中的所有字符串。我正在使用迭代器。我得到的错误是：

```
no match for 'operator[]' in '((Students*)this)->Students::courses_[it]' 
```

这是我的代码：

```
#include <vector>
#include <string>
#include <iostream>
using namespace std;
#include "../include/Courses.h"
class Courses;

class Students {
private:
string name_;
int id_;

public:
vector<string> courses_;
void print_courses(){
    vector<string>::iterator it;
    for(it=courses_.begin();it < courses_.end(); it++)
            cout << this->courses_[it] << " ";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:24:57.647

迭代器指向向量的元素，您不使用它来索引向量。

```
for(it=courses_.begin();it < courses_.end(); it++) {
  cout << *it << " ";
} 
```

如果您有一个支持基于范围的`for`循环的 C++11 编译器，则可以使循环更简洁一些

```
for( auto const& c : courses ) {
  cout << c << " ";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:25:33.683

"it" 是一个迭代器，而不是一个索引。您需要将行更改为 -

```
cout << *it <<" " ; 
```

或者像这样循环遍历索引 -

```
for(int it=0; courses_.size(); ++it)
        cout << this->courses_[it] << " "; 
```

你不能混合这两种方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T16:24:17.153

你想说：`cout << *it << " ";`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T16:25:16.703

迭代器通过取消引用来使用，而不是通过将其提供给 operator[]。您的代码应该是：

```
void print_courses(){
    vector<string>::iterator it;
    for(it=courses_.begin();it < courses_.end(); it++)
            cout << *it << " ";
} 
```

operator[] 用于按数字索引向量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T16:24:25.883

你的意思：

```
cout << (*it) << " "; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T16:24:50.883

这是完全错误的。换行：

```
cout << this->courses_[it] << " "; 
```

至 ：

```
cout << *it << " "; 
```

或者，将整个 for 循环更改为：

```
for(vector<string>::size_type i=0; i<courses_.size(); ++i) {
  cout << this->courses_[i] << " ";
} 
```

# javascript - Javascript 光流实现

> ID：13236133
> 
> 赞同：5
> 
> 时间：2012-11-05T16:23:09.853
> 
> 标签：javascript, computer-vision, opticalflow

我正在寻找一种光流实现以在我的 html5 画布中的 Web 应用程序上运行，但没有找到立即可用的东西。如果我选择自己实现，是否有可能实现（接近）实时性能？

或者，由于在当前设置下，我实际上只是想知道主要光流是向左还是向右移动，有没有一些更简单的算法可以使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T20:36:55.620

我做了这个[小图书馆](https://github.com/anvaka/oflow)，它（我希望）正是你所要求的。

[一个演示](https://anvaka.github.io/oflow/demo/raw/index.html) ，它利用这个库通过移动你的手来控制球。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T09:18:34.303

我做了一个实时特征跟踪，可以生成稀疏的光流和点轨迹。它使用 asm.js，因此它在 firefox 上运行得更快（每 320x240 帧 50 毫秒 - 1500 点）

[www.ensta-paristech.fr/~garrigues/js_tracking/javascript_video_tracking.html](http://www.ensta-paristech.fr/~garrigues/js_tracking/javascript_video_tracking.html)

# linguistics - 有没有自动为短语/句子绘制树形结构的在线应用程序？

> ID：13236138
> 
> 赞同：15
> 
> 时间：2012-11-05T16:23:26.173
> 
> 标签：linguistics

即，它将任何句子/短语作为输入并**自动**计算出树形图。

我正在寻找一种方法来查看我不确定如何绘制其树结构的句子/短语的树结构。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T23:43:42.277

简而言之，是的。我假设您正在寻找解析英语：为此，您可以使用[Carnegie Mellon 的 Link Parser](http://www.link.cs.cmu.edu/link/submit-sentence-4.html)。

重要的是要记住，有*许多*句法理论可以给出完全不同的短语结构树；此外，每种语言的树都不同，并且这些语言可能不存在工具。

作为未来的说明：如果您需要解析出一个句子并将其标记为`linguistics`（`syntax`或者诸如此类，如果可用的话），有人可能会为您解析它并指导您完成它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-22T01:10:21.260

那里有很多选择。其中许多可作为可下载软件以及公共网站使用。我不认为他们中的许多人希望被用作 API，除非他们明确说明这一点。

我发现有效的是[Enju](http://www.nactem.ac.uk/enju/demo.html)，它没有 Marc 的 Carnagie Mellon 链接所具有的字符限制。Marc 在评论中还提到了 VISL 扫描仪，但这需要在浏览器中使用 java，这对我来说不是入门。

请注意，最近，Google 提供了一种新的[NLP 机器学习 API](https://cloud.google.com/natural-language/)，它提供了其他功能，即自动句子解析器。我可能不会再更新这个答案了，尤其是问题已经结束了，但我怀疑其他大型 ML 云堆栈很快就会支持同样的问题。

# powershell - 如何在 Hyper-V 3.0 版中使用 PowerShell 将 DHCP 服务器分配的 IP 分配给第一次启动虚拟机并附加 Sysprep vhd

> ID：13236140
> 
> 赞同：1
> 
> 时间：2012-11-05T16:23:33.763
> 
> 标签：powershell, hyper-v, powershell-3.0

我正在经历一个场景，我启动一个带有 sysprepped vhd 的新建虚拟机，一旦安装过程完成安装设备等并且操作系统被加载，我想等到整个过程完成并且虚拟机被分配一个 IP通过 DHCP 地址。

```
PS C:\Users\Administrator> Start-VM -Name dv.VMWIN2K8R2-3.Hng
PS C:\Users\Administrator> while ((Get-VM -Name dv.VMWIN2K8R2-3.Hng | select -ExpandProperty networkadapters).ipaddress[0] -match $null)

 {

 Start-Sleep 3

 Write-Host "Waiting to Acquire IP Address" -ForegroundColor green

 }

$ipaddress=(Get-VM -Name dv.VMWIN2K8R2-2.Hng | select -ExpandProperty networkadapters).ipaddresses[0]

Write-Host "VM has acquired an IPAddress of $ipaddress" 
```

我尝试了上面的代码片段，但 while 循环从未运行，我注意到当 VM 关闭时 ip 地址参数为空白，所以我想匹配它直到它显示 Null 并且当我启动 VM 并且一旦服务器获得 IP DHCP 的地址它应该退出 while 循环并在控制台上打印 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:26:02.840

IP 可能不为空，所以它正在做它应该做的事情。IP 可能是 169.254.xx，或者至少在我使用 DHCP 之前发生在我身上的事情。在它选择一个地址并使用它之后选择它应该具有的地址的第一个八位字节怎么样？

编辑：重新阅读您的帖子后，也许它不是我想的 169。我的建议仍然适用。尝试使用这样的东西： `While (!($ip -like "10.*")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:51:39.683

如果没有网络堆栈，就没有地址，我想你会发现数组不存在。克里斯走在正确的轨道上。我认为你不需要做你正在做的事情，而是首先测试 ipaddress 是否是一个属性，是一个数组，并且在检查该项目的值之前至少有一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:42:53.617

嗨，伙计们，我能够解决这个问题，我使用了 Get-VMNetworkAdapter Cmdlet，它解决了这个问题

```
while (((Get-VMNetworkAdapter $vmname | select -ExpandProperty ipaddresses) -eq $null -or ((Get-VMNetworkAdapter $vmname | select -ExpandProperty ipaddresses) -match "169.")))

{ 

Write-Progress -Activity "Waiting for VM to Aquire an IPAddress" 

} 
```

# ios - ios 下一个和上一个按钮

> ID：13236143
> 
> 赞同：0
> 
> 时间：2012-11-05T16:23:41.633
> 
> 标签：ios, nsarray

我有一个下一个按钮，当我到达数组的最后一个结果时我想消失，当我在数组的第一个结果时我希望我的上一个按钮消失。当只找到一个结果时，我已经想出了如何让它们消失。

联系人是数组。

下一个按钮：

```
 //button look
if (contacts != nil) { 
    if ([contacts count] > 1 ) [self.view addSubview:nextButton]; 
```

上一个按钮：

```
 //button look
if (contacts != nil) { 
    if ([contacts count] > 1 ) [self.view addSubview:previousButton]; 
```

我试过这个

```
if ([contacts count] < (index-1)) [self.view addSubview:nextButton]; 
```

我收到此错误“指针和整数之间的有序比较（'NSUInterger'（又名'unsigned int'）和'char *（*）（const char *，int）'）”按钮在那里它只是不会消失它得到了最后的结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:32:13.897

听起来 index 是一个`NSUInterger`. count 是一个 int 并且 NSUInteger 是 typedef 到无符号整数。尝试将索引更改为您将其设置为 int 或将其类型转换为您使用它进行比较的 int。

对于按钮的部分，如果您的逻辑是正确的并且您尝试从视图中删除“nextButton”，您可以像这样隐藏或从视图中删除它：

```
// To remove button
if ([contacts count] < (index-1)) [nextButton removeFromSuperview]; 
```

或者

```
//To hide button
if ([contacts count] < (index-1)) nextButton.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:47:35.697

你永远不会从 superView 中删除它，所以它永远不会消失。您应该使用按钮的隐藏属性，即

```
[nextButton setHidden:NO]; 
```

或者是，如果你想隐藏它。

错误可能来自索引实体，您是否将其键入为 NSUInterger？将其更改为 uint 或 int。（只是发布有点晚，但这已在其他答案中提到：D）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:48:46.817

```
if ([contacts objectAtIndex:[contacts count]-1])
 { 
    [self.view addSubview:nextButton];
}
if([contacts objectAtIndex:0)
{
 [self.view addSubview:previousButton];
} 
```

希望这会有所帮助... nil 只是告诉它没有更多的元素包含在数组中。你不能用它来检查..

# forms - CGI 脚本未在浏览器中显示结果

> ID：13236147
> 
> 赞同：1
> 
> 时间：2012-11-05T16:23:51.570
> 
> 标签：forms, perl, cgi

我正在尝试显示来自 infoblox 设备的一些信息。当我使用 html 帖子在浏览器中运行此代码时，显示 MAC 地址条目的表不显示来自 api 的值。当我在 unix 命令行中运行此代码时，变量会正确显示。有什么建议吗？

```
#!/usr/bin/perl

use strict;
use Infoblox;
use CGI;
my $cgi = new CGI;

print

$cgi->header() .

$cgi->start_html( -title => 'Form Results') .

$cgi->h1('Form Results') . "\n";

my @params = $cgi->param();
my $username = $cgi->param('username');
print '<table border="1" cellspacing="0" cellpadding="0">' . "\n";
foreach my $parameter (sort @params) {
print "<tr><th>$parameter</th><td>" . $cgi->param($parameter) . "</td></tr>\n";
}
print "</table>\n";
print "<p>$username</p>";

print $cgi->end_html . "\n";

#Create a session to the Infoblox appliance
my $session = Infoblox::Session->new(
    master   => "server",          #appliance host ip
    username => "username",          #appliance user login
    password => "password"           #appliance password
);

unless ($session) {
    die("Construct session failed: ",
    Infoblox::status_code() . ":" . Infoblox::status_detail());
}

print "Session created successfully\n<br>";

my @list = $session->get(
    object => "Infoblox::DHCP::MAC",
    filter => "macfilter",
);

my $nextobject = $list[0];

print <<EOF;
<br>
<table>
<tr>
<th>MAC</th>
<th>Description</th>
<th>UserID</th>
<th>Expiration</th>
</tr>
EOF

foreach my $test ( @list ) {

   print "<tr>";
   print "<td> $test->mac()</td>";
   print "<td>" . scalar($test->comment()) . "</td>\n";
   print "<td>" . scalar($test->username()) . "</td>\n";
   print "<td>" . scalar(localtime(scalar($test->expiration_time()))) . "</td>\n";
   print "</tr>";

}

exit (0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:07:40.393

我的权限不正确。该脚本以用户nobody 身份运行，并且不会在网页上正确显示项目。

# gwt - smartGWT 选项卡中的 CodeMirror-UI

> ID：13236156
> 
> 赞同：1
> 
> 时间：2012-11-05T16:24:16.747
> 
> 标签：gwt, smartgwt, codemirror

我有一个关于在 smartGWT 选项卡中集成 CodeMirror UI 的问题。

基本上，我无法在附加到 smartGWT 选项卡的 textarea 元素中显示 CodeMirror-UI 编辑器。这是我所做的：

1.  [我按照页面](https://github.com/jagthedrummer/codemirror-ui)上的描述安装了 CodeMirror-UI ，更正了路径以匹配我的项目的目录层次结构
2.  我在我的项目的主要 html 中写了一个 js 脚本（开头）：

    ```
    <head>
    ...
     <script>
      function fireEditor()
      {
       var textarea = window.document.getElementById('tab_editor' );
       var uiOptions = { path : 'codemirror-ui/js/', searchMode : 'inline' };
       var codeMirrorOptions = { mode: 'javascript' };
       var editor = new CodeMirrorUI(textarea,uiOptions,codeMirrorOptions);
      }
     </script>
    </head> 
    ```

3.  我在打开（smartGWT）选项卡时调用了脚本：

    ```
    // create a smartGWT tab
    Tab tab = new Tab("tab");
    tab.setID("tab");
    tab.setCanClose(true);

    // put the CodeMirror UI inside the smartGWT tab
    // create a smartGWT canvas
    Canvas tabContent = new Canvas();
    tabContent.setID("tabc");
    tabContent.setWidth100();
    tabContent.setHeight100();

    // use a GWT HTMLPanel to attach new html elements to the smartGWT canvas
    // and invoke the fireEditor() function to load the CodeMirror UI
    HTMLPanel editorContainer = new HTMLPanel(
     "<div id=\"editor_container\">"
     + "<textarea id=\"tab_editor\" style=\"width:100%;height:100%\" onload=\"fireEditor()\">"
     + "</textarea>"
     + "</div>");
    editorContainer.setWidth("100%");
    editorContainer.setHeight("100%"); 
    ```

从浏览器运行（我使用的是 firefox - iceweasel 10.0.10），这会导致 smartGWT 选项卡显示一个空的 textarea 元素。使用 firebug 检查，smartGWT 选项卡中的区域包含我在 HTMLPanel 中指定的 HTML，但没有显示 CodeMirror UI。

我错过了什么？

我正在使用 Eclipse Indigo，gwt 2.4.0、smartgwt 3.0p 和来自其 git repo（它本身使用 CodeMirror 2.3）的 codemirror ui 0.0.19。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:37:08.410

找到了解决方案。

首先，html textarea 元素没有“onload”事件，所以代码

```
 HTMLPanel editorContainer = new HTMLPanel(
    "<div id=\"editor_container\">"
    + "<textarea id=\"tab_editor\" style=\"width:100%;height:100%\" onload=\"fireEditor()\">"
    + "</textarea>"
    + "</div>"); 
```

只会在 HTMLPanel 中放置一个文本区域，而不调用“fireEditor()”。用“onclick”替换“onload”就可以了：一旦出现textarea元素，点击它，CodeMirrorUI也会出现。

问题：我需要自动可视化 CodeMirrorUI 界面，因此“onclick”方法没用。

为了完成这项任务，我需要以某种方式修改 smartGWT 选项卡的 DOM，将其内部 html 替换为 CodeMirrorUI 的 html。我发现这个文档很有帮助：[http ://www.smartclient.com/smartgwtee-latest/javadoc/com/smartgwt/client/docs/DomIntegration.html](http://www.smartclient.com/smartgwtee-latest/javadoc/com/smartgwt/client/docs/DomIntegration.html)

这是生成的代码：

1）我将 js 脚本保存在我项目的主 html 中（在头部）：

```
 <head>
    ...
    <script>
      function fireEditor()
      {
        var textarea = window.document.getElementById('tab_editor' );
        var uiOptions = { path : 'codemirror-ui/js/', searchMode : 'inline' };
        var codeMirrorOptions = { mode: 'javascript' };
        var editor = new CodeMirrorUI(textarea,uiOptions,codeMirrorOptions);
      }
    </script>
    </head> 
```

2）我按照上面提到的文档链接中的示例创建了一个新类-“MyEditor”：

```
 public class MyEditor extends Canvas {
       private String editor_id = null;

   private static native void replace(String editor) /*-{
          $wnd.fireEditor(editor);
   }-*/;

   public MyEditor(Integer num) {
          editor_id = "editor_" + num;
          setRedrawOnResize(false);
   }

   @Override
   public String getInnerHTML() {
          return "<textarea id=\"" + editor_id + "\"" + "style=\"width:100%;height:100%\"></textarea>";
   }

   @Override
   protected void onDraw() {
          MyEditor.replace(editor_id);
   }

    } 
```

3) 最后，我用 MyEditor 的实例填充了 smartGWT 选项卡：

```
 // create a smartGWT tab
    Tab tab = new Tab("tab");
    tab.setID("tab");
    tab.setCanClose(true);

    MyEditor editor = new MyEditor(tabNumber); // an integer number
    tab.setPane(editor); 
```

经测试。在职的。

# r - 负数的实立方根

> ID：13236158
> 
> 赞同：19
> 
> 时间：2012-11-05T16:24:17.973
> 
> 标签：r

我正在尝试查看是否有一个函数可以直接获取负数的真实立方根。例如，在[Java](https://stackoverflow.com/questions/8290804/cube-root-of-a-negative-number)中，有`Math.cbrt()`函数。我正在寻找 R 中的等价物。

否则，我目前的黑客是：

```
x <- -8
sign(x) * abs(x)^(1/3) 
```

每次打字都非常不优雅和麻烦。谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-05T17:29:53.227

听起来您只需要定义自己的`Math.cbrt()`功能。

这将使执行操作从不优雅和繁琐的操作转变为干净、富有表现力且易于应用的操作：

```
Math.cbrt <- function(x) {
    sign(x) * abs(x)^(1/3)
}

x <- c(-1, -8, -27, -64)

Math.cbrt(x)
# [1] -1 -2 -3 -4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:40:18.987

在 R 中，您可能需要定义一个将结果限制为您的目标的新函数：

```
> realpow <- function(x,rad) if(x < 0){ - (-x)^(rad)}else{x^rad}
> realpow(-8, 1/3)
[1] -2
> realpow(8, 1/3)
[1] 2 
```

如果您引用运算符并在其名称中使用环绕的“%”符号，则可以进行中缀操作。因为它的优先级很低，所以您需要使用括号，但您似乎已经知道这一点。

```
> `%r^%` <- function(x, rad) realpow(x,rad)
>  -8 %r^% 1/3
[1] -2.666667    # Wrong
> -8 %r^% (1/3)
[1] -2   #Correct 
```

同意将提问者的版本纳入其矢量化容量：

```
`%r^%` <- function(x, rad) sign(x)*abs(x)^(rad) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T16:30:59.583

在 Java 中是这样的：

```
There are 3 cube-roots. Assuming you want the root that is real, you should do this:

x = 8;  //  Your value

if (x > 0)
    System.out.println(Math.pow(x, 1.0 / 3.0));
else
    System.out.println(-Math.pow(-x, 1.0 / 3.0)); 
```

# python - 每次 Python 创建一个数字越来越大的列表

> ID：13236159
> 
> 赞同：8
> 
> 时间：2012-11-05T16:24:20.150
> 
> 标签：python, list, loops, while-loop

如何创建一个创建列表的函数，将每次包含的数字数量增加到指定值？

例如，如果最大值为 4，则列表将包含

```
1, 2, 2, 3, 3, 3, 4, 4, 4, 4 
```

很难解释我在寻找什么，但从这个例子中我想你会明白的！

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T16:32:27.550

我会使用[`itertools.chain`](http://docs.python.org/2/library/itertools.html#itertools.chain)：

```
itertools.chain(*([i] * i for i in range(1, 5))) 
```

或者[`itertools.chain.from_iterable`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)稍微懒一点：

```
itertools.chain.from_iterable([i] * i for i in range(1, 5)) 
```

* * *

对于终极懒惰，搭配[`itertools.repeat`](http://docs.python.org/2/library/itertools.html#itertools.repeat)-- （`xrange`在你使用 python2.x 时使用）：

```
import itertools as it
it.chain.from_iterable(it.repeat(i, i) for i in range(1, 5)) 
```

作为一个函数：

```
def lazy_funny_iter(n):
    return it.chain.from_iterable(it.repeat(i, i) for i in range(1, n+1))

def lazy_funny_list(n):
    return list(lazy_funny_iter(n)) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-05T16:27:10.807

一个嵌套循环。这将是一种非常基本的方法。有很多更好的方法，这应该给你一个大致的想法。

```
>>> def listmaker(num):
    l = []
    for i in xrange(1, num+1):
        for j in xrange(i):
            l.append(i)
    return l

>>> print listmaker(4)
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

这是用列表理解来做的：

```
>>> def listmaker2(num):
    return [y for z in [[x]*(x) for x in xrange(1, num+1)] for y in z]

>>> print listmaker2(4)
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

按照建议使用扩展。

```
>>> def listmaker3(num):
    l = []
    for i in xrange(1, num+1):
        l.extend([i]*(i))
    return l

>>> print listmaker3(4)
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-05T16:40:39.173

您可以使用递归函数：

```
def my_func(x):
    if x <= 0:
        return []
    else:
        return my_func(x-1) + [x] * x

>>> my_func(4)
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-05T16:27:52.240

```
In [1]: def funny_list(n):
   ...:     return sum(([i]*i for i in range(1, n+1)), [])
   ...: 

In [2]: funny_list(4)
Out[2]: [1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

但是，这不能变成真正的生成器，不像`itertools.chain`，这是规范的方式。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-05T16:49:11.823

对问题的不同看法（不太复杂）：

```
>>> a = range(1,5)
>>> for i in range(2,5):
...     a.extend(range(i,5))
... 
>>> print sorted(a) #Remove the sort if you don't need it
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-05T17:40:53.307

如图所示，创建列表的一种相当直接的方法是通过

```
[i for i in range(1,n+1) for j in range(i)] 
```

其中`n`是列表中出现的最大数字。以上相当于之前几个建议的答案中使用的方法，但表达方式稍微干净一些。

到目前为止提到的所有方法的替代方法是注意`i`列表的第 th 元素大约等于 的平方根的整数部分`2*i`。稍作调整，这使得一个相当简单的生成器成为可能，如下所示。

```
def gen_nnlist(nmax):
    n = 1
    while n < nmax*(nmax+1):
        yield int(n**.5+.5)
        n += 2 
```

以下是在 python 2.7.3 解释器中执行代码的一些示例输出：

```
>>> print [i for i in gen_nnlist(4)]
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4]
>>> print [i for i in gen_nnlist(6)]
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6]
>>> fun = gen_nnlist(3)
>>> for i in fun: print i
... 
1
2
2
3
3
3
>>> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-05T16:31:29.213

```
>>> list(''.join([str(x) * x for x in range(1, 5)])) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-05T19:00:06.220

我会用发电机：

```
>>> def growingSeq(maxN):
...     for n in range(1,maxN+1):
...         for _ in range(n):
...             yield n
... 
>>> growingSeq(4)
<generator object growingSeq at 0x1004db280>
>>> list(growingSeq(4))
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4] 
```

# postgresql - 空闲 PostgreSQL 连接是否有超时？

> ID：13236160
> 
> 赞同：112
> 
> 时间：2012-11-05T16:24:23.217
> 
> 标签：postgresql, database-connection

```
1 S postgres  5038   876  0  80   0 - 11962 sk_wai 09:57 ?        00:00:00 postgres: postgres my_app ::1(45035) idle                                                                                 
1 S postgres  9796   876  0  80   0 - 11964 sk_wai 11:01 ?        00:00:00 postgres: postgres my_app ::1(43084) idle 
```

我看到很多。我们正在尝试修复我们的连接泄漏。但与此同时，我们想为这些空闲连接设置一个超时时间，最长可能为 5 分钟。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-11-06T05:37:49.790

听起来您的应用程序中存在*连接泄漏，因为它**无法关闭池连接*。您不仅遇到`<idle> in transaction`会话问题，而且总体上连接太多。

杀死连接不是正确的答案，但它是一个不错的临时解决方法。

与其重新启动 PostgreSQL 以从 PostgreSQL 数据库引导所有其他连接，请参阅：[如何从 postgres 数据库中分离所有其他用户？](https://dba.stackexchange.com/q/6122/7788)如果有活动连接，[如何删除 PostgreSQL 数据库？](https://stackoverflow.com/questions/5408156/how-to-drop-a-postgresql-database-if-there-are-active-connections-to-it). 后者显示了更好的查询。

对于设置超时，正如@Doon 建议的那样，请参阅[如何自动关闭 PostgreSQL 中的空闲连接？](https://stackoverflow.com/q/12391174/398670)，它建议您使用 PgBouncer 来代理 PostgreSQL 并管理空闲连接。如果您有一个错误的应用程序无论如何都会泄漏连接，这是一个非常好的主意；我*非常强烈*推荐配置 PgBouncer。

[TCP keepalive](http://www.postgresql.org/docs/current/static/runtime-config-connection.html)在这里无法完成这项工作，因为应用程序仍然处于连接状态并处于活动状态，但它不应该如此。

在 PostgreSQL 9.2 及更高版本中，您可以使用新的`state_change`时间戳列和`state`字段`pg_stat_activity`来实现空闲连接收割机。让一个 cron 作业运行如下：

```
SELECT pg_terminate_backend(pid)
    FROM pg_stat_activity
    WHERE datname = 'regress'
      AND pid <> pg_backend_pid()
      AND state = 'idle'
      AND state_change < current_timestamp - INTERVAL '5' MINUTE; 
```

在旧版本中，您需要实现复杂的方案来跟踪连接何时空闲。不打扰; 只需使用 pgbouncer。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2017-01-24T01:09:11.220

在 PostgreSQL 9.6 中，有一个新选项[`idle_in_transaction_session_timeout`](https://www.postgresql.org/docs/9.6/static/runtime-config-client.html#GUC-IDLE-IN-TRANSACTION-SESSION-TIMEOUT)可以完成您所描述的。您可以使用[`SET`](https://www.postgresql.org/docs/current/static/sql-set.html)命令设置它，例如：

```
SET SESSION idle_in_transaction_session_timeout = '5min'; 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-05-16T08:22:01.560

在 PostgreSQL 9.1 中，空闲连接具有以下查询。它帮助我避免了需要重新启动数据库的情况。这主要发生在 JDBC 连接打开但未正确关闭的情况下。

```
SELECT
   pg_terminate_backend(procpid)
FROM
   pg_stat_activity
WHERE
   current_query = '<IDLE>'
AND
   now() - query_start > '00:10:00'; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-03-03T20:58:04.567

如果您使用的是 postgresql 9.6+，那么您可以在 postgresql.conf 中设置

`idle_in_transaction_session_timeout = 30000` *（毫秒）*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-06T12:21:46.230

断开连接（即由于网络错误）会超时，这取决于操作系统的 TCP keepalive 功能。默认情况下，在 Linux 上，断开的 TCP 连接会在大约 2 小时后关闭（请参阅 参考资料`sysctl net.ipv4.tcp_keepalive_time`）。

`idle_in_transaction_session_timeout`被放弃的事务和锁也有超时`lock_timeout`。建议将这些设置在`postgresql.conf`.

但是正确建立的客户端连接没有超时。如果客户端想要保持连接打开，那么它应该能够无限期地这样做。如果客户端正在泄漏连接（例如打开越来越多的连接并且从不关闭），则修复客户端。不要**尝试**在服务器端中止正确建立的空闲连接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-05T11:32:40.807

允许在没有外部计划任务的情况下启用数据库会话超时的可能解决方法是使用我开发的扩展[pg_timeout 。](https://pgxn.org/dist/pg_timeout/0.0.1/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-14T12:11:52.510

另一个选项是将此值设置为“tcp_keepalives_idle”。[在文档https://www.postgresql.org/docs/10/runtime-config-connection.html](https://www.postgresql.org/docs/10/runtime-config-connection.html)中查看更多信息。

# openssl - 将 .pem 转换为缓冲区并解密

> ID：13236161
> 
> 赞同：1
> 
> 时间：2012-11-05T16:24:23.980
> 
> 标签：openssl, aes, rsa

我正在研究专有的 AES 代码。但同时，我使用 OpenSSL 进行编码。我使用以下 Open SSL 命令对 RSA 密钥进行了编码：

```
openssl genrsa -out key.pem 1024 
```

这给了我一个*`key.pem`*包含“BEGIN”和“END”轶事的文件。我使用以下命令对文件进行编码：

```
openssl enc -aes-128-cbc -salt -in file.txt -out file.enc -pass file:./key.pem 
```

我想在我的代码中解码这个文件。我正在读取缓冲区中的密钥文件并尝试使用 AES 库进行解码，但它失败了。此外，我尝试使用同样失败的 Open SSL 解码命令。

成功解码：

```
openssl enc -d -aes-128-cbc -in file.enc -out file.txt -pass file:./key.pem 
```

解码失败（key.pem 文件的内容作为命令行中的缓冲区）：

```
openssl enc -d -aes-128-cbc -in file.enc -out file.txt -pass pass:"-----BEGIN RSA PRIVATE KEY-----
MIICWwIBAAKBgQDHYfNAzVcM8OVxUIF/Yek/ZvhRGHJIjbcWO/vVWUDJWzKCC2dP
KSeBnSRdFTjGKmowOUxpiKXdpKekc2CCRNiwjTykoNhm9K+un2yoj7pgtMoH1R4g
y8rviea3kXQGxAaHq5mi2XGZE7/LlEhEr7B/5UcntrU9B6sXXn0Pa9iRAQIDAQAB
AoGAf4hn0EuIIv7zxEd6jcBTMfrrWvQIJeB/+/jiXNV6W1G6PPSOYFQysPWTDPdG
GXuH8NC1z8tYTS3FDau/T5Q6BZM/T4/vIwjbLZfa1UpmzXB08kpUliUDwSZ6W4Be
uuZWyqvevqKBn/TO8DUfd684tL3O4m8q9o+n9JtqjaVYFAECQQDmFj6GfL6NdUZa
RKJVC/8WbAt/FKlkwIpXsKWD600Fj59oDC0ue9/hth9r3bCjPU1tAEy7Gfltd4bm
Fa7YbPL9AkEA3dZ0eI7v+c3P6/5R0yHsnZIlYPBBHWeSqp4FlASmj9i1cD8IOZ1g
7JKhlJVMC19vf647JCwJAl6H2exnH4BfVQJAL9280DmvYrpdEnZo1wyR2tZLZfqk
auNrZGbJaDJRabDBVuIBnEQFBW3gB46tKqicLOr9C4eRzmYpWEB2iWvQ+QJAPagI
USWxLyXz3yydQ2hPYnAnMW01O934lrE67avpO1vI+fya5aCHOtl6TVi9fP+2dq9P
Qrt2eZEagwhAlTHRzQJAdf6CGLVdgXWq+JyK6Yp3S9npd+YKJ3T0OJ0Qg9VlB+OQ
s/tlqQuXmj03ZxS9+e5pD0rZ9QvL7BtZ30hHYHOHCw== -----END RSA PRIVATE
KEY-----" 
```

我想知道如何将 .pem 文件放在缓冲区中，以便成功解码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:24:33.907

您在这里实际做的是使用 RSA 密钥，不是用于 RSA 加密或解密，而是**作为密码**。然后 OpenSSL 将使用密钥派生方案从“密码”创建一个 AES 密钥，并使用此密钥加密您的文本文件。

我想这不是你真正想要做的（例如，没有必要为此使用 RSA 密钥），但如果你的主要问题是如何使用缓冲区将文件的内容传递给 OpenSSL，你应该查找OpenSSL 文档的[PASS PHRASE ARGUMENTS](http://www.openssl.org/docs/apps/openssl.html#PASS_PHRASE_ARGUMENTS)部分。option`-pass stdin`参数意味着您可以在进程的标准输入流中传递“密码”。

# facebook-graph-api - 如何通过 addthis 服务确定共享成功

> ID：13236184
> 
> 赞同：2
> 
> 时间：2012-11-05T16:25:36.350
> 
> 标签：facebook-graph-api, share, addthis

我的一个客户希望在成员成功共享其站点的链接后立即在服务器端完成一些逻辑。问题是有些成员只是通过单击按钮打开共享对话框并在不共享的情况下关闭它。我试图将 eventListener 添加到事件类型“addthis.menu.share”，但是一旦通过单击服务图标打开对话框，就会触发此事件。它永远不会确定用户是否真的共享了链接，或者只是关闭打开的服务对话框而不共享。所以我的问题是有什么方法可以知道用户是否在分享后立即成功分享了链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:55:17.960

不幸的是，没有任何服务（FB、TW、G+ 等）提供任何类型的回调/响应来确定用户是否真正共享了页面。这使得无法知道共享是否实时发生。您可以使用来自 FB 等服务的 API：

[http://graph.facebook.com/http://www.addthis.com](http://graph.facebook.com/http://www.addthis.com)

要获取共享数量，或者您可以使用 AddThis 中的 Analytics API：

[http://support.addthis.com/customer/portal/articles/381264-addthis-analytics-api#.UJqEWeOe_L4](http://support.addthis.com/customer/portal/articles/381264-addthis-analytics-api#.UJqEWeOe_L4)

我希望这有帮助。

# java - 无法在eclipse上安装saifin

> ID：13236185
> 
> 赞同：0
> 
> 时间：2012-11-05T16:25:39.633
> 
> 标签：java, java-ee-6

我正在尝试在 IDE eclipse Juno 下使用 Java 构建会议应用程序。我认为可以帮助我的 API 是sailfin。但是每当我尝试安装它时，它都不会创建他应该创建的sailfin 目录。因此我无法继续，仍然停留在那个点。我安装了最新版本的 ant 并根据教程设置了所有内容，但仍然无法正常工作。如果有人以前有过想法或遇到过同样的困难，如果您能给我提供一些关于如何解决这种情况的见解/想法或建议我可以使用的另一个 API，我将不胜感激。

提前感谢您的所有贡献和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:31:27.150

我在 2009 年为工程项目实现了智能 sip 服务器，当时我也尝试使用 eclipse 运行sailfinn，但未能成功。所以我用 NETBEANS 完成了项目。NETBEANS 很好，因为 glassfish 是嵌入式服务器，而sailfinn 依赖于 glassfish 架构。试试 Netbeans。

# java - 在位于超类中的另一个方法中调用带有参数的方法

> ID：13236186
> 
> 赞同：0
> 
> 时间：2012-11-05T16:25:47.343
> 
> 标签：java, math

我想知道如何在 getToD 中调用 getJD() 并保持参数不变，（或临时将参数设置为 main 中的变量并将变量调用到方法中）。稍后将在 main 方法中使用扫描仪类输入参数。导入静态 java.lang.Math.*；

```
public class jdMethods
{
    public static double getJD(double y, double m, double d){
        if (m<=2.0){
            y--;
            m += 12.0;
        }
        double a=floor(y/100.0);
        return (365.25*(y+4716.0))+(30.6001*(m+1))+d+(2.0-a+floor(a/4.0))-1524.5;
    }

    public static double getToD(int h, int m, int s)
    {
        double a = getJD(a, a, a) + ((h-12)/24) + (m/1440) + (s/86400);
        return a;
    }
} 
```

为清晰起见进行了编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:40:42.717

所有这些参数都将是完整的，因为您正在使用`double`and `int`，它们不是`Object`s 所以它的值在传递给函数时被复制，不像`Object`s 对它的引用被传递给函数。

关于您的代码，未定义的变量`a`不会让它编译：

`double a = getJD(` **一个，一个，一个** `) + ((h-12)/24) + (m/1440) + (s/86400);`

我不明白你在那里尝试做什么，请记住`a`from`getJD`方法与`a`into不同`getToD`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:43:34.380

你想要做什么并不完全清楚，但我假设你只想保存你的第一个 getJD() 的结果并在你的 getToD() 中使用结果，所以我创建了一个私有 _jd 并创建了一个 setter和吸气剂。

```
import static java.lang.Math.*;

public class jdMethods
{

    private double _jd;
    public double getJD(){
        return _jd;
    }

    public void setJD(double y, double m, double d){
        if (m<=2.0){
            y--;
            m += 12.0;
        }
        double a=floor(y/100.0);
        _jd = (365.25*(y+4716.0))+(30.6001*(m+1))+d+(2.0-a+floor(a/4.0))-1524.5;
    }

    public double getToD(int h, int m, int s)
    {
        double a = getJD() + ((h-12)/24) + (m/1440) + (s/86400);
        return a;
    }
} 
```

所以这就是你的称呼：

```
jdMethods testRun = new jdMethods();
testRun.setJD(1,2,3);
System.out.println(testRun.getToD(3, 2, 1)); 
```

# c - 读取文件以创建多个“扫雷”数组

> ID：13236191
> 
> 赞同：0
> 
> 时间：2012-11-05T16:26:02.983
> 
> 标签：c

到目前为止，我得到的是一个 .in 文件，它将创建 100 个数组，然后是板上有多少个“地雷”，然后是每个“地雷”的 2 个数字，表示它们将放置在数组上的位置。这是为我的初学者 C 课准备的，老实说，我们没有被正确地教过这种高级的东西（我说高级使用这个词）。我知道如何读取文件，也知道如何创建数组，但我不确定如何读取那么多行，一遍又一遍地从地雷切换到放置。我还发现自己对如何根据地雷的放置位置将数组编号从 0 更改为另一个编号感到困惑。

示例输入文件：

```
1
4
1 3
7 5
7 3
3 3 
```

`1`第一行中的 表示我们有一个板。下一行的`4`表示它将有 4 个炸弹。以下 4 行将炸弹在阵列中的位置描述为`row column`。

有没有人可以为我指出正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:27:02.947

下面是一个部分解决方案，它留下了一些部分作为 OP 的练习。

```
#include <stdio.h>
#include <stdlib.h>

#define BOARD_SIZE 8

int main(void) {

    FILE *fp;

    fp = fopen("mines.in","r");
    if ( fp == NULL ) {
            fprintf(stderr,"Could not open file\n");
            return 1;
    }

    int nBoards = 0;
    int nMines  = 0;
    int col;
    int row;

    int currentBoard = 0;

    /* We know the first row is going to be the number of boards */
    fscanf(fp,"%d",&nBoards);

    printf("We have %d boards\n",nBoards);

    while ( fscanf(fp,"%d",&nMines) > 0 ) {
            int i,j;
            /* initialize board as all zeros */
            int board[BOARD_SIZE][BOARD_SIZE] = { {0} };

            currentBoard++;
            printf("Board %d:\n",currentBoard);

            /* Read in and set the mines */
            for (i=0; i<nMines; i++) {
                    fscanf(fp,"%d %d",&col,&row);
                    board[col-1][row-1] = 9;
            }

            /* Add mine proximity */
            for (i=0; i<BOARD_SIZE; i++) {
                    for (j=0; j<BOARD_SIZE; j++) {
                            if ( board[i][j] == 9 ) { /* we have a mine */
                                    /* Square to the left */
                                    if (j > 0 && board[i][j-1] != 9) {
                                            board[i][j-1]++;
                                    }
                                    /* Square to the right */
                                    /* Left as exercise for the OP*/

                                    /* Square above */
                                    /* Left as exercise for the OP*/

                                    /* Square below */
                                    /* Left as exercise for the OP*/
                    }
            }

            /* Print out the board */
            for (i=0; i<BOARD_SIZE; i++) {
                    for (j=0; j<BOARD_SIZE; j++) {
                            printf("%d ",board[i][j]);
                    }
                    printf("\n");
            }
            printf("\n");
    }
    fclose(fp);

    if (currentBoard != nBoards) {
            fprintf(stderr,"Expected %d boards, read in %d  boards\n",nBoards,currentBoard);
            return 1;
    }

    return 0;
} 
```

代码读取第一行以记录板的数量，然后循环遍历包含地雷数量和地雷位置的数据块。`while`循环将在包含地雷数量的行上执行，`fscanf`并且在 while 循环的主体中，不同的地雷位置将被读入为棋盘定义的数字。

一旦我们有了所有的地雷位置，我们就可以计算板上其他方格中的数字，我在代码中只显示了其中一个（其他方格类似）。

请注意，上面的代码几乎没有错误处理，也几乎没有对输入文件进行验证——如果输入文件错误，您可能会收到错误，即对数组的“超出范围”访问。我省略了这些检查以使程序的底层逻辑更清晰。

另请注意，我假设输入索引是“1”索引（即在 [1,8] 范围内，而不是 C 期望的“0”索引（即在 [0,7] 范围内），因此行中 1 的替换`board[col-1][row-1] = 9;`。

# javascript - 使用 Jquery 控制动态生成的 HTML

> ID：13236192
> 
> 赞同：0
> 
> 时间：2012-11-05T16:26:02.347
> 
> 标签：javascript, jquery, html, css, bootswatch

我得到的是一个包含 DIV 的网页，我在其中动态地放入一个带有选择器按钮的条目列表，我已经为这个例子简化了很多代码

目标 DIV 看起来像

```
<div id="targetdiv"></div> 
```

我要求服务器提供一个列表并构建一个看起来像的字符串

```
<div>
 nameofentryfromserver1
 <input type="button" class="dynamicbutton" onclick="someroutine('nameofentryfromserver1')">
</div>
<div>
 nameofentryfromserver2
 <input type="button" class="dynamicbutton" onclick="someroutine('nameofentryfromserver2')">
</div>
<div> ... same thing for next entry and so on 
```

然后我将它插入到文档中

```
$( "#targetdiv").html( generatedstring ); 
```

现在这工作正常，我得到了一个很好的列表，当我点击生成的按钮时，正确的例程被启动并且参数被正确传递，我得到了我期望的结果。

但是，当按下按钮时，我想禁用所有“动态按钮”类元素，一旦处理完成就重新启用它们。

在我调用的例程中，我有这条线

```
$( ".dynamicbutton").attr( "disabled", "disabled"); 
```

但这似乎不会影响任何动态生成的内容，如果我在页面上有属于同一类的其他按钮，它们会被禁用，所以看起来我只能使用此方法访问最初加载的文档中的内容.

我什至尝试给每个按钮一个唯一的 id 并单独引用每个按钮，但没有成功。

那么有没有一种方法可以生成这个内容，以便 jQuery 可以通过它的正常元素选择来访问它，或者我需要使用其他一些技术来操作它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:39:13.653

**当事件绑定到#target**时，您需要为这种情况**委派**事件，因为 DOM 中的元素不可用

 **此外，最好使用`.prop()` 而不是`.attr()`

尝试这个

```
$('body').on('click', '#targetdiv', function() {

     $(".dynamicbutton").prop( "disabled", true);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:04:03.760

这个怎么样？在#targetdiv 之后插入脚本并尝试它是否可以工作。此处的 .dynamicbutton 只会禁用 id targetdiv 内的所有类动态按钮。

```
<div id="targetdiv"></div>
<script type='text/javascript'>
    $('.dynamicbutton').click( function() { 
        $('#targetdiv .dynamicbutton').attr("disabled", "disabled");
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:34:14.937

您需要在将动态内容添加到页面后运行代码。如果之前运行代码，jQuery 看不到动态内容。我会在用户按下按钮时运行代码，然后在添加动态内容后再次运行代码。然后在完成处理后将其删除。

你也可以使用`$( ".dynamicbutton").prop( "disabled", true);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T09:19:54.147

似乎如果我使用了一个以前没有用于选择的类，那么我可以使用它来选择我的动态生成的组。

因此，如果我生成不确定数量的输入，`class="brandspankinnewelements"`并且该类以前没有用作页面上任何其他元素的选择器

我现在可以选择该组`$( ".brandspankinnewelements" )`

这让生活变得简单多了。**

# jquery - 文本框上的求和操作

> ID：13236194
> 
> 赞同：0
> 
> 时间：2012-11-05T16:26:10.923
> 
> 标签：jquery

我有多个文本框（带有 class `txtsum`），应该只允许数字。当用户在文本框中键入时，如何计算所有这些文本框的总和

```
var $txtb = $(':input.txtsum');
$txtb.on('change',function(){
    tot = 0.0;
    $txtb.each(function() {
        tot += parseFloat($(this).text());
    });
}); 
```

你能建议我正确/更好的方法吗？这是我尝试过的[http://jsfiddle.net/DPe4W/](http://jsfiddle.net/DPe4W/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:27:40.037

改变

```
tot += parseFloat($(this).text()); 
```

到

```
tot += parseFloat($(this).val()); 
```

您应该使用`.val`来获取任何输入元素的值，例如`input`, `select`。

我也改变了你的代码，如下所示，

**演示：http:** [//jsfiddle.net/DPe4W/7/](http://jsfiddle.net/DPe4W/7/)

```
var $txtb = $(':input.txtsum');
$txtb.on('keyup', function() {
    var tot = 0.0;
    $txtb.each(function() {
        var val = parseFloat(this.value);
        if (!isNaN(val)) {   
           tot += val;
        }
    });

    $("p").html(tot);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:28:01.053

`.text()`不适用于输入类型..`.val()` 改用

代替

```
 $(this).text() 
```

采用

```
($(this).val() ; // To calculate the value 
```

**完整代码**

```
 var $txtb = $(':input.txtsum');
$txtb.on('keyup', function() {
    tot = 0.0;
    $txtb.each(function() {
        var t = $(this).val() != '' ? $(this).val() : 0;
        tot += parseFloat(t);
    });
    $("p").html(tot);
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/DPe4W/6/)**

# c# - 无论用户文化如何，将货币格式化为始终使用美元

> ID：13236195
> 
> 赞同：6
> 
> 时间：2012-11-05T16:26:17.470
> 
> 标签：c#, asp.net-mvc, localization

这应该很简单，但我无法在任何地方找到答案。在我们的 asp.net MVC 网站上，我们显示货币值，我需要这些货币值始终以美元为单位，无论用户的文化设置如何。

如果我使用 string.format("{0:C}",value) 那么它会显示使用设置的任何文化中的值。这对我们来说是不正确的，因为 1000.00 美元与 1000.00 欧元不同

我仍然需要使用语言方面，这意味着如果他们在法国我想使用法语本地化资源，所以我不想完全无视他们的文化设置，但我怎样才能确保始终显示货币美元？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T16:28:33.177

将区域性显式传递给 Format 调用：

```
string.Format(new CultureInfo("en-US"), "{0:C}",value) 
```

如果您必须将其与其他语言混合 - 保存格式化货币值的结果并作为字符串插入其他地方。

旁注：使用“en-US”（或任何其他硬编码的文化）将导致负值的潜在不匹配表示，即某些文化使用 -100，而其他 (100) 用于负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:31:15.010

您必须将 CurrentCulture 指定为 en-US 并保持 CurrentUICulture 不变。

我通常在 Application_BeginRequest 事件中的 global.asax.cs 中执行此操作

```
System.Threading.Thread.CurrentThread.CurrentCulture = 
     new System.Globalization.CultureInfo("en-US", false); 
```

可以在 web.config 文件中指定文化，但这有一个缺点 - 它考虑了服务器的自定义区域设置（如果管理员在服务器上更改了 en-US 文化的货币或日期格式，它会以这种方式被拾取）-因此您永远无法确定应用程序的行为与您创建/测试它时的行为完全相同。

# php - 无论大小写结构如何，都检查字符串

> ID：13236199
> 
> 赞同：-2
> 
> 时间：2012-11-05T16:26:46.793
> 
> 标签：php

我有这段代码可以检查字符串是否为蓝色。我希望它批准它，无论它在任何字母中是小写还是大写。

```
if( ($subcol !== 'blue') || ($subcol !== 'Blue') || ($subcol !== 'BLUE')    ) {
    $form->setError($field, "* Colour not correct, use the hint");
} 
```

这似乎不起作用？我的结构有问题吗？

此外，是否有一个可以使用的 PHP 函数只检查一次所有这些场景？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:27:49.260

您可以使用：

```
if (strcasecmp($subcol, 'blue') === 0)  { 
```

这对`blue` `BLUE` `Blue` `bLue`等是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:30:07.453

或者..

使用这个[strtoupper](http://php.net/manual/en/function.strtoupper.php)

IE

```
if ('BLUE' == strtoupper($subcol)) .... 
```

# java - Java中的排序列表，如TreeMap或SortedSet

> ID：13236203
> 
> 赞同：5
> 
> 时间：2012-11-05T16:27:08.770
> 
> 标签：java, collections

我们在 java 中是否像 SortedSet 或 TreeMap 一样对列表进行了排序？我有一个类，其中一个属性是对象列表。在添加或通过设置器（set（List list））设置它时，必须随时对该列表进行排序。

我们有没有像 TreeMap 这样的组件列表？任何建议或帮助都将非常重要。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T16:29:52.737

拥有一个列表的目的是它们应该保持添加它们的元素的顺序。所以，我相信没有这样`List`的实现，其中元素在添加时进行排序。

您可以随时使用`Collections.sort()`方法对列表进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:40:09.580

你想要的是一个排序的**[Bag/MultiSet](http://en.wikipedia.org/wiki/Multiset)**实现，比如[Google Guava](http://guava-libraries.googlecode.com/)的**[`TreeMultiSet`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultiset.html)**？

Guava 中的A**`TreeMultiSet`**定义为：

> 根据自然顺序或显式比较器维护其元素顺序的多重集。

其中 a**[`MultiSet`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multisets.html)**是：

> 支持顺序无关相等的集合，如 Set，但可能有重复元素。多重集有时也称为 **包**。

有关 MultiSets 的更多信息，您可以阅读[Google Guava 上的这篇 dzone 文章：MultiSets](http://java.dzone.com/articles/google-guava-multisets)（除非您确实想要**`TreeMultiSet`**），以及 Guava wiki 的此页面[解释他们的新集合类型](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:49:36.003

您可以扩展现有的`ArrayList`来创建一个`SortedList`. 因为您只需要在插入时处理订单。

```
public class SortedList<E extends Comparable<E>> extends ArrayList<E> {

    @Override
    public boolean add(E e) {
        int index = Collections.binarySearch(this, e);
        super.add(index < 0 ? ~index : index, e);
        return true;
    };
} 
```

Java 文档[`Collections.binarySearch`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)

> 返回： 搜索键的索引，如果它包含在列表中；否则，`(-(insertion point) - 1)`。插入点定义为将键插入列表的点：第一个元素的索引大于键，如果列表中的所有元素都小于指定的键，则为 list.size()。请注意，这保证了返回值将是`>= 0`当且仅当找到键时。

**更新：** 正如@Louis Wasserman 所指出的，这会与基于索引的插入元素的基本列表合同产生问题。如果您想支持该功能，那么您应该使用`Collections.sort()`. 您还可以使用[`org.apache.commons.collections.list.TreeList`](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/list/TreeList.html)which 对该类具有以下相对性能统计信息

```
 get  add  insert  iterate  remove
TreeList       3    5       1       2       1
ArrayList      1    1      40       1      40
LinkedList  5800    1     350       2     325 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:32:56.030

您可以使用其他数据类型，`Collection`因为您不关心元素的顺序（这是 a 的基本属性`List`）。例如，`SortedSet`如果您没有重复项，我认为这可以解决问题。

否则，您可以`Collections.sort()`在`List`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T16:35:01.160

Java SDK 没有排序`List`类。您需要的最简单的解决方案是每次添加内容时都调用`Collections.sort()`您。`List`

# java - 如何制作删除按钮以删除 JTable 中的行？

> ID：13236206
> 
> 赞同：1
> 
> 时间：2012-11-05T16:27:15.440
> 
> 标签：java, swing, jtable, jbutton, listselectionlistener

我试图进行击键删除，但是当我选择单元格并按删除按钮时，它会输入所选单元格而不是删除整行。选择单元格时如何禁用删除按钮不执行任何操作？

* * *

诺。我的 GUI 上有删除按钮，但我想为这个按钮设置键盘快捷键。我想在我的键盘上制作删除按钮来调用删除方法。但是当我在选择单元格时按下它时，它会进入单元格而不是删除整行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T20:47:14.853

[`DefaultCellEditor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultCellEditor.html)许多单元格类型的[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)委托给 a `JTextField`，它将键绑定`Delete`到`delete-next`操作。要抢占默认行为，您必须从 中删除现有绑定`DefaultCellEditor`，如[*如何使用键绑定：如何制作和删除键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto)中所示。您可以将其替换为您自己的绑定，如本[例](https://stackoverflow.com/a/7457102/230513)所示；一个典型`DefaultCellEditor`的显示[在这里](https://stackoverflow.com/a/10067560/230513)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:37:05.943

```
Try This:

 MyTableModel mymodel=(MyTableModel)table.getModel();
                int rowcount= mymodel.getRowCount();
                for(int i = 0;i<rowcount;i++){
                    mymodel.removeRow(0);
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-04T16:55:17.020

要禁用自动编辑模式，请尝试以下操作：

```
table.putClientProperty("JTable.autoStartsEdit", Boolean.FALSE); 
```

# c - 如何使用 Arduino Uno 读取 M-bus 计量数据？

> ID：13236207
> 
> 赞同：1
> 
> 时间：2012-11-05T16:27:18.923
> 
> 标签：c, io, protocols, arduino, meter

我正在尝试使用[M-bus](http://en.wikipedia.org/wiki/Meter-Bus)协议将数据从 Kamstrup Multical 601 发送到 Arduino Uno。

我正在考虑尝试使用[libmbus c 库](https://github.com/rscada/libmbus)来执行此操作。但是，我在 c 编程方面没有很多经验，所以想知道是否：

*   您认为这是一种现实/可实现的方法吗？
*   任何人都可以提出替代/更简单的方法吗？

Arduino Uno 的主芯片是 Atmel Atmega382P-PU。

将数据发送到 Arduino 后，我的目标是执行一些计算并将数据发送到 LCD（我认为我可以做到）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:24:47.743

在[Arduino 网站](http://www.arduino.cc/en/Hacking/Libraries)上，有一个简短的操作指南，介绍如何在 Arduino 中使用外部 C-Libraries。

请注意，您不能简单地将 M-Bus 与 RS-232 接口连接。中间有一个所谓的“电平转换器”设备来进行“电转换”。请参阅 EN 13757-2 标准文档，了解该设备对信号的确切作用。如果没有这样的[设备](http://www.m-bus.com/files/minimaster.tif)，您将无法从 M-Bus 设备中得到任何消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:46:05.180

您链接到的库似乎适用于 Linux。当然，Arduino 不运行 Linux，因此库不会直接为它编译。

您可能应该尝试自己实现该库，但使用 Arduino 的标准库来访问端口等。

# google-closure-compiler - 隐藏 Google 图书馆的警告

> ID：13236208
> 
> 赞同：5
> 
> 时间：2012-11-05T16:27:20.370
> 
> 标签：google-closure-compiler, google-closure-library

我在我的项目中使用 Google Closure 和 Google Library，但遇到了警告问题。

我的项目由大约 50 个带有一些小警告（JSDoc 错误）的文件组成。问题是谷歌图书馆，当我编译我的项目时，大量的警告来自谷歌的图书馆，就像这样：

```
../Libs/Closure/closure/goog/uri/utils.js:255: WARNING - inconsistent return type
found   : (null|string|undefined)
required: (null|string)
  return uri && decodeURIComponent(uri);
         ^

../Libs/Closure/closure/goog/uri/utils.js:634: WARNING - inconsistent return type
found   : (Array.<(string|undefined)>|undefined)
required: Array.<(string|undefined)>
  return buffer;
         ^

../Libs/Closure/closure/goog/uri/utils.js:671: WARNING - inconsistent return type
found   : (Array.<(string|undefined)>|undefined)
required: Array.<(string|undefined)>
  return buffer;
         ^

../Libs/Closure/third_party/closure/goog/mochikit/async/deferred.js:623: WARNING - assignment to property deferred of goog.async.Deferred.AlreadyCalledError
found   : (goog.async.Deferred|undefined)
required: (goog.async.Deferred|null)
  this.deferred = deferred;
  ^

../Libs/Closure/third_party/closure/goog/mochikit/async/deferred.js:651: WARNING - assignment to property deferred of goog.async.Deferred.CancelledError
found   : (goog.async.Deferred|undefined)
required: (goog.async.Deferred|null)
  this.deferred = deferred;
  ^ 
```

我从谷歌图书馆收到了 300 多个警告，从我的项目中收到了大约 50 个警告。那么，如何隐藏 google 的库警告并显示我的项目警告？

我尝试使用稳定的 Google 库和 SVN 存储库中的最后一个来构建我的项目，但我总是收到所有这些警告。

我的编译配置：

```
../Libs/Closure/closure/bin/build/closurebuilder.py \
--root=../Libs/Closure/ \
--root=../Projects/myProject/ \
--namespace="Project" \
--output_mode=compiled \
--compiler_jar=../Libs/Closure/compiler.jar \
--compiler_flags="--third_party=../Libs/Raphael/raphaeljs_extern.js" \
--compiler_flags="--compilation_level=SIMPLE_OPTIMIZATIONS" \
--compiler_flags="--warning_level=VERBOSE" \
> ../../Projects/js/project_release.js 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:31:08.050

要禁止所有警告消息，您应该使用：

`--compiler_flags="--warning_level=QUIET"`

而不是`verbose`您当前拥有的设置。

您可能还想检查[grunt-closure-tools](https://github.com/thanpolas/grunt-closure-tools)插件，了解[grunt](http://gruntjs.com)是否可以使用构建器、编译器和 depswritter 等闭包工具自动化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:24:50.713

您可以在文件概览中使用@suppress 标记。 [http://code.google.com/p/closure-compiler/wiki/Warnings#@suppress_Tags](http://code.google.com/p/closure-compiler/wiki/Warnings#@suppress_Tags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T01:00:48.933

另一种方法是使用`--warnings_whitelist_file`. 不过，让它按预期工作有点棘手。在此处查看详细信息：[抑制或解决 goog.base 中的编译器错误](https://stackoverflow.com/questions/29529993/supressing-or-resolving-compiler-errors-in-goog-base)

# ios - 在 iOS 上拦截背景音频流

> ID：13236214
> 
> 赞同：7
> 
> 时间：2012-11-05T16:27:44.297
> 
> 标签：ios

iOS 应用程序是否可以拦截正在播放的背景音频流？

我想对当前正在播放的任何音频进行一些可视化，无论是 iTunes、Spotify 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-20T20:21:33.493

实际上，您无法访问此内容。

当应用程序未处于活动状态时，可以使用保留在后台的应用程序播放音乐，但您无法访问其他应用程序的音频流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-30T00:31:27.180

显然，这现在是可能的，前提是另一个应用程序订阅了[InterApp Audio](https://developer.apple.com/library/ios/samplecode/InterAppAudioSuite/Introduction/Intro.html)或 Audiobus。

为了清楚起见，从其他 SO 答案合并：

[有没有办法从您的应用程序中截取音频输出以在 iOS 上显示音频可视化器？](https://stackoverflow.com/questions/49061264/is-there-a-way-to-intercept-audio-output-from-within-your-app-to-display-back-an)

[在 iOS 上拦截/修改音频流](https://stackoverflow.com/questions/29676695/intercept-modify-audio-stream-on-ios)

# jquery - CSS 不透明度 - 不影响子元素

> ID：13236218
> 
> 赞同：0
> 
> 时间：2012-11-05T16:27:50.000
> 
> 标签：jquery, css

> **可能重复：**
> [如何不为子元素应用不透明度？](https://stackoverflow.com/questions/4182304/how-to-not-apply-opacity-for-child-element)

是否可以使用 css 或 jquery 将透明度/不透明度应用于元素而不影响子元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:32:56.590

也许你会想要设置背景不透明度

```
/* Fallback for web browsers that doesn't support RGBa */
background: rgb(0, 0, 0);
/* RGBa with 0.6 opacity */
background: rgba(0, 0, 0, 0.6); 
```

查看[此博客](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)以获取更多支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:33:28.383

不，透明度是继承的，但您可以改用 RGBA（Alpha 通道）。

一个很好的例子和教程：[http ://css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)

# php - 在图像中查找指定颜色的 x,y 位置？

> ID：13236229
> 
> 赞同：0
> 
> 时间：2012-11-05T16:28:19.337
> 
> 标签：php, image

有没有办法在 PHP 中获取图像中颜色的 x,y 位置？例如：在这张图片中

![在此处输入图像描述](../Images/56939e82e058ff9edf48c61644a5d04e.png)

我可以得到起点，即红色的 x，y 位置。

我需要为用户创建一个选项来更改图像中特定部分的颜色。因此，如果用户想在此图像中将红色更改为蓝色。我使用 imagefill() 函数来更改颜色，但它需要 x,y 坐标才能工作。希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:22:28.603

尝试这样的事情：

```
// applied only to a PNG images, You can add the other format image loading for Yourself
function changeTheColor($image, $findColor, $replaceColor) {
    $img = imagecreatefrompng($image);
    $x = imagesx($img);
    $y = imagesy($img);
    $newImg = imagecreate($x, $y);
    $bgColor = imagecolorallocate($newImg, 0, 0, 0); 

    for($i = 0; $i < $x; $i++) {
        for($j = 0; $j < $y; $j++) {
            $ima = imagecolorat($img, $i, $j);
            $oldColor = imagecolorsforindex($img, $ima);
            if($oldColor['red'] == $findColor['red'] && $oldColor['green'] == $findColor['green'] && $oldColor['blue'] == $findColor['blue'] && $oldColor['alpha'] == $findColor['alpha'])
                $ima = imagecolorallocatealpha($newImage, $replaceColor['red'], $replaceColor['green'], $replaceColor['blue'], $replaceColor['alpha']);
            }
            imagesetpixel($newImg, $i, $j, $ima);
        }
    }

    return imagepng($newImg);
} 
```

我们在这里期待`$findColor`并且`$replaceColor`是具有这种结构的数组：

```
$color = array(
    'red' => 0,
    'green' => 0,
    'blue' => 0,
    'alpha' => 0,
); 
```

没有尝试代码，但它至少应该为您指明正确的方向。它遍历每个像素，检查该像素的颜色，如果它是我们正在寻找的颜色，则将其替换为`$replaceColor`. 如果不是，则将相同的颜色放入新图像的相同位置。

**由于它使用两个`for`循环，因此在大图像上可能会非常消耗时间和内存。**

# tsql - Oracle to_char 转换导致小时偏移？

> ID：13236231
> 
> 赞同：0
> 
> 时间：2012-11-05T16:28:24.177
> 
> 标签：tsql, plsql

我想让那些比我更了解 PL/SQL 和 T-SQL 的人来讨论这个问题。下面是我继承的一些代码，它返回的日期是 1 小时。当我在远程查询的选择语句中删除“to_char（i.UPDATE_DT，''YYYY-MM-DD HH24:MI:SS.FF3''）”时，小时偏移量消失了。我担心此更改可能会产生其他影响，所以我的问题是为什么有人会通过 OpenQuery 将 Oracle 时间转换为字符串，然后在 select 语句中使用 T-SQL 转换？我在这里缺少什么，为什么 to_char 会导致偏移（如果是原因）？

```
SELECT
    CSE_ID                         AS ID,
    OTHR_CSE_ID                   AS Case_Num,
    convert(datetime,UPDATE_DT,121) AS Export_Time
FROM
    OpenQuery( OracleTbl, '
    SELECT c.CSE_ID, r.OTHR_CSE_ID, to_char(i.UPDATE_DT,''YYYY-MM-DD HH24:MI:SS.FF3'') UPDATE_DT 
    FROM AE_CSES c
    INNER JOIN CSES i ON i.CASE_ID = c.CSE_ID AND i.ACTION_CD = ''INS''
    INNER JOIN OTH_CSE_REFS r ON r.CSE_ID = c.CSE_ID AND r.OTH_CS_REF_SEQ_NBR = 1 AND r.OTHER_SOURCE_TYPE = ''SIE''
    ') AS i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:33:25.077

简单的答案但是；一台服务器和另一台服务器之间的夏令时问题？

# c# - FTP连接失败“无法连接到远程服务器”

> ID：13236238
> 
> 赞同：2
> 
> 时间：2012-11-05T16:28:35.987
> 
> 标签：c#, ftpwebrequest

我正在尝试连接到 FTP 服务器以上传文件。我收到“无法连接”错误。如果我使用命令行并打开 FTP 连接，我可以连接。不知道为什么以编程方式连接时出现错误。任何帮助都将不胜感激。

```
 FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://1.23.84.2");
 request.Method = WebRequestMethods.Ftp.UploadFile;                   

 request.Credentials = new NetworkCredential("user","password");

 // Copy the contents of the file to the request stream.    
 StreamReader sourceStream = new StreamReader(path);
 byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
 sourceStream.Close();
 request.ContentLength = fileContents.Length;

 Stream requestStream = request.GetRequestStream();
 requestStream.Write(fileContents, 0, fileContents.Length);
 requestStream.Close();

 FtpWebResponse response = (FtpWebResponse)request.GetResponse();

 Console.WriteLine("Upload File Complete, status {0}", 
          response.StatusDescription);

 response.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T02:41:38.973

所以经过几个小时的故障排除后，是 McAfee 阻止了 ftp 端口。不得不暂时禁用本地机器上的服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:40:34.933

我认为 FtpWebReqest 需要指向目标路径，而不仅仅是服务器的地址，如下所示：

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://1.23.84.2/myFile.zip"); 
```

可以在[此处](http://msdn.microsoft.com/en-us/library/ms229715.aspx)找到在 FtpWebRequest 上下文中 FTP 上传的正确用法。

# c# - 修改 XML 模式时如何管理 ItemChoiceType 枚举的更改？

> ID：13236252
> 
> 赞同：3
> 
> 时间：2012-11-05T16:29:26.650
> 
> 标签：c#, .net, xml, xml-serialization, xsd.exe

我们使用 XSD.EXE 从 XSD 模式生成运行时类以进行 XML 序列化。架构很大并且包含许多复杂的类型和选择元素。如[http://msdn.microsoft.com/en-us/magazine/cc164135.aspx](http://msdn.microsoft.com/en-us/magazine/cc164135.aspx)中所述，选择元素生成两个字段：保存值的 Item 字段和保存生成的枚举的 ItemChoiceType 字段，定义哪个命名元素是在项目字段中。

XSD 为每个名为 ItemChoiceTypeXX 的元素名称字段创建一个唯一的枚举，其中 XX 是一个整数。XSD 根据需要创建尽可能多的 ItemChoiceTypes，并用递增的数字命名它们。

所以，我的一小部分架构看起来像：

```
<xsd:choice>
  <xsd:element ref = "Sequence"/>
  <xsd:element ref = "HandshakeId"/>
</xsd:choice> 
```

我可以像使用生成的类一样对其进行编码，例如：

```
job.Item = "123";        
job.ItemElementName = ItemChoiceType26.Sequence; 
```

问题是在最初生成的类中，该元素的 ItemChoiceType 是 ItemChoiceType26。更新架构并重新生成类后，名称现在是 ItemChoiceType27。

我的问题是，随着模式随着时间的推移而更新和修订，我该如何管理它？我不控制 XSD 架构，它由供应商提供。但是，我必须更新我的代码以匹配他们所做的更改。随着时间的推移，我似乎面临着一场维护噩梦，并希望有任何建议来更好地管理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-28T21:52:25.407

我认为正确的答案是使用属性而不是`ref`使用`name`属性。

```
<xsd:choice>
  <xsd:element name="Sequence"/>
  <xsd:element name="HandshakeId"/>
</xsd:choice> 
```

至少这对我有用。

# php - html 中的图形 SVG

> ID：13236257
> 
> 赞同：0
> 
> 时间：2012-11-05T16:29:40.477
> 
> 标签：php, javascript, jquery, ajax, vector

我正在尝试在我的 HTML 中放入 SVG 矢量图形。

这个 SVG：[http ://webkunst.comeze.com/graphic.svg](http://webkunst.comeze.com/graphic.svg)

我设法通过这样的方式加载它：

```
<embed src="images/grafica-2.svg" type="image/svg+xml"/> 
```

问题是它只是加载文件，但我需要修改每种颜色的百分比。我的意思是，我可以通过 html 控制 svg 的数据，而不仅仅是导入“关闭”的 svg。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:43:53.860

Frameworks like [d3.js](http://d3js.org/) and [Raphaël](http://raphaeljs.com/) allow you to create and modify SVGs. There are plenty of examples for each of them.

# php - 搜索整个单词的字段，除了单词什么都没有

> ID：13236259
> 
> 赞同：4
> 
> 时间：2012-11-05T16:29:44.173
> 
> 标签：php

我有一个带有关键字搜索的 PHP 界面，处理一个具有关键字字段的 DB(MySQL)。

关键字字段的设置方式如下，它是一个varchar，所有单词的格式如下图...

the, there, theyre, their,thermal 等...

如果我只想从搜索中返回确切的单词“the”，这将如何实现？

我曾尝试在 PHP 中使用`'the%'`and `'%the'`，但它无法通过不返回关键字出现的**所有行来工作。**

有没有更好（更准确）的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:39:26.553

如果要选择**恰好**具有关键字的行`the`：

> SELECT * FROM table WHERE 关键字='the'

如果要选择其中`the` **任何位置**包含关键字的行：

> SELECT * FROM table WHERE 关键字 LIKE '%the%'

如果要选择以关键字**开头**`the`的行：

> SELECT * FROM table WHERE 关键字 LIKE 'the%'

如果要选择以关键字**结尾**`the`的行：

> SELECT * FROM table WHERE 关键字 LIKE '%the'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:39:46.343

试试这个

```
SELECT * FROM tablename
  WHERE fieldname REGEXP '[[:<:]]test[[:>:]]' 
```

`[[:<:]]`并且`[[:>:]]`是单词边界的标记。

[MySQL 正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:40:07.693

如果您还搜索逗号，则可以确定您得到了整个单词。

```
where keywordField like '%, the, %'
   or keywordField like '%, the'
   or keywordField like 'the, %' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:40:59.783

也许我没有正确理解这个问题......但是如果你想要所有出现“the”的单词，那么 LIKE '%word%' 应该可以工作。

If the DB of words is HUGE MySQL may fail to retrieve some of the words, that can be solved in 2 ways...

1- get a DB that support bigger sizes (not many ppl would chose this one tho). For example SQL Server has a 'CONTAINS' function that works better than LIKE '%word%'.

2- use a external search tool that uses inverted index search. I used [Sphinx](http://sphinxsearch.com/) for a project and it works quite good. This is better if you rarely UPDATE the rows of the data you want to search from, which should be the case. Sphinx for example would generate a file from your MySQL table and use this file to solve the search (it's very fast), this file should be re-indexed everytime you do a insert or update on the table, making it a much better solution if you rarely update or insert new rows.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T16:51:51.497

It looks like you have a one to many relationship going on within a column. It might be better to create a separate table for keywords with a row for each keyword and a foreign key to whatever it is you're searching on.

Doing like '%???%' is generally a bad idea because the DB can't make use of an index so it will scan the whole table. Whether this matters will depend on the size of data you're working with but its worth considering up front. The single best way to help DB performance is in the initial table design. This can be tricky to change later.

# c# - Silverlight ChildWindow.Closed 事件在 .Show() 之后立即触发

> ID：13236268
> 
> 赞同：0
> 
> 时间：2012-11-05T16:30:06.320
> 
> 标签：c#, silverlight

我正在尝试在 silverlight 中创建一个 ChildWindow 供用户输入一些数据。每当我调用该`.Show()`函数时，`.Closed`事件都会立即触发。浏览器（IE8）然后一遍又一遍地抛出这个消息：

```
Line: 56
Error: Unhandled Error in Silverlight Application 
Code: 2272    
Category: ParserError       
Message: Cannot find a Resource with the Name/Key PhoneDisabledBrush     
File:      
Line: 43     
Position: 155 
```

如果我点击这条消息大约 15 次，它最终会在 IE 中给我一个堆栈溢出错误。`.Closed`在此消息出现之前，我从未真正看到 ChildWindow 显示，但是，它确实在这些错误发生之前经历了事件。

子窗口目前没有代码，只是添加了一些基本的 Silverlight 控件（文本块、文本框等）

子窗口的实例化如下：

```
 public TickerAdminControl()
    {
        InitializeComponent();
        winNewMsg = new windAddNewTickerMessage();
        winNewMsg.Closed += new EventHandler(winNewMsg_Closed);
    } 
```

事件`.Closed`如下所示：

```
 void winNewMsg_Closed(object sender, EventArgs e)
    {
        if (winNewMsg.DialogResult == true)
        {
            TickerProxy.GetAllMessagesAsync();
        }
    } 
```

它真的再简单不过了，所以我对这个错误感到困惑。在`.Show()`UserControl 上的简单按钮单击事件中调用。

编辑：这只发生在 IE 上。如果我使用 Chrome，它无需更改任何代码即可工作。

第二次编辑：这似乎只发生在我从 Visual Studio 在调试中运行时。如果我手动启动站点（http://localhost:3881/Default.aspx）一切正常，这就是它在 Chrome 中工作的原因。当我手动访问它时，它也适用于 IE8。我想我现在更加困惑了。

第三次编辑：虽然在非调试中运行时一切似乎都正常，但错误仍然存​​在，但允许子窗口显示正确操作。在左下角，我收到一条“错误”消息，如果我单击它，它会重复此错误 15 次：

```
Message: Unhandled Error in Silverlight Application Error HRESULT E_FAIL has been returned from a call to a COM component.   
at MS.Internal.XcpImports.VisualStateManager_GoToState(Control reference, String StateName, Boolean useTransitions, Boolean& refreshInheritanceContext)
at System.Windows.VisualStateManager.GoToState(Control control, String stateName, Boolean useTransitions)
   at System.Windows.Controls.HyperlinkButton.ChangeVisualState(Boolean useTransitions)
   at System.Windows.Controls.Primitives.ButtonBase.UpdateStateFlags(Boolean disable)
   at System.Windows.Controls.Primitives.ButtonBase.OnIsEnabledChanged(IsEnabledChangedEventArgs e)
   at System.Windows.Controls.Control.OnIsEnabledChanged(Control control, EventArgs args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags)
Line: 1
Char: 1
Code: 0
URI: http://localhost:3881/default.aspx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:51:14.940

问题解决了。原来我在调用 ChildWindow 的应用程序上有一组样式化的超链接按钮，这些按钮被设置为查找不存在的静态资源“PhoneDisabledBrush”。这以前从未出现过，因为我从未将它们更改为禁用。VS2010 不会为此通过编译时异常似乎有点奇怪，但我只是删除了代码并且它运行顺利。

# c# - 在实体框架中使用语句完成后如何访问相关对象？

> ID：13236272
> 
> 赞同：0
> 
> 时间：2012-11-05T16:30:23.767
> 
> 标签：c#, entity-framework

我在 VS 2010 中使用 EF 3.5。我有一个返回结构的方法。在结构中有一个对象 armatuur。当结构返回时，我想从 armatuur 实例访问相关对象。

然而

返回结构的方法：

```
public LampPostDetail getLamppostInfo(int id)
{
    LampPostDetail lpd;

    lpd.xPos = 0;
    lpd.ypos = 0;
    lpd.armatuur = new Armatuur();

    //get the info from object
    using (var db = new OvisionDBEntities())
    {
        var objects = from o in db.Objects
                      where o.ObjectId == id
                      select o;

        foreach (OVSL.Data.Object o in objects)
        {
            lpd.xPos = o.XCoordinatie;
            lpd.ypos = o.YCoordinatie;
            lpd.armatuur = o.Armatuur; //which is a table in my db
        }

        return lpd;
    }
} 
```

结构：

```
public struct LampPostDetail
{
    #region [ Data Members (14)]
    //lamppost info
    public double? xPos;
    public double? ypos;

    //a lamppost can have several armaturen
    public OVSL.Data.Armatuur armatuur; //is a table in my db

    #endregion [ Data Members ]
} 
```

在我的客户中执行此操作时：

```
 LampPostDetail lpd = client.getLamppostInfo(id);
 string brand = lpd.armatuur.producer.name; //producer is related object of armatuur 
```

我得到一个 ObjectDisposedException。我知道发生这种情况是因为 LampPostDetail 对象在 using 块完成后被释放。但是我怎样才能让它工作呢？在我将其返回给客户之前检索我需要的所有信息（例如品牌名称）不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:56:45.927

被处置的不是您的 LampPostDetail，而是您从它引用的数据库中检索到的 Armatuur 对象，或者是 Armatuur 正在引用的对象。

我可以看到解决此问题的两种选择。第一个是使实体上下文成为您的 getLamppostInfo 信息方法的可选参数。由于您使用的是 3.5，因此您必须进行重载以保持原始功能：

```
public LampPostDetail getLamppostInfo(int id,OvisionDBEntities context)
{
...
    try
    {
       OvisionDBEntities db;
       if (context == null)
          db = new OvisionDBEntities();
       else
          db = context;
    ...
    }
    finally
    {
       if (context == null && db != null)
         db.Dispose() // or close maybe
    }

    retun lpd;

 }

 // Overloaded function to keep orignal functionality (C# 3.5 does not have 
 // optional parameters)
 public LampPostDetail getLamppostInfo(int id)
 {
     return LampPostDetail(id,null)
 } 
```

现在您可以将其称为：

```
using (var db = new OvisionDBEntities())
{
   LampPostDetail lpd = client.getLamppostInfo(id,db);
   string brand = lpd.armatuur.producer.name;
} 
```

当您尝试引用它们时，您的对象仍然存在。

另一种选择是在处理之前将引用的对象从实体上下文中分离出来。

```
 db.Detach(o.Armatuur); 
```

但是，我不相信会分离该对象引用的任何对象。因此，您还必须对参考树进行交互并分离对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:56:42.927

这里唯一需要处理的是`OvisionDBEntities`上下文。之后，就不能进行延迟加载了。如何处理？事实上，您的问题是：您可以做些什么来为客户提供随时可能需要的用户操作的所有数据？我看到三四个选项：

1.  在上下文处理后启用对实体导航属性的访问的标准方法是调用[Include](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbquery.include%28v=vs.103%29.aspx)：`from o in db.Objects.Include("Armatuur.Producer")...`但这显然不是您的选择。

2.  让上下文存在并依赖延迟加载来按需获取数据。这可能是您的一个选择。但是长期存在的上下文可能会导致问题，例如随着内部更改跟踪记录的增长而逐渐降低性能，以及导致刷新/重新加载语句分散在各处的过时缓存数据。

3.  代替导航属性/延迟加载，从每次调用使用上下文实例的服务/存储库层按需获取数据。我认为这个选项对你很有效。

4.  更多的是功能而不是技术选项：设计可以使用更少数据的用例（`Include`毕竟这可能就足够了）。没有人可以接受具有数千行和数十列的网格。精心设计的用户交互可以大大减少输入客户端的数据量（而我才刚刚开始这样做）。

# grails - Grails 插件 - 脚手架中控制器的动态方法不起作用

> ID：13236275
> 
> 赞同：1
> 
> 时间：2012-11-05T16:30:39.487
> 
> 标签：grails, grails-plugin, metaclass

我有自己的 Grails 插件，我在其中使用 doWithDynamicMethods 闭包添加了一个动态方法：

```
def doWithDynamicMethods = {ctx ->
    ['controller'].each {
         application."${it}Classes".each { theClass ->
         theClass.metaClass.myMethod = { ... }
    }
} 
```

当我从控制器调用此方法时，它工作正常：

```
...
myMethod()
... 
```

但是当我从脚手架模板调用它时，它找不到这个方法：

```
...
def save() {
    <%= "myMethod()" %>
}
... 
```

有什么方法可以让它工作吗？或者我是否需要为脚手架模板的动态方法使用其他模式？

感谢您的任何提示：]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T01:48:26.840

脚手架模板不会引用您所引用的实际控制器`scaffold true`。您必须抓住实际的控制器才能使用动态方法。

这可以通过`grails.util.GrailsWebUtil`以下方式完成，如下所示：

```
...
def save() {
    def actualController = GrailsWebUtil.getControllerFromRequest(request)
    actualController.myMethod() 
}
... 
```

当控制器（人工制品）被搭建时，实际控制器的副本在运行时用于搭建。对主控制器的所有调用都由副本处理。为了使用动态方法，您需要实际控制器的句柄，因为动态方法是根据实际控制器工件创建的。

# c - C语言中的for循环，根据初始化和结束条件自动递增或递减

> ID：13236280
> 
> 赞同：2
> 
> 时间：2012-11-05T16:31:10.163
> 
> 标签：c, for-loop

我记得在 C 中看到过一个非常优雅的“for”循环结构，它会根据初始值是大于还是小于结束条件值自动增加或减少循环变量。

换句话说，是这样的：

```
fadeUpDown(startVal, stopVal /*, stepSize */ ) {      

    // SOME CODE THAT SETS UP WHETHER TO INCREMENT OR DECREMENT

    for (int i=startVal ; i != stopVal ; ### SOME TRICKY CODE ### ) {    
        // The actual looped code      
    }
} 
```

再次搜索此代码后，我没有成功，所以我在这里，询问是否有人可以帮助我。

**编辑：**我们在这里都是整数。
StopVal 的完整性检查是 StepSize 的整数增量/减量超出范围。
实际上，让我们**跳过 StepSize 并将其设为 1**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:34:09.397

眼镜蛇，例如简单的方法：

```
int inc=startVal>stopVal?-1:1;
for (int i=startVal ; i != stopVal ; i+=inc ) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:33:46.433

不确定这需要多么棘手，应该像以下那样简单：

```
for(int i = startVal; i != stopVal; i < stopVal ? i += stepSize : i -= stepSize)
{
} 
```

请注意，这假设`stopVal`是从 开始的整数`stepSize`步`startVal`。如果这不是真的，它会超调。

当然也可以防止这种情况发生，但它变得有点笨拙：

```
for(int i = startVal;
    stopVal > startVal ? i < stopVal : i > stopVal;
    i < stopVal ? i += stepSize : i -= stepSize)
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:35:47.977

```
for (int i=startVal ; i != stopVal ;  i += (stepsize*(startVal > stopVal? -1 : 1))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T16:39:17.773

您可以执行以下操作：

```
fadeUpDown(startVal, stopVal, stepSize) {      

    // SOME CODE THAT SETS UP WHETHER TO INCREMENT OR DECREMENT

    for (int i=startVal ; i != stopVal ; i += (startVal < stopVal) ? stepSize : -stepSize ) {    
        // The actual looped code      
    }
} 
```

但是从`for`某种意义上说，循环相当脆弱，`stopVal`最好恰好在`stepSize`增量/减量上，否则您的循环将无法正确终止。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T16:56:02.273

也许这与 stepSize 参数一起工作

```
fadeUpDown(startVal, stopVal, stepSize) {      

        for (int i=startVal, j = (startVal < stopVal); (j) ? (i < stopVal) : (i > stopVal) ; i += (j) ? stepSize : -stepSize ) {    
            // The actual looped code      
        }
} 
```

# php - 向 STDClass 添加函数

> ID：13236289
> 
> 赞同：1
> 
> 时间：2012-11-05T16:31:32.203
> 
> 标签：php

这是困扰我一段时间的事情，今天我找到了一个相对简单的解决方案，我想我会分享，因为我似乎找不到任何体面的答案。

我的数据库包装器有以下代码：

```
function find($id) {
    //Fetch the results
    //Put the results into an array

    return (object) $results;
} 
```

所以我可以这样做：

```
$result = DB::find(1);
echo $result->name; #=> Hello world 
```

但我需要能够为新结果分配方法。在这种情况下`to_json`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:31:32.203

你可以这样做：

```
class Result {
    protected $results;

    public function __construct($results) {
        $this->results = $results;

        foreach($results as $key => $value) {
            $this->$key = $value; 
        }
    }

    public function to_json() {
        return json_encode($this->results);
    }
} 
```

现在而不是返回`return (object) $result`只是做：`return new Result($result);`

```
$result = DB::find(1);
echo $result->name;      #=> Hello world
echo $result->to_json(); #=> {"name":"Hello world","content":"Hello World!"} 
```

# c++ - 读/写同一配置文件的不同版本的设计方法

> ID：13236294
> 
> 赞同：0
> 
> 时间：2012-11-05T16:31:43.637
> 
> 标签：c++, xml, qt, design-patterns, user-interface

在我们的项目中，我们有一个使用外部配置文件（比如 server.xml）的应用程序。现在我们需要在 C++/QT 中设计一个设置工具 GUI 来读取/编辑此类配置文件，它应该能够处理此类文件的所有不同版本。用户将选择文件版本，然后继续编辑。从一个版本到另一个版本并没有太大的变化，也许有一个新的 xml 标签，一个不同名称或不同位置的标签。

这样做的最佳设计方法是什么？我们正计划采用标准的 MVC 设计模式，但是如何处理所有不同的配置版本而无需再次重写相同的 GUI 代码？

这里是示例配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Server_configuration ver="11">
  <core>
    <enable-tms>true</enable-tms>
    <enable-gui-messages>true</enable-gui-messages>
    <waiting-for-config-timeout>10000</waiting-for-config-timeout>
    <remoting>
      <port>50000</port>
      <join-timeout>5000</join-timeout>
      <ismultithread>true</ismultithread>
      <maxconcurrentrequests>20</maxconcurrentrequests>
    </remoting>
  </core>
  <content>
    <ftp>
      <ip>192.168.0.227</ip>
      <port>21</port>
      <userid>******</userid>
      <passwd>******</passwd>
    </ftp>
    <library>
      <ip>192.168.0.227</ip>
      <port>50023</port>
    </library>
    <local>
      <asset-root>/assetroot</asset-root>
      <kdm-expiration-warning>172800000</kdm-expiration-warning>
    </local>
    <hula-store-daemon>
      <ip>127.0.0.1</ip>
      <port>5567</port>
    </hula-store-daemon>
  </content>
</Server_configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:33:56.250

这并不意味着解决方案的下降，但我这里有一些事情要做/考虑。每种情况都会有所不同。

*   在您的配置文件中有一个明确的版本标识符。对它们进行指纹识别是一种真正的（容易出错的）痛苦。
*   考虑拥有一个可以从一个版本更新到另一个版本的工具。这将比阅读旧版本并尝试应用它们更容易。
    *   我可能更容易单独执行每个版本步骤，但这可以使转换不那么“无损”。一个快乐的混合是从一个版本到另一个版本进行小更新，但有“检查点”主要升级，这些升级将直接跳到最新的（或最新的“检查点”）。这有点像每隔一段时间进行一次完整备份快照的[增量备份。](https://en.wikipedia.org/wiki/Incremental_backup)
    *   让用户了解情况。如果您更改他的设置，系统管理员将不会高兴。您可能希望使流程具有交互性或将注释放入每个添加/移动/删除设置的文件中。我还建议在文件的某些部分保留已删除的设置以供用户参考。（记下它们为什么也在那里）。
*   备份旧文件。你的脚本会崩溃，它会吃掉数据。做一些类似命名当前文件的事情`${oldname}.old-${ver}~`。将设置保存在文件的不同部分并不总是足够的，这将为您的用户节省很多心痛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:55:56.810

版本控制应始终设计得尽可能健壮和简单。确定您的应用程序的每个版本是否必须与每个版本的设置工具兼容（这种情况很少见），或者您是否可以满足您的需求（例如，如果任何更新的设置工具与任何相同或较旧的应用程序，但反之则不然。

**单向兼容性**

为后者设计的一种可能性是向 XML 文件添加版本属性，但尝试通过始终仅以向后兼容的方式更改 XML 文件的结构和语义来使其永远保持相同的固定值。例如，添加一个元素是向后兼容的，只要设置工具能够以与旧设置工具和应用程序相同的方式解释它的缺失。新的设置工具总是将（等效）值写入新元素并没有什么坏处，因为不需要与旧应用程序的双向兼容性。

一旦有一天您无法保持输入的向后兼容性，您只需更改版本属性的值并在设置工具中启动特殊的大小写。

如果您根据 XSD 验证 XML，请注意 XSD 实际上可以为您做一件经常有用的事情：分配默认属性值。这样，您的设置工具的源代码甚至可能不会真正注意到底层文档缺少最近添加的属性！

**两路兼容性**

需要严格的版本控制。应为 XML 文件的每个版本定义模式定义（XSD、RelayNG、...），并且在设置工具读取、设置工具写入或应用。如果对同一个 XML 的解释发生了变化，则模式定义对于多个连续版本可能是相同的，因此当有疑问时，请始终增加版本号。

尽你所能教育每个人，他们不能只编辑最新的模式并取消它。不可靠的版本控制比没有版本控制更糟糕。

# javascript - 如何在javascript中解析特定的json对象

> ID：13236296
> 
> 赞同：0
> 
> 时间：2012-11-05T16:31:55.233
> 
> 标签：javascript, json, api

我使用 google api 生成地点和地图。我在 php 中有 json 解析代码，我需要在 javascript 中使用它，有人可以帮我处理我的代码吗

```
<?php
$json_string = file_get_contents("https://maps.googleapis.com/maps/api/place/textsearch/json?query=pizza&sensor=false&key=MYKEY");
  $parsed_json = json_decode($json_string);

  $var = $parsed_json->{'results'}[0]->{'formatted_address'};
?> 
```

所以 [0] 我指的是第一个结果，如何在 javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:33:13.707

JavaScript 默认支持 JSON，无需编码。

```
$json = '{ "some": "valid", "json": "string" }';
$js = "var json_data = " . $json . ";";
echo $js; 
```

这将打印：

```
var json_data = { "some": "valid", "json": "string" }; 
```

* * *

如果您没有 JSON 字符串——而是一个 PHP 数组——你会使用`json_encode`. 像这样：

```
$json = '{ "some": "valid", "json": "string" }';
$json_data = json_decode($json); // now we have the JSON available in PHP mem
$js = "var json_data = " . json_encode($json_data) . ";";
echo $js; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:34:07.010

所有最新的浏览器都支持原生解析 json。使用 JSON.parse 和 JSON.stringify 方法。对于其他人使用 jquery 内置函数

# ios - 正确编码 ISO-8859-1 编码的 xml 文件 ios iPhone

> ID：13236299
> 
> 赞同：0
> 
> 时间：2012-11-05T16:32:21.210
> 
> 标签：ios, character-encoding

我有xml文件

```
<?xml version="1.0" encoding="ISO-8859-1"?><xml> 
```

标签。我有不同语言的文本。即西班牙语，英语，德语，意大利语等现在当我尝试将文本放入 NSString 时

```
NSString *contentsOfURL = [NSString stringWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat: @"http://link"]] encoding:NSASCIIStringEncoding error:&error]; 
```

并使用 CXMLDocument 解析器对其进行解析，然后它会显示非法字符，例如

```
S√≥lo , as√≠ se dar√° cuenta etc. for Spanish language. 
```

我该如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:41:12.503

Replace your use of `NSASCIIStringEncoding` with `NSISOLatin1StringEncoding`.

ISO-8859-1 is ISO Latin 1.

# html - Objective-C - 解析 .csv，提取和插入信息，然后将 .csv 显示为编辑界面

> ID：13236304
> 
> 赞同：1
> 
> 时间：2012-11-05T16:32:43.970
> 
> 标签：html, objective-c, arrays, parsing, csv

在过去的一周里，这个问题一直困扰着我。下面，我将列出我的问题，以及我对其进行的研究。

**场景：**给了我一个 .csv 文件，它有 5000 行和 3 列。三列定义为：

站点 ID|站点名称|站点 URL

**我的任务：**为公司的设计师创建一个 HTML 界面，以 1-5 的等级对每个站点进行评分。

**我的行动计划：**我是新员工。我已经习惯了我被聘用的语言，那就是 Objective-C。

我的项目算法是：

1.  解析 .csv
2.  删除“站点名称”变量
3.  创建一个包含以下变量的新 .csv：站点 ID|站点 URL|评级|图像
4.  将新的 .csv（包含所有上述项目）显示为 HTML 页面，其中有“评分”的切换按钮，按下时会将评分记录到从中导入（或加载）它的 .csv 中。

“图像”部分我将使用一个名为 Paparazzi 的软件（在 Mac OS X 操作系统上），它会截取主页的完全格式化的屏幕截图并将其保存为 PNG 文件。我计划使用文件扩展名 URL（存储在本地）并将其加载到“图像”列中，因此当设计师单击图像时，他能够加载存储在本地的图像。

**我的问题：**由于 Objective-C 不完全是一种脚本语言，我对我可能需要的一些库和/或我可以实现它的方法感到困惑。我有算法，但我完全不确定实现。

**我的问题：**如果你以前用 Objective-C 做过一个类似的项目，你能给我什么建议？如何将 .csv 作为 HTML 界面加载，在编辑时，它将将此编辑保存到 .csv 中？为此我需要任何服务器，还是所有东西都可以从一台机器上执行？您如何抓取图像（存储在本地）、提取其文件扩展名并将其加载到 .csv 中？

最重要的问题：这可以通过 Objective-C 实现吗？我的理由是，我想通过这样的任务来提高我对 OC 的了解。是的，使用 Python 更容易，但是使用 Objective-C 可以做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:38:22.437

这当然是可以实现的，但我怀疑你真的想走这条路。如果我理解正确，您想通过 Web 浏览器将 HTML 页面提供给其他人 - 这意味着要么编写一个（简单的）http 守护程序，它可以在服务器上运行，要么编写一个 CGI 脚本，它可以与标准的 http 守护程序通信. Python/PHP/Ruby 很容易为您做到这一点，因此可能出现的错误空间要小得多。

至于

> 由于 Objective-C 并不完全是一种脚本语言

我也许会把它改写为

> 由于 Objective-C 完全不是脚本语言

# google-api - 如何检测地址/坐标中是否有 Google StreetView

> ID：13236312
> 
> 赞同：6
> 
> 时间：2012-11-05T16:33:21.123
> 
> 标签：google-api, google-street-view

我正在制作一个使用 Google Street View Image API 的应用

根据地址/坐标获取街景图像没有问题

但是 - 我想检测特定地址是否有可用的街景图像（以便为没有它的地址显示不同的行为）

到目前为止我唯一的想法是读取返回图像的像素并检测这是否是我在没有可用图像时得到的图像

还有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:55:22.170

使用 google.maps.StreetViewService.getPanoramaByLocation( latlng, radius, callback()) 可以查看是否有街景全景图。如果有街景全景，那么一定有街景图像。

您可以参考谷歌的参考： [https ://developers.google.com/maps/documentation/javascript/reference#StreetViewService](https://developers.google.com/maps/documentation/javascript/reference#StreetViewService)

或者参考 StreetViewService 的例子： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-service](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-service)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-07T20:18:13.007

Google 有一个 api 端点，您可以在其中查找全景/街景的元数据：

`https://maps.googleapis.com/maps/api/streetview/metadata?key=YOUR_API_KEY&location=STRING_ADDRESS_OR_LAT_LNG_COORDINATES`

您可以检查`status`响应的属性。

成功响应

```
{
   "copyright" : "© 2017 Google",
   "date" : "2016-05",
   "location" : {
      "lat" : 48.85783227207914,
      "lng" : 2.295226175151347
   },
   "pano_id" : "tu510ie_z4ptBZYo2BGEJg",
   "status" : "OK"
} 
```

响应失败

```
{
   "status" : "ZERO_RESULTS"
} 
```

@see [https://developers.google.com/maps/documentation/streetview/metadata](https://developers.google.com/maps/documentation/streetview/metadata)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-17T10:29:44.360

```
 mStreetViewPanorama.setOnStreetViewPanoramaChangeListener(streetViewPanoramaLocation -> {
                if (streetViewPanoramaLocation != null && streetViewPanoramaLocation.links != null) {
                    Toast.makeText(StreetViewActivity.this, "StreetView Camera Found", Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(StreetViewActivity.this, "StreetView Camera not Found", Toast.LENGTH_SHORT).show();
                }
            }); 
```

# c# - 查看循环值在第一个值之后不会改变

> ID：13236316
> 
> 赞同：1
> 
> 时间：2012-11-05T16:33:35.150
> 
> 标签：c#, asp.net-mvc, loops

我有一个`ICollection<String>`被传递给我的视图，我做了一个 foreach 来加载部分视图。它循环了正确的次数，但是，它传递的值是相同的，我在模型中知道情况并非如此。

**控制器：**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View("Index", new List<String>());
    }

    [HttpPost]
    public ActionResult Index(List<String> txtValue)
    {
        return View("Index", txtValue);
    }
} 
```

**看法：**

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<List<String>>" %>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Home
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<script type="text/javascript">
    //Deletes the div the Control is in.
    $(".delete").live("click", function () {
        $(this).parent().remove();
    });

    //Adds the TextBoxes to divControls
    function AddTextBox(Value) {
        var elements = "<div><input name=\"txtValue\" type=\"text\" /><input type=\"button\" class=\"delete\" value=\"-\" /><br/></div>";
        $("#divControls").append(elements);
    }
    </script>

<h2>Controls!!!</h2>
<input id="btnAdd" type="button" name="Refresh" value="+" onclick="AddTextBox()" />
<% using (Html.BeginForm())
   { %>
    <input id="btnsubmit" type="submit" name="Submit" onclick="Submit" />
    <div id="divControls">
<%  
        foreach (var text in this.Model)
        { %>
            <%=Html.TextBox("txtValue", text, new { id = "Value", name = "txtValue" })%>
           <% Html.RenderPartial("TextControl", text);
        }
%>
    </div>
<% 
    } 
%>
</asp:Content> 
```

**文本控件.ascx**

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<String>" %>

<div>
    <%=Html.TextBox("txtValue", this.Model, new { id = "Value", name = "txtValue" }) %>
    <input id="btn" type="button" class="delete" value="-" /><br/>
</div> 
```

从控制器传递到视图的模型的值是正确的，即使传递给用户控件“TextControl”的值也是正确的，但是当文本框显示时，它们都只是传入的原始模型的第一个值。

前任。

```
Model as List<String> { "1", "2", "3", "4" } 
```

传递给视图，将正确地遍历每一个，将正确的字符串传递给“TextControl”以创建一个`Html.TextBox("name", this.Model)`. 然而，调试端的一切看起来都是正确的，但是，当它完成时，所有文本框都是“1”（或列表中的第一个值）。

这是我的确切代码的链接：[http ://www.sendspace.com/file/sypl1u](http://www.sendspace.com/file/sypl1u)

**注意：** 我想出了一个只使用的解决方案`<input type="text" name="txtValue" value="<%= this.Model %>" />`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:44:11.713

潜在问题：您使用`ElementAt`的是哪种 LINQ 方法，它喜欢 IList 参数的特殊行为，但您是`txtValue`作为某些查询的结果传入的。在这种情况下`ElementAt`，可能会多次枚举序列，如果无法重新枚举序列，甚至可能会失败。

`foreach`在集合上考虑简单：

```
 foreach (var text in Model)
    {
        Html.RenderPartial("TextControl", text);
    } 
```

# objective-c - 如何获取 HTTP 标头

> ID：13236317
> 
> 赞同：30
> 
> 时间：2012-11-05T16:33:38.810
> 
> 标签：objective-c, http, uiwebview, uiwebviewdelegate

如何从`NSURLRequest`Objective-C 中检索所有 HTTP 标头？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-05T17:03:01.913

这属于简单但不明显的 iPhone 编程问题。值得快速发帖：

HTTP 连接的标头包含在`NSHTTPURLResponse`该类中。如果您有一个变量，您可以通过发送 allHeaderFields 消息`NSHTTPURLResponse`轻松地将标头作为 a取出。`NSDictionary`

对于同步请求——不推荐，因为它们会阻塞——很容易填充`NSHTTPURLResponse`：

```
NSURL *url = [NSURL URLWithString:@"http://www.mobileorchard.com"];
NSURLRequest *request = [NSURLRequest requestWithURL: url];
NSHTTPURLResponse *response;
[NSURLConnection sendSynchronousRequest: request returningResponse: &response error: nil];
if ([response respondsToSelector:@selector(allHeaderFields)]) {
NSDictionary *dictionary = [response allHeaderFields];
NSLog([dictionary description]);
} 
```

对于异步请求，您必须做更多的工作。当回调`connection:didReceiveResponse:`被调用时，它被`NSURLResponse`作为第二个参数传递。你可以把它转换成`NSHTTPURLResponse`这样：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
 NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;    
if ([response respondsToSelector:@selector(allHeaderFields)]) {
    NSDictionary *dictionary = [httpResponse allHeaderFields];
    NSLog([dictionary description]);
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-12T03:58:59.620

Given`NSURLConnection`已从 iOS 9 中弃用，您可以使用 an`NSURLSession`从`NSURL`or获取 MIME 类型信息`NSURLRequest`。

您要求会话检索 URL，然后在委托回调中收到第一个`NSURLResponse`（包含 MIME 类型信息）后，您取消会话以防止它下载整个 URL。

下面是一些简单的 Swift 代码：

```
/// Use an NSURLSession to request MIME type and HTTP header details from URL.
///
/// Results extracted in delegate callback function URLSession(session:task:didCompleteWithError:).
///
func requestMIMETypeAndHeaderTypeDetails() {
    let url = NSURL.init(string: "https://google.com/")
    let urlRequest = NSURLRequest.init(URL: url!)

    let session = NSURLSession.init(configuration: NSURLSessionConfiguration.ephemeralSessionConfiguration(), delegate: self, delegateQueue: NSOperationQueue.mainQueue())

    let dataTask = session.dataTaskWithRequest(urlRequest)
    dataTask.resume()
}

//MARK: NSURLSessionDelegate methods

func URLSession(session: NSURLSession, dataTask: NSURLSessionDataTask, didReceiveResponse response: NSURLResponse, completionHandler: (NSURLSessionResponseDisposition) -> Void) {

    // Cancel the rest of the download - we only want the initial response to give us MIME type and header info.
    completionHandler(NSURLSessionResponseDisposition.Cancel)
}

func URLSession(session: NSURLSession, task: NSURLSessionTask, didCompleteWithError error: NSError?)
{       
    var mimeType: String? = nil
    var headers: [NSObject : AnyObject]? = nil

    // Ignore NSURLErrorCancelled errors - these are a result of us cancelling the session in 
    // the delegate method URLSession(session:dataTask:response:completionHandler:).
    if (error == nil || error?.code == NSURLErrorCancelled) {

        mimeType = task.response?.MIMEType

        if let httpStatusCode = (task.response as? NSHTTPURLResponse)?.statusCode {
            headers = (task.response as? NSHTTPURLResponse)?.allHeaderFields

            if httpStatusCode >= 200 && httpStatusCode < 300 {
                // All good

            } else {
                // You may want to invalidate the mimeType/headers here as an http error
                // occurred so the mimeType may actually be for a 404 page or
                // other resource, rather than the URL you originally requested!
                // mimeType = nil
                // headers = nil
            }
        }
    }

    NSLog("mimeType = \(mimeType)")
    NSLog("headers = \(headers)")

    session.invalidateAndCancel()
} 
```

我在 github 的[URLEnquiry](https://github.com/github-user32/URLEnquiry/)项目中打包了类似的功能，这使得对 MIME 类型和 HTTP 标头进行内联查询更加容易。[URLEnquiry.swift](https://github.com/github-user32/URLEnquiry/blob/master/URLEnquiry/URLEnquiry.swift)是可以放入您自己的项目的感兴趣的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T16:33:38.810

你的ViewController.h

```
@interface YourViewController : UIViewController <UIWebViewDelegate>
    @property (weak, nonatomic) IBOutlet UIWebView *yourWebView;
@end 
```

你的视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //Set the UIWebView delegate to your view controller
    self.yourWebView.delegate = self;

    //Request your URL
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://website.com/your-page.php"]];

    [self.legalWebView loadRequest:request];
}

//Implement the following method
- (void)webViewDidFinishLoad:(UIWebView *)webView{
    NSLog(@"%@",[webView.request allHTTPHeaderFields]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-24T00:20:31.780

使用 Alamofire 提高效率的 Swift 版本。这对我有用：

```
Alamofire.request(YOUR_URL).responseJSON {(data) in

if let val = data.response?.allHeaderFields as? [String: Any] {
      print("\(val)")
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-04T20:08:21.737

您可以使用 AFHTTPSessionManager 框架并在请求之后或期间获取标头，例如下面的示例（获取所有密钥）：

NSHTTPURLResponse *reponse = (NSHTTPURLResponse *)task.response; NSLog(@"%@", [reponseHeaders allHeaderFields]);

访问特定键：[reponseHeaders allHeaderFields][@"someKey"]

参考： [https ://github.com/AFNetworking/AFNetworking/issues/3688](https://github.com/AFNetworking/AFNetworking/issues/3688)

# rest - 骨干 RESTful 同步：无法在 IIS 7.5 上启用 PUT 和 DELETE

> ID：13236323
> 
> 赞同：2
> 
> 时间：2012-11-05T16:34:00.520
> 
> 标签：rest, iis, backbone.js, crud

我尝试了在 Stack Overflow 上找到的所有解决方案，但没有成功。

我的 web.config 包含：

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    <handlers>
        <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
        <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <httpProtocol>
        <customHeaders>
            <add name="Access-Control-Allow-Origin" value="*" />
            <add name="Access-Control-Allow-Methods" value="POST, GET, DELETE, PUT, OPTIONS" />
            <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept" />
        </customHeaders>
    </httpProtocol>
</system.webServer> 
```

我总是得到：

![在此处输入图像描述](../Images/35b2e5ee148e2d71fb58fea5a375a66c.png)

在我的应用程序中，我做了：

```
this.model.save({ firstname: name[0], lastname: name[1] }); 
```

我的收藏是：

```
app.AttendeeCollection = Backbone.Collection.extend({
    url: 'http://test-backbone/attendee',
    model: app.AttendeeModel
}); 
```

我的C＃：

```
[AcceptVerbs(HttpVerbs.Put)]
public JsonResult Index(int id, Attendee updatedAttendee)
{
    var attendee = db.Attendees.Where(a => a.id == id).FirstOrDefault();

    attendee.firstname = updatedAttendee.firstname;
    attendee.lastname = updatedAttendee.lastname;

    db.SaveChanges();

    return Json(attendee, JsonRequestBehavior.DenyGet);
} 
```

# 问题

*   任何的想法？
*   有没有办法用 POST 替换 PUT 和 DELETE？:(

* * *

# 完整控制器（MVC 4、Internet 应用程序、本地 IIS、Win 7）

```
using System.Linq;
using System.Web.Mvc;
using AttendeeManager.Models;

namespace AttendeeManager.Controllers
{
    public class AttendeeController : Controller
    {
        AttendeeEntities db = new AttendeeEntities();

        [AcceptVerbs(HttpVerbs.Get)]
        public JsonResult Index(int? id)
        {
            if (id.HasValue)
            {
                var attendee = db.Attendees
                    .Where(a => a.id == id)
                    .Select(a => new { id = a.id, firstname = a.firstname, lastname = a.lastname })
                    .FirstOrDefault();

                return Json(attendee, JsonRequestBehavior.AllowGet);
            }
            else
            {
                var attendees = db.Attendees
                    .Select(a => new { id = a.id, firstname = a.firstname, lastname = a.lastname })
                    .ToList();

                return Json(attendees, JsonRequestBehavior.AllowGet);
            }
        }

        [AcceptVerbs(HttpVerbs.Post)]
        public JsonResult Index(Attendee createdAttendee)
        {
            db.Attendees.AddObject(createdAttendee);
            db.SaveChanges();

            return Json(createdAttendee, JsonRequestBehavior.DenyGet);
        }

        [AcceptVerbs(HttpVerbs.Put)]
        public JsonResult Index(int id, Attendee updatedAttendee)
        {
            var attendee = db.Attendees.Where(a => a.id == id).FirstOrDefault();

            attendee.firstname = updatedAttendee.firstname;
            attendee.lastname = updatedAttendee.lastname;

            db.SaveChanges();

            return Json(attendee, JsonRequestBehavior.DenyGet);
        }

        [AcceptVerbs(HttpVerbs.Delete)]
        public JsonResult Index(int id)
        {
            var attendee = db.Attendees.Where(a => a.id == id).FirstOrDefault();

            db.Attendees.DeleteObject(attendee);

            db.SaveChanges();

            return Json(attendee, JsonRequestBehavior.DenyGet);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:07:23.543

我想你正在寻找[`emulateHTTP`](http://backbonejs.org/#Sync-emulateHTTP)：

> **模拟HTTP** `Backbone.emulateHTTP = true`
> 
> 如果您想使用不支持 Backbones 的默认 REST/HTTP 方法的旧版 Web 服务器，您可以选择打开`Backbone.emulateHTTP`. 设置此选项将使用 HTTP 伪造`PUT`和`DELETE`请求，使用 true 方法`POST`设置标头。`X-HTTP-Method-Override`

您可能还需要调整服务器代码以查看`X-HTTP-Method-Override`。

# batch-file - 批处理文件中的意外引用，但在 cmd 中完美运行

> ID：13236329
> 
> 赞同：0
> 
> 时间：2012-11-05T16:34:29.260
> 
> 标签：batch-file, citrix

我有一组非常简单的命令，它只创建一个登录到机器的 Citrix 用户的文本，然后读取文件获取会话 ID，使用它来注销用户，然后删除创建的文本文件。当我在命令行中手动输入这些是完美的，但我希望将它们放入批处理文件中。当我尝试运行批处理文件时，它似乎开始然后立即停止。我尝试使用暂停和超时对其进行调试，通过这样做我看到问题是我用来注销用户的循环是问题所在。你能帮忙吗？

```
query user | FIND "citrix" > C:\tempCirtixUsers.txt && FOR /F "eol=; tokens=2,3* delims=, " %i in (C:\tempCirtixUsers.txt) do logoff %i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:38:18.473

您需要将批处理文件中的符号加倍`%`，并在 cmd 提示符下使用单。

```
FOR /F "eol=; tokens=2,3* delims=, " %%i in (C:\tempCirtixUsers.txt) do logoff %%i 
```

# excel - VBA创建菜单项以打开文件？

> ID：13236336
> 
> 赞同：0
> 
> 时间：2012-11-05T16:34:55.950
> 
> 标签：excel, vba

我创建了自己的菜单，其中列出了文件。我希望能够单击文件名并调用 workboo.open。我该如何修改：

```
Set cbButton = vParentMenu.Controls.Add(Type:=msoControlButton)
cbButton.Caption = strSubMenuCaption
If strButtonOnAction <> "" Then cbButton.OnAction = 
```

为达到这个？我知道我需要添加某种操作字符串，该字符串调用 workbook.open 并引用文件路径（我确实有）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:22:25.783

你会想要这样的东西：

```
cbButton.OnAction = "'<FunctionName> <Parametervalue>'" 
```

如果您对函数使用字符串参数，则需要将值括在双引号中：

```
cbButton.OnAction = "'<FunctionName> """<Parametervalue>"""'" 
```

例如：

```
cbButton.OnAction = "'OpenWB """c:\test.xls"""'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:16:01.783

你可以试试这样的..

```
Set cbButton = vParentMenu.Controls.Add(Type:=msoControlButton)
cbButton.Caption = strSubMenuCaption
If strButtonOnAction <> "" Then 
    With cbButton
        .OnAction = "'OpenWorkbook " & strButtonOnAction & "'"
    End With
End If

Sub OpenWorkbook(strFilePath)
    Set objExcel = CreateObject("Excel.Application")
    Set objWorkbook = objExcel.Workbooks.Open(strFilePath)
End Sub 
```

请注意，我自己没有测试过这个......

# iphone - iPhone 尝试使用 NSSTring 类将字符串保存到文件

> ID：13236337
> 
> 赞同：0
> 
> 时间：2012-11-05T16:34:55.813
> 
> 标签：iphone

我正在尝试使用`stringWithString:`and`stringWithContentsOfFile`将字符串保存到文件中，然后将其读回。看起来应该很简单，但是返回的对象`stringWithContentsOfFile`是`null`

代码

```
// test strings
NSString *s=[ NSString stringWithString:@"hi"];
[ s writeToFile:@"test.txt" atomically:TRUE];

NSString *g=[ NSString stringWithContentsOfFile:@"test.txt"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:54:46.697

使用您的代码，它将尝试将 test.txt 文件保存在根目录中，我们无法访问根目录。保存文件的唯一方法是将其写入应用程序文档目录：

```
NSString *path = [NSString stringWithFormat:@"%@/test.txt", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];
[s writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

# apache-camel - 在 Apache Camel 路由中处理传入的 JMSCorrelationId

> ID：13236341
> 
> 赞同：0
> 
> 时间：2012-11-05T16:35:00.460
> 
> 标签：apache-camel

我有一条骆驼路线在 JMS（activemq）队列上消耗，目标是以请求/回复方式调用。在这条路由中，我拆分消息并调用另一个 activemq 队列（也以请求/回复的方式）。

这是显示情况的最小路线

```
<route>
   <from uri="activemq:A" />
   <split>
      <xpath>/root/subpart</xpath>
      <inOut uri="activemq:B" />
   </split>
</route> 
```

问题是 Camel 没有设置新的 JMSCorrelationId（因为传入消息中已经有一个）。如果什么都不做，您会收到带有未知相关 ID 的响应，并且交换永远不会结束。

我没有详细说明，但我的猜测是相同的临时队列用于孔拆分器，但它（逻辑上）期望每条消息都有不同的相关 ID。所有使用相同，它收到第一个，不知道如何处理其他人。

处理这种情况的最佳解决方案是什么？

我发现工作的一个是将传入的 JMSCorrelationId 保存在另一个标题中（但不确定我是否需要），然后将其删除。这并不像我希望的那样干净，但我想不出别的东西。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:05:04.743

本质上，您的案例在此[Jira 问题](https://issues.apache.org/jira/browse/CAMEL-5390)中有所描述。 似乎 2.11 中会增加一个功能，您可以要求 Camel 创建一个新的 corr-id。

那么，与此同时，您为什么不继续您的工作——在将 JMSCorrelationId 标头发`<removeHeader headerName="JMSCorrelationId" />` 送到“activemq:B”之前删除它？我想这是目前最好的解决方案。

当然，您也可以在第二个端点上使用“useMessageIDAsCorrelationID”选项。

# django - 使用 Haystack 和 Solr 问题实现搜索

> ID：13236343
> 
> 赞同：1
> 
> 时间：2012-11-05T16:35:12.123
> 
> 标签：django, search, solr, django-haystack

我正在尝试对基于 django 的网站实施搜索。

在遵循[教程](http://django-haystack.readthedocs.org/en/v1.2.7/tutorial.html)时，我发现了这一点：

> 如果您使用的是 Solr 后端，那么您还有一个额外的步骤。Solr 的配置是基于 XML 的，因此您需要手动重新生成模式。您应该`run ./manage.py build_solr_schema`首先将 XML 输出放到 Solr 的 schema.xml 文件中，然后重新启动 Solr 服务器。

**首先**，我不知道将我的 schema.xml 放在哪里，经过一番研究后，我想我会在我的项目中创建一个文件夹来放置它：`myprojectname/solr/schema.xml`. 是对的吗？

**二**、如何重启Solr？

**更新**

我下载了 Solr，将其解压缩并将生成的 schema.xml 放入其中`example/solr/conf`

然后我开始 solr`java -jar start.jar`

但是当我尝试建立索引时： `./manage.py rebuild_index`

我得到：

```
WARNING: This will irreparably remove EVERYTHING from your search index.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y

Removing all documents from your index because you said so.
All documents removed.
Indexing 1 News.
Failed to add documents to Solr: [Reason: None]
<response><lst name="responseHeader"><int name="status">400</int><int    name="QTime">4</int></lst><lst name="error"><str name="msg">ERROR: [doc=news.news.2]   unknown field 'django_id'</str><int name="code">400</int></lst></response>
Indexing 1 entries.

Failed to add documents to Solr: [Reason: None]
<response><lst name="responseHeader"><int name="status">400</int><int name="QTime">17</int></lst><lst name="error"><str name="msg">ERROR: [doc=zinnia.entry.2] unknown field 'django_id'</str><int name="code">400</int></lst></response> 
```

我验证了我的 schema.xml，我确实有：

```
<field name="django_ct" type="string" indexed="true" stored="true" multiValued="false" />
<field name="django_id" type="string" indexed="true" stored="true" multiValued="false" /> 
```

[**PS** 我正在使用 Django 1.2 和 Haystack 1.2.7]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:49:08.410

solr 服务器需要有您的 schema.xml 的副本，而不是 django。我通常在我的 django 项目中保留一份 schema.xml 的副本以进行版本控制，但是 solr 在那里找不到它。

你是本地的solr服务器吗？您使用的是托管还是远程 Solr 服务？我在本地开发然后使用 websolr b/ci 不想为生产配置 solr。

## 对于 OSX 上的本地开发人员

我假设这是 OSX 上的本地开发，并且您安装了自制软件（假设 - 如果不是这种情况，请给我更多信息）：

```
brew install solr 
```

这将在某个地方安装 Solr，例如：`/usr/local/Cellar/solr/...`

注意：当我在本地开发时，我喜欢使用结构来运行部署和一些启动任务。

所以在我的 fabfile.py 我有一个结构命令将我的 schema.xml 复制到正确的文件中并启动 solr 服务器（我只是`fab solr`在 cmd 行运行）

```
def solr() :
    # build a new updated schema.xml (changes to indexes/models may require this so always do it for local testing)
    local('python manage.py build_solr_schema > schema.xml')
    # copy the schema.xml into the proper directory
    local('cp schema.xml /usr/local/Cellar/solr/3.6.0/libexec/example/solr/conf/schema.xml')
    # start the solr server
    local('cd /usr/local/Cellar/solr/3.6.0/libexec/example && java -jar start.jar') 
```

注意：如果你不使用fabric，你可以在命令行上运行这些命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T08:59:11.627

我有同样的问题，重建任务失败。对我来说，解决方案是：

1.  新建一个schema.xml，放到对应的文件夹中

2.  重启 Solr

3.  重建索引没有问题

# linux - Linux 命令输出作为另一个命令的参数

> ID：13236344
> 
> 赞同：6
> 
> 时间：2012-11-05T16:35:14.220
> 
> 标签：linux, parameters, command, pipe

我想将命令元素的输出列表作为另一个命令的参数传递。我发现了一些其他页面：

*   [如何在标准输出上显示 Linux 命令的输出并将其通过管道传输到另一个命令？](https://stackoverflow.com/questions/10116358/how-to-display-the-output-of-a-linux-command-on-stdout-and-also-pipe-it-to-anoth)
*   [使用 bash 命令的输出（带管道）作为另一个命令的参数](https://stackoverflow.com/questions/9635705/use-output-of-bash-command-with-pipe-as-a-parameter-for-another-command)

但它们似乎更复杂。

我只想将文件复制到调用 Linux`find`命令的每个结果中。

这里有什么问题？：

```
find . -name myFile 2>&1 | cp /home/myuser/myFile $1 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T16:42:19.880

这就是你想要的：

```
find . -name myFile -exec cp /home/myuser/myFile {} ';' 
```

对此的细分/解释：

*   `find`: 调用 find 命令
*   `.`：从当前工作目录开始搜索。
*   由于没有指定深度标志，这将递归搜索所有子文件夹
*   `-name myFile`: 查找具有明确名称的文件`myFile`
*   `-exec`：对于搜索结果，使用它们执行附加命令
*   `cp /home/myuser/myFile {}`: 复制`/home/myuser/myFile`以覆盖`find`to 返回的每个结果；想想`{}`每个搜索结果的去向。
*   `';'`：用于分隔要运行的不同命令`find`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T16:45:05.847

有几种方法可以解决这个问题，具体取决于您是否需要担心名称中包含空格或其他特殊字符的文件。

如果所有文件名都没有空格或特殊字符（它们仅由字母、数字、破折号和下划线组成），那么以下是一个可行的简单解决方案。您可以使用`$(command)`执行命令，并将结果替换为另一个命令的参数。shell 会将结果拆分为空格、制表符或换行符，并依次`for`分配每个值，并对每个值运行命令。`$f`

```
for f in $(find . -name myFile)
do
    cp something $f
done 
```

如果确实有空格或制表符，则可以使用 find 的`-exec`选项。您通过`-exec command args`，将`{}`文件名放在要替换的位置，并以 . 结尾的参数`;`。您需要引用`{}`and`;`以便 shell 不会解释它们。

```
find . -name myFile -exec cp something "{}" \; 
```

有时`-exec`是不够的。例如，在[这个问题](https://stackoverflow.com/questions/13225488/bash-run-script-on-every-jpg-file-in-a-directory-with-subdirectories/13225527#13225527)中，他们想使用 Bash 参数扩展来计算文件名。为此，您需要通过`-exec bash -c 'your command'`，但随后您将遇到引用`{}`替换问题。为了解决这个问题，您可以使用`-print0`from`find`打印以空字符（在文件名中无效）分隔的结果，并将其通过管道传递到`while read`在空值上拆分参数的循环：

```
find . -name myFile -print0 | (while read -d $'\0' f; do
    cp something "$f"
  done) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T16:37:39.157

管道会将一个程序的输出发送到另一个程序的输入。 `cp`不会从终端的输入流中读取，它仅使用命令行上的参数。

您想`xargs`与管道或`find`'`exec`参数一起使用而不是管道。

```
find . -name myFile 2>&1 | xargs -I {} cp /home/myuser/myFile {} 
```

*注意：选项`-I {}`定义`{}`为占位符，如果它与要执行的命令冲突，您也可以使用其他占位符。*

# java - 创建我自己的注解 Java

> ID：13236348
> 
> 赞同：1
> 
> 时间：2012-11-05T16:35:34.637
> 
> 标签：java, facebook, annotations

这是我第一次创建 Annotation Java，我想创建一个自己的注解，然后在必要时禁止执行测试。问题是我的许多测试都必须使用 Facebook api，有时它们不起作用，所以我想要一个名为 @Facebook 的注释，当添加到测试中时它作为 @Suppress 注释工作，所以我编写了以下代码.. .那不幸的是不起作用。任何人都可以帮助我吗？

```
 @Retention(RetentionPolicy.RUNTIME)
        public @interface Facebook {
            Suppress notToBeRun() default @Suppress;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-09T19:58:01.513

Java 包含一个灵活的注释 API，具有多种应用可能性。最初开发用于在 Java EE 堆栈中指定企业语义（Java-bean 是无状态的还是有状态的、单例的等），注解接口现在也普遍用于 Java 中的上下文相关注入 (CDI)。您的问题涉及如何将 Java 注释 API 用于 CDI。

首先，您需要为希望 Java 注入的每个特定用户定义的 CDI 选项定义一个限定符接口类。您希望通过注入加载 Facebook 实现。您的界面 ( **Facebook.java** ) 如下所示：

```
@Qualifier
@Target({ElementType.TYPE, ElementType.FIELD, ElementType.PARAMETER})
@Documented
@Retention(RetentionPolicy.RUNTIME)
public @interface Facebook {
} 
```

第一个术语`@Qualifier`表示您定义了一个新的限定符，实际上是`@Facebook`Java 注入机制已知的唯一名称 ( )。

`@Target`注解表示您的注解可以位于 Java 类型声明、Java 字段（特别是变量声明）或方法参数之前。您可以添加第四个限定符以允许您的注释也可以在方法之前使用，即`ElementType.METHOD`.

`@Documented`定义一个注解，确保使用该注解的类在它们生成的 JavaDoc 中显示这一点。`@Retention`必须设置为`RetentionPolicy.RUNTIME`才能在 Java 应用程序启动时激活注释（已*部署*，在 Web 应用程序服务器上下文中）。

您现在需要定义一个通用的 Java 接口类 ( **SocialMediaService.java** )，只是一个普通的 Java 接口：

```
public interface SocialMediaService {
   boolean login(String userId, String password);
   void logout();
   String searchForMessages(String[] friends);
} 
```

该接口可以通过`implements`Java 构造以不同的方式实现。使用先前定义的注释，您可以在 Java 代码中选择要使用的替代实现。

这是 Java 类的 Facebook 示例（**Facebook.java**，在与上面指定的接口限定符类*不同的包中）：*

```
@Facebook
public class Facebook implements SocialMediaService {

   @Override
   public boolean login(String userId, String password) {
       ...
       your application logic
       ...
       return true;
   }
   @Override
   public void logout() {
       ...
       your application logic
       ...
   }
   @Override
   public String searchForMessages(String[] friends) {
       ...
       your application logic
       ...
       return searchResult;
   }  
} 
```

您可以在众多不同的实现`@LinkedIn`等中进行选择，每个都有其特定的 Java 实现类（替代品`public class Facebook`）。

在您的 Java 类中，您现在可以使用 CDI 来注入选择的 Java 实现。

应用 CDI的后端 Java bean ( **BackendSocialMediaAnalysis.java )：**

```
public class BackendSocialMediaAnalysis {
   ...
   @Inject @Facebook
   private SocialMediaService genericMediaService;
   ...
} 
```

替换`@Facebook`为`@LinkedIn`将替代 (LinkedIn) 实现加载到 genericMediaService 中的结果。

# jython - Jython类在继承Java接口时会自动调用setter吗？

> ID：13236350
> 
> 赞同：2
> 
> 时间：2012-11-05T16:35:41.393
> 
> 标签：jython, pydev

我浏览了 Jython.org 上的 Jython 书，并仔细阅读了 Internet 以获得一些答案，但我没有看到任何暗示以下（在我看来很奇怪）行为的地方。我正在使用带有 Jython 2.5.3 的 Eclipse 3.6.1 中的 PyDev 1.5.7 来执行此操作。

执行 self.val = val 时，从带有 setter 的 Java 接口继承的 Jython 类是否会自动调用 setVal？

这是Java接口：

```
package com.me.mypackage
import org.python.core.PyDictionary;

public interface MyInterface {

    public double getMaxBW();

    public boolean setMaxBW(double bw);

} 
```

这是 Jython 类：

```
from com.me.mypackage import MyInterface

class MyClass(MyInterface):

  def __init__(self, maxBW):
    self.maxBW = maxBW

  def setMaxBW(self, maxBW):
    self.maxBW = maxBW

  def getMaxBW(self):
    return self.maxBW 
```

当我实例化类时，在 __init__ 函数中：

1.  运行 self.maxBW = maxBW 时调用 setMaxBW
2.  此函数调用依次运行 self.maxBW = maxBW
3.  此代码再次调用 setMaxBW
4.  此函数调用依次运行 self.maxBW = maxBW
5.  永远重复

由于这种无限递归，在达到最大递归深度后，我得到了一个 RuntimeError 。

一个想法是，这是漂亮的新型 Python 类正在做的事情（我的大部分 Python 时间都花在了老式类上），但是纯 Jython 不会出现这个问题（在 Eclipse 中或独立于命令行) 不继承自 Java 接口。我还没有尝试过 Eclipse 之外的接口继承。

现在我重申我最初的问题，但在我的代码上下文中：当 self.maxBW = maxBW 被执行时，一个继承了带有 setter 的 Java 接口的 Jython 类是否会自动调用 setMaxBW？

# api - REST API 命名约定

> ID：13236351
> 
> 赞同：4
> 
> 时间：2012-11-05T16:35:43.407
> 
> 标签：api, rest, naming

鉴于此 URI：

```
/myapp/books/status/{status} 
```

例如 ：

```
/myapp/books/status/new 
```

这将返回所有标记有此状态的书籍。

返回所有未标记为特定状态的书籍的正确 URI 是什么？

```
/myapp/books/notstatus/new 
```

我想归还所有书籍的集合，除了具有特定状态的书籍..

请指教...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:39:06.707

我建议使用查询参数来过滤您的图书列表资源的状态：

```
myapp/books/?status=new
myapp/books/?status=not_new 
```

两个查询都返回相同的资源（书籍列表），您只是在该列表中过滤掉您想要的类型，因此使用查询参数是有意义的。我使用`not_`状态前缀来进行反向查询，但您可以使用任何您想要的约定。

REST 不要求您避免获取参数（似乎有些人认为获取参数是巫毒），只是不要使用它们进行虚假 RPC 调用:)

我喜欢这种方法的原因是，当您可能想要为所有包含多条信息的书籍添加检查时，它会打开您的选项，例如状态为新且状况良好的书籍。

```
 myapp/books/?status=new&condition=good 
```

如果您尝试将其分解为 url 段而不是查询参数，它会很快变得混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:08:36.513

据我所知，有几种方法，它们都是正确的（从 REST 角度来看）：

*   查询字符串参数

> myapp/books?status=new

*   OData 查询 [http://www.odata.org/documentation/uri-conventions](http://www.odata.org/documentation/uri-conventions)

> myapp/books?$filter=status eq 'new'

*   在URI中，也不错

> 我的应用程序/书籍/状态/{状态}

我个人更喜欢查询字符串或 OData。

当技术特定（ASP.NET Web API、WCF 数据服务，由非 Microsoft 提供的服务也应该是等效的）有助于避免为此类查询编写任何代码时，OData 尤其有用。

它允许公开预过滤的集合，然后使用此类查询从客户端过滤它。在公开集合的这种情况下，我使用 OData 查询。

# node.js - 如何在没有 .NET/COM 的情况下通过加密服务提供程序 (CSP) 生成随机字节？

> ID：13236355
> 
> 赞同：0
> 
> 时间：2012-11-05T16:35:53.423
> 
> 标签：node.js

有没有办法在不使用 .NET/COM 的情况下通过 Microsoft 的加密服务提供程序 (CSP) 生成强随机字节？例如，使用命令行或其他方式？

我想在 NodeJS 中更具体地使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:16:53.427

是的，使用 Windows API。这是一个示例 C++ 代码：

```
#include "Wincrypt.h"

// ==========================================================================
HCRYPTPROV hCryptProv= NULL; // handle for a cryptographic provider context

// ==========================================================================
void DoneCrypt()
{
    ::CryptReleaseContext(hCryptProv, 0);
    hCryptProv= NULL;
}

// --------------------------------------------------------------------------
// acquire crypto context and a key ccontainer
bool InitCrypt()
{
    if (hCryptProv) // already initialized
        return true;

    if (::CryptAcquireContext(&hCryptProv        ,   // handle to the CSP
                              NULL               ,   // container name
                              NULL               ,   // use the default provider
                              PROV_RSA_FULL      ,   // provider type
                              CRYPT_VERIFYCONTEXT )) // flag values
    {
        atexit(DoneCrypt);
        return true;
    }

    REPORT(REP_ERROR, _T("CryptAcquireContext failed"));
    return false;
}

// --------------------------------------------------------------------------
// fill buffer with random data
bool RandomBuf(BYTE* pBuf, size_t nLen)
{
    if (!hCryptProv)
        if (!InitCrypt())
            return false;

    size_t nIndex= 0;

    while (nLen-nIndex)
    {
        DWORD nCount= (nLen-nIndex > (DWORD)-1) ? (DWORD)-1 : (DWORD)(nLen-nIndex);
        if (!::CryptGenRandom(hCryptProv, nCount, &pBuf[nIndex]))
        {
            REPORT(REP_ERROR, _T("CryptGenRandom failed"));
            return false;
        }

        nIndex+= nCount;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T19:09:30.687

参考[http://technet.microsoft.com/en-us/library/cc733055(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc733055(v=ws.10).aspx)

```
netsh nap client set csp name = <name> keylength = <keylength> 
```

如果此命令对您有用，只需通过 nodejs 执行即可。(需要('child_process').exec)

# dynamics-crm-2011 - 在图表中的任意位置写入自定义文本

> ID：13236357
> 
> 赞同：0
> 
> 时间：2012-11-05T16:35:56.000
> 
> 标签：dynamics-crm-2011

我创建了一个不错的图表，但缺少一件事。我希望能够在其中的某处设置文本。最佳解决方案是例如在我的图表中间用巨大的黄色字母打出的当前日期。

我已经用谷歌搜索过这样的事情，但没有一个链接（我用[谷歌搜索过#1](http://blogs.msdn.com/b/crm/archive/2010/10/20/microsoft-dynamics-crm-dashboards-for-techies.aspx)的[证明，我用谷歌搜索过#2](http://blogs.msdn.com/b/crm/archive/2011/01/04/crm-2011-charts-know-the-real-potential-part-i.aspx)的证明）给出了任何关于它是否可能的提示。事实上，如果描述和箭头后来不在图像处理器中绘制，那么第二个链接中的模型图像对我来说**将是一些东西。**

注意。这根本不是报告。它只是一个图表——一个单独的、孤独的图表——显示了几个系列的值。我可以控制外观、图例等。但是，我想放置一个浮动文本对象（可通过 CSS 格式化的 DIV 将是完美的）、精灵、叠加，随心所欲地调用它，这将获得它的价值从给定的字段（例如当前日期）。

如果我可以将它自由地放置在图表上的任何位置，那会更加“完美”，但我会选择放置在“右上角”等表格上。或者，如果有一个选项可以将两个“视图”相互叠加或类似的东西（我正在用这个绕过灌木丛）。

这是可以实现的，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:30:39.810

您可能想查看他们在地图上放置描述性文本的[链接。](http://community.dynamics.com/product/crm/crmtechnical/b/crmteamblog/archive/2011/01/19/custom-charting-capabilities-in-microsoft-dynamics-crm-2011.aspx)我还没有让它工作（也没有很努力地尝试），但是通过以下代码设置一些文本而不是图表非常容易。

```
<visualization>
  <primaryentitytypecode>blobb</primaryentitytypecode>
  <name>My custom name</name>
  <webresourcename>MyCustomHttpFile</webresourcename>
</visualization> 
```

有时我**会**很高兴用 Flash 文本给客户一个惊喜，所以这个想法值得探索。奇怪的是，我还没有找到任何关于如何做到这一点的好的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:16:49.277

对，我玩了一场，对 SDK 进行了很好的挖掘，有点谷歌，这是我能想到的最好的。

我知道如何将文本放置在图表上的任意位置，但仅限于静态文本，例如我不知道如何将文本动态绑定到任何东西 - 我怀疑这更多地与 CRM 而非图表有关，我找不到太多CRM 和图表的文档。

所以我发现[TextAnnotation](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.textannotation.aspx)可以让你在任何你喜欢的地方放置文本。这包含在`Annotations`集合中。

例如：

```
<Chart>
  ...
  <Annotations>
    <TextAnnotation Text="This is an annotation" Name="TextAnnotation1" X="20" Y="50">
    </TextAnnotation>
  </Annotations>
  ...
</Chart> 
```

重要的是要注意 的位置`TextAnnotation`是相对的，例如注释将出现在图表左侧宽度的 20% 处。0,0 是左上角。MSDN 有更多关于[定位](http://msdn.microsoft.com/en-us/library/dd456725.aspx)的细节。

所以我可以创建一个这样的图表：

![在此处输入图像描述](../Images/656e6a332d633c406f872a6ee5c3c17e.png)

*你好世界！*是注释。

使用这个 xml：

```
<Chart Palette="None" PaletteCustomColors="55,118,193; 197,56,52; 149,189,66; 117,82,160; 49,171,204; 255,136,35; 97,142,206; 209,98,96; 168,203,104; 142,116,178; 93,186,215; 255,155,83">
  <Series>
    <Series ShadowOffset="0" IsValueShownAsLabel="True" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PieLabelStyle=Inside, PieDrawingStyle=Default" ChartType="pie">
      <SmartLabelStyle Enabled="True" />
    </Series>
  </Series>
  <ChartAreas>
    <ChartArea>
      <Area3DStyle Enable3D="false" />
    </ChartArea>
  </ChartAreas>
  <Legends>
    <Legend Alignment="Center" LegendStyle="Table" Docking="right" IsEquallySpacedItems="True" Font="{0}, 11px" ShadowColor="0, 0, 0, 0" ForeColor="59, 59, 59" />
  </Legends>
  <Titles>
    <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="0, 0, 0"></Title>
  </Titles>
  <Annotations>
    <TextAnnotation Text="HELLO WORLD!" Font="Stencil, 15.75pt, style=Bold, Italic, GdiCharSet=0" Name="TextAnnotation1" X="20" Y="50" ForeColor="Orange">
    </TextAnnotation>
  </Annotations>
</Chart> 
```

如果这不能满足您的要求，我建议您查看 SSRS 报告或其他一些 IFramed 到仪表板的自定义部分。

# html - 从 Illustrator 为 Web 导出 SVG 的最佳设置？

> ID：13236365
> 
> 赞同：134
> 
> 时间：2012-11-05T16:36:15.460
> 
> 标签：html, css, image, svg, adobe-illustrator

我希望在网站上使用 SVG 徽标——让它在所有设备的响应式设计上看起来都很棒。

但既然[有问题](http://caniuse.com/#search=svg)，我想支持尽可能多的设备和浏览器。加载速度也是一个重要的考虑因素。Adobe Illustrator 中的导出设置如何适应这一切？

在 Illustrator 中，有多个 SVG 导出选项。首先，**哪种 SVG 配置文件最好？**

![在此处输入图像描述](../Images/5d962ce50629ce616678a35a7e8549af.png)

我假设 SVG Tiny 的文件大小较小？许多设备都支持 SVG Tiny 吗？最重要的区别是什么？（无需阅读[这个 W3 怪物](http://www.w3.org/TR/SVGMobile/)。）

其次，我认为图像位置的最佳选择是“链接”？（见感叹号后的说明。）

![在此处输入图像描述](../Images/110c0835716f6014d2c7e7d14b77cd19.png)

或者，浏览器如何支持“嵌入”选项？

![在此处输入图像描述](../Images/0e2158f9ade8471abd47260620ff093a.png)

谢谢！

> PS 会有一个备用 alpha-PNG 选项，但我希望尽可能地支持 SVG。（想一想，在这种情况下，备用选项（如 JPG）可能是最好的选择，因为 alpha-PNG 本身需要针对旧版 IE 的解决方案。）

**更新：**还有更多可以配置的选项。我不使用文本，所以我看到的唯一相关的是小数位。对于徽标，最大显示为 200x200 像素（因此在 Retina 显示器上为 400x400 像素），“3”是最佳设置吗？或“2”以最小化文件大小？

![在此处输入图像描述](../Images/a23551c51fd7e3e2b5f07d5c7306fb9d.png)

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-11-05T18:59:44.040

[![在此处输入图像描述](../Images/442d7cd02e9869cb01762ca568775340.png)](https://i.stack.imgur.com/ETM0o.png)

**SVG 配置文件**

*   SVG 1.0：所有现代桌面和移动浏览器都支持 SVG 1.1，所以永远不要选择这个选项。
*   **SVG 1.1：你几乎总是想要这个。**
*   SVG Tiny/Basic：这是用于移动设备的 SVG 子集。只有少数设备支持 SVG Tiny，而不是完整的规范，所以选择 SVG 1.1。

注意：SVG Tiny 不会减小文件大小，它只是 SVG 的一个子集，足以满足低处理能力设备的需求。它将丢弃渐变、不透明度、嵌入字体和过滤器。

Erik Dahlström 说：

> 所有 SVG 1.1 完整查看器都应该能够显示所有 SVG 1.1 Tiny/Basic 内容（根据规范），可能还有 Illustrator 生成的所有 SVG 1.2 Tiny 内容。

**字体**注意：如果您的图像中没有任何文本，则此设置无关紧要。

*   Adobe CEF：如果您打算在浏览器中显示它，请不要使用此选项。这是 Adob​​e 在 SVG 文件中嵌入字体的方式，据我所知，这仅受 Adob​​e 的 SVG 查看器插件支持。

*   SVG：这会将字体嵌入为 SVG，Firefox 不支持该字体，但如果您打算仅支持移动设备（通常运行 webkit），这是一个不错的选择。

*   **创建大纲：您大部分时间都希望这样做**，除非您有大量文本。如果您有大量文本，您将希望使用 WOFF 嵌入字体，但您必须手动执行此操作。

**子集**：

*   无：这将否定先前的设置并且不会嵌入任何字体，如果您不关心字体回落到用户计算机中的其他字体，请选择此选项。

*   **仅使用字形：如果您选择嵌入字体，您**大部分时间都需要这个。**它仅嵌入使用的字符，因此不会增加文件大小。**

***   [其余子集]：这很清楚，您可以选择包括整个字体或它的子集。仅当您的 SVG 是动态的并且文本可能会根据用户输入而更改时，它才有用。** 

 ****图像**：这仅在您包含位图图像时才重要

*   **嵌入：这通常是您想要**的，它将图像编码为数据 uri，因此您只需上传一个文件而不是 svg 文件及其伴随的位图图像。

*   链接：仅当您有多个引用一个位图文件的 svg 文件时才使用此选项（因此每次渲染 svg 文件时都不会下载它）。

`<img>`请注意，如果通过标签显示 SVG，则不会显示链接的位图图像，因为`img`不允许加载外部资源。此外：webkit 有一个错误，即使您嵌入了 svg 文件中的位图图像也不显示。简而言之：`<svg>`如果您打算嵌入或链接位图图像，请使用普通标签，不要使用`<img>`.

**保留 Illustrator 编辑功能**

我更喜欢将 .ai 文件保存为我的源图像，并将 SVG 文件视为一项`Export for web`功能。这样您就可以专注于减小文件大小并拥有具有所有编辑功能的矢量文件的原始副本。所以不要选这个。

**小数位**

默认设置`3`是合理的设置，您几乎可以忘记它。

但是，如果您的路径非常复杂，并且包含许多点，则将此设置降低到 1 甚至 0 将大大减小文件大小。但是您必须小心，因为贝塞尔线段对此设置非常敏感，并且它们可能看起来有点失真。因此，如果您降低此设置，请始终确保它在浏览器中看起来可以接受。

**编码**

字符编码背后的解释是相当技术性的，它只涉及带有文本的 svg 文件。**您最可能需要的编码是 UTF-8**，除非您知道自己在做什么，否则不要更改它。

**包括切片数据**

这会将元数据膨胀添加到 SVG 文件中，除非您打算稍后在 Illustrator 中打开 SVG 文件并找到切片（如果有切片），**否则不要检查此选项**

**包括 XMP**

有关该文件的更多元数据，您可以[在此处阅读 XMP](https://en.wikipedia.org/wiki/Extensible_Metadata_Platform)。**不要检查这个**

**响应式**

请注意，此设置将消除 svg 根节点的 height 和 width 属性，假设您将通过 css 缩放包含的图形。然而，在某些情况下，您希望单个图形声明它的大小。确保在这些情况下取消选中此设置。

**输出更少的`<tspan>`元素**

如果您没有文本，这将显示为灰色。SVG 不支持字距调整表，因此，某些字符序列看起来间隔太大，即`AVA`. Illustrator 通过添加`tspan`元素和稍微调整角色位置来解决问题。这会给文件增加一点膨胀，**除非您更关心文件大小而不是文本外观，否则不要检查这一点**。

**将`<textpath>`元素用于路径上的文本**

如果路径上没有文本，这将显示为灰色。浏览器在将文本放置在路径上时往往会发生很大变化，因此 Illustrator 尝试通过将旋转和位置应用于角色而不是将工作留给浏览器来提供帮助。**除非您更关心文件大小而不是文本外观，否则不要检查此项**。

* * *

一般来说，我建议你看一下 SVG，你会发现它看起来很像 HTML，它允许你调整 Illustrator 中无法完成的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-23T18:53:20.110

更新到 @methodofaction 的出色解释。

当前版本的 Illustrator 中的导出选项发生了一些变化。

1.  Adobe SVG Viewer 不再是一个东西。

2.  但更重要的是，我相信默认情况下会检查一个新设置“响应式”。请注意，此设置将消除 svg 根节点的 height 和 width 属性，假设您将通过 css 缩放包含的图形。然而，在某些情况下，您希望单个图形声明它的大小。确保在这些情况下取消选中此设置。**

# c++ - 初始化嵌套模板

> ID：13236366
> 
> 赞同：3
> 
> 时间：2012-11-05T16:36:22.437
> 
> 标签：c++, templates, constructor

我正在尝试了解有关模板的更多信息，但遇到了一个我似乎无法解决的问题。目前，下面的课程工作正常。

```
#include <iostream>
#include <vector>
#include <cstring>
using namespace std;

template <class T, int s>
class myArray{
public:
    T* data;
    inline T& operator[](const int i){return data[i];}
    myArray(){
        data=new T[s];
    }
    myArray(const myArray& other){
        data=new T[s];
        copy(other.data,other.data+s,data);
    }
    myArray& operator=(const myArray& other){
        data=new T[s];
        copy(other.data,other.data+s,data);
        return *this;
    }
    ~myArray(){delete [] data;}
}; 
```

如果我使用它：

```
myArray<myArray<myArray<int,10>,20>,30> a; 
```

a 现在是 30x20x10 数组，我可以使用普通数组括号访问它，例如 a[5][5][5]。我希望添加一个功能，以便我可以编写：

```
myArray<myArray<myArray<int,10>,20>,30> a(10); 
```

例如，将所有条目初始化为 10。我不知道该怎么做。据我了解， myArray 的每一层都是使用默认构造函数构造的。如果我将其更改为：

```
myArray(int n=0){
        data=new T[s]; 
        fill(data,data+s,n); //T might not be of type int so this could fail.
} 
```

我认为当数据不是 int 类型（即在维度> 1 的任何数组上）时，这应该会失败，但事实并非如此。它在数组为正方形时有效，但如果不是，则某些条目未设置为 10。有谁知道标准向量类如何实现这一点？任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:39:40.007

好吧，尝试这样的事情：

```
 myArray()
 : data(new T[s]())      // value-initialization!
 {
 }

 myArray(T const & val)
 : data(new T[s])        // default-initialization suffices
 {
     std::fill(data, data + s, val);
 } 
```

如果你喜欢可变参数模板，你可能会编造一些更怪诞的东西，涉及可变参数填充的初始化列表，但我认为我们已经完成了一周的学习。

请注意 using 的基本缺陷`new`：任何一个版本都要求您的类`T`可以在某些“默认”状态下实例化，*并且*它是可分配的，即使我们在第二个版本中从不要求默认状态。这就是为什么“真正的”库将内存分配和对象构造分开的原因，`new`除非是放置版本，否则您永远不会看到表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:36:58.920

对包含其他数组的数组进行专门化。为此，您需要一些通用的实现类来通用和专门的 MyArray：

常见实现（我为您做了一些修复 - 请参阅 !!! 评论）：

```
template <class T, int s>
class myArrayImpl {
public:
    T* data;
    T& operator[](int i){return data[i];} //!!! const before int not needed
    const T& operator[](int i) const {return data[i];} //!!! was missing
    myArrayImpl(){
        data=new T[s]();
    }
    myArrayImpl(const myArrayImpl & other){
        data=new T[s];
        copy(other.data,other.data+s,data);
    }
    myArrayImpl& operator=(const myArrayImpl& other){
        T* olddata = data; // !!! need to store old data
        data=new T[s];
        copy(other.data,other.data+s,data);
        delete [] olddata; //!!! to delete it after copying
        return *this;
    }
    ~myArrayImpl(){delete [] data;}
}; 
```

然后进行一般实现 - 注意`value_type`and的定义`setAll`：

```
template <class T, int s>
class myArray : private myArrayImpl<T,s> {
    typedef myArrayImpl<T,s> Impl;
public:
    using Impl::operator[];
    myArray() : Impl() {}
    typedef T value_type; // !!!
    explicit myArray(const value_type& value) {
       setAll(value);
    }
    void setAll(const value_type& value) {
       fill(this->data, this->data + s, value);
    }
}; 
```

以及 myArray 的 myArray 的专用版本 - 另请参见`value_type`和的区别`setAll`：

```
template <class T, int s1, int s2>
class myArray<myArray<T,s2>,s1> : private myArrayImpl<myArray<T,s2>,s1> {
    typedef myArrayImpl<myArray<T,s2>,s1> Impl;
public:
    using Impl::operator[];
    myArray() : Impl() {}
    typedef typename myArray<T,s2>::value_type value_type; // !!!
    explicit myArray(const value_type& value) {
       setAll(value);
    }
    void setAll(const value_type& value) {
       for_each(this->data, this->data + s1, [value](myArray<T,s2>& v) { v.setAll(value); });
    }
}; 
```

和用法：

```
int main() {
  myArray<myArray<myArray<int,7>,8>,9> a(7);
  std::cout << a[0][0][0] << std::endl;
  std::cout << a[8][7][6] << std::endl;
} 
```

完整示例：http: [//ideone.com/0wdT9D](http://ideone.com/0wdT9D)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:44:15.273

std::vector 在内存块上使用新位置。它在第二行代码中分配内存后构造数据。

这种技术也适用于你。小心放置 new 因为它也需要您手动调用析构函数。

这是一条没有放置新的半途而废的路线：

```
template<typename U>
explicit MyArray( U const& constructFromAnythingElse )
{
  AllocateSpace(N); // write this, just allocates space
  for (int i = 0; i < N; ++i)
  {
    Element(i) = T( constructFromAnythingElse );
  }
} 
```

使用placement new，你必须先分配内存，然后就地构造，最后记得销毁每个元素。

与placement new route相比，上述内容是半途而废的，因为我们首先构造每个元素，然后再构建另一个元素，并使用`operator=`它来覆盖它。

通过使其成为任意类型的模板构造函数，我们不依赖于多次转换来获得多个级别到数组中。朴素的版本（你取一个 T const&）不起作用，因为要构造一个由 T 组成的数组的数组，最外面的一个期望一个由 T 组成的数组作为参数，它期望一个由 T 组成的数组作为参数，它需要一个 T - 那里有太多级别的用户定义构造。

使用上面的模板构造函数，数组 T 的数组接受任何类型作为构造函数。与 T 的数组的数组一样，T 的数组也是如此。最后，无论您构造了 T 的数组的最外层数组，都将 T 传递给它，如果它不喜欢它，则会出现编译器错误几乎完全不可读的消息。

# javascript - jquery 这个 concat 选择器

> ID：13236369
> 
> 赞同：5
> 
> 时间：2012-11-05T16:36:26.340
> 
> 标签：javascript, jquery

例如给定这个 HTML：

```
<div>
    <p>p0</p>
    <p>p1</p>
    <p>p2</p>
</div> 
```

我不明白如何编写一个连接的 jQuery`this`选择器，就像这样：

```
$("div").on("mouseover", function () {
    $(this + " p").css({
        color: "#009"
    });
}); 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T16:37:37.927

要在另一个元素中查找元素，请使用上下文选择器。尝试这个：

```
$("p", this).css({ /* ... */ }); 
```

或者你可以连接`id`父母的 - 虽然这有点难看IMO：

```
$("#" + this.id + " p").css({ /* ... */ }); 
```

或者您可以`find()`在父元素上使用：

```
$(this).find("p").css({ /* ... */ }); 
```

上面的任何一个都对你有用，虽然第二个例子很丑，应该避免。`this`尽可能直接使用参考。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T16:44:21.153

jQuery 选择器采用可选的第二个参数，称为“选择器上下文”。来自[jQuery 文档](http://api.jquery.com/jQuery/)：

> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以通过使用`$()`函数的可选第二个参数为搜索提供替代上下文...在内部，选择器上下文是用该`.find()`方法实现的，因此`$('span', this)`等效于`$(this).find('span')`.

**回答**： 你想要`$("p", this)`或者，等效地（但更冗长），`$(this).find("p")`代替你的`$(this+" p")`. 这会将您的选择限制为`<p>`s 中包含的元素的后代元素`this`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T16:37:48.153

我认为您正在寻找`$('p', this)`哪个基本上返回上下文中的所有`p`标签。`this`

# python - PDF出血检测

> ID：13236370
> 
> 赞同：6
> 
> 时间：2012-11-05T16:36:28.690
> 
> 标签：python, pdf, typography, pypdf

我目前正在编写一个小工具（Python + pyPdf）来测试 PDF 的打印机一致性。

唉，我已经对第一个任务感到困惑：检测 PDF 是否有至少 3 毫米的“出血”（没有打印任何内容的页面周围的边框）。我已经知道我无法检测到完整文档的出血，因为似乎没有全球性的。但是，在页面上，我总共可以检测到五个不同的框：

*   `mediaBox`
*   `bleedBox`
*   `trimBox`
*   `cropBox`
*   `artBox`

我阅读了有关这些框的[pyPdf 文档](http://pybrary.net/pyPdf/pythondoc-pyPdf.pdf.html#pyPdf.pdf.PageObject-class)，但我理解的唯一一个`mediaBox`似乎代表了整个页面大小（即纸张）。

`bleedBox`很明显*应该*定义出血，但情况似乎并不总是如此。

我注意到的另一件事是，例如在[PDF](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)中，所有这些框在每一页上都有完全相同的大小（意味着根本没有出血），但是当我打开它时会出现大量出血；这使我认为各个文本元素都有自己的偏移量。

因此，显然，仅计算出血`mediaBox`量`bleedBox`并不是一个可行的选择。

**如果有人能阐明这些盒子实际上是什么以及我可以从中得出什么结论（例如，一个盒子总是比另一个小），我会非常高兴。**

[额外的问题：有人可以告诉我文档](http://pybrary.net/pyPdf/pythondoc-pyPdf.pdf.html#pyPdf.pdf.PageObject-class)中提到的*“默认用户空间单元”*到底是什么吗？我很确定这是指在我的机器上，但我想在任何地方强制执行。`mm``mm`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-05T21:17:57.103

引用Adob​​e 发布的 PDF 规范[ISO 32000-1:2008 ：](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)

> 14.11.2 页面边界
> 
> 14.11.2.1 概述
> 
> PDF 页面可以为完成的介质（例如一张纸）准备，也可以作为印前过程的一部分，其中页面的内容被放置在中间介质（例如胶片或拼版复制版）上。在后一种情况下，区分中间页和完成页很重要。中间页面通常可能包括额外的与生产相关的内容，例如出血或打印机标记，这些内容位于完成页面的边界之外。为了处理这种情况，一个 PDF 页面可以定义多达五个独立的边界来控制成像过程的各个方面：
> 
> *   介质框定义了要在其上打印页面的物理介质的边界。它可能包括完成页面周围的任何扩展区域，用于出血、打印标记或其他此类目的。它还可能包括由于输出设备的物理限制而无法标记的靠近介质边缘的区域。超出此边界的内容可以安全地丢弃，而不会影响 PDF 文件的含义。
>     
>     
> *   裁剪框定义了页面内容在显示或打印时应被裁剪（裁剪）到的区域。与其他框不同，裁剪框在物理页面几何形状或预期用途方面没有明确的含义；它只是对页面内容进行剪辑。但是，在没有附加信息（例如在 JDF 或 PJTF 作业单中指定的拼版指令）的情况下，裁剪框将确定页面内容在输出介质上的位置。默认值为页面的媒体框。
>     
>     
> *   出血框 (PDF 1.3) 定义了在生产环境中输出时页面内容应剪切到的区域。这可能包括任何额外的出血区域，以适应切割、折叠和修剪设备的物理限制。实际打印的页面可能包含位于出血框之外的打印标记。默认值为页面的裁剪框。
>     
>     
> *   裁切框 (PDF 1.3) 定义裁切后完成页面的预期尺寸。它可能比媒体框小，以允许与生产相关的内容，例如打印说明、剪切标记或彩条。默认值为页面的裁剪框。
>     
>     
> *   艺术框 (PDF 1.3) 定义了页面创建者所期望的页面有意义内容（包括潜在空白）的范围。默认值为页面的裁剪框。
>     
>     
> 
> 页面对象字典分别在 MediaBox、CropBox、BleedBox、TrimBox 和 ArtBox 条目中指定这些边界（参见表 30）。它们都是以默认用户空间单位表示的矩形。裁剪、出血、修剪和艺术框通常不得超出媒体框的边界。如果他们这样做了，他们就会被有效地简化为与媒体框的交集。图 86 说明了这些边界之间的关系。（裁剪框未在图中显示，因为它与任何其他边界都没有定义的关系。）

Following that there is a nice graphic showing those boxes in relation to each other:

![图示的 PDF 框](../Images/a624e8dcaffdf2ac7848de27d389669e.png "图示的 PDF 框")

The reasons why in many cases only the media box is set, are

1.  that in case of PDFs meant for electronic consumption (i.e. reading on a computer) the other boxes hardly matter; and

2.  that even in the prepress context they aren't as necessary anymore as they used to be, cf. the [article](http://www.prepressure.com/pdf/basics/page_boxes) Pedro refers to in his comment.

关于你的“额外问题”：用户空间单位默认为 1⁄72 英寸；但是，从 PDF 1.6 开始，可以使用页面字典中的 UserUnit 条目将其更改为该大小的任何（非必需整数）倍数。在现有 PDF 中更改它实质上会对其进行缩放，因为用户空间单位是页面的设备独立坐标系中的基本单位。因此，除非您想更新页面描述中涉及坐标的每个命令以保持页面尺寸，否则您不会希望强制使用毫米用户空间单位......;）

# xcode - Xcode：我应该在运行 post-leopard OS X 的 Intel Mac 上使用什么 GCC_MODEL_TUNING

> ID：13236373
> 
> 赞同：1
> 
> 时间：2012-11-05T16:36:37.180
> 
> 标签：xcode, macos, gcc

作为标题，为了获得最大的性能提升，应该是 G5 还是 G4 还是其他？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:49:09.650

我会自己回答。据说使用 Intel CPU 的机器会忽略此选项。但是，无论您指定什么，在 Xcode4 中显示的通常是 G5，尽管编译器会忽略它。

引用此页面： http: [//lists.apple.com/archives/xcode-users/2006/Jan/msg00334.html](http://lists.apple.com/archives/xcode-users/2006/Jan/msg00334.html)

> 该设置中可用的 PowerPC 选项不会影响 Intel 版本。英特尔的编译器默认值对于我们今天发布的处理器是正确的。

# c# - 连接特定的数据库读取器类

> ID：13236374
> 
> 赞同：0
> 
> 时间：2012-11-05T16:36:42.657
> 
> 标签：c#, oop, vba, odbc

在我的工作中，我们的大部分数据都围绕着单个 ODBC 数据源——然而，我们有数百个 VBA 宏被数千个 ADODB 连接和记录集对象的显式实例（都通过同一个 DSN 连接）污染。

我想重构很多代码，目前的形式是：

```
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset

cn.Open "MYDSN"
SQL = "SELECT * FROM [...]"
rs.Open SQL, cn

' utilize rs ...

rs.Close
cn.Close
Set rs = Nothing
Set cn = Nothing 
```

我在想象一个可重用的类 dll，可能是用 C#.NET 编写的，它会提供一个简单的接口来更简洁地完成上述操作。

我的问题是，你将如何着手设计这门课？我对 C# 还很陌生，但想避免给下一个人留下同样的烂摊子。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:41:29.230

Enterprise Library 5.0 is good place to start. It has pretty much everything you need built right in. No need to reinvent the wheel. [http://msdn.microsoft.com/en-us/library/ff664408%28v=pandp.50%29.aspx](http://msdn.microsoft.com/en-us/library/ff664408%28v=pandp.50%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:41:30.220

Applying the good old KISS principle - create one static method `CreateRecordset(string SQL)` that reads the DSN from configuration, opens the connection and return the recordset object for the given SQL.

# facebook - 所有显示空白画布的自定义页面选项卡

> ID：13236376
> 
> 赞同：1
> 
> 时间：2012-11-05T16:36:44.180
> 
> 标签：facebook, tabs

上周晚些时候，我所有的自定义页面选项卡都开始显示空白画布。例如，下面的链接仅显示一个空白画布，在 11 月 2 日星期五之前它是一个工作图形，带有指向外部页面的链接。

我向 Facebook 提交了支持票，但除了他们将优先级标记为 LOW 之外，没有收到任何回复。最近有没有其他人遇到过这个问题？是否有任何解决方法的消息？

我的一些标签已经显示了几个月，只是为了显示一个空白画布。我需要知道 Facebook 是否发生了更改，我需要在哪里调整代码？或者，如果我的页面以前可以正常工作，这听起来像是 Facebook 的问题吗？

感谢您的帮助！

此处的示例标签：http: [//www.facebook.com/DallasCowboys/app_161433827333379](http://www.facebook.com/DallasCowboys/app_161433827333379)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:42:58.160

[https://www.shopcowboys.com/pagefiles/dcfacebook/boysof/index.asp](https://www.shopcowboys.com/pagefiles/dcfacebook/boysof/index.asp) get’s delivered with a HTTP response header

> x-frame-options: SAMEORIGIN

– that tells the browser, that this page does not want to be displayed in any kind of frames (unless they are from the same domain) …

So disable this response header, if you want to use your pages inside Facebook. (If you don’t know how to, or why this even got enabled, ask your server admin.)

# c# - 动态设置水晶报表仍然要求数据库登录

> ID：13236377
> 
> 赞同：0
> 
> 时间：2012-11-05T16:36:51.377
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, crystal-reports

我正在尝试`Crystal Reports`在我的`MVC`应用程序中进行部署。为了充分利用 Crystal Report Viewer，我必须使用 a `webform`，它在我的开发环境中运行良好。

该应用程序将部署在用户的服务器上并连接到他们的个人数据库。这意味着我在设计报告或应用程序时没有最终的连接信息。

我能够使用他们在 web.config 文件中的条目成功连接，加载`DataTable`报告信息，并将其传递给报告。但是，该报告仍然要求提供数据库凭据。该报告设置为连接到我的数据库，因此它会询问我的凭据并且没有它们就不会继续。但是，最终报告显示了他们数据库中的正确信息。

我不确定是否需要更改报告中或后面的代码中的某些内容。这就是我现在设置报告的方式`ReportSource`：

```
protected void Page_Load(object sender, EventArgs e)
{
    string strReportName = System.Web.HttpContext.Current.Session["ReportName"].ToString();
    try
    {
        ReportDocument rd = new ReportDocument();
        string strRptPath = Server.MapPath("~/") + "Rpts//" + strReportName;
        rd.Load(strRptPath);

        SqlParameter[] sqlParams = {};
        DataTable testDt = DBHelper.GetTable("rptInvtDuplDesc", sqlParams);
        rd.DataSourceConnections.Clear();
        rd.SetDataSource(testDt);
        CrystalReportViewer1.ReportSource = rd;
    }
    else
    {
        Response.Write("<H2>Nothing Found; No Report name found</H2>");
    }
} 
```

如何防止报告要求提供原始凭据？

**编辑：**

如果我像这样将登录信息传递给我的数据库：

```
rd.SetDatabaseLogon("username", "password"); 
```

我没有再次获得数据库登录。凭据必须是用于创建报告的数据库，但显示的结果来自上述`DataTable`方法中的填充。如果它有当前数据库所需的数据，为什么需要连接到原始数据库？

**编辑2：**

我有此报告的 2 个数据源。一个是数据库中的表，另一个是存储过程的结果。我现在了解到这是额外登录的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:40:58.143

[在此](http://www.jonegerton.com/dotnet/crystal-reports-setting-login-credentials-through-code/)查看我的博客文章。

需要执行一些操作，但主要的是创建一个新`TableLogOnInfo`实例，然后应用正在使用`ApplyLogOnInfo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:16:48.923

您必须为报告中的每个提供凭据`datasouce`。

理想情况下，报告将有一个`datasource`. 如果这不可能，您需要为每个提供凭据，或为每个提供数据。

如果您想提供数据，这样的方法效果很好：

```
rd.Database.Tables[0].SetDataSource(testDt);
rd.Database.Tables[1].SetDataSource(micssys); 
```

否则，这样的事情将允许报告直接访问每个数据库`datasource`：

```
rd.SetDatabaseLogon("username","password}"); 
```

# perl - 单个键的哈希中的多个值

> ID：13236378
> 
> 赞同：2
> 
> 时间：2012-11-05T16:36:57.943
> 
> 标签：perl, select, hash

我有两个文件。一个由唯一的列表组成，而另一个是带有年龄的冗余列表。

例如

```
File1:      File2:
Gaia        Gaia 3
Matt        Matt 12
Jane        Gaia 89
            Reuben 4 
```

我的目标是匹配 File1 和 File2 并检索每个名称的最高年龄。到目前为止，我已经编写了以下代码。不太好用的一点是：当在哈希中找到相同的键时，打印更大的值。

欢迎任何建议/评论！

谢谢！！

```
#!/usr/bin/perl -w
use strict;

open (FILE1, $ARGV[0] )|| die "unable to open arg1\n"; #Opens first file for comparison
open (FILE2, $ARGV[1])|| die "unable to open arg2\n"; #2nd for comparison

my @not_red = <FILE1>;
my @exonslength = <FILE2>;

#2)  Produce an Hash of File2\. If the key is already in the hash, keep the couple key-          value with the highest value. Otherwise, next.

my %hash_doc2;
my @split_exons;
my $key;
my $value;

foreach my $line (@exonslength) {

    @split_exons = split "\t", $line;

    @hash_doc2 {$split_exons[0]} = ($split_exons[1]);

 if (exists $hash_doc2{$split_exons[0]}) {

    if ( $hash_doc2{$split_exons[0]} > values %hash_doc2) {

     $hash_doc2{$split_exons[0]} = ($split_exons[1]);

    } else {next;}
       }
   }

#3) grep the non redundant list of gene from the hash with the corresponding value

my @a =  grep (@not_red,%hash_doc2);
print "@a\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:55:46.377

你需要保留所有的价值观吗？如果没有，您只能保留最大值：

```
@split_exons = split "\t", $line;
if (exists $hash_doc2{$slit_exons[0]}
    and $hash_doc2{$slit_exons[0]} < $split_exons[1]) {
    $hash_doc2{$split_exons[0]} = $split_exons[1];
} 
```

您的代码也不会保留所有值。您不能将数组存储到哈希值中，您必须存储引用。可以通过以下方式向数组添加新值`push`：

```
push @{ $hash_doc2{$split_exons[0]} }, $split_exons[1]; 
```

您对数字比较的使用`values`也没有按照您的想法进行。`<`运算符强加一个标量上下文，因此返回`values`值的数量。另一种选择是存储排序的值并始终要求最高值：

```
$hash_doc2{$split_exons[0]} = [ sort @{ $hash_doc2{$split_exons[0]} }, $split_exons[1] ];
# max for $x is at $hash_doc2{$x}[-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:00:16.443

您可以循环遍历并逐行处理数据文件，而不是将整个 file2 读入一个数组（如果它很大，那就不好了）：

```
#!/usr/bin/perl

use strict;
use warnings;
use autodie;
use Data::Dumper;

open( my $nameFh, '<', $ARGV[0]);
open( my $dataFh, '<', $ARGV[1]);

my $dataHash = {};
my $processedHash = {};

while(<$dataFh>){
    chomp;
    my ( $name, $age ) = split /\s+/, $_;
    if(! defined($dataHash->{$name}) or $dataHash->{$name} < $age ){
        $dataHash->{$name} = $age
    }
}

while(<$nameFh>){
    chomp;
    $processedHash->{$_} = $dataHash->{$_} if defined $dataHash->{$_};
}

print Dumper($processedHash); 
```

# css - WebKit 浏览器中基于 Em 的测量和不稳定的 CSS 转换

> ID：13236388
> 
> 赞同：0
> 
> 时间：2012-11-05T16:37:38.533
> 
> 标签：css, webkit, css-transitions

我正在尝试做一些可以方便地在 EM 中指定坐标并转换 `font-size`以以不同大小显示我的内容的事情（这是一种基于块的图形的东西）。

这是一个说明问题的jsfiddle。在 Firefox 中这很好，在 IE 中没有过渡（这很好），但在 Safari 和 Chrome 中它做了一件疯狂的事情。

[http://jsfiddle.net/6pf3D/2/](http://jsfiddle.net/6pf3D/2/)

html:

```
<div class="parent">
    <div class="child">
    </div>
</div>​ 
```

CSS：

```
.parent{
    -webkit-transition: all;
    -webkit-transition-duration: 10s;
    background-color: rgba(0,255,0,0.3);
    font-size:16px;
    width:16em;
    height:16em;
}
.child{
    background-color: rgba(255,0,0,0.3);
    width: 8em;
    height:8em;
} 
```

javascript:

```
$('.parent').css('font-size', '32px'); 
```

有人知道如何在不牺牲基于 em 的坐标的情况下实现平滑过渡吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:41:48.633

在这里我做了一个新的1，试试看

[**演示**](http://jsfiddle.net/6pf3D/3/)（2 秒间隔）

[**演示 2**](http://jsfiddle.net/6pf3D/5/)（10 秒间隔）

CSS

```
.parent{
    background-color: rgba(0,255,0,0.3);
    font-size:16px;
    width:16em;
    height:16em;
    transition: width 10s, height 10s;
    -moz-transition: width 10s, height 10s;
    -webkit-transition: width 10s, height 10s;
    -o-transition: width 10s, height 10s;
}

.child{
    background-color: rgba(255,0,0,0.3);
    width: 8em;
    height:8em;
    transition: width 10s, height 10s;
    -moz-transition: width 10s, height 10s;
    -webkit-transition: width 10s, height 10s;
    -o-transition: width 10s, height 10s;
} 
```

# java - Java用特定字符更改字符串的一部分

> ID：13236391
> 
> 赞同：5
> 
> 时间：2012-11-05T16:37:45.757
> 
> 标签：java, string, methods, replace, substring

我正在尝试从点（a，b）中获取字符串的一部分，并将字符串中给定值的字母替换为“X”。

示例：如果字符串 is`ABC123`并且`switch(3,5)`被调用，它会将其更改为`ABCXXX`.

到目前为止，我有：

```
 public void switch(int p1, int p2)
{
   String substring = myCode.substring(p1,p2-1);
} 
```

我很迷茫....感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:06:27.870

用途`StringBuilder`及其`replace(int start, int end, String str)`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:15:46.167

Java`String`是不可变的，不能更改。但是，您可以编写一个方法来返回 a`new String`并标记出这些字符。A`StringBuilder`是一个让您熟悉的好类，因为它允许快速字符串操作。

StringBuilder 文档：[http ://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)

```
public class StringReplace {

    public static String replaceRange(String s, int start, int end){
        StringBuilder b = new StringBuilder(s);

        for(int i = start; i <= end; i++)
            b.setCharAt(i, 'x');

        return b.toString();
    }

    public static void main(String[] args){
        String test = "mystringtoreplace";
        String replaced = replaceRange(test, 3, 8);
        System.out.println(replaced);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:44:31.967

只需为左侧和右侧部分（您要保留）执行两个子字符串，然后将它们与适当数量的 X 连接起来。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T17:02:15.313

尝试这个：

```
public class Sub {

    public String replaceChar(String str, int x, int y){
        String temp = "XXX";
        String str1 = "";
        str1 = str.substring(x, y+1);
        str = str.replace(str1, temp);
        return str;
    }

    public static void main(String args[]){
        Sub s = new Sub();
        System.out.println(s.replaceChar("ABC123", 3, 5));
    }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T17:04:53.240

一些可能有帮助的步骤：

1.  确定您需要更改的字符数
2.  确定要保留的字符串的左侧 ( `str.substring(0,p1);`)
3.  确定要保留的字符串的右侧 ( `str.substring(p2,str.length());`)
4.  将它们放在一起 ( `String output = firstPart + addedChars + secondPart;`)

# ios - iOS：无线安装 - Retina iPad 上的黑色下载图标

> ID：13236395
> 
> 赞同：0
> 
> 时间：2012-11-05T16:37:56.460
> 
> 标签：ios, icons, distribution, retina-display

我已经为我们的 iOS 企业应用程序设置了无线分发。它可以工作，但在下载过程中，应用程序图标在 iPad3 上显示为黑色，而在 iPad1 上显示正确的图标。

我上传了两个图标，一个是 57x57 像素，一个是 512x512 像素。

可能我也需要提供视网膜图标 - 但我看不到如何将它们添加到 manifest.plist，因为该文件仅包含两个图标条目：

```
 <dict>
               <key>kind</key>
               <string>display-image</string>
               <key>needs-shine</key>
               <true/>
               <key>url</key>
               <string>http://myserver.com/image.57x57.png</string>
           </dict>
           <dict>
               <key>kind</key>
               <string>full-size-image</string>
               <key>needs-shine</key>
               <true/>
               <key>url</key>
               <string>http://myserver.com/image.512x512.png</string>
           </dict> 
```

我需要添加视网膜条目吗？如果是这样，“kind”键的价值是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:13:00.717

是的，似乎缺少视网膜 114x114 图标。您可以尝试在项目中直接在 Targets -> Summary -> App Icons 下设置。之后，您必须再次创建 ipa。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:39:37.637

稍微挖掘一下，它看起来像是字符串`full-size-image`，并且`display-image`在 `System/Library/PrivateFrameworks/iTunesStore.framework/Support/itunesstored`. 并且没有其他`-image`感兴趣的字符串。

继续下去，我猜你需要把两张图片放到你的服务器上

*   [http://example.com/image.57x57.png](http://example.com/image.57x57.png)
*   [http://example.com/image.57x57@2x.png](http://example.com/image.57x57@2x.png)

但保留您的 XML 文件原样。

# php - Facebook Authenticate 如何让我识别用户？

> ID：13236396
> 
> 赞同：0
> 
> 时间：2012-11-05T16:37:56.137
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk, facebook-authentication

我有一个网站，我需要在其中拥有由用户标识的数据。例如，他们输入他们最喜欢的食物：

```
userid       favorite food
------       -------------
1            french fries
2            tacos
3            fish sticks
4            chipotle 
```

当我使用 Facebook 身份验证时，我将使用什么标识符作为用户 ID？我假设它不是名字，因为这会产生重复。只是这个人的 Facebook ID 吗？

用于 3rd 方网站“Facebook Connect”或“Facebook 授权”或其他内容的正确 API 也是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:54:42.137

> 当我使用 Facebook 身份验证时，我将使用什么标识符作为用户 ID？我假设它不是名字，因为这会产生重复。只是这个人的 Facebook ID 吗？

是的，使用此人的 Facebook ID。电子邮件或姓名等其他项目可以更改，但特定帐户的 ID 始终相同，可用于通过各种 API 查找它们。

> 用于 3rd 方网站“Facebook Connect”或“Facebook 授权”或其他内容的正确 API 也是？

Facebook 已经为此改名了六次。目前它只是称为“Facebook 登录”它确实（并且一直）在后端使用了 OAuth。[https://developers.facebook.com/docs/concepts/login/](https://developers.facebook.com/docs/concepts/login/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:44:21.663

我认为您可以使用此[https://developers.facebook.com/docs/concepts/login/](https://developers.facebook.com/docs/concepts/login/)。

当用户批准时，您将能够获得他/她唯一的 Facebook 用户 ID。如果您想将 facebook 用户与直接注册的用户分开，您可以将其保存在您的用户 ID 列中或为他们创建一个新列。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:58:51.203

您可以将其中任何一个作为键。

> 1.ID（用户ID，UID）
> 
> 2.电子邮件
> 
> 3.用户名（http://facebook.com/username - 用户名部分）
> 
> 4.个人资料链接（http://facebook.com/username）

最好使用它，`id`因为您以后可能需要它来从用户那里获取额外的数据。

是的，Facebook Connect 就是这样，但现在称为 Facebook 登录

# javascript - JavaScript / JScript 中缺少分号

> ID：13236401
> 
> 赞同：0
> 
> 时间：2012-11-05T16:38:12.017
> 
> 标签：javascript, hyperion, brio

我在 BRIO (Hyperion Interactive Reporting Studio) 中编写了以下代码。代码是 JavaScript 或 JScript，但我不确定是哪一个，因为我只是在学习语法并且不确定它们有何不同。

无论如何，我`Script(line number) missing; before statement`在以下几行中遇到语法错误：

```
if (xYear == 2012 && yMonth == 10) {stopIt = "Yes"} else (yMonth == 12) {stopIt = "Yes"} 
```

和

```
var myDate = New Date(xYear, yMonth, 1) 
```

在下面的代码中。

```
var xYear
var yMonth

for (j = 2009; j =  2012; j++)

{ 

    xYear = j

    if (xYear == 2009) {yMonth = 7} else {yMonth = 1}

    var StopIt = "No"

    Do 

    {
    var myDate = New Date(xYear, yMonth, 1)
    Alert (myDate)

    //var myQuery = ActiveDocument.Sections["qry_billing"]

    //myQuery.Limits["Accounting Year Month"].CustomValues.RemoveAll()
    //myQuery.Limits["Accounting Year Month"].CustomValues.Add(myDate)
    //myQuery.Limits["Accounting Year Month"].SelectedValues.Add(myDate)

    //myQuery.Process()

    //var Path = "W:\\Major Accounts\\Alliance Process\\AAA\\reference_files\\Results"
    //var File = "Results" + "_" + xYear + "_" +  yMonth+ " .txt"

    //ActiveDocument.Sections["Results"].Export(Path + "\\" + File,bqExportFormatText,true)

    yMonth = yMonth + 1

    if (xYear == 2012 && yMonth == 10) {stopIt = "Yes"} else if (yMonth == 12) {stopIt = "Yes"}
    }

    While (stopIt != "Yes")

} 
```

有人可以帮我解决这个问题吗，因为我不明白为什么它要求我提供`;`，因为我认为 BRIO 文档脚本中甚至不需要它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T16:40:12.483

```
else (yMonth == 12) 
```

应该：

```
else if (yMonth == 12) 
```

当你正确缩进代码时，很容易注意到这个错误：

```
if (xYear == 2012 && yMonth == 10) {
    stopIt = "Yes"
} 
else (yMonth == 12) { // shoule be: else if (yMonth == 12) {
    stopIt = "Yes"
} 
```

注意：javascript**区分大小写**，这意味着

*   `Do`不是`do`
*   而`alert`不是`Alert`
*   `new`代替`New`

但分号不是强制性的，您可以根据需要使用或不使用。

**更新：**

从查看您发布的完整代码来看，伙计，它有很多奇怪的东西。

```
for (j = 2009; j =  2012; j++) 
```

应该是这样的：

```
for (var j = 2009; j <= 2012; j++)
... 
```

你定义一个变量：

```
var StopIt = "No" 
```

但`stopIt`改用：

```
stopIt = "Yes" 
```

您应该参加 javascript 课程\教程，学习起来并不难，但是您当前状态的代码完全被破坏了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:57:48.270

为清楚起见，我的问题的答案是双重的，基于 gdoron 非常有帮助和信息丰富的答案和 Teemu 在我原来的帖子下的评论。总结一下答案，我在下面回答了我自己的问题：

此语句中的错误

```
if (xYear == 2012 && yMonth == 10) {stopIt = "Yes"} else (yMonth == 12) {stopIt = "Yes"} 
```

是不是`if`在`else`

所以它应该是这样的：

```
if (xYear == 2012 && yMonth == 10) {
    stopIt = "Yes"
}
else if (yMonth == 12) {
    stopIt = "Yes"
} 
```

此语句中的错误

```
var myDate = New Date(xYear, yMonth, 1) 
```

那`New`不应该被资本化。所以应该写成：

```
var myDate = new Date(xYear, yMonth, 1) 
```

# python - 如何使用 py2exe 将文件放入文件夹中。

> ID：13236405
> 
> 赞同：1
> 
> 时间：2012-11-05T16:38:17.913
> 
> 标签：python, py2exe

你好！

我在 python 中制作了一个国际象棋引擎，然后使用 py2exe 将其编译为 .exe。问题是当我将所有奇怪的文件聚集在同一个文件夹（dist）中时，它看起来不太整洁。我想在包含所有帮助文件的 dist 文件夹中创建一个新文件夹，所以我的所有 dist 文件夹包含的是保存帮助文件和主启动应用程序的文件夹。但是，我不能简单地将帮助文件复制到新文件夹中，因为计算机找不到它们并引发错误。

如何解决？另外，我正在使用 inno setup 进行安装，但我也不知道如何在那里找到解决方案。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:17:53.717

py2exe 的配置中有一个功能，它允许您将所有 Python 文件捆绑在一个`library.zip`文件中。这将大大减少根目录中的文件数量，但无论如何都会保留一些文件。

这些文件通常是 DLL 文件，至少从我在 GUI 应用程序中看到的情况来看是这样。您不能删除这些，因为它们是启动应用程序所必需的。解决此问题的方法是创建一个批处理文件，该批处理文件将运行可以位于子目录中的实际程序。关键是这些文件应该与可执行文件位于同一目录中，或者当前工作目录中，或者`PATH`环境变量中的路径中。至少大多数情况是这样。另一种方法可能是一个批处理文件，它将修改 PATH 变量或`cd`另一个目录，然后运行该文件

我从来没有尝试过这样做，所以它可能会为你破坏一些东西。无论如何，IMO 最好的方法是创建一个安装程序并添加快捷方式，您不必为用户弄乱这些文件而烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:51:15.673

尝试改用 pyinstaller。它易于使用，并将您的 PythonLib 和所有必要的 python 文件编译为独立的 EXE。所以你不必担心你的 dist 文件中有一堆乱七八糟的文件。（只有一个 exe）。

如果您有其他外部文件，例如数据库、文本文件、csv 文件。等等...您可以将它们设置为在 inno setup [Files] 部分中以您想要的方式进行部署。

我昨天写了一个详细的解释，所以看看这个链接：

[https://stackoverflow.com/a/13259452/1339024](https://stackoverflow.com/a/13259452/1339024)

- 编辑 -

*确保您使用 pyinstaller 1.5 ，因为 2.x 版本的工作方式并不完全相同

# performance - 中断开销与控制标志

> ID：13236408
> 
> 赞同：9
> 
> 时间：2012-11-05T16:38:34.310
> 
> 标签：performance, cuda

我正在使用一个天真的素数生成函数。这段代码大约需要 5.25 秒来生成 10k 个素数（device_primes[0] 保存已找到的素数，剩余位置为找到的素数）。

```
_global__ void getPrimes(int *device_primes,int n)
{ 
    int c = 0;
    int thread_id = blockIdx.x * blockDim.x + threadIdx.x;
    int num = thread_id+2;

    if (thread_id == 0) device_primes[0] = 1;
    __syncthreads();

    while(device_primes[0] < n)
    {
        for (c = 2; c <= num - 1; c++)
        { 
            if (num % c == 0) //not prime
            {
                break;
            }
        }
        if (c == num) //prime
        {
            int pos = atomicAdd(&device_primes[0],1);
            device_primes[pos] = num;
        }
        num += blockDim.x * gridDim.x; // Next number for this thread       
    }
} 
```

我刚开始优化代码，我做了以下修改，而不是：

```
for (c = 2; c <= num - 1; c++)
{ 
    if (num % c == 0) //not prime
         break;
}
 if (c == num) {...} 
```

我现在有了 ：

```
 int prime = 1;

   ...
   for (c = 2; c <= num - 1 && prime; c++)
    { 
        if (num % c == 0) prime = 0; // not prime
    }
     if (prime) {...} // if prime 
```

现在我可以在 0.707 秒内生成 10k。我只是想知道为什么通过这种简单的修改来加快速度，破坏那么糟糕吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T23:07:15.083

正如 Tony 所建议的那样，不同的代码执行可能会导致 gpu 代码的速度大幅下降，从而迫使某些代码以串行而不是并行的方式运行。在上述代码的慢版本中，遇到中断的线程与继续执行的代码不同。

[cuda c 编程指南](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html)是一个很好的gpu 编程技术资源。 [这是关于控制流的内容](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#control-flow-instructions)：

> 任何流控制指令（if、switch、do、for、while）都可以通过导致相同warp 的线程发散（即遵循不同的执行路径）来显着影响有效指令吞吐量。如果发生这种情况，则必须对不同的执行路径进行序列化，从而增加为此 warp 执行的指令总数。当所有不同的执行路径都完成后，线程会汇聚回相同的执行路径。

较新的 nvidia 硬件和 cuda 版本可以比旧版本更好地处理一些分支，但最好还是尽可能避免分支。

# eclipse - 如何修复 Eclipse 的属性/首选项对话框的大小

> ID：13236409
> 
> 赞同：2
> 
> 时间：2012-11-05T16:38:35.137
> 
> 标签：eclipse, dimension

在 Eclipse 中调整了某个项目的一些属性后，下次我打开属性窗口时，它会找到我上次修改的项目，并且它的大小将相应地适合项目。

但有时该项目的页面太大，以至于整个对话框变得非常大，并填满了我笔记本电脑的整个屏幕。

“首选项”对话框也会发生同样的事情。有没有办法修复属性/首选项对话框的大小？假设我希望它始终为 600 X 800 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:16:13.337

不，不是 Eclipse 内置功能。根据您的操作系统，您总是可以为[AutoHotkey](http://www.autohotkey.com/)（仅限 Windows）之类的东西编写一个小脚本，以便在该窗口出现在屏幕上时调整其大小。

# mysql - 通过odbc和excel调用mysql

> ID：13236412
> 
> 赞同：0
> 
> 时间：2012-11-05T16:38:48.687
> 
> 标签：mysql, excel, odbc

我通过 excel 的 odbc 连接调用查询。

我有一个 where 子句，我想在其中使用日期。

这适用于日期 sale.saledate>={d '2012-10-29'}

但我也需要添加时间

我试过 sale.saledate>={d '2012-10-29 3:30 PM'}

但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:06:03.533

试试 {ts '2012-10-29 15:30:00'}。搜索 ODBC 日期时间格式。ODBC 有自己的日期、时间和时间戳语法，驱动程序应该将这些语法转换为数据库。

# javascript - Magento - opcheckout.js - 在结帐期间手动调用 setAddress()

> ID：13236413
> 
> 赞同：1
> 
> 时间：2012-11-05T16:38:53.640
> 
> 标签：javascript, magento

我在这个简短的教程中添加了邮政信箱过滤：

[http://inhoo.net/ecommerce/magento/prevent-po-boxes-in-shipping-address-field-on-checkout/comment-page-1/#comment-35117](http://inchoo.net/ecommerce/magento/prevent-po-boxes-in-shipping-address-field-on-checkout/comment-page-1/#comment-35117)

本质上，这只是调用我的控制器，在“street1”和“street2”字段上进行 preg_match，并在输入邮政信箱地址时发出警报，否则它只是调用 shipping.save() 并进入下一步。

问题是，如果用户保存了邮政信箱地址（这不是默认地址），当您选择备用地址（使用邮政信箱）时，隐藏的表单字段不会更新为所选地址，并且不会调用邮政信箱验证。

为了解决这个问题，我在选择元素更改时触发 shipping.setAddress(value) ：

```
jQuery("#shipping-address-select").change(function(){
    var value = jQuery("#shipping-address-select option:selected").val();
    shipping.setAddress(value);
}); 
```

这几乎完全按预期工作，它将地址设置为我所期望的，一切都很好；但是，这里发生的一个小故障是在调用 shipping.setAddress(value) （执行 ajax 调用）之后，在我选择了实际地址后，选择元素会自动显示“新地址”选项。这纯粹是一个视觉故障，因为使用了正确的地址，但是让它显示“新地址”会让用户感到困惑。

有没有办法在不修改 opcheckout.js 中的任何内容（ Shipping 类和 setAddress() 位所在的位置）的情况下解决这个问题？

-- 编辑 -- 这是 Magento 专业版 - 1.11.1.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:26:42.823

虽然肯定不是最佳解决方案，但与此同时，我不得不求助于手动更新隐藏的表单字段：

```
jQuery("#shipping-address-select").on('change',function(){
    var address = jQuery("#shipping-address-select option:selected").html().split(', ');
    jQuery("#shipping\\:street1").val(address[1]);
    jQuery("#shipping\\:street2").val(address[2]);
}); 
```

我为这段代码感到骄傲。/讽刺。

# ajax - 在 JSON 响应中编码 HTML 特殊字符的安全优势

> ID：13236415
> 
> 赞同：3
> 
> 时间：2012-11-05T16:39:03.980
> 
> 标签：ajax, json, security, html-entities

我最近收到来自第三方的建议，“出于安全原因”在所有服务器响应中编码 HTML 特殊字符。所以：

```
' --> &#x27;
& --> &#x26; 
```

例如

```
{ "id": 1, "name": "Miles O&#x27;Brien" } 
```

问题：这样做是否有安全收益，还是只是一种偏执狂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:07:20.103

```
& --> &#x26; 
```

你确定这是他们想要的那种编码吗？

对在 JSON 响应中返回的 HTML 特殊字符进行编码是有原因的，这是为了避免由不需要的类型嗅探引起的 XSS。例如，如果您有：

```
{ "name": "<body>Mister <script>...</script>" } 
```

并且攻击者在 HTML 上下文（例如 iframe src）中包含指向您的 JSON 返回资源的链接，然后愚蠢的浏览器可能会认为，由于赠品字符串`<body>`，您的文档不是 JSON 对象，而是 HTML 文档。然后它可以在您的安全上下文中执行脚本，从而导致 XSS 漏洞。

对此的解决方案是使用 JSON 字符串文字转义，例如：

```
{ "name": "\u003Cbody\u003EMister \u003Cscript\u003E...\u003C/script\u003E" } 
```

在这种情况下使用 HTML 转义虽然可以避免问题，但会产生改变字符串含义的副作用。`"Miles O&#x27;Brien"`JSON 解析器读取的仍然是 &x-twenty-7，所以如果你使用jQuery 或 jQuery之类的`Miles O&#x27;Brien`方法将该值写入页面`.value`，它看起来会很奇怪。`.textContent``.text()`

现在，如果您将该字符串分配给`.innerHTML`jQuery `.html()`，那么是的，您肯定需要在某个时候对其进行 HTML 转义，而不管 JSON XSS 问题如何。但是，我建议在这种情况下，出于关注点分离的原因，该点应该在您实际将内容注入 HTML 标记的客户端，而不是生成 JSON 的服务器端。一般来说，当有更安全的 DOM 风格的方法可用时，最好避免将字符串注入标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:52:00.217

根据您使用数据的目的，是的，有安全优势。

如果您正在接受用户输入，并将其发送回您的服务器，然后使用它与您的数据库进行交互；我可能会终止您的一个字符串，并[注入我自己的 SQL 语句](http://en.wikipedia.org/wiki/SQL_injection#Technical_implementation)。即使没有恶意，您发送引号字符也可能会意外终止字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:46:03.640

似乎有一种趋势是保护新手/愚蠢/天真的开发人员不会在他们的网站上创建 XSS 漏洞。尤其是当其他人要处理这些响应时（例如，开放 API，您团队中的一些初级开发人员），他可能会忘记在将字符串提供给某个`$('#myelement).html()`方法之前正确地对字符串进行 HTML 编码。这个想法是，在服务器上转义这些响应将导致对不了解转义的开发人员进行双重转义（最坏的情况），而“聪明”的开发人员将知道何时在使用它们之前对值进行转义。另一种选择是“不太聪明”的开发人员将创建一个充满 XSS 安全漏洞的站点。

就我个人而言，我不是这种趋势的忠实拥护者，但我当然看到它将如何使整个互联网变得更安全，尤其是随着 Web 开发越来越多地被作为一种爱好来实践......你选择做的是对你来说，但这是请求对 JSON 中的所有字符串进行 html 转义的原因。

其他人这样做的例子：

*   [Spotify](https://developer.spotify.com/technologies/apps/guidelines/integration/#encodedstrings)
*   开放社交（我没有链接，我相信你会相信我的话）

# django - 重定向后保留对象的 id。姜戈

> ID：13236417
> 
> 赞同：0
> 
> 时间：2012-11-05T16:39:11.720
> 
> 标签：django

为了在我的一个模板中传递带有参数的函数，我使用了一个隐藏的输入，该输入重定向到函数所在的视图（该函数用于删除用户“关注”的用户）。由于 HttpResponseRedirect(reverse('myview', args=[a number]))，此视图然后重定向到上一页。

问题是我重定向到的页面需要一个参数（一个数字）。我希望用户被重定向到他所在的确切页面。

这是我的模板：

```
 <form method="post" action="{% url projet.views.remove_relationship %}">
    {% csrf_token %}
    <input type="hidden" name="remove_relationship" value="{{ user.id }}">
    <input type="submit" value="delete" /> 
```

和观点：

```
 def remove_relationship(request):
      user = request.user
      if request.method == 'POST':
        user_id = request.POST['remove_relationship']
        user_id= int(user_id)
        user_name = User.objects.get(id=user_id)
        user.userprofile.remove_relationship(person=user_name.userprofile, status=1)
     return HttpResponseRedirect(reverse('myoriginalview', args=[A NUMBER])) 
```

用户来自的页面类似于：www.mysite/myoriginalview/ANUMBER。我想将他重定向到这个确切的页面

在原始视图中，数字对应于对象 id。（匹配.id）。

所以我不想做的是获取我原始视图的 match.id，将它传递到我的视图 remove_relationship 以便在“args = [match.id]”中使用它。

那么如何从原始视图中获取此 ID 并将其传递到我的新视图中呢？

这是我尝试过的：

在我的models.py中：

```
@models.permalink
def get_absolute_url_remove_relationship(self):
    return ('remove_relationship', (), {'dub_id': self.id}) 
```

在我的模板中使用它：

```
<form method="post" action="{{get_absolute_url_remove_relationship}}">
    {% csrf_token %}
    <input type="hidden" name="remove_relationship" value="{{ user.id }}">
    <input type="submit" value="delete" /> 
```

在我看来：

```
def remove_relationship(request, match_id=None):
match_id= int(match_id)
user = request.user
if request.method == 'POST':
    user_id = request.POST['remove_relationship']
    user_id= int(user_id)
    user_name = User.objects.get(id=user_id)
    user.userprofile.remove_relationship(person=user_name.userprofile, status=1)

return HttpResponseRedirect(reverse('terrain', args=[match_id])) 
```

我在我的 url.py 中进行了必要的修改

所以当用户点击“删除”按钮删除他关注的用户时，重定向效果很好，但用户并没有被删除。看起来该功能不再使用，而当我使用 {%url projet.views.remove_relationship %} 时，用户被删除，但没有重定向。

任何帮助都会非常受欢迎。

PS：这个问题出现在我之前提出的另一个问题之后（http://stackoverflow.com/questions/13233794/function-with-arguments-in-a-template-django）。为了更清楚，我打开了一个新主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:19:52.543

您需要通过`args`as `tuple`while invoking `reverse`。还要确保使用包含应用程序名称的视图的完全限定名称。

```
return HttpResponseRedirect(reverse('appname.views.viewname', args=(match_id,))) 
```

[参考](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)

# python-2.7 - 如何在 PyQT 应用程序中集成 Ipython 控制台

> ID：13236422
> 
> 赞同：6
> 
> 时间：2012-11-05T16:39:18.600
> 
> 标签：python-2.7, pyqt, ipython

我正在为我的实验室开发 PyQt 软件。在这个软件中，我从 mySQL 数据库（通常在数组中）加载不同类型的 RAW 和分析数据。

我想在一个小部件中集成一个 Iython 控制台，以便我可以轻松地与这些数据进行交互。

我在使用 Ipython 0.13 时遇到了一些困难。
这是我已经拥有的（整个代码很长，所以我只显示包含小部件的部分，Ipython 控制台和相应的导入行，如果您需要更多，请告诉我）：

```
##I load everything useful to my application, including the following line
from IPython.frontend.qt.console.qtconsoleapp import IPythonQtConsoleApp

##then is my whole software
##here is a class containing the Graphical User Interface elements. A button call the following function. self.Shell_Widget is the widget containing the Ipython console, self.MainWindow is the application mainwindow
def EmbeddedIpython(self):
    """
    This function should launch an Ipython console
    """

    self.Shell_Widget = QtGui.QDockWidget(self.MainWindow) #Widget creation
    self.MainWindow.addDockWidget(4,self.Shell_Widget)
    self.Shell_Widget.setMinimumSize(400,420)

    console = IPythonQtConsoleApp() #Console Creation
    console.initialize()
    console.start()

    self.Shell_Widget.show() 
```

因此，如所愿，启动了 Ipython 控制台，并且似乎可以工作，但我无法访问整个应用程序变量、数组等......我认为 Ipython 控制台是独立于我的软件启动的，但这是我在编程方面的限制...有人知道如何在我的应用程序中启动 Ipython 吗？可能是缺少参数，或者是集成 Ipython 的不同方式。

有关信息，这不起作用： [Embedding IPython Qt console in a PyQt application](https://stackoverflow.com/questions/11513132/embedding-ipython-qt-console-in-a-pyqt-application)

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:46:09.660

提到的[链接](https://stackoverflow.com/questions/11513132/embedding-ipython-qt-console-in-a-pyqt-application)似乎在这里完美无缺：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import atexit

from IPython.zmq.ipkernel import IPKernelApp
from IPython.lib.kernel import find_connection_file
from IPython.frontend.qt.kernelmanager import QtKernelManager
from IPython.frontend.qt.console.rich_ipython_widget import RichIPythonWidget
from IPython.utils.traitlets import TraitError

from PyQt4 import QtGui, QtCore

def event_loop(kernel):
    kernel.timer = QtCore.QTimer()
    kernel.timer.timeout.connect(kernel.do_one_iteration)
    kernel.timer.start(1000*kernel._poll_interval)

def default_kernel_app():
    app = IPKernelApp.instance()
    app.initialize(['python', '--pylab=qt'])
    app.kernel.eventloop = event_loop
    return app

def default_manager(kernel):
    connection_file = find_connection_file(kernel.connection_file)
    manager = QtKernelManager(connection_file=connection_file)
    manager.load_connection_file()
    manager.start_channels()
    atexit.register(manager.cleanup_connection_file)
    return manager

def console_widget(manager):
    try: # Ipython v0.13
        widget = RichIPythonWidget(gui_completion='droplist')
    except TraitError:  # IPython v0.12
        widget = RichIPythonWidget(gui_completion=True)
    widget.kernel_manager = manager
    return widget

def terminal_widget(**kwargs):
    kernel_app = default_kernel_app()
    manager = default_manager(kernel_app)
    widget = console_widget(manager)

    #update namespace                                                           
    kernel_app.shell.user_ns.update(kwargs)

    kernel_app.start()
    return widget

class mainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(mainWindow, self).__init__(parent)

        self.console = terminal_widget(testing=123)

        print "\nAn Embeded Ipython Console!"

        self.textEdit = QtGui.QTextEdit()

        self.dockShell = QtGui.QDockWidget(self)
        self.dockShell.setWidget(self.textEdit)

        self.addDockWidget(4, self.dockShell)
        self.setCentralWidget(self.console)

if __name__ == "__main__":
    import  sys

    app  = QtGui.QApplication(sys.argv)
    main = mainWindow()
    main.show()
    sys.exit(app.exec_()) 
```

# java - 编译器不会抱怨返回类型。为什么？

> ID：13236425
> 
> 赞同：1
> 
> 时间：2012-11-05T16:39:20.843
> 
> 标签：java, compilation

我编写了以下 java 代码，我希望编译器会抱怨它。但我没有收到任何错误。为什么是这样 ？

```
 public static void main(String[] args) {
        Ba ba = new Ba();

        ba.fetchSomeValues();

    }

    public String fetchSomeValues(){
        return "Hello";     
    }

} 
```

我正在调用`fetchSomeValues()`应该返回“Hello”（这是一个字符串）的方法，并且在我包含的主要方法中`ba.fetchSomeValues();`没有将其初始化为`String`变量。编译器不会抱怨这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T16:41:19.067

您不必将返回值分配给变量。你**根本不需要对他们**做任何事情。

尽管通常不建议只删除方法的某些返回值。

一个反例可能是`Map`'s`put`方法，它返回与键关联的先前值。如果您不关心是否存在先前的值，则只需忽略返回值。

```
Map<Integer, String> map = new HashMap<Integer, String>();
test.put(1, "one"); // we don't assign the return value since we don't care 
```

因此，简而言之，编译器无法判断您是否关心返回值。**如果值在您使用该方法的上下文中很重要并且您忽略它，这只是一个问题**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T16:41:00.850

忽略方法的返回值是绝对有效的（尽管并不总是推荐）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T16:40:56.120

在 Java 中，您可以忽略刚刚发现的返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T16:41:50.707

这种行为并不是 Java 特有的，它实际上是当今所有主流（甚至那些不那么主流）语言的规范。即使在 FP 语言中，重点是无副作用的函数，其唯一点是返回值，这也是允许的。

You should really ask yourself, Do I want to use a language that forces me to assign every return value? Would that be a convenient language to use?

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-05T16:43:45.003

`ba.fetchSomeValues();` **does return the string** `"Hello"`, but since you ain't got any *left var* (for example `String s = ba.fetchSomeValues();`), the object of string, that has the `"Hello"` value, created in the `fetchSomeValues()` method, **just get *unused***.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-05T16:45:03.333

There's nothing wrong in this code. fetchSomeValues() returns a string but you don't have to assign the value. Normally you can write String returnedValue = a.fetchSomeValues() but it is not necessary

# javascript - 审核 Web 应用程序的前端性能

> ID：13236427
> 
> 赞同：1
> 
> 时间：2012-11-05T16:39:28.743
> 
> 标签：javascript, html, css, performance

我目前正在尝试对公司 Web 应用程序的 UI 进行性能调整。该应用程序只能由员工访问，因此服务器和客户端之间的连接速度总是比在互联网上快得多。

我一直在使用 Y Slow 等性能审计工具！和谷歌浏览器的分析工具，用于尝试突出值得调查的区域。但是，这些工具是在考虑 Internet 的情况下编写的。例如，Google Chrome 审核应用程序的当前建议如下：

**网络利用率**

*   合并外部 CSS（红色警告）
*   合并外部 JavaScript（红色警告）
*   启用 gzip 压缩（红色警告）
*   利用浏览器缓存（红色警告）
*   利用代理缓存（琥珀色警告）
*   最小化 cookie 大小（琥珀色警告）
*   跨主机名并行下载（琥珀色警告）
*   提供来自无 cookie 域的静态内容（琥珀色警告）

**网页性能**

*   删除未使用的 CSS 规则（琥珀色警告）
*   使用普通的 CSS 属性名称而不是供应商前缀的名称（琥珀色警告）

考虑到连接速度和使用模式，这些建议是否完全多余？用户将在一天中频繁使用该应用程序，因此初始点击量是否很大（当他们第一次访问页面并构建缓存时）并不重要，只要对未来的页面视图完成最少的工作即可.

例如，合并我们所有的 CSS 和 JavaScript 文件是否值得？它可能会加快初始页面查看速度，但它会对整个工作日的后续页面查看产生多大的影响？

我试过搜索这个，但我一直想出的只是面向互联网的标准性能建议。任何关于在这种情况下将我的性能调整工作重点放在什么上的任何建议，或其他审计工具建议，都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:16:10.310

一种尺寸并不适合所有这些东西。立即跳出会产生重大影响的项目是“利用浏览器缓存”。这显然减少了带宽使用，但也告诉浏览器它不需要重新解析你缓存的任何内容。即使你有足够的带宽，你下载的每个文件都需要来自浏览器的资源——一个管理下载、文件解析、管理内存等的线程。减少这些将使应用程序感觉更快。

GZIP 压缩可能是多余的，如果您确实拥有无限带宽，甚至可能有害 - 它会消耗服务器和客户端上的资源来压缩数据。不多，而且我从来没有能够测量过——但理论上它可能会有所作为。

代理缓存也可能有所帮助 - 取决于您公司的网络基础设施。

减少 cookie 大小可能会有所帮助——不仅因为带宽问题，而且管理 cookie 会再次消耗客户端上的资源；这也解释了为什么从无 cookie 域提供静态资产会有所帮助。

但是，如果您要优化 UI 的性能，您确实需要了解减速的位置。Y!Slow 和 Chrome 专注于常见问题，其中许多与带宽和浏览器的行为有关。他们不知道 JS 的某个特定部分是否很慢，或者服务器是否在处理特定的动态页面请求。

像 Firebug 这样的工具可以帮助解决这个问题 - 查看网络正在发生的事情，以及是否有任何资产花费的时间比您预期的要长。使用 JavaScript 分析器查看您花费最多时间的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T14:18:16.127

这些工具中的大多数都提供了一次性检查的步骤或建议。然而，它解决了一些问题，它并没有告诉您用户如何体验您的网站。Always Real 用户监控是衡量实时用户性能的正确解决方案。您可以使用[Navigation Timing API](https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API)来测量页面加载时间和资源时间。

如果你想找服务，你可以试试[https://www.atatus.com/](https://www.atatus.com/)，它提供了真实用户监控、Ajax 监控、事务监控和 JavaScript 错误跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:01:43.927

以下是可用于测试网站速度的附加服务列表：http: [//sixrevisions.com/tools/free-website-speed-testing/](http://sixrevisions.com/tools/free-website-speed-testing/)

# eclipse - 两个 MercurialEclipse 插件站点之间有什么关系？

> ID：13236436
> 
> 赞同：9
> 
> 时间：2012-11-05T16:39:59.660
> 
> 标签：eclipse, mercurial, mercurialeclipse

目前（2012 年 11 月）在 Eclipse Marketplace 中提供的两个 MercurialEclipse 插件在功能和项目领导方面的异同是什么？

只是为了扩展这个问题：

我只想在 Eclipse 中使用 Mercurial 项目的工作副本，但是当我寻找 Mercurial 插件时，我面临着这个令人困惑的选择。我怀疑目前我使用哪个并不重要。但我当然不确定。

目前（2012 年 11 月），在 Intland Software 网站上的产品中列出了 MercurialEclipse，在 Eclipse 市场中以“MercurialEclipse（原名：HgEclipse）”的形式出现，主页位于 JavaForge.com。在 Eclipse Marketplace 中还有另一个 MercurialEclipse，名为“MercurialEclipse”，自 8 月以来下载量更大，其主页位于 BitBucket.org。

我看到有共享的历史，但目前，查看 JavaForge 和 BitBucket，它们列出了不同的版本号（分别为 1.9.1 和 2.0.1）和不同的 Eclipse 更新站点。我看到代码库之前已经分道扬镳（[http://andrei.gmxhome.de/mercurialeclipse/index.html](http://andrei.gmxhome.de/mercurialeclipse/index.html)）。我们现在是否有两个站点用于同一开发线的两个阶段？还是可能存在我必须选择一方的竞争（无论是有意的还是无意的）？那么，这里是否有人手头有相关信息可供选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T18:39:21.860

简短的回答是它们与 Javaforge 站点在发布中落后于 Bitbucket 站点相同。所有错误都应该是 Bitbucket 网站上的文件：[https ://bitbucket.org/mercurialeclipse/main](https://bitbucket.org/mercurialeclipse/main)

最初 MercurialEclipse 托管在 Bitbucket 上。如果我没记错的话，在 1.5 版本左右，Intland 将它分叉到 Javaforge。这就是 HgEclipse 这个名字的由来。一段时间后，该项目在 Javaforge 上重聚。不久之后，在 2.0 版本发布之前，该项目又回到了 Bitbucket。回到 bitbucket 有几个原因。其中之一是 Intland 没有及时发布，这引起了用户的困惑。另一个原因是 JavaHg 托管在 Bitbucket 上，而 Bitbucket 是一个不错的主机。

尽管 Intland 有一段时间没有直接做出贡献，但我认为他们仍然对托管版本感兴趣。他们的更新站点包括 Mercurial 二进制文件，而 Bitbucket 目前没有。

# mysql - MySQL 复制不安全的 UPDATE 语句

> ID：13236439
> 
> 赞同：1
> 
> 时间：2012-11-05T16:40:08.143
> 
> 标签：mysql, replication

我有一个类似的 SQL 查询

```
UPDATE table SET foo = 'bar' WHERE pkey = n 
```

哪里 `pkey`是主键，`n`是整数常量。由于我打开了二进制日志记录（在语句模式下），mysql错误日志充满了警告：

```
Statement may not be safe to log in statement format. 
```

这可能是什么原因造成的？如您所见，该陈述没有歧义。

`AFTER UPDATE`我也在这张桌子上有触发器。触发器是否会引起警告？

# java - 是否有针对每个提交的 Callable 时间限制的 ExecutorService 解决方案

> ID：13236442
> 
> 赞同：1
> 
> 时间：2012-11-05T16:40:12.517
> 
> 标签：java, concurrency, executorservice

这就是我所拥有的......我有一个任务列表，每个任务都将单独提交`ExecutorService`。**我希望每个任务在开始执行**后都有 x MS 的时间限制。我已经看到了类似[在单个线程的时间限制上](https://stackoverflow.com/questions/4819855/time-limit-on-individual-threads-with-executorservice)发布的解决方案，但这设置了从提交任务时开始的时间限制。

[我认为一种解决方案是对Time Limit on Individual Threads](https://stackoverflow.com/questions/4819855/time-limit-on-individual-threads-with-executorservice)的公认解决方案的扩展。这将包装`Callable`在另一个`Callable`中，一旦它开始就会将取消任务放在计划的执行程序上。这将涉及以一种非平凡的方式将 映射`Callable`到 ，`Future`所以我想我会发布以查看是否有人知道现有的解决方案（代码重用是一件很棒的事情）。

谢谢。

作为仅供参考，[在单个线程的时间限制上](https://stackoverflow.com/questions/4819855/time-limit-on-individual-threads-with-executorservice)发布的解决方案如下。这再次从提交时间取消，而不是开始时间：

```
ExecutorService service = Executors.newFixedThreadPool(N);
ScheduledExecutorService canceller = Executors.newSingleThreadScheduledExecutor();

public <T> Future<T> executeTask(Callable<T> c, long timeoutMS){
   final Future<T> future = service.submit(c);
   canceller.schedule(new Callable<Void>(){
       public Void call(){
          future.cancel(true);
          return null;
       }
    }, timeoutMS, TimeUnit.MILLI_SECONDS);
   return future;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:47:42.390

看看这是否适合你。

对不起，如果代码很混乱，但这只是为了演示这个概念：将未来传递给任务，让任务启动自己的计时器 - 计时器将在任务启动时启动。

以下代码添加了 10 个任务，每个任务执行时间为 2 秒，但超时时间为 1 秒。

```
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

public class CancellableTaskDemo {
    public static void main(final String[] args) {
        new CancellableTaskDemo();
    }

    final ExecutorService ex = Executors.newFixedThreadPool(3);

    public CancellableTaskDemo() {
        for (int i = 0; i < 10; i++) {
            final int c = i;
            submitTask(new Callable<Object>() {
                @Override
                public Object call() throws Exception {
                    final long t = System.currentTimeMillis();
                    try {
                        Thread.sleep(2000);
                        System.out.println("Task " + c + " done in " + (System.currentTimeMillis() - t) + "ms");
                    } catch (final InterruptedException e) {
                        System.out.println("Task " + c + " aborted after " + (System.currentTimeMillis() - t) + "ms");
                    }
                    return null;
                }
            }, 1000);
        }
        ex.shutdown();
        try {
            ex.awaitTermination(100000, TimeUnit.MILLISECONDS);
        } catch (final InterruptedException e) {
            e.printStackTrace();
        }
    }

    private void submitTask(final Callable<Object> c, final int timeout) {
        final TimedFutureTask tft = new TimedFutureTask(c, timeout);
        final Future<?> ft = ex.submit(tft.getCallable());
        tft.setFuture(ft);
    }

    static class TimedFutureTask {
        final static ScheduledExecutorService canceller = Executors.newSingleThreadScheduledExecutor();
        private Timer cancelTimer;
        private Callable<Object> timedCallable;
        private Future<?> f;
        private int timeoutMS;

        public TimedFutureTask(final Callable<Object> callable, final int timeoutMS) {
            this.timeoutMS = timeoutMS;
            timedCallable = (new Callable<Object>() {

                @Override
                public Object call() throws Exception {

                    cancelTimer = new Timer();
                    cancelTimer.schedule(new TimerTask() {

                        @Override
                        public void run() {
                            f.cancel(true);

                        }
                    }, timeoutMS);

                    final Object res = callable.call();
                    cancelTimer.cancel();
                    return res;
                }

            });
        }

        public Callable<Object> getCallable() {
            return timedCallable;
        }

        public void setFuture(final Future<?> future) {
            f = future;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:50:36.143

我会使用 ScheduleExecutorService。

```
final Future future = es.submit(myTask);
ses.schedule(new Runnable() {
    public void run() {
        future.cancel(true);
    }
}, timeout, timeUnit); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:18:59.223

您可以手动完成，但代码太多，无法完成简单的任务:(

```
public void run() {
    long start = System.nanoTime();
    long timeout = 60 * 1000;
    do {
        // Do work here
    } while (TimeUnit.MICROSECONDS.convert(System.nanoTime() - start,
            TimeUnit.MICROSECONDS)
            - start > timeout);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:19:46.770

您可以将计时器作为您提交的任务的一部分启动，因此它将在任务执行时启动。只是，在这种情况下，您不能使用future.cancel，但可以中断线程。根据您提交的任务，是否可以轻松地及时终止。

# c# - DropDownList - DataTextField 上超过 1 个项目

> ID：13236443
> 
> 赞同：0
> 
> 时间：2012-11-05T16:40:13.457
> 
> 标签：c#, asp.net, webforms

我想`DataTextField`从数据库中添加超过 1 项（姓氏和姓名）。我怎样才能做到这一点？
当然`DataTextField="surname + name"`不行，但是有没有可能把这两个项目放在一起？

有我的代码：

```
<asp:DropDownList runat="server" ID="dllSpecialist" DataValueField="iduserspecialist" DataTextField="surname" AutoPostBack="true" OnSelectedIndexChanged="dllSpecialist_IndexChanged" AppendDataBoundItems="true">
                        <asp:ListItem Text="" Value="0"></asp:ListItem>
</asp:DropDownList> 
```

后面的代码：

```
 if (!IsPostBack)
    {
        dllSpecialist.DataSource = tUserSpecialistBO.getAllSpecialist();
        dllSpecialist.DataBind();
       (..)
    } 
```

sql方法：

```
public static DataSet getAllSpecialist()
{

    sql = "select * from tuserspecialist where del='false' and name!=''";
    return SQLTools.getDataSet(sql);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:42:27.897

更改您的 SQL 语句：

```
sql = "select surname + ' ' + name as FullName, iduserspecialist from tuserspecialist where del='false' and name!=''"; 
```

然后更改您的属性以指定新的数据项：

```
DataTextField="FullName" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:44:21.917

你可以做类似的事情

```
SELECT name + ' ' + surname AS Fullname FROM tuserspecialist WHERE del='false' AND name!=''" 
```

然后设置`DataTextField="Fullname";`

# java - 如何在 jar 中分析一个类？

> ID：13236444
> 
> 赞同：2
> 
> 时间：2012-11-05T16:40:14.813
> 
> 标签：java, jar, profiling, executable-jar, hprof

`mvn assembly:assembly`如果我在试图分析的 JAR（用 编译）中有一个类，那么获取可以与 jhat 或 Eclipse 内存分析器一起使用的有效核心转储的命令是什么？

我试着运行这个：

`java -agentlib:hprof=heap=sites,cpu=samples,file=profile.hprof,format=b -jar the-jar.jar`

并且当我停止进程时会创建核心转储。

但 jhat 或 Eclipse 内存分析器都不会将此视为有效转储。

jhat 给了我这个警告：

```
Resolving 0 objects...
WARNING:  hprof file does not include java.lang.Class!
WARNING:  hprof file does not include java.lang.String!
WARNING:  hprof file does not include java.lang.ClassLoader! 
```

还阅读了 hprof 文档，我看到我必须传递类名。当它在 JAR 中时，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:23:42.753

类是从 JAR 文件加载的事实与堆转储无关。

您可以使用`jmap`来获取可用的 HPROF 堆转储，而无需修改启动命令。

```
jmap -heap:format=b <pid> 
```

您可以使用`jps`命令行实用程序获取的进程 ID 在哪里。这两个可执行文件都是 JDK 的一部分。

# visual-studio-2008 - 更新工具栏按钮状态会窃取另一个窗口的焦点

> ID：13236461
> 
> 赞同：0
> 
> 时间：2012-11-05T16:41:01.250
> 
> 标签：visual-studio-2008, mfc, mfc-feature-pack

我正在开发一个 MDI 应用程序，其中更新工具栏按钮会弄乱拖动矩形的绘制。

在 ON_WM_LBUTTONDOWN 中调用 SetCapture()，在 ON_WM_MOUSEMOVE 中更新拖动矩形，在 ON_WM_LBUTTONUP 中擦除矩形并调用 ReleaseCapture()。

大多数情况下，此过程运行良好，但是当在此拖动操作期间，特定工具栏按钮将其状态从启用切换到禁用时，初始窗口会失去焦点并且不会收到 WM_LBUTTONUP。

这是调用堆栈的一部分

```
MyApp.exe!MyWindow::OnCaptureChanged(CWnd * pWnd=0x00000000)
...
mfc90d.dll!CWnd::EnableWindow(int bEnable=0x00000000)  Line 352 + 0x11 bytes C++
mfc90d.dll!CMFCToolBarEditBoxButton::SetStyle(unsigned int nStyle=0x00040000)  Line 470 C++
mfc90d.dll!CMFCToolBar::SetButtonStyle(int nIndex=0x00000001, unsigned int nStyle=0x00040000)  Line 1268 C++
mfc90d.dll!CMFCToolBarCmdUI::Enable(int bOn=0x00000000)  Line 2560 C++
MyApp.exe!MyToolbar::OnUpdateButton(CCmdUI * pCmd=0x0012faa8)
...
mfc90d.dll!CWinApp::OnIdle(long lCount=0x00000000) 
```

由于代码在软件移至 mfc 功能包之前一直在工作，我可以想象原因是错误设置的工具栏按钮（例如错误的窗口样式）？

或者我应该在绘制拖动矩形时阻止对 OnIdle 的调用（如果是这样，是否有一些标准方法可以实现这一点？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:10:36.867

据我所知，工具栏没有获得焦点。我怀疑您的更新处理程序本身会调用`EnableWindow`您的一个窗口。也许你在你的工具栏中放了一个自定义`HWND`？

# php - 为什么 Cakephp 中的简单身份验证需要验证电子邮件？

> ID：13236471
> 
> 赞同：0
> 
> 时间：2012-11-05T16:41:38.253
> 
> 标签：php, cakephp, authentication, cakephp-2.0

我正在 Cakephp App 中实现身份验证。

在那个应用程序中，我按照本教程开始实施身份验证：[简单的身份验证和授权应用程序](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)，但是本教程需要发送验证电子邮件，不知道为什么。这是我的代码：

**用户模型**：

```
<?php
App::uses('AppModel', 'Model');
App::uses('AuthComponent', 'Controller/Component');
/**
 * User Model
 *
 */
class User extends AppModel {

/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'username';

/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'username' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'password' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    public function beforeSave($options = array()) {
        if (isset($this->data[$this->alias]['password'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
        return true;
    }
} 
```

**应用控制器**

```
class AppController extends Controller {
    public $layout = 'bootstrap';

    public $helpers = array(
            'Session',
            'Html' => array('className' => 'TwitterBootstrap.BootstrapHtml'),
            'Form' => array('className' => 'TwitterBootstrap.BootstrapForm'),
            'Paginator' => array('className' => 'TwitterBootstrap.BootstrapPaginator'),
            'Time',
            'Js'
    );

    public $components = array(
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'reports', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
        )
    );

} 
```

**用户控制器**

```
<?php
App::uses('AppController', 'Controller');
/**
 * Users Controller
 *
 * @property User $User
 */
class UsersController extends AppController {

/**
 *  Layout
 *
 * @var string
 */
    public $layout = 'bootstrap';

/**
 * Helpers
 *
 * @var array
 */
    public $helpers = array('TwitterBootstrap.BootstrapHtml', 'TwitterBootstrap.BootstrapForm', 'TwitterBootstrap.BootstrapPaginator');
/**
 * Components
 *
 * @var array
 */
    public $components = array('Session');

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add', 'logout');
        }

        public function login() {
            if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash(__('Invalid username or password, try again'));
            }
            }
    }

public function logout() {
    $this->redirect($this->Auth->logout());
}
/**
 * index method
 *
 * @return void
 */
    public function index() {
        $this->User->recursive = 0;
        $this->set('users', $this->paginate());
    }

/**
 * view method
 *
 * @param string $id
 * @return void
 */
    public function view($id = null) {
        $this->User->id = $id;
        if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid %s', __('user')));
        }
        $this->set('user', $this->User->read(null, $id));
    }

/**
 * add method
 *
 * @return void
 */
    public function add() {
        if ($this->request->is('post')) {
            $this->User->create();
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(
                    __('The %s has been saved', __('user')),
                    'alert',
                    array(
                        'plugin' => 'TwitterBootstrap',
                        'class' => 'alert-success'
                    )
                );
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(
                    __('The %s could not be saved. Please, try again.', __('user')),
                    'alert',
                    array(
                        'plugin' => 'TwitterBootstrap',
                        'class' => 'alert-error'
                    )
                );
            }
        }
    }

/**
 * edit method
 *
 * @param string $id
 * @return void
 */
    public function edit($id = null) {
        $this->User->id = $id;
        if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid %s', __('user')));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(
                    __('The %s has been saved', __('user')),
                    'alert',
                    array(
                        'plugin' => 'TwitterBootstrap',
                        'class' => 'alert-success'
                    )
                );
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(
                    __('The %s could not be saved. Please, try again.', __('user')),
                    'alert',
                    array(
                        'plugin' => 'TwitterBootstrap',
                        'class' => 'alert-error'
                    )
                );
            }
        } else {
            $this->request->data = $this->User->read(null, $id);
        }
    }

/**
 * delete method
 *
 * @param string $id
 * @return void
 */
    public function delete($id = null) {
        if (!$this->request->is('post')) {
            throw new MethodNotAllowedException();
        }
        $this->User->id = $id;
        if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid %s', __('user')));
        }
        if ($this->User->delete()) {
            $this->Session->setFlash(
                __('The %s deleted', __('user')),
                'alert',
                array(
                    'plugin' => 'TwitterBootstrap',
                    'class' => 'alert-success'
                )
            );
            $this->redirect(array('action' => 'index'));
        }
        $this->Session->setFlash(
            __('The %s was not deleted', __('user')),
            'alert',
            array(
                'plugin' => 'TwitterBootstrap',
                'class' => 'alert-error'
            )
        );
        $this->redirect(array('action' => 'index'));
    }
} 
```

**表结构：**

```
id          int(10)
username    varchar(50)
password    varchar(50)
email           varchar(60) 
email_verified  varchar(70
email_token_expires     date
slug            varchar(40)
created     datetime
modified    datetime 
```

此解决方案需要电子邮件验证，但我想禁用电子邮件验证。如何？基本上，我需要对上述代码进行哪些更改才能拥有一个具有以下功能的简单身份验证系统：

*   无需访问控制
*   所有控制器和所有操作都需要 Auth
*   通过用户名/密码进行身份验证。
*   登录/注销/记住我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:02:59.763

我想我做错了什么。我的用户插件位于`Plugins`目录中，并且可能已加载该插件，`CakePlugin::loadAll()`这就是这种有趣行为的原因。删除了该插件，现在它按预期工作。

**故事的寓意：** 如果蛋糕没有按照应有的方式行事，那是因为插件

# javascript - 使用动态变量作为对象文字，jQuery animate 函数

> ID：13236473
> 
> 赞同：4
> 
> 时间：2012-11-05T16:41:47.940
> 
> 标签：javascript, jquery, jquery-ui

本来我有

```
targetWater.animate({
    "width": "+=100%" 
```

现在我想动态使用“宽度”或“高度”

```
var direction = (targetWater.hasClass('x'))? "width" : "height";
targetWater.animate({
    direction: "+=100%" 
```

但这不起作用。

我试过了

```
direction.toString() 
```

和

```
''+direction+'' 
```

对此也没有乐趣

```
var anim = { direction: "+=100%" }
targetWater.animate(anim, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T16:44:09.913

您的方法不起作用，因为`direction`它被解释为键，而不是变量。

你可以这样做：

```
var animation = {};
var direction = targetWater.hasClass('x') ? "width" : "height"
animation[direction] = "+=100%";
targetWater.animate(animation); 
```

方括号使您*可以*动态获得密钥。

* * *

如果您想要`"direction"`带有方括号符号的键，您可以编写：

```
animation["direction"]; 
```

这相当于：

```
animation.direction; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:44:13.563

使用括号表示法：

```
var anim = {};
anim[direction] = "+=100%"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T16:44:37.440

您的变量不会被插值，您需要通过以下方式定义它：

```
var options = {};
options[direction] = "+=100%";

targetWater.animate( options , /*...*/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T16:44:46.720

我建议您将其创建为属性并将其传递给`.animate`函数。见下文，

```
var direction = (targetWater.hasClass('x'))? "width" : "height";

var animProp = {};
animProp[direction] = "+=100%";

targetWater.animate(animProp, /*..*/); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-05T16:44:48.127

您可以使用“类数组”（括号）表示法来创建“正确”/动态属性：

```
var animation = {};
animation[targetWater.hasClass('x'))? "width" : "height"] = "+=100%";

targetWater.animate(animation); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-05T16:45:43.940

不，您不能在键中使用变量。您可以使用括号表示法构建对象

```
var anim = {};
anim[ targetWater.hasClass('x') ? "width" : "height" ] = "+=100%";
targetWater.animate(anim, … 
```

或者你不使用对象

```
targetWater.animate(targetWater.hasClass('x') ? "width" : "height", "+=100%", … 
```

# facebook - Facebook Like Button Migration for Pages Never Liked By "Admin"

> ID：13236474
> 
> 赞同：1
> 
> 时间：2012-11-05T16:41:48.910
> 
> 标签：facebook, facebook-like, migration, admin

Until recently, one could put a Like button on a web page, and if you were listed as the admin in the "fb:admins" tag on the page, and you then clicked the "Like" button yourself, an admin page would be created in your personal Facebook account where you could send updates to fans who had liked your web page. This is being phased out on November 7, by which time one needs to convert all such pages to "real" facebook pages following the procedure Facebook documents here:

developers.facebook.com/docs/reference/plugins/like/migration/

Our nonprofit organization operates web pages (and Facebook pages) for just over 200 breed-specific animal rescue groups, all of which have Facebook like buttons on each web page. I've successfully migrated over about 20 of these pages using the procedure designated in the page above.

The problem I'm having is that at some point recently, Facebook stopped creating the Admin pages when a page admin likes a web page. This means, for about 80% or so of the rescue pages we have (many with 1000's of likes), I have no way to "migrate" them because there is no page to migrate.

All of these pages have identical code as the pages I was able to migrate, the only difference is I never went, and as page Admin, clicked the Like button on any of these pages, so Facebook never created any page which I can use for the migration process. (I would have done this months ago had I known Facebook was phasing out this ability, but I don't think it was ever announced.)

I don't know when Facebook discontinued creating Admin pages for web pages with Like buttons, but having discontinued it before the November 7 actual migration deadline, we have no way now to access the likes from many of our web pages to migrate them over to our actual Facebook pages.

This might be better illustrated by examples. We operate a page for Pit Bull Rescue here:

[http://pitbull.rescueme.org/](http://pitbull.rescueme.org/)

I successfully migrated the "Likes" from that page to our actual Facebook page here using the documentation on Facebook's migration page:

[http://www.facebook.com/pitbull.rescueme.org](http://www.facebook.com/pitbull.rescueme.org)

(Note the "Like" count on the Facebook on the web page is higher, because Facebook counts certain shares on a page, that don't count as actual likes on a Facebook page.)

But here's a page with the problem: australianshepherd.rescueme.org

It has 383 Likes but there is no way for me to migrate those likes over because there is no associated page in my Facebook account to migrate. I created a Facebook page to merge these likes into ( www.facebook.com/australianshepherd.rescueme.org ) but don't know how to get them there.

In the past I would have just clicked the Like button on the WEB page itself, and an Admin page would have been created. Apparently Facebook discontinued that ability at some point long before the November 7 migration deadline, so I have no idea how I can fix this.

I imagine (or hope) there is some parameter perhaps I can switch in some app settings panel to help with this, but I can't find any way to do it. Any suggestions?

I've been told I need to ask someone at Facebook to manually transfer "Likes" from such pages over to our actual Facebook pages, but have not been able to reach someone to do this. If this is the necessary step, can someone from Facebook please contact me privately, or post here how to get that type of assistance.

If this was just a few hundred likes it wouldn't be a big deal, but cumulatively I believe we have well over 100,000 fans we will lose if we can't fix this. The hundreds of volunteers running all these rescue group web pages who spent many hours each week over the past year building up our fan base, aren't going to be pleased about learning all their efforts will be lost.

Any suggestions would be very, very appreciated!

Sincerely,

Jeff Gold

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:07:53.463

这是在 7 月份宣布的。 [https://developers.facebook.com/blog/post/2012/07/25/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/07/25/platform-updates--operation-developer-love/)

对于所有将其产品与 Facebook 集成的开发人员来说，关注 Facebook 开发人员博客非常重要。它通过 90 天的重大更改让读者及时了解最新情况。

# objective-c - 带有 Objective-C 的 C++ 回调，RtMidi 的应用程序

> ID：13236476
> 
> 赞同：1
> 
> 时间：2012-11-05T16:41:53.087
> 
> 标签：objective-c, callback

我已经阅读了之前关于该主题的一些讨论，但由于我对 Objective-C 比较陌生，所以我并不真正理解它们。（块、选择器和委托对我来说很新）。

情况如下：我正在使用那些用 C++ 编写的抽象类 RtMidi

```
void MidiInApi :: setCallback( RtMidiIn::RtMidiCallback callback, void *userData )
{
  if ( inputData_.usingCallback ) {
    errorString_ = "MidiInApi::setCallback: a callback function is already set!";
    RtMidi::error( RtError::WARNING, errorString_ );
    return;
  }

  if ( !callback ) {
    errorString_ = "RtMidiIn::setCallback: callback function value is invalid!";
    RtMidi::error( RtError::WARNING, errorString_ );
    return;
}

inputData_.userCallback = (void *) callback;
inputData_.userData = userData;
inputData_.usingCallback = true;
} 
```

我还有一个 Reciever 类，它实现了该回调（rtMidiCallback）。在我的主文件中的某个时候，我需要写这样的东西

```
 midiIn->setCallback(rtMidiCallback); 
```

这将在 c++ 上下文中，但在 Objective-C 中我不知道该怎么做。

如果您有任何想法，指点，我很乐意与您讨论。非常感谢你

最好的，

格雷格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:04:29.463

C++ 和 Objective-C 可以在同一个项目中，甚至在同一个文件中（Objective-C++ 文件扩展名为 .mm）。如果您使用的代码是为 C++ 回调而设计的，那么提供它并在该机制之外的不同对象类型之间进行通信可能会更容易。

* * *

```
//  CPPClass.h

#ifndef CPPClass_h
#define CPPClass_h

class CPPClass {
private:
    id m_ocObject;

public:
    CPPClass(id ocObject);
    virtual ~CPPClass();

    void verifyCPP();

};

#endif 
```

* * *

```
//  OCClass.h

#import <Foundation/Foundation.h>

class CPPClass;

@interface OCClass : NSObject {
    CPPClass *cppObject;
}

- (void)ocCallback;
- (void)verifyOC;

@end 
```

* * *

```
//  OCClass.mm

#import "OCClass.h"
#import "CPPClass.h"

#include <iostream>

@implementation OCClass

- (id)init {
    self = [super init];
    if (self) {
        cppObject = new CPPClass(self);
    }
    return self;
}

- (void)dealloc {
    delete cppObject;
}

- (void)ocCallback {
    NSLog(@"Objective-C called from C++");
}

- (void)verifyOC {
    NSLog(@"Objective-C called from Objective-C");
    cppObject->verifyCPP();
}

@end

CPPClass::CPPClass(id ocObject) : m_ocObject(ocObject)
{}

CPPClass::~CPPClass() {}

void CPPClass::verifyCPP() {
    std::cout << "C++ called from Objective-C" << std::endl;
    [m_ocObject ocCallback];
} 
```

要激活它，其他一些 .mm 文件将具有：

```
#import "OCClass.h"
...
OCClass *test = [[OCClass alloc] init];
[test verifyOC]; 
```

# svn - Is there a better development configuration than this?

> ID：13236477
> 
> 赞同：1
> 
> 时间：2012-11-05T16:42:02.767
> 
> 标签：svn, development-environment

I'm about to implement a new development configuration and before I head down the wrong path I need to know if this scenario has any pitfalls or could be optimized in any way.

I know this is somewhat open-ended, but development environments are never the same so I need eyes on this specific implementation.

**The answers I'm really looking for are specific suggestions on how to change this configuration.**

![Development Environment](../Images/58162f20b2552446b8acf35b13d6285c.png)

# vb.net - 从错误对象中获取错误的位置

> ID：13236478
> 
> 赞同：0
> 
> 时间：2012-11-05T16:42:13.320
> 
> 标签：vb.net, visual-studio, error-handling

我正在尝试编写一些代码来帮助我错误处理我的软件的编译版本。我必须在几台不同的 PC 上以编译版本的形式运行该软件，以加快将数据上传到我的数据库的速度。我有一个脚本，当其中一台 PC 遇到错误时，它会向我的地址发送一封电子邮件，而我不必反复检查。

在电子邮件中，我有发生错误的 sub 和错误号。但是我也想要导致错误的行。我尝试使用，`errorobject.erl`但是无论错误的位置如何，这只是给了我零值。我也尝试`errorobject.source`给我一个更详细的错误位置，但是这只是返回`microsoft.visualbasic`，错误的这个属性可以返回更详细的东西吗？

以下是我的代码：

```
 Public Sub SendErrorReport(ByVal ErrorObject As Microsoft.VisualBasic.ErrObject, ByVal Routine As String)
    'On Error GoTo Err

    Dim Recipient As String = "email1; email2"

    ' Create an Outlook application.
    Dim oApp As Outlook._Application
    oApp = New Outlook.Application()

    ' Create a new MailItem.
    Dim oMsg As Outlook._MailItem
    oMsg = oApp.CreateItem(Outlook.OlItemType.olMailItem)
    oMsg.Subject = "Notitia software - Error report"
    oMsg.Body = "Error occurred at " & Format(Now.Hour, "00") & ":" & Format(Now.Minute, "00") & " in " & Routine & ". Error no." & Str(ErrorObject.Number) & " - " & ErrorObject.Description & vbCr & vbCr & " - Error Line: " & ErrorObject.erl
    ' TODO: Replace with a valid e-mail address.
    oMsg.To = Recipient

    ' Send
    oMsg.Send()

    ' Clean up
    oApp = Nothing
    oMsg = Nothing

    Exit Sub
Err:
    MsgBox("Error in " & Routine & ". Error no." & Str(ErrorObject.Number) & " - " & ErrorObject.Description)

End Sub 
```

因此，基本上我正在寻找一种方法来增加有关此子可以发送给其收件人的错误的信息。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:33:26.860

`Try Catch`代替旧的 VB6/VBA 方式使用`on Error GOTO`. 例外`StackTrace`将为您提供所需的信息。

# c - libcurl http 获取json格式的请求

> ID：13236479
> 
> 赞同：1
> 
> 时间：2012-11-05T16:42:17.290
> 
> 标签：c, http, curl, get, libcurl

有没有办法使用 JSON 格式的 libcurl 发送 HTTP 获取请求？

我目前的要求是

`curl_easy_setopt(curl_handle, CURLOPT_URL, "http://localhost:9200/_search?q=tag:warcraft")`

使用 libcurl。它相当于 curl 是

```
curl -XGET http://localhost:9200/_all/tweet/_search?q=tag:warcraft 
```

我想使用 libcurl 发送以下 curl 请求（以 json 格式）。

```
curl -XGET http://localhost:9200/_search -d '{
    "query" : {
        "term" : { "tag": "warcraft" }
    }
}' 
```

我想知道发送上述请求的等效 libcurl 代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:50:37.137

你应该使用 CURLOPT_POSTFIELDS

```
curl_easy_setopt(curl, CURLOPT_POST, 1); 
curl_easy_setopt(curl, CURLOPT_POSTFIELDS, json_data_encoded_as_string); 
```

-d 选项用于 POST 方法。从 curl 手册页

> -d, --data 将 POST 请求中的指定数据发送到 HTTP 服务器

如果您需要发送更多无法放入查询字符串的数据，则必须使用 POST 方法

[http://en.wikipedia.org/wiki/POST_(HTTP)](http://en.wikipedia.org/wiki/POST_%28HTTP%29)

> 作为 GET 请求的一部分，可以在 URI 的查询字符串中传递一些数据，例如指定搜索词、日期范围或定义查询的其他信息。作为 POST 请求的一部分，可以在请求消息正文中将任意数量的任何类型的数据发送到服务器。

如果您必须严格使用 GET (?) 形成您的 url，以便将您的 json 数据放入查询字符串本身。

```
query_string = "q=" + json_encoded_to_str
curl_easy_setopt(curl_handle, CURLOPT_URL, "http://localhost:9200/_search?" + query_string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:13:59.273

按照 kalyan 的建议，这是我最终得到的代码。发布此以完成。

```
int main() {

     CURL *curl_handle;     
     CURLcode res;

    static const char *postthis="{\"query\":{\"term\":{\tag\":\"warcraft\"}}}";
    curl_global_init(CURL_GLOBAL_ALL);
    curl_handle = curl_easy_init();

    if(curl_handle) {

        curl_easy_setopt(curl_handle, CURLOPT_URL, "http://localhost:9200/_search");
        curl_easy_setopt(curl_handle, CURLOPT_POSTFIELDS, postthis);

        curl_easy_setopt(curl_handle, CURLOPT_POSTFIELDSIZE, (long)strlen(postthis));
        curl_easy_setopt(curl_handle, CURLOPT_WRITEHEADER, stdout);
        curl_easy_setopt(curl_handle, CURLOPT_WRITEDATA, stdout);

        res = curl_easy_perform(curl_handle);
        if(res != CURLE_OK)
                  fprintf(stderr, "curl_easy_perform() failed: %s\n",
                                        curl_easy_strerror(res));
        curl_easy_cleanup(curl_handle);
        return 0;
    }
} 
```

# ios - UINavigationController “转发”一个 pushViewController

> ID：13236481
> 
> 赞同：0
> 
> 时间：2012-11-05T16:42:21.440
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller

我对 UINavigationControllers 有疑问。我不知道如何表达我想要做的事情，所以我只是试一试。:) 我有一个工作 UINavigationController 层次结构。它工作正常。

然而，我有一种情况，“推送”的 ViewController 类本身不显示任何内容，而是确定将推送“转发”到哪个子 ViewController。

```
MasterVC -> DeciderVC -> forwards to fooVC
or                    -> forwards to barVC 
```

我想基本上将`[self.navigationController pushViewController:DeciderVC animated:NO]`使用逻辑重定向到`[self.navigationController pushViewController:fooVC animated:NO]`或者`barVC`

我可以将它硬编码到 MasterVC 中，但关键是我想在不同的场景中重用 DeciderVC，同时保持 MasterVC、fooVC 和 barVC 不变。我如何最好地做到这一点？

谢谢

**编辑：** 对工作流程的一个小说明： `MasterVC`显示一些可能的功能集。如果用户选择函数集 A，然后`DeciderObjectA`被调用并依次推送`fooVC`、记录数据，然后推送`barVC`、收集数据，然后`barVC`再次推送并收集数据。然后`DeciderObjectA`处理该数据。如果用户选择函数集 B，`DeciderObjectB`则被调用并依次推送`barVC`，`fooVC`然后再处理数据。DeciderObjects 对在和中
声明的相同委托方法的响应不同。 `@protocol``fooVC``barVC`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:09:27.713

可以`DeciderVC`简单地将所有内容转发到`foo`or`bar`吗？您不能简单地实例化适当的`viewDidLoad`for`Decider`并将其分配给`view`'`Decider`的视图吗？

例如

```
Decider.m
- (void) viewDidLoad:(BOOL)animated {
...
UIViewController *fooVC = [[FooVC alloc] init];
[self.view addSubview:fooVC.view];
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:00:17.057

如果您的 DeciderViewController 没有显示任何内容，为什么它必须是`UIViewController`? 在我看来，一个简单`NSObject`的检查策略并决定接下来要推动哪个控制器就足够了。用您的话来说，您在 MasterVC 中有决定推送哪一个的代码。（我不明白`UIViewController`中间有什么好处。如果我遗漏了什么，请详细说明。）

```
MasterVC -> fooVC 
MasterVC -> barVC 
```

# c# - 使 EF 使用 App_Data 文件夹中的本地数据库

> ID：13236483
> 
> 赞同：7
> 
> 时间：2012-11-05T16:42:29.623
> 
> 标签：c#, asp.net, entity-framework

我在使用 Entity Framework 的所有项目中都使用 POCO 方法。一切都很好，但我有一个问题：它正在我的 SQL Express 上创建数据库，而不是我希望它将我的数据库存储在 App_Data 文件夹中的 *.mdf 文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T17:06:10.367

[在使用AttachDBFilename](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)关键字的 Web.config 中设置适当的连接字符串。

```
<connectionStrings>
  <add name="MyContextClassName"
       connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=MyDatabase;Integrated Security=True;MultipleActiveResultSets=True;AttachDBFilename=|DataDirectory|MyDatabase.mdf;User Instance=True"
       providerName="System.Data.SqlClient" />
</connectionStrings> 
```

# jquery - Mouseup not working after mousemove on img

> ID：13236484
> 
> 赞同：8
> 
> 时间：2012-11-05T16:42:34.623
> 
> 标签：jquery, drag, mouseup

I'm trying to do a simple drag script. The idea is to save the position when the mouse is down, update the view while the mouse is moving, and stop when mouse is up. Problem, mouseup event isn't working properly.

See the code:

```
var target = $('a')
var pos = 0;
var dragging = false;

$(document).mousedown(function(e) { pos=e.pageX; dragging = true })
$(document).mouseup(function() { dragging = false })
$(document).mousemove(function(e) {
    if(dragging){ 
        target.css('left', e.pageX-pos);
    }
})  ​ 
```

Why mouseup works with a "a" tag: [http://jsfiddle.net/leyou/c3TrG/1/](http://jsfiddle.net/leyou/c3TrG/1/)

And why mouseup doesn't work with a "img" tag: [http://jsfiddle.net/leyou/eNwzv/](http://jsfiddle.net/leyou/eNwzv/)

Just try to drag them horizontally.

Same probleme on ie9, ff and chrome. Windows7

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-05T16:58:59.223

只需添加`e.preventDefault()`到您的 mousedown 处理程序，如下所示：

```
var target = $('img')
var pos = 0;
var dragging = false;

$(document).mousedown(function(e) { e.preventDefault(); pos=e.pageX; dragging = true })
$(document).mouseup(function() { dragging = false })
$(document).mousemove(function(e) {
    if(dragging){ 
        target.css('left', e.pageX-pos);
    }
}) 
```

请参阅工作[**演示**](http://jsfiddle.net/eNwzv/1/)。

修复的基本原理是，浏览器也在进行自己的本地图像拖放（例如，当您将图像拖出浏览器以将其拖放到外部应用程序中时），因此您需要取消该默认值使用`.preventDefault()`.

# mysql - Adding value in result table if value doesnt exist in SQL result with VBA in Excel

> ID：13236486
> 
> 赞同：0
> 
> 时间：2012-11-05T16:42:48.890
> 
> 标签：mysql, vba, excel

I am trying to get a table in excel via VBA connected to MYSQL data base. My query works but I would like to modify something in the results. Right now, I am getting the number of users that purchased 1, 2, 3..... in each column depending on the time variable j. However, for various values of j, there are no users that purchases 3 times or more. I would like to add a function that would say: if number of purchases equal 3, 4, 5 up to 10 does not exist, add value = 0 to that value.

For example: for j = 10 I get :

nb 1 :31 nb 3 :10

I would like to get

nb 1 :31 nb 2 :0 nb 3 :10 nb 4 :0 ......... nb 10 :0

Here is my code:

```
 For j = 1 To 30

    strSql = "SELECT COUNT(nb_purchases), nb_purchases from users" & _
     "WHERE DATEDIFF(date_added , register_date) >=" & j & " " & _
     "GROUP BY nb_purchases" & _
     "ORDER BY nb_purchases ASC ; "

    For i = 1 To 2
    Cells(i, j) = res(0, i)
    Next i
    Next j 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:50:44.167

您可能希望`case-when-then`在 mysql 查询中使用：

```
strSql = "SELECT COUNT(nb_purchases) as CountUsers,"+
         " (CASE WHEN (CountUsers > 2 & CountUsers <11) "+
                " THEN 0 ELSE CountUsers END) AS COUNTTOUSE, " +
        "nb_purchases from users" & _
        "WHERE DATEDIFF(date_added , register_date) >=" & j & " " & _
        "GROUP BY nb_purchases" & _
        "ORDER BY nb_purchases ASC ; 
```

使用`COUNTTOUSE`from result 在 excel 中写入。

# mvvm - knockout.js 如何防止模型更新模板。

> ID：13236492
> 
> 赞同：0
> 
> 时间：2012-11-05T16:43:02.827
> 
> 标签：mvvm, knockout.js, preserve

嗨，我有以下字段

```
<span id="myText" data=bind="text: name">default value</span> 
```

我希望能够用 like 初始化值

```
var model = {
   name = ko.observable("");
}
ko.apply(model); 
```

但是，我不希望值“默认值”改变。我想保留原始值。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:35:10.687

一种选择是使用自定义绑定从元素的当前 innerText 填充您的 observable。

就像是：

```
ko.bindingHandlers.textWithInit = {
    init: function(element, valueAccessor) {
        var observable = valueAccessor();
        observable("innerText" in element ? element.innerText : element.textContent);   
    },
    update: ko.bindingHandlers.text.update
}; 
```

您也可以为此添加更多错误处理（处理可观察对象和不可观察对象等）

示例：http: [//jsfiddle.net/rniemeyer/x4XJW/](http://jsfiddle.net/rniemeyer/x4XJW/)

# c++ - how order a vector of struct

> ID：13236493
> 
> 赞同：2
> 
> 时间：2012-11-05T16:43:07.180
> 
> 标签：c++, overloading, operator-keyword

im working with c++ and NS3 for my thesis. so i'd like to sort a vector of struct with the stl function sort so i'll post my header file where my vector is situated and i'll explain what i'd like to do.

```
#include "ns3/net-device.h"
#include "ns3/object.h"
#include "ns3/log.h"
#include <vector>
#include <stdint.h>
#include "miscellaneous.h"

namespace ns3 {

/**
 * \brief The UeRecord class is developed in order to store at the eNodeB
 * all information (such as feedback cqi, mac address etc...) of a UE registered
 * into that eNodeB. All UE records are managed by the UeManager class
 */
class UeRecord : public Object
{
public:
  UeRecord ();
  ~UeRecord ();

  /**
   * \brief CqiFeedbacks represents a list of CQI feedbacks
   * sent by the UE. The downlink packet scheduler of
   * the eNB uses these values to assign accordingly
   * radio resources.
   */

  /**
   * \brief a list of CQI feedbacks
   */
  typedef std::vector<struct CqiFeedback> CqiFeedbacks;

  /**
   * \brief Creates a ue record of the UE registered into the eNB
   * \param ue the pointer of the ue device
   * \param enb the pointer of the enb device
   */
  UeRecord (Ptr<NetDevice> ue, Ptr<NetDevice> enb);

  /**
   * \brief Set the UE of the record
   * \param ue the pointer of the ue device
   */
  void SetUe (Ptr<NetDevice> ue);

  /**
   * \brief Get the UE of the record
   * \returns the pointer of the UE
   */
  Ptr<NetDevice> GetUe (void);

  /**
   * \brief Set the eNB of the record
   * \param enb the pointer of the enb device
   */
  void SetEnb (Ptr<NetDevice> enb);

  /**
   * \brief Get the eNB of the record
   * \returns the pointer of the eNB
   */
  Ptr<NetDevice> GetEnb (void);

  /**
   * \brief Set CQI feedbacks of the registered UE
   * \param cqiFeedbacks a list of CQI feedback
   */
  void SetCqiFeedbacks (CqiFeedbacks cqiFeedbacks);

  /**
   * \brief Get CQI feedbacks of the registered UE
   * \returns a list of CQI feedback
   */
  CqiFeedbacks GetCqiFeedbacks (void);

public:
      friend bool operator > (const struct CqiFeedback &a, const struct CqiFeedback &b);

    inline bool operator > (const struct CqiFeedback &a, const struct CqiFeedback &b)
  {
      if(a.m_cqi>b.mcqi) return true;
        return false;
   }

private:
  Ptr<NetDevice> m_ue;
  Ptr<NetDevice> m_enb;
  CqiFeedbacks m_cqiFeedbacks;

}; 
```

the struct is this

```
struct CqiFeedback
  {
    /** the sub channel */
    int m_subChannelId;
    /** the cqi feedback */
    int m_cqi;
  }; 
```

i'd like to sort in descending order the vector m_cqiFeedbacks by the m_cqi parameter, the struct contained inside the header file miscellaneous.h. so i tried to overload the operator > in the previous way but i got this error:

```
debug/ns3/ue-record.h:121: error: ‘bool ns3::UeRecord::operator>(const CqiFeedback&, const CqiFeedback&)’ must take exactly one argument 
```

i don't understand what is wrong!! may you help me please, i tried to read previous discussion, but i didn't realize very well what the problem is ....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:44:05.600

这个：

```
friend bool operator > (const struct CqiFeedback &a, const struct CqiFeedback &b);

inline bool operator > (const struct CqiFeedback &a, const struct CqiFeedback &b)
{
  if(a.m_cqi>b.mcqi) return true;
    return false;
} 
```

应该

```
friend bool operator > (const struct CqiFeedback &a, const struct CqiFeedback &b)
{
  if(a.m_cqi>b.mcqi) return true;
    return false;
} 
```

将运算符声明为`friend`类内部可以让您实现为自由运算符 - 在这种情况下采用 2 个显式参数。所以你已经声明了自由运算符，好吧，但是你声明了成员运算符，因为它`inline`有 2 个参数，加上隐含的`this`，所以总共有 3 个参数，这是错误的。

或者，如果您想要成员运算符，请执行以下操作：

```
inline bool operator > (const struct CqiFeedback &b) const
{
  if( m_cqi>b.mcqi ) return true;
    return false;
} 
```

而且，当然，您可以更换

```
 if( m_cqi>b.mcqi ) return true;
    return false; 
```

用一个简单的

```
 return m_cqi > b.mcqi 
```

# visual-studio-2010 - 如何关闭这个烦人的开发人员代码完成？

> ID：13236495
> 
> 赞同：1
> 
> 时间：2012-11-05T16:43:14.043
> 
> 标签：visual-studio-2010

在我之前使用机器的开发人员已经设置了它，所以当我创建一个新的类文件时，我得到......

```
//-----------------------------------------------------------------------
// <copyright file="Chart.cs" company="ACompany">
//     Copyright (c) ACompany 2012\. All rights reserved.
// </copyright>
// <author>Annoying Developer</author>
//-----------------------------------------------------------------------
namespace ACompany.Core.POCO
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    /// <summary>
    /// TODO: Add class description
    /// </summary>
    public class Chart
    {
        /// <summary>
        /// Initializes a new instance of the Chart class
        /// </summary>
        public Chart()
        {
            // TODO: Add default constructor logic
        }
    }
} 
```

这不是 Visual Studio 的默认设置，我想要恢复默认设置，我该如何获取它？

谢谢，皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:45:12.040

更新新类的 Visual Studio 模板。

这是MSDN[上该主题的链接。](http://msdn.microsoft.com/en-us/library/6db0hwky.aspx)

[自定义项目和项目模板](http://msdn.microsoft.com/en-us/library/ms247119.aspx)是您应该开始的地方。

# php - Ajax only works when resending from firebug

> ID：13236498
> 
> 赞同：1
> 
> 时间：2012-11-05T16:43:21.573
> 
> 标签：php, jquery, ajax, firebug

```
$.post(
    "ajax.php",
    { action_do:"Register" },
    function(data,status){
        alert(data);
    }
); 
```

This script is called when the form is submitted from a page, test.php. ajax.php just echo some text.

The response body from firebug refers to test.asp ???

If I right click on the resend inside of firebug, the ajax call works, and the response body is the text from ajax.php

I am puzzled.

# c++ - How to parse single file using Python bindings to Clang?

> ID：13236500
> 
> 赞同：6
> 
> 时间：2012-11-05T16:43:31.450
> 
> 标签：c++, python, parsing, clang

I am writing a simple tool to help with refactoring the source code of our application. I would like to parse C++ code based on wxWidgets library, which defines GUI and produce XML `.ui` file to use with Qt. I need to get all function calls and value of arguments.

Currently I am toying with Python bindings to Clang, using the example code below I get the tokens and their kind and location, but the cursor kind is always `CursorKind.INVALID_FILE`.

```
import sys
import clang.cindex

def find_typerefs(node):
    """ Find all references to the type named 'typename'
    """

    for t in node.get_tokens():
        if not node.location.file != sys.argv[1]:
            continue
        if t.kind.value != 0 and t.kind.value != 1 and t.kind.value != 4:
            print t.spelling
            print t.location
            print t.cursor.kind
            print t.kind
            print "\n"

index = clang.cindex.Index.create()
tu = index.parse(sys.argv[1])
print 'Translation unit:', tu.spelling
find_typerefs(tu.cursor) 
```

What is the correct way to determine the cursor kind?

I couldn't find any documentation except few blog posts, but they were outdated or not covering this topic. I was neither unable to work it out from examples that came with Clang .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-22T22:05:49.803

对于游标对象，应该可以只使用 cursor.kind。也许问题是您正在行走令牌而不是子光标对象（不确定）。您可以使用 get_children 代替 get_tokens 来遍历 AST。

为了看看 AST 的样子，当我想写一个 AST 步行函数时，我使用这个脚本：[https](https://gist.github.com/2503232) ://gist.github.com/2503232 。这只是在我的系统上显示 cursor.kind 并提供合理的输出。不`CursorKind.INVALID_FILE.`

# google-analytics-api - 使用 Google Analytics API 获取标准 Google Analytics 图表

> ID：13236506
> 
> 赞同：1
> 
> 时间：2012-11-05T16:43:49.980
> 
> 标签：google-analytics-api

我只想获取显示在 Google Analytics（分析）首页上的基本图表。一个月内的观看次数。这个：http: [//i.imgur.com/0Jdpm.png](http://i.imgur.com/0Jdpm.png)

```
require_once('lib/gapi.class.php');
$ga = new gapi('asdf','qwerty');

$dimensions     = array('pagePath'); 
$metrics        = array('visits');
$sortMetric     = null;
$filter     = null;
$startDate      = '2012-10-05';
$endDate        = '2012-11-04';
$startIndex     = 1;
$maxResults     = 10;

$ga->requestReportData('48607689', $dimensions, $metrics, $sortMetric, $filter, $startDate, $endDate, $startIndex, $maxResults);

print_r($ga->getResults()); 
```

但这似乎返回的是每页而不是整个网站的浏览量。我必须使用哪些指标/维度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:06:38.057

使用**日期**作为维度。 **访问次数**对于指标是正确的（假设您想要“访问次数”而不是您在问题中所说的“浏览次数”）。并将**$maxresults**至少设置为您范围内的天数（即大于 31 的某个数字）。

您应该查看[GA 查询资源管理器](http://ga-dev-tools.appspot.com/explorer/)；熟悉指标和维度的绝佳工具。

# jquery - table width, how is it calculated?

> ID：13236508
> 
> 赞同：2
> 
> 时间：2012-11-05T16:43:56.610
> 
> 标签：jquery, html, css, html-table

I working on a locked headers jquery plugin and i am running into a problem where a table width is smaller than the sum of the column widths.

Here is how locked header plugins work: You create another table containing your table's original header and put it into a table thats floated above the original table. You then make sure the floated table's column widths and the original table's column widths are equal.

I am running into a problem where if a table has a width of 100% **and** its inside of a container with overflow, it seems that the table's width is not controlled by the sum of its column widths.

if the table is not in a container, it works.

see this test case: [http://programmingdrunk.com/floatThead/examples/big-table.htm](http://programmingdrunk.com/floatThead/examples/big-table.htm)

the first table should be as wide as the floated header. you can see that the column widths do not match up.

the 2nd table works fine because its not within a container with overflow:auto;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:00:15.347

您正在使用表格布局：已修复。只是阅读它，似乎有了这个，表格的第一行用于计算表格的宽度。当我检查时，您的第一行似乎是空的，这可能是导致问题的原因吗？

没有任何内容，这个宽度将等于容器的 100%，基于你的 css，这似乎是正在发生的事情。

尝试更改为`table-layout: auto`，尽管我怀疑您可能依赖于当前样式。

# matlab - Usage of anonymous functions in arrayfun with GPU acceleration (Matlab)

> ID：13236509
> 
> 赞同：3
> 
> 时间：2012-11-05T16:43:59.047
> 
> 标签：matlab, cuda, gpu, anonymous-function

I am new to the Parallel toolbox from Matlab R2012b and was wondering what the best way is to overcome the following problem.

I am analyzing the neighbourhood of every pixel in an image. Which is extremely good case for parallelization. However, I can't seem to get it working.

The main catch in the problem is that some "constant" arguments should be passed to the function. So the function should be called for every pixel, however, it also needs to access the surrounding pixels. (Preferable by passing the image as some sort of constant parameter and the coordinates of the pixel to be analyzed).

The output is one value per pixel.

At the moment I have this:

```
z2 = arrayfun(@(x) analyze(x, image, const1, ...), gpuArray(1:m*n)); 
```

Where x is the dummy-var, image a 2D matrix containing the luminance values of the image, const1 (and others) are function-constants (e.g. size of the analyze window). m and n are the size of the dimensions of the image.

However, I get this error

> Error using gpuArray/arrayfun Use of functional workspace is not supported.

Any ideas?

Cheers, Ruben

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:24:35.063

不幸的是，R2012b 中的 Parallel Computing Toolbox 不支持此功能。arrayfun 的 gpuArray 版本目前不支持将常量数据绑定到匿名函数句柄。Arrayfun 参数必须直接传递，并且必须都是标量或相同大小。

如果您可以绑定常量参数，接下来您会发现当前无法对它们进行索引（或对它们执行任何非标量操作）。

也许您可以使用支持的例程（例如 CONV2 或 FILTER2）来构建您的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T12:45:45.707

这是一个非常古老的帖子，但由于我正在努力解决类似的问题，我想分享我对此的发现：

如果你把你的调用`arrayfun`放在一个函数中，你也许可以将这个`analyze`函数实现为一个可以访问你的常量数组的嵌套函数。但是，这可能需要在重写代码时付出相当大的努力，因为在嵌套`analyze`函数中，您不能将任何完整数组传递给任何其他函数，这意味着您必须以仅使用常量的单个索引数组条目的方式重写所有内容数组，例如在数组上的 for 循环中。因此，诸如 etc. 之类的所有函数调用都`size`将不起作用，应该移到外面`analyze`（至少我正在使用的 Matlab2015b 是这种情况）。这是如何完成的示例（不是我的）：

[https://devblogs.nvidia.com/high-performance-matlab-gpu-acceleration/](https://devblogs.nvidia.com/high-performance-matlab-gpu-acceleration/)

最好的，

汉斯-马丁

# port - DNS, IP and PORT confusing behaviour

> ID：13236510
> 
> 赞同：2
> 
> 时间：2012-11-05T16:44:00.557
> 
> 标签：port, host

I have LINUX web server on local network on IP `192.168.1.200` (this is Xtreamer nas server) and I want to access it through win notebook from local wifi.

I have HOST file record `192.168.1.200 server.com`

Note that `ping server.com` returns `192.168.1.200` as expected

Could anybody explain why

`192.168.1.200:8080` returns xtreamer configuration page as expected

BUT

`server.com:8080` returns

`Forbidden You don't have permission to access / on this server. Microsoft-IIS/5.0 Server at server.com Port 8080`

I thought that it should returns same pages. What I dont understand is Microsoft-IIS in result when xtreamer has Linux inside.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:50:00.127

要么是因为您的浏览器使用 DNS 来查找 IP 地址，`server.com`并且不会检查 hosts 文件，要么是因为 Web 服务器未配置为回复带有`server.com`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:57:25.327

Xtreamer 在 Linux 上构建，Apache 包括`ModSecurity`. ModSecurity 还允许伪造服务器签名，例如。

`SecServerSignature "Microsoft-IIS/5.0"`

这就是 Xtreamer 所做的。

# android - onFling method of Gallery not getting called on swipe of images

> ID：13236512
> 
> 赞同：0
> 
> 时间：2012-11-05T16:44:03.630
> 
> 标签：android

I have MYGallery class extended by Gallery. onSwipe onFling method is not getting called what need to do.

code is as below

```
public MyGallery(PhotoAlbumDetailActivity context) {
        super(context);
        this.context = context;
        this.setFadingEdgeLength(0);
        //this.setSpacing(10);
    }

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
  System.out.println("On Fling");
  return true;
} 
```

in my main activity this.mConverseGallery = new ConverseGallery(this);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:58:06.797

`onFling()`方法必须返回一个布尔值：

```
public MyGallery(PhotoAlbumDetailActivity context) {
    super(context);
    this.context = context;
    this.setFadingEdgeLength(0);
    //this.setSpacing(10);
}

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    Log.i("test", "onFling()");
    return super.onFling(e1, e2, velocityX, velocityY);
} 
```

# session - wicket 从 getHomePage 创建一个动态返回类

> ID：13236519
> 
> 赞同：5
> 
> 时间：2012-11-05T16:44:16.067
> 
> 标签：session, dynamic, wicket-1.5

我正在使用 Wicket 1.5 构建一个 Web 应用程序。我需要确定当前登录的用户是管理员还是普通用户，并为每个用户显示不同的页面。

我的代码：

```
public class HomePage extends WebApplication {
  private boolean flag = false;

  @Override
  protected void init(){do things}

  @Override
  public Session newSession(Request request, Response response) {
           ... some calculation ...
     return new HomePageWebSession(request);
  } 

  @Override
  public Class<? extends WebPage> getHomePage(){    
     if(flag){
        return Admin.class
     } else return User.class
  }
 } 
```

问题是`getHomepage`之前调用过`newSession`，我使用 newSession 来确定用户是否是管理员并初始化标志。另外我看到在`getHomePage`被调用之前被调用了多次`newSession`。为什么被`getHomePage`多次调用，为什么`getHomePage`在之前被调用`newSession`？

谢谢你的帮助

# canvas - JavaFX GraphicsContext.translate 的意外行为

> ID：13236523
> 
> 赞同：3
> 
> 时间：2012-11-05T16:44:30.527
> 
> 标签：canvas, javafx-2

在探索 JavaFX Canvas 组件的功能时，我在使用该`translate(double,double)`方法时遇到了一个非常奇怪的行为：

当我在调用该`translate`方法后描边或填充路径时，路径被画得不合适。`translate`在下面的示例中，路径的移动似乎是我在方法中指定的三倍。然而，抚摸文本似乎将文本绘制在我期望的位置。（在 Linux 和 Windows 64 位上观察到此行为）

由于我是 JavaFX 和 Canvas 的新手，我不确定这是否是 JavaFX 运行时中的错误，或者我只是以错误的方式使用了该库。有人能指出我正确的方向吗？

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.canvas.Canvas;
import javafx.scene.canvas.GraphicsContext;
import javafx.scene.layout.GridPane;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

public class TestApplication extends Application
{
  public static void main( String[] args )
  {
    launch(args);
  }

  @Override
  public void start(Stage stage) throws Exception
  {
    Canvas canvas = new Canvas(500,500);
    paint(canvas.getGraphicsContext2D(), canvas.getWidth());

    GridPane root = new GridPane();
    root.add(canvas, 0, 0);

    Scene scene = new Scene(root);
    stage.setScene(scene);
    stage.show();
  }

  private void paint(GraphicsContext graphics, double width)
  {
    //Paint ruler lines on top
    for ( int xCoord = 0; xCoord < width; xCoord+=10 ) {
      graphics.setStroke(Color.RED);
      graphics.beginPath();
      graphics.moveTo(xCoord, 0);
      graphics.lineTo(xCoord, 10);
      graphics.stroke();
    }

    //Paint rectangles and text
    for ( int xCoord = 0; xCoord < width; xCoord+=10 ) {
      graphics.translate(10, 10);

      graphics.setStroke(Color.BLACK);
      graphics.beginPath();
      graphics.rect(0, 0, 300, 300);
      graphics.stroke();

      graphics.strokeText(String.valueOf(xCoord), 0, 0);
    }
  }
} 
```

上面的应用程序应该显示一个带有画布的窗口。画布内部应该有 50 个矩形，每个矩形应相对于前一个矩形在 x 和 y 方向上位移 10 个像素。在矩形顶部，绝对位移值应显示为字符串。在画布的顶部，我画了一个“尺子”来检查 10 像素的宽度。当我在计算机上运行此示例时，第一个矩形从 30,30 开始，第二个矩形从 60,60 开始，依此类推。但是数字显示在正确的位置。请看下面的图片（对不起，不能使用内联图片，因为stackoverflow不允许新用户这样做）：

[我的电脑上应用程序输出的图片](http://i.stack.imgur.com/qDlb3.png)

有人有同样的问题吗？或者我做错了什么？任何帮助将不胜感激。

*注意：*`graphics.beginPath()`如果您在矩形绘制循环中注释掉，它会变得更加奇怪......

**更新：**正如评论中所指出的，在`graphics.closePath()`我抚摸路径之前，我已经尝试过打电话。不幸的是，这似乎并没有改变任何东西。另请注意，使用方法`graphics.strokeRect()`而不是`beginPath,rect[,closePath],stroke`组合，输出是正确的（如预期的那样）

**UPDATE2：**由于 GraphicsContext API 似乎基于 HTML5 Canvas API，我已将上面的代码转换为 HTML5/Canvas 以查看会发生什么。在我的 Firefox 浏览器中运行它，转换后的代码的结果符合预期（不会像 JavaFX*那样*显示奇怪的行为）。

我还尝试使用 GraphicsContext API 中的`strokePolyline`和`strokePolygon`方法。使用下面的代码，路径的移动/翻译“仅”是预期的两倍。

```
double xCoords[] = { 0, 300, 300,   0,0 };
double yCoords[] = { 0,   0, 300, 300,0 };

graphics.strokePolyline(xCoords, yCoords, xCoords.length); 
```

我真的开始觉得这确实是 JavaFX 运行时中的一个错误。

**UPDATE3：**我已向 JavaFX JIRA 系统提交了错误报告：[RT-26119](http://javafx-jira.kenai.com/browse/RT-26119)。收到 JavaFX 团队的反馈后，我会尽快用答案更新这个问题。

**UPDATE4：**这个问题似乎在 jdk 1.8.0 早期访问版本中得到解决（用 b71 测试）

问候

# exception - CORBA.TRANSIENT 的考虑事项：初始和转发的 IOR 不可访问 vmcid：IBM 次要代码：E07 错误

> ID：13236527
> 
> 赞同：1
> 
> 时间：2012-11-05T16:44:39.060
> 
> 标签：exception, websphere, corba

BLUF：尝试将独立客户端连接到 WebSphere 中的 Extreme Scale 缓存时，我收到了一个异常，这有点误导，所以我在这里提供了解决方案。

我在 WebSphere Application Server (WAS) v8.5 中成功安装了 WebSphere Extreme Scale (WXS) v8.5（注意：不要尝试在 Installation Manager 中同时这样做，否则文件将会丢失——单独安装它们）。我还成功安装了客户端和服务器 EAR，因此我可以对客户端使用 REST 服务，而客户端又会连接到服务器以访问缓存。但是，当我尝试从 java 命令行（或从 Eclipse 中）运行独立客户端时，我遇到了以下异常：

```
java.lang.Throwable: org.omg.CORBA.TRANSIENT: initial and forwarded IOR inaccessible  vmcid: IBM  minor code: E07  completed: No
at com.ibm.rmi.corba.ClientDelegate.createRequest(ClientDelegate.java:1272)
...
Caused by: java.lang.Throwable: connect: Address is invalid on local machine, or port is not valid on remote machine
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:381) 
```

在 ObjectGridManager 上调用 connect 时：

```
_client = _ogManager.connect(hostport, null, clientObjectGridURL); 
```

首先要检查的是 objectGridClient.properties 文件中的主机和端口号是否正确（例如，端口号将与应用程序服务器的端口列表中的 BOOTSTRAP 端口匹配）。就我而言，这是正确的。使用 netstat -an |grep 查看是否有人在监听端口，或者 telnet 到主机端口。

接下来要检查的是防火墙没有妨碍到端口的连接。服务器也有对客户端的回调，因此您需要检查这是否没有造成问题。就我而言，这不是问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T16:44:39.060

问题出在我配置 WAS 时启用了一般安全性，因此管理控制台需要用户 ID 和密码。但是，当我调用 ObjectGridManager 进行连接时，我传递了一个 null 作为第二个参数，而不是传递正确的 ClientSecurityConfiguration 对象。显然，如果您已经保护了 WAS，那么尝试连接到 WAS 中的缓存的外部客户端需要提供安全信息来验证它们是否被允许连接。

我选择使用管理控制台/安全性/全局安全性关闭 WAS 安全性并取消选中启用管理安全性。这允许我通过传递 null 来继续测试，并推迟打开安全性并添加适当的安全配置设置并在连接调用中提供适当的对象，直到我们准备好在共享环境中进行测试（我的开发环境是自包含的我的笔记本电脑没有连接到公共网络）。

> 我已经包含了这个解释，希望其他寻找这个问题的解决方案的人可以在这里找到它，因为我没有成功找到这个替代方案的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T11:27:57.663

始终仔细检查您的存根类是否真的到位并且在部署中可用。听起来很简单，但这就是我遇到的问题......

所以这个错误的原因可能是多种多样的。

# asp.net-mvc - 使用带有外键的对象返回带有 WEB API 控制器的 JSON

> ID：13236528
> 
> 赞同：2
> 
> 时间：2012-11-05T16:44:39.700
> 
> 标签：asp.net-mvc, json, rest, asp.net-web-api

我的代码有问题。我有一些基本的 WEB API 控制器可以正常工作（三个字段没有任何外键），但是我有一个 API 控制器的问题，它从模型中返回一个对象列表，并且该类具有另一个类的外键模型。这会引发错误：这是 Api 控制器：

```
Public Class MaestroProvinciaController
    Inherits System.Web.Http.ApiController

    Private db As New UnificadorEntities

    ' GET api/MaestroProvincia
    Function GetMaestroProvincias() As IEnumerable(Of MaestroProvincia)
        Dim l As IEnumerable(Of MaestroProvincia)
        l = db.MaestroProvincia.AsEnumerable()
        Return l
    End Function
End Class 
```

这是 MaestroProvincia 的模型

```
Partial Public Class MaestroProvincia
  Public Property Codigo As Integer
  Public Property Descripcion As String
  Public Overridable Property Usuario As ICollection(Of Usuario) = New HashSet(Of Usuario)

End Class 
```

当我消费，尝试，从浏览器到这个地址： `......../api/maestroprovincia`

我收到一个错误： `Error del servidor El sistema encontró un error mientras extraía ......../api/maestroprovincia . Es posible que el servidor no esté disponible por mantenimiento o no esté bien configurado. A continuación se detallan algunas sugerencias: Volver a cargar esta página web después. Error HTTP 500 (Internal Server Error): Se encontró una situación inesperada mientras el servidor intentaba cumplir con la solicitud.`

当我调试控制器时，在`"l"`变量中放了一个 WATCH（检查），并且列表对象的类型很奇怪，而不是`MaestroProvincia`我得到的类型`system.data.entity.DynamicProxies.MaestroProvincia_D7543654378543`。

从没有 FK 的模型返回对象的所有其他 API 控制器没有任何问题。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:48:21.767

看起来您正在使用模型优先或数据库优先方法的 EF。EF 正在返回动态代理，允许您使用外键延迟加载依赖表。您不能序列化动态代理，您的 API 需要它来返回结果。直接返回您的 EF 实体通常不是一个好习惯。您应该改用纯[POCOS的](https://stackoverflow.com/questions/910253/what-is-poco)[数据传输对象 (DTO)](http://en.wikipedia.org/wiki/Data_transfer_object)。

我所说的纯 POCOS 是指您自己定义的类，它们模仿实体但只返回客户端所需的数据。您不能使用 EF 使用 T4 模板生成的 POCOS，因为它们有时是纯 POCOS，有时它们是动态代理。将实体转换为 DTO 的方法是为实体中的属性创建一个使用相同名称的类，并且只包括客户端使用的那些属性。我通常将 DTO 放在单独的命名空间中，以将它们与实体区分开来。然后使用[Automapper](https://github.com/AutoMapper/AutoMapper)自动将实体映射到 DTO 和 DTO 到返回的实体。Automapper 从映射过程中消除了苦差事。只需一行代码即可创建地图：

```
Mapper.CreateMap<Entity.MaestroProvincia, DTO.MaestroProvincia>(); 
```

然后只需要另一行代码来执行实际的映射：

```
DTO.MaestroProvincia dto = Mapper.Map<Entity.MaestroProvincia, DTO.MaestroProvincia>(maestroProvincia); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:58:05.350

这些是 Entityy Framework 为促进延迟加载而创建的代理。但它将具有您的域模型所具有的所有属性。您应该做的是从这些类中读取数据并将您的 ViewModel（POCO 类）返回到公共世界。将域模型原样返回公共世界**并不是一个好主意。**人们可以从中找出您的桌子的样子。

创建用于将数据返回到外部世界的 ViewModel（***POCO 类***）。只拥有返回所必需的属性。您不需要一直在视图模型中拥有域模型的所有属性。稍后从您的数据访问中获取数据，读取项目，将其映射到您的视图模型的实例并返回它。

```
List<Mastero> masteroList=new List<Mastero>();
var domainItems=db.MaestroProvincia.AsEnumerable();
foreach(var item in domainItems)
{
  var vm=new Mastero();
  vm.Name=item.Name;
  vm.Description=item.Description;
  masteroList.Items.Add(vm);
}  
 //Now return masteroList to the public 
```

假设`Mastero`是一个 POCO 类，你的视图模型。

```
public class Mastero
{
  public string Name { set;get;}
  public string Description { set;get;}
} 
```

# android - 从“onClick”内部迭代一个值

> ID：13236535
> 
> 赞同：0
> 
> 时间：2012-11-05T16:44:55.113
> 
> 标签：android, arrays, methods

我正在使用下面的逻辑来遍历数组 names[] 并在单击按钮时显示不同的结果。

```
i = intent.getIntExtra(MainActivity.EXTRA_INDEX, 0);
    j = i;

while (i==j)
    {
        j=j+1;
    final TextView nameView = (TextView) findViewById(R.id.vNames);
    String vName = names[i];
    nameView.setText(vName);

    Button nextButton = (Button) findViewById(R.id.nextButton);
    nextButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            i=i+1;
            return;
        };
    });
    } 
```

我的问题是使用新值摆脱 onClick 方法。代码卡在 onClick 内。（我已经在代码中的各个地方使用 System.out.println() 检查了发生了什么。）我已经使用了上面的

```
public void onClick(View v) {
            i=i+1;
            return;
        }; 
```

方法，它运行没有错误，但没有给我结果。我也尝试过类似的东西

```
public int onClick(View v) {
            i=i+1;
            return i; //or return int i;
        }; 
```

但这给了我错误“返回类型与 View.OnClickListener.onClick(View) 不兼容”。

任何关于如何处理这种或替代方法的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:49:55.817

onClick() 由系统调用，因此即使它确实返回了一个值，您也无法获取它 - 它返回到它被调用的位置，这是系统的一个组件。

您需要做的是定义 onClick() 方法范围之外的值，即您的类的成员，并在您的方法中设置它。然后该值将在方法调用中持续存在。

我还想指出，您在 while 循环中一遍又一遍地为 nextButton 按钮定义 onClick() 方法。查看代码，我不明白您为什么要这样做......但同时，您的循环条件 (i==j) 仅适用于循环的第一次迭代。J 在循环外设置为 i，所以循环第一次运行，j 增加 1（j=j+1），下一次迭代检查条件，i 仍然是它的原始值，所以 j 不再匹配到我，所以这个循环只会运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:50:54.290

那么，您想要的是每次按下按钮时增加“i”的值，然后更改名称视图上的文本？试试这个：

```
nextButton.setOnClickListener(new OnClickListener(){
   public void onClick(View v) {
        i++;
        nameView.setText(names[i]);
    };
}); 
```

但是，您最终会用完名称。如果您想从头开始重复这些值，请尝试以下操作：

```
nextButton.setOnClickListener(new OnClickListener(){
   public void onClick(View v) {
        i++;
        nameView.setText(names[i%names.length]);
    };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:04:54.637

尝试使用一种方法：

```
public class MainActivity extends Activity {
private int i;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button b = (Button) findViewById(R.id.button1);
    final TextView tv = (TextView) findViewById(R.id.textView1);
    this.i = 3;

    b.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            incrementI();
            tv.setText(Integer.valueOf(i).toString());
        }
    });
    }

    public void incrementI()
    {
        this.i = this.i + 1;
    }
} 
```

您可以调用增加值的方法。

```
public int onClick(View v) {
            i=i+1;
            return i; //or return int i;
        }; 
```

这是行不通的，因为没有返回整数的称为 onClick() 的方法。当您在 OnClickListener 中使用变量时，它必须是最终的。

# maven - 如何使用配置文件为不同版本的 jdk 编译 maven 项目？

> ID：13236538
> 
> 赞同：0
> 
> 时间：2012-11-05T16:45:00.183
> 
> 标签：maven, java, profiles

如何使用带有配置文件的不同 jdk 编译 maven 项目？我想在我的 POM 文件中指定不同的配置文件，并使用配置文件名称运行命令 mvn。帮帮我，我是新手。一个完整的例子将是理想的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:07:48.107

您可以使用工具链 - 请参阅使用工具链[指南](http://maven.apache.org/guides/mini/guide-using-toolchains.html)

基本上这就是你所做的：

*   `${user.home}/.m2/toolchains.xml`在文件中准备你的 JDK
*   在 pom.xml 中，对于每个所需的 JDK，创建一个`maven-toolchain-plugin`从阶段`validate`（目标`toolchain`）调用的配置文件

而已。

请注意，工具链仅适用于某些“工具链感知”插件。

*（不幸的是我现在没有完整的例子）*

# javafx-2 - TextField 出现垂直收缩

> ID：13236540
> 
> 赞同：0
> 
> 时间：2012-11-05T16:45:05.567
> 
> 标签：javafx-2

`Grid`我在布局中有以下组件：

```
1\. Label span=2 cols
2\. Label | ComboBox
3\. Label | ComboBox
4\. Label | ComboBox
5\. TextField span=2 cols
6\. Button span=2 cols
7\. Label span=2 cols
8\. ListView span=2 cols
9\. ComboBox | ComboBox
10.Button span=2 cols 
```

问题是没有。如图5所示`TextField`，如果窗口的高度不够大，`TextField`则只显示一行而不是文本框，从而使其不可读。同时`ListView`（在 8\. 中）显示 15 行，尽管它只有 2 个值要显示。

我怎样才能使`TextField`不缩小？唯一应该缩小的是`ListView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:11:18.277

在场景生成器的布局选项卡中，选择“最小宽度”框并输入高度。或者，您可以设置使用文本字段的首选高度的 USE_PREF_SIZE。

# ruby-on-rails - Rails 确实为模型选择助手

> ID：13236545
> 
> 赞同：1
> 
> 时间：2012-11-05T16:45:12.403
> 
> 标签：ruby-on-rails, select, map, model

我有订单模型。但为此我需要介绍一些编辑。我需要做选择列表并将其放入模型文件中，例如

```
id | name 
```

当我创建新订单时，我将 db 作为 orderstatus_id 放入例如 1。当我在管理面板中看到此值时，我想查看名称。但是如何在没有任何数据库表的情况下做到这一点？另外例如，当我更改管理面板订单状态时，我会看到此选择列表...

所以我需要对模型、控制器和视图进行更改……但是如何执行我在下面描述的操作？我也明白这听起来像是一个广泛的问题，但不，不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:24:12.123

选择助手旨在处理可枚举的对象（响应每个对象）。通常它们是 AREL 结果对象的数组，但它们不是必须的。你可以这样做：

```
<%= f.select :thing , [['Big Thing',1],['Medium Thing',2],['Huge Thing',3]] %> 
```

或者你可以这样做：

```
config/initializers/thing.rb:
  $mythings = [['Big Thing',1],['Medium Thing',2],['Huge Thing',3]] 
```

然后你可以这样做：

```
<%= f.select :thing, $mythings %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:12:13.437

您要的是非 SQL 数据库吗？您可以使用 mongodb（mongoid 是 gem 名称）[这里](http://mongoid.org/en/mongoid/docs/rails.html)是文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:26:35.527

您应该创建一个带有`name`字段的 OrderStatus 模型。然后你的 Order 模型应该声明`has_one :order_status`. 然后，您可以使用`@order.order_status.name`按名称获取订单状态。然后您的选择助手将类似于：

```
select("foo", "orderstatus_id", OrderStatus.all.collect {|os| [ os.name, os.id ] }) 
```

# google-analytics - 如何在 Google Analytics 中跟踪按钮的点击率

> ID：13236548
> 
> 赞同：2
> 
> 时间：2012-11-05T16:45:26.990
> 
> 标签：google-analytics

我正在尝试查找我页面上的按钮被点击的次数。我可以找到页内视图并跟踪链接的点击率，但该按钮不显示任何类型的点击率。有不同的方法可以做到这一点吗？即使我无法获得追溯信息，我也想让事情向前发展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:33:13.943

这实际上取决于您单击该按钮时会发生什么。

如果单击按钮在页面上执行某些操作，则可能甚至跟踪（上面建议）是正确的方法。

如果单击按钮导致导航到另一个页面，则 Google Analytics 已经记录了此操作，您可以在从您的页面到下一页的导航摘要中看到它。

如果您想在 In-Page Analytics 中查看此信息，则必须使用增强的链接归因，并且需要在按钮元素上设置 ID（如果您还没有 ID）。可在以下位置找到增强的链接归属信息：http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=2558867](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867)

这刚刚在：[http](http://analytics.blogspot.co.il/2012/11/announcing-enhanced-link-attribution.html) ://analytics.blogspot.co.il/2012/11/announcing-enhanced-link-attribution.html 上宣布，目前您可能无法使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:49:12.077

如果您还没有这样做，您应该使用 GA 事件跟踪来注册此类活动。

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

# r - 加载包错误消息 - mac os x

> ID：13236554
> 
> 赞同：0
> 
> 时间：2012-11-05T16:45:32.903
> 
> 标签：r

我是一个相对新手用户，试图从 cran 存档安装包 NMF_0.2.2.tar。

我收到一条似乎与机器架构有关的错误消息，但我不确定如何解决它。在这里和谷歌上搜索并没有提供修复。安装命令和错误信息如下。

我在 Intel Core 2 Duo Macbook Pro 上的 Mac OS X 10.6.8 下运行 R 版本 2.15.2。我还没有收到包维护者的回复，也许他不再可以维护它，这就是它被归档的原因。任何帮助都将不胜感激，因为我有一些使用此软件包的旧结果，并希望完成该调查。

# ------------------------------------------------

> sudo -ER CMD INSTALL ~/Downloads/NMF_0.2.2.tar
> 
> *   安装到库'/Library/Frameworks/R.framework/Versions/2.15/Resources/library'
>     
>     
> *   安装*源*包'NMF' ...
>     
>     
> 
> ** R
> 
> ** 数据
> 
> ** 安装
> 
> ** 为延迟加载准备包
> 
> 从包'NMF'中的包'stats'中为'residuals'创建一个通用函数**帮助
> 
> ***安装帮助索引
> 
> ** 构建包索引
> 
> ** 安装小插曲
> 
> 'NMF-vignette.Rnw' ** 测试是否可以加载已安装的包
> 
> ***拱-i386
> 
> 错误：'NMF' 的 loadNamespace() 中的 .onLoad 失败，详细信息：
> 
> 调用：is.list(...)
> 
> 错误：提供的参数名称“default.algorithm”与“x”不匹配
> 
> 错误：加载失败
> 
> 执行停止
> 
> ***拱 - x86_64
> 
> 错误：'NMF' 的 loadNamespace() 中的 .onLoad 失败，详细信息：
> 
> 调用：is.list(...)
> 
> 错误：提供的参数名称“default.algorithm”与“x”不匹配
> 
> 错误：加载失败
> 
> 执行停止
> 
> 错误：“i386”、“x86_64”加载失败
> 
> *   删除'/Library/Frameworks/R.framework/Versions/2.15/Resources/library/NMF'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:00:55.143

我使用 R 2.15.1 在我的 Mac 上从包作者的 repo (http://web.cbio.uct.ac.za/~renaud/CRAN/) 安装了 NMF 0.9。它给了我一条错误消息，“错误：没有为'arch = i386'安装包'bigmemory'”，所以我安装了“bigmemory”包，现在它安装得很好。

# drupal - 在内容中过滤的drupal 7中创建带有视图的块

> ID：13236560
> 
> 赞同：1
> 
> 时间：2012-11-05T16:45:53.573
> 
> 标签：drupal, drupal-7, views, taxonomy

我的内容类型有一个分类标准。我喜欢创建块以显示在该内容页面中，该页面收集了具有相同分类术语的其他内容类型的标题。创建关系或上下文过滤器的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:24:04.170

对于上下文过滤器，我会这样做：

1）创建一个“有分类术语ID”上下文过滤器

2）当过滤器值不可用时 -> 提供默认值 -> URL 中的分类术语 ID 检查“从节点页面加载默认过滤器，这对相关分类块有好处”：这是主要技巧。它将从当前节点加载所有分类。如果需要，配置“按词汇限制术语”和/或“多值处理”

3）当过滤器值可用或提供默认值时 -> 指定验证标准 -> 分类术语 -> 并检查您正在寻找的分类过滤器值类型应设置为“术语 ID”

如果需要，然后像往常一样使用静态过滤器。

ps：如果您的内容类型有多个分类字段（例如复选框），您必须在上下文过滤器的“更多”部分下启用“允许多个值”，并在第 2 步相应地设置“多值处理”。

# macos - 将多个捕获的组从 sed 提取到变量

> ID：13236566
> 
> 赞同：10
> 
> 时间：2012-11-05T16:46:29.680
> 
> 标签：macos, bash, shell, unix, sed

我有以下文字

```
abc <THIS> abc <THAT> abc <WHAT> abc 
```

where`abc`是定义明确的表达式的占位符。我想提取括号中的 3 个术语并将它们保存在 3 个单独的变量中。是否可以在不解析文本 3 次的情况下做到这一点？基本上我想捕获并以某种方式“导出”多个组。

很明显，我可以像这样提取其中一个：

```
VARIABLE=`echo $TEXT | sed "s_abc <\(.*\)> abc <.*> abc <.*> abc_\1_g"` 
```

但是是否有可能在不运行 3 次的情况下获得所有 3`sed`个？

`sed`也欢迎其他（便携式）解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T16:56:45.127

如果有任何你知道*不会*出现在`THIS`、`THAT`或中的字符`WHAT`，那么你可以这样写：

```
IFS=$'\t' read -r VAR1 VAR2 VAR3 \
    < <(sed 's/^abc <\(.*\)> abc <\(.*\)> abc <\(.*\)> abc$/\1\t\2\t\3/' \
             <<< "$TEXT"
       ) 
```

告诉`sed`在其输出中`read`使用该分隔符，并在其输入中使用该分隔符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T17:06:02.597

这可能对您有用（GNU sed 和 bash）：

```
line='abc <THIS> abc <THAT> abc <WHAT> abc'
var=($(sed 's/[^<]*<\([^>]*\)>[^<]*/"\1" /g' <<<"$line"))
echo "first ${var[0]} second ${var[1]} third ${var[2]}"
first "THIS" second "THAT" third "WHAT" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T20:27:15.703

无需生成进程：

```
var='abc <THIS> abc <THAT> abc <WHAT> abc'
var1=${var#abc <}          # Remove the leading 'abc <'.
THIS="${var1%%> abc <*}"   # Remove the longest trailing '> abc <*'.
var2="${var1#*> abc <}"    # Remove the shortest leading '*> abc <'.
THAT="${var2%%> abc <*}"   # Remove the longest trailing '> abc <*'.
var3="${var2#*> abc <}"    # Remove the shortest leading '*> abc <'.
WHAT="${var3%> abc}"       # Remove the trailing '> abc'
echo "$THIS"
echo "$THAT"
echo "$WHAT" 
```

# jquery - 将变量传递给 .load 函数

> ID：13236569
> 
> 赞同：0
> 
> 时间：2012-11-05T16:46:36.117
> 
> 标签：jquery

我想将一个变量传递给 .load() 函数，而不是 URL，而是之后会发生的函数。

正如您在下面看到的，我有一个 if/else 语句。我想将一个变量传递给它。目前，我有 2 个变量位于此之外，`$next`并且`$prev`这些变量在方法之外。我试过让它们全球化，但这不起作用。理想情况下，我希望这些是变量，因为它被使用了几次。

```
var $next = $('.nav.next');
var $prev = $('.nav.prev');

method.open = function(settings) {
    var $link_url = settings.url + ' ' + settings.element;

    $($modal_inner).load( $link_url, function(response, status, xhr ) {
        if (status == 'error') {
        var msg = 'Sorry but there was an error: ';
            $( '#error' ).appendTo( '.modal_inner' );
            $( '#error' ).html( msg + xhr.status + " " + xhr.statusText) ;
        }
        else {
            // Get pagination URL's
            var $pag_next = $(this).find('#post').attr('data-pag-next');
            var $pag_prev = $(this).find('#post').attr('data-pag-prev');

            // If URL's add URL and show 
            if( $pag_next != '') {
                $( $next ).attr('href', $pag_next);
            }
            if( $pag_prev != '') {
                $( $prev ).attr('href', $pag_prev);
            }

        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:48:04.000

您可以在父范围内使用变量，可以是来自父函数的局部变量，也可以是来自父函数的参数。例如，如果您像这样传入`next`并`prev`传入`open`方法，那么您可以在`load`处理函数中访问它们。

```
method.open = function(settings, next, prev) {
    var $link_url = settings.url + ' ' + settings.element;

    $($modal_inner).load( $link_url, function(response, status, xhr ) {
        // you can access next and prev from your parent scope here
        if (status == 'error') {
        var msg = 'Sorry but there was an error: ';
            $( '#error' ).appendTo( '.modal_inner' );
            $( '#error' ).html( msg + xhr.status + " " + xhr.statusText) ;
        }
        else {
            // Get pagination URL's
            var $pag_next = $(this).find('#post').attr('data-pag-next');
            var $pag_prev = $(this).find('#post').attr('data-pag-prev');

            // If URL's add URL and show 
            if( $pag_next != '') {
                $( $next ).attr('href', $pag_next);
            }
            if( $pag_prev != '') {
                $( $prev ).attr('href', $pag_prev);
            }

        }
    });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:49:17.987

删除$next 之前的**$()**

```
$( $next ) 
```

应该

```
$next 
```

因为 $next 已经是一个 jQuery Object ..

在代码中，您再次尝试将其转换为**jQuery 对象**

```
if( $pag_next != '') {
    $next.attr('href', $pag_next);
}
if( $pag_prev != '') {
    $prev.attr('href', $pag_prev);
} 
```

# unit-testing - 测试在主模块 .run 方法中运行的 AngularJS 代码

> ID：13236570
> 
> 赞同：2
> 
> 时间：2012-11-05T16:46:36.527
> 
> 标签：unit-testing, angularjs, jasmine

所以我开始为我编写的 AngularJS 应用程序编写单元测试。此应用程序受到登录页面的保护，因此如果用户名未登录，则对登录页面以外的任何页面的任何请求都将重定向登录页面。这个逻辑是从主模块的 .run() 方法执行的，因为它只需要在应用程序启动时运行一次，但是有没有办法测试从主模块的 .run() 方法中执行的代码？我有以下测试代码：

```
describe('Login Controller', function(){
    'use strict';

    var scope, controller, $httpBackend, $resource, callback;

    beforeEach(module('application'));

    beforeEach(inject(function($injector, $rootScope, $controller, $http, $location, authentication, session) {
        $httpBackend = $injector.get('$httpBackend');
        $httpBackend.expectGET('/api/v1/authentication').respond({status: 'success', data: null});
        $resource = $injector.get('$resource');
        callback = jasmine.createSpy();
        scope = $rootScope.$new();
        controller = new $controller('Login', {
            $scope: scope,
            $http: $http,
            $location: $location,
            authentication: authentication,
            session: session
        });
    }));

    afterEach(function() {
        $httpBackend.verifyrifyNoOutstandingExpectation();
        $httpBackend.verifyNoOutstandingRequest();
    });

    it('should verify all default values for controller', function() {
        expect(scope.username).toEqual('');
        expect(scope.password).toEqual('');
        expect(scope.displayApplicationLoad).toEqual(false);
        expect(angular.isFunction(scope.login)).toEqual(true);
        expect(angular.isFunction(scope.logout)).toEqual(true);
        expect(scope.loggedIn).toEqual(false);
        expect(scope.headerTemplate).toEqual('/templates/core/header.html');
        expect(scope.footerTemplate).toEqual('/templates/core/footer.html');
    });
}); 
```

问题是在主模块 .run() 方法中运行的代码没有考虑到

```
$httpBackend.expectGET('/api/v1/authentication').respond({status: 'success', data: null}); 
```

线。我是否应该将此逻辑放在其他地方以便我可以对这段代码进行单元测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T06:46:18.003

我会将您要测试的所有这些代码移动到服务中，然后将其注入到运行块中。然后您可以独立测试此服务。然后，您还可以设置模块以更灵活地测试依赖于身份验证的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:19:39.243

我想我找到了一种测试模块运行方法的方法。这有点hacky，但它完成了工作。这是我的解决方案：

```
describe( 'my module', function() {

  var runBlocks;

  beforeEach( function() {
     var myModule = angular.module( 'modules.flow' );

     runBlocks = myModule._runBlocks;
     myModule._runBlocks = [];

     module( 'myModule' );
  } );

  afterEach( function() {
     angular.module( 'modules.flow' )._runBlocks = runBlocks;
  } );

  describe( 'when loaded', function() {

     beforeEach( inject( function( $injector ) {

        // Here you could e.g. configure $httpBackend

        for( var i = 0; i < runBlocks.length; ++i ) {
           $injector.invoke( runBlocks[i] );
        }
     } ) );

     // Tests ...

  } );

} ); 
```

首先，我复制为模块定义的所有运行块并删除运行块的内部列表。然后可以进行运行块成功所需的设置，然后让注入器调用函数。

尽管如此，如果有机会将运行块中的代码提取到适当的服务中，您应该更喜欢这种方式。

**更新：**添加了缺失的`afterEach`方法

**更新 2：**固定调用`angular.module`

# ruby - 数组中的字母顺序，顶部有多个默认值

> ID：13236571
> 
> 赞同：3
> 
> 时间：2012-11-05T16:46:43.050
> 
> 标签：ruby, arrays

我有一个带有字符串的数组，我希望它按字母顺序排列，但顶部有一些默认值。例如：

```
["a", "b", "default1", "d", "default2", "c", "e"] 
```

我希望结果是：

```
["default1", "default2", "a", "b", "c", "d", "e"] 
```

有人知道我怎么能轻松完成这个任务？

更新

默认值也包含在数组中，并且数组按字母顺序排列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:20:35.120

可枚举包括[`partition`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-partition)：

```
data = ["a", "b", "default1", "d", "default2", "c", "e"]
data.partition{ |d| d['default'] }.flatten
=> ["default1", "default2", "a", "b", "d", "c", "e"] 
```

如果你得到的数据没有按照你想要的最终顺序排序，你可以在分区之前对其进行预排序：

```
data = ["c", "b", "default2", "a", "default1", "e", "d"]
data.sort.partition{ |d| d['default'] }.flatten
=> ["default1", "default2", "a", "b", "c", "d", "e"] 
```

如果您需要更智能和更全面的排序算法来处理各种“默认”条目，您可以使用`sort`or`sort_by`与 lambda 或 proc 来区分默认条目和常规条目之间的区别，并返回所需的`-1`,`0`和`1`值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T16:56:51.907

像这样的工作：

```
array = ["a", "b", "default1", "d", "default2", "c", "e"]
defaults = ["default1", "default2"] #Add more if needed
sorted_array = array.sort{|a, b| defaults.include?(a) ? -1 : defaults.include?(b) ? 1 : a <=> b }
puts sorted_array # => ["default1", "default2", "a", "b" "c", "d", "e"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T17:30:52.157

利用数组定义的字典顺序，我会写：

```
defaults = Hash[["default1", "default2"].to_enum.with_index.to_a]
xs = ["a", "b", "default1", "d", "default2", "c", "e"]
xs.sort_by { |x| [defaults[x] || defaults.size, x] }
#=> ["default1", "default2", "a", "b", "c", "d", "e"] 
```

# java - 内容解析器 - 添加新的非本地日历 - 进程结束时删除日历

> ID：13236573
> 
> 赞同：3
> 
> 时间：2012-11-05T16:46:47.303
> 
> 标签：java, android, insert, android-contentresolver

我正在开发一个 Android 应用程序，我需要为用户制作一个新日历。我使用 Eclipse、Windows 7 和带有 Android ICS 4.0.3 的 Archos G9 平板电脑。我现在以 API 14 为目标。

我对 Java、Android 环境和 Stack Overflow 都是新手，请多多包涵。

我使用 ContentResolver，当我使用 LOCAL 帐户类型时它工作正常（尽管我似乎无法找到正确的参数来获取没有与会者选项的事件）。

当我尝试切换到“com.google”帐户类型时，使用我在平板电脑上注册的 gmail 帐户，虽然它仍然可以正常工作而不会引发任何异常，但新的日历应用程序和事件不会显示在 Google 日历上本机应用程序（它曾经以 LOCAL 帐户类型立即显示）。虽然我可以在应用程序运行时列出它，但如果我重新启动并列出它不再存在（它曾经保留在 Google 日历上，并且可以在使用 LOCAL 帐户类型重新启动时列出）。

这是我的代码，已注释，以便我更清楚主类：

```
package com.example.testnativecalendar;

import android.os.Bundle;
import android.provider.CalendarContract;
import android.app.Activity;
import android.content.ContentResolver;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity
{
    static private final String CALENDAR_NAME = "MyLocalTestCalendar";
    static private final String CALENDAR_DISPLAY_NAME = "My local test calendar";

    static private final String[] CALENDARS_PROJECTION =    {   CalendarContract.Calendars._ID,
                                                                CalendarContract.Calendars.ACCOUNT_NAME, 
                                                                CalendarContract.Calendars.ACCOUNT_TYPE, 
                                                                CalendarContract.Calendars.NAME, 
                                                            };

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView( R.layout.activity_main );

        ContentResolver contentResolver = getContentResolver();

        // I first list to check what is there before I do anything.
        // If I tried to add a local account, it is still here.
        // If I tried a com.google account, it is not in the list anymore.
        CalendarUtilities.listCalendars( contentResolver, CALENDARS_PROJECTION, " | " );

        // I clean the old calendars I tried to insert, if they are here.
        long[] calendarIDs = CalendarUtilities.getCalendarsIDs( contentResolver, CALENDAR_NAME );
        if ( calendarIDs.length != 0 )
            for ( long id : calendarIDs )
                CalendarUtilities.removeCalendar( contentResolver, id );

        // I had a calendar
        calendarIDs = new long[] { CalendarUtilities.addCalendar( contentResolver, CALENDAR_NAME, CALENDAR_DISPLAY_NAME ) };

        // When I list, I see it.
        // If it is a local account, it is also in Google calendar native app whith the events if I add any.
        // If it is my com.google acount, I see it listed here, but it is not on Google calendar native app.
        CalendarUtilities.listCalendars( contentResolver, CALENDARS_PROJECTION, " | " );
    }

    @Override
    public boolean onCreateOptionsMenu( Menu menu )
    {
        getMenuInflater().inflate( R.menu.activity_main, menu );
        return true;
    }
} 
```

和实用程序类：

```
package com.example.testnativecalendar;

import java.util.Calendar;
import java.util.TimeZone;

import android.content.ContentResolver;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.provider.BaseColumns;
import android.provider.CalendarContract;
import android.util.Log;

public class CalendarUtilities
{
    static public void listCalendars( ContentResolver contentResolver, String[] projection, String separator )
    {
        Cursor cursor = contentResolver.query(  CalendarContract.Calendars.CONTENT_URI, projection, null, null, null ); 

        try
        {
            while ( cursor.moveToNext( ) )
            {
                String[] datas = new String[ cursor.getColumnCount() ];
                for ( int i = 0; i < cursor.getColumnCount(); i++ )
                    datas[i] = cursor.getColumnName( i ) + ": " + cursor.getString( i );

                Log.d( "trace", StringUtilities.join( datas, separator ) );
            }
        }
        catch (Exception exception) 
        { 
            Log.e( "trace", exception.toString() );
        }

        cursor.close();
    }

    static public long addCalendar( ContentResolver contentResolver, String name, String displayName )
    {
        TimeZone timeZone = TimeZone.getDefault();

        ContentValues contentValues = new ContentValues();

        //So here when I use CalendarContract.ACCOUNT_TYPE_LOCAL, no problem, but local isn't what I whant.
        //When I use my gmail address, it doesn't throw anything, but it doesn't leave 

        contentValues.put( CalendarContract.Calendars.ACCOUNT_NAME, "mygmailaddress@gmail.com" );
        contentValues.put( CalendarContract.Calendars.ACCOUNT_TYPE, "com.google" ); //CalendarContract.ACCOUNT_TYPE_LOCAL );
        contentValues.put( CalendarContract.Calendars.OWNER_ACCOUNT, "mygmailaddress@gmail.com" );

        contentValues.put( CalendarContract.Calendars.NAME, name );
        contentValues.put( CalendarContract.Calendars.CALENDAR_DISPLAY_NAME, displayName );
        contentValues.put( CalendarContract.Calendars.CALENDAR_COLOR, 0xFF000000 + Math.floor( Math.random() * 0xFF0000 ) );
        contentValues.put( CalendarContract.Calendars.CALENDAR_ACCESS_LEVEL, CalendarContract.Calendars.CAL_ACCESS_OWNER );

        contentValues.put( CalendarContract.Calendars.VISIBLE, 1);
        contentValues.put( CalendarContract.Calendars.SYNC_EVENTS, 1);
        contentValues.put( CalendarContract.Calendars.CALENDAR_TIME_ZONE, timeZone.getID() );        

        Uri calendarUri = CalendarContract.Calendars.CONTENT_URI;
        calendarUri = calendarUri.buildUpon()
            .appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER, "true" )
            .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_NAME, "mygmailaddress@gmail.com" )
            .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_TYPE, "com.google" ) //CalendarContract.ACCOUNT_TYPE_LOCAL )
            .build();

        try
        {
            Uri result = contentResolver.insert(calendarUri, contentValues);
            return Long.parseLong( result.getLastPathSegment() );
        }
        catch( Exception exception )
        {
            Log.e( "trace", exception.toString() );
        }

        return -1;
    }

    static public int removeLocalCalendar( ContentResolver contentResolver, long id )
    {
        int result = contentResolver.delete( CalendarContract.Calendars.CONTENT_URI, BaseColumns._ID + "=?", new String[] { Long.toString( id ) } );

        Log.d( "trace", "Calendar deleted: " + result );

        return result;
    }
} 
```

我认为问题可能是我需要以某种方式将这些数据同步到服务器。网上有一些关于如何添加事件和列出日历的教程，但很少有关于插入一个...

因此，如果有人可以帮助我解决这个问题，我会很高兴。谢谢。问候。马头鱼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:03:33.217

您创建的应用程序应该有一个同步适配器，然后上面的代码才能工作。我想这会帮助你理解： [如何正确设置同步适配器？](https://stackoverflow.com/questions/11646967/android-how-to-properly-setup-the-syncadapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:29:11.973

仅当您作为同步适配器运行时才能插入新日历。看

在 API 指南中[插入日历。](http://developer.android.com/guide/topics/providers/calendar-provider.html#insert-calendar)

# jmeter - 将响应数据保存到 JMeter 中的变量中

> ID：13236576
> 
> 赞同：8
> 
> 时间：2012-11-05T16:46:56.950
> 
> 标签：jmeter

如何将所有响应数据保存到 JMeter 中的变量中？我正在尝试使用 BSF PostProcessor 来获取响应，但我不知道获取响应的功能。

我想做类似的东西：

```
vars.put("myResponse", getResponse()); 
```

像这样的响应数据：

```
{"album_id":873,"total":3} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T18:37:21.323

以下是您可以在 Beanshell 中执行的操作：

```
response = prev.getResponseDataAsString();
vars.put("variableName", response); 
```

# google-earth - IE 上的 Google 地球插件 alt 10.00 错误

> ID：13236577
> 
> 赞同：3
> 
> 时间：2012-11-05T16:46:58.510
> 
> 标签：google-earth, google-earth-plugin

我在我的网站上插入了一个简单的地图，但只是在 Internet Explorer 上它不起作用。我在 IE8 和 IE9 上对其进行了测试，但它给了我一个白屏，上面写着“ALT 10.00”。

我在 Windows 上使用插件 Google Earth 的 7.0.1.8244 版本。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:57:14.870

我不确定您是如何获得该版本的插件的（除非您订阅了开发人员组？）

最新的官方版本是 6.2.0.5905 声称已经解决了你提到的问题。[详情请看这里](https://developers.google.com/earth/documentation/releasenotes)。

如果你更新到 6.2.0.5905 仍然发现问题，也许你应该加入关于[这个问题](http://code.google.com/p/earth-api-samples/issues/detail?id=701)的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:15:06.483

我找到了解决方案，这是 b/ci 正在调整 google 地球所在的 div 的大小，我使用固定的高度和宽度效果很好。

# gwt - 将 GWT Asyncronous 调用（DispatchAsync）转为 Syncronous

> ID：13236581
> 
> 赞同：0
> 
> 时间：2012-11-05T16:47:10.650
> 
> 标签：gwt, asynchronous, login, synchronous, gwtp

如果类具有用户信息，则函数`canReveal()`返回 true 。`ClientState`如果没有，它首先尝试使用异步调用来获取该用户信息`GetUser`。我需要在里面做的`IF`是等待这个异步调用返回（`onSuccess`），这样我就可以检查`ClientState`现在是否有用户信息。我怎样才能做到这一点？谢谢

```
public class MyGatekeeper implements Gatekeeper{

private DispatchAsync dispatcher;

@Inject
public MyGatekeeper(DispatchAsync dispatcher) {
        this.dispatcher = dispatcher;
}

@Override
public boolean canReveal() {
    if(ClientState.isUserLoggedin()==false) {
        dispatcher.execute(new GetUser(Window.Location.getHref()),
        new DispatchCallback<GetUserResult>() {
                @Override
                        public void onSuccess(GetUserResult result) {
                if (!result.getErrorText().isEmpty()) {
                     Window.alert(result.getErrorText());
                     return;
                }
                ClientState.setUserInfo(result.getUserInfo());
            }
        });
        return ClientState.isUserLoggedin(); // WAIT till onSuccess returns!
    }
}
    return ClientState.isUserLoggedin();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:52:31.357

这样做的方法是`canReveal`采取`Callback<Boolean>`：

```
public void canReveal(Callback<Boolean> cb) {
  if (!ClientState.isUserLoggedIn()) {
    dispatcher.execute(..., new DispatchCallback<Result>() {
      @Override
      public void onSuccess(Result result) {
        cb.onSuccess(result.isGoodOrWhatever());
      }
    });
  } else {
    cb.onSuccess(true); // User is logged in
  }
} 
```

不幸的是，没有办法告诉 GWT “等待”异步回调，因为这基本上会冻结 JS 执行，因为 JS 是单线程的。

# c# - 在 mvc 中持久化数据

> ID：13236587
> 
> 赞同：0
> 
> 时间：2012-11-05T16:48:01.357
> 
> 标签：c#, asp.net-mvc

我开始使用 ASP.NET MVC，并且我有一个使用 javascript 和 css 构建的导航。导航是可折叠的，因此菜单在折叠时只需要 1 厘米。我的问题是我需要通过单击按钮并在菜单上设置 css 类来更改状态（折叠/展开）。但是，当我单击菜单条目时，页面会重新加载，因此 css 类也会丢失。

我怎样才能正确地保存这些数据？在普通视图中，我可以将它传递给我的视图模型，但是如何在我的 _layout.cshtml 中执行此操作？（我不能在那里设置模型，对吧？）

我尝试的是使用 jquery 插件“cookies”，但它有时只能工作（我认为问题出在插件选项的某个地方 - 也许我必须设置一个域或其他东西......）。此外，如果解决方案不需要用户允许 cookie，那就太好了。

我很高兴有任何帮助！

编辑：好的，我现在尝试的是：

//风景

```
@model NHibernateSimpleDemoMVC.Models.MenuModel
....
<a id="togglemenu" />

@Html.HiddenFor(x => x.IsCollapsed, new { @id = "collapsedHdn" })

...

<script>
jQuery('#togglemenu').click(
    function () {
        if (jQuery("#collapsedHdn").val() == "true") {
            jQuery("#collapsedHdn").val("false")
        } else {
            jQuery("#collapsedHdn").val("true")
        }
    });

jQuery('#nav > li').click(
    function () {
        var name = jQuery(this).attr("id");
        jQuery("#selectedHdn").val(name);
    }
    );

jQuery(document).ready(function () {
    //set selected node
    if (jQuery("#collapsedHdn").val() == "true") {
       ... collapse ...
    }
     if (jQuery("#selectedHdn").val() != "") { //this is always empty ("")
        var name = "#" + jQuery("#selectedHdn").val();
        jQuery(name).addClass("current");
    }
});

</script> 
```

//该模型

```
public class MenuModel
{
    public bool IsCollapsed { get; set; }
    public string SelectedEntry { get; set; }

    public MenuModel(){
        IsCollapsed = false;
        SelectedEntry = "";
    }
} 
```

...我的隐藏字段在回发后似乎没有保持其价值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:05:00.883

There's a useful related question: [ASP.NET MVC Razor pass model to layout](https://stackoverflow.com/questions/4154407/asp-net-mvc-razor-pass-model-to-layout "ASP.NET MVC Razor pass model to layout")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:59:38.457

页面上的值与指向该页面的导航菜单项之间通常存在相关性。例如标题或类似的东西。

如果有，那么您可以在 DOM 完全加载后通过读取此值并找到相应的菜单项来使用 jQuery/Javascript 设置 css 类。

这绝对不是您会使用 cookie 的目的。

# c# - 运行 JavaScript setInterval 的网站在 ~1 天后开始失败

> ID：13236592
> 
> 赞同：5
> 
> 时间：2012-11-05T16:48:38.033
> 
> 标签：c#, javascript, asp.net, wcf

我希望我可以在这里更具体，但不幸的是，这可能很难。我基本上希望这是一些“众所周知的”超时或设置问题。

我们有一个网站在工厂的屏幕上运行（JS/html - ASP.net 项目）网站概述。这个屏幕没有键盘，所以它应该永远刷新页面——也许几年（尽管 1 周可能没问题）。（工厂工人使用它来查看进货运输等）

这一切都完美无缺；该站点不断自我更新并获取新的正确数据。然后，有时，早上这个“概览”屏幕没有数据，工作人员必须使用简单的刷新按钮或 F5 手动刷新站点 - 这会修复所有问题。

我尝试了一些尝试自己重现错误的方法，包括：

1.  切断互联网连接和许多其他使其超时的方法（断点、停止服务等）。
2.  将 setInterval 的刷新时间设置为 100ms，让站点运行 3-5 分钟。（正常计时器为 1 分钟）
3.  根据我所做的互联网搜索，setInterval 应该永远运行。
4.  检查“JavaScript 频率”是否在省电设置中被关闭。

无论; 一旦我再次插入互联网电缆或其他任何东西，该网站就会恢复正确的功能而无需刷新 - 我无法重现该错误。

该网站依赖于后端 WCF 服务和项目集成，但由于工作人员正在通过简单的刷新来解决此问题，我假设这没有崩溃。

编辑：我试图在其中重现错误的浏览器是 IE/win7。我明天会问工厂，但我猜是IE/win？还。

setInterval 实际上真的是无限的还是这里有其他问题？

非常感谢所有帮助。

更新：今天早上我离开网站以调试模式运行后，在网站更新代码的 catch 子句中有一个断点。有 2 分钟。超时错误（可能在夜间忙于服务器清理），然后永远在此行出现空引用错误：

```
var showHistory = (bool)Session.Contents["ShowHistory"]; 
```

我像工人一样刷新了它。我现在认为这可能是会话超时，尽管我们一直在 ping 服务器。当然，我的特定会话超时可能是由断点引起的，使其在第一次超时时永远挂起 - 行为仍然与工厂。我将确保稍后向你们更新最终解决方案。

更新 2：测试正在进行中。

更新 3：工厂是 IE 9，他们的测试机器是 IE 7，我的机器是 IE 9。这个错误是在 IE7 上看到的，但不是我的 IE9 周末运行后。我们尝试在关键的 data_binding 代码期间关闭 ajax 缓存，但它什么也没做。我测试了内存泄漏，如果我每分钟刷新 100 次，就能够产生不错的泄漏。我不认为这是问题所在，并且刷新清理了使用的内存。

我们现在将尝试自动刷新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:53:48.533

`setInterval()`应该永远持续下去。但是，您的脚本/页面可能会泄漏某种资源，最终导致页面脚本或浏览器内部出现错误。

如果是这种情况，您可能最终可以追踪到哪种资源正在泄漏并修复真正的问题，但即使这样做，一些浏览器也有自己的问题，即运行时间很长的进程。

可能值得观察资源使用情况，以查看浏览器内存使用情况是否会随着页面运行时间的增加而增加。但是，由于 F5 修复了它，我建议作为安全措施，您只需每隔几个小时就重新加载一次页面。在大多数现代浏览器中，页面重新加载会释放与先前页面运行相关的所有资源，并从这个角度为您提供一个干净的状态。

只需这样做（每六个小时触发一次）：

```
setTimeout(function() {
    window.location.reload(true);
}, 6 * 1000 * 60 * 60); 
```

不仅会给您一个全新的开始，而且还会自动让您的应用程序每隔一段时间检索您可能对应用程序所做的任何服务器端更改，因此如果您发布错误修复，它将在几个小时。

您还可以在页面中使用元刷新标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:44:27.653

我猜你被应用程序池的回收所咬。这将重置服务器端应用程序并终止所有会话（至少如果您使用进程内会话，这是默认设置）。此回收可能安排在 03:00 发生，这就是为什么您在常规调试会话中看不到它，但只有当您让它在一夜之间运行时才会看到它。

您可以检查该 Web 服务中是否存在 Session。如果 Session 为 null，则返回一个特殊值，该值会触发页面（您接收的 javascript 代码）来完全重新加载页面，这将创建一个新的 Session。这样您就不必等待计划的页面超时来重新填充页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T09:10:48.420

此处未提及的一种解决方案是将 cookie 设置为具有滑动过期。我们最终做了一些不同的事情，但一个问题是用户身份验证/cookie 超时，然后用户被移动到登录屏幕。

# uitableview - tableViewController TableView 空白

> ID：13236598
> 
> 赞同：0
> 
> 时间：2012-11-05T16:49:10.763
> 
> 标签：uitableview

我在 ViewController（处理多个视图和视图控制器）中以编程方式（不使用 xib 或情节提要）创建 TableViewController，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    tableViewController = [[UITableViewController alloc]initWithStyle:UITableViewStylePlain];
    [self.view addSubview:tableViewController.tableView];
} 
```

运行时，程序停止并出现以下错误：

> -[UITableView dequeueReusableCellWithIdentifier:forIndexPath:] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:4460 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使具有标识符 Cell 的单元格出列 - 必须注册标识符的笔尖或类或连接故事板中的原型单元'

调试显示tableView在添加到self.view时是空白的。

我是否需要为通常在 nib 文件中找到的 tableView 做一些额外的手动初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:23:17.953

谢谢大家编辑和回答我的问题。仔细阅读后，错误消息将其拼写出来：“必须为标识符注册一个 nib 或一个类，或者在情节提要中连接一个原型单元”。这个细节在指南、示例和教程中很少提及。

堆栈溢出！如果它不存在，它就不在任何地方！

# python - 使用什么部署框架？

> ID：13236601
> 
> 赞同：3
> 
> 时间：2012-11-05T16:49:11.530
> 
> 标签：python, linux, windows, deployment

我们正在尝试找出与 python 应用程序一起使用的部署方法/框架，它有一个基本的 wsgi 服务器来提供一些 REST 资源，以及一组具有通过 Apache 提供的接口的静态网页。

**情况如下：**

我的团队在程序的独立部分工作，有时在特定模块中一起工作，我们有不同的测试服务器和一个主服务器，我们都在本地工作，使用 git 同步代码，然后运行从 windows 复制文件的 bash 脚本机器连接到指定的 Linux 服务器（使用 SSH），然后重新启动应用程序。经过考虑，这似乎不是正确的做法，脚本每次都会用本地文件覆盖服务器中的所有文件。

我们希望能够在同一台服务器上工作而不必担心覆盖其他人的代码，我们需要部署到不同的服务器上以避免在其他人使用它时重新启动服务，并且在不久的将来我们需要部署到主服务器或当应用程序达到更成熟的状态时，主服务器的几个克隆。

我们找到了几种选择：capistrano、kwate、厨师或堡垒，甚至是舰队，但我们希望得到使用它们的人的意见，以确保这是我们需要的。

**所以这是主要问题：**

1.  这些是我们应该考虑实现安全并发​​部署过程的程序吗？

2.  您使用/推荐了哪一个，为什么？你认为这对我们的实际情况有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:05:04.433

我们使用的是面料，没有任何问题。易于编写/支持/理解。良好的文档和大量来自“谷歌搜索”的文章。

[http://docs.fabfile.org/](http://docs.fabfile.org/)

PS我们也在使用git。

# foursquare - 为开发人员创建 Foursquare 业务页面

> ID：13236609
> 
> 赞同：0
> 
> 时间：2012-11-05T16:49:37.347
> 
> 标签：foursquare

我的应用程序将与foursquare 集成。为此，我需要使用foursquare 业务页面（https://foursquare.com/business/merchants）。

为了使用，我需要验证我是经理或与该组织相关的人员才能申请场地。但我是学生和开发人员。那么，我如何使用该foursquare 业务页面来进行学习。

我想要那个四方的商业页面，因为我想在有人刚刚进入那个场所时提供我的自定义指令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:28:44.350

Foursquare 没有沙盒环境，也没有测试场地。您需要做的是创建代码并向其发送测试推送通知。此页面详细介绍了推送通知的外观：[https ://developer.foursquare.com/overview/realtime](https://developer.foursquare.com/overview/realtime)

# javascript - IE 7 + 8 的第 n 个子偶数和奇数

> ID：13236610
> 
> 赞同：1
> 
> 时间：2012-11-05T16:49:42.923
> 
> 标签：javascript, html, css

如果不使用 jQuery，如何在 Javascript 或 CSS 中找到替代函数来模拟 css：

```
table#report tr:nth-child(odd) { background-color:#eeeeee; }

table#report tr:nth-child(even){ background-color:#ffffff; } 
```

我不知所措，不得不为上述问题找到解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:52:37.363

就我而言，我这样做了，它工作得很好

```
var aTr = document.getElementsByTagName("tr");
for(var i=0, ii=aTr.length; i<ii; i++){
    if(i%2!=0){
        aTr[i].style.backgroundColor = "#eeeeee";
    }else{aTr[i].style.backgroundColor = "#ffffff";}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:54:59.623

假设基本的 JavaScript 没问题，对于功能性方法，我建议：

```
function oddEven(table) {
    if (!table) {
        return false;
    }
    else {
        table = table.nodeType == 1 ? table : document.getElementById(table);
        var rows = table.getElementsByTagName('tr');
        for (var i=0, len=rows.length; i<len; i++) {
            rows[i].className = i%2 == 0 ? 'even' : 'odd';
        }
    }
}

oddEven('tableID');
oddEven(document.getElementById('tableID')); 
```

[JS 小提琴演示：`oddEven('tableID');`](http://jsfiddle.net/davidThomas/Tb87q/) .

[JS 小提琴演示：`oddEven(document.getElementByID('tableID'));`](http://jsfiddle.net/davidThomas/Tb87q/1/) .

将上述函数修改为仅适用于 中的行`tbody`：

```
function oddEven(table) {
    if (!table) {
        return false;
    }
    else {
        table = table.nodeType == 1 ? table : document.getElementById(table);
        var rows = table.getElementsByTagName('tbody').length ? table.getElementsByTagName('tbody')[0].getElementsByTagName('tr') : table.getElementsByTagName('tr');
        for (var i=0, len=rows.length; i<len; i++) {
            rows[i].className = i%2 == 0 ? 'even' : 'odd';
        }
    }
} 
```

[JS 小提琴演示：`oddEven('tableID');`](http://jsfiddle.net/davidThomas/Tb87q/3/) .

[JS 小提琴演示：`oddEven(document.getElementByID('tableID'));`](http://jsfiddle.net/davidThomas/Tb87q/2/) .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:02:30.837

这是使用 javascript 和 css 类的解决方案：

JS：

```
var children = document.getElementById('report').getElementsByTagName('tr');

for (var i=0, len=children.length; i<len; i++) {
  var child = children[i];
  if (i%2 === 0) {
    child.className += " even";
  } else {
    child.className += " odd";
  }
}​ 
```

CSS：

```
table#report tr.even {
    background: #F00; /*or the color of your choice*/
}

table#report tr.odd {
    background: #00F; /*or the color of your choice*/
} 
```

​还有一个 jsfiddle 演示：http: [//jsfiddle.net/rNTH8/2/](http://jsfiddle.net/rNTH8/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:52:50.170

解决方法是在输出中使用交替的类名。如果您不想更改标记服务器端，可以使用 jQuery 在运行时应用这些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-26T03:27:50.973

使用 JQuery 可以毫无问题地完成

就像这样：

```
$('#report tr:nth-child(2n+1)').addClass('odd'); 
```

# c# - 如何发出对 [mscorlib]System.Console::Write(char) 的调用？

> ID：13236616
> 
> 赞同：2
> 
> 时间：2012-11-05T16:50:12.903
> 
> 标签：c#, reflection, reflection.emit

我目前正在发出`[mscorlib]System.Console::Write(char)`如下呼叫：

```
ilg.EmitCall(OpCodes.Call,
             typeof(Console).GetMethods().First(m =>
                 m.Name == "Write" && m.GetParameters().Length == 1 &&
                 m.GetParameters().Any(p => p.ParameterType == typeof(char))),
             null); 
```

但是有没有一种**更简洁的方法**来引用该`Console.Write(char)`方法，可能无需实际迭代形式参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T16:55:59.670

尝试使用[`GetMethod`](http://msdn.microsoft.com/en-us/library/6hy0h0z1.aspx)，而不是`GetMethods`：

```
ilg.EmitCall(OpCodes.Call, 
  typeof(Console).GetMethod("Write", new[] { typeof(char) }),
  null); 
```

# azure - Azure web api VS 移动服务

> ID：13236617
> 
> 赞同：9
> 
> 时间：2012-11-05T16:50:14.053
> 
> 标签：azure, asp.net-mvc-4

使用时的主要区别是什么

*   Azure Web API（技术上使用 Azure 网站模块）- [https://www.windowsazure.com/en-us/develop/net/tutorials/rest-service-using-web-api/#bkmk_createmvc4app](https://www.windowsazure.com/en-us/develop/net/tutorials/rest-service-using-web-api/#bkmk_createmvc4app) VS
*   Azure 移动服务 - [https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-ios/](https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-ios/)

我想构建一个可供移动和 Web 客户端使用的 Web 服务。我应该使用哪个？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T04:13:38.460

我认为移动服务主要专注于快速移动服务开发，特别是面向数据的移动服务。如果您想快速创建一个移动应用程序，使用 CRUD 针对您在云上的数据，使用开箱即用的推送通知，移动服务可能是一个不错的选择。

但如果您需要复杂的服务器端逻辑，Azure 网站可能会更好。您可以使用 ASP.NET MVC WebAPI、Node.js 等创建具有自己逻辑的 API。

# c# - 导出到 excel 的 Specflow 测试

> ID：13236618
> 
> 赞同：0
> 
> 时间：2012-11-05T16:50:16.007
> 
> 标签：c#, bdd, export-to-excel, specflow

我目前正在使用 infragistics.excel 在 .net 4.5 中实现导出到 excel 功能。所以当用户点击网页上的导出按钮时，一个 excel 文件（包含一些格式化数据）会下载到他的机器上

有没有一种简单的方法可以使用 specflow 进行测试。之前做过类似事情的任何人都可以分享如何最好地在specflow中进行测试。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:34:57.310

*你在找什么？*

Specflow 是使用“示例规范”的绝佳工具。所以首先我们需要一个简单的例子来说明我们的规范，也许像

```
Feature: Export to Excel
As a user
I want to Export my applications state
So that I can load it into Excel

Scenario: Export empty state
Given a default state
When I export
Then my export is a blank sheet 
```

如果@Lunivore 现在在这里，那么她肯定会告诉您，BDD 就是与您的业务用户进行对话以准确定义他们想要的东西，而发现过程是 BDD 中大部分价值的来源。

您会注意到，我没有谈到文件、浏览器或任何特定于特定域的概念（[无论如何，请参阅谁的域](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)），这使我可以在我选择的任何级别进行测试，所以如果我正在使用MVC，我不需要担心视图，而是可以专注于确保我的控制器正确地与我的模型一起工作，而不是担心它的外观。

但是，您提出问题的方式让我认为您想使用 SpecFlow 在更高级别上工作，您想调用 Selenium 来控制您的浏览器单击按钮并返回文件。如果是这种情况，您将需要询问其他人如何做到这一点。

还，

人们通常忽略 BDD/Specification by example/Specflow 的一件事是，它与 TDD 并不相互排斥，事实上，您会发现通过将几个 TDD Red Green 重构周期包装在一个 BDD 周期中可以获得更好的结果，基本上你使用业务示例来塑造您的单元测试开发，就像您使用单元测试来塑造您的代码一样。

# c# - 对象引用未设置为对象 #1 的实例

> ID：13236619
> 
> 赞同：2
> 
> 时间：2012-11-05T16:50:18.317
> 
> 标签：c#, service

我正在尝试从 C# 客户端使用基于 C# 的服务。

当我中断服务方法调用并将鼠标悬停在前面的`username`和`password`属性上以验证它们是否正在设置时，然后单步执行该方法，它工作正常。当我中断服务方法调用，然后立即跳过方法调用而不验证用户名/密码时，我得到`object reference not set to an instance of an object`.

用户名和密码来自一个`app.config`文件，并且配置值没有改变。

这可能是同步处理问题，用户名和密码没有及时设置吗？我试过插入一个`sleep(5000)`电话，但没有帮助。我已经多次更新服务参考。

```
MyService.ServiceClient sc = new MyService.ServiceClient();

sc.ClientCredentials.UserName.UserName ="pinkpanther"; // comes from app.config file
sc.ClientCredentials.UserName.Password = "clouseau"; // comes from app.config file

//open service client/proxy
sc.Open();

Dictionary<int, string> result = new Dictionary<int, string>();

// Sleep(5000); this doesn't seem to help

result = sc.FindVillain("Paris", "Train", "Car3", 4);

success = result.ContainsValue("The villain has been detained.");

sc.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:22:45.993

您没有指定，但假设 WCF Web 服务要记住的一件事是，在您第一次调用 ws 方法之前，实际上不会尝试代理连接。它的行为相当奇怪，但根据我的经验，当您调用 .Open() 时，实际上并未建立客户端连接。在您的代码中，连接是在 .FindVillain() 调用中尝试的。您将需要进入 .FindVillain() 以查看实际为 null 的内容（或使用堆栈跟踪）。您还可以尝试调用不同的 ws 方法（如果可用）来查看是否在第一次调用时或特别是在 .FindVillain() 上引发了 null 异常。

祝你好运

# knockout.js - knockoutjs：如何从丢失的 ko.observable() 或 ko.computed() 中恢复或捕获

> ID：13236621
> 
> 赞同：3
> 
> 时间：2012-11-05T16:50:25.647
> 
> 标签：knockout.js

**背景**

Trevor 有一个简单的 knockoutjs 页面，其中包含三个声明的 ko.observable() 和一个声明的 ko.computed()

**问题**

Trevor 想*删除*第三个声明的项目。问题是，当 Trevor 删除它时，所有后续声明的项目的渲染也会失败。

**例子**

考虑以下代码片段：

```
<p>r1c1:    <input data-bind="value: r1c1, valueUpdate:'afterkeydown'" /></p>
<p>r1c2:    <input data-bind="value: r1c2, valueUpdate:'afterkeydown'" /></p>
<p>r1c3:    <input data-bind="value: r1c3, valueUpdate:'afterkeydown'" /></p>
<p>r1c4:    <input data-bind="value: r1c4, valueUpdate:'afterkeydown'" /></p>

<script type="text/javascript">
  var ViewModel = function(){
    var self    =   this;

    self.r1c1 = ko.observable('alpha');
    self.r1c2 = ko.observable('bravo');
    self.r1c4 = ko.observable('delta');

    // if Trevor comments out this line, it caues r1c4 to stop rendering
    // this is expected, but is there a workaround that does not require to
    // remove the data-binding to value r1c3 from the HTML body ?
    self.r1c3 = ko.computed(function(){return [self.r1c1(),self.r1c2()].join(':')});
  }

  ko.applyBindings(new ViewModel());
</script> 
```

**问题**

有没有办法让 Trevor 可以注释掉 r1c3 的 ko.computed() 声明，并且仍然在页面正文中保留与 r1c3 的数据绑定；没有它破坏随后与 r1c4 的数据绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:25:58.900

Trevor 可以使用的一个技巧是引用绑定中的变量，`$data.r1c3`而不仅仅是`r1c3`. 引用对象的未定义属性不会像引用未定义变量那样导致错误。

所以，Trevor 想让他的 HTML 看起来像：

```
<p>r1c3:    <input data-bind="value: $data.r1c3, valueUpdate:'afterkeydown'" /></p> 
```

# git - 如何使用 Git-cherry-pick 将 branch1 上的文件 X 中的补丁添加到 branch2 上的文件 X'？

> ID：13236634
> 
> 赞同：3
> 
> 时间：2012-11-05T16:51:09.673
> 
> 标签：git, cherry-pick

尊敬的 Git 用户，

这些帖子似乎回答了我的问题，但要么我对 Git 太陌生，无法正确掌握和执行它们，要么它们实际上并没有回答我的问题：

*   [部分使用 git 挑选提交](https://stackoverflow.com/questions/1526044/partly-cherry-picking-a-commit-with-git)
*   [如何 git-cherry-pick 仅更改某些文件？](https://stackoverflow.com/questions/5717026/how-to-git-cherry-pick-only-changes-to-certain-files)
*   [Git：从另一个分支只添加文件的某些部分的最佳方法？](https://stackoverflow.com/questions/3872980/git-best-way-to-add-only-some-parts-of-a-file-from-another-branch)

如标题所示，我在 branch1 上有一个文件 X，在 branch2 上有一个文件 X'。文件 X' 是在几次提交前从文件 X 分支的（到文件的 X 和 X'），我还更改了文件名（即，从 X 到 X'）。该文件基本保持不变。我想要实现的是将对文件 X 所做的一些更改带到 X'。更改仅限于两个提交，commit_a 和 commit_b。理想情况下（和可选）我想调用我的合并工具来手动接受（或不接受）每个 commit_a 和 commit_b 中的特定代码行，并将它们应用于 X'。这可能吗？如果可以，怎么办？FWIW，我只在本地使用 Git；不与其他合作者/存储库交互。试图应用上述帖子的答案，我不能只关注感兴趣的文件（branch1 X & branch2 X') - Git 一直在涉及两个分支中的其他文件，包括文件 Y 和 Z（两个分支的）以及 branch2 中的 X，但从不涉及 branch2 中的 X'。我还想将分支 1 和 2 分开，所以我看不到合并命令在这里是如何工作的。

作为 Git（和版本控制）的新手，我还质疑我的工作流程是否对未能实现我的目标负责。

非常感谢患者的示例答案！

卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:07:56.720

我会挑选引入您想要的部分的提交，然后`git reset HEAD^`删除最近的提交并将更改保留在工作副本中，然后`git add -p`是您想要的部分并从中进行新的提交。

# javascript - 在“离线”时获取和存储位置数据，然后再次在线创建标记

> ID：13236635
> 
> 赞同：0
> 
> 时间：2012-11-05T16:51:17.800
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我正在构建一个将跟踪用户位置的网络应用程序。我想让它变得健壮，例如，当用户失去互联网连接时，应用程序将继续跟踪用户的位置（据我所知，GPS 与互联网连接无关）。一旦应用程序再次检测到互联网连接，它将创建标记。

```
if (navigator.onLine == false ) {

  navigator.geolocation.getCurrentPosition(function(position){

    var newLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

    offlineMarkersArray.push(newLocation);

  }, Map.showError, {maximumAge:0.5});
} 
```

上面的代码检查是否有互联网。如果没有，则将 LatLng 对象添加到数组中。

当重新发现 Internet 连接时，将运行此代码：

```
 Map.addOfflineMarkers = function(){
  for (var i = offlineMarkersArray.length; i > 0; i--) {
      var location = offlineMarkersArray[i];

      var localTitle = 'Offline marker '+i;

      var localMap = Map.getMap();

      marker = new google.maps.Marker({
         position: location,
         map: localMap,
         title: localTitle,
         icon: 'http://silas-tic.com/tick.png'
      });

      markersArray.push(marker);
      offlineMarkersArray.pop();
     }
  } 
```

据我所知，这将通过数组向后计数，创建一个标记对象，该对象使用特定图标附加到地图上，以便我可以看到它。据我所知，正在创建标记对象，但并未将它们添加到地图中。

任何有关如何解决此问题的想法将不胜感激！

该页面也可以在[http://silas-tic.com](http://silas-tic.com)上查看。如果您向下滚动一次，您可以开始跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:56:20.183

您想从 (offlineMarkersArray.length-1) 开始倒数到 0（包括 0）：

改变：

```
 for (var i = offlineMarkersArray.length; i > 0; i--) { 
```

到：

```
 for (var i = (offlineMarkersArray.length-1); i >= 0; i--) { 
```

# sql - SQL (Access) - 仅显示包含更多信息的行

> ID：13236643
> 
> 赞同：1
> 
> 时间：2012-11-05T16:52:06.253
> 
> 标签：sql, ms-access-2007

早上好。

我目前正在构建一个包含名称、文档类型和到期日期的报告。查询基于文档是否曾被请求 (=yes) 以及个人的角色/职位。遗憾的是，由于数据库的设计方式和用户的使用方式，一个人可能有两个角色（首席协调员/协调员），因此，数据库中有两个单独的条目 (ID)。然而，用户通常只为这些条目之一输入“到期日期”。

因此，现在当我有查询为每个角色收集姓名、文档和到期日期，然后通过联合将它们组合起来时，每个人可能有多个条目，例如：

```
Smith, John AAA 11-5-2012
Smith, John AAA
Doe, Jane AAA 
Doe, Jane AAA 11-11-2011 
```

有没有办法让我能够保留有更多信息的行？

*注意*我不想根据“日期<>空”来到期，因为有时我们可能已经请求了文件，但我们还没有收到它来输入到期日期，我们需要能够看到这些数据以备不时之需再次请求。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:56:48.623

Max 和 Group By 可能适合：

```
SELECT Docs.Person, Docs.Doc, Max(Docs.DateEntered) AS MaxOfDateEntered
FROM Docs
GROUP BY Docs.Person, Docs.Doc; 
```

其中 Docs 是您的表或查询的名称。

输入：

```
Person      Doc DateEntered
Smith,John  AAA 11-5-2012
Smith,John  AAA 
Doe,Jane    AAA 
Doe,Jane    AAA 
```

结果：

```
Person      Doc MaxOfDateEntered
Doe,Jane    AAA 
Smith,John  AAA 11-5-2012 
```

编辑重新评论

```
SELECT doc.Name, doc.Site, doc.Document, Max(doc.Expr1003) AS MaxOfExpr1003
FROM doc
GROUP BY doc.Name, doc.Site, doc.Document; 
```

编辑重新评论#2

```
SELECT 
    ResultsTbl.Name, 
    ResultsTbl.Site, 
    ResultsTbl.Document, 
    Max(ResultsTbl.Expiration_Date) AS Expiration_Date 
FROM (
    SELECT 
        lname & ', ' & fname AS Name, 
        site_name AS Site, 
        Document, cv_request_expires_on AS Expiration_Date 
    FROM Coord_CV_Expiration 
    UNION SELECT 
        lname & ', ' & fname AS Name, 
        site_name AS Site, 
        Document, 
        cv_request_expires_on AS Expiration_Date 
    FROM LeadCoord_CV_Expiration ...) AS ResultsTbl 
GROUP BY ResultsTbl.Site, ResultsTbl.Document, ResultsTbl.Name
ORDER BY ResultsTbl.Expiration_Date; 
```

请注意，您不应按到期日期分组。

# android - 复选框并列出 android flash builder

> ID：13236644
> 
> 赞同：1
> 
> 时间：2012-11-05T16:52:07.690
> 
> 标签：android, listview, checkbox, flash-builder, itemrenderer

我有一个从主视图获取数据的视图

> navigator.pushView(views.TripDetails, tripList.selectedItem, null, fadeTrans);

我在 TripDetails 视图中有设置列表，以使用以下代码显示复选框。这会以我想要的方式显示所有复选框。但是，现在我想保存在数据库中选中的复选框的值，并保持选中复选框，直到单击提交。但是，使用持久性管理器，复选框始终为真。我不确定方法是什么。甚至我所拥有的这一切都是错误或正确的。

谢谢你们

```
 <s:List id="AnswerList" width="100%" height="100%" dataProvider="{data.PromptText}">
  <s:itemRenderer>
    <fx:Component>
        <s:ItemRenderer  visible="true">
            <fx:Script>
                <![CDATA[
                import spark.managers.PersistenceManager;
                protected function addHandler(event:Event):void
                {
                    var loadManger:PersistenceManager= new PersistenceManager();

                    if (loadManger.load())
                    {
                        namefield.selected=false;
                        var savedData:Object = loadManger.getProperty("namefield");
                                        if(savedData)
                                        {
                                         namefield.selected=savedData;
                                        }
                    }
                }
                override public function set data(value:Object):void { 
                    super.data =value; 

                    if (value== null) 
                        return; 

                     namefield.label =value.toString() ;

                        namefield.visible = true;

                } 

                    protected function namefield_clickHandler(event:MouseEvent):void
                    {
                        // TODO Auto-generated method stub
                        var saveManager:PersistenceManager = new PersistenceManager();
                                    saveManager.setProperty("namefield",namefield.selected);
                    }

                ]]>
            </fx:Script>
            <s:CheckBox id="namefield" width="100%" color="0xFFCC00" visible="false" add="addHandler(event)" click="namefield_clickHandler(event)"/>
            <s:layout>
                <s:VerticalLayout/>
            </s:layout>
        </s:ItemRenderer>
    </fx:Component>
</s:itemRenderer>
    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    </s:List> 
```

# delphi - 字节存档，字节到字符串，无延迟 Delphi

> ID：13236645
> 
> 赞同：0
> 
> 时间：2012-11-05T16:52:14.040
> 
> 标签：delphi

> **可能重复：**
> [将 ShortInt 数组转换为字符串，Delphi](https://stackoverflow.com/questions/13233776/convert-array-of-shortint-to-string-delphi)

我想把一个文件变成一个字符串，这个字符串应该包含文件对应的字节数。

我以某种方式做到了，但它非常慢，使用 FOR 和 ShortInt 的数组......

例子：

在我的计算机上有任何文件，我的目标是将其转换为字节，这些应该在 -127 .. 128 之间的字节，它会有这样的东西：

```
A[0] = 120
A[1] = -35
A[2] = 40 
```

在这里吃好，但我需要它在一个连接的字符串和它们之间的'，'中，因此：

```
'120,-35,40' 
```

我是用“FOR”来做的，但如果你有其他选择的话，它会很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:40:27.407

[这个问题与您之前的问题](https://stackoverflow.com/questions/13233776/convert-array-of-shortint-to-string-delphi)非常相似，但增加了从文件中读取数组的复杂性。

我可能会这样写：

```
function ConvertFileToCommaDelimitedArray(const FileName: string): string;
var
  i, BytesLeft, BytesRead: Integer;
  Buffer: array [0..4096-1] of Shortint;
  Stream: TFileStream;
  sb: TStringBuilder;
begin
  sb := TStringBuilder.Create;
  try
    Stream := TFileStream.Create(FileName, fmOpenRead or fmShareDenyWrite);
    try
      BytesLeft := Stream.Size;
      while BytesLeft>0 do
      begin
        BytesRead := Min(SizeOf(Buffer), BytesLeft)
        Stream.ReadBuffer(Buffer, BytesRead);
        dec(BytesLeft, BytesRead);
        for i := 0 to BytesRead-1 do
        begin
          sb.Append(IntToStr(Buffer[i]));
          sb.Append(',');
        end;
      end;
    finally
      Stream.Free;
    end;
    if sb.Length>0 then
      sb.Length := sb.Length-1;//remove trailing comma
    Result := sb.ToString;
  finally
    sb.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:23:40.470

您可以将文件加载到单字节有符号整数类型（也称为`ShortInt`）的数组中，如下所示：

```
type
  TShortIntArray = array of TShortInt;

function LoadFileAsShortInt(const name: TFileName): TShortIntArray;
var
  f: TFileStream;
begin
  f := TFileStream.Create(name, fmOpenRead or fmShareDenyWrite);
  try
    SetLength(Result, f.Size);
    f.ReadBuffer(Result[0], f.Size);
  finally
    f.Free;
  end;
end; 
```

如果要将文件的内容作为字符串，则应跳过数组并将文件直接加载到字符串中：

```
function FileAsString(const name: TFileName): AnsiString;
var
  s: TStringStream;
begin
  s := TStringStream.Create;
  try
    s.LoadFromFile(name);
    Result := s.DataString;
  finally
    s.Free;
  end;
end; 
```

# c# - 如何停止我的类库生成 .EXE 文件并导致 TypeLoadException 异常？

> ID：13236646
> 
> 赞同：1
> 
> 时间：2012-11-05T16:52:28.517
> 
> 标签：c#, dll, exe, class-library, typeloadexception

我的解决方案中发生了一个非常奇怪的错误，我的一个项目是类库，导致引用它的项目抛出 TypeLoadException。我已经查看了关于 SO 的各种答案，最接近我的问题的是；

[TypeLoadException 在 C# 中未处理 [关闭]](https://stackoverflow.com/questions/9623694/typeloadexception-was-unhandled-in-c-sharp)

这个答案让我怀疑这是否是我的问题，在调试文件夹中进行了一些挖掘，我发现引用我的类库的项目正在生成同名的 DLL 和 EXE，这可能是我的问题吗？

如果是这样，我该如何解决这个问题？我的解决方案中有其他类库也在这个项目中被引用，它们不会同时生成 DLL 和 EXE 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:07:28.197

我不相信，但我实际上是通过一位同事找到了原因，希望这会帮助遇到这种情况的其他人（好一个亚当）。

原因是我的项目引用我的类库具有相同的程序集名称，我一直在对我的命名空间进行一些重新调整并且没有注意到我的主项目具有相同的名称，这意味着当我的代码被构建时编译器为我的主项目创建了一个 EXE，并为我的类库创建了一个 DLL，这反过来又强制了 TypeLoadException，因为编译器已经加载了同名的 EXE。

我的代码现在可以工作了。感谢所有花时间发帖的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:50:55.340

> 我的类库正在生成同名的 DLL 和 EXE

是的，这导致了这个问题。您可以通过运行 Fuslogvw.exe 并记录所有绑定来轻松查看它。这是 Fusion 的一个有点奇怪的怪癖，但是当它查找程序集时，它只查看文件名并**忽略**扩展名。它将接受 .dll 和 .exe 作为它正在寻找的程序集的可接受匹配。这在其他方面有点合乎逻辑，当 DLL 和 EXE 包含托管代码时，它们之间没有真正的区别。例如，完全支持引用 EXE。

没有办法强制加载程序以不同的方式执行此操作。解决方法应该很简单，只要确保生成不同的程序集名称即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:55:31.157

在 Project -> (YourProjectName) Properties -> Application 下，确保“Output Type”设置为“Class Library”。

# google-maps-api-3 - 谷歌地图标记 (v3) 的可拖动属性是否影响标记的 zIndex？

> ID：13236650
> 
> 赞同：4
> 
> 时间：2012-11-05T16:52:42.883
> 
> 标签：google-maps-api-3

我有一张地图，一个 zIndex = 6 的标记，当我点击它时，会出现一个信息框（zIndex：5 和窗格：“overlayImage”）。所以标记和工具提示在同一个窗格中，所以它取决于 zIndex 哪个在上面，哪个在下面。我遇到的问题是，如果标记具有（可拖动：true），则 zIndex 比较有效。（标记在顶部，因为 6>5），但是如果我删除可拖动属性，即使 zindex 高于信息框 zIndex，标记也会位于信息框下方。

有人能解释一下为什么会这样吗？代码：

```
function initialize() {

    var secheltLoc = new google.maps.LatLng(49.47216, -123.76307);

    var myMapOptions = {
         zoom: 15
        ,center: secheltLoc
        ,mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var theMap = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

    var marker = new google.maps.Marker({
        map: theMap,
        draggable: true,
        position: new google.maps.LatLng(49.47216, -123.76307),
        zIndex: 6
    });

    var boxText = document.createElement("div");
    boxText.style.cssText = "zindex: 3;border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;";
    boxText.innerHTML = "City Hall, Sechelt<br>British Columbia<br>Canada";

    var myOptions = {
         content: boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(-10, -20)
        ,zIndex: 5
        ,boxStyle: {
          background: "url('tipbox.gif') no-repeat"
          ,opacity: 0.75
          ,width: "280px"
         }
        ,closeBoxMargin: "10px 2px 2px 2px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "overlayImage"
        ,enableEventPropagation: false
    };

    var ib = new InfoBox(myOptions);
    google.maps.event.addListener(marker, "mouseover", function (e) {
        ib.open(theMap, this);        
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:07:20.647

如果将标记设置为可拖动，则不会对其进行优化（不在画布中渲染）。

如果将优化设置为 false，则效果相同（无需将标记设置为可拖动）。

# jquery - 仅允许字母数字值

> ID：13236651
> 
> 赞同：30
> 
> 时间：2012-11-05T16:52:47.510
> 
> 标签：jquery

> **可能重复：**
> [如何防止用户在输入字段中输入无效字符](https://stackoverflow.com/questions/7543059/how-to-prevent-users-from-entering-invalid-characters-inside-an-input-field)

我在一个页面上有 3 个文本框。其中一个应该允许数字，其他字母和第三个数字或字母。

由于这是唯一的要求，我不想使用验证插件或任何其他 3rd 方插件。如何通过使用纯 jQuery 创建自己的插件来做到这一点？

这就是我所做的，但我感觉代码会变得太长

```
 $(this).keydown(function(e)
        {
            var key = e.charCode || e.keyCode || 0;            
            return (
                key == 8 || 
                key == 9 ||
                key == 46 ||
                (key >= 37 && key <= 40) ||
                (key >= 48 && key <= 57) ||
                (key >= 96 && key <= 105));
        }); 
```

[http://jsfiddle.net/Cvus8/](http://jsfiddle.net/Cvus8/)

谁能告诉我解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-05T17:14:32.390

更好的解决方案可能是使用基于正则表达式的检查。下面的示例将仅限制 id 字段中的字母数字字符`text`：

```
$('#text').keypress(function (e) {
    var regex = new RegExp("^[a-zA-Z0-9]+$");
    var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
    if (regex.test(str)) {
        return true;
    }

    e.preventDefault();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-05T17:10:20.087

1-9 范围内的数字后跟零个或多个其他数字：

```
^[1-9]\d*$ 
```

确保字符串仅包含 (ASCII) 字母数字字符、下划线和空格

```
^[\w ]+$ 
```

只有字母没有空格或_

```
^[a-zA-Z]+$ 
```

要匹配仅包含这些字符（或空字符串）的字符串，请尝试

```
^[a-zA-Z0-9_]*$ 
```

一些可能会有所帮助的模式..但我认为您必须根据需要修改它们..我希望它有所帮助..

# facebook - 检索 facebook 用户实时数据

> ID：13236656
> 
> 赞同：-3
> 
> 时间：2012-11-05T16:52:52.993
> 
> 标签：facebook, facebook-graph-api

是否有任何方法可以跟踪 Facebook 应用程序用户在 facebook 上所做的任何事情，例如观看视频或访问某人的页面并将其显示在应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:39:20.733

**是的，但仅限于马克扎克伯格和工作人员。**

# java - 打印提示和扫描仪以外的用户输入

> ID：13236657
> 
> 赞同：0
> 
> 时间：2012-11-05T16:53:03.993
> 
> 标签：java, user-input

我写了一个程序，要求像这样的用户输入：

```
System.out.println("Where would you like the output file to end up? (full path and desired file name): ");
Scanner out_loc = new Scanner(System.in);
output_loc = out_loc.nextLine(); 
```

...

```
System.out.println("Hey, please write the full path of input file number " + i + "! ");
System.out.println("For example: /home/Stephanie/filein.txt");
Scanner fIn = new Scanner(System.in); 
```

我以这种方式多次要求输入，但如果您输入错误，可能会非常痛苦，因为您必须终止程序并重新运行。当你运行一个程序时，有没有一种简单的方法可以一次输入所有内容？就像在运行时在命令行中声明它一样？

```
java -jar /home/Stephanie/NetBeansProjects/cBelow/dist/cBelow.jar -userinputhere? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:54:54.070

您可以使用文件重定向。

```
program < file 
```

将文件发送到程序的标准输入。在你的情况下，

java -jar /home/Stephanie/NetBeansProjects/cBelow/dist/cBelow.jar -userinputhere <文件

或者您可以从程序中的文件中读取。您可以将其设为可选，例如

```
InputStream in = args.length < 1 ? System.in : new FileInputStream(args[0]);
Scanner scan = new Scanner(in); // create the scanner just once! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:56:46.587

当您将命令运行为：

> java -jar /home/Stephanie/NetBeansProjects/cBelow/dist/cBelow.jar -userinputhere？

它运行`public static void main(String[] args)`您的主要类的方法，您可以在其中`userinputhere`直接获得：

```
 public static void main(String[] args)
     String userinputhere = args[0];
     ..... rest of your code
   } 
```

如果有多个用户输入，您可以将它们全部获取为：

```
 public static void main(String[] args)
      String userinput1 = args[0];
      String userinput2 = args[1];
      String userinput3 = args[2];
      //and so on..
      ..... rest of your code
  } 
```

# pdf - 创建没有字典数据类型的 PDF 文件（尖括号）

> ID：13236662
> 
> 赞同：0
> 
> 时间：2012-11-05T16:53:25.960
> 
> 标签：pdf, dictionary, pdf-generation, brackets

我想创建一个源中不包含尖括号的 PDF 文件。

这显然意味着不使用`dictionary`数据类型，因为这涉及`<<`and `>>`。

是否可以完全避免尖括号并仍然创建具有格式化内容的 PDF 文件？

它可以隐藏在流中，使用字符编码技术或替代字典符号吗？

混淆技术需要解决方案；括号问题无法规避。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:01:10.710

我认为这是不可能的。PDF 文件中的每个元素都包含在某个字典中：文档目录（根字典）、页面对象、页面内容流，所有这些都是需要 char 序列的字典`<<` `>>`。

样本目录字典：

```
1 0 obj
<<
/Pages 2 0 R
/Type /Catalog
>>
endobj 
```

如果您想使用“仅指令序列”演示格式，您可以尝试使用 PostScript。

**评论后编辑：**

使用带有某些过滤器编码的流对象不会解决您的问题，因为您仍然需要在流字典中指定过滤器类型。

例子：

```
5 0 obj
<</Length 6 0 R /Filter /FlateDecode>>
stream
***illegible characters***
endobj 
```

# ssi - gwan 支持 SSI 吗？

> ID：13236663
> 
> 赞同：0
> 
> 时间：2012-11-05T16:53:32.767
> 
> 标签：ssi, g-wan

gwan 支持 SSI 还是有其他方法可以合并不同的 HTML 数据？

我不确定这是不是最好的方法，但我想将静态 HTML 数据包含到另一个 HTML 文件中……如果 SSI 不起作用，你会使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:22:45.167

SSI 可以通过 G-WAN 的动态缓冲区 API 存档：只需将 HTML 注释替换为部分 HTML 内容。

使用 xbuf_frfile() 加载您的 HTML 模板。使用 xbuf_repl() 将部分 HTML “包含”到您的主机页面。

请参阅 G-WAN 示例中的 contact.c。

# jquery - ajax 在 codeigniter 中不起作用

> ID：13236664
> 
> 赞同：2
> 
> 时间：2012-11-05T16:53:34.123
> 
> 标签：jquery, ajax, codeigniter

我正在尝试使用 ajax jquery 函数发送一个发布请求并将一些数据异步返回到一个窗口中。这是我到目前为止所拥有的。它似乎不起作用。

在视图中：

```
$.ajax({
          url: '/dashboard/presskits/media/get_video_link/',
          type: 'POST',
          dataType: 'json',
          data: { encoded_link : encoded_link },
          cache: false,
          success: function(output_string){
            // $('#edit_video_info').append(output_string);
            alert(output_string.url_data);
          } // End of success function of ajax form
          }); // End of ajax call
}); 
```

在控制器中：

```
 public function get_video_link()
{
    $temp_url = $this->input->post('encoded_link');
    $output_string = json_encode(array('url_data' => $temp_url));
            return $output_string;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:56:47.113

打印或回显不返回 JSON，您也应该包含成功。

```
print json_encode(array('Status' =>'Success', 'url_data' => $temp_url)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:06:17.037

首先，您是否启用了 URL 助手？我认为您的 URL 字段不正确。在配置中启用您的 URL 助手并像这样回显您的基本 URL

```
url: "<?php echo base_url(); ?>dashboard/presskits/media/get_video_link/" 
```

另外，我建议使用 chrome 或 firefox 开发人员工具来检查您的请求中的 HTTP 响应标头。在 Chrome 上，只需右键单击-> 网络，然后触发您的 ajax 请求。

其次，您应该在控制器中回显响应，而不是返回它。在低层次上，当一个函数返回一个值时，它将该值存储在寄存器（内存）中，这一切都发生在堆栈中。换句话说，它不是 I/O 操作。Echo 会将 json 文本直接输出到浏览器（这是 ajax 调用所期望的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:58:51.623

只需用`echo`or更改您的回报`print`。

# ruby-on-rails - 带有包含“-”的键的 Ruby 哈希映射

> ID：13236665
> 
> 赞同：0
> 
> 时间：2012-11-05T16:53:46.393
> 
> 标签：ruby-on-rails, hashmap

如何使用包含“-”的键添加哈希映射元素？

像这样：

```
<%= button_to_function 'Cancel','cancelRemove("cancelEmail")', :data-dismiss=>'modal', :class=>'btn' %> 
```

我收到一个错误：

> 未定义的局部变量或方法“解雇”`#<ActionView::Base:0x3482fed>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:12:24.843

虽然`:'data-dismiss'`有效，但`data`您也可以使用属性

`:data => { :dismiss => 'modal' }`

附加`data`的 -prefixed html 属性可以包含在同一个哈希中。因此，例如在另一个链接上，您可能会这样做：

`:data => { :remote => true, :method => 'delete' }`

这会将 html 属性添加到链接中`data-remote="true" data-method="delete"`。

虽然哈希语法对于单个属性来说不太紧凑，但当您拥有多个 html5 数据属性时，它会很好。而且可以说它更像是轨道式的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:57:57.980

只需将其重命名为：

```
<%= button_to_function 'Cancel','cancelRemove("cancelEmail")', :'data-dismiss'=>'modal', :class=>'btn' %> 
```

# php - 如何使用 PHP DOM 关闭 xml 元素？

> ID：13236667
> 
> 赞同：0
> 
> 时间：2012-11-05T16:53:58.670
> 
> 标签：php, xml, dom

我一直在使用 PHP DOM 来创建和保存一个 xml 文件（第三方 xml 文件）。到目前为止，我的结构是正确的，但是遇到了一个元素没有用结束标签结束的问题，即

```
<FX>
 <Stompbox ID="1">
  <Module ID="0" POS="0" BypassState="1"/>
 </Stompbox>
</FX> 
```

应该看起来像这样 - 模块结束标记

```
<FX>
 <Stompbox ID="1">
  <Module ID="0" POS="0" BypassState="1"></Module>
 </Stompbox>
</FX> 
```

这是代码

```
$xmlRoot = $domtree->appendChild($xmlRoot); 
    /* Add FX node */
$fx = $domtree->createElement("FX");
$fx = $xmlRoot->appendChild($fx);
    /* Add Stompbox node */
$fx->appendChild($stompbox = $domtree->createElement('Stompbox')); 

$attr_mod = new DOMAttr('ID', "1");
$stompbox->setAttributeNode($attr_mod);
$stompbox->appendChild($module = $domtree->createElement('Module'));

$attr_mod = new DOMAttr('ID', "0");
$module->setAttributeNode($attr_mod);
$attr_pos = new DOMAttr('POS', '0'); 
$module->setAttributeNode($attr_pos); 
$attr_bypass_state = new DOMAttr('BypassState', '1'); 
$module->setAttributeNode($attr_bypass_state); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:03:10.270

元素已关闭。在 XML 中有两种关闭元素的方法：

通过自动关闭：

```
 <someelement someattr="somevalue" /> 
```

或者有一个空的内在：

```
 <someelement someattr="somevalue"></someelement> 
```

它们在语义上是相同的，许多实现选择前者，因为它会产生更小、更可读的文件。

# java - Maven springsource 存储库

> ID：13236668
> 
> 赞同：0
> 
> 时间：2012-11-05T16:54:03.777
> 
> 标签：java, maven, maven-3

我对 maven 有一个问题，它一直在寻找 springsource 存储库，并且在存储库不可用时花费大量时间试图通过：

```
[WARNING] The repository url 'http://repository.springsource.com/maven/bundles/release' is invalid - Repository 'com.springsource.repository.bundles.release' will be blacklisted.
[WARNING] The repository url 'http://repository.springsource.com/maven/bundles/external' is invalid - Repository 'com.springsource.repository.bundles.external' will be blacklisted. 
```

我的问题是我不明白为什么这些回购被提取为：

*   我不使用任何弹簧组件
*   似乎没有从这些存储库中获取任何依赖项（使用 mvn 站点的依赖项列表进行检查）
*   我的任何文件中都没有声明 repos

我已经尝试将我们的档案库甚至我本地的 ~/.m2/settings.xml 中的存储库列入黑名单，即使存储库站点将它们显示为黑名单，错误也会不断弹出并消耗时间。

我的印象是，这个 repo 是由依赖插件获取的，因为这发生在以下日志消息之后的站点阶段：

```
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.6 
```

而且我在回购错误之前还有一些以下错误：

```
...
[ERROR] Artifact: xerces:xml-apis:jar:2.11.0 has no file.
[ERROR] Artifact: xerces:xmlParserAPIs:jar:2.6.2 has no file.
[ERROR] Artifact: xml-apis:xml-apis:jar:1.3.02 has no file.
[ERROR] Artifact: xom:xom:jar:1.0 has no file.
... 
```

任何关于如何找到负责（工件或插件）或摆脱这些错误的想法都受到热烈欢迎。

感谢您提供任何线索

PS：我使用 Maven 3.0.4 和 JDK 1.7.0_04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:46:44.887

尝试运行：

```
mvn help:effective-pom 
```

您至少会看到以下内容：

```
 <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Repository Switchboard</name>
      <url>http://repo1.maven.org/maven2</url>
    </repository>
  </repositories> 
```

然后您可能还会看到 springsource 存储库。

* * *

您还可以使用[`maven-enforcer-plugin`](http://maven.apache.org/enforcer/enforcer-rules/requireNoRepositories.html)Require No Repositories 规则。

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-enforcer-plugin</artifactId>
    <version>1.1.1</version>
    <executions>
      <execution>
        <id>enforce-no-repositories</id>
        <goals>
          <goal>enforce</goal>
        </goals>
        <configuration>
          <rules>
            <requireNoRepositories>
              <message>Best Practice is to never define repositories in pom.xml (use a repository manager instead)</message>
            </requireNoRepositories>
          </rules>
        </configuration>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

`<repository/>`它会为它找到的任何定义了标签的依赖项吐出消息。

# javascript - 如何通过 javascript 将文件上传到 Dropbox？

> ID：13236671
> 
> 赞同：1
> 
> 时间：2012-11-05T16:54:24.403
> 
> 标签：javascript, file-upload, dropbox

我试图让用户上传大文件，而无需长时间占用我的服务器。我认为使用 Dropbox 作为文件存储可能是一个很好的解决方案。我的计划是使用 javascript 让客户端直接连接到 dropbox，这样我的服务器就不会受到影响。

我一直在尝试找到一个当前的 javascript dropbox api，但没有取得太大的成功。我尝试使用[dropbox-js](http://code.google.com/p/dropbox-js/ "Dropbox-js")，但似乎它使用的是过时版本的 API，因为我在当前测试中收到以下错误： {"error": "You're using a old version of the Dropbox API with a新的 API 密钥。请使用最新版本。"}

有谁知道完成这项任务的相当简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:46:10.670

1.  将您的应用程序设置为文件夹应用程序。如果出现问题，至少你不会炸毁人们的 Dropbox。

2.  按照[这些](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md#browser-and-open-source-applications)说明混淆您的 API 密钥和机密。

3.  用于`writeFile`上传文件，然后`makeUrl`与`downloadHack: true`选项一起使用，然后将 URL 发送到您的服务器。

`downloadHack`在 0.7.0 版本发布之前，您需要使用 git 版本的 dropbox-js 。

# wcf - WPF 应用程序调用 WCF 服务方法，然后 wpf 应用程序挂起

> ID：13236675
> 
> 赞同：0
> 
> 时间：2012-11-05T16:54:33.897
> 
> 标签：wcf

我有一个调用 wcf 服务方法的 wpf 应用程序。该方法在调试模式下运行良好，但该方法不会返回到客户端调用。

```
Here is the code.
Client:
public class Provider
    {
        private static ActionServiceClient Client { get; set; }
        static Provider()
        {
            Client = new ActionServiceClient();
        }

        public UserResponse GetUsers(UserRequest request)
        {
            UserResponse resp = new UserResponse();
            resp = Client.GetUsers(request);
            return resp;
        }
    }
WCF Service :
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Reentrant, UseSynchronizationContext = false)]
    public class ActionService : IActionService
    {
        public MovieResponse GetReviews(MovieRequest request)
        {
            List<MovieReview> reviews = DataAccess.GetMovieReviews(0);
            MovieResponse response = new MovieResponse();
            response.movieReviews = reviews;
            return response;
        }

        public UserResponse GetUsers(UserRequest request)
        {
            List<User> users = DataAccess.GetUsers(0);
            UserResponse resp = new UserResponse();
            resp.users = users;
            return resp;
        }

[DataContract]
    public class UserResponse
    {
        [DataMember]
        public List<User> users;
    }

[DataContract]
    public class UserRequest
    {
        [DataMember]
        public int userId;
    } 
```

我在调试模式下运行程序，并在服务调用完成后 wpf 应用程序挂起......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T21:07:03.607

哎呀....传递图像是不允许的。

# ruby-on-rails-3.2 - PJAX / Back-Button 破坏数据表

> ID：13236676
> 
> 赞同：4
> 
> 时间：2012-11-05T16:54:35.740
> 
> 标签：ruby-on-rails-3.2, datatables, rack, pjax

在启用 rack-pjax 的 Rails 3.2 应用程序中出现以下问题：

1.  您单击一个链接，其中包含数据表的页面通过 pjax 加载。一切安好。
2.  您单击页面“无论”加载的antoher链接。
3.  您点击数据表页面加载的后退按钮。但是数据表不起作用。

有时它会加载 2 个表（其中没有数据），有时它只加载旧的数据表。但它不可能操纵数据（搜索，转到第 2 页等）。它完全是静态的。

表的数据通过应用程序的 rails 部分的 json（服务器端处理）提供。我们已经尝试在“pjax:start”或“pjax:end”上销毁和重建数据表

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:05:16.227

我找到了一个可行的解决方案，希望没有不可预见的问题。

```
$(document).ready ->
  initLeagueIndexDataTable()

$(document).on 'pjax:end', ->
  initLeagueIndexDataTable()

initLeagueIndexDataTable : ->
  if ($('#league_index').length > 0 && !$('#league_index_wrapper').length > 0)
    $('#league_index').dataTable({
      'sPaginationType': 'full_numbers',
      'bJQueryUI': true,
      'bProcessing': true,
      'bServerSide': true,
      'sAjaxSource': $('#league_index').data('source'),
      'aoColumnDefs': [
        { "bSortable": false, "aTargets": [ 1 ] },
        { "bSortable": false, "aTargets": [ 2 ] },
        { "bSortable": false, "aTargets": [ 3 ] },
        { "bSortable": false, "aTargets": [ 4 ] },
        { "bSortable": false, "aTargets": [ 5 ] }
      ],
      'bFilter': false,
      'iDisplayLength': 25,
      'bDestroy': true
    }) 
```

# javascript - 如何在外面的任何点击上隐藏 div

> ID：13236680
> 
> 赞同：0
> 
> 时间：2012-11-05T16:54:52.680
> 
> 标签：javascript, jquery

我开始使用 jquery 并试图创建一个简单的 div 隐藏和显示效果。效果似乎很好，但我需要当用户点击文档的任何其他部分（即除了隐藏/显示框）时，该框应该隐藏起来。这是 jsfiddle：http: [//jsfiddle.net/39DzJ/](http://jsfiddle.net/39DzJ/)。我没有正确设计它。我希望效果首先起作用。谁能帮我吗 ？这是 HTML 代码：

```
<style>
#mail_floater
{
    background:#fce8bd;
    height:88px;
    width:342px;
    border:1px solid #b7ad02;
    border-radius:5px;
    position:absolute;
    left:200px;
    top:50px;
    border-top:none;
    z-index:100;
    padding:0;
    }

#subscribe_user
{
    width:248px;
    height:16px;
    border:1px solid #b7ad02;

}

    #cust_care_floater
{
    background:#fce8bd;
    height:12px;
    width:108px;
    border:1px solid #b7ad02;
    border-radius:2px;
    border-bottom-left-radius:2px;
    position:absolute;
    left:450px;
    top:30px;
    border-top:none;
    z-index:100;
    clear:both;
    font-family:Tahoma, Geneva, sans-serif;
    font-size:10px;
    font-weight:bold;
    color:#036f05;
    box-shadow:1px 1px 3px #ccc inset; 
    }

    #closer
{
    float:right;
    margin-right:5px;
    margin-top:2px;
    width:19px;
    height:19px;
    background:url(../images/close.png) no-repeat;

}
</style>
</head>

<body>
<a href="#" id="subscribe">Subscribe</a>
<a href="#" id="customer_care">Customer care</a>
<div id="mail_floater">
    <h5>Email</h5>       
       <div id="closer"></div>
       <div id="email_input"><form><label>Enter E-mail : </label><span><input type="text" id="subscribe_user" /></span>
       <input type="submit" id="subscribe_me" value="Done" /></form></div>

    </div>
     <div id="cust_care_floater">
     <span style="padding:0px 10px 0 10px;">033-993-99920</span>      
</div>
</body>​ 
```

javascript代码：

```
$(document).ready (
                   function()
                   {
                       var disp_box=$('#mail_floater');
                       var sub_link=$('#subscribe');
                       var disp_box_2=$('#cust_care_floater');
                       var sub_link_2=$('#customer_care');

                      disp_box.hide();
                      disp_box_2.hide();

                       sub_link.click
                       (
                           function()
                           {

                                disp_box.show();

                           });

                       disp_box.find('#closer').click
                       (
                           function()
                           {                               
                               disp_box.hide();
                           });

                       sub_link_2.click
                       (
                           function()
                           {

                                disp_box_2.show();

                           });

                   });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:55:54.543

```
$(document).on('click', ':not(.hideDiv)', function(e){
    if($(e.target).is(':not(.hideDiv)')) { //extra check for good measure
         $('.hideDiv').hide();
    }
});​ 
```

演示：http: [//jsfiddle.net/maniator/S9fDy/](http://jsfiddle.net/maniator/S9fDy/)

# ios - 如何检查事件日历事件包中的重复项

> ID：13236682
> 
> 赞同：0
> 
> 时间：2012-11-05T16:54:55.380
> 
> 标签：ios, eventkit

我获取了所有事件的列表并尝试将其与我即将添加的当前事件相匹配，但它从不匹配并且只是添加重复项。

我用来获取的代码来自苹果的文档。任何人都可以帮忙吗？

[http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html#//apple_ref/doc/uid/TP40004775-SW1](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html#//apple_ref/doc/uid/TP40004775-SW1)

来自另一个教程的代码（我在网上搜索但找不到如何匹配事件。获取谓词结果标题字符串比较不起作用） [http://neilang.com/entries/using-eventkit-in-ios/](http://neilang.com/entries/using-eventkit-in-ios/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:54:21.507

我发现可以在保存后立即保存 eventstore 事件唯一标识符。有了这个标识符，就可以取回事件。

# ios - SQLite，从不同的视图将数据插入数据库

> ID：13236685
> 
> 赞同：-1
> 
> 时间：2012-11-05T16:55:00.527
> 
> 标签：ios, database, xcode, sqlite, insert

**我们在默认的 ViewController.m 中声明了以下代码：**

```
-(void)saveData{
sqlite3_stmt *statement;
const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat:
                           @"INSERT INTO CONTACTS (name, address, phone) VALUES (\"%@\", \"%@\", \"%@\")",
                           name.text, address.text, phone.text];
    const char *insert_stmt = [insertSQL UTF8String];
    sqlite3_prepare_v2(contactDB, insert_stmt,-1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        name.text = @"";
        address.text = @"";
        phone.text = @"";
    sqlite3_finalize(statement);
    sqlite3_close(contactDB);
    }
} 
```

}

-(void)findContact{

```
const char *dbpath = [databasePath UTF8String];
sqlite3_stmt *statement;

if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat:@"SELECT address, phone FROM contacts WHERE name=\"%@\"", name.text];
    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *addressField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];
            address.text = addressField;
            NSString *phoneField = [[NSString alloc]
                                    initWithUTF8String:(const char *)
                                    sqlite3_column_text(statement, 1)];
            phone.text = phoneField;

            status.text = @"Match found";
        } else {
            status.text = @"Match not found";
            address.text = @"";
            phone.text = @"";

        }
        sqlite3_finalize(statement);
    }
    sqlite3_close(contactDB);
} 
```

}

-(void)viewDidLoad{

```
[super viewDidLoad];
NSString *docsDir;
NSArray *dirPaths;
dirPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir=[dirPaths objectAtIndex:0];
databasePath=[[NSString alloc]initWithString:[docsDir stringByAppendingPathComponent:@"contacts.db"]];
NSFileManager *filemgr=[NSFileManager defaultManager];
if([filemgr fileExistsAtPath:databasePath]==NO)
{
    const char *dbpath=[databasePath UTF8String];
    if(sqlite3_open(dbpath, &contactDB)==SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt =
        "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, ADDRESS TEXT, PHONE TEXT)";

        if (sqlite3_exec(contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {
            status.text = @"Failed to create table";
        }
        sqlite3_close(contactDB);
    } else {
        status.text = @"Failed to open/create database";
    }
} 
```

}

**它有效，但我们想从不同的 viewControllerName.m 访问该数据库（contactDB）；我们尝试了以下方法：**

// Scene2ViewController.m

-（无效）增量巴拉{

如果（barra.progress == 1）{

```
 //In this method we want to insert the address data into the specified name. 

   sqlite3_stmt *statement;
   const char *dbpath = [databasePath UTF8String];

   if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
   {
       NSString *insertSQL = [NSString stringWithFormat:
                              @"INSERT INTO CONTACTS (name, address) VALUES (\"%@\", \"%d\")",
                              usuario, tiempo];
       const char *insert_stmt = [insertSQL UTF8String];
       sqlite3_prepare_v2(contactDB, insert_stmt,-1, &statement, NULL);
       if (sqlite3_step(statement) == SQLITE_DONE)
       {
           sqlite3_finalize(statement);
           sqlite3_close(contactDB);
       }
   }

   //

   [self performSelector:@selector(hideImage) withObject: nil afterDelay:1.0];

} 
```

}

**由于变量和数据库的错误，它没有工作，因为这些没有很好地声明**

***我们如何实现这些变量和数据库以从不同的 .m 中使用它们？感谢您的时间！***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:08:46.153

我认为对于这个问题有很多答案，所以我将解释我想要的答案，并尝试解释原因。开始！

由于您有类似的逻辑要在不同的位置使用（在这种情况下是多个文件），我会将此逻辑移动到一个新类（用于实现的 .h 和 .m 文件）。考虑到它是与数据库交互的逻辑，我会继续将其命名为“DatabaseManager”。这个类现在应该可以让你访问你需要的逻辑。

为确保您始终能够访问 DatabaseManager，将其设为 Singleton 可能是明智之举（请参阅[http://en.m.wikipedia.org/wiki/Singleton_pattern](http://en.m.wikipedia.org/wiki/Singleton_pattern)）。

# c# - 使用 Trackbar 在图像上移动字符串

> ID：13236686
> 
> 赞同：0
> 
> 时间：2012-11-05T16:55:05.200
> 
> 标签：c#, graphics, picturebox

我想在滚动 Trackbar 后移动一个字符串。问题是，前一个字符串保留在新字符串中。所以结果`Image`得到一个不可读的字符串。

```
Image img;
readonly Image _originalImg;
Graphics imgScale;

public Form(){
    InitializeComponent();
    _originalImg = Image.FromFile("d:\\a.jpg");
    img = _originalImg;
    imgScale = Graphics.FromImage(img);
}

private void trackBar1_Scroll(object sender, EventArgs e)
{
    img = null;
    pictureBox1.Image = null;
    imgScale = null;

    img = _originalImg;

    x = trackBar1.Value;
    imgScale = Graphics.FromImage(img);
    imgScale.DrawString(str, font, color, new PointF(x, 0));
    pictureBox1.Image = img;
} 
```

任何人都可以编辑我的代码，以便`_originalImg`保持新的，我可以在图像上看到一个清晰的字符串。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:02:16.147

这应该适合你：

```
readonly Image _originalImg;

public Form(){

    InitializeComponent();
    _originalImg = Image.FromFile("d:\\a.jpg");
}

private void trackBar1_Scroll(object sender, EventArgs e)
{
    pictureBox1.Invalidate();
}

private void pictureBox1_paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawImage(_originalImg, 0, 0);
    e.Graphics.DrawString(str, font, color, new PointF( trackBar1.Value, 0));
} 
```

我们在这里所做的大致是将您的图像绘制到图片框上，并将文本绘制到图片框上。这意味着原始图像永远不会被修改。

我们也只在发生变化时才更新图像（或者窗体被告知要重新绘制窗口等）。为了确保图像更新，我们`pictureBox1.Invalidate();`在跟踪栏值更改时调用。

## 编辑：

* * *

由于您不想将图像与文本一起保存在其他位置，我们可以大大简化：

```
public Form(){

    InitializeComponent();
    pictureBox1.Image = Image.FromFile("d:\\a.jpg");
    pictureBox1.SizeMode = PictureBoxSizeMode.Zoom;
}

private void trackBar1_Scroll(object sender, EventArgs e)
{
    pictureBox1.Invalidate();
}

private void pictureBox1_paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawString(str, font, color, new PointF( trackBar1.Value, 0));
} 
```

这会将放大的图像绘制到图片框上，然后在其顶部绘制文本。这意味着图像已缩放，但文本仍保持您指定的任何字体大小。

# c# - 有没有办法在自己的帐户下运行 C# 程序？

> ID：13236691
> 
> 赞同：0
> 
> 时间：2012-11-05T16:55:40.700
> 
> 标签：c#, active-directory

在工作中，我们有一个程序是数据输入程序。该程序在输入数据时移动文件，因此必须具有读/写权限才能发生这种情况。有没有办法让 C# 程序在具有这些权限的帐户下运行，同时使用户的帐户更具限制性？我正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:58:15.523

您可以使用该[`runas`](http://technet.microsoft.com/en-us/library/bb490994.aspx)实用程序 - 使用它设置快捷方式。

它：

> 允许用户以不同于用户当前登录所提供的权限运行特定工具和程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:04:55.713

1.  您可以添加[PrincipalPermission](http://msdn.microsoft.com/en-us/library/system.security.permissions.principalpermissionattribute.aspx)属性来控制单个方法的权限。
    `[PrincipalPermission(SecurityAction.Demand, Role ="Administrators")]
    static void CheckAdministrator()
    {
    Console.WriteLine("User is an administrator");
    }`

2.  或者使用[Application Manifest 来提升 UAC](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)
    `<requestedExecutionLevel level="requireAdministrator" uiAccess="false" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:42:40.920

@奥德，

使用 runas 实用程序时，您是否需要输入您尝试运行该程序的帐户的密码？

# scala - Scala：提取值以绕过 JVM 方法长度

> ID：13236692
> 
> 赞同：1
> 
> 时间：2012-11-05T16:55:41.790
> 
> 标签：scala, refactoring

我有一个长度超过 64k JVM 限制的方法。看起来没有简单的方法可以绕过这个问题，因此我可能不得不重构我的代码。我是 Scala 菜鸟，我需要一些建议：

```
def apply = {
...
val container = Map(...<Some Really Long Input>...)
val anotherContainer = Map(...<Some Really Long Input>...)
...
} 
```

如何提取上述变量的内容，知道它们的内容取决于*apply*方法中的一些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:00:34.113

您可以滥用闭包从方法中获取一些代码：

```
val container = (() => Map(...<Some Really Long Input>...))() 
```

我真的希望这是自动生成的代码。如果不是这样，有很多更好的方法可以重构代码并使其更具可读性和可维护性。其中之一是将创建地图的代码放入它自己的方法中，并将`apply`方法内的数据作为参数传递。

# bonjour - mdnsresponder 浏览时不显示 IP 地址

> ID：13236694
> 
> 赞同：0
> 
> 时间：2012-11-05T16:55:47.117
> 
> 标签：bonjour, zeroconf, mdns

我已经使用 bonjor mdnsresponder 注册了一项服务

```
 dns-sd -R SMARTCAM _CAMS._tcp. . 80  "u=test" "path=/pub" 
```

当我尝试按名称重新恋爱并键入如下

```
dns-sd -L SMARTCAM _CAMS._tcp. 
```

我得到了答复

查找 SMARTCAM._CAMS._tcp..local 22:16:31.777 SMARTCAM._CAMS._tcp.local。可以在 AIR.local.:80 (interface 3) 到达 u=test path=/pub

但是在这里我没有得到我注册服务的 PC 的 IP 地址（我已经在 IP 192.168.1.123 和主机名 AIR 上注册了服务）。

现在如何获取PC的IP地址..？因为我在那个 IP 上运行一些服务，所以我想在解析后访问它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:05:14.617

尝试使用 $dns-sd -R 和 dns-sd -Q

它会给你IP地址

# visual-studio-2010 - 带有 AnkhSVN 的 Visual Studio 2010 - 项目克隆

> ID：13236700
> 
> 赞同：4
> 
> 时间：2012-11-05T16:56:16.563
> 
> 标签：visual-studio-2010, svn, project, clone, ankhsvn

我在 VS2010 中有一个项目，该项目通过 AnkhSVN 存在于 SVN 中。

我想创建一个与现有项目具有相同代码的项目。我不想分支。必须是一个完全不同的项目，但我想从现有项目中的现有文件开始。我不希望在现有项目的任何地方列出当前项目的名称。

我该怎么做呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T21:51:59.990

**SVN 中没有作为分支**的特定操作，所有操作（标记、分支）本质上只是在 SVN 存储库中制作副本（但是在 SVN 服务器上，这些不是单独的副本，即您不是在服务器端加倍空间，而是成本几乎没有）。因此，您只需将其复制到另一个位置并开始在那里工作：

```
$ svn copy svn://host.example.com/repos/project/trunk \
           svn://host.example.com/repos/new_project/trunk \
      -m "Creating a new_project based on project" 
```

之后，您可能希望**切换**本地工作副本以指向存储库上的 new_project 位置：

```
$ svn svn switch svn://host.example.com/repos/new_project/trunk . 
```

# android - 添加片段并将另一个片段动画到新位置

> ID：13236702
> 
> 赞同：2
> 
> 时间：2012-11-05T16:56:23.413
> 
> 标签：android, android-layout, android-fragments, android-animation

我希望在这里找到以下问题的答案：

我想构建具有以下行为的 UI：

状态 1：Activity 加载后，你可以在屏幕的左侧看到一个 ListFragment。

```
+-------------------------------------------------------------------------------+
|Activity                                                                       |
|-------------------------------------------------------------------------------|
|                                                                  +-----------+|
|                                                                  |Fragment1  ||
|                                                                  |           ||
|                                                                  |           ||
|                                                                  |           ||
|                                                                  |           ||
|                                                                  |           ||
|                                                                  |           ||
|                                                                  +-----------+|
+-------------------------------------------------------------------------------+ 
```

状态 2：用户单击 ListFragment 中的项目后，该片段应向左移动，以便为另一个片段留出空间(2)

```
+-------------------------------------------------------------------------------+
|Activity                                                                       |
|-------------------------------------------------------------------------------|
|                                                    +------------++-----------+|
|                                                    |Fragment1   ||Fragment2  ||
|                                                    |            ||           ||
|                                                    |            ||           ||
|                                                    |            ||           ||
|                                                    |            ||           ||
|                                                    |            ||           ||
|                                                    |            ||           ||
|                                                    +------------++-----------+|
+-------------------------------------------------------------------------------+ 
```

我对片段使用 support-v4 库。我尝试了这种可能性：

1.  通过 Frame-Layouts：在代码中添加片段，单击列表时，删除片段，在另一个 Framelayout 上再次添加，然后添加第二个片段。- 这里的问题是：我如何动画片段一从框架布局一到框架布局二的移动。

2.  通过动画：我使用 NineOldAndroid 库并尝试通过不同的值移动布局。但是我总是遇到意想不到的行为：位置很好，但是列表上没有更多的触摸反应和类似的东西。

3.  通过更改 LayoutParams：我也不明白如何制作动画。

    对不起，我在这里没有给出任何代码，这是因为我总是改变一切来尝试另一种解决方案。

我希望有人能给我任何建议，我如何解决我的问题或任何提示，我可以在其中找到有关此问题的信息或想法。

非常感谢！

# php - 为什么不再推荐 mysql 扩展？

> ID：13236712
> 
> 赞同：3
> 
> 时间：2012-11-05T16:56:54.787
> 
> 标签：php, mysql, prepared-statement

> **可能重复：**
> [为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)

我正在考虑在我的下一个 PHP 项目中使用 Justin Vincent 的[ezSQL](http://justinvincent.com/ezsql)，我注意到它在后台使用`mysql_connect`。我知道不建议再使用`mysql_*`PHP 中的函数了。我已经看到相当多的网站通过如下代码受到 SQL 注入攻击：

```
<?php mysql_qyery("SELECT * FROM my_table WHERE id = " . $_GET['id']); ?> 
```

我知道 PDO 支持[prepared statements](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)，但您不必被迫准备您的语句，因此您仍然可以编写类似的不安全查询。

[我想知道如果我使用像exSQL](http://justinvincent.com/ezsql)这样在执行查询之前处理转义数据`mysql_*`的库，我应该注意的函数是否存在任何内在的安全漏洞？

**编辑：**我不是在问我是否应该使用 PDO/mysqli 而不是 mysql 扩展，或者在未来的 PHP 版本中是否会删除 mysql 扩展。这两个问题的答案都可以在 PHP 手册和其他地方找到。但是，对于不鼓励使用 mysql 扩展的*原因*，缺乏现成的文档。显而易见，PHP 手册对以下问题的回答是：[“为什么不鼓励使用我使用了 10 多年的 MySQL 扩展 (ext/mysql)？它是否已被弃用？我改用什么？我该如何迁移？”](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated) 实际上并没有回答为什么不鼓励它。

对于使用仍然依赖旧 mysql 扩展的库的开发人员来说，这是一个问题。仅仅因为不再支持该扩展并不意味着这是一个“无关紧要”的问题，因为仍然有很多库使用旧扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:01:42.337

这两个资源应该可以帮助您：

[MySQLi 相对于 MySQL 的优势](https://stackoverflow.com/questions/1171344/advantages-of-mysqli-over-mysql)

[http://php.net/manual/en/mysqli.overview.php](http://php.net/manual/en/mysqli.overview.php)

如果没有，请在 Google 上搜索更多信息，因为这不是一个真正的问题。

# c - 使用 C 函数扩展 PostgreSQL 时实现高性能事务

> ID：13236714
> 
> 赞同：4
> 
> 时间：2012-11-05T16:57:02.340
> 
> 标签：c, postgresql

我的目标是实现将数据块从数据库复制到 C 函数中以进行处理并作为查询结果返回的最高性能。

我是 PostgreSQL 新手，目前正在研究移动数据的可能方法。具体来说，我正在寻找与 PostgreSQL 相关的细微差别或关键字，以快速移动大数据。

**注意：** *我的最终目标是速度，所以我愿意接受我所提出的确切问题之外的答案，只要它获得大的性能结果。例如，我遇到过 COPY 关键字（仅限 PostgreSQL），它可以快速将数据从表移动到文件；反之亦然。我试图远离数据库外部的处理，但如果它提供的性能改进超过了外部处理的明显缺点，那就这样吧。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:10:47.180

听起来您可能想使用[服务器编程接口 (SPI)](http://www.postgresql.org/docs/current/interactive/spi.html)将存储过程实现为在 PostgreSQL 后端内运行的[C 语言函数。](http://www.postgresql.org/docs/current/interactive/xfunc-c.html)

用于[`SPI_connect`](http://www.postgresql.org/docs/current/interactive/spi-spi-connect.html)设置 SPI。

现在[`SPI_prepare_cursor`](http://www.postgresql.org/docs/current/interactive/spi-spi-prepare-cursor.html)一个查询，然后[`SPI_cursor_open`](http://www.postgresql.org/docs/current/interactive/spi-spi-cursor-open.html)它。[`SPI_cursor_fetch`](http://www.postgresql.org/docs/current/interactive/spi-spi-cursor-fetch.html)从它和[`SPI_cursor_close`](http://www.postgresql.org/docs/current/interactive/spi-spi-cursor-close.html)它完成时的行。请注意，这`SPI_cursor_fetch`允许您获取成批的行。

[`SPI_finish`](http://www.postgresql.org/docs/current/interactive/spi-spi-finish.html)完成后清理。

您可以在生成结果行时将它们返回到元组存储中，从而避免在内存中构建整个表。请参阅 PostgreSQL 源代码中任何集合返回函数中的示例。您可能还想查看[`SPI_returntuple`](http://www.postgresql.org/docs/current/interactive/spi-spi-returntuple.html)辅助函数。

另请参阅：[C 语言函数](http://www.postgresql.org/docs/current/interactive/xfunc-c.html)和[扩展 SQL](http://www.postgresql.org/docs/current/interactive/extend.html)。

如果对最大速度感兴趣，您的客户端可能希望通过[libpqtypes](http://libpqtypes.esilo.com/)使用 libpq 二进制协议，以便它以最小的开销接收由您的服务器端使用 SPI 的过程生成的数据。

# javascript - 使用 javascript 按类别搜索

> ID：13236716
> 
> 赞同：-1
> 
> 时间：2012-11-05T16:57:16.737
> 
> 标签：javascript, html, dom

因此，一段时间以来，我一直在研究搜索功能，[Tim Down 帮](https://stackoverflow.com/questions/12844980/search-page-function-for-internet-explorer)了我很多，并给了我一个简单的代码来搜索页面中的某些文本。

现在我正在尝试编辑代码以按类别搜索。我将 HTML 表分为以下几个 div。

```
<form id="f1" name="f1" action="javascript:void(0)" onsubmit="searchpage()" >
    <input id="t1" type="text" name="t1" />
    <select name="category" id="category">
        <option>all</option>
        <option value="name">Title</option>
        <option value="author">Author</option>
        <option value="year">Year</option>
        <option value="publisher">Publisher</option>
    </select>
    <input id="button" type="submit" value="SEARCH" name="b1" onclick="searchpage()" />
</form>

<tr>

<td>
<div id="name">
<div id="title">
title 1
</div>
extra content
</div>
</td>

<td>
<div id="author">
author 1
</div>
</td>

<td>
<div id="year">
2000
</div>
</td>

<td>
<div id="publisher">
publisher 1
</div>
</td>

<td>
<div id="notes">
notes 1
</div>
</td>

</tr>
<!--etc...--> 
```

我的Javascript如下

```
/*these two variables select the value attribute of each option in the dropbox*/
var cat=document.getElementById("category").selectedIndex;
var catid=document.getElementsByTagName("option")[cat].value;

function doSearch(text) {
    var sel;
    if (window.find && window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount > 0) {
        sel.collapseToEnd();
        }
        window.find(text);
    } else if (document.selection && document.body.createTextRange) {
        sel = document.body.selection;
        var textRange;
        if (sel.type == "Text") {
            textRange = sel.createRange();
            textRange.collapse(false);
        } else {
            textRange = document.body.createTextRange();
            textRange.collapse(true);
        }
        if (textRange.findText(text)) {
            textRange.select();
        }
    }
}

function searchpage() {
    doSearch(document.getElementById("t1").value);
} 
```

如您所见，值属性与 div 中的 id 匹配。选择相应的选项时，我想仅进行JavaScript搜索特定的DIV。不知道如何从这里开始。

我可以使用“in”属性来定义我想在某个类或 id 中搜索吗？类似的东西

```
doSearch(document.getElementById("t1").value in document.getElementsByClassName("name"));} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T16:51:00.573

除了我使用类而不是 id 之外，HTML 几乎保持不变。

JAVASCRIPT

```
function doSearch(text) {
var catclass = document.getElementById("category").options;    
var sel;
var classname;
var catselect;
if (window.find && window.getSelection) {
    sel = window.getSelection();
    window.find(text);
    var classname = sel.anchorNode.parentElement.className;
    var catselect = catclass[document.getElementById("category").selectedIndex].text;
    while (classname !== catselect) {
        if (sel.rangeCount > 0) {
            if (sel.anchorNode.parentElement.className == catclass[document.getElementById("category").selectedIndex].text) {
                break;
            }
            else {
                doSearch(text);
            }
        }
    }
} 
```

# javascript - 为什么我不能在自定义对象中引用变量？

> ID：13236718
> 
> 赞同：1
> 
> 时间：2012-11-05T16:57:21.630
> 
> 标签：javascript, function, variables, scope

我只是拿起Javascript，我不明白这个问题。

我创建了一个自定义对象，该对象使用一个名为`DeleteReasonCodes`的实例变量`delReasonCodes`，声明为一个数组。但是，内部方法似乎看不到这个实例变量。每次我尝试运行它时，都会出现`delReasonCodes is not defined`错误。

也许我只是不理解 Javascript 范围规则？

```
var DeleteReasonCodes = {

    delReasonCodes: [],

    get: function ()
    {
        return delReasonCodes;
    },

    add: function (code, desc)
    {
        delReasonCodes.push(new DeleteReasonCode(code, desc));
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:00:48.500

不，javascript 作用域属于函数（仅此而已）。

您创建的唯一变量是`DeleteReasonCodes`，并且您已经为它分配了一个具有 3 个*属性*的对象。如果您有对对象的引用，则可以通过[属性访问器运算符访问它们。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)在您的情况下，您可以使用`this.delReasonCode`或`DeleteReasonCodes.delReasonCode`- 请参阅[此答案](https://stackoverflow.com/a/10711164/1048572)以了解差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:01:52.817

您将 JavaScript 对象视为另一种语言的类。JavaScript 中的局部作用域仅存在于函数内部，而不存在于对象内部。在您的情况下，您需要使用完全限定名称访问数据：

```
DeleteReasonCodes.delReasonCodes.push(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:02:39.557

如果你这样做

```
delReasonCodes: [],

get: function() {
    return this.delReasonCodes;
}, 
```

# ios - 两个 NSDate 对象之间的天数

> ID：13236719
> 
> 赞同：7
> 
> 时间：2012-11-05T16:57:22.800
> 
> 标签：ios, nsdate

我正在尝试比较两天的 NSDate 对象，我第一次使用 NSDateComponents 来计算我的两个日期对象之间的差异，但它工作正常。

```
 NSString *dateStr =@"2012-11-05 15:00:00";
    NSDate *date = [dateFormat dateFromString:dateStr];
    NSDateComponents *datesDiff = [calendar components: NSDayCalendarUnit
                                              fromDate: date
                                                toDate: [NSDate date]
                                               options: 0]; 
```

这并不能解决我的问题。实际上，当 date1 = 2012-11-05 23:00:00 和 date2 = 2012-11-06 10:00:00 时，两个日期之间的差是 0 天和 11 小时。我正在寻找可以让我检测到日期变化的东西，换句话说，当 date1 = 2012-11-05 23:00:00 和 date2 = 2012-11-06 00:01:00 时，会有一天的差异。

如果有人知道解决方案，我会欢迎他的建议。提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T18:18:47.963

我认为您正在寻找这个（来自[日期和时间编程指南](https://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html)）：

> 清单 13 两个日期之间的天数，作为两个日期之间的午夜数

```
@implementation NSCalendar (MySpecialCalculations)

-(NSInteger)daysWithinEraFromDate:(NSDate *) startDate toDate:(NSDate *) endDate
{
     NSInteger startDay=[self ordinalityOfUnit:NSDayCalendarUnit
          inUnit: NSEraCalendarUnit forDate:startDate];
     NSInteger endDay=[self ordinalityOfUnit:NSDayCalendarUnit
          inUnit: NSEraCalendarUnit forDate:endDate];
     return endDay-startDay;
}
@end 
```

**编辑：斯威夫特版本：**

```
extension NSCalendar {
    func daysWithinEraFromDate(startDate: NSDate, endDate: NSDate) -> Int {
        let startDay = self.ordinalityOfUnit(.Day, inUnit: NSCalendarUnit.Era, forDate: startDate)
        let endDay = self.ordinalityOfUnit(.Day, inUnit: NSCalendarUnit.Era, forDate: endDate)
        return endDay - startDay
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-04T07:55:30.727

```
NSString *start = @"2010-09-01";
NSString *end = @"2010-12-01";

NSDateFormatter *f = [[NSDateFormatter alloc] init];
[f setDateFormat:@"yyyy-MM-dd"];
NSDate *startDate = [f dateFromString:start];
NSDate *endDate = [f dateFromString:end];
[f release];

NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorianCalendar components:NSDayCalendarUnit
                                                    fromDate:startDate
                                                      toDate:endDate
                                                     options:0];
[gregorianCalendar release]; 
```

组件现在拥有差异。

```
NSLog(@"%ld", [components day]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T06:39:58.790

```
func daysBetweenDates(startDate: NSDate, endDate: NSDate) -> Int
{
    let calendar = NSCalendar.currentCalendar()

    let components = calendar.components([.Day], fromDate: startDate, toDate: endDate, options: [])

    return components.day
} 
```

或者

```
let calendar = NSCalendar.currentCalendar();
let component1 = calendar.component(.Day, fromDate: fromDate)
let component2 = calendar.component(.Day, fromDate: toDate)
let difference  = component1 - component2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-09T15:38:41.663

**对于斯威夫特 3：**

从@masa的回答扩展：

```
extension Calendar {
    func daysWithinEraFromDate(startDate: Date, endDate: Date) -> Int? {
        guard let startDay = ordinality(of: .day, in: .era, for: startDate) else {
            return nil
        }

        guard let endDay = ordinality(of: .day, in: .era, for: endDate) else {
            return nil
        }

        return endDay - startDay
    }
} 
```

# php - 在自定义 Magento 管理模块中，如何在我的页面之间传递数据？

> ID：13236720
> 
> 赞同：0
> 
> 时间：2012-11-05T16:57:21.653
> 
> 标签：php, javascript, magento-1.7, magento

我正在尝试制作 Magento 自定义管理模块，并希望在模块页面之间传递信息或返回当前页面本身进行处理。

例如，假设我想连接到我的数据库并在单击我的管理模块页面上的某个按钮后通过 AJAX 添加一些数据，我需要一些独立的脚本或页面，我可以在某个地方发出请求。制作这样的脚本不是问题，但你怎么称呼它让我感到困惑。

顺便说一句，我想如果有一些独立的脚本是 AJAX 的正确方法，那么下面是正确的做法吗？

```
<?php

require_once('app/Mage.php');
umask(0);
Mage::app('admin');

// do something 
```

所以在普通的 PHP 中，我可以将 JavaScript Ajax 请求指向类似的地方`/script/dosomething.php`，但在 Magento 中，它的工作方式非常不同，调用脚本的绝对路径似乎是非常糟糕的做法，可能不起作用。

那么我应该在哪里放置一个脚本来被 Ajax 调用，我将如何调用它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:32:34.867

假设您使用此方法创建管理模块[http://alanstorm.com/magento_admin_controllers](http://alanstorm.com/magento_admin_controllers)

在你的控制器中你可以做

```
class Alanstormdotcom_Adminhelloworld_IndexController extends Mage_Adminhtml_Controller_Action
{
    public function indexAction()
    {
        $this->loadLayout();

           //display template.phtml (using update layout.xml)

        $this->renderLayout();
    }

    public function dosomethingAction(){
         //do database update
         // return a json
    }
} 
```

在`template.phtml`

```
<javascript>
  url = '<?php echo Mage::helper("adminhtml")->getUrl('/adminhelloworld/index/dosomething') ?>';

  new Ajax.Request(url, {
     method:'get',
     requestHeaders: {Accept: 'application/json'},
     onSuccess: function(transport) {
         json = transport.responseText.evalJSON();

         if(json.Status.code == 200){
           //do whatever you want with the result
         }
      }
   });
 </javascript> 
```

# javascript - 内联样式不适用于动态创建的输入

> ID：13236721
> 
> 赞同：2
> 
> 时间：2012-11-05T16:57:22.983
> 
> 标签：javascript, jquery, html

考虑：

```
 $( "#scanInDialogItems tr td:nth-child( 3 )").mouseenter( function() {
     var q = $( this ).html();
     $( this ).html( "<input type='number' style='text-align:right width:50px' min='1' value='" + q + "'/>" );
  }).mouseleave( function() { 
     var q = $( this ).find( "input" ).val();
     $( this ).html( q );
  }); 
```

每当用户将鼠标悬停在表格第三列中的单元格上时，内容就会被替换为输入元素。奇迹般有效。

问题是该元素的内联样式没有正确应用。例如，框中的文本左对齐 - 默认值。也没有设置宽度。

我在较早的问题中读到动态创建的输入元素在创建时需要刷新：

[样式未在动态创建的单选按钮中正确应用](https://stackoverflow.com/questions/7684089/styles-not-getting-applied-properly-in-dynamically-created-radio-buttons)

所以我尝试添加这个：

```
 $( this ).find( "input" ).textinput( 'refresh' ); 
```

或者这个：

```
 $( this ).find( "input" ).textinput(); 
```

但这些都不起作用。我的目标平台是最新的 chrome。

我没有正确刷新输入吗？还是有其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:02:25.673

您错过了内联样式中 text-align 和 width 之间的分号...

```
$( "#scanInDialogItems tr td:nth-child( 3 )").mouseenter( function() {
    var q = $( this ).html();
    $( this ).html( "<input type='number' style='text-align:right;width:50px' min='1' value='" + q + "'/>" );
}).mouseleave( function() { 
    var q = $( this ).find( "input" ).val();
    $( this ).html( q );
}); 
```

我只是在 jsfiddle 中尝试了之前和之后，这就是它的全部错误:)

# c# - 通过代码更改 ComboBox 中 TextBlock 的颜色

> ID：13236723
> 
> 赞同：1
> 
> 时间：2012-11-05T16:57:31.883
> 
> 标签：c#, wpf, combobox, textblock

我有几个 TextBlocks 存储在我的 ComboBox 中。我想做的是让每个 TextBlock 有不同的字体颜色。我看过很多讨论如何做到这一点的话题，但我想知道是否可以在代码中做到这一点？我问的原因是因为应用程序连接到服务器并从网络获取项目，然后我在 TextBlock 中设置这些项目，然后将项目推送到 ComboBox 上。我根据服务器告诉我的设置 ForeGround 和 BackGround，但无论如何颜色总是显示为黑色。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:00:53.927

您想为组合框创建一个 ItemTemplate 并将 FontColor 属性绑定到模型中的属性。

看看这个问答：[Combobox ItemTemplate and foreground](https://stackoverflow.com/questions/7449034/combobox-itemtemplate-and-foreground)

# linq-to-sql - 在 linq 中选择具有详细信息的主文件

> ID：13236726
> 
> 赞同：0
> 
> 时间：2012-11-05T16:57:37.360
> 
> 标签：linq-to-sql, linq-to-entities, linq-to-objects

我想在使用 linq to 对象的类别信息之后选择一些产品信息。

```
 var test = Context.Categories.Select(t => new { t.CategoryID, t.CategoryName }); 
```

如何选择产品信息。类别和产品具有一对多的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:53:22.737

您也可以使用 LINQ 查询语法来执行此操作

```
var test = from c in Context.Categories
           from p in c.Products
           select new { c.CategoryID, c.CategoryName, p.ProductName }); 
```

在幕后，这是同义词：

```
var test = Categories.SelectMany
(
   c => c.Products, 
   (c, p) => new
   {
      c.CategoryID,
      c.CategoryName,
      p.ProductName
   }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:13:56.853

我找到了答案，我像这样使用 SelectMany()：

```
 var test = Context.Categories.SelectMany(t=>t.Products).Select(t => new { t.CategoryID, t.Category.CategoryName,t.ProductName }); 
```

# php - PHP：如果条件在foreach循环内爆炸

> ID：13236728
> 
> 赞同：0
> 
> 时间：2012-11-05T16:57:53.883
> 
> 标签：php, foreach, explode

我正在尝试从文本字段的用户输入中获取多个值，并且想要扩展或继续添加到 if 条件语句中

这是我的代码

```
foreach ($list['post'] as $item) {
    if( ($item['single']['catid'] != 8) AND ($item['single']['catid'] != 4) ){ 
        $this->list_post($item); 
    }
} 
```

现在我正在寻找的是`if( ($item['single']['catid'] != 8) AND ($item['single']['catid'] != 4) )`我希望允许用户添加多个类别 ID，每个 ID 将添加`AND`和进一步的 id 代码`AND ($item['single']['catid'] != 4)`

我以前从未这样做过，也不知道这是正确的做法或任何其他可能的更好方法。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:59:28.937

[`in_array()`](http://php.net/in-array)根据可变数量的可能性检查一个值可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:07:08.440

我不确定我是否理解你的问题。您希望用户能够输入不同的值，例如：

```
$string = "5, 6, 7, 8, 10"; 
```

之后，您要检查 'catid' 是否不在该数组中，如果不在，您要运行 $this->list_post($item);

如果是这样，那么你应该使用这样的东西：

```
$values = explode(", ", $string); //make array from values
foreach ($list['post'] as $item) {
    if (!in_array($item['single']['catid'], $values)) { //check whether catid is in array
        $this->list_post($item); // execute whatever you want
    }
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:08:09.713

您应该有某种要检查的类别 ID 数组，例如：

```
$categories = array(8, 4); 
```

然后你可以使用类似`in_array(needle, haystack)`PHP 的内置函数。

你的 if 条件会变成这样：`if (!in_array($item['single']['catid'], $categories)) {`.

您应该使用上述方法，但我将让您了解它的工作原理，以便您了解更复杂问题的原理：

function exists($target, $array) { foreach ($array as $element) { // 遍历数组中的每个元素 if ($element == $target) { // 检查是否存在任何元素正在寻找返回真；// 返回真，它确实存在，并停在那里。} else { // 忽略它... } } return false; // 如果你到了这里，就意味着什么都没有返回 true，所以它不存在... }

用作`if (exists($item['single']['catid'], $categories)) {`.

如果它在 if 语句的“内部”，它将不起作用，因为您必须在评估它是否存在之前进行一些处理。因此，您可以在`if`语句之前完成此操作，并将结果存储在变量中，或者使用函数（PHP 提供）。

希望这个概念能帮助你解决更复杂的问题......

**注意**：这假设您的输入是数组的形式，如果没有直接提供，您可以通过各种方式构建它。

**更新**：

您通过输入字段获得的输入通过表单发送，您将 POST 或 GET 指定为方法。假设您使用的是 POST，这就是您将输入**作为字符串**获取的方式，因为它是在文本字段中输入的：

```
$categories_string = $_POST['the_name_field_in_the_input_tag']; 
```

之后，您必须将其理解为项目列表，假设用逗号分隔：`1,3,5,8`。然后这只是用逗号分隔。您可以使用`explode($delimiter, $string)`. 像那样：

```
$categories_array = explode(',', $_POST['categories']); 
```

但是你不能相信输入，所以你可以得到类似`1, 2, 3,5,6`. 空间会把它搞砸，因为你周围都会有空间。例如，要删除它们，您可以使用`trim`。

```
$categories = array(); // Create the array in which the processed input will go
foreach ($categories_array as $c) { // Go through the unprocessed one
    $categories[] = trim($c) * 1; // Process it, and fill the result. The times one is just so that you get numbers in the end and not strings...
} 
```

然后您可以像前面所示那样使用它，但请记住，这只是一个示例，您甚至可能不需要所有这些步骤，并且有更有效的方法来处理此输入（例如正则表达式）。但这里关心的不是清理输入，而是请记住，您最终需要这样做。

希望它足够清楚:)

# iphone - 地标在 iOS 6 中没有给出城市名称

> ID：13236729
> 
> 赞同：1
> 
> 时间：2012-11-05T16:57:55.483
> 
> 标签：iphone, objective-c, ios6, cllocation, clgeocoder

我正在使用此代码获得地标，但它没有给出城市名称。早些时候，我使用 MKReverse Geocoder 来获取获取城市名称的地标，但在 iOS 6 中它显示已弃用，因为 Apple 开发人员在 CLLocation 中添加了所有内容。

所以我使用了这段代码：

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{

    CLLocation *location = [locationManager location];
    NSLog(@"location is %@",location);

    CLGeocoder *fgeo = [[[CLGeocoder alloc] init] autorelease];

    // Reverse Geocode a CLLocation to a CLPlacemark
    [fgeo reverseGeocodeLocation:location
          completionHandler:^(NSArray *placemarks, NSError *error){

               // Make sure the geocoder did not produce an error
               // before continuing
               if(!error){
                    // Iterate through all of the placemarks returned
                    // and output them to the console
                    for(CLPlacemark *placemark in placemarks){
                           NSLog(@"%@",[placemark description]);
                           city1= [placemark.addressDictionary objectForKey:(NSString*) kABPersonAddressCityKey];
                           NSLog(@"city is %@",city1);
                    }
               }
               else{
                    // Our geocoder had an error, output a message
                    // to the console
                    NSLog(@"There was a reverse geocoding error\n%@",
                                         [error localizedDescription]);
               }
         }
    ]; 
```

}

正如我在控制台中看到的那样， `NSLog(@"%@",[placemark description]);` 它给出的输出如下：- abc 道路名称、abc 道路名称、州名、国家/地区名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:04:16.437

如果你想 NSLog 地址，你必须像这样编写它：

```
NSString *street = [[placemark addressDictionary] objectForKey:(NSString *)kABPersonAddressStreetKey];
NSString *city = [[placemark addressDictionary] objectForKey:(NSString *)kABPersonAddressCityKey];
NSString *state = [[placemark addressDictionary] objectForKey:(NSString *)kABPersonAddressStateKey];
NSString *country = [[placemark addressDictionary] objectForKey:(NSString *)kABPersonAddressCountryKey];
NSString *zip = [[placemark addressDictionary] objectForKey:(NSString *)kABPersonAddressZIPKey];

NSString *message = [NSString stringWithFormat:@"Address Is: %@, %@ %@, %@, %@", street, zip, city, state, country];

NSLog(@"%@", message); 
```

或者您可以遍历返回的数组：

```
NSArray *array = [[placemark addressDictionary] objectForKey:@"FormattedAddressLines"]; 
```

如果您只想打印字典内容，请执行以下操作：

```
NSLog(@"%@", [[placemark addressDictionary] description]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T20:05:00.213

我可以看到的三件事可能会引起注意...

首先，不推荐使用此方法（[请参阅此处的文档](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/DeprecationAppendix/AppendixADeprecatedAPI.html)）：

```
(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

尝试改用这个：

```
(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

您的最新位置是数组中的最后一项，`locations`因此：

```
 /* 
 According to the Apple docs, the array of locations keeps the most recent location as the
 last object in the array 
 */
CLLocation *location = [locations lastObject];
NSLog(@"%@", location); 
```

其次，如果您使用 ARC，则不需要自动释放消息：`CLGeocoder *fgeo = [[CLGeocoder alloc] init];`工作正常。

最后，根据 CLPlacemark 的 Apple 文档，有一个属性`locality`应该返回城市作为地标。所以

```
for(CLPlacemark *placemark in placemarks){
    NSLog(@"%@",[placemark description]);
    NSString *city1 = [placemark locality];
    NSLog(@"city is %@",city1); } 
```

如果您只想要城市，那么该`addressDictionary`物业似乎是矫枉过正的。根据[此处的文档，](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html) addressDictionary 被格式化为返回 ABPerson 对象中的内容，我假设您必须对其进行解析才能获取城市。地标位置似乎要简单得多......

我在我正在构建的地理编码应用程序中测试了我的建议，我得到了你正在寻找的结果`[placemark locality]`

# html - CSS 交叉淡入淡出图像

> ID：13236731
> 
> 赞同：0
> 
> 时间：2012-11-05T16:57:58.873
> 
> 标签：html, css, fading

我有这段代码很好用。当我将鼠标移到图像上时，它会淡入淡出到另一个图像。

我想要的是：当我通过鼠标时，图像交叉淡入淡出并像这样休息，我的意思是，只进行 1 次转换。

**1）图像 1 2）鼠标悬停图像 2 3）鼠标移出图像 2**

**这是我的代码：**

```
 <div id="crossfade">
<img class="bottom" src="images/site3/pasarela1.png" />
<img class="top" src="images/site3/pasarela2.png" />
</div> 
```

**这是我的CSS代码：**

```
#crossfade {
position:relative;
height:250px;
width:400px;
}
#crossfade img {
position:absolute;
left:0;
opacity: 1;
-webkit-transition: opacity 1s ease-in-out;
-moz-transition: opacity 1s ease-in-out;
-o-transition: opacity 1s ease-in-out;
-ms-transition: opacity 1s ease-in-out;
transition: opacity 1s ease-in-out;
}

#crossfade img.top:hover {
opacity:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:21:02.627

从我得到的是你希望 :hover 状态“坚持”。虽然它不是一个纯 CSS 解决方案，但如果您使用的是 jquery 的 .addClass，则一种可靠的解决方法是。

```
$('.yourimage').mouseover(function() { //hover over your image to trigger the event
     $(this).addClass('yourAnimationClass'); //add the animation class to the image you hovered over
}); 
```

# asp.net-mvc - 未找到 MVC 4 Html Helper RouteUrl（MVC 4 添加到 Webforms 项目）

> ID：13236734
> 
> 赞同：0
> 
> 时间：2012-11-05T16:58:02.183
> 
> 标签：asp.net-mvc, webforms, asp.net-mvc-4

确切的错误信息：

```
 'System.Web.Mvc.HtmlHelper<dynamic>' does not contain a definition for 'RouteUrl' and no extension method 'RouteUrl' accepting a first argument of type 'System.Web.Mvc.HtmlHelper<dynamic>' could be found (are you missing a using directive or an assembly reference?) 
```

我在视图文件夹中的网络配置是这样的：

```
<?xml version="1.0"?>

<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="Microsoft.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>

  <appSettings>
    <add key="webpages:Enabled" value="false" />
  </appSettings>

  <system.web>
    <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>

    <!--
        Enabling request validation in view pages would cause validation to occur
        after the input has already been processed by the controller. By default
        MVC performs request validation before a controller processes the input.
        To change this behavior apply the ValidateInputAttribute to a
        controller or action.
    -->
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
  </system.webServer>
</configuration> 
```

我的项目引用 System.Web.Mvc V4.0.0.0 并且此程序集设置为复制本地。

我会错过什么？

背景信息：这个项目是一个新的 MVC 4 开发的 web 表单项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:00:02.773

没有`Html.RouteUrl`方法。

你的意思是`Url.RouteUrl`。

# playframework - 如何避免编码请求参数的key被编码

> ID：13236736
> 
> 赞同：0
> 
> 时间：2012-11-05T16:58:05.690
> 
> 标签：playframework

我正在尝试使用 WS.url() 发送一个 http 请求，其中一个操作接收一个自定义类参数，例如

```
public static void add(@Valid MyPage info) {...} 
```

MyPage 中有地图

```
@Required
public Map<String, String> content = new HashMap<String, String>(); 
```

但是当我尝试发送请求时

```
WS.url().setParameter("info.content[name]","mynameis"); 
```

该操作没有参数，请求的查询字符串将 info.content[name] 转换为 ...%5Bname%5D... 我检查了 WS.createQueryString 并发现它将对所有键和值进行编码。有什么办法可以避免吗？

更新：

我将其更改为 info.content.name，并且可以正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:32:23.253

我将其更改为“info.content.name”形式，并且可以正常工作。但仍然不知道如何避免“obj[xx]”问题。

# mysql - 在 SQL 中使用 3 列计数查询

> ID：13236745
> 
> 赞同：-1
> 
> 时间：2012-11-05T16:58:36.110
> 
> 标签：mysql, sql, mysql-workbench

我有一个名为“Library”的数据库，其中的表名为“Medien”。其中有多个列，我需要查询以下名为 Fname、Mname、Lname 和 ISBN 的列。

**我想用 ISBN 和没有 ISBN 计算数据库总记录？**

*   Fname = 作者的名字
*   Mname = 作者的中间名
*   Lname = 作者的姓氏

我想计算 ISBN 有多少条记录，没有 ISBN 有多少条记录？

我已执行以下命令

```
 Select COUNT(ISBN) as Fname FROM  `library`.`MEDIEN` where  Fname = `isbn`;
 Select COUNT(ISBN) as Mname FROM  `library`.`MEDIEN` where  Mname = `isbn`;
 Select COUNT(ISBN) as Lname FROM  `library`.`MEDIEN` where  Lname = `isbn`;
 Select COUNT(ISBN) as NtFname FROM `library`.`MEDIEN`where  Fname != `isbn`;
 Select COUNT(ISBN) as NtMname FROM `library`.`MEDIEN`where  Mname != `isbn`;
 Select COUNT(ISBN) as NtLname FROM `library`.`MEDIEN`where  Lname != `isbn`; 
```

我不确定我是否执行了正确的命令。因为某些 ISBN 记录分别只有 Fname,Mname 或 Fname,Lname 或 Mname,Lname 或 Fname , Lname,Mname。

例如

**第一作者**

Fname: asher Lname: baig

写了 5 本书的记录，但其中两个是 ISBN，所以

总输出为 ISBN = 2

愿望输出会是这样的

`ISBN=value and NtISBN=value`

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:01:52.320

您可能只想使用两个带有 OR 子句的查询。这将避免某些行被计算两次：

```
Select COUNT(ISBN) as count FROM library.MEDIEN where
 verf1 = 'isbn'
 OR verf2 = 'isbn'
 OR verf3 = 'isbn'; 
```

然后当然是相反的：

```
Select COUNT(ISBN) as count FROM library.MEDIEN where verf1 != 'isbn'
   AND verf2 != 'isbn'
   AND verf3 != 'isbn'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T15:35:47.487

你能试试这个查询吗

```
SELECT SUM (CASE WHEN (verf1 = 'isbn' OR verf2 = 'isbn' OR verf3 = 'isbn') THEN 1 ELSE 0 END ) ISBNCount
        SUM (CASE WHEN (verf1 = 'isbn' OR verf2 = 'isbn' OR verf3 = 'isbn') THEN 0 ELSE 1 END ) NtISBNC 
         FROM library.MEDIEN 
```

# algorithm - 蛮力模式匹配的正确性参数？

> ID：13236749
> 
> 赞同：1
> 
> 时间：2012-11-05T16:58:49.623
> 
> 标签：algorithm, brute-force

我想知道模式匹配的蛮力算法是否会有一个复杂的正确性论点？

我在想一些类似的东西......如果算法被完全执行，这证明了它的正确性，因为模式中的每个字符都单独匹配到文本字符串中的索引。

会这么简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:02:22.037

一般来说，蛮力匹配算法的正确性的论据是，在其执行过程中，它考虑了字符串匹配模式的所有可能方式，仅此而已；因此，如果它断定字符串匹配，则存在匹配，如果不匹配，则不存在。

# javascript - 如何在 HTA 中浏览文本文件并在文本区域中显示数据

> ID：13236754
> 
> 赞同：1
> 
> 时间：2012-11-05T16:59:13.350
> 
> 标签：javascript, vbscript, hta

情况是我有一个浏览按钮和文本区域，加载文本文件时可以显示该文本区域中的所有数据。

最终视图：

```
--------------
|C:\1.txt    |  BROWSE
--------------

-----------------------------------------------
|  Some example                               |
|               Data                          | 
|                     from                    |
|                              1.txt          |
----------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:16:00.910

你可能有这样的代码：

```
iStream = fso.OpenTextFile('some_text_file.txt', 1, true);
text = iStream.ReadAll();
iStream.Close(); 
```

如果`text`包含选项卡，则不能在`textarea`元素中显示它们。但是，使用`pre`将按原样显示文本：

```
document.getElementById('text').innerText = text; 
```

`HTML`里面应该有：

```
<pre id="text"></pre> 
```

# c# - MVC4 CSHTML 从数据库加载 TEXT 字段

> ID：13236756
> 
> 赞同：1
> 
> 时间：2012-11-05T16:59:25.127
> 
> 标签：c#, razor

我在 WebForms 上有一个系统，我从数据库中加载了文本字段，并通过 ID 轻松为每个字段选择了正确的位置，但是在 cshtml 中我考虑了最好的方法，我检查 [DisplayName("foo bar") ] 在模型上，但我需要完成 Web 的其他常用按钮，所以我很尴尬我需要看到很多代码才能正常工作，也许我对我的概念有误。有什么想法或最好的方法吗？谢谢。 *每个用户都需要随时选择更改按钮、标签、....的名称。数据库已准备好使用*。

网络领域

```
<div class="editor-label">
        @Html.LabelFor(model => model.DataInicioAcesso)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DataInicioAcesso)
        @Html.ValidationMessageFor(model => model.DataInicioAcesso)
    </div> 
```

和

```
<li>@Html.ActionLink("Acesso_Usuario                                ",   "Index",  "Acesso_Usuario")</li> 
```

和

```
<input type="submit" value="Create" /> 
```

和其他人......我已经配置了一个 SessionPermissionLogin 。所以我希望每个人都阅读不同的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:11:05.823

更简单且更简洁的方法是创建自定义 [DisplayName] 元数据以动态显示标签。像[这样](http://dotnetslackers.com/articles/aspnet/Customizing-ASP-NET-MVC-2-Metadata-and-Validation.aspx)和[这样的](http://geekswithblogs.net/brians/archive/2010/06/14/asp.net-mvc-localization-displaynameattribute-alternatives-a-good-way.aspx)

```
public class DynamicDisplayNameAttribute : DisplayNameAttribute 
    {
        public DynamicDisplayNameAttribute(string key)
        {
            _key = key;
         }

        public override string DisplayName
        {
            get
    {
         //
         //repo database logic to get display name
         //
          string displayName = repo.GetDisplayName(key);

          return string.IsNullOrEmpty(displayName)
             ?"" 
             : displayName;
      }
  }

  private string _key { get; set; } 
```

}

将属性添加到类似的属性

```
 [DynamicDisplayNameAttribute("Key")]
      public string DataInicioAcesso { get; set; } 
```

# php - 为添加表单添加 if 语句以使编辑表单可用

> ID：13236760
> 
> 赞同：0
> 
> 时间：2012-11-05T16:59:36.040
> 
> 标签：php

我有一种用于添加和编辑内容的表单。表单上有一个选择标签。我要问的是我在哪里使用 if 语句来查看它是否是编辑然后为表单预选一个值预设。

下面的示例是一般添加表单所需要的：

```
<select name="item_status" id="select1" class="nostyle" style="width:100%;" placeholder="Select Status">
    <option></option>
    <?php foreach($something AS $item)
    {
    echo '<option value="'.$item->item_id.'">'.$item->items_name.'</option>';
    }
    ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:02:16.397

```
<select name="item_status" id="select1" class="nostyle" style="width:100%;" placeholder="Select Status">
    <option></option>
    <?php foreach($something AS $item)
    {
    $selected = $_REQUEST['item_status'] === $item->item_id ? ' selected="selected"' : '';
    echo '<option value="'.$item->item_id.'"'.$selected.'>'.$item->items_name.'</option>';
    }
    ?>
</select> 
```

# python - Django mod-wsgi One Class 对象的多个实例

> ID：13236766
> 
> 赞同：1
> 
> 时间：2012-11-05T17:00:09.657
> 
> 标签：python, django, apache, mod-wsgi

我目前正在使用 DJango - apache 安装（在 mod_wsgi 上）来运行一个托管 Intranet 纸牌游戏的网站（项目），其规则非常复杂，以至于每个用户只需要 1 个主列表 + dict 分数数据结构。单个用户的分数也会受到其他用户操作的影响。我正在使用我在 urls.py 中实例化的 Score 类，所有玩家/用户都访问这个类的对象 [scObj = Scorer('Spades') ]。在这个 obj 内部有玩家动作、分数更新等的字典。

```
 class Scorer:
        def __init__(self, suitname):
            self.__suitname = suitname 
```

scorer 类单独存储在 Scorer.py 中

```
 scObjs = (Scorer('Spades'), Scorer('Hearts'), Scorer('Clubs'), Scorer('Diamonds'),) 
```

对象在 urls.py 中创建

该模型在 DEV 部署中完美运行。当我在 apache 中移动到 PROD 时，这坏了（因为创建了多个 scObj 实例，因此玩家 1 对玩家 2 的移动的分数更新不会反映在玩家 3 对玩家 2 的不同移动中) . 我需要模拟单例类行为/全局 scObj 行为，这是我无法做到的。我在worker - mpm - 多线程模式下运行apache，所以我认为由于多进程而存在多个scObj副本的问题不存在。

问题与 mod_wsgi 有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:02:23.323

读：

[http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)

使用嵌入式模式，无论是 UNIX 系统上的 worker MPM 还是 prefork MPM 都将是多进程的。

使用守护进程模式和单个进程的默认值，你应该没问题。

请参阅该文档末尾的注释，尽管必要时使用适当的数据库存储。还要注意有关多线程访问数据的警告并确保代码线程安全。

# c# - C#：将单个 / 替换为 *single* \

> ID：13236770
> 
> 赞同：4
> 
> 时间：2012-11-05T17:00:36.053
> 
> 标签：c#, string, replace

我发现很多帖子回答了类似的问题（例如“如何替换`\`为`/`”或“如何替换`\\`为`\`”。我理解所有这些，但没有一个能解决我的特殊问题。这里是：

我正在从注册表中读取一个路径字符串，其中包含“ `///`”而不是“ `\`”（易于替换），但也`/u00xy`包含 unicode 字符的“”。*要使用正确的unicode*字符成功解析字符串，我必须`/`将. 但是每一种可能的方式（或）都会导致“ ”而不是“ ”！ *`\``string.replace``regex.replace``\\u00xy``\u00xy`*

 *或者，我收到类似“ *`Unrecognized escape sequence`*”的错误。例如：

```
str.Replace("/u00", @"\u00")   // results in "\\u00" 
```

同时：

```
str.Replace("/u00", "\u00")    // gives an error. 
```

我没主意了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:42:17.403

我相信这样的事情应该适合你：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;
using System.Globalization;

namespace Test
{
    public class Program
    {
        public static void Main(string[] args)
        {
            Console.WriteLine(ConvertUnicodeEscapes("aa/u00C4bb/u00C4cc/u00C4dd/u00C4ee")); //  prints aaÄbbÄccÄddÄee
        }

        private static Regex r = new Regex("/u([0-9A-F]{4})");
        private static string ConvertUnicodeEscapes(string input)
        {
            return r.Replace(input, m => {
                int code = int.Parse(m.Groups[1].Value, NumberStyles.HexNumber);
                return char.ConvertFromUtf32(code).ToString();                    
            } );
        }       

    }
} 
```

正如 Jon 所指出的，这不仅仅是用单个“\”替换“/”。你不能真正做到这一点，因为 '\' 是转义字符。首先，我们必须匹配组“/uXXXX”。然后我们将字符串十六进制部分（XXXX）转换为utf32（即unicode）中的整数。最后，我们得到了那个 utf32 编码对应的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:08:03.550

编辑：现在我明白你想要做什么了，它的工作原理一点也不奇怪。您不是在谈论字符串的“内部”表示 - 您实际上是在要求在执行时应用特定于 C# 的字符串文字解析规则。

如果你写：

```
string x = "\u0041"; 
```

... 创建一个包含单个字符 ('A') 的字符串。在原始*源代码*中它被表示为 Unicode 转义序列这一事实根本不会影响字符串。因此，上面的代码在执行时与以下代码*无法区分：*

```
string x = "A"; 
```

现在，听起来您想将包含斜杠、后跟 a `u`、后跟四个十六进制数字的字符串解析为单个字符。您必须自己执行此操作，或者找到另一个可以执行此操作的库 - 您不应该期望`string.Replace`为您执行此操作。

换句话说，了解数据本身与数据的源代码表示之间的区别至关重要。

* * *

您声称：

```
str.Replace("/u00", @"\u00") 
```

> 结果为“\u00”

不，真的没有。如果将结果写入控制台，您会看到只有一个反斜杠。

我强烈怀疑您正在查看调试器，它显示了一个转义视图。

演示代码：

```
using System;

class Test
{
    static void Main()
    {
        string input = "x/u00y";
        string output = input.Replace("/u00", @"\u00");
        Console.WriteLine(output); // Result: x\u00y
    }
} 
```

这段代码：

```
str.Replace("/u00", "\u00") 
```

确实会失败，因为字符串文字`"\u00"`无效。这是一个未终止的 Unicode 字符转义序列。*

# java - Android 语音转文本可在模拟器中使用，但不能在手机上使用

> ID：13236771
> 
> 赞同：0
> 
> 时间：2012-11-05T17:00:36.140
> 
> 标签：java, android, android-emulator

我正在尝试为 Android 的文本应用程序编写语音。现在该应用程序不会在模拟器上崩溃，但是当我将其上传到三星 Galaxy s 1900 时，我在 eclipse 中收到以下错误消息：

```
11-05 17:43:48.814: I/dalvikvm(3092): Could not find method com.example.speechtotext.MainActivity.getActionBar, referenced from method com.example.speechtotext.MainActivity.onCreate
11-05 17:43:48.818: W/dalvikvm(3092): VFY: unable to resolve virtual method 3036: Lcom/example/speechtotext/MainActivity;.getActionBar ()Landroid/app/ActionBar;
11-05 17:43:48.818: D/dalvikvm(3092): VFY: replacing opcode 0x6e at 0x0009
11-05 17:43:48.818: D/dalvikvm(3092): VFY: dead code 0x000c-0061 in Lcom/example/speechtotext/MainActivity;.onCreate (Landroid/os/Bundle;)V
11-05 17:43:48.896: D/AndroidRuntime(3092): Shutting down VM
11-05 17:43:48.900: W/dalvikvm(3092): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
11-05 17:43:48.900: E/AndroidRuntime(3092): FATAL EXCEPTION: main
11-05 17:43:48.900: E/AndroidRuntime(3092): java.lang.NoSuchMethodError: com.example.speechtotext.MainActivity.getActionBar
11-05 17:43:48.900: E/AndroidRuntime(3092):     at com.example.speechtotext.MainActivity.onCreate(MainActivity.java:40)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.os.Looper.loop(Looper.java:123)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at java.lang.reflect.Method.invokeNative(Native Method)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at java.lang.reflect.Method.invoke(Method.java:521)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
11-05 17:43:48.900: E/AndroidRuntime(3092):     at dalvik.system.NativeStart.main(Native Method)
11-05 17:44:11.343: I/dalvikvm(3092): threadid=3: reacting to signal 3
11-05 17:44:12.724: E/dalvikvm(3092): Failed to write stack traces to /data/anr/traces.txt (805 of 2366): Unknown error: 0
11-05 17:44:22.165: I/Process(3092): Sending signal. PID: 3092 SIG: 9 
```

手机上的固件版本为 2.2。

在模拟器中运行时，程序只是说模拟器不支持语音，但没有崩溃。

这是我的代码：

```
package com.example.speechtotext;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import android.view.View;
import android.widget.EditText;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.content.Intent;
import java.util.Locale;

import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends Activity implements OnClickListener,
        OnInitListener {

    private int MY_DATA_CHECK_CODE = 0;
    private TextToSpeech myTTS;
    private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    private ListView mList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        getActionBar().setDisplayHomeAsUpEnabled(true);
        Button speakButton = (Button) findViewById(R.id.speak);
        speakButton.setOnClickListener(this);
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        // Get display items for later interaction
        Button speakButton2 = (Button) findViewById(R.id.btn_speak);

        mList = (ListView) findViewById(R.id.list);

        // Check to see if a recognition activity is present
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            speakButton2.setOnClickListener(this);
        } else {
            speakButton2.setEnabled(false);
            speakButton2.setText("Recognizer not present");
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    // Indien men op de speakbutton klikt
    public void onClick(View arg0) {
        EditText enteredText = (EditText) findViewById(R.id.enter);
        String words = enteredText.getText().toString();
        speakWords(words);

        if (arg0.getId() == R.id.btn_speak) {
            startVoiceRecognitionActivity();
        }
    }

    // Zorgt voor de spraak
    private void speakWords(String speech) {
        // myTTS.speak(speech, TextToSpeech.QUEUE_ADD, null); zorgt dat de app
        // het toevoegt aan de queue zodat het wacht tot de vorige speech
        // opdracht uitgesproken is
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    // Controleren of de data beschikbaar is
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                myTTS = new TextToSpeech(this, this);
            } else {
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }

        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE
                && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it
            // could have heard
            ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, matches));
        }

        super.onActivityResult(requestCode, resultCode, data);
    }

    private void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    // Taal juist zetten en indien er een fout is geeft men een foutboodschap
    public void onInit(int initStatus) {
        if (initStatus == TextToSpeech.SUCCESS) {
            myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

} 
```

我已经检查过 min API 不是很高，但 eclipse 已将其设置为 2.2，所以我认为这很好。

有人知道可能出了什么问题或如何调试？

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:09:27.607

问题是您尝试[`ActionBar`](https://developer.android.com/reference/android/app/ActionBar.html)在运行 Android 2.2（API 级别 8）的设备上使用，但`ActionBar`在 API 级别 11 中添加。

所以你在这里基本上有两个选择：

1.  不要`ActionBar`在您的应用程序中使用。
2.  使用[`ActionBarSherlock`](http://actionbarsherlock.com/)库，它将操作栏向后移植回 Android 2.x（尽管您仍然需要对代码进行一些小的更改，请阅读文档以`ActionBarSherlock`获取更多详细信息）。

# xpages - 从 Xpages 运行 lotusscript 代理

> ID：13236772
> 
> 赞同：2
> 
> 时间：2012-11-05T17:00:37.940
> 
> 标签：xpages, lotusscript

我已经在 Agent 中编写了 lotusscript 代码，我需要通过单击 Xpage 中的按钮来运行代理。

我怎么能达到？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T19:10:33.230

此解决方案的一个问题可能是，当您想要使用在代理中操作的数据时，您必须重新加载 xpage 中的注释文档。这可以通过以下代码行来完成：

```
 var ag = database.getAgent("agentname");
    if(ag != null){
      var id = doc.noteid;
      ag.runonserver(id);
      doc.recycle();
      doc = database.getdocumentbyid(id);
       // check if the agent did its job.
       // if so do stuff otherwhise report this to the user?
    } 
```

从版本 8.5.2 开始，代理类添加了一个新方法

agent.runWithDocumentContext(NotesDocument doc);

此方法使用 xPage 的内存文件。因此，您无需将文档保存在代理本身中，但您可以进行更改并退出代理代码。xpage 可以直接使用所做的更改。这可以为您省去很多麻烦，例如检查代理是否完成了他的工作、重新加载文档等。

为此，您必须将代理的选项设置为

1.  以网络用户身份运行
2.  允许受限操作
3.  代理类型为“代理列表选择”，目标为“无”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-05T18:03:14.850

只需在点击事件上调用它（代理使用什么语言没有区别）

```
database.getAgent("agentName").run() or database.getAgent("agentName").runOnServer() 
```

请注意，代理的运行时必须是这样的 ![在此处输入图像描述](../Images/cdd22a8cd529b301c876499864c42674.png)

# c# - 将文件解析为数据表时允许空值

> ID：13236777
> 
> 赞同：0
> 
> 时间：2012-11-05T17:01:13.893
> 
> 标签：c#, parsing, datatable

将文件解析为数据表，如果说它们对于 csv 文件中的该行没有值，我如何允许它添加空值？

```
string fileName = @".csv";

using (StreamReader stream = new StreamReader(fileName))
{

    DataTable dt = CsvParser.Parse(stream);

    foreach (DataRow row in dt.Rows)
    {
        try
        {
            string lname = Convert.ToString(row[0].ToString().Trim());
            string fname = Convert.ToString(row[1].ToString().Trim());
            long s = Convert.ToInt64(row[2]);
            string b = Convert.ToString(row[3]);
            rec = row[0].ToString() + "," +
                    row[1].ToString() + "," +
                    row[2].ToString() + "," +
                    row[3].ToString() + ",";
            write.WriteLine(rec);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:25:41.397

这有效并接受空值。

```
 foreach (DataRow row in dt.Rows)
                    {
                        try
                        {

                                string lname = row[0].ToString();
                                string fname = row[1].ToString();

                                string ss1 = row[2].ToString();
                                long? s = ss1 == "" ? (long?)null : Convert.ToInt64(ssn1);

                                string dob1 = row[3].ToString();
                                string b = dob1 == "" ? null : dob1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:21:57.933

这取决于您`null`在文件中的表示形式。根据您所展示的内容，似乎 whitepsace 字符串是`null`（您正在调用`Trim`每个字符串），因此您可以检查并执行以下操作：

```
foreach (DataRow row in dt.Rows)
{
    // Get values.
    string lname = row[0].Field<string>().Trim();
    string fname = row[1].Field<string>().Trim();
    string sString = row[2].Field<string>().Trim();
    string b = row[3].Field<string>().Trim();

    // Format/parse.
    lname = lname == "" ? null : lname;
    fname = fname == "" ? null : fname;
    long? s = sString == "" ? (long?) null : Convert.ToInt64(sString);
    string b = b == "" ? null : b;

    // Process the values.
} 
```

请注意，根据具体的实现`CsvParser`，您可能会返回[`DbNull`](http://msdn.microsoft.com/en-us/library/934efkk6.aspx)而不是实际的空白字符串。请注意，如果您使用它，调用 to`Field`将处理该转换`null`（但如果它是 ，则必须小心不要调用`Trim`它`null`，否则`NullReferenceException`将抛出 a ）。

# objective-c - Facebook 在 iOS6.0 中使用 SLRequest 上传照片无论如何都失败了

> ID：13236778
> 
> 赞同：7
> 
> 时间：2012-11-05T17:01:17.270
> 
> 标签：objective-c, facebook, ios6

我的 Objc 代码来了：

```
ACAccountStore *facebookaccount = [[ACAccountStore alloc] init];
ACAccountType *facebookaccountType = [facebookaccount accountTypeWithAccountTypeIdentifier: ACAccountTypeIdentifierFacebook];
// Specify App ID and permissions
NSDictionary *options = @{ ACFacebookAppIdKey: @"1234567899876543", ACFacebookPermissionsKey: @[@"publish_stream"], ACFacebookAudienceKey: ACFacebookAudienceFriends };
[facebookaccount requestAccessToAccountsWithType:facebookaccountType options:options completion:^(BOOL granted, NSError *error) {
    if(granted) {
        NSArray *accountsArray = [facebookaccount accountsWithAccountType:facebookaccountType];
        if ([accountsArray count] > 0) {
            ACAccount *facebookAccount = [accountsArray objectAtIndex:0];

            NSString *sendmessage = @"Face";
            NSData *myImageData = UIImagePNGRepresentation(imageSource);

            SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST URL:[NSURL URLWithString:@"https://graph.facebook.com/me/photos"] parameters:nil];

            [facebookRequest addMultipartData:myImageData withName:@"source" type:@"multipart/form-data" filename:nil];
            [facebookRequest addMultipartData:[sendmessage dataUsingEncoding:NSUTF8StringEncoding] withName:@"message" type:@"multipart/form-data" filename:nil];

            [facebookRequest setAccount:facebookAccount];

            [facebookRequest performRequestWithHandler:^(NSData* responseData, NSHTTPURLResponse* urlResponse, NSError* error) {
                if (error == nil) {
                    NSLog(@"responedata:%@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
                }else{
                    NSLog(@"%@",error.description);
                }
        }
    }
    else
    {
        NSLog(@"error description : %@",[NSString stringWithFormat:@"%@", error.localizedDescription]);
    }
}]; 
```

最后我得到了这些响应数据：

respondata:{"error":{"message":"(#324) 需要上传文件","type":"OAuthException","code":324}}

请帮帮我！！！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-14T02:57:50.347

通过在 addMultipartData 中包含文件名并将消息作为 SLRequest 选项的一部分传递，我可以成功上传照片。

代码：

```
NSDictionary *parameters = @{@"message": sendmessage};

SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                            requestMethod:SLRequestMethodPOST
                                                      URL:[NSURL URLWithString:@"https://graph.facebook.com/me/photos"]
                                                           parameters:parameters];

[facebookRequest addMultipartData: myImageData
                                     withName:@"source"
                                         type:@"multipart/form-data"
                                     filename:@"TestImage"];

facebookRequest.account = facebookAccount;

[facebookRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
{
     // Log the result
}]; 
```

# marionette - ItemView 没有“渲染”方法

> ID：13236781
> 
> 赞同：0
> 
> 时间：2012-11-05T17:01:30.203
> 
> 标签：marionette

我刚刚将主干.marionette 从 0.9.3 更新到 v1.0.0-beta4 并且以下代码被破坏：

```
PlansApp.CompositeView  = Backbone.Marionette.CompositeView
PlansApp.ItemView = Backbone.Marionette.ItemVie

PlansApp.Plans.PlansList = do ({PlansApp, Backbone} = window) ->
  PlansList = {}

  PlansListItemView = PlansApp.ItemView.extend
    initialize: ->
      @bindTo this.model, "change", this.modelChanged

    modelChanged: (model, value)->
      this.render()
      this.$el.effect("highlight", {}, 6000)
      window.addTeachMeHandlers() if model.get 'IsFirst 
```

它专门破坏了 this.render() 并带有错误消息：

> 未捕获的类型错误：对象 [对象对象] 没有方法“渲染”

此代码以前用于升级之前的工作。

从源码看，ItemView 还是有 render 方法的，所以我猜测上下文是错误的或者可能是 bindTo 已经改变了。

我也将下划线从 1.3 升级到 1.4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:52:46.133

在以前的版本之一中，我必须更改 EventBinder 与视图的连接方式，以避免与 Backbone.StickIt 插件发生冲突。此更改意味着事件绑定的默认上下文不再是视图，您必须在调用时指定第四个参数 - 上下文`bindTo`。它的工作原理与 Backbone 的`on`方法相同：

`@bindTo this.model, "change", this.modelChanged, this`

# php - 安全图片上传 PHP

> ID：13236782
> 
> 赞同：1
> 
> 时间：2012-11-05T17:01:32.103
> 
> 标签：php, image, security, file-upload, gd

> **可能重复：**
> [上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads)

我一直在寻找用于安全图像上传的良好脚本/教程，但无论我发现什么，阅读评论似乎都存在脚本问题，就安全性而言。所以我尝试编写我的脚本。我想询问有关此的任何安全建议。

```
//create arrays from allowed extensions and types
$allowed_exts = array("jpg", "jpeg", "png", "gif");
$allowed_types = array("image/jpeg", "image/png", "image/gif");

//extract extension from uploaded file
$ext = strtolower(substr($_FILES["image"]["name"], strrpos($_FILES["image"]["name"], ".") + 1)); 
```

我首先检查扩展名是否是允许的

```
 if(in_array($ext, $allowed_exts) === false){
    echo "Only .jpg, .png, .gif allowed";
    } 
```

然后检查类型是否是允许的类型之一

```
 elseif(in_array($_FILES["image"]["type"], $allowed_types) === false){
    echo "Only .jpg, .png, .gif allowed";
    } 
```

然后检查文件大小

```
elseif($_FILES["image"]["size"] > 2100000){
    echo "File is too big";
} 
```

现在使用 getimagesize 检查尺寸

```
 elseif(!getimagesize($_FILES["image"]["tmp_name"])){ 
    echo "File is not an image";
    } else { 
```

我创建一个随机文件名

```
$filename = mt_rand(1000,99999)."_".$_POST['p_id'].".jpg"; 
```

如果这一切都很好，我会使用 GD 创建一个拇指。简而言之（如果它是 jpeg）：

```
a. imagecreatefromjpeg -> from uploaded file
b. imagecreatetruecolor -> with desired thumbnail dimensions
c. imagecopyresampled -> modify the image created under a.
d. imagejpeg -> save image to destination 
```

所以，正如我所读到的，这应该可以消除图像带来的大多数问题，但我确信我错过了一些重要的东西。

我写入文件的目录具有 755 权限，但我认为我必须通过在文件夹中放置 .htaccess 来对目录进行更多限制？里面应该有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:24:11.957

不久前我做了一个字符串清理脚本，我认为它可能会有所帮助。记得像这样清理你所有的 $_POST 项目：

```
//CLEAN-UP FUNCTIONS
function ms($v) {
     $v = str_replace("<br />","",$v); 
     $v = str_replace(" ","-",$v); 

     // Replace UTF-8 characters.
     $v = str_replace(
        array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
        array("'", "'", '"', '"', '-', '--', '...'),$v);

     // Replace their Windows-1252 equivalents.
     $v = str_replace(
        array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
        array("'", "'", '"', '"', '-', '--', '...'),$v);
     // Finalize                    
     $v = htmlspecialchars($v, ENT_QUOTES);
     //$v = nl2br($v);
     return $v;
} 
```

用法：

```
$id = ms($_POST['p_id']); 
```

# google-apps-script - Google App 脚本 onEdit？

> ID：13236783
> 
> 赞同：0
> 
> 时间：2012-11-05T17:01:34.470
> 
> 标签：google-apps-script, triggers, google-sheets

真的觉得我在电子表格对象脚本中遗漏了一些东西。

我正在尝试自动向 onEdit 的协作者发送电子邮件。在测试中明确运行脚本时，我成功发送了电子邮件，但 onEdit 事件似乎从未被触发（甚至没有看到日志消息）。脚本看起来很简单。

```
function onEdit(e) {
  var sheet = e.source;
  var viewers = sheet.getViewers();
  var ct = viewers.length;
  var recipients = [];
  for(var i=0;i<ct;i++){
    recipients.push(viewers[i].getEmail());
  };
  var subject = 'Update to '+sheet.getName();
  var body = sheet.getName() + ' has been updated.  Visit ' + sheet.getUrl() + ' to view the changes ' + e.range;

  Logger.log('Running onedit');

  MailApp.sendEmail(recipients, subject, body);
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T18:04:20.597

简单的 onEdit 函数具有非常有限的一组可能的操作，因为它在没有潜在用户授权的情况下运行。您必须创建另一个函数并在此函数上设置特定触发器。（可安装触发器）

以这篇[文章](https://stackoverflow.com/questions/13099951/how-to-put-a-username-to-the-cell-who-made-the-last-modification-of-the-row/13100188#13100188)为例。它显示了简单的 onEdit 和可安装的编辑（用于电子邮件发送）的示例，这在[此处的文档](https://developers.google.com/apps-script/understanding_triggers?hl=fr-FR)中进行了解释。

**编辑：**这是你的代码工作：

```
function sendAlert() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = ss.getActiveCell().getA1Notation()
  var viewers = ss.getViewers();
  var ct = viewers.length;
  var recipients = [];
  for(var i=0;i<ct;i++){
    recipients.push(viewers[i].getEmail());
  };
  var subject = 'Update to '+sheet.getName();
  var body = sheet.getName() + ' has been updated.  Visit ' + ss.getUrl() + ' to view the changes on cell ' + cell;
  MailApp.sendEmail(recipients, subject, body);
}; 
```

# java - 如何将登录用户更改为另一个临时用户？

> ID：13236785
> 
> 赞同：0
> 
> 时间：2012-11-05T17:01:40.400
> 
> 标签：java, login-control

在我的系统中，我希望只有管理员帐户才能访问特定文件夹。

所以当客户端以自己的身份登录时，单击打开文件链接，我希望它临时切换到管理员帐户来打开文件。关闭打开文件后，账户恢复到客户的原始账户。

我发现它可以通过这个链接在 ASP.NET 中的 C# 中完成：

[如何将登录用户更改为另一个用户？](https://stackoverflow.com/questions/2567573/how-do-i-change-the-logged-in-user-to-another)

想知道我们是否可以在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:09:18.103

您可以通过 Runetim.exec() 调用 RUNAS 以其他用户身份执行任务

```
RUNAS USAGE:

RUNAS [ [/noprofile | /profile] [/env] [/savecred | /netonly] ]
        /user:<UserName> program

RUNAS [ [/noprofile | /profile] [/env] [/savecred] ]
        /smartcard [/user:<UserName>] program

RUNAS /trustlevel:<TrustLevel> program

   /noprofile        specifies that the user's profile should not be loaded.
                     This causes the application to load more quickly, but
                     can cause some applications to malfunction.
   /profile          specifies that the user's profile should be loaded.
                     This is the default.
   /env              to use current environment instead of user's.
   /netonly          use if the credentials specified are for remote
                     access only.
   /savecred         to use credentials previously saved by the user.
                     This option is not available on Windows 7 Home or Windows 7 Starter Editions
                     and will be ignored.
   /smartcard        use if the credentials are to be supplied from a
                     smartcard.
   /user             <UserName> should be in form USER@DOMAIN or DOMAIN\USER
   /showtrustlevels  displays the trust levels that can be used as arguments
                     to /trustlevel.
   /trustlevel       <Level> should be one of levels enumerated
                     in /showtrustlevels.
   program         command line for EXE.  See below for examples

Examples:
> runas /noprofile /user:mymachine\administrator cmd
> runas /profile /env /user:mydomain\admin "mmc %windir%\system32\dsa.msc"
> runas /env /user:user@domain.microsoft.com "notepad \"my file.txt\"" 
```

[http://ss64.com/nt/runas.html](http://ss64.com/nt/runas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:45:57.977

如果您使用的是 Java EE，我认为您可以使用 @RunAs 注释（但我没有尝试过）： [http ://docs.oracle.com/javaee/6/api/javax/annotation/security/RunAs.html](http://docs.oracle.com/javaee/6/api/javax/annotation/security/RunAs.html)

编辑：

这里是更多关于 JAAS“doAs”的链接，但我还没有研究过：http: [//docs.oracle.com/javase/7/docs/technotes/guides/security/jaas/JAASRefGuide.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jaas/JAASRefGuide.html)

# plsql - PL/SQL: ORA-00942: 表或视图不存在

> ID：13236788
> 
> 赞同：1
> 
> 时间：2012-11-05T17:01:43.350
> 
> 标签：plsql

当我尝试运行他的脚本部分时，在 Oracle 11G 中收到此错误**“PL/SQL：ORA-00942：表或视图不存在” 。**似乎 select 语句没有从游标中解析变量的名称。需要帮助以确保这可以从游标中读取表名变量。

```
DECLARE
  ITEM_ERROR     NUMBER;
  CNT_SITE       VARCHAR2(46);

  CURSOR C_SITEID IS
     SELECT OBJECTNAME,ATTRIBUTENAME FROM MAXATTRIBUTE    WHERE ATTRIBUTENAME LIKE 'SITE%'   GROUP BY OBJECTNAME,ATTRIBUTENAME, COLUMNNAME;            
     SITEIDRec    C_SITEID%RowType;

 BEGIN
 BEGIN
 OPEN C_SITEID;
 LOOP
   FETCH C_SITEID into SITEIDRec;
   EXIT WHEN C_SITEID %NOTFOUND;
       BEGIN  
         SELECT COUNT(SITEID) into CNT_SITE FROM SITEIDRec.OBJECTNAME
          WHERE  SITEID  IN ('COLLEGE NANO SCI ENG-TGCM','FREESCALE-BALAZS','TGCM-GLOBAL FOUNDRIES','INTL RECTIFIER-TGM','TGCM-DMOS5','TGCM-IMFT','TGCM-TRIQUINT','GP-TRIQUINT');
       EXCEPTION
          WHEN NO_DATA_FOUND THEN NULL;
       END;
 END LOOP;
 --COMMIT;
 CLOSE C_SITEID;
 --COMMIT;
 EXCEPTION
    WHEN NO_DATA_FOUND THEN NULL;
 END;
 --COMMIT;
  EXCEPTION
    WHEN OTHERS THEN
    MSG_TEXT := SUBSTR(SQLERRM,1,200);
  --COMMIT;
   raise;
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:05:21.827

我认为您在查询中`FROM TableName` **遗漏**了，因此抱怨是正确的。

```
SELECT COUNT(SITEID) into SITEIDRec.OBJECTNAME
      WHERE SITEID IN 
             ('COLLEGE NANO SCI ENG-TGCM','FREESCALE-BALAZS',
               'TGCM-GLOBAL FOUNDRIES','INTL RECTIFIER-TGM','TGCM-DMOS5',
               'TGCM-IMFT','TGCM-TRIQUINT','GP-TRIQUINT'); 
```

请通过添加 来更正您的查询`From TableName`。

编辑：尝试使用`EXECUTE IMMEDIATE`如下

```
 EXECUTE IMMEDIATE 'SELECT COUNT(SITEID) into CNT_SITE FROM ' 
                    || SITEIDRec.OBJECTNAME ||
         ' WHERE SITEID IN (''COLLEGE NANO SCI ENG-TGCM'',''FREESCALE-BALAZS'',
               ''TGCM-GLOBAL FOUNDRIES'',''INTL RECTIFIER-TGM'',''TGCM-DMOS5'',
               ''TGCM-IMFT'',''TGCM-TRIQUINT'',''GP-TRIQUINT'')'; 
```

# javascript - 下一个/上一个按钮 onClick 滚动到下一个和上一个

> ID：13236793
> 
> 赞同：0
> 
> 时间：2012-11-05T17:01:54.630
> 
> 标签：javascript, button, scroll, next

我仍在学习 JavaScript，需要一些帮助。我正在制作下一个和上一个按钮，这些按钮会导致滚动到`<td>`页面上的下一个或上一个。我正在尝试将其应用于 virb 站点的现有结构。标记如下所示：

```
div id="next">next</div><div id="prev">prev</div>
<table>
<tr><td>code that includes img</td></tr>
<tr><td>code that includes img</td></tr>
<tr><td>code that includes img</td></tr>
<tr><td>code that includes img</td></tr>
<tr><td>code that includes img</td></tr>
</table> 
```

这是我正在使用的脚本：

```
jQuery.easing.def = "easeInOutQuad";
    $("#next").click(function (){
        //$(this).animate(function(){
            $('html, body').animate({
                scrollLeft: $("td").next.offset().left
                 }, 600);
        //});

    });​ 
```

这是我正在研究[的 jsFiddle](http://jsfiddle.net/garretthaas/kzqVp/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:06:31.943

尝试：

```
 scrollLeft: $("td").next().offset().left 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:39:59.107

以下跟踪您当前要查看的项目。你需要一个类似的东西来减少你的'prev'例程中的索引。

您可能还需要添加延迟或事件截止，以便动画期间的多次点击不会使 currentIdx 的值高于或低于您必须显示的项目范围。

```
var currentIdx = 0;
jQuery.easing.def = "easeInOutQuad";
        $("#next").click(function (){

            //$(this).animate(function(){
                $('html, body').animate({
                    scrollLeft: $("td").eq(currentIdx).offset().left
                     }, 600);
                currentIdx++;     
            //});
        }); 
```

# javascript - PDF 表单按钮边框更改 (Acrobat)

> ID：13236794
> 
> 赞同：0
> 
> 时间：2012-11-05T17:01:54.737
> 
> 标签：javascript, acrobat

在 Acrobat X 中创建 PDF 表单。该表单具有以网格样式列出的各种选择，我的客户希望单击其中一个选择以在选择周围绘制圆形或正方形。我已经尝试了各种方法来让它工作，但我一直遇到障碍。这是我到目前为止的位置：

我发现我可以在文本顶部放置一个按钮并将按钮的边框和填充设置为清除，并且没有为标签输入文本。这基本上使按钮成为文本顶部的完全透明框。

我想做的是：当点击透明按钮时，将边框颜色从透明更改为黑色，从而在单词周围创建一个框，看起来单词被包含在框中。如果我能获得有关如何执行此操作的一些指导，我还希望是否再次单击按钮以使黑色边框返回透明（以防初始单击错误完成。）

我假设这需要通过利用 PDF 的 javascript 功能并将其分配给按钮操作 Mouse Up 来完成。但是，**我必须承认我不知道实现此目的的代码是什么**。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:39:57.687

我可能会就此与您联系，但可以在以下位置找到有用的资源：

[http://partners.adobe.com/public/developer/en/acrobat/sdk/pdf/javascript/AcroJSGuide.pdf](http://partners.adobe.com/public/developer/en/acrobat/sdk/pdf/javascript/AcroJSGuide.pdf)

这是 Adob​​e 对 PDF 表单的参考，包括在表单计算中使用的 Javascript 的信息。

本文档第 267 页是这样的：

**如何根据另一个值隐藏 Acrobat 表单字段？** 使用 Global 对象的显示方法：

```
var title = this.getField("title");
if (this.getField("showTitle").value == "Off")
title.display = display.hidden;
else
title.display = display.visible; 
```

五行代码可以到达某个地方。也许在字段的“计算”部分。

第 1 行：设置一个名为“title”的变量，它表示名为“title”的现有表单字段 第 2 行：启动“if”语句，查询名为“showTitle”的字段的值 第 3 行：如果 showTitle 的值为“Off” ，然后将字段“title”设置为隐藏第4,5行：否则，默认字段“title”的显示值为可见

如果此处称为“标题”的字段是一个文本框，您可以输入一些隐藏或可见的文本。我认为，如果没有填充颜色，您可能有一个带边框的空白字段，用作隐藏/可见边框。

“showTitle”字段可以是一个复选框，其中选中的值为“Off”。

我希望这有帮助。我现在正在自己尝试这个。

# java - paintComponent() 方法中的抗锯齿

> ID：13236797
> 
> 赞同：4
> 
> 时间：2012-11-05T17:02:10.667
> 
> 标签：java, string, swing, graphics, paintcomponent

我想使用该`paintComponent(..)`方法打印一些文本。

```
@Override
  protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.red);
    g.drawString("Hello world", 10, 10);
} 
```

但文字有些曲折。你怎么能在这种方法中强制使用[抗锯齿]绘制文本？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T17:13:21.343

您可以通过以下方式设置双缓冲：

```
class MyPanel extends JPanel {
    public MyPanel() {
        super(true);//set Double buffering for JPanel
    }
} 
```

或者干脆打电话 [`JComponent#setDoubleBuffered(..)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setDoubleBuffered%28boolean%29)。

您还可以为*抗锯齿*和*文本*抗锯齿等对象设置`RenderingHint`s，以通过以下方式提高 Swing 绘画质量：`Graphics2D`

 **```
 @Override
  protected void paintComponent(Graphics g) {
    super.paintComponent(g); 
    Graphics2D graphics2D = (Graphics2D) g;

    //Set  anti-alias!
    graphics2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON); 

   // Set anti-alias for text
    graphics2D.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
            RenderingHints.VALUE_TEXT_ANTIALIAS_ON); 

    graphics2D.setColor(Color.red);
    graphics2D.drawString("Hello world", 10, 10);
} 
```**

# segmentation-fault - Fortran：在函数中调用子例程

> ID：13236799
> 
> 赞同：1
> 
> 时间：2012-11-05T17:02:13.277
> 
> 标签：segmentation-fault, fortran, gfortran, fortran77

我正在构建一个程序，它必须在函数子程序中调用子程序，并且能够在主程序中调用相同的子程序。

```
 program main
 implicit double precision (a-h,o-z)
 parameter (ncmax=20)
 dimension z(ncmax)

 xI=1.0
 xII=2.0
 z(1)=1.0

 outI = fncn (xI,xII,z,ncmax)

 call Sub (xI,xII,xIII,z)
 outII = 2.0*xIII

 end program

 function fncn (xI,xII,z,ncmax)
 implicit double precision (a-h,o-z)
 dimension z(ncmax)

 Call Sub (xI,xII,xIII,z)
 fncn = xIII

 return
 end function

 subroutine Sub (xI,xII,xIII,z)
 parameter (ncmax=20)
 implicit double precision (a-h,o-z)
 dimension z(ncmax) 

 xIII = xI + xII + z(1)

 return 
 end subroutine 
```

这都是固定格式的 fortran 77（'.f' 扩展名）。我收到的错误是分段错误。我是否应该像本网站上的其他一些帖子所建议的那样制作一个模块？我还是个初学者，不知道怎么在77中做一个模块。子程序必须能在函数和主程序中访问。我当前的程序结构将函数和子例程分成两个单独的 .f 文件，并在 main 的末尾使用 include 语句。

我在这个网站上搜索了类似的问题，只能找到有关 fortran 90 的帮助。我使用的是 gcc 4.6.1 中的 gfortran。

**编辑**：我解决了这个问题。我试图在函数中调用的子例程具有数字和字符输出。我忽略了字符输出并且没有字符定义的变量来处理字符输出。一旦我在函数中定义了一个字符变量，一切正常。谢谢大家的耐心和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:19:42.513

如果您真的不必使用 FORTRAN 77，请不要使用它。`IMPLICIT`即使在 Fortran 77 中也别想了！`IMPLICIT NONE`几乎所有 FORTRAN 77 编译器中都作为扩展存在。在过去的 25 或 30 年中，在所有健全的代码中几乎都是必需的。这是 60 年代甚至 70 年代早期缩短代码的方式。

将所有子例程和函数放在模块`use`中，这将确保您正确调用它们，或者至少不是完全错误。这是 Fortran 90 及更高版本的发展方向。只有当你真的需要时才避免它。

return 语句是多余的，子程序无论如何都返回 et end，它还应该做什么呢？

最后，在编译您的代码时，我还没有发现任何错误或编译器警告。我什至用过`valgrind`。我还使用了 gfortran-4.5.4 和 gfortran-4.6.3 以及 Linux 上的 Solaris Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:33:53.100

我同意 Vladimer F 的观点。隐式输入是有害的。还有使用模块 为什么使用 FORTRAN 77 改进版本的 Fortran 已经有这么多年了？当我尝试时，您的程序有效。这是 Fortran 90 的快速且最少的翻译：

```
module my_subs

implicit none

contains

function fncn (xI,xII,z,ncmax)
integer :: ncmax
double precision :: z(ncmax)
double precision :: xI, xII, xIII
double precision :: fncn

Call Sub (xI,xII,xIII,z,ncmax)
fncn = xIII

return
end function

subroutine Sub (xI,xII,xIII,z,ncmax)
integer :: ncmax
double precision :: z(ncmax)
double precision :: xI, xII, xIII

xIII = xI + xII + z(1)

return
end subroutine

end module my_subs

program main
use my_subs
implicit none
integer, parameter :: ncmax=20
double precision :: z(ncmax)
double precision :: xI, xII, xIII, outI, outII

xI=1.0
xII=2.0
z(1)=1.0

outI = fncn (xI,xII,z,ncmax)

call Sub (xI,xII,xIII,z,ncmax)
outII = 2.0*xIII

write (*, *) outII

end program 
```

# php - 在单独的类中验证，还是作为编写器类的方法？

> ID：13236804
> 
> 赞同：1
> 
> 时间：2012-11-05T17:02:18.263
> 
> 标签：php, oop, validation

是否应该使用单独的类而不是数据库写入类来完成输入验证？还是应该是写作类的方法？

例如。（速记版）

```
class DBWrite {

   public function add($input) {
       $data = new Validator($input);
       if($data->isValid() == true) {
           // write to DB
       }
   }

} 
```

还是将验证作为 DBWrite 类的一部分会更好？或者在关注点分离（或其他）方面是否违反了太多？

```
class DBWrite {

   public function add($input) {
       if($this->inputIsValid() == true) {
           // write to DB
       }
   }

   private function inputIsValid() {
       // Check that input is valid and return true if it is
   }
} 
```

任何其他想法也将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:04:31.220

如果 Validator 可以在 DBWrite 以外的其他类中使用，或者如果以后您可能想要换出验证器，我会走单独的 Validator 类和子类的路线。您可能还想在 DBWrite 中添加一个方法来设置/获取您的验证器类，以便您可以在运行时换出不同的验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:14:37.323

您不需要在该级别进行验证。该对象可以被存储，或者它处于数据库层拒绝它的状态 - 然后您将看到数据库异常。

数据库本身通常会确保数据的顺序正确且有效。

但请确保您可以在每次将对象从一层传递到另一层时加倍工作并进行验证 - 并确保您在两层上都这样做：在第一层的输出侧和第二层的输入侧。

但通常只需要输入验证和数据库验证。

输入验证意味着，当对象来自存储层时验证对象，而不是在将它们放入存储层时验证。

此外，输入验证自然意味着您验证来自其他输入源的对象。但是在这里，不是在存储时。

# google-chrome-extension - 从内容脚本注入中排除 url

> ID：13236817
> 
> 赞同：1
> 
> 时间：2012-11-05T17:03:11.943
> 
> 标签：google-chrome-extension

我试图弄清楚如何从内容脚本注入中排除 url。

用于测试目的的代码如下：

```
"content_scripts": [
{
    "exclude_globs": ["*"],
    "js" : ["jquery.min.js", "markdown.js", "main.js"],
    "css" : ["main.css"],
    "matches": [ "file:///*.md", "file:///*.markdown", "*://*/*.md", "*://*/*.markdown"]
} 
```

这似乎可以防止 javascript 注入，但无论如何都会注入样式表。

我一直在阅读一些**exclude_globs**和**exlude_matches**错误，所以我开始认为这实际上是某种错误。

任何形式的帮助将不胜感激。

# php - 如何修复 PHP 中格式错误的 JSON？

> ID：13236819
> 
> 赞同：5
> 
> 时间：2012-11-05T17:03:28.027
> 
> 标签：php, mysql, json

我得到一个 JSON 格式的数据馈送，并且是唯一可用的格式。在 PHP 中，我使用 json_decode 来解码 JSON，但它被破坏了，我发现 JSON 是在某些地方生成的，在一个人的昵称中带有双引号。我使用以下方法验证了这一点：http: [//jsonformatter.curiousconcept.com](http://jsonformatter.curiousconcept.com)

我无法控制数据的创建，但是当它发生时我必须处理这种损坏的格式。解析后的数据将被放入 MySQL TABLE 中。

例如：

```
"contact1": "David "Dave" Letterman", 
```

json_decode 将返回 NULL。如果我手动保存文件，并将其更改为戴夫昵称周围的单引号，那么一切正常。

```
$json_string = file_get_contents($json_download);
$json_array = json_decode($json_string, true); 
```

如何在 json_decode 处理之前修复 json_string 中损坏的 JSON 格式？应该如何预处理文件，反斜杠昵称的双引号？或者将它们更改为单引号？在 MySQL 中存储这样的双引号是个好主意吗？

我不知道每个数据馈送何时会发生这种情况，所以我不想只检查 contact1 是否有内部双引号来修复它们。PHP中有没有办法像上面的例子那样取一行，并在冒号后面的所有内容都反斜杠，除了外部双引号？谢谢！

这是 tftd 提供的正确代码：

```
<?php
// This:
// "contact1": "David "Dave" Letterman",
// Needs to look like this to be decoded by JSON:
// "contact1": "David \"Dave\" Letterman",

$data ='"contact1": "David "Dave" Letterman",';
function replace($match){
    $key = trim($match[1]);
    $val = trim($match[2]);

    if($val[0] == '"')
        $val = '"'.addslashes(substr($val, 1, -1)).'"';
    else if($val[0] == "'")
        $val = "'".addslashes(substr($val, 1, -1))."'";

    return $key.": ".$val;
}
$preg = preg_replace_callback("#([^{:]*):([^,}]*)#i",'replace',$data);
var_dump($preg);
$json_array = json_decode($preg);
var_dump($json_array);
echo $json_array . "\n";
echo $preg . "\n";
?> 
```

这是输出：

```
string(39) ""contact1": "David \"Dave\" Letterman","
NULL

"contact1": "David \"Dave\" Letterman", 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-17T04:20:31.223

我有一个自己的 jsonFixer() 函数 - 它分两个步骤工作：删除垃圾（用于不连贯格式的相等性）和重新格式化。

```
<?php
  function jsonFixer($json){
    $patterns     = [];
    /** garbage removal */
    $patterns[0]  = "/([\s:,\{}\[\]])\s*'([^:,\{}\[\]]*)'\s*([\s:,\{}\[\]])/"; //Find any character except colons, commas, curly and square brackets surrounded or not by spaces preceded and followed by spaces, colons, commas, curly or square brackets...
    $patterns[1]  = '/([^\s:,\{}\[\]]*)\{([^\s:,\{}\[\]]*)/'; //Find any left curly brackets surrounded or not by one or more of any character except spaces, colons, commas, curly and square brackets...
    $patterns[2]  =  "/([^\s:,\{}\[\]]+)}/"; //Find any right curly brackets preceded by one or more of any character except spaces, colons, commas, curly and square brackets...
    $patterns[3]  = "/(}),\s*/"; //JSON.parse() doesn't allow trailing commas
    /** reformatting */
    $patterns[4]  = '/([^\s:,\{}\[\]]+\s*)*[^\s:,\{}\[\]]+/'; //Find or not one or more of any character except spaces, colons, commas, curly and square brackets followed by one or more of any character except spaces, colons, commas, curly and square brackets...
    $patterns[5]  = '/["\']+([^"\':,\{}\[\]]*)["\']+/'; //Find one or more of quotation marks or/and apostrophes surrounding any character except colons, commas, curly and square brackets...
    $patterns[6]  = '/(")([^\s:,\{}\[\]]+)(")(\s+([^\s:,\{}\[\]]+))/'; //Find or not one or more of any character except spaces, colons, commas, curly and square brackets surrounded by quotation marks followed by one or more spaces and  one or more of any character except spaces, colons, commas, curly and square brackets...
    $patterns[7]  = "/(')([^\s:,\{}\[\]]+)(')(\s+([^\s:,\{}\[\]]+))/"; //Find or not one or more of any character except spaces, colons, commas, curly and square brackets surrounded by apostrophes followed by one or more spaces and  one or more of any character except spaces, colons, commas, curly and square brackets...
    $patterns[8]  = '/(})(")/'; //Find any right curly brackets followed by quotation marks...
    $patterns[9]  = '/,\s+(})/'; //Find any comma followed by one or more spaces and a right curly bracket...
    $patterns[10] = '/\s+/'; //Find one or more spaces...
    $patterns[11] = '/^\s+/'; //Find one or more spaces at start of string...

    $replacements     = [];
    /** garbage removal */
    $replacements[0]  = '$1 "$2" $3'; //...and put quotation marks surrounded by spaces between them;
    $replacements[1]  = '$1 { $2'; //...and put spaces between them;
    $replacements[2]  = '$1 }'; //...and put a space between them;
    $replacements[3]  = '$1'; //...so, remove trailing commas of any right curly brackets;
    /** reformatting */
    $replacements[4]  = '"$0"'; //...and put quotation marks surrounding them;
    $replacements[5]  = '"$1"'; //...and replace by single quotation marks;
    $replacements[6]  = '\\$1$2\\$3$4'; //...and add back slashes to its quotation marks;
    $replacements[7]  = '\\$1$2\\$3$4'; //...and add back slashes to its apostrophes;
    $replacements[8]  = '$1, $2'; //...and put a comma followed by a space character between them;
    $replacements[9]  = ' $1'; //...and replace by a space followed by a right curly bracket;
    $replacements[10] = ' '; //...and replace by one space;
    $replacements[11] = ''; //...and remove it.

    $result = preg_replace($patterns, $replacements, $json);

    return $result;
  }
?> 
```

使用示例：

```
<?php
  // Received badly formatted json:
  // {"contact1": "David "Dave" Letterman", price : 30.00, 'details' : "Greatest 'Hits' Album"}
  $json_string = '{"contact1": "David "Dave" Letterman", price : 30.00, \'details\' : "Greatest \'Hits\' Album"}';
  jsonFixer($json_string);
?> 
```

将导致：

```
{"contact1": "David \"Dave\" Letterman", "price" : "30.00", "details" : "Greatest \'Hits\' Album"} 
```

注意：这没有使用所有可能的格式错误的 JSON 字符串进行测试，但我在复杂的多级 JSON 字符串上使用，并且在此之前运行良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:06:44.333

正如其他人已经指出的那样，最好告诉客户 JSON 格式存在问题。要求他们将错误报告发送给原始开发人员/公司，以便他们修复它。如果他/他们无法解决 - 然后提供您的解决方案。你只需要`addslashes`在你之前的字符串`json_encode`。

如果由于某种原因您最终不得不进行`fix`格式化，这里有一种可能对您有用的方法：

```
$data = '"contact1": "David "Dave" Letterman", "contact2": "Peter "Robert" Smith",{\'test\': \'working "something"\'}';
function replace($match){
    $key = trim($match[1]);
    $val = trim($match[2]);

    if($val[0] == '"')
        $val = '"'.addslashes(substr($val, 1, -1)).'"';
    else if($val[0] == "'")
        $val = "'".addslashes(substr($val, 1, -1))."'";

    return $key.": ".$val;
}
$preg = preg_replace_callback("#([^{:]*):([^,}]*)#i",'replace',$data);
var_dump($preg);
// string '"contact1": "David \"Dave\" Letterman", "contact2": "Peter \"Robert\" Smith",{'test': 'working \"something\"'}' (length=110) 
```

请记住，如果有人再次弄乱了 json 格式，这可能会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:12:38.890

告诉他们在输出前转义他们的字符串。您甚至可以提供修复它或提供代码解决方案。

否则，您可以将 preg_replace 与正则表达式一起使用

请参阅[用 preg_replace 替换文本中指定的双引号](https://stackoverflow.com/questions/12037289/replacing-specified-double-quotes-in-text-with-preg-replace)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:17:07.177

正如其他人所说，您可以进行搜索和替换，但困难的部分将是创建您的模糊匹配规则，因为为了解析它，您需要假设一些事情。可能，您需要假设：

1a) 键不包含冒号
1b) 或键引号被正确转义
和
2a) 值不包含逗号
2b) 或值已正确转义引号。

即使这样，您也可能会遇到解析混乱的情况，如果他们对 JSON 进行注释，情况会变得更糟。（不符合标准，但很常见。）

现在，根据数据，您可以使用换行符来决定何时查看新密钥，但同样，这并不可靠，您开始做出很大的假设。

因此，长话短说，您要么必须做出一些随时可能出错的假设，要么需要让他们修复数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-19T17:27:16.553

当逗号和 [] 在值中包含 json 字符串时，正则表达式不可靠，担心和噩梦开始。在[php json_decode 在 key 上没有引号的情况下失败](https://stackoverflow.com/questions/6941642/php-json-decode-fails-without-quotes-on-key)，建议使用 pear Services_JSON 如果为类名修复代码并且无效 json 的游戏结束，则可以实现最安全的结果：

```
<?php include("Services_JSON-1.0.3b/JSON.php"); 
//Patched version https://github.com/pear/Services_JSON/edit/trunk/JSON.php

$json = <<< JSONCODEFROMJS
   { 
      sos:presents, 
      james:'bond', 
      "agent":[0,0,7], 
      secret:"{mission:'impossible',permit: \"tokill\"}",
      go:true 
    }
JSONCODEFROMJS;

function json_fix($json) {
   $sjson = new Services_JSON(SERVICES_JSON_IN_ARR|SERVICES_JSON_USE_TO_JSON| SERVICES_JSON_LOOSE_TYPE);
   $json_array=$sjson->decode($json);
   return json_encode($json_array);
}

$json_array = json_decode(json_fix($json),true);

if(json_last_error() == JSON_ERROR_NONE) {

   $json=json_encode($json_array,JSON_PRETTY_PRINT);
   echo "<pre>";
   echo(htmlentities($json));
   echo "</pre>";
} else {
   die(json_last_error_msg());
}
?> 
```

# php - 等待表级锁

> ID：13236823
> 
> 赞同：1
> 
> 时间：2012-11-05T17:03:51.333
> 
> 标签：php, mysql, select, locking

在对这个主题做了一些功课之后，我发现如果我想让 mysql 在不等待锁的情况下进行选择，我应该运行：

```
"SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED" 
```

在我的查询之前。

理论上，这应该像 SELECT NOLOCK 一样工作。

在实践中，我可能会在查看我仍然看到的 show processlist 时遗漏一些东西：

```
"Waiting for table level lock" 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:08:11.140

您要求读取未提交的更改，这并不意味着该表未锁定。

然而，它的意思是，一旦表被更改它的进程解锁，您将能够读取尚未看到`COMMIT`.

# jquery-ui-sortable - JQuery 可排序不会落在溢出列表项上

> ID：13236824
> 
> 赞同：1
> 
> 时间：2012-11-05T17:03:55.310
> 
> 标签：jquery-ui-sortable

我有两个列表 - 第一个包含用户可以选择的项目列表，他通过将它们拖动到第二个列表来选择它们。我已经使用 jQuery UI Sortable 实现了这一点，并在[jsfiddle](http://jsfiddle.net/halm/Fr7hN/1/)上创建了一个基本示例。

所以将一个项目从第一个列表拖到第二个列表 - 好的。如果您向下滚动到第二个列表的底部，则会出现问题 - 您无法将项目从第一个列表拖动到第二个列表。似乎所有超出可见列表末尾的列表项都没有与之关联的放置目标。在另一个方向复制时也会发生同样的情况。

由于 sortable 似乎针对列表，我怀疑我错过了一个技巧。有任何想法吗？

jsfiddle 示例代码是：

**html**

```
<div class="listDiv">
    <ul id="list1" class="connected ui-sortable">
        <li id="a">a</li>
        <li id="b">b</li>
        <li id="c">c</li>
        <li id="d">d</li>
        <li id="e">e</li>
        <li id="f">f</li>
        <li id="g">g</li>
        <li id="h">h</li>
        <li id="i">i</li>
        <li id="j">j</li>
    </ul>
</div>
<div class="listDiv">
    <ul id="list1" class="connected ui-sortable">
        <li id="1">1</li>
        <li id="2">2</li>
        <li id="3">3</li>
        <li id="4">4</li>
        <li id="5">5</li>
        <li id="6">6</li>
        <li id="7">7</li>
        <li id="8">8</li>
        <li id="9">9</li>
        <li id="10">10</li>
        <li id="11">11</li>
        <li id="12">12</li>
        <li id="13">13</li>
        <li id="14">14</li>
        <li id="15">15</li>
    </ul>
</div> 
```

**js**

```
$(function() {
   $( "#list1, #list2" ).sortable({
        connectWith: ".connected"
    }).disableSelection();
}); 
```

**css**

```
.listDiv {
    overflow:auto; 
    float: left; 
    width:400px;
    border: 1px solid #999;
}

#list1, #list2 {
    list-style-type: none;
    height: 200px;
}

#list1 li, #list2 li {
    font-size: 11px;
    margin: 0 5px 5px;
    padding: 5px;
    width: 300px;
    border: 1px solid #C5DBEC;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    font-weight: bold;
    outline: medium none;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:52:20.060

我相信我已经确定了引入错误的 jquery ui 可排序版本 - 1.8.12。以下代码似乎会导致错误：

`//We ignore calculating positions of all connected containers when we're not over them if(item.instance != this.currentContainer && this.currentContainer && item.item[0] != this.currentItem[0]) continue;`

我已经在 jquery ui bug [4231](http://bugs.jqueryui.com/ticket/4231)上报告了这个问题，希望他们会重新打开这个（未修复的）错误并在未来的版本中修复它。

因此，如果您正在努力解决这个问题，您可以检查错误是否已修复，或者恢复到 jquery ui 1.8.11，或者删除上面提到的违规代码并希望最好！

# c# - 以编程方式锁定 VSS

> ID：13236825
> 
> 赞同：1
> 
> 时间：2012-11-05T17:03:58.013
> 
> 标签：c#, visual-sourcesafe

我的公司目前使用 VSS 5.0（我知道......很糟糕）。我们正在寻找一种以编程方式锁定所有用户的方法。我查看了 API，除了签出之外找不到任何方法来锁定任何内容。

基本上我想阻止所有用户在某个时间段内签到。除了摆脱 VSS 之外还有什么想法吗？

正在寻找用 C# 编写应用程序的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:18:20.400

没有 API 可以做到这一点。最简单的方法是删除 VSS 共享，执行您需要的操作，然后将共享备份。[这](http://www.ckollars.org/backup.html#force)是一个批处理脚本的链接，您可以从 C# 代码中调用该脚本。

# ios - 二进制详细信息选项显示法语本地化！ios应用！苹果

> ID：13236826
> 
> 赞同：0
> 
> 时间：2012-11-05T17:03:58.327
> 
> 标签：ios, app-store-connect

我刚刚上传了我的第一个苹果应用商店批准 iOS 应用程序，我在完成所有内容后登录并在二进制详细信息页面中，在本地化中我看到（“英语”，“法语”），但我不支持法语也没有在 info.plist 中添加了任何本地化或提及任何内容。

我还添加了一个自定义类，因为在上传二进制文件后我注意到了一个文件 CustomClass.strings(French)！

所以我的第一个问题是：是否因为这个 .strings 文件，我在二进制详细信息页面中看到了法语？第二个是我应该删除它并上传一个新的二进制文件，因为我不希望我的应用程序被拒绝！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:06:33.940

即使是单个本地化文件也可能触发该行为 - 您当然希望解决问题并重新提交您的应用程序。

# mercurial - 如果已经安装了（更新的）mercurial，是否可以/建议安装 TortoiseHg？

> ID：13236827
> 
> 赞同：1
> 
> 时间：2012-11-05T17:03:59.197
> 
> 标签：mercurial, tortoisehg

我已经搜索了文档，但我仍然不清楚是否可以在已经安装了 mercurial 的机器上安装 TortoiseHG。特别是我[在常见问题解答](http://tortoisehg.bitbucket.io/manual/2.5/faq.html)中发现安装程序捆绑了 Mercurial。但是，另一方面，从源代码构建需要（显然）[hg clone the repository](https://bitbucket.org/tortoisehg/thg/wiki/thg)。

我的问题是我安装了最新版本的 Mercurial（截至 2012 年 11 月，它是 2.4），而所有当前可用的 THG 版本都引用了以前的版本。例如，

```
2012-10-01: TortoiseHg 2.5.1 (with Mercurial 2.3.2) released 
```

从2012 年 11 月的新闻中可以[看出。](http://tortoisehg.bitbucket.io/)

最好的行动方案是什么？我目前已经安装了 hg 2.4，并且我已经创建了一个本地存储库，我正在通过命令行处理它。有可能是我漏掉了网上的相关信息：如果有，请指出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:27:51.227

Mercurial 团队非常努力地向后兼容；查看[发行说明](https://www.mercurial-scm.org/wiki/WhatsNew#Mercurial_2.4_.282012-11-1.29)，了解 2.4 中是否有任何内容可能对 Mercurial 2.3.x 客户端到 2.4 存储库产生影响。TortoiseHg 团队非常善于跟上 Mercurial 的新版本，因此您无需等待太久即可看到基于 Mercurial 2.4 的新版本 TortoiseHg。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T19:37:00.867

最好的做法是保持现状。根据 Mercurial 2.4 的[升级说明](https://www.mercurial-scm.org/wiki/UpgradeNotes#A2.4:_minor_changes)，自 2.3 以来，只有书签处理发生了不兼容的更改。因此，存储库仍应在版本之间兼容。

在未来的升级中，您最好等待 TortoiseHg 赶上最新版本的 Mercurial。除非您需要安全更新或关键修复，否则几乎没有理由如此努力地升级。此外，如果您经常使用 GUI，则无需单独升级 Mercurial。

# javascript - 迭代主干集合时更新 DOM？

> ID：13236828
> 
> 赞同：1
> 
> 时间：2012-11-05T17:04:05.720
> 
> 标签：javascript, backbone.js, coffeescript

所以我试图在渲染非常大的集合时显示一个加载栏。当页面最初加载时，我有一个加载栏的占位符，我正在尝试像这样更新它：

```
addAll: 
  @collection.each(((obj, index) ->
    @addOne(obj, index)), this
  )

addOne: (obj, index) ->
  percent_complete = ((index / @collection.length) * 100)
  $(".loading_bar").width("#{percent_complete}%")
  # Proceed with rendering, create the view, etc 
```

这里的问题是 DOM 在`addAll`函数完成之前不会更新。我有一种感觉，这是我不了解一些基本的 JS 基础知识。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:36:04.873

是的，您缺少一些基本的东西：在您的代码将控制权返回给浏览器之前，浏览器不会做任何自己的工作。

考虑一些这样的代码：

```
collection = [1..1000]

addOne = (index) ->
  $('#n').text(index + 1)
  percent_complete = ((index + 1) / collection.length) * 100
  $("#bar").width("#{percent_complete}%")

addOne(i) for e,i in collection  
console.log('done') 
```

您会看到短暂的停顿，然后`#bar`会`#n`更新并`done`出现在控制台中。演示： http: [//jsfiddle.net/ambiguous/f5qKV/](http://jsfiddle.net/ambiguous/f5qKV/)（您可能需要增加 1000 以使事情更明显）。

但是，如果您[`setTimeout(..., 0)`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在每次迭代时将控制权返回给浏览器：

```
collection = [1..1000]

addOne = (index) ->
  $('#n').text(index + 1)
  percent_complete = ((index + 1) / collection.length) * 100
  $("#bar").width("#{percent_complete}%")

i = 0
timeOut = ->
    if(i == collection.length)
        console.log('done')
        return
    addOne(i++)
    setTimeout(timeOut, 0)
setTimeout(timeOut, 0) 
```

您将能够看到`#bar`和`#n`更改，然后`done`当一切完成后您将在控制台中看到。演示：http: [//jsfiddle.net/ambiguous/UCbY8/1/](http://jsfiddle.net/ambiguous/UCbY8/1/)

请注意，该`setTimeout`版本使用`setTimeout`回调来触发下一次超时，以确保一切都以与简单`for`或`each`循环中相同的顺序发生。

教训是，如果你想使用那种进度指示器，你必须添加一些老式的伪合作多任务处理技巧。

* * *

将控制权交还给浏览器也会让您在不期望的情况下接受用户交互。如果你走这条路，你可能想要添加一个通用的 UI 阻止程序，以防止人们在你工作时点击东西。

# javascript - 使用 JavaScript 创建 Div 到 Div

> ID：13236829
> 
> 赞同：1
> 
> 时间：2012-11-05T17:04:06.057
> 
> 标签：javascript, html, cross-browser

我有这个代码[代码](http://jsfiddle.net/Mils/vmzRB/4/)。

它在 jsfiddle 中工作，但是当我在我的文件中测试它时出现问题，它不起作用。

我只显示了 html 创建的前三行：

测试 h1

测试 h2

测试 p

（我在不同的浏览器中测试了代码，javascript 是有效的，但同样的问题）。

代码 ：

```
 var div2= document.createElement('div');  
    div2.className = "div2" ;
    var h1 = document.createElement('h1');
    h1.innerHTML= "test h1" ;
    var h2 = document.createElement('h2');
    h2.innerHTML= "test h2" ;
    var p = document.createElement('P');
    p.innerHTML= "p2" ;            
    div2.appendChild(h1);
    div2.appendChild(h2);
    div2.appendChild(p);
   document.getElementById('div1').appendChild(div2); 
```

谢谢你。​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:09:43.223

在您自己的应用程序中运行此代码之前，您可能没有等待 Document 加载。尝试将您的代码包装在此块中。

```
window.onload = function() {
    [your code here]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:13:16.973

问题可能与您运行脚本时有关。在您的 jsFiddle 中，您使用项目默认值保存（这意味着您的代码在 onLoad 事件期间被调用，并且包含 MooTools 库）。

如果我将您的项目切换到 No Wrap (head) 和 No-Library (pure JS)，代码将停止工作。

原因是您试图在 DOM 完全加载到内存之前对其进行处理。您需要在页面底部运行脚本（您可以通过将下拉菜单更改为 No Wrap (body) 在 jsFiddle 中模拟），或者在浏览器中触发 onLoad 事件后运行：

```
window.onload = function(){
        var div2= document.createElement('div');  
        div2.className = "div2" ;
        var h1 = document.createElement('h1');
        h1.innerHTML= "test h1" ;
        var h2 = document.createElement('h2');
        h2.innerHTML= "test h2" ;
        var p = document.createElement('P');
        p.innerHTML= "p2" ;            
        div2.appendChild(h1);
        div2.appendChild(h2);
        div2.appendChild(p);
       document.getElementById('div1').appendChild(div2);
}; 
```

当 onLoad 事件被触发，当 DOM 准备好访问时，它将运行它。

看到这个小提琴：http: [//jsfiddle.net/mori57/jzBpK/](http://jsfiddle.net/mori57/jzBpK/)

# jsf - JSF：将组件与更改的渲染器与其他命名空间一起使用

> ID：13236831
> 
> 赞同：0
> 
> 时间：2012-11-05T17:04:08.357
> 
> 标签：jsf, jsf-2, primefaces, custom-component, taglib

我为 primefaces 组件编写了一个新的渲染器，现在我想让这个“新”组件在新的命名空间下可用：

我为此创建了一个新的标签库：

```
<facelet-taglib xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
version="2.0">
<namespace>http://www.whitebyte.com/commentbox</namespace>
<tag>
    <tag-name>tree</tag-name>
    <component>
        <component-type>org.primefaces.component.Tree</component-type>
        <renderer-type>commentbox.CustomTreeRenderer</renderer-type>
    </component>
    <attribute>
        <description><![CDATA[Unique identifier of the component in a namingContainer.]]></description>
        <name>id</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[Boolean value to specify the rendering of the component, when set to false component will not be rendered.]]></description>
        <name>rendered</name>
        <required>false</required>
        <type>java.lang.Boolean</type>
    </attribute>
    <attribute>
        <description><![CDATA[An el expression referring to a server side UIComponent instance in a backing bean.]]></description>
        <name>binding</name>
        <required>false</required>
        <type>javax.faces.component.UIComponent</type>
    </attribute>
    <attribute>
        <description><![CDATA[Name of the client side widget.]]></description>
        <name>widgetVar</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[A TreeNode instance as the backing model.]]></description>
        <name>value</name>
        <required>false</required>
        <type>java.lang.Object</type>
    </attribute>
    <attribute>
        <description><![CDATA[Name of the request-scoped variable that'll be used to refer each treenode data during rendering.]]></description>
        <name>var</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[Specifies the ajax/client toggleMode. Default is false.]]></description>
        <name>dynamic</name>
        <required>false</required>
        <type>java.lang.Boolean</type>
    </attribute>
    <attribute>
        <description><![CDATA[Specifies caching on dynamically loaded nodes. When set to true expanded nodes will be kept in memory. Default is true.]]></description>
        <name>cache</name>
        <required>false</required>
        <type>java.lang.Boolean</type>
    </attribute>
    <attribute>
        <description><![CDATA[Javascript event to process when a tree node is clicked.]]></description>
        <name>onNodeClick</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[TreeNode array to reference the selections.]]></description>
        <name>selection</name>
        <required>false</required>
        <type>java.lang.Object</type>
    </attribute>
    <attribute>
        <description><![CDATA[Style of the main container element of tree.]]></description>
        <name>style</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[Style class of the main container element of tree.]]></description>
        <name>styleClass</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[Defines the selectionMode.]]></description>
        <name>selectionMode</name>
        <required>false</required>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <description><![CDATA[Highlights nodes on hover when selection is enabled, set to false to disable highlighting.]]></description>
        <name>highlight</name>
        <required>false</required>
        <type>java.lang.Boolean</type>
    </attribute>
    <attribute>
        <description><![CDATA[Unique key of the data presented by tree nodes.]]></description>
        <name>datakey</name>
        <required>false</required>
        <type>java.lang.Object</type>
    </attribute>
    <attribute>
        <description><![CDATA[When enabled, Displays slide effect during toggling of a node.]]></description>
        <name>animate</name>
        <required>false</required>
        <type>java.lang.Boolean</type>
    </attribute>
</tag> 
```

我也在 faces-config.xml 中添加了渲染：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>commentbox.CustomTreeRenderer</renderer-type>
        <renderer-class>commentbox.CustomTreeRenderer</renderer-class>
    </renderer>
</render-kit> 
```

在 eclipse 中也可以看到新组件，但是当我在浏览器中打开页面时，我得到：

```
javax.faces.FacesException: Cannot find component with identifier "tree" referenced from "j_idt62:j_idt76".
    at org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:273)
    at org.primefaces.util.AjaxRequestBuilder.addIds(AjaxRequestBuilder.java:102)
    at org.primefaces.util.AjaxRequestBuilder.update(AjaxRequestBuilder.java:90)
    at org.primefaces.renderkit.CoreRenderer.buildAjaxRequest(CoreRenderer.java:196)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeMarkup(CommandButtonRenderer.java:74)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeEnd(CommandButtonRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:59)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
    at org.primefaces.component.outputpanel.OutputPanelRenderer.encodeEnd(OutputPanelRenderer.java:46)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:59)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
    at org.primefaces.component.outputpanel.OutputPanelRenderer.encodeEnd(OutputPanelRenderer.java:46)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:78)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:07:00.080

解决方案是创建“整个”组件并将其注册到 taglib 中，如下所述：

[https://stackoverflow.com/a/10569044/441907](https://stackoverflow.com/a/10569044/441907)

（我没有注册 taglib 只是将它放入 META-INF 中的工作类）。

# vim - 防止 CtrlP 切换到子模块目录中的搜索

> ID：13236832
> 
> 赞同：1
> 
> 时间：2012-11-05T17:04:10.990
> 
> 标签：vim, macvim, vim-plugin

我仍在学习像专业人士一样使用 vim。在此过程中，我注意到当我在项目目录中的子模块中打开文件时，CtrlP 插件会将搜索的根切换到子模块目录的根。有没有办法防止这种情况并将根搜索目录保留为原始项目之一或最初打开的那个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T18:20:47.410

您可能想要调整`g:ctrlp_working_path_mode`设置。在我看来，您很可能只想完全禁用此功能并手动设置您的工作目录`:cd`。

从[GitHub 上](https://github.com/kien/ctrlp.vim/blob/master/doc/ctrlp.txt#L165-183)的当前 ctrlp 文档：

```
When starting up, CtrlP sets its local working directory according to this
variable: 

  let g:ctrlp_working_path_mode = 'ra'

  c - the directory of the current file.
  a - like "c", but only applies when the current working directory outside of
      CtrlP isn't a direct ancestor of the directory of the current file.
  r - the nearest ancestor that contains one of these directories or files:
      .git .hg .svn .bzr _darcs
  w - begin finding a root from the current working directory outside of CtrlP
      instead of from the directory of the current file (default). Only applies
      when "r" is also present.
  0 or <empty> - disable this feature.

Note #1: if "a" or "c" is included with "r", use the behavior of "a" or "c" (as
a fallback) when a root can't be found.

Note #2: you can use a |b:var| to set this option on a per buffer basis. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-16T23:32:15.660

在您的 .vimrc 中，您必须通过设置更改 CtrlP 行为：

```
let g:ctrlp_working_path_mode = 'rw' 
```

使用此设置，它将在外部当前工作目录中查找版本控制文件。

然后在处理您的项目之前，您将 dir 更改为其主文件夹，main .git 所在的位置或其中的一个目录（不是在子模块中）：

```
:cd my/project/main/path 
```

如果您在子模块中打开一个文件，并且在点击 Cp 时，如果当前的工作目录在子模块之外，它仍然会使用您的主 .git 所在的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T19:38:10.613

我有这些映射在我的`~/.vimrc`：

```
nnoremap <leader>f :CtrlP<CR>
nnoremap <leader>F :CtrlPCurWD<CR> 
```

如果我想在项目中的任何位置打开文件，我使用第一个，如果我想打开附近的文件，我使用第二个。

# jquery - jQuery插件imagemapster没有做任何事情

> ID：13236848
> 
> 赞同：4
> 
> 时间：2012-11-05T17:05:00.893
> 
> 标签：jquery, image, imagemap, imagemapster

我对 javascript 和 jQuery 还比较陌生，所以请记住，这可能是一个我看不到的明显解决方案。

我引用了 jQuery，它适用于其他事情。也许 imagemapster 参考有问题？[我在这里](http://www.outsharked.com/imagemapster/)下载它并像这样引用它。我也放入了“imagemapster.min.js”，但是当两者都在时它不起作用，当它们中的任何一个单独使用时它也不起作用。

```
<script type="text/javascript" src="../SiteAssets/css/jquery.imagemapster.js"></script>
<script type="text/javascript" src="../SiteAssets/css/jquery.imagemapster.min.js"></script> 
```

我阅读了文档并几乎完全遵循了它（见下文），但它实际上对突出显示没有任何作用。相反，它会稍微弄乱它们的定位，从而破坏页面，这是没有意义的，因为 mapster 应该与定位无关。可点击区域也已向上移动并移出位置。它甚至没有给出任何错误；代码只是通过，除了我说的什么都没有发生。是的，我要强调的图像地图功能齐全，#downstairs、#upstairs 和 #offices 确实是图像标签的 ID，就像它们应该是的那样。

```
$(document).ready(function()
{
    $('#downstairs').mapster({
        fillOpacity: 0.5,
        mapKey: 'alt',
        isSelectable: false,
        render_highlight:
        {
            fillColor: '2aff00'
        }
    });

    $('#upstairs').mapster({
        fillOpacity: 0.5,
        mapKey: 'alt',
        isSelectable: false,
        render_highlight:
        {
            fillColor: '2aff00'
        }
    });

    $('#offices').mapster({
        fillOpacity: 0.5,
        mapKey: 'alt',
        isSelectable: false,
        render_highlight:
        {
        fillColor: '2aff00'
        }
    });
}); 
```

这是图像和地图的 html。他们三个都使用这种格式。

```
<div style="position:static;left:0px;top:0px">
<img id="downstairs" alt="downstairs" class="map" usemap="#downmap" style="visibility:visible;z-index:3; left: 10px; top: 54px;"
    src="sourceHere" width="1000" />
<map name="downmap" id="downmap">
    <!-- There is a large list of areas here that follow this format-->
    <area title="Portable 1" onclick="somefunction" coords="198,81,223,117" />
</map>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-10T14:18:32.280

检查您的地图区域是否定义了 href。例如：href="#"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T20:39:56.770

在将脚本移到地图下方之前，我遇到了类似的问题。我在文档中找不到它，但我记得读过要使插件工作，必须先加载图像。您仍然需要在头部调用插件，但您需要将 javascript 放在图像映射之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:19:24.090

当我第一次尝试 ImageMapster 时，我没有正确设置路径。您的区域路径必须从上到下环绕对象，然后从左到右，然后从下到上，直到它在开始时再次相遇。一旦我这样做了，ImageMapster 就“做了一些事情”。在我找到正确的路径之前，它看起来就像什么都没有发生。

您还必须告诉`image`使用`map`.

```
<div id="mapblock">
    <img id="map_image" src="/images/map.png" usemap="#map_map"/>
    <map name="map_map">
        <area data-key="AZ" full="item" href="#" coords="... " shape="poly" />
    </map>
</div> 
```

此外，您在代码中使用的 ID# 应该是 an`image`的 ID，而不是地图的 ID。

此外，请确保您的地图区域在图像内（您可能必须设置`width`图像的，你知道的）否则悬停效果将不会显示。当我第一次尝试时，直到我确定我的区域在正确的位置之前，我什么也没看到。

我在这里写了一个使用 Photoshop 和 Illustrator生成的[迷你教程。](https://stackoverflow.com/questions/13845958/how-to-get-the-path-coordinates-of-a-shape-for-use-with-image-maps)`image-map`这对我来说效果很好，而且`image-map`位置非常完美。

**[在 OP 发布 imagemap html 之后]**

> `<area title="Portable 1" onclick="somefunction" coords="198,81,223,117" />`

啊，你的坐标很匹配，我想。把坐标想象成一条线。您已经描述了行的开头加上另一点 - 您必须告诉它进行完整循环。试试这个，看看会发生什么：

'coords="198,81, 223,117, 198,81"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-27T05:38:35.723

对于 imagemapster 使用 jquery 2.1.3

```
<!-- not this
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->

<!-- use this one -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script> 
```

对于图像映射器

```
<script src="http://www.outsharked.com/scripts/jquery.imagemapster.js"></script> 
```

我也发生了同样的情况，图像地图悬停在更改版本后最终没有显示或工作正常。

供参考尝试下面的代码：

```
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

<script src="http://www.outsharked.com/scripts/jquery.imagemapster.js"></script>

<div style="clear: both; width: 500px; height: 50px; border: 1px solid black;" id="selections"></div>
<img id="vegetables" src="http://www.outsharked.com/imagemapster/examples/images/vegetables.jpg" usemap="#veg">
<map id="veg_map" name="veg">
    <area shape="poly" name="redpepper" coords="412,156, 427,161, 429,163, 444,153, 453,155, 457,159, 452,168, 459,174, 455,178, 460,179, 463,193, 460,203, 441,214, 436,217, 458,238, 469,257, 479,267, 478,269, 479,285, 458,309, 436,310, 414,305, 410,323, 397,334, 379,313, 389,316, 401,320, 399,305, 382,300, 371,290,
    367,296, 366,298,
    338,274, 332,272, 300,239, 316,238, 316,234, 313,230, 328,225, 333,213, 338,196, 333,181, 337,166, 345,145" href="#">
    <area shape="poly" name="celery" coords="147,131, 156,143, 163,146, 177,129, 175,138, 177,138, 182,144, 180,164, 148,169, 139,171, 144,180, 141,198, 139,208, 140,222, 127,237, 148,216, 163,212, 166,216, 160,223, 163,233, 153,281, 135,318, 129,313, 122,322, 117,320, 99,301, 98,293, 85,300, 80,303, 74,300,
    64,285, 76,272, 98,249,
    94,246, 72,261, 57,258, 62,251, 60,248, 47,228, 51,207, 71,195, 72,192, 38,202, 33,195, 30,173, 147,127" href="#">
    <area shape="poly" name="carrots" coords="175,74, 170,80, 154,85, 189,103, 190,111, 182,111, 179,98, 157,95, 142,111, 140,128, 38,169, 39,163, 74,143, 74,141, 56,135, 52,115, 79,111, 78,106, 63,98, 71,91, 81,88, 82,83, 91,75, 136,74, 174,70" href="#">
    <area shape="poly" name="asparagus" coords="224,25, 239,33, 244,36, 247,32, 327,23, 344,31, 343,36, 319,41, 315,42, 302,52, 272,61, 265,64, 270,73, 256,67, 248,60, 187,55, 192,58, 192,60, 184,64, 185,67, 176,67, 173,69, 142,67, 146,63, 135,59, 123,57, 142,44, 145,42, 143,39, 145,32, 207,38, 185,18, 212,19,
    220,22" href="#">
    <area shape="poly" name="squash" coords="388,26, 391,38, 394,43, 395,46, 425,58, 427,68, 428,92, 386,125, 371,132, 374,124, 377,118, 374,105, 371,105, 370,107, 364,102, 368,97, 356,87, 353,89, 348,86, 322,87, 314,100, 314,102, 282,85, 278,84, 273,74, 272,68, 319,46, 346,31" href="#">
    <area shape="poly" name="yellowpepper" coords="237,222, 246,254, 255,291, 262,323, 271,322, 285,350, 306,352, 307,365, 298,374, 285,366, 270,375, 249,378, 244,384, 231,389, 215,373, 210,363, 203,357, 199,368, 184,361, 175,349, 162,356, 140,340, 143,305, 161,252, 168,224, 188,240, 194,223, 198,232, 213,226, 224,224,
    229,218" href="#">
    <area shape="poly" name="broccoli" coords="341,89, 342,91, 360,95, 353,100, 360,104, 364,109, 368,115, 369,112, 367,110, 376,111, 373,123, 367,128, 362,128, 359,131, 348,134, 345,137, 340,138, 341,148, 334,167, 323,172, 315,165, 315,162, 312,165, 311,172, 293,167, 292,141, 298,136, 307,134, 322,129, 328,128,
    329,116, 319,109, 314,104,
    317,93, 332,84" href="#">
    <area shape="poly" name="broccoli" coords="328,178, 338,197, 337,202, 330,215, 328,217, 325,228, 307,234, 305,239, 287,225, 287,216, 286,212, 282,216, 277,212, 277,185, 284,179, 310,175" href="#">
    <area shape="poly" name="dip" coords="253,102, 277,100, 280,105, 290,107, 295,111, 304,130, 290,140, 287,147, 240,157, 238,159, 227,153, 203,146, 198,125, 200,116, 214,102, 231,102" href="#">

</map>

<script>
    // a cross reference of area names to text to be shown for each area
    var xref = {
        carrots: "<b>Carrots</b> are delicious and may turn your skin orange!",
        asparagus: "<b>Asparagus</b> is one of the first vegetables of the spring. " +
            "Being a dark green, it's great for you, and has interesting side effects.",
        squash: "<b>Squash</b> is a winter vegetable, and not eaten raw too much. Is that really squash?",
        redpepper: "<b>Red peppers</b> are actually the same as green peppers, they've just been left on " +
            "the vine longer. Delicious when fire-roasted.",
        yellowpepper: "Similar to red peppers, <b>yellow peppers</b> are sometimes sweeter.",
        celery: "<b>Celery</b> is a fascinating vegetable. Being mostly water, it actually takes your body " +
            "more calories to process it than it provides.",
        cucumbers: "<b>Cucumbers</b> are cool.",
        broccoli: "<b>Broccoli</b> is like a forest of goodness in your mouth. And very good for you. " +
            "Eat lots of broccoli!",
        dip: "Everything here is good for you but this one. <b>Don't be a dip!</b>"
    };

    var defaultDipTooltip = 'I know you want the dip. But it\'s loaded with saturated fat, just skip it ' +
        'and enjoy as many delicious, crisp vegetables as you can eat.';

    var image = $('#vegetables');

    image.mapster({
        fillOpacity: 0.4,
        fillColor: "d42e16",
        stroke: true,
        strokeColor: "3320FF",
        strokeOpacity: 0.8,
        strokeWidth: 4,
        singleSelect: true,
        mapKey: 'name',
        listKey: 'name',
        onClick: function(e) {
            var newToolTip = defaultDipTooltip;

            // update text depending on area selected
            $('#selections').html(xref[e.key]);

            // if Asparagus selected, change the tooltip
            if (e.key === 'asparagus') {
                newToolTip = "OK. I know I have come down on the dip before, but let's be real. " +
                    "Raw asparagus without any of that delicious ranch and onion dressing " +
                    "slathered all over it is not so good.";
            }
            image.mapster('set_options', {
                areas: [{
                    key: "dip",
                    toolTip: newToolTip
                }]
            });
        },
        showToolTip: true,
        toolTipClose: ["tooltip-click", "area-click"],
        areas: [{
            key: "redpepper",
            fillColor: "ffffff"
        }, {
            key: "yellowpepper",
            fillColor: "000000"
        }, {
            key: "carrots",
            fillColor: "000000"
        }, {
            key: "dip",
            toolTip: defaultDipTooltip
        }, {
            key: "asparagus",
            strokeColor: "FFFFFF"
        }]
    });
</script> 
```

# c# - 在代码中操作时如何强制列表框保留选择？

> ID：13236851
> 
> 赞同：2
> 
> 时间：2012-11-05T17:05:05.250
> 
> 标签：c#, wpf

我的 WPF C# 程序有一个列表框，其中包含用户可以操作的项目：更改顺序、复制/粘贴等。目前，当我在列表框中选择一个项目，然后单击上移按钮时，该项目将向上移动列表，但该项目不再突出显示或选择。因此，如果不重新选择列表框项，我将无法进行连续操作。

如何强制我的列表框保留它的选择和突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:35:31.363

如果它被选中但默认没有焦点，它会失去颜色

```
<Style.Resources>
    <!-- Background of selected item when focussed -->
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                     Color="Green"/>
    <!-- Background of selected item when not focussed -->
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                     Color="LightGreen" />
</Style.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:24:20.593

我会将 ListBox 的 ItemsSource 绑定到 ObservableCollection。然后您可以操作 ObservableCollection 并且 ListBox 将为您更新。这是一个例子：

XAML：

```
<Window x:Class="ListBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:ListBox="clr-namespace:ListBox" Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <ListBox:ListBoxViewModel />
    </Window.DataContext>
    <StackPanel>
        <Button Command="{Binding Up}">Up</Button>
        <Button Command="{Binding Down}">Down</Button>
        <ListBox Grid.Column="0" ItemsSource="{Binding Items}" SelectedIndex="{Binding SelectedIndex, Mode=TwoWay}" />
    </StackPanel>
</Window> 
```

和代码：

```
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows.Input;
using GalaSoft.MvvmLight.Command;

namespace ListBox
{
    public class ListBoxViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public ObservableCollection<string> Items {get; private set; }

        private void ExecuteUp()
        {
            if (SelectedIndex == 0)
                return;
            Items.Move(SelectedIndex, SelectedIndex - 1);
        }
        private void ExecuteDown()
        {
            if (SelectedIndex >= Items.Count - 1)
                return;
            Items.Move(SelectedIndex, SelectedIndex + 1);
        }

        public ICommand Up { get; private set; }
        public ICommand Down { get; private set; }

        private int m_SelectedIndex = 0;
        public int SelectedIndex
        {
            get { return m_SelectedIndex; }
            set
            {
                m_SelectedIndex = value;
                OnPropertyChanged("SelectedIndex");
            }
        }

        public ListBoxViewModel()
        {
            Items = new ObservableCollection<string>() {"London", "Paris", "Berlin"};
            Up = new RelayCommand(ExecuteUp);
            Down = new RelayCommand(ExecuteDown);
        }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

# eclipse - subeclipse 不显示与 svn 相同的版本

> ID：13236852
> 
> 赞同：0
> 
> 时间：2012-11-05T17:05:07.667
> 
> 标签：eclipse, svn, subclipse

svn 有点奇怪...

我在 Eclipse 中检查了一个带有 subclipse 的存储库 - 历史如下所示： ![在此处输入图像描述](../Images/290fd9d2c1612908cd9696c1acf5e5ab.png)

但是当我在命令行上更新时，我得到了这个：

```
pool188-239$svn up
At revision 1908. 
```

谁能告诉我为什么同一个项目的版本号不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:15:48.490

修订版 1906 是您的项目最后修改的修订版。

修订版 1908 是 Subversion 的当前修订版。当您对项目进行更新时，返回的修订号是 Subversion 的当前修订。

# javascript - 使用 Jasmine 测试平滑滚动

> ID：13236853
> 
> 赞同：1
> 
> 时间：2012-11-05T17:05:15.853
> 
> 标签：javascript, testing, scroll, jasmine

我正在使用 JS 脚本来实现平滑滚动。

我想知道有没有办法用 Jasmine 测试这个功能？

真的值得测试吗？

这是我正在使用的代码：

```
$('a[href*=#]').click(function(){
    $('html, body').animate({
        scrollTop: $( $(this).attr('href') ).offset().top
    }, 500);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:01:31.267

测试动画真的很棘手，我认为布局和动画不应该在单元测试中进行测试。但是你可以尝试 jasmine.Clock 来模拟时间。文档在~~[这里](http://pivotal.github.com/jasmine/jsdoc/symbols/jasmine.Clock.html)~~。

更新：

[这](https://jasmine.github.io/api/3.4/Clock.html)是时钟文档的更新链接

# javascript - jQuery/JavaScript 正则表达式匹配任意三个前字符，后跟一个确切的字符串

> ID：13236854
> 
> 赞同：0
> 
> 时间：2012-11-05T17:05:15.837
> 
> 标签：javascript, jquery, regex

我需要一个正则表达式来根据下拉列表的值来验证表单。但是，该值是由 PHP 随机生成的（但始终是 2 位数字）。

它需要对“38|One Evening”有效。数字 38 将发生变化。到目前为止，我有

```
//return value of dropdown
var priceOption = $("#price_option-4").val();

//make sure it ends with "One Evening"
var oneEvening = priceOption.match(/^ * + 'One Evening' $/); 
```

我认为只要后面跟着“一个晚上”就可以匹配任何字符串

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:07:09.137

字符串不能与正则表达式一起使用，您应该只在正则表达式文字内写下您想要匹配的内容，不带引号。

```
 /^\d{2}\|One Evening$/.test(priceOption);
//  ^^^^^^                          Begins with two digits
//        ^^                        Escaped the | meta char.
//          ^^^^^^^^^^^^            Then until the end: One Evening 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:09:00.677

为xx|一个晚上

```
/^\d{2}\|One Evening$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:08:22.143

只需使用

```
/^\d\d\|One Evening$/.test(priceOption); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:15:48.460

```
/^.+?One Evening$/ 
```

打破它

```
// ^ starts with
// . any character
// + quantifier - one or more of preceding character
// ? non-greedy - ensure regex stops at One Evening.
// One Evening = literal text
// $ match end of string. 
```

请注意，我的回答反映了匹配任何字符序列的要求，然后`One Evening`.

我认为您最好更加具体并确保您肯定有两个数字字符。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T17:16:34.013

如果可以，最好具体一点。尝试以下操作：

```
// <start of string> <2 digits> <|One Evening> <end of string>
/^\d{2}\|One Evening$/.test( priceOption ); 
```

# maven - maven-ejb-plugin：包括生成的源

> ID：13236857
> 
> 赞同：5
> 
> 时间：2012-11-05T17:05:23.457
> 
> 标签：maven

我有一个 EJB-maven-Project，它有一些生成的类（由 JAXB 生成）。它们生成为：`target/generated-sources/jaxb/`

现在，使用 maven-ejb-plugin 我希望将它们（即它们的编译类）包含到客户端 jar 中，如下所示：

```
 <plugin>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <!-- Tell Maven we are using EJB 3.1 -->
                <ejbVersion>3.1</ejbVersion>
                <generateClient>true</generateClient>
                <clientIncludes>
                    <clientInclude>com/bla/ch/authorization/client/**</clientInclude>
                    <clientInclude>target/generated-sources/jaxb/**</clientInclude>
                </clientIncludes>
            </configuration>
        </plugin> 
```

这不起作用，生成的类不是 ejb-client-jar 的一部分。（虽然它们在 ejb-jar 中）。我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:10:39.123

在你的 jar 中包含源代码可能不是一个好的解决方案。

您可以在资源位置添加生成的源，然后使用 source-plugin 生成所谓的 artifact-sources.jar

```
<resources>
    <resource>
        <directory>${basedir}/target/generated-sources</directory>
        <filtering>true</filtering>
    </resource>
</resources>
     [...]
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这比使用源代码生成 jar 更好。

# c# - 通过 XSLT 处理 RSS XML 时保持 HTML 编码

> ID：13236858
> 
> 赞同：0
> 
> 时间：2012-11-05T17:05:49.407
> 
> 标签：c#, xslt, rss, console-application, html-encode

我正在开发一个 Windows 控制台应用程序，它读取 XML RSS 提要并通过 XSLT 文件对其进行翻译。其中一个 RSS 节点内容是 HMTL 编码的，下面是一个示例：

```
<description>&lt;b&gt;When:&lt;/b&gt; Monday, November 05, 2012 - 10:00 AM&lt;br&gt;&lt;b&gt;Where:&lt;/b&gt; Red Mountain Branch&lt;br&gt;&lt;br&gt;Where: The Roadrunner Room&lt;br /&gt;&lt;br /&gt;Our Job Lab is open to help you with:&lt;br /&gt;&lt;br /&gt;&#149; Job searching&lt;br /&gt;&#149; Creating resumes and cover letters&lt;br /&gt;&#149; Completing online job applications&lt;br /&gt;&#149; Providing interview tips&lt;br /&gt;&#149; Exploring your career interests&lt;br /&gt;&#149; Improving computer skills&lt;br /&gt;&#149; Increasing workplace skills and marketability.&lt;br /&gt;&#149; Marketing through Social Media&lt;br /&gt;&#149; GETTING HIRED!&lt;br /&gt;&lt;br /&gt;Need more information:&lt;br /&gt;&lt;br /&gt;Email: MesaLibJHH@gmail.com&lt;br /&gt;Twitter: @MesaLibJHH&lt;br /&gt;Facebook: www.facebook.com/MesaLibraryJobHelpHub&lt;br /&gt;&lt;br /&gt;</description> 
```

这是我用来翻译文件的 XSLT 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:transform version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <xsl:output method="html" indent="yes" encoding="ISO-8859-1" />
  <xsl:strip-space elements="category" />
  <xsl:template match="/">
      <xsl:for-each select="rss">
          <xsl:for-each select="channel">
              <rssItems>
                  <xsl:for-each select="item">
                      <item>
                          <title>
                              <xsl:value-of select="title"/>
                          </title>
                          <description>
                              <xsl:value-of select="description"/>
                          </description>
                          <category>
                              <xsl:for-each select="category">
                                  <xsl:value-of select="text()"/>,
                              </xsl:for-each>
                          </category>
                          <link>
                              <xsl:value-of select="link"/>
                          </link>
                          <guid>
                              <xsl:value-of select="guid"/>
                          </guid>
                      </item>
                  </xsl:for-each>
              </rssItems>
          </xsl:for-each>
      </xsl:for-each>
  </xsl:template>
</xsl:transform> 
```

`<xsl:value-of select="description" />`在处理 RSS 提要时，我需要对保留 HTML 编码进行哪些修改？

# c++ - C++ Qt - QTcpSocket 发出 readyRead() 但 canReadLine() 始终为假

> ID：13236859
> 
> 赞同：0
> 
> 时间：2012-11-05T17:05:52.857
> 
> 标签：c++, python, qt, client

我正在用 C++ 编写一个客户端，用 Python 编写一个服务器。

服务器接受来自客户端的连接，并将其播放器 ID 号发送给客户端，格式为正则表达式“id\s\d”。（例如“id 3”）

```
 if s is serversocket:
            print "Listening..."
            if accept_connection or nb_player < 5:
                connection, client_address = s.accept();
                print 'New connection from ', client_address
                connection.setblocking(0)
                inputs.append(connection)
        # Send player I to new connection
        connection.send("id "+str(len(inputs)-1)) 
```

客户端初始化其套接字，并连接。我实现`connected()`了在 GUI 上显示一条消息，如果它发出的话。它发出没有问题。在服务器端也是一样，我收到连接没有问题。

```
Window::Window(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Window)
{
    ui->setupUi(this);

    /* Initialize socket */
    socket = new QTcpSocket(this);
    socket->connectToHost("localhost", 13456);

    connect(socket, SIGNAL(readyRead()), this, SLOT(data_received()));
    connect(socket, SIGNAL(connected()), this, SLOT(connected()));
} 
```

服务器从客户端接收数据没有问题。**是客户端没有正确接收信息。**

```
void Window::data_received(){

    QRegExp id_re("id\\s(\\d)");

    while (socket->canReadLine()){
        /* Read line in socket (UTF-8 for accents)*/
        ui->log->append("listening...");
        QString line = QString::fromUtf8(socket->readLine()).trimmed();

        /* Player ID returned by server */
        if ( id_re.indexIn(line) != -1){
            //Test
            ui->log->append("The ID arrived");
            //Extract ID
            QString id_str = id_re.cap(1);
            //Put in data structure of player
            player->set_player_id(id_str);
            //Display message
            ui->log->append(QString("You are Player "+ player->get_player_id()));

        }
    }
} 
```

`get_player_id()`返回一个`QString`

我将我的问题作为目标，似乎 canReadLine() 永远不会返回 true，因此我永远无法阅读它。是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:19:29.930

这是因为`canReadLine()`寻找`"\n"`. Python 不会自动添加它，因此，我的字符串没有行尾。只需添加`"\n"`Python 代码即可解决我的问题。

# jquery - 多级选择框的 mcDropdown 替代品

> ID：13236866
> 
> 赞同：1
> 
> 时间：2012-11-05T17:06:16.747
> 
> 标签：jquery, html, jquery-plugins

我将[mcDropdown](http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm)用于我的多级选择框，但处理多级有时非常棘手。我想知道是否有任何推荐的替代品？

# ios5 - 更改索引处的颜色绘图符号 - CorePlot

> ID：13236871
> 
> 赞同：0
> 
> 时间：2012-11-05T17:06:31.583
> 
> 标签：ios5, core-plot

当用户触摸绘图符号时，我尝试添加绘图符号的标签。如何更改此绘图符号的颜色。这是我添加绘图符号标签的代码

```
 - (void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex (NSUInteger)index {

if(symbolTextAnnotation) {
    [graph.plotAreaFrame.plotArea removeAnnotation:symbolTextAnnotation];
    [symbolTextAnnotation release];
    symbolTextAnnotation = nil;
}
if ([(NSString *)plot.identifier isEqualToString:@"TOTAL"]) {

    // Setup a style for the annotation
    CPTMutableTextStyle *hitAnnotationTextStyle = [CPTMutableTextStyle textStyle];
    hitAnnotationTextStyle.color    = [CPTColor whiteColor];
    hitAnnotationTextStyle.fontSize = 14.0f;
    hitAnnotationTextStyle.fontName = @"SourceSansPro-Bold";

    // Determine point of symbol in plot coordinates
    NSNumber *x          = [[plotData objectAtIndex:index] valueForKey:@"x"];
    NSNumber *y          = [[plotData objectAtIndex:index] valueForKey:@"y"];
    NSArray *anchorPoint = [NSArray arrayWithObjects:x, y, nil];

    // Add annotation
    // First make a string for the y value
    NSNumberFormatter *formatter = [[[NSNumberFormatter alloc] init] autorelease];
    [formatter setMaximumFractionDigits:2];
    NSString *yString = [formatter stringFromNumber:y];

    // Now add the annotation to the plot area
    CPTTextLayer *textLayer = [[[CPTTextLayer alloc] initWithText:[[currencySymbol objectAtIndex:index] stringByAppendingFormat: yString] style:hitAnnotationTextStyle] autorelease];
    symbolTextAnnotation              = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:graph.defaultPlotSpace anchorPlotPoint:anchorPoint];
    symbolTextAnnotation.contentLayer = textLayer;
    symbolTextAnnotation.displacement = CGPointMake(0.0f, 20.0f);

    [graph.plotAreaFrame.plotArea addAnnotation:symbolTextAnnotation]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:27:24.683

在您的数据源中实现该`-symbolForScatterPlot:recordIndex:`方法。为您希望具有特殊外观或在该索引处`nil`绘制标准绘图符号（`plotSymbol`属性）的每个索引返回一个绘图符号。`-reloadData`每当您需要更新绘图符号时调用绘图。

# sharepoint - 负载平衡服务器中匿名用户的 SharePoint 和 WCF

> ID：13236873
> 
> 赞同：0
> 
> 时间：2012-11-05T17:06:31.897
> 
> 标签：sharepoint

我有一个 WCF Web 服务，我正在通过该服务将文档上传到 SharePoint 站点。在我的暂存服务器中，它可以在单个服务器上正常工作，但在生产中，我们有四个服务器处于负载平衡状态，它给了我错误...

接收对[http://jai-dms-app.rajdiscoms.com:1111/_vti_bin/Discom/Service.svc](http://jai-dms-app.rajdiscoms.com:1111/_vti_bin/Discom/Service.svc)的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

请帮我 ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:11:11.090

您遇到问题的原因很可能是由于环回检查。您将需要更新注册表以修复该问题 [http://support.microsoft.com/kb/926642/en-us](http://support.microsoft.com/kb/926642/en-us) 您可能还需要确保您的负载平衡具有粘性会话

# python - 蟒蛇替换; with , 如果行以关键字开头

> ID：13236875
> 
> 赞同：0
> 
> 时间：2012-11-05T17:06:37.223
> 
> 标签：python, replace

我有一个包含数千个条目的文本文件，例如：

```
@INBOOK{Abu-Lughod1991,
  chapter = {Writing against culture},
  pages = {137-162},
  title = {Recapturing anthropology},
  publisher = {School of American Research Press},
  year = {1991},
  editor = {Richard Fox},
  author = {Abu-Lughod, Lila},
  address = {Santa Fe /NM},
  abstract = {Im Zusammenhang mit der Debatte um die writing culture fomuliert AL
        eine feministische Kritik und zeigt, wie von dort doch Anregungen
        für die Reflektion der Schreibweise und Repräsentation gekommen sind.*},
  crossref = {Rabinow1986},
  keywords = {Frauen; Feminismus; Erzählung als EG; Repräsentation; Roman; Schreibtechnik;
        James Clifford; writing culture; Dialog;},
  owner = {xko},
  systematik1 = {Anth\theor\Ethnographie},
  systematik2 = {Anth\theor\Text & Ges},
  timestamp = {1995-12-02}
} 
```

我会将关键字 - 字段中的所有分号替换为逗号。但仅在关键字字段中 - 其他字段应保持不变：

```
keywords = {Frauen, Feminismus, Erzählung als EG, Repräsentation, Roman, Schreibtechnik, James Clifford, writing culture, Dialog,}, 
```

我不是程序员，也许下面的代码片段是一个很好的起点，如果有人能完成它，我将不胜感激。

```
outfile = open("literatur_comma.txt", "w") 
for line in open("literatur_semicolon.txt", "r"): 
    if line  # starts with "keywords" replace all semicolon with comma
        outfile.write(line) # write in new file
outfile.close() 
```

非常感谢！

编辑：感谢您的所有答案和代码，太好了！我的想法犯了一个错误，如果我使用我的代码包装器（带有输出文件），那么它会创建一个包含关键字的新文件。如何使用相同的文件并仅将分号替换为关键字行中的逗号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:10:56.570

像这样的东西适用于单行。

```
if line.strip().startswith('keywords'):
    line = line.replace(';',',')
outfile.write(line) 
```

但是，如果关键字在您的实际文本文件中跨越多行，这将无法完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:11:45.827

```
outfile = open("literatur_comma.txt", "w") 
for line in open("literatur_semicolon.txt", "r"): 
    if line.startswith('keywords'):  # starts with "keywords" replace all semicolon with comma
        outfile.write(line.replace(';',',')) # write in new file
outfile.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:54:21.473

**使用 pyparsing**

注意：这是一种方法，但大脑没有处于解析模式 - 所以这是一个*想法*而不是*正确的*答案......它当然需要一些工作，但很可能是正确的方向......

使用`pyparsing`... 的一个有点混乱的例子（可能会更好，有一些 @INBOOK 和 wotsit 检查和解析，但无论如何......）

```
from pyparsing import *

keywords = originalTextFor(Keyword('keywords') + '=')
values = delimitedList(Regex('[^;}]+'), ';')
values.setParseAction(lambda L: ', '.join(L)) 
```

`text`你的例子在哪里：

```
>>> print values.transformString(text)
@INBOOK{Abu-Lughod1991,
  chapter = {Writing against culture},
  pages = {137-162},
  title = {Recapturing anthropology},
  publisher = {School of American Research Press},
  year = {1991},
  editor = {Richard Fox},
  author = {Abu-Lughod, Lila},
  address = {Santa Fe /NM},
  abstract = {Im Zusammenhang mit der Debatte um die writing culture fomuliert AL
        eine feministische Kritik und zeigt, wie von dort doch Anregungen
        für die Reflektion der Schreibweise und Repräsentation gekommen sind.*},
  crossref = {Rabinow1986},
  keywords = {Frauen, Feminismus, Erzählung als EG, Repräsentation, Roman, Schreibtechnik, James Clifford, writing culture, Dialog;},
  owner = {xko},
  systematik1 = {Anth   heor\Ethnographie},
  systematik2 = {Anth   heor\Text & Ges},
  timestamp = {1995-12-02} 
```

# iphone - 为我的所有类添加自定义行为和状态

> ID：13236876
> 
> 赞同：0
> 
> 时间：2012-11-05T17:06:37.420
> 
> 标签：iphone, objective-c, oop

我想为我的所有课程添加功能和另一个属性。

* * *

所以我写了一个分类：

```
@implementation NSObject (MyCategory) 
```

我在其中声明了一个静态属性：

```
static MyObj myObj; 
```

我创建了 2 个类方法来获取和设置它：

```
+ (MyObj) getMyObj {
    return myObj;
}

+ (void) setMyObj:(MyObj)obj {
    myObj = obj;
} 
```

现在我在我的 .pch 文件中导入了 NSObject+MyCategory.h，所以所有的类都会受此影响。事实上，所有类现在都有新的功能和状态：

```
#import "NSObject+MyCategory.h" 
```

* * *

问题是当我设置 myObj 时，它会更改所有类的 myObj。所有类共享 1 个 myObj。

**我希望每个类都有自己的 myObj**，它是使用该类别添加的。我不想要一个 myObj，而是想要与类一样多的 myObj。每个类都应该有自己的 myObj。

谢谢，努尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:14:32.160

您不能将~~属性~~实例变量添加到类别中的类。子类 NSObject 或使用[关联对象](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocAssociativeReferences.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:23:41.507

您的解决方案添加了*一个*静态变量（不是“属性”，在 Objective-C 中意味着别的东西），没有办法使用类别为每个类添加一个静态变量。

但是，您的想法与适合您的想法很接近；如果您只能拥有一个变量并且想要存储多个值，您可以使用什么？一本字典。

```
static NSMutableDictionary *References;

+ (void) load
{
   // load is called exactly once when this category is first loaded,
   // setup the dictionary
   References = [NSMutableDictionary new];
}

+ (void) setMyObj:(MyObj)reference
{
   // NSMutableDictionary will take any object reference as a key,
   // for a class method self is a reference to the unique class object,
   // so use self as the key and store the reference
   [References setObject:reference forKey:self];
}

+ (MyObj) getMyObj
{
   // returns previously stored reference or nil if there isn't one for this class
   return [References objectForKey:self];
} 
```

高温高压

# coderush - 如何注释掉当前行？

> ID：13236882
> 
> 赞同：2
> 
> 时间：2012-11-05T17:07:01.360
> 
> 标签：coderush

有没有办法（快捷方式）快速注释掉 CodeRush 中的当前代码行？

我刚从 ReSharper 搬过来，这在这件事上似乎更直观。

是的 - 我知道注释掉代码选择的“/”快捷方式。我正在寻找可以满足我的要求而无需选择代码块的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:53:50.067

内置 VS Ctrl K Ctrl C 完成这项工作（和 Ctrl KU 删除评论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:48:57.337

目前，您需要选择包括前导空格在内的整行以使“/”快捷方式起作用。请参阅[这篇文章](http://skorkin.com/2010/11/selection-quick-commentuncomment/)以了解更多信息。

# html - Google bot 无法从我的博客中获取一些文本

> ID：13236883
> 
> 赞同：0
> 
> 时间：2012-11-05T17:07:07.487
> 
> 标签：html, wordpress

当我从蜘蛛的角度看到我的网站时[http://www.feedthebot.com/tools/spider/index.php](http://www.feedthebot.com/tools/spider/index.php)

字数很少，它不会将我的链接作为文本获取。我的博客地址是 zemtv .com

当我对我的其他网站 Dramasonline .com 执行相同的操作时

然后它以文本形式获取链接

请建议我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:24:39.317

可以证明是因为您的第一个网站中的链接包含该属性`rel="bookmark"`，而第二个则不包含。

我还会使用网站管理员工具网站中提供的“以 Google 方式获取”工具来检查该网站。

# android - 如何从 radiogroup 获取值到另一个活动？

> ID：13236886
> 
> 赞同：3
> 
> 时间：2012-11-05T17:07:09.540
> 
> 标签：android, android-activity, radio-button, radio-group

我想做一个新的活动，比如确认选中了哪个单选按钮。

*   我有 2 个电台组
*   每组至少有 10 个单选按钮
*   我想将选中的任何单选按钮的值带到下一个活动

并且肯定只能从每个单选组中选择一个单选按钮

这是我的 xml 代码，我想要 java 代码

```
 <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="391dp"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Where Are You" />

            <RadioGroup
                android:id="@+id/radioGroup0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:scrollbarStyle="insideOverlay"
                android:scrollbars="vertical" >

                <RadioButton
                    android:id="@+id/radio0"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="it" />

                <RadioButton
                    android:id="@+id/radio1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Eng" />

                <RadioButton
                    android:id="@+id/radio2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="there" />
                <RadioButton
                    android:id="@+id/radio3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="it" />

                <RadioButton
                    android:id="@+id/radio4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Eng" />

                <RadioButton
                    android:id="@+id/radio5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="there" />
                <RadioButton
                    android:id="@+id/radio6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="it" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Where Do You Want To Go" />

            <RadioGroup
                android:id="@+id/radioGroup1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:scrollbarStyle="insideOverlay"
                android:scrollbars="vertical" >

                <RadioButton
                    android:id="@+id/radio12"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="it" />

                <RadioButton
                    android:id="@+id/radio13"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Eng" />

                <RadioButton
                    android:id="@+id/radio14"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="there" />
                <RadioButton
                    android:id="@+id/radio15"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="it" />

                <RadioButton
                    android:id="@+id/radio16"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Eng" />

                <RadioButton
                    android:id="@+id/radio17"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="there" />

            </RadioGroup>

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="OK" />

        </LinearLayout>
    </ScrollView> 
```

我已经删除了一些单选按钮，所以它不会太长

请注意我是初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:19:40.517

首先，绑定 RadioGroup：

```
RadioGroup rg = (RadioGroup) findViewById(R.id.radioGroup1); 
```

然后获取被检查的按钮的位置：

```
int checked = rg.getCheckedRadioButtonId(); 
```

然后创建下一个活动的意图：

```
Intent intent = new Intent(this,nextActivity.class); 
```

然后把你要传递的信息放在intent上：

```
intent.putExtra("checked",checked); 
```

然后开始下一个活动：

```
startActivity(intent); 
```

在下一个活动中，您可以像这样恢复该信息：

```
Intent intent = getIntent();
int checked = intent.getIntExtra("checked"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:21:18.860

试试看；

```
 public void onCreate(Bundle savedInstanceState) {
            enter code here
            RadioGroup rg = (RadioGroup) findViewById(R.id.radioGroup1);
            String selectedRadioValue = ((RadioButton)findViewById(rg.getCheckedRadioButtonId() )).getText().toString();
            RadioGroup rg2 = (RadioGroup) findViewById(R.id.radioGroup2);
            String selectedRadioValue2 =((RadioButton)findViewById(rg.getCheckedRadioButtonId() )).getText().toString();

           Button btn = (Button) findViewById(R.id.buttonName);
           btn.setOnClickListener(new OnClickListener() {

                  @Override
                  public void onClick(View v) {
                  //enter code here for your control and
                      Intent intent = new Intent(getApplicationContext(), your.class);
                       intent.putExtra("radioGroup1Selected", selectedRadioValue);
                       intent.putExtra("radioGroup2Selected", selectedRadioValue2);
                      startActivity(intent);
                  }
             });

   } 
```

获得另一个活动：

```
Intent intent = getIntent();
String selectedRadioValue = intent.getStringExtra("selectedRadioValue");
String selectedRadioValue2 = intent.getStringExtra("selectedRadioValue2"); 
```

# verilog - 6bit ORgate Verilog

> ID：13236887
> 
> 赞同：0
> 
> 时间：2012-11-05T17:07:11.800
> 
> 标签：verilog

可以公平地说下一行将用作 6 位 OR 门。因此，当“列”的 6 位之一为高时，变量“ORgate”将为高：

```
 assign  ORgate = columns[0] || columns[1] || columns[2] || columns[3] || columns[4] || columns[5]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:12:46.323

它会，但是使用“减少运算符”有一种更短的方法：

```
 assign ORgate = |columns; 
```

# c# - C# 工作流项目中的 Sharepoint 工作流全局变量

> ID：13236889
> 
> 赞同：0
> 
> 时间：2012-11-05T17:07:19.413
> 
> 标签：c#, sharepoint-2010, workflow

过去，我使用 SharePoint Designer 开发了文档工作流并创建了“全局变量”。据我所知，这些是跨工作流实例的全局变量。

如何在 Visual Studio 工作流项目中创建等效的全局变量？我的第一个想法是在一个模块中创建一组这样的字段：

```
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <Field ID="{2FE15855-3CAB-44A6-AB29-1600204FCA20}" Name="TechRev1"
         MaxLength="255" DisplayName="Technical Reviewer 1" Description=""
         Direction="None" Type="User" Overwrite="TRUE" />
  <Field ID="{517B22A5-1B89-4C24-82BE-3D4FD99645BC}" Name="TechRev2"
         MaxLength="255" DisplayName="Technical Reviewer 2" Description=""
         Direction="None" Type="User" Overwrite="TRUE"/>
<Elements/> 
```

这是正确的方法吗？如何从 ASPX 表单访问任何全局变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:13:52.963

在 Visual Studio 中开发了我的工作流后，我得出的结论是，您应该结合使用 SharePoint 列表和类范围变量来保留工作流中的全局状态。

**你应该使用列表时..**

*   需要跨工作流中的许多不同类访问数据

**你应该使用类作用域变量......**

*   数据只需要一个类

*   数据是可以序列化的类型（原始类型，用[Serializable]标记的类型）。我的解决方案中有一种这样的类型：

    [可序列化] public class ReviewerBag { public Dictionary Reviewers { get; 放; } 公共字符串版主 { 获取；放; }

    ```
    public ReviewerBag()
    {
        Reviewers = new Dictionary<string,Reviewer>();
    }
    ... 
    ```

    }

*   如果工作流中的类之间需要数据，您仍然*可以*使用变量，但请注意，每次在类中声明变量时，当工作流空闲时（例如，当工作流等待用户完成任务时），它将被独立序列化）。变量变得不同步，因为它们在工作流恢复时独立反序列化。故事的寓意是在这种情况下使用列表来存储数据！

# android - 布局中的首选项屏幕

> ID：13236896
> 
> 赞同：0
> 
> 时间：2012-11-05T17:07:33.637
> 
> 标签：android, android-layout

在过去的几个小时里，我一直在发疯。无法正常工作：我有偏好、布局和活动。但我无法在布局中获得偏好...偏好：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <CheckBoxPreference 
       android:key="show_numbers"
       android:title="show tile numbers"
       android:summary="display the correct location of the tiles"
       android:defaultValue="false"   />
   <ListPreference
       android:key="grid_size"
       android:title="Grid Size"
       android:summary="puzzle size" 
       android:entries="@array/gridSizeTitles"
       android:entryValues="@array/gridSizeValues"
       android:defaultValue="3"  />
 </PreferenceScreen> 
```

布局：

```
 <RelativeLayout xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/mainbgcolor" xmlns:android="http://schemas.android.com/apk/res/android">

    <RelativeLayout
        android:id="@+id/relativeLayoutHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/txtvHeader"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:padding="20dip"
            android:text="Sliding Puzzle"
            android:textColor="#242FF0"
            android:textSize="20dip"
            android:textStyle="bold|normal" />

        <ImageView
            android:id="@+id/ivHeader"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/txtvHeader"
            android:contentDescription="Sliding Puzzle Icon"
            android:scaleType="fitCenter"
            android:src="@drawable/slidingpuzzleicon" />
    </RelativeLayout>

 <LinearLayout
        android:id="@+id/LinearLayoutContent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/relativeLayoutHeader"
        android:orientation="vertical" >

<!-- THIS IS THE PLACE I WANT TO GET THE PREFERENCE.
     I ALSO WANT BE ABLE TO POSITION THE PREFERENCE VIEWS. -->

   </LinearLayout>

</RelativeLayout> 
```

欢迎任何帮助。

在此先感谢，奥利夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:24:10.820

```
<!-- THIS IS THE PLACE I WANT TO GET THE PREFERENCE.
     I ALSO WANT BE ABLE TO POSITION THE PREFERENCE VIEWS. --> 
```

然后，您将需要为此绘制自己的 UI，而不是使用`PreferenceScreen`.

该`PreferenceScreen`系统背后的要点是提供一种收集偏好的标准化方式，以便用户知道期望什么以及 UI 是如何工作的。你想要的是实现一种非标准化的方式来收集偏好。欢迎您这样做，但您需要为此推出自己的 UI。

# ios - UINavigation 推送新的根控制器

> ID：13236904
> 
> 赞同：1
> 
> 时间：2012-11-05T17:07:59.190
> 
> 标签：ios, ios5, automatic-ref-counting, uinavigationcontroller

我正在尝试将新的根控制器推送到导航堆栈，但使用侧面显示菜单。

我的应用程序委托具有以下内容：

```
 welcomeViewController = [[MyWelcomeViewController  alloc] initWithNibName:@"MyWelcomeViewController" bundle:nil];
navController = [[UINavigationController alloc] initWithRootViewController:welcomeViewController];
navController.navigationBarHidden = YES;

// Then we setup the reveal side view controller with the root view controller as the navigation controller
self.revealSideViewController = [[PPRevealSideViewController alloc] initWithRootViewController:navController];
[self.revealSideViewController setDirectionsToShowBounce:PPRevealSideDirectionNone];
[self.revealSideViewController setPanInteractionsWhenClosed:PPRevealSideInteractionContentView | PPRevealSideInteractionNavigationBar];

// Then we make the window root view controller the reveal side view controller
self.window.rootViewController = self.revealSideViewController; 
```

显示欢迎视图控制器后，用户登录。登录后，以下过程再次从 App Delegate 运行。

```
self.navController.navigationBarHidden = NO;
[self.navController setTitle:@"Home"];
[self.navController pushViewController:homeViewController animated:NO]; 
```

然后我有一个侧视图控制器设置，它是一个带有自定义单元设置的表格视图。

选择一行时，我需要将新的根控制器推到导航控制器上。我通过在选定单元格的表格视图中使用以下内容来尝试此操作。

```
MyAccountViewController *accountViewController = [[MyAccountViewController alloc] init];
[self.navigationController setViewControllers:[NSArray arrayWithObject:accountViewController] animated:NO]; 
```

不幸的是，这并没有做任何事情。如果我将代码添加到 App Delegate，然后从表视图控制器调用该方法，那么它可以工作，但不能从表视图本身的 .m 文件中调用。添加一个日志我可以看到上面的运行，只是没有做任何事情。

我不确定我是否需要在上面做任何不同的事情。例如，完全弹出当前显示的视图，然后重新创建导航控制器和 PPRevealSideViewController。如果我应该这样做，我不确定如何弹出所有当前视图，然后将新视图推送到窗口，而不是从 AppDelegate。

我不想在 App Delegate 中这样做的原因是因为它是处理这个问题的不正确方法，然后我需要为每个我想从菜单中推送的新根控制器使用单独的方法，所以 App Delegate 会变成很大。

![在此处输入图像描述](../Images/d7dd28fb0fe896c1485520e1c9583354.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:15:21.283

检查**UINavigationController.h：**

```
@interface UIViewController (UINavigationControllerItem)
@property(nonatomic,readonly,retain) UINavigationController *navigationController; // If this view controller has been pushed onto a navigation controller, return it. 
```

这意味着当你这样做时，如果没有被推送到任何 navController 或 navController 引用被推送到，`myViewController.navigationController`你会得到。`nil``myViewController``myViewController`

据我了解，您`tableViewController`没有被推入 navController 堆栈，这意味着您无法使用 `tableViewController.navigationController`. 相反，您需要使用`anyViewControllerInTheStack.navigationController`或者如果 navController 是`rootViewController`您的`keyWindow`, 通过

```
((UINavigationController*)[[UIApplication sharedApplication] keyWindow].rootViewController) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:16:03.777

将类似这样的内容添加到您的 AppDelegate.h：

```
#define XAppDelegate ((AppDelegate *)[[UIApplication sharedApplication] delegate]) 
```

现在，您可以从项目中的任何 .m 文件访问 AppDelegate 的任何 iVar。

```
 MyAccountViewController *accountViewController = [[MyAccountViewController alloc] init];
 [XAppDelegate.navController pushViewController:accountViewController animated:NO]; 
```

确保添加正确的导入。还有一件事：完成登录后，最好从导航控制器中弹出登录窗口。

希望这可以帮助。

# php - 来自观察者的 Magento 重定向始终有效

> ID：13236912
> 
> 赞同：7
> 
> 时间：2012-11-05T17:08:21.550
> 
> 标签：php, events, magento, newsletter

我无法从观察者那里在 Magento 中创建工作重定向。

据我所知，有许多事件与它们一起获得了响应对象（在`$observer`对象中）。另一种方法是使用类似的东西

```
Mage::app()->getResponse()->setRedirect(Mage::getUrl('checkout/cart')); 
```

正如伟大的艾伦风暴在这里提到的[https://stackoverflow.com/a/4730200/1700048](https://stackoverflow.com/a/4730200/1700048)。

不幸的是，这对我不起作用，即使我`sendResponse()`这样添加：

```
Mage::app()->getResponse()->setRedirect(Mage::getUrl('checkout/cart'))->sendResponse(); 
```

例如：

我想阻止某些电子邮件地址订阅时事通讯。`newsletter_subscriber_save_before`因此，我为事件创建了一个观察者。

在我的观察者方法中，我检查了一些情况，如果它们触发了我想阻止保存时事通讯订阅。我的计划是添加这样的错误：

```
Mage::getSingleton('checkout/session')->addError('Email is spam!'); 
```

并让当前页面重新加载（显示错误消息），并使用如上所示的重定向（`checkout/cart`在示例中只是为了看到它确实有效）。

不幸的是，重定向不起作用。为什么`sendResponse`在这种情况下不发送响应？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-13T07:23:07.733

这可行，但它不是超级优雅：

```
Mage::getSingleton('core/session')->addError('Email is spam!');
Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::getUrl('checkout/cart'));
Mage::app()->getResponse()->sendResponse();
exit; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-18T07:34:27.117

我将缩短并更正[Silas Palmer](/users/2067445/silas-palmer)的代码。

```
Mage::getSingleton('checkout/session')->addError('Email is spam!');
Mage::app()->getResponse()->setRedirect(Mage::getUrl('checkout/cart'))->sendResponse();
exit; 
```

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:02:24.947

您是否考虑过使用自己的自定义模块覆盖保存新闻信函控制器，而不是创建观察者，并在那里发送垃圾邮件逻辑，然后在您的逻辑下方添加新闻信函代码。

您还可以将保存新闻信函的 url 更改为新的自定义模块 url，然后执行垃圾邮件过滤器，如果您认为这是一封有效的电子邮件，那么您可以内部转发到常规保存新闻信函（请参阅[如何从另一个在magento？](https://stackoverflow.com/questions/5565964/how-to-call-one-action-from-another-in-magento)）

因此，从控制器重定向不会有任何问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:15:19.333

那应该可以正常工作：s

您是否尝试在`setRedirect()`通话后立即退出脚本以查看它是否确实到达那里？

# c - 在 Solaris 上从 C 程序生成内核

> ID：13236913
> 
> 赞同：1
> 
> 时间：2012-11-05T17:08:30.100
> 
> 标签：c, solaris

> **可能的重复：**
> [C 程序如何在不终止的情况下生成自身的核心转储？](https://stackoverflow.com/questions/131439/how-can-a-c-program-produce-a-core-dump-of-itself-without-terminating)

我想从 C 程序生成一个核心而不终止正在运行的进程。操作系统是 Solaris。

我知道 gcore 可以用于此目的。但我不知道如何在 C 程序中使用“gcore”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:55:13.010

`gcore`是用 C 实现的，并且源代码是[可用](https://hg.java.net/hg/solaris~on-src/file/tip/usr/src/cmd/gcore/gcore.c)的，因此显然可以复制它的功能。但是，查看源代码会发现它使用了半私有`libproc`库，其核心转储生成代码相当复杂。

`gcore`简单地调用using`system(3)`或其一些变体似乎是最好的选择：

```
int gcore(pid_t pid) 
{
  char *cmd[256];
  snprintf(cmd, sizeof cmd, "gcore %ld", (long) pid);
  // returns 0 on success, -1 on system failure (errno set), or >0 on
  // gcore failure (in which case use the W* macros defined in
  // <sys/wait.h> to extract additional information from value).
  return system(cmd);
} 
```

[（链接到`<sys/wait.h>`文档。）](http://docs.oracle.com/cd/E26502_01/html/E29033/wait.h-3head.html#REFMAN3Fwait.h-3head)

# c# - 通过数据库中的键查询最大值

> ID：13236919
> 
> 赞同：0
> 
> 时间：2012-11-05T17:08:49.290
> 
> 标签：c#, .net, sql, linq

使用下表：

```
+-------------+-----------+---------+
|  Parent_ID  |  Item_ID  |  Count  |
+-------------+-----------+---------+
|      1      |     1     |    1    |
|      1      |     1     |    5    |
|      1      |     1     |    4    |
|      1      |     2     |    7    |
|      1      |     2     |    2    |
|      2      |     1     |    2    |
|      2      |     1     |    3    |
|      2      |     2     |    2    |
|      2      |     2     |    4    |
+-------------+-----------+---------+ 
```

我想获得给定`Parent_ID`和的最高可用计数`Item_ID`，如下所示：

```
+-------------+-----------+---------+
|  Parent_ID  |  Item_ID  |  Count  |
+-------------+-----------+---------+
|      1      |     1     |    5    |
|      1      |     2     |    7    |
|      2      |     1     |    3    |
|      2      |     2     |    4    |
+-------------+-----------+---------+ 
```

**我将如何在 C# 中使用 LINQ/SQL 执行此操作？**例如，我想要父 id 1 的最高项目数。这将是这样的：

```
int parentId = 1;
var counts = from c in database.Items where parentId == c.parentId 
//this gets all counts from items for parent id 1, but I am just looking
//for the highest count per item for parent id 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:10:55.960

```
SELECT Parent_ID, Item_ID, MAX(Count)
FROM ...
GROUP BY Parent_Id, Item_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:11:00.203

```
select parent_id, 
       item_id, 
       max(count) as count
from your_table
group by parent_id, item_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:16:03.890

使用 LINQ2SQL 我想你想要这样的东西：

```
var counts = database.Items.GroupBy(p => p.parentId).Max(p => p.Key); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:38:57.810

要按多个字段分组，您可以使用匿名对象进行分组：

```
var counts = from item in database.Items
             group item by new { item.ParentId, item.ItemId } into itemGroup
             select new Item()
                    {
                        ParentId = itemGroup.Key.ParentId,
                        ItemId = itemGroup.Key.ItemId,
                        Count = itemGroup.Max(x => x.Count)
                    }; 
```

# jquery - jQuery Datepicker：用户去下个月还是上个月？

> ID：13236920
> 
> 赞同：3
> 
> 时间：2012-11-05T17:08:54.510
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

在用户单击“下一个”月份或“上一个”月份后，我需要使用自定义 css 重新填充日期选择器。我正在利用 onChangeMonthYear 事件，但不知道用户的前进方向（下个月或上个月）。有什么简单的内置可以给我这个吗？如果没有，最简单的解决方案是什么？

*** 在此处添加代码以澄清请注意，事件实际上是通过服务器端进入的，我只是在构建时在这里删除了一些数据***

```
 var Event = function(text, className) {
            this.text = text;
            this.className = className;
        };

        var events = {};
        events[new Date("11/12/2012")] = new Event("A Good Day", "yellowDot");
        events[new Date("11/20/2012")] = new Event("Mkay", "blueDot");

        $('#date').datepicker({              
           beforeShowDay: function (date) {
               var event = events[date];
               if(event) {
                   return [true, event.className, event.text];
               }
               else {
                   return [true, '', ''];
               }
           },
           onChangeMonthYear: function () {
               //reload another calendar, past or future?

           }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:59:35.917

您将[onChangeMonthYear](http://api.jqueryui.com/datepicker/#option-onChangeMonthYear)处理函数传递给 datepicker 小部件。该函数将使用三个参数调用：

*   新选择的年份，
*   新选择的月份，
*   datepicker 小部件实例。

因此，您可以编写如下内容：

```
onChangeMonthYear: function(year, month, widget) {
    reloadCalendar(month, year);
} 
```

如果要操作自动完成小部件，小部件实例参数作为快捷方式提供，以避免通过桥。例如，如果您想立即关闭日期选择器，它允许您编写：

```
widget.hide(); 
```

代替：

```
$(this).datepicker("hide"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:14:54.593

Datepicker 是动态创建的，所以你应该使用`.live`

```
$('.ui-datepicker-next').live("click", function() {
  alert(1)
} 
```

# javascript - 如何颠倒标记彼此顶部的顺序？

> ID：13236923
> 
> 赞同：2
> 
> 时间：2012-11-05T17:09:07.730
> 
> 标签：javascript, google-maps, google-maps-markers

我正在绘制代表地图上商店的标记。

有一个全局信息窗口出现在每个被点击的标记上，在它为前一个点击的标记关闭之后。

在某些情况下，一些商店可能具有相同的地址，因此标记会出现在彼此的顶部，并且只能看到顶部标记。

为了解决这个问题，我在 infoWindow 中添加了分页。

问题是顶部标记是列表中的最后一个，因此 infoWindow 显示最新商店的信息，并且分页显示“返回”按钮，而不是首先显示第一家商店和“下一个”按钮。

我尝试像这样颠倒“for”循环的顺序，`for (i=limit; i>0; i--)`但它不起作用。地图卡住了，好像在运行一些 ajax 请求。

这是代码：

```
function drawShopsMarkers(){
    var marker;
    markersArray = [];
    var i;
    var limit = globalShopsArr.length;

    for (i=0; i<limit; i++){
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(globalShopsArr[i].shopLat, globalShopsArr[i].shopLng), 
            map: map,
            title: globalShopsArr[i].shopTitle
        });

        markersArray.push(marker);
        marker.setMap(map);

        google.maps.event.addListener(markersArray[i], 'click', makeListener(i));
    }

    function makeListener(index) {
        return function() {
            globalInfowindow.disableAutoPan=true;
            globalInfowindow.open(map,markersArray[index]);

            CreateInfoWindowString(index);

            globalInfowindow.setOptions({
                content: globalContentString
            });
        }
    }       
} 
```

该`CreateInfoWindowString()`函数只是填充`globalContentString`包括分页。

你能说是什么导致了问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:21:56.420

尝试

```
for (i=limit-1;i>=0;i--) 
```

就像评论中建议的那样。当您将功能附加到标记时，您也需要更改线。当您将标记推送到数组时，它会累积，但您将函数附加到不存在的元素。使用另一个变量并在循环中增加它：

```
C++
```

这条线

```
google.maps.event.addListener(markersArray[i],.. ... ...
```

当您将循环更改为递减 i 并尝试 MarkersArray[i] 时，它必须给出错误，因为元素 i 尚未在数组中。所以创建 ac 变量并像我写的那样使用它，并将行更改为使用 c 而不是 i。

# java - 对 Guava BiMap 进行排序

> ID：13236927
> 
> 赞同：18
> 
> 时间：2012-11-05T17:09:26.357
> 
> 标签：java, guava

我是 Guava 库的新手，但发现 BiMap 非常适合我的需求。我的一个问题是我需要对 BiMap 中的值进行排序。通常，由于它的继承排序，我会使用 TreeMap，但是必须能够反转映射以查看键，就好像它们是值一样。

因此，我正在向各位专家寻求有关这方面的建议。我看到的解决方案是： 1\. 创建一个 BiMap 比较器并使用我自己的地图排序实用程序。2.构建我自己的'BiTreeMap'数据结构。

有没有我没有考虑过的解决方案？有没有我错过的“番石榴方式”来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T17:20:26.090

我们目前没有排序`BiMap`类型，因为它的工作方式有点模棱两可：条目会按键排序吗？按价值观？正向条目是否按键排序，反向条目是否按值排序？

目前，唯一真正可用的替代方法是`ImmutableBiMap`，它保留了您放入条目的顺序——因此`ImmutableBiMap.copyOf(Maps.newTreeMap(map))`会给您一个`BiMap`按键排序。

`BiMap`（不过，如果您提交的功能请求包含更多关于您的用例的详细信息，我们可能会更认真地考虑提供直接排序。）

# ruby - 我的黄瓜测试场景的问题

> ID：13236933
> 
> 赞同：0
> 
> 时间：2012-11-05T17:09:30.943
> 
> 标签：ruby, testing, hyperlink, cucumber, capybara

我的黄瓜测试场景有一些问题，不幸的是我有一个错误：

```
When I follow "More about Star Wars"                        # features/step_definitions/web_steps.rb:56

  no link with title, id or text 'More about Star Wars' found (Capybara::ElementNotFound)
  (eval):2:in `click_link'

  ./features/step_definitions/web_steps.rb:57:in `/^(?:|I )follow "([^"]*)"$/'
  features/find_movie_with_same_director.feature:18:in `When I follow "More about Star Wars"' 
```

我猜它与动态链接有关以提取正确的ID。当然，一切都在浏览器中运行，当我测试创建新记录时也是如此。

详细信息在下面添加

有人可以帮我找到我的测试场景的正确解决方案吗？

在`app/views/movies/index.html.haml`：

```
 %tbody
- @movies.each do |movie|

  %tr
    %td= movie.title 
    %td= movie.rating
    %td= movie.release_date
    %td= movie.director
    %td= link_to "More about #{movie.title}", movie_path(movie)
    %td= movie_path(movie)
  =link_to 'Add new movie', new_movie_path 
```

在`features/step_definition/web_steps.rb`：

```
When /^(?:|I )follow "([^"]*)"$/ do |link|
  click_link(link)
end 
```

在我的功能文件中：

```
Feature: search for movies by director

Scenario: find movie with the same director
 As a movie buff
 So that I can find movies with my favorite director
 I want to include and search on director information in movies I enter

Background: movies in database
  Given the following movies exist:
  | title        | rating | director     | release_date |
  | Star Wars    | PG     | George Lucas |   1977-05-25 |
  | Blade Runner | PG     | Ridley Scott |   1982-06-25 |
  | Alien        | R      |              |   1979-05-25 |
  | THX-1138     | R      | George Lucas |   1971-03-11 |

  Given I am on the home page
  When I follow "More about Star Wars"
  Then  I should be on the details page for "Star Wars" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:35:14.190

> 当我关注“更多关于星球大战”# features/step_definitions/web_steps.rb:56
> 
> 找不到标题、id 或文本“更多关于星球大战”的链接 (Capybara::ElementNotFound) (eval):2:in `click_link'
> 
> ./features/step_definitions/web_steps.rb:57:in`/^(?:|I )follow "([^"]*)"$/' features/find_movie_with_same_director.feature:18:in`当我关注“更多关于星球大战”时

Seems Capybara cannot find your link. Try this step in your step definition on that scenario to click the link

```
 page.find('tr', text: "#{movie.title}") .click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:38:34.713

```
Feature: search for movies by director

  As a movie buff
  So that I can find movies with my favorite director
  I want to include and search on director information in movies I enter

Background: movies in database
Given the following movies exist:
  | title        | rating | director     | release_date |
  | Star Wars    | PG     | George Lucas |   1977-05-25 |
  | Blade Runner | PG     | Ridley Scott |   1982-06-25 |
  | Alien        | R      |              |   1979-05-25 |
  | THX-1138     | R      | George Lucas |   1971-03-11 |
  | THX-1131     | G      | George Lucas |   1971-03-11 |

Scenario: find movie with same director
  Given I am on the RottenPotatoes home page
  And I check "ratings_PG"
  And I press "Refresh"
  When I follow "More about Star Wars" 
```

# red5 - Red5 1.0 搜索后不播放任何视频

> ID：13236935
> 
> 赞同：0
> 
> 时间：2012-11-05T17:09:38.117
> 
> 标签：red5, seek

我正在使用 Red5 1.0.0-RC2 并且在寻找上一个视频后它不会播放任何视频。过程如下： 1\. 启动 Red5 服务器 2\. 在浏览器中打开客户端并使用搜索栏“播放” 3\. 很快它停止工作 4\. 重新加载浏览器 5\. 它不播放任何东西，在 red5 控制台中输出没有行，例如：

> [信息] [pool-4-thread-1] videocv.Application - W3C x-category:stream x-event:play c-ip: x-sname:f0fd1a01-6c68-4bf5-b0e6-18d55921baa0
> 
> [信息] [pool-4-thread-1] videocv.Application - streamPlayItemPlay
> 
> [信息] [pool-4-thread-1] videocv.Application - W3C x-category:stream x-event:play c-ip: x-sname:f0fd1a01-6c68-4bf5-b0e6-18d55921baa0 x-name:1/ 2/1.flv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:45:15.197

你能在 demo.openmeetings.de 上复制这个问题吗？我们基本上也在使用 Red5，我不认为这个问题是一个普遍的问题，它更多地与您的特定应用程序或您播放的视频有关。

塞巴斯蒂安

# java - 如何从 Apache Commons 中选择合适的组件文件？

> ID：13236936
> 
> 赞同：0
> 
> 时间：2012-11-05T17:09:41.317
> 
> 标签：java, apache-commons

如果我想使用它的某些组件，我不明白如何知道要引用哪个 Apache Commons jar。例如，如果我想使用[ObservableCollection](http://commons.apache.org/dormant/events/apidocs/org/apache/commons/events/observable/ObservableCollection.html)，我怎么知道要引用哪个 jar 才能使用它。

我下载了[Collections](http://commons.apache.org/collections/)（我将它添加到我的构建路径中），但这个组件只有“AbstractCollectionDecorator”类。在文档中，我可以看到实际的类位于包中：

```
org.apache.commons.events.observable.ObservableCollection 
```

我应该如何确定要引用哪个包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:26:37.447

请注意，ObservableCollection 的 javadoc 路径以 [http://commons.apache.org/dormant](http://commons.apache.org/dormant)开头。嗯……不是好兆头。

> 我应该如何确定要重新引用哪个包？

从`dormant`主页：

> 如果您想使用这些组件中的任何一个，您必须自己构建它们。最好假设这些组件不会在不久的将来发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:19:35.360

从包名中，例如*org.apache.commons.events*删除*org.apache*部分。

下一部分是*org.apache.commons*，这意味着它是 Apache Jakarta Commons 项目组，它也是多个项目的聚合器。因此，我们需要另一个名称片段来区分它：

所以你现在得到了*org.apache.commons.events*。名称建议*commons-events*，因为 Apache Commons Collections 将是*org.apache.commons.collections*

所以你所要做的就是删除*org.apache*，用斜杠替换点，你就得到了你需要的 jar 文件名：

```
org.apache.commons.events      -> commons-events.jar
org.apache.commons.collections -> commons-collections.jar
org.apache.commons.io          -> commons-io.jar
org.apache.commons.lang        -> commons-lang.jar 
```

ETC

# c# - 哪个密码字符使用代码在 winforms 文本框中显示黑点 (•)？

> ID：13236940
> 
> 赞同：2
> 
> 时间：2012-11-05T17:09:57.540
> 
> 标签：c#, winforms, security

> **可能重复：**
> [哪个密码字符在 winforms 文本框中显示黑点 (•)？](https://stackoverflow.com/questions/4051302/which-passwordchar-shows-a-black-dot-in-a-winforms-textbox)
> [C++11 中字符串文字的 Unicode 编码](https://stackoverflow.com/questions/6796157/unicode-encoding-for-string-literals-in-c11)

我想使用代码来显示密码或将其设为点状 •</p>

```
textBoxNewPassword.PasswordChar = (char)0149; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T17:12:08.767

[http://blog.billsdon.com/2011/04/dot-password-character-c/](http://blog.billsdon.com/2011/04/dot-password-character-c/)建议“\u25CF”；

或者尝试复制粘贴这个•</p>

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T17:15:55.037

（不完全是您问题的答案，但仍然）

您还可以使用该`UseSystemPasswordChar`属性来选择系统的默认密码字符：

```
textBoxNewPassword.UseSystemPasswordChar = true; 
```

通常映射到点，并始终创建一致的用户体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:59:47.797

维基百科有[一个相似符号表](http://en.wikipedia.org/wiki/Interpunct#Similar_symbols)。

在 C# 中，要生成`char`对应于 U+2022（例如）的文字，请使用`'\u2022'`. （也可以像在问题中那样转换整数文字，`(char)8226`）

* * *

后期添加。您最初的方法不成功的原因是`149`您拥有的值不是 Unicode 代码点。相反，它来自[Windows-1252](https://en.wikipedia.org/wiki/Windows-1252)，并且**Windows-1252 不是 Unicode 的子集**。在 Unicode 中，十进制`149`表示[C1 控制代码](https://en.wikipedia.org/wiki/C0_and_C1_control_codes) *"Message Waiting"*。

您可以从 Windows-1252 转换为：

```
textBoxNewPassword.PasswordChar = 
  Encoding.GetEncoding("Windows-1252").GetString(new byte[] { 149, })[0]; 
```

但当然直接使用 Unicode 值更容易。

* * *

在较新版本的 .NET 中，您需要调用：

```
Encoding.RegisterProvider(CodePagesEncodingProvider.Instance); 
```

在你可以使用类似的东西之前`Encoding.GetEncoding("Windows-1252")`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T17:12:03.727

您需要考虑使用`PasswordBox`控件并将其设置`PasswordChar`为`*`.

**例子：**

```
textBox1.PasswordChar = '*'; // Set a text box for password input 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T17:11:29.460

```
textBoxNewPassword.PasswordChar = '\u25CF'; 
```

# c# - 为什么当将 xml 根目录作为 xpath 的一部分时，我没有得到任何结果

> ID：13236942
> 
> 赞同：3
> 
> 时间：2012-11-05T17:10:15.780
> 
> 标签：c#, xpath, xelement

为什么当将 xml 根目录作为 xpath 的一部分时，我没有得到任何结果。

我在`"/rdf:RDF/channel"`XElement 上使用了一个简单的 xpath（见下文）

我将所有命名空间添加到`XmlNamespaceManager`，但没有得到**任何结果**，就像`xpathNavigator`已经在根目录中一样，因此它需要一个以 . 开头的路径`/channel`。

编码：

```
 const string rdfFile = @"C:\index.rdf";
        var text = File.ReadAllText(rdfFile);
        XmlReader reader = XmlReader.Create(new StringReader(text));
        XElement doc = XElement.Load(reader);
        XmlNameTable nameTable = reader.NameTable;
        XmlNameTable table = nameTable ?? new NameTable();
        var manager = new XmlNamespaceManager(table);

        manager.AddNamespace(RDFNamespaceName, RDFNamespace);
        manager.AddNamespace(RDFNamespaceName2, RDFNamespace2);
        manager.AddNamespace(RDFNamespaceName3, RDFNamespace3);
        manager.AddNamespace(RDFNamespaceName4, RDFNamespace4);
        manager.AddNamespace(RDFNamespaceName5, RDFNamespace5);
        manager.AddNamespace(RDFNamespaceName6, RDFNamespace6);
        manager.AddNamespace(RDFNamespaceName7, RDFNamespace7);

    var res = doc.XPathSelectElements(RDFXpath, manager);

    private const string RDFXpath = "/rdf:RDF/channel";

    private const string RDFNamespaceName = "rdf";

    private const string RDFNamespace = @"http://www.w3.org/1999/02/22-rdf-syntax-ns#";

    private const string RDFNamespaceName2 = "";

    private const string RDFNamespace2 = @"http://purl.org/rss/1.0/";

    private const string RDFNamespaceName3 = "cc";

    private const string RDFNamespace3 = @"http://web.resource.org/cc/";

    private const string RDFNamespaceName4 = "content";

    private const string RDFNamespace4 = @"http://purl.org/rss/1.0/modules/content/";

    private const string RDFNamespaceName5 = "admin";

    private const string RDFNamespace5 = @"http://webns.net/mvcb/";

    private const string RDFNamespaceName6 = "sy";

    private const string RDFNamespace6 = @"http://purl.org/rss/1.0/modules/syndication/";

    private const string RDFNamespaceName7 = "dc";

    private const string RDFNamespace7 = @"http://purl.org/dc/elements/1.1/"; 
```

部分xml：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:admin="http://webns.net/mvcb/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:cc="http://web.resource.org/cc/" xmlns="http://purl.org/rss/1.0/">
- <channel rdf:about="http://blogs.charlotte.com/panthers/">
  <title>Inside the Panthers</title> 

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:55:25.027

您的“频道”节点全名为`'http://purl.org/rss/1.0/':channel`. 因此，您需要将带有任何（非空）前缀的两个名称空间添加到您的 XPathManager 并在 XPath 中使用您的前缀（完全忽略 XML 中的前缀 - 它们与您的 XPath 无关）：

```
private const string RDFXpath = "/rdf:RDF/prefix2:channel";
private const string RDFNamespaceName2 = "prefix2";
var res = doc.XPathSelectElements(RDFXpath, manager); 
```

在命名空间管理器中指定“”（空字符串）作为前缀对选择没有任何用处。XPath 中的空前缀始终指向默认（空）命名空间。这与 XML 不同，您可以通过使用`xmlns="new_default_uri"`影响当前节点和子节点来覆盖默认前缀。[这在XmlNamespaceManager.AddNamespace](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.addnamespace.aspx)的注释中有所介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:47:00.140

似乎问题（除了 Alexei 发现的问题之外）是由于 XElement 和 XDocument 之间关于 Root 的差异，如果我使用 XDocument，我使用的 xpath 有效，但如果我使用 XElement，则无效，请参阅：

[http://msdn.microsoft.com/en-us/library/bb675196.aspx](http://msdn.microsoft.com/en-us/library/bb675196.aspx)

# c# - Bentley-Ottmann算法中Segment类的IComparable实现

> ID：13236946
> 
> 赞同：3
> 
> 时间：2012-11-05T17:10:54.640
> 
> 标签：c#, intersection, segment

我正在尝试实现在 C#中描述[的Bentley-Ottmann 算法。](http://softsurfer.com/Archive/algorithm_0108/algorithm_0108.htm)特别是，我在扫描线状态结构中为**Segment类实现 IComparable<T> 时遇到问题。**下面列出了段类：

```
public class SweepLineSegment : IComparable<SweepLineSegment>
{
    public int Edge { get; set; }
    public PointF LeftmostVertexPoint { get; set; }
    public PointF RightmostVertexPoint { get; set; } 
    public SweepLineSegment Above { get; set; }
    public SweepLineSegment Below { get; set;} 

    public int CompareTo(SweepLineSegment other)
    {
        ?????
    }
} 
```

当我将两个段添加到扫描线状态结构时，我不清楚应该如何比较它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:42:29.930

你为什么要开始比较线段？四个坐标的元组没有任何总排序。

如果您想要边沿多边形周边出现的顺序，您应该只跟踪段索引。我猜是这个`Edge`属性？试试`return Edge.CompareTo(other.Edge)`。

但我建议根本不实施`IComparable`。你需要它做什么？

# java - 这个类的构造函数在哪里？

> ID：13236950
> 
> 赞同：0
> 
> 时间：2012-11-05T17:11:02.127
> 
> 标签：java, constructor

```
public class EqualsTest {
  public static <T> boolean equalTest(T o1, T o2) {
      return o1.equals(o2);
  }
  public static void main(String[] args) {
      EqualsTest et1 = new EqualsTest();
      EqualsTest et2 = new EqualsTest();
      System.out.println(et1.equals(et2));
      System.out.println(equalTest(et1, et2));
  }
  public boolean equals(Object o) {
      if (o instanceof EqualsTest) {
          System.out.println("equals(Object)");
          return true;
      }
      return false;
  }
  public boolean equals(EqualsTest et) {
      System.out.println("equals(EqualsTest)");
      return this.equals((Object)et);
  }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T17:11:32.750

没有，它是隐含的。由于它没有显式`extends`任何类，它将隐式扩展`Object`. 由于 Object 有一个无参数的构造函数，它会隐式调用那个构造函数。

真的，这个类可以包含一个这样写的构造函数，它是等价的：

```
public class EqualsTest {
    public EqualsTest() {
        super();
    }

    //the methods...
} 
```

如果您扩展的类也没有“无参数”构造函数（无论是隐式还是显式），则不能使用隐式构造函数。如果您提供**任何**显式构造函数，则不会为您创建隐式无参数构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:17:29.340

当没有提供显式构造函数时，Java 提供了一个默认构造函数，它不接受参数并且不执行特殊操作或初始化。

隐式默认构造函数采取的唯一动作是使用 super() 调用来调用超类构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T17:23:10.927

在您的情况下存在一个隐式构造函数，它正在调用对象类构造函数

隐式构造看起来像

```
public  EqualsTest()
{
 super();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T17:13:01.057

类中没有定义构造函数，因此 Java 将在编译时添加默认构造函数。检查[http://en.wikipedia.org/wiki/Default_constructor#Java_and_C.23](http://en.wikipedia.org/wiki/Default_constructor#Java_and_C.23)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-05T17:13:06.287

**您的类中没有显式构造函数。**您在以下语句中使用类中的`implicit`构造函数：`Object`

```
 EqualsTest et1 = new EqualsTest(); 
```

为了您的理解，构造函数通常定义如下：

```
 public EqualsTest(){ //without param
  }

  public EqualsTest(int param1){ //with one param
  } 
```

**请注意：**构造函数和其他方法的主要区别是：**构造函数与您的类同名并且没有任何返回类型。**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-05T17:13:07.290

所有没有显式声明构造函数的 java 类都会获得一个默认的无参数构造函数，其形式为

```
public ClassName()
{
  super();
} 
```

在隐式构造函数内部是对类的超类的构造函数的调用（默认为 Object），因此是“super();”

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-05T17:13:25.720

如果您未指定任何构造函数，则会提供一个。如果您提供一个，则必须覆盖默认情况下的一个。所以在这里你提供了构造函数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-05T17:13:29.863

如果一个类没有任何构造函数，它会创建一个隐式构造函数，在你的情况下

```
public EqualsTest(){} 
```

将在那里。如果你创建一个带有任何参数的构造函数，你将失去这个隐式构造函数，如果你想要一个无参数构造函数，你将不得不构造它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-05T17:14:10.340

该`main`方法是您的应用程序的入口点。它在你启动它时被调用，这里没有实例化。如果需要，您可以创建一个构造函数：

```
public class Main {
    /**
     * Main.
     * @param args
     */
    public static void main(String[] args) {
        Main main = new Main();
        // do something more
    }

    public Main() {
        // do something
    }
} 
```

你甚至`Main`可以在我的代码中看到实例化。在这种情况下，您可以创建一个构造函数，`Main`否则`Object`将调用默认构造函数。

你甚至可以这样做，这对你来说很有意义：

```
public class Main {
    /**
     * Main.
     * @param args
     */
    public static void main(String[] args) {
        Main main = new Main("some param");
    }

    public Main() {
        // do something
    }

    public Main(String someParameter) {
        this();
    }

} 
```

但请记住，如果没有您的干预，您的`Main`课程将不会被实例化。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-05T17:14:41.253

如果未指定，则构造函数是隐式的。

这意味着您可以通过调用来实例化该类`new EqualsTest()`。

相反，当您定义带参数的构造函数时，您将失去此功能，并且如果需要，您也被迫为默认的无参数构造函数编写代码。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-11-05T17:15:22.300

如果未指定构造函数，则存在隐式构造函数。在你的情况下

```
 public EqualsTest(){
     super();
 } 
```

如果您声明一个构造函数，则此隐式构造函数不再存在，您必须显式声明一个无参数构造函数

# git - 强制 Intellij Idea 与另一个 git 存储库一起工作

> ID：13236951
> 
> 赞同：3
> 
> 时间：2012-11-05T17:11:04.580
> 
> 标签：git, intellij-idea

我的项目看起来像这样

```
|.git(this is the project's git)
|--App1
|--App2
|--MyApp |.git (this is the git for heroku with dummy commits)
         |--SubFolder1
         |--SubFolder2 
```

我有另一个用于 heroku 部署的 git 存储库。

我只使用“MyApp”文件夹使用 intellij-idea。

Intellij 与 ./MyApp/.git 存储库一起使用。

有没有办法告诉 intellij idea 使用 ./.git 存储库？

**Aka 我可以设置 git 存储库路径或忽略给定的 .git 存储库吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:43:54.817

There is no way to make IntelliJ work with this setup.

Moreover, setting up such a workspace is not straightforward in Git itself, though possible. If you are inside MyApp, but want to work with the "parent" Git repository, you have to prefix all your commands with `--git-dir` command that lets you specify the location of .git:

```
cd .../project/MyApp
git --git-dir=.../project/.git status 
```

To work with a repository IntelliJ invokes Git commads like status, push, etc. And it doesn't support specifying git-dir for them. Maybe it will be implemented in future if you open a feature request in [JetBrains bugtracker](http://youtrack.jetbrains.com), but not in the nearest future.

# c++ - 即使系统暂停C ++也会闪烁结果

> ID：13236956
> 
> 赞同：0
> 
> 时间：2012-11-05T17:11:37.323
> 
> 标签：c++, visual-c++-6

这是我的代码...我想在结果上停止它，但是在按下一个键后会显示结果...在按下键后它正在闪烁结果...我正在使用 Microsoft Visual C++6.0 和Windows 7的。

```
#include <iostream.h>
#include <conio.h>
#include <stdlib.h>

void main() {
    int a, b, n;
    int danni[6][25];

    cout << "n= ";
    cin >> n;

    for (a = 0; a < n; a++) {
        for (b = 0; b < n; b++) {
            cout << "danni[" << a << "][" << b << "]= ";
            cin >> danni[a][b];
        }
    }

    for (a = 0; a < n; a++) {
        cout << "\n ";

        for (b = 0; b < n; b++) {
            //cout<<danni[a][b]<<" ";
            cout << "Fak nomer: " << a << b;
        }

        cout << "Spec: " << a << b;
        cout << "Grupa: ";
        cout << a << b;
        cout << "Sreden uspeh: " << a << b;
    }

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:19:00.200

`cout.flush();`在系统暂停前调用。另一种选择是添加 and `cout << endl`（因为它隐藏地刷新流）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:20:40.500

流执行缓冲。这意味着他们并不总是在您要求他们时立即写入控制台，而是等待更多输入，以便他们可以分块执行并节省一些资源。

但是，在这种情况下，您希望在暂停之前完全刷新流。

为此，请编写以下任何内容：

```
std::cout.flush();
std::cout << std::flush; 
```

# perl - 如何获取对 Perl 的 grep 返回的列表的引用？

> ID：13236958
> 
> 赞同：6
> 
> 时间：2012-11-05T17:11:38.813
> 
> 标签：perl

我想使用该`grep`函数过滤值列表并将对过滤列表的引用存储到哈希中。我所追求的是：

```
my $allValues = [
    'a',
    'unwanted value',
    'b',
    'c',
];

$stuff = {
    'values' => grep { $_ ne 'unwanted value' } @$allValues
}; 
```

只有，当我尝试时，`%$stuff`哈希是：

```
$VAR1 = {
          'b' => 'c',
          '价值观' => 'a'
        };

```

有没有办法修复匿名哈希创建代码，以便我得到：

```
$VAR1 = {
          '价值观' => [
                        '一个'，
                        'b',
                        'C'
                      ]
        };

```

但不是通过创建局部变量或调用子例程（换句话说，所有内联）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T17:12:53.767

尝试：

```
$stuff = {
    'values' => [ grep { $_ ne 'unwanted value' } @$allValues ]
}; 
```

# asp.net - WebService 中的 HashTable 给出“类型不受支持”错误

> ID：13236961
> 
> 赞同：1
> 
> 时间：2012-11-05T17:11:50.420
> 
> 标签：asp.net, web-services, hashtable

我尝试在我的网络服务中使用哈希表。我的一些网络服务方法准备一些数据并将它们添加到哈希表中，然后将其返回给客户端。所以当我运行我的网络服务时会出现此错误：

`The type system.collections.hashtable is not supported because it implements IDictionary.`

问题是什么？我可以在 web 服务中使用 HashTable，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:39:34.317

您不能从 Web 服务返回哈希表，因为它不能被序列化。

您可以在返回数据之前将其转换为简单的列表或数组吗？

或者： [http ://tiwaripradeep.blogspot.com/2007/06/type-systemcollectionshashtable-is-not.html](http://tiwaripradeep.blogspot.com/2007/06/type-systemcollectionshashtable-is-not.html)

# c# - 将 Datagridview 的 DataSource 转换为 List？

> ID：13236962
> 
> 赞同：5
> 
> 时间：2012-11-05T17:11:53.407
> 
> 标签：c#, .net, datagridview, datasource

我正在尝试编写一个通用函数，它将 datagridview 的数据源转换为列表（然后我想向列表中添加一个空对象。数据源可以是任何类型）？

我的一些绝望尝试看起来像这样：

```
Type datagrid_type = dgv.DataSource.GetType();
List<object> the_source = dgv.DataSource as List<object>;
Convert.ChangeType(the_source, datagrid_type);
Object c = Activator.CreateInstance(datagrid_type);
Convert.ChangeType(c, datagrid_type);
the_source.Add(c); 
```

..但`the_source`只是空。即使不是，它仍然可能无法正常工作。我相信你们会有更聪明的方法（一种真正有效的方法..）来实现这一点。

ps 我正在使用 EF 创建一个作为数据源的列表，因此将数据源转换为 DataTable 在这里可能不相关

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:45:52.027

我是通过以下方式完成的（仅当您使用绑定数据源时才有效）

创建自定义datagridview控件并继承datagridview

```
public partial class MyGridView : DataGridView 
```

声明一个包含 columnname、summaryvalue 和要显示的格式的类

```
 [Serializable]
    public class SummaryDataProperty
    { 
        public string ColumnName { get; set; }
        public string Format { get; set; }
        internal decimal Value { get; set; }
    } 
```

在 MyDataGridView 中声明汇总数据属性列表

```
 public List<SummaryDataProperty> SummaryDataPropertyNames { get; set; } 
```

在数据绑定完成时，计算摘要并将其显示在列标题处。

```
 protected override void OnDataBindingComplete(DataGridViewBindingCompleteEventArgs e)
    {
        base.OnDataBindingComplete(e);
        if (SummaryDataPropertyNames.Count > 0)
        {
            if (DataSource is BindingSource)
            {
                var ds = (DataSource as BindingSource);
                foreach (var prop in SummaryDataPropertyNames)
                {
                    prop.Value = 0;
                    var col = this.Columns[prop.ColumnName];
                    foreach (var l in ds.List)
                    {
                        decimal val;
                        if (decimal.TryParse(Convert.ToString(l.GetType().GetProperty(col.DataPropertyName).GetValue(l, null)), out val))
                            prop.Value +=   val;
                    }
                    col.HeaderText = col.HeaderText.Split('[')[0].TrimEnd(' ') + " [" + prop.Value.ToString(prop.Format) + "]";
                }

            }
        }
    } 
```

由于绑定数据源提供了来自数据源的对象列表。它很容易遍历绑定源列表。我不知道如何使用对象数据源或 BindingDatasource.Current 执行此操作。我仍在寻找解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:06:00.183

没有人在这里回答我，所以我最终将类型传递给函数，尽管如果我能避免这种情况并让函数确定正确的类型，我会更高兴

```
public static void Add_Empty_Row_At_To_Grid<T>(DataGridView dgv)
  {
   List<T> the_source = dgv.DataSource as List<T>;
   T c = (T)Activator.CreateInstance(typeof(T));
   the_source.Add(c);
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T22:36:39.410

如果您想要一个通用函数/方法并传递不同对象的列表，您可以这样做（在我的应用程序中提取的示例）：

```
public void SaveAll<T>(IEnumerable<T> objects)
{
    foreach (object obj in objects)
    {
        T specificObject = (T)obj;
        Session.Save(specificObject);
    }
    Session.Flush();
} 
```

因此，您可以使用任何类对象调用此方法：

```
List<Product> products = Product.GetAll();
SaveAll<Product>(products);

List<Vendor> vendors = Vendor.GetAll();
SaveAll<Vendor>(vendors);

etc 
```

另一方面，如果您有 a`DataGridView`并且想要添加一行，则可以使用 a `BindingSource`as `DataGridView's DataSource`。例子：

```
...
private BindingSource Source;
...

private void LoadProducts(List<Product> products)
{
       Source.DataSource = products;
       ProductsDataGrid.DataSource = Source;
}

private void addProductBtn_Click(object sender, EventArgs e)
{
       Source.Add(new Product());
} 
```

# vba - Excel VBA脚本清除列中的所有复选框

> ID：13236963
> 
> 赞同：4
> 
> 时间：2012-11-05T17:11:58.853
> 
> 标签：vba, excel

我正在尝试清除特定单元格范围或按列中的所有活动 X 复选框

看起来这很简单，因为我可以使用下面的代码为整个工作表做到这一点。我只是不确定如何修改它以仅适用于单列或单元格范围。

```
Sub ClearAllCheckboxes()
  Dim Answer As String
  Dim MyNote As String
  Dim Obj As Object

  MyNote = "This will Clear all CheckBoxes Proceed? "
  Answer = MsgBox(MyNote, vbQuestion + vbYesNo, "???")

  If Answer = vbNo Then
    Exit Sub
  Else
    On Error Resume Next
    For Each Obj In ActiveSheet.OLEObjects
         Obj.Object.Value = False
    Next Obj
  End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:36:45.257

尝试使用该`topleftcell`属性：

```
Sub ClearAllCheckboxes()
  Dim Answer As String
  Dim MyNote As String
  Dim Obj As Object
dim rg as range

set rg=selection

  MyNote = "This will Clear all CheckBoxes Proceed? "
  Answer = MsgBox(MyNote, vbQuestion + vbYesNo, "???")

  If Answer = vbNo Then
    Exit Sub
  Else
    On Error Resume Next
    For Each Obj In ActiveSheet.OLEObjects
        if not intersect(rg, obj.topleftcell) is nothing then _
         Obj.Object.Value = False
    Next Obj
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:39:33.490

```
Obj.TopLeftCell.Column 
```

将告诉您复选框位于哪一列。基于此，您可以决定是否要更改其值。

# graph - Graphviz Dot，混合有向和无向

> ID：13236975
> 
> 赞同：37
> 
> 时间：2012-11-05T17:12:36.963
> 
> 标签：graph, graphviz, relation, symmetry

对于我的应用程序，我需要同时（在同一个图表上）表示两种关系：一种是对称的，另一种不是。

目标：

*   理想情况下，这两种关系应该导致边缘具有不同的颜色；
*   对于对称关系，我不想有双刃；

有没有办法用*dot*做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-05T17:12:36.963

```
digraph {

    A; B; C

    subgraph Rel1 {
        edge [dir=none, color=red]
        A -> B -> C -> A
    }

    subgraph Rel2 {
        edge [color=blue]

        B -> C
        C -> A
    }

} 
```

![在此处输入图像描述](../Images/904b0e932b97e068520f8d10abc5c042.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-07-17T12:04:27.663

您可以将`dir=none`边缘属性传递给无向图连接：

```
digraph {

    A; B; C

    A -> B
    B -> C
    C -> A [dir=none]
} 
```

[![在此处输入图像描述](../Images/17d815bfb3e4de50094ed26c28445387.png)](https://i.stack.imgur.com/PolhX.png)

# image - 下采样文本的最佳过滤器是什么？

> ID：13236983
> 
> 赞同：6
> 
> 时间：2012-11-05T17:12:56.050
> 
> 标签：image, text, imagemagick, resampling, downsampling

我正在使用 ImageMagick 对文本进行下采样。我意识到没有适合每种情况的*最佳*过滤器，但我认为在专门对文本进行下采样时必须有一个普遍接受的标准（我可能错了）。以下是 ImageMagick 中可用的过滤器列表：

*   巴特利特
*   布莱克曼
*   博曼
*   盒子
*   卡特罗姆
*   立方体
*   高斯
*   汉明
*   汉宁
*   埃尔米特
*   金克
*   凯撒
*   拉格朗日
*   兰佐斯
*   LanczosSharp
*   兰佐斯2
*   Lanczos2Sharp
*   米切尔
*   帕尔森
*   观点
*   二次方
*   罗比杜
*   辛格
*   SincFast
*   三角形
*   威尔士语

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T03:16:15.290

没有普遍接受的下采样滤波器；仅仅是因为，没有普遍接受的文本字体。您需要确定您使用的字体，并为所述任务应用最匹配的过滤器。

*   处理 2005 年的电子邮件？Tahoma 字体 => Hermite 过滤器
*   扫描的传真？混合高对比度 => 点过滤器

每个过滤器的强度和弱点的视觉比较可以在[这里](http://www.imagemagick.org/Usage/filter/)和[这里](http://bvdwolf.home.xs4all.nl/main/foto/down_sample/down_sample.htm)找到。

我想通过生成视觉备忘单来提醒自己哪个过滤器可以满足任务。

![下采样示例](../Images/0e9e83bc46d81ca0adc706b3a7e42cee.png)

这是一个预览“DejaVu Sans Condensed”的快速 bash 脚本

```
#!/bin/bash

# Adjust this to type-face you'd like to preview
FONT_TO_PREVIEW="DejaVu-Sans-Condensed-Bold"

# Create a temp directory to work with
mkdir filter_tmp
cd filter_tmp

while read filter
do
    # Generate base file
    convert \
        -gravity center -font $FONT_TO_PREVIEW -background white -size 126x \
        -fill black -pointsize 12 label:$filter $filter.org.png
    # Resample
    convert $filter.org.png -filter $filter -resize 400% $filter.filter.png
    # Crop center
    mogrify -gravity center -crop 126x+0+0 +repage $filter.filter.png
    # Tile filtered image below original
    montage $filter.org.png $filter.filter.png -tile 1x2 -geometry +1+1 +label +set label $filter.png
    # Clean house
    rm $filter.filter.png $filter.org.png
# Generate list of all installed filters
done < <(identify -list filter)
montage -geometry +4+4 -tile 4x *.png ../filter_preview.png

# Clean house & display generated filter preview
cd ..
rm -rf filter_tmp
display -display :0 filter_preview.png 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:10:39.787

您的备忘单没有使用推荐的某些过滤器：其中一些是为与“-distort Resize”而不是“-resize”一起使用而设计的（[请参见此处](http://www.imagemagick.org/Usage/resize/#distort_resize)）。

附加建议：色彩空间的选择确实可以改善（或恶化）结果。ImageMagick 论坛发布“使用 sRGB、RGB、LAB、LUV、XYZ、sigmoidal 放大...？” （我不能在这里链接，因为作为一个新用户，每个答案我只能放两个链接）说明了这一点。对于文本，我推荐具有高对比度值（11 以上）的“sigmoidization”。[见这里](http://www.imagemagick.org/Usage/filter/nicolas/)。

# javascript - jquery每个地图数组不打印所有内容

> ID：13236984
> 
> 赞同：0
> 
> 时间：2012-11-05T17:12:58.973
> 
> 标签：javascript, jquery, html, css

我将这两个对象用作键/值映射。第一张地图包含两个不同的日期，稍后我将进行比较，另一张地图包含一个链接和一张图片，

```
var estelaresfechas = {
    '2012-01-02': '2012-12-02',
    '2012-01-02': '2012-12-02',
    '2012-01-02': '2012-12-02'
}
//Link e imagen
var est_link_img = {
    '' : 'estelarAticulosEscolares_03082012.jpg',
    'google.com' : 'estelarCuadernoProfesional_03082012.jpg',
    '' : 'estelarLaptop_03082012.jpg'
}

$.each(estelaresfechas,function(key,val){

                $.each(est_link_img,function(index,value){
                    var fechainiest = Date.parse(key);
                     var fechafinalest = Date.parse(val);
                     var fechainicomest = Date.today().compareTo(fechainiest);
                     var fechafinest = Date.today().compareTo(fechafinalest);
                    if(fechainicomest == 1 && fechafinest == -1){

                        $("#slider").append("<a href='"+ index +"'><img src='img/" + value+ "'/></a>");

                    }
                    else{
                        console.log("nada")
                    }
                });

    }) 
```

它所做的第一件事是比较日期，如果日期在范围内，它会将其附加到带有链接和图像的 div 中（链接是可选的），但由于某种原因，它不会打印第一个. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:58:13.017

这两个对象都包含重复的键：

```
var estelaresfechas = {
    '2012-01-02': '2012-12-02',
    '2012-01-02': '2012-12-02',
    '2012-01-02': '2012-12-02'
}

var est_link_img = {
    '' : 'estelarAticulosEscolares_03082012.jpg',
    'google.com' : 'estelarCuadernoProfesional_03082012.jpg',
    '' : 'estelarLaptop_03082012.jpg'
} 
```

当您指定相同的密钥时，最后一个获胜。

为了简化，写这个...

```
{ 
   "a": "1",
   "a": "2",
   "a": "3"
} 
```

...相当于写这个：

```
{ "a": "3" } 
```

您需要为您的密钥选择唯一的名称。

# javascript - AJAX调用后执行引用的js

> ID：13236986
> 
> 赞同：0
> 
> 时间：2012-11-05T17:13:00.753
> 
> 标签：javascript, ajax, execute

我想执行一个动态添加到页面的脚本（通过`innerHTML`）我发现了这个：

[如何执行ajax输出脚本](https://stackoverflow.com/questions/1496014/how-to-execute-ajax-output-script)

这是接近，但没有雪茄。我在我的 AJAX 响应中得到了其中一个（连同其他内容）：

```
<link rel=StyleSheet href="/my/css/file.css" type="text/css"/>
<h1>Some header</h1>
<div>Some text</div>
<ul><li>Some text</li><li>Some Text</li></ul>
<script src='my/js/file.js'></script> 
```

我试图在它附加到我的容器元素（通过`innerHTML`）之后对其进行评估：

```
scripts = mycontainer.querySelectorAll('script');
for (k=0;k<scripts.length;k++){
    eval(scripts[k]);
} 
```

但无济于事。有任何想法吗？**请不要**图书馆！（也不需要后备，只需要大多数现代浏览器）。

CSS 加载得很好。JS 文件存在并且被正确引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:38:44.667

没有你的代码，我只会做一些假设。

脚本列表.php

```
<?php
   //get script list somehow.
   $script_list = array('my/js/file1.js', 'my/js/file2.js', 'my/js/file3.js');
   echo json_encode($script_list);
?> 
```

page.html

```
function ajaxRequest(){
 var activexmodes=["Msxml2.XMLHTTP", "Microsoft.XMLHTTP"] //activeX versions to check for in IE
 if (window.ActiveXObject){ //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
  for (var i=0; i<activexmodes.length; i++){
   try{
    return new ActiveXObject(activexmodes[i])
   }
   catch(e){
    //suppress error
   }
  }
 }
 else if (window.XMLHttpRequest) // if Mozilla, Safari etc
  return new XMLHttpRequest()
 else
  return false
}

var mygetrequest=new ajaxRequest()
mygetrequest.onreadystatechange=function(){
 if (mygetrequest.readyState==4){
  if (mygetrequest.status==200 || window.location.href.indexOf("http")==-1){
   var scripts = eval("("+mygetrequest.responseText+")") //retrieve result as an JavaScript object
   var headID = document.getElementsByTagName("head")[0];
   for (k=0;k<scripts.length;k++){
      var newScript = document.createElement('script');
      newScript.type = 'text/javascript';
      newScript.src = scripts[k];
      headID.appendChild(newScript);
   }

  }
  else{
   alert("An error has occured making the request")
  }
 }
}

mygetrequest.open("GET", "scriptlist.php", true)
mygetrequest.send(null) 
```

参考。用过的。：

*   [使用纯 javascript 从另一个 (php) 文件中获取 JSON](https://stackoverflow.com/questions/10149864/get-json-from-another-php-file-using-pure-javascript)

*   [如何动态插入 Javascript](http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:53:01.227

除非有人想出更好的方法...

我最终将使用 AJAX 调用来获取每个脚本 src，并评估返回。稍后我会在这里发布相关代码。

# c - 使用 GNU 工具链 (gcc/ld) 从静态库创建共享库

> ID：13236987
> 
> 赞同：14
> 
> 时间：2012-11-05T17:13:04.200
> 
> 标签：c, linux, gcc, linker, shared-libraries

我无法从静态库生成共享对象。虽然我知道还有其他选择，但我现在对为什么这不起作用以及如何使它起作用感到困扰（而不是卡住）。

下面是我正在使用的非常简单的源代码。

get_zero.c

```
#include "get_zero.h"

int
get_zero(void)
{
        return 0;
} 
```

get_zero.h

```
int get_zero(void); 
```

主程序

```
#include <stdio.h>
#include <string.h>

#include "get_zero.h"

int
main(void)
{
    return get_zero();
} 
```

目标是使用 libget_zero_static 和 libget_zero_shared 创建两个功能相同的应用程序。

这是我的编译/链接步骤：

```
gcc -c -fPIC get_zero.c
ar cr libget_zero_static.a get_zero.o
gcc -shared -o libget_zero_shared.so -L. -Wl,--whole-archive -lget_zero_static -Wl,-no--whole-archive 
```

这是我得到的错误：

```
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libc.a(init-first.o): relocation R_X86_64_32 against `_dl_starting_up' can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libc.a(init-first.o): could not read symbols: Bad value
collect2: ld returned 1 exit status 
```

这是在 64 位 Ubuntu 系统上。

我在这里阅读了有关整个存档选项的信息，似乎这个问题应该已经消除了我所有的障碍。 [如何从静态库创建共享对象文件](https://stackoverflow.com/questions/6263780/how-to-create-a-shared-object-file-from-static-library)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T16:29:39.687

看来您需要将存档指定为参数，而不是库。所以做那个`libget_zero_static.a`而不是`-lget_zero_static`. 至少它对我有用：

```
gcc -shared -o libget_zero_shared.so \
-Wl,--whole-archive                  \
libget_zero_static.a                 \
-Wl,--no-whole-archive 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T15:22:28.567

您可以尝试另一种方式：链接两次，一次用于静态库，另一次用于共享库。这应该更容易，更常见。

# jsp - 将参数从 JSP 传递到拦截器

> ID：13236990
> 
> 赞同：0
> 
> 时间：2012-11-05T17:13:08.143
> 
> 标签：jsp, struts2, interceptor, interceptorstack

如何在我的 Struts2 自定义拦截器中捕获此参数，从 JSP 页面发送？

```
<s:url var="remoteurl" action="jsontable">
    <s:param name="gridName">gridTableID</s:param>
</s:url>
  <sjg:grid
        id="gridTableID"

        caption="Customer Examples (Local Data)"
        href="%{remoteurl}"
        gridModel="gridModel"
        rowNum="-1"
        hidegrid="true"
.... 
```

编辑：我的自定义堆栈：

```
<interceptors>
            <interceptor name="logingInterceptor" class="com.interceptors.LoggingInterceptor"></interceptor>
            <interceptor-stack name="newStack">
                <interceptor-ref name="logingInterceptor" />
                <interceptor-ref name="defaultStack" />
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="newStack"></default-interceptor-ref> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:27:14.187

编辑 2：如果您的拦截器无法获取请求参数，我建议采用原子方法解决问题。尝试小步骤，一一解决问题。在你的情况下，我会尝试如下：

1）在您的拦截器中放置一个调试“hello拦截器”，以查看对您的操作的调用是否实际上是通过您的自定义拦截器传递的。

如果不是：检查您的设置（拦截器、拦截器堆栈、包、操作等）。

如是：

2）以经典方式将普通变量放入您发布的表单中（不是ajax或其他东西，只是`<s:hidden name="foo" value="blabla"/>`JSP中表单内的一个变量，通过`<s:submit`按钮发布到您的操作（映射为使用拦截器堆栈的操作）自定义拦截器）尝试从拦截器中打印出该变量的值。

如果变量为空：再次检查您的操作映射，使用 Firebug Net 模块查看参数是否实际发布，等等。

如果读取变量：

那么问题出在 JQGrid 的变量中，请检查您在 JSP 中引用它的方式以及再次使用 Firebug 出现的页面。

ETC...

我建议你使用一个新的 JSP，里面只有你的东西，用一个新的动作来显示和接收结果，用一个空的 execute()... 只是一个非常小的骨架来测试你的代码，确保没有外部的东西弄乱向上工作流...

* * *

编辑：您的拦截器配置看起来不错（除了`defaultStack`代替`default-stack`，但我很确定它是一样的）。

您的所有操作都`<package>`在其中`<interceptors>`定义的相同吗？

* * *

为什么在 Interceptor 上而不是在 Action 上？您需要如何处理这些数据？

顺便说一句，这是代码：

```
public String intercept(ActionInvocation invocation) throws Exception {

   final ActionContext context = invocation.getInvocationContext();
   HttpServletRequest request = (HttpServletRequest) context.get(StrutsStatics.HTTP_REQUEST);

   String gridName = (String) request.getParameter("gridName");

   /* do something */

   return invocation.invoke();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T11:20:27.187

试试这个。它在 struts 2.0.14 中对我有用。

```
public String intercept(ActionInvocation ai) throws Exception {
            ActionConfig config  = ai.getProxy().getConfig();  
            Map parameters       = config.getParams();  
            String menuId        = (String)parameters.get("empName"); 
```

# javascript - 在android中使用谷歌地图时的触摸偏移

> ID：13236999
> 
> 赞同：2
> 
> 时间：2012-11-05T17:13:43.403
> 
> 标签：javascript, android, google-maps, cordova, google-maps-api-3

我正在使用 iOS 和 Android 的 Phonegap 开发一个应用程序。

该应用程序有一个地图，用户可以在其中看到一些标记。我在 iPhone 和 iPad 上测试了这个应用程序，地图效果很好。我在 Galaxy Tab 中进行了测试，地图没有问题。

但是当我在 Galaxy 2 中进行测试时，我遇到了一个问题：触摸偏移。例如，在缩放控制中，如果我按下缩小 (-)，则按下放大 (+)。如果我在缩放控件之外按下，则会按下缩小。

这不仅仅是缩放控制的问题，它也发生在标记和信息窗口中。这就是我初始化地图的方式：

```
 var gmap = new google.maps.Map(document.getElementById("map_canvas"), {
        zoomControl: true,
        streetViewControl: false,
        zoom: 16,
        mapTypeControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoomControlOptions: {
           position: google.maps.ControlPosition.LEFT_CENTER
        }
    }); 
```

android的版本是2.3.4和Phonegap v 1.9.0

我附上一些截图以获得更好的解释 ![在这里，我触摸了缩小按钮](../Images/6d4f55a8e29b7a6622bb4e48af7d55bd.png) ![在这里，我触摸了缩放控件之外](../Images/d1753179f34ea92a3338a4456d1e5d8b.png)