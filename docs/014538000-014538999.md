# StackOverflow 问答 14538000-14538999

# mysql - 授予所有语法

> ID：14538007
> 
> 赞同：1
> 
> 时间：2013-01-26T14:45:56.727
> 
> 标签：mysql

这不起作用：

```
use mysql

GRANT ALL ON *.* TO 'root'@'192.168.1.2' 
```

也不是

```
use mysql

GRANT ALL ON *.* TO 'root'@'192.168.1.2' IDENTIFIED BY 'password' 
```

这是我得到的错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GRANT ALL ON *.* TO 'root'@'192.168.1.2'' at line 3 
```

我在服务器版本 5.5.8 上。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:59:11.363

试试这个：

```
use mysql

GRANT ALL ON *.* TO 'root@192.168.1.2' IDENTIFIED BY 'password' 
```

# hibernate - 将 jBPM 5.4 与简单的 Java EE 应用程序一起使用

> ID：14538010
> 
> 赞同：0
> 
> 时间：2013-01-26T14:46:07.950
> 
> 标签：hibernate, jbpm, business-process-management

我目前在 jBPM 5.4 和 jBOSS 7.1 中工作

我已使用链接[https://community.jboss.org/wiki/SetUpJBPM54FinalInstallerToUseMSSQLServer2008UsingJTDS将我的后端数据库更改为 MS-SQL](https://community.jboss.org/wiki/SetUpJBPM54FinalInstallerToUseMSSQLServer2008UsingJTDS)

遵循[https://community.jboss.org/people/bpmn2user/blog/2011/09/21/jbpm5-web-example提供的步骤](https://community.jboss.org/people/bpmn2user/blog/2011/09/21/jbpm5-web-example)

我正在使用以下事务管理器，

不幸的是，当我从 servlet 启动一个进程时，我得到以下堆栈跟踪，

```
58:12,868 INFO  [main.java.com.sample.processserver.TaskProcessServlet] (http-localhost-127.0.0.1-8080-2) @@@@@@@@ Start Process + Begin + JBPMAPIUTIL
15:58:12,874 INFO  [main.java.com.sample.processserver.JbpmAPIUtil] (http-localhost-127.0.0.1-8080-2) Value of processDefId : com.sample.bpmn.hello
15:58:12,878 INFO  [main.java.com.sample.processserver.JbpmAPIUtil] (http-localhost-127.0.0.1-8080-2) Value of processName : sample.bpmn
15:58:12,882 INFO  [stdout] (http-localhost-127.0.0.1-8080-2) @@@@@@@@@@@@@@@@@@@ initiate process

15:58:12,886 INFO  [stdout] (http-localhost-127.0.0.1-8080-2) @@@@@@@@@@@@@@@@@@@ Creating Session

15:58:12,890 INFO  [main.java.com.sample.processserver.JbpmAPIUtil] (http-localhost-127.0.0.1-8080-2) Value of processNames : [sample.bpmn]
15:58:12,895 INFO  [main.java.com.sample.processserver.JbpmAPIUtil] (http-localhost-127.0.0.1-8080-2) Value of processNames : [sample.bpmn]
15:58:12,899 INFO  [stdout] (http-localhost-127.0.0.1-8080-2) ------------ within create session ------------

15:58:12,959 INFO  [main.java.com.sample.handler.CustomExceptionHandler] (http-localhost-127.0.0.1-8080-2) ------------------------------------ERROR-------------------------------------
15:58:12,966 ERROR [main.java.com.sample.handler.CustomExceptionHandler] (http-localhost-127.0.0.1-8080-2) STACK TRACE: org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
15:58:12,972 INFO  [main.java.com.sample.handler.CustomExceptionHandler] (http-localhost-127.0.0.1-8080-2) ------------------------------------ERROR-------------------------------------
15:58:12,978 ERROR [stderr] (http-localhost-127.0.0.1-8080-2) javax.persistence.PersistenceException: [PersistenceUnit: org.jbpm.persistence.jpa] Unable to build EntityManagerFactory

15:58:12,987 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)

15:58:12,993 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)

15:58:12,999 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)

15:58:13,006 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)

15:58:13,011 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)

15:58:13,020 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at main.java.com.sample.processserver.JbpmAPIUtil.createSession(JbpmAPIUtil.java:521)

15:58:13,025 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at main.java.com.sample.processserver.JbpmAPIUtil.initiateProcess(JbpmAPIUtil.java:473)

15:58:13,036 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at main.java.com.sample.processserver.TaskProcessServlet.processRequest(TaskProcessServlet.java:96)

15:58:13,046 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at main.java.com.sample.processserver.TaskProcessServlet.doGet(TaskProcessServlet.java:267)

15:58:13,053 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)

15:58:13,057 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)

15:58:13,061 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)

15:58:13,068 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)

15:58:13,074 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)

15:58:13,079 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)

15:58:13,084 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)

15:58:13,089 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)

15:58:13,095 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)

15:58:13,100 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)

15:58:13,107 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)

15:58:13,113 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)

15:58:13,120 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)

15:58:13,125 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)

15:58:13,130 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)

15:58:13,135 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at java.lang.Thread.run(Unknown Source)

15:58:13,144 ERROR [stderr] (http-localhost-127.0.0.1-8080-2) Caused by: org.hibernate.service.jndi.JndiException: Error parsing JNDI name [java:jboss/datasources/jbpmDS]

15:58:13,149 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.jndi.internal.JndiServiceImpl.parseName(JndiServiceImpl.java:92)

15:58:13,154 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.jndi.internal.JndiServiceImpl.locate(JndiServiceImpl.java:63)

15:58:13,159 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.configure(DatasourceConnectionProviderImpl.java:116)

15:58:13,166 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)

15:58:13,172 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)

15:58:13,178 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)

15:58:13,185 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:234)

15:58:13,192 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:91)

15:58:13,199 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)

15:58:13,205 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)

15:58:13,211 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)

15:58:13,218 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)

15:58:13,222 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)

15:58:13,229 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)

15:58:13,234 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)

15:58:13,239 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)

15:58:13,245 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)

15:58:13,250 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           ... 24 more

15:58:13,253 ERROR [stderr] (http-localhost-127.0.0.1-8080-2) Caused by: javax.naming.OperationNotSupportedException

15:58:13,257 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at bitronix.tm.jndi.BitronixContext.getNameParser(BitronixContext.java:140)

15:58:13,262 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at javax.naming.InitialContext.getNameParser(Unknown Source)

15:58:13,267 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           at org.hibernate.service.jndi.internal.JndiServiceImpl.parseName(JndiServiceImpl.java:86)

15:58:13,273 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)           ... 40 more

15:58:13,275 INFO  [main.java.com.sample.processserver.TaskProcessServlet] (http-localhost-127.0.0.1-8080-2) @@@@@@@@ Start Process + Initiate + Completed
15:58:13,281 WARN  [bitronix.tm.twopc.Preparer] (http-localhost-127.0.0.1-8080-2) executing transaction with 0 enlisted resource
15:58:13,287 WARN  [bitronix.tm.utils.ManagementRegistrar] (http-localhost-127.0.0.1-8080-2) cannot unregister object with name bitronix.tm:type=Transaction,Gtrid=31302E3233302E31342E3130360000013C71401D5400000002: bitronix.tm.internal.BitronixRuntimeException: cannot callunregisterMBean
          at bitronix.tm.utils.ManagementRegistrar.mbeanServerCall(ManagementRegistrar.java:95) [btm-1.3.1.jar:1.3.1]
          at bitronix.tm.utils.ManagementRegistrar.unregister(ManagementRegistrar.java:74) [btm-1.3.1.jar:1.3.1]
          at bitronix.tm.BitronixTransaction.fireAfterCompletionEvent(BitronixTransaction.java:388) [btm-1.3.1.jar:1.3.1]
          at bitronix.tm.BitronixTransaction.commit(BitronixTransaction.java:188) [btm-1.3.1.jar:1.3.1]
          at bitronix.tm.BitronixTransactionManager.commit(BitronixTransactionManager.java:96) [btm-1.3.1.jar:1.3.1]
          at main.java.com.sample.processserver.TaskProcessServlet.processRequest(TaskProcessServlet.java:98) [classes:]
          at main.java.com.sample.processserver.TaskProcessServlet.doGet(TaskProcessServlet.java:267) [classes:]
          at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
          at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
          at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
          at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
          at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
          at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
          at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
          at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
          at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
          at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
          at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
          at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
          at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
          at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
          at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
          at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_26]
Caused by: java.lang.IllegalAccessException: Class bitronix.tm.utils.ManagementRegistrar can not access a member of class org.jboss.as.jmx.PluggableMBeanServerImpl with modifiers "public"
          at sun.reflect.Reflection.ensureMemberAccess(Unknown Source) [rt.jar:1.6.0_26]
          at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.6.0_26]
          at bitronix.tm.utils.ManagementRegistrar.mbeanServerCall(ManagementRegistrar.java:93) [btm-1.3.1.jar:1.3.1]
          ... 22 more 
```

当我再次执行相同的操作时，我得到了这样一个异常**Bitronix 事务管理器 - 无法打开磁盘日志**

任何人都可以给我指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:06:16.863

所以该错误与 JNDI 资源有关。如果你在 JBoss 中运行，你不应该使用 bitronix，你需要在 AS 中使用 JBoss Transaction 服务。为此，您需要修改 persistence.xml 文件并更改此属性：

使用jboss之一。然后你需要确保你在 jboss 中正确配置了以下数据源：java:jboss/datasources/jbpmDS

干杯

# rotation - Pygame: rotating images subsurface

> ID：14538011
> 
> 赞同：0
> 
> 时间：2013-01-26T14:46:13.503
> 
> 标签：rotation, pygame

I have been trying to rotate sprites in pygame for quite a while. I came across this to help me rotate it around the center:

[http://www.pygame.org/wiki/RotateCenter](http://www.pygame.org/wiki/RotateCenter)

But I don't really understand what the `rot_image = rot_image.subsurface(rot_rect).copy()` line does. There are a lot of pages about this kind of thing but they haven't helped me. I tried it without that line and it spins oddly. Could anyone tell me how that line prevents that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:23:33.923

从[pygame.transform.rotate](http://www.pygame.org/docs/ref/transform.html#pygame.transform.rotate)：

> 除非旋转 90 度增量，否则图像将被填充更大以保持新大小。

因此，引用的行 wich`*only* works with square images`使用原始中心保持原始尺寸。请记住，使用这种方法可以“修剪”旋转的图像（即：松散一些区域）以保持其大小。

# php - Faster connection with MySQL?

> ID：14538012
> 
> 赞同：1
> 
> 时间：2013-01-26T14:46:15.520
> 
> 标签：php, javascript, jquery, html, mysql

I have a following problem. I'm working on a small browser based game, and I added movement with keyboard keys. It is working, but now I want to add a code, which will send the current position of player to the MySQL database. The problem is, when I push the button, for example W, my character keeps moving upward, and every step he sends a data to MySQL, creating a looooong list of PHP requests. How can I speed up this process? Here is the part of code I use:

```
if (key == key_W) { // Player Up
if (parseFloat(wzr.style.top)-6 < 0)
{
 $('#wzro').stop().animate({
 top: 342
 }, 0, function() {
 $('#wzro').empty();
 });
YWalk();
}

else
{
 $('#wzro').stop().animate({
 top: '-=6'
 }, 0, function() {
 $('#wzro').empty();
 });
YWalk();
}
}

function YWalk(){
            var wzr = document.getElementById("wzro");
            var xmlHttp;
            if (window.XMLHttpRequest){
            xmlHttp=new XMLHttpRequest();
            }
            else{
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlHttp.open("GET","datachodzeniey.php?y="+ wzr.style.top);
            xmlHttp.send(null);
} 
```

And in datachodzeniey.php:

```
<?php
session_start();
$username = $_SESSION['username'];
$y=$_GET['y'];

$connect = mysql_connect("localhost", "root", "");
$select_db = mysql_select_db("testdb", $connect);
$q=mysql_query("update players set y='$y' where dispname='$username'");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:28:22.790

首先，这是您的代码的整洁版本，没有功能更改：

```
//in some outer scope
var $wzro = $("#wzro");

//in the key event handler
if (key == key_W) { //Player Up
    var top = parseInt($wzro.css('top')) - 6;
    top = (top < 0) ? 342 : top;
    $wzro.empty().css('top', top);
    $.ajax({ url: "datachodzeniey.php?y=" + top });
} 
```

现在，要减少 ajax 调用的数量：

```
//in some outer scope
var $wzro = $("#wzro");
var u = {//u for upload
    url: "datachodzeniey.php?y=",
    allow: true,
    reallow: function(){ u.allow = true; },
    delay: 100//(milliseconds) adjust as necessary
};

//in the key event handler
if (key == key_W) { //Player Up
    var top = parseInt($wzro.css('top')) - 6;
    top = (top < 0) ? 342 : top;
    $wzro.empty().css('top', top);
    if(u.allow) {
        $.ajax({ url: u.url + top });
        u.allow = false;
        setTimeout(u.reallow, u.delay);
    }
} 
```

@JaspalSingh 的 memcache 想法听起来不错，可以独立于上面的代码实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:10:49.133

这是两个请求之间间隔 20 秒的实现：

```
 var nowTime = new Date(); 
            var lastExecuted= new Date();

            if (key == key_W) { // Player Up
                nowTime = new Date();
                if (parseFloat(wzr.style.top)-6 < 0)
                {
                    $('#wzro').stop().animate({
                        top: 342
                    }, 0, function() {
                        $('#wzro').empty();
                    });

                } else {
                    $('#wzro').stop().animate({
                        top: '-=6'
                    }, 0, function() {
                        $('#wzro').empty();
                    });
                }
                //time interval in  milliseconds - here i have set it to 20seconds
                if (nowTime - lastExecuted >= 20000) {
                    YWalk();
                }
            }

            function YWalk(){
                lastExecuted = new Date();
                var wzr = document.getElementById("wzro");
                var xmlHttp;
                if (window.XMLHttpRequest){
                    xmlHttp=new XMLHttpRequest();
                }
                else{
                    xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlHttp.open("GET","datachodzeniey.php?y="+ wzr.style.top);
                xmlHttp.send(null);
            } 
```

# email - 使用 NetBeans 应用程序发送和接收 SMS？

> ID：14538013
> 
> 赞同：2
> 
> 时间：2013-01-26T14:46:23.800
> 
> 标签：email, sms, send, notify

我正在制作一个库存控制软件。当员工登录系统时，我需要向店主的手机发送短信。但我是java新手，知识不多。有人能帮我吗？我需要java代码和如何做的说明。非常感谢您的帮助。

# r - 有条件地从数据框中删除行（多个条件）

> ID：14538015
> 
> 赞同：6
> 
> 时间：2013-01-26T14:46:29.120
> 
> 标签：r, conditional, dataframe

我已经搜索过 SO，尽管有很多关于有条件地删除行的 QA，但没有一个 QA 适合我的问题。

我有一个`data.frame`包含变量等的纵向测量值`x`，`y`在不同的时间点`time`，在几个科目`id`中。一些受试者经历了一个事件`ev`（表示为`1`，否则`0`在一些`time`）。我想将初始值减少`data.frame`为：

*   1）所有主题的行都没有经历过事件（好吧，这很容易）但也包括
*   2）对于经历过事件的受试者，事件之前的所有行（即所有行的时间都小于那个人的事件时间）。

以便，

```
testdf<-data.frame(id=c(rep("A",4),rep("B",4),rep("C",4) ),
                   x=c(NA, NA, 1,2, 3, NA, NA, 1, 2, NA,NA, 5), 
                   y=rev(c(NA, NA, 1,2, 3, NA, NA, 1, 2, NA,NA, 5)),
                   time=c(1,2,3,4,0.1,0.5,10,20,3,2,1,0.5),
                   ev=c(0,0,0,0,0,1,0,0,0,0,0,1)) 
```

会减少到

```
 id  x  y time ev
1   A NA  5  1.0  0
2   A NA NA  2.0  0
3   A  1 NA  3.0  0
4   A  2  2  4.0  0
5   B  3  1  0.1  0
6   C  2  2  3.0  0
7   C NA  1  2.0  0
8   C NA NA  1.0  0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:09:27.663

基础解决方案：

```
> do.call(rbind, by(testdf, testdf$id, function(x) x[cumsum(x$ev) == 0,]))
     id  x  y time ev
A.1   A NA  5  1.0  0
A.2   A NA NA  2.0  0
A.3   A  1 NA  3.0  0
A.4   A  2  2  4.0  0
B     B  3  1  0.1  0
C.9   C  2  2  3.0  0
C.10  C NA  1  2.0  0
C.11  C NA NA  1.0  0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T15:16:34.560

这是一个使用`subset`and的解决方案`ave`：

```
subset(testdf, !ave(ev, id, FUN = cumsum)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T15:05:16.730

此解决方案`data.table`似乎适用于您的`testdf`. 这个想法是用来`cumsum`跟踪第一个事件开始后的位置。

```
require(data.table)
dt <- data.table(testdf, key=c("id"))
dt.out <- dt[, .SD[cumsum(ev) == 0], by=id]
> dt.out

#    id  x  y time ev
# 1:  A NA  5  1.0  0
# 2:  A NA NA  2.0  0
# 3:  A  1 NA  3.0  0
# 4:  A  2  2  4.0  0
# 5:  B  3  1  0.1  0
# 6:  C  2  2  3.0  0
# 7:  C NA  1  2.0  0
# 8:  C NA NA  1.0  0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-26T15:07:50.783

这是一个例子：

```
> ddply(testdf, .(id), function(z) z[cumsum(z$ev) == 0, ])
  id  x  y time ev
1  A NA  5  1.0  0
2  A NA NA  2.0  0
3  A  1 NA  3.0  0
4  A  2  2  4.0  0
5  B  3  1  0.1  0
6  C  2  2  3.0  0
7  C NA  1  2.0  0
8  C NA NA  1.0  0 
```

# php - php命名空间，访问全局类

> ID：14538017
> 
> 赞同：1
> 
> 时间：2013-01-26T14:46:54.067
> 
> 标签：php, namespaces

从 php 文档中，我们访问全局类，例如

```
<?php
namespace A\B\C;
class Exception extends \Exception {}
$a = new Exception('hi'); // $a is an object of class A\B\C\Exception
$b = new \Exception('hi'); // $b is an object of class Exception
$c = new ArrayObject; // fatal error, class A\B\C\ArrayObject not found
?> 
```

但是，当医生这么说时，我迷路了

```
<?php
$a = new \stdClass;
?> 
```

在功能上等同于：

```
<?php
$a = new stdClass;
?> 
```

这里[http://php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.shouldicare](http://php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.shouldicare)

有人可以解释一下医生在这里说什么。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:51:34.880

[文档](http://php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.shouldicare)中这两个代码示例的正上方是重要的标题：

> **如果我不使用命名空间，我应该关心这些吗？**
> 
> 不会。命名空间不会以任何方式影响任何现有代码，或任何尚未编写的不包含命名空间的代码。如果您愿意，可以编写此代码：

所以这里的含义不是你可以在命名空间`new stdClass;` *内*编写并让它等效，而是如果你根本*不使用命名空间*，那么你不必担心反斜杠`new \stdClass;`

在命名空间中工作时，该规则确实适用，您将需要使用`new \stdClass;`.

这不仅适用于 generic `stdClass`，还适用于*任何*类。

```
// Without namespaces:
$mysqli = new MySQLi(...);

// With namespaces
$mysqli = new \MySQLi(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:51:45.800

该文档说这`\stdClass`在功能上仅相当于`stdClass`：

> 尚未编写**的不包含**命名空间的代码

即，如果您使用命名空间 - 正如您的代码所示 - 您将让您在当前命名空间中定义类（使用`new stdClass`）；或者您只需要使用不需要 ( `new \stdClass`) 的本地类。

# c - 使用非阻塞 FIFO 作为环形缓冲区？

> ID：14538020
> 
> 赞同：0
> 
> 时间：2013-01-26T14:47:08.433
> 
> 标签：c, nonblocking, fifo, circular-buffer

我创建了一个 FIFO，我可以通过这种方式进行非阻塞写入：

```
// others, searching for a non-blocking FIFO-writer may copy this ;-)
mkfifo("/tmp/myfifo", S_IRWXU);
int fifo_fd = open("/tmp/myfifo", O_RDWR);
fcntl(fifo_fd, F_SETFL, fcntl(fifo_fd, F_GETFL) | O_NONBLOCK);

// and then in a loop:
LOGI("Writing into fifo.");
if (write(fifo_fd, data, count) < 0) {
    LOGE("Failed to write into fifo: %s", strerror(errno));
} 
```

非阻塞写入完美，但由于我的日志记录，我可以看到：

```
(..)
Writing into fifo.
Writing into fifo.
Writing into fifo.
Failed to write into fifo: Try again    
Writing into fifo.
Failed to write into fifo: Try again    
Writing into fifo.
Failed to write into fifo: Try again 
```

在我创建了一个类似的阅读器之后`cat /tmp/myfifo > foo.out`，错误就消失了。

我认为 FIFO 像环形缓冲区一样工作，当缓冲区已满时会丢弃第一个写入的字节。但现在我了解到它会阻止/阻止新字节，直到第一个字节被读取。

有谁知道我可以做的简单的其他方式或额外的操作，以便 FIFO 像环形缓冲区一样工作？

# html - 使用 gridster 和滚动来调整 DIV 大小/滚动

> ID：14538021
> 
> 赞同：1
> 
> 时间：2013-01-26T14:47:21.137
> 
> 标签：html, scroll, gridster

这是一个显示问题的 jsfiddle：http: [//jsfiddle.net/FQxYB/9/](http://jsfiddle.net/FQxYB/9/)

为了避免发布错误“不要只链接到小提琴”......这是小提琴的详细信息（为什么不能通过stackoverflow自动完成？）。

小提琴HTML：

```
<div class="gridster">
  <ul>
    <li data-row="1" data-col="1" data-sizex="1" data-sizey="1">
        <div class='portlet'>
            <span>Something small that fits</span>
        </div>
    </li>
    <li data-row="2" data-col="1" data-sizex="1" data-sizey="1">
        <div>
            <span>Something like a header</span>
        </div>
        <div class='portlet'>
            <table>
                <tr>
                    <td>r1 c1</td>
                    <td>r1 c2</td>
                </tr>
                <tr>
                    <td>r2 c1</td>
                    <td>r2 c2</td>
                </tr>
                <tr>
                    <td>r3 c1</td>
                    <td>r3 c2</td>
                </tr>
                <tr>
                    <td>r4 c1</td>
                    <td>r4 c2</td>
                </tr>
                <tr>
                    <td>r5 c1</td>
                    <td>r5 c2</td>
                </tr>
                <tr>
                    <td>r6 c1</td>
                    <td>r6 c2</td>
                </tr>
                <tr>
                    <td>r7 c1</td>
                    <td>r7 c2</td>
                </tr>
                <tr>
                    <td>r8 c1</td>
                    <td>r8 c2</td>
                </tr>
                <tr>
                    <td>r9 c1</td>
                    <td>r9 c2</td>
                </tr>
                <tr>
                    <td>r10 c1</td>
                    <td>r10 c2</td>
                </tr>
            </table>
        </div>
    </li>
  </ul> 
```

小提琴代码：

```
$(function(){
    $(".gridster ul").gridster({
        widget_margins: [15, 15],
        widget_base_dimensions: [100, 100]
    });
}); 
```

小提琴CSS：

```
.portlet
{
    height: 100%;
    width: 100%;
    overflow: auto;
}

.gridster {
    position:relative;
    background-color: gray;
} 

li {
    background-color: white;
    width: 150px;
    height: 150px;
    border: solid 2px black;
}

.gridster > * {
    margin: 0 auto;
    -webkit-transition: height .4s;
    -moz-transition: height .4s;
    -o-transition: height .4s;
    -ms-transition: height .4s;
    transition: height .4s;
}

.gridster .gs_w{
    z-index: 2;
    position: absolute;
}

.ready .gs_w:not(.preview-holder) {
    -webkit-transition: opacity .3s, left .3s, top .3s;
    -moz-transition: opacity .3s, left .3s, top .3s;
    -o-transition: opacity .3s, left .3s, top .3s;
    transition: opacity .3s, left .3s, top .3s;
}

.ready .gs_w:not(.preview-holder) {
    -webkit-transition: opacity .3s, left .3s, top .3s, width .3s, height .3s;
    -moz-transition: opacity .3s, left .3s, top .3s, width .3s, height .3s;
    -o-transition: opacity .3s, left .3s, top .3s, width .3s, height .3s;
    transition: opacity .3s, left .3s, top .3s, width .3s, height .3s;
}

.gridster .preview-holder {
    z-index: 1;
    position: absolute;
    background-color: #fff;
    border-color: #fff;
    opacity: 0.3;
}

.gridster .player-revert {
    z-index: 10!important;
    -webkit-transition: left .3s, top .3s!important;
    -moz-transition: left .3s, top .3s!important;
    -o-transition: left .3s, top .3s!important;
    transition:  left .3s, top .3s!important;
}

.gridster .dragging {
    z-index: 10!important;
    -webkit-transition: all 0s !important;
    -moz-transition: all 0s !important;
    -o-transition: all 0s !important;
    transition: all 0s !important;
}

/* Uncomment this if you set helper : "clone" in draggable options */
/*.gridster .player {
  opacity:0;
}*/ 
```

小提琴资源： http: [//gridster.net/dist/jquery.gridster.js](http://gridster.net/dist/jquery.gridster.js)

对于第二个正方形（下一个），我需要底部 div 不超过 LI 的范围。

粗略地说，“标题”div 的内容可以是任意大小（标题内容因上下文而异）。但是“body” div 的内容需要在必要时显示滚动条并保持在 LI 的范围内。

我“迷失如海”。我尝试了许多不同的方案......但没有一个甚至接近（主要是使用包装 div 和显示的变体：table/table-row/table-cell）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:49:04.047

元素的溢出属性`li`需要设置为`overflow:hidden`，`overflow:auto`否则元素将默认为`overflow:visible`. [在这里](http://jsfiddle.net/FQxYB/16/)看小提琴

# c++ - 具有行主要存储顺序的 ATLAS clapack_sgesv

> ID：14538022
> 
> 赞同：1
> 
> 时间：2013-01-26T14:47:24.550
> 
> 标签：c++, lapack, eigen, atlas

[当我尝试将ATLAS](http://math-atlas.sourceforge.net/)的方法`clapack_sgesv`（对应的 FORTRAN 方法：[sgesv.f](http://www.netlib.org/lapack/single/sgesv.f)）与以行主要存储顺序存储的矩阵一起使用时，我遇到了问题。

我在我的应用程序[中将 Eigen3](http://eigen.tuxfamily.org)用于大多数线性代数任务，但最近开始用调用 ATLAS 的 cblas 和[clapack](http://math-atlas.sourceforge.net/faq.html#clapackStand)方法来替换一些内部 Eigen 例程。我的应用程序必须支持通过定义 Eigen`EIGEN_DEFAULT_TO_ROW_MAJOR`标志来将矩阵存储顺序切换为行优先。这当然可以使用 Eigen 的方法开箱即用，但`clapack_`调用需要不同的代码路径。`.partialPivLu().solve()`用 ATLAS 的`clapack_sgesv`方法替换 Eigen 的调用时遇到了问题。这是一个说明问题的最小代码示例：

```
#include <iostream>
#define EIGEN_DEFAULT_TO_ROW_MAJOR
#include <eigen3/Eigen/Eigen>
extern "C" {
#include <clapack.h>
}
using namespace std;

int main()
{
  Eigen::MatrixXf A( 4, 4 );
  A <<  0.680375 ,  0.823295 , -0.444451  , -0.270431  ,
       -0.211234 , -0.604897 ,  0.10794   ,  0.0268018 ,
        0.566198 , -0.329554 , -0.0452059 ,  0.904459  ,
        0.59688  ,  0.536459 ,  0.257742  ,  0.83239   ;

  Eigen::MatrixXf B( 4, 4 );
  B <<  0.271423 , -0.967399 , -0.686642  ,  0.997849  ,
        0.434594 , -0.514226 , -0.198111  , -0.563486  ,
       -0.716795 , -0.725537 , -0.740419  ,  0.0258648 ,
        0.213938 ,  0.608353 , -0.782382  ,  0.678224  ;

  cout << "----- Eigen" << endl;

  cout << "A = " << endl << A << endl;
  cout << "B = " << endl << B << endl;
  Eigen::MatrixXf X = A.partialPivLu().solve( B );
  cout << "X = " << endl << X << endl;
  cout << "AX = " << endl << A * X << endl;

  cout << "----- ATLAS" << endl;

  Eigen::VectorXi ipiv( 4 );

  clapack_sgesv(
#ifdef EIGEN_DEFAULT_TO_ROW_MAJOR
    CblasRowMajor,
#else
    CblasColMajor,
#endif
    A.rows(),
    B.cols(),
    A.data(),
#ifdef EIGEN_DEFAULT_TO_ROW_MAJOR
    A.cols(),
#else
    A.rows(),
#endif
    ipiv.data(),
    B.data(),
#ifdef EIGEN_DEFAULT_TO_ROW_MAJOR
    B.cols()
#else
    B.rows()
#endif
  );

  cout << "piv = " << ipiv.transpose() << endl;
  cout << "LU = " << endl << A << endl;
  cout << "X =" << endl << B << endl;

  return 0;
} 
```

我用`g++ -std=c++11 -Wall -Wextra -g -llapack -lcblas -latlas`. `clapack_sgesv`只要`EIGEN_DEFAULT_TO_ROW_MAJOR`未定义，上述调用给出与 Eigen 求解器相同的结果。

```
----- Eigen
A = 
  0.680375   0.823295  -0.444451   -0.270431
 -0.211234  -0.604897   0.10794     0.0268018
  0.566198  -0.329554  -0.0452059   0.904459
   0.59688   0.536459   0.257742    0.83239
B = 
 0.271423 -0.967399 -0.686642  0.997849
 0.434594 -0.514226 -0.198111 -0.563486
-0.716795 -0.725537 -0.740419  0.0258648
 0.213938  0.608353 -0.782382  0.678224
X = 
  4.29176  -3.45693   -3.46864   0.547927
 -1.3688    2.04333    1.13806   0.735351
  5.6716   -0.593909  -2.65158  -0.0154493
 -3.69446   2.07672    1.6349   -0.0472447
AX = 
 0.271423  -0.967399  -0.686642   0.997849
 0.434594  -0.514226  -0.198111  -0.563486
-0.716796  -0.725537  -0.740419   0.0258648
 0.213938   0.608353  -0.782382   0.678224
----- ATLAS
piv = 0 2 3 3
LU = 
 0.680375   0.823295  -0.444451  -0.270431
 0.832185  -1.01469    0.32466    1.12951
 0.877281   0.183112   0.588201   0.862807
-0.310467   0.344235  -0.241085  -0.237964
X =
  4.29176   -3.45694   -3.46864    0.547927
 -1.3688     2.04333    1.13806    0.735351
  5.6716    -0.593909   -2.65158  -0.0154493
 -3.69446    2.07672    1.6349    -0.0472447 
```

如果我定义它，则 ATLAS 的结果是错误的。

```
----- Eigen
[... same as above ...]
----- ATLAS
piv = 1 1 3 3
LU = 
 0.823295  0.826405  -0.328474  -0.539844
-0.604897  0.288656  -0.595488  -0.757338
-0.329554  0.838543   1.29555    0.31797
 0.536459  0.153548   1.10004    0.313854
X =
 -2.21567   2.33841  -0.554441  1.45218
 -2.60368   1.14776  -3.83383   1.63747
 -5.05167   2.4991   -3.36881   3.08596
  6.03571  -1.84576   8.32067  -4.90008 
```

我的第一个怀疑当然是我把电话搞砸了`clapack_sgesv()`。但是除了设置存储顺序和将前导维度从行数切换到列数之外，似乎没有任何必要。

我注意到的另一件真正令人困惑的事情如下：当我尝试仅解决一个右侧的问题时，`clapack_sgesv()`调用失败并显示`Parameter 8 to routine clapack_sgesv was incorrect, ldb must be >= MAX(N,1): ldb=1 N=4`. 这在数学上没有*任何*意义。

我怀疑我的错误一定很明显，但我没有看到。

**我的`clapack_sgesv()`调用有什么问题导致它在行主要存储顺序中失败？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:18:28.000

我发现了我的错误。正如[ATLAS 常见问题解答](http://math-atlas.sourceforge.net/faq.html#RowSolve)中所解释的，右侧不被视为矩阵，而是在内存中相邻的列向量的集合。如果存储顺序是列优先，这并没有什么区别，但对于行优先的存储顺序却有影响，因为列向量的元素在内存中不再相邻。如果始终以列主要格式存储 RHS 和解决方案“矩阵”，它就可以工作。

# php - 如果我使用 CodeIgniter，为数据库搜索清理 $_GET 的最佳方法是什么？

> ID：14538024
> 
> 赞同：2
> 
> 时间：2013-01-26T14:47:34.973
> 
> 标签：php, mysql, codeigniter

我正在编写一个搜索功能，使用户能够搜索我的数据库中的特定表。我的网站在 CodeIgniter 上运行。

对于搜索功能，我使用**$_GET**而不是 CodeIgniter $this->input-get()，因为我在辅助函数中使用后者时遇到了麻烦。

现在，这是一个安全问题：

清理和过滤 $_GET 数组中的恶意字符以防止 XSS 和 SQL 注入的最佳方法是什么？

请记住，$_GET 数组中的数据将用于查询数据库并从中检索信息。

有没有一种递归方式来清理整个 $_GET 数组而不必逐个遍历元素？

我应该使用 PHP 的过滤方法还是 CodeIgniter 的？

任何建议将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:22:51.623

Codeigniter 默认禁用 $_GET。使用 URI 类，您可以模拟 $_GET 变量：

[使用 CodeIgniter 获取 URL 中的参数](https://stackoverflow.com/questions/334708/get-parameters-in-the-url-with-codeigniter)

您可以绕过它并使用 $_GET，听起来您已经完成了。但我不建议这样做。您应该使用[CodeIgniter 的 Input 类](http://ellislab.com/codeigniter/user-guide/libraries/input.html)。这提供了 XSS 过滤，您可以通过运行以下命令清理整个 $_GET 数组：

```
$this->input->get(NULL, TRUE); // returns all GET items with XSS filter 
```

如果您使用 Codeigniter 的数据库实用程序类来运行查询，它具有内置的转义功能。请查看转义查询部分。

[http://ellislab.com/codeigniter/user-guide/database/queries.html](http://ellislab.com/codeigniter/user-guide/database/queries.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:58:58.073

您可以使用 $this->db->e​​scape($variable) 来转义查询中的值。强烈建议使用 CI 的输入类。

阅读更多：[http ://ellislab.com/codeigniter/user-guide/database/queries.html](http://ellislab.com/codeigniter/user-guide/database/queries.html)

# javascript - JavaScript 弹出网址

> ID：14538026
> 
> 赞同：1
> 
> 时间：2013-01-26T14:47:56.967
> 
> 标签：javascript, web, popup

如何获取由 JS 打开的弹出窗口的 url。这是我的代码：

```
var _url = 'someurlhere';
    var popupwindow = window.open(_url, "Popup", 'width=800, height=600');
    var _this = this;

    var pollTimer   =   window.setInterval(function() {
        try {
            console.log(popupwindow.document.URL);
        } catch(e) {
            console.log(e.message);
        }
    }, 500); 
```

但我在`Cannot read property 'URL' of undefined`console.log(e.message) 上遇到错误。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:57:21.690

它不起作用，因为您使用的 url 与运行脚本的页面不同的域。这违反了“[同源政策](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)”。IOW 它是 XSS，不允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:52:21.973

`popupwindow.location.href`改为使用`popupwindow.document.URL`

# c - 使用 fopen 创建文件，但文件未出现在驱动器上

> ID：14538027
> 
> 赞同：0
> 
> 时间：2013-01-26T14:48:00.890
> 
> 标签：c, io

```
#include<stdio.h>
#include<alloc.h>

/*What the linked list contains.*/
struct stud
{
    char studNumber[13],lastName[21],firstName[21];
    float finalGrade;
    struct stud *sp;
};

/*This subroutine will SHOW the MENU to the user.*/
showMenu()
{
    int choice;
    clrscr();

    do
    {
        printf("MENU:\n\n1\. CREATE\n2\. READ\n3\. UPDATE\n4\. DELETE\n5\. SAVE\n6\. QUIT\n\nEnter your choice : ");
        scanf("%d",&choice);
    }while( choice<1 || choice>6 );

    return choice;
}

/*This subroutine will insert a new record at the end of the list.*/
struct stud* createRec( struct stud *head,int recordCounter,int firstInputCheck )
{
    struct stud *trail;
    char ans;

    clrscr();

    /* To see if there was already a first input. */
    if( firstInputCheck==0 )
    {
        ans='y';

        printf("Enter the student's student number : ");
        scanf("%s",head->studNumber);
        printf("\nEnter the student's last name : ");
        scanf("%s",head->lastName);
        printf("\nEnter the student's first name : ");
        scanf("%s",head->firstName);
        printf("\nEnter the student's final grade : ");
        scanf("%f",&head->finalGrade);

        trail=head;
        trail->sp=NULL;
        recordCounter++; /* A counter to see if it already exceeded 100 records. */
        firstInputCheck++; 

        printf("\n\nWould you like to enter another record? [y/n]");
        ans=getche();
    }

    while( recordCounter!=100 && ( (ans=='y') || (ans=='Y') ) )
    {
        /* Input more records. */
        while( (ans=='y') || (ans=='Y') )
        {
            struct stud *t=malloc( sizeof(struct stud) );

            clrscr();

            trail->sp=t;

            printf("Enter the student's student number : ");
            scanf("%s",t->studNumber);
            printf("\nEnter the student's last name : ");
            scanf("%s",t->lastName);
            printf("\nEnter the student's first name : ");
            scanf("%s",t->firstName);
            printf("\nEnter the student's final grade : ");
            scanf("%f",&t->finalGrade);

            trail=t;
            recordCounter++;

            printf("\n\nWould you like to enter another record? [y/n]");
            ans=getche();
        }
    }

    trail->sp=NULL;

    return head;
}

/* This subroutine will let the user input the student number and will display the desired record. */   
void showRec( struct stud *head )
{
    int foundIt=0;
    struct stud *trail;
    char stdNum[12];

    clrscr();

    printf("Input the student number of the student : ");
    scanf("%s",stdNum);

    trail=head;

    /* This do-while will find the desired record - TO BE CREATED IN A NEW SUBROUTINE. */
    do
    {
        if( strcmp( trail->studNumber,stdNum )==0 )
        {
            foundIt++;
        }else{
            trail=trail->sp;
        }
    }while( foundIt==0 && trail!=NULL );

    if( foundIt!=0 )
    {
        printf("\n\nStudent %s's records are as follow:\n\n%s , %s , %s , %.1f",stdNum,trail->studNumber,trail->lastName,trail->firstName,trail->finalGrade);
    }else{
        printf("\n\nSuch student number does not exist.");
    }
}

/* This subroutine will let the user input the student number and the user will update the existing records EXCEPT student number. */
struct stud* updateRec( struct stud *head )
{
    int foundIt=0;
    struct stud *trail;
    char stdNum[12];

    clrscr();

    printf("Input the student number of the student : ");
    scanf("%s",stdNum);

    trail=head;

    /* This do-while will find the desired record - TO BE CREATED IN A NEW SUBROUTINE. */
    do
    {
        if( strcmp( trail->studNumber,stdNum )==0 )
        {
            foundIt++;
        }else{
                trail=trail->sp;
        }
    }while( foundIt==0 && trail!=NULL );

    if( foundIt!=0 )
    {
        printf("\nEnter the new student's last name : ");
        scanf("%s",trail->lastName);
        printf("\nEnter the new student's first name : ");
        scanf("%s",trail->firstName);
        printf("\nEnter the new student's final grade : ");
        scanf("%f",&trail->finalGrade);
        printf("\n\nThe new student %s's records are as follow:\n\n%s , %s , %s , %.2f",stdNum,trail->studNumber,trail->lastName,trail->firstName,trail->finalGrade);
        printf("\n\nRecords updated!");
    }else{
        printf("\n\nSuch student number does not exist.");
    }

    return head;
}

/* This subroutine will mark a record for deletion. */
struct stud* deleteRec( struct stud *head )
{
    int foundIt=0;
    struct stud *trail;
    char stdNum[12];

    clrscr();

    printf("Input the student number of the student's record for deletion : ");
    scanf("%s",stdNum);

    trail=head;

    /* This do-while will find the desired record - TO BE CREATED IN A NEW SUBROUTINE. */
    do
    {
        if(strcmp(trail->studNumber,stdNum)==0)
        {
            foundIt++;
        }else{
            trail=trail->sp;
        }
    }while( foundIt==0 && trail!=NULL );

    if( foundIt!=0 )
    {
        trail->studNumber[0]='*';
        printf("\n\nDeletion mark placed! %s",trail->studNumber);
    }else{
        printf("\n\nSuch student number does not exist.");
    }   

    return head;
}

/* All the records EXCEPT the ones with deletion marks will be saved in a text file named CLASSLIST.TXT in this subroutine. */
struct stud* saveRecords( struct stud *head )
{
    FILE *cl;
    struct stud *trail;

    trail=head;

    clrscr();

    /* CLASS = file name, wt = write only text file */
    cl=fopen( "C:\\CLASSLIST.txt" , "w" );

    do
    {
        if(trail->studNumber[0]!='*')
        {
            fprintf( cl , "%s , %s , %s , %.1f\n" , trail->studNumber, trail->lastName, trail->firstName, trail->finalGrade );
            printf("Student %s's records are now written on CLASSLIST.txt\n",trail->studNumber);
        }

        trail=trail->sp;
    }while( trail!=NULL );

    fclose(cl);
}

/* The main subroutine */
main()
{
    struct stud *head=malloc( sizeof(struct stud) );
    int choice,recordCounter=1,firstInputCheck=0;

    do
    {
        choice=showMenu();

        switch( choice )
        {
            case 1: head=createRec( head,recordCounter,firstInputCheck );
                    break;
            case 2: showRec( head );
                    break;      
            case 3: head=updateRec( head );
                    break;
            case 4: head=deleteRec( head );
                    break;
            case 5: saveRecords( head );
                    break;

            default: printf("\n\nProgram terminated.");
        }

        printf("\n\nPress any key to continue.");
        getch();

    }while( choice!=6 );
} 
```

这是我的代码，它工作正常，只是我在 C: 中没有看到新制作的 CLASSLIST.txt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:08:56.363

在这里打开后：

```
cl=fopen( "C:\\CLASSLIST.txt" , "w" ); 
```

确保您的指针不为空（这意味着该文件**实际上是**为写入而打开的）：

```
if (cl == NULL) {
    // some error has occurred
    // i.e. you don't have WRITE permission on C:\
} else {
    // do write into file
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:13:00.950

即使您确实说`cl = fopen("C:\\CLASSLIST.txt", "w");`并且没有访问 C 驱动器的权限，也不会创建该文件。

为此，请确保您有权访问 C 盘（检查是否禁用了 UAC），或以管理员身份运行可执行文件（对于 windows vista、7 和 8）。

或者，您可以将文件保存在您有权写入的文件夹中，例如您的`Documents`文件夹中。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:15:44.890

我设法编译并运行了您的程序（在进行了一些更改以使其更符合 C99 之后），然后`CLASSLIST.txt`在当前目录中成功创建。

尝试为您的文件指定不同的位置或确保您具有写入`C:\`根目录的权限。

# c# - 清除组合框

> ID：14538032
> 
> 赞同：-4
> 
> 时间：2013-01-26T14:48:28.843
> 
> 标签：c#, winforms

我已经尝试了所有可能的方法来清除组合框中的数据，但令人惊讶的是没有任何效果。

我希望在选定的更改索引中`combobox1`加载一些值。值已加载，但是当我移动到下一个索引时，我编写了以下代码：`combobox2``combobox1`

```
if (SView._StudentSchool_.Equals("Pre-School")) 
{               
    TB.TimeBlock("Pre-School");
    comboBox3.Enabled = true;
    comboBox3.Items.Clear();

    for (int i = 1; i < TB.i+1; i++) 
    {
        comboBox3.Items.Add(TB.TimeBlock_[j]);
        j++;
    } 
}
else if (SView._StudentSchool_.Equals("Kindergarten")) 
{                 
    TB.TimeBlock("Kindergarten");
    comboBox3.Enabled = true;
    comboBox3.Items.Clear();

    for (int i = 1; i < TB.i + 1; i++)
    {
        comboBox3.Items.Add(TB.TimeBlock_[j]);
        j++;
    }
}
else if (SView._StudentSchool_.Equals("Primary School")) 
{
    TB.TimeBlock("Primary School");
    comboBox3.Enabled = true;
    comboBox3.Items.Clear();

    for (int i = 1; i < TB.i + 1; i++)
    {
        comboBox3.Items.Add(TB.TimeBlock_[j]);
        j++;
    } 
} 
```

该`Clear()`功能不起作用，其他方法也不起作用，`.datasourse = null`或者`.Text = ""`使用这样的循环删除项目：

```
for (int i = 0; i < comboBox3.Items.Count; i++)
{
    comboBox3.Items.RemoveAt(i);
    i--;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:55:42.427

我想您的组合框 DropDownStyle 属性设置为 DropDown。在这种情况下，您需要致电

```
comboBox3.Items.Clear();
comboBox3.ResetText();
comboBox3.SelectedIndex = -1; 
```

如果您将属性设置为 DropDownStyle 只需调用 Items.Clear 就足够了

如果您在代码中的某处设置了 DataSource，[Microsoft 支持描述](http://support.microsoft.com/kb/327895)了一种清除项目的不同方法，首先订阅事件 DataSourceChanged 然后调用

```
comboBox3.DataSource = null; 
```

事件的代码应该是

```
private void comboBox3_DataSourceChanged(object sender, System.EventArgs e)
{
    ComboBox ctb = (ComboBox) sender;
    if (ctb.DataSource == null)
        ctb.Items.Clear();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:59:42.130

这对于评论来说太大了，所以它是一个 CW 答案......

根据您所展示的内容，如果您这样做，则不需要 3 个 if 语句：

```
 TB.TimeBlock(SView._StudentSchool_);
        comboBox3.Enabled = true;
        comboBox3.Items.Clear();
        for (int i = 1; i < TB.i + 1; i++)
        {
            comboBox3.Items.Add(TB.TimeBlock_[j]);
            j++;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T15:16:04.173

> 我希望我的组合框 1 将一些值加载到**组合框 2中**

我不知道这是否是一个错字，但您可能正在查看错误的组合框。

# php - md5盐密码php

> ID：14538034
> 
> 赞同：2
> 
> 时间：2013-01-26T14:48:35.423
> 
> 标签：php, security, encryption, md5

我知道关于这个主题有很多问题，但我真的需要问这个。

今天我一直在研究用 md5 加密密码。

所以我所做的是。

我有 4 种盐。（它们会根据用户值而变化）

1.  从电子邮件 id 和 substr 然后 md5 他们
2.  from email 和 id substr 其他职位
3.  一个长字符串，substr 然后 md5 它
4.  另一个长字符串，substr 然后 md5 它

然后我 md5 salt1 和 3 以及 salt 2 和 salt4 的密码

此后，每当用户更改电子邮件或更改 ID 时，我都必须自动更改密码。

对此你们怎么看？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T14:54:35.617

没有。

MD5 坏了。

使用邮件地址作为盐是个好主意。但是使用 md5 不是。请改用 bcrypt、scrypt 或 pbkdf2。

不要发明你自己的加密，除非你真的知道你在做什么，相信我，你不会

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T15:45:01.523

首先，让我们定义几个术语。

*   **加密**是指您对消息进行编码以使其无法读取。加密涉及[明文](http://en.wikipedia.org/wiki/Plaintext)、[密码](http://en.wikipedia.org/wiki/Cipher)和[密钥](http://en.wikipedia.org/wiki/Key_%28cryptography%29)。这就像将一本书（明文）放在一个上锁的房间（密码）中，只能使用已知工具（钥匙）打开。加密有很多种，但这是一个简单的描述。加密是双向的，这意味着您可以对消息进行编码和解码。

*   ***加密*****哈希**是指您获取任何类型的数据并为其生成固定大小的值（通常称为*哈希*或*摘要*）。加密哈希是单向的，这意味着您无法逆转该过程。

*   **盐**是一个唯一的字符串，或一组位，类似于[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)（一个唯一的数字，只使用一次）。盐仅用于*使*破解者无法处理哈希列表。它们不应该被用作秘密（即像加密密钥一样）。人们通常在谈到盐时谈论随机性的唯一原因是因为他们想要生成独特的盐（例如，如果随机性不够大，他们可能会得到碰撞盐）。

好的，现在讨论如何散列密码。

一种相对安全的密码散列方法是简单地将唯一的散列附加到密码上，然后将盐与密码一起保存：

```
$pass = 'this is my password';
$salt = uniqid('', true);
$hash = sha1($pass . $salt);
// INSERT INTO users ('hash', 'salt') VALUES ('$hash', '$salt') WHERE ... 
```

如果您的网站没有从其用户那里检索任何敏感数据，那么这是一种不错的方法。

如果您处理敏感数据，或者如果您只是想确保您正在尽一切努力确保数据安全，那么有一个 PHP 函数可以为您进行哈希处理。它被称为[`crypt()`](http://php.net/crypt)（阅读文档以了解它是如何工作的）。以下是如何使用该函数对密码进行哈希处理的示例：

```
$pass = 'this is my password';
$salt = 'unique string';
$hash = crypt($password, '$2y$07$'.$salt.'$');
echo $hash; 
```

这将安全地散列密码。

要意识到的是，该`crypt()`功能比您想出的任何功能都安全得多（除非您是该领域的专家）。

在较新版本的 PHP (5.5.0+) 中，有一个[密码散列 API](http://php.net/manual/en/book.password.php)，可以更简单地散列密码。

还有各种散列库。[PHPpass](http://www.openwall.com/phpass/)是一种流行的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T14:54:26.483

这很糟糕，因为它使用 MD5。

MD5 是一种非常快速的操作。它可以在显卡硬件上每秒执行数十亿次。将其用于任何与密码相关的事情都被认为是不好的做法。

使用 bcrypt。使用随机盐。使用即将推出的 PHP API 对密码进行散列、验证和重新散列。此包含文件为从 PHP 5.3.7 开始的版本实现它：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-12T20:58:56.457

嗯，**“ *MD5坏了，坏*了”**有点夸张。即使它可以用大量 CPU 进行暴力破解，它也没有“损坏”，并且对于很多涉及散列的事情来说仍然是一个非常有用的算法。

所以“ *MD5 不应该用于密码加密*”对我来说听起来好多了。

使用 PHP 时，一个简单且安全的选择是依赖[`password_hash()`](https://www.php.net/manual/en/function.password-hash.php)（它本机生成随机盐）和[`password_verify()`](https://www.php.net/manual/en/function.password-verify.php)函数。

优点是加密算法将随着每个新的 PHP 版本透明地更新（目前`PASSWORD_DEFAULT`设置为`bcrypt`，但如果 bcrypt 被“破坏”，它可以设置为更新的算法），这使得使用这些函数的任何代码都非常有弹性.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-26T14:54:32.613

我个人不建议将用户 ID 和他的电子邮件涉及到他的密码散列中。您可以通过以下方式处理密码：

*   基于用户注册时生成的随机字符串为每个用户动态加盐
*   在盐的一部分前面加上另一部分在密码周围
*   双 md5: md5(md5($password))
*   等等。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-26T14:59:34.570

一种简单的方法是为每个用户生成一个随机盐，然后像这样散列你的密码

```
public function encodePassword( $raw, $salt ) {
    return hash('sha256', $salt.$raw);
} 
```

**对于高安全性哈希，您可以查看此链接，该链接解释了如何实现 PBKDF2：**

[http://crackstation.net/hashing-security.htm#phpsourcecode](http://crackstation.net/hashing-security.htm#phpsourcecode)

# mysql - 比较使用 CASE 和 USER VARIABLES

> ID：14538045
> 
> 赞同：3
> 
> 时间：2013-01-26T14:49:53.047
> 
> 标签：mysql

我有这张表，我只想看 AB

```
ID     CODE       COUNT   
102    AB         9
101    AB         8
100    AC         23    //not important!!!!
99     AB         7
98     AB         6
97     AB         5
96     AB         0 
```

对此进行了交谈

```
ID    NEWID     CODE       COUNT   
102   102       AB         9
101   101       AB         8
99    100       AB         7
98    99        AB         6
97    98        AB         5
96    97        AB         0 
```

使用

```
SELECT
t.ID, t.CODE, t.COUNT,
@PREVCOUNT - t.COUNT DIFFERENCE,
@PREVCOUNT := t.COUNT  -- Updates for the next iteration, so it
                       -- must come last! 
FROM
(SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
(SELECT @PREVCOUNT := NULL) _uv; 
```

[http://sqlfiddle.com/#!2/e0b8b/36/0](http://sqlfiddle.com/#!2/e0b8b/36/0)

所以

```
Step 1: 9 - 1 = 1
Step 2: 8 - 7 = 1
Step 3: 7 - 6 = 1
Step 4: 6 - 5 = 1
Step 5: 5 - 0 = 5 
```

现在可能有一个案例我有

```
ID    NEWID     CODE       COUNT   
102   102       AB         4
101   101       AB         2
99    100       AB         1
98    99        AB         0
97    98        AB         7
96    97        AB         0 
```

然后我想数

```
Step 1: 4 - 2 = 2
Step 2: 2 - 1 = 1
Step 3: 1 - 0 = 1
Step 4: 0 - 7 = -7      //want  to discard this negative value
Step 5: 5 - 0 = 7 
```

我想放弃第 4 步，因为这是否定的。

现在我使用此代码丢弃负值

```
SELECT
t.ID, t.CODE, t.COUNT,
@PREVCOUNT,
@PREVCOUNT - t.COUNT DIFFERENCE,
CASE @PREVCOUNT - t.COUNT WHEN @PREVCOUNT - t.COUNT >= 0 THEN 'equal or bigger' ELSE 'smaller' END,
@PREVCOUNT := t.COUNT  -- Updates for the next iteration, so it
                       -- must come last!
FROM
(SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
(SELECT @PREVCOUNT := NULL) _uv; 
```

执行此代码后，我希望看到所做的比较大于或等于 0，而不是得到*非常*不同的结果。

下面是一个链接，看看我的意思：

[http://sqlfiddle.com/#!2/6be4a/1](http://sqlfiddle.com/#!2/6be4a/1)

我真的很想知道这里出了什么问题，我很想有一个解决方案。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:07:45.817

这个怎么样：

[http://sqlfiddle.com/#!2/6be4a/7](http://sqlfiddle.com/#!2/6be4a/7)

```
select * from (
SELECT
    t.ID, t.CODE, t.COUNT,
    @PREVCOUNT,
    @PREVCOUNT - t.COUNT DIFFERENCE,
    CASE @PREVCOUNT - t.COUNT WHEN @PREVCOUNT - t.COUNT >= 0 THEN 'equal or bigger' ELSE 'smaller' END,
    @PREVCOUNT := t.COUNT  -- Updates for the next iteration, so it
                           -- must come last!
FROM
    (SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
    (SELECT @PREVCOUNT := NULL) _uv
group by t.id, t.code
)x
where x.difference >= 0; 
```

# c - 有没有办法通过名称获取 Windows 中当前进程的函数？

> ID：14538047
> 
> 赞同：3
> 
> 时间：2013-01-26T14:50:20.430
> 
> 标签：c, windows, winapi, dll, posix

在 Windows 上是否有以下等效项？

```
#include <dlfcn.h>
#include <stdio.h>

void main_greeting(void)
{
    printf("%s\n", "hello world");
}

void lib_func(void)
{
    void (*greeting)(void) = dlsym(RTLD_MAIN_ONLY, "main_greeting");

    greeting ? greeting() : printf("%s\n", dlerror());
}

int main(void)
{
    lib_func();

    return 0;
} 
```

这是一个简短的片段，真正的目的是从动态加载的库中`main_greeting`的函数 () 内部调用已知存在于主进程 ( ) 中的函数。`lib_func`主进程不可修改，因此无法重写以传递回调。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T14:55:41.597

在 Windows 上，可执行文件和 DLL 具有相同的格式（`PE`现在），因此可执行文件也可以导出函数。`GetProcAddress(GetModuleHandle(NULL),TEXT("main_greeting"))`如果函数是从可执行文件中导出的，它将执行您想要的操作。它由`-Wl,-export-all-symbols`mingw GCC 完成。

我相信微软的链接器没有等效的选项，所以如果你使用他们的工具链，你必须：

*   `__declspec(dllexport)`在源文件中导出每个函数，
*   *或*编写一个[模块定义文件](http://msdn.microsoft.com/en-us/library/28d6s79h.aspx)列出每个导出的函数，将其传递给链接器，
*   *或* [自动生成模块定义文件](https://stackoverflow.com/questions/225432/export-all-symbols-when-creating-a-dll)。

# java - Memory related issue with Strings in java network program

> ID：14538048
> 
> 赞同：0
> 
> 时间：2013-01-26T14:50:27.790
> 
> 标签：java, string, memory, network-programming

I am working on a small java network program for instant messages using sockets. In the application the messages are read using the `DataOutputStream's` `readUTF()` method, which return a `String object`. So every time a new message is arrived or sent a new String object is created in the memory, which in turn consumes memory. After a long time of communication there are several String objects in the memory.

So is there any way I can avoid this or I should try some other way of recieving messages. I am very new to Java network programming and its concepts. Thanks. I have a very bad coding style still I will try to make the question clear.

```
String recievedMessage = dataInputStream.readUTF();
String messageType = recievedMessage.substring(0, recievedMessage.indexOf("##"));
String message = recievedMessage.substring(recievedMessage.indexOf("##") + 2, recievedMessage.indexOf("$$")); 
```

After this the message object is inserted in a `JTextPane` using a `StyledDocument`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:00:04.307

这并非特定于网络编程：创建瞬态字符串几乎不需要任何成本，并且可以有效地进行垃圾收集。如果您将整个对话记录保留在 RAM 中，那么您开始遇到问题的唯一一点就是。如果您确实需要保存脚本，只需将所有消息转发到一个文件，而不保留 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:03:39.793

它是什么类型的网络，例如面向连接或连接较少？你有内存问题吗？但我相信当数据包从点到点发送时，它会根据消息类型消耗一些内存，然后应该将其标记为垃圾收集。如果您提及您到底有什么问题，那就太好了。

# mysql - How to create scripts which will across windows/linux environments

> ID：14538049
> 
> 赞同：0
> 
> 时间：2013-01-26T14:50:42.450
> 
> 标签：mysql, shell, batch-file

We have a simple script to connect to the database (`mysql -u root -p -h localhost`). I don't want to create 2 scripts (`.bat, .sh`), how do I just create a single script to address this issue.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:54:16.283

您可能想尝试一下 MSYS：http: [//www.mingw.org/wiki/MSYS](http://www.mingw.org/wiki/MSYS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:11:54.323

您可以使用 perl 脚本。Perl 是强大的脚本媒介，它独立于平台。use 可以在 perl 的变量中插入批处理命令。例如

```
#!C:\Perl64\bin\perl
my $cmd = 'mysql - u root -p -h localhost';
system $cmd; 
```

这应该可以正常工作。

# javascript - Detect URL change in Javascript

> ID：14538050
> 
> 赞同：0
> 
> 时间：2013-01-26T14:51:08.897
> 
> 标签：javascript

I just tried this code and it works well to detect URL,

```
<script type="text/javascript"> $(document).ready(function () {
    if(window.location.href.indexOf("#2") > -1) {
       alert("your on slide 2");
    } }); </script> 
```

But not for my case.

In fact, I want to put this in a slideshow which works like this : `www.slideshow.com/#1, www.slideshow.com/#2... etc`

So this code run if I refresh the `slide 2`, but not if I acces to this slide by clicking on the `Next Slide` Button on the first slide. I hope you understand my problem and help me find a solution

Thank you very much !

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:56:42.210

window.location.hash 和 onhashchange 事件是您正在寻找的。

[http://stereointeractive.com/blog/2008/11/21/javascript-get-window-hashanchor-get-link-target/](http://stereointeractive.com/blog/2008/11/21/javascript-get-window-hashanchor-get-link-target/)

[JavaScript/jQuery - onhashchange 事件解决方法](https://stackoverflow.com/questions/2783760/javascript-jquery-onhashchange-event-workaround)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:54:09.133

您可能想使用[pushState API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

然后，您可以收听[popstate 事件](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)以查看用户导航的时间。

如果你想支持不支持这个的浏览器，你可能需要一个 pushState [polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# android - 执行 API 方法时出错：media.videoPlay using trigger.io

> ID：14538055
> 
> 赞同：1
> 
> 时间：2013-01-26T14:51:50.087
> 
> 标签：android, trigger.io

我正在尝试使用 trigger.io 播放视频。代码如下：

```
 var urlString = "....mp4";
forge.tools.getURL(urlString, function (myUrl) {
    forge.media.videoPlay(
        myUrl,
        function() {
            alert("ok");
        },
        function(content) {
            alert(content)
        }
    );
}); 
```

当我使用 IOS 模拟器启动此应用程序时，它可以工作。但是当我在 Android 模拟器上尝试时，我收到以下错误：

```
[WARNING] Error while executing API method: media.videoPlay
[DEBUG] Returned: {"content":{"message":"Forge Java error: ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat={link}https://s3-eu-west-1.amazonaws.com/braingasm-video/6bPLY7orbVY.mp4{/link} typ=video/* }","type":"UNEXPECTED_FAILURE","subtype":null,"full_error":"android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat={link}https://s3-eu-west-1.amazonaws.com/braingasm-video/6bPLY7orbVY.mp4{/link} typ=video/* }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
at android.app.Activity.startActivityForResult(Activity.java:2817)
at android.app.Activity.startActivity(Activity.java:2923)
at io.trigger.forge.android.modules.media.API.videoPlay(API.java:13)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at io.trigger.forge.android.core.ForgeApp.callJavaFromJavaScript(ForgeApp.java:247)
at io.trigger.forge.android.core.ForgeJSBridge$1.run(ForgeJSBridge.java:17)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
at java.lang.Thread.run(Thread.java:1096) 
```

"},"callid":"BB45C58C-BE4B-42A0-B76A-4EC6B388B850","status":"错误"}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:52:45.310

我不确定您是否可以在 Android 模拟器上播放视频，此错误意味着没有可用于播放视频的应用程序。如果您在设备上运行相同的代码，它应该使用内置的视频播放器。

# c++ - 编辑 QTreeWidgetItem 时捕获 ESC 按键事件

> ID：14538057
> 
> 赞同：4
> 
> 时间：2013-01-26T14:52:05.687
> 
> 标签：c++, qt, networking, event-handling, key

我正在 Qt 中开发一个项目。我有一个 QTreeWidget(filesTreeWidget) 带有一些文件名和一个用于创建文件的按钮。Create 按钮向 filesTreeWidget 添加一个新项目（项目的文本是“”），该项目被编辑以选择名称。当我按 ENTER 时，文件名通过套接字发送到服务器。当我按 ESC 时出现问题，因为文件名仍然是“”并且没有发送到服务器。我试图覆盖 keyPressEvent 但不工作。有任何想法吗？我在编辑项目时需要捕捉 ESC 按下事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T15:43:45.097

您可以继承 QTreeWidget，并`QTreeView::keyPressEvent`像这样重新实现：

```
void MyTreeWidget::keyPressEvent(QKeyEvent *event)
{
    if (event->key() == Qt::Key_Escape)
    {
        // handle the key press, perhaps giving the item text a default value
        event->accept();
    }
    else
    {
        QTreeView::keyPressEvent(event); // call the default implementation
    }
} 
```

可能有更优雅的方法来实现你想要的，但这应该很容易。例如，如果你真的不想子类化，你可以安装一个事件过滤器，但我不喜欢这样做，特别是对于有很多事件的“大”类，因为它相对昂贵。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T19:11:44.527

实现`keyPressEvent`功能如下：

```
void TestTreeWidget::keyPressEvent(QKeyEvent *event)
{
    switch (event->key())
    {
        case Qt::Key_Escape:
        {
            escapeKeyPressEventHandler(); 
            event->accept();
            break;
        }
        default:
            QTreeWidget::keyPressEvent(event);
    }
}

TestTreeWidget::escapeKeyPressEventHandler()
{
     // work with your QTreeWidgetItem here
} 
```

# php - PHP mysqli 连接类 - 无法访问外部的连接变量。范围问题

> ID：14538059
> 
> 赞同：3
> 
> 时间：2013-01-26T14:52:08.513
> 
> 标签：php, class, variables, scope

我不熟悉以 OOP 方式使用 PHP，但发现我的数据库连接类存在问题。

我在这里有一个带有这个 mysqli 连接类的文件

```
$db_name = 'dbname';
$db_user = 'dbuser';        
$db_password = 'dbpassword';
$db_host = 'localhost';

class database {

    public $mysqli;

    public function connect($db_host, $db_user, $db_password, $db_name){

        $this->mysqli = new mysqli($db_host, $db_user, $db_password, $db_name);

        if ($mysqli->connect_errno) {
            return "Sorry Andre, but you seem to have messed up the DB connection :(";
        }
    }
}

$newConnection = new database;
$newConnection->connect($db_host, $db_user, $db_password, $db_name); 
```

然后我想在另一个文件的数据库连接中使用变量 $mysqli - 这是一个使用 $mysqli 变量连接的简单插入数据库。我在连接文件中包含了上述内容，但是当我在数据库类中调用该方法时，似乎没有返回 $mysqli 变量。我收到 PHP 错误说...

```
Fatal error: Call to a member function prepare() on a non-object in... 
```

我已经看到使用

```
global $mysqli; 
```

可以，但是我想以正确的方式来做，因为我听说这不是好的做法。

我知道我在这里可能做错了一些事情，因为我是使用 OOP 的新手，但我假设通过在连接函数中返回该变量，我可以通过在外部创建类来访问它。

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:54:54.753

你需要改变：

```
$mysqli->connect_errno 
```

到：

```
$this->mysqli->connect_errno 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:55:21.533

在外部使用它时，您可以通过实例访问类变量...

```
$newConnection = new database;
$newConnection->connect($db_host, $db_user, $db_password, $db_name);
$newConnection->mysqli /* here you have access from outside */ 
```

从内部你使用关键字 $this...

```
// like this from inside
if ($this->mysqli->connect_errno) {
    return "Sorry Andre, but you seem to have messed up the DB connection :(";
} 
```

如果您想保护您的变量免受外部访问，请使用：

```
 private $mysqli; 
  // instead of 
  public $mysqli; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T14:55:55.470

```
Fatal error: Call to a member function prepare() on a non-object in... 
```

这始终意味着，您调用该方法的对象不是对象。在您的情况下： mysqli 未初始化。

一般提示： connect 看起来像一些东西，应该在构造函数中。

```
class d {
  public function __construct($db_host, $db_user, $db_password, $db_name){
    $this->mysqli = new mysqli($db_host, $db_user, $db_password, $db_name);
    if ($this->mysqli->connect_errno) {
      return "Sorry Andre, but you seem to have messed up the DB connection :(";
    }
  }

  public $mysqli;
}

$foo = new d('host', 'user', 'pass', 'dbname');
$foo->mysqli->prepare("something"); 
```

因此，当您获取此类的实例时，它会自动初始化。同样，每次要初始化它时，您都可以保存一行。

# android - 从服务器读取和写入数据

> ID：14538060
> 
> 赞同：0
> 
> 时间：2013-01-26T14:52:12.160
> 
> 标签：android, mysql, database

我想从 android UI 在我的服务器数据库上读取和写入数据。

我有一台装有 MySQL 的主机。

对我有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:07:31.743

创建 php 为服务器上的数据创建 json。

使用 RoboSpice 通过网络加载您的 json。

见[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:56:36.700

[这](http://developer.android.com/training/basics/network-ops/connecting.html)是你的朋友。在服务器端，您应该创建 php 页面（或其他页面）并从您的应用程序向这些页面发出请求。

# c# - 从 File.ReadAll() 返回的 List 中的项目的顺序

> ID：14538061
> 
> 赞同：-4
> 
> 时间：2013-01-26T14:52:15.640
> 
> 标签：c#, data-structures, collections

我不太确定这个问题的答案是什么，所以我希望能提供信息来帮助我更好地理解我在这里拥有的东西。我的目标是将文本文件的内容读入列表，解析信息并删除孤立记录（文件中没有关联父记录/行的子记录/行），然后将剩余行写回文件按顺序。

我使用以下方法

```
IList<String> lines  = File.ReadAll(Filepath);
IList<String> secondlines = lines.Copy();

foreach (String line in lines) 
{
    If Brecord 
        foreach String record in secondlines 
        {
             if  record is same as Brecord 
                   //No Parent record found for this Brecord before it
                    Delete record 
              else if record is Parent of Brecord 
                     exit loop
         }
}

File.WriteAll(secondlines , SecondPath) 
```

我如何确保每次发生这种情况时，文件的内容都按照它们在文件中出现的顺序进行处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:17:22.340

There's no method `File.ReadAll`.

The methods `File.ReadAllLines` and `File.ReadLines` already return the lines of the file in the correct order. So you don't need to do anything to assure that.

(The difference between them is that `File.ReadAllLines` reads the entire file into memory at once and gives you an array with the full file contents, while `File.ReadLines` is lazy and only reads from the file when you `foreach` through the returned object. In the last case you don't have to read all of the file, and the entire file will not have to be in memory at once, since you read "line by line".)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:01:10.070

不是 100% 确定你的 if 语句在做什么，但为什么不使用 Linq

```
var lines = File.ReadAll(filepath)
                .Where(x=>( x.Something == "something else"));

File.WriteAll (lines, SecondPath) 
```

或者在你的情况下更有可能

```
var lines = File.ReadAll(filePath).Distinct(); 
```

这应该保持将行读入列表的顺序。在 foreach 循环期间修改对象的内容时也需要小心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:01:19.007

除非您在某处明确对它们进行排序或重新排序，否则您应该已经看到事情按照它们在文件中出现的顺序发生了。

*   实现的框架对象`IList`本质上是有序的
*   `File.ReadAllLines`按出现的顺序返回文本文件中的行列表。
*   枚举`IList`using`foreach`按顺序访问每个元素。
*   `File.WriteAllLines`将字符串按顺序写入新文件。

由于您粘贴的代码实际上并不是您正在使用的代码，因此无法查看您是否正在做一些更微妙的事情，从而破坏了输入列表中元素的顺序。特别是，我对您的工作方式非常感兴趣

`delete record`

部分，因为您*无法更改`IList`during enumeration*。我的怀疑是，无论您为生成第二个无重复列表所做的一切都是您的问题所在。

# python - 将 2 个列表添加到元组列表中

> ID：14538062
> 
> 赞同：0
> 
> 时间：2013-01-26T14:52:20.577
> 
> 标签：python

我有一个这样的清单

```
[(12,3,1),(12,3,5)] 
```

和另外两个列表

```
 [4,2] 
```

和

```
['A','B'] 
```

我想将这些添加到第一个列表中

```
[(12,3,4,'A',1),(12,3,2,'B',5) 
```

他们必须处于这个位置，因为我计划删除元组中最后一个值为 1 的位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:14:29.947

看，这里有一些魔法：

```
ts = [(12, 3, 1), (12, 3, 5)]
l1 = [4, 2]
l2 = ['A', 'B'] 
[t[:-1] + to_insert + t[-1:] for t, to_insert in zip(ts, zip(l1, l2))]
>> [(12, 3, 4, 'A', 1), (12, 3, 2, 'B', 5)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:20:04.617

```
def submerge(d, e, f):
    for g in d[:-1]:
        yield g
    yield e
    yield f
    yield d[-1] # if you want to remove the last element just remove this line

def merge(a, b, c):
    for d, e, f in zip(a, b, c):
        yield tuple(submerge(d, e, f))

a = [(12,3,1),(12,3,5)]
b = [4,2]
c = ['A','B'] 

print list(merge(a, b, c)) 
```

# ruby-on-rails-3 - 如何从 Rails 中的 mongodb 读取图像？

> ID：14538069
> 
> 赞同：0
> 
> 时间：2013-01-26T14:53:03.110
> 
> 标签：ruby-on-rails-3, mongoid, carrierwave

我正在添加carrierwave_mongoid 来存储图像，我已经将图像保存到mongo 我的数据是这样的：

```
 { "contentType" : "image/jpeg", "length" : 512659, "chunkSize" : 4194304, "uploadDate" : ISODate("2013-01-26T00:00:00Z"), "md5" : "3d44aa8fcfba7cae34fe9a592407410b", "filename" : "uploads/deal/image/295/15a11db8e441c610330af53a77e2b136.jpg", "_id" : 5 } 
```

我有一个故事模型：

```
class Deal
  include Mongoid::Document
  include Mongoid::Timestamps

  field :image,        :type => String
  field :status,       :type => Integer

  mount_uploader :image, ImageUploader
end 
```

我的 ImageUploader 代码在这里：

```
class ImageUploader < CarrierWave::Uploader::Base
...
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
end 
```

现在我想显示来自 mongodb 的图像，并且在我的视图中

```
<%= image_tag(@deal.image.url)  %> 
```

最后图像未显示在视图中并出现以下错误：

```
ActionController::RoutingError (No route matches [GET] "/assets/uploads/deal/image/295/15a11db8e441c610330af53a77e2b136.jpg"): 
```

我想知道如何通过carrierwave_mongoid 读取图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T03:56:37.993

`ActionController::RoutingError`表示您的 rails 应用程序不处理此类请求。

定义到控制器的路由以查询 gridfs 并发送图像。此外，您可能需要将 Nginx 配置为不处理静态文件等请求。

# javascript - 如何将单个 JSON 文件加载到 SproutCore 模型中？

> ID：14538072
> 
> 赞同：0
> 
> 时间：2013-01-26T14:53:32.383
> 
> 标签：javascript, model, sproutcore, sproutcore-2

我有一个 JSON 文件，其结构不统一，无法加载到单个模型中。它有一个屏幕的数据。典型的 JSON 结构如下所示。

```
{
   "Model1":{
      "key1":"value1",
      "key2" : "value2"
   },
   "Model2":[
      {
        "key1":"value1",
        "key2" : "value2"
      },
      {
         "key1":"value1",
         "key2" : "value2"
         "subModel":[
            {
           "key1":"value1",
           "key2" : "value2"
            },
            {
                       "key1":"value1",
                "key2" : "value2"
            }
         ]
      }
   ] 
```

现在我必须划分这个 JSON 并将其加载到不同的模型中。从服务器我只会得到一个 JSON。如何在[SproutCore](http://en.wikipedia.org/wiki/SproutCore)中实现它？

**我做过的研究：**

我在 Google 中搜索过“如何将单个 JSON 加载到 SproutCore 模型中？”。但是，我没有得到任何回答我的问题的结果。我也在 Stack Overflow 上搜索过。但我在这里也没有得到任何结果。因此，我没有尝试任何方法/想法/输入/方法，我没有任何代码示例来展示我尝试过的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:16:29.207

假设：

1.  你的 json 是字符串。
2.  你有一个 SC.Store
3.  您的模型被定义为 SC.Record 实例（例如 App.Model1）

那么你可以做

```
var json = JSON.parse(yourJsonString);
var model1 = json["Model1"];
var model2Arr = json['Model2'];

//  loadRecord for a single instance
store.loadRecord(App.Model1, model1, model1.serverIdProp);
// loadRecords for a bunch of instances
store.loadRecords(App.Model2, model2Arr, model2Arr.getEach('serverIdProp')); 
```

注意：您的 json 应该具有服务器分配给您的模型实例的某种 id。

# c# - 如何流畅地显示视频？

> ID：14538073
> 
> 赞同：0
> 
> 时间：2013-01-26T14:53:56.187
> 
> 标签：c#, wpf, ip-camera

我正在编写一个程序，它将从 IP 摄像机获取视频流并显示其视频。

我请求 MJPEG 流、解析数据并在 WPF 控件上逐帧显示以制作视频。

我将我的程序与其他程序进行了比较，我发现我的程序显示的视频不如其他程序流畅，尽管帧率显示相同。

我通过顺序更新控件的图像在 WPF 控件上显示视频。

谁能告诉我为什么我的程序不流畅？以及如何改进它。

更新：

@LearnedfromMistake：有 2 个线程。线程#1 将请求、解析来自相机流的数据并将帧追加到队列中。线程#2 将从队列中获取帧并显示它。

这是我的伪代码。

```
Thread #1    
{    
   while(true)    
   {    
      JpegFrame = ReadAFrameFromStream();    
      QUEUE.Append(JpegFrame);
   }    
}

Thread #2    
{    
   while(true)    
   {    
      JpegFrame = QUEUE.GetFrame();    
      WPFControl.UpdateImage(JpegFrame); //Making video here
   }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:19:15.993

*   while video frames are supposedly taken at regular time intervals, they might be encoded with different delays, transmission and buffering delays/lanetcies apply and eventually your receive rate is not regular, you need to compensate for this to restore smooth feed
*   WPF control repaint overhead is greater compared to presentation through specialized multimedia APIs

The best would be facilitate multimedia streaming APIs where images are decoded into YUV frames and presented accurately according to attached time stamps.

# c - 含义 .long function_name 在汇编语言中

> ID：14538075
> 
> 赞同：1
> 
> 时间：2013-01-26T14:53:59.990
> 
> 标签：c, assembly, x86, disassembly

假设我在 x86 汇编语言中有两个函数定义为：

```
.globl func_name1;      
.type func_name1, @function;
.align 2;
 func_name1:
 //Some assembly instructions here. 
```

和类似的第二个功能：

```
.globl func_name2;      
.type func_name2, @function;
.align 2;
 func_name2:
 //Some assembly instructions here. 
```

现在以下是什么意思-

```
.data
.globl var_temp
 var_temp:
   .long func_name1
   .long func_name2 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:01:12.307

那些 .long 定义了指向函数的指针。`var_temp`看起来像一个包含 2 个函数指针的数组。

# android - android：如何为 tabhost 和 tabs 添加样式或背景

> ID：14538079
> 
> 赞同：2
> 
> 时间：2013-01-26T14:54:22.060
> 
> 标签：android, android-layout, android-tabs, android-style-tabhost

就像android联系人中的标签一样，我想添加样式（或者可能是背景或我不知道的东西），请问如何？

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

你能告诉我在哪里可以找到好的背景或标签，因为我不擅长设计:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T15:21:32.837

Here you have everything about the tab pretty much. Works with Android 1.6 and above: [http://joshclemm.com/blog/?p=136](http://joshclemm.com/blog/?p=136)

You have to call setIndicator on your TabSpec and pass it a view instead of just text. Then you can customize that view using selectors etc.

# sql - 查找两名员工之间的雇佣日期差异

> ID：14538086
> 
> 赞同：0
> 
> 时间：2013-01-26T14:54:50.880
> 
> 标签：sql

我有一个员工表，其中的字段是：

`first_name, last_name, hire_date, salary, department_id, department_name`， 等等。

我打算找出`EMPLOYEE1 and EMPLOYEE2`、 那么`EMPLOYEE2 and EMPLOYEE3`、 等等 之间的雇佣日期差异。

我必须在 sql 中编写一个查询来显示员工的名字和雇用日期差异

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T13:20:01.353

要在 Microsoft SQL 2012 中使用天（用年、小时等代替天）来查找日期之间的差异：

```
Select datediff(day, HireDate, EndDate) 
From Employee1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:18:55.090

Since you've still not mentioned what RDBMS you are using i'll start with SQL-Server:

```
WITH x 
     AS (SELECT first_name, 
                last_name, 
                hire_date, 
                salary, 
                department_id, 
                department_name, 
                hireNum=Row_number() 
                          OVER( 
                            ORDER BY hire_date) 
         FROM   dbo.employee) 
SELECT DiffDays=Datediff(day, x.hire_date, x2.hire_date),
       first_name, 
       last_name, 
       hire_date, 
       salary, 
       department_id, 
       department_name 
FROM   x 
       INNER JOIN x x2 
               ON x.hirenum = x2.hirenum + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T15:07:05.957

我们可以使用[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)来计算日期差异。例如

```
SELECT DATEDIFF(SELECT DATE_ADD(start_date,INTERVAL 1 DAY),end_date); 
```

希望对你有帮助

也有使用`to_days`函数的方法。[点击这里](http://www.plus2net.com/sql_tutorial/date_difference.php)了解更多详情

# c# - 录制 5 秒后 NAudio 录制缓冲区已满

> ID：14538098
> 
> 赞同：1
> 
> 时间：2013-01-26T14:56:01.970
> 
> 标签：c#, naudio

我正在使用从麦克风录制的 Visual C# Studio 制作程序。

我想录制几分钟，但是当我尝试录制时，它会在录制 5 秒后显示“缓冲区已满”的错误。

这是我正在使用的代码：

```
private void button2_Click(object sender, EventArgs e) //Play Button
{
  fileName = "lastReplay.wav";            

  FileStream FS_Write = File.OpenWrite("lastReplay.wav");
  FS_Write.Close();

  int deviceNumber = sourceList.SelectedItems[0].Index;

  sourceStream = new NAudio.Wave.WaveIn();
  sourceStream.DeviceNumber = deviceNumber;
  sourceStream.WaveFormat = new NAudio.Wave.WaveFormat(44100,  
      NAudio.Wave.WaveIn.GetCapabilities(deviceNumber).Channels);

  NAudio.Wave.WaveInProvider waveIn = new
      NAudio.Wave.WaveInProvider(sourceStream);

  sourceStream.DataAvailable += new EventHandler<NAudio.Wave.WaveInEventArgs>
      (sourceStream_DataAvailable);
  waveWriter = new NAudio.Wave.WaveFileWriter(fileName, sourceStream.WaveFormat);
  sourceStream.StartRecording();
}

private void sourceStream_DataAvailable(object sender, NAudio.Wave.WaveInEventArgs e)
{
  if (waveWriter == null) return;
  waveWriter.Write(e.Buffer, 0, e.BytesRecorded);
  waveWriter.Flush();
} 
```

有谁知道是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:17:03.347

里面有一堆你不需要的代码。摆脱创建空的 WAV 文件。此外，不需要`WaveInProvider`. 事实上，这就是导致缓冲区满异常的原因，因为没有任何内容从其中读取。

# require - 如果我在 typescript 中使用 `module("somelib")`，它就不能在浏览器中运行

> ID：14538099
> 
> 赞同：4
> 
> 时间：2013-01-26T14:56:03.627
> 
> 标签：require, typescript, commonjs

我正在尝试在客户端使用带有 angularjs 的打字稿。

我发现如果我使用外部模块，生成的 js 将不会在浏览器中运行。

**控制器.ts**

```
/// <reference path="./libs/underscore.d.ts"/>

import _ = module("underscore");

module test {
    export class Ctrl {

        constructor($scope:any) {
            $scope.name = "Freewind";
            _.each($scope.name, function(item) {});
        }
    }
} 
```

生成的 js 将是：

```
var _ = require("underscore")
var test;
(function (test) {
    var Ctrl = (function () {
        function Ctrl($scope) {
            $scope.name = "Freewind";
            _.each($scope.name, function (item) {
            });
        }
        return Ctrl;
    })();
    test.Ctrl = Ctrl;    
})(test || (test = {})); 
```

哪个不能正确运行。但是，如果我删除该`module("underscore")`部分，就可以了。

由于我在 HTML 中添加了 underscore.js，我认为应该是`require()`方法有问题。如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:17:48.280

有两种方法可以在 HTML 页面中加载内容。

# 捆绑

第一个是手动包含页面中的所有脚本文件。您可能会运行某种预发布步骤来合并和缩小代码 - 但您要为此负责，而不是让代码去做。这通常称为捆绑。

在捆绑的情况下，您只能在 TypeScript 代码中使用引用（而不是导入），如下所示：

```
/// <reference path="./libs/underscore.d.ts"/>

module test {
    export class Ctrl {

        constructor($scope:any) {
            $scope.name = "Freewind";
            _.each($scope.name, function(item) {});
        }
    }
} 
```

# 模块加载

如果您想使用模块加载器，对于 Web 通常是 RequireJS，您可以使用 import 语句加载外部模块。在这种情况下，通常您不需要参考...

```
import _ = module("./libs/underscore");

module test {
    export class Ctrl {

        constructor($scope:any) {
            $scope.name = "Freewind";
            _.each($scope.name, function(item) {});
        }
    }
} 
```

# RequireJS 与非模块

还有第三种情况，很常见。如果您打算[导入不是外部模块的东西](http://www.stevefenton.co.uk/Content/Blog/Date/201302/Blog/Using-RequireJS-and-Jquery-In-TypeScript/)（例如 jQuery，但下划线也可能适合这种模式），您最好使用对 RequireJS 的引用和手动调用。

RequireJS 将为您加载依赖项，因此您将使用它包装您的主程序（可能位于单独的文件中，例如`app.ts`.

```
///<reference path="./libs/require.d.ts" />
///<reference path="./libs/underscore.d.ts" />

module test {
    export class Ctrl {

        constructor($scope:any) {
            $scope.name = "Freewind";
            _.each($scope.name, function(item) {});
        }
    }
}

require(['underscore'], function (_) {
    var ctrl = new test.Crtl({});
}); 
```

您还可以使用`require.config`来指定应用程序中下划线的路径。

```
 require.config({
    paths: {
        "underscore": "libs/underscore"
    }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:51:41.177

当您使用 require 时，您断言下划线作为可加载模块导出。这进一步假设您正在使用某种模块加载器系统（TypeScript 当前支持 AMD 和 CommonJS 模块）。由于您没有使用模块系统，并且下划线仅在全局范围内可用，因此您可以使用 /// 引用告诉 TypeScript Underscore 在全局范围内可用。将以下内容放在文件顶部：

```
/// <reference path="./libs/underscore.d.ts"> 
```

你应该很高兴去！

# jquery - 计算来自任何相似 ID 的可见元素

> ID：14538100
> 
> 赞同：1
> 
> 时间：2013-01-26T14:56:29.993
> 
> 标签：jquery, append

如何将文本附加到 ID 中包含某个单词的元素，只要它们包含可见元素？我可以让它适用于一个唯一 ID，但不适用于包含匹配项（一个可见元素）的所有 ID。我觉得我对“this”的使用是不正确的。

[http://jsfiddle.net/Wukbj/1/](http://jsfiddle.net/Wukbj/1/) [现在编辑启用 jQuery ！！！]

```
$(function() {
if ($("[id^=relatedelements] > li:visible").length == 1) {
    $(this).append("match found...")};
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:02:31.733

您应该使用`id*=value`which means `id` **contains** the string`value`

```
$(function() {
    $("ul[id*=relatedelements] > li:visible").each(function(){
        $(this).append('match found...');
    })
}); 
```

对于不可见元素：

```
$(function() {
    $("ul[id*=relatedelements] > li:hidden").each(function(){
        $(this).append('match found...');
    })
}); 
```

您还可以计算`hidden`元素的数量并将其附加到`ul`

```
$(function() {
    $("ul[id*=relatedelements]").each(function(){
        $(this).append($(this).find('li:hidden').length 
          + ' items are invisible...');
    })
}); 
```

# javascript - JSON 到 JQuery：我做错了什么？

> ID：14538104
> 
> 赞同：4
> 
> 时间：2013-01-26T14:57:03.317
> 
> 标签：javascript, jquery, getjson

我对 javascript 和 jquery 开发相当陌生。我有一个值表，我在 PHP 中获取并格式化为 JSON 字符串，因为 JSON 看起来是一种将数据导入 javascript 的好方法。但是我在处理 javascript 变量时遇到了麻烦。

JSON 数据的格式非常简单。它看起来像这样：

```
[
    {"id":"1","name":"Bob","haircolor":"brown"},
    {"id":"2","name":"Carol","haircolor":"Red"}
] 
```

等等。没有一个条目是复杂的。它只是扁平的数据行。

我使用来自 JQuery 的 $.getJSON() 将数据放在一个变量中，如下所示：

```
var people;
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
    people.push(data);
}); 
```

根据 console.log(data)，对象“数据”正在填充我的 JSON 字符串的内容。但是推送在 javascript 控制台中生成了这些错误：

```
Uncaught TypeError: Cannot read property 'length' of undefined
Uncaught TypeError: Cannot call method 'push' of undefined 
```

我错过了什么？您还需要其他信息来帮助我吗？由于这个问题，我已经停止了这个项目，而且我只是一个 javascript 新手，无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:00:30.030

变量 people 必须是一个数组。将第一行更改为

```
var people = []; 
```

目前“人”只是未定义的， .push() 方法仅适用于数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:10:27.513

如果您的 PHP 像这样编写输出：

```
[
    {"id":"1","name":"Bob","haircolor":"brown"},
    {"id":"2","name":"Carol","haircolor":"Red"}
] 
```

您需要将整个结构分配给`people`：

```
var people;
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
    people = data;
});

// note that you can't access anything inside people here
// only when the json has been processed 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T14:58:28.340

在推送之前尝试将变量定义为数组：

```
var people = new Array(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T15:00:33.737

尝试将 people 变量初始化为数组

```
var people = [] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T16:09:42.027

你可以试试这个：

```
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
  $.each(data, function(i, people){
     console.log(people);
  });
}); 
```

# javascript - Javascript 奇怪的错误 (?)

> ID：14538105
> 
> 赞同：0
> 
> 时间：2013-01-26T14:57:05.083
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

在编码时，我在 Javascript 中遇到了一些奇怪的东西。我不确定这是一个错误。也许我只是不知道它为什么会发生，但它看起来对我来说真的很奇怪，所以我做了一个简化的例子。这里是。

我有这个代码：

```
var v = 0.01;
for(var i=0;i<21;i++){ 
    if(i % 4 == 0 && i!=0){
        v += 0.01;
    }
} 
```

我期望的是真实的：

```
v == 0.06; 
```

什么是真实的：

```
v == 0.060000000000000005; 
```

有人可以解释为什么我得到这个而不是我所期望的吗？谢谢。

# html - 如何将两个元素向右浮动，在视觉和语义上保持相同的顺序？

> ID：14538106
> 
> 赞同：15
> 
> 时间：2013-01-26T14:57:07.790
> 
> 标签：html, css, semantics

如何将包装元素中的两个元素向右浮动，在视觉和语义上保持元素的相同顺序？

```
<style>
.container { widht: 200px; height: 50px; background: #333; }
.container p { width: 50px; height: 50px; background: #f00; float: right; margin: 0; }
</style>
<div class="container">
    <p class="a">Simon</p>
    <p class="b">Says</p>
</div> 
```

渲染时，这将使内部元素按照“Says Simon”的顺序出现，[http://jsbin.com/eravan/1/edit](http://jsbin.com/eravan/1/edit)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T15:03:40.043

您也可以在父元素上设置时使用`display: inline-block;`而不是。`float``text-align: right;`

[http://jsbin.com/eravan/10/edit](http://jsbin.com/eravan/10/edit)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T15:00:34.537

常见的修复方法是：

**添加辅助元素**

```
<style>
.container { width: 200px; height: 50px; background: #333; }
.container p { width: 50px; height: 50px; background: #f00; float: left; margin: 0; }
.container .aux { float: right; }
</style>
<div class="container">
    <div class="aux">
        <p class="a">Simon</p>
        <p class="b">Says</p>
    </div>
</div> 
```

[http://jsbin.com/eravan/6/edit](http://jsbin.com/eravan/6/edit)

这种方法的问题在于冗余的辅助元素本身。

**混淆语义**

```
<style>
.container { width: 200px; height: 50px; background: #333; }
.container p { width: 50px; height: 50px; background: #f00; float: right; margin: 0; }
</style>
<div class="container">
    <p class="b">Says</p>
    <p class="a">Simon</p>
</div> 
```

[http://jsbin.com/eravan/9/edit](http://jsbin.com/eravan/9/edit)

这是最糟糕的解决方案，不幸的是，也是最常见的解决方案（下面的[Ali Bassam 评论](https://stackoverflow.com/questions/14538106/how-to-float-two-elements-to-the-right-maintaining-the-same-order-visually-and-s#comment20276171_14538141)证明了这一点）。

**这些都不是正确的答案。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T16:26:59.397

flexbox 有很多可能性（包括视觉上的重新排序元素），所以您将采取的方法取决于周围的内容。但是 IE 直到版本 10 才支持它。

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

```
.container {
    width: 200px;
    height: 50px;
    background: #333;
    display: flex;
}

.container.a {
    justify-content: flex-end;
}

.container p {
    width: 50px;
    height: 50px;
    background: #f00;
    margin: 0;
}

.container.b .a {
    margin-left: auto;
}

<div class="container a">
    <p class="a">Simon</p>
    <p class="b">Says</p>
</div>

<hr />

<div class="container b">
    <p class="c">Let's Play</p>
    <p class="a">Simon</p>
    <p class="b">Says</p>
</div> 
```

[http://jsfiddle.net/6NWmt/](http://jsfiddle.net/6NWmt/)（不包括前缀）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T15:17:43.583

另一种方法可能是使两个类成为绝对并指定它们的位置？如果您的元素是固定大小的，这将相对简单。只是一个想法..

# vb.net - VB.net 按钮样式和模板（Windows 商店）

> ID：14538107
> 
> 赞同：0
> 
> 时间：2013-01-26T14:57:14.170
> 
> 标签：vb.net, windows-store-apps, windows-store

例如，当我用指针悬停按钮时，它会改变颜色。或者当它被按下时，它会变成其他颜色。在这些情况下，我如何编辑它得到的颜色？我找到了这个网站[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709909.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709909.aspx)，但我不明白如何编辑按钮的视觉状态。

# java - 使用 Linkify.addLinks 与 Html.fromHtml 结合

> ID：14538113
> 
> 赞同：11
> 
> 时间：2013-01-26T14:57:56.500
> 
> 标签：java, android, html, linkify

我有一个`TextView`通过调用它来获取它的数据集：

```
tv.setText(Html.fromHtml(myText)); 
```

该字符串`myText`包含部分格式化的 html 数据。例如，它可能有字体标签，但没有任何使用`<a href=...>`标签格式化的 url 链接。我希望使用`Linkify.addLinks(...)`来做到这一点，因为我的文本可能包含 Linkify 会为我适当转换的其他类型的链接。所以我把我的代码写成这样：

```
String myText = "<font color=\"red\">Red text</font> and Url: www.google.com";
tv.setText(Html.fromHtml(myText));
Linkify.addLinks(tv, Linkify.ALL);
tv.setMovementMethod(LinkMovementMethod.getInstance()); 
```

这不能正常工作。这意味着它会处理字体标签，但 Linkify 不会`UrlSpan`正确转换 url。

或者，如果我在没有 Html.fromHtml(..) 的情况下调用 setText()，Linkify 可以工作，但是我会丢失所有从 html 字体标签格式化的文本。不知何故，它们似乎都是矛盾的，我只能有一个或另一个。

现在这是我不明白的有趣部分。如果我从 java 中删除 Linkify 代码并转到我的布局 xml 并将以下行放在那里，一切似乎都在工作（Linkify 和 fromHtml 最终都很好地一起玩......不知何故）

```
<TextView
    ... 
    android:autoLink="all"
    android:linksClickable="true"
    ...
/> 
```

有人可以向我解释为什么这会使一切正常吗？

我查看了 TextView 的源代码，`setMovementMethod()`最终调用：

```
setFocusable(true);
setClickable(true);
setLongClickable(true); 
```

从理论上讲，这应该可以使一切正常运行，并且与 xml 布局代码的行为相同。我尝试在java代码中切换`Linkify.addLinks(..)`之前的调用顺序`setText(Html.fromHtml(..))`，但这并没有什么不同。

关于为什么在 java 中结合 Linkify.addLinks() 和 Html.fromHtml() 的任何想法会导致这种行为......但不是在 xml 布局中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-19T21:08:10.637

这是因为在处理文本`Html.fromHtml`之前`Linkify.addLinks`删除了以前的跨度。

使用此代码使其工作：

```
public static Spannable linkifyHtml(String html, int linkifyMask) {
    Spanned text = Html.fromHtml(html);
    URLSpan[] currentSpans = text.getSpans(0, text.length(), URLSpan.class);

    SpannableString buffer = new SpannableString(text);
    Linkify.addLinks(buffer, linkifyMask);

    for (URLSpan span : currentSpans) {
        int end = text.getSpanEnd(span);
        int start = text.getSpanStart(span);
        buffer.setSpan(span, start, end, 0);
    }
    return buffer;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-24T15:21:17.303

You can try this one:

First set the text in to your TextView.

```
tv.setText(myText); 
```

Convert the links with Linkify

```
Linkify.addLinks(tv, Linkify.ALL); 
```

and finally replace the text with Html.fromHtml but using the Linkified text from your EditText.

```
tv.setText(Html.fromHtml(tv.getText().toString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-11T12:46:16.063

100% 有效的解决方案（kotlin）。

在 Linkify 之前为商店 HtmlLink 创建类

```
class HtmlLink(val urlSpan: URLSpan, val spanStart: Int, val spanEnd: Int) 
```

创建跨区 html（两种格式都用于测试）

```
val spanned = Html.fromHtml("https://google.com" +
                "<br><a href=\"https://google.com\">Google</a>") 
```

存储html

```
val htmlLinks = ArrayList<HtmlLink>()
spanned.getSpans(0, spanned.length, URLSpan::class.java).forEach { urlSpan ->
    htmlLinks.add(HtmlLink(urlSpan, 
                  spanned.getSpanStart(urlSpan),
                  spanned.getSpanEnd(urlSpan)))
} 
```

创建可跨越的构建器并链接它

```
val builder = SpannableString(spanned)
Linkify.addLinks(builder, Linkify.WEB_URLS) 
```

恢复跨度。

```
htmlLinks.forEach { htmlLink ->
    builder.setSpan(URLSpan(htmlLink.urlSpan.url), htmlLink.spanStart, htmlLink.spanEnd, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
} 
```

最后设置文本

```
scrollContent.text = builder 
```

# wordpress - 带有渐变的边框半径在 IE 中不起作用

> ID：14538116
> 
> 赞同：0
> 
> 时间：2013-01-26T14:58:10.127
> 
> 标签：wordpress, linear-gradients

![在此处输入图像描述](../Images/fb60c883c950d68d032928980845dcff.png)我尝试在 IE-9 中使用带有线性渐变的边界半径，但它不能一起工作。我对 IE 使用特殊过滤器。没有渐变它的工作。我花了很多时间，但无法理解原因。`button.new { background: -moz-linear-gradient(#00BBD6, #EBFFFF); background: -webkit-gradient(linear, 0 0, 0 100%, from(#00BBD6), to(#EBFFFF)); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00BBD6', endColorstr='#EBFFFF'); padding: 3px 7px; color: #333; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; border: 1px solid #666; } <form action=""> <p><button class="new">Новая кнопка</button></p> </form>`

[jsfiddle你可以在](http://jsfiddle.net/gHQ58/)[这里](http://ep.pusku.com/) 看到工作示例我也有这个菜单和红色按钮的问题，但我使用上面的示例来保持我的代码简短。我还尝试将 CSS3pie 用于 Wordpress，以使我的 css3 在 IE 7-8 中使用 Word Press 函数 php 的[特殊代码](http://codex.wordpress.org/Working_with_PIE_in_WordPress_for_older_IE_versions)，但它也不起作用。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:02:44.050

你可以使用这个 CSS：

```
background: rgb(0,187,214); /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwYmJkNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlYmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  rgba(0,187,214,1) 0%, rgba(235,255,255,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,187,214,1)), color-stop(100%,rgba(235,255,255,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(0,187,214,1) 0%,rgba(235,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(0,187,214,1) 0%,rgba(235,255,255,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(0,187,214,1) 0%,rgba(235,255,255,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(0,187,214,1) 0%,rgba(235,255,255,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00bbd6', endColorstr='#ebffff',GradientType=0 ); /* IE6-8 */ 
```

对于 IE9，不要忘记为所有具有渐变的元素添加“渐变”类，并将以下覆盖添加到 HTML 以完成对 IE9 的支持：

```
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]--> 
```

对于 IE9 中的圆角，您可以添加以下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# python - 使用 nltk 解析维基百科停用词 html

> ID：14538118
> 
> 赞同：0
> 
> 时间：2013-01-26T14:58:17.480
> 
> 标签：python, nltk, text-parsing, wikipedia-api, stop-words

与[这个](https://stackoverflow.com/questions/14259685/python-querying-wikipedia-performance)问题相关，我正在开发一个程序来提取维基百科实体的介绍。正如您在上面的链接中看到的，我已经成功查询了 api，现在专注于处理 api 调用返回的 xml。我使用[nltk](http://nltk.org/)来处理我使用的 xml

```
wikiwords = nltk.word_tokenize(introtext)
for wikiword in wikiwords:
    wikiword = lemmatizer.lemmatize(wikiword.lower())
    ... 
```

但是有了这个，我最终录下了像`</`, `/p`, `<`, ... 这样的词。因为我没有使用 xml 的结构，所以我想简单地忽略所有 xml 就可以了。是否有 nltk 工具或是否有可用的停用词列表。我只想知道，最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:35:05.630

您没有指定您使用的确切查询，但您现在拥有的似乎是 HTML，而不是 XML，它是您从 XML 响应中提取的。

如果你想从 HTML 代码中去掉所有的 HTML 标签，只留下文本，你应该使用 HTML 库，比如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

# mysql - mysql 按预期运行了几天，然后给出'无法通过套接字'/var/run/mysqld/mysqld.sock'（111）连接到本地 MySQL 服务器'

> ID：14538119
> 
> 赞同：0
> 
> 时间：2013-01-26T14:58:22.287
> 
> 标签：mysql, ubuntu

我在 ubuntu 上运行了 LAMP 设置。我正在使用此设置通过需要 mysql 的 Web 界面运行 torrentflux。

几天后一切正常，然后我得到'无法通过套接字'/var/run/mysqld/mysqld.sock'（111）连接到本地MySQL服务器'

我重新启动以解决问题，但现在这样做的不便已经超过了解决问题的回报，我想找到另一种解决问题的方法。

Mysql 是 torrentflux 的 LAMP 设置中唯一的失败。Torrentflux 仍然如其应有的水蛭和种子；我只是失去了没有mysql的控制界面。Apache 仍然按预期做事。

是的，mysql一直在运行，直到我尝试使用web界面时输出错误，然后无法重新启动mysql服务器。

```
$ sudo service mysql start
start: Job failed to start 
```

Ubuntu版本：

```
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.1 LTS
Release:    12.04
Codename:   precise

G/usr/bin/mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (111)'
Check that mysqld is running and that the socket: '/var/run/mysqld/mysqld.sock' exists!
130126 14:42:15 [Note] Plugin 'FEDERATED' is disabled.
130126 14:42:15 InnoDB: The InnoDB memory heap is disabled
130126 14:42:15 InnoDB: Mutexes and rw_locks use GCC atomic builtins
130126 14:42:15 InnoDB: Compressed tables use zlib 1.2.3.4
130126 14:42:16 InnoDB: Initializing buffer pool, size = 128.0M
InnoDB: mmap(137363456 bytes) failed; errno 12
130126 14:42:16 InnoDB: Completed initialization of buffer pool
130126 14:42:16 InnoDB: Fatal error: cannot allocate memory for the buffer pool
130126 14:42:16 [ERROR] Plugin 'InnoDB' init function returned error.
130126 14:42:16 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
130126 14:42:16 [ERROR] Unknown/unsupported storage engine: InnoDB
130126 14:42:16 [ERROR] Aborting 
```

mysql 一直在运行，直到我将其关闭。

重新启动可以解决一段时间的问题。我希望有一个不那么激烈的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:11:15.467

编辑：你改变了你的问题，所以把旧答案移到下面。

无论哪种方式，您在日志中得到的内容都相当清楚。

```
130126 14:42:16 InnoDB: Initializing buffer pool, size = 128.0M
InnoDB: mmap(137363456 bytes) failed; errno 12
130126 14:42:16 InnoDB: Fatal error: cannot allocate memory for the buffer pool 
```

`errno 12`表示你内存不足。MySQL 尝试为缓冲池分配 128MB，但找不到那么多可用内存。

我不确定您运行的是哪种机器，但您基本上有 3 个选项；

*   找出占用内存的应用程序，看看是否可以更新或换掉它。
*   为机器获取更多内存（如果第一次失败，可能是最好的选择）
*   添加一些交换空间（可能会减慢速度）

* * *

编辑前的旧答案；

您收到该消息是因为您尝试以普通用户身份启动 MySQL，而不是按照要求以 root 身份启动。

尝试;

```
sudo service mysql start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T06:02:56.137

将此添加到您的 my.ini 中：

```
[mysqld] 
innodb=OFF 
ignore-builtin-innodb 
skip-innodb
default-storage-engine=myisam 
default-tmp-storage-engine=myisam 
```

它对我有用:)

# javascript - 使用 firebug 调试 jquery 或 javascript

> ID：14538123
> 
> 赞同：1
> 
> 时间：2013-01-26T14:58:58.560
> 
> 标签：javascript, jquery, firebug

我用jquery写了一段代码。我最初没有运行，然后我检查了在线[jslint](http://www.javascriptlint.com/online_lint.php)的语法错误。我发现了一些错误。现在代码仍然没有按预期工作。所以我去了萤火虫。我没有做很多调试。我是新手。这是我的代码

```
var j = 2;
var friends = [];
var distance =[];

$(document).ready(function () {

      $('#button').click(function () {
        if (j < 11) {
            $('#friends').append('Friend' + j + ':<input type="text" id="friend' + j + '"/><br/><br/>');
            j++;
        }
        else {
            alert("Limit reached");
        }
    });

   $('button').click(function(){
  console.log("button clicked");
   var a =[];
    for(i=1;i<=j;i++)
     {
        a[i] = $("#friend" + i).val();
      }     

    var gurl = "http://maps.googleapis.com/maps/api/distancematrix/json?"+
        "origins=" +
        a.join('|').replace(/ /g,'+') +
        "&destinations=" +
        a.join('|').replace(/ /g,'+') +
        "&sensor=false";

  jQuery.ajax(
          {
             type: "GET",
             url: gurl,
             dataType: 'jsonp'
          }).done(function (response) 
             {
                var rows = response.rows;
                  alert("hello there");

                for (var i = 0; i < rows.length; i++) 
                 {

                  for(var j=0;j<elements.length;j++)
                {
                    distance[i][j] = rows[i].elements[j].distance;
                 }

                 }
          alert(distance[1][3]);
              });

        });
  }); 
```

现在，它应该做的是转到此[链接](http://maps.googleapis.com/maps/api/distancematrix/json?origins=%7Cchandigarh%20sector%2020%7Cchandigarh%20sector%2018%7Cpanchkula%20sector%2021%7C%7C&destinations=%7Cchandigarh%20sector%2020%7Cchandigarh%20sector%2018%7Cpanchkula%20sector%2021%7C%7C&sensor=false)并从 json 文件中获取数据并将其存储在二维数组 distance[][] 中。最后在存储完所有数据后，它应该显示“距离[1][2]”的结果作为警报。

现在我不知道这段代码有什么问题以及如何使用 firebug 找到逻辑错误。什么应该让我的工作变得轻松？

ps：这是HTML文件

```
<!doctype html>
<html>

 <head>

    <title>TakeMeHome</title>

    <script   src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/jquery-1.9.0.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.10.0.custom.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.10.0.custom.min.js"></script>

 </head>

  <body>
    <center>
        <form id="locations">
        Your Place:<input id="source" type="text"><br/>
        <br/>

        <div id="friends">
         Friend1:<input id="friend1" type="text"><br/>
        <br/>
        </div>

        <div id="button">
            Add!</div>
        <br/>
        <br/>

        <button>GO!</button>

        <br/><br/>
        <div id="map" style = "width: 500px; height: 500px"><br/>

        </form>
    </center>

  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:10:10.640

最简单的调试方法是`console.log()`在脚本中的某些点使用 firebug 和变量或消息，以便您可以更好地了解脚本各个步骤中发生的情况。您可以在 firebug 的 Console 选项卡中看到输出。

您还可以从其他一些选项卡添加断点和监视。例如，在 DOM 选项卡中，您可以右键单击变量并添加监视，或者从脚本选项卡中单击脚本中的位置以设置断点或监视，它将在该点停止脚本和/或在那一点上显示一个变量的转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:04:15.723

嘿，这里是您的代码的一个工作小提琴，以及一些调试 js 的方法示例：

[http://jsfiddle.net/QxP7p/3/](http://jsfiddle.net/QxP7p/3/)

如您所见，您可以做一些不错的事情，例如：

```
console.log("distance : ");
console.log(distance); 
```

希望能帮助到你

他们也有一些错误，无法帮助修复它们

# php - php 脚本长于最大执行时间（进度条）

> ID：14538129
> 
> 赞同：1
> 
> 时间：2013-01-26T14:59:31.573
> 
> 标签：php, mysql, execution-time

我目前在做一个小项目，其中一些数据是从网络上收集的，系统会在这些数据之间建立一些关系。当然它从一开始就不是完美的，所以我需要制作一个脚本来更新我制作的更新脚本的所有连接和关系。

基本上脚本可以工作，但是因为之后会有一个漂亮的后端，它并不是我真正想要的。

该脚本需要大约 10 分钟，因为我不只是想从 php 设置 max_execution_time，所以我想到了另一种方法。我没有一次加载 1000 个 sql 条目，而是一次将其剥离到 200 个，并在第一轮结束时重复下一个 200 个。因此我使用了 php http_request。我只是给你看一个精简版的脚本：

```
require_once 'HTTP/Request.php'; 
$max = $db->query("SELECT COUNT(id) as max FROM db_table");
$lower = $_POST['lower'] ? $_POST['lower'] : 0;
$plus = 250;
$entries = $db->query("SELECT * FROM db_table LIMIT {$lower},{$plus}");

foreach($entries as $entry){
  DO SOME STUFF TO UPDATE THE RELATIONS BETWEEN THE DATA
}

$lower = $lower + $plus;

if($lower <= $max) {
  $request = new HTTP_Request("path to the script"); 
  $request->setMethod(HTTP_REQUEST_METHOD_POST); 
  $request->addPostData("lower", $lower);
  $result = $request->sendRequest(); 
} 
```

就是这个。正如我所说，它有效，因为它是一个新请求，因此它不受 max_execution_time 的影响。但是浏览器只是在加载、加载和加载，过了一会儿它就完成了。但是，我当然不能为进度条之类的东西显示任何刷新的数据。

我看到许多使用 php flush() 的条目，但这对我不起作用，因为（我猜）我用来解决问题的愚蠢方式。如果您需要在 webspace 上安装某些东西并且您没有可能更改最大执行时间或安装 http_request，您将如何执行此操作？

正如我所说，稍后它应该看起来像一个进度条。我想我必须使用 ajax，只需将脚本推到每一轮，然后通过 javascript 更新进度条。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:08:22.437

您仍然遇到 max_execution_time 问题，因为您从 Web 浏览器请求的页面始终处于活动状态，直到 HTTPRequests 完成才完成。尝试使用参数 lower 将页面定位到另一个页面。

```
header("Location: myscript.php?lower=$lower"); 
```

# c# - 从使用 AJAX 填充的下拉列表中获取值

> ID：14538134
> 
> 赞同：4
> 
> 时间：2013-01-26T15:00:12.917
> 
> 标签：c#, jquery, asp.net, .net, ajax

我已经用 AJAX 填充了一个 ASP.net 下拉列表，现在我需要以 C# 方法将 Id 存储到数据库中，（我正在使用 LINQ）

这是我的网络方法

```
[WebMethod]
public static ArrayList GetLanguageList()
{
    ArrayList lstArrLanguage = new ArrayList();
     IQueryable<Common.Town> myList = new SupplierBL().GetTowns();
     foreach(Common.Town t in myList)
    {
        string name = t.Name;
        string id = t.TownId.ToString();
        lstArrLanguage.Add(new ListItem(name, id));
    }

    return lstArrLanguage;
} 
```

我的 test.aspx 代码

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "test.aspx/GetLanguageList",
            data: '',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                $("#ddlLanguage").empty().append($("<option></option>").val("[-]").html("Please select"));
                $.each(msg.d, function () {
                     $('#<%=ddlLanguage.ClientID%>').append($("<option></option>").val(this['Value']).html(this['Text']));
                });
            },
            error: function () {
                alert("An error has occurred during processing your request.");
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T16:09:08.740

`DropDownList`如果您在`javaScript`. 您可以尝试以下方法

```
string selectedValue = Request.Form[ddlLanguage.UniqueID]; 
```

这个[问题](https://stackoverflow.com/questions/13320761/how-to-get-dropdown-selecteditem-value-in-server-side-when-i-created-option-in-c)也可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:31:38.403

If you populate the value of dropdown via ajax than it can't be available on Server Side because the page doesn't postback during ajax request.

In order to get the value of dropdown in C# use below snippets :

```
String _value = Convert.ToString(Request[ddlLanguage.ClientID]); 
```

Hope this will help !!

# javascript - 使用新方法对 Array Class 进行原型设计的最佳方法是什么

> ID：14538144
> 
> 赞同：2
> 
> 时间：2013-01-26T15:00:57.527
> 
> 标签：javascript, javascript-framework

我有许多需要使用的功能方法，并且我需要使用此方法发布一个库以与 JavaScript 开发人员共享它非常有帮助，因此例如我需要添加一个名为的方法`duplicates` 将返回给我的 Array 的副本为你可以看到这个方法不是由 ECMA 正式发布的，所以我不知道放置脚本的最佳形式

1-

```
 Array.prototype.duplicate = function (){
        //script here its usefull to use `this` refer to the Array
       } 
```

像使用它

```
[1,2,2].duplicates(); 
```

2-

```
 var Ary = function(a){
      if(!(this instanceOf Ary))
          return new Ary(a)
      if(Object.prototype.toString.call(a) != '[object Array]')
          return new Error(a + 'is not an Array')
      else
      {
          for(var i =0 ; i<a.length; i++)
          {
             this.push(a[i]);
          }

      }
   }
Ary.prototype = new Array();
Ary.prototype.constructor = Ary; 

Ary.prototype.duplicates = function(){ 
   //script here its usefull to use `this` refer to the Array
}; 
```

像使用它

```
Ary([1,2,2]).duplicates(); 
```

我需要知道它是否更像是直接使用原型到 Array JavaScript 类来添加功能，如果它不是官方发布的 ECMA 而是我们从 Array 类继承然后玩它？？？

或者它可以做原型吗？

后果是什么

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T15:09:06.780

对于您自己的代码，可以添加一个`duplicates`方法，`Array.prototype`但您确实需要为如果您使用错误地用于`for..in`循环遍历数组的代码（您自己的或您正在使用的东西）可能发生的情况做好准备，如下所示：

```
for (var i in myArray) { // <==== Wrong without safeguards
} 
```

...因为`i`会`"duplicates"`在某个时候获得值，因为`for..in`循环遍历对象及其原型的可枚举属性，它**不会**循环遍历数组索引。`for..in`如果处理得当，可以在数组上使用它，[在 SO 的其他答案中](https://stackoverflow.com/questions/9329446/for-each-in-a-array-how-to-do-that-in-javascript/9329476#9329476)更多。

如果你只打算在支持 ES5 的环境中工作（现代浏览器，而不是 IE8 和更早版本），你可以通过添加你的`duplicates`via来避免这种情况[`Object.defineProperty`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.6)，如下所示：

```
Object.defineProperty(Array.prototype, "duplicates", {
    value: function() {
        // ...the code for 'duplicates' here
    }
}); 
```

以这种方式定义的属性是不可枚举的，因此不会出现在`for..in`循环中，因此无法正确处理`for..in`数组的代码不会受到影响。

不幸的是，目前在 JavaScript 中不可能正确地派生自`Array.prototype`（您的第二个选项），因为`Array`对名称全为数字的属性（称为“数组索引”）和特殊`length`属性进行了特殊处理。目前，这些都不能在派生对象中正确提供。有关这些特殊属性的更多信息，请参阅我的博客文章[*A Myth of Arrays*](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:10:49.433

作为一般规则：不要对本机 Javascript 对象原型进行修补。它可能看起来无害，但如果您在站点/应用程序中包含第三方代码，它可能会导致各种微妙的错误。

修改`Array`原型特别邪恶，因为互联网上充斥着错误的、不正确的代码，这些代码使用`for ... in`构造来迭代数组。

一探究竟：

```
for(var i in [1,2,3]) {
    console.log(i);
} 
```

输出：

```
1
2
3 
```

但是，如果您已将`Array`原型修改如下：

```
Array.prototype.duplicates = function() { } 
```

它输出

```
1
2
3
duplicates 
```

[自己看](http://jsfiddle.net/3Dtbg/)。

# blackberry-simulator - 部署失败：信息：发送请求：安装并启动

> ID：14538158
> 
> 赞同：3
> 
> 时间：2013-01-26T15:03:14.983
> 
> 标签：blackberry-simulator, blackberry-10

我正在尝试在 BlackBerry Simulator 上启动简单的 BlackBerry 10 应用程序，但出现以下错误。

部署失败：信息：发送请求：安装和启动信息：操作：安装和启动信息：调试本机：在信息：文件大小：191107 信息：安装 com.example.myApp.testDev_BB10Project8d6810e6 ... 信息：处理 191107 字节信息：进度 0%...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:30:05.220

尝试几次......这对我有用。尝试不同的部署选项。尝试单击调试而不是运行。

IDE - 模拟器连接非常脆弱:-(

# c++ - 关于windows中的TLS回调

> ID：14538159
> 
> 赞同：7
> 
> 时间：2013-01-26T15:03:26.530
> 
> 标签：c++, thread-local-storage

这是测试代码

```
#include "windows.h"
#include "iostream"
using namespace std;

__declspec(thread) int tls_int = 0;

void NTAPI tls_callback(PVOID, DWORD dwReason, PVOID)   
{
    tls_int = 1;
}

#pragma data_seg(".CRT$XLB")
PIMAGE_TLS_CALLBACK p_thread_callback = tls_callback;
#pragma data_seg()

int main()
{
    cout<<"main thread tls value = "<<tls_int<<endl;

    return 0;
} 
```

使用多线程调试 DLL (/MDd) 构建运行结果：主线程 tls 值 = 1

使用多线程调试 (/MTd) 运行结果构建：主线程 tls 值 = 0

看起来无法捕获使用 MTd 时创建的主线程

为什么 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-04-27T13:47:52.180

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-03T10:36:39.513

您还必须显式添加符号 __tls_used。有了这个，你的代码应该可以工作：

```
#pragma comment(linker,"/include:__tls_used") 
```

# python - 无需用户交互即可登录 Facebook

> ID：14538167
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:04:22.090
> 
> 标签：python, facebook, facebook-graph-api, server-side, facebook-authentication

我想使用 python 脚本在我的服务器上执行登录到 Facebook 的过程：当我启动我的服务器时，他使用我的私人帐户登录到 Facebook。（即没有用户交互），你可以这样做吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:07:20.343

使用 scrapy 项目作为基于 http 的请求的基础，例如登录..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:04:26.403

“没有用户交互”是什么意思？
您可以检查有效的用户会话（更多[在这里](http://developers.facebook.com/docs/howtos/login/server-side-login/://)），如果没有可用的会话，则自动将用户重定向到登录对话框。

还有一个用于 Python 的非官方 SDK，您可以[探索](http://developers.facebook.com/tools/third-party-sdks/#python).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T07:05:06.963

你可以看看我最近发布的这个项目：[https](https://github.com/gsscoder/facebook-snooper) ://github.com/gsscoder/facebook-snooper 。

很简单的API：

```
from facebook_snooper import log_in, get_intro

if not log_in('some@user.com', 'some_password'):
    sys.exit('Can\'t login to Facebook!')

intro = get_intro('a.profile.id')
for info in intro:
    print(f'  - {info}') 
```

您还可以使用`search_profile(query)`功能搜索配置文件。

这里有一个更完整的例子：[https](https://gist.github.com/gsscoder/335e2397a4329167a7f373fb29349640) ://gist.github.com/gsscoder/335e2397a4329167a7f373fb29349640 。

# python - 在图像中查找 RGB 颜色的边界框

> ID：14538168
> 
> 赞同：3
> 
> 时间：2013-01-26T15:04:47.390
> 
> 标签：python, image-processing, numpy

我正在使用页面分割算法。代码的输出写入图像，每个区域的像素都分配了唯一的颜色。我想处理图像以找到区域的边界框。我需要找到所有颜色，然后找到该颜色的所有像素，然后找到它们的边界框。

以下是示例图像。

![显示彩色区域的示例输出图像](../Images/5832efac8dee057dbbefd8a33a9614b6.png)

我目前从 R、G、B 通道的直方图开始。直方图告诉我数据位置。

```
img = Image.open(imgfilename)
img.load()
r,g,b = img.split()

ra,ga,ba = [ np.asarray(p,dtype="uint8") for p in (r,g,b) ]

rhist,edges = np.histogram(ra,bins=256)
ghist,edges = np.histogram(ga,bins=256)
bhist,edges = np.histogram(ba,bins=256)
print np.nonzero(rhist)
print np.nonzero(ghist)
print np.nonzero(bhist) 
```

输出： (array([ 0, 1, 128, 205, 255]),) (array([ 0, 20, 128, 186, 255]),) (array([ 0, 128, 147, 150, 255] ),)

在这一点上，我有点困惑。通过目测，我有颜色（0,0,0），（1,0,0），（0,20,0），（128,128,128）等。我应该如何将非零输出置换为 np.where() 的像素值？

我正在考虑将 3,row,col narray 展平为 24 位压缩 RGB 值 (r<<24|g<<16|b) 的二维平面并搜索该数组。这似乎是蛮力和不雅的。在 Numpy 中是否有更好的方法来查找颜色值的边界框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:53:01.160

没有理由将其视为 RGB 彩色图像，它只是其他人所做的分割的可视化。您可以轻松地将其视为灰度图像，对于这些特定颜色，您无需自己做任何其他事情。

```
import sys
import numpy
from PIL import Image

img = Image.open(sys.argv[1]).convert('L')

im = numpy.array(img) 
colors = set(numpy.unique(im))
colors.remove(255)

for color in colors:
    py, px = numpy.where(im == color)
    print(px.min(), py.min(), px.max(), py.max()) 
```

如果您不能依赖于`convert('L')`提供独特的颜色（即，您正在使用给定图像中的颜色之外的其他颜色），您可以打包您的图像并获得独特的颜色：

```
...
im = numpy.array(img, dtype=int)

packed = im[:,:,0]<<16 | im[:,:,1]<<8 | im[:,:,2]
colors = set(numpy.unique(packed.ravel()))
colors.remove(255<<16 | 255<<8 | 255)

for color in colors:
    py, px = numpy.where(packed == color)
    print(px.min(), py.min(), px.max(), py.max()) 
```

顺便说一句，我还建议在找到边界框之前删除小的连接组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:43:09.290

**编辑**使用您发布的图像将所有内容放在一个工作程序中：

```
from __future__ import division
import numpy as np
import itertools
from PIL import Image

img = np.array(Image.open('test_img.png'))

def bounding_boxes(img) :
    r, g, b = [np.unique(img[..., j]) for j in (0, 1, 2)]
    bounding_boxes = {}
    for r0, g0, b0 in itertools.product(r, g, b) :
        rows, cols = np.where((img[..., 0] == r0) &
                              (img[..., 1] == g0) &
                              (img[..., 2] == b0))
        if len(rows) :
            bounding_boxes[(r0, g0, b0)] = (np.min(rows), np.max(rows),
                                            np.min(cols), np.max(cols))
    return bounding_boxes

In [2]: %timeit bounding_boxes(img)
1 loops, best of 3: 30.3 s per loop

In [3]: bounding_boxes(img)
Out[3]: 
{(0, 0, 255): (3011, 3176, 755, 2546),
 (0, 128, 0): (10, 2612, 0, 561),
 (0, 128, 128): (1929, 1972, 985, 1438),
 (0, 255, 0): (10, 166, 562, 868),
 (0, 255, 255): (2938, 2938, 680, 682),
 (1, 0, 0): (10, 357, 987, 2591),
 (128, 0, 128): (417, 1873, 984, 2496),
 (205, 186, 150): (11, 56, 869, 1752),
 (255, 0, 0): (3214, 3223, 570, 583),
 (255, 20, 147): (2020, 2615, 956, 2371),
 (255, 255, 0): (3007, 3013, 600, 752),
 (255, 255, 255): (0, 3299, 0, 2591)} 
```

不是很快，即使实际检查的颜色数量很少......

* * *

您可以找到颜色`r0`,的边界框`g0`，`b0`其内容类似于

```
rows, cols = np.where((ra == r0) & (ga == g0) & (ba == b0))
top, bottom = np.min(rows), np.max(rows)
left, right = np.min(cols), np.max(cols) 
```

`2**24`您可以仅使用非零直方图箱的笛卡尔积来大大减少搜索空间，而不是遍历 RGB 颜色的所有组合：

```
for r0, g0, b0 in itertools.product(np.nonzero(rhist),
                                    np.nonzero(ghist),
                                    np.nonzero(bhist)) : 
```

您将有不存在的组合泄漏，您可以过滤掉检查`rows`并且`cols`不是空元组。但是在您的示例中，您会将`2**24`组合的搜索空间减少到只有 125 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:24:01.077

这只是我脑海中的一个解决方案。您可以从左上角到右下角遍历图像中的像素，并为每种颜色保存一个、`top`和值。对于给定的颜色，该值将是您使用该颜色看到的第一行，并且将是最后一个原始值，该值将是该颜色中像素的最小列值，并且是您找到的最大列值。`bottom``left``right``top``bottom``left``right`

然后，对于每种颜色，您可以用所需的颜色从`top-left`到绘制一个矩形。`bottom-right`

我不知道这是否有资格作为一个好的边界框算法，但我想没关系。

# python - win32com powerpoint 对象库中的 __getitem__ 错误

> ID：14538169
> 
> 赞同：1
> 
> 时间：2013-01-26T15:05:00.343
> 
> 标签：python, powerpoint, pywin32

试图得到这个的工作[版本](http://www.java2s.com/Tutorial/Python/0460__Windows/PowerPointExample.htm)

完全按照引用的代码使用，我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#26>", line 1, in <module>
    ppoint()
  File "<pyshell#24>", line 9, in ppoint
    s1a = s1.Shapes[0].TextFrame.TextRange
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 465, in __getattr__
    raise AttributeError("'%s' object has no attribute '%s'" % (repr(self), attr))
AttributeError: '<win32com.gen_py.Microsoft PowerPoint 14.0 Object Library.Shapes instance at 0x36209528>' object has no attribute '__getitem__' 
```

Win32com 导入正常 - 任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T04:32:49.167

我想我遇到了同样的问题。从 MSDN 查看 COM api 后，我发现它的语法有错误。您引用的页面中的正确代码应该是：

```
...
s1 = pres.Slides.Add(1, win32.constants.ppLayoutText)
sleep(1)
s1a = s1.Shapes(1).TextFrame.TextRange
s1a.Text = 'Python-to-%s Demo' % app
sleep(1)
s1b = s1.Shapes(2).TextFrame.TextRange
for i in RANGE:
     s1b.InsertAfter("Line %d\r\n" % i)
     sleep(1)
s1b.InsertAfter("\r\nTh-th-th-that's all folks!")
... 
```

Shapes[1] 应该是 Shapes(1)。林茨伯格是对的。PowerPoint 集合的 COM API 应以 1 开头。

# jquery - jQuery循环插件问题

> ID：14538172
> 
> 赞同：2
> 
> 时间：2013-01-26T15:05:16.113
> 
> 标签：jquery, css, jquery-cycle

我目前在尝试循环遍历一串 div 时遇到了 jQuery 循环插件的一些问题。
文本是`vertical-align: middle;`，但只要添加一个新的 div 并启动插件，文本就会与页面顶部对齐。
这是我的代码：
HTML：

```
<div id="splash-container" style="background-color: #fac4c8; color: #003738">

    <div class="slides">

        <div class="text">
            test-01
        </div>

    </div>  
</div> 
```

CSS：

```
#splash-container {
    position: fixed;
    z-index: 9998;
    height: 100%;
    width: 98%;
    left: 1%;
    cursor: pointer;
}

.slides {
    position:relative;
    display: table;
    vertical-align: middle;
    left: 0px;
    height:100%;
    width:100%;

}

.text {
    display: table-cell;
    vertical-align: middle;
    font-family:'Avenir LT W02 65 Medium', Helvetica, sans-serif;
    font-size: 15px;
    line-height: 12px;
    text-align: left;
    padding-left: 20%;
    padding-right: 20%; 
} 
```

jQuery：

```
$(function() {
$('.slides').cycle();
        }); 
```

这里也有一个工作演示：http: [//jsfiddle.net/ZdLHh/](http://jsfiddle.net/ZdLHh/)
我试图添加更多`.text`幻灯片并循环播放它们，同时保持它们与页面中间对齐，但只要添加另一张幻灯片并且插件被触发文本与页面顶部对齐？
似乎无法弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:14:43.720

我在某些地方更改了您的代码，这是`top: 50% !important`在课堂上使用的`text`。

这是演示：http: [//jsfiddle.net/leniel/ZdLHh/3/](http://jsfiddle.net/leniel/ZdLHh/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T17:26:11.617

您需要在每个循环项目内嵌套两个 div。第一个必须有显示：inline-table；第二个必须有 display: table-cell; 这两个 div 都有垂直对齐：中间。

所以结构看起来像这样：

```
<div class="slide-container">
    <div class="slide">
        <div class="outer-container">
            <div class="inner-container">
                Centered content
             </div>
        </div>
    </div>

    <div class="slide">
        <div class="outer-container">
            <div class="inner-container">
                Centered content
             </div>
        </div>
    </div>
 </div> 
```

使用以下CSS：

```
.slide-container {
    height: 300px;
}
.outer-container {
    height: 300px;
    display: inline-table;
    vertical-align: middle;
}
.inner-container{
    vertical-align: middle;
    display: table-cell;
} 
```

你可以在这里看到它工作[http://jsfiddle.net/alsweeet/H9ZSf/6/](http://jsfiddle.net/alsweeet/H9ZSf/6/)

# macos - 为什么这个简单的 applescript 在 ML mail.app 中不再起作用（通常）

> ID：14538174
> 
> 赞同：1
> 
> 时间：2013-01-26T15:05:17.770
> 
> 标签：macos, applescript, sandbox, apple-mail

它仅在您右键单击邮件消息并选择“运行规则”时才有效，但不适用于传入消息（没有交互）。

第一个对话框在传入或手动运行时显示，但第二个对话框（带有 id）仅在手动运行时显示。console.log 中没有显示任何内容

有任何想法吗？

```
using terms from application "Mail"
    on perform mail action with messages theMessages for rule theRule
        tell application "Mail"
            repeat with theMessage in theMessages
                display dialog "inside"

                set theId to id of theMessage

                display dialog "the id is " & theId

            end repeat
        end tell
    end perform mail action with messages
end using terms from 
```

更新：我添加了一个 try catch 块

```
set theId to id of theMessage 
```

这是我得到的错误：

```
Can't get class mssg 1 of class mbxp "Incoming POP messages" of class mact "Telenet". Invalid index. -1719 
```

知道这意味着什么吗？手动应用规则时我没有收到错误消息。

**更新 2：好的，我发现传入的消息还没有 ID。这是一个问题，因为我想将电子邮件保存到磁盘：**

```
set theEmail to (do shell script "mdfind -onlyin ~/Library/Mail \"kMDItemFSName = '" & theId & ".emlx'\"")
set archiveName to theId & "-" & (extract address from theMessage's sender) & ".emlx"
set saveLocation to "Users:wesley:Documents:Incoming:"

do shell script "cp '" & theEmail & "' '" & POSIX path of saveLocation & "';" 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:48:35.357

正如[我在评论](https://stackoverflow.com/questions/14538174/why-doesnt-this-simple-applescript-work-any-more-in-ml-mail-app-as-a-rule#comment20280543_14538174)中所承诺的，这是一个 AppleScript，它记录了 Mail 消息的`subject`、`id`和`message id`~/Desktop/log.txt。

```
using terms from application "Mail"
    on perform mail action with messages theMessages for rule theRule
        try
            repeat with theMessage in theMessages
                LogText("subject:    " & (theMessage's subject as string))
                LogText("id:         " & (theMessage's id as string))
                LogText("message id: " & (theMessage's message id as string))
                LogText("")
            end repeat
        on error errorText number errorNumber
            tell application "Mail" to display alert ("Error: " & errorNumber) message errorText
            return
        end try
    end perform mail action with messages
end using terms from

on LogText(theText)
    tell application "Finder"
        set logPath to (path to the desktop as text) & "log.txt"
        try
            set writeText to open for access file logPath with write permission
            set currentDateAsString to do shell script "date +\"%Y-%m-%d %T\""
            write (currentDateAsString & "    " & (theText as text) & return) to writeText starting at ((get eof writeText) + 1)
            close access writeText
        on error errorText number errorNumber
            close access writeText
            error errorText number errorNumber
        end try
    end tell
end LogText 
```

我也在运行 OS X 10.8.2 和 Mail 6.2。正如我所说，我很惊讶这样说，但是通过邮件规则触发上述 AppleScript 对传入消息的效果与在选择菜单“应用规则”时一样有效。

# vb.net - Windows 8 应用程序 - 以编程方式添加的路径消失

> ID：14538178
> 
> 赞同：0
> 
> 时间：2013-01-26T15:07:00.990
> 
> 标签：vb.net, xaml, windows-8, windows-store-apps

对此的任何帮助将不胜感激。

我正在尝试使用 xaml 和 vb 在 Windows 8 中构建应用程序。

为了测试向 UI 动态添加路径的过程，我创建了一个使用路径绘制圆的类（下面的代码）。当点击/单击按钮时，代码会触发。

然后圆圈在屏幕中心附近短暂出现，但随后消失。

如果我然后计算网格上的孩子，则计算圆圈。它只是不可见。

我想了解正在发生的事情并阻止圆圈消失。

```
Dim path As New Windows.UI.Xaml.Shapes.Path
Dim rectG As New EllipseGeometry
rectG.Center = New Point(500, 500)
rectG.RadiusX = 100
rectG.RadiusY = 100
path.Data = rectG
path.Stroke = New SolidColorBrush(Windows.UI.Colors.LightGreen)
path.StrokeThickness = 1
path.Fill = New SolidColorBrush(Windows.UI.Colors.LightGreen)
path.Name = "TestName"
_TargetGrid.Children.Add(path) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:36:05.567

终于想通了。我需要设置列和行跨度属性。

在测试中，我使用代码完成了它，尽管在适当的应用程序中使用某种预先确定的样式可能是有意义的。

但是，这是我添加的代码：

```
path.SetValue(Grid.ColumnSpanProperty, 5)
path.SetValue(Grid.RowSpanProperty, 5) 
```

# php - 有太多的 php 标签

> ID：14538180
> 
> 赞同：3
> 
> 时间：2013-01-26T15:07:18.937
> 
> 标签：php

> **可能重复：**
> [打开/关闭标签和性能？](https://stackoverflow.com/questions/2437144/opening-closing-tags-performance)

我是一个表现出色的人，我喜欢让我的代码尽可能高效地运行。我不知道你们中是否有人知道液体模板，以及与之相关的代码风格，但通常他们有像这样的标签

```
{% if | class.method == 'true' %}

    blah text

{% endif %} 
```

我讨厌液体，但我已经在我的网站上使用 php 标签设置了同样的东西。

```
<?php /*if bob is logged in */ if ($user = 'bob') { ?>

     Stuff to do and write

<?php /*end if user is bob*/ } ?> 
```

我有点喜欢这个设计，html 真的很容易编辑，但我发现我的模板中有很多 php 标签谜语。这是糟糕的设计吗？我的意思是可读性对我来说很好，实际上它更好，但我担心如果我添加所有这些小标签，我是否会对网站的性能做出太大的牺牲。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:28:53.337

不，这不是一个大的性能问题。许多编译的模板只是简单地用 PHP 的打开和关闭标签替换模板标签（例如 Smarty）。

见@h2oooooooooooooooo 链接

[https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil](https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil)

# vb.net - 即使调用 ToggleDesktop() (shell32.dll) 也让表单保持在顶部

> ID：14538182
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:07:24.837
> 
> 标签：vb.net, desktop, shell32

无论如何，当触发显示桌面事件并使我的表单可见时，是否有捕获和取消或执行类似 me.activate 的操作？

注意：显示桌面事件是由安装在我的一些用户电脑中的另一个应用程序触发的。我并不想让我的表单始终位于其他打开的窗口之上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:23:53.910

好吧，你的意思是让你的表单保持在 TopMost 上，即使`ToggleDesktop()`in`shell32.dll`被执行。

到目前为止，我可以说：没有。他们试图在[codeguru](http://forums.codeguru.com/showthread.php?416271-Immunize-form-against-quot-Show-Desktop-quot-%28toggledesktop%28%29-desktop.scf%29)进行实验，但似乎没有成功的结果。

# iphone - 获取在 iPhone 地图中使用的路线

> ID：14538185
> 
> 赞同：1
> 
> 时间：2013-01-26T15:07:43.087
> 
> 标签：iphone, objective-c, cocoa-touch, maps

在IOS6之前，我们可以在谷歌地图中使用谷歌路线，但在苹果地图上，谷歌不允许使用谷歌找到的路线点。新 iPhone 地图中是否有任何方法可以获取所有路线点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:18:45.777

i think you can use `CloudMade` . It has `route-me service`

# java - 部署在 Tomcat Web 服务器上的 Axis2 Web 服务代码中的 ServiceLoader 使用

> ID：14538186
> 
> 赞同：0
> 
> 时间：2013-01-26T15:07:42.547
> 
> 标签：java, tomcat, axis2, serviceloader

我在 Ubuntu 的 Axis2 平台上部署了一个 .aar 文件。我正在使用 Oracle JDK1.7 Tomcat 7.0.35 和 Axis2 1.6.2

最近我做了一个重构，使用 java.util.ServiceLoader 类来动态加载一些类的实现。

这是我的 aar 文件结构：

```
META-INF folder

services.xml Contains info about the web service

services folder
    com.companyname...interfacename1 (contains implementation class name)
    com.companyname...interfacename2 (contains implementation class name)
    com.companyname...interfacename3 (contains implementation class name)

com folder
    companyname folder
        bla bla.class compiled class files here 
```

在我的 Eclipse 开发环境中，我的方法运行没有任何问题，但是当它们在 Axis2 Tomcat 平台上运行时，ServiceLoader 类无法加载实现类。可能是什么问题？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:26:17.557

只需使用您的一个类来获取它们的类加载器，然后使用它：

```
 ClassLoader classLoader = com.companyname.blabla.MyClass1.getClassLoader();

    java.util.ServiceLoader.load(blabla.class,classLoader); 
```

它适用于 Tomcat、Axis2 部署代码和开发环境单元测试代码！

# linux - 在 Linux 中检测程序控制的终止与崩溃

> ID：14538189
> 
> 赞同：1
> 
> 时间：2013-01-26T15:07:50.923
> 
> 标签：linux, crash

在 Linux 下运行的程序可能因多种原因终止：程序可能完成所需的计算并简单地退出（正常退出），代码可能会检测到一些问题并抛出异常（提前退出），最后，系统可能会停止执行是因为程序试图做一些它不应该做的事情（例如，访问受保护的内存）（崩溃）。

有没有一种可靠且一致的方法可以区分正常/提前退出和崩溃？那是，

```
% any_program
...time passes and prompt re-appears...
% (type something here that tells me if the program crashed) 
```

例如，是否存在`$?`表示崩溃与程序控制终止的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:19:29.037

The bash man page states:

```
 The  return  value  of a simple command is its exit status, or 128+n if
 the command is terminated by signal n. 
```

You can check for various signals indicating a crash, such as SIGSEGV (11), and SIGABRT(6), by seeing if $? is 139 or 134 respectively:

```
$ any_program
$ if [ $? = 139 -o $? = 134 ]; then
>   echo "Crashed!"
> fi 
```

At the very least, if $? is greater than 128, it indicates something unusual happened, although it may be that the user killed the program by hitting ctrl-c and not an actual crash.

# linux - Unix/Linux shell 变量问题

> ID：14538194
> 
> 赞同：-2
> 
> 时间：2013-01-26T15:08:30.270
> 
> 标签：linux, shell

在终端中，我输入以下代码：

```
~$ a=1
~$ ${a} 
```

它显示：1：找不到命令

但是当我回显变量时，它正确显示 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:12:10.553

告诉外壳：

```
a=1
$a 
```

使外壳程序`1`在其路径中查找具有名称的程序。

告诉它

```
a=1
echo $a 
```

告诉 shell 寻找程序`echo`，然后接收您的第一个参数 ( `1`) 并将其打印到`stdout`.

# c# - MissingMethodException 未处理

> ID：14538196
> 
> 赞同：2
> 
> 时间：2013-01-26T15:08:46.653
> 
> 标签：c#, reflection, missingmethodexception

我正在通过反射创建一个程序集。当我尝试运行我的应用程序时，我得到一个 MissingMethodExeption ：

```
 // public static bool berekenQueens(int Row, int N, bool[,] bord)
        objType.InvokeMember("berekenQueens",
            BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Static,
            null, instance, null);

        // private static bool bordValidatie(int currentRow, int currentCol, bool[,] currentBord, int N)
        objType.InvokeMember("bordValidatie",
            BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Static,
            null, instance, null); 
```

我的代码（单击 menuItem 时，我想创建一个程序集并加载类）

```
 private void MenuItem_Click(object sender, RoutedEventArgs e)
    {
        // Create an assembly object to load our classes
        string path = System.Environment.CurrentDirectory + "\\NQueens.dll";
        Assembly ass = Assembly.LoadFile(path);
        Console.WriteLine(path);

        Type objType = ass.GetType("NQueens.NQueen");

        // Create an instace of NQueens.NQueen
        var instance = Activator.CreateInstance(objType);

        // public static bool berekenQueens(int Row, int N, bool[,] bord)
        objType.InvokeMember("berekenQueens",
            BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Static,
            null, instance, null);

        // private static bool bordValidatie(int currentRow, int currentCol, bool[,] currentBord, int N)
        objType.InvokeMember("bordValidatie",
            BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Static,
            null, instance, null);     
    } 
```

我要加载的方法来自我的项目 NQueens。

```
public class NQueen
{
public static bool berekenQueens(int Row, int N, bool[,] bord)
{
   if (Row >= N) return true; 
   for (int Col = 0; Col < N; Col++)
   {
       //Q toevoegen
       bord[Row, Col] = true;
       //Q + Q volgende Row  controleren
       if (bordValidatie(Row, Col, bord, N) && berekenQueens(Row + 1, N, bord))
       {
           return true;
       }
       //Q verwijderen indien niet door controle
       bord[Row, Col] = false;
   }
   return false;
}

private static bool bordValidatie(int currentRow, int currentCol, bool[,] currentBord, int N)
{
   int colstep = 1;
   for (int i = currentRow - 1; i >= 0; i--)
   {
       //rechte lijn 
       if (currentBord[i, currentCol])
           return false;
       //linker diagonaal
       if (currentCol - colstep >= 0)
       {
           if (currentBord[i, currentCol - colstep])
               return false;
       }
       //rechter diagonaal
       if (currentCol + colstep < N)
       {
           if (currentBord[i, currentCol + colstep])
               return false;
       }
       colstep += 1;
   }
   return true;
}
} 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:28:28.300

binder 也使用参数来找到合适的方法。您没有方法 void berekenQueens() 因此以 null 作为最后一个参数（参数数组）调用 InvokeMember 不会给出匹配的方法。您实际上并不需要该实例（因为该方法是静态的），因此如果您愿意，可以将其保留为 null。

```
 Type objType = ass.GetType("NQueens.NQueen");
      // Create an instace of NQueens.NQueen
      var instance = Activator.CreateInstance(objType);

    var result = objType.InvokeMember("berekenQueens", 
    BindingFlags.InvokeMethod | 
    BindingFlags.Static | 
    BindingFlags.Public,
      null, 
      instance, 
    new object[] {   1, /* Row */ 
                     1, /* N */
                     new bool[,] { {true,false} } /* bord */
                    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:18:03.463

`BindingFlags.NonPublic`代替`BindingFlags.Instance`for 方法，`bordValidatie`因为它是私有方法。

# vb.net - VB.NET DataGridView - 不设置 cell.backgroundcolor

> ID：14538197
> 
> 赞同：0
> 
> 时间：2013-01-26T15:08:48.993
> 
> 标签：vb.net, datagridview, xml-parsing, cell

我正在解析一个 XML 文件，并希望将 DataGridView 中每个单元格的背景颜色设置为XML 文件的`<cell>`和`</cell>`标记之间的字符串。

这是 XML 文件的结构：

```
<?xml version="1.0" encoding="Windows-1252"?>
<Project StartTime="7" EndTime="12">
  <Tabs>
    <Page1 type="Tab">
      <Grids>
        <DataGridView>
          <row> 'first row in DataGridView
            <task name="task1" backcolor="White" /> 'first column on grid
            <cell>White</cell> 'second column (contains a button)
            <cell>Red</cell> 'third column
            <cell>White</cell> 'fourth column
            <cell>White</cell> 'fifth column
                 .  .  . 
```

这是我用来设置单元格颜色的代码：

```
If reader.Name = "cell" Then
 Grid.Rows(i).Cells(i).Style.BackColor = Color.FromName("Color." & reader.ReadElementString("cell"))
End If 
```

但是，程序根本没有设置颜色，每个单元格仍然有白色作为背景颜色。

有没有其他人遇到过这个问题，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:37:49.303

我已经使用以下代码进行了此操作：

```
 Grid.Rows(i).Cells(i).BackColor = Color.FromName(reader.ReadElementString("cell")) 
```

此外，请确保`reader.ReadElementString("cell")`返回正确的颜色名称。

希望能帮助到你！

PS：没有“风格”也没有“颜色”。

# android - Sherlock 操作栏 RTL

> ID：14538200
> 
> 赞同：13
> 
> 时间：2013-01-26T15:09:11.407
> 
> 标签：android, actionbarsherlock, right-to-left

Android 4.2 引入了对从右到左操作栏的支持，有没有办法将 Sherlock 操作栏配置为 RTL 模式？

请注意，当前的 Sherlock Actionbar 版本是 4.2，但我找不到与 RTL 支持相关的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T14:21:16.853

截至目前，ActionBar 的 RTL 功能尚未包含在支持库中。据我所知，它也没有计划，因为底层视图结构发生了一些变化。

如果您使用的是 ActionBarSherlock，它的工作方式与使用本机 ActionBar 相同。从 4.2 开始，它将支持 RTL，而不是在较低的平台级别上。假设你`android:supportsRtl="true"`的清单中有，那就是。

如果您想为所有用户提供良好的 RTL 体验，同时仍为 >=4.2 的用户使用本机 RTL 支持，您可以检查应用程序中的构建级别并相应地进行计划。

我看到的替代方案是：

*   为所有用户使用自定义布局并放弃新 API 级别的易用性
*   支持无用户的 RTL

您的问题是：“有没有办法为 RTL 配置 ABS？”。答案是肯定的，但前提是用户使用的是 4.2。对于低于此的任何东西，如果没有自定义布局，根本就没有办法做到这一点。

# javascript - 使用 Javascript 循环使用图像填充页面

> ID：14538206
> 
> 赞同：2
> 
> 时间：2013-01-26T15:09:58.857
> 
> 标签：javascript, jquery, html, css

我目前正在和一个朋友一起写一个网站，我需要创建一个 javascript 循环，用于从数据库中提取图像并将它们填充到网格上的 xy 位置。

我们使用的数据库是用 python 和 django 构建的，但现在我正试图让它与一个循环和一个测试图像一起工作。

这是有问题的循环：

```
function createImages(){

            var picture = document.createElement('img');{

                for (var pic=0; pic < 100; pic++) { 
                    pic.pk = 1;
                    pic.model = 'image';
                    pic.fields.title = 'Image Test';
                    pic.fields.timestamp = '2013-01-01T00:00:00.000Z';
                    pic.fields.image = 'http://i240.photobucket.com/albums/ff301/quyenhiepkhach/CAT.jpg';
                    pic.fields.height = 30 + 'px';
                    pic.fields.width = 30 + 'px';
                    pic.fields.link = '#ImageLink';
                    pic.fields.board = 1;
                    pic.fields.posx = 100 + 'px';
                    pic.fields.posy = 50 + 'px';
                    pic.fields.owner = 1;
                    pic.fields.region = 1;

                    picture.className = 'image-tooltip';
                    picture.src = pic.fields.image;
                    picture.style.marginTop = pic.fields.posy;
                    picture.style.marginLeft = pic.fields.posx;
                    picture.style.height = pic.fields.height;
                    picture.style.width = pic.fields.width;

                    document.body.appendChild(picture);

                }

            }

};

createimages(); 
```

到目前为止我所做的工作：

*   在我的索引页面上绘制的网格有两个部分（主要和标准）。
*   显示 xy 坐标和标准或主网格空间的鼠标悬停脚本。（不在 jsfiddle 中工作）

到目前为止我已经打破了什么：

*   用于从数据库中提取图像并将其写入页面正文的 Javascript 循环
*   鼠标悬停脚本显示一些图像数据

我已经包含了下面的所有内容来制作网页以及一个**[jsFiddle](http://jsfiddle.net/8eYhK/6/)**

**HTML 头：**

```
 <!-- Le random script for mouseover -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-git.js"></script>

<!--MOUSEOVER SCRIPT FOR GRID COORDINATES-->
<script>
        $(window).load(function(){
            var tooltip = $( '<div id="tooltip">' ).appendTo( 'body' )[0];

                $( '.coords' ).    
                each(function () {       

                    var pos = $( this ).offset(),
                        top = pos.top,           
                        left = pos.left,          
                        width = $( this ).width(),  
                        height = $( this ).height();       

                    $( this ).
                        mousemove(function ( e ) {
                        var x =  ( (e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft) - left ) .toFixed( 0 ),
                            y =  ( ( (e.clientY + document.body.scrollTop + document.documentElement.scrollTop) - top ) ) .toFixed( 0 );

                        if ( x > 20 && x < 481 && y > 20 && y < 321) {
                            $( tooltip ).text( 'prime | ' + x + ', ' + y ).css({                    
                                left: e.clientX + 20,                    
                                top: e.clientY + 10                
                            }).show();
                        }

                        else {
                            $( tooltip ).text( 'standard | ' + x + ', ' + y ).css({                    
                                left: e.clientX + 20,                    
                                top: e.clientY + 10                
                            }).show();

                        }

                    }).         

                    mouseleave(function () {                
                        $( tooltip ).hide();            
                    });    

                });    

        });

</script>

<!--MOUSEOVER SCRIPT FOR IMAGES-->
<script> 
                $(window).load(function(){
            var imagetooltip = $( '<div id="imagetooltip">' ).appendTo( 'body' )[0];

            $( '.image-tooltip' ).    
                each(function () {      

                    $( imagetooltip ).text( pic.fields.title + ' , ' + pic.fields.link ).css({                    
                        left: e.clientX + 20,                    
                        top: e.clientY + 10                
                    }).show();

                    mouseleave(function () {                
                        $( tooltip ).hide();            
                    });     
                });    
        });

</script> 
```

**CSS：**

```
 /* Style for standard section on grid */

        .grid {
            margin: 0px auto auto;
            border: 1px solid #000;
            border-width: 0 1px 1px 0;
            background-color: #28ACF9;
        }

        /* Style for grid div */

        .grid div {
            border: 1px solid #000;
            border-width: 1px 0 0 1px;
            float: left;
        }

        /* Style for prime section on grid */

        .gridprime {
            margin-top: 50px ;
            margin-left: 50px;
            border: 1px solid #000;
            background-color: #FFFF33;
            float: left;
        }

        /* Style for grid coords tooltip */

        #tooltip { 
            text-align:center; 
            background:black; 
            color:white; 
            padding:3px 0; 
            width:150px; 
            position:fixed; 
            display:none; 
            white-space:nowrap;
            z-index:3; 
        }

        /* Style for image tooltip */

        #imagetooltip { 
            text-align:left; 
            background:#CCC; 
            color:white; 
            padding:3px 0; 
            width:200px; 
            position:fixed; 
            display:none; 
            white-space:nowrap;
            z-index:4; 
        } 
```

**HTML 正文：**

```
<!--SCRIPT TO CREATE THE GRID (WORKING)-->
<script type="text/javascript">

function creategrid(size){

            var primeW = Math.floor((460) / size),
                primeH = Math.floor((300) / size),
                standardW = Math.floor((500) / size),
                standardH = Math.floor((500) / size);

            var standard = document.createElement('div');
                standard.className = 'grid coords';
                standard.style.width = (standardW * size) + 'px';
                standard.style.height = (standardH * size) + 'px';
                standard.board = '1';

            var prime = document.createElement('div');
                prime.className = 'gridprime';
                prime.style.width = (primeW * size) + 'px';
                prime.style.height = (primeH * size)+ 'px';
                prime.style.position = 'absolute'
                prime.style.zIndex= '1';
                standard.appendChild(prime);

            for (var i = 0; i < standardH; i++) {

                for (var p = 0; p < standardW; p++) {

                    var cell = document.createElement('div');
                        cell.style.height = (size - 1) + 'px';
                        cell.style.width = (size - 1) + 'px';
                        cell.style.position = 'relative'
                        cell.style.zIndex= '2';
                        standard.appendChild(cell);

            }

        }

        document.body.appendChild(standard);

    }

    creategrid(10);

</script>

<!--SCRIPT TO LOOP IMAGES OUT OF DATABASE (USING 1 TO TEST FOR NOW)-->

<script type="text/javascript">

function createImages(){

            var picture = document.createElement('img');{

                for (var pic=0; pic < 100; pic++) { 
                    pic.pk = 1;
                    pic.model = 'image';
                    pic.fields.title = 'Image Test';
                    pic.fields.timestamp = '2013-01-01T00:00:00.000Z';
                    pic.fields.image = 'http://i240.photobucket.com/albums/ff301/quyenhiepkhach/CAT.jpg';
                    pic.fields.height = 30 + 'px';
                    pic.fields.width = 30 + 'px';
                    pic.fields.link = '#ImageLink';
                    pic.fields.board = 1;
                    pic.fields.posx = 100 + 'px';
                    pic.fields.posy = 50 + 'px';
                    pic.fields.owner = 1;
                    pic.fields.region = 1;

                    picture.className = 'image-tooltip';
                    picture.src = pic.fields.image;
                    picture.style.marginTop = pic.fields.posy;
                    picture.style.marginLeft = pic.fields.posx;
                    picture.style.height = pic.fields.height;
                    picture.style.width = pic.fields.width;

                    if (pic.fields.board = document.body.id);{
                        document.body.appendChild(picture);
                    }

                }

            }

        };

        createimages();

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:09:37.010

您的代码中有各种错误

这`pic`是一个数字，但您似乎正在为其设置属性，因为它是一个对象文字

```
for (var pic=0; pic < 100; pic++) { 
   pic.pk = 1; 
```

此行也将失败，因为您需要首先创建`pic.fields`对象

```
pic.fields = {}; // <-- add this line
pic.fields.title = 'Image Test'; 
```

您的函数已被调用`createImages`，但您正在尝试调用`createimages`（区分大小写）

我建议你查看你的浏览器控制台（通常是 F12）来检查错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:23:05.977

您的代码充满了语法错误和逻辑问题。**首先使用浏览器控制台查看错误并进行相应修复。**

还要注意 javascript 是区分大小写的，所以如果你创建一个函数`createImages()`，你需要使用相同的大小写来调用函数。你打电话给`createimages()`不存在的

您不能使用作为变量在计数器所在的循环中`pic`创建对象。`for``pic`

还需要在循环内而不是在循环外创建新图像。

工作代码：

```
//SCRIPT TO LOOP IMAGES OUT OF DATABASE (USING 1 TO TEST FOR NOW)//
function createImages() {

    for (var pic = 0; pic < 100; pic++) {
         /* new image for each pass of loop*/
        var picture = document.createElement('img');
        var data = {
            pk: 1,
            model: 'image',
            fields: {
                title: 'Image Test',
                timestamp: '2013-01-01T00:00:00.000Z',
                image: 'http://i240.photobucket.com/albums/ff301/quyenhiepkhach/CAT.jpg',
                height: 30 + 'px',
                width: 30 + 'px',
                link: '#ImageLink',
                board: 1,
                posx: 100 + 'px',
                posy: 50 + 'px',
                owner: 1,
                region: 1
            }
        };

        picture.className = 'image-tooltip';
        picture.src = data.fields.image;
        picture.style.marginTop = data.fields.posy;
        picture.style.marginLeft = data.fields.posx;
        picture.style.height = data.fields.height;
        picture.style.width = data.fields.width;
       /* comment out "if" since isn't true*/
       // if (data.fields.board ==document.body.id) {
            document.body.appendChild(picture);
       // }

    }

}

createImages(); 
```

演示：http: [//jsfiddle.net/8eYhK/9/](http://jsfiddle.net/8eYhK/9/)

# if-statement - Arduino：错误：'if'之前的预期不合格ID（使用ping传感器）

> ID：14538210
> 
> 赞同：1
> 
> 时间：2013-01-26T15:10:22.973
> 
> 标签：if-statement, arduino, ping

我修改的脚本有问题。我收到“Ping_Library_Example:9: error: expected unqualified-id before 'if'”
我确定我在某处有一些小语法错误，有什么想法吗？顺便说一句，原始脚本有“void loop”而不是“if”。使用 when 时也可能会发生同样的错误，并且出现相同的错误。有任何想法吗？

```
#include <Ping.h>

Ping ping = Ping(13,74,29);

void setup(){
  Serial.begin(115200);
}

if(digitalRead == HIGH){
  ping.fire();
  Serial.print("Microseconds: ");
  Serial.print(ping.microseconds());
  Serial.print(" | Inches ");
  Serial.print(ping.inches());
  Serial.print(" | Centimeters: ");
  Serial.print(ping.centimeters());
  Serial.println();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:48:29.460

Arduino程序需要一个`loop()`函数才能运行；简单地用`if`条件替换函数是行不通的。尝试将`if`块放入`loop()`函数中。

此外，`digitalRead`它是一个函数，您需要告诉它要从哪个引脚读取。例如，`digitalRead(5)`从引脚 5 读取。

尝试这样的事情：

```
void loop() {
  if(digitalRead(5) == HIGH) {
    ping.fire();
    // insert other code here
  }
} 
```

（将 5 更改为您要读取的任何引脚，或将该值分配给变量并将其传递）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T15:44:49.823

您不能在函数外编写 if 表达式。我认为应该是这样的：

```
void loop() {
   if(digitalRead(5) == HIGH){ //checks pin 5
     ping.fire();
     Serial.print("Microseconds: ");
     Serial.print(ping.microseconds());
     Serial.print(" | Inches ");
     Serial.print(ping.inches());
     Serial.print(" | Centimeters: ");
     Serial.print(ping.centimeters());
     Serial.println();
   }
} 
```

此代码循环，检查 digitalRead 是否为高，如果是，则进行 ping。希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T01:21:07.073

有关可能对偶然发现此答案的人有所帮助的其他信息，

我只是遇到了同样的问题，但我的问题是最后意外省略了一个 }。这导致 if 语句位于任何函数之外。简单的错字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-27T15:31:54.897

如果您能想象这样的事情，由于评论中的反斜杠错字，我收到了同样的错误。违规行是：

```
int my_recvDone() {
    //=======================\
    if ( !g_patternReceived ) { 
```

我认为这是由于解析器中的某种行连续性功能，并且可能会在其他代码区域中表现为不同的编译器错误......

# jquery - 滑块和文本的定位

> ID：14538213
> 
> 赞同：1
> 
> 时间：2013-01-26T15:10:32.473
> 
> 标签：jquery, css, css-float

我有一个内容“制造”需要显示在中心，但它显示在右侧。我想显示与标题部分完全等效的图像滑块，但是当我尝试时它没有扩展。这是我的[网站](http://www.discountedlens.com.au/)

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:49:42.773

您必须使用`float:left` h4 标签的父 div 。并增加 `margin-left`为 630px

```
div.block {
  float: left;
  margin-bottom: 1em;
}

.blockmanufacturer h4 {
  color: #CB5C3A;
  font-size: 20px;
  margin-bottom: 0.2em;
  margin-left: 630px;
  padding-bottom: 1em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:16:15.710

这是 Manufactures 标题的 CSS

```
.blockmanufacturer h4 {margin-left: 450px; color:#cb5c3a; font-size:12px; margin-bottom:0.2em; padding-bottom:1em;} 
```

即使您将 div 居中对齐 / 将其包含 div 的文本居中，因为您添加了*margin-left: 450px*文本将偏向右侧。尝试将其取出和/或将边距更改为 0px auto;

如果您仍然遇到问题，请尝试将*text-align: center*添加到您的 h4 或它的父类。

可能还有一些其他问题与我在这里提到的问题完全不同，这使问题变得更糟，但是如果不查看 CSS 和 HTML 代码就无法判断。（而且我没有足够的时间手动拉出所有代码并通过萤火虫/开发人员工具查看）

# javascript - 如何同步一个 GitHub 存储库和多个 Gist

> ID：14538215
> 
> 赞同：6
> 
> 时间：2013-01-26T15:10:47.927
> 
> 标签：javascript, git, version-control, github, gist

我正在开发一个相当大的 JavaScript 库 ( [Formula.js](http://stoic.com/formula/) ) 函数 (450+)。它们中的大多数相互独立并且完全独立，或者使用知名的第三方库（例如 Moment.js）。为了在函数级别而不是库级别支持讨论和管理贡献，我为每个函数创建了一个[Gist （](https://gist.github.com/)*参见* [CONVERT](https://gist.github.com/4503203) Gist），并为整个库创建了一个存储库[。](https://github.com/sutoiku/formula.js)这使得在函数的文档中包含函数的代码变得容易（参见[CONVERT](http://stoic.com/formula/function.html?name=CONVERT)文档）。

**我的问题是：**如何使主存储库与 Gists 保持同步？

**解决方案应该：**

*   允许从主存储库和各个 Gists 进行更改
*   自动将版权标题包含在各个 Gists 中
*   自动在各个 Gists 上包含与第三方库相关的评论

**额外的想法：**

我找不到很多以这种方式管理项目的例子。我对 Git 也很陌生。因此，我建议的工作流程可能完全有缺陷，或者引入了不必要的复杂性。任何关于控制事情的可能最佳实践的想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:04:36.370

由于每个要点实际上都是一个 git 存储库，因此您可以使用 git 子模块功能将它们全部包含在您的主 GitHub 存储库中。

看看书中的这个页面，[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)，它甚至有一个关于所谓的*Superprojects*的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:56:13.987

您可以使用[Github.js](https://github.com/michael/github)添加版权标题和与库相关的注释。

# android - Android 地图将折线捕捉到街道

> ID：14538222
> 
> 赞同：-4
> 
> 时间：2013-01-26T15:11:15.733
> 
> 标签：android, maps

以下链接显示了如何将折线添加到地图。

[https://developers.google.com/maps/documentation/android/lines](https://developers.google.com/maps/documentation/android/lines)

但是我们如何让这些捕捉到最近的街道呢？在地图的 javascript 实现中是可能的，如下所示：

[http://econym.org.uk/gmap/example_snappath.htm](http://econym.org.uk/gmap/example_snappath.htm)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:18:54.613

您不能在默认地图上执行此操作。只有当您拥有街道的矢量数据时才能这样做，并且您不会从 tomtom(teleatlas) 或 nokia(navteq) 获得它们。

您只能对可用矢量的地图执行此操作，例如 OpenStreetMap。

您在链接中显示的内容是另一回事：他们获得了用户单击的未捕捉开始和结束位置，并将其传递给谷歌网络服务，该服务首先捕捉开始和结束到最近的道路，然后计算路线，谷歌在其地图上绘制了路线。所以我假设他们甚至没有画折线，他们只使用了谷歌网络服务。

由于今天的 GPS 接收器非常准确（3-6m），因此不再需要捕捉到下一条道路。此外，当在地图上不存在的道路上行驶时，这种捕捉会引入错误。

# sql - 为标记系统选择哪种数据库结构

> ID：14538225
> 
> 赞同：0
> 
> 时间：2013-01-26T15:11:31.860
> 
> 标签：sql, database-design

我有一个数据库结构如下：

```
 tbl_products
 -pk id (AutoIncrement)
 -name
 -description

 tbl_tags (1)   OR   tbl_tags (2)
 -pk name            -pk id (AutoIncrement)
                     -name (unique)

 tbl_products_tags
 -fk product_id
 -fk tag_id 
```

我见过大多数选择数据结构 tbl_tags (2)。我想问我是否可以选择 tbl_tags(1) 因为名称总是唯一的，所以我想将其设为主要。它有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:01:02.097

如果您使标签名称唯一，则必须考虑如果需要更改名称，您将做什么。例如，如果我想将“标签”更改为“标签”。

如果这是一个主键，那么所有引用“标签”的子记录也必须更新，这样约束才有效。如果您有很多行引用给定名称，则运行此更改可能会很慢，并且会在您的应用程序中引入一些阻塞/争用。而如果您使用代理主键，您只需更新唯一名称字段，而不是所有子行。

如果您确定永远不会更新标签名称，那么您可以将其用作主键。但是请注意不断变化的需求！

当使用由外部来源发布和管理的代码（例如机场、货币和国家代码）时，自然键通常是有意义的。在这些情况下，您可以确保自然键不会更改，并且保证在域中是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:45:28.627

我的理解是，与选项 2 相比，在非常大的数据集的上下文中， tbl_tags (1) 会有边际性能损失。在较小的数据集中，可能不会那么多。机器可以比字符串更有效地处理整数。

但从更大的角度来看，在现代处理器速度的情况下，除了最大的数据集之外，两者之间的差异可能可以忽略不计。

当然，我这里说的是关系数据库。NoSQL 的各种风格是不同的动物。

此外，还有一致性问题。数据库中的其他表似乎都在使用（我假设是）一个自动递增的整数 ID。出于这个原因，我也会在标签表上使用它。

在设计数据库时使用自动递增整数 PK 字段与“自然键”是一个长期存在的争论。我的理解是，学术界在很大程度上更喜欢“自然键”的概念，而在实践中，某种形式的生成的唯一键往往是常态。

就个人而言，我更喜欢创建对最终用户没有意义的生成密钥，尽可能使用整数。除非我错过了什么，否则索引性能会显着提高。

# postgresql - 在 2 个 heroku 应用程序之间共享一个 heroku 基本 postgres 数据库

> ID：14538227
> 
> 赞同：5
> 
> 时间：2013-01-26T15:11:45.500
> 
> 标签：postgresql, heroku

用谷歌搜索它（并查看了 heroku 网站） - 我只是找不到一组用于将新的 rails 应用程序的数据库连接设置为为不同（早期）应用程序创建的基本数据库的说明。我知道与交换可用数据库的“颜色”有关 - 但我不知道如何......以及链接或任何简单的说明都会受到极大的赞赏。

ps - 我看到了[这个](https://stackoverflow.com/questions/5981508/share-database-between-2-apps-in-heroku)问题，但它已经有几年的历史了，从那时起，heroku 的事情似乎已经发生了变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T01:37:21.710

进入您要推送到 Heroku 的目录并输入以下内容：

```
heroku config:set DATABASE_URL=`heroku config:get DATABASE_URL -a other-app` 
```

其中“other-app”是您之前创建的应用程序中的数据库。例如：

```
heroku config:set DATABASE_URL=`heroku config:get DATABASE_URL -a running-tree-4822` 
```

更详细的说明在 Heroku 的网站上：

[https://devcenter.heroku.com/articles/heroku-postgresql#sharing-heroku-postgres-between-applications](https://devcenter.heroku.com/articles/heroku-postgresql#sharing-heroku-postgres-between-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:51:19.260

我认为你提到的[问题](https://stackoverflow.com/questions/5981508/share-database-between-2-apps-in-heroku)的答案仍然是相关的。[这里](http://neilmiddleton.com/sharing-databases-between-heroku-applications/)还有一篇博文，其中包含更多详细信息。

# javascript - javascript中关联[]，{}和对象之间的区别

> ID：14538228
> 
> 赞同：3
> 
> 时间：2013-01-26T15:11:55.387
> 
> 标签：javascript

> **可能重复：**
> [数组和对象有什么区别？](https://stackoverflow.com/questions/874205/what-is-the-difference-between-an-array-and-an-object)
> [该项目存在于数组中，但它表示该数组的长度为 0？](https://stackoverflow.com/questions/12912598/the-item-exists-in-the-array-but-it-says-that-the-array-is-0-length)

我对javascript中的对象和关联数组有点困惑。我读了这个：[问题](https://stackoverflow.com/questions/8146104/whats-the-difference-between-objects-and-associated-array-in-javascript)，但这个问题说两者没有太大区别。我在控制台中写了这个：

```
var a = [];
a["A"] = 1;

var b = {};
b["B"] = 2;

var c = new Object();
c["C"] = 3; 
```

上面的输出如下：

```
a gives {A : 1} 
b gives {B : 2}
c gives {C : 3} 
```

以上三种情况都给出了相同的结果，因为它们都给出了一个对象。问题是如何在 javascript 中处理以上 3 种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:24:15.813

数组也是一个对象，这就是为什么你也可以使用非数字索引。这些将作为属性添加到数组对象，而不是数组数据的一部分。

数组和对象之间的区别在于，数组将具有数字索引的属性计数为数组数据的一部分，并`length`相应地更新属性。（Array 对象也有一些特定的方法来处理数组数据。）

```
var a = [];
a[42] = 1337; 
```

现在长度已更改为包含该项目：

```
alert(a.length); // shows 43 
```

使用字符串或数字作为索引无关紧要，数字索引即使是字符串也会计数：

```
alert(a[42]); // shows 1337
alert(a["42"]); // shows 1337 
```

减少长度会删除它之外的属性：

```
a.length = 10;
alert(a[42]); // shows undefined 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:16:03.183

在您的示例中，`b`and`c`本质上是相同的，因为`{}`相当于`new Object()`.

回到`a`，它被定义为 an`Array`这是一种特殊的类型，`Object`因为数字属性（基于 uint32）的处理方式不同。`length`添加和删​​除这些属性时，它的属性会更新。

当您`'A'`用作索引时，它会被视为常规属性，由如何`Object`使用属性定义，因此您可以访问它`a.A`或`a['A']`而索引`[5]`只能使用`a[5]`.

`[]`通常，除非属性不为零，否则数组的调试输出始终`length`是，因此您显示的输出有些不规则。

**琐事**

根据[ECMAScript 文档](http://bclary.com/2004/11/07/#a-15.4)，特定值 p 只能是数组索引，当且仅当：

```
(p >>> 0 === p) && (p >>> 0 !== Math.pow(2, 32) - 1) 
```

也可以看看：

[该项目存在于数组中，但它表示该数组的长度为 0？](https://stackoverflow.com/questions/12912598/the-item-exists-in-the-array-but-it-says-that-the-array-is-0-length)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T15:28:15.890

让我们首先澄清一些事情：

`new Object()`是相同的`{}`

`new Array()`是相同的`[]`

后者只是前者的缩写形式。

在幕后，javascript 中的一切基本上都是一个对象（这有点夸张但相当准确）。数组只是从对象派生而来。这是一个相当基本的示例，说明 Array**真正**的样子：

```
var myArray = {};

myArray[0] = 'value1';
myArray[1] = 'value2';
myArray[2] = 'value3';
myArray[length] = 3; 
```

数组的原型包含所有方法。例如：

```
// myArray#push
myArray.prototype.push = function(val){
  myArray[this.length] = val;
  this.length++;
} 
```

另一种说明这一点的方法是获取一个数组并添加非数字键：

```
 var example = [];

 example.push(0);
 example.push(1);
 example.push(2);

 example['a'] = 'a';
 example['b'] = 'b';
 example['c'] = 'c';

 example.log = function(){
   for(var i = 0, l = this.length; i < l; i++){
     console.log( example[i] );
   }

   console.log(this['a']);
   console.log(this['b']);
   console.log(this['c']);
 }

 // example[0] is 0
 // example[1] is 1
 // example[2] is 2

 // example.log is my custom function

 example.log(); // results in
 // 0
 // 1
 // 2
 // a
 // b
 // c 
```

此外，不要总是相信控制台告诉你的一切。例如，如果您这样做：

```
var console_confusion = {};

console_confusion.length = 100;
console_confusion.splice = function(){ /* do absolutely nothing */ };

console.log( console_confusion );//results in
//
// in Chrome:
// [undefined × 100]
// 
```

Chrome 会将具有数字长度属性和拼接函数的任何内容转换为数组。这就是为什么 jQuery 对象在控制台中看起来像数组的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T15:21:39.157

请阅读以下文章 - <a href="http://www.2ality.com/2012/12/arrays.html" rel="nofollow">http://www.2ality.com/2012/12/arrays .html

简而言之，在 JavaScript 中表示的“常规数组”也是`[]`对象，就像或等等。`{}``length``__proto__``Array.prototype``Array``push``forEach`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T15:58:11.937

```
first is an array
second is an object array
third is an array object 
```

# python - 子流程是跨平台的吗？

> ID：14538237
> 
> 赞同：1
> 
> 时间：2013-01-26T15:13:27.960
> 
> 标签：python, qt, pyside

我正在使用 PySide 和 Qt 编写网络监控应用程序。我想让它跨平台。我在很多监控部分都使用 tcpdump 和 nmap。有一个 nmap python 模块，但没有 tcpdump python 模块（我知道），这意味着我必须使用子进程来运行 tcpdump。所以我的问题是，如果我使用子进程，它会在所有平台（windows、linux、mac）上工作还是特定于某个平台？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T15:15:17.620

该`subprocess`模块是跨平台的。它适用于 POSIX（包括 Mac OS X）*和*Windows 平台。

有一些仅适用于 Windows 的注意事项和差异，均记录在[模块文档](http://docs.python.org/2/library/subprocess.html)中。

# internet-explorer - 浏览器模式下的 Firebug lite IE7 不显示

> ID：14538241
> 
> 赞同：0
> 
> 时间：2013-01-26T15:13:46.153
> 
> 标签：internet-explorer, firebug-lite

有谁知道无需安装虚拟机即可在 IE 中以 Ie7 浏览器模式 (F12) 显示萤火虫控制台的解决方法吗？它在 IE8 和 IE9 模式下显示良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:18:50.097

我发现了一些东西，并认为它可能对这里的其他人有用。

基本上直接调用js脚本并将其放置在您要测试的实际站点/页面本身中，而不是单击书签。在其他浏览器模式下，与小书签所允许的相比，它的错误也少了很多。

```
<script src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script> 
```

# unity3d - Unity 3 中的光线投射问题

> ID：14538246
> 
> 赞同：0
> 
> 时间：2013-01-26T15:14:18.020
> 
> 标签：unity3d, transformation, unityscript, raycasting

我正在尝试以一种简单的方式编写我的 AI 脚本。AI 在其前面、左侧和右侧进行光线投射。然后它以不包含“边界”元素的方式采用随机方向。

首先，我的 Update() 检查是否该计算新方向。如果是，它会计算新的方向，然后移动到那个方向。

我正在使用以下代码移动：

```
Debug.DrawLine(transform.position, transform.position + transform.forward, Color.yellow);
Debug.DrawLine(transform.position, transform.position + transform.right, Color.yellow);
Debug.DrawLine(transform.position, transform.position - transform.right, Color.yellow);
    //DEBUGS START AND END POSITION ARE CORRECT

var startTime;
if (Time.time > nextUpdate) {
    Debug.Log("New check");

    var dirWay = MoveDirection();
    //if (dirWay == 0)
        //rot = Quaternion.Euler(0, 0, 0);
    if (dirWay == 1) {
        rot = Quaternion.Euler(0, 90, 0);
    }
    if (dirWay == 2) {
        rot = Quaternion.Euler(0, -90, 0);
    }
    if (dirWay == 3) { //backwards
        rot = Quaternion.Euler(0, 180, 0);
    }
    nextUpdate = Time.time + walkTime; //for example, 2: Every 2 seconds an update
    direction.y = 1;
    direction.y = 1.5 - transform.position.y;
    transform.rotation = transform.rotation * rot;
    transform.position = transform.position + transform.forward + transform.forward;
    //Plus 2 * transform.forward because it moves 2 places
} 
```

函数 MoveDirection 通过光线投射检查障碍​​物。我的 AI 在正确的时间移动正确的距离，但会穿过墙壁。这意味着我的光线投射是错误的。我正在使用以下代码：

```
var obstacles = ["Border", "Boundary", "BoundaryFlame"]; 
var frontAvailable = true;
var leftAvailable = true;
var rightAvailable = true;
var hitFront: RaycastHit;
if (Physics.Raycast(transform.position, transform.position + transform.forward, hitFront, 1.9)) {
    for (var i = 0; i < obstacles.length; i++)
    {
        if (hitFront.collider.gameObject.name.IndexOf(obstacles[i]) > -1)
        {
            frontAvailable = false;
        }
    }
}
var hitLeft: RaycastHit;
if (Physics.Raycast(transform.position, transform.position - transform.right, hitLeft, 1.9)) {
    for (var j = 0; j < obstacles.length; j++)
    {
        if (hitLeft.collider.gameObject.name.IndexOf(obstacles[j]) > -1)
        {
            leftAvailable = false;
        }
    }
}
var hitRight: RaycastHit;
if (Physics.Raycast(transform.position, transform.position + transform.right, hitRight, 1.9)) {
    for (var k = 0; k < obstacles.length; k++)
    {
        if (hitRight.collider.gameObject.name.IndexOf(obstacles[k]) > -1)
        {
            rightAvailable = false;
        }
    }
} 
```

那么，当我想检查 AI 前面的 2 个单位时（从 AI 的角度来看，transform.forward，而不是全局视图！），我是否正确，我应该使用：`Physics.Raycast(transform.position, transform.position + transform.forward, hitFront, 1.9)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:05:20.597

[http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html](http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html)

> 所以，当我想检查 AI 前面的 2 个单位时（从 AI 的角度来看，transform.forward，而不是全局视图！），我是否正确，我应该使用： Physics.Raycast(transform.position, transform.位置 + transform.forward, hitFront, 1.9) ?

你应该有 Physics.Raycast(transform.position,transform.forward,hitFront, 1.9);

# python-3.x - 艰难地学习 Python：设置困难

> ID：14538249
> 
> 赞同：0
> 
> 时间：2013-01-26T15:14:31.943
> 
> 标签：python-3.x

我正在尝试按照书中的说明运行 Python：

1.  使用浏览器访问[http://learnpythonthehardway.org/wiki/ExerciseZero ，获取 gedit 文本编辑器并安装它。](http://learnpythonthehardway.org/wiki/ExerciseZero)
2.  找到您的“终端”程序。它被称为命令提示符。或者，只需运行 cmd。

好吧，实际上我不太清楚他所说的“命令提示符”是什么意思：p 我找了它，但什么也没找到。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:16:40.220

在 Windows 7/Vista 上：开始 -> 键入 'cmd' -> 确定

在 Linux 上应该很容易找到。它通常被称为“终端”。

*   例如带有 Unity 的 Ubuntu：打开启动器 -> 输入“终端” -> 单击它。

# php - 传递从 mysql 表中收集的下拉数据

> ID：14538250
> 
> 赞同：0
> 
> 时间：2013-01-26T15:14:33.113
> 
> 标签：php, html, mysql

我需要一个从 mysql 加载数据并显示在下拉列表中的脚本。从那里，我需要将选定的数据传递到另一个页面。我已经完成了第一步。我现在可以从 mysql 表中加载数据并在下拉菜单中显示它们。具体如下。

```
<?php
include("config.php");
$result= mysql_query("SELECT folder_name FROM folders");

echo '<select name="directory">'; // Open your drop down box

while ($row = mysql_fetch_array($result)) {
   //echo "<option>" . $row['folder_name'] . "</option>";
      echo '<option value="'.$row['folder_name'].'">'.$row['folder_name'].'</option>';
}
echo '</select>';// Close your drop down box
?> 
```

现在我需要帮助将选定的数据传递到另一个页面。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:21:25.820

让我考虑`form`发布到`page2.php`from`page1.php`

**page1.php**

```
<form method="post" action="page2.php">
        //your dropdown code here
        <?php
              include("config.php");
              $result= mysql_query("SELECT folder_name FROM folders");

              $str = '';   
              $str .= '<select name="directory">'; // Open your drop down box

              while ($row = mysql_fetch_array($result)) {
              $str .= '<option    value="'.$row['folder_name'].'">'.$row['folder_name'].'</option>';
              }
              $str .= '</select>';// Close your drop down box

              echo $str;
         ?>

   <input type="submit" value="submit" />
</form> 
```

在 page2.php 中，您可以访问`dropdown`所选值

```
$selVal = '';
if(isset($_POST['directory']))
{
    $selVal = $_POST['directory'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:28:13.753

创建一个 javascript 函数来处理带有文件夹名称数据的重定向：

```
function changePage(folder){
 window.location.href= 'http://www.yourdomain.com/page2.php?folder=' + folder;
} 
```

onchange 选项，以文件夹名称作为输入触发 changePage javascript 函数：

```
include("config.php");
$result= mysql_query("SELECT folder_name FROM folders");

echo '<select name="directory">'; // Open your drop down box

while ($row = mysql_fetch_array($result)) {
      echo '<option value="'.$row['folder_name'].'" onchange="changePage(\''.$row['folder_name'].'\')">'.$row['folder_name'].'</option>';
}
echo '</select>';// Close your drop down box 
```

page2.php

```
$folder_name = strip_tags($_GET['folder']); 
```

# java - 带有 JDBC 准备语句的字符串中的圆括号

> ID：14538254
> 
> 赞同：2
> 
> 时间：2013-01-26T15:15:24.450
> 
> 标签：java, sql, jdbc, parameters, prepared-statement

这是我的 Java JDBC 代码（例如经过修改和简化）：

```
ps = connection.prepareStatement("SELECT a,b,c FROM mytable WHERE category ~ ?");
ps.setString(1, "my/super/category/abc(def");
                                      ^
                                      |
    +---------------------------------+
    |
//this character is problem
result = ps.executeQuery(); 
```

由于字符串中的圆括号，它不起作用。

如何在准备好的语句中转义圆括号？

编辑：根据我的回答（见下文），我的问题是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T07:13:31.437

会回答自己 - 问题在“~”（波浪号）中。

经过一番阐述，有一个有趣的发现：

当 SQL 代码是这样时（参见 SQL 代码中的“相等”标记）：

```
ps = connection.prepareStatement("SELECT a,b,c FROM mytable WHERE category = ?"); 
```

不需要转义。但是当 SQL 代码是这样时（参见 SQL 代码中的“波浪号”标记）：

```
ps = connection.prepareStatement("SELECT a,b,c FROM mytable WHERE category ~ ?"); 
```

如果有特殊字符，则需要转义，在这种情况下为“（”或“）”：

```
ps.setString(1, "super/category/abc(def".replaceAll("\\(", "\\\\("))); 
```

这是因为模式匹配：[PostgreSQL 模式匹配](http://www.postgresql.org/docs/9.0/static/functions-matching.html)因为使用波浪号标记 JDBC 驱动程序不知道圆括号是普通字符（在我的情况下）还是用于模式匹配的分组符号，将项目分组为一个逻辑项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:03:44.647

您可以通过将圆括号放在单引号内来避开圆括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:19:53.377

我认为问题是查询没有返回结果，因为它需要在括号之前设置转义字符，可以通过

```
ps.setString(1, "my/super/category/abc\\(def"); 
```

SQL 语法允许在字符串中包含转义字符。在 Java 中，您无法转义字符串中的括号。

# haskell - 为什么 GADT/存在数据构造函数不能用于惰性模式？

> ID：14538255
> 
> 赞同：30
> 
> 时间：2013-01-26T15:15:27.423
> 
> 标签：haskell, pattern-matching, lazy-evaluation, existential-type, gadt

今天，当我尝试在存在 GADT 构造函数上匹配时使用惰性模式时遇到编译器错误：

> 不能在惰性 (~) 模式中使用存在或 GADT 数据构造函数

为什么会有这个限制？如果允许的话，会发生什么“坏”的事情？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-26T15:39:42.207

考虑

```
data EQ a b where
  Refl :: EQ a a 
```

如果我们可以定义

```
transport :: Eq a b -> a -> b
transport ~Refl a = a 
```

那么我们可以有

```
transport undefined :: a -> b 
```

从而获得

```
transport undefined True = True :: Int -> Int 
```

然后是崩溃，而不是在尝试对`undefined`.

GADT 数据代表*关于*类型的证据，因此伪造的 GADT 数据威胁到类型安全。有必要对它们进行严格的验证以验证该证据：在存在底部的情况下，您不能信任未评估的计算。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-26T15:27:19.427

对于“正常”数据，您可以在模式匹配期间跳过检查构造函数，因为当您尝试使用模式中的数据时，它可能会被证明不存在，从而向您抛出异常。

使用 GADT，*类型签名*可能会根据存在的构造函数而改变。*我们需要在编译时*了解类型；在需要值之前不检查构造函数是不好的。如果这样做，您可能会遇到类型不匹配错误。这可能意味着您的程序因分段错误（或更糟）而崩溃。Haskell 程序不应该*出现*段错误。

# embedded-resource - 用于 MISB KLV 编码的文件类型

> ID：14538257
> 
> 赞同：1
> 
> 时间：2013-01-26T15:15:52.977
> 
> 标签：embedded-resource

我很好奇 Motion Industry Standards Board KLV（密钥长度值）使用什么文件类型。我已经阅读了 MISB 站点上的文档，该文档非常庞大。据我了解，它表明通常使用 MPEG-2，因此我试图了解在文件扩展名中寻找什么来识别能够嵌入 KLV 元数据的文件。

我的问题是：如果文件具有这样的扩展名 - *.TS *.mpg，这是否表明潜在的 KLV 嵌入？还有更多类型吗？来自摄像机的活动视频流是否可以包含 KLV？

任何共鸣或阐述表示赞赏。提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T03:29:27.900

通过扫描 MISB 站点上的文档标题，可以发现 KLV 可以用`AES3 Serial Digital Audio Streams`、`SMPTE 291 Ancillary Data Packets`和`SDP (Session Description Protocol)`[streams] 进行编码。快速阅读指南 .pdf 还表明：

> ...MPEG-2 传输流是用于多个数据流的通用多路复用设备...

...但这并不将 KLV 限制为仅 MPEG-2 TS。

作为对您问题的直接回答：如果 KLV 流包含在 MPEG-2 传输流中，那么是的 - 要么 要么`*.ts`文件`*.mpg`符合条件。（与任何其他能够存储/包含 MPEG-2 传输流的文件一样。）

如果您还有其他问题，请与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T14:31:39.593

正如 MISB 文档所述，只有用于全动态视频的 MPEG 视频流和用于高分辨率广域覆盖的 NITF 图像。

主要是 MPEG-TS 流，AFAIK。

您可以扫描文件中的字符串，如“KLVA”或标准中定义的某些键，以高可信度快速检测此类文件。

# php - PHP：将两个文件合二为一

> ID：14538260
> 
> 赞同：0
> 
> 时间：2013-01-26T15:16:04.460
> 
> 标签：php, file, executable, file-handling

有两个文件，其中一个是二进制文件（一个简单的 exe 文件）。如何使用 PHP 将一些文本信息添加到该 exe 文件的末尾（例如，来自另一个文本文件）？

任何文件管理器都可以将文本无缝地附加到可执行文件的末尾，但是可以使用 PHP 吗？

更新：非常感谢@arkascha！

```
$file = 'original_file.exe';
$newfile = 'new_file.exe';
copy($file, $newfile);
$handle=fopen("new_file.exe", "a+"); 
fwrite($handle, "777777");
fclose($handle); 
```

我们有一个工作 exe 文件，其末尾带有文本“777777”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:19:13.727

这当然是可能的，尽管我不知道这意味着什么。您所要做的就是打开一个文件进行写入，然后打开第一个文件进行读取，读取内容，将其写入您拥有的文件中写入并关闭第一个文件。与第二个文件相同。最后，您关闭您为写入而打开的文件，并拥有一个包含两个文件的连接内容的新文件。为什么不可能呢？

# c++ - 如何将元素插入多图？

> ID：14538261
> 
> 赞同：15
> 
> 时间：2013-01-26T15:16:15.497
> 
> 标签：c++, dictionary, insert, containers, multimap

我想`multimap`在 C++ 中设置如下：

```
multimap<pair<string, string>, vector<double> > mmList; 
```

但是我怎样才能将数据插入其中呢？我尝试了以下代码，但无法编译：

```
mmList.insert(pair<string, string>, vector<double>("a", "b", test)); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T15:25:49.377

您可以使用`std::make_pair(a, b)`. 通常，您可以将对插入到地图/多地图中。在您的情况下，您必须构造一个由字符串对和向量组成的对：

```
 std::multimap<std::pair<std::string, std::string>, std::vector<double> > mmList;

    std::vector<double> vec;
    mmList.insert(std::make_pair(std::make_pair("a","b"), vec)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-24T14:45:38.997

从[C++11开始，与](https://en.wikipedia.org/wiki/C%2B%2B11)[harpun 的答案](https://stackoverflow.com/a/14538357/2675154)相比，您可以使用[`std::multimap::emplace()`](https://en.cppreference.com/w/cpp/container/multimap/emplace)它来摆脱一个：`std::make_pair()`

```
std::multimap<std::pair<std::string, std::string>, std::vector<double>> mmList;
std::vector<double> test = { 1.1, 2.2, 3.3 };
mmList.emplace(std::make_pair("a", "b"), test); 
```

上面的代码不仅更短，而且更高效，因为它减少了不必要的[`std::pair`](https://en.cppreference.com/w/cpp/utility/pair/pair)构造函数调用次数。为了进一步提高效率，您可以使用专门针对您的用例引入的`piecewise_construct`构造函数：`std::pair`

```
mmList.emplace(std::piecewise_construct,
    std::forward_as_tuple("a", "b"),
    std::forward_as_tuple(test)); 
```

这段代码不再更短，但不会调用不必要的构造函数。对象是直接在`std::multimap`给定参数中创建的。

[Ideone 上的代码](https://ideone.com/qUU3Jj)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-14T18:57:15.500

这是示例：

```
std::multimap<std::string,std::string> Uri_SessionId_Map;
std::string uri = "http";
std::string sessId = "1001";
std::pair<std::string,std::string> myPair(uri,sessId);
Uri_SessionId_Map.insert(myPair); 
```

只是为了提高可读性而拆分了几行。您可以了解如何制作配对。pair 必须具有与 multimap 相同的模板化形式。

# c++ - 用二进制搜索递归溢出c ++

> ID：14538262
> 
> 赞同：0
> 
> 时间：2013-01-26T15:16:18.920
> 
> 标签：c++, binary-search

我正在尝试`binarySerach`递归实现，但我遇到了堆栈溢出。

首先，我有`find`一个需要 3 个参数的函数。然后我调用这个函数`main`并从数组中传递地址。坚果我有堆栈溢出！

```
bool find( const int x, const int* pBegin, const int* pEnd)
{    
    int medel =((*pBegin) + (*pEnd -1))/2 ;

    if(x == medel)
        return true ;

    else if( x<medel)
    {
        int last = medel -1 ;
        return find(x, pBegin, &last);
    }
    else if( x > medel) 
    {
        int begin = medel +1;
        return find(x, &begin, pEnd);
    }

}// find

void main()
{    
    int arr[10];
    for (int i=0;i<10;++i)
        arr[i] = i;
    bool found = find(3, &arr[0], &arr[10]);
    cout << "hittat = " << found << endl;

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:18:37.427

There are several very fundamental issues around the use of pointers in your code. Without fixing the code for you, I'll give you a hint:

Try turning `medel` into *a pointer* to the middle element. This might help resolve some of the confusion.

# javascript - 下载base64编码图像IE9

> ID：14538263
> 
> 赞同：1
> 
> 时间：2013-01-26T15:16:21.440
> 
> 标签：javascript, html, internet-explorer, base64

我想在不向服务器发出请求的情况下下载图像。无法在 IE 中运行：

```
<a href="data:image/png;base64,iVBORw0KGgoAA
AANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAD///+l2Z/dAAAAM0l
EQVR4nGP4/5/h/1+G/58ZDrAz3D/McH8yw83NDDeNGe4Ug9C9zwz3gVLMDA/A6
P9/AFGGFyjOXZtQAAAAAElFTkSuQmCC" download="downloadedimage"> download</a> 
```

有什么解决办法吗？

小提琴：http: [//jsfiddle.net/pPMN2/](http://jsfiddle.net/pPMN2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T17:40:30.940

与其他问题类似 -[数据 URI 不适用于 IE](https://stackoverflow.com/questions/17233034/data-uri-doesnt-work-with-ie)

真正的解决方案是去服务器端

这里有一些可能会有所帮助的更多信息

[http://davidwalsh.name/download-attribute](http://davidwalsh.name/download-attribute)

# php - 带有 PHP/Mysql 的音乐网站的评论框

> ID：14538264
> 
> 赞同：-4
> 
> 时间：2013-01-26T15:16:24.977
> 
> 标签：php, mysql

我目前正在设计一个多媒体网站，人们可以查看音乐家的传记。我希望用户能够评论特定音乐家的每个传记页面。

我希望人们能够分别对每一页发表评论，而不会在另一页上显示来自一个页面的评论。我还想为每个评论包括一个竖起大拇指和向下竖起大拇指的系统。先感谢您：：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:28:07.900

All you have to do is Google PHP comment box tutorial and you will find several tutorials on how to do this. The answer is too long to put in this answer, so I will include a link to a tutorial that I found. You may have to modify this a bit to include your specific field, but everything you need to know is in this tutorial.

www.findsource.com tutorial: [http://www.findsourcecode.com/php/commentbox.htm](http://www.findsourcecode.com/php/commentbox.htm)

In order to have this comment section on every page you would need to add the following code to each form:

`<input type="hidden" name="Mid" value="musician-id#">`

Then when you display the comments, you jut have to modify the query to something like:

`SELECT * FROM tblname WHERE Mid = musician-id#`

This will now work on each biography page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:24:14.450

在数据库中创建一个`comments`表。在其中插入一个`MusicianID`指向`musicians`表格的字段。当显示音乐家页面时，加载所有正确的评论`MusicianID`：

```
SELECT [...] FROM `comments` WHERE MusicianID = [id] 
```

# android - Android edittext 插入 html 一个

> ID：14538267
> 
> 赞同：0
> 
> 时间：2013-01-26T15:16:55.353
> 
> 标签：android

我需要插入

`Html.fromHtml("<a href=\"www.google.com\">My site</a>");`

在我的编辑文本中的某个位置。问题是edittext 没有仅为CharSequence 插入。我现在正在使用 setText 方法，但如果文本很长，则需要重绘所有文本。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:02:51.337

`Spanned`实现`CharSequence`所以如果我调用`insert(pos, Html.fromHtml())`效果很好而不是使用：`setText(Html.fromHtml(textBeforePosition + <a href=...>..</a> + textAfterPosition));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:22:19.667

[调用`getText()``EditText`](http://developer.android.com/reference/android/widget/EditText.html#getText%28%29)检索[，](http://developer.android.com/reference/android/widget/EditText.html#getText%28%29)`Editable`然后[调用`insert()``Editable`](http://developer.android.com/reference/android/text/Editable.html#insert%28int,%20java.lang.CharSequence%29)插入您[的](http://developer.android.com/reference/android/text/Editable.html#insert%28int,%20java.lang.CharSequence%29)`CharSequence`. `invalidate()`在此更改之后，您可能需要调用`EditText`它以使其重新绘制，因为我不知道这是否会自动发生。

# sql - Truth Table in SQL WHERE Clause

> ID：14538268
> 
> 赞同：1
> 
> 时间：2013-01-26T15:17:00.657
> 
> 标签：sql, sql-server, tsql

In TSQL WHERE clause, does the Truth Table logic apply?

For instance I have the following code:

```
WHERE (@Flag = 0 AND Title LIKE '%...%') OR (@Flag = 1 AND Title = '...') 
```

In case @Flag = 0, First () will be True and second () will be False. So True OR False would result in True, hence, the second () won't have an effect on the query result. Is that true?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:22:10.833

是的，真值表适用于逻辑。

```
pqp 与 qp 或 q
TTTT
薄膜晶体管
薄膜晶体管
FFFF
```

因此，当`p`为真和`q`为假时，`p OR q`将评估为真。

正如所建议的，还值得一看[3 值逻辑](https://en.wikipedia.org/wiki/Null_(SQL)#Comparisons_with_NULL_and_the_three-valued_logic_.283VL.29)：

[![](../Images/f11c8cc65f2424e8533b7a8aa5845c02.png)](https://i.stack.imgur.com/na7eg.png)
[（来源：[wikimedia.org](http://upload.wikimedia.org/wikipedia/en/thumb/2/2c/3VL_Truth_Table.png/800px-3VL_Truth_Table.png)）]

# javascript - AngularJS changes to the $scope properties aren't reflected in the view without calling $scope.$apply

> ID：14538273
> 
> 赞同：0
> 
> 时间：2013-01-26T15:17:33.393
> 
> 标签：javascript, angularjs

First here's a plunk: [http://plnkr.co/edit/2gD0AB](http://plnkr.co/edit/2gD0AB). This plunk doesn't seem to work correctly because `$scope.$on("$viewContentLoaded")` won't fire, but on my machine it works just fine and I hope you get the idea.

What I'm trying to do there is simply move field objects from `$scope.fields` to `$scope.groupFields = [], $scope.listFields = [], $scope.dataFields = []` when dragging them to the appropriate droppable areas. I've manager to do this using jQuery UI and jQuery UI touch punch (just to be mobile safe).

If you drag an element from the fields box to the one of the empty boxes you'll notice nothing happens on the screen besides the field elements hanging around where you left them. But if do a `console.log($scope.fields)` in the `drop` event listener you'll notice that all of the field objects are correctly set inside each of the field boxes.

If you click the Add element button then you'll simply trigger `console.log($scope.groupFields);` and suddenly all the elements appear correctly in their corresponding boxes like intended in the first place.

After pulling my brains out and after searching the internet for some time I found out that `$scope.$apply()`, called in the `drop` event after the `moveField` function, actually fixes my issue.

And I don't understand why. Shouldn't there be a `digest` already running and updating the view based on what I'm doing in the controller?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:09:48.983

仅仅因为处理这些 jQuery`drop`事件的代码在控制器内部，并不意味着它将在 angularjs 范围/字下运行。为了使这些更改生效，您需要强制 angularjs 应用程序对其模型进行脏检查。这可以通过调用`$apply()`或`$digest()`方法来完成。您应该始终在处理更改`$scope`属性的 jQuery 事件之后或在`timeout`（或`interval`）之后调用这些方法之一。

# php - MySQL On Duplicate Key Update Multiple Insert

> ID：14538274
> 
> 赞同：1
> 
> 时间：2013-01-26T15:17:42.617
> 
> 标签：php, mysql, sql, csv

I'm looping through a CSV to insert/update the name field of some records into a table. The script is mean't to insert the record and if it exists, only update the name field.

It's taking quite some time for larger CSV files so I was wondering if this code could be modified into a multiple INSERT query with an ON DUPLICATE KEY UPDATE command which will only update the name field of the record.

The CSV DOES NOT contain all the fields for the table, only the ones for the primary key and the name. And for that reason, REPLACE will not work for this case.

```
if (($handle = fopen($_FILES['csv']['tmp_name'], "r")) !== FALSE) {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $title = 'Import: '.date('d-m-Y').' '.$row;

            # CHECK IF ALREADY EXISTS
            $explode = explode('-',$data[0]);
            $areacode = $explode[0];
            $exchange = $explode[1];
            $number = $explode[2];

            $update = "INSERT INTO ".TBLPREFIX."numbers SET
            area_code = ".$areacode.",
            exchange = ".$exchange.",
            number = ".$number.",
            status = 1,
            name = '".escape($data[1])."'
            ON DUPLICATE KEY UPDATE name = '".escape($data[1])."'";
            mysql_query($update) or die(mysql_error());
            $row++;

        }
        fclose($handle);
        $content .= success($row.' numbers have been imported.');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:48:47.340

在开始插入之前打开一个事务，并在完成后提交它。这样数据库可以优化磁盘上的写操作，因为它发生在单独的内存空间中。在没有事务的情况下，所有单个查询都会一次自动提交，并对所有其他查询有效。

至少我希望你使用 InnoDB 作为存储引擎——MyISAM 不支持事务并且有其他明显的缺点。如果可能的话，你应该避免它。

# php - deleting "checked" records via populated checkboxes in PHP

> ID：14538277
> 
> 赞同：1
> 
> 时间：2013-01-26T15:17:52.357
> 
> 标签：php

Hi I'm a newbie to PHP and please help me understand where I've gone wrong. Below is an extraction of the lengthy code I have where I'm trying to get SQL database values to a table with checkboxes adding in-front, allowing users to pick and delete the record they want. My issue is once a record is picked through the checkbox and hit delete, the record isn't getting deleted.

The `Validation bit` is what I have in the code to delete the checkbox picked values. `Populating checkboxes for each data row extracted from the database:` will tell you how I'm getting the checkboxes via the loop.

If the information provided isn't sufficient please highlight. Thank you. **Validation bit :**

```
if(isset($_POST['deletez'])) 
  {
    foreach($_POST['deletez'] as $wec)
    {
    $db = mysqli_connect('localhost', 'root', '', 'regional_data');
    if(mysqli_connect_errno()) {die('The connection to the database could not be established.');}
    $rW = mysqli_query($db,"DELETE * FROM brands WHERE bname ='$wec'");
    } 
  } 
```

**Populating checkboxes for each data row extracted from the database:**

```
while ($reK = mysqli_fetch_array($runBrands))
{
$wec = $reK['bname'];
    echo "<tr class='brndTab'>";
echo "<tr>" 
."<td><input type='submit' name='deleteR' id='deleteR' value='Delete.'></td>". 
"</tr>";    
echo "</table>";
    echo "<td class='brndTab'>".$reK["bname"]."</td>";
    echo "<td class='brndTab'>".$reK["bvariant"]."</td>";
    echo "<td class='brndTab1'>".$reK["bsku"]."</td>";
    echo "<td class='brndTa'><input type='checkbox' name='deletez[]' value='$wec'></td>";
    echo "</tr>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:34:45.300

首先你不应该连接到循环内的数据库，移动行 $db = mysqli_connect('localhost', 'root', '', 'regional_data'); 在 foreach 循环之外。否则，您为每个条目打开一个新连接。接下来，你的 mysql 语法有错误，正确的语句是 DELETE FROM Brands WHERE bname ='$wec'"。因为你想删除行，而不是行的内容。把这些放在一起，修改你的代码像这样：

```
$db = mysqli_connect('localhost', 'root', '', 'regional_data');
if(mysqli_connect_errno()) {die('The connection to the database could not be established.');}
foreach($_POST['deletez'] as $wec) {
    $rW = mysqli_query($db,"DELETE FROM brands WHERE bname ='$wec'");
} 
```

# perl - shell scripts convert to perl scripts?

> ID：14538280
> 
> 赞同：0
> 
> 时间：2013-01-26T15:18:15.747
> 
> 标签：perl

i have shell command like?

`sort -k 1 -u ../same_files/put_$2 > ../same_files/p1_$2`.

i want to convert this command into perl scripts it is posible to convert

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:33:39.080

您可以在 table 上[创建触发器](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)`ON INSERT OR UPDATE`。让它开火`FOR EACH STATEMENT`。

在触发器中执行[`NOTIFY`](http://www.postgresql.org/docs/current/interactive/sql-notify.html)符合您的条件并拥有客户端应用程序的数据[`LISTEN`](http://www.postgresql.org/docs/current/interactive/sql-listen.html)。然后客户端执行 a`SELECT`来获取它想要的数据。
`LISTEN`/`NOTIFY`是在 PostgreSQL 之外触发事件的方法。

# python - 在递归函数中复制python中的列表对象 - 奇怪的行为

> ID：14538283
> 
> 赞同：2
> 
> 时间：2013-01-26T15:18:43.480
> 
> 标签：python, list, recursion

这个递归函数：

```
myGrid = [[0,0,0],
          [0,0,0],
          [0,0,0]]

def testchange(grid, number=-1, number2=0):
    kgrid = list(grid)
    kgrid[number][number2] = 2
    number += 1
    number2 += 1
    if number < 2:
        print '1', kgrid
        testchange(kgrid,number,number2)
        print '2', kgrid
        testchange(kgrid,number+1,number2)

testchange(myGrid); 
```

打印出来：

```
1 [[0, 0, 0], [0, 0, 0], [2, 0, 0]]
1 [[0, 2, 0], [0, 0, 0], [2, 0, 0]]
2 [[0, 2, 0], [0, 0, 2], [2, 0, 0]]
2 [[0, 2, 0], [0, 0, 2], [2, 0, 2]] 
```

在我第一次调用 testchange() 之后，在我的函数中，不应更改 kgrid，但是正如您所看到的，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:20:33.123

要复制`grid`，请使用[`copy.deepcopy()`](http://docs.python.org/2/library/copy.html#copy.deepcopy). 否则会进行浅拷贝，从而导致您描述的行为。

# php - Improve dompdf rendering

> ID：14538289
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:18:56.127
> 
> 标签：php, pdf, dompdf

Here is the dompdf rendering of my SO profile page....

[https://docs.google.com/file/d/0B-I8istAg8Z6UmJDVHEtUkZOUDQ/edit](https://docs.google.com/file/d/0B-I8istAg8Z6UmJDVHEtUkZOUDQ/edit)

here's the code

```
<?php 

require_once("dompdf/dompdf_config.inc.php");
$html = file_get_contents('http://stackoverflow.com/users/1461078/samidh-t'); 
$base_path = 'http://'.$_SERVER['HTTP_HOST'] ;
$dompdf = new DOMPDF();

if ( isset($base_path) ) {
  $dompdf->set_base_path($base_path);
}

$dompdf->load_html($html);              
$dompdf->render();                     
$dompdf->stream('file.pdf' , array("Attachment" => 0));

?> 
```

the rendering is not even close to the profile page.
What can be done to improve this rendering ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:04:46.800

Dompdf - 从内存中，当 css 和 html 很简单时渲染页面正常 - 很多浮点数不起作用 - 你会发现使用 dompdf 将网页渲染为 pdf 很困难，除非你自己编写 html 和 css。（或先解析输入文件并修改它们）。

你的总体目标是什么？

我已经使用 dompdf 从数据库中创建数据的 pdf 报告并且取得了成功，但没有使用“float”或任何其他先进的 css 规则。

关于它可以处理的 css 规则的 Dompdf 信息在这里：

从这个页面： [https ://github.com/dompdf/dompdf/blob/master/README.md](https://github.com/dompdf/dompdf/blob/master/README.md)

本文：

> 限制（已知问题）不能特别容忍格式不佳的 HTML 输入（首先使用 Tidy 可能会有所帮助）。不支持大文件或大表可能需要一段时间才能呈现 CSS 浮动（但正在开发中）。如果您觉得这个项目有用，请考虑捐款。

# javascript - Javascript redirection is not working

> ID：14538292
> 
> 赞同：0
> 
> 时间：2013-01-26T15:19:21.283
> 
> 标签：javascript, android, html, redirect, http-redirect

I am creating a mobile version of my application . This is a part of the settings page (mysettings.php).

```
 if(!isset($_SESSION['access_token']))
     {
        echo("<script  type='text/javascript'> window.top.location.href='http://www.example.com/mobile/login.php'</script>");
     } 
```

If the access_token is not set then it should redirect to the login.php but i cant understand why isnt it working.

In the rendered source code I can see because the redirection is not occurring is ( The redirection code exists )

```
<script  type='text/javascript'> window.top.location='http://www.example.com/mobile/login.php'</script>
<!DOCTYPE html> 
<html> 
<head>...
.
.
.</html> 
```

I am using Chrome and this is source code from where I am logging to mysettings.php page

```
<?php
session_start();
$logins=0;
?>
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Settings</h1>
    </div><!-- /header -->

    <div data-role="content">   
         <div class="ui-grid-a">
      <div class="ui-block-a"><a href="mysettings.php" data-role="button" data-mini="true">Settings</a> </div>
      <div class="ui-block-b"><a href="my.php" data-role="button" data-mini="true">My Pictures</a> </div>
    </div>

    </div><!-- /content -->

    <div data-role="footer">

    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:21:54.390

您可以使用`header`PHP 函数执行重定向：

```
<?php
    if(!isset($_SESSION['access_token'])) {
        header("Location: http://www.example.com/mobile/login.php");
        exit;
    }
?> 
```

请注意，这需要在发送任何 HTML 标记之前执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:24:00.293

也许尝试使用 php`header("Location: http://some/url");`或者也尝试使用`window.location.href` instaed of top 最后尝试将脚本而不是文档标记而不是之前（可能有效？...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:59:15.767

我添加了

```
data-ajax="false" 
```

打开按钮`mysettings.php`，它开始正常工作。谢谢

# haskell - Haskell 异常处理的正确设计

> ID：14538294
> 
> 赞同：12
> 
> 时间：2013-01-26T15:19:40.403
> 
> 标签：haskell, exception-handling

我目前正在努力思考在 Haskell 中使用异常的正确方法。异常的*工作原理*很简单；我试图清楚地了解*解释*它们的正确方法。

基本立场是，在一个设计良好的应用程序中，异常不应该逃到顶层。任何出现的异常显然是设计者没有预料到的——即，程序错误（例如，除以零），而不是不寻常的运行时发生（例如，找不到文件）。

为此，我编写了一个简单的顶级异常处理程序，它捕获所有异常并打印一条消息以`stderr`说明“这是一个错误”（在重新抛出异常以终止程序之前）。

但是，假设用户按下 Ctrl+C。这会导致抛出异常。显然，这*不是*任何类型的程序错误。但是，未能*预测*和响应这样的用户中止可能被视为错误。所以也许程序应该捕捉到它并适当地处理它，在退出之前进行任何必要的清理。

但问题是……处理此问题的代码将捕获异常，释放任何资源或其他任何东西，*然后重新抛出异常！*因此，如果异常进入顶层，那并不一定意味着它没有被处理。这只是意味着我们想快速退出。

所以，我的问题是：异常是否应该以这种方式用于流量控制？每个显式捕获的函数都应该`UserInterrupt`使用显式的流控制结构来手动退出而不是重新抛出异常吗？（但是调用者怎么知道也退出？）`UserInterrupt`到达顶层可以吗？但是在那种情况下，`ThreadKilled`同样的论点也可以吗？

简而言之，中断处理程序是否应该为`UserInterrupt`（并且可能`ThreadKilled`）做一个特殊情况？一个`HeapOverflow`or`StackOverflow`呢？*那*是一个错误吗？还是“程序无法控制的情况”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T20:03:10.753

## 在存在异常的情况下清理

> 但是，未能预测和响应这样的用户中止可能被视为错误。所以也许程序应该捕捉到它并适当地处理它，在退出之前进行任何必要的清理。

在某种意义上你是对的——程序员应该预见到异常。但不是通过抓住他们。相反，您应该使用异常安全的函数，例如`bracket`. 例如：

```
import Control.Exception

data Resource

acquireResource :: IO Resource
releaseResource :: Resource -> IO ()

workWithResource = bracket acquireResource releaseResource $ \resource -> ... 
```

这样无论程序是否会被 Ctrl+C 中止，资源都会被清理。

## 异常应该达到顶层吗？

现在，我想谈谈你的另一个陈述：

> 基本立场是，在一个设计良好的应用程序中，异常不应该逃到顶层。

我认为，在设计良好的应用程序中，异常是一种非常好的中止方法。如果这有任何问题，那么你做错了什么（例如，想要在结束时执行清理操作`main`——但这​​应该在`bracket`！）。

这是我在程序中经常做的事情：

1.  定义一个代表任何可能错误的数据类型——任何可能出错的东西。其中一些经常包装其他异常。

    ```
    data ProgramError
      = InputFileNotFound FilePath IOException
      | ParseError FilePath String
      | ... 
    ```

2.  定义如何以用户友好的方式打印错误：

    ```
    instance Show ProgramError where
      show (InputFileNotFound path e) = printf "File '%s' could not be read: %s" path (show e)
      ... 
    ```

3.  将类型声明为异常：

    ```
    instance Exception ProgramError 
    ```

4.  只要我愿意，就在程序中抛出这些异常。

## 我应该捕获异常吗？

您预期的异常必须被捕获和包装（例如 in `InputFileNotFound`）以提供更多上下文。那些你没有预料到的例外情况呢？

我可以看到向用户打印“这是一个错误”的一些价值，以便他们将问题报告给您。如果你这样做，你应该预料到`UserInterrupt`——正如你所说，这不是一个错误。您应该如何对待`ThreadKilled`取决于您的应用程序 - 从字面上看，您是否预期它！

然而，这与“好的设计”是正交的，并且更多地取决于您的目标用户类型、您对他们的期望以及他们对您的程序的期望。响应的范围可能从仅打印异常到显示“我们非常抱歉，您想向开发人员提交报告吗？”的对话框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T17:31:25.420

> 是否应该以这种方式将异常用于流控制？

是的。我强烈建议您阅读[Breaking from a loop](http://www.haskellforall.com/2012/07/breaking-from-loop.html)，它展示了如何`Either`以及`EitherT`它们的核心只是提早退出代码块的抽象。异常只是这种行为的一种特殊情况，您因为错误而退出，但没有理由认为这应该是您过早退出的唯一情况。

# css - The background is not properly displayed

> ID：14538296
> 
> 赞同：0
> 
> 时间：2013-01-26T15:19:55.720
> 
> 标签：css, html

I am working on a website. The background on the homepage is an image. I have tested more resolutions for this website. I put the resolution of 1920x1536 and see the result:

![enter image description here](../Images/957586ea4e7ea26082498815ada97e31.png)

Here is my CSS:

```
body.Homepage
{
    background:url(homepage/Background1.jpg) no-repeat top;
} 
```

How can I scale the image to fit the browser? (besides of re-sizing the photo).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:21:51.170

```
background-size: cover; 
```

参考：

*   [http://www.w3.org/TR/css3-background/#the-background-size](http://www.w3.org/TR/css3-background/#the-background-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:32:48.643

如果我很好地理解了您的问题，我认为您想将背景拉伸到浏览器窗口大小。我没有纯 CSS 解决方案，而是 JavaScript + jQuery 解决方案。这会成功的。

1.  **[Backstretch](http://srobbin.com/jquery-plugins/backstretch/)**是一个简单的 jQuery 插件，它允许您向任何页面或元素添加动态调整大小、支持幻灯片的背景图像
2.  **[全尺寸背景图像 jQuery 插件：Redux](http://bavotasan.com/2011/full-sizebackground-image-jquery-plugin/)**教程。在 Safari、Chrome 和 Firefox 中对其进行了测试，现在可以完美运行。您所需要的只是一张您想要显示为背景的图像。拥有并使用插件后，图像将调整为浏览器窗口的全宽/高度。每次浏览器窗口调整大小时，背景图像也会随之调整。
3.  **[jQuery 可缩放全屏背景图片](http://papermashup.com/jquery-scalable-fullscreen-background-image/)**教程。

**这是一种使用纯 CSS**获取全屏背景图像的技术。但我还没有测试过。**[这](http://paulmason.name/media/demos/full-screen-background-image/)**是演示。

CSS

```
html, body {
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

#full-screen-background-image {
  z-index: -999;
  min-height: 100%;
  min-width: 1024px;
  width: 100%;
  height: auto;
  position: fixed;
  top: 0;
  left: 0;
}

#wrapper {
  position: relative;
  width: 800px;
  min-height: 400px;
  margin: 100px auto;
  color: #333;
} 
```

HTML

```
<body>
  <img alt="full screen background image" src="/background.jpg" id="full-screen-background-image" /> 
  <div id="wrapper">
    <p>Content goes here...</p>
  </div>
</body> 
```

参考： http: [//paulmason.name/item/full-screen-background-image-pure-css-code](http://paulmason.name/item/full-screen-background-image-pure-css-code)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T21:18:11.380

我通过使用具有负 z-index 且没有边距的固定 img（宽度和高度为 100%）来实现这是一种相当骇人听闻的方式。[http://jsfiddle.net/howderek/jTPUN/](http://jsfiddle.net/howderek/jTPUN/)

这样做的缺点是背景是通过 HTML 而不是 CSS，但好处是没有 JS。

如果您希望背景图像滚动，只需将其设为绝对而不是固定。

HTML：

```
<img src="http://derek.genevievehoward.com/images/unicorn.jpg" id="bg" alt=""/> 
```

CSS：

```
#bg {
    width: 100%;
    height: 100%;
    margin: 0;
    z-index: -1;
    position: fixed;
    top: 0px;
    left: 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:59:38.553

如果你打算只使用 CSS，请记住：

> **包含**
> 
> 将图像缩放到最大尺寸，同时保留其固有纵横比（如果有），使其宽度和高度都可以适合背景定位区域。
> 
> **覆盖**
> 
> 缩放图像，同时保留其固有纵横比（如果有），使其宽度和高度都可以完全覆盖背景定位区域。包含始终适合您的视口中的整个图像，只要背景图像和浏览器窗口的比例不同，就会在上下或左右留下不透明的边框。
> 
> 封面总是填满浏览器窗口，在这个过程中剪掉一些头发或耳朵，这是我个人在大多数情况下更喜欢的。您可以使用 background-position 属性控制图像在视口中的对齐方式。

这意味着使用这些方法中的任何一种都会导致图像按比例缩放。唯一的区别是一个会切掉图像的一部分以使其适合，另一个会在屏幕分辨率与图像的纵横比不匹配时添加空白。

如果您的起始图像不足以覆盖您指定的屏幕分辨率（和/或纵横比不同），则无论您使用哪个选项，都会留下空白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T15:28:16.743

Other than `background-size: cover;` you may also use

```
background-size: contain; 
```

Quote reference: [http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

> Scale the image to the largest size such that both its width and its height can fit inside the content area

# sql-server - How To send Excel file to particular user at specific day and specific time

> ID：14538297
> 
> 赞同：0
> 
> 时间：2013-01-26T15:19:58.407
> 
> 标签：sql-server, ado.net

I am create one application that application one file send to user at specific time and specific day export sql data into excel ,sending email that functions working fine but problems is that it cannot execute particular time and particular day I am tried myself but it wont work

```
private void Form1_Load(object sender, EventArgs e)
{ 
    if ((DateTime.Now.DayOfWeek== DayOfWeek.Saturday) &&(DateTime.Now.Hour==19) &&(DateTime.Now.Minute==15))
    {
        exportsqldatatoexcle();
        emailattachment(); 
    }
}

public void exportsqldatatoexcle()
{
    string con1 = "Data Source=ADMIN\\SQLEXPRESS;Initial Catalog=PhysioCure; Integrated Security=true";
    SqlConnection connection = new SqlConnection(con1);
    connection.Open();
    sda = new SqlDataAdapter("select PationName,RegistrationDate,ContactNo,Age,Sex,Chief_Complain,Investigation_Result,PastHistoryAny,Physical_Examination,Medications,Prognosis,Electro_Therapy,Neuro_Rehabilitation,Ortho_Rehabilitation,Cardio_Pulmonery_Rehabilitation,Sports_Rehabilitation from Physio_cureTable order by RegistrationDate desc", con1);
    dt = new DataTable();
    sda.Fill(dt);

    DataColumnCollection dccollection = dt.Columns; 
    Microsoft.Office.Interop.Excel.ApplicationClass excelapp = new Microsoft.Office.Interop.Excel.ApplicationClass();
    excelapp.Application.Workbooks.Add(Type.Missing); 

    for (int i = 1; i < dt.Rows.Count + 1; i++)
    {
        for (int j = 1; j < dt.Columns.Count + 1; j++)
        {
            if (i == 1)
            {
                excelapp.Cells[i, j] = dccollection[j - 1].ToString();
            }
            else
            {
                excelapp.Cells[i, j] = dt.Rows[i - 1][j - 1].ToString();
            }
        }
    }

    excelapp.ActiveWorkbook.SaveCopyAs("E:\\Winform n console\\PhysioCure\\PhysioCure\\Patient_Details.xls");
    excelapp.ActiveWorkbook.Saved = true;
    object m = Type.Missing;
    excelapp.ActiveWorkbook.Close(m, m, m);
    excelapp.Quit();
    connection.Close();
    MessageBox.Show("Detail file successfully create!");
}

private void emailattachment()
{
    //try
    //{
        MailMessage mail = new MailMessage();
        SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
        mail.From = new MailAddress("my email id");
        mail.To.Add("my friend email id");
        mail.Subject = "Sending you Patient_Details File - 1";
        mail.Body = "Please Check Mail With Attachment dear..... ";

        System.Net.Mail.Attachment attachment;
        attachment = new Attachment("E:\\Winform n console\\PhysioCure\\PhysioCure\\Patient_Details.xls");
        mail.Attachments.Add(attachment);

        SmtpServer.Port = 587;
        SmtpServer.Credentials = new System.Net.NetworkCredential("my email id", "password");
        SmtpServer.EnableSsl = true;

        SmtpServer.Send(mail);

        MessageBox.Show("Details File send on your mail please check your mail");
    //}
    /*catch (Exception ex)
    {
        MessageBox.Show("Mail cannot send please contact developer!!");
    }*/ 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:59:04.387

如果您可以在命令行应用程序中封装通过电子邮件发送文件的进程，您可以使用 Windows 任务调度程序对其进行调度。

我会推荐 SSIS 和 SQL 代理，或 SSRS，但因为看起来你正在使用 SQL Express，所以你可能没有这些选项。

# latex - pagebreak in latex document

> ID：14538299
> 
> 赞同：0
> 
> 时间：2013-01-26T15:20:02.153
> 
> 标签：latex

> **Possible Duplicate:**
> [Subfigs of a figure on multiple pages](https://stackoverflow.com/questions/1078370/subfigs-of-a-figure-on-multiple-pages)

I have inserted some images in a latex document using figure and subfigure, like this:

```
\begin{figure}[H]
\centering
\subfigure[]
{
}
\subfigure[]
{
}
\subfigure[]
{
}

...
\subfigure[]
{
}
\end{figure} 
```

The problem is that there are about 20 such subfigures which do not fit on a single page. Latex is not inserting any pagebreak here. I also tried inserting page breaks myself after a few figures using newpage commands like `\newpage`, `\clearpage` and even `\pagebreak`, but none of these works.

Could someone please suggest a solution to this problem. Thanks in advance.

# c# - 如何通过 C# 驱动程序查询 MongoDB 以获取嵌入式文档？

> ID：14538306
> 
> 赞同：2
> 
> 时间：2013-01-26T15:20:42.260
> 
> 标签：c#, linq, mongodb

我想知道如何通过[官方 C# 驱动程序](http://www.mongodb.org/display/DOCS/CSharp+Language+Center)版本 1.7 查询 MongoDB 集合以获取嵌入式文档（在数组中）？通过查询嵌入式文档，我的意思是我只想检索嵌入式文档而不是包含它的文档，AKA [projection](http://docs.mongodb.org/manual/reference/operators/#projection)。

我查询的是带有嵌入式文档的数据模型示例：

```
// Library, contained in db.Libraries
{
    _id: 1,
    Categories: [{_id: 2, Name: "Classics", Books: [{_id: 3, Name: The Count of Monte Cristo}]}]
} 
```

这里的问题是如何在图书馆集合中查询具有`_id`1 的对象和其中一本书具有`_id`3 的对象，并且只返回这本书。它完全可行吗？据我所知，可以通过 MongoDB shell 中的投影来做到这一点。

我的示例查询是查询 db.Libraries 中包含`_id`3 的书，该书包含在 1 的库中`_id`。返回的书将是这个子文档：

```
{_id: 3, Name: The Count of Monte Cristo}]} 
```

我已经查看了[如何使用 MongoDB 的官方 C# 驱动程序检索嵌入式文档的问题？](https://stackoverflow.com/questions/5171462/how-to-retrieve-an-embedded-document-using-the-official-c-sharp-driver-for-mongo)，但我不能让接受的答案对我有用。

**编辑：**

我现在可以看到[如何使用 MongoDB 的官方 C# 驱动程序检索嵌入式文档的已接受答案？](https://stackoverflow.com/questions/5171462/how-to-retrieve-an-embedded-document-using-the-official-c-sharp-driver-for-mongo)作品，*有点*。我没有看到它遍历每个找到的文档，相当于：

```
var libraryCollection = new MongoCollection<Library>();
var refBook = new Book { Id = ObjectId.GenerateNewId().ToString(), Name = "The Count of Monte Cristo" };
libraryCollection.Insert(new Library { Id = ObjectId.GenerateNewId().ToString(), Categories = new[] { new Category { Books = new[] { refBook } } } });

MongoCursor<Library> libraries = libraryCollection.Find(new QueryDocument(
                    new Dictionary<string, object>
                        {
                            {"_id", new ObjectId()},
                        }
                    ));
Book book;
foreach (var library in libraries)
{
    book = library.Categories.SelectMany(c => c.Books).FirstOrDefault(b => b.Id == refBook.Id);
} 
```

但是，此解决方案没有实际意义，因为它*检索整个 Library 文档，而不仅仅是嵌入的 Book 文档*。我真的只需要反序列化嵌入式 Book，AKA [projection](http://docs.mongodb.org/manual/reference/operators/#projection)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T22:23:52.763

要执行投影，其中生成的文档不仅被过滤，而且被重塑，您需要使用[`Aggregate`](http://docs.mongodb.org/manual/reference/aggregation/)而不是这样的`Find`方法之一：

```
var result = collection.Aggregate(
    // Only include the document where _id = 1
    new BsonDocument {{"$match", new BsonDocument {{"_id", 1}}}},
    // 'Unwind' the Categories array by duplicating the docs, one per element.
    new BsonDocument {{"$unwind", "$Categories"}},
    // Now do the same for the Books array inside each Categories element.
    new BsonDocument {{"$unwind", "$Categories.Books"}},
    // Only include the resulting docs with a Book _id of 3
    new BsonDocument {{"$match", new BsonDocument {{"Categories.Books._id", 3}}}},
    // Reshape the document to bring the book attributes out to the top level 
    new BsonDocument {{"$project", new BsonDocument {
        {"_id", "$Categories.Books._id"},
        {"Name", "$Categories.Books.Name"}
    }}}
); 
```

`result.Response.toJson()`：

```
{"result": [{ "_id": 3.0, "Name": "The Count of Monte Cristo" }], "ok": 1.0 } 
```

# php - $facebook->api('/me'); 有时不加载

> ID：14538308
> 
> 赞同：3
> 
> 时间：2013-01-26T15:20:59.493
> 
> 标签：php, facebook, api

我有问题。$user_profile = $facebook->api('/me'); 有时它有效，有时则无效。

在 10 例中有 8 例它正在工作，突然我在 $user_profile 中有一个空字符串。魔法在哪里？

（我实现了最新的 php SDK）

```
// FB lib
require_once './libs/facebook.php';
error_reporting(0);

// connect
$facebook = new Facebook(array(  
    'appId'  => 'xxx',  
    'secret' => 'xxx',  
    'cookie' => true
)); 

$user = $facebook->getUser();
$fb_id = $facebook->getUser();

if ($user) {
    try {
        $_SESSION['user'] = $user_profile = $facebook->api('/me');
        $_SESSION['fb_id'] = $fb_id;
} catch (FacebookApiException $e) {
    error_log($e);
    $user = NULL;
  }
}

if ($user == NULL) {
   $loginUrl = $facebook->getLoginUrl(
       array(
        'display' => 'popup',
        'scope' => 'publish_stream, user_likes',
        'redirect_url' => 'https://xxxx.cz/xxxx/canvas/index.php'
    )
);    
} else {  
     $_SESSION['fb_id'] = $fb_id;
     header("Location: https://xxxx.cz/xxxx/xxxx.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:32:26.070

魔力来自 Facebook，他们的平台似乎不稳定，您依赖于他们的服务器，这些服务器可能无法始终正常工作。

我知道您期望有一个解决方案，但实际上只有一个答案来解释它为什么不起作用。

# c - C 引用传递

> ID：14538311
> 
> 赞同：1
> 
> 时间：2013-01-26T15:21:28.970
> 
> 标签：c, pointers, pass-by-reference, increment

在我的 lSearch 函数（线性搜索）中，我试图通过引用传递一个名为 *numComparisons 的变量。

每次进行比较时，它都应该增加，但由于某种原因它没有这样做。为什么不？当它走到 main.. 的末尾时，该函数确实可以工作（因为它会找到一个比较，或者如果没有找到比较，它将返回 -1）但 numComparisons 值每次都输出为 0。

```
int lSearch(int arr[], int size, int target, int *numComparisons)
{
    int counter;

    for(counter = 0; counter < size; counter++)
    {  
        *numComparisons++;

        if(arr[counter] == target)
           return(*numComparisons);
    }
    return(-1);
}

int main(int argc, char * argv[])
{
   int enterNumbers[1000], copy[1000], counter;
   int numComparisons = 0, target = 26;

   printf("Enter in numbers and press -999 when you are done: ");

   for(counter = 0;; counter++)
   {
      scanf("%d", &enterNumbers[counter]);

      if(enterNumbers[counter] == -999)
          break;  
   }

   arrayCopy(enterNumbers, copy, counter);
   sort(copy, counter);

   if(lSearch(copy, counter, target, &numComparisons) >=0)
   {
      printf("Target number found in linear search.\n");
      printf("Number of comparisons: %d\n", numComparisons);
   }
   else
   {
      printf("Target number was not found in the linear search\n");
      printf("Number of comparisons: %d\n", numComparisons);
   }
   return 0; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T15:22:54.797

改变

```
 *numComparisons++; 
```

到

```
 (*numComparisons)++; 
```

后缀增量比取消引用运算符具有更高的优先级，因此您的代码会递增指针而不是递增指向的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:23:12.287

```
*numComparisons++; 
```

不增加`int`那个指针，它增加指针本身。

您需要添加适当的括号：

```
(*numComparisons)++ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:30:32.117

`*numComparisons++`意味着首先将指针递增 4（在使用数组时很有帮助）
用于`(*numcomparisons)++`递增所`int`指向的`numcomparisons`

# jquery - 我需要使用 jquery 制作一个滑块，以便在单击按钮时显示图像的相应文本

> ID：14538315
> 
> 赞同：-4
> 
> 时间：2013-01-26T15:21:45.460
> 
> 标签：jquery, html, css

这是`html`代码

```
<div id="slider" class="images">
    <img src="img/image1.png" height=200 width=200>
        <p>Image1 corresponding text here</p>    
    <img src="img/image2.png" height=200 width=200>
        <p>Image2 corresponding text here</p>    
    <img src="img/image3.png" height=200 width=200>
        <p>Image3 corresponding text here</p>    
</div>
<div class="switch_image">
    <a href="#" id="prev">Prev</a>
    <a href="#" id="next">Next</a>
</div> 
```

有人帮我完成这项工作吗？在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:59:40.437

这是您实现自己的滑动代码的东西。

这是[小提琴](http://jsfiddle.net/H7k7N/)

**html**

```
<div id="slider" class="images">
<img src="img/image1.png" class="active item" height=200 width=200>
    <p>Image1 corresponding text here</p>    
<img src="img/image2.png" class="item" height=200 width=200>
    <p>Image2 corresponding text here</p>    
<img src="img/image3.png" class="item" height=200 width=200>
    <p>Image3 corresponding text here</p>    
</div>
<div class="switch_image">
    <a href="#" id="prev">Prev</a>
    <a href="#" id="next">Next</a>
</div> 
```

**css**

```
#slider img { display: none; }

#slider img + p { display: none; }

#slider img:first-child { display: block; }

#slider img:first-child + p { display: block; } 
```

**jQuery**

```
$("#next").click(function(){
slideImage(); 
 });

 function slideImage(dir){
   if($("img.active").next().next().hasClass("item"))
       {
         $("img.active").hide().next().hide();
         $("img.active").removeClass("active").next().next().addClass("active");
       }
       else
       {
         $("img.active").removeClass("active").hide().next().hide();
         $("#slider img:first-child").addClass("active");
       }

      $("img.active").show();
     $("img.active").next().show();
 } 
```

**注意：**仅`next`实现功能

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T15:28:02.360

**You can use the jquery cycle plugin to solve the problem.**

[http://jquery.malsup.com/cycle/int2.html.](http://jquery.malsup.com/cycle/int2.html.)

# html - 使用“if”、“add”命令修改 html 的 Chrome 扩展

> ID：14538319
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:21:52.480
> 
> 标签：html, google-chrome, google-chrome-extension

我不是一个熟练的编码器，这就是为什么我的解释会简单而基本。

我想制作一个个人 Google Chrome 扩展程序，在我不拥有的网页中进行 HTML 更改。我不在乎它是非优化的还是丑陋的代码。我只是想让它工作。多写，别怕我。

代码必须检测变量“title="xxxx"，然后它会添加对代码的更改。

例如，如果：

```
<h2>
<a href="/car/bmw" class="secondaryPageLink" title="BMW's page">BMW</a>
</h2>

<div class="age">
<p>2005</p> 
```

然后它被替换为：

```
<h2>
<a href="/car/bmw" class="secondaryPageLink" title="BMW's page">BMW</a>
</h2>

<div class="age">
<p>250000,00$</p>
<p>2005</p> 
```

如果：

```
<h2>
<a href="/car/mercedes" class="secondaryPageLink" title="Mercedes's page">Mercedes</a>
</h2>

<div class="age">
<p>1987</p> 
```

然后它被替换为：

```
<h2>
<a href="/car/mercedes" class="secondaryPageLink" title="Mercedes's page">Mercedes</a>
</h2>

<div class="age">
<p>750000,00$</p>
<p>1987</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:43:45.300

至少您将需要以下文件：

**清单.json**

```
{
    "name": "Personal Extension",
    "version": "0.1.0",
    "manifest_version": 2,
    "description": "Replaces HTML with something.",
    "content_scripts": [{
        "matches": ["<all_urls>"],
        "js": ["contentscript.js"]
    }]
} 
```

**内容脚本.js**

```
// Using a regular expression here to avoid case sensitivity problems,
// and to match for line breaks and whitespace after <div class="age">
var str1 = /<div class="age">\s*?<p>2005<\/p>/gi,
    str2 = '<div class="age"><p>250000$</p><p>2005</p>';

// We don't really want to deal with frames...
if (document.body.nodeName === 'BODY') {
    document.body.innerHTML = document.body.innerHTML.replace(str1, str2);
} 
```

这是一个有效的**[jsfiddle](http://jsfiddle.net/UAMFx/)**。

将这两个文件放在一个文件夹中，然后使用 Chrome 中的“加载解压扩展程序”按钮。

我想公平地说：警告，这是一个非常粗略的解决方案。它很丑陋，在某些情况下可能会中断，但你说你不关心代码质量......所以就在这里。

此外，您提供的 HTML 代码无效。它应该是：

```
<div class="car">
<a title="bmw"></a> 
```

`</div>`希望它在代码后面的某个地方关闭。

## 编辑#1

好的，您已经更新了问题。尝试将以下内容放入 contentscript.js：

```
var titleNode, // placeholder for a title node we're going to look for
    priceNode, // placeholder for a price node we're going to create
    ageNode, // placeholder for an age node where we will append the price node
    carBrand,
    carPrices = { // you can also use an array...
        'bmw': 250000,
        'mercedes': 300000
        // add more cars and prices here
    };

for (carBrand in carPrices) {
    // Don't look down the object's prototype chain:
    if (carPrices.hasOwnProperty(carBrand)) {

        // Find a title node that's inside a <div class="car">,
        // and has a title we're looking for in this iteration:
        titleNode = document.querySelector('div.car>a[title=' +
            carBrand + ']');

        // Make sure the title node is found and that it has a parent:
        if (titleNode && titleNode.parentNode) {
            // Find the age node:
            ageNode = titleNode.parentNode.querySelector('div.age');
            // Check if the <div class="age"> node is really there:
            if (ageNode) {
                priceNode = document.createElement('p');
                priceNode.innerHTML = carPrices[carBrand] + '$';
                ageNode.appendChild(priceNode);
            }
        }

    }
} 
```

这是**[更新的 jsfiddle 示例](http://jsfiddle.net/UAMFx/4/)**。

## 编辑#2

尝试查看上面提供的代码并阅读有关使用的各种函数的文档。否则你永远学不会...

如果您阅读有关[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)和[选择器](http://www.w3.org/TR/selectors/#selectors)的文档，您会发现要找到标题节点，您可以将上述代码修改如下：

```
titleNode = document.querySelector('h2>a[title="BMW\'s page"]'); 
```

...或通过可以在`href`属性中找到的纯品牌名称进行查找：

```
titleNode = document.querySelector('h2>a[href$="bmw"]'); 
```

然后要找到年龄节点，可以查找它的父节点和父节点的下一个元素：

```
ageNode = titleNode.parentNode.nextElementSibling; 
```

这是一个演示它的**[jsfiddle 示例](http://jsfiddle.net/UAMFx/5/)**。

此外，您的 HTML 再次不正确。您没有正确关闭`<h2></h2>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:40:28.113

您不能在 html 中执行此操作。它必须使用可以处理循环结构的实际编程语言来完成。html 是纯粹的框架代码。它不支持条件语句。不幸的是，此时您可能无法掌握编程语言的概念。我建议你先熟悉 html 和 css。用它们构建一些简单的静态网页，这些网页只是展示内容，然后按照自己的方式开始添加功能，就像你正在谈论的使用编程语言的功能一样。

# linux - Shellscript在expect的帮助下自动登录

> ID：14538322
> 
> 赞同：0
> 
> 时间：2013-01-26T15:22:07.353
> 
> 标签：linux, shell, unix, expect

**脚本 1**

```
#!/usr/local/bin/expect
spawn sftp user@10.xx.xxx.xx
expect \"password\"
send \"pass\r\"
interact
send \"lls\r\" 
```

**脚本 2**

```
#!/bin/bash

expect -c "
spawn sftp user@10.xx.xxx.xx
expect \"password\"
send \"pass\r\"
interact
send \"lls\r\"
" 
```

我已经安装了 TCL/TK，期待。script1 在密码提示本身处停止。script2 在成功登录后停止，如

```
spawn sftp user@10.xx.xxx.xx
user@10.xx.xxx.xx's password:
Connected to 10.xx.xxx.xx.
sftp> 
```

我下一个传输文件的命令（比如我有`lcd /home/usr/tmp ,mget *.*`）没有作为其中的一部分执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:46:10.397

调用后`interact`，控制权从脚本返回给用户，以便您可以手动键入命令。因此，不会自动调用任何其他命令。

相反`interact`，您应该添加另一个`expect`等待 sftp 提示符 ( `sftp>`) 的语句，然后再发出您想要的命令。

# python - 字典列表中的单个列表

> ID：14538326
> 
> 赞同：2
> 
> 时间：2013-01-26T15:22:27.023
> 
> 标签：python, list, dictionary

这是 Python 中的列表：

a = [{a:3,b:4}, {c:14,d:24}]

如何创建仅包含字典值的列表？

像这样：

a1=[3,4,14,24]

我用for循环做了这个，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:44:38.997

由于订单显然无关紧要：

```
>>> a = [{'a':3,'b':4}, {'c':14,'d':24}]
>>> a
[{'a': 3, 'b': 4}, {'c': 14, 'd': 24}] 
```

您可以在 listcomp 中获取值：

```
>>> [d.values() for d in a]
[[3, 4], [14, 24]] 
```

然后使用嵌套的 listcomp 将其展平：

```
>>> [value for d in a for value in d.values()]
[3, 4, 14, 24] 
```

这相当于

```
>>> newlist = []
>>> for d in a:
...     for value in d.values():
...         newlist.append(value)
... 
>>> newlist
[3, 4, 14, 24] 
```

如果你真的不想要那个词`for`，我想你可以使用

```
>>> from itertools import chain
>>> list(chain(*map(dict.values, a)))
[3, 4, 14, 24] 
```

[更新：]

一些性能比较（主要是为了提供有关大 N 缩放的信息）：

```
>>> a = [{'a':3,'b':4}, {'c':14,'d':24}]
>>> 
>>> timeit [value for d in a for value in d.itervalues()]
1000000 loops, best of 3: 1.02 us per loop
>>> timeit [value for d in a for value in d.values()]
1000000 loops, best of 3: 1.32 us per loop
>>> timeit list(chain(*map(dict.values, a)))
100000 loops, best of 3: 4.45 us per loop
>>> timeit reduce(operator.add, (d.values() for d in a))
100000 loops, best of 3: 2.01 us per loop
>>> timeit sum((d.values() for d in a), [])
100000 loops, best of 3: 2.08 us per loop
>>> 
>>> a = [{'a':3,'b':4}, {'c':14,'d':24}] * 1000
>>> 
>>> timeit [value for d in a for value in d.itervalues()]
1000 loops, best of 3: 612 us per loop
>>> timeit [value for d in a for value in d.values()]
1000 loops, best of 3: 915 us per loop
>>> timeit list(chain(*map(dict.values, a)))
1000 loops, best of 3: 1.07 ms per loop
>>> timeit reduce(operator.add, (d.values() for d in a))
100 loops, best of 3: 17.1 ms per loop
>>> timeit sum((d.values() for d in a), [])
100 loops, best of 3: 17.1 ms per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:45:31.837

这可以使用列表推导在单行中完成：

```
>>> a = [{'a':3,'b':4}, {'c':14,'d':24}]    #List

>>> [v for d in a for v in d.values()] #Comprehension
    [3, 4, 14, 24] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T15:44:19.837

```
In [9]: import operator

In [10]: a = [{'a':3,'b':4}, {'c':14,'d':24}]

In [11]: reduce(operator.add, (d.values() for d in a))
Out[11]: [3, 4, 14, 24] 
```

请记住，Python 字典是无序的。这意味着不能保证每个字典中键（及其值）的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:00:46.893

使用`itertools` `chain` [方法](http://docs.python.org/2/library/itertools.html#itertools.chain)：

```
import itertools

a = [{'a':3,'b':4}, {'c':14,'d':24}]
list(itertools.chain(*(x.itervalues() for x in a)))
>>> [3, 4, 14, 24] 
```

# c - c编程将一个hexa放入char

> ID：14538330
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:23:11.273
> 
> 标签：c, hex, arp

我有

```
 unsigned char src_mac[6]; 
```

保存具有 %02x 格式的值。例如，要在 src_mac[0] 中查找值，我会：

```
 printf("%02x\n",src_mac[0]); 
```

我想知道如何将值放入 src_mac（我需要将保存为字符串的 mac 地址放入 src_mac 中，然后将 mac 地址放入 ether_arp 结构中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:31:05.017

编辑我的答案...我误读了

`sscanf`无论如何，试试这个`hhx`作为参数......这意味着它将读取一个十六进制值并将其存储为一个字符（不太可能将值存储为 int 的默认值）

```
sscanf(string_mac, "%hhx:%hhx:%hhx:%hhx:%hhx:%hhx", &src_mac[5], &src_mac[4], &src_mac[3], 
                                                    &src_mac[2], &src_mac[1], &src_mac[0]); 
```

# android - Android Develop：表格布局没有以相同大小显示我的所有表格行

> ID：14538334
> 
> 赞同：0
> 
> 时间：2013-01-26T15:23:41.300
> 
> 标签：android, layout, row, tablelayout

我有一个表格布局...

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:shrinkColumns="*">

        <TableRow 
            android:id="@+id/tableRow1"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            >
            <ImageView
                android:id="@+id/botImg01"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg02"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg03"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg04"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg05"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg06"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg07"
                android:clickable="true"  
                android:onClick="imageClick"/>  
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:gravity="center">
            <ImageView
                android:id="@+id/botImg08"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg09"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg10"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg11"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg12"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg13"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg14"
                android:clickable="true"  
                android:onClick="imageClick"/>  
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:gravity="center">
            <ImageView
                android:id="@+id/botImg15"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg16"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg17"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg18"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg19"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg20"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg21"
                android:clickable="true"  
                android:onClick="imageClick"/>  
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:gravity="center">
            <ImageView
                android:id="@+id/botImg22"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg23"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg24"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg25"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg26"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg27"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg28"
                android:clickable="true"  
                android:onClick="imageClick"/>  
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:gravity="center">
            <ImageView
                android:id="@+id/botImg29"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg30"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg31"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg32"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg33"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg34"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg35"
                android:clickable="true"  
                android:onClick="imageClick"/>  
        </TableRow>
        <TableRow
            android:id="@+id/tableRow6"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:gravity="center">
            <ImageView
                android:id="@+id/botImg36"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg37"
                android:clickable="true"  
                android:onClick="imageClick"/>
            <ImageView
                android:id="@+id/botImg38"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg39"
                android:clickable="true"  
                android:onClick="imageClick"/>   
            <ImageView
                android:id="@+id/botImg40"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg41"
                android:clickable="true"  
                android:onClick="imageClick"/>  
            <ImageView
                android:id="@+id/botImg42"
                android:clickable="true"  
                android:onClick="imageClick"/>  
        </TableRow>

    </TableLayout> 
```

但是我看不到最后一个 TableRow 的图像！

在所有 6 行中应该出现这些图像视图。如果它们不适合屏幕，它们可能会被缩放。但他们没有！

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:36:12.127

TableRow 的子项不需要在 XML 文件中指定 layout_width 和 layout_height 属性。TableRow 始终强制这些值分别为 MATCH_PARENT 和 WRAP_CONTENT。
与其将文本视图直接添加到 TableRow，不如让 TableRow 保持水平 LinearLayout 并将第二个视图添加到该保持器。
来源：[TableLayout（TableRow？）在动态添加子视图时未按预期调整子视图的大小](https://stackoverflow.com/questions/8538113/tablelayout-tablerow-not-sizing-child-views-as-expected-when-adding-them-dyna)

# php - 资产 - 无法写入资产

> ID：14538335
> 
> 赞同：10
> 
> 时间：2013-01-26T15:23:46.313
> 
> 标签：php, assetic

这是我的目录结构（这只是一个测试项目）：

```
stan@mypc:/generate_assets$ sudo tree -L 3 -p
.
├── [drwxr-xr-x]  assets
│   └── [drwxr-xr-x]  css
│       ├── [-rw-r--r--]  test1.css
│       └── [-rw-r--r--]  test2.css
├── [-rw-r--r--]  composer.json
├── [-rw-r--r--]  composer.lock
├── [drwxrwxrwx]  public
├── [-rwxr-xr-x]  run
└── [drwxr-xr-x]  vendor
     ....skipping... 
```

这是我应该生成资产的简单脚本（“运行”文件）：

```
#!/usr/bin/env php

<?php
    //loading composer's autoload
    chdir(__DIR__);
    if (file_exists('vendor/autoload.php')) {
        include 'vendor/autoload.php';
    }

    use Assetic\Asset\AssetCollection;
    use Assetic\Factory\AssetFactory;
    use Assetic\Asset\FileAsset;
    use Assetic\Asset\GlobAsset;
    use Assetic\Filter\LessFilter;
    use Assetic\Filter\CssMinFilter;
    use Assetic\AssetWriter;
    use Assetic\AssetManager;

    //Asset manager
    $am = new AssetManager();

    //Add all css files
    $css = new GlobAsset('assets/css/*.css', array(new CssMinFilter()));
    $am->set('basecss', $css);

    // Dumping assets into public
    $writer = new AssetWriter('public');
    $writer->writeManagerAssets($am); 
```

所以 - 我希望来自 assets/css 的 css 文件将被合并、缩小并转储到名为“basecss.css”的公共目录中。这是我得到的例外：

```
PHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Unable to write file public/' in /generate_assets/vendor/kriswallsmith/assetic/src/Assetic/AssetWriter.php:106
Stack trace:
#0 /generate_assets/vendor/kriswallsmith/assetic/src/Assetic/AssetWriter.php(65): Assetic\AssetWriter::write('public/', '*{color:green}?...')
#1 /generate_assets/vendor/kriswallsmith/assetic/src/Assetic/AssetWriter.php(54): Assetic\AssetWriter->writeAsset(Object(Assetic\Asset\GlobAsset))
#2 /generate_assets/run(31): Assetic\AssetWriter->writeManagerAssets(Object(Assetic\AssetManager))
#3 {main}
  thrown in /generate_assets/vendor/kriswallsmith/assetic/src/Assetic/AssetWriter.php on line 106 
```

所以 - 似乎资产试图转储名为“public”而不是“public/basecss.css”的文件？有什么帮助吗？

**PS解决方案：**

好的。苏。显然我必须跑

```
$css->setTargetPath('css_file_name.css'); 
```

然后它起作用了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-09T17:06:32.050

从文档中并不完全清楚，但它确实在将[资产转储到静态文件](https://github.com/kriswallsmith/assetic#dumping-assets-to-static-files)部分中提到

```
$writer->writeManagerAssets($am); 
```

“将利用资产的目标路径。” 所以是的，正如您建议在编写资产之前设置目标路径将解决问题：

```
$css->setTargetPath('css_file_name.css'); 
```

# html - Section标签可以不包含标题吗？

> ID：14538341
> 
> 赞同：2
> 
> 时间：2013-01-25T21:10:18.363
> 
> 标签：html

我想知道是否可以让节标签在其中不包含标题标签。我看过几个例子，它们里面都有标题标签。

我目前为我的部分标签实现的结构是：

```
<section>
    <article>
        <div>
        </div>
    </article>
    <article>
        <div>
        </div>
    </article>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:46:09.830

目前的规范只说它*通常*有一个标题。没有什么说它*需要*一个。

资料来源：

[http://www.w3.org/TR/html51/sections.html#the-section-element](http://www.w3.org/TR/html51/sections.html#the-section-element)

[http://developers.whatwg.org/sections.html#the-section-element](http://developers.whatwg.org/sections.html#the-section-element)

[http://html5doctor.com/the-section-element/](http://html5doctor.com/the-section-element/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:23:52.117

HTML5 不要求在文章元素中使用标题，但是如果您想发布其他详细信息（例如发布日期）以及您还可以在每篇文章中包含一个漂亮的页脚，它会很有用。

这将很有用：

```
<section>
    <article>
        <header>
            <hgroup>
                <h1>This is the Article Header</h1>
                <h2>This is a tagline header</h2>
            </hgroup>
            <time class="dtstart" datetime="2011-10-05T09:00Z">9am Oct 5th</time>
         </header>
         <div>
             <p>This is the content</>
         </div>
         <footer>
             <p>Article Authored by Username<br>
             Twitter Link<br>
             Google Plus Author Link</p>
         </footer>
</article> 
```

通过使用上面的代码，您可以在几乎不添加任何类的情况下为网站设置样式，因为您网站的主要页眉和页脚不会包含在一个部分中，或者至少我希望您没有它。

因此，无需制作额外的类（例如非常友好的代码）就可以设置文章页脚和页眉以及其中的所有其他内容

```
article header h1 {font-size:20px;}
article header h2 {font-size:12px;}
article div h1 {font-size:36px;}
article div h2 {font-size:26px;}
article footer {font-size:12px;}
article time {fonts-size:9px;}
article hgroup {padding:20px;}
section article {padding:20px;} 
```

请注意，使用上面的代码不需要创建类，它非常棒且非常灵活。这不会有用：

```
<section>
    <article>
        <header>
            <h1>The Header</h1>
        </header>
        <div>
            <p>I am the content</p>
        </div>        
    </article>
</section> 
```

使用 HTML5 的说明非常模糊，很多人都认为是否应该在文章中使用标题，但如果您有很多内容要粘贴在标题中，例如发布日期、作者、多个 H1、和 H2 等。

我发现文章中的页脚更有用，但通常如果我使用页脚，我也会使用页眉，通常你应该始终使用尽可能少的代码进行编码，如果你愿意，你应该始终考虑使用谷歌片段作为某些 HTML5 的替代品从中受益。

您应该考虑最容易为您的网站设置样式的因素，例如，使用标题可以更容易使用，而无需制作额外的类。

# python - gtk python 列出从组合框中获取文本的字符串

> ID：14538346
> 
> 赞同：0
> 
> 时间：2013-01-26T15:24:20.413
> 
> 标签：python, string, list, dictionary

这是代码： http: [//pastebin.com/dCL7Nt8K](http://pastebin.com/dCL7Nt8K)

我在 python 中工作，我认为它是我正在使用的列表或字典，但我正在使用该程序来获取可以检索哪些类型的视频。

我有它可以获取信息并将其放入组合框中，但我希望能够比较信息，当我打印时，`get_active_text`我会根据位置得到 0、1、2、3 等组合框中的项目，这不会打扰我，我只想比较组合框中的项目，看看它是否是`==`N。

我希望这是有道理的。我正在使用非常适合这种情况的 3rd 方库。

你能告诉我我正在和什么一起工作吗？它们被称为元组吗？

```
def cb_changed(w): passw = w.get_active()

    liststore1 = gtk.ListStore(str)
    liststore2 = gtk.ListStore(str)
    liststore3 = gtk.ListStore(str)
    liststore4 = gtk.ListStore(str)
    liststore5 = gtk.ListStore(str)
    liststore6 = gtk.ListStore(str)

    def combo1_text(widget):
            yt = YouTube()
            yt.url = Conviare.entry1.get_text()
            videolist = yt.videos
            for videos in yt.videos:
                    Conviare.liststore1.append([videos])
            return videolist 
```

抱歉，我试图尽可能多地理解这一点。对于一个简单的 Pytube 文档，我可以查看这个[http://pypi.python.org/pypi/pytube/](http://pypi.python.org/pypi/pytube/)。这真的很简单（试试看）。我把他正在打印的东西放入组合框中，我正在使用 liststore1 来保存这个列表。我只是想知道如何下载，以便用户可以选择一个组合框并让它下载用户想要的东西。如果需要，pastebin 是源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:36:44.747

您不是在使用原始 Python 数据类型，例如列表或元组，而是在使用由 PyGTK 包装成可从 Python 访问的对象的 GTK 小部件。更多详细信息，请参阅 的参考[文档](http://www.pygtk.org/docs/pygtk/class-gtkcombobox.html)和[教程](http://www.pygtk.org/pygtk2tutorial/sec-ComboBoxAndComboboxEntry.html)。`gtk.ComboBox`

# android - 在 Android 中，如何在 Receiver (SDK 3.0) 中处理 facebook 会话过期

> ID：14538349
> 
> 赞同：3
> 
> 时间：2013-01-26T15:24:47.777
> 
> 标签：android, facebook-android-sdk

我正在使用 facebook sdk 3.0。

我想在接收器中使用 Facebook 会话。但是如果会话过期我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:50:19.887

SDK 的设计目的与您在此处尝试执行的操作略有不同。您根本不需要自己处理`Session`对象状态。看看[美味的教程](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)。

在它的身份验证部分，清楚地展示了如何处理会话状态更改。

基本上，facebook 为您提供了一堆**UI 生命周期帮助程序类**，您需要将它们包含在您的应用程序中需要 facebook 功能的任何地方。这些助手将确定会话是否处于活动状态、已过期等，并`onSessionStateChanged()`在会话状态发生变化时调用方法。

您需要做的就是在此方法中执行简单的检查并适当地重定向用户。例如，如果会话已过期，您可以将用户重定向到一个登录页面，其中将有一个 facebook 登录按钮（此按钮由 facebook 在 SDK 中提供，它为您处理身份验证流程。它会询问用户权限，验证会话等，而无需执行任何操作）。

完成本教程一次，我相信您会有更好的理解。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:25:07.307

您是否尝试过[https://github.com/facebook/facebook-android-sdk/blob/master/samples/GraphApiSample/src/com/facebook/samples/graphapi/GraphApiSampleActivity.java#L136-L142的代码](https://github.com/facebook/facebook-android-sdk/blob/master/samples/GraphApiSample/src/com/facebook/samples/graphapi/GraphApiSampleActivity.java#L136-L142)

```
private Session createSession() {
    Session activeSession = Session.getActiveSession();
    if (activeSession == null || activeSession.getState().isClosed()) {
        activeSession = new Session.Builder(this).setApplicationId(applicationId).build();
        Session.setActiveSession(activeSession);
    }
    return activeSession;
} 
```

这将验证会话是否处于活动状态，如果没有 - 创建一个新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:23:37.457

在 facebook android sdk 3.0 中，如果会话过期，则需要使用现有令牌重新打开会话。除了活动（ui 线程上下文）之外，您也可以这样做。

用于重新打开过期的会话

```
public void openSession(Context context)
{
    Looper.prepare()
    Session session = new Session(context, APP_ID, null, true);
    session.openWithImportedAccessToken(accessToken, new Date(tokenExpiryTime), new Date(tokenExpiryTime), AccessTokenSource.FACEBOOK_APPLICATION, Arrays.asList(APP_PERMISSIONS), null);
    Looper.loop()
} 
```

请在实现此之前阅读 looper.prepare 和循环机制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:44:06.700

我发现facebook开发者网站是这样写的：</p>

可以为 Facebook 应用程序生成应用程序访问令牌。使用与其他令牌不同的登录流程生成应用访问令牌；这可以在代码中完成。

这种类型的令牌对于修改应用设置、创建和管理测试用户或读取 App Insights 数据很有用。您可以使用应用令牌代表授予您应用权限的用户发布或删除内容。例如，如果用户授予您的应用程序 publish_stream 权限，您的应用程序可以使用应用程序访问令牌代表他们发布状态更新。

> 除非重置 App Secret，否则 App 令牌不会过期。应用访问令牌对于每个应用都是唯一的。

[关于访问令牌的源网页](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

所以，似乎我们不必处理这个问题。如果需要，您可以在令牌因某些问题过期时在通知栏中显示一条消息。

# javascript - 无法摆脱 this.tech.isReady 为 null 或不是对象

> ID：14538350
> 
> 赞同：2
> 
> 时间：2013-01-26T15:25:03.423
> 
> 标签：javascript, jquery, html, cross-browser, video.js

我对 Video.JS 脚本（结合 BigVideo.js）有一点问题

第 2511 行：this.tech.isReady 为 null 或不是对象

以下情况发生在 IE7-8 和 Firefox 12 中。

[https://github.com/zencoder/video-js/issues/210](https://github.com/zencoder/video-js/issues/210)

以下线程给出了如何解决问题的答案（我认为）。

ddadick 说添加以下行。

```
V.options.flash.iFrameMode = true; 
```

我已经尝试过这个，但它并不意味着在 Firefox 中工作，因为条件说：

```
if (options.iFrameMode == true && !_V_.isFF) { 
```

如果选项模式不是 Firefox...

我已经关闭了“Firefox”验证进行测试，但 iframe 大小为 350x100。我试图破解 CSS，但它不会全屏显示。

我还尝试了另一种替代方法，它不是`player.play()`直接运行，而是使用准备好的函数调用它，`player.ready(function() { player.play(); } );`但它没有改变任何东西。

我只是在寻找一种方法，至少它不会在 Firefox 或不受支持的浏览器中崩溃。如果我能在这个浏览器中获得完整的视频支持，那就太好了。

当然我可以测试 Firefox 12 或更低版本，不要立即加载视频并显示海报，但我希望不要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T10:23:16.273

如果这是我遇到的同样问题，那么这是 Qt 4 在 OSX 上使用的 Webkit 实现的问题。这实际上不是 video.js 本身的问题。解决方案是升级到 Qt 5，它使用更新的版本，例如在尝试播放 MP4 视频时不会引发此类错误。有关问题和解决方案的详细信息，请参阅此博客文章：http: [//magnemg.tumblr.com/post/113251336220/how-to-solve-a-capybara-webkit-and-video-js](http://magnemg.tumblr.com/post/113251336220/how-to-solve-a-capybara-webkit-and-video-js)

# git - 无法创建目录“/c/\303\234/.ssh”

> ID：14538360
> 
> 赞同：3
> 
> 时间：2013-01-26T15:26:06.337
> 
> 标签：git, windows-7, ssh, push, tortoisegit

我已经使用 rhc 创建了一个 OpenShift 应用程序。git 存储库已在我的 Windows 7 PC 上成功克隆。我想将我的代码更改推回 OpenShift。我正在使用 TortoiseGit。

我已使用[此处](http://olelynge.blogspot.nl/2012/04/tortoisegit-and-ssh-keys.html)描述的过程为 TortoiseGit 创建和设置 SSH 密钥。我已修改设置以配置 SSH 私钥：

![在此处输入图像描述](../Images/3f7cda51d30151b631cfee088d1c26ee.png)

然而，当我尝试推动我的更改时，我得到：

![在此处输入图像描述](../Images/36d8bdc5630657d9de4f1949331378db.png)

是什么导致了这种情况以及如何解决？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T15:36:25.140

看起来 git 无法将已知主机列表保存在`c:\`(in `c:\.ssh\.known_hosts`) 上。通常该`.ssh`目录是在 $HOME 目录中创建的。尝试将 HOME 环境变量设置为当前用户可写的目录，即 Windows 中用户的主目录：`c:\Users\<username>`。

这取决于您是使用 msysgit 还是通过 cygwin 等安装 git。请查看[https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to -find-my-private-rsa-key](https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key)了解更多信息。

# php - Testing the file size

> ID：14538376
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:28:27.987
> 
> 标签：php, html

Okay, so I have a bit of a problem. I am using the HTML5 multiple file upload attribute to upload multiple files. I am using php to loop through each upload. I only want to run the foreach loo if the sum of all of the file sizes of the files being uploaded is greater that 0\. How can I do this.

I have tried:

```
$file_test= $_FILES['uploads']['size']['0'];

if ($file_test != 0) {
   // code to run
} 
```

But this ONLY tests the very first file.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:32:28.163

```
$totalSize = 0;
foreach ($_FILES['uploads']['size'] as $key => $val) {
    $totalSize += $val;
}
if ($totalSize > 0) {
    echo 'Execute stuff.';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:31:09.090

This is basic PHP. Use a loop:

```
$file_test = 0;
$num_files = count($_FILES);
for ($i = 0; $i < $num_files; $i++) {
    $file_test += $_FILES['uploads']['size'][$i];
}

if ($file_test != 0) {
   // code to run
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:32:03.863

you need to loop over the entire file names array and find the total :

```
$totalSize = 0;
foreach ($_FILES['uploads']['name'] as $key => $value) {
    $totalSize += $_FILES['uploads']['size'][$key];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T15:32:53.743

The PHP documentation actually has a big article about handling multiple file uploads. You can [read it here](http://php.net/manual/en/features.file-upload.multiple.php). For your problem though, I would recommend looping through the $_FILES array like so:

```
for($x=0;$x<count($_FILES);$x++) {
     // Do whatever with $_FILES['uploads']['size'][$x]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T15:33:31.727

So in your form you would have something like

```
<input type="file" name="uploads[]" />
<input type="file" name="uploads[]" />
<input type="file" name="uploads[]" />
... 
```

then in PHP you can retrieve the files with

```
$file_test= $_FILES['uploads']['size'][0]; // for the first file
$file_test= $_FILES['uploads']['size'][1]; // for the second file
... 
```

so lose the single quotes

That should do the trick,

Wezy

# android - Filter ListView with Checkboxes

> ID：14538380
> 
> 赞同：1
> 
> 时间：2013-01-26T15:28:54.867
> 
> 标签：android, android-listview, filtering, android-arrayadapter

I'm working with the newest Android SDK and I want to filter my `ListView` which represents a list of different plants, with `CheckBoxes`.

In my list I have 800 Items with different attributes (e.g. color, size, edibility), and the `CheckBoxes` should filter the list in a subtractive way. Only the list items/views which match all attributes should be visible - all other rows should be invisible(the program should work like the filtering system on [www.pilzsuchmaschine.de](http://www.pilzsuchmaschine.de)).

I tried to modify the `getView()` of my custom `ArrayAdapter` but I didn't get the right idea how to do that properly. Does anyone have a solution?

My `ArrayAdapter` is pretty the same as [this one](http://stellarwavedev.com/2012/05/android-custom-arrayadapter-text-and-icon/).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:12:57.183

> 我试图修改我的自定义 ArrayAdapter 的 getView() 但我没有正确的想法如何正确地做到这一点。有没有人有办法解决吗？

您没有在`getView()`方法中进行过滤。首先`OnCheckedChangeListener`在所有过滤器上设置 a`CheckBoxes`以监视它们的状态（每个过滤器都`CheckBoxes`应该有一个`boolean`变量来保存其状态）。当过滤器`CheckBox`被选中/取消选中时，更新状态变量，然后过滤`ListView`. 过滤`ListView`可以通过两种方式完成，手动或使用专用机制（`Filter`类）。

手动，当用户检查时，`CheckBox`您将获取过滤器的所有状态`CheckBoxes`并将它们与植物列表的每个元素进行匹配。与所有状态匹配的元素`CheckBoxes`是有效的，应该添加到新列表中。完成后，让适配器指向新创建的列表并调用`notifyDataSetChanged()`. 我不会采用这种方法，因为您有很多项目。

正确的方法是制作您自己的适配器及其`Filter`方法（在这种情况下，适配器将保存过滤器的状态`CheckBoxes`）。当用户检查过滤器时，`CheckBox`调用适配器上的方法来更新相应的布尔状态。还要调用`getFilter()`适配器上的方法并进行过滤：`((Filterable) adapter).getFilter().filter(null)`. 那里有很多关于实现`Filter`适配器的教程。

# graphics - 扎染图案需要算法

> ID：14538382
> 
> 赞同：1
> 
> 时间：2013-01-26T15:29:02.127
> 
> 标签：graphics, svg, vector-graphics, fabricjs

我正在寻找一种算法或帮助开发一种用于在二维画布中创建扎染图案的算法。我将使用 HTML Canvas（通过 fabric.js）或 SVG 和 JavaScript，但我对任何 2D 图形包中的示例持开放态度，例如 Processing。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:05:13.700

我会画出不同颜色的同心圆环，然后径向移动并偏移它们。下面是一些绘制同心环的伪代码：

```
const kRingWidth = 10;
const centerX = maxX / 2;
const centerY = maxY / 2;
for (y = 0; y < maxY; y++)
{
    for (x = 0; x < maxX; x++)
    {
        // Get the color of a concentric ring - assume rings are 10 pixels wide
        deltaX = x - centerX;
        deltaY = y - centerY;
        distance = sqrt (deltaX * deltaX + deltaY * deltaY);
        whichRing = int(distance / kRingWidth);
        setPixel(x, y, myColorTable [ whichRing ]); // set the pixel based on a color look-up table
    }
} 
```

现在，要获得偏移量，您可以根据 (x, y) 到 x 轴的角度来扰动距离。我会生成一个随机噪声表，比如 360 个条目（每度一个 - 你可以尝试更多或更少来查看它的外观）。所以在计算距离之后，试试这样的事情：

```
angle = atan2(y, x); // This is arctangent of y/x - be careful when x == 0
if (angle < 0) angle += 2.0 * PI; // Make it always positive
angle = int(angle * 180 / PI); // This converts from radians to degrees and to an integer
distance += noiseTable [ angle ]; // Every pixel at this angle will get offset by the same amount. 
```

# php - Neo4jPhp relations

> ID：14538383
> 
> 赞同：0
> 
> 时间：2013-01-26T15:29:03.300
> 
> 标签：php, neo4j

I'm playing around with Neo4j in my php project. I currently created around 100.000 nodes but I wonder how to put some random relations to do some tests on the setup concerning speed.

The nodes have only random properties so I would need a way to put relations using the id.

Any advice?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:59:25.233

Maybe you could just find the highest ID in use on nodes, and then randomly generate a 2 node-ids to connect, and retry if there are no nodes on these IDs?

# oracle - “定长记录”和“定长字段”如何提高数据库性能？

> ID：14538386
> 
> 赞同：2
> 
> 时间：2013-01-26T15:29:16.230
> 
> 标签：oracle, oracle11g, external-tables

任何人都可以解释以下两个语句 wrt 使用`ORACLE_LOADER`访问驱动程序改进 Oracle 外部表性能：

1.  固定长度记录的处理速度比以字符串结尾的记录要快。
2.  固定长度字段的处理速度比分隔字段快。

用代码解释可能有助于我深入理解这个概念。这是两种语法：

***固定字段长度***

```
create table ext_table_fixed (
   field_1 char(4),
   field_2 char(30)
)
organization external (
   type       oracle_loader
   default directory ext_dir
   access parameters (
     records delimited by newline
     fields (
       field_1 position(1: 4) char( 4),
       field_2 position(5:30) char(30)
    )
  )
  location ('file')
)
reject limit unlimited; 
```

***逗号分隔***

```
create table ext_table_csv (
  i   Number,
  n   Varchar2(20),
  m   Varchar2(20)
)
organization external (
  type              oracle_loader
  default directory ext_dir
  access parameters (
    records delimited  by newline
    fields  terminated by ','
    missing field values are null
  )
  location ('file.csv')
)
reject limit unlimited; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:33:07.807

简化的、概念性的、非数据库特定的解释：

当预先知道最大可能的记录长度时，可以在恒定时间内找到记录的结尾/下一条记录的开头。这是因为该位置可以使用简单的加法计算，非常类似于数组索引。想象一下，我使用`int`s 作为指向记录的指针，并且记录大小是在某处定义的整数常量。然后，从当前记录位置获取到下一个：

```
int current_record = /* whatever */;
int next_record = current_record + FIXED_RECORD_SIZE; 
```

就是这样！

或者，当使用以字符串结尾（或以其他方式分隔）的记录和字段时，您可以想象下一个字段/记录是通过线性时间扫描找到的，它必须查看每个字符，直到找到分隔符。像之前一样，

```
char DELIMITER = ','; // or whatever
int current_record = /* whatever */;
int next_record = current_record;
while(character_at_location(next_record) != DELIMITER) {
    next_record++;
} 
```

这可能是现实世界实现的简化或幼稚版本，但总体思路仍然存在：您不能轻易地在恒定时间内完成相同的操作，即使是恒定时间，也不太可能像执行单个添加操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T21:01:20.107

我检查了这个，在我的情况下性能恶化了！我有一个包含整数值的 1GB csv 文件，每个文件都是 10 个字符长，带有填充，字段用“，”分隔，记录用“\n”分隔。我必须遵循脚本（我也尝试设置固定记录大小并删除 ltrim，但没有帮助）。

```
SQL> CREATE TABLE ints_ext (id0 NUMBER(10),
  2                  id1 NUMBER(10),
  3                  id2 NUMBER(10),
  4                  id3 NUMBER(10),
  5                  id4 NUMBER(10),
  6                  id5 NUMBER(10),
  7                  id6 NUMBER(10),
  8                  id7 NUMBER(10),
  9                  id8 NUMBER(10),
 10                  id9 NUMBER(10))
 11  ORGANIZATION EXTERNAL (
 12  TYPE oracle_loader
 13  DEFAULT DIRECTORY tpch_dir
 14  ACCESS PARAMETERS (
 15         RECORDS DELIMITED BY NEWLINE
 16         BADFILE 'bad_%a_%p.bad'
 17         LOGFILE 'log_%a_%p.log'
 18         FIELDS TERMINATED BY ','
 19         MISSING FIELD VALUES ARE NULL)
 20  LOCATION ('data1_1.csv'))
 21  parallel 1
 22  REJECT LIMIT 0
 23  NOMONITORING;

SQL> select count(*) from ints_ext;

  COUNT(*)
----------
   9761289

Elapsed: 00:00:43.68
SQL> select /*+ parallel(1) tracing(STRIP,1) */ * from ints_ext;

no rows selected

Elapsed: 00:00:43.78

SQL> CREATE TABLE ints_ext (id0 NUMBER(10),
  2                  id1 NUMBER(10),
  3                  id2 NUMBER(10),
  4                  id3 NUMBER(10),
  5                  id4 NUMBER(10),
  6                  id5 NUMBER(10),
  7                  id6 NUMBER(10),
  8                  id7 NUMBER(10),
  9                  id8 NUMBER(10),
 10                  id9 NUMBER(10))
 11  ORGANIZATION EXTERNAL (
 12  TYPE oracle_loader
 13  DEFAULT DIRECTORY tpch_dir
 14  ACCESS PARAMETERS (
 15         RECORDS DELIMITED BY NEWLINE
 16         BADFILE 'bad_%a_%p.bad'
 17         LOGFILE 'log_%a_%p.log'
 18         FIELDS ltrim (
 19         id0 position(1:10) char(10),
 20         id1 position(12:21) char(10),
 21         id2 position(23:32) char(10),
 22         id3 position(34:43) char(10),
 23         id4 position(45:54) char(10),
 24         id5 position(56:65) char(10),
 25         id6 position(67:76) char(10),
 26         id7 position(78:87) char(10),
 27         id8 position(89:98) char(10),
 28         id9 position(100:109) char(10)
 29         ))
 30  LOCATION ('data1_1.csv'))
 31  parallel 1
 32  REJECT LIMIT 0
 33  NOMONITORING;

SQL> select count(*) from ints_ext;

  COUNT(*)
----------
   9761289

Elapsed: 00:00:50.38
SQL> 
select /*+ parallel(1) tracing(STRIP,1) */ * from ints_ext;

no rows selected

Elapsed: 00:00:45.26 
```

# xpath - How can I use selenium to drop in a specific place?

> ID：14538387
> 
> 赞同：2
> 
> 时间：2013-01-26T15:29:18.333
> 
> 标签：xpath, selenium, fullcalendar

I am trying to write a selenium test for a drag and drop operation.

I am dropping in a tr but I need to specify whereabouts on the row as the tr itself covers 5 slots (this is for a calendar app) but the slots are not td's so I think the app might be using some sort of x,y co-ordinates within the tr.

Specifically the tr that goes all the way across is

```
<tr class="fc-slot15 fc-minor">
  <th class="fc-agenda-axis fc-widget-header"></th>
  <td class="fc-widget-content">
    <div style="position:relative"></div>
  </td>
</tr> 
```

So far the best xpath I have is `xpath=(//table//tr[contains(@class,'fc-slot15')]//td)` but this identifies the whole tr.

Visually it looks like this:

![enter image description here](../Images/8014e8a29d8c2dc7783dc2198420c9da.png)

I'm trying to do it for full-calendar but how to drop in a specified place seems general enough.

Could I do it with mouse down, mouse move(x,y), mouse up perhaps?

# html - 是否有提交名称相同但标识符不同的字段的 HTML 5 方式？

> ID：14538392
> 
> 赞同：0
> 
> 时间：2013-01-26T15:30:22.583
> 
> 标签：html, forms

我想使用 HTML 表单提交多行字段列，唯一的区别是相应的服务器端标识符。

伪：

```
 ID(257) -> Name, Color, Price
    ID(415) -> Name, Color, Price 
```

我不喜欢：

1.  将每个组作为自己的表单并通过 JavaScript 提交。
2.  连接id和真实姓名并在服务器上取消合并。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:37:09.077

您可以在附加 [] 时使用相同的输入名称，在 PHP 中，这将在提交时生成一个数组：

```
<?php
print_r($_POST);
?>

<form method="post">
<input type="text" name="name[257]">
<input type="text" name="name[415]">
<input type="submit">
</form> 
```

结果：

```
Array
(
    [name] => Array
        (
            [257] => first field
            [415] => second field
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:33:34.467

如果您使用 PHP 作为服务器端语言，这很容易。只需用括号命名您的字段，这是 PHP 中的数组语法：

伪代码：

```
name[1] = 'Name, Color, Price'
name[2] = 'Name, Color, Price' 
```

# java - onPause: count increases by 2

> ID：14538394
> 
> 赞同：0
> 
> 时间：2013-01-26T15:30:33.357
> 
> 标签：java, android, database, onpause

I have a score system that counts how much question I answered in my quiz app. In `onPause()`, I write the count of played questions in database.

```
@Override
protected void onPause(){
    super.onPause();
    SpielDBOpenHandler sdb = new SpielDBOpenHandler(Allgemeinwissen.this);
    sdb.insert(3, fragencount, 3, 4);
} 
```

That works fine.

I raise the score in an `onClick` method of a button:

```
fragencount += 1; 
```

Now, when I close the app via home button and reopen it and press back, it counts two times. When I totally close my app and open a new task of the app, it counts normally. What can I do?

**EDIT:**

The button listener looks like this:

```
ausw = (Button) findViewById(R.id.btAuswertung);
        ausw.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                  fragencount += 1
                      ...
            } 
```

**EDIT2:**

Ok I know know that onPause() isCalled when I press the home button to temporarily close the app and again when I am in the app again and press the back button. Is there a way that `onPause()` isn´t called when I temporarily close the app via home button?

# python - 没有 shell 提示消息，只是将 Python 脚本作为守护程序启动后闪烁的光标？

> ID：14538402
> 
> 赞同：3
> 
> 时间：2013-01-26T15:31:38.787
> 
> 标签：python, daemon, python-daemon

*   python-daemon-1.5.2-1.el6.noarch

以下是我从开发人员那里收到的脚本：

```
import threading
import multiprocessing, os, signal, time, Queue
import time
from suds.client import Client
from hotqueue import HotQueue
from config import config

queue = HotQueue(config['redis_hotqueue_list'], host=config['redis_host'], port=int(config['redis_port']),password=config['redis_pass'], charset="utf-8",db=0)
@queue.worker()
def sendMail(item):    
    key = item[0]        
    domain = item[1]
    fromemail = item[2]
    fromname = item[3]
    subject = item[4]
    content = item[5]
    toemail = item[6]            
    cc = item[7]
    bcc = item[8]
    replyto = item[9]

    # Convert to string variable
    url = config['sendmail_tmdt_url']
    client = Client(url)        
    client.service.send_mail(key,domain, fromemail,subject, content, toemail,fromname, '','','');               
for i in range(10):
    t = threading.Thread(target=sendMail)
    t.setDaemon(True)
    t.start()
while True:
    time.sleep(50) 
```

如您所见，他使用[线程](http://docs.python.org/2/library/threading.html)模块使其可以作为守护进程运行。

我将按照[这篇](http://www.gavinj.net/2012/06/building-python-daemon-process.html)博文切换到使用[守护程序](http://www.python.org/dev/peps/pep-3143/)库。

这是我的第一次尝试：

```
from daemon import runner
import logging
import time
import threading
import multiprocessing, os, signal, time, Queue
import time
from suds.client import Client
from hotqueue import HotQueue
from config import config

class Mail():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path = '/var/run/sendmailworker/sendmailworker.pid'
        self.pidfile_timeout = 1

    def run(self):    
        while True:
            queue = HotQueue(config['redis_hotqueue_list'], host=config['redis_host'], port=int(config['redis_port']), password=config['redis_pass'], charset=r"utf-8", db=0)
            @queue.worker()
            def sendMail(item):
                key = item[0]        
                domain = item[1]
                fromemail = item[2]
                fromname = item[3]
                subject = item[4]
                content = item[5]
                toemail = item[6]            
                cc = item[7]
                bcc = item[8]
                replyto = item[9]

                # Convert to string variable
                url = config['sendmail_tmdt_url']
                client = Client(url)        
                client.service.send_mail(key,domain, fromemail,subject, content, toemail, fromname, '', '', '');            
                logger.debug("result")
            #sleep(50)

mail = Mail()

logger = logging.getLogger("sendmailworker")
logger.setLevel(logging.INFO)
formatter = logging.Formatter("%(asctime)s - %(name)s - %(levelname)s - %(message)s")
handler = logging.FileHandler("/var/log/sendmailworker/sendmailworker.log")
handler.setFormatter(formatter)
logger.addHandler(handler)

daemon_runner = runner.DaemonRunner(mail)
daemon_runner.daemon_context.files_preserve=[handler.stream]
daemon_runner.do_action() 
```

它可以工作，但我必须在启动后按`Ctrl`-`C`才能获得 shell 提示：

**`/etc/init.d/sendmailworker start`**

```
Starting server
# started with pid 2586
^C
# 
```

我怎样才能摆脱这个问题？

* * *

附加一个＆符号没有帮助：

```
# /etc/init.d/sendmailworker start &
[1] 4094
# Starting server
started with pid 4099
^C
[1]+  Done                    /etc/init.d/sendmailworker start
# 
```

* * *

正如@Celada 指出的那样：实际上，我已经有了我的shell 提示符，但它没有`[root@hostname ~]#`像往常一样显示，只是一个闪烁的光标。简单的按下`Enter`使我的shell提示重新出现。所以问题应该是：如何`started with pid xxxxx`先出现，在同一行`Starting server`，然后显示我的shell提示符？

* * *

该`stop`功能工作正常：

```
[root@hostname ~]# /etc/init.d/sendmailworker stop
Stopping server
Terminating on signal 15
[root@hostname ~]# 
```

我怎样才能为该`start`功能做类似的事情？像这样的东西：

```
[root@hostname ~]# /etc/init.d/sendmailworker start
Starting server
started with pid 30624
[root@hostname ~]# 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T06:18:30.153

您可以通过更改获得预期的行为

```
self.stdout_path = '/dev/tty'
self.stderr_path = '/dev/tty' 
```

到：

```
self.stdout_path = '/dev/null'
self.stderr_path = '/dev/null' 
```

在您的情况下，我建议使用 shell 脚本编写一个初始化脚本。

`runner`仅供参考，除了其[源代码](https://github.com/arnaudsj/python-daemon/blob/master/daemon/runner.py)之外，我找不到任何文档。

# javascript - 从控制台获取数据

> ID：14538404
> 
> 赞同：5
> 
> 时间：2013-01-26T15:31:48.117
> 
> 标签：javascript

是否可以在不停止工作的情况下将所有数据从控制台获取到变量中。

```
console.log=function(e){alert(e)} 
```

我试图从控制台获取日志，但它们从控制台中消失了。甚至有可能吗？是否可以获得所有数据，而不仅仅是**.log**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T15:38:06.453

您必须保留旧`console.log()`方法的副本并从您的自定义实现中再次调用它：

```
(function(o) {
    // keep old log method
    var _log = o.log;

    o.log = function(e) {
        alert(e);
        _log.call(o, e);
    }

}(console)); 
```

# java - NegativeArraySizeException on CollisionShape

> ID：14538405
> 
> 赞同：0
> 
> 时间：2013-01-26T15:31:53.347
> 
> 标签：java, collision, jmonkeyengine

I am trying to put a collision-shape onto my model. But everytime I init the game, I get an NegativeArraySizeException.

```
private void createSoundBit(float x, float y, float z)
    {
        Spatial npc1 = assetManager.loadModel("Models/sound/sound.j3o");
        npcNode.attachChild(npc1);
        CollisionShape noteshape = CollisionShapeFactory.createDynamicMeshShape(npc1);
        npcRigid = new RigidBodyControl(noteshape,123.0f);
        npcRigid.setFriction(0f);
        npcRigid.setMass(60f);
        npcRigid.setPhysicsLocation(new Vector3f(x,y,z));
        collmanager = new CollManager();
        getPhysicsSpace().addCollisionListener(collmanager);

        npc1.addControl(npcRigid);
        bulletAppState.getPhysicsSpace().add(npcRigid);
        rootNode.attachChild(npcNode);
    } 
```

I don't know why it happens

Stacktrace:

```
java.lang.NegativeArraySizeException
    at com.jme3.bullet.collision.shapes.HullCollisionShape.getPoints(HullCollisionShape.java:71)
    at com.jme3.bullet.collision.shapes.HullCollisionShape.<init>(HullCollisionShape.java:24)
    at com.jme3.bullet.util.CollisionShapeFactory.createSingleDynamicMeshShape(CollisionShapeFactory.java:241)
    at com.jme3.bullet.util.CollisionShapeFactory.createCompoundShape(CollisionShapeFactory.java:112)
    at com.jme3.bullet.util.CollisionShapeFactory.createCompoundShape(CollisionShapeFactory.java:94)
    at com.jme3.bullet.util.CollisionShapeFactory.createDynamicMeshShape(CollisionShapeFactory.java:188)
    at Main.createSoundBit(Main.java:206)
    at Main.simpleInitApp(Main.java:83)
    at com.jme3.app.SimpleApplication.initialize(SimpleApplication.java:225)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.initInThread(LwjglAbstractDisplay.java:130)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.run(LwjglAbstractDisplay.java:207)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:17:02.283

对我来说，它可能是以下两种情况之一：您的文件 sound.j3o 已损坏或 jmonkeyengine 中存在错误。尝试加载一些其他文件，看看发生了什么。有问题的部分来源：

```
FloatBuffer vertices = mesh.getFloatBuffer(Type.Position);
vertices.rewind();
int components = mesh.getVertexCount() * 3;
float[] pointsArray = new float[components];
// ... 
```

所以，看起来像`mesh.getVertexCount()`返回负值。

# android - 操作系统级安全 Android

> ID：14538413
> 
> 赞同：1
> 
> 时间：2013-01-26T15:33:00.693
> 
> 标签：android, security, operating-system

我需要尝试在 android 操作系统上开发一种替代当前 pin 密码安全系统的方法。主要目标是尝试用使用设备上的硬件功能之一的替代方案替换当前的密码系统。这可以作为第三方吗？或者，您是否需要前往特定的耳机制造商以获得规避或更改当前安全系统的能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:49:23.407

我相信没有专门设计用于替换/插入 Android 上的锁屏的 API。

然而，人们发现了几种巧妙的实现方式：

*   更换主屏幕
*   在锁定屏幕顶部显示活动

看看这些问题：

[在哪里可以找到有关创建自定义 android 锁屏的示例或教程？](https://stackoverflow.com/questions/7983143/where-can-i-find-examples-or-tutorials-about-creating-a-custom-android-lockscree)

[自定义 Android 锁屏功能？](https://stackoverflow.com/questions/2948617/customizing-android-lock-screen-functionality)

# php - How to make parameter name in URL default and hidden in Kohana?

> ID：14538415
> 
> 赞同：2
> 
> 时间：2013-01-26T15:33:08.370
> 
> 标签：php, routing, kohana

I'm trying to make this work. I want my routing to behave like this: when I type URL ie. `example.com/api/getpage/http://smth.com` I want to retrieve in my action `id` parameter with `http://smth.com` value. My routing for this case looks like this right now:

```
Route::set('api', 'api/<action>/<id>')
    ->defaults(array(
        'controller' => 'api',
        'action'     => 'index'
    )); 
```

And what's in action:

```
public function action_getpage()
    {
        $obj = $this->scrape($this->request->query('id'));
        $this->response->body(json_encode($obj));
    } 
```

Now URL like this `example.com/api/getpage?id=http://smth.com` works like a charm, but I don't want it that way. Is there any way to achieve that goal? Thanks in advance for all suggestions.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:43:42.747

问题是您不能在 url 段中使用斜杠（get 参数除外）。这与 kohana 路由无关，而是您的 Web 服务器如何处理它。解决它的唯一方法是用其他东西代替他的斜线。如果您作为最终段传递的 url 在其末尾有获取参数，您也会遇到问题，问号将导致它被视为主 url 的获取参数，而不是最终段。

另一种选择是对最终的 url 段进行 base64 编码，然后在控制器内对其进行解码。这将消除任何斜线和问号。PHP 有简单的 base64_encode 和 base64_decode 函数。唯一的缺点是 url 的一部分看起来像一个任意的乱码字符串。 [http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

# visual-studio - 自动安装视觉工作室？

> ID：14538416
> 
> 赞同：1
> 
> 时间：2013-01-26T15:33:14.600
> 
> 标签：visual-studio, batch-file, automation

是否有可以自动下载和安装 Visual Studio Express 的批处理脚本（甚至类似 ninite）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:53:40.827

你绝对应该看看[巧克力](http://chocolatey.org/)：

> Chocolatey NuGet 是一个机器包管理器，有点像 apt-get，但在构建时考虑了 Windows。

来自[巧克力维基](https://github.com/chocolatey/chocolatey/wiki)

> 对于不熟悉 apt/debian 的人，可以将 Chocolatey 视为应用程序和工具的全局静默安装程序。它还可以执行配置任务以及您可以使用 PowerShell 执行的任何操作。

因此，如果有人为其创建巧克力包，它可以下载并安装任何工具。幸运的是，[几乎任何版本的视觉工作室](http://chocolatey.org/packages?q=visual%20studio)都有包。

例如，这里是[Visual Studio Express 2012 for Windows Desktop 11.0](http://chocolatey.org/packages/VisualStudio2012WDX)包的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:04:06.573

你需要做一些准备工作才能让它在无人看管的情况下工作。

[http://msdn.microsoft.com/en-us/library/ee225237.aspx](http://msdn.microsoft.com/en-us/library/ee225237.aspx)

# android - jquery mobile onclick 功能无法按预期工作

> ID：14538419
> 
> 赞同：1
> 
> 时间：2013-01-26T15:33:34.287
> 
> 标签：android, jquery, cordova, jquery-mobile

在下面，当我单击`one`div 时，我看到了 10 次警报。我做错了什么。我正在使用带有 jquery for mobile 的电话间隙框架。`deals_list.length=10`

```
function test_this(f)
{
    alert("this");
}

function load_div()
{
   var html = '';
   for (var i = 0; i < deals_list.length; i++) {
     html += '<div class="list" onclick="test_this('+deals_list[i]["id"]+');" id="'+deals_list[i]["id"]+'">..</div>';

   $("#flow").append(html)

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:09:35.503

要完成我上面的评论，我认为这是因为您的 load div 函数有一些问题，我会这样做：

```
 // bind your function to div.list
 $( '.list' ).live( 'click', test_this );

 // your test function gets event object and ui
 function test_this( event, ui ) {
   // do whatever you want onclick
 }

 function load_div() {
    var html = '';
    for (var i = 0; i < deals_list.length; i++) {
       html += '<div class="list" id="'+deals_list[i]["id"]+'">..</div>';
    }
    $("#flow").append(html);
 } 
```

# c - 使用二维数组存储多个字符串

> ID：14538422
> 
> 赞同：0
> 
> 时间：2013-01-26T15:34:09.910
> 
> 标签：c, arrays, multidimensional-array, substring

我在 C 中编写了一个函数，用于搜索子字符串是否在字符串中并且没问题，但是当我在字符串数组中使用它时，我遇到了错误。请看这段代码：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int substring(char*, char*);

main()
{
    char student[100][7];
    int counter = 0;
    int finish =1;
    char s1[4];
    while(finish){
        printf("please Enter Student Number: \n");
        scanf("%s", student[counter]);
        counter++;
        printf("Do you want to exit? 1/0");
        scanf("%d", &finish);
    }
    printf("Now, You can search in Student numbers\n");
    printf("Enter a number to search: ");
    scanf("%s", s1);
    for(int i  = 0; i < counter; i++){
        printf("%d : %s\n", i, student[i]);
        if(substring(student[i],s1) == 1)
            printf("%s", student[i]);
    }

    getch();
}

int substring(char *s1,char *s2)
{
    int f=0;
    for(; *s1 !='\0';)
    {
        if(*s2=='\0')
            break;
        for(;*s2 !='\0';)
        {
            if(*s1==*s2)
            {
                f=1;
                s1 ++;
                s2 ++;
            }
            else
            {
                f=0;
                s1++;
                break;
            }
        }
    }
    if(f==0)
        return 0;
    else
        return 1;
    getch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:01:47.127

这是使用简单状态机测试子字符串的方法：

```
int substring(const char *s1, const char *s2)
{
    enum
    {
        search, start_match
    } state = search;
    const char *m;

    while(*s1 != '\0')
    {
        switch(state)
        {
        case search:
            if(*s2 == '\0')
                return 0;
            else if(*s2 == *s1)
            {
                state = start_match;
                m = s2 + 1;
            }
            break;
        case start_match:
            if(*m == '\0')
                return 1;
            else if(*m != *s1)
                state = search;
            else
                ++m;
        }

        ++s1;
    }

    return 0;
} 
```

您也可以使用标准的[strstr](http://linux.die.net/man/3/strstr)函数。

# javascript - Node 上 RequireJS 的问题

> ID：14538428
> 
> 赞同：0
> 
> 时间：2013-01-26T15:34:53.793
> 
> 标签：javascript, node.js, express, requirejs

我正在尝试使用 RequireJS 根据此处的说明在我的节点项目中加载服务器端模块： [http ://requirejs.org/docs/node.html](http://requirejs.org/docs/node.html)

我的引导文件如下所示：

```
var requirejs = require( "requirejs" );

requirejs.config({ nodeRequire: require });

requirejs([ "app" ], function( app ) {

  app.listen(80, function(){
    console.log( "We be shuffling..." );
  });

}); 
```

然后，我有一个像这样的应用程序文件......

```
requirejs([

    "express"

  ], function ( express ) {

  var app = express();

  app.configure( "development", function(){
    app.use( express.errorHandler() );
  });

  return app;

}); 
```

...然而，这只是溢出了一堆错误：

> timers.js:103 if (!process.listeners('uncaughtException').length) throw e; ^ 类型错误：无法在 Object.context.execCb (/home/ssp/node_modules/requirejs/bin/r.js:1729:33) 处调用 /home/ssp/boot.js:13:7 未定义的方法“侦听”在 Object.Module.check (/home/ssp/node_modules/requirejs/bin/r.js:969:51) 在 Object.Module.enable (/home/ssp/node_modules/requirejs/bin/r.js:1239: 22) 在 Object.Module.init (/home/ssp/node_modules/requirejs/bin/r.js:882:26) 在 Object.context.makeRequire.mixin.isBrowser [as _onTimeout] (/home/ssp/node_modules/ requirejs/bin/r.js:1505:36) 在 Timer.list.ontimeout (timers.js:101:19) root@nodeapp:/home/ssp# 节点启动
> 
> timers.js:103 if (!process.listeners('uncaughtException').length) throw e; ^ 类型错误：无法在 Object.context.execCb (/home/ssp/node_modules/requirejs/bin/r.js:1729:33) 处调用 /home/ssp/boot.js:13:7 未定义的方法“侦听”在 Object.Module.check (/home/ssp/node_modules/requirejs/bin/r.js:969:51) 在 Object.Module.enable (/home/ssp/node_modules/requirejs/bin/r.js:1239: 22) 在 Object.Module.init (/home/ssp/node_modules/requirejs/bin/r.js:882:26) 在 Object.context.makeRequire.mixin.isBrowser [as _onTimeout] (/home/ssp/node_modules/ requirejs/bin/r.js:1505:36) 在 Timer.list.ontimeout (timers.js:101:19)

有没有人有任何建议我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:25:48.227

如果您的意图是将 require 与 express 一起使用，为什么不使用自动设置脚本呢？有关如何使用 npm 设置 express 的说明，请参阅[http://expressjs.com/guide.html#executable](http://expressjs.com/guide.html#executable)基本上，您只需在命令行上使用 express。要求包含在设置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T15:25:54.857

你需要定义（）你的“模块”应用程序而不是使用requirejs（），因为你需要先声明你的模块。

添加`var define = require("amdefine")`到您的引导文件。

并在您的应用文件中：

```
define(["express" ], 
   function ( express ) {
     var app = express();
     app.configure( "development", function(){
     app.use( express.errorHandler() );
   }); 
   return app; 
}); 
```

# php - Lynda.com - 在 wordpress 上构建在线作品集

> ID：14538430
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:35:11.770
> 
> 标签：php, wordpress

正如他们所说，它适用于视频，我在包含以下代码的主题文件夹中创建了一个名为 posttypes.php 的文件：

```
<?php
echo "Hello!";
?> 
```

我已经将一个名为 functions.php 的文件放入子主题烹饪中：

```
<?php
include_once(ABSPATH . 'wp_content/themes/posttypes.php');
?> 
```

因此，我应该在视觉上输出一个 Hello！情况并非如此，我有以下错误输出：

> 警告：include_once(C:\wamp\www\portfolio/wp_content/themes/posttypes.php) [function.include-once]：无法打开流：C:\wamp\www\portfolio\wp 中没有这样的文件或目录-content\themes\cooking\functions.php 在第 2 行'

和

> 警告：include_once() [function.include]：无法在 C 中打开 'C:\wamp\www\portfolio/wp_content/themes/posttypes.php' 以包含 (include_path='.;C:\php\pear')： \wamp\www\portfolio\wp-content\themes\cooking\functions.php 在第 2 行

我失败了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:13:28.967

我不知道您正在关注的教程，但看起来您错过了主题文件夹。

```
include_once(ABSPATH . 'wp_content/themes/THEME-FOLDER/posttypes.php'); 
```

# perl - 需要一个正则表达式来提取数据并写入文件

> ID：14538431
> 
> 赞同：1
> 
> 时间：2013-01-26T15:35:17.610
> 
> 标签：perl, sed, awk, grep

我有一个包含以下内容的文件：

```
[A hi] [B hello]
[A how] [A why] [C some where] 
```

我基本上想用标记“A”提取“文本”，我的意思是

```
hi
how
why 
```

在不同行的新文件中。我尝试使用`sed`但我无法获得正则表达式。有人可以建议我用什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:07:09.950

[尝试使用grep](/questions/tagged/grep "显示标记为“grep”的问题")执行此操作：

```
grep -oP '\[A\s+\K[^\]]+' file.txt > new_file.txt 
```

或者

```
grep -oP '\[A\s+\K[^\]]+' file.txt | tee new_file.txt 
```

## 结果

```
hi
how
why 
```

## 解释

*   `-o`grep 代表“只获取匹配的部分”
*   `-P`grep 代表“Perl 扩展正则表达式”
*   对于`\K`regex 技巧，请参阅[Support of \K in regex](https://stackoverflow.com/questions/13542950/support-of-k-in-regex)（这是一个高级环视 regex 技巧）

[perl](/questions/tagged/perl "显示标记为“perl”的问题")中带有注释的相同正则表达式：

```
use strict; use warnings;
use feature qw/say/;

while (<>) {
    say for 
        /           # starting regex
            \[A     # a literal "[" and "A"
            \s+     # at least one whitespace (\n, \r, \t, \f, and " ")
            \K      # restart the match
            [^\]]+  # at least one character that is not a literal "]"
        /gsx;       # end of the regex and the modifiers
} 
```

## 链接

要学习正则表达式，请参阅

*   [http://www.regular-expressions.info/](http://www.regular-expressions.info/)
*   [学习正则表达式](https://stackoverflow.com/questions/4736/learning-regular-expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:53:23.263

我不确定如何使用 sed 执行此操作（不太熟悉），但您可以将 GNU grep 与 Perl 兼容的正则表达式一起使用（请参阅[此答案](https://stackoverflow.com/a/2778096/331473)以获取另一个示例）。

这是我为您的测试输入整理的快速正则表达式（假设您的数据位于名为“foo”的文件中）：

```
cat foo | grep -Po '(?<=\[A )[^\]]+' 
```

这输出：

```
hi
how
why 
```

**更新**- 这是如何工作的：

正则表达式的第一部分`(?<=\[A )`使用负向回溯，这基本上意味着您确保认为您正在寻找的东西前面有一些东西（在这种情况下`\[A`）。这有助于为您正在寻找的内容提供背景信息。这也可以通过捕获组来完成，但是由于我以前没有使用 grep 做过这种事情，所以我不确定如何在这里使用它们。其中一个lookbehinds的语法是`(?<=THING_TO_PRECEDE_YOUR_MATCH_WITH)`.

第二个块只是说“找到`[^\]]+`一个或多个不是`\]`. 我们刚刚提到的一项或多项。`[^CHARSET]``+`

根据您对正则表达式的经验，这可能会或可能不会有帮助，如果有什么我可以更好地解释的地方，请告诉我。我不确定学习这些的最佳地点。经常使用 python，我发现它们的[语法参考](http://docs.python.org/3/library/re.html#regular-expression-syntax)非常方便。此外，谷歌往往指向[http://www.regular-expressions.info/](http://www.regular-expressions.info/)很多，但我不能从经验中说它有多大用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:15:31.707

这可能对您有用（GNU sed）：

```
sed -r '/\[A\s+([^]]*)\]/{s//\n\1\n/;s/[^\n]*\n//;P};D' file 
```

# objective-c - DetailView中的iOS imageView

> ID：14538433
> 
> 赞同：1
> 
> 时间：2013-01-26T15:35:25.037
> 
> 标签：objective-c, uitableview, menu, uiimageview

*   我有简单的主从应用程序：带有 3 个 Tabel Ciew 单元格的菜单，如果我单击它，我会在中心看到带有单击单元格描述（“按钮 1”、“按钮 2”或“按钮 3”）的 DetailView。

*   我想将此文本替换为具有不同图像的 imageView：如果单击第一个单元格，我会看到第一个图像，第二个单元格 - 第二个图像等。

我的 DetailViewController.m：

```
- (void)configureView
{
     if(self.detailItem)
     {
          self.detailDescriptionLabel.text = [self.detailItem description];
     }
} 
```

*   如何检查单元格的 id 并设置必要的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:40:41.520

编辑：

好的，在这种情况下，您需要在表视图控制器中实现 didSelectRowAtIndexPath 。

就像是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Set properties of your detail view controller here
    if(indexPath.row == 1)
    {
        // Create and show image view 1

    } else if(indexPath.row == 2)
    {
        // Create and show image view 2
    }

} 
```

更多信息在这里：

[https://stackoverflow.com/tags/didselectrowatindexpath/info](https://stackoverflow.com/tags/didselectrowatindexpath/info)

# xml - xslt 中的嵌套节点

> ID：14538435
> 
> 赞同：0
> 
> 时间：2013-01-26T15:35:43.693
> 
> 标签：xml, xslt, nested

我正在尝试创建一个 XSLT 来转换 XML 文档，但是我在分组时遇到了问题。我为单个对象提取信息没有问题，但我不知道如何使用 xslt 对某些元素进行分组。我尝试过 xsl:for-each-group 和 xsl:key 进行分组，但我没有成功转换。

**输入：**

```
<?xml version="1.0" standalone="yes"?>
<root>
    <node1>
        <ID>2</ID>
        <Name>ABCDE</Name>
        <Age>21</Age>
        <Skills>C++ C#</Skills>
        <worklocation>IN</worklocation>
        <designaton>Engineer I</designaton>
    </node1>
    <node2>
        <ID>3</ID>
        <Name>EFGH</Name>
        <Age>12</Age>
        <Skills>java</Skills>
        <worklocation>USA</worklocation>
        <designaton>Engineer II</designaton>
    </node2>
</root> 
```

**期望的输出：**

```
<root>
    <node1>
        <ID>2</ID>
        <Name>ABCDE</Name>
        <Age>21</Age>
        <workInfo>
            <Skills>C++ C#</Skills>
            <worklocation>IN</worklocation>
            <designaton>Engineer I</designaton>
        </workInfo>
    </node1>
    <node2>
        <ID>3</ID>
        <Name>EFGH</Name>
        <Age>12</Age>
        <workInfo>
            <Skills>java</Skills>
            <worklocation>USA</worklocation>
            <designaton>Engineer II</designaton>
        </workInfo>
    </node2>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:44:44.133

使用*身份*模板：参见[W3C 建议](http://www.w3.org/TR/xslt#copying)

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

然后应用与节点的每个子节点匹配的特定模板，`root`并将动态创建`workInfo`节点。

```
<xsl:template match="/root/*">
  <xsl:apply-templates select="ID|Name|Age" />
  <workInfo>
    <xsl:apply-templates select="Skills|worklocation|designaton" />
  </workInfo>
</xsl:template> 
```

# jquery - 创建新 MVC 项目时出错 - EF 和 JQuery

> ID：14538441
> 
> 赞同：21
> 
> 时间：2013-01-26T15:36:27.003
> 
> 标签：jquery, asp.net-mvc, entity-framework

每当我创建一个新的 MVC 项目时，我都会收到一个错误 - 无法为实体框架和 Jquery 初始化 Powershell 主机。错误：无法从“C:\Program Files\Microsoft ASP.NET\ASP.NET MVC 4\Packages”安装以下包

EntityFramework.5.0.0：无法初始化 Powershell 主机。如果您的 powershell 执行策略设置设置为 AllSigned，请先打开包管理器控制台以初始化主机。

jQuery.1.7.1.1：无法初始化 Powershell 主机。如果您的 powershell 执行策略设置设置为 AllSigned，请先打开包管理器控制台以初始化主机。

我可以删除实体框架引用，然后手动添加它，这是一个很好的解决方法，但它很烦人，并且是某个地方出现问题的迹象。任何想法在哪里看？

此链接记录了类似的问题和解决方法： [http ://social.msdn.microsoft.com/Forums/en/vssetup/thread/c934fed4-e44e-4a06-9e3b-eccb9c8aa8d6](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/c934fed4-e44e-4a06-9e3b-eccb9c8aa8d6)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-08T03:30:54.910

MSDN 线程上的回复之一对我有用。以管理员身份运行 PowerShell 并运行以下命令：

```
Set-ExecutionPolicy AllSigned 
```

有关安全隐患，请参阅[使用 Set-ExecutionPolicy Cmdlet](http://technet.microsoft.com/en-us/library/ee176961.aspx)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-26T17:32:05.407

这个问题相当普遍——因为有多个指向 MSDN 论坛的链接和对解决方法的引用。我尝试使用 Visual Studio 中的包管理器进行故障排除，发现它被冻结了 - 参考查找 C:\Program Files (x86)\7-Zip\7z.exe。不知道为什么，但我检查了我的系统，果然，我在标准程序文件（不是 x86）中安装了 7z。我在 x86 文件夹中做了一个副本，重新加载了 Visual Studio，Visual Studio 现在又开心了。不知道为什么在 Visual Studio 包管理器中依赖 7zip - 但希望这将有助于其他程序员......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T20:59:25.533

这里没有一个解决方案对我有用……至少在我的一台机器上没有。

对于我的一台机器，jrummell 的回答非常有效，从那以后我没有遇到任何问题；在我的另一台机器上，我必须按照以下步骤操作：http: [//patrickdesjardins.com/blog/failed-to-initialize-the-powershell-host](http://patrickdesjardins.com/blog/failed-to-initialize-the-powershell-host)以阻止错误出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T22:21:00.760

对于未来的搜索者，如果 aSkywalker 的解决方案不适合您，请尝试以管理员身份运行 VS。这对我来说是这样（更奇怪的是，我再也没有看到这个错误......我无法解释）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T03:41:06.980

找到了一个非常简单的解决方案。

在 Windows 资源管理器中右键单击解决方案文件夹时，解决方案文件所在的文件夹需要取消选中“只读”属性。

给文件夹读/写权限为我解决问题:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-21T12:55:50.437

我有VS2015，这个步骤为我解决了问题

1.  Tools > Extensions and Updates > Updates > Visual Studio Gallery > Nuget Package Manager : 更新（此步骤需要输入管理员密码）

2.  重启VS

3.  创建新项目

# java - Google App Eninge Channel API 可用于向多个客户端广播 JSON 数据？

> ID：14538443
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:36:38.057
> 
> 标签：java, google-app-engine, gwt, channel-api

我正在阅读有关[Google App Engine Channel API](https://developers.google.com/appengine/docs/java/channel/overview)的信息。

我想知道，我是否可以使用此 API 创建消息并将其作为广播发送给所有想要阅读它的客户。（它们是连接的）。我不明白的是[警告](https://developers.google.com/appengine/docs/java/channel/overview#Caveats)。

我的用例：

*   我有一个 Liveticker（足球）并发送消息。
*   Live-Ticker-Page 上的所有用户都可以立即看到我的按摩。
*   用户设备上的分数必须由传入的 JSON 更新

我不想使用轮询。

Google Talk/XMPP 会是更好的选择吗？或者你有更好的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:51:58.900

是的你可以。

警告是：

1.  您必须为每个客户创建一个频道，这意味着您必须将他们的客户 ID 保存在某个地方并循环访问它们，以便向他们每个人发送消息。您不能向每个人都会收到的一个全局 id 发送一条消息。
2.  对于每个页面，只能创建一个频道，这意味着，例如，您不能有一个频道为一个游戏的得分发送消息，而另一个频道则为另一场比赛发送消息。两者都必须通过同一通道发送（尽管您可以为每个通道使用 iframe）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:14:32.843

虽然 Channel API 似乎是更适合您需求的 GAE 工具，但我建议您也考虑[pubnub](http://www.pubnub.com)或类似的 3rd 方服务。

根据我的经验，它速度极快、价格低廉，而且对于发布-订阅，GAE API 比 Channels 更易于使用，因为它对每个通道的多个客户端提供了更广泛的支持（即，您不需要解决渠道警告）。

# php - $.get PHP 文件当链接点击时 JS

> ID：14538446
> 
> 赞同：0
> 
> 时间：2013-01-26T15:36:51.590
> 
> 标签：php, javascript, sql, ajax

链接：

```
<a class='dropdown' href='javascript:void(0);' onclick='mainLoginToggle();'> 
```

主登录切换（）：

```
function mainLoginToggle() {    
    $(document).mouseup(function (e) {
        var container = $(".logindisplay");
        if (container.has(e.target).length === 0) {
            container.fadeOut(222);
        }
    });
if (document.getElementById('logindisplay').style.display == 'block') {
    $(".logindisplay").fadeOut(222);
} else {
    $(".logindisplay").fadeIn(222);
}
    $.get("../include/removenotif.php");
    return false;
} 
```

删除notif.php：

```
<?php include("session.php"); $database->removeNotifications($session->username); ?> 
```

删除通知（）：

```
 function removeNotifications($user) {
        $q = "UPDATE notifications SET seen = '1' WHERE username = '$user'";
        $result = mysql_query($q, $this->connection);
        return true;
    } 
```

基本上，当点击链接时，它会显示和隐藏 div，但当它被点击时，它应该运行 removeNotifications 函数，并且不返回任何消息但成功运行 sql 查询。但它没有执行查询。

我已经通过更改标题信息来测试页面是否实际上被调用以尝试获取错误但没有发生任何事情。我不确定我在哪里出错，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:05:37.530

为什么不一直使用 JQuery？

像这样

你的链接

```
<a class="dropdown" href="#">Click here</a> 
```

jQuery

```
 $(document).ready(function() {

           $('.dropdown').live('click', function(){

               var container = $(".logindisplay");
               if (container.has(e.target).length === 0) {
                   container.fadeOut(222);
                   }

                if (document.getElementById('logindisplay').style.display == 'block') {
                    $(".logindisplay").fadeOut(222);
                } else {
                    $(".logindisplay").fadeIn(222);
                }
                    $.get("../include/removenotif.php");
                    return false;

           });

        }); 
```

这样就调用了 PHP 文件。

韦齐

# streaming - VLC 不会在 Ubuntu 启动时自动启动

> ID：14538449
> 
> 赞同：1
> 
> 时间：2013-01-26T15:37:40.217
> 
> 标签：streaming, vlc, upstart

我正在尝试将 VLC 配置为使用 Upstart 在启动时自动开始流式传输两个流。

这是我的新贵脚本：

```
description "VLC streams"
start on (local-filesystems and net-device-up IFACE!=lo)
stop on runlevel [016]
exec /home/streamer/stream.sh 
```

和stream.sh：

```
#!/bin/bash
cvlc -v "/home/administrator/Videos/Kastiel/kastiel.xspf" --sout '#std{access=udp{ttl=2},mux=ts,dst=239.220.220.31:9200}' --sout-keep --loop &
cvlc -v "/home/administrator/Videos/Rozpravky/rozpravky.xspf" --sout '#std{access=udp{ttl=2},mux=ts,dst=239.220.220.2:9200}' --sout-keep --random &
exit 0 
```

但是，计算机启动后，没有流，VLC 进程没有运行。当我手动运行 stream.sh 时，它没有问题。

有人知道我在做什么错吗？

我正在使用 Ubuntu 12.10 和 VLC 2.0.5。

预先感谢您的任何帮助。

米兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-02T20:25:34.887

由于安全原因，Vlc 不支持以 root 身份运行。您应该在脚本中使用**sudo -u user**来更改用户。

尝试： sudo -u username cvlc -v "/home/administrator/Videos/Kastiel/kastiel.xspf" --sout '#std{access=udp{ttl=2},mux=ts,dst=239.220.220.31: 9200}' --sout-keep --loop &

# c# - 按值属性获取字典中的值子集

> ID：14538454
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:37:50.477
> 
> 标签：c#, .net, linq, generics, dictionary

**原始问题：**

我有一本字典。我怎样才能只获得值的子集集合，其中

如：`object.Age == 30`或`object.gender == "male"`等。

**重新措辞的问题更普遍，对其他用户有帮助：**

在键是简单类型（例如 string 或 int）但我的值是对象的字典中，如何按属性搜索值并返回值的子集？

即一般来说我有

```
Dictionary<string, myObject> dict = new Dictionary<string, myObject>(); 
```

我想搜索 myObject.someInt == X 和 myObject.someString = 'XYZ'，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:41:23.077

您可以使用[`Dictionary.Values`](http://msdn.microsoft.com/en-us/library/vstudio/ekcfxy3x.aspx)和[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)：

```
var age30OrMale = dict.Values.Where(o => Age == 30 || o.gender == "male");
foreach(var o in age30OrMale)
{
    // ...
} 
```

如果你想要一个新的集合，你可以使用`ToList`或`ToArray`

```
var list = age30OrMale.ToList(); 
```

请注意，这不是字典本身的子集，因此它不是`IEnumerable<KeyValuePair<TKey,TValue>>`. 但这是你要求的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T15:41:47.327

最简单的方法是使用 lambda：

```
var newDictionary = myDictionary.Values.Where(d => d.Age == 30); 
```

编辑：

根据您修改后的问题：

```
var newDictionary = myDictionary.Values.Where(d => d.Age == 30 || d.Gender == "male"); 
```

我不确定您所说的“等”是什么意思，但是您可以使用`||`和/或继续构建它`&&`

编辑：

正如@Guffa 正确指出的那样，结果值不是字典：

```
var newSubset = myDictionary.Values.Where(d => d.Age == 30 || d.Gender == "male"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T15:43:53.847

```
var newDictionary = myDictionary.Values.Where(d => d.Age == 30 || d.gender == "male").ToDictionary(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T15:40:36.177

您只需遍历这些值并获取这些项目：

```
List<MyObject> result = myDictionary.Values.Where(o => Age == 30).ToList(); 
```

# php - 设计mysql表

> ID：14538458
> 
> 赞同：0
> 
> 时间：2013-01-26T15:38:26.923
> 
> 标签：php, mysql, database

我想要以下输出。

我想在数据库中有名人和他们的照片。每个名人可能有不止一张照片。每张照片可能有不止一个名人

如果名人有不止一张照片，我需要随机获取一张带有名人姓名的照片。

我设计了这样的桌子。

**名人表（名人）：**

```
id 
name 
```

**照片表（照片）：**

```
id
photo location 
```

**名人和照片的连接表 (Celebrity_Photos)：**

```
Celebrity id
Photos id 
```

但我不知道获得预期结果的正确查询。或者我可能错误地设计了桌子。

建议我最好的方法来做到这一点。

我知道连接查询。但我知道基本的连接查询。它提供了这样的信息。

```
celeb1 photo1
celeb1 photo2
celeb2 photo1 
```

但我希望实现

```
 celeb1 photo2
 celeb2 photo1 
```

或者

```
celeb1 photo1
celeb2 photo1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:49:24.100

`id`每个名人的最低照片：

```
SELECT 
    c.*                        -- columns you need from Celebrity
  , p.*                        -- and Photo tables
FROM 
    celebrity AS c
  LEFT JOIN 
    ( SELECT celebrity_id
           , MIN(photo_id) AS photo_id
      FROM celebrity_photo
      GROUP BY celebrity_id
    ) AS cp
      ON cp.celebrity_id = c.celebrity_id
  LEFT JOIN 
    photo AS p
      ON p.photo_id = cp.photo_id ; 
```

每个名人的随机照片：

```
SELECT 
    c.*                        -- columns you need from Celebrity
  , p.*                        -- and Photo tables
FROM 
    celebrity AS c
  LEFT JOIN 
    photo AS p
      ON p.photo_id = 
        ( SELECT cp.photo_id 
          FROM celebrity_photo AS cp
          WHERE cp.celebrity_id = c.celebrity_id 
          ORDER BY RAND()
              LIMIT 1
        ) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:42:08.793

我假设您可能在 1 张照片中有多个名人。如果是这样，你的设计就很好。

那么，这个怎么样；

```
SELECT Celebrity.name, Photos.photo_location
FROM Celebrity_Photos
INNER JOIN Celebrity on Celebrity.id = Celebrity_Photos.celeb_id
INNER JOIN Photos on Photos.id = Celebrity_Photos.photo_id
ORDER BY rand()
LIMIT 1 
```

我假设您只希望返回 1 张照片。如果没有，那么只需删除该行；

```
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:42:23.713

您不需要连接表（关联表），因为它不是“多对多”向您的照片表 celeb_id 添加另一列，您可能希望将其指定为外键..然后使用 SELECT * FROM Celebrity c LEFT OUTER JOIN照片 p ON c.celeb_id =p.celeb_id order by rand() limit 1;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T15:44:53.093

我的做法：

```
[CELEB]  
celeb_id
celeb_name  

[CELEB_PHOTO]  
celeb_photo_id
celeb_id
photo_name 
```

您的设计很好，如果 mo 没有大量记录，我将从以下查询开始：

```
SELECT * FROM `CELEB_PHOTO` WHERE `celeb_id` = $celeb_id ORDER BY RAND() LIMIT 1 
```

然后，您可以通过查询 CELEB 表来获取名人的姓名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T15:46:26.970

用这个：

```
SELECT * FROM (SELECT RAND() RND_INDEX, P.PHOTO_ID, P.PHOTO_LOCATION, C.ID, C.NAME
FROM PHOTOS P, CELEBRITY_PHOTOS CP, CELEBRITY C
WHERE P.PHOTO_ID = CP.PHOTO_ID AND CP.ID = DESIRED_CELEBRITY AND CP.ID = C.ID) A ORDER BY RND_INDEX LIMIT 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T15:53:03.890

假设 - 您没有考虑拥有多个名人的照片。更正 - 您所谓的连接表的正确术语是关联表。

我相信你的语法很好。随机方面增加了一点复杂性，并且希望需要在查询之外完成。

* * *

不确定您的表格或代码将如何设置，但这里是假设您正在遍历名人列表或拥有名人 ID 或姓名（我使用 $celebrity_id）的查询。

```
SELECT PHOTO_T.id 
FROM PHOTO_T, CELEBRITY_PHOTO_A, CELEBRITY_T
WHERE PHOTO_T.id = CELEBRITY_PHOTO_A.photo_id AND CELEBRITY_PHOTO_A.celebrity_id = CELEBRITY_T.id AND CELEBRITY_T.id = $celebrity_id
ORDER BY RAND() LIMIT 0,1; 
```

RAND() 的性能可能会很慢，但它会给你你想要的。

# actionscript-3 - 在闪存 as3 中出现错误 #1009

> ID：14538459
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:38:31.493
> 
> 标签：actionscript-3, flash, flash-cs6

我是 Flash 和 as3 编程的新手，这是我的第一个项目。我在我的项目中发现了这样的错误

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 src.char::Enemy/Remove() 在 src.screen::Gameplay/Collision() 在 src.screen::Gameplay/Routine()

我认为发生错误是因为游戏中没有函数Remove()，但我不确定这是不是真的。这是敌人.as

```
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.TimerEvent;
import flash.utils.Timer;

public class Enemy extends MovieClip {

    private var timer:Timer = new Timer(25);

    public function Enemy(xPos:Number, yPos:Number) {
        x = xPos;
        y = yPos;
        timer.addEventListener(TimerEvent.TIMER, MoveDown);
        timer.start();
    }

    private function MoveDown(e:TimerEvent):void {
        y += 3;
        if (y>400) {
            Remove();
        }
    }

    public function Remove():void {
        timer.stop();
        timer.removeEventListener(TimerEvent.TIMER, MoveDown);
        parent.removeChild(this);
    }

} 
```

这是gameplay.as

```
 public class Gameplay extends MovieClip {

    private var timer:Timer = new Timer(500);
    private var player:Player;

    public function Gameplay() {
        addEventListener(Event.ADDED_TO_STAGE, InitKeyboard);
        addEventListener(Event.ENTER_FRAME, Routine);
        gameplayBack.addEventListener(MouseEvent.CLICK, GoToMap);
        timer.addEventListener(TimerEvent.TIMER, OnTick);
        timer.start();
        InitPlayer();
        InitLifePoint();
    }

    private function InitLifePoint():void {
        lifePoint.gotoAndStop(1);           
    }

    private function Routine(e:Event):void {
        Collision();
    }

    private function Collision():void {
        for (var i:int = 0; i < enemies.length; i++ ) {
            if (player.hitTestObject(enemies[i])) {
                PlayerHit();
                enemies[i].Remove();
                return;
            }else {
                for (var j:int = 0; j < bullets.length; j++ ) {
                    if (bullets[j].hitTestObject(enemies[i])) {
                        layerParticle.addChild(new Blast(bullets[j].x, bullets[j].y));
                        layerParticle.addChild(new Smoke(bullets[j].x, bullets[j].y));
                        bullets[j].Remove();
                        enemies[i].Remove();
                        scorePlay.text = int(scorePlay.text) + 10 + "";
                        trace(scorePlay.text);
                        return;
                    }
                }
            }
        }
    }

    private var life:int = 1000;
    private var currentLife:int = 1000;
    private function PlayerHit():void {
        currentLife -= 100;
        if (currentLife <= 0) {
            lifePoint.gotoAndStop(100);
            GameOver();
        }else {
            lifePoint.gotoAndStop(100 - currentLife / life * 100);
        }
    }

    private var result:Result = new Result();
    private function GameOver():void {
        result.youWin.alpha = 0;
        result.ok.addEventListener(MouseEvent.CLICK, GoToMap);
        result.x = 0;
        result.y = 0;
        addChild(result);
    }

    private function InitKeyboard(e:Event):void {
        removeEventListener(Event.ADDED_TO_STAGE, InitKeyboard);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, KeyDown);
    }

    private function KeyDown(e:KeyboardEvent):void {
        switch(e.keyCode) {
            case Keyboard.LEFT: MoveLeft(); break;
            case Keyboard.RIGHT: MoveRight(); break;
            case Keyboard.SPACE: Fire(); break;
        }
    }

    private var bullets:Array = new Array();
    private function Fire():void {
        var bullet:Bullet = new Bullet(player.x, player.y);
        bullet.scaleX = 0.25;
        bullet.scaleY = 0.25;
        bullet.addEventListener(Event.REMOVED_FROM_STAGE, RemoveBulletArray);
        layerParticle.addChild(bullet);
        bullets.push(bullet);
    }

    private function RemoveBulletArray(e:Event):void {
        removeEventListener(Event.REMOVED_FROM_STAGE, RemoveBulletArray);
        var index:int = bullets.indexOf(Bullet(e.currentTarget), 0);
        bullets.splice(index, 1);
    }

    private function MoveRight():void {
        if (player.x < 550) {
            player.x += 5;
        }
    }

    private function MoveLeft():void {
        if (player.x > 0) {
            player.x -= 5;
        }
    }

    private function InitPlayer():void {
        player = new Player(550 * 0.5, 350);
        layerChar.addChild(player);
    }

    private function OnTick(e:TimerEvent):void {
        RandomEnemy();
    }

    private var enemies:Array = new Array();
    private function RandomEnemy():void {
        var enemy:Enemy = new Enemy(Math.random() * 550, 0);
        enemy.addEventListener(Event.REMOVED_FROM_STAGE, RemoveFromArray);
        layerChar.addChild(enemy);
        enemies.push(enemy);
    }

    private var remaining:int = 10;
    private function RemoveFromArray(e:Event):void {
        removeEventListener(Event.REMOVED_FROM_STAGE, RemoveFromArray);
        var index:int = enemies.indexOf(Enemy(e.currentTarget), 0);
        enemies.slice(index, 1);
        remaining--;
        if (remaining == 0) GameWin();
    }

    private function GameWin():void {
        result.youLose.alpha = 0;
        result.score.text = scorePlay.text;
        result.ok.addEventListener(MouseEvent.CLICK, GoToMap);
        result.x = 0;
        result.y = 0;
        addChild(result);
    }

    private function GoToMap(e:MouseEvent):void {
        dispatchEvent(new ScreenEvent(ScreenEvent.MAP));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:29:54.087

您的问题是 Enemy.Remove() 方法中的 NPE（空指针异常/错误）：

```
public function Remove():void {
    timer.stop();
    timer.removeEventListener(TimerEvent.TIMER, MoveDown);
    parent.removeChild(this);
} 
```

您的`timer`财产为空（我怀疑，查看您的代码）或财产为空`parent`。

在 a中，如果添加了您`MovieClip`的`parent`属性，则使用 a 填充，如果没有，则此属性为。`DisplayObject``MovieClip``null`

`MovieClip`您的问题可能是您多次（从其父级）删除它，或者试图在不先添加它的情况下删除它。

要确保这是问题所在，请先添加一条`if`语句来检查`parent`属性，如下所示：

```
if(parent != null)
{
    parent.removeChild(this);
} 
```

**注意**：
这可能会解决您的 NPE 问题，但不会解决导致它的原因，这可能会导致您陷入越来越多的莫名其妙的错误。
仔细检查您的逻辑以确保您正在删除以前添加的`MovieClip`，或者您没有多次删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:21:11.530

如果您像这样观察，您是否注意到碰撞功能中的缺陷：

```
for (var i:int = 0; i < enemies.length; i++) {
            if (~) {
                ...
                enemies[i].Remove();
                ...
            } else {
                for (~) {
                    if (~) {
                        ...
                        enemies[i].Remove();
                        ...
                    }
                }
            }
        } 
```

显然，在第二个**for**循环中，您可以轻松引用同一个 Enemy 对象。

问题出现在您调用**Remove**函数之后，因为通过这样做， `parent.removeChild(this);`您删除了对象对其父对象的唯一引用。

您可以尝试执行以下操作之一：

*   手动保留对类中父对象的引用。
*   在类中保留一个状态变量以检查它是否是显示列表的一部分。
*   将`enemies[i].Remove();`代码移动到最外层循环。
*   如果可能，回收该物品。特别是，当您只是移动 (x,y) 影片剪辑时。

# django - Ajax - 在同一页面中通过 for 循环发布多个帖子

> ID：14538461
> 
> 赞同：0
> 
> 时间：2013-01-26T15:38:49.353
> 
> 标签：django, jquery

标题可能不太清楚。非常遗憾。这是我的问题；

我使用 for 循环在索引页面中呈现我的帖子。并且所有帖子都有向上和向下投票的选项。我想通过 ajax 发送这些投票请求。但是当我编写代码时，ajax 仅适用于页面中的第一个内容。下面，不起作用。我意识到，当我使用 for 循环时，会有多个帖子具有相同的 ID。这就是 ajax 和 html 忽略其他内容的原因。

这是我的代码

索引.html：

```
<ul>
    {% for post in posts %}
     <li>
      <input type="hidden" value="{{post.id}}" id="post_id" />
      {{ post.title }}
      <a href="javascript:" id="vote_up">VOTE UP</a>
      <a href="javascript:" id="vote_down">VOTE DOWN</a>
      <button id="current_vote"> {{ post.vote }} </button>
    </li>
    {% endfor %}
</ul> 
```

和js方面：

```
$( function (){                                                                      
 49     var post_id = $('#post_id').val();                                               
 50     $('#vote_up').click( function(){                                                 
 51         var vote = 1;                                                                
 52         var ajaxOpt = {                                                              
 53             type: 'post',                                                            
 54             url: '/content/vote/',                                                   
 55             data: {                                                                  
 56                 'vote': vote,                                                        
 57                 'post_id': post_id,                                                  
 58                 },                                                                   
 59             success: function(data){                                                 
 60                 $('#current_vote').text(data.vote_new);                                
 61                 },                                                                   
 62             error: function(){                                                       
 63                 console.log('error :[');                                             
 64                 }                                                                    
 65         };                                                                           
 66         $.ajax(ajaxOpt);                                                             
 67         return false;                                                                
 68                                                                                      
 69         })
            // same code for vote_down                                                                           
 89 }) 
```

我认为我的方式有问题。我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T15:56:50.837

这只是投票的一个例子。您可以从这里开始，然后投票否决：

```
<ul>
    {% for post in posts %}
    <li>
       {{ post.title }}
       <a href="/content/vote/{{post.id}}/" class="vote_up" data-id="{{post.id}}">VOTE UP</a>
       <button id="current_vote"> {{ post.vote }} </button>
    </li>
    {% endfor %}
</ul>

<script>
$(document).ready(function(){
    $('.vote_up').click(function(){
        var post_id = $(this).attr('data-id');
        var url = $(this).attr('href');
        $.getJSON(url, function(data){});
        return false;
    });
});
</script> 
```

# sql-server-2008-r2 - 计算按日期范围拆分的值的先前出现次数

> ID：14538464
> 
> 赞同：0
> 
> 时间：2013-01-26T15:39:26.420
> 
> 标签：sql-server-2008-r2, analytic-functions

这是我们针对营销部门针对过去 90 天内收到的潜在客户的临时请求所做的简单查询。

```
SELECT ID
    ,FIRST_NAME
    ,LAST_NAME
    ,ADDRESS_1
    ,ADDRESS_2
    ,CITY
    ,STATE
    ,ZIP
    ,HOME_PHONE
    ,MOBILE_PHONE
    ,EMAIL_ADDRESS
    ,ROW_ADDED_DTM
FROM WEB_LEADS
WHERE ROW_ADDED_DTM BETWEEN @START AND @END 
```

他们要求添加更多派生列，以显示 EMAIL_ADDRESS 匹配的 ADDRESS_1 先前出现的次数。但他们想要的是不同的日期范围。

所以派生列看起来像这样：

```
,COUNT_ADDRESS_1_LAST_1_DAYS,
,COUNT_ADDRESS_1_LAST_7_DAYS
,COUNT_ADDRESS_1_LAST_14_DAYS
etc. 
```

当只有几个时，我使用更新语句手动填充了这些派生列。上面的查询实际上只是一个包含更多列的更大查询的示例。实际请求已扩展到 13 列的 6 个日期范围。我在问是否有比使用 78 个附加更新语句更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:57:53.990

我认为如果没有实际创建一个硬编码不同选择的查询，您将很难编写一个包含每个电子邮件地址的所有这 78 个指标的查询。但是，您可以使用动态 SQL 生成这样的数据透视查询，这将为您节省一些击键，并且会随着您向表中添加更多列而动态调整。

您想要最终得到的结果将如下所示（但您当然不想输入它）：

```
;WITH y AS
(
  SELECT 
    EMAIL_ADDRESS,

/* aggregation portion */

    [ADDRESS_1] = COUNT(DISTINCT [ADDRESS_1]),
    [ADDRESS_2] = COUNT(DISTINCT [ADDRESS_2]),
    ... other columns

/* end agg portion */

    FROM dbo.WEB_LEADS AS wl 
    WHERE ROW_ADDED_DTM >= /* one of 6 past dates */
    GROUP BY wl.EMAIL_ADDRESS
)
SELECT EMAIL_ADDRESS,

/* pivot portion */

  COUNT_ADDRESS_1_LAST_1_DAYS = *count address 1 from 1 day ago*,
  COUNT_ADDRESS_1_LAST_7_DAYS = *count address 1 from 7 days ago*,
  ... other date ranges ...
  COUNT_ADDRESS_2_LAST_1_DAYS = *count address 2 from 1 day ago*,
  COUNT_ADDRESS_2_LAST_7_DAYS = *count address 2 from 7 days ago*,
  ... other date ranges ...
  ... repeat for 11 more columns ...

/* end pivot portion */
FROM y 
GROUP BY EMAIL_ADDRESS
ORDER BY EMAIL_ADDRESS; 
```

这有点涉及，它应该作为一个脚本运行，但我将把它分解成块，以散布关于如何在不键入它们的情况下填充上述部分的评论。（不久之后，@Bluefeet 可能会出现更好的 PIVOT 替代方案。）我将附上我散布的评论，`/*` `*/`以便您仍然可以将此答案的大部分复制到 Management Studio 中，并在完整评论的情况下运行它。

要复制的代码/注释如下：

* * *

/* 首先，让我们构建一个日期表，它既可以用于导出标签以进行透视，也可以帮助聚合。我已经添加了您提到的三个范围并猜测第四个，但希望很清楚如何添加更多：*/

```
DECLARE @d DATE = SYSDATETIME();

CREATE TABLE #L(label NVARCHAR(15), d DATE);

INSERT #L(label, d) VALUES
(N'LAST_1_DAYS',  DATEADD(DAY,   -1,  @d)),
(N'LAST_7_DAYS',  DATEADD(DAY,   -8,  @d)),
(N'LAST_14_DAYS', DATEADD(DAY,   -15, @d)),
(N'LAST_MONTH',   DATEADD(MONTH, -1,  @d)); 
```

/* 接下来，让我们构建每个列名重复的查询部分。首先，聚合部分只是格式`col = COUNT(DISTINCT col)`。我们将转到目录视图以动态导出列名列表（除了`ID`和）`EMAIL_ADDRESS`并将`ROW_ADDED_DTM`它们填充到 #temp 表中以供重复使用。*/

```
SELECT name INTO #N FROM sys.columns
WHERE [object_id] = OBJECT_ID(N'dbo.WEB_LEADS')
AND name NOT IN (N'ID', N'EMAIL_ADDRESS', N'ROW_ADDED_DTM');

DECLARE @agg NVARCHAR(MAX) = N'', @piv NVARCHAR(MAX) = N'';

SELECT @agg += ',
  ' + QUOTENAME(name) + ' = COUNT(DISTINCT ' 
  + QUOTENAME(name) + ')' FROM #N;

PRINT @agg; 
```

/* 接下来我们将构建“pivot”部分（尽管我正在寻找穷人的支点——一堆`CASE`表达式）。对于每个列名，我们需要针对每个范围的条件，因此我们可以通过将列名列表与标签表交叉连接来完成此操作。（我们稍后将在查询中再次使用这种精确技术来使该`/* one of past 6 dates */`部分工作。*/

```
SELECT @piv += ',
  COUNT_' + n.name + '_' + l.label
  + ' = MAX(CASE WHEN label = N''' + l.label 
  + ''' THEN ' + QUOTENAME(n.name) + ' END)'
FROM #N as n CROSS JOIN #L AS l;

PRINT @piv; 
```

/* 现在，根据我们的需要填充这两个部分，我们可以构建一个动态 SQL 语句来填充其余部分：*/

```
DECLARE @sql NVARCHAR(MAX) = N';WITH y AS
(
    SELECT 
      EMAIL_ADDRESS, l.label' + @agg + '
      FROM dbo.WEB_LEADS AS wl 
      CROSS JOIN #L AS l
      WHERE wl.ROW_ADDED_DTM >= l.d
      GROUP BY wl.EMAIL_ADDRESS, l.label
)
SELECT EMAIL_ADDRESS' + @piv + '
FROM y 
GROUP BY EMAIL_ADDRESS
ORDER BY EMAIL_ADDRESS;';

PRINT @sql;

EXEC sp_executesql @sql;
GO
DROP TABLE #N, #L; 
```

/* 再说一遍，这是一段相当复杂的代码，也许可以用`PIVOT`. 但我认为即使@Bluefeet 也会编写一个`PIVOT`使用动态SQL 的版本，因为恕我直言，这里的硬编码太多了。*/

# sql - 在where子句中使用大小写在两个句子之间进行选择（Oracle）

> ID：14538466
> 
> 赞同：3
> 
> 时间：2013-01-26T15:39:44.533
> 
> 标签：sql, oracle11g

我正在创建一个函数，我需要根据参数的值在两个句子之间进行选择（PTIPO）

下面是我的代码

```
SELECT SUM(
    CASE PTIPO
      WHEN 0 THEN (CASE WHEN (A.NT = 0) THEN A.VALOR ELSE 0 END)
      WHEN 1 THEN (CASE WHEN (A.NT = 1) THEN A.VALOR ELSE 0 END)
      WHEN 2 THEN (CASE WHEN (A.NT = 1) THEN A.VALOR ELSE -A.VALOR END) 
    END)
INTO nresp
FROM mov_caja a
JOIN enc_movp b ON a.docid = b.docid
JOIN c_caja c ON a.cajaid = c.cajaid
WHERE c.cajaid = pcajaid AND( 
    CASE WHEN(PTIPO = 2) --this is what causes the issue.
    THEN
    b.cod_compro = ncompini OR (b.fecha_mov BETWEEN pfecha_ini AND pfecha_fin)
    ELSE
    b.cod_compro != ncompini AND b.fecha_mov BETWEEN pfecha_ini AND pfecha_fin
    END); 
```

错误是“缺少关键字”，但我知道问题是最后一个案例。我还能如何在句子之间进行选择。这种情况是正确的方法还是我应该使用另一种说法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:46:20.300

case 可以返回一个值，但不能返回一个表达式。这应该可以解决问题，尽管我觉得它甚至可以更简单：

```
SELECT SUM(
    CASE PTIPO
      WHEN 0 THEN (CASE WHEN (A.NT = 0) THEN A.VALOR ELSE 0 END)
      WHEN 1 THEN (CASE WHEN (A.NT = 1) THEN A.VALOR ELSE 0 END)
      WHEN 2 THEN (CASE WHEN (A.NT = 1) THEN A.VALOR ELSE -A.VALOR END) 
    END)
INTO nresp
FROM mov_caja a
JOIN enc_movp b ON a.docid = b.docid
JOIN c_caja c ON a.cajaid = c.cajaid
WHERE 
  c.cajaid = pcajaid AND
  ( 
    (PTIPO = 2 and (b.cod_compro = ncompini OR b.fecha_mov BETWEEN pfecha_ini AND pfecha_fin))
OR
    (PTIPO <> 2 and (b.cod_compro != ncompini AND b.fecha_mov BETWEEN pfecha_ini AND pfecha_fin))
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:48:41.397

试试这个：

```
WHERE c.cajaid = pcajaid AND
       (
          PTIPO = 2
             AND (
                    b.cod_compro = ncompini
                    OR b.fecha_mov BETWEEN pfecha_ini AND pfecha_fin
                 )
  OR
         PTIPO != 2
             AND (
                   b.cod_compro != ncompini
                   AND b.fecha_mov BETWEEN pfecha_ini AND pfecha_fin
                 )
       ) 
```

# python - 如何在 Mac OS X 10.8 上安装 hg convert 所需的 python 颠覆绑定？

> ID：14538468
> 
> 赞同：5
> 
> 时间：2013-01-26T15:40:06.793
> 
> 标签：python, macos, svn, mercurial

我正在寻找一种解决方案，最好是干净和简单的，以便能够`hg convert`在带有 SVN 存储库的 OS X 10.8 上工作。

目前，如果您尝试转换 SVN 存储库，您将收到`could not load Subversion python bindings`错误消息。

注意：Alex Martelli 在另一个答案中建议为 OS X 安装 CollabNet subversion 发行版，但似乎最新的 CollabNet 版本无法在 OS X 10.8 上安装（安装程序锁定）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-05T22:12:03.983

## 使用自制软件

最简单的方法是使用和标志`subversion`从源代码安装。[`homebrew`](http://brew.sh)`--with-python`

首先，确保您已安装命令行工具。`cc`使用 Mavericks 和 Xcode 5，即使没有完全安装命令行工具，大多数命令也能正常工作。如果你没有`/usr/include`目录，那么首先你需要运行

```
$ xcode-select --install 
```

安装命令行工具后，运行：

```
$ brew install subversion --with-python
$ mkdir -p ~/Library/Python/2.7/lib/python/site-packages
$ echo $(brew --cellar)/subversion/1.8.5/lib/svn-python \
    > ~/Library/Python/2.7/lib/python/site-packages/svn.pth 
```

您可以通过运行单元测试来测试绑定：

```
$ svn co http://svn.apache.org/repos/asf/subversion/tags/1.8.5/subversion/bindings/swig/python/tests
$ cd tests && python run_all.py 
```

## 使用苹果的源代码

这适用于 Mountain Lion，但需要对 Mavericks 进行调整并导致单元测试失败；请参阅[Simon Wright 对此问题的回答](https://stackoverflow.com/a/21348716/14558)。

可以使用 Apple 版本的 subversion 源代码为 Python 构建 subversion 绑定。生成的模块将完全兼容并链接到所有系统库。然后`hg convert`就可以工作了。

这是如何做到的：

1.  从[opensource.apple.com](http://www.opensource.apple.com/tarballs/)下载[subversion 压缩包](http://www.opensource.apple.com/tarballs/subversion/subversion-52.tar.gz)

2.  解压并配置它：

    ```
    cd subversion-52/subversion && ./configure 
    ```

3.  在`subversion/bindings/swig/python`中，添加此 Makefile，确保将前导空格更改为制表符：

    ```
    SHELL = /bin/bash -eu

    CC = gcc -g -O2
    CFLAGS = -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK \
        -I ../proxy \
        -I ../../.. \
        -I ../../../include \
        -I /usr/include/apr-1 \
        -I libsvn_swig_py \
        -I /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 \

    LDFLAGS = \
        /System/Library/Frameworks/Python.framework/Versions/2.7/lib/libpython2.7.dylib \
        /usr/lib/libsvn_*-1.0.dylib \
        /usr/lib/libapr-1.dylib \

    .PHONY: build egg test clean install

    test: egg
        mkdir -p tmp && cd tmp \
          && PYTHONPATH=../egg python -S -m svn.tests.run_all

    DESTDIR=$(HOME)/Library/Python/2.7/lib/python/site-packages
    install: egg
            mkdir -p "${DESTDIR}"
        rm -rf "$(DESTDIR)/svn.egg"
        cp -R egg "$(DESTDIR)/svn.egg"
        echo './svn.egg' > "$(DESTDIR)/svn.pth"

    egg: build
        rm -rf egg
        mkdir egg
        cp -R svn egg
        cp -R tests egg/svn
        touch egg/svn/tests/__init__.py
        mkdir egg/libsvn
        cp *.py egg/libsvn
        cp *.so *.dylib egg/libsvn
        # https://blogs.oracle.com/dipol/entry/dynamic_libraries_rpath_and_mac
        for F in egg/libsvn/*.so; do \
          install_name_tool -change libsvn_swig_py.dylib \
            '@loader_path/libsvn_swig_py.dylib' "$$F"; \
        done
        strip -x egg/libsvn/*.so
        touch egg/libsvn/__init__.py
        mkdir -p egg/EGG-INFO
        echo 'Version: 1.6.8' > egg/EGG-INFO/PKG-INFO

    build: libsvn_swig_py.dylib _client.so _core.so _delta.so _diff.so _fs.so _ra.so _repos.so _wc.so

    libsvn_swig_py.dylib:
        $(CC) $(CFLAGS) -shared -dynamic libsvn_swig_py/swigutil_py.c -o $@ $(LDFLAGS)

    _client.so: svn_client.c
    _core.so: core.c
    _delta.so: svn_delta.c
    _diff.so: svn_diff.c
    _fs.so: svn_fs.c
    _repos.so: svn_repos.c
    _wc.so: svn_wc.c

    _%.so: svn_%.c libsvn_swig_py.dylib
        $(CC) $(CFLAGS) -bundle $^ -o $@ $(LDFLAGS)
    _%.so: %.c libsvn_swig_py.dylib
        $(CC) $(CFLAGS) -bundle $^ -o $@ $(LDFLAGS)

    clean:
        rm -rf *.o *.so *.dylib *.dSYM 
    ```

    然后`make`在该目录中运行。

4.  如果单元测试在最后一步通过，您现在拥有用于颠覆的全功能 Python 绑定！`make install`如果你高兴就跑，然后 开始`hg convert`工作。

* * *

通常情况下，从头开始重写构建系统比找出现有系统更容易。

来自 Apple 和 Subversion 的所有脚本确实使它变得复杂，但您真正需要做的就是复制`.py`文件，使用通用代码构建一个共享库，然后构建每个 C 语言 Python 模块。确定要使用哪些包含文件和库很简单：尝试在没有任何包含或库的情况下开始构建它，并且当构建失败时，添加对导致构建失败的缺失包含路径或库的引用。棘手的部分是告诉 C 语言模块，例如`_core.so`在哪里可以找到公共代码的动态库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T04:37:54.230

使用 MacPorts 的 hg，我需要`sudo port install subversion-python27bindings`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-25T09:13:17.903

这是小牛队对[安德鲁多顿上述回答](https://stackoverflow.com/a/16950786/40851)的更新。

在 Mavericks 下，`/usr/lib`（标准位置）中唯一的 SVN 动态库是，例如`/usr/lib/libsvn_client-1.0.0.0.dylib`. 该库的内部名称（使用 查找`otool -L`）告诉动态加载器查找`libsvn_client-1.0.dylib`. *通常*这也会`/usr/lib`作为真正库的符号链接。

尝试这个：

1.  在 andrewdotn's`Makefile`中，编辑`LDFLAGS`（第二行）说

    /Library/Developer/CommandLineTools/usr/lib/libsvn_*-1.0.dylib \

2.  设置`DYLD_LIBRARY_PATH`：

    导出 DYLD_LIBRARY_PATH=/库/开发者/CommandLineTools/usr/lib

然后`make`。我有 2 个错误：

```
======================================================================
ERROR: test_get_pristine_copy_path (svn.tests.wc.SubversionWorkingCopyTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "../egg/svn/tests/wc.py", line 192, in test_get_pristine_copy_path
    self.assertEqual(path_to_text_base, wc.get_pristine_copy_path(path_to_file))
  File "../egg/libsvn/wc.py", line 2447, in svn_wc_get_pristine_copy_path
    return apply(_wc.svn_wc_get_pristine_copy_path, args)
SubversionException: ("The node '/var/folders/_q/fvnxz46903z9hjh38fz0lyhm0000gs/T/tmp7vMRZu/foo' was not found.", 155010)

======================================================================
ERROR: test_lock (svn.tests.wc.SubversionWorkingCopyTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "../egg/svn/tests/wc.py", line 48, in test_lock
    lock = wc.add_lock(self.path, core.svn_lock_create(core.Pool()), self.wc)
  File "../egg/libsvn/wc.py", line 2601, in svn_wc_add_lock
    return apply(_wc.svn_wc_add_lock, args)
SubversionException: ('sqlite: LOCK.lock_token may not be NULL', 200035)

---------------------------------------------------------------------- 
```

但我还是安装了并且`hg convert`工作正常。

我怀疑您`DYLD_LIBRARY_PATH`每次需要运行时都需要按上述设置`hg convert`；希望不要那么频繁！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:11:57.083

您可以尝试将 hgsubversion 与 subvertpy 一起使用，而不是 hg convert。

# winapi - 挂钩磁盘写入并获取正在写入的数据

> ID：14538470
> 
> 赞同：0
> 
> 时间：2013-01-26T15:40:15.173
> 
> 标签：winapi

除了在写入或读取进程内存后读取数据并搜索数据之外，有没有办法挂钩特定应用程序的磁盘写入并获取正在写入的数据？在磁盘上被篡改之前获取数据对我来说很重要。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:48:13.607

声望太低，无法评论，抱歉。

我会说（呼应雷蒙德）迷你过滤器会很好地满足您的要求。

[微软文档](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff540402%28v=vs.85%29.aspx "微软文档")

FltGetRequestorProcessId 应该允许您按进程过滤。

您仍然会看到每个请求都通过，只需匹配您感兴趣的 pid。如果不是您的进程返回 FLT_PREOP_SUCCESS_NO_CALLBACK，您将不再担心该请求。

# iphone - Xcode - 多个 URL 方案

> ID：14538472
> 
> 赞同：7
> 
> 时间：2013-01-26T15:40:20.960
> 
> 标签：iphone, ios, objective-c, xcode, url-scheme

在我的应用程序中，我想要两个不同的 URL 方案。
像**一**和**二**
所以用户可以打开我的应用程序：
`one://something`
和
`two://something`

我正在使用这个：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
} 
```

应用程序如何知道用户输入了一个还是两个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T15:47:50.197

`handleOpenURL`已弃用，因此如果您的目标是 iOS 4.2 或更高版本，则应改为使用[`application:openURL:sourceApplication:annotation:`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:openURL:sourceApplication:annotation:)

在这两种情况下，您都会收到一个[`NSURL`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)，您可以在其上访问[该`scheme`属性](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/scheme)以找出用于访问您的应用程序的方案。

编辑：为了可读性；在您的实现中`application:openURL:sourceApplication:annotation:`，代码将类似于；

```
if([[url scheme] caseInsensitiveCompare:@"one"] == NSOrderedSame) 
{ 
    /* one here */ 
} else { 
    /* not one here */ 
} 
```

# java - 为什么我的程序一遍又一遍地写入文件而不是添加数据？

> ID：14538475
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:40:31.873
> 
> 标签：java, newline, writer

为什么我的程序一遍又一遍地写入文件而不是添加数据？

我想写入文件，但它总是删除以前的并写入新的......

```
BufferedWriter writer = null;
    try {

    writer = new BufferedWriter(new FileWriter("koce_podatki.txt", true));
    //WRITES 1 LINE TO FILE AND CHANGES LINE
    writer.write(temp);
    writer.newLine();
    writer.close();
    } catch (Exception e) {

    }

    try {

    writer = new BufferedWriter(new FileWriter("s_koce.txt", true));
    //WRITES 1 LINE TO FILE AND CHANGES LINE
    writer.write(ime.getText());
    writer.newLine();
    writer.close();
    } catch (Exception e) {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:45:09.460

我使用了thics，它起作用了：

```
try {
    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("koce_podatki.txt", true)));
    out.println(temp);
    out.close();
} catch (IOException e) {
    //oh noes!
} 
```

# .htaccess - 通过单独的文件夹和 index.html 文件中的漂亮 URL 或 .htaccess 中的规则

> ID：14538477
> 
> 赞同：0
> 
> 时间：2013-01-26T15:40:40.293
> 
> 标签：.htaccess, nanoc, pretty-urls, static-site

我有 nanoc 生成的静态站点（html + css）。它在 Apache 下工作。

我想在最后使用漂亮的 url 而不是 .html 后缀。像这样：

*   http://domain.ru
*   http://domain.ru/page/page1/
*   http://domain.ru/page/page2/

代替

*   http://domain.ru/index.html
*   http://domain.ru/page/page1.html
*   http://domain.ru/page/page2.html

因此，第一种方法是创建名为 page1 和 page2 的单独文件夹，并放置在 index.html 具有相应内容的文件中。当客户请求时：

[http://domain.ru/page/page1/](http://domain.ru/page/page1/) 加载文件 page1/index.html

第二种方法是拥有这样的文件结构：

page（文件夹）
- page1.html（文件）
- page2.html（文件）

并为站点根目录中的 .htaccess 文件创建规则：

RewriteCond %{SCRIPT_FILENAME}上的
RewriteEngine ！-d
RewriteCond %{SCRIPT_FILENAME} ！-f
RewriteRule ^(.+)/$ /$1.html

那么，问题是哪种方式更好？使用重写规则或陷阱可能会产生一些额外的成本吗？对于静态生成的网站，可能有一些针对此问题的良好做法。

PS：我以任何方式使用 .htaccess 文件：我需要打开 utf-8 编码，启用 404 错误处理，禁止浏览文件夹

感谢和抱歉英语不好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:01:22.977

我更喜欢`index.html`在目录中使用，因为它与服务器无关。我认为没有充分的理由不这样做。

# java - 片段，方法 Fragment1() 对于 MainActivity 类型未定义我想解释一下

> ID：14538480
> 
> 赞同：0
> 
> 时间：2013-01-26T15:40:46.907
> 
> 标签：java, android, eclipse

我一直在关注关于片段的教程只是为了对它们有所了解，我一直遵循教程到最后，Eclipse现在抛出错误`"The method Fragment1() is undefined for the type MainActivity"`我不确定是否与`Import.R.Android.*`我之前遇到的问题有关它现在不是指`Fragment1.class?`或者在初始化片段的教程中遗漏了什么？

据我了解 public void Onclick(View v) {

```
 Fragment newFragment;

    if (v == button1) {
        newFragment = Fragment1();
    }else if (v == button2) {
        newFragment = Fragment2();
    }else if (v == button3) {
        newFragment = Fragment3();
    }else {
        newFragment = StartFragment();
    }

} 
```

`Fragment(newFragment)`它用基于按下哪个按钮的片段替换占位符？还是我错过了一些显而易见的东西？感谢您的任何帮助。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:baselineAligned="false" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="Onclick"
            android:text="Frag1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="Onclick"
            android:text="Frag2" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="OnClick"
            android:text="Frag3" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/myFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="3"
        android:orientation="vertical" >

    </LinearLayout>

</LinearLayout> 
```

TLDR：我知道它是因为片段未定义，但由于我正在学习教程，所以我还不知道如何定义片段。

Android 开发人员指南对这种特殊情况没有帮助，因为他们似乎以与本教程不同的方式实现它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:47:39.933

我建议在尝试学习 Android 框架之前找到一本关于如何用 Java 编写代码的好书或网站，因为您似乎在 Java 类和一些基本 Java 语法方面存在一些问题。

对Java来说，`newFragment = Fragment1();`是一个方法调用。它有一个方法名 ( `Fragment`)，并且不传入任何参数。

要实例化一个对象（如 Fragment），您需要使用 new 关键字。例如，`Fragment myFragment = new Fragment1();`。

此外，从您的代码片段中并不清楚，但您必须定义为 types`Fragment1`等`Fragment2`的类。这些应该扩展`Fragment`类。

我强烈建议您遵循[Android 开发人员指南](http://developer.android.com/guide/components/fragments.html)，因为您遵循的指南似乎对您没有多大帮助，官方指南提供了非常好的示例，说明 Google 说您应该如何组织和编码您的应用程序。

# php - 语法错误，意外的 T_IS_EQUAL

> ID：14538481
> 
> 赞同：0
> 
> 时间：2013-01-26T15:40:48.013
> 
> 标签：php

```
 <?php
    if(isset($_POST['zapisz'])) { 
    $zapytanie_update = mysql_query("UPDATE `emotki` SET `kod` = '".$_POST['kod']."',`opis` = '".$_POST['opis']."', `glowna` = '".$_POST['glowna']."' WHERE id= $id");
    echo 'Emotka zapisana.<br/><a href="index.php">&laquo; Powrót</a>';
    }

    $usun = $_POST['usun'];
    if(isset($usun == 1)
    {
    $usuwaj = mysql_query("DELETE FROM `emotki` WHERE 'id'= $id");
    }

else {
?> 
```

我在第 63 行的 C:\wamp\www\emotki_admin\edytuj.php 中有（！）解析错误：语法错误，意外的 T_IS_EQUAL，期待 ',' 或 ')'

第 63 行是`if(isset($usun == 1)`

错误在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T15:43:29.183

你缺少一个括号：

```
if(isset($usun) == 1) 
```

但无论如何，比较是不必要的。所有你需要的是：

```
if(isset($usun)) 
```

因为`isset()`返回一个布尔值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:41:48.960

你缺少一个括号：

```
if(isset($usun == 1) 
```

应该

```
if(isset($usun == 1)) 
```

# xcode - 有人知道 xcode 文件“InfoPlist.strings (English)”是什么吗？

> ID：14538484
> 
> 赞同：7
> 
> 时间：2013-01-26T15:41:22.147
> 
> 标签：xcode, macos, applescript

有谁知道这个文件`InfoPlist.strings`是干什么用的？它在 Xcode 3.2 中。它是 Applescript 中的 Cocoa 应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T15:55:42.107

> 信息属性列表文件是一个结构化文本文件，其中包含捆绑可执行文件的基本配置信息。文件本身通常使用 Unicode UTF-8 编码进行编码，并且内容使用 XML 进行结构化。根 XML 节点是一个字典，其内容是一组描述包不同方面的键和值。系统使用这些键和值来获取有关您的应用程序及其配置方式的信息。因此，所有捆绑的可执行文件（插件、框架和应用程序）都应该有一个信息属性列表文件。
> 
> 按照约定，信息属性列表文件的名称是 Info.plist。
> 
> 本地化的值不存储在 Info.plist 文件本身中。相反，您将特定本地化的值存储在名为 InfoPlist.strings 的字符串文件中。将此文件放置在用于存储相同本地化的其他资源的特定语言项目目录中。InfoPlist.strings 文件的内容是您想要本地化的各个键和适当翻译的值。在 Info.plist 文件中查找键值的例程会考虑用户的语言偏好，并在存在时返回键的本地化版本（来自相应的 InfoPlist.strings 文件）。如果键的本地化版本不存在，例程将返回 Info.plist 文件中存储的值。
> 
> 例如，TextEdit 应用程序有几个键显示在 Finder 中，因此应该进行本地化。假设您的信息属性列表文件定义了以下键：
> 
> ```
> <key>CFBundleDisplayName</key> 
> <string>TextEdit</string>
> <key>NSHumanReadableCopyright</key> 
> <string>Copyright ¬© 1995-2009, Apple Inc.,All Rights Reserved.</string> 
> ```
> 
> 然后，TextEdit 的法语本地化在其目录的`InfoPlist.strings` 文件中包含以下字符串：`Contents/Resources/French.lproj`
> 
> ```
> CFBundleDisplayName = "TextEdit";
> NSHumanReadableCopyright = "Copyright © 1995-2009 Apple Inc.\nTous droits réservés."; 
> ```

来自[developer.Apple.com](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html)

# bash - 我如何从字面上接受 shell 输入？（即保持引号等完整）

> ID：14538489
> 
> 赞同：1
> 
> 时间：2013-01-26T15:41:49.087
> 
> 标签：bash, shell, unix, grep

我正在尝试编写一个 bash 脚本，以便我将用它来替换我的 egrep 命令。我希望能够采用与我的脚本完全相同的输入并将其提供给 egrep。IE

```
#!/bin/bash
PARAMS=$@
`egrep "$PARAMS"` 
```

但我注意到，如果我回显我正在执行的内容，则引号已被删除，如下所示：

> ./customEgrep -nr "grep my ish" *

返回

> egrep -nr grep my ish（来自扩展 * 的文件列表）

有没有一种方法可以让我从字面上获取输入，以便我可以直接将它与 egrep 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T15:59:38.543

你要这个：

```
egrep "$@" 
```

您键入的引号不会传递给脚本；它们用于确定单词边界。Using`"$@"`保留了这些单词边界，因此`egrep`将获得与直接运行它时相同的参数。`echo`但是，如果您提出论点，您仍然不会看到引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:45:08.643

`"`是一个特殊的字符。您需要使用转义字符才能检索`"`

采用

```
./customEgrep -nr "\"grep my ish\"" * 
```

如果您不需要在参数中做任何参数扩展，您可以使用单引号来避免需要转义双引号：

```
./customerEgrep -nr '"grep my ish"' * 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T15:58:51.937

`$@`引用时是特殊的。尝试：

```
value=$( egrep "$@" ) 
```

我不清楚你为什么使用 bacticks 并忽略结果，所以我使用了`$()`语法并分配了值。

如果出于某种原因您想保存参数以供以后使用，您还可以执行以下操作：

```
for i; do args="$args '$i'"; done  # Save the arguments
eval grep $args # Pass the arguments to grep without resetting $1,$2,...
eval set $args  # Restore the arguments
grep "$@"       # Use the restored arguments 
```

# ios - iOS - 核心数据自动生成的模型 - 无法识别的选择器

> ID：14538490
> 
> 赞同：0
> 
> 时间：2013-01-26T15:42:08.897
> 
> 标签：ios, core-data, selector, nsmanagedobject

我有一个基本的核心数据模型，如下所示： ![在此处输入图像描述](../Images/9b706bcaa002eba1df3e16b0b98f3d7d.png)

我自动生成数据模型文件，它给了我类似的东西：

BSStudent.h

```
//
//  BSStudent.h
//

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class BSFormation;

@interface BSStudent : NSManagedObject

@property (nonatomic, retain) NSString * firstname;
@property (nonatomic, retain) NSString * lastname;
@property (nonatomic, retain) NSDate * birthdate;
@property (nonatomic, retain) id thumbnail;
@property (nonatomic, retain) NSSet *formations;
@end

@interface BSStudent (CoreDataGeneratedAccessors)

- (void)addFormationsObject:(BSFormation *)value;
- (void)removeFormationsObject:(BSFormation *)value;
- (void)addFormations:(NSSet *)values;
- (void)removeFormations:(NSSet *)values;

@end 
```

BSStudent.m

```
//
//  BSStudent.m
//

#import "BSStudent.h"
#import "BSFormation.h"

@implementation BSStudent

@dynamic firstname;
@dynamic lastname;
@dynamic birthdate;
@dynamic thumbnail;
@dynamic formations;

@end 
```

我尝试通过执行以下操作来简单地保存 BSStudent 对象：

```
BSStudent *newStudent = (BSStudent *)[NSEntityDescription entityForName:kBSStudent inManagedObjectContext:self.managedObjectContext];
    newStudent.firstname = firstname;
    newStudent.lastname = lastname;
    newStudent.birthdate = birthdate;
    newStudent.thumbnail = thumbnail;

    NSError *error;
    if (![self.managedObjectContext save:&error]) {
        NSLog(@"Error: %@", [error localizedDescription]);
    } 
```

但我的应用程序总是因错误而崩溃：`[NSEntityDescription setFirstname:]: unrecognized selector sent to instance 0x1f021e00`

有人弄清楚这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:47:58.260

一种可能的解释是您在以下位置使用了错误的字符串：

```
BSStudent *newStudent = (BSStudent *)[NSEntityDescription entityForName:kBSStudent inManagedObjectContext:self.managedObjectContext]; 
```

尝试检查`newStudent`实际情况：

```
BSStudent *newStudent = (BSStudent *)[NSEntityDescription entityForName:kBSStudent inManagedObjectContext:self.managedObjectContext];
NSLog(@"New Student: %@", [newStudent description]);
newStudent.firstname = firstname; 
```

也许它会澄清一些事情......

# c++ - Qt/C++：程序在 Kubuntu 中运行时图标不显示

> ID：14538491
> 
> 赞同：0
> 
> 时间：2013-01-26T15:42:10.887
> 
> 标签：c++, qt, qicon

我做了我需要做的一切：

1.  在资源文件中添加了一个图标
2.  主文件中的初始化资源：`Q_INIT_RESOURCE(images);`
3.  设置图标：`ui->action_New->setIcon(QIcon(":/images/about_me.png"));`

但是当我编译和运行我的应用程序时仍然看不到图像（我使用 Kubuntu 12.04 和 Qt 4.8.1）。这是一个小测试项目：[http](http://www27.zippyshare.com/v/45362924/file.html) ://www27.zippyshare.com/v/45362924/file.html 。出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:06:03.137

注意文件中的`alias`位`.qrc`。

我更喜欢设置`<qresource prefix="/">`以保持简单。

```
<RCC>
   <qresource prefix="/">
      <file alias="about me">images/about_me.png</file>
      <file alias="BSD License">otherfiles/LICENSE.txt</file>
      ... 
   </qresource>
</RCC> 
```

这样您就无需费心记住使用资源的完整路径

```
ui->action_New->setIcon(QIcon(":/about me"));    
this->setWindowIcon(QIcon(":/about me"));
...

QFile lfile (":/BSD License");
if(lfile.open(QIODevice::ReadOnly){
  ...
} 
```

*注意：我并不是说在别名中使用空格是一个好主意或坏主意，但它确实有效。*

# jquery - Rails $.post 调用不包含我期望的参数

> ID：14538492
> 
> 赞同：1
> 
> 时间：2013-01-26T15:42:15.607
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, ruby-on-rails-3

这曾经对我有用，但我已经改变了一些东西，现在它不起作用了，对于我的生活，我无法弄清楚我改变了什么。

基本上我有一个页面，我正在实现一个 jquery 拖放功能，当单击提交按钮时，我正在传递一些数据来存储所有已拖放的元素的 x 和 y 位置。

您可以在下面的 jquery 代码段中看到我正在使用`$.post`. 然后在我的控制器中，我将数据保存到数据库中。

问题是它`params[:application]`总是为零。它曾经包含应用程序数据，但我改变了一些东西，这不再有效。

为什么我的 ajax 调用不包含 params[:application]？

这是我正在点击的网址 -`/applications/1/edit`

这是我的jQuery提交功能

```
$('.organizer').submit(function(e) {
        e.preventDefault();
        e.stopPropagation();
        var dataToSubmit = $(this).serialize();
        var ids = [];
        var field_values = [];
        var x_values = [];
        var y_values = [];
        var success = true;

        console.log('dataToSubmit = '+dataToSubmit);

        $('.organizer .draggable').each(function() {
            // add the draggable value to an array
            field_values.push($(this).find('a').text().trim());
            ids.push($(this).find('a').data('id'));
            x_values.push($(this).closest('td').data('counter'));
            y_values.push($(this).closest('tr').data('counter'));
        });

        for(i = 0; i < field_values.length; ++i) {
            console.log('id = '+ids[i]);
            dataToSubmit += "&field_name="+field_values[i]+"&appfieldid="+ids[i]+"&xposition="+x_values[i]+"&yposition="+y_values[i];
            console.log(decodeURIComponent(dataToSubmit));
            $.post($(this).attr('action'), dataToSubmit).error(function() {
                success = false;
            }); 
        }

        // if all of the ajax calls were successful, show a success message
        if(success) {
            $('h1').after('<div class="nNote nSuccess"><p>Application Updated Successfully!</p></div>');
            $('.nSuccess').delay(5000).fadeOut();
        }

    }); 
```

这是我的控制器方法

```
# PUT /applications/1
  # PUT /applications/1.json
  def update
    @application = Application.find(params[:id])
    p params[:appfieldid]
    p params[:xposition]
    p params[:yposition]
    p params[:field_name]
    p params[:application] # WHY IS THIS ALWAYS NIL?
    app_fields = params[:application]
    p app_fields
    app_fields['application_field_attributes']["0"].merge!({"id"=>params[:appfieldid], "xposition"=>params[:xposition], "yposition"=>params[:yposition]})   #app_fields['application_field_attributes']['yposition'] = params[:yposition]
    p app_fields
    respond_to do |format|
      if @application.update_attributes(app_fields)
        #@application.application_details.xposition = params[:xposition]
        #@application.application_details.yposition = params[:yposition]

        @curr_app = ApplicationField.last
    format.html { render :nothing => true }
        format.json { head :no_content }
        format.js # WHY IS THIS NOT CALLED? INSTEAD I'M USING A SUCCESS CALLBACK ON THE $.POST METHOD
      else
        format.html { render action: "edit" }
        format.json { render json: @application.errors, status: :unprocessable_entity }
        format.js { render action: "update" }
      end
    end
  end 
```

这是生成的表单标记

```
<form accept-charset="UTF-8" action="/applications/3" class="organizer" data-remote="true" id="edit_application_3" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="3LOzuiL/PU6HypJ4OeN5H9yrX3Xyk0VT6XpcFYd1wY0=" /></div>
    <fieldset>
        <div class="widget fluid">
            <div class="whead"><h6>New Application</h6><div class="clear"></div></div>
            <table cellpadding="0" cellspacing="0" width="100%" class="tDefault tMedia" id="app_table">
                <thead>
                    <tr>
                        <td width="35%">First Half</td>
                        <td width="35%">Second Half</td>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <td colspan="6">
                            <input class="buttonS bBlue" name="commit" type="submit" value="Submit" />                  
                        </td>
                    </tr>
                </tfoot>
                <tbody>

                    <tr data-counter="0">
                        <td class="droppable nopadding" data-counter="0">
                                    &nbsp;
                                    &nbsp;
                        </td>           
                        <td class="droppable nopadding" data-counter="1">
                                    &nbsp;
                                    &nbsp;
                        </td>
                    </tr>           
                    <tr data-counter="1">
                        <td class="droppable nopadding" data-counter="0">
                                    &nbsp;
                                    &nbsp;
                        </td>           
                        <td class="droppable nopadding" data-counter="1">
                                    &nbsp;
                                    &nbsp;
                        </td>
                    </tr>           
                </tbody>
            </table>
        </div>
    </fieldset>
</form> 
```

**编辑**

这里有一些更多的信息：

```
# GET /applications/1/edit
  def edit
    @application = Application.find(params[:id])
  end 
```

编辑.html.erb

```
<%= form_for(@application, :html => {:class => "organizer"}, :remote => true) do |f| %>
...
<% @application.application_field.each_with_index do |f, i| %>              
    <tr data-counter="<%= i %>">
        <td class="droppable nopadding" data-counter="0">
        <% @application.application_field.each_with_index do |f2, i2| %>
                    <% if f2.yposition == i && f2.xposition == 0 %>
                        <ul class="subNav noborder">
                            <li class="draggable" style="height: 64px;">
                            <a value="#" data-id="<%= f.id %>" style="height: 47px;">
                                <span class="icos-list2 move"></span>
                                <span class="field_label"><%= f2.field_name %></span>
                                <% if f.field_type == 'textfield' %>
                                    <input type="text" class="textfield" name="textfield" />
                                <% elsif f.field_type == 'dropdown' %>
                                    <!-- TODO - fill in for dropdown -->
                                <% elsif f.field_type == 'checkbox' %>
                                    <!-- TODO - fill in for checkbox -->
                                <% end %> 
                            </a>
                            <%= link_to '<span class=icos-cross></span>'.html_safe, application_field_path(f), :class => 'remove_fields close', :method => :delete, :remote => true %>
                            </li>
                            </ul>   
                        <% end %>
                    <% end %>
                </td>           
            <td class="droppable nopadding" data-counter="1">
                   <% @application.application_field.each_with_index do |f2, i2| %>
                        <% if f2.yposition == i && f2.xposition == 1 %>
                            <ul class="subNav noborder">
                                <li class="draggable" style="height: 64px;">
                                <a value="#" data-id="<%= f.id %>" style="height: 47px;">
                                    <span class="icos-list2 move"></span>
                                    <span class="field_label"><%= f2.field_name %></span>
                                    <% if f.field_type == 'textfield' %>
                                        <input type="text" class="textfield" name="textfield" />
                                    <% elsif f.field_type == 'dropdown' %>
                                        <!-- TODO - fill in for dropdown -->
                                    <% elsif f.field_type == 'checkbox' %>
                                        <!-- TODO - fill in for checkbox -->
                                    <% end %>
                                </a>
                                <%= link_to '<span class=icos-cross></span>'.html_safe, application_field_path(f), :class => 'remove_fields close', :method => :delete, :remote => true %>
                                </li>
                            </ul>
                    <% end %>
                <% end %>
                </td>   
            </tr>           
        <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:11:08.867

dataToSubmit 是否包含应用程序参数？应该是什么？身份证？什么？

$(this).serialize() 的价值是多少？

dataToSubmit += "&field_name="+field_values[i]+"&appfieldid="+ids[i]+"&xposition="+x_values[i]+"&yposition="+y_values[i];

我猜你在表单上缺少一个名为 application 的输入字段，我在表单代码上看不到它。

此外，您的请求不会呈现 js 响应，因为您没有使用格式“脚本”调用它。执行以下操作：

```
$.post($(this).attr('action'), dataToSubmit).error(
  function() {
    success = false;
  },'script'); 
```

那应该用js格式发出请求

检查服务器日志，它会告诉你请求的所有参数和格式，你不需要把所有东西都放在你的控制器上，这很混乱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T20:36:07.823

通过尝试一堆我记得以前拥有的东西，我发现通过拥有

```
<%= f.fields_for :application_field do |field| %>
...
<% end %> 
```

被`params[:application]`传递给控制器​​。

我不确定为什么它会起作用，因为我实际上并没有对`field`.

# java - 错误：无法找到或加载主类（双击）

> ID：14538493
> 
> 赞同：2
> 
> 时间：2013-01-26T15:42:17.700
> 
> 标签：java, jar, double-click

我刚刚使用 Eclipse 从我的 java 应用程序中制作了一个“可运行的 .jar”（或一个普通的 .jar，我自己在其中启动了清单。我都尝试了）文件。

当我尝试通过双击打开它时，我收到以下消息：“找不到或加载主类”

从命令提示符中，我可以使用“java -jar xy.jar”运行它。工作没有任何问题。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:55:15.807

确保您的清单文件包含主类。像这样。

主类：MyPackage.MyClass

您可能希望让 eclipse 生成清单，以便您可以看到它的作用，然后保存该清单文件并继续使用它。还要检查类路径。您也可以在清单中指定。

[这是如何在清单中设置入口点的链接](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

您可能还需要将类路径放在清单中。

```
Manifest-Version: 1.0
Class-Path: MyUtils.jar
Created-By: 1.7.0_06 (Oracle Corporation) 
```

可以在这里找到：[添加类路径到清单](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

# spring - 如何在不使用任何 XML 文件的情况下设置 Spring Web 服务？

> ID：14538495
> 
> 赞同：3
> 
> 时间：2013-01-26T15:42:43.393
> 
> 标签：spring, configuration, annotations, jax-ws

在我看来，即使我使用 @Configuration 类来连接所有的 bean，Spring 的 Web 服务部分仍然需要在 XML 文件中进行一些配置。有谁知道如何在没有任何 XML 文件的情况下设置 Spring Web 服务？

在这一点上，它是 JAXWS 还是 SpringWS 并不重要，只要它可以正常工作。

我将 Spring 3.1.2 与 JAX-WS 2.2.3 一起使用。这是我到目前为止所拥有的：

```
//The endpoint
@WebService(serviceName = "EquityService")
public class EquityServiceEndPoint extends SpringBeanAutowiringSupport implements EquityService {

    @Autowired
    private EquityService equityService;

    @WebMethod
    public String helloWorld() {
        return equityService.helloWorld();
    }

} 
```

这是配置类：

```
@Configuration
public class MarketServerConfiguration {

    @Bean
    public EquityService equityService() {
        return new EquityServiceImpl();
    }

    @Bean
    public EquityServiceEndPoint equityServiceEndPoint() {
        return new EquityServiceEndPoint();
    }

} 
```

这是 web.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
     version="2.4">

    <display-name>MarketService</display-name>

    <session-config>
        <session-timeout>60</session-timeout>
    </session-config>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextClass</param-name>
        <param-value>
            org.springframework.web.context.support.AnnotationConfigWebApplicationContext
        </param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.hello.market.server.MarketServerConfiguration</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>jaxws-servlet</servlet-name>
        <servlet-class>
            com.sun.xml.ws.transport.http.servlet.WSSpringServlet
        </servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>jaxws-servlet</servlet-name>
        <url-pattern>/service/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

我用 Jetty 运行整个过程。当我转到 http://localhost:8888/service 时，我收到一条消息“404 Not Found: Invalid Request”，在日志中我可以看到 JAX-WS servlet 已初始化，因为它打印

```
Jan 26, 2013 4:05:38 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate <init>
INFO: WSSERVLET14: JAX-WS servlet initializing 
```

但是，如果我访问 http://localhost:8888/service/EquityService，我会收到相同的“404 Not Found: Invalid request”消息，并且在日志中我可以看到没有发生任何事情。

最后，这是整个日志。据我所知，一切都很好，所有的豆子都连接好了……

```
>>> STARTING EMBEDDED JETTY SERVER, PRESS ANY KEY TO STOP
2013-01-26 16:05:32,993 INFO  org.mortbay.log.info:67 - jetty-6.1.25
2013-01-26 16:05:33,332 INFO  /.info:67 - Initializing Spring root WebApplicationContext
2013-01-26 16:05:33,332 INFO  org.springframework.web.context.ContextLoader.initWebApplicationContext:272 - Root WebApplicationContext: initialization started
2013-01-26 16:05:33,432 DEBUG org.springframework.web.context.support.StandardServletEnvironment.<init>:114 - Initializing new StandardServletEnvironment
2013-01-26 16:05:33,433 DEBUG org.springframework.web.context.support.StandardServletEnvironment.addLast:104 - Adding [servletConfigInitParams] PropertySource with lowest search precedence
2013-01-26 16:05:33,434 DEBUG org.springframework.web.context.support.StandardServletEnvironment.addLast:104 - Adding [servletContextInitParams] PropertySource with lowest search precedence
2013-01-26 16:05:33,443 DEBUG org.springframework.web.context.support.StandardServletEnvironment.addLast:104 - Adding [jndiProperties] PropertySource with lowest search precedence
2013-01-26 16:05:33,444 DEBUG org.springframework.web.context.support.StandardServletEnvironment.addLast:104 - Adding [systemProperties] PropertySource with lowest search precedence
2013-01-26 16:05:33,446 DEBUG org.springframework.web.context.support.StandardServletEnvironment.addLast:104 - Adding [systemEnvironment] PropertySource with lowest search precedence
2013-01-26 16:05:33,446 DEBUG org.springframework.web.context.support.StandardServletEnvironment.<init>:120 - Initialized StandardServletEnvironment with PropertySources [servletConfigInitParams,servletContextInitParams,jndiProperties,systemProperties,systemEnvironment]
2013-01-26 16:05:33,450 INFO  org.springframework.web.context.support.AnnotationConfigWebApplicationContext.prepareRefresh:500 - Refreshing Root WebApplicationContext: startup date [Sat Jan 26 16:05:33 CET 2013]; root of context hierarchy
2013-01-26 16:05:33,457 DEBUG org.springframework.web.context.support.StandardServletEnvironment.replace:161 - Replacing [servletContextInitParams] PropertySource with [servletContextInitParams]
2013-01-26 16:05:33,509 DEBUG org.springframework.core.env.StandardEnvironment.<init>:114 - Initializing new StandardEnvironment
2013-01-26 16:05:33,510 DEBUG org.springframework.core.env.StandardEnvironment.addLast:104 - Adding [systemProperties] PropertySource with lowest search precedence
2013-01-26 16:05:33,510 DEBUG org.springframework.core.env.StandardEnvironment.addLast:104 - Adding [systemEnvironment] PropertySource with lowest search precedence
2013-01-26 16:05:33,511 DEBUG org.springframework.core.env.StandardEnvironment.<init>:120 - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
2013-01-26 16:05:33,540 DEBUG org.springframework.core.env.StandardEnvironment.<init>:114 - Initializing new StandardEnvironment
2013-01-26 16:05:33,541 DEBUG org.springframework.core.env.StandardEnvironment.addLast:104 - Adding [systemProperties] PropertySource with lowest search precedence
2013-01-26 16:05:33,542 DEBUG org.springframework.core.env.StandardEnvironment.addLast:104 - Adding [systemEnvironment] PropertySource with lowest search precedence
2013-01-26 16:05:33,542 DEBUG org.springframework.core.env.StandardEnvironment.<init>:120 - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
2013-01-26 16:05:33,564 INFO  org.springframework.context.annotation.ClassPathBeanDefinitionScanner.registerDefaultFilters:202 - JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
2013-01-26 16:05:33,568 INFO  org.springframework.web.context.support.AnnotationConfigWebApplicationContext.loadBeanDefinitions:230 - Successfully resolved class for [com.hello.market.server.MarketServerConfiguration]
2013-01-26 16:05:33,589 DEBUG org.springframework.web.context.support.AnnotationConfigWebApplicationContext.obtainFreshBeanFactory:530 - Bean factory for Root WebApplicationContext: org.springframework.beans.factory.support.DefaultListableBeanFactory@18b3364: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,marketServerConfiguration]; root of factory hierarchy
2013-01-26 16:05:33,619 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2013-01-26 16:05:33,619 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2013-01-26 16:05:33,666 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references
2013-01-26 16:05:33,668 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2013-01-26 16:05:33,749 DEBUG org.springframework.web.context.support.StandardServletEnvironment.addLast:104 - Adding [class path resource [marketservice.properties]] PropertySource with lowest search precedence
2013-01-26 16:05:33,761 DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod:270 - Registering bean definition for @Bean method com.hello.market.server.MarketServerConfiguration.equityService()
2013-01-26 16:05:33,762 DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod:270 - Registering bean definition for @Bean method com.hello.market.server.MarketServerConfiguration.equityServiceEndPoint()
2013-01-26 16:05:33,908 DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer.enhance:111 - Successfully enhanced com.hello.market.server.MarketServerConfiguration; enhanced class name is: com.hello.market.server.MarketServerConfiguration$$EnhancerByCGLIB$$f3beb75c
2013-01-26 16:05:33,909 DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses:339 - Replacing bean definition 'marketServerConfiguration' existing class name 'com.hello.market.server.MarketServerConfiguration' with enhanced class name 'com.hello.market.server.MarketServerConfiguration$$EnhancerByCGLIB$$f3beb75c'
2013-01-26 16:05:33,916 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2013-01-26 16:05:33,916 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2013-01-26 16:05:33,917 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor' to allow for resolving potential circular references
2013-01-26 16:05:33,918 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2013-01-26 16:05:33,919 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
2013-01-26 16:05:33,919 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
2013-01-26 16:05:33,920 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor' to allow for resolving potential circular references
2013-01-26 16:05:33,920 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
2013-01-26 16:05:33,921 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2013-01-26 16:05:33,921 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2013-01-26 16:05:33,924 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor' to allow for resolving potential circular references
2013-01-26 16:05:33,924 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2013-01-26 16:05:33,925 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2013-01-26 16:05:33,925 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2013-01-26 16:05:33,925 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor' to allow for resolving potential circular references
2013-01-26 16:05:33,926 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2013-01-26 16:05:33,926 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
2013-01-26 16:05:33,926 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
2013-01-26 16:05:33,926 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0' to allow for resolving potential circular references
2013-01-26 16:05:33,927 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
2013-01-26 16:05:33,930 DEBUG org.springframework.web.context.support.AnnotationConfigWebApplicationContext.initMessageSource:799 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@10721b0]
2013-01-26 16:05:33,934 DEBUG org.springframework.web.context.support.AnnotationConfigWebApplicationContext.initApplicationEventMulticaster:823 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@13c7378]
2013-01-26 16:05:33,938 DEBUG org.springframework.ui.context.support.UiApplicationContextUtils.initThemeSource:85 - Unable to locate ThemeSource with name 'themeSource': using default [org.springframework.ui.context.support.ResourceBundleThemeSource@147c1db]
2013-01-26 16:05:33,940 INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons:581 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@18b3364: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,marketServerConfiguration,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,equityService,equityServiceEndPoint]; root of factory hierarchy
2013-01-26 16:05:33,940 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2013-01-26 16:05:33,940 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2013-01-26 16:05:33,940 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
2013-01-26 16:05:33,940 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2013-01-26 16:05:33,941 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2013-01-26 16:05:33,941 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'marketServerConfiguration'
2013-01-26 16:05:33,941 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'marketServerConfiguration'
2013-01-26 16:05:33,945 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'marketServerConfiguration' to allow for resolving potential circular references
2013-01-26 16:05:33,958 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'marketServerConfiguration'
2013-01-26 16:05:33,958 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
2013-01-26 16:05:33,959 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'equityService'
2013-01-26 16:05:33,959 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'equityService'
2013-01-26 16:05:33,965 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'marketServerConfiguration'
2013-01-26 16:05:34,012 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'equityService' to allow for resolving potential circular references
2013-01-26 16:05:34,015 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'equityService'
2013-01-26 16:05:34,015 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.getSingleton:217 - Creating shared instance of singleton bean 'equityServiceEndPoint'
2013-01-26 16:05:34,016 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:430 - Creating instance of bean 'equityServiceEndPoint'
2013-01-26 16:05:34,016 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'marketServerConfiguration'
2013-01-26 16:05:34,017 DEBUG org.springframework.web.context.support.SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext:89 - Current WebApplicationContext is not available for processing of EquityServiceEndPoint: Make sure this class gets constructed in a Spring web application. Proceeding without injection.
2013-01-26 16:05:34,024 DEBUG org.springframework.beans.factory.annotation.InjectionMetadata.<init>:60 - Found injected element on class [com.hello.market.server.service.soap.EquityServiceEndPoint]: AutowiredFieldElement for private com.hello.market.server.service.EquityService com.hello.market.server.service.soap.EquityServiceEndPoint.equityService
2013-01-26 16:05:34,024 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'equityServiceEndPoint' to allow for resolving potential circular references
2013-01-26 16:05:34,028 DEBUG org.springframework.beans.factory.annotation.InjectionMetadata.inject:85 - Processing injected method of bean 'equityServiceEndPoint': AutowiredFieldElement for private com.hello.market.server.service.EquityService com.hello.market.server.service.soap.EquityServiceEndPoint.equityService
2013-01-26 16:05:34,031 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'equityService'
2013-01-26 16:05:34,031 DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.registerDependentBeans:424 - Autowiring by type from bean name 'equityServiceEndPoint' to bean named 'equityService'
2013-01-26 16:05:34,034 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.createBean:458 - Finished creating instance of bean 'equityServiceEndPoint'
2013-01-26 16:05:34,037 DEBUG org.springframework.web.context.support.AnnotationConfigWebApplicationContext.initLifecycleProcessor:850 - Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@55a338]
2013-01-26 16:05:34,038 DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBean:245 - Returning cached instance of singleton bean 'lifecycleProcessor'
2013-01-26 16:05:34,039 DEBUG org.springframework.web.context.ContextLoader.initWebApplicationContext:296 - Published root WebApplicationContext as ServletContext attribute with name [org.springframework.web.context.WebApplicationContext.ROOT]
2013-01-26 16:05:34,039 INFO  org.springframework.web.context.ContextLoader.initWebApplicationContext:301 - Root WebApplicationContext: initialization completed in 707 ms
2013-01-26 16:05:34,104 INFO  org.mortbay.log.info:67 - Started SocketConnector@0.0.0.0:8888 
```

编辑：我发现如果我执行以下操作，Web 服务将起作用：

```
@Configuration
@ImportResource("classpath:/ws-context.xml")
public class MarketServerConfiguration { 
```

在 XML 文件中，我有：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ws="http://jax-ws.dev.java.net/spring/core"
       xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
       xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://jax-ws.dev.java.net/spring/core
    http://jax-ws.dev.java.net/spring/core.xsd
    http://jax-ws.dev.java.net/spring/servlet
    http://jax-ws.dev.java.net/spring/servlet.xsd">

    <!-- Temperature Web Service -->
    <wss:binding url="/service/EquityService">
        <wss:service>
            <ws:service bean="#equityServiceEndPoint">
            </ws:service>
        </wss:service>
    </wss:binding>

</beans> 
```

现在，如果我访问 localhost:8888/service/EquityService?wsdl，我将为我打印出 WSDL。

所以这是使它工作的一种方法，但是，我想这样做而不必使用那个额外的 XML 文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-23T02:31:11.933

我不知道我是否可以帮助你，但我的猜测是使用[这个库](https://jax-ws-commons.java.net/spring/)并创建你自己的配置类，比如@EnableJaxWs。命名空间 org.jvnet.jax_ws_commons.spring 可能是一个开始。

PS.：我将此答案的所有功劳都归功于用户（在葡萄牙语 stackoverflow 版本中）[@Chains](https://pt.stackoverflow.com/users/3180/chains)。[请用葡萄牙语查看](https://pt.stackoverflow.com/questions/31984/inje%C3%A7%C3%A3o-de-beans-spring-em-jax-ws-tomcat-7-webservices-n%C3%A3o-funciona-reto)我的问题，您可以使用谷歌翻译。

# ios - 条码扫描器应用程序 - 自定义 Shopsavvy

> ID：14538496
> 
> 赞同：0
> 
> 时间：2013-01-26T15:42:50.440
> 
> 标签：ios, barcode, barcode-scanner

我需要一个 iPhone 条形码扫描仪应用程序，它可以定制为与我自己的产品条形码数据库链接。有什么方法可以自定义此处列出的软件之一：http: [//gizmodo.com/5713768/the-best-barcode-scanner-apps](http://gizmodo.com/5713768/the-best-barcode-scanner-apps) 以便它可以扫描我们公司产品的条形码？

需要扫描的产品上的条形码已经打印在我们的机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:15:10.727

我发现了一些提供条形码 SDK 的网站

[http://shopsavvy.mobi/developers/](http://shopsavvy.mobi/developers/)

[http://www.quickmark.com.tw/en/basic/SDK.asp](http://www.quickmark.com.tw/en/basic/SDK.asp)

[https://github.com/netshade/Cocoa-Touch-Barcodes](https://github.com/netshade/Cocoa-Touch-Barcodes)

[http://redlaser.com/developers/](http://redlaser.com/developers/)

[http://www.scandit.com/barcode-scanner-sdk/](http://www.scandit.com/barcode-scanner-sdk/)

# math - 实体查看相机和对象

> ID：14538497
> 
> 赞同：0
> 
> 时间：2013-01-26T15:42:51.837
> 
> 标签：math, opengl, matrix

我目前正在扩展我的 3D 引擎以获得更好的实体系统，其中包括相机。这使我可以将相机放入也可能在另一个实体中的父实体中（等等......）。

> --Entity
> ----Entity
> ------相机

现在我想设置相机的外观方向，我正在使用以下方法执行此操作，该方法也用于设置实体的外观：

```
public void LookAt(Vector3 target, Vector3 up)
{
    Matrix4x4 oldValue = _Matrix;
    _Matrix = Matrix4x4.LookAt(_Position, target, up) * Matrix4x4.Scale(_Scale);
    Vector3 p, s;
    Quaternion r;
    Quaternion oldRotation = _Rotation;
    _Matrix.Decompose(out p, out s, out r);
    _Rotation = r;

    // Update dependency properties
    ForceUpdate(RotationDeclaration, _Rotation, oldRotation);
    ForceUpdate(MatrixDeclaration, _Matrix, oldValue);
} 
```

但是该代码仅适用于相机而不适用于其他实体，当将此方法用于其他实体时，对象正在其位置旋转（实体位于根节点，因此它没有父节点）。矩阵的查看方法如下所示：

```
public static Matrix4x4 LookAt(Vector3 position, Vector3 target, Vector3 up)
{
    // Calculate and normalize forward vector
    Vector3 forward = position - target;
    forward.Normalize();
    // Calculate and normalie side vector ( side = forward x up )
    Vector3 side = Vector3.Cross(up, forward);
    side.Normalize();
    // Recompute up as: up = side x forward
    up = Vector3.Cross(forward, side);
    up.Normalize();

    //------------------
    Matrix4x4 result = new Matrix4x4(false)
    {
        M11 = side.X,
        M21 = side.Y,
        M31 = side.Z,
        M41 = 0,

        M12 = up.X,
        M22 = up.Y,
        M32 = up.Z,
        M42 = 0,

        M13 = forward.X,
        M23 = forward.Y,
        M33 = forward.Z,
        M43 = 0,

        M14 = 0,
        M24 = 0,
        M34 = 0,
        M44 = 1

    };

    result.Multiply(Matrix4x4.Translation(-position.X, -position.Y, -position.Z));
    return result;
} 
```

decompose 方法还为位置变量返回错误的值`p`。那么为什么相机工作而实体不工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:50:00.570

前段时间我有一个类似的问题。问题是相机变换与其他变换不同，因为它们被否定了。我所做的是首先将相机眼睛、中心和向上变换到世界空间（通过其父模型矩阵变换这些向量）然后计算 lookAt() 。这就是它对我的工作方式。

# html - 扩展表头的第 1 列

> ID：14538501
> 
> 赞同：0
> 
> 时间：2013-01-26T15:43:25.877
> 
> 标签：html, css

我有一张桌子，里面有 3 列和一个头。像这样：

![在此处输入图像描述](../Images/4ef786fd43b84a9c0275eda1d28e27e9.png)

这是我的html代码：

```
 <table>
                <thead>
                    <tr>
                        <th class="right"><input type = "checkbox"></th>
                        <th class="left">Afficher: Tous blah blah</th>                            
                        <th class="right">Trier par: Numéro</th>
                    </tr>
                </thead>

                <tbody>
                    <tr><td class="right"><input type="checkbox"></td><td class="left">12/00119</td><td class="left">XXXX XXXX XXXX XXXXXXX XXXXXXXX XXXXXX</td></tr>
                    <tr><td class="right"><input type="checkbox"></td></td><td class="left">12/00120</td><td class="left">YYYYYY YYYYYY YYYYYYYY YYYYYYY YYYYYYY</td></tr>
                    ... 
```

如您所见，标题第二列中的文本比其下方行的内容宽得多。所以标题文本被换行。请注意，标题的第三列是右对齐。

我的问题：是否可以让标题文本（第 2 列）继续在同一行但不扩展表格主行的相应列。

这是我想要实现的目标：

![在此处输入图像描述](../Images/d195bb985f7c901126a521afaa99ad93.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:49:07.140

根据我对表格的理解，您尝试做的事情是不可能的。

现在，您可以拆分列，然后使用 colspan 重新加入它们，但将标题移出表格可能是一个更好的主意？

[http://jsfiddle.net/5fTDk/](http://jsfiddle.net/5fTDk/)

```
 <table>
            <thead>
                <tr>
                    <th class="right"><input type = "checkbox"></th>
                    <th colspan="2" class="left nobr">Afficher: Tous asdasd asd blah blah <div>Trier par: Numéro</div></th>                            

                </tr>
            </thead>

            <tbody>
                <tr>
                <td class="right"><input type="checkbox"></td>
                <td  class="left date">12/00119</td>
                <td  class="left content">XXXX XXXX XXXX XXXXXXX XXXXXXXX XXXXXX</td></tr>    ...
                </tbody>
                </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:55:37.367

```
<head>
  <style>
    /*rest styles here*/
    th.left {
      min-width:40px;
      max-width:60px;
    }
  </style>
</head>
<body>
<!-- rest code here -->
  <th class="left">Afficher: Tous blah blah</th> 
```

# elgg - 尝试自定义 Elgg 数据库查询

> ID：14538511
> 
> 赞同：1
> 
> 时间：2013-01-26T15:44:11.893
> 
> 标签：elgg

我一直在尝试自定义块用户插件以创建 2 路块，但是，在尝试调整事件管理器中的 lib/functions.php 时遇到了问题。

我基本上只是获取被阻止用户的列表，然后尝试在通过 $entities_options 查询数组返回事件列表之前放入“NOT EXISTS”子句。我对 Elgg 中的数据库查询方面非常陌生，因此可以使用一些帮助来解决这个问题。

```
// GET ARRAY OF BLOCKED USERS

$users = lee_framework_get_options(elgg_get_plugin_user_setting('blockuser_get', lee_loggedin_user_guid, 'blockuser'));
$blocked_user_array = array();
foreach($users as $user)

{
    $blocked_guid = get_user_by_username($user)->guid; 
    $blocked_user_array[] = $blocked_guid;

    $entities_options['owner_guids'] != $blocked_guid; // This is just to indicate what I am trying to achieve!

} 
```

我相信我需要使用页面其余部分中使用的 JOINS / WHERES 子句，但我很难找到并使用正确的字段名称。例如。

```
$entities_options['joins'][] = "JOIN " . elgg_get_config("dbprefix") . "entity_relationships e_ra ON e.guid = e_ra.guid_one";
$entities_options['wheres'][] = "(e_ra.guid_two IN (" . implode(", ", $friends_guids) . "))"; 
```

对此的任何建议将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:58:41.070

听起来您想使用 Elgg 关系对此进行建模。例如，UserA 阻止 UserB 将是一种关系。Elgg 有一个基于这些创建和查询的 API，这应该会使这更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:39:59.847

对于任何感兴趣的人，可以使用以下代码解决此问题，该代码放置在事件管理器的 functions.php 文件中：

```
// GET ARRAY OF BLOCKED USERS

$blocked_users = lee_framework_get_options(elgg_get_plugin_user_setting('blockuser_get', lee_loggedin_user_guid, 'blockuser'));
$blocked_user_array = array();

foreach($blocked_users as $user) {

$blocked_user_array[] = get_user_by_username($user)->guid;

$entities_options['joins'][] = "JOIN " . elgg_get_config("dbprefix") . "metadata md on e.guid = md.entity_guid";
$entities_options['wheres'][] = "md.owner_guid != " . get_user_by_username($user)->guid;

} 
```

# ruby - 将 Date.today 设置为使用 Time.zone？

> ID：14538512
> 
> 赞同：0
> 
> 时间：2013-01-26T15:44:18.453
> 
> 标签：ruby, date, activesupport

由于使用系统时间，假设已设置，`Date.today`让它返回与 相同的东西的最佳方法是什么？`Time.zone.now.to_date``Time.zone`

我知道我可以重写 Date 类，但不确定我是否缺少其他一些 Ruby 约定，因为我确定我不是第一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:47:25.157

您正在寻找[`Date.current`](http://api.rubyonrails.org/classes/Date.html#method-c-current)，它调用`Time.zone.today`if`Time.zone`已设置。这`Date`相当于[`Time.current`](http://api.rubyonrails.org/classes/Time.html#method-c-current)（也有[`DateTime.current`](http://api.rubyonrails.org/classes/DateTime.html#method-c-current)）。

还要记住，这些方法都不是在 Ruby 核心中，而是由 ActiveSupport 提供的。

# wcf - WCF 服务未采用正确的绑定

> ID：14538524
> 
> 赞同：1
> 
> 时间：2013-01-26T15:45:06.233
> 
> 标签：wcf, service, wcf-binding

我已经很抱歉一遍又一遍地问同样的问题。我们正在使用 WPF 客户端应用程序运行 WCF 服务，并希望通过 WCF 服务将大型数据从客户端应用程序传输到数据库，此设置没有什么特别之处。现在，当然，当尝试将数据（超过 16kb）作为字节数组上传时，我收到通常的“超出最大数组长度配额”，这让我不得不在服务器端以及我的应用程序上配置我的 web.config客户端的 .config 以包含所有内容的更高读者配额。

现在，由于这在stackoverflow上经常被视为安静，我做了很多研究，最后得出了通过以下方式跟踪我的服务绑定的结果

```
Trace.WriteLine(OperationContext.Current.EndpointDispatcher.ChannelDispatcher.BindingName) 
```

这给了我[http://tempuri.org/:BasicHttpBinding](http://tempuri.org/:BasicHttpBinding)（尽管配置了其他命名空间）并且提出了我的自定义绑定是否应用的问题。请您看一下我的 web.config 的部分代码（服务端）

```
<system.serviceModel>

<behaviors>

  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <dataContractSerializer maxItemsInObjectGraph="2147483646" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IDataController" closeTimeout="00:05:00"
      openTimeout="00:05:00" receiveTimeout="00:05:00" sendTimeout="00:05:00"
      maxBufferPoolSize="500000000" maxBufferSize="500000000" maxReceivedMessageSize="500000000" messageEncoding="Mtom">
      <readerQuotas maxDepth="500000000" maxStringContentLength="500000000"
        maxArrayLength="500000000" maxBytesPerRead="500000000" maxNameTableCharCount="500000000" />
    </binding>

    </basicHttpBinding>
</bindings>

<services>
  <service name="DataController">
    <endpoint address="http://vs0092:81/DataController/DataController.svc"  
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IDataController"

              contract="SMS.RC.IDataController" />
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />

  </service>
</services>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

</system.serviceModel> 
```

现在客户端 app.config 看起来像这样

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IDataController"
               openTimeout="00:05:00"
               sendTimeout="00:05:00"
               receiveTimeout="00:05:00"
               closeTimeout="00:05:00"
               maxBufferPoolSize="500000000"
               maxReceivedMessageSize="500000000"
               maxBufferSize="500000000">
        <readerQuotas maxDepth="500000000"
                      maxStringContentLength="500000000"
                      maxArrayLength="500000000"
                      maxBytesPerRead="500000000"
                      maxNameTableCharCount="500000000" />

      </binding>
     </basicHttpBinding>
     </bindings>
    <client>
        <endpoint address="http://vs0092:81/DataController/DataController.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDataController"
            contract="FBCDataController.IDataController" name="BasicHttpBinding_IDataController" />
    </client>
</system.serviceModel> 
```

那么你看到问题了吗？我没有，而且我在解决这个问题上确实付出了很多努力，但我想此时我的 WCF 知道如何很小。为什么服务的绑定没有应用？？这可能是实施良好服务行为的问题吗？有没有办法查找服务的正确名称？（我读到的必须是包含命名空间的全名）

非常感谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:32:28.793

我没有看到您的配置有任何明显的问题，但这里有一些提示：

您可能希望使用 WCF 配置工具查看/更改您的配置 - 它列出了所有可用的设置，而不仅仅是默认情况下在配置文件中的设置。它在工具菜单上。我发现如果我先从那里打开它，然后立即关闭它，我可以右键单击解决方案资源管理器中的配置以针对该特定文件运行它。不知道为什么我需要额外的步骤 - 你的里程可能会有所不同。

在 WCF 配置工具中，您还可以启用跟踪和日志记录 - WCF 跟踪和日志通常比异常消息本身具有更好的关于发生错误时的信息。

最后，对于这么大的消息，您可能需要考虑使用流模型。寻找一个有效的 WCF 流示例并从那里开始。

# javascript - 将 html5 画布保存为图像

> ID：14538536
> 
> 赞同：1
> 
> 时间：2013-01-26T15:46:15.717
> 
> 标签：javascript, html, html5-canvas

我正在尝试在具有背景图像的画布中获取 facebook 用户的图片。现在我想将我的画布默认保存为图像或单击按钮。我进行了深入的研究，我发现它可以通过使用它来完成

```
var myImage = canvas1.toDataURL("image/png");
imageElement.src = myImage; 
```

但我无法弄清楚如何让它与我的代码一起工作。我已经尝试了所有我能想到的可能性。它不工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:01:03.637

从另一个域加载图像后，您不能在画布元素上使用 toDataUrl。这是[HTML5 规范指定的安全问题](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#security-with-canvas-elements)

解决此问题的一种方法是，如果您可以控制***提供***图像的服务器，则可以使用`access-control-allow-origin`标头为它们提供服务。您可以在此处阅读更多信息：http: [//www.w3.org/TR/cors/#use-cases](http://www.w3.org/TR/cors/#use-cases)

另一种选择是代理来自您的服务器的图像，从而代理您的域。而不是从给定的 url 询问图像，您的 js 代码将调用服务器上的脚本，该脚本将获取图像并将其提供给您。

在您的情况下，您正试图从 facebook 获取图像，这些图像显然不会发送这些标题，因为这将是一个巨大的安全问题。您将不得不求助于服务器端代理解决方案。

# amazon-ec2 - Amazon elastic ip setup

> ID：14538539
> 
> 赞同：1
> 
> 时间：2013-01-26T15:46:20.177
> 
> 标签：amazon-ec2, ip, amazon, amazon-elastic-beanstalk

I have a web application on an amazon ec2 instance with a reachable address in the form xxxx.elasticbeanstalk.com. I am trying to link my application to a different domain that I own. I have created an elastic IP and linked in to my instance. So now i have a new IP address and a public dns address. However when i try to go to either of these address in my browser, nothing happens. Am I supposed to wait a preset amount of time for the new IP to propagate? Or am i do something wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:56:22.977

Elastic Beanstalk routes all your traffic through a load balancer. To take advantage of this, you should point your domain to the load balancer with a CNAME record. The security group of the instances are setup so that the load balancer's traffic is let through, but direct traffic is not. If you need to access one of your instances directly, you will have to open up a port (80, 443, etc) in the security group that Beanstalk created.

# javascript - java7 / Rhino 中已编译与解释的 javascript 的性能

> ID：14538541
> 
> 赞同：10
> 
> 时间：2013-01-26T15:46:25.120
> 
> 标签：javascript, java-7, rhino

我很快遇到了 Java7 中 Rhino javascript 引擎的性能问题 - 我的脚本（解析和编译文本）在 Chrome 中的运行速度比 Java7 Rhino 脚本引擎中的脚本快 50-100 倍。

我试图找到改善情况的方法，发现 Rhino 支持脚本编译。我试着用我的脚本来做，实际上没有看到任何改进。最后 - 我最终得到了一个虚拟的简短测试套件，我没有看到编译版本和解释版本之间的性能差异。请让我知道我做错了什么。

注意：一些消息来源提到 Rhino 引擎运行编译脚本比直接用 Java 编写的“相同”代码慢大约 1.6。不确定此示例中使用的“脚本编译”是否与此处假定的相同。

下面是测试java类，我在我的机器上从中得到了示例结果......

**结果**

```
     通过 com.sun.script.javascript.RhinoScriptEngine@c50443 运行 ...
      时间：886ms，字符：38890，总和：2046720
      时间：760ms，字符：38890，总和：2046720
      时间：725ms，字符：38890，总和：2046720
      时间：765ms，字符：38890，总和：2046720
      时间：742ms，字符：38890，总和：2046720
       ... 3918 毫秒

     通过 com.sun.script.javascript.RhinoCompiledScript@b5c292 @ com.sun.script.javascript.RhinoScriptEngine@f92ab0 运行 ...
      时间：813ms，字符：38890，总和：2046720
      时间：805ms，字符：38890，总和：2046720
      时间：812ms，字符：38890，总和：2046720
      时间：834ms，字符：38890，总和：2046720
      时间：807ms，字符：38890，总和：2046720
       ... 4101 毫秒

```

**Anon-Micro 发表评论后**更新：**** 

 **在将测试类中 JavaScript eval() 和 compile() 的调用包装到 ...

```
import sun.org.mozilla.javascript.internal.Context;
try {
    Context cx = Context.enter();

    cx.setOptimizationLevel(9);
    cx.setLanguageVersion(170);

    ...
}
finally {
    Context.exit();
} 
```

结果发生了显着变化 - 从平均 1.8（在新版本的测试类中）秒到 ~150 毫秒。然而，从通过加载的 ScriptEngine 提取的 doTest() 函数的实例`(CompiledScript = Compilable.compile()).eval(Bindings) -> Bindings.get("doTest")`仍然表示它是`sun.org.mozilla.javascript.internal.InterpretedFunction`，并且它的性能比从预编译的字节码（由 Rhino 1.7r4）加载的 JS 版本稍差（大约 10％） - 所以我仍然不确定幕后实际发生了什么。

```
1800ms - ScriptEngine.eval(), Optimization Level = default(-1?)
1758ms - CompiledScript, Optimization Level = default(-1?)
 165ms - ScriptEngine.eval(), Optimization Level = 9
 132ms - CompiledScript, Optimization Level = 9
 116ms - compiled by Rhino 1.7r4 into bytecode class 
```

PS：内部 sun 包中的 sun.org.mozilla.javascript.internal.Context 对我来说似乎是一个奇怪的设计 - 'internal' 表示这个类被假定不被开发人员使用，因此没有“认证”的方式来在 Java 7 中操作 JS 评估器的优化级别。

**测试类（已更新，doTestCompiled 是从外部 *.class 加载的）**

```
import javax.script.Bindings;
import javax.script.Compilable;
import javax.script.CompiledScript;
import javax.script.Invocable;
import javax.script.ScriptContext;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.SimpleScriptContext;
import sun.org.mozilla.javascript.internal.Context;
import sun.org.mozilla.javascript.internal.Scriptable;
import sun.org.mozilla.javascript.internal.Function;

public class RhinoPerfTest4 {

    final static ScriptEngineManager scm = new ScriptEngineManager();
    final static String TEST_SCRIPT1 =
            "function doTest() {\n"
            + "    var scale = 5000, i, a = [], str, l, sum = 0,\n"
            + "        start = (new Date()).getTime(), end;\n"
            + "    for( i = 0; i < scale; i++ )\n"
            + "        a.push(\"\" + i);\n"
            + "    str = a.join(\"\");\n"
            + "    l = str.length;\n"
            + "    for( i = 0; i < l; i++ ) {\n"
            + "        var c = str.charCodeAt(i);\n"
            + "        if( c > 0)\n"
            + "            sum += c;\n"
            + "    }\n"
            + "    end = (new Date()).getTime();\n"
            + "\n"
            + "    // print(\" time: \" + (end - start) "
            + "          + \"ms, chars: \" + l "
            + "          + \", sum: \" + sum + \"\\n\");\n"
            + "}\n";
    final static String TEST_SCRIPT2 =
            "function doTest() {\n"
            + "    var a = [], i;\n"
            + "    for( i = 0; i < 500; i++ ) a.push(1);\n"
            + "}\n";

    static class TestSet {

        public int nCycles;
        public String script;

        public TestSet(int nCycles, String script) {
            this.nCycles = nCycles;
            this.script = script;
        }
    }
    static TestSet set1 = new TestSet(5, TEST_SCRIPT1);
    static TestSet set2 = new TestSet(500, TEST_SCRIPT2);

    public static void main(String[] args) throws Exception {
        ScriptEngine se;
        int i;
        long ts, te;
        TestSet set = set1;
        Object noArgs[] = new Object[]{};

        try {
            org.mozilla.javascript.Context mctx = org.mozilla.javascript.Context.enter();

            se = scm.getEngineByExtension("js");
            doTestCompiled doTestPreCompiled = new doTestCompiled();
            org.mozilla.javascript.Scriptable scope = mctx.initStandardObjects();

            doTestPreCompiled.call(mctx, scope, scope, null);
            org.mozilla.javascript.Function doTest = 
                    (org.mozilla.javascript.Function)scope.get("doTest", null);

            for( int nHotSpot = 0; nHotSpot < 5; nHotSpot++ ) {
                if( nHotSpot > 0 )
                    Thread.sleep(500);

                ts = System.currentTimeMillis();
                for( i = 0; i < set.nCycles; i++ ) {
                    doTest.call(mctx, scope, null, null);
                }
                te = System.currentTimeMillis();
                System.out.println("  " + nHotSpot + ": " + (te - ts) + "ms");
            }
        }
        finally {
            org.mozilla.javascript.Context.exit();
        }

        for( int nOpt = 0; nOpt < 2; nOpt++ ) {
            if( nOpt > 0 )
                Thread.sleep(500);

            Context cx = null;

            try {
                System.out.println("Cycle: " + nOpt);

                cx = Context.enter();
                if( nOpt > 0 ) {
                    System.out.println("OptLevel: " + 9);
                    cx.setOptimizationLevel(9);
                    cx.setLanguageVersion(170);
                }

                se = scm.getEngineByExtension("js");
                se.eval(set.script);
                System.out.println("\nRunning via " + se + " ... ");

                Invocable invocable = (Invocable) se;

                for( int nHotSpot = 0; nHotSpot < 5; nHotSpot++ ) {
                    if( nHotSpot > 0 )
                        Thread.sleep(500);

                    ts = System.currentTimeMillis();
                    for( i = 0; i < set.nCycles; i++ ) {
                        invocable.invokeFunction("doTest", noArgs);
                    }
                    te = System.currentTimeMillis();
                    System.out.println("  " + nHotSpot + ": " + (te - ts) + "ms");
                }

                se = scm.getEngineByExtension("js");
                Compilable cse = (Compilable) se;
                CompiledScript cs = cse.compile(set.script/* + "(doTest())"*/);
                Scriptable scope = cx.initStandardObjects();

                ScriptContext scriptContext = new SimpleScriptContext();
                Bindings vars = scriptContext.getBindings(ScriptContext.ENGINE_SCOPE);

                cs.eval(vars);

                Object odoTest = scriptContext.getAttribute("doTest");
                Function doTest = (Function) vars.get("doTest");

                System.out.println("\nRunning via " + cs + " @ " + se + " ... ");

                for( int nHotSpot = 0; nHotSpot < 5; nHotSpot++ ) {
                    if( nHotSpot > 0 )
                        Thread.sleep(500);

                    ts = System.currentTimeMillis();
                    for( i = 0; i < set.nCycles; i++ ) {
                        doTest.call(cx, scope, null, noArgs);
                    }
                    te = System.currentTimeMillis();
                    System.out.println("  " + nHotSpot + ": " + (te - ts) + "ms");
                }

            }
            finally {
                if( cx != null )
                    Context.exit();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T21:13:01.780

Rhino 引擎实际上能够将脚本编译为“进程内”字节码，因此您无需先运行该工具来生成 .class 文件。您只需要设置“优化级别”，引擎将在执行之前自动预编译脚本。覆盖优化级别的一种方法是使用 VM 参数 -Drhino.opt.level。将此设置为 0 到 9 之间的任何值并运行您的原始测试程序，您应该会看到更好的性能。

顺便说一句，这与您提到的编译工具使用的优化设置相同。[https://developer.mozilla.org/en-US/docs/Rhino/Optimization](https://developer.mozilla.org/en-US/docs/Rhino/Optimization)

要完全控制程序中的优化级别和 javascript 版本，您可以执行以下操作。但是，您会丢失 RhinoScriptEngine 类（它只是一个环境包装器，而不是 javascript 引擎）提供的一些修饰。一种这样的修剪是实际由所述包装器注入的“打印”功能。出于测试目的，您可以将 'print' 替换为 'java.lang.System.out.print'。

```
 int optimisationLevel = 3;
    int languageVersion = Context.VERSION_1_7;

    try {
        Context cx = Context.enter();
        cx.setOptimizationLevel(optimisationLevel);
        cx.setLanguageVersion(languageVersion);

        ImporterTopLevel scope = new ImporterTopLevel(cx);
        cx.evaluateString(scope, TEST_SCRIPT1, "doTest", 1, null);

        for (int i = 0; i < 10; i++)
            cx.evaluateString(scope, "doTest();", "", 1, null);

    } finally {
        Context.exit();
    } 
```

您提到了以下内容：

> 注意：一些消息来源提到 Rhino 引擎运行编译脚本比直接用 Java 编写的“相同”代码慢大约 1.6。不确定此示例中使用的“脚本编译”是否与此处假定的相同。

我会对报告这一点的源感兴趣，我在 java 中的斐波那契函数需要大约 1/30 的时间作为编译的 js 实现。但也许我错过了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:52:42.267

我发现至少对于简单的程序来说，编译代码所花费的额外时间可能会掩盖运行它的时间。然后不要忘记，HotSpot 需要一点时间才能将 Java 字节码编译为本机代码。

我认为，如果您使用运行时间更长且代码更复杂的基准测试（而不是执行大量库调用的相对简单的程序），编译后的版本最终会胜出，但性能仍然无法与 V8 相提并论。

Oracle 正在为 Java 8 开发一个更新的 EcmaScript 引擎，该引擎应该会更快，但在可用之前还需要一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T21:32:55.717

看起来我发现了问题所在 - “我的”代码中使用的编译（实际上取自互联网示例）与“已编译”无关。

最后我得到了这个链接 - [https://developer.mozilla.org/en-US/docs/Rhino_JavaScript_Compiler](https://developer.mozilla.org/en-US/docs/Rhino_JavaScript_Compiler) - Rhino 的工具将 .js 编译成 .class。运行从.class的字节码编译的相同JS代码，我得到了以下结果：

```
 time: 202ms, chars: 38890, sum: 2046720
 time: 92ms, chars: 38890, sum: 2046720
 time: 73ms, chars: 38890, sum: 2046720
 ...
 time: 71ms, chars: 38890, sum: 2046720
 time: 66ms, chars: 38890, sum: 2046720
 time: 64ms, chars: 38890, sum: 2046720
  ... 1143ms (per 15 iterations)

--- sleep 5 secs ---

 time: 64ms, chars: 38890, sum: 2046720
 time: 52ms, chars: 38890, sum: 2046720
 time: 64ms, chars: 38890, sum: 2046720
 ...
 time: 62ms, chars: 38890, sum: 2046720
 time: 67ms, chars: 38890, sum: 2046720
 time: 67ms, chars: 38890, sum: 2046720
  ... 962ms

--- sleep 5 secs ---

 time: 66ms, chars: 38890, sum: 2046720
 time: 56ms, chars: 38890, sum: 2046720
 time: 59ms, chars: 38890, sum: 2046720
 ...
 time: 69ms, chars: 38890, sum: 2046720
 time: 67ms, chars: 38890, sum: 2046720
 time: 59ms, chars: 38890, sum: 2046720
  ... 966ms 
```

（这大约快 10 倍）

这是 Chrome 的结果：

```
 time: 5ms, chars: 38890, sum: 2046720
 time: 3ms, chars: 38890, sum: 2046720
 time: 1ms, chars: 38890, sum: 2046720
 time: 1ms, chars: 38890, sum: 2046720
 time: 1ms, chars: 38890, sum: 2046720
 time: 5ms, chars: 38890, sum: 2046720
 time: 0ms, chars: 38890, sum: 2046720
 time: 1ms, chars: 38890, sum: 2046720
 time: 1ms, chars: 38890, sum: 2046720
 time: 1ms, chars: 38890, sum: 2046720 
```

（平均为 3-4 毫秒，比编译的 Java/Rhino 快约 15 倍，比解释的 Java/Rhino 快约 200 倍）。**

# javascript - 隐藏/显示边框时保持文本输入的固定位置

> ID：14538543
> 
> 赞同：1
> 
> 时间：2013-01-26T15:46:43.033
> 
> 标签：javascript, jquery, jquery-ui

我希望我的输入文本字段在鼠标悬停之前看起来像普通的旧文本。

我用这段代码完成了这个（也可以在[jsbin](http://jsbin.com/ebidot/2/edit)上找到）

```
layerTitleJq.hover( function( evt ) {
      layerTitleJq.css( 'border', "" );
   },
   function( evt ){ 
      layerTitleJq.css( 'border', 0 );
}) 
```

美学问题是，当您悬停时，文本字段中的文本会在边框出现时被推过一两个像素。想知道如何在悬停期间 将该文本保持*在完全相同的位置。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:52:41.950

`border-color`您可以改为切换：

```
layerTitleJq.hover( function( evt ) {
      $(this).removeAttr('style');
   },
   function( evt ){ 
      $(this).css( 'border-color', 'transparent' ); // invisible border
}) 
```

（[演示](http://jsfiddle.net/637C4)）

但更好的方法是[切换](http://api.jquery.com/toggleClass/)一个类。当类存在时，使边框可见。看到[这个](http://jsfiddle.net/637C4/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:47:57.980

尝试使用

```
box-sizing:border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:19:16.723

您可以通过在没有边框时添加填充来解决这个问题，当有边框时，删除填充。

```
layerTitleJq.hover( function( evt ) {
    layerTitleJq.css( 'border', "" ).css( 'padding', "0px" );
}, function( evt ){
    layerTitleJq.css( 'border', 0 ).css( 'padding', "2px" );
}) 
```

顺便说一句，你可以用 CSS 来做这一切......

```
.ui-corner-all {
  padding: 2px;
  border: 0;
}

.ui-corner-all:hover {
  padding: 0px;
  border: 2px solid #999;
} 
```

# html - CSS 工具提示不会拉伸，只能有固定宽度

> ID：14538551
> 
> 赞同：16
> 
> 时间：2013-01-26T15:47:25.203
> 
> 标签：html, css, position, tooltip

我有工具提示，其内容可以很长也可以很短。我不想拥有 3 个单词的内容并拥有一个巨大的工具提示，但我也不想要 20 个单词并将它们全部压缩成多行。使用此当前设置，无论如何它都会停留在最小宽度。

CSS：

```
.tooltip {
  outline: none; position: relative;
  min-width: 75px; max-width: 255px;
}

.tooltip .tool-content {
  opacity: 0; visibility: hidden;
  position: absolute;
}

.tooltip:hover .tool-content {
  background: #999; border: 1px solid #555; color: #000000;

  /* general styling */
  position: absolute; left: 1.3em; top: 2.6em; z-index: 99;
  visibility: visible; opacity: 1;
} 
```

的HTML：

```
<div class='tooltip'>
(content to hover)
    <span class='tool-content'>
        (tooltip content)
    </span>
</div> 
```

让我烦恼的是我可以起飞位置：相对并且它按预期工作！然而我找不到任何解决方法，相对定位是 CSS 悬停的关键（或似乎是？）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-06-30T13:53:05.583

两件事，第一，你看到的例子有`width: 120px;`控制宽度。将其更改为您需要修复的任何内容。

或者，如果您不想固定宽度，只需添加`white-space: nowrap;`文本以一行显示而不换行。

更新：您可以使用`display: block;`工具提示使最大宽度达到父宽度，请参见下面的示例

```
<!DOCTYPE html>
<html>
<style>
  .tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black;
  }

  .tooltip .tooltiptext {
    visibility: hidden;
    background-color: black;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;
    /* Position the tooltip */
    position: absolute;
    display: block;
    z-index: 1;
  }

  .tooltip:hover .tooltiptext {
    visibility: visible;
  }
</style>

<body style="text-align:center;">

  <p>Move the mouse over the text below:</p>

  <div class="tooltip">Hover over me
    <span class="tooltiptext">Tooltip text</span>
  </div>
  <br><br>
  <div class="tooltip">Hover over me Hover over me
    <span class="tooltiptext">Tooltip text very very very very very very very very long</span>
  </div>
  <br><br>
  <div class="tooltip">Hover over me Hover over me 3
    <span class="tooltiptext">Tooltip text very very very very very very very very long very very very very very very very very long very very very very very very very very long very very very very very very very very long very very very very very very very very long very very very very very very very very long very very very very very very very very long</span>
  </div>
</body>

</html>
```

选项 2，使用带有自定义悬停效果的引导工具提示，使其非常简单：

```
$(document).ready(function() {
  var originalLeave = $.fn.tooltip.Constructor.prototype.leave;
  $.fn.tooltip.Constructor.prototype.leave = function(obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)
    var container, timeout;

    originalLeave.call(this, obj);

    if (obj.currentTarget) {
      container = $(obj.currentTarget).siblings('.tooltip')
      timeout = self.timeout;
      container.one('mouseenter', function() {
        clearTimeout(timeout);
        container.one('mouseleave', function() {
          $.fn.tooltip.Constructor.prototype.leave.call(self, self);
        });
      })
    }
  };

  //init all tooltip
  $('body').tooltip({
    selector: '[data-toggle=tooltip]',
    trigger: 'hover',
    delay: {
      hide: 50
    }
  });
});
```

```
.centered {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 50px;
}

.tooltip-inner {
  max-width: 500px !important;
}
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<ul class="list-inline centered">
  <li><a href="#" data-toggle="tooltip" data-placement="left" title="Hooray!">Left</a></li>
  <li><a href="#" data-toggle="tooltip" data-placement="right" title="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.">Right</a></li>
</ul>
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2020-07-11T19:19:19.443

也许......

```
width: max-content; 
max-width: 200px; (as much as you want) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T15:52:48.430

```
.tooltip {
  outline: none;
  position: relative;
  width: 75px;
  min-width: 75px;
  max-width: 255px;
}

.tooltip .tool-content {
  margin:0;
  padding:0;
  opacity: 0;
  visibility: hidden;
  position: absolute;
  width:100%;
  height:100%;
} 
```

您可以将其删除`span`并替换为块级元素（如`div`style `display:block`）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-24T17:31:25.893

如果单行工具提示可以满足您的需求，您也可以添加
`white-space: pre`到`.tool-content`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-19T08:19:52.587

您可以在元素或其内部 div 中添加一个`max-width`并放入`word-break: break-all`或放入您的 css 中。`word-wrap: break-word`

# ruby-on-rails - 搜索在开发中不区分大小写，但在生产环境中敏感

> ID：14538554
> 
> 赞同：1
> 
> 时间：2013-01-26T15:47:39.520
> 
> 标签：ruby-on-rails, heroku, production-environment, case-insensitive, dev-to-production

我有一个搜索栏，在开发环境中的 localhost 上运行时执行不区分大小写的搜索，但是当我推送到 Heroku 并在生产环境中运行时，搜索是区分大小写的。不知道什么会导致这种行为。

从 app\views\layouts\application.html.erb：

```
<form class="navbar-search pull-right">
    <input type="text" class="search-query span3" placeholder="Find Some Beers" name="search">
</form> 
```

从 app\controllers\ratings_controller.rb：

```
def search
    fff = Rating.search(params[:search])
    @ratings_by_name = fff.paginate(:order => 'name ASC', :page => params[:page], :per_page =>10)
    @ratings_by_score = fff.paginate(:order => 'score DESC', :page => params[:page], :per_page =>10)
end 
```

从 app\models\rating.rb：

```
def self.search(query)
    words = query.to_s.strip.split
    words.inject(scoped) do |combined_scope, word|
    combined_scope.where("name LIKE ?", "%#{word}%")
    end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:50:38.997

Heroku 使用 postgres，请确保您也在开发中使用 postgres。

使用 ILIKE postgres 不区分大小写的 LIKE 版本

```
combined_scope.where("name ILIKE ?", "%#{word}%") 
```

[http://www.postgresql.org/docs/9.1/static/functions-matching.html](http://www.postgresql.org/docs/9.1/static/functions-matching.html)

> 根据活动区域设置，可以使用关键字 ILIKE 代替 LIKE 以使匹配不区分大小写。这不在 SQL 标准中，而是 PostgreSQL 扩展。

# objective-c - UIActivityIndi catorView 不会停止

> ID：14538560
> 
> 赞同：4
> 
> 时间：2013-01-26T15:48:06.767
> 
> 标签：objective-c, uiactivityindicatorview

我在 iOS 中使用一些 JSON 解析，我想添加一个微调器，这很有效，但我无法停止微调器，我想了解原因。

`[spinner stopAnimating]`在异步块中被调用，我相信这就是问题所在，可能是因为我无法在块中的微调器上调用该方法？我已经记录了微调器 obj，输出为：

```
<UIActivityIndicatorView: 0x76905f0; frame = (150 230; 20 20); layer = <CALayer: 0x768ffb0>> 
```

也许有人可以让我理解如何在 Objective-c 中处理这种异步方法。我是一个绝对的初学者。

编码：

```
- (void)viewDidLoad{
  [super viewDidLoad];

  UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
  spinner.center = CGPointMake(160, 240);
  [self.view addSubview:spinner];
  [spinner startAnimating];

  dispatch_async(kBgQueue, ^{

    NSData* data = [NSData dataWithContentsOfURL:
                    kLatestKivaLoansURL];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data waitUntilDone:YES];
     NSLog(@"loans: %@", spinner);
     [spinner stopAnimating];
  });

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T16:02:27.067

永远永远永远（永远！）在后台线程上与界面交谈。您想要的是跳回主线程-正如您正确怀疑的那样。这很容易：

```
[spinner startAnimating];
dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL:
                    kLatestKivaLoansURL];
    // ... do other stuff in the background
    dispatch_async(dispatch_get_main_queue(), ^{
        [spinner stopAnimating];
    });
}); 
```

但是，您使用`performSelectorOnMainThread:withObject:waitUntilDone:`with`waitUntilDone:YES`也是错误的（或者至少是一种非常难闻的气味），因为您不应该阻塞您的后台线程。只需在后台线程上调用一个方法（除非它触及界面），当结果返回时，它会返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:55:52.687

在 stopAnimating 之后也调用方法 removeFromSuperview

```
 [spinner stopAnimating];
    [spinner removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:13:58.567

UIKit 调用只能在主线程中进行。试试这个：

```
dispatch_async(kBgQueue, ^{

     NSData* data = [NSData dataWithContentsOfURL:kLatestKivaLoansURL];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                       withObject:data waitUntilDone:YES];
     NSLog(@"loans: %@", spinner);

     dispatch_async(dispatch_get_main_queue(), ^{

         [spinner stopAnimating];

     });
}); 
```

# ios - 如何 NSFileHandle 从另一个应用程序获取的文件

> ID：14538561
> 
> 赞同：0
> 
> 时间：2013-01-26T15:48:09.040
> 
> 标签：ios, file-io, nsfilehandle

我目前正在尝试从另一个应用程序实现打开文件。当我使用第三方应用程序（如文档）并使用我的应用程序打开文件时，我似乎无法使用 NSFileHandle 打开它。

调用 AppDelegates 方法后：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

我得到一个这样的网址：

```
file://localhost/private/var/mobile/Applications/E9F2998C-1ED2-4955-9681-30C518FBD1A5/Documents/Inbox/text%20source%20%C3%A0%20ID-7.docx 
```

我试图手动删除`file://localhost/private`以看起来像 NSBunble 路径，但没有运气......

有没有人有一种简单的方法来使用 NSFileHandle 打开从该委托方法获得的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:13:13.817

要将文件`NSURL`值转换为需要文件路径的方法和函数可以使用的实际路径名，请调用该`path`方法。

```
if ([url isFileURL]) {
    NSString *filePath = [url path];
    // use filePath as needed
} 
```

# umbraco - Umbraco 获取媒体网址

> ID：14538564
> 
> 赞同：1
> 
> 时间：2013-01-26T15:48:31.613
> 
> 标签：umbraco

我有一个带有媒体选择器属性的文档类型。该属性具有别名“bannerimage”。现在我试图在我的模板中获取图像 url。

我正在使用 GetMediaURL 方法来获取图像 url，但我得到的只是一个错误。痕迹给了我`The type or namespace name 'GetMediaUrl' does not exist in the namespace 'Umbraco' (are you missing an assembly reference?)`

这是我的代码

```
<umbraco:Macro runat="server" language="cshtml">
<img src='@Umbraco.GetMediaUrl(DynamicModel.bannerimage, "uploadedFile")' alt="Banner"/>
</umbraco:Macro> 
```

Umbraco 版本是 4.11.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:53:16.290

如果我没记错的话，GetMediaUrl 是一个 Umbraco5 方法。因此，我认为它不存在于 4.11 dll 中。

不过，umbraco.library.GetMedia 或 Library.MediaById 应该可以访问。

# android - 在警报管理器中显示通知

> ID：14538569
> 
> 赞同：1
> 
> 时间：2013-01-26T15:48:55.047
> 
> 标签：android, alarm, notificationmanager

好的，我已经设置了一个警报管理器，每 10 秒激活一次。我用吐司测试了它，效果很好，但我希望显示一个通知。我无法编译这段代码。所有错误都发生在 //NOTIFICATION 行之后直到 wl.release();

错误：

```
The constructor NotificationCompat.Builder(Alarm) is undefined
The constructor Intent(Alarm, Class<StatusOfChild>) is undefined
The method create(Context) in the type TaskStackBuilder is not applicable for the arguments (Alarm)
The method getSystemService(String) is undefined for the type Alarm 
```

代码：

```
package com.sjjgames.abortionappnoads;

import android.app.AlarmManager;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.TaskStackBuilder;
import android.widget.Toast;

    public class Alarm extends BroadcastReceiver
    {    
         @Override
         public void onReceive(Context context, Intent intent) 
         {   
             PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
             PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
             wl.acquire();

                // Put here YOUR code.
                //NOTIFICATION
                NotificationCompat.Builder mBuilder =
                        new NotificationCompat.Builder(this)
                        .setSmallIcon(R.drawable.icon)
                        .setContentTitle("My notification")
                        .setContentText("Hello World!");
                Intent resultIntent = new Intent(this, StatusOfChild.class);
                TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
                stackBuilder.addParentStack(StatusOfChild.class);
                stackBuilder.addNextIntent(resultIntent);
                PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);
                mBuilder.setContentIntent(resultPendingIntent);
                NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
                mNotificationManager.notify(9011, mBuilder.build());

             wl.release();
         }

     public void SetAlarm(Context context)
     {
         AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, Alarm.class);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 10000, pi); // Millisec * Second * Minute
     }

     public void CancelAlarm(Context context)
     {
         Intent intent = new Intent(context, Alarm.class);
         PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
         AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
         alarmManager.cancel(sender);
     }

 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T15:51:50.117

使用`context` 代替`this`所有方法。

像这样。

```
 NotificationCompat.Builder mBuilder =
                            new NotificationCompat.Builder(context)
                            .setSmallIcon(R.drawable.icon)
                            .setContentTitle("My notification")
                            .setContentText("Hello World!");
                    Intent resultIntent = new Intent(context, StatusOfChild.class);
                    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
                stackBuilder.addParentStack(StatusOfChild.class);
                stackBuilder.addNextIntent(resultIntent);
                PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);
                mBuilder.setContentIntent(resultPendingIntent);
                NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                mNotificationManager.notify(9011, mBuilder.build()); 
```

# android - 当管理员电话响起时，我如何获取位置并通过短信发送？

> ID：14538574
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:49:26.160
> 
> 标签：android, gps, sms, intentservice

我尝试创建一个 android 应用程序 GPS 跟踪器。当用户管理员拨打电话时...电话通过短信将位置发送回管理员。我在用户管理员通话时创建部件，使用广播接收器和意图服务发送短信。我如何在短信中添加位置？我已经阅读了位置管理器的示例，但是当位置更改为文本时发送位置。我想在管理员电话响铃时从 UI 获取当前位置变量并将其发送回短信（短信意图服务）。 ..我的问题是我如何将位置变量传递给意图服务...我的方法是定期将变量存储到文件中，并在我想发送短信时读取。另一种更好的方法？有什么想法，对此有帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:10:22.897

[http://www.mkyong.com/android/how-to-send-sms-message-in-android/](http://www.mkyong.com/android/how-to-send-sms-message-in-android/)

您可以使用 SmsManager API 或设备的内置 SMS 应用程序发送 SMS 消息。在本教程中，我们向您展示了发送 SMS 消息的两个基本示例：

```
SmsManager API

    SmsManager smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage("phoneNo", null, "sms message", null, null);

Built-in SMS application

    Intent sendIntent = new Intent(Intent.ACTION_VIEW);
    sendIntent.putExtra("sms_body", "default content"); 
    sendIntent.setType("vnd.android-dir/mms-sms");
    startActivity(sendIntent); 
```

# parsing - 如何从 swf 文件中提取源代码

> ID：14538578
> 
> 赞同：3
> 
> 时间：2013-01-26T15:50:02.837
> 
> 标签：parsing, flash

我想从这个站点获取 swf 文件的来源

[http://www.apcmedia.com/salestools/WTOL-7B6SFC_R0_EN.swf](http://www.apcmedia.com/salestools/WTOL-7B6SFC_R0_EN.swf)

实际上它是用于计算数据中心能耗的计算器 任何人都可以得到这个 swf 文件的源代码 任何人都可以为我解析这个文件 我会非常感谢他实际上我是在visual studio .net中开发类似的应用程序，我需要了解后端使用的farmulas，所以想知道开发这个计算器背后的计算是什么，谁能帮我解析一下，我会感谢他

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:44:06.203

从技术上讲，您可以使用*反编译器*来完成这项工作。

有免费（例如：[ActionScript Extractor](https://sites.google.com/site/as3extractor/)）和付费（例如：[Sothink SWF Decompiler](http://www.sothink.com/product/flashdecompiler/)）工具。

但是，在您进行任何反编译过程之前，请注意您**必须**获得作者的许可才能查看（使用或其他任何内容）他的代码。

我不是这里的法律权威，所以我所说的**不能**被用作事实。
而且，如果您违反版权法或其他内容，您可能会受到法律指控！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T11:16:40.860

[as3extractor](https://sites.google.com/site/as3extractor/)效果很好，程序是免费的。

# git - Github - 克隆没有 SSH 密钥的私有存储库。

> ID：14538581
> 
> 赞同：1
> 
> 时间：2013-01-26T15:50:14.453
> 
> 标签：git, github, repository

如果这是在错误的论坛中道歉。

基本上，我在我的 Github 帐户上创建了一个私人存储库，并且我允许某些成员成为它的合作者。问题是，我不想将 SSH 密钥添加到我的帐户中，这意味着他们可以访问我的所有存储库。

是否有可能我可以将它们添加为协作者，然后可以简单地使用命令：

`git clone [repository] -> git add -> git push`ETC..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:56:06.590

您提出的问题（如何在没有键的情况下克隆/推送）的答案很简单：您不能。

但这只是因为它基于一种误解：您不应该将协作者的密钥直接添加到您自己的帐户中。相反，他们应该创建自己的帐户，然后您将他们添加为您希望他们有权访问的存储库的协作者。从[GitHub 帮助站点](https://help.github.com/articles/how-do-i-add-a-collaborator)：

> 很高兴知道：协作者始终获得读/写权限。要向存储库授予只读或管理员权限，该存储库必须由组织拥有。
> 
> 1.  访问存储库的页面
> 2.  点击“设置”按钮
> 3.  点击“合作者”标签
> 4.  输入用户登录名或电子邮件的一部分
> 5.  从下拉列表中选择用户
> 6.  点击“添加”
> 
> 很高兴知道：在将它们添加到存储库之前，此人必须具有 GitHub 帐户。如果他们没有，他们可以注册免费计划。用户始终可以在私有存储库上进行协作，即使是免费计划也是如此。

# android - 创建 phonegap android 项目时出错 cscript 不是可识别的内部或外部命令

> ID：14538583
> 
> 赞同：2
> 
> 时间：2013-01-26T15:50:29.887
> 
> 标签：android, cordova, windows-7

`create C:\phonegap-2.3.0\phonegap-2.3.0\lib\android\bin>create C:\Users\paul\Documents\Webnux\AndroidProjects com.Webnuxs.Flames Flames 'cscript' is not recognized as an internal or external command, operable program or batch file.` 我正在使用电话间隙开始使用 android，但是当我在那里运行任何解决方案时命令提示符返回以下错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:04:50.297

来自[这里](http://simonmacdonald.blogspot.no/2012/11/getting-create-command-to-work-on.html)的评论：确保您安装了 Windows Scripting Host。如果你这样做了，那么你需要确保 cscript.exe 的路径在你的 PATH 环境变量中。

以防万一，[这里](http://answers.yahoo.com/question/index?qid=20110529123006AABGsYv)是如何在 Win 7 上启用它。

# ruby-on-rails - 在Rspec中存根设计'current_user'方法而不加载Rails

> ID：14538587
> 
> 赞同：2
> 
> 时间：2013-01-26T15:50:42.500
> 
> 标签：ruby-on-rails, rspec

我无法将我的测试与 Rails 分离。例如，如何存根在`current_user`下面的帮助程序中调用的方法（来自 Devise）？

辅助模块：

```
module UsersOmniauthCallbacksHelper

  def socialmedia_name(account)
    name = current_user.send(account)['info']['name']
    name = current_user.name if name.blank?
    name
  end

end 
```

测试

```
require_relative '../../app/helpers/users_omniauth_callbacks_helper.rb'

describe 'UsersOmniauthCallbacksHelper' do
  include UsersOmniauthCallbacksHelper

  describe '#socialmedia_name(account)' do
    it 'should return the users name listed by the social media provider when that name is provided' do

      #once I've done away spec_helper, this next line ain't gonna fly.
      helper.stub(:current_user) { FactoryGirl.create(:user, facebook:  {"info"=>{"name"=>"Mark Zuckerberg"}}) }

      socialmedia_name('facebook').should == "Mark Zuckerberg"
    end
  end
end 
```

如何存根`current_user`在类中使用的方法？

如果我正在加载 Rails，测试仍然可以保留我的`helper.stub(:current_user)`. 但很自然，现在这行不通，因为我没有加载 spec_helper 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:05:12.330

对于测试模块，您最好的选择是将帮助程序包含到测试类中，创建一个新实例，然后从那里存根方法。此外，您应该将更多的名称逻辑移动到模型中，这样您就不需要让助手知道`send(account)`，并且它的返回是一个哈希，它有一个哈希（德米特法则）。我希望几乎所有的 socialmedia_name 方法都在模型中。例如：

```
describe 'UsersOmniauthCallbacksHelper' do
  let(:helper) do
    Class.new do
      include UsersOmniauthCallbacksHelper
      attr_accessor :current_user
    end.new
  end
  let(:user) { stub('user') }

  before do
    helper.current_user = user
  end

  describe '#socialmedia_name(account)' do
    it 'should return the users name listed by the social media provider when that name is provided' do
      # stub user here

      helper.socialmedia_name('facebook').should == "Mark Zuckerberg"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:38:40.313

这是我最终得到的结果（在根据 Jim 的建议重构代码之前）。最重要的是，测试运行得非常快。这个助手可能会改变，但我将在我的更多工作中使用这种无轨策略。

```
#spec/helpers/users_omniauth_callbacks_helper_spec.rb

require_relative '../../app/helpers/users_omniauth_callbacks_helper.rb'
require 'active_support/core_ext/string'

describe 'UsersOmniauthCallbacksHelper' do
  let(:helper) do
    Class.new do
      include UsersOmniauthCallbacksHelper
      attr_accessor :current_user
    end.new
  end

  describe '#socialmedia_name(account)' do
    it 'should return the users name listed by the social media provider when that name is provided' do
      helper.current_user = stub("user", :facebook =>{"info"=>{"name"=>"Mark Zuckerberg"}}) 
      helper.socialmedia_name('facebook').should == "Mark Zuckerberg"
    end

    it 'should return the current users name when the social media data does not provide a name' do
     helper.current_user = stub("user", name: "Theodore Kisiel", facebook: {"info"=>{}}) 
      helper.socialmedia_name('facebook').should == "Theodore Kisiel"
    end
  end
end 
```

# python - Python Regex - 在重复匹配时拆分？

> ID：14538588
> 
> 赞同：0
> 
> 时间：2013-01-26T15:50:56.730
> 
> 标签：python, regex

我有以下字符串：

```
{topic.equals(org.fedoraproject.prod.bodhi.buildroot_override.tag), foo.notequals(bar)}
{topic.in(1,2,3), foo.equals(baz)} 
```

我想得到结果：

```
["topic.equals(org.fedoraproject.prod.bodhi.buildroot_override.tag)", "foo.notequals(bar)"]
["topic.in(1,2,3)", "foo.equals(baz)"] 
```

curlies 中的内容是无限的，但基本匹配需要是：

```
<key>.<command>(<args>) 
```

所以curlies里面可能有15个匹配项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:50:25.843

我认为这行得通，但由于它不是很优雅，因此需要意见：

```
column_regex = re.compile("\w+\.\w+\(.+?\)")
results = re.findall(column_regex, data) 
```

这将给出 {} 内的命令结果：

```
['topic.equals(org.fedoraproject.prod.bodhi.buildroot_override.tag)', 'foo.notequals(bar)'] 
```

然后您可以对每个返回值使用第二个正则表达式：

```
filter_regex = re.compile("^(?P<column>\w+)\.(?P<command>\w+)\((?P<args>.+?)\)") 
```

能够进行匹配并获取值：

```
filter_match = re.match(filter_regex, match)
filter_match.group('command') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:53:34.333

我会尽可能简单：

```
entries = []
for line in inputsource:
    entries.append(map(str.strip, line.strip().strip('{}').split(', '))) 
```

因此，对于每一行，先去掉空格，然后再去掉花括号，然后用逗号加空格分隔命令并存储去掉空格的结果。

这取决于命令由逗号加空格分隔的事实，而示例中的参数仅使用不带空格的逗号。如果您有任何违反该差异的内容，那么您确实需要使用正则表达式。我只会将其限制为拆分：

```
import re
commandsep = re.compile(r'(?<=\)),\s*')

for line in inputsource:
    entries.append(map(str.strip, commandsep.split(line.strip().strip('{}')))) 
```

`commandsep`表达式在任何逗号加可选空格上拆分，前提是它前面有一个右`)`括号（使用后视断言）。

对于您的输入，结果是：

```
>>> entries
[['topic.equals(org.fedoraproject.prod.bodhi.buildroot_override.tag)', 'foo.notequals(bar)'], ['topic.in(1,2,3)', 'foo.equals(baz)']] 
```

如果这些条目嵌入到较大的文本正文中，则正则表达式可能会有所帮助，但只能找到大括号分隔的值：

```
import re

expression = re.compile(r'{[^{}]+}')
inputsource = expression.findall(largerbodyoftext) 
```

where`expression`将找到由大括号分隔的任何文本（无嵌套）。

# php - 输出缓冲与将内容存储到 PHP 中的变量

> ID：14538589
> 
> 赞同：6
> 
> 时间：2013-01-26T15:51:00.703
> 
> 标签：php, variables, local-variables, output-buffering

我不知道输出缓冲是如何工作的，但据我所知它将内容存储到一些内部变量中。

关于这一点，不使用输出缓冲并将内容存储在我自己的局部变量中，而不是在脚本末尾回显它有什么区别？

输出缓冲示例：

```
<?php
  ob_start();
  echo "html page goes here";
  ob_end_flush();
?> 
```

不使用输出缓冲的例子：

```
<?php
  $html = "html page goes here";
  echo $html;
?> 
```

有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T15:53:58.477

主要区别：

1.）您可以使用“正常”输出语法，例如`echo`语句。你不必重写你的问题。

2.）您可以更好地控制缓冲，因为可以堆叠缓冲区。您不必了解命名约定等，这使得在编写和使用端彼此分开实现的情况下实现更容易。

3.) 不需要额外的逻辑来输出缓冲的内容，你只需`flush`. 如果输出流是特殊的，则特别有趣。为什么要负担控制范围来处理这个问题？

4.) 无论是否创建了输出缓冲区，您都可以使用相同的输出实现。这是一个透明度问题。

5.）你可以“抓住”不小心冒泡的东西，比如警告之类的东西，然后简单地吞下它。

[...]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T15:55:59.393

输出缓冲使您可以更灵活地分离输出*什么*、*何时*输出和*如何*输出的关注点，而无需对现有代码进行任何更改。

您可能有现有的代码来回显它们的输出而不是返回它；输出缓冲允许该代码在不对其进行任何更改的情况下运行。

除了显而易见的`ob_end_flush()`，您还可以使用`$output = ob_get_contents()`follow`ob_end_clean()`再次将输出捕获到变量中。这允许您将其写入文件而不是在屏幕上显示。

最后，您可以将过滤器挂接到输出缓冲系统上，以实现即时压缩。

也可以看看：[`ob_gz_handler`](http://php.net/manual/en/function.ob-gzhandler.php)

# javascript - Javascript图像悬停效果

> ID：14538590
> 
> 赞同：0
> 
> 时间：2013-01-26T15:51:04.357
> 
> 标签：javascript, html, css

我很想知道如何添加图像悬停效果，使图像变暗或变灰，并且在我悬停的图像上会出现 2 个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:57:41.843

你不需要 JavaScript。假设以下 HTML：

```
<div id="element">
  <img src="path/to/image.png" />
  <div>
    <button>Btn1</button>
    <button>Btn2</button>
  </div>
</div> 
```

CSS：

```
#element {
  position:relative;
}
#element>img {transition: all 0.5s ease}
#element:hover>img {
  opacity:0.5;
  -webkit-filter:grayscale(0.5);
}
#element>div {
  opacity:0; transition: all 0.5s ease;
  position:absolute; bottom:0;
}
#element:hover>div {
  opacity:1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:01:30.747

有两种方法可以做这两件事。

两者中的第一个是使背景图像变暗。尽管您实际上并没有将其调暗。

创建一个将图像作为背景图像的 div。在那个 div 里面，创建第二个 div，然后把你的按钮放在里面。第二个 div 的背景图像应该是一个单像素 .PNG 的背景图像。PNG 应该是不透明度为 50 或 60% 的白色像素。如果您网站的背景不是白色，则将此像素匹配为与文档背景相同的颜色。

在文档加载时，以 0 速度淡出包含按钮的内部 div 到 0。不要隐藏它或设置为 display:none ，否则您将无法在其上触发悬停事件。

在内部 div 上，附加一个悬停事件侦听器，使其淡入和淡出。

这将产生图像淡出的效果，并且按钮将按您的预期出现。我们使用半透明背景而不只是将内部 div 淡化为 0.6 的原因是因为我们希望按钮 100% 可见。如果我们只将内部 div 淡入，按钮也将是 0.6。使用以 100% 不透明度显示的半透明背景会产生以下内容变暗的错觉。

至于使图像变灰，您可以执行完全相同的操作，只是创建容器背景的副本图像，并在 Photoshop 中将其去饱和，使其变为黑白。然后将其用作内部 div 的背景图像。当内部 div 淡入时，会产生背景图像淡入灰色的错觉。

这是“淡入灰色”的工作副本：http: [//jsfiddle.net/D6mYh/](http://jsfiddle.net/D6mYh/)

渐变为灰色的代码：

HTML：

```
<div id="outer">
   <div id="inner">
       <button id='test'>Test</button>
       <button id='cancel'>Cancel</button>
   </div>
</div> 
```

CSS：

```
#outer {
    width: 400px;
    height: 300px;
    position: relative;
    border: 1px solid black;
    background:url('http://i.imgur.com/kRiuDiK.png');
}

#inner {
    width: 100%;
    height: 100%;
    background:url('http://i.imgur.com/jNLk69v.png');
}

#test {
    position: absolute;
    top: 100px;
    left: 100px;
}

#cancel {
    position: absolute;
    left: 200px;
    top: 100px;
} 
```

和JS：

```
$(function() {

    $("#inner").fadeTo(0,0).hover(function() {$(this).fadeTo(100,1);}, function() {$(this).fadeTo(100,0);});

}); 
```

# java - 排序/迭代/排列问题

> ID：14538592
> 
> 赞同：1
> 
> 时间：2013-01-26T15:51:17.240
> 
> 标签：java, arraylist

我正在尝试制作一个排序程序来对锦标赛比赛进行排序。

通过输入参赛者的姓名，我希望以特定的方式对这些进行排序。标准是没有人可以一个接一个地去看比赛，但每个人都必须面对对方。

例子：

```
1 - 2

1 - 3

1 - 4

1 - 5

2 - 3

2 - 4

2 - 5

3 - 4

3 - 5

4 - 5 
```

这些都是比赛，必须以这样一种方式对它们进行排序/组织，以使**尽可能接近的**人不能在彼此之后进行比赛。

我知道*一个数学事实*是不可能解决的，所以每个人都不会接连进行两场比赛。但我希望“排序”*尽可能接近*。

**从这个意义上说，它必须有点“聪明”，才能尽力而为。排序必须是动态的，所以如果我输入 7 名参赛者，最多 30 名参赛者，排序将尽力而为。**

现在我让参赛者按照正确的顺序排列在数组列表中，例如 1-17，或者我将它们放在数组列表中的所有排列中，例如：1、2、1、3、1、4、2、3、2， 4、3、4。

我尝试过比较数字，以不同的方式迭代，但我已经死在水中了。我正在寻求帮助，或者有人可以为我指明正确的方向，这样我就可以转弯

这：

```
1 - 2

1 - 3

1 - 4

1 - 5

2 - 3

2 - 4

2 - 5

3 - 4

3 - 5

4 - 5 
```

对此：

```
5-4

1-2

3-4

1-5

2-3

1-4

2-5

3-1

5-4

3-5   <--here number 5 has to go 2 matches in a row 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:41:53.410

“我知道一个数学事实是不可能解决的，所以每个人都不会连续参加两场比赛。”

这是一个没有参赛者连续两场比赛的情况：[3 - 5, 2 - 4, 1 - 5, 2 - 3, 1 - 4, 2 - 5, 3 - 4, 1 - 2, 4 - 5, 1 - 3]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:53:10.627

我为你的配对提出了一个“随机”的解决方案，这样参赛者就无法预测他们每年的位置（假设活动是一年一度的）。

我的解决方案首先是对所有配对进行组合。randomizer 函数交换两个随机配对。

“count-back-to-backs”功能计算参赛者背靠背配对的次数。这是您判断配对数组的指标……或标准……。

主循环运行大量随机化循环并记住背靠背比赛最少的配置。您可以改变循环的数量。

您还可以添加其他函数来收集有关一组特定配对的指标，并根据这些指标保留/拒绝。

因此，该解决方案是：（1）生成随机配对，（2）根据一个或多个标准保留/拒绝配对数组，（3）让计算机生成大量这些随机集供您判断。

输出是配对数组，最后是背靠背的数量，例如

[3 - 5, 2 - 4, 1 - 5, 2 - 3, 1 - 4, 2 - 5, 3 - 4, 1 - 2, 4 - 5, 1 - 3]0

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Contest {

static Random rand = new Random();

static class Pairing {
    int contestantA;
    int contestantB;
    public Pairing(int a, int b) {
        contestantA = a;
        contestantB = b;
    }
    public String toString() {
        return ""+contestantA+" - "+contestantB;
    }
}

static int countBackToBacks(List<Pairing> pairs) {
    int backs = 0;
    for(int x=0;x<pairs.size()-1;++x) {
        Pairing a = pairs.get(x);
        Pairing b = pairs.get(x+1);
        if(a.contestantA==b.contestantA || a.contestantA==b.contestantB || 
                a.contestantB==b.contestantA || a.contestantB==b.contestantB)
        {
            ++backs;                
        }
    }           

    return backs;
}

static void randomize(List<Pairing> pairs) {
    int a = rand.nextInt(pairs.size());
    int b = rand.nextInt(pairs.size());
    Pairing pa = pairs.get(a);
    Pairing pb = pairs.get(b);
    pairs.set(a, pb);
    pairs.set(b, pa);       
}

public static void main(String [] args) {

    List<Pairing> pairs = new ArrayList<Pairing>();
    int numEntries = 5;//Integer.parseInt(args[0]);
    for(int x=0;x<numEntries-1;++x) {
        for(int y=x+1;y<numEntries;++y) {               
            Pairing p = new Pairing(x+1,y+1);
            pairs.add(p);               
        }
    }

    int bestVal = Integer.MAX_VALUE;
    String best = "";
    for(int x=0;x<1000000;++x) {
        randomize(pairs);
        int backs = countBackToBacks(pairs);
        if(backs<bestVal) {
            bestVal = backs;
            best = pairs.toString();
        }
    }

    System.out.println(best + bestVal);

}   

} 
```

# c# - 模型属性的属性通过视图模型查看 - 如何？

> ID：14538594
> 
> 赞同：0
> 
> 时间：2013-01-26T15:51:30.820
> 
> 标签：c#, wpf, mvvm, binding, attributes

如何将模型属性的属性绑定到视图？

我有一个模型，例如：

```
class MyModel
{
    [Display(
        ResourceType = typeof(Resources.Strings),
        Name = "MyName",
        Description = "MyDescription")]
    public double MyProperty { get; set; }
} 
```

我的视图模型是这样的（很正常）：

```
public class MyVM
{
    private Models.MyModel model;

    public string MyVMProperty
    {
        get { return model.MyProperty.ToString(); }
        set
        {
            // some usual code with parsing a value from textbox...
        }
    }
} 
```

在一个视图中，我想从模型属性的属性中绑定数据。像这样的东西：

```
<Grid Name="myGrid">
    <TextBox 
        Text="{Binding Path=MyVMProperty}" 
        />

    <TextBlock 
        Text="{Binding Path=MyVM.model.MyProperty.DisplayAttribute.Name}" 
        />

    <TextBlock 
        Text="{Binding Path=MyVM.model.MyProperty.DisplayAttribute.Description}" 
        />
</Grid> 
```

我在代码中的某个地方：

```
myGrid.DataContext = new MyVM(); 
```

如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:07:13.443

由于只能使用反射来检索属性属性，因此您必须提供一些将“（类 OR 对象）+ 属性名称”元组转换为公开这些属性值的方法。

一个非常具体的解决方案看起来像

```
public DisplayAttribute MyVMPropertyDisplayAttribute
{
    get
    {
        var prop = typeof(MyModels.Model).GetProperty("MyProperty");
        var attr = prop.GetCustomAttributes(typeof(DisplayAttribute));
        return attr.Cast<DisplayAttribute>().Single();
    }
} 
```

然后你可以绑定到 eg `MyVMPropertyDisplayAttribute.Name`。

显然，这个解决方案需要泛化，以便可以方便地跨不同的模型和属性类型使用；最好将其封装在值转换器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:34:53.980

一种可能的解决方案是添加辅助类并将该类的实例作为转换器参数传递。必须手动在 XAML 中初始化该实例。该实例包含获取模型实例属性的属性值所需的所有数据。该解决方案是通用的，转换器逻辑内部没有硬编码数据。转换器的“值”参数也不是必需的。

因此，结果如下所示：

与视图模型在同一个程序集中的东西。转换器和助手类（简化 - 没有任何空检查等）：

```
namespace MyProject.Converters
{
    public class MetadataParameters
    {
        public Type ModelType { get; set; }
        public string ModelProperty { get; set; }
        public Type AttributeType { get; set; }
        public string AttributeProperty { get; set; }
    }

    public class MetadataConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var mp = parameter as MetadataParameters;
            var modelPropertyInfo = mp.ModelType.GetProperty(mp.ModelProperty);
            var attribute = modelPropertyInfo
                .GetCustomAttributes(true)
                .Cast<Attribute>()
                .FirstOrDefault(memberInfo => memberInfo.GetType() == mp.AttributeType);
            var attributeProperty = attribute.GetType().GetProperty(mp.AttributeProperty);

            return attributeProperty.GetValue(attribute, null);
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

在资源文件 (XAML) 中：

```
xmlns:converters="clr-namespace:MyProject.Converters"
...
<converters:MetadataConverter x:Key="metadataConverter" /> 
```

在视图文件中：

```
<!-- language: lang-xml -->

xmlns:converters="clr-namespace:MyProject.Converters"
xmlns:DataAnnotations="clr-namespace:System.ComponentModel.DataAnnotations;assembly=System.ComponentModel.DataAnnotations"
xmlns:Models="clr-namespace:MyProject.Models"
...
<TextBlock 
    <TextBlock.Text>
        <Binding
            Mode="OneWay"
            Converter="{StaticResource metadataConverter}">
            <Binding.ConverterParameter>
                <converters:MetadataParameters
                    ModelType="{x:Type Models:Model}"
                    ModelProperty="ModelProperty"
                    AttributeType="{x:Type DataAnnotations:DisplayAttribute}"
                    AttributeProperty="Name" />                            
            </Binding.ConverterParameter>
        </Binding>
    </TextBlock.Text>
</TextBlock> 
```

# python - 如何操作在序列 n 内打开以下开关的 SwitchBoard？蟒蛇 3x

> ID：14538600
> 
> 赞同：0
> 
> 时间：2013-01-26T15:52:37.417
> 
> 标签：python, object, loops, boolean

我想构建一个具有以下属性的类 SwitchBoard：

*   当我创建一个配电盘时，我应该能够设置它包含的开关数量所有开关都应该从“关闭”位置开始

*   如果我打印一个总机，它应该打印以下内容：“以下开关已打开：1 3 5 7 9”

*   如果我用 n 作为整数调用 switch(n)，它应该获取第 n 个灯开关的状态

*   如果我用 n 作为整数调用 switch every(n)，它应该获取每个第 n 个灯开关的状态

**如上所述，我应该能够编写一段解决灯开关问题的全局代码。**

这是我到目前为止的工作，第一个是类`LightSwitch`

*   如果开关打开，它将翻转并关闭

*   如果开关关闭，它将翻转并打开

```
class LightSwitch():

    def __init__(self, mode):
            self.switch = mode

    def __str__(self):
        if self.switch == True:
            return ("I am on")

        if self.switch == False:
            return ("I am off")        

    def turn_on(self):
        self.switch = True

    def turn_off(self):
        self.switch = False

    def flip(self):
        if self.switch == True:
            self.switch = False
        else:
            self.switch = True 
```

对于班级`SwitchBoard`，这就是我所拥有的：

```
class SwitchBoard():

    def __init__(self, n):
        self.switches = []
        for i in range(n):
            self.switches.append(LightSwitch(False))

    def switch(self, n):
        self.switches[n].flip()

    def switch_every(self, n):
        for i in range(0,len(self.switches), n):
            switch(i)

    def __str__(self):
        return "The following switches are on: " + str(self.switches)

if __name__ == ('__main__'):

    my_light = LightSwitch(False)
    my_light.flip()
    print (my_light) # This prints "I am on"

    my_light2 = LightSwitch(True)
    my_light2.flip()
    print(my_light2) # This prints "I am off"

    my_switchboard = SwitchBoard(10) # This is the issue.
    my_switchboard.switch_every(2)
    print (my_switchboard) 
```

这行不通，我正在使用一个列表来附加关闭开关的数量，但我不确定如何编写全局代码来解决这个问题，例如在一个序列中打开开关，或者可能缺少某些东西， 请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:58:00.097

要调用该方法`switch`，请使用`self.switch(i)`not `switch(i)`：

```
def switch_every(self, n):
    for i in range(0,len(self.switches), n):
        self.switch(i)   # <-- Change here 
```

* * *

调用时获得一些可读的输出

```
 print (my_switchboard) 
```

将`LightSwitch.__str__`方法更改为`LightSwitch.__repr__`：

```
 def __repr__(self):   # <-- Change `__str__` to `__repr__`
     if self.switch == True:
         return "I am on"

     if self.switch == False:
         return "I am off" 
```

这是因为，当您打印列表时，会打印`repr`其内容。

* * *

该`LightSwitch.flip`方法可以简化为：

```
 def flip(self):
     self.switch = False if self.switch else True 
```

使用[条件表达式](http://docs.python.org/reference/expressions.html#conditional-expressions)。

# php - 如何在 PHP 中为 SEO 和非 SEO Url 编写代码 > 为用户提供选择

> ID：14538607
> 
> 赞同：-4
> 
> 时间：2013-01-26T15:53:28.107
> 
> 标签：php

我正在用 PHP 编写代码，我想在管理面板中为我的用户提供使用 SEO url 或不使用 SEO URL 的选项。

他将获得 .htaccess 代码以保存在他当前的 .htaccess 页面中。

现在，默认情况下没有 SEO URL。

因此，我在我的 php 代码中进行编码，如下所示 >

```
<a href="<?php echo $domain."/".$cat_page.".php?id=".$cat_id."&title=".$title."&query=".$query; ?>/" ><?php echo $title; ?></a> 
```

现在，当我必须允许 SEO Url 时，

我如何在不编辑任何代码的情况下自动实现以下链接，即使在查看源代码中，SEO 链接也如下所示 >

```
<a href="<?php echo $domain."/".$cat_page.".php/".$cat_id."/".$title."/".$query; ?>/" ><?php echo $title; ?></a> 
```

我是否需要将 SEO 代码保存在数据库列中。如果是，我怎么能在添加标题和类别之前猜测 SEO URL。

如果在运行时，我如何在请求页面时在所有页面中实现代码。

不要告诉我，你必须使用**.htaccess**我知道，但是每当我加载我的页面时，在视图中显示源非 seo url 并且 .htaccess 也没有效果。我想在视图中显示 seo url源也是.. 我应该如何在我的 php 代码中编写，Give me Idea，这样我就可以开始为此编写代码并向您展示。

谢谢。

这是对所有**版主**和**工作人员**的深切要求，不要关闭此线程说重复或无用或常见问题解答，我非常认真，我今晚想学习它，我的屁股太痛苦了，我找不到正确的解决方案直到现在。

我请求所有知识渊博的 LEETS ， PHP 的 ELITES 来帮助我。

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:04:38.080

> 我如何在不编辑任何代码的情况下自动实现以下链接，即使在查看源代码中，SEO 链接也如下所示 >

你不能。您必须将所有旧代码重写为新代码。

更好的解决方案是编写函数助手或使用框架，或者使用Symfony 2 框架之外的[Symfony2 路由组件。](http://symfony.com/doc/current/components/routing/introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T22:27:20.320

退后一点。一般的说法是：

*   [酷 URI 不会改变](http://www.w3.org/Provider/Style/URI.html)

要记住的下一个最重要的事情是，关于 SEO 的讨论通常是一个神话。不要专注于搜索引擎，而是直接关注您的用户。

用户为复杂的 URI 添加书签。搜索引擎也是如此。这实际上是我们拥有搜索引擎的原因，因为我们不想记住（或可能记住）所有 URI。因此，对于您的网站来说，重要的是：

*   [酷 URI 不会改变](http://www.w3.org/Provider/Style/URI.html)

So not changing the URL layout can have greater benefits to SEO than most "SEO tutorials" would tell you. Focus your users instead, not the search engines. Search engines, if made well - like google - follow suit anyway.

# delphi - Delphi webbrowser获取tthread对象中的所有链接

> ID：14538610
> 
> 赞同：4
> 
> 时间：2013-01-26T15:53:46.150
> 
> 标签：delphi, browser, tthread

我无法在 tthread 对象中运行我的代码。它应该遍历 twebbrowser 中的所有链接，然后如果 url 包含“http://www.ebay.com/itm/”，则将其复制到备忘录中。该代码在 mainform 中完美运行，但在 tthread 对象中不起作用。

我的代码：

```
begin
  count := 0;
   loop := 0;
    repeat
    link := Webbrowser1.OleObject.Document.Links.Item(loop).href;
     if AnsiContainsStr(link, 'http://www.ebay.com/itm/') then
    begin
     Form1.Memo1.Lines.Add(link);
    end;

  end;

     loop := loop + 1;
    count := count + 1;
  until count = Webbrowser1.OleObject.Document.links.Length;
end; 
```

我得到的错误

> 模块 mshtml.dll 中地址 xxxxxx 的访问冲突

感谢阅读和所有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:54:50.033

您的控件仍然与 GUI 线程具有关联性。所以你不能从工作线程访问它。

您只需要对螺纹设计稍作调整即可完成这项工作。处理页面的源以提取 GUI 线程中的所有链接。这必须在那里完成，你别无选择。但是然后让工作线程对链接进行后续处理。我假设真正的应用程序对链接的作用比将它们放在备忘录中更多！

你应该有一个简单的生产者/消费者设计。GUI 线程产生一个链接列表。工作线程消耗它们。线程安全队列将允许您在线程之间同步任务。您可能会受益于使用 OTL 等更高级别的库而不是编码原始线程。

# c# - 将多维数组的 n 个随机元素设置为一个值

> ID：14538614
> 
> 赞同：2
> 
> 时间：2013-01-26T15:54:07.687
> 
> 标签：c#, random

`int[3,3]`在由所有值组成的二维整数数组（例如）中`0`，我想尽可能有效地`n`将数组的随机元素设置为该值。`1`我遇到的问题是数组中的第一个元素`1`比数组后面的其他元素更有可能具有 的值。

这是我的代码。在下面的示例中，我试图将 3x3 数组的 3 个随机选择的元素设置为 1。

```
int sum = 0;

private void MakeMatrix()
{
    for (int i = 0; i < 3; i++)
    {
        for (int k = 0; k < 3; k++)
        {
            int n = _r.Next(2);

            if (n != 1 && sum < 3)
            {
                matrix[i, k] = 1;
                sum++;
            }
            else
            {
                matrix[i, k] = 0;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:01:06.773

您可以尝试以下方法。首先将矩阵初始化为所有 0 值，然后运行下面的代码。它将矩阵中的三个随机值设置为 1。

```
int count = 0;
while (count < 3)
{
    int x = r.Next(0, 3);
    int y = r.Next(0, 3);

    if (matrix[x, y] != 1)
    {
        matrix[x, y] = 1;
        count++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:19:53.493

```
 static int sum = 0;
    private static readonly int[,] matrix = new int[3,3];
    private static readonly Random _r = new Random();
    private static void MakeMatrix()
    {
        //by default all the element in the matrix will be zero, so setting to zero is not a issue
        // now we need to fill 3 random places with numbers between 1-3 i guess ?

        //an array of int[3] to remember which places are already used for random num
        int[] used = new int[3];
        int pos;
        for (int i = 0; i < 3; i++)
        {
            pos = _r.Next(0, 8);
            var x = Array.IndexOf(used, pos);
            while (x != -1)
            {
                pos = _r.Next(0, 8);
            }
            used[i] = pos;
            matrix[pos/3, pos%3] = _r.Next(1, 3);

        }

    } 
```

# android - SearchView 和 ABS

> ID：14538616
> 
> 赞同：0
> 
> 时间：2013-01-26T15:54:28.210
> 
> 标签：android, actionbarsherlock

以前我有一个`EditText`with a`onTextChangedListener`来处理用户的搜索查询。这是这样做的：

ed.addTextChangedListener(new TextWatcher() {

```
 @Override
            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {

                textLength = ed.getText().length();
                list.clear();
                isPresent = initIsPresentArray();

                for (int i = 0; i < tempList.length; i++) {
                    for (int j = 0; j < (tempList[i].length() - (textLength - 1)); j++) {
                        if (textLength <= tempList[i].length()) {
                            if (isPresent[i] == false) {
                                if (ed.getText()
                                        .toString()
                                        .equalsIgnoreCase(
                                                (String) tempList[i]
                                                        .subSequence(
                                                                j,
                                                                (j + textLength)))) {
                                    list.add(tempCaseList.get(i));
                                    isPresent[i] = true;
                                }
                            }
                        }
                    }
                    if (list.size() == 0) {
                        error.setText(getResources().getString(R.string.notFound));
                        v.setVisibility(View.GONE);
                    } else {
                        error.setText("");
                        v.setVisibility(View.VISIBLE);
                    }

                    lv.setAdapter(new CustomAdapter(History.this, list));
                }
            }
        }); 
```

这段讨厌的代码会在用户输入要搜索的内容时动态更新 ListView。它与`EditText`. 现在，我正在为我的项目实施 ActionBarSherlock，并希望使用 SearchWidget：

![在此处输入图像描述](../Images/d55e193ccb104a25a33b9693cbd9561e.png)

我夸大了我的菜单：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.actionbarmenu, menu);
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView)menu.findItem(R.id.searchCases).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(true);
        searchView.setSubmitButtonEnabled(true);
        return true;
    } 
```

如何将与 相同的行为`OnTextChangedListener`应用于 this `SearchView`？可能吗？

# facebook - 从 Graph API Explorer 生成的访问令牌生成长期存在的“用户”访问令牌。不是应用访问令牌

> ID：14538618
> 
> 赞同：4
> 
> 时间：2013-01-26T15:54:36.120
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-authentication, facebook-access-token

我的目标是从用户时间线获取公共数据，例如状态、提要、用户名、家乡等。我正在使用 Java 中的桌面应用程序，它发送带有访问令牌的 HTTP 请求来获取时间线数据。有两种类型的令牌，其中一种给我我想要的完整数据，另一种给我部分数据。两者都在下面提到。

**类型 1.**单击“获取访问令牌”并授予权限后在 Graph API Explorer 上生成

（这将在 1 小时内到期，并为我提供我想要的用户时间线中的所有数据，例如状态、ID、用户名、提要等）。为此，我使用下面的 url 并对 API 进行 HTTP 调用：`https://graph.facebook.com/<Username>?fields=id,name,statuses.fields(message)&access_token=AAACEd` 这为我提供了响应 JSON 中所有提到的字段。

**类型 2.**创建应用后生成。

使用 appId 和 appSecret 我生成了一个短暂的访问令牌。（这将在 1 小时内到期。）在此之后使用[https://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)上提到的文档和 url我能够生成长期访问令牌（这些过期大约 60 天）。

当我在上述 url 中使用此令牌进行身份验证时，它不会解决我的目标并从用户时间轴返回有限的信息。它不返回“状态”字段，并且只返回时间线中的少数公共提要。

这里的**问题**是访问令牌，它给我所有的数据在一小时内过期，我不可能在每小时手动更改我的应用程序中更改它，第二个访问令牌寿命很长，但没有给我完整的数据。

所以我想要长寿用户访问令牌而不是应用程序生成的访问令牌，它给了我所有的数据。即我想要上述类型 1 的长寿命访问令牌。延长访问令牌到期时间的过程需要应用程序 ID 和密码，但 Graph API Explorer 没有相同的。

请提出一种方法来获得类型 1 的长寿命访问令牌或任何其他方式来实现我的目标。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-17T12:27:41.720

自 2015 年 7 月起，您现在可以在 Facebook 中轻松创建 60 天访问令牌。

[登录https://developers.facebook.com/tools/accesstoken/](https://developers.facebook.com/tools/accesstoken/)后，只需单击要在此页面上扩展的用户访问令牌上的调试按钮

然后您会在页面底部附近看到一个蓝色的“扩展访问令牌”按钮。

# c# - 如何用 C# 覆盖二进制文件中的特定字节？

> ID：14538620
> 
> 赞同：0
> 
> 时间：2013-01-26T15:54:46.563
> 
> 标签：c#, binary, byte, overwrite

我想覆盖 exe 中的字节。

所以我需要生成一个随机字符串，进行转换，然后写入exe。

我需要以这种格式 xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx (8-4-4-4-12) 覆盖您在此处看到的 4 个十六进制字符串，因此需要破折号，这对我来说也是一个问题。

这是第一个字符串的位置。

![十六进制转储](../Images/131da378f64c68d0d883dfade639885b.png)

![属性截图](../Images/672613a2836c3a56d79f00b5d649c5f9.png)

我完全不知道如何开始，如何用正确的格式用随机字符串覆盖这 4 个字符串（十六进制，所以随机只能是 0123456789abcdef）

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T16:23:05.327

您要覆盖的字符串是 GUID。您可以使用`Guid`该类生成一个新的（请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)）

至于写入文件，请使用`BinaryWriter`类。

```
using (System.IO.BinaryWriter fileWriter = new System.IO.BinaryWriter(System.IO.File.Open("path", System.IO.FileMode.Open)))
{
    fileWriter.BaseStream.Position = 0xB8EB9; // set the offset
    fileWriter.Write(Encoding.ASCII.GetBytes(Guid.NewGuid().ToString()));
} 
```

[ideone样品](http://ideone.com/dS8lPF)

# asp.net - 通过 c# 将 rdl 加载到 asp.net 项目中的方法调用中需要什么

> ID：14538623
> 
> 赞同：0
> 
> 时间：2013-01-26T15:54:54.130
> 
> 标签：asp.net, reporting-services, reportviewer

我正在尝试找出将 rdl 文件调用/加载到现有 asp.net 应用程序中的步骤。我已将 rdl 文件上传到 ssrs 服务器，并且正在开发一个自定义 ui，它利用 ssrs 端点 (sql2008r2) 来检索和过滤报告。我在哪里寻找一些指导是关于加载报告需要提供什么？最初，我开始尝试使用本地处理，但根据我所阅读的内容以及我需要使用报告处理来生成报告的环境要求。在 aspx 文件中，我添加了报告查看器：

```
<asp:UpdatePanel ID="ReportViewPanel"  runat="server" UpdateMode="Conditional">
  <ContentTemplate>
     <rsweb:ReportViewer ID="MyReportViewer" runat="server">
         </rsweb:ReportViewer>
  </ContentTemplate>
</asp:UpdatePanel> 
```

在单击链接后的代码中，我尝试按如下方式加载报告：

```
//code that creates the report link buttons based on what is returned from endpoint    
protected void RenderReportLinks(System.Web.UI.WebControls.Panel p, List<ReportItems> items)
{
   p.Controls.Add(new LiteralControl("<ul class='HorizontalList'>"));
   foreach (var r in items)
   {
     p.Controls.Add(new LiteralControl("<li>"));
     LinkButton lb = new LinkButton();
     lb.Text = FormatReportNames(r.Name);
     lb.ToolTip = GenerateReportDescription(r);
     lb.CommandArgument = r.Path; //path on ssrs server /<servername>/folder/reportname
     lb.Click += new EventHandler(ReportLink_Click);
     p.Controls.Add(lb);
     p.Controls.Add(new LiteralControl("</li>"));
   }
     p.Controls.Add(new LiteralControl("</ul>"));
}

void ReportLink_Click(object sender, EventArgs e)
{
  LinkButton rpt = (LinkButton)sender;
  MyReportViewer.LocalReport.ReportPath = rpt.CommandArgument + ".rdl";
   ReportViewPanel.Update();
} 
```

目前，当我运行此控件时，该控件不会在页面上呈现或显示任何内容。

我知道我需要使用 ServerReport 而不是 LocalReport，但我不清楚的是所有需要成为检索和呈现报告的方法的一部分。数据源是 rdl 定义的一部分，还是我也需要引用/加载它？（不，我没有创建我刚刚负责加载它们的报告）。SSRS 服务器与 Web 客户端位于不同的服务器上，我需要为此考虑什么吗？最后每个报告都有参数我必须传递这些参数还是可以提示用户？

通过代码加载报表时，首先收集所有参数（登录、报表参数、数据源），然后将其作为对象传递给报表，该对象返回给查看者一个带有结果的报表。或者它是否可以在加载报告的地方（空白）然后用户与之交互，就像用户从报告管理页面单击报告标题一样？

我真的很感谢任何建议或参考在此先感谢 - 干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:07:43.340

我可以看到您的报告数据来源丢失了。无论是来自服务器还是本地，您都需要提供它们

```
 DataTable dtOrders = GetProducts();
 DataTable dtProducts = GetOrders();

 ReportViewer1.LocalReport.DataSources.Add(new Microsoft.Reporting.WebForms.ReportDataSource("dsOrdersInRDL", dtOrders));
 ReportViewer1.LocalReport.DataSources.Add(new Microsoft.Reporting.WebForms.ReportDataSource("dsProductsInRDL", dtProducts)); 
```

而且，您需要提供参数值

```
 ReportViewer1.LocalReport.SetParameters(new Microsoft.Reporting.WebForms.ReportParameter("ParameterName", Request.QueryString["OrderID"])); 
```

希望这些对你有用。

# c# - 面向对象的编程 Extjs - 获取/设置值

> ID：14538625
> 
> 赞同：0
> 
> 时间：2013-01-26T15:55:09.323
> 
> 标签：c#, oop, extjs, get, set

我一直在使用extjs

```
Ext.getCmp('xtypeid').getValue();
Ext.getCmp('xtypeId').setValue(''); 
```

获取值或设置值...我刚刚发现。就 OOP 而言，这是一个糟糕的编程......但我的问题是你如何获取值或设置值一堆文本框。如果有人可以向我展示一个这样做的示例程序，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T16:40:26.847

它们在这里是必需的，因为它发生的不仅仅是设置值。请记住，JavaScript 是一种基于原型的编程语言，因此您无法将它与您可能读过的有关 Java 或 C# 的 OOP 文章进行比较。

不好的是`getCmp()`你应该尽可能避免使用它并完全使用`ComponentQuery`或封装`refs`。如果可能`id`的话，如果不是严格要求的话，请避免自己设置。使用组件查询，您可以查询任何自定义或公共属性。例如`itemId`，ExtJS 还支持，对于按钮，我使用一个名为的自定义属性`action`

您不应该关心框架提供的方法，而是在扩展或创建类并遵循那里的模式时这样做。

**澄清一下：** `Ext.getCmp()`这不是坏事，它真的很快，坏的是大多数人`id`自己设置，以便他们可以使用`getCmp()`这可能导致重复的 id，这是一个问题。

**更新**

正如评论中提到的，Ext.ComponentQuery 非常强大和灵活。我不会在此视图中涵盖所有内容，仅介绍一个基本示例。

让我们做一个简单的环境。我们有一个`Custom`从 Panel 扩展而来的类。自定义在顶部有一个`dockedItems`工具栏，在底部有一个工具栏`dockedItems`。

```
Ext.define('Custom', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.custom',

    tbar: {
        itemId: 'top-bar',
        items: [{
            text: 'foo',
            action: 'foo'
        },{
            text: 'bar', 
            action: 'bar'
        }]  
    },
    dockedItems: [{
        xtype: 'toolbar',
        itemId: 'bottom-bar',
        dock: 'bottom',
        items: [{
            text: 'foo-bottom',
            action: 'foo'
        },{
            text: 'bar-bottom', 
            action: 'bar'
        }]  
    }],

    initComponent: function() {
        this.callParent(arguments);
    }
}); 
```

现在我们正在从我们的新类中创建实例，它是如何产生的，我们同时在屏幕上有两个实例。

```
Ext.create('Custom', {
    title: 'Panel',
    itemId: 'first',
    height: 100,
    width: 400
});
Ext.create('Custom', {
    title: 'Other Panel',
    itemId: 'second',
    height: 100,
    width: 400
}); 
```

现在您想为自己订阅一个集中类中的按钮事件，但您需要为此识别每个按钮。您可能已经看到我定义了一些属性，例如`itemId`（ExtJS 确实知道这些属性，也可以在一个组件上使用两个查询。[请参阅 API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-itemId)）和`action`. 这些是我使用的名称，但您可以在此处使用任何名称。现在我们构建了我们独特的查询路径。我们将为第一个面板底部工具栏中的“foo”按钮执行此操作：

首先我们知道我们正在寻找一个面板。你可能会说，嘿，我们正在寻找`custom`我们班级的原因。但是，`ComponentQuery`如果类从`panel`. 但这是我们可以减少第一个结果集的第一点，我们将选择扩展类的 xtype `custom`。

```
'custom' 
```

我们现在得到类 Custom 或任何扩展它的类的所有实例。现在太多了，我们需要一个。所以我们添加一个过滤器属性。

```
custom[itemId=first] 
```

现在我们有了第一个面板。让我们对工具栏和按钮做同样的事情

```
custom[itemId=first] > toolbar[itemId=bottom-bar] > button[action=foo] 
```

差不多就是这样。

请参阅**[JSFiddle](http://jsfiddle.net/sran/9kPsY/6/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:09:10.250

您可以在控制器上使用 refs：

```
Ext.define('App.controller.Some', {
    extend:'Ext.app.Controller',

    views: [
        ...
    ],

    stores: [
        ...
    ],

    models: [
        ...
    ],

    refs: [{
        ref: 'someCombobox',
        selector: 'combobox[id=you-combo-id]'
    }

    ...

}); 
```

在一些控制器功能中：

```
this.getSomeCombobox().getValue(); 
```

# angularjs - 在角度 ng-view 中嵌入推文

> ID：14538636
> 
> 赞同：5
> 
> 时间：2013-01-26T15:56:10.003
> 
> 标签：angularjs

我想在 ng-view 部分中使用[嵌入](https://dev.twitter.com/docs/embedded-tweets)的推文，但由于某种原因它不起作用。如果我把它放在部分之外（直接在 index.html 中）它就可以工作。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T18:15:24.673

问题在于加载 tweeter 脚本和 main.html 的顺序：当在 widget.js 之前加载 mail.html 时，tweeter 的脚本无法找到您的`backquote`元素并以很好的方式呈现它。

您可以放入`<script ...>`main.html，但在这种情况下请记住，Angular 的 jqLit​​e 不支持`<script>`通过 XHR 加载的部分标签。所以你需要在 Angular 之前包含真正的 jQuery。

这是一个 Plunker：[http ://plnkr.co/edit/rQUThnZNAyJQGFIwflGk?p=preview](http://plnkr.co/edit/rQUThnZNAyJQGFIwflGk?p=preview)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T18:14:22.593

接缝我们需要再次调用 twitter js - 这与 Angularjs 无关。因为 Angular js 部分视图没有立即呈现，所以问题发生了。解决办法是在partial加载完成后再次调用js文件：

```
$timeout(function() {
    $.ajax({ url: 'http://platform.twitter.com/widgets.js', dataType: 'script', cache:true});
}, 1000); 
```

请参阅：[通过 JS 重新渲染推文按钮](https://stackoverflow.com/questions/6206471/re-render-tweet-button-via-js/6536108#6536108)

# python - Libsvm：工具/easy.py

> ID：14538637
> 
> 赞同：1
> 
> 时间：2013-01-26T15:56:17.400
> 
> 标签：python, svm, libsvm

脚本 tools/easy.py 仅使用 rbf 内核。如何更改此脚本以使用其他内核（尤其是线性内核）执行实验？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:50:10.033

您需要传递您想要`svm-train [options] training_set_file [model_file]`的 svm_type 选项。从源代码中的 README 文件中：

```
options:
-s svm_type : set type of SVM (default 0)
    0 -- C-SVC
    1 -- nu-SVC
    2 -- one-class SVM
    3 -- epsilon-SVR
    4 -- nu-SVR
-t kernel_type : set type of kernel function (default 2)
    0 -- linear: u'*v
    1 -- polynomial: (gamma*u'*v + coef0)^degree
    2 -- radial basis function: exp(-gamma*|u-v|^2)
    3 -- sigmoid: tanh(gamma*u'*v + coef0)
    4 -- precomputed kernel (kernel values in training_set_file) 
```

因此线性将是`-t 0`

自述文件中还列出了其他选项，它们更改了每个内核函数中使用的参数。

# entity-framework - 将无状态属性添加到实体框架 5 代码优先 POCO 模型

> ID：14538640
> 
> 赞同：1
> 
> 时间：2013-01-26T15:56:31.250
> 
> 标签：entity-framework

我有一个包含 JSON 字符串的模型，并希望保留已解析的 JSON.NET 对象以备不时之需，以防止不必要的重新解析。

例如

```
public class JsonData {
  public Guid Id { get; set; }
  public string Json { get; set; }
} 
```

我想在其中保留一个 JObject，如果可能的话，在 Json 字符串的集合上重新解析它。我不想将它存储在数据库中。然而，当我写这篇文章时，它只是*感觉不对*......

携带相同“数据”（视图？）的对象的好方法是什么，只是在模型顶部序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:06:48.660

我不确定这是否是您的意思，但是您可以将`[NotMapped]`注释添加到您只想在代码中使用而不是存储在数据库中的 POCO 属性中；

```
public class MyPoco {

    public Guid Id { get; set; }
    public string MyName { get; set; }

    [NotMapped]
    public string ThisObjectCachedAsJson { get; set; }

} 
```

一个更完整的 Json 缓存需求示例，但偏离了 POCO 领域；

```
public class MyPoco {

    private Guid _id;
    private string _myName;
    private string _jsonCache;

    public Guid Id { 
        get { return _id; } 
        set { _jsonCache = null; _id = value; }
    }

    public string MyName { 
        get { return _myName; } 
        set { _jsonCache = null; _myName = value; }
    }

    [NotMapped]
    public string ThisObjectCachedAsJson { 
        get { 
            if(_jsonCache == null) 
                _jsonCache = <generate json>; 
            return _jsonCache; 
        }
    }
} 
```

您应该能够使用 getter 创建一个基类，然后在其中调用一个方法将 _jsonCache 设置为 null。这会让你的课程更干净一些。

# facebook-insights - 洞察最后可用数据

> ID：14538641
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:56:34.607
> 
> 标签：facebook-insights, insight

我试图`page_fans_country`通过 fql 以有效的方式获取一组页面的指标的最后一个值，因此我必须在查询中指定确切的`end_time`字段，以便为每个页面获取单个值（并节省一些带宽）。

问题是一周中的某些日子 is 的正确值`end_time`和`today - 3days`其他时间 it's `today - 4days`。

facebook 是否遵循规则在一周内提供这些见解？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:26:22.477

对于这种情况，通过 Graph API 获得它可能比 FQL 更有效：

```
/PAGE_ID/insights/page_fans_country?limit=1 
```

这样你就不需要知道`end_time`你通过 FQL 所做的事情。

# php - PHP - 2 个嵌入式频道 (Twitch.tv)

> ID：14538642
> 
> 赞同：1
> 
> 时间：2013-01-26T15:56:49.767
> 
> 标签：php, api, justin.tv

如果用户在线或离线，我有一个脚本正在查找。我现在陈述了 2 种行为，`PRINTF('Online')`只是`PRINTF('OFFLINE')`为了看到一切正常。

现在回答我的问题，

如果用户离线，我希望它应该嵌入他的 youtube 频道，而不是仅仅打印离线。我该如何编码？

```
<?php
$channel = "CHANNEL-NAME";

$json_file = @file_get_contents("http://api.justin.tv/api/stream/list.json?".
                                "channel={$channel}", 0, null, null);
$json_array = json_decode($json_file, true);

if( array_key_exists( '0',       $json_array )
 && array_key_exists( 'channel', $json_array[0] )
 && $json_array[0]['name'] == "live_user_{$channel}" )
{
    $channelTitle = $json_array[0]['channel']['title'];
    $title        = $json_array[0]['channel']['status'];

    printf('Online'); 
}
else
{
    printf('Offline');
}

?> 
```

# windows-8 - 用于播放/停止音频文件的 Windows 8 Phone 示例应用

> ID：14538644
> 
> 赞同：1
> 
> 时间：2013-01-26T15:57:10.873
> 
> 标签：windows-8, windows-phone-8

在哪里可以找到 Windows 8 Phone 应用程序的简单音频播放器代码示例？

我是 Windows 8 Phone 开发的新手，正在尝试制作一个仅播放音频文件的应用程序。作为 XAML 和这个 Windows 8 Phone SDK 的新手，我发现很难理解从哪里开始。

我尝试从这里搜索示例项目：http: [//code.msdn.microsoft.com/wpapps/](http://code.msdn.microsoft.com/wpapps/)

但无法理解哪个项目做什么。

有人可以指导我到一个示例项目并简单地执行以下操作

*   播放音频
*   暂停音频
*   停止音频

这些音频文件将在本地添加到解决方案中。

请分享您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:05:27.060

看看[初学者如何在 Windows Phone 上使用 Silverlight 播放媒体](http://code.msdn.microsoft.com/wpapps/Beginners-for-how-to-Media-1ec0eaf0)

# c# - 如何在运行时获取 TextBox 的宽度？

> ID：14538647
> 
> 赞同：-1
> 
> 时间：2013-01-26T15:57:48.950
> 
> 标签：c#, wpf, silverlight, textbox, width

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <TextBox Name="TextBox1" HorizontalAlignment="Left" PreviewKeyUp="TextBox_PreviewKeyUp"></TextBox>
        </StackPanel>
    </Grid>
</Window> 
```

* * *

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void TextBox_PreviewKeyUp(object sender, KeyEventArgs e)
        {
            TextBox1.Text = "Some text inside Textbox";
            MessageBox.Show("TextBox1 Width = " + TextBox1.Width + " & TextBox1.ActualWidth = " + TextBox1.ActualWidth); // NaN & 10
        }
    }
} 
```

如何动态获取宽度`TextBox`？`Width`并且`ActualWidth`只给我默认的编译时间值，但在编译后我需要 Width 属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T16:02:14.400

`Width`并且`ActualWidth`不要*给*你默认的编译时间值。

`Width`是*请求*的大小。

`ActualWidth`是*渲染的*大小。来自 MSDN

> ActualWidth 是一个计算值，由于布局系统的操作，该值可能有多次或增量报告的更改。如果您在布局仍在迭代时获取该值，则布局系统可能仍在计算子对象所需的空间度量、父对象的约束等。

在您的情况下，如果您想要项目的实际大小，请使用`ActualWidth`.

**编辑：**根据您的评论，我将向您展示如何通过使用 BeginInvoke 使您的特定方法起作用，以使 ActualWidth 有机会被计算：

```
private void TextBox1_PreviewKeyUp_1(object sender, KeyEventArgs e)
{
        TextBox1.Text = "Some other text";
        Dispatcher.BeginInvoke((Action)new Action(() =>
            MessageBox.Show("TextBox1 Width = " + TextBox1.Width + " & TextBox1.ActualWidth = " + TextBox1.ActualWidth)),
          System.Windows.Threading.DispatcherPriority.Input);
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-26T17:03:28.527

使用 JavaScript，因为它是在客户端获得正确大小的 Textarea 的唯一方法，因为它们可以使用任何浏览器？如果你有 jQuery 很容易做也可以用原生 javascript 来做。

然后让 JavaScript 将该值发布到隐藏输入中，并在基于服务器的代码中获取输入的值以在需要时使用。

# php - Wordpress：根据自定义字段值更改图像

> ID：14538651
> 
> 赞同：0
> 
> 时间：2013-01-26T15:58:35.620
> 
> 标签：php, wordpress, if-statement, metadata, custom-fields

我在 Wordpress 中设置了自定义字段，我想根据该字段中的值更改图像。

就像是：

*   如果 custom_field_value = 1，则显示图像 A。
*   如果 custom_field_value 为 2，则显示图像 B。

我正在尝试创建一个基于分数更改图像的评论分数系统。就像分数是 10 一样，将显示图像。如果分数是 5，将显示不同的图像。

我希望这是有道理的，我会尝试写一些更深入的东西，但我还没有找到很多关于逻辑地创建解决方案的内容。我一直在寻找的所有东西都使用 an`echo get_post_meta($post->ID, 'review_score', true)`但我不想回显该值（这将是数字分数），我正在尝试根据“review_score”更改图像。

再次，我希望这是有道理的，我希望得到一些帮助。非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:25:29.503

所以......不要回显这个值。

```
$review_score = get_post_meta($post->ID, 'review_score', true);
if(!empty($review_score)) {
  switch ($review_score) :
    case 0 :
      // one image
    break;
    case 5 :
      // another image
    break;
    case 10 :
      // yet another image
    break;
  }
} 
```

# c - 错误 C2011：'timezone':'struct' 类型重新定义（postgres）

> ID：14538652
> 
> 赞同：0
> 
> 时间：2013-01-26T15:58:39.190
> 
> 标签：c, visual-studio, postgresql, visual-studio-2012

我正在尝试构建一个。dll 文件以使用 C 函数扩展 postgres 服务器。我正在使用 Visual Studio 2012 来构建 dll 和 PostgreSQL 9.2。我导入了所有目录 postgres "\include\server*" 但我遇到了错误：

> 错误 C2011：“时区”：“结构”类型重新定义
> 
> 错误 C2011：“itimerval”：“struct”类型重新定义

在文件 *pg_confi_os.h* 的第 205 和 214 行

我尝试了这个[解决方案](http://exodusdb.googlecode.com/svn-history/r278/trunk/exodus/pgexodus/src/pgnaturalorder.cpp)，但没有成功。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-11T09:30:18.420

我今天看了一下，发现这是 PostgreSQL 包含文件中的一个错误。请参阅[此邮件列表帖子](http://www.postgresql.org/message-id/52D0F953.7030403@2ndquadrant.com)。

您可以通过在项目文件的预处理器指令中明确定义 WIN32 来解决此问题。

请参阅[我今天有关该主题的博客文章](http://blog.2ndquadrant.com/compiling-postgresql-extensions-visual-studio-windows/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:21:06.887

postgresql 团队确实回答了我：

> 首先，请注意 VS2012（还）不是 Postgres 支持的构建环境。见 [http://www.postgresql.org/docs/current/static/install-windows-full.html](http://www.postgresql.org/docs/current/static/install-windows-full.html)
> 
> 干杯

另一个答案：

> 首先，您需要使用 Visual Studio 2010 或更早版本进行构建。Express 版工作正常。
> 
> 其次，您不太可能单独编译扩展名 .c 文件。您需要设置一堆预处理器定义，其中一些是特定于配置/环境的。
> 
> 目前编译扩展的最佳方法可能是获取 PostgreSQL 源代码树，将扩展作为文件夹添加到 contrib/ 目录中并带有 Makefile，然后使用 src/tools/msvc 中的工具编译源代码树，包括延期。
> 
> 我真的很想看到这种改进，使用适用于 Windows MSVC 构建的 PGXS 替代方案。我目前不知道任何事情，但我还没有详细研究在 Windows/MSVC 下从树中构建扩展。
> 
> -- Craig Ringer [http://www.2ndQuadrant.com/](http://www.2ndQuadrant.com/) PostgreSQL 开发、24x7 支持、培训和服务

# css - Javascript在刷新时具有不同的div背景图像

> ID：14538655
> 
> 赞同：0
> 
> 时间：2013-01-26T15:59:01.000
> 
> 标签：css, refresh, background-image

拜托，你能告诉我为什么这个 JavaScript`div`在刷新时有不同的背景图像不起作用：

```
<head>
<script type="text/javascript">
    window.onload = function () {    
        var thediv = document.getElementById("top");
        var imgarray = new Array("banner2.jpg", "banner3.jpg");
        var spot = Math.floor(Math.random()* imgarry.length);
        thediv.style.background = "url(images/header/banner/"+imgarray[spot]+")";
    }
</script>
</head> 
```

该网站可以在[http://physoc.org.uk看到](http://physoc.org.uk)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:00:56.270

我的 Javascript 控制台说：

```
Timestamp: 26.01.2013 17:00:19
Error: ReferenceError: imgarry is not defined
Source File: http://www.physoc.org.uk/
Line: 84 
```

你的代码有错别字。您在某处使用了“imgarry”而不是“imgarray”。

按 CTRL+SHIFT+J 打开控制台并亲自查看，在 Firefox 和 Chrome 中有效。调试 Javascript 代码非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:06:26.613

更改此行。有一个`typo`

从

```
var spot = Math.floor(Math.random() * imgarry.length); 
```

至

```
var spot = Math.floor(Math.random() * imgarray.length); 
```

# c# - 将图像从 iPhone 发送到 .net 服务器

> ID：14538664
> 
> 赞同：2
> 
> 时间：2013-01-26T16:00:39.067
> 
> 标签：c#, iphone, .net, objective-c

我想将图像从我的 iPhone 发送到服务器（.net）

在 iPhone 端，我用这种方法发送图像：

```
UIImage *myImg = ((UserData*)[UserData sharedUserData]).image;
NSData *imageData = UIImageJPEGRepresentation(myImg, 0.5);

imageRequest = [ASIFormDataRequest requestWithURL:url];
[imageRequest addData:imageData withFileName:@"someFileName.jpeg" andContentType:@"image/jpeg" forKey:@"uploadedImage"];
[imageRequest setDelegate:self];
[imageRequest setRequestMethod:@"POST"];
[imageRequest startAsynchronous]; 
```

在服务器端这是：

```
string input = null;

using (StreamReader sr = new StreamReader(Request.InputStream))
{
       input = sr.ReadToEnd();
}

Response.Write(input);
return; 
```

然后当我打印`input`我得到：

```
--0xKhTmLbOuNdArY-62D4D088-0CE1-4D32-BE57-2ED976BDF9FE
Content-Disposition: form-data; name="uploadedImage"; filename="someFileName.jpeg"
Content-Type: image/jpeg

���� 
```

现在我的问题是我无法将图像保存到服务器的磁盘中，我在任何地方都没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:08:07.923

您的 Objective-C 代码看起来不错，我做了一些 Google-fu 并找到了 ASP.net 指南： [http ://www.asp.net/web-api/overview/working-with-http/sending-html-form -数据，-第 2 部分](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

在我看来，这就是你想要做的，所以我希望这会有所帮助。

# php - php中的抽象函数

> ID：14538672
> 
> 赞同：2
> 
> 时间：2013-01-26T16:01:17.307
> 
> 标签：php

我在 PHP 中有下一个类：

```
class CWebApplication extends CApplication {

//...

public function processRequest(){
    //...
} 
```

和

```
abstract class CApplication extends CModule {

    abstract public function processRequest();
    //... 
```

但它报告以下错误：

```
Fatal error: Class CWebApplication contains 1 abstract method and must therefore be declared abstract or implement the remaining methods (CApplication::processRequest) in /Users/nram/Sites/ryl/framework/web/CWebApplication.php on line 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:57:30.997

我看到了你的代码。

在那里面，

RYL-master\framework\web\CWebApplication.php

实际上延伸，

RYL-master\framework\base\CApplication.php

从那里开始，

```
<?php

/**
 * CWebApplication class file.
 *
 * @author Nuno Morais <nram@nuno-morais.eu>
 *
 */

abstract class CApplication extends CModule {

    private $_basePath;

    abstract public function processRequest(); 
```

::所以你应该`function processRequest();`在 CWebApplication.php 中扩展或声明。

希望这可以帮助！:)

# python - Python：可以使用 elementTree 迭代子元素

> ID：14538678
> 
> 赞同：0
> 
> 时间：2013-01-26T16:01:55.053
> 
> 标签：python, xml, iterator, elementtree

我有以下代码来解析 XML，但它不会让我遍历孩子：

```
import urllib, urllib2, re, time, os
import xml.etree.ElementTree as ET 

def wgetUrl(target):
    try:
        req = urllib2.Request(target)
        req.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3')
        response = urllib2.urlopen(req)
        outtxt = response.read()
        response.close()
    except:
        return ''
    return outtxt

newUrl = 'http://feeds.rasset.ie/rteavgen/player/playlist?showId=10056467'

data = wgetUrl(newUrl)
tree = ET.fromstring(data)
#tree = ET.parse(data)
for elem in tree.iter('entry'):
    print elem.tag, elem.attrib 
```

现在，如果我从迭代器中删除“条目”，我会得到这样的输出（为什么是 URL？？）：

```
{http://www.w3.org/2005/Atom}entry {}
{http://www.w3.org/2005/Atom}id {}
{http://www.w3.org/2005/Atom}published {}
{http://www.w3.org/2005/Atom}updated {}
{http://www.w3.org/2005/Atom}title {'type': 'text'} 
```

但是，如果我这样放置 iter 语句，它仍然找不到要输入的子项：

```
for elem in tree.iter('{http://www.w3.org/2005/Atom}entry'):
    print elem.tag, elem.attrib 
```

我仍然只得到它自己的入口元素，而不是孩子：

```
{http://www.w3.org/2005/Atom}entry {} 
```

知道我做错了什么吗？

我到处搜索，但无法弄清楚......我对这一切都很陌生，如果这是愚蠢的事情，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:08:31.467

如果您正在解析 Atom 提要，您*真的*想改用该[`feedparser`库](http://pypi.python.org/pypi/feedparser/)，它会为您处理所有这些细节以及更多。

该`{http://www.w3.org/2005/Atom}`部分是一个命名空间。您需要指定该命名空间来选择`entry`标签：

```
for elem in tree.iterfind('ns:entry', {'ns': 'http://www.w3.org/2005/Atom'}): 
```

我使用字典将`ns:`前缀映射到命名空间，或者您可以使用相同的花括号语法：

```
for elem in tree.iterfind('{http://www.w3.org/2005/Atom}entry'): 
```

一旦你有了这个元素，你仍然需要明确地找到它的孩子：

```
for elem in tree.iterfind('{http://www.w3.org/2005/Atom}entry'):
    for child in elem:
        print child 
```

# css - Symfony2，加载没有缓存的css文件

> ID：14538681
> 
> 赞同：3
> 
> 时间：2013-01-26T16:02:25.400
> 
> 标签：css, caching, symfony, assetic

目前我正在做基于 symfony2 的网站设计，问题是如何禁用 css 文件的缓存？现在，如果我更改 css 文件中的某些内容 - 浏览器中没有任何更改。当我尝试缓存时：清除 - 仍然没有。

**配置.yml**：

```
# Assetic Configuration
assetic:
debug:          "%kernel.debug%"
use_controller: true
#bundles:        [ ]
#java: /usr/bin/java
filters:
    cssrewrite: ~
    #closure:
    #    jar: "%kernel.root_dir%/Resources/java/compiler.jar"
    yui_css:
        jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar" 
```

在**树枝上**

```
 {% stylesheets filter="cssrewrite" output="css/general.css"
        "@EveCommonBundle/Resources/public/css/main.css" 
        "@EveCommonBundle/Resources/public/css/another.css" %}
    <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
    {% endstylesheets %} 
```

我必须改变什么才能在浏览器中获取“最新”的 css 文件？

问题是当我更改`@EveCommonBundle/Resources/public/css/main.css`时，`web/css`仍然是旧的（由终端转储），并且没有重新创建，这就是为什么浏览器中没有显示“新更改”，并且我只能通过终端重新创建该文件......我怎么能在浏览器（文件夹中）的每个 F5 上获取 sf2 重新创建 css 文件`web/css`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:30:31.043

在您的开发环境中，即通过 访问您的站点时`app_dev.php`，资产的路径是动态生成的，因此每个更改都应该立即可见。

您可以使用以下命令自动创建资产（更多信息可以在食谱中找到，请参见下面的链接），但通常这不是必需的：

```
php app/console assetic:dump --watch 
```

当使用资产并且您想在生产环境中查看您的更改时，您必须首先转储资产以使其可访问：

```
php app/console assetic:dump --env=prod --no-debug 
```

有关更多信息，请阅读说明书中*如何使用 Assetic 进行资产管理中的*[转储资产文件](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files)部分。

 *如果一切都失败了，您可能希望在模板中使用以下内容：

```
{% if app.environment == 'prod' %}{% else %}{% endif %} 
```

仅在生产环境中使用资产。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:54:39.637

问题是......嗯，甚至不知道是什么，但是。当前的 config.yml 和控制台命令完成了他们的工作。（意味着我在 CSS 中所做的任何更改都会在浏览器中显示为“在线模式”）

```
assets:install web --symlink
assetic:dump web 
```

来自 config.yml 的部分

```
# Twig Configuration
twig:
    cache:            false

# Assetic Configuration
assetic:
    assets: 
        default_css:
            inputs:
                - '%kernel.root_dir%/Resources/public/css/default.css'

    debug:          "%kernel.debug%"
    use_controller: true
    bundles:        []
    #java: /usr/bin/java
    filters:
        cssrewrite: ~ 
```

也有帮助（也许，不知道）

```
// If you don't want to setup permissions the proper way, just uncomment the following PHP line
// read http://symfony.com/doc/current/book/installation.html#configuration-and-setup for more information

umask(0000); 
```

在树枝上它看起来像这样

```
{% stylesheets "@default_css" filter="cssrewrite" %}
    <link href="{{ asset_url }}" type="text/css" media="all" rel="stylesheet" />
{% endstylesheets %} 
```

有了这个参数，我可以从 css 创建\编辑\删除任何数据，它会立即显示在浏览器中。

PS：我显示代码“不常见”，config.yml 中的其他设置我认为与基本设置相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T16:16:18.663

缓存是一种标准的浏览器行为。您可以每次手动清除它，也可以设置缓存清单：[https](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache?redirectlocale=en-US&redirectslug=Offline_resources_in_Firefox) ://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache?redirectlocale=en-US&redirectslug= Offline_resources_in_Firefox 虽然这是 HTML5，但不是到处都支持。

禁用文件缓存的一种简单方法是在每次文件更改时更改 url：您可以将随机字符串或版本号附加到您的 href ：

```
<link rel="stylesheet" type="text/css" href="{{ asset_url }}?{{some_random_string_goes_here}}=0" /> 
```

或者

```
<link rel="stylesheet" type="text/css" href="{{ asset_url }}?VERSION={{version_number}}" /> 
```

随机字符串更易于调试，因为您无需在每次更改 css 时手动更新版本号。但是根据字符串的大小，您可能会不走运并两次获得相同的字符串...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:13:08.653

如果您在开发中使用 symfony 2 资产。环境，只需使用以下命令：

```
php app/console assets:install
php app/console assetic:dump --watch 
```

参考：[http ://symfony.com/doc/2.1/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment](http://symfony.com/doc/2.1/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment)*

# sorting - 对批处理文件结果进行排序

> ID：14538684
> 
> 赞同：3
> 
> 时间：2013-01-26T16:02:31.200
> 
> 标签：sorting, batch-file

我在批处理文件中有以下内容。

```
for /D %%A IN (*) DO echo %%A>> output.txt 
```

我希望结果按字母顺序排列，而不是按日期排序。

谁能建议如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:09:54.160

您可以使用 dir 命令对文件夹进行排序并回显它们...

```
for /f "delims=" %%a in ( 'dir /b /ad /oN') do echo %%a  >> output.txt 
```

如果你只想回显目录名

> 目录 /b /ad /oN >> output.txt

就够了……

在命令提示符下`help for`， `help dir` 非常有用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T16:09:41.560

只需使用`sort`命令。

```
for /D %%A IN (*) DO echo %%A>> output.txt
sort output.txt > sorted_output.txt 
```

`sort /?`您可以通过调用或[在此处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/sort.mspx?mfr=true)阅读有关此命令的更多信息。

正如您在命令的帮助中所读到的，您可以使用`/O`将输出重定向到文件而不是标准输出。这样您就可以避免需要两个文件：

```
for /D %%A IN (*) DO echo %%A>> output.txt
sort output.txt /O output.txt 
```

编辑：一个不错的单线可能是：

```
(for /D %%A IN (*) DO echo %%A) | sort > output.txt 
```

它也快得多，因为它在最后写入一次输出。

# c++ - 在 C++11 中使用正则表达式查找

> ID：14538687
> 
> 赞同：16
> 
> 时间：2013-01-26T16:02:45.460
> 
> 标签：c++, regex, c++11

为什么我不能在 C++11 中使用lookbehinds？前瞻工作正常。

```
std::regex e("(?<=a)b"); 
```

这将引发以下异常：

```
The expression contained mismatched ( and ). 
```

这不会抛出任何异常：

```
std::regex e("a(?=b)"); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-26T17:23:56.473

C++11`<regex>`使用 ECMAScript 的 (ECMA-262) 正则表达式语法，因此它**不会**有后视（C++11 支持的其他正则表达式也没有后视）。

如果您的用例需要使用后视，您可以考虑改用[Boost.Regex](http://www.boost.org/doc/libs/release/libs/regex/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-26T12:15:00.957

正向[后向](https://www.regular-expressions.info/lookaround.html) `(?<=a)`匹配字符串中紧接在后向模式前面的位置。如果不期望重叠匹配，就像这里的情况一样，您可以简单地使用[捕获组](https://www.regular-expressions.info/brackets.html)并仅提取组 1（如果您指定多个组值，则可以提取更多组值）：

```
a(b) 
```

这是一种使用以下方法提取所有匹配项的方法[`std::sregex_token_iterator`](https://en.cppreference.com/w/cpp/regex/regex_token_iterator)：

```
#include <iostream>
#include <vector>
#include <regex>

int main() {
    std::regex rx("a(b)");             // A pattern with a capturing group
    std::string sentence("abba abec"); // A test string
    std::vector<std::string> names(std::sregex_token_iterator(
        sentence.begin(), sentence.end(), rx, 1), // "1" makes it return Group 1 values
        std::sregex_token_iterator()
    );
    for( auto & p : names ) std::cout << p << std::endl; // Print matches
    return 0;
} 
```

如果您只需要提取第一个匹配项使用[`regex_search`](https://en.cppreference.com/w/cpp/regex/regex_search)（不是`regex_match`因为此函数[需要完整的字符串匹配](https://stackoverflow.com/questions/26696250/difference-between-stdregex-match-stdregex-search)）：

```
std::smatch sm;
if (regex_search(sentence, sm, rx)) {
    std::cout << sm[1] << std::endl;
} 
```

请参阅[C++ 演示](https://stackoverflow.com/questions/14538687/using-regex-lookbehinds-in-c11)。

# php - 使用php在数据库表中搜索多个关键字

> ID：14538690
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:03:13.557
> 
> 标签：php, mysql

我正在尝试制作一个搜索系统，但问题是我想打破输入字符串并使用php的explode（）函数将其分解，然后在表格的标题和描述列中搜索每个关键字。这是我为单个查询所做的事情

```
 $result = mysql_query("SELECT `name` 
            FROM texts 
            WHERE (title LIKE '%".$query."%' OR description LIKE '%".$query."%' ) ") 
            or die (mysql_error()); 
```

现在的问题是我将查询编写为

```
 $query_search = explode(" ",$query); 
```

现在关键字的数量是未知的，如果标题中存在所有关键字或描述中存在所有关键字，我想找到它。请帮帮我。

这就是我尝试过的

```
 $query_string_title = NULL ;
  $query_string_desc = NULL ;
 for($i = 0 ; $i< count($query_search) ; $i++){
     if($i == 0){
         $query_string_title .= "LIKE '%".$query_search[$i]."%'";
         $query_string_desc .= "LIKE '%".$query_search[$i]."%'";
         }
     else{
    $query_string_title .= "AND ad_title LIKE '%".$query_search[$i]."%'"; 
    $query_string_desc .= "AND description LIKE '%".$query_search[$i]."%'"; 
     }
     }
        $result = mysql_query("SELECT `name` FROM texts 
                                   WHERE (ad_title ".$query_string_title." 
                                   OR description ".$query_string_desc.")
                                   or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:53:57.980

我认为您尝试做的事情可以这样完成：

```
$string = "foo john doe";

$where = 'WHERE ('. implode(') OR (',
    array_map(
        function ($word)
        {
            return 'title LIKE \'%'. $word .'%\' OR description LIKE \'%'. $word .'%\'';
        },
        explode(" ", $string))
    ) .')';

$query = "SELECT `name` FROM texts $where";

var_dump($query); 
```

但是，这似乎不是解决您的问题的理想方法，请查看其他人已经提到的 FULLTEXT 搜索。

祝你好运 ：）

编辑 1：
如果您遇到错误，可能您使用的是旧版本的 php，因此请尝试：

```
function array_map_helper ($word)
{
    return 'title LIKE \'%'. $word .'%\' OR description LIKE \'%'. $word .'%\'';
}

$string = "foo john doe";

$where = 'WHERE ('. implode(') OR (', array_map('array_map_helper', explode(" ", $string)) ) .')';

$query = "SELECT `name` FROM texts $where";

var_dump($query); 
```

# sql - 按语句更改分组以使字段不被分组

> ID：14538691
> 
> 赞同：1
> 
> 时间：2013-01-26T16:03:22.227
> 
> 标签：sql, oracle11g

我有以下数据：

```
id   date_modified   value
1    some_date       4
1    some_date       3
1    some_date       1
2    some_date       5
3    some_date       8
3    some_date       7
... 
```

此查询获取最新日期`id`和最新日期`date_modified`：`date_modified`

```
select bh.id, max(bh.date_modified) 
from my_table bh
group by bh.id; 
```

这样做：

```
id   date_modified  
1    some_date       
2    some_date       
3    some_date       
... 
```

每个日期都是每个日期的最新日期，`id`这几乎是我想要的。

如何更改`group by`才能`value`退出？这是`value`我感兴趣的，但我需要使用`id`.

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:09:00.467

试试这个：

```
SELECT id, date_modified, value
FROM
(
    SELECT
        id, date_modified, value, ROW_NUMBER() OVER (PARTITIOn BY Id ORDER BY date_modified DESC) RN
    FROM tbl
) A
WHERE RN = 1 
```

# php - 使用 codeigniter 编辑记录

> ID：14538692
> 
> 赞同：2
> 
> 时间：2013-01-26T16:03:24.007
> 
> 标签：php, codeigniter

我在编辑数据库中的记录时遇到问题。我有一个表格，显示视图页面中的所有客户记录，在它们旁边我有一个锚链接来编辑记录。

我将 id 发送到名为 site/update 的控制器的函数，并通过使用获取 id

```
 $id = $this->uri->segment(3); 
```

然后我将 id 发送到 findRecord($id) 模型以获取数据库中与 id 对应的记录。

如果我 print_r 我得到的查询

```
 Array ( [records] => Array ( [0] => stdClass Object ( [id] => 2 [name] =>
 sdf [surname] => sdf [contact] => 35353 [email] => blabla@gmail.com ) ) ) 
```

我可以在控制器中而不是在视图中打印它

我该怎么做？问题出在哪里？

控制器代码：

```
 <?php

    class Site extends CI_Controller 
    {
        function __construct()
        {
            parent::__Construct();
            $this->is_logged_in();
        }

        function members_area()
        {
            $data=array();

            if($query=$this->site_model->getrecords()){
                $data['records']=$query;
            }
            $this->load->view('logged_in_area',$data);
        }

        function add() // just for sample
        {
            $this->load->view('add_clients');
        }

        function is_logged_in()
        {
            $is_logged_in = $this->session->userdata('is_logged_in');
            if(!isset($is_logged_in) || $is_logged_in != true)
            {
                echo 'You don\'t have permission to access this page. <a href="../login">Login</a>';    
                die();      
                //$this->load->view('login_form');
            }       
        }
        function create(){
                $this->load->library('form_validation');///// form validation to add clients

            // field name, error message, validation rules
            $this->form_validation->set_rules('name', 'Name', 'trim|required|xss_clean');
            $this->form_validation->set_rules('surname', 'Surname', 'trim|required|xss_clean');
            $this->form_validation->set_rules('contact', 'Contact Number', 'trim|required|min_length[4]');
            $this->form_validation->set_rules('email', 'Email Address', 'trim|required|valid_email');
            if($this->form_validation->run() == FALSE)
            {
                $this->load->view('add_clients');
            }else{
                $data=array('name'=>$this->input->post('name'),
                'surname'=>$this->input->post('surname'),
                'contact'=>$this->input->post('contact'),
                'email'=>$this->input->post('email'));
                $this->site_model->addRecords($data);
                $this->members_area();  
                }
        }
        function delete($id){
                $this->site_model->deleteRow($id);
                $this->members_area();
        }
        function update(){
            $data2=array();
            $id = $this->uri->segment(3);
        if($query=$this->site_model->findRecord($id)){
            $data2['records']=$query;
            //print_r($data2);
            $this->load->view('logged_in_area',$data2);
                }else{echo' nothing';}
            //$this->load->model('employesModel');
            //if($t=$this->site_model->findRecord($id)){
            //$this->load->view('update_clients',$data);
            //$this->site_model->updateRecord($data,$id);
        }
    } 
```

视图模型

```
 <body>
        <h2 style="text-align:left">Welcome Back, <?php echo $this->session->userdata('username'); ?>!</h2>
         <p>This section represents the area that only logged in members can access.</p><br/>
         <h2>Clients List</h2>
         <?php
         if(isset($records)):
         echo'<table align="left"  width="40%" cellpadding="6" cellspacing="3" border="0">
         <tr><td align="left"><b>Name</b></td><td align="left"><b>Surname</b></td><td align="left"><b>Phone number</b></td><td align="left"><b>Email address</b></td><td>
         </td></tr>';
          foreach ($records as $row): ?>
        <tr>
            <td><?php echo $row->name;?></td>
            <td><?php echo $row->surname;?></td>
            <td><?php echo $row->contact;?></td>
            <td><?php echo $row->email;?></td>
            <td align="center"><?php echo anchor("site/delete/$row->id",'Delete');?>&nbsp;<?php echo anchor("site/members_area/$row->id",'Update')?></td>
        </tr>
          <?php endforeach; echo '</table>'?>
          <?php else: ?>
          <h2>No records were returned</h2>
          <?php endif; ?><br/><br/><br/><br/><?php if(isset($data2))var_dump($data2);?><br/><br/>
    <p>
         <?php echo anchor('site/add','Add clients');?>&nbsp;
         <?php echo anchor('login/logout', 'Logout'); ?>
    </p>
    </body>
    </html> 
```

最后是模型

```
function findRecord($id){
    $query = $this->db->get_where('clients', array('id' => $id));
    return  $query->result();
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T00:29:14.097

看起来您正在接收数组中的数组，请尝试使用数组 $records['0'] 的索引而不是 $records。

```
E.g: $records['0'] as $row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:17:17.530

您没有获得任何数据来查看文件，因为您没有将数据发送给它。看看你的代码，你有一个拼写错误：

```
if($query**=**$this->site_model->getrecords()){
            $data['records']=$query;} 
```

尝试将 = 更改为 ==。

# java - 布局 JScrollPane 时何时调用 getPreferredScrollableViewportSize()？

> ID：14538693
> 
> 赞同：5
> 
> 时间：2013-01-26T16:03:28.797
> 
> 标签：java, swing, jscrollpane, scrollable, jviewport

实现 Scrollable 接口需要实现 getPreferredScrollableViewportSize() 方法。这通常通过将调用转发到 getPreferredSize() 来完成 - 除非 Scrollable 的其他参数可能会影响首选 JViewport 大小，例如 JTree 中的 setVisibleRowCount() 方法。

我有一种情况，我认为这种方法可以帮助我实现目标，但是在我的 getPreferredScrollableViewportSize() 实现中的一个简单的打印语句确认它永远不会被调用。搜索 JScrollPane、ScrollPaneLayout 和 JViewport 确认没有（直接）调用该方法。然而，JScrollPane 中的注释明确指出 ScrollPaneLayout 使用它，我可以确认它在 JTree 中按预期实现。

它何时被调用，由哪个类（可能是 LayoutManager）以及何时调用？我正在使用 JDK 1.7_07

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:40:00.693

我没有时间搜索所有源代码，但在测试中，看起来该方法是在打包 GUI 时调用的。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class TestScrollable extends JPanel {
   private static final int REPACK_COUNT = 10;
   protected static final int RESIZE_COUNT = 5;

   public TestScrollable() {
      MyScrollable mainScrollable = new MyScrollable("Main Scrollable");
      mainScrollable.setLayout(new GridLayout(0, 1));

      int rowCount = 100;
      for (int i = 0; i < rowCount; i++) {
         JPanel rowPanel = new JPanel();
         String name = "Row Panel " + i;
         rowPanel.setName(name);
         rowPanel.setBorder(BorderFactory.createLineBorder(Color.blue));
         rowPanel.setLayout(new BorderLayout());
         rowPanel.add(new JLabel(rowPanel.getName()));
         mainScrollable.add(rowPanel);
      }

      JViewport viewport = new JViewport() {
         @Override
         public void doLayout() {
            System.out.println("viewport doLayout called");
            super.doLayout();
         }

      };
      viewport.setView(mainScrollable);

      JScrollPane scrollPane = new JScrollPane() {
         @Override
         public void doLayout() {
            System.out.println("scrollpane doLayout called");
            super.doLayout();
         }
      };
      scrollPane.setViewport(viewport);
      setLayout(new BorderLayout());
      add(scrollPane);
   }

   private static void createAndShowGui() {
      TestScrollable mainPanel = new TestScrollable();

      final JFrame frame = new JFrame("TestScrollable") {
         @Override
         public void pack() {
            System.out.println("JFrame pack() called");
            super.pack();
         }
      };
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);

      int delay = 1000;
      // re-test pack()
      new Timer(delay, new ActionListener() {
         private int timerCount = 0;

         @Override
         public void actionPerformed(ActionEvent e) {
            System.out.println("timer count: " + timerCount);

            if (timerCount == RESIZE_COUNT) {
               int newWidth = frame.getSize().width * 2;
               int newHeight = frame.getSize().height * 2;
               Dimension newSize = new Dimension(newWidth, newHeight);
               frame.setSize(newSize);
               frame.repaint();
            }

            if (timerCount == REPACK_COUNT) {
               System.out.println("calling pack again");
               frame.pack();
               ((Timer) e.getSource()).stop();
            }
            timerCount++;
         }
      }).start();
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class MyScrollable extends JComponent implements Scrollable {
   public static final int VP_WIDTH = 600;
   private static final int ROW_COUNT = 10;

   public MyScrollable(String name) {
      super.setName(name);
   }

   @Override
   public Dimension getPreferredScrollableViewportSize() {
      System.out.println(getName()
            + " getPreferredScrollableViewportSize called");
      Component[] comps = getComponents();
      if (comps.length > 0) {
         int height = ROW_COUNT * comps[0].getPreferredSize().height;
         return new Dimension(VP_WIDTH, height);
      }

      return super.getPreferredSize();
   }

   @Override
   public Dimension getPreferredSize() {
      System.out.println(getName() + " getPreferredSize called");
      return super.getPreferredSize();
   }

   @Override
   public int getScrollableBlockIncrement(Rectangle visibleRect,
         int orientation, int direction) {
      if (orientation == SwingConstants.HORIZONTAL) {
         return VP_WIDTH;
      }
      Component[] comps = getComponents();
      if (comps.length > 0) {
         return comps[0].getHeight() * (3 * ROW_COUNT / 4);
      }

      return getSize().height / 3;
   }

   @Override
   public boolean getScrollableTracksViewportHeight() {
      return false;
   }

   @Override
   public boolean getScrollableTracksViewportWidth() {
      return true;
   }

   @Override
   public int getScrollableUnitIncrement(Rectangle visibleRect,
         int orientation, int direction) {
      if (orientation == SwingConstants.HORIZONTAL) {
         return VP_WIDTH;
      }
      Component[] comps = getComponents();
      if (comps.length > 0) {
         return comps[0].getHeight();
      }
      return getSize().height / 3;
   }

} 
```

返回：

```
JFrame pack() called
Main Scrollable getPreferredScrollableViewportSize called
Main Scrollable getPreferredSize called
scrollpane doLayout called
Main Scrollable getPreferredSize called
Main Scrollable getPreferredSize called
viewport doLayout called
Main Scrollable getPreferredSize called
scrollpane doLayout called
Main Scrollable getPreferredSize called
viewport doLayout called
Main Scrollable getPreferredSize called
timer count: 0
timer count: 1
timer count: 2
timer count: 3
timer count: 4
timer count: 5
scrollpane doLayout called
Main Scrollable getPreferredSize called
viewport doLayout called
Main Scrollable getPreferredSize called
scrollpane doLayout called
Main Scrollable getPreferredSize called
viewport doLayout called
Main Scrollable getPreferredSize called
timer count: 6
timer count: 7
timer count: 8
timer count: 9
timer count: 10
calling pack again
JFrame pack() called
Main Scrollable getPreferredScrollableViewportSize called
Main Scrollable getPreferredSize called
scrollpane doLayout called
Main Scrollable getPreferredSize called
viewport doLayout called
Main Scrollable getPreferredSize called
scrollpane doLayout called
Main Scrollable getPreferredSize called
viewport doLayout called
Main Scrollable getPreferredSize called 
```

**编辑 2**
当我将 getPreferredScrollableViewportSize 覆盖更改为：

```
@Override
public Dimension getPreferredScrollableViewportSize() {
  System.out.println(getName()
        + " getPreferredScrollableViewportSize called");
  StackTraceElement[] foo = Thread.currentThread().getStackTrace();
  int maxTraces = 10;
  for (int i = 0; i < foo.length && i < maxTraces ; i++) {
     System.out.printf("%02d: %s%n", i, foo[i]);
  }
  if (getComponentCount() > 0) {
     Component[] comps = getComponents();
     int height = ROW_COUNT * comps[0].getPreferredSize().height;
     return new Dimension(VP_WIDTH, height);
  }

  return super.getPreferredSize();
} 
```

这是我看到的：

```
Main Scrollable getPreferredScrollableViewportSize called
00: java.lang.Thread.getStackTrace(Unknown Source)
01: pkg.MyScrollable.getPreferredScrollableViewportSize(TestScrollable.java:115)
02: javax.swing.ViewportLayout.preferredLayoutSize(Unknown Source)
03: java.awt.Container.preferredSize(Unknown Source)
04: java.awt.Container.getPreferredSize(Unknown Source)
05: javax.swing.JComponent.getPreferredSize(Unknown Source)
06: javax.swing.ScrollPaneLayout.preferredLayoutSize(Unknown Source)
07: java.awt.Container.preferredSize(Unknown Source)
08: java.awt.Container.getPreferredSize(Unknown Source)
09: javax.swing.JComponent.getPreferredSize(Unknown Source) 
```

暗示 ViewportLayout 类的 preferredLayoutSize 就是调用 Scrollable 的 getPreferredScrollableViewportSize 方法。

**编辑 3**
事实上，[ViewportLayout 源代码](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/f097ca2434b1/src/share/classes/javax/swing/ViewportLayout.java)支持这一点：

```
 86     public Dimension preferredLayoutSize(Container parent) {
   87         Component view = ((JViewport)parent).getView();
   88         if (view == null) {
   89             return new Dimension(0, 0);
   90         }
   91         else if (view instanceof Scrollable) {
   92             return ((Scrollable)view).getPreferredScrollableViewportSize();
   93         }
   94         else {
   95             return view.getPreferredSize();
   96         }
   97     } 
```

# ios - 如何解决此警告：设置集合视图的第一响应者视图但我们不知道其类型（单元格/页眉/页脚）？

> ID：14538702
> 
> 赞同：3
> 
> 时间：2013-01-26T16:04:42.800
> 
> 标签：ios, ios6, uicollectionview

我正在尝试将搜索栏添加到我的收藏视图中。我要实现的是使用`- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText`方法过滤数据。

当我使用表格视图时，一切正常。在表格视图中，当我添加`UISearchBar`using`addSubView`方法时，我得到了几乎相同的警告，但是当我添加`UISearchBar`using`setTableHeaderView`方法时它消失了。

但是在集合视图中，不存在与表格视图执行相同的方法。所以我添加`UISearchBar`到补充标题视图中，如下所示：

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
{
    UICollectionReusableView *reusableView;
    if (kind == UICollectionElementKindSectionHeader) {
        reusableView = [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:@"HeaderView" forIndexPath:indexPath];
        [reusableView addSubview:self.searchBar];
    }
    return reusableView;
} 
```

当我`UISearchBar`通过这种方式添加对象时，我收到警告，“设置集合视图的第一响应者视图但我们不知道它的类型（单元格/页眉/页脚）？” 每次我点击搜索栏。

除了警告之外，它似乎工作正常，但是当我输入一些东西时我遇到了问题。如果我输入一个字母，键盘输入视图就会下降，所以我必须再次点击搜索栏才能继续搜索。如果我要搜索的单词是 5 个字母的单词，我必须点击搜索栏 4 次。太糟糕了。

我认为这是因为警告而发生的。我搜索了警告上下文，并找到了与此相关的唯一一篇关于 stackoverflow 的文章。（其他文章与表格视图有关。所有这些似乎都通过使用来修复`setTableHeaderView`。）

文章是[这样](https://stackoverflow.com/questions/12821670/what-does-this-warning-mean-setting-the-first-responder-view-of-the-collection)的。

但是我没有注册iOS开发者计划，所以我看不懂那篇文章。有没有人愿意帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T20:04:54.077

发生这种情况是因为在集合视图上调用“reloadData”时重新加载了标题视图，因此搜索栏失去了它的第一响应者状态。我能找到的唯一解决方法是在进行活动搜索时保留一个 BOOL，如果是，则在 collectionviews“cellForItemAtIndexPath”中将搜索栏设置为 firstResponder：

```
if(activeSearch && ![searchBar isFirstResponder])
{
    [searchBar becomeFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:22:38.040

```
This is  happening  because reloadData will also reloading the header. 
```

> 即您的旧标题从集合视图中删除，在您的数据源实现时排队和重用

不要担心这个警告。你可以忽略这个警告

# django - 如何让 Django 在管理站点的外键上使用 select_related()？

> ID：14538703
> 
> 赞同：3
> 
> 时间：2013-01-26T16:04:45.973
> 
> 标签：django

我有几个模型：`Review`，其中包含专辑评论字段，`Record`，这是专辑名称等，以及`Band`，这是乐队名称。`Record`有一个外键反对`Band`并且`Review`有一个外键反对`Record`。

在`Review`我想为所有`Record`s 显示一个下拉选择框的管理表单中。目前，用于的 unicode 方法`Record`只是：

```
def __unicode__(self):
    return self.record_name 
```

这不是很有帮助，所以我将其更改为：

```
def __unicode__(self):
    return self.band.band_name + ' - ' + self.record_name 
```

这现在为每个（3000 左右）添加一个查询`Record`，显然不好。

阅读[此答案](https://stackoverflow.com/questions/2279313/how-to-limit-queryset-the-records-to-view-in-django-admin-site)后，我尝试将其添加到我的模型管理员中`Record`：

```
def queryset(self, request):
    return super(RecordAdmin, self).queryset(request).select_related('band') 
```

不过，这并没有什么不同。

是否可以在模型表示中使用外键字段`__unicode__`而不会产生 n 平方查询？

更新：这是模型（删除了不相关的字段）：

```
class Review(models.Model):

    def __unicode__(self):
        # this is used in other places where we show review titles
        return self.record.band.band_name + ' - ' + self.record.record_name

    record = models.ForeignKey('Record')
    review_text = models.TextField()

class Record(models.Model):

    def __unicode__(self):
        # this generates a billion queries
        #return self.record_name
        return self.band.band_name + ' - ' + self.record_name  

    def band_and_title(self):
        return self.band.band_name + ' - ' + self.record_name

    band = models.ForeignKey('Band')
    label = models.ForeignKey('Label')
    record_name = models.CharField(max_length=175)

class Band(models.Model):

    def __unicode__(self):
        return self.band_name

    band_name = models.CharField(max_length=100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:26:35.950

鉴于您的评论，您实际上可能需要选择相关的记录*及其*乐队。像这样：

```
class ReviewAdmin(admin.ModelAdmin):
    model = Review
    def queryset(self, request):
        return super(ReviewAdmin, self).queryset(request).select_related('record', 'record__band')

class RecordAdmin(admin.ModelAdmin):
    model = Record
    def queryset(self, request):
        return super(RecordAdmin, self).queryset(request).select_related('band') 
```

使用[Django 工具栏](http://pypi.python.org/pypi/django-debug-toolbar)是发现正在运行的查询的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T20:02:40.390

您需要`select_related`在管理站点创建更改表单时注入。您可以通过覆盖[`ModelAdmin.formfield_for_foreignkey`](https://docs.djangoproject.com/en/1.8/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)您的 ModelAdmin 来做到这一点。像这样的东西：

```
class ReviewAdmin(admin.ModelAdmin):
    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == "record":
            kwargs["queryset"] = Record.objects.all().select_related()

        return super(ReviewAdmin, self).formfield_for_foreignkey(
            db_field, request, **kwargs) 
```

# assembly - 注册表编辑 - 关闭应用程序之前不保存密钥

> ID：14538707
> 
> 赞同：1
> 
> 时间：2013-01-26T16:05:03.447
> 
> 标签：assembly, masm, masm32

我正在为我的应用程序编写一个自动启动，但如果应用程序在重新启动之前没有正常关闭，我会遇到问题，密钥会丢失。我首先使用 RegCloseKey，现在我将其更改为 RegFlushKey，但它仍然无法正常工作。我必须添加什么才能立即写入注册表？

```
 WriteReg PROC 
          invoke RegCreateKeyExW,HKEY_CURRENT_USER,offset regkey,NULL,NULL,REG_OPTION_NON_VOLATILE,KEY_ALL_ACCESS,NULL,offset hIDKey,NULL
          .IF eax==ERROR_SUCCESS
            invoke lstrlenW,offset buf
            add eax,eax
            add eax,2
            invoke RegSetValueExW,hIDKey,offset keyname,NULL,REG_SZ,offset buf,eax
            invoke RegFlushKey,hIDKey
          .ENDIF 
 ret 
 WriteReg ENDP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:07:51.413

MSDN 状态：

> 如果函数成功，则返回值为 ERROR_SUCCESS。
> 
> 如果函数失败，则返回值是 Winerror.h 中定义的非零错误代码。

您是否检查过返回的值是什么`RegCreateKeyExW`？例如，您可能遇到访问权限问题。

调用也是一样`RegSetValueEx`：它会返回`ERROR_SUCCESS`吗？

作为一般经验法则，您应该*始终*检查 API 调用返回的代码。

# iphone - TableViewController with searchBar 先搜索慢

> ID：14538708
> 
> 赞同：1
> 
> 时间：2013-01-26T16:05:10.247
> 
> 标签：iphone, ios, ios6, uitableview

我正在开发一个带有连接**sqlite db的简单****TableViewController**应用程序。不幸的是，**第一次搜索（通过搜索栏）有点慢**，但仅在第一次调用期间。第一次查询后一切运行顺利，即使我关闭应用程序并重新打开它 - 仍然很顺利。

 ****如果我通过“ios 任务管理器”退出并重新打开它，第一次搜索又会变慢。

我认为这不取决于数据库，因为正在进行的查询没问题。我猜它有什么。与细胞或某事物的初始化有关。在表格视图中。目前我正在为单元格使用 nib 文件。然后我将其更改为使用单元格的编程方式 - 仍然没有变化。

如果我以“select * from ..”开始应用程序并显示结果，那么下面的搜索也很顺利。

有人对这种行为有任何意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:31:18.743

就我而言，这是因为 tableview 从数组中加载单元格。

我做了一个“假负载”

```
tableView.hidden = YES;

for (int i = 0; i < 200; i++)
{
    array addObject..
} 

[tableView reloadData]; 
```

然后在 0.1 秒后

```
[array removeAllObjects];
[tableView reloadData];

tableView.hidden = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:12:24.633

我将查看您连接到数据库的方式，因为问题仅在第一次搜索时出现。您还可以记录您的方法，以检查哪种方法花费您如此昂贵。例子

```
NSLog(@"%f",[NSDate timeIntervalSinceReferenceDate] * 1000); 
```

在每个方法的开头和结尾。****

# php - 收集所有表单输入并将其发布到一起的 php 代码

> ID：14538710
> 
> 赞同：0
> 
> 时间：2013-01-26T16:05:17.003
> 
> 标签：php

在我的页面中，我的表单包含多个 textarea，我需要一种方法来在一封电子邮件中收集所有 textarea，然后发送。

我需要一种方法，我可以将它添加到每个页面并自动执行此操作，而不是按名称引用每个文本区域。

```
$email_body = "You have received a new message from the user $name. \r\n".
    "Here is the answer to the $step. \r\n $message \r\n Comments:$comments.\r\n". 
```

而不是`$message`我想要所有的文本区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:10:01.293

让我们重新写下整个答案。

HTML 表单：[index.html]：

```
<html>
<body>
<form action="php_file.php" method="post">
<input type="text" name="field_1"/>
<input type="text" name="something_else"/>
<input type="text" name="third_field"/>
<input type="submit" name="submit" value="send!"/>
</form>
</body>
</html> 
```

PHP 文件（处理器）：[php_file.php:]

```
 $email_body = '';
    foreach($_POST as $key => $value)
    {
        $email_body .= "Field name: ".$key . "Value: ".$value."<br />";
    }

//send email with $email_body as the email body!
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "website@stacksomething.com";
$headers = "From:" . $from;
mail($to,$subject,$email_body ,$headers);
echo "Email was sent!"; 
```

# silverlight - Silverlight MenuItem 图标仅在图像已加载时才加载图像

> ID：14538711
> 
> 赞同：1
> 
> 时间：2013-01-26T16:05:34.060
> 
> 标签：silverlight, icons, contextmenu, menuitem

我有一些过去可以工作的代码现在不能工作（不知道是 SL4 -> SL5 还是其他导致此问题的更新）。

我正在为右键单击菜单即时创建 MenuItems，并且我正在分配图标，如下所示：

```
public static class XamlUtility
   {
        public static string makeResourcePngUri(string sName)
        {
            return "/MyApplication;component/Resources/" + sName + ".png";
        }

        public static BitmapImage getBitmapImageFromResources(string sName)
        {
            BitmapImage _bmi = null;
            _bmi = new BitmapImage(new Uri(makeResourcePngUri(sName), UriKind.Relative));

            return _bmi;
        }

        public static Image getImageFromResources(string sName)
        {
            Image _im = new Image();
            _im.Source = getBitmapImageFromResources(sName);

            return _im;
        }
    }

   public static class XamlUtility
   {
        public static string makeResourcePngUri(string sName)
        {
            return "/MyApplication;component/Resources/" + sName + ".png";
        }

        public static BitmapImage getBitmapImageFromResources(string sName)
        {
            BitmapImage _bmi = null;
            _bmi = new BitmapImage(new Uri(makeResourcePngUri(sName), UriKind.Relative));

            return _bmi;
        }

        public static Image getImageFromResources(string sName)
        {
            Image _im = new Image();
            _im.Source = getBitmapImageFromResources(sName);

            return _im;
        }
    }
...
        public static MenuItem addMenuItem(ContextMenu ctxmenu, string name, bool visible = true, MenuClickHandler clickHandler = null, string imageName = null)
        {
            string _name = name.Replace(' ', '_');
            MenuItem menu = new MenuItem()
            {
                Name = "mnu" + _name,
                Header = name,
                Icon = XamlUtility.getImageFromResources(imageName ?? _name)
            }; 
```

...

该图像仅在我之前加载时才加载（例如，在生成 ContextMenu 之前在某些 xaml 表单上创建图像控件）。

这曾经有效（修复的优先级不是很高，所以我不知道它什么时候停止工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:27:48.827

在您的 getBitmapImageFromResources 方法中添加

```
_bmi.CreateOptions = BitmapCreateOptions.IgnoreImageCache; 
```

# matplotlib - matlibplot 散点图链接图与列表中的特定元组

> ID：14538715
> 
> 赞同：0
> 
> 时间：2013-01-26T16:05:38.320
> 
> 标签：matplotlib

我有一个我在matplotlib中创建的散点图我也有一个像这样的元组列表，[(1,'A' 2),(2,'B',0),(0,'D',3)]我需要与我的图表上的某个情节相关联。说当您单击某个点时，它会与某些点对齐，或者将它们放在图表的底部，不同颜色的点与不同的序列相关，当您单击某个颜色的点时，它会在图表上突出显示与其相关的点

我只是想知道使用 matplotlib 是否可以实现这些中的任何一个，如果有，是否有任何好的网站可供使用或任何特定的方法来解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:48:12.400

使用[挑选事件](http://matplotlib.org/users/event_handling.html)。

单击标记时向散点图添加注释的简单示例：

```
N = 12
x = arange(N)
y = arange(N)
labels = [unichr(ord('a') + j) for j in range(N)]

def onpick(event):
    print labels[event.ind[0]]

fig = figure()
ax1 = fig.add_subplot(111)
col = ax1.scatter(x, y, 50,  picker=True)
#fig.savefig('pscoll.eps')

def onpick(event):
    ind = event.ind[0]
    print labels[ind]
    ax1.annotate(labels[ind], (x[ind], y[ind]), xytext=(x[ind] -1, y[ind] + 1),
                 arrowprops=dict(facecolor='black', shrink=0.05))
    fig.canvas.draw()

fig.canvas.mpl_connect('pick_event', onpick) 
```

（这假设您已使用 --pylab 启动 ipython 以正确导入）

您可以将代码替换为`onpick`您想要的代码（并记住存在闭包）。

这是一组很好的[演示](http://matplotlib.org/examples/event_handling/pick_event_demo.html)。

另见[`mpldatacursor`](https://github.com/joferkington/mpldatacursor)

# vb.net - vb.net 的“预期表达”是什么意思

> ID：14538717
> 
> 赞同：4
> 
> 时间：2013-01-26T16:05:47.873
> 
> 标签：vb.net, expression, listitem

我不知道在列表项类的括号后面放什么，所以他们说的是错误

> 预期表达

这是代码：

```
Dim NewEntry As New ListItem(CostOfGame & " " & Ps3Games & " " & GameID & " " & IsTheGameInStock & " " &) 
```

另外，您能否简单地向我解释一下列表项的作用，因为我仍然不明白？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T16:15:00.513

表达式末尾有一个额外的“&”。它应该只是：

```
Dim NewEntry As New ListItem(CostOfGame & " " & Ps3Games & " " & GameID & " " & IsTheGameInStock & " ") 
```

至于 ListItem 是什么以及它的作用，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)。我怀疑，尽管您想要的答案有点宽泛，超出了本网站的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:14:57.310

你有一个额外的＆符号在那里（最后一个）：

```
... IsTheGameInStock & " " &) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:14:43.053

这意味着您正在以不完整的方式使用语法。对于数学，您忘记在抛出异常的行上使用等号“=”。你忘了说例如

```
Dim x As Single

x = Math.Sqrt(16) 
```

但你正在做类似的事情

```
Math.Sqrt(16) 
```

或者你确实是这样的

```
InStr(string,"hello")>0 
```

代替

```
If InStr(string,"hello")>0 Then
   .....
End IF 
```

# python - 将类从 linux 迁移到 windows 的问题 - Urllib.request

> ID：14538718
> 
> 赞同：0
> 
> 时间：2013-01-26T16:05:53.960
> 
> 标签：python, linux, windows, urllib

我的这门课在 Linux 中表现完美。

```
class UrlRequestor(object):
    def __init__(self, url, headers, data):
        self.url = url
        self.headers = headers
        self.request = urllib2.Request(url)
        self.data = data
        self.data = data
        if self.data:
            self.request.add_data(self.data)
        for headerName, headerContent in self.headers.iteritems():
            self.request.add_header(headerName, headerContent)
    def open(self):
        self.content = urllib2.urlopen(self.request)
    def getHeader(self, headerName):
        return self.content.info().getheader(headerName)
    def getReturnData(self):
        return dict(json.loads(self.content.read()))
    def getRawReturn(self):
        return self.content.read()} 
```

我一直在尝试在 Windows 上运行它——出现了很多错误，包括缩进，我终于在这一点上卡住了。

我显然缺少 add_data 方法的“位置参数”。虽然我相信这是一个更大问题的征兆。

这是我拥有的代码。

```
class UrlRequestor(object):
    def __init__(self, url, headers, data):
        self.url = url
        self.headers = headers
        self.request = urllib2.Request(url)
        self.data = data
        self.data = data
        if self.data:
            self.request.add_data(self.data)
        for headerName, headerContent in self.headers.iteritems():

            self.request.add_header(headerName, headerContent)
    def open(self):
        self.content = urllib2.urlopen(self.request)
    def getHeader(self, headerName):
        return self.content.info().getheader(headerName)
    def getReturnData(self):
        return dict(json.loads(self.content.read()))
    def getRawReturn(self):
        return self.content.read() 
```

我不介意阅读，我不介意指出正确的方向。在这一点上，我很困惑，一点点指点也不会受到伤害。

非常感谢你们。

*编辑****** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

有关将来的信息，请检查 python 版本，安装 2.7.3 并运行与 linux 上完全相同的代码，没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:24:30.303

如果您使用的是 Python 2.7.x，`import urllib2`请放在文件的开头。

如果您使用的是 Python 3.x，[请注意](http://docs.python.org/2/library/urllib2.html)`urllib`有关Python 3.x 中库系列更改的说明：

> 注意： urllib2 模块在 Python 3 中被拆分为多个名为 urllib.request 和 urllib.error 的模块。将源代码转换为 Python 3 时，2to3 工具会自动调整导入。

对于您的情况，您要使用的库可以在[`urllib.request`](http://docs.python.org/3.3/library/urllib.request.html?highlight=urllib2#urllib.request.urlopen).

或者，在您的 Windows 机器上，选择使用与 Linux 机器上相同版本的 Python。在具有相同代码库的两个平台上使用 Python 3.x 时可能还有其他一些注意事项，而您并未完全考虑到这些注意事项。

# android - 将自定义数据/属性添加到 Android 中的按钮

> ID：14538721
> 
> 赞同：14
> 
> 时间：2013-01-26T16:06:05.080
> 
> 标签：android, android-button

我现在正在做的是从 API 中提取一些数据，并且对于响应中的每个项目，我膨胀布局并将另一个项目添加到布局中。

我想要的是有一个“添加到收藏夹”按钮，它将在 SQLite 数据库中添加当前项目。我已经创建了 DAO 的东西和 DB 处理，但是有一件事让我很烦恼。

当我单击按钮时，我不知道单击了哪个项目 ID 的按钮。我通常是一名网络开发人员，在网络上，一个按钮可以有`data-xxx="yyy"`属性，开发人员想要的位置`xxx`和位置。`yyy`

这在Android中可能吗？我有另一种解决方案，但它更像是“hack”：创建一个隐藏的 TextView 来保存我的项目 ID，并获取`onClick`事件以检查该 TextView（与按钮同级的那个）。还有其他想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-26T16:23:43.903

> 当我单击按钮时，我无法判断单击了哪个项目 ID 的按钮

`View`您可以使用该`setTag()`方法将任意数据添加到任何数据。当您为新项目扩展布局时，获取该项目的 id 并将其设置为与`Button`该项目对应的新扩展布局中的标签。然后，您将能够在`OnClickListener`for 中`Button`使用该方法检索标签（在您的情况下为 id），`getTag()`并愉快地将其插入数据库中。

# playframework - h2 持久存储：未找到数据库

> ID：14538725
> 
> 赞同：1
> 
> 时间：2013-01-26T16:06:22.043
> 
> 标签：playframework, h2, playframework-1.x

如果数据库不存在，H2 应该创建它。我修改了 url，将“mem”更改为“file”，并将下一个参数“play”更改为以新名称为后缀的路径，该名称将成为数据库。但是，我不断收到此异常：

```
Database error
A database error occured : No database found. Check the configuration of your application.

play.exceptions.DatabaseException: No database found. Check the configuration of your application.
    at play.db.DB.getConnection(DB.java:65)
    at play.modules.siena.PlayConnectionManager.getConnection(PlayConnectionManager.java:16)
    at play.modules.siena.SienaPlugin.onApplicationStart(SienaPlugin.java:138)
    at play.plugins.PluginCollection.onApplicationStart(PluginCollection.java:525)
    at play.Play.start(Play.java:526)
    at play.Play.detectChanges(Play.java:630)
    at play.Invoker$Invocation.init(Invoker.java:198)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.NullPointerException
    at play.db.DB.getConnection(DB.java:58) 
```

这是活跃的环境：

```
%h2dev.application.mode=dev
%h2dev.db.url=jdbc:h2:file:/var/stkdb/h2.db;MODE=MYSQL;LOCK_MODE=0
%h2dev.jpa.ddl=create
%h2dev.mail.smtp=mock 
```

有任何想法吗？我也安装了 GAE 模块。不过那应该没关系...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:40:11.500

您需要将以下行添加到您的`application.conf`:

```
%h2dev.db.driver=org.h2.Driver
%h2dev.db.user=sa 
%h2dev.db.pass= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:20:15.757

如列表中所述 - 您不能在 GAE 上使用文件系统数据库。如果您的意图是让它仅用于测试/开发，那么也许这会起作用。如果您想在 GAE 上部署此代码，您将走入死胡同，因为您将永远无法在 GAE 上使用 H2。

# compiler-construction - Maximal Munch：你怎么知道要制作哪些瓷砖？

> ID：14538726
> 
> 赞同：2
> 
> 时间：2013-01-26T16:06:25.927
> 
> 标签：compiler-construction, tree, subtree

您如何知道必须使用 Maximal Munch 在结构化树中制作哪些图块？“可能的最大子树”是什么意思？它们是指每条指令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:06:33.887

您为每条机器指令定义一个块（例如，“ADD Rn，+K”由块“R+K”表示），用于对代码生成有意义的指令（有些不，例如，“中断启用” ）。您还为每个您期望可能对代码生成有用的库例程定义一个图块（例如，在小型计算机上，您可能没有本机乘法，因此您将其定义为库例程，例如“CALL MULTIPLY" 表示 "R1 * R2" )。

然后，给定一组瓦片，Maximal Munch 方法瓦片树。

# android - 如何在文件夹中创建文件夹

> ID：14538733
> 
> 赞同：1
> 
> 时间：2013-01-26T16:07:06.990
> 
> 标签：android

所以我在内部存储中创建了一个文件夹，如下所示：

```
File folder1 = getBaseContext().getDir("DataBase", Context.MODE_PRIVATE); //Creating an internal dir; 
```

现在如何在该文件夹 1 中创建一个新文件夹？

我试过这个（如下），但这会创建一个文件而不是文件夹。. .

```
File insideFolder = new File (folder1,"Important Database"); 
```

我也尝试调用 mkdir 但似乎 insideFolder 仍然是一个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:17:37.170

> 现在如何在该文件夹 1 中创建一个新文件夹？

`new File(folder1, "subdirname").mkdir();`

> 现在如何在该文件夹 1 中创建一个新文件夹？

如果由于您之前的一些实验而该文件已经存在，`mkdir()`则不会将其删除。您需要自己删除它。

# javascript - 如何从 ContainerView 中清除所有 childView？

> ID：14538736
> 
> 赞同：0
> 
> 时间：2013-01-26T16:07:13.463
> 
> 标签：javascript, ember.js

我有一个带有边栏的 Ember 应用程序，其中包含可变数量的小部件。我正在使用 Ember.ContainerView 来存储小部件视图。

填充容器视图工作得很好（所有小部件都按应有的方式呈现）。

**问题是**当我想更新 ContainerView 时（因为应用程序状态发生变化，应该加载新的小部件），**当前的 childViews 不能被删除**......如果我调用`view.removeChild(child)`并且`child.remove()`对于每个 childView，实际上只有几个被删除。

我认为这与 Ember 为每次`remove()`调用更新 DOM 有关，但我无法弄清楚。我也尝试过使用`this.set('childViews',[])`而不是单独删除每个视图，但这会破坏整个视图。

我在这里错过了什么吗？

**代码：**

```
 // Clear current views
    this.get('childViews').forEach(function(_view) {
        view.removeChild(_view);
        _view.remove();
    });

    var view = this,
        childViews = this.get('childViews');

    // Create new views
    this.get('controller.content').forEach(function (widgetData) {
        childViews.pushObject(App.WidgetView.create({
           controller: App.WidgetController.create(widgetData),
           ...
        })
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:19:40.513

Em.ContainerView 上有一个 removeAllChildren 方法：

[http://emberjs.com/api/classes/Ember.ContainerView.html#method_removeAllChildren](http://emberjs.com/api/classes/Ember.ContainerView.html#method_removeAllChildren)

this.removeAllChildren() 应该可以解决问题。

# python - NLTK 没有找到需要的目录

> ID：14538737
> 
> 赞同：2
> 
> 时间：2013-01-26T16:07:20.163
> 
> 标签：python, macos, nltk

我在 Mac 上，我想制作一个程序来为我定义一个单词列表。为此，我按照Mac/Unix 机器[官方网站上的说明安装了 NLTK。](http://nltk.org/install.html)numpy 安装失败，不确定这是否会影响任何事情。但无论如何，从[这里](http://www.velvetcache.org/2010/03/01/looking-up-words-in-a-dictionary-using-python)处理一些示例代码我做了一个简单的程序

```
from nltk.corpus import wordnet
print(wordnet)
word = raw_input("Words to define? \n")
for word in word.split():
    for synset in wordnet.synsets(word):
        print("lexical type:", synset.lexname)
        print ("Definition:", synset.definition) 
```

我第一次这样做时遇到了一个错误，为了修复它，我在 python 提示符下运行了以下代码

```
import nltk
nltk.download() 
```

我安装了几乎所有的软件包（我认为不相关的那个），然后我再次运行了上面的代码。问题是现在我收到此错误

```
Traceback (most recent call last):
  File "/Users/pipsqueaker/Documents/workspace/wordDefine/main/main.py", line 10, in <module>
    for synset in wordnet.synsets(word):
  File "/Library/Python/2.7/site-packages/nltk/corpus/util.py", line 68, in __getattr__
    self.__load()
  File "/Library/Python/2.7/site-packages/nltk/corpus/util.py", line 56, in __load
    except LookupError: raise e
LookupError: 
**********************************************************************
  Resource 'corpora/wordnet' not found.  Please use the NLTK
  Downloader to obtain the resource:  >>> nltk.download()
  Searched in:
    - '/Users/pipsqueaker/nltk_data'
    - '/usr/share/nltk_data'
    - '/usr/local/share/nltk_data'
    - '/usr/lib/nltk_data'
    - '/usr/local/lib/nltk_data'
********************************************************************** 
```

我将我的 nltk 安装到 /usr/share/nltk_data 目录，并在 finder 中导航到它以确保它在那里，并且确实存在。我在 Eclipse 的 pydev 中使用 osx 的默认 python，语法版本为 2.7。您知道可能导致问题的原因吗？

另外，我认为它不是导入错误。我可以

```
import nltk 
print(nltk) #this runs nice 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:14:01.923

我认为这可能是由于路径问题。我的工作建议在使用包时使用虚拟环境和 pip 作为标准。

这里有一些很棒的笔记：[https ://python-guide.readthedocs.org/en/latest/](https://python-guide.readthedocs.org/en/latest/)

即使您不确定它是否“相关”，您也可能想尝试重新安装。错误消息可能是一般数据未找到。

# jquery - jQuery：将所有输入（选择、单选按钮、复选框等）的值从页面的一部分复制到另一部分

> ID：14538739
> 
> 赞同：1
> 
> 时间：2013-01-26T16:07:32.823
> 
> 标签：jquery, css, select, input, checkbox

有两个 div 具有不同的 id 但绝对具有相同的结构。

```
<div id="block1">
   <input type="text" class="class1" value="a">
   <input type="text" class="class2" value="b">
   <input type="checkbox" class="class3"> checkbox
   <select class="class4">
       <option value="0">White</option>
       <option value="1">Brown</option>
       <option value="2">Gray</option>
   </select>
</div> 
```

和

```
<div id="block2">
   <input type="text" class="class1" value="a">
   <input type="text" class="class2" value="b">
   <input type="checkbox" class="class3"> checkbox
   <select class="class4">
       <option value="0">White</option>
       <option value="1">Brown</option>
       <option value="2">Gray</option>
   </select>
</div> 
```

在一页上。

我希望两个块看起来完全一样。因此，如果您在 block1 中更改某些内容，则在 block2 中会发生同样的事情，如果 block2 分别发生更改，则对于 block1 也会发生相同的更改。

所以，我想要

```
$("#block1").change(function () {
    //apply ALL values from block1 to block2
});
$("#block2").change(function () {
    //apply ALL values from block2 to block1
}); 
```

这包括来自输入文本、输入复选框甚至选定选项的值的值。所有输入的类别和类型分别完全相同，选择框中选项的数量和值也分别相同。

使用 jQuery 的最短方法是什么？是否可以使用一个 jQuery 字符串“复制”这些值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:59:24.747

为所有元素创建一个通用更改处理程序：

向主要元素添加一个类：

```
<div id="block1" class="blockClass"> 
```

JS

```
 /* ":input" selector includes all form controls*/
 $('.blockClass :input').change(function () {
    var $this = $(this);
    var $otherInput = $('.blockClass').not($this.closest('.blockClass')).find('.' + this.className);
    var isCheckable = $this.is(':radio,:checkbox');
    if (isCheckable) {
        $otherInput.prop('checked', this.checked);
    } else {    
        $otherInput.val($this.val());
    }
}) 
```

演示：http: [//jsfiddle.net/5ghRS/](http://jsfiddle.net/5ghRS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:51:05.170

文本框值可以通过使用以下内容进行概括：

```
$(function() {
            $(".class1").live('keypress', function() {
                $(".class3").val($(this).val());
            });
            $(".class2").live('keypress', function() {
                $(".class4").val($(this).val());
            });

        }); 
```

[**FIDDLE**](http://jsfiddle.net/nRymf/2/)用于从第一个和第二个复制值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T16:11:07.750

我想说可以使用单行复制策略，但只能用于单一类型的输入标签。问题是不同输入标签的“值”必须以不同的方式处理。因此，要么您需要复制策略中的条件（回调或切换），要么您需要不同的复制处理程序。

我会选择后者，因为您可以使用 jquery 选择器轻松识别不同类型的输入标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T16:15:14.300

这将正常工作。这里的第一行只是清除现有的`html`并附加克隆的对象`#block1`

您必须手动触发另一行代码选择下拉列表的值

```
$("#block2").html('').append($("#block1").clone(true))
//$("#block2 select").val($("#block1 select").val()) 
```

**更新：**

```
$("#block1 select").each(function(){
       var cls = $(this).attr("class");
       $("#block2").find("select."+cls+"").val($(this).val());
   }); 
```

**更新：**

它工作正常。看[小提琴](http://jsfiddle.net/nRymf/3/)

**更新 2**

更新`clone()`以`clone(true)`指定事件处理程序也应该被复制

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T16:19:48.023

让我们把它变成动态的。

对于`<input type="text" />`信息将被传输`onkeyup`，意味着您输入它的那一刻。

For `<input type="checkbox" />`information will be transfer `onchange`，表示此复选框的状态发生更改（选中或未选中）的时刻。

对于`<select></select>`信息将被传输`onchange`，意味着您更改所选值的那一刻。

```
<div id="block1">
   <input type="text" id="id1" class="class1" value="a" onkeyup="Update()">
   <input type="text" id="id2" class="class2" value="b" onkeyup="Update()">
   <input type="checkbox" id="id3" class="class3" onchange="Update()"> checkbox
   <select class="class4" id="id4" onchange="Update()">
       <option value="0">White</option>
       <option value="1">Brown</option>
       <option value="2">Gray</option>
   </select>
</div> 
```

请注意，最好使用`ID`而不是`CLASS`.

```
function Update()
{
    var input1 = document.getElementById("id1").value;
    var input2 = document.getElementById("id2").value;
    var checkbox1 = document.getElementById("id3").checked;
    var select1 = document.getElementById("id4").value;
    document.getElementById("id5").value=input1;
    document.getElementById("id6").value=input2;
    document.getElementById("id7").checked=checkbox1;
    document.getElementById("id8").value=select1;
}

<div id="block2">
   <input type="text" id="id5" class="class1" value="a" onkeyup="Update2()">
   <input type="text" id="id6" class="class2" value="b" onkeyup="Update2()">
   <input type="checkbox" id="id7" class="class3" onchange="Update2()"> checkbox
   <select id="id8" class="class4" onchange="Update2()">
       <option value="0">White</option>
       <option value="1">Brown</option>
       <option value="2">Gray</option>
   </select>
</div> 

function Update2()
{
    var input1 = document.getElementById("id5").value;
    var input2 = document.getElementById("id6").value;
    var checkbox1 = document.getElementById("id7").checked;
    var select1 = document.getElementById("id8").value;
    document.getElementById("id1").value=input1;
    document.getElementById("id2").value=input2;
    document.getElementById("id3").checked=checkbox1;
    document.getElementById("id4").value=select1;
} 
```

# vb.net - VB.NET 中动态控件的生成延迟

> ID：14538740
> 
> 赞同：0
> 
> 时间：2013-01-26T16:07:32.543
> 
> 标签：vb.net, delay

我正在尝试使用 VB.NET 在 .NET 中生成**1x1 像素图像的网格，使用以下代码：**

```
    对于 i = 1 到 500
        将 img 调暗为新的 ImageButton
        img.ID = "ibtn" + i.ToString
        img.ImageUrl = "图像/设计/click.gif"
        form1.FindControl("upperpanel").Controls.Add(img)
    下一个

```

**问题是**当我在 page_load 事件上运行它时生成 HTML 需要很长时间。谁能帮我加快控件的渲染速度。**另外**，我想在每个图像按钮上添加 Click 事件。我怎样才能做到这一点 ？？ 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:20:30.943

好的，首先要做的是获得一次面板控制。其次，创建您的 click 方法，然后添加您的处理程序。这需要在页面加载事件之前完成。当您需要添加处理程序时，使用 page_Init 事件来创建您的按钮。

```
 Private Sub WebForm1_Init(sender As Object, e As EventArgs) Handles Me.Init
    Dim tempPanel As Panel = form1.FindControl("upperpanel")

    If tempPanel Is Nothing Then
        Return
    End If

    For i = 1 To 500
        Dim img As New ImageButton
        img.ID = "ibtn" + i.ToString
        img.ImageUrl = "images/design/click.gif"
        AddHandler img.Click, AddressOf ImageButton_Click
        tempPanel.Controls.Add(img)
    Next
End Sub

Protected Sub ImageButton_Click(sender As Object, e As ImageClickEventArgs)
    Dim tempImageButton As ImageButton = CType(sender, ImageButton)

    Select Case tempImageButton.ID
        Case "ibtn1"
                    'blah
        Case Else
    End Select

End Sub 
```

就性能而言，预先设置面板控制将提高性能。应该不多吧。创建 500 个按钮需要一些时间。

# javascript - 如果“mousemove”和“click”事件同时触发怎么办？

> ID：14538743
> 
> 赞同：24
> 
> 时间：2013-01-26T16:07:44.333
> 
> 标签：javascript, jquery, events

我不知道这是否只是*Chrome*问题（现在无法检查），但是让我们尝试以下代码，其中我们将两个事件绑定到某个元素：

```
$("div").on({
    mousemove: function(e) {
        console.log("move");
    },
    click: function(e) {
        console.log("click");
    }
}); 
```

如果我们尝试单击元素，我们会发现由于某种原因`mousemove`，单击后会立即触发事件，因此在控制台中我们有：

```
>> ...
>> click
>> move 
```

**演示：http:** [//jsfiddle.net/gKqVt/](http://jsfiddle.net/gKqVt/)

请注意，这`mousedown`和`mouseup`事件在相同的情况下起作用。

我在 SO 上看到了很多关于同一个问题的问题，但没有一个（在我的搜索中）给出了直接的想法，为了只触发事件而*做*`click`什么。

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T16:35:00.443

Mousemove 似乎绑定到 Chrome 中的每个鼠标操作，因此每次鼠标“移动”时存储鼠标位置，并将其与之前的鼠标位置进行检查，以验证它确实“移动”了。

```
var currentPos=[];
$("div").on({
    mousemove: function(e) {
        if (e.pageX!==currentPos[0] && e.pageY !==currentPos[1]){
            currentPos=[e.pageX,e.pageY];
        this.innerHTML = "Event: " + e.type;
        console.log("move");
        }
    },
    click: function(e) {
        this.innerHTML = "Event: " + e.type;
        console.log("click");
    }
}); 
```

[演示](http://jsfiddle.net/gKqVt/8/show)| [资源](http://jsfiddle.net/gKqVt/8/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T16:27:36.713

这似乎是 Chrome 中的一个错误，早在 11 月就首次报告，并且仍然存在。

[铬问题 161464](http://code.google.com/p/chromium/issues/detail?id=161464)

如果您专门针对 Chrome，那么可能值得比较事件时间戳以绕过它（使用@ExplosionPills 建议的一些最小增量时间。但如果您正在寻找一般行为，似乎最好将它们视为单独的事件，因为在除 chrome 之外的每个浏览器中（可能还有 Safari？这个 bug 被标记为 webkit-core），它们实际上都是单独的事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T16:23:43.730

这种行为很奇怪，而且似乎并不普遍发生（对我来说发生在 Chrome/IE 中，但不是 FFX）。我想你还没有得到一个直接的答案，因为真的没有。

单击操作可能会稍微移动鼠标，但可能不是这样。可能只是浏览器的怪癖。这些甚至看起来都不是同一个事件，因为`stopImmediatePropagation`in`click`不会停止`mousemove`触发。如果你聚焦元素并按下键盘按钮，它实际上会触发`click`并且*只有* `click`.

既然这太离奇了，似乎唯一的办法就是时间。尽管这很麻烦，但我确实注意到这`click`发生在 1 毫秒*之前* `mousemove`，因此您可以通过比较点击时间戳 + 2（或 10）来接近：

```
mousemove: function(e) {
    if ($(this).data('lastClick') + 10 < e.timeStamp) { 
```

[http://jsfiddle.net/gKqVt/3/](http://jsfiddle.net/gKqVt/3/)

不过，这是非常具体的。您应该考虑不要在 mousemove 上立即发生行为，因为它非常频繁。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-05T03:24:56.200

为什么不只检查鼠标是否真的移动了，如下所示：

```
function onMouseDown (e) {
    mouseDown = { x: e.clientX, y: e.clientY };
    console.log("click");
}

function onMouseMove (e) {
    //To check that did mouse really move or not
    if ( e.clientX !== mouseDown.x || e.clientY !== mouseDown.y) {
        console.log("move");
    }
} 
```

[小提琴演示](http://jsfiddle.net/gKqVt/91/)

（我认为它在所有浏览器中仍然是正确的）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-27T12:51:26.277

当我需要区分 mousedown 和 mouseup 而不在两者之间拖动和 mousedown 和 mouseup 之间拖动时，我注意到了这种行为，我使用的解决方案如下：

```
var div = $('#clickablediv');
var mouseDown = false;
var isDragging = 0;
div.mousedown(function () {
   isDragging = false;
       mouseDown = true;
   }).mousemove(function () {
       if (mouseDown) isDragging++;
   }).mouseup(function () {
       mouseDown = false;
       var wasDragging = isDragging;
       isDragging = 0;
       if (!wasDragging || wasDragging<=1) {
           console.log('there was no dragging');
       }
   }); 
```

当我尝试它时，我注意到 periodacaly 一个简单的点击使“isDragging”等于 3 但不是很频繁

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-04T09:38:56.360

```
var a,b,c,d;
  $(".prd img").on({
	mousedown: function(e){
	  a= e.clientX, b= e.clientY;
	},
	mouseup: function(e){
	  c= e.clientX, d= e.clientY;
	  if(a==c&&b==d){
	    console.log('clicked');
	  }
	}
  });
```

尝试这个。这一项工作正确。*

# c# - WPF的DI工厂

> ID：14538748
> 
> 赞同：2
> 
> 时间：2013-01-26T16:08:35.923
> 
> 标签：c#, wpf, dependency-injection, ninject

我正在寻找一种无需调用 Ninject 方法即可注入依赖项的`Get`方法。

例如，在 ASP.NET MVC 中，我创建了一个继承自`DefaultControllerFactory`^([MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultcontrollerfactory%28v=vs.108%29.aspx))的类，并将其添加到带有`ControllerBuilder.Current.SetControllerFactory`^([MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbuilder.setcontrollerfactory%28v=vs.108%29.aspx))的控制器构建器的工厂中。一旦我这样做了，我就再也不会打电话了`Get`，它会自动填写。

**WPF是否有等价物？**

我需要一个适合大多数情况的通用答案，但如果我必须举个例子，我在 WPF 中做了一个控件，但是它在构造函数中有一个参数：

```
public AppVolumeSlider(IVolumeSetter volumeSetter) 
```

由于我的控件在标记中，WPF 当然会抱怨：`The type "AppVolumeSlider" does not include any accessible constructors.`.

如何让 Ninject/WPF 适当地填充它？

*注1：如果我在这个例子中做不到（我猜是因为标记），请给我一个一般性的答案。例如，如果我只是用类似的构造函数而不是控件创建一个类。我仍然需要知道这些信息。*

*注2：我有预感这可能与`Inject`属性有关，但我不知道。*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:25:42.680

查看各种 MVVM 框架，例如 Caliburn Micro：[http](http://caliburnmicro.codeplex.com/) ://caliburnmicro.codeplex.com/其中大多数都带有 IoC 容器支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:52:49.607

一些容器，如 Unity，具有为现有实例提供依赖项的功能。当然，这不适用于构造函数注入。但它可以用于属性/方法注入。

您可以创建 WPF 页面（或任何控件），它将加载标记，然后调用 Unity.BuildUp(your_object)。

或不同容器的等效功能。

# android - Android listview过滤器无法访问某些活动

> ID：14538753
> 
> 赞同：0
> 
> 时间：2013-01-26T16:09:25.787
> 
> 标签：android, listview

您好，我有一个活动，它有一个列表视图，自动完成文本视图，如果用户填写他的条目，它也会过滤列表视图。现在，当我从我的字符串数组中单击该项目时，它并没有达到预期的活动。请在下面检查我的代码：

```
private AutoCompleteTextView tv;
ArrayList<String> classesList = new ArrayList<String>( Arrays.asList( classes ) );

int textlength = 0;

ArrayList<String> text_sort = new ArrayList<String>();
ArrayList<Integer> image_sort = new ArrayList<Integer>();

lv = ( ListView ) findViewById( R.id.lvFruits );
    lv.setTextFilterEnabled(true);

    lv.setAdapter( new MyCustomAdapter( classes, imagesID ) );
    lv.setOnItemClickListener( this );

    ArrayAdapter<String> adapter = new ArrayAdapter<String>( this, R.layout.my_list_item, classesList );  

    tv = (AutoCompleteTextView) findViewById (R.id.txtSearchFruit);
    tv.setThreshold( 1 );
    tv.setAdapter( adapter );
    tv.setTextColor( Color.BLACK );

/**
     * Enabling Search Filter
     * */
    tv.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
                textlength = tv.getText().length();
                text_sort.clear();
                image_sort.clear();

                for(int i=0; i < classes.length; i++)
                {
                 if (textlength <= classes[i].length())
                 {
                  if (tv.getText().toString().
               equalsIgnoreCase((String) classes[i].subSequence(0, textlength)))
                  {
                   text_sort.add( classes[i] );
                   image_sort.add( imagesID[i] );
                  }
                 }
                }

                lv.setAdapter(new MyCustomAdapter
                         (text_sort, image_sort));
        }
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub
        }
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });

public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    // TODO Auto-generated method stub
    String selected = classes[lv.getFirstVisiblePosition()+position];

    if( selected.equals("Apple") ){
        Intent apple = new Intent(Fruits.this, Apples.class);
        startActivity(apple);
    }
    else if( selected.equals("Apricot") ){
        Intent apricot = new Intent(Fruits.this, Apricots.class);
        startActivity(apricot);
    }
    else if( selected.equals("Avocado") ){
        Intent avocado = new Intent(Fruits.this, Avocado.class);
        startActivity(avocado);
    }
}

final String[] classes = new String[] { 
        "Apple", // #0
        "Apricot", // #1
        "Avocado" // #2 } 
```

发生的事情是，当我选择 Avocado 时，它去了 Apples Activivty。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:23:14.693

> 如果用户填写他的条目，它会过滤列表视图。现在，当我从我的字符串数组中单击该项目时，它并没有达到预期的活动。

当您过滤 ListView 时，您会更改索引，因此您不能依赖`position`从`classes`. 只需获取行中的单词：

```
String selected = ((TextView) v).getText().toString(); 
```

* * *

看起来您为`classes`...中的项目创建了一个独特的 Activity。这是很多工作，您应该尝试创建一个*通用*类，该类可以根据用户的选择加载适当的数据。这种方法编写起来要快得多，也更容易维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:16:07.027

要解决此错误，请使用此

```
tv.setThreshold( 2 ); 
```

而不是这个

```
tv.setThreshold( 1 ); 
```

**编辑 ：**

对于项目选择，请使用这种最简单的方法。

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    // TODO Auto-generated method stub

    if(classes[position].compareTo("Apple")==0){
        Intent apple = new Intent(Fruits.this, Apples.class);
        startActivity(apple);
    }
     if(classes[position].compareTo("Apricot")==0){
        Intent apricot = new Intent(Fruits.this, Apricots.class);
        startActivity(apricot);
    }
     if(classes[position].compareTo("Avocado")==0){
        Intent avocado = new Intent(Fruits.this, Avocado.class);
        startActivity(avocado);
    }
} 
```

# perl - Perl - 如何抑制分叉子进程的输出

> ID：14538764
> 
> 赞同：1
> 
> 时间：2013-01-26T16:11:13.497
> 
> 标签：perl, process, fork, stdout

我有一个 perl 脚本，它必须在 exec 中调用 tar。

```
exec("tar zcf /tmp/mytarball.gz directoryToTarBall > /dev/null 2>&1" or die ("$!") 
```

这是一个我已经分叉的子进程，与此同时，我正在通过向 STDOUT 写一个句号来监视 tar 的进度。我遇到的问题是我不希望 tar 在创建 tarball 时变得冗长 - 我不希望输出回显到 stdout ....我只希望进度计数器（句号）回显到屏幕。我以为我可以在 exec 命令中传递 a `>/dev/null 2>&1`，但这不起作用。

任何想法都非常受欢迎。谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:41:51.803

使用该`exec LIST`表格来避免由于 shell 引用而引起的意外。这还需要执行 shell 将为您执行的重定向。

```
use 5.10.0;  # //

my $pid = fork // die "$0: fork: $!";   # / fix Stack Overflow highlighting
if ($pid) {
  waitpid $pid, 0 or die "$0: waitpid: $!";
  warn "$0: child exited abnormally" if $?;
  print ".\n";  # done!
}
else {
  open STDOUT, ">",  "/dev/null" or die "$0: open: $!";
  open STDERR, ">&", \*STDOUT    or exit 1;
  exec "tar", "zcf", "/tmp/mytarball.gz", "directoryToTarBall";
  exit 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:16:31.647

```
perl -e "exec(\"ls >/dev/null\")" 
```

至少对我有用。试`2>&1`

这种令人费解的混乱也有效

```
perl -e "exec(\"ls >&2 2>&1 1>/dev/null\")" 
```

即使这样也行，认为它可能不应该

```
perl -e "exec(\"ls 1>&2 >/dev/null\")" 
```

你到底卡在哪里了？

# android - Android GCM - 找不到类异常

> ID：14538768
> 
> 赞同：2
> 
> 时间：2013-01-26T16:11:38.237
> 
> 标签：android, google-cloud-messaging

我正在尝试将 GCM 与 appengine 一起使用，如 google's tutorial 所示。在服务器端，当我尝试这样做时：

```
 Sender sender = new Sender(API_KEY);
com.google.android.gcm.server.Message message = new com.google.android.gcm.server.Message.Builder().addData("message",m).build();
for (String regId : u.getDeviceIds()) {
    try {
        Result result = sender.send(message,regId, 3);
        System.out.println("Message to " + u.getName() + " : " + result);
    } catch (IOException e) {

    }
} 
```

我越来越：

```
 org.restlet.resource.UniformResource doCatch: Exception or error caught in resource
java.lang.NoClassDefFoundError: org/json/simple/parser/ParseException
    at il.ac.technion.ssdl.hitch.model.GCMServices.sendMessage(GCMServices.java:24) 
```

GCMServices.java 的第 24 行是`Sender sender = new Sender(API_KEY);`

关于类路径，我有：

```
<classpathentry kind="lib" path="war/WEB-INF/lib/gcm-server.jar"/> 
```

这是正确的路径。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:25:58.880

这是一个常见的问题，下载这个，添加到类路径： [SimpleJson](http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar)

# dns - DNS 权威名称服务器

> ID：14538770
> 
> 赞同：0
> 
> 时间：2013-01-26T16:12:05.037
> 
> 标签：dns, wireshark, domain-name

我使用 Wireshark 来捕获 DNS 数据包。在响应数据包中，我可以看到这一行 - 权威名称服务器。问题：为什么有时服务器会响应 4 或 5 个权威名称服务器，而有时只有 1 个？如果有一个权威域名服务器列表，我怎么知道IP地址信息究竟来自哪一个？以及如何找到包含特定域名信息的权威域名服务器的总列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:11:12.567

您是在谈论 DNS 响应中的权限部分吗？如果该部分包含任何服务器（它不需要包含任何服务器），那么它们都应该能够为您提供有关查询的权威答案。但是，生成响应的（递归）名称服务器不需要（不能）保证，它也不会告诉您它查询了哪一个来获得响应：它甚至可能查询了多个，或者根本没有查询（如果它从它的缓存中回答）。

如果您只想获取域的权威服务器列表，请查询该域的`NS`记录并查看答案部分（而不是权威部分）。这是该区域的作者规定的已发布信息，关于应该使用哪些名称服务器来获得该域的权威响应。

# c# - Lync 2010 UMCA 3.0 自动安排会议加入用户

> ID：14538772
> 
> 赞同：0
> 
> 时间：2013-01-26T16:12:25.373
> 
> 标签：c#, .net, lync-2010, ucma

我已经实现了一项服务，它能够在 Lync 2010 中安排会议，可供使用 WEB 客户端的外部用户使用。

但是还有一个问题。我希望能够在很远的将来安排会议，当用户通过 WEB 客户端登录时，所有受邀用户都应该自动添加到会议中。这可能吗？我是否必须在 Lync 服务器上进行配置，或者这可以在我安排会议时实现（在我的 C# 代码中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:39:59.613

您需要与受邀者共享您安排的会议的会议 URI。当您在 C# 代码中安排会议时，您可以获取会议 URI。您可以使用会议属性选项来控制用户是在大厅等待还是直接进入会议。

# git - 本地文件系统中的 Git 推送；可行的工作流程解决方案？

> ID：14538776
> 
> 赞同：4
> 
> 时间：2013-01-26T16:12:39.170
> 
> 标签：git, version-control

假设我有一个 Git 存储库文件夹，我在其中进行所有开发。master 分支代表生产代码，任何开发都根据需要从不同的分支合并。没关系。现在，如果我想将 master 分支推送到本地文件系统中的某个位置（例如，同级文件夹），每当我想将 master 分支推出到生产环境时怎么办？

这可能吗，用Git？例如，假设我有我的项目`~/development/myProject-dev`，我可以将主分支`~/development/myProject`作为实时镜像推送吗？也就是说，`~/development/myProject`可以公开访问，而其`-dev`兄弟的访问权限受到限制？

如果这没问题，这似乎是一个很好的解决方案，因为它`~/development/myProject`也将是一个 repo，并且总是可以回滚到稳定状态，如果说开发中所做的更改引入了错误。你同意这是一个可行的工作流程吗？是否有更好的方法（例如，Git 挂钩等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:59:09.863

您可以使用 git 在本地推送和推送。你也可以只克隆一个分支到一个新的仓库：

```
git clone ~/development/myProject-dev -b master ~/development/myProject 
```

此命令应*仅从*您的 myProject-dev 存储库中克隆主分支。

# android - 微调器获取文本拟合

> ID：14538783
> 
> 赞同：1
> 
> 时间：2013-01-26T16:13:02.153
> 
> 标签：android, spinner, android-spinner

我有一个 Spinner，我想用一个格式如下的货币数组填充这个：

USD - 美元

这不适合小屏幕，但它在微调器的箭头上运行非常难看。

有没有办法只在主布局屏幕上显示货币的 3 个字母代码，但是一旦单击 Spinner 并打开列表，就会出现上面提到的全名格式。或者更好的是，只显示适合的文本，但不要越过下拉箭头？

我现在使用 substring 只显示前 3 个字符，但这看起来不太好（很难找到货币）。

谢谢！

编辑：

我有以下布局：

```
 <Spinner
        android:id="@+id/currency"
        android:layout_width="wrap_content"
        android:layout_height="48dp"
         android:ellipsize="end"
        android:maxLines="1"
        android:paddingRight="8dp" /> 
```

这就是我不想要的：

![屏幕截图微调器](../Images/a40f27e0720f7162fe413def103c6127.png)

如您所见，来自南非兰特的文本直接穿过微调器的箭头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:16:17.403

与`SpinnerAdapter`您一起使用的`Spinner`被调用以`getView()`使条目进入弹出列表并`getDropDownView()`让条目进入`Spinner`自身。欢迎您实施您的`SpinnerAdapter`，让这些成为您想要的任何东西。因此，如果您想要`getDropDownView()`返回带有三字母货币代码的东西，或者使用`android:ellipsize`，或者其他什么，您可以这样做。

# apache - 重写规则不起作用

> ID：14538784
> 
> 赞同：0
> 
> 时间：2013-01-26T16:13:05.840
> 
> 标签：apache

我开始在 .htaccess 文件中尝试重写规则。我正在尝试使用 RewriteRule 更改 url，但无法完成。
需要从访问时获取内容user
`user.php?user=3&name=xyz`= anydigit and name=anyname`user.php/xyz`

我正在使用的当前代码是

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^/user.php/([0-9]+)/([a-z]+)$ /user.php?user=$1&name=$2 
</IfModule> 
```

当我使用上面的代码时，什么都没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:16:10.890

因为您正在访问错误的页面。.htaccess 上的规则说你应该访问一个 url，`user.php/3/xyz`而不是`user.php/xyz`

# php - PHP下载PDF总是导致损坏文件的文件类型不受支持

> ID：14538786
> 
> 赞同：0
> 
> 时间：2013-01-26T16:13:14.923
> 
> 标签：php, header, download, flush

我正在尝试允许我网站的用户下载文件。不仅如此，我想将它烘焙到我创建/正在使用的前端控制器框架中。我可以进行下载，但是当尝试打开文件时，Adobe Reader 总是给出一个错误，指出该文件的类型不受支持或已损坏。在我的下载中，它说文件的大小是 0KB，这显然是错误的，所以我猜它已经损坏了。我不知道为什么。

我可以让下载工作，但跳过我的前端控制器框架并让它直接运行下载脚本。这个脚本看起来像这样，被称为 downloadManager.php，并从带有 href="/myApp/downloads/downloadManager.php 的链接调用：

```
<?php
 header("Content-Type: application/octet-stream");

$file = "eZACKe_1359081853_Week Three Sprints & Hurdles Workout 24th - 28th of Sept    (1).pdf";
header("Content-Disposition: attachment; filename=" . $file);
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
 header("Content-Description: File Transfer");
header("Content-Length: " . filesize($file));
flush(); // this doesn't really matter.
$fp = fopen($file, "r");
while (!feof($fp)) {
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
}
fclose($fp);
?> 
```

这行得通，但我想保持我的框架正常工作。这是使用我的框架的代码流，链接 href 为 href="/myApp/downloadz?type='resume'&id='8'"：

url 被 apache 重写并转到 index.php，这是我的前端控制器：

```
<?php
class Foo {
static public function test($classname)
{
    if(preg_match('/\\\\/', $classname))
    {
        $path = str_replace('\\', '/', $classname);
    }
    else
    {
        $path = str_replace('_', '/', $classname);
    }

    if (is_readable($path.".php"))
    {
        require_once $path .".php";
    }
}
}
spl_autoload_register('\Foo::test');

\controller\Controller::run();
?> 
```

这导致一个控制器：

```
static function run()
{
    $instance = new Controller();
    $instance->init();
    $instance->handleRequest();
} 
```

init 建立一个 PDO MySQL 连接，并使用 Simple_XML_Load 加载一些配置文件

然后，

```
 function handleRequest()
{
    $request = new \controller\Request();
    $cmd_r = new \commands\common\CommandResolver();
    $cmd = $cmd_r->getCommand($request);
    $presenter = $cmd->execute($request);

    if(!$request->getProperty('ajax') && !is_a($cmd, '\commands\Download\DownloadCommand')) {
        echo $this->handleRender($request, $presenter);
    }
} 
```

这里唯一需要注意的是 getCommand 并检查文件是否存在并使用反射

然后调用$cmd->execute，此时我们调用DownloadzCommand::execute，

```
 function execute(\controller\Request $request) {

    parent::execute($request);

    if($this->request->getProperty("type") == "resume" || $this->request->getProperty("type") == "coverLetter") {
        $this->handleJobApplicationDownload();
    }
}

private function handleJobApplicationDownload() {
    if(!$this->loggedInMember) {
        exit;
    }

    try {
        $idobj = new \mapper\IdentityObject ();
        $jobApplication = \domain\JobApplication::produceOne($idobj->field("jobApplication.jobApplicationId")->eq($this->request->getProperty("id"))->field("jobApplication.jobId")->eq("jobs.jobId", false)->field("businesses.businessId")->eq("jobs.businessId", false)->field("jobApplication.dateApplicationViewed")->isnull("", false), null, "JobBusinessJoin");

        // get here the jobApplication is legit - now make sure the logged in member is a recruiter for this business
        $idobj = new \mapper\IdentityObject ();
        $business = \domain\Business::produceOne($idobj->field("businessId")->eq($jobApplication->getState("businessId")));

        if(!$business->isRecruiter($this->loggedInMember->getId())) {
            exit;
        } else {
            if($this->request->getProperty("type") == "resume") {
                if($path = $jobApplication->getState("resumeUploadPath")) {
                    // have a resume path, move it over
                    $fullPath = "common/jobs/resumes/".$path;

                    $tempDest = "commands/Downloadz/$path";
                    copy($fullPath, $tempDest);
                } else {
                    exit;
                }
            } elseif($this->request->getProperty("type") == "coverLetter") {
                if($path = $jobApplication->getState("coverLetterUploadPath")) {
                    // have a coverLetter path, move it over
                    $fullPath = "common/jobs/coverLetters/".$path;
                } else {
                    exit;
                }
            }
        }
    } catch(\base\ObjectDoesNotExistException $e) {
        echo "nope";
    }

    header("Content-Type: application/octet-stream");
    header("Content-Disposition: attachment; filename=" . $path);
    header("Content-Type: application/octet-stream");
    header("Content-Type: application/download");
    header("Content-Description: File Transfer");
    header("Content-Length: " . filesize($path));
    flush(); // this doesn't really matter.
    $fp = fopen($file, "r");
    while (!feof($fp)) {
        echo fread($fp, 65536);
        flush(); // this is essential for large downloads
    }
    fclose($fp);

    unlink($path);

} 
```

此时下载发生。虽然我打开文件，但它已损坏。

请注意，即使是简单的文本文件也会发生同样的事情。

此外，即使我跳过文件复制部分并将文件最初放在 commands/Downloadz 目录中，它也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:15:39.810

而不是使用：

```
$fp = fopen($file, "r");
while (!feof($fp)) {
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
}
fclose($fp); 
```

利用[`readfile()`](http://us3.php.net/manual/en/function.readfile.php)

```
readfile($file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T08:08:13.667

我遇到了同样的问题，但在阅读[http://davidwalsh.name/php-force-download](http://davidwalsh.name/php-force-download)之后，现在正在工作。

```
header('Pragma: public');  // required
header('Expires: 0');  // no cache
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Cache-Control: private', false);
header('Content-Type: application/pdf');
header('Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime($filepath)) . ' GMT');
header('Content-disposition: attachment; filename=' . $pathinfo['filename'] . '.pdf');
header("Content-Transfer-Encoding:  binary");
header('Content-Length: ' . filesize($filepath)); // provide file size
header('Connection: close');
readfile($filepath);
exit(); 
```

这对我有用。

# objective-c - 在每个 CGEventPost 之间添加中断

> ID：14538793
> 
> 赞同：2
> 
> 时间：2013-01-26T16:14:40.310
> 
> 标签：objective-c, macos, cocoa, events

好的，所以我正在使用 LEAP Motion，如果您之前没有听说过它，它是一种发射激光的设备，通过电缆发送图像并处理该图像以产生手指、手等数量的结果. 它每毫秒左右通过帧拍摄这些数据（我认为）。

所以我正在做的是检测 Leap 上方是否有一根手指，然后我使用以下代码：

```
CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStateCombinedSessionState);

CGEventRef pressedDKeyDown = CGEventCreateKeyboardEvent(source, (CGKeyCode)0x02, YES);

CGEventRef pressedDKeyUp = CGEventCreateKeyboardEvent(source, (CGKeyCode)0x02, NO);

CGEventPost(kCGAnnotatedSessionEventTap, pressedDKeyDown);
CGEventPost(kCGAnnotatedSessionEventTap, pressedDKeyUp);

CFRelease(pressedDKeyDown);
CFRelease(pressedDKeyUp);
CFRelease(source); 
```

它模拟了“D”键的按下，它起作用了！但是次数太多了！由于 LEAP Motion 每毫秒左右更新一次帧图像，因此 D 键被按下了太多次。我想在每次点击之间添加一个休息时间，最好在每个预定事件之间添加大约 0.5 秒。

有什么办法可以做到这一点？我应该设置一个`NSTimer`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:37:07.740

为什么不只记录您发布密钥的时间。当以后的事件到达时，检查当前时间与最后一次发布密钥的时间。如果时间不够用，则忽略当前事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:59:22.500

您可以从在 Leap 上方检测到一根手指时调用的方法中调用第二种方法：

```
[self performSelector:@selector(pressDKey) withObject:nil afterDelay:0.5]; 
```

调用第二种方法`pressDKey`，然后将发布按键事件的代码放入其中。不要忘记将以下内容也放入`pressDKey`方法中：

```
[self cancelPreviousPerformRequestsWithTarget:self selector:@selector(pressDKey) object:nil]; 
```

# android - Android SMS：按线程 ID 分组

> ID：14538798
> 
> 赞同：2
> 
> 时间：2013-01-26T16:15:25.860
> 
> 标签：android, android-contentprovider

我正在实现一个 SMS 应用程序，到目前为止，我实现了获取所有消息（发送、接收、草稿）及其联系号码、线程 ID、联系人 ID、日期、类型。

这是我的代码：

```
Uri mSmsinboxQueryUri = Uri.parse("content://sms");
        Cursor cursor = _context.getContentResolver().query(
                mSmsinboxQueryUri,
                new String[] { "_id", "thread_id", "address", "date", "body",
                        "type" }, null, null, null);

        String[] columns = new String[] { "address", "thread_id", "date",
                "body", "type" };
        if (cursor.getCount() > 0) {

            while (cursor.moveToNext()) {

                String address = null, date = null, msg = null, type = null, threadId = null;

                address = cursor.getString(cursor.getColumnIndex(columns[0]));
                threadId = cursor.getString(cursor.getColumnIndex(columns[1]));
                date = cursor.getString(cursor.getColumnIndex(columns[2]));
                msg = cursor.getString(cursor.getColumnIndex(columns[3]));
                type = cursor.getString(cursor.getColumnIndex(columns[4]));

                Log.e("SMS-inbox", "\nTHREAD_ID: "
                        + threadId + "\nNUMBER: " + address + "\nTIME: " + date + "\nMESSAGE: " + msg + "\nTYPE: " + type);
            }
        }
    } 
```

现在，我需要按线程 ID（具有相同线程 ID 的消息）分隔这些消息。我怎样才能最好地做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:30:31.030

首先，我不会单独保存这些字符串。

我会做的是这样的课程：

```
public class SmsMsg {
    private String address = null;
    private String threadId = null;
    private String date = null;
    private String msg = null;
    private String type = null;

    //c'tor
    public SmsMsg(Cursor cursor) {
       this.address = cursor.getString(cursor.getColumnIndex("address"));
       this.threadId = cursor.getString(cursor.getColumnIndex("thread_id"));
       this.date = cursor.getString(cursor.getColumnIndex("date"));
       this.msg = cursor.getString(cursor.getColumnIndex("body"));
       this.type = cursor.getString(cursor.getColumnIndex("type")); 
    }
} 
```

`SmsMsg`现在您可以在您的 while 循环中`cursor.moveToNext()`实例化一个对象，`true`并将其添加到`List`您选择的 a 中。

例如，您现在可以将所需的所有消息复制`threadId`到不同的消息`List`并按日期对其进行排序。这取决于你想用它做什么。

# java - 优化刀片

> ID：14538801
> 
> 赞同：1
> 
> 时间：2013-01-26T16:15:27.623
> 
> 标签：java, mysql, jdbc

我有一些工作代码，但希望进行改进以减少到数据库的往返次数。

**概括**

我有三个数据库表：

`users = [user_id, firstname, lastname]`

`relationship = [relationship_id, user_id_one, user_id_two, tag_id]`

`tag = [tag_id, tag]`

我的代码中的逻辑是这样的：

```
if(tagDoesntExist) { createTag(tag) }
if(checkIfUserExists(useronedetails) && checkIfUserExists(usertwodetails)) {
  createRelationship(useronedetails, usertwodetails, tag)
} 
```

这包括至少 4 个 DB 调用。我可以将标签和关系的创建合并到同一个调用中吗？

另外，作为最后的优化，我可以将它全部推送到一个数据库调用中吗？这将根据现有的两个用户创建关系和标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:24:22.300

在不了解您的架构的情况下，很难给出具体的建议。通常在这种情况下，解决方案是使用 UPSERT / MERGE 或数据库提供的类似东西。对于 MySQL，您可能希望查看[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:40:38.370

对于条件插入，您可以使用 INSERT...SELECT 语法：

```
Insert into mytable(name,cola) (select myname,vala from dual where not exists (select 1 from mytable where name=myname)) 
```

您可以使用 Philippe 提到的`insert... on duplicate key update`

您可以将两个命令放在一个字符串中，用`;`

最后，您可以编写自己的存储过程来完成所有任务（检查，如果不存在则插入，检查关系是否存在并插入）。这不仅是单程到 DB，而且发送到 DB 的查询也是最短的。

# php - 启用 PHP 访问 Windows 中的文件夹

> ID：14538806
> 
> 赞同：2
> 
> 时间：2013-01-26T16:16:00.883
> 
> 标签：php, apache, windows-server-2012

我正在尝试授予对 php 上传器的访问权限，以将上传的文件写入 apache 范围之外的文件夹。

*   本例中的文件夹`c`代表 Windows Server 2012 的根目录

阿帕奇文件夹：

```
/cygdrive/c/apache24  (c:\apache24) 
```

php文件夹：

```
/cygdrive/c/php 
```

上传者文件夹：

```
/cygdrive/c/apache24/htdocs/uploader 
```

上传者指令：

```
define('RELATIVE_UPLOAD_DIR', '/cygdrive/c/Users/myusername');
define('UPLOAD_DIR', rtrim(dirname($_SERVER['SCRIPT_FILENAME']), '/') . '/' . RELATIVE_UPLOAD_DIR); 
```

上传者会将文件上传到上传者的文件夹，但我正在尝试将文件上传到 Windows`Users`文件夹。

```
/cygdrive/c/Users/myusername 
```

如何`Users`在 php.ini 中启用文件夹和子树，以便上传者可以向其中写入文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:28:31.627

In a *Nix environment you would have to make the target directory writable by the apache process owner. If you don't know what that is, take a look in the httpd.conf file. Look for two lines like:

User _www Group _www

That user must have write access to any target directory. I guess it's just the same in Windows.

I must admit to not liking the idea of writing to user directories though. Might be better to have a rethink on what you are trying to do and find a way to keep userland safe and secure, whilst giving them access to the data.

# apache - 这个 apache RewriteRule 不能工作，而且很特别

> ID：14538812
> 
> 赞同：0
> 
> 时间：2013-01-26T16:16:29.367
> 
> 标签：apache, mod-rewrite, url-rewriting, rewrite

这是我的 apache 重写规则

```
RewriteRule  ^info info.php 
```

并且可以工作，就像访问者[http://www.a.com/info](http://www.a.com/info)

但是当我使用

```
RewriteRule  ^info-([0-9]+) info.php 
```

这行不通，就像游客[http://www.a.com/info-01](http://www.a.com/info-01)

我认为 mod_rewrite 喜欢不能工作“-”和背景。

当我使用“ `-`”->“ `\-`”并且不能工作时..

所以我不知道如何工作？任何机构都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:49:01.253

好的，这个问题是我无法设置的

```
AllowOverride ALL 
```

在 httpd.conf

# javascript - 我的 jquery 插件无法在 IE 上运行

> ID：14538813
> 
> 赞同：0
> 
> 时间：2013-01-26T16:16:30.850
> 
> 标签：javascript, jquery, internet-explorer, jquery-plugins

我正在创建一个画廊滑块，它在大多数浏览器上都可以正常工作，但不能在 IE 上工作

`(函数($){

```
$.fn.AD_Slider = function(options)
{
    parent = this;
    parent.append('<span id="AD_slider_holder"></span>')
    $('#AD_slider_holder')
            .css
            (
                {
                    'position': 'absolute',
                    'bottom': '0px',
                    'left':'0px'
                }
            )
    no_of_items = 0;
    var settings = $.extend(
        {
            item_width: 200,
            animation_time: 1000,
            wait_time: 1000,
            slider_width:400,
            height:300
        },
        options
    );
    this.css
    (
        {
            'position':'relative',
            'width':  settings.slider_width + 'px',
            'height': settings.height + 'px',
            'border':'1px solid',
            'overflow':'hidden'
        }
    )
    $(this).children('div').each(function(){
        parent.children('#AD_slider_holder').append('<div />');
        parent.children('#AD_slider_holder')
            .each(
                function()
                {
                    $(this).children('div')
                        .css
                        (
                            {
                                'width':'10px',
                                'height':'10px',
                                'border':'1px solid',
                                'margin':'5px',
                                'float':'left'
                            }
                        )
                }
            )
        $(this).css
        (
            {
                'position': 'absolute',
                'top': '0px',
                'left': '0px',
                'width':settings.item_width,
            }
        );  
        $(this).hide();

    })
    parent.children('#AD_slider_holder').each(
    function(){
        $(this).children('div').click(
            function()
            {
                clearTimeout(animator_time_out);
                animate_next(parent,$(this).index());
            }
        );
    })
    animate_next(this);
};
function animate_next(parent,index_no)
{
    if(!index_no)
    {
        index_no = 0;
    }
    no_of_elements = parent.children('div').length;
    if(no_of_elements == index_no)
    {
        index_no = 0;
    }
    parent.children('div').fadeOut(); 
    parent.children('div:eq('+index_no+')').fadeIn(2000);
    parent
        .children('#AD_slider_holder')
            .each
            (
                function()
                {
                    $(this).children().css({'background':'none'})
                }
            )
    parent.children('#AD_slider_holder')
        .each(
            function()
            {
                $(this).children('div:eq('+index_no+')')
                    .css
                    (
                        {
                            'background':'red'
                        }
                    )
            }
        )
    index_no++;
    animator_time_out = setTimeout(function(){animate_next(parent,index_no)},5000)
} 
```

})( jQuery );`

我正在使用最新的 jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:26:53.933

我不知道，但我建议删除末尾的逗号

```
'width':settings.item_width, 
```

在

```
 $(this).css
    (
        {
            'position': 'absolute',
            'top': '0px',
            'left': '0px',
            'width':settings.item_width,
        }
    ); 
```

如果对象的最后一个元素后面有逗号，Internet Explorer 不喜欢它。

# pdf - 将任何文档缩放为 A4 格式

> ID：14538815
> 
> 赞同：0
> 
> 时间：2013-01-26T16:16:34.077
> 
> 标签：pdf, command-line-interface, ghostscript

我有一些需要打印到 A4 纸上的 pdf 文件。

我知道我的 pdf 阅读器 (evince) 中有一些选项可以缩放文档以适合打印到的确切纸张尺寸，并且也可以很好地打印到文件。

所以必须有一个 CLI 解决方案来完成这项工作，对吧？

每当我希望 pdf 在一张纸上有 2 页时，我都会使用

```
pdfnup in.pdf --nup 2x1 --outfile out.pdf 
```

但这不起作用 - in.pdf 没有缩放以适应，与打印到文件的 evince 输出相比，它太小了。那么如何在使用pdfnup之前（或同时）缩放它？如果这适用于任何输入格式，而不仅仅是 A5，那就太好了。提前感谢您的任何回答！

问候， LDer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:22:36.420

哦，男孩，我只是自己想出了一些办法。很抱歉打扰到任何人！

```
gs -o out.pdf -sDEVICE=pdfwrite -sPAPERSIZE=a4 -dFIXEDMEDIA -dPDFFitPage -dCompatibilityLevel=1.4 in.pdf 
```

# c++ - 在 C++ 中映射两种对象类型

> ID：14538819
> 
> 赞同：1
> 
> 时间：2013-01-26T16:17:07.347
> 
> 标签：c++, map, mapping, factory

我正在用 C++ 创建一个小型模拟框架。我想将纯模拟相关的东西从显示中分离出来。所以我有这样的课程：

```
class Pointer : public SimulationObject {};
class Particle : public SimulationObject {};
class LearningObserver : public SimulationObject {}; 
```

它们都是从 SimulationObject 派生的，但只有一些（！）具有视觉表示：

```
class Renderable {
public:
    virtual void render() const = 0;
//may also include reference to assosciated SimulationObject
}
class PointerRenderable : public Renderable {
    void render() const { std::cout << "Render a pointer" << std::endl;
};
class ParticleRenderable : public Renderable {
    void render() const { std::cout << "Render a particle" << std::endl;
}; 
```

现在，每当将新的 SimulationObject 添加到我的 Simulation（在运行时）中时，我都想检查是否有一个类可以渲染它。如果是这样，我想创建它的一个实例。我的第一个想法是使用多态性：

```
class AbstractRenderFactory {
   virtual Renderable * provideRenderable(SimulationObject * so) const = 0;
};

class ConcreteRenderFactory {
   void PointerRenderable * provideRenderable(Pointer * pointer) {
       return new PointerRenderable();
   }
   // further provideRenderable's
}; 
```

但是，当覆盖方法显然不起作用时使用派生类型（基方法被调用）。这也是有问题的，因为该功能只会被部分定义。

另一个想法是提供类型的实际映射：

```
std::map<std::type_index, std::type_index> renderTable; 
```

但我无法仅使用 type_info 获取实例。你有想法吗？

* * *

**更新：**我尝试使用**访问者模式**，但是我遇到了类似的问题。我的访问者类如下所示：

```
class RenderVisitor {
public:
    virtual Renderable * visit(SimulationObject * so) {
         // I would like to have this method abstract, but I could live with this
         return 0;
    }
};

class MyRenderVisitor : public RenderVisitor {
public:
    Renderable * visit(Pointer * pointer) const {
        return new PointerRenderable();
    }
}; 
```

加上我的模拟部件的新基类。

```
class SimulationObject {
public:
    Renderable * accept(RenderVisitor * renderer) {
        return renderer->visit(this);
    }
}; 
```

MyRenderVisitor 的访问方法显然不被识别为基类的覆盖，但我希望通过*this*指向实际（派生）类型，调用正确的方法（MyRenderVisitor 的方法）。

我的测试场景如下所示：

```
RenderVisitor * rv = new MyRenderVisitor();
SimulationObject * pointer = new Pointer();

Renderable * renderable = pointer->accept(rv);
renderable->render();
// renderable = 0 -> seg-fault 
```

或者只是我的实施错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:03:26.070

是的，看来您需要双重调度技术，可以通过应用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)来实现。说明这个想法的代码：

接口部分：

```
class SimulationObject {
public:
    virtual void Accept(RenderableVisitor* visitor) const = 0;
    ...
};

class RenderableVisitor {
public:
    virtual void Visit(Pointer* pointer) const = 0;
    virtual void Visit(Particle* particle) const = 0;
    virtual void Visit(LearningObserver* learning_observer) const = 0;
} 
```

混凝土部分：

```
class Pointer : public SimulationObject {
public:
    virtual void Accept(RenderableVisitor* visitor) const
    {
        visitor->Visit(this);
    }
};

class Particle : public SimulationObject {
public:
    virtual void Accept(RenderableVisitor* visitor) const
    {
        visitor->Visit(this);
    }
};

class LearningObserver : public SimulationObject {
public:
    virtual void Accept(RenderableVisitor* visitor) const
    {
        visitor->Visit(this);
    }
};

class ConcreteRenderableVisitor : public RenderableVisitor {
public:
    virtual void Visit(Pointer* pointer) const
    {
        std::cout << "Render a pointer" << std::endl;
    }

    virtual void Visit(Particle* particle) const
    {
        std::cout << "Render a particle" << std::endl;
    }

    virtual void Visit(LearningObserver* learning_observer) const
    {
        std::cout << "Render a learning observer" << std::endl;
    }
} 
```

该类为类层次结构`ConcreteRenderableVisitor`的每个叶子实现逻辑。`SimulationObject`

客户端代码：

```
ConcreteRenderableVisitor visitor;
Particle particle;
particle.Accept(&visitor); // Render a particle by the visitor. 
```

客户端代码 2（更抽象的示例来证明该技术）：

```
RenderableVisitor* visitor = new ConcreteRenderableVisitor;
SimulationObject* object = new Particle;
object->Accept(visitor); 
```

# list - 选择数据结构来存储单词并查找它们的出现？

> ID：14538823
> 
> 赞同：0
> 
> 时间：2013-01-26T16:17:35.923
> 
> 标签：list, data-structures, dictionary

假设我收到了一个包含一堆单词的文档（例如一首诗）。然后我希望能够存储每个单词，以便我可以运行诸如“ocean 4”之类的命令来查找单词“ocean”第四次出现在我的文本中的位置。存储它的最佳数据结构是什么？

我想保持在 O(n^2) 以下，但我认为到目前为止我提出的解决方案效率太低。

任何帮助入门将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:22:05.540

您可以尝试使用哈希表，其中每个单词都是键，然后使用列表。列表中的每个位置都会存储单词在文本中的位置。例如在 python 中你会调用 myDict["ocean"][4]。

# xcode - 我正在尝试制作一个显示图表的 coca appescript 应用程序。我该怎么做？

> ID：14538825
> 
> 赞同：0
> 
> 时间：2013-01-26T16:17:44.087
> 
> 标签：xcode, macos, graph, applescript

我不知道如何在 xcode 3.2 中制作 applescript 显示图形或图形链接。我该怎么做？？？？

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:23:23.987

你在可可框架、贝塞尔路径等中有很多可用的东西。

不要在沙盒应用程序中使用 applescript，它不会工作。

# c - 正确检索 C 结构中的指针字段

> ID：14538831
> 
> 赞同：0
> 
> 时间：2013-01-26T16:18:24.580
> 
> 标签：c, arrays, pointers, struct

我正在编写一个 C 程序。我有一个名为的数据结构`MyStruct`，它包含一个字符指针和一个整数字段。`MyStruct`我有一个被调用的数组`myArray`。我需要的是`MyStructure`通过函数的结构简单地初始化这个数组`initiateParams()`，然后读取 myArray 的值并将它们显示在屏幕上`displayParams()`。

该函数只是通过递增整数来`initiateParams()`初始化`char*`类变量的整数和字段。`MyStruct`初始化后，当我想通过`displayParams()`整数字段的值检索值时（`intigerData`）被正确检索；但指针字段 ( `characterSet`) 的值显示不正确；可能是`char*`分配给最后一个结构的最后一个值的值。如何正确检索指针值？谢谢你。

```
#include <stdio.h>
#include <stdlib.h>
//#include"structHeader.h"
#include <stdint.h>

void initiateParams();
void displayParams();
char* itoa(int value, char* result, int base);

typedef struct _MyStruct
{
    char* characterSet;
    uint16_t intigerData;
    uint16_t * intigerDataPtr;

} MyStruct;

const uint16_t bufferSize  =  400;
MyStruct myArray[400];
int main ()

{    initiateParams();
    displayParams();

    printf("ended");
    return 0;
}

void initiateParams(){
    uint16_t i;
    for(i = 0 ; i < 4*bufferSize ; i++){
        uint16_t k = i % bufferSize;
        MyStruct myStruct;
        myStruct.intigerData = i;
        char c;
        char* c2 = itoa(i , &c , 10);
        c = *c2;

        myStruct.characterSet = &c;
        myStruct.intigerDataPtr = & i;

        //printf("%s\r\n" , &dig);
        myArray[k] = myStruct;
    }
}

void displayParams(){
    uint16_t i;
    for(i = 0 ; i < bufferSize ; i++){
        MyStruct api = myArray[i]; 
        printf("retrieved integer value: %d , character pointer value: %s\r\n" 
                , api.intigerData , api.characterSet);
        printf("%s\r\n" , api.characterSet);
    }
}

/**
* C++ version 0.4 char* style "itoa":
* Written by Lukás Chmela
* Released under GPLv3.
*/
char* itoa(int value, char* result, int base) {
    // check that the base if valid
    if (base < 2 || base > 36) { *result = '\0'; return result; }

    char* ptr = result, *ptr1 = result, tmp_char;
    int tmp_value;

    do {
        tmp_value = value;
        value /= base;
        *ptr++ = "zyxwvutsrqponmlkjihgfedcba9876543210123456789abcdefghijklmnopqrstuvwxyz" 
                [35 + (tmp_value - value * base)];
    } while ( value );

    // Apply negative sign
    if (tmp_value < 0) *ptr++ = '-';
    *ptr-- = '\0';
    while(ptr1 < ptr) {
            tmp_char = *ptr;
            *ptr--= *ptr1;
            *ptr1++ = tmp_char;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:27:15.807

这条线

```
 myStruct.characterSet = &c; 
```

仅存储指向在堆栈上分配的临时变量“c”的指针。

您至少应该将“c2”变量的值（不带“*”）存储在字符集字段中。

此外，您没有分配缓冲区，将 &c 传递给 itoa 是错误的。

您应该（为每个字符）分配缓冲区：

```
 char* buf = malloc(10);
    myStruct.characterSet = itoa(i , buf , 10); 
```

并在完成后释放结构（在 displayParams 之后）。

代码应该是

```
void initiateParams(){
    uint16_t i;
    for(i = 0 ; i < 4*bufferSize ; i++){
        uint16_t k = i % bufferSize;
        MyStruct myStruct;
        myStruct.intigerData = i;

        char* buf = malloc(10);
        myStruct.characterSet = itoa(i , buf , 10);
        myStruct.intigerDataPtr = & i;

        myArray[k] = myStruct;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:28:09.037

`characterData`print 失败，因为它指向的地址（变量`c`）只存在于`initiateParams()`

我认为您需要创建一个`malloc`，将值分配给新分配的字节并将后者的地址分配给`characterSet`指针。

或者更容易将`characterSet`from转换`pointer to char`为 simple`char`并按值初始化。

# c++ - c++拷贝构造函数相关查询

> ID：14538833
> 
> 赞同：0
> 
> 时间：2013-01-26T16:18:53.363
> 
> 标签：c++, algorithm, copy-constructor, default-copy-constructor

```
#include<iostream>
class A{
    public :
        int a;
};
int main(){
    A obj;
    obj.a = 5;
    A b(obj);

    b.a = 6;
    std::cout<<obj.a;
    return 0;

} 
```

为什么答案返回为 5 ，默认情况下 C++ 中的复制构造函数返回浅拷贝。浅拷贝不就是引用吗？？还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:23:10.367

> 浅拷贝意味着参考？？还是我错过了什么？

你错过了一些东西。**浅拷贝意味着拷贝**。它将对象的所有成员从一个复制到另一个。它不是参考。创建的副本完全独立于原件

有关浅拷贝和深拷贝之间的区别，请参阅[这个优秀的教程。](http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:20:54.630

`b`是与 完全分开的对象`obj`。它有自己`a`独立的`obj`'s。

听起来您的想法是*参考*：

```
A& b = obj; 
```

在此之后，两者都`b`引用`obj`同一个对象。through 所做的更改`b`将是可见的`obj`，反之亦然。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T16:25:26.307

> 浅拷贝意味着参考？？还是我错过了什么？

是的，你错过了一些东西。

浅拷贝不代表参考。浅复制意味着*复制*成员：如果成员是指针，则*复制*地址，而不是指针*指向的**内容*。这意味着，原始对象中的指针和所谓的复制对象中的指针指向内存中的*相同内容*。这就是所谓的浅拷贝。另一方面，深拷贝不复制地址，它创建一个新指针（在新对象中），为其分配内存，然后复制原始指针指向*的内容。*

 ***在您的情况下，浅拷贝和深拷贝没有区别，因为类中没有指针成员。每个成员都被复制*（像往常一样）*，并且由于没有成员是指针，因此每个复制的成员都是内存中的*不同*成员。也就是说，原始对象和复制的对象在内存中是完全不同的对象。这两个对象之间绝对没有任何共享。因此，当您修改一个时，它根本不会改变另一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:22:41.407

`A b(obj)`将信息复制`obj`到新创建的对象`b`中。是的，它是一个浅拷贝，因此`b`实际上并不能控制分配给它的内容。您可能正在考虑的是参考：

```
A& b = obj;

b.a = 6;

std::cout << obj.a; // 6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T16:20:27.090

是的，默认的复制构造函数是浅拷贝。[在这里](http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/)查看更多

但是，b 与 a 完全不相交，因此这两件事没有直接关系。***

# bash - `echo x > y` 和 `echo x 有什么区别？开球？

> ID：14538834
> 
> 赞同：1
> 
> 时间：2013-01-26T16:18:54.610
> 
> 标签：bash, shell

当我想将输出重定向到文件时，我通常这样做：

```
$ echo 'a' > b
$ cat b
a 
```

但是，我看到人们使用`tee`而不是直接重定向到文件。我想知道有什么区别。我在这个模式中的意思是：

```
$ echo 'a' | tee c
a
$ cat c
a 
```

它似乎与简单的重定向没有什么不同。我知道它们在概念上不是一回事，但我想知道为什么人们会使用一个而不是另一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-03-31T12:03:14.633

简单来说

echo 'a' > b ，它将“a”写入文件b。

```
#echo 'a' > b
#cat b
#a 
```

回声'a' | tee b ，它将“a”写入文件 b 并在终端中显示输出（回显输出）。

```
#echo 'a' | tee b
#a
#cat b
#a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:23:49.313

使用`tee`让我们拆分输出。您可以查看它（通过将标准输出定向到您正在查看的 tty）或将其传递给进一步处理。它可以方便地跟踪管道的中间阶段。

# angularjs - AngularJS：重用具有不同父级的组件

> ID：14538839
> 
> 赞同：2
> 
> 时间：2013-01-26T16:19:23.883
> 
> 标签：angularjs

假设我有 A 和 B 可重用组件。我希望 B 在 A 上调用一个方法 - 当然只有当 B 是 A 的子级时。另外 - 我希望 B 用作独立组件（没有 A 作为父级）。在这种情况下，不应调用不存在的 A 中的方法。我的第一次尝试是在链接功能中获取控制器（与我在 B 上指定的方式完全相同`require: "^A"`- 现在我不能拥有它，因为我想将 B 也用作独立组件） - 但这不起作用：

```
var module = angular.module("mymodule", []);

// <A>
module.directive("A", function() {
    return {
        restrict: "E",
        transclude: true,
        replace: true,
        scope: {},
        controller: function($scope, $element, $attrs) {
            this.register = function() {
               console.log("Hooray!");
            };
        },
        template:
            '<div class="ng-a" ng-transclude></div>'
    };
});

// <B>
module.directive("B", function() {
    return {
        restrict: "E",
        transclude: true,
        replace: true,
        scope: {},
        link: function($scope, $element, $attrs, refA) {
            if (refA !== undefined) {
                refA.register();
            } else {
                console.log("Standalone");
            }
        },
        controller: function($scope, $element, $attrs) {
            // Do something.
        },
        template:
            '<div class="ng-b" ng-transclude></div>'
    };
}); 
```

对于用例：

```
<A><B></B></A><B></B> 
```

控制台输出应该是：

```
Hooray!
Standalone 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T16:39:40.153

您可以有条件地要求另一个指令在其前面加上问号：`require: "^?A"`。然后，您可以测试控制器是否为非空，以查看您是在父指令中调用还是作为独立指令调用。

# android - 如何在 Android 中为 Button 添加一条水平线？

> ID：14538840
> 
> 赞同：0
> 
> 时间：2013-01-26T16:19:36.047
> 
> 标签：android, button

我正在制作一个单元格网格，每个单元格都是一个可点击的按钮。我想在单击按钮时向按钮添加一条水平线： ![这是一个例子](../Images/0d3653b3689b0d8b05d2553bb5dc0734.png)

任何人都可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:38:08.770

```
private static final StrikethroughSpan STRIKE_THROUGH_SPAN = new StrikethroughSpan();
Spannable spannable = (Spannable) button.getText();
spannable.setSpan(STRIKE_THROUGH_SPAN, 0, button.getText().length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

请查看这些链接以更好地理解::

1.  [删除线跨度](http://developer.android.com/reference/android/text/style/StrikethroughSpan.html)

2.  [Spannable.setSpan](http://developer.android.com/reference/android/text/Spannable.html#setSpan%28java.lang.Object,%20int,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:32:53.633

正确的做法是为 Button 创建自己的 9-patches。您可以使用任何图像编辑器（我通常使用 Gimp）创建它们，但请确保使用 android-sdk 目录中的 draw-9-patch 工具重新保存它们，因为它会为 9.png 添加必要的格式。[在这里](http://developer.android.com/tools/help/draw9patch.html)查看有关 9 补丁的更多信息。为 Button 创建两个 9 补丁后，您需要在可绘制文件夹中创建一个 xml 文件，该文件将根据 Button 的当前状态选择要选择的图像，查看[此处](http://www.mkyong.com/android/android-imagebutton-selector-example/)以获取有关创建选择器的更多信息一个按钮。这是相当多的工作，但以正确的方式去做是值得的。

# sql - 将联合合并到单个查询

> ID：14538847
> 
> 赞同：1
> 
> 时间：2013-01-26T16:20:07.740
> 
> 标签：sql, oracle, oracle10g

我有以下查询来生成某些产品的 ID 和分数

```
Select
  tm.product_id,
  listagg(tm.book_id || '(' || tm.score || ')',',')
    within group (order by tm.product_id) as matches
from
  tl_product_match tm 
where
  tm.book_id is not null 
group by
  tm.product_id
union 
Select
  stm.product_id,
  listagg(stm.video_id || '(' || stm.score || ')',',')
    within group (order by stm.product_id) as matches
from
  tl_product_match stm
where
  stm.video_id is not null
group by
  stm.product_id 
```

查询产生如下所示的输出：

```
productId | matches
---------------------------------------------
1         | 123(30), 76565, 7687(500), 243(5)
2         | 352(30), 9(5), 34234(500), 43(5)
2         | 25(30), 78, 324(500), 23434(5)
3         | 546(30), 768, 34234(500), 324(5) 
```

两个问题：

*   是否可以修改查询以删除联合并仍然产生相同的结果？
*   ProductId 2 重复了两次（即每个工会各有一行），我该怎么做才能在同一行中显示 productId 2？IE

    ```
    productId |  matches
    -----------------------------------------------------------------------------
    1         |  123(30), 76565, 7687(500), 243(5)
    2         |  352(30), 9(5), 34234(500), 43(5), 25(30), 78, 324(500), 23434(5)
    3         |  546(30), 768, 34234(500), 324(5) 
    ```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:27:34.637

在 when`book_id`和`video_id`具有相同类型的情况下，您可以使用它：

```
SELECT
   product_id ,listagg(gr_id || '(' || score || ')',',') within group (order by product_id) as matches
FROM
(
    SELECT
       product_id, score, book_id gr_id
    FROM tl_product_match
    WHERE book_id is not null 
    UNION ALL
    SELECT
       product_id, score, video_id gr_id
    FROM tl_product_match
    WHERE video_id is not null
) A
GROUP BY product_id 
```

我相信每一行都包含有关书籍或视频的信息。这可能会奏效。

```
SELECT
    product_id,
    listagg(COALESCE(book_id, video_id) || '(' || score || ')',',') within group (order by product_id) as matches
FROM tl_product_match
GROUP BY product_id 
```

# java - 如何在 Eclipse 上安装 Cucumber-JVM

> ID：14538854
> 
> 赞同：11
> 
> 时间：2013-01-26T16:21:58.030
> 
> 标签：java, eclipse, cucumber-jvm

我已经在互联网上进行了搜索，但是一个 java 新手我不知道如何在 Eclipse 上简单地安装 Cucumber-jvm。

我需要下载哪些文件？我已经安装了 Eclipse。我需要做什么才能在 Eclipse 上获取 Cucumber-JVM？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-22T09:21:14.690

如果您指的是 Eclipse 的 Cucumber 插件，您可以通过以下方式执行此操作：

1.  打开 Eclipse，单击帮助 → 安装新软件。
2.  单击“使用”字段右侧的“添加”按钮。
3.  给出名称（例如 cucumber-eclipse）并在 Location 字段中输入 URL 'https://cucumber.github.io/cucumber-eclipse/update-site' -> 单击 OK。
4.  选中“Cucumber Eclipse 插件”框。
5.  取消勾选“安装期间联系所有更新站点...”。
6.  单击`Next`。
7.  按照提示中的说明进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T09:30:07.983

你为什么不试试这个插件？我认为你的黄瓜编码应该比官方插件更大：因为[黄瓜](https://becausetesting.github.io/becausecucumber/)

安装步骤有：[因为Cucumber安装](http://becausetesting.github.io/becausecucumber/install.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:21:29.347

Cucumber-JVM 不是 Eclipse 库或插件。您可以通过多种方式下载它（我发现 Maven 最简单），并将其包含在您的代码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-03T18:15:47.343

[您可以在Cucumber 文档](https://cucumber.io/docs/installation/java/)中找到如何安装 Cucumber-jvm

此外，您还需要[Eclipse 插件](https://cucumber.io/docs/tools/java/#eclipse)。

# xcode - xcode没有用空项目编译

> ID：14538855
> 
> 赞同：0
> 
> 时间：2013-01-26T16:22:01.140
> 
> 标签：xcode, macos, caching, project

首先，我已经在寻找答案，但没有运气..我是 xcode 的新手！

我创建了一个项目，后来发现我需要启用核心数据，所以因为我没有做太多工作，所以我决定开始新的。删除了项目文件夹并设置了一个同名的新项目。但是这个项目没有运行。它命中 sa 断点并在错误后抛出错误。项目是空的..如果我用另一个名称的项目做完全相同的事情，那么它工作正常。某处是否有某种缓存干扰了我的项目？我怎样才能让我的新项目具有相同的名称？

谢谢

伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:29:17.280

If you create project with same name with having use of core data, then your model for core data should be exactly the same. Otherwise it will not read will get crashed.

Try cleaning the targets by ⌥⇧⌘K `Cmd`+`Shift`+`K`.

# robots.txt - robots.txt 网址格式

> ID：14538859
> 
> 赞同：6
> 
> 时间：2013-01-26T16:22:15.857
> 
> 标签：robots.txt

根据[这个页面](http://www.robotstxt.org/robotstxt.html)

> User-agent 或 Disallow 行不支持通配符和正则表达式

但是，我注意到[stackoverflow robots.txt](https://stackoverflow.com/robots.txt)包含 * 和 ? 在网址中。这些是否支持？

此外，URL 是否包含尾部斜杠或这两个是否等效有什么区别？

```
Disallow: /privacy
Disallow: /privacy/ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T17:19:56.690

你的第二个问题，两者不等价。`/privacy`将阻止任何以 . 开头的内容`/privacy`，包括`/privacy_xyzzy`. `/privacy/`，另一方面，不会阻止它。

原始 robots.txt 不支持通配符或通配符。但是，许多机器人会这样做。几年前，谷歌、微软和雅虎就一个标准达成了一致。有关详细信息，请参阅[http://googlewebmastercentral.blogspot.com/2008/06/improving-on-robots-exclusion-protocol.html](http://googlewebmastercentral.blogspot.com/2008/06/improving-on-robots-exclusion-protocol.html)。

我所知道的大多数主要机器人都支持该“标准”。

# asp.net - 无法从下拉列表中的项目中获取值

> ID：14538861
> 
> 赞同：1
> 
> 时间：2013-01-26T16:22:23.030
> 
> 标签：asp.net

我的页面中有这个：

```
<asp:DropDownList ID="membros" runat="server">
</asp:DropDownList> 
```

在后面的代码中，我有这个：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            members.Items.Clear();
            members.Items.Add(new ListItem("Choose...", ""));

            foreach (DataRow item in com.Execute("select * from tableMembers").Rows)
            {
                 members.Items.Add(new ListItem(item["name"].ToString(), item["id_user"].ToString()));
                 contForeach++;
            }
        } 
```

当我尝试从 SelectedIndex 获取值时，我不能，因为他总是让我 0 独立于我选择的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:40:08.653

除了`IsPostBack`提到的，你应该这样做而不是循环数据

修改你的标记

```
<asp:DropDownList ID="membros" runat="server" DataTextField="name" DataValueField="user_id"> 
```

从后面的代码，绑定数据

```
 if(!IsPostBack)
  {

     DataTable dt = com.Execute("select * from tableMembers");
     members.DataSource = dt;
     members.DataBind();

     members.Items.Insert(0, new ListItem("Choose...", ""));

 } 
```

绑定控件（如 DropdownList、GridView、DataList 等）具有`DataSource`可用于为它们分配集合的属性，它们将遍历它并提取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:26:06.963

把它放进去，`if(!IsPostBack)`这样它就可以在第一次加载表单时加载下拉列表，现在每次加载页面时它都会加载，所以你错过了你的选择。

```
 if(!IsPostBack)
      {
        members.Items.Clear();
        members.Items.Add(new ListItem("Choose...", ""));

        foreach (DataRow item in com.Execute("select * from tableMembers").Rows)
        {
             members.Items.Add(new ListItem(item["name"].ToString(),           item["id_user"].ToString()));
             contForeach++;
        }
     } 
```

# jquery - jQuery 动画（addsClass）只有一个标签而不是全部？

> ID：14538862
> 
> 赞同：3
> 
> 时间：2013-01-26T16:22:26.867
> 
> 标签：jquery

我在这里有这个小提琴：http: [//jsfiddle.net/CS5Bb/2/](http://jsfiddle.net/CS5Bb/2/)

我想要发生的只是当我将鼠标悬停在一个`a`标签上时，它会在左侧添加一些填充和边框。它仅对第一个（家庭）执行此操作，但对于其他（据我所知）相同的则不执行此操作。

我觉得我在这里遗漏了一些非常明显的东西。就像，当我找出原因时，我会拍拍我的额头。但是由于 jQuery 只有 4 行错误，我真的看不出哪里出错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T16:26:14.247

您不能有多个具有相同名称的 id ...

改用类

*[小提琴](http://jsfiddle.net/CS5Bb/3/)*

```
<p><a class="nav">Home</a></p>
<p><a class="nav">Résumé</a></p>
<p><a class="nav">Contact Me</a></p>

$('.nav').hover(function () {
    $(this).addClass('navi');
}, function () {
    $(this).removeClass('navi');
}); 
```

**编辑#1**

这个 js 没有做任何 CSS 不能用 :hover 选择器做的事情......

*[小提琴](http://jsfiddle.net/CS5Bb/7/)*

```
.nav:hover {
    border-left: solid red 3px;
    padding-left: 5px;
}
.nav {
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:25:10.293

ID 是唯一的，因此在使用 ID 时只会选择第一个元素，因为不应再有具有完全相同 ID 的元素。改用类或以父级为目标。

从：

```
$('#nav').hover(function () {
    $(this).addClass('nav');
}, function () {
    $(this).removeClass('nav');
}); 
```

至：

```
$('.navbar a').hover(function () {
    $(this).addClass('nav');
}, function () {
    $(this).removeClass('nav');
}); 
```

[**小提琴**](http://jsfiddle.net/CS5Bb/6/)

# version-control - 将更改拉入我的本地存储库后，推送出现 Mercurial 问题

> ID：14538868
> 
> 赞同：0
> 
> 时间：2013-01-26T16:22:48.270
> 
> 标签：version-control, mercurial, tortoisehg

我对 Mercurial 还很陌生，所以我希望有人能帮助我，因为我现在快哭了；）

所以我一直在本地工作并提交到我的本地存储库。我想将我的更改推送到服务器，所以我首先提取了最新的更改。到目前为止一切正常。

然后我尝试进行推送，但出现以下错误：

[错误：中止：推送创建新的远程头80394c55f2dc！]新的远程头80394c55f2dc [错误：（你忘记合并了吗？使用push -f强制）]

然后我读到拉不会将更改合并到我的本地存储库中。

我加载了 Workbench，所以我现在可以看到我的更改和其他开发人员的更改已被拉取。然后我对另一个开发人员的最新版本进行了合并。

我现在有两个 rev 112 一个带有 Merge 和 112+ 的描述，上面写着 * 工作目录 *

我希望我已经正确解释了这一点，如果需要，我可以提供屏幕截图，但我有点难过。

我只需要将所有更改合并并推送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:38:39.173

[这](https://camelotdevelopment.wordpress.com/2011/04/17/work-process-part-2/)是一篇博客文章，它很好地解释了您需要做什么。根据您的描述，帖子中的第五张图片与您的情况相符。除了修订版 112，您可能在另一个修订版上还有另一个头脑。您必须单击该头部，然后`Merge with Local`从上下文菜单中进行选择。然后，TortoiseHg 将指导您完成合并这两个头的过程。如果您根本不需要干预来解决任何冲突，您最终会看到一个对话框，其中包含`Merge`新变更集的默认提交消息 ( )，代表两个头的合并（其中一个来自您的工作和拉动时进来的其他东西）。

[Mercurial wiki](http://mercurial.selenic.com/wiki)有一个不错的页面[，](http://mercurial.selenic.com/wiki/UnderstandingMercurial)可以帮助您轻松使用 Mercurial。我相信你会做得很好:)

# iphone - didSelectrow 不适用于滚动视图和表格视图（iOS）

> ID：14538869
> 
> 赞同：1
> 
> 时间：2013-01-26T16:22:48.277
> 
> 标签：iphone, objective-c, uitableview, uiscrollview, didselectrowatindexpath

目前我正在创建一个具有滚动视图和表格视图的应用程序。我在这里使用了代码：http: [//johansorensen.com/articles/touches-and-uiscrollview-inside-a-uitableview.html](http://johansorensen.com/articles/touches-and-uiscrollview-inside-a-uitableview.html) 但是由于滚动视图和表格视图的组合，didSelectrow 函数不再起作用。

感谢您的帮助！

请注意：回答清楚，我不是最有经验的 iOS 开发者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:34:11.997

在你的情况下`UIScrollView`隐藏你的`cell`，所以你不能触摸`UITableView`因此`didSelectRowAtIndexPath`方法的单元格是行不通的。

`scrollView`在您的链接中编写以下代码以添加`UITableView`

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 50.0f;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"ScrollCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        UIScrollView *scroller = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 25, 320, 25)];
        scroller.showsHorizontalScrollIndicator = NO;

        UILabel *contentLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320*4, 25)];
        contentLabel.backgroundColor = [UIColor clearColor];
        contentLabel.textColor = [UIColor whiteColor];
        NSMutableString *str = [[NSMutableString alloc] init];
        for (NSUInteger i = 0; i < 100; i++) { [str appendFormat:@"%i ", i]; }
        contentLabel.text = str;

        [scroller addSubview:contentLabel];
        scroller.contentSize = contentLabel.frame.size;
        [cell addSubview:scroller];
    }

    return cell;
} 
```

**然后使用**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
} 
```

**它可能对你有用。**

# android - Android Camera的callbackbuffer的缓冲区大小需要是图片的8倍吗？

> ID：14538871
> 
> 赞同：3
> 
> 时间：2013-01-26T16:22:52.643
> 
> 标签：android, camera

正如[Android文档](http://developer.android.com/reference/android/hardware/Camera.html)所说：

对于 YV12 以外的格式，缓冲区的大小是通过将预览图像的宽度、高度和每像素字节数相乘来确定的。宽度和高度可以从 getPreviewSize() 中读取。**`getBitsPerPixel(int) / 8`**可以使用 getPreviewFormat() 中的图像格式从计算每个像素的字节数。

但是大多数在线代码使用`bitsperpixel`创建缓冲区而不是`byteperpixel=bitsperpixel/8`.

如果我使用以下代码并使用图像的确切大小（以字节为单位），将导致错误：E/Camera-JNI(3656)：回调缓冲区太小！预期为 1336320 字节，但得到了 890880 字节！这是为什么？为什么缓冲区需要是图像大小的 8 倍？

```
Camera.Parameters parameters=mCamera.getParameters();
parameters.setPreviewSize(width,height);
mCamera.setParameters(parameters);

int previewFormat=parameters.getPreviewFormat();
int bitsperpixel=ImageFormat.getBitsPerPixel(previewFormat);
int byteperpixel=bitsperpixel/8;
Camera.Size camerasize=parameters.getPreviewSize();
int frame_bytesize=((camerasize.width*camerasize.height)*byteperpixel);

//create buffer
byte[]frameBuffer=new byte[frame_bytesize];

//buffer registry 
mCamera.addCallbackBuffer(frameBuffer); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T21:33:16.347

1336320 是 1.5 X 890880，所以我想 bitsperpixel == 12，并且在使用 int 作为 bytesperpixel 时，你会丢失其余部分。例如

```
int bytesperpixel = 12 / 8 
```

将导致 1，而不是您需要的 1.5。

# php - 如何在 PHP header() 之前发送标头？

> ID：14538873
> 
> 赞同：0
> 
> 时间：2013-01-26T16:22:56.793
> 
> 标签：php, javascript, html

在将用户重定向到另一个网站之前，我想在正常的标头标签中执行一个 javascript 代码，但我无法弄清楚如何使其真正工作，因此代码将被执行并且访问者将被重定向。

我想要以下内容：

```
<html>
 <head>
  //script here
 </head>
 <body>
 </body>
</html>

<?php header ('Location: example.com') ?> 
```

有人可以告诉我如何正确地做到这一点，所以它不会返回任何“标头已发送”错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:24:01.103

使用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)：

```
<?php

ob_start();
echo "Hello\n";

setcookie("cookiename", "cookiedata");

ob_end_flush();

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:24:56.417

如果访问者通过您网站的链接访问此页面，您可以发送其他数据以让您的服务器脚本知道 JavaScript 已启用；例如

```
$('a').each(function() {
    var url = this.href;

    if (url.indexOf("?") !== -1)
        this.href = url + '&js=1';
    else
        this.href = url + '?js=1';
}); 
```

这将更改所有链接以包含一个特殊参数，该参数指示 JavaScript 是否已启用。**如果你想运行的附加 JavaScript 代码也可以放在这里，那就更好了！**

服务器脚本将使用类似 `if (!empty($_GET['js'])) { ... }`编写一段 JavaScript（旧答案 2）或立即执行重定向。

**旧答案**

如果 JavaScript 被禁用，您可以发送`Refresh`标头。

```
<?php

    header('Refresh: 2; url=http://www.example.org');

?>
<html>
 <head>
  //script here
 </head>
 <body>
 </body>
</html> 
```

*我不得不承认我没有尝试过，但很有可能它会起作用*

**旧答案 2**

但是，如果您确定 JavaScript 已启用，则可以让 JavaScript 在完成后执行重定向；如果 url 始终相同，则省略 PHP 代码，只使用静态字符串：

```
<html>
 <head>
  <script>
  //script here
  location = <?php echo json_encode('http://www.example.org'); ?>;
  </script>
 </head>
 <body>
 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T16:27:33.233

* * *

`content="<seconds>;url=http://www.the-url.com"`

* * *

```
<head>
    <meta http-equiv="REFRESH" content="10;url=http://www.the-domain-you-want-to-redirect-to.com">
</head>
<body>
    <script>
        alert("run before redirect");
    </script>
</body> 
```

[http://jsfiddle.net/W9dhW/](http://jsfiddle.net/W9dhW/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:30:29.230

Redirect user to other website after executing some JavaScript

```
<script type='text/javascript'>
    alert('executing some javascript');

    // redirecting to other website
    window.location.href = "http://example.com";
</script> 
```

You don't need (and cannot use) PHP to achieve what you require

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T06:14:23.313

您必须在 html 开始之前使用 php 标头

```
<?php header ('Location: example.com') ?>
<html>
 <head>
  //script here
 </head>
 <body>
 </body>
</html> 
```

注意：如果您使用`<?php header('Location:example.com'); ?>`以下行，则意义较小，因为它将被重定向到最开始行的另一个页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T16:25:22.887

这对于标头是不可能的`Location`。如果您的响应包括一个，浏览器将被重定向并且不会执行任何 Javascript。

如果您想在客户端执行某些操作，请在获取重定向的 URL 之前执行此操作，或者在到达最终目标 URL 后执行此操作。

# iphone - App Store 应用程序重命名

> ID：14538875
> 
> 赞同：0
> 
> 时间：2013-01-26T16:23:02.177
> 
> 标签：iphone, xcode, app-store, app-store-connect

> **可能重复：**
> [如何在 itunesconnect 中重命名您的应用程序？](https://stackoverflow.com/questions/3413085/how-to-rename-your-app-in-itunesconnect)

两个月前，我发布了一款名为“iSMAC”的 iPhone 应用程序。现在我需要将名称更改为“mySMAC”。我在 iTunes Connect 中使用新名称制作了 1.1 版，并从 Xcode 修改了“Bundle display name”。使用 Organizer，我正确上传了应用程序。

现在我想知道......当应用程序被Apple批准时，App Store中的名称是什么？“mySMaC”（新名称）还是“iSMaC”（旧名称）？谢谢！

# javascript - js 地理定位但没有提示 - 可能吗？

> ID：14538883
> 
> 赞同：3
> 
> 时间：2013-01-26T16:23:25.167
> 
> 标签：javascript, html, geolocation, navigator

是否可以在没有浏览器提示的情况下获取用户的地理位置？

[这是来自 W3 的代码示例](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation)

```
<script>
   var x = document.getElementById("demo")

   function getLocation(){
     if(navigator.geolocation){
       navigator.geolocation.getCurrentPosition(showPosition);
     } else {
       x.innerHTML="Geolocation is not supported by this browser.";}
     }
     function showPosition(position){
       x.innerHTML="Latitude: " + position.coords.latitude + 
       "<br>Longitude: " + position.coords.longitude;   
     }
</script> 
```

有没有`preventPrompt()`类似的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:26:49.523

不，您不能阻止提示，它是一项安全功能，因为并非每个用户都想共享其位置。

来自[W3C 文档](http://dev.w3.org/geo/api/spec-source.html#security)：

> 本规范的一致实现必须提供保护用户隐私的机制，并且该机制应确保在未经用户明确许可的情况下不会通过此 API 提供任何位置信息。

但是您可以尝试在错误回调中使用[geoip之类的服务。](http://www.geoiptool.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:27:04.760

不，那是不可能的。

提示在那里，以便用户可以选择您是否知道该位置。

# python - 如何使用字典中的键获取索引？

> ID：14538885
> 
> 赞同：45
> 
> 时间：2013-01-26T16:23:39.457
> 
> 标签：python, python-2.7, dictionary, indexing, key

我有一个 python 字典的键，我想在字典中获取相应的索引。假设我有以下字典，

```
d = { 'a': 10, 'b': 20, 'c': 30} 
```

给定键值'b'，是否有python函数的组合，以便我可以获得1的索引值？

```
d.??('b') 
```

我知道它可以通过循环或 lambda（嵌入循环）来实现。只是认为应该有一个更直接的方法。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-26T16:36:07.173

使用 OrderedDict：[http ://docs.python.org/2/library/collections.html#collections.OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

```
>>> x = OrderedDict((("a", "1"), ("c", '3'), ("b", "2")))
>>> x["d"] = 4
>>> x.keys().index("d")
3
>>> x.keys().index("c")
1 
```

对于那些使用 Python 3

```
>>> list(x.keys()).index("c")
1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T17:37:00.993

python (<3.6) 中的字典没有顺序。您可以改为使用元组列表作为数据结构。

```
d = { 'a': 10, 'b': 20, 'c': 30}
newd = [('a',10), ('b',20), ('c',30)] 
```

然后此代码可用于查找具有特定值的键的位置

```
locations = [i for i, t in enumerate(newd) if t[0]=='b']

>>> [1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T16:29:48.740

No, there is no straightforward way because Python dictionaries do not have a set ordering.

From the [documentation](http://docs.python.org/2/library/stdtypes.html#dict.items):

> Keys and values are listed in an arbitrary order which is non-random, varies across Python implementations, and depends on the dictionary’s history of insertions and deletions.

In other words, the 'index' of `b` depends entirely on what was inserted into and deleted from the mapping before:

```
>>> map={}
>>> map['b']=1
>>> map
{'b': 1}
>>> map['a']=1
>>> map
{'a': 1, 'b': 1}
>>> map['c']=1
>>> map
{'a': 1, 'c': 1, 'b': 1} 
```

As of Python 2.7, you could use the [`collections.OrderedDict()` type](http://docs.python.org/2/library/collections.html#collections.OrderedDict) instead, if insertion order is important to your application.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-25T13:13:26.443

```
#Creating dictionary
animals = {"Cat" : "Pat", "Dog" : "Pat", "Tiger" : "Wild"}

#Convert dictionary to list (array)
keys = list(animals)

#Printing 1st dictionary key by index
print(keys[0])

#Done :) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-05T17:26:40.773

您可以简单地将字典发送到`list`，然后您可以选择您要查找的项目的索引。

```
DictTest = {
    '4000':{},
    '4001':{},
    '4002':{},
    '4003':{},
    '5000':{},
}

print(list(DictTest).index('4000')) 
```

# python - 根据项目数将 Python 中的字符串拆分为指定给 3 个变量的 3 个段

> ID：14538887
> 
> 赞同：0
> 
> 时间：2013-01-26T16:23:42.827
> 
> 标签：python, python-2.7, list-comprehension, python-2.x, try-except

我是 Python 新手，正在努力以最 Pythonic 的方式解决以下问题。

我有一个字符串（下面给出的示例状态）需要拆分（`.split('/', 2)`）并指定（最多）3个变量（变量a、b和c）。该字符串是一个 URL，我需要将其分成 3 段。

字符串及其段可以是以下示例：

*   'seg_a/seb_b/the_rest'`-> a = seg_a, b = seg_b, c = the_rest`
*   'seg_a/the_rest'`-> a = seg_a, b = None, c = the_rest`
*   'seg_a'`-> a = seg_a, b = None, c = None`

**注意：**如果没有指定其他内容，则没有义务赋予 None 值。它们**可能**不存在（例 2 中的 b，例 3 中的 b 和 c）。

如果拆分结果为 1 项，则将其提供给变量 a。如果拆分结果为 2 项，则将其分配给变量 a 和 c 如果拆分结果为 3 项，则将其段分配给变量 a、b 和 c

我发现了 2 种实现这一点的方法，它们似乎都不是 Pythonic，因此导致了这个问题。

**方法一：**

```
Split.
Count.
Depending on count, appoint segments to variables with IF.. Elif.. Elif.. Else. statement 
```

**方法 B：** 使用列表理解和嵌套的 Try-Except 块。前任：

```
try:
    a, b, c = [i for i in to_split.split("/", 2)]
except ValueError:
    try:
        a, c =  [i for i in to_split.split("/", 1)]
        b = None
    except ValueError:
        a = to_split
        b, c = None, None 
```

**我的问题（简短）：**

*   什么是正确的 Pythonic 方法将这个字符串分割成它的段并将它们指定给变量 a、b 和 c？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:37:38.767

我会做：

```
l = to_split.split("/", 2)
a, b, c = l + [None] * (3 - len(l)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:21:38.983

恕我直言，最 Pythonic 的不是最聪明的。如果某些东西一目了然，简洁明了，那么就使用它并继续您的一天。如果你想强加的规则是

> 如果拆分结果为 1 项，则将其提供给变量 a。
> 如果拆分结果为 2 个项目，则将其分配给变量 a 和 c。
> 如果拆分结果为 3 个项目，则将其分配给变量 a、b 和 c。

然后只需实现它，方法 A 样式。

```
p = to_split.split("/", 2)
if len(p) == 1:
    a, = p
elif len(p) == 2:
    a, c = p
elif len(p) == 3:
    a, b, c = p
else:
    raise ValueError("could not parse {}".format(to_split)) 
```

我可以阅读并确切地知道它在做什么。如果那里有错误——比如说我已经换了`b`，`c`什么时候换`len(p) == 2`——一旦我看到问题就很容易修复。

您愿意让变量未定义似乎有点奇怪——您必须稍后进行分支以避免得到 a `NameError`，并且可以并且可能应该通过一些重构来避免这种情况。根据我的经验，其他地方可能有点不对劲。即使不更改任何其他内容，我也会包括`a, b, c = [None]*3`, 我自己。

有助于保持代码可维护性的一条规则是，我们应该尽量减少我们告诉某人算法应该做什么和我们告诉计算机做什么之间的距离。在这里，由于您想要做的几乎可以直接转录成 Python，所以我会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T18:30:02.547

你可以试试：

```
 a,b,c = (to_split("/",2) + [None]*3)[0:3] 
```

但是我同意@DSM：最pythonic的方法并不总是解决问题的最佳方法。一开始可能没问题，但更冗长的代码在可读性方面效果最好。

这就是我喜欢 Python 的原因之一：解决问题有多种方法，开发人员可以根据自己的需要选择最好的方法。

# iphone - 如何通过从 iOS 多任务栏中删除我的应用程序何时退出

> ID：14538888
> 
> 赞同：0
> 
> 时间：2013-01-26T16:23:43.553
> 
> 标签：iphone, ios, objective-c

众所周知，当用户在显示底部多任务栏（iOS的任务栏）的同时按住主页按钮，他可以退出任何应用程序并将其从栏中删除，如何为我的应用程序检查这种情况.

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:06:02.723

对于“普通”应用程序，无法知道用户何时从“最近使用的应用程序列表”栏中终止您的应用程序。“正常”应用程序是不选择退出后台执行的 iOS 应用程序和不能真正在后台全时运行的应用程序（例如 GPS 和 VOIP 应用程序）。

一旦您的应用程序进入后台，该应用程序可能会通过以下两种方式之一终止：

1.  操作系统需要更多资源
2.  用户使用“最近使用的应用列表”将应用从列表中删除

在这两种情况下，一个普通的应用程序都会被简单地杀死。不会向应用程序发送任何类型的通知。

被允许真正在后台运行的应用程序将通过`UIApplication applicationWillTerminate:`方法和通知进行`UIApplicationWillTerminateNotification`通知。

由于普通应用程序在进入后台时会暂停，因此最好在应用程序进入后台时保存数据或保持任何状态，并假设应用程序可以在暂停时终止。

还要记住，即使应用程序没有运行或暂停，它也可能出现在“最近使用的应用程序列表”中。如果操作系统终止暂停的应用程序以将资源用于最近的应用程序，则终止的应用程序仍会显示在列表中。此时用户仍然可以从列表中删除该应用程序，但该应用程序已经终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:27:49.837

In the application delegate, implement the

```
- (void)applicationWillTerminate:(UIApplication *)app; 
```

method. This is called when the application is quit (either by the OS or the user).

# android - Android，从服务接收消息后调用类方法

> ID：14538896
> 
> 赞同：0
> 
> 时间：2013-01-26T16:24:13.210
> 
> 标签：android, service, bundle, handler, message

好吧，我有一个服务，我有一个活动。他们通过消息进行交流（它必须与消息交流，所以请不要告诉我有关意图或其他事情的信息）。

我从服务处收到一个捆绑包，一切正常。

现在有了我收到的捆绑包，我想做点什么。我想从“SomeClass”调用一个方法，但我不能，因为我在“IncomingHandler”类中。

从 IncomingHandler 内部调用 SomeClass 的最佳方式是什么？

提前致谢

```
class SomeClass implements ServiceConnection {
    class IncomingHandler extends Handler {
            @Override
            public void handleMessage(Message msg) {
                switch (msg.what) {
                    case MyService.MS_GET_SOMETHING:
                         Bundle received=msg.getData();
                         ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:30:57.970

If you really want the activity to be calling methods on the service, its time to learn about AIDL, which allows an Activity to make function calls on a bound service via an RPC mechanism. [Documentation found here.](http://developer.android.com/guide/components/aidl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:56:20.933

我已经实现了这样的功能（活动中的服务调用方法）：

服务发送广播消息。

Activity 有一个本地嵌套的广播接收器，可以调用父 Activity 中的方法。

```
public class MainActivity extends Activity {
    private BroadcastReceiver myReceiver = null;

    class _RemoteTimeTrackerReceiver extends BroadcastReceiver {
        @Override
        public void onReceive (Context context, Intent intent) {
                            // call method in activity
            reloadGui();
        }
    }

    @Override
    public void onResume() {
        super.onResume();

        if (myReceiver == null)
        {
            myReceiver = new _RemoteTimeTrackerReceiver();
            IntentFilter filter = new IntentFilter(Global.REFRESH_GUI);
            registerReceiver(myReceiver, filter);
        }

        reloadGui();

    }

    @Override
    public void onPause() {

        if (myReceiver != null)
        {
            unregisterReceiver(myReceiver);
            myReceiver = null;
        }

        super.onPause();

    }

            void reloadGui() {} 
```

# java - Java中字符串和整数的空值

> ID：14538899
> 
> 赞同：49
> 
> 时间：2013-01-26T16:24:31.043
> 
> 标签：java, string, nullpointerexception, addition, autoboxing

```
public class Test {
    public static void main(String[] args) {

        String s = null;
        String s1 = null;
        Integer i = null;
        Integer i1 = null;

        System.out.println(s+i);
        System.out.println(i+s);
        System.out.println(s+s1);

        try {
            System.out.println(i+i1);
        } catch (NullPointerException np) {         
            System.out.print("NullPointerException");       
        }
    }

} 
```

问题很简单——为什么我`NullPointerException`只在最后一行收到一个？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-26T16:32:31.767

您的代码使用了两种不同的[加法运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18)。前三行使用[字符串连接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)，而最后一行使用[数字加法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)。

字符串连接被[明确定义`null`为`"null"`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.11)：

> *   如果引用为`null`，则将其转换为字符串`"null"`（四个 ASCII 字符`n`、`u`、`l`、`l`）。

因此没有NPE。

将两个`Integer`对象加在一起需要将它们[拆箱](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)。这导致`null`引用被取消引用，从而导致 NPE：

> *   如果`r`为空，拆箱转换会抛出一个`NullPointerException`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-26T16:27:53.963

请注意，前三个`+`运算符用法涉及字符串连接。只有最后一个是实际的数字*sum*。当涉及字符串连接时（涉及`s`变量），Java 编译器使用一些巧妙的技巧来提高性能。它将`+`运算符替换为`StringBuilder`. 例如，您的第一行被翻译为：

```
StringBuilder tmp = new StringBuilder();
tmp.append(s);
tmp.append(i);
System.out.println(tmp); 
```

`StringBuilder`是`null`- 友好的，所以无论您作为参数传递什么，它都会很好地用`"null"`字符串替换它。

最后一行的情况有所不同。在那里你引用了两个`Integer`对象。JVM 在这里唯一能做的就是将它们拆箱 ( `i.intValue()`) 并进行实际计算。拆箱`null`原因`NullPointerException`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-26T16:29:23.747

`+`任何与 a的连接（运算符）都会`String`导致 a `String`。每个操作数首先转换为字符串（使用`toString()`或使用 value `"null"`），然后连接。

但是最后一个操作`Integer`只涉及 s，所以前面的规则不适用。它不是串联，而是加法。但是要添加两个`Integer`s，它会将对象 ( s) 转换为原始值 (int)，如果 s为 null `Integer`，则这是不可能的。`Integer`这就是为什么你得到一个`NullPointerException`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T16:28:07.783

似乎是自动拆箱的情况。如果你有两个`Integer`s`first`和`second`，那么它们相加的结果就是`first.intValue() + second.intValue()`。由于它们都为空，因此会导致 NPE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T16:41:20.803

看看你程序的字节码。您会注意到您的 null 对象正在作为参数传递给 PrintStream.print() 方法。print() 方法的源代码使用 String.valueOf() 如下所示：

```
public static String valueOf(Object obj) {
    return (obj == null) ? "null" : obj.toString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T17:51:26.033

应该注意的是，这个问题的答案从输出中应该是显而易见的：

```
C:\Temp>java Test
nullnull
nullnull
nullnull
NullPointerException 
```

# ios - iOS：基于网络连接使用活动指示器的规则是什么？

> ID：14538900
> 
> 赞同：1
> 
> 时间：2013-01-26T16:24:43.030
> 
> 标签：ios

在开发 iPhone 应用程序之前，我认为每当 iPhone 进行网络访问时，它都会启动 Activity Indicator。现在我正在学习制作应用程序，我明白事实并非如此。网络活动指示器只有在我们决定让它出现时才会出现，即使根本没有网络。

如果我错了就阻止我。

如果我不是，有没有办法确保我的应用程序正在使用网络？

我正在做一个基于 Evernote SDK 的应用程序，当我启动 Evernote 创建时，我没有使用任何 NSURLConnection 或类似的东西，我无法确定它是在下载还是上传东西。我应该什么时候启动活动指示器？我应该什么时候停止它？

有规则吗？有标准方法可以知道吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:39:31.840

与其尝试“确保您的应用程序是否使用网络”，不如将显示指示器的行为与操作联系起来。即，当你开始一个网络操作时，你显示它，当调用网络操作的完成或错误回调时，你隐藏它。当然，如果您正在执行多个并行操作，那么您需要计算活动操作的数量。像这样的东西：

```
int nNetworkOps = 0;

- (void)startNetworkingOperation
{
    nNetworkOps++;
    [[UIApplication sharedApplication] setNetworkActivityIndicatorEnabled:YES];

    [NSURLConnection sendAsynchronousRequest:rq queue:q completionHandler:^(NSURLResponse *resp, NSData *d, NSError *e) {
        [self anOpHasFinished];
    }];
}

- (void)anOpHasFinished
{
    if (--nNetworkOps == 0) {
        // hide the activity indicator
        // You have to do this on the main thread
        // (left to you as an exercise)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:44:25.580

活动指标的使用没有严格的规定。您应该使用指示器来告诉用户实际上在后台发生了一些事情。

例如，如果您正在创建需要使用某些 Web 服务进行搜索的应用程序，用户输入关键字并按下按钮，您联系服务器，服务器返回结果并显示带有搜索结果的新视图。请注意点击搜索按钮的那一刻，如果您没有显示活动指示器，用户可能会认为搜索没有执行，他会尝试多按几次，直到他变得紧张并关闭我们的应用程序。如果我们显示活动指示器，用户将知道搜索正在后台执行，他会耐心等待结果。

在某些情况下，您有网络通信，但没有显示活动指示器。例如，在每次位置更新时将 gps 位置发送到服务器的应用程序。在这里，您不希望用户知道网络通信何时发生，因为它是不必要的，并且在此期间可能会变得令人沮丧。

# c# - c#中闭包中使用其字段时是否被闭包捕获的对象

> ID：14538902
> 
> 赞同：1
> 
> 时间：2013-01-26T16:24:49.223
> 
> 标签：c#, garbage-collection, closures

如果一个匿名方法捕获了一个对象的一个​​字段，整个对象会被捕获而不是被垃圾收集吗？

所以下面是一个片段，我想知道的是，只要匿名方法没有从列表中显式删除，SessionKeeper 是否会保存对象 f：

```
class Foo
{
    public String State { get; set; }
    public void KeepState()
    {
        SessionKeeper.Singleton.Add(delegate
        {
            //do something with this.State
        });
    }
}

Foo f = new Foo();
f.KeepState(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T16:27:13.140

> 如果一个匿名方法捕获了一个对象的一个​​字段，整个对象会被捕获而不是被垃圾收集吗？

这个问题以虚假为前提，因此无法明智地回答。匿名方法仅“捕获”局部变量、形式参数和`this`，从不捕获类的字段。类的字段、数组的元素等等，为了结束的目的，不被认为是“外部变量”。

现在，如果该字段是*本地*字段，那么*您已经使用了本地*，并且本地将被捕获。但无论您是否将其用于其字段，它都会被捕获；领域没有进入它。

# c++ - 如何在迷宫中找到最短路径？

> ID：14538909
> 
> 赞同：0
> 
> 时间：2013-01-26T16:25:10.333
> 
> 标签：c++, algorithm, qt, maze

我的迷宫是一个具有二维的 int 数组，`int maze[][]`包含`0,1,START(2),GOAL(3)`. 我想打印最短路径。

我有一个功能，但它不显示最短路径，而是一条到最后的路径：

```
bool RenderThread::find_path(int x, int y)
{
    int maze_size=mmaze->size*2;

    if ( x < 0 || x > maze_size  || y < 0 || y > maze_size  ) return FALSE;

    if ( toSolve1->maze_data[y][x] == G ) return TRUE;

    if ( toSolve1->maze_data[y][x] != PATH && toSolve1->maze_data[y][x] != S ) return FALSE;

    toSolve1->setRed(y,x);

    if ( find_path(x, y - 1) == TRUE ) return TRUE;

    if ( find_path(x + 1, y) == TRUE ) return TRUE;

    if ( find_path(x, y + 1) == TRUE ) return TRUE;

    if ( find_path(x - 1, y) == TRUE ) return TRUE;

    toSolve1->setPath(y,x);

    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:36:30.017

我会推荐[A* 搜索](http://en.wikipedia.org/wiki/A%2a_search_algorithm)算法。

[伪代码](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Pseudocode)：

```
function A*(start,goal)
    closedset := the empty set    // The set of nodes already evaluated.
    openset := {start}    // The set of tentative nodes to be evaluated, initially containing the start node
    came_from := the empty map    // The map of navigated nodes.

    g_score[start] := 0    // Cost from start along best known path.
    // Estimated total cost from start to goal through y.
    f_score[start] := g_score[start] + heuristic_cost_estimate(start, goal)

    while openset is not empty
        current := the node in openset having the lowest f_score[] value
        if current = goal
            return reconstruct_path(came_from, goal)

        remove current from openset
        add current to closedset
        for each neighbor in neighbor_nodes(current)
            if neighbor in closedset
                continue
            tentative_g_score := g_score[current] + dist_between(current,neighbor)

            if neighbor not in openset or tentative_g_score <= g_score[neighbor] 
                came_from[neighbor] := current
                g_score[neighbor] := tentative_g_score
                f_score[neighbor] := g_score[neighbor] + heuristic_cost_estimate(neighbor, goal)
                if neighbor not in openset
                    add neighbor to openset

    return failure

function reconstruct_path(came_from, current_node)
    if came_from[current_node] in set
        p := reconstruct_path(came_from, came_from[current_node])
        return (p + current_node)
    else
        return current_node 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:46:12.997

如果我们假设你的迷宫是一个网格，并且墙壁被标记为不可访问的网格空间，那么 A* Jump Point Search 是目前这个搜索空间最快的最优算法。

# unit-testing - 当它们是对象依赖项时，如何在编写源代码之前编写测试代码？

> ID：14538910
> 
> 赞同：2
> 
> 时间：2013-01-26T16:25:18.927
> 
> 标签：unit-testing, tdd

我举个例子：
**要求**：按照以下规则构造一块材料：
在给定的 <100 => 材料是绿色的
100 < 在 <300=> 的材料是黄色
的 > 300=> 的材料是红色的

我的测试课：

```
 class MaterialTest{
          MaterialConstructor materialCons
          public void testBuild(){
                 materialCons.setAmount(150);
                 Material material=materialCons.build();
                 assertEqual(material.getColor(),"Yellow");
              }
    } 
```

从知道我不知道如何实现 materialCons.build(); 经过设计和分析，我实现了 MaterialCosntructor，如下所示：

```
 public class MaterialConstructor {

         private Helper1 helper1;
         private Helper2 helper2

        MaterialConstructor (Helper1 help1, Helper2 help2){
      .................   
    }

    public Material build(Double among){
         part1=helper1.builpart(among);
        return helper2.construct(part1);
    }

} 
```

在我最初的测试类中，我必须包含如下代码：

```
helper1=createMock(Helper1)
helper2=createMock(Helper2)

materialCons=new MaterialConstructor (helper1, helper2)

.....................

expected(helper1.builpart(150)).andReturn(some result)
expected(helper2.construct(some result)).andReturn("Yellow") 
```

结果我们可以得到这个更新的类测试：

```
 class MaterialTest{
         MaterialConstructor materialCons
        public void testBuild(){
            helper1=createMock(Helper1)
            helper2=createMock(Helper2)
            materialCons=new MaterialConstructor (helper1, helper2)
            expected(helper1.builpart(150)).andReturn(some result)
            expected(helper2.construct(some result)).andReturn("Yellow")
             materialCons.setAmount(150);
             Material material=materialCons.build();
             assertEqual(material.getColor(),"Yellow");

          }
            } 
```

因此我的测试代码将在编写我的源代码后更新！

这会出现很多次（因为在规范时很难知道必须使用哪个依赖类来解决问题）。那么单元测试类在编写源代码后将永远过时！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:11:31.700

遵循严格的 TDD 工作流程（例如 TDD 的[3 条法则）](http://agileinaflash.blogspot.fr/2009/03/unclebobs-three-rules-of-tdd.html)肯定会结束您的犹豫。

有了它，您就不能拥有诸如“经过设计和分析后，我已经实现了 MaterialCosntructor ...”之类的东西，因为您应该

> 只编写足以通过测试的生产代码

这基本上意味着：只需`"Yellow"`作为您的第一个实现返回。

然后，您将添加更多测试（绿色、红色材料）并逐步设计您的类来处理这些额外的案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:02:38.300

不，我认为拥有用于测试对象的单元测试用例绝对是绝妙的主意。我认为编写源代码后测试类不会过时，因为在您的情况下，您已经设计了类成员和类方法..似乎唯一阻止您的是编写 EasyMock 测试用例..这里有一些帮助材料，也许它会让您更清楚[IBM Developer Works Simulation Page](http://www.ibm.com/developerworks/java/library/j-easymock/index.html) ..

还有一个超链接是由 EasyMock 自述文件自己提供的[EasyMock 自述文件](http://www.easymock.org/EasyMock2_2_Documentation.html)

# javascript - 使用帧号在 spritesheet 中查找行/列

> ID：14538913
> 
> 赞同：0
> 
> 时间：2013-01-26T16:25:24.530
> 
> 标签：javascript

假设我有精灵表，我知道有 4 列精灵和 n 行。那么我将如何找到特定框架的行/列？

我试过：

```
function drawSprite(num){
        var row = Math.floor(num/col_count)+1;
        var col = parseInt(num%col_count); // forget about parseInt for now
        console.log("Row:"+row+"   Col:"+col);
    } 
```

因为`frame 7`它完美地工作，给`Row:2 Col:3`，但是对于`frame 8`，它给`Col:0`，有没有办法让它给 4，而不在那里检查三元条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:28:48.070

行和列应该从零开始，位于`(0,0)`左上角。去掉`+1`就`row`行了，然后你就可以将坐标乘以帧大小了。

# c# - 具有构造函数参数的通用可访问类/对象

> ID：14538915
> 
> 赞同：0
> 
> 时间：2013-01-26T16:25:28.247
> 
> 标签：c#, unit-testing, design-patterns, architecture, dependency-injection

我正在创建一个平台/基础组件（.NET 程序集集），它将负责访问（读/写）配置值。该组件将由将在平台上创建的其他组件使用。

我希望这个组件对消费者来说易于使用，同时具有很高的可测试性和可维护性。在我当前的设计中，我有一个包含一些方法（例如 GetKeyValueSetting）的静态类（ConfigurationManager）。此 ConfigurationManager 类的特殊之处在于它既可以从本地 .NET .config 文件中获取配置值，也可以从 SharePoint 列表（一些组件托管在共享 SharePoint 环境中）甚至从另一个共享配置值存储中获取配置值. Manager 应该能够以优先方式从多个位置读取：

*   如果在 SharePoint 上运行：1\. SharePointSettingsProvider，2\. SharedStoreSettingsProvider
*   如果不在 SharePoint 上运行： 1\. ConfigFileSettingsProvider 2\. SharedStoreSettingsProvider

我知道静态类会在可测试性、可扩展性等方面产生很多问题，所以我不想使用它。我的下一个替代方案是 Singleton，但就上述 -ilities 而言，这并不是一个更好的解决方案。有更好的解决方案的想法吗？

我目前的设计如下：

```
public static class ConfigurationManager
{
    // internal for testability
    internal IEnumerable<ISettingsProvider> SettingsProviders {get;set;}

    // internal for testability
    internal ISettingsProviderFactory ProvidersFactory {get;set;}

    public static string GetKeyValueSetting(string key)
    {        
    }
}

public interface ISettingsProvider
{
    string GetKeyValueSetting(string key);
}

public class ConfigFileSettingsProvider : ISettingsProvider
{
}

public class SharePointSettingsProvider : ISettingsProvider
{
}

public class SharedStoreSettingsProvider : ISettingsProvider
{
}

public interface ISettingsProviderFactory
{
    IEnumerable<ISettingsProvider> GetProviders();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:42:37.200

为什么不这样：

```
public abstract class ConfigurationManager
{
    public abstract string GetKeyValueSetting(string key);

    public static ConfigurationManager GetInstance()
    {
         return GetInstance(GetDefaultSettingProvider(), GetDefaultProviderFactory());
    }

    public static ConfigurationManager GetInstance(ISettingsProvider provider, IProviderFactory factory)
    {
         return new InternallyVisibleConfigurationManagerImplementation(provider, factory);
    }
} 
```

这有很多好处：

*   ConfigurationManager 是抽象的，所以调用代码可以很容易地 Mock
*   很容易得到一个默认的实现
*   调用程序集可以很容易地用不同的提供者和工厂来配置它
*   调用程序集**不能**耦合到具体类型
*   您可以轻松更改特定的实现类型（即，也许您需要一个缓存代理，这样您就不需要经常对共享点进行昂贵的调用）
*   您保持所有易于测试的能力
*   您可以重构为单例或生命周期管理的其他变体，而无需更改客户端代码

如果调用者真的讨厌这个，并且不介意他们的单元测试有时调用共享点站点，你可以添加一个这样的方便方法：

```
public static string GetKeyValueSetting(string key)
{
    return GetInstance().GetKeyValueSetting(key);
} 
```

**编辑**

要使用几个商店，请创建一个像这样的类：

```
internal class OrderedCompositeSettingProvider : ISettingProvider
{
    private readonly ISettingProvider[] _providers;

    private OrderedCompositeSettingProvider(ISettingProvider[] providers)
    {
        _providers = providers;
    }

    internal static ISettingProvider GetInstance(params ISettingProvider[] providers)
    {
         return new OrderedCompositeSettingProvider(providers)
    }

    public string GetKeyValueSetting(string key)
    {
        foreach(var provider in _providers)
        {
             var setting = provider.GetKeyValueSetting(key);
             if(!string.IsNullOrEmpty(setting)) return setting;
        }
        return string.empty;
    }

} 
```

然后在 ConfigurationManager 工厂方法中：

```
public static ConfigurationManager GetInstance()
{
     return GetInstance(GetAppropriateProvider(), GetDefaultProviderFactory());
}

private static ISettingsProvider GetAppropriateProvider()
{
     if(ShouldUseSharepoint())
          return OrderedCompositeSettingProvider.GetInstance(new SharepointProvider(), new StoredSettingsProvider());

     return OrderedCompositeSettingProvider.GetInstance(new ConfigFileProvider(), new StoredSettingsProvider());
} 
```

# ssas - 如何在 SSAS 多维数据集中实现钻取

> ID：14538921
> 
> 赞同：1
> 
> 时间：2013-01-26T16:26:08.170
> 
> 标签：ssas, multidimensional-array

我有一个很好的想法，如何在关系平台中对钻取进行建模。这是 Kimball 描述的两阶段过程，您首先在每个单独的事实表上运行查询，然后应用 FULL OUTER JOIN 来组合结果。

我不知道如何在多维 SSAS 世界中对此进行建模。有人可以描述该过程或向我指出一些最佳实践示例吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:15:29.530

虽然您绝对可以为每个度量值组在多维数据集级别定义**钻取**操作...我认为不可能在多维数据集级别定义从一个度量值/度量值组到另一个的**钻取操作。**

也就是说，这种 [自定义钻取] 在应用程序级别肯定是可能的。例如，您可以在 SSRS 报表中的单元格上定义钻取操作，该报表执行通过参数化 MDX 源查询提取数据的子报表。这是[一个例子](http://blogs.msdn.com/b/arvindsh/archive/2012/03/19/implementing-mdx-drillthrough-in-ssrs.aspx)。

# c# - 应存储在数据库中的数据的加密。并理解所使用的“钥匙”的概念，

> ID：14538924
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:26:20.853
> 
> 标签：c#, asp.net, .net, encryption, key

我是 C# 和 ASP.NET 的新手，我现在必须做一个项目。它处理公司员工的机密数据，因此需要对其进行加密。我不确定我是否能够使用我自己的加密算法。如果我使用任何现有的算法，他们说我应该找到一种万无一失的方法来存储密钥。

老实说，我不太了解加密中的“密钥”一词。我希望有人简要介绍一下，并帮助我了解如何推进这个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:33:30.847

[http://en.wikipedia.org/wiki/Key_%28cryptography%29](http://en.wikipedia.org/wiki/Key_%28cryptography%29)

不知道，但也许从那里开始？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:44:19.457

密码学的第一条规则——永远不要使用自己的算法，除非你是博士。和其他几个博士正在帮助你，即使那样，只有在公共审计后才能使用。

他们存储密钥的意思是它不应该暴露在任何地方——如果攻击者可以获得密钥，他们就可以解密数据库中的所有数据。目前，没有已知的方法可以做到这一点。您可以将密钥存储在网站根文件夹之外的文件中 - 这样，服务器本身必须受到威胁，您的应用程序必须受到威胁（例如，通过使其显示“../../key.txt”文件，因此下降到 webroot 之下）或者您的应用程序必须被诱骗为攻击者透明地加密/解密数据（例如，通过存在允许绕过身份验证的错误，从而允许他们使用您的应用程序与数据库对话）。

对于问题的最后一部分，请使用@Haxx 的答案 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T17:46:18.177

恕我直言：

*   正如已经建议的那样，不要拼凑你的“自己的”，使用已经过广泛测试的框架中的现有算法。无论他们可能有什么弱点（可能）仍然比你自己拼凑起来的要好。

*   了解需要**加密**的内容，这几乎意味着在某些时候需要**解密**与需要**散列**的数据（单向 - 例如密码）。

*   决定您是否希望在应用程序端发生这种情况，或者，如果资源可供您使用，如 SQL 服务器（用于存储数据），则在数据库端（与您的 DBA 讨论）。您可以单独在 SQL Server 中进行加密和散列。

*   在应用程序方面，您可以考虑将密钥存储在您的`web.config`部分并随后加密该部分 - 就像为您的数据库连接字符串执行此操作的选项（加密 web.config 的连接部分）一样。这样，即使您的密钥也不是纯文本。

# solr - 使用 eDisMax 通过多个字段加权分数的总和计算最终分数

> ID：14538933
> 
> 赞同：1
> 
> 时间：2013-01-26T16:27:12.033
> 
> 标签：solr, lucene

我想通过对多个字段分数的加权分数求和来计算每个文档的最终分数，而不是像 edisMAx 查询解析器那样获得 MAX。

因此，如果我有三个字段；标题和描述，我希望我的最终分数是这样的：

最终得分 = w1 * title_field_score + (1-w1) * description_field_score + (1-w1 -w2) * description_field_score

其中 w1,w2 可以是 0 到 1 之间的值。

没有任何相似性的默认相似性给出了这个[排名](http://explain.solr.pl/explains/l51qt6id)。这使用以下搜索处理程序：

```
 <requestHandler name="/select" class="solr.SearchHandler">
 <lst name="defaults">
   <str name="echoParams">explicit</str>
   <int name="rows">10</int>
   <str name="df">detail_page_text</str>

   <!-- Query settings -->
   <str name="defType">edismax</str>
   <str name="qf">
      job_title description detail_page_text
   </str> 
```

现在通过使用下面的领带，似乎我们得到了一个理想的[排名](http://explain.solr.pl/explains/2twcjbmf)。

```
<str name="tie">1.0</str> 
```

所以我的问题是使用 tie 参数是否是基于所有字段相等（或附加权重）获得加权排名分数的正确方法。

任何提示将不胜感激！干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:56:58.633

Dismax [tie](http://wiki.apache.org/solr/DisMaxQParserPlugin#tie_.28Tie_breaker.29)是您应该用于加权评分的参数。

tie = 1.0 -> 所有个人分数的总和。

```
19.07% 0.69268036 (MATCH) **max plus 1.0 times** others of:
    1.96% 0.07105611 detail_page_text:senior
    4.16% 0.15101658 description:senior
    12.96% 0.4706077 job_title:senior 
```

tie = 0.0 -> Max of the Individual Scores.

```
17.83% 0.7043001 (MATCH) **max** of:  
    - 0.028197879 detail_page_text:senior  
    - 0.04566047 description:senior  
    - 17.83% 0.7043001 job_title:senior 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:24:02.513

在实践中，使用`tie=1.0`应该可以很好地工作。我不确定这是否与标准的 lucene 查询有什么不同（我想知道，特别是，如果[coord](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html#formula_coord)会产生不同的影响）。

从语义上看，它似乎有点尴尬。默认情况下，它似乎使用`dismax`or`edismax`查询。将其设置为使用默认的 Lucene 查询似乎是更直接的方法，例如`deftype=lucene&query=foo`（[参见此处](http://wiki.apache.org/solr/SolrQuerySyntax#Specifying_a_Query_Parser)）。

# ruby-on-rails - 如何在 AWS Elastic Beanstalk 上使用 Resque 运行 Rails 后台作业？

> ID：14538940
> 
> 赞同：5
> 
> 时间：2013-01-26T16:27:36.263
> 
> 标签：ruby-on-rails, amazon-web-services, resque, amazon-elastic-beanstalk

我在[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)平台上运行我的 rails 应用程序，该平台运行具有 Auto Scaling 和 Elastic Load Balancing 的单个 EC2 实例。

我想知道如何在 Elastic Beanstalk 上运行或其他一些后台作业的解决[`resque`](https://github.com/resque/resque)方案[`delayed_job`](https://github.com/tobi/delayed_job)。[`sidekicq`](http://mperham.github.com/sidekiq/)

Elastic Beanstalk 上的后台作业有哪些可能的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-03T11:27:06.190

我创建了一个 gem，[Active Elastic Job](https://github.com/tawan/active-elastic-job)，作为在 Elastic Beanstalk 上运行的 Rails 应用程序的后台作业的解决方案。它利用 Elastic Beanstalk[工作环境](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features-managing-env-tiers.html)，这些环境旨在用于 Elastic Beanstalk 应用程序的后台任务。

优点是：

*   您可以使用相同的代码库来执行后台作业，无需分支应用程序的专用版本以在工作环境中运行，
*   利用 Elastic Beanstalk 自动缩放功能，
*   无需设置外部 EC2 实例或服务来运行队列后端，如`resque`or `sidekiq`，
*   无需自定义 Elastic Beanstalk 容器。
*   保持 Elastic Beanstalk 的预定义基础架构的简单性。

然而，这个 gem 只与 Rails >= 4.2 的应用程序兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:37:30.960

启动/停止/重新启动后台作业的最佳方式是通过这些任务的初始化脚本。您可以在启动实例时将这些初始化脚本作为*服务触发。*有关为服务自定义 ElasticBeanstalk 容器的更多信息，请[点击此处](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-services)。

完成后，您可以通过为您的实例创建一个 AMI，然后通过此自定义 AMI 启动具有自动扩展功能的实例来冻结您的初始化脚本。

希望这可以帮助。

# ios - 只允许一个 UIView 实例出现在 Storyboard 中

> ID：14538944
> 
> 赞同：1
> 
> 时间：2013-01-26T16:27:46.310
> 
> 标签：ios, ios6, storyboard, uistoryboardsegue

我正在使用情节提要创建一个应用程序，其中第一个屏幕在表格视图中有歌曲列表，我想将该歌曲传递到下一个视图（我们称之为音乐播放器）。我可以做到这一点，但我还需要音乐播放器在音乐播放器播放音乐时跟踪各种锻炼统计数据。

问题是，如果我进入音乐播放器，返回歌曲列表视图，然后再次选择一个单元格，它会创建一个全新的音乐播放器实例。这是有问题的，因为它创建了一个新的计时器并且我丢失了所有的锻炼统计数据。我还发现原来的音乐播放器实例仍然存在，因为计时器继续触发。

我能做些什么来确保只有一个音乐播放器实例继续出现吗？

这是我当前的代码（按执行顺序）：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        self.nextScreen = [segue destinationViewController];
    } 
```

^ 这会将下一个屏幕存储为成员变量。我必须这样做，因为`prepareForSeque:`之前调用过`didSelectRowAtIndexPath:`，我需要在下一个视图上设置数据。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    self.nextScreen.currentSong = [self.allSongs objectAtIndex:indexPath.row];
} 
```

^这只是设置歌曲。

然后我继续根据需要设置下一个视图`viewDidLoad:`。

有什么技巧可以解决这个问题吗？如果没有，有什么建议可以解决这个问题吗？我在想一种解决方法是我必须设置某种单例，我只是不确定这是否是最好的选择，因为我需要经常重置数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:40:36.243

你不能用 segues 做到这一点。转场（展开转场除外）总是在执行时创建新实例。您可以推送到您的新控制器（假设您嵌入在导航控制器中），并且在您这样做的方法中，只有在第一次时才创建一个新实例。

```
-(IBAction)goToNext {

    if (! self.next){
        self.next = [[NextViewController alloc] init];
        self.next.whateverProperty = whatever you want to pass;
        self.next.delegate = self; // set the delegate here if you're using delegation to send info back to this controller
    }
    [self.navigationController pushViewController:next animated:YES];
} 
```

如果需要，您仍然可以在情节提要中设置控制器，只是不要将它们连接在一起。在这种情况下，您将使用以下内容而不是使用 alloc init 来实例化它们：

```
self.next = [self.storyboard instantiateViewControllerWithIdentifier:@"next"]; 
```

# disqus - Getting disqus_identifier from disqus admin panel

> ID：14538950
> 
> 赞同：5
> 
> 时间：2013-01-26T16:28:01.690
> 
> 标签：disqus

I've got a bunch of comments from an old system that I've successfully imported into disqus. Now I need to hook them up into the new system. Doing so should just be as simple as setting the disqus_identifier correctly.

It's frustrating because the comments are visible in the disqus admin panel, but I can't find a way to get the disqus_identifier for a given comment in the disqus admin panel. Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:23:37.440

通常，标识符通过以下三种方式之一附加到线程：

1.  通过在线程第**一次**加载时设置“disqus_identifier”javascript 变量
2.  通过在导入中设置线程标识符
3.  通过使用 Disqus 迁移工具将两个线程合并在一起

在您的情况下，#3 是您的最佳选择。重要的是要记住，在使用标识符时，URL 也是一个唯一标识符（每个唯一线程只有一个）。因此，您需要找到那些缺失评论的 URL 并迁移它们。对于最精细的控制，您需要使用此处记录的 URL 映射器：http: [//help.disqus.com/customer/portal/articles/912757-url-mapper](http://help.disqus.com/customer/portal/articles/912757-url-mapper)

该工具允许您下载所有现有线程 URL 的 CSV。在该 CSV 中，您需要确定哪些 URL 与缺少的评论相关联。要查看缺少的评论与哪个 URL 相关联，请转到您的审核面板，将鼠标悬停在线程的链接上并记下 URL（但忽略“#comment-12345678”锚点）。通常，断开连接的线程有一个模式，因此应该可以帮助您在 CSV 中找到它们。

然后在下一列中，您需要输入当前与相应文章页面关联的线程的 URL。只需确保您输入的 URL 与您的网站相关联。如果您不确定是否可以通过转到*新*创建的评论并将鼠标悬停在他们的线程上以获取 URL（使用查找旧线程的相同技术）来在审核面板中找到这一点。

如果您愿意，也可以让 API 为您工作。您只需注册 API 密钥并使用控制台即可获取您网站上所有线程数据的列表（url、标识符、json 格式的评论）：http: [//disqus.com/api/](http://disqus.com/api/)

通常，您需要为此目的使用[forums/listThreads端点。](http://disqus.com/api/docs/forums/listThreads/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-14T22:55:04.267

要在您安装了 Disqus 的页面上查找 Disqus 标识符，请打开开发人员工具（Chrome 或 Firefox），转到控制台，然后键入`disqus_identifier`并按 Enter。结果将是该**页面**的唯一标识符。

![控制台中的 Disqus 标识符](../Images/a719786e5b9b3ea4c26cccdca41673d9.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T03:09:19.617

如果你问我，UI 会失败。我通过以下方式绕过整个管理 Web 界面：

`Export`评论并下载 XML 文件。然后在文件中搜索感兴趣的线程并记下目标 URL（或标识符）。

# c# - 着色 C# 控制台无法正常工作

> ID：14538955
> 
> 赞同：0
> 
> 时间：2013-01-26T16:28:15.493
> 
> 标签：c#, console, colorize

我需要通过方法对字符串进行着色，所以我使用`Console.ForegroundColor`属性并稍后编写文本，但是我在某个地方犯了一个错误，所以所有行都是一种颜色。还是有更好的解决方案？我需要通过 &0-&f （十六进制）对字符串进行着色并将其输出到控制台，这是我的解决方案：

```
 public static void ColorizeConsoleMessage(string message)
    {
        var matches = Regex.Matches(message, "&+[0-9a-f]");
        var split = Regex.Split(message, "&+[0-9a-f]");
        var def = Console.ForegroundColor;
        var i = 0;
        foreach (var match in matches)
        {
            switch (match.ToString().Replace("&", "").ToCharArray()[0])
            {
                case '0':
                    Console.ForegroundColor = ConsoleColor.White;
                    break;
                case '1':
                    Console.ForegroundColor = ConsoleColor.Gray;
                    break;
                case '2':
                    Console.ForegroundColor = ConsoleColor.DarkGray;
                    break;
                case '3': 
                    Console.ForegroundColor = ConsoleColor.Black;
                    break;
                case '4':
                    Console.ForegroundColor = ConsoleColor.Red;
                    break;
                case '5':
                    Console.ForegroundColor = ConsoleColor.Green;
                    break;
                case '6':
                    Console.ForegroundColor = ConsoleColor.Blue;
                    break;
                case '7':
                    Console.ForegroundColor = ConsoleColor.Yellow;
                    break;
                default:
                    Console.ForegroundColor = ConsoleColor.White;
                    break;
            }
            Console.Write(split[i]);
            i++;
        }
        Console.WriteLine();
        Console.ForegroundColor = def;
    } 
```

并测试：`EventManager.ColorizeConsoleMessage("&4Hello, &6world!");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:40:48.080

唯一的解决办法是

```
var i = 1; 
```

Regex.Split 在 split[] 中创建了一个空字符串元素，这弄乱了所有索引值

```
 public static void ColorizeConsoleMessage(string message)
    {
        MatchCollection matches = Regex.Matches(message, "&+[0-9a-f]");
        string[] split = Regex.Split(message, "&+[0-9a-f]");
        ConsoleColor def = Console.ForegroundColor;
        int i = 1;
        foreach (Match match in matches)
        {
            switch (match.Value[1])
            {
                case '0':
                    Console.ForegroundColor = ConsoleColor.White;
                    break;
                case '1':
                    Console.ForegroundColor = ConsoleColor.Gray;
                    break;
                case '2':
                    Console.ForegroundColor = ConsoleColor.DarkGray;
                    break;
                case '3':
                    Console.ForegroundColor = ConsoleColor.Black;
                    break;
                case '4':
                    Console.ForegroundColor = ConsoleColor.Red;
                    break;
                case '5':
                    Console.ForegroundColor = ConsoleColor.Green;
                    break;
                case '6':
                    Console.ForegroundColor = ConsoleColor.Blue;
                    break;
                case '7':
                    Console.ForegroundColor = ConsoleColor.Yellow;
                    break;
                default:
                    Console.ForegroundColor = ConsoleColor.White;
                    break;
            }
            Console.Write(split[i]);
            i++;
        }
        Console.WriteLine();
        Console.ForegroundColor = def;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:53:46.840

好吧，你是对的，Regex.Matches 和 Regex.Split 在一起让事情有点尴尬，所以我把它们结合起来

```
 public static void ColorizeConsoleMessage(string message)
    {
        MatchCollection matches = Regex.Matches(message, "&+([0-9a-f])([^&]+)");
        ConsoleColor def = Console.ForegroundColor;
        foreach (Match match in matches)
        {
            switch (match.Groups[1].Value[0])
            {
                case '0':
                    Console.ForegroundColor = ConsoleColor.White;
                    break;
                case '1':
                    Console.ForegroundColor = ConsoleColor.Gray;
                    break;
                case '2':
                    Console.ForegroundColor = ConsoleColor.DarkGray;
                    break;
                case '3':
                    Console.ForegroundColor = ConsoleColor.Black;
                    break;
                case '4':
                    Console.ForegroundColor = ConsoleColor.Red;
                    break;
                case '5':
                    Console.ForegroundColor = ConsoleColor.Green;
                    break;
                case '6':
                    Console.ForegroundColor = ConsoleColor.Blue;
                    break;
                case '7':
                    Console.ForegroundColor = ConsoleColor.Yellow;
                    break;
                default:
                    Console.ForegroundColor = ConsoleColor.White;
                    break;
            }
            string str_to_print = match.Groups[2].Value;
            Console.Write(str_to_print);
        }
        Console.WriteLine();
        Console.ForegroundColor = def;
    } 
```

# python - Python loop - stochastic vs batch loop, and why its taking too long?

> ID：14538961
> 
> 赞同：0
> 
> 时间：2013-01-26T16:28:54.990
> 
> 标签：python, loops, numpy

Loop 1: (Stochastic - expected faster)

```
 for i in range(len(data)):
        x = data[i]
        for t in range(0, m):
            theta[t] -= my_lambda * (np.dot(theta, x) - y[i]) * x[t] 
```

vs Loop 2: (Batch - expected slower)

```
for t in range(0, m):
        temp = 0
        for i in range(len(data)):
            x = data[i]
            temp += (np.dot(theta, x) - y[i]) * x[t]
        theta[t] = theta[t] - my_lambda * temp / M 
```

But my batch is much much much faster - One iteration Elapsed time 0.025356054306 vs my stochastic is really slower - One iteration Elapsed time 1.0576338768

Here my m is 13 and data is around 500 tuples. Can anyone tell me why so? Or where did I mess up for stochastic? Thanks!

## EDIT 1:

```
data = [[], [], ...]
data = [record1, record2 ...]
record = [1, x1, x2, ... , x_m]

theta is vector
theta = np.zeros(m+1) //np is numpy 
```

# visual-studio-2012 - Visual Studio 2012 扩展中的状态驱动菜单项

> ID：14538962
> 
> 赞同：0
> 
> 时间：2013-01-26T16:29:09.143
> 
> 标签：visual-studio-2012, visual-studio-extensions, vspackage

我正在编写一个 Visual Studio 2012 扩展，它定义了几个子菜单以进入两个现有的 Visual Studio 上下文菜单。子菜单项似乎可以正常工作，除了一件事：

在单击我的包中的第一个菜单项之前，每个菜单项的状态都是其默认状态，具体取决于其在 VSCT 文件中的定义。这适用于始终启用的菜单项，但应根据某些变化条件启用或禁用某些菜单项。安装包后，它们的状态设置正确，但是如何在单击第一项之前正确设置状态？

我的解决方案中没有默认状态。我的菜单第一次出现时，条件可能是真或假。

如果您对此有解决方案，或者知道某处的教程中已解决此问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:30:48.980

我终于在 MSDN 上一篇名为[How to: Autoload a VSPackage](http://msdn.microsoft.com/en-us/library/bb166762.aspx)的文章中找到了我的问题的答案。“技巧”是在为项目创建的包类上设置 ProvideAutoLoadAttribute。这是我正在从事的一个项目的声明：

```
[InstalledProductRegistration("#110", "#112", "1.0", IconResourceID = 400)]
[ProvideMenuResource("Menus.ctmenu", 1)]
[ProvideAutoLoad("{f1536ef8-92ec-443c-9ed7-fdadf150da82}")]
[Guid(GuidList.guidXamlHelpmeetPkgString)]
public sealed class XamlHelpmeetPackage : Package
{ ... 
```

第三行是我添加的所有内容，以使原本可以工作的扩展负载尽早而不是按需加载。

# java - 300 million items in a Map

> ID：14538963
> 
> 赞同：6
> 
> 时间：2013-01-26T16:29:13.017
> 
> 标签：java, hash, map, hashmap

1.  If each of them is guaranteed to have a unique key (generated and enforced by an external keying system) which Map implementation is the correct fit for me? Assume this has to be optimized for concurrent lookup only (The data is initialized once during the application startup).
2.  Does this 300 million unique keys have any positive or negative implications on bucketing/collisions?
3.  Any other suggestions?

My map would look something like this

```
Map<String, <boolean, boolean, boolean, boolean>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:49:29.243

其他建议？你打赌。

使用适当的键值存储，[**Redis**](http://redis.io/)是第一个想到的选项。当然，这是一个独立的过程和依赖关系，但在适当的系统设计方面，你会赢得很多时间。

应该有一个*很好*的理由让您将业务逻辑与同一进程内存中的多个数据结合起来，即使它是短暂的。我已经尝试过几次，但总是被证明是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T16:37:07.223

我不会使用地图，这需要很多内存。特别是在你的情况下。将值存储在一个数据数组中，并将键存储在排序索引数组中。在排序后的数组中，您使用 binSearch 来查找键在 data[] 中的位置。

棘手的部分将是建立数组，而不会耗尽内存。

你不需要考虑并发，因为你只从数据中读取

进一步尽量避免使用字符串作为键。尝试将它们转换为长。
此解决方案的优点：保证搜索时间不超过 log n。即使在最坏的情况下，当键对哈希码产生问题时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:54:28.333

在我看来，您可以简单地使用`TreeMap`，因为它的排序结构将为您`O(log(n))`提供数据搜索。此外，它是合格的方法，因为正如您所说，所有数据都将在启动时加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T17:13:34.603

如果您需要将所有内容保存在内存中，那么您将需要使用一些旨在与这些大量元素一起使用的库，例如[Huge collections](http://code.google.com/p/vanilla-java/wiki/HugeCollections "巨大的收藏品")。最重要的是，如果写入的数量很大，那么您还必须考虑一些更复杂的解决方案，例如[非阻塞哈希映射](http://sourceforge.net/projects/high-scale-lib/)

# python - Confuse about variable scope in python

> ID：14538968
> 
> 赞同：1
> 
> 时间：2013-01-26T16:29:49.223
> 
> 标签：python, scope

> **Possible Duplicate:**
> [“Least Astonishment” in Python: The Mutable Default Argument](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

I tried to find the answer in SO, or python but could not get a reference.

```
import random 

def test(headers=[('Application','Value')]):
    print headers
    headers.append(('Random',random.randint(0,100)))
    print headers

test()
test()
test() 
```

I keep getting this output

```
[('Application', 'Value')]
[('Application', 'Value'), ('Random', 8)]
[('Application', 'Value'), ('Random', 8)]
[('Application', 'Value'), ('Random', 8), ('Random', 46)]
[('Application', 'Value'), ('Random', 8), ('Random', 46)]
………… 
```

When I run this code seems that python holds the values of headers even though is a function parameter. Me comming from a Java, .NET and php still do not see the logic into this.

Can someone enlighten me?

# php - 清理非参数输入的正确方法

> ID：14538969
> 
> 赞同：0
> 
> 时间：2013-01-26T16:30:05.290
> 
> 标签：php, mysql, prepared-statement

我希望用户能够输入查询限制。作为 mysql 语法的一部分，`LIMIT`它不能有引号，并且可以有数字和逗号。这样做很容易：

```
preg_replace(/[^\d,]/, '', $request->post('limit')) 
```

...但是，这是不安全的，因为卫生不是在 DB 级别完成的。

清理非参数查询的输入（例如列名、限制数量等）的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:33:40.387

只有一种 100% 安全的方法来处理进入查询但不是参数的用户提供的输入：将您想要接受的输入列入白名单。

对于`LIMIT`和类似的数字量，您可以简单地将参数转换为`int`. 对于列名，唯一明智的做法是检查该名称是否完全等于数据库中的列名之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:10:45.920

1.  LIMIT 数量是完全可参数化的。如果您的 PDO 在它们上失败 - 只需*关闭仿真*
2.  对于标识符 - 唉！- PDO 没有解决方案。手动格式化它们，用反引号括起来并将这些反引号加倍
3.  对于关键字白名单是唯一的解决方案。

如您所见，整个问题的表述都不正确，因为**没有单一的方法**可以“清理”所有不同的查询部分。这才是重点。大多数人（包括 PHP 扩展的作者）不理解不同的查询部分需要不同的格式。*格式化*是另一个关键词
。因为没有“清理”——实际上没有什么需要清理的，而是**SQL 语法**所需的非常简单的规则。尽管所有注入都是必需的，但只是作为语法规则。然而，只要您的所有查询部分格式正确，您也可以安全地防止注入，*就像副作用一样*

 ****很少有人得出结论，标准占位符应该扩展到几种不同的类型。
因此，在我的班级中，我目前有 5 个：3 个用于文字（字符串、整数、标识符），2 个用于进入 IN 和 SET 运算符的复杂数据集。****

# google-app-engine - appengine instance hours calculation

> ID：14538971
> 
> 赞同：1
> 
> 时间：2013-01-26T16:30:12.730
> 
> 标签：google-app-engine

I develop an appengine application right now in python and I am surprised by the instance hours quotas I get, while I try to optimize my app for costs and performance.

I am testing right now one specific task_queue. (nothing else is running during that - before I start no instance is up)

the queue is configured with a rate/s of 100 with 100 buckets. no configured limit for max_concurrent_requests

900 tasks will get pushed in this queue. 10-11 instances pop-up in this moment to deal with it.

everything takes far less than 30 seconds and every task is executed.

I check my instance hours quotas before and after that and I consume about 0.25 - 0.40 instance hours.

why is that?

shouldn't it be much less? is there an inital cost or a minimum amount which will be charged if one instance opens?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:37:57.753

打开实例后，您至少需要 15 分钟。您的 10-11 个实例总共应该花费您大约 2.5 小时。
如果您不需要如此快速的处理，您应该使用 max_concurrent_requests 限制队列的并行处理量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:41:04.390

我很确定当高速队列上有任务积压时，调度程序会增加实例数。100/100 是一个非常高的比率。您正在告诉调度程序非常快地执行这些操作，这意味着它会启动实例来执行此操作。

除非您需要非常快速地处理这些任务，否则您应该使用低得多的速率。这将导致更少的实例和更长的任务队列。根据您的处理要求，您也许可以使用拉取队列。这样做可以让你一次租用和处理数百个任务，并利用批处理 put() 等。这真的取决于你在做什么。

# wordpress - Jekyll 网站在自定义域上的重定向问题

> ID：14538980
> 
> 赞同：0
> 
> 时间：2013-01-26T16:31:07.777
> 
> 标签：wordpress, github, jekyll

我想把我的博客从 WordPress 转移到 Jekyll。我创建了一个带有我的网站的 Github 页面，并将我的博客名称添加到它的根目录中的 CNAME 文件中。它将 Github 页面重定向到我的 WordPress 博客。从 WordPress 重定向到 Github 页面基本上是刷新我的博客，因为它重定向到 Github，而 Github 又只重定向到我的博客。该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:02:37.630

您需要更改 DNS 上的 CNAME 或 IP 以指向 GitHub。

请参阅此页面的“设置 DNS”部分：[https ://help.github.com/articles/setting-up-a-custom-domain-with-pages](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)

# android - Add a view that occupies the whole screen

> ID：14538981
> 
> 赞同：1
> 
> 时间：2013-01-26T16:31:14.103
> 
> 标签：android, android-layout

I have a relative layout with transparent background and a some views arranged in the middle, i inflate this layout and add it to the main layout with addView(), the inflated view just adds the middle elements in the corner to the parent layout, how can i make the added view occupy all the screen (tried fill_parent but it just gets ignored) This is the view i inflate

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent" >

    <RelativeLayout
        android:id="@+id/layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@color/info_bar_bg_color" >

        <ImageView
            android:id="@+id/channel_pic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@id/channel_pic"
            android:ellipsize="end"
            android:maxLines="2"
            android:textColor="@color/title_color"
            android:textSize="@dimen/title_text_size" />

        <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/title"
            android:ellipsize="end"
            android:maxLines="1"
            android:textColor="@color/date_color"
            android:textSize="@dimen/date_text_size" />

        <TextView
            android:id="@+id/hourStart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/date"
            android:textColor="@color/title_color"
            android:textSize="@dimen/title_text_size" />

        <TextView
            android:id="@+id/hourEnd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/hourStart"
            android:textColor="@color/title_color"
            android:textSize="@dimen/title_text_size" />

        <ImageView
            android:id="@+id/share_pic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/epgshare_0" />

        <ImageView
            android:id="@+id/bell_pic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/share_pic"
            android:src="@drawable/epgsharebell_0" />
    </RelativeLayout>

</RelativeLayout> 
```

and this is the main layout i add the view to

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/ic_launcher"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:onClick="openInfoBar"
        android:text="Open InfoBar" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:56:43.873

> 我膨胀这个布局并使用 addView() 将其添加到主布局中，膨胀的视图只是将角落的中间元素添加到父布局中，

发生这种情况（很可能）是因为您没有`LayoutParams`为膨胀的布局视图设置正确的。你可能会使用这样的东西：

```
View v = inflater.inflate(R.layout.to_fill_parent, null); 
```

结合简单的`addView(v)`方法将使视图表现得像你看到的那样。正确的方法是：

```
View v = inflater.inflate(R.layout.to_fill_parent, (ViewGroup)findViewById(R.id.layout), false);
//add the view with addView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:44:15.347

更改：

```
<RelativeLayout
    android:id="@+id/layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:background="@color/info_bar_bg_color" > 
```

如 ：

```
android:layout_width="500dp"
android:layout_height="600dp" 
```

您必须尝试其他数字，而不是 500 和 600 ,,,，当您拥有最佳尺寸时保存它^_^

# session - Why is $_SESSION emptied?

> ID：14538983
> 
> 赞同：1
> 
> 时间：2013-01-26T16:31:30.237
> 
> 标签：session, session-variables, php, sessionid

According to [Allow php sessions to carry over to subdomains](https://stackoverflow.com/questions/644920/allow-php-sessions-to-carry-over-to-subdomains), there are 3 ways to allow PHP sessions across different subdomains.

*   php.ini: `session.cookie_domain = ".example.com"`
*   .htaccess: `php_value session.cookie_domain .example.com`
*   php script: `ini_set('session.cookie_domain', '.example.com' );`

^((My web host does not allow modification of PHP via .htaccess so I tried the other 2 methods.))

However the [`session_regenerate_id(true);`](http://php.net/manual/en/function.session-regenerate-id.php) in my login.php conflicts with `session.cookie_domain = ".example.com"` in that after a header redirect, it empties the PHP session variable.

**login.php**

```
if (!isset($_SESSION)) { session_start(); }

// authentication codes...

session_regenerate_id(true);
$_SESSION['username'] = $username;
header('Location: redirect.php');
exit; 
```

**redirect.php**

```
if (!isset($_SESSION)) { session_start(); }
var_dump($_SESSION); // returns array(0) { } if session.cookie_domain is set 
```

I understand that using `true` in `session_regenerate_id()` would delete the old session, but it does not empty the session variable if `session.cookie_domain` is not set. Why is it so?

And the above 3 solutions do not work if I do not regenerate the session id, but doing so would result in session variable being emptied. Any idea how to solve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:51:07.623

```
<?php
session_start();
session_regenerate_id();
setcookie('session_id', session_id(), 0, '/', '.yourdomain.com');
if( !empty($_SESSION["user_logged_in"]) ){
header("Location: home.php");
} else {
header("Location: index.php");
} 
```

显然`setcookie`安全性较低，但如果这三个都不适合您，这将帮助您，您可以使用原始域的附加会话，或者如果您想要额外的安全性以及 setcookie 选项甚至将它们存储在数据库中

# python - Resize a QVBoxLayout

> ID：14538985
> 
> 赞同：1
> 
> 时间：2013-01-26T16:31:57.893
> 
> 标签：python, qt, pyqt, pyqt4, pyside

I have a QVBoxLayout where I put some buttons. I wrote a function to remove a button, but when I do it, the box doesn't adapt its size to the content. Here is a piece of the removal function:

```
for each_difference in differences_remove:

    old_index = self.all_tags.index(each_difference) 
    print("old" + str(old_index))
    self.vbox_all_tags.removeWidget(self.liste_pressoirs[old_index])
    del self.liste_pressoirs[old_index] 
```

I would like self.vbox_all_tags to adapt its size to the new content after I remove a button. How would you do that ?

Kindly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:31:50.747

删除按钮后只需调用[`adjustSize`](http://doc.qt.digia.com/4.7-snapshot/qwidget.html#adjustSize)您的小部件，这是一个演示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
from PyQt4 import QtCore, QtGui

class MyWindow(QtGui.QWidget):
    _buttons = []

    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonRemove = QtGui.QPushButton(self)
        self.pushButtonRemove.setText("Remove A Button!")
        self.pushButtonRemove.clicked.connect(self.on_pushButtonRemove_clicked)

        self.widgetButtons = QtGui.QWidget(self)

        self.layoutButtons = QtGui.QHBoxLayout(self.widgetButtons)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.pushButtonRemove)
        self.layout.addWidget(self.widgetButtons)

        for buttonNumber in range(3):
            pushButton = QtGui.QPushButton()
            pushButton.setText("Button {0}".format(buttonNumber))

            self._buttons.append(pushButton)
            self.layoutButtons.addWidget(pushButton)

    @QtCore.pyqtSlot()
    def on_pushButtonRemove_clicked(self):
        if self._buttons:
            pushButton = self._buttons[-1]

            self._buttons.pop()
            self.layoutButtons.removeWidget(pushButton)

            pushButton.deleteLater()

            self.widgetButtons.adjustSize()
            self.adjustSize()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# c# - 位标志始终包含 0 值

> ID：14538987
> 
> 赞同：0
> 
> 时间：2013-01-26T16:32:27.740
> 
> 标签：c#, enums, bitflags

所以我遇到了这段代码：

```
[Flags]
public enum Options
{
    NA = 0,
    OptionA = 1,
    OptionB = 2,
    OptionC = 4
} 
```

现在，从技术上讲，“NA”是无效的，如果用户不想选择任何选项，他们就不会选择任何选项，它将保存到可为空的 int。没有“无”选项。但是，任何时候用户选择选项 AC，NA 也总是会被添加。如果我改变`NA = 1`，那么`OptionC = 8`，一切正常。那部分是有道理的。但是，如果 NA 将始终包含在用户的选项列表中，`NA = 0`为什么？

编辑：

为了澄清一些事情，NA是独占的，但是如果我在哪里选择OptionB，那么当我查看选定的选项时，它会显示我选择了NA和OptionB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:43:24.670

当您在`Flags`枚举上添加一个属性和一个值为 0 的值时，如果您用于过滤掉这些值，*它将始终包含在内。*`&`

这是因为始终设置所有必需的位（在这种情况下没有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:45:21.000

如果您要使用带有`Flags`属性的枚举，则仅当您有一个排除所有其他选项的选项时才使用值 0（例如`None`，例如）。然后你测试它：

```
if (myOptions == Options.Na) 
```

测试：

```
if ((myOptions & Options.Na) == Options.Na) 
```

当然，将始终返回 true。

现在这个名字`Na`暗示它排除了所有其他选项，那么问题是什么？

# ruby - 如何告诉 RMagick 也使用哪个 ImageMagick？

> ID：14538990
> 
> 赞同：1
> 
> 时间：2013-01-26T16:32:33.693
> 
> 标签：ruby, imagemagick, rmagick

> **可能重复：**
> [RMagick 抱怨它配置了不同版本的 ImageMagick](https://stackoverflow.com/questions/2887342/rmagick-complains-it-was-configured-with-a-different-version-of-imagemagick)

当我在 irb 或 .rb 脚本中尝试以下操作时

> 需要'rmagick'

它会导致以下错误消息：

**RuntimeError：此 RMagick 安装配置了 ImageMagick 6.8.1，但 ImageMagick 6.7.1-1 正在使用中。**

使用以下方法检查 ImageMagick：

> 转换--版本

结果：在：**版本：ImageMagick 6.8.1-10 2013-01-24 Q8 [http://www.imagemagick.org](http://www.imagemagick.org)**

当我做

> 哪个转换

给出：**/usr/local/bin/convert**

我过去用 Macports 安装了 ImagaMagick 6.7.1-1，但我已经卸载了它。Rmagick 在需要 ImageMagick 库时如何以及在哪里查看？我安装了正确的 ImageMagick，Rmagick 只需要正确的引用即可。

我在 OS X 10.8.2 上并使用 RVM

# jquery-mobile - 使用 Jquery Mobile 动态生成的对话框多次打开

> ID：14538994
> 
> 赞同：1
> 
> 时间：2013-01-26T16:33:25.290
> 
> 标签：jquery-mobile, dialog, event-handling

在多页面模板中，我有三个类别页面`(comedy, action, drama)`，您可以在每个包含图像的行之间滑动`(Seinfeld, Modern Family, Family Guy, Big Bang)`。单击单个图像应打开一个对话框`(Seinfeld summary)`，单击关闭按钮时关闭，并保持关闭状态。最初它可以工作，然后发生的情况是基于两个后单击的图像数量，它打开和关闭 n -1 （单击第三个图像，打开对话框两次）。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:59:04.450

如果没有你的代码，我可以肯定，但我想我明白你发生了什么。

您有多个事件绑定的问题。由于**`jQuery Mobile`**架构的原因，可以将一个事件多次绑定到某个对象。

我有一篇关于页面事件处理的博客**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)****`jQuery Mobile`**，并且有一章专门讨论这个问题，只需搜索“**防止多事件触发**”一章。或者可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。

简而言之，在将事件绑定到某个对象之前始终取消绑定事件以防止这种情况发生：

```
$('#test-button').die('click').live('click', function(e) {
    alert('Button click');
}); 
```

# php - php echo 结果按字母顺序排列

> ID：14538995
> 
> 赞同：0
> 
> 时间：2013-01-26T16:33:26.643
> 
> 标签：php

下面的代码将回显每个文件中的关键字，是否可以让结果（每个文件的关键字）按字母顺序显示。

```
<?php 
$files = (glob('{beauty,careers,education,entertainment,pets}/*.php', GLOB_BRACE)); 

    $selection = $files;
    $files = array();

    $keywords = $matches[1];

    foreach ($selection as $file) {    
    if (basename($file) == 'index.php') continue;
    if (basename($file) == 'error_log') continue;
    $files[] = $file;    
}
    foreach($files as $file) {
        $title = str_replace('-', ' ', pathinfo($file, PATHINFO_FILENAME));

    $content = file_get_contents($file);
    if (!$content) {

        echo "error reading file $file<br>";
    }
    else {
        preg_match("/keywords = \"(.*?)\"/i", $content, $matches);
        $keywords = $matches[1];
    }
        $results .= '<li><a href="http://domain.com/' . htmlentities($file, ENT_QUOTES) . '">'.$keywords.'</a></li>';    
}
?>
<?=$results?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:46:00.900

在 $keywords 上使用 sort()。有一些拼写错误和未使用的变量。在所有文件都被处理之前，您不需要构建 $results HTML，因此将 $results = '' 移出处理文件的 foreach 循环，然后排序，然后 foreach 关键字并构建 $results。

```
<?php 
$selection = (glob('{beauty,careers,education,entertainment,pets}/*.php', GLOB_BRACE)); 

$files = array();

// $keywords = $matches[1];

foreach ($selection as $file) {      
    if (basename($file) == 'index.php') continue;
    if (basename($file) == 'error_log') continue;
    $files[] = $file;      
} 

foreach($files as $file) { 
    //$title = str_replace('-', ' ', pathinfo($file, PATHINFO_FILENAME));

    $content = file_get_contents($file);
    if (!$content) { 

        echo "error reading file $file<br>";
    } 
    else { 
        preg_match("/keywords = \"(.*?)\"/i", $content, $matches);
        $keywords[] = $matches[1];
    } 
} 

$results = '';
sort($keywords); //comment this out to see the effects of the sort()
foreach($keywords as $_k) { 
    $results .= '<li><a href="http://domain.com/' . htmlentities($file, ENT_QUOTES) . '">'.$_k.'</a></li>';      
} 
?>
<?=$results?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:35:06.167

用于[`sort()`](http://us3.php.net/manual/en/function.sort.php)对关键字数组进行排序：

```
$keywords = array();

// ...

$keywords[] = $matches[1];
sort($keywords); 
```

# event-handling - matplotlib - 向左/向右/向上/向下平移的键盘快捷键

> ID：14538998
> 
> 赞同：1
> 
> 时间：2013-01-26T16:33:42.000
> 
> 标签：event-handling, matplotlib, keyboard-shortcuts

在`matplotlib`中，是否有键盘替代鼠标左键拖动绘图以在四个方向上平移？

原因是，除了它看起来像是一个明显的键盘快捷键之外，我`xdata`每次左键单击时都会打印该值。在不单击绘图的情况下拖动会很有用。

否则，有没有办法连接到双击事件？这样我就可以只在那个事件上打印我的价值。目前我已经通过右键打印解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:30:32.113

```
def on_dbl_click(event):
    if event.dblclick:
        print event.x, event.y

fig, ax = plt.subplots(1, 1)
fig.canvas.mpl_connect('button_press_event', on_dbl_click) 
```

您只需要测试事件是否已`dblcilck`设置[（doc）](http://matplotlib.org/api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-16T09:24:12.570

这就是我向 matplotlib 图添加“ctrl+c”快捷方式的方式。使用以下函数创建的任何图形都会通过“ctrl+c”将图形的图片复制到剪贴板。

```
import matplotlib.pyplot as plt
from PyQt4       import QtGui
def figure(num = None):
    """Creates and returns a matplotlib figure and adds a 'ctrl+c' shortcut that copies figure to clipboard"""
    def on_ctrl_c_click(event):        
        if event.key == 'ctrl+c' or event.key == 'ctrl+C':
            QtGui.QApplication.clipboard().setPixmap(QtGui.QPixmap.grabWidget(fig.canvas))
    fig = plt.figure(num)
    fig.canvas.mpl_connect('key_press_event', on_ctrl_c_click)    
    return fig 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-20T09:14:51.907

这是一个简单的功能，允许使用箭头键在所有 4 个方向上平移。

```
import matplotlib.pyplot as plt

def pan_nav(event):

    ax_tmp = plt.gca()
    if event.key == 'left':
        lims = ax_tmp.get_xlim()
        adjust = (lims[1] - lims[0]) * 0.9
        ax_tmp.set_xlim((lims[0] - adjust, lims[1] - adjust))
        plt.draw()
    elif event.key == 'right':
        lims = ax_tmp.get_xlim()
        adjust = (lims[1] - lims[0]) * 0.9
        ax_tmp.set_xlim((lims[0] + adjust, lims[1] + adjust))
        plt.draw()
    elif event.key == 'down':
        lims = ax_tmp.get_ylim()
        adjust = (lims[1] - lims[0]) * 0.9
        ax_tmp.set_ylim((lims[0] - adjust, lims[1] - adjust))
        plt.draw()
    elif event.key == 'up':
        lims = ax_tmp.get_ylim()
        adjust = (lims[1] - lims[0]) * 0.9
        ax_tmp.set_ylim((lims[0] + adjust, lims[1] + adjust))
        plt.draw()

fig = plt.figure()
fig.canvas.mpl_connect('key_press_event', pan_nav)
plt.plot(1, 1, 'ko')   # plot something 
```

# gridview - System.IndexOutOfRangeException：位置 5 没有行？

> ID：14538999
> 
> 赞同：0
> 
> 时间：2013-01-26T16:33:42.760
> 
> 标签：gridview, datatable

System.IndexOutOfRangeException：位置 5 处没有行。

我的应用程序中有以下代码块。这是为了使我能够从网格视图中删除行，而无需从数据库中完全删除相同的行！

问题是当我以特定顺序选择或超过 3 个时，我能够删除值但不是所有值！

这是我遇到的错误！

System.IndexOutOfRangeException：位置 5 处没有行。

注释的 catch exeption 稍微解决了这个问题。

```
Dim strQuery As String = "SELECT UserId, staffNo, forename, surname FROM userProfilesTbl WHERE st_id=@st_id AND wa_id=@wa_id ORDER BY surname ASC "
        Dim cmd As New SqlCommand(strQuery)
        cmd.Parameters.AddWithValue("@st_id", myLblSt.Value().ToString)
        cmd.Parameters.AddWithValue("@wa_id", myLblWa.Value().ToString)

        Dim dt As DataTable = GetDataConn(cmd)
        'Try
        For Each dr In GridView1.Rows

            Dim chkBox As CheckBox = dr.FindControl("RowLevelCheckBox")

            If chkBox.Checked = True Then

                dt.Rows.RemoveAt(dr.RowIndex)
                dt.AcceptChanges()

            End If
        Next
        'Catch ex As Exception

        'End Try
        GridView1.DataSource = dt
        GridView1.DataBind() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:39:21.230

你的问题可能在这里：

```
 dt.Rows.RemoveAt(dr.RowIndex) 
```

这将从集合中删除，因此在下一次迭代中 dr 中的行索引不再有效。

您希望从较高的 RowIndex 值到较低的 RowIndex 值以避免此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:45:13.117

这可能是由于当您删除行时，其他索引正在更新。例如，如果您有 5 行并且您希望删除第 1、3 和 5 行（索引 0、2、4）。

因此，让我们假设以下是您的数据网格：

```
Index|Data
0--------A
1--------B
2--------C
3--------D
4--------E 
```

删除第一^行（索引 0）后：

```
Index|Data
0--------B
1--------C
2--------D
3--------E 
```

删除第 3^行（索引 2）后：

```
Index|Data
0--------B
1--------C
3--------E 
```

现在，如果您尝试删除第 5^行（索引 4），您将得到 a `System.IndexOutOfRangeException`，因为位置 4 没有行。