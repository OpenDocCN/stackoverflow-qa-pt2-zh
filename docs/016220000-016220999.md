# StackOverflow 问答 16220000-16220999

# java - 如何在java中跨面板拖动组件

> ID：16220000
> 
> 赞同：1
> 
> 时间：2013-04-25T16:25:07.370
> 
> 标签：java, swing, user-interface

是否可以将 JLabel 从一个面板拖到另一个面板？我只能在一个面板中拖动标签。当标签从负担中移开时，它就消失了。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:26:47.513

您可以通过多种方式轻松做到这一点。一种方法是

*   将标签撞到玻璃板上`mousePressed(...)`
*   将其拖到玻璃窗格中`mouseDragged(...)`，
*   然后将其放到鼠标当前所在的任何容器中`mouseReleased(...)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T20:41:55.197

当您开始拖动它时，您必须从其当前容器中删除标签。通常我们将它添加到玻璃窗格中以允许在多个组件之间拖动的错觉。

以[我的阻力比你](http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html)的更好为例。我还建议您在他的网站上进行挖掘，他在拖放方面做得很好

# php - 结合 2 个 php while 循环并在第 n 次迭代时添加一个父 div

> ID：16220006
> 
> 赞同：0
> 
> 时间：2013-04-25T16:25:23.547
> 
> 标签：php, wordpress, while-loop, iteration

我有 2 个 while 循环，我需要在第 n 次迭代时使用父 div 将它们都包装起来，因此输出如下所示的 neec

```
<!-- 1-4 items -->
<div class"parent">
<nav>
   <li>item 1</li>
   <li>item 2</li>
   <li>item 3</li>
   <li>item 4</li>
<nav>
<section>
   <li>content 1</li>
   <li>content 2</li>
   <li>content 3</li>
   <li>content 4</li>
</section>
</div>

<!-- 5-8 items -->
<div class"parent">
<nav>
   <li>item 5</li>
   <li>item 6</li>
   <li>item 7</li>
   <li>item 8</li>
<nav>
<section>
   <li>content 5</li>
   <li>content 6</li>
   <li>content 7</li>
   <li>content 8</li>
</section>
</div> 
```

我知道如何单独迭代导航（和部分）并在每次迭代时将它们包装在一个 div 中......但我需要将这两个单独的 while 循环组合在一起并将它们一起迭代

```
 <?php $items = 0;  while ($sub_sections_mb->have_fields('sub-sections')) : ?>
    <?php if ($items % 4 == 0) : ?>

    <nav role="menu">
        <ul>
    <?php endif ; ?>      

               <li class="item col2 col <?php if ($items == 1){echo 'current';} ?>" role="menuitem"> <?php echo $i; $sub_sections_mb->the_value('title'); ?>

                </li>

    <?php   $items++;
            if ($items % 4 == 0) : ?>

        </ul>
    </nav>
    <?php   endif;
            endwhile; // End printing heading ?>

    <?php if ($items % 4 != 0) : ?>

      </ul>
    </nav>
    <?php endif ; ?> 
```

使用我当前的代码输出看起来像这样

```
<div>
<nav>
   <li>item 1</li>
   <li>item 2</li>
   <li>item 3</li>
   <li>item 4</li>
<nav>
<nav>
   <li>item 1</li>
   <li>item 2</li>
   <li>item 3</li>
   <li>item 4</li>
<nav>
</div>

<div>
<section>
   <li>content 5</li>
   <li>content 6</li>
   <li>content 7</li>
   <li>content 8</li>
</section>
<section>
   <li>content 5</li>
   <li>content 6</li>
   <li>content 7</li>
   <li>content 8</li>
</section>
</div> 
```

如果有帮助，我正在使用 WP Alchemy metabox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:52:20.387

这只是一个可以帮助您入门的示例。您可能希望对其进行更改以匹配您的需要。我无法使用您的`$sub_sections`信息，所以我只使用了一个`for()`循环两次遍历信息。

编辑：将代码更新为以下内容：

```
$total = 7; // The total number of items.
$every = 4; // How many items go into each nav/section.

$output = '';

for($i = 0; $i < round($total / $every); $i++)
{
    $min = $i * $every;
    $max = $min + $every > $total ? $total : $min + $every;

    $output .= '<div class="parent">';

    /* Navigation */
    $output .= '<nav role="menu"><ul>';

    for($j = $min; $j < $max; $j++)
        $output .= '<li>Item ' . ($j + 1) . '</li>';

    $output .= '</ul></nav>';

    /* Section */
    $output .= '<section>';

    for($j = $min; $j < $max; $j++)
        $output .= '<div>Content ' . ($j + 1) . '</div>';

    $output .= '</section>';

    $output .= '</div>';
}

echo $output; 
```

希望这能让你朝着正确的方向前进。

# spring - Spring MVC：如何将模型对象从控制器中的一个方法传递到同一控制器中的另一个方法？

> ID：16220007
> 
> 赞同：0
> 
> 时间：2013-04-25T16:25:26.493
> 
> 标签：spring, spring-mvc, spring-security

我已经在我的应用程序中集成了 Spring Security，并且希望在凭据错误的情况下向用户显示错误消息。jsp：

```
 <c:out value='${secerror}' /> //prints nothing on screen
    <c:if test="${empty secerror}">
    error is empty or null. //always prints this line on screen
    </c:if>
    <c:if test="${not empty secerror}">
    <div class="errorblock">
        Your login attempt was not successful, try again.<br /> Caused :
        ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
    </div>
    </c:if>
     <c:set var = "url" value = "/j_spring_security_check" />
    <form:form method="post" commandName="portalLogin" action="${pageContext.servletContext.contextPath}${url}" name="f"> 
```

[更新]：对不起，我意识到我的模型对象在我重定向到 portalLogin.html 后被覆盖，因为我之前在那里创建了一个新的模型对象。但是我尝试了几个简单的选项，通过这些选项我可以将模型对象从一个控制器方法传递到同一控制器中的另一种方法。但没有任何效果。

1.  我尝试使用 forward: 前缀而不是重定向前缀。为此，我根本没有收到错误消息。
2.  我在 loginerror 方法中尝试了以下代码。

    ```
     return new ModelAndView("portalLogin","secerror","true"); 
    ```

上面的代码出现以下错误：

```
 java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'portalLogin' available as request attribute 
```

我确实遇到了[这个](https://stackoverflow.com/questions/7429649/how-to-pass-model-attributes-from-one-spring-mvc-controller-to-another-controlle)链接，但我发现它是一个非常冗长的解决方案，并且不确定是否要编写那么多代码。

我不确定是否可以将 Model 对象用于 @ModelAttribute 注释[@ModelAttribute](http://www.coderanch.com/t/506713/Spring/pass-object-MVC-controllers)。

请提供我可以尝试的代码片段/示例。

我的控制器方法是这样的：

```
 @RequestMapping("/portalLogin")
public ModelAndView goToLogin(Model model) {
    try {
        System.out.println("Enter goToLogin************************");
    } catch (Exception exception) {

    }
    return new ModelAndView("portalLogin", "portalLogin", new LoginModel());
    //return new ModelAndView("portalLogin", model);
}

    @RequestMapping(value="/loginfailed", method = RequestMethod.GET)
public ModelAndView loginerror(ModelMap model) {

    //model.addAttribute("secerror", "true");
    //return "redirect:portalLogin.html";
    return new ModelAndView("portalLogin","secerror","true");

} 
```

[更新]：作为一种解决方法，我在 loginerror 方法中添加了 goToLogin 方法逻辑，因为我唯一的目的是获取 portalLogin 页面。按预期抛出错误。

```
 @RequestMapping(value="/loginfailed", method = RequestMethod.GET)
public ModelAndView loginerror(Model model) {
     model.addAttribute("secerror", "true");       
    return new ModelAndView("portalLogin", "portalLogin", new LoginModel());
    } 
```

但我仍然想知道我是否可以通过某种方式将模型对象从一个控制器方法传递到同一控制器中的另一个方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:32:10.957

让我们让事情变得简单，如果你想显示一个错误的凭据消息，你可以简单地做这样的事情：

在你的 spring-security.xml 中：

```
<sec:form-login login-page="/login.jsp"
    default-target-url="/default-url-when-login-correct"
    authentication-failure-url="/login.jsp?error=true"
    login-processing-url="/login" always-use-default-target="true" /> 
```

在您的 login.jsp 中：

```
<c:if test="${not empty param.error}">
    <span>${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}</span>
</c:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:21:55.553

你也可以试试这样的

```
<c:if test="${not empty secerror == 'true'}">
<tr>
<td colspan="2" align="center"><font style="color: red">Your login attempt was not successful, try again</font>
</td></tr></c:if> 
```

# java - Gson 不能反序列化继承的类？

> ID：16220010
> 
> 赞同：5
> 
> 时间：2013-04-25T16:25:29.447
> 
> 标签：java, json, gson

我有一个简单的 Json 结构，例如：

```
{"MessageType":"TimeData","TimeData":{"hh":12,"mm":13,"ms":15,"ss":14}} 
```

我设计了以下类来反序列化它：

```
public class JsonMessage
{
    public enum MessageTypes{
        WhoAreYou,
        TimeData
    }
    JsonMessage(){
    }
    public MessageTypes MessageType;
} 
```

```
class TimeData extends JsonMessage{
    int hh;
    int mm;
    int ss;
    int ms;

    TimeData() {
    }    
} 
```

我需要将*反序列化*分为两个阶段：

1-反序列化以读取`MessageType`.

2-根据`MessageType`

代码很简单：

```
public void dispatch(Object message, IoSession session)
    {

            Gson gson = new Gson();
            JsonMessage result = gson.fromJson(message.toString(), JsonMessage.class);
            System.out.println(result.MessageType.toString());
            switch (result.MessageType)
                {
                    case WhoAreYou:{
                    //.....
                    break;
                    }
                    case TimeUpdate:
                        TimeData res = new Gson().fromJson(message.toString(), TimeData.class);
                        System.out.println(res.hh);
                        break;
                    default:break;
        }
    } 
```

我的程序可以输入正确的`switch-case`（即`TimeUpdate`），但无法正确解析（println 打印 0 而不是 12）

你觉得我哪里做错了？谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T04:16:45.007

问题是您的 JSON 代表一个包含您感兴趣的另一个对象的对象，而您的 Java 只是一个对象。

实际上，您可以为每种类型编写反序列化程序，并在确定以下内容后使用它们`MessageType`：

```
public static void main(String[] args)
{
    Gson gson = new GsonBuilder().registerTypeAdapter(TimeData.class, new TimeDataDeserializer()).create();
    String json = "{\"MessageType\":\"TimeData\",\"TimeData\":{\"hh\":12,\"mm\":13,\"ms\":15,\"ss\":14}}";
    JsonMessage message = gson.fromJson(json, JsonMessage.class);

    switch(message.MessageType)
    {
        case TimeData:
            TimeData td = new GsonBuilder()
                            .registerTypeAdapter(TimeData.class, new TimeDataDeserializer())
                            .create()
                            .fromJson(json, TimeData.class);
            td.MessageType = message.MessageType
            System.out.println(td.hh);
            break;
        default:
            break;
    }
}

class TimeDataDeserializer implements JsonDeserializer<TimeData>
{
    @Override
    public TimeData deserialize(JsonElement je, Type type, JsonDeserializationContext jdc)  
        throws JsonParseException
    {
        JsonObject jo = je.getAsJsonObject().getAsJsonObject("TimeData");
        Gson g = new Gson();
        return g.fromJson(jo, TimeData.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:43:17.607

我设法通过`JsonDeserializer`以下方式实现自定义来解决这个类似的问题。

`Class<?>`首先，根据类型和根据枚举名称检索正确的方法将子类附加到枚举：

```
enum MessageType {
  WHO_ARE_YOU(WhoAreYou.class),
  TIME_UPDATE(TimeUpdate.class);

  public final Class<?> clazz;

  MessageType(Class<?> clazz) { this.clazz = clazz; }

  public static MessageType forName(String name) {
    for (MessageType t : values())
      if (name.equals(t.name()))
        return t;

    return NULL;
  }
} 
```

然后在`deserialize`方法中我做了以下：

```
public JsonMessage deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException
{
   JsonObject object = json.getAsJsonObject();
   String kind = object.get("messageType").getAsString();
   Class<?> clazz = MessageType.forName(kind).clazz;
   JsonMessage result = null;

   try {
     result = (JsonMessage)clazz.newInstance();
     Field[] fs = clazz.getFields();

     for (Field f : fs) {
       Object value = context.deserialize(object.get(f.getName()), f.getType());                 
       if (value != null)
         f.set(result, value);
     }
   } 
   catch (Exception e) {
     e.printStackTrace();
   }
} 
```

一切都通过反射进行管理，以便创建正确的对象，然后相应地反序列化所有字段。

我有一个复杂的对象层次结构，所以我更喜欢这样让 gson 反序列化器管理一切。当然，您需要使用 gson 解析器实例注册序列化程序。

**注意**：根据 Java 标准，您对事物的命名是非常不正确的。枚举常量应该是`ALL_CAPITALIZED`，枚举类名应该是单数（例如`MessageType`）。实例变量应该是驼峰式（例如`messageType`not `MessageType`）

# php - 如何从 mysql_* 升级到 mysqli_*？

> ID：16220013
> 
> 赞同：6
> 
> 时间：2013-04-25T16:25:36.217
> 
> 标签：php, mysql, mysqli, prepared-statement

我目前正在使用已弃用的代码从用户那里获取数据，如下所示：

```
/* retrieve */
$lastName = $_POST['lastName']; 
$firstName = $_POST['firstName']; 
$examLevel=$_POST['level'];

/* connect */
$dbc=mysql_connect("localhost", "user", "passw") or die('Error connecting to MySQL server');
mysql_select_db("db") or die('Error selecting database.');

/* sanitize */
$lastName=mysql_real_escape_string($lastName);
$firstName=mysql_real_escape_string($firstName); 
$examLevel=mysql_real_escape_string($examLevel);

/* insert */
$query_personal = "INSERT INTO personal (LastName, FirstName) VALUES  ('$lastName', '$firstName')";

$query_exam = "INSERT INTO exam (Level, Centre, BackupCentre, etc.) VALUES ('$examLevel', '$centre', '$backup', 'etc')"; 
```

这是可行的，但我不断收到有关安全性和缺乏支持的警告。有一个小的重写来**连接**mysqli 而不是 mysql 但是**mysqli_real_escape_string**呢？我已经看到它在示例中使用，但我也看到了使用准备好的语句而不使用 mysqli_real_escape_string 的建议。

我将如何使用准备好的语句来插入我的数据？到目前为止，我对这一点有点不知所措。例如，参数绑定是否仅适用于 INSERT，结果绑定仅适用于 SELECT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:50:40.947

将其转换为[PDO](https://stackoverflow.com/tags/pdo/info)

```
/* connect */
$dsn = "mysql:host=localhost;db=test;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn,"user", "passw", $opt);

/* insert */
$query = "INSERT INTO personal (LastName, FirstName) VALUES  (?, ?)";
$stmt  = $pdo->prepare($query);
$stmt->execute(array($_POST['lastName'],$_POST['firstName']));

$query = "INSERT INTO exam (Level, Centre, BackupCentre, etc) VALUES (?, ?, ?, 'etc')";
$stmt  = $pdo->prepare($query);
$stmt->execute(array($_POST['level'], $centre, $backup)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:45:28.130

请参阅此页面以将 mysql 转换为 mysqli

[Converting_to_MySQLi](http://forge.mysql.com/wiki/Converting_to_MySQLi)

[https://wikis.oracle.com/display/mysql/Converting+to+MySQLi](https://wikis.oracle.com/display/mysql/Converting+to+MySQLi)

并查看[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)手册，该手册解释了`mysqli_real_escape_string`安全问题以及如何解决它。

php.net：

**安全性：默认字符集**

字符集必须在服务器级别设置，或者使用 API 函数[mysqli_set_charset()](http://www.php.net/manual/en/mysqli.set-charset.php)设置以影响 mysqli_real_escape_string()。有关更多信息，请参阅[字符集的概念部分。](http://www.php.net/manual/en/mysqlinfo.concepts.charset.php)

[有关插入数据](http://dev.mysql.com/doc/refman/5.7/en/insert.html)的查询，请参见此页面

请参阅此页面以[准备插入 mysql 的数据](https://stackoverflow.com/questions/4710381/problems-in-inserting-data-using-safe-way-to-input-data-to-mysql-using-php)

和[http://php.net/manual/de/mysqli.quickstart.prepared-statements.php](http://php.net/manual/de/mysqli.quickstart.prepared-statements.php)

# python - App Engine ndb StringProperty 和字符串哈希

> ID：16220016
> 
> 赞同：1
> 
> 时间：2013-04-25T16:25:54.103
> 
> 标签：python, google-app-engine

我正在使用 PyCrypto 生成安全密钥哈希。我想存储我生成的一个或多个部分密钥。每个部分键的形式为

```
\x0f|4\xcc\x02b\xc3\xf8\xb0\xd8\xfc\xd4\x90VE\xf2 
```

我有一个 ndb `StringProperty()`，我想在其中存储该信息。然而，它提出了一个`BadValueError`说法，它需要一个 UTF-8 编码的字符串。我尝试使用 str 的`.encode('uft-8')`方法，但这也会引发一个错误，告诉我它无法编码，因为定位不好。

无论如何，我的问题是，如何将该字节字符串转换为可以存储在 ndb 中的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:20:23.743

## 改进答案：

在这种情况下，不应将密钥存储为字符串或文本，而应使用`BlobProperty`存储未解释的字节字符串的 a。

## 原答案：

要将字节（字符串）转换为 unicode，请使用方法`decode`. 您还需要使用一种保留原始二进制数据的编码，即 ISO-8859-1。参见[ISO-8859-1 编码和二进制数据保存](https://stackoverflow.com/questions/15925458/iso-8859-1-encoding-and-binary-data-preservation)

```
unicode_key = key.decode('iso-8859-1')
bytes_key = unicode_key.encode('iso-8859-1') 
```

还可以考虑使用 A TextProperty，因为 StringProperties 已编入索引。

# android - 两地之间的行驶距离 - android

> ID：16220017
> 
> 赞同：1
> 
> 时间：2013-04-25T16:25:54.510
> 
> 标签：android, google-maps-android-api-2

我有两个经纬度对，我想计算它们之间的行驶距离。我为此使用了 Location.distanceBetween() 方法。但这返回的不是行驶距离。它是一个小于行驶距离的值。有人能说它返回的距离是多少吗？

我可以使用 Google Maps android API v2 找到实际行驶距离吗？如何？

# c# - 如何在另一个旁边显示动态创建的 DIV？

> ID：16220018
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:25:59.110
> 
> 标签：c#, asp.net, html, .net, css

我正在创建一个页面，该页面将在创建时动态地在页面上显示日志文件。这是我的前端：

```
 <div id="container">
                <asp:UpdatePanel UpdateMode="Conditional" runat="server"     ID="ServerUpdates"> 
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="Timer" />
                    </Triggers>
                </asp:UpdatePanel>
            </div>
        </div> 
```

这是我的CSS：

```
#container {
width:100%;
display: inline-block;
height:100%;
}

.textboxStatus
{
 /*background-image:url('http://placehold.it/15/15');*/
 background-repeat:no-repeat;
/* background-position:3px 3px;*/
 border:solid 1px black;
 padding:20px;
 width:600px;
 height:500px;
 float:left;
 clear:left;
 /*position:relative;*/
}
/*.textbox input
{
 border:none;
 background:transparent;
 width:100%;     
 outline: none;
}*/
.textboxURL
{
 /*background-image:url('http://placehold.it/15/15');*/
 background-repeat:no-repeat;
/* background-position:3px 3px;*/
 border:solid 1px black;
 padding:20px;
 width:575px;
 height:475px;
 float:right;
 /*clear: right;
 position:relative;*/
 display:inline;
} 
```

这是我背后的代码：

```
 protected void CreateDiv(object sender, EventArgs e)
    {
        string path = @"\\server\d$\websites\Updates\Product\Production\Logs";
        //int rowCount = 0;

        DirectoryInfo dir = new DirectoryInfo(path);
        List<FileInfo> FileList = dir.GetFiles().ToList();
        ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("<asp:GridView runat='server' ID='Grid' AutoGenerateColumns='false'>"));
        ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("<Columns>"));

        foreach (FileInfo file in FileList)
        {

            StreamReader sr = new StreamReader(new FileStream(file.FullName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite));

            // string[] findStatus = System.IO.Directory.Exists(path, "codepush.log.*", System.IO.SearchOption.TopDirectoryOnly);
            // string[] findURL = System.IO.Directory.GetFiles(path, "sql.output.log.*", System.IO.SearchOption.TopDirectoryOnly);
            bool findStatus = (file.Name.Contains("codepush.log.")) ? true : false;//File.Exists(Path.Combine(path, ".txt"));
            bool findURL = (file.Name.Contains("sql.output.")) ? true : false;

            if (findStatus == true)
            {
                //ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<br /><div class=\"statusLog\"><asp:TextBox runat=\"server\" id=\"tbStatus{0}\"/> </div><div class=\"urlLog\"></div>", count)));
                //(TextBox)ServerUpdates.ContentTemplateContainer.FindControl("tbStatus" + count.ToString());
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl(string.Format("<asp:BoundField Datafield={0} /><div class='textboxStatus'>", rowCount)));
                TextBox txt = new TextBox();
                txt.TextMode = TextBoxMode.MultiLine;
                txt.Wrap = false;
                txt.Width = 600;
                txt.Height = 500;

                while (!sr.EndOfStream)
                    txt.Text = txt.Text + sr.ReadLine() + "\r\n";
                //Panel txt = new Panel();
                //txt.ScrollBars = ScrollBars.Vertical;
                //txt.Wrap = true;
                ServerUpdates.ContentTemplateContainer.Controls.Add(txt);
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("</div>"));
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("</Columns>"));
            }

            if (findURL == true)
            {
                //ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<br /><div class=\"statusLog\"><asp:TextBox runat=\"server\" id=\"tbStatus{0}\"/> </div><div class=\"urlLog\"></div>", count)));
                //(TextBox)ServerUpdates.ContentTemplateContainer.FindControl("tbStatus" + count.ToString());
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("<Columns>"));
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl(string.Format("<asp:BoundField Datafield={0} /><div class='textboxURL'>", rowCount)));
                TextBox txt = new TextBox();
                txt.TextMode = TextBoxMode.MultiLine;
                txt.Wrap = false;
                txt.Width = 575;
                txt.Height = 475;

                while (!sr.EndOfStream)
                    txt.Text = txt.Text + sr.ReadLine() + "\r\n";
                //Panel txt = new Panel();
                //txt.ScrollBars = ScrollBars.Vertical;
                //txt.Wrap = true;
                ServerUpdates.ContentTemplateContainer.Controls.Add(txt);
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("</div>"));
                ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("</Columns>"));
           }
            //rowCount++;
        }
        ServerUpdates.ContentTemplateContainer.Controls.Add(new LiteralControl("</asp:GridView>"));
    } 
```

我的问题是它没有在第一个 Status div 旁边显示 URL div，所以第四个。URL div 最后显示。

我需要它在每个 div（文件）的 Status div 旁边显示 URL div。

我一直在尝试 GridView，所以任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:31:11.813

我不确定我是否理解问题，但是对于您的问题“它没有在第一个 Status div 旁边显示 URL div，因此第四个。URL div 显示在最后”，我建议如下：

```
<div class="row">
  <div class="textboxStatus">
  </div>
  <div class="textboxURL">
  </div>
</div> 
```

适用`float: left;`于`textboxStatus`和`textboxURL`。我知道，这是动态生成的，但是为什么不 AJAX 来获取内容然后简单地填充它呢？

您可以轻松地将 AJAX 与 Web 表单一起使用，如下所示：

[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:57:30.690

首先，我们将定义主 div 或主体，其中其他将包含该 div 样式将是

```
 #maindiv{
          width: 100%;
          font-size: 12px;
          overflow: hidden;
          background: #ccc
    } 
```

在您的情况下，它将是“容器”

现在，当您将 div 添加为

那么第一个 div 样式将是

```
 #leftdiv {
                 float: left; 
                 width: 33%;
                 background-color: #bbb;
          } 
```

之后设置每个 div 的宽度并将宽度设置为该 d 的样式

```
 #nextdiv { 
             float: left;
              background-color: #eee;
             width: 33%;
      } 
```

等等..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:48:28.403

在您的“.textboxStatus”css 类中，您定义了一个“float:left”并同时使用“clear:left”清除浮动。

删除这两个属性并在“.textboxURL”中将“float:right”替换为“float:left”，你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T16:40:21.133

您应该生成一个`<TABLE>`包含一行`<TR>`和多列的控件，`<td>`而不是通过 Literal 控件生成 Asp.net`Gridview`控件。

使用 Literal 控件时记得写 Html 标签

最终 html 示例：

```
<Table>
<tr>
<td>First div inside</td>
<td>Second div inside</td>
...
</tr>
</Table> 
```

# jquery - 保持两个 jquery UI 选项卡同步

> ID：16220019
> 
> 赞同：0
> 
> 时间：2013-04-25T16:26:10.387
> 
> 标签：jquery, jquery-ui, tabs, wordpress, jquery-ui-tabs

我正在尝试使两个 jquery UI 选项卡保持同步。您可以在主页上查看选项[卡](http://nec24.com/)。基本上，当单击休斯顿时，应该单击另一个休斯顿选项卡，奥斯汀也是如此。

这是我所做的（由于它非常慢，我现在已经删除了代码）：

```
jQuery(document).ready(function(){
    jQuery("a[href='#houston']", ".wp-tabs").on("click", function(){
        jQuery("a[href='#houston_locations']", ".wp-tabs").click();
    });

    jQuery("a[href='#austin']", ".wp-tabs").on("click", function(){
        jQuery("a[href='#austin-3']", ".wp-tabs").click();
    });

    jQuery("a[href='#houston_locations']", ".wp-tabs").on("click", function(){
        jQuery("a[href='#houston']", ".wp-tabs").click();
    });

    jQuery("a[href='#austin-3']", ".wp-tabs").on("click", function(){
        jQuery("a[href='#austin']", ".wp-tabs").click();
    });
}); 
```

我上面的代码有效；但是它非常慢，并且在控制台中也出现了“递归过多”的错误。

其他人可以提供更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T16:24:12.193

每当您单击其中一个休斯顿选项卡时，它会触发第二个休斯顿选项卡的单击事件，该事件会触发第一个休斯顿选项卡的单击事件，甚至会触发第二个休斯顿选项卡的单击事件，依此类推。这就是您的错误控制台所指的“递归过多” - 因为这将继续发生，直到浏览器决定它已经足够了（这就是它运行缓慢的原因）。

为了解决这个问题，我会将每个选项卡的主要点击方法分成单独的函数，并在每个点击事件中调用这两个函数。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:49:03.077

我希望你可以试试

```
jQuery(document).ready(function(){
jQuery("a[href='#houston']", ".wp-tabs").on("click", function(){
    $("a[href='#houston_locations']", ".wp-tabs").trigger("click");
});

jQuery("a[href='#austin']", ".wp-tabs").on("click", function(){
    jQuery("a[href='#austin-3']", ".wp-tabs").trigger("click");
});

jQuery("a[href='#houston_locations']", ".wp-tabs").on("click", function(){
    jQuery("a[href='#houston']", ".wp-tabs").trigger("click");
});

jQuery("a[href='#austin-3']", ".wp-tabs").on("click", function(){
    jQuery("a[href='#austin']", ".wp-tabs").trigger("click");
}); 
```

});

# jquery-forms-plugin - 使用 jQuery Form 插件提交表单后浏览器加载 php 脚本

> ID：16220023
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:26:15.700
> 
> 标签：jquery-forms-plugin, form-submit

我正在尝试使用 jQuery Form 插件来实现一个表单。该表单具有三个文本字段和一个文件输入，我在 beforeSend 回调中验证表单。问题是，无论验证是否通过，处理文件上传的 php 脚本都会加载到浏览器中，这显然不是我想要发生的 - 我需要留在表单的页面上。

您可以在[http://www.eventidewebdesign.com/public/testUpload/](http://www.eventidewebdesign.com/public/testUpload/)查看表单及其相关文件。该目录的索引已打开，因此您可以查看所有相关文件。表单本身位于 testUpload.php 上。

如果有人可以查看我的代码并帮助我弄清楚这里发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:40:54.820

请编写以下脚本而不是您的脚本，这将起作用。

```
<script>
            $(document).ready( function() {
                // Initialize and populate the datepicker
                $('#sermonDate').datepicker();
                var currentDate = new Date();
                $("#sermonDate").datepicker('setDate',currentDate);
                $("#sermonDate").datepicker('option',{ dateFormat: 'mm/dd/yy' });

                /*
                 * Upload
                 */
                // Reset validation and progress elements
                var formValid = true,
                    percentVal = '0%';
                $('#uploadedFile, #sermonTitle, #speakerName, #sermonDate').removeClass('error');
                $('#status, #required').empty().removeClass();
                $('.statusBar').width(percentVal)
                $('.percent').html(percentVal);

                $('#frmSermonUpload').ajaxForm({
                    beforeSend: function() {

                        if (!ValidateUploadForm()) {
                            formValid = false;
                            console.log('validateuploadform returned false');
                        } else {
                            console.log('validateuploadform returned true');
                            formValid = true;
                        }

                        console.log('in beforeSend. formValid: ' + formValid);

                        if (!formValid) {
                            $('#uploadedFile').val('');
                            return false;
                        }

                    },
                    uploadProgress: function(event, position, total, percentComplete) {
                        console.log('in uploadProgress function. formValid: ' + formValid);
                        if (formValid) {
                            var percentVal = percentComplete + '%';
                            $('.statusBar').width(percentVal)
                            $('.percent').html(percentVal); 
                        }
                    },
                    complete: function(xhr) {
                        console.log('in complete function. formValid: ' + formValid);
                        if (formValid) {
                            console.log('xhr.responseText: ' + xhr.responseText);
                            console.log('formValid: ' + formValid);

                            if (xhr.responseText === 'success') {
                                $('.statusBar').width('100%');
                                $('.percent').html('100%');
                                $('#status').html('Successfully uploaded the sermon.').addClass('successUpload');

                                // Clear the form
                                ClearForm();

                            } else if (xhr.responseText === 'fail') {
                                $('#status').html('There was a problem uploading the file. Try again.<br>If the problem persists, contact your system administrator.').addClass('errorUpload');
                            }
                        }
                    }
                }); // End Upload Status Bar
            });

            function ValidateUploadForm() {
                // Reset errors and clear message
                $('#uploadedFile, #sermonTitle, #speakerName, #sermonDate').removeClass('error');
                $('#required').empty();

                var result = true;
                    title = $('#sermonTitle').val(),
                    speaker = $('#speakerName').val(),
                    date = $('#sermonDate').val(),
                    fileName = $('#uploadedFile').val();
                    extension = $('#uploadedFile').val().split('.').pop().toLowerCase();

                //if (fileName !== '' && extension !== 'mp3') {
                if ((fileName === '') || (extension !== 'mp3')) {
                    $('#uploadedFile').addClass('error');
                    $('#required').html('Only mp3 files are allowed!');
                    return false;
                } else if (fileName === '') {
                    result = false;
                } else if (title === '') {
                    $('#sermonTitle').addClass('error');
                    result = false;
                } else if (speaker === '') {
                    $('#speakerName').addClass('error');
                    result = false;
                } else if (date === '') {
                    $('#sermonDate').addClass('error');
                    result = false;
                }

                console.log('returning ' + result + ' from the validateuploadform function');

                if (!result) { $('#required').html('All fields are required.'); }
                return result;
            }

            function ClearForm() {
                $('#uploadedFile, #sermonTitle, #sermonDate, #speakerName').val('').removeClass();
            }

        </script> 
```

# jquery - jQuery 选择器中的两个 ID 不起作用

> ID：16220025
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:26:25.183
> 
> 标签：jquery, html

我想我在选择元素时误解了一些东西。

我有以下查询：

```
$('#my_id_1 #my_id_2').my_function();

<form id="my_id_1">
  <input id="my_id_2" type="text" />
</form> 
```

我虽然这`my_function()`只会在`my_id_2`"inside"时触发`my_id_1`。

但是该功能也会在我有`my_id_2`但没有的另一个页面上触发`my_id_1`。

谁能告诉我我在这里缺少什么？

**代码更新**

```
$('#my_form #country').my_func().autosuggest_country();

(function () {
  // "Namspace" which also kind of works like an interface
  $.fn.my_func = function(opt) {
    this.autosuggest_country = autosuggest.autosuggest_country ;
    return this;
  }

  var autosuggest = {
    autosuggest_country : function(action) {
      $(this).autocomplete({ (...) });
    }
  }
})(jQuery); 
```

**第 1 页**

```
<form id="my_form" class=""  method="post" onsubmit="return false;">
  <input id="country" type="text" autocomplete="off"  required="required" />
</form> 
```

**第2页**

```
<div id="mainSection" class="mainGrid">

  <div class="selectCountry">
    <select id="country" name="selectlist_country"> (...) </select>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:45:43.927

您当前的代码块将创建一个包含与选择器匹配的所有内容的 jQuery 选择对象，`'#my_id_1 #my_id_2'`然后将 jQuery 方法`my_function()`应用于该选择器。无论选择对象是否为空，都会调用该方法，因为该对象仍然拥有所有 jQuery 方法。

jQuery 中有一种方法可以为选择中的每个元素运行一次代码块。这就是`.each()`方法。这应该适用于您正在做的事情，因为 ID 应该只在页面上出现一次（因此`'#my_id_1 #my_id_2'`应该只对应于单个 DOM 元素）。

要实现这一点，您将使用如下代码，具体取决于`my_function`是 jQuery 方法还是函数。

常规功能：

```
$('#my_id_1 #my_id_2').each(my_function()); 
```

jQuery方法：

```
$('#my_id_1 #my_id_2').each($(this).my_function()); 
```

这将为`my_function()`$('#my_id_1 #my_id_2') 中的每个元素调用一次，这应该是零次或一次。在 的范围内`my_function`，`this`将对应于这两种情况下选择中的元素。

**编辑：**编辑因为评论现在不起作用。

你应该能够做到：

```
$('#my_form #country').each(
    $(this).my_func().autosuggest_country()
) 
```

您要做的是应用`my_func()`到中的每个元素`$('#my_form #country')`（如果选择器为空，则不执行任何操作），因此我们`this`在 a中使用 jQuery 选择器`.each()`。 `this`是 DOM 元素，而不是 DOM 的 jQuery 选择器，所以我们需要使用`$(this)`来访问 jQuery 方法。然后，您可以在标准方法链接中使用方法`this`（由 返回）。`my_func()`

看到[这个小提琴](http://jsfiddle.net/PymtB/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:28:50.697

该函数`my_function`总是被执行。它是否具有以下语法：

```
$.fn.my_function = function(){
    return this.each(function(){

    });
} 
```

如果您不使用，`this.each`只需执行您的代码。总会被执行！`.each`确保它循环通过选定的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:37:25.870

**Id**在任何页面上都应该是唯一的..

`$('#my_id_1 #my_id_2')` 首先不需要。

`Just $('#my_id_2').my_function()` 应该做。

因此，如果您只想针对您正在谈论的特定页面上的实例..然后给出`input a class name instead.`

```
<form id="my_id_1">
  <input class="my_id_2" type="text" />
</form> 
```

现在这只会在您期望的页面上触发

`$('#my_id_1 .my_id_2').my_function();`

或更好

```
`$('.my_id_2', '#my_id_1').my_function();` 
```

# asp.net-mvc - Do i need Try Catch while using ELMAH in MVC..Why?

> ID：16220030
> 
> 赞同：0
> 
> 时间：2013-04-25T16:26:41.347
> 
> 标签：asp.net-mvc, error-handling, elmah.mvc

This may sound silly to some of you experts..but am trying to understand this!

Am trying to implement ELMAH in my MVC Applicaion and suddenly thinking of the question which is exactly asked earlier here [Is it okay to use Elmah instead of try/catch?](https://stackoverflow.com/questions/12598773/is-it-okay-to-use-elmah-instead-of-try-catch)

But i got another question..Why ?

I don use Try catch and elmah logs the exception and user is shown the Error page. so why do i need Try/Catch ?

Application involving SQLTransations in one scenario where i think of try/catch/finally. In other situations can i skip and use only ELMAH

What exactly is the right way ? Hope i get clarified on this :) Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:32:23.637

Because without a try/catch, the code stops execution immediately when an exception happens. This can be bad for numerous reasons including:

*   needing to dispose of objects
*   rollback/commit database transactions

There are more, but this gives you a good idea. Try/Catch allows you to trap the exception, choose to handle it or not, then move on with life without crashing your program. Also, who really wants their code to just die because of a NullReferenceException? Even better, what if its an error that you cannot control, such as NetworkTimeout issues, premature HttpConnection closing, etc. It's just good practice to handle your errors where appropriate. This is not meant to say wrap your entire code block in a try/catch!!

If you still want to log to ELMAH even when you catch and handle an exception, you can do something like this:

```
try {
  ...
}
catch (Exception e) {
  Elmah.ErrorSignal.FromCurrentContext().Raise(e)
} 
```

# python - Userena 模板目录

> ID：16220039
> 
> 赞同：1
> 
> 时间：2013-04-25T16:27:27.750
> 
> 标签：python, django, templates

我已经成功安装了 userena，并且我已经将整个 userena 模板目录复制到了我的应用程序（不是名为 userena，而是帐户，所以模板所在的目录是`/accounts/templates/accounts/`），但简单地编辑它们不会反映任何变化。当我`urls.py`指向

```
url(r'^accounts/signout/$', userena_views.signout, {'template_name': 'accounts/signout.html'}) 
```

它有效，但仅适用于那个文件。有没有办法让整个应用程序自动引用这个模板目录？我考虑过使用`TEMPLATE_DIRS`，但这将适用于整个网站，而不是这个应用程序。有什么解决办法吗？谢谢你的帮助。

调用此模板的视图：

```
def signout(request, next_page=userena_settings.USERENA_REDIRECT_ON_SIGNOUT,
        template_name='userena/signout.html', *args, **kwargs): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-01T17:14:35.707

将所有 userena 模板放在**accounts/templates/userena**而不是**accounts/templates/accounts**中。那应该行得通。

# asp.net - 保存文件提示而不是 FileWriteAllBytes

> ID：16220042
> 
> 赞同：0
> 
> 时间：2013-04-25T16:27:32.367
> 
> 标签：asp.net, sql, linq, iqueryable, savefiledialog

长期潜伏者第一次海报。与.Net / Linq 合作了几年，所以我确定我在这里遗漏了一些东西。经过无数小时的研究，我需要帮助。我的代码基于 https 的建议：http: [//damieng.com/blog/2010/01/11/linq-to-sql-tips-and-tricks-3](http://damieng.com/blog/2010/01/11/linq-to-sql-tips-and-tricks-3)

以下代码当前将存储在 sql 数据库中的选定文件（pdf、doc、png 等）保存到 C:\temp。效果很好。我想更进一步。我可以让浏览器提示而不是自动将其保存到 c:\temp，以便他们可以将其保存到所需的位置。

```
 {     
   var getFile = new myDataClass();

   //retrieve attachment id from selected row
   int attachmentId = Convert.ToInt32((this.gvAttachments.SelectedRow.Cells[1].Text));

    //retrieve attachment information from dataclass (sql attachment table)
    var results = from file in getFile.AttachmentsContents
                       where file.Attachment_Id == attachmentId
                       select file;

    string writePath = @"c:\temp";

   var myFile = results.First(); 

   File.WriteAllBytes(Path.Combine(writePath, myFile.attach_Name), myFile.attach_Data.ToArray());
} 
```

因此，我可以代替使用 File.WriteAllBytes 来获取从我的 linq 查询（myFile）返回的数据并将其传递给会提示用户保存文件的东西吗？）。这个返回的对象可以与 response.transmitfile 一起使用吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:37:40.400

只需使用该`BinaryWrite(myFile.attach_Data.ToArray())`方法发送数据，因为它已经在内存中。

但首先要适当地设置标题，例如：

```
"Content-Disposition", "attachment; filename="+myFile.attach_Name
"Content-Type", "application/vnd.openxmlformats-officedocument.wordprocessingml.document" 
```

内容类型指导接收系统如何处理文件。这里有更多的[MS Office 内容类型](http://www.wrensoft.com/forum/showthread.php?2834-Content-type-for-Office-2007-files-%28DOCX-PPTX-XLSX)。如果在存储数据时它们是已知的，那么也应该存储内容类型。

此外，由于文件内容是您在响应中想要的唯一数据，请调用`Clear`before 和`End`after `BinaryWrite`。

# python - 确定python运行环境

> ID：16220046
> 
> 赞同：2
> 
> 时间：2013-04-25T16:27:38.787
> 
> 标签：python, windows

我正在编写一个 python 程序，无论它是在 windows 命令提示符还是 windows powershell 上运行，我都想以不同的方式运行。我想知道是否有办法确定python在程序中运行的环境。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:31:48.143

首先使用[此代码](http://pydev.blogspot.com/2013/01/python-get-parent-process-id-pid-in.html)获取您的父进程 ID。然后调用：

```
if ("powershell.exe" in os.popen("tasklist /fi \"PID eq %d\"" % parentPID).read()) {
    # We're a child of powershell!!
    ...
} 
```

虽然说实话，如果你是由 powershell 运行的，那么以不同的方式执行是有点奇怪的。您应该认真考虑为什么要这样做，并评估您是否在做一些不必要的事情。

如果您想要平台（这在您的最后陈述中有所暗示），平台模块通常会告诉您您想知道的内容。

```
>> import platform
>> platform.architechture()
('64bit', 'WindowsPE') 
```

请注意，从建议您用于 Mac 以确定 64 位与 32 位的[文档中。](http://docs.python.org/2/library/platform.html)`is_64bits = sys.maxsize > 2**32`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:42:27.380

在调用脚本时，您应该认真地添加另一个参数。

在脚本内部时，该`sys.args`变量会为您提供传递给脚本的所有参数（首先始终是脚本的名称）。

还有库[optparse](http://docs.python.org/2/library/optparse.html)可以帮助您完成工作.....

你正在做的不是一个好的做法：P恰恰相反:)无论如何，不​​要太努力，我的意思是我不知道你想要做什么，但这听起来像是一个危险的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:37:21.120

您可以尝试一种解决方案。您可以从 Python 代码中调用一些 powershell 命令作为 Write-Host（cmd 中的 echo 等效项）并获取调用结果。如果失败则不是 PowerShell。（我现在无法测试）。

# java - 可运行的 run() 函数立即终止

> ID：16220048
> 
> 赞同：2
> 
> 时间：2013-04-25T16:27:48.190
> 
> 标签：java, multithreading

我目前正在尝试对我以前的程序进行多线程处理。下面是代码：

```
public class DipoleTester {
  public static String DIR = "/home/";
  public static void main(String[] args) throws InterruptedException {
    Dipole trial;
    ExecutorService service = 
       Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());
    for (int r = 10; r < 150; r += 1) {
      double radius = (double) r / 10000.0;
      for (int matType = 0; matType < 3; matType++) {
        String name = matType + "_rad" + radius;
        trial = new DipoleSimple(DIR, name);
        trial.materialType = matType;
        trial.RADIUS = radius;
        service.submit(trial);
      }
    }
    service.shutdown();
    service.awaitTermination(Long.MAX_VALUE, TimeUnit.HOURS);
  }
} 
```

这是一个非常简单的程序。run() 只是一个非常基本的方法，曾经是 main() 方法。平均而言，评估大约需要 3 分钟。问题是在这里，它似乎只是对 run() 进行异步调用，因为它会立即评估整个线程池。

即我希望它在 3-5 分钟内并行运行 8 个线程。但是相反，它运行每个线程并说它几乎立即完成并加载线程池中的下一个线程。所以我剩下几百个线程都试图同时运行。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:47:45.633

您的代码看起来不错，我尝试使用以下示例对其进行测试：

```
System.out.println("Available Processors: "+Runtime.getRuntime().availableProcessors());
        ExecutorService es = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());
        final AtomicInteger ai = new AtomicInteger();
        for(int i=0; i<10; i++) {
            es.submit(new Runnable() {
                public void run() {
                    System.out.println(Thread.currentThread().getName()+"_"+ai.incrementAndGet());
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            });
        }
        System.out.println("shutting down");
        es.shutdown();
        System.out.println("shutdown");
        es.awaitTermination(Long.MAX_VALUE, TimeUnit.HOURS);
        System.out.println("Completed"); 
```

样本输出（考虑 4 个可用处理器）：

```
Available Processors: 4
pool-1-thread-2_1
pool-1-thread-3_3
pool-1-thread-4_4
pool-1-thread-1_2
shutting down
shutdown
pool-1-thread-2_5
pool-1-thread-4_6
pool-1-thread-3_7
pool-1-thread-1_8
pool-1-thread-2_9
pool-1-thread-4_10
Completed 
```

由于您没有在 之后提交额外的试验`shutdown`，所有提交的试验都必须得到处理，因为您可以在上面看到`shutdown`完成之前提交的所有 10 个线程。`run`您可以通过记录方法完成日志/语句来验证这一点。`run`此外，当您运行实际代码时，如果您可以添加时间日志作为每个线程所花费的时间方法，这将很有帮助。

# ruby-on-rails - 如何在 simple_form 的文本输入中提供一些预设字符串？

> ID：16220055
> 
> 赞同：0
> 
> 时间：2013-04-25T16:28:05.060
> 
> 标签：ruby-on-rails, haml, simple-form

表单中有一个文本输入。用户可以在那里输入一些文本，同时，我也想提供一些最常用的输入文本 - 所以用户可以选择一个预设文本，以防它与用户想要输入的内容相同。

我尝试收集：%w[balalal haha​​h]，但这将禁止用户输入他们自己的文本。

```
= f.input :Comment, wrapper: :prepend, label: false do
  %span.add-on
    Comment
    /%i.icon-comment
  = f.input_field :comment, placeholder: 'input your comment here', class: 'span2', size: 30 
```

# mysql - 计算去除 html 标签的记录长度

> ID：16220063
> 
> 赞同：0
> 
> 时间：2013-04-25T16:28:48.007
> 
> 标签：mysql, regex, count

我试图获得总评论长度，但允许人们添加列表、表格、颜色等。我只想获得实际评论字符的数量。有没有办法使用正则表达式去除除真实单词以外的所有内容来计算字符？我正在使用 mySQL 5.5，这是我当前的查询：

```
select sum(COALESCE(length(reviewTxt),0) + COALESCE(length(reviewTxt1),0) + COALESCE(length(reviewTxt2),0) + COALESCE(length(reviewTxt3),0) + COALESCE(length(reviewTxt4),0) + COALESCE(length(reviewTxt5),0) + COALESCE(length(reviewTxt6),0) + COALESCE(length(reviewTxt7),0) + COALESCE(length(reviewTxt8),0) + COALESCE(length(reviewTxt9),0) + COALESCE(length(reviewTxt10),0)) as totalLength
                    from set_reviews 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:35:43.847

以下内容取自[http://www.sitepoint.com/forums/showthread.php?656167-PHP-s-strip_tags%28%29-equivalent-MYSQL-function](http://www.sitepoint.com/forums/showthread.php?656167-PHP-s-strip_tags%28%29-equivalent-MYSQL-function)：

-=-=-=-=-=-=-=-=-=-=-=-=-

这是 php 函数 strip_tags

```
delimiter ||

DROP FUNCTION IF EXISTS strip_tags||
CREATE FUNCTION strip_tags( x longtext) RETURNS longtext
LANGUAGE SQL NOT DETERMINISTIC READS SQL DATA
BEGIN
DECLARE sstart INT UNSIGNED;
DECLARE ends INT UNSIGNED;
SET sstart = LOCATE('<', x, 1);
REPEAT
SET ends = LOCATE('>', x, sstart);
SET x = CONCAT(SUBSTRING( x, 1 ,sstart -1) ,SUBSTRING(x, ends +1 )) ;
SET sstart = LOCATE('<', x, 1);
UNTIL sstart < 1 END REPEAT;
return x;
END;
||
delimiter ;

mysql> SELECT strip_tags('<a href="HelloWorld.html"><B>Hi, mate!</B></a>') as strip_tags;

+------------+
| strip_tags |
+------------+
| Hi, mate!  |
+------------+

1 row in set (0.00 sec) 
```

# java - 使用泛型接口实现泛型

> ID：16220068
> 
> 赞同：1
> 
> 时间：2013-04-25T16:29:08.860
> 
> 标签：java, generics, nested-generics

我有一个接口 Value 和一个类 Record

```
public interface Value<T> {
    T getRawValue();
}

public class Record<Value<T>> {

    private Value<T> value;     

    T getRecordRawValue() {
        return value.getRawValue();
    }

} 
```

Java 不会编译它并抱怨泛型声明 > 。有人可以告诉我为什么这是无效的语法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T16:50:40.813

您需要绑定泛型类型以表明它是 a 的要求`Value<T>`，并且您还需要保留 value`Value<T>`提供的类型，因此您的 `Record`类需要两种泛型类型： T：返回值的类型和 U：代表一个`Value<T>`

`public class Record<T, U extends Value<T>>`

这里有一个完整的例子：

```
public interface Value<T> {
    T getRawValue();
}

public class Record<T, U extends Value<T>> {

    public Record(U value) {
        this.value = value;
    }

    private U value;

    T getRecordRawValue() {
        return value.getRawValue();
    }

}

public class StringValue implements Value<String> {

    @Override
    public String getRawValue() {
        return "raw";
    }
}

public class StrongValue implements Value<String> {

    @Override
    public String getRawValue() {
        return "Rrrrraaawww";
    }
}

public class StringRecord extends Record<String, StringValue> {

    public StringRecord(StringValue valueProvider) {
        super(valueProvider);
    }

    public String report() {
        return super.getRecordRawValue();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:33:23.877

代码`public class Record<Value<T>>`尝试为名为 的类`Value<T>`声明一个泛型类型参数，但在声明泛型类型参数时，它应该是一个简单的标识符，例如`T`。

尝试

```
public class Record<T> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:33:39.663

你的`Record`班级被错误地声明了。它应该是

```
public class Record<T> {
    //contents...
} 
```

# android - RTSP gstreamer 流水线到 Android VideoView

> ID：16220069
> 
> 赞同：1
> 
> 时间：2013-04-25T16:29:10.510
> 
> 标签：android, video-streaming, gstreamer, rtsp

我正在尝试在 Panda 到 RTSP 视频+音频到 Android 4.1.2 应用程序上构建一个 gstreamer 管道。Android 应用程序使用：

```
videoView.setVideoURL(Uri.parse(":rtsp://...")) 
```

观看视频。在 Panda 上，我构建了 gstreamer-0.10（以获得工作 uvch264_src 元素以从 Logitech C920 相机获取 H.264 视频）并使用 gst-rtsp-server/exmaples/test-launch 通过以下方式提供视频+音频：

```
./test-launch 'uvch264_src do-timestamp=true mode=2 post-previews=false usage-type=1 iframe-period=2000 peak-bitrate=400000 rate-control=qp auto-start=true name=src ! queue ! video/x-h264,width=640,height=480,framerate=30/1,profile=constrained-baseline ! h264parse ! rtph264pay name=pay0 pt=96 \
alsasrc do-timestamp=true device=plughw:2,0 ! audio/x-raw-int,rate=44100 ! queue ! audioconvert ! ffenc_ac3 ! rtpac3pay name=pay1 pt=97' 
```

我可以在 VLC 上查看流（音频不同步），但 Android 平板电脑无法播放流。如果我删除管道的音频部分：

```
./test-launch 'uvch264_src do-timestamp=true mode=2 post-previews=false usage-type=1 iframe-period=2000 peak-bitrate=400000 rate-control=qp auto-start=true name=src ! queue ! video/x-h264,width=640,height=480,framerate=30/1,profile=constrained-baseline ! h264parse ! rtph264pay name=pay0 pt=96' 
```

然后Android应用程序播放没有问题。

如何编码音频+视频管道，以便 videoView 可以播放它？我需要先将音频和视频混合成一个 MPEG-TS 流吗？

# android - 如何加快扫描 sdcard 中的所有 txt 文件？

> ID：16220071
> 
> 赞同：0
> 
> 时间：2013-04-25T16:29:18.273
> 
> 标签：android, file, sd-card

我使用递归函数扫描/mnt/sdcard下的所有路径并找出所有以.txt结尾的文件，但我发现如果我在真正的android手机上使用它会很慢。有没有像缓冲输入流这样的东西来加快扫描过程？

```
 private txtFileFilter txtff = new txtFileFilter();

                    private void scanAllTxtFiles(File location, ArrayList<String> list) {

                        File[] files = location.listFiles(txtff);
                        if (files != null) {
                            for (File f : files) {
                                if (f.isDirectory()) {
                                    scanAllTxtFiles(f, list);
                                } else if (f.isFile()) {
                                    list.add(f.getAbsolutePath().substring(
                                            externalPathLength));
                                }
                            }
                        }
                    }

                }

                private class txtFileFilter implements FileFilter {

                    @Override
                    public boolean accept(File pathname) {
                        // TODO Auto-generated method stub
                        if (pathname.isFile()
                                && pathname.getName().length() >= 4
                                && pathname.getName()
                                        .substring(pathname.getName().length() - 4)
                                        .equals(".txt")) {
                            return true;
                        } else if (pathname.isDirectory()) {
                            return true;
                        }
                        return false;
                    }

                } 
```

# android - 适配器上的标题 - 如何添加部分？

> ID：16220073
> 
> 赞同：0
> 
> 时间：2013-04-25T16:29:21.550
> 
> 标签：android, android-listview, android-arrayadapter

我有一个`listView`带有两个`adapter`s 的单曲。我习惯`MergeAdapter`将它们列在一个列表中。但是，我希望两个`adapter`s 都有，`header`因为两个列表中的数据都与两个不同的事物相关。但`header`s 通常附在 a 上`ListView`，而不是 a 上`adapter`。

`override`我知道您可以使用几种方法`ArrayAdapter`，我认为，您可以将一行替换为某种标题。这是我需要采取的选择吗？如果没有，更好的选择？

这就是我想要实现的。标题，后跟`adapter`“1”，共 10 行。另一个标题，后跟`adapter`10 行的“2”。每行总是有 10 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:38:50.733

您也许可以执行以下操作，但我不确定。

```
adapter = new MergeAdapter();
adapter.addView(header);
adapter.addAdapter(arrayAdapter);
adapter.addView(header);
adapter.addAdapter(arrayAdapter2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:58:19.677

我必须`Override` `getItemViewType`在其中`adapter`简单地将我正在寻找的标题作为特定的项目类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T17:54:25.300

我不知道我是否理解，但是看看[这个](https://code.google.com/p/android-section-list/)，看看这是否可以帮助你。

# python - 我如何在 django 管理更改列表页面中创建新表单

> ID：16220075
> 
> 赞同：0
> 
> 时间：2013-04-25T16:29:21.713
> 
> 标签：python, django

我覆盖了 django 更改列表页面。

我已将模板更改为`change_list_results`我想要的 lokk。

但是我想在标题中使用小表单，`export pdf`但是当我将`form`标签添加到 html 时，Django 会自动剥离它，因为结果已经在表单标签内。

怎么能解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:26:35.563

结果在“changelist-form”表单中，根据规则，您不能在另一个表单中添加表单。您可以做的是将表单添加到“更改列表表单”之外。

[https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/templates/admin/change_list.html#L86](https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/templates/admin/change_list.html#L86)

# ruby-on-rails - 无法下载使用 Paperclip (Rails) 存储的 s3 图像

> ID：16220077
> 
> 赞同：0
> 
> 时间：2013-04-25T16:29:26.150
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我可以使用 Paperclip 上传图像，并且可以在 Amazon 的 S3 管理控制台网站上的存储桶中看到它们，但是 Paperclip 提供的 url（例如 image.url(:thumb)）不能用于访问图像。我得到一个看起来像这样的网址：

[http://s3.amazonaws.com/xxx/xxx/images/000/000/012/thumb/image.jpg?1366900621](http://s3.amazonaws.com/xxx/xxx/images/000/000/012/thumb/image.jpg?1366900621)

当我将该 URL 放入浏览器时，我被发送到一个 XML 页面，该页面指出：“您尝试访问的存储桶必须使用指定的端点进行寻址。请将所有未来的请求发送到此端点。”

其中“端点”是回形针路径的子域。但是当我去那个“端点”时，我只是得到另一个错误，上面写着“拒绝访问”。然而，根据亚马逊网站提供的文件信息，该图像是公开可见的。有人可以告诉我我做错了什么吗？

我的 development.rb 文件只包含以下内容：

```
 config.paperclip_defaults = {
    :storage => :s3,
    :s3_credentials => {
      :bucket => AWS_BUCKET,
      :access_key_id => AWS_ACCESS_KEY_ID,
      :secret_access_key => AWS_SECRET_ACCESS_KEY
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T20:10:55.030

我通过更改 :url 的默认值让它工作

```
# config/initializers/paperclip.rb 
Paperclip::Attachment.default_options[:url] = ':s3_domain_url'
Paperclip::Attachment.default_options[:path] = '/:class/:attachment/:id_partition/:style/:filename' 
```

我在美国国内，但似乎这仍然是我的代码工作所必需的（参见[https://devcenter.heroku.com/articles/paperclip-s3](https://devcenter.heroku.com/articles/paperclip-s3)）

# if-statement - cobol 中的嵌套 if 语句

> ID：16220078
> 
> 赞同：4
> 
> 时间：2013-04-25T16:29:36.227
> 
> 标签：if-statement, nested, cobol, gnucobol

我正在尝试在 Cobol 中使用嵌套的 if 语句。据我所知，我正在遵循样式指南，但不断收到错误消息：

file_name.cob:64：错误：语法错误，意外 ELSE <- 这是第二个 ELSE 语句

该代码的目的是用作凯撒密码，但似乎只有嵌套的 if 语句会产生错误。我尝试将嵌套语句放在初始 IF 语句的 ELSE 子句之后，但这也没有成功。

编辑：我正在使用 open-cobol，并使用“-free”选项进行编译

```
 IF CharCount < 26 
                    ADD firstnum, CharCount GIVING stringShift.
                    DISPLAY stringShift.

                    IF FUNCTION MOD(stringShift, 26) IS NOT ZERO 

                            MOVE FUNCTION MOD(stringShift, 26) to stringShift
                            DISPLAY stringShift

                            MOVE abc(stringShift:stringShift) TO newChar
                            DISPLAY newChar

                            STRING newString DELIMITED BY "", newChar DELIMITED BY SIZE INTO newString

                            DISPLAY newString
                    ELSE
                            STRING newString DELIMITED BY "", searchChar DELIMITED BY SIZE INTO newString
                            DISPLAY newString
                    END-IF
            ELSE
                    STRING newString DELIMITED BY "", searchChar DELIMITED BY SIZE INTO newString
                    DISPLAY newString
            END-IF. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-26T18:17:34.713

只是想在这里分享答案，因为它在 comp.lang.cobol 谷歌组中得到了回答。这是导致问题的第一条 ADD 和 DISPLAY 行之后的两个时期。它现在编译成功。

这些行应显示为：

```
ADD firstnum, CharCount GIVING stringShift
DISPLAY stringShift 
```

# javascript - 如何使用高图表添加特定于列的情节线？

> ID：16220083
> 
> 赞同：1
> 
> 时间：2013-04-25T16:29:54.970
> 
> 标签：javascript, highcharts

我正在尝试使用 js HighCharts 制作柱形图，该图表的每一列都有 2 条唯一的绘图线，而不是跨越整个图表宽度的单个绘图线。

这样我就可以显示每个列的最大值和最小值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:03:12.703

您无法制作以这种方式工作的实际情节线。

您可以使用分散系列，并定义自定义线标记类型，如下所示：

[http://jsfiddle.net/highcharts/e96yX/](http://jsfiddle.net/highcharts/e96yX/)

水平线和垂直线的示例代码：

```
Highcharts.Renderer.prototype.symbols.vline = function(x, y, width, height) {
    return ['M',x ,y + width / 2,'L',x+height,y + width / 2];
};
Highcharts.Renderer.prototype.symbols.hline = function(x, y, width, height) {
    return ['M',x ,y + height / 2,'L',x+width,y + width / 2];
}; 
```

或者，根据您的问题，列范围图也可能会有所帮助：

[http://highcharts.com/demo/columnrange](http://highcharts.com/demo/columnrange)

# php - 由于许多连接错误，主机“主机名”被阻止；使用 'mysqladmin flush-hosts' 解除阻塞

> ID：16220084
> 
> 赞同：15
> 
> 时间：2013-04-25T16:30:02.793
> 
> 标签：php, mysql, database, web, hosting

我的网站在 localhost 'Wamp' 服务器上运行良好。但是，一旦我将其上传到我的网络主机供其他人使用，我就会收到以下错误：

**主机 'stats.starfish.arvixe.com' 由于许多连接错误而被阻止；使用 'mysqladmin flush-hosts' 解除阻塞**

我无法执行“flush-hosts”命令，因为我使用的是共享主机并且缺乏权限。

我已经在网上进行了广泛的搜索，但对于可能导致我的连接错误的原因，我找不到可靠的答案。该网站运行了一段时间，但一旦多人开始使用它，MySQL 就会阻止我的虚拟主机，因为它有太多的连接错误。

是否有任何我可以访问或查看的日志可以告知我导致连接错误的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-02T04:15:54.420

[https://dev.mysql.com/doc/refman/5.0/en/blocked-host.html](https://dev.mysql.com/doc/refman/5.0/en/blocked-host.html)

您的问题是您**不断**尝试连接并且您失败了。共享服务器被设置为保护自己免受这种行为的影响，并切断了您的联系。关闭您的应用程序一段时间，然后在重新打开之前解决连接问题。

您可以再次尝试的时间量是在服务器上设置的，可能是在您看不到的地方。因此，每 15 分钟尝试一次，直到您被允许尝试...

我建议使用备用的 mysql 服务器（可能在本地）进行练习，这样您就可以避免将来对该主机显示为暴力攻击的情况。始终在“打开服务”之前手动测试您的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T11:39:46.683

我有同样的问题。但我这样解决了：

1.  *登录*到您的**“域管理面板”**（`www.yourdomainname.com/cpanel`）

2.  转到**“数据库”**部分，然后单击**“远程 Mysql”**选项

    ![在此处输入图像描述](https://i.stack.imgur.com/WZXv8.png)

3.  在下一页中，在**“主机（允许使用% 通配符）”**文本字段中输入`"%"`并按**“添加主机”**按钮

    ![在此处输入图像描述](https://i.stack.imgur.com/c52CI.png)

4.  现在您应该`"%"`在下面的列表中看到它，您可以随时按**“X”**按钮从那里删除它。

5.  现在转到您的“php脚本”文件并设置您的**数据库主机名**，没有`"http://"`或`"www"`

    ![在此处输入图像描述](https://i.stack.imgur.com/SCzgx.png)

现在尝试重新连接它。希望它会帮助你。

**请记住：**
**通过这样做，您将允许外部 Web 服务器访问您的 MySQL 数据库，方法是将它们的域名添加到能够访问您网站上的数据库的主机列表中。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T18:49:34.987

如果您的网站托管在数据库的同一服务器上，请使用“localhost”作为数据库主机

# hibernate - 休眠不更新持久对象

> ID：16220087
> 
> 赞同：1
> 
> 时间：2013-04-25T16:30:11.297
> 
> 标签：hibernate

我有以下代码：

```
Criteria criteria = currentSession.createCriteria(Activity.class);
criteria.add(Restrictions.eq("activityId", activityId));

List<Activity> existingActivities = criteria.list();

if(existingActivities.size() == 0){
    System.out.println("No Activity exist for activity id: "+activityId);
    continue;
}

    Activity activity = existingActivities.get(0);

    User assignTo = users.get(UNKNOWN);

    activity.setUser(assignTo);
    currentSession.flush(); 
```

我期待hibernate会发出一条更新语句，并用新用户保存我的持久对象活动。但它没有用。我正在使用带有 Spring 的 Hibernate。方法被标记为@Transactional。我以为我不必放置 session.flush()。所以我也尝试过。它没有用。如果我在这里做错了什么，请指导我。

我也尝试过明确调用更新。我可以在 SQL 日志中看到更新语句，但它没有更新我的数据库。

谢谢，帕万

# mysql - 多表连接和查询

> ID：16220090
> 
> 赞同：0
> 
> 时间：2013-04-25T16:30:16.650
> 
> 标签：mysql, sql, join

我有以下要使用 mySQL SQL 查询加入的 OFBiz 表：

1.  用户登录
2.  人
3.  PARTY_CONTACT_MECH
4.  CONTACT_MECH
5.  TELECOM_NUMBER
6.  邮寄地址
7.  派对

表`USER_LOGIN, PERSON`和`PARTY_CONTACT_MECH`所有表都包含`"PARTY_ID"`引用表中主键`"PARTY_ID"`的外键`PARTY`。

表`PARTY_CONTACT_MECH, TELECOM_NUMBER`和`POSTAL_ADDRESS`所有表都有`"CONTACT_MECH_ID"`引用`"PARTY_ID"`表中主键的外键`CONTACT_MECH`。

由于`PARTY_CONTACT_MECH`还与上面列出的第一组表`"PARTY_ID"`相关，并且还与第二组表相关，`"CONTACT_MECH_ID"`因此可以在这两个键上 JOINED`"PARTY_ID"`和所有表`"CONTACT_MECH_ID"`。

我的问题是：

*   **如何加入所有这些表以查询以下字段：** .

.

```
PARTY.PARTY_ID,
USER_LOGIN.USER_LOGIN_ID,
PERSON.FIRST_NAME,
CONTACT_MECH.CONTACT_MECH_ID,
POSTAL_ADDRESS.CITY,
TELECOM_NUMBER.CONTACT_NUMBER. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:54:30.537

您希望将所有表及其主键连接到调用其他表的外键。外键本质上是其他表的主键。这样您就可以使用外键而不是向表中添加多余的列。

在您的某些表上，您想加入多个值。有了这个，你只需要让你的 JOIN ON table1.var1 = table2.var2 AND table1.var1 = table3.var3 ，反之亦然。

你有很多桌子，所以我会尽力而为：

```
SELECT 
   PARTY.PARTY_ID
   , USER_LOGIN.USER_LOGIN_ID
   , PERSON.FIRST_NAME
   , CONTACT_MECH.CONTACT_MECH_ID
   , POSTAL_ADDRESS.CITY
   , TELECOM_NUMBER.CONTACT_NUMBER
FROM `PARTY`
   JOIN `USER_LOGIN`
     ON PARTY.PARTY_ID = USER_LOGIN.PARTY_ID
   JOIN `PERSON`
     ON PARTY.PARTY_ID = PERSON.PARTY_ID
   JOIN `PARTY_CONTACT_MECH`
     ON PARTY.PARTY_ID = PARTY_CONTACT_MECH.PARTY_ID AND CONTACT_MECH.PARTY_ID = PARTY_CONTACT_MECH.CONTACT_MECH_ID
   JOIN `TELECOM_NUMBER`
     ON CONTACT_MECH.PARTY_ID = TELECOM_NUMBER.CONTACT_MECH_ID
   JOIN `POSTAL_ADDRESS`
     ON CONTACT_MECH.PARTY_ID = POSTAL_ADDRESS.CONTACT_MECH_ID 
```

就像我说的，当所有表和列没有被可视化时，很难跟上它们，但希望连接语句可以帮助您了解如何做到这一点。

# mysql - 如何在 CodeIgniter 中查询这个

> ID：16220097
> 
> 赞同：2
> 
> 时间：2013-04-25T16:30:39.373
> 
> 标签：mysql, database, codeigniter

这就是我要的：

```
SELECT DISTINCT first_name,last_name 
FROM employees e 
INNER JOIN salaries s ON e.emp_no = s.emp_no 
WHERE e.birth_date > '1963-01-01' 
AND s.salary>150000 
```

我已经尝试过了，我得到了我想要的名字，还有另外 12 个名字。出了点问题。

```
 $this->db->distinct();
    $this->db->select('first_name, last_name');
    $this->db->from('employees');
    $this->db->join('salaries s', 'e.emp_no = s.emp_no', 'inner');
    $this->db->where('e.birth_date > 1963-01-01');
    $this->db->where('s.salary > 150000');

    $result = $this->db->get(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:37:19.040

我添加了一条评论，但我会将其添加为建议的答案。您没有像您为薪水 s 所做的那样在员工之后添加 e`employees`别名。`$this->db->from('employees');`

```
$this->db->distinct();
$this->db->select('first_name, last_name');
$this->db->from('employees e');
$this->db->join('salaries s', 'e.emp_no = s.emp_no', 'inner');
$this->db->where('e.birth_date > 1963-01-01');
$this->db->where('s.salary > 150000');

$result = $this->db->get(); 
```

**编辑：** where 子句中的日期字符串没有被引用。尝试更新语句以引用字符串，或将其作为第二个参数传入。

```
$this->db->where('e.birth_date > "1963-01-01"'); 
```

或者

```
$this->db->where('e.birth_date >', '1963-01-01'); 
```

我假设这是您数据库中日期列的正确格式掩码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:19:50.380

如果活动记录让您感到困惑，这很容易。您可以简单地使用查询功能

```
$query  =   "SELECT 
                DISTINCT first_name,
                last_name 
            FROM employees e 
            INNER JOIN salaries s ON e.emp_no = s.emp_no 
            WHERE e.birth_date > '1963-01-01' 
            AND s.salary>150000";
$this->db->query($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T14:45:18.270

在 where 子句中，应在第一个参数中输入运算符，以便与第二个参数值进行比较。

```
$this->db->where('e.birth_date >', 1963-01-01);
$this->db->where('s.salary >', 150000'); 
```

# grails - 收集和渲染公共数据

> ID：16220101
> 
> 赞同：0
> 
> 时间：2013-04-25T16:30:55.580
> 
> 标签：grails, groovy

收集常见数据（例如侧边栏的数据）的最佳/最干净的方法是什么。在我的应用程序中，我将永远只有两组不同的数据，这取决于 a`User`是否在 a 中`Project`。

我现在正在这样做：

```
def dashboard = {   
    def returnVal = getCommonSidebarContent()       
    returnVal << getCommonHeaderContent()
    returnVal << [
        //other data related to the main content of this particular page
        ]
    return returnVal
} 
```

之类的`getCommonSidebarContent()`将返回用户任务和其他数据的地图。

我知道这很糟糕，它是我开始的，但随着时间的推移，我再也没有时间对它进行分类。`returnVal`几乎每个控制器方法中的语句开始看起来很混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:47:04.063

也许[过滤器](http://grails.org/doc/2.2.1/guide/single.html#filters)可以帮助您：

```
class MyFilters {
    def filters = {
        all(controller: '*', action: '*') {
            after = { Map model ->
              model.myCommonProperty = ...
            }
        }
    }
} 
```

在过滤器中，您可以在处理请求之前/之后执行通用操作（即向模型添加通用数据）。您可以在其中`all(controller: '*', action: '*')`定义应该由过滤器处理的操作（在这种情况下，所有控制器中的所有操作都被处理）。

另一种方法是在控制器中使用[beforeInterceptor 。](http://grails.org/doc/2.2.x/ref/Controllers/beforeInterceptor.html)如果您需要在单个控制器中执行常见操作，则可以使用它。

# c# - 如何在程序集中组织命名空间以反映设计

> ID：16220102
> 
> 赞同：1
> 
> 时间：2013-04-25T16:30:57.830
> 
> 标签：c#

我想组织我的程序集，以便我编写的代码反映我的预期设计。从我已经收到的帮助中，我了解到命名空间是组织类型以实现此目的的主要方式。

我遇到的问题是我的程序集，`Assembly`比如说，使用了一层实现类。然而，其中的一些类`Layer1`本身就是实现的一部分，`Layer1`我想在我构建代码的方式中反映这一点。我的第一个想法是尝试`Layer1`私下开设一些课程，但我可以看到[这是不可能的](https://stackoverflow.com/questions/1223873/namespace-only-class-visibility-in-c-net)。

从逻辑上讲，`Layer1`是暴露类`A1`，`B1`等等`C1`。它使用类`A2`，`B2`等等`C2`。

```
namespace Assembly.Layer1
{
    // "interface to Layer1"
    class A1 // ...
    class B1 // ...
    class C1 // ...
    // "implementation of Layer1"
    class A2 // ...
    class B2 // ...
    class C2 // ...
} // (one file per class) 
```

似乎解决此问题的一种方法是将`A2`,`B2`等`C2`放入新的命名空间`Assembly.Layer1.Layer2`. 然后，当我在顶级命名空间中编写代码并使用`Assembly.Layer1`时，智能感知只向我显示`Assembly.Layer1`公开的类。另外，*按照惯例*，我一次应该只在命名空间层次结构中向下引用一层。这是正确的方法吗？

# jquery - jQuery ui 可通过重叠容器排序和拖动

> ID：16220103
> 
> 赞同：0
> 
> 时间：2013-04-25T16:30:59.670
> 
> 标签：jquery, jquery-ui

我有多个可排序的，它们可以相互重叠。Sortables 相互连接并允许将一个元素拖动到另一个元素。还有其他项目，可以拖到这些分类中。

当一个占位符完全超过另一个占位符时，我遇到了一个棘手的部分。这阻止了我将一个元素从外部容器放到内部容器中。我扩展了可排序小部件并进行了一些修改以检查 z-indexes 而不是包含。

```
if (innermostContainer && $.contains(this.containers[i].element[0],innermostContainer.element[0])){ 
```

变成：

```
if (innermostContainer && parseInt(this.containers[i].element.css('zIndex')) < parseInt(innermostContainer.element.css('zIndex'))){ 
```

它适用于这个问题。

下一个问题是，如果我将一个项目从可拖动项拖放到内部容器中，则会出现 2 个占位符并尝试将它们都添加错误。

（如果我之前的 z-index 修复未应用，则拖动的项目添加到内部容器以及另一个容器中）所以主要是我的修复将外部容器项放入内部容器。

这两种效果都对我不利，但我想通过仅添加一个占位符和一项来解决此问题。

你有什么解决办法我该怎么办？

我创建了一个示例来向您展示问题：http: [//jsbin.com/irigas/1/edit](http://jsbin.com/irigas/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:12:26.300

所以我花了很多时间，但我能够找到一个解决方案，我将分享一个可能的解决方案。

我创建了一个虚拟可排序对象，它会在拖动时获取不需要的项目。

```
var dummy = $('#dummy');
  dummy.testSortable({
   items: '.item', 
   helper: "clone",
   tolerance: "pointer",
   appendTo: 'body'
  });
  window.dummySortable = dummy.data('sortable'); //this data key depends on the actual jQuery ui version 
```

我们还需要全局标记拖动开始和结束事件，因为我们需要稍后检查它：

```
start: function() {
    window.isdrag = true;

},
stop: function() {
    window.isdrag = false;
} 
```

然后在之前的扩展方法中我们需要添加这个：

```
if (innermostContainer && parseInt(this.containers[i].element.css('zIndex')) < parseInt(innermostContainer.element.css('zIndex'))) {
    if(window.isdrag){
        innermostContainer = window.dummySortable;
        innermostIndex = this.containers.indexOf(innermostContainer);
    }
    continue;
} 
```

这将在拖动时过滤任何不需要的元素并将它们发送到虚拟可排序对象中。您可以在后面看到绿色背景，即虚拟可排序。

使用解决方案测试修订 #2：http: [//jsbin.com/irigas/2/](http://jsbin.com/irigas/2/)

如果您对这个 hacky 解决方案有任何疑问，请随时分享，因为我很好奇我们是否可以做得更好。

# php - 寻找 PHP 调试的选项

> ID：16220105
> 
> 赞同：0
> 
> 时间：2013-04-25T16:31:10.413
> 
> 标签：php, debugging, ide

我正在寻找 PHP 调试选项。我知道有 xDebug 并且我知道它是一个很好的工具，但是目前学习曲线对我来说有点太陡峭和太长了。也许我将来会学习它..

现在，我正在寻找一个调试工具，就像在 Visual Studio Suite 中找到的那样。我的主要问题是：假设我正在开发一个框架，那么显示的 URL 并没有真正提供太多线索，例如当前正在执行哪个文件。

有使用调试工具经验的人吗？任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:36:20.957

查看[FirePHP](http://firephp.org/) - 一个与 Firebug 一起使用的 Firefox 扩展（Firefox 的一个很棒的 JavaScript 调试工具 - 请参阅[https://getfirebug.com/](https://getfirebug.com/)）。设置需要一些工作，但是一旦激活它就非常适合使用 Firebug 扩展工具进行调试，其中包括设置断点等的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:19:21.667

如果您按照教程进行操作，实际上很容易在 Eclipse 中进行调试。它大大加快了您的开发速度。我建议你试试。FirePhp 非常适合获取执行信息，但不能设置断点、监视表达式等。

你可以找到很多教程，像这样： http: [//www.eclipse.org/pdt/articles/debugger/os-php-eclipse-pdt-debug-pdf.pdf](http://www.eclipse.org/pdt/articles/debugger/os-php-eclipse-pdt-debug-pdf.pdf)

我还建议你看看： [http ://www.phpeclipse.com/](http://www.phpeclipse.com/)

这可能需要一些试验和错误，但一旦你得到它，它将永远属于你，你将拥有一个类似于 Visual Studio 套件的编码环境，但免费 :)

# javascript - 从输入中计算值

> ID：16220113
> 
> 赞同：-4
> 
> 时间：2013-04-25T16:31:33.800
> 
> 标签：javascript, html, input, html-table

我正在尝试对表格中的输入求和，但我遇到了问题。该表如下所示：

```
<tr>
  <td>
    <input type="text" class="ilosc" />
  </td>
  <td>
    <input type="text" class="cena" />
  </td>
</tr>
<tr>
  <td>
    <input type="text" class="ilosc" />
  </td>
  <td>
    <input type="text" class="cena" />
  </td>
</tr> 
```

我想总结第一个 tr 之类的东西

ilosc * cena 从第一个`tr`和第二个相同，但我想总结它们类似

ilosc * cena + ilosc * cena

主要问题是这个表是自动生成的，所以我不能添加特殊的 id 或类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:01:34.270

使用 jQuery 允许然后你可以做这样的事情

```
var arr=new Array();

$('tr').each(function(){
var $inputs=$(this).find('input');
var result=$inputs.first().val() * $inputs.last().val();
arr.push(result);
});

alert((arr[0]+arr[1])); 
```

或者通过这个...

```
var ilosc=$(".ilosc");
var cena=$(".cena");
var result=0; 

ilosc.each(function(index, value){

           result=result+(($(value).val())*($(cena.get(index)).val()));
 });
alert(result); 
```

您可以在[JSFiddle上查看演示](http://jsfiddle.net/7Eafu/)

# c# - 如何让多播在 OSX 上的 VirtualBox 来宾操作系统中工作

> ID：16220116
> 
> 赞同：1
> 
> 时间：2013-04-25T16:31:47.643
> 
> 标签：c#, udp, virtualbox, multicast

我正在努力让 Multicast 在 OSX 主机和 Win7 来宾的虚拟机下工作。我的多播代码通常在 Windows7 机器的真实网络上运行良好，但我需要能够远离它进行开发。

我读到 VB 可能正在创建其他接口，其中一个接口正在获取无法重复的多播数据包，因此我编写了以下代码来尝试处理该问题，但在 InternalNetwork 或 HostOnly 下的 VB 中仍然失败。

我是否需要通过物理连接到网络（而不是 wifi）才能工作？还是我还在做其他错事？

编辑：稍微简化了我的代码，仍然不起作用。

```
NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();

// Get netowrk info
int defaultPort = 5050;
string localName = Dns.GetHostName();
IPHostEntry hostEntry = new IPHostEntry();
hostEntry = Dns.GetHostByName(localName);
IPAddress localAddress = hostEntry.AddressList[0];

// create a socket pair for every interafce
for(int i=0;i<nics.Length;i++)
{
    #region Make Outgoing Socket on Interface

    if (!nics[i].SupportsMulticast)
    {
        continue; // skip this one
    }
    Console.WriteLine("Adding socket to nic: " + nics[i].Name);
    // output interface
    Socket mcastSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

    // Bind the socket to default IP address and port.
    mcastSocket.Bind(new IPEndPoint(localAddress,4568+i));

    // Select Adapter for outgoing Multicast packets );
    int optionValue = (int)IPAddress.HostToNetworkOrder(i);

    // Multicast Address - To add membership : ");
    IPAddress mcastAddress = IPAddress.Parse("224.5.6.7");

    // Port number - Where Multicast members are listening : ");
    int mcastPort = 4567;
    MulticastOption mcastOpt = new MulticastOption(mcastAddress,localAddress);

    // Add membership to the group.
    mcastSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, mcastOpt);

    // Set the required interface for outgoing multicast packets.
    mcastSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastInterface, optionValue);

    mcastSocket.Connect(new IPEndPoint(mcastAddress,4567));

    // add to transmission list
    transmissionList.Add(mcastSocket);

    #endregion
}

#region Make Incoming Socket on Interface

// make socket to read for incoming multicast
Socket inSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
inSocket.Bind(new IPEndPoint(localAddress, 4567));
inSocket.SetSocketOption(SocketOptionLevel.IP,                SocketOptionName.AddMembership, new MulticastOption(multicastIpAddr));
receptionList.Add(inSocket); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T22:10:55.393

摘自上述博客

可能还有其他方法，并非所有这些步骤都可能真的是必要的，但这对我有用：

1.  从 Oracle VM VirtualBox 下载并安装最新的 VirtualBox 还下载并安装 Oracle VirtualBox Extension Pack（可能不是必需的，但我这样做了。）

2.  将 Win7 的副本安装到 VirtualBox VM 中。

3.  克隆 VM 以创建第二台计算机。极其重要：克隆以与其父级相同的 MAC 地址开始。这让我困扰了很长时间。进入克隆的网络设置->高级，并通过按 MAC 旁边的圆形箭头请求它为您分配一个新的 MAC。（这仅在虚拟机关闭时有效。）

4.  将两台机器的网络类型设置为“内部网络”。（请注意，这会将它们与您的主机和互联网隔离开来。）

5.  在主机的命令行上，启用 dhcp（这也可能不是绝对必要的，但我就是这样做的。作为替代方案，您也可以手动为两台机器配置 IP）。假设您使用默认的内部网络名称“intnet”，您可以这样做（全部在一行上）：
    dhcpserver add --netname intnet --ip 10.10.10.1 --netmask 255.255.255.0 --enable --lowerip 10.10.10.10 --upperip 10.10.10.128

**非常重要：** 在 VirtualBox 创建的环境中，有多个声称支持多播的 NIC。然而，他们在撒谎。此外，由于 VirtualBox 分配指标的方式，您的传出套接字将被分配给一个骗子，他会很高兴地吞噬您的多播消息而不发送它们。解决方案是专门在每个声称具有多播功能的 NIC 上打开一个传出套接字，并将传出数据包发送给所有这些 NIC。下面是我打开套接字并列出列表的代码。发送数据包时只需在列表中进行foreach。

```
NetworkInterface[] nics =   
                  NetworkInterface.GetAllNetworkInterfaces();
  // Get netowrk info
  int defaultPort = 5050;
  string localName = Dns.GetHostName();

  IPHostEntry hostEntry = new IPHostEntry();
  hostEntry = Dns.GetHostByName(localName);
  IPAddress localAddress = hostEntry.AddressList[0];
   for(int i=0;i<nics.Length;i++){
            if (!nics[i].SupportsMulticast)
            {
                continue; // skip this one
            }
            Console.WriteLine("Adding socket to nic: " + nics[i].Name);
            // output interface
            Socket mcastSocket = new 
                Socket(AddressFamily.InterNetwork, 
                     SocketType.Dgram, ProtocolType.Udp);

            // Bind the socket to default IP address and port.
            mcastSocket.Bind(new IPEndPoint(localAddress,4568+i));

            //Select Adapter for outgoing Multicast packets );

            int optionValue = (int)IPAddress.HostToNetworkOrder(i);

            //Multicast Address - To add membership : 
            IPAddress mcastAddress = IPAddress.Parse("224.5.6.7");

            // Port number - Where Multicast members are listening 
            int mcastPort = 4567;
            MulticastOption mcastOpt = new
                MulticastOption(mcastAddress,localAddress);

             // Add membership to the group.
            mcastSocket.SetSocketOption(SocketOptionLevel.IP, 
                SocketOptionName.AddMembership, mcastOpt);

            // Set the required interface for outgoing multicast packets.
            mcastSocket.SetSocketOption(SocketOptionLevel.IP, 
                SocketOptionName.MulticastInterface, optionValue);

            mcastSocket.Connect(new 
                IPEndPoint(mcastAddress,4567));

            // add to transmission list
            transmissionList.Add(mcastSocket);
        } 
```

# javascript - 如何在 tinyMCE 中添加字体大小工具栏？

> ID：16220118
> 
> 赞同：45
> 
> 时间：2013-04-25T16:31:49.923
> 
> 标签：javascript, css, fonts, tinymce, wysiwyg

这样我将tinyMCE初始化为textarea。字体，粗斜体正在工作，但字体大小选择不起作用。

```
tinymce.init({
    selector: "textarea#content",
    theme: "modern",
    width: 586,
    height: 300,
    menubar:false,
    font_size_classes : "fontSize1, fontSize2, fontSize3, fontSize4, fontSize5, fontSize6",//i used this line for font sizes 
    content_css: "css/content.css",
    toolbar: "sizeselect | bold italic | fontselect | fontsize",//used font size for showing font size toolbar   
style_formats: [

    {title: 'Bold text', inline: 'b'},
            {title: 'Red text', inline: 'span', styles: {color: '#ff0000'}},
            {title: 'Red header', block: 'h1', styles: {color: '#ff0000'}},
            {title: 'Example 1', inline: 'span', classes: 'example1'},
            {title: 'Example 2', inline: 'span', classes: 'example2'},
            {title: 'Table styles'},
            {title: 'Table row 1', selector: 'tr', classes: 'tablerow1'}
    ],
});** 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-04-26T10:03:02.483

您需要做的就是添加`fontsizeselect`到您的工具栏配置参数：

```
toolbar: "sizeselect | bold italic | fontselect |  fontsizeselect", 
```

更新：

```
tinymce.init({
  fontsize_formats: "8pt 10pt 12pt 14pt 18pt 24pt 36pt"
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-26T18:11:56.970

这可能对透视有用。下面是我的 TinyMCE init JS 代码，其中包括字体类型和大小的选项。

```
tinymce.init({
    selector: '#articletextarea',
    plugins: [
        'advlist autolink lists link image charmap preview hr anchor pagebreak',
        'searchreplace wordcount visualblocks visualchars code',
        'insertdatetime media nonbreaking table contextmenu directionality',
        'emoticons template paste textcolor colorpicker textpattern imagetools codesample'
    ],
    toolbar: 'codesample | bold italic sizeselect fontselect fontsizeselect | hr alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | insertfile undo redo | forecolor backcolor emoticons | code',
    fontsize_formats: "8pt 10pt 12pt 14pt 18pt 24pt 36pt",
    height: "350",
    menubar: false
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-06T09:57:44.380

```
theme_modern_font_sizes: "10px,12px,13px,14px,16px,18px,20px",
font_size_style_values: "12px,13px,14px,16px,18px,20px",

toolbar: "insertfile undo redo | fontsizeselect | 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-17T19:02:25.620

我真的很生气 wordpress 似乎如何努力让人们想要深入了解背景并使用代码，即使对于所谓的基本功能，如更改字体也是如此。

幸运的是，我找到了一种无需进行任何实际编码即可启用字体大小菜单的方法。

只是 -

1.  使用插件“TinyMCE Advanced”
2.  在设置中激活它。

[更详细的说明在这里](http://www.theaaronloy.com/enable-font-size-menu-in-tinymce-wordpress-easy/)。

# jax-rpc - JAX RPC 服务返回类似结构的映射

> ID：16220121
> 
> 赞同：0
> 
> 时间：2013-04-25T16:32:01.193
> 
> 标签：jax-rpc

我知道 JAX-RPC Web 服务中不允许使用 hashmap 数据结构。

但我想在我的服务中返回看起来像这样的数据。

```
Atrribute,<Key><value>,Atrribute,<Key><value>,Atrribute,<Key><value> .. 
```

请知道我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:39:29.213

要返回 Map 之类的结构，您需要将其包装在 Wrapper 类中。

`JAXBMap`如下所示将您的地图包装并返回。

```
package myexample;

import java.util.Map;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class JAXBMap<T, K> {
Map<T, K> map;

public Map<T, K> getMap() {
    return map;
}

public void setMap(Map<T, K> map) {
    this.map = map;
}

public JAXBMap(Map<T, K> map) {
    super();
    this.map = map;
}

public JAXBMap() {
    super();
}

} 
```

# hadoop - 将其他文件与 EMR 流式步骤一起使用？

> ID：16220122
> 
> 赞同：0
> 
> 时间：2013-04-25T16:32:02.143
> 
> 标签：hadoop, amazon-web-services, elastic-map-reduce

我目前有一个想使用 AWS 开发工具包复制的 hadoop 命令。

我当前使用的命令

```
hadoop jar /home/hadoop/contrib/streaming/hadoop-streaming.jar -input /no_dups -output /sorted -mapper mapper.py -reducer reducer.py -file mapper.py reducer.py other_file1.py other_file2.py 
```

据我所知，`StreamingStep`该类没有提供让 Hadoop 知道需要其他文件以及映射器和化简器的方法。

这个功能可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:43:26.260

我通过将`-file`选项传递给`HadoopJarStepConfig`我需要的文件列表来解决这个问题。

看到[这个问题](https://stackoverflow.com/questions/16241520/adding-extra-arguements-to-hadoopjarstepconfig-fails/16275484#16275484)

# asp.net-mvc - 在 ASP MVC 中为两种不同的表单使用一个下拉列表

> ID：16220123
> 
> 赞同：0
> 
> 时间：2013-04-25T16:32:05.397
> 
> 标签：asp.net-mvc, html, razor

使用 MVC4，我有一个下拉列表，其中包含用户可以选择的值。然后我有两个不同的动作，我想将该值传递给。如果可能的话，我该如何做到这一点？

看法：

```
@using (Html.BeginForm("Action1", "Controller", FormMethod.Post, new FormCollection()))
{
   @Html.DropDownList("Item", Model.GetListValues(Model.Items))
   <input type="submit" value="Goto Action1">
}

@using (Html.BeginForm("Action2", "Controller", FormMethod.Post, new FormCollection()))
{
   <input type="submit" value="Goto Action2">
} 
```

控制器：

```
public Task<ActionResult> Action1(string item)
{
  //logic
}

public Task<ActionResult> Action2(string item)
{
  //logic
} 
```

现在，代码将允许我在第一个表单的下拉列表中传递值，但是如何将它包含在第二个表单中？它可能涉及使用@Html.HiddenFor 吗？我不想复制下拉列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:00:38.713

有了 jQuery，一切皆有可能。

正如您所提到的，在您的第二个表单中添加一个隐藏字段。然后，添加一个 jQuery 脚本以在下拉列表更改时更新该字段。您需要更新您的项目名称，以免它们重复，但除此之外，您现有的代码将起作用。

```
$("#ItemDropdown").change(function () {
    $("#ItemHidden").val($("#ItemDropdown").val());
}); 
```

# sql - 使用解码的 SQL 查询

> ID：16220137
> 
> 赞同：0
> 
> 时间：2013-04-25T16:32:28.490
> 
> 标签：sql, oracle, oracle-sqldeveloper

您好，我正在尝试创建一个查询，该查询将列出所有参加过课程但在参加课程之前没有该课程的所有先决条件的学生。在参加后续课程之前，必须通过先决条件。入学的年份是学年。在学年中，秋天先于冬天，而冬天先于春天。因此，由于学校制度，秋天来得早于春天。下面是我的数据库以及我的表。我正在努力如何选择没有按正确顺序完成课程的学生。即在完成 CID1 之前完成 CID2 这是我开始这段代码

```
SELECT student.FirstName, student.Lastname, Student.SID FROM student
INNER JOIN enrolled ON student.SID = enrolled.StudentID
INNER JOIN prerequisite p ON enrolled.courseID = p.CID
INNER JOIN prerequisite p1 ON enrolled.courseID = p1.CID2
WHERE p1.CID1 = True AND p.CID = FALSE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:02:27.617

```
SELECT  a, d, ea.studentId,
        ea.quarter AS a_quarter, ea.year AS a_year,
        ed.quarter AS d_quarter, ed.year AS d_year
FROM    (
        SELECT  cid1 a, cid2 d
        FROM    prerequisite
        CONNECT BY
                cid2 = PRIOR cid1
        ) c
JOIN    enrolled ea
ON      ea.courseId = c.a
LEFT JOIN
        enrolled ed
ON      ed.courseId = c.d
        AND ed.studentId = ea.studentId
WHERE   ed.studentId IS NULL
        OR
        ed.year > ed.year
        OR
        (ed.year = ea.year AND DECODE(ed.quarter, 'fall', 1, 'winter', 2, 'spring', 3) > DECODE(ea.quarter, 'fall', 1, 'winter', 2, 'spring', 3)) 
```

# internet-explorer - SVG 动画：使用 CSS3 媒体查询将 IE10 与其他现代浏览器隔离开来

> ID：16220140
> 
> 赞同：2
> 
> 时间：2013-04-25T16:32:40.113
> 
> 标签：internet-explorer, css, animation, svg, media-queries

我在 SVG 文件中编写了一个精美的加载动画。我的问题是 Internet Explorer 10 不支持带有参数的**SVG** `<animate>`标签。`attributeName`因为我喜欢一些挑战，所以我为我的加载动画设计了一个 SVG**和**一个动画 GIF 版本。

现在我正在寻找某种 CSS3 媒体查询（`???????????`在下面的 CSS 中查找“”），它将加载支持原生 SVG 动画的现代 Webkit 和 Gecko 引擎（在桌面和移动设备上）的后备样式，离开GIF 回退到不支持 CSS3 媒体查询的旧浏览器和所有 Internet Explorer 浏览器，从 IE7 到 IE10。至少我在 Chrome、Safari 和 Safari 移动设备（Webkits）上需要它，为 Firefox 提供它是一件好事。

**HTML 源**

```
<div id="container" class="loadingAnim">
    <div class="loading"><span class="anim"></span></div>
    ...
</div> 
```

**适用于所有浏览器的 CSS**

```
.loadingAnim > .loading {
    position: absolute;
    z-index: 5;
    width: 100%;
    min-width: 100px;
    height: 100%;
    min-height: 100px;
    text-align: center;
    background-color: white;
    opacity: .85;
}
.loadingAnim .loading .anim {
    display: block;
    position: absolute;
    left: 50%;
    top: 40%;
    width: 48px;
    height: 48px;
    margin-top: -24px;
    margin-left: -24px;
    background: white url(loadingAnim.gif) no-repeat center center;
    opacity: .7;
} 
```

**CSS 仅适用于支持 SVG 动画的浏览器**

```
@media screen and (??????????? HELP ME HERE ???????????)
    .loadingAnim .loading .anim {
        background-image: url(loadingAnim.svg);
        background-size: 100% 100%;
        opacity: 1;
    }
} 
```

事实上，真正的问题是：“***我们可以根据 CSS 媒体查询排除浏览器吗？*** ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T10:05:05.740

回复较晚，但理想情况下，您应该针对功能而不是浏览器的支持。

Modernizr ( [http://modernizr.com/docs/#features-html5](http://modernizr.com/docs/#features-html5) ) 能够检测对 SVG 和 SMIL（SVG 动画）的支持。它可以向您的 html 元素添加一个类，让您知道浏览器是否支持 SMIL。然后，您可以使用它来将您的 SVG 样式定位到支持它的浏览器，并在不支持的情况下提供备用 gif。

以 gif 为默认设置动画。

```
.loadingAnim > .loading {
    position: absolute;
    z-index: 5;
    width: 100%;
    min-width: 100px;
    height: 100%;
    min-height: 100px;
    text-align: center;
    background-color: white;
    opacity: .85;
}

.loadingAnim .loading .anim {
    display: block;
    position: absolute;
    left: 50%;
    top: 40%;
    width: 48px;
    height: 48px;
    margin-top: -24px;
    margin-left: -24px;
    background: white url(loadingAnim.gif) no-repeat center center;
    opacity: .7;
} 
```

然后使用modernizr 提供的类添加带有SMIL 的SVG（如果支持）。

```
.smil .loadingAnim .loading .anim {
    background-image: url(loadingAnim.svg);
    background-size: 100% 100%;
    opacity: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T04:04:33.800

无法使用媒体查询来定位 IE10。媒体查询不是为了解决特殊浏览器构建的问题。
但是你可以 - 尽管我建议找到一个完整的其他解决方案 - 可能会去添加一个特殊的类来定位 IE10，然后在你的样式表中`<html>`去寻找`.ie10 {}`特定的规则，正如用户在这里描述的
[那样我如何只定位 Internet Explorer 10对于某些情况，例如特定于 Internet Explorer 的 CSS 或特定于 Internet Explorer 的 JavaScript 代码？](https://stackoverflow.com/questions/9900311/how-do-i-target-only-internet-explorer-10-for-certain-situations-like-internet-e#comment18903962_9900311)

# mysql - MySQL如何仅选择值包含字符串的列

> ID：16220141
> 
> 赞同：1
> 
> 时间：2013-04-25T16:32:44.233
> 
> 标签：mysql

我做了一些搜索，从 stackexchange 上已经发布的一个问题中，答案是不可能的，但我想问。我不知道是否可以形成一个 SELECT 查询来动态选择哪些列将显示在 mysql SELECT 语句结果中。例子：

假设我有此表的列名 Person、ID、Phone Number、Alt Number：

`John | 79 | 800-499-0000 | 800-499-5555`

我想形成一个 SELECT 语句，以便它只会下拉字符串“800-499”在字段中某处的列。因此，理想情况下 MySQL 的结果是：

`800-499-0000 | 800-499-5555`

唯一的问题是我认为动态选择列是不可能的。

任何帮助或确认表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:43:19.830

您*可以*尝试以下方法：

```
select * from
(select concat(case when col1 like '%800-499-0000%' then concat('col1: ',col1,';') end,
               case when col2 like '%800-499-0000%' then concat('col2: ',col1,';') end,
 ...
               case when coln like '%800-499-0000%' then concat('coln: ',coln,';') end)
        as search_results
 from my_table) sq
where search_results is not null 
```

# r - R读取具有时间戳的CSV文件

> ID：16220144
> 
> 赞同：3
> 
> 时间：2013-04-25T16:33:09.490
> 
> 标签：r, timestamp

我有一个 csvfile，它有一个时间戳列作为字符串

```
15,1035,4530,3502,2,892,482,0,20060108081608,2,N
15,1034,7828,3501,3,263,256,0,20071124175519,3,N
15,1035,7832,4530,2,1974,1082,0,20071124193818,7,N
15,2346,8381,8155,3,2684,649,0,20080207131002,9,N 
```

我使用 read.csv 选项，但问题是一旦我完成导入，数据列看起来像：

```
1       15     1035   4530          3502       2        892   482       0 2.006011e+13          2          N
2       15     1034   7828          3501       3        263   256       0 2.007112e+13          3          N
3       15     1035   7832          4530       2       1974  1082       0 2.007112e+13          7          N
4       15     2346   8381          8155       3       2684   649       0 2.008021e+13          9          N 
```

是否可以在读取字符串时从字符串中删除日期（csv 文件确实有标题：在此处删除以保持数据匿名）。如果我们不能在读取时剥离，那么最好的剥离方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:51:12.777

这里有2种方法：

使用`zoo`包。个人比较喜欢这个。我将您的数据作为时间序列处理。

```
library(zoo)

read.zoo(text='15,1035,4530,3502,2,892,482,0,20060108081608,2,N
15,1034,7828,3501,3,263,256,0,20071124175519,3,N
15,1035,7832,4530,2,1974,1082,0,20071124193818,7,N
15,2346,8381,8155,3,2684,649,0,20080207131002,9,N',
         index=9,tz='',format='%Y%m%d%H%M%S',sep=',')

                   V1 V2   V3   V4   V5 V6   V7   V8 V10 V11
2006-01-08 08:16:08 15 1035 4530 3502 2   892  482 0  2   N  
2007-11-24 17:55:19 15 1034 7828 3501 3   263  256 0  3   N  
2007-11-24 19:38:18 15 1035 7832 4530 2  1974 1082 0  7   N  
2008-02-07 13:10:02 15 2346 8381 8155 3  2684  649 0  9   N 
```

使用`colClasses`参数 in `read.table`，如评论中所述：

```
dat <- read.table(text='15,1035,4530,3502,2,892,482,0,20060108081608,2,N
15,1034,7828,3501,3,263,256,0,20071124175519,3,N
15,1035,7832,4530,2,1974,1082,0,20071124193818,7,N
15,2346,8381,8155,3,2684,649,0,20080207131002,9,N',
           colClasses=c(rep('numeric',8),
                        'character','numeric','character')
                        ,sep=',')

strptime(dat$V9,'%Y%m%d%H%M%S')

1] "2006-01-08 08:16:08" "2007-11-24 17:55:19" 
  "2007-11-24 19:38:18" "2008-02-07 13:10:02" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:54:47.053

正如里卡多所说，您可以使用`read.csv`. 在这种情况下，我建议将这些作为字符导入，一旦加载了 csv，将它们转换为带有`strptime()`.

例如：

```
test <- '20080207131002'
strptime(x = test, format = "%Y%m%d%H%M%S") 
```

它将返回一个带有日期/时间信息的 POSIXlt 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-14T17:30:49.267

您可以使用 lubridate 包

```
test <- '20080207131002'
lubridate::as_datetime(test) 
```

还可以根据您的需要为每种情况指定格式

# c# - .NET 单一与多播委托

> ID：16220151
> 
> 赞同：1
> 
> 时间：2013-04-25T16:33:27.267
> 
> 标签：c#, delegates

我一直在深入阅读有关委托的内容，令人困惑的是，具有一种方法的委托可能与多播委托不同。但是，通过反射，您可以清楚地看到，即使只有一个方法，委托确实是从 派生的`MulticastDelegate`，而不是*立即*从`Delegate`对象派生的。

```
class Program 
{
    public delegate void MyDelegate();

    static void SomeMethod()
    {
    }

    static void Main(string[] args)
    {
        MyDelegate del = null;
        del = new MyDelegate(SomeMethod);
        Console.WriteLine(del.GetType().BaseType.Name);            
        Console.ReadKey();
    }
} 
```

输出：`MulticastDelegate`

我意识到 a`MulticastDelegate`包含`Delegate`对象的调用列表。我想知道是否可以`Delegate`直接创建一个，以及这样做是否有任何好处，除了单独调用`GetInvocationList()`和提取`Delegate`对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T16:38:21.510

并不真地。所有 .NET 委托都派生自`MulticastDelegate`. 最初编写 .NET 时，最初存在单播和多播之间的区别，但这种区别在发布之前就被删除了。但是，基础类型并未合并为一个。

您不能`Delegate`直接在 C# 中派生。您可能可以在原始 IL 中使用，但实际上并没有多大意义，因为 a 的`MulticastDelegate`操作就像对所有意图和目的的单播委托一样。

# ios - UITableView 部分条件不起作用

> ID：16220154
> 
> 赞同：0
> 
> 时间：2013-04-25T16:33:41.950
> 
> 标签：ios, uitableview

我的表格视图中有一个非常奇怪的问题。
我为表格视图使用不同的部分，每个部分都有不同的行数。我在表格视图的单元格中有一些文本字段。问题是，当我向下滚动表格视图时，第一节文本字段的第一个单元格和最后一节第一行文本字段相互重叠。当我向上滚动表格视图时，也会发生同样的事情。

```
static NSString *cellIdetifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdetifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdetifier];
    }
    cell.detailTextLabel.textColor = [UIColor blackColor];

    if(indexPath.section == 0)
    {
        if(indexPath.row == 0)
        {
            titleAdded = 1;
            self.nameView.backgroundColor = [UIColor clearColor];
            self.eventName.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
            [cell addSubview:self.nameView];
        }
        else if (indexPath.row == 1)
        {
            NSLog(@"in section 0");
            self.locationView.backgroundColor = [UIColor clearColor];
            self.locationField.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
            [cell addSubview:self.locationView];
        }
    }
    else if (indexPath.section == 1)
    {
        if(indexPath.row == 0)
        {
            cell.textLabel.text = NSLocalizedString(@"Starts", @"");
            if(self.selectedDate != nil)
            {
                NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
                //[formatter setDateFormat:@"yyyy-mm-dd"];
                [formatter setDateStyle:NSDateFormatterFullStyle];

                NSString *stringFromDate = [formatter stringFromDate:self.selectedDate];

                cell.detailTextLabel.text = stringFromDate;
            }
        }
        else if(indexPath.row == 1)
        {
            cell.textLabel.text = NSLocalizedString(@"Ends", @"");
            if(self.selectedDate != nil)
            {
                NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
                //[formatter setDateFormat:@"yyyy-mm-dd"];
                [formatter setTimeStyle:NSDateFormatterShortStyle];

                NSString *stringFromDate = [formatter stringFromDate:self.selectedTime];

                cell.detailTextLabel.text = stringFromDate;
            }
        }

    }
    else if (indexPath.section == 2)
    {
        if(indexPath.row == 0)
        {
            cell.textLabel.text = NSLocalizedString(@"Repeat",@"");
            cell.detailTextLabel.text = NSLocalizedString(@"Never", @"");
        }
    }
    else if (indexPath.section == 3)
    {
        if(indexPath.row == 0)
        {
            cell.textLabel.text = NSLocalizedString(@"Alert", @"");
            if(![[[NSUserDefaults standardUserDefaults] valueForKey:@"ringtone"] isEqualToString:@""] && [[NSUserDefaults standardUserDefaults] valueForKey:@"ringtone"] != nil)
            {
                cell.detailTextLabel.text = [[NSUserDefaults standardUserDefaults] valueForKey:@"ringtone"];
            }
            else
            {
                cell.detailTextLabel.text = NSLocalizedString(@"None", @"");
            }
        }
    }
     else if (indexPath.section == 4)
     {
         if(indexPath.row == 0)
         {
             cell.textLabel.text = NSLocalizedString(@"Calendar", @"");
             cell.detailTextLabel.text = NSLocalizedString(@"Home", @"");
         }
     }
    else if(indexPath.section == 5 && indexPath.section != 0)
    {
        if(indexPath.row == 0)
        {
            self.urlView.backgroundColor = [UIColor clearColor];
            self.urlField.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
            [cell addSubview:self.urlView];
        }
    } 
```

这是我的`cellforRowatIndexPath`
任何解决方法的代码。我已经对其进行了调试，当它出现在第 5 节 if 语句时，它找不到节值，它直接跳到 if 语句中。然后问题就出现了。我还检查了它是否为零但没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:37:36.947

问题是您对每种类型的单元格都使用相同的重用单元格（或同一批重用单元格），并且每次重用子视图时都添加子视图，然后再将其删除。您应该为每种类型的单元格使用不同的单元格标识符，并且只在初始化时添加子视图。

编辑：另外，您应该将子视图添加到单元格的 contentView，而不是直接添加到它。

你放的任何地方`[cell addSubview:whatever]`，替换为`[cell.contentView addSubview:whatever]`

根据马特对此答案的第一条评论，这是一种快速而肮脏的实现方式：

为了删除一个单元格的所有子视图：

```
for (UIView *view in cell.contentView.subviews) 
{
    [view removeFromSuperview];
} 
```

把它放在代码中这一行之前

```
cell.detailTextLabel.textColor = [UIColor blackColor]; 
```

请记住，此解决方案在包含许多单元格的表格中效果不佳。您应该真正将每个单元格拆分为自己的类型，也许您可​​以通过使用它们的`tag`属性来跟踪任何自定义子视图。

# java - 如何限制可以检查的复选框数量？

> ID：16220156
> 
> 赞同：0
> 
> 时间：2013-04-25T16:33:46.183
> 
> 标签：java, android

我有 4 个复选框。我希望用户只选择其中两个。如何设置这个限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T16:40:09.343

您可以轻松地拥有一个`int`变量来存储当前选中了多少个复选框...然后在任何时候`onCheckedChanged()`调用，您检查该变量，如果它已经是第三个要检查的复选框，您只需再次将其设置为未选中...

假设您从未选中所有复选框开始。所以你也是：

```
int numberOfCheckboxesChecked = 0; 
```

然后你设置`OnCheckChangedListener`：

```
checkbox1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked && numberOfCheckboxesChecked >= 2) {
            checkbox1.setChecked(false);
        } else {
            // the checkbox either got unchecked
            // or there are less than 2 other checkboxes checked
            // change your counter accordingly
            if (isChecked) {
                numberOfCheckboxesChecked++;
            } else {
                numberOfCheckboxesChecked--;
            }

            // now everything is fine and you can do whatever
            // checking the checkbox should do here
        }
    }
}); 
```

（我没有测试过代码，但它应该可以工作。）

# unix - Unix for 循环，提示输入值。将值读入 ArrayVar[i]

> ID：16220158
> 
> 赞同：0
> 
> 时间：2013-04-25T16:33:57.010
> 
> 标签：unix, loops, if-statement, while-loop, nested

我正在尝试在 while 循环中执行嵌套的 if 语句。我得到一个意外的“文件结尾”。

```
while :
do
  if [ "$CHOICE" != "x" -o "$CHOICE != "X" ]
  then
    echo "Enter two whole numbers seperated by a space ex:1 123"
    read Num1 Num2
    if echo "$Num1$Num2" | egrep '^[0-9]+$' 2>/dev/null
    then
      # Num1 and Num 2 are INTS
      break
    else
      break
    fi
  else
    # One of the numbers is not an INT
    printf 'Error: You did not enter two whole numbers, Try Again.\n\n'
    continue
  fi
done
echo "$Num1 $Num2" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:35:27.647

```
如果 [ "$CHOICE" != "x" -o "$CHOICE != "X" ]
                                 ^
                                /
       缺少结束引号---

```

# magento - 在新帐户注册中添加条款和条件

> ID：16220163
> 
> 赞同：0
> 
> 时间：2013-04-25T16:34:12.687
> 
> 标签：magento, magento-1.7

当用户创建新帐户时，如何添加条款和条件的复选框和内容。

我们所说的文件是 register.phtml

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-04T03:52:49.330

```
<li class="control">
         <div class="input-box">
           <input type="checkbox" id="privacy_policy" name="privacy_policy" value="1" title="<?php echo $this->__('Accept the privacy policy') ?>" class="checkbox required-entry">
         </div>
        <label for="is_subscribed"><?php echo $this->__('Accept the privacy policy') ?> (<a href="<?php echo Mage::helper('cms/page')->getPageUrl( 6 ) ?>"><?php echo $this->__('privacy policy'); ?></a>)</label>
    </li> 
```

这很好用，谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-27T11:51:30.743

我的注册页面解决方案：

```
 <li class="control">
         <div class="input-box">
           <input type="checkbox" id="privacy_policy" name="privacy_policy" value="1" title="<?php echo $this->__('Accept the privacy policy') ?>" class="checkbox required-entry">
         </div>
        <label for="is_subscribed"><?php echo $this->__('Accept the privacy policy') ?> (<a href="<?php echo Mage::helper('cms/page')->getPageUrl( 6 ) ?>"><?php echo $this->__('privacy policy'); ?></a>)</label>
    </li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:22:54.167

我将它添加到 register.phtml 中并且工作正常。

```
<input type="checkbox" id="something" name="something" value="1" title="something" class="checkbox required-entry"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T17:20:24.440

为条款和条件创建一个 CMS 页面，然后将其包含在 register.phtml 中。

```
echo $this->getLayout()->createBlock('cms/block')->setBlockId('my-new-block')->toHtml(); 
```

# php - 多语言网站 - 重定向

> ID：16220168
> 
> 赞同：1
> 
> 时间：2013-04-25T16:34:42.280
> 
> 标签：php, multilingual

我正在尝试实现基于语言的重定向。我们的网站有不同语言的子域，即 es.domain.com // de.domain.com 等。我想做的是在所有页面上包含以下代码

```
<?php   

    $lng = array( 'en'=>'www', 'de'=>'de'); // more languages
    $defaultLang = 'en'; // Index of the default (and fallback) language
    $cookieName = "_dmLang"; // Set up the cookie name

    $lang = trim(substr($_GET['lang'], 0, 2));

    if (empty($lang)) $lang = trim($_COOKIE[$cookieName]);

    if (empty($lang)) $lang = trim(substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2));

    if (empty($lang) || empty($lng[$lang])) $lang = $defaultLang;

    setcookie($cookieName, $lang, time()+3600*24*30);
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: http://".$lng[$lang].".domain.com" . $_SERVER['REQUEST_URI']);

?> 
```

调用 /?lang=de 时语言会改变

使用此代码时是否有任何服务器/负载影响？有没有更好的方法来实现这一点？

# macos - 创建 gist 失败：403 Forbidden

> ID：16220170
> 
> 赞同：0
> 
> 时间：2013-04-25T16:34:46.060
> 
> 标签：macos, git, github, gist

这是我在尝试创建新要点时收到的错误消息。

> 创建 gist 失败：403 Forbidden

我已按照建议设置了 GITHUB_USER 和 GITHUB_PASSWORD 并尝试设置环境变量 HTTP_PROXY 但随后收到此错误：

> System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/uri/generic.rb:195:in `initialize': the scheme http does not accept registry part: host:port (or bad hostname?) (URI::InvalidURIError) from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/uri/http.rb:78:in`initialize'来自/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr /lib/ruby/1.8/uri/common.rb:488:in `new' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/uri/common.rb:488:in`parse' 来自 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/uri/common.rb:608：在来自 /usr/local/bin/gist:1130 的“URI”中

似乎找不到与这两个错误有关的任何支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T08:03:23.997

从 Github 获得 403 响应的原因可能有很多，无论是在现有工具中还是在您自己的代码中，例如：

*   API 请求中未设置 User-Agent ( [http://developer.github.com/changes/2013-04-24-user-agent-required](http://developer.github.com/changes/2013-04-24-user-agent-required) )
*   您（代码或工具）超出 API 请求限制（不确定是否是您的情况，但通常限制足够高）

# asp.net - 正在从不安全的类中读取 web.config？

> ID：16220171
> 
> 赞同：0
> 
> 时间：2013-04-25T16:34:48.803
> 
> 标签：asp.net, webforms

我想要一种无需每次都查找设置的方法，所以我制作了这个简单的类。前任：

```
public class CustomConfigSettings
{
    public CustomConfigSettings()
    {
        // Default constructor.
    }

    public string MySetting
    {
        get { return ConfigurationManager.AppSettings["mySetting"]; }
    }
} 
```

它工作正常，但感觉它可能不安全（由于某种原因，我无法确定）。希望有关于安全问题的反馈（如果有的话）以及任何可能的替代方案。（网络表单；.net 3.5）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:41:56.573

这本身并不是不安全的。安全性取决于谁将访问您的类，以及该类是否允许更改配置，然后如果有人访问您的代码，他可以更改设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:44:00.113

我看不出有什么理由认为从类中读取 AppSettings 比直接从代码中读取它们更安全。您正在使用正确的调用和语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T20:12:27.503

您的代码没有问题。

无论如何，您可以将函数设为静态，它看起来会更好，并且不需要创建新实例。

# php - php curl：SSL_VERIFYPEER 选项无效

> ID：16220172
> 
> 赞同：14
> 
> 时间：2013-04-25T16:34:51.377
> 
> 标签：php, curl, ssl

我有这段代码可以使用 curl 启动查询：

```
function curl_query($full_url, $username, $password, $payload) {
    $additionalHeaders = "";
    $process = curl_init($full_url);
    curl_setopt($process, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded', $additionalHeaders));
    curl_setopt($process, CURLOPT_HEADER, 0);
    curl_setopt($process, CURLOPT_USERPWD, $username . ":" . $password);
    curl_setopt($process, CURLOPT_TIMEOUT, 30);
    curl_setopt($process, CURLOPT_POST, 1);
    curl_setopt($process, CURLOPT_POSTFIELDS, $payload);
    curl_setopt($process, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($process, CURLOPT_MAXREDIRS, 4);
    curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($process, CURLOPT_SSL_VERIFYPEER, FALSE);
    $return = curl_exec($process);
    if ($return === false) {
        error_log("CURL error ".curl_error($process));
    }
    return $return;
} 
```

选项 CURLOPT_SSL_VERIFYPEER 设置为 false，因此我可以读取带有自签名证书的页面。但是，当我针对 https URL 执行此代码时，出现错误：

```
CURL error SSL: certificate subject name 'localhost' does not match target host name '192.168.1.1', 
```

我在安装了 php53 软件包的 CentOS 5 服务器上运行此代码。

提前致谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-25T16:38:30.573

添加选项[`CURLOPT_SSL_VERIFYHOST`](http://php.net/manual/de/function.curl-setopt.php)

```
curl_setopt($process, CURLOPT_SSL_VERIFYHOST, FALSE); 
```

我意识到，PHP 文档的英文版缺少以下重要信息：

*（翻译自 PHP 手册的德文版）*

> 如果 CURLOPT_SSL_VERIFYPEER 已停用，则 CURLOPT_SSL_VERIFYHOST 必须设置为 true 或 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-10T16:59:01.237

```
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($process,CURLOPT_SSL_VERIFYHOST, FALSE); 
```

将此添加到行会有所帮助

# java - 提交多个表单后的响应

> ID：16220173
> 
> 赞同：1
> 
> 时间：2013-04-25T16:34:55.390
> 
> 标签：java, jsp, servlets, scriptlet

我正在尝试实现一个同步令牌并且它有效，但是我想忽略最后一个请求（或第一个请求之后的其他请求）。例如：如果我不放request.getResquestDispatcher() 或response.sendRedirect，这些其他请求将进入空白页面（nullPointer，因为没有命令）。此外，一切正常的第一个请求不会向用户发送一切正常的消息。

这就是我的做法。

```
@Override
  public void executa(HttpServletRequest request, HttpServletResponse response)
{
HttpSession session = request.getSession();

Object attribute = session.getAttribute("formToken");
System.out.println(attribute);

if (!request.getParameter("tokenHidden").equals(attribute.toString()))
{       
    return;
}
session.setAttribute("formToken", 1);
}
//some stuff...
response.sendRedirect("coletarproduto.jsp?mensagem=Produto Atualizado"); 
```

我以这种方式处理同步器令牌：

```
<form action="wms" method="post">   
<% session.setAttribute("formToken",Math.random()); %>
<input type="hidden" value="${formToken}" name="tokenHidden" /> 
</form> 
```

我不喜欢使用 scriptlet，但我也想不出其他解决方案。

我正在使用Tomcat和jsp。谢谢。

# haskell - 为什么我可以写第一个版本而不能写第二个版本？

> ID：16220174
> 
> 赞同：1
> 
> 时间：2013-04-25T16:34:59.173
> 
> 标签：haskell

我们正在尝试学习 Haskell（大约是第 5 次！），但仍在努力解决一些基本问题。

那我怎么会写

```
main = print (map (* 2) [1..5]) 
```

但我不会写

```
myfunc x =
   map ( (+ x) [1..5])

main = print (myfunc 2) 
```

任何指导将不胜感激——我们有普通的书，但它们并没有真正的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T16:36:58.277

你把括号弄错了。你要：

```
myfunc x = map (+x) [1..5] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T16:42:36.667

希望消除任何引起这一点的误解：在 Haskell 中，函数应用程序是*左关联的*，比任何中缀运算符都具有更高的“优先级”，并且不需要任何括号。括号仅用于分组子表达式：`(f x) y`与 just 相同`f x y`，而`f (g x)`需要括号。

# php - 多维 XML 解析：使用 PHP 获取值

> ID：16220175
> 
> 赞同：0
> 
> 时间：2013-04-25T16:34:59.907
> 
> 标签：php, xml-parsing

解析 XML 后的 var_dump 结果为

```
array(2) {
  ["link"]=>
  object(SimpleXMLElement)#3 (1) {
    [0]=>
    string(24) "http://www.domain.com"
  }
  ["items"]=>
  array(10) {
    [0]=>
    object(SimpleXMLElement)#4 (9) {
      ["title"]=>
      string(32) "The Car Pro Show 4-20-13  Hour 1"
      ["link"]=>
      string(131) "http://www.domain.com/the-car-pro-show-4-20-13-hour-1?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-20-13-hour-1"
      ["comments"]=>
      string(65) "http://www.domain.com/the-car-pro-show-4-20-13-hour-1#comments"
      ["pubDate"]=>
      string(31) "Sat, 20 Apr 2013 19:47:08 +0000"
      ["category"]=>
      object(SimpleXMLElement)#2 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=11118"
      ["description"]=>
      string(89) "&#8230; Read moreThe post The Car Pro Show 4-20-13  Hour 1 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#14 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(68) "http://www.domain.com/wp-content/uploads/2013/04/42013-Hour-1.mp3"
          ["length"]=>
          string(8) "37202230"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "4 days ago"
    }
    [1]=>
    object(SimpleXMLElement)#5 (9) {
      ["title"]=>
      string(32) "The Car Pro Show 4-20-13  Hour 2"
      ["link"]=>
      string(131) "http://www.domain.com/the-car-pro-show-4-20-13-hour-2?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-20-13-hour-2"
      ["comments"]=>
      string(65) "http://www.domain.com/the-car-pro-show-4-20-13-hour-2#comments"
      ["pubDate"]=>
      string(31) "Sat, 20 Apr 2013 19:45:46 +0000"
      ["category"]=>
      object(SimpleXMLElement)#14 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=11116"
      ["description"]=>
      string(89) "&#8230; Read moreThe post The Car Pro Show 4-20-13  Hour 2 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#2 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(68) "http://www.domain.com/wp-content/uploads/2013/04/42013-Hour-2.mp3"
          ["length"]=>
          string(8) "37151773"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "4 days ago"
    }
    [2]=>
    object(SimpleXMLElement)#6 (9) {
      ["title"]=>
      string(32) "The Car Pro Show 4-20-13  Hour 3"
      ["link"]=>
      string(131) "http://www.domain.com/the-car-pro-show-4-20-13-hour-3?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-20-13-hour-3"
      ["comments"]=>
      string(65) "http://www.domain.com/the-car-pro-show-4-20-13-hour-3#comments"
      ["pubDate"]=>
      string(31) "Sat, 20 Apr 2013 19:44:28 +0000"
      ["category"]=>
      object(SimpleXMLElement)#2 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=11114"
      ["description"]=>
      string(89) "&#8230; Read moreThe post The Car Pro Show 4-20-13  Hour 3 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#14 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(68) "http://www.domain.com/wp-content/uploads/2013/04/42013-Hour-3.mp3"
          ["length"]=>
          string(8) "37135093"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "4 days ago"
    }
    [3]=>
    object(SimpleXMLElement)#7 (9) {
      ["title"]=>
      string(37) "The Car Pro Show 4-20-13 Network Feed"
      ["link"]=>
      string(143) "http://www.domain.com/the-car-pro-show-4-20-13-network-feed?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-20-13-network-feed"
      ["comments"]=>
      string(71) "http://www.domain.com/the-car-pro-show-4-20-13-network-feed#comments"
      ["pubDate"]=>
      string(31) "Sat, 20 Apr 2013 19:27:54 +0000"
      ["category"]=>
      object(SimpleXMLElement)#14 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=11109"
      ["description"]=>
      string(94) "&#8230; Read moreThe post The Car Pro Show 4-20-13 Network Feed appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#2 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(61) "http://www.domain.com/wp-content/uploads/2013/04/42013.mp3"
          ["length"]=>
          string(8) "84805120"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "4 days ago"
    }
    [4]=>
    object(SimpleXMLElement)#8 (9) {
      ["title"]=>
      string(32) "The Car Pro Show 4-13-13  Hour 1"
      ["link"]=>
      string(131) "http://www.domain.com/the-car-pro-show-4-13-13-hour-1?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-13-13-hour-1"
      ["comments"]=>
      string(65) "http://www.domain.com/the-car-pro-show-4-13-13-hour-1#comments"
      ["pubDate"]=>
      string(31) "Sat, 13 Apr 2013 19:48:44 +0000"
      ["category"]=>
      object(SimpleXMLElement)#2 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=10968"
      ["description"]=>
      string(89) "&#8230; Read moreThe post The Car Pro Show 4-13-13  Hour 1 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#14 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(68) "http://www.domain.com/wp-content/uploads/2013/04/41313-Hour-1.mp3"
          ["length"]=>
          string(8) "37394467"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "1 week ago"
    }
    [5]=>
    object(SimpleXMLElement)#9 (9) {
      ["title"]=>
      string(32) "The Car Pro Show 4-13-13  Hour 2"
      ["link"]=>
      string(131) "http://www.domain.com/the-car-pro-show-4-13-13-hour-2?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-13-13-hour-2"
      ["comments"]=>
      string(65) "http://www.domain.com/the-car-pro-show-4-13-13-hour-2#comments"
      ["pubDate"]=>
      string(31) "Sat, 13 Apr 2013 19:47:18 +0000"
      ["category"]=>
      object(SimpleXMLElement)#14 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=10966"
      ["description"]=>
      string(89) "&#8230; Read moreThe post The Car Pro Show 4-13-13  Hour 2 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#2 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(68) "http://www.domain.com/wp-content/uploads/2013/04/41313-Hour-2.mp3"
          ["length"]=>
          string(8) "37177627"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "1 week ago"
    }
    [6]=>
    object(SimpleXMLElement)#10 (9) {
      ["title"]=>
      string(32) "The Car Pro Show 4-13-13  Hour 3"
      ["link"]=>
      string(131) "http://www.domain.com/the-car-pro-show-4-13-13-hour-3?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-4-13-13-hour-3"
      ["comments"]=>
      string(65) "http://www.domain.com/the-car-pro-show-4-13-13-hour-3#comments"
      ["pubDate"]=>
      string(31) "Sat, 13 Apr 2013 19:45:55 +0000"
      ["category"]=>
      object(SimpleXMLElement)#2 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=10964"
      ["description"]=>
      string(89) "&#8230; Read moreThe post The Car Pro Show 4-13-13  Hour 3 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#14 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(68) "http://www.domain.com/wp-content/uploads/2013/04/41313-Hour-3.mp3"
          ["length"]=>
          string(8) "36899488"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "1 week ago"
    }
    [7]=>
    object(SimpleXMLElement)#11 (9) {
      ["title"]=>
      string(38) "The Car Pro Show Network Feed  4-13-13"
      ["link"]=>
      string(143) "http://www.domain.com/the-car-pro-show-network-feed-4-13-13?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-network-feed-4-13-13"
      ["comments"]=>
      string(71) "http://www.domain.com/the-car-pro-show-network-feed-4-13-13#comments"
      ["pubDate"]=>
      string(31) "Sat, 13 Apr 2013 19:17:07 +0000"
      ["category"]=>
      object(SimpleXMLElement)#14 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=10958"
      ["description"]=>
      string(95) "&#8230; Read moreThe post The Car Pro Show Network Feed  4-13-13 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#2 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(61) "http://www.domain.com/wp-content/uploads/2013/04/41313.mp3"
          ["length"]=>
          string(8) "83924992"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(10) "1 week ago"
    }
    [8]=>
    object(SimpleXMLElement)#12 (9) {
      ["title"]=>
      string(31) "The Car Pro Show Hour 1  4-6-13"
      ["link"]=>
      string(129) "http://www.domain.com/the-car-pro-show-hour-1-4-6-13?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-hour-1-4-6-13"
      ["comments"]=>
      string(64) "http://www.domain.com/the-car-pro-show-hour-1-4-6-13#comments"
      ["pubDate"]=>
      string(31) "Sat, 06 Apr 2013 19:45:57 +0000"
      ["category"]=>
      object(SimpleXMLElement)#2 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=10824"
      ["description"]=>
      string(88) "&#8230; Read moreThe post The Car Pro Show Hour 1  4-6-13 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#14 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(67) "http://www.domain.com/wp-content/uploads/2013/04/4613-Hour-1.mp3"
          ["length"]=>
          string(8) "37239760"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(11) "2 weeks ago"
    }
    [9]=>
    object(SimpleXMLElement)#13 (9) {
      ["title"]=>
      string(31) "The Car Pro Show Hour 2  4-6-13"
      ["link"]=>
      string(129) "http://www.domain.com/the-car-pro-show-hour-2-4-6-13?utm_source=rss&utm_medium=rss&utm_campaign=the-car-pro-show-hour-2-4-6-13"
      ["comments"]=>
      string(64) "http://www.domain.com/the-car-pro-show-hour-2-4-6-13#comments"
      ["pubDate"]=>
      string(31) "Sat, 06 Apr 2013 19:44:42 +0000"
      ["category"]=>
      object(SimpleXMLElement)#14 (0) {
      }
      ["guid"]=>
      string(33) "http://www.domain.com/?p=10822"
      ["description"]=>
      string(88) "&#8230; Read moreThe post The Car Pro Show Hour 2  4-6-13 appeared first on Car Pro USA."
      ["enclosure"]=>
      object(SimpleXMLElement)#2 (1) {
        ["@attributes"]=>
        array(3) {
          ["url"]=>
          string(67) "http://www.domain.com/wp-content/uploads/2013/04/4613-Hour-2.mp3"
          ["length"]=>
          string(8) "37202647"
          ["type"]=>
          string(10) "audio/mpeg"
        }
      }
      ["updated"]=>
      string(11) "2 weeks ago"
    }
  }
} 
```

我想获取值，例如标题、日期和 URL。我可以轻松检索标题和日期，PHP 代码是：

```
<?php foreach($entries['items'] as $entry)  { ?>
Title: <?php echo $entry->title; ?>
Date: <?php echo date("M d Y",strtotime($entry->pubDate)); ?>
URL: <?php echo $entry->url ?>
<?php } ?> 
```

但是我无法在这里获取**URL**的值，我该如何获取呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:37:55.320

您可以使用`attributes()`方法获得它。

```
$attrs = $entry->enclosure->attributes();
echo $attrs['url']; 
```

# javascript - 如果条件不适用于输入变量

> ID：16220176
> 
> 赞同：0
> 
> 时间：2013-04-25T16:35:13.157
> 
> 标签：javascript

我在 slideAC(data) 函数中遇到问题。

如果条件似乎在图片条件中有问题（数据[0] ==“图片”）

我已经尝试通过 alert(data[0]); 来提醒数据以测试输入值；

结果也是“图片”，我不知道有什么问题？

因为其他测试条件正常工作。

* * *

这是 extractData(data <-- array) 函数中的输入数据

（它已经通过使用 split("\n") 从其他函数中拆分出来）

```
slide
,- width 400
,- height 300
,- into #slide1
,- picture
,+[pic/001.png]
,+[pic/002.jpg]
,+[pic/003.jpg]
,+[pic/004.jpg]
, 
```

**代码的目的是从上面的文本中提取单词并生成一些代码。**

```
 function extractData(data){

    alert(data);
    var n = 0;
    var step1 = "";
    var step2 = "";
    var step3 = "";
    var step4 = "";
    var picture =[];
        //check '@' command by call the first line data
        if(data[0].indexOf("slide") !== -1){

            for(var i=1; i<data.length; i++){
//                alert(n);

                switch (n){
                    case 0:///////////////////////////////////////
//                    alert("case1");
                    //extract from '-'
                    if(data[i].indexOf('-') !== -1){
                        step1 = data[i].replace('-','');
                        step2 = step1.split(' ');
                        step3 = step2.slice(1,step2.length);
                        //slide Attribute Compiler
                        n = slideAC(step3);

                    }else{
                        alert("out");
                    }//end of if condition
                    break;

                    case 1:///////////////////////////////////////
//                    alert("case2");
                    //extract from '+'
                    if(data[i].indexOf('+') !== -1){
                        step1 = data[i].replace('+','');
                        step2 = step1.replace("[","");
                        step3 = step2.replace("]","");
                        picture.push(step3);
                        alert(step3);

                    }else if(data[i].indexOf('-') !== -1){
                        step1 = data[i].replace('-','');
                        step2 = step1.split(' ');
                        step3 = step2.slice(1,step2.length);
                        //slide Attribute Compiler
                        n = slideAC(step3);
                    }else{
                        //Error
//                        alert("wrong pic syntax");
//                        javascript_abort();
                    }//end of if condition
                    break;

                }//end of iswitch case

            }//end of item for loop

        }else if(data[0].indexOf("menu") !== -1){
            //Provision
        }else if(data[0].indexOf("form") !== -1){
            //Provision
        }else{
            javascript_abort();
        }//end of if condition

    }//end of syntaxCompiler

    //slide Attribute Compiler
    function slideAC(data){
//    alert(data[0]);

    var a = 0

            if(data[0] == "width"){
                var propWidth = data[1];
//                alert(data[0] + " : " + propWidth);
//                alert(typeof data);
                a = 0;
            }else if(data[0] == "height"){
                 var propHeight = data[1];
//                alert(data[0] + " : " + propHeight);
//                alert(typeof data);
                a = 0;
            }else if(data[0] == "into"){
                var propInto = data[1];
//                alert(data[0] + " : " + propInto);
//                alert(typeof data);
                a = 0;
            }else if(data[0] == "picture"){
                a = 1;
            }else{
                alert("why");
//                javascript_abort();
            }//end of if condition

        return a;

    }//end of slide attribute compiler 
```

你有什么建议吗？？请帮忙

我只希望 if 条件正常工作

提前致谢

PS。对不起，如果我的措辞让你感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:42:06.863

我猜单词周围可能有空格字符。很难说，因为您没有显示拆分结果的良好图片，或显示原始输入，以及您如何拆分它。

如果是这种情况，你可以修剪它。我用了一个`switch`语句而不是你的`if/else if/else`.

```
 // trim the string-------v
            switch(data[0].trim()) {
            case "width":
                var propWidth = data[1];
//                alert(data[0] + " : " + propWidth);
//                alert(typeof data);
                a = 0;
                break;
            case "height":
                 var propHeight = data[1];
//                alert(data[0] + " : " + propHeight);
//                alert(typeof data);
                a = 0;
                break;
            case "into":
                var propInto = data[1];
//                alert(data[0] + " : " + propInto);
//                alert(typeof data);
                a = 0;
                break;
            case "picture":
                a = 1;
                break;
            default:
                alert("why");
//                javascript_abort();
            } 
```

`.trim()`如果您支持旧浏览器，则需要该方法的补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:43:03.247

如果js说是假的，那就是！您应该在调试器中评估您的变量以查看发生了什么。如果使用 Chrome，只需调用调试器来中断和检查 vars 值。

[http://msdn.microsoft.com/en-us/library/ie/0bwt76sk(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/0bwt76sk(v=vs.94).aspx)

# java - 我的 java 代码有什么问题，因为它一直用默认答案回答？

> ID：16220179
> 
> 赞同：1
> 
> 时间：2013-04-25T16:35:26.010
> 
> 标签：java

有谁知道为什么当我运行这个 java 应用程序时，它不断出现默认值，而不是正确的答案？

主要代码如下：

```
import java.util.Scanner;

public class mainClass {
public static void main(String[] args){

    Scanner scanInt = new Scanner(System.in);
    Scanner scanString = new Scanner(System.in);

    System.out.println("Calculator");
    System.out.println("Enter 1st number:");
    int x = scanInt.nextInt();

    System.out.println("Enter opperation:");
    String op = scanString.nextLine();
    System.out.println(op);

    System.out.println("Enter 2nd number:");
    int y = scanInt.nextInt();

    String ans = "The answer is: ";

    if(op == "+"){
        System.out.println(ans + methods.addition(x, y));
    }else if(op == "-"){
        System.out.println(ans + methods.subtraction(x, y));
    }else if(op == "*"){
        System.out.println(ans + methods.multiplication(x, y));
    }else if(op == "/"){
        System.out.println(ans + methods.division(x, y));
    }else{
        System.out.println("UNKNOWN OPPORATOR");
    }
}
} 
```

方法类如下：

```
public class methods {
public static int subtraction(int x, int y){
    return x - y;
}
public static int addition(int x, int y){
    return x + y;
}
public static int multiplication(int x, int y){
    return x * y;
}
public static int division(int x, int y){
    return x / y;
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T16:36:48.570

您不能将字符串值与`==`运算符进行比较。运算符比较`==`两个对象引用以确定它们是否引用同一个对象。

要比较字符串值，请使用`String#equals`：

```
if("+".equals(op){ 
```

其他比较也是如此。

# javascript - 从 ERB 切换到 Angular 时，Rails 应用程序中的功能测试 AngularJS 视图会中断

> ID：16220185
> 
> 赞同：5
> 
> 时间：2013-04-25T16:35:54.270
> 
> 标签：javascript, ruby-on-rails, testing, angularjs, capybara

首先，我有一个工作的 rails 'show' 页面，显示项目名称和属于该项目的条目。当使用 angular $scope 显示项目名称并使用 ERB 中的块显示条目时，我的测试通过了。当我用角度指令“ng-repeat”替换条目 ERB 代码时，**只有**我的条目测试场景开始失败。有趣的是，该应用程序仍在浏览器中运行。请记住，在我看来，另一个 $scope 变量曾经并且仍然使用几乎相同的测试通过。

工作 show.html.erb（在 ERB 中查看的条目）：

```
<div ng-controller="ProjectCtrl">
  <h1>This is {{ project.details.name }}</h1>

  <h2>Entries</h2>
  <% @entries.each do |e| %>
  <ul>
    <li>
        <%= e.title %>
    </li>
    <li>
        <%= e.summary %>
    </li>
  </ul>
  <% end %>
</div> 
```

破坏 show.html.erb（在 Angular 中查看的条目）：

```
<div ng-controller="ProjectCtrl">
  <h1>This is {{ project.details.name }}</h1>

  <h2>Entries</h2>
  <ul ng-repeat=" e in project.entries ">
    <li>
        {{ e.title }}
    </li>
    <li>
        {{ e.summary }}
    </li>
  </ul>
</div> 
```

Angular 控制器，数据已替换为返回的 JSON。

```
@ProjectCtrl = ["$scope", "$http", ($scope, $http) ->
  $http.get().success (data) ->
    $scope.project = {"details":{"name":"Project1","author":"brian"},"updated_at":"2013-04-13T16:48:46.406Z","entries":[{"title":"Test Title","summary":"Summary Test"},{"title":"The Third Entry","summary":"Summary of Third Entry"}]}

] 
```

这是一个示例测试，之前有效，但在用 ng-repeat 替换 ERB 后失败：

```
scenario "Displays Entries Summary" do
  project = Project.create!(details: {name: "aproject"})
  Entry.create!(data: {summary: "Should Be Displayed"}, project_id: project.id)
  Entry.create!(data: {summary: "Should Not Be Displayed"})
  visit project_path(project.id)
  page.must_have_content "Should Be Displayed"
  page.wont_have_content "Should Not Be Displayed"
end 
```

我是否遗漏了什么，或者我是否必须改变我进行功能测试的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T22:39:49.120

为了完成这项工作，我将 Capybara 的 javascript 驱动程序设置为 poltergeist。这需要在我的集成测试中安装 phantomJS (>= 1.8.1) 并将 js 设置为 true。

这是过程：

安装 PhantomJS 1.9（显示 32 位操作系统方向的 ubuntu 12.10，相应调整）：

```
$ cd
$ wget https://phantomjs.googlecode.com/files/phantomjs-1.9.0-linux-i686.tar.bz2
$ tar jxvf https://phantomjs.googlecode.com/files/phantomjs-1.9.0-linux-i686.tar.bz2
$ sudo mv phantomjs-1.9.0-linux-i686.tar.bz2
$ phantomjs --version 
```

将 poltergeist 添加到 Gemfile 并捆绑安装：

```
group :test do
  gem 'poltergeist'
end 
```

在“test_helper.rb”文件或类似文件中：

```
require 'capybara/poltergeist'
Capybara.javascript_driver = :poltergeist 
```

在您的集成/功能测试中，请务必像这样包含“js: true”：

```
scenario "Your test with Angular.js views", js: true do
  # test is here
end

# OR

it "Your test with Angular.js views", js: true do
  # test is here
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:27:02.190

在您的控制器中，您正在设置 $scope.projects 因此在模板中变量“项目”应该可用。在您粘贴的模板代码中，您在“project.entries”（单数）上“ng-repeat”，除非您打错字或粘贴伪代码，否则这也无法在浏览器中工作。

我对 Rails 功能测试知之甚少，无法告诉您它会等待所有 JS 完成后再进行断言。Angular 中的路由变化呢？

我使用 Angular 的 JS 测试设置和 karma 和 Jasmine 来测试 Angular 页面。然后让 Jasmine 意识到 Angular 堆栈处于活动状态。

看看这篇文章：[http ://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html](http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html)

# cordova - 在 Blackberry Phonegap 应用程序中禁用过度滚动/反弹效果？

> ID：16220186
> 
> 赞同：5
> 
> 时间：2013-04-25T16:36:00.957
> 
> 标签：cordova, jquery-mobile, blackberry

我刚开始测试一个使用 phonegap 制作的 Blackberry 应用程序，并注意到当您滚动到顶部或底部时，该应用程序会过度滚动/具有弹跳效果。有没有办法阻止这种情况发生？看起来您可以使用它来防止在 iOS phonegap 应用程序中发生这种情况，黑莓应用程序是否有等效选项？

# python - 将 SQLAlchemy 继承关系重新映射到不同的 postgres 模式

> ID：16220187
> 
> 赞同：1
> 
> 时间：2013-04-25T16:36:03.363
> 
> 标签：python, postgresql, sqlalchemy, flask, flask-sqlalchemy

如果我在 SQLAlchemy 中有一个简单的基于连接的继承关系，我已经使用“SET search_path”在模式之间复制了，我如何同时访问它们以便在它们之间进行复制？

我已经看过[实体名称配方](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/EntityName)之类的东西，但在继承的情况下如何做到这一点还不是很清楚。我还查看了[select_from](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.select_from)，但不清楚如果在父类上指定了 with_polymorphic，子类将如何加载。

理想情况下，我想做的是遍历与公共模式相关联的类的一个版本，并生成它的副本作为与相关特定模式相关联的同一类的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:51:39.353

我最终决定使用搜索路径从公共模式中查询实例，然后在目标模式中创建新实例时重置搜索路径。我对这种方法的担忧是我必须评估此查询并将其转换为内存中的列表，以便我可以切换搜索路径然后创建子实例。

最好有两个类，每个类都映射到正确的模式，这样您就可以在创建子实例的同时迭代公共模式类。

# gcc - 是否可以构建 libstdc++ 并将其静态硬编码为给定的 GCC 版本？

> ID：16220188
> 
> 赞同：0
> 
> 时间：2013-04-25T16:36:19.503
> 
> 标签：gcc, libstdc++

我的主要问题是我有一个系统，其中官方支持的 GCC 版本是 4.6.2/4.6.3（这取决于你是否更新），它已经很旧了，我还需要一些新的 C++11 功能和所有较新的 GCC 版本的改进。

我想以以下方式构建 GCC：

*   它`libstdc++`包含在本地 GCC 安装中，我猜它类似于“便携式”安装。
*   GCC 不会在系统内部搜索替代方案`libstdc++`，只使用给定的内置`libstdc++`版本
*   即使我特别指定了`-I` `-L` `-B`一个替代文件夹，该文件夹恰好包含任何给定`libstdc++`版本的不同安装，GCC 也应该只忽略这个建议`libstdc++`

我编译 GCC 没有问题，但我不知道如何强制 GCC 表现得像我想要的那样，例如 GCC 4.7.2 构建总是在我的默认 GCC 4.6.3 安装中选择 libstdc++，这显然是我的不想要。

在构建 GCC 时这样做的正确标志是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:11:34.470

没有构建标志会强制执行此类行为。`-I`所有其他标志都不是建议，它们是绝对要求，永远不会被忽略。如果您足够勇敢地指定包含不同编译器版本的头文件或库的搜索路径（不可能偶然发生，因此您应该充分了解自己在做什么），那么您完全应该承担后果。

带有前缀的正常安装应该可以完成大部分所需的工作。配置`--prefix=/path/to/your/installation`，那么唯一要更改的就是默认的规范文件。添加一个`-rpath=/path/to/the/folder/where/your/libstdc++/sits`，你应该已经准备好了。specs 文件的语法在`man gcc`.

# jquery - jquery隐藏复选框和文本框，如果文本框有一个特定的文本

> ID：16220190
> 
> 赞同：1
> 
> 时间：2013-04-25T16:36:23.303
> 
> 标签：jquery, checkbox, textbox

我有这些输入：

```
<p class='zero'> <? echo $row['perigrafh10']?><input id='zeroin' type ='Text' value ='<? echo $row['poso10']?>' name='poso10'><input class='check' id='check' type='checkbox' <? if ($row['poso10_check'] >=1) {echo 'checked="checked"';}; ?> name='check_list[]' value='<? echo $row['poso10_check']?>' /></p>
<p class='zero'> <? echo $row['perigrafh11']?><input id='zeroin' type ='Text' value ='<? echo $row['poso11']?>' name='poso11'><input class='check' id='check' type='checkbox' <? if ($row['poso11_check'] >=1) {echo 'checked="checked"';}; ?> name='check_list[]' value='<? echo $row['poso11_check']?>' /></p>
.... 
```

如果文本框文本为 0.00，我想要实现的是隐藏文本框和复选框。

我可以使用此代码隐藏文本框而不会出现问题：

```
<script type="text/javascript">

 $('input:text').each(function(){
  if($(this).val() == 0.00){
   $(this).hide();
       }
    }
   );
 </script> 
```

但我也没有运气隐藏复选框。我需要什么代码？我已经做了几次测试，但找不到解决方案。我使用最新的 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:38:44.143

你想隐藏整个`<p>`元素

```
$(this).closest(".zero").hide(); 
```

# c++ - OpenGL位置向量

> ID：16220194
> 
> 赞同：0
> 
> 时间：2013-04-25T16:36:38.890
> 
> 标签：c++, opengl, coordinates

有没有办法让openGL程序中的对象有一个简单的x、y、z值，我可以直接或通过glTranslatef等编辑？我已经从文件中读取了模型，但我正在寻找一个简单的解决方案来为它们设置动画，并且在对象中拥有一个可以更新的 (x,y,z) 结构会非常方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:11:37.660

> 有没有办法得到一个对象...

OpenGL 中没有对象。你告诉 OpenGL 画什么，它就完成了。屏幕上的像素会发生变化，OpenGL 会忘记它。如果有任何变化，您必须重新绘制。

# api - 用于创建事件的最佳 API

> ID：16220195
> 
> 赞同：0
> 
> 时间：2013-04-25T16:36:39.510
> 
> 标签：api, facebook-events

我是 api 游戏的新手，我正在尝试为我的案例找出最佳起点。

我需要在网站上包含一项功能，以允许客户在自己的 Facebook 个人资料上创建 Facebook 活动并邀请他们的朋友。

哪个是最好的选择：web 或 opengraph？

**编辑：**我需要的另一个功能：使用客户的 Facebook 个人资料（OAUht??）感受个人数据的能力

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:48:01.633

我推荐使用 Facebook 的 Graph API 来创建事件。可以在[此处](https://developers.facebook.com/docs/reference/api/user/#events)找到有关如何代表用户创建事件的详细信息。注意：您需要向`create_event`您的用户请求许可，这会将我们带到 OAuth...

是的，您需要用户授权您的应用程序，以便它可以访问他们的个人数据。为此，您需要实现客户端 Facebook OAuth 流程。这涉及向用户显示一个 Facebook OAuth 对话框，该对话框描述您的应用程序以及它希望从他们那里获得哪些权限。为了使用您的应用程序，他们必须单击“允许”按钮来授权您的应用程序并返回您访问其 Facebook 帐户所需的访问令牌。可以在[此处](https://developers.facebook.com/docs/reference/dialogs/oauth/)找到详细信息（包括示例） 。

# mysql - mysql group by 组织结果

> ID：16220201
> 
> 赞同：0
> 
> 时间：2013-04-25T16:36:57.773
> 
> 标签：mysql, group-by

首先，我不知道我是否正确命名了这个问题，但我不知道如何正确调用它：/

我有这个查询：

```
SELECT COUNT( id ), jumper, `date` FROM demosdb WHERE jumperid = '1053' GROUP BY `date`
ORDER BY  `COUNT(id)` DESC 
```

基本上`demosdb`是：

```
id (int), jumperid (int), date (int (basically contains timestamp)) 
```

到目前为止，一切都很好。但是，某些记录之间存在细微差别（我使用自动脚本进行更新，有时它会设置时间 +/-5s，例如该查询的结果：

```
COUNT(id)   date
10  1318763642
10  1318763643
10  1318763639
9   1318763641
9   1318763637
8   1318763640
8   1366200434 
```

您可以看到第一行的时间几乎相同，但相差 5 秒（37 到 42）。100% 确定 +/-60s（甚至更多）是同一事物的一部分，所以我想基本上将所有不是`1234567890`but的时间戳分组`12345678%`。仅使用 mysql 是否可行，还是应该依赖 php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:42:47.527

SQL 中的分组完全依赖于相同的值，而不是接近或相似。您可能可以通过将`date/60`分钟块分组在一起来解决此问题，但是您仍然会遇到阈值问题（第 60 秒的某些内容与下一分钟的第一秒的某些内容位于不同的块中）。因此，我绝对建议在 PHP 中使用更智能的算法来执行此操作，比较所有行并在与前一个行的间隔超过 10 或 20 秒时关闭一个块。

话虽如此，您的查询被窃听了。当使用`GROUP BY`所有未分组的列时，应该有一个聚合函数（例如`max`或`avg`）来告诉 DBMS*如何*对它们进行分组。在您的情况下，您没有为 column 执行此操作`jumper`，因此它本质上将包含随机结果（尽管通常看起来合乎逻辑）。MySQL 是历史上唯一允许这样做的 DBMS，而在所有其他数据库服务器中它是一个致命的查询错误。MySQL 现在支持一种严格模式，它确实认为这是一个错误，你*绝对应该*假设这种行为在未来成为默认行为。因此，您现在应该更改它以防止将来中断。

像这样的东西会起作用：

```
$threshold = 60;
$results = [];
$block = 0;
while($row = mysql_fetch_object($query))
{
  if($row->date - $block > $threshold)
    $block = $row->date;
  $results[$block] += $row->count; 
} 
```

（请原谅我使用不推荐使用`mysql_`的命令，这是快速伪代码最简单的方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:43:30.303

您可以使用`ROUND`负舍入值来执行某些操作，该舍入值将舍入到小数点的左侧而不是右侧。例如，如果您使用，结果中的日期将如下所示`ROUND(date, -1)`：

```
date        round(date, -1)
----------  ---------------
1318763642  1318763640
1318763643  1318763640
1318763639  1318763640
1318763641  1318763640
1318763637  1318763640
1318763640  1318763640
1366200434  1366200430 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T10:24:43.883

接受附近突出显示的潜在缺陷，替代解决方案可能如下所示......

```
SELECT FLOOR(date/60)*60 dt
     , COUNT(DISTINCT jumperid) ttl 
  FROM jumpers 
 GROUP 
    BY dt; 
```

# c - 如何理解虚拟内存？

> ID：16220206
> 
> 赞同：1
> 
> 时间：2013-04-25T16:37:09.977
> 
> 标签：c, virtual-memory, mmu

如何理解句子

> 我们可以概括并允许每个数据对象具有多个独立的地址，每个地址都从不同的地址空间中选择。这就是虚拟内存的基本思想（《CSAPP》）

为什么数据对象没有唯一地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:47:22.327

虚拟内存通常用于在运行*多个*程序的计算机上简化编程。

如果您的计算机上运行了多个程序，它们每个都会看到一个适合其需求的虚拟内存地址空间。就该程序而言，生活很简单。他们可以在任何特定的地址使用任何他们想要的内存，并且他们不需要做任何努力来避免其他程序使用内存。

而且，为了安全起见，他们即使想看*也看不到其他程序使用的内存。*他们的内存地址空间完全是他们自己的，可以随意使用。

因此，在简单的情况下，每个数据对象恰好属于一个程序，那么每个数据对象*确实*只有一个地址。

但是，程序可能会引用公共资源。例如，两个拼写检查器可能需要在磁盘上使用一个充满拼写的大文件。操作系统通常不会将其加载到内存中两次，而是将其加载一次-但使用它的两个程序可能会在不同的虚拟地址上看到它。因此，在这种情况下，一个数据对象可能确实有多个虚拟地址。

# php - 检查 PHP 'if' 语句中的多个条件

> ID：16220210
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:37:16.000
> 
> 标签：php, opencart

```
if($this->request->get['product_id'] == (53 || 52 || 43)){
    if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/product2.tpl')) {
        $this->template = $this->config->get('config_template') . '/template/product/product2.tpl';
    } else {
        $this->template = 'default/template/product/product2.tpl';
    }
} else{
    if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/product.tpl')) {
        $this->template = $this->config->get('config_template') . '/template/product/product.tpl';
    } else {
        $this->template = 'default/template/product/product.tpl';
    }
} 
```

我想实现它，如果产品 id 是或`53`然后......同样的事情..但我不确定它是否正确`50``43`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T16:38:38.720

您可以将产品 ID 存储在数组中，然后使用以下[`in_array()`](http://php.net/in_array)函数：

```
if (in_array($this->request->get['product_id'], array (53, 52, 43))) { 
```

> `in_array`- 检查数组中是否存在值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:38:48.410

```
if($this->request->get['product_id'] == (53 || 52 || 43)){ 
```

应该：

```
if($this->request->get['product_id'] == 53
   || $this->request->get['product_id'] == 52
   || $this->request->get['product_id'] == 43) { 
```

您也可以使用`in_array`which 会使您的代码看起来更干净，但可能会更慢。蒂姆库珀为此提供了示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:39:30.557

```
$prodId = $this->request->get['product_id'];
if($prodId == 53 || $prodId == 52 || $prodId == 43){
.... 
```

# javascript - 在砌体中始终左对齐

> ID：16220214
> 
> 赞同：3
> 
> 时间：2013-04-25T16:37:25.773
> 
> 标签：javascript, jquery, layout, grid, jquery-masonry

我正在使用[Masonry](http://masonry.desandro.com/) jQuery 插件来对齐项目网格。

## 这是我所拥有的：

![结果](https://i.stack.imgur.com/n6ySj.png)

## 预期行为：

![预期行为](https://i.stack.imgur.com/PMYbh.png)

我怎样才能达到这个效果？我尝试了各种选择，但没有任何效果。

这是每个框的 HTML：

```
<div class="sa-visual-grid-item" id="sa-visual-grid-item-<?=$id?>">
    <div class="sa-selected-box"></div>
    <input type="hidden" name="selected[<?=$id?>]" value="1" />
    <img class="sa-img" src="<?=$img_url?>" />
    <div class="sa-desc">
        <div class="sa-name"><?=$name?></div>
        <div class="sa-price"><?=$price?></div>
    </div>
</div> 
```

和 CSS：

```
.sa-visual-grid {
    height: auto;
    margin: 0 auto;
    text-align: center;
}
.sa-visual-grid-item {
    background: white;
    float: left;
    width: 250px;
    padding: 15px;
    margin: 10px 15px;
    border: 1px solid #bbb;
    box-shadow: 0px 5px 15px 0px #efefef;
    cursor:pointer;
    text-align: center;
}
.sa-selected-box {
    display: none;
    position:absolute;
    z-index:100;
    border: 8px solid #00aa00;
    width:254px;
    padding:15px;
    margin-top:-25px;
    margin-left:-25px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-06-21T17:37:12.927

旧帖子，我知道，但这可能对其他人有帮助：

```
$('.grid').masonry({
    horizontalOrder: true
}); 
```

将其添加到我的 JS 文件后，网格项都左对齐。

例子：

```
$('.grid').masonry({
  itemSelector: '.grid-item',
  columnWidth: 160,
  horizontalOrder: true
});
```

```
* { box-sizing: border-box; }

body { font-family: sans-serif; }

/* ---- grid ---- */

.grid {
  background: #EEE;
  max-width: 1200px;
  counter-reset: grid-item;
}

/* clearfix */
.grid:after {
  content: '';
  display: block;
  clear: both;
}

/* ---- grid-item ---- */

.grid-item {
  width: 160px;
  height: 120px;
  float: left;
  background: #D26;
  border: 2px solid #333;
  border-color: hsla(0, 0%, 0%, 0.5);
  border-radius: 5px;
}

.grid-item--width2 { width: 320px; }
.grid-item--width3 { width: 480px; }
.grid-item--width4 { width: 720px; }

.grid-item--height2 { height: 200px; }
.grid-item--height3 { height: 260px; }
.grid-item--height4 { height: 360px; }

.grid-item:before {
  counter-increment: grid-item;
  content: counter(grid-item);
  display: block;
  color: white;
  padding-top: 0.2em;
  text-align: center;
  font-size: 1.4rem;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.js"></script>

<h1>Masonry - horizontalOrder</h1>

<div class="grid">
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item grid-item--height3"></div>
  <div class="grid-item"></div>
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item"></div>
  <div class="grid-item grid-item--height3"></div>
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item"></div>
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item grid-item--height3"></div>
  <div class="grid-item"></div>
  <div class="grid-item"></div>
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item"></div>
  <div class="grid-item"></div>
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item"></div>
  <div class="grid-item"></div>
  <div class="grid-item grid-item--height2"></div>
  <div class="grid-item"></div>
  <div class="grid-item"></div>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:28:23.807

你不能。这是一种最有效地打包垃圾箱的算法。它不是为了好看而设计的。也许你可以试试 wookmark 插件。还有很多其他的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T13:46:35.797

我知道这很旧，但我遇到了同样的问题，并在我的谷歌搜索中发现了这篇文章。我能够通过稍微修改库来解决这个问题。修改 Masonry.prototype._getItemLayoutPosition 函数如下（不要忽略 //position the brick 和 //apply setHeight 下的变化）：

```
Masonry.prototype._getItemLayoutPosition = function( item, count ) {
    item.getSize();
    // how many columns does this brick span
    var remainder = item.size.outerWidth % this.columnWidth;
    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';
    // round if off by 1 pixel, otherwise use ceil
    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );
    colSpan = Math.min( colSpan, this.cols );

    var colGroup = this._getColGroup( colSpan );
    // get the minimum Y value from the columns
    var minimumY = Math.min.apply( Math, colGroup );
    var shortColIndex;

    if (this._getOption('alignLTR') == true)
    {
        shortColIndex = count - ((Math.floor(count / colGroup.length) * colGroup.length));
    } 
    else {
        shortColIndex = colGroup.indexOf(minimumY);
    }

    // position the brick
    var position = {
      x: this.columnWidth * shortColIndex,
      y: colGroup[shortColIndex]
    };

    // apply setHeight to necessary columns
    var setHeight = colGroup[shortColIndex] + item.size.outerHeight;
    var setSpan = this.cols + 1 - colGroup.length;
    for ( var i = 0; i < setSpan; i++ ) {
      this.colYs[ shortColIndex + i ] = setHeight;
    }

    return position;
  }; 
```

您还必须修改调用此函数的循环，以便在遍历它们时传递每个项目的计数。

```
proto._layoutItems = function( items, isInstant ) {
  this._emitCompleteOnItems( 'layout', items );

  if ( !items || !items.length ) {
    // no items, emit event with empty array
    return;
  }

  var queue = [];

  var itemCount = 0;
  items.forEach( function( item, itemCount ) {
    // get x/y object from method
    var position = this._getItemLayoutPosition( item, itemCount );
    itemCount++;
    // enqueue
    position.item = item;
    position.isInstant = isInstant || item.isLayoutInstant;
    queue.push( position );
  }, this );

  this._processLayoutQueue( queue );
}; 
```

最后，您必须在创建网格时将新选项“alignLTR”设置为 true。

```
var $grid = $('#myGrid').masonry({
            isAnimated: true,
            itemSelector: '.my-item',
            alignLTR: true
        }); 
```

# coldfusion - ColdFusion 是否支持常量？

> ID：16220215
> 
> 赞同：8
> 
> 时间：2013-04-25T16:37:27.333
> 
> 标签：coldfusion, constants, coldfusion-9

我正在使用 ColdFusion 9 并检查了文档，但它是模棱两可的。

[https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/elements-of-cfml/constants.html](https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/elements-of-cfml/constants.html)

（我有 PHP 背景，正在寻找类似于 PHP 常量的东西）

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T16:49:40.800

不，ColdFusion 没有常数。我认为在大多数情况下，开发人员只是设置一个变量，使用一些命名约定，例如 ALL_CAPITALS 中的变量名，然后永远不要更改它的值。这并不是像其他语言那样真正的常量，您必须小心不要更改值（因为它不是真正的常量）。我之前已经这样做过，并且通常在应用程序范围内设置这些“常量”，以便它们随时可用。

不久前有一个[增强请求](https://bugbase.adobe.com/index.cfm?event=bug&id=3197154)打开。但是，它似乎已被关闭和推迟。

Adam Cameron[去年曾在博客中提到过这件事，](http://adamcameroncoldfusion.blogspot.com/2012/12/constants-for-cfml.html)并引用了相同的增强请求。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-25T16:55:43.093

不，不是作为母语功能。您链接到的页面中的关键位是“ColdFusion 不允许您为常量命名”

我认为该页面实际上是在谈论文字，而不是常量。

如果您想支持不可修改的常量，我认为您需要使用一个对象来封装这些值：

```
component displayname="constant values for my app" {
  property name="mailServer" default="127.0.0.1" getter=true setter=false
  property name="password" default="supersecret" getter=true setter=false
} 
```

然后，您可以将其设置在您需要的任何范围内（例如应用程序或请求），然后调用 application.constants.getMailServer()

它不像@Miguel-F 解决方案那样简洁，这是我大部分时间使用的解决方案，但它作为另一种选择在这里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-18T04:10:33.523

ColdFusion 2018 及以上版本支持关键字`final`。Final 很像一个常量，除了它不必在声明时设置。一旦设置，就无法更改。

```
// This is good
function myExample(){
    final max=50;
    writeoutput("final variable is: " & max);
}

// This is bad
function myExample(){
    final max=50;
    max = 100
    writeoutput("final variable is: " & max);
} 
```

有关详细信息，请参阅：[https ://helpx.adobe.com/coldfusion/developing-applications/building-blocks-of-coldfusion-applications/object-orienting-programming-coldfusion.html#final](https://helpx.adobe.com/coldfusion/developing-applications/building-blocks-of-coldfusion-applications/object-oriented-programming-coldfusion.html#final)

# c# - 外键列名不同时的实体框架映射

> ID：16220216
> 
> 赞同：3
> 
> 时间：2013-04-25T16:37:36.513
> 
> 标签：c#, entity-framework, entity-framework-4.1

我有一个像这样的旧表：

```
Country
- countryCode (PK, varchar(10), not null) 
```

现在我有一个新表：

```
Store
- store_id
- country_code 
```

我的模型：

```
public class Country
{
   [Key]
   [Column("countryCode")
   public int CountryCode {get;set;}
}

public class Store
{
   [Key]
   [Column("store_id")
   public int Id {get;set;}

   [Column("country_code")]
   public int CountryCode {get;set;}
} 
```

现在我希望能够做到这一点：

```
var store = // get store

store.Country.CountryCode 
```

如何创建此映射？ **请注意，列名不同（我无法更改）。**

我相信我必须将其添加到我的 Store 模型中，但是我如何指定外键的外观，因为它们具有不同的名称？

```
public virtual CountryCode {get;set;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:44:45.467

如果您的数据库列的类型为 ，`varchar(10)`则您不能`int`在模型中使用属性，但必须使用`string`，无论属性名称是否与列名称匹配。此外，为了能够访问`Country`您`Store`需要一个导航属性`Store.Country`：

```
public class Country
{
    [Key]
    [Column("countryCode", TypeName = "varchar")]
    [MaxLength(10)]
    public string CountryCode { get; set; }
}

public class Store
{
    [Key]
    [Column("store_id")
    public int Id { get; set; }

    [Column("country_code", TypeName = "varchar")]
    [MaxLength(10)]
    [Required]
    [ForeignKey("Country")]
    public string CountryCode { get; set; }

    public virtual Country Country { get; set; }
} 
```

（该`ForeignKey`属性可能不是必需的。您可以在没有它的情况下尝试它。如果表中的列允许值，也请删除该`[Required]`属性。）`country_code``Store``NULL`

您现在应该可以访问`CountryCode`with 例如：

```
var store = context.Stores.Find(1);
string countryCode = store.Country.CountryCode; 
```

当您访问该属性时，`store.Country`导航属性将通过延迟加载（因此是`virtual`修饰符）自动加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:49:55.647

该名称与关联无关（尽管相同的名称使 db 更直观）。通过 emdx 模型视图，您可以使用一个表单来指定关联。

这是一个方便的msdn教程； [http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx](http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx)

# ios - 获取当前登录用户的 Sharepoint 用户详细信息？（SOAP API）

> ID：16220229
> 
> 赞同：0
> 
> 时间：2013-04-25T16:38:10.290
> 
> 标签：ios, sharepoint, smartcard

有没有办法获得结果`UserGroup.GetUserInfo`但不必指定我要查询的用户，例如 with `UserGroup.GetRolesAndPermissionsForCurrentUser`？

特别是，我正在尝试获取用户 ID（以便我可以判断文档是否已签出给当前登录的用户）。不幸的是，我使用智能卡来提供凭据——没有为实际的文档库输入用户名或密码——所以我不能使用域\用户名`GetUserInfo`，这就是我对非智能卡使用的方法。

此外，我在 iOS 上，所以我真的没有任何好的 SharePoint API 可以使用——所有东西都需要通过 2007/2010 SOAP WebService API 提供

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T16:58:03.917

您应该可以使用`UserGroup.GetCurrentUserInfo`. Sharepoint SOAP 文档可以在这里找到[http://msdn.microsoft.com/en-us/library/websvcusergroup.usergroup.getcurrentuserinfo(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/websvcusergroup.usergroup.getcurrentuserinfo(v=office.14).aspx)。

如果您有权访问 Sharepoint 实例，则可以在此处检查 SOAP 信封和响应：htttp://your.sharepointserver.com/_vti_bin/usergroup.asmx?op=GetCurrentUserInfo（请勿在应用程序的实际请求中使用此 URL ）。

下面是一个基于 AFNetworking 和子类 AFHTTPClient 的示例实现。

```
// Get user info for currently signed in user
- (void)currentUserInfoWithSuccessBlock:(void(^)(SharepointCurrentUserResponse *response))successBlock
                              failBlock:(void(^)(NSError *error))failBlock {

  NSMutableURLRequest *request = [self requestWithMethod:@"POST"
                                                    path:@"_vti_bin/UserGroup.asmx"
                                              parameters:nil];

  NSString *soapEnvelope =
    @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
    @"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
    @"<soap:Body>"
    @"<GetCurrentUserInfo xmlns=\"http://schemas.microsoft.com/sharepoint/soap/directory/\" />"
    @"</soap:Body>"
    @"</soap:Envelope>";

  // Set headers
  [request setValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
  [request setValue:@"http://schemas.microsoft.com/sharepoint/soap/directory/GetCurrentUserInfo" forHTTPHeaderField:@"SOAPAction"];

  // Content length
  NSString *contentLength = [NSString stringWithFormat:@"%d", soapEnvelope.length];
  [request setValue:contentLength forHTTPHeaderField:@"Content-Length"];

  // Set body
  [request setHTTPBody:[soapEnvelope dataUsingEncoding:NSUTF8StringEncoding]];

  AFHTTPRequestOperation *operation = [self HTTPRequestOperationWithRequest:request
    success:^(AFHTTPRequestOperation *operation, id responseData) {
      NSString *xmlString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
      NSLog(@"XML response : %@", xmlString);

      // Parse the response
      SharepointCurrentUserResponse *response = ...

      successBlock(reponse);
    }
  } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
      NSLog(@"Get user info failed with reason: %@ status code %d",
            error, operation.response.statusCode);

      failBlock(error);
  }];

  // Que operation
  [self enqueueHTTPRequestOperation:operation];
} 
```

# .net - .Net反序列化XML，确定元素是否不存在

> ID：16220230
> 
> 赞同：0
> 
> 时间：2013-04-25T16:38:13.400
> 
> 标签：.net, xml-serialization

我有正在序列化的对象并想要添加“版本”属性。

我想要的是：

1.  在代码中创建的新对象应该被赋予“最新”版本（在某处定义）
2.  反序列化的对象，在其 xml 中*没有*版本属性，应标记为“版本 1”。

3.  反序列化的对象，在其 xml中*确实具有 version 属性，应使用 xml 中的任何版本。*

示例（伪代码）：

```
const string LatestVersion = "2";
class Foo {
   public String version {get; set; }
}

var foo = new Foo();
foo.version == "2"
serialize(foo) ->  "<foo><version>2</version></foo>";

foo = deserialize("<foo></foo>")
foo.version == "1";

foo = deserialize("<foo><version>2</version>");
foo.version == "2";

foo = deserialize("<foo><version>3</version>");
foo.version == "3"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:20:20.563

添加：

```
[XmlIgnore]
public bool versionSpecified {get;set;} 
```

当它有一个值时，您应该会发现它被设置为 true（由 XmlSerializer 本身）。但请注意：它还需要在序列化期间*报告*true，否则不包括该值。

* * *

也许更简单的方法：

```
private string _version;
public string version {
    get { return _version ?? "1"; } // the default value
    set { _version = value; }
} 
```

然后检查该字段是否为空。

# android - 进度条工作时如何处理屏幕翻转？

> ID：16220233
> 
> 赞同：0
> 
> 时间：2013-04-25T16:38:17.980
> 
> 标签：android, multithreading, progress-bar

我的活动中有一个进度条。当屏幕方向改变时，我的进度条从零开始工作。如何在方向改变时保存他的状态？

```
Thread t = new Thread(new Runnable() {
        public void run() {
            try {
                for (cnt = 1; cnt < max; cnt++) {
                    TimeUnit.MILLISECONDS.sleep(100 * randomNum / 50);
                    // refresh
                    h.post(updateProgress);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    });
    t.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:41:15.433

这是因为当屏幕方向发生变化时，Activity 会重新创建。

我可以给你的一个建议是将进度保存在独立于活动的某个地方，然后再次获取它。

# jquery - jquery在X个字符后将文本插入textarea

> ID：16220241
> 
> 赞同：2
> 
> 时间：2013-04-25T16:38:34.237
> 
> 标签：jquery

```
 var currentposition = 10; // after 10 characters
    var text = ":)";

    $(".insert").click(function () {
           // Need help here
    });

<textarea id="messagebox">Example text for the code</textarea> 
```

如何在一定数量的字符之后在文本区域中插入文本（文本区域中有文本），在这种情况下为 10。文本区域中也可能根本没有任何文本，在这种情况下，当前位置将为 0。

此代码的目的是在当前光标位置输入笑脸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:42:50.807

我建议使用类似的东西`.substring()`：

```
var currentposition = 10;
var text = ":)";

$('textarea').val($('textarea').val().substring(0,currentposition) + text + 
    $('textarea').val().substring (currentposition)); 
```

**[Jsfiddle 示例](http://jsfiddle.net/darkajax/bNyy7/)**

更新：如果要将光标定位在文本的末尾，可以尝试在更改 textarea 的值**之前**`.focus()`调用该方法：

 **```
$('textarea').focus().val($('textarea').val().substring(0,position) + ' :) ' + 
    $('textarea').val().substring (position)); 
```

但我不确定它是否适用于所有浏览器（IE 可能存在问题）**

# c# - 为每个派生类避免 KnownType 属性的公认方法

> ID：16220242
> 
> 赞同：22
> 
> 时间：2013-04-25T16:38:35.730
> 
> 标签：c#, wcf, datacontract, known-types

是否有一种普遍接受的方法来避免在 WCF 服务上使用 KnownType 属性？我一直在做一些研究，看起来有两种选择：

1.  [数据合约解析器](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/21/wcf-extensibility-data-contract-resolver.aspx)
2.  [NetDataContractSerializer](https://stackoverflow.com/a/10792018/279516)

我不喜欢每次添加新类型时都必须静态添加 KnownType 属性，因此想要避免它。

是否应该使用第三种选择？如果是这样，它是什么？如果不是，那么以上两个选项中哪一个是正确的选择？

**编辑 - 使用方法**

第三种选择是使用反射

```
[DataContract]
[KnownType("DerivedTypes")]
public abstract class FooBase
{
    private static Type[] DerivedTypes()
    {
        return typeof(FooBase).GetDerivedTypes(Assembly.GetExecutingAssembly()).ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-25T19:39:04.053

我想发布迄今为止我能想到的最简单、最优雅的解决方案。如果出现另一个更好的答案，我会同意的。但就目前而言，这运作良好。

基类，只有*一个* `KnownType`属性，指向一个名为的方法`DerivedTypes()`：

```
[KnownType("DerivedTypes")]
[DataContract]
public abstract class TaskBase : EntityBase
{
    // other class members here

    private static Type[] DerivedTypes()
    {
        return typeof(TaskBase).GetDerivedTypes(Assembly.GetExecutingAssembly()).ToArray();
    }
} 
```

该`GetDerivedTypes()`方法在一个单独的 ReflectionUtility 类中：

```
public static IEnumerable<Type> GetDerivedTypes(this Type baseType, Assembly assembly)
{
    var types = from t in assembly.GetTypes()
                where t.IsSubclassOf(baseType)
                select t;

    return types;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-30T13:04:51.493

只要所有涉及的类都在同一个程序集中，Bob 提到的方法就可以工作。

以下方法将跨程序集工作：

```
[DataContract]
[KnownType("GetDerivedTypes")]
public class BaseClass
{
  public static List<Type> DerivedTypes = new List<Type>();

  private static IEnumerable<Type> GetDerivedTypes()
  {
    return DerivedTypes;
  }
}

[DataContract]
public class DerivedClass : BaseClass
{
  //static constructor
  static DerivedClass()
  {
    BaseClass.DerivedTypes.Add(typeof(DerivedClass)); 
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-20T21:32:12.177

这是我对已接受答案的变体：

```
 private static IEnumerable<Type> GetKnownTypes() {
        Type baseType = typeof(MyBaseType);
        return AppDomain.CurrentDomain.GetAssemblies()
            .SelectMany(x => x.DefinedTypes)
            .Where(x => x.IsClass && !x.IsAbstract && x.GetCustomAttribute<DataContractAttribute>() != null && baseType.IsAssignableFrom(x));
    } 
```

区别在于：

1.  查看所有加载的程序集。
2.  检查我们感兴趣的一些位（如果您使用 DataContractJsonSerializer，我认为需要 DataContract），例如作为具体类。
3.  你可以在这里使用 isSubclassOf，我一般更喜欢 IsAssignableFrom 来捕获所有被覆盖的变体。特别是我认为它适用于泛型。
4.  利用 KnownTypes 接受 IEnumerable（如果在这种情况下很重要，可能不重要）而不是转换为数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T17:40:26.140

您可以在自定义类型中实现 IXmlSerializable 并手动处理其复杂性。您可以在下面找到示例代码：

```
[XmlRoot("ComplexTypeA")]
public class ComplexTypeA : IXmlSerializable
{
    public int Value { get; set; }

    public void WriteXml (XmlWriter writer)
    {
        writer.WriteAttributeString("Type", this.GetType().FullName);
        writer.WriteValue(this.Value.ToString());
    }

    public void ReadXml (XmlReader reader)
    {
        reader.MoveToContent();
        if (reader.HasAttributes) {
            if (reader.GetAttribute("Type") == this.GetType().FullName) {
                this.Value = int.Parse(reader.ReadString());
            }
        }
    }

    public XmlSchema GetSchema()
    {
        return(null);
    }
}

[XmlRoot("ComplexTypeB")]
public class ComplexTypeB : IXmlSerializable
{
    public string Value { get; set; }

    public void WriteXml (XmlWriter writer)
    {
        writer.WriteAttributeString("Type", this.GetType().FullName);
        writer.WriteValue(this.Value);
    }

    public void ReadXml (XmlReader reader)
    {
        reader.MoveToContent();
        if (reader.HasAttributes) {
            if (reader.GetAttribute("Type") == this.GetType().FullName) {
                this.Value = reader.ReadString();
            }
        }
    }

    public XmlSchema GetSchema()
    {
        return(null);
    }
}

[XmlRoot("ComplexTypeC")]
public class ComplexTypeC : IXmlSerializable
{
    public Object ComplexObj { get; set; }

    public void WriteXml (XmlWriter writer)
    {
        writer.WriteAttributeString("Type", this.GetType().FullName);
        if (this.ComplexObj != null)
        {
            writer.WriteAttributeString("IsNull", "False");
            writer.WriteAttributeString("SubType", this.ComplexObj.GetType().FullName);
            if (this.ComplexObj is ComplexTypeA)
            {
                writer.WriteAttributeString("HasValue", "True");
                XmlSerializer serializer = new XmlSerializer(typeof(ComplexTypeA));
                serializer.Serialize(writer, this.ComplexObj as ComplexTypeA);
            }
            else if (tthis.ComplexObj is ComplexTypeB)
            {
                writer.WriteAttributeString("HasValue", "True");
                XmlSerializer serializer = new XmlSerializer(typeof(ComplexTypeB));
                serializer.Serialize(writer, this.ComplexObj as ComplexTypeB);
            }
            else
            {
                writer.WriteAttributeString("HasValue", "False");
            }
        }
        else
        {
            writer.WriteAttributeString("IsNull", "True");
        }
    }

    public void ReadXml (XmlReader reader)
    {
        reader.MoveToContent();
        if (reader.HasAttributes) {
            if (reader.GetAttribute("Type") == this.GetType().FullName) {
                if ((reader.GetAttribute("IsNull") == "False") && (reader.GetAttribute("HasValue") == "True")) {
                    if (reader.GetAttribute("SubType") == typeof(ComplexTypeA).FullName)
                    {
                        XmlSerializer serializer = new XmlSerializer(typeof(ComplexTypeA));
                        this.ComplexObj = serializer.Deserialize(reader) as ComplexTypeA;
                    }
                    else if (reader.GetAttribute("SubType") == typeof(ComplexTypeB).FullName)
                    {
                        XmlSerializer serializer = new XmlSerializer(typeof(ComplexTypeB));
                        this.ComplexObj = serializer.Deserialize(reader) as ComplexTypeB;
                    }
                }
            }
        }
    }

    public XmlSchema GetSchema()
    {
        return(null);
    }
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T17:22:49.523

如果你不喜欢到处都有属性，那么你可以使用配置文件。

```
<system.runtime.serialization>
   <dataContractSerializer>
      <declaredTypes>
         <add type = "Contact,Host,Version=1.0.0.0,Culture=neutral,
                                                              PublicKeyToken=null">
            <knownType type = "Customer,MyClassLibrary,Version=1.0.0.0,
                                             Culture=neutral,PublicKeyToken=null"/>
         </add>
      </declaredTypes>
   </dataContractSerializer>
</system.runtime.serialization> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-25T14:26:35.670

我宁愿一次性提取我的自定义类型并在序列化/反序列化期间使用它。读完这篇文章后，我花了一段时间才明白在哪里注入这个类型列表以对序列化器对象有用。答案很简单：这个列表将用作序列化器对象的构造函数的输入参数之一。

1-我使用两种静态通用方法进行序列化和反序列化，这可能或多或少是其他人也做这项工作的方式，或者至少与您的代码进行比较非常清楚：

```
 public static byte[] Serialize<T>(T obj)
    {
        var serializer = new DataContractSerializer(typeof(T), MyGlobalObject.ResolveKnownTypes());
        var stream = new MemoryStream();
        using (var writer =
            XmlDictionaryWriter.CreateBinaryWriter(stream))
        {
            serializer.WriteObject(writer, obj);
        }
        return stream.ToArray();
    }
    public static T Deserialize<T>(byte[] data)
    {
        var serializer = new DataContractSerializer(typeof(T), MyGlobalObject.ResolveKnownTypes());
        using (var stream = new MemoryStream(data))
        using (var reader =
            XmlDictionaryReader.CreateBinaryReader(
                stream, XmlDictionaryReaderQuotas.Max))
        {
            return (T)serializer.ReadObject(reader);
        }
    } 
```

2- 请注意 DataContractSerializer 的构造函数。我们在那里有第二个参数，它是将已知类型注入序列化程序对象的入口点。

3- 我使用静态方法从我自己的程序集中提取我自己定义的所有类型。此静态方法的代码可能如下所示：

```
 private static Type[] KnownTypes { get; set; }
    public static Type[] ResolveKnownTypes()
    {
        if (MyGlobalObject.KnownTypes == null)
        {
            List<Type> t = new List<Type>();
            List<AssemblyName> c = System.Reflection.Assembly.GetEntryAssembly().GetReferencedAssemblies().Where(b => b.Name == "DeveloperCode" | b.Name == "Library").ToList();
            foreach (AssemblyName n in c)
            {
                System.Reflection.Assembly a = System.Reflection.Assembly.Load(n);
                t.AddRange(a.GetTypes().ToList());
            }
            MyGlobalObject.KnownTypes = t.ToArray();
        }
        return IOChannel.KnownTypes;
    } 
```

由于我没有参与 WCF（我只需要对文件操作进行二进制序列化），因此我的解决方案可能无法完全解决 WCF 架构，但必须可以从某个地方访问序列化程序对象的构造函数。

# objective-c - 如何将 JSON 用于 iPhone 应用程序？

> ID：16220244
> 
> 赞同：1
> 
> 时间：2013-04-25T16:38:39.583
> 
> 标签：objective-c, json, weather

我正在尝试制作一个天气应用程序，我在网上找到了一个很棒的 JSON 天气 API。我在用

```
NSData * data = [NSData dataWithContentsOfURL: [NSURL URLWithString: absoluteURL]];
NSError * error;
NSDictionary * json = [NSJSONSerialization JSONObjectWithData: data //1
  options: kNilOptions 
  error: & error
];
NSLog(@"%@", json);
NSLog([NSString stringWithFormat: @"location: %@", [json objectForKey: @"status"]]); 
```

获取数据，但它不会工作，日志返回`(null)`。有人可以向我解释如何获取 JSON 文件的字符串和值吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:51:23.430

编辑：将您的代码从第 3 行（包括）更改为：

```
NSDictionary * json = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
NSArray *meta = json[@"objects"];

for (NSDictionary *aDict in meta) {
    NSDictionary *location = aDict[@"location"];
    NSLog(@"%@", location);
} 
```

这`NSLog()`是您的`JSON response`.

如果你想要`city`并且`country`只有一次，你可以执行以下操作：

```
NSDictionary *location = json[@"objects"][0][@"location"];
NSString *country = location[@"country"];
NSString *locality = location[@"locality"];

NSLog(@"country: %@", country);
NSLog(@"locality: %@", locality); 
```

**输出：**

> 国家：德国
> 地点：豪森贝格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:04:14.950

JSON 的根目录中没有元素“状态”。json 对象将包含与 JSON 完全相同的层次结构。在你的情况下，它看起来像这样：

```
root (dictionary)
  |
  -- "objects": (array)
        |
        -- (dictionary)
              |
              -- "sources" (array) 
              -- "weather" (dictionary)
... 
```

你明白了。

尝试这个：

```
for (NSDictionary *object in json[@"objects"])
{
    NSLog([NSString stringWithFormat: @"location: %@", object[@"weather"][@"status"]]);
} 
```

# asp.net-mvc-3 - 在 MVC 模型中使用数组作为数据类型

> ID：16220249
> 
> 赞同：0
> 
> 时间：2013-04-25T16:38:51.667
> 
> 标签：asp.net-mvc-3, entity-framework

我正在为自己创建一个项目经理类型的应用程序作为学习体验。我正在使用 ASP.NET MVC3 并且将使用 jQuery 来更进一步。现在我已经使用 Ninject/Moq 创建了模型和一些模拟存储库。

模型：

```
public class Project
{
    public int ProjectID { get; set; }

    public string ProjectName { get; set; }

    public string Description { get; set; }

    public string[] AssignedEmployees { get; set; }

    public string[] ProjectGoals { get; set; }

    public DateTime ProjectStart { get; set; }

    public DateTime ProjectDeadLine { get; set; }

    public string Notes { get; set; }
} 
```

模拟存储库：

```
Mock<IProjectRepository> projectMock = new Mock<IProjectRepository>();
        projectMock.Setup(m => m.Projects).Returns(new List<Project> 
        {
            new Project {ProjectID = 1234, ProjectName = "Email redesign", Description = "New email", AssignedEmployees = new string[] {"Ian", "Danny", "Mikey"}},
            new Project {ProjectID = 4321, ProjectName = "Update Cart", Description = "Make cart smoother function better"},
            new Project {ProjectID = 4567, ProjectName = "New social widget", Description = "More social media buttons"}
        }.AsQueryable());

        ninjectKernel.Bind<IProjectRepository>().ToConstant(projectMock.Object); 
```

看法：

```
@foreach  (var p in Model){
<div class='project'>
    <h3>@p.ProjectName</h3>
    <p>@p.Description</p>
    <ul class='assigned-employees'>
        <li class="employee">
        @p.AssignedEmployees
        </li>
    </ul>
</div>
} 
```

问题在于，在 AssignedEmployees 数组的视图中呈现的所有内容都是`System.String[]`. 我试过了`.ToString`，`.ToArray`我试过做一个`foreach`循环来循环遍历数组中的每个项目，以将它们分别打印到一个单独的 li 中。

如何让它打印数组中的所有名称？使用数组是否是最好的解决方案？我希望任何使用该应用程序的人都可以为项目分配任意数量的员工，这就是为什么我认为数组可能是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:42:58.713

您应该能够使用 foreach 循环或 for 循环。调用`.ToString()`只是要打印`System.String[]`并且调用`.ToArray()`数组不会做任何事情

```
<ul class='assigned-employees'>
   @{foreach(var emp in p.AssignedEmployees){
       <li class="employee">@emp</li>
  }}
</ul> 
```

或者

```
<ul class='assigned-employees'>
   @{for(var i = 0; i<p.AssignedEmployees.Count(); i++){
       <li class="employee">@p.AssignedEmployees[i]</li>
  }}
</ul> 
```

另外，我希望你在尝试枚举它之前检查数组是否存在，否则你会得到一个运行时异常

```
<ul class='assigned-employees'>
   @{if(p.AssignedEmployees != null && p.AssignedEmployes.Any()){
     foreach(var emp in p.AssignedEmployees){
       <li class="employee">@emp</li>
     }
  }}
</ul> 
```

# c++ - 如何制作浮动工具栏？

> ID：16220252
> 
> 赞同：0
> 
> 时间：2013-04-25T16:38:58.143
> 
> 标签：c++, windows, visual-studio-2012

我有我的窗口，现在我想创建一个工具栏，我可以将它拖到任何地方并填充它，有人知道命名这个过程的正确方法是什么吗？也许一些教程或书籍我如何在 C++/VS12 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:41:46.650

您可能应该寻找 GUI 设计库。如果你想用 C++ 做，我建议你使用 QT。

# eclipse - 将活动文件设置为第一个选项卡

> ID：16220253
> 
> 赞同：1
> 
> 时间：2013-04-25T16:38:58.887
> 
> 标签：eclipse

所以，我使用的是 Eclipse 版本 4.2.2。我和许多程序员一样，经常同时打开许多文件。我发现 Eclipse 在 IDE 顶部将显示哪些选项卡（代表打开的文件）以及您必须通过单击创建显示其他打开文件的下拉列表的箭头来访问这些选项卡时有点不稳定。有时选择一个文件会将其保留在上部选项卡中，有时则不会，这使我不得不寻找文件才能打开它。

我想要的是，将一个活动文件放在选项卡中行的前面，随后选择的每个文件都会将前面向下推一个并取而代之，就像队列数据结构一样。

我想上述情况不太可能，但我想我会问。我知道有一个后退按钮可以将您带到上一个文件，但我发现当我在 5 或 6 个文件之间以无特定顺序跳转时它没有帮助，例如文件 1 到文件 4 到文件 5 到文件2.

有谁知道是否有办法做我要求的？我浏览了文档并进行了一些搜索，但在这方面没有发现任何特别有用的东西。任何意见，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:18:28.990

安装[Mylyn](http://www.eclipse.org/mylyn/)。它会自动隐藏您不积极使用的每个编辑器。

# symfony - symfony2 监听器未调用

> ID：16220256
> 
> 赞同：0
> 
> 时间：2013-04-25T16:39:04.857
> 
> 标签：symfony, ldap, listener

我试图实现这个包：[https ://github.com/BorisMorel/LdapBundle](https://github.com/BorisMorel/LdapBundle)

除了侦听器之外，我已经设置并工作了所有东西 - 它只是不会运行并且探查器显示以下内容：

```
Not Called Listeners

Event name  Listener
imag_ldap.security.authentication.pre_bind   LdapSecurityListener::onPreBind
kernel.exception     ExceptionListener::onKernelException
kernel.exception     ProfilerListener::onKernelException
kernel.exception     ExceptionListener::onKernelException
kernel.view  TemplateListener::onKernelView 
```

这是我的 service.yml：

```
services:
    ldap.listener:
        class: Riviera\PlutusBundle\EventListener\LdapSecurityListener
        tags:
            - {name: kernel.event_listener, event: imag_ldap.security.authentication.pre_bind, method:onPreBind} 
```

这是我的听众：

```
<?php

namespace Riviera\PlutusBundle\EventListener;

//use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use IMAG\LdapBundle\Event\LdapUserEvent;

/**
 * Performs logic before the user is found to LDAP
 */
    class LdapSecurityListener
    {

    /**
     * Modifies the User before binding data from LDAP
     *
     * @param \IMAG\LdapBundle\Event\LdapUserEvent $event
     */
    public function onPreBind(LdapUserEvent $event)
    {
        $user = $event->getUser();
        $config = $this->appContext->getConfig();

        throw new \Exception(sprintf('Username: %s', $user->getUsername()));
    }
} 
```

我已经尝试了几个小时，并且一直在调试捆绑代码，并且可以 100% 说它连接到 LDAP 并且在以下情况下失败：

```
//IMAG\LdapBundle\Provider\LdapAuthenticationProvider.php
try {
     $this->dispatcher->dispatch(LdapEvents::PRE_BIND, $userEvent);
} catch (\Exception $expt) {
     if ($this->hideUserNotFoundExceptions) {
        throw new BadCredentialsException('Bad credentials', 0, $expt);
     }

     throw $expt;
} 
```

有什么想法/想法吗？

**编辑**

根据下面的评论，没有调用监听器，我认为 ldap 功能依赖于调用监听器。

如果我`die()`在此之前放置一个语句，`try{}catch{}`我可以在浏览器中看到它，但是如果我将它放在 die 语句之后永远不会触发，这意味着它会抛出错误的凭据异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:35:40.907

事实证明，正在调用侦听器并且正在引发异常，但是 ldap 模块中的某些功能通过将引发的异常隐藏为错误的凭据异常来隐藏它。

这是由于`$this->hideUserNotFoundExceptions`等于真而发生的，据我所知，它在构造中设置为默认为真（看不到其他任何被调用的地方）

无论如何，我删除了侦听器中的异常，现在我已经通过了登录屏幕。但它似乎仍然没有设置登录凭据（安全下没有令牌），但这是一个不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T00:15:25.020

## 问题在这里：

当 ListenerClass 尝试访问 Config objetc 时失败。尝试在您的听众中对此发表评论。

```
    //这会抛出异常
    //$config = $this->appContext->getConfig();
    //$ldapConf = $config['ldap'];

    //if (!in_array($user->getUsername(), $ldapConf['allowed'])) {
    // throw new \Exception(sprintf('LDAP user %s not allowed', $user->getUsername()));
    //}

```

# jquery - 从 HREF 向输入传递值

> ID：16220257
> 
> 赞同：1
> 
> 时间：2013-04-25T16:39:07.293
> 
> 标签：jquery

我正在开发一个使用[FooTable](https://github.com/bradvin/FooTable#readme)来显示产品列表的网站；我也包含了用于排序和过滤表数据的 FooTable 插件。

我要做的是在我的网站导航中包含一个链接列表，通过预先填充输入框来强制过滤 FooTable，例如链接：

```
http://www.mysite.com/products.html?search=queryterm 
```

会将访问者带到 products.html 页面，并且已经在输入框中显示“queryterm”并相应地过滤表格。由于我对 jQuery 和 JavaScript 都是新手，所以我无法在不破坏[footable.filter.js](https://github.com/bradvin/FooTable/blob/master/js/footable.filter.js)的现有功能的情况下弄清楚如何做到这一点。

查询词将由以下任何内容组成：单个词、短语、数字和分数（例如，1/16）。

# javascript - 在 OpenLayers 中部分显示一层，部分显示另一层？

> ID：16220259
> 
> 赞同：1
> 
> 时间：2013-04-25T16:39:10.137
> 
> 标签：javascript, openlayers

我需要显示让我们说在最顶层的半页上，在下面的层的另一半上。如果可能的话，能够更改每层的可见量会很棒（例如，通过拖动它们之间的边界）。

现在我除了用框架和两个单独的地图实现一些笨拙的东西之外没有其他想法。有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:50:24.653

观看 Cédric Moullet 编写的此控件，该控件在此帖子的 DEV 列表中显示：http: [//osgeo-org.1560.x6.nabble.com/OpenLayers-Control-Swipe-td5032741.html](http://osgeo-org.1560.x6.nabble.com/OpenLayers-Control-Swipe-td5032741.html)

# android - Google Play 没有传递完整的引用字符串？

> ID：16220261
> 
> 赞同：1
> 
> 时间：2013-04-25T16:39:18.313
> 
> 标签：android, google-play

为什么我在我的 INSTALL_REFERRER BroadcastReceiver 中只看到我的引荐来源字符串的一部分？

LogCat 显示了这一点：

```
START u0 {act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] dat=market://details?id=com.myapp&referrer=val1=1&val2=2 
```

但是，当我根据意图在我的 BroadcastReceiver 中记录“referrer”值时，我只会得到：

```
val1=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:49:49.397

对于以下 URL `market://details?id=com.myapp&referrer=val1=1&val2=2`，变量将按如下方式拆分：

*   `referrer`=`val1=1`
*   `val2`=`2`

要让引用者包含`val1=1&val2=2`，您需要转义`&`. URL 看起来像

`market://details?id=com.myapp&referrer=val1=1%26val2=2`

# php - Apache 和 Symbolic Symlink 获取父目录 php

> ID：16220262
> 
> 赞同：1
> 
> 时间：2013-04-25T16:39:18.460
> 
> 标签：php, apache, symlink

我在创建符号链接时遇到问题，我希望脚本采用“子”文件夹而不是父文件夹

```
/var/www/FolderParent - .... somefile.php
/var/www/FolderChild  - .... somefile.php (symlink from parent) 
```

somefile.php 内容：

```
echo "DIR:".dirname(__FILE__); 
```

节目 ：

```
DIR: /var/www/FolderParent 
```

预期的：

```
DIR: /var/www/FolderChild 
```

我的 httpd.conf：

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

FolderParent 和 FolderChild 的权限都具有 apache 用户和组“www-data”，并且出于测试目的，所有文件都在 777

如何设置 apache 以采用子路径？这样做的想法是拥有一个将在多个站点中使用的单个实例，并且能够只更新单个实例

注意：我不能更改脚本的代码，因为它是基于CMS的，所以这意味着要更改所有的CMS

编辑：我也尝试使用硬链接，但是我无法在文件夹上执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:42:56.113

创建硬链接而不是符号链接。

# python - 如何使用 read_csv() 建立组？

> ID：16220263
> 
> 赞同：0
> 
> 时间：2013-04-25T16:39:24.270
> 
> 标签：python, python-3.x, statistics, pandas, time-series

我有一个遵循此布局的 csv 文件：

```
 Finances and enterprises
 Mortgages

Mortgages constituted
Unidades:Capital loaned (millions euros)

,Total,,RUSTIC,,URBAN,,-Urban. Dwellings,,-Urban. Lots,,-Urban. Others,,RUSTIC,,-Rustic with BANK loans,,-Rustic with SAVINGS BANKS loans,,-Rustic with loans at other institutions,,URBAN,,-Urban with BANK loans,,-Urban with SAVINGS BANKS loans,,-Urban with loans at other institutions,,
,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capitalloaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,Number,Capital loaned,
2003M01,"118040.0","11135.75","3469.0","444.5","114571.0","10691.25","89642.0","7937.54","3496.0","1134.3","21434.0","1619.4","3469.0","444.5","1069.0","131.16","1736.0","222.83","659.0","90.51","114571.0","10691.25","44021.0","4287.19","59793.0","5525.87","10756.0","878.2",
2003M02,"119166.0","12017.24","3495.0","534.55","115671.0","11482.69","88381.0","8223.45","3842.0","1194.4","23449.0","2064.78","3495.0","534.55","1241.0","216.91","1549.0","250.43","703.0","67.22","115671.0","11482.69","44135.0","4664.59","61338.0","5855.24","10203.0","962.87",
2003M03,"116565.0","11535.46","3614.0","543.47","112951.0","10991.99","85577.0","8014.6","4302.0","1220.92","23069.0","1756.41","3614.0","543.47","1089.0","164.15","1730.0","307.68","792.0","71.64","112951.0","10991.99","42590.0","4488.27","60875.0","5661.76","9494.0","841.95", 
```

我想使用以“，Total，，RUSTIC，，URBAN”开头的行作为标题将其与熊猫一起导入。问题是以下行还包含有意义的标题。

我想我应该使用组，但我不知道如何使用`read_csv()`.

这是我现在正在做的事情：

```
output = pandas.read_csv(csv,header=7, sep=',', skip_footer=11, 
                          skiprows=[0,1,2,3,4,5,6], parse_dates=True,
                          index_col=0) 
```

我最终在 output.index.values 中得到了“借出的资本”。不好……</p>

- - - 编辑 - - - -

我的数据提供者更改了 csv 的布局。我仍然遇到同样的错误，但我认为使用 csv 更容易理解我的问题。这是 csv ：

2013-06-11 16:19:37,587 - 监控 - 调试 - csv：财务和企业抵押

```
Mortgages constituted
Unidades:Capital loaned (millions euros)

,Total,RUSTIC,URBAN,-Urban. Dwellings,-Urban. Lots,-Urban. Others,RUSTIC,-Rustic with BANK loans,-Rustic with SAVINGS BANKS loans,-Rustic with loans at other institutions,URBAN,-Urban with BANK loans,-Urban with SAVINGS BANKS loans,-Urban with loans at other institutions,
Number,"","","","","","","","","","","","","","",
       2003M01,"118040.0","3469.0","114571.0","89642.0","3496.0","21434.0","3469.0","1069.0","1736.0","659.0","114571.0","44021.0","59793.0","10756.0",
  2003M02,"119166.0","3495.0","115671.0","88381.0","3842.0","23449.0","3495.0","1241.0","1549.0","703.0","115671.0","44135.0","61338.0","10203.0",
   2003M03,"116565.0","3614.0","112951.0","85577.0","4302.0","23069.0","3614.0","1089.0","1730.0","792.0","112951.0","42590.0","60875.0","9494.0",
   2003M04,"104744.0","3270.0","101474.0","77475.0","3553.0","20438.0","3270.0","1139.0","1569.0","565.0","101474.0","38678.0","53773.0","9024.0",
   2003M05,"116615.0","3605.0","113010.0","86628.0","3652.0","22729.0","3605.0","1116.0","1780.0","708.0","113010.0","43054.0","60303.0","9662.0",
   2003M06,"113086.0","3508.0","109578.0","82968.0","3460.0","23145.0","3508.0","1015.0","1682.0","807.0","109578.0","40334.0","58508.0","10733.0",
   2003M07,"113881.0","3391.0","110490.0","83387.0","3341.0","23753.0","3391.0","1026.0","1702.0","655.0","110490.0","41852.0","59155.0","9477.0",
   2003M08,"92580.0","2647.0","89933.0","67572.0","3167.0","19187.0","2647.0","781.0","1318.0","542.0","89933.0","33688.0","48022.0","8220.0",
   2003M09,"118209.0","3523.0","114686.0","86018.0","3287.0","25377.0","3523.0","1020.0","1887.0","610.0","114686.0","44948.0","59949.0","9791.0",
   2003M10,"129177.0","3824.0","125353.0","90806.0","3341.0","31204.0","3824.0","1193.0","1854.0","779.0","125353.0","49996.0","64493.0","10867.0",
   2003M11,"110775.0","3652.0","107123.0","78483.0","2567.0","26071.0","3652.0","1359.0","1595.0","694.0","107123.0","43818.0","53111.0","10196.0",
   2003M12,"104404.0","3079.0","101325.0","72502.0","3448.0","25374.0","3079.0","1121.0","1386.0","568.0","101325.0","41731.0","49856.0","9742.0",
   2004M01,"135048.0","3999.0","131049.0","91914.0","3257.0","35876.0","3999.0","1303.0","1904.0","789.0","131049.0","53969.0","64415.0","12663.0",
   2004M02,"136554.0","4268.0","132286.0","92586.0","3470.0","36233.0","4268.0","1346.0","2042.0","876.0","132286.0","52898.0","66598.0","12789.0",
   2004M03,"144743.0","4300.0","140443.0","98670.0","3634.0","38137.0","4300.0","1449.0","2040.0","805.0","140443.0","54743.0","72417.0","13280.0",
   2004M04,"125030.0","3616.0","121414.0","85190.0","2759.0","33464.0","3616.0","1152.0","1766.0","696.0","121414.0","46884.0","63510.0","11022.0",
   2004M05,"144539.0","4152.0","140387.0","98993.0","3832.0","37559.0","4152.0","1350.0","1923.0","875.0","140387.0","57147.0","70073.0","13164.0",
   2004M06,"144604.0","4155.0","140449.0","98239.0","3938.0","38267.0","4155.0","1413.0","2004.0","734.0","140449.0","57689.0","70065.0","12692.0",
   2004M07,"134913.0","3836.0","131077.0","93946.0","3323.0","33806.0","3836.0","1335.0","1772.0","723.0","131077.0","50368.0","69196.0","11511.0",
   2004M08,"118370.0","3380.0","114990.0","83484.0","2546.0","28953.0","3380.0","1172.0","1618.0","587.0","114990.0","45131.0","59373.0","10483.0",
   2004M09,"141770.0","4212.0","137558.0","98872.0","3416.0","35271.0","4212.0","1359.0","1934.0","913.0","137558.0","55042.0","70639.0","11881.0",
   2004M10,"128998.0","4119.0","124879.0","89592.0","3152.0","32139.0","4119.0","1271.0","1969.0","876.0","124879.0","47329.0","65744.0","11804.0",
   2004M11,"133264.0","3927.0","129337.0","92631.0","3767.0","32940.0","3927.0","1306.0","1867.0","745.0","129337.0","48406.0","68531.0","12393.0",
   2004M12,"120664.0","3801.0","116863.0","83547.0","2842.0","30481.0","3801.0","1354.0","1739.0","700.0","116863.0","44055.0","61475.0","11339.0",
   2005M01,"151018.0","4413.0","146605.0","104256.0","3548.0","38801.0","4413.0","1617.0","2035.0","758.0","146605.0","53801.0","77875.0","14933.0",
   2005M02,"146627.0","4104.0","142523.0","101882.0","3660.0","36981.0","4104.0","1334.0","2009.0","758.0","142523.0","51779.0","76635.0","14105.0",
   2005M03,"140240.0","4390.0","135850.0","97164.0","3534.0","35152.0","4390.0","1460.0","2209.0","717.0","135850.0","50412.0","71026.0","14419.0",
   2005M04,"154457.0","4535.0","149922.0","108238.0","3853.0","37831.0","4535.0","1378.0","2286.0","868.0","149922.0","56533.0","79074.0","14322.0",
   2005M05,"152622.0","4630.0","147992.0","108144.0","3495.0","36353.0","4630.0","1560.0","2136.0","932.0","147992.0","53972.0","78455.0","15565.0",
   2005M06,"162570.0","4574.0","157996.0","112619.0","4399.0","40978.0","4574.0","1505.0","2209.0","858.0","157996.0","56865.0","86051.0","15077.0",
   2005M07,"140366.0","3928.0","136438.0","97465.0","4720.0","34253.0","3928.0","1232.0","1937.0","754.0","136438.0","46798.0","76390.0","13252.0",
   2005M08,"132577.0","3940.0","128637.0","91499.0","2862.0","34276.0","3940.0","1243.0","1997.0","693.0","128637.0","47632.0","68807.0","12196.0",
   2005M09,"184936.0","4820.0","180116.0","129128.0","4806.0","46182.0","4820.0","1596.0","2337.0","884.0","180116.0","62547.0","99890.0","17678.0",
   2005M10,"145734.0","4471.0","141263.0","102511.0","4356.0","34396.0","4471.0","1284.0","2360.0","820.0","141263.0","49527.0","75987.0","15747.0",
   2005M11,"151218.0","4551.0","146667.0","107327.0","3602.0","35738.0","4551.0","1377.0","2215.0","955.0","146667.0","49483.0","78496.0","18696.0",
   2005M12,"136265.0","3707.0","132558.0","97380.0","3385.0","31793.0","3707.0","1215.0","1792.0","694.0","132558.0","45727.0","70320.0","16513.0",
   2006M01,"173677.0","4838.0","168839.0","124244.0","4004.0","40591.0","4838.0","1381.0","2286.0","1171.0","168839.0","55901.0","89106.0","23832.0",
   2006M02,"163741.0","4683.0","159058.0","114617.0","4998.0","39443.0","4683.0","1414.0","2175.0","1094.0","159058.0","54602.0","81186.0","23270.0",
   2006M03,"182682.0","5142.0","177540.0","127233.0","5818.0","44489.0","5142.0","1607.0","2419.0","1116.0","177540.0","57473.0","91623.0","28444.0",
   2006M04,"137455.0","3662.0","133793.0","97124.0","3560.0","33109.0","3662.0","1118.0","1755.0","789.0","133793.0","43876.0","71457.0","18460.0",
   2006M05,"177649.0","5111.0","172538.0","126137.0","4802.0","41599.0","5111.0","1466.0","2581.0","1064.0","172538.0","57352.0","95969.0","19217.0",
   2006M06,"172168.0","4553.0","167615.0","123081.0","4759.0","39775.0","4553.0","1292.0","2409.0","852.0","167615.0","56131.0","95250.0","16234.0",
   2006M07,"152550.0","4685.0","147865.0","107143.0","4491.0","36231.0","4685.0","1624.0","2356.0","705.0","147865.0","48065.0","87615.0","12185.0",
   2006M08,"138205.0","3876.0","134329.0","98384.0","4567.0","31378.0","3876.0","1221.0","1927.0","728.0","134329.0","44581.0","78845.0","10903.0",
   2006M09,"161212.0","4509.0","156703.0","114685.0","4701.0","37317.0","4509.0","1239.0","2527.0","743.0","156703.0","50946.0","92709.0","13048.0",
   2006M10,"157014.0","4567.0","152447.0","111393.0","4672.0","36382.0","4567.0","1396.0","2323.0","848.0","152447.0","50420.0","89444.0","12583.0",
   2006M11,"157466.0","4370.0","153096.0","111523.0","5047.0","36526.0","4370.0","1382.0","2236.0","752.0","153096.0","50299.0","89976.0","12821.0",
   2006M12,"122696.0","3594.0","119102.0","86607.0","3617.0","28878.0","3594.0","1147.0","1849.0","598.0","119102.0","38587.0","70993.0","9522.0",
   2007M01,"179612.0","4645.0","174967.0","124826.0","6102.0","44039.0","4645.0","1194.0","2539.0","912.0","174967.0","55345.0","105347.0","14275.0",
   2007M02,"154087.0","4081.0","150006.0","109769.0","5570.0","34667.0","4081.0","1272.0","2135.0","674.0","150006.0","48150.0","89353.0","12503.0",
   2007M03,"168948.0","4520.0","164428.0","116651.0","6812.0","40965.0","4520.0","1385.0","2403.0","732.0","164428.0","50099.0","100449.0","13880.0",
   2007M04,"139850.0","3918.0","135932.0","97492.0","4786.0","33654.0","3918.0","1342.0","1993.0","583.0","135932.0","41367.0","83014.0","11551.0",
   2007M05,"169905.0","4826.0","165079.0","118669.0","6905.0","39505.0","4826.0","1488.0","2515.0","823.0","165079.0","51356.0","98389.0","15334.0",
   2007M06,"155584.0","4300.0","151284.0","111139.0","4785.0","35360.0","4300.0","1541.0","2037.0","722.0","151284.0","48579.0","88876.0","13829.0",
   2007M07,"149281.0","4015.0","145266.0","104808.0","4585.0","35873.0","4015.0","1216.0","2066.0","733.0","145266.0","45335.0","87187.0","12744.0",
   2007M08,"129961.0","3558.0","126403.0","90763.0","4401.0","31239.0","3558.0","1193.0","1728.0","637.0","126403.0","40819.0","74756.0","10828.0",
   2007M09,"145326.0","4258.0","141068.0","102131.0","5338.0","33599.0","4258.0","1394.0","2206.0","658.0","141068.0","46131.0","83083.0","11854.0",
   2007M10,"145007.0","4546.0","140461.0","97586.0","4558.0","38317.0","4546.0","1402.0","2392.0","752.0","140461.0","44123.0","82756.0","13582.0",
   2007M11,"139891.0","3838.0","136053.0","93262.0","4388.0","38403.0","3838.0","1249.0","1840.0","749.0","136053.0","43537.0","80241.0","12275.0",
   2007M12,"103175.0","2540.0","100635.0","71794.0","3419.0","25422.0","2540.0","706.0","1326.0","508.0","100635.0","31269.0","59878.0","9488.0",
   2008M01,"138301.0","3774.0","134527.0","93838.0","4820.0","35869.0","3774.0","997.0","2086.0","691.0","134527.0","41964.0","79349.0","13214.0",
   2008M02,"124191.0","3736.0","120455.0","81997.0","4425.0","34033.0","3736.0","1089.0","1881.0","766.0","120455.0","40175.0","68445.0","11835.0",
   2008M03,"104690.0","2724.0","101966.0","70210.0","3517.0","28239.0","2724.0","926.0","1370.0","428.0","101966.0","33929.0","58145.0","9892.0",
   2008M04,"124634.0","3769.0","120865.0","86127.0","3811.0","30927.0","3769.0","1080.0","1857.0","832.0","120865.0","38316.0","71130.0","11419.0",
   2008M05,"114028.0","3270.0","110758.0","77157.0","4432.0","29169.0","3270.0","1012.0","1511.0","747.0","110758.0","40939.0","59207.0","10612.0",
   2008M06,"105301.0","3048.0","102253.0","68475.0","5046.0","28732.0","3048.0","975.0","1434.0","639.0","102253.0","35821.0","57190.0","9242.0",
   2008M07,"114610.0","3585.0","111025.0","72813.0","5058.0","33154.0","3585.0","1370.0","1570.0","645.0","111025.0","38217.0","63494.0","9314.0",
   2008M08,"87840.0","4407.0","83433.0","56020.0","3129.0","24284.0","4407.0","1206.0","2516.0","685.0","83433.0","29598.0","44971.0","8864.0",
   2008M09,"103312.0","4335.0","98977.0","66239.0","5032.0","27706.0","4335.0","1613.0","1802.0","920.0","98977.0","38413.0","51347.0","9217.0",
   2008M10,"102715.0","4964.0","97751.0","63949.0","4905.0","28897.0","4964.0","2119.0","1872.0","973.0","97751.0","34095.0","55066.0","8590.0",
   2008M11,"80535.0","3824.0","76711.0","51104.0","3498.0","22109.0","3824.0","1393.0","1689.0","742.0","76711.0","28839.0","39642.0","8230.0",
   2008M12,"83217.0","3473.0","79744.0","48490.0","3475.0","27779.0","3473.0","1131.0","1595.0","747.0","79744.0","28475.0","43958.0","7311.0",
   2009M01,"85542.0","4001.0","81541.0","52547.0","4135.0","24859.0","4001.0","1438.0","1711.0","852.0","81541.0","27918.0","45988.0","7635.0",
   2009M02,"86946.0","4242.0","82704.0","50535.0","5155.0","27014.0","4242.0","1559.0","1774.0","909.0","82704.0","30346.0","44735.0","7623.0",
   2009M03,"88735.0","4227.0","84508.0","52268.0","4643.0","27597.0","4227.0","1638.0","1633.0","956.0","84508.0","29613.0","46605.0","8290.0",
   2009M04,"82974.0","5356.0","77618.0","50266.0","4356.0","22996.0","5356.0","2007.0","2331.0","1018.0","77618.0","28772.0","41649.0","7197.0",
   2009M05,"96102.0","5030.0","91072.0","57438.0","4897.0","28737.0","5030.0","1943.0","2217.0","870.0","91072.0","33240.0","49444.0","8388.0",
   2009M06,"100074.0","5000.0","95074.0","61832.0","4883.0","28359.0","5000.0","1890.0","2058.0","1052.0","95074.0","34889.0","49778.0","10407.0",
   2009M07,"100149.0","5477.0","94672.0","59605.0","4264.0","30803.0","5477.0","1985.0","2454.0","1038.0","94672.0","35338.0","49089.0","10245.0",
   2009M08,"83912.0","4782.0","79130.0","51970.0","3811.0","23349.0","4782.0","2021.0","1906.0","855.0","79130.0","29957.0","40601.0","8572.0",
   2009M09,"104748.0","5885.0","98863.0","62971.0","6612.0","29280.0","5885.0","2072.0","2548.0","1265.0","98863.0","37658.0","51355.0","9850.0",
   2009M10,"89873.0","5491.0","84382.0","52250.0","3963.0","28169.0","5491.0","1986.0","2286.0","1219.0","84382.0","30060.0","45739.0","8583.0",
   2009M11,"82913.0","4539.0","78374.0","51769.0","3572.0","23033.0","4539.0","1453.0","1981.0","1105.0","78374.0","28842.0","41463.0","8069.0",
   2009M12,"80619.0","4634.0","75985.0","47438.0","2977.0","25570.0","4634.0","1541.0","1931.0","1162.0","75985.0","27845.0","40299.0","7841.0",
   2010M01,"90045.0","4581.0","85464.0","53898.0","3656.0","27910.0","4581.0","1730.0","1920.0","931.0","85464.0","30633.0","46131.0","8700.0",
   2010M02,"88523.0","4472.0","84051.0","55194.0","3825.0","25032.0","4472.0","1448.0","2078.0","946.0","84051.0","31692.0","43561.0","8798.0",
   2010M03,"87137.0","4465.0","82672.0","54135.0","3488.0","25049.0","4465.0","1358.0","1873.0","1234.0","82672.0","31649.0","42387.0","8636.0",
   2010M04,"80182.0","3721.0","76461.0","50779.0","3129.0","22553.0","3721.0","1212.0","1549.0","960.0","76461.0","29042.0","39357.0","8062.0",
   2010M05,"87882.0","3942.0","83940.0","55489.0","3061.0","25390.0","3942.0","1193.0","1726.0","1023.0","83940.0","31260.0","44325.0","8355.0",
   2010M06,"89140.0","3931.0","85209.0","56734.0","2957.0","25518.0","3931.0","1335.0","1756.0","840.0","85209.0","31889.0","44762.0","8558.0",
   2010M07,"84218.0","3516.0","80702.0","55709.0","2296.0","22697.0","3516.0","1234.0","1413.0","869.0","80702.0","30589.0","42245.0","7868.0",
   2010M08,"77256.0","3276.0","73980.0","50142.0","3093.0","20745.0","3276.0","1084.0","1446.0","746.0","73980.0","28952.0","37641.0","7387.0",
   2010M09,"83330.0","4288.0","79042.0","53127.0","3815.0","22100.0","4288.0","1410.0","1765.0","1113.0","79042.0","31488.0","39746.0","7808.0",
   2010M10,"62109.0","3129.0","58980.0","39326.0","2398.0","17256.0","3129.0","828.0","1466.0","835.0","58980.0","21363.0","30913.0","6704.0",
   2010M11,"67086.0","3130.0","63956.0","43797.0","2460.0","17699.0","3130.0","1028.0","1276.0","826.0","63956.0","23234.0","33001.0","7721.0",
   2010M12,"64040.0","2436.0","61604.0","39205.0","2265.0","20134.0","2436.0","701.0","1063.0","672.0","61604.0","23739.0","30458.0","7407.0",
   2011M01,"75409.0","3660.0","71749.0","49510.0","2145.0","20094.0","3660.0","1194.0","1344.0","1122.0","71749.0","25636.0","37602.0","8511.0",
   2011M02,"76398.0","3012.0","73386.0","49892.0","2538.0","20956.0","3012.0","984.0","1257.0","771.0","73386.0","27440.0","37463.0","8483.0",
   2011M03,"68917.0","3134.0","65783.0","42982.0","2323.0","20478.0","3134.0","915.0","1078.0","1141.0","65783.0","25344.0","32548.0","7891.0",
   2011M04,"49618.0","2382.0","47236.0","31275.0","2170.0","13791.0","2382.0","887.0","839.0","656.0","47236.0","17793.0","23505.0","5938.0",
       2011M05,"60341.0","2919.0","57422.0","37440.0","2647.0","17335.0","2919.0","888.0","1234.0","797.0","57422.0","20844.0","29009.0","7569.0",
   2011M06,"52225.0","2473.0","49752.0","32533.0","2188.0","15031.0","2473.0","685.0","1007.0","781.0","49752.0","19024.0","23669.0","7059.0",
   2011M07,"46748.0","2281.0","44467.0","29458.0","2054.0","12955.0","2281.0","699.0","828.0","754.0","44467.0","16705.0","22269.0","5493.0",
   2011M08,"47620.0","2558.0","45062.0","29502.0","1724.0","13836.0","2558.0","982.0","929.0","647.0","45062.0","18831.0","19828.0","6403.0",
   2011M09,"51033.0","2662.0","48371.0","31284.0","2133.0","14954.0","2662.0","959.0","842.0","861.0","48371.0","24327.0","17771.0","6273.0",
   2011M10,"39178.0","2584.0","36594.0","22317.0","1808.0","12469.0","2584.0","762.0","1137.0","685.0","36594.0","19058.0","12760.0","4776.0",
   2011M11,"45581.0","2232.0","43349.0","27938.0","2005.0","13406.0","2232.0","983.0","493.0","756.0","43349.0","24871.0","11938.0","6540.0",
   2011M12,"38691.0","1896.0","36795.0","24330.0","1623.0","10842.0","1896.0","864.0","360.0","672.0","36795.0","23729.0","8104.0","4962.0",
   2012M01,"46821.0","2593.0","44228.0","29035.0","1906.0","13287.0","2593.0","1203.0","398.0","992.0","44228.0","28955.0","8600.0","6673.0",
   2012M02,"43616.0","2947.0","40669.0","26169.0","2190.0","12310.0","2947.0","2015.0","304.0","628.0","40669.0","26652.0","7227.0","6790.0",
   2012M03,"42367.0","2448.0","39919.0","24679.0","2566.0","12674.0","2448.0","1426.0","229.0","793.0","39919.0","28454.0","5645.0","5820.0",
   2012M04,"36266.0","2013.0","34253.0","21498.0","1594.0","11161.0","2013.0","1092.0","169.0","752.0","34253.0","24893.0","4033.0","5327.0",
   2012M05,"43955.0","2699.0","41256.0","26007.0","2077.0","13172.0","2699.0","1619.0","175.0","905.0","41256.0","30798.0","4328.0","6130.0",
   2012M06,"41143.0","1998.0","39145.0","24321.0","1616.0","13208.0","1998.0","1154.0","242.0","602.0","39145.0","29832.0","3958.0","5355.0",
   2012M07,"42089.0","2160.0","39929.0","24291.0","1404.0","14234.0","2160.0","1159.0","211.0","790.0","39929.0","30123.0","4094.0","5712.0",
   2012M08,"35111.0","2061.0","33050.0","21106.0","1369.0","10575.0","2061.0","1075.0","187.0","799.0","33050.0","23940.0","3463.0","5647.0",
   2012M09,"35894.0","2224.0","33670.0","21195.0","1085.0","11390.0","2224.0","1394.0","190.0","640.0","33670.0","26310.0","3096.0","4264.0",
   2012M10,"31405.0","2022.0","29383.0","19105.0","1531.0","8747.0","2022.0","948.0","228.0","846.0","29383.0","21079.0","3199.0","5105.0",
   2012M11,"31697.0","1820.0","29877.0","19115.0","1067.0","9695.0","1820.0","794.0","162.0","864.0","29877.0","22420.0","2647.0","4810.0",
   2012M12,"28573.0","1509.0","27064.0","17577.0","748.0","8739.0","1509.0","691.0","156.0","662.0","27064.0","19885.0","2599.0","4580.0",
   2013M01,"41365.0","1827.0","39538.0","25447.0","1148.0","12943.0","1827.0","943.0","181.0","703.0","39538.0","29295.0","3954.0","6289.0",
   2013M02,"37656.0","1863.0","35793.0","24197.0","1398.0","10198.0","1863.0","818.0","171.0","874.0","35793.0","26463.0","3372.0","5958.0",
   2013M03,"27525.0","1637.0","25888.0","16270.0","902.0","8716.0","1637.0","949.0","148.0","540.0","25888.0","19491.0","2372.0","4025.0",
    Capital loaned,"","","","","","","","","","","","","","",
       2003M01,"11135.75","444.5","10691.25","7937.54","1134.3","1619.4","444.5","131.16","222.83","90.51","10691.25","4287.19","5525.87","878.22",
       2003M02,"12017.24","534.55","11482.69","8223.45","1194.4","2064.78","534.55","216.91","250.43","67.22","11482.69","4664.59","5855.24","962.87","957.07","518.29","199.47","202.31","116.51","7728.28","3170.91","3704.87","852.5",

And so on. 
```

如您所见，有两个空行：

```
 Number,"","","","","","","","","","","","","","",
    Capital loaned,"","","","","","","","","","","","","","", 
```

这些行使我无法成功导入该系列，因为我的索引中最终出现了“数字”和“借出的资本”，与一堆 nan 相关联。我也有重复的日期。

我想应该有一种方法可以用那些应该是列的行来构建组。另一种解决方案（在我的情况下是最好的）是从这个 csv 中获取两个 pandas 系列。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:03:03.850

Try the following to skip the next line after the header

```
output = pandas.read_csv(csv,header=7, sep=',', skip_footer=11, 
                          skiprows=[0,1,2,3,4,5,6,8], parse_dates=True,
                          index_col=0) 
```

# c++ - 将 int(C::*)(int, char) 类型转换为 int(int, char) 类型

> ID：16220269
> 
> 赞同：2
> 
> 时间：2013-04-25T16:39:32.163
> 
> 标签：c++, templates, c++11, bind, member-function-pointers

我有一堂课：

```
struct C {
    int F(int, char) { return 0; }
}; 
```

我需要创建一个`std::function`，它将调用`C::F`一个变量的函数`c`：

```
C c;
std::function<int(int, char)> f;
...
f = std::bind(&C::F, &c, _1, _2); 
```

但是如果函数的签名被改变，我也需要改变 std::function 。

所以我不想重复签名：

```
C c;
std::function<delete_class<decltype(&C::F)>::type> f;
...
f = std::bind(&C::F, &c, _1, _2); 
```

其中 delete_class 是一些魔术助手，它将类型更改`int(C::*)(int, char)`为`int(int, char)`.

我怀疑，我可以在`boost::mpl`or的帮助下实现它`boost::function_types`，但我做不到。

有经验的人可以告诉我怎么做吗？

PS。对比 2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:44:48.047

如果您需要一种`delete_class`可以按照您的意愿工作的类型特征，那么这个应该可以完成这项工作：

```
template<typename S>
struct delete_class;

template<typename R, typename C, typename... Ts>
struct delete_class<R (C::*)(Ts...)>
{
    using type = R(Ts...);
}; 
```

然后将满足以下断言：

```
static_assert(
    std::is_same<delete_class<decltype(&C::F)>::type, 
    int(int, char)
    >::value, "!"); 
```

然后您可以使用`delete_class<>`您建议的方式：

```
std::function<delete_class<decltype(&C::F)>::type> f;
C c;
f = std::bind(&C::F, &c, _1, _2); 
```

这是一个[**活生生的例子**](http://ideone.com/FHPJdO)。

**编辑：**

如果您仅限于 VC10 支持（即没有可变参数模板），则必须定义`delete_class`主模板的几个部分特化：

```
template<typename S>
struct delete_class;

template<typename R, typename C>
struct delete_class<R (C::*)()>
{
    typedef R(type)();
};

template<typename R, typename T>
struct delete_class<R (C::*)(T)>
{
    typedef R(type)(T);
};

template<typename R, typename T, typename U>
struct delete_class<R (C::*)(T, U)>
{
    typedef R(type)(T, U);
};

template<typename R, typename T, typename U, typename V>
struct delete_class<R (C::*)(T, U, V)>
{
    typedef R(type)(T, U, V);
};

// And so on... 
```

# sharepoint-2010 - 防止 Sharepoint 2010 图片库中的“图片另存为”

> ID：16220270
> 
> 赞同：0
> 
> 时间：2013-04-25T16:39:35.020
> 
> 标签：sharepoint-2010

我正在尝试在 SharePoint 2010 中设置一个图片库，我可以在其中向具有“仅查看”权限的人提供图像，并阻止他们下载图像。

他们无法使用 SharePoint 的“操作->下载”选项，但他们仍然可以查看完整大小的图片并右键单击->将图片另存为下载。

有什么方法可以防止/禁用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:50:19.597

Web 浏览器中的图像已下载到此人的计算机。浏览器被配置为允许用户将图像保存到另一个位置，而不是保存文件的临时目录。为了防止用户下载图像，您需要向他们发送图像以外的其他内容。我能想到的唯一方法是使用 Silverlight 或 Flash 向用户显示页面上某处的图像。SharePoint 有一个可以执行此操作的图像查看器 Web 部件。

当然，通过这样做，您将需要更改用户访问图片库的方式，可能通过设置计算或超链接字段来创建到具有嵌入式图像查看器的页面的链接。该页面需要某种过滤器，以便它知道您要查看的图像，并且需要设置填充超链接字段的工作流。

# angularjs - angular-ui ng-grid 外部列分组

> ID：16220272
> 
> 赞同：2
> 
> 时间：2013-04-25T16:39:45.640
> 
> 标签：angularjs, angular-ui, ng-grid

拖放和内置菜单方法对于 ngGrid 脚本非常有用。我目前正在尝试这样做，以便您可以通过外部方法（例如复选框）执行列分组。这更适合我的需求，因为它对触摸屏更友好。我看过一些执行手动 groupBy() 调用的方法，但这对我根本不起作用。

对于这个愿望有什么想法/帮助吗？菜单*可以*工作，但不幸的是，拖放不适用于平板电脑。

非常感谢任何帮助，谢谢。

**弄清楚了：**

在玩了一些之后，我终于能够弄清楚了。我创建了一个简单的函数：

```
$scope.updateGrouping = function(col) { $scope.gridOptions.groupBy(col); } 
```

这很简单，其中 col 是字段的名称。当未选中该框时，它还会从过滤器中删除分组。

# servicestack - 服务堆栈设计决策

> ID：16220273
> 
> 赞同：2
> 
> 时间：2013-04-25T16:39:47.343
> 
> 标签：servicestack

我需要一些关于使用服务堆栈的建议。在服务器上，我们将为它定义 DTO 和服务。但是客户如何知道 DTO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T02:52:09.883

您可以通过多种方式记录您的 API，甚至为您的客户提供生成的代码。阅读以下文档：

*   [生成类型安全的客户端代码](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)
*   [显示元数据页面](https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page)
*   [集成 Swagger UI](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)

# mapping - 如何使用此 JSON 实现动态映射 (RKDynamicMapping)？

> ID：16220274
> 
> 赞同：3
> 
> 时间：2013-04-25T16:39:57.800
> 
> 标签：mapping, restkit, restkit-0.20

我的后端返回这种 JSON 文件：

{“响应”：{“消息”：“测试”}，“响应代码”：205 }

根据 responseCode 值，响应内部的内容是不同的。我知道我必须使用 RKDynamicMapping 之类的东西，但不确定如何使用。我看到的问题是，在示例代码和手册中，区分映射的属性在内部，但在这种情况下在外部。我试过这个但不起作用：

```
 [dynamicMapping setObjectMappingForRepresentationBlock:^RKObjectMapping *(id representation) {
        NSNumber* responseCode=(NSNumber*)representation[@"responseCode"];
        if (responseCode.integerValue==204) {
            return searchByLocatorResponseContent204Mapping;
        } else if (responseCode.integerValue==205) {
            return searchByLocatorResponseContent205Mapping;
        }
        return nil;
    }];
    RKResponseDescriptor *searchByLocatorResponseContentResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:dynamicMapping pathPattern:kCheckinSearchByLocatorPath keyPath:nil  statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [objectManager addResponseDescriptor:searchByLocatorResponseContentResponseDescriptor]; 
```

我猜是因为我要更改的映射不包含区分它们的属性（例如输入来自 rest kit 网站的女孩/男孩示例代码）

有人有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T22:24:19.123

如果您像这样设置它，restkit 预计`dynamicMapping`将为整个响应 json 提供映射，而不仅仅是“响应”的内容。

基本上`searchByLocatorResponseContent204Mapping`需要对`response`字段和`responseCode`字段进行映射。

据我所知，restkit 不能向外看，因为该`representation`参数只为您提供当前上下文内部的信息。但是，它在路线图上，并且已经有一张票：[https ://github.com/RestKit/RestKit/issues/1327](https://github.com/RestKit/RestKit/issues/1327)

# database - 贝宝快递结账后保存买家卡信息

> ID：16220275
> 
> 赞同：1
> 
> 时间：2013-04-25T16:40:07.167
> 
> 标签：database, paypal, security, online-store

我想为我的网站实施快速贝宝结帐。人们基本上选择一个项目并购买它。没有经常性付款左右。除了交易和订单 ID 之外，我还需要保存买家卡信息吗？如果是，我应该在我的数据库中存储什么？我基本上不想处理信用卡安全和我身边的东西，以防我的数据库被劫持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:19:08.987

通过使用快速结帐，客户不会在您的网站中输入任何卡详细信息。这一切都在 PayPal 处理。

PayPal 有很好的流程文档。
[https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted)

# asp.net - 有什么方法可以获取 asp.net 应用程序的默认 ResourceProviderFactory 吗？

> ID：16220279
> 
> 赞同：2
> 
> 时间：2013-04-25T16:40:11.517
> 
> 标签：asp.net, localization, resourceproviderfactory

我已经成功地为我的 asp.net 应用程序实现了自定义本地化提供程序。我现在正在一个备用方案中工作，由于某种原因，无法创建 CustomResourceProviderFactory，或者如果我不想在特定场景中使用它，我希望能够在 asp.net 中使用默认的 ProviderFactory

有没有办法创建或获取该类的实例？我也无法弄清楚确切的类型是什么，我找到的所有信息都是关于创建一个我已经完成的自定义工厂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T21:12:07.937

这是对我有用的解决方案

```
var _resxResourceProviderFactoryType = Assembly.GetAssembly(typeof(ResourceProviderFactory)).GetType("System.Web.Compilation.ResXResourceProviderFactory");                                                             
var _resourceProviderFactory = (ResourceProviderFactory)Activator.CreateInstance(_resxResourceProviderFactoryType); 
```

# grid - Extjs 4.2 网格旋转

> ID：16220283
> 
> 赞同：1
> 
> 时间：2013-04-25T16:40:29.007
> 
> 标签：grid, pivot, converter, extjs4.2

我的问题是如何将网格元素中的任何存储记录转换为将一个数据索引绑定到列，将另一个数据索引绑定到行！存储模型类似于

```
['RowId', 'CollumnId', 'Value', 'ValueType','isEditable'] 
```

我需要绑定

*   `RowId`,`CollumnId`有一些地图可以显示一些标题。
*   `ValueType`需要转换器以指示转换器应如何表示数据。
*   `isEditable`是布尔值那个点是这个值可以编辑

所以首先我可以把记录变成新的礼物

```
    [RowId：id，
      Col1: { value1, ValueType1, isEditable1},
      Col2: {value2,ValueType2, isEditable2},
      .....,
      ColN{...}]

```

，因此我可以为网格创建动态模型和列，但我认为这不是方式......

这样，我对转换器和验证器有一些无限的问题，在此之后如何将编辑数据转换回来，只在服务器上发送更改的数据。

# 有人有什么想法吗？

## 或者我如何在存储和网格之间创建一些“代理”，可以将原始数据转换为所需的网格模型，然后返回？当网格尝试填充自己时，哪一点可以找到一些黑客方式来调用它？

# java - ListView 随机订购物品？

> ID：16220285
> 
> 赞同：0
> 
> 时间：2013-04-25T16:40:38.680
> 
> 标签：java, android, listview

我的列表视图是随机排序的，当我向下或向上滚动时，项目位置随机更改我尝试了很多方法来解决这个问题但没有成功

我用谷歌搜索，发现有太多方法可以解决与扩展列表视图相关的问题，但它不适用于我的代码

请帮忙

这是列表视图代码

```
static class ViewHolder {
      ImageView play;
      ImageView download;
      TextView rtitle;
      TextView size;
      TextView downloads;
      RatingBar ratingsmall;
      ImageView ratebutton;
      long tonid;
      TextView voters;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
      ViewHolder holder;
      //Get the current location object
      JSONObject r = (JSONObject) getItem(position);
      //Inflate the view
      if (convertView == null) {
        convertView = mInflater.inflate(R.layout.ringtone_bit, null);
        holder = new ViewHolder();
        ImageView play = (ImageView) convertView.findViewById(R.id.play);
        ImageView download = (ImageView) convertView.findViewById(R.id.download);
        ImageView ratebutton = (ImageView) convertView.findViewById(R.id.ratebutton);
        TextView rtitle = (TextView) convertView.findViewById(R.id.rtitle);
        TextView size = (TextView) convertView.findViewById(R.id.size);
        TextView downloads = (TextView) convertView.findViewById(R.id.downloads);
        TextView voters = (TextView) convertView.findViewById(R.id.voters);
        TextView personname = (TextView) convertView.findViewById(R.id.personname);
        TextView date = (TextView) convertView.findViewById(R.id.date);
        RatingBar ratingsmall = (RatingBar) convertView.findViewById(R.id.ratingsmall);
        //setdate
        try {
          Date date_g = new Date(r.getLong("timestamp") * 1000);
          date.setText(date_g.toLocaleString());
        } catch (JSONException e2) {}
        //set person name
        try {
          String client_name = (r.getString("personname").equals("null") == true) ? "ghost" : r.getString("personname");
          personname.setText(client_name);
        } catch (JSONException e2) {}
        //set total votars and vote avarage
        try {
          float z = (float) r.getInt("rate");
          voters.setText(" ( " + r.getLong("voters") + " ) / " + z);
        } catch (JSONException e2) {}
        //set rating bar
        try {
          float z = (float) r.getInt("rate");
          ratingsmall.setRating(z);
        } catch (JSONException e2) {}
        //set ringtone Name as defualt device language
        try {
          String name = (lang.equals("English") == true) ? r.getString("en_name") : r.getString("ar_name");
          rtitle.setText(name);
        } catch (JSONException e2) {}
        //ringtone file size
        try {
          size.setText(r.getString("size"));
        } catch (JSONException e2) {}
        //set downloads
        try {
          downloads.setText(String.valueOf(r.getLong("downloads")));
        } catch (JSONException e2) {}
        //set ringtone ID toneid
        try {
          holder.tonid = r.getLong("toneid");
          download.setTag(r.getLong("toneid"));
          ratebutton.setTag(r.getLong("toneid"));
        } catch (JSONException e1) {}
        //set download stram url to play icon
        try {
          play.setTag(r.getString("stream_url"));
        } catch (JSONException e) {}
        //add play listener test Ringtone before download it
        play.setOnClickListener(onClickListener);
        convertView.setTag(holder);
      } else {
        holder = (ViewHolder) convertView.getTag();
      }
      return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:53:09.107

我认为您误解了 ViewHolder 的用途。ViewHolder 不是保存值，而是保存视图，因此您不必再次膨胀它们。即使您从标签中获取视图，您仍然需要设置数据。

这是您正确使用视图支架的方式：

```
if(convertView == null)
{
    convertView = mInflater.inflate(R.layout.ringtone_bit, null);
    holder = new ViewHolder();
    convertView.setTag(holder);
    holder.play        = ( ImageView ) convertView.findViewById(R.id.play);
    holder.download    = ( ImageView ) convertView.findViewById(R.id.download);
    holder.ratebutton  = ( ImageView ) convertView.findViewById(R.id.ratebutton);
    holder.rtitle      = (TextView)  convertView.findViewById(R.id.rtitle);
    holder.size        = (TextView)  convertView.findViewById(R.id.size);
    holder.downloads   = (TextView)  convertView.findViewById(R.id.downloads);
    holder.voters      = (TextView)  convertView.findViewById(R.id.voters);
    holder.personname   = (TextView)  convertView.findViewById(R.id.personname);
    holder.date         = (TextView)  convertView.findViewById(R.id.date);
    holder.ratingsmall = (RatingBar) convertView.findViewById(R.id.ratingsmall);
} else {
    holder = (ViewHolder) convertView.getTag();
}

// Fill the data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:44:27.440

如果`convertView != null`. 您应该阅读另一个使用 viewHolder 的示例。这次检查得更仔细了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:47:20.080

```
//Get the current location object
JSONObject r = (JSONObject) getItem(position);

//Inflate the view
if(convertView == null)
{
    convertView = mInflater.inflate(R.layout.ringtone_bit, null);
}

         ImageView play        = ( ImageView ) convertView.findViewById(R.id.play);
    ImageView download    = ( ImageView ) convertView.findViewById(R.id.download);
    ImageView ratebutton  = ( ImageView ) convertView.findViewById(R.id.ratebutton);
    TextView  rtitle      = (TextView)  convertView.findViewById(R.id.rtitle);
    TextView  size        = (TextView)  convertView.findViewById(R.id.size);
    TextView  downloads   = (TextView)  convertView.findViewById(R.id.downloads);
    TextView  voters      = (TextView)  convertView.findViewById(R.id.voters);
    TextView personname   = (TextView)  convertView.findViewById(R.id.personname);
    TextView date         = (TextView)  convertView.findViewById(R.id.date);
    RatingBar ratingsmall = (RatingBar) convertView.findViewById(R.id.ratingsmall);

   //setdate
    try {
        Date date_g = new Date(r.getLong("timestamp")*1000);
        date.setText( date_g.toLocaleString() ) ; 

    } catch (JSONException e2) {}

   //set person name
    try {
        String client_name = ( r.getString("personname").equals( "null" ) == true ) ? "ghost" : r.getString("personname");
        personname.setText(client_name);
    } catch (JSONException e2) {}

    //set total votars and vote avarage
    try {
        float z = (float) r.getInt("rate");
        voters.setText(" ( "+ r.getLong("voters") +" ) / " + z);
    } catch (JSONException e2) {}            
    //set rating bar
    try {
        float z = (float) r.getInt("rate");
        ratingsmall.setRating(z);
    } catch (JSONException e2) {}           
    //set ringtone Name as defualt device language
    try {
        String name = ( lang.equals( "English" ) == true ) ?  r.getString("en_name") : r.getString("ar_name");
        rtitle.setText(name);
    } catch (JSONException e2) {}

    //ringtone file size
    try {
        size.setText(r.getString("size"));
    } catch (JSONException e2) {}

    //set downloads
    try {
        downloads.setText(String.valueOf( r.getLong("downloads") ));
    } catch (JSONException e2) {}

    //set ringtone ID toneid
    try {
          holder.tonid = r.getLong("toneid");
          download.setTag(r.getLong("toneid"));
          ratebutton.setTag(r.getLong("toneid"));
       } catch (JSONException e1) {}

    //set download stram url to play icon
    try {
        play.setTag(r.getString("stream_url"));
    } catch (JSONException e) {}

    //add play listener test Ringtone before download it
    play.setOnClickListener(onClickListener); 

return convertView; 
```

视图持有者很奇怪，通常会引起混乱，这就是我建议实施的方式`getView()`

# php - 将每行更改的变量插入 MySQL

> ID：16220287
> 
> 赞同：0
> 
> 时间：2013-04-25T16:40:42.757
> 
> 标签：php, mysql

```
 while ($row = mysql_fetch_array($sqlquery)) 
        {

    $fd = strtotime($row['date1']);
    $sd = strtotime($row['date2']);

    $dates = floor(($sd - $fd ) / 86400);

    $price = $dates * 25;
   } 
```

`$price`我想为每一行插入另一个表。我不能用一个插入来做到这一点，因为`$price`每次都不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:50:57.043

```
"INSERT INTO `yourtable` ('price') VALUES ('".$price."')"; 
```

把它放在while循环中，所以

```
while ($row = mysql_fetch_array($sqlquery)) 
        {

    $fd = strtotime($row['date1']);
    $sd = strtotime($row['date2']);

    $dates = floor(($sd - $fd ) / 86400);

    $price = $dates * 25;
"INSERT INTO `yourtable` ('price') VALUES ('".$price."')";
   } 
```

这意味着 while 循环的每次迭代都会有一个插入，每次`$price`都不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:52:56.953

要一次插入所有行，您可以执行以下操作：

```
INSERT INTO Other_Table (price)
  SELECT 25 * (date2 - date1) / 86400
  FROM ... (table from $sqlquery)
  WHERE ... (where clause from $sqlquery) 
```

# mysql - Wordpress 网站 - 连接到数据库时出错 - 仅在高流量时

> ID：16220288
> 
> 赞同：1
> 
> 时间：2013-04-25T16:40:44.730
> 
> 标签：mysql, wordpress, database-connection

我有一个 wordpress 3.5.1 网站，它获得了一点流量（80 个并发访问者，每秒约 5 次点击/浏览量）。该网站运行良好，直到达到约 85 位访问者。通常有 4 个管理员同时登录。该网站有 8 种自定义帖子类型——帖子有 3500 个帖子，新​​闻稿（自定义帖子类型）有 13000 个帖子。所有这些都在网站上进行了分页，因此任何一页上显示的帖子都不会超过 20 条。

我使用的唯一插件是 wp-pagenavi 和 w3totalcache。

我将 WP_DEBUG_LOG 设置为 true 并记录了错误。我得到的主要错误（除了与此问题无关的各种通知和警告）是 mysql 已达到 max_user_connections 限制。

我当前的 max_user_connections 设置为 75。我尝试将其设置得更高，但 cpu 无法处理负载（每个 2.17GHz 的 4 个四核 CPU 和 4GB 的 RAM）。

是什么导致了如此多的连接？

我查看了发生错误时正在运行的 mysql 进程，并且有许多连接显示“SLEEPING”或“SLEEP”（可能是 15-20）。我还通过进程日志注意到 httpd 在流量高峰期经常重启。

关于如何解决这个问题的任何想法？

注意：如果您的回答是检查我的 wp-config.php 文件并确保我的用户名、密码和主机正确，请不要回复。这不是问题。该网站在正常流量下运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:57:57.727

由于高负载，数据库服务器正在退出。错误日志中有什么？数据库的大小是多少？您是否使用过 mysqltuner.pl 在 my.cnf 中检查 MySQL 服务器的查询负载和缓存设置？[https://github.com/rackerhacker/MySQLTuner-perl](https://github.com/rackerhacker/MySQLTuner-perl)

WordPress 确实可以通过许多帖子/页面修订使数据库陷入困境。使用插件删除它们[http://wordpress.org/extend/plugins/revision-control/](http://wordpress.org/extend/plugins/revision-control/) 我已经将数据库减少到其原始大小的 10%，从而大大提高了性能。

# php - PHP表单未发布所有字段

> ID：16220289
> 
> 赞同：4
> 
> 时间：2013-04-25T16:40:46.927
> 
> 标签：php, forms, post, get, field

我有一个奇怪的问题，我无法理解。

我有以下表单，当我单击提交时，我没有获取或发布表单中的所有字段。只有两个字段被选中 - isnew=true action=object &submit=Start

```
<form name="newOffer" action="/auth/dashboard" method="post">
                                <td><?php echo form_hidden('isnew', 'true');?><?php echo form_hidden('action', 'object');?><input type="text" id="newOfferItem" placeholder="Offer Free Item" class="input-xlarge"></td>
                                <td><input type="text" id="newOfferText" placeholder="Offer Description" class="input-xlarge" rel="tooltip" title="Description How to get free item"></td>
                                <td><input type="text" id="newOfferFreeOn" placeholder="Stamps for free item" class="input-xlarge" rel="tooltip" title="Number only. Ex. 5"></td>
                                <td><span class="label label-danger">Inactive</span></td>
                                <td><?php $attributes = 'class = "btn btn-success"'; echo form_submit('submit', 'Start', $attributes);?></td>
                             </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:43:10.677

您需要为每个 INPUT 元素添加 NAME 属性 - 代替 ID 属性或添加到 ID 属性。

例如

```
<form name="newOffer" action="/auth/dashboard" method="post">
    <td>
        <?php echo form_hidden('isnew', 'true');?>
        <?php echo form_hidden('action', 'object');?>
        <input type="text" NAME="newOfferItem" id="newOfferItem" placeholder="Offer Free Item" class="input-xlarge">
    </td>
    <td>
        <input type="text" NAME="newOfferText" id="newOfferText" placeholder="Offer Description" class="input-xlarge" rel="tooltip" title="Description How to get free item">
    </td>
    <td>
        <input type="text" NAME="newOfferFreeOn" id="newOfferFreeOn" placeholder="Stamps for free item" class="input-xlarge" rel="tooltip" title="Number only. Ex. 5">
    </td>
    <td>
        <span class="label label-danger">Inactive</span>
    </td>
    <td>
        <?php $attributes = 'class = "btn btn-success"'; echo form_submit('submit', 'Start', $attributes);?>
    </td>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:48:00.200

总是在元素中添加一个`name`属性。 这是给你的一个例子..`input`

**索引.html**

```
<form method="POST" action="process.php">
    <input type="text" name="username" value="">
    <input type="password" name="password" value="">
    <input type="submit" name="submit" value="login">
</form> 
```

**进程.php**

```
<?php

// checking if submit is pressed

if (isset($_POST['submit'])) {

    // assigning posted values

    $username = $_POST['username'];
    $password = $_POST['password'];

    // testing

    echo $username . "<br>";
    echo $password;
}

?> 
```

# python - Python for 循环小步骤

> ID：16220290
> 
> 赞同：3
> 
> 时间：2013-04-25T16:40:53.160
> 
> 标签：python, loops, for-loop

如何在 python 中创建一个步长为 0.01 的 for 循环？

我试过这个但它不起作用：

```
 for X0 in range (-0.02, 0.02, 0.01):
     for Y0 in range (-0.06, 0.09, 0.01): 
```

它说 TypeError: range() integer end argument expected, got float.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T16:43:14.763

```
[x * 0.01 for x in xrange(10)] 
```

会产生

```
[0.0, 0.01, 0.02, 0.03, 0.04, 0.05, 0.06, 0.07, 0.08, 0.09] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T16:54:18.397

如果您不想使用库：

```
def float_range(a,b,c):
    while a < b:
        yield a
        a += c
for X0 in float_range (-0.02, 0.02, 0.01):
    for Y0 in float_range (-0.06, 0.09, 0.01): 
        print X0, Y0 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-25T16:43:25.213

如错误消息所示，python`range`只接受整数。如果你想使用浮点步骤，你可以使用 numpy 的 arange 或者只划分一个整数范围：

```
>>> import numpy as np
>>> print np.arange(-0.02, 0.02, 0.01)
array([-0.02, -0.01,  0\.  ,  0.01]) 
```

在你的例子中：

```
for X0 in np.arange(-0.02, 0.02, 0.01):
    for Y0 in np.arange(-0.06, 0.09, 0.01): 
```

或者：

```
>>> print [a/0.01 - 0.02 for a in range(4)]
[-0.02, -0.01, 0.0, 0.009999999999999998] 
```

# ruby-on-rails - 如何在 Zeus 的测试环境中运行 Rails 控制台？

> ID：16220292
> 
> 赞同：14
> 
> 时间：2013-04-25T16:40:57.547
> 
> 标签：ruby-on-rails, ruby, gem, zeus

我想做的是`rails console test`使用[Zeus](https://github.com/burke/zeus) gem 运行，例如：`zeus console test`

提前非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-05T15:56:16.200

该解决方案是通过修改您的 zeus.json 文件以包含一个新的控制台命令来实现的，该命令将在我调用的测试环境中运行`test_console`。

这是我的整个**zeus.json**文件，唯一相关的部分是开头的部分`"test_console"`：

```
{
  "command": "ruby -rubygems -r./custom_plan -eZeus.go",

  "plan": {
    "boot": {
      "default_bundle": {
        "development_environment": {
          "prerake": {"rake": []},
          "runner": ["r"],
          "console": ["c"],
          "server": ["s"],
          "generate": ["g"],
          "destroy": ["d"],
          "dbconsole": []
        },
        "test_environment": {
          "cucumber_environment": {"cucumber": []},
          "test_helper": {"test": ["rspec", "testrb"]},
          "test_console": ["tc"]
        }
      }
    }
  }
} 
```

但是，要启用 test_console，您需要在**custom_plan.rb**文件中创建一个自定义计划，如下所示：

```
require 'zeus/rails'

class CustomPlan < Zeus::Rails
  def default_bundle_with_test_env
    ::Rails.env = 'test'
    ENV['RAILS_ENV'] = 'test'
    default_bundle
  end

  def test_console
    console
  end
end

Zeus.plan = CustomPlan.new 
```

请注意，需要 default_bundle_with_test_env ，就像上面在 zeus.json 文件中定义的 test_console 方法一样。

最后，运行：`zeus test_console`或`zeus tc`

# jms - jms 如何与 tibco 合作？

> ID：16220293
> 
> 赞同：7
> 
> 时间：2013-04-25T16:41:07.913
> 
> 标签：jms, tibco, tibco-ems

我有一个订阅 JMS 主题应用程序的 Java 应用程序，该应用程序偶尔会出现以下异常：

```
javax.jms.JMSException: Connection has been terminated
at com.tibco.tibjms.Tibjmsx.buildException(Tibjmsx.java:470)
at com.tibco.tibjms.TibjmsConnection._onDisconnected(TibjmsConnection.java:1946)
at com.tibco.tibjms.TibjmsxLinkTcp$LinkReader.work(TibjmsxLinkTcp.java:314)
at com.tibco.tibjms.TibjmsxLinkTcp$LinkReader.run(TibjmsxLinkTcp.java:250) 
```

在 2 年未动过之后，我收到了这段代码。我的 JMS 知识非常有限。它是 maven 化的，但它没有引用任何 tibco 库。我试图了解当代码库中没有 tibco 引用时如何获得 tibco 异常？

但是，我确实看到了一个名为 LD_LIBRARY_PATH 的系统变量集，它指向一些 tibco 库。

对 JMS shell 有经验的人可以了解这里可能发生的情况吗？搜索代码库显示没有 tibco 导入，只有 javax.jms。

是否有可能使用 jni 或其他东西以某种方式将它们包裹在 LD_LIBRARY_PATH 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-29T12:19:01.020

JMS 标准是一种 API 标准。使用该标准编写的应用程序不需要引用来自任何特定 JMS 实现的类。相反，JNDI 用于获取[连接工厂](http://docs.oracle.com/javaee/5/api/javax/jms/ConnectionFactory.html)（[示例](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS5.html)）。目的是可以通过配置更改使用的 JMS 实现，而不必更改代码。

关于 LD_LIBRARY_PATH，EMS 使用 JNI，并且需要 LD_LIBRARY_PATH，因此您的应用程序使用的 EMS jar 可以找到本机库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T23:44:23.240

> **连接已终止**
> 
> 这并不意味着您的 jms 代码有一些问题，EMS 服务器正在切断连接，因为其他一些问题，如心跳问题等。

# jquery - 禁用基于其他的选项选项

> ID：16220296
> 
> 赞同：4
> 
> 时间：2013-04-25T16:41:21.210
> 
> 标签：jquery

如果在其他选择中选择了确切的选项，如何在选择中禁用多个选项。我在此链接上找到了与我类似的问题的已回答问题：http: [//jsfiddle.net/dZqEu/](http://jsfiddle.net/dZqEu/)

接下来是 jQuery 代码：

```
$(this).siblings('select').children('option').each(function() {
    if ( $(this).val() === value ) {
        $(this).attr('disabled', true).siblings().removeAttr('disabled');   
    } 
```

问题是这仅适用于 2 个选择。我需要总共 3 个选择，这应该禁用选择中相同值的可能性。

此代码不适用于 3 次选择：http: [//jsfiddle.net/dZqEu/968/](http://jsfiddle.net/dZqEu/968/)

提前 Tnx

笔记：

当 select1 设置为 1 时，select 2 设置为 2，我无法在 select3 中禁用值 1&2。它只禁用选择 3 中的值 2 ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T17:03:33.683

试试这个：- [http://jsfiddle.net/Z2yaG/](http://jsfiddle.net/Z2yaG/)

使用焦点获取上一个值并删除禁用的值。在您的 html 中，我为默认选项添加了值 -1。

```
<option value="-1">No Match</option>

     var prev = -1;
$("select").change(function () {
    if ($(this).val() > -1) {
        $("select").not(this).find("option[value=" + $(this).val() + "]").attr('disabled', 'disabled');
    }
    $("select").not(this).find("option[value=" + previous + "]").removeAttr('disabled');
}).focus(function () {
    previous = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:54:20.597

这似乎工作：http: [//jsfiddle.net/QLn9b/1/](http://jsfiddle.net/QLn9b/1/)

它正在使用您的原始代码：

```
$("select").change(function() {   
    $("select").not(this).find("option[value="+ $(this).val() + "]").attr('disabled', true);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:02:27.950

I think this is what you are looking for.

```
$('select').change(function() {

  var select_elements = $('select')
  $.each(select_elements, function(i,elem){
    var sel_values = [];

    // Selecting and Iterating on Sibling Selects        
    var siblis = $(elem).siblings('select')
    $.each(siblis, function(i, sibli){
        if($(sibli).val()!='No Match'){
            sel_values.push($(sibli).val());
        }
    });

    // Iterating on Options of Select
    $(this).children('option').each(function() {
        $(this).removeAttr('disabled');

        if($.inArray($(this).val(), sel_values) !== -1){
            $(this).attr('disabled', true);
        }
    });        

  });    
}); 
```

If All selects has the values from 1 to 6,

```
If select1 value      --> 1,
and select2 value     --> 3 (1 is disabled)
then in select3 value --> 5 (1,3 are disabled) 
```

After selecting select3,

```
In select1  --> 1 (3,5 disabled)
In select2  --> 3 (1,5 disabled)
In select3  --> 5 (1,3 disabled) 
```

Here is the jsfiddle: [http://jsfiddle.net/prem_nagalla1/rY4n3/](http://jsfiddle.net/prem_nagalla1/rY4n3/)

Hope it helps :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T18:25:09.417

这是一种方式。当任何下拉列表更改时，计算所有选定的值（第一个除外）。如果其他框的选定值出现在值列表中，请禁用相应的选项。

```
$('select').change(function() {
    var values = [],
    others = $(this).siblings('select'),
    all = others.andSelf();

    all.each(function() {
        if (this.selectedIndex > 0) {
            values.push(this.options[this.selectedIndex].value);
        }
    });

    others.each(function() {
        for (var i = 0; i < this.options.length; ++i) {
            this.options[i].disabled = $.inArray(this.options[i].value, values) !== -1;
        }
    });
}); 
```

[**演示**](http://jsfiddle.net/dZqEu/999/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T17:04:42.837

尝试这个。

```
$('select').change(function() 
{    
    var value = $(this).val();
    $('option').removeAttr("disabled");
    $('select').each(function ()
    {
        $("option[value=" + $(this).val() + "]").attr("disabled","disabled");
    });
}); 
```

# windows-phone-7 - Windows Phone 隔离存储性能的魔力

> ID：16220300
> 
> 赞同：0
> 
> 时间：2013-04-25T16:41:39.843
> 
> 标签：windows-phone-7, isolatedstorage

我已将小文件合并为大文件。在应用程序第一次启动时，会读取此文件，并在文件系统（隔离存储）上一个一个地创建小文件。

当此文件包含 44 个小文件并且约为 200kb 时 - 算法在设备上工作 120 毫秒。当此文件包含 140 个甚至更小的文件并且约为 400kb 时 - 算法在设备上工作 3000 毫秒。

如果我从这两个文件中只取 44 个文件 - 第一个文件仍然可以使用 ~120，第二个可以使用 ~800ms。

这对我来说似乎很奇怪。文件中数据的格式很简单

```
-INT32 - ENTRIES COUNT
--STRING ENTRY NAME         |
--INT32 ENTRY DATA LENGTH   |  REPEATS {ENTRY COUNT} TIMES
--BYTE[] ENTRY DATA         | 
```

对我来说，这似乎是 Windows Phone 隔离存储机制中的一个魔法。在复制相同数量的条目时，完全没有理由让第二个文件慢 7-8 倍。

复制项目 - [https://www.dropbox.com/s/6bjsve7p8wew3kb/IsoStorageWonder.zip?m](https://www.dropbox.com/s/6bjsve7p8wew3kb/IsoStorageWonder.zip?m)

代码：

```
 public static void CopyCache(ILogger logger)
    {
        using (var isoStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            var streamInfo = Application.GetResourceStream(new Uri(_dataFilePath, UriKind.RelativeOrAbsolute));

            isoStorage.CreateDirectory("HttpCache");

            var binaryReader = new BinaryReader(streamInfo.Stream);
            {
                int itemsCount = binaryReader.ReadInt32();

                for (int i = 0; i < ENTRIES_COUNT; i++)
                {
                    string fileName = binaryReader.ReadString();
                    int length = binaryReader.ReadInt32();
                    byte[] data = binaryReader.ReadBytes(length);

                    using (
                        var fileStream =
                            new IsolatedStorageFileStream(
                                Path.Combine(_rootCacheDir, fileName),
                                FileMode.Create,
                                FileAccess.Write,
                                FileShare.None,
                                isoStorage))
                    {
                        fileStream.Write(data, 0, data.Length);
                    }
                }
            }
        }
    } 
```

魔法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:11:01.097

我有类似的`WebClient`性能问题。
在模拟器中请求需要 0.3-0.5 秒，在设备上需要 8-22 秒。
我很困惑。
但在我的情况下，解决方案非常简单：**不要在调试模式下测试设备的性能。**

我所做的：

1.  将项目编译到您的设备。
2.  停止调试
3.  在手机上关闭您的应用程序（并更好地重启设备）
4.  所有作品都像魅力一样））

在您的测试应用程序中`IsoStorageWonder`：

1.  模拟器`551ms`
2.  模拟器 256 MB`564ms`
3.  HTC Radar WP7.8 调试模式`1835ms`
4.  HTC Radar WP7.8 非调试模式`958ms`

希望我的研究能帮到你。
问候

**UPD**

测试`output2`

1.  模拟器`440ms`
2.  模拟器 256 MB`447ms`
3.  HTC Radar WP7.8 调试模式`287ms` // 很不错
4.  HTC Radar WP7.8 Not Debug Mode `144ms`// 也不错

# php - 将帐户限制为每个用户 1 个 - PHP

> ID：16220305
> 
> 赞同：3
> 
> 时间：2013-04-25T16:42:01.660
> 
> 标签：php, security, paypal, end-user, multiple-accounts

我目前正在设计的网站遇到了一些障碍——基本上我的客户已经很清楚他需要一个人 = 一个帐户的功能，现在我不是最擅长分析的（尽管我有编程背景）所以我真的可以使用一些建议。

我们正在用 PHP 编程，我 100% 知道没有一个解决方案可以 100% 防止问题，但我需要尽可能接近 100%，到目前为止我已经尝试过......

1.  将 cookie 放置到用户浏览器中。解决方法 - 切换浏览器。
2.  跟踪 IP。解决方法 - 更改 IP、重置路由器等（此外，每个 IP 允许多个用户）。
3.  使用分析来尝试跟踪操作，例如帐户 A 被注销，然后一分钟后帐户 B 从同一 IP 登录。（这似乎是最有效的，但需要几个人来保持它，所以我想尽可能地自动化它，或者如果可能的话，消除手动监控的需要。

问题是我的客户网站的用户将根据不同的操作获得报酬，而我的客户已经决定了最低 10 美元的提款金额，并且付款将通过 PayPal 处理。

因此，如果网站在没有这些功能的情况下上线，基本上多个帐户的使用可能会花费我的客户很多钱。

我还想保留这个后端（可能是 cron-tab）。只是要清楚。

任何帮助/输入/建议都将不胜感激。

塔赫

PS-我已经检查了这个问题（[帐户验证：每人只有 1 个帐户](https://stackoverflow.com/questions/5964664/account-verification-only-1-account-per-person)），这是我从第 3 点得到想法的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:30:06.263

真正阻止一个人注册多个帐户的唯一方法是要求他们提供特定于他们的个人信息。我遇到了这个问题，最终不得不跟踪社会安全号码以防止多个帐户。诚然，我正在从事的项目是为一所学校服务的，而学校已经掌握了这些信息。此外，对于注册的新用户，他们提供此信息并不少见。

阅读一些评论，我可以说，即使 PayPal 有办法跟踪重复帐户，您也极不可能被授予访问此信息的权限，即使只是说“是的，这是重复的”或“不是的”不是重复的”。

我真的认为 SSN 将是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T12:30:03.107

AFAIK iovation 使用一组跟踪方法，包括 Flash cookie 和浏览器指纹来跟踪用户和使用的设备。尽管在预算方面它可能不是您的最佳选择，但您可以考虑这些技术本身。

我建议企业为使用单个帐户创建激励措施，这可能比（昂贵的？）花哨的跟踪软件带来更好的回报。

# actionscript-2 - 使用动作脚本 2.0 创建关卡代码

> ID：16220306
> 
> 赞同：0
> 
> 时间：2013-04-25T16:42:06.637
> 
> 标签：actionscript-2

我想创建关卡代码，例如在火海中（[http://armorgames.com/play/351/sea-of-fire](http://armorgames.com/play/351/sea-of-fire)）我有一个带有实例名称“代码”的文本输入框和一个按钮代码：

```
on (release) {
if (code = 96925) {
gotoAndStop(4);
}
if (code = 34468) {
gotoAndStop(5);
}
if (code = 57575) {
gotoAndStop(6);
}
if (code = 86242) {
gotoAndStop(7);
}
if (code = 99457) {
gotoAndStop(8);
}
if (code = 66988) {
gotoAndStop(10);
}
if (code = !96925 && !34468 && !57575 && !86242 && !99457 && !66988) {
gotoAndStop(3);
}
} 
```

我尝试使用 code.text 而不仅仅是代码，我也尝试过在数字周围加上引号，我也尝试过两者，但即使代码无效，它也会始终将您发送到第 10 帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:19:15.457

您需要在 'if' 条件中使用条件运算符 (==)，而不是相等运算符 (=) 如果 'code' 是一个文本字段，那么您需要使用 code.text 您可以放置​​跟踪以检查 code 的值. 我不明白你的最后一个 if 条件

相反，您可以在此处使用 if - else if - else。

# c# - 从 SQL 数据库读取 ASP.Net 中的复选框值？

> ID：16220309
> 
> 赞同：0
> 
> 时间：2013-04-25T16:42:16.880
> 
> 标签：c#, asp.net, sql

我有一个 CheckBoxes 表，它们作为“1”和“0”插入到 SQL 数据库中。但是，我想通过加载事件再次检索这些值，但我无法获取它们。这是我的代码：

```
 private void getAuditChecklist()
{
    SqlCommand cmd = null;
    string conn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
    string queryString = @"SELECT Mount, Braker, Access, Conn_Net, Log_Book, Pictures, Floor, Cb_Lenght, Channel FROM AUDITOR_CHECKLIST " +
        "WHERE SITE_ID = @SiteID";        

    using (SqlConnection connection =
               new SqlConnection(conn))
    {
        SqlCommand command =
            new SqlCommand(queryString, connection);
        connection.Open();
        cmd = new SqlCommand(queryString);
        cmd.Connection = connection;

        cmd.Parameters.Add(new SqlParameter("@SiteID", //the name of the parameter to map
              System.Data.SqlDbType.NVarChar, //SqlDbType value
              20, //The width of the parameter
              "SITE_ID")); //The name of the column source
        //Fill the parameter with the value retrieved
        //from the text field
        cmd.Parameters["@SiteID"].Value = foo.Site_ID;

        SqlDataReader reader = cmd.ExecuteReader();
while (reader.Read())
   {                    
   CheckBox1.Checked = (reader.GetBoolean(reader.GetOrdinal("Mount")));
   CheckBox2.Checked = (reader.GetBoolean(reader.GetOrdinal("Braker")));
   CheckBox3.Checked = (reader.GetBoolean(reader.GetOrdinal("Access")));
   CheckBox4.Checked = (reader.GetBoolean(reader.GetOrdinal("Conn_Net")));
   CheckBox5.Checked = (reader.GetBoolean(reader.GetOrdinal("Log_Book")));
   CheckBox6.Checked = (reader.GetBoolean(reader.GetOrdinal("Pictures")));
   CheckBox8.Checked = (reader.GetBoolean(reader.GetOrdinal("Floor")));
   CheckBox9.Checked = (reader.GetBoolean(reader.GetOrdinal("Cb_lenght")));
   CheckBox10.Checked = (reader.GetBoolean(reader.GetOrdinal("Channel")));
   } 
   reader.Close();
    }        
} 
```

从 sql db 获取复选标记我缺少什么？下面是插入sql的方法：

```
 private void SaveAuditChecklist()
{
    if (auditChecklist != null)
    {
        SqlCommand cmd = null;
        string conn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

        string queryString = @"INSERT INTO AUDITOR_CHECKLIST VALUES(" +
            "@SiteID, @Mount, @Braker, @Access, @ConnNet, @LogBook, @Pictures, @Floor, @CbLenght, @Channel) ";

        using (SqlConnection connection =
                   new SqlConnection(conn))
        {
            SqlCommand command =
                new SqlCommand(queryString, connection);
            connection.Open();
            cmd = new SqlCommand(queryString);
            cmd.Connection = connection;
            cmd.Parameters.Add(new SqlParameter(
                "@SiteID",                        //the name of the parameter to map
                System.Data.SqlDbType.NVarChar,   //SqlDbType value
                20,                               //The width of the parameter
                "Site_ID"));                      //The name of the column source

            //Fill the parameter with the value retrieved
            //from the text field
            cmd.Parameters["@SiteID"].Value = foo.Site_ID;
            cmd.Parameters.Add(new SqlParameter("@Mount", SqlDbType.Bit));
            cmd.Parameters["@Mount"].Value = CheckBox1.Checked;
            cmd.Parameters.Add(new SqlParameter("@Braker", SqlDbType.Bit));
            cmd.Parameters["@Braker"].Value = CheckBox2.Checked;
            cmd.Parameters.Add(new SqlParameter("@Access", SqlDbType.Bit));
            cmd.Parameters["@Access"].Value = CheckBox3.Checked;
            cmd.Parameters.Add(new SqlParameter("@ConnNet", SqlDbType.Bit));
            cmd.Parameters["@ConnNet"].Value = CheckBox4.Checked;
            cmd.Parameters.Add(new SqlParameter("@LogBook", SqlDbType.Bit));
            cmd.Parameters["@LogBook"].Value = CheckBox5.Checked;
            cmd.Parameters.Add(new SqlParameter("@Pictures", SqlDbType.Bit));
            cmd.Parameters["@Pictures"].Value = CheckBox6.Checked;
            cmd.Parameters.Add(new SqlParameter("@Floor", SqlDbType.Bit));
            cmd.Parameters["@Floor"].Value = CheckBox8.Checked;
            cmd.Parameters.Add(new SqlParameter("@CbLenght", SqlDbType.Bit));
            cmd.Parameters["@CbLenght"].Value = CheckBox9.Checked;
            cmd.Parameters.Add(new SqlParameter("@Channel", SqlDbType.Bit));
            cmd.Parameters["@Channel"].Value = CheckBox10.Checked;
            cmd.ExecuteReader();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:46:55.557

布尔值在 Sql 数据库中存储为 1 或 0，但数据读取器会为您进行转换。而是使用：

```
var myBool = reader.GetBoolean(i); 
```

然后只需将值分配给控件的 value 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T15:08:11.250

> 最终让读者了解了获取复选标记值的方式。我用工作代码编辑了我的问题；但是，以下是我为读者添加或更改的内容：

```
while (reader.Read())
{                    
CheckBox1.Checked = (reader.GetBoolean(reader.GetOrdinal("Mount")));
CheckBox2.Checked = (reader.GetBoolean(reader.GetOrdinal("Braker")));
CheckBox3.Checked = (reader.GetBoolean(reader.GetOrdinal("Access")));
CheckBox4.Checked = (reader.GetBoolean(reader.GetOrdinal("Conn_Net")));
CheckBox5.Checked = (reader.GetBoolean(reader.GetOrdinal("Log_Book")));
CheckBox6.Checked = (reader.GetBoolean(reader.GetOrdinal("Pictures")));
CheckBox8.Checked = (reader.GetBoolean(reader.GetOrdinal("Floor")));
CheckBox9.Checked = (reader.GetBoolean(reader.GetOrdinal("Cb_lenght")));
CheckBox10.Checked = (reader.GetBoolean(reader.GetOrdinal("Channel")));
} 
```

# jquery - JQuery根据值向表行添加一个类

> ID：16220311
> 
> 赞同：0
> 
> 时间：2013-04-25T16:42:20.953
> 
> 标签：jquery

我需要检查 div 内表中的值文本。如果 a 中的一个值`<td></td>`等于“INVALID”，我想将“red”类添加到`<tr>`.

html 看起来像这样 -

```
<div id="MyDiv">
<table>
    <tbody>
        <tr> 
           <td>1</td>
           <td>GOOD</td>      
        </tr>
        <tr>       
           <td>2</td>
           <td>INVALID</td>      
        </tr>
        <tr>       
           <td>3</td>
           <td>GOOD</td>      
        </tr>
    </tbody>
</table>
</div> 
```

我有 JQuery，它将在页面上找到*任何*表，并将类放在`<td>`. 如何更改此以将类添加到`<tr>`某个内部`<div>`？

```
 jQuery.each($('tbody tr td'), function () {
        if (this.textContent == "INVALID") {
            $(this).addClass("red");
        }
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:43:29.590

只需调用[.parent()](http://api.jquery.com/parent/)方法

```
jQuery.each($('tbody tr td'), function () {
    if (this.textContent == "INVALID") {
        $(this).parent().addClass("red");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:46:27.800

```
if (this.textContent == "INVALID") {
      $(this).closest('tr').addClass("red");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:43:40.700

你可以做

```
$('tbody tr td').each(function() {
    if ($(this).text() == "INVALID") {
        $(this).parent().addClass("red");
    }
}); 
```

小提琴：http: [//jsfiddle.net/hMssR/](http://jsfiddle.net/hMssR/)

# php - CakePHP：创建新的 HABTM 行而不是更新其他

> ID：16220313
> 
> 赞同：3
> 
> 时间：2013-04-25T16:42:27.297
> 
> 标签：php, mysql, cakephp, cakephp-2.0, cakephp-2.1

我有两个具有 HABTM（拥有并属于许多）关系的模型：Qsets 和 Questions。

以下操作（在 QsetsController.php 中）应该会在 qsets_questions 表中产生一个新行，新问题出现在新 qset 中。但相反，它会*更新*现有行，从而导致该问题从以前的 qset 开始并添加到新的。

我究竟做错了什么？

```
public function admin_add_question( $qset_id, $question_id) {

    //find the qset...
    $qset = $this->Qset->find('first', array('id'=>$qset_id));

    $this->Qset->QsetsQuestion->create();
    $data = array(
            "Qset"=> array ("id"=>$qset_id),
            "Question"=>array ("id"=>$question_id)
    );
    Controller::loadModel('Question');
    $r= $this->Question->save($data);

    $this->Session->setFlash('Question id['.$question_id.'] added.');

    $this->redirect( $this->referer() );
} 
```

如果我的描述不清楚，这里会发生：

在添加问题之前...

```
**Qset 1**
Question 1
Question 2

**Qset 2**
Question 3
Question 4 
```

将问题 2 添加到 Qset 2 时会*发生*什么

```
**Qset 1**
Question 1
Question 2

**Qset 2**
Question 3
Question 4
Question 2 
```

反而会发生什么...

```
**Qset 1**
Question 1
          <----removed
**Qset 2**
Question 3
Question 4
Question 2 
```

**更新**：这是我的 qsets_questions 表的转储：

```
CREATE TABLE `qsets_questions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `question_id` int(11) NOT NULL,
  `qset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=64 ; 
```

**解决方案：**

这是工作版本，感谢@nuns

```
public function admin_add_question( $qset_id, $question_id) {

    $this->Qset->QsetsQuestion->create();
    $data = array(
            "qset_id"=>$qset_id,
            "question_id"=>$question_id
    );
    Controller::loadModel('Question');
    $this->Question->QsetsQuestion->save($data);
    $this->Session->setFlash('Question id['.$question_id.'] added.');       
    $this->redirect( $this->referer() );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:15:38.393

好的，这就是我*认为*正在发生的事情：

你没有使用超级有用的 HABTM 关系魔法。cake 不是将此表视为单纯的关系表，而是转到定义的模型并查看您定义的关系以及 primaryKeys 和 displayFields 等。

当您有一个复杂的 HABTM 表时，这没关系。但如果是这样的话，你的数据数组就乱了，因为你没有单独添加`Question`和`Qset`。我的意思是，你不做

```
$data = array('Question'=>array('title'=>'new_question'),
              'Qset'=>array('name'=>'lets say qset'));
$this->Question->saveAll($data); 
```

这样做，您让 cake 为您解析 HABTM 关联，​​并且该数据结构就可以了。但是您的模型文件夹中有自己的 QsetsQuestion 模型。所以你保存的数据应该和任何其他表一样，就像这样

```
$data = array('qset_id'=> $qset_id,
              'question_id'=> $question_id);
$this->Question->QsetsQuestion->save($data); 
```

这会在 qsets_questions 表中创建一个新的 id，并使用新的关系，就像你想要的那样。

但是要小心，因为你使用自己的模型，如果你没有正确设置验证，你可能有很多次相同的外键，因为默认情况下，蛋糕只检查 id 必须是唯一的.

**[编辑]** 经过一番澄清，上面的解决方案确实解决了“问题”，但实际上并不是这种行为的原因。

Cakephp 有一个[*特性*](http://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated)

> 默认情况下，当保存 HasAndBelongsToMany 关系时，Cake 会在保存新行之前删除连接表上的所有行。例如，如果您有一个关联了 10 个孩子的俱乐部。然后，您使用 2 个孩子更新 Club。俱乐部只有 2 个孩子，而不是 12 个。

因此，当您要添加新行时，cake 会删除所有以前的关联并添加新关联。解决此问题的一种方法是查找`Qsets`属于问题的所有问题并将它们添加到`$data`数组中（添加要添加的新问题关联）。[此链接](http://rottmann.net/2012/07/cakephp-hasandbelongstomany-relationship-queries-demystified/)帮助我了解 HABTM 关联（查找“挑战 IV”）。

我知道我之前给出的解决方案可以帮助您解决“问题”，但它的印象是您在`QsetsQuestion`某处有一个模型文件。由于您不这样做，因此解决方案是获取所有`Questions`关联并将它们添加为新数组。*或者*实际创建一个`QsetsQuestion`模型，并进行如下关联：

```
Qset hasMany QsetsQuestion
QsetsQuestion belongsTo Qset, Question
Question hasMany Qsets. 
```

或者改变蛋糕的行为......我知道，它们看起来都不漂亮。

所以，总结一下解决方案：

*   每次要保存新的Qset-Question关联时，取回之前存储的关联，放入要保存的数组中，保存

    ```
    //find previously associated Qsets, lets say it's 1,2,3 and 4
    $data = array('Question'=>array('id'=>1),
              'Qsets'=>array('Qsets'=>array(1,2,3,4, $new_qset));
    $this->Question-save($data); 
    ```

注意没有`QsetsQuestion`，因为它不存在。这应该是第一个选项，因为 HABTM 模型并不复杂

*或者*

*   在您的模型文件夹中创建`QsetsQuestion`并更改关联，如上所示。控制器上的保存部分将是

    ```
    $data = array('qset_id'=>1, 'question_id'=>1)
    $this->Question->QsetsQuestion->save($data);    //also works with $this->Qset->QsetsQuestion 
    ```

它要简单得多（也许），但是您必须创建一个新文件，并记住检查以前是否没有类似的关联（在插入之前检查是否存在 2-2 个元组）。简单的验证规则应该可以工作。

*或者*

*   为此更改 cakephp 行为......我不喜欢这个。

# javascript - Jasmine 和 Jquery，加载 JSON 文件

> ID：16220315
> 
> 赞同：1
> 
> 时间：2013-04-25T16:42:31.900
> 
> 标签：javascript, jquery, ajax, coffeescript, jasmine

我有以下方法来使用 coffeescript/jquery 加载 JSON 文件：

```
Class JsonParser

this.return  = (json_file_path, string_to_query) ->
  $.getJSON json_file_path, (data) ->
    $.each data, (key,val) ->
     if key == string_to_query
       return val 
```

我正在 Jasmine 中测试它：

```
expect(JsonParser.return("file.json", "key").toEqual("value") 
```

但 Jasmine 吐出的却是：

```
Expected { readyState : 1, getResponseHeader : Function, getAllResponseHeaders
 : Function, setRequestHeader : Function, overrideMimeType : Function, statusCode : Function, abort : 
Function, state : Function, always : Function, then : Function, promise : Function, pipe : Function, d
one : Function, fail : Function, progress : Function, complete : Function, success : Function, error :
 Function } to equal 'value'. 
```

假设 JSON 文件只有一行：`{ "key": "value" }`

我只是被 jquery/coffeescript/ajax 等弄湿了，不明白 Jasmines 的反应。如果需要更多信息，请告诉我谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:04:51.180

您的问题是您的`return`方法不会返回您认为的结果。您的`return`函数返回返回的内容[`getJSON`](http://api.jquery.com/jQuery.getJSON/)并且`getJSON`是 AJAX 调用。jQuery 的 AJAX 调用所有 return [`jqXHR`s](http://api.jquery.com/Types/#jqXHR)，这与 AJAX 回调返回的内容无关。事件顺序如下所示：

1.  你打电话`JsonParser.return`。
2.  `return`来电`$.getJSON`。
3.  `getJSON`对服务器进行异步调用，然后返回一个`jqXHR`.
4.  `return`返回相同`jqXHR`的`getJSON`返回值。
5.  一段时间过去了。
6.  服务器开始响应，并调用您的回调来搜索 JSON。

问题是，当**(5)**发生时，调用的代码`JsonParser.return`仍在运行，但它没有 JSON。

绕过 AJAX 调用的异步特性的常用方法是发送一个回调函数，该函数将在准备就绪时被调用：

```
@return: (json_file_path, string_to_query, callback) ->
  $.getJSON json_file_path, (data) ->
    $.each data, (key,val) ->
     if key == string_to_query
       callback(val) 
```

然后你会像这样使用它：

```
JsonParser.return("file.json", "key", (value) ->
  # Do whatever needs to be done with value in here.
) 
```

现在你有了一些应该工作的东西，你可以在这里找到如何使用 Jasmine：

> [如何使用 Jasmine 验证 jQuery AJAX 事件？](https://stackoverflow.com/q/4662641/479863)

# sql - 使用 Razor 的 SQL 返回码

> ID：16220324
> 
> 赞同：2
> 
> 时间：2013-04-25T16:42:56.440
> 
> 标签：sql, razor

我正在寻找一种在使用 razor 发出任何数据库命令时获取 SQL 返回码的方法。我没有找到任何例子。SQL 返回码是否与结果集一起返回？例如，

```
var products = db.Query("SELECT * FROM products"); 
```

将为您提供结果集，但如果存在数据库错误，我能想到的显示错误的唯一方法是通过 try catch 块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:10:47.270

你可以检查这个：

[从存储过程中获取返回值](https://stackoverflow.com/questions/14735477/entity-framework-code-first-get-return-value-from-stored-procedure)

```
var returnCode = new SqlParameter();
returnCode.ParameterName = "@ReturnCode";
returnCode.SqlDbType = SqlDbType.Int;
returnCode.Direction = ParameterDirection.Output;

// assign the return code to the new output parameter and pass it to the sp
var data = _context.Database.SqlQuery<Item>("exec @ReturnCode = spItemData @Code, @StatusLog OUT", returnCode, code, outParam); 
```

# c++ - C++ 是否内联函数会强制复制其参数？

> ID：16220330
> 
> 赞同：2
> 
> 时间：2013-04-25T16:43:10.627
> 
> 标签：c++, inline

我最近决定整理一个头文件，它有很多这样的定义：

```
// api.h
template< typename T>
inline void func( T param )
{
    // stuff here
} 
```

所以我想把它变成：

```
// api.h
#include "api_details.h"
template< typename T>
inline void func( T param )
{
    return details::func( param );
}

// api_details.h
namespace details {
    template< typename T>
    inline void func( T param )
    {
        // stuff here
    }
} 
```

希望这`inline`不会增加我正在执行的额外副本的成本。

尽管' [C++ 中的答案是否内联函数会阻止复制？](https://stackoverflow.com/questions/13807098/c-do-inline-functions-prevent-copying)' 似乎暗示没有复制发生，这个问题出现了：

**如果内联不复制函数参数，那么下面的行为会不会很糟糕？**

```
inline void change_value( int i ) {
    i++;
}

...
int x=5;
change_value(x);
assert(x==5); 
```

只是优化器决定在哪里复制，还是标准对此有任何说明？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T16:47:39.997

> 如果内联不复制函数参数，那么下面的行为会不会很糟糕？

如果您更改参数，它将被复制。它与功能的存在`inline`与否无关。

> 只是优化器决定在哪里复制，还是标准对此有任何说明？

是的，这是优化器的任务。标准只提到行为，而不是实现（有一些关于实现的参考，但只有少数）。而且`inline`它本身并不能保证函数会被内联，反之亦然，优化器可能会内联未声明为`inline`.
真正重要的是，按值传递的参数不会被函数调用更改。无论是否声明它`inline`，也无论它实际上是否被内联。
鉴于现在编译器在优化方面通常比人们更聪明，`inline`通常意味着不是“内联这个函数”，而是“这个函数可能在翻译单元中有多个（但仍然相同！）定义”。

# java - java分数中的数学计算

> ID：16220332
> 
> 赞同：0
> 
> 时间：2013-04-25T16:43:13.613
> 
> 标签：java

我正在尝试实现基本计算。该程序接受 2 个数字，它可以正常工作，10 除以 5 并给出答案 2。如果任何较小的值除以较大的值，它会给我 0，我可以得到分数的答案吗？

示例 8 除以 100 等于 8/100 而不是 0。

```
 public class numtheory {

     public static void main(String[] args) {

         int n1;
         int n2;
         Scanner scan = new Scanner(System. in );
         System.out.println("input number 1: ");
         n1 = scan.nextInt();
         System.out.println("input number 2: ");
         n2 = scan.nextInt();
         int temp1 = n1 / n2;
         System.out.print("\n Output :\n");
         System.out.print(temp1);
         System.exit(0);

     }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:44:36.433

您需要将数字转换为`double`：

```
double temp = ((double) n1) / n2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T17:34:33.763

如果你想产生一个分数，你可以打印出来：

```
System.out.println(n1 + "/" + n2); 
```

这将打印出您给出的任何数字，但它们不会减少。但是，您可以自己减少它们，例如：

```
int n = n1;
int d = n2;

while (d != 0) {
    int t = d;
    d = n % d;
    n = t;
}

int gcd = n;

n1 /= gcd;
n2 /= gcd; 
```

然后打印出来：

```
System.out.println(n1 + "/" + n2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:47:28.217

您需要使用双精度而不是使用整数。这是因为整数只能包含 while 数字，而 double 可以包含十进制数字。

你可以通过 dooing 将所有 int 更改为 double 或将 int 转换为 double

```
((double) yourIntValue) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T16:49:42.563

您还可以将输入作为字符串获取，并使用

```
double dval=Double.parseDouble(value); 
```

# jquery - 使用 jquery 重置表单的最佳方法

> ID：16220338
> 
> 赞同：0
> 
> 时间：2013-04-25T16:43:21.803
> 
> 标签：jquery, innerhtml, reset

我有一个表单的以下 JavaScript 和 html：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <!--<script src="./_js/jquery-1.7.2.min.js"></script>-->
    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            $("#clear_form").click(function(){   
                var resetForms = function () {
                    $('form').each(function() {
                        this.reset();
                    }); // end earch
                 }; // end var resetForms
                 resetForms(); 

// ************edit based on questions responses *************
                 var x = document.getElementById("all_clear");
                 x.innerHTML = '';

// *** still not working *** **
//******************** end edit based on responses *****************

            });// end clear form

            $("#t_form").submit(function(){
                var user_input = $("#u_input").val();
                $.ajax({
                      type: "POST",
                      url: "response.php",
                      dataType: 'json',
                      data: {email: user_input},
                      success: function(msg){
                          $("#all_clear").replaceWith(msg.email);
                      }, // end success

                      error: function(requestObject, error, errorThrown) {
                        alert(error);
                        alert(errorThrown);
                      } // end error
                });// end ajax
            }); // end submit

        });// end ready 
    </script> 
</head>
<body>
    <form id="t_form" onsubmit="return false;">
    <p>Email: <input id="u_input" type="text" value="Your email"></p>
    <p id="first">Click this button when you are done.</p>
    <br />
    <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
    <input type="submit" anme="reset" class="button" id="clear_form" value="Clear Form" />
    <br />
    <p id="all_clear"></p>
    </form>

</body>
</html> 
```

当我单击“清除表单”按钮时，用户输入字段会重置，但不会重置`<p id="all_clear"></p>`

我正在尝试重置整个表单。

**进行上述更改后，编辑** 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:19:32.723

我注意到当我单击“清除表单”按钮时，ajax 请求被触发到服务器。

所以，我从表单（在 HTML 中）中删除了“清除表单”按钮，并使用`getelementbyid`了其他答案之一，现在整个事情都正常了。没什么可看的，但它只是一个学习工具。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <!--<script src="./_js/jquery-1.7.2.min.js"></script>-->
    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            $("#clear_form").click(function(){ 

                var x = document.getElementById("all_clear");
                x.innerHTML = '';

                var resetForms = function () {
                    $('form').each(function() {
                        this.reset();
                    }); // end earch
                 }; // end var resetForms
                 resetForms(); 
            });// end clear form

            $("#t_form").submit(function(){
                var user_input = $("#u_input").val();
                $.ajax({
                      type: "POST",
                      url: "response.php",
                      dataType: 'json',
                      data: {email: user_input},
                      success: function(msg){
                          var new_message = msg.email;
                          var x = document.getElementById("all_clear");
                          x.innerHTML = msg.email;
                      }, // end success

                      error: function(requestObject, error, errorThrown) {
                        alert(error);
                        alert(errorThrown);
                      } // end error
                });// end ajax
            }); // end submit  
        });// end ready 
    </script> 
</head>
<body>

    <form id="t_form" onsubmit="return false;">
    <p>Email: <input id="u_input" type="text" value="Your email"></p>
    <p id="first">Click this button when you are done.</p>
    <br />
    <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
    </form>

     <input type="submit" anme="reset" class="button" id="clear_form" value="Clear Form" />
    <br />
    <p id="all_clear"></p>
</body>
</html> 
```

# mysql - 将每个用户的被阻止用户列表存储在 $_SESSION var 中以进行查询排除，还是使用子查询“实时”排除更好？

> ID：16220339
> 
> 赞同：2
> 
> 时间：2013-04-25T16:43:22.147
> 
> 标签：mysql, subquery, query-optimization, session-variables

在我的一个 PHP/MySQL 站点上，每个用户都可以阻止站点上的所有其他用户。这些块存储在一个`Blocked`表中，每一行代表谁进行了阻塞以及谁是块的目标。这些列被索引以便更快地检索用户的整个“阻止列表”。

对于每个用户，我们必须从任何搜索结果中排除出现在其阻止列表中的任何用户。

为了做到这一点，最好是：

1）在用户登录时生成“阻止列表”，方法是在登录时查询`Blocked`表**一次**并将其保存到`$_SESSION`（并在他们更改“阻止列表”并将其重新保存到时重新查询`$_SESSION`） ，然后这样查询：

`NOT IN ($commaSeparatedListFromSession)`

或者

2）通过对每个用户的搜索查询使用子查询，直接在查询中“实时”排除被阻止的用户：

`NOT IN (SELECT userid FROM Blocked WHERE Blocked.from = $currentUserID)`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:48:36.980

如果网站是 PHP 并且每个用户的阻止列表少于 100 个，我会将其存储在一个表中，在更改/登录时将其加载到 $_SESSION。您可以在每个页面加载时轻松地将其从 SQL 加载到然而，局部变量。

我将存储在 $_SESSION 中的是一个标志“has_blocklist_contents”，它将决定您是否应该在页面加载时加载或检查阻止列表。

我认为使用 PHP 过滤掉它们可能更聪明，而不是在所有查询中使用 NOT IN。

我想以这种方式实现有两个原因：

1.  您的数据库可以为系统上的所有用户重复使用 SQL，从而提高检索评论等的性能。
2.  您的阻止列表大部分时间都是空的，因此您不会为大多数用户增加任何处理时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:40:17.633

我认为有第三种解决方案。在我看来，这将是更好的方法。

如果你能写这个

```
NOT IN (SELECT userid FROM Blocked WHERE Blocked.from = $currentUserID) 
```

那么你肯定可以写这个。

```
....
SomeTable st
LEFT JOIN
Blocked b
ON( st.userid = b.userid AND Blocked.from = $currentUserID)
WHERE b.primaryKey IS NULL; 
```

我希望你明白我上面的查询的意思。这样您就可以两全其美，即您不必运行 2 个查询，也不必将数据保存在`$_SESSION`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:47:37.220

不要将`$_SESSION`用作[适当的缓存系统](http://memcached.org/)的替代品。您堆积的垃圾`$_SESSION`越多，您必须为每个请求加载的越多。

如果您不小心调整数据库，则使用子选择排除可能会非常缓慢。确保您的索引涵盖所有`WHERE`条件。

# php - 来自数据库的同位素过滤库

> ID：16220344
> 
> 赞同：1
> 
> 时间：2013-04-25T16:43:29.710
> 
> 标签：php, mysql, jquery-isotope

抱歉，我在编码方面没有太多经验，但正在努力学习。

我正在将 Isotope 插件用于图像库，我想将其连接到 mysql 数据库，而不是对每个图像、标题、类别和描述进行硬编码。有人可以帮我开始吗？

这是我正在尝试使用的画廊的一个例子。它都是硬编码的，我想将它转换为数据库驱动的。

[http://www.wiseguys-themes.com/wiseguys/creative/portfolio-filter-4columns.html](http://www.wiseguys-themes.com/wiseguys/creative/portfolio-filter-4columns.html)

这是硬编码的样子……只显示一个项目。

**HTML**

```
 <!-- Isotope filters
    ================================================== -->

    <section class="isotopeFilters clearfix">

      <ul class="option-set clearfix" data-option-key="filter">
          <li><a href="#" data-filter=".outdoor">Outdoor Living</a></li>
          <li><a href="#" data-filter=".bathrooms">Bathrooms</a></li>
          <li><a href="#" data-filter=".master">Master Suites</a></li>
          <li><a href="#" data-filter=".kitchen">Kitchens</a></li>
          <li><a href="#" data-filter=".dining">Dining Rooms</a></li>
          <li><a href="#" data-filter=".office">Office</a></li>
          <li><a href="#" data-filter=".great">Great Rooms</a></li>
          <li><a href="#" data-filter=".bonus">Bonus Room/Man Cave</a></li>
          <li><a href="#" data-filter="*">All</a></li>
      </ul>

      <!-- Responsive Filters
      ================================================== -->
      <form action="#" method="post" class="hidden">
          <select>
              <option value="">Categories</option>
          </select>
      </form>
    </section>

<!-- Isotope container
    ================================================== -->

    <section class="isotopeContainer portfolio left-twenty">

                <div class="element onefourth kitchen">

                    <div class="portfolioImage">
                        <a class="jackbox" data-group="work1" data-thumbTooltip = "Image Title" data-title="Image Title with <a href='http://themeforest.net/user/wiseguys' target=_blank'>link</a>"  data-description="#description_1" href="images/portfolio/1.jpg">
                           <div class="jackbox-hover jackbox-hover-blur jackbox-hover-magnify"></div>
                           <img width="225" height="170" src="images/portfolio/thumbs4/1.png" alt="" />
                           <span class="portfolioImageOver transparent"></span>
                       </a>
                    </div>

                    <div class="portfolioText" data-targetURL="portfolio-single.html">
                       <span class="portfolioTextOver transparent"></span>
                       <p>Single image example</p>
                       <span>- illustration -</span>
                    </div>

                    <span class="portfolioArrow"></span>

                    <!-- Sample div used as an item's description, will only appear inside JackBox -->
                    <div class="jackbox-description" id="description_1">
                        <h3>Description Title One</h3>
                        <a href="#">Link</a> ipsum dolor sit amet, consectetur adipiscing elit. In est metus, tincidunt vitae eleifend sit amet, porta a sapien. Fusce in dolor nec purus facilisis dictum. tincidunt sed quam. 
                    </div>

                </div>

    </section><!-- end isotope container --> 
```

这是我的PHP。当然，我已经在我的实际文件中替换了 db_username 和 db_password。

**PHP**

```
 <?      
          $con = mysql_connect("localhost", "db_username", "db_password");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("gallery", $con);

$sql="SELECT * FROM entry WHERE  status = 'registered'";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result)) {
    //Category ids
    $cat =  $row['id']  ;

    print "<p >" . $row['cat'] . "</p>";
    print "<p >" . $row['image'] . "</p>";
    print "<p class='title'>" . $row['title'] . "</p>";
    print "<p class='description'> Description: " . $row['description'] . "</p>";

    print "</div>";

}

mysql_close($con);         

             ?> 
```

我可以连接到数据库，但不确定要获取所有画廊图像以显示在四列中的代码应该是什么，并且仍然可以过滤。

**更新**

我已经尝试了 Carlos 提供的代码，但没有让它按需要工作。我对代码进行了一些编辑以匹配我所拥有的。它连接到数据库，但我认为输出 HTML 存在问题。这是我所拥有的...

```
 <section class="isotopeContainer portfolio left-twenty">

    <?PHP
    //connect in db
$mysqli = new mysqli('localhost', 'db user', 'my db password', 'db name');

//check for error
if ($mysqli->connect_error) {
die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
}

//mount query 
$query = 'SELECT * FROM gallery WHERE type=\'image\'';

//declare var array
$array = array();

//use query and make associative array.
if($result = $mysqli->query($query)){
//fetch associative array
while ($row = $result->fetch_assoc()){
    $array[] = $row;
}
}

/*use associative array and make html*/

//count array
$count = count($array);

//declare container var for html code
$html = '';

//note: but I think it's impossible to put link on titles. I think, in this case you  need to use fancybox and put link in description
for($i=0; $i<$count; $i++){
$html .= '<div class="element onefourth illustration">'.
         '<div class="portfolioImage">'.
         '<a class="jackbox" data-group="'.$array[i]["cat"].'" data-thumbTooltip = "'.$array[i]["title"].'" data-title="'.$array[i]["title"].'"   href="http://holmesbydesign.com/test/galleryimages/'.$array[i]["url"].'>'.
         '<div class="jackbox-hover jackbox-hover-blur jackbox-hover-magnify"></div>'.
         '<img width="225" height="170" src="http://holmesbydesign.com/test/galleryimages/'.$array[i]["image"].'" alt="" />'.
         '<span class="portfolioImageOver transparent"></span>'.
         '</a>'.
         '</div>'.
         '<div class="portfolioText" data-targetURL="portfolio-single.html">'.
                        '<span class="portfolioTextOver transparent"></span>'.
                       '<p>'.$array[i]["description"].'</p>'.
                       '<span>- '.$array[i]["title"].' -</span>'.
                     '</div>'.

                     '<span class="portfolioArrow"></span>'.

                '</div>' ;
}

//and finally display html code
echo $html;
?>
</section><!-- end isotope container --> 
```

你可以在这里看到代码：http: [//holmesbydesign.com/test/portfolio2.php](http://holmesbydesign.com/test/portfolio2.php)

这是我想要的样子：[http ://holmesbydesign.com/test/portfolio.php](http://holmesbydesign.com/test/portfolio.php)

输出未正确放置结束 div 标记。我正在尝试研究，看看我是否能找到解决方案。

**再次更新**

另外，这里是关于数据库的信息。

表是：画廊

表中的列是：

**id**（数字 1、2、3 等）

**图片**（图片名称，不完整的 URL……例如：gallery_0cda5_image4.jpg）

**视频**（视频的网址）

**标题**（例如：厨房）

**类型**（数字，这是上传程序中的一个选择字段，并从“类型”表中提取类型，其中 1 = 图像，2 = 视频）

**猫**（数字，这是上传程序中的一个选择字段，并从“猫”表中拉出猫，其中 1 = 外部，2 = 户外生活，3 = 厨房等）

**描述**（在插孔中使用的描述）

我不确定，因为如果在上面的代码中正确设置，这里使用了三个不同的表。

我认为查询设置不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:27:25.990

您需要将数据库图像、文本和其他内容分开，而在 php 中，您需要从数据库调用并使用带有数据库数据的 html 代码安装在变量中。

就像是：

```
//connect in db
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

//check for error
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
}

//mount query
$query = 'SELECT * FROM gallery WHERE type=\'images\'';

//declare var array
$array = array();

//use query and make associative array.
if($result = $mysqli->query($query)){
    //fetch associative array
    while ($row = $result->fetch_assoc()){
        $array[] = $row;
    }
}

/*use associative array and make html*/

//count array
$count = count($array);

//declare container var for html code
$html = '';

//note: but I think it's impossible to put link on titles. I think, in this case you need to use fancybox and put link in description
for($i=0; $i<$count; $i++){
    $html .= '<div class="portfolioImage">'.
             '<a class="jackbox" data-group="work1" data-thumbTooltip = "'.$array[i]["title"].'" data-title="'.$array[i]["title"].'"  data-description="#description_1" href="'.$array[i]["url"].'>'.
             '<div class="jackbox-hover jackbox-hover-blur jackbox-hover-magnify"></div>'.
             '<img width="225" height="170" src="'.$array[i]["thumb_url"].'" alt="" />'.
             '<span class="portfolioImageOver transparent"></span>'.
             '</a>'.
             '</div>';
}

//and finally display html code
echo $html; 
```

对于您的情况，您可以使用许多选项。

在您的同位素中，您可以使用“sortBy：'random'”随机项目。

无论如何，请等待更有经验的用户发帖。

希望这可以帮助。

# powershell - 确定 Powershell 中 COM 和 .NET DLL 之间的区别

> ID：16220347
> 
> 赞同：0
> 
> 时间：2013-04-25T16:43:30.677
> 
> 标签：powershell

我正在编写一个脚本来将 DLL 从 bin 文件夹复制并移动到映射驱动器，并且我需要在此过程中注册/取消注册 DLL。我已经想出了如何做到这一切，但有一个问题。我正在开发的程序使用 VB6 COM DLL 和 VB.NET .NET DLL。我知道 COM DLL 使用 regsvr32.exe，而 .NET DLL 使用 regasm.exe，但我有兴趣根据我正在移动的 DLL 以编程方式调用正确的函数。有没有办法确定我在 Powershell 中使用的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:54:15.397

称呼

```
[Reflection.Assembly]::LoadFile( `mydll.dll`) 
```

如果它不是 .Net dll，它应该引发 BadImageFormatException。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.badimageformatexception.aspx)：

“当动态链接库（.dll 文件）或可执行文件（.exe 文件）的文件格式不符合公共语言运行库所期望的格式时，将引发此异常。特别是在以下条件： ...

尝试加载非托管动态链接库或可执行文件（如 Windows 系统 DLL），就好像它是 .NET Framework 程序集一样。以下示例通过使用 Assembly.LoadFile 方法加载 Kernel32.dll 来说明这一点。”

# windows - 错误：通过 tomcat7.exe 将 Tomcat 7 配置为 Windows 服务

> ID：16220351
> 
> 赞同：0
> 
> 时间：2013-04-25T16:43:43.410
> 
> 标签：windows, tomcat, windows-services, tomcat7

我正在尝试将 tomcat 作为服务运行。当我只指定一个 startpath 或 jvmoptions 时，我能够成功运行它。但是，如果我两者都有，我会收到以下错误：

```
2013-04-25 11:34:01 Commons Daemon procrun stderr initialized
java.lang.ClassNotFoundException: org.apache.catalina.startup.Catalina
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:236)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:426) 
```

我正在运行的命令如下：

```
service.bat install WebServices
tomcat7 //US//WebServices --Startup=auto --DisplayName="Web Services"
tomcat7 //US//WebServices --StartPath="C:\Program Files\engine" 
tomcat7 //US//WebServices --JvmOptions="-Xmx4g;-XX:PermSize=2048m;-XX:MaxPermSize=2048m" 
```

正如我所说，如果我不运行 JvmOptions 行，该服务将正常启动，并且它成功地将日志文件写入我的 startpath 目录。然后，如果我不包含 startpath，它也会正确运行，只是不会输出到 startpath。仅当设置了两个变量时才会发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:34:37.160

问题是，当我更改开始路径并分配变量时，它失去了 catalina home 的踪迹。所以我加了

```
-Dcatalina.home=apacheInstallLoc;-Dcatalina.base=apacheInstallLoc 
```

到我的 JvmOptions 并且一切正常。

# html - 使用左侧的复选框批量编辑表格

> ID：16220352
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:43:47.343
> 
> 标签：html, forms

我在表格的最左侧列中有复选框，并希望使用这些复选框对表格的内容进行批量编辑。例如，用户想要编辑表格中的多个项目：他们检查要编辑的项目，然后转到表格底部的下拉菜单中选择他们想要将其中一列更改为的内容. 当他们点击提交时，我会检查已选中的框并修改相关列。下图直观地显示了这一点。

![例子](https://i.stack.imgur.com/XwMdw.png)

我不在任何复选框中，并且只是复选框。我假设这是正确的做法，因为我没有将整个表格作为表格的一部分。那么我的问题是，当按下“提交”时，我将如何提交复选框，以便我可以检查使用了哪些复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:33:33.633

将表单标签移动到表格顶部，然后复选框将包含在 POST 请求中。

# twitter-bootstrap - Gantry 上的 Joomla 3.0 - 引导程序 - 复制手机的主菜单

> ID：16220354
> 
> 赞同：0
> 
> 时间：2013-04-25T16:43:55.437
> 
> 标签：twitter-bootstrap, joomla3.0

我正在开发一个以 Gantry 为基础的新模板，并且需要以处理手机的方式构建菜单。我遇到的问题是我修改了 mod_menu 中的 default.php 文件以复制移动设置的菜单的方式也复制了站点中的其他菜单，即。页脚菜单。

有没有一种方法可以在不弄乱页脚菜单的情况下构建主菜单以使其对移动设备友好？

这是我正在处理的工作示例的链接。请注意，当您缩小到手机大小时，页脚菜单的作用与主菜单相同。

[http://www.mniac.com/spymaniac30/](http://www.mniac.com/spymaniac30/)

```
<nav class="main <?php echo $class_sfx; ?>"<?php
$tag = '';
if ($params->get('tag_id') != null)
{
    $tag = $params->get('tag_id') . '';
    echo ' id="' . $tag . '"';
}
?> role="navigation">
<ul>
        <?php if ($class_sfx === 'nav-list') : ?>
        <li></li>
        <li class="nav-header"><?php echo $module->title; ?></li>
    <?php endif; ?>
    <?php

    $previous_parent = null;
    foreach ($list as $i => &$item) :
        $class = '';
        if ($item->id == $active_id)
        {
            $class .= 'current ';
        }

        if ($item->type == 'alias' &&
                in_array($item->params->get('aliasoptions'), $path)
                || in_array($item->id, $path))
        {
            $class .= 'active ';
        }
        if ($item->deeper)
        {
            $class .= 'deeper ';
        }

        if ($item->parent)
        {
            $class .= 'parent dropdown ';
            $previous_parent = $item->id;
            $item->flink = "#";
        }

        if (!empty($class))
        {
            $class = ' class="' . trim($class) . '"';
        }

        echo '<li id="item-' . $item->id . '"' . $class . '>';

        // Render the menu item.
        switch ($item->type) :
            case 'separator':
            case 'url':
            case 'component':
                require JModuleHelper::getLayoutPath('mod_menu', 'default_' . $item->type);
                break;

            default:
                require JModuleHelper::getLayoutPath('mod_menu', 'default_url');
                break;
        endswitch;

        // The next item is deeper.
        if ($item->deeper)
        {
            echo '<ul class="jb-nav dropdown-menu" role="menu" aria-labelledby="drop' . $previous_parent . '">';
        }
        // The next item is shallower.
        else if ($item->shallower)
        {
            echo '</li>';
            echo str_repeat('</ul></li>', $item->level_diff);
        }
        // The next item is on the same level.
        else
        {
            echo '</li>';
        }
    endforeach;
    ?>
    </ul>
</nav>

<nav class="mobile <?php echo $class_sfx; ?>"<?php
$tag = '';
if ($params->get('tag_id') != null)
{
    $tag = $params->get('tag_id') . '';
    echo ' id="' . $tag . '"';
}
?> role="navigation">
<div id="menu-link"><a href="#">MENU</a></div>
<ul style="display:none;">
        <?php if ($class_sfx === 'nav-list') : ?>
        <li></li>
        <li class="nav-header"><?php echo $module->title; ?></li>
    <?php endif; ?>
    <?php

    $previous_parent = null;
    foreach ($list as $i => &$item) :
        $class = '';
        if ($item->id == $active_id)
        {
            $class .= 'current ';
        }

        if ($item->type == 'alias' &&
                in_array($item->params->get('aliasoptions'), $path)
                || in_array($item->id, $path))
        {
            $class .= 'active ';
        }
        if ($item->deeper)
        {
            $class .= 'deeper ';
        }

        if ($item->parent)
        {
            $class .= 'parent dropdown ';
            $previous_parent = $item->id;
            $item->flink = "#";
        }

        if (!empty($class))
        {
            $class = ' class="' . trim($class) . '"';
        }

        echo '<li id="item-' . $item->id . '"' . $class . '>';

        // Render the menu item.
        switch ($item->type) :
            case 'separator':
            case 'url':
            case 'component':
                require JModuleHelper::getLayoutPath('mod_menu', 'default_' . $item->type);
                break;

            default:
                require JModuleHelper::getLayoutPath('mod_menu', 'default_url');
                break;
        endswitch;

        // The next item is deeper.
        if ($item->deeper)
        {
            echo '<ul class="jb-nav dropdown-menu" role="menu" aria-labelledby="drop' . $previous_parent . '">';
        }
        // The next item is shallower.
        else if ($item->shallower)
        {
            echo '</li>';
            echo str_repeat('</ul></li>', $item->level_diff);
        }
        // The next item is on the same level.
        else
        {
            echo '</li>';
        }
    endforeach;
    ?>
    </ul>
</nav> 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:55:41.430

你不必编辑你的核心文件，如果可以的话，总是避免，原因很明显^^

只需在“移动位置”添加另一个菜单模块，因此如果屏幕宽度超过 X 则应隐藏它并在下方显示。

或者因为它已经启动：一个模块用于顶部菜单，一个模块用于页脚

所以你最终会在模块管理器中复制模块而不是更改代码......

就那么简单

# c++ - 0x378 短整数端口地址

> ID：16220357
> 
> 赞同：0
> 
> 时间：2013-04-25T16:44:08.603
> 
> 标签：c++, short, parallel-port

我有两种方法：

```
short _stdcall Inp32(short portaddr);
void _stdcall Out32(short portaddr, short datum); 
```

这些用于访问 ECP 并行端口的端口。问题是我的数据寄存器的端口地址是 0x378，基本上是十进制的 888。

现在，如图所示，portaddr 的数据类型是 short 类型。那么我应该将我的端口地址设为：888？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:51:07.397

“short”取决于系统和编译器，但至少应为 16 位。因此，这两个都应该没问题：

```
short portaddr = 888;
short portaddr = 0x378; 
```

# linq - 在 C# Windows 编程的 datagridview 中使用 LINQ 插入、更新、删除查询？

> ID：16220359
> 
> 赞同：0
> 
> 时间：2013-04-25T16:44:16.757
> 
> 标签：linq, c#-4.0, datagridview

场景：表单中有如下控件：
datagridview, textbox1, textbox2, button(save,edit,update,delete)

1.通过点击保存按钮，数据应该在运行时更新到datagridview。
2.通过选择完整的行并单击编辑按钮，应将数据检索到文本框中。
3.通过点击更新按钮，该数据应该被更新。
4.通过选择一个完整的行，该行应该被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-02T15:42:27.457

**这是我的代码。我希望它会帮助你**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace LINQ_Test
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        LINQtestDataContext dc = new LINQtestDataContext();

        public void show_data()
        {
            dataGridView1.DataSource = (from t in dc.LinqTests
                                        select t);

        }

        public void insert_data()
        {
            try
            {
                LinqTest tbl = new LinqTest
                {
                ID=Convert.ToInt32(textBox_id.Text),
                Name=textBox_name.Text
            };
                dc.LinqTests.InsertOnSubmit(tbl);
                dc.SubmitChanges();
                MessageBox.Show("Data Inserted!!!");
                show_data();

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        public void update_data()
        {
            try
            {
                LinqTest tbl = dc.LinqTests.Single(x=>x.ID==Convert.ToInt32(textBox_id.Text));
                tbl.Name = textBox_new_name.Text;
                dc.SubmitChanges();
                MessageBox.Show("Data Updated!!!");
                show_data();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        public void delete_data()
        {
            try
            {
                LinqTest tbl = dc.LinqTests.Single(x => x.ID == Convert.ToInt32(textBox_id.Text));
                dc.LinqTests.DeleteOnSubmit(tbl);
                dc.SubmitChanges();
                MessageBox.Show("Data Deleted!!!");
                show_data();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            show_data();
        }

        private void button_insert_Click(object sender, EventArgs e)
        {
            insert_data();
        }

        private void button_update_Click(object sender, EventArgs e)
        {
            update_data();
        }

        private void button_delete_Click(object sender, EventArgs e)
        {
            delete_data();
        }
    }
} 
```

# shell - 将文件的几列与另一个文件的列进行比较

> ID：16220362
> 
> 赞同：1
> 
> 时间：2013-04-25T16:44:26.860
> 
> 标签：shell, sed, awk, diff, uniq

我有两个数据文件 1.txt 和 2.txt

1.txt 包含有效行。

例如。

```
1 2 1 2 
1 3 1 3 
```

在 2.txt 我有一个额外的 coloum，但如果你忽略它，我有一些有效的行和一些无效的行。2.txt 中的同一行可能多次出现

例如：

```
1 2 1 2 1.9
1 3 1 3 3.4
1 3 1 3 3.4
2 3 2 3 5.6
2 3 2 3 5.6 
```

第二行和第三行相同且有效。

第四行和第五行也一样，但无效。

我想编写一个 shell 脚本来比较这两个文件并输出两个文件，valid.txt 和 invalid.txt 看起来像这些......

有效的.txt：

```
1 2 1 2 1
1 3 1 3 2 
```

和 invalid.txt ：

```
2 3 2 3 2 
```

valid.txt 和 invalid.txt 的最后一列包含该行在 2.txt 中重复的次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:01:33.023

此 awk 脚本适用于示例数据：

```
 awk 'NR==FNR{sub(/ *$/,"");a[$0]++;next}
        {sub(/ [^ ]*$/,"")
         if($0 in a)
                 v[$0]++
         else 
                 n[$0]++
        }
        END{
            for(x in v)print x,v[x] > "valid.txt"
            for(x in n) print x,n[x] >"inv.txt"
        }' file1 file2 
```

输出：

```
kent$  head inv.txt valid.txt
==> inv.txt <==
2 3 2 3 2

==> valid.txt <==
1 3 1 3 2
1 2 1 2 1 
```

# php - 将文件上传插入 Access 数据库中的附件字段

> ID：16220363
> 
> 赞同：0
> 
> 时间：2013-04-25T16:44:27.453
> 
> 标签：php, ms-access

我正在尝试上传文件，然后将其移动到 Access 数据库中。该文件名为“附件”并具有附件属性。它在 Access 中运行良好。
它上传到服务器，但我无法将其插入数据库。

```
 <?php
 if ($_FILES["file"]["error"] > 0)
 {
 echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
 }
 else
 {
 echo "File name: " . $_FILES["file"]["name"] . "<br>";
 echo "Type: " . $_FILES["file"]["type"] . "<br>";
 echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
 echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

 move_uploaded_file($_FILES["file"]["tmp_name"], "C:/AccessBackEnds/LiveDesk/Uploads/" . $_FILES["file"]["name"]);
 echo "Stored in: LiveDesk/Uploads/";
 }

 $file = "C:/AccessBackEnds/LiveDesk/Uploads/" . $_FILES["file"]["name"];

 $db = realpath('C:\AccessBackEnds\LiveDesk\LiveDeskBackEnd.accdb');
 $conn = odbc_connect("Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=$db",'','') or die ("Unable to connect to server");

 $input="INSERT INTO CallTracker (Attachment)
 VALUES
 (file($file))";
 $rs=odbc_exec($conn,$input);

 if (!$rs)
 {
 die('Error: ' . mysql_error());
 }
 ?> 
```

错误是警告：odbc_exec() [function.odbc-exec]：SQL 错误：[Microsoft][ODBC Microsoft Access Driver] 查询表达式中的语法错误（缺少运算符）'file(C:/AccessBackEnds/LiveDesk/Uploads/CdpPacket .inf)'.，第 26 行 C:\xampp\htdocs\test\upload_file.php 中 SQLExecDirect 中的 SQL 状态 37000

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:59:28.423

PHP 使用一个临时文件名来存储上传，它**不是**客户端机器上的文件名。

```
$file = "C:/AccessBackEnds/LiveDesk/Uploads/" . $_FILES["file"]["name"];
                                                               ^^^^^^^^ 
```

那应该是`['tmp_name']`。

还有……Access小姐有`file()`功能吗？我找不到任何迹象表明它确实如此。

# android - 如何从我的应用程序中判断它是否是从我的 BroadcastReceiver 启动的？

> ID：16220373
> 
> 赞同：0
> 
> 时间：2013-04-25T16:45:22.123
> 
> 标签：android

如何从我的应用程序中判断它是否是从我的 BroadcastReceiver 启动/恢复的？

我拦截拨出电话 ( `android.intent.action.NEW_OUTGOING_CALL`)。如果`getString(Intent.EXTRA_PHONE_NUMBER)`是一组数字中的一个，我会中止该调用 (setResultData(null)) 而不是`startActivity`我的应用程序，`putExtra`指定特定的数字。如果（且仅当）来自广播接收器，我希望能够发出一个基本上是“使用这个应用程序和这个号码/返回呼叫”的警报。但是，有时当我从其他地方返回应用程序时，即使我不是来自 BroadcastReceiver，这个数字似乎仍然在意图的附加部分中。我尝试检查该`FLAG_ACTIVITY_NEW_TASK`标志，但它有时会在不是来自广播接收器时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:13:38.133

正如您所说：您可以将任何参数传递给您的活动，表明它是从您的`BroadcastReceiver`. 但是，当恢复您的活动时，可能会再次执行某些代码 - 可能会导致不需要的结果。当我遇到类似问题时，我在意图中存储/*覆盖了一些信息，例如*

```
myActivity.getIntent().putExtra("phoneNumber", "nil"); 
```

对我有用的是，我在完成处理后覆盖了意图中的额外内容`ActionMode`（假设使用`"nil"`）。所以后来我能够评估这些信息`onResume()`，例如：

```
@Override
public void onResume() {
    super.onResume();

    String phoneNumber = getIntent().getExtras().getString("phoneNumber")

    if ("nil".equals(PhoneNumber)) {
      ...
    }
} 
```

刚刚做了一个小测试，效果很好。

希望这会有所帮助......干杯！

# selenium - Selenium IDE，访问帧的问题

> ID：16220376
> 
> 赞同：2
> 
> 时间：2013-04-25T16:45:29.583
> 
> 标签：selenium, frame

我正在使用 Selenium IDE 在包含框架的 Web 上生成测试用例。我在带有以下代码的网页中：

```
<html>
<head>
    <title>Mantenci&oacute;n de Productos</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<frameset rows="224,120,*" frameborder="NO" border="0" framespacing="0" cols="*">
    <frame name="arriba" scrolling="NO" src="x.enc.adm.fbusprod.jsp" >
    <frame name="centro" scrolling="auto" src="x.enc.adm.blanco.jsp">
    <frame name="abajo" scrolling="AUTO" src="x.enc.adm.datoprod.jsp">
    <frame>
</frameset>
<noframes>
<body bgcolor="#FFFFFF" text="#000000">
</body>
</noframes>
</html> 
```

我需要选择一个在“arriba”框架内的项目，所以如果我搜索这个项目，Selenium 找不到它，所以我使用：

命令：selectFrame - 目标：arriba

我得到的：[错误] 未找到元素 arriba

我也使用过：

1 命令：selectFrame - 目标：相对顶部

2 命令：selectFrame - 目标：arriba

但我仍然得到：[错误] Element arriba not found

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T08:34:39.617

我过去用过这样的东西：

1.  命令：waitForElementPresent - 目标：arriba - 值：3000
2.  命令：waitForFrameToLoad - 目标：arriba - 值：5000
3.  命令：selectFrame - 目标：arriba

# ruby-on-rails - Rails：基于视图中的参数的特殊类

> ID：16220386
> 
> 赞同：0
> 
> 时间：2013-04-25T16:46:19.923
> 
> 标签：ruby-on-rails, model-view-controller, view, logic, controllers

根据每个单元格的不同标准将类添加到rails中的表格单元格的最佳方法是什么？

例如...我有一个日期单元格：如果日期从该日期起 10 天即将到来，则需要添加一个“即将到期”类。或者，如果日期已经过了今天，请添加“逾期”课程。

在另一个单元格上，基于字符串，它需要有一个“on”或“off”类。

我不知道该怎么做，但我知道我可能不应该在视图中有一堆逻辑......

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:14:46.773

您可以通过以下方式完成它：

`class="#{(@date - Time.now <= 10.days) ? upcoming_due : '' %>"`

但是，正如您所提到的，视图中有很多逻辑并不好。如果您发现自己重复相同的代码，您可以添加如下所示的辅助方法：

```
def upcoming(date)
  (date - Time.now <= 10.days) ? 'upcoming_due' : ''
end

def past(date)
  (date - Time.now <= 10.days) ? 'past_due' : ''
end 
```

在你看来，你会有这样的事情：

`class="#{ upcoming(@date).presence || past(@date).presence || '' }"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:28:08.807

这听起来像是我在浏览器中使用 Knockout 所做的事情。基本上，您为数据库中的每个字段创建一个带有可观察字段的剔除模型，并使用计算字段来计算类名或基于这些字段的任何内容。然后，您使用 HTML 模板中的数据绑定属性绑定到敲除的计算字段。

这种方法的缺点是用户需要启用 javascript 才能正确应用类，并且您在 javascript 中添加了一些逻辑。但我认为 javascript 文件是放置显示逻辑的好地方。

# ios - IOS MDM 应用推送成功/失败？

> ID：16220395
> 
> 赞同：1
> 
> 时间：2013-04-25T16:46:53.197
> 
> 标签：ios, ipad, mdm

我们使用 Mac Mini 构建了一个 MDM 服务器。我们成功设置了所有内容，并将 2 个企业应用程序推送到大约 50 台 iPad。截至上周二更新到最新版本 ios 的所有 iPad，所有设备至少是 iPad 2.. 都连接到 WIFI

问题是这2款app成功推送到90%的ipad上，剩下的几款ipad都不会下载app？设备会收到推送但几分钟后会说此时无法下载应用？我还没能接触到正在这样做的单位，所以我希望有人以前可能遇到过这个问题。平板上是否有阻止应用程序下载的设置？...我已经排除了网络，因为一些不工作的 ipad 连接到其他人下载应用程序的同一网络。

一旦我得到一些控制台信息，我将在此处发布控制台信息，但再次希望有人可能知道我可以让他们远程尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:59:28.860

我们使用名为 AirWatch 的 MDM 服务，我们遇到了同样的问题。我给他们打了电话，以为这是我们的服务器，但从他所说的（截至目前）Apple 遇到了 APN 问题

# salesforce - 动态声明新变量？

> ID：16220397
> 
> 赞同：1
> 
> 时间：2013-04-25T16:46:58.057
> 
> 标签：salesforce, apex-code, visualforce, force.com

有没有人找到一种动态声明变量的方法？

我有一些变量可以是无限的......

```
val1
val2
val3
val4... 
```

有没有办法即时创建这些，比如......

```
for(loop though){
  val + '1' = dosomething('1') 
} 
```

我知道它看起来不会像上面那样，但希望你能明白它的要点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:19:52.660

Apex 是一种编译的、未解析的/动态语言。你可以用 Javascript 或 PHP 来完成这样的事情，但（据我所知）不能用 Java。当你深入了解它时 - Salesforce 是基于 Oracle 数据库和 Java 构建的，因此 Apex 是他们认为最必要的 Java 调用的一种精简包装器。

只是出于好奇——你为什么需要那个？

如果您需要顺序访问，请使用 Jeremy 的想法和循环。或者...

如果您需要“唯一键 -> 某个值”，请使用 Maps。

```
Map<String, Double> myMap = new Map<String, Double>();
for(Integer i = 1; i < 10; ++i){
    myMap.put('someKey' + String.valueOf(i),Math.floor(Math.random() * 1000));
}
System.debug(myMap);
System.debug(myMap.get('someKey7')); 
```

此示例中的“双精度”可以同样是 Integer、Id、Account、MyCustomClass ......无论您的函数返回什么。

如果您的数据来自外部来源，我还能想到另一个技巧可能会有所帮助。它使用 JSON / XML 解析器，可以将任何类型的数据（保存在字符串中）转换为您选择的集合。它有点回到 List/Map 的想法，但完全取决于你如何事先构建/检索这个字符串。首先阅读[JSON 方法](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_json.htm)，但如果您没有遵循可预测模式的结构，您可能需要查看 JSON/XML 解析器（[单击此处](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_jsonparser.htm)并向下滚动到示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:28:24.570

这在顶点是不可能的。但是，您可以使用列表：

```
List<String> values = new List<String>();

for (Integer i = 0; i < aList.size(); i++) {
    values.add(dosomething(i));
} 
```

# php - PHP大数组性能

> ID：16220398
> 
> 赞同：1
> 
> 时间：2013-04-25T16:47:00.357
> 
> 标签：php, arrays, performance

我有一个非常大的数组，我想将每个元素与其前一个元素进行比较。

如果对于我完成的每个元素，我将使用 array_pop 删除该元素，这是一种好的做法（和更好的性能）吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:49:56.830

如果我是你并且我正在处理一个非关联数组，我会这样做

```
$n = count($array);
for($i = 1; $i < $n; $i++){
    //compare $array[$i] to $array[$i - 1]
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T16:49:22.850

从一个开始，然后上升。

无需弹出。

```
for($i = 1; $i < count($arr); ++$i) {
   //some comparison of $arr[$i -1] and $arr[$i]
} 
```

# javascript - 无法将 iPhone 上的 HTML 视频重置为从头开始

> ID：16220400
> 
> 赞同：2
> 
> 时间：2013-04-25T16:47:10.377
> 
> 标签：javascript, iphone, html5-video, quicktime

使用共享视频对象，我正在动态加载和播放不同的源电影。像这样重置当前时间在桌面上可以正常工作；

```
$('video').bind('loadeddata', function () {
    var video = document.getElementById('video');
    video.currentTime = 0;
}); 
```

...但是当 QT 在 iPhone 上播放时，新加载的电影会从播放头的先前位置继续。我尝试使用“loadedmetadata”也没有成功。有没有其他方法可以重启 QT 播放器？

# java - 使用 eclipse 在 Java 的 GAE 开发环境中访问本地 MySQL 实例

> ID：16220409
> 
> 赞同：1
> 
> 时间：2013-04-25T16:47:36.293
> 
> 标签：java, eclipse, google-app-engine

我是 Google App Engine 环境的新手。我们正在启动一个使用 Google Cloud SQL 的项目。出于测试目的，我们需要设置一个本地 MySQL 实例。我已经尝试寻找答案，但我没有找到任何对我有帮助的东西。

如果我要总结我的问题，我正在尝试使用 Eclipse 中的 JAVA 在我的 GAE 开发环境中访问本地 MySQL 实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:00:55.987

您必须在 App Engine SDK 文件夹中添加 MySQL 连接器。

您可以在那里找到连接器：http: [//dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)。然后，你必须把它放在这个文件夹中：`appengine-java-sdk\lib\impl`

然后您必须运行本地版本的 MySQL（例如使用 EasyPHP）。

这是可用于连接到数据库（单例）的代码示例：

```
public static Connection getInstance() throws Exception {
  if (connection != null && !connection.isClosed()) {
    return connection;
  }
  if (isLocalTesting) {
    //MySQL
    String url = "jdbc:mysql://127.0.0.1:3306/YOUR_DB_NAME";
    connection = DriverManager.getConnection(url, "root", "");
  } else {
    // Google Cloud SQL
    DriverManager.registerDriver(new AppEngineDriver());
    connection = DriverManager.getConnection("jdbc:google:rdbms://" + instanceName + "/NAME_DB");
  }
  return connection;
} 
```

最后：您还必须在构建路径中包含 MySQL 库：http: [//prntscr.com/124jwm](http://prntscr.com/124jwm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T01:57:16.207

我使用 Eclipse Juno 并安装 Google App Engine SDK 和插件。有开发mysql和google cloud SQL实例的配置。它在开发时自动转到您的本地，并在您部署时转到云 SQL。

# c++ - Const C++ 函数中的赋值

> ID：16220412
> 
> 赞同：0
> 
> 时间：2013-04-25T16:47:41.227
> 
> 标签：c++, function, constants, variable-assignment, operator-keyword

我有一个作业，我必须写一个简单的类。此类必须包含一个字符串数组，并包含“+”运算符的重载，它将两个数组的元素组合成一个新数组并返回它。

此外，这个函数必须是“const”，这是我遇到问题的地方。当试图更改类“大小”属性和它所持有的数组时，我得到了错误。尝试返回对象时也出现错误。我理解前两个错误的原因是因为我已经声明了函数“const”，但我的问题是，在 const 方法中重新分配这些值的正确方法是什么？

不要太讨厌我，我刚刚开始学习 C++，这些概念对我来说有点新。我试过研究这个主题，但我没有找到任何有用的答案。话虽这么说，我真的需要让这个功能工作，所以任何帮助将不胜感激。

这是课程：

```
class FirstClass{

private:
    string* sList;
    unsigned int _size;

public:
    FirstClass(const unsigned int initSize = 1);
        // copy, assignment, and destructor 
    FirstClass& operator+(const FirstClass& add)const;
};

    FirstClass::FirstClass(const unsigned int initSize):_size(initSize)
{
    sList = new string[initSize];
    return;
}

FirstClass& FirstClass::operator+(const FirstClass& add)
const{
    if(add.sList){
        int prevSize = this->_size;
        this->_size += add._size;   // can't do this
        string newList[this->_size];

        for(int a=0; a<prevSize; a++){
            newList[a] = this->sList[a];
        }
        for(int b=0; b<add._size; b++){
            sList[b+prevSize] = add.sList[b];
        }
        delete [] sList;
        this->sList = newList; // or this
    }

    return *this; // or this
} 
```

编辑：感谢您的快速响应，并清理我在做什么。这是我修改后的代码。

```
FirstClass FirstClass::operator+(const FirstClass& add)
const{
    FirstClass ma(this->_size + add._size); 
    if(add.sList){

        for(int a=0; a<this->_size; a++){
            ma.sList[a] = this->sList[a];
        }
        for(int b=0; b<add._size; b++){
            ma.sList[b+this->_size] = add.sList[b];
        }
    }

    return ma;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:49:39.457

加法运算符应该返回一个新对象，而不是对其操作数之一的引用。`A+B`修改`A`or`B`或返回对其中之一的引用没有任何意义。

考虑到这一点，很容易看出运算符如何成为 const。

```
FirstClass operator+(const FirstClass& rhs) const; 
```

您可以实现 mutating `operator+=`，并`operator+`按照以下方式实现：

```
FirstClass& operator+=(const FirstClass& rhs);

FirstClass operator+(const FirstClass& rhs) const 
{
  FirstClass ret = rhs;
  ret += *this;
  return ret;
} 
```

或作为非会员：

```
FirstClass operator+(const FirstClass& lhs, const FirstClass& rhs)
{ 
  FirstClass ret = lhs;
  ret += rhs;
  return ret; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:50:18.753

+ 运算符不应返回对对象的引用，而应返回新对象。不要`+()`与`+=()`操作员混淆。后者将操作应用于表达式的 lval，而第一个返回一个新对象。

你应该返回：

```
FirstClass FirstClass::operator+(const FirstClass& add) const 
```

假设这一点，您可以理解为什么该`const`要求具有意义。没有它，您将被允许修改不允许的隐式`this`对象的任何变量。编译错误正是在告诉您：“看起来您正在尝试修改大小，但您应该返回一个新对象，因此不得修改操作数”。

# php - 提交后剩余的表单输入值

> ID：16220414
> 
> 赞同：0
> 
> 时间：2013-04-25T16:47:47.667
> 
> 标签：php, html, forms

现在我有一个输入文本、收音机和一个提交按钮..

让我说我`url = image-search.php`

```
<form>
<input type="text" name="name"><br>
<input type="radio name="arrange" value="horizontal"><br />
<input type="radio name="arrange" value="vertical"><br>
<input type="submit" name="submit"><br> 
```

当我单击按钮时..它重定向同一页面但`url = image-search.php?name=ss&arrange=horizontal`

这个页面仍然有按钮..

问题是..在我点击第一页的按钮后=`image-search.php`

我希望用户输入值保留在名称的输入文本中..

以及如何根据用户选择使复选框被选中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:18:05.333

如果在提交表单时页面重新加载，您可以使用 php 为表单字段设置默认值

```
<form>
<input type="text" name="name" value="<?php echo isset($_GET["name"])?$_GET["name"]:""; ?>"><br>
<input type="radio" name="arrange" value="horizontal"<?php echo (isset($_GET["arrange"])?($_GET["arrange"]=="horizontal"?" checked='checked'":""):""); ?>><br />
<input type="radio" name="arrange" value="vertical"<?php echo (isset($_GET["arrange"])?($_GET["arrange"]=="vertical"?" checked='checked'":""):""); ?>><br>
<input type="submit" name="submit"><br>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T17:08:42.647

Here is the answer to your question.. hope this will help everyone.. @Macke - your approach for setting values after submission is really good, but when we have lot of elements on form.. let's say 1000 - it become pain in AS*..

Add this script tag in your `HEAD` tag of the page -

```
<script language="javascript" type="text/javascript">
    var obj = JSON.parse('<?= json_encode($_REQUEST) ?>');
    console.log(obj);

    function __setPostBackValue(element){
        if(obj.length <= 0) return;
        var type = element.type;
        var fval;
        console.log('Processing...'+ element.name);
        try{
            eval('fval = obj'+'.'+element.name);
        }
        catch(ex){

        }
        if(type == 'text'){
            element.value = fval; 
        }
        if(type == 'checkbox'){                    
            if(fval != undefined)
                element.setAttribute("checked","on");                        
        }
        if(type == 'radio'){                    
            if(fval != undefined && element.value == fval)
                element.setAttribute("checked","on");                        
        }

    }

</script> 
```

and at the bottom of the page, yes at the bottom of the page (before body ends) add another script tag -

```
<script language="javascript" type="text/javascript">
            var fields = document.getElementsByTagName('input');
            for(var i=0;i<fields.length;i++){
                __setPostBackValue(fields[i]);
            }
        </script> 
```

What it does ? When you submit your form, `var obj = JSON.parse('<?= json_encode($_REQUEST) ?>');` this creates local JSON Object usable by Javascript - and the script we added at the end of the page.. loop through all elements and call `__setPostBackValue` function. Where we are setting the values of the elements by Javascript.

This is little bit tricky but it works..!!

PS: I had no radio button in my page, but if you have you can add it easily.

-Paresh Rathod

# css - 在 CSS 中防止在 Firefox 中进行选择

> ID：16220416
> 
> 赞同：1
> 
> 时间：2013-04-25T16:47:52.567
> 
> 标签：css, firefox, selection

我想禁止仅使用 CSS 进行元素选择（使用鼠标或 CRTL+A 进行选择）。我尝试了以下方法：

```
element {
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
    user-select: none;
}

element::-moz-selection {
    background: transparent;
} 
```

它在 Firefox 20 中无法正常工作。但它在 webkit 中工作。即使使用上述 CSS 规则，我也可以使用 CTRL+A 选择图像和画布。

有没有办法只使用 CSS（不使用 JS）来禁止选择（或至少不显示）。

我不想阻止用户复制文本，我只想隐藏对某些元素的选择。

我尝试了[这个答案](https://stackoverflow.com/questions/14307593/globally-prevent-text-selection-in-firefox/14307806#answer-14307806)中的代码，但它似乎在 Firefox 20 中不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:58:22.923

我已经在 FF20 中使用以下小提琴进行了尝试：http: [//jsfiddle.net/ADGsA/](http://jsfiddle.net/ADGsA/)

```
p.noselect { -moz-user-select:none; }
p.recolor::-moz-selection { color: yellow;  background: red; } 
```

鼠标的所有行为都符合预期，但我确实可以使用 ctrl-A 选择文本。我很确定这是 Gecko 中的一个错误，但从[MDN 参考页面](https://developer.mozilla.org/en-US/docs/CSS/user-select)来看，这也很可能不是他们要解决的错误：

> 注意：用户选择当前不是任何 W3C CSS 规范的一部分。因此，浏览器实现之间存在细微差别。请务必跨浏览器测试您的应用程序。

非标准化，所以不可预测。拿走你得到的东西，我猜你会很幸运，你可能会考虑在 Bugzilla 上提出一个错误，因为我真的认为他们不是故意的，因为提到的页面还说：

> 控制选择的外观（仅）。

这表明 ctrl-A 也不应该选择它。

* * *

编辑：

自 2008 年 11 月以来，这一直是一个[已知问题](https://bugzilla.mozilla.org/show_bug.cgi?id=463765)。不要屏住呼吸寻求修复，投票并祈祷。

# c# - OpenCVSharp 和 Visual Studio 2012

> ID：16220417
> 
> 赞同：0
> 
> 时间：2013-04-25T16:47:53.187
> 
> 标签：c#, opencv, visual-studio-2012, opencvsharp

我正在尝试在 Visual Studio 2012 中使用 opencvsharp v2.4 64x 构建一个项目。该项目是使用 .net 4.5 和 x64 目标构建的。我已经安装了 VS08+VS10 sp1 先决条件。我已经在我的项目中包含了所有 opencv dll（版本 2.4.0 64x），以复制到包括 TBB.dll 在内的可执行目录（并检查它们是否最终位于正确的文件夹中）。

但是，在运行该软件时出现错误：由于 P/Invoke 发生了异常。请检查以下内容... System.DllNotFoundException: Unable to load DLL 'opencv_core204' ... etc

任何想法为什么会这样？也许 VS2012 不支持构建 opencvsharp 2.4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T17:50:26.597

似乎我仍然错过了一些code204所依赖的本机dll。这是所需的完整列表。它现在可以在 64 位和 .net 4.5 的 Visual Studio 2012 中运行 - 但是一些示例无法使用 4.5 运行（delaunay），但只能在 3.5 中运行。不知道为什么...

```
OpenCvSharpExtern.dll
OpenCvSharpExternGpu.dll
opencv_calib3d240.dll
opencv_calib3d240d.dll
opencv_contrib240.dll
opencv_contrib240d.dll
opencv_core240.dll
opencv_core240d.dll
opencv_features2d240.dll
opencv_features2d240d.dll
opencv_ffmpeg240.dll
opencv_ffmpeg240_64.dll
opencv_flann240.dll
opencv_flann240d.dll
opencv_gpu240.dll
opencv_gpu240d.dll
opencv_highgui240.dll
opencv_highgui240d.dll
opencv_imgproc240.dll
opencv_imgproc240d.dll
opencv_legacy240.dll
opencv_legacy240d.dll
opencv_ml240.dll
opencv_ml240d.dll
opencv_nonfree240.dll
opencv_nonfree240d.dll
opencv_objdetect240.dll
opencv_objdetect240d.dll
opencv_photo240.dll
opencv_photo240d.dll
opencv_stitching240.dll
opencv_stitching240d.dll
opencv_ts240.dll
opencv_ts240d.dll
opencv_video240.dll
opencv_video240d.dll
opencv_videostab240.dll
opencv_videostab240d.dll
QtCore4.dll
QtGui4.dll
tbb.dll
tbbmalloc.dll
tbbmalloc_debug.dll
tbbmalloc_proxy.dll
tbbmalloc_proxy_debug.dll
tbb_debug.dll
tbb_preview.dll
tbb_preview_debug.dll 
```

# jquery - 特定于案例的 bootstrap-datepicker 配置

> ID：16220418
> 
> 赞同：1
> 
> 时间：2013-04-25T16:47:59.167
> 
> 标签：jquery, jquery-ui, jquery-plugins, twitter-bootstrap, datepicker

使用：

```
<link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="./bootstrap/css/datepicker.css" rel="stylesheet" media="screen">
<link href="./css/customize.css" rel="stylesheet" media="screen">
<script src="http://code.jquery.com/jquery.js"></script>
<script src="./bootstrap/js/bootstrap.min.js"></script>
<script src="./bootstrap/js/bootstrap-datepicker.js"></script> 
```

要求：
1\. 具有“From”和“To”日历
2.“From”和“To”都应禁用大于“当前日期”的日期
3.“To”中的日期应 <=“From”中的日期
4 . 如果选择了“从”日期并且它是 >，那么“到”日期。然后'To' 日期应该更新为'From' == 'To'
5\. 'From' 日期被选中。When 'To' date is being selected then dates inside the 'To' calendar that are < 'From' date should be disabled.
6.从'From'到'To'的自动前进

我已经做到了这一点：

```
 $(function(){
    var nowTemp = new Date();
    var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);

    var from = $('#fromDate').datepicker({
      onRender: function(date) {
        return date.valueOf() > now.valueOf() ? 'disabled' : '';
      }
    }).on('changeDate', function(ev) {
      if (ev.date.valueOf() > to.date.valueOf()) {
        var newDate = new Date(ev.date)
        newDate.setDate(newDate.getDate() + 1);
        to.setValue(newDate);
      }
      from.hide();
      $('#toDate')[0].focus();
    }).data('datepicker');
    var to = $('#toDate').datepicker({
      onRender: function(date) {
        return ((date.valueOf() <= from.date.valueOf()) || (date.valueOf() > now.valueOf()) ? 'disabled' : '');
      }
    }).on('changeDate', function(ev) {
      to.hide();
    }).data('datepicker');
    }); 
```

问题：
1\. 当我第一次从“到”日期日历中选择时，我只有“当前日期”可用。
2.没有自动前进。
3\. When selected 'From' date and then 'To' date calendar shows only 'current date'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T00:51:20.693

希望这可以帮助：

使用[https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js](https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js)

```
$(function(){

    var dateStart = $('#date-start')
    .datepicker({
        startDate: new Date()
    })
    .on('changeDate', function(ev){
        dateEnd.datepicker('setStartDate', ev.date);
        dateStart.datepicker('hide');
        dateEnd.focus();
    });

    var dateEnd = $('#date-end')
    .datepicker()
    .on('changeDate', function(ev){
        dateStart.datepicker('setEndDate', ev.date);
        dateEnd.datepicker('hide');
    });
}); 
```

# actionscript-3 - 如何修复错误“公共命名空间中的定义 * 存在冲突。” 使用 ASC2.0？

> ID：16220421
> 
> 赞同：0
> 
> 时间：2013-04-25T16:48:04.950
> 
> 标签：actionscript-3, compiler-construction, compiler-errors, overriding, public

在类层次结构中：

**MngLayers**扩展了**Manager_Panel**，它扩展了**Manager_Base** ...

-- 在**Manager_Base**中，我定义了一个`init()`方法：

```
public class Manager_Base {
    //....

    public function init():void {
        //Do initialization here...
    }
} 
```

- 在**Manager_Panel**中，我不会覆盖该`init()`方法。

- 在**MngLayers**中，我重写了该`init()`方法。

```
public override function init():void {
    super.init();
    //Do custom initialization here...  
} 
```

当我尝试编译它时，我得到这个无用的编译错误：

> **错误：与命名空间 public 中的定义 init 存在冲突。**

我不确定这是否重要，但我正在使用具有**-inline**支持的**ASC2.0**编译器（来自 AIR SDK 3.7） 。

 **编译器中是否有问题阻止它像以前的编译器那样进行简单的方法覆盖编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:50:43.540

啊！该死，这只是 ASC2.0 的描述性不够！

我的错，我一直在叶子子类（MngLayers）中有一个**重复** `init()`的覆盖方法。如果编译器指出那个重复的，那会有所帮助！

希望这可以帮助其他人犯同样的菜鸟错误！:D**

# api - Foursquare API 类别

> ID：16220423
> 
> 赞同：0
> 
> 时间：2013-04-25T16:48:11.127
> 
> 标签：api, http, foursquare

我一定是误解了foursquare API 上的类别，这让我发疯。

当我发送这个：

```
 https://api.foursquare.com/v2/venues/search?ll=44.874491,-93.328212&client_id=XXX&client_secret=XXX&v=20130327 
```

我得到了我所期望的所有场地。但是，如果我这样为咖啡店做 categoryId：

```
 https://api.foursquare.com/v2/venues/search?ll=44.874491,-93.328212&categoryId=4bf58dd8d48988d1e0931735&client_id=XXX&client_secret=XXX&v=20130327 
```

我失去了最初出现的最近的咖啡店。特别是，我坐的那个地址是`7101 France Ave S`. 这种行为一直很奇怪。

然后是第二个问题：既然`Coffee Shop`是下面的一个类别`Food`，当我限制到类别时我是否应该得到它们`Food`？如果我这样做：

```
 https://api.foursquare.com/v2/venues/search?ll=44.874491,-93.328212&categoryId=4d4b7105d754a06374d81259&client_id=XXX&client_secret=XXX&v=20130327 
```

我没有一家咖啡店。这让我发疯，我知道我一定错过了一些简单的东西。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:16:46.910

[正如有关场地/搜索](https://developer.foursquare.com/docs/venues/search)的 Foursquare 文档中所指定的那样，您应该`radius`在使用时指定一个参数`categoryId`。这样做似乎会返回更好的结果。

“食物”是一个广泛的类别，您看到的结果可能由于各种原因（受欢迎程度、接近度等）“更好”匹配。同样，您应该`radius`在使用`categoryId`. 您还应该查看`intent`可用于场所/搜索的不同 s，以找出最适合您的应用程序的一个！如果您也开始使用此参数，它可能会有所帮助。

# curve-fitting - ValueError：使用optimize.curve时，操作数无法与形状（0）（26）一起广播

> ID：16220425
> 
> 赞同：3
> 
> 时间：2013-04-25T16:48:27.090
> 
> 标签：curve-fitting

我正在尝试为我的脚本生成的一些数据找到最合适的线。这就是我所拥有的：

```
import numpy as np
import scipy as sp
.
.
.
def func(x, a, b, c):
    return a*np.exp(-b*x) + c
popt, pcov = sp.optimize.curve_fit(func, numgelt, turnsG) 
```

我不断收到此错误：

```
ValueError: operands could not be broadcast together with shapes (0) (26) 
```

我已经检查过，两个数组（numgelt 和 turnG）的大小绝对相同。我还确保条目是浮动的。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T23:45:40.090

在我意识到我一直在使用列表而不是 Numpy 数组之前，我遇到了同样的问题。转换为数组为我修复了它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-28T19:52:25.713

```
ValueError: operands could not be broadcast together with shapes (0) (26) 
```

意味着您的第一个数组的长度为 0。从您的帖子来看，最明显的是这种情况，并且会引发 ValueError。

# javascript - 当页面重新加载 cookie 时，如何让 Vimeo 视频从中断的地方开始？

> ID：16220433
> 
> 赞同：0
> 
> 时间：2013-04-25T16:48:41.013
> 
> 标签：javascript, iframe, video, vimeo, vimeo-player

我已经知道您可以通过将这行代码#t=0m0s 添加到 iframe 源中来从某个点开始嵌入 Vimeo 视频，但我想要实现的是让查看器有时间在页面上被cookied，这样它就可以在他们返回时设置起点。

这样，视频就会从他们离开的地方开始。

我知道这些值可以通过 cookie 传递，所以我假设这是可能的，我只是没有 javascript 知识来解决它。

如果这实际上是可能的，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:24:35.153

您可以使用我们的[JavaScript API](https://developer.vimeo.com/player/js-api)来监听`playProgress`事件以记录它们在视频中的播放距离，然后使用该`beforeunload`事件`window`将您拥有的值存储在 cookie 中。

# cordova - 接听电话时音频继续在 Phonegap 上播放

> ID：16220439
> 
> 赞同：0
> 
> 时间：2013-04-25T16:49:00.927
> 
> 标签：cordova, audio, background, call, media

我正在创建一个 Radio App，它在使用 HTML5 的 iOS 上运行良好。要在 Android 上执行此操作，我需要使用 Phonegap Media 资源。即使在后台/暂停模式下，我也可以播放流媒体和 MP3 文件，但是当我接到电话时，音频会继续播放。这是个大问题。Android不应该在通话中关闭音频吗？（呼叫 = iOS 上的优先级）。我正在使用 Phonegap 的在线构建（[http://build.phonegap.com](http://build.phonegap.com)），因此，我不能为 Phonegap 使用任何 Java 外部插件（如[https://github.com/devgeeks/PhoneListener](https://github.com/devgeeks/PhoneListener)）。有一些 Phonegap 事件（startcallbutton/endcallbutton），但不支持 Android（我真的不知道为什么）。

有人有解决方案吗？坦克！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T16:17:06.123

你应该在你的 AndroidManifest.xml 文件中添加 READ_PHONE_STATE 权限，如果它还没有，否则应用程序将不知道你是否正在接听电话。您还需要一个 onPause 和 onResume 方法的 addEventListener 来分别在接到电话和挂断电话时告诉流暂停和播放。

# xml - 从R中的网页顺序检索数据

> ID：16220440
> 
> 赞同：0
> 
> 时间：2013-04-25T16:49:02.663
> 
> 标签：xml, r, web, xml-parsing

我在网络上进行了高级搜索并获得了一些结果。对于每个结果，我有兴趣提取 2 个字段，“Referencia：”和“CIF”。

```
#This is the url with the results of the search
url="http://www.boe.es/buscar/boe.php?campo%5B1%5D=DOC&dato%5B1%5D=edicto+auto+declaracion+concurso+CIF
&campo%5B6%5D=FPU&dato%5B6%5D%5B0%5D=25%2F04%2F2013&dato%5B6%5D%5B1%5D=30%2F04%2F2013
&sort_field%5B0%5D=fpu&sort_order%5B0%5D=desc&sort_field%5B1%5D=ref&sort_order%5B1%5D=asc&accion=Buscar"

#This is the url of one of the results.
example=http://www.boe.es/buscar/doc.php?id=BOE-B-2013-15895 
```

CIF 字段的格式通常为 X00000000 或 X-00000000`X=c("A","B")`和`0=0:9` 和 参考字段在示例中为 BOE-B-2013-15895，CIF B-32210196

你能帮我从R做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T11:35:28.643

1) 获得Referencia 是小菜一碟

```
substrRight <- function(x, n){
  sapply(x, function(xx)
  substr(xx, (nchar(xx)-n+1), nchar(xx)))
}

library(XML)
u<-"http://www.boe.es/buscar/boe.php?campo%5B1%5D=DOC&dato%5B1%5D=edicto+auto+declaracion+concurso+CIF%20&campo%5B6%5D=FPU&dato%5B6%5D%5B0%5D=25%2F04%2F2013&dato%5B6%5D%5B1%5D=30%2F04%2F2013%20&sort_field%5B0%5D=fpu&sort_order%5B0%5D=desc&sort_field%5B1%5D=ref&sort_order%5B1%5D=asc&accion=Buscar" #link
doc1<-htmlParse(u) 'get html'
kbbRoot <- xmlRoot(doc1) #parse it into xml
els<-getNodeSet(kbbRoot,"//*[contains(concat( ' ', @class, ' ' ), concat( ' ', 'resultado-busqueda-link-defecto', ' ' ))]") #get all links by xpath
links<-sapply(els, function(el) xmlGetAttr(el, "href")) #get inner (start with .../)
links<-sapply(links, function(x)  substr(x,start=3,stop=nchar(x))) #delete ../  
links<-sapply(links, function(x)  paste("http://www.boe.es", x,sep=""))#generate correct link
Referencia<-sapply(links, function(x) substrRight(x,16)) # get referencia from links 
```

2）CIF要复杂得多。你必须使用正则表达式。不幸的是，我在这方面并不强。所以在论坛上问其他人：“应该使用哪种正则表达式从字符串中获取 CIF 值？”

```
CIFRA<-function (u){
  doc1<-htmlParse(u)#get html
  kbbRoot <- xmlRoot(doc1)# parse it
  els<-getNodeSet(kbbRoot,"//*[contains(concat('', @class,''), concat('', 'parrafo', '' ))]")#select text
  l<-sapply(els, xmlValue) #analyse each sentences
  x<-regexpr(pattern="[A-Z][0-9]+",text=l)#Try to find CIF by using RegEXP
  #regexp return position in string
  ind<-which.max(x) #'number of row with CIF'
  st<- x[ind]-3 #start position
  en<-st+attr(x, "match.length")[ind]-1 #finish
  res<-substring(l[ind],st,en) #select text between start and finish
} 
```

CIF<-sapply（链接，函数（x）CIFRA（x））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:51:01.340

要获取内容，请查看`httr`包。你可以使用类似的东西

```
content (GET (url)) 
```

# asp.net - 自定义代码在 Visual Studio 中有效，但在报表服务器上无效

> ID：16220442
> 
> 赞同：1
> 
> 时间：2013-04-25T16:49:11.593
> 
> 标签：asp.net, reporting-services, ado.net, reporting, reportingservices-2005

我在 SSRS2005 中的报告中添加了一些自定义代码，这些代码在 BIDS2005 中完美运行，但在我部署到服务器时却没有。这是自定义代码：

```
Public Function GetUsers(ByVal param As Integer) As String
    Dim sqlCon As New System.Data.SqlClient.SqlConnection
    Dim cmd As New System.Data.SqlClient.SqlCommand
    Dim dRet As String
    Dim sCmdText As String

    sqlCon.ConnectionString = "data source=MYSERVER;initial catalog=MYDB;Integrated Security=true"

    cmd = New System.Data.SqlClient.SqlCommand
    sCmdText = "SELECT dbo.udf_MyFunction(" 
    'cmd.CommandType = CommandType.Text
    cmd.Connection = sqlCon
    cmd.CommandTimeout = 0

    sCmdText = sCmdText & param
    sCmdText = sCmdText & ")"

    cmd.CommandText = sCmdText
    If sqlCon.State <> System.Data.ConnectionState.Open Then
    sqlCon.Open()
    End If
    dRet = cmd.ExecuteScalar() & ""     
    sqlCon.Close()

    Return dRet

End Function 
```

为了使用这段代码，我必须添加这个程序集：

```
System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

当用户单击特定文本框时，报告中的一个值被传递给 SQL 函数，并且整数列表被返回给详细报告。在 BIDS 中，这每次都能完美运行。但是，我已将其部署在两个不同的报表服务器上，但它不起作用。详细报告打开，但没有通过。

令人沮丧的是，当我打开一个 SQL Server Profiler 跟踪并选择了几乎每个选项时，我什么也得不到。我知道代码正在访问我的 SQL 数据库，因为它从数据库返回结果，但探查器没有显示任何发生的事情。这使我几乎不可能进行故障排除。

有任何想法吗？

# cocoa - 核心数据返回不正确的值（虽然几乎是正确的）

> ID：16220444
> 
> 赞同：2
> 
> 时间：2013-04-25T16:49:30.947
> 
> 标签：cocoa, core-data, nspredicate

好的，所以我向 Core Data 询问记录（userKey），因为该记录是我正在提取的 PublicKey，但是，publicKey 最终正确率为 90%，但开头有一些额外的字符并封装在括号中。

我认为我的问题是我得到的是一个指针，而不是来自 userMatches 的数据。任何指导将不胜感激。

```
AppDelegate *appdelagate = [[UIApplication sharedApplication]delegate];
context = [appdelagate managedObjectContext];

NSEntityDescription *entitydesc = [NSEntityDescription entityForName:@"KeyData" inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc]init];

predicate = [NSPredicate predicateWithFormat:@"userKeyCD = %@", userKey];
[request setEntity:entitydesc];
[request setPredicate:predicate];

userMatches = [context executeFetchRequest:request error:&error];

NSString *publicKey = [userMatches valueForKey:@"publicKeyCD"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:20:49.220

好的，所以我把最后一行改成了这个，效果很好；

```
 NSString *publicKey = [[userMatches objectAtIndex:0] valueForKey:@"publicKeyCD"]; 
```

我没有展示它是如何定义的，但 userMatches 是一个 NSArray（对不起）。在代码中以类似的方式使用它；

```
 NSArray *userMatches = [context executeFetchRequest:request error:&error]; 
```

现在我想它是一个数组的正确类型？

# widget - Durandal 小部件“this.settings 未定义”

> ID：16220449
> 
> 赞同：2
> 
> 时间：2013-04-25T16:49:45.320
> 
> 标签：widget, durandal, hottowel

`App>durandal>widgets>selector` 我在小部件的 controller.js 代码中有一个名为“选择器”的 Durandal 小部件（热毛巾模板） ：

```
define(function (require) {
var widget = require('durandal/widget');

var selector = function (element, settings) {
    settings.selectedTopLevel = ko.observable();
    settings.showTopLevel = ko.observable(true);

    this.settings = settings;
};

selector.prototype.enableSelect = function() {
    this.settings.showTopLevel(true);
    this.settings.selectedTopLevel(null);
};

selector.prototype.showSelect = function () {
    var selected = this.settings.selectedTopLevel;
    alert(this.selected.name().toString());
};

return selector;
}); 
```

小部件的view.html：

```
<span>
<a href="#" data-bind="click: $parent.enableSelect"> Click to enable </a>

<span data-bind="visible: settings.showTopLevel">
    <select data-bind="options: settings.items, optionsText: 'name', optionsCaption: 'Select...', value: settings.selectedTopLevel"></select>
</span>
<br/>

<span data-bind="foreach: settings.items">
    <a href="#" data-bind="click: $parent.showSelect">
        <span data-bind="text: name"></span>
    </a>
</span> 
```

小部件的使用：

```
<div>
<h2>Widget Selector:</h2>
<div data-bind="widget: { kind: 'selector', items: $root.projects }"></div> 
```

但是我在功能`selector.prototype.showSelect`上遇到了一些问题，`var selected = this.settings.selectedTopLevel;`主要错误是：

> this.settings 未定义

另一个问题出现在该行 html 中：

```
<a href="#" data-bind="click: $parent.enableSelect"> Click to enable </a> 
```

`selector.prototype.enableSelect`单击“单击以启用”时未调用该函数。

我是 Durandal 小部件的新手，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:02:02.023

It's a KO issue. You need to wrap those calls to $parent in a function in order to preserve the "this" context I believe.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T11:15:47.140

从上面的评论重新发布，以便于阅读：

我认为问题是这些没有更新：

```
this.settings.showTopLevel(true);
this.settings.selectedTopLevel(null); 
```

由于某种原因，在 durandal 小部件中声明的可观察对象不会进入淘汰赛堆栈或未绑定到视图（不确定是哪一个）...

还不知道为什么。为了获得淘汰的可观察对象，我必须在父视图模型级别声明小部件级别所需的任何可观察对象，并使用设置将其传递。

如果你让它工作，请告诉我！

# c++ - 使用 7zip dll 归档程序

> ID：16220451
> 
> 赞同：1
> 
> 时间：2013-04-25T16:49:52.893
> 
> 标签：c++, 7zip

我正在尝试使用 7zip dll 制作一个小型存档程序，但我不知道如何使用它。我不知道 CLSID 和 IID 是在哪里定义的，使用什么 IID 才能将多个文件压缩成一个存档。我的代码看起来像这样：

```
typedef int (_CreateObject)(const GUID clsid, const GUID iid, void *outObject);
HMODULE hMod = LoadLibrary("7zra.dll");
_CreateObject pfnCreate = (_CreateObject)GetProcAddress(hMod, "CreateObject");
GUID CLSID_CFormat7z = {0x23170F69, 0x40C1, 0x2790, {0x10, 0x00, 0x00, 0x01, 0x10, 0x07, 0x00, 0x00}};
GUID IID_Coder = {0x23170F69, 0x40C1, 0x278A, {0x00, 0x00, 0x00, 0x04, 0x00, 0x05, 0x00, 0x00}};
ICompressCoder2 pCoder = NULL;
int i = pfnCreate(&CLSID_CFormat7z, &IID_Coder, (void*)&pCoder); 
```

我总是得到一个 NULL 指针，即使我尝试了不同的 GUID。谁能帮我举个简单的例子吗？

# css - 均匀分布的网格动态内容

> ID：16220452
> 
> 赞同：1
> 
> 时间：2013-04-25T16:49:55.517
> 
> 标签：css

我将有一个`<div>`动态生成的 s 网格。每个`<div>`将是相同的宽度。我想将它们均匀地分布在容器中。我希望他们隔开 3 格，然后在下一行重新开始。但是，最后一行可能只有 1 或 2`<div>`秒，但它们需要保持与上述行相同的“网格间距”。

基本上，我想要表格类型间距，而不使用表格:)

这是一些示例html。以下将发生在 4 行上，最后一行只有 1 项

```
<div id='container>
     <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
    <div class='item'>Content</div>
</div> 
```

CSS：

```
div#container {
   width:600px;
}
div.item {
   width:180px;
} 
```

[我已经尝试过此页面](http://css-tricks.com/equidistant-objects-with-css/)底部的方法，但是当连续只有 2 个项目时它会失败，因为它将第二个项目一直放在右边

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:06:44.617

我建议如下：

```
.item {
    float: left;
    width: 33%; /* basically 100 divided by however many items per row */
    box-sizing: border-box; /* to include the border dimensions (if any) */
}                           /* in the defined width of the element */

.item:nth-child(odd) {
    background-color: #aaa; /* aesthetics, just to see the individual items */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7RPdt/1/)。

参考：

*   [CSS`box-sizing`属性](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:42:29.910

大卫托马斯的回答很有效，而且非常优雅。您缺少的基本内容是“浮动：左”和 33% 的宽度，以确保每个 div 始终占据容器的 1/3，而不管容器的大小。

另一种方法是使用像[bootstrap](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem)一样的流体网格系统。

这使您可以构建流畅的网格结构而不会弄乱 CSS。您只需指定基于百分比的不同宽度的行和列，例如：

```
<div id="container">
  <div class="row-fluid">
    <div class="span4"><div class="item">Content</div></div>
    <div class="span4"><div class="item">Content</div></div> 
    <div class="span4"><div class="item">Content</div></div> 
  </div>
  <div class="row-fluid">
    <div class="span4"><div class="item">Content</div></div>
    <div class="span4"><div class="item">Content</div></div> 
    <div class="span4"><div class="item">Content</div></div> 
  </div>
  <div class="row-fluid">
    <div class="span4"><div class="item">Content</div></div>
    <div class="span4"><div class="item">Content</div></div> 
    <div class="span4"><div class="item">Content</div></div> 
  </div>
  <div class="row-fluid">
    <div class="span4"><div class="item">Content</div></div>
    <div class="span4"><div class="item">Content</div></div> 
    <div class="span4"><div class="item">Content</div></div> 
  </div>
</div> 
```

这是一个小提琴：http: [//jsfiddle.net/ZrBbD/](http://jsfiddle.net/ZrBbD/)

注意：此演示是响应式的，因此您可能必须使“结果”面板更宽才能看到以 3x4 模式布置的 div。

# perl - 函数式 Perl：过滤器、迭代器

> ID：16220455
> 
> 赞同：2
> 
> 时间：2013-04-25T16:49:57.330
> 
> 标签：perl, functional-programming

尽管我更熟悉 Java、Python 和函数式语言，但我必须编写 Perl。我想知道是否有一些惯用的方法来解析一个简单的文件，比如

```
# comment line - ignore

# ignore also empty lines
key1 = value
key2 = value1, value2, value3 
```

我想要一个函数，我在文件的行上传递一个迭代器，并返回一个从键到值列表的映射。但是为了功能和结构化，我想：

*   使用包装给定迭代器并返回没有空行或注释行的迭代器的过滤器
*   提到的过滤器应该在函数之外定义，以便其他函数可重用。
*   使用给定行的另一个函数并返回键和值字符串的元组
*   使用另一个将逗号分隔的值分解为值列表的函数。

什么是最现代、最惯用、最干净且仍然实用的方法？代码的不同部分应该是可单独测试和可重用的。

作为参考，这里是（快速破解）我如何在 Python 中做到这一点：

```
re_is_comment_line = re.compile(r"^\s*#")
re_key_values = re.compile(r"^\s*(\w+)\s*=\s*(.*)$")
re_splitter = re.compile(r"\s*,\s*")
is_interesting_line = lambda line: not ("" == line or re_is_comment_line.match(line))
                                   and re_key_values.match(line)

def parse(lines):
    interesting_lines = ifilter(is_interesting_line, imap(strip, lines))
    key_values = imap(lambda x: re_key_values.match(x).groups(), interesting_lines)
    splitted_values = imap(lambda (k,v): (k, re_splitter.split(v)), key_values)
    return dict(splitted_values) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:01:42.377

A direct translation of your Python would be

```
my $re_is_comment_line = qr/^\s*#/;
my $re_key_values      = qr/^\s*(\w+)\s*=\s*(.*)$/;
my $re_splitter        = qr/\s*,\s*/;
my $is_interesting_line= sub {
  my $_ = shift;
  length($_) and not /$re_is_comment_line/ and /$re_key_values/;
};

sub parse {
  my @lines = @_;
  my @interesting_lines = grep $is_interesting_line->($_), @lines;
  my @key_values = map [/$re_key_values/], @interesting_lines;
  my %splitted_values = map { $_->[0], [split $re_splitter, $_->[1]] } @key_values;
  return %splitted_values;
} 
```

Differences are:

*   `ifilter` is called `grep`, and can take an expression instead of a block as first argument. These are roughly equivalent to a lambda. The current item is given in the `$_` variable. The same applies to `map`.
*   Perl doesn't emphazise laziness, and seldomly uses iterators. There are instances where this is required, but usually the whole list is evaluated at once.

In the next example, the following will be added:

*   Regexes don't have to be precompiled, Perl is very good with regex optimizations.
*   Instead of extracting key/values with regexes, we use `split`. It takes an optional third argument that limits the number of resulting fragments.
*   The whole `map`/`filter` stuff can be written in one expression. This doesn't make it more efficient, but emphazises the flow of data. Read the map-map-grep from bottom upwards (actually right to left, think of APL).

.

```
sub parse {
  my %splitted_values =
    map { $_->[0], [split /\s*,\s*/, $_->[1]] }
    map {[split /\s*=\s*/, $_, 2]}
    grep{ length and !/^\s*#/ and /^\s*\w+\s*=\s*\S/ }
    @_;
  return \%splitted_values; # returning a reference improves efficiency
} 
```

But I think a more elegant solution here is to use a traditional loop:

```
sub parse {
  my %splitted_values;
  LINE: for (@_) {
    next LINE if !length or /^\s*#/;
    s/\A\s*|\s*\z//g; # Trimming the string—omitted in previous examples
    my ($key, $vals) = split /\s*=\s*/, $_, 2;
    defined $vals or next LINE; # check if $vals was assigned
    @{ $splitted_values{$key} } = split /\s*,\s*/, $vals; # Automatically create array in $splitted_values{$key}
  }
  return \%splitted_values
} 
```

If we decide to pass a filehandle instead, the loop would be replaced with

```
my $fh = shift;
LOOP: while (<$fh>) {
  chomp;
  ...;
} 
```

which would use an actual iterator.

You could now go and add function parameters, but do this only iff you are optimizing for flexibility and *nothing* else. I already used a code reference in the first example. You can invoke them with the `$code->(@args)` syntax.

```
use Carp; # Error handling for writing APIs
sub parse {
  my $args = shift;
  my $interesting  = $args->{interesting}   or croak qq("interesting" callback required);
  my $kv_splitter  = $args->{kv_splitter}   or croak qq("kv_splitter" callback required);
  my $val_transform= $args->{val_transform} || sub { $_[0] }; # identity by default

  my %splitted_values;
  LINE: for (@_) {
    next LINE unless $interesting->($_);
    s/\A\s*|\s*\z//g;
    my ($key, $vals) = $kv_splitter->($_);
    defined $vals or next LINE;
    $splitted_values{$key} = $val_transform->($vals);
  }
  return \%splitted_values;
} 
```

This could then be called like

```
my $data = parse {
  interesting   => sub { length($_[0]) and not $_[0] =~ /^\s*#/ },
  kv_splitter   => sub { split /\s*=\s*/, $_[0], 2 },
  val_transform => sub { [ split /\s*,\s*/, $_[0] ] }, # returns anonymous arrayref
}, @lines; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T17:27:37.060

我认为最现代的方法在于利用 CPAN 模块。在您的示例中，[Config::Properties](http://search.cpan.org/~salva/Config-Properties-1.75/lib/Config/Properties.pm)可能会有所帮助：

```
use strict;
use warnings;
use Config::Properties;

my $config = Config::Properties->new(file => 'example.properties') or die $!;
my $value = $config->getProperty('key'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T07:00:39.650

正如@collapsar 链接的帖子中所指出的，*[Higher-Order Perl](http://hop.perl.plover.com/)*是探索 Perl 中函数式技术的绝佳读物。

这是一个符合您要点的示例：

```
use strict;
use warnings;
use Data::Dumper;

my @filt_rx = ( qr{^\s*\#},
                qr{^[\r\n]+$} );
my $kv_rx = qr{^\s*(\w+)\s*=\s*([^\r\n]*)};
my $spl_rx = qr{\s*,\s*};

my $iterator = sub {
    my ($fh) = @_;
    return sub {
        my $line = readline($fh);
        return $line;
    };
};
my $filter = sub {
    my ($it,@r) = @_;
    return sub {
        my $line;
        do {
            $line = $it->();
        } while (  defined $line
                && grep { $line =~ m/$_/} @r );
        return $line;
    };
};
my $kv = sub {
    my ($line,$rx) = @_;
    return ($line =~ m/$rx/);
};
my $spl = sub {
    my ($values,$rx) = @_;
    return split $rx, $values;
};

my $it = $iterator->( \*DATA );
my $f = $filter->($it,@filt_rx);

my %map;
while ( my $line = $f->() ) {
    my ($k,$v) = $kv->($line,$kv_rx);
    $map{$k} = [ $spl->($v,$spl_rx) ];
}
print Dumper \%map;

__DATA__
# comment line - ignore

# ignore also empty lines
key1 = value
key2 = value1, value2, value3 
```

它在提供的输入上产生以下哈希：

```
$VAR1 = {
          'key2' => [
                      'value1',
                      'value2',
                      'value3'
                    ],
          'key1' => [
                      'value'
                    ]
        }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:01:14.943

您可能对[这个 SO 问题](https://stackoverflow.com/questions/4049896/implementing-functional-programming-in-perl)以及[这个](https://stackoverflow.com/questions/2194000/how-can-i-code-in-a-functional-style-in-perl)问题感兴趣。

以下代码是一个独立的 perl 脚本，旨在让您了解如何在 perl 中实现（仅部分采用功能样式；如果您不反感看到特定的编码样式和/或语言结构，我可以稍微改进解决方案）。

Miguel Prz 是对的，在大多数情况下，您会在[CPAN](http://search.cpan.org)中搜索符合您要求的解决方案。

```
my (
      $is_interesting_line
    , $re_is_comment_line
    , $re_key_values
    , $re_splitter
);

$re_is_comment_line = qr(^\s*#);
$re_key_values      = qr(^\s*(\w+)\s*=\s*(.*)$);
$re_splitter        = qr(\s*,\s*);
$is_interesting_line = sub {
        my $line = shift;
        return (
                (!(
                        !defined($line)
                     || ($line eq '')
                ))
            &&  ($line =~ /$re_key_values/)
        );
    };

sub strip {
    my $line = shift;
    # your implementation goes here
    return $line;
}
sub parse {
    my @lines = @_;
    #
    my (
          $dict
        , $interesting_lines
        , $k
        , $v
    );
    #
    @$interesting_lines =
        grep {
                &{$is_interesting_line} ( $_ );
            } ( map { strip($_); } @lines )
    ;

    $dict = {};
    map {
        if ($_ =~ /$re_key_values/) {
            ($k, $v) = ($1, [split(/$re_splitter/, $2)]);
            $$dict{$k} = $v;
        }
    } @$interesting_lines;

    return $dict;
} # parse

#
# sample execution goes here
#    
my $parse =<<EOL;
# comment
what = is, this, you, wonder
it = is, perl
EOL

parse ( split (/[\r\n]+/, $parse) ); 
```

# jquery - 通过JQuery替换父DIV下的子文本

> ID：16220456
> 
> 赞同：2
> 
> 时间：2013-04-25T16:49:58.880
> 
> 标签：jquery, replace

我想在以下代码中将*（拒绝访问。请登录或注册。）*的文本更改为***“您无权访问” ：-***

```
<div class="messages error">
<h2 class="element-invisible">Error message</h2>
Access denied. Please Login or Register.
</div> 
```

我尝试在 Ready Function 中使用以下代码，但它无法正常工作。

```
$("div.messages").text(function () {
        console.log($(this).text());
        return $(this).text().replace("Access denied. Please Login or Register.", "You are not authorized to access"); 
    }); 
```

谢谢。

* * *

有没有其他方法可以做到这一点？它给了我错误

```
Uncaught TypeError: Cannot set property 'nodeValue' of undefined ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:53:30.140

```
$("div.messages h2")
      .prop('nextSibling')
      .nodeValue = "You are not authorized to access"; 
```

[http://jsfiddle.net/ZwLKZ/](http://jsfiddle.net/ZwLKZ/)

```
$("div.messages").contents().filter(function() {
     return this.nodeType === 3 && $.trim(this.nodeValue) !== ''; 
}).get(0).nodeValue = "You are not authorized to access"; 
```

# parallel-processing - 是否可以在 OpenCL 中为不同的内核使用相同的内存缓冲区？

> ID：16220457
> 
> 赞同：1
> 
> 时间：2013-04-25T16:50:11.347
> 
> 标签：parallel-processing, opencl

我正在实现一个内核函数，其中来自主机端的内存被传输到内核。内核具有三个函数.. 是否可以在不同时间与内核共享相同的内存缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:15:34.477

是的，我用我的光线追踪器来做这个。我有三个内核。一个改变几何形状的预处理器、一个光线追踪器和一个进行图像处理的后处理器。我与他们三个共享内存缓冲区。我确保内核在开始下一个内核之前完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T12:48:02.123

您可以毫无问题地共享内存。如果内存是只读的，您甚至可以将该内存对象用作同时运行的 2 个内核的输入（即：不同的 GPU/相同的上下文）。

但是，如果您想覆盖内存区域，请小心并使用事件来同步您的内核。我强烈推荐事件机制，因为它支持并行 I/O 读取和写入另一个队列中的内存区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:45:11.330

是的，多个内核可以使用相同的内存对象，只要不存在内核同时执行的风险。通常的“未创建无序执行的单个命令队列”就是这种情况。

# php - 在登录尝试之前激活条件 html

> ID：16220461
> 
> 赞同：0
> 
> 时间：2013-04-25T16:50:19.600
> 
> 标签：php, codeigniter

我正在使用 codeigniter 2.1。我的登录视图中有以下内容：

```
<? if($message == TRUE): ?>
    <div class="row">
        <div class="span4">
            <div class="alert alert-error">
                <strong>Login</strong> failed!.
            </div>
        </div>
    </div> 
```

这个想法是只有在登录尝试失败时才可见。但是我注意到它在第一次激活登录页面时变为活动状态。我的登录控制器具有以下索引功能

```
if(!$this->is_logged_in()){
        $this->load->view('login', array('message' => FALSE));
    }
    else{
        redirect('site'); 
```

我清除了浏览器缓存，所以我认为它不是保留的 cookie。

知道如何解决这个问题吗？

提前致谢，

账单

# math - 改变陡度，怎么做

> ID：16220463
> 
> 赞同：0
> 
> 时间：2013-04-25T16:50:26.097
> 
> 标签：math, xna

随着 for 循环的进展，您将如何改变陡度。基本上我已经制作了一个带有形成山谷的顶点的地形。此处为这些顶点创建数据以供使用：

```
 // Divides it to a sensible height
    const int DIVISOR_NUMBER = 40;

    for (int x = 0; x < TerrainWidth; x++)
    {
        float height = Math.Abs(((float)x - ((float)TerrainWidth / 2))/ (float)DIVISOR_NUMBER);

        for (int y = 0; y < TerrainHeight; y++)
        {
            float copyOfHeight = height;
            float randomValue = random.Next(0, 3);
            copyOfHeight += randomValue / 10;
            HeightData[x, y] = copyOfHeight;
        }
    } 
```

这工作正常。但是我现在想让山谷的两侧在第一个循环的开始和结束时变得更陡峭，并且山谷越靠近中心越平坦。我有点精神障碍，想不出一个好的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:12:12.737

您可以为此使用平方（又名二次）曲线。尝试：

```
float offset = (float)x - (float)TerrainWidth/2;
float height = offset*offset*SCALE_FACTOR; 
```

如果您仍然想要在谷底出现“折痕”，您可以将您的身高设为加权和：

```
float height = Math.Abs(offset) * ABS_FACTOR + offset*offset * QUADRATIC_FACTOR; 
```

# python - 在 Enthought Canopy python 中导入 rpy2 模块

> ID：16220465
> 
> 赞同：5
> 
> 时间：2013-04-25T16:50:27.117
> 
> 标签：python, r, rpy2, enthought

安装 Enthought Canopy python 后，我重新安装了 R 和 rpy2。

在 python 中，我现在可以：

```
import rpy2 
```

没有错误信息。但是，当我想导入任何特定的 rpy2 模块时，我收到以下错误：

```
import rpy2.robjects
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-2-bd461266c9bc> in <module>()
----> 1 import rpy2.robjects

/Users/martinkampmann/Library/Enthought/Canopy_32bit/User/lib/python2.7/site-packages/rpy2-2.3.5-py2.7-macosx-10.6-i386.egg/rpy2/robjects/__init__.py in <module>()
     13 import itertools
     14 from datetime import datetime
---> 15 import rpy2.rinterface as rinterface
     16 import rpy2.rlike.container as rlc
     17 

/Users/martinkampmann/Library/Enthought/Canopy_32bit/User/lib/python2.7/site-packages/rpy2-2.3.5-py2.7-macosx-10.6-i386.egg/rpy2/rinterface/__init__.py in <module>()
     99 
    100 
--> 101 from rpy2.rinterface._rinterface import *
    102 
    103 

ImportError: dlopen(/Users/martinkampmann/Library/Enthought/Canopy_32bit/User/lib/python2.7/site-packages/rpy2-2.3.5-py2.7-macosx-10.6-i386.egg/rpy2/rinterface/_rinterface.so, 2): Symbol not found: _R_BaseEnv
  Referenced from: /Users/martinkampmann/Library/Enthought/Canopy_32bit/User/lib/python2.7/site-packages/rpy2-2.3.5-py2.7-macosx-10.6-i386.egg/rpy2/rinterface/_rinterface.so
  Expected in: flat namespace
 in /Users/martinkampmann/Library/Enthought/Canopy_32bit/User/lib/python2.7/site-packages/rpy2-2.3.5-py2.7-macosx-10.6-i386.egg/rpy2/rinterface/_rinterface.so 
```

# c# - 如何在 C# 的嵌入式 Web 浏览器中允许被阻止的内容？

> ID：16220466
> 
> 赞同：3
> 
> 时间：2013-04-25T16:50:37.497
> 
> 标签：c#, javascript, browser

我正在开发嵌入 Webbrowser 控件的 ac# 应用程序。我动态创建网站并使用 NavigateToString() 来显示它。我在带有 IE10 的 Windows 8 上。

现在我的问题是：Javascript 不会执行。例如，我在表单上添加了一个调用 alert 的链接和另一个调用 reset() 的链接。两者都不做。我相信这一定是一些安全问题，因为当我说生成的页面并在 IE10 中手动打开文件并单击其中一个链接时，我会在底部弹出一个弹出窗口，上面写着“Internet Explorer 限制此网页运行脚本或 ActiveX控制。” 和一个“允许阻止的内容”按钮。如果我只是关闭弹出窗口，什么都不会发生，如果我单击“允许阻止的内容”，JavaScript 工作正常。

如何在嵌入式 Web 浏览器中启用 JavaScript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:43:01.850

您如何访问该本地网站？是本地主机吗？您需要使 url 安全友好，这样它就不会被阻止，而是给它一个 url http:// localhost:someport ，它应该可以工作

# prolog - 在 Prolog (SWI) 中，如何建立用户提供的对的知识库并断言相等

> ID：16220467
> 
> 赞同：0
> 
> 时间：2013-04-25T16:50:39.037
> 
> 标签：prolog

我对 Prolog 很陌生，正在努力学习。

对于我的程序，我想让用户提供成对的“类型”字符串。

例如，用户在命令行中提供字符串“john”和“man”。这些原子将相等，即 john(man)。

在下一个提示符下，用户提供“man”和“tall”，程序再次断言这些是有效的，man(tall)。

然后用户可以查询程序并询问“约翰高吗？”。或者在 Prolog 中： john(tall) 通过传递属性变为真。

我已经能够解析来自用户输入的字符串并将它们分配给变量`Subject`和`Object`.

我尝试了一个子句（其中 Subject 和 Object 是不同的字符串）：

```
attribute(Subject, Object) :-
   assert(term_to_atom(_ , Subject),
   term_to_atom(_ , Object)). 
```

我想断言 Subject 和 Object 是有效对的事实。如果用户断言它，那么它们属于一起。我如何强制这种对的平等？

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:07:50.263

最近这类问题被问了很多（我猜你的教授都分享笔记或其他东西），所以浏览最近的历史可能对你很有帮助。例如，我想到了[这个。](https://stackoverflow.com/questions/16173977/prolog-error-when-querying-a-false-statement)

您的代码非常广泛。这就是你想要做的：

```
attribute(Subject, Object) :-
  Fact =.. [Object, Subject],
  assertz(Fact). 
```

使用它的工作方式如下：

```
?- attribute(man, tall).
true.

?- tall(X).
X = man. 
```

所以，关于这段代码，你应该注意以下几点：

*   我们使用`=../2`“univ”运算符从列表构建结构。这是从一些原子创建事实的唯一方法。
*   我已经交换了主语和宾语，因为换一种方式几乎肯定不是你想要的。
*   您想要的谓词是`assertz/1`or `asserta/1`， not `assert/2`。末尾的 a 和 z 只是告诉 Prolog 你想要在数据库的开头还是结尾的事实。

根据查看您的代码，我认为您需要摆脱很多包袱才能使用 Prolog 提高工作效率。

1.  Prolog 谓词不返回值。所以`assert(term_to_atom(...`甚至不在正确的轨道上，因为您似乎认为这`term_to_atom`会“返回”一个值，并且它会`assert`像函数式或命令式语言一样被替换到调用中。Prolog 的工作原理与此完全不同。
2.  我不确定为什么您的`term_to_atom`谓词中有一个空变量。我认为你这样做是为了满足谓词的数量，但是除非你有一个基本术语和一个变量，否则这个谓词是毫无用处的。
3.  有一个`assert/2`，但它不会做你想要的。应该清楚为什么 assert 通常只接受一个参数。
4.  Prolog 的事实应该是这样`property(subject...)`的。构造事实然后查询它们并不容易，这是您必须使用`man(tall)`. 你想说的是有一个属性，个子高，`man`满足。

我强烈建议您在此时备份并阅读一些基本的 Prolog 教程。如果你试图向前推进，你只会迷失更多。

**编辑**：针对您的评论，我不确定您想要多通用。在您处理中间有 [is,a] 的 4 项列表的基本情况下，这就足够了：

```
build_fact([Subject,is,a,Object], is_a(Subject, Object)). 
```

如果要隔离第一个和最后一个并创建事实，则必须再次使用 univ：

```
build_fact([Subject|Rest], Fact) :-
  append(PredicateAtoms, [Object], Rest),
  atomic_list_concat(PredicateAtoms, '_', Predicate),
  Fact =.. [Predicate, Subject, Object]. 
```

不确定您是否愿意接受最终会出现的文章（“a”，“the”）：

```
?- build_fact([john,could,be,a,man], Fact).
Fact = could_be_a(john, man) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:05:20.693

不要做可变事实的头脑。当术语名称集固定时，Prolog 效果最佳。相反，使用预定义的静态术语名称为存储属性创建一个通用位置，例如：

```
is_a(john, man).

property(man, tall).
property(john, thin). 
```

（想想普通形式的 SQL 表）。然后你可以使用 simple`assertz/1`来更新数据库：

```
add_property(X, Y) :- assertz(property(X, Y)). 
```

# c# - 如何从像素字节数组创建 BitmapImage（实时视频显示）

> ID：16220472
> 
> 赞同：6
> 
> 时间：2013-04-25T16:50:44.433
> 
> 标签：c#, wpf, video-capture, bitmapimage

我需要在 WPF 控件上显示实时图像。我正在寻找使用 WPF 执行此操作的最快方法。

我正在使用其 dll API ( [AVT](http://www.alliedvisiontec.com/us/products/software/windows/avt-pvapi-sdk.html) ) 从相机捕获图像。

图像由 dll 写入，相机使用 IntPtr 向名为**tFrame**的 Image 结构发起回调（如下所述）。像素数据存储在 ImageBuffer 属性中，是一个字节数组的 InPtr。

我知道如何从像素字节数组创建位图，但不知道位图图像。因此可以创建一个 Bitmap，然后从中创建一个 BitmapImagem。 [这里有一种方法可以从内存上的 Bitmap 创建 BitmapImage](https://stackoverflow.com/questions/1118496/using-image-control-in-wpf-to-display-system-drawing-bitmap/1118557#1118557)。但我想直接从数据源（tFrame）创建**BitmapImage 。**我怎样才能做到这一点？

我知道 BitmapImage 有一个 CopyPixels 方法，但它缺少一个 SetPixels。

```
public struct tFrame
{
    public IntPtr AncillaryBuffer;
    public uint AncillaryBufferSize;
    public uint AncillarySize;
    public tBayerPattern BayerPattern;
    public uint BitDepth;
    public tFrameCtx Context;
    public tImageFormat Format;
    public uint FrameCount;
    public uint Height;
    public IntPtr ImageBuffer;
    public uint ImageBufferSize;
    public uint ImageSize;
    public uint RegionX;
    public uint RegionY;
    public tErr Status;
    public uint TimestampHi;
    public uint TimestampLo;
    public uint Width;
} 
```

这是我从像素字节数组创建位图的方法。这用于该软件的 WinForm 版本。

```
private void CreateBitmap(tFrame frame)
{
    //This sample is for a 8bpp captured image
    PixelFormat pxFormat = PixelFormat.Format8bppIndexed;

    //STRIDE
    //[https://stackoverflow.com/questions/1983781/why-does-bitmapsource-create-throw-an-argumentexception/1983886#1983886][3]
    //float bitsPerPixel = System.Drawing.Image.GetPixelFormatSize(format);
    int bitsPerPixel = ((int)pxFormat >> 8) & 0xFF;
    //Number of bits used to store the image data per line (only the valid data)
    int validBitsPerLine = ((int)frame.Width) * bitsPerPixel;
    //4 bytes for every int32 (32 bits)
    int stride = ((validBitsPerLine + 31) / 32) * 4;

    Bitmap bmp = new Bitmap((int)frame.Width, (int)frame.Height, stride, pxFormat, frame.ImageBuffer);
} 
```

* * *

编辑1：

感谢 dr.mo，现在我能够以约 3% 的 CPU 使用率显示 60 FPS 1024x1024 图像！我正在做的是：

```
//@ UI Thread
public WriteableBitmap wbm = new WriteableBitmap(1024, 1024, (double)96, (double)96, System.Windows.Media.PixelFormats.Gray8, null);
this.wbBackBuffer = this.wbm.BackBuffer;

//This can be called by a timer in the UI thread or at the grab Thread for every image, the CPU usage is almost the same.
void UpdateDisplayImage()
{
wbm.Lock();
wbm.AddDirtyRect(new Int32Rect(0, 0, wbm.PixelWidth, wbm.PixelHeight));
wbm.Unlock();
}

//@ Grab Thread
//Update the backbuffer with new camera image data.
UpdateBackBuffer(...);

/// <summary>
/// [http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx]
/// </summary>
public void UpdateBackBuffer(IntPtr pData, int w, int h, int ch)
{
    //Can not acess wbm from outside UI thread
    //CopyMemory(wbm.BackBuffer, pData, (uint)(w * h * ch));
    //I dont know if it is safe to write to it buffer like this:
    CopyMemory(this.wbBackBuffer, pData, (uint)(w * h * ch));
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T17:05:45.333

这应该可以解决问题。它超级快。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

using System.Drawing;
using System.Runtime.InteropServices;
using System.IO;
using System.ComponentModel;

public class MakeBitmapSource
{
    [DllImport("kernel32.dll", EntryPoint = "RtlMoveMemory")]
    public static extern void CopyMemory(IntPtr Destination, IntPtr Source, uint Length);

    public static BitmapSource FromNativePointer(IntPtr pData, int w, int h, int ch)
    {
        PixelFormat format = PixelFormats.Default;

        if (ch == 1) format = PixelFormats.Gray8; //grey scale image 0-255
        if (ch == 3) format = PixelFormats.Bgr24; //RGB
        if (ch == 4) format = PixelFormats.Bgr32; //RGB + alpha

        WriteableBitmap wbm = new WriteableBitmap(w, h, 96, 96, format, null);
        CopyMemory(wbm.BackBuffer, pData, (uint)(w * h * ch));

        wbm.Lock();
        wbm.AddDirtyRect(new Int32Rect(0, 0, wbm.PixelWidth, wbm.PixelHeight));
        wbm.Unlock();

        return wbm;
    }

    public static BitmapSource FromArray(byte[] data, int w, int h, int ch)
    {
        PixelFormat format = PixelFormats.Default;

        if (ch == 1) format = PixelFormats.Gray8; //grey scale image 0-255
        if (ch == 3) format = PixelFormats.Bgr24; //RGB
        if (ch == 4) format = PixelFormats.Bgr32; //RGB + alpha

        WriteableBitmap wbm = new WriteableBitmap(w, h, 96, 96, format, null);
        wbm.WritePixels(new Int32Rect(0, 0, w, h), data, ch * w, 0);

        return wbm;
    }
} 
```

# c++ - C++ 使用函子将函数传递给函数

> ID：16220473
> 
> 赞同：1
> 
> 时间：2013-04-25T16:50:45.507
> 
> 标签：c++, function, functor

我有两个函子：

```
class SFunctor {
public:
    SFunctor(double a) { _a = a; }
    double operator() (double t) { return _a * sin(t); }
private:
    double _a;
};

class CFunctor {
public:
    CFunctor(double b) { _b = b; }
    double operator() (double t) { return _b * cos(t); }
private:
    double _b;
}; 
```

我想将这些函数中的一个或另一个传递给另一个函数：

```
double squarer(double x, ??______?? func) {
      double y = func(x);
      return y * y;
} 
```

在我的主程序中，我想拨打这样的电话：

```
CFunctor sine(2.);
SFunctor cosine(4.);
double x= 0.5;
double s = squarer(x, sine);
double c = squarer(x, cosine); 
```

我如何指定功能基金，即在它前面代替 ?? **_** ?? ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:52:36.913

您可以简单地使用模板来完成

```
template <class F>
double squarer(double x, F& func) {
      double y = func(x);
      return y * y;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T14:35:48.277

我不是在敲上面的模板答案。事实上，这可能是两者中更好的选择，但我想指出，这也可以通过多态来完成。例如...

```
#include <math.h>
#include <iostream>
using std::cout;
using std::endl;

class BaseFunctor {
 public:
   virtual double operator() (double t) = 0;
 protected:
   BaseFunc() {}
};

class SFunctor : public BaseFunctor {
 public:
   SFunctor(double a) { _a = a; }
   double operator() (double t) { return _a * sin(t); }
 private:
   double _a;
};

class CFunctor : public BaseFunctor {
 public:
   CFunctor(double b) { _b = b; }
   double operator() (double t) { return _b * cos(t); }
 private:
   double _b;
};

double squarer(double x, BaseFunctor& func) {
   double y = func(x);
   return y * y;
}

int main() {
   SFunctor sine(.2);
   CFunctor cosine(.4);
   double x = .5;
   cout << squarer(x,sine) << endl;
   cout << squarer(x,cosine) << endl;
} 
```

我确保这是一个完整的工作演示，所以你可以复制它来测试它。您确实会观察到两个不同的数字打印到终端，从而证明多态性可以与仿函数一起使用。同样，我并不是说这比模板答案更好，我只是想指出它不是唯一的答案。即使问题已得到解答，我希望这有助于告知任何想要了解的人。

# sql - 在表格上使用单独的过滤器执行多个单独的求和

> ID：16220474
> 
> 赞同：0
> 
> 时间：2013-04-25T16:50:45.677
> 
> 标签：sql, sql-server, cursor, sum

我有一个表，其中包含一个金额列、一个参考字段和一个 id 列。我需要做的是根据每个参考的不同 ID 组合来计算金额。总共有九种不同的组合，然后我需要将它们插入到单独的表中。

我发现做到这一点的最佳方法是使用游标并分别执行每个 SUM，将数量分配给变量并为每个引用和每个组合更新表。

希望这是有道理的！

我希望找出的是-有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:53:35.937

你可以这样：

```
SELECT SUM(CASE WHEN (Id = 9) THEN Val ELSE 0 END) ConditionalSum
  From dbo.Table 
```

您可以在一个查询中获得许多具有不同条件的 SUM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:44:53.430

`combos`您可以使用以下列创建一个名为类似的表：

*   组合名称
*   参考 id 组合

（也许还有其他有用的列，例如 id 和创建时间，但这在这里并不重要）。

将您的组合插入此表中，例如：

```
First10     1
First10     2
...
First10     10
MyFavorite  42 
```

不管成对是什么。

然后你可以用一个查询做你想做的事：

```
select c.comboName, sum(val) as ConditionalSum
from t join
     combos c
     on t.referenceId = c.referenceId
group by c.comboName 
```

# pdf - 将ppt转换为jpg

> ID：16220484
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:51:19.610
> 
> 标签：pdf, jpeg, libreoffice

libreoffice --outdir "输出路径" --convert-to pdf输入路径/*.ppt

当我执行此操作时，仅转换第一张幻灯片，我希望将整个文件转换为 .jpg 文件（n 个文件）。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T22:06:26.647

尝试

```
libreoffice --headless --invisible -convert-to pdf path.ppt 
```

# csv - 将 D3 和 Crossfilter 与 CSV 一起使用时出现解析错误

> ID：16220485
> 
> 赞同：0
> 
> 时间：2013-04-25T16:51:22.133
> 
> 标签：csv, graph, d3.js, crossfilter

我正在使用 jmeter 在网站上执行负载测试。Jmeter 以 CSV 文件的形式生成输出。

我想使用这个 CSV 文件生成条形图。为了生成图表，我使用 D3 和 Crossfilter。

为此，我参考了[http://square.github.io/crossfilter/](http://square.github.io/crossfilter/) 并根据我的 CSV 文件要求通过编辑使用了相同的代码。

它显示以下错误：-

`Error: Problem parsing d="M230,100V50h9V100MNaN,100V0h9V100" index.html:1 2 Error: Problem parsing d="M230,100V100h9V100MNaN,100V100h9V100" d3.v3.min.js:1 46 Error: Problem parsing d="M230,100V100h9V100MNaN,100V100h9V100" d3.v3.min.js:1 114 Error: Problem parsing d="M230,100V100h9V100MNaN,100V0h9V100" d3.v3.min.js:1 30`

我的 CSV 文件是：

```
timeStamp,elapsed,label,responseCode,responseMessage,threadName,dataType,success,bytes,grpThreads,allThreads,Latency,Hostname
12/25/2012 0:02,2417,/ratings/rate.php,200,OK,Thread Group 1-1,text,TRUE,1067,1,1,2417,PRAVIN-PC
12/25/2012 0:02,3784,/ratings/rate.php,200,OK,Thread Group 1-1,text,TRUE,913,1,1,3783,PRAVIN-PC
12/25/2012 0:12,3121,/gampad/ads,200,OK,Thread Group 1-1,text,TRUE,1214,1,1,3121,PRAVIN-PC 
```

`

我的 HTML 文件代码是：

```
<style>
 body {
    font-family: "Helvetica Neue";
    margin: 40px auto;
    width: 960px;
    min-height: 2000px;
   }

   #body {
   position: relative;
   }

   footer {
     padding: 2em 0 1em 0;
     font-size: 12px;
   }

   h1 {
     font-size: 96px;
     margin-top: .3em;
     margin-bottom: 0;
   }

   h1 + h2 {
     margin-top: 0;
   }

   h2 {
     font-weight: 400;
     font-size: 28px;
   }

   h1, h2 {
     font-family: "Yanone Kaffeesatz";
     text-rendering: optimizeLegibility;
   }

   #body > p {
     line-height: 1.5em;
     width: 640px;
     text-rendering: optimizeLegibility;
   }

   #charts {
     padding: 10px 0;
   }

   .chart {
     display: inline-block;
     height: 151px;
     margin-bottom: 20px;
   }

   .reset {
     padding-left: 1em;
     font-size: smaller;
     color: #ccc;
   }

   .background.bar {
     fill: #ccc;
   }

   .foreground.bar {
     fill: steelblue;
   }

   .axis path, .axis line {
     fill: none;
     stroke: #000;
     shape-rendering: crispEdges;
   }

   .axis text {
     font: 10px sans-serif;
   }

   .brush rect.extent {
     fill: steelblue;
     fill-opacity: .125;
   }

   .brush .resize path {
     fill: #eee;
     stroke: #666;
   }

   #hour-chart {
     width: 260px;
   }

   #delay-chart {
     width: 230px;
   }

   #distance-chart {
     width: 420px;
   }

   #date-chart {
     width: 920px;
   }

   #flight-list {
     min-height: 1024px;
   }

   #flight-list .date,
   #flight-list .day {
     margin-bottom: .4em;
   }

   #flight-list .flight {
     line-height: 1.5em;
     background: #eee;
     width: 640px;
     margin-bottom: 1px;
   }

   #flight-list .time {
     color: #999;
   }

   #flight-list .flight div {
     display: inline-block;
     width: 100px;
   }

   #flight-list div.distance,
   #flight-list div.delay {
     width: 160px;
     padding-right: 10px;
     text-align: right;
   }

   #flight-list .early {
     color: green;
   }

   aside {
     position: absolute;
     left: 740px;
     font-size: smaller;
     width: 220px;
   }

   </style>

   <div id="body">

   <div id="charts">
     <div id="hour-chart" class="chart">
       <div class="title">Time of Day</div>
     </div></br>
   <div id="delay-chart" class="chart">
       <div class="title">Page Load Time (ms.)</div>
   </div>
   <!--  <div id="distance-chart" class="chart">
       <div class="title">Visit Time    (mi.)</div>
     </div>
     <div id="date-chart" class="chart">
        <div class="title">Date</div>
      </div>-->
   </div>

   <aside id="totals"><span id="active">-</span> of <span id="total">-</span> Visits selected.</aside>

   <div id="lists">
     <div id="flight-list" class="list"></div>
   </div>

   <footer>
     <span style="float:right;">
       Released under the <a href="http://www.apache.org/licenses/LICENSE-     2.0.html">Apache License 2.0</a>.
     </span>
       Copyright 2012 <a href="http://squareup.com">Square, Inc.</a>
     </footer>

   </div>

   <script src="crossfilter.min.js"></script>
   <script src="d3.v3.min.js"></script>
   <script>

   // (It's CSV, but GitHub Pages only gzip's JSON at the moment.)
   d3.csv("resultofcommandline.csv", function(flights) {
        // A nest operator, for grouping the flight list.
    var nestByDate = d3.nest()
    .key(function(d) { return d3.time.day(d.date); });

 // A little coercion, since the CSV is untyped.
flights.forEach(function(d, i) {
    d.index = i;
    d.timeStamp = parseDate(d.timeStamp);
    d.Latency = +d.Latency;
});

    // Create the crossfilter for the relevant dimensions and groups.
     var flight = crossfilter(flights),
     all = flight.groupAll(),
     hour = flight.dimension(function(d) { return d.timeStamp.getHours() +  d.timeStamp.getMinutes() / 60; }),
    hours = hour.group(Math.floor),
    latency = flight.dimension(function(d) {return Math.min(1999, d.Latency);}),
    latencys = latency.group(function (d){  return Math.floor(d/50)*50 ;});
  var charts = [
    barChart()
        .dimension(latency)
        .group(latencys)
        .x(d3.scale.linear()
        .domain([0, 2000])
        .rangeRound([0, 10 * 40])),
    barChart()
        .dimension(hour)
        .group(hours)
        .x(d3.scale.linear()
        .domain([0, 24])
        .rangeRound([0, 10 * 24]))
    ];

    // Given our array of charts, which we assume are in the same order as the
    // .chart elements in the DOM, bind the charts to the DOM and render them.
    // We also listen to the chart's brush events to update the display.
    var chart = d3.selectAll(".chart")
                .data(charts)
                .each(function(chart) { chart.on("brush", renderAll).on("brushend", renderAll); });
    renderAll();

    // Renders the specified chart or list.
    function render(method) {
        d3.select(this).call(method);
    }
    // Whenever the brush moves, re-rendering everything.
    function renderAll() {
        chart.each(render);
    }

    // Like d3.time.format, but faster.
    function parseDate(d) {
        return new Date(d.substring(6,10),
            d.substring(0, 2) - 1,
            d.substring(3, 5),
            d.substring(11, 13),
            d.substring(14, 16));
    }
    window.filter = function(filters) {
        filters.forEach(function(d, i) { charts[i].filter(d); });
        renderAll();
    };

    window.reset = function(i) {
            charts[i].filter(null);
            renderAll();
    };

    function barChart() {
        if (!barChart.id) barChart.id = 0;

        var margin = {top: 10, right: 10, bottom: 20, left: 10},
        x,
        y = d3.scale.linear().range([100, 0]),
        id = barChart.id++,
        axis = d3.svg.axis().orient("bottom"),
        brush = d3.svg.brush(),
        brushDirty,
        dimension,
        group,
        round;

        function chart(div) {
            var width = x.range()[1],
            height = y.range()[0];
            y.domain([0, group.top(1)[0].value]);

        div.each(function() {
                var div = d3.select(this),
                g = div.select("g");

        // Create the skeletal chart.
        if (g.empty()) {
            div.select(".title").append("a")
            .attr("href", "javascript:reset(" + id + ")")
            .attr("class", "reset")
            .text("reset")
            .style("display", "none");
        g = div.append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        g.append("clipPath")
            .attr("id", "clip-" + id)
            .append("rect")
            .attr("width", width)
            .attr("height", height);
        g.selectAll(".bar")
            .data(["background", "foreground"])
            .enter().append("path")
            .attr("class", function(d) { return d + " bar"; })
            .datum(group.all());
        g.selectAll(".foreground.bar")
            .attr("clip-path", "url(#clip-" + id + ")");
        g.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(0," + height + ")")
            .call(axis);
        // Initialize the brush component with pretty resize handles.
        var gBrush = g.append("g").attr("class", "brush").call(brush);
        gBrush.selectAll("rect").attr("height", height);
        gBrush.selectAll(".resize").append("path").attr("d", resizePath);
    }

    // Only redraw the brush if set externally.
    if (brushDirty) {
        brushDirty = false;
        g.selectAll(".brush").call(brush);
        div.select(".title a").style("display", brush.empty() ? "none" : null);
        if (brush.empty()) {
            g.selectAll("#clip-" + id + " rect")
                .attr("x", 0)
                .attr("width", width);
     } 
     else {
        var extent = brush.extent();
        g.selectAll("#clip-" + id + " rect")
            .attr("x", x(extent[0]))
            .attr("width", x(extent[1]) - x(extent[0]));
      }
    }

    g.selectAll(".bar").attr("d", barPath);
  });

  function barPath(groups) {
    var path = [],
        i = -1,
        n = groups.length,
        d;
    while (++i < n) {
      d = groups[i];
      path.push("M", x(d.key), ",", height, "V", y(d.value), "h9V", height);
    }
    return path.join("");
  }

  function resizePath(d) {
    var e = +(d == "e"),
        x = e ? 1 : -1,
        y = height / 3;
    return "M" + (.5 * x) + "," + y
        + "A6,6 0 0 " + e + " " + (6.5 * x) + "," + (y + 6)
        + "V" + (2 * y - 6)
        + "A6,6 0 0 " + e + " " + (.5 * x) + "," + (2 * y)
        + "Z"
        + "M" + (2.5 * x) + "," + (y + 8)
        + "V" + (2 * y - 8)
        + "M" + (4.5 * x) + "," + (y + 8)
        + "V" + (2 * y - 8);
  }
}

brush.on("brushstart.chart", function() {
  var div = d3.select(this.parentNode.parentNode.parentNode);
  div.select(".title a").style("display", null);
});

brush.on("brush.chart", function() {
  var g = d3.select(this.parentNode),
      extent = brush.extent();
  if (round) g.select(".brush")
      .call(brush.extent(extent = extent.map(round)))
    .selectAll(".resize")
      .style("display", null);
  g.select("#clip-" + id + " rect")
      .attr("x", x(extent[0]))
      .attr("width", x(extent[1]) - x(extent[0]));
  dimension.filterRange(extent);
});

brush.on("brushend.chart", function() {
  if (brush.empty()) {
    var div = d3.select(this.parentNode.parentNode.parentNode);
    div.select(".title a").style("display", "none");
    div.select("#clip-" + id + " rect").attr("x", null).attr("width", "100%");
    dimension.filterAll();
  }
});

chart.margin = function(_) {
  if (!arguments.length) return margin;
  margin = _;
  return chart;
};

chart.x = function(_) {
  if (!arguments.length) return x;
  x = _;
  axis.scale(x);
  brush.x(x);
  return chart;
};

chart.y = function(_) {
  if (!arguments.length) return y;
  y = _;
  return chart;
};

chart.dimension = function(_) {
  if (!arguments.length) return dimension;
  dimension = _;
  return chart;
};

chart.filter = function(_) {
  if (_) {
    brush.extent(_);
    dimension.filterRange(_);
  } else {
    brush.clear();
    dimension.filterAll();
  }
  brushDirty = true;
  return chart;
};

chart.group = function(_) {
  if (!arguments.length) return group;
  group = _;
  return chart;
};

chart.round = function(_) {
  if (!arguments.length) return round;
  round = _;
  return chart;
};

return d3.rebind(chart, brush, "on");
 }
 });

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:22:31.563

问题是您的`parseDate()`函数采用`hh:mm`时间格式，但您的数据包含`h:mm`条目。因此，您必须要么更改输入数据的格式，要么调整解析功能。

我更改了您提供的 3 个示例行，请在[此处](http://jsfiddle.net/77hXA/3/)查看工作示例！

# mysql - 如果有一种方法可以在一个查询中使用 MySql 将 MS Sql 表内部连接到 MySql 表？

> ID：16220490
> 
> 赞同：3
> 
> 时间：2013-04-25T16:51:32.150
> 
> 标签：mysql, sql, sql-server, inner-join

我有 2 台服务器，一台运行 Microsoft SQL Server，另一台使用 MySql。

我需要能够将一个从 MS SQL 命名为“A”的表内部连接到位于使用 MySql 的不同服务器上的表“B”

所以我希望能够做这样的事情

`SELECT A.*, B.* FROM A INNER JOIN B ON A.id=B.id LIMIT 100`

我怎样才能做到这一点？请注意，两台服务器都在同一个网络上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:06:29.733

谷歌状态的第一个链接......

你需要安装这个：

[http://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)

并遵循本指南：

[http://technikhil.wordpress.com/2007/05/13/getting-microsoft-sql-server-and-mysql-to-talk/](http://technikhil.wordpress.com/2007/05/13/getting-microsoft-sql-server-and-mysql-to-talk/)

连接服务器，然后使用 openquery 执行 MS SQL 查询。

# linux - VirtualHost 配置覆盖了主域

> ID：16220491
> 
> 赞同：0
> 
> 时间：2013-04-25T16:51:38.440
> 
> 标签：linux, apache, virtualhost

我将 apache 配置到服务器中的主域，如果只是该域，它就可以正常工作：

在 httpd.conf 中：

```
Listen maindomain.com:80
DocumentRoot "/home/webserver/maindomain/html" 
```

但添加一个这样的虚拟主机：

```
<VirtualHost secondoDomain.com>
DocumentRoot /home/webserver/secondoDomain/html/
ServerName secondoDomain.com
ErrorLog /home/webserver/secondoDomain/logs/error_log
CustomLog /home/webserver/secondoDomain/logs/access_log common
</VirtualHost> 
```

[所有对http://maindomain.com](http://maindomain.com)的调用都被重定向到 secondoDomain.com。

大家知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:57:31.533

添加虚拟主机时，您还需要主域的条目 - 因为所有主机都变为虚拟主机。

例如：

```
Listen *:80
<VirtualHost *:80>
    ServerName maindomain.com
    ServerAlias localhost
    DocumentRoot "/home/webserver/maindomain/html"
</VirtualHost>

<VirtualHost *:80>
    ServerName seconddomain.com
    DocumentRoot "/home/webserver/secondoDomain/html/"
</VirtualHost> 
```

确保您也有`<Directory "/home/webserver/secondoDomain/html/">`第二个文件夹。

# .htaccess - 在 url 中隐藏 symfony2 应用程序的目录

> ID：16220494
> 
> 赞同：1
> 
> 时间：2013-04-25T16:51:42.553
> 
> 标签：.htaccess, url, symfony, hide

app.php 隐藏在 url 中，如下所示：

重写引擎开启

```
#<IfModule mod_vhost_alias.c>
#    RewriteBase /
#</IfModule>

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L] 
```

但在它之前，有：/symfony/web/

如何隐藏它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:53:31.883

更改您`DocumentRoot`的 Apache 配置以指向该`web/`目录。

编辑`/etc/httpd/conf/extra/httpd-vhost.conf`（使用 Ubuntu 等其他发行版时，您的路径可能会有所不同）：

```
...
<VirtualHost *:80>
    ...
    DocumentRoot /path/to/your/webapp/symfony/web

    <Directory /path/to/your/webapp/symfony/web>
        ...
    </Directory>
</VirtualHost> 
```

# ios - iOS 6 约束使 UIView 更长

> ID：16220497
> 
> 赞同：0
> 
> 时间：2013-04-25T16:51:56.967
> 
> 标签：ios

我不确定发生了什么以及如何处理。我在一个单元格中有一个 UIView，我使用 IB 设置了约束，并且由于某种原因它延伸到单元格的末尾。我怎样才能阻止它伸展。

![在此处输入图像描述](https://i.stack.imgur.com/BflaD.png)

结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/ULwPY.png)

我正在动态注入步进控件，但正如您所见，UIView 延伸到单元格的末尾。我尝试了引脚宽度，然后它完全搞砸了一切，甚至不显示 UIView。

这是约束的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/LOJ7w.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:59:36.453

好的，让我在这里画一些区别。

*   最*简单*的方法是你*总是*在单元格中有步进器（并且没有 UIView）。对于那些我们不应该看到步进器的单元格，您将其设置`hidden`为 YES；对于我们应该看到它的那些单元格，您将其设置`hidden`为 NO。这就是我会做的。

*   执行此操作的*程序员*方法是您的单元格中*根本没有*任何蓝色 UIView。您在代码中添加步进器，*并在代码中提供其约束*以定位它。你说：

    > 所以我不必硬编码坐标

    但是在代码中添加约束*并不是*坐标的“硬编码”。使用约束，您可以根据父视图的插图*概念性*地描述位置，并且随着父视图调整大小，您仍然可以正确定位。因此，添加步进器及其约束没有哲学上的反对意见，不这样做只是懒惰。

*   *懒惰*但浪费的方法是做你正在做的事情，即在笔尖中添加蓝色的UIView作为指南。但是，即使您*确实*使用蓝色 UIView 作为指南，如果您的约束是正确的，您应该能够正确地做到这一点。我刚刚尝试过，但无法重现该问题：我的蓝色视图出现在我的单元格中，与它出现在 Interface Builder 中的位置相同。

*   *即时*解决方案是不要在从中绘制 UITableViewCell 的 nib 中使用 Autolayout - 即在文件检查器中取消选中此 nib 的“使用自动布局”。因此，您将使用老式的弹簧和支柱（自动调整大小）来定位子视图。

![在此处输入图像描述](https://i.stack.imgur.com/uPade.png)

# qr-code - 如何知道用户通过 QR 扫描直接访问 URL？

> ID：16220510
> 
> 赞同：0
> 
> 时间：2013-04-25T16:52:47.513
> 
> 标签：qr-code

我正在构建一个使用 QR 码的基于 Web 的应用程序。有没有办法知道当用户登陆一个用户直接来自扫描的二维码的 URL 时？而不是直接访问 URL？我不希望用户能够在几天后回到同一个 URL 并刷新几次而不进行新的扫描。我意识到这是一个很长的尝试，我知道构建自定义 QR 扫描应用程序可能是唯一的方法，但只是看看是否有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:00:12.467

我想您可以在 url 的查询字符串中添加一个值，表明它来自 QR 链接，例如

```
http://myserver/mypage.php?QR=1 
```

您将让页面自动重定向（元刷新等）到：

```
http://myserver/mypage.php 
```

但是到了这个时候，您已经将此会话与正在使用的 QR 码相关联。希望用户不会注意到这种花招，而浏览器只会显示第二个 URL。只有当用户返回 QR 扫描应用程序时，他/她才会意识到会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:07:15.313

不，没有办法以非常安全的方式做到这一点。我想您可以创建一个自定义应用程序进行扫描，然后执行一些用户无法篡改的安全逻辑。除此之外，任何依赖浏览器打开 URL X 的机制都可以由用户刚刚输入 X 触发。从服务器端的角度来看，这没有区别。

# r - 如何修剪 R 向量？

> ID：16220521
> 
> 赞同：3
> 
> 时间：2013-04-25T16:53:50.790
> 
> 标签：r, vectorization

我有以下排序向量：

```
> v
 [1] -1  0  1  2  4  5  2  3  4  5  7  8  5  6  7  8 10 11 
```

*如何在不循环整个向量的情况下*删除 -1、0 和 11 条目，无论是使用用户循环还是隐式使用语言关键字？也就是说，我想在每条*边上*修剪向量，并且只在每条边上，这样排序后的序列就在我的 min、max 参数 1 和 10 内。解决方案应该假设向量是排序的，以避免检查每个元素。

当我们想要将向量中的项目用作另一个对象的索引时，这种解决方案可以在非常大的向量的向量化操作中派上用场。对于一个应用程序，请参阅[此线程](https://stackoverflow.com/questions/16200667/how-can-i-vectorize-access-to-neighbour-vector-elements-in-r)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T16:56:59.647

要按索引在向量中包含元素：

```
v [2:10] 
```

排除某些元素

```
v [-c (1, 11) ] 
```

只包括一定范围：

```
v <- v [v>=1 & v <=10] 
```

* * *

如果允许我假设，就像在您的示例中一样，要修剪的元素数 << 向量中的元素数，那么我认为我可以击败二进制搜索：

```
> n<-1e8
> v<--3:(n+3)
> 
> min <- 1
> max <- length(v)
> 
> calcMin <- function(v, minVal){
+   while(v[min] < minVal){
+       min <- min + 1
+   }
+   min
+ }
> 
> calcMax <- function(v, maxVal){
+   while(v[max] > maxVal){
+       max <- max - 1
+   }
+   max
+ }
> 
> #Compute the min and max indices and create a sequence
> system.time(a <- v[calcMin(v, 1):calcMax(v,n)])
   user  system elapsed 
  1.030   0.269   1.298 
> 
> #do a binary search to find the elements (as suggested by @nograpes)
> system.time(b <- v[do.call(seq,as.list(findInterval(c(1,n),v)))])
   user  system elapsed 
  2.208   0.631   2.842 
> 
> #use negative indexing to remove elements
> system.time(c <- v[-c(1:(calcMin(v, 1)-1), (calcMax(v,n)+1):length(v))])
   user  system elapsed 
  1.449   0.256   1.704 
> 
> #use head and tail to trim the vector
> system.time(d <- tail(head(v, n=(calcMax(v,n)-length(v))), n=-calcMin(v, 1)+1))
   user  system elapsed 
  2.994   0.877   3.871 
> 
> identical(a, b)
[1] TRUE
> identical(a, c)
[1] TRUE
> identical(a, d)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T16:57:42.863

有很多方法可以做到，这里有一些：

```
> v <- -1:11 # creating your vector
> v[v %in% 1:10]
 [1]  1  2  3  4  5  6  7  8  9 10
> setdiff(v, c(-1,0,11))
 [1]  1  2  3  4  5  6  7  8  9 10
> intersect(v, 1:10)
 [1]  1  2  3  4  5  6  7  8  9 10 
```

还有两个选择，不是那么优雅。

```
> na.omit(match(v, 1:10))
> na.exclude(match(v, 1:10)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T18:55:36.283

之前的所有解决方案都隐式检查向量的每个元素。正如@Robert Kubrick 指出的那样，这并没有利用向量已经排序的事实。

为了利用向量的排序特性，您可以使用二分搜索（通过`findInterval`）来查找开始和结束索引，而无需查看每个元素：

```
n<-1e9
v<--3:(n+3)
system.time(a <- v [v>=1 & v <=n]) # 68 s
system.time(b <- v[do.call(seq,as.list(findInterval(c(1,n),v)))]) # 15s
identical(a,b) # TRUE 
```

它有点笨拙，并且有[一些讨论](http://r.789695.n4.nabble.com/General-binary-search-td3426478.html)认为二进制搜索`findInterval`可能不是完全有效的，但总体思路是存在的。

* * *

正如评论中所指出的，上述仅在索引位于向量中时才有效。这是我认为可行的功能：

```
in.range <- function(x, lo = -Inf, hi = +Inf) {
   lo.idx <- findInterval(lo, x, all.inside = TRUE)
   hi.idx <- findInterval(hi, x)
   lo.idx <- lo.idx + x[lo.idx] >= lo
   x[seq(lo.idx, hi.idx)]
}

system.time(b <- in.range(v, 1, n) # 15s 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T16:58:01.953

您还可以使用`%in%`：

```
 vv <- c(-1,  0  ,1  ,2  ,4  ,5,  2  ,3  ,4,  5,  7  ,8,  5,  6,  7,  8, 10, 11)
 vv[vv %in% 1:10]

 [1]  1  2  4  5  2  3  4  5  7  8  5  6  7  8 10 
```

# oracle - Oracle物化视图计算成本

> ID：16220525
> 
> 赞同：0
> 
> 时间：2013-04-25T16:53:57.757
> 
> 标签：oracle, optimization, query-optimization, materialized-views

在 Oracle中更新~~存储过程~~ **物化视图**的计算成本是基于查询执行还是结果集？更具体地说，Oracle 存储查询结果的方式是否会大大增加刷新视图所需的时间？

当然，需要很长时间才能执行的查询以及非常大或非常小的结果集使得这不可能无处不在地回答。

问题更多的是关于视图如何实际存储结果集（在内存中，在磁盘上），所以我可以考虑重建物化视图的频率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:39:22.117

物化视图基本上是一个表格，结合了一种算法来更新它。

```
01:37:23 HR@sandbox> create materialized view mv_dual as select dummy from dual;

Materialized view created.

Elapsed: 00:00:00.52
01:37:56 HR@sandbox> select object_name, object_type from user_objects where object_name = 'MV_DUAL';

OBJECT_NAME     OBJECT_TYPE
--------------- -------------------
MV_DUAL         TABLE
MV_DUAL         MATERIALIZED VIEW

Elapsed: 00:00:00.01 
```

您还可以在预建表上创建物化视图。

如果我们谈论刷新 - 有两个选项：快速刷新和完全刷新。

完全刷新只是重新执行 MV 查询，而快速刷新执行增量更新。

[http://docs.oracle.com/cd/E16338_01/server.112/e10706/repmview.htm#i29858](http://docs.oracle.com/cd/E16338_01/server.112/e10706/repmview.htm#i29858)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:39:49.750

有两种类型的 mview

完全刷新 mview - 每次刷新都会重建整个 mview。类似于删除和插入（注意：如果您指定 atomic = F 或版本 < 9，它将被截断/插入追加）。

快速刷新 mview - oracle 将创建一个表来存储增量更改。刷新时，存储在边表中的更改将应用​​于 mview。

快速刷新在刷新时速度更快，但会减慢基表上的 dml 操作。

当您考虑您的刷新策略时，您应该考虑对基表应用了多少更改以及您需要多久刷新一次 mview。

# javascript - 用javascript在视频中显示信息

> ID：16220528
> 
> 赞同：0
> 
> 时间：2013-04-25T16:54:08.493
> 
> 标签：javascript

我用不同的按钮用 javascript 制作了一个视频播放器。现在我想向我的 javascript 添加一个对象，该对象将提供有关视频播放方式的信息。例如，如果它正在播放、暂停或以慢动作播放。

我的代码如下所示：

```
var doThings = function (n) { 'use strict';

    if (n === 1) {
        document.getElementById('video').play();
    }

    if (n === 2) {
        document.getElementById('video').pause();
    }
};
var volume = function (n) { 'use strict';

    if (n === 1) {
        document.getElementById('video').muted = true;
    }

    if (n === 2) {
        document.getElementById('video').muted = false;
    }
};
var fullscreen = function() { 'use strict'; if (video.requestFullscreen) { video.requestFullscreen();

    } else if (video.webkitRequestFullscreen) {
        video.webkitRequestFullscreen();
    }
};
var slowmotion = function (n) { 'use strict';

    if (n === 1) {
        document.getElementById('video').playbackRate = 0.5;
    }
};
var normalspeed = function(n) { 'use strict';

    if (n === 1) {
        document.getElementById('video').playbackRate = 1;
    }
}; 
```

我想添加一个对象，该对象将指示当前正在使用媒体播放器的哪个功能。我可以只使用 console.log() 但我希望将信息显示在正在播放电影的窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:14:18.950

HTML：

```
<div id="Display"></div> 
```

每个函数中的 Javascript：

```
document.getElementById("Display").innerHTML("Function Being Used"); 
```

使用 CSS 将元素放置在您想要的任何位置和样式，包括在视频顶部。不确定特定用例的布局，但您可以调整 z-index 和堆栈顺序以将 div 放置在与视频相关的任何位置。

可能无法在全屏模式下工作。

# ios - setFrame 不会做任何事情

> ID：16220531
> 
> 赞同：0
> 
> 时间：2013-04-25T16:54:19.147
> 
> 标签：ios, uiview, uiviewcontroller

我有一个应用程序不会在 -init 和 -viewWillLayoutSubviews 方法之外设置框架的问题。当一个人点击编辑按钮时应该发生什么是一个隐藏编辑器视图的动画。尽管如此，当我测试它时，什么都没有发生。问题不是来自动画方法，因为 -setFrame 方法因为它 - 不包含在块中 - 也不起作用。

这是代码：

```
-(id)init {

    if (self = [super init]) {

        editButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(editButtonTapped)];
        doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonTapped)];

        editor = [[UIView alloc] init];
        [editor setBackgroundColor:[UIColor yellowColor]];
        editor.clipsToBounds = YES;
        editorIsOpen = YES;        

        portraitRegularModeEditorRect = CGRectMake(15, 59, 738, 100);
        portraitClosedEditorEditorRect = CGRectMake(15, 59, 738, 0);

    }
    return self;

}

- (void)viewDidLoad {

    [super viewDidLoad];

    [[self view] addSubview:editor];
    [[self view] setBackgroundColor:[UIColor blueColor]];

}

-(void)viewDidAppear:(BOOL)animated {

    [self setForRegularMode];

}

-(void)viewWillLayoutSubviews {

    UIInterfaceOrientation io = [[UIApplication sharedApplication] statusBarOrientation];
    if (io == UIInterfaceOrientationPortrait || io == UIInterfaceOrientationPortraitUpsideDown) {

        //portrait
        [editor setFrame:portraitRegularModeEditorRect];

     } else {

        //landscape

     }

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(void)editButtonTapped {

    [self setForScenarioLinesEditingMode];

}

-(void)doneButtonTapped {

    [self setForRegularMode];

}

-(void)setForRegularMode {

    editingMode = CPRegularMode;    

    if (!editorIsOpen) {

        [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationCurveEaseOut animations:^(void){

            [editor setFrame:portraitRegularModeEditorRect];

        } completion:^(BOOL finished) {

            editorIsOpen = YES;

        }];

    }

    [[self navigationItem] setRightBarButtonItems:[[NSArray alloc] initWithObjects:editButton,nil]];

}

-(void)setForScenarioLinesEditingMode {

    editingMode = CPScenarioLinesEditingMode;

    if (editorIsOpen) {

        [UIView animateWithDuration:0.3 delay:0.0 options:UIViewAnimationCurveEaseOut animations:^(void){

            [editor setFrame:portraitClosedEditorEditorRect];

        } completion:^(BOOL finished) {

            editorIsOpen = NO;

        }];

    }

    [[self navigationItem] setRightBarButtonItems:[[NSArray alloc] initWithObjects:doneButton,nil]];

} 
```

如果有人可以提供帮助，请提前致谢；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:07:28.577

我认为您的问题在于，在`-(void)viewWillLayoutSubviews`您设置的方法中，假设您的视图的默认框架，如果您在视图上调用 setFrame 后尝试在其他方法中更改框架，`-(void)viewWillLayoutSubviews`也会调用并且视图的框架将是默认的。尝试从您的`-(void)viewWillLayoutSubviews`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:04:55.720

您的视图控制器是否设置在情节提要中，并且您是否使用自动布局（默认情况下启用？）如果是这样，setFrame 将不起作用，您需要在情节提要中创建出口后编辑约束。

或者，您可以在情节提要中关闭自动布局，如此处[所示](https://stackoverflow.com/questions/13201586/nsinvalidunarchiveoperationexception-could-not-instantiate-class-named-nslayout)。

# ssis - 如何在 Oledb 命令中引用 Look UP 列

> ID：16220536
> 
> 赞同：0
> 
> 时间：2013-04-25T16:54:30.447
> 
> 标签：ssis

我看看在哪里匹配我从右侧窗格中选择一列。此查找的输出是一个 oledb 命令。我需要在查询中引用该列。怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:07:37.227

我相信您有参考映射的来源，您只需要取回查找的值，是吗？

如果是这样，这就像在数据源中单击所需的所有列的复选框一样简单。这将反映在图表下方的表格中。正如您可能注意到*的那样*，虽然我在查找列中的值称为 BlankedKEY，但我将其重命名为 lkp_BlankedKey，以便如果您需要将检索到的键与源键进行比较，您可以使用它。

![查找编辑器](https://i.stack.imgur.com/GQqF5.png)

选中该框后，新列对您的 OLEDB 命令可用。

# javascript - 持久性 Cookie

> ID：16220538
> 
> 赞同：0
> 
> 时间：2013-04-25T16:54:34.037
> 
> 标签：javascript, cookies

`document.setbackground.bgcolor.value`可以证明可以工作并存储一个十六进制值（例如黑色的“000000”。当从更新值的实时表单中选择新的页面时，该脚本还可以用于更改页面背景的颜色。

我的问题是，虽然我的代码在我的浏览器中存储了一个 cookie，但当我关闭浏览器并重新打开时它不起作用。我希望背景从 cookie 中存储的任何内容开始。我的代码或浏览器设置有问题吗？

```
function setBackground () {
     if (document.setbackground.bgcolor.value != "none"){ 
          document.body.bgColor = "#" + document.setbackground.bgcolor.value;
          document.cookie = "bgColor=" + document.setbackground.bgcolor.value + 
               ";expires=Wednesday, 02-Mar-2020 12:00:00 GMT;";
     }
} 
```

此代码嵌入到 setPreference.js 文件中的以下 HTML 中：

```
<html>
<head>
    <script src="setPreference.js"></script>
</head>
<body bgcolor="#9999CC">
    <center>
    <form name="setbackground">
    Change background color?
    <select name="bgcolor" onchange="setBackground();" size="1">
        <option value="none">Select color</option>
        <option value="9999CC">Lavender</option>
        <option value="999966">Light Brown</option>
        <option value="66FFCC">Light Green</option>
        <option value="FFFFFF">White</option>    
    </select>
    </center>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:37:49.717

当用户从您那里选择一个项目时，`select`您会将 bgColor 设置为其值并创建一个 cookie。

**但是您还需要加载该 cookie 并设置 bgColor。**

您可以使用像这样简单的东西（将其附加到您的 js 中）：

```
// document.cookie - name1=value1; name2=value2; name3=value3

function GetCookie(what)
{
    var cookies = document.cookie.split(/; ?/g); // now we have array of name=value pairs
    for(var i in cookies)
    {
        var pair  = cookies.split("=", 1);
        var name  = decodeURIComponent(pair[0]);
        var value = decodeURIComponent(pair[1]);

        if (name == what)
            return value;
    }
}

window.onload = function ()
{
    var color = GetCookie("bgColor"); // note that in the cookie can be ANY value as it comes from the user. So some condition to validate input wouldnt be bad idea
    document.setbackground.bgcolor.value = color;
    setBackground();
} 
```

# html - 省略标签的兼容性

> ID：16220542
> 
> 赞同：0
> 
> 时间：2013-04-25T16:54:44.297
> 
> 标签：html, cross-browser

我阅读了有关使用省略某些标签的 HTML5 标准的信息。例如，`head`如果紧随其后的内容是一个元素，则可以删除标签。

我想知道是否有人知道是否存在与使用此相关的兼容性问题，例如这种用法是否会在旧浏览器中造成问题或无法在 W3C HTML 验证中验证？

# mysql - 有条件地向mysql表中添加一列

> ID：16220545
> 
> 赞同：1
> 
> 时间：2013-04-25T16:54:47.303
> 
> 标签：mysql, database-design, alter-table

我有一个项目，我希望能够在几个人的本地主机上管理同一数据库的多个实例。我希望每个开发人员都能够将他们的数据库重置回规范来源，无论他们的数据库进入什么状态。为此，我维护了一个标准的数据库文件。它使用以下方式保存模式`CREATE TABLE table_name IF NOT EXISTS {`

但是，我希望能够在项目进行时根据需要添加到起始表结构中。为此，我希望能够执行以下操作`ALTER TABLE table_name ADD COLUMN IF NOT EXISTS column_name`，但似乎不存在。我确实注意到互联网上浮动的存储过程解决了这个问题，但我想知道更简单的东西是否能够实现我的目标。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:00:28.187

用普通的 SQL 是不可能的。存储过程应该工作得最好：读取 information_schema 并检查该列是否存在。如果不是 - 执行 alter 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:07:38.217

一种选择是执行 ALTER 语句而不检查任何内容：

```
ALTER TABLE table_name ADD column_name VARCHAR(40); 
```

（更改`VARCHAR(40)`为您需要的任何内容）

如果该列不存在，则语句创建它。
如果该列已存在，则该语句不执行任何操作并返回错误。只需忽略错误并继续。

# javascript - 如何将时间长度添加到fadeIn();？

> ID：16220546
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:54:48.357
> 
> 标签：javascript, jquery, fadein, fade

使用 JQuery 淡入（）；我想为它添加一个时间长度。我目前正在以这种方式使用它：

```
 var transition = 'slow';
    var target1 = $('.div1');
    target1.delay(1500).fadeIn(); 
```

它工作正常，但我想让 div 开始缓慢显示，所以在加载 div 后应该开始缓慢显示。如何使用下面的内容添加时间？我用谷歌搜索，但找不到与此相关的任何内容。也许我应该看看别的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T16:55:51.550

请参阅 jquery 文档 - [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

```
.fadeIn( [duration ] [, complete ] ) 
```

你需要这个-

```
 target1.fadeIn(1500); 
```

# git - 在 git reset --hard HEAD 之后，git pull 仍然说： Untracked working tree file ... will be overwritten by merge

> ID：16220547
> 
> 赞同：6
> 
> 时间：2013-04-25T16:54:55.967
> 
> 标签：git, version-control

之后`git reset --hard HEAD`，`git pull`说：未跟踪的工作树文件...将被合并覆盖

有任何想法吗？

我确实尝试过`git fetch`并且`git fetch --all`已经...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-06T12:40:43.883

如果您只想将本地更新为原始状态，则可以使用[此处](https://stackoverflow.com/questions/10762859/brew-update-the-following-untracked-working-tree-files-would-be-overwritten-by)描述的解决方案：

```
$ git fetch origin

$ git reset --hard origin/master 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T17:06:55.887

您有未跟踪的文件。简单地

```
git stash -u 
```

将它们存放在存储库中并获得一个干净的工作树（`-u`指定您希望将修改与新文件一起存储）。在你拉，合并，变基或其他之后，你可以

```
git stash pop 
```

让他们回来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T17:19:41.403

您需要删除未跟踪的文件。如果要删除所有未跟踪的文件，请使用`git clean -fd`. 或者，如果您不想删除它们，请使用`git stash -u`将其保持在存储状态。要从存储状态恢复，请使用`git stash pop`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T17:03:44.597

您仍然有未跟踪的文件（联合国`git add`文件）。git reset 不会删除这些。

如果你想保留它们，你可以这样做：

```
git add -A
git stash
git pull
git stash apply 
```

`stash`就像一个商店，您可以在其中临时添加文件而无需提交它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-31T19:09:03.257

在我的存储库中发生这种情况的原因是另一个开发人员从主存储库中删除了目录 / 并将其移动到子模块中。这个特定的存储库已经很长时间没有使用了，所以另一个开发人员在我上次使用该存储库到今天发生问题的时间之间将该目录移动到了一个子模块。

在这种情况下，只需删除有问题的未跟踪文件即可。

# php - 在我的表单中添加 reCaptcha

> ID：16220549
> 
> 赞同：0
> 
> 时间：2013-04-25T16:54:56.793
> 
> 标签：php, html, captcha

我正在尝试在我的页面（HTML 和 PHP）中实现 reCaptcha，但由于某种原因，当我输入文本时，它不起作用。我已经多次验证了私钥和公钥，并且可以确认它们放置正确。我得到的错误如下所示：`"The reCAPTCHA wasn't entered correctly. Go back and try it again.(reCAPTCHA said: "")"`如您所见，错误方法不返回任何内容。这是代码：

表格：

```
<form action="ticket.php" method="post">
    <table>
        <tr>
            <td>Full Name:</td> 
            <td><input type="text" name="name" value="<?=(!empty($_POST['name'])) ? $_POST['name'] : ''?>" /></td>
        </tr>
        <tr>
            <td>E-mail:</td> 
            <td><input type="text" name="email" value="<?=(!empty($_POST['email'])) ? $_POST['email'] : ''?>" /></td>
        </tr>
        <tr>
            <td>Topic:</td>
            <td><input type="text" name="topic" value="<?=(!empty($_POST['topic'])) ? $_POST['topic'] : ''?>" /></td>
        </tr>
        <tr></tr>
        <tr>
            <td>Question:</td>
        </tr>
        <tr>
            <td colspan="2"><textarea cols="30" rows="5" name="question" "<?=(!empty($_POST['question'])) ? $_POST['question'] : ''?>"></textarea></td>
        </tr>
        <tr>
            <td colspan="2">
                <?php
                  require_once('recaptchalib.php');
                  $publickey = "public key here";
                  echo recaptcha_get_html($publickey);
                ?>
            </td>
        </tr>
        <br>
        <tr>
            <td colspan="2" style="text-align:center;"><input type="submit" name="submit" value="Submit Question" /></td>
        </tr>
    </table>
</form> 
```

PHP：

```
<html>
    <head>
        <title></title>
        <link href='http://fonts.googleapis.com/css?family=Coda|Oranienbaum|Amarante' rel='stylesheet' type='text/css'>
        <link href="css/style.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="wrapper">
            <h1><a>Contact Us</a></h1>
        </div>
        <div class="sidebar">
            <div class="sBlock">
                <h2>Sidebar</h2>
                <ul>
                    <li><a href="index.php">Home</a></li>
                    <li><a href="about.php">About Us</a></li>
                    <li><a href="tips.php">Tips</a></li>
                    <li><a href="services.php">Services</a></li>
                    <li><a href="contact.php">Contact Us</a></li>
                </ul>
            </div>
        </div>
        <div class="contentBody">
            <div class="post">
                <?
                    require_once('recaptchalib.php');
                    $privatekey = "private key here";
                    $resp = recaptcha_check_answer($privatekey, $_SERVER["REMOTE_ADDR"], $_POST["recaptcha_challenge_field"], $_POST["recaptcha_response_field"]);

                    $elements = array('name', 'email', 'topic', 'question');
                    $valid = true;
                    $show = true;
                    if(!empty($_POST['submit'])) {
                        foreach ($elements as $e) {
                            if (empty($_POST[$e])) {
                                echo '<div style="color:red;"> The field ' . $e . ' is required.</div><br />';
                                $valid = false;
                            }
                        }
                        if (!$resp->isvalid) {
                            echo '<div style="color:red;"> "The reCAPTCHA wasn\'t entered correctly. Go back and try it again.(reCAPTCHA said: "' . $resp->error . '")"</div><br />';
                            $valid = false;
                        }

                        if ($valid) {
                            echo '<div style="color:red;"> S\'all good.</div><br />';
                        }
                    }
                    include 'ticket_form.php';
                ?>
            </div>
        </div>
        <div class="clearfloat"></div>
        <footer>
            <p class="copyright">
                Copyright &copy; <a href="#"></a>
            </p>
        </footer>
    </body>
</html> 
```

# android - 带有BitmapDrawable的Android动画Drawable错误

> ID：16220550
> 
> 赞同：1
> 
> 时间：2013-04-25T16:54:58.607
> 
> 标签：android, drawable, android-animation, animationdrawable

我现在正在编写一个程序来在 android 应用程序中使用 AnimationDraawable 播放图像列表。图像列表是从服务器下载的。但是我在我的程序中遇到了无法将drawable添加到AnimationDrawable的错误。谁能帮我？

这是我的 logCat 捕获：

```
04-26 00:45:07.260: E/AndroidRuntime(17422): FATAL EXCEPTION: AsyncTask #2
04-26 00:45:07.260: E/AndroidRuntime(17422): java.lang.RuntimeException: An error occured while executing doInBackground()
04-26 00:45:07.260: E/AndroidRuntime(17422):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.lang.Thread.run(Thread.java:856)
04-26 00:45:07.260: E/AndroidRuntime(17422): Caused by: java.lang.ClassCastException: android.graphics.drawable.BitmapDrawable cannot be cast to android.graphics.drawable.AnimationDrawable
04-26 00:45:07.260: E/AndroidRuntime(17422):    at com.tlab.shopping.Itemview$itemanimation.doInBackground(Itemview.java:1036)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at com.tlab.shopping.Itemview$itemanimation.doInBackground(Itemview.java:1)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-26 00:45:07.260: E/AndroidRuntime(17422):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-26 00:45:07.260: E/AndroidRuntime(17422):    ... 5 more 
```

这是我的一段代码：

```
public static class itemanimation extends AsyncTask<String, Void, AnimationDrawable>{
    public Itemview myActivity;
    public  itemanimation(Itemview a)
    {
        myActivity = a;
    }

protected void onPreExecute(){
 //text.setText("load");
}

protected AnimationDrawable doInBackground(String... x){
Bitmap bmImg = null;
URL myFileUrl =null; 
String code = x[0];
String cur_url = null;
ImageView im = (ImageView) myActivity.findViewById(R.id.imageView1);

AnimationDrawable anim = null;          
Object ob = im.getBackground();          
anim = (AnimationDrawable) ob;  

for (int frameIndex = 0; frameIndex < 4; frameIndex++) {

    cur_url = "http://137.189.97.18/image/" + code + frameIndex +".jpg";
    try {   
    myFileUrl= new URL(cur_url);
    } catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
    try {
    HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
    conn.setDoInput(true);
    conn.connect();
    int length = conn.getContentLength();
    int[] bitmapData =new int[length];
    byte[] bitmapData2 =new byte[length];
    InputStream is = conn.getInputStream();

    bmImg = BitmapFactory.decodeStream(is);
    Bitmap bmp = Bitmap.createScaledBitmap(bmImg, 150, 150,true);

    Drawable bmpImgDrawable = Drawable.createFromStream(is, code + frameIndex + ".jpg");
    anim.addFrame(bmpImgDrawable, 250);

    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }

}
anim.setOneShot(false);
return anim;

}

protected void onProgressUpdate(){

}

protected void onPostExecute(AnimationDrawable z){
ImageView image = (ImageView) myActivity.findViewById(R.id.imageView1);

image.setBackgroundColor(00000000);
//image.setImageBitmap(bmp);
image.setBackgroundDrawable(z);
z.stop();          
z.start(); 
}
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-06T06:11:21.683

因为它不是 AnimationDrawable。它只是一个图像，所以它是一个 BitmapDrawable。

# html - 使用 CSS 调整带有背景图像的 DIV 大小

> ID：16220551
> 
> 赞同：0
> 
> 时间：2013-04-25T16:55:00.183
> 
> 标签：html, css

我不是一个经常问的人，但我似乎无法使用 CSS/CSS3 完成这项工作。

请注意，即使使用不太受支持的 CSS3 样式（例如调整大小），我也会很高兴。

它的[jsFiddle](http://jsfiddle.net/CPNbS/)。

当前不可调整大小的代码：

HTML：

```
<div id="boxes">
  <a id="about1" class="aboutbox" href="/property-for-sale">
  &#160;</a>
  <a id="about2" class="aboutbox" href="/why-cyprus">&#160;</a>
  <a id="about3" class="aboutbox" href="/why-zantis">&#160;</a>
  <span class="stretch">&#160;</span>
</div> 
```

CSS：

```
#boxes {
    padding: 70px 0 70px 0;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}
.aboutbox {
    padding: 0;
    margin: 0;
    display: inline-block;
    *display: inline;
    zoom: 1;
    width: 320px;
    height: 225px;
    vertical-align: top;
    text-align: left;
    background-size: auto auto;
}
#about1 {
    background:#000 url('http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT.jpg') no-repeat center center;
}
#about2 {
    background:#000 url('http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT.jpg') no-repeat center center;
}
#about3 {
    background:#000 url('http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT.jpg') no-repeat center center;
}
#about1:hover {
    background:#000 url('http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT_a.jpg') no-repeat center center;
}
#about2:hover {
    background:#000 url('http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT_a.jpg') no-repeat center center;
}
#about3:hover {
    background:#000 url('http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT_a.jpg') no-repeat center center;
} 
```

如果您调整 html 面板的大小，您会看到它们按预期浮动。我正在使用一种通用方法将它们沿父 div 平均分配。我还使用 CSS 来创建具有悬停效果的图像按钮（不要询问图形的性质..）。

我想让这些在调整 html 面板大小时相应地调整大小；即让实际按钮按比例缩小并保持在一行中。

我有一个使用 jQuery 的有效解决方案，但是没有它就花了我的时间得到它，却一无所获。有任何想法吗？

蒂亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T18:35:23.633

## 纵横比

这里的主要问题是保持图像的相对尺寸（纵横比）。不使用 JavaScript 或 jQuery 的几种潜在方法如下：

1.  使用前景图像（`img`标签）。
2.  用于[`calc()`](http://www.w3.org/TR/css3-values/#calc)使图像包装的高度为其宽度的固定百分比。

我运气不太好`calc()`。我得到的最接近的是试图使高度成为视口宽度的固定百分比（使用`vw`单位）。这似乎不是很有希望。我不能完全排除可能使用的解决方案`calc()`，但到目前为止，唯一明显的用于保持纵横比的 CSS 解决方案需要使用前景图像。

[更新的演示](http://jsfiddle.net/Matt_Coughlin/868XM/8/)

## 前景图像的悬停状态

使用前景图像实现悬停效果相当简单。将一对图像添加到每个图像包装器，并将`:hover`伪类应用于包装器以根据需要打开或关闭每个图像。

```
<a class="aboutbox" ...>
    <img class="off" src="..." alt=""/>
    <img class="on"  src="..." alt=""/>
</a>
...
.aboutbox:hover img.off { display: none; }
.aboutbox       img.on  { display: none; }
.aboutbox:hover img.on  { display: inline-block; } 
```

## 对齐图像

证明图像最棘手的部分是图像包装器（在 HTML 源代码中）之间需要有一些空格，以便证明有机会工作，原因与句子中的单词之间需要有空格的原因相同它们（否则，它们将被视为一个单词）。

但是`inline-block`HTML 源代码中元素之间的空白会导致在元素之间添加 3-4px 的水平间距（没有可用的 CSS 解决方案来避免它，这是真正跨浏览器和安全的）。额外的空间，虽然是证明工作所必需的，但在视觉上很可能是不需要的，并且在某些情况下可能会阻止所有图像适合同一行。

这是一个带有粗略解决方案的[初始演示](http://jsfiddle.net/Matt_Coughlin/Y7hzR/3/)：将每个图像的宽度限制为 31%，以便为图像包装器之间的空白留出足够的空间（在大多数屏幕尺寸上）。

对齐图像的另一个问题是，与文本一样，对齐图像仅在内容跨越至少 2 行时才有效。一种解决方法是`span`在内容的末尾添加一个带有`display:inline-block`和的标签`width:90%`。[最初](http://jsfiddle.net/Matt_Coughlin/Y7hzR/3/)的演示演示了这一点。

## @media 查询

值得注意的是，仅当屏幕足够宽以允许图像之间有额外空间时才需要对齐。`@media`查询可用于仅在大屏幕上应用理由。在小屏幕上，图像包装器可以浮动，这样它们之间就没有额外的空间。

[使用@media 查询更新了演示](http://jsfiddle.net/Matt_Coughlin/868XM/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T02:23:08.097

一种解决方案是用实际图像替换背景图像。并使用 css 来控制显示什么图像，并根据包含的元素调整大小。因此，您将每个链接包装在一个 div 中，该 div 会根据您的`boxes`容器重新调整大小。使用 css，您可以使用`content:`选择器设置图像 url。

[http://jsfiddle.net/CPNbS/6/](http://jsfiddle.net/CPNbS/6/)

您生成的 html 看起来像：

```
<div id="boxes">
    <div class="link" id="about1">
        <a class="aboutbox" href="/property-for-sale"><img /></a>
    </div>
    <div class="link" id="about2">
        <a class="aboutbox" href="/why-cyprus"><img /></a>
    </div>
    <div class="link" id="about3">
        <a class="aboutbox" href="/why-zantis"><img /></a>
    </div>
</div> 
```

和CSS：

```
.link{width:30%;height:100%;border:1px solid green;display: inline-block;
    *display: inline;
    zoom: 1;}

.link a{padding: 0;
    margin: 0;
    display:block;
    width: 100%;
    height:100%;
    vertical-align: top;
    text-align: left;
    background-size: auto auto;}

.link a img{max-width:100%;}

#about1 a img{
    content:url("http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT.jpg");
}
#about2 a img{
    content:url("http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT.jpg");
}
#about3 a img{
    content:url("http://zantisgroup.com.cy/templates/oneweb/images/SEA_FRONT.jpg");
}
#about1:hover a img,#about2:hover a img,#about3:hover a img{
content:url("http://blogs.mathworks.com/pick/files/zebrainpastelfield.png"); 
```

}

您还可以通过包含媒体查询来使用响应式设计技术。但这更多的是针对不同的设备而不是重新调整大小，因此看起来并不“流畅”。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T17:52:07.917

要在设置背景图像时执行此操作，您必须摆脱每个项目的宽度设置，并使用 background-size: 100% 100%; 调整背景图像的大小；要保持 .aboutboxes 的高宽比例，请在此处使用固有比率方法和基于百分比的 padding-bottom。更多信息：http: [//alistapart.com/article/creating-intrinsic-ratios-for-video](http://alistapart.com/article/creating-intrinsic-ratios-for-video)

```
.aboutbox {
    position: relative;
    padding-bottom: 70.3125%;
    display: block;
    width: auto;
    height: 0;
    background-size: 100% 100% !important;
} 
```

如果您愿意，可以在包装器上包含一个最大宽度或填充，以限制它们伸展的距离。

在这里更新了你的小提琴：http: [//jsfiddle.net/carasin/s4pUe/11/](http://jsfiddle.net/carasin/s4pUe/11/)

请注意一些有限的 IE 对背景大小的支持： http: [//caniuse.com/#feat=background-img-opts](http://caniuse.com/#feat=background-img-opts)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T18:37:37.910

```
#boxes {
 white-space: nowrap;
}
boxes a{
 display:inline-block;
 width: 33%;
 background-size: cover;  
} 
```

但我宁愿使用 img 标签见[http://jsfiddle.net/Vicky_007/GZMvT/14/](http://jsfiddle.net/Vicky_007/GZMvT/14/)

你也可以模拟表：

```
#boxes {
  display: table;
  width: 100%;
  table-layout:fixed;
}
#boxes a{
  display:table-cell;
  background-size: cover;
} 
```

# sql-server - mssql中不同的合并选择结果保持每个结果的顺序

> ID：16220554
> 
> 赞同：0
> 
> 时间：2013-04-25T16:55:06.040
> 
> 标签：sql-server

我的网站是一种字典。搜索关键字时，我想同时查看“单词”和“含义”列并显示与单词或含义匹配的所有内容。

```
select count(id) words where word like @keyword or meaning like @keyword 
select * from words where word like @keyword or meaning like @keyword order by word 
```

但我想先显示匹配的单词，然后显示匹配的含义。顺序不正确

当我将它们分开时：

```
select count(id) words where word like @keyword
select * from words where word like @keyword order by word
select count(id) words where meaning like @keyword 
select * from words where meaning like @keyword  order by word 
```

这样就有重复（当关键字匹配单词和含义时）

当我再次联合它们时，顺序将不正确

如何才能做到这一点？我需要不同匹配结果的计数+不同匹配结果本身，但首先显示匹配词，然后显示匹配含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:18:13.370

在 ORDER BY 子句中使用 case 语句来区分它何时与单词匹配：

```
select  * 
from    words 
where   word like @keyword or meaning like @keyword 
order by 
        case when word like @keyword then 0 else 1 end
        , word 
```

# angularjs - 数据保存和观察服务以更新 AngularJS 中的视图

> ID：16220556
> 
> 赞同：0
> 
> 时间：2013-04-25T16:55:15.267
> 
> 标签：angularjs, watch

我在客户端使用 AngularJS 来显示一些将通过 NodeJS-Server 推送的信息。数据将保存在服务工厂中。

我想通过角度观察功能观察这些数据。

我遇到的问题如下。手表只在工厂运行一次并停止。

如果服务器推送更改的数据，它不会更新视图？

这是一些代码片段。

```
.factory('clientStorage', ['socket', function (socket){
    var that = {};

    //basis data
    that.basisData = {};
    that.getBasisData = function () {
        socket.on('sendBasis', function (basis) {
            console.log('ich hoffe doch');
            that.basisData = basis;
            console.log(that.basisData);
        });
        console.log(that.basisData);
        return that.basisData;
        };
    return that;
}]); 
```

我不知道为什么会这样？

那里有人可以帮忙吗？

问候

亨里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:24:56.487

在你的控制器中试试这个：

```
$scope.$watch( function() { return clientStorage.basisData; }, function(clientData) {
    $scope.data = clientData;
}); 
```

`$scope.data`您要更新的数据在哪里。

# php - 如何模拟来自 authorize.net 的扩展处理响应？

> ID：16220558
> 
> 赞同：1
> 
> 时间：2013-04-25T16:55:24.727
> 
> 标签：php, symfony, payment-gateway, credit-card, authorize.net

我们有一个`Authorize.net`用作支付网关的电子商务网站。

我们最近遇到了人们提交付款确认，然后稍后再次单击提交的问题。这会导致双重产品情况和/或双重支付。

**需要考虑的一些事项：**

*   付款确认页面是在用户提交付款之前加载的 PRG（Post-Redirect-Get）的结果
*   我们有功能可以实际作用于请求的每个部分（请参阅下面的描述）
*   这种情况仅适用于 Authorize.net 交易花费比正常时间更长的情况。
*   这还*没有*投入生产，我们只是在寻找一种方法来测试这个新功能以防止这种行为。

**预防片**

我们有一个遵循以下流程的多步骤结帐表格：

*   产品选择
*   付款条目
*   确认订单/提交付款
*   收据

该过程的每个步骤都会调用一个服务来检查用户是否有一个当前的“订单”，该订单具有以下几种状态之一`started`：`processing`或`complete`。

如果订单是`started`，它会将他们重定向到结帐流程的第一页。如果订单是`processing`，它会将它们重定向到一个占位符页面，该页面每 2 秒执行一次 ajax 请求以检查订单的状态。订单完成后，他们将被重定向到`receipt`页面。如果订单是`complete`，它们会`receipt`立即被重定向到页面。

**问题**

由于此功能实际上仅在处理事务需要更长的时间时才有效，因此它给我们带来了测试问题 - 出于以下几个原因：

1.  我们的开发服务器很慢，而且很可能`Authorize.net`会在应用程序渲染页面之前响应我们的请求。
2.  如果我们使用 PHP 函数来模拟响应`sleep()`，它会阻塞线程并且没有任何东西运行，我们与 [1] 处于同一条船上。

**我们希望什么**

我不知道是否有办法`Authorize.net`通过某些参数以较慢的方式响应请求，或者是否有另一种方法来实现这一点。我欢迎任何和所有的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:53:32.613

您不应该为此直接针对 Authnet 进行测试。制作您自己的 Authnet “服务器”并让它延迟对您的响应。对于我为我的 Authnet 库编写的单元测试，我创建了自己的假服务器，它发回我需要测试的适当响应。您可以执行相同的操作，让“服务器”等待您需要的时间，然后再发回响应。响应不一定是真实的，您可以测试延迟。

# javascript - HTML5 Canvas 中的自动换行

> ID：16220562
> 
> 赞同：11
> 
> 时间：2013-04-25T16:55:41.793
> 
> 标签：javascript, html, html5-canvas

我正在尝试在 HTML5 Canvas 中自动换行，但我很挣扎！

我创建了一个 TextTyper 对象，该对象将管理多行自动换行文本。

我遇到的问题是我得到了一个无限循环！

我需要一个使用纯 JavaScript（无 jQuery）和 HTML5 Canvas 的解决方案。

我制作了一个 JSFiddle 来帮助解决我的问题并测试不同的策略：http: [//jsfiddle.net/Jamesking56/eECar/](http://jsfiddle.net/Jamesking56/eECar/)

到目前为止，这是我的 TextTyper 对象：

```
function TextTyper(text, x, y, font, colour) 
{
    this.text = text || "";
    this.x = x || 20;
    this.y = y || 20;
    this.font = font || false;
    this.colour = colour || [0, 0, 0];
    this.lines = 0;

    // Calculate and draw the lines
    this.draw = function () 
    {
        canvas.width = canvas.width;

        var maxWidth = (canvas.width - 40);

        var words = this.text.split(' ');
        var line = [words[0]]; //begin with a single word

        for (var i = 1; i < words.length; i++) 
        {
            while (ctx.measureText(line.join(' ')) < maxWidth && i < words.length - 1) 
            {
                line.push(words[i++]);
            }

            if (i < words.length - 1) 
            { 
                //Loop ended because line became too wide
                line.pop(); //Remove last word
                i--; //Take one step back
            }
            this.lines++;
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:43:27.930

好吧，这就是我用于我的 HTML5 游戏的内容：http: [//jsfiddle.net/eECar/16/](http://jsfiddle.net/eECar/16/)

```
while ( text.length ) {
    for( i=text.length; ctx.measureText(text.substr(0,i)).width > max_width; i-- );

    result = text.substr(0,i);

    if ( i !== text.length )
        for( j=0; result.indexOf(" ",j) !== -1; j=result.indexOf(" ",j)+1 );

    lines.push( result.substr(0, j|| result.length) );
    width = Math.max( width, ctx.measureText(lines[ lines.length-1 ]).width );
    text  = text.substr( lines[ lines.length-1 ].length, text.length );
} 
```

希望它有所帮助。

# ios - iOS (ImageIO/etc.) 是否支持渐进式 JPEG 的渲染？

> ID：16220567
> 
> 赞同：3
> 
> 时间：2013-04-25T16:55:55.140
> 
> 标签：ios, core-graphics, javax.imageio

我知道 ImageIO 支持图像的增量渲染，但我不确定它是否支持渐进式 JPEG 的渲染，具体来说，我希望能够在下载并最终到达时快速渲染低保真图像在清晰的图像。

我已经尝试过使用 ImageIO 增量渲染的示例项目 - 但是当指向渐进式 JPEG 文件时，它们在下载所有数据之前不会显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-20T13:13:20.153

现在在 libjpeg-turbo 之上有一个小型开源库，可以轻松解码和显示渐进式 JPEG：

```
let imageView = CCBufferedImageView(frame: ...)
if let url = NSURL(string: "http://example.com/yolo.jpg") {
    imageView.load(url)
} 
```

见[https://github.com/contentful-labs/Concorde](https://github.com/contentful-labs/Concorde)

# java - 我可以在 WebAPP lib 目录中有一个 JPA 项目 Jar 吗？

> ID：16220568
> 
> 赞同：0
> 
> 时间：2013-04-25T16:56:01.027
> 
> 标签：java, jpa, eclipselink

我想为我将创建的两个网站项目创建一个通用的 JPA 项目。如果我使用从 jpa 项目中导出的 jar 作为 web1 和 web2 中的库。我还能拥有 JPA 功能吗？

```
Eclipse Workspace
|_JPA Project
|_Web1 Project
|__WEB-INF
|___lib
|____JPA.jar
|_Web2 Project
|__WEB-INF
|___lib
|____JPA.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:19:45.833

只要您的 JPA 项目的 META-INF 文件夹中有 persistence.xml 文件，它应该可以正常工作

# java - 使用计划任务时未找到文件错误

> ID：16220569
> 
> 赞同：1
> 
> 时间：2013-04-25T16:56:06.123
> 
> 标签：java, jar, cmd, windows-server-2008, scheduled-tasks

我正在尝试从计划任务（Windows 2008 Server）运行一个 .jar 文件，但我收到了一个找不到文件的异常。我的程序搜索 .xls 文件，将其转换为 .xlsx 文件，提取数据，删除 .xlsx 文件，并将信息上传到我们的数据库。

我尝试过的事情：

*   直接在命令提示符下运行程序——成功

*   在 Cmd Prompt 中使用 dir 搜索文件 - 成功

*   将 .xls 文件放在桌面上并运行计划任务 - 成功

*   FileNotFound 异常以正确的 .xls 文件路径引发错误

![错误](https://i.imgur.com/teMrfJk.png) 可能的问题：是否有任何管理员权限不允许我从计划任务访问文件？为什么 .jar 文件可以在 Cmd 提示符下工作，而不是计划任务？谢谢大家帮助。如果有帮助，愿意上传更多信息。

![命令提示符](https://i.stack.imgur.com/mdaj6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T18:09:36.200

弄清楚了！当我在路径中使用 T:\ 时，我正在引用映射驱动器。我的计划任务是在我未登录时运行的。当然 T:\ 不会被识别。我真正需要使用的是 UNC 路径！要查找映射驱动器的实际路径，请在 cmd 提示符中输入“net use”。

这帮助了我海洋！ [Windows 7 计划任务“运行”但不执行任何操作](https://stackoverflow.com/questions/16069875/windows-7-scheduled-task-runs-but-doesnt-do-anything)

# ios - 旋转 UIButton

> ID：16220571
> 
> 赞同：3
> 
> 时间：2013-04-25T16:56:14.997
> 
> 标签：ios, objective-c, uibutton

我一直在尝试使用以下方法旋转按钮：

```
-(IBAction)rotate:(id)sender{
    CGPoint pencilCenter = pencil.center;
    [pencil setCenter:pencilCenter];
    CGFloat floater = 1.0;
    [UIView animateWithDuration:0.7 animations:^(void){
        [pencil setTransform:CGAffineTransformMakeRotation(floater)];
    }];
    [UIView animateWithDuration:0.7 animations:^(void){
        [pencil setTransform:CGAffineTransformMakeRotation(floater)];
    }];
} 
```

这应该使按钮进行某种“摇动”，然后它应该回到原来的位置 - 但它所做的只是改变按钮的位置，将其移动到一侧，然后在另一次运行该方法时按钮*根本*没有反应。

我的代码有什么问题？

谢谢！

编辑 2：我的问题是 - 我如何制作一个按钮来做一点摇晃/摆动，例如编辑 sptingboard 时的摆动应用程序模式。

使用此代码让我向左旋转，从左到右然后从右到左平滑动画，然后旋转到原始位置。现在，我希望它不仅仅是旋转，而是通过动画来完成，比如摆动。

```
[UIView animateWithDuration:0.25
                      delay:0.0
                    options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationCurveLinear | UIViewAnimationOptionAutoreverse)
                 animations:^ {
                     pencil.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(30));
                     pencil.transform = CGAffineTransformIdentity;
                 }
                 completion:^(BOOL finished){
                 }
 ]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-27T12:53:05.283

导入“QuartzCore/QuartzCore.h”并试试这个，

```
CABasicAnimation *fullRotation;
fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
fullRotation.delegate = self;
fullRotation.fromValue = [NSNumber numberWithFloat:0];
fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
fullRotation.duration = 1.7;
fullRotation.repeatCount = 2;
[btnTemp.layer addAnimation:fullRotation forKey:@"360"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:23:53.830

尝试使用`CGAffineTransformRotate`而不是`CGAffineTransformMakeRotation`. 您可以在所有调用中使用 `CGAffineTransformIdentity1 作为第一个参数，因此根据第二个参数的最终变换将应用于框架的原始形状（？）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-01T14:47:31.267

虽然它没有完美地回答这个问题，但 Shardul 的回答非常适合旋转按钮（2 个完整旋转）。所以在这里，转换为**Swift 3**：

```
let fullRotation = CABasicAnimation(keyPath: "transform.rotation")
fullRotation.delegate = self
fullRotation.fromValue = NSNumber(floatLiteral: 0)
fullRotation.toValue = NSNumber(floatLiteral: Double(CGFloat.pi * 2))
fullRotation.duration = 0.5
fullRotation.repeatCount = 2
button.layer.add(fullRotation, forKey: "360") 
```

您将需要导入 QuartzCore：

```
import QuartzCore 
```

并且您的 ViewController 需要符合 CAAnimationDelegate：

```
class ViewController: UIViewController, CAAnimationDelegate {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:44:45.040

好吧，[文档](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)说：“......指定的动画立即在另一个线程上启动......”。现在，所有 UIKit 代码都不是线程安全的。因此，如果改为从完成块（在单独的线程中运行）调用您的 UI 设置器（setTransform，setCenter）以使用`performSelectorOnMainThread:withObject:`.

# python - Google Adwords API 身份验证问题

> ID：16220574
> 
> 赞同：2
> 
> 时间：2013-04-25T16:56:38.270
> 
> 标签：python, google-ads-api

刚开始使用 Adwords API，由于某种原因，我似乎根本无法连接。

下面的代码直接来自教程会引发错误：

```
Traceback (most recent call last):
  File "<pyshell#12>", line 1, in <module>
    client = AdWordsClient(path=os.path.join('Users', 'ravinthambapillai', 'Google Drive', 'client_secrets.json'))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/adspygoogle/adwords/AdWordsClient.py", line 151, in __init__
    self._headers = self.__LoadAuthCredentials()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/adspygoogle/adwords/AdWordsClient.py", line 223, in __LoadAuthCredentials
    return super(AdWordsClient, self)._LoadAuthCredentials()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/adspygoogle/common/Client.py", line 94, in _LoadAuthCredentials
    raise ValidationError(msg)
**ValidationError: Authentication data is missing.**

from adspygoogle.adwords.AdWordsClient import AdWordsClient
from adspygoogle.common import Utils
client = AdWordsClient(path=os.path.join('Users', 'this-user', 'this-folder', 'client_secrets.json')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T09:59:02.340

好像有两个问题。首先，尝试删除最后一个路径元素，据我记得，该`path`参数需要一个包含身份验证泡菜、日志等的目录。这种方法要求您已经有一个有效的`auth_token.pkl`.

其次，您似乎正在使用 OAuth2 进行身份验证（我猜是`client_secrets.json`文件）。为此，您需要使用该库并在参数中`oauth2client`提供一个 oauth2credentials 实例。`headers``AdWordsClient`

以下直接来自`examples/adspygoogle/adwords/v201302/misc/use_oauth2.py`客户端分发中的文件，应该让您了解它是如何工作的：

```
# We're using the oauth2client library:
# http://code.google.com/p/google-api-python-client/downloads/list
flow = OAuth2WebServerFlow(
  client_id=oauth2_client_id,
  client_secret=oauth2_client_secret,
  # Scope is the server address with '/api/adwords' appended.
  scope='https://adwords.google.com/api/adwords',
  user_agent='oauth2 code example')

# Get the authorization URL to direct the user to.
authorize_url = flow.step1_get_authorize_url()

print ('Log in to your AdWords account and open the following URL: \n%s\n' %
     authorize_url)
print 'After approving the token enter the verification code (if specified).'
code = raw_input('Code: ').strip()

credential = None
try:
credential = flow.step2_exchange(code)
except FlowExchangeError, e:
sys.exit('Authentication has failed: %s' % e)

# Create the AdWordsUser and set the OAuth2 credentials.
client = AdWordsClient(headers={
  'developerToken': '%s++USD' % email,
  'clientCustomerId': client_customer_id,
  'userAgent': 'OAuth2 Example',
  'oauth2credentials': credential
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:07:42.813

我对`AdWordsClient`api不熟悉，但你确定你的路径是正确的吗？

你的电流`join`产生一个相对路径，你需要一个绝对路径吗？

```
>>> import os
>>> os.path.join('Users', 'this-user')
'Users/this-user' 
```

对于测试，您可以硬编码绝对路径以确保它不是路径问题

我还要确保它`'client_secrets.json`存在，并且执行 python 的用户可以读取它

# hadoop - Hadoop。重启地图

> ID：16220575
> 
> 赞同：1
> 
> 时间：2013-04-25T16:56:39.507
> 
> 标签：hadoop

经过 36 小时的工作 Hadoop 1.0.3 说：

```
INFO mapred.JobClient:  map 42% reduce 0%
     mapred.JobClient: Job Failed: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. 
     java.io.IOException: Job failed!
at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265) 
```

并停了下来。

是否可以不从一开始就重新启动 Hadoop 作业（地图 0% 减少 0%）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:15:35.393

似乎没有重新启动失败作业的好方法。要记住几件事：

1.  看起来像您在 mapred 配置中的 [mapreduce.map.maxattempts=1]，默认值通常为 4

    ```
    mapred.JobClient: Job Failed: # of failed Map Tasks 
    exceeded allowed limit. FailedCount: 1. 
    ```

2.  您通常想了解它失败的原因。（不确定您是否发现了问题）

它可能由于虚假原因而失败，您可以通过提供[故障陷阱](http://docs.cascading.org/cascading/2.1/userguide/html/ch07s03.html)将此异常实现到您的 mapreduce 程序中。您可以使用 Hadoop API 实现相同的概念。

在此处查看此答案：[https ://stackoverflow.com/a/9742235/1515370](https://stackoverflow.com/a/9742235/1515370)

# actionscript-3 - 使用 Flash 突围：我需要帮助来改善我的 Brick n Ball 碰撞

> ID：16220576
> 
> 赞同：0
> 
> 时间：2013-04-25T16:56:47.597
> 
> 标签：actionscript-3, flash, collision, breakout

我已经被这个问题困扰了很长时间，我已经搜索了很多东西并尝试了一些东西，但没有任何效果。有些解释对我来说很难理解，因为我对整体编程很陌生，还有很多东西要学。

我有两个问题

1：速度太快时，球有时不会撞到砖块。

2：球能够击中2块砖。这两个问题都与 60 fps 不足以让我的碰撞检测类型正常工作有关。

我只需要有人以尽可能简单的方式解释我需要做些什么来进行碰撞检测以防止这种情况发生。

这是我当前的碰撞代码：

```
private function checkCollision(): void {
  grdx = Math.floor((ball.x) / 28);
  grdy = Math.floor((ball.y) / 14);
  ngrdx = Math.floor((ball.x + dx) / 28);
  ngrdy = Math.floor((ball.y + dy) / 14);
  var flipX: Boolean = false;
  var flipY: Boolean = false;
  if ((grdy <= level.length - 1) && 
      (ngrdy <= level.length - 1) && 
      (grdy >= 0 && ngrdy >= 0)) {
    if (testBlock(grdx, ngrdy)) {
      flipY = true;
      paddleFlag = 1;
    }
    if (testBlock(ngrdx, grdy)) {
      flipX = true;
      paddleFlag = 1;
    }
    if (testBlock(ngrdx, ngrdy)) {
      flipX = true;
      flipY = true;
      paddleFlag = 1;
    }
    dx *= flipX ? -1 : 1;
    dy *= flipY ? -1 : 1;
  }
}
private function testBlock(xPos: int, yPos: int): Boolean {
  if (level[yPos][xPos] > 0 && level[yPos][xPos] != 13) {
    trace("hit on X,Y");
    level[yPos][xPos] = 0;
    breakBlock("Block_" + yPos + "_" + xPos);
    trace("Block: " + totalBreaks + " / " + totalBlocks);
    return true;
  }
  return false;
}
private function breakBlock(blockName: String): void {
  if (this.getChildByName(blockName)) {
    this.removeChild(this.getChildByName(blockName));
    totalBreaks++;
  }
} 
```

谢谢你，对不起我的英语不好，它不是我的母语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:10:42.383

一种解决方案是以较小的迭代移动球，在给定的帧中多次移动。

例如，我给出的解决方案是假设您根据上一帧经过的时间移动球。

假设自上次帧更新以来已经过去了 30 毫秒。在这种情况下，您将在该帧中更新移动/碰撞两次，使用 15 毫秒作为您的时间流逝。

你想要的碰撞分辨率越高，你要做的迭代就越多。

这是一个例子：

```
 // class declarations
 var lastFrame:Number;
 var iterationsPerFrame:int;

function startGame():void
{
     // lets specify 3 updates per frame
     iterationsPerFrame = 3;

     // save initial time
     lastFrame = getTimer();

     // create your listener
     addEventListener(Event.ENTER_FRAME, update);
}

function update(e:Event):void
{
     var currentFrame:Number = getTimer();
     var deltaTime:Number = (currentFrame - lastFrame)/1000;

     var iterationDelta:Number = deltaTime/iterationsPerFrame;

     for (var index:int = 0;index < iterationsPerFrame;index++)
     {
          // I'm assuming dx,dy are the velocity of the ball, in pixels per second
          ball.x += dx * iterationDelta;
          ball.y += dy * iterationDelta;
         // check collision
     }

     // set lastFrame to the currentFrame time, preparing for next frame
     lastFrame = currentFrame;

     // after this, your frame is going to render
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:59:40.970

您可以根据球`A`的速度计算出每帧球的行进距离 ( )、球与桨的距离 ( `B`) 以及是否`A > B`手动触发该帧的碰撞。

您实际上是在检查每个积木`X`并`Y`与球`X`和坐标进行`Y`坐标，因此如果积木存储在数组中，则变为： Sqrt( Sqrd(p2.x - p1.x) + Sqrd(p2.y - p1.y) )

```
for(var i=0; i<brickArray.length; i++)
{
    var distance:Number = Math.sqrt((brickArray[i].x - ball.x) * (brickArray[i].x - ball.x) +
                                    (brickArray[i].y - ball.y) * (brickArray[i].y - ball.y));
} 
```

这是一个非常好的高速碰撞检测教程：http: [//www.newgrounds.com/bbs/topic/1072673](http://www.newgrounds.com/bbs/topic/1072673)

# c++ - 创建具有相同名称的结构和类

> ID：16220577
> 
> 赞同：1
> 
> 时间：2013-04-25T16:56:53.203
> 
> 标签：c++

**摘要**：如果您声明 a`struct`和 a`class`具有相同的名称会发生​​什么。

**详情**：

我正在查看一些代码，我看到了这样的警告：

```
warning: struct 'foo' was previously declared as a class 
```

使用 clang 编译时，还有几个地方 clang 添加了注释：

```
foo.h:29:1: note: did you mean struct here?
class foo;
^~~~~
struct 
```

显然，拥有同名的结构和类并不是一个好的编码习惯。看起来发生的事情是开发人员正在编写自己的类，并使用了一个已经在他包含的另一个文件中使用的名称，而他没有注意到这一点。

但是，我的问题是编译器是否能够区分声明为的变量`class foo`和声明的变量之间的区别`struct foo`？

**编辑**：

实际上发生的事情是开发人员正在使用他创建的`class foo`in a 。`class bar`我认为与此同时，`class foo`声明的地方已更改为`struct bar`. 这就是编译代码的原因。所以我想我的问题的答案是，`struct`在`class`声明对象时是可以互换的。我仍然认为始终如一地使用它们是个好主意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T16:58:59.753

关键字`struct`和`class`在很大程度上可以互换。即使你写`struct Foo`了，你也已经创建了一个名为 的*类*类型`Foo`。并且该名称在其范围内必须是唯一的（出于 C 兼容性的原因有一个特殊例外，但最好忽略它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:21:27.967

通常，所有标识符都必须是唯一的。

特别是，在“The C++ Programming Language”一书的第 10.2.8 节中，Bjarne Stroustrup 指出：

> 根据定义，a`struct`是一个成员默认为公共的类；那是
> 
> ```
> struct s { ... 
> ```
> 
> 只是简写
> 
> ```
> class s { public:... 
> ```

和之间没有*潜在的区别*；前者只是语法糖。`struct``class`

因此，即使您可以拥有具有相同名称的标识符（同样，您不能），结构和类之间也没有任何区别，因为它们是完全相同的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:58:40.147

标识符必须是唯一的，无论是定义类还是结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-07T09:09:17.260

我会将@Alex Chamberlain 和@James Kanze 的评论作为答案：

代码没有任何问题，因为**声明！=定义**：您可以将类型声明为 a `class`，`struct`或者`union`然后为定义使用不同的类型。不应编译多个定义；然而，多个声明就可以了。

真正的问题：当您转发声明时，您不想关心它是结构、类还是联合：在这种情况下，这是一个不相关的实现细节，甚至可能在以后发生变化。所以这个警告是人为的代码气味。不过，您必须选择，并且考虑到这`class foo;`已成为*转发声明的方式*，我什至可以说**代码是完美的**。

作者没有*忘记*更新前向声明；他不*应该这样做*（无论他是否更改了实现，他都可能没有）。

# javascript - 可变jquery参数名称

> ID：16220580
> 
> 赞同：1
> 
> 时间：2013-04-25T16:57:24.003
> 
> 标签：javascript, jquery

我有一组 PHP 语言文件，用于根据用户的语言选择向用户输出文本。我已成功将 PHP 变量传递给 javascript，并且它们可用，`LANG`您可以在代码中看到它正在使用中。

这是我的问题......既然如下所示的代码完美运行，为什么我不能改变这一行......

```
'No': { 'class' : ''}} 
```

至

```
LANG.no: { 'class'  : ''}} 
```

基本上我想知道为什么我可以`LANG`在代码的其他地方使用，但不能在上面显示的行或等效的“是”行中使用。

这是工作代码：

```
$.confirm({
    'title': LANG.return_to_exhibit_lobby,
'message': "<strong>"+LANG.return_to_exhibit_lobby_confirmation+"</strong>",
'buttons': {
'Yes': { 
    'class': 'special',
    'action': function(){
        window.location.href='logout.php';
    }},
'No': { 'class' : ''}}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:59:35.277

你可以做什么：

```
var params = {
    'title': LANG.return_to_exhibit_lobby,
    'message': "<strong>"+LANG.return_to_exhibit_lobby_confirmation+"</strong>",
    'buttons': {
        'Yes': { 
            'class': 'special',
            'action': function(){
                window.location.href='logout.php';
             }}
};

params.buttons[LANG.No] = { 'class' : ''};

$.confirm(params); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T17:00:40.553

那是因为你在一个对象文字中。那里的语法规则是不同的，因为您是在声明一个结构，而不是对其进行操作。你可以这样做：

```
var data = {
    'title': LANG.return_to_exhibit_lobby,
    'message': "<strong>"+LANG.return_to_exhibit_lobby_confirmation+"</strong>",
    'buttons': {}
};
data.buttons[Lang.No] = { 'class' : ''}
$.confirm( data ); 
```

# python - Python numpy - 随机数的重现性

> ID：16220585
> 
> 赞同：3
> 
> 时间：2013-04-25T16:57:35.870
> 
> 标签：python, random, numpy, prng

我们有一个非常简单的程序（单线程），我们在其中生成一堆随机样本。为此，我们使用了多个`numpy`随机函数调用（如`normal`or `random_sample`）。有时一个随机调用的结果决定了另一个随机函数被调用的次数。

现在我想在一开始就种下一颗种子…… 我的程序的多次运行应该产生相同的结果。为此，我使用了`numpy`类的一个实例`RandomState`。虽然一开始就是这种情况，但有时结果会有所不同，这就是我想知道的原因。

当我正确地做所有事情，没有并发，因此线性调用函数并且没有涉及其他随机数生成器时，为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T09:24:03.230

好吧，大卫是对的。numpy 中的 PRNG 工作正常。在我创建的每个最小示例中，它们都按预期工作。

我的问题是另一个问题，但最后我解决了。不要在确定性算法中循环遍历字典。在调用 .item() 函数以进入迭代器时，似乎 Python 对项目进行了任意排序。

所以我对出现这种错误并不感到失望，因为它有助于提醒人们在尝试进行可重现的模拟时应该考虑什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T19:48:26.480

如果可重复性对您来说非常重要，我不确定我是否完全相信任何 PRNG 在给定相同种子的情况下总是产生相同的输出。您可能会考虑在一个阶段捕获随机数，将它们保存以供重复使用；然后在第二阶段，重播您捕获的随机数。这是消除不可重复性可能性的唯一方法——它也解决了您当前的问题。

# php - Joomla 一直询问 xcache 密码

> ID：16220591
> 
> 赞同：0
> 
> 时间：2013-04-25T16:58:02.093
> 
> 标签：php, joomla3.0, xcache

我有一个建立在 Joomla 3 上的网站。我在 PHP 5.3.3 上运行它。在共享主机上。现在系统时不时地要求输入 xcache 用户名和密码。

安装站点时，我没有被要求安装或配置 xcache。

在 Joomla 的配置中：

缓存设置为：OFF -Caching disabled 缓存处理程序是 xcache

所以任何想法为什么系统要求 xcache 用户名和密码？我怎样才能禁用它/摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:39:24.323

您的问题尚不清楚，但我认为不是 Joomla 本身要求提供凭据，而是要求服务器。

如果您禁用了缓存，那么配置 xcache 有什么意义？只需使用文件系统。

看起来 xcache 配置不正确，也许 Joomla 正在调用诸如垃圾收集器之类的函数（这就是为什么会不时发生这种情况的解释）——只是一种预感。

我不知道您的共享主机上是否可以这样做，但理想情况下您会在 xcache.ini 中设置用户/密码。

希望这可以帮助！

# arrays - 如何从多维数组中调用特定值？

> ID：16220596
> 
> 赞同：0
> 
> 时间：2013-04-25T16:58:33.720
> 
> 标签：arrays, loops

好的，这只是我在自己为在线课程创建的程序中所做的类似事情的一个小例子。唯一的区别是每个数组的输出将由用户在不同的字段中输入，而不是由程序员预先确定答案。

在这种情况下，在输出用户编号后，我想创建一个按钮（我知道该怎么做，抱歉，如果现在这太理论化了），它将特定值并将它们输出到不同的字段中。

例如...对于 aryNumbers[0][0] （在我的程序中将是一个名称）我会调用 aryNumbers[0][1] 到 aryNumbers[0][4] ...所以在这种情况下 10 , 76, 23.（这些数字是考试成绩）

```
int[ ][ ] aryNumbers = new int[2][4];

aryNumbers[0][0] = 34;
aryNumbers[0][1] = 10;
aryNumbers[0][2] = 76;
aryNumbers[0][3] = 23;

aryNumbers[1][0] = 11;
aryNumbers[1][0] = 30;
aryNumbers[1][0] = 56;
aryNumbers[1][0] = 65;

aryNumbers[2][0] = 34;
aryNumbers[2][0] = 13;
aryNumbers[2][0] = 23;
aryNumbers[2][0] = 18;

int rows = 2;
int columns = 4;

int i, j;

for (i=0; i < rows ; i++) {

for (j=0; j < columns ; j++) {

System.out.print( aryNumbers[ i ][ j ] + " " );

}

System.out.println( "" );

} 
```

只有它会调出整个姓名列表及其相应考试成绩的所有值。

阿卡...

```
ary..[0][1]
ary..[0][2]
ary..[0][3]

ary..[1][1]
ary..[1][2]
ary..[1][3]

ary..[1][1]
ary..[1][2]
ary..[1][3] 
```

这是我第一次使用多维数组..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:20:24.560

更改`for(j=0...`为`for(j=1...`跳过内部数组的第零个元素。

# pusher - Pusher.com：有没有办法使用 channel.bind_all() 我只得到我的推送事件？

> ID：16220597
> 
> 赞同：0
> 
> 时间：2013-04-25T16:58:34.590
> 
> 标签：pusher

我有一个发布恒温器事件的频道。这些事件按温度变化和恒温器控制变化分组。我有 3 个听众（网页）：摘要、温度变化和恒温器变化。

我在想我设置了一个通道“t1”（恒温器 1）并有诸如 tc（温度变化）、tm（恒温器模式变化）、tsh（温度设置加热）等事件。

温度变化页面设置简单：订阅't1'，绑定'tc'。

但是恒温器控制页面更难。我可以做类似的事情：订阅't1'，绑定到 NOT 'tc'？此页面希望接收除“tc”之外的所有事件。

我所做的是网页 javascript 中的一个循环，为每个事件（tm、tsh、tsc 等）生成多个 't1'.bind() 调用。t1.bind(tm)、t1.bind(tsh)、t1.bind(tsc) 等。

并且摘要页面需要查看所有事件。所以我想知道如何使用 bind_all()。

但是如果我使用 bind_all 我也会得到很多推送事件。我想我可以弄清楚如何过滤掉这些，但想知道你们是否有更好的想法。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T16:06:29.667

我通过使用多个通道（这是一项功能）和特定事件来解决这个问题。

# php - 多个查询时未为准备好的语句中的参数提供数据

> ID：16220598
> 
> 赞同：0
> 
> 时间：2013-04-25T16:58:37.030
> 
> 标签：php, mysqli

```
$result = $mysqli->query("SELECT * FROM news");
$news = $result->fetch_assoc();

$data = "test";
$query = "UPDATE news SET last_query = UNIX_TIMESTAMP(), news = ?";
$stmt = $mysqli->prepare($query);
var_dump($mysqli->error); # empty
var_dump($stmt->bind_param("s", $data)); # true
var_dump($stmt->prepare($query)); # true
var_dump($stmt->execute()); # false
var_dump($stmt->error); # No data supplied for parameters in prepared statement
$stmt->close(); 
```

删除第一个查询会导致第二个查询正常运行，因为我从结果集中剩余的结果中读取（即使它是从单行数据库中读取）。但即使使用 $result->free(); 清除结果集；似乎没有解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T02:43:45.807

`$stmt->prepare`用于读取数据，不应在更新表时使用。

# lisp - 在lisp中将数字转换为字符串

> ID：16220607
> 
> 赞同：27
> 
> 时间：2013-04-25T16:59:12.000
> 
> 标签：lisp, common-lisp, itoa

我试图找到一个 lisp 函数来在数字和字符串之间进行转换，经过一番谷歌搜索后，我喜欢了一个同名的函数。当我进入`(itoa 1)`SLIME 时打印：

```
Undefined function ITOA called with arguments (1) . 
```

我该如何进行转换？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-25T19:34:01.323

从数字到字符串：

```
(write-to-string 5)
"5" 
```

您可以将字符串转换为任何数字符号：

```
(write-to-string 341 :base 10)
"341" 
```

从字符串到数字：

```
(parse-integer "5")
5 
```

有一些垃圾

```
(parse-integer " 5 something not a number" :junk-allowed t)
5 
```

或者使用这个：

```
(read-from-string "23 absd")
23 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-25T17:01:21.783

一个重量级的解决方案是使用 FORMAT：

```
[2]> (format nil "~A" 1)
"1" 
```

还有[WRITE-TO-STRING](http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_to_.htm)：

```
[3]> (write-to-string 10)
"10" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-21T08:43:32.710

仅供参考：我相信（itoa #）只是 AutoLISP 中的一个功能 - 嵌入在 AutoCAD 绘图软件中的 LISP 变体。AutoLISP 的函数比 Common Lisp 少得多，有时相同的函数具有不同的名称或具有相同名称但操作不同的函数。

这可能就是为什么它对你不起作用。我经常使用 AutoLISP，并且 (itoa #) 会完全按照您的意愿行事。

# php - 根据数组中的给定键提取数组部分

> ID：16220609
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:59:13.743
> 
> 标签：php, arrays

我有两个数组。一个包含数据，另一个包含键。所以我有

```
$data = array(
    'name' => array('label' => 'Name:', 'value' => 'Genghis'),
    'age' => array('label' => 'Age:', 'value' => '67'),
    'weigh' => array('label' => 'Weigh in Kgs:', 'value' => '78')
); 
```

和

```
$keys = array('name', 'age'); 
```

现在我只想提取`name`和的`age`元素`$data`。像这样的东西。

```
$extracted = somemethod($data, $keys);
var_export($extracted); 
```

输出应该是这样的。

```
array(
    'name' => array(
        'label' => 'Name:', 
        'value' => 'Genghis',
    ),
    'age' => array(
        'label' => 'Age:',
        'value' => '67',
    ),
) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:11:03.890

我会使用这样的`array_intersect_key()`函数：

```
$data = array(...); // initial array as described
$retained_keys = array('name' => 'value not used', 'age' => 'value not used');

$filtered_array = array_intersect_key($data, $retained_keys); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:01:14.597

遍历键，获取数组值，然后返回它们：

```
function somemethod($data, $keys) {
    $return = array();
    foreach( $keys as $k) {
        $return[$k] = isset( $data[$k]) ? $data[$k] : null;
    }
    return $return;
} 
```

当找不到字段时，上面添加了“null”。您可以修改循环以在数组中`foreach`找不到键时跳过键，如下所示：`$data`

```
function somemethod($data, $keys) {
    $return = array();
    foreach( $keys as $k) {
        if( isset( $data[$k])) {
            $return[$k] = $data[$k];
        }
    }
    return $return;
} 
```

**编辑：**为了扩展 Mike Brant 的答案，`array_intersect_key()`可以`array_flip()`在函数中使用 with 来实现所需的输出：

```
function somemethod($data, $keys) {
    $keys = array_flip( $keys);
    return array_intersect_key($data, $keys);
} 
```

是的，它使用`array_flip()`，但原始`$keys`数组未修改，因为该数组的副本会被翻转。因此，您仍然可以使用以下命令调用此函数：

```
$extracted = somemethod( $data, array('name', 'age')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:01:25.550

写起来并不繁琐

```
$extracted = array();
foreach($keys as $key) {
    if (isset($data[$key])) 
        $extracted[$key] = $data[$key];
} 
```

# android - 如何在 Android 中将音频格式播放到通话中

> ID：16220610
> 
> 赞同：0
> 
> 时间：2013-04-25T16:59:14.317
> 
> 标签：android

我正在尝试将音频文件播放到 android 手机中的电话中，例如电话营销电话，在 android 的当前版本中是否可能。 两年前有人问过这个问题 [需要在通话中播放音频，答案是否定的。](https://stackoverflow.com/questions/4005259/need-to-play-audio-into-a-call)任何人都可以确认当前版本的 android 是否具有此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:05:30.073

Android 仍然（从 Jellybean MR1 开始）没有为它提供 API。我怀疑它将来也会这样做，但你永远不知道。

当前 Android 手机中使用的一些硬件平台确实支持此功能，但作为应用程序开发人员，您无法利用此功能。

TL；DR：答案仍然是“不，这是不可能的”。

# oracle - 在函数/过程中实现时选择总和查询不起作用

> ID：16220612
> 
> 赞同：0
> 
> 时间：2013-04-25T16:59:18.443
> 
> 标签：oracle, function, stored-procedures, plsql

在过程调用的函数中使用两个 sum() 时，我遇到了一个问题。输入的结果是分开的。以下表格，功能和程序是我尝试过的。PS - 当有一个 sum(x) 时它工作正常。

```
 DROP TABLE MATCH;
    CREATE TABLE MATCH 
       (M_ID VARCHAR2 (4) NOT NULL,
        HT_ID VARCHAR2 (4),
        AT_ID VARCHAR2 (4),
        P_F NUMBER (3),
      P_A NUMBER (3));

INSERT INTO MATCH VALUES
('M01','T1', 'T2',  2, 0);

INSERT INTO MATCH VALUES
('M02','T1', 'T2',  1, 1);

INSERT INTO MATCH VALUES
('M03','T1', 'T2',  0, 2);

INSERT INTO MATCH VALUES
('M04','T1', 'T2', 0, 2);

INSERT INTO MATCH VALUES
('M05','T2', 'T1', 2, 0);

INSERT INTO MATCH VALUES
('M06','T2', 'T1',  0, 2);

INSERT INTO MATCH VALUES
('M07','T2', 'T1',  1, 2);

INSERT INTO MATCH VALUES
('M08','T2', 'T1',  0, 2); 
```

临时表（将存储结果）：

```
DROP TABLE RESULTS;
CREATE GLOBAL TEMPORARY TABLE RESULTS
(ht_id varchar2 (5),
 FINAL NUMBER (2))
 ON COMMIT PRESERVE ROWS;

 insert into RESULTS values('T1', NULL);
 insert into RESULTS values('T2', NULL);
 insert into RESULTS values('T3', NULL);
 insert into RESULTS values('T4', NULL);
 insert into RESULTS values('T5', NULL); 
```

**我申请的查询：**

```
select
sum(case when HT_ID='T1' then P_F else 0 end) +
sum(case when AT_ID='T1' then P_A else 0 end)
from match; 
```

返回 9 的结果，我在一个函数中应用了选择查询，并创建了一个过程来调用该函数并将结果存储在一个临时表中。尽管在函数中完成的求和结果是分开的（例如，T1 为 6，T2 为 3，尽管仅 T1 应该有 9 个点）。

```
HT_ID      FINAL
----- ----------
T1             3
T2             6
T3             0
T4             0
T5             0 
```

如何保留与查询相同的结果并将它们输入到临时表中？**如下所示：**

```
HT_ID      FINAL
----- ----------
T1             9
T2             0
T3             0
T4             0
T5             0 
```

**这是我在功能和程序方面尝试过的：**

```
 drop function RESULTSFINAL;
 CREATE OR REPLACE FUNCTION RESULTSFINAL(i_HT_ID RESULTS.HT_ID%TYPE)

 RETURN VARCHAR2
 IS

 v_RESULTS_FINAL  RESULTS.FINAL%TYPE;

BEGIN
 select sum(case when HT_ID='T1' then P_F else 0 end)+ sum(case when AT_ID='T1' then    P_A else 0 end)
 INTO v_RESULTS_FINAL
 FROM MATCH
 WHERE HT_ID = i_HT_ID;

 IF v_RESULTS_FINAL IS NULL THEN
  v_RESULTS_FINAL := 0;
END IF;
RETURN v_RESULTS_FINAL;
END;
/ 
```

**步骤：**

```
 CREATE OR REPLACE PROCEDURE FINALSCORES
    AS

    CURSOR c_RESULTS
    IS

     SELECT HT_ID
     FROM RESULTS;

    v_HT_ID  RESULTS.HT_ID%TYPE;
    v_RESULTS_FINAL  RESULTS.FINAL%TYPE;

    BEGIN  

    OPEN c_RESULTS;

     LOOP

    FETCH c_RESULTS INTO v_HT_ID;

    EXIT WHEN c_RESULTS%NOTFOUND;

     v_RESULTS_FINAL := RESULTSFINAL(v_HT_ID);

     UPDATE RESULTS
     SET FINAL = v_RESULTS_FINAL
     WHERE HT_ID = v_HT_ID;

   END LOOP;
   CLOSE c_RESULTS;

   END;
    / 
```

**执行最终分数；**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:48:42.800

```
select 
  sum(case when HT_ID=i_HT_ID then P_F else 0 end)
  + sum(case when AT_ID=i_HT_ID then P_A else 0 end)
INTO v_RESULTS_FINAL
FROM MATCH; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:33:22.907

您也可以使用 DECODE 执行相同的操作，如下所示：

```
CREATE OR REPLACE FUNCTION RESULTSFINAL(i_HT_ID RESULTS.HT_ID%TYPE)
 RETURN VARCHAR2
IS

    v_RESULTS_FINAL  RESULTS.FINAL%TYPE;
BEGIN

      select sum(decode(HT_ID,i_HT_ID,P_F,
                              decode(AT_ID,i_HT_ID,P_A,0)))
                into v_RESULTS_FINAL
      from match;

      IF v_RESULTS_FINAL IS NULL THEN
          v_RESULTS_FINAL := 0;
      END IF;

      RETURN v_RESULTS_FINAL;
END;
/ 
```

# html - 使 div 扩展到全高 - 30px

> ID：16220613
> 
> 赞同：0
> 
> 时间：2013-04-25T16:59:19.157
> 
> 标签：html, css

有没有一种简单的方法，只用 css 就可以让 div 扩展到页面的整个高度 - 30px。我在页面底部有一个 30 像素高的“页脚”，并设置为`position: fixed; bottom: 0px;`我不希望页面其余部分的任何内容显示在此页脚后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:07:52.623

```
<body>
<div id="wrapper">
    <div id="header">Header added just for demonstration purposes</div>
    <div id="content">Main content goes here</div>
    <div id="footer">And this is my footer</div>
</div> 
```

现在的风格

```
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
 }

 #wrapper {
    height: auto !important;
    min-height: 100%;
    height: 100%;
    position: relative; /* Required to absolutely position the footer */
 }

#footer {
    height: 50px; /* Define height of the footer */
    position: absolute;
    bottom: 0; /* Sit it on the bottom */
    left: 0;
    width: 100%; /* As wide as it's allowed */
}

#content {
    padding-bottom: 50px; /* This should match the height of the footer */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:02:10.710

我可能会将所有内容放在一个包装器中并将大小设置为 100%，

但是在新的 css3 中，你有 calc() 可以满足你的需要：[http ://updates.html5rocks.com/2012/03/CSS-layout-gets-smarter-with-calc](http://updates.html5rocks.com/2012/03/CSS-layout-gets-smarter-with-calc)

请注意，并非所有（甚至是现代）浏览器都支持 calc()

# magento - 如何在多商店 Magento 设置中获取请求路径以在 hreflang 中使用？

> ID：16220614
> 
> 赞同：0
> 
> 时间：2013-04-25T16:59:21.720
> 
> 标签：magento, seo

我们想获取构建动态 URL 的请求路径

```
 public function countryStoresAlternateLinks(){
    $stores = Mage::app()->getStores(false);
    $countryAlternateLinks = '';
    foreach($stores as $store) {
    $countryAlternateLinks[] = '<link rel="alternate" hreflang="' . substr(Mage::getStoreConfig('general/locale/code', $store->getId()), 0, 2) . (Mage::getStoreConfig('general/country/default', $store->getId()) != '' ?  "-" . Mage::getStoreConfig('general/country/default', $store->getId()) : '') .  '" href="' . $store->getCurrentUrl(false) .'" />' . "\n";
    } 
    return $countryAlternateLinks;      } 
```

这给出了以下输出：

```
 <link rel="alternate" hreflang="en-GB" href="http://our_domain.com/magento/thee/losse-        bladthee/groene?SID=4d6ec9b2ada547a58c7b57dfb35b8d95&amp;___store=english" /> 
    <link rel="alternate" hreflang="nl-NL" href="http://www.our_domain.nl/magento/thee/losse-bladthee/groene?___store=dutch" /> 
    <link rel="alternate" hreflang="nl-BE" href="http://our_domain.com/magento/thee/losse-bladthee/groene?SID=4d6ec9b2ada547a58c7b57dfb35b8d95&amp;___store=nl_be" /> 
    <link rel="alternate" hreflang="fr-BE" href="http://our_domain.com/magento/thee/losse-bladthee/groene?SID=4d6ec9b2ada547a58c7b57dfb35b8d95&amp;___store=fr_be" /> 
```

该功能将打印每个商店的基本 URL，但每个商店视图的类别路径不会改变，它会以相同的语言提醒。

****问题是——我们如何指定“href”来获取每个商店视图/语言的类别路径？****

这就是我们目前所得到的“href="' . $store->getCurrentUrl(false) .'” 有谁知道我们如何实现这一目标？

* * *

感谢您的回复，但不完全是我们正在寻找的。也许我在第一条消息中没有很好地解释，对不起。

最后我们要调用的是来自其他商店的rewrite URL，例如：

代替：

```
 www.domain.com/cat1/sub2/info-english.html 
```

我们想打电话：

```
 www.domain.com/cat-fr/sub-fr/info-french.html 
```

这在原来的英文商店上，所以我们有很好的干净链接？有没有办法在 Magento 中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:25:50.553

```
 `Mage::getModel('catalog/category')
   ->setStoreId(each store id)
   ->load(YOUR_CATEGORY_ID);` 
```

这将根据商店 ID 加载每个类别。获取网址

希望你得到了需要的东西

:)

# user-interface - 构建类似选项菜单的 UI

> ID：16220621
> 
> 赞同：0
> 
> 时间：2013-04-25T16:59:38.000
> 
> 标签：user-interface, windows-8, winrt-xaml

我认为这个问题说明了一切：我想构建一个 Windows 8 应用商店应用程序，但如何构建这样的 UI：

![在此处输入图像描述](https://i.stack.imgur.com/GVtgp.jpg)

我认为left是一个普通的ListView。重要的是我希望每个 ListViewEntry 都有一个自己的 AppBar。以及如何在正确的内容区域加载不同的页面（使用不同的 AppBar）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:29:14.233

您可以将一个`ContentControl`放在主面板中，另一个放在 AppBar 中，然后将它们的`Content`属性绑定到左侧的`SelectedItem`属性并用于显示所选页面的右侧 UI。`ListBox``ContentTemplateSelector`

*编辑 - 样本

**XAML**

```
<Page
    x:Class="App17.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App17"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <local:PropertyPageTemplateSelector
            x:Key="PropertyPageTemplateSelector"/>
    </Page.Resources>
    <Grid
        Background="LemonChiffon">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition
                Width="2*" />
        </Grid.ColumnDefinitions>
        <ListBox
            x:Name="listBox"
            DisplayMemberPath="Label"/>
        <ContentControl
            Grid.Column="1"
            Content="{Binding SelectedItem, ElementName=listBox}"
            ContentTemplateSelector="{StaticResource PropertyPageTemplateSelector}">
            <ContentControl.Resources>
                <DataTemplate
                    x:Key="Options">
                    <StackPanel>
                        <TextBlock
                            Text="{Binding Label}"
                            FontSize="32"
                            Foreground="SlateGray" />
                        <Rectangle
                            Width="400"
                            Height="400"
                            Fill="Aquamarine" />
                    </StackPanel>
                </DataTemplate>
                <DataTemplate
                    x:Key="Preferences">
                    <StackPanel>
                        <TextBlock
                            Text="{Binding Label}"
                            FontSize="32"
                            Foreground="SlateGray" />
                        <Rectangle
                            Width="400"
                            Height="400"
                            Fill="Khaki" />
                    </StackPanel>
                </DataTemplate>
                <DataTemplate
                    x:Key="Properties">
                    <StackPanel>
                        <TextBlock
                            Text="{Binding Label}"
                            FontSize="32"
                            Foreground="SlateGray" />
                        <Rectangle
                            Width="400"
                            Height="400"
                            Fill="LawnGreen" />
                    </StackPanel>
                </DataTemplate>
                <DataTemplate
                    x:Key="Settings">
                    <StackPanel>
                        <TextBlock
                            Text="{Binding Label}"
                            FontSize="32"
                            Foreground="SlateGray" />
                        <Rectangle
                            Width="400"
                            Height="400"
                            Fill="Violet" />
                    </StackPanel>
                </DataTemplate>
            </ContentControl.Resources>
        </ContentControl>
    </Grid>
</Page> 
```

**C＃**

```
using System.Collections.Generic;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace App17
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
            listBox.ItemsSource =
                new List<PropertyPageViewModel>(
                    new PropertyPageViewModel[]
                    {
                        new OptionsPropertyPageViewModel(), 
                        new PreferencesPropertyPageViewModel(), 
                        new PropertiesPropertyPageViewModel(), 
                        new SettingsPropertyPageViewModel(), 
                    });
        }
    }

    public abstract class PropertyPageViewModel
    {
        public abstract string Label { get; }
    }

    public class OptionsPropertyPageViewModel : PropertyPageViewModel
    {
        public override string Label { get { return "Options"; } }
    }

    public class PreferencesPropertyPageViewModel : PropertyPageViewModel
    {
        public override string Label { get { return "Preferences"; } }
    }

    public class PropertiesPropertyPageViewModel : PropertyPageViewModel
    {
        public override string Label { get { return "Properties"; } }
    }

    public class SettingsPropertyPageViewModel : PropertyPageViewModel
    {
        public override string Label { get { return "Settings"; } }
    }

    public class PropertyPageTemplateSelector : DataTemplateSelector
    {
        protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
        {
            if (item == null) return base.SelectTemplateCore(item, container);

            var contentControl = (ContentControl)container;
            var viewModel = (PropertyPageViewModel)item;
            var templateKey = viewModel.Label;

            return (DataTemplate)contentControl.Resources[templateKey];
        }
    }
} 
```

# ruby-on-rails - 尽管链接出现在网站上，但 Rspec/Capybara “link_to”测试失败

> ID：16220628
> 
> 赞同：0
> 
> 时间：2013-04-25T17:00:18.607
> 
> 标签：ruby-on-rails, testing, rspec, integration, capybara

我正在编写一个 Ruby on Rails 应用程序来管理图书馆记录。该网站位于 grinnelllendinglibrary.herokuapp.com 我想测试一下，当经理登录时，他们可以在每本书记录旁边看到指向“结帐”操作的链接。我的问题是这个 Cabybara/Rspec 测试失败了，我不知道为什么。

```
describe "on the index page" do
  before(:each) do
    click_link "Index"
  end
 ....

  it "should have a checkout link" do
    page.should have_link("Checkout")

    # I've also tried a bunch of other tests; these also failed:
    #page.should have_content "Checkout"
    #find('div').should have_link('Checkout')
    #find_link('Checkout').visible? == 'true'
  end
 .....
end 
```

错误信息是：

```
 Failure/Error: page.should have_link("Checkout")
   expected link "Checkout" to return something
 # ./spec/requests/layout_links_spec.rb:172 
```

我已经检查了几件事：1）这不是由于登录失败；同一块中的其他测试正确地在标题中找到仅在经理登录时可见的链接；只有部分书中的链接没有找到。2）链接显示在网站本身，它只是失败的测试。

本书部分代码：

```
 <div class="book">
    <div class="title"> 
      <%= book.name %>
    </div>
    <% if signed_in? and is_manager? %>
    <%= link_to "Entry", book%>
    <%= link_to "Delete", book, :method => :delete, :confirm => "Are you
    sure?", :title => "Delete #{book.name}" %> 
    <%= link_to "Checkin", checkin_book_path(book), :method => :put%>
    <%= link_to "Checkout", checkout_book_path(book), :method => :put%>
    <% end %>
    <br>
    <p class="moreinfo">
      Authors(s): <%= book.authors %><br>
      <% if book.edition != nil %>
      Edition: <%= book.edition %>
      <% else %>
      Edition: N/A
      <% end %>
      <br>
      Copies available: <%= book.avail_copies
                            %>/<%= book.total_num_copies %>
    </p>
  </div> 
```

我正在使用 Rails 3.2.12、rspec-rails 2.8.1 和 capybara 1.1.2

# html - d3 上下文图表高斯模糊

> ID：16220631
> 
> 赞同：1
> 
> 时间：2013-04-25T17:00:24.800
> 
> 标签：html, svg, d3.js, svg-filters

我正在创建一个交互式 d3 应用程序，该应用程序具有与 Bostock 的焦点/上下文刷亮示例非常相似的界面的一部分：

[http://bl.ocks.org/mbostock/1667367](http://bl.ocks.org/mbostock/1667367)

到目前为止一切正常，但这就是我想要做的。我想采用画笔范围未选择的上下文区域（底部图表）和高斯模糊画笔背景上的区域（以及它后面的 svg 图表路径和 x 轴）。基本上，我试图产生类似这样的效果：

[http://bl.ocks.org/mbostock/4349545](http://bl.ocks.org/mbostock/4349545)

但由于我的图表是一条路径而不是一堆小圆圈，所以我不能简单地更改所选区域的路径类。

我的解决方案是在画笔范围的左侧和右侧绘制几个矩形，并使用填充不透明度等设置这些矩形的样式，这会产生类似于画笔句柄示例的“去强调”效果。

![在此处输入图像描述](https://i.stack.imgur.com/SmZYw.png)

然而，对于真正的高斯模糊，它似乎更棘手。我可以对区域本身进行 SVG 过滤器，但这只会模糊矩形的边缘（它不会对通过它们可见的所有内容应用模糊效果）。我的下一个解决方案是尝试从画布中获取 BackgroundImage 并对其进行模糊处理，就像您在此处看到的那样：

[http://www.w3.org/TR/SVG/filters.html#AccessingBackgroundImage](http://www.w3.org/TR/SVG/filters.html#AccessingBackgroundImage)

但是为了我的生活，我无法让它工作。浏览器是否支持 BackgroundImage？我是否需要告诉 d3 重新调用我的一些页面元素以在我的画笔回调中重新绘制 svg 元素（因为它们是动态加载的）？有没有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:58:14.020

背景图像仅在 IE10 和 Opera 中受支持 - 所以您所做的将在 Windows 8 中运行！显而易见的解决方法是通过 feImage 将原始背景对象拉入过滤器。这适用于 IE10、Opera 和 Webkit，但[IE10+Opera 对提供给 feImage](https://code.google.com/p/chromium/issues/detail?id=234002)的内部内容引用的 x,y 坐标的处理方式与 Webkit 不同。

下一级解决方法是在过滤器效果中进行整个覆盖层，并在内容组上设置过滤器。这是完全可能的（但让它在 d3 中工作可能有点复杂）

一些灵感：[http ://codepen.io/mullany/pen/mnBqK](http://codepen.io/mullany/pen/mnBqK)

# mahout - Mahout - 项目相似性，但排除用户已经“购买”的项目

> ID：16220634
> 
> 赞同：0
> 
> 时间：2013-04-25T17:00:35.650
> 
> 标签：mahout, similarity, recommendation-engine, mahout-recommender

我想创建一个视频推荐器，通过相似度进行推荐。挑战在于，我想排除用户已经看过的视频。这对我来说似乎是一个非常明显的案例，但我没有发现它被覆盖。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:02:01.130

这是任何推荐器的默认行为，即不返回已出现在用户输入向量中的项目。当然，这就是我工作的那些人的工作方式。

你真的是说*怎么*做？这只是一个过滤步骤。当您在输入中查找它时，您只是不考虑任何存在的项目。

除此之外，您始终可以以任何您想要的方式对结果进行后处理。[Mahout](http://mahout.apache.org) / [Myrrix](http://myrrix.com)都有一个`IDRescorer`抽象，可以让你注入任何你想在结果中删除或提升项目的逻辑。这是[一篇关于重新评分的文章](http://myrrix.com/tuning-quality/)，适用于两者。

# rest - REST：部分更新集合子集的最佳实践

> ID：16220636
> 
> 赞同：2
> 
> 时间：2013-04-25T17:00:39.533
> 
> 标签：rest

我正在尝试更多地了解 REST 方式:)。假设我有一个可以通过 url GET /productTypes 检索的 ProductTypes 集合，假设我们可以但不必应用任何过滤器。所以这会获取 500 条记录。

现在，如果我想完全更新资源，我可以在 /productTypes/123 使用 PUT 或 POST。到目前为止，一切都很好。

如果我正在创建一个新资源并且我提前知道了 id，我会在 /productTypes/123 处使用 PUT 并返回 201，否则使用 200 更新 PUT。

如果我对资源进行部分更新，我会在 /productTypes/123/displayOrder 处执行 PUT 或 POST 并返回 303 指示其他资源已被修改。

但是，如果我执行 1 次 POST 发送基本上是产品 ID 和显示顺序的键值对列表，然后修改 500 条记录中的 5 条。我现在如何表明这 5 条记录已更改？

在此部分更新之后，现在 /productTypes 处的 GET 会发生什么情况。我在某处读到，与其使用此获取返回多条记录，不如将列表链接返回到资源，然后一个接一个地获取它们，因为这将允许疯狂的缓存。但我仍然如何表明 5 条记录已更改？我需要用 303 做 5 个单独的帖子，还是有不同的机制。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:44:33.013

我会这样做：

```
PATCH /productTypes HTTP/1.1
Content-Type: application/json

{"item":[
  {"id":"1","displayOrder":"4"},
  {"id":"2","displayOrder":"2"},
  {"id":"3","displayOrder":"1"},
  {"id":"4","displayOrder":"3"},
  {"id":"5","displayOrder":"5"}
]}

HTTP/1.1 200 OK
Content-Type: application/hal+json

{
  "_links": { "self": {"href": "/productTypes" } }
  "_embedded": {
    "item": [{
      "_links": { "self": { "href": "/productTypes/1" } },
      "displayOrder": "4"
    },
    /* 4 more entries */
    ]
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:31:05.650

我在规范中没有看到任何特别禁止您使用多个 Content-Location 标头的内容。我对其进行了测试，Chrome 完全可以。它不会自动为您重定向，但无论如何您都不希望涉及多个资源。

```
HTTP/1.1 303 See Other
Content-Location: /productTypes/123/displayOrder
Content-Location: /productTypes/456/displayOrder
Content-Location: /productTypes/789/displayOrder
Content-Location: /productTypes/012/displayOrder
Content-Location: /productTypes/345/displayOrder 
```

# python - Python Tkinter coords函数不在循环内移动画布对象

> ID：16220638
> 
> 赞同：1
> 
> 时间：2013-04-25T17:00:43.583
> 
> 标签：python, loops, user-interface, tkinter, coords

我有一个函数，它从文本文件中读取位置，解析它们，然后使用 coords 函数将相应的对象移动到 tkinter 画布上列出的位置。正在从文件中读取数据并正确解析，但由于某种原因，coords 函数仅将对象移动到循环最后一次迭代中文件中列出的最后一个位置。

我是否需要在每次循环迭代后以某种方式更新画布？谢谢！

这是我的代码：

```
def playback():
    fptr = tkFileDialog.askopenfilename()
    filename = open(fptr,"rU")
    if not filename:
        return

    stat.set('REPLAY IN PROGRESS')
    gamestatus[0] = 2
    for line in filename:
        line = line.strip()

        #Example line from input file: 'B:#,#,#,#|L:#,#,#,#|R:#,#,#,#'
        line = line.split('|')
        B_loc = line[0].split(':')[1].split(',')
        L_loc = line[1].split(':')[1].split(',')
        R_loc = line[2].split(':')[1].split(',')

        #Converting strings to ints and lists to tuples to simplify code below      
        B_tup=(int(B_loc[0]),int(B_loc[1]),int(B_loc[2]),int(B_loc[3]))
        L_tup=(int(L_loc[0]),int(L_loc[1]),int(L_loc[2]),int(L_loc[3]))
        R_tup=(int(R_loc[0]),int(R_loc[1]),int(R_loc[2]),int(R_loc[3]))

        #Moving objects to locations from input file        
        playingField.coords(pongball.ball,B_tup)
        playingField.coords(leftpaddle.paddle,L_tup)
        playingField.coords(rightpaddle.paddle,R_tup)
        time.sleep(.02)

    filename.close()
    gamestatus[0] = 0
    stat.set('-------Pong-------') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:33:25.287

GUI 开发中一个非常好的经验法则是永远不要调用`sleep`. 这会冻结 GUI，即使只是几毫秒，它仍然是一个不好的做法。

在 Tkinter 中制作动画的正确方法是编写一个显示单帧的函数，然后使用`after`. 这允许事件循环在执行动画时不断地服务事件。

例如，将 for 语句的整个主体（减去 sleep）放入一个方法中。我们称之为“刷新”。让这个函数使用 after 重新安排自己，如下所示：

```
def refresh():
    line = get_next_line()
    line = line.split('|')
    B_loc = line[0].split(':')[1].split(',')
    ...

    # call this function again in 20ms
    root.after(20, refresh) 
```

现在你需要做的就是实现`get_next_line`一个函数，然后你就设置好了。每次更新坐标时，这将自动允许 GUI 重新绘制自身。

当然，您需要检查输入何时用尽，并且您可能希望用户可以通过请求动画停止的按钮设置一个标志等。

# sql - SQL Server 文本搜索

> ID：16220640
> 
> 赞同：0
> 
> 时间：2013-04-25T17:00:57.220
> 
> 标签：sql, sql-server, sql-server-2008, text-search

我有一个业务需求，我们需要对存储在数据库中的记录进行一些疯狂的名称匹配，我想知道是否有任何简单的方法可以使用 SQL Server 来做到这一点。

存储在数据库中的名称：Austin K 要从 UI 匹配的名称：Austin Kierland

那只是一个样本。实际上，可能有很多不同的排列和组合。

如果反过来，我可以使用通配符，但在这种情况下，数据库中的名称小于搜索条件。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T14:37:23.190

您可以使用 LIKE 运算符进行正常搜索，该运算符确定特定字符串是否与指定模式匹配。您将遇到的问题是返回多条记录或不正确人员的可能性。我自己对商业应用程序也有类似的要求，解决该问题的最佳方法是要求其他合格值，而不仅仅是名称。如果您在没有其他合格数据的情况下进行部分名称搜索，您肯定会遇到误报匹配和/或多条记录。在我的例子中，我构建了一个 Web 服务来检查资格，允许对名字和姓氏进行文本搜索，但还添加了出生日期、主要人员 SSN 和性别，以确保匹配的人确实是要搜索的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:07:00.110

实际上 - 不。数据库用于比较绝对值，而不是用于杂乱的比较。他们在内部存储数据的方式不适合真正混乱的匹配。实际上，即使是像谷歌这样的超级强大的专用搜索引擎，它有*很多*混乱的匹配功能，在没有先验知识的情况下也无法完成你的示例。

我不知道该要求的措辞如何，但我要么用“技术上不可能”来拍摄功能请求，要么实施一个规则集来尝试混乱的匹配 - 例如，你可以轻松地“硬编码”输入大写单词时会执行多次搜索，将它们缩短为一个字母。不知道这是否可以解决您的问题。

# javascript - 罚款上传者删除链接

> ID：16220641
> 
> 赞同：2
> 
> 时间：2013-04-25T17:00:59.447
> 
> 标签：javascript, fine-uploader

我正在使用 Fine 上传器、带有图像预览的 ajax 上传器。我没有使用 Fine Uploader Basic 模式。

如何移动删除链接

```
<a class="qq-upload-delete" href="#" style="display: inline;">Delete</a> 
```

从`<ul class="qq-upload-list">`到`<li id="thumb">`周围的图像。

```
<script>
  $(document).ready(function() {
    $('#thumbnail-fine-uploader').fineUploader({
      request: {
        endpoint: 'includes/example.php'
      },
        deleteFile: {
        enabled: true,
        forceConfirm: true
      },
      multiple: false,
      validation: {
        allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
        sizeLimit: 51200 // 50 kB = 50 * 1024 bytes
      },
      text: {
        uploadButton: 'Dodajte sliku',
        deleteButton: ' '
      }
    }).on('complete', function(event, id, fileName, responseJSON) {

        if (responseJSON.success) {
          $(this).append('<li id="thumb"><img src="img/success.jpg" alt="' + fileName + '"></li>');
      }
    });
  });
</script> 
```

我想实现这一点，所以每张图片旁边都有一个删除链接，而不是在上传列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:44:51.583

由于文件项删除锚功能的方式，重新设置删除链接可能在这里不起作用。

相反，为什么不创建自己的删除按钮呢？您的`complete`回调处理程序可能如下所示：

```
.on('complete', function(event, id, fileName, response) {
   if (response.success) {
       var $deleteEl = $('<a href="#">Delete</a>');

      //when you delete element is clicked, call the "deleteFile" API method, passing in that file's ID
      $deleteEl.click(function() {
         $('#thumbnail-fine-uploader').fineUploader('deleteFile', id);
      });

      $(this).append('<li id="thumb"><img src="img/success.jpg" alt="' + fileName + '"></li>')
             .append($deleteEl);
   }
}); 
```

当然，您可以调整删除锚点 HTML 以适合您的应用程序的样式。

# symfony - 如何扩展使用 JMS Di Extra @Service 注释定义的 Symfony2 服务？

> ID：16220646
> 
> 赞同：1
> 
> 时间：2013-04-25T17:01:18.877
> 
> 标签：symfony, symfony-2.1

假设我在可重复使用的包中有一个 FormType，如下所示：

```
/**
 * @Service("acme_core_purchase.form.add_to_basket")
 * @FormType
 */
class AddToBasketType extends AbstractType
{} 
```

在我的控制器中，我注入它，做我需要的任何事情：

```
/** @Inject("acme_core_purchase.form.add_to_basket") */
protected $add_to_basket_form; 
```

假设在一个特定项目中我想扩展该表单并添加一些额外的字段，我打算如何使用注释来做到这一点？

```
class AddToBasketType extends BaseAddToBasketType
{} 
```

*   我不能只创建一个具有相同服务名称的表单，这不起作用/没有意义 - 据我所知，分配不遵循 AppKernel::registerBundles 中设置的优先级。无论如何，我怀疑这在概念上是有缺陷的。

*   我可以更改服务名称，但是我需要在我使用过的任何地方注入不同的服务，这涉及扩展所有这些内容。

*   我可以将服务名称存储在一个参数中，然后将其注入任何地方，这样我就可以在任何地方注入正确的服务名称，但我还需要注入容器才能检索服务。

*   我一直在我需要的地方做后者，但肯定有更好的方法吗？或者至少，应该有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:34:23.390

很简单，使用Form组件自己的继承。

```
/**
 * @Service("acme_core_purchase.form.add_to_basket")
 * @FormType
 */
class AddToBasketType extends AbstractType
{
    public function getName() { return 'add_to_basket'; }
    public function getParent() { return 'form'; }
}

/**
 * @Service("whatever")
 * @FormType
 */
class AddToBasket2Type extends AbstractType
{
    public function getName() { return 'add_to_basket2'; }
    public function getParent() { return 'add_to_basket'; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T20:12:38.127

看看他们的[注释配置的服务部分](http://jmsyst.com/bundles/JMSDiExtraBundle/master/annotations#service)

注意`parent="another.service.id"`

```
<?php

use JMS\DiExtraBundle\Annotation\Service;

/**
 * @Service("some.service.id", parent="another.service.id", public=false)
 */
class Listener
{
} 
```

# html - 把我的盒子固定在盒子里

> ID：16220653
> 
> 赞同：0
> 
> 时间：2013-04-25T17:01:44.473
> 
> 标签：html

我目前在一个盒子里有一个盒子，但它没有以文本为中心。我想将框围绕文本居中，以使框不会超出空白区域：

[http://jsfiddle.net/infoed/nvVBU/（css](http://jsfiddle.net/infoed/nvVBU/)在jdfiddle中）：

```
<DOCTYPE! html>
<html>
<head>
    <title>fumblr.</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="bootstrap.min.css" />
</head>
<body>
    <div id="navbar">
        <ul>
             <li><img src="img/toplogo.png"></li>
             <li> <a> Fumblr </a> </li>
        </ul>
    </div>

<div id="content">
    <div class="box">
            <img src="img/heart.svg" height="18" width="18" />
            <div class="userid">DogBountyHunter27</div>
            <div class="headline">Been 10 Days off bread. Want to die</div>
            <p>Is there any doubt that cats are awesome? We love cats, and being Mashable and all, we know a thing or two about them. But is it even possible to put our feelings about cats into infographic form? You be the judge. Undaunted by such a Herculean task...</p>
        </div>

        <div class="box">
            <img src="img/heart.svg" height="18" width="18"  />
            <div class="userid">Vader2307</div>
            <div class="headline">Hilarious Link of Bill Gates Jumping over a chair</div>
            <p>Type an address into your phone, and up will pop a step-by-step route from where you are to where you want to be. This is, in its way, magic. But it's magic that has, at this point, been rubbed and polished into a simple fact of life. The ease with...  </p>
        </div>

        <div class="box">
            <img src="img/heart.svg" height="18" width="18" />
            <div class="userid">ShaqAttack</div>
            <div class="headline">Is Insanity Wolf bad for the meme community?</div>
            <p>Is there any doubt that cats are awesome? We love cats, and being Mashable and all, we know a thing or two about them. But is it even possible to put our feelings about cats into infographic form? You be the judge. Undaunted by such a Herculean task...</p>
        </div>

        <div class="box">
            <img src="img/heart.svg" height="18" width="18" />
            <div class="userid">Jimmy Two Times</div>
            <div class="headline">Fax machines making a comeback in Williamsburg</div>
            <p>Is there any doubt that cats are awesome? We love cats, and being Mashable and all, we know a thing or two about them. But is it even possible to put our feelings about cats into infographic form? You be the judge. Undaunted by such a Herculean task...</p>
        </div>

        <div class="box">
            <img src="img/heart.svg" height="18" width="18" />
            <div class="userid">SmoothieFanatic</div>
            <div class="headline">Fifth Grader Expelled for bringing Siracha to school</div>
            <p>Is there any doubt that cats are awesome? We love cats, and being Mashable and all, we know a thing or two about them. But is it even possible to put our feelings about cats into infographic form? You be the judge. Undaunted by such a Herculean task...</p>
        </div>     
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:13:05.393

我假设您正在谈论“标题”div。如果是这样，只需将 div 更改为 span。这将包装单词，最后没有多余的空格。

```
<div class="headline">HEADLINE HERE</div> 
```

改成：

```
<span class="headline">HEADLINE HERE</span> 
```

希望有帮助！

# c# - C# 关闭使用 Application.Run() 的线程

> ID：16220655
> 
> 赞同：1
> 
> 时间：2013-04-25T17:01:53.603
> 
> 标签：c#, .net, multithreading, winforms, apartment-state

我正在尝试使用可以访问其代码的 C# DLL，但实际上我无法更改代码并构建它的自定义版本。调用代码是一个 C# WinForms 项目，C# DLL 也使用 WinForms 来处理 Windows 系统事件。问题是 DLL 使用后台线程在其中使用 Application.Run() ，并且有内置的方法可以杀死或停止该线程。这是代码片段：

```
public class DllClass
{
    private Thread uithread = null;
    private bool uithreadstarted = false;

    public DllClass()
    {
        uithread = new Thread(new ThreadStart(RunDll));
        uithread.IsBackground = true;
        uithread.SetApartmentState(ApartmentState.STA);
        uithread.Start();
        do
        {
            Thread.Sleep(100);
        } while (uithreadstarted == false);
    }

    private void RunDll()
    {
        //other init stuff here
        uithreadstarted = true;
        Application.Run();
    }
} 
```

显然，我希望杀死它的方式是使用 Application.Exit()，但这也退出了我自己的 WinForms 项目，这不是我想要发生的。如果我只是关闭我的应用程序而不调用 Application.Exit()，则 DLL 将继续在后台运行。我希望能够实例化 DllClass 对象，使用它，然后在完成后将其关闭。我想出了一个方法来获取它正在运行的线程的 Thread 对象，但是在它上面调用 Thread.Abort() 实际上并没有杀死线程。有没有办法从 DLL 外部强制中止 Application.Run() 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:57:06.170

如果您可以找到由 DLL 后台线程（例如窗体或隐藏的应用程序窗口）创建的窗口句柄，您可以向该句柄发布 WM_QUIT 消息，这应该会导致 DLL 干净地退出消息循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:12:11.880

您将需要获取在另一个线程中运行的表单实例，然后调用 form.BeginInvoke 并从那里调用 Application.Exit

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T21:59:53.443

Application.ExitThread 怎么样

# php - MongoDB + 教义 + Zend

> ID：16220660
> 
> 赞同：1
> 
> 时间：2013-04-25T17:02:12.003
> 
> 标签：php, mongodb, doctrine-orm, zend-framework2

我正在集成 Zend 和 Doctrine 2 以使用 MongoDB。我正在使用快速入门框架。

这是Doctrine.php

```
<?php
use Doctrine\MongoDB\Connection;
use Doctrine\ODM\MongoDB\DocumentManager;
use Doctrine\ODM\MongoDB\Mapping\Annotations;
use Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;
class Resource_Doctrine extends Zend_Application_Resource_ResourceAbstract
{   
    protected $_options = array();
    private $manager;

    public function __set($config, $null) {
        $this->_options = array(
                'connection' => array(
                        'dbname' => $config['connection']['dbname'],
                        ),
                'modelDir' => $config['modelDir'],
                'proxyDir' => $config['proxyDir'],
                'proxyNamespace' => $config['proxyNamespace'],
                'hydratorDir' => $config['proxyDir'],
                'hydratorNamespace' => $config['proxyNamespace'],
                'autoGenerateProxyClasses' => $config['autoGenerateProxyClasses']
        );
    }

    public function init()
    {   
        $zendConfig = $this->getOptions();
        if(!empty($zendConfig)) Zend_Registry::set('config', $zendConfig); 
        $options = Zend_Registry::get('config');
        $this->__set($options,null);
        $config = new \Doctrine\ODM\MongoDB\Configuration;
        $config->setDefaultDB($options['connection']['dbname']);
        $config->setProxyDir($this->_options['proxyDir']);
        $config->setProxyNamespace($this->_options['proxyNamespace']);
        $config->setHydratorDir($this->_options['hydratorDir']);
        $config->setHydratorNamespace($this->_options['hydratorNamespace']);
        $config->setMetadataDriverImpl(AnnotationDriver::create($this->_options['modelDir']));
        Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver::registerAnnotationClasses();
        $dm = DocumentManager::create(new Connection(), $config);

        return $dm;
    }
} 
```

班上

```
<?php

use Doctrine\ODM\MongoDB\Mapping\ClassMetadata;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document */
class Application_Model_Guestbook
{
    /**
     * @ODM\Id
     */
    public $id;

    /** @ODM\String */
    public $email;

    /** @ODM\String */
    public $comment;

    /** @ODM\Date */
    public $created;

    public function setGuestbook($comment)
    {
        $this->email = $comment['email'];
        $this->comment = $comment['comment'];
        $this->created = date('d-m-Y H:i:s');
    }

    public function getGuestbook()
    {
        return $this;
    }
} 
```

以及动作

```
public function signAction()
    {
        $request = $this->getRequest();
        $this->getHelper('loadResource')->form('sign', 'Guestbook');
        $form    = new Application_Form_Guestbook();

        if ($this->getRequest()->isPost()) {
            if ($form->isValid($request->getPost())) {
                $guestbook = new Application_Model_Guestbook;
                $guestbook->setGuestbook($form->getValues());
                try
                {
                    $this->em->persist($guestbook);
                    $this->em->flush($guestbook);
                    return $this->_helper->redirector('index');
                }
                catch (Exception $e)
                {
                    throw new Exception($e);
                }
            }
        }

        $this->view->form = $form;
    } 
```

我收到错误：可捕获的**致命错误：传递给 Doctrine\ODM\MongoDB\Hydrator\HydratorFactory::hydrate() 的参数 3 必须是数组类型，给定 null，在 /home/gabiru/www/twitradar_mongo/ 中调用library/Doctrine/ODM/MongoDB/UnitOfWork.php 在第 2518 行**

我已经搜索并没有找到任何有相同问题的人的任何结果，有人对此有任何想法吗？

第三个参数是变量$hint，我不知道参数设置在哪里。

# c# - SendKeys.SendWait 函数 - 向应用程序发送特殊密钥

> ID：16220666
> 
> 赞同：4
> 
> 时间：2013-04-25T17:02:40.603
> 
> 标签：c#, sendkeys

我试图弄清楚如何将字符“^”（不是 CTRL 命令）发送到外部文本窗口。

我尝试过的不同代码：

```
SendKeys.SendWait("^");
SendKeys.SendWait("(^)");
Sendkeys.SendWait("{^}"); //This should be the right code, but it doesn't work either 
```

这些都不会在文本字段中输入字符“^”。如果我将普通文本发送到窗口，它会出现在窗口中。无法以某种方式键入“^”。我查看了 MSDN 和联机帮助，但找不到与该问题相关的任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T17:22:16.090

要使用 发送字符“^” `SendKeys.SendWait()`，您需要考虑实际按下的是哪些键。在 en-US 键盘上，它是 Shift & 6，转换为：

```
SendKeys.SendWait("+6"); 
```

因此，无论您使用哪个组合键来生成“^”字符，都将这些键输入到`SendKeys.SendWait()`调用中。

# database - excel组装从数据库导出的两张表

> ID：16220670
> 
> 赞同：-1
> 
> 时间：2013-04-25T17:03:16.940
> 
> 标签：database, excel, vba

我有两张从数百行数据库中导出的 excel。在第一张表中，我有这些列

```
name  age  gender
id1    23    m
id2    45    f 
```

在第二张表中，这些列

```
id1 john smith
id2 jean ford 
```

我正在寻找一个宏或其他东西来自动将第一张表中的 idx 替换为第二张表中的相应值。

最终结果应该是一张类似的表格：

```
name         age  gender
john smith   23     m
jean ford    45     f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:47:04.813

你不需要像宏一样复杂的东西——VLOOKUP[就](http://office.microsoft.com/en-ca/excel-help/vlookup-HP005209335.aspx)足够了：

> 在表数组的第一列中搜索值，并从表数组的另一列返回同一行中的值。
> 
> VLOOKUP 中的 V 代表垂直。当比较值位于要查找的数据左侧的列中时，请使用 VLOOKUP 而不是 HLOOKUP。

例如，如果您的 id-sheet 映射是 on `Sheet2`，那么公式

```
=VLOOKUP(A2,Sheet2.$A$1:$B$2, 2) 
```

`A2`将在位于 中的数据表的最左列中查找在此工作表的单元格中找到的值`Sheet2.$A$1:$B$2`，然后从该表的第 2 列返回该值。向下复制，然后得到类似的东西

![工作表的示例快照](https://i.stack.imgur.com/Wmee1.png)

# ruby-on-rails-3 - Rails 3：从数据库中删除关联重复项

> ID：16220674
> 
> 赞同：0
> 
> 时间：2013-04-25T17:03:37.833
> 
> 标签：ruby-on-rails-3, activerecord

我有这些模型：

```
class Relationship < ActiveRecord::Base
  belongs_to :student
  belongs_to :guardian
end

class Student < ActiveRecord::Base
  has_many :relationships
  has_many :guardians, through: :relationships
end

class Guardian < ActiveRecord::Base
  has_many :relationships
  has_many :students, through: :relationships
end 
```

我不希望任何监护人与一名学生多次发生关系。这可以通过验证来防止，但是假设为时已晚，并且在某些情况下会发生这种情况。例如，`g`监护人在哪里：

```
g.relationships

[
    [0] #<Relationship:0x0000000bc33650> {
                          :id => 40321,
        :relationship_type_id => 2,
                  :student_id => 41700,
                 :guardian_id => 45820,
                  :created_at => Tue, 23 Apr 2013 17:44:29 UTC +00:00,
                  :updated_at => Tue, 23 Apr 2013 17:44:29 UTC +00:00,
    },
    [1] #<Relationship:0x0000000bc32e80> {
                          :id => 40923,
        :relationship_type_id => 2,
                  :student_id => 41700,
                 :guardian_id => 45820,
                  :created_at => Tue, 23 Apr 2013 18:58:46 UTC +00:00,
                  :updated_at => Tue, 23 Apr 2013 18:58:46 UTC +00:00,
    }
] 
```

如您所见，这两个关系共享相同的 student_id。我想知道是否有办法从数据库中删除重复的关系。我尝试了以下代码行无济于事：

```
g.relationships.uniq!(&:student_id)
g.update_attributes(relatioships: g.relationships.uniq!(&:student_id)) 
```

我怎么解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:19:28.827

```
subquery = Relationship.select("student_id, guardian_id").
             group(:student_id, :guardian_id).
             having("count(*) > 1").to_sql
groups = Relationship.joins("JOIN (#{subquery}) sub ON relationships.student_id = sub.student_id AND relationships.guardian_id = sub.guardian_id").
                      group_by{|r| [r.student_id, r.guardian_id] }

groups.values.each do |duplicates|
  duplicates.drop(1).each(&:destroy)
end 
```

# jquery - 从网格切换到列表后jquery函数不起作用

> ID：16220677
> 
> 赞同：0
> 
> 时间：2013-04-25T17:03:46.787
> 
> 标签：jquery, fadeto

我有一个网站，其中包含从网格到列表的切换 jQuery 函数。在另一个外部 .js 文件中有以下函数

```
$(function (){
$('.image a img').hover(
function () {
     $(this).stop().fadeTo('slow', 0.7);
     },
function(){
    $(this).stop().fadeTo('slow', 1);
}
);
}); 
```

这只是第一次工作。如果我从“网格”切换到“列表”，反之亦然，它就不再起作用了。

在谷歌开发者工具中，内联样式在切换后消失。是否有任何简单的解决方案可以“重新加载”上述功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:22:28.827

我会尝试这样的“

```
$( '.image a img' ).on({
     mouseenter: function() {

        $( this ).stop().fadeTo('slow', 0.7);

      },
      mouseleave: function() {

        $( this ).stop().fadeTo('slow', 1);

     }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:22:53.063

为了确保我必须查看更多代码，但也许原因是引用的函数将`.hover`事件绑定到绑定时刻匹配查询`$('.image a img')`的所有元素（这是在文档就绪事件上），所以如果您稍后添加新元素（编辑：我猜，你的切换功能是哪个？），即使匹配查询`$('.image a img')` `.hover`也不会为它们定义。切换到`$(.image container').on("mouseenter mouseleave",'.image a img', handlerInOut)`，其中`.image container`的元素在哪里`.image a img`，看看它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:05:35.740

问题是您没有重置队列。因此，如果您将鼠标悬停/鼠标快速移出。它什么也不会显示。尝试这个：

```
$('body').on("mouseenter", ".image a img", function () {
     $(this).stop(true, false).fadeTo('slow', 0.7);
   })
.on("mouseleave", ".image a img", function(){
    $(this).stop(true, false).fadeTo('slow', 1);
}); 
```

这将重置队列，但不会跳到最后。此外，您可以使用 LIVE 元素使事件在所有更改的项目上保持活动状态。从 1.8 开始在新的 jQuery 中启用

# queue - ZeroMQ 个人订阅者队列

> ID：16220679
> 
> 赞同：1
> 
> 时间：2013-04-25T17:03:56.920
> 
> 标签：queue, zeromq, publish-subscribe

我有一个关于 ZeroMQ 的问题**`PUB/SUB`**。发布者是为每个单独的订阅者创建一个单独的队列，还是为所有订阅者创建一个队列（因此​​受到最慢订阅者的限制）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:20:53.287

每个连接的订阅者都有自己的队列。当订阅者速度慢时，它自己的队列会填满然后溢出（高水位标记默认为 1,000），并且它的消息将被丢弃。这不会影响其他订阅者。

# mysql - MySQL 多个日期之间的小时总和

> ID：16220680
> 
> 赞同：0
> 
> 时间：2013-04-25T17:04:00.677
> 
> 标签：mysql, date, datetime

我有两张桌子`projects`和`project_hours`，一对多（一个项目，很多小时）。

这是我的两张表：

```
CREATE TABLE `projects` (
    `project_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `client_id` int(10) unsigned NOT NULL,
    `project_name` char(50) NOT NULL,
    `project_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`project_id`),
    KEY `project_owner` (`client_id`),
    CONSTRAINT `projects_ibfk_1` FOREIGN KEY (`client_id`) REFERENCES `clients` (`client_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

CREATE TABLE `project_hours` (
    `hours_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `project_id` int(10) unsigned NOT NULL,
    `start_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `end_time` datetime NOT NULL,
    PRIMARY KEY (`hours_id`),
    KEY `project_id` (`project_id`),
    CONSTRAINT `project_hours_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我想要做的是选择所有项目，并得到一个总小时数，所以我有一个总小时数的最终项目列表。因此，如果我有 1 个项目，project_hours 中有 2 条记录，我想取回 1 行，而不是 2 行。

这是我尝试过的。我得到的是 2 行，每行的时间跨度小于 1 小时，因此 current_hours 显示为`0`. 我能做些什么来总结这两行？获得 1.50 或类似的东西？

```
select *, datediff(start_time, end_time) * 60 as current_hours from projects 
left join project_hours using(project_id)
where client_id = 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:11:29.417

开始了！这似乎符合我的要求：

```
select *, sum(time_to_sec(timediff(end_time, start_time))) / 60 / 60 as current_hours from projects 
left join project_hours using(project_id)
where client_id = 2
group by project_id 
```

# windows - 如何在 windows7 上使用 DirectX 9 和多 GPU

> ID：16220681
> 
> 赞同：0
> 
> 时间：2013-04-25T17:04:03.347
> 
> 标签：windows, direct3d, multiscreen, multi-gpu

我在 Windows 7 系统上有多个 nVidia GPU 卡（Q2000），没有 SLI，只有一个显示器。

现在我要做的是让 Direct3D9 设备在特定 GPU 上运行。

我可以使用 [Adapter] 参数`IDirect3D9::CreateDevice`来选择 GPU，但除非我在该 GPU 卡上连接第二台显示器，否则它将无法工作（如果我在 Windows 上只有一个桌面）。

如果我单击“分辨率控制面板”中的“检测”按钮，它可以在我的主桌面一侧制作一个“假”桌面，并且 CreateDevice(1, ...) 运行良好 - 但这不是我想要的。

对于 OpenGL，这很容易，因为 WGL_NV_gpu_affinity，它可以使 OpenGL 设备在第二个 GPU 上运行，只连接一个显示器，一个桌面在 windows 上。

我想知道是否有任何 API 可用于 Directx 9 作为“WGL_NV_gpu_affinity”工作。

任何提示将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T08:52:43.547

IDirect3D9::CreateDevice 使用第一个参数“适配器”，不是 GPU，只是监控适配器

# url - 如何从 Selenium IDE 中的“链接”元素获取 url

> ID：16220696
> 
> 赞同：7
> 
> 时间：2013-04-25T17:05:25.690
> 
> 标签：url, selenium, hyperlink, ide

我想获取（并存储到变量）网页上一个超链接（链接）的 url。是否可以在 Selenium IDE 中获取它？

在我的测试中，我必须验证是否存在链接，然后存储此链接中的 url 并稍后在测试中使用它。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-26T12:52:32.313

```
driver.findElement(By.xxx).getAttribute('href'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-18T10:02:00.470

**虽然这个问题最初是针对 IDE 提出的，但我只是通过 Google 来到这里，为Python**寻找相同的答案。

上面给出的

```
AttributeError: 'WebElement' object has no attribute 'getAttribute' 
```

因为对于 Python 它是

```
driver.find_element(By.xxx).get_attribute('href') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:08:47.640

是的，您可以简单地使用[storeAttribute](https://web.archive.org/web/20110525081059/http://www.hexbytes.com/?paged=2#post-56)。

如果您说您使用的是 Selenese 还是其他语言，我可能会更明确。

# android - android.view.ViewRoot$CalledFromWrongThreadException

> ID：16220697
> 
> 赞同：1
> 
> 时间：2013-04-25T17:05:25.567
> 
> 标签：android

HTML：

```
<a href="javascript:AndroidFunction.xxxx()">xxxx</a> 
```

活动：

```
public class MainActivity extends Activity
    {
    @Override
    protected void onCreate(Bundle savedInstanceState)
            {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        

        WebView webview = (WebView) findViewById(R.id.webview);
        final MyJavaScriptInterface myJavaScriptInterface = new MyJavaScriptInterface(this);
        webview.addJavascriptInterface(myJavaScriptInterface, "AndroidFunction");
        webview.getSettings().setJavaScriptEnabled(true); 
        webview.loadUrl("file:///android_asset/x1.html");        
    }

    public class MyJavaScriptInterface {
        Context mContext;

        MyJavaScriptInterface(Context c) {
            mContext = c;
        }

        public void xxxx()
        {
            setContentView(R.layout.x);              
        }
    }
} 
```

我得到这个错误：

未捕获的处理程序`thread WebViewCoreThread exiting due to uncaught exception android.view.ViewRoot$CalledFromWrongThreadException`：：

只有创建视图层次结构的原始线程才能接触其视图。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:22:40.490

一方面，你不应该`setContentView`从任何地方打电话，但`onCreate`. 如果要更改`View`s，请在布局层次结构中开始新的`Activity`或添加/更新`View`s。

此外，这`CalledFromWrongThreadException`意味着您在不在 UI 线程上时尝试编辑`View`s，这是不允许的（出于我现在不会讨论的原因）。我建议您使用在 UI 线程上`View.post(Runnable action)`进行编辑。`View`我[对这个问题的回答](https://stackoverflow.com/questions/14895729/use-observer-in-fragment/14895928#14895928)应该对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:44:29.600

尝试

```
public void xxxx() {
    runOnUiThread(new Runnable() {
        public void run() {
           setContentView(R.layout.x);              
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-19T15:40:53.330

ause: This error is common if you tried to send UI events to the UI thread from outside the UI thread. The test method Thread tried to interact with the UI outside the UI thread.

Suggested: Use Handler to solve the cause.

Solution: [Link](http://vardhan-justlikethat.blogspot.in/2013/07/android-show-or-hide-ui-component-with.html)

# c# - 我认为 C# 具有词法作用域，但为什么这个示例显示动态作用域行为？

> ID：16220698
> 
> 赞同：18
> 
> 时间：2013-04-25T17:05:27.130
> 
> 标签：c#, scope

```
 var x = 1;
    Func<int,int> f = y => x + y;
    x = 2;
    Console.WriteLine(f(1)); 
```

[输出为 3。根据https://web.archive.org/web/20170426121932/http://www.cs.cornell.edu/~clarkson/courses/csci4223/2013sp/lec](https://web.archive.org/web/20170426121932/http://www.cs.cornell.edu/~clarkson/courses/csci4223/2013sp/lec/lec12.pdf)，我假设它是 2 [/lec12.pdf](https://web.archive.org/web/20170426121932/http://www.cs.cornell.edu/~clarkson/courses/csci4223/2013sp/lec/lec12.pdf)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T17:13:35.857

PDF 没有完全解释的词汇范围有一个微妙之处。它的示例实际上有两个名为 的不同变量`x`，它不会重新分配第一个变量的值`x`（实际上函数式语言可能不允许突变）。

C# 是词法范围的——它在 lambda 的定义点查找`x`，而不是在调用委托时查找。但是：`x`解析为一个变量，而不是一个值，它在调用时读取变量的值。

这是一个更完整的示例：

```
int InvokeIt( Func<int, int> f )
{
   int x = 2;
   return f(1);
}

Func<int, int> DefineIt()
{
   int x = 1;
   Func<int, int> d = (y => x + y);
   x = 3;  // <-- the PDF never does this
   return d;
}

Console.WriteLine(InvokeIt(DefineIt())); 
```

lambda 绑定到*内部*存在的`x` *变量*。定义点的值 ( ) 无关紧要。该*变量*稍后设置为。 *`DefineIt``x = 1`*`x = 3`**

 **但它显然也不是*动态范围*，因为没有使用`x = 2`内部`InvokeIt`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-25T17:39:51.843

这个问题是[我 2013 年 5 月 20 日博客的主题](http://ericlippert.com/2013/05/20/what-is-lexical-scoping/)。谢谢你的好问题！

* * *

您误解了“词法范围”的含义。让我们引用您链接到的文档：

> 函数体是在定义函数时存在的旧动态环境中评估的，而不是在调用函数时的当前环境中评估的。

这是你的代码：

```
int  x = 1;
Func<int,int> f = y => x + y;
x = 2;
Console.WriteLine(f(1)); 
```

现在，什么是“定义函数时存在的动态环境”？将“环境”视为一个类。该类包含每个变量的可变字段。所以这与以下内容相同：

```
Environment e = new Environment();
e.x = 1;
Func<int,int> f = y => e.x + y;
e.x = 2;
Console.WriteLine(f(1)); 
```

`f`评估时，在*创建 f 时存在的环境 e 中*`x`查找。那个环境的*内容*已经改变了，但是*绑定**的环境*是同一个环境。（请注意，*这实际上是 C# 编译器生成的代码*！当您在 lambda 中使用局部变量时，编译器会生成一个特殊的“环境”类，并将本地的每次使用转换为字段的使用。）***`f`***

 ***让我举一个例子，看看如果 C# 是动态作用域的，世界会是什么样子。考虑以下：

```
class P
{
    static void M()
    {
        int x = 1;
        Func<int, int> f = y => x + y;
        x = 2;
        N(f);
    }
    static void N(Func<int, int> g)
    {
        int x = 3;
        Console.WriteLine(g(100));
    }
} 
```

如果 C# 是动态作用域的，那么这将打印“103”，因为评估会`g`计算`f`，并且在动态作用域语言中，评估会*在当前环境中*`f`查找 的值。在*当前*环境中，是 3。在创建时存在的环境中，是 2。同样，在那个环境中的值已经改变；正如您的文件指出的那样，环境是一个*动态环境*。但是*哪个环境是相关的*并没有改变。`x` **`x``f``x``x`**

 ***如今，大多数语言都不是动态范围的，但也有一些。例如，PostScript——在打印机上运行的语言——是动态范围的。********

# java - JVM 是否可以同时运行多个程序？

> ID：16220700
> 
> 赞同：14
> 
> 时间：2013-04-25T17:05:33.493
> 
> 标签：java, jvm

JVM 是否可以同时运行多个程序？如果是这样，怎么做？如果不是，为什么？

要运行程序，我们只需执行

```
java ProgramName 
```

但是我们可以使用同一个 JVM 实例来运行另一个程序吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T17:11:11.487

答案取决于您对“程序”的定义。`main`具有方法的 Java 程序`java NameOfClass`通常不能在同一个 JVM 中运行，因为没有内置的资源或名称空间分离。例如，如果两个程序使用相同库的冲突版本怎么办？

我们还有一些旨在共享 JVM 的应用程序，例如企业应用程序。这些程序旨在在“应用程序服务器”的上下文中运行，该程序基本上是用于运行其他程序的程序。应用程序服务器使用类加载器和安全管理器将应用程序资源分开。例如，由于通过不同的类加载器加载，两个应用程序可能使用冲突的库版本或冲突的类名，但仍然共享一个 JVM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T17:09:54.270

不是直接的。但是，由于 JVM 确实支持线程，因此您可以通过创建一个包装器将两个程序粘贴在一起，该包装器在不同的线程中启动每个程序（假设它们是兼容的并且不做诸如定义具有相同名称的不同类之类的事情）。

如果您根本不希望程序能够相互干扰或共享任何状态，那么即使在同一进程中运行它们又有什么意义呢？如果您只想通过只加载标准库一次来节省内存，您可以设置`SecurityManagers`并`ClassLoaders`隔离这两个程序。但是，这必然会阻止他们通过反射做疯狂的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T17:18:51.327

如果您从命令提示符执行 JAVA 命令，它将始终在单独的 JVM 实例上运行。如果您想使用相同的 JVM，可以为程序使用单独的线程。但是对于 JAVA 命令，它将是两个独立的进程，因此是独立的 JVM。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-05T15:38:17.790

IBM 正在开发“多租户”JVM [http://www.ibm.com/developerworks/library/j-multitenant-java/](http://www.ibm.com/developerworks/library/j-multitenant-java/)，这将使在同一虚拟机中运行多个 Java 程序成为可能/更容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T17:39:35.367

一方面，你不能。JVM 只运行一个程序。另一方面，启动程序可以简单地按顺序或并行运行另一个程序。顺序方式特别简单：

```
ClassName1.main(new String[]{arg1, arg2});
ClassName2.main(new String[]{arg1, arg2, arg3}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T17:20:13.747

要运行`java`命令，您需要使用

```
java [ options ] class [ argument ... ]
java [ options ] -jar file.jar [ argument ... ] 
```

同样来自-我们可以阅读[`java`的 Java 应用程序启动器](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)

> **java**工具启动 Java 应用程序。它通过启动 Java 运行时环境、加载**指定**的类并调用该类的**main**方法来做到这一点。

因此`java`，为 JVM 创建进程，该进程将加载**一个**类并调用其**main**方法。

我没有看到任何选项可以添加其他类以通过`java`命令执行其主要方法。如果您愿意，您可以在程序中启动新的线程/[进程](https://stackoverflow.com/a/14778022/1393766)，但这不会改变 JVM 在启动时只运行一个**main**方法的事实。

# grails - 包中的 Grails 过滤器控制器

> ID：16220702
> 
> 赞同：3
> 
> 时间：2013-04-25T17:05:36.483
> 
> 标签：grails

我正在处理的项目目前使用过滤器来处理各种片段。过滤器本身工作得很好。我遇到的问题是，在指定应该在哪些控制器上执行过滤器时，我最终得到了一个非常大的列表。从功能上讲，这可以正常工作，但最终会变得丑陋且有些笨拙。

```
def filters =
{
        filterSomething(controller:'one|two|three|...|xyz', action:'*')
        {
            //before filter here, not important.
        }
    } 
```

有没有办法指定过滤器仅适用于给定包或包列表中的控制器？

如果没有开箱即用的东西，我正在考虑将一些东西绑定到引导程序中并以这种方式设置我的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:18:28.327

您可以对所有控制器进行过滤，然后检查它们的包，然后决定要做什么。有更好和更优雅的编码方式，但只是为了给你一个想法。

```
 class MyFilters {
def grailsApplication

def filters = {
    all(controller:'*', action:'*') {
        before = {
            if (checkController(['com.package.name'],controllerName)){
            }
        }
    }
}

def searchInList(list,packageName){
    for (keyword in list) {
        if (packageName.contains(keyword)) return true
    }
    return false
}

Boolean checkController(def includePackageList,cname) {
    def dlist = grailsApplication.getArtefacts("Controller")
    def filteredList= dlist.findAll{ searchInList(includePackageList,it.getPackageName()) }
    return filteredList.contains(cname)
}
} 
```

# javascript - Backbone Marionette，渲染复合视图两次？

> ID：16220705
> 
> 赞同：1
> 
> 时间：2013-04-25T17:05:46.977
> 
> 标签：javascript, backbone.js

我有两次打印用户数据的问题，这是代码：

```
window.UserData = {}
UserData.Model = Backbone.Model.extend();
UserData.Collection = Backbone.Collection.extend({
  url: '/test.php?c=userData',
  model: UserData.Model,
  parse: function (response) {
    return response.data;
  }
});
UserData.View = Backbone.Marionette.CompositeView.extend({
  tagName: 'span',
  template: Handlebars.compile($('#user-data-template').html())
});
BaseApp.Layout = Backbone.Marionette.Layout.extend({
  template: Handlebars.compile($('#base-layout-template').html()),
  regions: {
    'region_user_data': '#user_data_reg'
  },
  initialize: function () {
    _.bindAll(this);
  },
  onRender: function () {
    var self = this;
    var c = new UserData.Collection();
    c.fetch({
      success: function () {
        var ud = new UserData.View({
          collection: c
        });
        self.region_user_data.show(ud);
      }
    });
  }
}); 
```

此 BaseApp 布局在一个区域（在正文中）上呈现一次。

这是模板：

```
<script id='user-data-template' type='text/x-handlebars-template'>
    <a href="#" id="logout"> Logout </a> Hola {{uname}}
</script>

<script id='base-layout-template' type='text/x-handlebars-template'>
    base page layout
    <div id="user_data_reg" class="user_data_reg"></div>
</script> 
```

这是浏览器（chrome）中显示的内容：

```
Logout Hola Logout Hola 14 
```

如您所见，它两次显示用户布局，但第一次不显示 uname，这有点奇怪，因为在 chrome 中我有这个：

```
child {models: Array[0], length: 0, _byId: Object, 
constructor: function, url: "http://localhost/test.php?c=userData"…} 
```

该模型仅显示 1 并且它的作用是打印两次内容。

此外，当我获取收集数据时，我会这样做：

```
c.fetch({
  success: function () {
    var ud = new UserData.View({
      collection: c
    });
    self.region_user_data.show(ud);
    console.log("print xx");
  } 
```

它只记录一次“print xx”，而不是我预期的两次。

为什么即使集合仅获取单个模型，我也会获得双重 userData 内容，为什么会发生这种情况？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:08:13.363

这是视图类型的问题，我没有使用“CompositeView”，而是切换到了 ItemView，问题就消失了。我猜 Marionette 强制将 ItemView 用于单个数据。

# database - GAE jpa 数据库模型示例

> ID：16220707
> 
> 赞同：0
> 
> 时间：2013-04-25T17:06:07.317
> 
> 标签：database, google-app-engine, jpa

我对此完全陌生，如果这是愚蠢的问题，我很抱歉。

我正在尝试在 JPA 中为 Google App Engine 设计数据库模型，但我无法做到正确。当我找到无法正确获取注释的方式或收到有关 Google App Engine 不支持 M:N 的错误时。

我需要实体用户有多个组，组有多个用户，并且有些用户也是组管理员。

我的基本模型是`User -> usergroup(user; group; (bool)isAdmin) <-Group`

有人可以举一个简单明了的例子来说明如何定义关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:48:47.360

请试试这个。

```
@Entity
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key id;
    private String name;
    @ManyToOne(fetch = FetchType.LAZY)
    private UserGroup usergroup;
} 
```

类用户组

```
@Entity
public class UserGroup {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key id;
    private String name;
    private boolean admin;
    @OneToMany(mappedBy = "usergroup", cascade = CascadeType.ALL)
    private List<User> users = new ArrayList<User>();
} 
```

请注意 GAE 对 JPA 有限制，您可以[在此处阅读更多信息](https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:26:21.123

我对 Google App Engine 一无所知，但我可以在 JPA 方面提供帮助。

这里的问题是“isAdmin”列，它阻止数据模型成为与连接表的简单@ManyToMany 关系。

引入该字段后，在数据模型中，您需要在用户实体上使用 key=Group 和 value=isAdmin 的 Map，类似地，您需要在 Group 实体中使用相应的 Map，以便了解每个用户是否是管理员。

这通过以下方式使用@ElementCollection 建模：

```
@Entity
@Table(name="User")
public class User
{
    @Id
    @GeneratedValue(strategy= GenerationType.TABLE)
    private int id;

    private String name;

    @ElementCollection
    @CollectionTable(name="Users_Groups", joinColumns={@JoinColumn(name="userId")})
    @MapKeyJoinColumn(name="groupId")
    @Column(name="isAdmin")
    private Map<Group, Boolean> groups;
}

@Entity
@Table(name="Group")
public class Group
{
    @Id
    @GeneratedValue(strategy= GenerationType.TABLE)
    private int id;

    private String name;

    @ElementCollection
    @CollectionTable(name="Users_Groups", joinColumns={@JoinColumn(name="groupId")})
    @MapKeyJoinColumn(name="userId", insertable=false, updatable=false)
    @Column(name="isAdmin", insertable=false, updatable=false)
    private Map<User, Boolean> users;
} 
```

重要的注解是@ElementCollection，其他注解只是命名集合表的特定列，并确保它们从两个实体中匹配：@CollectionTable 给出表的名称和表示当前 id 的列的名称实体。@MapKeyJoinColumn 给出了表示 Map 中“key”元素的 id 的列的名称，@Column 给出了 map 中“value”元素的名称。

我不确定其中一个实体是否需要 insertable=false 和 updatable=false，由于用户和组之间的循环依赖关系，可能会避免添加重复行。

您还需要手动创建集合表，因为至少 EclipseLink 尝试使用两个“groupId”和“isAdmin”列来创建它。如果绝对需要用户和组之间的循环依赖关系，您可能会考虑审查设计。

# iis - 在特定时间回收 IIS 7 应用程序池

> ID：16220709
> 
> 赞同：0
> 
> 时间：2013-04-25T17:06:15.413
> 
> 标签：iis, application-pool

当我们尝试将其设置为每 7 天在特定时间的特定时间时，我们会收到错误消息。文档说可以使用可选的 [d] 参数。我们希望每 7 天凌晨 3 点回收一次。 [http://technet.microsoft.com/en-us/library/cc754494(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754494%28v=ws.10%29.aspx)

命令：C:\Windows\System32\inetsrv>appcmd set apppool /apppool.name: TempPool /+recycli ng.periodicRestart.schedule.[value='7.03:00:00']

## 错误信息：

## 应用程序池

执行此操作时出错。

细节：

时间跨度值必须介于 00:00:00 和 23:59:59 秒（含）之间，粒度为 60 秒

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-11T06:30:59.103

虽然这个问题有点过期，但我昨天在编写一些 c# 代码来编程操作应用程序池时遇到了这个问题。

我在以下链接中的 doc 中找到了时间表示例，其中显示“添加应用程序池...然后将应用程序池设置为每天凌晨 3:00 回收”，这意味着我们无法通过添加指定固定的回收时间跨度时间表。 [http://www.iis.net/configreference/system.applicationhost/applicationpools/add/recycling/periodicrestart/schedule/add#006](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/recycling/periodicrestart/schedule/add#006)

这就是为什么它会抛出异常来询问 23:59:59 以下的时间跨度。

当您想指定一个固定的回收时间跨度时，您应该使用来自periodicRestart 级别的时间属性。有关满足您要求的各种方法的示例，请参阅此文档。 [http://www.iis.net/configreference/system.applicationhost/applicationpools/add/recycling/periodicrestart#005](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/recycling/periodicrestart#005)

```
// add schedule to recycle at 3 am every day
appPool.Recycling.PeriodicRestart.Schedule.Clear(); 
appPool.Recycling.PeriodicRestart.Schedule.Add(new TimeSpan(3, 0, 0));

// set to recycle every 3 hours
appPool.Recycling.PeriodicRestart.Time = new TimeSpan(3, 0, 0); 
```

# javascript - 了解 node.js 事件队列和 process.nextTick

> ID：16220710
> 
> 赞同：7
> 
> 时间：2013-04-25T17:06:20.070
> 
> 标签：javascript, node.js, callback, eventqueue

我很难理解它到底是怎么`process.nextTick`做的。我以为我理解了，但我似乎无法复制我认为这应该如何工作：

```
var handler = function(req, res) {
    res.writeHead(200, {'Content-type' : 'text/html'});
    foo(function() {
        console.log("bar");
    });
    console.log("received");
    res.end("Hello, world!");
}

function foo(callback) {
    var i = 0;
    while(i<1000000000) i++;
    process.nextTick(callback);
}

require('http').createServer(handler).listen(3000); 
```

在`foo`循环时，我将发送几个请求，假设`handler`将在后面排队几次`foo`，`callback`只有在`foo`完成时才入队。

如果我对它的工作原理是正确的，我假设结果将如下所示：

```
received
received
received
received
bar
bar
bar
bar 
```

但它没有，它只是顺序的：

```
received
bar
received
bar
received
bar
received
bar 
```

I see that `foo` is returning before executing `callback` which is expected, but it seems that `callback` is NEXT in line, rather than at the end of the queue, behind all of the requests coming in. Is that the way it works? Maybe I'm just not understanding how exactly the event queue in node works. And please don't point me [here](http://howtonode.org/understanding-process-next-tick). Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:44:51.297

process.nextTick put the callback on the next tick that is going to be executed, not at the end of the tick queue.

Node.js doc ([http://nodejs.org/api/process.html#process_process_nexttick_callback](http://nodejs.org/api/process.html#process_process_nexttick_callback)) say: "It typically runs before any other I/O events fire, but there are some exceptions."

setTimeout(callback, 0) will probably work more like you describe.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T00:20:58.683

You should certainly read the link fgascon provided, and perhaps

[https://github.com/joyent/node/issues/3335](https://github.com/joyent/node/issues/3335) for more background.

Use process.nextTick for when you want to call some code before any IO, but after the calling context has returned (usually because you want to register listeners on an event emitter and need to return the created emitter before you can register anything).

# dojo - 如何在 Dojo 中使用 postCreate？

> ID：16220711
> 
> 赞同：0
> 
> 时间：2013-04-25T17:06:22.107
> 
> 标签：dojo, widget

我正在测试 post create，所以我可以在 postcreate 中设置类属性，而不是在这里调用

```
request("js/my/data/sample.json", {
    handleAs: "json"
}).then(function (jsonResults) {
    arrayUtil.forEach(jsonResults.LinksMap, function (List) {
        arrayUtil.forEach(List.LinksMap.entry, function (Ientry) {
            if ('information' === Ientry.linkType) Ientry.className = 'info';
            else if ('news link' === Ientry.linkType) Ientry.className = 'news';
            var widget = new support(Ientry).placeAt(authorContainer);
        });
    });
}); 
```

我试过了

```
postCreate: function () {
    this.inherited(arguments);
},
_setLinkClssAttr: function (iconClass) {
    if (iconClass != "") {
        if ('information' === linkType) LinkClss = 'info';
        if ('news link' === Ientry.linkType) LinkClss = 'news';

        this._set("LinkClss", iconClass);
        this.LinkNode.class = iconClass;
    }
} 
```

我的 HTML 模板看起来像这样

```
<a class="${baseClass}LinkClss"  href="${Link.url}" data-dojo-attach-point="LinkNode">${Link.title}</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:23:15.613

[这是你的意思](http://jsfiddle.net/fiddlegrimbo/5bzuG/5/)吗？

HTML 代码：

```
<div id="myWidget1"></div>
<div id="myWidget2"></div>
<div id="myWidget3"></div> 
```

CSS：

```
.info {
    color: red;
}
.news {
    color: blue;
} 
```

创建 Widget 的代码，传入一个入口对象：

```
require([
    "dojo/parser", "dojo/dom", "MyWidget", "dojo/domReady!"],

function (parser, dom, MyWidget) {
    console.log(arguments);
    parser.parse().then(function () {
        var linkTypes = ['information', 'news link', 'other'];
        linkTypes.forEach(function (linkType, i) {
            var entry = {
                link: 'hello' + (i + 1),
                linkType: linkType,
                linkHref: "https://www.google.co.uk/search?q=" + linkType
            };
            new MyWidget(entry, dom.byId("myWidget" + (i + 1)));
        });
    });
}); 
```

定义小部件的代码：

```
define("MyWidget", [
    "dojo/_base/declare", "dojo/dom-class", "dojo/dom-attr", "dojo/query",
    "dijit/_WidgetBase", "dijit/_TemplatedMixin", "dojo/NodeList-dom"],

function (declare, domClass, domAttr, query, _WidgetBase, _TemplatedMixin) {
    var template = [
        '<div>',
        '<a data-dojo-attach-point="linkNode"></a>',
        '</div>'];
    return declare("MyWidget", [_WidgetBase, _TemplatedMixin], {
        templateString: template.join("\n"),
        constructor: function (params, srcNodeRef) {
            console.log("creating widget with params " + dojo.toJson(params) +
                " on node " + srcNodeRef);
        },
        postCreate: function () {
            console.log(arguments);
            this.inherited(arguments);
            this._setLinkClass();
        },
        // private methods
        _setLinkClass: function () {
            var linkClass = this._calculateLinkClass();
            console.log(linkClass, this.linkNode);
            if (linkClass != "") {
                query(this.linkNode).addClass(linkClass);
            }
        },
        _calculateLinkClass: function () {
            var linkClass = "";
            if ('information' === this.linkType) linkClass = 'info';
            if ('news link' === this.linkType) linkClass = 'news';
            return linkClass;
        },
        // Attributes
        link: "empty",
        _setLinkAttr: {
            node: "linkNode",
            type: "innerHTML"
        },
        linkHref: "#",
        _setLinkHrefAttr: function (href) {
            domAttr.set(this.linkNode, "href", href);
        }
    });
}); 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/js1Hg.png)

# powershell - DPM - 用于获取可用于备份的文件列表的 Powershell 脚本

> ID：16220714
> 
> 赞同：2
> 
> 时间：2013-04-25T17:06:24.920
> 
> 标签：powershell, dpm

我正在使用 DPM powershell 脚本来获取特定目录中可用于备份的文件/文件夹列表。更准确地说，我需要获取目录 D:\inetpub\vhosts\ 下的文件夹列表（即所有虚拟主机）。我一直在尝试使用 DPM powershell cmdlet 编写脚本，这就是我想出的。

```
$searchpath = 'D:\inetpub\vhosts'
$so=New-SearchOption -FromRecoveryPoint $today -ToRecoveryPoint $tomorrow -SearchDetail     filesfolders -SearchType contains -Location  $searchpath -SearchString  "*" -ErrorAction SilentlyContinue

$ri=Get-RecoverableItem -Datasource $datasource -SearchOption $so  -ErrorAction SilentlyContinue
foreach($file in $ri)
{
    echo $file.userFriendlyName
} 
```

但我无法获得所有目录。经过一番研究，我发现 New-SearchOption 最多可以返回 250 次搜索。在我的使用中，文件夹的数量最少为 1500。有没有办法获取所有文件。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T16:46:31.687

您是否尝试过使用管道。cmdlet 中可能有内置的分页功能，只能使用管道使用。试试下面的代码：

```
$searchpath = 'D:\inetpub\vhosts'

New-SearchOption -FromRecoveryPoint $today -ToRecoveryPoint $tomorrow -SearchDetail filesfolders -SearchType contains -Location  $searchpath -SearchString  "*" -ErrorAction SilentlyContinue |

    Get-RecoverableItem -Datasource $datasource -ErrorAction SilentlyContinue | For-EachObject { 

        $_.userFriendlyName
} 
```

# php - 将下拉列表中的值从一个 php 传递到另一个

> ID：16220721
> 
> 赞同：0
> 
> 时间：2013-04-25T17:06:41.607
> 
> 标签：php, html, mysql, drop-down-menu

我有

1.  从 MySQL 表填充的下拉列表。
2.  一个按钮。
3.  另一个php页面

我需要做什么：

1.  单击按钮时，将从下拉列表中选择的值作为变量传递到第二个 php 页面。

2.  将该变量传递到第二个 php 页面上的 mysql 查询中。例如：$result = mysql_query("Select * from table where name like "$drop_down_value");

我是 php 新手，请原谅我的天真。

这是我获取下拉列表值的代码：

```
function dropdown_query()
{
mysql_connect("localhost","root","root") or die("Failed to connect with database!!!!");
mysql_select_db("student_test") or die("cannot select DB");
$result = mysql_query("Select * from marks");
if($result=== FALSE){
die(mysql_error());
}
while($r=mysql_fetch_array($result))
{
echo '<option value="' .$r['marks'] . '">' . $r['marks'] . '</option>';

} 
```

这是我的 HTML 部分：

```
select name="dropdown" onchange="somefunc()">
<option value="">Select...</option>
<?php dropdown_query()?>
</select> 
```

假设我在另一个 php 上使用了类似的查询。但是会使用在该页面上选择的值作为该查询中的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:19:13.073

您的 page1 将有一个类似于

```
<form action="page2.php" method="post">
 <p>Name: <input type="text" name="name" /></p>
 <p><input type="submit" /></p>
</form> 
```

在 page2.php 中，您可以执行以下操作

```
$name = $_POST['name'];
$sql  = "SELECT * FROM table WHERE name LIKE '$name'";
... 
```

（但请确保在 page2.php 上使用之前清除用户输入！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:25:13.657

您将需要 javascript 来执行此操作。页面已经完成加载。页面加载完成后，php 脚本将无法工作。试试 jquery, ez 来使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:12:23.487

通过使用 POST 方法将下拉列表包装在表单中，您可以将值发送到下一页并通过`$_POST['your_field_name']`. 请参阅[文档](http://php.net/manual/en/reserved.variables.post.php)。

# c# - 关于 switch 表达式的错误（必须是 bool、char、string 等）

> ID：16220725
> 
> 赞同：0
> 
> 时间：2013-04-25T17:06:56.120
> 
> 标签：c#, visual-studio, .net-4.0, switch-statement

我正在为我的程序添加语音控制功能。我的代码有错误，我似乎无法摆脱。语音控制将允许用户在不使用鼠标或键盘的情况下控制程序的各个方面。

目前，我的代码包括：

```
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Drawing.Text;
using System.Drawing.Printing;
using System.Diagnostics;
using System.Linq;
using System.Reflection;
using FontCombo;
using System.Speech.Recognition;
using System.Speech.Recognition.SrgsGrammar;
using Microsoft.VisualBasic;

if (voctrl.Checked == true)
        {
            vcstat.Text = "Voice Control Enabled";
            recognizer = new SpeechRecognizer();
            recognizer.SpeechDetected += recognizer_SpeechDetected;
            recognizer.SpeechRecognitionRejected += recognizer_SpeechRecognitionRejected;
            recognizer.SpeechRecognized += recognizer_SpeechRecognized;
            GrammarBuilder grammar = new GrammarBuilder();
            grammar.Append(new Choices("Cut", "Copy", "Paste", "Select All", "Print", "Deselect All", "Delete", "Save", "Save As", "Open", "New", "Close"));
            recognizer.LoadGrammar(new Grammar(grammar));
        }
        else
        {
            vcstat.Text = "Voice Control Disabled";
        }

private void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {
        if (voctrl.Checked == true)
        {
            switch (e.Result.Text.ToUpper) //This is the error according to Visual Studio
            {
                case
                "Cut":
                    Clipboard.SetText(richTextBoxPrintCtrl1.SelectedRtf, TextDataFormat.Rtf);
                    richTextBoxPrintCtrl1.SelectedRtf = "";
                    break; // etc. 
```

我曾尝试在互联网上搜索解决方案，但似乎找不到与此代码一起使用的解决方案。我究竟做错了什么？如果我很愚蠢，我很抱歉，但我是 C# 和一般编程的新手。

错误如下： 错误4 switch表达式或case标签必须是bool、char、string、integral、enum或对应的可空类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:10:09.510

`ToUpper`应该是一个方法`ToUpper()`，你缺少括号

# c++ - 如何在 C++ 中创建具有非标准顺序的整数集？

> ID：16220726
> 
> 赞同：1
> 
> 时间：2013-04-25T17:07:00.477
> 
> 标签：c++, comparator, c++03, stdset

在 C++03 中，我想创建一个 std::set 迭代时，一个整数首先出现，之后，我不在乎什么顺序，但我需要一个顺序来确保没有重复放。例如，如果我有一组年份，并且在迭代时我希望在所有其他年份之前处理 2010 年。

```
std::set<int> years;

// I do not know the set of years up front, so cannot just make a vector, plus
// there could potentially be duplicates of the same year inserted more than
// once, but it should only appear once in the resultant set.
years.insert(2000);
years.insert(2001);
years.insert(2010);
years.insert(2011);
years.insert(2013);

for (std::set<int>::iterator itr = years.begin(); itr != years.end(); ++itr) {
   process_year(*itr);
} 
```

基本上，我需要提供一个比较器，在运行时已知的某个年份（例如 2010 年）与所有其他年份相比要少，但剩余年份是有序的，但没有任何必要的顺序，只是为了确保没有重复放。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T17:10:50.650

```
struct Comparer
{
    int val;
    Comparer(int v):val(v) {}
    bool operator()(int lhs, int rhs) const {
        if (rhs == val) return false;
        if (lhs == val) return true;
        return lhs < rhs;
    }
}; 
```

要基于以下命令创建`std::set`该订单的实例`Comparer`：

```
std::set<int, Comparer> instance( Comparer(2010) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:12:10.960

```
struct my_compare {
    my_compare(int y) : allw_less(y) {}
    bool operator() (const int& lhs, const int& rhs) const{
        if(rhs == allw_less)
           return false;
        if(lhs == allw_less)
           return true;
        else
            return lhs < rhs;
    }
private:
    int allw_less; 
};

typedef std::set<int, my_compare> setType;
setType years(my_compare(2010)); 
```

# makefile - Makefile 中的特殊情况模式规则

> ID：16220728
> 
> 赞同：0
> 
> 时间：2013-04-25T17:07:10.190
> 
> 标签：makefile, rule

我对具有给定扩展名的文件有一个通用规则，但我想为具有前缀的文件添加特殊情况。我试过这个：

```
special-%.dat: special-%.raw
    echo "Running rule 1"

%.dat:
    echo "Running rule 2" 
```

但是当我运行时`make special-1.dat`，它会忽略第一条规则并运行第二条。切换规则的顺序没有区别。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:41:57.663

文件是否`special-1.raw`存在？如果该文件不存在（并且您没有可以创建它的规则）make 将永远不会选择此规则，因为先决条件不可用。这本身并不是一个错误：只有当 make 找不到可以构建此目标的规则时，它才会失败。

运行`make -d`将准确地向您展示 make 如何递归地考虑每个目标及其先决条件。

# python - 将属性插入到 XML 文件中的特定节点

> ID：16220729
> 
> 赞同：1
> 
> 时间：2013-04-25T17:07:17.277
> 
> 标签：python, xml, linux

我有一个具有以下架构的 XML：

```
<?xml version="1.0"?>
<TagA attr1="abs" attrB="mdf">
  <TagB>
    <TagC attr3="g12dg" attr4="fgf">
      <TagD attr5="dgs" attr6="furu" />
    </TagC>
    <TagC attr3="fh5yg" attr4="ergf">
      <TagD attr5="dgs" attr6="tdru" />
      <TagD attr5="oko" attr6="tsas" />
    </TagC>
  </TagB>
</TagA> 
```

attr3 对于每个节点 TagC 都是唯一的。

我需要为每个节点TagC，在命令行上执行一些操作OP1，然后返回并插入一个属性attr7（其值= OP1 的输出）到同一个节点TagC。

我正在尝试在 Ubuntu 上使用 Python 来实现这一点。

# google-chrome-extension - 为什么通过扩展开关帐户重新加载谷歌浏览器标签？

> ID：16220731
> 
> 赞同：0
> 
> 时间：2013-04-25T17:07:21.870
> 
> 标签：google-chrome-extension

我有以下说明性扩展，如果用户访问“www.ru”，它将终止选项卡进程并重新加载页面：

`manifest.json`

```
{
  "manifest_version" : 2,
  "name" : "test extension",
  "version" : "1.0.0",
  "permissions" : [ "tabs", "experimental" ],
  "background" : { "scripts" : [ "extension.js" ], "persistent" : true }
} 
```

`extension.js`

```
function reload() {
    chrome.tabs.query( {}, function( tabs ) {
        for( var i = 0; i < tabs.length; i ++ ) {
            if( tabs[ i ].url.match( /www\.ru/ ) ) {
                window.setTimeout( function() {
                    chrome.experimental.processes.getProcessIdForTab( tabs[ i ].id, function( id ) {
                        chrome.experimental.processes.terminate( id );
                    })
                }, 5000);
                window.setTimeout( function() {
                    chrome.tabs.reload( tabs[ i ].id );
                }, 10000);
                return;
            }
        }
        window.setTimeout( reload, 1000 );
    });
}
window.setTimeout( reload, 1000 ); 
```

我启动最新的 google chrome（26.0.1410.64 m 32 位，用于几分钟前从 chrome.google.com 下载的 windows），创建第二个 chrome 用户，切换到该用户，安装扩展程序，打开“www.ru”，切换到第一个用户- 10 秒后，chrome 强行将我切换回第二个用户，以演示标签重新加载！

只有 process kill + tab reload 会产生这种奇怪的行为（它们之间的暂停可以是任意长度）。如果终止或重新加载部分被注释掉，则执行相应的操作，但用户帐户被更新。

是我面临的一些 chrome 错误还是记录在案的行为？是否可以防止强制切换帐户？对我来说，在某些事情中被打断只是为了显示网络爬虫帐户上的某些网络爬虫扩展发现没有响应的选项卡并重新加载它，这让我非常不愉快:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T01:02:31.663

地狱之眼，这个答案是有根据的猜测。Chrome 可能会使用启发式方法来确定标签在加载或重新加载期间是否应成为活动标签。启发式可能是选项卡进程的第一次加载/重新加载应使其成为活动选项卡，除非该选项卡是使用 createProperties active: false 显式创建的。如果您认为新选项卡的默认活动状态是有意义的，并且了解在进程创建时（包括终止/重新加载后的进程创建），该选项卡可能设置为该默认值。

如果这是真的，那么不要在终止其进程后重新加载选项卡，也许您可​​以这样做：

1.  记住即将被杀死的标签的 URL。
2.  终止进程并关闭选项卡或仅关闭选项卡。
3.  chrome.tabs.create({url: savedUrl, active: false})。

这可能会产生一些其他不良副作用，例如丢失会话 cookie。但是在不了解您的用例的情况下，这似乎是您尝试做的等效方法。

顺便说一句，您的恢复过程可能会更快。您可以在终止函数的回调中链接重新加载（或创建）操作，而不是设置 5 秒和 10 秒的超时来序列化 kill/reload 操作。然后保证在终止完成后调用它，并且不会浪费挂钟时间等待额外的五秒钟。

# r - 如何在 R 中将 2D 数据帧“展平”或“折叠”成 1D 数据帧？

> ID：16220732
> 
> 赞同：6
> 
> 时间：2013-04-25T17:07:25.540
> 
> 标签：r, 2d, dataframe, data.table

我有一个二维表，在 R 中的 data.frame 中有距离（从 csv 导入）：

```
 CP000036   CP001063      CP001368
CP000036      0           a            b
CP001063      a           0            c
CP001368      b           c            0 
```

我想“压平”它。我在第一列中有一个轴的值​​，在第二列中有另一个轴的值​​，然后在第三列中有距离：

```
Genome1      Genome2       Dist
CP000036     CP001063       a
CP000036     CP001368       b
CP001063     CP001368       c 
```

以上是理想的，但是重复这样输入矩阵中的每个单元格都有自己的行是完全可以的：

```
Genome1      Genome2       Dist
CP000036     CP000036       0
CP000036     CP001063       a
CP000036     CP001368       b
CP001063     CP000036       a
CP001063     CP001063       0
CP001063     CP001368       c
CP001368     CP000036       b
CP001368     CP001063       c
CP001368     CP001368       0 
```

这是一个示例 3x3 矩阵，但我的数据集 I 要大得多（大约 2000x2000）。我会在 Excel 中执行此操作，但输出需要约 300 万行，而 Excel 的最大值为约 100 万行。

这个问题非常类似于“如何将 2D Excel 表格“展平”或“折叠”成 1D？[1](https://stackoverflow.com/questions/687470/how-to-flatten-or-collapse-a-2d-excel-table-into-1d)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:54:00.307

所以这是使用`melt`包中的一种解决方案`reshape2`：

```
dm <- 
  data.frame( CP000036 = c( "0", "a", "b" ),
              CP001063 = c( "a", "0", "c" ),
              CP001368 = c( "b", "c", "0" ),
              stringsAsFactors = FALSE,
              row.names = c( "CP000036", "CP001063", "CP001368" ) )

# assuming the distance follows a metric we avoid everything below and on the diagonal
dm[ lower.tri( dm, diag = TRUE ) ]  <- NA
dm$Genome1 <- rownames( dm )

# finally melt and avoid the entries below the diagonal with na.rm = TRUE
library(reshape2) 
dm.molten <- melt( dm, na.rm= TRUE, id.vars="Genome1",
                   value.name="Dist", variable.name="Genome2" )

print( dm.molten )
   Genome1  Genome2 Dist
4 CP000036 CP001063    a
7 CP000036 CP001368    b
8 CP001063 CP001368    c 
```

可能有更多高性能的解决方案，但我喜欢这个，因为它简单明了。

# javascript - Javascript数组转换

> ID：16220735
> 
> 赞同：0
> 
> 时间：2013-04-25T17:07:34.640
> 
> 标签：javascript, jquery, arrays

我想知道我怎么能把这个：

```
var data = [  
     {id:1,option1:'short',option2:'red',option3:'gold'},  
     {id:2,option1:'short',option2:'red',option3:'silver'},   
     {id:3,option1:'short',option2:'blue',option3:'gold'},  
     {id:4,option1:'short',option2:'blue',option3:'silver'},  
     {id:5,option1:'long',option2:'red',option3:'gold'},  
     {id:6,option1:'long',option2:'red',option3:'silver'},   
     {id:7,option1:'long',option2:'blue',option3:'gold'},  
     {id:8,option1:'long',option2:'blue',option3:'silver'}] 
```

使用 Jquery 转换成这样的格式。

```
var new_data = {
            short:{
              red:{gold:1,silver:2},
              blue:{gold:3,silver:4}
            },
            long:{
              red:{gold:5,silver:6},
              blue:{gold:7,silver:8}
               }
       } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:16:32.857

这比你想象的要容易。尝试这个：

```
function helper(obj,tree,value) {
    for( var i=0, l=tree.length; i<l-1; i++) {
        obj[tree[i]] = obj[tree[i]] || {};
        obj = obj[tree[i]];
    }
    obj[tree[i]] = value;
}
var new_data = {}, l = data.length, i;
for( i=0; i<l; i++) {
    helper(new_data,[data[i].option1,data[i].option2,data[i].option3],data[i].id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:13:32.180

这个普通的 JS 会做到这一点：

```
var data = […];
var new_data = {};
for (var i=0; i<data.length; i++) {
    var o = new_data;
    for (var j=1; j<3; j++) {
        var prop = data[i]["option"+j];
        o = o[prop] || (o[prop] = {});
    }
    o[data[i]["option"+j]] = data[i].id;
} 
```

但是首先使用嵌套模式看起来更容易吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:33:43.063

你可以`.reduce()`这样使用：

```
var new_data = data.reduce(function(res, obj) {
    if (!res[obj.option1])
        res[obj.option1] = {};
    if (!res[obj.option1][obj.option2])
        res[obj.option1][obj.option2] = {};

    res[obj.option1][obj.option2][obj.option3] = obj.id;
    return res;
}, {}); 
```

* * *

或像这样：

```
var new_data = data.reduce(function(res, obj) {
    var o = res;
    for (var i = 1; i < 3; i++)
        o = (o[obj["option" + i]] = o[obj["option" + i]] || {});

    o[obj.option3] = obj.id;
    return res;
}, {}); 
```

# c# - 使用 Free 3 of 9 字体生成条形码

> ID：16220739
> 
> 赞同：5
> 
> 时间：2013-04-25T17:07:43.877
> 
> 标签：c#, barcode

```
public Bitmap CreateBarcode(string data)
{
    data = "55536"; 
    string barcodeData = "*" + data + "*";
    Bitmap barcode = new Bitmap(1, 1);
    Font threeOfNine = new Font("Free 3 of 9 Extended", 31, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point);

    Font arial = new Font("Arial", 13,
              System.Drawing.FontStyle.Regular,
              System.Drawing.GraphicsUnit.Point);

    Graphics graphics = Graphics.FromImage(barcode);
    SizeF dataSize = graphics.MeasureString(barcodeData, threeOfNine);
    dataSize.Height = 70;

    barcode = new Bitmap(barcode, dataSize.ToSize());
    graphics = Graphics.FromImage(barcode);

    graphics.Clear(Color.White);
    graphics.TextRenderingHint = TextRenderingHint.SingleBitPerPixel;

    graphics.DrawString(barcodeData, threeOfNine, new SolidBrush(Color.Black), 0, 0);

    graphics.DrawString(data, arial, new SolidBrush(Color.Black), 50, 40);

    graphics.Flush();

    threeOfNine.Dispose();
    graphics.Dispose();

    return barcode;
} 
```

我使用上述代码生成条形码，但我的扫描仪无法读取生成的条形码（对于 55536）。但是，如果我将数据值切换为“1111”或“2222”，则可以很好地读取条形码。所以我认为这不是扫描仪问题，任何人都知道，该代码有什么问题？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T06:05:05.087

如果您只使用数字，您可以尝试 3 of 9 基本字体（没有扩展）。从 Write 打印相同的条形码并比较它们，以查看您的解决方案是构建完整的条形码还是被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T03:20:52.803

1.如果您使用由“*”停止和开始字符包围的支持字符，则问题可能出在条码大小或打印分辨率上。2.确保每个字符的大小是相同的字体大小。混合尺寸不起作用。3.当尝试改变条的颜色时，记住颜色越深越好。粉彩不太好。红色是禁忌。这是给您的参考：[asp.net 条形码生成器使用 3 of 9 font](http://www.onbarcode.com/csharp/code-39-generator.html)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-01T08:59:19.743

尝试前缀和后缀：

你为什么要在

```
public Bitmap CreateBarcode(string data)
{
    data="55536"; //dont pass the data from here pass it from outside method for eg. call it   from the        button click or whatever control you are using.
} 
```

# c - c中的这个语句是什么意思？

> ID：16220744
> 
> 赞同：2
> 
> 时间：2013-04-25T17:07:53.403
> 
> 标签：c, pointers, struct, typedef

```
struct abc
{
//some members
}arrayOf[10];
struct def
{
//some data memebers
}obj;

typedef void (*abc) (obj) 
```

我不确定这句话`typedef void (*abc) (obj)`意味着什么。请考虑到我是新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:17:51.230

即使忽略缺少的分号，它也没有任何意义；这是一个错误。

如果`obj`是一个类型名称，它将定义`abc`为 type 的别名`void (*)(obj)`，即，作为指向一个函数的指针，该函数接受一个 type 的参数`obj`并返回`void`。

但由于`obj`是对象名称，而不是类型名称，这实际上并不是它的意思。

当我用 gcc 编译它时，我得到一个警告：

```
warning: parameter names (without types) in function declaration 
```

当我用 编译时`-pedantic-errors`，警告变成了致命错误。

旧式（非原型）函数*定义*可以合法地为参数指定名称，但不能指定类型：

```
void old_style_func(obj)
/* obj is implicitly of type int */
{
} 
```

*但这种形式对函数声明*无效。在声明中，括号之间的单个标识符必须是类型名称，而不是参数名称——这使得声明成为原型。

gcc 的错误消息暗示它试图将它解释为好像它是旧式定义的开始，然后决定它是无效的，因为它只是一个声明。

底线是您应该密切注意编译器警告。

我们可以推测其*意图*。也许`obj`是一个类型名称，而这个：

```
struct def
{
    //some data memebers
}obj; 
```

应该是：

```
typedef struct def
{
    // some data members
} obj; 
```

或者可能不小心省略了类型名称，最后一行应该是：

```
typedef void (*abc) (struct def obj); 
```

尽管在这种情况下，该名称`obj`被两次用于不同的目的（合法，但令人困惑）。但是如果没有更多的上下文，就不可能确定如何“修复”它。

这段代码是从哪里来的？你*确定*你已经向我们展示了确切的代码吗？当你试图编译它时发生了什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:10:33.257

它将类型定义`abc`为一个指向函数的指针，该函数接受一个被调用类型的参数`int`并且`obj`不返回任何内容 ( `void`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:15:35.533

它为指向函数的指针类型引入了一个新名称`abc`，该函数接受`obj`并返回`void`。函数指针的类型总是在声明中以这种迂回的方式指定：

> *返回类型* `(*` *名称被声明的*`)(`*参数列表*`)`

顺便说一句，`*`声明中的 可能是不必要的。函数类型总是在你需要的时候神奇地变成指向函数的类型（就像数组类型神奇地变成指向元素的类型），你可以直接使用函数类型（而不是指针指向-函数类型）来声明一个新函数。

正如其他人指出的那样，您提供的上下文没有名为的类型`obj`，只有一个名为的对象`obj`。如果此代码编译，则必须在其他`obj`地方定义另一种类型，在您没有给出的代码中。

# java - 在单个 GWT Presenter 中显示两个 UI.XML 的内容

> ID：16220746
> 
> 赞同：1
> 
> 时间：2013-04-25T17:07:58.483
> 
> 标签：java, xml, gwt, uibinder, gwtp

我正在使用带有 UIbinder 的 GWTP。MyPresenter.java 正确表示 MyPresenter.ui.xml 上的信息。但是，我需要在 MyPresenter.java 中显示 MyClass.ui.xml 的内容，其值来自 MyClass.java（不是演示者）。有没有办法做到这一点？

**MyPresenter.ui.xml**

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
    ui:generateKeys='com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator'
    ui:generateLocales='default' xmlns:p1="urn:import:com.google.gwt.user.cellview.client">
    <g:HTMLPanel>
        <g:Label ui:field = "myDiagramsText" styleName="{res.style.mydiagramsLabel}"/>
    </g:HTMLPanel>
</ui:UiBinder> 
```

**MyClass.ui.xml**

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'>
        <g:HTMLPanel> <div ui:field='Panel'>HOLA HOLAHOLAHOLA</div> </g:HTMLPanel>
</ui:UiBinder> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:28:57.123

我不知道GWTP。通常在 MVP 模式中，视图和演示者具有一对一的关系。但是在 mvc 控制器和视图中有一对多的关系。就设计而言，一位演示者不可能有两种观点。

有一些解决方法：

1-您可以创建一个由这两个视图和一个复合演示者组成的复合视图

2-在大型应用程序中有一些封装 UI 流的流控制器。此控制器获取事件并更新相应的 UI。

这通常是我在自己的应用程序中所做的。

# jquery - 关闭slideToggle时如何重置选定的单选按钮？

> ID：16220747
> 
> 赞同：0
> 
> 时间：2013-04-25T17:08:06.660
> 
> 标签：jquery, radio-button, reset, slidetoggle

我有一个简单的 slideToggle 设置，可以在页面上打开一个 div。一些 div 在其中进行了自检。当 div 关闭时，我无法弄清楚如何重置单选按钮。这是jQuery：

```
$("h2.titleTrigger").click(function(e){
e.preventDefault();

//TOGGLE OPEN/CLOSE THE DIV
$(this).toggleClass("active").next().slideToggle("fast");
return false;
});

//self test

$('input:radio').bind('change',function(e){
e.preventDefault();
var parentId = $(this).parents('.selfTest').attr('id');
$('#'+parentId+' .selfTestWrong').addClass('answerShown');
$('#'+parentId+' .selfTestAnswer').slideDown(300);
}); 
```

看到它在这里工作：http: [//jsfiddle.net/3XBgu/](http://jsfiddle.net/3XBgu/)

当用户关闭 slideToggle 时，将自检重置为未选择状态的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:14:28.167

你可以这样做：

```
$("h2.titleTrigger").click(function (e) {
    e.preventDefault();

    //TOGGLE OPEN/CLOSE THE DIV
    $(this).toggleClass("active").next().slideToggle("fast");

    // Re-set all the radio buttons
    $('input:radio').prop('checked', false);

    // Re-set all the labels class
    $('.selfTestWrong').removeClass('answerShown');
    return false;
}); 
```

[**小提琴**](http://jsfiddle.net/3XBgu/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:18:21.763

这解决了你的问题：

```
//TOGGLE OPEN/CLOSE THE DIV
    $(this).toggleClass("active").next().slideToggle("fast");
    $(".hey").each(function(){
        this.checked = false; 
        $('.selfTestWrong').removeClass('answerShown');
        $('.selfTestAnswer').hide();
    });
return false;
}); 
```

（为每个输入添加了 class="hey"）

[http://jsfiddle.net/3XBgu/2/](http://jsfiddle.net/3XBgu/2/)

# jquery - 标题中的弹出菜单被推回页面内容后面

> ID：16220749
> 
> 赞同：0
> 
> 时间：2013-04-25T17:08:16.643
> 
> 标签：jquery, css, jquery-mobile, popup

我在标题中有一个菜单按钮。该页面由 ajax 请求填充。单击菜单按钮，它会在屏幕上出现一秒钟，然后被推回列表视图后面。我无法在任何地方找到解决方案。

```
<!DOCTYPE HTML>
<HTML>
  <head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <script type="text/javascript" charset="utf-8" src="js/cordova-2.6.0.js"></script>
    <link rel="stylesheet" href="./style/jquery.mobile-1.3.1.min.css" />
    <script src="./js/jquery-2.0.0.min.js"></script>
    <script src="./js/jquery.mobile-1.3.1.min.js"></script>
  </head>
  <body>
    <div data-role="page" id="home">
      <div data-theme="b" data-role="header">
        <a data-inline="true" data-transition="pop" data-rel="popup" href="#popupMenu" data-icon="gear" data-iconpos="notext" class="ui-btn-right"></a>
    </div>
   <!--Menu-->
     <div data-role="popup" id="popupMenu" data-theme="d">
       <ul data-role="listview" data-inset="true" style="min-width:200px;" data-theme="d">
         <li data-icon="false"><a href="#">Share</a></li>
         <li data-icon="false"><a href="mailto:" data-inline="true" data-transition="pop">Contact</a></li>
         <li data-icon="false"><a href="#">Оцени Нас</a></li>
       </ul>
     </div>
   <!--Menu-->
<div data-role="content">
  <ul>
    //dynamically populated data here
  </u>
</div>
<script src="js/getmainnews.js"></script>
</div>
</body>
</html> 
```

同样的事情发生在另一个页面上，弹出窗口被标题截断了一点。我不确定是否需要向您展示 JS 文件...这只是一个 ajax 调用 on('pageinit'...) 并在最后刷新列表视图。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:11:35.483

尝试在菜单中添加 z-index。

```
 element {
   position: relative;
   z-index: 9999; 
 } 
```

# django - 使用带有 django-endless-pagination 的过滤器

> ID：16220750
> 
> 赞同：2
> 
> 时间：2013-04-25T17:08:21.723
> 
> 标签：django, django-endless-pagination, jquery-filter

我正在使用 Django endles-pagination 以无限滚动的方式加载页面。我还有一些过滤器可以根据标准过滤数据（例如，根据价格进行价格滑块过滤）。现在当页面加载时，过滤器现在只从加载的页面中过滤，尽管我希望它从所有已经或将要加载的页面中过滤它。有没有办法做到这一点（通过发出一些ajax请求或其他东西）？

对此的任何帮助都会很棒。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-04T16:53:59.093

要过滤数据，您必须`get_queryset()`在请求过滤查询的视图中重新定义方法。

例如，我请求模板中的当前语言以根据语言过滤博客文章：

```
class Blog(AjaxListView):
    context_object_name = "posts"
    template_name = 'cgapp/blog.html'
    page_template = 'cgapp/post_list.html'

def get_queryset(self):
    if self.request.LANGUAGE_CODE == 'en': #request value of the current language
        return News.objects.filter(language='en') #return filtered object if the current language is English
    else:
        return News.objects.filter(language='uk') 
```

要根据用户输入过滤查询集，您可以参考 POST 方法：

```
from app.forms import BlogFilterForm

class Blog(LoginRequiredMixin, AjaxListView):
    context_object_name = "posts"
    template_name = 'blog/blog.html'
    page_template = 'blog/post_list.html'
    success_url = '/blog'

    def get_queryset(self): # define queryset
        queryset = Post.objects.all() # default queryset
        if self.request.method == 'POST': # check if the request method is POST
            form = BlogFilterForm(self.request.POST) # define form
            if form.is_valid(): 
                name = form.cleaned_data['name'] # retrieve data from the form
                if name:
                    queryset = queryset.filter(name=name) # filter queryset
        else:
            queryset = queryset
        return queryset 

    def get_context_data(self, **kwargs):
        context = super(Blog, self).get_context_data(**kwargs)
        context['form'] = BlogFilterForm() # define context to render the form on GET method
        return context

    def post(self, request, *args, **kwargs): # define post method
        return super(Blog, self).get(request, args, kwargs) 
```

无休止的分页应该可以正常工作。

# android - 以编程方式在 TableRow 上居中 TextView

> ID：16220751
> 
> 赞同：2
> 
> 时间：2013-04-25T17:08:28.177
> 
> 标签：android, textview, center, tablelayout, tablerow

我正在尝试将 textview 居中在 tablerow 内，这本身就是在 tablelayout 内，但我想我遗漏了一些东西，因为 TextView 没有居中：s

这是我的方法：

```
private void insertClock() {

        TableLayout table = new TableLayout(this);
        table.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        table.setStretchAllColumns(true);

        TableRow tbRow = new TableRow(this);
        TableLayout.LayoutParams layoutRow = new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

        clock = new TextView(this);
        TableRow.LayoutParams layoutHistory = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);  

        clock.setLayoutParams(layoutHistory);
        clock.setText(calculateClockText());
        tbRow.setLayoutParams(layoutRow);
        table.addView(tbRow);
        clock.setGravity(Gravity.CENTER_HORIZONTAL);
        tbRow.addView(clock);

    } 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T17:47:15.340

Finnaly 成功了！这是解决方案：

```
private void insertClock(TableLayout table, String text) {

        TableRow tbRow = new TableRow(this);
        TableLayout.LayoutParams layoutRow = new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);

        tbRow.setLayoutParams(layoutRow);

        clock = new TextView(this);
        TableRow.LayoutParams layoutHistory = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);  
        clock.setLayoutParams(layoutHistory);
        clock.setText(text);

        clock.setGravity(Gravity.CENTER);
        tbRow.setGravity(Gravity.CENTER);
        tbRow.addView(clock);
        table.addView(tbRow);
    } 
```

# c# - 显示对象状态的列表

> ID：16220752
> 
> 赞同：0
> 
> 时间：2013-04-25T17:08:31.833
> 
> 标签：c#, list, iteration

当我打印我的列表（库存）时，它会多次打印相同的值，而不是正确迭代：

```
List<Coffee> inventory = new List<Coffee>();

        Console.Write("Enter q to quit or the whole data as a comma delimited string using the following format Name,D,C,D:minQ or R:roast ");
        string s = Console.ReadLine();
        string[] values = s.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

        // Loop
        while (!s.ToLower().Equals("q"))
        {
            string name = values[0];
            string demand = (values[1]);
            string cost = (values[2]);
            string min = values[3];

            float D = CheckDemand(demand);
            float C = CheckCost(cost);
            float M = CheckMin(min);

            Decaf decafCoffee = new Decaf(name, D, C, M);
                   inventory.Add(decafCoffee);

            Console.Write("\nEnter q to quit or the whole data as a comma delimited string using the following format Name,D,C,D:minQ or R:roast: ");
            s = Console.ReadLine();
        }   // End loop

        // Display values
        Console.WriteLine("\nName \t   C ($)      Demand \t  Detail   Q(lbs.)     TAC ($)      T(weeks) ");
        for (int j = 0; j < inventory.Count; j++)
        {
            Console.WriteLine("{0}", inventory[j].toString());
        } 
```

任何想法为什么会这样？我需要实现某个接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:13:37.070

`string[]`使用while 循环内的值移动行：

```
 string s = Console.ReadLine();
 // Loop
 while (!s.ToLower().Equals("q"))
 {
      string[] values = s.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
      ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:11:23.530

当你调用`ToString()`一个对象时，你通常只会得到类型的完全限定名。这取决于您希望看到打印的内容，但您应该尝试显示 Coffee 类的成员。例如：

```
foreach(Coffee c in inventory)
{
   Console.WriteLine(c.Name);
} 
```

我继续将您从`for`循环切换到`foreach`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:14:05.827

你需要把

```
string[] values = s.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

在你的 while 循环内。

# arrays - 如何在 scala 中最小化这些类似的 if 语句？

> ID：16220753
> 
> 赞同：1
> 
> 时间：2013-04-25T17:08:37.283
> 
> 标签：arrays, scala, loops, if-statement

我在scala中有一个数组：

```
 var walls: Array[LineSprite] = new Array[LineSprite](26) 
```

然后我有这些 if 语句：

```
if(curPlayer.intersects(walls(0))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(1))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(2))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(3))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(4))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(5))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(6))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(7))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(8))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(9))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(10))) {
handleCollision
updateLives(-1)
}
if(curPlayer.intersects(walls(11))) {
handleCollision
updateLives(-1)
} 
```

...

我如何才能使数组中的所有项都只有一个 if 语句，而不是为数组中调用 handleCollision 和 updateLives(-1) 的每个项目提供一个单独的 if 语句？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:14:56.043

我认为这应该可以解决您的问题

```
walls.foreach(w => if (curPlayer.intersects(w)) {
  handleCollision
  updateLives(-1)
}) 
```

我你想要你也可以使用带有下划线的更短的解决方案

```
walls.foreach(if (curPlayer.intersects(_)) {...}) 
```

除了更简洁的语法，它不会给你任何东西

# ios - 尝试删除我的 Xcode 项目中的文件时出现 Git 错误

> ID：16220759
> 
> 赞同：1
> 
> 时间：2013-04-25T17:08:48.063
> 
> 标签：ios, objective-c, git

尝试删除项目中的视图控制器时出现了我的问题。我在左侧的 Project Navigator 中选择它们，然后按 Delete。我选择“to垃圾”选项，它返回一个错误：

> 如果当前没有其他 git 进程在运行，这可能意味着之前该存储库中的 git 进程崩溃了。确保没有其他 git 进程正在运行并手动删除文件以继续。

据我所知，我什至没有我目前遇到问题的项目的 git repo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:26:16.953

`.git/index.lock`也许出于某种原因有一个文件。[如何修复失败的 git 提交？](https://stackoverflow.com/questions/8198966/how-do-i-fix-a-failed-git-commit)

要查找并删除该锁定文件，您可以转到 Applications 或 Launchpad 并运行名为 Terminal 的应用程序，与 Finder 不同，它不会避免向您显示名称以句点开头的文件和文件夹。然后键入`ls .git/index.lock`并按 Enter 确认文件存在。如果打印出来`.git/index.lock`，您就知道该文件在那里。要删除它，请键入`rm .git/index.lock`并按 Enter。

# php - 通过 php 更新数据库中存在的数据

> ID：16220760
> 
> 赞同：0
> 
> 时间：2013-04-25T17:08:50.817
> 
> 标签：php, mysql, database

在数据库“test”中创建了一个表“test_mysql”我有 3 个文件 1.list_records.php 2.update.php 3.update_ac.php

数据库代码

使用 phpMyAdmin 创建数据库和表

```
CREATE TABLE `test_mysql` (
`id` int(4) NOT NULL auto_increment,
`name` varchar(65) NOT NULL default '',
`lastname` varchar(65) NOT NULL default '',
`email` varchar(65) NOT NULL default '',
PRIMARY KEY (`id`)
) TYPE=MyISAM AUTO_INCREMENT=7 ;
-- 
-- Dumping data for table `test_mysql`
--
INSERT INTO `test_mysql` VALUES (1, 'Billly', 'Blueton', 'bb5@phpeasystep.com');
INSERT INTO `test_mysql` VALUES (2, 'Jame', 'Campbell', 'jame@somewhere.com');
INSERT INTO `test_mysql` VALUES (3, 'Mark', 'Jackson', 'mark@phpeasystep.com');
INSERT INTO `test_mysql` VALUES (4, 'Linda', 'Travor', 'lin65@phpeasystep.com');
INSERT INTO `test_mysql` VALUES (5, 'Joey', 'Ford', 'fordloi@somewhere.com');
INSERT INTO `test_mysql` VALUES (6, 'Sidney', 'Gibson', 'gibson@phpeasystep.com'); 
```

* * *

list_records.php

```
<?php
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="test"; // Database name 
$tbl_name="test_mysql"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>
<table width="400" border="1" cellspacing="0" cellpadding="3">
<tr>
<td colspan="4"><strong>List data from mysql </strong> </td>
</tr>

<tr>
<td align="center"><strong>Name</strong></td>
<td align="center"><strong>Lastname</strong></td>
<td align="center"><strong>Email</strong></td>
<td align="center"><strong>Update</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td><?php echo $rows['name']; ?></td>
<td><?php echo $rows['lastname']; ?></td>
<td><?php echo $rows['email']; ?></td>

// link to update.php and send value of id 
<td align="center"><a href="update.php?id=<?php echo $rows['id']; ?>">update</a></td>
</tr>

<?php
}
?>

</table>
</td>
</tr>
</table>

<?php
mysql_close();
?> 
```

* * *

更新.php

```
<?php
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="test"; // Database name 
$tbl_name="test_mysql"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<form name="form1" method="post" action="update_ac.php">
<td>
<table width="100%" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>&nbsp;</td>
<td colspan="3"><strong>Update data in mysql</strong> </td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center"><strong>Name</strong></td>
<td align="center"><strong>Lastname</strong></td>
<td align="center"><strong>Email</strong></td>
</tr>
<tr>
<td>&nbsp;</td>
<td align="center">
<input name="name" type="text" id="name" value="<?php echo $rows['name']; ?>">
</td>
<td align="center">
<input name="lastname" type="text" id="lastname" value="<?php echo $rows['lastname']; ?>" size="15">
</td>
<td>
<input name="email" type="text" id="email" value="<?php echo $rows['email']; ?>" size="15">
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<input name="id" type="hidden" id="id" value="<?php echo $rows['id']; ?>">
</td>
<td align="center">
<input type="submit" name="Submit" value="Submit">
</td>
<td>&nbsp;</td>
</tr>
</table>
</td>
</form>
</tr>
</table>

<?php
// close connection 
mysql_close();
?> 
```

* * *

update_ac.php

```
<?php
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="test"; // Database name 
$tbl_name="test_mysql"; // Table name 
$id='id';
$name="name";
$lastname="lastname";
$email="email";

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// update data in mysql database 
$sql="UPDATE $tbl_name SET name='$name', lastname='$lastname', email='$email' WHERE id='$id'";
$result=mysql_query($sql);

// if successfully updated. 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='list_records.php'>View result</a>";
}

else {
echo "ERROR";
}

?> 
```

现在的问题是在应用所有这些代码之后我仍然无法更新任何行..请帮助我:(它成功显示更新但它没有更新任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:11:47.497

我有你的问题，它就在这里

```
$id='id'; 
```

不是给出数值，而是给出无效的字符，而是为您的查询提供正确的 id 值。

目前您的查询如下所示

```
$sql="UPDATE test_mysql SET name='name', lastname='lastname', email='email' WHERE id='id'"; 
```

在这里，您的 where 子句失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:40:10.037

update_ac.php

调整

```
$id=$_POST['id'];
$name=$_POST['name'];
$lastname=$_POST['lastname'];
$email=$_POST['email']; 
```

在 update.php 中也更好用 `$id=intval($_GET['id'])`；

# facebook-opengraph - 无法使用 Facebook 对象 API 创建非标准对象属性

> ID：16220761
> 
> 赞同：2
> 
> 时间：2013-04-25T17:08:52.443
> 
> 标签：facebook-opengraph, facebook-ios-sdk

我正在尝试使用 Facebook 对象 API 创建 Facebook 对象，然后列出它们。 [根据文档](https://developers.facebook.com/docs/opengraph/using-object-api/#creatinguser)，我们应该能够在“数据”字段中存储非标准对象属性，例如，食物对象的卡路里值，或山对象的海拔高度。

但是当我尝试创建对象时，我在对象浏览器、图形 api 浏览器或对象列表的响应中都看不到“数据”字段。

它是一个错误吗？

我如何创建对象（方法 1）：

```
NSMutableDictionary<FBOpenGraphObject> *object = [FBGraphObject openGraphObjectForPost];
object.provisionedForPost = YES;
object[@"type"] = @"mangasendalpha:Template";
object[@"title"] = @"another one!";
object[@"image"] = @"http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Enchiladas_suizas.jpg/800px-Enchiladas_suizas.jpg";
object[@"url"] = @"https://url.com";

NSDictionary *data = @{@"keyword":@"haha"};
object[@"data"] = data;

[FBRequestConnection startForPostOpenGraphObject:object
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                   if(error) {
                                       NSLog(@"Error: %@", error);
                                   } else {
                                       NSLog(@"Success %@", result);
                                       [self tryList];
                                   }
                               }]; 
```

创建一个对象（方法二）：

```
NSString *type = @"mangasendalpha:Template";
NSString *title = @"hei hei can you see the data?";
NSString *imageUri = @"http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Enchiladas_suizas.jpg/800px-Enchiladas_suizas.jpg";
NSString *url = @"http://www.url.com";
NSString *description = @"a new template description";
NSDictionary *objectProperties = @{@"keyword":@"hehe"};

FBRequestConnection *connection = [[FBRequestConnection alloc] init];
FBRequest *request = [FBRequest requestForPostOpenGraphObjectWithType:type title:title image:imageUri url:url description:description objectProperties:objectProperties];
[connection addRequest:request completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if(error)
    {
        LogError(@"%@",error);
    }
    else
    {
        Log(@"success:%@", result);
        [self tryList];
    }
}];
[connection start]; 
```

无论我如何创建对象，我都可以正确看到标题、图像等，除了应该显示“keywords = haha​​”的数据字段。

这是来自 graph api explorer 的响应示例：

```
 {
      "id": "106170429585804", 
      "url": "http://www.url.com/", 
      "type": "mangasendalpha:template", 
      "title": "hei hei can you see the data?", 
      "image": [
        {
          "url": "http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Enchiladas_suizas.jpg/800px-Enchiladas_suizas.jpg"
        }
      ], 
      "description": "a new template description", 
      "updated_time": "2013-04-25T16:55:48+0000", 
      "created_time": "2013-01-09T05:51:44+0000", 
      "application": {
        "id": "512497238785794", 
        "name": "MangaSendAlpha", 
        "url": "https://www.facebook.com/apps/application.php?id=512497238785794"
      }, 
      "is_scraped": false, 
      "post_action_id": 524865977555471
    } 
```

如果我尝试列出对象，明确说我想要 id、image 和 DATA：

```
- (void) tryList
{
NSString *path = [NSString stringWithFormat:@"/me/objects/mangasendalpha:Template?fields=id,image,data"];
NSDictionary *parameters = nil;
FBRequest *request = [FBRequest requestWithGraphPath:path parameters:parameters HTTPMethod:@"GET"];
[request startWithCompletionHandler:
 ^(FBRequestConnection *connection,
   NSDictionary<FBGraphObject> *response,
   NSError *error)
 {
     if (!error)
     {
         Log(@"response: %@", response);
     }
     else
     {
         Log(@"has error: %@", error);
     }
 }];
} 
```

这就是我将得到的：

```
data =     (
            {
        id = 106170429585804;
        image =             (
                            {
                url = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Enchiladas_suizas.jpg/800px-Enchiladas_suizas.jpg";
            }
        );
    },
            {
        id = 386877688092664;
        image =             (
                            {
                url = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Enchiladas_suizas.jpg/800px-Enchiladas_suizas.jpg";
            }
        );
    },... 
```

数据字段在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:17:43.123

哇。我只是想通了自己。您的自定义属性需要在 facebook 应用设置页面中进行预定义。

1.  转到developers.facebook.com/apps/您的应用
2.  在左侧，选择 Open Graph -> Types -> 选择您感兴趣的对象类型，
3.  您将看到一个对象属性列表。那里有一个神奇的“添加属性”按钮！

添加“自定义”属性后，对象 API 现在可以正确创建具有该属性的新对象。

# jquery - 使用 jQuery 创建任意数量的子字段

> ID：16220762
> 
> 赞同：0
> 
> 时间：2013-04-25T17:09:08.443
> 
> 标签：jquery

我正在尝试创建一个包含联系人的表单。可以有任意数量的联系人，每个联系人可以有任意数量的电子邮件和电话号码。我正在使用 jQuery 创建其他字段并且一切正常，直到您添加新联系人并尝试向其添加任意子字段。我不知道如何将它们添加到表单中，以便它们与调用该函数的联系人块相关联。

这是我尝试使用的基本 HTML，已简化以显示问题。

```
<div class="contactinfo">
    Contact: <input name="contactname" type="text" /><br />
    <div class="contactemail">
        Email: <input name="contactemail" type="text" /><br />
    </div>
    <a href="javascript:addEmail()">Add Email</a><br />
</div>
<a href="javascript:addContact()">Add Contact</a><br /> 
```

这是jQuery：

```
function addEmail() {
    var newemail = '<div class="contactemail">' +
        'Email: <input name="contactemail" type="text" /><br />' +
        '</div>';
    $('.contactemail:last').append(newemail);
}

function addContact() {
    var newcontact = '<div class="contactinfo">' +
      'Contact: <input name="contactname" type="text" /><br />' +
      '<div class="contactemail">' +
      'Email: <input name="contactemail" type="text" /><br />' +
      '</div>' +
      '<a href="javascript:addEmail()">Add Email</a><br />' +
      '</div>';
    $('.contactinfo:last').append(newcontact);      
} 
```

（我知道这`:last`不是正确的选择器。）

有没有办法让我知道哪个联系人块调用了该函数以及在哪里附加新的 HTML？这完全是错误的方法吗？我会很感激我能得到的任何意见。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:41:02.067

放弃“javascript:addEmail()”，而是这样做（如果我正确理解您的问题）：

HTML

```
<a class="contact" href="#">...</a> 
```

jQuery

```
$('a.contact').click(function() {
   var newcontact = '<div class="contactinfo">' +
  'Contact: <input name="contactname" type="text" /><br />' +
  '<div class="contactemail">' +
  'Email: <input name="contactemail" type="text" /><br />' +
  '</div>' +
  '<a href="javascript:addEmail()">Add Email</a><br />' +
  '</div>';

   $(this).parents('div.contactinfo').append(newcontact);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:49:45.493

我会在 javascript 中处理点击事件，而不是在 html 标记中。我也会使用 .clone() 来生成 html。如果您需要更改 html，最好只在内容中更改它，而不是在您的 javascript 中更改。

当您处理点击事件时，您可以根据“this”关键字知道点击的来源。

```
addEmail.click(function(){
  $(this); // refers to the element that was clicked
}); 
```

一旦你有了这个上下文，你就可以上下移动 DOM 来设置你需要的东西。

# c# - 鼠标悬停不会触发 ContentTemplate 中的触发器

> ID：16220765
> 
> 赞同：0
> 
> 时间：2013-04-25T17:09:12.720
> 
> 标签：c#, wpf, xaml, controltemplate

我有一些文本框，当我将鼠标放在它们上面时，我想更改它们的一些属性。在这种情况下，我想更改 BorderBrush 和 BorderThickness。

这是我的 XAML ControlTemplate，它在`Window.Resource`标签内：

```
 <Style TargetType="{x:Type TextBox}">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="AllowDrop" Value="true"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBoxBase}">
                    <Border
                      Name="Border"
                      Padding="4"
                      BorderBrush="#ccc"
                      BorderThickness="1">
                        <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                <GradientStop Color="#FFC4C4C4" Offset="0.0" />
                                <GradientStop Color="#FFF8F8F8" Offset="0.10" />
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver">
                            <Setter Property="BorderThickness" Value="1"></Setter>
                            <Setter Property="BorderBrush" Value="Orange"></Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

`Trigger`当鼠标光标在文本框上时，这段代码应该设置我在标签内写的属性：

```
 <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver">
                            <Setter Property="BorderThickness" Value="1"></Setter>
                            <Setter Property="BorderBrush" Value="Orange"></Setter>
                        </Trigger>
                    </ControlTemplate.Triggers> 
```

但是这个触发器根本不会被解雇。什么都没发生。为什么？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:40:16.060

我认为您需要指定边框元素名称

```
<Trigger  Property="IsMouseOver" Value="true" >
  <Setter TargetName="Border" Property="BorderThickness" Value="1"></Setter>
  <Setter TargetName="Border" Property="BorderBrush" Value="Orange"></Setter>
</Trigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:14:46.560

您可以试试这个，将 Value 属性添加到您的触发器并将其设置为 true。还需要添加目标名称以告诉它更改控件模板中的边框属性。

```
<Trigger Property="IsMouseOver" Value="true" >
      <Setter Property="BorderThickness" TargetName="Border" Value="1"></Setter>
      <Setter Property="BorderBrush" TargetName="Border" Value="Orange"></Setter>
</Trigger> 
```

# google-maps - OBJECT 标记 DATA 属性中的静态地图未呈现

> ID：16220775
> 
> 赞同：0
> 
> 时间：2013-04-25T17:10:20.823
> 
> 标签：google-maps, google-static-maps

这个问题似乎是特定于谷歌浏览器的：

我目前在网页中有这段代码，可以在 Firefox 和资源管理器中正确呈现，但在 google chrome 中不会呈现任何内容。

```
<object type="text/html" data="http://maps.googleapis.com/maps/api/staticmap?center=13107+Atlantic+Blvd,Jacksonville,FL+32225&zoom=14&size=300x200&markers=color:blue|label:A|13107+Atlantic+Blvd,+Jacksonville,+Duval,+Florida+32225&sensor=false"></object> 
```

但是，当我将数据属性中的 URL 直接放入 chrome 时，URL 会正确呈现。W3schools.com 说该标签及其属性完全受 chrome 支持，有人知道这是一个错误还是我需要添加/执行此标签以使其正常执行的其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:04:17.393

这不是一个错误，服务器发送一个`x-frame-options`值为 SAMEORIGIN 的 -header，它应该防止文件被加载到外部 iframe（甚至是对象）中。

改用一个`<img/>` 。

# ios - 访问 cellForRowAtIndexPath 之外的单元格属性

> ID：16220777
> 
> 赞同：6
> 
> 时间：2013-04-25T17:10:27.110
> 
> 标签：ios, ios5, uitableview, custom-cell

我在注册控制器上设置了五个字段。用户名、显示名、密码、确认密码和电子邮件地址。

它们的设置如下：

```
static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.textColor = [UIColor colorWithRed:14.0f/255.0f green:62.0f/255.0f blue:178.0f/255.0f alpha:0.8f];
    cell.textLabel.font = [UIFont boldSystemFontOfSize:13.0f];

    switch ( indexPath.row ) {
        case 0: {
            cell.textLabel.text = NSLocalizedString(@"UsernameFieldLabel", @"Username field label");
            [cell addSubview:self.usernameField];
            break ;
        }
        case 1: {
            cell.textLabel.text = NSLocalizedString(@"DisplayNameFieldLabel", @"Displayname field lael");
            [cell addSubview:self.displayNameField];
            break ;
        }
        case 2: {
            cell.textLabel.text = NSLocalizedString(@"PasswordFieldLabel", @"Password field lael");
            [cell addSubview:self.passwordField];
            break ;
        }
        case 3: {
            cell.textLabel.text = NSLocalizedString(@"ConfirmPasswordFieldLabel", @"Confirm Password field lael");
            cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
            cell.textLabel.numberOfLines = 2;
            [cell addSubview:self.confirmPasswordField];
            break ;
        }
        case 4: {
            cell.textLabel.text = NSLocalizedString(@"EmailFieldLabel", @"Email field lael");
            [cell addSubview:self.emailField];
            break ;
        }
    }

    return cell; 
```

细胞本身工作正常。然后我对一个按钮进行一些验证，该按钮检查有效的电子邮件地址等，这也可以正常工作。

我想做的是更新验证代码中的 cell.textLabel.textColor 属性。例如，如果电子邮件地址无效，我想将标签文本颜色更新为红色以使其突出（我还对响应者进行排序等）。

如何在单元格设置之外获得对这个特定单元格的引用？

**编辑** 这是答案后的变化。我需要访问第 1 部分中的第 5 个 cll（索引路径 4）（表视图中只有一个部分）：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:4 inSection:1];

UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:indexPath];
cell.textLabel.textColor = [UIColor redColor];
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:30:38.157

您可以使用 NSIndexPath 获取 UITableViewCell。

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:YOUR_ROW inSection:YOUR_SECTION];

UITableViewCell* cell = [yourTable cellForRowAtIndexPath:indexPath];
cell.textLabel.textColor = YOUR_COLOR;
[yourTable reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:24:59.640

只要打电话`[self tableView:self.tableView cellForRowAtIndexPath:indexPath]`。它将返回给定索引路径的单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-21T05:14:34.863

在 UiTableView “didselectRow”中访问自定义标签

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
UILabel *label = (UILabel*)[cell viewWithTag:101]; // you can get label like
label.backgroundColor=[UIColor redColor]; 
```

从按钮获取索引路径

```
- (void) cellEditAction:(UIButton *)sender {

  CGPoint buttonPosition = [sender convertPoint:CGPointZero toView:FriendsTable];
NSIndexPath *indexPath = [FriendsTable indexPathForRowAtPoint:buttonPosition];
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
UILabel *label = (UILabel*)[cell viewWithTag:101]; // you can get label like
label.backgroundColor=[UIColor redColor];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T08:10:02.820

您可以使用标签进行创建。

在 cellForRowAtIndexPath 中

```
static NSString *cellId = @"Cell";
CustomCell *cell = (CustomCell *)[self.tblView dequeueReusableCellWithIdentifier:cellId];
if (cell == nil) {
    NSArray * myNib;
    myNib =[[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];
    cell = (CustomCell *)[myNib lastObject];
}
[cell.deleteBtn addTarget:self action:@selector(cellDeleteAction:) forControlEvents:UIControlEventTouchUpInside];
cell.deleteBtn.tag = indexPath.row;
[cell.editBtn addTarget:self action:@selector(cellEditAction:) forControlEvents:UIControlEventTouchUpInside];
cell.editBtn.tag = indexPath.row; 
```

之后，您可以像这样创建按钮操作方法，

```
- (void) cellEditAction:(UIButton *)sender {
UIButton *button = (UIButton *)sender;
NSString *rateId = [[resDict valueForKey:@"value"]objectAtIndex:button.tag];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-30T05:09:05.480

更新了斯威夫特，

```
let cell = tableView.cellForRow(at: indexPath) as! <Insert tableviewcell Controller here> 
```

然后，您可以像在其中一样访问单元格内的所有对象`cellforrowat`

```
let displayname = cell.labelfordisplayname.text!
print("This is the displayname -> \(displayname)") 
```

# sitecore - Sitecore 的营销人员 Web 表单模块是否为电子邮件订阅者提供了一种管理订阅的方式？

> ID：16220783
> 
> 赞同：0
> 
> 时间：2013-04-25T17:10:41.407
> 
> 标签：sitecore, web-forms-for-marketers

有没有人幸运地使用 Sitecore 的营销人员 Web 表单来管理电子邮件订阅？我正在寻找一种解决方案，允许订阅者选择退出他们已经订阅的电子邮件列表。

此外，我需要为他们提供一种在一个页面上管理多个订阅的方法。最终，他们只是管理他们所在的列表/数据库。

（理想情况下，我通常更喜欢我的客户使用第三方电子邮件营销平台，但不幸的是 - 这里不是这种情况。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:20:24.280

您可以在这里查看：http: [//sdn.sitecore.net/Products/ECM.aspx](http://sdn.sitecore.net/Products/ECM.aspx) Email Campaigner 为订阅者提供了一个 ascx 表单。它可用于多站点解决方案

# php - 在 CLI 脚本中使用现有的 Eloquent 模型（可能还有其他 Laravel4 功能）？

> ID：16220785
> 
> 赞同：0
> 
> 时间：2013-04-25T17:10:44.777
> 
> 标签：php, command-line-interface, laravel, laravel-4

我正在开发一个基于 Laravel 4 框架的项目。框架很棒，网站运行良好，没有问题。

但我还必须编写几个脚本，主要是在 crontab 中安排的数据库维护任务。

我正在寻找一种以与网站代码相同的*风格编写这些脚本的方法。*或者至少，重用模型，如果可能的话，重用一些其他框架特性。

有没有办法做到这一点 ？提前致谢 ：）

**答：工匠命令确实是要走的路。[Artisan Commands 文档](http://four.laravel.com/docs/commands)中提供了您需要了解的所有内容。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:45:17.280

您正在寻找的是 Laravel 的“任务”。您可以使用 Laravel 项目的完整工具集编写脚本，并使用“artisan”工具从命令行运行它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T20:29:19.033

当然。

您甚至可以为您的 cron 作业创建路线，并在您的 cron 作业命令中调用该路线。像这样的东西：

```
wget http://yourdomain.com/cron/your-job 
```

这样，你就可以使用 Laravel 4 提供的一切。

# python - Python/Django 1.5 DatabaseWrapper 线程错误

> ID：16220790
> 
> 赞同：6
> 
> 时间：2013-04-25T17:10:51.203
> 
> 标签：python, mysql, django, python-2.7, django-1.5

当我运行服务器并尝试加载 Web 应用程序的本地版本时，在 Django 1.5.1（和 1.5.0）和 mysql 中引发以下 DatabaseError：

> 数据库错误在 /
> 
> 在线程中创建的 DatabaseWrapper 对象只能在同一线程中使用。别名为“default”的对象是在线程 id 4365488128 中创建的，这是线程 id 140735183980896。

异常位置如下：

> /Users/USERNAME/.envs/PROJECT_NAME/lib/python2.7/site-packages/django/db/backends/init **.py**在 validate_thread_sharing，第 154 行

这仅在第一页加载时发生。当我点击刷新时，Web 应用程序按预期加载。当我更改 Django/python 代码并且本地服务器需要重新验证时，错误返回。当这种情况发生时，第一次加载再次抛出 DatabaseError 并且后续加载再次没有。

这个问题只发生在我的 Django 1.5 项目上。我已经卸载了 mysql 并清除了位于 /usr/local/var/mysql 中的 mysql 二进制文件。全新安装 mysql 并没有解决这个问题。

此处讨论了类似的 DatabaseError 但我无法遵循他们的解决方案：

[https://code.djangoproject.com/ticket/17998](https://code.djangoproject.com/ticket/17998)

我在这里不知所措，任何想法或专业知识将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-14T20:43:20.260

我在导入 django.* 之前通过猴子修补解决了这个问题：

```
import eventlet
eventlet.monkey_patch() 
```

你明白我在这里使用线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T12:58:55.420

这是针对 1.4 的，但问题的原因可能与您的相同：

[https://bitbucket.org/akoha/django-digest/issue/10/conflict-with-global-databasewrapper](https://bitbucket.org/akoha/django-digest/issue/10/conflict-with-global-databasewrapper)

该帖子中有两种可能的解决方案，尽管两者似乎都是解决方法：

“我已经能够通过在 db.py 中注释掉 close_connection 来解决问题”

“一个肯定会奏效的修复方法是用 django.db.connection 和 django.db.tranasction 替换 MultiDb/get_default_db()/self.db，如下所示：[https ://docs.djangoproject.com/en/dev/topics /db/sql/#executing-custom-sql-直接](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)“

# ruby-on-rails - RailsS pace 入门问题

> ID：16220792
> 
> 赞同：0
> 
> 时间：2013-04-25T17:10:56.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, aptana

我正在使用 RailsS​​pace 的书来学习 RoR，但我无法通过第一步 - 创建一个项目。

我认为问题是这本书已经过时了。它说运行命令`rails rails_space`，但是一旦运行命令，它就不会像书中所说的那样创建应用程序骨架以及文件夹结构。

此外，当书中告诉我将 rails_space 项目导入我刚刚创建的项目时，我要导入什么项目？据我所知，导入它的步骤是无效的——它们的内容如下：

1.  转到文件 -> 新建 -> Rails -> Rails 项目，然后单击下一步。
2.  取消选中 Generate Rails application framework 和 Create a WEBrick server 框。
3.  编辑默认位置……等等。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:18:03.807

检查您是否正在运行`rails new rails_space`，而不是`rails rails_space`您所说的那样。如果您具有写入权限，它将创建应用程序骨架。如果您遇到困难，请务必查阅[此文档。](http://guides.rubyonrails.org/getting_started.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:54:48.853

[http://ruby.railstutorial.org/?railsspace=1](http://ruby.railstutorial.org/?railsspace=1)

欢迎，RailsS​​pace.com 访客！

在当时，RailsS​​pace 是 Ruby on Rails Web 开发的最佳介绍，但现在已经过时了。幸运的是，RailsS​​pace 的自然继任者现已推出：Ruby on Rails 教程书可在线免费获取，也可作为 PDF 或印刷版购买。Ruby on Rails 教程直接受到 RailsS​​pace 的启发，并采用相同的分步教程方法。我们认为您会发现 Ruby on Rails 教程是对 Ruby on Rails 的易于使用且全面的介绍。

——奥勒留斯·普罗查兹卡和迈克尔·哈特尔

# android - Android EditText 粘贴文本时如何禁用自动插入空格？

> ID：16220793
> 
> 赞同：4
> 
> 时间：2013-04-25T17:11:03.247
> 
> 标签：android, textedit

有时，在 EditText 中粘贴文本时，会自动插入空格/空格。例如，如果将文本粘贴到文本字段中已包含的文本的中间或末尾，就会发生这种情况。有没有办法告诉 Edi​​tText 对象或 ClipboardManager 不应自动插入前导和尾随空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:41:38.707

使用修剪（）；它将删除字符串前后的空格

```
str = str.trim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T05:57:57.313

这是一个安卓错误。[检查此问题报告](https://code.google.com/p/android/issues/detail?id=41037)。

它固定在5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T08:55:51.363

在使用 InputFilter 之前，我需要防止“空格”，所以我使用它：

```
 mSearchText.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View view, int i, KeyEvent keyEvent) {
            MyLog.d(this, keyEvent);
            if (keyEvent.getKeyCode() == KeyEvent.KEYCODE_SPACE) {
                switch (keyEvent.getAction()) {
                    case KeyEvent.ACTION_DOWN:
                        mSpacePressed = true;
                        break;
                    case KeyEvent.ACTION_UP:
                        mSpacePressed = false;
                }
            }
            return false;
        }
    });

    InputFilter mSearchFilter = new InputFilter() {
        @Override
        public CharSequence filter(CharSequence arg0, int arg1, int arg2, Spanned arg3, int arg4, int arg5)
        {
            //Prevent adding spaces on Paste
            //Remember: if you want paste " " it will be prevented
            if (arg0.toString().equals(" ")){
                if (!mSpacePressed){
                    return "";
                }
            }

            //do work with filter

            return null;
        }
    };
    mSearchText.setFilters(new InputFilter[]{mSearchFilter}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T06:02:47.270

我迟到了，但在我的旧平板电脑上，我的 EditText 也像你说的那样工作。

所以，我像下面一样修复了它。

1.创建一个类来存储有关起始索引和插入字符串长度的信息。

```
public class PasteUnit {
    int start = 0;
    int length = 0;

    public PasteUnit(int start, int length) {
        this.start = start;
        this.length = length;
    }
} 
```

2.创建一个扩展EditText的类。

```
public class MyEditText extends EditText
{
    boolean pasteStarted = false;
    ArrayList<PasteUnit> pasteUnits = new ArrayList<>();

    public MyEditText(Context context)
    {
        super(context);
    }

    public MyEditText(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    public MyEditText(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTextContextMenuItem(int id) {
        if(id==android.R.id.paste) {//This is called when the paste is triggered
            pasteStarted = true;
        }

        boolean consumed = super.onTextContextMenuItem(id);
        //the super.onTextContextMenuItem(id) processes the pasted string.
        //This is where EditText acts weird.
        //And we can watch what is happening in our TextWatcher to be added below

        switch (id){
            case android.R.id.paste://This is called after we collected all the information

                if(pasteUnits.size()>1) {//When a space or spaces are inserted
                    int startIndex = pasteUnits.get(0).start;
                    int totalLength = 0;
                    for(int i=0;i<pasteUnits.size();i++) {
                        PasteUnit pasteUnit = pasteUnits.get(i);
                        totalLength = totalLength + pasteUnit.length;
                    }
                    int endIndex = startIndex + totalLength;

                    String string = this.getText().toString();
                    String before = string.substring(0, startIndex);
                    String after = string.substring(endIndex);

                    PasteUnit lastPasteUnit = pasteUnits.get(pasteUnits.size()-1);
                    String lastString = string.substring(lastPasteUnit.start, lastPasteUnit.start + lastPasteUnit.length);

                    String result = before + lastString + after;
                    this.setText(result);
                    this.setSelection(startIndex + lastString.length());
                }
                pasteUnits.clear();
                pasteStarted = false;
                break;
            case android.R.id.copy:
                break;
            case android.R.id.cut:
                break;
        }
        return consumed;
    }
} 
```

3.将 TextWatcher 添加到您的 EditText。

旧的 EditText 看到 TextWatcher 的行为真的很奇怪。当您将字符串 A 粘贴到字符串 B 中时，它首先在字符串 B 中插入一个空格，然后在字符串 B 中插入另一个空格，最后在两个空格之间插入字符串 A。

在其他情况下，例如在字符串 B 之后粘贴字符串 A，它首先在字符串 B 之后附加一个空格，然后再附加字符串 A。

所以无论如何，它似乎在最后一步插入了原始字符串。

```
 MyEditText edit = (MyEditText) findViewById(R.id.mainEditText1);

   edit.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {
            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {

                if(edit.pasteStarted) {//when it is processing what we pasted
                    edit.pasteUnits.add(new PasteUnit(start, count));
                   //store the information about the inserted spaces and the original pasted string
                }
            }
        }); 
```

# javascript - Twitter Bootstrap 模态滑入

> ID：16220795
> 
> 赞同：1
> 
> 时间：2013-04-25T17:11:09.140
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap, modal-dialog

有谁知道如何让 Twitter Bootstrap 模式从浏览器窗口顶部平滑滑入到位而不是快速淡入？

我一直在看[这个链接](http://www.w3resource.com/twitter-bootstrap/modals-tutorial.php)，但似乎看不到如何实现滑入过渡而不是淡入淡出。

提前感谢您提供的任何帮助。

我目前有以下CSS：

```
.modal-backdrop.fade {
    opacity: 0;
}
.modal-backdrop, .modal-backdrop.fade.in {
    opacity: 0.8;
}
.modal {
    background-clip: padding-box;
    background-color: #FFFFFF;
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 6px 6px 6px 6px;
    box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
    left: 50%;
    margin: -250px 0 0 -280px;
    max-height: 500px;
    overflow: auto;
    position: fixed;
    top: 50%;
    width: 560px;
    z-index: 1050;
}
.modal.fade {
    top: -25%;
    transition: opacity 0.3s linear 0s, top 0.3s ease-out 0s;
}
.modal.fade.in {
    top: 50%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T11:03:46.863

w3resource 示例的问题是添加到#example div 的“in”类。如果您**删除“in”类**，它应该按照您期望从顶部滑入的方式工作......

```
<div class="container">  
  <h2>Example of creating Modals with Twitter Bootstrap</h2>  
  <div id="example" class="modal hide fade" style="display: none; ">  
  <div class="modal-header">  
  <a class="close" data-dismiss="modal">×</a>  
  <h3>This is a Modal Heading</h3>  
  </div>  
  <div class="modal-body">  
  <h4>Text in a modal</h4>  
  <p>You can add some text here.</p>                
  </div>  
  <div class="modal-footer">  
  <a href="#" class="btn btn-success">Call to action</a>  
  <a href="#" class="btn" data-dismiss="modal">Close</a>  
  </div>  
  </div>  
  <p><a data-toggle="modal" href="#example" class="btn btn-primary btn-large">Launch demo modal</a></p>  
</div> 
```

**在 Bootply 上工作**：http : [//www.bootply.com/60158](http://www.bootply.com/60158)

# aem - 包含继承组件的页面如何激活页面，即在 iparsys 中删除的组件？

> ID：16220803
> 
> 赞同：1
> 
> 时间：2013-04-25T17:11:31.107
> 
> 标签：aem

我在 CQ5 WCM 中创建了一个网站结构。我创建了一个模板，并在其页面级组件中定义了一些 parsys 和 iparsys。在此之后，我在其下创建了一页和几页。现在我的问题是，如果对 iparsys 组件进行更改并激活它，所有继承它的页面也会被激活还是我需要单独激活所有页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:55:41.963

是的，所有嵌套页面都会接受更改。将其视为“计算”引用 - 包含原始内容的页面被复制到发布实例的存储库，所有其他页面基于该间接引用的内容计算其 HTML。

然而，调度程序的缓存是另一种野兽 - 确保您使整个站点的缓存无效，而不仅仅是您激活的页面。

# jquery - 如何不在 Jquery Ajax 中显示成功？

> ID：16220808
> 
> 赞同：-4
> 
> 时间：2013-04-25T17:11:38.563
> 
> 标签：jquery, ajax

我正在使用这样的 Jquery ajax：

```
function deactivate() {
    var user_info=document.getElementById('user_info').value;
    if (user_info=''){
    alert('Enter password!');
    return false;
    }
    else {
      $.ajax({
                type: "GET",
                url: "/deactivate/",
                data: {user_info:user_info},
                success: function(data){
                     $('#deactivate_modal').html(data)

                }
            });
        }
} 
```

如果用户提供的用户信息不正确，则错误会显示在 div 中，这很好，但如果正确，我希望刷新页面，将用户重定向到登录页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:24:45.460

如果你的服务器返回一个响应（可以是任何东西，html、json、纯文本等），那么你可以在你的成功函数中检查它。如果用户信息正确，下面的代码期望服务器返回“成功”响应。响应可以是任何东西，只需将“成功”替换为服务器的响应即可。

我还注意到您在第一个 if 语句中使用了赋值运算符，并且您的键/值对需要将键括在引号中，否则它将替换为变量的内容。

代码示例：

```
function deactivate() {
    var user_info = document.getElementById('user_info').value;
    if (user_info == '') {
        alert('Enter password!');

        return false;
    }
    else {
        $.ajax({
            type:    "GET",
            url:     "/deactivate/",
            data:    {'user_info': user_info},
            success: function (data) {
                if (data === 'success') {
                    window.location = 'http://www.mydomain.com/myPageAFterLogin'
                } else {
                    $('#deactivate_modal').html(data)
                }
            }
        });
    }
} 
```

# knockout.js - ko.mapping：使用订阅更新模型

> ID：16220811
> 
> 赞同：1
> 
> 时间：2013-04-25T17:11:49.247
> 
> 标签：knockout.js, knockout-mapping-plugin

`ko.mapping`更新具有一些**订阅**的模型时出现错误。一旦订阅被删除，一切都会像魅力一样发挥作用。知道如何使它工作吗？

考虑这个例子（[jsfiddle 可用](http://jsfiddle.net/y48U2/1/)） - 调用`ko.mapping.fromJS()`in`initModel()`触发错误：

```
var iniData = {
    FirstName: "foo",
    LastName: "bar"
};

var PersonModel = function() {
    this.FirstName = ko.observable("");
    this.LastName = ko.observable("");
    this.FullName = ko.observable("");

    // If you comment out subscribe() calls, everything works fine!
    this.FirstName.subscribe(this.updateFullName);    
    this.LastName.subscribe(this.updateFullName);

    // Update FullName only if it's empty
    this.updateFullName = function(){
            if (!this.FullName()) {
                this.FullName(
                    this.LastName() + 
                            this.FirstName() ? (
                                " " + this.FirstName()
                            ):''
                );
            }

        };
    this.initModel = function(){
        try {
        ko.mapping.fromJS(iniData, {}, this);
        }
        catch(err) {
            alert(err.message);
        }
    }
}

ko.applyBindings(new PersonModel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:15:09.757

该`updateFullName`函数应放在您正在执行的两个订阅之前，否则**JavaScript 解释器尚不知道**此方法。像这样：

```
 var self = this;
    self.FirstName = ko.observable("");
    self.LastName = ko.observable("");
    self.FullName = ko.observable("");

    // Update FullName only if it's empty
    self.updateFullName = function(){
            if (!self.FullName()) {
                self.FullName(
                    self.LastName() + 
                            self.FirstName() ? (
                                " " + self.FirstName()
                            ):''
                );
            }

        };

    // If you comment out subscribe() calls, everything works fine!
    self.FirstName.subscribe(self.updateFullName);    
    self.LastName.subscribe(self.updateFullName); 
```

另外，我认为在您的情况下，您应该避免订阅并将其声明`FullName`为计算的可观察对象，这实际上是完美的情况。这是如何做到的：

```
self.FirstName = ko.observable("");
self.LastName = ko.observable("");
self.FullName = ko.computed(function() {
  return self.LastName() + (self.FirstName() ? " " + self.FirstName() : "");
}; 
```

每当发生变化`FirstName`或`LastName`计算出的`FullName`observable 被更新时。

* * *

编辑：我检查了你的小提琴，另一个错误是在`updateFullName`函数中，“this”指的是方法的上下文，而不是你的视图模型的上下文。这解释了为什么`fullName`找不到该属性。检查更新的[小提琴](http://jsfiddle.net/y48U2/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:18:30.997

计算出来的 observable 在这里不是更有意义吗？还是 fullName 值必须自己可编辑？

[编辑] 哎呀，Jalayn 更快；）

# r - 如何在 ggplot 等值线图中将 NA 颜色从灰色更改为白色？

> ID：16220812
> 
> 赞同：48
> 
> 时间：2013-04-25T17:11:53.717
> 
> 标签：r, ggplot2, maps, choropleth

我正在尝试创建一个美国的等值线地图，其默认颜色从灰色变为白色。

我有 48 个状态中的 18 个的记录，并且代码可以按值着色，但对于那些我没有记录的状态，状态是灰色的。我希望它们是白色的。

如何更改颜色？

```
library(maps)
library(plyr)
library(ggplot2)
records1<-read.csv('E:/My Documents/records_by_state.csv')
records<-data.frame(state=tolower(rownames(records1)), records1)
head(records)
all_states<-map_data("state")
head(all_states)
record_map<-merge(all_states, records, by.x="region", by.y="state.name")
record_map<-arrange(record_map, group, order)
head(record_map)

p<- ggplot()

p<- p + geom_polygon(data=record_map, aes(x=long, y=lat, group=group,    fill=record_map$Records), colour="black"
         )+ scale_fill_continuous(low="thistle2", high="darkred", guide="colorbar")
P1 <- p + theme_bw() +labs(fill= "Records by State"
                    , title= "By State", x="", y="")
P1 + scale_y_continuous(breaks=c()) + scale_x_continuous(breaks=c()) +  theme(panel.border= element_blank()) 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-25T17:15:26.703

您可以通过更改 中的参数来更改 NA 值（没有数据的状态）的`na.value`颜色`scale_fill_continuos()`。

```
+scale_fill_continuous(low="thistle2", high="darkred", 
                       guide="colorbar",na.value="white") 
```

# php - php正则表达式：如何正确转义字符？

> ID：16220816
> 
> 赞同：-2
> 
> 时间：2013-04-25T17:12:15.287
> 
> 标签：php, regex, preg-match

如何编写 preg_match 来匹配字符串`*My*`？

这不起作用：

```
$ptn = "/\*(.*)\*/";
$str = "*My*";
preg_match($ptn, $str, $matches);
print_r($matches); 
```

因为它输出：

```
Array
(
    [0] => *My*
    [1] => *My*
) 
```

代替：

```
Array
(
    [0] => *My*
    [1] => My
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:14:45.200

在这里工作正常：

```
php > preg_match('/\*(.*)\*/', '*My*', $matches);
php > var_dump($matches);
array(2) {
  [0]=>
  string(4) "*My*"
  [1]=>
  string(2) "My"
} 
```

请记住，该`$matches`数组将始终在位置 0 中包含整个匹配的字符串，然后在插槽 1+ 中包含单个匹配项。

# eclipse - 格式化eclipse，所以注释不在不同的行上，而是在自己的行上

> ID：16220817
> 
> 赞同：2
> 
> 时间：2013-04-25T17:12:19.307
> 
> 标签：eclipse, formatting

假设我在 Eclipse 中有一个方法，如下所示：

```
@Deprecated
@Override
public void foo(int i) {
    super(i+1);
} 
```

如果我去 eclipse 中的格式化程序，New Lines 选项卡，然后取消选中`Insert new line after annotation on members`，我会得到以下信息

```
@Deprecated @Override public void foo(int i) {
    super(i+1);
} 
```

但我真正想要的是介于两者之间：

```
@Deprecated @Override // annotations here
public void foo(int i) { // method here
    super(i+1);
} 
```

这在 Eclipse 中可能吗？

# asp.net - web.config ipSecurity 的内部服务器错误

> ID：16220819
> 
> 赞同：16
> 
> 时间：2013-04-25T17:12:23.770
> 
> 标签：asp.net, iis, web-config

这是我的 web.config，其中有一些用于阻止 Ipaddress 的标签

```
<configuration>
 <connectionStrings>
    ...
 </connectionStrings>
 <appSettings>
  ....
 </appSettings> 
 <runtime>
   ....
 </runtime>
  <system.webServer>
    <security> 
        <ipSecurity allowUnlisted="false"> 
            <clear/> 
             <add ipAddress="127.0.0.1" allowed="true"/>
             <add ipAddress="83.116.19.53" allowed="true"/> 
        </ipSecurity>  
    </security>
</system.webServer> 
</configuration> 
```

我的意图是阻止除上述之外的任何其他 IP。以上是我希望网站可以访问的唯一 IP 地址。但是使用“ipSecurity”标签，我总是收到 500 - 内部服务器错误，没有它，网站运行良好。

我已确保在服务器上安装了“IP 和域限制”。如果我遗漏了什么，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-29T23:57:14.950

对于遇到此问题的其他人。问题的原因是功能委派不允许该功能由 web.config 管理。

修理：

验证是否为 web.config 管理启用了该功能

*   在 IIS 7 中，单击根服务器
*   双击功能委派（管理下）
*   向下滚动到 IPv4 地址和域限制
    *   将委派更改为读/写（在我的情况下，它是只读的，这是问题所在）

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-11-14T16:14:51.533

对于 Windows 10 和 Visual Studio 2015，请注意 ApplicationHost.config 文件已重新定位到项目文件夹层次结构中的 .vs\config 文件夹。您将需要**编辑那里找到的 ApplicationHost.config 文件的项目特定版本**...

```
<section name="ipSecurity" overrideModeDefault="Allow" /> 
```

如果您只编辑位于 Documents\IISExpress 文件夹中的 ApplicationHost.config，这不会影响您现有的应用程序（在我的例子中是 MVC5 应用程序）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-30T14:35:52.713

打开*applicationHost.config*文件（位于*%windir%\system32\inetsrv\config\applicationHost.config*）并编辑**ipSecurity**部分。

更改此行：

```
<section name="ipSecurity" overrideModeDefault="Deny" /> 
```

至：

```
<section name="ipSecurity" overrideModeDefault="Allow" /> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-26T12:12:36.797

您是手动编辑配置还是通过 IIS 管理器编辑配置？

请参阅有关该错误消息的这篇文章，因为您可能没有启用该**功能委托**

[http://forums.asp.net/t/1220987.aspx](http://forums.asp.net/t/1220987.aspx)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-05-05T07:13:48.660

在 System.Webserver 标记之外试试这个

```
<location path="Default WebSite">
    <system.webServer>
        <security>
            <ipSecurity allowUnlisted="false">
                <clear/>                 
               <add ipAddress="127.0.0.1" allowed="true"/>
             <add ipAddress="83.116.19.53" allowed="true"/> 
            </ipSecurity>
        </security>
    </system.webServer>
</location> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-28T15:45:26.953

希望这会帮助某人...

我在本地 Windows 7 上运行 IIS express 并执行了以下操作 -**控制面板 > 程序 > 程序和功能 > 打开或关闭 Windows 功能**

在**Windows 功能**对话框中，确保选中**IP 安全选项：**

![在此处输入图像描述](https://i.stack.imgur.com/thVOB.png)

我还必须打开我的 applicationhost.config （在**%userprofile%\Documents\IISExpress\config**下）文件并更改以下内容：

```
<section name="ipSecurity" overrideModeDefault="Deny" /> 
```

至

```
<section name="ipSecurity" overrideModeDefault="Allow" /> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-17T23:42:29.487

不要忘记自定义站点委托。这允许您只允许委派到您想要的站点。

# php - 重定向 URL 表单

> ID：16220822
> 
> 赞同：0
> 
> 时间：2013-04-25T17:12:46.550
> 
> 标签：php, javascript, html, ajax

我开始研究 Web 开发，作为练习，我试图用 javascript 和 PHP 制作一个用于在 HTML 中重定向的表单。

**HTML**

```
<html>
<head>
<title>FORM</title>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="script.js" type="text/javascript"></script>
<form>
    <input type="text" name="url"><br>
    <input class="btn" type="button" id="send" value="Send" />
</form>
</body>
</html> 
```

**JavaScript**

```
$(document).ready(function() {
$("#send").click(function(){
var url = $("#url").val();
$.ajax({
type: "POST",
url: "engine.php",
data: "url=" + url,
dataType: "html"
}); 
```

**PHP**

```
<?php
    session_start();

    $url        =   $_POST['url'];
        header("Location: /".$url.");

    session_destroy();
    exit;
?> 
```

主要问题是似乎没有读取js。此外，我不知道 PHP 是否正确。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:21:29.137

如果您想重定向到另一个 URL，则无需发出 AJAX 请求。此外，您目前的操作方式无论如何都不会重定向。

下面，当您的 click 函数触发时，它将从您的输入字段中获取 URL，并重定向到该页面。

```
<html>
<head>
<title>FORM</title>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function() {

        $("#form_name").submit(function(event){

            event.preventDefault();

            var url = $("#url").val();

            document.location.href = url;

        });

    })

</script>
<form id="form_name" name="form_name">
    <input type="text" name="url" id="url"><br>
    <input class="btn" type="submit" id="send" value="Send" />
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:23:53.427

您需要在输入中添加 id

```
<input type="text" name="url" id="url"><br> 
```

而且 header() 在 ajax 中也不起作用

您需要使用 javascript 进行重定向

在php中

```
<?php
    session_start();

    $url        =   $_POST['url'];
    echo '<script>document.location.href = '.$url.'</script>';

    session_destroy();
    exit;
?> 
```

并使用 ajax 响应功能将回显文本放入文档中

您也可以使用更好的方法（不使用 Ajax 并提交表单）

```
$(document).ready(function() {
$("#send").click(function(){
var url = $("#url").val();
window.location.href = url;
}); 
```

这是您的最佳答案[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

**更新：** 你还需要 delete ，标签，这里是 html 代码而不是......

```
<input type="text" name="url" id="url"><br>
<input class="btn" type="submit" id="send" value="Send" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:29:17.360

所以你认为你的javascript没有被执行？这是否意味着您已经调试过这个？

如果你的 javascript 都没有运行——包括你准备好的处理程序，那么服务器就没有找到 js 文件。如果您的某些 javascript 正在运行，则可能是错误导致它停止。您可能只需要进行一些调试。

# excel - Excel 2010 VBA：复制行，根据某列上的值动态选择它们

> ID：16220823
> 
> 赞同：0
> 
> 时间：2013-04-25T17:12:47.580
> 
> 标签：excel, vba

刚刚用 VBA for Excel 弄湿了我的脚。环顾四周寻找类似的问题，但找不到与此完全相同的东西。

很简单的问题。我有一些数据，想将一部分行复制到工作表中的另一个位置。我认为它不会让我发布图像，所以假设它看起来像这样：

```
 Column A     Column B     Column C
 product1        1          #VALUE!
 product2        4            100
 product3        22            25
 product4        0             3 
```

我要复制的行是 C 列为 5+ 的行。因此，在这种情况下，第 3 行和第 4 行。如果有帮助，总行数应该始终相同。

我可以在 VBA 中进行复制和粘贴，只是想知道选择这些行的最佳方法是什么。我尝试了一个以 x 为列号的 Do Loop，检查它是否为“>4”，但我无法让它工作。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:27:54.103

有很多方法可以解决这个问题。这是一个：

```
Sub Macro1()

Dim LR As Long

LR = ActiveSheet.UsedRange.Rows.Count
    Range("A1:C1").Range("$A$1:$C$" & LR).AutoFilter Field:=3, Criteria1:=">4", _
        Operator:=xlAnd
    Range("A1:C" & LR).SpecialCells(xlCellTypeVisible).Copy Destination:=Range("L1")
    Range("A1:C1").Range("$A$1:$C$" & LR).AutoFilter
End Sub 
```

调整目标范围以适应。

# c - dl'ed 函数的通用返回类型

> ID：16220830
> 
> 赞同：0
> 
> 时间：2013-04-25T17:13:30.987
> 
> 标签：c, dynamic-loading

嗨，我动态加载函数并执行它们。我希望能够定义一个通用返回类型，以便编译器可以正确清理堆栈。目前它的版本字符串打印乱码。

如何使以下代码工作？

```
// gcc -o test test.c -ldl

#include <stdio.h>
#include <dlfcn.h>

typedef union  { int i; double d; float f; char *p;} anytype; 

int main()
{
  anytype ver2;

  anytype (*f)();

    void *handle = dlopen("libz.so.1", RTLD_NOW|RTLD_GLOBAL);
    f = dlsym(handle,"zlibVersion");
    //const char * zlibVersion (void);
    ver2=f();
    printf("zlib version %s\n", ver2.p);
    dlclose(handle);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:26:00.467

不幸的是，您不能使用 a`union`来代替未知类型的返回值。在具有浮点寄存器的架构上，浮点返回值在浮点寄存器中返回，而整数或指针返回值在通用寄存器中返回。通常，如果返回值是一个联合或结构，调用者必须提供第一个参数，指向一个存储区（大小正确），被调用者将用返回值填充该存储区。（有很多变化。它完全依赖于平台 ABI；我描述的是（部分）i386 ABI。）

所以你真的需要知道函数的签名才能调用它。

# cobol - COBOL 中的嵌套执行循环？

> ID：16220831
> 
> 赞同：5
> 
> 时间：2013-04-25T17:13:31.367
> 
> 标签：cobol, gnucobol, cobol85

为什么我不能在 COBOL 中执行此嵌套执行循环？

如果我把END-PERFORM。在任何一行都比我在退出程序之前的最后一行更早 - 它有效。但我需要程序每次都显示 INPUT C 值。在外部执行循环中。它让我发疯。

```
PROCEDURE DIVISION USING INPUTC CIPHER.
COMPUTE CIPHERMAX = CIPHER.
MULTIPLY -1 BY CIPHER
---> PERFORM VARYING CIPHER FROM 0 BY 1
UNTIL CIPHERMAX = CIPHER
    DISPLAY 'This is loop number: ' CIPHER
    INSPECT INPUTC CONVERTING
    "avcdefghijklmnopqrstuvwxyz" to "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    COMPUTE CONVERTNUM = FUNCTION MOD (CIPHER, 26)
    INSPECT FUNCTION REVERSE(INPUTC) TALLYING LENGTHNUM FOR LEADING SPACES
    COMPUTE LENGTHNUM = LENGTH OF CIPHER - LENGTHNUM

 ---> PERFORM UNTIL SENTRY = LENGTHNUM

            IF ((FUNCTION ORD(INPUTC(SENTRY:1)) + CONVERTNUM) > (FUNCTION ORD('Z')))
             MOVE FUNCTION CHAR((FUNCTION ORD(INPUTC(SENTRY:1)) + CONVERTNUM) - 26) TO RECHAR
              ELSE
             MOVE FUNCTION CHAR(FUNCTION ORD(INPUTC(SENTRY:1)) + CONVERTNUM) TO RECHAR
             END-IF  
              IF (((FUNCTION ORD(INPUTC(SENTRY:1))) >= (FUNCTION ORD('A'))) AND 
             ((FUNCTION ORD(INPUTC(SENTRY:1))) <= (FUNCTION ORD('Z'))))
             IF ((FUNCTION ORD(INPUTC(SENTRY:1)) + CONVERTNUM) > (FUNCTION ORD('Z')))
                INSPECT INPUTC(SENTRY:1) REPLACING ALL INPUTC(SENTRY:1) BY RECHAR
             ELSE
                INSPECT INPUTC(SENTRY:1) REPLACING ALL INPUTC(SENTRY:1) BY RECHAR
             END-IF
          ELSE
                INSPECT INPUTC(SENTRY:1) REPLACING ALL INPUTC(SENTRY:1) BY INPUTC(SENTRY:1)
          END-IF

          COMPUTE SENTRY = SENTRY + 1
        --->  END-PERFORM
    DISPLAY INPUTC.
    COMPUTE LOOPI = LOOPI + 1
    --->END-PERFORM.
EXIT PROGRAM.
END PROGRAM SOLVE. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T19:51:50.790

之后的那个讨厌的范围终止期`DISPLAY INPUTC.`正在终止嵌套`PERFORM`语句的范围。摆脱这个时期，一切都应该正常工作。

在将程序编码为 COBOL-85 标准时，您应该在程序部中使用的唯一句点是终止节和段落标题所需的句点，以及终止当前段落、节或程序所需的句点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-12T20:18:15.443

您在显示 INPUTC 语句中有一个句点。删除期间，你应该没问题。Period 总是结束一个语句。

# visual-studio - 在入住过程中添加营业时间

> ID：16220833
> 
> 赞同：2
> 
> 时间：2013-04-25T17:13:33.973
> 
> 标签：visual-studio, visual-studio-2012, tfs

在 TFS 工作项中，我们有几个字段用于跟踪时间：**原始估计**、**剩余工作**、**已完成工作**

我想添加一个选项以在签到时添加**已完成的工作**时间。当前默认的挂起更改屏幕如下所示：
![在此处输入图像描述](https://i.stack.imgur.com/KNsVJ.png)

我想要做的是在每个工作项旁边添加一个文本框，该文本框将在签入时更新任务的总完成时间。

1.  有什么开箱即用的东西吗？
2.  如果没有，是否可以使用 TFS API 并修改本机挂起更改页面和签入操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T09:38:25.210

我建议您首先设置 Tool Productivity TFS（基于 TFS2012 的链接）

链接：http: [//visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)

因此，您可以使用`Process Editor`（在 Visual Studio 中添加）来`customize Work Item Types`添加新的字段总完整小时数。

示例链接：[http ://tedgustaf.com/blog/2011/1/how-to-customize-tfs-2010-work-items-and-workflows/](http://tedgustaf.com/blog/2011/1/how-to-customize-tfs-2010-work-items-and-workflows/)

# php - fullCalendar 将所有内容显示为 allDay

> ID：16220836
> 
> 赞同：0
> 
> 时间：2013-04-25T17:13:38.120
> 
> 标签：php, jquery, jquery-plugins, fullcalendar

我创建了一个保存到 MySQL 的日历。

我将时间范围事件的 allDay 值设置为 false，但日历将其显示为全天。

这得到了事件..

```
$sql = mysql_query('SELECT * FROM `companies`.`calendar`');
${'Events'} = array();
while(${'Event'} = mysql_fetch_assoc($sql)){
    ${'Events'}[] = ${'Event'};
} 
```

我的桌子的快照：

![](https://i.stack.imgur.com/VimKl.jpg)

这是我的 jQuery

```
$(document).ready(function() {

     $('#eventToAdd').dialog({ 
        autoOpen: false,
        height: '300',
        width: '550',
        modal: true,
        resizable: false,
        position: 'center',
    });

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
        theme: true,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        loading: function(bool) {
            if (bool) $('#loading').show();
            else $('#loading').hide();
        },
        eventClick: function(calEvent, jsEvent, view) {
            $('#eventTitle').val(calEvent.title);
            $('#textColor').val(calEvent.textColor);
            $('#backgroundColor').val(calEvent.color);
            $("#eventToAdd").dialog({
                autoOpen: true,
                title: "Update Event",
                modal: true,
                buttons: [
                {
                    text:"Update Event",
                    click: function () {
                        if($('#eventTitle').val()){
                              calEvent.title = $('#eventTitle').val();
                              calEvent.color = $('#backgroundColor').val();
                              calEvent.textColor = $('#textColor').val();
                              calendar.fullCalendar('updateEvent',calEvent); 
                              $.post('post.api.php', { 'api': 'updateEvent', 'id': calEvent.id, 'title': calEvent.title, 'start': $.fullCalendar.formatDate(calEvent.start, 'yyyy-MM-dd h:mm:ss tt'), 'end': $.fullCalendar.formatDate(calEvent.end, 'yyyy-MM-dd h:mm:ss tt'), 'allDay': calEvent.allDay, 'bgColor': calEvent.color, 'textColor': calEvent.textColor }, function(resp) {
                                  if(resp == 'SUCCESS') {
                                      jAlert('The event has been updated','Updated');
                                  } else {
                                      jAlert('There was an error updating the event<br />Please try again later.<br />ERROR CODE: 728375', 'Process Error');
                                  }
                                  $('#eventToAdd').dialog('close');
                              });
                        }
                    }
                },
                {
                    text: "Cancel",
                    click: function() { $(this).dialog('close'); }
                }]
            });
        },
        selectable: true,
        selectHelper: true,
        select: function (start, end, allDay, jsEvent, view) {
            $("#eventToAdd").dialog(
            {
                autoOpen: true,
                title: "Create Event",
                modal: true,
                buttons: [
                {
                    text:"Create Event",
                    click: function () {
                        if($('#eventTitle').val()){
                            calendar.fullCalendar('renderEvent',
                            {
                                title: $('#eventTitle').val(),
                                start: $.fullCalendar.formatDate(start, 'yyyy-MM-dd h:mm:ss tt'),
                                end: $.fullCalendar.formatDate(end, 'yyyy-MM-dd h:mm:ss tt'),
                                allDay: allDay,
                                textColor: $('#textColor').val(),
                                color: $('#backgroundColor').val()
                            },
                            true
                        ); 
                        var startDate = $.fullCalendar.formatDate(start, 'yyyy-MM-dd h:mm:ss tt');
                        var endDate = $.fullCalendar.formatDate(end, 'yyyy-MM-dd h:mm:ss tt');
                        $.post('post.api.php', { 'api': 'createEvent', 'title': $('#eventTitle').val(), 'start': startDate, 'end': endDate, 'allDay': allDay, 'textColor': $('#textColor').val(), 'bgColor': $('#backgroundColor').val() }, function(response) {
                            if(response == 'SUCCESS'){
                                jAlert('The event has been saved!','Event Created');
                            } else {
                                jAlert('There was an error saving your event<br />Please try again later or let JD know<br />ERROR CODE: 882293','Process Error');
                            }
                        });
                        }
                        $(this).dialog('close');
                    }
                },
                {
                    text: "Cancel",
                    click: function() { $(this).dialog('close'); }
                }
                ],
                close: function(){
                    $('#eventTitle').val('');
                    $('#textColor').val('');
                    $('#backgroundColor').val('');     
                }
            });
        },
        editable: true,
        events: <?= ${'Events'}; ?>

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T13:12:48.587

记录值应返回为 false（不带引号）；不是“假的”。我遇到了同样的问题并应用了这个简单的解决方案：

```
// -----------------------
while ($row = mysql_fetch_assoc($sql)) {
// -----------------------
if ($row['event_allday'] = 'false') {
$allDayStatus = false;
}
// -----------------------
$eventsArray['id'] =  $row['event_id'];
$eventsArray['title'] = $row['event_title'];
$eventsArray['start'] = $row['event_start'];
$eventsArray['end'] = $row['event_end'];
$eventsArray['url'] = $row['event_url'];
$eventsArray['allDay'] = $allDayStatus;
$eventsArray['className'] = $row['event_class'];
$eventsArray['admNotes'] = $row['event_adm_notes'];
// ----------------------- 
```

# python - 如何在 python 3 中使用带有 GUI 的变量

> ID：16220840
> 
> 赞同：0
> 
> 时间：2013-04-25T17:13:48.537
> 
> 标签：python, user-interface, python-3.x, tkinter

我正在努力做到这一点，所以当您按“HELLO”五次时，文本变为红色，只是当我将任何内容添加到可行性时，它没有添加任何内容。这就是代码。

```
 from tkinter import *
    class application(Frame):
    global t
  t=1  
   def info(self):
      print ("test")
    global t
    t=t+5

  def createWidgets(self):
    global t
    t=t
    self.exet= Button(self)
    self.exet["text"] = "QUIT"
    self.exet["fg"] = "red"
    self.exet["command"] = self.quit

    self.exet.pack({"side": "left"})

    self.hi = Button(self)
    self.hi["text"] = "HELLO",
    if t == 5:
        self.hi["fg"] = "red"

    self.hi["command"] = self.info
    self.hi.pack({"side": "left"})

  def __init__(self, master=None):
    Frame.__init__(self, master)
    self.pack()
    self.createWidgets() 
```

感谢任何人的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:24:36.577

这里有几个问题：首先，您使用全局变量，然后将其包含在函数范围内。取而代之的是，您应该使用实例变量（`self.t`，甚至`self.counter`为了更好的可读性）。其次，您正在检查 中的计数器的值`createWidgets`，该方法仅调用一次`__init__`。您应该在按钮上的事件处理函数中增加并检查其值。

```
class application(Frame):

    def info(self):
        self.counter += 1
        print(self.counter)
        if self.counter == 5:
            self.hi["fg"] = "red"

    def createWidgets(self):
        self.counter = 0
        self.exet= Button(self)
        self.exet["text"] = "QUIT"
        self.exet["fg"] = "red"
        self.exet["command"] = self.quit
        self.exet.pack({"side": "left"})

        self.hi = Button(self)
        self.hi["text"] = "HELLO",
        self.hi["command"] = self.info
        self.hi.pack({"side": "left"})

    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.pack()
        self.createWidgets() 
```

# matlab - Matlab错误：？？？下标索引必须是实数正整数或逻辑数

> ID：16220841
> 
> 赞同：2
> 
> 时间：2013-04-25T17:13:54.120
> 
> 标签：matlab, function

我自己编写的函数有问题。我没有找到任何问题如何自己解决，所以我在这里发布它希望有人会看到我没有看到的东西......（这是我的第一个问题，我不知道如何格式化它Matlab代码，我很抱歉）

这是我的函数，它计算光线（由段 CD 给出）在“墙”（由 AB 给出）上的入射角。AB（墙）应该是水平或垂直的，段 CD 和墙 AB 应该有一个交叉点：

```
function angle = incidentAngle(AB,CD)

%AB and CD are two vectors of size 1x4
%AB = [a1 a2 b1 b2] et CD = [c1 c2 d1 d2]
%AB is a segment from the point (a1,b1) to the point (a2,b2)

    if(AB(1)==AB(3)) % The wall is vertical
        if(CD(1)==CD(3)) % The "ray" is vertical too, the angle is 90° or pi/2
            angle = pi/2;
        else
            angle = abs(atan((CD(2)-CD(4))/(CD(1)-CD(3))));
        end
    else
        if(AB(2)==AB(4))% The wall is horizontal
            if(CD(2)==CD(4)) % The "ray" is horizontal too, the angle is 90° or pi/2
                angle = pi/2;
            else
                angle = abs(atan((CD(1)-CD(3))/(CD(2)-CD(4))));
            end
        end
    end

end 
```

问题（例如）是：

当我将 AB 和 CD 定义为

```
AB = [0 1 0 5];
CD = [-1 2 3 4]; 
```

我做的

```
angle = incidentAngle(AB,CD) 
```

在命令窗口中，我收到消息错误：

```
??? Subscript indices must either be real positive integers or logicals. 
```

而且我不明白为什么...

如果现在我只是在命令窗口中复制该函数，如下所示：

```
AB = [0 1 0 5];
CD = [-1 2 3 4];

angle = 0;

if(AB(1)==AB(3)) % The wall is vertical
    if(CD(1)==CD(3)) % The "ray" is vertical too, the angle is 90° or pi/2
        angle = pi/2;
    else
        angle = abs(atan((CD(2)-CD(4))/(CD(1)-CD(3))));
    end
else
    if(AB(2)==AB(4))% The wall is horizontal
        if(CD(2)==CD(4)) % The "ray" is horizontal too, the angle is 90° or pi/2
            angle = pi/2;
        else
            angle = abs(atan((CD(1)-CD(3))/(CD(2)-CD(4))));
        end
    end
end

angle 
```

我得到正确答案，

```
angle =

0.4636 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:22:52.407

有一个内置的 Matlab 函数叫做`angle`，用你的变量名覆盖它会带来麻烦。尝试更改该变量名称，`angl`改为使用名称。这应该可以解决您的问题。

# java - Calendar.getTimeInMillis() 为同一实例返回不同的结果

> ID：16220842
> 
> 赞同：2
> 
> 时间：2013-04-25T17:13:58.087
> 
> 标签：java

我有以下代码并在 Calendar 实例上调用 getTimeInMillis() 。我希望返回值相同，但它在运行之间返回不同的结果。

结果如下，这是不同的。我做错了什么，需要改变什么？

时间 1369454400208 时间 1369454400185 时间 1369454400926

```
public class MyTest {

public static void main(String[] args){

    Calendar calendar = new GregorianCalendar();

    calendar.set(calendar.YEAR, 2013);
    calendar.set(calendar.MONTH, 4);
    calendar.set(calendar.DATE, 24);
    calendar.set(calendar.HOUR, 12);
    calendar.set(calendar.MINUTE, 00);
    calendar.set(calendar.SECOND, 00);      

    System.out.print("Time " + calendar.getTimeInMillis());

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T17:15:42.233

您还需要重置毫秒。

```
calendar.set(Calendar.MILLISECOND, 0); 
```

请注意，您应该使用`Calendar.*`来访问静态字段，而不是`calendar.*`.

# c# - 无法更改 gridview itemssource

> ID：16220843
> 
> 赞同：0
> 
> 时间：2013-04-25T17:13:58.007
> 
> 标签：c#, xaml, gridview, itemsource

我正在尝试在 gridview 中更改一个框的颜色（具有 ItemTemplates 有 100 个绿色框）。

首先，我创建了一个列表（键入为我的类），并将所有项目添加到列表中，并将列表添加到我的 gridview 源中：

```
grid1.ItemsSource = boxlist; 
```

之后，我为 gridview 上的项目单击添加了一个单击事件。我希望当我点击一个项目时，这个项目的颜色会改变。所以我编辑了列表：

```
int id = ((Boxes)e.ClickedItem).id;
boxlist[id].color = "DarkRed";
grid1.ItemsSource = boxlist; 
```

我试过它来改变点击项目的颜色，但它不起作用。列表项的颜色正在成功更改，但 gridview 没有接受它。但我希望 gridview 采用这个新来源。我怎么解决这个问题？

我的课 ：

```
class Boxes
{
    public int id { get; set; }
    public string color { get; set; }
} 
```

GridView 的 XAML

```
<GridView x:Name="grid1"  HorizontalAlignment="Left" Margin="354,41,0,0" VerticalAlignment="Top" Width="800" Height="650" SelectionMode="None" IsItemClickEnabled="True" ItemClick="grid1_ItemClick">
        <GridView.Resources>
            <DataTemplate x:Key="DataTemplate1">
                <Grid Height="50" Width="50">
                    <Rectangle x:Name="rect1" Width="50" Height="50" Fill="{Binding color}" Tag="{Binding id}"/>
                </Grid>
            </DataTemplate>
        </GridView.Resources>
        <GridView.ItemTemplate>
            <StaticResource ResourceKey="DataTemplate1"/>
        </GridView.ItemTemplate>
    </GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:43:55.683

您必须在设置新值之前将 ItemSource 设为空：

```
ctlList.ItemsSource = null;
ctlList.ItemsSource = YourObjects; 
```

我建议使用 DataContext 和 Binding 而不是您的解决方案：

[http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples](http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:38:14.343

您需要像这样使用 DataContext ：

```
grid1.DataContext = boxlist; 
```

# javascript - 将对象变量更改为字符串

> ID：16220844
> 
> 赞同：0
> 
> 时间：2013-04-25T17:13:59.927
> 
> 标签：javascript

我做了一些**拆分**，当我使用**typeof**测试数据类型时，它说它是一个对象

现在我需要它成为字符串或数字数据类型，我尝试使用它

```
String(data[0]); 
```

但我只得到第一个字符，而不是得到一个保留字。

在这种情况下我应该做的正确方法是什么？

请指教，

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:20:12.003

根据您的数据对象是什么，您可以使用`.toString()`或`String(data)`通常将对象转换为字符串。如果您有一个数字字符串，您可以使用`parseInt(str)`或`parseFloat(str)`将字符串转换为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:20:39.843

代替 typeof，使用 instanceof

```
if(data[0] instanceof String)
{
    //it is a string
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:18:45.280

需要更多代码。例如，这很好用：

```
var str = "300 #400 How are you doing today?";
var words = str.split(" ");
alert(typeof (words[0])); // Result: string
alert(words[0]); // Result: 300 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T17:27:57.760

100% 等同于使用这些 toString 方法的最短代码就是

```
(''+data) 
```

# windows - Windows 形式的 XNA 更新？

> ID：16220845
> 
> 赞同：0
> 
> 时间：2013-04-25T17:14:00.123
> 
> 标签：windows, forms, function, xna

有没有办法将XNA的更新功能转换成windows窗体？我浏览了所有示例，它们似乎都专注于绘图功能，除非我遗漏了其中的某些内容。

*注意：我正在寻找一种从 XNA 获取实际更新方法的方法，而不是使用秒表制作自定义方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:12:50.593

如果您想以其他方式托管您的游戏，您可以将 Microsoft.Xna.Framework.Game 中的功能替换为您自己的代码。

不幸的是，这包括 Update 和 Draw 方法。这就是为什么您看到的示例都实现了自己的游戏时间。

资料来源：

[http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1) [http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game_members.aspx)

# spring-security - Spring 注销后不接受我的第二次登录

> ID：16220847
> 
> 赞同：0
> 
> 时间：2013-04-25T17:14:09.730
> 
> 标签：spring-security

我从 Spring Security 框架开始。我设置了框架。它工作正常，但我的问题在于注销功能......当我断开连接时。当他在页面访问被拒绝时通过我时，我又来连接一次。每当我因为他接受我的连接而被迫重新启动tomcat时

我的第二个问题：我试图测试说超时会话的东西，我停留了 1 分钟以上，当我回来时，我仍然在同一页面上。我不知道如何激活这个选项我想我在我的 security.xml 上配置了但它不起作用

这是我的 Sprintconfiguration

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <sec:http auto-config="true" use-expressions="true">
        <sec:intercept-url pattern="/pagess/**" access="hasRole('ROLE_USER')"/>
        <sec:form-login login-page="/login.jsf"  authentication-failure-url="/loginFailed.jsf"  default-target-url="/pagess/Menu.jsf"/>
        <sec:logout  logout-success-url="/login.jsf" delete-cookies="JSESSIONID"  invalidate-session="true"/>

        <sec:session-management invalid-session-url="/login.jsf">
            <sec:concurrency-control max-sessions="1"
                error-if-maximum-exceeded="true" />
        </sec:session-management>       
    </sec:http>

    <sec:authentication-manager alias="authenticationManager">
        <sec:authentication-provider>
            <sec:jdbc-user-service data-source-ref="DataSource"/>
        </sec:authentication-provider>
    </sec:authentication-manager> 
</beans:beans> 
```

这是我的 bean Loginbean

```
@ManagedBean(name="loginBean")
@SessionScoped
public class LoginBean {

    private String username;  

    private String password; 

    public String getUsername() {  
        return username;  
    }  

    public void setUsername(String username) {  
        this.username = username;  
    }  

    public String getPassword() {  
        return password;  
    }  

    public void setPassword(String password) {  
        this.password = password;  
    }  

    public String doLogin() throws ServletException, IOException {

        ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();

        RequestDispatcher dispatcher = ((ServletRequest) context.getRequest())
                .getRequestDispatcher("/j_spring_security_check?j_username=" + username
                                + "&j_password=" + password);

        dispatcher.forward((ServletRequest) context.getRequest(),
                (ServletResponse) context.getResponse());

        FacesContext.getCurrentInstance().responseComplete();

        return null;
    }

    public String dologout() throws IOException {
        FacesContext.getCurrentInstance().getExternalContext()
        .invalidateSession();
this.username = "";
this.password = "";
        ExternalContext context =FacesContext.getCurrentInstance().getExternalContext();
        context.redirect(context.getRequestContextPath()
                + "/j_spring_security_logout");
        FacesContext.getCurrentInstance().responseComplete();
        return null;

    }
} 
```

这是 WebXml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0"
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
 <display-name>PFE</display-name>
 <context-param>
<param-name>primefaces.THEME</param-name>
<param-value>trontastic</param-value>
</context-param>
 <context-param>
  <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  <param-value>client</param-value>
 </context-param>
 <context-param>
  <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
  <param-value>resources.application</param-value>
 </context-param>
 <listener>
  <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
 </listener>
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
  <welcome-file>/Test.jsp</welcome-file>
 </welcome-file-list>
 <session-config>
 <session-timeout>
 30
 </session-timeout>
 </session-config>

 <context-param>
  <param-name>contextConfigLocation</param-name>
      <param-value>
     /WEB-INF/application.xml
     /WEB-INF/spring_sec.xml
      </param-value>
   </context-param>
   <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
 <listener>
  <listener-class>
   org.springframework.web.context.ContextLoaderListener
  </listener-class>
   </listener>

   <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

   <listener>
  <listener-class>
   org.springframework.web.context.request.RequestContextListener
  </listener-class>
   </listener>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:49:16.427

我解决了我的问题..缺少一个 Listner

```
<listener> 
<listener-class>
org.springframework.security.web.session.HttpSessionEventPublisher
</listener-class> 
</listener 
```

# sql-server - 仅允许特定用户进行远程连接

> ID：16220848
> 
> 赞同：1
> 
> 时间：2013-04-25T17:14:18.527
> 
> 标签：sql-server, sql-server-2012-express

我刚刚在我的 SQL Server Express 2012 安装上启用了远程连接。现在我有点担心服务器的安全性，因为允许连接到每个人听起来对我来说是一个很大的安全漏洞。

如果用户尝试与不在我的“允许”列表中的用户进行身份验证，是否可以告诉 SQL Server 断开连接？如果是这样，我可以将我的监控用户添加到此列表中，而不必担心我的管理帐户可以访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:36:12.153

首先，这大概是DBA网站应该问的一个问题。无论如何，您可以设置服务器的安全性，以便只允许某些用户登录。

设置服务器时，将登录添加到服务器级别，然后将用户添加到数据库级别。显然，只有设置好的用户才能使用特定的数据库。您可以将用户置于角色中，例如，他们将对数据库具有只读访问权限。您可以控制到对象级别，谁可以访问什么。

[这里](http://msdn.microsoft.com/en-us/library/bb326598%28v=sql.105%29.aspx)有一篇关于 SQL Server 安全性的好文章

话虽如此，有时，在您设置了安全性之后，您需要禁止某些用户不允许登录。也许您正在对数据库进行一些重大升级。在这种情况下，一种选择是创建登录触发器。

每次用户登录时都会触发登录触发器。您可以创建一个“允许”用户表，并且在触发器中，如果他们不在您 ROLLBACK 的表中，则有效地禁止登录。

[以下](http://msdn.microsoft.com/en-us/library/bb326598%28v=sql.105%29.aspx)是有关创建登录触发器的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:37:08.877

能够远程连接到 SQL Server 实例并不意味着他们可以登录到它。如果它们未得到正确授权，它们仍应由 SQL Server 登录身份验证序列启动。

这对于“受信任的登录”（授权来自他们的 Windows 登录/域帐户）是静默/不可见的，但它仍然会发生。

如果您查看服务器的“安全”文件夹（在 SSMS 中），您将看到 SQL Server 的授权登录列表。通过添加或删除这些，您可以控制谁可以在您的 SQL Server 上实际创建会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:28:20.773

您应该能够将 db 服务器设置为仅接受来自某些 IP 地址的连接，而不是接受所有 IP 地址的连接。我不确定 T-SQL 语法，但肯定有人会加入正确的语法。

话虽如此，如果您真的是认真的，那么您将希望使用您提供给他们的证书对客户进行身份验证。请参阅此及其链接到的各种文章：

[https://security.stackexchange.com/questions/14589/advantages-of-client-certificates-for-client-authentication](https://security.stackexchange.com/questions/14589/advantages-of-client-certificates-for-client-authentication)

# javascript - div滚动条没有出现

> ID：16220850
> 
> 赞同：0
> 
> 时间：2013-04-25T17:14:23.803
> 
> 标签：javascript, html, css

我不经常使用 css，但我认为下面应该创建一个可滚动区域。相反，它似乎只是隐藏了所有不适合但无法滚动的文本。chrome/ie/firefox 中的行为似乎相同，所以我猜我只是做错了什么。

索引.html

```
<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <title>Foo</title>
  </head>
  <body>
    <div id="history" class="scroll-area">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque ac euismod nulla. Fusce enim tortor, elementum ut volutpat non, interdum ut nunc. Vestibulum placerat mi vel risus ultricies non bibendum urna vestibulum. Curabitur volutpat, turpis vel suscipit accumsan, lectus nibh blandit sem, ut elementum massa tortor quis augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis cursus lacus ac diam sollicitudin tempor. Vivamus at sagittis lacus. Donec augue neque, cursus in tristique at, mattis vitae eros.
    </div>
  </body>
</html> 
```

样式.css

```
#history {
    height: 200px;
    width: 200px;
    border: 1px solid #666;
    padding: 8px;
}

.scroll-area {
    overflow-style: auto;
    overflow: hidden;
} 
```

![非滚动图片示例](https://i.stack.imgur.com/WYgxx.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:15:41.783

您应该明确设置`overflow`为`auto`（或者`scroll`如果您需要滚动条一直出现）：

```
.scroll-area {
    overflow: auto;
} 
```

**演示：http:** [//jsfiddle.net/aNTHx/](http://jsfiddle.net/aNTHx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:16:43.380

好吧，您正在使用[`overflow-style`](http://www.browsersupport.net/CSS/overflow-style)尚未在任何主要浏览器中受支持的..

设置`overflow`为自动或滚动`.scroll-area`将使垂直滚动条按预期显示

[http://jsfiddle.net/kRcaR/1/](http://jsfiddle.net/kRcaR/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:20:08.270

**HTML**

```
<div id="history" class="scroll-area">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque ac euismod nulla. Fusce enim tortor, elementum ut volutpat non, interdum ut nunc. Vestibulum place
</div> 
```

**CSS**

```
#history {
    height: 200px;
    width: 200px;
    border: 1px solid #666;
    padding: 8px;
}

.scroll-area {
    overflow-style: auto;
    overflow: scroll;
} 
```

**演示**

```
http://jsfiddle.net/YxsLc/1/ 
```

**解释**

如果您想滚动 html 元素中的内容，您应该使用属性`overflow: scroll`；

在未来的代码中祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T17:16:26.317

您需要设置`overflow: auto`或者如果您只想滚动 y 轴`overflow-y: auto; overflow-x: hidden`；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T17:16:34.960

您的 div 应该具有垂直滚动的溢出样式：

```
.scroll-area {
  overflow-y: scroll;
} 
```

或者如果你想水平滚动：

```
.scroll-area {
  overflow-x: scroll;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T17:17:05.430

您用 隐藏滚动条`overflow: hidden;`。

如果您更改为：

```
.scroll-area {
    overflow-style: auto;
    overflow: auto;
} 
```

# database - 我可以为单击时可以获得的按钮分配唯一的 ID 吗？

> ID：16220855
> 
> 赞同：0
> 
> 时间：2013-04-25T17:14:39.090
> 
> 标签：database, vb.net, web-applications, .net-4.0, visual-studio-2012

我有一个数据网格，列出了我表中的项目。我添加了一列，每行都有一个按钮，如果单击该按钮，我希望用户能够编辑该项目。

当我创建表时，他们是一种将该项的 ID 分配给按钮的方法，以便我可以在按钮单击中引用它，然后查询数据库并检索我需要编辑的记录？

我正在使用带有 VB.Net 4.0 的 Visual Studio 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:24:49.537

所以你应该能够做这样的事情，除非我错过了什么。分配 ID 将发生在您创建表格行和按钮的位置，并且可能不在页面加载中。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) 
   //create your button then assign the id       
   myButton.ID = "123"
   // assign a generic event handler for all the buttons in the table.
   AddHandler myButton.Click, AddressOf myButtons_Clicked
End Sub

Protected Sub myButtons_Clicked(ByVal sender As Object, ByVal e As EventArgs)
  Button thebtn = CType(sender, Button)
  string btnID = thebtn.ID
  // pass of the ID to whatever method is doing your processing
End Sub 
```

# ruby - 为什么要使用字符串键对符号进行哈希处理

> ID：16220856
> 
> 赞同：2
> 
> 时间：2013-04-25T17:14:43.857
> 
> 标签：ruby, sinatra, symbols

这个问题应该与这个问题相反：[为什么在 Ruby 中使用符号作为哈希键？](https://stackoverflow.com/q/8189416/1313143)

如您所见，每个人都同意符号是哈希键最合乎逻辑的选择。但是，我正在使用 sinatra 框架构建一个 Web 应用程序，并且该`request`对象是一个包含`String`s 作为键的哈希。谁能解释为什么这将是一种设计选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:19:01.097

因为键的来源——查询字符串——是由字符串组成的，所以在这个字符串中搜索键，通过字符串索引散列是最直接方便的。

在 Ruby 运行时创建的每个 Symbol 都被分配并且永远不会被释放。通过发送具有唯一查询字符串参数的数十万个请求，理论上存在（但不太可能）DOS 攻击。如果这些是符号化的，每个请求都会慢慢增加运行时内存池。

另一方面，字符串可能会被垃圾收集。在各种请求中处理的数千个唯一字符串最终会消失，不会产生长期影响。

**编辑**：请注意，使用[Sinatra](http://www.sinatrarb.com/)，符号也*可*用于访问`params`哈希。但是，这是通过创建一个由字符串索引的哈希，并在您发出请求时将符号（在您的代码中）转换为字符串来完成的。除非您执行以下操作：

```
params.each{ |key,_| key.to_sym } 
```

...您不会受到任何符号伪 DOS 攻击的风险。

# http - url编码的正确用法

> ID：16220861
> 
> 赞同：1
> 
> 时间：2013-04-25T17:14:54.357
> 
> 标签：http, http-headers

我正在制作一个 HTTP 客户端，我需要在其中发送 HTTP 获取请求以获取数据。我正在使用 boost asio 库，因此我无法使用任何标准的 url 编码库。

这是我从 netcat 和 Mozilla 得到的（一个典型的 get 请求）

```
localhost:2000/questions/10838702/how-to-encode or-d   ecode-url-in-objective-c 
```

获取请求网址

```
F:\pydev>nc -l -p 2000
GET /questions/10838702/how-to-encode%20or-d%20%20%20ecode-url-in-objective-c HTTP/1.1
Host: localhost:2000
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20100101 Firefox/11.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

我发现 Mozilla 只对 url 的查询部分进行编码。

我试过这个 url 编码网页 [http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

它对以下网址进行编码

```
localhost:2000/questions/10838702/how-to-encode or-d   ecode-url-in-objective-c 
```

至

```
localhost%3A2000%2Fquestions%2F10838702%2Fhow-to-encode%20or-d%20%20%20ecode-url-in-objective-c 
```

谁能建议我在哪里使用 URL 编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:47:40.293

作为一般规则，除字母数字 (A-Z0-9) 之外的任何字符，`-` `_` `.`或者`~`在 URL 中具有某些特殊用途，或者不允许使用。

保留字符是`;` `/` `?` `:` `@``&` `=`和`space`。如果您以不同于其特殊含义的方式使用这些字符中的任何一个，那么您必须对其进行 URL 编码。为了安全起见，许多编码器只是对不明确安全的所有内容进行编码。

例如，假设您有一个带有问号的文件名（让我们为文件命名`file?name`，并且您需要创建一个 URL。问题是它`http://somehost.com/file?name`不会按照您想要的方式解释。url 将匹配`/file`在您的网络空间中，并且有一个搜索词`name`. 您必须对文件名进行编码才能获得 URL `http://somehost.com/file%3Fname`。

该规范允许您对任何字符（甚至是字母数字）进行 URL 编码，并期望它们不会被服务器编码。您只需确保将保留字符用于其预期目的的任何地方，它们都没有被编码。例如：您不想编码冒号或斜杠，`http://somehost.com`因为它们被用作分隔符。

url-encoding 最常见的用途是准备表单数据。在这种情况下，您通常从一组键值对开始。您将为这样的形式构建编码数据（在伪代码中）：

1.  编码键和值
2.  将键和值与它们之间的“=”连接起来以获取术语。例如：`encodedKey=encodedValue`。
3.  重复 1 和 2，直到你有一个术语列表
4.  用 & 号加入所有条款。例如：`encKey1=encVal1&encKey2=encVal2`

解码是相反的过程：

1.  沿“&”符号拆分表单数据以获取术语数组
2.  拆分“=”字符上的每个术语以获取编码的键和值
3.  解码键和值

这听起来很简单，但你可能会*惊讶*于有多少人弄错了。

我在这里掩盖了一些更精细的细节。与往常一样，相关规范是硬道理。在这种情况下，[RFC 1738](http://www.ietf.org/rfc/rfc1738.txt)。

# xamarin.ios - What's the correct way to bind this interface?

> ID：16220869
> 
> 赞同：1
> 
> 时间：2013-04-25T17:15:10.243
> 
> 标签：xamarin.ios

I'm having a hard time to come up with the correct way to translate the last part (<GPUImageInput>) into the binding. Any suggestions?

```
@interface GPUImageFilter : GPUImageOutput <GPUImageInput> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T11:17:07.760

从这里开始：http: [//docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries#Binding_Protocols](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries#Binding_Protocols)和[http://docs.xamarin.com/guides/ios/advanced_topics/api_design#Models](http://docs.xamarin.com/guides/ios/advanced_topics/api_design#Models)。

根据里面的内容`GPUImageInput`，我会将它与`[Model]`属性绑定，然后`GPUImageFilter`从它继承

```
[Model]
//Look, no BaseTypeAttribute
interface GPUImageInput {
    //[Export] everything you need
}

[BaseType (typeof (XXXX))]
interface GPUImageFilter : GPUImageInput {
    //[Export again]
} 
```

希望能帮助到你

# android - 如何在 Android 中将 POJO 转换为映射/映射到 POJO

> ID：16220871
> 
> 赞同：1
> 
> 时间：2013-04-25T17:15:19.107
> 
> 标签：android, hashmap, pojo, apache-commons-beanutils

我的问题是：有没有像 BeanUtils(apache) 这样的工具可以在 ANDROID 中使用？请给我一些提示。

```
//here is a simple POJO
public class Pojo{
  private String name;
  private int age;
  private double money;
//some set/get method ............
}
//and 
 Pojo pojo1 = new Pojo();
 pojo1.setName("jack");
 pojo.setAge(90);
 pojo.setMoney(99.78);
//then I have a blank map:
 HashMap<String, Object> map1 = new HashMap<String, Object>(); 
```

我想将 pojo1 中的值复制到 map1；我想将带有值的地图复制到一个空白的 Pojo 对象；

map中的keys和Pojo的fields一样；

在 map 到 pojo 的过程中，应该有一个自动（但简单）的类转换（例如 String 到 int 等）；

我知道 apache 有 beanutils，但它不能在 ANDROID 中工作。

我的英文不好，刚学了半年java。我花了 2 天时间找到这样的工具。

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:08:52.997

使用[杰克逊](http://wiki.fasterxml.com/JacksonHome)来做你的项目可能是最好的。您需要为要解码的 XML 创建类。如果服务器端没有类，可以使用 JAXB 将 XML 转换为 Java 类。

为了使 Jackson 能够反序列化您的类，请添加`@XmlRootElement`到您的根类中。然后您只需创建一个实例`XmlMapper`并使用序列化/反序列化方法。

使用 Jackson 的另一个好处是，如果您的服务需要更轻量级，您将能够转换为 JSON。

如果您认为它不起作用，那么将一些示例发布到您的帖子或[Gist](http://gist.github.com)中以查看代码并找出您遇到的任何问题。

参考：

*   [用于 java bean 到 json\xml 序列化的 Jackson 处理器](https://stackoverflow.com/questions/7849540/jackson-processor-for-java-bean-to-json-xml-serialization)
*   [http://wiki.fasterxml.com/JacksonHome](http://wiki.fasterxml.com/JacksonHome)
*   [http://www.cowtowncoder.com/blog/archives/2012/03/entry_467.html](http://www.cowtowncoder.com/blog/archives/2012/03/entry_467.html)

# delphi - 如何从注册表字符串中读取十六进制值

> ID：16220873
> 
> 赞同：-2
> 
> 时间：2013-04-25T17:15:21.073
> 
> 标签：delphi

我有一个 Delphi XE2 项目来检查注册表**项 MyCompanyName\1**中的一个十六进制值。如果**十六进制值**是**13**，那么会有一些消息，否则会有一些其他消息。 ![我的项目](https://i.stack.imgur.com/wWJUQ.jpg)

所以我定义了以下代码：

```
procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  RegistryEntry : TRegistry;
begin
  RegistryEntry := TRegistry.Create(KEY_READ or KEY_WOW64_64KEY);
  RegistryEntry.RootKey := HKEY_LOCAL_MACHINE;
  if (RegistryEntry.KeyExists('SOFTWARE\MyCompanyName\1\')) then
    begin
      if (RegistryEntry.OpenKey('SOFTWARE\MyCompanyName\1\',true)) then
        begin
          if (RegistryEntry.ReadString('SettingValue') = '0x00000013')  then
            begin
              Memo01.Lines.Add('SettingHexadeciamlValue exist properly')
            end
          else
            begin
              Memo01.Lines.Add('SettingHexadeciamlValue does not exist properly')
            end;
        end
      else
        begin
          if (RegistryEntry.OpenKey('SOFTWARE\MyCompanyName\1\',false)) then
            begin
              Memo01.Lines.Add('Unable to read RegistryKey ''MyCompanyName''Exiting.......')
            end;
        end;

    end
  else
    begin
      Memo01.Lines.Add('RegistryKey ''MyCompanyName'' does not exist')
    end;
end; 
```

编译后，当我运行应用程序**AsAdministrator**时，我收到错误提示**Invalid data type for 'SettingValue'**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:19:32.653

这些值是整数，而不是字符串，因此您应该使用`ReadInteger`，而不是`ReadString`。

现在，十六进制只是向用户*呈现*整数的一种方式，即创建整数的“文本表示”的方法。例如，整数 62 有许多不同的文本表示：

```
62 (decimal)
LXII (Roman numerals)
3E (hexadecimal)
111110 (binary)
Sextiotvå (Swedish words) 
```

等等

如果您想以十六进制显示此数字，就像注册表编辑器 ( `regedit.exe`) 所做的那样，您可以使用该`IntToHex`函数创建参数整数的十六进制文本表示。例子：

```
var
  myvalue: integer;

...

myvalue := ReadInteger('SettingValue');
ShowMessage(IntToHex(myvalue, 8)); 
```

# html - How to use Anti-aliasing in fonts

> ID：16220877
> 
> 赞同：0
> 
> 时间：2013-04-25T17:15:31.557
> 
> 标签：html, css, fonts

Is there any way to use anti aliasing in big fonts?

fiddle: [http://jsfiddle.net/Chead/HX5nv/](http://jsfiddle.net/Chead/HX5nv/)

im using this code in exemple:

```
<span style="font-size: 70px; font-family: arial; font-weight: bold;">
     Im a CLEAN text bold!
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:18:29.303

在 IE10 中对我来说看起来是抗锯齿的。字体渲染在浏览器之间一直不一致。

如果您使用的是 Chrome（或其他 Webkit 浏览器），请尝试添加以下内容：

```
-webkit-font-smoothing: antialiased; 
```

# java - 对象的全局实例

> ID：16220885
> 
> 赞同：0
> 
> 时间：2013-04-25T17:15:57.840
> 
> 标签：java, class, singleton, jung

实际上，我使用[Jung](http://jung.sourceforge.net) 库来构建我的超图。

我只想在我的应用程序中使用一个超图实例，这样我就无法访问它并从我的应用程序中的任何类修改它（添加顶点、添加 hyperEdge 等）。

有可能的 ？

我尝试使用单例模式，但据我在[这个问题](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons/138012#138012)中所读到的，这不是一个好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:53:11.990

这个答案非常好在[此处输入链接描述](https://stackoverflow.com/a/162090/68969)，我可能更喜欢接口和实现，但您仍然可以使用单例，例如：

```
public interface GraphSource {

    public Graph getGraph();
}

public enum DefaultGraph implements GraphSource {

    INSTANCE;

    private Graph<String,String> graph;

    {
        graph = new SparseGraph<String,String>();
    }

    @SuppressWarnings("rawtypes")
    @Override
    public Graph getGraph() {
        return graph;
    }

}

public class MyClass {

    public MyClass(GraphSource source) {
        Graph myGraph = source.getGraph();
    }
} 
```

但我会避免：

```
public class MyClass {

    GraphSource source = DefaultGraph.INSTANCE;

    public MyClass(GraphSource source ) {
        Graph myGraph = source.getGraph();
    }
} 
```

因为很难对图表进行 Stub 或 Mock 测试。对于大型应用程序，我会考虑使用[控制反转，](http://en.wikipedia.org/wiki/Inversion_of_control)但如果您不熟悉小型应用程序，这将是矫枉过正。

# ruby-on-rails-3 - Rails - Curb gem - 无法分配内存

> ID：16220888
> 
> 赞同：0
> 
> 时间：2013-04-25T17:16:05.403
> 
> 标签：ruby-on-rails-3, exception, memory-management, curb

在运行任务期间，此异常由 Curb gem ( [https://github.com/taf2/curb](https://github.com/taf2/curb) ) 引发。

```
failed to allocate memory 
```

这很奇怪，因为在 Exception 之前 gem 正常工作（与其他 curl 调用）。

有任何想法吗？

我在 Ubuntu 服务器上使用 Ruby 1.9.3（在本地开发模式下同样的错误 - Mac OS X）

**编辑**
在我的任务中，我做了很多（+10k）这样的电话

```
req = Curl::Easy.new do |curl| 
    curl.ssl_verify_peer = false
    curl.url = url
    curl.headers['Content-type'] = 'application/json'
end
req.perform 
```

# sql-server - Sharepoint 2010 Designer 读取操作

> ID：16220889
> 
> 赞同：0
> 
> 时间：2013-04-25T17:16:12.637
> 
> 标签：sql-server, sharepoint-2010

我创建了一个查询 TFS_Warehouse 数据库的 SQL Server 存储过程。我想为此存储过程创建一个外部内容类型，以便可以在共享点页面上的列表中显示结果。

存储过程有两个输入参数（@ReleaseId 和@ProjectNodeType），它根据返回 CurrentWorkItemBK、WorkItemId 和描述的那些输入对仓库执行选择。

我能够成功创建读取列表操作，但我很难创建它说我需要外部列表的读取操作。我一直在尝试以与设置读取列表操作类似的方式设置它，但它不断给出错误。

关于我需要做什么或我做错了什么的任何想法？

# android - Androiddriver Python 绑定 httplib

> ID：16220896
> 
> 赞同：2
> 
> 时间：2013-04-25T17:16:39.663
> 
> 标签：android, python, selenium-webdriver, remotewebdriver

我成功地在模拟器上设置了 androiddriver，但我正在努力解决 httplib 错误。这是我在mac上设置android sdk后采取的步骤。

```
1\.  ./adb devices, which returned emulator-5554
2\. ./adb emulator-5554 -s forward tcp:8080 tcp:8080
3\. visited http://localhost:8080/wd/hub/status in my browser and received a { status: 0 }
4\. In the python shell (tried this on both python 2.7 & 2.6), I did:

>> from selenium import webdriver
>> from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
>> driver = webdriver.Remote("http://localhost:8080/wd/hub",     webdriver.DesiredCapabilities.ANDROID)
>> driver.get("http://www.google.com") 
```

有时，当我设置驱动程序变量时，我会收到错误（如下），有时不会。driver.get 命令也是如此。

堆栈跟踪如下：

```
 File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/webdriver.py", line 177, in get
    self.execute(Command.GET, {'url': url})
  File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/webdriver.py", line 163, in execute
    response = self.command_executor.execute(driver_command, params)
  File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/remote_connection.py", line 349, in execute
    return self._request(url, method=command_info[0], data=data)
  File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/remote_connection.py", line 396, in _request
response = opener.open(request)
  File     "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 394, in open
    response = self._open(req, data)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 412, in _open
'_open', req)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1199, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1170, in do_open
    r = h.getresponse(buffering=True)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 1027, in getresponse
response.begin()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 407, in begin
version, status, reason = self._read_status()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 371, in _read_status
    raise BadStatusLine(line)
httplib.BadStatusLine: '' 
```

还有其他人对此有解决方案的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T14:10:23.943

正如您所说，这已在[较新版本](https://code.google.com/p/selenium/downloads/detail?name=android-server-2.21.0.apk&can=2&q=)的 android-server 中得到修复。但是，对于那些无法更新的用户：这是由于驱动程序假设页面已过早加载到正在加载的实际页面。Selenium 从驱动程序接收一些 HTTP 标头，并且状态行无效。例如，

而不是`HTTP/1.0 200`状态行是空白的（如上）。

我发现解决此问题的一种方法是等待一个足够长的时间段，假设页面已被加载，然后尝试建立连接。

我通常用这行代码得到这个异常：

```
android = webdriver.Remote(command_executor='http://127.0.0.1:8080/wd/hub', desired_capabilities=capabilities.ANDROID) 
```

所以要修复，我只是将代码更改为等到调用成功：

```
android = None
while android is None:
    try:
        android = webdriver.Remote(command_executor='http://127.0.0.1:8080/wd/hub', desired_capabilities=capabilities.ANDROID)
    except:
        time.sleep(1)
        pass 
```

请注意，我仍然遇到问题，`save_screenshot`直到`BadStatusLine`我从 2.3.2 APK 降级到 2.2.1 APK

# validation - 淘汰赛验证：动态定义Required onlyIf规则

> ID：16220900
> 
> 赞同：1
> 
> 时间：2013-04-25T17:16:49.157
> 
> 标签：validation, knockout.js, knockout-validation

如何动态定义所需的“onlyIf”规则？

我从服务器获取所有输入的规则，格式如下：

```
"Var1" => array("required"=>"onlyIf", "requiredIf"=>"Var2", "min"=>1, "max"=>1000) 
```

我循环遍历所有规则，以这种方式设置 KO 验证的规则对象：

```
for (var key in rules) {
  var rule = new Object();
  if (typeof (key.required) != "undefined") 
    rule.required = key.required == "onlyIf" ? {
      onlyIf: function () {
        return self[self.rules[key].requiredIf]();
      }
  }: key.required;
} 
```

这不起作用，因为该`key`变量仅在该循环中定义。

我不想明确定义“onlyIf”规则，因为我有 >100 个变量要处理，而且这些规则已经存在于服务器上。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:40:46.420

我最终将`onlyIf`对象构造为字符串并使用以下命令执行它`eval()`：

```
for (var key in rules) {
  var rule = new Object();
  if (typeof (key.required) != "undefined") {
    if (key.required == "onlyIf") {
        onlyIf = eval( "onlyIf={onlyIf: function() { return self."+key.requiredIf+"(); }}" );
        thisRule.required= onlyIf;
    } else {
        thisRule.required = key.required;
    }
  }
} 
```

据我所知，这很有效，但感觉并不理想。我还必须测试它是否可以跨浏览器工作。

# ruby - Faye & Ruby 或 Node.js 可扩展性

> ID：16220901
> 
> 赞同：4
> 
> 时间：2013-04-25T17:16:49.313
> 
> 标签：ruby, node.js, faye

我正在寻找一个网络应用程序的原型，该应用程序将使用套接字将温和的消息流推送到移动网络应用程序客户端。我想选择一个适用于大量客户的架构，如果/当它转移到生产时（所以我以后不必改变）

我想从 Rails 开始，因为它熟悉并且从一开始就具有强大的结构，这意味着更容易原型化。我认为 Faye 将在 pub-sub 层方面提供我需要的东西，但我是否会通过使用 ruby​​ 和大量套接字连接来制造瓶颈，或者 Faye 会隔离/保护 Ruby 服务器免受该负载的影响，如果你遵循?

一开始负载不会很大，所以没关系，我只是不想在以后有很多套接字连接时陷入困境，我希望我使用 node.js ！服务器端 JS 对我来说是相当新的，但我想 JS 应用程序可以包含客户端也有好处

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T16:02:35.610

你可以看看[https://github.com/faye/faye-redis-node](https://github.com/faye/faye-redis-node)。

> 这个插件为 Faye 消息服务器提供了一个基于 Redis 的后端。它允许通过 Redis 数据库服务器存储状态和路由消息，将单个 Faye 服务分布在多个前端 Web 服务器上

# mysql - 解释字符集如何影响存储/显示

> ID：16220903
> 
> 赞同：5
> 
> 时间：2013-04-25T17:16:58.103
> 
> 标签：mysql, character-encoding

我觉得我还不明白这一点令人气愤，但也许一些解释会有所帮助。这是一个由两部分组成的问题，但希望这两部分都很小并且直接相关：

## 展示

我们最近遇到了一个问题，即内容将`U+00a0`（不间断空格）字符插入到带有`latin1`字符集的 DB 列中。只需在`SELECT`列中打印出“Â”。我不确定这是选择的产物还是显示器的产物，但我相信是前者。 `SELECT BINARY col`而是打印出“”，因为我的外壳有`$LANG = en_US.utf8`.

一个更明显的例子是“â„¢”与“™”

使用`SELECT CONVERT(col USING utf8)`仍然会打印出“Â”和“â„¢”——我不一定期望它会有所不同，但问题出在哪里？是存储时出现的问题吗？有没有办法从数据库中获取 UTF8 显示，而不是依赖 UI 来正确显示它（如果这有意义的话？）

## 贮存

为了自己重现此问题，我执行了以下操作：

```
CREATE TABLE chrs (
    lat varchar(255) charset latin1,
    utf varchar(255) charset utf8
);
INSERT INTO chrs VALUES ('™', '™');
INSERT INTO chrs VALUES (' ', ' '); -- U+00a0 
```

但是，这会导致：

```
> SELECT * FROM chrs;
+------+------+
| lat  | utf  |
+------+------+
| ™    | ™    |
|      |      |
+------+------+ 
```

我希望`lat`显示“Â”和“â„¢”，所以显然有些东西我不明白。

更重要的是：

```
 > SELECT BINARY lat, BINARY utf FROM chrs;
+------------+------------+
| BINARY lat | BINARY utf |
+------------+------------+
| �           | ™          |
| �           |            |
+------------+------------+ 
```

这表明这些值被不正确地 (?) 存储到`lat`.

我注意到那`SELECT @@character_set_client`是`utf8`，所以我将其更改为`latin1`并再次插入空格，但这会产生

```
| Â    | Â    | 
```

对于*两*列。 `SELECT BINARY lat`正确显示空格，但`SELECT binary utf8`仍打印出“Â.” 我希望该`utf8`列能够*更*正确地工作。

## 总结一下：

*   当您插入字符时，MySQL 实际上对字符做了什么？它是否取决于列字符集、客户端集、两者或其他？
*   由于上述不匹配，是否有可能在插入时搞砸数据？或者是否总是可以恢复最初插入的数据？
*   `charset`列上的 实际*对*存储/显示有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:47:32.303

简而言之，您的数据库似乎没问题，除非您通过将 [@@character_set_client] 从 [utf8] 更改为 [latin1] 来明确告诉它行为异常。否则，我认为您会看到使用 UTF-8 与 Windows-1252 的软件组件之间存在分歧的影响。

我们如何理解正在发生的事情？

首先，我们记得[在 MySQL latin1 中真正的意思是 Windows-1252](http://dev.mysql.com/doc/refman/5.0/en/charset-we-sets.html)，一种与“Latin-1”（也称为 ISO/IEC 8859-1）略有不同的编码。

现在让我们考虑以下有关商标符号和不间断空格的数据：

*   字符：“商标标志”
*   Unicode 点：U+2122
*   UTF-8 十六进制字节：E2 84 A2
*   Latin-1 (ISO 8859-1) 十六进制字节：此编码中没有此字符的代码
*   Windows 1252 十六进制字节：8D

*   字符：“不间断空间”

*   Unicode 点：U+00A0
*   UTF-8 十六进制字节：C2 A0
*   Latin-1 (ISO 8859-1) 十六进制字节：A0
*   Windows 1252 十六进制字节：A0

出现问题的各种方式：

*   将商标符号 UTF-8 十六进制字节解释为 Windows 1252 字节产生的字符： â „ ¢
    *   “带抑扬符的拉丁小写字母 a”、“双低 9 引号”、“分号”
    *   注意：Latin-1 和 Unicode 根本没有对 Windows-1252 定义为“双低 9 引号”的十六进制字节 84 进行解码。Unicode 在远离那里的代码点 U+201E 处对“双低 9 引号”进行编码。
*   将不间断空格 UTF-8 十六进制字节解释为 Windows 1252 字节产生的字符： Â [不间断空格]
    *   “带有抑扬符的拉丁大写字母 a”、“不间断空格”
*   将商标符号 Windows-1252 十六进制字节解释为 UTF-8 字节产生的字符：[无字符：显示平台的缺失字符标记，通常是问号符号的变体]

看来，当您插入时，您的数据库将“latin1”中的商标符号存储为十六进制字节 8D，并将“UTF-8”中的商标符号存储为十六进制字节 E2 A4 A2。它将不间断空间存储在“latin1”中作为十六进制字节“A0”，并在 UTF-8 中作为十六进制字节 C2 A0 存储。当您以交互方式执行普通 SELECT 时，“latin1”商标符号首先被转换为 Unicode 点 U+2122，然后转换为 UTF-8 十六进制字节 E2 84 A2，最终可能会被误解为 Windows-1252 字节。

在哪里可以找到上面显示的关于字符的数据：

*   [http://www.fileformat.info/info/unicode/char/2122/index.htm](http://www.fileformat.info/info/unicode/char/2122/index.htm)
*   [http://en.wikipedia.org/wiki/ISO/IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)
*   [http://en.wikipedia.org/wiki/Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)
*   [Windows-1252 与 Unicode 的相关性](http://msdn.microsoft.com/en-us/goglobal/cc305145.aspx)
*   [http://www.fileformat.info/info/unicode/char/201e/index.htm](http://www.fileformat.info/info/unicode/char/201e/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:53:43.400

如果链中的每个字符切换都支持 UTF8，则该字符应在 UTF8 字段中存储为 3 个字节，其十六进制为：

```
E284A2 
```

并且，在 latan1 字段中，作为 1 个字节，其十六进制为：

```
99 
```

***但是，您的客户端和连接在正确存储字符并将其显示为已存储*方面发挥着关键作用。**

通过连接与`latin1`客户端`latin1`连接，我创建并插入了两行。更改为 utf8 客户端/连接并重新插入。结果如下：

从我的 latin1 连接中选择：

```
mysql> select *, hex(lat), hex(utf) from chrs;
+------+------+----------+----------------+
| lat  | utf  | hex(lat) | hex(utf)       |
+------+------+----------+----------------+
| ™  | ™  | E284A2   | C3A2E2809EC2A2 |
|      |      | 20       | 20             |
| ?    | ?    | 99       | E284A2         |
|      |      | 20       | 20             |
+------+------+----------+----------------+ 
```

从我的 utf8 连接中选择：

```
mysql> select *, hex(lat), hex(utf) from chrs;
+---------+---------+----------+----------------+
| lat     | utf     | hex(lat) | hex(utf)       |
+---------+---------+----------+----------------+
| â„¢     | â„¢     | E284A2   | C3A2E2809EC2A2 |
|         |         | 20       | 20             |
| ™       | ™       | 99       | E284A2         |
|         |         | 20       | 20             |
+---------+---------+----------+----------------+ 
```

在我看来，这里最令人困惑的行为是，`C3A2E2809EC2A2`当从 latin1 客户端和连接中选择时，它以某种方式正确呈现。但是，记住该字段是 UTF8，MySQL 无疑将每组 3 个字节转换为相应的 latin1 字节进行传输，从而`E284A2`通过连接发送。而我的终端恰好将这三个字节解释为 UTF8。（但是，这有点猜测。我不完全确定“不经意间正确”的转换发生在什么时候。）

当然，MySQL`99`以类似但相反的方式友好地处理拉丁文。

# java - 在不同的公共类中将争论传递给构造函数

> ID：16220904
> 
> 赞同：1
> 
> 时间：2013-04-25T17:17:00.127
> 
> 标签：java, variables, methods, constructor, double

我很难将`hours`and`hourlyWage`参数传递给`Paycheck`类中的构造函数。问题如下：

> ```
> symbol: variable hours
> location : class Paycheck 
> ```

它在公共课薪水的每个小时或小时工资实例中重复。

代码如下

```
import java.util.Scanner;

public class PayDayCalculator {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        System.out.println("Hourly wage: ");
        double hourlyWage = in.nextDouble();
        System.out.println("Hours worked: ");
        double hours = in.nextDouble();

        Paycheck paycheck = new Paycheck(hourlyWage, hours);
        System.out.println("Pay: " + paycheck.getPay());
    }
} 
```

* * *

```
public class Paycheck {
    private double pay = 0;
    private double overtime = 0;
    private double overtimePay = 0;

    /*double hours;
    double hourlyWage; */
    Paycheck(double hourlyWage, double hours) {
        setPay(0);
    }

    public void setPay(double newPay) {
        if (hours > 40) {
            overtime = hours % 40;
            hours = hours - overtime;
        }
        overtimePay = hourlyWage * 1.5;
        pay = (hours * pay) + (overtime * overtimePay);
    }

    public double getPay() {
        return pay;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:23:11.743

您已注释掉成员变量`hours`：

```
/*double hours;
double hourlyWage; */ 
```

但仍然尝试引用它，例如：

```
if (hours > 40) {
    overtime = hours%40;
    hours = hours - overtime;
} 
```

如果您需要此变量 - 取消注释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:24:16.480

`hours`并且`hourlyWage`没有定义！

取消注释这部分 -

```
/*double hours;
double hourlyWage; */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:24:29.710

您的`setPay`方法是指`hours`and `hourlyWage`，它们是传递给构造函数的参数，使它们仅对构造函数是本地的。它们不适用于类中的所有方法。如果您希望所有方法都可以访问它们，则需要在类级别取消注释。

```
double hours;
double hourlyWage;

Paycheck(double hourlyWage, double hours) {
    this.hourlyWage = hourlyWage;
    this.hours = hours;
    setPay(0);
} 
```

# java - 使用 PlayFramework2 在 JSON 中转义 HTML

> ID：16220908
> 
> 赞同：0
> 
> 时间：2013-04-25T17:17:42.293
> 
> 标签：java, backbone.js, playframework, escaping, playframework-2.0

我正在使用*PlayFramework2*，但找不到正确处理 HTML 转义的方法。

在模板系统中，默认情况下会过滤 HTML 实体。
但是当我将 REST 请求与*Backbone.js*一起使用时，我的 JSON 对象不会被过滤。

我`play.libs.Json.toJson(myModel)`用来将*Object*转换为*String*。
所以，在我的控制器中，我`return ok(Json.toJson(myModel));`用来发送响应......但在这里，我的模型的属性是不安全的。
我找不到处理它的方法...

**第二个问题：**
模板引擎默认过滤 HTML 实体，这意味着我们必须将原始用户输入存储到我们的数据库中。
这是一种保存行为吗？

**第三个问题： PlayFramework**
中是否有手动转义字符串的功能？我能找到的所有这些都需要添加新的依赖项。

谢谢 ！

**编辑：**我在*Backbone.js*模板级别找到了一种方法： - 使用`myBackboneModel.escape('attr');`而不是`myBackboneModel.get('attr');`
*Underscore.js*模板系统还包括该选项：`<%= attr %>`在不转义的情况下呈现，但`<%- attr %>`在转义时呈现！
请注意效率，每次渲染时都会重新转义字符串。这就是为什么应该首选 Backbone .create() 的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T20:57:52.203

XSS 攻击预防的最佳实践通常建议您推理**输出**而不是**输入**。这背后有很多原因。在我看来，最重要的是：

*   除非您确切知道将如何输出/呈现数据，否则对转义某些内容进行推理是没有任何意义的。因为不同的渲染方式需要不同的转义策略，例如正确转义的 HTML 字符串不足以在 Javascript 块中使用它。需求和技术不断变化，今天您以一种方式呈现数据 - 明天您可能会使用另一种方式（假设您将在不需要 HTML 转义的移动客户端上工作，因为它根本不使用 HTML渲染数据）您只能在渲染数据时确定正确的转义策略。这就是现代框架将转义委托给模板引擎的原因。我建议查看以下文章：[XSS（跨站点脚本）预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#A_Positive_XSS_Prevention_Model)
*   转义用户的输入实际上是一种破坏性/有损的操作——如果你在将用户的输入持久化到存储之前转义用户的输入，你将永远不会发现他的原始输入是什么。没有确定的方法可以“取消转义”HTML 转义字符串，请考虑上面的移动客户端示例。

这就是为什么我认为正确的方法是将转义委托给您的模板引擎（即您用于 Backbone 的 Play 和 JS 模板引擎）。无需将您序列化为 JSON 的 HTML 转义字符串。请注意，在幕后 JSON-serializer 将对您的字符串进行 JSON 转义，例如，如果您的字符串中有一个引号，它将被正确转义以确保生成的 JSON 是正确的，因为它毕竟是一个 JSON 序列化程序，这就是它只关心正确的原因JSON渲染，它对HTML一无所知（它不应该）。但是，当您在客户端呈现 JSON 数据时，您应该使用您用于 Backbone 的 JS 模板引擎提供的功能正确地对其进行 HTML 转义。

回答另一个问题：您可以使用`play.api.templates.HtmlFormat`手动转义原始 HTML 字符串：

```
import play.api.templates.HtmlFormat
...
HtmlFormat.escape("<b>hello</b>").toString()
// -> &lt;b&gt;hello&lt;/b&gt; 
```

如果你真的需要让 JSON 编码器转义某些 HTML 字符串，一个好主意可能是为它们创建一个包装器，比如说`RawString`并提供自定义`Format[RawString]`，它也会在其`writes`方法中对字符串进行 HTML 转义。详情见：[play.api.libs.json API 文档](http://www.playframework.com/documentation/api/2.0/scala/play/api/libs/json/package.html)

# asp.net - 如何为两个以上的asp.net项目共享类库，不重复

> ID：16220910
> 
> 赞同：0
> 
> 时间：2013-04-25T17:17:56.730
> 
> 标签：asp.net

如何为两个以上的 asp.net 项目共享类库，而不重复。所有项目都存在于同一台服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:17:03.647

如果您将程序集安装到 GAC 中，任何想要引用它的应用程序都可以使用它。

[http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)

注意：这通常不是我喜欢构建应用程序的方式，因为如果您将所有程序集都放在 lib 文件夹中，那么从源代码管理中获取解决方案的副本将为开发人员提供无需执行额外步骤即可编译的解决方案比如安装单独的软件。

在 Visual Studio 中，当您引用程序集时，您可以选择源位置，这样您就可以拥有两个引用相同 DLL 的独立项目，而不会出现任何问题。

# javascript - Accessing right click with three.js

> ID：16220913
> 
> 赞同：4
> 
> 时间：2013-04-25T17:18:05.297
> 
> 标签：javascript, three.js

Been looking for how to do this everywhere and there is almost no documentation on three.js. Does anyone know how I can access a right click on the mouse? This is what I have now:

```
function onDocumentMouseDown(event) 
{
    mouseDown = true;
    event.preventDefault();

    mouseX = event.clientX - windowHalfX;
    mouseY = event.clientY - windowHalfY;

    document.addEventListener('mousemove', onDocumentMouseMove, false);
    document.addEventListener('mouseup', onDocumentMouseUp, false);
    document.addEventListener('mouseout', onDocumentMouseOut, false);
} 
```

And this is working great for what I am using it for but this event is for left click, middle click and right click. How do I isolate a right click event so that left click and right click can have different effects?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T17:39:06.613

`event`有财产`button`。_ 你可以这样处理：

```
switch ( event.button ) {
    case 0: // left 
        break;
    case 1: // middle
        break;
    case 2: // right
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T13:21:03.417

从 r120 开始，OrbitControls 使用指针事件。尝试下指针：

```
document.onpointerdown = function(event) {
    switch ( event.button ) {
        case 0: console.log("Left Button is down."); 
            break;
        case 1: console.log("Middle Button is down."); 
        //Beware this work not on mac with magic mouse!
            break;
        case 2: console.log("Right Button is down.");
            break;
    }
} 
```

干杯

# c++ - 如何为向量的向量保留内存

> ID：16220915
> 
> 赞同：2
> 
> 时间：2013-04-25T17:18:14.170
> 
> 标签：c++

假使，假设

```
vector<vector<shared_ptr<Base>>> vec
vec.reserve(100)
vec[0].reserve(20)  // Error : vector subscript out of range 
```

我正在尝试为外部向量和内部向量保留内存。我知道它`vec`是空的，所以我不能为内部向量保留内存。我只能`resize()`或`shrink_to_fit()`之后。但是，使用`resize()`or`shrink_to_fit()`是无用的，因为那不是我想做的。

为内部向量保留内存的目的是尝试很好地分配内存，以便之后更快地搜索内部元素。我只是想知道如果我不保留内存，预先分配的内存既昂贵又混乱。

我想问一下 ：

1.  有没有办法为内部向量保留内存
2.  我的“担心不为向量保留内存的情况下会导致内存分配不当”的概念正确吗？

对不起，我的英语很差，我正在使用 VC++ 2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:20:51.573

您不能为*内部*和*外部*向量保留内存......如果您只在外部向量中保留空间，则不会构造*内部向量。*您可以调整外部向量的大小，然后对其每个元素进行保留，或者您可以在添加内部向量时对其进行保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:21:03.343

如果您确定完全需要这样做，我可能会调整外部向量的大小，然后在每个内部向量中保留空间。

如果 100 个元素甚至接近准确，那么外部向量的空间几乎是无关紧要的（通常在 32 位系统上为 1200 字节，在 64 位系统上为 2400 字节）。

这可能不太方便（可能会迫使您跟踪创建的项目数量与实际使用的项目数量），但如果您想在内部向量中保留空间，您实际上并没有太多选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:11:37.310

我将从您将如何与最终容器交互以及您提前了解其内容开始。一旦你确定了一个方便的接口，你就可以实现它背后的代码。例如，您可以确保每个新的内部向量都以 100 个元素的容量创建。或者，您可以使用从 x/y 对到共享指针的映射，这在人口稀少的容器中是有意义的。或者如何静态分配 100x100 元素而不重新分配？重要的一点是，所有这些替代方案都可以在不更改最终容器的接口的情况下实现，因此这使您可以自由地尝试不同的方法。

顺便说一句：查看 make_shared，我相信它避免了 shared_ptr 的分配开销。或者，Boost 也有一个使用内部引用计数器的 intrusive_ptr。这些 shared_ptr 实例也只有 shared_ptr 大小的一半。但是，您需要基准来实际证明哪种方式最快。其他任何事情都或多或少只是模糊的猜测和猜测。

# css - 如何在 Dropbox 上创建下拉链接

> ID：16220923
> 
> 赞同：1
> 
> 时间：2013-04-25T17:19:01.743
> 
> 标签：css, drop-down-menu, dropbox

对于那些从未访问过 dropbox 的人，这里是链接[https://www.dropbox.com/](https://www.dropbox.com/)

请参阅“登录”的下拉菜单链接。我如何创建这样的下拉链接？

![在此处输入图像描述](https://i.stack.imgur.com/wFkQK.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:54:13.993

这是小提琴。只是一些Jquery。

```
<body>
<div id="login">
    <a href="#">Login</a>
    <div>
        Login Form
        Lorem Ipsum blablbalbabababa lbablaabalbalba
    </div>
</div>
</body> 
```

CSS：

```
div#login {
    position: relative;
    float: right;
    height: 20px;
    padding: 5px;
    margin-right:100px;
}
div#login:hover {
    background: rgba(0,0,0,.2);
}
div#login div {
    position: absolute;
    top:30px;
    right:0;
    width: 200px;
    height: 100px;
    padding: 10px;
    background: rgba(0,0,0,.2);
    visibility: hidden;
}
body{height:1000px;} 
```

查询：

```
$("#login").click(function(e){
    $("#login div").css("visibility","visible");
   e.stopPropagation();
});

$("body").click(function(e){
    $("#login div").css("visibility","hidden");
}); 
```

[http://jsfiddle.net/jPPew/6/](http://jsfiddle.net/jPPew/6/)

# python - Python：什么是标头？

> ID：16220930
> 
> 赞同：19
> 
> 时间：2013-04-25T17:19:22.750
> 
> 标签：python, header

我是 Python 和一般编程的新手。我正在大学学习一个模块，该模块需要我用 Python 编写一些相当基本的程序。但是，我在上次作业中收到了以下反馈：

> 应该有一个包含文件名、作者姓名、创建日期、修改日期和 python 版本的标题块

什么是标题块？它只是代码顶部的注释，还是程序运行时打印的内容？或者是其他东西？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T17:36:04.603

python中有一个叫做[Docstring](http://www.python.org/dev/peps/pep-0257/)的东西（这里有一些关于如何编写python代码的约定 - [PEP 8](http://www.python.org/dev/peps/pep-0008/)）被三重单引号`'''`或三重双引号转义，`"""`非常适合*多行注释*：

```
'''
    File name: test.py
    Author: Peter Test
    Date created: 4/20/2013
    Date last modified: 4/25/2013
    Python Version: 2.7
''' 
```

您也可以稍后（在编程模块时）使用专用于包含信息的特殊变量：

```
__author__ = "Rob Knight, Gavin Huttley, and Peter Maxwell"
__copyright__ = "Copyright 2007, The Cogent Project"
__credits__ = ["Rob Knight", "Peter Maxwell", "Gavin Huttley",
                    "Matthew Wakefield"]
__license__ = "GPL"
__version__ = "1.0.1"
__maintainer__ = "Rob Knight"
__email__ = "rob@spot.colorado.edu"
__status__ = "Production" 
```

更多细节在[这里回答](https://stackoverflow.com/a/1523456/1149736)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-19T05:36:30.770

# 我的意见

我使用这种格式，因为我正在学习，*“这更多是为了我自己的理智，而不是必需品。”*

因为我喜欢一致性。所以，我像这样开始我的文件。

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# =============================================================================
# Created By  : Jeromie Kirchoff
# Created Date: Mon August 18 18:54:00 PDT 2018
# =============================================================================
"""The Module Has Been Build for..."""
# =============================================================================
# Imports
# =============================================================================
from ... import ...
<more code...> 
```

1.  第一行是Shebang
    1.  我知道`There's no reason for most Python files to have a shebang line`，但是对我来说，我觉得它让用户知道我是为 python3 明确编写的。在我的 Mac 上，我同时拥有 python2 和 python3。
2.  第 2 行是编码，再次澄清
    1.  正如我们中的一些人在处理多个来源（API、数据库、电子邮件等）时忘记的那样
3.  第 3 行更像是我自己对最大 80 个字符的视觉表示。
    1.  我知道“哦，天哪，为什么？！？” 再次，这使我可以将我的代码保持在 80 个字符以内，以实现视觉表示和可读性。
4.  第 4 行和第 5 行只是我自己的跟踪方式，因为当在一个大团队中工作时，保持谁写的手头是有帮助的，并且可以节省一些时间来查看你的`GitHub`. 不再相关，只是为了我的理智而捡到的东西。
5.  第 7 行是每个 Flake8 的每个 python 文件顶部所需的[Docstring](https://media.readthedocs.org/pdf/pydocstyle/latest/pydocstyle.pdf#page=11)。

同样，这只是我的偏好。在一个`working environment`你必须赢得所有人的支持才能改变事实上的行为。我可以继续说下去，但我们都知道，至少在工作场所是这样。

# 标题块

*   什么是标题块？
*   它只是代码顶部的注释，还是程序运行时打印的内容？
*   或者是其他东西？

因此，在大学环境中：

[标题块或注释](https://www.cs.bu.edu/courses/cs108/guides/style.html)

> 标题注释出现在文件的顶部。这些行通常包括文件名、作者、日期、版本号以及文件用途和内容的描述。对于课堂作业，标题还应包括课程名称、编号、部分、讲师和作业编号等内容。

*   它只是代码顶部的注释，还是程序运行时打印的内容？或者是其他东西？

好吧，您的教授可以对此有不同的解释，展示它并询问！

> “如果你从不问，答案总是不。”

IE：

```
# Course: CS108
# Laboratory: A13
# Date: 2018/08/18
# Username: JayRizzo
# Name: Jeromie Kirchoff
# Description: My First Project Program. 
```

# 如果您正在寻找 Overkill：

或使用[“Module Level Dunder Names”的python方式](https://www.python.org/dev/peps/pep-0008/#module-level-dunder-names)

## 标准模块级别 Dunder 名称

```
__author__ = 'Jeromie Kirchoff'
__copyright__ = 'Copyright 2018, Your Project'
__credits__ = ['Jeromie Kirchoff', 'Victoria Mackie']
__license__ = 'MSU'  # Makin' Shi* Up!
__version__ = '1.0.1'
__maintainer__ = 'Jeromie Kirchoff'
__email__ = 'Jahomie04@gmail.com'
__status__ = 'Prototype' 
```

## 添加您自己的自定义名称：

```
__course__ = 'cs108'
__teammates__ = ['Jeromie Kirchoff']
__laboratory__ = 'A13'
__date__ = '2018/08/18'
__username__ = 'JayRizzo'
__description__ = 'My First Project Program.' 
```

然后，如果教师愿意，只需添加一点代码即可打印。

```
print('# ' + '=' * 78)
print('Author: ' + __author__)
print('Teammates: ' + ', '.join(__teammates__))
print('Copyright: ' + __copyright__)
print('Credits: ' + ', '.join(__credits__))
print('License: ' + __license__)
print('Version: ' + __version__)
print('Maintainer: ' + __maintainer__)
print('Email: ' + __email__)
print('Status: ' + __status__)
print('Course: ' + __course__)
print('Laboratory: ' + __laboratory__)
print('Date: ' + __date__)
print('Username: ' + __username__)
print('Description: ' + __description__)
print('# ' + '=' * 78) 
```

# 最终结果

每次调用程序时，它都会显示列表。

```
$ python3 custom_header.py
# ==============================================================================
Author: Jeromie Kirchoff
Teammates: Jeromie Kirchoff
Copyright: Copyright 2018, Your Project
Credits: Jeromie Kirchoff, Victoria Mackie
License: MSU
Version: 1.0.1
Maintainer: Jeromie Kirchoff
Email: Jahomie04@gmail.com
Status: Prototype
Course: CS108
Laboratory: A13
Date: 2018/08/18
Username: JayRizzo
Description: My First Project Program.
# ============================================================================== 
```

注意：如果你扩展你的程序，只需在**init** .py 中设置一次，你应该已经设置好了，但再次与教授核实。

[如果想要脚本签出我的 github。](https://github.com/JayRizzo/Random_Scripts/blob/master/custom_header.py)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-13T19:44:33.387

这里讨论得很好 --> [Python 文件常见的头格式是什么？](https://stackoverflow.com/q/1523427/1734032)

Python 文档字符串应该简洁，并且不真正包含修订历史记录，或者与当前版本行为不直接相关的任何内容。我还没有看到“男人”风格的文档字符串，它可能也一样。

花盒，具有独立于源代码控制的修订历史（因为某些修订最终可能*早于*您的源代码控制）可以追溯到阅读纸上代码或通过电子邮件发送的时代。我们并不总是像现在这样联系在一起。

使用现代 IDE，这已经失宠，但可以在较旧/较大的高级作品中看到。在某些商店中，登录不是由编码人员执行的，尤其是在代码已“被淘汰”的情况下。一些登录的评论以一种懒散、邋遢的方式。

所以它会有所不同，但是：

```
#! /usr/bin/python
#--------------------------------#
# optional flower box  
#--------------------------------#
""" 
Multiple lines of doc if required
"""

import foo
import bar

__metastuff__ = 'some value' 
```

我看到“**元**”更高，特别是在“pycharm”的 youtube 宣传中。人们喜欢在导入下面看到它，因为它实际上是代码，并且导入应该在代码之前。我可以想象它可能会变得很容易被带走。无论如何，低级代码中的明智和信息丰富的注释比楼上写的更有价值。

在现实世界中，只要做其他人在你的项目上所做的事情，你就会没事的。无论如何，重复使用模板或从“原型”复制和粘贴（即盗版）是很常见的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T17:24:18.300

您的讲师希望您在作业的源代码顶部添加一些信息，如下所示，所以您是对的，您将添加评论：

```
####################################
# File name: ...                   #
# Author: ...                      #
# Submission:                      #
# Instructor:                      #
#################################### 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-25T17:27:32.713

标题块只是代码顶部的注释。程序运行时不打印。

一个示例可能如下所示：

```
# File name: test.py
# Author: Peter Test
# Date created: 4/20/2013
# Date last modified: 4/25/2013
# Python Version: 2.7

# Begin code

a = 1
b = 2

c = a + b

print c 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T17:20:26.610

在这种情况下，你是对的。标头块是指源文件顶部的一组注释，其中包含所请求的信息。它不需要包含任何执行任何操作的代码。

# android - 如何在扩展 BaseAdapter 的类中获取 Drawable 实例

> ID：16220931
> 
> 赞同：1
> 
> 时间：2013-04-25T17:19:28.743
> 
> 标签：android, android-imageview, android-drawable

我是 android 新手，我要实例化一个 Drawable 引用。

如果该类扩展了 Activity 我们可以直接使用它..

```
Drawable myDrawable = getResources().getDrawable(R.drawable.image1); 
```

iv.setImageDrawable(myDrawable);

由于我的课程是自定义适配器，因此该`getResources`方法不可用。

有什么办法……？

这个我已经试过了……

```
 imageview.setTag(R.drawable.stack_default); 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:21:29.510

构造适配器时，将活动上下文传递给适配器，并将其保存为成员变量。

或者

如果您有应用程序实例，则获取对其的引用，然后提取可绘制对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:37:13.837

`ImageView`具有将`setImageResources(int resId)`所需资源的 id 作为参数的方法，si，在这种情况下，无需使用 getResources()。无论如何，您可以使用`ViewGroup`父参数的上下文`getView(..)`

您可以通过以下方式检索它：

```
Context context = parent.getContext(); 
```

然后你可以用它来检索`Resources`

```
context.getResources() 
```

您想检查是否（父级！= null）

# c# - 将参数作为对象传递[]

> ID：16220937
> 
> 赞同：16
> 
> 时间：2013-04-25T17:19:46.583
> 
> 标签：c#, web-services, soap, wsdl, affiliate

我希望将此 API 与 ac# 应用程序一起使用： [http ://www.affjet.com/2012/11/26/4-4-affjet-api/#more-3099](http://www.affjet.com/2012/11/26/4-4-affjet-api/#more-3099)

将 wsdl 添加到我的项目后，我编写了这个简单的代码：（getTransactions 获取一个对象 [] @params 并返回一个字符串）

```
Ws_ApiService service = new Ws_ApiService();
string apiKey = "*************";
var response = service.getTransactions(new object[] { apiKey }); 
```

我尝试了更多方法，但无法得到正确的响应，我尝试了：

```
var response = service.getTransactions(new object[] { "apiKey:****"}); 
```

和

```
var response = service.getTransactions(new object[] { "apiKey","******"}); 
```

这是他们的文档中执行相同操作的 php 代码：

```
<?php

$nameSpace = "https://secure.affjet.com/ws/api";

//Creating AffJet client for SOAP
$client = new SoapClient($nameSpace."?wsdl");

$pageNumber = 0;
//Setting up parameters
$params = array();
$params["apiKey"] = "MY_API_KEY";
//Value for parameters (optional)
//$params["networkId"] = array(1,2);
//$params["pageNumber"] = 0;
//$params["pageSize"] = 10;
//Making Request
$response = $client->getNetworks($params);
//XML to SimpleXMLElement Object
$xmlResponse = new SimpleXMLElement($response);
if ($xmlResponse->success == "true"){
    while (isset($xmlResponse->dataList->data)) {
        //Iterate the results
        foreach ($xmlResponse->dataList->data as $data){
            var_dump(xml2array($data));
        }
        //Requesting next page of data
        $pageNumber++;
        $params["pageNumber"] = $pageNumber;
        //Making Request
        $response = $client->getNetworks($params);
        //XML to SimpleXMLElement Object
        $xmlResponse = new SimpleXMLElement($response);
    }
} else {
    //Error somewhere
    echo $xmlResponse->errorMessage;
}

/**
* Transforms the object SimpleXmlElement into an array, easier to handle
*/
function xml2array($xml) {
    $arr = array();
    foreach ($xml as $element) {
        $tag = $element->getName();
        $e = get_object_vars($element);
        if (!empty($e)) {
            $arr[$tag] = $element instanceof SimpleXMLElement ? xml2array($element) : $e;
        } else {
            $arr[$tag] = trim($element);
        }
    }
    return $arr;
}

?> 
```

这是我尝试的回应：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:ns1="http://secure.affjet.com/ws/api"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
          SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
        <ns1:getTransactionsResponse>
        <return xsi:type="xsd:string">
            &lt;response&gt;&lt;success&gt;false&lt;/success&gt;&lt;errorMessage&gt;
            API Key not provided&lt;/errorMessage&gt;&lt;dataList&gt;
            &lt;/dataList&gt;&lt;/response&gt;
        </return>
        </ns1:getTransactionsResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

你可以看到：

```
API Key not provided 
```

响应应该是这样的：

```
<response>
    <success>true</success>
    <errorMessage></errorMessage>
    <dataList>
        <data>
            <date>2012-11-05 15:02:41</date>//Transaction Date
            <amount>81.67</amount>
            <commission>15.86</commission>
            <status>confirmed</status>//Status, could be: declined, pending, confirmed or paid
            <clickDate></clickDate>
            <ip></ip>
            <custom_id>MyCustomId</custom_id>//Custom Id for the transactions (SID, SubId,clickRef....)
            <unique_id>2548462</unique_id>//Unique Id given from the network to this transaction
            <merchantId>1</merchantId>//Id for the Merchant on AffJet
            <networkId>1</networkId>//Id for the Network on AffJet
        </data>
    </dataList>
</response> 
```

我只需要提供一个名为“apiKey”的参数及其值

编辑 ：

在联系了他们的支持后，他们说请求应该是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
                   xmlns:ns1="http://secure.affjet.com/ws/api" 
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                   xmlns:ns2="http://xml.apache.org/xml-soap" 
                   xmlns:SOAP- ENC="http://schemas.xmlsoap.org/soap/encoding/" 
            SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
        <ns1:getTransactions>
            <params xsi:type="ns2:Map">
                <item>
                    <key xsi:type="xsd:string">apiKey</key>
                    <value xsi:type="xsd:string">YOURAPIKEY</value>
                </item>
            </params>
        </ns1:getTransactions>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T11:38:47.473

我对这个引人入胜的话题进行了更深入的研究，并且不得不说，使用相当于关联数组的东西只是 .NET SOAP 实现中的一种痛苦。关联数组表示为 IDictionary（例如 Hashtable）——但拒绝被序列化（试试看！）。

下面的代码是我能得到的最接近的代码——出于某种原因（错误？）它在 .NET 框架上不起作用，但在 Mono 上起作用。

```
using System;
using System.IO;
using System.Xml;
using System.Xml.Schema;
using System.Xml.Serialization;
using System.Collections.Generic;
using System.Text;

public class Test
{
  /*
   *  as per http://stackoverflow.com/a/1072815/2348103
   */
  public class Item
  {
    [XmlElement(Form = XmlSchemaForm.Unqualified)]
    public string key;

    [XmlElement(Form = XmlSchemaForm.Unqualified)]
    public string value;
  }

  [SoapType(TypeName = "Map", Namespace = "http://xml.apache.org/xml-soap")]
  public class Map : List<Item>
  {
  }

  public static void Main()
  {
    Map map = new Map();
    map.Add( new Item { key="foo", value="bar" } );
    map.Add( new Item { key="quux", value="barf" } );

    XmlTypeMapping mapping = 
         (new SoapReflectionImporter()).ImportTypeMapping( map.GetType() );
    XmlSerializer serializer = new XmlSerializer( mapping );
    XmlTextWriter writer = new XmlTextWriter( System.Console.Out );
    writer.Formatting = Formatting.Indented;
    writer.WriteStartElement( "root" );
    serializer.Serialize( writer, map );
    writer.WriteEndElement();
    writer.Close();
  }
}

/*
  // 
  // does not work - but see http://msdn.microsoft.com/en-us/magazine/cc164135.aspx
  // 
  public class Map : IXmlSerializable
  {
    const string NS = "http://xml.apache.org/xml-soap";
    public IDictionary dictionary;
    public Map()
    {
      dictionary = new Hashtable();
    }

    public Map(IDictionary dictionary)
    {
      this.dictionary = dictionary;
    }

    public void WriteXml(XmlWriter w)
    {
      w.WriteStartElement("Map", NS);
      foreach (object key in dictionary.Keys)
      {
        object value = dictionary[key];
        w.WriteStartElement("item", NS);
        w.WriteElementString("key", NS, key.ToString());
        w.WriteElementString("value", NS, value.ToString());
        w.WriteEndElement();
      }
      w.WriteEndElement();
    }

    public void ReadXml(XmlReader r)
    {
      r.Read(); // move past container
      r.ReadStartElement("dictionary");
      while (r.NodeType != XmlNodeType.EndElement)
      {
        r.ReadStartElement("item", NS);
        string key = r.ReadElementString("key", NS);
        string value = r.ReadElementString("value", NS);
        r.ReadEndElement();
        r.MoveToContent();
        dictionary.Add(key, value);
      }
    }
    public System.Xml.Schema.XmlSchema GetSchema() { return null; }
  }
*/ 
```

**Mono 的示例输出：**

```
<q1:Map xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="id1" d2p1:arrayType="Item[2]" xmlns:d2p1="http://schemas.xmlsoap.org/soap/encoding/" xmlns:q1="http://xml.apache.org/xml-soap">
  <Item href="#id2" />
  <Item href="#id3" />
</q1:Map>
[...] 
```

**.NET 的示例输出：**

```
<q1:Array xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="id1" q1:arrayType="Item[2]" xmlns:q1="http://schemas.xmlsoap.org/soap/encoding/">
  <Item href="#id2" />
  <Item href="#id3" />
</q1:Array>
[...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:40:12.330

您可以使用 KeyValue 对类或 Dictionary 类，如下所示：

```
 Dictionary<string, string> d = new Dictionary<string, string>();
        d.Add("apiKey", "******");
        var response = new object[] { d };

        KeyValuePair<string, string> d = new KeyValuePair<string, string>("apiKey", "******");
        var response = new object[] { d }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:10:36.360

看来问题是 PHP 和 C# 中的数组之间的区别。在 PHP 中，它是一个键值对。他在从 wdsl 创建的生成类中的外观如何？这是与您的问题相关的 SO 问题的一行。 [C# 等价于 php 关联数组](https://stackoverflow.com/questions/9703937/c-sharp-equivalent-to-php-associative-array)一个答案是 try `Dictionary<String, String>`。也许值得尝试使用`KeyValuePair<String, String>`作为对象数组传递。

```
KeyValuePair<String, String> parm = new KeyValuePair<String, String>("apiKey","******");

var response = service.getTransactions(new object[] { parm }); 
```

# c++ - 如何制作易于通过引用进行比较的类型

> ID：16220947
> 
> 赞同：1
> 
> 时间：2013-04-25T17:20:19.633
> 
> 标签：c++

如何创建一个通过引用进行比较但强制它不能在函数中创建的类型（防止对堆栈/已删除对象的引用）。

我想出了下面的错误类型并为此感到自豪，直到我意识到您可以在函数中执行“return Error::New(...)”。问题出在 h() 函数中。

```
#include <stdio.h>
#include <string.h>
#include <string>

using namespace std;

class Error {
    std::string _str;
    const Error &from;

    Error();
    Error(const char *s)
        : _str(s), from(*this)
    {
    }

public:
    Error(const Error &err)
        : from(err.from)
    {
    }

    static Error New(const char *s) {
        return Error(s);
    }

    bool operator== (const Error &rhs) const {
        return (&from == &rhs.from);
    }

    bool operator!= (const Error &rhs) const {
        return (&from != &rhs.from);
    }

    std::string ToString() {
        return from._str;
    }

public:
    static const Error None;
};

const Error Error::None("none");

// user errors
auto ErrConnect = Error::New("failed to connect");
auto ErrWrite = Error::New("invalid write");

Error f() {
    return ErrConnect;
}

Error g() {
    return Error::None;
}

Error h() {
    return Error::New("test");
}

int main()
{
    printf("ErrConnect == ErrConnect : %d\n", ErrConnect == ErrConnect);
    printf("ErrConnect == ErrWrite : %d\n", ErrConnect == ErrWrite);
    printf("f() == ErrConnect : %d\n", f() == ErrConnect);
    printf("f() == ErrWrite : %d\n", f() == ErrWrite);
    printf("f() != ErrConnect : %d\n", f() != ErrConnect);
    printf("f() != ErrWrite : %d\n", f() != ErrWrite);
    printf("f() == Error::None : %d\n", f() == Error::None);
    printf("f() != Error::None : %d\n", f() != Error::None);
    printf("g() == Error::None : %d\n", g() == Error::None);
    printf("g() != Error::None : %d\n", g() != Error::None);
    printf("f().ToString() : %s\n", f().ToString().c_str());
    printf("ErrConnect.ToString() : %s\n", ErrConnect.ToString().c_str());

    auto err = f();
    auto err2 = err;
    auto err3 = err2;
    printf("err3 == ErrConnect : %d\n", err3 == ErrConnect);

    auto err4 = h();
    printf("err4 from h() : %s\n", err4.ToString().c_str());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:44:31.810

不允许在全局范围内创建某些东西，但不能在函数中创建。

`Error&`您所做的任何事情都不需要跟踪原件。相反，您希望创建一个错误来创建一个唯一的令牌，并且所有`Error`的 s 都从它复制或移动以携带该令牌。该令牌`Error& this`不是必需的，但该令牌的生命周期需要延长`Error`从原始复制的所有 s 的生命周期。

一种方法是使用类型标签（可能是宏辅助）来生成错误。小心地，令牌可以被安排为独一无二的，并且不需要在每个错误的基础上进行额外的工作。

举个例子：

```
struct ErrorToken {
  virtual std::string Description() const = 0;
  ~ErrorToken() {}
};
template<typename T>
struct ErrorTokenImpl:ErrorToken {
  virtual std::string Description() const /* final override if C++11 */ {
    return T::desc();
  }
};
class Error {
  ErrorToken* token;
  template<typename T>
  static ErrorToken* get_token() {
    static std::unique_ptr<ErrorToken> retval( new ErrorTokenImpl<T>() );
    return retval.get();
  }
public:
  template<typename T>
  Error(): token( get_token<T>() );
  bool operator==(Error const& o) const { return token == o.token; } // etc
  std::string GetDescription() const {
    return token->Description();
  }
};

#define MAKE_ERROR(Y, X) Error< struct Y { static const char* desc() { return X; }; } >()
const Error ErrConnect = MAKE_ERROR(Connection, "failed to connect"); 
```

现在，任何人都可以在任何上下文中创建错误，但是每次创建的错误都有一个标签和一个字符串，并且创建的`token`将持续到静态对象清理时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T14:49:38.733

I've found that the best way to implement this is using a static std::atomic counter (specifically, _uint_fast64_t seems best) from which ids are created for each error type in the Error(const char *s) constructor and std::atomic::fetch_add() to fetch/increment it:

[http://en.cppreference.com/w/cpp/atomic/atomic](http://en.cppreference.com/w/cpp/atomic/atomic)

The only drawback is that these are only present in C++11 (Visual Studio 2012; Linux should not be a problem except for old distros).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T15:37:08.080

我最终使用了 UUID：

```
#include <boost/uuid/uuid.hpp>
#include <boost/uuid/uuid_generators.hpp>

using namespace std;

class Error {
    std::string msg;
    boost::uuids::uuid tag;

public:
    Error(const char *s)
        : msg(s), tag(boost::uuids::random_generator()())
    {
    }

    Error(const Error &rhs)
        : msg(rhs.msg), tag(rhs.tag)
    {
    }

    Error(Error &&rhs)
        : msg(std::move(rhs.msg)), tag(rhs.tag)
    {
    }

    Error &operator=(const Error &rhs) {
        msg = rhs.msg;
        tag = rhs.tag;
        return *this;
    }

    bool operator==(const Error &rhs) const {
        return (tag == rhs.tag);
    }

    bool operator!=(const Error &rhs) const {
        return (tag != rhs.tag);
    }

    std::string ToString() {
        return msg;
    }

public:
    static const Error None;
};

const Error Error::None("none");

// user errors
auto ErrConnect = Error("failed to connect");
auto ErrWrite = Error("invalid write"); 
```

# iphone - Xcode iOS 模拟器的设置 > 蓝牙只是旋转并且不打开

> ID：16220953
> 
> 赞同：6
> 
> 时间：2013-04-25T17:20:36.090
> 
> 标签：iphone, ios, xcode, ios-simulator, core-bluetooth

我正在尝试 Apple 的 BTLE Core 蓝牙测试应用程序。但是当我在 iOS 模拟器上运行时，它不起作用，因为模拟器的设置 > 蓝牙已关闭。

但是当我单击设置>蓝牙将其打开时，它会打开右侧的蓝牙窗格并仅显示忙碌的旋转器，并且永远不会打开。

模拟 iPhone 或 iPad 时同样的问题。

可能的解决方案：我刚刚找到了这个 Apple 技术说明， [http://developer.apple.com/library/ios/#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)

如果解决方案，那么我将添加此问题的答案，以便其他人受益。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-11T21:17:37.850

不幸的是，这不再受支持。（截至 Xcode 5.0，iOS7）技术说明已被删除，这篇第三方文章描述了一些更改，包括模拟器中失去 BTLE 支持：http: [//www.doubleencore.com/2013/09/ whats-new-in-bluetooth-le-ios-7/](http://www.doubleencore.com/2013/09/whats-new-in-bluetooth-le-ios-7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T15:19:25.477

Apple 的这篇技术说明描述了让 ios 模拟器执行蓝牙的完整过程。

[http://developer.apple.com/library/ios/#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)

我在百思买买了蓝牙 LE USB 加密狗。一定要问一个带有蓝牙 4.0 的，因为他们仍然卖 2.0（便宜）。

# java - 使用 S3 AmazonS3Client listObjects 前缀和通配符？

> ID：16220954
> 
> 赞同：8
> 
> 时间：2013-04-25T17:20:39.123
> 
> 标签：java, amazon-web-services, amazon-s3

AWS S3 AmazonS3Client.listObjects ( [http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html) ) 是否支持通配符？例如，可以执行以下操作：

```
ListObjectsRequest listObjectsRequest = new ListObjectsRequest().
withBucketName("foo").
withPrefix("*/dt=2013-03-28/*").
withDelimiter("/"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T20:04:04.567

你不能。实际上，`*`是 S3 中键名中的有效字符。例如，像这样的键`/foo/b*ar/dt=2013-03-28/abc.xml`是有效的。
您将需要根据公共前缀重新组织您的密钥或遍历它们。

PS：根据您的用例，您可以使用[`marker`](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ListObjectsRequest.html#withMarker%28java.lang.String%29).

# python - 为什么这两个程序会导致不同的结果？

> ID：16220956
> 
> 赞同：0
> 
> 时间：2013-04-25T17:20:44.507
> 
> 标签：python, parameters

在两个程序中调用函数 get_size() 之前，我已经更改了“a”的值

第一个：

```
a=''
def get_size(b):
    size=len(b)
    return size

def main():
    a='qwerr'
    print 'the size of a is:',get_size(a)
if __name__=='__main__':
    main() 
```

安慰：`the size of a is: 5`

* * *

第二：

```
a=''

def get_size():
    size=len(a)
    return size

def main():
    a='qwerr'
    print 'the size of a is:',get_size()
if __name__=='__main__':
    main() 
```

安慰：`the size of a is: 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:22:33.787

这是一个范围问题。第一个程序`a`在 的本地范围内创建`main()`，然后将其传递给`get_size()`，而第二个程序`a`从 内部引用全局`get_size()`。如果您希望第二个按预期工作，则需要`a`在范围内进行全局设置`main()`。

```
main()
    global a
    a = 'qwerr'
    print 'the size of a is:',get_size() 
```

正如评论中所指出的，在两个版本中都创建了`main()`-scoped `a`，但是由于`get_size()`在版本 1 中引用了 global `a`，因此设置 local `a`in`main()`对`get_size()`操作的内容没有影响。

但实际上，您应该尽量不要使用全局变量，部分是为了避免您在这里遇到的歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:24:33.320

在第一个程序中，您将 a 设置为全局范围，然后将其重置为 def 主范围中的另一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:27:44.157

在第二个程序中，get_size 方法将在其本地范围内检查“a”值，但由于它不在其本地范围内，然后它将在其全局范围内进行验证

# javascript - Load selected values in dropdown on selecting value from another dropdown

> ID：16220958
> 
> 赞同：0
> 
> 时间：2013-04-25T17:20:57.210
> 
> 标签：javascript, knockout.js

I have 2 dropdowns. When i select value from one dropdown it will load values in another dropdown depending upon what is selected.

Here is my html code

```
<select data-bind="options: filters, value: filter"></select>

<select data-bind="options: filteredItems, optionsText: 'name'"></select> 
```

Here is my knockout code

```
var ViewModel = function(data) {
var self = this;
self.filters = ko.observableArray(data.filters);
self.filter = ko.observable('');
self.items = ko.observableArray(data.items);
self.filteredItems = ko.computed(function() {
    var filter = self.filter();
    if (!filter || filter == "None") {
        return self.items.slice(0, 6);
    } else {
        return self.items.slice(2);
    }
  });
};

  var initialData = {
     filters: ["None", "Old", "New", "Super"],
       items: [{ name: "Corvette", type: "Old"},
       { name: "Charger", type: "Old"},
       { name: "Prius", type: "New"},
       { name: "Magnum", type: "New"},
       { name: "McLaren", type: "Super"},
       { name: "Saleen", type: "Super"}]

   ko.applyBindings(new ViewModel(initialData)); 
```

When i select Type as None then it selects all Cars and if i select type other than None then it should only select "Charger" and "Magnum"

Here is the link to [fiddle](http://jsfiddle.net/bx6TN/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:59:15.337

首先，如果要返回所有项目，只需 return `self.items()`，不需要切片。如果您想返回匹配过滤器的项目，这应该有效：

```
self.filteredItems = ko.computed(function() {
    var myFilter = self.filter();
    if (!myFilter || myFilter == "None") {
        return self.items();
    } else {
        var tempArray = [];
        for(i=0; i<self.items().length; i++) {
            if(self.items()[i].type == myFilter) {
                tempArray.push(self.items()[i]);
            }
        }
        return tempArray;
    }
}); 
```

检查工作[小提琴](http://jsfiddle.net/bx6TN/7/)。

* * *

如果你只想在这里选择“充电器”和“马格南”：

```
self.filteredItems = ko.computed(function() {
    var myFilter = self.filter();
    if (!myFilter || myFilter == "None") {
        return self.items();
    } else {
        return [ self.items()[1], self.items()[3] ];
    }
}); 
```

# java - Extending a Java collection class like ArrayList for easier Generics management (warnings...etc)?

> ID：16220960
> 
> 赞同：1
> 
> 时间：2013-04-25T17:21:06.773
> 
> 标签：java, generics, collections

Extending Java default collections is not considered good practice. But i am wondering if, for the sake of cleaner code, one would not extend, say ArrayList to get rid of the generic. For example

```
public class DoodleList extends ArrayList<Doodle> {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

} 
```

So that in one's code you do some thing like "someFramework.getContentAs(DoodleList.class)" without having those nasty warnings about generics...etc

**NOTE** Wrapping the List might not be an option in my case : the class is to be used in JSON mapping where the desired output is :

{doodles : [doodle1,doodle2,doodle3]}

not {doodles : {innerCollection : [doodle1,doodle2,doodle3]}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:24:04.770

通过摆弄我的继承气味来隐藏令人讨厌的警告。

为什么不只使用注释来抑制警告。例如：

```
@SuppressWarnings("unchecked")
someFramework.getContentAs(ArrayList.class)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:36:55.570

如果您真的只想摆脱警告，请使用`SuppressWarnings`.

但是，如果`DoodleList`包含的不仅仅是一个`ArrayList<Doodle>`例如实现特定于涂鸦的逻辑，我认为扩展`ArrayList<Doodle>`.

# algorithm - 扩展布尔模型解释？

> ID：16220961
> 
> 赞同：0
> 
> 时间：2013-04-25T17:21:10.947
> 
> 标签：algorithm

我们正在实现扩展布尔模型，但我们无法弄清楚如何使用给定的公式：[http](http://en.wikipedia.org/wiki/Extended_Boolean_model) ://en.wikipedia.org/wiki/Extended_Boolean_model这里的公式：

![在此处输入图像描述](https://i.stack.imgur.com/ctSQh.jpg)

包含三个“变量”，但我们不知道它们的含义。假设我们已经处理了文档的集合，所以我们已经映射了集合中的所有单词，并且对于每个术语，我们都有每个文档中的出现次数以及整个集合中（具体术语）的出现次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:29:55.157

我在那里说“与文档 dj 相关的术语 Kx 的权重”。

所以我们谈论的是术语“x”和文档“j”。“i”是使 Idfi（频率最高的术语）最大化的值。

# android - How to read events for a particular date from native calendar

> ID：16220965
> 
> 赞同：0
> 
> 时间：2013-04-25T17:21:43.703
> 
> 标签：android

Im trying to read native calender events from my app(ICS and above) but sometimes it works and some times it shows some incorrect values.Currently i'm using this piece of code can anyone please tell me where i'm going wrong..

```
Uri.Builder builder = Uri.parse("content://com.android.calendar/instances/when").buildUpon();
    long now = new Date().getTime();
    ContentUris.appendId(builder, now);
    ContentUris.appendId(builder, now + DateUtils.YEAR_IN_MILLIS);

    Cursor eventCursorr = cr.query(builder.build(),
            new String[] { "title", "begin","description"}, "Calendars._id=" + calID,
            null, "startDay ASC, startMinute ASC"); 

    while (eventCursorr.moveToNext()) {
        final String titler = eventCursorr.getString(0).trim();
        final Date beginr = new Date(eventCursorr.getLong(1));
        final String descriptionr = eventCursorr.getString(2).trim();

        SimpleDateFormat sdfrr = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

        String stimesr = sdfrr.format(beginr);

 System.out.println("titler "+titler +"stimesr "+stimesr +"descriptionr "+descriptionr );

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:40:47.707

我解决了伙计们。

```
//StartTime 
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yy");
Date dateCC = formatter.parse("04/27/2013");
Calendar calendarStartDate = Calendar.getInstance();
calendar.setTime(dateCC);

//EndTime
SimpleDateFormat formatterr = new SimpleDateFormat("MM/dd/yy hh:mm:ss");

Calendar endOfDay = Calendar.getInstance();
Date dateCCC = formatterr.parse("04/27/2013 23:59:59");
endOfDay.setTime(dateCCC);

Cursor eventCursorr = cr.query(l_eventUri,
    new String[] {
    "title", "dtstart", "dtend"
}, "(" + dtstart + ">" + after + " and " + dtend + "<" + endOfDay.getTimeInMillis() + ")",
    null, "dtstart ASC");

while (eventCursorr.moveToNext()) {
    final String titler = eventCursorr.getString(0).trim();
    final Date beginr = new Date(eventCursorr.getLong(1));
    final String descriptionr = eventCursorr.getString(2).trim();

} 
```

# jquery - 标签云如何工作

> ID：16220969
> 
> 赞同：1
> 
> 时间：2013-04-25T17:22:01.503
> 
> 标签：jquery, tag-cloud

我是标签云的新手。我即将在我的项目中实现标签云功能。为了做到这一点，我应该对此有所了解。我刚开始学习它，对标签云有了一些理论想法，它是什么？

> 标签云是网站上标签（主题）的可视化描述。

标记是如何工作的？在标签云中生成标签是否有任何规则？

我应该使用哪个 JQuery 插件？作为解决方法，我在 JQuery 站点中搜索了标签云插件。我找到了[这些](http://plugins.jquery.com/?s=tag+cloud)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:37:09.803

标签云是一组标签，根据您网站中出现的次数，这些标签无疑是最受欢迎的。每个标签在云中显示的大小取决于该标签的受欢迎程度。有很多方法可以实现这一点。通常，css 决定了字体的大小，可以这样处理：

标签表：
id，标签

文章表：
id、title、body等

标签关系表：
article_id、tag_id、user_id

因此，当用户标记文章时，它会使用用户 ID、文章 ID 和标签 ID 将关系添加到关系表中。通过这种方式，您可以记录文章中标签的个别出现，以及谁给它们加了标签。换句话说，一种计量单位。

标签云获取一组标签——通常是至少使用一次的标签——否则可能应该是相对随机的。因此，您的 fetch 查询可能会导致以下结果：

标签，分数（基于出现次数和您选择的任何因素的算法）

酷：2
车：5
搞笑：4
热：1
丑：7

然后，您使用标签的分数来应用 css 类。你可以让它变得无限并失控，但最好设置界限。所以我们给出一个 1 - 10 的选项。在 css 中，您可以为每个分数定义一个类：

```
.score-1{
    font-size: 1em;
}

.score-2{
    font-size:1.1em;
}

.score-3{
    font-size:1.2em;
    font-weight:bold;
    color:#ff6600;
}

//etc. 
```

并提供像这样的html：

```
<a href="tags.php?tag=15" class="score-2">Cool</a>
<a href="tags.php?tag=10" class="score-7">Ugly</a>
<a href="tags.php?tag=3" class="score-5">Cars</a>
<a href="tags.php?tag=4" class="score-1">Hot</a>
<a href="tags.php?tag=6" class="score-4">Funny</a> 
```

除此之外，jQuery 不一定与标签云有任何关系。但是可能有一些插件可以做到，所以如果你找到它们就去吧。

我应该澄清这个例子中的“分数”，假设你有一个算法，可以根据你自己的标准，分配一个 1 - 10 的最终分数。不一定使用原始计数作为分数。Rocket 提到标签云是网站上的 TOP 标签 - 这可以明确为网站上的顶级 RANGE。否则，您最终可能会得到一个标签云，其中所有标签都是巨大的并且大小相同。我有一个网站在前 10 个标签上徘徊，所有标签的出现次数都相同，数周内给予或拿走几分。您可以查看因子分数的标准差。我倾向于经常使用它来避免垃圾邮件。此外，自上次使用以来的时间、使用标签的用户的可信度等。

如果您有任何特殊问题，请告诉我，我可能会更新。

# spring - 通过没有表单登录的 Spring Security 休息基本身份验证

> ID：16220971
> 
> 赞同：14
> 
> 时间：2013-04-25T17:22:14.043
> 
> 标签：spring, spring-security, basic-authentication

我正在尝试创建一个可供其他 Web 服务使用的宁静 Web 服务。理想情况下，当客户端访问服务但未通过身份验证时，他们应该得到 401。我希望用户能够通过向请求添加身份验证标头来进行身份验证。我不希望用户填写登录表单并发布。我也不希望它在 cookie 中存储任何登录凭据（即保持状态），它应该都在随每个请求发送的 auth 标头中。我已经使用 spring roo 来创建 Web 服务。

我目前所拥有的（取自 spring security 3.1 教程之一），当用户获得 401 时，会提示他们登录页面，然后发布页面，获取他们随每个请求发送的 cookie。

这是我的弹簧安全 xml。

```
 <http use-expressions="true">
   <intercept-url pattern="/customers/**" access="isAuthenticated()" />
 <intercept-url pattern="/**" access="denyAll" />
<form-login />
 </http>
<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="alice" password="other" authorities="user" />
            <user name="custome1" password="other" authorities="user" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

当我从 curl 发送请求时，我得到以下信息：

```
 $ curl -i -H "Accept: application/json" -H "Authorization: Basic Y3VzdG9tZXIxOm90aGVy" http://localhost:8080/Secured/customers

 HTTP/1.1 302 Found
 Server: Apache-Coyote/1.1
 Set-Cookie: JSESSIONID=B4F983464F68199FA0160DBE6279F440; Path=/Secured/; HttpOnly
 Location:      http://localhost:8080/Secured/spring_security_login;jsessionid=B4F983464F68199FA0160DBE6279F440
 Content-Length: 0
 Date: Thu, 25 Apr 2013 17:18:48 GMT 
```

我的基本标头令牌是 base64(customer1:other)

如何让 Web 服务接受 auth 标头，而不是将我重定向到登录页面？

当我从 security.xml 中删除时，我得到以下信息：

```
excpetion:org.springframework.beans.factory.parsing.BeanDefinitionParsingException:
    Configuration problem: No AuthenticationEntryPoint could be established.
    Please make sure you have a login mechanism configured through the namespace
    (such as form-login) or specify a custom AuthenticationEntryPoint with the
    'entry-point-ref' attribute 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-12T01:00:31.967

这是用于 Rest 身份验证或使用表单或基本任何需要的示例非 xml 配置：

```
.and().httpBasic(); 
```

会变魔术！))

```
@Configuration
@EnableWebMvcSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests()
            .antMatchers("/someurl").hasRole("ADMIN")
            .antMatchers("/anotherurl").hasRole("USER")
            .antMatchers("/", "main").permitAll().anyRequest().authenticated()
            .and()
            .httpBasic();

        http.formLogin()
            .loginPage("/login").permitAll()
            .and()
            .logout().permitAll();
    }
...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T17:48:29.327

我需要删除`<form-login>`和添加`<http-basic>`. 还在我的配置中添加了 create-session-"stateless"。

```
 <http use-expressions="true" create-session="stateless" >
     <intercept-url pattern="/customers/**" access="isAuthenticated()" />
     <intercept-url pattern="/**" access="denyAll" />
     <http-basic/>
 </http> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:05:21.570

按照这个带有弹簧安全性的 jax-rs 测试演示 [http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/jax_rs/spring_security/](http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/jax_rs/spring_security/)

这是一种简单的身份验证方法，无需提升凭据。

你可以去实施`RequestHandler`和覆盖

```
public Response handleRequest(Message message, ClassResourceInfo resourceClass); 
```

遵循：[http](http://cxf.apache.org/docs/secure-jax-rs-services.html) ://cxf.apache.org/docs/secure-jax-rs-services.html获取完整的方法集。

# google-apps-script - 用于获取一些网络信息的 Google Docs 脚本

> ID：16220972
> 
> 赞同：0
> 
> 时间：2013-04-25T17:22:15.683
> 
> 标签：google-apps-script

我正在尝试连接到在 Flash 游戏中退出的表格分数。使用浏览器时，我发送的标题是这个

```
POST /game/json?h=c1234567890f HTTP/1.1
Host: pt3.forgeofempires.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Cookie: sid=awsndax7nsow; req_page_info=game_v1; start_page_type=game; start_page_version=v1
Connection: keep-alive
Referer: http://cdn.pt.forgeofempires.com/swf/Main.swf?123456789
Content-type: application/x-www-form-urlencoded
Content-length: 161

34c4ceb6d8[{"requestClass":"ClanService","requestMethod":"getOwnClanData","requestData":[],"requestId":1,"__class__":"ServerRequest","clientVersionNumber":0.31}] 
```

找了一会儿（我在 JavaScript 中的承认不是那么高），我确实找到了一些示例，在理解它们之后，我确实编写了自己的代码。

```
function test(){
  var header =
      {
        'Host': 'pt3.forgeofempires.com',
        'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; rv:20.0) Gecko/20100101 Firefox/20.0',
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
        'Accept-Language': 'en-US,en;q=0.5',
        'Accept-Encoding': 'gzip, deflate',
        'Cookie': 'sid=awsndax7nsow; req_page_info=game_v1; start_page_type=game; start_page_version=v1',
        'Connection': 'keep-alive',
        'Referer': 'http://cdn.pt.forgeofempires.com/swf/Main.swf?123456789',
        'Content-type': 'application/x-www-form-urlencoded',
        'Content-length': '161',
        '': '96c4ceb6d9[{"requestClass":"ClanService","requestMethod":"getOwnClanData","requestData":[],"requestId":4,"__class__":"ServerRequest","clientVersionNumber":0.31}]'
      }

  var url = "http://pt3.forgeofempires.com/game/json?h=c1234567890f";
  var h = {
    'method'  : "post",
    'payload' : header
  };
  var response = UrlFetchApp.fetch(url, h);
  return response;
} 
```

当我运行代码时，它总是进入登录页面。不确定这是因为任何脚本错误还是简单的因为它是访问我的帐户的不同 IP 地址。不知道如何发送最后一部分，因为最后一部分只是文本数据。

任何帮助将不胜感激...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:51:53.413

You are adding your headers as a payload. UrlFetchApp provides a way to add headers. Use that

```
var h = {
    'method'  : "post",
    'headers' : header
  };
  var response = UrlFetchApp.fetch(url, h); 
```

I'm not sure what your payload is. In the list of headers, there is a blank header - is this the payload ? If yes, then you have to add the payload separately.

```
var h = {
    'method'  : "post",
    'headers' : header,
    'payload' : '96c4ceb6d9[{"requestClass":"ClanService","requestMethod":"getOwnClanData","requestData":[],"requestId":4,"__class__":"ServerRequest","clientVersionNumber":0.31}]'
  };
  var response = UrlFetchApp.fetch(url, h); 
```

Note: Ensure that you remove the blank header from the list of headers.

# facebook - 广告 API：实施合作伙伴类别要求将帐户列入白名单。如何获得白名单？

> ID：16220974
> 
> 赞同：0
> 
> 时间：2013-04-25T17:22:18.607
> 
> 标签：facebook, pmd, facebook-ads-api

似乎需要在某处将帐户列入白名单才能使用新的合作伙伴类别功能。有人熟悉这个吗？我们使用被列入 API 访问白名单的帐户进行了测试，并从 Facebook 收到错误消息，并显示该帐户未列入白名单。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T22:35:47.893

您不必被列入白名单即可使用合作伙伴类别，您之前已经问过这个问题，但如果您仍然遇到同样的问题，请通过[http://developers.facebook.com/bugs](http://developers.facebook.com/bugs)提交错误并将其标记为广告 API 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T20:24:33.740

合作伙伴类别功能目前仅适用于美国的广告商 - 请参阅[https://www.facebook.com/help/353223368111533](https://www.facebook.com/help/353223368111533)了解更多信息 - 这也适用于 API

# objective-c - 使用传感器检测 iPhone 指向的当前方向

> ID：16220977
> 
> 赞同：1
> 
> 时间：2013-04-25T17:22:30.530
> 
> 标签：objective-c

假设我们有一个坐标系，它的 z 轴垂直于地面。然后由系统的单位向量指定方向。我的问题是如何使用 iPhone 的传感器检测 iphone 的相机（或其他东西）指向的方向。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:19:06.093

Core Motion 的 CMDeviceMotion 属性`gravity`

```
 @property(readonly, nonatomic) CMAcceleration gravity 
```

将为您提供相对于垂直于地面的 z 的设备方向。

```
( 0, 0,-1) - device horizontal face up
( 0,-1, 0) - device vertical portrait, home button at base
(-1, 0, 0) - device vertical landscape, home button on right 
```

然后是 Core Locations 的 CLHeading 属性`magneticHeading`

```
@property(readonly, nonatomic) CLLocationDirection magneticHeading 
```

将为您提供围绕 z 的旋转（即相对于 x 和 y 的方向）。

# android - 设置 android:uiOptions="splitActionBarWhenNarrow" 时，操作栏不拆分的 dp 屏幕宽度是多少？

> ID：16220980
> 
> 赞同：4
> 
> 时间：2013-04-25T17:22:41.060
> 
> 标签：android, android-actionbar

当屏幕足够宽以使拆分操作栏不拆分时，我真的很喜欢屏幕配置限定符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:28:44.997

如果屏幕宽度（在当前旋转中）大于 480dp，那么 Android 将不会使用拆分的 ActionBar。

从框架中查看[这个布尔值。](https://github.com/android/platform_frameworks_base/blob/c8dce8966b84203befb87a24a9d2d8ee87a39f7b/core/res/res/values-w480dp/bools.xml#L21)

**编辑：**

`splitActionBarWhenNarrow`已被[弃用](http://commonsware.com/blog/2014/11/18/android-5p0-deprecation-splitactionbarwhennarrow.html)。

# asp.net-mvc - 不正确的 Razor 语法

> ID：16220981
> 
> 赞同：0
> 
> 时间：2013-04-25T17:22:42.007
> 
> 标签：asp.net-mvc, razor

我在理解`@Razor`视图中的工作方式时遇到了一些麻烦。下面的代码是我的观点，用户可以在其中创建新帖子（我正在创建论坛）

我想要做的是删除`<Fieldset>` 我的问题是我无法更改我标记的代码。

```
@model Forum3.Models.Posts

<h2>CreatePost</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
//--- CAN'T EDITED ----
    <fieldset>
        <legend>Post</legend>
        @*SET TopicID*@
        @{
Html.HiddenFor(model => model.TopicId);
@Html.Hidden("TopicId",ViewData["currentTopicId"]);
           }
//----END----

        <div class="editor-label">
            @Html.LabelFor(model => model.Text)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Text)
            @Html.ValidationMessageFor(model => model.Text)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

如果我删除`<Fieldset`> 和`<Legend`> 我的`HiddenFor`代码会出现此错误： `Parser Error Message: Unexpected "{" after "@" character. Once inside the body of a code block (@if {}, @{}, etc.) you do not need to use "@{" to switch to code.`

如果我然后删除`@{...}`看起来像这样：

```
@Html.HiddenFor(model => model.TopicId);
@Html.Hidden("TopicId",ViewData["currentTopicId"]); 
```

单击时会出现错误，`Create`因为没有将 TopicId 设置为我的`currentTopicId`（如果我离开，也会发生这种情况`<fieldset>`）

我不知道这里发生了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:39:23.463

`@`一旦您删除周围的块并在两个字段上使用，我就没有任何错误。但是，您确实拥有的一件事可能会弄乱您的帖子-您对同一属性同时拥有 a`Hidden`和 a `HiddenFor`。因此，如果您查看渲染的标记，您会在那里看到两次，因此它被发布了两次（我不确定它分配给发布的模型的是哪一个）。

这`HiddenFor`就是您所需要的 - 只需确保您的模型包含该`TopicId`值，并且您根本不需要它`ViewData`，因此您可以摆脱第二个。

# c - 在 C 中对数字进行符号扩展

> ID：16220983
> 
> 赞同：2
> 
> 时间：2013-04-25T17:22:48.063
> 
> 标签：c

我在尝试通过提取位字符串的一部分来对数字进行符号扩展时遇到问题。当它是负数时，这有问题，它将数字环绕到正侧。这是我的代码：

```
//  printf("add1 \n");
unsigned short r1 = (instruction>>6)&7;
signed short amount = (instruction& 31);   //right here! i am trying to get the last 5 bits and store it in a register but i can't figure out how to make it negative if it is negative
//  printf("\namount is %d \n", amount);
unsigned short dest = (instruction>>9)&7;
state->regs[dest] = state->regs[r1]+amount;
setCC(state,state->regs[r1]+amount); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:27:10.597

对于位模式，使用十六进制常量而不是十进制通常更容易。

```
signed short amount = (instruction & 0x1F); 
```

然后对数字进行符号扩展，检查符号位（假设这里的*符号位*是提取的 5 个位中的最左侧）。~~如果已设置，请进行二进制反转并加 1。~~取 5 位值的 2 的补码（取反并加一），然后取全角结果的 2 的补码（取反并加 1）。

```
if (amount & 0x10)
    amount = ~(amount^0x1F + 1) + 1; 
```

例如。

```
 5-bit "bitfield"
             X XXXX
0000 0000 0001 1111
0000 0000 0000 0000 invert x ^ 0x1F (= 1 1111)
0000 0000 0000 0001 add 1
1111 1111 1111 1110 invert ~
1111 1111 1111 1111 add 1

0000 0000 0001 0000
0000 0000 0000 1111 invert x ^ 0x1F (= 1 1111)
0000 0000 0001 0000 add 1
1111 1111 1110 1111 invert ~
1111 1111 1111 0000 add 1 
```

哎呀。更简单：

```
-(x^0x1F + 1)  Assuming the machine operates with 2's-complement

0000 0000 0001 0110
0000 0000 0000 1001 invert
0000 0000 0000 1010 add 1 (yielding the full-width absolute value)
1111 1111 1111 0110 negate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:33:17.110

使用位域：

```
union {
      int a;
      struct {
         int a:5;
         int b:3;
         unsigned int c:20;
      } b;
} u = 0xdeadbeef;

int b = u.b.b;  // should sign extend the 3-bit bitfield starting from bit 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-08T15:39:05.073

来自 Hacker's Delight 2-6。假设 5 位数据必须进行符号扩展（符号位的值为 16）。

最佳情况：如果高位全为零：

```
(i ^ 16) - 16 
```

下一个最佳情况（与 OP 一样`instruction`）：如果高位包含必须丢弃的数据：

```
(i & 15) - (i & 16) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-18T16:22:28.257

以下是无需测试即可对 5 位二进制补码值进行签名扩展的方法：

```
int amount = (instruction & 31) - ((instruction & 16) << 1); 
```

更一般地说，如果字段宽度为`n`，非零且小于 中的位数`int`，您可以编写：

```
int amount = (instruction & ~(~1U << (n - 1) << 1)) -
             ((instruction & (1U << (n - 1)) << 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T19:28:32.050

您可以检查符号位并相应地修复结果：

```
int width_of_field = 5;
signed short amount = (instruction& 31);
if (amount & (1 << width_of_field >> 1)) // look at the sign bit
{
    amount -= 1 << width_of_field; // fix the result
} 
```

或者，使用左移后右移：

```
width_of_field = 5;
signed short amount = (instruction& 31);
// It is possible to omit the "& 31", because of the left shift below
amount <<= 16 - width_of_field;
amount >>= 16 - width_of_field; 
```

注意：必须使用两个语句来避免提升到`int`（大概有 32 位）的影响。

# javascript - JavaScript 在每个浏览器中的行为不同

> ID：16220987
> 
> 赞同：0
> 
> 时间：2013-04-25T17:22:56.113
> 
> 标签：javascript, browser

我正在尝试使用 iframe 自动高度，最适合我的代码是：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<title>THE IFRAME HOLDER</title>

<script>
  function alertsize(pixels){
    pixels+=32;
    document.getElementById('myiframe').style.height = pixels+"px";
  }
</script>

</head>

<body style="background:silver;">
<iframe src='theiframe.htm' style='width:458px;background:white;' frameborder='0' id="myiframe" scrolling="auto"></iframe>
</body>
</html> 
```

iframe：以名称“theiframe.htm”保存

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<title>IFRAME CONTENT</title>
<script>
  function toggle(obj) {
    var el = document.getElementById(obj);
    if ( el.style.display != 'block' ) el.style.display = 'block';
    else el.style.display = 'none';
    parent.alertsize(document.body.scrollHeight);
 }
</script>
</head>

<body onload="parent.alertsize(document.body.scrollHeight); " >

<a href="javascript:toggle('moreheight')">toggle height?</a><br />
<div style="display:none;" id="moreheight">
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
    more height!<br />
</div>
text<br />
text<br />
text<br />
text<br />
text<br />
text<br />
text<br />
text<br />
THE END
<div style="clear:both;"></div>

</body>
</html> 
```

在 IE、Opera 和 Firefox 中，它可以完美运行。在 Chrome 和 Safari 中，似乎不起作用。有朋友说问题可能出在这里：

```
onload="parent.alertsize(document.body.scrollHeight);" 
```

Chrome 中的示例： [http ://www.warezexpress.com/ups/2009_setembro/chrome.jpg](http://www.warezexpress.com/ups/2009_setembro/chrome.jpg)

Safari 中的示例：（iframe 扩展，并且不减小） [http://www.warezexpress.com/ups/2009_setembro/safari.jpg](http://www.warezexpress.com/ups/2009_setembro/safari.jpg)

但我仍然不明白 JavaScript 来解决这个问题。我在论坛中准备了这段代码。谢谢你的话！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:26:34.767

如果您正在为浏览器兼容性而苦苦挣扎，那么`jQuery`最好*从*.

# node.js - 使用 Zombie.js 测试对同一 URL 的并发请求

> ID：16220988
> 
> 赞同：0
> 
> 时间：2013-04-25T17:23:04.117
> 
> 标签：node.js, zombie.js

有什么方法可以使用 Zombie.js 模拟对同一 URL 的大约 200 个请求，以检查节点服务器的性能。

# c# - 我对 System.Threading.Timer 的使用可以更有效吗

> ID：16220991
> 
> 赞同：-2
> 
> 时间：2013-04-25T17:23:12.567
> 
> 标签：c#, timer, windows-services, autoresetevent

我正在寻找一些关于使我的代码更高效的建议。我想做的是`System.Threading.Timer`每隔一小时左右运行一些工作，工作不会很繁重，但我希望有一个不占用太多资源的代码。我计划在 Windows 服务中运行此代码。

这就是我到目前为止所拥有的。

```
class Program
{
    private static Timer timer;

    static void Main(string[] args)
    {
        SetTimer();
    }

    static void SetTimer()
    {
        timer = new Timer(Write);

        var next = DateTime.Now.AddHours(1);

        var nextSync = (int)(next - DateTime.Now).TotalMilliseconds;

        timer.Change(nextSync, Timeout.Infinite);
    }

    static void Write(object data)
    {
        Console.WriteLine("foo");

        SetTimer(); //Call the SetTimer again for the next run.
    }
} 
```

你们有什么感想？我可以让我的代码更有效率吗？

非常感谢所有建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:27:26.253

几点：

*   您不必每小时都创建一个新计时器。
*   将第二个参数设置为无限，使您必须手动重新加载计时器。但是……在这种情况下，你为什么要这样做？
*   您现在很难计算从一小时表格创建时间跨度：现在 + 1 小时 - 现在。这很容易解决。

试试这个：

```
class Program
{
    private static Timer timer = new Timer(Write, null, TimeSpan.FromHours(1), TimeSpan.FromHours(1));

    static void Main(string[] args)
    {
    }

    static void Write(object data)
    {
        Console.WriteLine("foo");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:26:28.503

这不好，因为您每次迭代都会创建并放弃一个全新的计时器。移动

```
timer = new Timer(Write); 
```

into`Main`使其只执行一次，然后`SetTimer`可以重用这个单个 Timer 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:29:29.487

在 WPF 中：

```
DispatcherTimer timer = new DispatcherTimer();

timer.Tick += timer_Tick;
timer.Interval = = new TimeSpan(1, 0, 0); //once an hour
timer.Start();

void timer_Tick(object sender, EventArgs e)
{
     //do your updates
} 
```

# functional-programming - Erlang：优雅的 tuple_to_list/1

> ID：16220993
> 
> 赞同：12
> 
> 时间：2013-04-25T17:23:41.520
> 
> 标签：functional-programming, erlang

我正在通过 Armstrong 的“Programming Erlang”向我介绍 Erlang。一个练习是编写 tuple_to_list/1 BIF 的重新实现。我的解决方案对我来说似乎相当不雅，尤其是因为我使用了辅助函数。有没有更多的 Erlang-ish 方式来做到这一点？

```
tup2lis({}) -> [];
tup2lis(T) -> tup2list_help(T,1,tuple_size(T)).

tup2list_help(T,Size,Size) -> [element(Size,T)];
tup2list_help(T,Pos,Size) -> [element(Pos,T)|tup2list_help(T,Pos+1,Size)]. 
```

非常感谢您的想法。:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-25T19:08:15.470

我认为您的功能还可以，如果您的目标是学习语言，则更多。作为风格问题，通常构造列表时的基本情况只是空列表[]。所以我会写

```
tup2list(Tuple) -> tup2list(Tuple, 1, tuple_size(Tuple)).

tup2list(Tuple, Pos, Size) when Pos =< Size ->  
    [element(Pos,Tuple) | tup2list(Tuple, Pos+1, Size)];
tup2list(_Tuple,_Pos,_Size) -> []. 
```

您可以使用列表理解编写几乎相同的内容

```
[element(I,Tuple) || I <- lists:seq(1,tuple_size(Tuple))]. 
```

当元组没有元素时，它将按预期工作，因为 lists:seq(1,0) 给出了一个空列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T21:02:25.720

您的代码很好，而且是如何制作这种东西的惯用方式。您也可以向后构建此列表，在这种情况下，由于尾调用，它会更快一些，但并不重要。

```
tup2list(T) -> tup2list(T, size(T), []).

tup2list(T, 0, Acc) -> Acc;
tup2list(T, N, Acc) -> tup2list(T, N-1, [element(N,T)|Acc]). 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-05T23:02:55.067

我正在尝试 Joe Armstrong 书中的练习，这就是我想出的

```
my_tuple_to_list(Tuple) -> [element(T, Tuple) || T <- lists:seq(1, tuple_size(Tuple))]. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T21:53:44.507

在[Erlang R16B 中](http://www.erlang.org/download/otp_src_R16B.readme)，您还可以像这样使用[erlang:delete_element/2](http://www.erlang.org/doc/man/erlang.html#delete_element-2)函数：

```
tuple2list({}) -> [];
tuple2list(T) when is_tuple(T) ->
    [element(1, T) | tuple2list(erlang:delete_element(1, T))]. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-15T02:38:43.353

奇怪的是，我现在正在使用乔·阿姆斯特朗（Joe Armstrong）第二版的同一本书来学习这一点，第 4 章是关于模块和功能的，涵盖列表理解、守卫、累加器等。无论如何，使用这些知识，我的解决方案是下面的代码：

```
-module(my_tuple_to_list).
-export([convert/1]).

convert(T) when is_tuple(T) -> [element(Pos,T) || Pos <- lists:seq(1,tuple_size(T))]. 
```

大多数答案已经以相同的方式给出，我只是添加了 Guard 以确保给出一个元组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-21T15:14:13.343

Erlang 17.0，您应该按自然顺序构建列表，从效率的角度来看，上述解决方案是不正确的。始终将元素添加到现有列表的头部：

```
%% ====================================================================
%% API functions
%% ====================================================================
my_tuple_to_list({}) ->
    [];
my_tuple_to_list(Tuple) ->
   tuple_to_list_iter(1, size(Tuple), Tuple, [])
.
%% ====================================================================
%% Internal functions
%% ====================================================================
tuple_to_list_iter(N, N, Tuple, List) ->
    lists:reverse([element(N, Tuple)|List]);

tuple_to_list_iter(N, Tuplesize, Tuple, List) ->
    L = [element(N, Tuple)|List],
    tuple_to_list_iter(N + 1, Tuplesize, Tuple, L)    
. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-17T16:25:27.033

`mytuple_to_list(T) when tuple_size(T) =:= 0 -> []; mytuple_to_list(T) -> [element(1, T)|mytuple_to_list(erlang:delete_element(1, T))].`

# sql - 事务范围内的sql死锁

> ID：16220997
> 
> 赞同：0
> 
> 时间：2013-04-25T17:24:01.637
> 
> 标签：sql, sql-server, entity-framework, tsql

我有交易范围，我想：

```
using (var scope = new TransactionScope())
{
   1) Insert row into table1
   2) Select rows from table1  (incuding inserted row in step 1)
   3) Insert another row into table1 
   4) Select rows from table1 (incuding inserted row in step 1 and 3)
} 
```

有没有机会在这些操作中出现 sql 死锁？我正在使用 Db 工作的实体框架。我不确定。

谢谢，

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:10:01.630

这应该没有问题。

插入可能会锁定其他用户，甚至锁定您自己进行的其他事务，但它不会阻止您在**同一个**Sql 事务中执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:33:27.967

是的，有可能发生死锁。

如果`SQL Server`选择将`INSERT`操作所需的锁升级到页级或表级并且会发生这种情况：

```
Transaction 1         Transaction 2
INSERT INTO page1
                      INSERT INTO page2
                      INSERT INTO page1
INSERT INTO page2 
```

那么这两个事务将死锁，其中一个必须回滚。