# StackOverflow 问答 12744000-12744999

# ruby - 如何将form_for方法的名称传递给rails中的部分？

> ID：12744002
> 
> 赞同：0
> 
> 时间：2012-10-05T10:08:14.613
> 
> 标签：ruby, ruby-on-rails-3, partial-views

再会！新手小问题：假设我要生成 form_for 特殊外观助手的字段。因此，为了不重复复杂的代码来生成模型的许多字段，我渲染了一些部分并在那里传递参数。其中有一个对表单对象的引用。
问题是什么传递给 render 方法来调用表单对象的部分必要方法？比如我这次要生成email_field：

```
<%= form_for @order do |f| %>
<%= render :partial => 'form_field_special', :locals => {:form => f, :type => :email_field, :labelcaption => "SpcName"} %>
<% end %> 
```

和部分本身：

```
<div class="control-group">
<%= f.label :name, <%= labelcaption %> , :class => "control-label" %>
<div class="controls">
<%= f.type :name %> # ??????
</div>
</div> 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:47:29.533

使用红宝石能量。[对象#send](http://ruby-doc.org/core-1.9.2/Object.html#method-i-send)方法：

```
<%= form_for @order do |f| %>
  <%= render :partial => 'form_field_special', :locals => {..., :field_type => 'email_field'} %>
<% end %>

<%= f.send(field_type, :name) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:20:10.043

以下方法被证明是通过名称调用 ruby​​ 对象函数的最快方法：

```
m = form.method(name_of_the_method)
m.call(parameters) 
```

# iphone - 如何从模型 segue 表视图控制器中获取数据？

> ID：12744003
> 
> 赞同：1
> 
> 时间：2012-10-05T10:08:16.837
> 
> 标签：iphone, ios, uitableview, uistoryboardsegue

我有`ViewController`哪个执行模型类型 segue，另一个`UITableViewController`来自底部，它在`UITableView`. I want that when any of the category selected it must pass back some data to the sender controller

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:47:01.937

将第一个视图控制器设置为 modal 的自定义委托`UITableViewController`，您可以在此方法中获取对第一个视图控制器中的`UITableViewController`或 的引用，如下所示：`UITableView`

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"tableviewController"]){
         MyTableViewController *myTableViewController = (MyTableViewController *)[segue      destinationViewController];

         myTableViewController.delegate = self;
     }
} 
```

您将需要在表格视图控制器上设置委托回调等和属性。如果您还不知道，应该有很多关于如何做到这一点的指南，这里有一个

[如何设置一个简单的委托来在两个视图控制器之间进行通信？](https://stackoverflow.com/questions/6168919/how-do-i-set-up-a-simple-delegate-to-communicate-between-two-view-controllers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:03:19.567

如果这是您的用户可能会在不关闭视图的情况下重复执行的操作，那么您最好的选择可能是发布通知，让发件人注册以收听。

要发布通知，请在更改类别时执行此操作：

```
 NSNotification *aNotification = [NSNotification notificationWithName:categoryChangedNotification object:categoryThatWasChanged];
[[NSNotificationCenter defaultCenter] postNotification:aNotification]; 
```

要在发件人中收听它：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_refreshCategories) name:categoryChangedNotification object:nil]; 
```

记得适当地 addObserver 和 removeObserver 以免在不必要的时候被观察。

如果用户选择然后关闭视图，返回到发送者视图，你最好制定一个协议，将发送者设置为委托。本质上，在您的 .h 文件中创建了一个协议，如下所示：

```
 @protocol myControllerDelegate
      -(void)myControllerFinishedEditingCategories:(id)sender;
 @end 
```

然后你需要在同一个控制器中的一个属性：

```
 @property (nonatomic, unsafe_unretained) id<myControllerDelegate> delegate; 
```

使发送视图符合协议：

```
 @interface sendingViewController : UIViewController <myControllerDelegate> 
```

现在，当您完成编辑类别后，您可以在关闭视图之前调用发送方的委托方法：

```
 [delegate myControllerFinishedEditingCategories:self]; 
```

# javascript - 方向正常，但数据大小不适合屏幕。粘贴代码是定位功能

> ID：12744004
> 
> 赞同：1
> 
> 时间：2012-10-05T10:08:18.563
> 
> 标签：javascript, android, highcharts

方向正常，但数据大小不适合屏幕。

```
function doOnOrientationChange()
    {
    var hhei= 0;
    switch(window.orientation)
    {
    case -90:
    hhei= ($(document).height())*2.0/4;

     alert("-90:"+hhei);
    chartcreator(ticks,s1,s2,legendEquipments,hhei);
    break;
    case 90:
    hhei= ($(document).height())*2.0/4;
     alert("90:"+hhei);
    chartcreator(ticks,s1,s2,legendEquipments,hhei);
    break;
    case 0:
    hhei= ($(document).height())*2.0/4;
     alert("0:"+hhei);
    chartcreator(ticks,s1,s2,legendEquipments,hhei);
    break;
    case 180:
    hhei= ($(document).height())*2.0/4;
    alert("180:"+hhei);
    chartcreator(ticks,s1,s2,legendEquipments,hhei);
    break;
    }
    } 
```

90' 显示垂直布局，180' 显示水平布局。我不知道如何解决它

# php - 在mysql上使用关系表选择时生成自定义数组

> ID：12744007
> 
> 赞同：0
> 
> 时间：2012-10-05T10:08:29.607
> 
> 标签：php, mysql, database

当我想从数据库中选择数据时遇到问题。

这是我的查询

```
SELECT J.id as id_job, J.title as job_title, J.companies_id, C.name as company_name,J.created_at, L.name as Location,CL.postal_code, CL.address
                                FROM jobs J
                                INNER JOIN bla1 C ON ( C.id = J.company_id )
                                INNER JOIN bla2 CL ON ( CL.id = J.company_location_id )
                                INNER JOIN bla3 L ON ( L.id = CL.location_id )
                                WHERE J.status =1
                                AND C.status =2
                                And CL.status = 1
                                AND L.status = 1
                                ORDER BY J.created_at DESC
                                LIMIT 0 , 30 
```

这是该查询的结果`var_dump()`

```
["_result":protected]=>
  array(15) {
    [0]=>
    array(8) {
      ["id_job"]=>
      string(2) "27"
      ["job_title"]=>
      string(10) "YUYUYUYUYU"
      ["company_id"]=>
      string(1) "3"
      ["company_name"]=>
      string(16) "voyage indonesia"
      ["created_at"]=>
      string(19) "2012-10-03 09:35:37"
      ["Location"]=>
      string(4) "Bali"
      ["postal_code"]=>
      string(6) "989767"
      ["address"]=>
      string(11) "dimana mana"
    }
    [1]=>
    array(8) {
      ["id_job"]=>
      string(2) "23"
      ["job_title"]=>
      string(11) "OYEEEEAAHHH"
      ["company_id"]=>
      string(1) "3"
      ["company_name"]=>
      string(16) "voyage indonesia"
      ["created_at"]=>
      string(19) "2012-09-28 09:06:54"
      ["Location"]=>
      string(7) "Bandung"
      ["postal_code"]=>
      NULL
      ["address"]=>
      NULL
    }
    [2]=>
    array(8) {
      ["id_job"]=>
      string(2) "20"
      ["job_title"]=>
      string(14) "TKPDKJKLADKSJA"
      ["company_id"]=>
      string(1) "3"
      ["company_name"]=>
      string(16) "voyage indonesia"
      ["created_at"]=>
      string(19) "2012-09-20 09:24:50"
      ["Location"]=>
      string(7) "Bandung"
      ["postal_code"]=>
      NULL
      ["address"]=>
      NULL
    }
}
["_total_rows":protected]=>
  int(3)
  ["_current_row":protected]=>
  int(0)
  ["_as_object":protected]=>
  bool(false) 
```

我的目标：数组索引中的示例 8 像这样或比这个代码更好的东西

```
array(8) {
          ["id_job"]=>
          string(2) "27"
          ["job_title"]=>
          string(10) "YUYUYUYUYU"
          ["company_id"]=>
          string(1) "3"
          Array ( [companies] => array(1) {
          ["company_name"]=>
          string(16) "voyage indonesia"
          })
          ["created_at"]=>
          string(19) "2012-10-03 09:35:37"
          ["Location"]=>
          string(4) "Bali"
          ["postal_code"]=>
          string(6) "989767"
          ["address"]=>
          string(11) "dimana mana"
        } 
```

company_id 是关系表数据库表 bla1，我想在关系表中给出数组，所以我可以很容易地解析数据，有`array('bla1' = > array('company_id',1));` 什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:12:08.897

我想这就是你想要的。

```
 array[$row_id] = $row; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:29:54.610

我看不到您可以从 SQL 查询中获取嵌套数组。数据库查询提供行和列而无需进一步的子结构。

您当然可以通过编程方式执行此操作，只需将包含作业和位置的表作为数组，然后从中生成所需的嵌套列表。但是，您将失去连接的力量，需要将其嵌入到您的代码中。

# oracle - 为 node js 安装 oracle 模块

> ID：12744013
> 
> 赞同：1
> 
> 时间：2012-10-05T10:09:14.710
> 
> 标签：oracle, node.js, oracle10g

我需要在 MAC 终端中将节点 js 与 oracle db 连接起来。因此，对于安装尝试了链接[https://github.com/nearinfinity/node-oracle](https://github.com/nearinfinity/node-oracle)中的步骤， 在将即时客户端文件从 oracle 链接复制到路径 /usr/InstantClient/ 中的文件夹后，我设置了以下路径

`$ export OCI_INCLUDE_DIR=/usr/InstantClient/sdk/include` `$ export OCI_LIB_DIR=/usr/InstantClient/` `$ export LD_LIBRARY_PATH=/usr/InstantClient/`

但是，出现类似错误：至少一个文件无法编译。

我在设置路径或环境变量时是否有任何错误？谁能提供我安装 oracle 模块以在 MAC 终端中与节点一起使用的步骤？谢谢

**编辑**：我得到的错误列表如下`npm install db-oracle`：

```
unameits-Mac-mini:InstantClient vinod$ npm install db-oracle
npm http GET https://registry.npmjs.org/db-oracle
npm http 304 https://registry.npmjs.org/db-oracle

> db-oracle@0.2.3 install /usr/InstantClient/node_modules/db-oracle
> node-waf configure build

Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for node path                   : not found 
Checking for node prefix                 : ok /usr/local/Cellar/node/0.8.11 
Checking for header occi.h               : Missing include files for OCI 
/usr/InstantClient/node_modules/db-oracle/wscript:42: error: the configuration failed (see '/usr/InstantClient/node_modules/db-oracle/build/config.log')
> db-oracle@0.2.3 preuninstall /usr/InstantClient/node_modules/db-oracle
> rm -rf build/*
npm ERR! db-oracle@0.2.3 install: `node-waf configure build`
npm ERR! `sh "-c" "node-waf configure build"` failed with 1
npm ERR! 
npm ERR! Failed at the db-oracle@0.2.3 install script.
npm ERR! This is most likely a problem with the db-oracle package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-waf configure build
npm ERR! You can get their info via:
npm ERR!     npm owner ls db-oracle
npm ERR! There is likely additional logging output above.

npm ERR! System Darwin 11.3.0

npm ERR! command "/usr/local/Cellar/node/0.8.11/bin/node" "/usr/local/bin/npm" "install" "db-oracle"

npm ERR! cwd /usr/InstantClient
npm ERR! node -v v0.8.11
npm ERR! npm -v 1.1.62
npm ERR! code ELIFECYCLE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /usr/InstantClient/npm-debug.log

npm ERR! not ok code 0 
```

* * *

我在 npm install db-oracle 上得到的错误列表如下

unameits-Mac-mini:InstantClient vinod$ npm install db-oracle npm http GET [https://registry.npmjs.org/db-oracle](https://registry.npmjs.org/db-oracle) npm http 304 [https://registry.npmjs.org/db-oracle](https://registry.npmjs.org/db-oracle)

> db-oracle@0.2.3 install /usr/InstantClient/node_modules/db-oracle node-waf configure build

检查程序 g++ 或 c++：/usr/bin/g++

检查程序 cpp：/usr/bin/cpp

检查程序 ar：/usr/bin/ar

检查程序ranlib：/usr/bin/ranlib

检查 g++：好的

检查节点路径：未找到

检查节点前缀：ok /usr/local/Cellar/node/0.8.11

检查标头 occi.h：缺少 OCI 的包含文件

/usr/InstantClient/node_modules/db-oracle/wscript:42：错误：配置失败（请参阅'/usr/InstantClient/node_modules/db-oracle/build/config.log'）

> db-oracle@0.2.3 preuninstall /usr/InstantClient/node_modules/db-oracle rm -rf build/*

npm 错误！db-oracle@0.2.3 安装：`node-waf configure build`

npm 错误！`sh "-c" "node-waf configure build"`失败 1

npm 错误！

npm 错误！db-oracle@0.2.3 安装脚本失败。

npm 错误！这很可能是 db-oracle 软件包的问题，

npm 错误！不是 npm 本身。

npm 错误！告诉作者这在您的系统上失败：

npm 错误！node-waf 配置构建

npm 错误！您可以通过以下方式获取他们的信息：

npm 错误！npm 所有者 ls db-oracle

npm 错误！上面可能有额外的日志输出。

npm 错误！系统达尔文 11.3.0

npm 错误！命令“/usr/local/Cellar/node/0.8.11/bin/node”“/usr/local/bin/npm”“安装”“db-oracle”

npm 错误！cwd /usr/InstantClient

npm 错误！节点-v v0.8.11

npm 错误！npm -v 1.1.62

npm 错误！代码生命周期

npm 错误！

npm 错误！可以在以下位置找到其他日志记录详细信息：

npm 错误！/usr/InstantClient/npm-debug.log

npm 错误！不好的代码 0

# java - 为什么我的权限被拒绝连接到端口 338？

> ID：12744027
> 
> 赞同：1
> 
> 时间：2012-10-05T10:10:29.433
> 
> 标签：java, exception, permissions

我今天从大学获得了这个示例代码，它在大学内部运行良好，但是当我在家用机器上运行它（使用 Eclipse）时，我的权限被拒绝。大学的机器是Windows（7），我家的电脑是Linux（Ubuntu）。

为什么我会收到以下错误？

I/O 权限错误被拒绝

我正在使用端口 338。

代码副本：

```
import java.io.*;
import java.net.*;
import java.util.*;

public class Server 
{
    public static void main(String[] args)
    {
        try
        {
            // First create the input from the keyboard
            BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Server Program");

            // Get the port to listen on
            System.out.print("Enter port number to listen on: ");
            String port_string = input.readLine();

            // The port number needs to be an int, so convert the String to an int
            int port = Integer.parseInt(port_string);

            // Create a ServerSocket to listen on this address
            ServerSocket server = new ServerSocket(port);

            // Accept an incoming client connection on the server socket
            Socket sock = server.accept();

            // Create the output stream to the client
            DataOutputStream network = new DataOutputStream(sock.getOutputStream());

            // Send message
            network.writeUTF("Welcome " + sock.getInetAddress().getHostName() + ". We are " + new Date() + "\n");

            // Close sockets.  This will cause the client to exit
            sock.close();
            server.close();
        }
        catch (IOException ioe)
        {
            System.err.println("Error in I/O");
            System.err.println(ioe.getMessage());
            System.exit(-1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:16:02.710

1024 以下的端口在大多数现代操作系统（包括 Ubuntu）上具有特权，并且需要您以管理员/root 或提升的特权运行程序。

在家中尝试使用更高的端口进行测试，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:16:42.007

你说你的家用机器正在运行 Ubuntu。

在 Ubuntu（和其他类 Unix 操作系统）上，普通用户不允许监听小于 1024 端口的端口。

尝试使用 >= 1024 的端口号运行它。

# .net - 具有重复信息的 xslt 集

> ID：12744029
> 
> 赞同：1
> 
> 时间：2012-10-05T10:10:34.273
> 
> 标签：.net, xslt

我有很多`xslt`文件有时包含一些相同对象的完全重复的信息。是否有可能将其带到另一个`xslt`并包含在现有的中？如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:13:03.157

**[`<xsl:include>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-include)**有助于模块化 XSLT 代码，但本身不会删除重复的代码。

**XSLT 最基本的特性之一——[模板](http://www.w3.org/TR/1999/REC-xslt-19991116#element-template)——如果使用得当，可以显着消除任何代码重复**：

1.  模板的匹配模式匹配要应用模板的不同类型的节点——这消除了在处理相同匹配模式的不同实例时在许多地方使用相同代码时的重复。虽然可以类似于使用函数/子例程调用模板**[`<xsl:call-template>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-call-template)**，但使用 选择匹配的模板进行处理更加强大和灵活**[`<xsl:apply-templates>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-apply-templates)**——后者类似于在 OOP 中从基本类型调用虚函数——我们不知道在执行时将存在哪些派生对象以及将选择相应虚函数的许多特化（覆盖）中的哪一个来执行。

2.  上述技术与*将参数传递*给模板相结合，有助于消除只有某些值/节点不同的重复代码。

3.  使用模板可以模拟高阶函数 (HOF)，并将模板/函数作为参数传递给另一个模板/函数，并返回模板函数作为应用模板/函数的结果。可以使用功能组合和部分应用动态创建新功能。FXSL 库为 XSLT 1.0 和 XSLT 2.0 实现了 HOF。

4.  在即将到来的 XPath 3.0 / XSLT 3.0 中，HOF 是该语言的标准特性。函数可以作为参数传递，也可以作为结果返回给其他函数。可以在 XPath 3.0 表达式中动态创建匿名（内联）函数。新的标准 XPath 3.0 函数`fold-left()`，是任何函数式编程语言`fold-right()`中`map()`通常使用的最基本的函数。它们的使用可以显着减少代码大小和代码重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:34:53.620

您应该使用`<xsl:include>` 看看[http://www.xml.com/pub/a/2000/11/01/xslt/index.html](http://www.xml.com/pub/a/2000/11/01/xslt/index.html)或者 [XSLT 中是否有一种包含一次？](https://stackoverflow.com/questions/5219101/is-there-a-kind-of-include-once-in-xslt)

# arrays - 如何在没有循环的情况下更改bash数组元素的值

> ID：12744031
> 
> 赞同：58
> 
> 时间：2012-10-05T10:10:44.070
> 
> 标签：arrays, bash

```
array=(a b c d) 
```

我想在数组的每个元素之前添加一个字符以便拥有这个

```
array=(^a ^b ^c ^d) 
```

一种简单的方法是循环数组元素并逐个更改值

```
for i in "${#array[@]}"
do
    array[i]="^"array[i]
done 
```

但是我想知道是否有任何方法可以在不循环数组的情况下做同样的事情，因为我必须对所有元素执行相同的指令。

提前致谢。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-05T10:19:59.407

使用参数扩展：

```
array=("${array[@]/#/^}") 
```

从文档中：

> ## ${参数/模式/字符串}
> 
> 模式替换。该模式被扩展以产生一个模式，就像在路径名扩展中一样。参数被扩展，模式与其值的最长匹配被替换为字符串。如果pattern 以/ 开头，则pattern 的所有匹配都被替换为字符串。通常只替换第一场比赛。如果pattern以#开头，则必须匹配参数扩展值的开头。如果模式以 % 开头，它必须匹配参数扩展值的末尾。如果 string 为 null，则删除 pattern 的匹配项，并且可以省略 / 后面的 pattern。如果参数是@或*，则对每个位置参数依次应用替换操作，扩展是结果列表。如果 parameter 是下标为 @ 或 * 的数组变量，则对数组的每个成员依次进行替换操作，展开是结果列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-06T18:48:30.900

这种方式也尊重数组值中的空格：

```
array=( "${array[@]/#/^}" ) 
```

请注意，如果数组为空并且您之前设置过，这将失败

```
set -u 
```

我不知道如何使用短代码消除这个问题......

# android - findViewById 在 handleMessage 内返回 null

> ID：12744035
> 
> 赞同：0
> 
> 时间：2012-10-05T10:11:05.267
> 
> 标签：android

一点解释，我想做的事情是：我需要从另一个线程更新我的活动的 UI。但是从该线程无法访问的非静态函数/卷，没有静态的 bcs 我无法通过 PhonePadActivity.uaReceiverHandler(msg) 方式从外部类调用代码（也从该线程静态引用到 Activity - PhonePadActivity.phonePadActvity 始终为空并导致例外） 。但是当我传入使用静态处理程序时，所有静态引用也始终为空，这使我无法更新 UI（简单的 findViewByID 产品编译器错误无法从非静态引用静态方法）。因此，只有来自另一个线程工作的 PhonePadActivity.uaReceiverHandler(msg) 可以更改本地私有静态变量，但无法访问视图对象）我该如何解决？

我通过句柄消息收到了很好的消息：

```
public static final Handler uaReceiverHandler = new Handler(){

    @Override
    public void handleMessage(Message msg) {
        Bundle b = msg.getData();
        Log.e(THIS_FILE, "WAS regState" + regState);
        regState = b.getString("regState");  
        TextView statusLocal = (TextView) phonePadForUsing.findViewById(R.id.registrationStatus);

        statusLocal.setText("Registered");

    }
}; 
```

就我而言：

```
public  class PhonePadActivity extends Activity {
      public static PhonePadActivity phonePadForUsing;
      private static TextView status; 
```

其中分配：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_phone_pad);
    phonePadForUsing = this;
    status = ((TextView) phonePadForUsing.findViewById(R.id.registrationStatus)); 
```

此代码工作正常，regState 也已分配，但 phonePadForUsing 始终返回 null 豁免，此代码：

```
 status.setText("Registered"); 
```

返回完整的跟踪：

> 10-05 13:34:51.495: E/AndroidRuntime(12744): java.lang.NullPointerException 10-05 13:34:51.495: E/AndroidRuntime(12744): 在 com.callsfreecalls.android.PhonePadActivity$4.handleMessage(PhonePadActivity .java:1180) 10-05 13:34:51.495: E/AndroidRuntime(12744): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-05 13:34:51.495: E/AndroidRuntime(12744) ): 在 android.os.Looper.loop(Looper.java:123) 10-05 13:34:51.495: E/AndroidRuntime(12744): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 10- 05 13:34:51.495: E/AndroidRuntime(12744): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-05 13:34:51.495: E/AndroidRuntime(12744): 在 java.lang.reflect .Method.invoke(Method.java:521) 10-05 13:34:51.495: E/AndroidRuntime(12744): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:868）10-05 13:34:51.495：E/AndroidRuntime（12744）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:626）10-05 13:34： 51.495：E/AndroidRuntime（12744）：在 dalvik.system.NativeStart.main（本机方法）

onCreate 之前被触发，所以，所有元素都已经完成，bcs 我已经登录 OnCreate （如你所见，它比异常早 10 秒......：

> 10-05 13:34:41.535: D/PhonePad(12735): onCreate: 创建

任何建议将不胜感激，也请包括代码和平。相同的代码在另一个使用另一个类的 Handler 中运行良好：

```
final static Handler clientControllerHandler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        final TextView status = ((TextView) phonePadForUsing.findViewById(R.id.registrationStatus));
        status.setText("Data not received"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:19:08.130

好的，所以首先，按照行之有效的方法。通常所有的 UI 元素都在 onCreate() 中初始化。然后在您的处理程序中访问它。

```
public static final Handler uaReceiverHandler = new Handler(){  

@Override  
public void handleMessage(Message msg) {  
    Bundle b = msg.getData();  
    Log.e(THIS_FILE, "WAS regState" + regState);  
    regState = b.getString("regState");   
    //More this to onCreate(), make statusLocal a global variable.
    TextView statusLocal = (TextView) phonePadForUsing.findViewById(R.id.registrationStatus);  

    statusLocal.setText("Registered");  

}  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:25:18.467

查看您的堆栈信息：

PhonePadActivity.java:1180

抛出空指针异常 - 这意味着您要取消引用的变量未初始化或为空。

仔细查看代码会发现处理程序是静态类-因此它没有对原始实例的引用-因此即使您对其进行了初始化，您的引用也可能为空。

只需在此调用之前添加 log 语句，您就可以看到发生了什么。

# android - Adobe Flex 移动项目中未显示列表中的 Unicode 字符

> ID：12744036
> 
> 赞同：1
> 
> 时间：2012-10-05T10:11:06.213
> 
> 标签：android, flash, mobile, flex4.5, flexbuilder

我正在创建一个 flex 移动项目，其中包含一个包含阿拉伯语数据的列表。列表上的数据没有出现，有没有办法在列表上显示阿拉伯文本？？我试图改变字体，但我也没有工作......

```
<?xml version="1.0" encoding="utf-8"?>
    <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView">
        <fx:Declarations>

        </fx:Declarations>

        <fx:Script>
            <![CDATA[

                import mx.effects.easing.*;

            ]]>
        </fx:Script>
            <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";

        @font-face {
            src: url("fonts/TAHOMA.TTF");
            fontFamily: myArial;
            embedAsCFF: false;
            fontWeight: normal;
            advancedAntiAliasing: true;
            unicodeRange:
                U+00A0-U+00FF,
                U+0020-U+003E,
                U+0152-U+0178,
                U+2002-U+20AC,
                U+0192-U+0390,
                U+0391-U+03D6,
                U+2022-U+2044,
                U+2118-U+2135,
                U+2190-U+21D4,
                U+2200-U+22C5,
                U+2308-U+232A,
                U+25CA-U+2666,
                U+00A1-U+00FF,
                U+2000-U+206F,
                U+20A0-U+20CF,
                U+2100-U+2183,
                U+0020-U+007E,
                U+00B2-U+00B9,/* SUPERSCRIPT*/
                U+2070-U+2089,/* SUBSCRIPT*/
                U+0600-U+06FF,/* Arabic */
                U+FB50-U+FDFF,/* Arabic */
                U+FE70-U+FEFF;/* Arabic */
        }       

        @font-face {
            src: url("fonts/TAHOMA.TTF");
            fontFamily: myArial2;
            fontWeight: normal;
            embedAsCFF: true;
            advancedAntiAliasing: true;

            unicodeRange:
                U+00A0-U+00FF,
                U+0020-U+003E,
                U+0152-U+0178,
                U+2002-U+20AC,
                U+0192-U+0390,
                U+0391-U+03D6,
                U+2022-U+2044,
                U+2118-U+2135,
                U+2190-U+21D4,
                U+2200-U+22C5,
                U+2308-U+232A,
                U+25CA-U+2666,
                U+00A1-U+00FF,
                U+2000-U+206F,
                U+20A0-U+20CF,
                U+2100-U+2183,
                U+0020-U+007E,
                U+00B2-U+00B9,/* SUPERSCRIPT*/
                U+2070-U+2089,/* SUBSCRIPT*/
                U+0600-U+06FF,/* Arabic */
                U+FB50-U+FDFF,/* Arabic */
                U+FE70-U+FEFF;/* Arabic */
        }

        .MyEmbeddedFont  {
            fontFamily: myArial2;
            font-size: 30px;
            color: #eeafaf;
        } 

    </fx:Style>

    <s:Button x="33" y="226" label="ماجد"  skinClass="spark.skins.mobile.ButtonSkin" styleName="MyEmbeddedFont" />
    <s:Label x="67" y="347" text="على"  styleName="MyEmbeddedFont"/>
    <s:List id="test" x="146" y="79" width="324" height="305" fontWeight="normal" styleName="MyEmbeddedFont">

<s:dataProvider >
            <s:ArrayCollection id="arrr">
                <fx:String>ماجد</fx:String>
                <fx:String>على</fx:String>
            </s:ArrayCollection>    
</s:dataProvider> 

    </s:List>

</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:54:06.543

我已经解决了这个问题，通过在 List/spinnerList 中添加 itemRenderer，它可以在 Galaxy Tab II 上正确呈现阿拉伯文本（仅 Tohama 字体）

```
<s:itemRenderer>
    <fx:Component>
        <s:ItemRenderer >
            <s:Label text="{label}" right="10" paddingTop="5" paddingBottom="5" fontSize="24" />
        </s:ItemRenderer>
    </fx:Component>
</s:itemRenderer> 
```

# php - 将 PHP 转换为 Javascript

> ID：12744040
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:11:14.447
> 
> 标签：php, javascript, jquery, json, jquery-ui

我正在使用 CodeIgniter，并且在模型中有一个 PHP MySQL 语句：

```
function getAllDevices() {
    $query = $this->db->query("SELECT * FROM Device_tbl ORDER BY Manufacturer");
    return $query->result();
} 
```

然后我通过我的控制器将它传递给我的视图，使用：

```
 $this->load->model("get_device");
    $data['results'] = $this->get_device->getAllDevices(); 
```

并使用以下 PHP 将其输出到 div 中：

```
 <div class="hold-cont">
            <div class="holder">
                <div class="image-hold"><img class="image-icon" src="<?php echo base_url(); ?>assets/images/devices/<?php echo $row->Image; ?>"></div>
            </div>

            <div class="device-name devicename-txt">
                <?php $mod = $row->Model;
                    $model = str_replace(" ","-",$mod);
                ?><a href="<?php echo base_url(); ?>roms?device=<?php echo($row->Manufacturer . '-' . $model);  ?>"><?php echo($row->Manufacturer. ' ' .$row->Model);  ?></a><br>
            </div>
        </div><?php } ?> 
```

这目前工作正常，但是我现在在我的页面中加入了一个搜索框，它使用 jQuery 函数自动完成并使用 $results 的 JSON 数组

我需要做的是将 PHP“转换”为 Javascript，这将使页面能够使用 JSON 数组进行填充。然后我需要能够使用它来将搜索框中的选择传递到一个查询中，该查询将更改页面上的内容而无需重新加载它。

我该怎么办？我以前使用 jQuery 中的 ajax 函数混合了一种方法，但是这需要一个包含我现在无法执行的 PHP MySql 语句的 URL。这样做背后的想法是，它只在页面加载时运行 1 个 SQL 查询，我**无法**更改此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:22:51.320

没有什么可以阻止 PHP “编写” Javascript。

您需要手动或使用`json_encode`PHP 的方法（本质上将 PHP 对象转换为它的 JSON 表示法）来构建一个适当格式的 Javascript 对象。假设你的 PHP 对象是`$row`这样的：

```
<code>
<script language="text/javascript">
 var jsObject = <?php json_encode($row); ?>
</script>
</code> 
```

将在 jsObject 中为您提供一个 Javascript 对象，其中包含与 PHP $row 对象的属性相对应的键和值，然后您可以从 Javascript 中使用该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:18:11.683

```
 json_encode();
 json_decode(); 
```

将 PHP 数组转换为 JSON 数组并返回。

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

他们工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:32:53.073

您的 ajax 页面：

```
 $query = mysql_query("SELECT * FROM my_table WHERE my_field LIKE '%$input%'");
    while ($row = mysql_fetch_assoc($query)) {
    $json = array();
    $json['value'] = $row['id'];
    $json['name'] = $row['username'];
    $json['image'] = $row['user_photo'];
    $data[] = $json;
    }
    header("Content-type: application/json");
    echo json_encode($data); 
```

并在您的 javascript 中获取此回显的 json 编码数据

这只是一个粗略的代码，避免使用mysql函数。

# python - 扭曲矩阵，将自定义类挂钩到事件循环

> ID：12744041
> 
> 赞同：1
> 
> 时间：2012-10-05T10:11:15.587
> 
> 标签：python, twisted, twisted.internet

试图构建一个扭曲的应用程序，它将在多个端口上接收消息。端口应该生成`Alert`具有`tag`属性和`trigger`属性的对象。然后应用程序应该检查是否已经存在`AlertJob`带有该标签的标签。如果有，则应将其排入队列`Alert`，`AlertJob`如果没有，则应首先创建新的`AlertJob`. 的`AlertJob`... 工作是定期检查触发器，如果​​满足触发器条件，则再次通知主应用程序。这是我的问题：

如何将自定义类（`AlertJob`）挂接到扭曲的反应器中，以便它不断验证是否满足任何正在运行的作业的触发条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:13:12.803

如果您的应用程序需要基于时间的事件源，那么`twisted.internet.reactor.callLater`或者`twisted.internet.task.LoopingCall`可能就是您正在寻找的。这些都包含在[调度](http://twistedmatrix.com/documents/current/core/howto/time.html)方法中。

# ruby-on-rails - SQL 查询需要很长时间才能执行

> ID：12744043
> 
> 赞同：1
> 
> 时间：2012-10-05T10:11:24.600
> 
> 标签：ruby-on-rails, database

我正在从一张表中获取一些数据。但执行至少需要 10 秒。

表包含缺少的记录。

下面是我的红宝石查询。

@royalty_artist = RoyalReport.find(:all,:select =>'local_revenue, upc', :conditions => ["name = ? && upc in (?) && file_id in (?)",name,upc,file_id])

此外，所有三列都有索引。

请建议我如何减少执行时间？

# c# - 如何获取ListView中未显示在C#中ListView中的项目的主键？

> ID：12744044
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:11:35.330
> 
> 标签：c#

如何获取ListView中未显示在C#中ListView中的项目的主键？我谈论的主键是自动递增的，所以我没有在列表视图中显示它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:15:02.780

如果要检索该字段，则应将其添加到模型类中，否则要检索它，则需要再次查询数据库以获取它，这是非常低效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:19:27.373

您所指的内容（因为您提到 ListView）是 listviewitem 的索引（免责声明：手写，未经测试）

```
var listItem = listView1.SelectedItems[0]; // Get the selected item (insert null check)
var key = listItem.Index; // Get its index 
```

以上是获取任意 ListViewItem 的索引，如果要获取 select listviewitems 索引，可以执行以下操作：

```
var key = listView1.SelectedIndex; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:20:20.950

尝试这个：

```
if (ListView1.SelectedItems.Count > 0)
   var primaryKey = ListView1.SelectedValue; 
```

# rest - 通过 REST 在 JasperServer 中以 jrprint 格式生成报告

> ID：12744046
> 
> 赞同：2
> 
> 时间：2012-10-05T10:11:53.570
> 
> 标签：rest, jasperserver

使用 jasperserver 4.7.0。使用 REST API (rest_v2)，我想生成 jrprint 格式的报告。在 JasperServer 的文档之后，这是我必须使用的 URL：

> http://:/jasperserver[-pro]/rest_v2/reports/path/to/report。*format?arguments* 其中*格式*为以下之一：html、pdf、xls、rtf、csv、xml、jrprint

在我的 JasperServer 实例中正确配置报告后，我按照说明调用 URL，如下所示（对于 PDF）：

`http://localhost:8080/jasperserver/rest_v2/reports/reports/test/example.pdf`

它工作正常。但是，如果我将格式更改为 JRPRINT：

`http://localhost:8080/jasperserver/rest_v2/reports/reports/test/example.jrprint`

然后我收到 404（未找到）错误！

后缀“jrprint”是正确的，因为如果我使用任何其他（发明），我会收到 400（错误请求）错误。

所以问题是：我是否必须在 JasperServer 引擎中配置任何特殊的东西才能提供 JRPRINT 报告？或者从客户端浏览器拨打电话时我必须考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T13:58:36.690

尝试以下操作：

```
GET http://localhost:8080/jasperserver/rest_v2/reports/reports/test/example.jrprint 
```

正如你所说，你得到一个“404（未找到）”。但是，在那之后，试试这个：

```
GET http://localhost:8080/jasperserver/rest_v2/reports/reports/test/example.jasperPrint 
```

现在你应该得到“200（OK）”，以及正文中的 JasperPrint 数据。我不明白为什么，但这对我使用 JasperServer 版本有效。5.0.0。

# python - 是否有可能向分裂浏览器代码添加进度条？

> ID：12744048
> 
> 赞同：0
> 
> 时间：2012-10-05T10:12:02.617
> 
> 标签：python, progress-bar, selenium-webdriver, splinter

我有一个下载大量网页的代码（为了清楚起见，需要对它们进行截图）。有什么方法可以在我的应用程序中添加进度条吗？我使用`wx`，但我想知道 splinter (seleniumHQ) 库中是否有进度条以及如何使用它。

你可以在这里看到我的代码：[Python Splinter (SeleniumHQ) 如何截取许多网页的截图？[拒绝连接]](https://stackoverflow.com/questions/12660625/python-splinter-seleniumhq-how-to-take-a-screenshoot-of-many-webpages-connec)它没有 wx 但在我的计算机上我有一个带有 wx 面板的版本。有任何想法吗？

# ruby-on-rails - Rails generate 在错误的文件夹中创建文件

> ID：12744051
> 
> 赞同：0
> 
> 时间：2012-10-05T10:12:09.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我运行像`rails generate model Address`Rails 这样的命令时，会在文件夹中创建模型文件和迁移文件`config`。很多其他的东西也坏了。例如，我无法启动服务器，因为`config.ru`找不到配置文件。

这里有什么问题，我该如何解决？

我猜有些路径设置不正确。但我想知道这是怎么发生的，因为从昨天晚上我就没有碰过任何东西。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:22:23.153

试试这个

```
# in your development.rb file write this
config.paths['db/migrate'] += 'db/migrate/' 
```

然后运行

```
rails generate model Address 
```

# c++ - 调试或映射出大型状态机？

> ID：12744056
> 
> 赞同：0
> 
> 时间：2012-10-05T10:12:25.310
> 
> 标签：c++, reverse-engineering, state-machine, automata

我正在尝试调试一段代码，它主要是一个简单的 16 状态状态机，尽管在某些情况下转换不是很简单（状态更改操作的数据是几个 C++ 中大约 200 字节的数据类）。

我们发现这台机器比预期的要早得多地进入“最终”状态。由于我对代码还不是很熟悉，我希望我可以尝试找出不同的状态和转换，从而使我更容易快速识别和调试不同的转换路径。

是否有任何有用的工具或技术可以映射出这样的状态机？

值得注意的是，我是从逆向工程的角度来做这件事的，所以我没有可用的系统规划文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:50:41.273

您可以查看正式的模型检查工具，例如[UPPAAL](http://www.uppaal.com)。该工具可用于建模和验证任何可以建模为定时自动机网络的系统 - 这包括状态机。我以前用它来验证例如不变量和可能状态的可达性。

# php - 通过php执行shell命令并在浏览器中显示？

> ID：12744058
> 
> 赞同：0
> 
> 时间：2012-10-05T10:12:47.923
> 
> 标签：php, linux, shell, grep

我想通过php执行一个shell命令并在浏览器中显示。反正有这样做吗？这是我的 php 代码：[test.php]

```
<?php
$number=$_GET["num"];
$date=$_GET["date"];
$output = shell_exec('egrep -w  '2012-09-01|974' /home/myquery_test/log/push.log');
echo "<pre>$output</pre>";
?> 
```

当我从浏览器运行这个（test.php）文件时，什么也没有出现。但是当我改变

```
$output = shell_exec('ls') 
```

它工作正常！为什么 egrep/grep 命令不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:24:20.557

该`egrep`命令不起作用，因为您使用单引号作为字符串常量分隔符：`'egreep -w'`<==> `2012-09-01|974'`<==> `/home/myquery_test/log/push.log'`<==
只需在字符串中使用双引号，或作为字符串分隔符*或*转义引号。

```
shell_exec('egrep -w  \'2012-09-01|974\' /home/myquery_test/log/push.log');
shell_exec('egrep -w  "2012-09-01|974" /home/myquery_test/log/push.log');
shell_exec("egrep -w  '2012-09-01|974' /home/myquery_test/log/push.log"); 
```

并且，为了避免在测试时没有收到可能导致此问题的警告和错误，请将您的 ini 设置为`E_STRICT|E_ALL`，并修复警告，而不是忽略它们。~~[戏弄：在你完成之后，你可能想考虑[接受一些答案](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)]~~*我看到你在我写这篇文章的时候已经接受了很多:)*

在命令中使用变量：

```
$output = shell_exec("tail -f | egrep '$number.*$date' /var/www/myquery_test/log/push.log");
$output = shell_exec('tail -f | egrep "'.$number.'.*'.$date.'" /var/www/myquery_test/log/push.log');
$output = shell_exec("tail -f | egrep \"$number.*$date\" /var/www/myquery_test/log/push.log"); 
```

# mysql - Mysql查询在servlet中调用时返回数据集但为空集

> ID：12744059
> 
> 赞同：0
> 
> 时间：2012-10-05T10:12:51.493
> 
> 标签：mysql, jdbc

我正在使用如下查询：

```
String newq="select *from account"; 
ResultSet rs = s.executeQuery(newq); 
```

该表包含两行，但它只返回空集。我该如何克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:23:53.503

```
package exotiqueDatabaseConnection;

import java.sql.*;
import java.io.PrintWriter;
import java.io.Serializable;

public class ConnectDatabase implements Serializable {

    Statement stmt;
    Connection conn;
    ResultSet rs;
    String username;
    String password;
    String driver;
    String url;

    public ConnectDatabase()
    {
        try{
        username="root";
        password="does001";

        driver="com.mysql.jdbc.Driver";
        Class.forName(driver);

        url="jdbc:mysql://localhost/exotique";
        conn=DriverManager.getConnection(url, username, password);

        stmt=conn.createStatement();

        }
        catch(ClassNotFoundException cnfe)
        {

        }
        catch (SQLException sq)
        {

        }

    }

    public void populateUsers(String usernameIn, String emailIn, String passwordIn)
    {
        try{

    /*  username="root";
        password="does001";

        driver="com.mysql.jdbc.Driver";
        try {
            Class.forName(driver);
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        url="jdbc:mysql://localhost/exotique";
        conn=DriverManager.getConnection(url, username, password);

        stmt=conn.createStatement();*/

        CallableStatement cs=conn.prepareCall("{call populateusers(?,?,?)}");
        cs.setString(1, usernameIn);
        cs.setString(2, emailIn);
        cs.setString(3, passwordIn);
        cs.execute();
        }
        catch(SQLException sq)
        {
            System.out.print(sq.getMessage());
        }
        catch(Exception ex)
        {
            System.out.print(ex.getMessage());
        }
        finally
        {
             close(conn);
             close(rs);
             close(stmt);
        }
    }

    @SuppressWarnings("finally")
    public ResultSet showAllBooks()
    {
        try{

            CallableStatement cs=conn.prepareCall("{call getAllBooks}");

            cs.execute();
            rs=cs.getResultSet();

        }
        catch(SQLException sq)
        {
            System.out.print(sq.getMessage());
        }
        catch(Exception ex)
        {
            System.out.print(ex.getMessage());
        }
        finally
        {
             close(conn);
             close(rs);
             close(stmt);
             return rs;
        }

    }

    public  void close(Statement stmt)
    {
        if(stmt!=null)
        {
            try{
                stmt.close();
            }
            catch(SQLException e)
            {
                e.printStackTrace();
            }
        }
    }

    public  void close(Connection conn)
    {
        if(conn!=null)
        {
            try
            {
                conn.close();
            }
            catch(SQLException e)
            {
                e.printStackTrace();
            }
        }
    }

    public void close(ResultSet rs)
    {
        if(rs!=null)
        {
            try
            {
                rs.close();
            }
            catch(SQLException e)
            {
                e.printStackTrace();
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:04:13.583

您可以尝试这样的查询...有时它会起作用...

```
 select *from dbname.tablename; 
```

# c++ - 如何在 Ubuntu 的后台进程中获取数据

> ID：12744064
> 
> 赞同：0
> 
> 时间：2012-10-05T10:13:00.940
> 
> 标签：c++, c, linux, ubuntu, keylogger

我正在寻找一个 Ubuntu OS 命令，即使程序在后台，它也可以让程序从键盘读取数据。我试图搜索它很多但没有成功。如果任何 Ubuntu/Linux 程序员知道让程序这样做的操作系统命令，请与我分享。

我是 Ubuntu 编程的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:41:16.513

您可以使用 Linux 输入子系统从鼠标和键盘读取事件。只有当您的应用程序具有必要的权限时，它才会起作用。基本上，您必须以 root 身份运行应用程序才能正常工作。

如果您无法以 root 身份运行，则无论如何都不应尝试监视键盘。

您可以创建一个 X11 应用程序来监视*当前会话中的*键盘事件。它仅适用于当前用户和当前图形环境，并且可能无法观察特权对话框，例如密码输入。有关详细信息，请查看适用于您桌面环境的应用程序快捷方式启动器；我听说过的所有 Linux DE 都有一个。

我认为旧的 Linux Journal 文章，[Linux USB 输入子系统](http://www.linuxjournal.com/article/6396)和[使用输入子系统](http://www.linuxjournal.com/article/6429)，仍然是对 Linux 输入子系统最好的介绍之一。现在大多数 Linux 发行版还支持 uinput，这是一种类似的设备，允许将输入事件注入回内核子系统，旨在允许用户空间输入设备驱动程序。它们的接口在`/usr/include/linux/input.h`和中描述`/usr/include/linux/uinput.h`。我建议你从上面的文章开始，然后看一些[input](http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/)和[uinput 的](http://thiemonge.org/getting-started-with-uinput)例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T08:56:54.107

如果您习惯使用某个程序，请查看[Logkeys 项目](https://github.com/kernc/logkeys) 。它直接从 /dev/input/event* 获取输入。

# java - springframework 3.1.2 ResponseEntity

> ID：12744065
> 
> 赞同：0
> 
> 时间：2012-10-05T10:13:02.623
> 
> 标签：java, spring-mvc

自 3.1.0 版以来，具有返回类型的控制器方法`ResponseEntity<String>`解析为`servlet-context.xml`（在我的情况下为 .jsp）中定义的默认视图。所以`Ajax`调用失败了`404 error`. 3.0.6 版没有问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:25:08.933

我终于找到了原因。似乎从 spring 3.1 控制器的返回类型的方法`ResponseEntity<String>` **必须**用`@ResponseBody`.

# windows-phone-7 - 关于Wp7电话应用程序后键按下的问题

> ID：12744066
> 
> 赞同：0
> 
> 时间：2012-10-05T10:13:09.887
> 
> 标签：windows-phone-7

关于停用和激活页面时页面状态的问题，我单独保存该特定页面的数据。当我返回上一页时，按后退按钮，我得到上一个页面，其中没有数据。加载上一页中的数据我需要获取上一页的实例，无论如何要在电话应用程序堆栈中获取上一页的实例。，其他事情，是在后退键按下时，处理后退键按下，通过导航到新以前的手机应用程序页面的实例（以前的页面的旧实例会发生什么）。如何处理这些情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:33:51.593

您最近就页面状态提出了一些问题。当应用程序被停用并再次激活时，Windows phone 7.5 会保存页面状态。您需要做的就是在激活时小心处理 Page_Loaded 和 OnNavigatedTo 事件。

如果您想覆盖返回堆栈 OnBackKeyPress，您可以这样做并导航到任何其他页面实例。但是您应该确保删除了返回堆栈条目。否则会导致很多问题。（但不建议这样做）

```
NavigationService.RemoveBackEntry(); 
```

# java - @Configurable servlet 的 @Autowired 问题

> ID：12744070
> 
> 赞同：0
> 
> 时间：2012-10-05T10:13:27.373
> 
> 标签：java, spring, autowired, configurable, eclipse-virgo

我正在尝试通过以下方式将类自动装配到 WebSocketServlet 中：

```
@Configurable(autowire=Autowire.BY_TYPE)
public class MyServlet extends WebSocketServlet {
    @Autowired
    public MyClass field;

    // etc...
} 
```

这是我的配置：

```
<context:annotation-config />
<context:component-scan base-package="org.*" />

<bean id="config" class="org.*.MyClass">
   <!-- a bunch of properties -->
</bean> 
```

**请注意，只要我在 Spring 中， autowire 就可以正常工作`@Controller`**。我不得不走出那一步，因为我不知道如何将 WebSocketsServlet 映射到`@Controller`您使用常规 servlet 的方法。

知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:08:34.210

为了使用@Configurable，您需要在游览上下文中有这些行：

```
<context:load-time-weaver aspectj-weaving="true"/>
<context:spring-configured/>    
<context:annotation-config />
<context:component-scan base-package="org.*" /> 
```

此外，我认为您必须在清单的 Import-Library 部分中引用 spring-aspect。

我没有成功使它工作，在 Eclipse 的 Virgo 论坛上有一个帖子。如果你成功了，请告诉我如何;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:15:58.090

摆脱 @Configurable 并在 servlet init 方法中执行以下操作可以解决问题：

```
@Override
public void init() throws ServletException {
   super.init();
   SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-05T10:17:25.393

根据[弹簧文档](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Configuration.html)

可以通过使用或注释将 Spring Environment 注入到`@Configuration`类中来查找外部化值：`@Autowired``@Inject`

```
 @Configuration
 public class AppConfig {
     @Inject Environment env;

     @Bean
     public MyBean myBean() {
         MyBean myBean = new MyBean();
         myBean.setName(env.getProperty("bean.name"));
         return myBean;
     }
 } 
```

# windows - 如何在 Windows 中从命令行为 *.accdb 创建用户 DSN？

> ID：12744071
> 
> 赞同：2
> 
> 时间：2012-10-05T10:13:26.267
> 
> 标签：windows, ms-access, command-line, odbc, dsn

我在由于某些限制而无法进行 DSN-Less 连接的环境中工作。我需要为`"Microsoft Access Driver (*.mdb,*.accdb)"`. .accdb 文件位于本地磁盘中。

我试过了`C:\>odbcconf configdsn "Microsoft Access Driver (*. mdb,*.accdb)" "DSN=crt1|SERVER=c:\a.accdb"`。但这似乎不起作用。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:30:45.940

```
odbcconf configdsn "SQL Server" "DSN=fred|Database=dave" 
```

为我工作。我在这台 64 位机器上没有 64 位 MS Access 驱动程序可供尝试。你没有显示错误。为什么不添加 /Lv x.log 并查看日志文件中的内容。

但是，这是 64 位机器吗？如果我怀疑您是否安装了 64 位 MS Access 驱动程序，并且 odbcconf 将尝试添加 64 位 DSN。如果它适用于 c:\windows\syswow64\odbcconf 那么这很可能是你的答案。

```
c\windows\syswow64\odbcconf configdsn "Microsoft Access Driver (*.mdb)" "DSN=fred;Database=dave" 
```

适合我创建 32 位 DSN。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T00:48:15.463

您输入错误： `Microsoft Access Driver (*.mdb, *.accdb)` 是正确的并且对我有用（*.mdb 和 *.accdb 之间有一个空格）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T19:39:59.077

对我来说，我不得不使用以下命令。请注意此线程中提到的 DBQ 而不是 Database 或 Server

```
"c:\WINDOWS\SysWOW64\odbcconf.exe" CONFIGSYSDSN "Microsoft Access Driver (*.mdb, *.accdb)" "DSN=tp_test5;DBQ=c:\trackerpro\database\companydata.mdb" 
```

# perl - 变量的前 1000 个字节

> ID：12744072
> 
> 赞同：1
> 
> 时间：2012-10-05T10:13:34.067
> 
> 标签：perl, text, binary-data, unpack

`unpack`如果我想用变量前 1000 个字节尝试这个猜测子程序，这种用法是否正确？

```
#!/usr/bin/env perl
use warnings;
use 5.10.1;

my $var = ...;
my $part = unpack( 'b1000', $var ) ;

sub is_binary_data {
    local $_ = shift;
    (   tr/ -~//c / length  ) >= .3;
}

if ( is_binary_data( $part ) ) {
    say "Binary";
}
else {
    say "Text";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:27:25.423

不，不是因为 unpack 会创建一个由 0 和 1 组成的字符串（最多 1000 个），这肯定会通过 ascii 测试（我相信`tr, -~,,c / length`是）

我建议只使用`substr ($var, 0, 1000)`。

此外，也许`\r`并且`\n`应该出现在`tr//`.

# json - 如何解析来自 Twitter Streaming API 的响应？

> ID：12744076
> 
> 赞同：1
> 
> 时间：2012-10-05T10:13:44.987
> 
> 标签：json, twitter

我正在尝试创建一个像这样的数据可视化网站 => [http://www.nohomophobes.com/#!/today/](http://www.nohomophobes.com/#!/today/)

为此，我正在使用 Twitter 流 Api，但我在解析响应时遇到了问题，而且 Twitter 文档并不清楚如何做到这一点。响应格式如下： http: [//pastebin.com/ADUCWta7](http://pastebin.com/ADUCWta7)

我尝试使用 jQuery 函数 JSON.parse 解析该响应，但它不起作用......

希望有人可以帮助我...在此先感谢！

巴斯蒂安

# ruby-on-rails - 当包含 jquery.js 时，rails 中的 Ajax 调用不起作用

> ID：12744078
> 
> 赞同：0
> 
> 时间：2012-10-05T10:13:49.293
> 
> 标签：ruby-on-rails, ruby

我正在使用 Rails 2.3.8。

在我的 application.rhtml 我有：

```
<%= javascript_include_tag "jquery.js"%> 
```

在我的 index.rhtml 中，它使用 application.rhtml 进行布局，我有：

```
<div id="search_residential"> <%= link_to "Residential", 
"javascript:residentialSearchForm()", :onclick=> remote_function(:url => {:propertyType => 'residential', :controller => 'site', :action => 'searchform'}, :update => 'search_form', :method => :get)%></div>` 
```

在我应该呈现的部分中，我有：

```
<%logger.debug "Residential Form Partial Rendered"%> 
```

当我单击链接时，我的日志输出：

```
Processing SiteController#searchform (for 127.0.0.1 at 2012-10-05 11:11:02) [GET]
  Parameters: {"controller"=>"site", "propertyType"=>"residential", "action"=>"searchform", "authenticity_token"=>"Iw3ID/4Lh5IReUwOnhhSUXfn2IIVUnYpqG1N7DE4BHg="}
Rendering site/searchform
Residential Form Partial Rendered
Rendered site/searchbar/_search_residential (5.2ms)
Rendered site/searchbar/_search_form (5.9ms)
Completed in 9ms (View: 7, DB: 0) | 200 OK [http://localhost/site/searchform?propertyType=residential&authenticity_token=Iw3ID%2F4Lh5IReUwOnhhSUXfn2IIVUnYpqG1N7DE4BHg%3D] 
```

但网站上没有显示任何内容。如果我删除 jQuery 的包含，则呈现部分内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:25:57.637

remote_function 是一个原型助手并且依赖于prototype.js Jquery 会在$ 命名空间发生冲突。建议不要使用原型助手。或者您应该在 noConflict 模式下初始化 jquery。

# php - 从前 10^5 个整数创建的 CRC32 哈希冲突？

> ID：12744081
> 
> 赞同：1
> 
> 时间：2012-10-05T10:13:50.480
> 
> 标签：php, hash, unique

我正在尝试创建 100.000 个唯一的 8 个字符串的数组。对于输入，我有从 1 到 100.000 的整数数组。我打算使用crc32。我可以假设不会有任何碰撞吗？PS我只担心碰撞..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:08:48.443

[**这是你的答案。**](http://codepad.org/9YbLe3Nn)

```
$result = array();

for ($i = 1; $i <= 100000; ++$i) $result[sprintf('_%u', crc32($i))] = true;

if (count($result) == 100000)
{
    echo 'Yes, you can use CRC32.';
}

else
{
    echo 'Ooops, you better use another algorithm.';
} 
```

# html - ipad safari 上的 webApp 突然关闭

> ID：12744082
> 
> 赞同：0
> 
> 时间：2012-10-05T10:14:01.297
> 
> 标签：html, ipad, web, safari

我正在为 iPad 开发一个 html5 webApp，当我用 Safari 打开它时，它突然退出了。我正在使用 RoyalSlider 插件，我认为问题可能存在，因为我正在使用多个实例，但我不知道哪个是具体问题并且无法解决！

当我只使用一个实例时没有问题，但我确实需要使用滑块的多个实例。

有没有人有类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:21:12.570

当浏览器由于呈现网页内容而崩溃时，它是浏览器错误。即使内容无效，浏览器也必须处理。

我不知道 iPod 和 iPad 以及 iGod 的东西，但也许在这些系统上也有可能从命令行启动浏览器而不是单击按钮？当试图找出某些应用程序崩溃的原因时，这通常是第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:57:54.727

我在使用 iPad Safari 和许多大型硬件加速图像时遇到过崩溃问题，尤其是在第一代 iPad 上。快速浏览一下 Royal Slider 主页，看起来他们在 iOS 上使用了硬件加速，但我不知道他们是如何实现的。

当我遇到这个问题时，是因为我正在使用一种`-webkit-transform: translate3d(0,0,0)`效果来欺骗 iPad 以硬件加速一个充满大图像的 div。该页面在加载时会崩溃，但我能够通过更有选择性地选择哪些图像来让 iPad 在任何给定时间进行硬件加速，从而使其工作。您可以从查看 Royal Slider CSS 开始，了解它是如何处理图像的。希望这可以帮助！

# javascript - JavaScript 方法，调用不带括号的方法

> ID：12744087
> 
> 赞同：4
> 
> 时间：2012-10-05T10:14:06.810
> 
> 标签：javascript, jquery

您好，我有一个问题，我需要一些帮助来增加我对 JavaScript 的知识和理解。

在我的 init 方法中，请使用 .on 方法查看这一特定行.

```
.on( 'click', this.show ); 
```

现在的问题是——如果 show 是一个方法，那么我们为什么不这样做，为什么不这样调用方法呢？

```
 .on( 'click', this.show() ); 
```

我说的对吗，因为我们不想立即调用 show 方法，如果 JavaScript 遇到 init 方法会解析所有这些代码，然后它会在这里来到本节`this.show()` ——它会立即执行这个功能。但我不希望它这样做，我只希望在单击相应按钮的条件下调用该函数。

当 show 方法写成`this.show`没有括号时，是否会阻止 show 方法自动执行？

```
var contactForm = {
        init: function() {
            $('<button></button>', {    
                text: 'Contact Me!'  
            }) 
                .insertAfter('article:first')
                .on( 'click', this.show() );
        },

        show: function() {
            console.log('showing');
        } 
```

抱歉，如果我的术语描述不够准确或不够准确。任何简洁明了的答案将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T10:49:28.920

是的，您所描述的内容是正确的，但是，您以错误的方式看待它。

似乎您将不带括号的函数名称视为某种特殊情况，但实际上，情况恰恰相反。

了解表达式和运算符的概念很重要。

## 运营商

`()`是一个常规运算符，`-`例如，它否定一个值。运算符总是应用于值：`-5`否定 value `5`，`-(-5)`否定表达式`(-5)`which is `5`again。

`()`另一方面，尝试将其左侧的表达式作为函数调用：`expr()`.

## 函数就是值

JavaScript 中的函数是可以传递的值，就像你可以知道值一样`5`：

```
var five = 5;
var returnFive = function() { return 5; };
var five2 = five;
var returnFive2 = returnFive;
alert(five2);
alert(returnFive2()); 
```

它实际上没有更多内容：函数只是值，恰好支持一些`()`“调用”它们的特殊魔法运算符。

因此，执行以下任何操作都是完全有效的

*   `show()`
*   `(show)()`
*   `((show))()`

等等，因为`(expr)`简单地评估为`expr`.

## 评估表达式

运算符采用一个或多个值，对其进行操作，并产生一些其他值：

```
4            // No operator, expression evaluates to 4
4 + 4        // This expression evaluates to 8
returnFive   // No operator, expression evalutes to the function value
-5           // Unary operator, takes one value, negates it
returnFive() // call operator, executes the function, evaluates to its return value 
```

我希望你从中得到的是，函数并没有那么特别，`show`和那对括号之间没有内在联系。

> 当 show 方法写成`this.show`没有括号时，是否会阻止 show 方法自动执行？

是和否——这表明`show`没有`()`是需要单独处理的特殊情况，但事实并非如此。这就像说“-5 比 5 更正常”，并且没有`-`使某些东西成为正数。然而，它是相反的：`5`是“默认”，如果你愿意`-5`的话，以及特殊情况。这与`show`.

## 将此应用于您的示例

该`on()`函数期望得到某种回调，即一个函数。如果你通过`show()`了，你在通过什么？评估的表达式`show()`。这是什么？当然，无论`show()`返回什么。因此，`on()`“不知道”您已经`show()`对`show()`.

当然，函数本身可能会返回一个函数，因为正如我们所了解的，`show()`函数只是可以传递的值。`5``"foo"`

在这种情况下，该`on()`函数仍被传递一个函数，该函数将在相应的事件上调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:26:07.370

你是对的。当您在不添加括号的情况下引用方法（或任何函数）时，运行时会将其解释为函数引用。

因此，在您的示例中，您有效地将函数传递`show`给`on`函数，以便稍后执行。接收其他函数作为参数或返回其他函数作为结果的函数称为“高阶函数”

# java - java,正确使用静态变量防止死锁 - 同步

> ID：12744094
> 
> 赞同：1
> 
> 时间：2012-10-05T10:14:40.627
> 
> 标签：java, android, concurrency, synchronized, android-sqlite

我是 android 编程新手，之前没有彻底研究过 java。我真的很困惑如何使用`synchronized`来确保线程安全`static variables`：

我通常创建一个名为的类`Utils`，其中有一些`static functions`是我所有其他类大部分时间需要的。这是将重复代码排除在我的课程之外的正确方法吗？

我总是遇到使用数据库的问题。当我为某个数据库创建 sqliteHelper 类并尝试从 Activity 和 Background service 管理该数据库时，我通常会遇到麻烦。如果我使用助手类的本地对象，当两个助手对象尝试一起获取写锁时，我最容易陷入数据库死锁。

为了摆脱这个麻烦，我`static`在我的班级中创建了一个帮助类的实例`utils`。现在为了对数据库执行任何操作，我的活动和我的服务执行以下操作：

```
 public class Utils{
          public static MDatabaseHelper mHelper;
          public static void instantiateHelper(Context context){
          if(mHelper==null)
                mHelper=new MDatabaseHelper(context);

           }
    } 

    public class mActivity extends Activity{
     public void insert some item in database(final Item item)   // this method is called in the Activity at some time
     (new Thread(){
         @Override public void run(){
         Utils.instantiateHelper(getBaseContext());
         mHelper.insertItem(item); }
        }).start();
     }

 public class mService extends Service{
         public void insert some item in database(final Item item)    // this method is called in the service at some time
          (new Thread(){
           @Override public void run{
             Utils.instantiateHelper(getBaseContext());
             mHelper.insertItem(item); }
        }).start();
     } 
```

现在，如果服务和活动都尝试将项目插入在一起怎么办。我经常遇到这种情况并发生错误。为避免这种情况，我使用此解决方法：

我将插入操作放在 try 块中，失败时我等待随机时间并重试

```
 public void insertSomeItemInDatabase(final Item item)
     (new Thread(){
          @Override public void run(){
              int i=0;
              Random rand=new Random();
                 while(true){
                  if(i>10)
                    return;
                  try{ 
                     Utils.instantiateHelper(getBaseContext());
                     mHelper.insertItem(item);
                     break;
                     }catch(Exception e){
                      i++;
                           try{
                              Thread.sleep(rand.nextInt(1000));
                               }catch(Exception e){}
                      }

                      }
          } 
          }
        }).start();
     } 
```

我知道这是**最糟糕**的同步方法，但由于我对`java`任何人都陌生，请解释如何`synchronized`在这个场景中使用。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:22:39.790

我认为您只需要创建**应用程序类**

**[1]**你在 Util 中使用的所有变量，几乎在所有其他类中使用，都可以在这个 Application 类中使用。所以这些变量将可用于所有其他类。

**[2]**创建 Appliction**类**的 Singelton 实例。只是谷歌一下。

**[3]**同时创建 DataBaseHelper 的 Singleton（如果可能并且可以应用），因此，单实例可以帮助您无处不在。

* * *

Application Class 是 android 中的 Global 类，因此您可以使用它来存储和访问所有 Global-Data。例如：

```
public class AppData extends Application {

    public static AppData appData;

    public int currentUserId; // etc.

    //Const.
    public AppData() {
        appData = this;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        loginPreferences = getSharedPreferences(
            SPF_NAME, 0);

        pathToSDCard = Environment.getExternalStorageDirectory().getAbsolutePath();
        System.out.println("Path : " + pathToSDCard);
       //etc.
    }

 //    MOST IMP  FOR GETTIN SINGELTON INSTANCE     <<<---<<<---<<<---
    public static AppData getAppData() {
        return appData;
    }
} 
```

**如何使用它，看这个**

```
class ABC extends Activity {
    AppData appData;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.xyz);

        appData = AppData.getAppData();
        ...........
        ...........

        appData.VARIABLE_NAME...
    }
} 
```

**还有一件事。在 AndroidMenifest.xml 中**

```
 ...
    ...
<application             //   In Application Tag
        android:name="PACKAGE_NAME.AppData"  //  <<  Add here class name in which you have extended Application
        android:icon="@drawable/ic_launcher"
    ...
    ... 
```

# actionscript-3 - 如何从 AS3 中的 SharedObject 中删除/移除属性

> ID：12744101
> 
> 赞同：0
> 
> 时间：2012-10-05T10:15:09.357
> 
> 标签：actionscript-3, flash, actionscript

我有一个 SharedObject，我在其中将一些数据保存在 flash 应用程序中。我正在尝试删除一些已保存的数据，但它不起作用。

```
trace(delete(localData.data[key])); 
```

删除命令返回 true，但是当我重新加载数据时，它看起来并没有被删除。

截至目前，最好的解决方案是“localData.clear();” 所有数据，然后在没有我要删除的字段的情况下保存它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:21:28.947

您需要调用 flush() 方法来“提交”您的更改：

> 立即将本地持久共享对象写入本地文件。如果您不使用此方法，Flash Player 将在共享对象会话结束时将共享对象写入文件，即关闭 SWF 文件时，当共享对象因不再有任何引用而被垃圾回收时到它，或者当您调用 SharedObject.clear() 或 SharedObject.close() 时。

更多信息：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html#flush](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html#flush) ()

# matlab - matlab如何将两个单元格相加

> ID：12744103
> 
> 赞同：2
> 
> 时间：2012-10-05T10:15:16.430
> 
> 标签：matlab, matrix, dimensions, cell-array

我有 B <1x3 cell> 像这样：

```
B{1} = [2 1 19 22 29 13 14]
B{2} = [11 12 6 3 4 2 5]
B{3} = [3 2 23 13 4 7 8] 
```

我想像这样添加一个 <4x2 cell> ：

```
A = {'a' '-1'; 'b' '1'; 'c' '2'; 'd' ''} 
```

我试过这样：

```
for j=1:length(A)
  for i=1:1:length(B)
    C = B{i} + A{j,2};
  end
end 
```

我得到的是“矩阵尺寸必须一致”。我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:32:05.760

`A`持有字符。您需要将字符串转换为数字才能将它们添加到`B`. 使用例如`str2double`：

```
for j=1:length(A)
  for i=1:1:length(B)
    C = B{i} + str2double(A{j,2});
  end
end 
```

请注意， A 中的最后一个值是`''`，它被转换为 a `NaN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:29:49.197

您的代码包含几个问题：

首先显示在@angainor 答案中。您需要将字符串转换为数字。

第二个紧随其后。B{i} 是大小为 7x1 的矩阵，A{j,2} 是单个数字。您想将此数字添加到矩阵 B{i} 的所有元素中吗？在这种情况下，您应该编写如下内容：

```
B{i} + str2double(A{j,2}) * ones(size(B{i})) 
```

第三个问题是length(A) 命令将返回A 中元素的总数，例如4*2=8。因此，您将遇到错误：无法访问元素 A{5,2}。您需要将此行替换为

```
for j = 1:size(A,1) 
```

# javascript - 这是对 Closure 的正确陈述吗？

> ID：12744105
> 
> 赞同：5
> 
> 时间：2012-10-05T10:15:19.760
> 
> 标签：javascript, closures

引用 Stoyan Stefanov 的面向对象的 JavaScript（第 84 页）：

![在此处输入图像描述](../Images/5b393687e1e6baf60ab8177d346ffcb3.png)

> 如果你在 a 点，你就在全局空间内。如果您在函数 F 的空间内的点 b，那么您可以访问全局空间和 F 空间。**如果你在函数 N 内部的点 c，那么你可以访问全局空间、F 空间和 N 空间**你无法从 a 到达 b，因为 b 在 F 之外是不可见的。但是你可以如果需要，从 c 到 b，或者从 N 到 b。有趣的事情——闭包——发生在 N 以某种方式突破 F 并最终进入全局空间时。”

我认为上面的粗体句应该改成“如果你在函数N内部的c点，那么你可以访问全局空间和N空间”（不应该包含F空间，因为点 c 只能访问 N 空间和全局范围 G。）。

我对吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:17:48.253

不，我认为这`N`是一个从 function 返回的函数`F`，因此可以（通过闭包）访问`b`在内部声明的变量`F`。例如（[现场示例](http://jsfiddle.net/LMAya/1/)）：

```
function F() {
    var b = 10;
    return function () {
        console.log(b);
    };      
}

var N = F(); //N is a reference to the anonymous function returned from F

N(); //logs '10' because we still have access to b (because of the closure) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:17:58.323

不，你不对。

虚线圆圈应该代表 的真实范围`N`，如在里面`F`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:19:37.340

不，在 c 点你实际上可以访问他的 F 空间。

一个例子：

```
function F() {

  var b = 42;

  function N() {
    alert(b);
  }

  return N;

}

// get a reference to the function N in the global scope:
var n = F();
n(); // shows 42 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T01:27:36.653

正如其他人所说，没有。

关于闭包的全部要点是，对内部函数的外部引用不仅使该内部函数保持活动状态，而且还允许它访问创建它的外部环境，即使该外部环境来自执行的函数已完成并返回。

我认为如果蓝色`N`显示在里面`F`，而虚线版本（对 的引用`N`）显示在外面，该图将更好地说明关闭`F`。

引用语句的最后一句也可以改进：

> 有趣的事情——闭包——发生在 F 之外存在对 N 的外部引用时。

请注意，此版本避免提及全局空间。任何外部范围都足以形成闭包。

该声明可以进一步说，允许形成闭包的机制是抑制垃圾收集。

警告：在网络和书籍中，有很多关于“关闭”的错误定义和描述。Stack Overflows 当前的“闭包”标签 wiki 条目就是一个很好的例子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T10:20:18.013

不，你错了，看下面的代码。

```
// the global space
var g = 'g';

function F() {
  // the F space
  var a = 'a';
  function N () {
    // the N space
    // here you could access g in the global space and a in the F space.
    var c = 'c';
    console.log(g, a);
  }
} 
```

# debugging - 如何使用 netBeans 调试器运行一段时间

> ID：12744107
> 
> 赞同：0
> 
> 时间：2012-10-05T10:15:26.507
> 
> 标签：debugging, netbeans

我很少使用 netbeans 调试器，但我的程序中有这个错误，我正试图深入了解它。基本上，我的程序在二进制文件（4.5gb）中搜索字节序列并将其写入文件。但是，当读取文件接近一半时（~2gb），程序总是停在文件中的这个特定点。如果放置一个断点并继续“继续”调试器直到它到达文件中的那个点，我会使用调试器，但要达到 2gb 标记将永远需要。我猜有更好的方法来使用我不知道的调试器。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:56:48.090

Netbeans 支持条件断点。如果您通过菜单“调试/新断点”添加断点（或只需按 Ctrl+Shift+F8），您可以指定一个条件（在此断点处停止执行之前必须多久触发一次断点或[表达式](http://wiki.netbeans.org/FaqDebuggingConditionalBreakpoints)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:33:54.637

您可以计算已处理的数据量，并添加一个 if() 块来检查您是否达到 2GB 标记。在 if() 块中放置一个虚拟命令，并在虚拟命令上添加一个断点；只有在您处理了足够的数据后才能达到此目的。

# jmeter - JMeter BeanShell 监听器所有结果

> ID：12744109
> 
> 赞同：2
> 
> 时间：2012-10-05T10:15:42.077
> 
> 标签：jmeter, beanshell

我正在 JMeter 中编写一个 BeanShell 脚本来处理 HTTP 请求的结果。我可以使用后处理器来捕获这些结果并单独处理，但这意味着为每个请求添加一个后处理器。

在 BeanShell 侦听器中是否可以访问所有结果，而不仅仅是通过 sampleResult、prev 变量访问的最后一个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:51:01.747

BeanShell 侦听器根据请求响应触发，因此通过为其编写脚本，我能够为每个 http 请求运行它。之前尝试过使用监听器但它不起作用，所以我尝试了后处理器。但是，这似乎是我的脚本中的一个问题导致了问题。

# c# - 从数据网格视图中选择数据

> ID：12744111
> 
> 赞同：2
> 
> 时间：2012-10-05T10:15:56.360
> 
> 标签：c#, .net

我对此进行了调查，但无法找到明确的答案

1.  允许用户从表单上的数据网格视图中选择数据。
2.  在他们选择了他们需要的信息后，如何通过单击用户表单的按钮以编程方式完成此操作

使用 c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:26:42.083

要在 Windows 窗体中启用全行选择，您可以执行

```
this.dataGridView1.SelectionMode =
    DataGridViewSelectionMode.FullRowSelect;
this.dataGridView1.MultiSelect = false; 
```

如果要获取选定的行，可以执行以下操作：

```
private void dataGridView1_CellClick(object sender, System.Windows.Forms.DataGridViewCellEventArgs e)
{
    var rowIndex = e.RowIndex;
    var currentRow = dataGridView1.Rows[rowIndex];
    var currentCellValue = dataGridView1.Rows[rowIndex].Cells[e.ColumnIndex].Value.ToString();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:22:52.380

从 DataGridView 获取数据的一种可能方法：

```
var i = DataGridView1.CurrentRow.Index;
var value1 = DataGridView1.Item(0, i).Value
var value2 = DataGridView1.Item(1, i).Value
var value3 = DataGridView1.Item(2, i).Value 
```

您还可以参考以下参考资料：

[http://www.dotnetperls.com/datagridview](http://www.dotnetperls.com/datagridview)

[http://www.dotnetperls.com/datagridview-tutorial](http://www.dotnetperls.com/datagridview-tutorial)

# java - 运行 GWT 应用程序时出现异常

> ID：12744112
> 
> 赞同：0
> 
> 时间：2012-10-05T10:16:01.000
> 
> 标签：java, gwt, exception, rpc

我已经构建了我的第一个 GWT 应用程序。不给出编译错误也不给出运行时错误。但是，当应用程序加载到浏览器中（使用内部资源管理器）并且我输入**用户名**和**密码**字段以验证用户时，它会引发异常。使用 GWT-RPC 方法，提供了完整的代码和接口。我正在使用**HSQL**进行数据库连接（后端）。

------------------代码（客户）

```
package com.vin.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.PasswordTextBox;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.TextBox;

public class HelloWorld implements EntryPoint{
    private UserServiceAsync UserService = (UserServiceAsync) GWT.create(UserService.class);
    public void onModuleLoad() {
        Button click=new Button("Click Here");
        Label name=new Label("Enter Name");
        Label passwrd=new Label("Enter Password");
        final TextBox t_name=new TextBox();
        final PasswordTextBox t_passwrd=new PasswordTextBox();
        click.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent ev) {
            String temp_user=t_name.getText();
            String temp_pass=t_passwrd.getText();
                 UserService.loginuser(temp_user, temp_pass, new AsyncCallback<String>() {
                     public void onFailure(Throwable caught) {
                             Window.alert("Please enter valid details");
                      }
                     public void onSuccess(String result) {
                         Window.alert("Welcome");
//                         Window.open("http://127.0.0.1:8888/ExWid.html?gwt.codesvr=127.0.0.1:9997", "Dem", null);
                     }
                 });
            }
        });
        RootPanel.get().add(name);
        RootPanel.get().add(t_name);
        RootPanel.get().add(passwrd);
        RootPanel.get().add(t_passwrd);
        RootPanel.get().add(click);
}
} 
```

-----------------------------------------客户端界面（一）

```
package com.vin.client;

import com.google.gwt.user.client.rpc.RemoteService;

public interface UserService extends RemoteService {
    public String loginuser(String username, String password);
} 
```

----------------------------客户端异步接口

```
package com.vin.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

public interface UserServiceAsync {
    public void loginuser(String username, String password, AsyncCallback<String> callback);
} 
```

--------------------------客户端用户服务（服务器）的实现...数据库连接

```
package com.vin.server;

import java.sql.DriverManager;
import java.sql.ResultSet;
import com.google.gwt.dev.generator.ast.Statement;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;
import com.vin.client.UserService;

public class UserServiceImpl extends RemoteServiceServlet implements UserService{
    private static final long serialVersionUID = 1L;

    public String loginuser(String username,String password) {
        try {
            java.sql.Connection con = null;
            Class.forName("org.hsqldb.jdbcDriver");
            con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/", "SA", "");
            Statement st=(Statement) con.createStatement();
            ResultSet rs=((java.sql.Statement) st).executeQuery("select username,password from lgfrm");
            String user=rs.getString(1);
            String pass=rs.getString(2);
            if(username.equals(user) && password.equals(pass)) {
                Window.alert("success");
            }
        }
    catch (Exception ae) {}
        return "success";
    }
} 
```

------------------我尝试验证用户时的异常列表

> 15:22:54.583 [错误] [helloworld] 未捕获的异常逃脱了 com.google.gwt.event.shared.UmbrellaException：捕获了一个或多个异常，请参阅 com.google.gwt.event.shared 的 UmbrellaException#getCauses 中的完整集。 HandlerManager.fireEvent(HandlerManager.java:129) 在 com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129) 在 com.google.gwt.event.dom.client.DomEvent.fireNativeEvent( DomEvent.java:116) 在 com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177) 在 com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)

还有更多这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:35:03.037

[com.google.gwt.user.client.Window](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/Window.html#alert%28java.lang.String%29)类提供对浏览器窗口的方法、属性和事件的访问。所以你不能在服务器端使用它。`"success"`最好在满足要求时返回 String ，否则返回`Exception`，以便`onFailure`在客户端捕获它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:23:46.540

我认为您不能在服务器端（在 UserServiceImpl 类中）使用 Window.alert 。可能有很多客户端，服务器不知道它指向哪个客户端。

但我不确定它是否会导致此错误。

# inputstream - 将文件读取为 InputStream 的最佳实践

> ID：12744113
> 
> 赞同：1
> 
> 时间：2012-10-05T10:16:01.320
> 
> 标签：inputstream, dart

在 Dart 中，我想阅读 BMP，所以可能是 BIG 文件。我这样做：

```
var inputStream = imageFile.openInputStream();
inputStream.onData = () {
  print(inputStream.available());
  inputStream.read(18); // Some headers
  int width = _readInt(inputStream.read(4));
  int height = _readInt(inputStream.read(4));
  // Another stuff ...
} 
```

它适用于小图像，但是当我读取 3Mo 文件时，onData 会执行多次。实际上，onData 是由 65536 字节的数据包触发的。最好的做法是什么？我是否应该编写一个状态为 HEADER_STATE、COLORS_STATES、... 的自动装置来设置我的阅读状态并通过 inputStream.read 考虑是一个缓冲区？还是我错过了阅读课？我害怕错过 2 个数据包之间的一些字节。我对此有点失望，当我在 java 中这样做时，我只写：

```
inputStream.read(numberOfBytes); 
```

更易于使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:18:54.463

打开 RandomAccessFile 后，您可以执行以下操作：

```
RandomAccessFile raf; // Initialized elsewhere

int bufferSize = 1024*1024; // 1 MB
int offsetIntoFile = 0;
Uint8List byteBuffer = new Uint8List(bufferSize); // 1 MB
Future<int> bytesReadFuture = raf.readList(byteBuffer, offsetIntoFile, bufferSize);

bytesReadFuture.then((bytesRead) {
    Do something with byteBuffer here.
}); 
```

还有一个同步调用readListSync。

约翰

# xcode - IOS 6 Xcode 4.5 MFMailComposer 崩溃

> ID：12744116
> 
> 赞同：1
> 
> 时间：2012-10-05T10:16:10.157
> 
> 标签：xcode, crash, ios6, mfmailcomposer

我已将 XCode 更新到 4.5，如果我按下按钮发送电子邮件，现在电子邮件功能会崩溃。

我做错了什么？

我已经在我的头文件中实现了 MessageUI.framework

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>

@interface ImpressumViewController : UIViewController <MFMailComposeViewControllerDelegate> 
```

这是我的按钮代码：

```
- (IBAction)kontakt:(id)sender {

    MFMailComposeViewController *mailcontroller = [[MFMailComposeViewController alloc] init];
    [mailcontroller setMailComposeDelegate:self];
    NSString *email =@"Youtube@gmail.com";
    NSArray *emailArray = [[NSArray alloc] initWithObjects:email, nil];
    [mailcontroller setToRecipients:emailArray];
    [mailcontroller setSubject:@"Youtube Tutorials"];
    [self presentViewController:mailcontroller animated:YES completion:nil]; }

- (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
    [self dismissViewControllerAnimated:YES completion:nil];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T09:23:33.977

您需要在此委托方法中编写以下代码

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the Drafts folder");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send the next time the user connects to email");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was nog saved or queued, possibly due to an error");
            break;
        default:
            NSLog(@"Mail not sent");
            break;
    }

    //[self dismissModalViewControllerAnimated:YES];
} 
```

# c# - 获取窗口的阴影尺寸

> ID：12744117
> 
> 赞同：4
> 
> 时间：2012-10-05T10:16:11.023
> 
> 标签：c#, c++, windows, winapi, getsystemmetrics

我需要知道窗口的投影尺寸。我尝试通过 GetSystemMetrics WinAPI 函数接收值，但找不到要传递的参数。关于如何全局获取此值（或单个窗口句柄）的任何想法？我知道阴影的宽度取决于窗口类型（对话框/正常/等等）。Ib 将使用 C# 实现此功能，但 C++ 也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-11T05:21:20.347

有一种方法可以使用 DWM API 来计算投影的大小，但是在窗口可见之前它不起作用。

在以前的 Windows 版本中，有 Client Rect 和 Window Rect。但是自从 Vista 出现以来，已经有第三个 Rect 用于称为扩展帧边界的窗口。第三个矩形比客户端矩形大，比窗口矩形小，不包括投影所占据的区域。

调用`DwmGetWindowAttribute(hwnd, DWMWA_EXTENDED_FRAME_BOUNDS, &rect, sizeof(RECT))`以阅读扩展帧边界矩形。此功能来自`<dwmapi.h>`，在 Windows XP 或更早版本中不可用。

请注意，如果您在窗口显示之前调用它，您将得到不正确的结果。

编辑：

请注意，扩展帧边界位于物理像素坐标中，不受 Windows 缩放功能的影响。您可能需要转换回虚拟坐标，或将虚拟坐标转换为物理坐标以使它们匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:38:33.230

据我所知，没有办法获得这些信息。WindowClippings 等程序通过截取屏幕截图并随后裁剪到阴影尺寸来解决它。

# android - 使用 Eclipse 4.2 和 SDK 20 创建新项目

> ID：12744118
> 
> 赞同：2
> 
> 时间：2012-10-05T10:16:25.733
> 
> 标签：android, eclipse, sdk, adt

好的，我正在尝试学习如何开发 Android 应用程序并安装所有相关工具。我还可以访问几本 Android 应用程序开发书籍，遗憾的是这些书籍都是用旧版本的 Eclipse 和 SDK 编写的。

因此，“新 Android 项目”界面有所不同，但除了对新空白活动的一些混淆之外，我基本上可以绕过这些更改。我不确定，但我认为旧版本的 Eclipse/SDK 会创建一个名为 main.xml 的默认活动，尽管我读过的大多数书籍都没有明确说明这一点。此外 main.xml 的默认内容似乎有所不同。

这是新的默认代码...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

这就是我认为旧的默认代码的样子......

```
<?xml version=”1.0” encoding=”utf-8”?>
<LinearLayout xmlns:android=”http://schemas.android.com/apk/res/android”
    android:orientation=”vertical”
    android:layout_width=”fill_parent”
    android:layout_height=”fill_parent”&gt;

<TextView
    android:layout_width=”fill_parent”
    android:layout_height=”wrap_content”
    android:text=”@string/hello”
    />
  </LinearLayout> 
```

我知道变化不大，但是我检查过的六本书中的大多数教程都失败了（除了默认的“Hello World”教程，我现在已经成功完成了 6 次左右）。

因此，任何人都可以给我一些提示，告诉我在设置新项目时我应该做什么以及我应该如何称呼新的空白活动，或者是我关于包名称命名约定的问题。

或者，有人可以告诉我如何将 Eclipse / SDK 降级到 Eclipse 3.7.2 和 SDK 版本 10 左右的版本，因为大多数书籍似乎都依赖于这些版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:24:45.747

每次更新都很难获得旧版本的 SDK，有些事情会做得更好。另外，我建议您不要降级到旧版本。尝试谷歌，弄清楚事情并习惯新的方式！新 SDK 中唯一改变的是新项目的创建方式。您可能需要一个教程，因为其余的事情保持不变。因此，只需在这里和那里点击几下按钮，就没有必要去旧的东西了。

# css - keygen 标签的 CSS 样式

> ID：12744119
> 
> 赞同：3
> 
> 时间：2012-10-05T10:16:28.090
> 
> 标签：css, html

我目前正在尝试制作一个有吸引力的表单，其中包括一个 keygen 标签。这很好用，但是当我尝试将用于“文本”字段的相同 CSS 应用到 keygen 标记时，我得到的效果并不理想。是否有关于哪些样式适用于 keygen 字段以及哪些不适用的快速参考？

**更新**

对不起，我没有早点在我的开发机器前，无法提供截图，现在我......

**当前截图**为[1](http://i.stack.imgur.com/ShRBd.png)

**当前 CSS**（片段）读取

```
 form#setup textarea {
            background: #ffffff;
            border: none;
            -moz-border-radius: 3px;
            -webkit-border-radius: 3px;
            -khtml-border-radius: 3px;
            border-radius: 3px;
            font: italic 26px Georgia, "Times New Roman", Times, serif;
            outline: none;
            padding: 5px;
            width: 450px;
            }
        form#setup keygen {
            background: #ffffff;
            border: none;
            -moz-border-radius: 3px;
            -webkit-border-radius: 3px;
            -khtml-border-radius: 3px;
            border-radius: 3px;
            font: italic 26px Georgia, "Times New Roman", Times, serif;
            outline: none;
            padding: 5px;
            width: 450px;
            } 
```

其中 setup 是表单的 ID。（我计划增加标签的字体大小以匹配文本输入框顺便说一句）

**UPDATE2** 这里是一个 jsfiddle 链接[http://jsfiddle.net/uAsJN/](http://jsfiddle.net/uAsJN/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:36:15.163

希望这可以帮助你一点！

**造型`<keygen>`**

应该很容易吧？也许没有你想的那么容易。

在 Firefox 中，该`<keygen>`元素被替换为`<select _moz-type="-mozilla-keygen">`. 因此，要对其进行样式设置，您应该使用`select[_moz-type="-mozilla-keygen"]`选择器。

在 Chrome 中，`<keygen>`元素保留，但隐含包含一个`<select>`. 您可以使用`keygen::-webkit-keygen-select selector`. 但是，由于您应该将其样式`<keygen>`设置为单个样式，`<select>`以防万一将来行为发生变化，因此您需要删除 webkit 上的样式，以实现一致的界面。

这可以通过包装 webkit only 选择器来实现`@media screen`，`(-webkit-min-device-pixel-ratio:0);`如果这让您感到困惑，请查看 GitHub 上的样式表。

资料来源：http: [//keygen.alexchamberlain.co.uk/](http://keygen.alexchamberlain.co.uk/)

Git 源码：[https ://github.com/alexchamberlain/keygen](https://github.com/alexchamberlain/keygen)

# java - 为 Xuggler 添加过滤支持

> ID：12744122
> 
> 赞同：2
> 
> 时间：2012-10-05T10:16:43.333
> 
> 标签：java, filter, xuggle

我需要能够在 Java 中过滤视频。Xuggle（Java 的 FFMpeg 包装器）可以对视频进行解码和编码，但遗憾的是无法对其进行过滤。

我在 Xuggle 上找到了这个补丁：[https ://groups.google.com/forum/#!msg/xuggler-users/Dl1sMnCZvLw/m4h6FNzYTXUJ](https://groups.google.com/forum/#!msg/xuggler-users/Dl1sMnCZvLw/m4h6FNzYTXUJ)

1.  它们与当前版本的 Xuggle 不匹配。而且它们不包含版本信息。我手动尝试解决此问题。
2.  在 ubuntu 11.10 下以维护模式安装 SWIG 2.0 fnd 编译 Xuggle 后，出现此错误：

    `enter code here[exec] ./xuggler/.libs/libxuggle-xuggler.a(Xuggler.o):Xuggler.cpp:(.text+0x60f1a): undefined reference to`com::xuggle::xuggler::IFilterGraph::make(char const*, int, int, com::xuggle::xuggler::IPixelFormat::Type, com::xuggle::xuggler::IPixelFormat::Type, com::xuggle::xuggler::IRational*, com::xuggle::xuggler::IRational*)' [exec] ./xuggler/.libs/libxuggle-xuggler.a(Xuggler.o):Xuggler.cpp: (.text+0x61340): 未定义的引用`com::xuggle::xuggler::IFilterGraph::make(char const*, int, int, com::xuggle::xuggler::IPixelFormat::Type)' [exec] collect2: ld returned 1 exit status [exec] make[4]: *** [libxuggle.la] Error 1`

任何人都可以分享通过添加本机代码构建 Xuggle 的经验，通过 SWIG 生成 Java 包装器吗？目标是将 ffmpeg 过滤器导出到 Java。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:25:35.797

SWIG 1.3.40 是我需要的。SWIG 2.0 与 Xuggle 构建系统不兼容。

# c++ - 标头声明和源定义周围的 C++ 命名空间

> ID：12744125
> 
> 赞同：2
> 
> 时间：2012-10-05T10:17:05.413
> 
> 标签：c++, namespaces, coding-style, declaration

我正在制作一个静态库，其中定义的所有内容都在一个命名空间中。但我不确定我是否应该像定义一个类一样定义方法，或者也将它们包装在命名空间中。我要问的是：

这是否有效：

我的东西.h

```
namespace MyThings {
    void DoStuff();
    void DoOtherStuff();
} 
```

我的东西.cpp

```
namespace MyThings {
    void DoStuff() {
        // Do this.
    }

    void DoOtherStuff() {
        // Do that.
    }
} 
```

或者，我应该像定义类方法一样定义它吗？：

我的东西.cpp

```
void MyThings::DoStuff() {
    // Do this.
}

void MyThings::DoOtherStuff() {
    // Do that.
} 
```

我宁愿不使用`using namespace MyThings;`，如果它有效，我宁愿使用我的第一个示例，我觉得它使代码更具可读性，而不必`MyThings::`在每个方法标识符之前使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T10:23:34.060

两者都是有效的，因此您可以根据口味选择自己的风格。

使用以下方法定义函数有一个广告优势：

```
void MyThings::DoStuff() {
    // Do this.
} 
```

也就是说，为了做到这一点，函数必须已经被声明。因此，错误如下：

```
void MyThings::DoStuf() {
    // Do this.
} 
```

或者

```
void MyThings::DoStuff(int i) {
    // Do this.
} 
```

编译时被捕获`MyThings.cpp`。如果你定义

```
namespace MyThings {
    void DoStuff(int i) {
        // Do this.
    }
} 
```

那么在另一个源文件中的某人尝试调用该函数并且链接器抱怨之前，您通常不会收到错误消息。显然，如果您的测试不是垃圾，您会以一种或另一种方式捕获错误，但越快通常越好，您可能会从编译器获得比链接器更好的错误消息。

# darwin - 有没有关于苹果达尔文内部的书？

> ID：12744128
> 
> 赞同：-5
> 
> 时间：2012-10-05T10:17:20.787
> 
> 标签：darwin

Windows 和 Linux 有很多书谈论它们的内部架构。我想知道是否有这样一本书谈论有关 Apple Darwin/XNU 的相同主题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:43:22.190

它有点旧（2007 年），但Amit Singh[的 Mac OS X Internals: A Systems Approach](https://rads.stackoverflow.com/amzn/click/com/0321278542)是 OSX 历史、XNU 内核和文件系统的冗长指南。它特别忽略了网络。

# twitter-bootstrap - Twitter Bootstrap 和不同大小的 PSD

> ID：12744134
> 
> 赞同：1
> 
> 时间：2012-10-05T10:17:46.257
> 
> 标签：twitter-bootstrap

我试过但找不到满意的答案。我想使用 Twitter bootstrap 让我的设计具有响应性。我得到不同尺寸的 PSD，即 1200、1024、980、960 等，并相应地创建一个 1200、1024、980、960 的#wrap，然后在该包装内进行所有设计。我对引导程序感到困惑。我的问题是我可以仅在 BootStrap Grid 上设计的 PSD 上应用响应式引导程序，还是可以在任何大小的 PSD 上使用响应式引导程序？如果是，那么我如何将它与每个 PSD 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:10:43.417

Bootstrap 使用某些断点来更改不同设备上的外观 - 一些详细信息：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

“正常”引导版本有 12 个列，但您可以重新定义 ColumnWidth 和 gutterWidth。还有 16 个 cols 引导版本，例如[http://lightglitch.github.com/bootstrap-xtra/](http://lightglitch.github.com/bootstrap-xtra/)甚至 24 个 cols 网格 - 试试 google。

因此，对我来说，从 PSD 到 HTML 的最佳实践是按照预期的网格和媒体分辨率进行设计，并在新项目开始时向设计师建议。

更难的方法是：看看 bootstrap 是如何做到的，然后构建你自己的小框架来适应你的 PSD。

# python - Flask-WTF：如何将结构化对象传递给表单

> ID：12744136
> 
> 赞同：4
> 
> 时间：2012-10-05T10:17:50.117
> 
> 标签：python, flask, wtforms

我是 python 和烧瓶框架的新手。

我的问题是我必须制作一个编辑页面。所以我需要将所有对象的存在信息传递给一个表单。细节：

我的对象有这种结构：

```
class TVChannel(Document):
    __collection__  = 'tvchannels'
    use_dot_notation = True

    structure = {
        '_id'           : basestring,
        'name'          : unicode,
        'streams'       : {
            'city1': { 
                'adapt' : basestring,
                'hds'   : basestring,
                'hls'   : basestring,
                'rtmp'  : basestring,
            },       
            'city2':  {
                'adapt' : basestring,
                'hds'   : basestring,
                'hls'   : basestring,
                'rtmp'  : basestring,
            }
        }
    } 
```

在视图中：

```
channel_obj = db.TVChannel().get_id(channel_id) #load a channel's datas into an object from db
channel     = ChannelForm(request.form, obj=channel_obj) #load channel form

return render_template('channel/new.html',form=channel, channel_id=channel_id) 
```

他们理解并像往常一样传递通道对象的“名称”。但是“流”，他们没有识别并将其传递给这样的东西：

```
class ChannelForm(Form):    
    _id         = HiddenField()
    name        = TextField(_('channel name'))    
    streams = {
        'city1': { 
            'adapt' : TextField(_('stream adapt link')),
            'hds'   : TextField(_('stream hds link')),
            'hls'   : TextField(_('stream hls link')),
            'rtmp'  : TextField(_('stream rtmp link')),
        },       
        'city2':  {
            'adapt' : TextField(_('stream adapt link')),
            'hds'   : TextField(_('stream hds link')),
            'hls'   : TextField(_('stream hls link')),
            'rtmp'  : TextField(_('stream rtmp link')),
        }
    }

    submit      = SubmitField(_('Save')) 
```

我该怎么办？或者无论如何要修改对象的数据如何传递到表单的这些参数中的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:05:17.303

您可以使用[wtforms.fields.FormField](http://wtforms.simplecodes.com/docs/1.0.2/fields.html#field-enclosures)使用嵌套表单。在你的情况下，它会是这样的：

```
class CitiForm(Form):
    adapt = TextField(_('stream adapt link'))
    hds = TextField(_('stream hds link'))
    hls = TextField(_('stream hls link'))
    rtmp = TextField(_('stream rtmp link'))

class ChannelForm(Form):
    _id = HiddenField()
    name = TextField(_('channel name'))
    city1 = FormField(CitiForm)
    city2 = FormField(CitiForm) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T04:37:17.400

在文档中很好地找到了这一点，我现在将使用它：

在视图中：

```
channel_obj = db.TVChannel().get_id(channel_id) #load a channel's infos into an object
channel     = ChannelForm(request.form, obj=channel_obj) #load channel form
channel.CITY1adapt.process_data(channel_obj.streams['City1']['adapt'])
#and others links 
```

并以以下形式：

```
class ChannelForm(Form):    
    _id         = HiddenField()
    name        = TextField(_('channel name'))    
    CITY1adapt  = TextField(_('adapt link')) 
    CITY2adapt  = TextField(_('adapt link'))
    #and so on

    submit      = SubmitField(_('Save')) 
```

现在，当我“保存”它们时，我正在努力。

# git - 如何通过其他文件夹的部署来组织 git

> ID：12744139
> 
> 赞同：1
> 
> 时间：2012-10-05T10:18:01.427
> 
> 标签：git, apache, rsync

我希望我已经设法很好地解释了这个问题：

我有项目文件（路径简化）：

```
/local/projects/example/client
/local/projects/example/server 
```

为了使客户端和服务器代码保持同步，我只是在 /projects/example 中保留了一个 git 存储库。为此，我不想被 Git 子模块所困扰。

但是，为了 1) 在本地测试服务器代码，以及 2) 将服务器代码与实时服务器同步（使用 rsync），我还需要将服务器代码保存在我的本地 /domains 文件夹中，该文件夹包含我的所有域：

```
/local/domains/example.com/
/local/domains/example2.com/
/local/domains/example3.com/ 
```

我尝试了从 example/server 到 domain/example.com 的符号链接，但 Git 不遵循符号链接。我尝试了硬链接，但它们似乎由于未知原因突然中断，可能是由于 Git 检查旧版本所致。手动复制脚本真的很麻烦。

在本地测试时，我可以将我的本地 Apache 指向 example/server 而不是 domain/example.com，但是我必须对整个路径执行 chmod 和 chgrp 直到这台服务器，这似乎不正确。

谁能想出一个好的设置

*   在 Git 中保持客户端和服务器代码同步
*   自动保持示例/服务器和域/示例同步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:34:48.977

`/local/projects/example/server`您应该能够直接在本地实时 Apache 根目录 ( )中签出本地 git 存储库 ( `/local/domains/example.com/`)，如“[使用 Git 远程维护多个同时可访问的网站版本](https://stackoverflow.com/questions/12732851/maintain-multiple-simultaneously-accessible-versions-of-website-remotely-using-g/12740518#12740518)”中，使用接收后挂钩。

```
GIT_DIR=/local/projects/example/server/.git GIT_WORK_TREE=/local/domains/example.com git checkout master -f 
```

您只需要确保调整您`umask`的以便 Apache 使用所述签出文件。（例如`umask 002`将所有文件设置为`775`）

# php - 如何记住页面的滚动位置

> ID：12744145
> 
> 赞同：8
> 
> 时间：2012-10-05T10:18:20.313
> 
> 标签：php, jquery, html

我正在向我的数据库提交一些数据，然后重新加载与用户刚刚打开的页面相同的页面，我想知道是否有办法记住用户刚刚打开的滚动位置？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T10:48:17.977

我意识到我错过了提交的重要部分，因此，我决定调整代码以在点击事件上存储 cookie，而不是在滚动时存储它的原始方式。

* * *

这是一种 jquery 方法：

[jsfiddle](http://jsfiddle.net/lollero/kKKyT/2/) [（`/show`如果你想在框架之外查看它，只需在 url 的末尾添加）]

非常重要的是，您需要[jquery cookie 插件](https://github.com/carhartl/jquery-cookie)。

jQuery：

```
// When document is ready...
$(document).ready(function() {

    // If cookie is set, scroll to the position saved in the cookie.
    if ( $.cookie("scroll") !== null ) {
        $(document).scrollTop( $.cookie("scroll") );
    }

    // When a button is clicked...
    $('#submit').on("click", function() {

        // Set a cookie that holds the scroll position.
        $.cookie("scroll", $(document).scrollTop() );

    });

}); 
```

* * *

* * *

这里仍然是原始答案的代码：

[jsfiddle](http://jsfiddle.net/lollero/kKKyT/)

jQuery：

```
// When document is ready...
$(document).ready(function() {

    // If cookie is set, scroll to the position saved in the cookie.
    if ( $.cookie("scroll") !== null ) {
        $(document).scrollTop( $.cookie("scroll") );
    }

    // When scrolling happens....
    $(window).on("scroll", function() {

        // Set a cookie that holds the scroll position.
        $.cookie("scroll", $(document).scrollTop() );

    });

}); 
```

* * *

@Cody 的回答让我想起了一些重要的事情。

我只是检查并*垂直*滚动到该位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T10:23:22.083

**(1) 解决方案一：**

首先，通过 JavaScript 获取点击提交按钮时的滚动位置。

其次，在提交给 PHP 页面的数据中包含这个滚动位置值。

第三，PHP 代码应该将此值作为 JS 变量写回到生成的 HTML 中：

```
<script>
var Scroll_Pos = <?php echo $Scroll_Pos; ?>;
</script> 
```

四、使用JS滚动到JS变量'Scroll_Pos'指定的位置

**(2) 方案二：**

将位置保存在cookie中，然后在页面重新加载时使用JS滚动到保存的位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T10:34:03.123

将位置存储在隐藏字段中。

```
<form id="myform">
  <!--Bunch of inputs-->
</form> 
```

比使用 jQuery 存储 scrollTop 和 scrollLeft

```
$("form#myform").submit(function(){
   $(this).append("<input type='hidden' name='scrollTop' value='"+$(document).scrollTop()+"'>");

   $(this).append("<input type='hidden' name='scrollLeft' value='"+$(document).scrollLeft()+"'>");
}); 
```

比在下次重新加载时重定向或使用 PHP 打印它们

```
$(document).ready(function(){
   <?php
      if(isset($_REQUEST["scrollTop"]) && isset($_REQUEST["scrollLeft"]))
         echo "window.scrollTo(".$_REQUEST["scrollLeft"].",".$_REQUEST["scrollTop"].")";
   ?>
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:22:52.367

好吧，如果您在代码中使用 _targets，您可以保存它。

或者，您可以执行 ajax 请求来获取 window.height。

```
 document.body.offsetHeight; 
```

然后将它们放回去，将变量提供给 javascript 并为它们移动页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-30T10:57:26.920

要记住滚动所有页面使用此代码

```
$(document).ready(function (e) {
    let UrlsObj = localStorage.getItem('rememberScroll');
    let ParseUrlsObj = JSON.parse(UrlsObj);
    let windowUrl = window.location.href;

    if (ParseUrlsObj == null) {
        return false;
    }

    ParseUrlsObj.forEach(function (el) {
        if (el.url === windowUrl) {
            let getPos = el.scroll;
            $(window).scrollTop(getPos);
        }
    });

});

function RememberScrollPage(scrollPos) {

    let UrlsObj = localStorage.getItem('rememberScroll');
    let urlsArr = JSON.parse(UrlsObj);

    if (urlsArr == null) {
        urlsArr = [];
    }

    if (urlsArr.length == 0) {
        urlsArr = [];
    }

    let urlWindow = window.location.href;
    let urlScroll = scrollPos;
    let urlObj = {url: urlWindow, scroll: scrollPos};
    let matchedUrl = false;
    let matchedIndex = 0;

    if (urlsArr.length != 0) {
        urlsArr.forEach(function (el, index) {

            if (el.url === urlWindow) {
                matchedUrl = true;
                matchedIndex = index;
            }

        });

        if (matchedUrl === true) {
            urlsArr[matchedIndex].scroll = urlScroll;
        } else {
            urlsArr.push(urlObj);
        }

    } else {
        urlsArr.push(urlObj);
    }

    localStorage.setItem('rememberScroll', JSON.stringify(urlsArr));

}

$(window).scroll(function (event) {
    let topScroll = $(window).scrollTop();
    console.log('Scrolling', topScroll);
    RememberScrollPage(topScroll);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-01T16:35:37.170

我在使用 cookie javascript 库时遇到了重大问题，在我需要滚动 onload 事件之前，大多数 cookie 库加载速度不够快。所以我选择了现代 html5 浏览器来处理这个问题。它将最后滚动位置存储在客户端 Web 浏览器本身中，然后在重新加载页面时从浏览器读取设置回最后滚动位置。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {

    if (localStorage.getItem("my_app_name_here-quote-scroll") != null) {
        $(window).scrollTop(localStorage.getItem("my_app_name_here-quote-scroll"));
    }

    $(window).on("scroll", function() {
        localStorage.setItem("my_app_name_here-quote-scroll", $(window).scrollTop());
    });

  });
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-21T12:35:51.260

我通过使用来解决这个问题`window.pageYOffset` 。我使用事件监听器保存了值，或者您可以直接调用`window.pageYOffset`. 在我的情况下，我需要监听器，所以它是这样的：

```
window.addEventListener('scroll', function() {
  document.getElementById('showScroll').innerHTML = window.pageYOffset + 'px';
}) 
```

我将最新的滚动位置保存在本地存储中。因此，当下次用户来时，我只需检查是否有任何滚动值可通过 localstorage 获得，如果是，则滚动通过`window.scrollTo(0,myScrollPos)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-23T17:48:05.063

```
sessionStorage.setItem("VScroll", $(document).scrollTop());
var scroll_y = sessionStorage.getItem("VScroll");
setTimeout(function() { 
   $(document).scrollTop(scroll_y);
   }, 300); 
```

# typescript - 如何在 TypeScript 中创建环境类声明

> ID：12744147
> 
> 赞同：8
> 
> 时间：2012-10-05T10:18:21.740
> 
> 标签：typescript

我正在尝试为 KineticJS 库创建一个 .d.ts 文件。到目前为止，我已经创建了以下接口声明“kinect.d.ts”。（我为stackoverflow裁剪了一些代码，但我希望你能明白）

```
module Kinetic {

    interface Rect extends  Shape {
        constructor (config) ;
    }

    interface Shape extends Node
    { 

    }

    interface Node {
        constructor (config);
        clone(attrs): Node;
        getAbsoluteOpacity(): number;
        getAbsolutePosition(): any;       

        /*
        other methods removed for stackoverflow example
        */
    }
} 
```

我希望这足以在我的 app.ts 文件中创建 Kinetic.Rect 对象

```
/// <reference path="Kinetic.d.ts" />
var rect = new Kinetic.Rect({
          x: 239,
          y: 75,
          width: 100,
          height: 50        
        }); 
```

但似乎我必须做一些额外的工作才能在 TypeScript 中使用 KineticJS 类（如 Rect）。任何人都可以就如何存档这个提供一些指示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:50:14.407

您是否查看过 TypeScript 示例应用程序： http: [//typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples/imageboard/mongodb.ts](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples/imageboard/mongodb.ts)

此链接上的代码为 mongodb 库创建了一个定义。这与 Sohnee 的答案之间的一个区别是，Sohnee 实现了构造函数，这与来自链接的以下代码片段（它是一个存根类）形成对比。我没有足够的声誉在接受的答案中问 Sohnee 为什么他为环境类实现构造函数？

```
declare module "mongodb" {
   export class Server {
       constructor(host: string, port: number, opts?: any, moreopts?: any);
   }
   export class Db {
       constructor(databaseName: string, serverConfig: Server);
       public open(callback: ()=>void); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T10:24:57.437

这是我为 Kinetic 类创建环境定义的工作示例：

```
interface Shape {
    x: number;
    y: number;
    width: number;
    height: number;
}

interface IKinetic {
    Rect(shape: Shape);
}

declare var Kinetic: IKinetic;

var rect = <Shape> new Kinetic.Rect({
  x: 239,
  y: 75,
  width: 100,
  height: 50        
}); 
```

请注意，我曾经`declare var Kinetic: IKinetic;`告诉 TypeScript Kinetic 属于特定类型。

**更新 - 示例 2**

```
interface IShape {
    x: number;
    y: number;
    width: number;
    height: number;
}

interface IRect extends IShape {

}

module Kinetic {
    export class Rect implements IRect {
        public x: number;
        public y: number;
        public width: number;
        public height: number;
        constructor(rect: IShape) {
            this.x = rect.x;
            this.y = rect.y;
            this.width = rect.width;
            this.height = rect.height;
        }
    }
}

var rect = new Kinetic.Rect({
  x: 239,
  y: 75,
  width: 100,
  height: 50        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T23:24:01.907

ITodoStorage 是真正的接口，TodoStorage 是实现，但我不想定义类，因为那会迫使我实现所有成员。相反，我也制作了 TodoStorage 接口。最后，我使用 new 关键字将 var 声明为构造函数。

```
declare interface ITodoStorage {
    get_todos() : TodoItem[];
    set_todos(value : TodoItem[]) : void;
}

declare interface TodoStorage extends ITodoStorage {
}

declare var TodoStorage : { 
    new (): TodoStorage;
} 
```

然后我可以调用构造函数

```
var storageService : ITodoStorage = new TodoStorage(); 
```

不幸的是，var 隐藏了 TodoStorage 类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T04:17:32.333

我意识到这已经过时了，但你可以在这里找到一个完整的 kinetic.d.ts 文件：http: [//kineticjstypescript.codeplex.com/](http://kineticjstypescript.codeplex.com/)

# wordpress - 自定义帖子类型 ID 问题 - 查询其他帖子类型时

> ID：12744150
> 
> 赞同：0
> 
> 时间：2012-10-05T10:18:28.293
> 
> 标签：wordpress, custom-post-type, meta-boxes

我有一个相当复杂的问题要解决，这让我在最后一天左右感到困惑。

基本上，我有两种自定义帖子类型“会话”和“食谱”。这些在 WordPress 的后端显示得很好。

会议附带了几个元框，“介绍视频”、“会议视频”、“目标”、“健身水平”和“特色食谱”。

“精选食谱”元框很特殊，因为它查询 WordPress 数据库以获取“食谱”自定义帖子类型中的所有帖子，然后使用这些值来填充选择框。

现在，正如您从所附的屏幕截图中看到的那样，配方自定义帖子类型的选择框正在拉出正确的项目和 ID，它还保存数据并拉回正确的选择并将其与正确的帖子 ID 关联“会话”帖子类型。伟大的！

帖子中的其他字段出现问题，它们似乎使用第一个配方 ID 作为提取每个字段数据的值，而不是“会话”自定义帖子类型 ID。

现在我可以通过基于特定查询参数编写各种 while 循环来使其工作，但这会产生另一个问题。数据保存在正确的位置，但它使用第一个“会话”cpt ID 来拉回所有帖子的数据。

现在，我相信这与“配方”元框的创建有关，只要您从 functions.php 文件中删除此函数及其相关函数，一切都会正常运行。

我想我应该使用 for 循环而不是 while 循环，我现在要试试这个。

希望你们中的一些 PHP 专家能够为我指明正确的方向。我已经包含了我的 functions.php 文件和来自管理员的屏幕截图。干杯。

```
<?php

add_action( 'init', 'tfp_session_cpt' );
function tfp_session_cpt() {
    register_post_type( 'session',
        array(
            'labels' => array(
                'name' => __( 'Sessions' ),
                'singular_name' => __( 'Session' )
            ),
        'public' => true,
        'has_archive' => true,
        )
    );
}

add_action( 'init', 'tfp_recipe_cpt' );
function tfp_recipe_cpt() {
    register_post_type( 'recipe',
        array(
            'labels' => array(
                'name' => __( 'Recipes' ),
                'singular_name' => __( 'Recipe' )
            ),
        'public' => true,
        'has_archive' => true,
        )
    );
}

/*add_action( 'init', 'tfp_tip_cpt' );
function tfp_tip_cpt() {
    register_post_type( 'tip',
        array(
            'labels' => array(
                'name' => __( 'Tips' ),
                'singular_name' => __( 'Tip' )
            ),
        'public' => true,
        'has_archive' => true,
        )
    );
}*/

add_action( 'add_meta_boxes', 'tfp_add_introduction_video' );
add_action( 'add_meta_boxes', 'tfp_add_session_video' );
add_action( 'add_meta_boxes', 'tfp_add_goals' );
add_action( 'add_meta_boxes', 'tfp_add_levels' );
add_action( 'add_meta_boxes', 'tfp_add_recipes' );
/*add_action( 'add_meta_boxes', 'tfp_add_tips' );*/
add_action( 'save_post', 'tfp_save_introduction_video');
add_action( 'save_post', 'tfp_save_session_video');
add_action( 'save_post', 'tfp_save_goals');
add_action( 'save_post', 'tfp_save_levels');
add_action( 'save_post', 'tfp_save_recipes');
/*add_action( 'save_post', 'tfp_save_tips');*/

function tfp_add_introduction_video() {
    add_meta_box('tfp_introduction_video', 'Introduction Video', 'tfp_introduction_video_html', 'session');
}

function tfp_add_session_video() {
    add_meta_box('tfp_session_video', 'Session Video', 'tfp_session_video_html', 'session');
}

function tfp_add_goals() {
    $types = array ('session');
    foreach ($types as $type) {
        add_meta_box('tfp_goals', 'Goals', 'tfp_goals_html', $type);
    }
}

function tfp_add_levels() {
    add_meta_box('tfp_levels', 'Fitness Levels', 'tfp_levels_html', 'session');
}

function tfp_add_recipes() {
    add_meta_box('tfp_recipes', 'Select a Featured Recipe', 'tfp_recipes_html', 'session', 'side');
}

function tfp_add_tips() {
    add_meta_box('tfp_tips', 'Tips', 'tfp_tips_html', 'session', 'side');
}
function tfp_introduction_video_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    global $post;

    $introductionVideo = get_post_meta( $postID, 'introduction_video_embed_code', true );

    echo $post->ID;

    ?>
    <label for="introduction_video_embed_code">YouTube Embed Code</label>
    <textarea class="large-text code" id="introduction_video_embed_code" name="introduction_video_embed_code" value="<?php echo $introductionVideo; ?>"><?php echo get_post_meta( $post->ID, 'introduction_video_embed_code', true ); ?></textarea>

<?php }

function tfp_session_video_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    global $post;

    $sessionVideo = get_post_meta( $post->ID, 'session_video_embed_code', true ); ?>

    <?php echo $post->ID; ?>
    <label for="session_video_embed_code">YouTube Embed Code</label>
    <textarea class="large-text code" id="session_video_embed_code" name="session_video_embed_code" value="<?php echo $sessionVideo; ?>"><?php echo $sessionVideo; ?></textarea>
<?php }

function tfp_goals_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    $goals = get_post_meta( $post->ID, 'goals', true ); ?>

    <?php echo $post->ID; ?>

    <label for="weight_loss">
        <input type="checkbox" name="goal[]" id="weight_loss" value="Weight Loss" <?php if (in_array('Weight Loss', $goals)) echo "checked='checked'"; ?> />
        <?php _e("Weight Loss"); ?>
    </label>
    <br />
    <label for="improve_fitness">
        <input type="checkbox" name="goal[]" id="improve_fitness" value="Improve Fitness" <?php if (in_array('Improve Fitness', $goals)) echo "checked='checked'"; ?> />
        <?php _e("Improve Fitness"); ?>
    </label>
    <br />
    <label for="improve_health">
        <input type="checkbox" name="goal[]" id="improve_health" value="Improve Health" <?php if (in_array('Improve Health', $goals)) echo "checked='checked'"; ?> />
        <?php _e("Improve Health"); ?>
    </label>
    <br />
<?php }

function tfp_levels_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    $levels = get_post_meta( $post->ID, 'levels', true ); ?>

    <?php echo $post->ID; ?>

    <label for="beginner">
        <input type="checkbox" name="level[]" id="beginner" value="Beginner" <?php if (in_array('Beginner', $levels)) echo "checked='checked'"; ?> />
        <?php _e("Beginner"); ?>
    </label>
    <br />
    <label for="advanced">
        <input type="checkbox" name="level[]" id="advanced" value="Advanced" <?php if (in_array('Advanced', $levels)) echo "checked='checked'"; ?> />
        <?php _e("Advanced"); ?>
    </label>
    <br />
<?php }

function tfp_recipes_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    global $post;

    $recipes = get_post_meta( $post->ID, 'recipe_name', true );

    $recipeArgs = array(
        'post_type' => 'recipe'
    );
    $recipeQuery = new WP_Query($recipeArgs); ?>

    <?php echo $post->ID; ?>

    <select name="recipe_names" id="recipes">
        <option value="null">Select a Featured Recipe</option>
        <?php while ( $recipeQuery->have_posts() ) : $recipeQuery->the_post(); ?>
            <option id="<?php echo $post->ID; ?>" value="<?php the_title(); ?>" <?php $title = get_the_title(); if($recipes == $title) echo "selected='selected'";?>><?php the_title(); ?></option>
        <?php endwhile; ?>
    </select>
<?php }

/*function tfp_tips_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    global $post;

    $tipArgs = array(
        'post_type' => 'tip'
    );
    $tipQuery = new WP_Query($tipArgs); ?>

    <?php echo $post->ID; ?>

    <?php while ( $tipQuery->have_posts() ) : $tipQuery->the_post();

        $tipID = 'tip_' . $post->ID; 
        $tips = get_post_meta( $post->ID, $tipID, true );?>
        <?php echo $tipID; ?>

        <label for="<?php echo $tipID; ?>">
            <input type="checkbox" name="<?php echo $tipID; ?>" id="<?php echo $tipID; ?>" value="1" <?php if ($tips == 1) echo "checked='checked'"; ?> />
            <?php the_title(); ?>
        </label>
        <br />
    <?php endwhile;
}*/

function tfp_save_introduction_video($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    update_post_meta($post_id, 'introduction_video_embed_code', $_POST['introduction_video_embed_code']);
}

function tfp_save_session_video($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    update_post_meta($post_id, 'session_video_embed_code', $_POST['session_video_embed_code']);
}

function tfp_save_goals($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    update_post_meta($post_id, 'goals', $_POST['goal']);
}

function tfp_save_levels($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    update_post_meta($post_id, 'levels', $_POST['level']);
}

function tfp_save_recipes($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    update_post_meta($post_id, 'recipe_name', $_POST['recipe_names']);
}

/*function tfp_save_tips($post) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    if ( ! wp_verify_nonce( $_POST['custom_post_type'], plugin_basename(__FILE__) ) ) return;

    global $post;

    $tipArgs = array(
        'post_type' => 'tip'
    );

    $tipQuery = new WP_Query($tipArgs);

    while ( $tipQuery->have_posts() ) : $tipQuery->the_post();
        $tipID = 'tip_' . $post->ID;

        update_post_meta($post->ID, $tipID, $_POST[$tipID]);
    endwhile;
}*/

// Extra user profile fields, specifically goal and fitness level checkboxes and radio buttons
add_action( 'show_user_profile', 'gaf_user_profile_fields' );
add_action( 'edit_user_profile', 'gaf_user_profile_fields' );

// Function to generate field HTML
function gaf_user_profile_fields( $user ) { ?>
    <h3><?php _e("Goals and Fiteness Level", "blank"); ?></h3>

    <table class="form-table">
        <tr>
            <th scope="row"><?php _e("Goals"); ?></th>
            <td>
                <fieldset>
                    <legend class="screen-reader-text">
                        <span><?php _e("Goals"); ?></span>
                    </legend>
                    <?php $single = true; ?>
                    <?php $goals = get_user_meta( $user->ID, 'goals', $single ); ?>
                    <label for="weight_loss">
                        <input type="checkbox" name="goal[]" id="weight_loss" value="Weight Loss" <?php if (in_array('Weight Loss', $goals)) echo "checked='checked'"; ?> />
                        <?php _e("Weight Loss"); ?>
                    </label>
                    <br />
                    <label for="improve_fitness">
                        <input type="checkbox" name="goal[]" id="improve_fitness" value="Improve Fitness" <?php if (in_array('Improve Fitness', $goals)) echo "checked='checked'"; ?> />
                        <?php _e("Improve Fitness"); ?>
                    </label>
                    <br />
                    <label for="improve_health">
                        <input type="checkbox" name="goal[]" id="improve_health" value="Improve Health" <?php if (in_array('Improve Health', $goals)) echo "checked='checked'"; ?> />
                        <?php _e("Improve Health"); ?>
                    </label>
                    <br />
                </fieldset>
            </td>
        </tr>
        <tr>
            <?php $fitnessLevel = get_the_author_meta('fitness_level', $user->ID); ?>
            <th scope="row"><?php _e("Fitness Level"); ?></th>
            <td>
                <fieldset>
                    <legend class="screen-reader-text">
                        <span><?php _e("Fitness Level"); ?></span>
                    </legend>
                    <input class="tog" type="radio" name="fitness_level" value="beginner" <?php if ($fitnessLevel == 'beginner') { ?>checked="checked"<?php } ?> /><label>Beginner</label>
                    <br />
                    <input class="tog" type="radio" name="fitness_level" value="advanced" <?php if ($fitnessLevel == 'advanced') { ?>checked="checked"<?php } ?> /><label>Advanced</label>
                    <br />
                </fieldset>
            </td>
        </tr>
    </table>
<?php }

// Function and actions to save the data from the fields
add_action( 'personal_options_update', 'save_gaf_user_profile_fields' );
add_action( 'edit_user_profile_update', 'save_gaf_user_profile_fields' );

function save_gaf_user_profile_fields( $user_id ) {

    if ( !current_user_can( 'edit_user', $user_id ) ) { return false; }

    update_user_meta( $user_id, 'goals', $_POST['goal'] );
    update_user_meta( $user_id, 'fitness_level', $_POST['fitness_level'] );
}

?> 
```

![在此处输入图像描述](../Images/bef09380156d5263cec644059d97d35a.png)

**[编辑]**

我当然越来越接近这个功能，但它并不完全正确，因为它正在通过同一个标题。

```
function tfp_recipes_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    $recipeArgs = array(
        'post_type' => 'recipe'
    );
    $recipeQuery = get_posts($recipeArgs);

    $recipeName = get_post_meta( $post->ID, 'recipe_name', true );

    $recipeTitle[] = get_query_var('name');

    echo $recipeTitle;

    ?>

    <select name="recipe_names" id="recipes">
        <option value="null">Select a Featured Recipe</option>
        <?php foreach ( $recipeQuery as $recipe ) : setup_postdata($recipeQuery); ?>
            <option id="<?php echo $recipe->ID; ?>" value="<?php echo $recipeTitle; ?>" <?php if($recipeName == $recipeTitle) echo "selected='selected'";?>><?php echo $recipeName; ?></option>
        <?php endforeach; ?>
    </select>
<?php } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:08:02.063

OK Guys, I solved my issue using the following function.

```
function tfp_recipes_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    global $post;

    $recipeArgs = array(
        'post_type' => 'recipe'
    );
    $recipes = get_posts($recipeArgs);

    $recipeName = get_post_meta( $post->ID, 'recipe_name', true );

    ?>

    <select name="recipe_names" id="recipes">
        <option value="null">Select a Featured Recipe</option>
        <?php foreach ( $recipes as $recipe ) : setup_postdata($recipe); ?>
            <option id="<?php echo $recipe->ID; ?>" value="<?php $recipeTitle = $recipe->post_title; echo $recipeTitle; ?>" <?php if($recipeName == $recipeTitle) echo "selected='selected'";?>><?php echo $recipeTitle; ?></option>
        <?php endforeach; ?>
    </select>
<?php } 
```

Though now I'm having another issue saving another custom metabox. The function to add the metabox is:

```
function tfp_tips_html($post) {

    // Nonce field for some validation
    wp_nonce_field( plugin_basename( __FILE__ ), 'session' );

    global $post;

    echo $post->ID;

    $tipArgs = array(
        'post_type' => 'tip'
    );
    $tips = get_posts($tipArgs);

    $tipData = get_post_meta( $post->ID, $tipID, true );

    foreach ( $tips as $tip ) : setup_postdata($tip);

        $tipID = 'tip_' . $tip->ID; ?>

        <label for="<?php echo $tipID; ?>">
            <input type="checkbox" name="<?php echo $tipID; ?>" id="<?php echo $tipID; ?>" value="1" <?php if ($tipData == 1) echo "checked='checked'"; ?> />
            <?php $tipTitle = $tip->post_title; echo $tipTitle; ?>
        </label>
        <br />
    <?php endforeach;
} 
```

Similar to the recipe function except this adds checkboxes each with a specific ID. Now the function to save it is:

```
function tfp_save_tips($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    if ( ! wp_verify_nonce( $_POST['custom_post_type'], plugin_basename(__FILE__) ) ) return;

    global $tipID;

    add_post_meta($post->ID, $tipID, $_POST[$tipID], true) or update_post_meta($post->ID, $tipID, $_POST[$tipID]);
} 
```

The problem is it's not saving the data, and is going to a blank page.

**[EDIT]**

OK, I have the data saving, as well as the checkboxes being checked correctly when you go back to the post. The only issue is it's posting to a blank page, which is no good. Needs to refresh the editor.

The function 'm now using is:

```
function tfp_save_tips($post_id) {

    if ( !current_user_can( 'edit_post', $post_id ) ) { return false; }

    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
        return $post_id;
    }

    if ( ! wp_verify_nonce( $_POST['session'], plugin_basename(__FILE__) ) ) return;

    $tipArgs = array(
        'post_type' => 'tip'
    );
    $tips = get_posts($tipArgs);

    foreach ( $tips as $tip ) : setup_postdata($tip);

    $tipID = 'tip_' . $tip->ID;

    endforeach;

    add_post_meta($post_id, $tipID, $_POST[$tipID], true) or update_post_meta($post_id, $tipID, $_POST[$tipID]);
} 
```

# c# - 显示消息框后如何停止功能

> ID：12744154
> 
> 赞同：1
> 
> 时间：2012-10-05T10:18:55.593
> 
> 标签：c#, wpf, function, c#-4.0, c#-3.0

```
public void CreateFileOutput(object parameter)
{
    TransactFileCreation();

    WPFMessageBox.Show("test", "Process completed successfully.");
}

public void TransactFileCreation()
{
    if (BatchFolderPath == null)
    {
         WPFMessageBox.Show("test", "Select a Batch folder");
         return;
    }
    // code..
} 
```

我从 CreateFileOutput() 调用 TransactFileCreation()。一旦显示消息框，该功能将不再起作用。但就我而言，它再次转到主功能并显示其中存在的消息框。显示一次消息框后如何停止执行。给我一个解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:25:16.090

你可以返回一个布尔值：

```
public bool TransactFileCreation()
{
    if (BatchFolderPath == null)
    {
         WPFMessageBox.Show("test", "Select a Batch folder");
         return false;
    }
    // code..
    return true;
} 
```

然后你这样打电话：

```
public void CreateFileOutput(object parameter)
{
    if (!TransactFileCreation())
        return;

    WPFMessageBox.Show("test", "Process completed successfully.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:23:27.770

通常你会返回一个`bool`from`TransactFileCreation`来告诉你操作是否成功。

或者在严重的情况下，您会抛出异常，但这仅适用于非常规错误流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:22:30.633

您可以使用`Application.Current.Shutdown();`从任何位置退出您的应用程序。

```
public void TransactFileCreation()
{
    if (BatchFolderPath == null)
    {
         WPFMessageBox.Show("test", "Select a Batch folder");
         Application.Current.Shutdown();
    }
    // code..
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:40:19.040

创建 TransactFileCreation() 以返回 bool。

```
 public void CreateFileOutput(object parameter) 
    { 
        TransactFileCreation()? WPFMessageBox.Show("test", "Process completed successfully."):WPFMessageBox.Show("test", "Select a Batch folder");
    } 

    public boolTransactFileCreation() 
    { 
        return BatchFolderPath == null 

    } 
```

# sqlite - Sqlite 从包含的列创建新列；

> ID：12744155
> 
> 赞同：2
> 
> 时间：2012-10-05T10:18:59.417
> 
> 标签：sqlite, substr

我有一个`test.db`第一列包含`123456;abcdef;ghijk`等的数据库。是否可以将数据拆分为自己的列？

`123456`从不改变长度。

`abcdef`并`ghijk`更改长度，也可能不包含任何内容。

我已经尝试了下面的字符串，但我得到了`;`出现在`t2`或者`t3`取决于`abcdef`and的长度`ghijk`。

```
select substr(column,1,6) AS "t1",
       substr(column,8,6) AS "t2",
       substr(column,15,10) AS "t3" test.db 
```

`;`分隔符是否导致问题？

或者我可以将数据库输出到`.sql`，格式化txt然后导入到新数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:43:11.093

没有[内置的 SQLite 函数](http://www.sqlite.org/lang_corefunc.html)可以像这样拆分字符串。

如果您使用 SQLite C API 或 APSW 之类的包装器，则可以创建自己的函数（[C](http://www.sqlite.org/c3ref/create_function.html)、[APSW](http://apidoc.apsw.googlecode.com/hg/connection.html#apsw.Connection.createscalarfunction)）。

如果您只想进行一次性转换，那么通过文本文件导出/导入将是最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T21:19:53.093

您可以通过以下方式将行拆分为列：

```
create table t1 as
select substr(c1,0,instr(c1,';')) as column1, 
       substr(c1,instr(c1,';')+1,instr(c1,';')-1) as column2,
       substr(c1,instr(c1,';')+1+instr(substr(c1,instr(c1,';')+1),';')) as column3
from table_test; 
```

其中 c1 是您从中选择的列。

# richfaces - 丰富的日历 - 突出显示选定的日期

> ID：12744158
> 
> 赞同：1
> 
> 时间：2012-10-05T10:19:13.207
> 
> 标签：richfaces, seam

我正在使用带有接缝的 Richfaces 3.3。我有一个`<rich:calendar>`组件，我需要在其中突出显示多个日期。我需要在运行时动态设置日期。这可能与`<rich:calendar>`组件有关吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:08:40.750

您不能选择多个日期（`<rich:calendar/>`用作日期字段的输入），但是您可以以与其他日期不同的方式对某些日期进行着色。这些是您的选择：

1.  禁用（灰显）除您要突出显示的日期之外的所有日期。这禁止用户选择未启用的日期。您需要实现一个 javascript 函数，该函数接受“day”参数并返回`true`或者`false`是否应该启用日期。然后在（例如）的`isDayEnabled`属性中指定函数。`<rich:calendar/>``<rich:calendar isDayEnabled="dayEnabledFunction" />`

2.  将不同的类应用于您想要的日期：这允许用户选择任何日期，但仍会突出显示您想要的日期。创建一个 CSS 类并将该类仅应用于您想要的日期。同样，实现一个 javascript 函数，该函数接受一个“day”参数并返回一个字符串，其中包含您要应用的类的名称。为您不想突出显示的日期返回一个空字符串，并为您想要突出显示的日期返回新的 css 类名称。然后在（例如）的`dayStyleClass`属性中指定函数。`<rich:calendar/>``<rich:calendar dayStyleClass="dayStyleFunction" />`

要将日期传递给 javascript 函数，您的服务器端应生成适当的 JavaScript 代码，例如：

```
<script type="text/javascript">
    highlightDates = new Array();
    #{myComponent.dateList}
</script> 
```

`MyComponent`代码：

```
@Named("myComponent")
public class MyComponent implements Serializable {

    // The list of dates to highlight, taken from somewhere
    private List<Date> dates;

    public String getDateList() {
        StringBuilder sb = new StringBuilder();
        // Iterate the list of dates and add a javascript push
        // for each date and return the resulting string.
        for (Date d : dates) {
            sb.append("highlightDates.push(new Date(");
            sb.append(d.getTime());
            sb.append(");\n");
        }
        return sb.toString();
    }
} 
```

下面是 javascript 函数如何工作的示例`dayStyleClass="dayFunc"`。这假设您有 jQuery（richfaces 需要它）并使用了该`noconflict()`函数。我们使用[jQuery.inArray](http://docs.jquery.com/Utilities/jQuery.inArray)函数，它返回数组中值的索引，如果值不在数组中，则返回 -1：

```
function dayFunc(day) { 
    return jQuery.inArray(day, highlightDates) >= 0 ? 'highlighted' : 'normal'; 
} 
```

# javascript - Django jQuery 发布请求

> ID：12744159
> 
> 赞同：8
> 
> 时间：2012-10-05T10:19:13.720
> 
> 标签：javascript, jquery, django, post, request

```
$.ajax({
    url:'/',
    type: "POST",
    data: {name: 'name', age: 'age'},
    success:function(response){},
    complete:function(){},
    error:function (xhr, textStatus, thrownError){}
}); 
```

在views.py中：

```
class SomeView(generic_views.TemplateView):
    template_name = 'something.html'

    def get(self, request, *args, **kwargs):
        ...something...
        return self.render_to_response(context)

    def post(self, request, *args, **kwargs):
        name = request.POST['name']
        age = request.POST['age']
        ...something... 
```

我得到：**[05/Oct/2012 12:03:58] "POST /something/ HTTP/1.1" 403 2294**

我想通过 jQuery 将这些数据（姓名和年龄）发送到“SomeView”中的这个 post 函数。这和加载的模板是同一个视图，只是请求类型不同。在 get() 上加载模板，在 post 上，应该调用 post() 函数。可能吗？我检查了其他问题并得到了这个解决方案。它应该工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T10:24:27.763

您的问题的答案是您做错了什么：不多！

如果传入的 POST 请求未通过 Csrf 检查，Django 将返回 403 响应（禁止）。您可以通过 jQuery 的 ajaxSetup 执行此操作，代码片段可在[此处找到](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

这确实适用于 GET 请求的原因只是 GET 请求没有被 csrf 中间件检查。

看起来您正在这里构建一个表单，另一件要考虑的事情是使用基于类的表单。他们为您处理 get/post 以及参数验证。井井有条。特别是当您制作表单来编辑/创建/删除模型实例时，您可以使用[ModelForms](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)和 CreateViews 的强大功能。井井有条。

掌握这些基于通用类的视图可能需要一些时间。但这非常值得。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T10:22:40.043

您需要在 ajax 调用中包含一个**CSRF（跨站点请求伪造）**令牌。这在这里有很好的记录：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

或者，如果您想使用快速修复，请`@csrf_exempt`为您的视图使用装饰器：

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def my_view(request):
   ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-24T04:45:08.323

在 Django 模板中，您可以添加此...

```
{% csrf_token %} 
```

它将向您的页面 html 输出类似的内容...

```
<input type="hidden" name="csrfmiddlewaretoken" value="ckhUdNOTj88A...hfTnREALlks2kz"> 
```

然后使用 Javascript，您可以简单地找到这个输入并获取它的值 - 类似于这个非 jQuery 示例......

```
var el = document.getElementsByName("csrfmiddlewaretoken");
csrf_value = el[0].getAttribute("value"); 
```

最后将 csrf_value 添加到您的 jQuery AJAX 表单数据行，如下所示...

```
data: {name: 'name', age: 'age', csrfmiddlewaretoken: csrf_value}, 
```

这是一个有效的 jsFiddle 概念：[https ://jsfiddle.net/vdx1Lfpc/18/](https://jsfiddle.net/vdx1Lfpc/18/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-16T13:53:17.077

我在另一篇文章中读到，您可以执行以下操作：

```
$.ajax({
    method: "POST",
    url: "{% url 'some_route' %}",
    headers: {'X-CSRFToken': '{{ csrf_token }}'},
    contentType: "application/json",
    dataType: 'json',
    data: {name:$('#id_name').val()}
})
.fail(function(message) {
    alert('error');
})
.done(function(data) {
    alert(data);
}); 
```

# html - HTML/CSS：在同一行显示 DT/DD 时避免下推 DD

> ID：12744164
> 
> 赞同：1
> 
> 时间：2012-10-05T10:19:26.933
> 
> 标签：html, css, layout

当包含的文本多于一行时，我试图避免在 DL 中下推左浮动 DD。

此处示例：http: [//jsfiddle.net/hw2wM/7/](http://jsfiddle.net/hw2wM/7/) 前两个 DD 对齐。然而，第三个应该与前两个 DD 保持对齐，而是被向下推并占据整个宽度......

我想保留的功能：

*   当 DT 文本太宽时，DD 被优雅地推到右边。
*   无固定宽度
*   与空 DD 保持一致
*   两个 DL 并排显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:28:58.747

这是您演示的修改版本：[little link](http://jsfiddle.net/glee/Avnvj/)。两个变化：

*   `float: left;`在`dd`s 更改为`overflow: hidden;`
*   添加：`dd:nth-of-type(n+2) { margin-top: 10px; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:56:45.113

最终答案，希望它可以节省某人的时间...

最灵活的答案。 [http://jsfiddle.net/SeYzF/1/](http://jsfiddle.net/SeYzF/1/)

感谢@Abody97 展示了领先优势。

主要特点，在 Abody97 建议之上：

```
dd:after {content:' '; white-space:pre;} 
```

如果为空，则保持 dd 不对齐

> div.table { 显示：表格；宽度：100%；} div.table > * { 显示：表格单元格；}

并排显示两个 DL

# javascript - ExtJS 如何统计脚本拉取的变量的总量

> ID：12744168
> 
> 赞同：0
> 
> 时间：2012-10-05T10:19:42.240
> 
> 标签：javascript, extjs, extjs3, modx

基本上我有别人设计的网站，我真的不懂 ExtJS。我想知道是否有人可以帮助我。

基本上我需要做的是将脚本提取的“名称”总量放在“名称”列标题旁边。

我已经尝试过代码中的 .getCount () 和其他各种函数，但似乎没有任何效果。

任何人都可以帮助我吗？

谢谢！

```
 MNWG.grid.Charities = function(config) {
    config = config || {};
    Ext.applyIf(config,{
        id: 'mnwg-grid-charities'
        ,url: MNWG.connectorURL
        ,baseParams: { action: 'charities/getList' }
        ,fields: ['id','Created','Name','RegNo','Contact','Address','Postcode','Phone','Fax','Website','Email','Info','Notes','Tags',{name: 'FinancialAid',type:'boolean'}]
        ,paging: true
        ,remoteSort: true
        ,anchor: '97%'
        ,autoExpandColumn: 'name'
        ,columns: [{
            header: 'Name'

            ,dataIndex: 'Name'
            ,sortable: true
            ,width: 400
            ,editor: { xtype: 'textfield' }
        },{
            header: 'Contact'
            ,dataIndex: 'Contact'
            ,sortable: false
        },{
            header: 'Post code'
            ,dataIndex: 'Postcode'
            ,sortable: false
        },{
            header: 'Phone'
            ,dataIndex: 'Phone'
            ,sortable: false
            ,renderer: MNWG.renderers.phoneFax
        },{
            header: 'Website'
            ,dataIndex: 'Website'
            ,sortable: false
            ,renderer: MNWG.renderers.websiteLink
         },{
            header: 'Email'
            ,dataIndex: 'Email'
            ,sortable: false
            ,renderer: MNWG.renderers.emailLink
        }]
        ,tbar:[{
            xtype: 'textfield'
            ,id: 'mnwg-charities-search-filter'
            ,emptyText: 'Search...'
            ,listeners: {
                'change': {fn:this.search,scope:this}
                ,'render': {fn: function(cmp) {
                    new Ext.KeyMap(cmp.getEl(), {
                        key: Ext.EventObject.ENTER
                        ,fn: function() {
                            this.fireEvent('change',this);
                            this.blur();
                            return true;
                        }
                        ,scope: cmp
                    });
                },scope:this}
            }
        },{
            xtype: 'tbfill'
        },{
            xtype: 'button'
            ,text: 'Add new Charity'
            ,handler: {
                xtype: 'mnwg-window-createcharity'
                ,blankValues: true
            }
        }]

    });
    MNWG.grid.Charities.superclass.constructor.call(this,config)
};
Ext.extend(MNWG.grid.Charities,MODx.grid.Grid,{
    search: function(tf,nv,ov) {
        var s = this.getStore();
        s.baseParams.query = tf.getValue();
        this.getBottomToolbar().changePage(1);
        this.refresh();
    }
    ,getMenu: function(a,b,c) {
        var items = Array();

        // Check for a web url
        URL = a.menu.record.Website;
        if(URL != '' && URL != '/'){
            items.push({
                text: 'Visit Website'
                ,handler: this.visitWebsite
            });
        };

        // Check for an email address
        Email = a.menu.record.Email;
        if(Email!=''){
            items.push({
                text: 'Send Email'
                ,handler: this.sendEmail
            });
        };

        // Add update / delete buttons
        items.push({
            text: 'Update Details'
            ,handler: this.updateCharity
        },'-',{
            text: 'Remove Charity'
            ,handler: this.removeCharity
        });
        return items;
    }
    ,visitWebsite: function(a,b){
        var url = a.parentMenu.record.Website
        // Make sure URL is preceded by http://
        var patt= /^http/;
        if( ! patt.test(url)){
          url = 'http://'+url;
        };
        window.open(url);
    }
    ,sendEmail: function(a,b){
        var Email = a.parentMenu.record.Email
        window.open('mailto:'+Email);
    }
    ,removeCharity: function() {
        MODx.msg.confirm({
            title: 'Delete Charity'
            ,text: 'Are you sure you want to delete this charity? This cannot be reversed!'
            ,url: this.config.url
            ,params: {
                action: 'charities/remove'
                ,id: this.menu.record.id
            }
            ,listeners: {
                'success': {fn:this.refresh,scope:this}
                ,'failure': {fn: function(){ alert('fail'); },scope:this}
            }
        });
    }
    ,updateCharity: function(btn,e) {
        if (!this.updateCharityWindow) {
            this.updateCharityWindow = MODx.load({
                xtype: 'mnwg-window-updatecharity'
                ,record: this.menu.record
                ,listeners: {
                    'success': {fn:this.refresh,scope:this}
                }
            });
        }
        this.updateCharityWindow.setValues(this.menu.record);
        this.updateCharityWindow.show(e.target);
    }
});
Ext.reg('mnwg-grid-charities',MNWG.grid.Charities);

MNWG.renderers.websiteLink = function(val,a,record){
    // If no URL return blank
    if(val==''){return'';};

    // Make sure URL is preceded by http://
    var patt= /^http/;
    if( ! patt.test(val)){
      val = 'http://'+val;
    };

    // Create link
    return '<a href="'+val+'" target="_blank">Visit Website</a>';
};

MNWG.renderers.emailLink = function(val,a,record){
  // If no email return blank
  if( val=='' ){return '';};
  return '<a href="mailto:'+val+'">Send Email</a>';
};

MNWG.renderers.phoneFax = function(val,a,record){
    var html = '';
    if(record.data.Phone!=''){
        html+= '<img src="http://m.intertrustgroup.com/images/icon_phone.png" style="margin-right:.5em;">'+record.data.Phone+'<br />';
    };
    if(record.data.Fax!=''){    
        html+= '<img src="http://www.sliksvn.com/gfx/icon_fax.gif" style="margin-right:.5em;">'+record.data.Fax;
    };
    return html;    
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:55:29.713

您想在从服务器检索数据的[存储上侦听](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)[datachanged](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-event-datachanged)事件。然后在[datachanged](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-event-datachanged)上获取列标题并更新它。

以下代码片段是一个示例，说明如何通过将侦听器添加到应用于网格的[商店来实现此目的。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)

*更新的代码示例*

**为简单起见更改名称列**

```
{
    header: 'Name'
    ,id: 'mnwg-grid-charities-name'
    ,dataIndex: 'Name'
    ,sortable: true
    ,width: 400
    ,editor: { xtype: 'textfield' }
} 
```

**在此行下方添加以下代码** `MNWG.grid.Charities.superclass.constructor.call(this,config);`

```
MNWG.grid.Charities.getStore().addListener('datachanged', function(store) {
    Ext.ComponentManager.get('mnwg-grid-charities-name').setText('Name ' + store.count());
}); 
```

# java - 使用 javamail 发送邮件不起作用

> ID：12744169
> 
> 赞同：3
> 
> 时间：2012-10-05T10:19:46.933
> 
> 标签：java, email, gmail, jakarta-mail

我正在尝试使用我的 gmail 地址发送和发送电子邮件。我将调试设置为 true，这就是我得到的。

```
DEBUG: JavaMail version 1.4.1
DEBUG: not loading file: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/javamail.providers
DEBUG: java.io.FileNotFoundException: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/javamail.providers (No such file or directory)
DEBUG: !anyLoaded
DEBUG: not loading resource: /META-INF/javamail.providers
DEBUG: successfully loaded resource: /META-INF/javamail.default.providers
DEBUG: Tables of loaded providers
DEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc]}
DEBUG: Providers Listed By Protocol: {imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]}
DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map
DEBUG: !anyLoaded
DEBUG: not loading resource: /META-INF/javamail.address.map
DEBUG: not loading file: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/javamail.address.map
DEBUG: java.io.FileNotFoundException: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/javamail.address.map (No such file or directory)

DEBUG: setDebug: JavaMail version 1.4.1
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true 
```

然后我什么都不做，没有错误/警告/....

我正在使用这些设置：

```
mail.smtp.auth=true
mail.debug=true
mail.smtp.host=smtp.gmail.com
mail.smtp.user=MyOwnUserName@gmail.com
mail.smtp.password=MyOwnPassword
mail.transport.protocol=smtp
mail.smtp.port=465
mail.disable=false
mail.verbose=true
mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory 
```

我试过这些例子：

1.  [http://adfblogs.blogspot.be/2012/01/sending-e-mail-from-adf-application.html](http://adfblogs.blogspot.be/2012/01/sending-e-mail-from-adf-application.html)
2.  [使用 java 发送电子邮件](https://stackoverflow.com/questions/3649014/send-email-using-java)

都是一样的问题。而且我 100% 确定我的密码和电子邮件地址是正确的。

编辑：我的代码（与第一个链接相同） nitialContext ic = new InitialContext(); 会话会话 = (会话) ic.lookup("mail/SugarCRMMailSession");

```
 Properties props = session.getProperties();

        String  to = emailID;

        String mailhost = props.getProperty("mail.smtp.host");
        String user = props.getProperty("mail.smtp.user");
        String password = props.getProperty("mail.smtp.password");
        String protocol = props.getProperty("mail.transport.protocol");

        String authorization = props.getProperty("mail.smtp.auth");
        String mailDisabled = props.getProperty("mail.disable");
        String verboseProp = props.getProperty("mail.verbose");
        String debugProp = props.getProperty("mail.debug");

        boolean sentDisabled = false;
        if(mailDisabled.equals("true"))
            sentDisabled = true;

        if(!sentDisabled){

            boolean auth = false;
            if(authorization.equals("true"))
                auth = true;

            boolean verbose = false;
            if(verboseProp.equals("true"))
                verbose = true;

            String mailer = "smtpsend";

            if(debugProp.equals("true"))
                session.setDebug(true);
            else
                session.setDebug(false);

            Message msg = new MimeMessage(session);
            msg.setFrom();      
            msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(to, false));
            msg.setSubject(subject);
            msg.setContent(text, "text/html;charset=UTF-8");      
            msg.setHeader("X-Mailer", mailer);
            msg.setSentDate(new Date());

            SMTPTransport t = (SMTPTransport)session.getTransport(protocol);

            try {
                t.connect(mailhost, user, password);
                t.sendMessage(msg, msg.getAllRecipients());
            } finally {
                    t.close();
            }

             System.out.println("\nMail was sent successfully.");
        }else{
             System.out.println("Mail Sending is disabled.");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T08:56:16.203

这是解决您的问题的完美解决方案，请在此处下载 Mail api jar 表单

[gmail 的 API 邮件提供商](http://www.java2s.com/Code/Jar/j/Downloadjavamailsmtp142jar.htm)

然后转到 Windows --> Preferencs --> Java --> Installed JRES -->

and what ever JRE You are using just select it and EDIT and then add that external jar into that JRE and Click okey then Compiler will able to load that jar file. hence the error will get resolved.

Try it.

# c# - 访问新的表单实例 c#

> ID：12744178
> 
> 赞同：0
> 
> 时间：2012-10-05T10:20:14.593
> 
> 标签：c#, windows, winforms, multiple-forms

我正在用 C# 编写一种适用于套接字的即时消息应用程序。我管理了所有套接字问题，它现在就像 IRC 一样工作。但是，我想实现私人消息系统。我们有两种形式——一种是主要的，第二种是类似私人味精的原型。窗口应该看起来像。这是我的问题：

```
string priv_windows, who, msg; 
```

...

```
public void createform(string who, string msg)
{
Form2 frm = new Form2();
frm.Text = who;
frm.label1.Text = msg;
priv_windows += who += " ";
frm.Show();
} 
```

...

```
createform("1st instance", "some text");
createform("2nd instance", "other text"); 
```

这对于创建新的表单实例非常有效，但是在创建它们之后我找不到与这些子表单进行通信的方法。我的意思是，例如，我如何更改第一个表单实例上的文本？有没有一种简单的方法可以为特定的表单实例设置索引或其他内容？请稍后描述如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:38:10.493

```
public class Form2 : System.Windows.Forms.Form
{
    public System.Windows.Forms.Label label1 = new System.Windows.Forms.Label();

    public void Main(string args[])
    {
        Form2 first = createform("1st instance", "some text");
        Form2 second = createform("2nd instance", "other text");
    }

    public Form2 createform(string who, string msg)
    {
        Form2 frm = new Form2();
        frm.Text = who;
        frm.label1.Text = msg;
        priv_windows += who += " ";
        frm.Show();
        return frm;
    }

    public void SetMessage(string message)
    {
        this.label1.Text = message;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:34:40.627

您可以创建一个列表并将表单保存在其中，例如，

```
private List<Form2> forms = new List<Form2>();

public void createform(string who, string msg)
{    
    Form2 frm = new Form2();
    forms.Add(frm);
    // etc 
```

现在您可以访问列表中的每个表单：

```
foreach (Form2 form in forms)
{
    form.Text = "Hello world";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:34:58.697

使用任何集合来存储和引用您的表单实例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:43:28.713

您需要保留对它的引用，以便与他们“交流”。就像你的字符串这样的私有变量，例如：

```
string priv_windows, who, msg;
List<Form> forms = new List<Form>();

public void createform(string who, string msg)
{    
    Form2 frm = new Form2();
    frm.Text = who;
    frm.label1.Text = msg;
    priv_windows += who += " ";
    forms.Add(frm);
    frm.Show();
}

public void ChangeChild()
{
    Form f = forms[0];
    f.Text = "New Form Title Text";
} 
```

这只是一个操作集合中第一个表单的简单示例，如果您有许多表单，则需要一种更复杂的方法来确定要更改哪个检索哪个表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:12:53.233

如果我解释 void `CreateForm(String, String)`right 的参数 who，您希望与某个人的每次活动对话都有一个私人窗口。

如果这是正确的，我将使用该类`Dictionary`（有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx "字典")）而不是`List`保存对对话窗口的引用。

另一件好事是实现一个表单控制器类，它实际上具有静态成员来管理所有使用的表单。这将允许您在代码中的任何位置访问窗口窗体。如果您不希望代码的每个部分都可以访问它，您可以使用命名空间来控制可访问性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T11:43:04.283

我建议使用[事件聚合器](http://eventaggregator.codeplex.com/) 与域中的对象进行通信。

# php - MySQL写入错误数据

> ID：12744179
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:20:17.087
> 
> 标签：php, mysql, insert

我正在测试我的 PHP 应用程序。我正在尝试使用 mysql 查询在十进制字段中编写字符串值（例如，表字段是“价格”（十进制），我尝试编写“你好”字符串）。我预计会出现 sql 错误，但我只收到一个警告，并且在表中我可以在“价格”字段中看到一行带有“0.00”的行。

我需要中断 mysql 插入并向我的 php 应用程序返回错误。

**注意：**我需要通过 mysql 测试字段的值，而不是通过带有 is_numeric() 或类似函数的 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:27:13.860

mysql 中的数据验证可以使用触发器来执行，但我强烈建议您在应用程序上下文中验证您的数据。

[http://rpbouman.blogspot.ch/2009/12/validating-mysql-data-entry-with_15.html](http://rpbouman.blogspot.ch/2009/12/validating-mysql-data-entry-with_15.html)

# objective-c - 使用 Objective C 从视频中捕获一部分帧

> ID：12744182
> 
> 赞同：1
> 
> 时间：2012-10-05T10:20:20.553
> 
> 标签：objective-c

我正在尝试开发像会说话的汤姆这样的应用程序。我正在使用 MPMoviePlayerController 在 UIView 中播放视频。我得到了一个用于捕获 UIView 屏幕的源代码。如果我不添加 MPMoviePlayerController，它应该可以工作。它会给一个视频。但如果我添加了 MPMoviePlayerController 并捕获相同的视图，则视频中只显示黑屏。任何人都可以建议一种简单的方法来实现此功能。

主要目标是捕获正在播放视频的视图，当按下录制按钮和按下停止按钮时，我需要从按下录制按钮到按下停止按钮的位置获取视频。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:24:28.047

您是否尝试过 thumbnailImageAtTime:timeOption:？

[苹果文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006953-CH3-DontLinkElementID_2)

# cocos2d-iphone - 只想在 cocos2d 中点击按钮后绘制实心圆/点

> ID：12744184
> 
> 赞同：0
> 
> 时间：2012-10-05T10:20:23.067
> 
> 标签：cocos2d-iphone, drawrect, uitouch, cclayer

刚开始看cocos2d，很想学。
基本上我只想在我触摸屏幕的地方画一个小实心圆（如半径 20 左右的点），它只能在按下按钮后启用。我怎样才能做到这一点 ？

对于我正在使用的按钮`CCMenuItem`。这是代码。

```
-(id) init
{

    CCMenuItem *enableBtn = [CCMenuItemImage itemFromNormalImage:@"refresh-icon.jpg" selectedImage:@"Button1.png" target:self selector:@selector(drawEnable:)];

    enableBtn.position = ccp(10, 60);
    enableBtn.scale = 0.1;

    CCMenu *menu = [CCMenu menuWithItems:enableBtn, nil];
    menu.position = ccp(30, 10);
    [self addChild:menu];
}

- (void) drawEnable:(id)sender{

}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

} 
```

仅点击此按钮后，我想要一个我在屏幕上触摸的圆圈。

请帮助我。我已经搜索并尝试了很多东西，但无法获得关于这件事的清晰知识或想法。
欢迎您提出建议。

谢谢 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:06:27.483

在这里你可以做什么：

1.  当点击按钮时，将一个布尔变量设置为 true。

2.  在 touchesBegan 方法中，首先检查该布尔变量是否为真，如果是则仅插入精灵/点或您愿意插入的任何内容。

3.  然后将该布尔变量设置为false。

# asp.net-mvc-4 - 在 Azure 上运行 MVC4 时禁止出现错误 403

> ID：12744188
> 
> 赞同：0
> 
> 时间：2012-10-05T10:20:39.103
> 
> 标签：asp.net-mvc-4, visual-studio-2012, .net-4.5, http-status-code-403, azure-web-roles

在 VS2012 中创建全新的 MVC4 Web 角色项目时，在 Azure 上发布和运行时会出现 HTTP 错误 403。在运行 MVC4 程序集以及将 MVC4 程序集作为 Web 角色运行 Azure 部署程序集时，本地运行都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:20:39.103

我花了很多时间弄清楚这一点。Google 上没有相关点击，所以我最终创建了一个新的 MVC4 项目，但这次通过部署程序集的向导添加 MVC4 Web 角色（右键单击）来创建它。这行得通。

web.config 中的一些差异提示我第一个 MVC4 程序集是在 .net 4.5 上创建的，我已将其更改为 .net 4.0，而第二个是直接为 .net 4.0 创建的。这就是我最终找到[MVC4 发行说明](http://www.asp.net/whitepapers/mvc4-release-notes)的方式：

其中一个要点清楚地说明了我的确切情况：

> **从 4.5 更改为目标 4.0 后，在 Azure 上运行 ASP.NET MVC 4 应用程序时出现 403 Forbidden：**
> 
> 如果在目标 4.5 之后将 ASP.NET MVC 4 项目更改为目标 4.0，然后部署到 Azure，您可能会在运行时看到 403 Forbidden 错误。要解决此问题，请将以下内容添加到您的 web.config：`<modules runAllManagedModulesForAllRequests="true" />`

下次我将更仔细地查看发行说明以查找新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:03:40.227

尝试在 System.WebServer 之后将其添加到 web.config：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
</assemblyBinding> 
```

# ios - Base.lproj 的本地化故事板

> ID：12744190
> 
> 赞同：2
> 
> 时间：2012-10-05T10:20:46.500
> 
> 标签：ios, localization, storyboard, ios6

使用 iOS 6 和新本地化时，更新本地化故事板的 .strings 文件的最佳方式是什么？当我切换到新的 Base.lproj 机制时，我的项目很好地创建了字符串文件，但它不会即时更新 .strings 文件。

谢谢！
-F

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T09:50:31.640

来自Apple的“国际化和本地化指南”，在这一切的底部：

在项目类型的 Base.lproj 目录中

```
ibtool MainStoryboard.storyboard --generate-strings-file NewStuff.strings 
```

然后合并`NewStuff.strings`到您的`Storyboard.strings`文件并翻译。

编辑链接： [https ://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/MaintaingYourOwnStringsFiles/MaintaingYourOwnStringsFiles.html#//apple_ref/doc/uid/10000171i-CH19-SW22](https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/MaintaingYourOwnStringsFiles/MaintaingYourOwnStringsFiles.html#//apple_ref/doc/uid/10000171i-CH19-SW22)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:02:08.840

将下面的脚本添加到“构建阶段”->“运行脚本”

![在此处输入图像描述](../Images/f43a94aeec9fe70d9cfd9ddc27ede7c3.png)

```
#!/bin/sh
# cls.sh - script to  Create Locale Strings auto

storyboardExt=".storyboard"
stringsExt=".strings"
newStringsExt=".strings.new"
oldStringsExt=".strings.old"
localeDirExt=".lproj"

# Find storyboard file full path inside project folder
for storyboardPath in `find ${SRCROOT} -name "*$storyboardExt" -print`
do
    # Get Base strings file full path
    baseStringsPath=$(echo "$storyboardPath" | sed "s/$storyboardExt/$stringsExt/")

    # Create strings file only when storyboard file newer
    if find $storyboardPath -prune -newer $baseStringsPath -print | grep -q .; then
        # Get storyboard file name and folder 
        storyboardFile=$(basename "$storyboardPath")
        storyboardDir=$(dirname "$storyboardPath")

        # Get New Base strings file full path and strings file name
        newBaseStringsPath=$(echo "$storyboardPath" | sed "s/$storyboardExt/$newStringsExt/")
        stringsFile=$(basename "$baseStringsPath")
        ibtool --export-strings-file $newBaseStringsPath $storyboardPath
        iconv -f UTF-16 -t UTF-8 $newBaseStringsPath > $baseStringsPath
        rm $newBaseStringsPath

        # Get all locale strings folder 
        for localeStringsDir in `find ${SRCROOT} -name "*$localeDirExt" -print`
        do
            # Skip Base strings folder
            if [ $localeStringsDir != $storyboardDir ]; then
                localeStringsPath=$localeStringsDir/$stringsFile

                # Just copy base strings file on first time
                if [ ! -e $localeStringsPath ]; then
                    cp $baseStringsPath $localeStringsPath
                else
                    oldLocaleStringsPath=$(echo "$localeStringsPath" | sed "s/$stringsExt/$oldStringsExt/")
                    cp $localeStringsPath $oldLocaleStringsPath

                    # Merge baseStringsPath to localeStringsPath
                    awk 'NR == FNR && /^\/\*/ {x=$0; getline; a[x]=$0; next} /^\/\*/ {x=$0; print; getline; $0=a[x]?a[x]:$0; printf $0"\n\n"}' $oldLocaleStringsPath $baseStringsPath > $localeStringsPath

                    rm $oldLocaleStringsPath
                fi
            fi
        done
    else
        echo "$storyboardPath file not modified."
    fi
done 
```

# python - 如何在Python中将字母映射到整数？

> ID：12744192
> 
> 赞同：1
> 
> 时间：2012-10-05T10:20:54.823
> 
> 标签：python

我想得到A和C之间的距离是2，我能想到的是使用`ord`

```
ord('C') - ord('A')

#=>2 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:24:41.647

那有什么不优雅的呢？

也许你可以做

```
def get_character_distance(character):
  return ord(character.upper()) - ord('A') 
```

更好地描述你在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:31:22.953

如果您真的不想使用`ord`，您可以按顺序在所有字母的字符串中查找字符的位置 - Python 恰好在`string`模块中提供了这样一个字符串（或者其中几个包含不同的东西），并且字符串确实有一种查找字符位置的方法：

```
>>> string.ascii_uppercase.index('C')
2 
```

但是如果效率是一个问题，那么使用`ord`会更好 - 它在恒定时间内工作，这会进行线性搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:32:04.170

不，这已经差不多了。

您可能想要构建您真正想要的字符查找而不是依赖`ord()`...然后让查找引发异常或默认无效字符...

```
from string import ascii_uppercase
lookup = dict( (ch, idx) for idx, ch in enumerate(ascii_uppercase) )
print 'distance is', lookup['C'] - lookup['A'] # 2
print 'distance is', abs(lookup['A'] - lookup['C']) # still return 2
print 'distance is', lookup['C'] - lookup['a'] # raises KeyError
print 'distance is', lookup['C'] - lookup.get('a', 0) # effectively returns lookup['C'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T10:30:48.883

也许你可以试试：

```
from string import ascii_letters as letters
def distance(char1,char2):
    return letters.index(char2) - letters.index(char1) 
```

我还是觉得`ord(char2)-ord(char1)`比较酷。

一些技术观点：

```
>>> import timeit
>>> timeit.timeit(stmt='letters.index("C") - letters.index("A")',setup="from string import ascii_letters as letters",number=10000000)
3.5703659057617188
>>> timeit.timeit(stmt='ord("C") - ord("A")',setup="",number=10000000)
0.9403810501098633 
```

结论：`ord("C") - ord("A")`摇滚！！

# javascript - “未定义”不是 Safari 中评估 el.click() 的函数

> ID：12744202
> 
> 赞同：8
> 
> 时间：2012-10-05T10:22:04.937
> 
> 标签：javascript

我想在按下 Enter 按钮时运行一个 js 函数。在 IE、Chrome 和 Opera 中一切正常，但在 Safari 中出现错误（如下所述）。

我需要一个**纯 Javascript**解决方案，**而不是 jQuery**。

这是**功能**：

```
function pressSearch(e) {
    if (typeof e == 'undefined' && window.event) {
        e = window.event;
    }
    var charCode = (e.which) ? e.which : 
                   ((e.charCode) ? e.charCode : 
                   ((e.keyCode) ? e.keyCode : 0));
    if (charCode == 13) {
        document.getElementById('enterSearch').click();
    }
} 
```

这是**HTML**：

```
<input type="text" id="searchKey" onkeypress="pressSearch(event)">
<div id="enterSearch">Search</div> // This is the "button" 
```

我收到此**错误**：

```
// Safari
TypeError: 'undefined' is not a function 
    (evaluating 'getElementById('enterSearch').click()') 
```

我究竟做错了什么？

**编辑：**我已经修复了 Mozilla Firefox 错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T23:22:48.943

如果您查看[HTML DOM Level 2 Specification](http://www.w3.org/TR/DOM-Level-2-HTML/ecma-script-binding.html)，该`click()`功能仅定义为`HTMLInputElement`，因此虽然用户界面不是很友好，但 Safari 不需要实现该功能。

现代浏览器触发事件​​的正确方法是在[DOM Level 3 Events](http://www.w3.org/TR/DOM-Level-3-Events/)中：

```
// First create an event
var click_ev = document.createEvent("MouseEvents");
// initialize the event
click_ev.initEvent("click", true /* bubble */, true /* cancelable */);
// trigger the event
document.getElementById("someElement").dispatchEvent(click_ev); 
```

这是适用于 Chrome、Safari、Firefox 和 IE9 的 jsfiddle：http: [//jsfiddle.net/y5yW9/6/](http://jsfiddle.net/y5yW9/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:25:56.250

您正在触发一个`div`没有隐式点击处理程序的点击事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T22:51:54.277

我在处理类似问题时遇到[了同样的问题](https://stackoverflow.com/questions/10669617/instagram-auto-like-bookmarklet/10670209#10670209)。我想出的是在 safari（当然还有其他浏览器）中触发点击事件的以下内容：

```
var t = document.getElementById('someidhere');
if (document.dispatchEvent) {
    var e = new MouseEvent('click', {
        view: window,    // Window associated with the event
        bubbles: true,
        cancelable: true
    });
    t.dispatchEvent(e);
} else if (document.fireEvent) {
    t.fireEvent('onclick');
} else if (t.click) {
    t.click();
} 
```

根据@Dennis 的说法，您的代码已经适用于 Firefox，但是从 79.0 版（它被测试的版本）开始，这段代码应该可以在 Firefox 中运行。

请注意，[`initEvent()`](https://developer.mozilla.org/en-US/docs/Web/API/Event/initEvent)已弃用。但是，通过 Event 构造函数创建事件的新方法在 Internet Explorer 中[不起作用。](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event#Browser_compatibility)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:51:37.513

默认情况下，`div`元素没有定义单击事件处理程序。因此，首先您需要为 enterSearch div 应用点击事件，例如`<div id="enterSearch" onclick="submitSearch()">Search</div>`. 否则按钮本身将不可点击。

要以编程方式执行事件，请使用以下构造：

```
function pressSearch(e) {
    if (typeof e == 'undefined' && window.event) {
        e = window.event;
    }

    var charCode = (e.which) ? e.which : ((e.charCode) ? e.charCode : ((e.keyCode) ? e.keyCode : 0));
    if (charCode == 13) {
        var a = document.getElementById('enterSearch');

        if (typeof a.onclick == "function") {
            a.onclick.apply(a); // binds the scope of onclick to a
        }
    }
} 
```

我无法为 IE 验证这一点，但它适用于 Safari。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T10:28:29.787

`getElementById('enterSearch')`

应该`document.getElementById('enterSearch')`

# sql-server - 报表服务器数据库配置向导中没有 Sharepoint 集成模式选项

> ID：12744203
> 
> 赞同：1
> 
> 时间：2012-10-05T10:22:09.103
> 
> 标签：sql-server, sharepoint, reporting-services

我正在尝试以 Sharepoint 集成模式 ( [http://technet.microsoft.com/en-us/library/hh833726.aspx](http://technet.microsoft.com/en-us/library/hh833726.aspx) ) 设置我的报表服务器，但我没有在向导中选择模式的选项（请参阅图片）。有人可以帮忙吗？我正在运行带有 SQL Server 2012 的 Sharepoint 2010，并且在安装 SQL Server 时选择了以 Sharepoint 集成模式安装的选项。![在此处输入图像描述](../Images/379c5e5b528b86297c88fb33c000942a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T05:01:20.860

您提供的链接适用于 SQL 2008 R2。它在 SQL 2012 中发生了一些变化。现在，Reporting Services 配置管理器只能用于创建本机模式数据库。创建 SharePoint 模式数据库的选项是使用 SP 管理中心页面或通过 PowerShell 命令。（参考 - [MSDN](http://msdn.microsoft.com/en-us/library/ms157285.aspx)）。该链接包含有关如何启动和运行 SharePoint 选项的更多详细信息。

也在[此处](http://msdn.microsoft.com/en-us/library/ms157300.aspx)验证，它在 Reporting Services 配置管理器中说“报表服务器模式始终设置为本机”。

# visual-studio-2010 - 调试时来自VS2010的奇怪整数字符

> ID：12744208
> 
> 赞同：0
> 
> 时间：2012-10-05T10:22:21.507
> 
> 标签：visual-studio-2010, debugging

自从我调试几天以来，它向我显示了奇怪的字符而不是整数值。它只发生在整数上，字符串和布尔值正确地显示了我。

仅使用 Web 服务进行调试，不是由 ajax 等的 GET 或 POST 方法引起的

这是问题的快照..

[http://i.imgbox.com/adkZJTWb.png](http://i.imgbox.com/adkZJTWb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:24:39.333

您一定是不小心打开了“十六进制显示”：右键单击十六进制值（在您的示例中为 &H0）并取消选中菜单上的“十六进制显示”。

# php - php一个链接参数

> ID：12744217
> 
> 赞同：0
> 
> 时间：2012-10-05T10:22:49.257
> 
> 标签：php

我怀疑如何在链接中获取两个值并将其传递给编辑函数。请帮助......

以下是代码，

我希望将制造品和产品代码都传递给 get[edi]，

```
<td > <a name="edit" href="productwarrantymaster.php?edi[]=<? echo $record['ProductCode']; echo $record['ManufactureDate'];?>">Edit</a></td> 
```

以下是编辑功能的代码，

```
if(!empty($_GET['edi']))
{
$prmaster =$_GET['edi'];
$Manufactu =$_GET['edi'];

$result=mysql_query("SELECT * FROM productwarranty where ProductCode ='".$prmaster."' and ManufactureDate ='".$Manufactu."'");
$myrow1 = mysql_num_rows($result);//mysql_fetch_array($retval);

        if($myrow1==0)  
        {
            ?>
            <script type="text/javascript">
            alert("No Data Found!!");
            </script>
            <?
        }
        else
        {
           $myrow = mysql_fetch_array($result);

           $ProductCode = $myrow['ProductCode'];
           $WarrantyPeriod = $myrow['WarrantyPeriod'];
           $ProRataPeriod = $myrow['ProRataPeriod'];
           $ManufactureDate = $myrow['ManufactureDate'];
           $ApplicableFormDate = $myrow['ApplicableFormDate'];
        }
        $prmaster = NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:25:17.463

试试这个代码

```
<a name="edit" href="productwarrantymaster.php?ProductCode=<?=$record['ProductCode']?>&ManufactureDate=<?=$record['ManufactureDate'];?>">Edit</a> 
```

并在这里改变，

```
if(!empty($_GET['ProductCode']))
{
  $prmaster  = $_GET['ProductCode'];
  $Manufactu = $_GET['ManufactureDate']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:26:10.840

尝试这个：

```
<td><a name="edit" href="productwarrantymaster.php?edi=1&prodCode=<?php echo $record['ProductCode'];?>&manuDate=<?php echo $record['ManufactureDate'];?>">Edit</a></td> 
```

这需要验证！！！！！！！！！！

```
if(!empty($_GET['edi']))
{
  $prmaster =$_GET['prodCode'];
  $Manufactu =$_GET['manuDate'];

$result=mysql_query("SELECT * FROM productwarranty where ProductCode ='".$prmaster."' and ManufactureDate ='".$Manufactu."'");
$myrow1 = mysql_num_rows($result);//mysql_fetch_array($retval);

        if($myrow1==0)  
        {
            ?>
            <script type="text/javascript">
            alert("No Data Found!!");
            </script>
            <?
        }
        else
        {
           $myrow = mysql_fetch_array($result);

           $ProductCode = $myrow['ProductCode'];
           $WarrantyPeriod = $myrow['WarrantyPeriod'];
           $ProRataPeriod = $myrow['ProRataPeriod'];
           $ManufactureDate = $myrow['ManufactureDate'];
           $ApplicableFormDate = $myrow['ApplicableFormDate'];
        }
        $prmaster = NULL;
} 
```

# objective-c - Objective-C，UITextView中首字母的自定义样式

> ID：12744230
> 
> 赞同：2
> 
> 时间：2012-10-05T10:23:20.023
> 
> 标签：objective-c, ios, styles, uitextview

有没有办法自定义第一个字母`UITextView`，改变**颜色**，**字体大小**和**字体系列**？
看下面的截图：

![在此处输入图像描述](../Images/a41109df5e24b4cb5dfd50b41f94c059.png)

**编辑：**
是否有纯粹的 Objective-C 实现？
当然，如果它支持**iOS4 及更高版本**就更好了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:26:42.593

在 iOS 6 中，您可以使用简单`NSAttributedString`的分配`attributedText`.

`NSAttributedString`允许您为一系列字符指定属性字典。

**更新**

> 当然，如果它支持 iOS4 及更高版本就更好了。

回到那一步的快速简便的方法是使用`UIWebView`，它能够呈现 PDF、HTML、RTF、RTFD 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:11:04.353

我认为您可以查看[RTLabel](https://github.com/honcheng/RTLabel)控件，该控件使用 html 标记设置文本样式。它是开源的，如果我没记错的话，它确实在后台使用了类似 NSAttributedString 的东西。

# vim - 如何防止 NERDTree 在不同的选项卡中打开同一个文件？

> ID：12744235
> 
> 赞同：0
> 
> 时间：2012-10-05T10:23:27.900
> 
> 标签：vim, nerdtree

当我通过按 NERDTree 在选项卡中`t`打开文件时，如果文件已经在选项卡中，NERDTree 是否仍然无法打开文件？相反，我希望 NERDTree 切换到该选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:38:59.057

我似乎记得 NERDTree 尊重这个设置：

```
set switchbuf=useopen,usetab 
```

详情请参阅`:h switchbuf`。

# css - 当元素使用 960gs 时，有序列表不显示数字

> ID：12744243
> 
> 赞同：0
> 
> 时间：2012-10-05T10:23:55.507
> 
> 标签：css, 960.gs

我在我的新项目中使用 960gs，我注意到它以某种方式禁用了列表编号。我猜那是因为浮动。这是代码：

```
<ol>
                <li class="prefix_1 grid_11">
                    <h2>q</h2>
                    <ul>
                        <li><input type="radio" id="q1a1" value="1" name="question-1"><label for="q1a1">1</label></li>
                        <li><input type="radio" id="q1a2" value="2" name="question-1"><label for="q1a2">2</label></li>
                        <li><input type="radio" id="q1a3" value="3" name="question-1"><label for="q1a3">3</label></li>
                        <li><input type="radio" id="q1a4" value="4" name="question-1"><label for="q1a4">4</label></li>
                    </ul>
                </li>
                <li class="suffix_1 grid_11">
                    <h2>q?</h2>
                    <ul>
                        <li><input type="radio" id="q2a1" value="1" name="question-2"><label for="q2a1">1</label></li>
                        <li><input type="radio" id="q2a2" value="2" name="question-2"><label for="q2a2">2</label></li>
                        <li><input type="radio" id="q2a3" value="3" name="question-2"><label for="q2a3">3</label></li>
                        <li><input type="radio" id="q2a4" value="4" name="question-2"><label for="q2a4">4</label></li>
                    </ul>
                </li>
</ol> 
```

在 CSS 中，我简单地说

```
ol {
    list-style: decimal inside;
} 
```

# jquery-ui - jquery 计划滑块

> ID：12744244
> 
> 赞同：-2
> 
> 时间：2012-10-05T10:23:58.497
> 
> 标签：jquery-ui, uislider

[我需要为类似这种](http://static.livedemo00.template-help.com/wt_37867/)设计的网络托管设计设计一个计划滑块。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:27:40.100

我会向您指出[jqueryui.com 上的这个演示，](http://jqueryui.com/demos/slider/#rangemax)但是由于您的请求的紧迫性，我已经忘记了如何使用键盘，因此我陷入了如此盲目的恐慌。

# bash - 如何找到数组中的最大数字？

> ID：12744245
> 
> 赞同：26
> 
> 时间：2012-10-05T10:24:03.930
> 
> 标签：bash

> **可能重复：**
> [如何在 BASH 中对数组进行排序](https://stackoverflow.com/questions/7442417/how-to-sort-an-array-in-bash)

我在数组中有数字`10 30 44 44 69 12 11...`。如何显示数组中的最高值？

```
echo $NUM //result 69 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T10:28:43.157

您可以使用`sort`来查找。

```
#! /bin/bash
ar=(10 30 44 44 69 12 11)
IFS=$'\n'
echo "${ar[*]}" | sort -nr | head -n1 
```

或者，自己搜索最大值：

```
max=${ar[0]}
for n in "${ar[@]}" ; do
    ((n > max)) && max=$n
done
echo $max 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T10:28:20.160

试试这个：

```
a=(10 30 44 44 69 12 11 100)

max=0
for v in ${a[@]}; do
    if (( $v > $max )); then max=$v; fi; 
done
echo $max 
```

结果 100

# android - 检查 Intent.ACTION_VIEW 上的用户操作

> ID：12744247
> 
> 赞同：8
> 
> 时间：2012-10-05T10:24:15.107
> 
> 标签：android, android-intent

我有一个包含一些文件的列表视图，可以有各种类型，例如 pdf 或文档。当用户单击一个时，我会获取文件 mime 类型并启动一个意图，让用户选择使用哪个应用程序来打开该文件。什么我想知道是用户选择了什么，或者只是按下并没有选择任何东西。直到现在我尝试的是执行 startActivityForResult 并检查是否成功，但它总是返回 RESULT_CANCELED

```
 static final int SELECTED_VIEWER = 1;

    Intent intent = new Intent(Intent.ACTION_VIEW);     
    intent.setDataAndType(Uri.parse(filePath), mimetype);
    try {
        startActivityForResult(intent, SELECTED_VIEWER);
    }catch (ActivityNotFoundException e) {
        Toast.makeText(getActivity(), 
           Strings.ERROR_NO_VIEWER, 
            Toast.LENGTH_SHORT).show();
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
     if (requestCode == SELECTED_VIEWER) {
         if (resultCode == Activity.RESULT_CANCELED ) {
             //do something
         }
     }
 } 
```

我什至尝试使用 startActivityForResult(Intent.createChooser 但仍然无济于事。我怎么知道用户是否选择了该列表中的某些内容，或者他是否取消了打开？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T12:16:40.303

正如 Android 开发人员在[活动中所写](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)

> 在其他协议中（例如 ACTION_MAIN 或 ACTION_VIEW），您可能无法得到预期的结果。

你不能指望动作视图返回你所期望的，所以我所做的是实现一个自定义警报对话框，显示可以打开某个文件的所有可能的应用程序，一个稍微修改的版本，如下所示[自定义意图选择器](http://pilcrowpipe.blogspot.it/2012/01/creating-custom-android-intent-chooser.html)

对于那些想知道的代码，它以 filePath 作为参数，并向您显示所有已安装的应用程序，这些应用程序可以通过获取 mimetype 来处理该文件类型。与完整路径一起使用。可以调用

```
AlertDialogIntentChooser alertDialog = new  AlertDialogIntentChooser(filePath,getActivity());
alertDialog.show(); 
```

这是类，它也可以接受一个可选的委托来进行活动回调

```
public class AlertDialogIntentChooser {
private String filePath;
private Activity activity;
private AlertDialog dialog;
private AlertDialogDelegate delegate;
private ListItem[] items;

public AlertDialogIntentChooser(String filePath,Activity activity){
    this.filePath = filePath;
    this.activity = activity;
    init();
}

public void setDialogDelegate(AlertDialogDelegate delegate){
    this.delegate = delegate;
}

private void init(){

    initApplicationItems();

    AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    builder.setTitle(Strings.STRING_SELECT_APPLICATION);
    builder.setIcon(R.drawable.ic_share);

    builder.setOnCancelListener(new OnCancelListener() {

        @Override
        public void onCancel(DialogInterface paramDialogInterface) {
            if(delegate!=null)
                delegate.onDialogCancelled(paramDialogInterface);
        }
    });

    builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {         

            Intent intentPdf = new Intent(Intent.ACTION_VIEW);
            MimeTypeMap myMime = MimeTypeMap.getSingleton();
            String fileExt = MimeTypeMap.getFileExtensionFromUrl(Uri.parse(filePath));
            String mimeType = myMime.getMimeTypeFromExtension(fileExt);                 
            intentPdf.setClassName(items[which].context, items[which].packageClassName);
            intentPdf.setDataAndType(Uri.parse(filePath), mimeType);
            try {
                activity.startActivity(intentPdf);
                dialog.dismiss();
                if(delegate!=null)
                    delegate.onItemSelected(items[which].context, items[which].packageClassName);
            }catch (ActivityNotFoundException e) {
                Toast.makeText(activity, 
                        Strings.ERROR_NO_VIEWER, 
                        Toast.LENGTH_SHORT).show();
                dialog.dismiss();
            }               
        }
    });

    dialog = builder.create();        
}

private void initApplicationItems(){
    Intent intentPdf = new Intent(Intent.ACTION_VIEW);

    MimeTypeMap myMime = MimeTypeMap.getSingleton();
    String fileExt = MimeTypeMap.getFileExtensionFromUrl(Uri.parse(filePath));
    String mimeType = myMime.getMimeTypeFromExtension(fileExt);             
    intentPdf.setDataAndType(Uri.parse(filePath), mimeType);
    PackageManager pm = activity.getPackageManager();
    List<ResolveInfo> resInfos = pm.queryIntentActivities(intentPdf, 0);

    items = new ListItem[resInfos.size()];
    int i = 0;
    for (ResolveInfo resInfo : resInfos) {
        String context = resInfo.activityInfo.packageName;
        String packageClassName = resInfo.activityInfo.name;
        CharSequence label = resInfo.loadLabel(pm);
        Drawable icon = resInfo.loadIcon(pm);
        items[i] = new ListItem(label.toString(), icon, context, packageClassName);
        ++i;
    }
}

public void show(){
    dialog.show();
}

private ListAdapter adapter = new ArrayAdapter<ListItem>(
          activity,
    android.R.layout.select_dialog_item,
    android.R.id.text1,
    items){

    public View getView(int position, View convertView, ViewGroup parent) {

        View v = super.getView(position, convertView, parent);
        TextView tv = (TextView)v.findViewById(android.R.id.text1);

        int dpS = (int) (72 * activity.getResources().getDisplayMetrics().density *  0.5f);
        items[position].icon.setBounds(0, 0, dpS, dpS);
        tv.setCompoundDrawables(items[position].icon, null, null, null);

        int dp5 = (int) (5 * activity.getResources().getDisplayMetrics().density *  0.5f);
        tv.setCompoundDrawablePadding(dp5);

        return v;
    }
};

class ListItem {
     public final String name;
     public final Drawable icon;
     public final String context;
     public final String packageClassName;

     public ListItem(String text, Drawable icon, String context, String packageClassName) {
         this.name = text;
         this.icon = icon;
         this.context = context;
         this.packageClassName = packageClassName;
     }

     @Override
     public String toString() {
         return name;
     }
 }

 public static interface AlertDialogDelegate{
     public void onDialogCancelled(DialogInterface paramDialogInterface);
     public void onItemSelected(String packageName, String className);
 }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-29T12:08:05.870

尝试

> if (resultCode == RESULT_CANCELED) 而不是 if (resultCode == Activity.RESULT_CANCELED)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-05T12:00:21.747

试试这个..

```
Intent intent = new Intent(Intent.ACTION_VIEW);     
        intent.setDataAndType(Uri.parse(filePath),mimetype);
        startActivity(intent); 
```

# java - 如何从另一个java程序调用一个java程序？

> ID：12744253
> 
> 赞同：-4
> 
> 时间：2012-10-05T10:24:38.497
> 
> 标签：java

> **可能重复：**
> [如何在另一个 java 程序中编译和运行 java 程序？](https://stackoverflow.com/questions/4842684/how-to-compile-run-java-program-in-another-java-program)

例如，如果我有 A.java 和 B.java，那么我想使用 A.java 编译和运行 B.java。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:30:36.340

首先，编译你的代码。我不认为你*真的*想像你写的那样从 A 类编译 B 类。这几乎没有任何意义。

现在，由于两者都是 java 类，您可以直接从另一个类调用一个类的方法。但是，如果您的意思*是*2 个类是独立的程序，那么每个类都有自己的 main 方法，您可以使用`Runtime.getRuntime().exec(...)`或者使用`ProcessBuilder`.

请注意我*真正*写的文字。我很确定您不想从另一个调用一个 java 程序。大多数情况下，您想从另一个类调用一个类的方法，所以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:14:25.290

@AlexR：IMO 这是一个有效的场景。假设您想从某个地方上传代码然后执行它，并验证输出。

尝试使用下面提到的代码：

```
 import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;

    public class A {

      public static void main(String[] args) {
        try {
            Process processCompile = Runtime.getRuntime().exec("javac B.java");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Process processRun = null;
        try {
            processRun = Runtime.getRuntime().exec("java B");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            printLines(" stdout:", processRun.getInputStream());
            printLines(" stderr:", processRun.getErrorStream());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      }

      private static void printLines(String name, InputStream ins) throws Exception {
          String line = null;
          BufferedReader in = new BufferedReader(new InputStreamReader(ins));
          while ((line = in.readLine()) != null) {
              System.out.println(name + " " + line);
          }
        }
    } 
```

# iphone - 如何从我的相机中保存裁剪的 UIImage？

> ID：12744257
> 
> 赞同：0
> 
> 时间：2012-10-05T10:24:41.333
> 
> 标签：iphone, camera, overlay

在我的应用程序中，我正在使用相机功能，并且我正在为相机使用叠加视图，一切正常。

问题是在保存图像时我不想保存整个图像我只想保存我在叠加视图中显示的图片。

请参阅下面两个屏幕之间的区别。

**1）这是我在叠加视图中显示的内容：**

![叠加视图中有什么](../Images/18bc6ec1c30a84f76c4eae5e8820e09e.png)

**2）这就是我得到的：**

![我得到了什么](../Images/6f35363c5f5bbc426b116f2f6175b914.png)

谢谢！提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:26:51.107

```
CGRect rect = self.overlayimage.frame;

UIGraphicsBeginImageContext(CGSizeMake(self.overlayimage.frame.size.width, self.overlayimage.frame.size.height));
// This is where we resize captured image
[(UIImage *)[info objectForKey:UIImagePickerControllerOriginalImage] drawInRect:rect];

captureimage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:14:21.080

制作 UIImagePickerController 的对象

```
imagePickerController.allowsEditing = YES; 
```

并在 UIImagePickerController 的委托方法中获取裁剪后的图像

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info { 
```

UIImage *croppedImg = [info objectForKey:@"UIImagePickerControllerEditedImage"]; }

# mysql - 如果我有一个“dmY”格式的日期列，如何比较 mysql 中的日期（在特定范围之间）？

> ID：12744263
> 
> 赞同：1
> 
> 时间：2012-10-05T10:25:01.863
> 
> 标签：mysql, sql

我已经写了这段代码，但没有得到正确的记录。

1.

```
SELECT first_name,date 
from user where date between  '01-05-2012' and '05-05-2012' 
```

2.

```
SELECT first_name,date from user 
where date >= '01-05-2012' date <= '05-05-2012' 
```

上面的代码有什么问题？什么是写查询？

这是样本数据

```
first_name  date
Sonu    23-01-2012
Saqib   20-02-2012
Sachin  01-04-2012
Ankit   17-08-2012
Michal  12-13-2011 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:39:35.587

首先使用转换您的日期`STR_TO_DATE`

```
SELECT *
FROM table1
WHERE STR_TO_DATE(`date`,'%d-%m-%Y') 
      BETWEEN '2012-05-01' AND '2012-12-05' 
```

这将选择从`June 01 2012`直到`December 05 2012`

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/777be/6)

如果你真的想坚持你的格式，

```
SELECT *
FROM table1
WHERE STR_TO_DATE(`date`,'%d-%m-%Y') 
      BETWEEN STR_TO_DATE('01-05-2012','%d-%m-%Y') AND 
              STR_TO_DATE('05-12-2012','%d-%m-%Y') 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/777be/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:30:08.493

您的日期必须以 ISO 格式 (yyyy-mm-dd) 指定：

```
SELECT first_name,date from user 
where date >= '2012-05-01' and date <= '2012-05-05' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:30:31.923

如果日期/时间格式与支持的格式匹配，MySQL 执行隐式转换以将值转换为`DATETIME`

如果要将字符串显式转换为 DATETIME，则[STR_TO_DATE 函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)将是最佳选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:33:58.770

如果您的日期列的数据类型是日期，`DATE_FORMAT(date,'%Y-%m-%d')`否则使用

```
STR_TO_DATE(DATE_FORMAT(date,'%Y-%m-%d')) 
```

# jsf - 标签错误的属性“for”

> ID：12744264
> 
> 赞同：1
> 
> 时间：2012-10-05T10:25:03.250
> 
> 标签：jsf, websphere

我正在使用 MyFaces JSF 2.0 - WebSphere V8.0 上的 IBM 实现。在系统输出消息中，我仅在用户成功登录后才注意到以下错误。

```
HtmlLabelRend W   Attribute 'for' of label component with id j_id1610532955_33b1d0aa is not defined 
```

我没有任何名为“id”的字段。任何解决此问题的指针都会很有用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T12:12:16.817

> *我没有任何名为“id”的字段。*

`<h:outputLabel>`除了[标记输入元素](http://www.htmldog.com/reference/htmltags/label/)之外，您似乎还在滥用 a 。

如果要显示纯文本，请`<h:outputText>`改用。

如果您使用 Facelets 作为视图技术并且不需要在输出文本上设置任何其他属性，那么您甚至可以在模板文本中使用 EL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T12:33:11.977

`h:outputLabel`用于标记输入组件。它呈现一个`label` [html 标签](http://www.w3schools.com/tags/tag_label.asp)。

您可能正在使用`h:outputLabel`，它的`for`属性指向一个不存在的组件。

该`for`属性的值必须是现有组件的ID，即您要标记的组件。例如：

```
<h:outputLabel for="username" />
<h:inputText id="username" value="#{bean.username}" /> 
```

# sql-server - 如何使用 SQL Server 编写查询菜单和子菜单 n 级？

> ID：12744266
> 
> 赞同：0
> 
> 时间：2012-10-05T10:25:09.233
> 
> 标签：sql-server, menuitem, submenu

我有`MenuItem`以下格式的 SQL Server 2008 表。

```
 MenuItemsID     MenuType     ItemsName  ParentID     URL          Images

       1            1           Home         0         --            ---
       2            1          Product       0         ---           ----
       3            1          Catagories    0         ---            ----
       4            1          Brand         0         Brand.aspx     ----
       5            1          H1            1         ------          -----
       6            1          H2            1         ------        --------
       7            1          P1            2         ----           ------
       8            1          c1            3         ----           ---
       9            1          H1Submneu1    5         ---               ----
       10           1           P1 subMenu   7         -------           --- 
```

像那样

我试图编写一个查询来检索最多一级子菜单

```
select 
    m.ItemName, STUFF((select ',' + s.ItemName 
                       from MenuItems s
                       where s.ParentId = m.MenuItemsID FOR XML PATH('')), 1, 1, '') as SubMenus
from MenuItems m 
where ParentId = 0 
```

但我想要 m 个级别的子菜单

如何编写该查询？谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:02:10.393

您需要一个递归 CTE（公用表表达式）来实现这一点。尝试这样的事情：

```
;WITH Submenus AS
(
    SELECT 
        MenuItemID, ItemsName, ParentID, Level = 0
    FROM
        dbo.menuitem m
    WHERE
        m.ParentID = 0

    UNION ALL

    SELECT 
        m2.MenuItemID, m2.ItemsName, m2.ParentID, s.Level + 1 
    FROM
        dbo.menuitem m2
    INNER JOIN
        Submenus s ON m2.ParentID = s.MenuItemID  
)  
SELECT
    *
FROM    
    Submenus
ORDER BY
    Level, MenuItemID 
```

这给了我一个输出：

```
MenuItemID  ItemsName  ParentID  Level
   1        Home           0       0
   2        Product        0       0
   3        Categories     0       0
   4        Brand          0       0
   5        H1             1       1
   6        H2             1       1
   7        P1             2       1
   8        C1             3       1
   9        H1Sub1         5       2
  10        P1Sub1         7       2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:01:05.247

您可以使用递归 CTE：

```
;WITH cte_menu(Level, MenuItemsId, MenuType, ItemsName, ParentID, URL, Images)
AS
(
SELECT 0 AS Level, MenuItemsId, MenuType, ItemsName, ParentID, URL, Images
FROM MenuItem 
WHERE ParentID = 0

UNION ALL

SELECT Level + 1, t.MenuItemsId, t.MenuType, t.ItemsName, t.ParentID, t.URL, t.Images
FROM MenuItem  t
INNER JOIN cte_menu c ON c.MenuItemsId = t.ParentID
)
SELECT *
FROM cte_menu
ORDER BY Level, MenuItemsId 
```

[更多关于使用 CTE 的递归查询](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

# c++ - 是否有一个库可以在 C++ 中创建一组具有相同名称和索引的目录？

> ID：12744270
> 
> 赞同：3
> 
> 时间：2012-10-05T10:25:15.980
> 
> 标签：c++, linux

我正在编写一个程序，每次运行它都会生成许多输出文件。我添加了指定输出目录的选项，这样我就不会弄乱我的源目录。但是，我不想每次运行它时都必须更改名称（我那样懒惰），因为我仍在开发它，而且我正在快速迭代。

我想到的优雅解决方案是，如果我指定 output`foo`并且`foo`已经存在，我的程序应该创建`foo.0`，然后`foo.1`等等，ad nauseum（或者直到我用完磁盘空间）。我已经通过我使用过的许多工具看到了这一点。

我可以很容易地编写某种循环来检查每个索引名称是否存在，并增加索引直到找到未使用的名称。但是，我已经看到很多工具都可以做到这一点，因此有某种库可以做到这一点似乎是合乎逻辑的。

我的问题是：是否有任何我可以使用的 C++ 库来创建一个具有给定名称的目录 + 下一个免费索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:52:16.977

似乎不太可能存在用于此类特定任务的库。您可以使用它[`boost::filesystem`](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/)来检查目录是否存在。实现所需功能的代码长度不应超过 20 行。

# android - 如何在我的活动下方启用菜单按钮

> ID：12744273
> 
> 赞同：0
> 
> 时间：2012-10-05T10:25:18.823
> 
> 标签：android, android-layout, android-intent, android-emulator, android-actionbar

1 个问题：如何在我的活动下方启用菜单按钮，如图所示。因为我已经禁用了操作栏。我在我的应用程序中没有使用过操作栏，所以我禁用了它。目前我正在使用线性布局作为我的栏.. 我只想启用图像中显示的菜单。请帮帮我..提前谢谢你。

目前我正在使用整个应用程序操作栏禁用。

```
 <style name="MyTheme" parent="@android:style/Theme.Holo.NoTitleBar"> 
```

目前是 android 版本 11.. 在 mainfest.xml

```
 <application
       android:icon="@drawable/mplebicon"
       android:label="@string/app_name" 
        android:hardwareAccelerated="true"
          android:theme="@style/MyTheme"> 
```

![在此处输入图像描述](../Images/f429fe91e9150c78d06d9ec8d689ed85.png)

```
 OR 
```

2个问题：我没有在我的应用程序中使用操作栏...我以这种方式将其禁用

```
 <style name="MyTheme" parent="@android:style/Theme.Holo.NoTitleBar"> 
```

我的问题是如何在线性布局或任何布局中仅在我的活动中启用菜单。我不想要操作栏中的默认菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:20:39.333

您的问题有点不清楚，您是否希望底部的操作栏始终可见？如果是这样，那么您不需要在android中做任何事情。只需使用以下方法删除顶部栏：

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

我会通读[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)并从那里全面了解操作栏。如果您可以提供有关您正在尝试做的事情的更详细信息，那就太好了:)

# php - 停止 php 后台进程

> ID：12744277
> 
> 赞同：2
> 
> 时间：2012-10-05T10:25:50.460
> 
> 标签：php, background-process

我有一个页面，用户可以在其中启动后台进程。如果用户刷新页面或关闭选项卡或浏览器，我想停止此过程。试过`connection_abort()`但没有运气，脚本继续运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:28:22.163

我觉得你运气不好。`http`是一个无状态协议，一旦你的页面被提供，连接就会关闭。

除了一些 ajax 技巧，没有办法告诉用户刷新或关闭浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:51:55.050

如果您有用户的唯一标识符，并且可以将其与进程 ID 绑定或存储，则以下逻辑可以工作：

1.  用户请求页面
2.  用户被赋予一个唯一的 id
3.  后台进程启动，它的 id 与用户 id 一起记录到数据库中
4.  该过程会以选定的频率不断检查数据库，以查看它是否记录在数据库中，如果它不存在或与预期不同，则该过程会自行停止。
5.  然后，您为用户提供的任何前端都可以：
    *   在需要时通过 ajax 触发脚本（即 stop_process.php?user=id）——即当页面离开时。由于 onbeforeunload 阻止或停止某些浏览器中的 ajax 请求，这种方法可能不可靠。
    *   有一个 ajax 轮询脚本，它使用时间戳不断更新数据库中的进程记录，如果这个时间戳过期 - 意味着用户已经导航离开或停止了 js - 然后进程停止。

以上是一个相当复杂的解决方案*（并且可能因为它依赖于 JavaScript*，所以可能只在真正需要或目标受众可以被锁定时才考虑。

作为非 js 解决方案，您可以依赖轮询方法并设置元刷新框架。然而，这可能会让旧版本 Internet Explorer 的用户为不断的“点击”而疯狂。更不用说解决方案相当不雅。

# php - 访问控制允许来源语法

> ID：12744278
> 
> 赞同：11
> 
> 时间：2012-10-05T10:25:51.850
> 
> 标签：php, ajax, http, cross-domain, cors

我想允许来自*from.example.com 的所有子域的跨域*资源共享。*因此，我在subdomain1.to.example.com*的页面中添加了如下所示的跨域资源共享标头。

```
<?php header('Access-Control-Allow-Origin: *.from.example.com'); 
```

我尝试使用 ajax访问页面表单*subdomain1.from.example.com 。*我没有得到回应。所以我只是更改了上面的标题，如下所示。

```
<?php header('Access-Control-Allow-Origin: http://subdomain1.from.example.com'); 
```

它仅适用于*subdomain1.from.example.com*。

第一个标题有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T15:13:31.460

`Access-Control-Allow-Origin`标题中不允许使用通配符。它必须是完全匹配的。您可以通过将值设置为 来允许所有域，或者如果请求标头的值与您允许的域之一匹配，则`*`有条件地回显请求标头的值。`Origin`

请注意，[Origin 规范允许](https://www.rfc-editor.org/rfc/rfc6454#section-7.1)使用空格分隔多个来源。但是我不确定这是否适用于`Access-Control-Allow-Origin`标题。可能值得一试。

# c# - 在 CredentialPicker 类中填充凭据

> ID：12744279
> 
> 赞同：1
> 
> 时间：2012-10-05T10:25:56.483
> 
> 标签：c#, .net-4.5

我正在使用 CredentialPicker 类从用户那里获取登录详细信息，然后使用 PasswordVault 类将这些详细信息存储到系统中。到现在为止还挺好。

那么是否有可能在存储凭据后，可以启用 CredentialPicker 以显示用户名的下拉列表，并且当用户选择用户名时，密码字段会自动填充？这些用户名和密码字段都可以从 PasswordVault 中检索。

我想下一个最好的办法是自动填充上次登录用户的用户名和密码字段并将其显示给用户，但我似乎无法在 CredentialPicker 类中找到任何选项来执行此操作。

以上是否有可能

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:41:08.670

> 我想接下来要做的最好的事情是自动填充上次登录用户的用户名和密码字段并将其显示给用户，但我似乎无法在 CredentialPicker 类中找到任何选项来执行此操作。

我认为这可以通过执行以下操作来完成：

1.  每次使用 时`CredentialPicker`，存储生成的`CredentialPickerResult.Credentials`属性值。
2.  设置时`CredentialPickerOptions`，将`PreviousCredential`值设置为此值。

有关详细信息，请参阅[使用 HTML CSS 和 JavaScript 编写 Windows 8 应用程序](http://www.scribd.com/doc/126431216/330/The-Credential-Picker-UI)。

# c++ - 如何在 C++ 中将整数存储到数组中？

> ID：12744281
> 
> 赞同：0
> 
> 时间：2012-10-05T10:26:00.730
> 
> 标签：c++

我的程序将采用如下行： 1, 5, 6, 7 然后它将每个整数存储到一个数组中。

我认为，起初输入应该作为字符串。但是我怎么能用逗号和空格分隔符来分割它呢？那么它将如何以整数形式存储在数组中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:31:16.477

对于拆分，您可以使用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)and [`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)。`str.find(", ")`例如在循环中调用，用 . 分割字符串`substr`。

对于存储，你不应该使用数组，你应该使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

要将子字符串转换为整数，请参见例如[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:24:08.340

除了*Joachim*的回答（并且鉴于您的问题没有被偶然标记为 C++11），最通用的方法可能是使用正则表达式：

```
#include <regex>
#include <vector>
#include <algorithm>
#include <iterator>

std::vector<int> parse(const std::string &str)
{
    //is it a comma-separated list of positive or negative integers?
    static const std::regex valid("(\\s*[+-]?\\d+\\s*(,|$))*");
    if(!std::regex_match(str, valid))
        throw std::invalid_argument("expected comma-separated list of ints");

    //now just get me the integers
    static const std::regex number("[+-]?\\d+");
    std::vector<int> vec;
    std::transform(std::sregex_iterator(str.begin(), str.end(), number), 
                   std::sregex_iterator(), std::back_inserter(vec), 
                   [](const std::smatch &m) { return std::stoi(m.str()); });
    return vec;
} 
```

它可以根据您的需要进行调整，例如，如果您只需要正数、每个逗号后只需要一个空格，或者逗号前没有空格，但总体方法应该是明确的。但是对于您的特定需求，这整个事情可能有点过头了，而*Joachim*的手动解析方法可能更适合。

# r - 如何处理列名中的空格？

> ID：12744282
> 
> 赞同：35
> 
> 时间：2012-10-05T10:26:06.377
> 
> 标签：r, ggplot2

我知道如果变量名中没有空格，这是首选。我有一种需要出版质量图表的情况，因此轴和图例需要具有格式正确的标签，即带有空格。因此，例如，在开发中，我可能有名为“Pct.On.OAC”和 Age.Group 的变量，但在我的最终情节中，我需要出现“% on OAC”和“Age Group”：

```
'data.frame':   22 obs. of  3 variables:
 $ % on OAC           : Factor w/ 11 levels "0","0.1-9.9",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ Age Group          : Factor w/ 2 levels "Aged 80 and over",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Number of Practices: int  47 5 33 98 287 543 516 222 67 14 ... 
```

但是当我尝试绘制这些时：

```
ggplot(dt.m, aes(x=`% on OAC`,y=`Number of Practices`, fill=`Age Group`)) +
    geom_bar()
) 
```

没问题。但是当我添加一个方面时：

```
ggplot(dt.m, aes(x=`% on OAC`,y=`Number of Practices`, fill=`Age Group`)) +
    geom_bar() +
    facet_grid(`Age Group`~ .) 
```

我得到`Error in`[.data.frame`(base, names(rows)) : undefined columns selected`

如果我更改`Age Group`为`Age.Group`then 它可以正常工作，但正如我所说，我不希望点出现在标题图例中。

所以我的问题是：

1.  是否有解决方面问题的解决方法？
2.  当我希望最终情节包含它们时，是否有更好的通用方法来处理变量名中的空格（和其他字符）问题？我想我可以手动覆盖它们，但这似乎很麻烦。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T11:28:31.833

您问“是否有更好的通用方法来处理变量名中的空格（和其他字符）问题”，是的，有一些：

*   只是不要使用它们，因为您在这里所经历的事情会破裂
*   使用该`make.names()`函数创建安全名称；这也被 R 用于创建标识符（例如，通过使用下划线表示空格等）
*   如果必须，请使用反引号保护不安全的标识符。

最后两点的例子：

```
R> myvec <- list("foo"=3.14, "some bar"=2.22)
R> myvec$'some bar' * 2
[1] 4.44
R> make.names(names(myvec))
[1] "foo"      "some.bar"
R> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-05T11:35:18.833

这是包中的一个“错误”，`ggplot2`原因是`as.data.frame()`内部 ggplot2 函数中的函数`quoted_df`将名称转换为语法上有效的名称。在原始数据框中找不到这些语法上有效的名称，因此出现错误。

提醒你 ：

**语法上有效的名称由字母、数字和点或下划线字符组成，并以字母或点开头（但点后面不能跟数字）**

这是有原因的。ggplot 允许您使用 设置标签也是有原因的`labs`，例如使用以下具有有效名称的虚拟数据集：

```
X <-data.frame(
  PonOAC = rep(c('a','b','c','d'),2),
  AgeGroup = rep(c("over 80",'under 80'),each=4),
  NumberofPractices = rpois(8,70)
  ) 
```

您可以在最后使用实验室来使此代码正常工作

```
ggplot(X, aes(x=PonOAC,y=NumberofPractices, fill=AgeGroup)) +
  geom_bar() +
  facet_grid(AgeGroup~ .) + 
  labs(x="% on OAC", y="Number of Practices",fill = "Age Group") 
```

生产

![enter image description here](../Images/2fad61ed748db1179166c6ce61fcfecd.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-26T02:07:41.887

多词列名的一个简单解决方案是简单地用下划线分隔它们。与其他约定相比，它具有一些优势：

*   `_`列名中的下划线有效
*   并且下划线分隔单词以提高可读性
*   Camelcase 可能很难阅读（考虑`s`vs`S`和`w`vs `W`- 相似的字母可能会导致混淆，这可能是有问题的，因为 R*区分*大小写）
*   `.`在列名中`data.test`使用句点（如果有人习惯于阅读其他语言（如 ruby​​ 或 python），则`.test`在对象上调用该方法）`data`
*   在列名中使用空格是有效的，但是在引用这些列时，需要用反引号将列名括起来，即 ` 符号
    *   例如`iris[ ,` 萼片长度`]

**TL;DR** Use the underscore to separate words in column names and you shouldn't have any problems (avoid spaces in column names, and if you data already has some, surround the full column name with backticks ` when referring to it in functions)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-03-07T13:57:59.960

```
library("data.table", lib.loc = "~/R/win-library/3.5")

names(inv01)

[1] "INV_YEAR"  "TREE_NO"   "DBH 2019"  "HT 2019" 

inv01tmp<-inv01[,list(DBH=`DBH 2019`,HT=`HT 2019`)] 
```

[在此处输入图像描述](https://i.stack.imgur.com/mQx4Q.png)

# android - 在android中选择微调器时抛出错误

> ID：12744287
> 
> 赞同：3
> 
> 时间：2012-10-05T10:26:15.453
> 
> 标签：android, android-layout

我对android比较陌生。

当我单击手机上的微调器时，它会抛出此错误：

```
android.view.windowmanager$badtokenexception unable to add window --token null is not for an application 
```

我的代码

```
List<String> list = new ArrayList<String>();
            list.add("Character");
            list.add("Numeric");
            list.add("Email");
            ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(CreateSteps.this,android.R.layout.simple_spinner_item, list);  

            LinearLayout spinnerHolder = new LinearLayout(getApplicationContext());
            spinnerHolder.setOrientation(LinearLayout.HORIZONTAL);
            spinnerHolder.setLayoutParams(
                    new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.MATCH_PARENT, 
                        LinearLayout.LayoutParams.WRAP_CONTENT, 1f));
                final Spinner newSpinner = new Spinner(getApplicationContext());
                allSpns.add(newSpinner);
                newSpinner.setLayoutParams(
                    new Spinner.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 
                        ViewGroup.LayoutParams.WRAP_CONTENT));
                newSpinner.setAdapter(dataAdapter);

                rAlign.addView(spinnerHolder);
                spinnerHolder.setId(MY_BUTTON);
                MY_BUTTON++;
                spinnerHolder.addView(newSpinner); 
```

我尝试在运行 android 2.3 的手机上实现代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:27:32.313

问题就在这里，

```
final Spinner newSpinner = new Spinner(getApplicationContext()); 
```

您需要传递 Activity 的上下文，而不是传递应用程序上下文，

```
final Spinner newSpinner = new Spinner(ActivityName.this); 
```

# android - Twitter API 集成相关

> ID：12744296
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:26:49.383
> 
> 标签：android, twitter

我如何在 android 应用程序中使用 twitter api？我正在 Twitter 上创建一个应用程序，我该如何使用它？推特应用程序该怎么做？关于 twitter api 教程的任何建议

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:31:28.493

您可以查看[本教程，了解如何使用](http://www.mobisoftinfotech.com/blog/android/1089/)[JTwitter](http://www.winterwell.com/software/jtwitter.php)库将 Twitter 集成到 Android 应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:39:27.510

请参阅这是 twitter 的一个很好的例子。它会为你工作。[在这里](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)！

# magento-1.5 - 主页上的网格模式 - Magento

> ID：12744297
> 
> 赞同：0
> 
> 时间：2012-10-05T10:26:50.773
> 
> 标签：magento-1.5, magento-1.6, magento-1.7, magento

我刚刚开发了一个商店，每次添加新商品时，它都会显示在主页上。那很完美！但问题是它以列表模式显示产品，我想使用网格模式。

我在 System->Configuration->Catalog 上指定了唯一的网格模式，但是当我显示目录时它可以工作，但是当我转到主页时，它会以列表模式显示产品。

我的主页上也有这段代码：

```
{{block type="catalog/product_list" category_id="3" num_products="6" template="catalog/random.phtml"}} 
```

但如果我手动将其更改为 product_grid 它不起作用。我想可能是因为我必须在某个地方的代码上手动更改它，而不是在 CMS 上，但我不知道在哪里......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:35:10.377

不确定，但试试：

```
{{block type="catalog/product_list" category_id="3" mode="grid" num_products="6" template="catalog/random.phtml"} 
```

# bash - 从 bash 脚本启动/停止 jboss 7.1 服务器

> ID：12744298
> 
> 赞同：1
> 
> 时间：2012-10-05T10:26:55.610
> 
> 标签：bash, jboss7.x

我是 bash 脚本的新手。我知道启动/停止 jboss 服务器的基本命令，即分别为“service jboss start”/“service jboss stop”，但我不知道如何从 bash 脚本启动/停止它。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:09:41.450

进入解压 jboss 的 'bin' 目录，然后简单地从 shell 运行它：

```
./standalone # to run in foreground (use Ctrl-C to stop)
or
./standalone 2>&1 > jboss.log &  # to run jboss in background, use ps & kill command to stop 
```

在开始之前，检查和编辑standalone.conf 中的所有设置，包括 JAVA_HOME

要将 jboss start 设置为 Linux 服务，请查看 [此处](http://www.mastertheboss.com/jboss-configuration/run-jboss-as-service-howto)

# aviarc - 更改提交按钮的颜色

> ID：12744299
> 
> 赞同：2
> 
> 时间：2012-10-05T10:27:05.580
> 
> 标签：aviarc

我正在尝试更改提交按钮上默认绿色的颜色。当鼠标悬停在按钮上时，我正在尝试更改绿色边缘，而在单击时将绿色背景更改为**蓝色**。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:52:40.803

多伦多按钮已经内置了这些主题：黑色、蓝色、绿色、红色和黄色。例如，如果您`class="blue"`在按钮上指定，它将变为蓝色。这些主题只是指定了 button.png 和 button_hrep.png 文件的替代版本。

假设您已经复制了默认的 Toronto 主题，并且您拥有包含`themes/button/blue-highlight/`按钮图像文件的备用版本的文件夹，您可以将以下内容添加到主题的 button.css 中：

```
/* "blue_highlight" - changes the borders and background images of the button to use different images */
.$URN$_button-blue_highlight .button-top-left,
.$URN$_button-blue_highlight a:hover span.button-top-left,
.$URN$_button-blue_highlight a:focus span.button-top-left,
.$URN$_button-blue_highlight a:active span.button-top-left,
.$URN$_button-blue_highlight span.button-disabled-span span.button-top-left,
.$URN$_button-blue_highlight .button-top-right,
.$URN$_button-blue_highlight a:hover span.button-top-right,
.$URN$_button-blue_highlight a:focus span.button-top-right,
.$URN$_button-blue_highlight a:active span.button-top-right,
.$URN$_button-blue_highlight span.button-disabled-span span.button-top-right,
.$URN$_button-blue_highlight .button-bottom-left,
.$URN$_button-blue_highlight a:hover span.button-bottom-left,
.$URN$_button-blue_highlight a:focus span.button-bottom-left,
.$URN$_button-blue_highlight a:active span.button-bottom-left,
.$URN$_button-blue_highlight span.button-disabled-span span.button-bottom-left,
.$URN$_button-blue_highlight .button-bottom-right,
.$URN$_button-blue_highlight a:hover span.button-bottom-right,
.$URN$_button-blue_highlight a:focus span.button-bottom-right,
.$URN$_button-blue_highlight a:active span.button-bottom-right,
.$URN$_button-blue_highlight span.button-disabled-span span.button-bottom-right {
    background-image: url(blue-highlight/button.png);
}
.$URN$_button-blue_highlight a:hover span.button-top-middle,
.$URN$_button-blue_highlight a:focus span.button-top-middle,
.$URN$_button-blue_highlight a:active span.button-top-middle,
.$URN$_button-blue_highlight .button-top-middle,
.$URN$_button-blue_highlight span.button-disabled-span span.button-top-middle,
.$URN$_button-blue_highlight .button-bottom-middle,
.$URN$_button-blue_highlight a:hover span.button-bottom-middle,
.$URN$_button-blue_highlight a:focus span.button-bottom-middle,
.$URN$_button-blue_highlight a:active span.button-bottom-middle,
.$URN$_button-blue_highlight span.button-disabled-span span.button-bottom-middle {
    background-image: url(blue-highlight/button_hrep.png);
} 
```

[这是一个添加`blue_highlight`类](http://cl.ly/3s1n022Z312r)的示例主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:41:31.723

为了扩展/更新主题，您需要按照以下步骤操作：

1.  在应用程序目录中创建“主题”目录

2.  在该“主题”目录中创建“按钮”目录

3.  转到“aviarc-data/widgets”目录并找到小部件包的最新版本，类似于“com.aviarc.toronto.widget.core-NNN-vYYYYMMDD.jar”

4.  您需要从该存档中提取相关小部件的主题部分。在您的场景中，您需要将“\metadata\widgets\button\theme”目录的内容直接提取到“themes\button”目录中。

5.  现在您可以对 CSS 和实际图像进行任何调整，即更改颜色、完全替换它们等。

# php - 如何从 C 运行一些 PHP 代码

> ID：12744301
> 
> 赞同：1
> 
> 时间：2012-10-05T10:27:10.803
> 
> 标签：php, c, linux

我有以下代码可以正常工作。

```
 FILE *pipe_fp;
  if((pipe_fp = popen("php", "w")) == NULL) {
    perror("popen(PHP)");
    exit(1);
  }

  fputs("<?php echo process('xx'); ?>", pipe_fp);
  int ret = pclose(pipe_fp);
  if(WIFEXITED(ret))
    printf("%d\n", WEXITSTATUS(ret)); 
```

问题是当我尝试这样的事情时：

```
// up to this point i am starting a socket servers and wait for clients
int bSize;
int nSize;
char buffer[MAXBUF+1];
char receive[MAXBUF+1];
while(1) {
  bSize = recv(new_fd, buffer, MAXBUF, 0);
  if(bSize > 0) {
    buffer[bSize] = '\0';
    strcat(receive, buffer);
  }
}

// I rote this part based on this post: http://stackoverflow.com/questions/1383649/concatenating-strings-in-c-which-method-is-more-efficient
char * first= "<?php echo process('";
char * second = "'); ?>";
char * code = NULL;
asprintf(&code, "%s%s%s", first, receive, second);

// the above code somes here, i just copied the part that has changed
fputs(code, pipe_fp); 
```

我尝试了许多其他示例，都导致失败。我在 C 3 天大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:36:01.077

您可以不使用临时文件，而是启动 php 进程并将脚本传递给 stdin，从 stdout 获取结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:44:49.213

您可能希望使用`system()`可以启动 PHP 并运行脚本的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:00:19.060

我有一个替换标准输入的代码：

```
int spipe[2];
if( pipe(spipe) == -1 )
    return 0;
int pid = fork();
if( pid == -1 )
    return 0;
if( !pid )
{
    close(spipe[1]);
    dup2(spipe[0], 0); //dup2(spipe[0], stdin);
    if( execl(PROGRAM_NAME, PROGRAM_NAME, PROGRAM_PARAM, NULL) != 0 )
        exit(1);
}
close(spipe[0]); 
```

您可以以相同的方式将 stdout 替换为另一个管道。

# java - Intellij IDEA Java 类不会在保存时自动编译

> ID：12744303
> 
> 赞同：205
> 
> 时间：2012-10-05T10:27:24.683
> 
> 标签：java, jakarta-ee, intellij-idea, jrebel

昨天我从 Eclipse 切换到 IntelliJ IDEA。

我也将 JRebel 与 WebSphere Server 7 一起使用。

现在一切似乎都运行良好，除了**当我修改**Java 文件并**点击 save**时，IntelliJ**不会**重新编译该文件，以便让 JRebel 拾取它。

Eclipse“**自动构建**”特性解决了这个问题。

在 IntelliJ IDEA 中，我必须点击`CTRL`++重新编译相关类以供 JRebel 拾取`SHIFT`。`9`如果对**两个文件**进行了更改，我必须**对每个文件都执行此操作，**并且由于 IntelliJ 使用全部保存机制，因此很难知道要手动重新编译什么，而我也不是很感兴趣。

有没有办法让 IntelliJ 自己**做到这一点**？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-10-05T10:35:56.670

# 更新

对于 IntelliJ IDEA 12+ 版本，如果我们使用外部编译器选项，我们可以自动构建已编辑的源代码。唯一需要的是检查选项“*自动构建项目*”，位于“*编译器*”设置下：

[![编译器设置](../Images/a858fb179c343c6c30e766780db98775.png)](https://i.stack.imgur.com/Wj0TX.png)

此外，如果您想在应用程序运行时进行热部署，或者如果您使用的是 spring boot devtools，您也应该启用`compiler.automake.allow.when.app.running`from registry。这将自动编译您的更改。

对于高于 2021.2 的版本，我们需要选中“即使 id 开发应用程序当前正在运行也允许自动启动”选项： [![在此处输入图像描述](../Images/cd15aa58a88c4e7050b5896abf5266fd.png)](https://i.stack.imgur.com/Spv3R.png)

对于早于 2021.2 的版本：

使用`Ctrl`+ `Shift`+ `A`(或`⌘</kbd>+`Shift`+`A` on Mac) type `Registry` once the registry windows is open, locate and enable `compiler.automake.allow.when.app.running`, see here:`

[![在此处输入图像描述](../Images/9bc7a63baf2de04be555e0a60000885c.png)](https://i.stack.imgur.com/piDMv.png)

* * *

对于 12 之前的版本，您可以使用 *EclipseMode* 插件使 IDEA 自动编译保存的文件。

有关更多提示，请参阅[“从 Eclipse 迁移到 IntelliJ IDEA”](https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html)指南。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2016-04-24T19:01:08.460

请按照以下**两个**步骤操作：

### 1 - 从编译器启用 Automake

*   按：`ctrl`+ `shift`+ `A`（对于 Mac`⌘</kbd> + `shift` + `A`)`
*   类型：`make project automatically`
*   打：`Enter`
*   启用`Make Project automatically`功能

### 2 - 在应用程序运行时启用 Automake

*   按：`ctrl`+ `shift`+ `A`（对于 Mac`⌘</kbd> + `shift` + `A`)`
*   类型：`Registry`
*   找到密钥`compiler.automake.allow.when.app.running`并**启用它**或单击它旁边**的复选框**

注意：现在重新启动您的应用程序:)

注意：这也应该允许使用 spring boot devtools 实时重新加载。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2012-10-05T10:36:06.587

# 警告

**Eclipse Mode**插件已过时，并且与最近的 IDEA 12+ 版本不兼容。如果您安装它，IDE 将在每次文件更改时挂起，并且响应速度极慢。

* * *

IntelliJ IDEA 不使用自动构建，它即时检测错误，而不是通过编译器。[与 Eclipse 模式类似， IDEA 12](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)将提供：

![自动制作项目](../Images/bafff8a7cd383946f6c05eaba395e723.png)

使用`Build`| `Make`，它调用增量生成过程，该过程将只编译更改和依赖的文件（它非常快）。

还有一个[FAQ 条目](http://devnet.jetbrains.net/docs/DOC-1122)可能会有所帮助。

**自动生成功能更新**：运行/调试配置运行时，`Make project automatically`无效。磁盘上的类只会在`Build`| `Make`. 这是核心设计决策，因为我们认为磁盘上的类更改应始终在用户的控制之下。自动生成不是 Eclipse 功能的模仿者，它的工作方式不同，它的主要目的是节省等待类在真正需要时准备就绪的时间（在运行应用程序或测试之前）。自动生成不会取代您仍然需要触发的显式编译，就像在这个问题中描述的情况一样。如果您正在寻找不同的行为，上面常见问题解答中链接的 EclipseMode 插件将是更好的选择。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2012-12-18T22:06:33.147

您可以通过键盘映射`ctrl+s`保存并一步编译。转到键盘映射设置并搜索`Compile`.

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-03-02T08:24:54.257

实际上**没有区别**，因为两者都需要单击一次：

*   *Eclipse*：手动保存，自动编译。
*   *IntelliJ*：自动保存，手动编译。

**最简单的解决办法**就是习惯它。因为当您将大部分时间都花在 IDE 中时，最好在其中一个中养成快速的习惯，而不是在其中几个中养成缓慢的习惯。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-01-23T19:15:39.697

我最终录制了一个**宏**以一步保存和编译，并`Ctrl+s`对其进行键盘映射。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2015-02-27T12:18:07.993

我设法使用宏解决了这个问题。

我开始录制宏：

*   点击编辑-宏-开始宏录制
*   单击文件 - 全部保存
*   点击构建 - 制作项目
*   点击编辑-宏-停止宏录制

将其命名为有用的名称，例如“SaveAndMake”。

现在只需删除 Save all 键绑定，并将相同的键绑定添加到您的宏！

所以现在，每次我保存时，它都会保存并进行脏编译，jRebel 现在可以正确检测所有更改。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-02-02T03:42:42.783

**请仔细按照以下步骤启用它。**

1) 使用 SB V1.3 创建 Spring Boot 项目并将“Devtools”(1*) 添加到依赖项

2）调用Help->Find Action...并输入“Registry”，在对话框中搜索“automake”并启用条目“ *compiler.automake.allow.when.app.running* ”，关闭对话框

3) 在 Settings->Build, Execution, Deployment->Compiler "Make project automatically" 中启用后台编译

4) 打开 Spring Boot 运行配置，如果一切配置正确，您应该会收到警告消息

5) 运行您的应用程序，即时更改您的课程

请报告您的经验和问题作为对此问题的评论。

[点击这里获取更多信息](https://youtrack.jetbrains.com/issue/IDEA-141638#u=1474048879057)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-23T19:56:49.610

Intellij 在其他模块遇到编译问题时安静地失败，然后不执行自动构建。所以检查你的`Problems`窗口

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-05-04T05:29:44.560

我有同样的问题，并且在 intellij 中还有一个问题文件图标，所以**我删除**了`.idea`文件夹并重新导入项目解决了我的问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-10-09T17:45:19.797

对于使用新`Intellij`版本但找不到的人`compiler.automake.allow.when.app.running`

[https://youtrack.jetbrains.com/issue/IDEA-274903](https://youtrack.jetbrains.com/issue/IDEA-274903)

基本上该选项现在已移至`Settings -> Advanced Settings -> Compiler`（检查允许自动制作选项）

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-04-29T11:01:01.650

在受此影响的 Maven 项目中，唯一对我有用的是在我的单元测试的运行配置中添加“测试编译”目标。非常笨拙的解决方案，但它有效。

[![在此处输入图像描述](../Images/a485e5edc728b78e1520e9267195dbed.png)](https://i.stack.imgur.com/U83X8.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-12-26T21:12:36.003

我遇到过同样的问题。我使用的是“省电模式”，它可以防止增量编译并显示编译错误。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-10T15:58:15.360

我遇到过同样的问题。我认为检查您的课程是否可以编译是合适的。单击重新编译（默认为 Ctrl+Shift+F9）。如果它不工作，那么你必须调查它为什么不编译。

在我的情况下，代码没有自动编译，因为编译时存在隐藏错误（它们没有显示在任何地方的日志中，并且 maven clean-install 正在工作）。根本原因是项目结构 -> 模块配置不正确，因此 Intellij Idea 无法根据此配置构建它。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-03-01T15:43:31.840

使用 Reformat and Compile 插件（灵感来自 Alexandre DuBreuil 的 Save Actions 插件）：

[https://plugins.jetbrains.com/plugin/8231?pr=idea_ce](https://plugins.jetbrains.com/plugin/8231?pr=idea_ce)

目前我只提供一个 jar 文件，但这是代码中最重要的部分：

```
private final static Set<Document> documentsToProcess = new HashSet<Document>();
private static VirtualFile[] fileToCompile = VirtualFile.EMPTY_ARRAY;

// The plugin extends FileDocumentManagerAdapter.
// beforeDocumentSaving calls reformatAndCompile
private static void reformatAndCompile(
        @NotNull final Project project,
        @NotNull final Document document,
        @NotNull final PsiFile psiFile) {
    documentsToProcess.add(document);
    if (storage.isEnabled(Action.compileFile) && isDocumentActive(project, document)) {
        fileToCompile = isFileCompilable(project, psiFile.getVirtualFile());
    }
    ApplicationManager.getApplication().invokeLater(new Runnable() {
        @Override
        public void run() {
            if (documentsToProcess.contains(document)) {
                documentsToProcess.remove(document);
                if (storage.isEnabled(Action.optimizeImports)
                        || storage.isEnabled(Action.reformatCode)) {
                    CommandProcessor.getInstance().runUndoTransparentAction(new Runnable() {
                        @Override
                        public void run() {
                            if (storage.isEnabled(Action.optimizeImports)) {
                                new OptimizeImportsProcessor(project, psiFile)
                                    .run();
                            }
                            if (storage.isEnabled(Action.reformatCode)) {
                                new ReformatCodeProcessor(
                                        project,
                                        psiFile,
                                        null,
                                        ChangeListManager
                                            .getInstance(project)
                                            .getChange(psiFile.getVirtualFile()) != null)
                                                .run();
                            }
                            ApplicationManager.getApplication().runWriteAction(new Runnable() {
                                @Override
                                public void run() {
                                    CodeInsightUtilCore.forcePsiPostprocessAndRestoreElement(psiFile);
                                }
                            });
                        }
                    });
                }
            }

            if (fileToCompile.length > 0) {
                if (documentsToProcess.isEmpty()) {
                    compileFile(project, fileToCompile);
                    fileToCompile = VirtualFile.EMPTY_ARRAY;
                }
            } else if (storage.isEnabled(Action.makeProject)) {
                if (documentsToProcess.isEmpty()) {
                    makeProject(project);
                }
            } else {
                saveFile(project, document, psiFile.getVirtualFile());
            }
        }
    }, project.getDisposed());
}

private static void makeProject(@NotNull final Project project) {
    ApplicationManager.getApplication().invokeLater(new Runnable() {
        @Override
        public void run() {
            CompilerManager.getInstance(project).make(null);
        }
    }, project.getDisposed());
}

private static void compileFile(
        @NotNull final Project project,
        @NotNull final VirtualFile[] files) {
    ApplicationManager.getApplication().invokeLater(new Runnable() {
        @Override
        public void run() {
            CompilerManager.getInstance(project).compile(files, null);
        }
    }, project.getDisposed());
}

private static void saveFile(
        @NotNull final Project project,
        @NotNull final Document document,
        @NotNull final VirtualFile file) {
    ApplicationManager.getApplication().invokeLater(new Runnable() {
        @Override
        public void run() {
            final FileDocumentManager fileDocumentManager = FileDocumentManager.getInstance();
            if (fileDocumentManager.isFileModified(file)) {
                fileDocumentManager.saveDocument(document);
            }
        }
    }, project.getDisposed());
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-03-12T10:24:09.043

由于我的项目结构中有一个不必要的模块，它对我不起作用。我想这些测试是使用另一个模块执行的。

我不知道它是如何结束的，但删除它解决了问题。

确保您的运行/调试设置正在使用您正在使用自动保存构建的模块。

例如：查看模块

[![在此处输入图像描述](../Images/af506f880fb385735d1122fe7e6c52bd.png)](https://i.stack.imgur.com/adg8R.png)

您可以更改项目结构中的模块 - 模块

[![在此处输入图像描述](../Images/d623da319a4b0c0354c0edaf7c4fd606.png)](https://i.stack.imgur.com/glm8H.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-10-11T22:22:39.037

对于 Intellij 2021 或更高版本，您将找不到注册表项

> compiler.automake.allow.when.app.running

它已移至高级设置，如下面的屏幕截图所示

[![IntelliJ 高级设置截图](../Images/2668093147b07213066ed8e30da71796.png)](https://i.stack.imgur.com/HCZhp.png)

来源：[https ://youtrack.jetbrains.com/issue/IDEA-274903](https://youtrack.jetbrains.com/issue/IDEA-274903)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-08-30T15:30:53.887

编辑您的运行/调试配置，以便在启动之前选择构建选项

[![在此处输入图像描述](../Images/72c857f425b1d81d044be6737efe6e99.png)](https://i.stack.imgur.com/xAfFO.png)

选择构建选项后

[![在此处输入图像描述](../Images/42303ed7a7a5bbc7a2b0d70282f5ef37.png)](https://i.stack.imgur.com/ATtlH.png)

上面的解决方案在我的 JBehave 测试套件上工作时对我有用

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-05-07T02:56:59.843

我收到错误：一些 jars 不在类路径中。所以我只删除损坏的 jar 并执行以下步骤

```
1.Project >  Setting>Build,Execution,Deployment>Compiler>check build project automatically
2.CTRL+SHIFT+A find/search **registry** --Check for below param
compiler.automake.allow.when.app.running
compiler.automake.trigger.delay=500---According to ur requirement
3.Add devtool in pom.xml
         <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-devtools</artifactId>
            <optional>true</optional>
        </dependency>
4.Build ,If found any probelm while building ,saying some jar in not in class path.Just delete the corrupted jar
and re-build the project angain after sync with maven lib 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-07-14T02:37:19.443

没有足够的点来评论现有的答案，但类似于上面的一些人，我最后只是添加了一个宏和键盘映射来**Organize Imports / Format / SaveAll / FastReload(F9) / Synchronize**。

添加了同步，因为它似乎是我还可以看到由外部构建工具/观察者（即 webpack）修改的资源中的更新的唯一方法。

该过程比 Eclipse 慢 - 并且对于外部文件刷新通常必须多次运行该命令 - 但假设我可以忍受它。

# ms-access - 在 Access 中创建将 Null 值替换为 0 的数据透视图

> ID：12744308
> 
> 赞同：2
> 
> 时间：2012-10-05T10:27:44.997
> 
> 标签：ms-access, null, pivot-table, zero

我在 Access 中编写了一个查询，我想将其显示为数据透视图（线型）。

该查询具有以下字段：-

ProductDescription（列标题）、MonthName（行标题）、GoodsSold（数据）。

ProductDescription 字段从 ProductCodes 表中提取其数据。我根据 3 个描述性产品代码进行了查询。对于某些月份，ProductDescription 没有针对该月份的条目，这导致查询被透视时 GoodsSold 中的条目为空。

当查询在数据透视图视图中时，如何将这些 Null 值更改为 0，这几个月没有绘制数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:48:08.527

只要您在数据集中使用右连接或左连接，就可以使用 Nz 命令替换 GoodsSold 列，例如：

```
Nz([GoodsSold], 0) 
```

# typo3 - 错字3灵活内容元素中的可选字段元素

> ID：12744309
> 
> 赞同：0
> 
> 时间：2012-10-05T10:27:50.800
> 
> 标签：typo3, typoscript, templavoila

是否可以在 FCE（灵活内容元素）中添加可选字段元素？如果不是，当且仅当用户在 FCE 中输入该字段的值时，是否有可能维持 FCE 字段元素的映射？

而且我还想知道如何在 FCE 中包含插件或其他 FCE。

# javascript - 超链接需要两次点击才能执行一个javascript函数

> ID：12744312
> 
> 赞同：0
> 
> 时间：2012-10-05T10:28:04.720
> 
> 标签：javascript, jquery, html

我有一个超链接，我想对该超链接的点击事件执行一个函数。该功能本身有效，但问题是我需要单击两次才能执行该功能。

我试图谷歌但没有得到任何有效的东西。如果有人能指出我正在做的错误会很好...... :)

```
$("#btn_logout").click(function () {
             logout(); 

            }); 
```

这是链接

```
<a href="#" id="btn_logout">[Log off]</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:36:04.623

[忽略]您还需要阻止点击做明显的事情。

```
$("#btn_logout").click(function(e){
    e.preventDefault();
    e.stopPropagation();
}).dblclick(function() {
    logout(); 
}); 
```

[/忽视]

我完全弄错了。对不起这是我的错。

我认为这里的解决方案可以是

```
$("#btn_logout").bind('click', function(e){
    e.preventDefault();
    logout();
}); 
```

我通常绑定事件，即使它应该作为 .click 工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:32:12.670

尝试添加

> e.preventDefault();

```
$("#btn_logout").click(function (e) { 
e.preventDefault();
logout(); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:38:59.063

```
$("#btn_logout").click(function(e){
    e.preventDefault();
    e.stopPropagation();
    logout();
});​ 
```

# java - 意外类型 平均

> ID：12744314
> 
> 赞同：-4
> 
> 时间：2012-10-05T10:28:10.897
> 
> 标签：java

由于某种原因，命令提示符不断要求我输入，但我在**第 12 行**（总和 + 一）= 总和上放置了一个值。如果你们能帮助我确定它有什么问题，那就太棒了。

```
import java.util.Scanner;

public class FunnyAverage {
   public static void main(String[] args){          
   Scanner in = new Scanner(System.in);
   System.out.print("How many values to read? ");
   int top = in.nextInt();
   System.out.print("Enter Value: ");
   int one = in.nextInt();
   int number = 0;
   int sum = 0;
   (sum + one) = sum;

   while (number>top){
       while (one % 6 != 0&&one % 17 != 0) {
           System.out.print("Enter Value: ");
           one = in.nextInt(); 
           number++;
       }
   }

   if (sum/top != 0){
       System.out.print("Average: " + sum/top);
   }
   System.out.print("None Divisible");
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:29:25.983

你的意思是：

```
sum = sum + one; // or sum += one; 
```

通过*command prompt*，我认为您实际上是指编译器（可以将其错误消息写入命令提示符）。错误消息将说明结果`(sum + one)`不是变量。

请参阅第[15.26 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)Java 语言规范的[赋值运算符，其中指出：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)

> 赋值运算符的第一个操作数的结果必须是变量，否则会发生编译时错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:33:43.777

```
(sum + one) = sum; 
```

这是不可能的。它应该是`sum = (sum + one);`或`sum +=one;`

# android - 覆盖android中的本机方法

> ID：12744315
> 
> 赞同：0
> 
> 时间：2012-10-05T10:28:16.590
> 
> 标签：android, android-ndk, android-library

我们可以覆盖android中的本机方法吗？除了扩展类/接口并实现其方法之外。
我们可以使用 .so 文件来覆盖原生方法吗？
例如。如果本机代码中有 methodA()，我们是否应该在 .so 文件中覆盖它。这样每次我们从android应用程序调用methodA（）时，它都会在我们的.so文件中调用methodA（）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:35:43.990

不可以。Dalvik VM 对于 JNI DefineClass() 调用不够兼容。因此，您要加载的任何覆盖都必须以 dex 格式开始。

此外，在应用程序不知情的情况下，无法将本机库“注入”到应用程序中。

但是，你可以通过反射来做很多复杂的事情——无论是从 Java 还是从 C。如果这段代码获得了 Activity 的句柄，它可以找到类 SharedPreferences 的字段并将其替换为类 ExtendedSharedPreferences 的新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:41:28.883

你能举一个你认为它是原生方法的例子吗？但是，答案是否定的。如果您可以在不更新 rom 的情况下自定义 android，那么自定义 rom 的目的是什么...

**编辑：** 对于您提到的特定情况。我会扩展 SharedPreferences 并覆盖所有需要的方法。

# php - 在我的网站上在线生成 PDF 时以 FPDF 命名 PDF 文件

> ID：12744316
> 
> 赞同：0
> 
> 时间：2012-10-05T10:28:17.977
> 
> 标签：php, filenames, fpdf

我正在使用 FPDF 在我的网站上动态生成 PDF 并将其通过电子邮件发送给用户。但是生成的 PDF 的名称包含斜杠和加号（+、/、\、[、]）等，因此会出现以下错误：

```
fopen:( Unable to find the file or directory ) 
```

一旦我删除斜线和大括号，PDF 就会成功生成并通过电子邮件发送。

需要处理文件名的解决方案吗？文件名是动态创建的，所以我无法更改它们？所以我认为我需要首先从 PDF 文件名中去除所有这些特殊字符，然后将其发送到 FPDF 输出。但是怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:38:14.257

你可以`urlencode`：

```
 file_put_contents(urlencode('asd#$%21234 /&11 /!@##$$%&&*()_'), 'test'); 
```

但是你会得到奇怪的字符。

或者你可以剥离并留下允许的字符

```
 file_put_contents(preg_replace('/[^A-Za-z0-9_\-]/', '','asd#$%21234 /&11 /!@##$$%&&*()_'), 'test'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:50:27.310

[OWASP ESAPI4PHP](http://code.google.com/p/owasp-esapi-php/source/browse/#svn/trunk)库为文件名和其他类型的数据提供了一些非常不错的消毒剂。

另请参阅**[文件名限制比较](http://en.wikipedia.org/wiki/Filename#Comparison_of_filename_limitations)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:31:20.957

我认为斜杠不能用于文件名，因为它也用于确定文件路径。例如，名为 foo/bar.php 的文件实际上是名为 bar.php 的文件，但位于 foo 文件夹中。

一种解决方法可能是首先创建 foo 目录。然后，当您请求“foo/bar.php”文件时，您将从 foo 目录中获得 bar.php 文件（未经测试）。

或者您可以删除所有不需要的字符。对于我的项目，我使用它来“规范化”文本：

$string = preg_replace('#[^a-z0-9]+#', '-', $string);

# asp.net - 使用Nant搭建部署asp.net、vb.net、framework 1.1

> ID：12744321
> 
> 赞同：0
> 
> 时间：2012-10-05T10:28:41.970
> 
> 标签：asp.net, .net, vb.net, build, nant

如何正确使用 Nant 构建和部署使用 asp.net、vb.net 和 .net framework 1.1 开发的 asp.net 项目？

我尝试使用此构建文件：

```
<?xml version="1.0" ?>
<project name="MyWebProj" default="build" basedir=".">
    <description>...</description>
    <property name="debug" value="true" overwrite="false"
    />
    <property name="basename" value="MyWebProj" />
    <target name="build">
        <mkdir dir="NantBIN" />
        <vbc target="library" output="NantBIN/${basename}.dll" debug="${debug}">
            <sources>
                <include name="*.vb" />
            </sources>
        </vbc>
    </target>
</project> 
```

我运行这个 bat 文件：

```
@echo off bin\nant -t:net-1.1 -buildfile:.MyWebProjPath pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:27:47.847

首先感谢大家的回答和建议。这就是我最终解决问题的方法。我将其用作构建文件：

```
<?xml version="1.0"?><project name="..." default="rebuild" basedir=".">
<target name="rebuild" depends="build">
    <call target="build.copy"/>
</target>
<target name="build" description="Build all targets.">
    <call target="build.project"/>
</target>
<target name="build.project">
    <solution configuration="${configuration}" solutionfile="${solutionName}" outputdir="${expected.output}">
        <webmap>
            <map url="${webproj.url}" path="${webproj.name}" />
        </webmap>
    </solution>
</target>
<target name="build.copy">
    <copy  todir="${path.to.deploy}" overwrite="true">
        <fileset basedir=".">
            ...
            <include name="**\*.asp" />
            <include name="**\*.aspx" />
            <include name="**\*.css" />
            <include name="**\*.js" />
            ...
        </fileset>
    </copy>
</target> 
```

我运行这个 bat 文件（设置 -t:net-1.1 以指定 .net 框架版本很重要）：

```
bin\nant -t:net-1.1 -buildfile:.MyWebProjPath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:39:06.547

您可以参考下面的链接，这些链接为您逐步解释了过程。

[http://www.codeproject.com/Articles/123713/Automate-Publishing-a-WebSite-into-IIS-using-MSDep](http://www.codeproject.com/Articles/123713/Automate-Publishing-a-WebSite-into-IIS-using-MSDep)

[http://www.4guysfromrolla.com/articles/120104-1.aspx](http://www.4guysfromrolla.com/articles/120104-1.aspx)

# c++ - 如何在 Windows C++ 上分离线程

> ID：12744324
> 
> 赞同：5
> 
> 时间：2012-10-05T10:28:48.710
> 
> 标签：c++, windows, multithreading

如何在`C++`. `Posix`我们有`pthread_detach(pthread_self());`. 如何在 Windows 环境中实现这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T12:15:35.303

假设您正在使用[_beginthreadex](http://msdn.microsoft.com/en-us/library/kdzttdcb.aspx)或`CreateThread`创建线程，您只需要使用[CloseHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211.aspx)关闭线程句柄。

# yii - Yiiframework 无法加载 js & css 资源

> ID：12744325
> 
> 赞同：1
> 
> 时间：2012-10-05T10:28:50.147
> 
> 标签：yii, centos5

我的 Yii 应用程序在 Windows Server 上运行良好。但是当我将它部署在 Centos 服务器上时，无法加载 js 和 css 文件。我收到 404 错误，CHttpException。

```
Source code to load resource:
     Yii::app()->clientScript->registerCssFile(Yii::app()->theme->baseUrl.'/css/custom.css');
     Yii::app()->clientScript->registerScriptFile(Yii::app()->theme->baseUrl.'/js/jquery-1.7.1.min.js'); 
```

此外，我在同一台服务器上部署了 4 个 Yii Web 应用程序。其他的工作得很好。有谁知道原因？不发布主题文件夹的 Centos 可能是安全错误吗？

请帮助我。

TIA,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:42:38.673

我认为这是权限问题。检查文件和文件夹的权限（网络服务器进程可以访问它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:47:39.067

解决了。我猜是因为文件权限。- 第一次创建文件夹时，复制源文件，然后授予网络服务器用户权限。它不像上面那样工作。- 第二次：我创建根文档，授予网络服务器用户权限，然后复制源代码，它可以工作。

# ios - NSRefreshedObjectsKey 的用途

> ID：12744328
> 
> 赞同：3
> 
> 时间：2012-10-05T10:28:59.787
> 
> 标签：ios, cocoa, core-data, appkit

在`NSManagedObjectContextObjectsDidChangeNotification`通知中，我有时会得到`NSRefreshedObjectsKey`密钥。

我理解[刷新](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/refreshObject%3amergeChanges%3a)的对象是从持久存储/缓存中重新获取对象。

那么是什么导致通知返回刷新的对象呢？对于插入、更新、删除等，这很明显，但是我必须对对象做什么才能让它出现在`NSRefreshedObjectsKey`键中？例如，它可能只是以某种方式被触摸（相同的值写入相同的键）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:36:24.867

如果您在对象上调用 '- (void)refreshObject:(NSManagedObject *)object mergeChanges:(BOOL)flag '，则该对象将包含在刷新的对象中。

我们使用多个线程管理对象上下文，在合并来自 bg 上下文的更改之前，我们使用“现有对象”实现所有更改的对象。这也会导致这些对象包含在“NSRefreshedObjectsKey”键中。

# javascript - JQuery：在ajax生成的事件上注册事件

> ID：12744329
> 
> 赞同：1
> 
> 时间：2012-10-05T10:29:03.843
> 
> 标签：javascript, ajax, jquery

通过ajax生成以下代码：

```
<div class="momento-rating-input">
    <div>Rate this post</div>
    <div>
        <input type="radio" name="rateit" value="3" style="margin: 0 0.5ex 3px;" class="ratems" />Good
        <input type="radio" name="rateit" value="2" style="margin: 0 0.5ex 3px;" class="ratems" />Average
        <input type="radio" name="rateit" value="1" style="margin: 0 0.5ex 3px;" class="ratems" />Bad
    </div>
</div> 
```

现在在 Javascript/JQuery 中，我需要清除选定的收音机。我尝试以下代码。

```
$('input[type="radio"]').each(function(){
    if($(this).hasClass('ratems')){
        $(this).checked = false;
    }
}); 
```

上面的代码不起作用。我知道我们应该使用 JQuery`live`或`on`函数在 AJAX 生成的元素上注册事件。

**但是，我不想注册任何事件，而是要清除不同事件中的单选按钮，即触发没有任何问题。**

我怎样才能清除那些单选按钮？

**少量上下文，如果需要**：此代码在灯箱上实现，按左/右键更改图像。对于新图像，`rating`应清除单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:37:59.780

您应该尝试替换`$(this).checked = false;`为`$(this).removeAttr('checked');`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:31:42.347

只需`checked`从元素中删除属性：

```
$('input[type="radio"].ratems').removeAttr("checked"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:41:28.563

您可以尝试取消选中带有类名的单选按钮`ratems`

```
$('input[type="radio"].ratems').prop('checked', false); 
```

而不是使用`$('input[type="radio"]').each(..)`

# python - writerow() 或 writerows() 循环

> ID：12744330
> 
> 赞同：2
> 
> 时间：2012-10-05T10:29:09.053
> 
> 标签：python, loops, csv

我有以下代码：

```
import csv
input_file = csv.reader(open('template.csv','r+')) #template.csv has 10 lines
output = open('output.csv', 'wb')
wr = csv.writer(output, quoting=csv.QUOTE_ALL)

elem = [1,2,3,4,5]

for i in elem:
    wr.writerows(input_file) 
```

由于文件 'template.csv' 有 10 行，我希望输出 10 x 5 行 - 但只出现 10 行。

如何嵌套 writerow/rows 循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:30:29.070

你`input_file`是一个迭代器，一旦用尽就不会为你倒回开始。将结果存储在列表中并写下：

```
input_file = csv.reader(open('template.csv','r+')) #template.csv has 10 lines
input_lines = list(input_file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T14:24:08.917

**writerrows**：将根据您在 csv.writer 中设置的规则创建一个 csv，例如

```
wr = csv.writer(csvfile, delimiter='\n') #this will output each element in input_file 
                                         #as a separate line

#Loop it 5 times you should have your 5 x 10 lines printed to the file
for i in elem[0:4]:
    wr.writerows(input_file) 
```

# openssl - bouncycastle 库中使用了哪个 OpenSSL 版本？

> ID：12744331
> 
> 赞同：2
> 
> 时间：2012-10-05T10:29:19.973
> 
> 标签：openssl, bouncycastle

我在 Android 中使用 BouncyCastle 库进行 OpenSSL 加密。我的库版本是 1.45。

我想知道库中使用了 OpenSSL 版本。任何人都可以帮助我如何找到它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-24T07:15:54.500

BouncyCastle 用 java 实现。

它根本不需要 OpenSSL。

bcpkix 中的 org.bouncycastle.openssl 包用于处理 OpenSSL 生成的 PEM 文件。

[https://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/openssl/package-summary.html](https://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/openssl/package-summary.html)

# jquery - jquery iphone itunes 滚动效果

> ID：12744335
> 
> 赞同：0
> 
> 时间：2012-10-05T10:29:34.807
> 
> 标签：jquery, iphone, html, css, itunes

滚动歌曲时，有没有办法复制 iPhone 在 iTunes 中的滚动效果？字母粘在屏幕顶部并被下一个推动或替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:45:47.740

请参阅[这个问题](https://stackoverflow.com/q/12219382/364869)，其中提到了一个完全符合您要求的[jsFiddle 演示。](http://jsfiddle.net/f3y9s/1/)

# asp.net - 将数据从 ASP.NET C# 中的代码传递到 ssrs 报告 (.rdl)，ProcessingMode=Remote

> ID：12744336
> 
> 赞同：1
> 
> 时间：2012-10-05T10:29:41.550
> 
> 标签：asp.net, c#-4.0, reporting-services, ssrs-2008, reportviewer

我可以看到已经有很多关于同一件事的问题被问到：

[以编程方式将数据源绑定到报表服务器中的 rdl - SSRS](https://stackoverflow.com/questions/2360992/binding-a-datasource-to-a-rdl-in-report-server-programmatically-ssrs)

[SSRS 使用 Xml 数据源 [WCF]，这是可能的，但它是否可取？](https://stackoverflow.com/questions/10447780/ssrs-using-xml-datasource-wcf-its-possible-but-is-it-advisable)

和许多其他人......

但是，我真正想要的是在我开始做某事之前得到您的宝贵意见，最终发现自己陷入了死胡同！

我们正在**BIDS SSRS 2008**环境、**VS 2010**中为 Web 应用程序开发报告。使用**ReportViewer** 10`ProcessingMode="Remote"`

到现在为止，一切都很好.. 将参数传递给报告，与 asp.net 集成等。我的意思是，通过 SQL 查询获取数据（有时通过参数过滤）。我可以使用存储过程，一切正常。

但是现在，有些报告需要根据**用户从前端（一个 GridView ）中选择的数据，在 asp.net 网页上**动态生成，然后在报告上显示该数据。

也就是说，如果用户**在 GridView 上选择 10 行**并单击打印按钮，那么**只有这 10 行**（以及其他一些特定于报表的数据）应显示在报表中。这就是我们现在正在升级的遗留系统中的内容。
当然，这不能仅仅通过传递参数来实现，因为GridView上的数据选择完全取决于用户，而且都是动态的。..我现在正在修复中！

那么，对于这些情况，最好的方法是什么？

**PS（编辑）**：那里有解决方案，但它们更适合**.rdlc**，我说的是**.rdl**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:54:52.670

最后我们像下面这样实现它。我想它可能对其他人有用。所以我发布了我的解决方案：
这可以通过实现**XML**
First convert your data into **XML**来完成，如下所示：

```
private void ConvertToXml(ref XmlDocument xm)
{
 const string header = @"<ENVELOPE>";
 var strenvelopes = "";
 GridItemCollection selectedRows;
 selectedRows = dgAddressList.SelectedItems;

if (selectedRows.Count > 0)
{
 foreach (GridItem item in dgAddressList.SelectedItems)
 {                 
  strenvelopes += @"<ADDRESS>" + 
  "<NAME>" + "<![CDATA[" + ((object[])(item.DataItem))[2].ToString() + "]]>" + "</NAME>" +
  "<CONTACT>" + "<![CDATA[" + ((object[])(item.DataItem))[1].ToString() + "]]>" + "</CONTACT>" +
  "<STREET>" + "<![CDATA[" + ((object[])(item.DataItem))[3].ToString() + "]]>" + "</STREET>" +
  "<SUBURBSTATE>" + "<![CDATA[" + ((object[])(item.DataItem))[4].ToString() + "]]>" + "</SUBURBSTATE>" +
  "</ADDRESS>";                  
  }
}

   const string footer = @"</ENVELOPE>";  

   var envelopes = header + strenvelopes + footer;
   xm.LoadXml(envelopes);
} 
```

您需要用**您自己的值****替换** 然后生成您的报告，如下所示：`((object[])(item.DataItem))[].ToString()`

 **```
private void GenerateReport()
{
       var xm = new XmlDocument();
       ConvertToXml(ref xm);
       var xml = xm.InnerXml.ToString();
       rptViewer = ucrvEnvelope.FindControl("rptViewer") as ReportViewer;
       if (rptViewer != null)
       {
           rptViewer.ProcessingMode = ProcessingMode.Remote;              
           rptViewer.ServerReport.ReportServerUrl = new Uri("http://localhost/MyReports");
           rptViewer.ServerReport.ReportPath = "/Reporting/rptEnvelope";
           rptViewer.PromptAreaCollapsed = true;
       }
        ReportParameter myParam = new ReportParameter("list", xml);
        rptViewer.ServerReport.SetParameters(new ReportParameter[] { myParam });
        rptViewer.ShowParameterPrompts = false;
        rptViewer.ShowBackButton = true;
        rptViewer.ServerReport.Refresh();
  } 
```

您应该在报告中**添加一个参数** **`"list"`**。因为我们将**`"list"`**通过以下数据集将整个 XML 内容传递给它，

**现在将处理这个*XML*的 Dataset ：**
*通常，*我们所做的就是你写一些*存储过程*或在数据集中写一些*查询*，因为我们是*XML*，它需要以 XML 方式处理 ，*写*下面的查询来处理XML*数据*
**`Query Type: Text`**

 *```
DECLARE @docHandle int DECLARE @xmlDocument varchar(max); DECLARE @listXML nvarchar(max)
SET @listXML = @list
SET @xmlDocument = @listXML EXEC sp_xml_preparedocument @docHandle OUTPUT, @xmlDocument
    SELECT * FROM OPENXML (@docHandle, N'/ENVELOPE/ADDRESS') WITH
    (
      NAME nvarchar(max) 'NAME',
      CONTACT nvarchar(max) 'CONTACT',
      STREET nvarchar(max) 'STREET',
      SUBURBSTATE nvarchar(max) 'SUBURBSTATE'
    ) 
```

Fields**`NAME`**等**`CONTACT`**应与您最初在顶部创建的 XML 文档相同**`ConvertToXML`**

所以底线是，您不是通过数据库中的存储过程将数据传递给报告，而是实际上从 aspx 页面获取数据 - 代码隐藏并将其转换为 XML 并通过此数据集将其传递给您的报告服务器报告
所以什么在*后面的代码*中传递给您的*报告*..*瞧*！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:42:53.023

最有可能的是，您最终可能需要在 Web 应用程序的上下文中运行它们，并手动将数据从数据源提取到报告中。

几年前我做了[这个项目，不介意让它恢复运行，最终完成以支持 MVC/Web Forms/Win Forms/WPF/等。](http://ssrsviewer.codeplex.com/)以及让它更健壮。

这可能会让你走上正轨。***

# android - 如何保持 android 应用程序始终处于登录状态？

> ID：12744337
> 
> 赞同：32
> 
> 时间：2012-10-05T10:29:47.633
> 
> 标签：android, autologin

现在我正在尝试创建一个 Android 应用程序，假设它会是一些“X”概念好吧。所以我正在创建一个登录屏幕。我想要做的是，如果我在我的手机上登录了该应用程序，那么每当我尝试访问该应用程序时，它都应该始终登录。

*例如我们手机中的 Facebook、g-mail 和 yahoo 等。*

为此该怎么办？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-05T10:34:17.897

使用共享偏好来实现自动登录功能。当用户登录到您的应用程序时，将登录状态存储到 sharedPreference 中，并在用户注销时清除 sharedPreference。

每次用户进入应用程序时检查共享首选项中的用户状态是否为真，则无需再次登录，否则直接进入登录页面。

要实现这一点，首先要创建一个类，在这个类中，您需要在 sharedpreference 中编写有关 get 和 set 值的所有函数。请看下面的代码。

```
public class SaveSharedPreference 
{
    static final String PREF_USER_NAME= "username";

    static SharedPreferences getSharedPreferences(Context ctx) {
        return PreferenceManager.getDefaultSharedPreferences(ctx);
    }

    public static void setUserName(Context ctx, String userName) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putString(PREF_USER_NAME, userName);
        editor.commit();
    }

    public static String getUserName(Context ctx)
    {
        return getSharedPreferences(ctx).getString(PREF_USER_NAME, "");
    }
} 
```

现在在主要活动（登录时将重定向用户的“活动”）首先检查

```
if(SaveSharedPreference.getUserName(MainActivity.this).length() == 0)
{
     // call Login Activity
}
else
{
     // Stay at the current activity.
} 
```

在登录活动中，如果用户登录成功，则使用 setUserName() 函数设置用户名。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-01T07:28:41.367

您可以在 SaveSharedPreference.java 中为注销操作添加以下内容：

```
public static void clearUserName(Context ctx) 
{
    Editor editor = getSharedPreferences(ctx).edit();
    editor.clear(); //clear all stored data
    editor.commit();
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-09T13:00:59.590

无论何时何地……所以这似乎是一种自动登录方法。应用程序启动，用户在提供授权信息后无需再次登录。有几种方法可以实现这一点。例如，Facebook API 提供了无需使用表单元素即可登录的机制。所以你基本上必须构建一个视图，用户可以在其中提供一次他的授权信息，将它们存储在 SharedPreferences 中并在下次自动登录。即使没有这样的基于 API 的登录并且您必须使用提供的登录表单，您有时也可以模拟 POST – 登录请求。这取决于该表单的实际服务器端实现。但请记住：这是一个安全问题。因此，切勿以明文格式存储授权凭据。大学教师' t 依赖于通过应用程序中定义的密钥对其进行加密，因为该密钥可能会通过对您的 APK 进行逆向工程来检测。而是使用有关设备的许多集体信息以及用户必须输入或由应用程序随机生成和存储的密钥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-12T21:05:54.577

只是想发布另一个我发现对我来说最简单的解决方案：

```
SharedPreferences sharedpreferences;
int autoSave;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //"autoLogin" is a unique string to identify the instance of this shared preference
    sharedpreferences = getSharedPreferences("autoLogin", Context.MODE_PRIVATE);
    int j = sharedpreferences.getInt("key", 0);

    //Default is 0 so autologin is disabled
    if(j > 0){
        Intent activity = new Intent(getApplicationContext(), HomeActivity.class);
        startActivity(activity);
    }

}

    public void loginBtn(View view){
        //Once you click login, it will add 1 to shredPreference which will allow autologin in onCreate 
        autoSave = 1;
        SharedPreferences.Editor editor = sharedpreferences.edit();
        editor.putInt("key", autoSave);
        editor.apply();
} 
```

现在假设我在另一个活动中有一个退出按钮：

```
SharedPreferences sharedPreferences;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);

    //Get that instance saved in the previous activity
    sharedPreferences = getSharedPreferences("autoLogin", Context.MODE_PRIVATE);
}

@Override
public void signOut(View view) {
    //Resetting value to 0 so autologin is disabled
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putInt("key", 0);
    editor.apply();

    Intent intent = new Intent(getApplicationContext(), MainActivity.class);
    startActivity(intent);

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-16T13:53:40.033

我很惊讶没有答案提到**AccountManager**。这是确定您的用户是否真的是他/她声称的人的官方且正确的方法。为了使用它，您必须通过在清单文件中添加它来获得许可：

```
<uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
```

然后你会得到一个账户数组（如果你想让用户使用他/她的谷歌账户）：

```
AccountManager am = AccountManager.get(this);
Account[] accounts = am.getAccountsByType("com.google"); 
```

完整参考：[AccountManager](https://developer.android.com/reference/android/accounts/AccountManager.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-13T23:59:25.433

使用 SharedPreferences 是一种在 Android 中保存和检索键值对数据以及在整个应用程序中保持会话的方法。

要使用 SharedPreferences，您需要执行以下步骤：

1.  通过将两个参数传递给构造函数（字符串和整数）来初始化共享 SharedPreferences 接口

```
 // Sharedpref file name
        private static final String PREF_NAME = "PreName";
        // Shared pref mode
        int PRIVATE_MODE = 0;
       //Initialising the SharedPreferences
        SharedPreferences pref = getApplicationContext().getSharedPreferences("MyPref", 0); // 0 - for private mode 
```

2.  使用 Editor 接口及其方法来修改 SharedPreferences 值并存储数据以供将来检索

```
 //Initialising the Editor
    Editor editor = pref.edit();
    editor.putBoolean("key_name", true); // Storing boolean - true/false
    editor.putString("key_name", "string value"); // Storing string
    editor.putInt("key_name", "int value"); // Storing integer
    editor.putFloat("key_name", "float value"); // Storing float
    editor.putLong("key_name", "long value"); // Storing long

    editor.commit(); // commit changes 
```

3.  检索数据

可以通过调用 getString() (For string) 方法从保存的首选项中检索数据。请记住，应该在 Shared Preferences 而不是 Editor 上调用此方法。

```
 // returns stored preference value
        // If value is not present return second param value - In this case null
        pref.getString("key_name", null); // getting String
        pref.getInt("key_name", null); // getting Integer
        pref.getFloat("key_name", null); // getting Float
        pref.getLong("key_name", null); // getting Long
        pref.getBoolean("key_name", null); // getting boolean 
```

4.  最后，在注销的情况下清除/删除数据

如果要从共享首选项中删除，可以调用 remove(“key_name”) 删除该特定值。如果要删除所有数据，请调用 clear()

```
 editor.remove("name"); // will delete key name
    editor.remove("email"); // will delete key email

    editor.commit(); // commit changes

    Following will clear all the data from shared preferences
    editor.clear();
    editor.commit(); // commit changes 
```

请按照以下链接下载一个简单明了的示例： [http ://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/](http://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/)

我希望我没有违反分享这个链接的平台的规则和规定。

```
 //This is my SharedPreferences Class 
    import java.util.HashMap;
    import android.annotation.SuppressLint;
    import android.content.Context;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.content.SharedPreferences.Editor;

    public class SessionManager {
        // Shared Preferences
        SharedPreferences pref;
        // Editor for Shared preferences
        Editor editor;
        // Context
        Context _context;
        // Shared pref mode
        int PRIVATE_MODE = 0;
        // Sharedpref file name
        private static final String PREF_NAME = "AndroidHivePref";
        // All Shared Preferences Keys
        private static final String IS_LOGIN = "IsLoggedIn";
        // User name (make variable public to access from outside)
        public static final String KEY_NAME = "name";
        // Email address (make variable public to access from outside)
        public static final String KEY_EMAIL = "email";

        // Constructor
        @SuppressLint("CommitPrefEdits")
        public SessionManager(Context context) {
            this._context = context;
            pref = _context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
            editor = pref.edit();
        }

        /**
         * Create login session
         */
        public void createLoginSession(String name, String email) {
            // Storing login value as TRUE
            editor.putBoolean(IS_LOGIN, true);
            // Storing name in pref
            editor.putString(KEY_NAME, name);
            // Storing email in pref
            editor.putString(KEY_EMAIL, email);
            // commit changes
            editor.commit();
        }

        /**
         * Check login method wil check user login status If false it will redirect
         * user to login page Else won't do anything
         */
        public void checkLogin() {
            // Check login status
            if (!this.isLoggedIn()) {
                // user is not logged in redirect him to Login Activity
                Intent i = new Intent(_context, MainActivity.class);
                // Closing all the Activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                // Add new Flag to start new Activity
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                // Staring Login Activity
                _context.startActivity(i);
            }

        }

        /**
         * Get stored session data
         */
        public HashMap<String, String> getUserDetails() {
            HashMap<String, String> user = new HashMap<String, String>();
            // user name
            user.put(KEY_NAME, pref.getString(KEY_NAME, null));

            // user email id
            user.put(KEY_EMAIL, pref.getString(KEY_EMAIL, null));

            // return user
            return user;
        }

        /**
         * Clear session details
         */
        public void logoutUser() {
            // Clearing all data from Shared Preferences
            editor.clear();
            editor.commit();

            // After logout redirect user to Loing Activity
            checkLogin();
        }

        /**
         * Quick check for login
         **/
        // Get Login State
        public boolean isLoggedIn() {
            return pref.getBoolean(IS_LOGIN, false);
        }
    } 
```

最后，您必须在活动类的 onCreate 方法中创建此 SessionManager 类的实例，然后为将在整个会话中使用的会话调用 createLoginSession

```
 // Session Manager Class
    SessionManager session;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Session Manager
        session = new SessionManager(getApplicationContext());
        session.createLoginSession("Username", intentValue);
    } 
```

我希望它有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T10:36:28.010

登录后按回电`moveTaskToBack(true);`

从此您的应用程序将处于后台状态。希望帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-01T11:58:09.563

`Xamarin.Android`**Chirag Raval**的港口和**LINTUism**的答案：

```
public class SharedPreference
{   
    static ISharedPreferences get(Context ctx)
    {
        return PreferenceManager.GetDefaultSharedPreferences(ctx);
    }

    public static void SetUsername(Context ctx, string username)
    {
        var editor = get(ctx).Edit();
        editor.PutString("USERNAME", username);
        editor.Commit();
    }

    public static string GetUsername(Context ctx)
    {
        return get(ctx).GetString("USERNAME", "");
    }

    public static void Clear(Context ctx)
    {
        var editor = get(ctx).Edit();
        editor.Clear();
        editor.Commit();
    }
} 
```

# python - 搜索 Twitter 并在 MySQL 中存储结果和回复

> ID：12744342
> 
> 赞同：0
> 
> 时间：2012-10-05T10:29:59.023
> 
> 标签：python, json, twitter

我有以下代码来检索包含“SNL”的推文页面：

```
import twitter
import json

twitter_search = twitter.Twitter(domain="search.twitter.com")

for page in range(11,50):
    k=twitter_search.search(q="SNL",rpp=100,page=page)
    print k 
```

以 JSON 格式成功返回结果。

有了这些结果 - 我想知道如何：

*   将这些结果存储在 MySQL 数据库中
*   将搜索限制在特定时间段内
*   查找更多回复任何搜索结果的推文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:37:49.263

你可以试试：

```
pip install MySQL-python 
```

# javascript - Ajax 需要一键加载

> ID：12744343
> 
> 赞同：0
> 
> 时间：2012-10-05T10:30:06.047
> 
> 标签：javascript, jquery, ajax, asynchronous

我对 AJAX 和 Jquery 有疑问 经过数小时的研究后，我终于在这里发布了。

[你可以直接在我的（未完成的）网站上](http://aurelienguery.fr/oyeah/indexFR.html)看到我的问题

当您到达页面时，Accueil 上没有任何内容（这很正常）

*试一试*

**点击项目=>**

*   触发器标题（正常）

*   发送 Ajax 请求以将项目页面加载到主 div 中（正常）

*   ('li') 不会开始向下滑动（除非我**在 Project 上再次单击**）

*尝试 2*

**Go to A Propos** => (一切正常) **Go to Project again** =>

*   触发一切！

*编码*

这是用于触发项目下滑的代码：

```
$('li').livequery(function(){

    var lis = $('#project-container ul').find('li');
    $(lis).each(function(index) {
        var li = $(this);

        setTimeout(function() {
            li.slideDown(400);
        }, 300 * index);
    }); 
}); 
```

我认为这与[此问题相同](https://stackoverflow.com/questions/6962465/ajax-jquery-needs-one-click-more)

它必须是一个回调故事，其中 var 没有正确存储或其他什么，但不幸的是我无法让它与我的页面一起使用。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:57:33.317

我不是 livequery 的忠实粉丝（我没有看到使用默认`.on()`方法有任何优势。（[委托](http://api.jquery.com/on/#direct-and-delegated-events)ofc）。

对我来说，这似乎是一个过时的库:)

另一个提示。使用参数调用正确的方法，而不是全局定义东西。如果您像这样定义全局的所有内容，您将看不到何时以及如何更改的内容。

使用三等号`===`和`!==`比较。相反`==`，它将避免意外的误报。

在`function GoToLink () { if (WrapLink == 1) {`您将表示可以调用js函数的url的字符串与1进行比较。为什么？

你为什么不调用 ajax 方法而不改变`window.location`?

为什么你需要一个额外的 ajax 库，因为你使用 jquery 你可以只使用[jquery 的默认 ajax 实现](http://api.jquery.com/jQuery.ajax/)：

```
$.ajax({
   type: "POST",
   url: "some.php",
   data: "name=John&location=Boston",
   success: function(msg){
     alert( "Data Saved: " + msg );
   }
 }); 
```

只需几个想法即可让您走上正轨

***更新：***

[文档](http://api.jquery.com/on/#direct-and-delegated-events)中描述了 on 方法的使用，您应该委托使用它，这意味着您将其应用于父容器并给子容器。

$('ul').on('click', 'li', function(){ //做某事 });

我在没有传递事件的情况下忽略了功能。

```
$('li').livequery(function () {
    var lis = $('#project-container ul').find('li');
    $(lis).each(function (index) {
        var li = $(this);

        setTimeout(function () {
            li.slideDown(400);
        }, 300 * index);
    });
}); 
```

这里最简单的方法是使用方法并在添加列表项时调用它。

```
 function slideDownListitems($lis){
     $lis.each(function (i) {  
        setTimeout(function () {
            $(this).slideDown(400);
        }, 300 * i);
    });
 }
 //when a listitem is added call
 slideDownListitems( $('#project-container ul li') ); 
```

JS 一周干得好！稍后我将更深入地研究其余部分并为您提供更新（现在正在工作）grtz

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:47:00.707

确保在页面加载后运行此代码。当我在 90% 的情况下遇到这种问题时，这就是原因。

# vb.net - VB.NET - 从 Windows 服务调用方法

> ID：12744347
> 
> 赞同：0
> 
> 时间：2012-10-05T10:30:18.447
> 
> 标签：vb.net, windows-services

我编写了一个 Windows 服务，我试图从中调用一个公共方法。我已经引用了包含该方法的 .dll，并且可以从代码中看到它。

```
Public Sub DoNextExecution()
    SyncLock Me
        timer.Stop()

        EventLog.WriteEntry("Automated service started")
        MyClass.AutomatedService()
        EventLog.WriteEntry("Automated service finished")

        timer.Start()
    End SyncLock
End Sub 
```

代码运行到这一点很好，但是在执行代码“MyClass.AutomatedService()”时它挂起并且不再继续。AutomatedService 是我试图调用的方法。我已将“MyClass”声明如下；

```
Dim MyClass As MyProject.MyClass 
```

是否可以以这种方式实际调用方法？还是我正朝着完全错误的方向前进？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:49:01.287

`Dim MyClass As MyProject.MyClass`

MyClass 将始终`NULL`，并且您正试图在`null`导致异常的类上消除方法，然后该方法将跳过`EventLog.WriteEntry("Automated service finished")`将不会显示，因为不会捕获异常。

# jsp - JSTL 中的字符串替换不会针对特定字符串发生

> ID：12744349
> 
> 赞同：0
> 
> 时间：2012-10-05T10:30:22.893
> 
> 标签：jsp, jstl, string-matching

我对 JSTL 很陌生，所以需要你的帮助。

我有一个名为“specialties”的字符串，我正在检查一个特定的字符串是否存在，如果存在，我检查标记对应的输入，然后用空字符串替换它。

```
<input type="checkbox" name="specialities" value="OB/Gyn" 
<c:if test="${fn:containsIgnoreCase(asc_details.specialities, 'OB/Gyn')}">
<c:set var="specialities" value="${fn:replace(specialities,'OB/Gyn','')}"></c:set>
<c:out value="${'checked'}"/></c:if>
/>&nbsp;OB/Gyn

<input type="checkbox" name="specialities" value="Plastic/reconstructive"
<c:if test="${fn:containsIgnoreCase(specialities, 'Plastic/reconstructive')}">
<c:set var="specialities" value="${fn:replace(specialities,'Plastic/reconstructive','')}"></c:set>
<c:out value="${'checked'}"/></c:if>
/>&nbsp;Plastic/reconstructive 
```

它适用于第一个匹配字符串“OB/Gyn”并将其替换为空字符串，但不会将“Plastic/reconstructive”替换为空字符串。我无法弄清楚为什么会这样。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:46:43.983

这里可能存在区分大小写的错误。该`containsIgnoreCase()`测试不区分大小写，因此它会通过例如“plastic”、“Plastic”、“PlAsTiC”和“PLASTIC”，但是`replace()`它区分大小写，它只会替换“Plastic”。

它对您来说失败很可能意味着该值与案例不完全匹配。也许它*实际上是*“塑料/重建”左右？

您基本上需要修复大小写（并替换`containsIgnoreCase()`by `contains()`），或者执行不区分大小写的替换，但是这样的功能在[JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)中不可用。你很可能需要自己种一个。

# bash - Bash - 解析和变量

> ID：12744353
> 
> 赞同：0
> 
> 时间：2012-10-05T10:30:38.090
> 
> 标签：bash

```
case 4.1
Info for unit 1 starts now
info1
info2
info3
info5  - the one I want
info6
info7
Info for unit 2 starts now
info1
info2
info3
info5  - the one I want
info6
info7
endcase 4.1 
```

2 个单元的信息在文件中打印了 1000 多次。

我的算法如下：

```
while read line
do
    if line contains unit1
    then current_unit=1
    if line contains unit2
    then current_unit2

    if line contains info5
    then 
         if current_unit = 1
            then unit1_val = *the relevant info from this line*
         elif current_unit = 2 
             then unit2_val = *the relevant info from this line*

    if both unit1_val > 20 && unit2_val > 20
    then pass 
```

简短版本：拉出我需要的值，如果在某些时候两个值都超过某个值，则测试通过。我也在尝试使用 Bash 来做到这一点

为清楚起见进行编辑：我遇到的问题是将变量传入和传出 if 语句。我的解析和比较很好，但是当我到达最后一个 if 时，这些值不存在，因为它们是 if - fi 它们来自（或不来自，视情况而定）的本地

编辑2：

```
 if [[ $line == *"info5"* ]]
    then
            CURRENT_UNIT=5
    fi

    if [[ $line = *"info6"* ]]
    then
            CURRENT_UNIT=6     
    fi

    if [[ $line =~ "text i want" ]]
    then
            if [[ $CURRENT_UNIT -eq 5 ]]
            then
                    UNIT_5_MEM=$(awk '/Used heap/ { gsub(/M/, " "); print $4 }')
            elif [[ $CURRENT_VC -eq 6 ]]
            then    UNIT_6_MEM=$(awk '/Used heap/ { gsub(/M/, " "); print $4 }')
            fi
    fi

    if [[ $UNIT_5_MEM -gt 20 && $UNIT_6_MEM -gt 20 ]]
    then
            echo "Passed"
    fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:20:38.960

我认为您发布问题的原因是因为在 while 循环中设置的变量似乎在 while 循环完成后消失了。

这是因为当您将 while 循环作为管道的一部分执行时，它在子 shell 中运行，当子 shell 退出时，父 shell 的环境保持不变，不受子 shell 中发生的任何事情的影响。

您可以在 bash 中通过使用重定向或进程替换而不是管道获取输入数据来解决此问题。例如，这不起作用：

```
cat inputfile | while read line; do
  case "$line" in
    foo*) output=$line ;;
  esac
done
echo "output=$output" 
```

虽然这确实有效：

```
while read line; do
  case "$line" in
    foo*) output=$line ;;
  esac
done < inputfile
echo "output=$output" 
```

这是我想出的：

```
#!/bin/bash

declare -A output

while read line; do
    case "$line" in
        *unit*)
            unit=$(awk '{print $4}' <<<"$line")
            ;;
        info5*)
            output[$unit]="$line"
            echo "FOUND: unit=$unit, line=$line" >&2
            ;;
    esac
done < inp1

echo "Output 1:"
printf "%s\n" "${output[@]}"

### Alternately:

echo "Output 2:"
for ((i=${#output[@]}; i > 0; i--)); do
    echo "unit=$i, line=${output[$i]}"
done 
```

我得到的输出：

```
FOUND: unit=1, line=info5  - the one I want
FOUND: unit=2, line=info5  - the one I want
Output 1:
info5  - the one I want
info5  - the one I want
Output 2:
unit=2, line=info5  - the one I want
unit=1, line=info5  - the one I want 
```

如果你真的想将东西存储到变量`UNIT_5_MEM`中，我想你可以，但数组看起来更干净。此外，如果没有看到您正在处理的数据，就很难知道您要使用 实现什么`awk`，因此我将其排除在我的回答之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:45:28.773

如果您正在寻找一种简单的方法来进行这样的文本过滤，最好看看`sed`or `[awk][1]`。后者能够轻松解析和存储一些状态。

可能是这样的（目前未经测试）

```
#!/bin/awk
BEGIN {
    current_unit=0;
}

function check_values()
{
   if(values[1]>20 && values[2]>20) {
     print "PASS"
     exit
   }
}

/Info for unit \d starts now/ {
   current_unit=$4;
}

/info5/ {
    values[current_unit]=value;
    check_values();
} 
```

# database - 数据库建模

> ID：12744354
> 
> 赞同：0
> 
> 时间：2012-10-05T10:30:47.260
> 
> 标签：database, database-design

我正在尝试在数据库中建模体育比赛..

我有以下表格

```
[sport_game]
sport_game_id
sport_game_type_id
name
description

[sport_game_instance]
sport_game_instance_id
sport_game_id
start_time
end_time

[sport_game] 1 - M [sport_game_instance]

[sport_game_type]
sport_game_type_id
type  -- professional, semi-pro, college..etc

[sport_game] M - 1 [sport_game_type]

[basketball]
basketball_id
sport_game_typeid
basketball_info

[basketball] 1 - 1 [sport_game_type]    

[baseball]
baseball_id
sport_game_type_id
baseball_info

[baseball] 1 - 1 [sport_game_type] 
```

我不能 100% 确定将类型表与特定运动相关联；我有时认为它有效，但我不确定。

我希望它能够拥有一组具有通用信息的核心类，例如 [sport_game]、[sport_game_instance]。

带有[运动游戏类型]，我可以修改和添加更多运动；它是我不确定的单独表格。我在想把它们分开意味着任何与运动相关的东西，如果需要的话，我可以加入这些表格。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:08:21.693

您当然不希望每项运动都有单独的表格。为什么？

1.  **您的应用程序将非常糟糕地扩展和扩展。**你对多少运动一窍不通？随着每一个新的添加，您将创建一个新表？谁来管理这个过程？我不知道该过程是否在您的构建中，但我的 DBA 肯定不会将 DDL 权限授予我的应用程序以从我的应用程序中创建数据库对象。

2.  **报告将是一件苦差事。**您将不得不遍历`n`表来获取有关`n`运动的任何信息，而不是使用单个 select 语句和 where 子句来按运动类型进行过滤。一点都不好。您将**永远**无法知道您支持多少 sports_types，而无需询问某人或在某处张贴您创建了多少 sports_types 表的便利贴。

如果游戏特定字段非常重要，您可以模板化（我希望这是一个词）JSON 或 XML 中的游戏特定数据（我投票支持 XML 是因为它的多功能性和现成的 DB 支持`XPath`）。您的模板可以是

1.  每个特定运动类型的模板。所以你会有

    ```
     sport_templates(
     sport_type_id FOREIGN KEY REFERENCES...
     sport_template_specs VARCHAR2(300)
      ) 
    ```

2.  每个 sport_game 的模板（篮球、足球等特定游戏）。所以你会有

    ```
     sport_game_instance(
     sport_game_instance_id
     sport_game_id
     sport_game_template_specs
     start_time
     end_time) 
    ```

3.  两者的组合，其中`sport_game_template`spec 是对包含预定义模板的父表的 FK 引用。

或者，您可以拥有某种映射`sport_type_attr`到的 EAV 表，`sport_type_attr_value`如

```
 sport_type_id   sport_type_attr           sport_type_attr_value
     1               bathroom_breaks           2
     1               cheerleaders_permitted    350 
```

显然`sport_type_id`是对父表定义的 FK 参考`sport_type`

# php - 自动获取mysql数据库中的数据到网站

> ID：12744359
> 
> 赞同：2
> 
> 时间：2012-10-05T10:31:06.373
> 
> 标签：php, html, mysql, ajax, web

我已经配置了一个将温度值插入数据库的表。现在我需要将数据库值检索到网站。我是网络开发的新手。有什么模板可以用来做这个吗？MySQL表结构是

```
CREATE table digitemp 
dtKey int(11) NOT NULL auto_increment,
time timestamp NOT NULL,
SerialNumber varchar(17) NOT NULL,
Fahrenheit decimal(6,2) NOT NULL,
PRIMARY KEY (dtKey),
KEY serial_key (SerialNumber),
KEY time_key (time) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:55:35.217

不确定您正在寻找什么样的答案。您想在 HTML 中执行此操作，还是可以在 PHP 中执行服务器端，或在 Javascript 中执行客户端？

对于 PHP，您只需连接到数据库即可。你可以在这里找到更多关于如何做到这一点：http: [//www.w3schools.com/php/php_mysql_intro.asp](http://www.w3schools.com/php/php_mysql_intro.asp)

在您的情况下，您的代码看起来像这样（未经测试....）

```
<?php
$con = mysql_connect("myServer","myName","myPassword");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("myDatabase", $con);
$result = mysql_query("SELECT SerialNumber, Fahrenheit FROM digitemp");

echo "<table><tr><th>SerialNumber</th><th>Fahrenheit</th></tr>"
while($row = mysql_fetch_array($result))
{
  echo "<tr><td>".$row['SerialNumber'] . "</td><td> " . $row['Fahrenheit']."</td></tr>";
  echo "</table>";
}

mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:37:32.637

[使用PDO](http://www.php.net/manual/en/intro.pdo.php)的小基本示例：

```
//Connect to MySQL
$dbh = new PDO('mysql:host=localhost;dbname=YOURDBNAME', 'YourUsername', 'YourPassword');

//prepare your SELECT query
$sth = $dbh->prepare("SELECT dtKey, time, SerialNumber, Fahrenheit FROM digitemp");

//Execute your query
$sth->execute();

//Loop through each row
while($row = $sth->fetchAll()){
    print_r($row);
} 
```

或者，您可以使用[MySQLi](http://php.net/manual/en/book.mysqli.php)从 Web 应用程序与您的数据库进行交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:38:11.083

您需要为此编写代码。使用 PDO 或 mysqli 进行数据库交互并从数据库中获取记录并将其显示在您的页面中。有很多可用的教程，如果你做一个快速的谷歌搜索:)

对学习 PDO 有用：[http ://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

如有必要，请将其添加为书签。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T10:38:11.007

给你，注意：看看这些网站 [http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp) http://php.net/manual/en/function.mysql-query.php

```
 $con = mysql_connect("localhost","username","password"); //enter your username,password
  if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("databaseName", $con); //enter your database name

$result = mysql_query("SELECT * FROM digitemp");

while($row = mysql_fetch_array($result))
  {
  echo $row['SerialNumber '] . " " . $row['Fahrenheit '];
  echo "<br />";
  }

mysql_close($con); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T10:44:05.717

```
$con = mysql_connect("localhost","username","password"); //enter your username,password
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("databaseName", $con); //enter your database name

$result = mysql_query("SELECT * FROM digitemp");

while($row = mysql_fetch_array($result))
{
echo $row['SerialNumber '] . " " . $row['Fahrenheit '];
echo "<br />";
} 
```

mysql_close($con); 如果您遇到任何已弃用的错误，请尝试这样

```
 while($row = @mysql_fetch_array($result)) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-05T10:39:25.767

[浏览MySQL connect](http://www.php.net/manual/en/mysqli.construct.php) 和[MySQl Query](http://www.php.net/manual/en/mysqli.query.php)的基础知识。

# html - 如何围绕 indexed_search 模板包装 HTML？

> ID：12744360
> 
> 赞同：0
> 
> 时间：2012-10-05T10:31:08.443
> 
> 标签：html, search, typo3, typoscript

我正在尝试将 HTML 包装在 Typo3 的 indexed_search 扩展的整个输出中。不幸的是，在模板中不可能这样做。我还尝试用类似的东西包装 tt_content：

```
tt_content.search.wrap = |</div></div></div><div class="content-2col-right">TEST</div></div> 
```

或者

```
tt_content.search.20.stdWrap.wrap = |</div></div></div><div class="content-2col-right">TEST</div></div> 
```

是否有可能不更改扩展的源代码（如果没有钩子，这将不是一个选项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:57:30.997

我用一些解决方法解决了它：

删除包含在特定页面的 tt_content 元素（`<div id="c103" class="csc-default">`等）周围的 div：

```
[globalVar = TSFE:id = 51]
tt_content.stdWrap.innerWrap.cObject >
tt_content.stdWrap.innerWrap.cObject.default >
[global] 
```

并将包装添加为纯 html 内容元素。

不是最好的解决方案，但它有效。

# image - Azure WM，bing 图像搜索延迟以获取搜索结果

> ID：12744361
> 
> 赞同：1
> 
> 时间：2012-10-05T10:31:09.910
> 
> 标签：image, search, delay, bing

我有一个简单的页面，如谷歌页面。一个输入文本框和一个按钮。如果用户输入搜索关键字并按回车键，则搜索结果会延迟显示，这意味着搜索结果会在大约 3-8 秒后显示。谁能告诉我可能是什么问题？甚至 Youtube 视频搜索结果也有同样的问题。

# asp.net - 本地化 .NET Web 应用程序（服务器端和客户端）的最佳方法

> ID：12744362
> 
> 赞同：5
> 
> 时间：2012-10-05T10:31:12.893
> 
> 标签：asp.net, asp.net-mvc, design-patterns, language-agnostic, localization

在过去的几天里，我一直在为我用 MVC 编写的 Web 应用程序实现本地化。有 3 个主要任务可以解决我可以指出的 Lozalization *“问题” ：*

1.  **存储：**以多种语言存储键值对字符串以在您的应用程序中使用
2.  **服务器端访问：**根据服务器端脚本中的给定键访问值（例如视图、控制器、Web 表单等...）
3.  **客户端访问：**根据客户端脚本（例如 Java 脚本）中的给定键访问值
4.  建立文化转换机制。

有几种方法可以完成我探索过的每项任务，我正在努力在它们之间进行选择。有两个我感兴趣的问题：

1.  我想知道本地化的最佳做法是什么？从你的角度来看。请写下一种方法与另一种方法的优点\缺点。
2.  您是否可以建议其他方法或增强功能。

* * *

## 1\. 存储

### 资源文件：

*   将本地化字符串的键值对存储在资源文件中
*   为每种文化创建一个具有相同键的资源文件，例如 myString.resx、myStrings.he-IL.resex 等...

### XML 文件：

*   创建一个结构化的 XML 文件，该文件将包含每个键的父节点和每个文化特定值的子节点，例如

    ```
    <string key="myAppName">
        <heIL>some Hebrew value</heIL>
        <enUS>some English value</enUS>
    </string> 
    ```

## 2.服务器端访问

*   使用这两个*存储*选项，从服务器端访问将相当容易。
    *   **在这种情况下使用资源**文件会更容易一些，因为有一些类是自动生成的，以方便访问这些值。因此，您将资源用作具有静态属性的常规类，以根据键访问每个字符串值。
    *   **使用 XML 文件**，您必须自己写下访问层代码，这不一定是件坏事 - 因为您可以通过这种方式获得更多控制权（仅在需要时）

## 3.客户端访问

这是它变得有趣且有时复杂的地方。我在这里探索了两个选项，但我不确定如何继续。

### 服务器端生成的脚本：

*   `<script>`在您的 View\ Web-Form 中，在标签内添加一个服务器脚本渲染块
*   从这一点开始，在 java 脚本中动态创建一个键数组或静态变量，并将所需的字符串放入其中。这是使用 Razor 引擎的示例。

    ```
     <script type="text/javascript">
                k_CultureInfo = "@CultureInfo.CurrentCulture.Name";
                K_ApplicationName = "@MyStrings.SomeStringKey";
                ....
       </script> 
    ```

### 自定义 HTTP 处理程序：

我在这里的一篇博文中找到了这个想法：[Localize text in JavaScript files in ASP.NET](http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx#comment) Here

*   最好是您编写一个处理任何“.js.axd”请求的 HTTP 处理程序到达服务器。
*   “ *ScriptTranslatorHandler”*将读取 javascrip 文件，并将您的 java 脚本中预定义标记的任何实例（例如 Translate(SomeStringKey)）替换为上述任何方法采用的正确字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:45:43.190

**资源文件：**

使用 resx 格式。翻译工具将无法处理您建议的格式，因为它在同一个文件中包含多种语言。典型的翻译工具会获取一个源文件，并在翻译后为每种语言生成一个匹配文件。我会不惜一切代价避免您建议的格式。

如果要使用 XML，请为每种语言使用一个文件。此外，无论您选择何种格式，请确保您包含每个片段的上下文注释以帮助翻译人员。

**服务器端访问**

使用 resx 并节省定义图层的时间

**客户端访问**

我认为服务器端生成的脚本更简单，更符合服务器端访问。

**文化转换机制**

我假设您询问的是逻辑而不是 UI。最常用的方法是获取用户的浏览器语言设置。如果语言设置为您的应用程序中不存在的语言，请回退到您的默认语言。您还希望使用用户选择设置一个 cookie（以防他们手动更改语言），以便下次向他们显示他们选择的语言。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-05T10:38:33.930

也许这会有所帮助，如果它是一个网络应用程序 [https://developers.google.com/chrome/web-store/docs/i18n](https://developers.google.com/chrome/web-store/docs/i18n)

试试看！！！

# ruby-on-rails-3 - 使用 jruby on rails 云托管嵌入式 Neo4j 服务器的方法？

> ID：12744370
> 
> 赞同：3
> 
> 时间：2012-10-05T10:31:47.380
> 
> 标签：ruby-on-rails-3, amazon-ec2, jruby, neo4j, cloud-hosting

我有一个使用嵌入式 neo4j 服务器和 neo4j.rb gem 的 rails 服务器。使用 rails 3.1、jruby 1.7 和 neo4j.rb 2.0 托管生产服务器的最佳方式是什么？

我查看了 Heroku，但 neo4j 插件只支持 restful 界面。除了我已经使用 neo4j.rb gem 为嵌入式服务器编写代码并且不想重写以使用像neography gem 之类的东西外，我会对此感到满意。

我考虑过亚马逊的 ec2 服务，因为 neo4j 有一个 AMI，但我对此没有任何经验，并且希望肯定这会起作用。我认为这也可能需要亚马逊 EBS 服务。

我也完全接受其他替代方案，但我更喜欢在运行之前不涉及太多配置的解决方案（如果它可以处理嵌入式版本，heroku 本来会这样）。

还有[这个问题](https://stackoverflow.com/questions/7649319/neo4j-in-the-cloud)，但我已经发布了我的问题，因为它特定于 jruby rails 并且因为该问题在一年前（实际上是一天前）得到了回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:25:12.053

ec2 运行良好，您当然甚至可以选择专门的托管服务提供商，例如 www.hetzner.de，具体取决于您需要放置服务器的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T11:21:58.667

我用 Jelastic 尝试过同样的场景，发现它运行良好，而且配置相同也没有麻烦。

*   >[http://jelastic.com/docs/jelastic-jruby-deploy](http://jelastic.com/docs/jelastic-jruby-deploy)

    > [http://blog.jelastic.com/2013/03/21/neo4j-in-the-cloud/](http://blog.jelastic.com/2013/03/21/neo4j-in-the-cloud/)

虽然我没有尝试使用 AWS 。所以我对此无话可说。

# mysql - r - 如何分配 0 而不是“未选择行”（数据框 0 行 0 列）

> ID：12744373
> 
> 赞同：0
> 
> 时间：2012-10-05T10:31:59.883
> 
> 标签：mysql, r

我正在尝试将 MySQL 查询返回的值分配给 R 中的变量，或者 0 以防查询返回空集（未找到记录）。我以为我可以像这样使用 COALESCE：

```
data<-dbGetQuery(con,"COALESCE(( SELECT id FROM payments WHERE user_id=25578),0)") 
```

但是，我收到一条语法错误消息：

```
RS-DBI driver: (could not run statement: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM payments WHERE user_id=25578,0)' at line 1). 
```

我一直在尝试寻找替代方案，但没有成功。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:49:00.260

```
SELECT COALESCE(count(id) > 0,'1','0') as column_name FROM payments WHERE user_id=25578 
```

如果特定 id 的数据可用，则将显示“1”，否则将显示“0”。

# objective-c - 正确处理核心数据提取中的错误

> ID：12744377
> 
> 赞同：2
> 
> 时间：2012-10-05T10:32:08.320
> 
> 标签：objective-c, core-data, error-handling

我正在开发一个应用程序一段时间，几乎可以发布了。我从未解决核心数据提取中的任何错误处理，在这方面还没有真正发生过错误。我所有的提取都填充了标准：

```
 if (fetchedObjects == nil) 
 {
        // Handle Error, or Not

 } 
```

也许有些人在启动模板中留下了一个中止。在整个项目中处理此错误和类似错误的最佳实践建议是什么？我可以采用一种不同的方法来放入所有这些内容，还是必须根据具体情况做出决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:59:18.957

首先，如果 fetchedObjects 为零，则可能没有错误。您应该直接检查错误。[如果需要，请阅读 NSError](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html)

```
If (error){
    //handle error here...    
    <#statements#>

    //return early if this is going to cause a crash
    return;
} 
```

以下是所有可能的 coreData 错误代码的列表： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Miscellaneous/CoreData_Constants/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Miscellaneous/CoreData_Constants/Reference/reference.html)

减少您将使用的那些，例如，如果您不使用验证，您将永远不会收到验证错误。

然后我会创建一个通用类来处理一些更灾难性的类。它们永远不可能发生，但如果他们尽力而为，您最好的选择是向用户显示发生了坏事的消息，并要求他们删除并重新安装应用程序。（或者如果这对您的实现来说不太困难，请编写一些重置代码）。

然后在每个错误点可能会有一些您想要以不同方式处理的特定错误。因为无论如何您都将查看代码中的每个错误点以删除那些 abort() 调用，所以此分析将很容易适合您的流程。

通常，如果核心数据在 iPhone 上获取错误时会发生灾难性的事情。如果您在保存或插入数据时遇到错误，那么您可以在告诉用户期望什么之后尝试找出原因，如果最坏的情况发生最坏的情况下丢弃更改。如果丢弃更改是不可接受的（例如，如果您正在为用户或其他用户创建的数据存储文档），那么您需要做更多的工作来找出问题。最可能的保存错误将是磁盘空间不足。

# xcode - 通过终端链接目标 c 类文件而不使用 Xcode

> ID：12744378
> 
> 赞同：1
> 
> 时间：2012-10-05T10:32:09.457
> 
> 标签：xcode, cocoa, terminal

我在终端中找到了很多编译目标 c 文件的答案，因为我需要知道如何链接所有这些文件如何捆绑它，然后通过终端将其作为应用程序运行？

**注意：**我只是想在没有 Xcode 的情况下做一个应用程序，但我在其他项目中使用 Xcode，我是它的忠实粉丝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:33:55.447

```
cd /projectFilePath
xcodebuild -target "projectName" -configuration Release 
```

它将创建`/projectFilePath/build/Release/projectName.app`查看[XCODEBUILD 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)。

# java - android从定时器任务的另一个活动中调用函数

> ID：12744382
> 
> 赞同：1
> 
> 时间：2012-10-05T10:32:13.407
> 
> 标签：java, android, eclipse

我正在正确设置另一个类的对象参数，为其设置接口。现在我需要做同样的事情，但被计时器延迟了。为此，我使用了一个正确调用的计时器任务，但在应该从另一个活动设置参数时崩溃。如何到达？

```
 TimerTask task = new TimerTask() {
                        public void run() {
                            anotherClass.aBridge.button_back.setVisibility(View.INVISIBLE); //working fine outside timer
                        }
                    };

                    Timer timer = new Timer();
                    timer.schedule(task, 5000); 
```

日志错误：

```
 10-05 12:26:58.083: E/AndroidRuntime(9815): FATAL EXCEPTION: Timer-0
    10-05 12:26:58.083: E/AndroidRuntime(9815): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.ViewRoot.checkThread(ViewRoot.java:2990)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:663)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:689)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2604)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.View.invalidate(View.java:5374)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.View.setFlags(View.java:4723)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at android.view.View.setVisibility(View.java:3183)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at webPush$6.run(webPush.java:274)
    10-05 12:26:58.083: E/AndroidRuntime(9815):     at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:34:07.163

您无法从后台线程更新 UI。您只能从 UI 线程更新 UI。用于`runOnUiThread(runnable_instance)`从非 UI 线程更新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:35:59.820

因为定时器任务将在单独的线程中启动。但是`View`由 UI 线程创建的不能被任何其他人触及。正如错误所说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:46:31.493

```
 private Handler handler =  new Handler(){

    @Override
    public void handleMessage(Message msg) {
        //do ur work
}}; 
```

将上面的代码添加到你的类并从运行中调用这个方法 handler.sendMessage(Message message)

# facebook - Facebook：将 URL 更改为页面内的应用程序

> ID：12744385
> 
> 赞同：0
> 
> 时间：2012-10-05T10:32:40.080
> 
> 标签：facebook, settings, facebook-apps, facebook-page

> **可能重复：**
> [网址中的 Facebook 页面选项卡应用程序名称](https://stackoverflow.com/questions/12172661/facebook-page-tab-app-name-in-url)

只是一个快速的问题，以确定它是否可能。

我们在页面内有一个应用程序，因此我们可以直接链接到页面内的应用程序：http: [//www.facebook.com/page/app_1234567989874](http://www.facebook.com/page/app_1234567989874)

我的问题是；是否可以将“app_1234567989874”部分更改为更易读或更容易记住的内容，例如“appname”？也许在一定数量的喜欢或访问之后？

它注意到这个问题与[http://facebook.stackoverflow.com/questions/12172661/facebook-page-tab-app-name-in-url](http://facebook.stackoverflow.com/questions/12172661/facebook-page-tab-app-name-in-url)大致相同，但那个问题没有答案，所以我想我会尝试再次。

提前干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:41:14.677

不可以。Facebook 无法像更改个人资料或页面名称那样更改应用链接。您可以使用[http://www.tinyurl.com](http://www.tinyurl.com)或[http://www.yak.me](http://www.yak.me)之类的免费链接缩短服务来获得更短且更容易记住的内容。

# maven - SONAR mojo 无法下载 jdbc/findebugs

> ID：12744389
> 
> 赞同：0
> 
> 时间：2012-10-05T10:32:54.447
> 
> 标签：maven, sonarqube

我在本地机器上使用声纳已经很长时间了，但有一次它突然卡住并开始失败。sonar maven mojo 吐出了以下构建错误：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Can not execute Sonar

Embedded error: Fail to download the file: http://192.168.212.197:9000/deploy/plugins/findbugs/sonar-findbugs-plugin-3.2.1.jar (no proxy)
Read timed out
[INFO] ------------------------------------------------------------------------ 
```

或者

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Can not execute Sonar

Embedded error: Fail to download the file: http://192.168.212.197:9000/deploy/jdbc-driver.jar (no proxy)
Read timed out
[INFO] ------------------------------------------------------------------------ 
```

我尝试通过更改默认主机来摆弄声纳配置 - 尝试了我的本地 IP 尝试了 'localhost' 尝试了我的域名，但它只是说它无法下载 jdbc-driver.jar 或 findbugs-plugin-3.2.1.jar。当我在网络浏览器中输入 URL 时，我会立即获取这两个 jar 中的任何一个，我认为这表明一旦声纳应用程序启动并运行它们就可以获取，并且我可以在声纳网络应用程序部署文件夹中成功找到这些 jars。

我也在使用 MySQL 5.1，甚至尝试使用默认开箱即用的 DERBY DB。阅读了很多关于类似主题的文章，但在 pom 或其他地方存在一些配置问题。这是不同的，我无法解决这个问题。举个例子，它曾经可以工作，但有一天它停止了，也许这是一些网络问题？

有没有人对此有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:15:38.350

你运行的是什么版本的声纳？它看起来像以下问题，由版本 2.5 修复：

*   [声纳-2016](http://jira.codehaus.org/browse/SONAR-2016)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:40:41.847

我已经找出了这个问题的根本原因。正如我忘了提到我在 Windows 7 上运行声纳，这个[http://support.microsoft.com/kb/2735855](http://support.microsoft.com/kb/2735855)更新引起了麻烦。我删除了它，一切似乎都回到了正轨。

# android - 选项卡视图抛出异常

> ID：12744390
> 
> 赞同：0
> 
> 时间：2012-10-05T10:33:07.820
> 
> 标签：android, tabview

在 Androd_Tab_view.java 文件中，我有以下代码：

选项卡 = (TabHost)findViewById(R.id.TabHost1); tabs.setup();

```
TabHost.TabSpec first_tab = tabs.newTabSpec("tag1");
first_tab.setContent(new Intent(this,FirstTab.class));
first_tab.setIndicator("Book");
tabs.addTab(first_tab);
//SecondTab.class
TabHost.TabSpec second_tab = tabs.newTabSpec("tag2");
second_tab.setContent(new Intent(this,SecondTab.class));
second_tab.setIndicator("Authors");
tabs.addTab(second_tab); 
```

在 FirstTab.java 文件中，我有以下代码：

```
public class FirstTab extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

/* First Tab Content */
        TextView textView = new TextView(this); 
        textView.setText("First Tab");
        setContentView(textView);

    }
} 
```

在 SecondTab.java 文件中，我有以下代码：

```
 public class SecondTab extends Activity {
/** Called when the activity is first created. */
@Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);  /* Second Tab Content */

        TextView textView = new TextView(this);
        textView.setText("Second Tab"); 
        setContentView(textView);

    }
} 
```

但是当我尝试运行这段代码时，我得到了一个异常。这个问题有什么可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:38:11.520

你像这样创建标签

```
 void tabCreation() {

    tabHost.setup();

    TabSpec spec1 = tabHost.newTabSpec("Accounts");
    spec1.setIndicator(createTabView(tabHost.getContext(), "Accounts", R.drawable.tab_home));
    Intent inte = new Intent(TabsActivity.this,  Activityone.class);
    inte.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec1.setContent(inte);
    // spec1.setContent(R.id.tab1);

    TabSpec spec2 = tabHost.newTabSpec("Contacts");
    spec2.setIndicator(createTabView(tabHost.getContext(), "Contacts", R.drawable.tab_account));
    Intent _int = new Intent(TabsActivity.this,  Activitytwo.class);
    _int.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec2.setContent(_int);
    // /spec2.setContent(R.id.tab2);

    TabSpec spec3 = tabHost.newTabSpec("Chats");         

    tabHost.addTab(spec1);
    tabHost.addTab(spec2);       

    tabHost.setCurrentTab(0);
}

private static View createTabView(final Context context, final String text, final int id) {

    View view = LayoutInflater.from(context).inflate(R.layout.tab_indicator, null);
    TextView tv = (TextView) view.findViewById(R.id.title);
    tv.setText(text);
    ImageView icon = (ImageView) view.findViewById(R.id.icon);
    icon.setImageResource(id);
    return view;
}
 } 
```

你的活动是

```
 public class FirstTab extends Activity {
  /** Called when the activity is first created. */
    @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_accounts); 

    /* First Tab Content */
       TextView textView = new TextView(this); 
       textView.setText("First Tab");
      setContentView(textView); 
```

和

```
 public class secondTab extends Activity {
  /** Called when the activity is first created. */
    @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts_accounts); 

    /* First Tab Content */
       TextView textView = new TextView(this); 
       textView.setText("First Tab");
      setContentView(textView);

    }
} 
```

这是[http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

# javascript - javascript正则表达式反向引用

> ID：12744391
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:33:12.440
> 
> 标签：javascript, regex, backreference

这是[php正则表达式的延续：电话号码7-12位可能包含连字符或空格](https://stackoverflow.com/questions/12704345/php-regex-phone-number-7-12-digits-may-contain-hypen-or-space)

我仍在尝试理解反向引用。以下是我用来测试反向引用的 JavaScript 代码。当我运行此代码时，仅`null`输出。我哪里错了？

```
<script type="text/javascript">
function myRegexFunc()
{   myString="abcabcxabcdefghi";
    patt1=new RegExp("(abc)?\1x\1");
    document.write(patt1.exec(myString));
}
</script>
</head>

<body onload="myRegexFunc()">
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:35:33.777

您需要转义`\`字符串中的 。

```
patt1 = new RegExp("(abc)?\\1x\\1"); 
```

或者您可以使用正则表达式文字：

```
patt1 = /(abc)?\1x\1/; 
```

# c# - 远程服务器返回错误：(400) 错误请求。

> ID：12744393
> 
> 赞同：0
> 
> 时间：2012-10-05T10:33:27.333
> 
> 标签：c#, asp.net, asp.net-mvc, facebook, httpwebrequest

我正在尝试通过 Web 应用程序从内部进行 facebook open graph api 调用。我正在使用这样的 C# 请求发出 Web 请求。

```
string token = "q2Fe0utty5gzCasPL23...";
string url = "https://graph.facebook.com/me?access_token=" + 
    HttpUtility.UrlEncode(token) +"&response_type=id";

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

Stream receiveStream = response.GetResponseStream();
StreamReader readStream = newStreamReader(receiveStream,Encoding.UTF8);
string responseData = readStream.ReadToEnd();

_context.SaveChanges(); 
```

由于令牌中有一些特殊字符（+、/、==），因此我使用 HttpUtility.UrlEncode(token) 对其进行了编码，但仍然出现以下错误。

远程服务器返回错误：(400) 错误请求。

我该如何解决这个错误。我通过在堆栈溢出中看到一些响应来完成上述操作，但仍然出现错误。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:47:55.400

> 由于令牌有一些特殊字符(+,/,==)

这听起来很奇怪……通常访问令牌由字母、数字和管道符号组成。

如果您使用无效的访问令牌（不是过期，而是根本无法解码的令牌）发出请求，那么您将收到 400 响应。

所以请在调试工具中检查您的令牌，[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# java - Java中的二维列表

> ID：12744404
> 
> 赞同：5
> 
> 时间：2012-10-05T10:34:02.373
> 
> 标签：java, list

有没有办法将 Java 中的列表作为二维处理？

情况：我有一个带有节点、边和每条边权重的图。现在我需要一个数据结构来存储每个节点：a）它的邻居 b）每个邻居的边权重

首先，我想创建一个带有标识符的新类“节点”和类似二维数组的东西来存储邻居标识符和边权重。但是每个节点的邻居数量没有给出，并且可能在运行时动态增加。因此，我认为二维数组不是这里的路。

我认为在“节点”类中可以有一个类似的列表：

```
List<node> neighbours = new ArrayList<node>(); 
```

但显然这只处理相邻节点 - 而不是它们边缘的权重。

有没有人提示如何构建这样一个“图”，其中每个节点都存储邻居的标识符和相应的边权重？

感谢您阅读:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:38:17.143

最直接的是使用`HashMap`：

```
 class Edge {
// represents edge with destination node and it's weight
        private final Node node;
        private final int weight;

        Edge(Node node, int weight) {
            this.node = node;
            this.weight = weight;
        }

    }

// represents map which holds all outgoing edges keyed by source nodes.
    Map<Node, Set<Edges>> edgesByOutgoingNodes = new HashMap<Node, Set<Edges>>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:38:49.373

你可以这样做：

```
List<Connection> connections = new ArrayList<Connection>(); 
```

其中“连接”定义为：

```
Class Connection {
    private int weight;
    private Node node;

    .... add getters/setters here ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:41:51.417

Guava 中的[Table](http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/collect/Table.html)接口可能会有一些用处。没用过，但是听说很好用。这个[create](http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/collect/HashBasedTable.html#create%28int,%20int%29)方法可能有点用

# grails - Grails 中功能和集成测试的不同配置

> ID：12744407
> 
> 赞同：0
> 
> 时间：2012-10-05T10:34:08.067
> 
> 标签：grails

有时，您可能需要在集成测试和功能测试之间拆分配置，假设您正在使用 spring-security-core 插件并且您不想在集成测试环境中启用它。如果是这样，你可以在你的 conf/Config.groovy 中有这样的东西：

```
test {  
    integration {
        grails.plugins.springsecurity.active = false
    }
    functional {
        grails.plugins.springsecurity.active = true
    }
} 
```

如此简单，如此富有表现力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:58:12.653

Grails 配置文件是 groovy 文件，这意味着它们是可执行的。通过捕获测试阶段（单元/集成/功能）`scripts/_Events.groovy`：

```
eventTestPhaseStart = { args ->
    System.properties['grails.test.phase'] = args
} 
```

它可以用于`Config.groovy`：

```
grails.plugins.springsecurity.active = 
  (System.properties['grails.test.phase'] != 'integration') 
```

这是[另一个](http://www.redtoad.ca/ataylor/2011/02/setting-grails-functional-test-database/)使用单独的数据库进行功能测试的示例。

# cakephp - 如何在cakephp中将数据库内容更改为多语言

> ID：12744409
> 
> 赞同：0
> 
> 时间：2012-10-05T10:34:29.320
> 
> 标签：cakephp, multilingual

我想根据所选语言将数据库内容更改为其他语言。在数据库中以英文数据存储。通过使用 .po 文件，所有静态文本都将更改为其他语言，如葡萄牙语、法语等。但我也想更改数据库内容。

请给我解决方案...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:51:21.670

查看文档： [http ://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html#translate](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html#translate)

由于您没有指定您的蛋糕版本或提供任何其他更具体的场景或代码示例，我无法在此处详细介绍

# linux - Gzip：符号链接的级别太多

> ID：12744412
> 
> 赞同：9
> 
> 时间：2012-10-05T10:34:38.603
> 
> 标签：linux, ubuntu, gzip, archive

伙计们。我刚刚在 Ubuntu 10.10 上弄错了`gzip`我的文件夹（这是我的家庭 Internet 服务器）。`/etc/`因此，gzip 的错误命令已将文件`/etc/`夹中的原始文件更改为 .gz 文件。
服务器现在没有启动。
然后我使用 Ubuntu live 从磁盘启动并尝试在 /etc/ 中提取文件：
`gunzip -r *.* /etc/`
但是我遇到了一些文件的问题：有 `file.gz too many levels of symbolic links`
什么建议吗？（我需要提取所有带有替换的文件来恢复我的系统）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T02:55:48.643

查看 gzip ( *man gzip* ) 的手册页，或阅读此命令的输出：

```
gzip --help | less 
```

也许，你应该试试

```
 gzip -d --force * /etc 
```

我希望这对你有帮助。

# joomla - 在 joomla 编辑器中插入文本

> ID：12744419
> 
> 赞同：0
> 
> 时间：2012-10-05T10:35:03.330
> 
> 标签：joomla

我正在为 Joomla 创建一个组件。在后端，我添加了一个这样的编辑器：

```
$editor = JFactory::getEditor();
$editor->display('codice', 'test', '100%', '768', '40', '5',false); 
```

我添加了按钮。单击这些按钮，我想输入文本，例如：[code]test[code] 在用户正在编写的位置。我如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:00:05.180

你可以试试这个。根据您的代码替换按钮和编辑器 ID

```
$(document).ready(function(){
    $( "#button" ).click(function() { 
     $("#txteditorid").text("[code]test[code]");
    });
}); 
```

# wpf - 野外有没有 WPF-XBAP 应用程序？

> ID：12744420
> 
> 赞同：0
> 
> 时间：2012-10-05T10:35:05.383
> 
> 标签：wpf, xbap

你知道任何 WPF XAML 浏览器应用程序吗？

商业或开源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:40:16.303

Actipro 网络[演示](http://www.actiprosoftware.com/download/demos)是否重要？

# javascript - jQuery live() 函数用于大量使用站点的 ajax

> ID：12744423
> 
> 赞同：0
> 
> 时间：2012-10-05T10:35:22.427
> 
> 标签：javascript, jquery, load, live

我一直在寻找一种方法来确保所有脚本在内容通过 jQuery 加载进出页面时被相应地触发。

迄今为止最好的方法是 live 函数，但我无法让它在加载时触发函数，只能在加载元素的情况下运行。

例如。

```
$(document).ready(function(){
    $('textarea').live('keyup',function(){
        $(this).innerHeight(20 + (16 * ($(this).prop('scrollHeight') / $(this).css('line-height').replace('px', '') - 1.25)));
    });
    $('textarea').trigger('keyup');
}); 
```

这将使 textarea 在 keyup 功能上正确执行，但不会触发初始`$('textarea').keyup();`

我该怎么做/有没有更好的方法来实现我所追求的。`

我已经做到了这一点，但是一旦页面加载，我的初始调用就不起作用：

```
$(document).ready(function(){
    $(document).on('keyup', 'textarea',function(){
        $(this).innerHeight(20 + (16 * ($(this).prop('scrollHeight') / $(this).css('line-height').replace('px', '') - 1.25)));
    });
    $('textarea').trigger('keyup');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:41:01.693

首先，你想用来`trigger()`触发一个事件。

另外，不要使用`live()`，因为它已被弃用。而是使用`on()`. 语法略有变化：

```
$(document).ready(function(){
    $(document).on('keyup', 'textarea', function(){
        $(this).innerHeight(20 + (16 * ($(this).prop('scrollHeight') / $(this).css('line-height').replace('px', '') - 1.25)));
    });
    $('textarea').trigger('keyup');
}); 
```

选择器的`$(document).on('keyup', 'textarea', function)`工作原理如下：

1.  查找`document`匹配的元素`textarea`（这也适用于页面加载后添加的元素）
2.  如果`keyup`事件被触发，执行回调方法

因此，您可以编写一些比`document`减少计算时间更具体的内容。例如：

```
$('#myForm').on('keyup', 'textarea', function) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:27:00.593

Alp 的反应完美。处理程序在您使用时触发，`trigger()`所以我不明白您在哪里得到错误。

确保在加载了要填充的任何动态内容**之后触发 textarea 上的 keyup。**如果您使用 jQuery`load()`引入内容，请在回调函数中触发 keyup。

[JS小提琴](http://jsfiddle.net/illnuget/SqR4Z/37/)

# performance - 在矩阵中找到长度为 N 的最大成本路径的算法，从 [0,0] 到最后一行

> ID：12744424
> 
> 赞同：1
> 
> 时间：2012-10-05T10:35:26.553
> 
> 标签：performance, algorithm, matrix

我有一个`n*n`矩阵，其中每个元素代表一个整数。从`[0,0]`我必须找到精确`m`到最后一行的元素的路径，返回最大成本。路径可以在最后一行的任何列结束，并且`n ≤ m ≤ n^2`

我想找到所有长度`m`从`[0,0]`到的路径`[n-1, 0], [n-1, 1] ... [n-1, n-1]`。但是感觉不是很理想...

哪种算法是最有效的方法？BFS 还是 DFS？

**编辑**

可能的方向是向下/向右/向左，但每个元素最多只能访问一次。

**编辑 2**

例如，如果给定这个矩阵（n=4）：

```
[   1   4   1  20 ]
[   5   0   2   8 ]
[   6   8   3   8 ]
[   3   2   9   5 ] 
```

m=7，路径可以是

```
[   →   →   →   ↓ ]
[   5   0   2   ↓ ]
[   6   8   3   ↓ ]
[   3   2   9   x ] = Path cost = 47 
```

或者

```
[   ↓   4   1  20 ]
[   ↓   0   2   8 ]
[   →   →   ↓   8 ]
[   3   2   →   x ] = Path cost = 32 
```

或者如果`m = n^2`

```
[   →   →   →   ↓ ]
[   ↓   ←   ←   ← ]
[   →   →   →   ↓ ]
[   x   ←   ←   ← ] 
```

**编辑 3 / 解决方案**

感谢 Wanderley Guimarães， http:
[//ideone.com/0iLS2](http://ideone.com/0iLS2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:53:00.290

你可以用动态规划解决这个问题。让矩阵`value(i, j)`位置`(i, j)`的值（第 i 行，第 j 列）。

```
if i <  0 then f(i, j) = 0
if i == 0 then f(i, j) = value(i, j)
if i >  0 then f(i, j) = max(f(i-1, j), f(i, j-1)) + value(i, j) 
```

该重复假设您在下台时使用矩阵中的位置。所以，你的答案是`max(f(m, 0), f(m-1, 1), f(m - 2, 2), ..., f(1, m))`。

例如：

给出以下矩阵`n = 4`：

```
1 1 1 1
1 2 1 1
2 1 1 1
1 2 1 1 
```

如果`m = 2`那么你不能去第二行。而你的答案是`f(2, 2) = 4`。

如果`m = 4`那么你不能去第三行。而你的答案是`f(3, 2) = 5`。

*（我正在学习英语，所以如果您不明白某些内容，请告诉我，我会尽力改进我的解释）。*

**编辑 :: 允许向下/向左/向右移动**

您可以实现以下重复：

```
if i == n, j == n, p == m, j == 0 then f(i, j, p, d) = 0
if d == DOWN  then f(i, j, p, d) = max(f(i+1, j, p+1, DOWN), f(i, j-1, p+1, RIGHT),   f(i, j+1, p+1,LEFT)) + value(i, j)
if d == LEFT  then f(i, j, p, d) = max(f(i+1, j, p+1, DOWN), f(i, j+1, p+1, LEFT )) + value(i, j)
if d == RIGHT then f(i, j, p, d) = max(f(i+1, j, p+1, DOWN), f(i, j-1, p+1, RIGHT)) + value(i, j) 
```

这个解决方案是`O(n^4)`。*我正在努力改进它。*

您可以在[http://ideone.com/tbH1j进行测试](http://ideone.com/tbH1j)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:37:21.280

这个问题是众所周知的。最有效的方法是动态规划。

Let`dp[i][j]`是从 0,0 到 i,j 时的最大总和。
然后，`dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]) + matrix[i][j]`;

完成此操作后，检查您能够到达的每个位置值并获得最大值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:32:38.023

这实际上是一个 DAG，因此最长路径问题的动态规划解决方案有效。

你说为什么是 DAG？从水平相邻的两个顶点开始有一个明显的循环。当然，如果您使用“明显”的图表。

不太明显的方法是将其重新设计为（顶点，方向）的图形，其中方向是您从下/左/右采取的最后一个方向。具有向下方向的顶点可以向下、向左或向右，而具有向右方向的顶点只能向下/向右，而具有向左方向的顶点只能向左/向下。该图显然是无环的，它包含原始矩阵中的所有可能路径。

因此，忽略 limit `m`，到 (a, b, direction) 的最长路径的可能递归是

```
pdl[i][j] = max(pdl[i][j-1], pd[i-1][j])+arr[i][j];
pdr[i][j] = max(pdr[i][j+1], pd[i-1][j])+arr[i][j];
pd[i][j] = max(pdl[i][j], pdr[i][j]);

```

`pd`是“向下”顶点的数组，`pdr`右边`pdl`是左边的。作为一个实现细节，请注意我将左侧的最大值和对应的向下顶点保留在 中`pdl`，但这并不重要，因为任何具有“向下”方向的顶点都可以像“左侧”顶点一样向左和向下移动。对`pdr`.

限制意味着您必须向该 DP 解决方案添加另一个维度，也就是说，您必须保持`pd[i][j][moves]`, 保持尽可能高的总和，直到顶点 (i, j) 使用精确`moves`的移动，获得递归

```
pdl[i][j][moves] = max(pdl[i][j-1][moves-1], pd[i-1][j][moves-1])+arr[i][j ];
pdr[i][j][moves] = max(pdr[i][j+1][moves-1], pd[i-1][j][moves-1])+arr[i][j ];
pd[i][j][moves] = max(pdl[i][j][moves-1], pdr[i][j][moves-1]);

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-21T19:29:15.250

这个问题可以使用递归和回溯来解决。保持到目前为止所涵盖的步骤数和迄今为止的路径成本。

这是我的实现 [https://ideone.com/N6T55p](https://ideone.com/N6T55p)

```
void fun_me(int arr[4][4], int m, int n,int i,int j,int steps,int cost)
{

//cout<<steps<<endl;
if(i>=n || j>=n)
    return;
visited[i][j]=1;
if(i==n-1 && steps==m-1)
{
    if(maxer<arr[i][j]+cost)
        maxer=arr[i][j]+cost;
    //cout<<arr[i][j]+cost<<endl;
}

if(isvalid(i+1,j,n) && !visited[i+1][j])
    fun_me(arr,m,n,i+1,j,steps+1,cost+arr[i][j]);

if(isvalid(i,j+1,n) && !visited[i][j+1])
    fun_me(arr,m,n,i,j+1,steps+1,cost+arr[i][j]);

if(isvalid(i,j-1,n) && !visited[i][j-1])
    fun_me(arr,m,n,i,j-1,steps+1,cost+arr[i][j]);

visited[i][j]=0;
return ;
} 
```

# c# - Httpwebrequest 在 3g/2g 上返回的结果与 WiFi 不同

> ID：12744426
> 
> 赞同：0
> 
> 时间：2012-10-05T10:35:32.437
> 
> 标签：c#, windows-phone-7

我编写了一个应用程序，它可以抓取某个网站以获取信息。

通过 WiFi 或在我的模拟器中，它可以完美运行。

我执行一个httpwebrequest，读取每一行并将它们放入一个列表中，然后我可以遍历这个列表并找到我需要的数据。

但是，当我在 2G 或 3G 上尝试相同的操作时，Web 请求会在一行中返回所有 HTML，这会破坏我的所有代码。

有谁知道它为什么要这样做，或者我是否有办法在不重写我的大部分代码的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:39:51.217

您的提供商很可能会拦截您的请求并从中删除所有不必要的字符，以加快互联网连接并减少流量。这是常见的做法。如果这破坏了您的代码，那么您应该确定为什么删除这样的空格和字符会破坏您的代码。

您对此无能为力。您应该重写代码以减少限制。

# oracle - 删除重复行 - Oracle

> ID：12744428
> 
> 赞同：1
> 
> 时间：2012-10-05T10:35:38.160
> 
> 标签：oracle, plsql, duplicate-removal, rowid

这是我的一些数据的示例。我正在尝试删除 QueryID 和 RoyID 与表中其他条目相同的所有额外数据，但是，我想保留至少一条记录。我不确定我能否在 ID 列上使用 min 或 max 函数，因为某些记录具有 DEMO_12345 等 ID。

```
ID          QUERY_ID ROYALTY_ID
RTSQR1652   SQ1421  ROY25644005
RTSQR1653   SQ1421  ROY25636406
RTSQR1654   SQ1421  ROY25636557
RTSQR1655   SQ1421  ROY25636558
RTSQR1656   SQ1421  ROY25636559
RTSQR1657   SQ1421  ROY25636560 
```

我正在考虑使用 ROWID 而不是 ID。以下查询会起作用吗？

```
 DELETE FROM RT_SOURCE_QUERY_ROYALTIES WHERE ROWID NOT IN (
 SELECT MAX(ROWID) FROM RT_SOURCE_QUERY_ROYALTIES GROUP BY ROYALTY_ID, QUERY_ID); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T10:43:38.867

只需运行测试

```
drop table test1;

create table test1 (a number,b number, c number);

insert into test1 values (1,1,2);
insert into test1 values (1,1,3);
insert into test1 values (1,2,2);
insert into test1 values (2,1,2);
insert into test1 values (2,2,2);
insert into test1 values (1,1,2);

select * from test1;

delete from test1 where rowid not in (select max(rowid) from test1 group by a,b);

select * from test1; 
```

按预期工作，不是吗...

```
table TEST1 dropped.
table TEST1 created.
1 rows inserted.
1 rows inserted.
1 rows inserted.
1 rows inserted.
1 rows inserted.
1 rows inserted.
A B C
- - -
1 1 2 
1 1 3 
1 2 2 
2 1 2 
2 2 2 
1 1 2 

 6 rows selected 

2 rows deleted.
A B C
- - -
1 2 2 
2 1 2 
2 2 2 
1 1 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:41:36.177

[http://www.dba-oracle.com/t_delete_duplicate_table_rows.htm](http://www.dba-oracle.com/t_delete_duplicate_table_rows.htm)

使用自联接删除重复行

检测重复行的最有效方法是将表与自身连接起来，如下所示。

```
select 
   book_unique_id, 
   page_seq_nbr, 
   image_key 
from 
   page_image a 
where 
   rowid > 
     (select min(rowid) from page_image b 
      where 
         b.key1 = a.key1 
      and 
         b.key2 = a.key2 
      and 
         b.key3 = a.key3 
      ); 
```

请注意，您必须在 SQL where 子句中指定使行重复的所有列。

# mongodb - 在 MAMP 启动上运行 MongoDB

> ID：12744432
> 
> 赞同：0
> 
> 时间：2012-10-05T10:35:56.933
> 
> 标签：mongodb, mamp, mongodb-php

我正在尝试运行一个启动 MongoDB 的 shell 脚本 - 但我正在尝试在 MAMP PRO 的 start.sh 脚本中运行它，这样我就不需要通过终端窗口继续启动 MongoDB。

这不起作用，只是想知道这是否可能，或者这是一个已实施的安全功能？

脚本（startMongo.sh）是：

```
#! /bin/bash
mongod --dbpath /data/db/ --auth 
```

...我将它添加到 start.sh 脚本中，如下所示：

```
# /bin/sh
/Applications/MAMP/bin/startMysql.sh
/Applications/MAMP/bin/startApache.sh
/Applications/MAMP/bin/startMongo.sh 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:56:10.207

唔。看起来我找到了答案，但它不是我想要的！

[http://forum.mamp.info/viewtopic.php?f=2&t=8160&p=17486&hilit=startup+scripts#p17486](http://forum.mamp.info/viewtopic.php?f=2&t=8160&p=17486&hilit=startup+scripts#p17486)

# android - 如何使用 Android 使用 WCF Rest 服务

> ID：12744440
> 
> 赞同：1
> 
> 时间：2012-10-05T10:36:08.773
> 
> 标签：android, wcf, entity-framework, wcf-client, wcf-rest

这是代码片段，我在其中连接到我的 WCF 服务。

```
DefaultHttpClient client = new DefaultHttpClient();         
                            HttpGet request = new HttpGet(EMPLOYEE_LOG_IN);
                            request.setHeader("Accept", "application/json");
                            request.setHeader("Content-type", "application/json");          
                            HttpResponse response = client.execute(request);
                            HttpEntity entity = response.getEntity();
                            if(entity.getContentLength() != 0) {
                                Reader employeeReader = new InputStreamReader(response.getEntity().getContent());       
                                                //create a buffer to fill if from reader            
                                                char[] buffer = new char[(int) response.getEntity().getContentLength()];        
                                                //fill the buffer by the help of reader         
                                                employeeReader.read(buffer);                
                                                //close the reader streams              
                                                employeeReader.close(); 
                                                //for the employee json object              
                                                JSONObject employee =  new JSONObject(new String(buffer));
                                                Log.d("Response",employee.getString("FirstName")); 
```

它在不同的情况下表现出不同的方式。这是我的 WCF 服务中的代码

```
 public Controller GetEmployees(int personalNUmber)
        {                

                return new Controller
                            {
                                EmployeeId = 1,
                                FirstName = "FirstName",
                                LastName = "LastName"
                            };    
            }
        } 
```

所以当我调用这个方法时一切正常，我得到了 json 格式，但是当我编辑我的方法并像这样连接到实体数据库时

```
FineReceiptsTestEntities _entity = new FineReceiptsTestEntities();

        var t = _entity.Employees.FirstOrDefault(x => x.EmployeeID == personalNUmber);
        return new Controller
                   {

                       EmployeeId = 1,
                       FirstName = t != null ? t.Name : " ",
                       LastName = "LastName"
                   }; 
```

Json 对象未返回。仅返回带有此类**错误**的html 内容

> 服务器在处理请求时遇到错误。请参阅服务帮助页面以构建对服务的有效请求。

但是浏览器中的两种方法都可以正常工作并返回相关数据。

这是我的**web.config**

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint helpEnabled="true" automaticFormatSelectionEnabled="true" />
      </webHttpEndpoint>
    </standardEndpoints>
    <services>
      <service name="dev_FineReceiptsService.ControllersInfo">
        <endpoint kind="webHttpEndpoint" contract="dev_FineReceiptsService.IControllersInfo" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel>
  <connectionStrings>
    <add name="FineReceiptsTestEntities" connectionString="metadata=res://*/FineTest.csdl|res://*/FineTest.ssdl|res://*/FineTest.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=msdev01;Initial Catalog=FineReceiptsTest;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

那么谁能告诉我使用实体检索数据时有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:18:36.850

您的帖子中没有足够的信息来确定原因。您必须发布 RAW HTTP 响应以供任何人帮助。服务器可能返回 HTTP 415，因为您没有正确构建请求。

```
request.setHeader("Content-type", "application/json"); 
```

您正在将 GET 请求的内容类型设置为 json。这是不可能的。服务器可能会尝试匹配它并感到困惑。也可能是服务器在请求中有真正的 HTTP 500 错误。从构造响应错误的方式来看，服务似乎在抱怨请求本身无效。

```
server encountered an error processing the request.Please see the service help page for constructing valid requests to the service. 
```

# javascript - 任意内容的延迟加载分页

> ID：12744441
> 
> 赞同：0
> 
> 时间：2012-10-05T10:36:17.653
> 
> 标签：javascript, jquery, pagination

我一直在使用 jpaginate 来获得大量数据的分页效果。它工作正常，但所有内容一次加载。是否有一个 jQuery 分页插件，它只为当前页面加载内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:19:17.703

For tabular data you can make use of [jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html).

# sql - 为每个不同的外键选择第二高的值

> ID：12744444
> 
> 赞同：7
> 
> 时间：2012-10-05T10:36:30.897
> 
> 标签：sql, sql-server, sql-server-2005

所以，我有两个表，帐户和发票，它们由帐户表中的主键链接，即。account.key 和 invoice.key。

我想为每个帐户的第二个最新发票日期选择 account.accountnumber、invoice.invoicedate、invoice.invoiceamount。

有任何想法吗？

因此，要选择所有发票及其对应的帐号：

```
select a.accountnumber, i.invoicedate, i.invoiceamount
from account a
join invoice i on (a.key = i.key) 
```

并从整个发票表中选择第二张最新发票：

```
select MAX(invoicedate) from INVOICE i where invoicedate NOT IN (SELECT MAX(invoicedate) from i 
```

但是，如何从发票表中获取每个帐户的第二张最新发票以及帐户表中的帐号？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:42:22.743

通过使用[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx)窗口函数...

```
select accountnumber, invoicedate, invoiceamount 
from 
(
    select a.accountnumber, i.invoicedate, i.invoiceamount, 
        row_number() over (partition by a.accountnumber order by invoicedate desc) rn
    from account a 
        join invoice i on a.[key] = i.[key]
) v
where rn = 2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T11:26:16.657

尝试使用这个：

```
select a.accountnumber, i.invoicedate, i.invoiceamount 
from account a 
join invoice i on a.[key] = i.[key]
and i.invoicedate in
(select max(invoicedate) as secondmaxdate from invoice where invoicedate not in
(select max(invoicedate) as maxdate from invoice group by [key])
group by [key]) 
```

# c# - ajax登录后jquery对话框未关闭

> ID：12744445
> 
> 赞同：0
> 
> 时间：2012-10-05T10:36:34.080
> 
> 标签：c#, asp.net, asp.net-mvc-3, jquery

我在 MVC3 应用程序上使用 JQuery UI Dialog 弹出登录框。目前我已经让用户登录并刷新父页面上的“登录状态”div，如果不成功，在弹出窗口中显示验证错误。但是，如果我在登录表单中按下取消按钮，弹出窗口不会关闭，并且它也不会在成功登录时关闭。任何人都可以看到我的代码明显有问题吗？非常感谢。

登录按钮点击事件：

```
$('a#login').click(function (e) {                    
var url = '@Url.Action("LogOnPartial", "Account")';
var dialog = $('<div id="ModalDialog" style="display:none"></div>').appendTo('body');
$.get('@Url.Action("LogOnPartial", "Account", null)', function (response) {
    dialog.html(response)
    dialog.dialog({
        bgiframe: true,
        modal: true,           
        width: 500,                       
        closeOnEscape: false,
        buttons: {
            "Submit": function () {
                $("#refresh").submit();
            },
            "Cancel": function () {
                $("#ModalDialog").dialog("close");
                // EDIT - This part now working - solution below:
                //dialog.dialog("close");
            }
        }
    });
});
}); 
```

登录表单部分视图

```
 @using (Ajax.BeginForm("LogOn", "Account", new AjaxOptions { OnSuccess = "success",  UpdateTargetId = "loginDialog" }, new { @id = "refresh"}))
    {

            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>
            <a href="@Url.Content("~/Account/ForgotPassword")">Forgot Password?</a>
            <div class="editor-label">
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe)
            </div>
            <input type="submit" value="Log On" style="display:none" />
    }

</div>

<script type="text/javascript">
    function success(result) {
        if (result.success) {
            $('#loginStatus').load("@Url.Content("~/Account/LogOnStatus")");
            $(this).dialog('destroy').remove();
        } 
    }
</script> 
```

如果有必要，我也可以发布控制器代码。基本上，如果成功则返回`json success = true`，否则返回带有验证错误的部分视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:51:50.277

执行 ajax 函数后`this`不再是对话框，
您必须通过 id 指定具体 div 或将`this`对话框保存到其他地方的变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:46:22.927

尝试这个：

```
 dialog.dialog({
        bgiframe: true,
        modal: true,           
        width: 500,                       
        closeOnEscape: false,
        buttons: {
            "Submit": function () {
                $("#refresh").submit();
                dialog.dialog("close");
            },
            "Cancel": function () {
                dialog.dialog("close");
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:21:31.527

我找到了一种解决方法，但感觉有点笨拙，因为错误控制台会短暂显示错误。而不是这一行：

```
var dialog = $('<div id="ModalDialog" style="display:none"></div>').appendTo('body'); 
```

我把它改成

```
dialog = $('<div id="ModalDialog" style="display:none"></div>').appendTo('body'); 
```

这使得变量是全局的并转移到部分视图。然后我就可以使用

```
dialog.dialog('destroy'); 
```

令人愤怒的问题 - 无论如何感谢所有建议。

# javascript - 下划线js通过ID查找项目

> ID：12744447
> 
> 赞同：41
> 
> 时间：2012-10-05T10:36:44.530
> 
> 标签：javascript, underscore.js

我是 Underscore js 的新手，对如何使用它有点困惑。我有一组“目标”，我想通过 ID 找到其中一个。

这是数据：

```
{"goal":[
    {
        "category" : "education",
        "title" : "Charlie University",
        "description" : "Lorem ipsum dolor sit amet",
        "date" : "01/03/2020",
        "value" : 50000,
        "achievability" : 3,
        "experimental_achievability": 3,
        "suggested": false,
        "accounts": [
            {
                ...
            },
            {
                ...
            }
        ],
        "articles": [
            {
                ...
            },
            {
                ...
            },
            {
                ...
            }
        ],
        "related_goals": [
            {
                ...
            }
        ],
        "id":"1"
    },
    {
        "category" : "family",
        "title" : "Getting married",
        "description" : "Lorem ipsum dolor sit amet",
        "date" : "01/03/2022",
        "value" : 10000,
        "achievability" : 3,
        "experimental_achievability": 2,
        "suggested": true,
        "accounts": [
            {
                ...
            }
        ],
        "articles": [
            {
                ...
            },
            {
                ...
            },
            {
                ...
            }
        ],
        "related_goals": [
            {
                ...
            }
        ],
        "id":"2"
    }
    ...
]} 
```

这就是我正在尝试的，我想获取整个数组/对象，以便我可以获取它的每个字段：

```
var goalId = 1;
_.each(result.goal, function(item){
    _.find(result.goal, function(i){
         return i = goalId;
    });
}); 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-05T10:49:28.350

# 更新

现在是 2016 年，我们可能不需要下划线来实现这一目标。使用`Array.prototype.find()`. 如果数组中的元素满足提供的测试功能，则返回数组中的值。否则返回未定义。

```
 // Underscore
  var users = [
    { 'user': 'barney',  'age': 36, 'active': true },
    { 'user': 'fred',    'age': 40, 'active': false },
    { 'user': 'pebbles', 'age': 1,  'active': true }
  ]

  _.find(users, function (o) { return o.age < 40; })
  // output: object for 'barney'

  // Native
  var users = [
    { 'user': 'barney',  'age': 36, 'active': true },
    { 'user': 'fred',    'age': 40, 'active': false },
    { 'user': 'pebbles', 'age': 1,  'active': true }
  ]

  users.find(function (o) { return o.age < 40; })
  // output: object for 'barney' 
```

浏览器支持

```
--------------------------------------------
| Chrome | Firefox | Safari |  IE  | Opera |
|--------|---------|--------|------|-------|
|   45   |    25   |  7.1   | Edge |  32   |
-------------------------------------------- 
```

更多信息[MDN上的 polyfill](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find)

* * *

**更新**：我发现`_.where`总是返回一个数组。[`_.findWhere`](http://underscorejs.org/#findWhere)返回它找到的第一个对象，因此如果您期望返回单个对象，则使用它会更好。

* * *

你可以使用[`_.where`](http://underscorejs.org/#where)它更容易。

如果是这样的：

```
var goal  = [

    {
        "category" : "education",
        "title" : "Charlie University",
        "description" : "Lorem ipsum dolor sit amet",
        "date" : "01/03/2020",
        "value" : 50000,
        "achievability" : 3,
        "experimental_achievability": 3,
        "suggested": false,
        "accounts": [],
        "articles": [],
        "related_goals": [],
        "id":"1"
    },
    {
        "category" : "education",
        "title" : "Charlie University",
        "description" : "Lorem ipsum dolor sit amet",
        "date" : "01/03/2020",
        "value" : 50000,
        "achievability" : 3,
        "experimental_achievability": 3,
        "suggested": false,
        "accounts": [],
        "articles": [],
        "related_goals": [],
        "id":"2"
    },
    {
        "category" : "education",
        "title" : "Charlie University",
        "description" : "Lorem ipsum dolor sit amet",
        "date" : "01/03/2020",
        "value" : 50000,
        "achievability" : 3,
        "experimental_achievability": 3,
        "suggested": false,
        "accounts": [],
        "articles": [],
        "related_goals": [],
        "id":"3"
    },
    {
        "category" : "education",
        "title" : "Charlie University",
        "description" : "Lorem ipsum dolor sit amet",
        "date" : "01/03/2020",
        "value" : 50000,
        "achievability" : 3,
        "experimental_achievability": 3,
        "suggested": false,
        "accounts": [],
        "articles": [],
        "related_goals": [],
        "id":"4"
    }
] 
```

你可以使用类似的东西：

```
var filteredGoal = _.where(goal, {id: "1"}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-08-21T07:18:07.613

您正在使用对象数组。所以，你可以使用：_。***findWhere***（查看列表并返回匹配所有键值对的第一个值）以获取基于 id 或其他键属性的所有属性。

```
var some= [
             {Employee:'ved',id:20}, 
             {Employee:"ved",age:25},
             {Employee:"p",age:2}
          ];

var a = _.findWhere(some,{id:20});
console.log('searchResult',a); 
```

要获取索引，您可以使用以下内容：

```
var b = _.indexOf(some,a);
console.log('index',b); 
```

***如果您需要所有使用列表***，
**请尝试**： ***_. where***（它查看数组中的每个匹配项，返回包含属性中列出的键值对的所有值的数组。）

```
var some= [ 
            {Employee:"ved",id:20}, 
            {Employee:"ved prakash",id:20},
            {Employee:"anyone",id:2}
          ];
var a = _.where(some,{id:25});
    console.log('searchResult',a); 
```

> _.find：它只用于检查值，而不是同时检查键值。

访问文档： _. [find](http://underscorejs.org/#find)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-05T10:47:46.220

已经简化了您的数据模型，但是像这样？

```
var goals = [{id:1, name:'Goal1'},
             {id:2, name:'Goal2'},
             {id:3, name:'Goal3'}];

function getGoal(id) {
    return _.find(goals, function(goal) {
        return goal.id === id;
    });
}

alert(getGoal(2).name); 
```

[您可以在这个jsFiddle](http://jsfiddle.net/GugDD/)中看到这一点。

# c# - 如何缩短 WCF 客户端的超时时间

> ID：12744449
> 
> 赞同：2
> 
> 时间：2012-10-05T10:37:01.937
> 
> 标签：c#, wcf, wcf-client

如何缩短 WCF 客户端的超时时间。我想定期调用一些 WCF 服务并检查它是否可用。我希望对服务方法的调用不超过一秒。我试图操纵不同的超时，但在每种情况下它都执行超过 20 秒。

你会在下面找到我的代码：

服务：

```
[ServiceContract]
public interface ICustomerManager
{
    [OperationContract]
    void StoreCustomer(string customerName);

    [OperationContract]
    void Ping();
}
[ServiceBehavior(IncludeExceptionDetailInFaults=true)]    
public class CustomerManager : MarshalByRefObject, ICustomerManager
{
    public void StoreCustomer(string customerName)
    {
        if(customerName == null) throw new ArgumentNullException("customerName");
        Console.WriteLine(customerName + " stored.");
    }

    public void Ping()
    { 
    }
} 
```

客户：

```
var binding = new NetTcpBinding(SecurityMode.None);
binding.OpenTimeout = TimeSpan.FromSeconds(1);
binding.SendTimeout = TimeSpan.FromSeconds(1);
binding.ReceiveTimeout = TimeSpan.FromSeconds(1);
binding.CloseTimeout = TimeSpan.FromSeconds(1);
binding.ReliableSession.Enabled = true;
var bindingElements = binding.CreateBindingElements();
var tcpBindingElement = bindingElements.Find<TcpTransportBindingElement>();
tcpBindingElement.ChannelInitializationTimeout = TimeSpan.FromSeconds(1);            

var factory = new ChannelFactory<ICustomerManager>(binding, "net.tcp://10.68.117.19:9998/CustomerManager");
var customerManager = factory.CreateChannel();
var contextChannel = customerManager as IClientChannel;

contextChannel.OperationTimeout = TimeSpan.FromMilliseconds(1000);

var start = DateTime.Now;
 try
 {
     customerManager.Ping();
 }
 catch (CommunicationException)
 {
     var elapsed = DateTime.Now - start;
     Console.WriteLine("elapsed: {0}", elapsed);
 } 
```

输出是： `elapsed: 00:00:20.8662525`

如何使它执行不超过一秒钟。

我没有为我的服务器附加代码，因为我正在测试一个不可用的案例。

我在 msdn 论坛[链接](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/80f576b8-9d6d-4043-a1a2-8decb8e165a6)上发现了非常相似的问题，不幸的是，那里的答案也不起作用。

# jpa - 在 JPA+Eclipselink 多对多双向关系中添加所有者侧对象

> ID：12744460
> 
> 赞同：2
> 
> 时间：2012-10-05T10:37:35.833
> 
> 标签：jpa, many-to-many, persist, bidirectional, owner

我正在使用 JPA 和 Eclipselink。

我的问题是，在@ManyToMany 双向关系中，当另一方对象之前创建并保留时，如何在所有者方正确添加新对象。

我有两个实体类，Group 和 Person，它们之间存在 @ManyToMany 双向关系。Group 是所有者，因此在 Person 类中声明了 mappedBy 属性：

```
@Entity
public class Group {

    [...]

    @ManyToMany                // no mappedBy -> this is the owner side
    List<Person> persons;
}

@Entity
public class Person {
     [...]    
     @ManyToMany(mappedBy="persons")
     List<Group> groups;
} 
```

当我先创建组对象然后添加人员时，一切正常。但是，如果我首先创建并保留 Persons 然后添加 Groups，我就会遇到一些问题。这是代码：

```
[...]

// Creating and persisting some Person object
em.persist(new Person("Sneezy"));   // em is the EntityManager
em.persist(new Person("Happy"));

[...]

// (the two person objects are retreived from the database)
List<Person> personList = findAllPerson(); 

// Creating a new Group object
Group g = new Group("Dwarfs");

// Adding the Person objects to the new Group object
g.getPersons().add(personList.get(0));
g.getPersons().add(personList.get(1));

// Refreshing the other direction too:
personList.get(0).getGroups().add(g);
personList.get(1).getGroups().add(g);

// Persisting the new Group object
em.persist(g); 
```

现在我可以检查数据库是否正确包含所有数据。新组在组表中，正确的关系在 group_person 连接表中。

但是，如果我对 Group 对象进行查询，它包含相关的 Person 对象，但该 Person 对象的组列表不包含添加它们的 Group 对象。所以后面的方向不存在。

```
List<Group> groups = findAllGroup();
List<Person> persons = findAllPerson(); 
```

为什么不？数据库包含它的所有数据。实际上，如果我在检索之前进行 JPA 缓存清除，则反向方向就在那里。所以我的问题似乎是 JPA 中的缓存问题。我的缓存清除代码：

```
em.getEntityManagerFactory().getCache().evictAll(); 
```

好吧，让我们想想。我看到 person 类中的修改实际上并没有合并（只有 Group 对象被持久化），因此 JPA 缓存包含 Person 对象而没有反向关系。好的，让我们尝试级联来解决这个问题。我已将 CascadyType.PERSIST 添加到 Groups 类的 people 属性中。

```
 @ManyToMany(cascade=CascadeType.PERSIST)
    List<Person> persons; 
```

但在这种情况下，新组对象的持久化会在数据库中创建人员对象的新实例，而不是使用已检索并添加到组对象中的现有人员对象。

好的，让我们试试 CascadeType.MERGE：

```
 @ManyToMany(cascade=CascadeType.MERGE)
    List<Person> persons; 
```

在这种情况下，对新 Group 对象的持久化操作会在后备数据库中生成正确的数据，但是 JPA 缓存仍然包含缺少方向的 Person 对象。

下一个想法是，在持久化 Group 对象之后，我也进行了合并操作，以在 Person 对象中引发级联合并。

```
em.persist(g);
em.merge(g); 
```

瞧，合并操作（与 Group 类中的 CascadeType.MERGE 参数一起）解决了这个问题。

但我不喜欢缓存清除或这个解决方案。我认为只有在其他线程在后台更改数据库时才需要清除缓存。但是我通过同一个 EntityManager 更改了数据库，因此它应该知道所有更改而不清除其缓存。而另一种解决方案也不行。为什么我应该在持久操作之后立即进行合并操作对我来说是不合逻辑的。

我认为这个问题应该有一个共同的真正解决方案。有人可以帮忙吗？

# c# - C# 将整数转换为 ASCII 字节

> ID：12744477
> 
> 赞同：-2
> 
> 时间：2012-10-05T10:38:32.590
> 
> 标签：c#

```
int i =5;
byte j[2]; 
```

以上是我所拥有的。我希望 5 等于十六进制 0x35，即 ASCII 中的“5”。我该如何写才能转换`j[0]= i = 0x35` 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:51:46.303

只需在 google 查询中输入“ascii”并进行第一次点击，您会看到数字的偏移量为 48。

有点笨拙但始终正确的方法是使用 Encoding 类：

```
 byte[] j = Encoding.ASCII.GetBytes(i.ToString()); 
```

这将为您提供一个长度为 1 的数组，即正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:45:20.853

用这个：

```
j[0] = (byte)('0' + i); 
```

这使得当 i 为 0 时，它将只是 i，并且对于 i 的每增加一次，它也会增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:39:26.270

只需添加`0x30`并再次`i`将结果转换为`byte`：

```
j[0] = (byte)(i + 0x30); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:41:56.733

您可以为此使用 char/int 算术

```
j[2] = '0' + (byte)i; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T10:49:51.273

由于 .NET 不使用 ASCII 进行字符串编码，因此“正确”的做法有点迂回：

```
byte[] result = Encoding.ASCII.GetBytes(i.ToString()); 
```

（这需要`System.Text`导入命名空间。）

由于 ASCII 编码非常简单（即对应于 .NET 的前 127 个代码点的内部字符编码），您也可以作弊并使用其他答案中提出的方法（即添加`'0'`或`0x30`显式转换为`byte`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-27T17:33:20.803

您也可以使用`char`. 它解决了一个相关的问题。

```
char A = 'A';
char B = A++; 
```

# c# - 是否可以跨类的部分声明运行多个静态初始化程序或类似程序？

> ID：12744483
> 
> 赞同：0
> 
> 时间：2012-10-05T10:39:03.890
> 
> 标签：c#, c#-4.0

我们的控制系统有很多具有特定版本的数据文件。数据文件是“仅附加”的，因此更高版本将始终包含早期版本中定义的超集。

为了避免在我们的代码中出现“幻数”，我们创建了一个代码生成器，它获取一段数据并将其转换为 C# 类文件。我有一个非常大的类库，几乎只包含这样的文件。这会导致代码更具可读性和一些额外的编译器检查，因为以前有风险的类型转换现在可以成为生成代码的一部分，以便库的用户直接使用他们正确的子类型。

但是，问题出现在最新版本的类库中使用了什么数据文件版本。我希望每个类文件都“贡献”到一个全局列表。如果静态构造函数自动运行，我会这样做：

```
// GlobalConstants.cs (not generated)
public static partial class GlobalConstants
{
    public static List<string> Lst = new List<string>(); 
    static void AddVersionInfo(string mod)
    {
        Lst.Add(mod);
    }
}

// Motor.cs
public static partial class GlobalConstants
{
    // Generated from Motor metadata
    public class MotorUtil
    {            
        public const int SomeConst1 = 2;
        static MotorUtil()
        {
            AddVersionInfo("<Motor version info>");
        }
    }
}

// Tank.cs
public static partial class GlobalConstants
{
    // Generated from Tank metadata        
    public class TankUtil
    {
        public const int SomeConst1 = 2;
        public const int SomeConst2 = 3;
        public const int SomeConst3 = 5;
        static TankUtil()
        {
            AddVersionInfo("<Tank version info>");
        }
    }
} 
```

如果静态构造函数自动运行，这将导致每个生成的文件（tank.cs、motor.cs、boiler.cs 等）都被添加到列表中，可以通过工具进行检查。

一个编译时 MEF，如果你喜欢的话。

很遗憾。如果我打印出“Lst”的内容，那么它总是一个空列表，因为静态构造函数没有运行。

这些 .cs 文件来自不同的各方，不应要求 GlobalConstants.cs 的作者了解它们。我的问题是：有没有一种方法可以生成此代码，以便可以随意添加生成的 .cs 文件，它们将出现在“Lst”列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:43:16.753

在第一次引用这些嵌套类之前，每个嵌套类的静态构造函数都不会运行。上面的代码中没有发生这种情况，因此列表为空。

我可以想象您可能能够做到这一点的一种方法是让`GlobalConstants`类中的静态初始化程序使用反射来查找嵌套类。

或者，也许您可​​以在每个引用嵌套类的分部类文件中添加一个静态字段，强制其静态构造函数运行：

```
public static partial class GlobalConstants
{
    // Generated from Tank metadata        

    private static TankUtil _unusedTankUtilField = new TankUtil();

    public class TankUtil
    {
        public const int SomeConst1 = 2;
        public const int SomeConst2 = 3;
        public const int SomeConst3 = 5;
        static TankUtil()
        {
            AddVersionInfo("<Tank version info>");
        }
    }
} 
```

另外我不相信跨部分类文件的静态初始化程序的执行顺序是严格定义的（大概对应于编译器处理它们的顺序）。所以我建议你让你的“AddVersionInfo”方法负责初始化列表：

```
public static partial class GlobalConstants
{
    public static List<string> Lst; 
    static void AddVersionInfo(string mod)
    {
        if (Lst == null) Lst = new List<string>();
        Lst.Add(mod);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:09:14.197

对于更简单的语法，您可以使用属性而不是静态类来完成。

如果你定义一个属性；

```
public class UtilVersionAttribute : Attribute
{
    private readonly string _versionInfo;

    public UtilVersionAttribute(string versionInfo) { _versionInfo = versionInfo; }

    public string VersionInfo { get { return _versionInfo; } }
} 
```

...您可以改为将类归类...

```
public static partial class GlobalConstants
{
    [UtilVersion("<Motor version info>")]
    public class MotorUtil
    {
        public const int SomeConst1 = 2;
    }
} 
```

...并在程序第一次开始使用时更新它...

```
static void UpdateVersionInfo(Assembly assembly)
{
    foreach (Type type in assembly.GetTypes())
    {
        var attribute = 
            type.GetCustomAttributes(typeof (UtilVersionAttribute), true)
                .FirstOrDefault();

        if(attribute != null)
            GlobalConstants.Lst.Add((attribute as UtilVersionAttribute).VersionInfo);
    }
}

static void Main(string[] args)
{
    var assembly = Assembly.GetExecutingAssembly();
    UpdateVersionInfo(assembly);

    GlobalConstants.Lst.ForEach(Console.WriteLine);
} 
```

...查看您的版本的完整列表。

MEF 在这里也可能有所帮助，您可能需要考虑使用它而不是实现“轻量版”。即使您的静态构造函数注册也是运行时注册，而不是编译时间，所以我不确定您远离它的原因。

# php - 密件抄送标头发送电子邮件的问题

> ID：12744485
> 
> 赞同：0
> 
> 时间：2012-10-05T10:39:09.930
> 
> 标签：php

我有这个代码应该允许我向多个地址发送电子邮件，但是问题是，它不会将它们发送到多个密件抄送...

这是代码：

```
$emailbcc=$_POST['emailbcc'];
$sub=$_POST['subject'];
$msg=$_POST['message'];
$emailbcc1= implode("," , $emailbcc);
if($emailbcc!=''){

// multiple recipients
$to = 'address';

// subject
$subject = $sub;

// message
$message = $msg;

// To send HTML mail, the Content-type header must be set
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'From: Up!<address>' . "\r\n";
$headers .= 'Bcc: '.$emailbcc1.'' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers); 
```

`$emailbcc1`是一些电子邮件，我使用复选框获取它们...这有什么问题？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:41:59.353

您必须向他们发送电子邮件：

```
$emailbcc1 = implode(">, <" , $emailbcc);
$emailbcc1 = '<'.$emailbcc1.'>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:41:44.427

确保这些邮件地址用`,`!分隔。

例如，当您有一个包含地址的数组时：

```
$addresses = array('example1@example.com', 'example2@example.com'); 
```

您可以通过以下方式设置标题：

```
$headers .= 'BCC: ' + implode(',', $addresses) + '\r\n'; 
```

# google-maps - 谷歌地图事件点击监听器

> ID：12744487
> 
> 赞同：1
> 
> 时间：2012-10-05T10:39:18.733
> 
> 标签：google-maps

我一直在尝试在谷歌地图上创建一些多边形叠加层，点击后将链接到新窗口中的另一个网页。然而，它只链接到最后生成的多边形的 URL。任何想法为什么？我想我错过了一些基本的东西，但这与我如何生成多边形然后尝试从中提取 URL 有关吗？

```
<script type="text/javascript"> 
  var mapSquares = {};

  mapSquares['square1'] = {
    coords: [
      new google.maps.LatLng(52.572177, -0.247192), 
      new google.maps.LatLng(52.612177, -0.247192), 
      new google.maps.LatLng(52.612177, -0.347192),
      new google.maps.LatLng(52.572177, -0.347192)
            ],
    url: 'http://www.google.co.uk'
  };

  mapSquares['square2'] = {
    coords: [
      new google.maps.LatLng(52.522177, -0.247192), 
      new google.maps.LatLng(52.572177, -0.247192), 
      new google.maps.LatLng(52.572177, -0.347192),
      new google.maps.LatLng(52.522177, -0.347192)
            ],
    url: 'http://www.bbc.co.uk'  
  }

var allMapSquares;

function initialize() { 
  var myLatLng = new google.maps.LatLng(52.572177, -0.247192); 
  var mapOptions = { 
    zoom: 12, 
    center: myLatLng, 
    mapTypeId: google.maps.MapTypeId.TERRAIN 
  }; 

var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions); 

  for (var mapSquare in mapSquares) {
    var drawMapSquare = { 
      paths: mapSquares[mapSquare].coords, 
      strokeColor: "#FF0000", 
      strokeOpacity: 0.8, 
      strokeWeight: 3, 
      fillColor: "#FF0000", 
      fillOpacity: 0.35,
      map: map 
    }; 

    google.maps.event.addListener(drawMapSquare, 'click', function() {
         window.open(mapSquares[mapSquare].url,'_blank');
    });

    allMapSquares = new google.maps.Polygon(drawMapSquare);

  }

}
</script> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:03:25.417

当您放入 for 循环并将 mapSquare 作为 mapSquares[] 数组变量的索引传递时，它采用最后一个值，因为 for 循环迭代到并且 mapSquare 的最后一个位置是最后一个，所以它会根据您的 for 循环始终占据最后一个位置，这就是您的原因总是最后一个链接

```
google.maps.event.addListener(drawMapSquare, 'click', function() {
     window.open(mapSquares[mapSquare].url,'_blank'); // here this will call when you click and at that time mapSqare position was last.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:04:55.280

我也遇到了这个问题，简单的方法是：将实际创建InfoWindow的代码块放入单独的函数调用中。这实际上将避免全局和局部变量问题。

[Pratik](https://stackoverflow.com/users/760489/pratik%20Pratik)的回答中解释了原因。

# html - 以分块模式返回 ajax 响应

> ID：12744500
> 
> 赞同：0
> 
> 时间：2012-10-05T10:40:17.410
> 
> 标签：html, ajax, jquery

我想制作一个进度条来处理服务器中的一些数据。我不想重新加载页面或转到另一个页面，所以我使用了 ajax 请求：

```
$.ajax({
    type: "POST", 
    url: "/process.php",
    dataType: "script",
    data: "foo=bar",
    success: function(data){

    }
}); 
```

此请求返回一些代码，例如：

```
set_progress(50); 
```

在分块模式下一遍又一遍。但是ajax等到请求完成然后返回响应数据！所以这没有用:(

之后我测试了另一种方式。我将 iframe 用于常规的 http 表单。

```
<form action="/process.php" method="post" target="iframe" id="formid">
   <input type="hidden" name="foo" value="bar" />
</form>
<iframe name="iframe"></iframe> 
```

甚至这种方法也不起作用:(((它将在请求结束时运行所有javascript代码而不是抛出请求！

我知道完成这项工作的常规工作是将用户发送到另一个页面，然后发送分块数据，例如：

```
<script type="text/javascript">setProgress(percent);</script> 
```

但我更喜欢不使用这种方式；）有什么办法可以做到这一点？

# apache - .htaccess 测试查询参数而不是 FilesMatch

> ID：12744506
> 
> 赞同：1
> 
> 时间：2012-10-05T10:40:59.807
> 
> 标签：apache, .htaccess

我有以下 htaccess 文件：

```
<filesMatch "\.png$">
<ifModule mod_headers.c>
Header set Cache-Control "public"
Header set Content-Description "File Transfer"
Header set Content-Disposition "attachment"
Header set Content-Type "image/png"
Header set Content-Transfer-Encoding "binary"
</ifModule>
</filesMatch> 
```

我想测试 %{QUERY_STRING} 而不是执行文件匹配。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:43:23.343

您将无法仅使用您的 htaccess 文件来执行此操作。您将需要编写脚本或其他内容来设置标头，然后使用以下内容将请求映射到脚本：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^dl=true$
RewriteRule ^(.*)\.png$ /image_dl.php?file=$1.png [L] 
```

然后在你的 image_dl.php 脚本中：

```
<?php
header('Cache-Control: public');
header('Content-Description: File Transfer');
header('Content-Disposition: attachment');
header('Content-Type: image/png');
header('Content-Transfer-Encoding: binary');

$file = $_GET['file'];
header("Content-length: ".filesize($file));  

ob_clean();
flush();
readfile($file); 
?> 
```

# sharepoint - 在共享点的链接数据视图中获取列表名称

> ID：12744511
> 
> 赞同：0
> 
> 时间：2012-10-05T10:41:19.167
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我对 SharePoint 很陌生，遇到了一些麻烦。基本上，我的 SharePoint 网站上有几个列表，每个列表都详细说明了不同应用程序的更改请求。

我想制作一个数据视图，将所有列表连接在一起，以便一次查看所有更改请求。这部分有效，但是我还想在这个数据视图上有一个列，显示每个项目来自的列表的名称。例如

```
List name: App1
change req 1
change req 2

List Name:App2
change req 1
change req 2

Linked Data View should show
change req 1 - App1
change req 2 - App1
change req 1 - App2
change req 2 - App2 
```

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:32:17.220

1.  您可以在同一页面上使用三个 XsltListViewWebPart。每个 Web 部件将显示来自单独列表的数据。它们的标题将包含列表的名称。
2.  您可以将 DataViewWebPart 与 AggregatedDataSource 一起使用。将参数SeparateRoot 设置为True。然后自定义 XSL 以生成具有您需要的格式的表格。

# java - linux服务器中mysql中的连接太多

> ID：12744512
> 
> 赞同：0
> 
> 时间：2012-10-05T10:41:23.690
> 
> 标签：java, mysql, linux, jsp, tomcat

我在 JSP 中创建的 Cent Os 服务器中有 Web 应用程序。一段时间后，与 mysql 的连接超过了限制，如果不重新启动 mysql 服务，应用程序将无法工作。

即使我重新启动了 mysql 和 tomcat 服务，一些连接也已经由 mysql 创建。

> > [root@localhost ~]#服务tomcat重启
> > 
> > 关闭 Tomcat：使用 CATALINA_BASE：/usr/local/apache-tomcat-7.0.27 使用 CATALINA_HOME：/usr/local/apache-tomcat-7.0.27 使用 CATALINA_TMPDIR：/usr/local/apache-tomcat-7.0.27/ temp 使用 JRE_HOME：/usr/java/jre1.6.0_10 使用 CLASSPATH：/usr/local/apache-tomcat-7.0.27/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.27/bin/ tomcat-juli.jar
> > 
> > 启动 Tomcat：使用 CATALINA_BASE：/usr/local/apache-tomcat-7.0.27 使用 CATALINA_HOME：/usr/local/apache-tomcat-7.0.27 使用 CATALINA_TMPDIR：/usr/local/apache-tomcat-7.0.27/temp使用 JRE_HOME：/usr/java/jre1.6.0_10 使用 CLASSPATH：/usr/local/apache-tomcat-7.0.27/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.27/bin/tomcat -juli.jar
> 
> [root@localhost ~]#
> 
> 服务mysql重启
> 
> 关闭 MySQL。[ 好的 ]
> 
> 启动 MySQL ...... [ 好 ]
> 
> [root@localhost ~]# netstat | grep mysql | wc -l
> 
> 180

如上所示，它显示了 180 个连接都准备好运行，连接就像

> > [root@localhost ~]# netstat | grep mysql
> > 
> > tcp 1 0 localhost.localdomain:49058 localhost.localdomain:mysql CLOSE_WAIT tcp 1 0 localhost.localdomain:49061 localhost.localdomain:mysql CLOSE_WAIT tcp 1 0 localhost.localdomain:49060 localhost.localdomain:mysql CLOSE_WAIT tcp 1 0 localhost.localdomain:49063 localhost.localdomain:mysql CLOSE_WAIT tcp 1 0 localhost.localdomain:49062 localhost.localdomain:mysql CLOSE_WAIT

我已经检查了我的 sql 文件 3 次，并且没有未关闭的连接

请给我解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:09:17.787

`CLOSE_WAIT`tcp 套接字状态表示如果连接被关闭，则连接正在处理中，等待应用程序执行 close() 方法。在完成某些资源的使用（连接到数据库、文件 IO、网络连接等）后，您应该始终执行 close() 方法。

您可以查看此[示例](http://oreilly.com/catalog/javadata/chapter/ch04.html)如何正确处理数据库连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:16:36.393

在我看来，好像您的应用程序中某处存在连接泄漏。

在 Java 中泄漏连接的最常见原因之一是`finally`在您的`try catch`块中不包含 a。

查看[这篇文章](https://stackoverflow.com/questions/2225221/closing-database-connections-in-java)了解更多详情。

# c++ - 在服务器套接字上出现随机 10060（连接超时）错误

> ID：12744522
> 
> 赞同：5
> 
> 时间：2012-10-05T10:41:45.373
> 
> 标签：c++, sockets, windows-8

我的软件的一些用户最近来找我，告诉我它在 Windows 8 上不起作用。经过调查发现由于某种奇怪的原因，我的服务器套接字并不总是接受连接，而是让它们超时.

更奇怪的是：连接到本地主机时也会发生这种情况，而不仅仅是远程访问它时。

“你试过什么？”

*   显而易见的东西：关闭防火墙（无效），查看其他软件是否有效（有效），尝试修改随机代码行（无效）。
*   不太明显的东西：使用全局 WSAStartup 而不是每个客户端或服务器实例一个（无效）。

提醒：完全相同的代码在 Windows XP 和 Windows 7 上运行良好，它也会影响 localhost 连接（不是硬件问题）。此外，只有三分之一的连接失败，其余连接正常。

好的，现在是一些真正的代码，因为它比所有这些词更有用。

套接字设置：

```
int iResult;

struct addrinfo *result = NULL;
struct addrinfo hints;

ZeroMemory(&hints, sizeof(hints));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;
hints.ai_flags = AI_PASSIVE;

// "Resolve" our localhost
iResult = getaddrinfo(NULL, port, &hints, &result);
if (iResult != 0) {
    printf("error (2) : %d\n", iResult);
    return false;
}

// Create the socket
listenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);
if (listenSocket == INVALID_SOCKET) {
    freeaddrinfo(result);
    printf("error (3) : %d\n", WSAGetLastError());
    return false;
}

// Bind it
iResult = bind(listenSocket, result->ai_addr, result->ai_addrlen);
if (iResult == SOCKET_ERROR) {
    freeaddrinfo(result);
    closesocket(listenSocket);
    printf("error (4) : %d\n", WSAGetLastError());
    return false;
}

freeaddrinfo(result);

// Listen
iResult = listen(listenSocket, SOMAXCONN);
if (iResult == SOCKET_ERROR) {
    closesocket(listenSocket);
    printf("%d\n", WSAGetLastError());
    return false;
} 
```

正如您可能看到的，它几乎直接取自 MSDN，应该没问题。此外，它适用于 2/3 的连接，所以我真的怀疑是设置代码有问题。

接收方代码：

```
 if (listenSocket == INVALID_SOCKET) return false;
#pragma warning(disable:4127)
    fd_set fds;

    SOCKET client;
    do {
        FD_ZERO(&fds);
        FD_SET(listenSocket, &fds);

        struct timeval timeout;
        timeout.tv_sec = 5;
        timeout.tv_usec = 0;
        if (!select(1, &fds, NULL, NULL, &timeout)) continue; // See you next loop!

        struct sockaddr_in addr;
        socklen_t addrlen = sizeof(addr);

        // Accept the socket
        client = accept(listenSocket, (struct sockaddr *)&addr, &addrlen);

        if (client == INVALID_SOCKET) {
            printf("[HTTP] Invalid socket\n");
            closesocket(listenSocket);
            return false;
        }

        // Set a 1s timeout on recv()
        struct timeval tv;
        tv.tv_sec = 1;
        tv.tv_usec = 0;
        setsockopt(client, SOL_SOCKET, SO_RCVTIMEO, (char*)&tv, sizeof(tv));

        // Receive the request
        char recvbuf[513];
        int iResult;
        std::stringbuf buf;

        clock_t end = clock() + CLOCKS_PER_SEC; // 1s from now

        do {
            iResult = recv(client, recvbuf, 512, 0);
            if (iResult > 0) {
                buf.sputn(recvbuf, iResult);
            } else if (iResult == 0) {
                // Hmm...
            } else {
                printf("[HTTP] Socket error: %d\n", WSAGetLastError());
                break;
            }
        } while (!requestComplete(&buf) && clock() < end); 
```

这段代码吐出一个“[HTTP] Socket error: 10060”错误，所以它之后的任何代码都是相当不相关的。

调用在`select`那里是因为实际的循环也做了一些其他的事情，但我把它省略了，因为它与套接字无关。

更奇怪的是：根据 Wireshark 的说法，Windows 似乎正在犯实际的网络错误：http: [//i.imgur.com/BIrbD.png](http://i.imgur.com/BIrbD.png)

我一直在努力解决这个问题，我可能只是在做一些愚蠢的事情，所以我非常感谢你的所有回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:46:14.123

我已经为这个烦人的问题工作了一整天，并最终通过从头开始重写整个服务器并以不同的方式实现它来最终解决它。我确实将问题追溯到`setsockopt`似乎`SO_RCVTIMEO`不再需要很好的问题，导致超时变为零秒，这使得随机连接超时。

我的新实现不再使用超时，现在只是非阻塞和异步的。工作得很好，但它需要更多的代码。

我假设这只是 Windows 8 中的一个错误，将在发布之前通过更新修复。我怀疑微软是否想像这样更改 Berkeley Sockets API。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T07:22:03.197

在 Windows 中，SO_RCVTIMEO 选项需要 MILLISECONDS 中的 DWORD 参数，但不需要 timeval 结构。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476(v=vs.85).aspx)。

传递 timeval 会导致 windows 将其解释为 DWORD，并且 seconds 成员被读取为毫秒。我不知道为什么 timeval 参数在 Win 8 之前的版本中有效，可能是未记录的功能，在 win 8 中已删除。

# sqlite - 由两列组成的 SQLite 表中的主键

> ID：12744523
> 
> 赞同：0
> 
> 时间：2012-10-05T10:41:45.657
> 
> 标签：sqlite

我想在一个由两列组成的 SQLite 表中创建一个主键，这些列的工作方式如下：

*   列：`id1`, `id2`,`value`
*   多行可以共享`id1`
*   多行可以共享`id2`
*   但只有一排可以*同时**共享* `id1` *`id2`*

 *我读了很多书，但我发现的所有问题都告诉我如何制作两个独立的主键，但这不是我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:51:41.557

是的，你可以这样做。

```
sqlite> create table t (f1 integer, f2 integer);
sqlite> create unique index i12 on t (f1, f2);
sqlite> .schema
CREATE TABLE t (f1 integer, f2 integer);
CREATE UNIQUE INDEX i12 on t (f1, f2);
sqlite> insert into t values (1,2);
sqlite> insert into t values (1,3);
sqlite> insert into t values (2,2);
sqlite> insert into t values (1,2);
Error: columns f1, f2 are not unique 
```

请参阅 的参考资料[`CREATE INDEX`](https://www.sqlite.org/lang_createindex.html)。*

# php - 在将隐藏输入与按钮相关联时，下面的代码会起作用吗？

> ID：12744525
> 
> 赞同：0
> 
> 时间：2012-10-05T10:41:50.787
> 
> 标签：php, javascript, jquery

在使用相关按钮显示正确的隐藏输入时，我需要一些帮助

我有一个应用程序，你可以[在这里查看](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

请按照以下步骤使用应用程序：

1.  单击“Open Grid”链接并选择按钮“5”，您将看到下面出现5个按钮“AE”。
2.  单击按钮“A”和“C”，这些按钮将变为绿色，表示它们已打开。
3.  现在单击“添加问题”按钮将您所做的事情附加到下面的表格行中。
4.  现在请再次重复步骤 1-3，但这次选择按钮“7”，您将看到按钮“AG”，然后单击按钮“B”、“D”和“F”以打开这些按钮。

现在您将看到有 2 个表格行，第一个表格行打开了按钮“A”和“C”，第二行打开了按钮“B”、“D”和“F”。

现在我要做的只是发布（使用 $_POST 方法）仅打开的按钮。现在我发现您无法使用 $_POST 方法发布按钮，但您可以为每个按钮创建隐藏输入字段并发布它们，如果按钮打开则隐藏输入值为 1，如果关闭则值为 0。

但是我不确定我是否正确编码，所以我的问题是有人可以查看下面的代码并说明我下面的代码是否可以完成这项工作，还是需要一些调整才能使其工作？我担心相关按钮的隐藏输入不正确：

现在下面是输出字母按钮及其隐藏输入以用于顶部选项和答案控制的代码：

```
 <table id="optionAndAnswer" class="optionAndAnswer">
    <tr>
        <table id="answerSection">
            <tr>

        <?php
            $i = 1;
            foreach($a as $key => $val){
                if($i%7 == 1) echo"<tr><td>";
                echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answerName[$val]\" class=\"answerBtns answers answerBtnsOff\">";    
                echo"<input type=\"hidden\" value=\"0\" id=\"hiddenAnswer".$val."\" name=\"hidden[$val]\" class=\"offButtons\">";   
                if($i%7 == 0) echo"</td></tr>";
                $i++;
            }
        ?>
            </tr>
            <tr>
        <td>
        <input class="answerBtns answers answerBtnsOff" name="answerName[True]"  id="answerTrue"    type="button"   value="True"    onclick="btnclick(this);"/>
        <input class="offButtons" name="hidden[True]" id="hiddenAnswerTrue" value="0" type="hidden"/>
        <input class="answerBtns answers answerBtnsOff" name="answerName[False]" id="answerFalse"   type="button"   value="False"   onclick="btnclick(this);"/>
        <input class="offButtons" name="hidden[False]" id="hiddenAnswerFalse" value="0" type="hidden"/>
        <input class="answerBtns answers answerBtnsOff" name="answerName[Yes]"   id="answerYes"     type="button"   value="Yes"     onclick="btnclick(this);"/>
        <input class="offButtons" name="hidden[Yes]" id="hiddenAnswerYes" value="0" type="hidden"/>
        <input class="answerBtns answers answerBtnsOff" name="answerName[No]"    id="answerNo"      type="button"   value="No"      onclick="btnclick(this);"/>
        <input class="offButtons" name="hidden[No]" id="hiddenAnswerNo" value="0" type="hidden"/>
        </td>
        </tr>
        </table>
        </td>
        </tr>
        </table> 
```

下面是它从顶部控件输出字母按钮和隐藏输入并附加到表格行中的代码（用户可以根据需要打开和关闭表格行中的字母按钮）：

```
 function insertQuestion(form) {   

                var context = $('#optionAndAnswer');
        var currenttotal = context.find('.answerBtnsOn').length;        

        var $tbody = $('#qandatbl > tbody'); 
        var $tr = $("<tr class='optionAndAnswer' align='center'>");
        var $td = $("<td class='extratd'>");
        var $answer = $("<div class='answer'>3\. Answer:<br/></div>");

        var $this, $row, $cell;
        $('#optionAndAnswer .answers').each(function(i, v) {
            $this = $(this);
            if(i%7 == 0) {
                $row = $("<tr/>").appendTo($answer);
                $cell = $("<td/>").appendTo($row);
            }

            var v = $this.val();
            var a = { name:$this.attr('name'), value:$this.val(), class:$this.attr('class'), id:$this.attr('id')+'Row' };
            var h = $this.is(':visible')?'inline-block':'none'
            var $newBtn = $("<input type='button' style='display:" + h + "' onclick='btnclick(this);' />").attr(a);

            var $newHdn = $("<input type='hidden' value='0' id='hiddenAnswer" + v  + "' name='hidden[" + v + "]' class='offButtons' />");

            $newBtn.appendTo($cell);
            $newHdn.appendTo($cell);
        });

        $tr.append($td);
        $td.append($answer);
        $tbody.append($tr); 

    } 
```

最后下面是打开和关闭字母按钮及其相关隐藏输入的代码：

```
 function btnclick(btn)
    {
        var context = $(btn).parents('#optionAndAnswer');
        if (context.length == 0) {
            context = $(btn).parents('tr');
        }
        var $btn = $(btn);
        var value = btn.value;

    $(btn).toggleClass("answerBtnsOff");
    $(btn).toggleClass("answerBtnsOn");

        var hiddenId = '#hiddenAnswer'+btn.value;
        if ( $(btn).hasClass("answerBtnsOff") )
        {
            $(hiddenId).val('0');
            $(hiddenId).toggleClass('offButtons');
            $(hiddenId).toggleClass('onButtons');       
        }
        else
        {
            $(hiddenId).val('1');
            $(hiddenId).toggleClass('onButtons');
            $(hiddenId).toggleClass('offButtons');
        }   

        $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : 0);

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:27:04.517

我通常在测试时将隐藏输入转换为文本输入，这样我就可以看到值是什么。

You can also use Chrome JS console where you can type some JS like $("#input_id").val(); and you'll get the value

# javascript - 如何编写一个通用的 javascript 插件

> ID：12744531
> 
> 赞同：2
> 
> 时间：2012-10-05T10:42:09.747
> 
> 标签：javascript, jquery, jquery-plugins, plugins

我有以下 javascript 代码

```
$(function(){
    // loading source image
   $('#panel').mousemove(function(e) { // binding mouse move event
       // some code
   });
   $('#panel').mousedown(function(e) { // binding mousedown event
       // some code
   });
   $('#panel').mouseup(function(e) { // binding mouseup event
       // some code
   });
});

function getResults() {
    // some code
} 
```

以这种方式工作

```
<button onclick="getResults()">Crop</button>
<canvas id="panel" width="100" height="200"></canvas> 
```

* * *

我想重新编写这个 js-plugin 以使其更通用。
我想使用它的好方法是以下方式：

```
$('#panel').myLib({
    onSelect: getResults,
    onClick: getResults
}); 
```

任何想法我应该如何重写我的 js 代码来获得这个结果？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:53:05.087

使用`fn`属性（实际上是 的别名`prototype`）添加插件：

```
$.fn.myLib = function(options){

  // bind events
  this.mousemove(function(e) { // binding mouse move event
    // some code
  });
  this.mousedown(function(e) { // binding mousedown event
    // some code
  });
  this.mouseup(function(e) { // binding mouseup event
    // some code
  });

  // add a button
  this.before($('<button>').text('Crop').click(options.onSelect));

  // return the object to make the function chainable
  return this;
}; 
```

# java - 无法将元素添加到 JList

> ID：12744532
> 
> 赞同：3
> 
> 时间：2012-10-05T10:42:11.317
> 
> 标签：java, swing, concurrency, jlist, event-dispatch-thread

我知道这不是关于填充 JLists 的唯一问题，但我没有在另一个 SO 线程中找到答案。

我已经使用 Netbeans GUI 构建器来创建我的 GUI。JList 被添加到滚动窗格中，如果我对 JList 的内容进行硬编码，一切都显示得很好。

```
jList1.setModel(new javax.swing.AbstractListModel() { 
public String[] strings = {"1", "2", "etc..."}; 
@Override 
  public int getSize() { 
  return strings.length; 
} 

@Override 
   public Object getElementAt(int i) { 
   return strings[i]; 
} 
}); 
```

但是，如果我尝试通过 动态添加项目`SwingWorker`，则不会出现任何内容。

```
JList jList1 = new javax.swing.JList();
DefaultListModel info = new DefaultListModel();
....
jList1.setModel(info);

....
public void FillList(final String subject) {

    worker = new SwingWorker() {
        @Override
        protected Object doInBackground() {
            info.addElement(subject);

            return 0;
        }

        @Override
        protected void done() {
        }
    };
    worker.execute();
} 
```

我只想在 JList 中显示主题以用于视觉目的，其余的在后台完成。

任何帮助表示赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:52:17.610

*   Swing 是单线程的，所有到可见 GUI 的输出都必须在 EDT 上完成

*   您对[Swing 中的 Concurency有疑问](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   SwingWorkers 方法的输出[doInBackground()](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)未[通知`EventDispatchThread`](https://stackoverflow.com/a/12643642/714968)

*   [那么ListModel](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#mutable)中的任何更改在Swing GUI 中都不可见

*   必须覆盖[`publish()`or`process()`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/interim.html)，这两种方法完全可以确定输出将在 EDT 上完成

# javascript - 如何在 url 末尾的 ruby on rails 中添加列名？

> ID：12744533
> 
> 赞同：0
> 
> 时间：2012-10-05T10:42:13.500
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

如何在 ruby​​ on rails 中使用现有链接添加列名？我想在 javascript 或 ruby​​ on rails 的 url 末尾添加这样的列名。

```
columns[enr_rds_section_id]=section_id. 
```

例如，`<%= link_to pro_generic_lookup_data_path("Enr::Rds::Section2009", format: :js), data: {remote: true} %>`那是实际的链接。我正在捕获`section_id`in javascript。我该如何添加呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:12:30.827

如果你真的想要“columns[enr_rds_section_id]=section_id”（我不知道，你为什么想要那个）你可以尝试使用

```
some_test_path(@object, "columns[enr_rds_section_id]" => 'column_name') 
```

我手头没有轨道来测试这个。我明确使用字符串作为键，向您展示，您可以根据需要进一步自定义它。例如：

```
sec = "enr_rds"
some_test_path(@object, "columns[#{sec}_section_id]" => 'column_name') 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:36:33.487

为什么不简单地将列作为附加键 => 值对传递给路径？

例如你有

```
some_test_path(@object) 
```

生成 /some/test/1

然后你可以使用

```
some_test_path(@object, :column => 'column_name') 
```

它会生成 /some/test/1?column=column_name

# javascript - 不返回带有通过 ajax 在 javascript 中填充的选项的选择对象

> ID：12744537
> 
> 赞同：0
> 
> 时间：2012-10-05T10:42:34.127
> 
> 标签：javascript, ajax

不返回带有通过 ajax 在 javascript 中填充的选项的选择对象

下面我用现有的 html 表添加 html DOM 行，其中 html 表有三列，一列带有名称，另一列带有选择框，最后一列具有按钮，可通过 ajax 动态保存带有名称的选项

因此创建行的功能是

```
function createTable(row){
  var table = document.getElementById("table");
  var row = table.insertRow(row);
  var cell1 = row.insertCell(0);
  cell1.innerHTML = "something";
  var cell2 = row.insertCell(1);
  cell6.appendChild(createSelctbox());
  ...
 ..
} 
```

并且使用其选项创建选择对象的ajax调用是

```
function createSelctbox(){
var selec = document.createElement("select");
var xmlhttp = getXMLObject();
if(xmlhttp)
{
    xmlhttp.open("POST","some.php",true);
    xmlhttp.onreadystatechange  = function()
    {
    if (xmlhttp.readyState == 4)
    {
        if(xmlhttp.status == 200)
        {

        var data = JSON.parse(xmlhttp.responseText);

        var option;
        for(var i=0;i<data.length;i++){
            option = document.createElement('option');
            option.value=data[i].id;
            option.appendChild(document.createTextNode(""+data[i].something+""));
            selec.appendChild(option);
        }   
        return selec;
        }
    }
    }
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xmlhttp.send("display="+type);              

} 
```

那么这有可能像这样返回吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:38:47.083

```
We unable to add <option>xx</option> parts in select box dynamically.
Instead you can try to create full select box. 
```

IE，

```
<select>
   <option>1</option>
   <option>2</option>
</select>

if you want to add <option>3</option>, then you should make new select box with newly added item. 
```

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:46:02.583

我高度怀疑，问题出在`async`选项上

您可以尝试更改此行

```
xmlhttp.open("POST","some.php",true); 
```

至

```
xmlhttp.open("POST","some.php",false); 
```

# javascript - 标记未添加到我的地图

> ID：12744538
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:42:34.787
> 
> 标签：javascript, google-maps, google-maps-api-3

试图在我创建的联系页面上的谷歌地图上添加一个标记。地图渲染良好，但没有出现标记。这是我的代码：

```
function initialize() {
                    var latlng = new google.maps.LatLng(-43.51187,172.621192);
                    var myOptions = {
                      zoom: 15,
                      center: latlng,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"),
                    myOptions);
                    NSMarker();
                }

                // Function for adding a marker to the page.
                function addMarker(location) {
                    marker = new google.maps.Marker({
                        position: location,
                        map: map
                    });
                }

                // Add Marker Location
                function NSMarker() {
                    NSArchitects = new google.maps.LatLng(-43.51187,172.621192);
                    addMarker(NSArchitects);
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:50:23.333

`var map`在初始化（）函数之外声明

```
var map; // declare globel

function initialize() {

    var latlng = new google.maps.LatLng(-43.51187,172.621192);
    var myOptions = {
          zoom: 15,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
     };
    map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);
    NSMarker();

}

function addMarker(location) {
                marker = new google.maps.Marker({
                    position: location,
                    map: map
                });
            }

            // Add Marker Location
            function NSMarker() {
                NSArchitects = new google.maps.LatLng(-43.51187,172.621192);
                addMarker(NSArchitects);
            } 
```

# java - TextField 中的 RequestFocus 不起作用

> ID：12744542
> 
> 赞同：18
> 
> 时间：2012-10-05T10:42:47.200
> 
> 标签：java, javafx-2, fxml

我使用 JavaFX 2.1 并使用 FXML 创建了 GUI，在我添加的这个 GUI 的控制器中`myTextField.requestFocus();`。

但我总是把焦点放在另一个控件上。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-05T10:57:05.613

在`initialize()`控件的时候还没有准备好处理焦点。

您可以尝试下一个技巧：

```
@Override
public void initialize(URL url, ResourceBundle rb) {
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            tf.requestFocus();
        }
    });
} 
```

对于棘手的复杂应用程序（如评论中的 Pavel_K），您可能需要多次重复此例程并调用下一个方法行：

```
private void requestFocusOrDieTrying(Node node) {
    Platform.runLater(() -> {
        if (!node.isFocused()) {
            node.requestFocus();
            requestFocusOrDieTrying(node);
        }
    });
} 
```

请注意，这是未记录的方法，如果在未来的 Java 版本中发生更改或中断，添加重复限制以避免无限循环可能是明智之举。比整个应用程序更好地失去焦点。:)

* * *

具有所述阈值的示例：

```
@Override
public void requestFocus() {
  requestFocus( getNode(), 3 );
}

private void requestFocus( final Node node, final int max ) {
  if( max > 0 ) {
    runLater(
        () -> {
          if( !node.isFocused() ) {
            node.requestFocus();
            requestFocus( node, max - 1 );
          }
        }
    );
  }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-11T15:24:04.693

与@Sergey Grinev 完全相同的答案。确保您的 java 版本是最新的（JDK 1.8 或更高版本）。

```
Platform.runLater(()->myTextField.requestFocus()); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-25T08:31:25.917

如果你请求Focus(); 初始化场景**后，它会工作！**

像这样：

```
Stage stage = new Stage();
GridPane grid = new GridPane();
//... add buttons&stuff to pane

Scene scene = new Scene(grid, 800, 600);

TEXTFIELD.requestFocus();

stage.setScene(scene);
stage.show(); 
```

我希望这有帮助。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-17T17:48:38.727

当尚未设置节点的场景属性时，可能会发生这种情况。唉，设置场景属性可能需要“很长时间”。

首次创建场景时，子节点的场景属性滞后，并且当项目添加到某些父节点时，例如 TabPane（奇怪的是，有些父节点似乎免疫，我不确定为什么）。

正确的策略，一直对我有用：

```
if (myNode.scene) == null {
    // listen for the changes to the node's scene property,
    // and request focus when it is set
} else {
    myNode.requestFocus()
} 
```

我有一个方便的 Kotlin 扩展函数可以做到这一点。

```
fun Node.requestFocusOnSceneAvailable() {
    if (scene == null) {
        val listener = object : ChangeListener<Scene> {
            override fun changed(observable: ObservableValue<out Scene>?, oldValue: Scene?, newValue: Scene?) {
                if (newValue != null) {
                    sceneProperty().removeListener(this)
                    requestFocus()
                }
            }
        }
        sceneProperty().addListener(listener)
    } else {
        requestFocus()
    }
} 
```

然后，您可以从代码中调用它，如下所示：

```
myNode.requestFocusOnSceneAvailable() 
```

也许有人想把它翻译成Java。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-10T11:41:45.540

我使用 JavaFX 11 遇到了同样的问题，并以 nickthecoder 提出的类似方式解决了它。

```
ChangeListener<Scene> sceneListener = new ChangeListener<Scene>() {
    @Override
    public void changed(ObservableValue<? extends Scene> observable, Scene oldValue, Scene newValue) {
        if (newValue != null) {
            editInput.requestFocus();
            editInput.sceneProperty().removeListener(this);
        }
    }
};
editInput.sceneProperty().addListener(sceneListener); 
```

基本上只需向节点的场景属性添加一个侦听器，并在设置场景后在该侦听器请求焦点中。我还以这样一种方式编写了它，即在调用它之后将删除侦听器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-13T09:23:34.580

我宁愿使用计时器来强制关注文本字段。检查文本字段是否具有焦点的过程在单独的（后台）线程中完成。虽然请求焦点的过程是在 GUI 线程中完成的，但借助`Platform.runLater()`.

```
//I'd rather using timer to enforce focus
Timer checkIfTFIsFocusedTimer = new Timer();
TimerTask checkIfTFIsFocusedTask = new TimerTask() {
    @Override
    public void run() {
        if (!textField.isFocused()) {
            Platform.runLater(() -> {                        
                textField.requestFocus();
            });
        } else {
            checkIfTFIsFocusedTimer.cancel();
        }
    }
};
checkIfTFIsFocusedTimer
        .scheduleAtFixedRate(checkIfTFIsFocusedTask,
        0, 100); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-21T02:48:42.603

较旧的答案解释了`Platform.runLater`不工作的情况，但这个答案也涵盖了多个节点上的多个请求的情况。

问题是：`scene`属性变为非空节点的顺序，因此添加的侦听器被调用的顺序，不一定与添加两个侦听器的顺序相同。所以这个命令：

```
requestFocusOnSceneAvailable(node1)
requestFocusOnSceneAvailable(node2) 
```

可能会意外导致以下顺序：

```
node2.requestFocus()
node1.requestFocus() 
```

一个解决方案需要让侦听器`requestFocus()`仅在*最近*的节点上调用，可以使用静态变量进行跟踪：

```
private static Node nodeToRequestFocusOnOnceSceneAvailable;

public static void requestFocusOnceSceneAvailable(Node node) {

    // Remember this node as the latest node requested to receive focus.
    nodeToRequestFocusOnOnceSceneAvailable = node;

    // Schedule the focus request to happen whenever
    // JavaFX finally adds the node to the scene.
    Listeners.addAndFire(node.sceneProperty(), new ChangeListener<Scene>() {
        @Override
        public void changed(ObservableValue<? extends Scene> observable, Scene oldScene, Scene newScene) {
            if (newScene != null) {
                if (node == nodeToRequestFocusOnOnceSceneAvailable) {
                    node.requestFocus();

                    // We no longer need to remember this node,
                    // since its focus has been requested.
                    nodeToRequestFocusOnOnceSceneAvailable = null;
                }

                // We no longer need the listener
                // after it has run once.
                observable.removeListener(this);
            }
        }
    });
} 
```

请注意，此解决方案假定只有一个场景。

# asp.net-mvc - 用于更改标签的自定义 HtmlHelper

> ID：12744543
> 
> 赞同：1
> 
> 时间：2012-10-05T10:42:48.500
> 
> 标签：asp.net-mvc, entity-framework, razor, asp.net-mvc-4

我想提供一种方法来更改与控件关联的标签，这些标签将通过查找 sql 表在页面上呈现。

理想情况下，我想注入元数据显示字段，然后使用帮助程序在页面上呈现。

```
@Html.LabelFor(m => m.city) 
```

由于这需要在运行时进行 sql 查找，因此我不能只更改类脚手架 tt 模板以在设计时标记显示名称注释。

我想到了 3 种可能的方法。

1.  重写我想使用的所有 html.helpers。这样做的问题是您需要在进行更改之前复制现有帮助程序的所有功能。

2.  编写自定义数据注释并将其标记在类中的每个属性上，即

    [MyCustomNameAttribute] public string city{ get; 放; }

    然后希望在 MyCustomNameAttribute 类中，我可以找到我所指的 linq 字段、对元数据模型的引用和使用这些的数据库上下文，我可以根据用户配置的潜在名称自定义来检索和替换 DisplayName。我试图这样做，但无法找出 [Display(Name="city")] 注释在后台是如何工作的。

3.  修改实体模型支持代码以将名称注入元数据模型。

有没有人有以上经验？

干杯蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:13:05.053

您必须`ModelMetaDataProvider`通过扩展`DataAnnotationsModelMetadataProvider`.

```
public class CustomModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(
        IEnumerable<Attribute> attributes,
        Type containerType,
        Func<object> modelAccessor,
        Type modelType,
        string propertyName)
    {
        var meta = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);

               if(meta.DisplayName == null)
               {
                 // TO DO read the display value from database and assign here
                 meta.DisplayName = .. 
               }

        return meta;
    }
} 
```

然后你必须在 Global.asax.cs 中设置它

```
protected void Application_Start()
{
   RegisterRoutes(RouteTable.Routes);
   ModelMetadataProviders.Current = new CustomModelMetadataProvider();
} 
```

我假设您只想从 db 设置显示名称，但假设您想从 db 加载完整的模型元数据，那么我建议您`ModelMetadataProvider`通过实现抽象类来创建自定义`ModelMetadataProvider`。

每次都访问数据库绝对不是一个好主意，所以我们必须尝试一些缓存策略。

我们必须为每一个新的`containerType`（我猜）访问数据库，并读取容器的元数据信息及其所有属性，并以 key 作为存储在缓存中`containerType`（这可能是一项艰巨的工作）。

# windows - Windows 7 (11) 和 Windows 8 (11.1) 中的 DirectX

> ID：12744545
> 
> 赞同：1
> 
> 时间：2012-10-05T10:42:53.463
> 
> 标签：windows, api, directx, video-processing

在 Windows 8 中，当您最小化一个游戏并再次切换回该游戏时，该游戏会以非常快的速度显示。看起来甚至在您告诉您的 PC 显示游戏之前，屏幕就已经准备好了。当您在 Windows 7 中执行相同操作时，您将需要一秒钟才能看到游戏。这次看起来 Direct X 被暂停了，显卡需要时间来准备屏幕。

那么问题来了，Windows 8 会在后台渲染游戏吗？Windows 7 会在游戏要显示的时候开始渲染吗？或者这是因为 Windows API 发生了变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:59:56.037

您是否使用相同的硬件和 DirectX 运行时库进行测试？我不认为这是与操作系统相关的性能问题，因为大多数 DirectX 程序/游戏在最小化时会停止渲染，以便将 CPU 时间释放给其他程序

# c# - 对返回集合的方法进行单元测试

> ID：12744546
> 
> 赞同：3
> 
> 时间：2012-10-05T10:42:54.727
> 
> 标签：c#, visual-studio-2010, unit-testing

我正在尝试为返回复杂对象集合的服务编写一些单元测试（`IQueriable<MyObject>`给出一个想法），但我不知道如何解决这个问题。

考虑一下：

`public IQueriable<MyObject> GetMyObjects(int someParameterA, int someParameterB) {...}`

基本上，根据传递的参数，一种方法将输出相当复杂的对象的集合。

由于该应用程序正在开发中，我可以使用本地 SQL 实例，并且我创建了一个方法，该方法将使用一些示例数据填充此数据库，因此该服务可以使用。

我在编写单元测试方面没有太多经验。好吧，老实说，我没有任何编写单元测试的经验。-_- 我看到的大多数示例都是针对进行一些计算并返回单个结果的方法。因此，可以为带有测试用例的测试附加数据源。如果方法要返回两个数字的和，则数据源将包含三列：两个数字和预期结果。

因此，由于我对单元测试的了解有限，我正在尝试应用相同的逻辑来测试返回集合的方法......而且我不知道测试应该包含什么（我知道我可以轻松地测试返回元素的数量），更不用说带有测试用例的测试数据源应该是什么样子了。

我知道 VS2010 有`CollectionAssert`，但我想我的问题是我不知道在这种情况下如何创建“预期”值。

对此类方法进行单元测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:50:54.360

为数据源创建一个模拟集合。成熟的对象，或者如果它们在测试中创建起来很复杂，那么可以考虑使用模拟框架，例如[Moq](http://code.google.com/p/moq/)或[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)。

只要您的数据源包含足够范围的对象来涵盖正面、负面和异常情况，那么您就可以针对该数据源编写一套测试，以涵盖来自不同输入状态的所有预期结果`GetMyObjects`。

您希望这些数据与应用程序运行时一样，因此即使您没有通常拥有的所有数据，您也只需要有足够的数据来覆盖您想要测试的可能性反对，例如：

*   当源中没有数据时会发生什么。
    *   我们得到一个空集合还是异常？
*   当源中有数据但与您传入的参数不匹配时会发生什么
*   当源中有数据但只有一个参数匹配时会发生什么
*   当源中有数据并且您传入应该返回数据的参数时会发生什么
*   当您将错误的数据传递给该方法时会发生什么？
*   ETC....

# sql-server - 为 CSV 中的每一行执行存储过程

> ID：12744552
> 
> 赞同：1
> 
> 时间：2012-10-05T10:43:12.510
> 
> 标签：sql-server, tsql, loops, stored-procedures, csv

我试图在使用每个 CSV 行作为参数的查询中多次使用 tsql 运行存储过程。

我将如何遍历这个？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:04:14.433

如果这可以通过一组基础操作来实现（如 AnnaandPhadke 所推荐的），那就是要走的路。效率更高。如果没有，您可以使用如下游标：

将 csv 导入表 ImportedCSV

```
DECLARE @sSQL AS VARCHAR(5000)
DECLARE @sItemsFromCSV

DECLARE sql_cursor CURSOR
    FOR SELECT ItemsFromCSV FROM ImportedCSV
OPEN sql_cursor

FETCH NEXT FROM sql_cursor 
INTO @ItemsFromCSV  -- Multiple variables for multiple CSV columns will be required

WHILE @@FETCH_STATUS = 0
BEGIN

@sSQL = 'EXEC USP_MyProc ' + @ItemsFromCSV  -- AND OTHER Parameters
EXECUTE sp_executesql @sSQL

FETCH NEXT FROM sql_cursor
END 
CLOSE sql_cursor;
DEALLOCATE sql_cursor; 
```

这将允许在 CSV 中每行执行自定义 SQL，包括调用具有多个参数的存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:51:48.973

我建议将 csv 文件导入到表中，然后通过设置循环设置来处理它。您可以修改存储过程以处理基于集合的数据。

# haskell - 在幂函数的尾递归定义中严格评估的重要性

> ID：12744556
> 
> 赞同：4
> 
> 时间：2012-10-05T10:43:29.337
> 
> 标签：haskell, tail-recursion

我理解这个函数和尾递归，但我不明白为什么严格的评估很重要。如果没有严格的评估，它仍然是尾递归的，对吧？那么如果没有严格的评估，这个函数什么时候会失败呢？

```
turboPower a b = turboPower' 1 a b
  where
    turboPower' x a 0 = x
    turboPower' x a b
        | x `seq` a `seq` b `seq` False = undefined
        | even b = turboPower' x (a*a) (b `div` 2)
        | otherwise = turboPower' (x*a) a (b-1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:47:52.637

它不会失败（除非指数*很大*，因此 thunk 可能变得足够大以溢出堆栈），它会（可能）效率较低，因为没有严格的评估，参数变成 thunk，导致

```
turboPower' (let xN = let x(N-1) = ...; a(N-1) = ... in x(N-1)*a(N-1)) (let aN = let a(N-1) = ... in a(N-1)*a(n-1)) (let bN = ...) 
```

这里不应该太戏剧化，因为嵌套级别在指数中是对数的，因此对于所有实际计算来说仍然很小，但它会产生巨大的差异，例如

```
foo :: Integer -> Integer
foo n = go 0 n
  where
    go acc m
      | m < 1     = acc
      | otherwise = go (acc + m^3 + m `mod` 7) (m-1) 
```

其中嵌套级别在 中是线性的`n`。

# iphone - UIStringDrawing 方法在 iOS 6 中似乎不是线程安全的

> ID：12744558
> 
> 赞同：22
> 
> 时间：2012-10-05T10:43:33.587
> 
> 标签：iphone, objective-c, ios, ios6

同时在两个线程上使用任何 UIStringDrawing 方法会导致崩溃。我的理解是所有 UIStringDrawing 方法从 iOS 4.0 开始都是线程安全的。

这段代码（没有任何用处）演示了这个问题：

```
dispatch_queue_t queue = dispatch_queue_create("com.queue", NULL);

for (int i = 0; i < 10000; i++) {

    dispatch_async(queue, ^{

        NSString *string = @"My string";
        CGSize size = [string sizeWithFont:[UIFont boldSystemFontOfSize:13]];
    });
}

for (int i = 0; i < 10000; i++) {

    NSString *string = @"My string";
    CGSize size = [string sizeWithFont:[UIFont boldSystemFontOfSize:13]];
}

dispatch_release(queue); 
```

应用程序在循环几次迭代后崩溃，并带有以下回溯：

```
* thread #1: tid = 0x2403, 0x00ad40c8, stop reason = EXC_BAD_ACCESS (code=2, address=0xad40c8)
  frame #0: 0x00ad40c8
  frame #1: 0x36bc4252 WebCore`WebCore::Font::Font(WebCore::FontPlatformData const&, WTF::PassRefPtr<WebCore::FontSelector>) + 90
  frame #2: 0x36bc41f2 WebCore`WebCore::Font::Font(WebCore::FontPlatformData const&, WTF::PassRefPtr<WebCore::FontSelector>) + 10
  frame #3: 0x38f0368e WebKit`rendererForFont(__GSFont*) + 246
  frame #4: 0x38f03230 WebKit`-[NSString(WebStringDrawing) _web_sizeWithFont:forWidth:ellipsis:letterSpacing:resultRange:] + 200
  frame #5: 0x38f03162 WebKit`-[NSString(WebStringDrawing) _web_sizeWithFont:forWidth:ellipsis:letterSpacing:] + 66
  frame #6: 0x38f04532 WebKit`-[NSString(WebStringDrawing) _web_sizeWithFont:] + 58
  frame #7: 0x361dc5d2 UIKit`-[NSString(UIStringDrawing) sizeWithFont:] + 46
  frame #8: 0x00060ca8 myApp`-[TAViewController drawingTest] + 216 at TAViewController.m:157
  frame #9: 0x38da1e66 Foundation`__NSFireDelayedPerform + 450
  frame #10: 0x3aa47856 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
  frame #11: 0x3aa47502 CoreFoundation`__CFRunLoopDoTimer + 274
  frame #12: 0x3aa46176 CoreFoundation`__CFRunLoopRun + 1230
  frame #13: 0x3a9b923c CoreFoundation`CFRunLoopRunSpecific + 356
  frame #14: 0x3a9b90c8 CoreFoundation`CFRunLoopRunInMode + 104
  frame #15: 0x3a8a433a GraphicsServices`GSEventRunModal + 74
  frame #16: 0x3622c288 UIKit`UIApplicationMain + 1120
  frame #17: 0x0005f08c myApp`main + 96 at main.m:16

  thread #5: tid = 0x2a03, 0x00ad40c8, stop reason = EXC_BAD_ACCESS (code=2, address=0xad40c8)
    frame #0: 0x00ad40c8
    frame #1: 0x36bc4252 WebCore`WebCore::Font::Font(WebCore::FontPlatformData const&, WTF::PassRefPtr<WebCore::FontSelector>) + 90
    frame #2: 0x36bc41f2 WebCore`WebCore::Font::Font(WebCore::FontPlatformData const&, WTF::PassRefPtr<WebCore::FontSelector>) + 10
    frame #3: 0x38f0368e WebKit`rendererForFont(__GSFont*) + 246
    frame #4: 0x38f03230 WebKit`-[NSString(WebStringDrawing) _web_sizeWithFont:forWidth:ellipsis:letterSpacing:resultRange:] + 200
    frame #5: 0x38f03162 WebKit`-[NSString(WebStringDrawing) _web_sizeWithFont:forWidth:ellipsis:letterSpacing:] + 66
    frame #6: 0x38f04532 WebKit`-[NSString(WebStringDrawing) _web_sizeWithFont:] + 58
    frame #7: 0x361dc5d2 UIKit`-[NSString(UIStringDrawing) sizeWithFont:] + 46
    frame #8: 0x00060d5c myApp`__31-[TAViewController drawingTest]_block_invoke_0 + 116 at TAViewController.m:150
    frame #9: 0x339f0792 libdispatch.dylib`_dispatch_call_block_and_release + 10
    frame #10: 0x339f3b3a libdispatch.dylib`_dispatch_queue_drain + 142
    frame #11: 0x339f167c libdispatch.dylib`_dispatch_queue_invoke + 44
    frame #12: 0x339f4612 libdispatch.dylib`_dispatch_root_queue_drain + 210
    frame #13: 0x339f47d8 libdispatch.dylib`_dispatch_worker_thread2 + 92
    frame #14: 0x37f957f0 libsystem_c.dylib`_pthread_wqthread + 360
    frame #15: 0x37f95684 libsystem_c.dylib`start_wqthread + 8 
```

我的理解是 UIStringDrawing 方法在 iOS 4 中是线程安全的。我希望这些循环应该没有错误地完成。

在运行 iOS 6（在 iPhone 5 上测试）的 iPhone 上运行时会发生崩溃，但在运行 iOS 5（在 iPhone 4 上测试）或模拟器（在 iOS 6 上测试）上运行时不会发生。

我已经通过使用 CGD 序列化任何绘制调用来实现我认为的修复：

```
- (void)serialiseDrawing:(void (^)())block {

    dispatch_sync(self.serialDrawingQueue, block);
}

- (dispatch_queue_t)serialDrawingQueue {

    if (_serialDrawingQueue == NULL) _serialDrawingQueue = dispatch_queue_create("com.myApp.SerialDrawQueue", NULL);

    return _serialDrawingQueue;
} 
```

...并像这样包装每个绘图调用：

```
__block CGSize labelSize = CGSizeZero;

[[TAUtils sharedUtils] serialiseDrawing:^{
    labelSize = [label.text sizeWithFont:label.font];
}]; 
```

这似乎使事情有所改善（我所有的 UIStringDrawing 调用都发生在一个线程上）。但它有时仍然会崩溃，回溯如下：

```
Exception Type:  EXC_CRASH (SIGSEGV)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3a28ee80 semaphore_wait_trap + 8
1   libdispatch.dylib               0x32851e90 _dispatch_thread_semaphore_wait + 8
2   libdispatch.dylib               0x32850680 _dispatch_barrier_sync_f_slow + 100
3   myApp                           0x000c4330 -[TAUtils serialiseDrawing:] (TAUtils.m:305)
4   myApp                           0x000edfd4 -[TAOmniBar updateLabel] (TAOmniBar.m:394)
5   myApp                           0x000ee8d6 -[TAOmniBar handleNotification:] (TAOmniBar.m:461)
6   CoreFoundation                  0x39820346 _CFXNotificationPost + 1418
7   Foundation                      0x37b5838a -[NSNotificationCenter postNotificationName:object:userInfo:] + 66
8   Foundation                      0x37b5be9a -[NSNotificationCenter postNotificationName:object:] + 26
9   myApp                           0x000f369a -[TAMyViewController update] (TAMyViewController.m:1308)
10  GLKit                           0x328383ce -[GLKViewController _updateAndDraw] + 270
11  QuartzCore                      0x39ffd77c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 156
12  QuartzCore                      0x39ffd6d4 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 60
13  IOMobileFramebuffer             0x31221fd4 IOMobileFramebufferVsyncNotifyFunc + 152
14  IOKit                           0x39f7c5aa IODispatchCalloutFromCFMessage + 190
15  CoreFoundation                  0x39899888 __CFMachPortPerform + 116
16  CoreFoundation                  0x398a43e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
17  CoreFoundation                  0x398a4386 __CFRunLoopDoSource1 + 134
18  CoreFoundation                  0x398a320a __CFRunLoopRun + 1378
19  CoreFoundation                  0x39816238 CFRunLoopRunSpecific + 352
20  CoreFoundation                  0x398160c4 CFRunLoopRunInMode + 100
21  GraphicsServices                0x39701336 GSEventRunModal + 70
22  UIKit                           0x35089284 UIApplicationMain + 1116
23  myApp                           0x000b806e main (main.m:16)
24  myApp                           0x000b8024 start + 36

Thread 7 name:  Dispatch queue: com.myApp.SerialDrawQueue
Thread 7:
0   WebCore                         0x35a21410 WebCore::FontFallbackList::invalidate(WTF::PassRefPtr<WebCore::FontSelector>) + 156
1   WebCore                         0x35a2124e WebCore::Font::Font(WebCore::FontPlatformData const&, WTF::PassRefPtr<WebCore::FontSelector>) + 86
2   WebCore                         0x35a211ee WebCore::Font::Font(WebCore::FontPlatformData const&, WTF::PassRefPtr<WebCore::FontSelector>) + 6
3   WebKit                          0x37d6068a rendererForFont(__GSFont*) + 242
4   WebKit                          0x37d61796 -[NSString(WebStringDrawing) __web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:measureOnly:renderedStringOut:drawUnderline:] + 198
5   WebKit                          0x37d616bc -[NSString(WebStringDrawing) __web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:measureOnly:renderedStringOut:] + 84
6   WebKit                          0x37d6165e -[NSString(WebStringDrawing) __web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:measureOnly:] + 82
7   WebKit                          0x37d61602 -[NSString(WebStringDrawing) _web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:] + 78
8   UIKit                           0x35041960 -[NSString(UIStringDrawing) drawAtPoint:forWidth:withFont:lineBreakMode:letterSpacing:includeEmoji:] + 172
9   UIKit                           0x3507de1e -[NSString(UIStringDrawing) drawAtPoint:forWidth:withFont:fontSize:lineBreakMode:baselineAdjustment:includeEmoji:] + 358
10  UIKit                           0x3507dca4 -[NSString(UIStringDrawing) drawAtPoint:forWidth:withFont:fontSize:lineBreakMode:baselineAdjustment:] + 68
11  myApp                           0x000d3300 -[TALabelManager textureCGImageForString:] (TALabelManager.m:859)
12  myApp                           0x000d350a __39-[TALabelManager textureDataForString:]_block_invoke_0 (TALabelManager.m:875)
13  libdispatch.dylib               0x3284d5d8 _dispatch_client_callout + 20
14  libdispatch.dylib               0x3285080a _dispatch_barrier_sync_f_invoke + 22
15  myApp                           0x000c4330 -[TAUtils serialiseDrawing:] (TAUtils.m:305)
16  myApp                           0x000d3420 -[TALabelManager textureDataForString:] (TALabelManager.m:873)
17  myApp                           0x000d0dde __block_global_0 (TALabelManager.m:516)
18  libdispatch.dylib               0x3284d790 _dispatch_call_block_and_release + 8
19  libdispatch.dylib               0x32850b36 _dispatch_queue_drain + 138
20  libdispatch.dylib               0x3284e678 _dispatch_queue_invoke + 40
21  libdispatch.dylib               0x32851610 _dispatch_root_queue_drain + 208
22  libdispatch.dylib               0x328517d4 _dispatch_worker_thread2 + 88
23  libsystem_c.dylib               0x36df27ee _pthread_wqthread + 358
24  libsystem_c.dylib               0x36df2680 start_wqthread + 4 
```

我为这个冗长的问题道歉，但这对我来说是一个严重的问题，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-10T11:57:00.510

在尝试寻找解决方法时，我注意到 iOS 6 引入了更广泛的 NSAttributedString 和 Core Text 集成，因此我尝试使用 NSAttributedString 代替 NSString 将所有 UIStringDrawing 方法与等效的 NSStringDrawing 方法交换，似乎崩溃已经停止。

例如，我现在正在使用：

```
NSAttributedString *attribStr = [[NSAttributedString alloc] initWithString:@"My String"];
CGSize size = [attribStr size]; 
```

代替：

```
NSString *str = @"My String";
CGSize size = [str sizeWithFont:font]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T05:49:50.337

亚当是正确的。UIStringDrawing 方法只能在 iOS 6 的主队列中安全使用。您可以使用 NSStringDrawing 方法或 CoreText 直接从后台队列执行渲染。这是一个已知问题，但请随时提交更多错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-14T02:08:54.113

Adam Swinden 的解决方案对我有用。这是我转换 NSString 的方法`sizeWithFont:constrainedToSize:`：

曾经是什么：

```
NSString *text = ...;
CGFloat width = ...;
UIFont *font = ...;
CGSize size = [text sizeWithFont:font 
               constrainedToSize:(CGSize){width, CGFLOAT_MAX}]; 
```

可以替换为：

```
NSString *text = ...;
CGFloat width = ...;
UIFont *font = ...;
NSAttributedString *attributedText =
    [[NSAttributedString alloc]
        initWithString:text
        attributes:@
        {
            NSFontAttributeName: font
        }];
CGRect rect = [attributedText boundingRectWithSize:(CGSize){width, CGFLOAT_MAX}
                                           options:NSStringDrawingUsesLineFragmentOrigin
                                           context:nil];
CGSize size = rect.size; 
```

请注意文档中提到：

> 在 iOS 7 及更高版本中，此方法返回小数大小（在返回的 CGRect 的大小组件中）；要使用返回的大小来调整视图大小，您必须使用 ceil 函数将其值提高到最接近的更高整数。

因此，要提取用于调整视图大小的计算高度或宽度，我会使用：

```
CGFloat height = ceilf(size.height);
CGFloat width  = ceilf(size.width); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T11:21:42.383

根据 Adam Swinden 和 T 先生的回答，我写了 2 种插入方法：

```
@implementation NSString (Extensions)

- (CGSize)threadSafeSizeWithFont:(UIFont *)font {
    return [self threadSafeSizeWithFont:font constrainedToSize:CGSizeMake(CGFLOAT_MAX, CGFLOAT_MAX)];
}

- (CGSize)threadSafeSizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size {
    // http://stackoverflow.com/questions/12744558/uistringdrawing-methods-dont-seem-to-be-thread-safe-in-ios-6
    NSAttributedString *attributedText =
    [[NSAttributedString alloc]
     initWithString:self
     attributes:@
     {
     NSFontAttributeName: font
     }];
    CGRect rect = [attributedText boundingRectWithSize:size
                                               options:NSStringDrawingUsesLineFragmentOrigin
                                               context:nil];
    return rect.size;
}

@end 
```

# mysql - 改进这个非常慢的 MySQL SELECT

> ID：12744562
> 
> 赞同：0
> 
> 时间：2012-10-05T10:43:55.563
> 
> 标签：mysql, indexing

我有这个非常慢的 MySQL 查询，我想是因为所有的 JOIN（看起来很复杂，但这是很多表的问题）：

```
SELECT DISTINCT doctors.doc_id, 
    doctors.doc_user, 
    doctors.doc_first, 
    doctors.doc_last, 
    doctors.doc_email, 
    doctors.doc_notes, 
    titles.tit_name, 
    specializations.spe_name, 
    activities.act_name, 
    users.use_first, 
    users.use_last,
    (SELECT COUNT(*) FROM locations WHERE locations.loc_doctor = doctors.doc_id) AS loc_count,
    (SELECT COUNT(*) FROM reception WHERE reception.rec_doctor = doctors.doc_id) AS rec_count,
    (SELECT COUNT(*) FROM visits INNER JOIN reports ON visits.vis_report = reports.rep_id  WHERE visits.vis_doctor = doctors.doc_id AND reports.rep_user LIKE '%s') AS vis_count
FROM
    doctors
INNER JOIN titles ON titles.tit_id = doctors.doc_title
INNER JOIN specializations ON specializations.spe_id = doctors.doc_specialization
INNER JOIN activities ON activities.act_id = doctors.doc_activity
LEFT JOIN locations ON locations.loc_doctor = doctors.doc_id
INNER JOIN users ON doctors.doc_user = users.use_id
WHERE
    ((doctors.doc_last LIKE %s) OR (doctors.doc_first LIKE %s) OR (doctors.doc_email LIKE %s)) 
    AND doctors.doc_user LIKE %s 
    AND locations.loc_province LIKE %s 
    AND doctors.doc_specialization LIKE %s 
    AND doctors.doc_activity LIKE %s 
ORDER BY %s 
```

所有 %s 都是 sprintf() PHP 函数中
的参数 最重要的是要注意...我在 MySQL 上没有索引！我想我可以加快添加一些索引的过程......但是什么和在哪里？有太多的连接和搜索参数，我对什么是有效的感到困惑:-)

请问你能帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:49:03.173

您可以从在 where 条件中使用的那些列上添加索引开始。

此外，您应该索引那些在连接中使用的字段，即主键和外键列。

我建议逐步试验这些索引会产生真正的性能提升。

此外，我观察到您在单个查询中获取了太多数据。如果确实不需要，请将其分解为不同的报告和页面（如果可能），因为即使您进行了适当的索引，该解决方案也不会具有很好的可扩展性并且可能无法处理大量数据。

注意：您可能必须在通过 '%' 限定符查询的字段上创建全文索引。（即使用 LIKE 运算符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:50:47.573

就像运营商很慢。这是关于应用索引和全文的讨论

[mysql 喜欢性能提升](https://stackoverflow.com/questions/2481528/mysql-like-performance-boost)

# image - 将表单提交到 div

> ID：12744566
> 
> 赞同：1
> 
> 时间：2012-10-05T10:44:24.520
> 
> 标签：image, html

谁能告诉我为什么这不起作用或给我另一种方法来做我想做的事。

单击提交时，我在页面上有一个表单，我希望它处理成 add.php 并在一个名为 right 的 DIV 中打开。

表单页面

```
<script>
$("#Submit").click(function() {

var url = "add.php"; // the script where you handle the form input.

$.ajax({
       type: "POST",
       url: url,
       data: $("#myForm").serialize(), // serializes the form's elements.
       success: function(html){ $("#right").html(html); }
     });

return false; // avoid to execute the actual submit of the form.
});
</script>
</head>
<body>
<form action="add.php" method="post" enctype="multipart/form-data" id ="myForm">
 Name: <input type="text" name="name"><br> 
 E-mail: <input type="text" name = "email"><br> 
 Phone: <input type="text" name = "phone"><br> 
Photo: <input type="file" name="photo"><br>
<input type="submit" value="Upload">

</form>

</body> 
```

现在，如果我向表单添加操作以将其定向到 add.php 一切正常，所以其他脚本还可以，但是当我这样做时，没有任何反应，它不会像我想要的那样将 add.php 加载到“正确”的 div 中.

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:54:05.937

这是您的确切代码吗？有几个问题：

*   `$("#Submit").click`应该包装在一个文档就绪处理程序中，这样它就不会在页面实际加载之前运行。
*   没有与#Submit 匹配的按钮
*   没有与#right 匹配的 div

尝试

 `````
<script type="text/javascript">

jQuery(document).ready(function($) {

$("#Submit").click(function() {

var url = "add.php"; // the script where you handle the form input.

$.ajax({
       type: "POST",
       url: url,
       data: $("#myForm").serialize(), // serializes the form's elements.
       success: function(html){ $("#right").html(html); }
     });

return false; // avoid to execute the actual submit of the form.
});
});
</script>
</head>
<body>
<div id="right">
</div>

<form action="add.php" method="post" enctype="multipart/form-data" id ="myForm">
 Name: <input type="text" name="name"><br>
 E-mail: <input type="text" name = "email"><br>
 Phone: <input type="text" name = "phone"><br>
Photo: <input type="file" name="photo"><br>
<input type="submit" value="Upload" id="Submit">

</form> 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:58:06.947

你必须在body标签中的div上创建哪个id是正确的并且

```
<input id="submit" type="submit" name="upload" > 
```

像这样在body标签中添加新的div

```
<div id="right"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:51:44.387

您的 $("#Submit") 选择器不匹配任何内容（提交按钮没有 id 并且在绑定尝试之后定义），因此该函数未绑定到任何事件，因此从未执行。

取而代之的是，表单按其应有的方式运行：提交后，将其内容发布到“action”属性中指定的 url。这就是发生的事情，那个 div 永远不会被触及。

您必须回过头来了解 jquery 选择器是如何工作的。如何将函数绑定到事件。``

# azure - 如果 blob.upload 花费超过 60 秒，则续订 blob 租约

> ID：12744573
> 
> 赞同：2
> 
> 时间：2012-10-05T10:44:56.623
> 
> 标签：azure, timeout, azure-blob-storage, blobs

我知道我们可以在 blob 上获得 60 秒或无限的租约。对于以下代码：

```
 var account = CloudStorageAccount.DevelopmentStorageAccount;
  var blob = account.CreateCloudBlobClient().GetBlobReference("container/blob");
  var leaseId = blob.AcquireLease();
  blob.UploadByteArray(bytes);
  blob.ReleaseLease(leaseId); 
```

如果 uploadBtyeArray 时间因文件大小而异。我如何继续更新租约直到上传完成。

问候， 维维克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T11:05:55.500

调用后，`AcquireLease`您可以启动一个新线程，该线程在租约到期之前不断更新租约。上传完成后，您应该简单地中止执行自动更新的线程。

您可能想查看 Steve Marx 的 WazStorageExtensions，它带有[AutoRenewLease](https://github.com/smarx/WazStorageExtensions/blob/master/AutoRenewLease.cs)类（查看 DoOnce 方法）。在内部，`AutoRenewLease`该类使用这样的线程来保持租约：

```
 renewalThread = new Thread(() =>
            {
                while (true)
                {
                    Thread.Sleep(TimeSpan.FromSeconds(40));
                    blob.RenewLease(leaseId);
                }
            });
            renewalThread.Start(); 
```

# wolfram-mathematica - 非标准评估：在 Manipulate 内绘制

> ID：12744575
> 
> 赞同：2
> 
> 时间：2012-10-05T10:45:07.653
> 
> 标签：wolfram-mathematica

我想创建一个带有演示的笔记本：

```
SlopeInterceptDemonstration[{mmin_, mmax_}, {bmin_, bmax_}] :=
Module[{xmax, xmin},
xmax = Max[Abs[bmin + mmin], Abs[bmax + mmax]]*1.2;
xmin = - xmax;

Manipulate[
        Plot[m*x + b, {x, xmin, xmax}, AspectRatio -> 1, PlotRange -> {xmin, xmax}],
        {{m, mmin, "m"}, mmin, mmax, 0.1}, {{b, bmin, "b"}, bmin, bmax, 0.1}]
]; 
```

如果我通过一个简单的调用 ( SlopeInterceptDemonstration[{-2, 2}, {-5, 5}] ) 保存一个笔记本并使用新内核重新打开它，则不会显示演示，因为 xmin 和 xmax 未知。

有没有办法在 Plot 中强制评估这些变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:54:30.700

您可以与以下选项`DynamicModule`一起使用：`SaveDefinitions``Manipulate`

```
SlopeInterceptDemonstration[{mmin_, mmax_}, {bmin_, bmax_}] := DynamicModule[{xmax, xmin}, 
  xmax = Max[Abs[bmin + mmin], Abs[bmax + mmax]]*1.2;
  xmin = -xmax;
  Manipulate[Plot[m*x + b, {x, xmin, xmax}, AspectRatio -> 1, 
   PlotRange -> {xmin, xmax}], {{m, mmin, "m"}, mmin, mmax, 0.1}, {{b, bmin, "b"}, bmin, bmax, 0.1}, 
   SaveDefinitions -> True]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:39:56.973

我相信这可以满足您的要求：

```
SlopeInterceptDemonstration[{mmin_, mmax_}, {bmin_, bmax_}] :=
 Manipulate[
   Plot[m*x + b, {x, xmin, xmax}, AspectRatio -> 1, PlotRange -> {xmin, xmax}],
   {{m, mmin, "m"}, mmin, mmax, 0.1},
   {{b, bmin, "b"}, bmin, bmax, 0.1},
   {xmax, None},
   {xmin, None},
   Initialization :>
     {xmax = Max[Abs[bmin + mmin], Abs[bmax + mmax]]*1.2, xmin = -xmax}
 ] 
```

`{xmax, None}`用于`xmax`在 Module 中进行本地化。另一个答案中显示的方法`DynamicModule`是标准的并且更灵活。

# c# - Selenium c#接受确认框

> ID：12744576
> 
> 赞同：12
> 
> 时间：2012-10-05T10:45:18.630
> 
> 标签：c#, selenium, nunit, webdriver, selenium-webdriver

我在 c# 中使用 selenium 编写了一个 nUnit 测试。

一切都很顺利，直到我必须确认一个 JS 确认框。

这是我正在使用的代码：

```
this.driver.FindElement(By.Id("submitButton")).Click();
this.driver.SwitchTo().Alert().Accept(); 
```

确认框出现在提交按钮之后。确认出现然后立即消失，但表单未提交。无论上面的 accept() 行如何，行为都是相同的。

我正在使用 Firefox v15.0.1 和 selenium v​​2.24

我尝试在提交单击和确认接受之间放置一个 Thread.Sleep。

我读过的所有内容都说硒驱动程序会自动发送确认OK，但似乎正在发生其他事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T11:11:41.783

在这个问题中，我将尝试验证确认框的存在。它是这样的：

```
this.driver.FindElement(By.Id("submitButton")).Click();

 boolean presentFlag = false;

  try {

   // Check the presence of alert
   Alert alert = driver.switchTo().alert();
   // Alert present; set the flag
   presentFlag = true;
   // if present consume the alert
   alert.accept();

  } catch (NoAlertPresentException ex) {
   // Alert not present
   ex.printStackTrace();
  }

  return presentFlag;

 } 
```

那么如果不工作。尝试逐步调试。[一些关于硒在这里](http://seleniumwebdriverfaq.blogspot.com/2012/05/how-to-check-presence-of-alert.html)处理的警报（确认框）的附加信息 希望这对你有所帮助

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-21T05:43:19.350

您只需：

```
 IAlert alert = driver.SwitchTo().Alert();
 alert.Accept(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T08:49:00.963

我正在测试的端点没有可靠的响应时间，我可以让它始终使用 Firefox 的 webdriver selenium-dotnet-2.33.0 (.NET4) 的唯一方法是执行以下操作：

```
private void acceptAlert(){
string alertText = "";
IAlert alert = null;
while (alertText.Equals("")){
if (alert == null)
{
try{
alert = driver.SwitchTo().Alert();
}
catch{ 
System.Threading.Thread.Sleep(50); }
}
else{
try{
alert.Accept();
alertText = alert.Text;
}
catch (Exception ex){
if (ex.Message.Equals("No alert is present")) alertText = "Already Accepted";
else System.Threading.Thread.Sleep(50);
}
}
}
} 
```

# c# - 如何检测表单是实例还是表单本身

> ID：12744581
> 
> 赞同：1
> 
> 时间：2012-10-05T10:45:56.127
> 
> 标签：c#, winforms, c#-4.0, multiple-instances, instances

这是一个有点不同的问题，或者可能是一个简单的问题。但我现在有这个问题。

我有三种形式`loginForm`，`mainForm`和`subForm`。
在我`loginForm`的帐户中，我有两个帐户，一个用于`mainForm`访问，另一个用于`subForm`访问。可以同时访问
，但只能访问。通过我们可以创建多个实例（是单实例）。`mainFormAccessAccount``mainForm``subForm``subFormAccessAccount``subForm`
`mainForm``subForm``mainForm`

***现在我的问题是***：我想及其实例（由创建的实例`subForm_Closed`的事件函数。`subForm``mainForm`

我使用下面的代码`subForm`在**subForm.cs中创建实例**

```
private mainForm MainForm;
    internal void RegisterParent(mainForm form)
    {
        this.MainForm = form;
    } 
```

并在**mainForm.cs**中创建实例`subForm`，我使用了以下代码：

```
subForm newSubForm = new subForm();
newSubForm.Show();
newSubForm.RegisterParent(this); 
```

我该如何解决这个问题？
（我不确定它们是否被称为实例，因为我是 Dot net noob）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:54:20.250

如果我正确理解您的问题，您需要两个不同的处理程序来处理子表单的关闭事件。

1.  通过 subFormAccessAccount 创建的 SubForm 关闭事件的一个处理程序
2.  通过 MainForm 创建的 SubForm 关闭事件的另一个处理程序

正如您所怀疑的，这确实是一个简单的问题，既然您提到您是一个 .net 菜鸟，我将尝试详细解释。

如果我没记错的话，您`subForm_Closed`使用 Visual Studio 设计器表面生成了事件处理程序。这似乎是你困惑的原因。

**Visual Studio 设计器如何生成事件处理程序：**

如果您打开 SubForm.cs，请注意其构造函数的定义。会是这样的

```
public SubForm()
{
     InitializeComponent();
     //May be some other code as well
} 
```

该`InitializeComponent`方法在 SubForm.designer.cs file() 中有描述（在解决方案资源管理器中展开 SubForm.cs 即可看到）。

方法中的一行`InitializeComponent`将是这样的

```
this.FormClosed += new System.Windows.Forms.FormClosedEventHandler(this.SubForm_Closed); 
```

因此，只要您通过 subFormAccessAccount 或 MainForm 创建一个子表单“实例”（这里我的意思是真实的对象实例，而不是您在问题中提到的充其量是子表单的意义上），它就会附加您的 SubForm_Closed 事件FormClosed 事件的处理程序。

**如何获得所需的行为？**

如果要处理 SubForm.cs 中的关闭事件，可以执行以下操作

```
internal void RegisterParent(mainForm form)
{
    this.MainForm = form;
    this.FormClosed -= SubForm_Closed; //Unhook previous handler
    this.FormClosed += SubFormAsChild_Closed; //hook new handler
} 
```

如果要处理 MainForm.cs 中的关闭事件，可以这样做

```
internal void RegisterParent(mainForm form)
{
    this.MainForm = form;
    this.FormClosed -= SubForm_Closed;
}

//in MainForm.cs
newSubForm.RegisterParent(this);
newSubForm.FormClosed += newSubForm_Closed; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:02:53.833

几种方法向 SubForm 添加另一个构造函数

例如

```
public SubForm(Boolean argCreatedByMainForm) : this()
{
// save argument in private member variable for use in OnCloseQuery
} 
```

然后使用

```
subForm newSubForm = new subForm(true);
newSubForm.Show();
newSubForm.RegisterParent(this); 
```

这不是我要走的路，因为让一种形式知道另一种形式，往往会变成维护的噩梦，但你需要在你的编程盒中使用更多工具来实现更好的解决方案。例如，一个管理表单之间交互的类，然后将它们抽象为接口，最后但并非最不重要的是注入行为。

看到你正在学习，让构造函数工作，当你学习技术时，你可以进步到愚蠢的聪明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:30:08.683

```
subForm newSubForm = new subForm();
newSubForm.Show();
newSubForm.RegisterParent(this);
newSubForm.Close += (s, e) =>
{
   // Close event will be fired for this instance only.
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:57:11.513

我建议您使用其他结构的主窗体 - 子窗体引用。

您的 Subform 派生自 System.Windows.Forms.Form，System.Windows.Forms.Control 派生自 System.Windows.Forms.Control，它实际上已经有一个属性来存储父控件：因此您应该将对主窗体的引用存储在那里。

另一件事是你应该实现一个静态方法来在你的主窗体中创建子窗体，它会调用单个实例引用的私有方法来创建真正的子窗体 - 我假设你是单例模式。

所以代码看起来像这样

```
public class MainForm : System.Windows.Forms.Form 
{
  // used to hold references to subforms note: not static
  private List<SubForm> mySubForms;

  // singelton implementation
  private static MainForm theInstance = null;      
  private MainForm()
  {
     mySubForms = new List<SubForm>();
  }
  public static MainForm GET_INSTANCE()
  {
     if (MainForm.theInstance == null)
     {
       MainForm.theInstance = new MainForm();
     }
     return MainForm.theInstance;
  }

  // creates subforms and the references right not:static method as singelton 
  //pattern is used
  public static SubForm CREATE_SUBFORM()
  {
     SubForm newSub = new SubForm();
     newSub.Parent = theInstance;
     theInstance.mySubForms.Add(newSub);
     return newSub;
  }
} 
```

如果代码有一些打字错误，请道歉......我现在没有 IDE。显然我没有实现单格模式线程安全......这将是出于演示目的的边缘。

编辑：更好的做法是让表单通过使用 evetns 进行通信。如果您打算拥有一个多线程应用程序，这将是最好的方法。但是你需要先进的 .Net 技能才能做到这一点 - imo。

# jquery - jQuery切换html

> ID：12744591
> 
> 赞同：1
> 
> 时间：2012-10-05T10:46:31.020
> 
> 标签：jquery, html, css

```
jQuery(this).html(jQuery(this).html() == '&#9660; SHOW &#9660;' ? '&#9650; HIDE &#9650;' : '&#9660; SHOW &#9660;'); 
```

这将根据要求切换文本，但它显示

```
&#9660; 
```

作为 html 而不是 ▼

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:54:27.077

问题是您从元素内容中获得的 html（或文本）内容已经被转换。所以`&#9660;`不存在了。

如果这个脚本是 UTF-8，你可以这样做：

```
$(this).html(jQuery(this).text() == '▼ SHOW ▼' ? '▲ HIDE ▲' : '▼ SHOW ▼'); 
```

**编辑，另一个不需要 UTF-8 的更简单的版本：**

```
$(this).html(jQuery(this).text().indexOf('SHOW')>0 ? '&#9650; HIDE &#9650;' : '&#9660; SHOW &#9660;'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:52:48.840

试试下面的：

```
$('#foo').toggle(function() {
    $(this).html('&#9650; HIDE &#9650;');
}, function() {
    $(this).html('&#9660; SHOW &#9660;');
}); 
```

***[现场演示。](http://jsfiddle.net/SfKGQ/)***

# ruby-on-rails - Ruby 不读取 database.yml 文件

> ID：12744601
> 
> 赞同：3
> 
> 时间：2012-10-05T10:47:12.523
> 
> 标签：ruby-on-rails, postgresql, rake

```
$ vi database.yml
(Full database.yml contents)
development:
   encoding: unicode 
   adapter: postgresql 
   username: someuser 
   pool: 10  
   port: 5432  
   host: 10.55.333.222  <This is not a real IP address>
   database: myrailsapp  
   password: mypassword  
   min_messages: WARNING  

$ RAILS_ENV=development rake db:migrate <br />
(in /var/www/dress_rails_app) <br />
rake aborted! <br />
could not connect to server: Connection refused 
    Is the server running on host "localhost" (127.0.0.1) and accepting 
    TCP/IP connections on port 5432? <br />

Tasks: TOP => db:migrate => environment <br />
(See full trace by running task with --trace) <br /> 
```

我没有尝试连接到（127.0.0.1/localhost）。我正在尝试连接到远程主机，但我的 database.yml 被忽略了。我正在尝试连接到 postgresql 远程主机，但我的 database.yml 被忽略，我的 ruby​​ 应用程序继续尝试连接到本地主机。

这是完整的堆栈跟踪：

```
(in /var/www/dress_rails_app)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
could not connect to server: Connection refused
    Is the server running on host "localhost" (127.0.0.1) and accepting
    TCP/IP connections on port 5432?
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `initialize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `new'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `connect'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:308:in `clear_cache!'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:418:in `_run__486199626554910505__prepare__4301182059246596778__callbacks'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
/var/lib/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
/var/lib/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/www/dress_rails_app/config/environment.rb:5:in `<top (required)>'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:103:in `require_environment!'
/var/lib/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/var/lib/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:19:in `load'
/usr/local/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate => environment 
```

这是在 database.yml 文件中验证 YAML 的输出：

```
$ irb
irb(main):001:0> require 'yaml'
=> true
irb(main):002:0> db_yaml = YAML.load_file('/var/www/dress_rails_app/config/database.yml')
=> {"development"=>{"encoding"=>"unicode", "adapter"=>"postgresql", "pool"=>10, "port"=>5432, "username"=>"someuser", "database"=>"dress_rails_app", "password"=>"somepassword", "host"=>"10.4.66.18"}}
irb(main):003:0> puts db_yaml.inspect
{"development"=>{"encoding"=>"unicode", "adapter"=>"postgresql", "pool"=>10, "port"=>5432, "username"=>"someuser", "database"=>"dress_rails_app", "password"=>"somepassword", "host"=>"10.4.66.18"}}
=> nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:53:33.340

database.yml 看起来是正确的，但我会尝试验证它是正确的。

验证 yml 是否有效

```
require 'yaml'
db_yaml = YAML.load_file('/path/to/database.yml')
puts db_yaml.inspect 
```

以确保您可以读取/解析它，并且那里没有错误选项卡等。我在登台服务器上使用几乎相同的配置，它按预期工作

```
staging:
  adapter: postgresql
  database: staging_db
  username: doon
  password: my_password
  host: 172.20.0.99 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T17:25:04.150

我有同样的问题。

在 activerecord 中调试 postgresql_adapter 后 - 我找到了解决方案。
在 database.yml 中，只需替换`host: <ip address>`
为`hostname: <ip address>`

# arrays - Free Pascal 将数字保存在数组中

> ID：12744604
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:47:15.517
> 
> 标签：arrays, numbers, pascal

我不知道该怎么做：我想用 pascal 编写一个程序，用户必须在其中插入 90 个由控制台引入并用空格分隔的数字，并将它们保存在二维数组 (10x9) 中。任何人都知道如何实现这一点？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:57:17.103

```
var the_array:array[1..10] of array[1..9] of integer;
var i:integer; var j:integer;
...
i:=1; j:=1;
while i<=10 do begin
    while j<=9 do begin
        read(the_array[i,j]);
        inc(j);
    end;
    j:=1;
    inc(i);
end; 
```

您只需使用两个索引来遍历数组，同时通过调用 read() 填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:09:38.727

您写道您使用 FreePascal，因此您可以在此处使用 SScanF。

该程序允许您输入一些由空格分隔的数字行。完成后，它会打印数字。

不过，我永远不会把这样的东西交给最终用户。为什么不提供图形用户界面呢？

```
program Project1;
uses
  SysUtils;

const
  Lines = 10;

type
  TNumberArray = array[0..Lines-1,0..9] of integer;

procedure GetNumbers(var nums:TNumberArray);
var Line:Integer; s:String;
begin
  for Line := Low(nums) to high(nums) do
  begin
    Write('Enter line ',Line, ': ');
    ReadLn(S);
    SScanf(s,'%d %d %d %d %d %d %d %d %d %d',
      [
        @nums[Line,0],
        @nums[Line,1],
        @nums[Line,2],
        @nums[Line,3],
        @nums[Line,4],
        @nums[Line,5],
        @nums[Line,6],
        @nums[Line,7],
        @nums[Line,8],
        @nums[Line,9]
      ]
    );
  end;
end;

procedure ShowNumbers(nums:TNumberArray);
var Line,Col:Integer;
begin
  for Line := Low(nums) to high(nums) do
  begin
    for Col:=Low(nums[Line]) to High(nums[Line]) do
      Write(nums[Line,Col], ' ');
    WriteLn;
  end;
end;

var
  Numbers: TNumberArray;

begin
  WriteLn('Enter 10 numbers');

  GetNumbers(Numbers);
  ShowNumbers(Numbers);

  WriteLn('Done. Press a key to continue.');
  ReadLn;
end. 
```

使用 TStringList 解析行更简洁，因此您不必对列数进行硬编码，但这应该可以。

# javascript - 使整个网页链接不可点击的最佳方法是什么

> ID：12744605
> 
> 赞同：4
> 
> 时间：2012-10-05T10:47:18.143
> 
> 标签：javascript, css, hyperlink, readonly

> **可能重复：**
> [覆盖 Javascript 中链接 ('a') 对象的默认行为](https://stackoverflow.com/questions/1760096/override-default-behaviour-for-link-a-objects-in-javascript)

使主页中的整个页面链接只读的最佳方法是什么（不可点击`href=#`或`href="javascript:void()"`基于用户操作。

我只想使用 Javascript 和 CSS 来实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T10:50:08.073

只有CSS

```
a {
    pointer-events: none;
    cursor: default;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T10:49:35.347

尝试

用jQuery

`$("a").click(function() { return false; });`

香草js

```
 var elements = document.getElementsByTagName("a");
        for (var i = 0; i < elements.length; i++) {
            elements[i].onclick = function () { return false; }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:51:21.993

像这样的东西应该工作

```
var anchors = document.getElementsByTagName('a');

for(var i=0,len=anchors.length;i<len;i++){
   anchors[i].href = '#';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T11:09:44.470

这是[CMS](https://stackoverflow.com/a/1760127/295264)通过使用事件委托技术的绝妙解决方案。

```
document.onclick = function (e) {
  e = e ||  window.event;
  var element = e.target || e.srcElement;

  if (element.tagName == 'A') {
    someFunction(element.href);
    return false; // prevent default action and stop event propagation
  }
}; 
```

[演示](http://jsbin.com/ufexa)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T10:50:40.283

从...开始：

```
links = document.getElementsByTagName('a') 
```

然后：

```
for (var i=0; i<links.length; ++i) {
    // disable a link, for instance like this
    links[i].href = "javascript:void()"
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T10:53:02.360

**jQuery**

```
$("a").on("click",function(e) { e.preventDefault();   
   // anything you want to do on click
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T11:06:53.827

[使用replaceChild](https://developer.mozilla.org/en-US/docs/DOM/Node.replaceChild)怎么样- 它可以在 NS6/IE6/Chrome1/FX1 左右的所有浏览器中使用

[演示](http://jsfiddle.net/mplungjan/dDEER/)

纯JS：

```
window.onload=function() {
  var anchors = document.getElementsByTagName('a');

  for(var i=anchors.length-1;i>=0;i--){
    var span = document.createElement("span");
    span.innerHTML=anchors[i].innerHTML;
    anchors[i].parentNode.replaceChild(span,anchors[i])
    span=null;
  }
} 
```

或者我在页面评论中的第一个建议：

```
window.onload=function() {
  var anchors = document.getElementsByTagName('a');
  for(var i=anchors.length-1;i>=0;i--){
    anchors[i].onclick=function() { return false }
  }
} 
```

# c# - 在 MSBuild 任务中使用 Mono.Cecil 解决程序集是 Silverlight 还是 .NET

> ID：12744607
> 
> 赞同：0
> 
> 时间：2012-10-05T10:47:27.377
> 
> 标签：c#, cil, mono.cecil

我正在使用[MSBuild](http://en.wikipedia.org/wiki/MSBuild)任务中的 Mono.Cecil，但在解决程序集的方式上遇到了问题。它正在选择[.NET](http://en.wikipedia.org/wiki/.NET_Framework)版本的[Prism](https://en.wikipedia.org/wiki/Model_View_ViewModel#Timeline)而不是 Silverlight。.NET 版本的 Prism 不包含`Microsoft.Practices.Prism.Regions.Behaviors.TabControlRegionSyncBehavior`，因此我们无法解析该类型。

我正在对中间输出执行任务，因此引用的程序集不在该文件夹中。程序集的搜索路径在 MSBuild 脚本中设置为 ReferencePath。

Mono.Cecil 在此函数中进行基于名称的匹配：

```
AssemblyDefinition SearchDirectory (AssemblyNameReference name, IEnumerable<string> directories, ReaderParameters parameters)
{
    var extensions = new [] { ".exe", ".dll" };
    foreach (var directory in directories) {
        foreach (var extension in extensions) {
            string file = Path.Combine (directory, name.Name + extension);
            if (File.Exists (file))
                return GetAssembly (file, parameters);
        }
    }
    return null;
} 
```

有没有办法让它比较运行时（Silverlight 与 .NET）？有没有其他方法可以解决这个问题？让它使用[元数据版本](https://stackoverflow.com/questions/325918/how-to-find-out-which-version-of-the-net-framework-an-executable-needs-to-run)是否明智？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:46:25.137

Cecil 为解析 .NET 程序集所做的工作比这更复杂。问题是您尝试使用的 Cecil 的 DefaultAssemblyResolver 不知道如何解析 Silverlight 程序集。它只知道股票 .NET 程序集。

请参阅 Stack Overflow 问题*[Mono.Cecil 无法处理 Silverlight 5 程序集](https://stackoverflow.com/questions/9109506)*，以获取程序集解析过程的自定义示例。

# java - 不发送 POST 参数

> ID：12744612
> 
> 赞同：1
> 
> 时间：2012-10-05T10:48:00.680
> 
> 标签：java, android, http-post

我已经尝试了几件事，但我的 android 应用程序没有发送帖子参数。我在虚拟设备上运行应用程序。这是代码：

```
@Override
public void run() {
    try{
        HttpClient client = new DefaultHttpClient();  
        HttpPost post = new HttpPost(page);   

        HttpParams httpParams = client.getParams();
        httpParams.setIntParameter(CoreConnectionPNames.SO_TIMEOUT, 20000);

        post.setHeader("Content-type", "application/json");
        post.setHeader("Accept", "application/json");
        JSONObject obj = new JSONObject();
        obj.put("username", "abcd");
        obj.put("password", "1234");
        post.setEntity(new StringEntity(obj.toString(), "UTF-8"));
        HttpResponse response = client.execute(post);
        InputStreamReader isr = new InputStreamReader(response.getEntity().getContent());
        BufferedReader reader = new BufferedReader(isr);
        String line = "";
        while((line = reader.readLine()) != null){
            System.out.println(line);
        }
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

它应该向 PHP 页面发送一个 post 请求。此页面显示 POST 数组的输出：

```
<?php
print_r($_POST);
?> 
```

当我运行该应用程序时，它显示一个空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:55:08.203

那是因为你正在发送 JSON

标准 php $_POST 是从键值对构建的，因此您应该发布 key1=value1&key2=value2

或者你应该从

```
$HTTP_RAW_POST_DATA 
```

或者

```
<?php $postdata = file_get_contents("php://input"); ?> 
```

并使用

```
json_decode( $postdata ); 
```

PHP 不会自动为你解码 json

您还可以使用另一种方法并发布您的 json，例如 data=YourJsonCode

然后使用 json_decode( $_POST['data'] ); 对其进行解码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:15:37.160

尝试发送 url 编码的名称/值对。您还可以使用`EntityUtils`将响应转换`String`为您的响应。

```
HttpClient client = new DefaultHttpClient();  
HttpPost post = new HttpPost(page);

HttpParams httpParams = client.getParams();
httpParams.setIntParameter(CoreConnectionPNames.SO_TIMEOUT, 20000);

post.setHeader("Content-Type","application/x-www-form-urlencoded");

List<NameValuePair> formParams = new ArrayList<NameValuePair>();
formParams.add(new BasicNameValuePair("username", "abcd"));
formParams.add(new BasicNameValuePair("password", "1234"));

UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formParams,HTTP.UTF_8);
post.setEntity(entity);
HttpResponse httpResponse = client.execute(post);
System.out.println(EntityUtils.toString(httpResponse.getEntity())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:33:32.663

问题解决了。有一个重定向所有非 www 页面的 htaccess 文件。

# java - 如何调用在 https 上公开的 Web 服务？

> ID：12744613
> 
> 赞同：1
> 
> 时间：2012-10-05T10:48:06.743
> 
> 标签：java, web-services

我是网络服务的新手。我已经完成了编写客户端代码的任务，该代码将调用在 https 上公开的身份验证 Web 服务。我需要从客户端代码中传递用户名和密码来检查有效用户。我也有 keystore 和 trustore 文件。我不知道如何使用这些文件。谁能指导我并提供示例客户端代码？

我正在使用 Axis 从 wsdl 生成客户端存根。

问候，

维沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:04:31.570

1.  当您说 Webservice 和 Axis 时，我认为您是在谈论 SOAP。您可能需要检查[Java webservice (soap) 客户端使用证书](https://stackoverflow.com/questions/196566/java-webservice-soap-client-use-certificates)。

2.  SOAP 是基于 HTTP 的协议。如果您希望它通过 SSL，它将在 HTTPS 上。

3.  如果您正在研究 JSR-311 的 RESTful 实现，例如[CXF](http://cxf.apache.org/)、[jersey](http://jersey.java.net/)等，您可以在他们的网站上找到示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:43:44.757

如果您可以访问 URL，那么您需要添加证书。

*   访问 URL 并单击锁定图标以查看证书。
*   转到证书的详细信息选项卡并以 Base64`.cer`格式保存证书
*   安装证书
*   执行以下命令

命令：

```
$ keytool -import -noprompt -trustcacerts -alias ALIASNAME -file FILENAME_OF_THE_INSTALLED_CERTIFICATE -keystore PATH_TO_CACERTS_FILE -storepass PASSWORD 
```

参考： [http ://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html](http://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-31T21:05:09.720

轴1还是轴2？无论如何..如果只是https，您需要导入证书，并且根据您调用的服务器的策略，您可能也必须向自己出示证书.....

在这里查看[https://axis.apache.org/axis2/java/rampart/samples.html](https://axis.apache.org/axis2/java/rampart/samples.html)以获取有关基本身份验证的信息和示例。

至于向传出请求添加证书，您需要按照以下方式执行操作：

```
 System.setProperty("javax.net.ssl.trustStoreType", "JKS");
      System.setProperty("javax.net.ssl.trustStore", "keystore.jks");
      System.setProperty("javax.net.ssl.trustStorePassword", "password");
      System.setProperty("javax.net.ssl.keyStoreType", "pkcs12");
      System.setProperty("javax.net.ssl.keyStore", "client.p12");
      System.setProperty("javax.net.ssl.keyStorePassword", "password"); 
```

如果您的通信是通过代理进行的，请格外小心。

# ajax - 在执行操作之前重新加载页面的某些部分？

> ID：12744614
> 
> 赞同：0
> 
> 时间：2012-10-05T10:48:07.670
> 
> 标签：ajax, jsf

我有一个`h:commandButton`电话`action="#{bean.do}"`。还有一些对该按钮的 ajax 请求，它应该重新设计网站的一部分。这种重新设计应该在动作执行*之前进行。*我怎样才能做到这一点？

```
<h:commandButton action="#{bean.do}">
    <f:ajax execute="@form" render="specificId" />
</h:commandButton> 
```

由于操作`do`有时需要很长时间，我希望页面首先显示消息/图像或类似的。然后首先执行操作。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:49:46.247

您可以使用该`onclick`属性在调用操作之前执行一些 JavaScript 代码。

例如：

```
<h:commandButton ... onclick="document.body.style.background='pink'"> 
```

然而，最好为此使用`onevent`属性`<f:ajax>`，以便您可以恢复更改：

```
<h:commandButton ...>
    <f:ajax ... onevent="handleDo" />
</h:commandButton>
<img id="progress" src="progress.gif" class="hidden" /> 
```

例如，它禁用/启用按钮并显示/隐藏进度图像：

```
function handleDo(data) {
    var status = data.status; // Can be 'begin', 'complete' and 'success'.
    var button = data.source; // The HTML element which triggered the ajax.
    var image = document.getElementById("progress"); // Ajax loading gif?

    switch (status) {
        case 'begin': // This is called right before ajax request is been sent.
            button.disabled = true;
            image.style.display = "block";
            break;

        case 'complete': // This is called right after ajax response is received.
            image.style.display = "none";
            break;

        case 'success': // This is called when ajax response is successfully processed.
            button.disabled = false;
            break;
    }
} 
```

# php - 将多页 PDF 文件拆分为单页

> ID：12744616
> 
> 赞同：3
> 
> 时间：2012-10-05T10:48:11.587
> 
> 标签：php, linux, pdf, split

> **可能重复：**
> [使用 PHP（或可能是 perl）将 PDF 文档拆分为单独的页面](https://stackoverflow.com/questions/2584133/split-pdf-documents-into-separate-pages-using-php-or-possibly-perl)

如何在 Linux 服务器上的 PHP 中将多页 PDF 文件拆分为不同的单页 PDF 文件？是否有任何 PHP 库或免费命令行工具可用于执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:06:07.653

最新版本的[**Ghostscript** (v9.06)](http://downloads.ghostscript.com/)也可以做到这一点。这是在`cmd.exe`32 位 Windows 系统上的“DOS-Box”窗口中使用的命令行：

```
 gswin32c.exe                ^
   -o original_page_%03d.pdf ^
   -sDEVICE=pdfwrite         ^
   -sPDFSETTINGS=/prepress   ^
    original-multipage.pdf 
```

**`-o ...`**：这表示输出文件的名称。
**`%03d`**: 文件名的这部分将被翻译成 3 位数字，由前导`0`s 填充，从`001`第一页开始。
**`-sPDFSETTINGS=...`**: 是一个可选参数；如果使用将确保嵌入所有使用的字体，以及通常确保高质量输出的其他一些设置。

Ghostscript 可用于 Windows。（上面的链接将您带到安装程序：**gs906w32.exe**和**gs906w64.exe**。向下滚动以找到它们...）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T10:55:00.177

您可以使用[pdftk](http://www.pdflabs.com/docs/pdftk-cli-examples/)

```
exec("pdftk " . $pdflargeFile . " burst output " . $outputPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:51:59.620

[PDFSplit](http://pdfbox.apache.org/commandlineutilities/PDFSplit.html)拥有您需要的所有示例。:)

```
PDFSplit -split 1 sample_with_13_pages.pdf 
```

..应该这样做。

# c++ - 在结束之前停止迭代器

> ID：12744619
> 
> 赞同：3
> 
> 时间：2012-10-05T10:48:23.347
> 
> 标签：c++

我有一个迭代器 p 和一个顶点曲线点：

```
for (p = curvePoints.begin(); p != curvePoints.end(); p++) {
  p->x = (1 - u) * p->x + u * (p+1)->x;
  p->y = (1 - u) * p->y + u * (p+1)->y;
} 
```

现在循环使用下一个索引对象的值；我如何保证下一个值存在。换句话说，我怎样才能使循环条件类似于`(p+1) != curvePoints.end()`or `p != curvePoints.end() - 1`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:51:11.503

您可以`std::distance(p, curvePoints.end()) > 1`根据情况使用。

[http://www.cplusplus.com/reference/std/iterator/distance/](http://www.cplusplus.com/reference/std/iterator/distance/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:58:42.687

您可以缓存和重用`p`-s 后继的值：

```
auto p = curvePoints.begin();
if (p != curvePoints.end()) {
  auto pn = p; ++pn;
  for (; pn != curvePoints.end(); p = pn, ++pn) {
    ... // use pn instead of (p+1)
  }
} 
```

注意：对于迭代器来说，预增量是更可取的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:50:17.180

换成怎么`p != curvePoints.end()`样
`(p != curvePoints.end()) && ((p + 1) != curvePoints.end())`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:08:55.287

我会这样做的方式是不进行比较，`end()`除非序列为空。如果序列非空，您将比较`end() - 1`并可能缓存该值：

```
for (auto p(points.begin()), 
          end(c.end() - (c.empty()? 0, 1));
     p != end; ++p) {
    ...
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T10:52:12.580

```
 for (p = curvePoints.begin(); p < curvePoints.end(); p++) {
          p->x = (1 - u) * p->x + u * (p+1)->x;
          p->y = (1 - u) * p->y + u * (p+1)->y; 
```

# objective-c - ios：如何获取当前 ?UIscrollView 页面的索引

> ID：12744622
> 
> 赞同：4
> 
> 时间：2012-10-05T10:48:34.237
> 
> 标签：objective-c, ios, xcode, uiscrollview

我想知道 UIScrollView 中当前滚动页面的索引。我搜索了许多网站，没有任何帮助。欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:58:53.760

尝试这个

```
 //Horizontal
    NSInteger pagenumber = scrollView.contentOffset.x / scrollView.bounds.size.width;
    //Vertical
    NSInteger pagenumber = scrollView.contentOffset.y / scrollView.bounds.size.height; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-04T23:29:59.400

对于那些需要代码（swift）的人， UIScrollViewDelegate 提供了方法，这使用了上面的水平示例

```
func scrollViewDidEndDecelerating(scrollView: UIScrollView) {
    print("END Scrolling \(scrollView.contentOffset.x / scrollView.bounds.size.width)")
    index = Int(scrollView.contentOffset.x / scrollView.bounds.size.width)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:00:30.297

借助一些数学计算，您可以获得页面的索引号，我发送的代码仅供参考。我已经做好了。

```
-(void)KinarafindingSelectedCategory:(UIScrollView*)scrollView{
    for (UIView *v in scrollView.subviews)
    {
        if ([v isKindOfClass:[UIButton class]])
        {
            UIButton *btn=(UIButton*)v;

            float x1=scrollView.contentOffset.x+(([UIScreen mainScreen].bounds.size.width/2)-(btn.frame.size.width/2));
            float x2=scrollView.contentOffset.x+(([UIScreen mainScreen].bounds.size.width/2)+(btn.frame.size.width/2));
            float BtnMidPoint=btn.frame.origin.x+(btn.frame.size.width/2);
            if(BtnMidPoint >= x1 && BtnMidPoint <= x2)
            {
                if(scrollView==KinaraCategory)
                {
                    KinaraSelectedCategoryName=btn.titleLabel.text;
                    KinaraSelectedCategoryID=btn.tag;
                    NSLog(@"Selected Category Tag : %d",KinaraSelectedCategoryID);
                    NSLog(@"Selected Category Name : %@",KinaraSelectedCategoryName);
                }
                else if(scrollView==KinaraSubCategory)
                {
                    KinaraSelectedSubCategoryID=btn.tag;
                    KinaraSelectedSubCategoryName=btn.titleLabel.text;

                    NSLog(@"Selected SubCategory Tag : %d",KinaraSelectedSubCategoryID);
                    NSLog(@"Selected SubCategory Name : %@",KinaraSelectedSubCategoryName);
                }
                break;
            }
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:50:21.470

使用该`contentOffset`属性，它返回 a `CGSize`，它是`UIScrollView`.

# android - 如何解决将 project.apk 上传到设备超时的问题

> ID：12744623
> 
> 赞同：1
> 
> 时间：2012-10-05T10:48:39.313
> 
> 标签：android, android-emulator

我正在尝试启动我的应用程序，但这就是我得到的。我正在使用带有 ADD 的 Eclipse。我正在尝试运行这个项目，但它似乎无法上传到虚拟设备上关于如何解决这个问题的任何建议？

```
[2012-10-05 04:44:10 - Android_Test] ------------------------------
[2012-10-05 04:44:10 - Android_Test] Android Launch!
[2012-10-05 04:44:10 - Android_Test] adb is running normally.
[2012-10-05 04:44:10 - Android_Test] Performing com.example.android_test.MainActivity activity launch
[2012-10-05 04:44:10 - Android_Test] Automatic Target Mode: launching new emulator with compatible AVD 'TestDevice'
[2012-10-05 04:44:10 - Android_Test] Launching a new emulator with Virtual Device 'TestDevice'
[2012-10-05 04:44:12 - Android_Test] New emulator found: emulator-5554
[2012-10-05 04:44:12 - Android_Test] Waiting for HOME ('android.process.acore') to be launched...
[2012-10-05 04:45:04 - Android_Test] HOME is up on device 'emulator-5554'
[2012-10-05 04:45:04 - Android_Test] Uploading Android_Test.apk onto device 'emulator-5554'
[2012-10-05 04:45:09 - Android_Test] Failed to install Android_Test.apk on device 'emulator-5554': timeout
[2012-10-05 04:45:09 - Android_Test] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:52:19.297

转到 > 窗口菜单 > 首选项 > Android > DDMS > 增加 ADB 连接超时值

如果这不起作用然后尝试..

从 DDMS 重置 ADB > 设备 > 重置 ADB（从右上角向下箭头）

如果这失败了，那么你必须重新启动你的 AVD

# c# - 看起来像是基本的 C# 查询，但我不是 C# 开发人员

> ID：12744626
> 
> 赞同：3
> 
> 时间：2012-10-05T10:48:55.127
> 
> 标签：c#

这没有多大意义，所以提前道歉，我不是 C# 开发人员，但已经给出了一些代码来查看。

我需要将模型对象传递给函数，但是我循环遍历，因此需要动态构建名称。所以让我们假设我通常会这样引用它。

```
model.employee.title
model.employee.forename 
```

我如何在最后一部分使用字符串来引用它。

我正在使用 foreach 循环各个部分，这很好，但是我需要将对象传递给函数调用。我将最后一部分的名称作为文字字符串（“title”，“forname”），但我不确定如何传递它。

如此有效地，我需要使用类似的东西

```
model.employee."title" 
```

或者

```
model.employee.varContainingTheName 
```

我知道这些不起作用，但不知道如何进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:52:06.250

基本上，如果您有一串成员名称，那么您就是在谈论反射。反射 API 在字段和属性之间有所不同，因此您需要知道它是哪一个，例如（在哪里`obj`，`model.employee`并且`name`是您要访问的成员的名称）：

```
object value = obj.GetType().GetField(name).GetValue(obj); 
```

与：

```
object value = obj.GetType().GetProperty(name).GetValue(obj, null); 
```

或者，使用[FastMember 之](http://nuget.org/packages/FastMember)类的 API （顺便说一下，它比原始反射快得多 - 它使用了很多巫术）：

```
var wrapper = ObjectAccessor.Create(obj);
object value = wrapper[name]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:04:17.663

如果你开发 model.employee 类并像这样使用它，你应该考虑使用[字典](http://msdn.microsoft.com/ru-ru/library/xfhwa508.aspx)来归档。

```
 class employee
    {
        public Dictionary<string, object> properties = new Dictionary<string,object>();

        public employee()
        {
            properties.Add("time", DateTime.Now);
            properties.Add("name", "Bill Gates");
        }
    } 
```

然后像这样使用它：

```
 Employee employee = new Employee();
        employee.properties["time"]; 
```

这段代码将更快更容易阅读。

# ruby-on-rails - Rails ActiveRecord::Base before_save 覆盖 write_ 访问器以保存电话号码

> ID：12744629
> 
> 赞同：2
> 
> 时间：2012-10-05T10:49:02.337
> 
> 标签：ruby-on-rails, ruby

我有一个带有电话号码 text_field 标记的表单，我想将信息作为纯整数保存到数据库中。我虽然会涉及到一个 before_save，它基本上会删除所有的 ()，- 等。

我在另一篇文章中发现，类似这样的内容可能会覆盖来自“电话”字段的值。

```
def original_number=(value)
  value.gsub!(/\D/, '') if num.is_a?(String)
  write_attribute(:original_number, num.to_i)
end 
```

但是， =(value) 让我有点困惑。我将如何将其写为 before_save 参数？

即 before_save #######

定义#######

结尾

我将如何为 original_number=(value) 编写它？

这是我的模型到目前为止的样子

```
# == Schema Information
#
# Table name: phones
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  twilio_number   :integer
#  original_number :integer
#  user_id         :integer
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#

class Phone < ActiveRecord::Base

  attr_accessible :original_number, :user_id, :name, :twilio_number
  belongs_to :user

  validates :name, presence: true
  validates :twilio_number, presence: true
  validates :original_number, presence: true
  validates :user_id, presence: true

  default_scope order: 'phones.created_at DESC'

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:03:24.590

通过定义 def original_number=(value) 方法，您将覆盖默认访问器方法。所以你不需要在 before_save 上做任何事情。虽然代码应该看起来像

```
def original_number=(value)
  num = value.to_s.gsub(/[^0-9+]/, "")
  write_attribute(:original_number, num.to_i)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:56:24.640

试试这个

```
before_save :set_phone_number,
def set_phone_number
 self.original_number= original_number.gsub(/\D/, '') if original_number.is_a?(String)
 self.original_number =  self.original_number.to_i
end 
```

阅读有关 getter 和 setter 方法的更多信息[http://www.rubyist.net/~slagell/ruby/accessors.html](http://www.rubyist.net/~slagell/ruby/accessors.html) ，[尝试学习/理解 Ruby 的 setter 和 getter 方法](https://stackoverflow.com/questions/8737421/trying-to-learn-understand-ruby-setter-and-getter-methods)

# java - 使用 Java Swing 进行线程化

> ID：12744631
> 
> 赞同：2
> 
> 时间：2012-10-05T10:49:03.863
> 
> 标签：java, multithreading, swing, swingworker

我有一个配置串行端口连接的摇摆工作人员。这个过程需要一个无法确定的时间来完成，有时需要 1 分钟，有时更多。

当用户在工作线程仍在配置时单击需要配置数据的按钮时，就会出现我的问题。

我想知道只有在工作线程完成后如何执行用户的请求。否则，如果工作线程仍然存在，我希望执行等到工作线程完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:01:46.173

*   添加`PropertyChangeListener`到`SwingWorker`，然后您可以[从`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/bound.html)

*   [必须`get()`在`SwingWorker`'s 方法`done()`](https://stackoverflow.com/questions/7053865/cant-get-arrayindexoutofboundsexception-from-future-and-swingworker-if-threa)中实现，否则无法从调用的方法中获取异常

*   取决于代码，但我怀疑是否可以更改设置，直到当前线程结束，最好是`SwingWorker#cancel()`然后重新启动此实例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:00:54.700

`ActionEvent`如果`task.isDone()`-*任务*在哪里 -你可以检查你的按钮，`SwingWorker`并且只有在它是真的时才继续。但是您可能想显示一个弹出窗口或其他东西，否则用户可能会感到困惑，为什么什么都没有发生。

另一个简单的解决方案是在任务运行时公开按钮并禁用它，并在完成时再次启用它。然后用户在它准备好之前不能点击按钮。

# batch-file - A12345678.textornumbers.textornumbers.txt 到 A12345678.txt

> ID：12744632
> 
> 赞同：4
> 
> 时间：2012-10-05T10:49:08.597
> 
> 标签：batch-file

我尝试创建一个批处理文件来自动重命名文件夹中包含的文件，从这个结构：A12345678.textornumbers.textornumbers.txt 到更简单的一个：A12345678.txt

我试过这样的事情：

```
@echo off
ECHO Renaming files
Pause
:begin
ECHO Renaming txt files
for /r %%x in (A*.*.*.txt) do (REN "%%x" A*.txt)
ECHO Renaming finished
:end
pause
done 
```

它不返回任何错误，但它什么也不做......

**编辑：**

好的，可以通过其他方式看到问题：我想重命名剩余的前 9 个字符和扩展名的文件。

我在这里看到了一个类似的问题： [Deleting characters from filename](https://stackoverflow.com/questions/10969981/batch-file-to-detect-only-part-of-a-filename)

我修改并调整到我的情况有这个：

```
@echo off
ECHO Renaming files
Pause
:begin
REM setlocal enabledelayedexpansion (the result is the same with and without this line)
set X=9
ECHO Renaming files
for /r %%f in (*.txt) do if %%f neq %~nx0 (
    set "filename=%%~nf"
    set "filename=!filename:~%X%,-%X%!"
    ren "%%f" "!filename!%%~xf")
ECHO Done
ECHO Processing finished
:end
pause
done 
```

但结果是这样的：

> 块引用！文件名！.txt

这是目录中的第一个图像，其他图像有错误（此类文件已存在）。

**编辑2：**

感谢我在互联网上找到的回复和其他信息，这是我的解决方案：删除文件名的最后一个字符，因为我想保留前 9 个字符：

```
@echo off
ECHO renaming files
ECHO.
Pause
:begin

set ext=QUB
set num=17
FOR /f "tokens=*" %%f in ('dir /b /a *.%ext%') do call :lab %%f
ECHO Done
pause
Exit

:lab
set original=
set original=%*
set newname=
call set newname=%%original:.%ext%=%%
call set newname=%%newname:~0,-%num%%%.%ext%
if "%newname%"==".%ext%" (goto :eof)
ren "%original%" "%newname%"
ECHO %newname%
goto :eof 
```

这不是我的代码，而是我从其他人那里使用的解决方案（[由 Carlitos.dll 提供](http://foro.elhacker.net/scripting/iquestbat_que_borre_4_ultimos_caracteres_de_los_nombres_de_varios_archivos-t219645.15.html)）。我希望它可以帮助其他有类似问题的人。感谢您的想法和帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:48:23.340

该脚本确实做了一些事情，但没有任何用处 - 它将每个文件重命名为其原始名称:-(

这一切都与 REN 如何使用通配符的规则有关。我从来没有在任何*地方*看到任何关于 REN 工作原理的正确解释。所以几周前我做了广泛的实验并制定了一套规则来解释我观察到的所有行为。

您可以在 Windows RENAME 命令如何解释通配符中找到我的结果[？](https://superuser.com/questions/475874/how-does-the-windows-rename-command-interpret-wildcards)在 StackExchange 超级用户网站上。

您的问题很容易通过在您的目标名称中替换`*`为许多来解决。`?`只需确保数量`?`大于或等于您将处理的最大前导名称长度。`A`如果不更改值，也不需要指定前导。

```
for /r %%x in (A*.*.*.txt) do ren "%%x" ?????????????????????.txt 
```

以上必须迭代每个文件。尽管我没有测试过，但仅迭代文件夹可能会更快一些

```
for /r /d %%x in (.) do ren "%%x\A*.*.*.txt" ?????????????????????.txt 
```

也可以使用 FOR /F 解析名称，这样您就不必担心`?`.

```
for /r %%x in (a*.*.*.txt) do (
  for /f "delims=." %%n in ("%%~nx") do ren "%%x" "%%n.txt"
) 
```

**根据修改后的问题进行编辑**

要简单地保留最多 1st 9 个字符和`.txt`扩展名，解决方案更加简单，只需使用 9 `?`：

```
for /r /d %%x in (.) do ren "%%x\*.txt" ?????????.txt 
```

如果要重命名所有文件，而不仅仅是`.txt`文件，那么

```
for /r %%F in (*) do ren "%%F" "?????????%%~xF" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:57:35.033

你也可以这样做：

```
for %%x in (*.textornumbers.txt) do (
  set nam=%%x
  if "!nam!" neq "!nam:.textornumbers=!" ren %%x !nam:.textornumbers=!
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T15:01:55.550

使用`~`-modifiers，您可以执行以下操作：

1.  仅取原始完整路径和名称（和扩展名）中的名称：

    ```
    FOR /R %%A IN (A*.*.*.txt) DO (
      **... %%~nA ...**
    )
    ```

    这将把 a`D:\path\A*.*.*.txt`变成一个`A*.*.*`.

2.  仅取 #1 结果中的名称：

    ```
    FOR /R %%A IN (A*.*.*.txt) DO (
      FOR %%B IN ("%%~nA") DO (
        **... %%~nB ...**
      )
    )
    ```

    那会给你留下`A*.*`.

3.  仅取 #2 中的名称：

    ```
    FOR /R %%A IN (A*.*.*.txt) DO (
      FOR %%B IN ("%%~nA") DO (
        FOR %%C IN ("%%~nB") DO (
          **... %%~nC ...**
        )
      )
    )
    ```

    这会给你`A*`。

4.  从原始名称中提取扩展名并将其与#3 连接。这将是最终名称 ，`A*.txt`您现在可以将其提供给`RENAME`命令：

    ```
    FOR /R %%A IN (A*.*.*.txt) DO (
      FOR %%B IN ("%%~nA") DO (
        FOR %%C IN ("%%~nB") DO (
          **RENAME "%%A" "%%~nC%%~xA"**
        )
      )
    )
    ```

# php - 从mysql数据库在php中设置多个复选框

> ID：12744637
> 
> 赞同：0
> 
> 时间：2012-10-05T10:49:21.290
> 
> 标签：php, mysql, checkbox

我正在从 mysql 填充一个表单。代码是。.

```
task.php

<div data-role="content">
               <h2> Please select cars </h2>
<form method="post" action="cars.php">
            <?php 
            $carq = "select * from cars";
            $executecars = mysql_query($carq);
            while($row=mysql_fetch_assoc($executecars)){
                $cname = $row['name'];  
                ?>

               <label for="<?php echo $cname; ?>"><?php echo $cname; ?></label>
               <input type="checkbox" name="car" id="<?php echo $cname; ?>" value="<?php echo $cname; ?>"/>

            <?php }     

            ?>
           <input type="submit" name="submitcars" id="submitcars" value="View Details"/>
           </form>
         </div> 
```

现在在cars.php中我想查询以显示所选汽车的详细信息，

```
<div data-role="content">
        <?php 
            if(isset($_POST['submitcars'])){

                echo $_POST[$cname];?????????????

                }
        ?>

        </div> 
```

现在如何在 cars.php 中处理表格？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:53:27.980

制作汽车属性数组::

```
<input type="checkbox" name="car[]" id="<?php echo $cname; ?>" value="<?php echo $cname; ?>"/> 
```

并让他们在下一页

```
if(isset($_POST['submitcars'])){
   foreach($_POST['car'] as $car){
       // do something with $car
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:55:01.847

尝试这个

```
<form method="post" action="cars.php">
<?php 
            $carq = "select * from cars";
            $executecars = mysql_query($carq);
            while($row=mysql_fetch_assoc($executecars)){
                $cname = $row['name'];  
                ?>

               <label for="<?php echo $cname; ?>"><?php echo $cname; ?></label>
               <input type="checkbox" name="car[]" id="<?php echo $cname; ?>" value="<?php echo $cname; ?>"/>

            <?php }     

            ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:56:23.163

首先，让我先说你不应该使用 mysql 函数。它们已贬值，不再推荐。

在 task.php 上，您的开始表单标签被打印在您的循环中。其次，您可能应该使用 [] 使用一组复选框。

```
 <div data-role="content">
        <h2> Please select cars </h2>
        <form method="post" action="cars.php">
        <?php 
        $carq = "select * from cars";
        $executecars = mysql_query($carq);
        while($row=mysql_fetch_assoc($executecars)){
            $cname = $row['name'];  
            ?>

           <label for="<?php echo $cname; ?>"><?php echo $cname; ?></label>
           <input type="checkbox" name="cars[]" id="<?php echo $cname; ?>" value="<?php echo $cname; ?>"/>

        <?php }  ?>
       <input type="submit" name="submitcars" id="submitcars" value="View Details"/>
       </form>
    </div> 
```

然后，在 cars.php 上：

```
<div data-role="content">
    <?php 
        if(isset($_POST['submitcars'])){

            if(isset($_POST['cars'] && count($_POST['cars']) > 0){

                 foreach($_POST['cars'] as $key => $car){

                     echo $car . '<br /'>;

                 }                    

            }
            else{
                echo 'No cars found!';
            }
        }
    ?>
</div> 
```

# websocket - 通过WebSocket唤醒局域网魔术包？

> ID：12744638
> 
> 赞同：0
> 
> 时间：2012-10-05T10:49:27.190
> 
> 标签：websocket, wake-on-lan

有谁知道是否可以使用 WebSocket API 发送魔术包？

编辑：

因为我的问题不清楚。我想知道我将 API 与 Javascript 一起使用，我可以发送所需的 UDP 数据报发送一个局域网唤醒数据包。

我知道可以使用启用套接字的 php，但是使用 JS ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:16:23.913

如果你的意思是：

“我可以在浏览器中使用 JavaScript 发送一个 WebSocket 消息，使特定的给定字节序列出现在网络上吗？”

那么答案是否定的。原因：WebSocket 协议要求屏蔽所有客户端到服务器协议的有效负载。并且掩码是在 WebSocket 浏览器实现中随机生成的，因此您没有机会（根据设计）选择掩码或有效负载以使所需的字节序列出现在线上。

# java - Python 的 re.sub() -> Java

> ID：12744642
> 
> 赞同：1
> 
> 时间：2012-10-05T10:49:36.073
> 
> 标签：java, python

Java相当于什么：

```
def filt_out(s):
        return re.sub('<a href="(.*)">', '', s.replace('<br/>', '\n').replace('&quot;', '\"').replace('</a>', '')) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T10:58:34.460

```
public static String filtOut(String s) {
    return s.replaceAll("<a href=\"(.*)\">", "").replaceAll("<br/>", "\n").replaceAll("&quot;", "\"").replaceAll("</a>", "");
} 
```

但是，不推荐这种代码风格以及一般的方法。通常，您应该使用特殊的 HTML 解析器来处理 HTML。正则表达式对于该任务来说太有限了。

您可以在 html 解析器上查看以下问题：

*   [用于 Java 的 HTML/XML 解析器](https://stackoverflow.com/questions/2129375/html-xml-parser-for-java)
*   [哪个 HTML 解析器最好？](https://stackoverflow.com/questions/2168610/which-html-parser-is-best)
*   [Java HTML 解析](https://stackoverflow.com/questions/238036/java-html-parsing)

# java - 如何添加内部 css ( ) to a Wicket page

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-10-05T10:49:35.6731966 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I need to include my css file as an *internal css* using `<style>`. How can I do that with Wicket?

I know about `renderHead()` and `<wicket:link>` as described [here](https://stackoverflow.com/questions/7776078/including-css-and-js-files-in-wicket-apps). But that creates external links. This is for sending mail, so I need it contained in the generated html.

[java](/tags/java "show questions tagged 'java'")[wicket](/tags/wicket "show questions tagged 'wicket'")4

## 4 回答 4

This answer is useful1

Without trying this...

Wouldn't a Panel implementing [IHeaderContributor](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/markup/html/IHeaderContributor.html) with an renderHead method similar to thisone do the trick?

```
void renderHead(IHeaderResponse response) {
 StringBuffer myCSS = new StringBuffer();
 File file = new File("global CSS");
 BufferedReader reader = new BufferedReader(new FileReader(file));
 String s = null;
 while ((s = reader.readLine()) != null) {
 myCSS.append(s).append(System.getProperty("line.separator"));
 }
 reader.close();

 response.renderCSS(myCSS, "notreallyneeded");
} 
```

ommiting every error handling and proper resource closing along the way...

Note that "notreallyneeded" is not really needed in an non-Ajax environment like email. According to JavaDoc this can be `null` as well.

于 2012-10-05T12:25:04.877 回答This answer is useful1

Here is how I eventually implemented it. Thanks to Nicktar for pointing in the right direction.

```
@Override
public void renderHead(IHeaderResponse response) {

 try {
 InputStream in = new CssPackageResource(BusinessMail.class, 
 "style.css", getLocale(), "?", "?")
 .getCacheableResourceStream().getInputStream();

 String data = new java.util.Scanner(in).useDelimiter("\\A").next();
 response.renderCSS(data, "notneeded");

 } catch (ResourceStreamNotFoundException e) {
 logger.error("Could not load css", e);
 } 
} 
```

于 2012-10-08T11:48:45.347 回答This answer is useful0

If I understand "internal", use in wicket html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:wicket="http://wicket.apache.org/" xml:lang="en" lang="en">
<wicket:head>

 <style type="text/css">
<!--
.aCaption {
/* display: block; */
/* background-color: green;*/

}
-->

</style>

</wicket:head>

 // rest of classic wicket page ... 
 <body> .... etc 
```

于 2015-09-12T09:52:43.453 回答This answer is useful0

Just in case anybody comes across this and wonders how to do it with a recent Wicket + Java version (in my case, JDK16 and Wicket 8.x):

```
 final PackageResourceReference prr = new PackageResourceReference( ThisPage.class, "css/my.css" )
 try ( InputStream in = prr.getResource().getResourceStream().getInputStream() )
 {
 final String css = new String( in.readAllBytes(), StandardCharsets.UTF_8 );
 response.render( new CssContentHeaderItem( css, "my.css", null ) );
 }
 catch( IOException | ResourceStreamNotFoundException e )
 {
 throw new RuntimeException( e );
 } 
```

于 2022-01-14T08:38:08.480 回答

#### Related

[1](/questions/10295123 "Question score (upvotes - downvotes)")[c# - 如何在运行时从 .NET 应用程序更改 DTS 包中的连接字符串？](/questions/10295123)[2](/questions/10295127 "Question score (upvotes - downvotes)")[intellij-idea - Intellij IDEA。将某个文件夹中的文件添加到项目中](/questions/10295127)[1](/questions/10295128 "Question score (upvotes - downvotes)")[java - 如何在 oracle weblogic 中修复 WebService 和 package-info.java](/questions/10295128)[1](/questions/10295129 "Question score (upvotes - downvotes)")[windows - 无法链接 stl 库](/questions/10295129)[2](/questions/10295135 "Question score (upvotes - downvotes)")[java - 使用 REGEX 进行字符串验证](/questions/10295135)[3](/questions/10295136 "Question score (upvotes - downvotes)")[c# - WPF/C# - 窗口打开时关闭](/questions/10295136)[2](/questions/10295141 "Question score (upvotes - downvotes)")[iphone - 从图像中绘制纹理作为游戏背景](/questions/10295141)[2](/questions/10295142 "Question score (upvotes - downvotes)")[java - 将字符串从字符串数组添加到 ArrayList](/questions/10295142)[2](/questions/10295143 "Question score (upvotes - downvotes)")[php - 计算值未保存在数据库中](/questions/10295143)[4](/questions/10295147 "Question score (upvotes - downvotes)")[iphone - 防止触摸传播到下面的注释](/questions/10295147)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：12744643
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# c# - 使用 C# 进行 Active Directory 身份验证

> ID：12744644
> 
> 赞同：2
> 
> 时间：2012-10-05T10:49:37.750
> 
> 标签：c#, active-directory, ldap

我在针对 AD 对我的用户进行身份验证时遇到严重问题。我可以使用 PrincipalContext 方式或 DirectoryEntry 方式来检查登录是否成功。但这对我的情况来说还不够。我需要知道身份验证失败的原因（例如：密码过期、帐户锁定、错误密码计数限制）。有没有在不使用本机 win32 dll 的情况下实现这一点。顺便说一句，这可能并不总是一个网络项目。我的最佳解决方案可能是通用的。谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:56:47.150

您应该在异常中获得错误的原因。

如果使用 PrincipalContext 成员身份验证**失败，您将获得信息，例如：**

*   AccountExpirationDate（帐户是否过期）
*   AccountLockoutTime（账户是否被锁定）
*   已启用（帐户是否已启用）
*   IsAccountLockedOut（帐户是否被锁定）
*   PermittedLogonTimes（现在是否允许用户登录）
*   PermittedWorkstations（是否允许用户从该客户端登录）

# python - 3 使用 Django Admin 的分层订购应用程序

> ID：12744646
> 
> 赞同：0
> 
> 时间：2012-10-05T10:49:45.330
> 
> 标签：python, django, postgresql

> **可能重复：**
> [Django 管理员中的嵌套内联？](https://stackoverflow.com/questions/3681258/nested-inlines-in-the-django-admin)

我正在为一家餐饮公司开发一个应用程序，使用 Python、Django 和 PostgreSQL。我尝试使用 Django Admin 模块作为添加订单的一种方式。我希望能够在一页上做所有事情。我开始相信这可能是不可能的。
不用担心，只有办公人员会使用这部分软件，而不是普通大众。

我们的定价结构取决于每人的物品数量，乘以所服务的人数。

这是一个例子：

* * *

**“假公司”订单：**

*   2 件早茶，每件 8.00 美元 x 10 件：#这就是我们所说的交易，商品没有价格。
    *   无麸质饼干 x1
    *   香肠卷 x10
    *   饼干 x9

*   10.00 美元 x 10 人份的 3 件午餐：
    *   香肠卷 x5
    *   寿司 x5
    *   三明治 x10
    *   甜拼盘 x10

* * *

**总计：180 美元**

* * *

每个订单在数据库中的结构方式如下：
-COMPANY
  -SALE（与 COMPANY 的一对一关系）
    -DEAL_INSTANCE（与 SALE 和 DEAL 的一对一关系）
      -ITEM（多对一）通过连接表与 DEAL_INSTANCE 的许多关系，作为项目数量
                  字段是必需的）

除了将项目添加到 DEAL_INSTANCE 之外，我已经设法在一页上获取所有内容。由于 Django Admin 不太喜欢使用“through”属性定义的多对多关系。

这是我已经拥有的屏幕截图的链接，只是为了澄清一些事情（只需复制图像位置以查看完整尺寸）：![到目前为止我所拥有的。](../Images/3db2963c16a742fce1df2f2e4b961570.png)

所以最后，我问是否可以使用 Django Admin 将整个过程放在一个页面上？如果没有，使用 Django 的最佳方法是什么，我应该更改数据库的布局吗？

在此先感谢您，我知道这有点奇怪。我是 Django 新手，但精通 Python；所以当谈到 Django 时，你可能需要握住我的手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:19:15.567

不，嵌套内联在管理员中不可用。

[#9025 管理中的嵌套内联支持](https://code.djangoproject.com/ticket/9025)

管理界面并非真正设计为通用界面以外的任何东西，并且不应该用于访问除了最受信任的用户之外的任何人。

在非管理员 django 视图中进行嵌套内联并不难：谷歌搜索“django 嵌套内联”揭示了一些解决方案。

# c++ - 用 Qt 写一个简单的帮助菜单

> ID：12744649
> 
> 赞同：3
> 
> 时间：2012-10-05T10:49:48.867
> 
> 标签：c++, qt, menu, helper

有关如何使用 Qt 创建简单帮助菜单的任何建议？在示例中我真的找不到任何有趣的东西。

我的想法是像一个看起来像带有搜索引擎的网络浏览器的整个窗口一样花哨，我只想写几段，但也许从顶部每个段落的链接开始，真的像一个基本的网络常见问题解答.

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:57:54.497

如果你想自己实现它，有很多方法。

这可能有点矫枉过正，但您可以将您的帮助设置为多个相互链接的本地 HTML 页面，并用于`QWebView`向用户显示它们。

更简单的方法是使用带有搜索的列表或文章：

*   `QListWidget`保存文章的名称。当用户单击一个时，您将打开它。
*   `QLineEdit`附带一个`QCompleter`搜索此列表的附件（按文章名称，没什么太复杂的）。
*   `QTextBrowser`显示文章。请记住，它`QTextBrowser`可以呈现 HTML，因此您可以使文章看起来很花哨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:15:44.453

您可以使用[Qt 帮助框架](http://doc.qt.digia.com/qt-maemo/qthelp-framework.html)。如果您不是在搜索复杂的帮助系统，您可以使用带有 HTML 的[QTextEdit](http://doc.qt.digia.com/4.7-snapshot/qtextedit.html)，或者您可以在程序菜单中提供指向在线文档的链接。

# c# - 用于移动对象的 C# 计时器

> ID：12744653
> 
> 赞同：0
> 
> 时间：2012-10-05T10:50:06.360
> 
> 标签：c#, animation, timer, ticker

我有 4 只狗正在比赛，我需要将它们移过表格，但它们不会逐渐移动，它们从起跑线开始并立即传送到终点线，而不会在中间移动。随着每个计时器滴答声，它们的 location.X 都会增加。

我需要一个计时器还是四个？我目前有一个，它的间隔设置为 400。

这是相关代码：

```
private void btnRace_Click(object sender, EventArgs e)
{   
    btnBet.Enabled = false;
    timer1.Stop();
    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{   while (!isWon)
    {
        for (i = 0; i < Dogs.Length; i++) // there are four dogs
        {                    
            if (Dogs[i].Run()) // Run() returns true if full racetrack is covered by this dog
            {
                Winner = i + 1;
                isWon = true;

                MessageBox.Show("We have a winner! Dog #" + Winner);

                break;
            }
        }
} 
```

在 Dog 类中：

```
public bool Run()
{               
    Distance = 10 + Randomizer.Next(1, 4);
    p = this.myPictureBox.Location;
    p.X += Distance ;            
    this.myPictureBox.Location = p;

    //return true if I won the game
    if (p.X >= raceTrackLength)
    {
        return true ;
    }
    else
    {
        return false ;
    }
} 
```

这些狗似乎只移动了一步，然后立即出现在终点线上。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:53:31.627

从 timer1_Tick 方法中删除 While 循环。此方法每 400 毫秒运行一次，但在您的情况下，在第一次启动时它会等到一只狗获胜。

此外，您应该在其中一只狗获胜后停止计时器。

```
private void timer1_Tick(object sender, EventArgs e)
{   
    for (i = 0; i < Dogs.Length; i++) // there are four dogs
    {                    
        if (Dogs[i].Run()) // Run() returns true if full racetrack is covered by this dog
        {
            Winner = i + 1;
            isWon = true;
            timer1.Stop();
            MessageBox.Show("We have a winner! Dog #" + Winner);
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:58:10.520

您的计时器仅关闭一次并卡在此循环中；

```
 while (!isWon)
  {
  } 
```

删除循环并让计时器完成它的工作

在最后添加

```
 if (isWon) timer1.Stop(); 
```

# php - 使用字符串作为表达式发送到 eval() 并用可变值 PHP 替换子字符串

> ID：12744654
> 
> 赞同：0
> 
> 时间：2012-10-05T10:50:05.737
> 
> 标签：php, expression, eval, quotes, str-replace

我需要一些有关 PHP 基本语法的帮助，

我得到以下字符串：
`$str = "return (strlen(replace) <= 5 && strlen(replace) >= 1);";`

我有一个变量：`$var = "VariableValue";`

和 st_replace 函数为：`str_replace('replace', $var, $str);`

我正在尝试做的实际上是在类似的情况下使用 eval：

```
if(eval($str)){//This should now make the if condition **look like**               
               //if(strlen(*'VariableValue'*)...) 
               //

echo 'Success';

}else{

     echo 'Ask the guys at StackOverFlow :),sure after searching for it';
} 
```

因此，如果您注意到 if(strlen( *'VariableValue'* )...) 这就是我想要做的，请在 eval 之后制作包含带引号的 vars 值的最终 if 语句，以便 strlen 实际处理它，

我希望我根据需要说清楚:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:59:28.607

a为此，您不需要 eval() （有时将其称为 evil()... 是有原因的）。

试试这样的条件：

```
if ( (strlen($var) <= 5) && (strlen($var) >= 1) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:00:46.520

像这样试试

```
$str = "return (strlen(##replace##) <= 5 && strlen(##replace##) >= 1);";
$var = 'test';

// you have to assign the str_replace to $str again. And use " around the $var.
$str = str_replace('##replace##', '"' . addslashes($var) . '"', $str);

if (eval($str)) {             
    echo 'Success';
}
else {
    echo 'Ask the guys at StackOverFlow :),sure after searching for it';
} 
```

我在替换周围添加了##，因为总是有一个有点独特的字符串来替换是个好主意......就像当你扩展你的eval'd代码以包含`str_replace`时，否则它也会被替换。

**编辑**根据@Erbureth 的评论
转义了 $var 。`addslashes`

# mysql - 在 Excel 中连接到 Mysql 数据库

> ID：12744659
> 
> 赞同：0
> 
> 时间：2012-10-05T10:50:22.257
> 
> 标签：mysql, excel, vba

所以，我必须在实习期间编写一段代码，将一些 Excel 工作表与 MySQL DB 链接并保持更新，到目前为止我有这个，但它一直给我错误。你看到有什么错误吗？谢谢阅读。

我得到的错误是：运行时错误-2147217900 自动化错误。

PS：我对VBA很陌生

```
Dim server_name As String
Dim database_name As String
Dim user As String
Dim Password As String
Dim rs As adodb.Recordset
Dim naam As String
Dim oConn As adodb.Connection

Public Sub getSerieNummer()

Dim result As String
Dim b As Long
Dim strSQL As String

naam = Range("C1").Value

server_name = "servername"
database_name = "dbname"
user_id = "idname"
Password = "password"

Set oConn = New adodb.Connection
oConn.Open "SERVER=" & server_name _
& ";PORT=3306" _
& ";DATABASE=" & database_name _
& ";UID=" & user_id _
& ";PWD=" & Password & _
";DSN=name_in_odbc;"

strSQL = "SELECT [serial_number] FROM view_aix WHERE [name] ='" & naam & "';"
Set rs = oConn.Execute(strSQL)

b = 0
With rs
    Do Until .EOF
    b = b + 1
    result = !serial_number
    rs.MoveNext
    Loop
End With
    oConn.Close
    rs.Close
Set rs.ActiveConnection = Nothing
Set oConn = Nothing
Range("C2").Value = result

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:16:17.463

MySQL 不支持“[”，而是使用“`”。

也许是您的连接字符串的问题。

ODBC 连接方式

```
Driver={mySQL};Server=localhost;Option=16834;Database=myDataBase; 
```

OLEDB 连接方式

```
Provider=MySQLProv;Data Source=mydb;User Id=myUsername;Password=myPassword; 
```

# ruby-on-rails - Mongoid 2.2 中的作用域链与 Rails 3.0.9 和 Ruby 1.8.7

> ID：12744668
> 
> 赞同：1
> 
> 时间：2012-10-05T10:50:45.503
> 
> 标签：ruby-on-rails, ruby, mongoid, scoping

嗨，我有运行在 Ruby 1.8.7 上的应用程序（*我目前无法将其更新到 1.9.2*）和运行 mongoid 2.2.2 的 Rails 3.0.9。

我有几个命名范围，我定义如下

```
 scope :for_pickups, where(:state => "accepted")
scope :confirmed_shipments, where(:state => "confirmed", :created_at.lt => Date.today - 1.day).desc(:created_at).limit(10)
scope :undelivered_shipments, Proc.new{ |start_date_utc, end_date_utc|
                                  start_date_utc = (Date.today - 7.days).to_time.utc if !start_date_utc.present?
                                  end_date_utc = Date.today.to_time.utc if !end_date_utc.present?
                                  any_of({:created_at.gte => start_date_utc, :created_at.lte => end_date_utc}, 
                                         {:pickup_date.gte => start_date_utc, :pickup_date.lte => end_date_utc}, 
                                         {:desired_arrival_date.gte => start_date_utc, :desired_arrival_date.lte => end_date_utc}).
                                  where(:state.in => ["accepted"], :state.nin => ["delivered"]).without(:carrier_digest, :carrier_label_image_base64, :carrier_label_html_base64)
                                }

scope :search, Proc.new{|search_params| 
                    regexp = Regexp.new(/.*#{search_params.strip}.*/i, true)
                    where(:golfer_name => regexp)
                  } 

```

当我自己使用它们时，这似乎运作良好并返回预期值，但是当我使用范围链接时，它会变得混乱。

例如，当我运行时，`Model.undelivered_shipments.search("sid")`我得到一个数组，其中 :ids 作为第一个参数

```
 [:ids, #[{:created_at=>{"$gte"=>Thu Sep 27 18:30:00 UTC 2012, "$lte"=>Thu Oct 04 18:30:00 UTC 2012}}, {:pickup_date=>{"$gte"=>Thu Sep 27 18:30:00 UTC 2012, "$lte"=>Thu Oct 04 18:30:00 UTC 2012}}, {:desired_arrival_date=>{"$gte"=>Thu Sep 27 18:30:00 UTC 2012, "$lte"=>Thu Oct 04 18:30:00 UTC 2012}}], :_id=>"sid", :state=>{"$nin"=>["delivered"], "$in"=>["accepted"]}},
  options:  {:fields=>{:carrier_digest=>0, :carrier_label_html_base64=>0, :carrier_label_image_base64=>0}},
  class:    Shipment,
  embedded: false>
] 

```

不知道为什么它会返回这个以及为什么定义 mongoid 标准`:_id => 'sid'`但是当我`search`在方法之前运行它时`undelivered_shipments`，它会正确生成标准。

如果使用其他范围（如`for_pickups.search`etc）运行它，它可以工作，但不适用于未交付的货物。我知道我遗漏了一些东西，但我浏览了文档，但找不到任何真正有帮助的东西。我真的很感激这方面的任何帮助

提前致谢。

# php - FFmpeg 命令不起作用

> ID：12744670
> 
> 赞同：0
> 
> 时间：2012-10-05T10:50:52.337
> 
> 标签：php, ffmpeg

我正在尝试使用[此处](https://stackoverflow.com/questions/8679390/ffmpeg-extracting-20-images-from-a-video-of-variable-length "这里")所选答案中给出的命令，但在执行时它不起作用。我知道其他一切正常，因为我可以使用不同的命令创建缩略图。格式化它的正确方法是什么？我假设问题出在`" -vsync 0 -vf select='not(mod(n,100))' "`但无法使其正常工作。

```
$cmd = $ffmpeg . " -i " . $src . " -vsync 0 -vf select='not(mod(n,100))' " .  $out . ".jpg";
exec($cmd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:11:55.417

您在此行有错误：

```
$cmd = $ffmpeg . " -i " . $src . " -vsync 0 -vf select='not(mod(n,100))' " .  $out . ".jpg"; 
```

将其更改为：

```
$cmd = "ffmpeg -i " . $src . " -vsync 0 -vf \"select='not(mod(n,100))'\" " .  $out . ".jpg"; 
```

或尝试：

```
$cmd = "ffmpeg -i " . $src . " -vsync 0 -vf select='not(mod(n,100))' " .  $out . ".jpg"; 
```

另外，当您调用 exec 函数时，请像这样调用它：

```
exec($cmd,$out);
print_r($out); 
```

Print_r 将打印您在 exec() 中执行的输出...

# javascript - 如何在 extjs4 javascript 中使用两个渲染器？

> ID：12744672
> 
> 赞同：0
> 
> 时间：2012-10-05T10:50:53.173
> 
> 标签：javascript, extjs, extjs4

我有一个数字字段，它应该是货币是'$'并且它有'0.000,00'结构。对于货币和数字结构'0.000,00'，我必须对它们都使用渲染器。但是，两个渲染器不能以正确的方式工作。最后一个渲染器写的作品。我怎么解决这个问题？

```
 {
     header: dil('Fiyat'),
     width: 30,
     sortable: true,
     currencySymbol: '$',
     renderer: Ext.util.Format.usMoney,
     renderer: Ext.util.Format.numberRenderer('0.000,00/i'),
     dataIndex: 'fiyat'
} 
```

解决方案：

```
 renderer: Ext.util.Format.numberRenderer('$0.000,00/i'). it works both currency and format . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:40:14.323

使用渲染器功能：

```
{
    header: dil('Fiyat'),
    width: 30,
    sortable: true,
    renderer: function(value, metaData, record, rowIndex, colIndex, store) {
        return value; //You can render your value here however you like.
    },
    dataIndex: 'fiyat'
} 
```

# iphone - iPhone 中的实时流媒体视频

> ID：12744677
> 
> 赞同：4
> 
> 时间：2012-10-05T10:51:14.967
> 
> 标签：iphone, objective-c, ios

我是`iPhone`开发新手。我需要捕捉视频。当我捕捉视频时，它也会显示在服务器上。像直播一样的东西。

有人知道我应该从哪里开始使用此功能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:09:20.610

您的问题似乎与此类似

[Xcode ios：录制时流式传输视频文件并删除多余的个人陈述](https://stackoverflow.com/questions/9390647/xcode-ios-streaming-of-video-file-while-recording)

**上半年解决方案**

使用 AVFoundation，您可以在录制时获取视频缓冲区/帧。

**下半场**

但是对于上传我没有找到任何解决方案

iOS API 中有 Input Stream 选项，但它需要一些文件路径。但由于没有录制视频，我们没有任何路径。

**编辑 1**

这是Apple 提供的 AVFoundation的[最佳示例，您可以从](http://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T05:46:07.540

我推荐你使用 wowza wowza.com/ [https://www.wowza.com](https://www.wowza.com)，它拥有所有的功能，从直播、视频点播等。

# batch-file - 找到/查找 .exe 文件 (javaw.exe) 然后使用 elevate.exe 并运行 jar

> ID：12744678
> 
> 赞同：2
> 
> 时间：2012-10-05T10:51:20.340
> 
> 标签：batch-file, cmd, find, executable-jar, javaw

我试图使标题尽可能具有描述性，但我基本上是在尝试定位`javaw.exe`，因为当我启动我的 JAR cmd 时，只会找到`java.exe`但提示窗口很难看，我不希望它在那里。

什么有效：

```
java -jar myJar.jar 
```

我正在尝试做的事情

```
javaw -jar myJar.jar 
```

什么也有效：

```
JAVAWPATH\javaw.exe -jar myJar.jar 
```

我试图让程序自动适应任何计算机，因为我不知道 javaw 是否总是在同一个位置。

所以我设法找到了一堆“javaw.exe”文件使用

```
WHERE /R c:\ *javaw.exe 
```

我想选择一个返回的路径并设置某种字符串变量，然后我可以使用它：`elevate MYstringPATHtoJAVAW -jar myJar.jar`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:53:12.273

我编写了一个批处理脚本，通过注册表定位 java 安装文件夹：

```
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
@ECHO OFF

:: Export java settings from registry to a temporary file
START /W REGEDIT /E %Temp%.\java.reg "HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft"

:: Find java location
FOR /F "tokens=1* delims==" %%A IN ('TYPE %Temp%.\java.reg ^| FIND "INSTALLDIR"') DO SET JAVA_HOME=%%B
SET JAVA_HOME=%JAVA_HOME:"=%
SET JAVA_HOME=%JAVA_HOME:\\=\%
SET JAVA_HOME

:: Get java version
FOR /F "tokens=1* delims==" %%A IN ('TYPE %Temp%.\java.reg ^| FIND "CurrentVersion"') DO SET JAVA_VERSION=%%B
SET JAVA_VERSION=%JAVA_VERSION:"=%
SET JAVA_VERSION
SET JAVA_VERSION=%JAVA_VERSION:.=%
SET JAVA_VERSION=%JAVA_VERSION:_=%
SET /A JAVA_VERSION=%JAVA_VERSION%

:: Delete temp file
@DEL %Temp%.\java.reg /S /Q > NUL 2>&1

:: Check java version compatibility
IF %JAVA_VERSION% LSS 16020 (
ECHO.
ECHO YOU NEED AT LEAST JAVA WITH VERSION 1.6.0_20 -- this is just an example echo.
GOTO :EOF
)

PAUSE
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: 
```

我已经以此为[基础](http://www.robvanderwoude.com/files/country3_nt.txt)。但是如果安装的 java 是 64 位的，它可能无法正常工作（是的，我必须更新这个脚本......），但它可以很容易地更新。希望这会对你有所帮助。

# html - 列表元素在 IE6 中不浮动

> ID：12744681
> 
> 赞同：0
> 
> 时间：2012-10-05T10:51:29.613
> 
> 标签：html, css, internet-explorer-6

我已经在网络上看到这个问题很多次了，但到目前为止一切都是基于`<li><a>Test</a></li>`等等。

我想要做的，只是：

```
<ul>
<li class="title">Test</li>
<li>Test2</li> ** These should float together on the same line **
<li class="title clear">Test</li> ** New Line **
<li>Test2</li>
</ul> 
```

这对我来说对我来说很好，除了 IE6，它把列表元素放在单独的行上。

可以在这里找到一个 jsFiddle：http: [//jsfiddle.net/pjWdg/](http://jsfiddle.net/pjWdg/)

请在 IE6 上查看以注意错误，其他所有浏览器都可以正常工作。

我试过了：

```
ul, ul li {
    list-style: none;
    padding:0px;
    margin:0px;
}

.clear {
   clear: both;
}

li.title {
   width: 200px;
}

ul > li {
    float: left;
} 
```

我也试过：

```
ul > li {
    display: inline;
} 
```

一切都没有成功。任何人都可以阐明我如何才能完成这项工作吗？谢谢！

** 更新 **

现在，在列表样式中删除 > 之后，我得到了：

[http://jsfiddle.net/pjWdg/1/](http://jsfiddle.net/pjWdg/1/)

您仍然可以看到这是错误的，Test2 出现在 Test3 旁边？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:55:04.813

IE6 不支持子选择器`>`

用于`ul li`定位你的 li。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:23:16.227

在您的样式表中尝试这些更改。

```
ul, ul li {
list-style: none;
padding:0px;
margin:0px;
}

.clear {
clear: both; 
}

li.title {
 width: 200px;
  float:left;

} 
```

# java - 从集合中获取数据的问题

> ID：12744687
> 
> 赞同：1
> 
> 时间：2012-10-05T10:51:52.117
> 
> 标签：java, arraylist

我正在尝试从列表中获取数据，但在获取数据时遇到了一些问题。

```
List<Field> errorFieldList;
Set<String> formValidationResult = new HashSet<String>(); 
```

这里添加到validationResults的数据是这样的，errorFieldList大小是两个有Id和type

```
validationResults.put(errorFieldList, formValidationResult);

public ValidationResponseErrorView(
            Map<Object, Set<String>> validationResults, String exceptionMessage) {
    if (validationResults.size() > 0) {
    for (Map.Entry<Object, Set<String>> entrySet : validationResults
                    .entrySet()) {
                Map<String, Object> fieldResultsMap = new HashMap<String, Object>();
                Object objField = entrySet.getKey();
              if (objField instanceof List) {
                    for (int i = 0; i < ((List<Map<String, Object>>) objField)
                            .size(); i++) {
                        LOGGER.info("in array list----" + objField);
                    }

        }
          }
      }
} 
```

我不确定如何从 objField 中获取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:32:46.023

您的代码真的很难阅读，并且包含很多不一致之处。特别是在您的构造函数中，您将validationResults 声明为

```
Map<Object, Set<String>> validationResults 
```

但是在您的介绍中，您将其声明为

```
List<Field> errorFieldList;
Set<String> formValidationResult = new HashSet<String>();
validationResults.put(errorFieldList, formValidationResult); 
```

这意味着你`Object`是一个`List<Field>`. 所以现在你可以简单地使用：

```
objField.get(i); 
```

要检索值，`i`您迭代的索引在哪里。但是：您的代码可能无法编译，因为您尝试`List<Field>`在`List<Map<String, Object>>`第二个`for`循环中强制转换。

简而言之：重新编写代码，A`Map`具有键的 getter 方法，并且`Set`需要迭代。首先检查您需要什么数据结构。不要筑巢太深。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:50:50.763

`List< Map< String, Object>> objField`会返回一个包含 type 元素的 List `Map<String, Object>`。要从此使用中获得价值：

```
 Map<String,Object> mapOut = ((List<Map<String, Object>>) objField).get(i);
    Set<String> keySet = mapOut.keySet();
    Iterator<String> itr = keySet.iterator();
    while(itr.hasNext()){
       Object outObject = mapOut.get(itr.next());
       LOGGER.info("Object"+ outObject);
    } 
```

# soap - 使用 JIRA SOAP API 获取 jira 问题的自定义字段值

> ID：12744688
> 
> 赞同：1
> 
> 时间：2012-10-05T10:51:53.153
> 
> 标签：soap, jira

我想使用 SOAP API 获取特定 JIRA 问题的所有自定义字段的值。我有一个名为**'Phase'**的自定义字段，其值为**Decision Pending**，用于 JIRA 问题**JIRA-123**。

我正在使用`JIRA 5.1.3`.

我可以使用 SOAP API 获取 JIRA 问题的所有属性，但上述问题的自定义字段的值除外。

我尝试了以下代码，但我无法在我的代码中使用**ComponentManager**

```
IssueManager issueManager = ComponentManager.getInstance().getIssueManager();
CustomFieldManager customFieldManager = ComponentManager.getInstance().getCustomFieldManager();
Issue issue = issueManager.getIssueObject("JIRA-123");
CustomField customField = customFieldManager.getCustomFieldObjectByName("Phase");
Object customFieldValue = issue.getCustomFieldValue(customField); 
```

如果有人能提供正确的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:41:31.817

SOAP API 已被 5.1.3 弃用。我建议您使用 REST API - 它更易于使用和实施。

**什么是 REST？：** [阅读此处](http://en.wikipedia.org/wiki/Representational_state_transfer)。基本思想是将 HTTP 请求类型绑定到操作，这很明显 - 检查[此表](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)以快速运行。

Jira 有一个强大的 REST API 供您使用。这是当前版本[的主要文档](http://docs.atlassian.com/jira/REST/latest/)。

**在一些高级步骤中你需要做什么？：**

1.  使用您的 JIRA 实例设置某种类型的身份验证。就这样吧：

    *   Baisc -[示例](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Basic+Authentication)
    *   OAuth -[示例](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+OAuth+authentication)
2.  通过 API 获取所有字段的列表：

    / `/rest/api/2/field' [method returns a list of all fields][6] - both System and Custom. Then when you identify the exact field use`rest/api/2/customFieldOption/{id}` 获取自定义字段选项[的完整
    表示](http://docs.atlassian.com/jira/REST/latest/#id123004)。

我建议您使用[Chrome REST Console](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?utm_source=chrome-ntp-icon)之类的工具或任何可以轻松发出请求的类似工具来了解 API。好处是，如果您通过同一浏览器登录，则无需设置身份验证。不过，您的用户将需要完全的管理员访问权限。

这是[所有 JIRA REST API](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs)文档的根源。一探究竟。

如果您在 PHP 中执行此操作，我个人建议您使用某种库。我已经使用 [Guzzle](http://guzzlephp.org/)（在 CakePHP 环境中）来完成这个确切的任务，结果非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:24:49.820

我不确定你如何使用soap API，这里是通过PHP-SOAP使用它的例子：

```
#!/usr/bin/php -q
<?php
   $soapClient = new SoapClient("https://jira.com/rpc/soap/jirasoapservice-v2?wsdl");
   $token = $soapClient->login('user', 'password');
   $myIssue = $soapClient->getIssue($token,"TES-13");
   print_r($myIssue); // all of the issue details
   print_r($myIssue->customFieldValues); // get all custom fields
   foreach ($myIssue->customFieldValues as $customFieldValue) {
        // search for the right custom field
        if ($customFieldValue->customfieldId == 'customfield_10402') {
                echo $customFieldValue->values[0];
                die();
        }
   }
?> 
```

如果您想使用任何其他 API，请查看[JIRA Remote API Reference](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)。

关于 REST 和 SOAP API 的评论 - 引用 Jira 网站的 SOAP API“支持但没有未来开发”。Rest API 仍然有点新，有些事情你还不能用 REST API ( [example](https://stackoverflow.com/questions/11631997/jira-rest-api-for-getting-full-user-list/11633197#11633197) ) 做，但可以使用 SOAP API 轻松完成。

# magento - Magento：如何管理 BackOrders 的部分发货？

> ID：12744697
> 
> 赞同：0
> 
> 时间：2012-10-05T10:52:17.420
> 
> 标签：magento

有什么方法可以管理分批装运？

场景： - 我有一个客户订购了一些物品（其中一些处于延期交货状态） - 我想给他发货我有库存的物品并标记它们 - 将订单置于部分发货状态

有什么办法吗？任何关于创建扩展的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:27:06.000

> 是的，您可以为一个订单创建两个或多个货件，并为每个货件指定一个跟踪号。从订单中，点击发货。从那里您可以添加跟踪号并指定将要发货的数量。

见@https [://web.archive.org/web/20121226192320/http://www.magentocommerce.com/boards/viewthread/194148](https://web.archive.org/web/20121226192320/http://www.magentocommerce.com/boards/viewthread/194148)

# algorithm - 有效计算正态分布乘积的积分

> ID：12744700
> 
> 赞同：0
> 
> 时间：2012-10-05T10:52:22.040
> 
> 标签：algorithm, statistics, gaussian

我有两个正常的 PDF，由 μ1、μ2、σ1 和 σ2 给出。我需要的是对这些函数的乘积进行积分 - 如果 X 以一定的概率出现在 μ1 以 σ1 表示并且 Y 以一定的概率出现在 μ2 的问题的解决方案，那么概率是多少 P(X=Y) ?

```
x=linspace(-500,500,1000)
e1 = normpdf(x,mu1,sigma1)
e2 = normpdf(x,mu2,sigma2)
solution = sum(e1*e2) 
```

为了可视化，e1 是蓝色的，e2 是绿色的，并且`e1*e2`是红色的（放大 100 倍以进行可视化）：

![两个 PDF 的乘积](../Images/7537ffc2c7ba6f89ace7e9f6c141db6f.png)

然而，有没有更直接的计算方式`solution`给定`mu1`,和？`mu2``sigma1``sigma2`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:04:47.343

你应该能够很容易地完成积分，但这并不意味着你认为它意味着什么。

数学正态分布会产生一个随机选择的实数，您可以将其视为在小数点后包含无限数量的随机数字。来自此类分布的任何两个数字相同（即使它们来自同一分布）的机会为零。

像正态分布一样的连续概率密度函数 p(x) 不会在 p(x) 处给出随机数为 x 的概率。粗略地说，如果在 x 处有一个小的宽度 delta-x 区间，那么随机数在该区间内的概率是 delta-x 乘以 p(x)。为了完全相等，您必须将 delta-x 设置为零，因此您再次得出的概率为零。

要计算间隔（无论它是什么意思），您可能会注意到 N(x;u,o) = exp(-(xu)^2)/2o^2) 忽略了我懒得在[http中查找的术语://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution)，如果将其中两个相乘，您可以在 exp() 中添加内容。如果你做了足够多的代数，你最终可能会得到一些你可以重写为另一个指数的东西，里面有一个二次方，这将变成另一个正态分布，直到你可以把一些因素拉到积分符号之外。

解决此类问题的更好方法是注意具有均值 M1 和 M2 以及方差 V1 和 V2 的两个正态分布的差异是均值 M1 - M2 和方差 V1 + V2 的正态分布。也许您可以考虑这种分布 - 您可以轻松计算出两个数字之差在您喜欢的任何范围内的概率，例如在 -0.0001 和 +0.0001 之间。

# regex - 如何从一个单词中提取两个数字并将其存储在bash中的两个单独变量中？

> ID：12744706
> 
> 赞同：0
> 
> 时间：2012-10-05T10:52:42.907
> 
> 标签：regex, bash, tr

我相信我的问题对于知道如何使用正则表达式的人来说非常简单，但我对它很陌生，我想不出办法。我发现很多类似的问题，但没有一个可以解决我的问题。

在 bash 中，我有一些形式为 nw=[:digit:]+.a=[:digit:]+ 的变量，例如，其中一些是 nw=323.a=42 和 nw=90.a =5 我想检索这两个数字并将它们放入变量 $n 和 $a 中。我尝试了几个工具，包括 perl、sed、tr 和 awk，但无法让其中任何一个工作，尽管我一直在谷歌搜索并尝试修复它一个小时。tr 似乎是最合适的。

我想要一段代码，它可以实现以下目标：

```
#!/bin/bash
ldir="nw=64.a=2 nw=132.a=3 nw=4949.a=30"
for dir in $ldir; do
    retrieve the number following nw and place it in $n
    retrieve the number following a and place it in $a
done
... more things... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:59:33.117

如果您相信您的输入，您可以使用`eval`：

```
for dir in $ldir ; do
    dir=${dir/w=/=}     # remove 'w' before '='
    eval ${dir/./ }     # replace '.' by ' ', evaluate the result
    echo $n, $a         # show the result so we can check the correctness
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:03:53.700

如果你不相信你的输入:) 使用这个：

```
ldir="nw=64.a=2 nw=132.a=3 nw=4949.a=30"

for v in $ldir; do 
    [[ "$v" =~ ([^\.]*)\.(.*) ]]
    declare "n=$(echo ${BASH_REMATCH[1]}|cut -d'=' -f2)"
    declare "a=$(echo ${BASH_REMATCH[2]}|cut -d'=' -f2)"
    echo "n=$n; a=$a"
done 
```

导致：

```
n=64; a=2
n=132; a=3
n=4949; a=30 
```

当然还有更优雅的方法，这只是一个快速的工作技巧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:20:30.293

```
ldir="nw=64.a=2 nw=132.a=3 nw=4949.a=30"
for dir in $ldir; do
   #echo --- line: $dir
   for item in $(echo $dir | sed 's/\./ /'); do
      val=${item#*=}
      name=${item%=*}
      #echo ff: $name $val
      let "$name=$val"
   done
   echo retrieve the number following nw and place it in $nw
   echo retrieve the number following a and place it in $a
done 
```

# css - 在选择框中添加颜色框

> ID：12744708
> 
> 赞同：1
> 
> 时间：2012-10-05T10:52:46.090
> 
> 标签：css

我有个问题。我有一个颜色的下拉列表。

例如

```
<select>
    <option>Red</option>
    <option>Blue</option>
</select> 
```

我想在颜色名称之前添加一个彩色框。

我找不到解决方案。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:54:00.607

我还没有找到一种方法可以轻松地将颜色框或图像直接添加到选择框，但是通过将选择元素替换为定义列表 (DL) 元素来实现这一点相对简单。有一个很好的教程向您展示如何在[此处执行此操作](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)

我创建了一个带有颜色框的 jsfiddle [http://jsfiddle.net/NjaEL/](http://jsfiddle.net/NjaEL/) *（只需更改箭头图标的路径，以便在容器中显示箭头）*。

基本代码是：

HTML

```
<dl class="dropdown">
<dt ><a href="#"><span>Color</span></a></dt>
<dd>
    <ul>
    <li><a href="#"><span class="color" style="background-color:Red"></span>Red<span class="value">Red</span></a></li>
     ...       
     </ul>
</dd>
</dl> 
```

CSS

```
.dropdown dd, .dropdown dt, .dropdown ul { margin:0px; padding:0px; } .dropdown dd { position:relative; } .dropdown dt a {background:#ffffff url(images/arrow1.png) no-repeat scroll 97.5% center ; display:block; padding-right:20px;width:70px; border: 1px solid #d3d3d3;} .dropdown dt a:hover { color:#212121; border: 1px solid #999999;} .dropdown a, .dropdown a:visited { color:#555555; text-decoration:none; outline:none;} .dropdown a:hover { color:#212121;} .dropdown dd ul { background:#ffffff none repeat scroll 0 0; border:1px solid #d3d3d3; color:#555555; display:none; left:0px; padding:5px 0px; position:absolute; top:0px; width:90px; list-style:none;} .dropdown dd ul li a { padding:5px; display:block;} .dropdown span.value { display:none;} .dropdown .color { border: 1px solid silver; vertical-align:middle; margin-right:5px; min-width: 10px;} 
```

Javascript

```
$(document).ready(function() {
$(".dropdown dt a").click(function() {
    $(".dropdown dd ul").toggle();
});
$(".dropdown dd ul li a").click(function() {
    var text = $(this).html();
    $(".dropdown dt a span").html(text);
    $(".dropdown dd ul").hide();
    $("#result").html("Selected value is: " + getSelectedValue("sample"));
});
function getSelectedValue(id) {
    return $("#" + id).find("dt a span.value").html();
}
$(document).bind('click', function(e) {
    var $clicked = $(e.target);
    if (!$clicked.parents().hasClass("dropdown")) $(".dropdown dd ul").hide();
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:58:24.043

仅使用 CSS 将无法在所有浏览器中使用 - 请在此处阅读：[https ://stackoverflow.com/a/2966006/1361042](https://stackoverflow.com/a/2966006/1361042)

你的彩色盒子应该是一个图像。

# php - php - 从变量中获取值

> ID：12744710
> 
> 赞同：0
> 
> 时间：2012-10-05T10:52:51.693
> 
> 标签：php, sql, sqlanywhere

我需要取值形式变量，隐藏一部分并通过电子邮件发送另一部分。

这个变量是[sql Anywhere](http://www.sybase.com/products/databasemanagement/sqlanywhere)查询结果。

这是我到目前为止所拥有的：

```
$res=sqlanywhere_query(...)

$resID=explode('#',$res);
$email.=$email_footer.$resID[1].$email_footer2; 
```

当我收到电子邮件`$res`时，在电子邮件中我会收到类似的东西`Resource #163`。

当我把`$resID[1]`应该放在的地方`163`，空间是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:57:07.617

那是因为你`$res`是一种资源，你必须得到结果。您应该为该库提供类似的东西

```
$sql = sqlanywhere_query(...)
$res = sqlanywhere_fetch($sql); 
```

并且`$res`将是一个包含您的查询结果的数组；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:59:36.940

它是一种资源，这意味着它是一个特殊变量，包含对外部源的引用。

请参阅有关[资源](http://php.net/manual/en/language.types.resource.php)的 PHP 手册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:06:42.173

请使用带有 php 的数据库。查询时，必须先将结果传递给 fetch 函数，然后才能访问这些值。

```
$res=sqlanywhere_query(...)

//fetch one
$data = sqlanywhere_fetch_row($res)

// or u loop through
while($row = sqlanywhere_fetch_row($res))
{
    echo $row["id"];
} 
```

所有这些功能都已弃用。您可以使用 mysql_query 和 mysql_fetch_row （或其他获取功能）。你也可以使用 mysqli_ 函数。阅读 PHP 手册。

希望能帮助到你

# c# - 在 C# 中更改 IP 地址、子网掩码、dns 服务器和默认网关

> ID：12744712
> 
> 赞同：0
> 
> 时间：2012-10-05T10:53:00.287
> 
> 标签：c#, networking, dns, ip, gateway

我对 C# 很陌生。我想创建一个设置以下内容的小型控制台应用程序：

```
IP address: 192.168.10.133
Subnet mask: 255.255.255.0
Default gateway: 192.168.10.66
Preferred DNS server: 192.168.10.3
Alternate DNS server: 192.168.10.5 
```

以及另一个清除该信息并设置`"Obtain an IP address automatically"`和`"Obtain DNS server address automatically"`.

我找到了一些人们在这个论坛和其他论坛上发布的脚本示例，但我无法让它们工作。

问的可能很多，但如果有人可以在这里发布一些对我有帮助的东西，我将不胜感激。

对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:00:44.197

您可以使用 WMI（Windows 管理工具）来实现这一点

这是一个非常好的教程。

[http://www.codeproject.com/Articles/5697/Configuring-TCP-IP-Settings-using-WMI-and-C](http://www.codeproject.com/Articles/5697/Configuring-TCP-IP-Settings-using-WMI-and-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T13:01:05.817

我决定用这个走另一条路。我不使用 C#，而是通过批处理文件来设置它。

set_static_ip.bat

```
netsh interface ip set address name="Local Area Connection" static 192.168.0.10 255.255.255.0 192.168.0.1
netsh interface ip set dnsservers "Local Area Connection" static 192.168.0.3 primary 
```

第一行设置 ip 和默认网关。第二行设置主 dns 服务器。我无法设置备用 dns，但我确定我只是错过了一些东西。

如果您想更改配置以自动获取 IP 地址，则只需运行以下代码。

set_auto_ip.bat

```
netsh interface ip set address name="Local Area Connection" source="dhcp"
netsh interface ip set dnsservers name="Local Area Connection" source=dhcp 
```

简单而有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T03:28:04.413

只是为 narfie 非常有帮助的帖子添加一点（2014 年 9 月 12 日 13:01）。

如果要设置备用 DNS 地址和主地址，请使用以下命令：

> netsh interface ip set address name="本地连接" static 192.168.0.10 255.255.255.0 192.168.0.1
> 
> netsh interface ip set dnsservers "Local Area Connection" static 192.168.0.3 primary
> 
> netsh interface ipv4 add dns name="本地连接" 196.14.239.2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-31T08:53:02.947

检查这个应用程序。它可以通过单击按钮为以太网和 wifi 设置 IP。它可以设置预定义的静态或 dhcp 配置

[https://github.com/kamran7679/ConfigureIP.git](https://github.com/kamran7679/ConfigureIP.git)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-25T21:05:41.870

更改 TCP/IP 设置

TCP/IP 定义了您的计算机用来与其他计算机通信的语言。如果您的网络支持，我们建议使用自动动态主机配置协议 (DHCP) 自动为网络上的计算机分配 Internet 协议 (IP) 地址。如果您使用 DHCP，那么如果您将计算机移动到另一个位置，则无需更改设置，并且 DHCP 不需要您手动配置设置，例如域名系统 (DNS) 和 Windows Internet 名称服务 (WINS ）。

1.

```
 Open Network Connections by clicking the Start button Picture of the Start button, clicking Control Panel, clicking Network and Internet, clicking Network and Sharing Center, and then clicking Manage network connections. 
```

2.

```
 Right-click the connection that you want to change, and then click Properties. Administrator permission required If you are prompted for an administrator password or confirmation, type the password or provide confirmation. 
```

3.

```
 Click the Networking tab. Under This connection uses the following items, click either Internet Protocol Version 4 (TCP/IPv4) or Internet Protocol Version 6 (TCP/IPv6), and then click Properties. 
```

4.

```
 To specify IPv4 IP address settings, do one of the following:
      *

        To obtain IP settings automatically, click Obtain an IP address automatically, and then click OK.
      *

        To specify an IP address, click Use the following IP address, and then, in the IP address, Subnet mask, and Default gateway boxes, type the IP address settings. 
```

5.

```
 To specify IPv6 IP address settings, do one of the following:
      *

        To obtain IP settings automatically, click Obtain an IPv6 address automatically, and then click OK.
      *

        To specify an IP address, click Use the following IPv6 address, and then, in the IPv6 address, Subnet prefix length, and Default gateway boxes, type the IP address settings. 
```

6.

```
 To specify DNS server address settings, do one of the following:
      *

        To obtain a DNS server address automatically, click Obtain DNS server address automatically, and then click OK.
      *

        To specify a DNS server address, click Use the following DNS server addresses, and then, in the Preferred DNS server and Alternate DNS server boxes, type the addresses of the primary and secondary DNS servers. 
```

7.

```
 To change DNS, WINS, and IP settings, click Advanced. 
```

# c++ - 发送到 C++ 中的文件

> ID：12744716
> 
> 赞同：1
> 
> 时间：2012-10-05T10:53:12.363
> 
> 标签：c++, file

我已经编写了以下多态类。

```
 #include <iostream>
 #include <fstream>

 using namespace std;

 class SaveAndDraw
 {
    public:
      virtual void draw()=0;
      void saveToFile();
 };
 class MakeShape : public SaveAndDraw
 {
   public:
      virtual void draw();

 };

 void SaveAndDraw::saveToFile();
 { 
```

如何将虚拟绘图功能保存到 txt 文件？

```
 } 

 void MakeShape::draw()
 {
    for(int i = 0; i < 10 ; i++)
    {
        for(int j = 0; j < i; j++)
        {
            cout << "*";

        }
        cout << endl;
    }
}

int main()
{
    SaveAndDraw *creation = new MakeShape;
    creation->draw();
    creation->saveToFile();
    delete creation;
    return 0;
} 
```

我不知道如何将绘图保存到文件中。我知道要创建你必须说的文件

```
fstream fout;
fout.open("test.txt");
fout.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:56:31.533

不要在你的 draw 函数中写入 std::cout ，而是传递它`fout`。

```
void MakeShape::draw(std::ostream & out)
 {
    for(int i = 0; i < 10 ; i++)
    {
        for(int j = 0; j < i; j++)
        {
            out << "*";

        }
        out << endl;
    }
} 
```

如果您需要 draw 写入 cout，只需将 cout 作为参数传递即可。
这样，您就不再需要 saveToFile 函数了。

# math - Õ（omicron tilde）在复杂性 Õ(n) 与 O(n) 中的含义是什么

> ID：12744718
> 
> 赞同：23
> 
> 时间：2012-10-05T10:53:19.417
> 
> 标签：math, complexity-theory, big-o

我从未见过这种复杂性表示法：Õ(n)。

它出现在随机算法学习的背景下。

有人知道这个符号吗？你不能完全谷歌这个......

编辑：已解决

我认为人们在下面指出了正确的答案。在我的例子中，Õ() 用于隐藏树的指数增长。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T11:06:57.897

其实你*可以*google一下！

它是忽略对数因子的 big-O 变体。请参阅[此 wikipedia entry](http://en.wikipedia.org/wiki/%C3%95#Mathematical_use)，我只需通过谷歌搜索该字符并查看顶部条目即可找到该条目。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-05T11:07:16.210

它是 O(g(n) log^kg(n)) 的简写

# c# - How do I perform File.ReadAllLines on a file that is also open in Excel?

> ID：12744725
> 
> 赞同：19
> 
> 时间：2012-10-05T10:53:44.313
> 
> 标签：c#, io

How do I read all lines of a text file that is also open in Excel into `string[]` without getting IO exception?

There is this question which could be a part of the answer, though I don't know how I could use what's in there: [How do I open an already opened file with a .net StreamReader?](https://stackoverflow.com/questions/897796/how-do-i-open-an-already-opened-file-with-a-net-streamreader)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-06-21T13:30:43.237

Your problem is Excel opens the file as read/write. `File.ReadAllLines()` cannot access the file when it is open for writing in another application. If you opened the csv in Excel as read only, you wouldn't encounter this exception.

This is because the implementation in .Net does not open the internal stream with appropriate permissions to access the file when another application has write permissions to it.

So the fix here is simple, write your own `ReadAllLines()` method that sets the appropriate permissions when initiating the underlying `Stream`.

Here's an idea that borrows heavily from what `ReadAllLines()` does on its own:

```
public string[] WriteSafeReadAllLines(String path)
{
    using (var csv = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
    using (var sr = new StreamReader(csv))
    {
        List<string> file = new List<string>();
        while (!sr.EndOfStream)
        {
            file.Add(sr.ReadLine());
        }

        return file.ToArray();
    }
} 
```

The only difference between this and what `ReadAllLines` does is the `FileShare` permission is set to `FileShare.ReadWrite`, which allows the file to be opened even when it is open with Read/Write permissions in another application.

Now, you have to understand the issues that can arise from this as there can be complications since another application has write permissions to the file.

1.  You are going to be reading the last saved version of the file, so if you have unsaved changes in Excel, this method will not read them
2.  If you save the file in Excel while this method is in the middle of reading it you are going to probably get an exception depending on the circumstances. This is because the file is completely locked while it is saving, so if you try to read the file while it locked, it will throw an `System.IO.IOException`.
3.  And if you save the file and manage to avoid an exception (extremely unlikely, but possible given specific timing), you are going to read the newly saved file, not the original.

* * *

To understand why you cannot read the file when it is open for writing by another application, you have to look at the actual implementation in .NET. (This is the implementation in .Net 4.5 so it may be slightly different if you are looking at a difference version of .Net).

This is what `File.ReadAllLines()` actually looks like:

```
public static string[] ReadAllLines(string path)
{
  if (path == null)
    throw new ArgumentNullException("path");
  if (path.Length == 0)
    throw new ArgumentException(Environment.GetResourceString("Argument_EmptyPath"));
  else
    return File.InternalReadAllLines(path, Encoding.UTF8);
}

private static string[] InternalReadAllLines(string path, Encoding encoding)
{
  List<string> list = new List<string>();
  using (StreamReader streamReader = new StreamReader(path, encoding))
  {
    string str;
    while ((str = streamReader.ReadLine()) != null)
      list.Add(str);
  }
  return list.ToArray();
} 
```

And to peek at what `StreamReader` is doing internally:

```
internal StreamReader(string path, Encoding encoding, bool detectEncodingFromByteOrderMarks, int bufferSize, bool checkHost)
{
  if (path == null || encoding == null)
    throw new ArgumentNullException(path == null ? "path" : "encoding");
  if (path.Length == 0)
    throw new ArgumentException(Environment.GetResourceString("Argument_EmptyPath"));
  if (bufferSize <= 0)
    throw new ArgumentOutOfRangeException("bufferSize", Environment.GetResourceString("ArgumentOutOfRange_NeedPosNum"));
  this.Init((Stream) new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Read, 4096, FileOptions.SequentialScan, Path.GetFileName(path), false, false, checkHost), encoding, detectEncodingFromByteOrderMarks, bufferSize, false);
} 
```

So here we come to the reason why the exception is throw, when supplied with a path, `StreamReader` creates a `FileStream` that has the `FileShare` parameter set to `Read`. This means that it cannot share a file with another application with Read/Write access to the file. To override this behavior you need to give it a `Stream` with a different setting for `FileShare`, which is what I did in the solution I provided above.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:33:29.103

You cannot open file for reading only when it is opened with a read restriction. Otherwise all methods including `ReadAllLines` will work without throwing permission exceptions.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:59:04.000

Try this.

```
FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read,
System.IO.FileShare.ReadWrite) 
```

# visual-studio-2010 - Visual Studio 2010 断点始终未命中

> ID：12744726
> 
> 赞同：3
> 
> 时间：2012-10-05T10:53:48.883
> 
> 标签：visual-studio-2010, visual-studio-debugging

我对 Visual Studio 2010 和 ASP.NET 2.0 项目有疑问。

我已经在 StackOverflow 上搜索了我的问题的可能解决方案，但即使有很多与 Visual Studio 调试器相关的文章，也没有专门解决我的问题。

每次我开始调试时，Visual Studio 都会告诉我“当前不会命中断点。源代码与原始版本不同。”。过去当我遇到这个问题时，我可以通过执行 Clean Solution 来解决它。或者如果这不起作用，我总是可以重新启动 Visual Studio 或我的机器，问题就会消失。但是，这不再起作用了。解决方案清理，我可以重建，但调试器仍然抱怨源。

我发现如果我删除“C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files”中的文件夹“root”，问题暂时消失了，但只有下次我启动调试器时，并且仅适用于项目中当前设置的断点。由于源/原始差异，我在调试器运行时添加的所有断点也没有被命中。

我不知道如何永久解决此问题，因为我不想每次必须启动调试会话时都删除该文件夹。

我还有一些调试得很好的 ASP.NET 4.0 项目。

我使用 Windows 7 企业版 (x64)。

如果有人有建议，我将非常感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:12:12.320

试试这个

右键单击解决方案。
单击“属性”
转到：“通用属性”->“项目依赖关系”
从下拉列表中选择您的“项目”
检查“依赖于”列表中的每个项目
单击“确定”

现在打开**“任务管理器”**并在 iis7 的情况下
杀死所有工作进程，即**“w3wp”**
或杀死所有**“WebDev.WebServer40.exe”**进程

现在运行您的应用程序。

# java - 在 Android 中使用 ListView 显示矩形框

> ID：12744732
> 
> 赞同：2
> 
> 时间：2012-10-05T10:54:07.417
> 
> 标签：java, android, xml

我想创建一个`ListView`包含

每个项目都有一个 ID 和名称。有什么办法可以在带边框的矩形框中显示每个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:00:48.787

是的，您可以通过以下方式创建它。

Listview 的行项目文件。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_margin="10dp"
android:background="@drawable/round_shape"
android:orientation="horizontal"
android:padding="10dp" >

<TextView
android:id="@+id/id"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

 />

<TextView
android:id="@+id/Name"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingTop="6dip"
android:paddingLeft="6dip"
android:textSize="17dip"
android:textStyle="bold" /> 

</LinearLayout> 
```

**round_shape.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<gradient
    android:angle="270"
    android:endColor="yourstartcolor"
    android:startColor="yourendcolor"/>

<corners
    android:bottomLeftRadius="27dp"
    android:bottomRightRadius="27dp"
    android:topLeftRadius="27dp"
    android:topRightRadius="27dp" />

</shape> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:04:41.047

对于矩形边框，您可以制作**border.xml**，如下所示...

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">   
   <stroke android:width="1dp" android:color="#000000"></stroke>
</shape> 
```

您可以将其设置为您的 Textview 背景...如下所示...

```
<TextView
android:id="@+id/Name"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingTop="6dip"
android:paddingLeft="6dip"
android:textSize="17dip"
android:textStyle="bold" 
android:background="@layout/border"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:01:48.663

是的，您可以使用 a[`SimpleAdapter`](http://developer.android.com/reference/android/widget/SimpleAdapter.html)将您想要的每个项目的布局放在`ListView`：

> public SimpleAdapter（上下文上下文，列表>数据，int资源，String[] from，int[] to）
> 
> 参数 context：与此 SimpleAdapter 关联的 View 正在运行的上下文数据：地图列表。列表中的每个条目对应于列表中的一行。Maps 包含每一行的数据，并且应该包括在“from”资源中指定的所有条目：定义此列表项的视图的视图布局的资源标识符。布局文件应至少包含在“to”中定义的命名视图 from：将添加到与每个项目关联的 Map 的列名列表。to：应该在“from”参数中显示列的视图。这些都应该是 TextViews。此列表中的前 N ​​个视图被赋予 from 参数中前 N 列的值。

然后将此适配器设置为`ListView`

# linq - 使用 LINQ 从表中仅获取一个值

> ID：12744735
> 
> 赞同：3
> 
> 时间：2012-10-05T10:54:13.990
> 
> 标签：linq, select, subquery

我有一个客户表和一个地址表（customer_id、address_forename、address_surname、address_street、address_city、address_zip、address_storedtime），其中 customer_id 作为外键。

一个客户可以有多个地址。

现在我试图只使用 LINQ 获取最后输入的地址，如下所示，这应该允许我将地址放在一个字符串中并返回：代码：

```
var customerAddress = (from c in myDB.address
                       where (c.customer_id == customerId)
                       select new
                       {
                           c.customer_id,
                           c.address_forename,
                           c.address_surname,
                           c.address_street,
                           c.address_city,
                           c.address_zip,
                           c.address_storedtime
                       }).GroupBy(g => new
                       {
                           Customer = .customer_id,
                           Address = g.address_forename + " " + g.address_surname + " " + g.address_street + " " +        g.address_city + " " + g.address_zip 
                       }).Select(g => new
                       {
                           g.Key.Customer,
                           g.Key.Address,   
                           StoredTime = g.Max(x => x.address_storedtime)
                       }).Disinct();/*First();*/

string result = "";

foreach (var ad in customerAddress)
{
    if (ad.Address != null)
    {
        result = ad.Address;
    }
    break;
}

return result; 
```

我为客户在数据库中的不同地址获得相同的地址字符串，而我试图只获得一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:29:50.803

由于您已经按客户 ID 进行过滤，因此不需要分组子句。您应该能够为客户降序排列结果并更简单地投影地址。

```
var customerAddress = (from c in myDB.address
                        where (c.customer_id == customerId)
                        orderby c.address_storedtime descending
                        select c.address_forename + " " + c.address_surname + " " + c.address_street + " " +        c.address_city + " " + c.address_zip)
                      .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:19:35.620

替换你`foreach`的

```
var result =
    customerAdress.Any(ad => ad.Address != null) 
    ? customerAdress.Last(ad => ad.Address != null).Address
    : default(string); 
```

# c++ - Qt代理模型使用示例

> ID：12744739
> 
> 赞同：4
> 
> 时间：2012-10-05T10:54:43.970
> 
> 标签：c++, qt, qtreeview, qfilesystemmodel

我正在使用 Qt 4`QFileSystemModel`和`QTreeView`. 我正在编写一个类似于文件管理器的 Windows 资源管理器，并希望创建一个更类似于 Windows 的树，其中树包含一些快捷路径，如桌面、我的文档。我唯一想要的就是让一棵树看起来像这样：

*   我的电脑
    *   桌面
    *   我的文件
    *   C：\
    *   D:\
    *   ...

听说可以用`QAbstractProxyModel`. 有没有人使用`QAbstractProxyModel`并让它工作？如果是，请提供任何适当的示例。提前致谢。

**这个问题与[如何在 QFileSystemModel 中添加自定义行相同？](https://stackoverflow.com/questions/8885817/how-to-add-custom-row-in-qfilesystemmodel)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:04:32.533

你能解释一下 QTreeView 中缺少什么来处理你的示例树吗？

使用像 [http://www.java2s.com/Code/Cpp/Qt/QTreeViewdemoandQStandardItem.htm](http://www.java2s.com/Code/Cpp/Qt/QTreeViewdemoandQStandardItem.htm)这样的简单 QTreeView 示例作为起点来获取您正在寻找的内容怎么样？

# ruby-on-rails - 使用 Capistrano 部署 Rails 应用程序

> ID：12744741
> 
> 赞同：1
> 
> 时间：2012-10-05T10:54:58.280
> 
> 标签：ruby-on-rails, ruby, capistrano, cpanel

我正在尝试通过 Capistrano 将名为 Blog 的 Rails 应用程序部署到我的网站。我在 /rails_app/Blog/ 的 cPanel 中创建了一个 Rails 应用程序，并删除了生成的框架代码。

当我在终端中键入此命令时

```
 cap deploy:setup 
```

我收到此错误消息

```
USER@USER-PC ~/documents/Aptana Studio 3 Workspace/Blog
$ cap deploy:setup
* executing `deploy:setup'
* executing "sudo -p 'sudo password: ' mkdir -p /rails_app/Blog/ /rails_app/Bl
og/releases /rails_app/Blog/shared /rails_app/Blog/shared/system /rails_app/Blog
/shared/log /rails_app/Blog/shared/pids"
servers: ["mydomain.co.nz"]
connection failed for: mydomain.co.nz (Errno::ETIMEDOUT: A connection attempt fail
ed because the connected party did not properly respond after a period of time,
or established connection failed because connected host has failed to respond. -
connect(2)) 
```

这是我的 deploy.rb 文件配置设置

```
set :application, "mydomain.co.nz"
set :repository,  "set your repository location here"

set :scm, :subversion
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`

# These are not not part of the defaults
set :port, 12002
set :deploy_to, "/rails_app/Blog/"
#

role :web, application                          # Your HTTP server, Apache/etc
role :app, application                         # This may be the same as your `Web` server
role :db,  application, :primary => true # This is where Rails migrations will run
role :db,  application 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:19:30.573

试试这个，这是对我有用的 deploy.rb 文件示例

```
require "bundler/capistrano"
set :application, "testcapistrano"

set :rvm_ruby_string, "ruby-1.9.3-p194@testcapistrano" 
require "rvm/capistrano"
set :rvm_type, :user
set :rvm_install_ruby, :install
set :repository,  "xyz" 
set :scm, :git
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`
role :web, "testcapistrano.dipak.cs"       # Your HTTP server, Apache/etc
role :app, "testcapistrano.dipak.cs"       # This may be the same as your  `Web` server
role :db,  "testcapistrano.dipak.cs", :primary => true # This is where Rails migrations will run

default_run_options[:pty] = true
ssh_options[:forward_agent] = true
set :deploy_to, "/dipak/capistron/"
set :deploy_via, :remote_cache
set :user, "your username"
set :password, "password"
set :use_sudo, false
set :keep_releases, 5
before 'deploy:setup', 'rvm:install_ruby'

# tasks
namespace :deploy do
  task :start, :roles => :app do
   run "touch #{current_path}/tmp/restart.txt"
  end
  task :stop, :roles => :app do
   # Do nothing.
  end

  desc "Restart Application"
  task :restart, :roles => :app do
    run "touch #{current_path}/tmp/restart.txt"
  end
end 
```

# c# - EF 中的存储过程输入验证

> ID：12744750
> 
> 赞同：1
> 
> 时间：2012-10-05T10:55:31.507
> 
> 标签：c#, entity-framework, stored-procedures, sql-server-2008-r2, sql-injection

我已将 SQL Server 存储过程导入到`.edmx`文件中。我正在调用生成的方法，例如：

```
entity.MySP(stringInput) 
```

使用 EF 时是否`stringInput`需要验证参数（用于 SQL 注入等），或者我可以假设 EF 为我这样做？如果没有，是否可以调用一种方法来转义/验证输入参数？

我正在使用 SQL Server 2008 R2、.NET 4.0、C#、ASP.NET MVC 4、VS2010。

编辑：请注意，我想使用 LINQ 而不是调用 SP，但我使用的是 FREETEXT，所以我*认为*这是更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:34:20.360

这实际上取决于您在存储过程中所做的事情。只需使用存储过程，您就无法免受 SQL 注入的影响。相反，通过在 LINQ to Entity 代码中使用变量，您可以安全地避免 SQL 注入，因为那里的查询也已正确参数化。不幸的是，实体框架不支持全文索引，因此您需要借助 procs 或函数来使用它们来解决性能问题。但是，我不会说它一定比 LINQ 生成的查询更“优雅”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:38:58.953

您可以在此处阅读有关 LINQ to Entity Framework Security 的更多信息，http: [//msdn.microsoft.com/en-us/library/cc716760.aspx](http://msdn.microsoft.com/en-us/library/cc716760.aspx)。查看标题为“查询的安全注意事项”的部分。

为了具体回答您的问题，Entity Framework 将调用您的存储过程并传入 stringInput 值。这意味着即使 stringInput 是一个旨在将有害内容注入数据库的 SQL 语句，仅将其传递给存储过程也不会导致 SQL 注入攻击。

但是，根据您在存储过程中使用 stringInput 的方式，您仍然可能让自己受到攻击。具体来说，如果您在执行的动态 SQL 语句中使用 stringInput，您就会让自己受到攻击。如果您使用它在 SELECT 语句的 WHERE 部分进行比较，您应该是安全的。

# android - Android 打开帧缓冲设备时出错

> ID：12744755
> 
> 赞同：1
> 
> 时间：2012-10-05T10:55:48.040
> 
> 标签：android, framebuffer

在 Android 中，我正在尝试使用 NDK 代码打开帧缓冲设备，如下所示：

fd = open("/dev/graphics/fb0", O_RDONLY)

我将 fd 结果值设为 -1。我的设备已植根，并且我在 AndroidManifest.xml 文件中声明了“android.permission.READ_FRAME_BUFFER”权限。

有什么额外的步骤，我应该做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T19:32:10.157

试试这个它对我有用

adb shell chmod 06755 /dev/graphics/fb0

# r - 数据框分箱数据的直方图

> ID：12744757
> 
> 赞同：-1
> 
> 时间：2012-10-05T10:55:50.123
> 
> 标签：r, ggplot2, dataframe, histogram

> **可能重复：**
> [如何在 ggplot 直方图中定义填充颜色？](https://stackoverflow.com/questions/2546016/how-to-define-fill-colours-in-ggplot-histogram)

我想从一个数据帧中绘制（直方图）每个长度类的鱼数，该数据帧以分箱格式（data.frame（...，length=length，counts=N））总结了这些信息。我是 ggplot2 的新用户，但似乎它可能是一个不错的选择。我可以从 data.frame 对象创建这个直方图吗？

抱歉这么简短，这是一段df的结构，

```
'data.frame':   416 obs. of  3 variables:
 $ specie: Factor w/ 1 level "speciesA": 1 1 1 1 1 1 1 1 1 1 ...
 $ length: num  34.5 35 35.5 36 36.5 37 37.5 38 38.5 39 ...
 $ Counts: num  2 0 0 0 1 0 1 1 0 1 ... 
```

在这种情况下，渔民捕获了2个人34.5厘米，1个36.5，等等......非常感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:27:05.883

由于您没有提供数据样本，因此我根据您的描述创建了数据。

鱼的长度从 34.5 到 49.5（任意单位：au）。鱼的最小长度为 34.5，鱼的最大长度为 49.5

```
 x <- 34.5:49.5 
```

具有特定长度的鱼的数量从 0 开始，到 2 结束。

```
 y <- 0:2 
```

创建一个长度为 x 的计数样本

```
 Counts <- sample(y, length(x), replace=TRUE) 
```

创建一个包含长度和计数的数据框1。注意： df1 的结构满足您描述的数据结构

```
df1 <- data.frame(length=x, Counts = Counts) 
```

由于您已经计算了具有特定长度的鱼的数量，因此您必须将其转换回原始格式，即如果 2 条鱼的长度为 34.5(au)，则应将其转换回 2 条 34.5s。

```
df2 <- data.frame(length = rep(df1$length, df1$Counts)) 
```

使用 ggplot 函数绘制数据。请注意，有很多方法可以绘制相同的情节。您也可以尝试 geom_histogram 来获得相同的图。

```
require("ggplot2")
ggplot(data=df2, aes(x=length, xmin=34.5, xmax=49.5)) + stat_bin(binwidth=1) 
```

查看此[网站](http://docs.ggplot2.org/current/geom_histogram.html)以获取更多信息

希望这可以帮助！

# ajax - 带有 application/json 的 jQuery ajax POST 请求

> ID：12744759
> 
> 赞同：1
> 
> 时间：2012-10-05T10:56:04.790
> 
> 标签：ajax, jquery

我想从 jQuery 向远程服务器发出 POST 请求。当我写这样的代码时

```
$.ajax({
             type: 'POST',
                url: 'http://mysite:8080/orderService/order/send',
                crossDomain: true,
                data: JSON.stringify(orderSendRequest),
                dataType: 'json',
                success: function(responseData, textStatus, jqXHR) {
                    var value = responseData.someKey;
                },
                error: function (responseData, textStatus, errorThrown) {
                    alert('POST failed.');
                }
        }); 
```

一切正常，但我希望 ContextType 为 application/json，当我将此行添加到代码中时，请求不起作用，并且出现以下错误：

```
XMLHttpRequest cannot load http://mysite:8080/orderService/order/send. Origin null is not allowed by Access-Control-Allow-Origin.

$.ajax({
             type: 'POST',
                url: 'http://mysite:8080/orderService/order/send',
                crossDomain: true,
                data: JSON.stringify(orderSendRequest),
                dataType: 'json',
                contentType : 'application/json; charset=utf-8',
                success: function(responseData, textStatus, jqXHR) {
                    var value = responseData.someKey;
                },
                error: function (responseData, textStatus, errorThrown) {
                    alert('POST failed.');
                }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:57:51.890

我不相信 json 支持跨域。改为使用 jsonp 数据类型进行研究。

# .net - 桌面应用程序选择哪种 .net 技术？

> ID：12744760
> 
> 赞同：0
> 
> 时间：2012-10-05T10:56:07.940
> 
> 标签：.net, wpf, winforms, desktop-application

我需要开发一个 Windows 应用程序，我必须在其中进行大量自定义，例如根据显示器的分辨率更改表单的大小及其内容。所以，我需要在这里进行大量的动态设计更改。

因此，与 .net winform 应用程序或 wpf 应用程序一起使用会更好。我确实对这两种环境都有工作知识；但是，我不太清楚决定选择哪种技术。

这项工作似乎也可以在 winform 中使用，但我想知道的是，对于这一特定要求，这两者中哪一个是最好的。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:17:33.540

对于在运行时更改窗体的设计，参考显示器的分辨率更适合 - WPF。

但是在使用 Windows 窗体时，您肯定需要一些 UI 组件。对于 Windows 窗体中的动态布局，我使用了 DevExpress 控件。但是当谈到技术本身时，更好的是 WPF

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:51:51.960

我**强烈**推荐**WPF**。您有很多Windows 窗体中没有的**设置。**我制作了 Windows 窗体应用程序，但我非常喜欢 WPF。

目前**我制作 WPF 应用程序**。你会很**高兴**使用 WPF。

# wso2 - WSO2 Identity Server 4.0 使用的 ApacheDS 版本是什么

> ID：12744762
> 
> 赞同：0
> 
> 时间：2012-10-05T10:56:14.857
> 
> 标签：wso2, wso2is

请。指定 WSO2 Identity server 4.0 使用的 ApacheDS 版本。这是 Apache DS 2.0 还是一些以前的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:33:55.363

WSO2 Identity Server 使用嵌入式 Apache DS 1.5.7

# ios - 使用 XCode 4.5.1 分发时出错

> ID：12744766
> 
> 赞同：2
> 
> 时间：2012-10-05T10:56:27.190
> 
> 标签：ios, iphone, ios6, xcode4.5

我安装了支持 iphone 5 的 xcode 4.5.1。创建存档后，应用程序的验证通过且没有错误。但随后在上传应用程序的分发过程中，显示​​以下错误：验证过程中发现以下问题：上传到iTunes Store时出错。

使用 xcode 4.3 可以上传。在 iTunesConnect 我只看到“等待上传”但没有错误日志。是否有显示更多详细信息的本地错误日志？错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:28:08.193

[我在上传到 iTunes 商店时出错](https://stackoverflow.com/questions/10022981/an-error-occurred-uploading-to-the-itunes-store)中找到了答案

4.5 苹果上传器不适用于 Oracle Java 1.7，但需要 Apple Java 1.6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:04:32.307

可能是一些本地问题，尝试关闭所有内容（xcode&orginizer）并再次打开。这应该够了吧。

# android - Android中的布局对齐问题

> ID：12744767
> 
> 赞同：1
> 
> 时间：2012-10-05T10:56:30.990
> 
> 标签：android, android-layout, layout

我正在尝试实现这个用户界面

![布局](../Images/2aa2b32472a6baa53f8fc2c125d5c940.png)

通过布局。但是在对齐中遇到问题。除此之外，一般来说，使用 LinearLayout 或 RelativeLayout 的最佳方式是什么？得到许多推荐两者的参考。

这是我的xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="400dp"

    android:src="@drawable/splash_landscape" />

<TextView
    android:layout_width="301dp"
    android:layout_height="100dp"
    android:text="Product Name" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="323dp"
    android:layout_height="82dp"
    android:text="TextView" />

<LinearLayout 
     android:layout_width="match_parent"
android:layout_height="match_parent">
<TextView android:layout_width="300dp"
android:layout_height="100dp"
android:text="Product Name"
></TextView>
        <RelativeLayout >
    <TextView android:layout_width="200dp"
android:layout_height="100dp"
android:text="Product Name"
></TextView>

</RelativeLayout>
<RelativeLayout >
    <TextView android:layout_width="200dp"
android:layout_height="100dp"
android:text="Product Name"
></TextView>
    <TextView android:layout_width="200dp"
android:layout_height="100dp"
android:text="Product Name"
></TextView>

</RelativeLayout>

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/launcher" />

</LinearLayout>
<TextView
    android:id="@+id/textView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TextView" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:18:22.697

我已经尝试了上述布局，并且接近了它。下面是xml文件和屏幕截图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="60dip"
        android:orientation="vertical" android:background="#c0c0c0">

        <Button
            android:id="@+id/button8"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Button" />

    </LinearLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" android:layout_marginTop="5dip">

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff">
 <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_marginTop="5dip">

     <Button
         android:id="@+id/button3"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="Button" />

        </LinearLayout>
         <LinearLayout
            android:id="@+id/linearLayout5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_marginTop="5dip">
 <LinearLayout
            android:id="@+id/linearLayout7"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_weight="1">

     <Button
         android:id="@+id/button1"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="Button" />

        </LinearLayout>
         <LinearLayout
            android:id="@+id/linearLayout8"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_weight="1">

             <Button
                 android:id="@+id/button2"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:text="Button" />

        </LinearLayout>
        </LinearLayout>
         <LinearLayout
            android:id="@+id/linearLayout6"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_marginTop="5dip">
 <LinearLayout
            android:id="@+id/linearLayout9"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_weight="1">

     <Button
         android:id="@+id/button4"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="Button" />

        </LinearLayout>
         <LinearLayout
            android:id="@+id/linearLayout10"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_toLeftOf="@+id/linearLayout3" android:layout_alignParentLeft="true" android:background="#fff" android:layout_weight="1">

             <Button
                 android:id="@+id/button5"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:text="Button" />

        </LinearLayout>
        </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="70dip"
            android:layout_height="wrap_content"
            android:orientation="vertical" android:layout_alignParentRight="true" android:background="#c0c0c0" android:layout_alignBottom="@+id/linearLayout2" android:layout_alignTop="@+id/linearLayout2">

            <Button
                android:id="@+id/button6"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:text="Button" />

        </LinearLayout>

    </RelativeLayout>

  <LinearLayout
      android:id="@+id/linearLayout11"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:background="#c0c0c0"
      android:orientation="horizontal" android:layout_marginTop="5dip">

            <Button
                android:id="@+id/button6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button" android:layout_weight="1"/>

            <Button
                android:id="@+id/button7"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button" android:layout_weight="1"/>

        </LinearLayout>
          <LinearLayout
            android:id="@+id/linearLayout12"
            android:layout_width="fill_parent"
            android:layout_height="30dip"
            android:orientation="vertical" android:layout_alignParentRight="true" android:background="#c0c0c0" android:layout_marginTop="5dip">

            <Button
                android:id="@+id/button6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button" />

        </LinearLayout>
          <LinearLayout
            android:id="@+id/linearLayout13"
            android:layout_width="fill_parent"
            android:layout_height="60dip"
            android:orientation="vertical" android:layout_alignParentRight="true" android:background="#c0c0c0" android:layout_marginTop="5dip">

            <Button
                android:id="@+id/button6"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Button" />

        </LinearLayout>
</LinearLayout> 
```

![在此处输入图像描述](../Images/11aedc2f8b0da650114ebc2262d8a8b7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:01:26.067

我肯定会`RelativeLayout`用作你的根。`below`然后使用,`toRightOf`等来排列所有视图会容易得多`alignParentLeft`..

# objective-c - 我需要有关 iOS Web 服务客户端设计模式的帮助

> ID：12744769
> 
> 赞同：2
> 
> 时间：2012-10-05T10:56:43.780
> 
> 标签：objective-c, ios, web-services, architecture

我想在 iOS 中实现一个 Web 服务客户端，它使用 SOAP 和 XML 进行请求/响应。我的视图启动了初始业务逻辑（用户按下按钮或其他东西并启动一些称为 method_A 的业务方法）。

所以我有一个带有 method_A 的类，这个方法检查用户是否登录等，然后通过 SOAPConnector 类异步启动请求。所以 UI 不会被阻塞（异步）。SOAPConnector 类接受 XML 并处理请求。因此，我将 NSURLRequest 和 NSURLConnection 与 sendSynchronousRequest 一起使用。

响应被发送回接受响应的响应类。然后这个类想要解析响应 XML。因此，我使用了一个名为 XMLManager 的额外类，它使用 NSXMLParser 来解析 xml。但是这里我们需要一个委托来获取解析的 xml。再次在解析之后，我必须实现一个额外的方法来将解析的 xml 返回给发起请求的第一个类。

我真的想知道这是否是正确的方法。第一个问题是不阻塞 UI 的异步请求（第一个回调）。第二个问题是我被迫使用委托的解析（第二个回调）。这导致了很多类和方法，我怀疑这是正确的方法。这些类的唯一目的是管理委托和异步问题。所以我正在寻求任何建议并帮助解决这个问题。你知道一些很好的设计模式来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:31:22.910

除了描述您选择的设计模式的方式存在一些不一致之外：

> 然后异步启动请求

对比

> 因此，我将 NSURLRequest 和 NSURLConnection 与 sendSynchronousRequest 一起使用。

* * *

也就是说，你的方法似乎是合理的。解决您发现的问题：

> 因此，我将 NSURLRequest 和 NSURLConnection 与 sendSynchronousRequest 一起使用。

这不就是使用异步 API 的目的吗？如果您`NSURLConnection`确实是异步操作，则应该涵盖该问题。

> 第二个问题是我被迫使用委托的解析

这种方法确实会产生更多的类、委托等，但它在测试方面符合最佳实践。如果您正在执行单元测试或其他测试策略（您不是吗？），那么除非您在功能上分解此过程，否则单独测试会更加困难。

如果您可以访问《[Test-Drive iOS Development](https://rads.stackoverflow.com/amzn/click/com/0321774183) 》一书，这里有一个很好的部分介绍了使用 Web 服务的最佳实践，以实现可测试性。

# python - 将计算值元素添加到多维 numpy 数组的快速方法

> ID：12744771
> 
> 赞同：1
> 
> 时间：2012-10-05T10:56:53.977
> 
> 标签：python, optimization, numpy

我有一个 numpy 数组“图像”，它是一个二维数组，其中每个元素都有两个组件。我想将其转换为另一个二维数组，其中每个元素都有三个组件。前两个和第三个是从前两个计算出来的，如下所示：

```
for x in range(0, width):
    for y in range(0, height):
        horizontal, vertical = image[y, x]

        annotated_image[y, x] = (horizontal, vertical, int(abs(horizontal) > 1.0 or abs(vertical) > 1.0)) 
```

此循环按预期工作，但与其他 numpy 函数相比非常慢。对于中等大小的图像，这需要不可接受的 30 秒。

是否有不同的方法可以进行相同的计算但速度更快？不必保留原始图像数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:08:27.320

您可以只分离图像的组件并使用多个图像来代替：

```
image_component1 = image[:, :, 0]
image_component2 = image[:, :, 1]

result = (np.abs(image_component1) > 1.) | (np.abs(image_component2) > 1.) 
```

如果您出于某种原因需要您指定的布局，您也可以构建另一个 3D 图像：

```
result = np.empty([image.shape[0], image.shape[1], 3], dtype=image.dtype)

result[:, :, 0] = image[:, :, 0]
result[:, :, 1] = image[:, :, 1]
result[:, :, 2] = (np.abs(image[:, :, 0]) > 1.) | (np.abs(image[:, :, 1]) > 1.) 
```

# html - 仅当有一些行要显示时才显示一个表

> ID：12744772
> 
> 赞同：2
> 
> 时间：2012-10-05T10:56:55.240
> 
> 标签：html, ajax, asp-classic

我需要创建一个表，只有当它里面有一些内容（行）时才应该在页面中显示。该表的目的主要是显示用户导入的数据（Excel 表）。我在 ASP 中进行所有编码，我该如何完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:11:08.330

实际上，您可以保留表格`hidden`并在页面加载时检查其中是否`table`有行，例如

**HTML**

```
<table id="xldata" style="display:none">
<thead>
  <th>Colimn One</th><th>Colimn Two</th>
</thead>
<tbody>    
  <tr><td>Cell1</td><td>Cell2</td></tr>
  <tr><td>Cell3</td><td>Cell4</td></tr>
<tbody> 
```

**JS**

```
$(function(){
    if($('table#xlData tbody').children().size()) $('table#xlData').show();
}); 
```

但是你应该使用一个`id`表，即`id="xldata"`。

[**演示**](http://jsbin.com/ibaceb/5/edit)。

# python - Python numpy 中的“zip()”等价物是什么？

> ID：12744778
> 
> 赞同：65
> 
> 时间：2012-10-05T10:57:21.020
> 
> 标签：python, arrays, numpy

我正在尝试使用 numpy 数组执行以下操作：

```
x = [(0.1, 1.), (0.1, 2.), (0.1, 3.), (0.1, 4.), (0.1, 5.)]
normal_result = zip(*x) 
```

这应该给出以下结果：

```
normal_result = [(0.1, 0.1, 0.1, 0.1, 0.1), (1., 2., 3., 4., 5.)] 
```

但是如果输入向量是一个 numpy 数组：

```
y = np.array(x)
numpy_result = zip(*y)
print type(numpy_result) 
```

它（预期）返回：

```
<type 'list'> 
```

问题是我需要在此之后将结果转换回 numpy 数组。

**我想知道的是，是否有一个有效的 numpy 函数可以避免这些来回转换？**

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-05T11:02:58.517

你可以直接转...

```
>>> a = np.array([(0.1, 1.), (0.1, 2.), (0.1, 3.), (0.1, 4.), (0.1, 5.)])
>>> a
array([[ 0.1,  1\. ],
       [ 0.1,  2\. ],
       [ 0.1,  3\. ],
       [ 0.1,  4\. ],
       [ 0.1,  5\. ]])
>>> a.T
array([[ 0.1,  0.1,  0.1,  0.1,  0.1],
       [ 1\. ,  2\. ,  3\. ,  4\. ,  5\. ]]) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-05T11:05:08.023

尝试使用[dstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html)：

```
>>> from numpy import *
>>> a = array([[1,2],[3,4]]) # shapes of a and b can only differ in the 3rd dimension (if present)
>>> b = array([[5,6],[7,8]])
>>> dstack((a,b)) # stack arrays along a third axis (depth wise)
array([[[1, 5],
        [2, 6]],
       [[3, 7],
        [4, 8]]]) 
```

所以在你的情况下，它将是：

```
x = [(0.1, 1.), (0.1, 2.), (0.1, 3.), (0.1, 4.), (0.1, 5.)]
y = np.array(x)
np.dstack(y)

>>> array([[[ 0.1,  0.1,  0.1,  0.1,  0.1],
    [ 1\. ,  2\. ,  3\. ,  4\. ,  5\. ]]]) 
```

# python - 一系列 numpy 数组元素的格式化字符串

> ID：12744779
> 
> 赞同：7
> 
> 时间：2012-10-05T10:57:22.677
> 
> 标签：python, arrays, numpy, formatted-text

这对我来说似乎微不足道，但我仍然缺少一种有效且“干净”的方式来将一系列属于 numpy 数组（as `aa[:,:]`）的元素插入到要打印/写入的格式化字符串中。事实上，扩展的逐元素规范语法如下：

```
formattedline= '%10.6f  %10.6f  %10.6f' % (aa[ii,0], aa[ii,1], aa[ii,2]) 
file1.write(formattedline+'\n') 
```

在工作中。

但我还没有找到任何其他更短的解决方案，因为：

```
formattedline= '%10.6f  %10.6f  %10.6f' % (float(aa[ii,:]))
file1.write(formattedline+'\n') 
```

当然给出：`TypeError: only length-1 arrays can be converted to Python scalars`

或者：

```
formattedline= '%10.6f  %10.6f  %10.6f' % (aa[ii,:]) 
file1.write(formattedline+'\n') 
```

给出：`TypeError: float argument required, not numpy.ndarray`。我尝试过使用迭代器，但没有成功。

当然，当要打印多个元素时，这很有趣。

那么：我怎样才能结合迭代numpy数组和字符串格式的时尚？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T11:04:18.227

您可以将其转换为元组：

```
formattedline = '%10.6f  %10.6f  %10.6f' % ( tuple(aa[ii,:]) ) 
```

在更一般的情况下，您可以使用`join`：

```
formattedline = ' '.join('%10.6f'%F for F in aa[ii,:] ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:32:02.550

如果要将整个数组写入文件，请使用 np.savetxt：

```
np.savetxt(file1, aa, fmt = '%10.6f') 
```

参数可以是单一格式，`fmt`也可以是一系列格式，也可以是多格式字符串，如

```
'%10.6f  %5.6f  %d' 
```

# java - 我怎样才能最好地保护这个 javax.crypto 服务器客户端中的 IV 和密钥密码

> ID：12744784
> 
> 赞同：1
> 
> 时间：2012-10-05T10:57:51.003
> 
> 标签：java, android, encryption

我花了几天时间阅读这个和其他关于 javax.crypto
[在 Java 中使用块模式和初始化向量的教程](http://www.javamex.com/tutorials/cryptography/block_modes_java.shtml)

我下面的测试代码是一个将数据发送到服务器的客户端。

我读到了不同的块模式，CFB8 流模式似乎正在工作，因为我将任意大小的文件分成块。除了最后一个更小的块外，每个块都是 0.5MB，它们一个接一个地发送到将文件重新组合在一起的服务器。

我有几个问题：

1) 我应该在开始传输之前使用非对称加密公钥/私钥将 SecretKeySpec 密码和 IV 发送到服务器吗？

2) 用于保护 IV 的 SecretKeySpec 密码是什么？

**客户端加密数据**

```
Cipher cipher = Cipher.getInstance("AES/CFB8/NoPadding"); 
SecretKeySpec keySpec = new SecretKeySpec("password12345678".getBytes(), "AES");
cipher.init(Cipher.ENCRYPT_MODE, keySpec);

AlgorithmParameters params = cipher.getParameters();
byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();

out.write(iv); //Send IV to Server
out.flush();

// THE ENCRYPTET STREAM
cos = new CipherOutputStream(out, cipher);  

while ((val = byteArrayInputStream.read(buffer, 0, 1024)) > 0) {
       cos.write(buffer, 0, val);
       cos.flush();
}

cipher.doFinal() 
```

**服务器解密数据**

```
 byte[] iv = new byte[16];
    in.read(iv);

    Cipher cipher = Cipher.getInstance("AES/CFB8/NoPadding"); 
    SecretKeySpec keySpec = new SecretKeySpec("password12345678".getBytes(), "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(iv);
    cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);

    cos = new CipherInputStream(in, cipher);        

   while (offset < tmpBuffer.length && (numRead=cos.read(tmpBuffer, offset,      tmpBuffer.length-offset)) >= 0) {
      offset += numRead;
      savedFileSize = savedFileSize + numRead;
   }    
   // CREATE HASH FROM THE DOWNLOAD CHUNK PART
   String retCrC = DoEncryption.getCRC32ChecksumFromArray(tmpBuffer);
   String hash2 = Long.toHexString( Long.parseLong(retCrC) );

   // TEST SO THE REMOTE HASH MATCH THE LOCAL HASH
   if(!hash1.equals(hash2)){
   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:37:10.530

通常通过将 IV 包含在 HMAC 中来保护 IV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:11:13.217

> 我应该在开始传输之前使用非对称加密公钥/私钥将 SecretKeySpec 密码和 IV 发送到服务器吗？

这就是 SSL 的大致工作方式，尽管通常是相反的。您不能使用 SSL/TLS 的任何原因？生成您自己的安全传输协议并非易事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:05:41.207

为了保护我在问题中的简单代码，可以使用 SSL/TSL。

使用 SSL/TSL 和博客中的自签名证书让一切正常工作：
[@Marcus Krantz 的博客创建自签名证书](http://blog.callistaenterprise.se/2011/11/24/creating-self-signed-certificates-for-use-on-android/)

我必须说这不适合胆小的人..:)

顺便说一句，当对 *.bks 文件使用 keytool 时，是否只有 bcprov-jdk15on-146 有效，而 bcprov-jdk15on-147 无效？

# css - 以第三方菜单为中心

> ID：12744786
> 
> 赞同：1
> 
> 时间：2012-10-05T10:57:55.457
> 
> 标签：css, menu, header, center

我的标题有很多问题。

我正在使用 joomla 2.5，并且我已经为标题安装了 maximenuck，但我无法将它置于屏幕中心。

你可以在这里看到我的网站：[http](http://www.barataweb.es/lourdes/) ://www.barataweb.es/lourdes/ 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:04:44.690

我希望这段代码可以帮助你

```
.maximenuck{
width: 960px;
margin: 0 auto;
} 
```

将此代码粘贴到您的 .css 文件中并检查它是否天气其中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:14:43.263

首先，您对展示位置做了一些奇怪的事情（#wrapper2，#main）

即使使用 Selva 的答案，您也无法将其居中，因为 ul 具有**position:absolute**。将其更改为相对，然后应用 Selva 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:12:01.560

...................... ...... 嗨，现在已经习惯了这个 css

```
 #header ul.menu.maximenuck {
        margin-top: 44px;
        position: static;
        width: 1000px;
    } 
```

您的导航定义`position absolute`不是您首先更改为`position`，现在根据您的设计定义您的`navi` `min width`应用**css**

# javascript - Angularjs 表排序与 ng-repeat

> ID：12744788
> 
> 赞同：9
> 
> 时间：2012-10-05T10:57:58.707
> 
> 标签：javascript, angularjs, sorting, html-table

我有一个 HTML 表格，想`$scope.records`通过单击表格标题（`$scope.headers`在 ctrl 中）对我的记录（在 ctrl 中）进行排序，

谁能解释为什么会这样：

```
<th>
    <a ng-click="sortColumn=headers[0];reverse=!reverse">{{ headers[0] }}</a>
</th>
<th>
    <a ng-click="sortColumn=headers[1];reverse=!reverse">{{ headers[1] }}</a>
</th> 
```

这不会：

```
<th ng-repeat="header in headers">
    <a ng-click="sortColumn=headers[$index];reverse=!reverse">{{ headers[$index] }}</a>
</th> 
```

这是记录的代码：

```
<tr ng-repeat="arr in records | orderBy:sortColumn:reverse">
    <td ng-repeat="val in arr" ng-bind-html-unsafe="arr[headers[$index]]</td>
</tr> 
```

我的表中有 58 列，所以循环遍历表头会更好......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T15:21:37.603

As David suggested this is likely scope related. Since [ngRepeat](http://docs.angularjs.org/api/ng.directive:ngRepeat) creates a new scope your `ngClick` is setting the `sortColumn` and `reverse` in its own child scope for each column header.

One way around this to ensure you are modifying the values in the same scope would be to create a function on the scope and call that in your ngClick passing in the index:

```
$scope.toggleSort = function(index) {
    if($scope.sortColumn === $scope.headers[index]){
        $scope.reverse = !$scope.reverse;
    }                    
    $scope.sortColumn = $scope.headers[index];
} 
```

with this as your markup:

```
<th ng-repeat="header in headers">
    <a ng-click="toggleSort($index)">{{ headers[$index] }}</a>
</th> 
```

[Here is a fiddle](http://jsfiddle.net/3dsqH/) with an example.

* * *

Another option would be to bind to a non-primitive type like this (the child scopes will be accessing the same object):

```
$scope.columnSort = { sortColumn: 'col1', reverse: false }; 
```

with this as your markup:

```
<th ng-repeat="header in headers">
    <a ng-click="columnSort.sortColumn=headers[$index];columnSort.reverse=!columnSort.reverse">{{ headers[$index] }}</a>
</th> 
```

[Here is a fiddle](http://jsfiddle.net/uRPSL/1/) with an example.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:02:41.727

扩展 Gloopy 的答案，另一种选择是修改原始类型的 ng-repeat 中的父级属性：

```
<a ng-click="$parent.sortColumn=headers[$index];$parent.reverse=!$parent.reverse">{{ headers[$index] }} 
```

[这是一个小提琴](http://jsfiddle.net/mrajcok/q3Nfu/)。

但是请注意， $parent 不是[scope](http://docs.angularjs.org/api/ng.$rootScope.Scope)的记录属性，所以这有点像 hack，所以使用风险自负。

我希望 AngularJS 有更好的方法来处理这些由 ng-repeat、ng-switch 等创建的“内部作用域”，因为我们经常需要修改作为基元的父作用域属性。

另请参阅 Gloopy 关于范围继承的富有洞察力的评论，因为它与原语和非原语有关[。](https://stackoverflow.com/a/12415198/215945)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T01:23:44.143

我不知道您的记录中有什么类型的数据，所以对于我的示例，我只使用了一个 JSON 值数组。我用 Angular 为我的 Javascript 尝试了几个不同的排序插件，但没有任何效果。从长远来看，我发现你不一定需要那些额外的东西。

由于 AngularJS 擅长处理 javascript 数据结构以在 HTML 中显示，因此您只需重新排列内存中的 javascript-arrays，AngularJS 就会接受这些更改。**此示例允许单击表的标题，这将触发基于该列数据类型的排序。如果它已经在该列上排序，它将对该列进行反向排序。**类型检测是通过提供的 isNumeric() 函数完成的，并且进行了两个微小的调整：

1.  添加了检查是否将“#”符号作为标题输入并在 toggleSort 方法中排序为数字。如果愿意，用户可以轻松地将其删除。
2.  当 toggleSort 尝试按字母顺序排序时，如果它捕获到 TypeError，它会切换到对数字进行排序。

```
var app = angular.module("app", []);

app.controller("MainController", function($scope) {

  $scope.samplePositions = [
  	{"#": "1", "Unique ID": "100130", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 1", "Status": "Available"},
  	{"#": "2", "Unique ID": "100131", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 2", "Status": "Available"},
  	{"#": "3", "Unique ID": "100132", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 3", "Status": "Available"},
  	{"#": "4", "Unique ID": "100133", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 4", "Status": "Available"},
  	{"#": "5", "Unique ID": "100134", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 5", "Status": "Checked Out"},
  	{"#": "6", "Unique ID": "100135", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 6", "Status": "Checked Out"},
  	{"#": "7", "Unique ID": "100136", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 7", "Status": "Checked Out"},
  	{"#": "8", "Unique ID": "100137", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 8", "Status": "Checked Out"},
  	{"#": "9", "Unique ID": "100138", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 1 - Box 1 - Position 1", "Status": "Available"},
  	{"#": "10", "Unique ID": "100139", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 2 - Box 1 - Position 1", "Status": "Available"},
  	{"#": "11", "Unique ID": "100140", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 2 - Box 1 - Position 2", "Status": "Available"},
  	{"#": "12", "Unique ID": "100141", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 2 - Box 1 - Position 3", "Status": "Lost"},
  	{"#": "13", "Unique ID": "100142", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 2 - Box 1 - Position 4", "Status": "Lost"},
  	{"#": "14", "Unique ID": "100143", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 3 - Box 1 - Position 1", "Status": "Available"},
  	{"#": "15", "Unique ID": "100144", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 3 - Box 1 - Position 2", "Status": "Available"},
  	{"#": "16", "Unique ID": "100145", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 4 - Box 1 - Position 1", "Status": "Checked Out"},
  	{"#": "17", "Unique ID": "100146", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 4 - Box 1 - Position 2", "Status": "Available"},
  	{"#": "18", "Unique ID": "100147", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 4 - Box 1 - Position 3", "Status": "Available"},
  	{"#": "19", "Unique ID": "100148", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 4 - Box 1 - Position 4", "Status": "Checked Out"},
  	{"#": "20", "Unique ID": "100149", "Name": "Book", "Section": "Paraguay", "Position": "Shelf 1 - Rack 5 - Box 1 - Position 1", "Status": "Available"}		
  ]

  // Dynamically get the entry headers to use with displaying the nested data via header-key lookups
  // Assumes all lines contain same key-text data
	$scope.samplePositionsHeaderKeys = []; // Contains only the key-data, not the values
	for (var key in $scope.samplePositions[0]) {
		if ($scope.samplePositions[0].hasOwnProperty(key)) {
			$scope.samplePositionsHeaderKeys.push(key);
		}
	}

		/**
		 * Determine if the input value is a number or not.
	   * @param n The input value to be checked for numeric status.
		 * @returns true if parameter is numeric, or false otherwise.
		 * 
		 * This method uses the following evaluations to determine if input is a numeric:
		 * 
		 * 		(5); // true  
		 * 		('123'); // true  
		 * 		('123abc'); // false  
		 * 		('q345'); // false
		 * 		(null); // false
		 * 		(""); // false
		 *		([]); // false
		 * 		('   '); // false
		 * 		(true); // false
		 * 		(false); // false
		 * 		(undefined); // false
		 * 		(new String('')); // false
		 * 
		 * @author C.D. (modified by)
		 * @original https://stackoverflow.com/a/1421988/10930451
		 * 
		 */
		function isNumeric(n) {
			if (!isNaN(parseFloat(n)) && !isNaN(n - 0) && n !== null && n !== "") {
				return true;
			}
			return false;
		}

		/**
		 * Column Sort Method (generic). Sort based on target column header or reverse sort if already selected on that.
		 * @param dataSource The array of JSON data to be sorted
		 * @param headers The array of JSON object-keys (table column headers) to be referenced
		 * @param index The target JSON object-key to sort the table columns based upon
		 * 
		 * @author C.D.
		 */
		$scope.lastSortIndex = 0;
		$scope.toggleSort = function (dataSource, headers, index) {
			if ($scope.lastSortIndex === index) {
				dataSource.reverse();
			}
			else {
				var key = headers[index];
				if (key === "#" || isNumeric(dataSource[key])) { // Compare as numeric or on '#' sign
					dataSource.sort((a, b) => parseFloat(a[key]) - parseFloat(b[key]));
				}
				else // Compare as Strings
				{
					try { // Attempt to sort as Strings
						dataSource.sort((a, b) => a[key].localeCompare(b[key]));
					} catch (error) {
						if (error.name === 'TypeError') { // Catch type error, actually sort as Numeric
							dataSource.sort((a, b) => parseFloat(a[key]) - parseFloat(b[key]));
						}
					}
				}
				$scope.lastSortIndex = index;
			}
		}

});
```

```
<html ng-app="app">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>AngularJS - Hello World</title>
  <script data-require="jquery@*" data-semver="3.1.1" src="https://cdn.jsdelivr.net/npm/jquery@3.1.1/dist/jquery.min.js"></script>
  <script data-require="angular.js@1.3.13" data-semver="1.3.13" src="https://code.angularjs.org/1.3.13/angular.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

  <link rel="stylesheet" href="style.css" />
  <script src="script.js"></script>
</head>

<body ng-controller="MainController">
  <div class="container">
    <table class="table table-hover	table-sm">
  		<thead>
  			<tr>
  				<th ng-repeat="header in samplePositionsHeaderKeys">
  					<a ng-click="toggleSort(samplePositions, samplePositionsHeaderKeys, $index)">{{ header }}</a>
  				</th>
  			</tr>
  		</thead>

  		<tbody>
  			<!-- Data is nested, so double-repeat to extract and display -->
  			<tr ng-repeat="row in samplePositions" >
  				<td ng-repeat="key in samplePositionsHeaderKeys">
  					{{row[key]}}
  				</td>
  			</tr>
  		</tbody>
  	</table>
  </div>
</body>

</html>
```

我已经整理了一个有效的[Plunker 示例](https://plnkr.co/edit/2nugXqsI2uXdltH6as4C?p=preview)来演示。只需单击标题，它们就会在内存中对数组进行排序，AngularJS 将在其中获取更改并刷新 DOM 的该部分。

# c# - EXT JS 改变行列

> ID：12744803
> 
> 赞同：0
> 
> 时间：2012-10-05T10:58:40.630
> 
> 标签：c#, extjs

我看到了一些关于如何更改网格行颜色的帖子。我试图这样实现它：

网格：

```
viewConfig: {
    stripeRows: false,
    getRowClass: function (rec, idx, rowPrms, ds) {
        return 'master-row'
    }
} 
```

CSS：

```
master-row {background: red; color:Green} 
```

绿色显示正常，背景不是。我也试过了`background-color`，但没有运气

我可能会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:35:55.480

用这个：

```
.master-row .x-grid-cell {background: red; color:Green} 
```

您正在添加一个类，因此您需要使用 css 类选择器（一个点）。要为单元格着色，您需要为底层网格单元格指定颜色和背景颜色

# java - NoHandlerFoundException 中的“参数映射”在哪里设置？

> ID：12744806
> 
> 赞同：6
> 
> 时间：2012-10-05T10:58:46.790
> 
> 标签：java, spring, spring-mvc, portlet

我正在尝试找出为什么会引发以下异常。

我认为这是因为在“查看”模式下访问了一个 portlet，但出于某种原因，我不知道 spring servlet 容器无法为请求提供服务，这是正确的吗？

以下异常集中的“参数映射”在哪里？

> org.springframework.web.portlet.NoHandlerFoundException：没有为portlet请求找到匹配的处理程序方法：模式“视图”，阶段“ACTION_PHASE”，参数映射[空]

这是控制器：

```
@Controller
@RequestMapping("VIEW")
public class DetailsController {
    @RequestMapping("VIEW")
    public String showDetails(final ModelMap modelMap, final RenderRequest renderRequest) {
        return "allDetails/details";
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T19:57:04.367

这是我可以提出的 3 个想法（知道如何调用控制器会有所帮助）。尝试其中一种或混合使用，然后告诉我它是否有效。

**想法 1：**删除`("VIEW")`showDetails @RequestMapping 注释。

```
...
public class DetailsController {

    @RequestMapping
    public String showDetails(final ModelMap modelMap, final RenderRequest renderRequest) {
        return "allDetails/details";
    }

} 
```

如果您的调用 JSP 有这样的东西，这可能会起作用：`<portlet:actionURL/>`: showDetails 将是默认的渲染方法。

**想法 2：**为您的 @RequestMapping 方法注释指定操作参数。

```
...
public class DetailsController {

    @RequestMapping(params = "action=viewDetails")
    public String showDetails(final ModelMap modelMap, final RenderRequest renderRequest) {
        ...
    }

} 
```

如果您的调用 JSP 有这样的东西，这可能会起作用：

```
<portlet:actionURL ... >
    <portlet:param name="action" value="viewDetails">
</portlet:actionURL> 
```

**想法3：**为动作阶段添加一个空方法。

```
...
public class DetailsController {

    @RequestMapping(params = "action=viewDetails")    // render phase
    public String showDetails(final ModelMap modelMap, final RenderRequest renderRequest) {
        ...
    }

    ...
    // Empty method
    @RequestMapping(params = "action=viewDetails")    // action phase
    public void actionMethod() {
    }

} 
```

如果您的调用 JSP 有这样的东西，这可能会起作用：

```
<portlet:actionURL ... >
    <portlet:param name="action" value="viewDetails">
</portlet:actionURL> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:03:17.637

首先要在这里检查几件事：

1.  是否有任何参数从 jsp 传递到控制器？
2.  是否有默认的 Action 方法来处理空参数场景？

现在，如果对第一个问题的回答是肯定的，那么您的 jsp 应该有类似的 actionURL 标记...

```
 <portlet:actionURL var="myAction">
           <portlet:param name="paramName" value="paramVal" />
        </portlet:actionURL>
        <form:form action="${myAction}"... 
```

以及它在Controller中对应的ActionMapping...

```
 @ActionMapping(params = "paramName=paramVal" )
        public void myAction.... 
```

如果第二个问题的答案是否定的，那么在控制器中定义一个默认的操作方法，比如......

```
 @ActionMapping(param="!action") 
       public void defaultAction.... 
```

希望这可以帮助！

# iphone - iPhone中标签栏标题的问题？

> ID：12744812
> 
> 赞同：0
> 
> 时间：2012-10-05T10:59:01.720
> 
> 标签：iphone, ios, uinavigationbar, title, tabbar

目前我正在使用 iPhone 应用程序，我有四个屏幕，如登录、A、B 和 c 等。用户在登录屏幕中输入用户名和密码字段，然后按登录按钮

```
-(void)LoginButtonMethod
{

    A *a = [[A alloc]init];
    B *b = [[B alloc]init];
    C *c = [[C alloc]init];

    UINavigationController *navi1 = [[UINavigationController alloc] initWithRootViewController:a];
    UINavigationController *navi2 = [[UINavigationController alloc] initWithRootViewController:b];
    UINavigationController *navi3 = [[UINavigationController alloc] initWithRootViewController:c];

    UITabBarController *TabBar = [[UITabBarController alloc] init];
    TabBar.delegate = self;
    TabBar.viewControllers = [NSArray arrayWithObjects:navi1, navi2, navi3, nil]; 
    navi1.tabBarItem.title=@"A";
    navi2.tabBarItem.title=@"B";
    navi3.tabBarItem.title=@"C";

    [self.navigationController pushViewController:TabBar animated:YES]; 
} 
```

然后我为每个类设置导航栏标题，例如 A 作为 facebook，b 作为 yahoo，c 作为 google。

最后我运行应用程序，标签栏标题显示在 A，B，C 然后我选择第三个标签栏项目（C），此时标签栏标题更改谷歌。我无法解决这个问题，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:18:35.347

您可以通过将 Tabbar 推送到控制器

**任何一个**

```
[self.navigationController pushViewController:tabBar animated:YES]; 
```

**或者**

```
[self presentModalViewController:tabBar animated:YES]; 
```

希望这能解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:12:42.530

苹果在其开发者文档中声明如下：

```
 "You never want to push a tab bar controller onto the navigation stack of a navigation controller. Doing so creates an unusual situation whereby the tab bar appears only while a specific view controller is at the top of the navigation stack. Tab bars are designed to be persistent, and so this transient approach can be confusing to users." 
```

尝试展示它

```
[self presentModalViewController:tabBar animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:01:20.717

在这

`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`

每个视图控制器的方法放下面的代码..

```
self.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"Comment" image:[UIImage imageNamed:@"Icon-AddComment.png"] tag:0];

self.navigationItem.title = @"Comment"; 
```

有用

# ant - 蚂蚁的 Findbugs 问题

> ID：12744819
> 
> 赞同：3
> 
> 时间：2012-10-05T10:59:34.007
> 
> 标签：ant, findbugs

发现错误：

```
[findbugs] Executing findbugs from ant task
[findbugs] Running FindBugs...
[findbugs] java.lang.NoClassDefFoundError: org/apache/bcel/classfile/ClassFormtException
[findbugs] Caused by: java.lang.ClassNotFoundException: org.apache.bcel.classfile.ClassFormatException
[findbugs]     at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
[findbugs]     at java.security.AccessController.doPrivileged(Native Method)
[findbugs]     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
[findbugs]     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
[findbugs]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
[findbugs]     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
[findbugs] Could not find the main class: edu.umd.cs.findbugs.FindBugs2\.  Program will exit.
[findbugs] Exception in thread "main" 
```

尽管我将 findbugs 和基本 jar 文件保存在所需的文件夹中，但我在使用 ant 执行 findbugs 时遇到了这个问题。

我使用 findbugs 1.3.2 和 bcel 5.2。

如何解决这个问题？

```
[findbugs] Output saved to bugs/reports/findbugs.xml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:59:04.700

[findbugs 文档](http://findbugs.sourceforge.net/manual/anttask.html)说明如下：

> 笔记
> 
> 强烈建议您将 Ant 任务与它所包含的 FindBugs 版本一起使用。我们不保证 Ant 任务 Jar 文件可以与任何版本的 FindBugs 一起使用，除了它包含的版本。

您没有指明您使用的是哪个版本的 ANT 任务....

我建议使用像[ivy](http://ant.apache.org/ivy/)这样的依赖管理器来处理复杂的类路径，如下所示：

```
<project name="demo" default="findbugs" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init" description="Use ivy to manage ANT tasks">
        <ivy:cachepath pathid="findbugs.path">
            <dependency org="com.google.code.findbugs" name="findbugs-ant" rev="2.0.1" conf="default"/>
        </ivy:cachepath>

        <taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask" classpathref="findbugs.path"/>
    </target>

    <target name="findbugs" depends="init">
        ..
        <findbugs ..
        ..
    </target>

</project> 
```

[最后， Sonar](http://www.sonarsource.org/)的使用也值得考虑。Sonar ANT 任务为您管理所有 findbugs 依赖项，还运行其他工具，如 checkstyle 和 PMD。

# xsd - 可空 SOAP 标头

> ID：12744821
> 
> 赞同：1
> 
> 时间：2012-10-05T10:59:43.637
> 
> 标签：xsd, wsdl

我想允许我的一些 SOAP 标头元素是可空的。这对于正文元素是可能的，但我不确定标题元素是否允许这样做。

在下面的示例消息中，我想允许 MessageDateTime 为空。

```
<definitions  xmlns="http://schemas.xmlsoap.org/wsdl/"
              xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"
              xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
              xmlns:tns="http://mycompany.com/repositoryservice">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema"
            attributeFormDefault="qualified"
            elementFormDefault="qualified"
            targetNamespace="http://mycompany.com/repositoryservice">
      <element name="MessageDateTime" type="dateTime" />
      <element name="SaveRequest">
        <!-- complexType -->
      </element>
    </schema>
  </types>
  <message name="SaveRequest_Headers">
    <part name="MessageDateTime" element="tns:MessageDateTime" />
  </message>
  <message name="SaveRequest">
    <part name="parameters" element="tns:SaveRequest" />
  </message>
  <binding name="RepositoryServiceBinding" type="tns:IRepositoryService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="Save">
      <soap:operation soapAction="http://mycompany.com/repositoryservice/Save" style="document" />
      <input name="SaveRequest">
        <soap:header message="tns:SaveRequest_Headers" part="MessageDateTime" use="literal" />
        <soap:body use="literal" />
      </input>
    </operation>
  </binding>
  <!-- service, portType -->
</definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:17:53.397

只要定义允许，它就被允许。在您的情况下，您所要做的就是将 添加`nillable="true"`到元素的定义中。.NET w/ WCF 上的结果如下所示：

```
 [System.ServiceModel.MessageHeaderAttribute(Namespace="...")]
    [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)]
    public System.Nullable<System.DateTime> MessageDateTime; 
```

# telerik - Telerik 2012 年第二季度报告中的复选框，未显示选中或未选中。始终未定

> ID：12744823
> 
> 赞同：0
> 
> 时间：2012-10-05T10:59:51.187
> 
> 标签：telerik, telerik-reporting

我在使用 2012 年第二季度的 Telerik 报告开发基于 Web 的报告时遇到了一个问题。我通过数据绑定字段放置了复选框并分配了值。(=Field.) 绑定到复选框的列给出 1 或 0，连续表示真假。我从复选框属性中为 TrueValue 分配了 1，为 FalseValue 分配了 0。

当我运行报告时，所有复选框都显示未确定复选框的图像，从不显示任何选中或未选中的框。我交叉检查，绑定到报告的数据集正在为复选框获取正确的值。

你能帮我解决这个问题吗？我不知道我哪里出错了？我做了我在报告文档中读到的内容， [http://www.telerik.com/help/reporting/report-items-checkbox.html](http://www.telerik.com/help/reporting/report-items-checkbox.html)

我正在使用 asp.net 3.5 和 sqlserver2008R2。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:55:55.837

我认为您提供的示例涉及`VARCHAR`列。我猜如果您绑定了 1 和 0，那么您正在使用`BIT`DataType（它将由ASP.Net`true`和`false`在 ASP.Net 中翻译）。

因此，您应该尝试使用`true`代替 1 和 ，`false`而不是 0。

# msbuild - 如何使用 Move MSBuild 任务和通配符移动一堆文件？

> ID：12744826
> 
> 赞同：12
> 
> 时间：2012-10-05T11:00:15.773
> 
> 标签：msbuild

我有一个文件夹，其中的文件的名称以 . 开头`App_Web_`和结尾`.dll`。我不知道这些部分之间有什么，也不知道文件的数量。我需要 MSBuild 将这些文件移动到另一个文件夹中。

所以我写了这个：

```
<Move
    SourceFiles="c:\source\App_Web_*.dll"
    DestinationFolder="c:\target"
/> 
```

但是当目标运行时，我得到以下输出：

```
error MSB3680: The source file "c:\source\App_Web_*.dll" does not exist. 
```

文件肯定在那里。

我究竟做错了什么？如何移动文件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T12:33:10.977

您不能直接在任务参数中使用正则表达式。您需要创建一个包含要移动的文件列表的项目并将其内容传递给任务：

```
<ItemGroup>
    <FilesToMove Include="c:\source\App_Web_*.dll"/>
</ItemGroup> 
```

MSBuild 将扩展正则表达式，然后将其传递给任务执行器。所以稍后在某些目标中，您可能会调用`Move`任务：

```
<Target Name="Build">
    <Move
        SourceFiles="@(FilesToMove)"
        DestinationFolder="C:\target"
    />
</Target> 
```

# f# - 内置“< > compare”不适用于“IComparable” “？

> ID：12744831
> 
> 赞同：0
> 
> 时间：2012-10-05T11:00:26.573
> 
> 标签：f#, comparison

我有一个有区别的联盟，我希望使用像它这样的内置运算符`> < compare max`。

```
[<CustomComparison>]
type SymbolType = 
    | A
    | B
    | C
    | D

    interface IComparable<SymbolType> with
        member x.CompareTo y =
            match x, y with
            | A, A-> 0
            | A, _ -> 1
            | _, A-> -1
            | _, _ -> 0 
```

我知道我可以使用`IComparable`，但是我必须进行`null`检查，更糟糕的是我必须像`(SymbolType) y`我认为的那样进行投射，这会很耗时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:41:44.983

您*已经*可以在类型上使用标准比较运算符。内置实现使用各个案例的声明顺序，因此：

```
type SymbolType =  A | B | C | D 

// Behavior of built-in comparison
A < B   = true
D <= C  = false
max B D = D 
```

这看起来很脆弱，所以也许它不是最好的依靠。如果您有不包含其他值的案例，您可以使用*枚举*而不是有*区别的联合*并定义您希望的排序：

```
type SymbolType =  
  | A = 1
  | B = 2
  | C = 4
  | D = 3

// The order is now defined by your code
SymbolType.C < SymbolType.D = false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:11:48.410

您可以使用瘦包装器实现所需的方法：

```
[<CustomComparison>] 
[<CustomEquality>] 
type SymbolType = 
    | A
    | B
    | C
    | D
    override x.Equals y =
       match y with
       | :? SymbolType as t -> (((x :> IComparable<_>).CompareTo) t)=0
       | _ -> false
    interface IComparable with
        member x.CompareTo y =
            match y with
            | :? SymbolType as t -> ((x :> IComparable<_>).CompareTo) t
            | _ -> failwith "bad comparison"
    interface IComparable<SymbolType> with
        member x.CompareTo y =
            match x, y with
            | A, A-> 0
            | A, _ -> 1
            | _, A-> -1
            | _, _ -> 0 
```

这种方式确实避免了任何重复输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:18:44.310

在 CLR 上，运算符是静态函数，因此您不能在接口中定义它们。但是，如果您将接口用作泛型函数的类型参数的约束，也可以避免装箱。

```
int Compare<T>(T lhs, T rhs) where T : IComparable<T>
{
  return lhs.CompareTo(rhs) // no boxing
} 
```

抱歉，我对 F# 不熟悉，所以我用 C# 编写了示例。

# android - onCreateDialog 中的 Android EditText

> ID：12744834
> 
> 赞同：1
> 
> 时间：2012-10-05T11:00:29.767
> 
> 标签：android

在我的 longCLick 应用程序中，我通过这种方法创建了 AlertDialog：

```
 @Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_TEXT_ENTRY:
        // This example shows how to add a custom layout to an AlertDialog
        LayoutInflater factory = LayoutInflater.from(this);
        final View textEntryView = factory.inflate(R.layout.custom_dialog, null);
        final EditText cdet11 = (EditText) findViewById(R.id.cdet1);
        final TextView tv11 = (TextView) findViewById(R.id.buname1);
        return new AlertDialog.Builder(Main.this)
            .setIcon(R.drawable.icon)
            .setTitle("Title")
            .setView(textEntryView)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    android.os.Debug.waitingForDebugger();
                    String string1 = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getString("butname11", "");
                    String ss1 = cdet11.getText().toString();
                    getSharedPreferences("PREFERENCE", MODE_PRIVATE)
                    .edit()
                    .putString("butname11", ss1 )
                    .commit();
                    String string11 = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getString("butname11", "");
                    tv11.setText(string11);
                    /* User clicked OK so do some stuff */
                }
            })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    /* User clicked cancel so do some stuff */
                }
            })
            .create();
    }
    return null;
} 
```

但是，我犯了这样的错误......

```
10-05 14:54:25.319: E/AndroidRuntime(6331): java.lang.NullPointerException
10-05 14:54:25.319: E/AndroidRuntime(6331):     at com.home.Main$3.onClick(Main.java:166)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at android.os.Looper.loop(Looper.java:144)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at android.app.ActivityThread.main(ActivityThread.java:4937)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at java.lang.reflect.Method.invokeNative(Native Method)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at java.lang.reflect.Method.invoke(Method.java:521)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-05 14:54:25.319: E/AndroidRuntime(6331):     at dalvik.system.NativeStart.main(Native Method) 
```

错误发生在

```
String ss1 = cdet11.getText().toString(); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:02:23.210

将 View 引用添加到这些，

```
 final EditText cdet11 = (EditText) findViewById(R.id.cdet1);
        final TextView tv11 = (TextView) findViewById(R.id.buname1); 
```

像这样，

```
 final EditText cdet11 = (EditText)textEntryView. findViewById(R.id.cdet1);
        final TextView tv11 = (TextView)textEntryView. findViewById(R.id.buname1); 
```

只有当您提供可以找到元素的视图时，android 才会知道在哪里寻找。

如果不是，它会查看您的 Activity 的 ContentView 并抛出 NPE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:12:33.000

像这样使用

```
 private void CreateAlertDialog (final String type) {       

    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Title");
    alert.setMessage("Message");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            String value = input.getText().toString();

        }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

        }
    });
    alert.show();

} 
```

# php - MySQL计算不同结果的数量

> ID：12744843
> 
> 赞同：0
> 
> 时间：2012-10-05T11:01:16.557
> 
> 标签：php, mysql, count, concat

如何找出 MySQL 中每个 DISTINCT CONCAT 的结果总数？

```
SELECT DISTINCT CONCAT (h, ' - ', a) AS ft FROM raw_score 
```

这有效并给了我这样的结果
1 - 0
2 - 2
1 - 1
0 - 1

但我也想知道最终得分发生了多少次，例如 1 - 0 可能发生了 10 次

对于每个结果，我都用这个再次查询数据库

```
SELECT COUNT(CONCAT(h, ' - ', a) AS ft_total) 
FROM raw_score 
WHERE ft_total = 'result_from_previous_query' 
```

但它不工作

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:03:37.097

```
select ft, count(*)
from (
   SELECT DISTINCT CONCAT (h, ' - ', a) AS ft 
   FROM raw_score
) t
group by ft 
```

或合并到一个查询中：

```
SELECT CONCAT (h, ' - ', a) AS ft, count(*)
FROM raw_score
group by CONCAT (h, ' - ', a) 
```

# sql-server-2008 - Sql 转换字符串值

> ID：12744846
> 
> 赞同：2
> 
> 时间：2012-10-05T11:01:36.277
> 
> 标签：sql-server-2008

我想将字符串值转换为浮动值，例如

```
User entered value      Expected Result
1/2                     0.5
1                       1
1/4                     0.25
1 1/2                   1.5 
```

如何在sql server中转换这种值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:38:20.753

不漂亮，但有效

```
SELECT CAST(CASE WHEN CHARINDEX('/', val) > 0 THEN SUBSTRING(val, 0, CHARINDEX('/', val)) 
                 ELSE val END AS float) /
       CAST(CASE WHEN CHARINDEX('/', val) > 0 THEN SUBSTRING(val, CHARINDEX('/', val) + 1, CHARINDEX('/', REVERSE(val)))
                 ELSE 1 END AS float)
FROM dbo.test12
WHERE CHARINDEX(' ', val) = 0
UNION ALL
SELECT CAST(SUBSTRING(val, 0, CHARINDEX(' ', val)) AS float) +
       CAST(SUBSTRING(val, CHARINDEX(' ', val), CHARINDEX('/', val) - CHARINDEX(' ', val)) AS float) /
       CAST(SUBSTRING(val, CHARINDEX('/', val) + 1, CHARINDEX('/', REVERSE(val))) AS float)
FROM dbo.test12
WHERE CHARINDEX(' ', val) > 0 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T20:50:59.760

这种事情最好在您的 GUI 中完成：在将表达式放入数据库之前评估表达式，而不是之后。如果您想保留原始用户输入，您也可以随时让您的 GUI 插入它。评估随机用户输入在任何系统中都是危险的，因此最好在数据库外部解析和/或评估输入，以限制潜在影响并使用更强大（或不太专业，如果您愿意）的编程语言比 TSQL。

说了这么多，您可以使用动态 SQL 做一些事情（假设您的输入始终采用您显示的格式）：

```
declare @input varchar(10)
set @input = '1 1/2'
set @input = replace(@input, ' ', '+')
exec('select cast(' + @input + '.0 as float)') 
```

但这有[动态 SQL 的](http://www.sommarskog.se/dynamic_sql.html)所有问题，包括信任用户输入。而且您不能在 TSQL 函数中使用动态 SQL，因此您不能方便地将其包装起来以便在查询中使用。当然，您可以在 TSQL 过程中使用游标或编写 CLR 函数或存储过程，但这种任务在数据库中感觉不合适。顺便说一句，[这个问题](https://stackoverflow.com/questions/9722782/storing-formula-equations-in-database-to-be-evaluated-later-sql-server-2005)非常相似。

# android - 同时键入两个编辑文本字段

> ID：12744848
> 
> 赞同：3
> 
> 时间：2012-10-05T11:01:46.350
> 
> 标签：android, android-edittext, android-softkeyboard

如何使用 android 上的软键盘弹出窗口在两个编辑文本框中键入内容。

例如，如果我在一个框中键入单词“cat”，那么它会显示在另一个框中。

如果无法做到这一点，那么有没有办法在屏幕上的其他地方显示输入框中的每个字母？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T11:05:12.730

为您的一个 EditText尝试这样的[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)

```
firstedittext.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            secondedittext.setText(firstedittext.getText() + "");
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {                
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    }); 
```

希望帮助

**编辑**

在您有其他导入的活动中添加这些行

```
import android.text.Editable;
import android.text.TextWatcher; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:04:53.287

为`TextWatcher`您的`EditTexts`. 现在在其中，获取 Editable 并将其设置为 Other `EditText`。

```
 EditText edit1=new EditText(this);
    EditText edit2=new EditText(this);

    edit1.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            edit2.setText(s);

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:05:43.957

使用[textwatcher](http://developer.android.com/reference/android/text/TextWatcher.html)编辑文本。在这里，您可以实现，当您在一个编辑文本中输入数据时，其他编辑文本也填充您正在输入的字符

```
 EditText et1 = (EditText)findViewById(R.id.edit01);
 EditText et2 = (EditText)findViewById(R.id.edit02);     
 et1.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        et2.setText(et1.getText().toString());
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {                
    }

    @Override
    public void afterTextChanged(Editable s) {
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:11:04.790

这是我的逻辑：

首先在您的第一个 Edittext 上添加文本观察器，您将在其中输入

```
OnCreate
et1= (EditText)findViewById(R.id.et1);
et2= (EditText)findViewById(R.id.et2);
et1.addTextChangedListener(addTextWatcher);
//now you need to add this

TextWatcher addTextWatcher = new TextWatcher() { 
    public void beforeTextChanged(CharSequence s, int start, int count,int after) {   

    }  
    public void onTextChanged(CharSequence s, int start, int before,int count) {  
        NewString= et1.getText().length();
    et2.settext(NewString);

   }
    public void afterTextChanged(Editable arg0) {

    }
        };

    public void afterTextChanged(Editable arg0) {   
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:05:51.977

在一个 EditText 上使用`TextWatcher`并在其中使用`EditText2.setText()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T11:07:21.140

实现一个[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)改变一个`EditView`或`TextView`在其[`onTextChanged()`](http://developer.android.com/reference/android/text/TextWatcher.html#onTextChanged%28java.lang.CharSequence,%20int,%20int,%20int%29)方法内部的文本。[`addTextChangeListener()`](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)使用方法在源视图上设置此观察者。

# android - Android 库工程

> ID：12744849
> 
> 赞同：0
> 
> 时间：2012-10-05T11:01:47.510
> 
> 标签：android, android-ndk, shared-libraries

**简介**：我有一个带有 Java (JNI) 包装器的本机库 (C++)。库引擎是 cpu 密集型的，我们不希望同时运行多个链接此库的应用程序，并且库引擎应返回复杂的对象。

**问题**：设计这样一个 Android 库的最佳方法是什么？

到目前为止，我只能找到 2 个有价值的示例：*OpenCV manager*和*Connectbot ssh-agent*。

我能想到几个解决方案：

*   **解决方案 1**：制作一个包装库功能的（绑定或 AIDL）服务。（服务应该在自己的空间中运行？还是在链接到它的应用程序的空间中运行？如果它在不同的应用程序空间（`System.load("/data/data/com.company.myLib/lib.so")`）中如何加载本机库。如何在 AIDL 中返回复杂对象？）。这应该是 Connectbot 的方式。

*   **解决方案 2**：将 lib 分为 2 个组件：

    1.  一个独立的包，它保留了本地库 + 一个管理器服务
    2.  一个 android lib-project，它只包含 Java 包装器，用户可以使用它来构建他们的应用程序。

    这应该是 OpenCV 管理器的方式。我不知道确切的细节，但这种方式不需要服务来接口并且可以只是`import com.company.myLib.LibWrapper`. 另一方面，LibWrapper 类应该执行`System.load("/data/data/com.company.myLib/lib.so")`. 正确的？

我个人会选择解决方案 2。不幸的是，Android 是一片新大陆，关于如何开发库的模型还不多。还有其他/更好的解决方案吗？还有其他需要考虑的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:18:41.093

考虑以下方案：您构建了一个“空”应用程序，它不包含任何活动、没有设置 - 只有清单、“管理应用程序”列表的图标和系统安装在 /data/data/ *package* /中的本机库lib目录。

这个本机库可以但不必公开 JNI 函数。在典型情况下，该库将是开源 LGPL 库的直接移植 - 例如 libdmtx.so。

“客户端”应用程序将为“外部”库调用**loadLibrary()** ，然后为其 JNI 包装器调用通常的**load() 。**此库的唯一目的是将 Java 方法转换为外部库的公共 C API。

JNI 包装器和相应的 Java 类可以作为 .jar 或源分发，它们不受外部库的 LGPL 许可证的约束。

恕我直言，这种方案是确保 Android 上符合 LGPL 的唯一方法：任何人都可以从开源重新编译“外部”库，将其打包为“空”应用程序并将其安装在他们的设备上。

关于您对同时访问库的担忧，我实际上怀疑它是否如此重要：高端设备有四个核心，每个核心比便宜设备上的一个核心更强大。OTOH，使用 Linux 同步方法（例如命名管道）来跟踪活动实例很容易。

# sql - 使用另一个表获取一列表

> ID：12744853
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:02:09.070
> 
> 标签：sql, database

我有问题要问。

假设我有 2 个数据库表。

```
Table1          Table2
------          ------

id(PK)          id(FK)

column2         column2

column3         column3 
```

我需要编写 1 个查询，这样我就可以使用 Table2 的 id(FK) 获取 Table1 的 column2。我怎样才能只用一个查询来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:05:29.663

你只需要`JOIN`桌子。

```
select t1.column2
from table1 t1
left join table2 t2
   on t1.id = t2.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:08:20.613

您正在寻找的概念称为连接。可以在 Wikipedia (http://en.wikipedia.org/wiki/Join_(SQL)) 中找到更多相关信息。

我不清楚你想要的结果应该是什么样子，所以我不能确定你的 SQL 语句会是什么样子。也许有更具体数据的例子会有所帮助？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:06:18.520

检查这个：

```
select column2  
from table1 t1 
where t1.id in (select t2.id 
                from tabel2 t2) 
```

# android - 如何在android的sdcard中保存多个录音？

> ID：12744858
> 
> 赞同：0
> 
> 时间：2012-10-05T11:02:36.693
> 
> 标签：android, android-sdcard

我知道如何按照以下代码录制语音

```
String path = android.os.Environment.getExternalStorageDirectory()+"/Record/test.3gp";

boolean exists = (new File(android.os.Environment.getExternalStorageDirectory()+"/Record/")).exists();

                if(!exists)
                {
                    newFile(android.os.Environment.getExternalStorageDirectory()+"/Record/").mkdirs();

                }

MediaRecorder recorder = new MediaRecorder();       

recorder.setAudioSource(MediaRecorder.AudioSource.MIC);

                         recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);

                recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

                recorder.setOutputFile(path);
                try {
                    recorder.prepare();
                    recorder.start();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

在这段代码中，我在“recorder.setOutputFile(path);”中给出了输出路径 它工作正常，但我的问题是如果我再次录制它会覆盖相同的路径，所以请帮助我如何在 sdcard 的同一路径中保存多个声音请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:20:35.717

该文件被覆盖，因为该`MediaRecorder`对象每次都获得相同的输出路径。您每次都需要为输出文件提供不同的名称。

一个好方法是在文件名中使用日期/时间。

一个简单的例子可以是：

```
String path = android.os.Environment.getExternalStorageDirectory()
    + "/Record/test_" + System.currentTimeMillis() + ".3gp"; 
```

# crystal-reports - 水晶报表报告错误

> ID：12744860
> 
> 赞同：0
> 
> 时间：2012-10-05T11:02:42.887
> 
> 标签：crystal-reports, report

我不确定这里发生了什么，当我生成报告时，盒装部分会显示所有结果的所有值。我怎么做，所以这些是分开的。

此图像显示报告

![在此处输入图像描述](../Images/61e6d7acab7e9dbf8c325dd7d8f1a725.png)

此图像显示表格链接

![在此处输入图像描述](../Images/690306aa8ef53a0079b71423679c4bae.png)

此图像显示子报告中的代码。

![在此处输入图像描述](../Images/19f5145cde0d50876d7a46620b7522e0.png)

如果您需要任何其他信息，请询问。

非常感谢，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T05:57:47.710

所以您想将子报表中的值限制为主报表中的值？您可能正在寻找一种称为“子报表链接”的功能。在这里试试： [http ://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/d05ad954-f8a2-2e10-db9f-bb0f13a7cb1c?QuickLink=index&overridelayout=true&51887500358899](http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/d05ad954-f8a2-2e10-db9f-bb0f13a7cb1c?QuickLink=index&overridelayout=true&51887500358899)

# android - Android - Jsoup - SocketTimeoutException

> ID：12744861
> 
> 赞同：1
> 
> 时间：2012-10-05T11:02:45.367
> 
> 标签：android, jsoup, socket-timeout-exception

我正在尝试开发一个使用 jsoup-1.7.1.jar 核心库的 Android 应用程序。我将 jar 文件作为库包含在内，但现在当我想使用它时，我每次都会收到 SocketTimeoutException。我正在使用 Ubuntu 12.04，eclipse-juno Build id：20120614-1722，emulator/avd 有 100MB 的 sd，512Ram 并且在 API 级别 16。

这是我的代码：

```
public class MainActivity extends Activity {

private EditText text;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text = (EditText) findViewById(R.id.editText1);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mainmenue, menu);
    return true;
}

public void onClick(View view) {

    //Yes I'm aware that this should not be done. I'm planing to use it in the AsyncTask
    //doInBackground method, but since it was not working there, I decided to track it
    //down here in the main-activity -> so it's just for debug
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    Document doc = null;
    String url1 = "http://213.165.64.71";
    String url2 = "http://www.google.com";
    try {
        doc = Jsoup.connect(url2).timeout(10*1000).get();
    } catch (SocketTimeoutException a) {
        Log.e("MyAPP", "Exception----------A!", a);
    } catch (Exception e) {
        Log.e("MyAPP", "Exception----------E!", e);
    }
    String title = doc.title();
    Log.i("MyAPP", "Title="+title);
}
} 
```

错误日志：

```
10-05 10:45:23.680: E/MyAPP(1433): Exception----------A!
10-05 10:45:23.680: E/MyAPP(1433): java.net.SocketTimeoutException
10-05 10:45:23.680: E/MyAPP(1433):  at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
10-05 10:45:23.680: E/MyAPP(1433):  at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
10-05 10:45:23.680: E/MyAPP(1433):  at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
10-05 10:45:23.680: E/MyAPP(1433):  at java.io.InputStream.read(InputStream.java:163)
10-05 10:45:23.680: E/MyAPP(1433):  at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
10-05 10:45:23.680: E/MyAPP(1433):  at java.io.BufferedInputStream.read(BufferedInputStream.java:227)
10-05 10:45:23.680: E/MyAPP(1433):  at libcore.io.Streams.readAsciiLine(Streams.java:201)
10-05 10:45:23.680: E/MyAPP(1433):  at libcore.net.http.ChunkedInputStream.readChunkSize(ChunkedInputStream.java:77)
10-05 10:45:23.680: E/MyAPP(1433):  at libcore.net.http.ChunkedInputStream.read(ChunkedInputStream.java:47)
10-05 10:45:23.680: E/MyAPP(1433):  at java.io.BufferedInputStream.read(BufferedInputStream.java:304)
10-05 10:45:23.680: E/MyAPP(1433):  at java.io.InputStream.read(InputStream.java:163)
10-05 10:45:23.680: E/MyAPP(1433):  at org.jsoup.helper.DataUtil.readToByteBuffer(DataUtil.java:113)
10-05 10:45:23.680: E/MyAPP(1433):  at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:447)
10-05 10:45:23.680: E/MyAPP(1433):  at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:429)
10-05 10:45:23.680: E/MyAPP(1433):  at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
10-05 10:45:23.680: E/MyAPP(1433):  at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
10-05 10:45:23.680: E/MyAPP(1433):  at org.jsoup.helper.HttpConnection.get(HttpConnection.java:148)
10-05 10:45:23.680: E/MyAPP(1433):  at de.funkypopcorn.reggae_a_gwaan.MainActivity.onClick(MainActivity.java:58)
10-05 10:45:23.680: E/MyAPP(1433):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:45:23.680: E/MyAPP(1433):  at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:45:23.680: E/MyAPP(1433):  at android.view.View$1.onClick(View.java:3586)
10-05 10:45:23.680: E/MyAPP(1433):  at android.view.View.performClick(View.java:4084)
10-05 10:45:23.680: E/MyAPP(1433):  at android.view.View$PerformClick.run(View.java:16966)
10-05 10:45:23.680: E/MyAPP(1433):  at android.os.Handler.handleCallback(Handler.java:615)
10-05 10:45:23.680: E/MyAPP(1433):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-05 10:45:23.680: E/MyAPP(1433):  at android.os.Looper.loop(Looper.java:137)
10-05 10:45:23.680: E/MyAPP(1433):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-05 10:45:23.680: E/MyAPP(1433):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:45:23.680: E/MyAPP(1433):  at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:45:23.680: E/MyAPP(1433):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-05 10:45:23.680: E/MyAPP(1433):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-05 10:45:23.680: E/MyAPP(1433):  at dalvik.system.NativeStart.main(Native Method)
10-05 10:45:23.730: E/AndroidRuntime(1433): FATAL EXCEPTION: main
10-05 10:45:23.730: E/AndroidRuntime(1433): java.lang.IllegalStateException: Could not execute method of the activity
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.view.View$1.onClick(View.java:3591)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.view.View.performClick(View.java:4084)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.view.View$PerformClick.run(View.java:16966)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.os.Handler.handleCallback(Handler.java:615)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.os.Looper.loop(Looper.java:137)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at dalvik.system.NativeStart.main(Native Method)
10-05 10:45:23.730: E/AndroidRuntime(1433): Caused by: java.lang.reflect.InvocationTargetException
10-05 10:45:23.730: E/AndroidRuntime(1433):     at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:45:23.730: E/AndroidRuntime(1433):     at android.view.View$1.onClick(View.java:3586)
10-05 10:45:23.730: E/AndroidRuntime(1433):     ... 11 more
10-05 10:45:23.730: E/AndroidRuntime(1433): Caused by: java.lang.NullPointerException
10-05 10:45:23.730: E/AndroidRuntime(1433):     at de.funkypopcorn.reggae_a_gwaan.MainActivity.onClick(MainActivity.java:65)
10-05 10:45:23.730: E/AndroidRuntime(1433):     ... 14 more 
```

是的，我搜索了所有不同类型的帖子，但没有找到任何解决我问题的方法。（包括这一篇：[How to use AsyncTask for Jsoup Parser?](https://stackoverflow.com/questions/7083680/how-to-use-asynctask-for-jsoup-parser)）

*   是的，我的 Manifest.xml 中有 Internet 权限（WebView 效果很好）
*   我将代理设置更改为无代理（即使我不相信它是由它引起的，因为在 WebView 也可以正常工作之前）。
*   我尝试使用不同的页面，甚至使用普通 IP（所以没有 DNS 的问题）

也许有一些明显的缺失？非常感谢您的帮助，提前谢谢！

Edit1：根据wireshark发送请求并返回答案： ![丝鲨帽](../Images/9d5bb9a20abe70b2eb0035c59138d9c2.png)

Edit2：这真的很奇怪，有时它有效，我得到了答案。但是 3 分钟后，当我再次尝试时，它不再起作用了。问题是它只能工作 10 次中的 1 次。有任何想法吗？

# mysql - codeigniter中是否有任何登录字段

> ID：12744862
> 
> 赞同：0
> 
> 时间：2012-10-05T11:02:53.453
> 
> 标签：mysql, codeigniter

我的后端表中有用户名、电子邮件、用户类型等字段

由于 cakephp 中存在已创建和修改的字段，codeigniter 中是否存在任何字段可以节省用户上次登录系统的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:24:24.667

文档： [http ://codeigniter.com/user_guide/database](http://codeigniter.com/user_guide/database)

为了新的开始

[http://codeigniter.com/user_guide/database/examples.html](http://codeigniter.com/user_guide/database/examples.html)

用于插入表格

[http://codeigniter.com/user_guide/database/active_record.html#insert](http://codeigniter.com/user_guide/database/active_record.html#insert)

```
$data = array(
   'title' => 'My title' ,
   'name' => 'My Name' ,
   'date' => 'My date'
);

$this->db->insert('mytable', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:38:12.030

使用数据库结合 CodeIgniter 的会话类来存储你的`session`数据，这样你就可以跟踪用户的 last_activity。`Codeiginter`可以选择将会话数据存储在数据库中，您必须首先为此创建一个数据库表。这是您可以为此创建的示例表

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
    session_id varchar(40) DEFAULT '0' NOT NULL,
    ip_address varchar(45) DEFAULT '0' NOT NULL,
    user_agent varchar(120) NOT NULL,
    last_activity int(10) unsigned DEFAULT 0 NOT NULL,
    user_data text NOT NULL,
    PRIMARY KEY (session_id),
    KEY `last_activity_idx` (`last_activity`)
); 
```

然后在你的`config.php`你应该使用

```
$config['sess_use_database'] = TRUE;
$config['sess_table_name'] = 'ci_sessions'; 
```

使用此表，您可以在每次用户登录/注销时保存/更新用户的活动。有关更多信息，请[**阅读此文档**](http://codeigniter.com/user_guide/libraries/sessions.html)（请参阅“将会话数据保存到数据库”中）。

# c# - 在 C# XML 文档中记录属性的使用

> ID：12744863
> 
> 赞同：0
> 
> 时间：2012-10-05T11:02:54.297
> 
> 标签：c#, attributes, documentation, doxygen

我有以下 C# 代码，我正在尝试使用 XML 注释和 doxygen 记录这些代码：

**/控制器/FooController.cs**

```
using System.Web.Mvc;
using WebApplication.Attributes;
using WebApplication.Models;

namespace WebApplication.Controllers
{
    /// <summary>
    /// ASP.NET MVC controller for /Foo/
    /// <para>
    ///     Access is limited via <see cref="ValidateThirdPartySessionAttribute"/> to the entire controller.
    /// </para>
    /// </summary>
    [ValidateThirdPartySession]
    public class FooController : Controller
    {
        // blah
    }
} 
```

属性定义位于**/Attributes/ValidateThirdPartySessionAttribute.cs**中，其全名为`WebApplication.Attributes.ValidateThirdPartySessionAttribute`.

在通过 doxygen 运行时`cref`，不会链接到或拾取该类。`ValidateThirdpartySessionAttribute`我也试过`ValidateThirdPartySession`和它的全名，但没有任何识别。

作为一个侧节点（可能是相关的），我使用的是 Visual Studio 2010，[MSDN 声称](http://msdn.microsoft.com/en-us/library/acd0tfbe%28v=vs.100%29.aspx) *“编译器检查给定的代码元素是否存在”*。即使我将其更改`cref`为乱码，也不会发出任何警告。

# javascript - 允许在帖子中使用基本 HTML（包括换行符、禁止关注链接等），同时保持安全性 - CakePHP

> ID：12744864
> 
> 赞同：1
> 
> 时间：2012-10-05T11:02:57.927
> 
> 标签：javascript, html, cakephp

在我的 CakePHP 博客中，我希望用户能够添加类似的 HTML 添加，就像您可以在 StackOverflow 上插入一样，即换行符、链接、粗体、列表等。但我有点不确定我将如何解决这个问题是最实用的，同时在用户提交的帖子中保持对恶意代码的保护。

*   实际上，将帖子保存在 TEXT 数据库字段中并允许其中包含一些 HTML 是最方便的吗？
*   如果我在帖子中允许一些 HTML 代码，我如何确保我只允许非恶意的基本 HTML 代码，同时清除其余代码？
*   我应该以某种方式使用 CakePHP Sanitize 类吗？
*   FormHelper 会清除所有 HTML 用户输入吗？
*   我假设我必须使用 JavaScript 来帮助用户生成正确的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:14:34.973

对您允许的 HTML 标记使用白名单。首先 HTML 编码所有内容，然后解码您允许的特定标签。

一个基本的例子：

```
function encodeForOutput(s) {
  s = s.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/&/g, '&amp;');
  // allow <b>
  s = s.replace(/&lt;b&gt;(.*?)&lt;/b&gt;/$, '$1');
  return s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:07:05.797

如果它不适合开发人员，您是否考虑过像 TinyMCE 这样的所见即所得插件？

[http://www.tinymce.com/](http://www.tinymce.com/)

[http://bakery.cakephp.org/articles/galitul/2012/04/11/helper_tinymce_for_cakephp_2](http://bakery.cakephp.org/articles/galitul/2012/04/11/helper_tinymce_for_cakephp_2)

至于安全性，白名单是最安全的方法。应该避免列入黑名单，因为您无法处理所有可以用来绕过它们的技巧（例如，通过十六进制传递文本等）。

TinyMCE 允许您指定白名单： [http ://www.tinymce.com/wiki.php/Configuration:valid_elements](http://www.tinymce.com/wiki.php/Configuration:valid_elements)

# intellij-idea - Intellij 未在 Play Framework 项目中检测到 JAR

> ID：12744869
> 
> 赞同：2
> 
> 时间：2012-10-05T11:03:08.520
> 
> 标签：intellij-idea, playframework-2.0

我已经将一个 playframework 项目加载到 intellij 中。我在项目中有一个外部 jar（在我的 lib 文件夹中），但由于某种原因 intellij 没有检测到它。

该 jar 也包含在 SDK 的平台设置中。在我在 intellij 中的任何其他项目中，它检测到这个 JAR 没问题。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-21T02:23:56.607

在idea中进行开发时，您必须将lib文件夹添加为模块的依赖项。当我添加手动依赖项时，它对我有用

> 文件->项目结构->模块->（如果有多个，请选择您的模块）->依赖项

然后我只需单击“添加”即可添加 lib 文件夹。您的项目将开始检测罐子。

[Intellij 文档添加外部 jars](https://www.jetbrains.com/help/idea/2016.3/configuring-module-dependencies-and-libraries.html)。

# iis-7 - CRM 2011 多个主机名

> ID：12744874
> 
> 赞同：0
> 
> 时间：2012-10-05T11:03:20.990
> 
> 标签：iis-7, dynamics-crm, dynamics-crm-2011

是否可以/支持让 CRM 2011 主机使用两个不同的主机名？我们已经尝试过了，但并非一切都完美无缺。

**例子：**

*   服务器名称为“ *app1* ”的服务器。
*   将主机名“ *crm* ”指向“ *app1* ”的 AD/DNS 条目。

当用户导航到“ *crm* ”时，请求在 99% 的时间内都有效，但 CRM 中的一些内部 javascript 以原始“ *app1* ”服务器为目标。例如，来自检索角色的普通编辑表单的请求。无论请求 URL 是什么，名为“*SERVER_NAME*”的 javascript 变量始终具有“ *app1 ”的值。*可能会出现跨服务器警告，或者功能可能会静默失败。

访问服务器的 FQDN 时也会发生这种情况，因此“ *app1.mydomain.com* ”仍然会产生相同的结果和失败/警告功能。

我想在处理负载平衡安装时这将是一个类似的问题？他们如何处理这个问题？即它们以主机名 X 为目标，并且可以获得主机名 Y 或 Z。

编辑：我知道这可能被称为“域别名”或“主机别名”，因为它是一个活动目录条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:38:19.407

CRM 系统不能有多个主机名。

1.  您必须为您所看到的脚本指定 CRM 系统本身使用的地址。但它也用于发现机制。
2.  由于 Web 服务端点的限制，不支持 IIS 中的多个绑定

在 CRM 服务器上打开部署管理器。转到操作 -> 属性 -> 地址

将所述地址调整为您用于访问 CRM 系统的地址。这些设置对于 CRM 定义其“身份”很重要。

如果您已配置 IFD，您将配置一个额外的外部身份。

顺便一提。根据您的环境，可能需要设置 SPN。请参阅[http://blogs.msdn.com/b/webtopics/archive/2009/01/19/service-principal-name-spn-checklist-for-kerberos-authentication-with-iis-7-0.aspx](http://blogs.msdn.com/b/webtopics/archive/2009/01/19/service-principal-name-spn-checklist-for-kerberos-authentication-with-iis-7-0.aspx)

关于 NLB：[http ://technet.microsoft.com/en-us/library/hh699803.aspx](http://technet.microsoft.com/en-us/library/hh699803.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:01:23.080

当您使用不同的名称时，Daniel Cai 似乎有一个很好的方法来解决 getServerURL 返回部署管理器中保存的值而不是调用页面 URL 的问题。他想出了一个替换函数：

[CRM 2011：在您的 CRM 客户端中获取正确的服务器 URL](http://danielcai.blogspot.co.uk/2012/02/get-right-server-url-in-your-crm-client.html)

这看起来适用于 Outlook 离线客户端和在线浏览器的所有场景。

# ios - Xcode 4.5 中的 IBAction

> ID：12744876
> 
> 赞同：7
> 
> 时间：2012-10-05T11:03:23.500
> 
> 标签：ios, ibaction, xcode4.5

`IBAction touchUpInside`有人在 Xcode 4.5 中没有响应，部署目标为 iOS 5 吗？它适用于我拥有 iOS6 的模拟器，但不适用于 iOS5。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T21:06:20.657

我遇到了同样的问题，因为我使用的是点击手势。您应该能够通过添加以下行来保留现有代码。这将使您的点击手势不会杀死内部按钮等上的任何点击......

```
yourTapGesture.cancelsTouchesInView = NO; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T15:43:10.700

**编辑：**

我找到了解决方案。我在视图中添加了一个`tap gesture`，它覆盖了视图检测`touchUpInside`任何按钮上的动作的能力，因为它们也是视图的一部分。因此，您应该做的是删除手势识别器或使其特定于某个对象。例如，我将触摸手势添加到不在子视图上的视图的指定部分（我创建了一个新对象/插座并将其标记为这样）。仍然不确定为什么它在 5.1 和 6.0 中有所不同，但这应该对您有所帮助。

**原帖：**

*我有相同的问题。我有一个项目，其中子视图上的按钮可在模拟器的 6.0 版上单击，但在 5.1 版上不可单击。我那里也有一些手势识别器，但对它们进行了评论以查看它们是否是问题，而它们不是。我发现的唯一一件事是按钮有时可以在外部触摸操作中点击（即使它们被编程为内部触摸），所以我不确定 Apple 是否更改了按钮操作的 eNums？如果我想出一个解决方案，我一定会在这里提供。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:40:44.030

我刚刚创建了一个新的演示项目。我在视图中添加了一个按钮，处理 touchUpInside，在部署目标 ios6 和 ios5 上使用 Xcode4.5 构建和测试——两​​者都工作得很好。自己尝试一个演示项目 - 不会超过几分钟。

# java - 如何将java Inputstream传递给Javascript

> ID：12744888
> 
> 赞同：1
> 
> 时间：2012-10-05T11:03:55.497
> 
> 标签：java, javascript, jquery-mobile

我正在使用 jquerymobile 和 Spring MVC 开发一个应用程序。我在控制器中获取一个图像作为 Inputstream，下一步是将此图像传递给 Javascript，以便在与 JqueryMobile 的对话框中显示。

如何将此 java Inpustream 图像传递给 javascript？

PS。控制器通过 jquerymobile ajax 调用，所以我有`onSuccess`方法等待从控制器返回的数据来做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:22:10.217

我假设您正在创建一个 REST 端点来接收图像。如果是这样，您可以让您的 Spring-endpoint 将 HttpServletResponse 作为参数并将图像流式传输到 servlet 输出流。将输入流包装在 BufferedInputStream 中，让它为您处理缓冲。

要获取 HttpServletResponse 只需将其作为参数添加到您的方法中，

```
@RequestMapping(value = "/something")
public void helloWorld(HttpServletResponse response)  {
    InputStream imageStream = .....;

    OutputStream oSteam = response.getOutputStream();
    InputStream stream = new BufferedInputStream(imageStream ); 
    int b = -1;
    while((b = stream.read())> -1){
        oSteam.write(b);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:12:53.610

我对 Spring 没有太多经验，但我会[`javax.ws.rs.core.Reponse`](http://docs.oracle.com/javaee/6/api/)在 Java EE 中使用该类。这将允许您使用`Response.ResponseBuilder`包装您的`InputStream`.

IE

```
Response.ok(inputStream, MEDIA_TYPE.APPLICATION_OCTET_STREAM).build(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:31:42.083

为什么不在 div 上使用 Jquery 从 java 加载该图像？

```
var url = 'myimage.com/image_java_url?'+dataToSend
$('#myDiv').load(url, function(response, status, xhr) {
    if (status = "success"){
        $('#myDiv').html(response);
    }
}); 
```

# magento - Magento 产品占位符图片

> ID：12744895
> 
> 赞同：3
> 
> 时间：2012-10-05T11:04:28.037
> 
> 标签：magento

我在 System -> Configuration -> Catalog -> Product Image Placeholders 的后端设置了产品占位符图像

我可以使用以下代码在我的一个视图中以编程方式成功访问产品占位符图像：

```
$this->getSkinUrl($this->helper('catalog/image')->init(
Mage::getModel('catalog/product'), 'small_image')); 
```

我的问题是以上返回：

```
http://x.dev/skin/frontend/base/default/http://x.dev/media/catalog/product/cache/7/small_image/0dc2d03fe217f8c83829496872af24a0/placeholder/default/logo_4.jpg* 
```

似乎 getSkinUrl 做了它所说的并将皮肤路径添加到字符串中，这是我**真正的问题**，要解决我认为我会删除 getSkinUrl 的问题：

```
$this->helper('catalog/image')->init(
Mage::getModel('catalog/product'), 'small_image'); 
```

但是上面的代码抛出：

```
PHP Fatal error:  Allowed memory size of 268435456 bytes exhausted 
```

谁能看到这个问题，我似乎做得更少，而且似乎陷入了一个循环。

或者有人知道另一种方法吗？我真的被困住了，我真的不想硬编码。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T17:52:44.883

非常感谢@Lucasmus 让我走上正轨。

我最终以一种 hacky 的方式解决了这个问题，但它确实有效。

```
Mage::getModel('catalog/product')->getSmallImageUrl(200,200); 
```

这将为您提供 System -> Configuration -> Catalog -> Product Image Placeholders 中设置的产品占位符图像

**编辑**

正如@Tyler V 指出的那样，这是一种已过时的方法，如果您不想使用它，可以使用与该方法相同的逻辑，它有点冗长：

```
 (string)Mage::helper('catalog/image')->init(
        Mage::getModel('catalog/product'),
        'small_image'
    )->resize(200, 200); 
```

# excel - 使用 VBA 循环遍历 Excel 中表格区域的第一列

> ID：12744899
> 
> 赞同：7
> 
> 时间：2012-10-05T11:04:34.230
> 
> 标签：excel, loops, range, vba

这应该很简单，但我有点卡住了。

我在工作表中有一个名为“ClientReturns”的表。此表的第一列包含客户的帐号。

我想每次都遍历表格来获取帐号。这是我到目前为止所拥有的，但是当我只想要第一列中的数据时，它也会遍历其他列中的数据。

```
Sub doStuff()

    Set ClientTable = Sheets("Returns").range("ClientReturns")
    For Each tRow In ClientTable
        AccNum = tRow.Columns(1).Value
        'Do stuff with the account num
    Next AccNum

End Sub 
```

非常感谢您的回答...我解决了这个问题：

```
Sub getReturns()

    Dim lookR As range, c As range
    With Sheets("Returns").ListObjects("ClientReturns")
        Set lookR = .ListColumns("Account Number").DataBodyRange
        For Each AccNum In lookR.Cells
            'Let's see if it's a combined account
        Next AccNum
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:30:21.083

更直接地使用第一列

```
Dim ClientTable As Range
Dim rng1 As Range
Set ClientTable = Sheets("Returns").Range("ClientReturns")
For Each rng1 In ClientTable.Columns(1).Cells
    AccNum = rng1.Value
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:18:01.797

`For Each tRow In ClientTable` 被解释为`For Each tRow In ClientTable.Cells`
试试这个：
`For Each tRow In ClientTable.Rows`

# sql - SSIS 2012 - 错误输出列名

> ID：12744907
> 
> 赞同：0
> 
> 时间：2012-10-05T11:05:11.207
> 
> 标签：sql, error-handling, ssis

我们正在为一个客户构建一个 SSIS 包，其中在 1 个数据流任务中发生了很多转换检查。我们将任何错误输出到为我们的错误表生成新记录的脚本。然后可以查阅该错误表以检查是否发生任何错误。

我们知道有一些脚本和组件可以从错误输出中检索真实的列名。但这些都适用于 2008 R2 或更低版本。

其次，我们将我们的 2012 xml 与 2008 R2、2008 xml 进行了比较，并且没有任何 lineageID 的迹象，因此我们认为上面的脚本和组件将不再起作用。

奇怪的是，虽然在我们的设计器中的高级编辑屏幕中，我们可以看到我们的 lineageId。可悲的是，我们担心这些是在运行时生成的，并且每次运行都可能不同。所以我们不能针对那些脚本来检索真正的列名。

任何人有任何提示或技巧来解决这个问题？

亲切的问候，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:01:11.000

[本尼奥斯汀的解决方案](http://bennyaustin.wordpress.com/2011/02/04/ssis-name-of-errorcolumn/)

这给了我一个答案。不过请阅读有关该软件包的评论，您可能需要在它起作用之前摆弄一些东西。但最终确实如此。

# php - 获取进行类调用的错误行号和文件名

> ID：12744909
> 
> 赞同：0
> 
> 时间：2012-10-05T11:05:18.860
> 
> 标签：php, error-handling

我有一个处理错误的类。

我想调用该类的公共静态方法来记录我的 RPC 服务器向我抛出的错误，而无需使用`__LINE__`命令。

像这样的东西：

```
class errorHander{
    public static $errors = array();
    public static function logError($message){
        self::$errors[] = array('message', NEEED SOMHOW TO GET THE calling class, get the file in which the error ocured);
    }
} 
```

这是最重要的，无需从被调用函数传递文件位置。

所以类似的东西`errorHander:logError(message, location)`是不行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:22:11.150

logError() 只需要一个参数而不是 2。

做这样的事情：

```
 class errorHander{
        public static $errors = array();
        public static function logError($message){
            self::$errors[] = array('message'=>$message);
        }
    }

    errorHander:logError("This is a no-yes go") //This should log

    echo errorHander:errors[0]["message"]; //print it 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:10:53.153

那么这显然取决于你有什么样的错误。

您可能想查看异常处理。PHP 的异常类提供了 getLine() 和 getTrace() 方法。这可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:14:12.900

Exception::getLine 和 getFile 方法，我没有办法在不处理异常的情况下做到这一点。这是一个参考。 [http://www.php.net/manual/en/class.exception.php](http://www.php.net/manual/en/class.exception.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:25:07.620

这可以通过 xdebug-extension 实现：http: [//xdebug.org](http://xdebug.org)

您可以使用`xdebug_call_file()`和`xdebug_call_class()`来获取您需要的信息。

请参阅文档：http: [//xdebug.org/docs/all_functions](http://xdebug.org/docs/all_functions)

# c++ - 如果我为浮点数定义了自定义比较函数，std::sort 会正常工作吗？

> ID：12744911
> 
> 赞同：2
> 
> 时间：2012-10-05T11:05:29.620
> 
> 标签：c++, sorting, floating-point

对于浮点精度的问题，我为浮点数定义了我的自定义比较函数：

```
bool cmp(double a, double b)
{
    if(abs(a - b) <= eps) return false;
    return a < b;
} 
```

然后我对一些浮点数数组调用排序。我听说一些不好的比较功能会导致排序分段错误。我只是想知道`cmp`排序是否可以正常工作？一方面，`cmp`满足关联规则。但另一方面，`cmp(x - eps, x) == false`&&`cmp(x, x + eps) == false`并不意味着`cmp(x - eps, x + eps) == false`.

我没有直接对浮点数使用排序，因为我想要排序的是`pair<double, double>`. 例如：

```
(1,2), (2,1), (2.000000001, 0) 
```

我想将 2 和 2.000000001 视为相同，并期望结果为：

```
(1,2), (2.000000001, 0), (2,1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:34:43.157

`std::sort`需要一个定义**严格弱排序**的比较器。这意味着，除其他外，必须满足以下条件：

*   我们定义两个项目`a`和**等价**`b`于( ) 如果**`a === b``!cmp(a, b) && !cmp(b, a)`**
***   等价是传递的：`a === b`&& `b === c`=>`a === c`**

 **正如您在问题中已经说过的那样，您的功能`cmp()`不符合这些条件，因此您不能在`std::sort()`. 不仅算法的结果将是不可预测的，这很糟糕，除非您实际上正在寻找这种不可预测性（参见`randomize`）：如果您有一些彼此非常接近的值，以便它们中的任何一个`true`与一些进行比较，但`false`对于其他一些，算法可能会进入无限循环。

所以答案是否定的，除非你想冒险冻结你的程序`cmp()`，否则你不能使用你的函数。`std::sort()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T11:14:30.140

你为什么要费心做一个*近似*的小于比较？这是没有意义的。

只需严格按实际值对数组进行排序。

*然后*使用您的近似比较函数来确定您希望哪些元素相等。

（英语中的等价物是臭名昭著的“几乎更好”。想想看。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T11:44:57.667

可以为将相似值*分组*的浮点定义比较函数。你可以通过四舍五入来做到这一点：

```
bool cmp(double a, double b)
{
    const double eps = 0.0001;
    int a_exp;
    double a_mant = frexp(a, &a_exp); // Between 0.5 and 1.0
    a_mant -= modf(a_mant, eps); // Round a_mant to 0.00001
    a = ldexp(a_mant, a_exp); // Round a to 0.00001 * 10^a_exp
    // and the same for b
    int b_exp;
    double b_mant = frexp(b, &b_exp); 
    b_mant -= modf(b_mant, eps);  
    b = ldexp(b_mant, b_exp);
    // Compare rounded results.
    return a < b;
} 
```

Now`cmp(a,b)==true`暗示`a<b`， and`a==b`和`a>b`都暗示`cmp(a,b)==false`。**

# magento - 具有产品属性和自定义源模型的 Magento 模块 - 卸载

> ID：12744913
> 
> 赞同：1
> 
> 时间：2012-10-05T11:05:35.637
> 
> 标签：magento

在 Magento 中创建一个添加需要自定义源模型的新产品或类别属性的模块时，如果模块被停用或删除，则产品和类别页面将无法正确加载。这是有道理的，因为它试图从不再存在的类中加载属性。

在不让最终用户手动从数据库中删除属性的情况下如何处理这个问题

# c++ - C++，模板化指向函数的指针

> ID：12744916
> 
> 赞同：0
> 
> 时间：2012-10-05T11:05:45.347
> 
> 标签：c++, templates, function-pointers

有两个指向不同功能的指针

```
typedef std::vector<double> TData;
double ( * p_test1 ) ( const TData> &arg);
double ( * p_test2 ) ( const TData> &ar1, char *arg2, char *arg3); 
```

和一个方法，它有一个指向函数的指针作为参数

```
double f (double ( * p_test1 ) ( const TData  &arg ))
{
    //Long and not trivial algorithm processing results of p_test
    for ( i = 0;... )
    {
       double res = p_test (arg);  //Some computations
    }
} 
```

f() 方法包含困难的计算（这里用 for 循环代替）。

是否可以将此参数模板化（即指向具有不同数量参数的函数的指针）以获得处理两种类型参数的通用函数

```
double f (double ( * p_test1 ) ( const TData  &arg ));
double f (double ( * p_test2 ) ( const TData> &ar1, char *arg2, char *arg3)); 
```

或者有什么方法可以编写这样的函数，例如写一个指向函数指针的指针？

我想避免 f() 函数的部分专业化，因为它很复杂（重复覆盖长代码效率不高）。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:09:09.893

你当然可以写一个模板，至少在 C++11 中：

```
template <typename ...Args>
double f(double(*fp)(Args...))
{
    double res = fp( /* ??? */ );
} 
```

问题是：你怎么知道如何*调用*函数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:50:57.040

作为一种特殊情况，可以采用*任何方法的方法也可以采用函数指针。*例如

```
template<typename Function>
double f (Function p_test)
{ ...
    // if p_test is a function pointer or has operator(), this will work
    double res = p_test (arg);
  ... } 
```

然而，问题归结为两个函数采用不同的参数这一事实。因此，参数要么必须以某种方式捆绑到`f`，要么无论如何都需要有几种不同的实现，或者参数将始终相同。

要捆绑参数，通常的方法是使用`std::bind`(C++11) 或[`boost::bind`](http://www.boost.org/libs/bind/bind.html). 假设您有一个需要 3 个参数 ( `test2`) 的函数，并且需要将其传递给`f`仅提供第一个参数的通用算法 ()。你知道另外两个。所以你这样做：

```
f(bind(&test2, _1, secondarg, thirdarg)) 
```

(In C++11 `bind` is `std::bind` and `_1` is `std::placeholders::_1`, in Boost `bind` is `boost::bind` and `_1` is in anonymous namespace provided by the header.) In this case `f` needs to take any argument, because the return type of `bind` is unspecified class type with appropriate `operator()`.

# visual-c++-2008 - C++03下引用折叠

> ID：12744917
> 
> 赞同：8
> 
> 时间：2012-10-05T11:05:48.870
> 
> 标签：visual-c++-2008, c++03

我需要从绑定的成员函数创建一个谓词，所以我将它包装在一个`boost::function<bool(SomeObject const &)>`. 这似乎很好，一切都很好，但我也需要在一种情况下否定它。然而

```
boost::function<bool(SomeObject const &)> pred;
std::not1(pred); 
```

无法在 MSVC++ 9.0 (Visual Studio 2008) 下编译，抱怨对引用的引用无效：

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\functional(213) : warning C4181: qualifier applied to reference type; ignored
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\functional(213) : error C2529: '_Left' : reference to reference is illegal 
```

问题是`boost::function`定义`argument_type`as`SomeObject const &`和内部`std::unary_negate<_Fn1>`实例化的 by`std::not1`尝试使用`const typename _Fn1::argument_type&`并且编译器拒绝它，因为`T::argument_type`它已经是一个引用。我确信它应该在 C++11 下编译，但这是旧的编译器，只有 C++03。所以我想知道是谁的错：

*   编译器的，因为它应该折叠引用[（显然不是）](https://stackoverflow.com/a/3772234/201725)，
*   标准库的，因为它应该准备好处理获取引用的函子（显然不是，因为规范定义`unary_negate`了`const typename Predicate::argument_type& x`参数），
*   boost's，因为`argument_type`即使实际参数是 or 也不应该被引用
*   我的，因为`boost::function`不应该与参考参数一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T04:25:42.273

问题当然不是 Boost 的；`boost::function`基本上只是`std::function`，具有所有相同的语义。带有参考参数的 s也`boost::function`可以正常工作。您只是不能将它们与`std::not1`其他`<functional>`东西一起使用。

C++11 的引用折叠使`std::not1`工作按您认为应该的方式工作。如果没有引用折叠，C++03 中指定的方式`std::not1`是不可能工作的——除非在实现者做了一些创造性的解释而不是盲目地遵循标准的字母。

可以*通过*在`std::not1`C++03 中`std::unary_negate`使用引用 s 添加 for 谓词的特化`argument_type`，但 libc++ 和 libstdc++ 都没有这样做。

但你知道谁有吗？**促进！**如果您只是将代码更改为`boost::not1`在您当前使用的任何地方使用`std::not1`，那么[一切都会正常工作。](http://www.boost.org/doc/libs/1_34_0/libs/functional/negators.html#arguments)基本上，把`boost`命名空间想象成一个兼容 C++11 的`std`; 在 C++11 的`std`命名空间中工作的任何东西都可能在 C++03 的`boost`命名空间中工作。

* * *

警告，希望题外话：我的 Macbook ( `Apple LLVM version 4.2 (clang-425.0.28) (based on LLVM 3.2svn)`) 上的 Clang 编译器即使在模式下也会默默地折叠引用`-std=c++03`，因此

```
typedef const int& ref;
typedef const ref& ref2; 
```

不会产生错误。当您测试您的 C++03 代码时，请确保您没有使用具有此错误功能的编译器。

# java - 单击关闭按钮时，awt窗口未关闭

> ID：12744924
> 
> 赞同：6
> 
> 时间：2012-10-05T11:06:09.833
> 
> 标签：java, awt, frame, windowlistener

我为虚拟键盘实现了一个示例类并运行了这个 VirtualKeyboardTest。出现了键盘，但主要问题是单击 x 按钮时它没有正确关闭。我该如何解决这个问题？

```
import java.awt.*;
import java.awt.event.*;

public class VirtualKeyboardTest
{
    public static void main(String args[])
    {
        VirtualKeyboard vk = new VirtualKeyboard();
        vk.setSize(500,300);
        vk.setVisible(true);
        Frame f1 = new Frame();
        f1.addWindowListener( new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent we) {

                System.exit(0);
            }
        } );
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:13:50.737

你的代码不正确。代替

```
f1.addWindowListener( new WindowAdapter() {
  ... 
```

尝试

```
vk.addWindowListener( new WindowAdapter() {
  ... 
```

这将关闭您的窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-04T08:44:36.253

最好使用方法**public void dispose()**

```
vk.addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent we) {
            vk.dispose(); // use dispose method 
         }
     }
); 
```

**AWT**是重量级的，即它的组件使用**系统的资源**。

窗口是非阻塞的。这意味着一旦您在代码中创建了一个，您的代码就会继续执行。

这意味着您的 Window 在创建后可能会立即超出范围，除非您在其他地方明确存储了对它的引用。此时窗口仍在屏幕上。

这也意味着当你完成它时，你需要一些其他的方法来摆脱它。输入**Window dispose() 方法**，该方法可以从 Window 的侦听器之一中调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T11:10:00.287

检查这个：

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

它基本上告诉 Windows 管理器在按下“X”时关闭您的应用程序。

# jquery - 在 jQuery 中，如何设置元素的“top,left”属性，其位置值相对于父级而不是文档？

> ID：12744928
> 
> 赞同：156
> 
> 时间：2012-10-05T11:06:30.330
> 
> 标签：jquery, css, jquery-selectors, positioning, css-position

`.offset([coordinates])`方法设置元素的坐标，但仅相对于文档。那么如何设置元素的坐标但相对于父级？

我发现该`.position()`方法仅获取相对于父级的“顶部，左侧”值，但它没有设置任何值。

我试过了

```
$("#mydiv").css({top: 200, left: 200}); 
```

但不起作用。

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-10-05T11:18:28.710

要设置相对于父级的位置，您需要设置`position:relative`父级和`position:absolute`元素的

```
$("#mydiv").parent().css({position: 'relative'});
$("#mydiv").css({top: 200, left: 200, position:'absolute'}); 
```

这是因为`position: absolute;`位置相对于最近**定位**的父级（即，具有除 default 之外的任何位置属性的最接近的父级`static`）。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-10-05T11:09:48.807

```
$("#mydiv").css('top', 200);

$("#mydiv").css('left', 200); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-05T11:08:26.413

你可以试试 jQuery UI 的[.position](http://jqueryui.com/demos/position/)方法。

```
$("#mydiv").position({
  of: $('#mydiv').parent(),
  my: 'left+200 top+200',
  at: 'left top'
}); 
```

***[检查工作演示。](http://jsfiddle.net/sTC2F/)***

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-24T22:11:36.773

我发现如果传递的值是字符串类型，后面必须跟'px'（即90px），如果是整数，它会自动追加px。width 和 height 属性更宽容（任何一种都可以）。

```
var x = "90";
var y = "120"
$(selector).css( { left: x, top: y } )        //doesn't work
$(selector).css( { left: x + "px", top: y + "px" } )        //does work

x = 90;
y = 120;
$(selector).css( { left: x, top: y } )        //does work 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-23T07:02:06.717

动态页面的代码偏移量动态

```
var pos=$('#send').offset().top;
$('#loading').offset({ top : pos-220}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-22T17:16:49.770

记忆中的定位，我来的这么晚，不知道有没有人会看到，但是——

我不喜欢使用 设置位置`css()`，尽管通常它很好。我认为最好的办法是使用`position()`xdazz 所指出的 jQuery UI 的 setter。但是，如果 jQuery UI 出于某种原因不是一个选项（但 jQuery 是），我更喜欢这个：

```
const leftOffset = 200;
const topOffset = 200;
let $div = $("#mydiv");
let baseOffset = $div.offsetParent().offset();
$div.offset({
  left: baseOffset.left + leftOffset,
  top: baseOffset.top + topOffset
}); 
```

这具有不将`$div`' 父级任意设置为相对定位的优点（如果`$div`' 父级本身是绝对定位在其他东西中怎么办？）。我认为唯一的主要边缘情况是 if `$div`doesn't have any `offsetParent`，不确定它是否会返回`document`,`null`或完全其他的东西。

`offsetParent`从 jQuery 1.2.6 开始，2008 年的某个时候就可以使用，所以这种技术现在和当原始问题被问到时都有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-11T05:24:37.967

使用`offset()`的功能`jQuery`。这将是：

```
$container.offset({
        'left': 100,
        'top': mouse.y - ( event_state.mouse_y - event_state.container_top ) 
    }); 
```

# django - gunicorn - django - boto - 通过 S3 提供静态文件 - 如何将 AWS_ACCESS_KEY_ID 和 AWS_SECRET_ACCESS_KEY 设置为环境变量

> ID：12744930
> 
> 赞同：0
> 
> 时间：2012-10-05T11:06:37.773
> 
> 标签：django, deployment, amazon-s3, gunicorn

我正在使用 s3 来记录我的静态文件和[django-storages](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)来为它们服务。

```
 STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
    AWS_STORAGE_BUCKET_NAME = 'mybucket'
    STATIC_URL = 'http://%s.s3.amazonaws.com/' % AWS_STORAGE_BUCKET_NAME 
```

我尝试在 heroku 上部署我的应用程序，并且为了验证我的访问 S3 的进程，可以将访问凭据设置为：

```
export AWS_ACCESS_KEY_ID=<key ID>
export AWS_SECRET_ACCESS_KEY=<key> 
```

这适用于heroku。

我为 webfaction 尝试了相同的方法，但总是得到以下错误：

```
NoAuthHandlerFound at /admin/
No handler was ready to authenticate. 1 handlers were checked. ['HmacAuthV1Handler'] Check your credentials 
```

所以我的问题是：如何正确地将凭据设置为 env。我可以通过 gunicorn 访问 S3 上的文件的变量。

请注意，我只想将凭证传递给 gunicorn 进程。我不想将它们存储在配置中。文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:28:30.003

我对 webfaction 一无所知，但 boto 也会在 boto 配置文件中查找凭据。默认情况下，它将查找 in`/etc/boto.cfg`和 in `~/.boto`。这个文件是一个 INI 风格的配置文件，你需要像这样添加你的凭据：

```
[Credentials]
aws_access_key_id = <key ID>
aws_secret_access_key = <key> 
```

# c# - 下拉列表 MVC 3 Razor 中的选定索引更改事件

> ID：12744932
> 
> 赞同：1
> 
> 时间：2012-10-05T11:06:49.753
> 
> 标签：c#, asp.net-mvc-3, razor

如何编写 MVC 3 Razor Web 应用程序下拉列表的选定索引更改事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:07:05.810

如上一个答案中所述，您必须使用 ajax 编写 Javascript。但是，它也可以像将表单返回到相同的操作一样简单，然后捕获值以再次重新显示修改后的视图。

```
$('#myDropdown').change(function(){
    $('#myForm').submit();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-26T15:37:15.530

```
$(document).ready(function () {
$("#country").change(function () {
if ($("#country").val() != "0") {
var options = {};
options.url = "/Common/GetStates";
options.type = "POST";
options.data = JSON.stringify({ country: $("#country").val() });
options.dataType = "json";
options.contentType = "application/json";
options.success = function (states) {
//alert(states[i].State);
$("#state").empty();
for (var i = 0; i < states.length; i++) {
$("#state").append("<option>" + states[i].State1 + "</option>");}}
options.error = function () { alert("Error retrieving states!"); };
$.ajax(options);}
else {$("#state").empty();
}});
}); 
```

## 在视图中

```
<select id="state">
<option value="0">select</option>
</select> 
```

## 在控制器中

```
public JsonResult GetStates(string country){
int cntry = Convert.ToInt32(country);
List<State> states = db.States.Where(i => i.Countryid == cntry).ToList();
return Json(states);} 
```

# android - 如何在android中使用IntentService重启服务

> ID：12744933
> 
> 赞同：0
> 
> 时间：2012-10-05T11:06:49.740
> 
> 标签：android, broadcastreceiver, intentservice

我可以通过向广播接收器发送广播来停止我的 ServiceA（它开始使用`AlarmManager`） 。完成他的工作后，我想再次启动相同的 ServiceA 。`IntentService``IntentService``IntentService`

前我有服务`SrvA`，意图服务`IntSrvB`和广播接收器`MyBcr`。当我`IntSrvB`运行时，我能够停止。我的问题是当我完成他的工作后`SrvA`如何重新启动。`SrvA``IntSrvB`

注意 -`ServA`开始使用`AlarmManager`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:53:16.067

**编辑：**根据您的代码，您可以将变量`myIntent`&传递`myIntent2`到您的`IntentService`类中 - 然后您可以使用它们重新创建与`AlarmManager`.

请注意，您似乎为每个意图设置了一个警报，该警报重复一次“现在”，然后每隔一段时间重复一次。然后您再次隐式启动服务，即您“现在”启动服务两次。这看起来像是一个错误 - 查看[AlarmManager.setRepeating()](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)方法的文档。

* * *

下面的原始答案...

把它放进你的`IntentService`：

```
@Override
protected void onHandleIntent(Intent intent)
{
    try
    {
        // STOP SERVICE

        // DO YOUR WORK HERE
    }
    finally
    {
        // START SERVICE
    }

} 
```

您已经拥有停止服务的代码。您可以从您的“启动服务”代码中获取 `BroadcastReceiver`并将其放在 finally 块中。

我`onDestroy()`一般不建议在 Android 上覆盖。

**注意**：我认为这不是设计您的应用程序的最佳方式，但我正在回答您的问题。就个人而言，我的 main`Service`中有一个方法可以禁用和启用其功能 - 然后调用该方法而不是启动和停止服务。

# php - 加密数据 MySQL 和 PHP？

> ID：12744944
> 
> 赞同：2
> 
> 时间：2012-10-05T11:07:34.587
> 
> 标签：php, mysql, encryption

我有一个包含用户特定信息的字段，当它被放置在数据库中时，我想对其进行加密。该信息稍后只能由我（管理员）访问。将这些信息加密在数据库中并由我在管理区域中查看的最佳方法是什么？

该字段将仅包含数字。用PHP、MySQL搭建的网站，有示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:27:22.460

**公钥/私钥对加密**

您正在寻找的是公钥/私钥加密。为了实现它，你可以点击这个链接：http: [//i.amniels.com/mysql-database-encryption-using-public-private-keys](http://i.amniels.com/mysql-database-encryption-using-public-private-keys)

本质上，它的作用是使用公钥加密数据。公钥可以分发且不隐藏。

但是，只有您拥有私钥才能解密此数据。他们的私钥解锁了公钥加密的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:29:42.537

[使用PHP加密和解密的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

这个存档的问题解释了如何加密您的数据预存储并在检索后解密它，使您能够将其修改/显示为纯文本。

[Mcrypt Reference](http://php.net/manual/en/book.mcrypt.php)也可能会被使用。

希望这可以帮助

# c++ - 如何在 C++ 中正确返回运算符 (*,/,-,+)？

> ID：12744946
> 
> 赞同：3
> 
> 时间：2012-10-05T11:07:37.837
> 
> 标签：c++, operator-keyword

编辑 - 谢谢大家的帮助。我什至没有想过要做switch语句。出于某种原因，我一直认为 C++ 与 Java 有很大不同......它通过一个开关产生了很多意义......感谢您引起我的注意。

我将如何正确返回运算符并在返回后使用它？我编写了一个函数来从输入中获取运算符并检查以确保其有效输入..这是我为此编写的代码（我称它为医生，因为我猜运算符是 C++ 中的保留名称，医生进行操作哈哈...对不起..只是愚蠢）...：

```
string doctor()
{
    string getDoc;

    cin >> getDoc;

    if (getDoc == "*")
        return "*";

    if (getDoc == "/")
        return "/" ;

    if (getDoc == "-")
        return "-" ;

    if (getDoc == "+")
        return "+" ;

    else 
    {
        cout << "You entered " << getDoc << " please only use +,-,*,/ : ";
        return doctor();
    }
} 
```

当返回值时，我让我的 main () 执行以下操作（它将它返回到“操作”变量中......：

```
cout << firstNum << operation << secondNum << " is " << answer; 
```

除了那个操作员之外，我什么都可以工作......我如何让它做它需要做的事情......换句话说，如果它是*然后乘以等等......

对不起，如果这是基本的，但我是 C++ 的新手，谷歌搜索这个并没有产生结果......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:11:02.730

好吧，无论如何您都必须比较字符。但更短的方法是使用（如果你有`sign`in `char`）

```
switch(sign) { 
    case '*':
    case '/':
    case '+':
    case '-':
        string str; str += sign;
        return str; 
    default:
        return "error message";
} 
```

或者

```
if(sign == "+" || sign == "-" || sign == "/" || sign == "*")
    return sign;
else
    return "Error message"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:14:58.563

一个经典的方法是在这里使用 switch-case 构造。你得到一个'*'，乘以参数，如果你得到一个'/'，然后除。

```
double doctored(char operation, double arg1, double arg2) {
    switch (operation) {
        case '+': return arg1+arg2;
        case '-': return arg1-arg2;
        case '*': return arg1*arg2;
        case '/': return arg1/arg2;
        default:  // ignore
            return arg1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:17:07.843

编写另一种计算方法并调用它：

```
float doDoctoryStuff(float a, float b, const char op)
{
  switch(op) {
    case '*':
      return a * b:
      break;
    ...
    ...
    ...
 }
} 
```

在你的主要

```
cout << firstNum << operation << secondNum << " is ";
cout << doDoctoryStuff(firstNum, secondNum, doctor().c_str()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:14:24.057

您可以像在获取输入流的函数中一样使用它：

```
float result;
switch(operation) {
    case '*':
        result = firstNum * secondNum;
        break;
    case '/':
        result = firstNum / secondNum;
        break;
    case '+':
        result = firstNum + secondNum;
        break;
    case '-':
        result = firstNum - secondNum;
        break;
}
cout << firstNum << operation << secondNum << " is " << result; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:14:43.260

从返回的字符串中，您可以选择一个函数或可调用对象（函子）。例如，您可以为此使用`if`- `else`，或者您可以使用`std::map`. 然后使用函数或可调用对象，只需调用它即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T11:16:03.633

您可以像已经进行验证一样进行操作，即

```
if (operation == "*")
    answer = firstNum *secondNum; 
```

等等（或者更好的是，在开关情况下都这样做，就像我的其他回答者提出的那样），尽管更好的方法是创建一个解析字符串并在内部存储运算符信息（作为枚举）的类。给它一个方法，将运算应用于两个数字并返回结果，并实现另一个方法以将文本表示形式作为字符串返回。然后，您将数据与视觉呈现分离。（不要忘记接受字符串并从中提取所需运算符的方法；））

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T11:16:08.110

医生（运算符）的使用取决于操作数，如果它们是类的实例 - 你必须`operator`为它们重载，否则我认为你可以为每个运算符编写一个函数，它需要 1、2、3 个参数。使用switch语句时，根据操作的值调用需要的函数并返回需要的结果

# c++ - 在 Delphi 6 中使用 C++ DLL

> ID：12744947
> 
> 赞同：1
> 
> 时间：2012-10-05T11:07:41.707
> 
> 标签：c++, delphi, winapi, dll, delphi-6

我必须在 Delphi 6 中使用来自外部 C++ DLL 的编码函数。以下是提供的声明：

`long <Function Name> (char *Data, long &Apply, char *ReturnVal, long &Size)`

Data 是输入值，Apply 是布尔值（默认值：FALSE），ReturnVal 是来自 DLL 的返回值，Size 是 ReturnVal 的长度。

为了在 Delphi 6 中使用它，我编写了以下代码：

```
implementation
   const
     EncoderDLL = '<DLL NAME>';
     FunctionName = 'FUNCTION NAME';
   var
      _TEST : function(const Data : PChar; Apply : PInteger;stOutput : Pchar;
          iSize : PInteger) : integer; stdcall;
   .....
   .....
   var
     stInput,stOutput : string;
     iLength,i1,iResult : integer;
     hnd : THandle;
   begin
     iLength := 0;
     i1 := 0;
     stInput := Trim(edtInput.Text);
     hnd := SafeLoadLibrary(EncoderDLL);
     if hnd > 0 then
     begin
       @_TEST := GetProcAddress(hnd,FunctionName);
       if @_TEST <> nil then
       begin
         iResult := _TEST(PChar(stInput),@i1,PChar(StOutput),@iLength); // ERROR
       end;
     end;
     FreeLibrary(hnd);
  end; 
```

我在注释为“错误”的行中遇到**访问冲突**。

如果我将函数声明中的**PChar替换为****string**，则访问冲突不会出现在同一行。它是在释放库时出现的。此外，iLength 参数的值已正确填充。

任何人都可以提供解决此问题的指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:25:13.210

我假设`ReturnVal`是一个输出参数（函数填充它）。您应该在代码中为该字符串保留内存。但是你应该保留多少内存呢？这些功能有一个共同的模式。**您调用该函数两次**。

在您设置的**第一个调用**`ReturnVal`中`nil`，函数会在参数中填写它需要的大小`Size`。

然后，您在`StOutput`缓冲区中保留那么多内存并再次调用该函数。这次你得到了结果。

```
iResult := _TEST(PChar(stInput),@i1,nil,@iLength); // First call
SetLength( stOutput, iLength ); // reserve memory
iResult := _TEST(PChar(stInput),@i1,PChar(stOutput),@iLength); // Second call 
```

请注意，此函数可能遵循也可能不遵循此约定。但如果没有，就真的没有办法告诉你应该为输出参数保留多少内存。

另一件需要注意的是调用约定。C 和 C++ 函数默认为`cdecl`，并且您显示的声明没有另外说明。您已将其声明为`stdcall`在 Pascal 中。他们应该匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:21:00.900

1.  您确定 stdcall 约定吗？如果 C++ 文本中没有明确的说明（如 WINAPI、__stdcall 等），则使用 cdecl。

2.  不需要数据之前的'const'

3.  为 StOutput 分配内存

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T11:13:23.327

保留 PChar，并在调用前将 StOutput 初始化为非空字符串（足够长）。

# validation - XPages 多行编辑框验证在空行上失败

> ID：12744952
> 
> 赞同：0
> 
> 时间：2012-10-05T11:08:03.573
> 
> 标签：validation, xpages, multiline

尝试验证多行编辑框控件所需的内容时失败。我只使用简单的必需验证，如下所示：

```
<xp:inputTextarea
id="subject1"
rows="5"
style="width:99%"
value="${javascript:'#{compositeData.requestDocument.subject}'}"
multipleSeparator="#{javascript:@NewLine()}"
required="true">
<xp:this.validators>
    <xp:validateRequired
        message="Please explain the issue for which you need help." />
</xp:this.validators> 
```

如果我输入多行而没有空行，则验证成功：

“foo 第 1 行 foo 第 2 行 foo 第 3 行”

但是如果我用空行输入多行，则验证失败：

“foo 1 号线

foo 线 3"

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:35:05.217

好的，我自己想出了一个非常简单的解决方案。不知道这是否是正确的方法，但它似乎有效。

我将验证从 required 更改为 length (xp:validateRequired vs. xp:validateLength)，如下所示：

```
<xp:inputTextarea
    id="subject1"
    rows="5"
    style="width:99%"
    value="${javascript:'#{compositeData.requestDocument.subject}'}"
    multipleSeparator="#{javascript:@NewLine()}">
    <xp:this.validators>

        <xp:validateLength
            message="Please explain the issue for which you need help."
            minimum="2">
        </xp:validateLength>
    </xp:this.validators>
</xp:inputTextarea> 
```

# php - mysqli 为 INSERT 查询返回 true，未插入行

> ID：12744953
> 
> 赞同：0
> 
> 时间：2012-10-05T11:08:15.620
> 
> 标签：php, mysql, insert, mysqli

```
 if ($word != '' && $text != '') {
    $result = $conn->query("SELECT * FROM variables WHERE `word` = '$word'");
    if ($source = $result->fetch_assoc()) {
        $conn->query("UPDATE variables SET `text` = '$text' WHERE `word` = '$word'");
        echo 0;
    } else {
        if ($result = $conn->query("INSERT INTO variables (`word`, `text`) VALUES ('$word', '$text')"))
            echo 1;
    }
} 
```

以上是 INSERT 代码（和更新），UPDATE 代码工作正常，但是当调用 INSERT 查询时，查询返回`true`但当我检查数据时，它没有被插入。

任何帮助表示赞赏，在此先感谢。

编辑：

变量表结构：

```
`word` varchar(100) NOT NULL, //also PRIMARY KEY
`text` text NOT NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:11:50.610

你有一个`=`条件`if`。

也许你想要：

```
if ($result->num_rows){ // see if there are any rows
    $conn->query("UPDATE variables SET `text` = '$text' WHERE `word` = '$word'");
    echo 0;
} else {
    $conn->query("INSERT INTO variables (`word`, `text`) VALUES ('$word', '$text')");
    echo 1;
} 
```

测试：

```
$conn = new mysqli('localhost', 'root', '', 'test');
$word = 'word1';
$text = 'text1';

$result = $conn->query("SELECT * FROM variables WHERE `word` = '$word'");
if ($result->num_rows){
    $conn->query("UPDATE variables SET `text` = '$text' WHERE `word` = '$word'");
    echo 0;
} else {
    $conn->query("INSERT INTO variables (`word`, `text`) VALUES ('$word', '$text')");
    echo 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-21T18:37:36.727

我一直在努力解决同样的问题，但以不同的方式解决了它。

检查有多少行受到影响，像这样（这个例子使用 mysqli，但我希望你能明白这一点）：

```
$number_of_rows_affected = mysqli_affected_rows($conn); 
```

如果 $number_of_rows_affected = 0 则 INSERT 不起作用。大于 0 的数字表示插入成功。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-05T11:20:28.257

不知道为什么您在查询中使用“单词”和“文本”周围的反引号。为了调试这个，我将查询写入一个字符串并在执行之前打印它，以确保查询是我想要的，所以使用：

```
$query = "INSERT INTO variables (`word`, `text`) VALUES ('$word', '$text')"
print("$query")
if ($result = $conn->query($query))
        echo 1; 
```

你确定插入不起作用？您是否在检查之前关闭了数据库连接，也许在您检查时结果还没有提交到您的数据库？

# google-apps-script - Google Apps 脚本：如何在谷歌云存储上存储数据？

> ID：12744957
> 
> 赞同：0
> 
> 时间：2012-10-05T11:08:23.623
> 
> 标签：google-apps-script

我想将谷歌文档存储在谷歌云存储上。我是管理员用户，可以访问谷歌云存储。我使用这段代码：

```
 function myFunction() {

   var base="https://www.googleapis.com/auth/devstorage.full_control"
  var fetchArgs=googleOAuth_('provisioning',base)
  fetchArgs.payload=<content_data_that you want to put on GCS>
  fetchArgs.method='PUT'
  fetchArgs. contentType=<content_type>
  fetchArgs.host="<bucket_name>.storage.googleapis.com"
  var url='https://storage.googleapis.com/<bucket_name>/<file_name>' 
  var result=UrlFetchApp.fetch(url,fetchArgs)
    }

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
    oAuthConfig.setConsumerKey(consumerKey);
  oAuthConfig.setConsumerSecret(consumerSecret);
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

当我运行此代码时，它会给出 503 服务器错误。任何建议都会对我有所帮助。

这个问题已经解决了。用更正更新了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:48:24.050

我还没有尝试过，但它看起来可能会简化你的生活：

> OAuth服务
> 
> 作者：James Ferreira - GoogleScriptExamples.com
> 
> 该库无需使用 OAuth。它有一种方法 getAuth(' ', optUserScope) 并适用于所有 Google API。请参见此处的示例。
> 
> 项目密钥：MM5uQxqjwkMiuJW2zE50SgUF7jOZt2NQ8

请参阅： [https ://sites.google.com/site/scriptsexamples/custom-methods/google-oauth](https://sites.google.com/site/scriptsexamples/custom-methods/google-oauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:17:33.417

Google Cloud Storage 文档提到，如果您使用 OAuth 1.0，您还需要传递 API 密钥。

[https://developers.google.com/storage/docs/json_api/v1/how-tos/authorizing](https://developers.google.com/storage/docs/json_api/v1/how-tos/authorizing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T21:07:28.977

我还尝试使用 Google Apps Script 中的 Google Cloud Storage API。我找到了以下库：

[https://github.com/googleworkspace/apps-script-oauth2](https://github.com/googleworkspace/apps-script-oauth2)

那里的文档实际上更有帮助，因为它向我展示了我根本不需要这个库：

> 即使您的 API 不在其中，您仍然可以使用 Apps 脚本为您获取 OAuth2 令牌。只需编辑脚本的清单以包含您的 API 所需的其他范围。当用户授权您的脚本时，他们还将被要求批准这些额外的范围。然后在代码中使用方法 ScriptApp.getOAuthToken() 来访问脚本已获取的 OAuth2 访问令牌，并将其传递到 UrlFetchApp.fetch() 调用的 Authorization 标头中。
> 
> 访问示例[NoLibrary](https://github.com/googleworkspace/apps-script-oauth2/tree/master/samples/NoLibrary)以查看如何完成此操作的示例。

对我（和后代）的主要收获：

1.  使其`appsscript.json`可见并添加所需`oauthScopes`的所有[API 范围](https://developers.google.com/identity/protocols/oauth2/scopes#storage)以及`https://www.googleapis.com/auth/script.external_request`.

2.  将`UrlFetchApp.fetch()`第二个参数设置为`headers: {Authorization: 'Bearer ' + ScriptApp.getOAuthToken()}`

3.  忽略`&key=[YOUR_API_KEY]`在 Google API 示例中看到的。

# plugins - CRM 2011 - 在 C# 中通过字段的值查找记录

> ID：12744967
> 
> 赞同：2
> 
> 时间：2012-10-05T11:08:45.840
> 
> 标签：plugins, entity, record, crm

我有一个基本问题。我需要找到字段设置为特定值的记录的 guid。就像找到唯一一条“favouritecolor”属性设置为“red”的记录。（领域是唯一的，没有双重相同的颜色）

我要搜索的记录不是插件工作的实体类型。

我到处都在寻找这个，但只找到了很多关于获取刚刚创建的记录的 Guid 的教程，这对我没有多大帮助。应该使用标准的 sqlconnection 和 select 语句（例如 select guid from [table name] where favouritecolor = 'red'），还是有更漂亮的方法？

我将不胜感激任何形式的指导。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:54:17.910

终于找到了解决办法。希望这可以帮助某人。干杯!

```
 private static Entity getTheRecord(IOrganizationService service)
    {
        QueryExpression query = new QueryExpression();
        query.EntityName = "NameOfTheEntity";
        query.ColumnSet = new ColumnSet() { AllColumns = true };

        query.Criteria = new FilterExpression();
        query.Criteria.FilterOperator = LogicalOperator.And;
        query.Criteria.Conditions.Add
        (
            new ConditionExpression("fieldname", ConditionOperator.Equal, "desiredvalue")
        );
        EntityCollection entities = service.RetrieveMultiple(query);
        return entities[0];
    } 
```

# microsoft-metro - Metro 风格应用程序与 XML 的两种方式绑定

> ID：12744970
> 
> 赞同：0
> 
> 时间：2012-10-05T11:08:59.307
> 
> 标签：microsoft-metro

我可以在 Metro 风格应用程序（使用 WPF/C#）中对 XML 文档进行两种方式绑定吗？我希望在我对 UI 进行更改后立即更新我的 XML 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:45:52.547

可能您可以在文本框的“textChanged”事件或 Metro 应用程序的任何其他 UI 控件上调用 saveXML() 方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:31:00.547

您在询问 XAML 的 Mode=TwoWay 绑定（默认为 Mode=OneWay），但我认为您的真正意思是 UpdateSourceTrigger=PropertyChanged（如在 WPF 中），这在 WinRT 中有点技巧。答案在这里：[WinRT-XAML 中文本框的“UpdateSourceTrigger=PropertyChanged”等效项](https://stackoverflow.com/questions/12692885/updatesourcetrigger-propertychanged-equivalent-for-a-windows-8-textbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:49:30.327

当然。更新后调用您的方法，该方法将更新您的 xml 文件。它不会自动运行，您需要自己管理

# php - 从 CMS 中所见即所得的输出中排除 PHP

> ID：12744971
> 
> 赞同：0
> 
> 时间：2012-10-04T18:44:25.793
> 
> 标签：php, content-management-system, wysiwyg

我正在为我的一个站点编写一个基本的 CMS，并且遇到了一些页面需要动态服务 PHP 和 JS 的问题，而其他页面则是普通的 HTMl。我希望有一个设置可以允许需要它的页面使用它，并将加载 ACE 编辑器而不是不同的所见即所得编辑器。这里的挑战是，在我没有明确告诉它会有代码的页面上，我想拒绝任何输入该代码。我可以将其设置为为所有没有 JS 的页面插入一个，但我怎样才能阻止 php 代码运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:06:09.373

如果我得到你的问题，你需要使用 htmlentities 而不是 php 标签

```
<? ?>
&lt;? ?&gt; 
```

# c# - 更改从 wcf 服务方法返回的 json 对象包装器名称

> ID：12744974
> 
> 赞同：5
> 
> 时间：2012-10-05T11:09:12.360
> 
> 标签：c#, asp.net, json, wcf, wcf-binding

我创建了一个 WCF 3.5 应用程序，其名称`TestMe`定义如下：

```
 [OperationContract]
        [WebInvoke(UriTemplate = "/Login", Method = "POST",
            BodyStyle = WebMessageBodyStyle.Wrapped,
            ResponseFormat = WebMessageFormat.Json,
            RequestFormat = WebMessageFormat.Json)]
        MyDictionary<string, string> TestMe(string param1, string param2); 
```

`MyDictionary`使用此链接创建：[https ://stackoverflow.com/a/7590189/546033](https://stackoverflow.com/a/7590189/546033)

这里的一切都很好。但问题是从以下实现的方法返回数据时：

```
MyDictionary<string, string> success = new MyDictionary<string, string>();
success["desc"] = "Test";
return success; 
```

它返回以下 json：

```
{"TestMeResult":{"desc":"Test"}} 
```

而我需要的是：

```
{"success":{"desc":"Test"}} 
```

`success`对象名称在哪里。什么可以解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T19:59:50.800

您可以使用[MessageParameter](http://msdn.microsoft.com/en-us/library/system.servicemodel.messageparameterattribute.aspx)属性。

> 控制请求名称和响应参数名称。

```
[OperationContract]
    [WebInvoke(UriTemplate = "/Login", Method = "POST",
        BodyStyle = WebMessageBodyStyle.Wrapped,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)] 
    [return: MessageParameter(Name = "success")]
    MyDictionary<string, string> TestMe(string param1, string param2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T06:46:16.940

只需删除 BodyStyle = WebMessageBodyStyle.Wrapped，它默认为 WebMessageBodyStyle.Bare，但必须自己显式声明。

**编辑：**

由于您正在处理 JSON 并没有帮助，因为它适用于 XML 样式。所以步骤是：

1.  声明它是裸露的，这样你就可以发送 json.
2.  使用 json 反序列化器编写自己的包装器 (http://msdn.microsoft.com/en-us/library/bb412179.aspx)

您还可以查看此链接以了解内部情况：

[http://msdn.microsoft.com/en-us/library/bb412170.aspx](http://msdn.microsoft.com/en-us/library/bb412170.aspx)

# c# - 如何使用 Linq 根据字符串中的换行符创建 IEnumerable？

> ID：12744980
> 
> 赞同：4
> 
> 时间：2012-10-05T11:09:28.537
> 
> 标签：c#, linq

我在一个字符串中有一些 C# 代码，如下所示：

```
content = 'var expData = 
                        details.Select(x => x.Explanation.TextWithHtml).ToList();
var score = resData.SequenceEqual(ansData);
var explanation = "";'; 
```

如何使用 LINQ 将代码转换为以下代码？

```
<td>01</td><td>var expData = 
                  details.Select(x => x.Explanation.TextWithHtml ).ToList();</td>
<td>02</td><td>var score = resData.SequenceEqual(ansData);</td>
<td>03</td><td>var explanation = "";</td> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T11:12:31.767

听起来你想要这样的东西：

```
var lines = text.Split(new[] { "\r\n" }, StringSplitOptions.None)
                .Select((line, index) => 
                    string.Format("<td>{0:00}</td><td>{1}</td>",
                       index + 1, EscapeHtml(line))); 
```

不过，您需要编写`EscapeHtml`- 您不希望 C# 代码中的标签仍然作为 HTML 中的标签！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T11:15:56.570

这应该有效，您可以从以下位置获取索引[`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)：

```
IEnumerable<String> code =
    content.Split(new[] { Environment.NewLine }, StringSplitOptions.None)
           .Select((line, index) => 
                string.Format("<td>{0}</td><td>{1}</td>", 
                    (index + 1).ToString("D2"), line)); 
```

[如何：用前导零填充数字](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

# recursion - GNU Make 全局变量在子 make 中更新

> ID：12744985
> 
> 赞同：3
> 
> 时间：2012-10-05T11:09:46.023
> 
> 标签：recursion, makefile, global-variables

我需要一些关于我的 Makefile 项目的帮助。源目录看起来像这样。

```
|-- Makefile
|-- drivers
|   |-- Makefile
|   |-- tty
|       |-- Makefile
|       |-- console.c
|       |-- keyboard.c
|-- kernel
|   |-- Makefile
|   |-- kmain.c 
```

在顶部的 Makefile 中，我导出了一个变量 OBJECTS，我想用目标文件填充它，这样我就可以在顶部的 Makefile 中构建并将它们链接在一起。

我想通过执行以下操作来更新驱动程序/tty/Makefile 中的对象：

```
OBJECTS += $(CURDIR)console.o
OBJECTS += $(CURDIR)keyboard.o 
```

但是对 OBJECTS 的更改并没有冒泡到顶部的 Makefile。我一直在查看 Linux 源代码树中的 Makefile，它们似乎在做类似的事情。但是，我无法让它工作。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:41:00.920

当您递归运行 make 时，它​​会为每个后续调用 make 打开一个新的子外壳，因此您无法使用导出返回链。一种方法是每次调用 submake 以附加到对象列表文件，然后可能包含该文件。一个更好的解决方案可能是按照让你的主makefile`include`直接对这些子make文件中的每一个做一些事情，而不是在它们上调用make。`OBJECTS +=`此方法允许使用带有语句的每个 submake 文件来构建 OBJECTS 变量。另一个额外的好处是您只运行一个 make 实例而不是多个 submake，这允许 make 更好地生成依赖项。看看“递归使认为有害” [http://aegis.sourceforge.net/auug97.pdf](http://aegis.sourceforge.net/auug97.pdf)

[用户 Dan Molding https://stackoverflow.com/users/95706/dan-moulding](https://stackoverflow.com/users/95706/dan-moulding)之前在这里发布的一个很酷的 makefile 构建系统确实展示了很多很酷的东西，你可以用 submake 文件做很多事情，而只有一个主生成文件。Dan的boilermake项目在这里：[https ://github.com/dmoulding/boilermake](https://github.com/dmoulding/boilermake)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:45:14.373

您似乎正在递归地使用 Make ，例如

```
# Makefile:

export OBJECTS :=
all:
    $(MAKE) -C drivers/tty
    @echo OBJECTS is $(OBJECTS)

# drivers/tty/Makefile:

OBJECTS += $(CURDIR)console.o
all:
    whatever 
```

这是行不通的，因为每个 Make 都有自己的`OBJECTS`; 子 Make 不能修改父 Make 中的变量。它是`export`, not `import/export`or （没有or`share`之类的东西，我只是想说明一下）。`import/export``share`

您可以通过*包含*其他 makefile 而不是*调用*它们来获得所需的效果：

```
# Makefile:

OBJECTS :=
all: DRIVERS_TTY
    @echo OBJECTS is $(OBJECTS)

include drivers/tty/Makefile

# drivers/tty/Makefile:

OBJECTS += drivers/tty/console.o

DRIVERS_TTY:
    whatever 
```

你会注意到那里有一些令人不快的位置依赖性。`drivers/tty/Makefile`里面有“drivers/tty”，这使得维护很痛苦。`include`一旦你掌握了这个基本技巧，就有办法解决这个问题。

# wpf - VisualStateManager 无法为 ThicknessAnimations 生成过渡

> ID：12744989
> 
> 赞同：5
> 
> 时间：2012-10-05T11:10:00.877
> 
> 标签：wpf, xaml, animation, visualstatemanager

我定义了以下视觉状态：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup Name="EditStates">

        <VisualStateGroup.Transitions>
            <VisualTransition GeneratedDuration="0:0:2"/>
        </VisualStateGroup.Transitions>

        <VisualState Name="Editing" />                          
        <VisualState Name="Normal">
            <Storyboard>
                <ThicknessAnimation Storyboard.TargetName="ViewBorder" Storyboard.TargetProperty="Margin" To="0" Duration="0"/>
                <DoubleAnimation    Storyboard.TargetName="Header"     Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleY)" To="0" Duration="0"/>
                <ColorAnimation     Storyboard.TargetName="EditBorder" Storyboard.TargetProperty="Background.Color" To="Red" Duration="0"/>
            </Storyboard>
        </VisualState>                                          

    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

`DoubleAnimation`和`ColorAnimation`工作正常，为它们生成超过 2 秒的`VisualStateManager`过渡动画。

但是，`ThicknessAnimation`没有动画。相反，它会在过渡期结束时捕捉到完成值。

有什么方法可以`VisualStateManager`为其生成转换，还是我将被迫提供手动转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-07T11:59:03.630

我分析了问题并启动了[.NET Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)，发现`VisualStateManager`仅支持以下动画：

*   颜色动画
*   双动画
*   点动画

这有点糟糕，因为它没有在任何地方记录。

为了证明它不能生成动画，看一下`VisualStageManager.GenerateToAnimation`方法的逆向代码。还有一个`VisualStageManager.GenerateFromAnimation`支持相同的动画子集。

```
private static Timeline GenerateToAnimation(FrameworkElement root, Timeline timeline, IEasingFunction easingFunction, bool isEntering)
{
  Timeline destination = null;

  if (destination == null)
  {
    var targetColor = GetTargetColor(timeline, isEntering);
    if (targetColor.HasValue)
      destination = new ColorAnimation { To = targetColor, EasingFunction = easingFunction };
  }

  if (destination == null)
  {
    var targetDouble = GetTargetDouble(timeline, isEntering);
    if (targetDouble.HasValue)
        destination = new DoubleAnimation { To = targetDouble, EasingFunction = easingFunction };

  }

  if (destination == null)
  {
    var targetPoint = GetTargetPoint(timeline, isEntering);
    if (targetPoint.HasValue)
        destination = new PointAnimation { To = targetPoint, EasingFunction = easingFunction };
  }

  if (destination != null)
    CopyStoryboardTargetProperties(root, timeline, destination);

  return destination;
} 
```

底线... 您只能在 VisualStageManager 中使用 Color、Double 或 Point 动画。如果您需要其他东西，请恢复为老式触发器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:29:17.863

也许您的 ThicknessAnimation 语句不完整，我从 MSDN 的主题“ThicknessAnimation 类”中搜索流动代码示例。

```
<ThicknessAnimation
                  Storyboard.TargetProperty="BorderThickness"
                  Duration="0:0:1.5" FillBehavior="HoldEnd" From="1,1,1,1" To="28,14,28,14" /> 
```

希望这可以帮助你...

# .net - 审核登录用户

> ID：12744992
> 
> 赞同：0
> 
> 时间：2012-10-05T11:10:17.710
> 
> 标签：.net, wcf

我有 2 个盒子说 Machine1 和 Machine2。两者都在同一个域 (ABC_Domain) 网络中。.net Web 应用程序 (DotNet_Web_App) 和 WCF (WCF_Service) 分别托管在 Machine1 和 Machine2 中。DotNet_Web_App 和 WCF_Service 都通过 IIS 托管。以及将 IIS 配置为在同一域帐户 (ABC_Domain\ServiceAccount) 上运行的应用程序池。现在，用户 (ABC_Domain\User1) 正在访问 Web 应用程序 DotNet_Web_App，该应用程序与 WCF_Service 交互以进行某种操作。

是否可以在 WCF_Service 中捕获尝试通过 Web 应用程序访问它的实际用户？在上面给出的这个场景中，我可以在 WCF_Service 中找到 ABC_Domain\User1 吗？这是为了审核 WCF_Service 中尝试访问它的实际用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:42:53.453

尝试检查`System.ServiceModel.ServiceSecurityContext.Current.PrimaryIdentity`，

[http://msdn.microsoft.com/en-us/library/system.servicemodel.servicesecuritycontext.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicesecuritycontext.aspx)

[http://davesquared.net/2008/04/getting-current-identity-in-wcf.html](http://davesquared.net/2008/04/getting-current-identity-in-wcf.html)

# ios - 如何判断 iPhone 二进制文件是否已编译为与位置无关的可执行文件

> ID：12744993
> 
> 赞同：2
> 
> 时间：2012-10-05T11:10:26.447
> 
> 标签：ios, xcode4.3, xcodebuild

我有一个自动构建过程，它使用 xcodebuild 和 xcrun 的组合编译 iPhone 应用程序。当构建调用 xcodebuild 时，它会传入一个覆盖某些设置的 xcconfig 文件。

`IPHONEOS_DEPLOYMENT_TARGET = 4.3`

`ARCHS = armv7`

`VALID_ARCHS = armv7`

`LD_NO_PIE = NO`

从理论上讲，这应该确保构建的二进制输出是与位置无关的可执行文件。有没有办法检查二进制文件，看看是否真的如此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:53:33.740

使用“otool -vh”，您可以看到“PIE”标志：

```
$ otool -vh YourApp
YourApp:
Mach header
      magic cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
   MH_MAGIC     ARM         V7  0x00     EXECUTE    28       3532   NOUNDEFS DYLDLINK TWOLEVEL PIE 
```

# javascript - 在javascript中查找字符串中第n次出现的字符

> ID：12744995
> 
> 赞同：25
> 
> 时间：2012-10-05T11:10:37.460
> 
> 标签：javascript

我正在编写一个 javascript 代码来查找字符串中第 n 次出现的字符。使用该**`indexOf()`**函数，我们可以获得字符的第一次出现。现在的挑战是让角色第 n 次出现。我能够使用下面给出的代码获得第二次第三次出现，依此类推：

```
function myFunction() {
  var str = "abcdefabcddesadfasddsfsd.";

  var n = str.indexOf("d");
  document.write("First occurence " +n );

  var n1 = str.indexOf("d",parseInt(n+1));
  document.write("Second occurence " +n1 );

  var n2 = str.indexOf("d",parseInt(n1+1));
  document.write("Third occurence " +n2 );

  var n3 = str.indexOf("d",parseInt(n2+1));
  document.write("Fourth occurence " +n3);

  // and so on ...
} 
```

结果如下

```
First occurence 3 
Second occurence 9 
Third occurence 10 
Fourth occurence 14 
Fifth occurence 18 
Sixth occurence 19 
```

我想概括脚本，以便我能够找到第 n 次出现的字符，因为上面的代码要求我们重复脚本 n 次。让我知道是否有更好的方法或替代方法来做同样的事情。如果我们只给出事件（在运行时）来获取该字符的索引，那就太好了。

以下是我的一些问题：

*   我们如何在 JavaScript 中做到这一点？
*   是否有任何框架提供任何功能以更简单的方式执行相同的实现，或者在其他框架/语言中实现相同的替代方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-05T11:22:05.440

```
function nth_occurrence (string, char, nth) {
    var first_index = string.indexOf(char);
    var length_up_to_first_index = first_index + 1;

    if (nth == 1) {
        return first_index;
    } else {
        var string_after_first_occurrence = string.slice(length_up_to_first_index);
        var next_occurrence = nth_occurrence(string_after_first_occurrence, char, nth - 1);

        if (next_occurrence === -1) {
            return -1;
        } else {
            return length_up_to_first_index + next_occurrence;  
        }
    }
}

// Returns 16\. The index of the third 'c' character.
nth_occurrence('aaaaacabkhjecdddchjke', 'c', 3);
// Returns -1\. There is no third 'c' character.
nth_occurrence('aaaaacabkhjecdddhjke', 'c', 3); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-05T11:15:30.280

您可以通过使用 实现一个函数来轻松地做到这一点`charAt()`，如下所示：

```
function nth_ocurrence(str, needle, nth) {
  for (i=0;i<str.length;i++) {
    if (str.charAt(i) == needle) {
        if (!--nth) {
           return i;    
        }
    }
  }
  return false;
}

alert( nth_ocurrence('aaaaacabkhjecdddchjke', 'c', 3)  );//alerts 16 
```

感谢 CQQL 让我知道 OP 真正想要什么。我更新了一些我原来的功能来实现新的行为。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-05T13:57:02.983

indexOf 接受第二个参数，即开始搜索的字符串中的字符索引。

```
function nthChar(string, character, n){
    var count= 0, i=0;
    while(count<n && (i=string.indexOf(character,i)+1)){
        count++;
    }
    if(count== n) return i-1;
    return NaN;
}

var s= 'abcbbasdbgasdnnaabaasdert';

nthChar(s,'a',7); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-15T09:02:30.633

所以一个很好的方法是像这样扩展字符串类：

```
(function() {
  String.prototype.nthOccurrenceIndex = function(charToMatch, occurrenceIndex) {
    var char, index, matches, _i, _len;
    matches = 0;
    index = 0;
    for (_i = 0, _len = this.length; _i < _len; _i++) {
      char = this[_i];
      if (char === charToMatch) {
        matches += 1;
        if (matches === occurrenceIndex) {
          return index;
        }
      }
      index += 1;
    }
    return -1;
  };

}).call(this); 
```

更简洁的 CoffeeScript 版本：

```
String.prototype.nthOccurrenceIndex = (charToMatch, occurrenceIndex)->
  matches = 0
  index = 0

  for char in @
    if char is charToMatch
      matches += 1

      return index if matches is occurrenceIndex

    index += 1

  -1 
```

因此，现在您可以执行以下操作：

> "abcabc".nthOccurrenceIndex('a', 1)
> # -> 0
> 
> "abcabc".nthOccurrenceIndex('a', 2)
> # -> 3
> 
> "abcabc".nthOccurrenceIndex('a', 3)
> # -> -1

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-01T06:26:36.007

一个可能更清晰的功能。递归和复制机制`indexOf`：

*   *如果 nth 的数字不正确*（即 <= 0），不会导致错误。它将返回`-1`，就像您可以给出一个负数（或大于字符串的长度）`fromIndex`一样`indexOf`。
*   可以带`fromIndex`参数（与 for 相同`indexOf`：*一个整数，表示开始搜索的索引；默认值为 0。*）

```
function indexOfNth (string, char, nth, fromIndex=0) {
  let indexChar = string.indexOf(char, fromIndex);
  if (indexChar === -1){
    return -1;
  } else if (nth === 1) {
    return indexChar;
  } else {
    return indexOfNth(string, char, nth-1, indexChar+1);
  }
}

let test = 'string for research purpose';
console.log('first s:', indexOfNth(test, 's', 1));
console.log('second s:', indexOfNth(test, 's', 2));
console.log('15th s:', indexOfNth(test, 's', 15));
console.log('first z:', indexOfNth(test, 'z', 1));
console.log('-1th s:', indexOfNth(test, 's', -1));
console.log('first s starting from index=1:', indexOfNth(test, 's', 1, 1));
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-31T15:05:00.843

```
function nthIndexOf(search, n) {
    var myArray = []; 
    for(var i = 0; i < myStr.length; i++) {
        if(myStr.slice(i, i + search.length) === search) {
            myArray.push(i);            
        }
    }   
    return myArray[n - 1];
} 
```

# jquery - 我如何测试 jQuery 是否隐藏了某些东西？

> ID：12744996
> 
> 赞同：53
> 
> 时间：2012-10-05T11:10:37.817
> 
> 标签：jquery, visibility

> **可能重复：**
> [测试是否使用 jQuery 隐藏了某些内容](https://stackoverflow.com/questions/178325/testing-if-something-is-hidden-with-jquery)

在 jQuery 中，假设您有某种要隐藏和显示的元素，`.hide()`使用`.show()`或`.toggle()`. 您如何测试该元素当前是否在屏幕上隐藏或可见？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-05T11:11:18.533

尝试

```
$("some-selector").is(':hidden'); 
```

或者

```
$("some-selector").is(':visible'); 
```

这是 the[`:visible`](http://api.jquery.com/visible-selector/)和[`:hidden`](http://api.jquery.com/hidden-selector/)selectors 的文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T11:13:51.933

```
$('.target').is(':hidden') // returns true if the element is hidden
$('.target').is(':visible') // returns true if the element is visible 
```