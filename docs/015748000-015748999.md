# StackOverflow 问答 15748000-15748999

# c# - 当前上下文中不存在名称“*”

> ID：15748000
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:12:45.097
> 
> 标签：c#, javascript

我需要在只有一个关闭按钮（没有后退按钮等）的新窗口中打开一个网站。我找到了以下脚本，但它不起作用，我希望有人能解释原因：

```
string WindowOpen = "window.open('Notes.aspx?NoteTableId=" + id + 
                    "&NoteTable=" + Tables.InvoiceHeader + "', 
                    'theWin', 'width=200,height=200,toolbar=0,menubar=0');"; 
```

但是，当我的页面加载时，我收到以下错误：

```
The name 'id' does not exist in the current context
The name 'Tables' does not exist in the current context 
```

我不确定那是什么意思。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:21:27.700

您收到的错误表明您尚未定义您在字符串中使用的变量。`+`您使用的语法用于字符串连接。当编译器看到它时，它会说“获取这些片段中的每一个，必要时转换为字符串，然后附加它们。”

因为您还没有定义什么`id`是，编译器告诉您需要先定义它，然后计算机才能将其值转换为字符串并将其连接起来。与 相同`Tables`。

看起来您可能是从其他代码或文章中复制的。您可能会考虑在您自己的应用程序中是否需要这些变量？

# python - numpy中的反转数组？

> ID：15748001
> 
> 赞同：15
> 
> 时间：2013-04-01T17:12:49.207
> 
> 标签：python, arrays, numpy

[Numpy 暂定教程](http://www.scipy.org/Tentative_NumPy_Tutorial)建议这`a[ : :-1]`是一个颠倒的`a`. 有人可以解释一下我们是如何到达那里的吗？

我理解这意味着（轴= 0）`a[:]`的每个元素。`a`根据我的理解，下一步`:`应该表示要跳过（或句号）的元素数量。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T17:26:25.640

它不是 numpy，它是 Python。

在 Python 中，有用于序列/可迭代的切片，其语法如下

```
seq[start:stop:step] => a slice from start to stop, stepping step each time. 
```

所有参数都是可选的，但`:`必须有 a 才能让 Python 将其识别为切片。

step 的负值也可以以相反的顺序复制相同的序列/可迭代：

```
>>> L = range(10)
>>> L[::-1] 
[9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 
```

numpy 像任何优秀的 3rd 方库一样遵循“规则”..

```
>>> a = numpy.array(range(10))
>>> a[::-1]
array([9, 8, 7, 6, 5, 4, 3, 2, 1, 0]) 
```

看到[这个链接](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-01T17:16:04.340

正如其他人所指出的，这是一种 python 切片技术，numpy 也紧随其后。希望这有助于解释它是如何工作的：

最后一位是步长。`1`表示一次一个元素， 则相反`-`。

空白表示第一个和最后一个，除非您的步长为负，在这种情况下它们表示最后一个和第一个：

```
In [1]: import numpy as np

In [2]: a = np.arange(5)

In [3]: a
Out[3]: array([0, 1, 2, 3, 4])

In [4]: a[0:5:1]
Out[4]: array([0, 1, 2, 3, 4])

In [5]: a[0:5:-1]
Out[5]: array([], dtype=int64)

In [6]: a[5:0:-1]
Out[6]: array([4, 3, 2, 1])

In [7]: a[::-2]
Out[7]: array([4, 2, 0]) 
```

第 5 行给出了一个空数组，因为它试图从第`0`th 个元素向后退到第 th 个元素`5`。
切片不包括“端点”（命名为最后一个元素），因此`0`向后移动时第 6 行会丢失。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-01T17:17:47.143

这不是 numpy 特有的，切片`a[::-1]`等价于[`slice(None, None, -1)`](http://docs.python.org/2/library/functions.html#slice)，其中第一个参数是开始索引，第二个参数是结束索引，第三个参数是步骤。 `None`for start 或 stop 将具有与使用序列的开头或结尾相同的行为，并且`-1`for step 将以相反的顺序遍历序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T14:12:46.990

您可以使用[反向](https://docs.python.org/3.7/library/functions.html#reversed)Python 内置：

```
import numpy as np

bins = np.arange(0.0, 1.1, .1)
for i in reversed(bins):
    print(i) 
```

# drupal - Drupal 7 块配置模块

> ID：15748005
> 
> 赞同：0
> 
> 时间：2013-04-01T17:12:57.787
> 
> 标签：drupal

我在 drupal 7 中实现模块时遇到问题。

整个模块最初显示带有当前用户创建的五个最新节点的链接的块，并且在配置部分中，用户可以更改显示的节点数量。

我确实设法实现了显示当前用户创建的五个最新节点的块，但我没有设法使块配置正常工作。

首先，我制作了如下所示的配置表单：

```
function latest_posts_block_configure($delta = ''){
  $form = array();
  if($delta == 'latest_posts'){
    $form['latest_posts'] = array(
      '#type' => 'select',
      '#title' => t('Number of recent content items to display'),
      '#default_value' => variable_get('latest_posts', 3),
      '#options' => drupal_map_assoc(array(2, 3, 4, 5, 6, 7, 8, 9, 10)),
    );
  )
  return $form
} 
```

此块配置表单工作正常，但我不知道如何实现 hook_block_save （应该（我猜）应用配置表单中选择的选项）。

我的想法是获取从表单中选择的值并将其放入提取节点的 sql 查询中，但由于我是 drupal 初学者，我仍然在努力解决它。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:39:14.830

[http://api.drupal.org/api/drupal/modules%21block%21block.api.php/function/hook_block_save/7](http://api.drupal.org/api/drupal/modules%21block%21block.api.php/function/hook_block_save/7)可以给你一个提示。然后，您可以在查询中使用您在配置中设置的变量。

# c++ - 为什么这个 CCSpriteFrame 为空？

> ID：15748006
> 
> 赞同：0
> 
> 时间：2013-04-01T17:13:04.193
> 
> 标签：c++, cocos2d-iphone

下面的代码在类的 init() 部分编译并运行良好，但是当我尝试为它创建一个单独的方法时，CCSpriteFrame 最终为空，我想了解这次我让自己进入的概念假设=s

```
void SceneView::runZoo(Animal& animal, std::string attack) {
    //
    // Animation using Sprite BatchNode
    //
    std::string spriteName;
    CCSpriteFrameCache* cache = CCSpriteFrameCache::sharedSpriteFrameCache();
    CCSize iSize = CCDirector::sharedDirector()->getWinSize();

    spriteName = "killerRabbit.plist";
    cache->addSpriteFramesWithFile(spriteName.c_str());

    spriteName = "killerRabbit1.png";
    sprite = CCSprite::createWithSpriteFrameName(spriteName.c_str());
    sprite->setPosition( ccp(iSize.width/2 - 160, iSize.height/2 - 40) );

    spriteName = "killerRabbit.png";
    CCSpriteBatchNode* spritebatch = CCSpriteBatchNode::create(spriteName.c_str());
    spritebatch->addChild(sprite);
    this->addChild(spritebatch);

    CCArray* animFrames = CCArray::createWithCapacity(15);

    spriteName = "killerRabbit";
    char str[100] = {0};
    for(int i = 1; i <= 9; i++) {
        sprintf(str, (spriteName + "%d.png").c_str(), i);
        CCSpriteFrame* frame = cache->spriteFrameByName(str);
//Null here
        animFrames->addObject(frame);
//Null here
    }

    CCAnimation* animation = CCAnimation::createWithSpriteFrames(animFrames, 0.15f);
    sprite->runAction( CCRepeatForever::create(CCAnimate::create(animation)) );
} 
```

实际错误：

```
/** Appends an object. Behavior undefined if array doesn't have enough capacity. */
void ccArrayAppendObject(ccArray *arr, CCObject* object)
{
    CCAssert(object != NULL, "Invalid parameter!");
    object->retain();
    arr->arr[arr->num] = object;
    arr->num++;
} 
```

这意味着 CCSpriteFrameCache 可能由于某种原因被清空，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:13:10.573

`frame == null`当指定的图像不存在时。我认为您最好查看`plist`文件或找到导致错误的帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:05:16.617

我在 C++ 环境中使用 cocos2d 的工作不多，但我知道在 Objective-c 中你可以使用数组之前你必须这样做

```
CCArray *array = [[CCArray alloc] initWithCapacity:15]; 
```

如果您不这样做，它将始终为空。我会假设它与 C++ 相同

# android - 在智能手机应用程序上拨打电话

> ID：15748008
> 
> 赞同：0
> 
> 时间：2013-04-01T17:13:13.537
> 
> 标签：android, ios, smartphone

我们目前正在设计一个应用程序原型，该应用程序将具有适用于 android 和 iPhone 系统的版本。在用户交互时，应用程序应该开始拨打电话号码，但由于内部安全原因，用户不应该看到电话号码。我知道可以告诉操作系统拨打哪个号码，但是否可以向用户隐藏号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:06:13.280

不，我很好奇，你为什么要这么做？

一个可能的解决方案（取决于“为什么”）是：让设备通过 http 连接到网络服务器，告诉服务器电话号码是什么。然后让该网络服务器从“隐藏”号码拨打电话。显然，网络服务器必须连接到某些拨号机。

# asp.net - ObjectDisposedException 使用 Include 时 - 为什么？

> ID：15748009
> 
> 赞同：0
> 
> 时间：2013-04-01T17:13:14.503
> 
> 标签：asp.net, entity-framework-4.1

我的页面调用使用通用存储库“查找”方法的服务层方法。在服务层方法中，我执行以下操作：

```
 using (IUnitOfWork unitOfWork = new DBContext())
                {
                    GenericRepository<Operator> operatorRepos = new GenericRepository<Operator>(unitOfWork);
                    {
                        try
                        {
                            var oper = operatorRepos.Find(o => o.OperatorID == operatorID).Include(o => o.cmn_Address).Single();
                            return oper;
                        }
                        catch (InvalidOperationException exc)
                        {
                            //handle exception
                        }
                    }
                } 
```

我的存储库的 Find 方法：

```
public IQueryable<T> Find(Func<T, bool> predicate)
        {
            return _objectSet.Where<T>(predicate).AsQueryable();
        } 
```

在页面上，我尝试访问 Operator 的 cmn_address 导航属性，但出现以下错误：

ObjectContext 实例已被释放，不能再用于需要连接的操作。

我意识到这是由处理上下文的 using 语句引起的，但我认为 Include 方法会急切加载 cmn_Address 对象。我不明白为什么这不能按我的预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:50:33.873

您正在使用`Func<>`而不是`Expression<Func<>>`在您的 where 条件下。这使它成为 Linq-to-objects。这种变化是永久性的。调用`AsQueryable`不会再次使其成为 Linq-to-entities。

# java - Jdo (datanucleus) integer_idx 列和数据绑定

> ID：15748012
> 
> 赞同：2
> 
> 时间：2013-04-01T17:13:21.417
> 
> 标签：java, jdo, datanucleus

我一直在尝试在 DataNucleus JDO 中进行简单的一对多对象绑定。它只是两个类（我剥离了一个简单的字段）：

```
@PersistenceCapable(table="ORDER",schema="mgr")
public class Order {
    @PrimaryKey(column="id")
    @Persistent(valueStrategy=IdGeneratorStrategy.NATIVE,column="id")    
    private Long id;

    @Persistent(defaultFetchGroup="false",column="customer_id")
    @Element(column="customer_id")  
    private Customer customer;
} 
```

还有一个类 Customer 有一个订单列表

```
@PersistenceCapable(table="customer",schema="mgr",identityType=IdentityType.DATASTORE)
@DatastoreIdentity(strategy=IdGeneratorStrategy.NATIVE)
public class Customer {
    @PrimaryKey
    @Persistent(valueStrategy=IdGeneratorStrategy.NATIVE,column="id")    
    private Long id;

    @Persistent(mappedBy="customer") 
    private List<Order> orders;
} 
```

数据库表设置非常简单（客户表和订单表，外键（customer_id）引用客户）。然而，当我尝试为客户插入一些订单时，我收到一个错误

> `ORDER` javax.jdo.JDODataStoreException：使用语句“INSERT INTO ( `USER_COMMENT`, `ORDER_DATE`, `STATUS`, `CUSTOMER_ID`, ) VALUES (?,?,?,?,?)”插入对象“test.Order@17dd585” `ORDERS_INTEGER_IDX`失败：“字段”中的未知列“ORDERS_INTEGER_IDX”列表'

DataNucleus 以某种方式假设，有一个列 ORDERS_INTEGER_IDX （数据库中不存在这样的列）。我想到的唯一想法是[http://www.datanucleus.org/products/datanucleus/jdo/metadata_xml.html](http://www.datanucleus.org/products/datanucleus/jdo/metadata_xml.html)

> 在某些情况下，DataNucleus 会将一个特殊的数据存储列添加到连接表中，以便集合可以允许存储重复元素。此扩展允许使用列名的规范。这应该在关系的集合端的字段中指定。JDO2 不允许这样一个规范的标准位置，扩展标签也是如此。

非常酷！'在某些情况下'。我不知道如何让我的情况不成为“某些情况”的一个子集，但我不知道如何让它发挥作用。也许有人已经遇到过“INTEGER_IDX”问题？或者（也很有可能）-我没有正确绑定数据：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:54:47.840

所以你自己创建模式。您的架构与元数据不一致。您在没有针对模式验证元数据的情况下运行持久性，并导致异常结果。DataNucleus 为您提供了 SchemaTool 来根据您的元数据创建或验证模式，这意味着您可以检测到问题。

您正在使用*索引*列表，因此它需要每个元素的索引（或者如何知道元素的位置？）。它怎么能假设有一个索引？嗯，这是一个叫做 JDO 规范（公开可用）的东西，它定义了索引列表。如果您不希望存储元素的位置，则不要使用 List （用于保留元素位置的 Java util 类）......所以我建议使用 Set 因为它不需要位置信息（因此没有索引）。

您还有一个标记为数据存储标识的类，然后有一个主键。这是一个矛盾......你有一个或另一个。文档定义了所有这些，以及如何拥有 1-N 列表关系（“JDO API”->“映射”->“字段/属性”->“1-N 关系”->“列表”或“套”）

# c++ - 使用 boost::is_any_of 拆分会混淆分隔符 ",," 和 ","

> ID：15748018
> 
> 赞同：4
> 
> 时间：2013-04-01T17:13:43.883
> 
> 标签：c++, boost

我目前有一个具有以下结构的字符串

```
xxx,xxx,xxxxxxx,,xxxxxx,xxxx 
```

现在我正在使用以下代码

```
 std::vector< std::string > vct;
 boost::split( vct, str, boost::is_any_of(",,") ); 
```

现在，一旦找到“，”而不是“，”，提升就会拆分字符串，这是我不想要的。有什么方法可以明确指定它只在找到“，”而不是“，”时才拆分

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:28:05.007

`is_any_of(",,")`将匹配列表中指定的任何内容。在这种情况下，`,`要么`,`

您正在寻找的是沿线

```
boost::algorithm::split_regex( vct, str, regex( ",," ) ) ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-18T04:27:01.223

备查..

boost::split 采用第四个参数`eCompress`，可以让您将相邻的分隔符视为单个分隔符：

> **eCompress**
> 
> 如果 eCompress 参数设置为 token_compress_on，则将相邻的分隔符合并在一起。否则，每两个分隔符分隔一个标记。

您所要做的就是指定参数。您也可以跳过第二个`,`，如下所示：

```
boost::split( vct, str, boost::is_any_of(","),
              boost::algorithm::token_compress_on) 
```

[这是文档。](http://www.boost.org/doc/libs/1_55_0/doc/html/boost/algorithm/split_idp58609016.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:25:52.927

Is_any_of 拆分字符串中的任何字符。它不会做你想做的事。您需要在 boost 手册中查找另一个谓词。

编辑：出于好奇，我自己去查看 API，不幸的是我找不到你想要的现成谓词。最坏的情况是你必须自己写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:35:37.377

```
#include <functional>
#include <boost/algorithm/string/compare.hpp>
...

std::vector< std::string > vct;
//boost::split( vct, str, [](const auto& arg) { return arg == str::string(",,"); } );
boost::split( vct, str, std::bind2nd(boost::is_equal, std::string(",,")) ); 
```

# c++ - Linux信号量，在forked->exec'd进程之间共享？

> ID：15748020
> 
> 赞同：0
> 
> 时间：2013-04-01T17:13:47.850
> 
> 标签：c++, linux, synchronization, ipc, semaphore

假设我有一个分叉孩子的父母。分叉的孩子然后使用 exec() 来更改它的进程映像。孩子和父母现在都在使用管道进行主动数据交换。我想使用信号量同步这个数据交换。据我了解，我将在分叉之前在父级中创建信号量。但是，在 exec() 之后，孩子可以访问这个信号量吗？如果没有，还有其他方法可以使用信号量来建立同步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:14:48.917

从[exec 手册页](http://pubs.opengroup.org/onlinepubs/009695399/functions/execlp.html)：
`[SEM] Any named semaphores open in the calling process shall be closed as if by appropriate calls to sem_close().`
所以在调用 exec 之后，您无法到达父级中的任何打开的信号量。

当然，您根本不必担心这一点，如果您希望两个进程共享一个信号量，只需使用[名为 semaphores 的 posix](http://linux.die.net/man/7/sem_overview)即可。

这个想法很简单，你在一个进程中创建一个信号量并给它一个名字；另一个进程只需要具有名称，然后它就可以打开该信号量。

# java - 将 Java 中的 TextField 中的值插入数据库

> ID：15748027
> 
> 赞同：1
> 
> 时间：2013-04-01T17:14:16.947
> 
> 标签：java, swing, jtextfield, sql-insert, actionevent

我是这里的新手，我会遇到一个很难得到答案的问题。我需要用 Java 设置一个程序，使用户能够根据他们在 TextField 中键入的内容将值插入数据库。这是我创建的 3 个类：

```
public class Odabrani{

    public int id;
    String ime;
    String prezime;

        public Odabrani(int id, String ime, String prezime){

            this.id=id;
            this.ime=ime;
            this.prezime=prezime;

        }
}

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

    public class MySQL{ 
        public static Connection connect() throws InstantiationException, ClassNotFoundException, IllegalAccessException, SQLException{
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection conn = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/prodavnica", "root", "");
            return conn;
        }
    public static void Obrisi(int id) throws InstantiationException, IllegalAccessException, ClassNotFoundException, SQLException{
        Connection conn = connect();
        Statement st = (Statement) conn.createStatement();
        st.execute("delete from prodavac where id = " + id);
        conn.close();
    }

    public static List<Prodavac> GetProdavci() throws InstantiationException, IllegalAccessException, ClassNotFoundException, SQLException {

    Connection conn = connect();
    Statement st = (Statement) conn.createStatement();
    st.executeQuery("select * from prodavac");
    ResultSet rs = st.getResultSet();
    List<Prodavac> pr = new ArrayList<Prodavac>();
    while(rs.next()){
        pr.add(new Prodavac(rs.getInt(1),rs.getString(2),rs.getString(3)));
        //String ime = rs.getString(2);

    }
    conn.close();
        return pr;

        }

    public static void Dodaj(String ime, String prezime) throws InstantiationException, IllegalAccessException, ClassNotFoundException, SQLException{
        Connection conn = connect();
        PreparedStatement pst = conn.prepareStatement("insert into prodavac (id, ime, prezime) values (null,' ,' ) + ime, prezime;");
        conn.close();
    }

    }

import java.awt.Button;
import java.awt.FlowLayout;
import java.awt.Frame;
import java.awt.List;
import java.awt.TextField;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.JRootPane;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author v
 */
**public class Main** {
       static TextField unos;
       public static Prodavac odabrani_prodavac;
       public static JComboBox c;
       public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException{
        Frame f = new Frame("Biblioteka");
        f.setSize(300, 300);
        f.setLocation(300, 300);
        f.setVisible(true);
        f.setLayout(new FlowLayout()); 
        c = new JComboBox();
        List l = new List();
        unos = new TextField(20);
        f.add(unos);

        unos.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                try {
                    MySQL.Dodaj(odabrani_prodavac.ime, odabrani_prodavac.prezime);
                } catch (InstantiationException ex) {
                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                } catch (IllegalAccessException ex) {
                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                } catch (ClassNotFoundException ex) {
                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                } catch (SQLException ex) {
                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        });

        Button b = new Button("obrisi");
        b.addActionListener(new ActionListener() {

               @Override
               public void actionPerformed(ActionEvent e) {
                   if(odabrani_prodavac!=null)
                   try {
                       MySQL.Obrisi(odabrani_prodavac.id);
                       c.removeAllItems();
                       java.util.List<Prodavac> prlist = MySQL.GetProdavci();
                        for(Prodavac p: prlist)
                            c.addItem(p);

                   } catch (InstantiationException ex) {
                       Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                   } catch (IllegalAccessException ex) {
                       Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                   } catch (ClassNotFoundException ex) {
                       Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                   } catch (SQLException ex) {
                       Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                   }
               }
           });

        java.util.List<Prodavac> prlist = MySQL.GetProdavci();
        for(Prodavac p: prlist)
               c.addItem(p);
        f.add(c);
        f.add(b);
        c.addItemListener(new ItemListener() {

               @Override
               public void itemStateChanged(ItemEvent e) {
                   if(e.getStateChange()==ItemEvent.SELECTED){
                    Prodavac p = (Prodavac)e.getItem();
                    odabrani_prodavac = p;
                    JOptionPane.showMessageDialog(null, "Odabrali ste: " + p.toString());
                   }
               }
           });

       }
} 
```

现在，如果您注意这一点，您会发现 delete() 和 gettAll() 方法都可以完美运行，但困扰我的是插入方法。我如何处理有问题的代码，以便将用户输入的文本存储到数据库中。请指教。谢谢你！伊万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:17:46.847

将您的插入语句更改为

```
PreparedStatement pst = conn.prepareStatement("insert into prodavac (id, ime, prezime) values (null,'"+ime+"','"+prezime+"'" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:25:45.993

`PreparedStatement`提供占位符字符以防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击以及处理可能需要的任何引号的插入。此外，如果`id`是一个*自动增量*字段，您可以从以下内容中省略它`SQL`：

```
PreparedStatement pst = 
    conn.prepareStatement("insert into prodavac (ime, prezime) values (?, ?)");
pst.setString(1, ime);
pst.setString(2, prezime);
pst.executeUpdate(); 
```

# email - VBScript 修改电子邮件内容类型

> ID：15748034
> 
> 赞同：0
> 
> 时间：2013-04-01T17:14:46.670
> 
> 标签：email, vbscript, smtp

我为 SharePoint 2010 设置了传入电子邮件，并使用该方法从 InfoPath 发送表单，并在 SharePoint Server 计算机上设置了 SMTP 服务器。这似乎比使用 InfoPath 代码隐藏选项提升匿名用户的权限更容易。我还尝试了一种发送电子邮件的自定义方法，但找不到使用 InfoPath 2010 代码隐藏选项将表单数据与电子邮件一起发送的方法。所以，我找到了另一种方法，使用来自[SharePoint UK](http://sharepoint-uk.blogspot.com/2008/03/wss-emailing-itself-x-mailer-windows.html?showComment=1364573505999#c4245325941450576181)网站的建议。

我的问题是，虽然删除 x-mailer 标头实际上解决了我关于整个电子邮件的问题，但它不允许将附加的表单数据发送到库。如果我没有启用“保存原始电子邮件”设置，该消息将被导入然后消失。检查放置文件夹中的消息，我发现它们的内容类型为“multipart/related”，如果我使用 NotePad++ 编辑它们，我可以将其更改为“multipart/mixed”，然后将根据需要导入附加的表单数据。

所以我开始尝试修改 VB 脚本以实现这一点，但现在脚本根本没有任何反应。显然我做错了什么，而 VBScript 真的不是我的专业领域。也许只是无法编辑这些字段，或者我需要从不同的角度对其进行攻击。如何让我的 VBScript 编辑这些电子邮件的内容类型？

代码：

```
 Set shell = CreateObject("WScript.Shell")
    shell.LogEvent 4, "starting mail filter"
    if instr(iMsg.Fields("urn:schemas:mailheader:content-type"), "related") > 1 then
        Dim logMsg = "Mail Type:  " & iMsg.Fields("urn:schemas:mailheader:content-type")
        Dim tempType = Replace(iMsg.Fields("urn:schemas:mailheader:content-type"), "related", "mixed")
        shell.LogEvent 4, iMsg.Fields("urn:schemas:mailheader:content-type")
        iMsg.Fields.Delete("urn:schemas:mailheader:content-type")
        iMsg.Fields.Item("urn:schemas:mailheader:content-type") = tempType
        iMsg.Fields.Update
        shell.LogEvent 4, iMsg.Fields("urn:schemas:mailheader:content-type")
    end if
    shell.LogEvent 4, "end mail filter"
    iMsg.DataSource.Save
    EventStatus = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:27:34.493

我对此进行了更详细的研究，发现电子邮件的内容类型属性是使用此特定 vbscript 库的许多只读属性之一。因此，我必须找到其他编辑文件的方法，而所涉及的工作不仅仅是找到完全跳过电子邮件的替代解决方案所需要的工作。因此，我放弃了在这种情况下使用电子邮件的计划。如果您对此有所了解，假设此脚本中的邮件消息对象具有只读属性。

# c# - 如何将转义字符“\”写入代码

> ID：15748040
> 
> 赞同：27
> 
> 时间：2013-04-01T17:14:57.080
> 
> 标签：c#, escaping

如何`\`在 C# 中转义字符？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-01T17:15:48.683

你只需要逃避它：

```
char c = '\\'; 
```

或者您可以使用 Unicode 转义序列：

```
char c = '\u005c'; 
```

有关字符串/字符文字中可用的所有各种转义序列，请参阅我[关于字符串的文章。](http://csharpindepth.com/Articles/General/Strings.aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-01T17:15:46.723

您可以使用反斜杠转义反斜杠。

```
//String
string backslash = "\\";

//Character
char backslash = '\\'; 
```

或者

您可以使用字符串文字。

```
string backslash = @"\";
char backslash = @"\"[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:16:07.753

像这样使用双重反冲“\”

```
"\\" 
```

逃跑

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T17:16:07.927

如果你想输出一个字符串，你可以写`"\\"`或作为一个字符，你可以写`'\\'`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T17:16:15.673

双逃吧。逃跑=逃不掉！`\\`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T17:16:50.213

逃脱它：`"\\"`

或使用逐字语法：`@"\"`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-14T19:40:32.897

要插入反斜杠，您需要输入两次：

```
string myPath = "C:\\Users\\YourUser\\Desktop\\YourFile.txt"; 
```

该字符串`myPath`现在应包含：`C:\Users\YourUser\Desktop\YourFile.txt`

# java - 你如何让一个安卓应用程序启动多个应用程序，然后返回到初始应用程序？

> ID：15748042
> 
> 赞同：0
> 
> 时间：2013-04-01T17:15:07.310
> 
> 标签：java, android

我正在编写我的第一个 android 应用程序，所以我会尽力做到清晰准确。我可以看到一些与此类似的问题，但似乎没有一个可以准确回答它，所以也许它无法完成，但这里有：

我的主要活动已经到了存储数据的地步，其中包括用户选择启动的设备上的应用程序列表。单击主活动屏幕上的按钮时，我希望设备依次启动每个选定的应用程序，然后（理想情况下）将用户返回到我编写的主要活动。我还想对运行每个应用程序定义一些限制 - 例如，每个应用程序运行 30 秒或直到应用程序停止使用互联网，以最早的时间为准。

我认为将所有这些链接到按钮单击没有任何问题，循环浏览所有选定的应用程序也没有任何问题。我真正需要的是启动每个应用程序然后从中调用/移动到下一个应用程序的代码（最好在 30 秒后或当应用程序停止使用互联网时）。希望下面的代码清楚地表明我在哪里寻找 TODO 的帮助。有谁知道这是否可行，如果可行，我该如何完成？

```
public class MainActivity extends Activity {
... //some code up here

//when the Run Apps button is clicked the onClick will run all of the selected apps using this Method:
public void RunApps(View view) {

    //run through the list of Apps and run the ones that are selected
    for (App application : list) {
        if (application.isSelected()) {

               /* TODO code that is meant to run the selected app and return to the main 
                * activity after say 30 seconds or when the app is done using the internet.
                * As a starter I have the below but this is crashing and even if it did run
                * I believe that it would not return me to the original main activity:
                */
                Intent i = new Intent(Intent.ACTION_MAIN);
                PackageManager manager = getPackageManager();
                i = manager.getLaunchIntentForPackage(application.getPackageName());
                i.addCategory(Intent.CATEGORY_LAUNCHER);
                startActivity(i); 
        }
    }
};

...//some more code here
} 
```

只是几个注意事项 - App 类在其他地方定义，包括包名称以及用户是否选择了应用程序。list 是应用程序列表。

我相信 ACTION_MAIN 和 CATEGORY_LAUNCHER 值可能不是最好的使用方法，也许 startActivity(i) 不是我想要的正确方法，但不确定需要如何更改或是否需要进行更根本的更改。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:26:30.957

您应该通过一次调用一个应用程序从顶层`MainActivity`依次运行每个应用程序。

**方法如下**：

1.  保留一个计数器`MainActivity`以指示您当前正在调用哪个应用程序。
2.  使用`startActivityForResult()`而不是`startActivity()`启动您的应用程序。这将导致执行返回到 `MainActivity.onActivityResult()`每个应用程序完成时。
3.  将返回到 `requestCode`，因此您将知道完成了哪个应用程序。因此，可以递增计数器并启动下一个应用程序。`startActivityForResult()``onActivityResult()``MainActivity``onActivityResult()`

**限制**：

*   `MainActivity`您的要求之一是在每个应用程序完成后返回。这些步骤满足了这一要求。
*   另一个要求是在所有应用程序完成后返回`MainActivity。这些步骤也满足了这一要求。由于计数器的值，您将知道何时完成最终应用程序。
*   最后的要求是将每个应用程序的持续时间限制为 30 秒。这是一个比较困难的问题。您将使用`Timer`您的`MainActivity`作为看门狗来监控生成的应用程序。使用此处描述的方法在时间用完时停止生成的应用程序： [完成另一个活动的活动](https://stackoverflow.com/questions/10379134/finish-an-activity-from-another-activity)。
    *警告：在尝试从外部停止应用程序之前，先让其他一切正常工作*。

就这样。祝你好运！

# php - Magento 500 错误，缓慢

> ID：15748043
> 
> 赞同：0
> 
> 时间：2013-04-01T17:15:15.830
> 
> 标签：php, apache, magento, e-commerce

我们正在 Knownhost (VPS) 上运行一个 magento 网上商店。

大多数情况下，该网站运行良好。偶尔（每隔几个小时？）站点会变得非常缓慢且无响应，并且会抛出“500 内部服务器错误”。网络服务器或 Magento 系统/异常日志中似乎没有任何相关内容。

此外，我们似乎看到此帐户的 CPU 使用率很高。

我已将内存限制增加到 512MB，并尝试了我能找到的所有其他内容。没有骰子。

我们有一个托管的 VPS，所以我们几乎可以改变一切。在阅读了在线建议后，我们让我们的托管提供商安装了​​ ImageMagick - 没有帮助。

有任何想法吗？

（如果有人想看，可以在 myerstownsheds.com 上找到网站）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:15:06.017

TL;博士; 您的服务器资源不足。您为减少负载而采取的任何代码或配置步骤只会推迟不可避免的事情。

使用所提供的信息无法为您的问题提供具体答案。如果您可以查看您的服务器日志并查看正在生成的完整错误消息，那将是一个很大的帮助。在这种情况下，“服务器日志”可能意味着“Apache 日志”，因为您提供的错误文本是标准的 Apache/PHP 错误，而不是 Magento 错误。

综上所述，最可能的罪魁祸首是 PHP 内存不足错误。Magento 的性能配置文件与大多数 LAMP 堆栈应用程序不同，并且大多数通用 VPS 主机无法/不愿意进行运行它所需的调整。如果你想长期解决这个问题，你需要一个专门从事 Magento 的网络主机。这些天我推荐[Nexcess](https://affiliates.nexcess.net/idevaffiliate.php?id=1626)（附属链接），但[Magento 有一个推荐的托管合作伙伴列表，](http://www.magentocommerce.com/partners/hosting) Magento[速度测试](http://www.magespeedtest.com/)网站提供了一个很好的 Magento 顶级主机细分。

看看房东的计划

![在此处输入图像描述](https://i.stack.imgur.com/pY8yi.png)

最高级别的计划最高为 4GB 的 RAM (4096 MB)。

查看开始的 Nexcess 计划

![在此处输入图像描述](https://i.stack.imgur.com/atMOH.png)

入门级计划提供 16GB。内存是您当前主机的四倍。Magento 是一个需要大量内存的应用程序。您当前的主机不具备处理 Magento 的能力。您为减少负载而采取的任何代码或配置步骤只会推迟不可避免的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:23:15.807

我按照 allendar 发布的说明进行操作：

1.  备份和删除app/etc/local/local.xml
2.  在浏览器中访问站点，然后按照配置过程进行操作

到目前为止，一切似乎都运行良好！由于问题是如此断断续续，因此很难说很快，但我们的网站在近两个小时内一直保持响应。

我将在几天后将此标记为已回答。我会考虑获得更好的托管计划。

谢谢大家！

# android - Android 样式和值问题

> ID：15748044
> 
> 赞同：0
> 
> 时间：2013-04-01T17:15:19.567
> 
> 标签：android, styles

当我注意到当我打算以 Google 2.33 为目标时检查了 SDK 版本 4.2 时，我的 Android 项目运行良好。我将项目设置回 G2.33（在清单中 minsdk = 8 targetsdk=11），现在我在名为 Values-v11 和 values-v14 的两个文件夹中的两个不同的 styles.xml 文件上出现错误。

Values-v14 文件夹中的 styles.xml 在以下行有错误...

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar"> 
```

Values-v11 文件夹中的 st yles.xml 出现错误...

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light"> 
```

我的其他项目，所有目标 2.33 甚至都没有这些文件夹。我摆脱这种混乱的最好方法是什么？谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:35:00.637

如果您不想要任何特定于 SDK 级别 11 的文件夹，您可以简单地删除这些文件夹，如果您的 targetsdk 为 11，则无论如何都不会使用 14 的文件夹。

如果您想在 API 级别 11 中保留 API 级别 11 的自定义行为，您需要将项目设置为使用 API 级别 11 编译 - 即，如果在 Eclipse 中，选择项目，转到属性，选择 Android，然后设置如果您需要 Google API，则项目构建目标为 API 级别 11 的“Android 3.0”或“Google API”。

# php - codeigniter php中的路由

> ID：15748046
> 
> 赞同：0
> 
> 时间：2013-04-01T17:15:27.727
> 
> 标签：php, ruby-on-rails, codeigniter

**更新**

如果我像浏览网址

> localhost/myapp/index.php/about_us/index

有用。网址中的这个 index.php 是什么？我是否需要在某些配置文件中提及它，以便在站点上的菜单/链接中附加并形成正确的 url？

**原始问题**

我对 PHP 一无所知，但我有一个在 php（codeigniter）中转换为 Ruby on Rails 的项目。我可以很好地设置数据库和应用程序，当我使用基本 url 浏览应用程序（不提及控制器和操作）时，它会正确加载页面。但是一旦我提到像这样的网址

> 本地主机/myapp/home/index

它显示消息

> 在此服务器上找不到请求的 URL。

如果我将默认控制器更改为 routes.php 中的任何内容，则使用 index 方法的页面可以正常工作，但不能明确提及控制器和操作。

我不确定是什么问题，我不知道路由在 php 中是如何工作的 :(

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:25:36.200

您似乎没有正确配置您的网络服务器。有关 Apache 的详细信息，请参阅此问题：[codeigniter 中的路由问题](https://stackoverflow.com/questions/2958871/routing-problem-in-codeigniter)

以下是 nginx 的规则：[http ://wiki.nginx.org/Codeigniter](http://wiki.nginx.org/Codeigniter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:04:43.397

在 CodeIgniter 中，所有请求都通过`index.php`文件进行定向，该文件的作用类似于[前端控制器](http://ellislab.com/codeigniter/user-guide/overview/appflow.html)。

`index.php`必须出现在 URL 中，除非您已创建解决方案来消除它。使用 Apache 时，通常使用`.htaccess`文件来完成。有数百篇关于这项技术的文章和问题——当然你可以找到一些可以帮助你的东西。

关于 URL 和用于定义的配置选项，`index.php`CodeIgniter URL 帮助函数，例如`site_url()`利用. 如果您使用 .htaccess 解决方案从您的 URL 中删除 index.php，您可以将此设置设为空白：`$config['index_page']``application/config/config.php`

```
$config['index_page'] = ''; 
```

当您想将 index.php 重命名为其他名称时，此设置也很有用（不是很常见）。

# android - Android 4.x 上处理重定向的首选网络库是什么？

> ID：15748052
> 
> 赞同：1
> 
> 时间：2013-04-01T17:15:58.610
> 
> 标签：android, networking, redirect, httpurlconnection

Android 上的 HttpURLConnection 在 99% 的情况下都能正常工作。

它被推荐为这里的首选网络类：[http ://android-developers.blogspot.com/2011/09/androids-http-clients.html](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)

我在 1% 的时间里遇到问题，它似乎是片状的，这里的其他人提到过，但是在 Android 4.2.2 上：[HttpURLConnection 响应码是随机的 -1](https://stackoverflow.com/questions/8066738/httpurlconnection-responsecode-is-randomly-1)

当服务器发送 301 Moved Permanently 时，9/10 次返回响应码 -1。

1 - 有没有其他人有这个问题？

2 - HttpURLConnection 仍然是首选的网络系统吗？

# mysql - WAMP MySQL 错误 2002

> ID：15748055
> 
> 赞同：2
> 
> 时间：2013-04-01T17:16:05.693
> 
> 标签：mysql, wamp

大约一年前，我开始使用数据库。为此，我在我相对较旧的 Windows 7 计算机上安装了 WAMP。这非常顺利，从那时起我就成为了 WAMP 的热心用户，做了很多 php 编程。

现在我有一个全新的 Windows 8 平板电脑。安装 Firefox 和 Thunderbird 后，我尝试安装 WAMP，这是从 Sourceforge 下载的最新版本（Apache 2.2.22、PHP 5.4.3、MySQL 5.5.24）。由于 Windows 8 并不是一个真正不起眼的操作系统，我没想到会出现任何问题。然而，我非常失望。

我要做的第一件事是在文件alias/phpmyadmin.conf 和httpd.conf 中插入来自::1 的Allow 行。然后 localhost 工作，但 phpmyadmin 没有。它给出了错误 MySQL #2002 - 我无法建立连接，因为目标机器主动拒绝了它。互联网上有一些关于这个错误的信息，但他们不处理密码定义，这似乎是我的问题。

mysql.log 显示（第一行省略，它们看起来不错）

```
130401 13:21:35  InnoDB: Operating system error number 87 in a file operation.  
InnoDB: Some operating system error numbers are described at  
InnoDB: http://dev.mysql.com/doc/refman/5.5/en/operating-system-error-codes.html  
InnoDB: File name .\ib_logfile0  
InnoDB: File operation call: 'aio read'.  
InnoDB: Cannot continue operation. 
```

这表明我有一个 MySQL 登录错误。以下行为也暗示了这一点：当我打开 MySQL 控制台时，它会要求输入密码。没有密码（在 my.ini 文件中，密码行被注释掉了），所以我按下回车，控制台立即关闭。此外，当我在 my.ini 中指定密码并使用该密码时，控制台会立即关闭。

也许这是一个简单的问题，但我不知道如何解决它。任何建议都将受到高度赞赏。

# ios - 从非 ECSlidingViewController 打开 ECSlidingViewController

> ID：15748068
> 
> 赞同：1
> 
> 时间：2013-04-01T17:16:41.440
> 
> 标签：ios, uiviewcontroller, sliding

我尝试在 IBAction 上达到 ECSlidingViewController。但是，当我尝试以下代码时：

```
-(IBAction)openNewPage:(id)sender{ //IV

UIStoryboard *storyboard;
ECSlidingViewController *slidingViewController = (ECSlidingViewController *)[storyboard instantiateViewControllerWithIdentifier:@"IV"];
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    storyboard = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];
} else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboard = [UIStoryboard storyboardWithName:@"iPad" bundle:nil];
}

slidingViewController.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"FirstTop"];

} 
```

我收到以下错误：

```
 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

我在按钮上尝试了模态操作，“touchupinside”将落在 InitialViewController 上。对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:31:10.737

您需要将定义 slipViewController 的行移到 if-else-if 子句下方，因为情节提要在您当前执行的位置将为零。

```
UIStoryboard *storyboard;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    storyboard = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];
} else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboard = [UIStoryboard storyboardWithName:@"iPad" bundle:nil];
}
ECSlidingViewController *slidingViewController = (ECSlidingViewController *)[storyboard instantiateViewControllerWithIdentifier:@"IV"];
slidingViewController.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"FirstTop"]; 
```

# servlets - 连续运行servlet

> ID：15748074
> 
> 赞同：-2
> 
> 时间：2013-04-01T17:17:04.433
> 
> 标签：servlets

在我的程序中，数据库每秒都在更新。我想创建一个持续运行并每秒从数据库中获取数据的 serverlet。我该如何构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:49:32.207

如果您计划在 Java EE 容器中运行计划任务，那么最好的办法是使用 Timer Service 来计划您的工作。

我建议先[阅读文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)，然后再试一试。如果您遇到困难，请寻求更多帮助。

# ruby - 通过多态关联在视图中显示当前用户

> ID：15748075
> 
> 赞同：0
> 
> 时间：2013-04-01T17:17:06.853
> 
> 标签：ruby, authentication, polymorphic-associations

我试图在他们登录后显示当前用户名。

因此，在页面顶部会显示“以 Patrick 身份登录”。但是，我设置了一个多态关联，每个注册的用户要么是球员，要么是教练。

当教练和球员都打网球时，多态关联位于标签或 :tennis_player 下。

该视图的代码如下。

```
 <div class="container">
    <header>

    <div class="logo">
        <%= link_to(image_tag 'tennis_ball.png', :width => 100, :height => 100) %>
    </div>
    <div class="slogan">
        <h3>Setfortennis</h3>
    </div>

  <div id="user_nav">
    <% if current_user? %>
        Logged in as <%= @current_user %>

        <%= link_to "log out", log_out_path %>
    <% else %>
        <%= link_to "Sign Up", sign_up_path %> or
        <%= link_to "Log in", log_in_path %>
    <% end %>
</div>

    </header>
</div> 
```

这是我的应用程序控制器

```
 helper_method :current_user?

  before_filter :get_user

  def current_user?
    !!current_user
  end

  def current_user
    @current_user ||= session[:user_id] &&
      User.find_by_id(session[:user_id])
  end

  def check_logged_in
    redirect_to( new_session_path, :notice => "You must be logged in to do that!") unless current_user?
  end

  def get_user
    @user = User.new
  end
end 
```

这是我的模型。还有什么需要解决的请告诉我！

```
 class Player < ActiveRecord::Base
  attr_accessible :about, :club, :first_name, :last_name, :profile_picture, :racket, :ranking, :image

  has_attached_file :image, styles: {
    thumb: '100x100>',
    square: '200x200#',
    medium: '300x300>'
  }

  has_many :videos

  has_one :user, :as => :tennis_player

end

  class Coach < ActiveRecord::Base
  attr_accessible :about, :club, :first_name, :last_name, :profile_picture, :ranking

  has_one :user, :as => :tennis_player
end 
```

用户模型。

```
 class User < ActiveRecord::Base
  attr_accessible :email, :password_hash, :password_salt, :password, :password_confirmation
  attr_accessor :password

  belongs_to :tennis_player, :polymorphic => true

  before_save :encrypt_password

  validates_confirmation_of :password
  validates_confirmation_of :password, :on => :create
  validates_confirmation_of :email
  validates_uniqueness_of :password

  def self.authenticate(email, password)
    user = find_by_email(email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user 
    else
      nil
    end
  end

  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:54:56.170

每当您创建会话时，您只需要存储正确的 id。但我会稍微改变设计。您可以创建一个基类 User 并从它继承，而不是为 Player 和 Coach 创建两个单独的表。

```
class User < ActiveRecord::Base
  attr_accessible :about, :club, :first_name, :last_name, :profile_picture, :ranking
end

class Player < User
end

class Coach < User
end 
```

# c# - 使用 LuceneQuery 使用 RavenDB 创建完全动态的查询

> ID：15748083
> 
> 赞同：1
> 
> 时间：2013-04-01T17:17:50.797
> 
> 标签：c#, ravendb, lucene.net

我想要一种可以查询整个 RavenDB 数据库的方法。

我的方法签名如下所示：

```
public static DataTable GetData(string className, int amount, string orderByProperty, string filterByProperty, string filterByOperator, string filterCompare) 
```

我想我可以使用动态 LuceneQuery 完成以上所有工作。

```
session.Advanced.LuceneQuery<dynamic>(); 
```

问题是：由于我`dynamic`在给定的类型中使用，我如何确保查询只包含与**className**匹配的类型？

我正在寻找类似的东西`.WhereType(className)`or `.Where("type: " + className)`。

**解决方案**

这将返回正确类型的结果：

```
var type = Type.GetType("Business.Data.DTO." + className);

var tagName = RavenDb.GetTypeTagName(type);
using (var session = RavenDb.OpenSession())
{
    var result = session.Advanced
                        .LuceneQuery<object, RavenDocumentsByEntityName>()
                        .WhereEquals("Tag", tagName)
                        .ToList();
} 
```

请注意，无法为此添加额外的“WhereEquals”或其他过滤器。这是因为“RavenDocumentByEntityName”索引中不包含特定于该文档类型的任何内容。

这意味着该解决方案不能用于我想要完成的任务。

**我最终做了什么**

虽然它不能完全满足我的要求，但这就是我最终要做的：

```
public static List<T> GetData<T>(DataQuery query)
{
    using (var session = RavenDb.OpenSession())
    {
        var result = session.Advanced.LuceneQuery<T>();

        if (!string.IsNullOrEmpty(query.FilterByProperty))
        {
            if (query.FilterByOperator == "=")
            {
                result = result.WhereEquals(query.FilterByProperty, query.FilterCompare);
            }
            else if (query.FilterByOperator == "StartsWith")
            {
                result = result.WhereStartsWith(query.FilterByProperty, query.FilterCompare);
            }
            else if (query.FilterByOperator == "EndsWith")
            {
                result = result.WhereEndsWith(query.FilterByProperty, query.FilterCompare);
            }
        }

        if (!string.IsNullOrEmpty(query.OrderByProperty))
        {
            if (query.Descending)
            {
                result = result.OrderBy(query.OrderByProperty);
            }
            else
            {
                result = result.OrderByDescending(query.OrderByProperty);
            }
        }

        result = result.Skip(query.Skip).Take(query.Amount);

        return result.ToList();
    }
} 
```

尽管这肯定是一种反模式，但它是一种查看某些数据的巧妙方法，如果这是您想要的。它很容易像这样调用：

```
DataQuery query = new DataQuery
{
    Amount = int.Parse(txtAmount.Text),
    Skip = 0,
    FilterByProperty = ddlFilterBy.SelectedValue,
    FilterByOperator = ddlOperator.SelectedValue,
    FilterCompare = txtCompare.Text,
    OrderByProperty = ddlOrderBy.SelectedValue,
    Descending = chkDescending.Checked
};

grdData.DataSource = DataService.GetData<Server>(query);
grdData.DataBind(); 
```

“服务器”是我正在使用的类/文档类型之一，因此它不是**完全**动态的缺点是我必须为每种类型定义一个这样的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:59:09.160

我强烈建议你不要走这条路。您实际上是在尝试隐藏 RavenDB Session 对象，该对象非常强大并且可以直接使用。

仅查看您要创建的方法的签名，参数都非常严格，并且对您正在处理的数据做出了许多可能不正确的假设。和返回类型 - 你为什么要返回 a `DataTable`？也许返回 a`object`或 a `dynamic`，但 Raven 中的任何内容都不是在表格中结构化的，所以这`DataTable`是一个坏主意。

要回答特定问题，类型名称来自`Raven-Entity-Name`元数据，您需要在其上构建索引。当您使用索引中的`from docs.YourEntity`语法进行索引时，这会自动发生。`.Query<YourEntity>`当您使用动态索引（例如or ）时，Raven 在幕后执行此操作`.Advanced.LuceneQuery<YourEntity>`。

不过，你不应该这样做。

# algorithm - 平衡二叉树与索引跳过列表

> ID：15748085
> 
> 赞同：6
> 
> 时间：2013-04-01T17:17:57.997
> 
> 标签：algorithm, data-structures, language-agnostic, binary-tree, skip-lists

不确定问题应该在这里还是程序员（或其他一些 SE 站点），但我很好奇平衡二叉树和[可索引跳过列表](http://en.wikipedia.org/wiki/Skiplist#Indexable_skiplist)之间的相关差异。这个问题是在[这个问题](https://stackoverflow.com/questions/15739601/how-can-we-optimize-insertion-on-arraylist)的背景下提出的。来自维基百科：

> 跳过列表是一种概率数据结构，似乎有可能取代平衡树作为许多应用程序选择的实现方法。跳过列表算法具有与平衡树相同的渐近预期时间界限，并且更简单、更快并且使用更少的空间。

跳过列表的空间要求不取决于层次结构的深度吗？并且二叉树不是更容易使用吗，至少对于搜索（在平衡 BST 中授予，插入和删除可能很棘手）？跳过列表还有其他优点/缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:44:33.837

（您的问题的某些部分（易用性、简单性等）有点主观，我将在本文末尾回答。）

让我们看看空间使用情况。首先，假设您有一个具有 n 个节点的二叉搜索树。所需的总空间使用量是多少？好吧，每个节点都存储一些数据和两个指针。您可能还需要一些信息来维护余额信息。这意味着总空间使用量为

> n * (2 * sizeof(指针) + sizeof(数据) + sizeof(余额信息))

因此，让我们考虑一个等效的跳过列表。您绝对正确，skiplist 使用的实际内存量取决于节点的高度，但我们可以讨论skiplist 使用的*预期*空间量。通常，您从 1 开始选择跳过列表中节点的高度，然后反复掷硬币，只要翻转正面就增加高度，并在翻转反面时停止。鉴于此设置，跳过列表中的预期指针数量是多少？

概率论的一个有趣结果是，如果您有一系列概率为 p 的独立事件，则在该事件发生之前您需要大约 1 / p 次试验（按预期）。在我们的抛硬币示例中，我们正在抛硬币直到它出现反面，并且由于硬币是一枚公平的硬币（正面朝上的概率为 50%），因此在我们反面之前所需的预期试验次数是 2。由于最后一次翻转结束了增长，因此一个节点在跳过列表中增长的预期次数为 1。因此，按照预期，我们预计一个平均节点中只有两个指针——一个初始指针和一个添加指针。这意味着*预期*的总空间使用量为

> n * (2 * sizeof(指针) + sizeof(数据))

将此与平衡二叉搜索树中节点的大小进行比较。如果存储余额信息所需的空间量不为零，则跳过列表确实将使用（按预期）比平衡 BST 更少的内存。请注意，许多类型的平衡 BST（例如[treap](http://en.wikipedia.org/wiki/Treap) s）需要大量平衡信息，而其他类型（[红/黑树](http://en.wikipedia.org/wiki/Red-black_tree)、[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)）具有平衡信息，但可以将该信息隐藏在其指针的低位中，而其他（[展开树](http://en.wikipedia.org/wiki/Splay_tree)）根本没有任何平衡信息。因此，这并不能*保证*获胜，但在许多情况下它会占用空间。

至于您关于简单性、易用性等的其他问题：这真的取决于。我个人发现在 BST 中查找元素的代码比在跳过列表中查找元素的代码要容易得多。然而，平衡 BST 中的旋转逻辑通常比跳过列表中的插入/删除逻辑复杂得多。试着看看你是否可以在不参考参考的情况下说出红/黑树中所有可能的旋转情况，或者看看你是否能记住伸展树中所有的 zig/zag 与 zag/zag 情况。从这个意义上说，记住从跳过列表中插入或删除的逻辑可能会更容易一些。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T21:59:40.383

> 并且二叉树不是更容易使用吗，至少对于搜索（在平衡 BST 中授予，插入和删除可能很棘手）？

树是“更递归的”（树和子树），而 SkipLists 是“更迭代的”（数组中的级别）。当然，这取决于实现，但 SkipLists 在实际应用中也非常有用。

在树中搜索更容易，因为您不必在数组中迭代级别。

> 跳过列表还有其他优点/缺点吗？

*   SkipLists 更容易实现。这有点相对，但是实现一个全功能的 SkipList 比在 BinaryTree 中的删除和平衡操作更容易。

*   树可以是持久的（更适合函数式编程）。

*   从 SkipLists 中删除项目比二叉树中的内部节点更容易。

*   将项目添加到二叉树更容易（保持平衡是另一个问题）

*   二叉树是确定性的，因此更容易研究和分析它们。

我的**提示**：如果你有时间，你必须使用平衡二叉树。如果您的时间不多，请使用跳过列表。如果您没有时间，请使用图书馆。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-13T20:00:44.143

到目前为止没有提到的是跳过列表对于并发操作可能是有利的。如果您阅读了由 Doug Lea 撰写的 ConcurrentSkipListMap 的源代码……请阅读评论。它提到：

*对于搜索树，没有已知的有效的无锁插入和删除算法。索引节点的“向下”链接的不变性（与真实树中的可变“左”字段相反）使得仅使用 CAS 操作即可处理。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T17:41:12.780

你是对的，这不是一个完美的论坛。

您引用的评论是由原始跳过列表论文的作者撰写的：不完全是一个公正的断言。已经 23 年了，红黑树似乎仍然比跳过列表更普遍。一个例外是[redis 键值对数据库](http://redis.io/)，它包括跳过列表作为其数据结构中的一个选项。

跳过列表非常酷。但是我在一般随机情况下能够展示的唯一空间优势是不需要存储平衡标志：每个值两位。这是假设层次结构足够密集以复制二叉树的性能。您可以将其归结为确定性的代价（副随机化）。SL 的一个很好的特性是您可以使用密度较低的层次结构来用恒定的速度因子换取空间。

旁注：如果您不需要按排序顺序遍历，您可以通过仅加密密钥来随机化*不平衡*二叉树（即使用非常简单的东西如 RC4 映射到伪随机密文），这并不经常讨论。这样的树实现起来绝对是微不足道的。

# paypal - Paypal Adaptive Payments 500 代理错误

> ID：15748087
> 
> 赞同：0
> 
> 时间：2013-04-01T17:18:08.703
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

在沙盒环境中尝试使用 PayPal Adaptive Payments API 和 Explicit Approval Payment Flow 执行简单支付时，我看到以下错误消息：

```
代理错误

代理服务器无法处理请求 GET /webapps/adaptivepayment/flow/expresscheckoutincontextremembermeflow。
原因：与远程服务器的 SSL 握手期间出错

```

根据[这个相关的帖子](https://stackoverflow.com/questions/15644100/paypal-sandbox-suddenly-outputting-proxy-error-for-adaptive-payments)，这个问题应该已经解决了，但我仍然无法在沙盒环境中执行简单的支付。

生成 payKey 的 API 调用成功返回：

```
{
'responseEnvelope': {
'ack': 'Success', 
'timestamp': '2013-04-01T10:00:33.572-07:00', 
'build': '5563463', 
'correlationId': '9ddb6d34b8b31'
}, 
'paymentExecStatus': 'CREATED', 
'payKey': 'AP-30241506EH984280M'
} 
```

并且正在发生以下一系列重定向：

https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?expType=light&paykey=AP-30241506EH984280M

重定向到：https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/payinit?iframecookie=1364835660832&paykey=AP-30241506EH984280M&expType=light

重定向到：https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/corepay

重定向到：https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/expresscheckoutincontextremembermeflow

大约 210 秒后出现 500 代理错误。

此外，如果我尝试先在另一个选项卡中登录 developer.paypal.com 的解决方法，我会在初始请求中收到 404 错误：https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay? expType=light&paykey=AP-45P14958V28124917

我已经搜索和搜索，戳戳并戳死这个问题......还有其他人看到这个问题，有没有人有一个可行的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:18:17.600

我们今晚晚些时候推出了一个补丁，我们希望永久修复这个问题。

# wininet - 异步使用 InternetReadFile() 的正确方法

> ID：15748092
> 
> 赞同：3
> 
> 时间：2013-04-01T17:18:24.960
> 
> 标签：wininet

我有使用 WinInet API 异步执行 HTTP 请求的代码。一般来说，我的代码有效，但我对“正确”的做事方式感到困惑。在[InternetReadFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385103%28v=vs.85%29.aspx)的文档中，它指出：

> 为确保检索到所有数据，应用程序必须继续调用 InternetReadFile 函数，直到该函数返回 TRUE 并且 lpdwNumberOfBytesRead 参数等于零。

但在异步模式下，它可能（也可能不会）返回 false 和一个错误`ERROR_IO_PENDING`，表明它将异步完成工作，并在完成时调用我的回调。如果我从字面上阅读文档，似乎异步调用也可以只对请求的缓冲区进行部分读取，并要求调用者继续调用 InternetReadFile 直到遇到 0 字节的读取。

使用`InternetReadFile()`同步的典型实现如下所示：

```
while(InternetReadFile(Request, Buffer, BufferSize, &BytesRead) && BytesRead != 0)
{
    // do something with Buffer
} 
```

但是有可能任何一个调用都`InternetReadFile()`可能表明它将异步完成工作（可能读取部分，但不是您的全部请求），它变得更加复杂。如果我转向[MSDN 示例代码](http://msdn.microsoft.com/en-us/library/windows/desktop/cc185684%28v=vs.85%29.aspx)寻求指导，那么实现很简单，只需调用`InternetReadFile()`一次，并期望单个返回立即或异步读取整个请求的缓冲区。这是使用此功能的正确方法，还是 MSDN 示例代码忽略了`InternetReadFile()`仅读取部分请求缓冲区的可能性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:37:09.730

在更仔细地阅读异步示例之后，我现在看到它正在重复读取，直到遇到成功读取 0 字节。因此，要回答我自己的问题，您必须一遍又一遍地调用 InternetReadFile()，并为同步或异步响应做好准备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-07T06:12:49.820

重复读取`InternetReadFile()`直到它返回 TRUE 并且 BytesRead 为 0 是正确的使用方法`InternetReadFile()`，但如果您异步工作还不够。

正如 MSDN 所说

> 异步运行时，如果对 InternetReadFile 的调用未导致事务完成，它将返回 FALSE，随后对 GetLastError 的调用将返回 ERROR_IO_PENDING。当事务完成时，在先前对 InternetSetStatusCallback 的调用中指定的 InternetStatusCallback 将使用 INTERNET_STATUS_REQUEST_COMPLETE 调用。

因此，如果您在异步模式下工作，`InternetReadFile()`可能会返回`FALSE`并将最后一个错误设置为value。`ERROR_IO_PENDING`

当`InternetSetStatusCallback`将再次调用时`INTERNET_STATUS_REQUEST_COMPLETE`，`lpvStatusInformation`参数将包含`INTERNET_ASYNC_RESULT`结构的地址（参见[InternetStatusCallback 回调函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385121%28v=vs.85%29.aspx "InternetStatusCallback 回调函数")）。该`INTERNET_ASYNC_RESULT.dwResult`成员将包含异步操作的结果（`TRUE`或`FALSE`自您调用以来`InternetReadFile`），并且仅当is`INTERNET_ASYNC_RESULT.dwError`时才会包含错误代码。`dwResult``FALSE`

如果`dwResult`是，`TRUE`那么您`Buffer`包含从 Internet 读取的数据，并且`BytesRead`包含异步读取的字节数。

所以当你异步工作时最重要的事情之一是**调用**`Buffer`之间`BytesRead` **必须保持`InternetStatusCallback`**不变，即不能在堆栈上分配。否则它有未定义的行为，导致内存损坏等。

# python - 从Python中的列表中删除所有逗号

> ID：15748095
> 
> 赞同：3
> 
> 时间：2013-04-01T17:18:56.897
> 
> 标签：python

我的问题：我想在这个字符串中添加所有数字，`'1.14,2.14,3.14,4.14'`但是逗号导致我的 sum 函数无法正常工作。
我认为使用 strip 函数可以解决我的问题，但似乎还有一些我遗漏或不太理解的东西。

```
total = 0
for c in '1.14,2.14,3.14'.strip(","):
    total = total + float(c)
print total 
```

我已经搜索了如何从字符串中删除逗号，但我只找到了有关如何从字符串的开头或结尾删除逗号的信息。

附加信息：Python 2.7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T17:20:14.023

我会使用以下内容：

```
# Get an array of numbers
numbers = map(float, '1,2,3,4'.split(','))

# Now get the sum
total = sum(numbers) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T17:20:22.993

你不想要`strip`，你想要`split`。

在您的情况下，该`split`函数将使用您传递给它的分隔符将您的字符串分隔成一个数组`split(',')`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-04-08T11:19:37.870

去掉逗号`list`

针对 Python3 更新：

```
a = [1,2,3,4,5]
b = ''.join(str(a).split(',')) 
```

从列表中删除逗号，即

```
[1,2,3,4,5]  --> [1 2 3 4 5] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T17:35:06.407

你`split`不需要`strip`。

```
>>> for c in '1,2,3,4,5,6,7,8,9'.split(","):
    print float(c)

1.0
2.0
3.0
4.0
5.0
6.0
7.0
8.0
9.0 
```

或者，如果您想要[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
>>> [float(c) for c in '1,2,3,4,5,6,7,8,9'.split(",")]
[1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0] 
```

为了得到总和，

```
>>> sum(map(float, '1,2,3,4,5,6,7,8,9'.split(",")))
45.0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-08T11:58:28.960

```
values=input()         
l=values.split(",")   
print(l) 
```

值=1,2,3,4,5

结果是 ['1','2','3','4','5']

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-19T12:07:19.360

使用它来删除逗号和空格

```
a = [1,2,3,4,5]
print(*a, sep = "") 
```

输出：- 12345

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-01T17:25:43.603

这将在您的问题的第一个字符串中添加所有数字：

```
sum(float(x) for x in '1.14,2.14,3.14,4.14' if x.isdigit()) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-01T17:26:53.450

由于您的浮点输入列表中似乎有一个模式，因此这个单行代码会生成它：

```
>>> sum(map(float, ','.join(map(lambda x:str(x+0.14), range(1,5))).split(',')))
10.559999999999999 
```

而且由于用逗号连接并立即用逗号分隔没有多大意义，所以这里有一段更理智的代码：

```
>>> sum(map(float, map(lambda x:str(x+0.14), range(1,5))))
10.559999999999999 
```

* * *

如果您实际上的意思是要对单个数字而不是实际的浮点数求和（尽管我对此表示怀疑，因为您在示例代码中强制转换为浮点数）：

```
>>> sum(map(int, ''.join(map(lambda x:str(x+0.14), range(1,5))).replace('.', '')))
30 
```

# javascript - Double.parseDouble 在我的网页上不起作用

> ID：15748099
> 
> 赞同：4
> 
> 时间：2013-04-01T17:19:04.300
> 
> 标签：javascript

我正在尝试添加一些资金，并且我想使用 Double.parseDouble，但是我认为该页面无法识别 double.parseDouble。我没有收到错误，但它不会添加或传递值。

这是我的代码。

```
function CalculateBudget(){
    var table = document.getElementById('tblBudgetTotals');
    input1600 = 0;
    input1602 = 0;
    input1603 = 0;
    input1608 = 0;
    input1612 = 0;
    funding = 0;
    budgetSum = 0;

          input1600 = Double.parseDouble(document.getElementById('txt1600').value);
    input1602 = Double.parseDouble(document.getElementById('txt1602').value);
    input1603 = Double.parseDouble(document.getElementById('txt1603').value);
    input1608 = Double.parseDouble(document.getElementById('txt1608').value);
    input1612 = Double.parseDouble(document.getElementById('txt1612').value);
    funding = Double.parseDouble(document.getElementById('FundingTotals').value);

    budgetSum += Double.parseDouble(input1600) + Double.parseDouble(input1602) + Double.parseDouble(input1603) + Double.parseDouble(input1608) + Double.parseDouble(input1612) + Double.parseDouble(funding);

    document.getElementById('totbud').value = Double.parseDouble(budgetSum);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T17:23:29.237

我认为您应该只使用`parseFloat`它，因为根据[这些](https://stackoverflow.com/questions/7312693/how-to-convert-int-number-to-double-number) [线程](https://stackoverflow.com/questions/3605925/does-javascript-have-double-floating-point-number-precision)，JavaScript 中的所有数字都已经是“双精度”（64 位）浮点数。

# python - 在 python 中用乌龟画星星

> ID：15748100
> 
> 赞同：1
> 
> 时间：2013-04-01T17:19:04.347
> 
> 标签：python, turtle-graphics

我需要编写一个函数，根据这个人想要多少颗星星的问题来随机绘制星星。a=color,b=length 和 c,d 是起始坐标。我不确定我哪里出错了，任何提示、提示或帮助将不胜感激。

```
import turtle
from random import*
def star(a,b,c,d):
    x=5
    y=0
    turtle.color(a)
    turtle.begin_fill()
    turtle.penup()
    turtle.goto(c,d)
    turtle.pendown()
    while x>0:
        turtle.forward(b)
        turtle.right(144)
        turtle.forward(b)
        x-=1
    turtle.end_fill()

star('red',100,0,0)

def random_color():
    randvar=randrange(0,5)
    if randvar==0:
        return ('red')
    elif randvar==1:
        return ('blue')
    elif randvar==2:
        return ('green')
    elif randvar==3:
        return ('yellow')
    else:
        return ('black')

def length():
    randvar=randrange(5,71)

def x():
    randvar=randrange(-280,281)

def y():
    randvar=randrange(-200,201)

def night_sky():
   z=int(input('How many stars do you want?'))
   a=random_color
   b=length
   c=x
   d=y
   while z>0:
       star(a,b,c,d)
       z-=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:26:12.370

要调用函数，请在函数名称后加上括号：

```
 a=random_color()
   b=length()
   c=x()
   d=y() 
```

* * *

确保`night_sky()`在脚本末尾调用。目前，只有

```
star('red',100,0,0) 
```

正在被调用。这就是为什么你只能看到一颗星星。

* * *

功能`length`，`x`以及`y`需要使用`return`。否则，`None`默认返回。

```
def length():
    return randrange(5,71)

def x():
    return randrange(-280,281)

def y():
    return randrange(-200,201) 
```

* * *

您需要将定义`a`、`b`、`c`和的语句移动`d`到-`while`循环中，以免同一个星被绘制`z`次数。当我们这样做时，`while`-loop 可以更简单地写成`for`-loop：

```
 for i in range(z):
       a=random_color()
       b=length()
       c=x()
       d=y()
       star(a,b,c,d) 
```

* * *

如果您使用更具描述性的变量名称，您的代码将变得更加自文档化：

```
def star(color, side_length, x, y):
    print(color, side_length, x, y)
    turtle.color(color)
    turtle.begin_fill()
    turtle.penup()
    turtle.goto(x, y)
    turtle.pendown()
    for i in range(5):
        turtle.forward(side_length)
        turtle.right(144)
        turtle.forward(side_length)
    turtle.end_fill() 
```

* * *

因此，通过这些更改，代码变为：

```
import turtle
import random

def star(color, side_length, x, y):
    print(color, side_length, x, y)
    turtle.color(color)
    turtle.begin_fill()
    turtle.penup()
    turtle.goto(x, y)
    turtle.pendown()
    for i in range(5):
        turtle.forward(side_length)
        turtle.right(144)
        turtle.forward(side_length)
    turtle.end_fill()

def random_color():
    randvar = randrange(0, 5)
    if randvar == 0:
        return ('red')
    elif randvar == 1:
        return ('blue')
    elif randvar == 2:
        return ('green')
    elif randvar == 3:
        return ('yellow')
    else:
        return ('black')

def length():
    return random.randrange(5, 71)

def xcoord():
    return random.randrange(-280, 281)

def ycoord():
    return random.randrange(-200, 201)

def night_sky():
    z = int(input('How many stars do you want?'))
    for i in range(z):
        color = random_color()
        side_length = length()
        x = xcoord()
        y = ycoord()
        star(color, side_length, x, y)

night_sky() 
```

# iphone - 如何将二进制数据写入ios中的文件

> ID：15748101
> 
> 赞同：0
> 
> 时间：2013-04-01T17:19:05.070
> 
> 标签：iphone, ios

我是 iphone 开发的新手。

我在 NSData 变量中有二进制数据（音频文件内容），我想将其写入设备中的文件。

任何人都可以分享我如何做同样的片段或链接。

提前致谢， 迪内什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:20:18.163

您可以轻松使用：

```
writeToURL:atomically:
writeToFile:atomically: 
```

# ajax - 一页基于 AJAX 的 WordPress 站点。我该怎么做？

> ID：15748105
> 
> 赞同：0
> 
> 时间：2013-04-01T17:19:42.260
> 
> 标签：ajax, wordpress

我正在尝试创建一个单页 WordPress 网站，就像您有时在 ThemeForest 的 WP 部分看到的那样：整个网站是一个长页面，所有内容都集中在一个地方，从关于我们到作品集，再到一些博客文章，给联系人。

将所有东西放在一页上并不困难。但是当我开始考虑如何呈现单个帖子和页面时，我意识到我可能需要一种通过 AJAX 获取帖子数据的通用方法，并使用 JS 创建新块。我该怎么办？我想这是以前做过的，但我很难在 Codex 上找到这种特定的东西或具有最佳实践的教程。

任何建议或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:18:44.663

你可以使用一个插件，比如 jQuery Easytabs，[在这里下载](http://os.alfajango.com/easytabs/)，它有一个内置的 Ajax 组件。

我发现最简单的方法是提前将所有内容加载到 div 中，而不是尝试通过 Ajax 加载所有页面。但是，通过 Easytabs 插件在您的 url 末尾附加类似 '?ajax/ajax' 的内容是我过去成功使用的一种选择。

如果您决定使用 easytabs 功能，我链接到的页面上有大量文档。

# javascript - 使用javascript将图像更改为其他图像并从最后一个图像重复到第一个图像

> ID：15748118
> 
> 赞同：-6
> 
> 时间：2013-04-01T17:20:28.423
> 
> 标签：javascript

我想要一个 javascript/html 代码在单击我的页面中的图像时更改为我的源文件中的其他图像并重复执行（当显示最后一张图像时，再次[点击]到第一张图像）而不刷新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:29:25.277

尽管有很多方法可以做到这一点，但您可以使用类似下面的方法来完成此操作。最简单的方法可能是让您的图像名称除了递增变量之外相同，但这取决于您。

```
<img id="myImage" src="image.jpg"/>
<input type="button" onclick="changeImage();" value="Change Image"/>
<script>
  //This array holds all my image paths (hardcoded)
  var images=new Array();
    images[0]="myImage.jpg";
    images[1]="myImage2.jpg";
    images[2]="myThirdImage.jpg";
  var counter=0;

  function changeImage(){
    //Change image and increment counter
    document.getElementById("myImage").src=images[counter++ % images.length];
  }
</script> 
```

此外，这取决于您希望此功能如何发挥作用（带有左/右箭头的图像在图像列表中循环）。

编辑：感谢[Fizz](https://stackoverflow.com/users/278447/fizz)的 mod 建议。

# matlab - 如何在整个第三维中取一组变量的平均值？

> ID：15748123
> 
> 赞同：0
> 
> 时间：2013-04-01T17:20:56.020
> 
> 标签：matlab

我想找到第三个变量（即时间）所有值的平均值。

===

> > a = 兰德（2,2,2）

一（：，：，1）=

```
 0.2638      0.13607
  0.14554      0.86929 
```

一（：，：，2）=

```
 0.5797      0.14495
  0.54986      0.85303 
```

> > 平均值（一）

答案（:,:,1）=

```
 0.20467      0.50268 
```

答案（:,:,2）=

```
 0.56478      0.49899 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:22:56.720

该`mean`函数可以接受一个参数来指定维度。要沿第三维取平均值，您可以使用`M = mean(a,3)`

例如：

```
a = rand(2,2,2)
a =

ans(:,:,1) =

   0.98083   0.89986
   0.83187   0.81679

ans(:,:,2) =

   0.099544   0.038084
   0.026289   0.087522

mean(a,3)
ans =

   0.54019   0.46897
   0.42908   0.45215 
```

# android - wifi信号强度变化的意图

> ID：15748124
> 
> 赞同：0
> 
> 时间：2013-04-01T17:20:56.407
> 
> 标签：android, android-intent, android-wifi

我想在我的 wifi 信号低于 20% 时打开我的应用程序如何实现？下面是wifi信号强度的代码

```
 WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
     final WifiInfo connectionInfo = wifiManager.getConnectionInfo();
      int rssi = connectionInfo.getRssi();
        int level = WifiManager.calculateSignalLevel(rssi, 10);
        int percentage = (int) ((level/10.0)*100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:36:50.147

一种解决方案是编写一个定期检查信号强度的小型服务，并在超过 20% 的水平后打开您的应用程序。当心这样的东西过度使用电池。

# jquery - CodeMirror 未正确更新 textarea

> ID：15748131
> 
> 赞同：3
> 
> 时间：2013-04-01T17:21:42.100
> 
> 标签：jquery, codemirror

我在 jquery-ui 选项卡小部件内的页面上有多个 CodeMirror 实例。我像这样动态创建这些实例：

```
//Returns a code mirror editor
editor.create = function(id){

    var codeID = "code-" + id;
    var $node = $('<form><textarea id="' + codeID + '" name="' + codeID + '">test</textarea></form>');
    editor.editors[id] = CodeMirror.fromTextArea($node.find("textarea").get(0), editor.options);

    return $node;

}; 
```

每个实例都存储在一个名为 的全局数组中`editors`。

一旦它被创建，它就会被附加到 DOM 中。

```
var $editor = editor.create(id);
var tabID = "tabs-" + id;
var $tab = $('<li id=' + id + '><a href="#' + tabID + '">' + name + '</a> <span class="ui-icon ui-icon-close" role="presentation">Remove Tab</span></li>');
var $tabPanel = $('<div id="' + tabID + '"></div>');

$tabPanel.append($editor);

$('#coder > ul').append($tab);
$('#coder').append($tabPanel);
coderTabs.tabs("refresh"); 
```

放置在文本区域中的测试文本显示在编辑器中。但是，调用`editor.editors[id].save()`不会更新 textarea。

```
$('#project-save').click(function(){
        var active = $( "#coder" ).tabs( "option", "active" );
        var id = $('#coder .ui-tabs-nav li').eq(active).attr("id");
        console.log(editor.editors[id]);
        editor.editors[id].save();
        return false;
}); 
```

我不确定我缺少哪个步骤来更新 textarea。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:31:03.833

原来我对它是如何工作的有错误的概念。我添加`.save()`了`onBlur`，然后当需要`.getValue()`对编辑器实例上调用的数据进行处理时。

# jquery - 使用 jQuery 触发提交处理程序

> ID：15748132
> 
> 赞同：0
> 
> 时间：2013-04-01T17:21:50.930
> 
> 标签：jquery, triggers, submit, handler, form-submit

我正在尝试在 jQuery 中触发提交处理程序，但在提交时它会进入操作页面。我究竟做错了什么？

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<script>
$('#target').submit(function() {
    alert('Handler for .submit() called.');
    return false;
});
</script>
<form id="target" action="destination.html">
    <input type="text" value="Hello there" />
    <input type="submit" value="Go" />
</form>
<div id="other">
    Trigger the handler
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:27:42.473

尝试：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<script>
$(function() {
  $('#target').submit(function() {
      alert('Handler for .submit() called.');
      return false;
  });
});
</script>
<form id="target" action="destination.html">
    <input type="text" value="Hello there" />
    <input type="submit" value="Go" />
</form>
<div id="other">
    Trigger the handler
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:29:27.667

两个更改...一，将您的代码包装在一个`onready`中，二，添加一个`preventDefault`：

```
$(function() {
  $('#target').submit(function(event) {
      event.preventDefault();
      alert('Handler for .submit() called.');
      return false;
  });
}); 
```

更多信息：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# java - JTextArea 吞下 JButton 动作监听器 Java

> ID：15748133
> 
> 赞同：0
> 
> 时间：2013-04-01T17:21:54.077
> 
> 标签：java, swing, jbutton, actionlistener, jtextarea

我在按钮上有一个 JButton 和一个 JTextArea 上的动作侦听器。但是，当我单击按钮时，文本区域会吞下事件，并且按钮没有任何反应。

如何点击该区域？

谢谢

按钮代码

```
public class CustomFoodItemButton extends JButton{

    public JTextArea buttonTitle;
    /**
     * Public constructor
     * @param title
     */
    public CustomFoodItemButton(String title) {

        //Set button text by using a text area
        buttonTitle = new JTextArea();
        buttonTitle.setText(title);
        buttonTitle.setFont(new Font("Helvetica Neue", Font.PLAIN, 15));

        buttonTitle.setEditable(false);
        buttonTitle.setWrapStyleWord(true);
        buttonTitle.setLineWrap(true);
        buttonTitle.setForeground(Color.white);
        buttonTitle.setOpaque(false);

        //Add the text to the center of the button
        this.setLayout(new BorderLayout());
        this.add(buttonTitle,BorderLayout.CENTER);

        //Set the name to be the title (to track actions easier)
        this.setName(title);

        //Clear button so as to show image only
        this.setOpaque(false);
        this.setContentAreaFilled(false);
        this.setBorderPainted(false);

        //Set not selected
        this.setSelected(false);

        //Set image
        setImage();
    } 
```

GUI 类代码

```
private void addFoodItemButtons (JPanel panel){

        //Iterate over menu items
        for (FoodItem item : menuItems) {

            //Create a new button based on the item in the array. Set the title to the food name
            CustomFoodItemButton button = new CustomFoodItemButton(item.foodName);

            //Add action listener
            button.addActionListener(this);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:29:50.460

**编辑**对于多行 JComponents，请查看以下答案：[https ://stackoverflow.com/a/5767825/2221461](https://stackoverflow.com/a/5767825/2221461)

在我看来，好像你把事情复杂化了。如果您无法编辑 TextArea 的文本，为什么还要在按钮上使用 TextArea？

JButtons 还有另一个构造函数：

```
JButton button = new JButton(item.foodname); 
```

这将创建一个按钮，其值为“item.foodname”作为文本。

然后你可以简化你的构造函数：

```
public class CustomFoodItemButton extends JButton {
    public CustomFoodItemButton(String title) {
        super(title);
        setName(title);
        setOpaque(false);
        setContentAreaFilled(false);
        setBorderPainted(false);
        setSelected(false);
        setImage();
    }
} 
```

如果我误解了您的问题，请告诉我。

# wpf - 从资源 XAML 获取图像

> ID：15748134
> 
> 赞同：1
> 
> 时间：2013-04-01T17:22:00.663
> 
> 标签：wpf, xaml

我有一个 WPF 应用程序，我应该根据当前的文化设置按钮图像。它适用于字符串：

```
<Label Content="{x:Static res:Resources.Buy}"></Label> 
```

根据文化显示字符串，但带有图像：

```
<Image Source="{x:Static res:Resources.GetItFree}"></Image> 
```

我得到一个错误。为什么以及如何正确做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:37:09.803

我以前做过，但是使用了一个库：[Infralution.Localization.Wpf](http://www.codeproject.com/Articles/35159/WPF-Localization-Using-RESX-Files)。执行图像资源引用的方式非常简单：

```
<Window Language="{UICulture}" x:Class="WpfApp.MainWindow"
    ...
    Icon="{Resx ResxName=WpfApp.MainWindow, Key=Window.Icon}">...</Window> 
```

这是您得到的最终图像（它随文化而变化）：

![](https://i.stack.imgur.com/oW03I.gif)

希望这个参考可以帮助，它适用于我......

# excel - 将 Excel 表中的项目列表转换为逗号分隔的字符串

> ID：15748138
> 
> 赞同：1
> 
> 时间：2013-04-01T17:22:25.060
> 
> 标签：excel, vba

我在 Excel (Table1) 中有一个表格，其中包含以下列标题：员工姓名、州许可和许可状态。该表的示例是：

```
John Adams  NY  Active
John Adams  PA  Active
John Adams  NJ  Inactive
Ralph Ames  MS  Active
Ed Turner   MS  Pending 
```

我想设置一个摘要选项卡，每个员工有一行，其中有一列用于活动许可证、待处理许可证和非活动许可证，并且这些单元格将显示一个逗号分隔的适当状态代码列表。例如：

```
Name        Active   Pending   Inactive
John Adams  NY, PA             NJ
Ralph Ames  MS
Ed Turner            MS 
```

我只是好奇进入这个自定义列表的最佳方式。我编写了下面的函数，它似乎工作正常，它的运行速度比我预期的要快，但它似乎效率低下，因为它每次都遍历整个表，并且我已将引用此函数的公式粘贴到几百个单元格：

```
Function comma_state_list(the_name As String, the_status As String) As String
    Dim ws As Worksheet
    Dim oLo As ListObject
    Dim oCol As ListColumns

    Set ws = Worksheets("State Licenses")
    Set oLo = ws.ListObjects("Table1")
    Set oCol = oLo.ListColumns

    For i = 1 To oLo.ListRows.Count
        If oLo.Range(i, 1).Value = the_name And oLo.Range(i, 3) = the_status Then
            comma_state_list = comma_state_list & oLo.Range(i, 4) & ", "
        End If
    Next i

    If Len(comma_state_list) = 0 Then
        comma_state_list = ""
    Else
        comma_state_list = Left(comma_state_list, Len(comma_state_list) - 2)
    End If
End Function 
```

有没有办法可以使用 VBA 对表运行类似 SQL 的查询，所以我只是循环遍历 SQL 结果而不是每次都遍历整个表？我在想这也有助于按字母顺序排列摘要列表。或者也许还有其他更好的方法我没有想到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:15:44.560

好的，这是一个使用脚本字典的示例。

我在一张工作表上有这张表：

![按州列出的许可证状态初始表列表](https://i.stack.imgur.com/wzAgR.jpg)

并且输出应该生成一个带有摘要数据的新工作表，例如：

![每个员工姓名输出一行汇总数据](https://i.stack.imgur.com/6Xjly.jpg)

我试图把它记录得非常彻底，但如果您对此有任何疑问，请告诉我。

```
Option Explicit
Sub Test()

Dim wsCurr As Worksheet: Set wsCurr = ActiveSheet
Dim wsNew As Worksheet 'output container'
Dim rowNum As Long 'row number for output'

'Scripting dictionaries:'
Dim inactiveDict As Object
Dim activeDict As Object
Dim key As Variant

'Table variables'
Dim rng As Range 'table of data'
Dim r As Long 'row iterator for the table range.'

'information about each employee/row'
Dim empName As String
Dim state As String
Dim status As String

'Create our dictionaries:'
Set activeDict = Nothing
Set inactiveDict = Nothing
Set activeDict = CreateObject("Scripting.Dictionary")
Set inactiveDict = CreateObject("Scripting.Dictionary")

Set rng = Range("A1:C6") 'better to set this dynamically, this is just an example'

For r = 2 To rng.Rows.Count
    empName = rng(r, 1).Value
    state = rng(r, 2).Value
    status = rng(r, 3).Value

    Select Case UCase(status)
        Case "ACTIVE"
            AddItemToDict activeDict, empName, state

        Case "INACTIVE"

            AddItemToDict inactiveDict, empName, state

    End Select
Next

'Add a new worksheet with summary data'

Set wsNew = Sheets.Add(After:=wsCurr)
With wsNew
    .Cells(1, 1).Value = "Name"
    .Cells(1, 2).Value = "Active"
    .Cells(1, 3).Value = "Inactive"

    rowNum = 2

    'Create the initial table with Active licenses'
    For Each key In activeDict
        .Cells(rowNum, 1).Value = key
        .Cells(rowNum, 2).Value = activeDict(key)
        rowNum = rowNum + 1
    Next

    'Now, go over this list with inactive licenses'
    For Each key In inactiveDict
        If activeDict.Exists(key) Then
            rowNum = Application.Match(key, .Range("A:A"), False)
        Else:
            rowNum = Application.WorksheetFunction.CountA(wsNew.Range("A:A")) + 1
            .Cells(rowNum, 1).Value = key
        End If

        .Cells(rowNum, 3).Value = inactiveDict(key)
    Next
End With

'Cleanup:
Set activeDict = Nothing
Set inactiveDict = Nothing

End Sub

Sub AddItemToDict(dict As Object, empName As String, state As String)
'since we will use the same methods on both dictionary objects, '
' it would be best to subroutine this action:'
Dim key As Variant

'check to see if this employee already exists'
If UBound(dict.Keys) = -1 Then
    dict.Add empName, state
Else:
    If Not dict.Exists(empName) Then
    'If IsError(Application.Match(empName, dictKeys, False)) Then
        'employee doesn't exist, so add to the dict'
        dict.Add empName, state
    Else:
        'employee does exist, so update the list:'
        'concatenate the state list'
        state = dict(empName) & ", " & state
        'remove the dictionary entry'
        dict.Remove empName
        'add the updated dictionary entry'
        dict.Add empName, state
    End If
End If

End Sub 
```

# ios - 当我的应用程序返回前台时在我的视图中调用方法

> ID：15748141
> 
> 赞同：0
> 
> 时间：2013-04-01T17:22:35.540
> 
> 标签：ios, uiviewcontroller

当我的应用程序从后台返回时，如何调用方法？

我知道有可以在应用程序委托中调用的方法，但我想在我的视图中调用一个方法。

这样做的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:30:42.823

您应该让您想要的视图控制器注册`UIApplicationWillEnterForegroundNotification`通知，例如`initWithNibName:nibBundleOrNil:`

```
- (id)initWithNibName(NSString *)nibNameOrNil bundle:(NSBundle*)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourMethod:) name:UIApplicationWillEnterForegroundNotification object:nil];

        // Whatever else your init method should do here...
    }    

    return self;        
}

- (void)yourMethod:(NSNotification *)notification
{
    // whatever you want to do here...
} 
```

确保您还取消注册`dealloc`：

```
- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

# oracle11g - Oracle 包函数调用在 .NET 中失败

> ID：15748142
> 
> 赞同：0
> 
> 时间：2013-04-01T17:22:39.637
> 
> 标签：oracle11g, .net-4.0, ado.net

我正在将 java 应用程序转换为 .NET 应用程序，并且需要与 Package Function 接口。该函数以标准化的方式插入到多个表中，因此编写单独的查询来完成我的目标不是一种选择。

从这里和其他地方的阅读中，我了解到要访问 .NET 中的函数，您将其视为存储过程。我相信我已经正确编写了 ADO 代码，但是我遇到了我不应该遇到的异常。

我的代码：

```
Dim conn As OracleConnection = Database.DataConnection //A property that opens the connection on Get
Dim cmd As New OracleCommand()
cmd.Connection = conn
cmd.CommandText = "pkg_insert_stock.create_stock"
cmd.CommandType = CommandType.StoredProcedure

...//input values assigned here

'Return parameters
cmd.Parameters.Add("v_stock_id", OracleDbType.Varchar2, ParameterDirection.ReturnValue)

'Input parameters
cmd.Parameters.Add("p_cust_num", OracleDbType.Int32, custNum, ParameterDirection.Input)
cmd.Parameters.Add("p_group_code", OracleDbType.Varchar2, groupCode, ParameterDirection.Input)
cmd.Parameters.Add("p_searchkey1", OracleDbType.Varchar2, search1, ParameterDirection.Input)
cmd.Parameters.Add("p_searchkey2", OracleDbType.Varchar2, search2, ParameterDirection.Input)
cmd.Parameters.Add("p_searchkey3", OracleDbType.Varchar2, search3, ParameterDirection.Input)
cmd.Parameters.Add("p_unit_qty", OracleDbType.Int32, unitQty, ParameterDirection.Input)
cmd.Parameters.Add("p_price", OracleDbType.Int32, price, ParameterDirection.Input)
cmd.Parameters.Add("p_width", OracleDbType.Decimal, width, ParameterDirection.Input)
cmd.Parameters.Add("p_basis_weight", OracleDbType.Decimal, basisWeight, ParameterDirection.Input)
cmd.Parameters.Add("p_costingkind", OracleDbType.Int32, costingKind, ParameterDirection.Input)
cmd.Parameters.Add("p_quality", OracleDbType.Varchar2, quality, ParameterDirection.Input)
cmd.Parameters.Add("p_sales_desc", OracleDbType.Varchar2, salesDesc, ParameterDirection.Input)
cmd.Parameters.Add("p_purchase_desc", OracleDbType.Varchar2, purchaseDesc, ParameterDirection.Input)

'Execute the stored procedure
cmd.ExecuteNonQuery()
articleNum = CType(cmd.Parameters.Item("v_stock_id").Value, Integer)
conn.Close() 
```

函数签名：

```
PACKAGE pkg_insert_stock AS
function create_stock(p_cust_num in NUMBER, p_group_code in VARCHAR2, p_searchkey1 in VARCHAR2, p_searchkey2 in VARCHAR2, p_searchkey3 in VARCHAR2, p_unit_qty in NUMBER, p_price in NUMBER, p_width in NUMBER, p_basis_weight in NUMBER, p_costingkind in NUMBER, p_quality in VARCHAR2,p_sales_desc in VARCHAR2, p_purchase_desc in VARCHAR2) return VARCHAR2;
END pkg_insert_stock; 
```

我的问题（目前）是我收到 ORA-01403: no data found on this line of the function：

```
select round(((sysdate - to_date('01-JAN-1970','DD-MON-YYYY')) * (86400)),0) into v_timestamp from dual; 
```

这对我来说没有任何意义。Sysdate 不是可以返回“未找到数据”的东西，除非我误解了它的工作原理。此外，这个函数在我们基于 Java 的生产服务器上也能正常工作。

我能够找到的关于访问函数和存储过程的所有内容都告诉我，我已经正确设置了这个，但显然情况并非如此。我已经验证了我所有的输入变量在运行时都有值，所以我现在很茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:47:49.393

结果发现有一些数据丢失——只是不在 Oracle 指示的行上。有问题的字段有时不包含数据，但通常包含。该函数被编码以处理那里的缺失，但无论出于何种原因，该函数都因错误而退出，而不是执行 PLSQL 代码。然而，这是一个不同的问题。

# c# - 来自 Type 的类型转换。从 Type 转换为模型

> ID：15748143
> 
> 赞同：0
> 
> 时间：2013-04-01T17:22:40.200
> 
> 标签：c#, casting

我有一个从中得到的模型`Type`。型号为`Type` `BasePage`。我可以将其转换/转换为 的类型`Type`吗？这个页面可以是 10 种不同的类型，所以我真的会从`Type`该作品的转换/转换中受益。

```
Type pageType = page.GetType();

//this is what im trying to do but from the Type instead
var newPageOfType = (pageType)pageToCast; //I would usually use this Typecast 
```

**更新**
用正确的示例代码更新了我的问题。所有`pageType`类型都派生自同一个`BasePage`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:39:30.377

最常见的方法是实际进行演员表，看看它是否像这样成功：

```
var newPage = page as SomeDerivedPageClass;
if (newPage != null)
{
    // the cast succeeeded, page was actually of the derived type
}
else
    // the passed object wasn't what you were expecting. ignore it,
    // throw an error, log the error, whatever is appropriate. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:59:56.170

只要参数实现[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx) ，您就可以使用[Convert.ChangeType](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)。`value`

```
Type pageType = page.GetType();
var newPageOfType = Convert.ChangeType(pageToCast, pageType); 
```

# java - Android Java - 创建一个扩展现有类的接口

> ID：15748144
> 
> 赞同：1
> 
> 时间：2013-04-01T17:22:43.333
> 
> 标签：java, interface, extends

我想创建扩展 Activity 的自定义活动类，

但是添加了另一个继承者必须实现的抽象方法。

例子：

```
interface MyActivity extends Activity
{
    public void myAbstractMethod();
} 
```

IDE 说：“Activity 类型不能是 MyActivity 的超接口；超接口必须是接口”

我怎么能做这样的事情？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:25:20.480

听起来你需要`MyActivity`成为一个抽象类，而不是一个接口。接口不继承自类；它们只能从其他接口继承。

尝试

```
abstract class MyActivity extends Activity
{
    public abstract void myAbstractMethod();
} 
```

一个具有所有抽象方法的抽象类表现得像一个接口，所以这听起来像是你需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:25:23.160

您可以使用抽象类而不是接口。

[在http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)阅读更多内容

例如

```
abstract public class AbstractActivity extends Activity {
    public abstract void myAbstractMethod();
} 
```

但是，这不允许您同时实现 AbstractActivity 和另一个超类，但听起来您不需要这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:29:00.017

一个接口只能扩展其他接口，不能是一个具体的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T18:51:02.110

看起来接口可以扩展一些类。例如，

```
java.util.concurrent.ExecutorService:

public **interface** ExecutorService **extends** Executor { ...

java.util.concurrent.Executor:

public **class** Executors { ... 
```

但`java.util.concurrent.Executorhas`仅限静态方法。

# jquery - 自动完成标题标签

> ID：15748145
> 
> 赞同：1
> 
> 时间：2013-04-01T17:22:45.973
> 
> 标签：jquery, href, title

不确定这是否可能，并且可能只是疯狂的复活节星期一无聊！但只是认为它可以为我节省一些麻烦。

我想知道当你链接一些文本时，这些文本是否可以在标题标签中重复，即：

```
<a href="#" title="these are the words" >these are the words</a> 
```

jquery可以做到这一点吗？诸如在标题中查找文本并重复之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:26:41.030

是的，这是可以做到的。

```
$(function() {
   $("a").each(function(index, element) {
     $(element).attr('title',$(element).text());
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:27:01.237

您可以使用以下代码遍历所有链接：

```
 $('a').each(function() {
    var text = $(this).text();
    $(this).attr('title', text );
}); 
```

第一部分获取链接文本，然后将标题设为文本。

# c - Windows 计算机和 Mac/Linux 计算机之间的 C 文件传输？

> ID：15748146
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:22:46.173
> 
> 标签：c, file, tcp, p2p, transfer

如果我有 Windows 计算机和 Mac 计算机或 Linux 计算机，是否有推荐的库方法在它们之间传输不涉及 FTP、密码等的文件。

例如：

计算机 #1：Windows 7，本地 ip 为 192.168.1.5 计算机 #2：Mac Lion，本地 ip 为 192.168.1.9

是否有用于 C 和/或 C++ 的已知点对点文件传输库，或者这是使用已建立库或我不知道的东西的常用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:24:13.753

您可以使用库[libcurl。](http://curl.haxx.se/)

没有登录和密码提示。只需在 curl 配置中使用该功能提供登录名和密码，`curl_easy_setopt`所有工作都将由 libcurl 完成

# spring - Spring 3 / JSF 2 应用程序的正确目录结构？

> ID：15748152
> 
> 赞同：1
> 
> 时间：2013-04-01T17:22:58.387
> 
> 标签：spring, jsf, directory, war

在工作中，我看到了几种为此类应用程序设置目录结构的方法。也许有不止一个正确答案。这是我设置目录结构的方式 - 是否正确？还是有更好的配置方法？（我将其打包在 WAR 文件中）

*   /webappTopDir
    *   /src
        *   /主要的
            *   /java（控制器和其他类）
            *   /webapp
                *   /subfolder1（弹簧保护的子文件夹）
                *   /subfolder2（弹簧保护的子文件夹）
                *   /资源
                    *   /js
                    *   /图片
                    *   /css
                *   /WEB-INF（包含 application-context.xml、security.xml、faces-config、web.xml 和 spring taglibs）
                    *   /classes（包含自定义 JSF 消息和日志记录属性）
                        *   META-INF（包含 persistence.xml）
                    *   /lib
                    *   /模板
                *   /META-INF（包含 context.xml）

这种结构有效，但我仍然想确保它是最佳实践。我发现真正奇怪的是 WEB-INF/classes 下的 META-INF，但从我在 Oracle 文档中看到的内容来看，如果将您的应用程序打包到 WAR [Oracle 管理实体](http://docs.oracle.com/javaee/5/tutorial/doc/bnbqw.html)中，这就是您所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T06:27:41.473

就我而言， META-INF 目录位于 WebContent 目录下。我认为你认为奇怪的是正确的。但绝对没有对错之分。只有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:36:37.177

“正确”一词意味着文件夹布局有一个客观标准。以下是我所知道的客观标准：

1.  项目特定布局。无论项目在布局中体现什么历史，您都应该继续维护该布局，直到您被迫退出它。
2.  开发者社区布局。您的商店决定布局的实施方式。这种布局是通过几代程序员和正在解决的开发力量建立起来的。改变开发者社区的心态并不是一件容易的事，即使只是你自己。
3.  构建工具布局。由于工具集使用的约定，许多构建工具具有特定的布局。Make、Ant、Seam 2、Spring、Maven 1、Maven 3、JBoss Forge 似乎都有自己的约定，这些约定源自创建工具集的开发人员社区。每个工具集都有自定义布局的方法。
4.  库/框架布局。Spring 有一个（一组）特定布局，可以很好地与其构建设置配合使用。

不过，要回答您的具体问题，我建议您使用 Spring 模板来构建目录布局。您可以尝试以下教程：

[http://static.springsource.org/docs/Spring-MVC-step-by-step/](http://static.springsource.org/docs/Spring-MVC-step-by-step/)

当您按照本教程进行操作时，了解 Spring 构建链需要将东西放在特定位置的原因。这允许您证明教程布局的合理性，并将类似的推理应用于您自己的应用程序布局。

# c# - 如何使用 linq 表达式将方法作为另一个方法的参数传递

> ID：15748153
> 
> 赞同：5
> 
> 时间：2013-04-01T17:22:59.570
> 
> 标签：c#, linq, expression, func

我想创建一个在后台线程中运行另一个方法的方法。像这样的东西：

```
void Method1(string param)
{
    // Some Code
}

void Method2(string param)
{
    // Some Code
}

void RunInThread(AMethod m)
{
   //Run the method in a background thread
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T17:24:19.033

如果您的方法有返回值，请使用[Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx)委托，否则您可以使用[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)委托。例如：

```
void Method1(string param)
{
    // Some Code
}

void Method2(string param)
{
   // Some Code
}

void RunInThread(Action<string> m)
{
   //Run the method in a background thread
} 
```

然后你可以`RunInThread`这样调用：

```
RunInThread(Method1);
RunInThread(Method2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:26:34.773

我喜欢`Task.Run`当我只想在后台线程中运行一点代码时。它甚至看起来与您要定义的签名几乎相同。还有很多其他的重载。

```
Task.Run(()=>{ 
      //background method code 
   }, TResult); 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh195051.aspx)

# java - 不兼容的魔法值 0

> ID：15748155
> 
> 赞同：11
> 
> 时间：2013-04-01T17:23:04.960
> 
> 标签：java, maven

我正在 STS 中开发 java maven 项目（基于 Eclipse Juno 3.8.2），但出现以下错误：

> java.lang.ClassFormatError：类文件org/eclipse/jdt/internal/junit4/runner/JUnit4TestReference中不兼容的魔法值0

我认为它与混合 Java 版本有关，但我无法解决它，可能我错过了一些东西。

完整的堆栈跟踪是：

```
java.lang.ClassFormatError: Incompatible magic value 0 in class file org/eclipse/jdt/internal/junit4/runner/JUnit4TestReference
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

相关部分`pom.xml`是：

```
<plugin>
    <inherited>true</inherited>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <encoding>UTF-8</encoding>
        <showWarnings>true</showWarnings>
        <showDeprecation>true</showDeprecation>
    </configuration>
</plugin> 
```

我的Java版本是：

```
> java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) Client VM (build 23.7-b01, mixed mode, sharing) 
```

并且在项目的 Eclipse (STS) 配置中是

![Eclipse Java 编译器设置](https://i.stack.imgur.com/947AD.png)

Maven依赖：

```
<properties>
    <wicket.version>6.6.0</wicket.version>
    <jetty.version>7.6.3.v20120416</jetty.version>
    <spring.version>3.2.2.RELEASE</spring.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <!-- Wicket -->
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-core</artifactId>
        <version>${wicket.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-spring</artifactId>
        <version>1.4.17</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-extensions</artifactId>
        <version>${wicket.version}</version>
    </dependency>

    <!-- LOGGING DEPENDENCIES - LOG4J -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.4</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <!-- Spring -->
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.3.0.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-tx</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-orm</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.javaconfig</groupId>
        <artifactId>spring-javaconfig</artifactId>
        <version>1.0.0.m3</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.2.9</version>
        <scope>system</scope>
        <systemPath>c:\JavaLibs\hsqldb-2.2.9\hsqldb.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.10.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.10.Final</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.2.2.RELEASE</version>
        <scope>test</scope>
    </dependency>

    <!-- JETTY DEPENDENCIES FOR TESTING -->
    <dependency>
        <groupId>org.eclipse.jetty.aggregate</groupId>
        <artifactId>jetty-all-server</artifactId>
        <version>${jetty.version}</version>
        <scope>provided</scope>
    </dependency>

</dependencies> 
```

我发现，只有在我尝试运行 JUnit 测试时才会出现问题，我的项目运行良好。我试图检查运行配置，似乎没问题。我也检查了项目方面，那里的一切似乎也都很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:31:30.423

看来，这是 STS 的一些普遍问题（基于 Eclipse Juno 3.8.2）。

我尝试了最简单的测试，但它也不起作用：

# pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>net.betlista</groupId>
    <artifactId>tests-sts</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
    </dependencies>

</project> 
```

# 测试班

```
package net.betlista.tests.sts.junit;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( classes = { JavaConfig.class } )
public class CalculatorTest {

    @Autowired
    Calculator calculator;

    @Test
    public void addTest() {
        final int a = 10, b = 20;
        Assert.assertEquals( a + b, this.calculator.add( a, b ) );
    }

} 
```

# 配置类

```
package net.betlista.tests.sts.junit;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class JavaConfig {

    @Bean
    public Calculator getCalculator() {
        return new Calculator();
    }

} 
```

# 服务等级

```
package net.betlista.tests.sts.junit;

import org.springframework.stereotype.Service;

@Service
public class Calculator {

    int add( final int a, final int b ) {
        return a + b;
    }

} 
```

我在 STS (3.8.2) 中遇到了同样的错误，而在 STS (4.2.2) 中一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:06:12.373

尽管命令行上有 1.7.0_17，但我认为您的 Eclipse 运行在较旧版本的 java 上。要确定正在运行的 java Eclipse 版本，请参见：

[找出运行 JVM Eclipse 的设备](https://stackoverflow.com/questions/557169/find-out-what-jvm-eclipse-is-running-on)

然后要更改 java 的版本 Eclipse 正在运行，请参见：

[http://wiki.eclipse.org/Eclipse.ini#Specifying_the_JVM](http://wiki.eclipse.org/Eclipse.ini#Specifying_the_JVM)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T12:03:53.553

我收到此错误消息，但对我没有任何帮助。我的问题可能与我将新类从开发转移到生产的方式有关。我在 Dev 上创建了新类并将其复制到 Production，而不是 .war 文件，最后 tomcat 文件夹上的类所有者是“root”，而不是“tomcat”，“chown”到 tomcat 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-12T00:21:59.213

同样在这里通过简单地清理并再次**重建项目来解决**

在我的情况下，这个错误发生在我更改上述类的超类时；

我的堆栈跟踪中提到的类是我项目中的一个类，而不是像你这样的特定库

`org/eclipse/jdt/internal/junit4/runner/JUnit4TestReference`

希望对你有帮助

# android - 如何获取 ListView 中的选定项？

> ID：15748157
> 
> 赞同：0
> 
> 时间：2013-04-01T17:23:15.363
> 
> 标签：android, android-layout

我正在构建一个带有 ListView 的简单应用程序。在 Java 代码中，我试图找出当前选择了哪些项目。从[http://developer.android.com/reference/android/widget/ListView.html](http://developer.android.com/reference/android/widget/ListView.html)的 ListView 文档中，我看到 ListView 类中有一个名为

```
public void setSelection (int position) 
```

我寻找了一个名为 getSelection() 的类似名称的方法，但没有。

那么，首先，如何确定当前选择了 ListView 中的哪个项目？我已经有了 ListView 的对象，所以我只需要该方法来告诉我用户单击了哪个项目。

```
ListView myLV = (ListView) findViewByID(R.id.myListView); 
```

另外，我可以定义一个在选择项目时调用的“回调”函数吗？

最后，我如何使用文档来解决这个问题？这是一个非常基本的问题，我应该能够自己解决。我做了似乎是正确的事情：我查看了 ListView 类的官方开发人员页面，但它没有提供答案。我如何为自己回答这些（基本）问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:27:45.890

> 我寻找了一个名为 getSelection() 的类似名称的方法，但没有。那么，首先，如何确定当前选择了 ListView 中的哪个项目？

超类 AdapterView 有[`getSelectedItem()`](https://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItem%28%29)，以及`getSelectedItemId()`其他。AbsListView 也有[`getSelectedView()`](https://developer.android.com/reference/android/widget/AbsListView.html#getSelectedView%28%29)。但是这些只有在你使用过时才会起作用[`setChoiceMode()`](https://developer.android.com/reference/android/widget/AbsListView.html#setChoiceMode%28int%29)

[OnItemClickListener](https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)让您在单击时知道单击了哪个。

> 最后，我如何使用文档来解决这个问题？

您从 ListView 的文档开始是对的，但请转到[“继承方法”](https://developer.android.com/reference/android/widget/ListView.html#inhmethods)部分并检查超类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:44:40.917

试试这个

```
 mylv.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> myAdapter, View v, int position, long lng) {
    String selectedFromList =(String) (mylv.getItemAtPosition(position));

  }                 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:48:30.153

您可以使用 onitem click listener.by 使用 on item click listener 获取位置，您可以获取列表中所选项目的位置。您可以将此位置放在 Toast

# c# - 将视频流保存在相机中的块中

> ID：15748159
> 
> 赞同：2
> 
> 时间：2013-04-01T17:23:26.237
> 
> 标签：c#, camera, video-streaming, ip-camera, chunking

我目前有一个 MJPEG 相机，我需要每隔一小时捕捉和保存它的视频。

我试图通过对传入数据进行分块并将其全部保存到一个文件中来实现这一点，但是创建的文件只是大约 1 秒长的视频流的损坏版本。

这是我所拥有的

```
request = WebRequest.Create("http://MYVIDEOURL.videostream.cgi");

request.Credentials = new NetworkCredential("USERNAME", "PASSWORD");

request.Method = "POST";

WebResponse response = request.GetResponse();

using(var fs = new FileStream(@"C:\TestVideo.avi", FileMode.Create)) {

    using(var repStream = response.GetResponseStream()) {

         while (!bw.CancellationPending)//this is for the background worker
         {

             byte[] b = new byte[4096];

             int bytesRead = repStream.Read(b, 0, b.Length);

             repStream.Read(b, 0, bytesRead);

             fs.Write(b, 0, bytesRead);

         }//end while

         fs.Close();

    }//end using

}//end using 
```

所有这些都在后台工作人员中，并且我在线程中有一个计时器，可以在指定的时间内运行它。

我使用的这种方法是连接到流，但正如我所说的只保存一秒钟的视频，并且视频已损坏。

# parsing - OASIS VLSI 布局文件解析器

> ID：15748166
> 
> 赞同：4
> 
> 时间：2013-04-01T17:23:53.677
> 
> 标签：parsing, vlsi, calibre

OASIS 是 VLSI 拓扑表示的一种格式。我需要一个 OASIS 格式的解析器，或者可能需要一些文档来描述这种格式的结构。我在 Google 中找不到任何提及它的内容。

是否有可用的 OASIS 解析器，或者至少有一些关于文件结构的文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-08T02:51:26.593

OASIS 文件格式是定义芯片布局的图形结构。文件中的几何图形被划分为单元格。然后可以将每个单元多次放置在不同的位置。这些位置可以嵌套在其他单元格中，形成 DAG 图结构。

您可以`oas`通过编写递归下降解析器并在内存中重新创建图形结构来解析文件。

格式的官方规范`oas`可以在[这里](http://www.wrcad.com/oasis/oasis-3626-042303-draft.pdf)找到。

此外，请查看[KLayout 源代码](https://github.com/klayoutmatthias/klayout/blob/master/src/db/db/dbOASISReader.cc)，了解如何为 Oasis 编写解析器的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-05T20:42:23.287

我认为[Cadence Virtuoso](http://www.cadence.com/products/cic/layout_suite/pages/default.aspx)会帮助你。2013 年 12 月的版本是稳定的，为 OASIS 添加了所有功能。

# android - 为什么我的数据库似乎没有安装？

> ID：15748169
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:24:03.033
> 
> 标签：android

我的应用程序使用数据库。在我的nexus 4（未植根）4.2.1 上，该应用程序正在运行并且数据库已正确安装。但是在我的 Iconia A501 4.0.3 上，植根后，该应用程序无法运行，并且一条消息说数据库不存在。

数据库位于资产目录中的脚本文件中，这是用于 DB.java 的代码：

```
 package fr.app.tutorielfragment;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.content.res.AssetManager;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import android.widget.Toast;
import android.content.ContextWrapper;

public class DB extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 28;

    // Database Name
//    private static final String DATABASE_NAME = "contactsManager";
    private static final String DATABASE_NAME = "BASE2.db";

    public static final String METIER_TABLE_DROP = "DROP TABLE IF EXISTS " + DATABASE_NAME + ";";
    Context context;

    public DB(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // Store the context for later use
        this.context = context;
        Toast.makeText(context, "DB context",1000).show();

    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase database) {
        String a = null;
        Log.d("aaa","Création des bases");
        Toast.makeText(context, "Création des bases",1000).show();
                        // creer la base avec le script
    executeSQLScript(database, "install7.sql");                     
        Log.d("aaa","Création des bases");
        a=a;
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        // Lorsque l'on change le numéro de version de la base on supprime la
        // table puis on la recrée
        if (oldVersion < DATABASE_VERSION) {    
            try
            {
                context.deleteDatabase(DATABASE_NAME);
                onCreate(db);
                Toast.makeText(context, "Supression des bases",1000).show();
                //              db.execSQL("DROP TABLE " + "base_codematiere" + ";");

            } 
            catch (SQLException e) 
            {
                Toast.makeText(context, "ERREUR pdt Supression des bases",1000).show();
                // TODO Handle Script Failed to Execute
                e=e;
                e=e;
            }

            db.close();
        }
        Toast.makeText(context, "onUpgrade",1000).show();
    }    

    public void removeAll()
    {
        // db.delete(String tableName, String whereClause, String[] whereArgs);
        // If whereClause is null, it will delete all rows.
        SQLiteDatabase db = this.getWritableDatabase(); // helper is object extends SQLiteOpenHelper
        db.delete(DATABASE_NAME, null, null);
//      db.delete(DatabaseHelper.TAB_USERS_GROUP, null, null);
    }

    private void executeSQLScript(SQLiteDatabase database, String dbname) 
    {
        int num=0;
        ByteArrayOutputStream outputStream = new  ByteArrayOutputStream();
        byte buf[] = new byte[1024];
        int len;
        AssetManager assetManager = context.getAssets();
        InputStream inputStream = null;

        try
        {
            inputStream = assetManager.open(dbname);
            while ((len = inputStream.read(buf)) != -1) 
            {
                outputStream.write(buf, 0, len);
            }
            outputStream.close();
            inputStream.close();

            String[] createScript = outputStream.toString().split(";");
            for (int i = 0; i < createScript.length; i++) 
            {
                String sqlStatement = createScript[i].trim();
                // TODO You may want to parse out comments here
                if (sqlStatement.length() > 0) 
                {
                    database.execSQL(sqlStatement + ";");
                    num=num+1;
                }
            }
            len=createScript.length;

        } 
        catch (IOException e)
        {
            // TODO Handle Script Failed to Load
            e=e;
            e=e;
        } 
        catch (SQLException e) 
        {
            // TODO Handle Script Failed to Execute
            e=e;
            e=e;
        }
    }

    } 
```

有人能解释一下为什么它在我的nexus4上工作正常，为什么在A501上不能工作？以及如何在 A501 上午餐我的应用程序？

提前谢谢，

更新：日志猫：

```
04-02 19:18:53.847: D/dalvikvm(15243): GC_FOR_ALLOC freed 2160K, 29% free 10164K/14151K, paused 21ms
04-02 19:18:53.877: I/SqliteDatabaseCpp(15243): sqlite returned: error code = 1, msg = statement aborts at 2: [BEGIN TRANSACTION;] cannot start a transaction within a transaction, db=/data/data/fr.app.tutorielfragment/databases/BASE2.db
04-02 19:18:53.877: D/aaa(15243): Création des bases
04-02 19:18:53.977: I/SqliteDatabaseCpp(15243): sqlite returned: error code = 1, msg = no such table: ID_DANGER_CLASSE_1, db=/data/data/fr.app.tutorielfragment/databases/BASE2.db
04-02 19:18:53.977: D/AndroidRuntime(15243): Shutting down VM
04-02 19:18:53.977: W/dalvikvm(15243): threadid=1: thread exiting with uncaught exception (group=0x40a681f8)
04-02 19:18:53.987: E/AndroidRuntime(15243): FATAL EXCEPTION: main
04-02 19:18:53.987: E/AndroidRuntime(15243): android.database.sqlite.SQLiteException: no such table: ID_DANGER_CLASSE_1: , while compiling: SELECT * FROM ID_DANGER_CLASSE_1 ;
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1538)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at fr.app.tutorielfragment.A_Page_Classe1.RD_Database_InfoClasse(A_Page_Classe1.java:47)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at fr.app.tutorielfragment.A_Page_Classe1.onActivityCreated(A_Page_Classe1.java:32)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.View.measure(View.java:12728)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.View.measure(View.java:12728)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.View.measure(View.java:12728)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2118)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.View.measure(View.java:12728)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.os.Looper.loop(Looper.java:137)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at java.lang.reflect.Method.invokeNative(Native Method)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at java.lang.reflect.Method.invoke(Method.java:511)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-02 19:18:53.987: E/AndroidRuntime(15243):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:45:40.153

```
没有这样的表： ID_DANGER_CLASSE_1: ，编译时： SELECT * FROM ID_DANGER_CLASSE_1 ；

```

从日志来看，您的表似乎尚未创建。

```
3.877：I/SqliteDatabaseCpp(15243)：sqlite 返回：错误代码 = 1，msg = 语句在 2 处中止：[BEGIN TRANSACTION;] 无法在事务中启动事务，db=/data/data/fr.app.tutorielfragment/数据库/BASE2.db
04-02 19:18:53.877: D/aaa(15243): Création des bases

```

尝试调试 executeSQLScript 方法，看看它在哪里失败。

在这条线之后

```
database.execSQL(sqlStatement + ";");

```

尝试打印出 sqlStatement 的值。

# sockets - 对等方重置 Coldfusion 连接（套接字错误 # 10054）

> ID：15748170
> 
> 赞同：0
> 
> 时间：2013-04-01T17:24:08.323
> 
> 标签：sockets, coldfusion

全部 -

我们一直收到错误 324 (net::ERR_EMPTY_RESPONSE)：访问少数网站时，服务器关闭了连接而没有发送任何数据（在 chrome 上）。同一台服务器上的其他网站工作正常。我们检查了我们的数据库日志，那里看起来不错。

关于为什么会发生这种情况的任何建议？

# c# - 间距乱了

> ID：15748178
> 
> 赞同：6
> 
> 时间：2013-04-01T17:24:36.597
> 
> 标签：c#, asp.net, html

我的间距怎么了？当标签包含文本时，间距很好，但它们是空的，它们在每个标签之间都有空白。当标签包含空文本时，为什么要添加额外的空间？

在标签中使用文本（我希望它看起来像）： ![](https://i.stack.imgur.com/TFt3v.png)

标签中没有文字（我不希望它看起来像这样）： ![](https://i.stack.imgur.com/HdRYH.png)

***在后面的 C# 代码上：***

```
 // On page load
        for (int i = 1; i < 10; i++)
        {
            string ID = i.ToString();
            PopulateLastNameLabel(ID);
        }

        protected void PopulateLastNameLabel(string ID)
        {
            Label lbl = new Label();
            lbl.Width = 70;
            lbl.Height = 20;
            lbl.Text = "";
            lbl.BackColor = System.Drawing.Color.Red;
            lbl.ID = "lastname_" + ID;
            pnlLastNameLabel.Controls.Add(lbl);
        } 
```

***在 ASP.NET 方面：***

```
<asp:Table ID="tblDisplayTable" runat="server">
    <asp:TableRow>
    <asp:TableCell>
    <asp:Panel ID="pnlPrizeNumberLabel" runat="server" Width="80px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell HorizontalAlign="Center" VerticalAlign="Middle">
    <asp:Panel ID="pnlPrizeDropDownList" runat="server" Width="130px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell>
    <asp:Panel ID="pnlNickNameLabel" runat="server" Width="70px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell>
    <asp:Panel ID="pnlPrizeNicknameTextBox" runat="server" Width="125px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell>
    <asp:Panel ID="pnlFirstNameLabel" runat="server" Width="70px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell>
    <asp:Panel ID="pnlLastNameLabel" runat="server" Width="70px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell>
    <asp:Panel ID="pnlEmailAddressLabel" runat="server" Width="140px"></asp:Panel>
    </asp:TableCell>
    <asp:TableCell>
    <asp:Panel ID="pnlAddButton" runat="server" Width="40px"></asp:Panel>
    </asp:TableCell>
    </asp:TableRow>
    </asp:Table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:03:56.583

如果我正确理解您的问题，您需要以下 css（从后面的代码中删除高度）。

每个控件的问题都在自己的表格单元格中，因此它们不会正确水平对齐。因此，您需要为每个控件显式设置高度。

```
<style type="text/css">
    td div { margin-right: 5px; }
    td div input {border: 1px solid #828282; height: 21px; }
    td div span { height: 25px; line-height: 25px; }
</style>

<asp:Table ID="tblDisplayTable" runat="server" CellPadding="0" CellSpacing="0">
    <asp:TableRow>
        <asp:TableCell>
            <asp:Panel ID="pnlPrizeNumberLabel" runat="server" Width="80px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell HorizontalAlign="Center" VerticalAlign="Middle">
            <asp:Panel ID="pnlPrizeDropDownList" runat="server" Width="130px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell>
            <asp:Panel ID="pnlNickNameLabel" runat="server" Width="70px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell>
            <asp:Panel ID="pnlPrizeNicknameTextBox" runat="server" Width="125px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell>
            <asp:Panel ID="pnlFirstNameLabel" runat="server" Width="70px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell>
            <asp:Panel ID="pnlLastNameLabel" runat="server" Width="70px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell>
            <asp:Panel ID="pnlEmailAddressLabel" runat="server" Width="140px">
            </asp:Panel>
        </asp:TableCell>
        <asp:TableCell>
            <asp:Panel ID="pnlAddButton" runat="server" Width="40px">
            </asp:Panel>
        </asp:TableCell>
    </asp:TableRow>
</asp:Table>

protected void Page_Load(object sender, EventArgs e)
{
    for (int i = 1; i < 10; i++)
    {
        string ID = i.ToString();
        TextBoxLabel(ID);
        PopulatePrizeNicknameLabel(ID);
        PopulateFirstNameLabel(ID);
        PopulateLastNameLabel(ID);
    }
}

protected void TextBoxLabel(string ID)
{
    TextBox lbl = new TextBox();
    lbl.Width = 65;
    lbl.Text = "";
    lbl.ID = "TextBox_" + ID;
    lbl.Text = ID;
    pnlNickNameLabel.Controls.Add(lbl);
}

protected void PopulatePrizeNicknameLabel(string ID)
{
    Label lbl = new Label();
    lbl.Width = 125;
    lbl.Text = "";
    lbl.BackColor = System.Drawing.Color.Green;
    lbl.ID = "PrizeNickname_" + ID;
    lbl.Text = ID;
    pnlPrizeNicknameTextBox.Controls.Add(lbl);
}

protected void PopulateLastNameLabel(string ID)
{
    Label lbl = new Label();
    lbl.Width = 70;
    lbl.Text = "";
    lbl.BackColor = System.Drawing.Color.Red;
    lbl.ID = "lastname_" + ID;
    lbl.Text = ID;
    pnlLastNameLabel.Controls.Add(lbl);
}

protected void PopulateFirstNameLabel(string ID)
{
    Label lbl = new Label();
    lbl.Width = 70;
    lbl.Text = "";
    lbl.BackColor = System.Drawing.Color.Blue;
    lbl.ID = "firstname_" + ID;
    lbl.Text = ID;
    pnlFirstNameLabel.Controls.Add(lbl);
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/I92d2.png)

我更喜欢一次创建一行而不是一次创建一列控件，但这不是 OP。

# c - 我们可以声明、定义和赋值给一个变量并在另一个文件中使用这些变量吗？

> ID：15748183
> 
> 赞同：1
> 
> 时间：2013-04-01T17:24:57.683
> 
> 标签：c, header-files, preprocessor-directive, multiple-definition-error

我是 C 编程的初学者，我正在尝试不同的方法并尝试使用小程序。

我有四个文件。两个头文件和两个源文件。我想要：

1.  在一个头文件中声明一个变量（实际上是两个变量和一个字符）和一个函数（来自第二个源文件）。
2.  定义这些变量并在第二个头文件中为它们分配值（从第 1 点开始的变量）。
3.  编写一个包含这两个头文件的函数，并在一个源文件中使用这些文件（第 2 点）中的值（没有 main- 仅使用变量的函数定义）。
4.  有一个从第二个源文件调用函数的主源文件（从第 3 点开始。）

我怎么会这样？我在两个 .c 文件中都包含了两个头文件。但是当我尝试编译和链接它（在 Linux 中使用 GCC）时，我得到 `multiple definition ... first defined here`所有变量的错误。

我看过这些答案[First](https://stackoverflow.com/questions/672734/how-to-prevent-multiple-definitions-in-c?rq=1)和[Second](https://stackoverflow.com/questions/2216765/variable-definition-in-header-files) 我不太理解[Second](https://stackoverflow.com/questions/2216765/variable-definition-in-header-files)中的答案，因为我无法弄清楚如何使用 header 防护。我无法弄清楚如何检查所有框（第 1 点到第 4 点）。

header1.h

```
extern int i,j; extern char c;
void ad_d(); 
```

header2.h

```
int j=6;int i=7;
char c='x'; 
```

fn文件.c

```
#include "header1.h"
#include "header2.h"
#include<stdio.h>

void ad_d()
{

    i+=j;

    printf("\n %d \t %c \n", i,c);
} 
```

文件main.c

```
#include<stdio.h>
#include "header1.h"
#include "header2.h"

void main()
{

    ad_d();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:40:31.877

您只能定义一次变量，该变量将在内存中分配存储值的空间。然后，您可以在每个文件中声明变量（或者更好的是在公共头文件中），这将告诉编译器该名称和类型的变量将在一个编译文件中定义，并且可以在稍后阶段找到.

在要定义变量的文件中使用：

```
int my_global = 0; /* always good practice to initalize */ 
```

在其他文件（或通用头文件）中使用：

```
extern int my_global; 
```

现在您可以从任何声明它的文件读取或写入 my_global。

标题保护的东西是试图将定义和声明移动到同一个语句中，在你的水平上，你最好在尝试玩这样的游戏之前掌握声明与定义的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:53:15.537

```
int j=6;int i=7;
char c='x'; 
```

您不希望这些在头文件中，因为它们是定义。而是将它们放在 C 文件中，并在两个文件中包含相同的标头（带有`extern`变量的声明）。

就目前而言，您的两个源文件都试图定义这些变量，这就是您收到错误的原因。

# git - 带有错误消息的 git push

> ID：15748186
> 
> 赞同：2
> 
> 时间：2013-04-01T17:25:19.847
> 
> 标签：git, gitolite

我在服务器上有 gitolite 和下一个配置

```
@developers = john bill 

repo    gitolite-admin
        RW+     =   admin

repo    main-project
        RW+CD      =   admin
        R master$       =  @developers
        RW+ develop$    =  @developers 
```

并且所有人都`@developers`可以看到下一条错误消息，当他们这样做时`git push`

```
$ git push origin develop
Counting objects: 117, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (88/88), done.
Writing objects: 100% (93/93), 400.94 KiB
Total 93 (delta 17), reused 0 (delta 0)
error: Unable to append to ./logs/HEAD: P
To ssh://gitolite@server/project
   ed683c3..b27b683  develop -> develop 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:00:17.290

请注意，[该线程](http://git.661346.n2.nabble.com/Error-Unable-to-append-to-logs-HEAD-Permission-denied-td5063068.html)提到了该“ `Unable to append to ./logs/HEAD`”错误消息来自远程存储库的共享性质的可能性。
不同的用户 id 访问共享的含义，而不仅仅是使用相同的 git 帐户的不同人。

在这种情况下：

*   `core.sharedRepository`在该仓库的 git 本地配置中设置`true`（gitolite 服务器上的裸仓库）将有所帮助，
*   以及至少手动修复权限`logs/HEAD`：该线程提到“所有文件和目录`${repo}.git`都应归该组所有并`+rw`为该组所有”，但这可能不是一个很好的例子。[在“ Redmine + Gitolite - 存储库权限问题等](https://stackoverflow.com/a/13086803/6309)
    ” 中查看更完整的示例。

# html - 根据当前窗口大小垂直和水平居中图像

> ID：15748189
> 
> 赞同：0
> 
> 时间：2013-04-01T17:25:23.957
> 
> 标签：html, css, image, centering

我已阅读与此问题相关的其他 SO 问题，但我找不到我的问题的答案。

我想将图像水平和垂直居中`div`，宽度和高度等于 100%。换句话说，如果有人调整浏览器窗口的大小，无论当前大小如何，图像都应该保持在窗口的中心。

我曾尝试过[JsFiddle](http://jsfiddle.net/B68c3/)一些东西，但无法使其工作。

我怎样才能让它工作？是否可以？有人可以在 JsFiddle 中展示一个操作示例吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:33:15.087

您可以使用固定位置，甚至不需要包装 div（如果您愿意，可以添加它）：

```
img {
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -16px;
  margin-left: -16px;
} 
```

边距是图像大小的一半（您提到它是已知的）。

这是小提琴：http: [//jsfiddle.net/B68c3/2/](http://jsfiddle.net/B68c3/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:28:58.067

您是否尝试过这样的 CSS：

```
background:url(your_image.jpg) no-repeat center center; 
```

# r - r 中 Twitter 情感分析中的表情符号

> ID：15748190
> 
> 赞同：19
> 
> 时间：2013-04-01T17:25:32.063
> 
> 标签：r, text-mining, iconv, sentiment-analysis

如何处理/摆脱表情符号，以便对推文进行排序以进行情绪分析？

获取：sort.list（y）中的错误：输入无效

谢谢

这就是表情从 twitter 和 r 中出现的方式：

```
\xed��\xed�\u0083\xed��\xed��
\xed��\xed�\u008d\xed��\xed�\u0089 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T00:29:44.163

这应该摆脱表情符号，使用`iconv`ndoogan 的建议。

一些可重现的数据：

```
require(twitteR) 
# note that I had to register my twitter credentials first
# here's the method: http://stackoverflow.com/q/9916283/1036500
s <- searchTwitter('#emoticons', cainfo="cacert.pem") 

# convert to data frame
df <- do.call("rbind", lapply(s, as.data.frame))

# inspect, yes there are some odd characters in row five
head(df)

                                                                                                                                                text
1                                                                      ROFLOL: echte #emoticons [humor] http://t.co/0d6fA7RJsY via @tweetsmania  ;-)
2 “@teeLARGE: when tmobile get the iphone in 2 wks im killin everybody w/ emoticons &amp; \nall the other stuff i cant see on android!" \n#Emoticons
3                      E poi ricevi dei messaggi del genere da tua mamma xD #crazymum #iloveyou #emoticons #aiutooo #bestlike http://t.co/Yee1LB9ZQa
4                                                #emoticons I want to change my name to an #emoticon. Is it too soon? #prince http://t.co/AgmR5Lnhrk
5  I use emoticons too much. #addicted #admittingit #emoticons <ed><U+00A0><U+00BD><ed><U+00B8><U+00AC><ed><U+00A0><U+00BD><ed><U+00B8><U+0081> haha
6                                                                                         What you text What I see #Emoticons http://t.co/BKowBSLJ0s 
```

**这是删除表情符号的关键行：**

```
# Clean text to remove odd characters
df$text <- sapply(df$text,function(row) iconv(row, "latin1", "ASCII", sub="")) 
```

现在再次检查，看看奇数字符是否消失（见第 5 行）

```
head(df)    
                                                                                                                               text
1                                                                     ROFLOL: echte #emoticons [humor] http://t.co/0d6fA7RJsY via @tweetsmania  ;-)
2 @teeLARGE: when tmobile get the iphone in 2 wks im killin everybody w/ emoticons &amp; \nall the other stuff i cant see on android!" \n#Emoticons
3                     E poi ricevi dei messaggi del genere da tua mamma xD #crazymum #iloveyou #emoticons #aiutooo #bestlike http://t.co/Yee1LB9ZQa
4                                               #emoticons I want to change my name to an #emoticon. Is it too soon? #prince http://t.co/AgmR5Lnhrk
5                                                                                 I use emoticons too much. #addicted #admittingit #emoticons  haha
6                                                                                        What you text What I see #Emoticons http://t.co/BKowBSLJ0s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-08-27T08:57:21.420

我推荐功能：
`ji_replace_all <- function (string, replacement)`

从包中：
`install_github (" hadley / emo ")`.

我需要从西班牙语推文中删除表情符号。尝试了几个选项，但有些为我弄乱了文本。然而，这是一个完美的奇迹：

> `library(emo)`
> 
> `text="#VIDEO ,Alguien sabe si en Afganistán hay cigarro?"`
> 
> `ji_replace_all(text,"")`

结果：

> `"#VIDEO ,Alguien sabe si en Afganistán hay cigarro?"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T08:53:58.577

您可以使用正则表达式来检测非字母字符并将其删除。示例代码：

```
rmNonAlphabet <- function(str) {
  words <- unlist(strsplit(str, " "))
  in.alphabet <- grep(words, pattern = "[a-z|0-9]", ignore.case = T)
  nice.str <- paste(words[in.alphabet], collapse = " ")
  nice.str
} 
```

# delphi - 如何在发布版本中编译依赖于仅调试代码的断言（）？

> ID：15748192
> 
> 赞同：3
> 
> 时间：2013-04-01T17:25:32.677
> 
> 标签：delphi, delphi-2010, assert

等待！- 这并不像听起来那么愚蠢的问题。标题很简洁。

我有一些调试代码来验证数据结构的正确性和一些检查这种正确性的断言，我只想在 Debug 构建中启用它们：

```
{$ifdef DEBUG}
  function Sorted : Boolean;
  function LinearSearchByValue(const T : TType) : NativeInt;
{$endif} 
```

后来在一个方法中：

```
assert(Sorted); 
```

例如。

在我启用断言的调试版本中，一切都很好。但是，在我的 Release build with assertions *disabled*中，该行`assert(Sorted);`会导致编译器错误`E2003 Undeclared identifier: 'Sorted'`。非常正确，没有声明标识符，但断言也被关闭，不应该被评估或生成任何代码。（试图通过声明方法但没有实现来欺骗断言会导致正常错误“不满足前向或外部声明”。它显然也在寻找方法体。）

这会导致一些混乱的代码，其中必须声明根本不应该存在于 Release 构建中的方法并具有主体，以便编译关闭的断言。

**如何在 Delphi 2010 中声明仅存在于调试版本中的方法，并在断言中使用那些也应该只存在于调试版本中的方法？**

更多信息：

*   我尝试用 包装方法声明`{$ifopt C+}`，它检查断言是否打开。调用`assert`仍因“未声明的标识符”而失败。

*   编译器选项肯定是关闭了断言。（我检查了 ：））

*   我已经尝试`assert`用`{$ifdef DEBUG}`. 但是，这是混乱的，不应该是必需的。在某一时刻，它让我担心即使在发布版本中也会编译断言，出于性能原因，我根本不想要它们。（这没有发生 - 没有生成断言代码。）

*   我目前的策略是一直声明这些方法，但是在 Release 构建中，如果定义方法体，则用一个虚拟结果填充它。这里的目的是编译所有断言，但方法的开销尽可能小，并且它们的返回值（如果它们实际上在发布版本中被调用）显然是错误的。

*   在 Delphi 中是否有任何与 C/C++ 风格的宏等效的`ASSERT(x)`东西，其中一个宏在发布版本中被简单地定义为空，导致编译器既看不到也不关心断言中的语句？这是在 C++ 中使用宏的少数简洁方法 (IMO) 之一。

因此，虽然没有生成断言，但它们已被编译。这又回到了我的问题：我如何最好地混合调试方法和断言，并发布构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:13:31.350

不要从您的发布版本中排除代码。将代码保留在那里，并无条件编译。

您反对将代码存在于发布版本中的论点是它“混乱”。但是你已经写好了代码，所以不管编译不编译都会很乱。你也可以让编译器编译它；毕竟，编译额外的代码并不需要更长的时间。

试图排除与断言相关的代码只会使您的代码更加*混乱*，因为它需要条件编译指令。

断言和调试信息是正交设置。不调试时可以启用断言，反之亦然。

另一种方法是将与断言相关的代码移动到单元测试中。然后它们会自动从您的应用程序的所有版本中排除，但它们仍可用于测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:11:59.850

在编译过程的链接步骤，断言通常被“省略”或不包含在输出的可执行代码中。传递给断言函数的源代码符号和表达式必须在编译步骤中定义，以便编译器可以解析和生成断言及其表达式参数的代码。

输出 exe 中是否包含断言由链接器在将代码复制到输出文件时确定。根据编译器的不同，传递给 assert 的表达式可能仍然包含在可执行代码中，即使不包括对 assert 函数的调用。

正如在其他答案和许多评论中所指出的那样，断言并不是调试所独有的。断言在发布代码中也很有价值，可以验证绝对不会发生的情况。

允许您在发布代码中保留断言同时使断言表达式中使用的函数仅存在于调试版本中的一种解决方案是为发布版本定义调试函数的无操作存根。像这样：

```
// Declaration:
  private function Sorted: Boolean;

// Implementation

{$ifdef DEBUG}
  function Sorted : Boolean;
  begin
// work work work
  end;
{$else}
  function Sorted: Boolean;
  begin
  end;
{$endif}

// used in an assertion:

  assert(Sorted); 
```

这允许您在调试代码和发布代码中使用断言，而不会使用断言周围的 ifdef 包装器污染您的源代码，并保证您的发布代码中不存在调试实现。

# java - 文件上传进度在上传前跳到 100%

> ID：15748207
> 
> 赞同：3
> 
> 时间：2013-04-01T17:26:30.450
> 
> 标签：java, android, android-asynctask

我无法对此文件上传功能进行进度百分比。我google了很多我找不到解决方案

这是我的代码：

```
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);

    notification.contentView.setProgressBar(R.id.progressBar, 10, progress[0], false);
    contentView.setTextViewText(R.id.text, "changed");
    mNotificationManager.notify(NOTIFICATION_ID, notification);
}

@Override
protected String doInBackground(String... urls) {

    String upLoadServerUri = upurl;
    String fileName = urls[0];
    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 100 * 1024 * 1024;
    File sourceFile = new File(fileName);
    int sentBytes = 0;
    long fileSize = sourceFile.length();

     try {
            FileInputStream fileInputStream = new FileInputStream(new File(urls[0]));

            URL url = new URL(upurl);
            connection = (HttpURLConnection) url.openConnection();

            // Allow Inputs & Outputs
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            // Enable POST method
            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type",     "multipart/form-data;boundary="+boundary);

            outputStream = new DataOutputStream(     connection.getOutputStream() );
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"file[]\";filename=\""+ fileName + "\"" + lineEnd);
            outputStream.writeBytes(lineEnd);

            bytesAvailable = fileInputStream.available();
            Log.v("Size",bytesAvailable+"");

            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // Read file
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0) {
                // Update progress dialog
                sentBytes += bytesRead;
                publishProgress((int)(sentBytes * 100 / fileSize));

                outputStream.write(buffer, 0, bufferSize);

                bytesAvailable = fileInputStream.available();
                Log.v("Available",bytesAvailable+"");

                bufferSize = Math.min(bytesAvailable,     maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0,      bufferSize);
            }

            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            Scanner s = new Scanner(connection.getInputStream());
            s.useDelimiter("\\Z");
            final String response = s.next();

            // Responses from the server (code and message)
            int serverResponseCode       = connection.getResponseCode();
            String serverResponseMessage = connection.getResponseMessage();

            if(serverResponseCode == 200) {
                 runOnUiThread(new Runnable() {
                      public void run() {

                         Toast.makeText(BabupMain.this, "server say :" + response , Toast.LENGTH_SHORT).show();
                         Toast.makeText(BabupMain.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                      }
                  });
             }

            fileInputStream.close();
            outputStream.flush();
            outputStream.close();

        } catch (MalformedURLException ex) {

            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(BabupMain.this, "Error 1 ", Toast.LENGTH_SHORT).show();
                }
            });

        } catch (final Exception e) {

            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(BabupMain.this, "Error 2 "+ e.getMessage(), Toast.LENGTH_SHORT).show();
                }
            });
        }

        //publishProgress();

        return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:30:27.720

真的很难说，但考虑改变

```
publishProgress((int)(sentBytes * 100 / fileSize)) 
```

至

```
double progress = (double)sentBytes / fileSize;
publishProgress((int)progress); 
```

* * *

**编辑**

我会改变这个：

```
bufferSize = Math.min(bytesAvailable, maxBufferSize);
buffer = new byte[bufferSize];

bytesRead = fileInputStream.read(buffer, 0, bufferSize);

while (bytesRead > 0)
{

      // Update progress dialog
    sentBytes += bytesRead;
    publishProgress((int)(sentBytes * 100 / fileSize));

    outputStream.write(buffer, 0, bufferSize);

    bytesAvailable = fileInputStream.available();
    Log.v("Available",bytesAvailable+"");

    bufferSize = Math.min(bytesAvailable,     maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0,      bufferSize);
} 
```

至

缓冲区 = 新字节 [maxBufferSize];

```
while (true)
{
    int bytesToRead = Math.min(maxBufferSize, fileInputStream.available());

    // Break if complete
    if(bytesToRead == 0){ break; }

    // Read bytes
    bytesRead = fileInputStream.read(buffer, 0, bytesToRead);

    // Write bytes
    outputStream.write(buffer, 0, bytesRead);

    // Update progress dialog
    sentBytes += bytesRead;

    // Publish progress
    double progress = (double)sentBytes / fileSize;
    publishProgress((int)progress);
} 
```

如果您对此有疑问，我会放弃该`FileInputStream.available()`方法，获取字节总数[`File.length()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#length%28%29)并在`bytesRead >= File.length()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-24T03:40:48.453

这里有一个简单而好的解决方案：[https](https://developer.android.com/reference/java/net/HttpURLConnection.html) ://developer.android.com/reference/java/net/HttpURLConnection.html在“发布内容”部分：

添加：

```
connection.setChunkedStreamingMode(0); 
```

刚过：

```
connection.setDoOutput(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T12:13:11.637

只看了一眼……

1.  sentBytes * 100 / 文件大小

    int sentBytes = 0;
    长文件大小 = sourceFile.length();

    请注意，使用 int 和 long 进行计算会在小数点处转换。也许投加倍。

2.  第二个我因为缺少代码而看不到，但评论为它尖叫

    > 但是通知变得粘滞并且手机冻结

    您在后台线程（doInBackground（））中使用 publishProgress()，我希望您不要在后台线程中尝试触摸 GUI

    您可以使用 Handler() 发布将由 gui 线程使用的 Runnable

# php - 下一个脚本的 PHP 注销

> ID：15748209
> 
> 赞同：0
> 
> 时间：2013-04-01T17:26:31.623
> 
> 标签：php, mysql

我的注销脚本有问题。我试图破坏会话或杀死 cookie，但它不会消失。

```
if (!isset($_SESSION['user_id'])) {
    if (isset($_POST['submit'])) {
        // Connect to the database
        $dbc = mysqli_connect(DBHOST, DBUSER, DBPASS, DBNAME);

        if ($dbc == null) {
            $error_msg = '<br/>EROARE: conexiunea la baza de date a esuat<br/>';
        }
        $error_msg = 'succes<br/>';

        // Grab the user-entered log-in data
        $user_username = mysqli_real_escape_string($dbc, trim($_POST['username']));
        $user_username = PREG_REPLACE("/[^0-9a-zA-Z.-@_]/i", '', $user_username);
        $user_password = mysqli_real_escape_string($dbc, trim($_POST['password']));
        $user_password = PREG_REPLACE("/[^0-9a-zA-Z]/i", '', $user_password);

        if (!empty($user_username) && !empty($user_password))
        {
            $query = "SELECT * FROM Admin WHERE username = '$user_username' AND password = SHA('$user_password')";
            $data = mysqli_query($dbc, $query);
            if (mysqli_num_rows($data) == 1) {
                // The log-in is OK so set the user ID and username session vars (and cookies), and redirect to the home page
                $row = mysqli_fetch_array($data);
                $_SESSION['admin_id'] = $row['id_client'];
                $_SESSION['admin'] = $row['username'];
                setcookie('id_admin', $row['id_admin'], time() + (60 * 60 * 24 * 2));    // expires in 30 days

                $home_url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . '/admin/index.php?admin='.$row['id_admin'].'&cat=index';
                header('Location: ' . $home_url);

                //==================LOGGING THE INFORMATION
                $fp = @fopen ($jurnal, "a");
                if ($fp == NULL) {
                    echo 'EROARE - nu a fost posibila deschiderea fisierului jurnal!';
                    exit();
                }
                //exclusive lock
                lock ($fp);
                //Writing information into the index_upload file
                $submitdate = date('l jS \of F Y h:i:s A');
                $utilizator = $_SESSION['username'];
                $adresa = $_SERVER['REMOTE_ADDR'];
                fwrite ($fp, "========================================\r\n");
                fwrite ($fp, "LOGIN OK\r\n");
                fwrite ($fp, "Utilizator: $utilizator\r\n");
                fwrite ($fp, "Conexiune de la adresa IP: $adresa\r\n");
                fwrite ($fp, "Data: $submitdate\r\n");
                fwrite ($fp, "\r\n");
                // Unlock the file, this is the same as flock($fp, LOCK_UN);
                unlock ($fp);
                @fclose ($fp);
                /////////////////////////////////////////////////////////////////////////////

            }
            else {

            }
        }
        else {
            // The username/password are incorrect so set an error message
            $error_msg = 'EROARE: pentru autentificare aveti nevoie de un nume de utilizator si o parola valide!';
        }
    }
    else {
        // The username/password weren't entered so set an error message
        $error_msg = 'EROARE: pentru a va putea autentifica in sistem, va rugam introduceti un nume de utilizator si o parola!';
    }
} 
```

我试过这个：

```
<?
session_start();
session_unset();
session_destroy();

header("location:home.php");
exit();
?> 
```

和这个：

```
<?php
    setcookie('id_admin', '', time()-60*60*24*2);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:32:37.680

根据[session_destroy()](http://php.net/manual/en/function.session-destroy.php)的 PHP 手册，以下代码应销毁 $_SESSION：

```
<?php
// Initialize the session.
// If you are using session_name("something"), don't forget it now!
session_start();

// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy();
?> 
```

# vb.net - 丢失会话项目

> ID：15748210
> 
> 赞同：1
> 
> 时间：2013-04-01T17:26:32.467
> 
> 标签：vb.net, asp-classic

我有一个网站，当我从 IE9 浏览时，它会丢失 Session 项目。使用 vs 进行测试时不会发生这种情况。这发生在我的电脑和我部署它的服务器上，但可以在其他电脑上使用。我已删除所有已兑现的页面并尝试了多次登录。所以在过去的 6 个小时里，我一直在用头撞墙。

当您通过 ip 浏览网站时工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T10:20:10.480

您是否在您的 PC 上启用了 cookie。

似乎记得我有一个类似的问题。

如果未启用 cookie，则会话变量不起作用。

[http://forums.asp.net/t/1804941.aspx/1?Session+Variables+make+use+of+cookies+](http://forums.asp.net/t/1804941.aspx/1?Session+Variables+make+use+of+cookies+)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T04:46:03.497

Jason Akin（原始提问者）提供的答案：

* * *

**问题是由主机名中的下划线引起的。显然这不是你应该做的事情。花了一段时间才弄清楚这一点。很好的教训。**

希望这会帮助其他人。

# php - Wordpress - 获取所有数据并排序

> ID：15748219
> 
> 赞同：4
> 
> 时间：2013-04-01T17:27:01.373
> 
> 标签：php, wordpress

我正在使用 Wordpress。我有以下查询来从数据库中获取数据，它运行良好

```
$args1 = array(
 'post_type' => 'gallery',
 'posts_per_page' => $gnum,
 'post__in' => array(400, 403),
 'paged' => $paged,
 'orderby' => 'title',
 'order' => 'ASC'                    

);

query_posts($args1);

<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

//And then some other code to display data 
```

在上面的查询中使用`'post__in' => array(400, 403),`我正在获取 ID='400' AND '403' 的行。所以当我回显时，我只能看到两个信息。

现在，我想要实现的是从表中获取所有数据，但是当我显示信息时，我想首先获取 ID 为 400 的行，然后是 403，然后基于`'orderby' => 'title',`AND 'order' => '升序'

你能帮忙查询一下吗？

谢谢

## 编辑

```
$args2 = array(
 'post_type' => 'gallery',
 'posts_per_page' => $gnum,
 'post__not_in' => array(400, 403),
 'paged' => $paged,
 'orderby' => 'title',
 'order' => 'ASC'                    

);

query_posts($args2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T01:27:55.947

不确定这是否会在`query_post`参数中起作用，但它正在补充有效的 SQL。尝试：

```
$args = array(
 'post_type' => 'gallery',
 'posts_per_page' => $gnum,
 'paged' => $paged,
 'orderby' => 'case when ID in (400,403) then -1 else title end, title',
 'order' => 'ASC'                    
);

query_posts($args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:32:46.487

像您这样使用 Wordpress 查询结构是不可能的。一种可能的解决方案是进行第二次查询，查找不在 (400, 403) 中的结果，然后简单地将这个结果数组添加到第一个数组的末尾。

为了做到这一点，您可能应该使用`get_posts()`而不是`query_posts()`这样它就不会改变主循环。

```
$array = get_posts($args1);
$array = array_merge($array, get_posts($args2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:50:25.007

我想您可以尝试执行以下操作：

```
$args = array(
 'post_type' => 'gallery',
 'posts_per_page' => $gnum,
 'paged' => $paged,
 'orderby' => 'ID = 400 DESC, ID = 403 DESC, title',
 'order' => 'ASC'                    
);

query_posts($args);
... 
```

让我知道这是怎么回事。

# spring - spring AOP JDKdynamicAopProxy InvocationHandler

> ID：15748220
> 
> 赞同：1
> 
> 时间：2013-04-01T17:27:04.450
> 
> 标签：spring, proxy, aop

如何查看Spring创建/生成什么接口实现InvocationHandler然后创建代理对象？

代理对象有一个构造函数，用这个实现调用

```
public Proxy(InvocationHandler paramInvocationHandler)  {

   super(paramInvocationHandler);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T08:09:04.870

JDKdynamicAopProxy 是 InvocationHandler 的实现。这是创建代理对象的常规方法。

```
public Object getProxy(ClassLoader classLoader) {
    if (logger.isDebugEnabled()) {
        logger.debug("Creating JDK dynamic proxy: target source is " + this.advised.getTargetSource());
    }
    Class[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(this.advised);
    findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);
    return Proxy.newProxyInstance(classLoader, proxiedInterfaces, this);
} 
```

只需使用 classLoader、interfaces、InvocationHandler 调用 Proxy 的 args 方法。

# php - SQL查询日期格式两列

> ID：15748226
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:27:46.403
> 
> 标签：php, mysql, sql, date

我想从具有特定日期格式的 SQL 查询中获取数据库中有两列（日期和时间）。它可以是来自 sql 查询的两个值，也可以是一个。这是详细信息。

显示格式：

星期日 03/31/2013 12:13:27 AM

数据库列：

1.  结束日期（日期 yyyy-mm-dd）
2.  结束时间（时间 hh:mm:ss）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:32:15.927

这就是你需要的：

```
DATE_FORMAT(CONCAT(EndDate, EndTime), '%W %m/%d/%Y %r') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:33:28.710

该`date_format()`功能为您提供所需的一切。

**例子。**假设您的表格中有列，`aDate`并且`aTime`您需要显示日期（如“dd-mm-yyyy”）和时间（如“hh:mm”）。所以：

```
select
    date_format(aDate, '%d-$m-%Y'), date_format(aTime, '%H:%i')
from myTable; 
```

查看参考手册（第 12 章 - MySQL 5.5 的函数和运算符）

如果您需要连接结果，则：

```
select
    concat(date_format(aDate, '%d-$m-%Y'), ' ', date_format(aTime, '%H:%i'))
from myTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:33:47.867

这似乎对我有用：

```
select date_format(concat(enddate,' ',endtime),'%W %m/%d/%Y %r')
from yourtable 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/572e7/1)

date_format 的良好文档：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# sharepoint - 为共享点站点构建帮助系统

> ID：15748230
> 
> 赞同：0
> 
> 时间：2013-04-01T17:28:06.940
> 
> 标签：sharepoint, sharepoint-2010

我有一个包含多个网站集的 sharepoint webapp。不同的用户有权访问这些网站集的不同子集。我需要为该 Web 应用程序创建一个帮助系统。对于每个网站集，将有几个文档和/或视频描述如何使用该网站集。要求是用户只能访问与他们有权访问的网站集相对应的帮助文档。

创建和组织它的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:43:20.430

在每个网站集中创建一个文档库来存储帮助文件。然后，您可以确保有权查看该网站的人也有权查看每个网站集中的该文档库。

# node.js - 下载文件，保存并再次阅读 --> 错误

> ID：15748232
> 
> 赞同：1
> 
> 时间：2013-04-01T17:28:25.870
> 
> 标签：node.js

我想下载一个文件，将其写入一个临时文件，读取它并将 readFileSync 缓冲区提供给一个函数。我试过这个：

```
var file = fs.createWriteStream("temp.pdf")
var request = http.get(linkArray[1], function(response) {
    response.on('data', function(data){
         file.write(data)
    }).on('end', function(){
         postData(fs.readFileSync('temp.pdf'))
    })
}); 
```

有时它有效，但有时它不起作用 - 我的猜测是文件在读取时没有完全写入。（但是不应该触发“结束”事件？！如您所见，我想下载一堆文件并执行此操作。您有什么建议如何解决这个问题吗？也许这不是最好的解决这个问题的方法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:36:01.347

您不应该将流与`on('data'` 您应该使用管道链接。Pipe 将流数据事件链接到写入，将结束事件链接到结束。

```
var file = fs.createWriteStream("temp.pdf");
var request = http.get(linkArray[1], function(response) {
    response.pipe(file).on('close', function(){
         postData(fs.readFileSync('temp.pdf'));
    });
}); 
```

你也应该使用[https://github.com/mikeal/request](https://github.com/mikeal/request)

```
var request = require('request');

request.get(linkArray[i], function (err, response, body) {
  postData(body);
}); 
```

或者

```
var request = require('request');
var file = fs.createWriteStream("temp.pdf");

request.get(linkArray[i]).pipe(file).on('close', function () {
    postData(fs.readFileSync('temp.pdf'));   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:33:45.670

您需要在处理程序`file.end();`的顶部调用`.on('end', ...)`。但是，该`end()`方法本身是异步的，因此您需要在完成后读取文件。例如，

```
var file = fs.createWriteStream("temp.pdf")
var request = http.get(linkArray[1], function(response) {
    response.on('data', function(data){
        file.write(data)
    }).on('end', function(){
        file.end(function() {
            postData(fs.readFileSync('temp.pdf'))
        });
    })
}); 
```

# css - 堆叠画布删除默认透明度 HTML

> ID：15748233
> 
> 赞同：1
> 
> 时间：2013-04-01T17:28:27.393
> 
> 标签：css, html, html5-canvas, css-position

我有这个html：

```
<section id="contain">
  <canvas id="canvas-1" class="subcanvs"></canvas>
  <canvas id="canvas-2" class="subcanvs"></canvas>
</section> 
```

这个CSS：

```
#contain{
  position:relative;
  background:red;
}
.subcanvs{
  position:absolute; /*pay attention to this line*/
  width:100%;
} 
```

当两幅画布完全定位并堆叠时，容器变成白色。

当我删除绝对定位时，一切正常，一切正常，背景为红色，画布透明，应该是这样。

那么如何让两个画布堆叠并让它们都保持透明呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:22:40.290

您的容器正在坍塌并带走您的画布！

确保在容器对象中至少定义宽度，通常是高度。

此代码适用于 IE、Chrome 和 Mozilla：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
#contain{
  position:relative;
  background:red;
  border:1px solid blue;
  width:500px;
  height:300px;
}
.subcanvs{
  position:absolute;
  width:100%;
  height:100%;
}
</style>
</head>

<body>
    <section id="contain">
      <canvas id="canvas-1" class="subcanvs"></canvas>
      <canvas id="canvas-2" class="subcanvs"></canvas>
    </section>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:14:57.513

由于 markE 的非常有帮助的回答，我发现了我的设计出了什么问题。

鉴于此，我发现了另一种使用 CSS3 处理它的方法。

```
#contain{
  position:relative;
  background:red;
}
.subcanvs:first-child{
  position:static;
}
.subcanvs{
  position:absolute;
  left:0;
  width:100%;
} 
```

如果所有画布尺寸相同，这将使所有画布很好地排列在一起。我不确定这个浏览器的兼容性。

# matlab - 如何最快地将另一列附加到 Matlab 矩阵中？

> ID：15748237
> 
> 赞同：1
> 
> 时间：2013-04-01T17:28:58.927
> 
> 标签：matlab

因此，如果 tavg_curltau 是 360x159 双精度，我想将其转换为 360x160 双精度，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:32:07.627

您可以使用 连接矩阵`[]`。例如：

```
a = ones(360,159);
b = ones(360,1);
c = [a,b];
size(c)
ans =

   360   160 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T21:25:38.003

您可以使用 horzcat() 函数、方括号或带有 dim=2 的 cat() 函数将列附加到矩阵。第一个是最快的。无论如何，请确保要附加的列与要附加到的矩阵的高度（以行为单位）相同。否则，您将收到错误消息。

```
>> tic; a=ones(360,159); b=zeros(360,1); c=horzcat(a,b); toc
Elapsed time is 0.000323 seconds.
>> tic; a=ones(360,159); b=zeros(360,1); c=[a,b]; toc
Elapsed time is 0.000858 seconds.
>> tic; a=ones(360,159); b=zeros(360,1); c=cat(2,a,b); toc
Elapsed time is 0.001050 seconds.
>> tic; a=ones(360,159); b=zeros(359,1); c=horzcat(a,b); toc
Error using horzcat
CAT arguments dimensions are not consistent. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:31:20.903

乘以相同 (159X160) 矩阵 I

# mobile - 2 IE8 网页浏览量 - 看起来完全不同？为什么？

> ID：15748241
> 
> 赞同：1
> 
> 时间：2013-04-01T17:29:08.960
> 
> 标签：mobile, internet-explorer-8, meta-tags

这是我使用“自适应设计”编码的原始页面，不支持移动设备： [http ://opportunityfinance.net/Test/savedateIE8/index.html](http://opportunityfinance.net/Test/savedateIE8/index.html)

在 IE 8 中看起来很棒，如下图所示：

![IE 8 看起来不错](https://i.stack.imgur.com/qOjhf.jpg)

这是我为移动设备优化的页面，基本上它与第一页完全相同，除了它`<meta>`为移动设备添加了标签等。在我测试的所有浏览器中看起来都不错，除了 IE 7（我不太关心）和 IE 8（我真的很关心）很多人使用 IE 8 访问该站点，因此它需要支持 IE 8！ ： [http ://opportunityfinance.net/conference-2013/index.html](http://opportunityfinance.net/conference-2013/index.html)

它在下面的 IE 8 中的样子：

![支持移动设备的 IE 8 Nightmare](https://i.stack.imgur.com/6IqjF.jpg)

为什么这在 IE 8 中看起来与第一张照片完全不同？我无法理解。AFAIK，它应该加载 index.css 文件并像第一页一样应用它。这里有什么问题？

它可能与这段代码有关：

`<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">`

但是，如果我删除该代码，那么它在 IE 9 中看起来也全都被顶起来了！

**编辑**：请不要编辑我将 IE 8 更改为 IE 9 的代码。我知道这个问题正在 IE 9 中测试，但它正在`IE 8 Document Mode`开发人员工具中使用，所以它与 IE 8 相同！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:25:37.320

好的，这就是我解决这个问题的方法。`media queries`显然，在 IE 9 之前的任何版本的 IE在使用`link`tags`media`属性时都不会附加样式表。此外，IE 8- 在出现这一行时有一些奇怪的行为：`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />` 事实证明，我什至不需要这一行： `<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">`这导致了问题，因为 Google Chrome Frame 不可用，edge 也不可用. 所以，我刚刚删除了那条线，现在一切都很好。

这是我必须做的肮脏的黑客攻击，以便让任何有兴趣的人都能在移动设备和 IE 7 和 8 上使用它：

```
<!--[if gte IE 9]>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<![endif]-->
<!--[if !IE]><!-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<!--<![endif]-->
<link rel="stylesheet" type="text/css" href="css/narrow.css" media="only screen and (max-device-width: 600px)" />
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="css/index.css" />
<![endif]-->
<!--[if gte IE 9]>
<link rel="stylesheet" type="text/css" href="css/index.css" media="only screen and (min-device-width: 601px)" />
<![endif]-->
<!--[if !IE]><!-->
<link rel="stylesheet" type="text/css" href="css/index.css" media="only screen and (min-device-width: 601px)" />
<!--<![endif]--> 
```

我希望在这些条件句中有一个`else`陈述，但无论如何。现在可以使用并加载 index.css 文件，感谢上帝，因为我在这个文件上拔了头发！该`narrow.css`文件不需要任何条件，因为 IE 7 和 8 无论如何都会忽略样式表，因为它使用媒体查询。

# bash - bash 查找参数

> ID：15748246
> 
> 赞同：0
> 
> 时间：2013-04-01T17:29:31.183
> 
> 标签：bash, find

```
#!/bin/bash                                                                                                                                                             
menu=0
dir=""
size=""
name=""
modif=""
while [ $menu -ne 6 ]
do
    echo "1\. Name: $name"
    echo "2\. Directory $dir"
    echo "3\. Last modified: $modif"
    echo "4\. Minimum size: $size"
    echo "5\. Search"
    echo "6\. End"
    read menu
    case "$menu" in
        "1") read name ;;
        "2") read dir ;;
        "3") read modif ;;
        "4") read size;;
        "5") if [ -z $name ]
             then
                 option1=""
             else
                 option1="-name $name"
             fi
            find "$option1";;
        "6") ;;
        *) echo "Wrong number!"
    esac
done 
```

我需要制作一个像 find 命令一样工作的脚本，但是我遇到了一个问题。当用户不输入例如名称时，查找命令应该禁用名称选项。

我想出了上面这样的东西，但是当变量名不包含任何内容时它不起作用（用户没有输入任何内容）。我不断收到错误：查找：路径必须在表达式之前：BASH ....

老实说，我不知道如何使它工作，而不是使用 2^4 IF 并仅使用用户选择的那些指定选项执行 find 。

有没有办法让它变得更容易？

编辑：现在我将其修改为：

```
#!/bin/bash                                                                                                                                                             
menu=0
dir=""
modif=""
while [ $menu -ne 6 ]
do
    echo "1\. Name: $name"
    echo "2\. Directory $dir"
    echo "3\. Last modified: $modif"
    echo "4\. Minimum size: $size"
    echo "5\. Search"
    echo "6\. End"
    read menu
    case "$menu" in
        "1") 
            read name 
            ;;
        "2") read dir ;;
        "3") read modif ;;
        "4") 
            read size
            ;;
        "5") 
            if [ -z $name ]
        then
            unset tablica[0]
        else    
            tablica[0]="-name $name"
        fi          
        find "${tablica[@]}"
        ;;
    "6") ;;
    *) echo "Wrong number!"
esac
done 
```

但另一个错误：

查找：未知谓词`-name example.txt'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:42:38.060

您可以构建一个参数数组：

```
myarray=()
if [[ $size ]]
then
    myarray+=(-size +"$size")
fi

if [[ $name ]]
then
    myarray+=(-name "$name")
fi
...
find "$dir" "${myarray[@]}" 
```

这种方法的好处是它还可以正确处理空格，并且不允许代码注入。

# sql-server - 将表导出到 Sql Server 时出现“IDENTITY_INSERT 设置为关闭”sqoop 错误

> ID：15748247
> 
> 赞同：0
> 
> 时间：2013-04-01T17:29:33.090
> 
> 标签：sql-server, sqoop

我正在将一个简单的配置单元表导出到 Sql 服务器。两个表都有确切的架构。Sql Server 中有一个标识列，我在上面做了一个“set identity_insert table_name on”。

但是当我从 sqoop 导出到 sql server 时，sqoop 给我一个错误，说“IDENTITY_INSERT 设置为关闭”。

如果我导出到没有标识列的 Sql Server 表，那么一切正常。

对此有任何想法吗？从 sqoop 导出到 sql server 时有人遇到过这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-04T03:55:28.540

> ## 简而言之：
> 
> Sqoop`-- --identity-insert`导出命令的后缀

* * *

## 详细的：

这是任何人搜索的示例（可能供我自己以后参考）。

```
SQLSERVER_JDBC_URI="jdbc:sqlserver://<address>:<port>;username=<username>;password=<password>"
HIVE_PATH="/user/hive/warehouse/"
$TABLENAME=<tablename>

sqoop-export \
    -D mapreduce.job.queuename=<queuename> \
    --connect $SQLSERVER_JDBC_URI \
    --export-dir "$HIVE_PATH""$TABLENAME" \
    --input-fields-terminated-by , \
    --table "$TABLENAME" \
    -- --schema <schema> \
    --identity-insert 
```

请注意最后一行的特定位 - `-- --schema <schema> --identity-insert` 。您可以省略模式部分，但保留额外的`--`.

这允许您在 sqoop 会话中为该表设置身份插入功能。[（来源）](https://archive.cloudera.com/cdh5/cdh/5/sqoop/SqoopUserGuide.html#_microsoft_sql_connector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:44:55.017

告诉 SQL Server 让您插入到具有 IDENTITY 列的表中。这是您通常无法写入的自动增量列。但是你可以改变它。见[这里](https://stackoverflow.com/questions/3112579/identity-insert-is-set-to-off-how-to-turn-it-on)或[这里](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/e3fffdff-7003-47e8-9092-e4a740c2a17b)。如果您的值之一与该列中已经存在的值冲突，它仍然会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:38:44.047

SET IDENTITY_INSERT 语句是特定于会话的。因此，如果您通过打开查询窗口、执行语句、然后在其他任何地方运行导出来设置它，则 IDENTITY_INSERT 仅在该会话中设置，而不是在导出会话中设置。如果可能，您需要修改导出本身。否则，将无法从 sqoop 直接导出到 MSSQL；相反，您需要将数据从 sqoop 转储到 MSSQL 可以读取的文件（例如制表符分隔），然后编写一条语句，首先执行 SET IDENTITY_INSERT ON，然后 BULK INSERTs 文件，然后执行 SET IDENTITY_INSERT OFF。

# java - 跨 Tomcat 应用程序共享小程序

> ID：15748248
> 
> 赞同：0
> 
> 时间：2013-04-01T17:29:36.363
> 
> 标签：java, tomcat, applet

我有一个 Java 小程序，供在 Tomcat 中运行的几个 Web 应用程序使用。

分享小程序的最佳方式是什么？如果我把小程序放进去`catalina_home/shared/lib`，在JSP中设置代码库时如何引用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:17:39.023

如果您有一个小程序（不是 servlet），您需要将 jar 放在公共可用的网络服务器上的某个位置，以便可以将其提供给客户端。在 tomcat 的全局 lib 目录中，您使其在服务器的类路径上可用 - 小程序永远不会在服务器上执行，而只能在客户端（浏览器）上执行。

无论您为小程序的 jar 选择什么位置/URL，您都需要在小程序的 HTML 元素`<applet .../>`中使用（这还在使用吗？我已经 10 多年没有使用小程序了 - 现在可能有更好的方法来嵌入小程序）。由于这只是在 HTML 中为 applet 的 jar 文件命名正确 URL 的问题，因此在多个 Web 应用程序之间共享一个 jar 没有问题

# c# - 在 C# 中，非法跨线程。连接到 STOMP 服务器

> ID：15748250
> 
> 赞同：1
> 
> 时间：2013-04-01T17:29:50.233
> 
> 标签：c#, multithreading, stomp

我有这个问题。我需要能够从 OnMessage 中将传入消息附加到 txtConsole，但我收到了 Illegal Cross Thread 错误。我该如何解决这个问题？我在 C# 方面非常基础，所以一些带有解释的代码（没有伪代码）会有所帮助。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using Apache.NMS;
using Apache.NMS.Util;

namespace WindowsFormsApplication1
{
    public partial class frmConsole : Form
    {

        public frmConsole()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, System.EventArgs e)
        { }

        public void cmdConnect_Click(object sender, EventArgs e)
        {
            // Output to the user that the connection is being set up
            txtConsole.AppendText(Environment.NewLine + "Setting up connection...");
            // Define the feed URL
            IConnectionFactory factory = new NMSConnectionFactory(new Uri("stomp:tcp://datafeeds.networkrail.co.uk:61618"));
            // Define the credentials
            IConnection connection = factory.CreateConnection("REDACTED", "REDACTED");
            // Create the session
            ISession session = connection.CreateSession();
            // Specify which feed - we want TRAIN_MVT_ALL_TOC to listen for all train movements
            IDestination destination = session.GetDestination("topic://" + "TRAIN_MVT_ALL_TOC");
            // Let the end user know where we will be subscribing to
            txtConsole.AppendText(Environment.NewLine + "Will attempt subscription to " + destination);
            // Create a consumer for the feed
            IMessageConsumer consumer = session.CreateConsumer(destination);
            // Let the end user know we are about to connect...
            txtConsole.AppendText(Environment.NewLine + "Connecting...");
            // Connection details are now all set up. Start the connection...
            connection.Start();
            // Check we are connected
            if (connection.IsStarted == false)
            {
                txtConsole.AppendText(Environment.NewLine + "Connection closed.");
                connection.Close();
            }
            // Now we need to handle messages using a MessageListener where we pass it to the OnMessage void.
            consumer.Listener += new MessageListener(OnMessage);

            txtConsole.AppendText(Environment.NewLine + "Connection established. Waiting for messages...");

            // End of void
        }

        public void OnMessage(IMessage message)
        {

            ITextMessage msg = (ITextMessage)message;
            message.Acknowledge();
            txtConsole.AppendText(Environment.NewLine + msg.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:37:51.760

您收到该错误的原因是您尝试从非 UI 线程更新 UI 元素。您可以调用控件的[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)方法来强制它在 UI 线程上运行。

```
public void OnMessage(IMessage message)
{ 
    ITextMessage msg = (ITextMessage)message;
    message.Acknowledge();

    if (txtConsole.InvokeRequired)
    {
        txtConsole.Invoke(new Action(() =>
          {
             txtConsole.AppendText(Environment.NewLine + msg.Text);
          }));
    }
    else
    {
        txtConsole.AppendText(Environment.NewLine + msg.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:38:57.077

当您尝试从另一个不同的线程访问其他线程（例如，UI 线程）时，会出现该异常。

你可以解决那个调用

```
Dispatcher.BeginInvoke(() => delegate{// Here the code}); 
```

从你想要的任何线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:39:22.507

[如何正确处理跨线程事件并使用 BeginInvoke 和 BackgroundWorker 更新标签](http://www.codeproject.com/Articles/23517/How-to-Properly-Handle-Cross-thread-Events-and-Upd)

[跨线程 UI 控制访问](http://www.infosysblogs.com/microsoft/2006/10/cross_thread_ui_control_access.html)

只需`txtConsole.AppendText`在方法`OnMessage`中替换为

```
txtConsole.Invoke((Action)(() => txtConsole.AppendText(Environment.NewLine + msg.Text))); 
```

# php - 如何在 PHP 中运行 bind_param() 语句？

> ID：15748254
> 
> 赞同：11
> 
> 时间：2013-04-01T17:29:58.823
> 
> 标签：php, mysqli, prepared-statement

我正在尝试使以下代码工作，但我无法到达该`execute()`行。

```
$mysqli = $this->ConnectLowPrivileges();
echo 'Connected<br>';
$stmt = $mysqli->prepare("SELECT `name`, `lastname` FROM `tblStudents` WHERE `idStudent`=?");
echo 'Prepared and binding parameters<br>';
$stmt->bind_param('i', 2 );
echo 'Ready to execute<br>'
if ($stmt->execute()){
    echo 'Executing..';
    }
} else {
    echo 'Error executing!';
}
mysqli_close($mysqli); 
```

我得到的输出是：

```
Connected
Prepared and binding parameters 
```

所以问题*应该*出在第 5 行，但是查看[手册`bind_param()`](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)我找不到任何语法错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T17:37:22.743

绑定参数时，您需要传递一个用作参考的变量：

```
$var = 1;

$stmt->bind_param('i', $var); 
```

参见手册： http: [//php.net/manual/en/mysqli-stmt.bind-param.php](http://php.net/manual/en/mysqli-stmt.bind-param.php)

请注意，`$var`实际上不必定义它来绑定它。以下是完全有效的：

```
$stmt->bind_param('i', $var);

foreach ($array as $element)
{

    $var = $element['foo'];

    $stmt->execute();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T04:17:05.000

这里只是一个简单的解释
声明一个要绑定的变量

```
 $var="email";
$mysqli = $this->ConnectLowPrivileges();
echo 'Connected<br>';

$var="email";
$stmt = $mysqli->prepare("SELECT name, lastname FROM tablename WHERE idStudent=?" LIMIT=1);
echo 'Prepared and binding parameters<br>';
$stmt->bindparam(1,$var); 
```

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-04-01T19:05:29.060

您的实际问题不在第 5 行，而是在第 1 行。
您正在尝试使用无法使用的驱动程序。
虽然[PDO](https://stackoverflow.com/tags/pdo/info)完全符合您的要求。

```
$sql = "SELECT `name`, `lastname` FROM `tblStudents` WHERE `idStudent`=?"
$stm = $this->pdo->prepare($sql);
$stm->execute(array(2));
return $stm->fetch(); 
```

* * *

自编写此答案以来已经过去了这么多年，出现了一个新的 PHP 功能，称为“参数解包”。因此，从 5.6 版开始，您可以将值传递给 bind_param：

```
$stmt->bind_param('i', ...[2]); 
```

但是您仍然无法从准备好的语句中获取数据:)

# excel - 我可以每个前任收到一行吗？

> ID：15748262
> 
> 赞同：0
> 
> 时间：2013-04-01T17:30:20.257
> 
> 标签：excel, add-in, rally

该论坛对了解 Rally Excel 插件非常有帮助。

我能够提取用户故事的前身。

如果有多个，则将它们全部放入一个以昏迷分隔的单元格中。

我的语法是：AcceptedDate,FormattedID,Predecessors.FormattedID

结果是；2012-11-05T14:38:24.963Z US22938 US19926, US27528, US28467, US29310

前辈都在一个单元格：US19926,US27528,US28467,US29310

有没有办法在它自己的单元格中接收每个前任？排？

问候，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:43:52.643

不幸的是，没有办法使用 Excel 加载项完成此操作。作为一种解决方法，可以使用 Excel 解析函数和/或 VBA 将它们拆分为单元格或行。

# wpf - 动画完成后 KeyFrameAnimation 不允许我手动覆盖动画值

> ID：15748267
> 
> 赞同：1
> 
> 时间：2013-04-01T17:30:43.000
> 
> 标签：wpf, animation

我有一个带有 KeyFrameAnimation 淡入效果的窗口

```
<Storyboard x:Key="FadeIn">
    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="window" Storyboard.TargetProperty="(UIElement.Opacity)">
        <EasingDoubleKeyFrame KeyTime="0" Value="0" />
        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.8" />
    </DoubleAnimationUsingKeyFrames>
</Storyboard>

<Window.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard x:Name="BusyAnimation_BeginStoryboard" Storyboard="{StaticResource FadeIn}" />
    </EventTrigger>
</Window.Triggers> 
```

在后面的代码中，我正在处理 MouseEnter 和 MouseLeave：

```
 private void FancyNotificationView_OnMouseEnter(object sender, MouseEventArgs e)
    {
        SetValue(Window.OpacityProperty, 1.0);
        Debug.WriteLine((double) GetValue(Window.OpacityProperty));
    }

    private void FancyNotificationView_OnMouseLeave(object sender, MouseEventArgs e)
    {
        SetValue(Window.OpacityProperty, 0.8);
    } 
```

只要触发器处于活动状态，这将不起作用。不知何故，动画阻碍了我手动设置这些属性。如何保持动画并让 MouseEnter 和 MouseLeave 以我想要的方式运行？

# php - 如何显示来自mysql的多条数据

> ID：15748268
> 
> 赞同：-2
> 
> 时间：2013-04-01T17:30:52.190
> 
> 标签：php, mysql

大家好，我正在寻找的是在一页上显示大量数据，而不是使用数百个包含所有不同数据的页面，我如何使用一页使用 php 和 mysql 显示多条数据，我将举一个例子

如果用户请求查看 GTA IV，则 URL 为 mysite.com/index.php?PID=00001

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:34:13.780

我记得给你下面的答案，你最后一次问..

...假设，`$employee`是从 mysql 获取数据..

```
<?php if(isset($_GET['PID'])) {

$employee = array('nina','simon','tom','zannel','bob');
foreach($employee as $key=>$e) {

if($key == $_GET['PID']) {
echo 'PID: '.$_GET['PID'].' Name: '.$e.' PHONE No: '.'00'.$key; }
    }
 }else {
echo 'Id is not found';

} 
```

这是它的显示方式：

如果你输入了 URL`index.php?PID=1`

> PID：1 姓名：simon 电话号码：001

如果你输入了 URL`index.php?PID=2`

> PID：2 姓名：Tom 电话号码：002

如果你输入了 URL`index.php?PID=2`

> PID：3 名称：zannel 电话号码：003

# java - else 语句会减慢编译时间/运行速度吗？（在可以避免的情况下）

> ID：15748269
> 
> 赞同：5
> 
> 时间：2013-04-01T17:30:52.967
> 
> 标签：java, optimization, coding-style

在无数（好吧，无数，但很多）场合，尤其是在类的方法/函数中，我一直处于想要在 void-return 函数中执行一组操作的情况，但仅`if(condition met)`. 在大多数情况下，我可以看到（假设代码有效）如何通过简单地在块`else`中返回来完全删除语句。`if`

这是一个特定的示例，以防万一：

*使用 else 语句（老师会如何展示它）*

```
 private void ifThisDoThat(params){
        if(dependenciesNotMet) return;
        else{
            ////DO STUFF HERE...
        }
    } 
```

*没有（更简约）*

```
 private void ifThisDoThat(params){
        if(dependenciesNotMet) return;
        //Assuming the above does not execute, DO STUFF HERE...
    } 
```

我在想`else`，如果根本没有优化，删除该语句将被归类为微优化，但仍然认为我会要求我自己的教化。

最后：

使用 a`return`删除`else`块有什么好处吗？

`else`如果我使用语句，编译器会做额外的工作吗？

是否有理由总是使用`else`（在出现错误或其他原因时）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:50:21.100

这是错误的优化。编译器实际上可能需要更长的时间来编译，从中间返回，任何优化编译器都会为两种形式生成基本相同的可执行代码。

就风格而言，有时一种风格很好，有时另一种。立即返回风格的危险是：

1.  如果方法底部有任何常见的完成/清理逻辑，则会被遗漏。在大方法中很容易忘记逻辑是存在的，在大方法中很容易将这样的逻辑编辑成以前没有的方法。这类错误很难找到。
2.  因为它基本上消除了在方法底部使用“清理”逻辑的选项，它可能导致各个`if`分支中的逻辑激增，从而产生比标准 if/then/else 更多的混乱。
3.  它与良好的“结构化编程”实践背道而驰。

也就是说，在某些情况下，中间返回样式是更好的选择：

1.  有多个顺序`if`语句的情况，每个语句都有一个简单的主体，每个语句都能够以 return 结尾。
2.  一个非常简短的方法的案例，其中“快速退出”是自然且相当明显的。
3.  “快速退出”的情况（例如，因为某些数据项为零）非常接近较长方法的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:47:21.947

一项快速测试可以回答您。想象一下，你有：

```
public void x(int i){
    if(i == 0){
        System.out.println("zero");
        return;
    }
    System.out.println("not zero");
}

public void y(int i){
    if(i == 0){
        System.out.println("zero");
        return;
    }
    else {
        System.out.println("not zero");
    }
} 
```

如果您查看编译后的代码（使用`javap -v <class>`）：

**x**的代码：

```
 public void x(int);
    flags: ACC_PUBLIC
    Code:
      stack=2, locals=2, args_size=2
         0: iload_1       
         1: ifne          13
         4: getstatic     #16                 // Field java/lang/System.out:Ljava/io/PrintStream;
         7: ldc           #22                 // String zero
         9: invokevirtual #24                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        12: return        
        13: getstatic     #16                 // Field java/lang/System.out:Ljava/io/PrintStream;
        16: ldc           #30                 // String not zero
        18: invokevirtual #24                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        21: return        
      LineNumberTable:
        line 6: 0
        line 7: 4
        line 8: 12
        line 10: 13
        line 11: 21
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
               0      22     0  this   Lpt/kash/Test;
               0      22     1     i   I
      StackMapTable: number_of_entries = 1
           frame_type = 13 /* same */ 
```

**y**的代码：

```
 public void y(int);
    flags: ACC_PUBLIC
    Code:
      stack=2, locals=2, args_size=2
         0: iload_1       
         1: ifne          13
         4: getstatic     #16                 // Field java/lang/System.out:Ljava/io/PrintStream;
         7: ldc           #22                 // String zero
         9: invokevirtual #24                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        12: return        
        13: getstatic     #16                 // Field java/lang/System.out:Ljava/io/PrintStream;
        16: ldc           #30                 // String not zero
        18: invokevirtual #24                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        21: return        
      LineNumberTable:
        line 14: 0
        line 15: 4
        line 16: 12
        line 19: 13
        line 21: 21
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
               0      22     0  this   Lpt/kash/Test;
               0      22     1     i   I
      StackMapTable: number_of_entries = 1
           frame_type = 13 /* same */ 
```

区别是……没有。编译器足够聪明，可以优化代码。

因此，底线是（如前所述）：优化可读性和简单性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:35:26.247

这是风格问题。它不应该影响生成的代码。这不是优化。

就个人而言，如果可能，我总是使用 return，因为我认为它使代码更具可读性——您不必四处寻找 else 语句的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:49:22.403

执行没有区别，无论如何它都会优化到相同的东西，但是为了可读性我推荐这个（使用一个返回原则）：

```
private void ifThisDoThat(params){
    if(!dependenciesNotMet) { // would be nicer to change this to if(dependenciesNotMet)
        ////DO STUFF HERE...
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T17:55:18.680

`14: goto 25`用 javap 测试程序，除了第二种情况下的 JUMP 指令外，我几乎看不出有什么不同。

如果您在 else 语句上没有要执行的内容，我看不到添加 else 的理由。您可能想使用它来进行日志记录等。

```
public class Test {
    public static void main(String[] s){
        if(testMethod()){
            System.out.println("in if");
        }
        System.out.println("in else");      
    }   
    static boolean testMethod(){
        return false;
    }
} 
```

导致

```
 public static void main(java.lang.String[]);
      Code:
       Stack=2, Locals=1, Args_size=1
       0:   invokestatic    #16; //Method testMethod:()Z
       3:   ifeq    14
       6:   getstatic       #20; //Field java/lang/System.out:Ljava/io/PrintStream;
       9:   ldc     #26; //String in if
       11:  invokevirtual   #28; //Method java/io/PrintStream.println:
                            (Ljava/lang/String;)V
       14:  getstatic       #20; //Field java/lang/System.out:Ljava/io/PrintStream;
       17:  ldc     #34; //String in else
       19:  invokevirtual   #28; 
      //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   22:  return 
```

和

```
public class Test {
    public static void main(String[] s){
        if(testMethod()){
            System.out.println("in if");
        }else{
            System.out.println("in else");
        }
    }   
    static boolean testMethod(){
        return false;
    }
} 
```

会产生，

```
public static void main(java.lang.String[]);
  Code:
   Stack=2, Locals=1, Args_size=1
   0:   invokestatic    #16; //Method testMethod:()Z
   3:   ifeq    17
   6:   getstatic       #20; //Field java/lang/System.out:Ljava/io/PrintStream;
   9:   ldc     #26; //String in if
   11:  invokevirtual   #28; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   14:  goto    25
   17:  getstatic       #20; //Field java/lang/System.out:Ljava/io/PrintStream;
   20:  ldc     #34; //String in else
   22:  invokevirtual   #28; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   25:  return 
```

# sql - 用于解析 XML 的嵌套 foreach 语句

> ID：15748270
> 
> 赞同：0
> 
> 时间：2013-04-01T17:30:54.813
> 
> 标签：sql, xml, parsing, powershell

我有看起来类似于以下内容的 xml

```
<Settings>
    <CentralOnly>
        <DateLists>
            <DateList Name="name1" ID="1">
                <Date>*-01-01</Date>
                <Date>*-12-25</Date>
                <Date>2007-05-28</Date>
                <Date>2007-09-03</Date>
            </DateList>
            <DateList Name="name2" ID="2">
                <Date>2008-11-11</Date>
                <Date>2008-11-27</Date>
            </DateList>
            <DateList Name="name3" ID="3">
                <Date>2008-03-21</Date>
                <Date>2010-04-02</Date>
            </DateList>
        </DateLists>
    </CentralOnly>
</Settings> 
```

最终目标是将其放入 sql server 2008 r2 数据库中。我目前这样做的模式（很差）是将每一列写入一个单独的文本文件

```
dateID.txt   |  specificDate.txt
    1        |     *-01-01
    1        |     *-12-25
    1        |     2007-05-28
    1        |     2007-09-03
    2        |     2008-11-11
    2        |     2008-11-27
    3        |     2008-03-21
    2        |     2010-04-02 
```

我相信下面的代码以这种方式在正确的轨道上（它还不起作用）。但是必须有一种方法可以用一个文件来做到这一点，也许是一个csv？

```
set-executionpolicy unrestricted
[xml]$config = Get-Content c:\path\config.xml
new-item c:\path\dlDays.txt -type file -force
new-item c:\path\dlDLID.txt -type file -force
$xml = $config.settings.DateLists.DateList | % $_.DateList{
    $dateID = $_.id
    $eachDate = $_.date | % $_.date{
        $specificDate = $_.date
        add-content c:\path\dlDays.txt $specificDate
        add-content c:\path\dlDLID.txt $dateID
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:21:33.847

[#12：输出对象](http://windowsitpro.com/blog/what-do-not-do-powershell-part-12)

我使用了您的 XML 文件，而不是输出到两个文件，而是创建了一个对象数组。然后我只是将这些对象通过管道传输到 Export-Csv。

```
[xml]$config = Get-Content date.xml
$newdlist = @()
foreach($dlist in $config.Settings.CentralOnly.DateLists.DateList){
    $dateID = $dlist.ID
    foreach($date in $dlist.Date){
        $newdlist += @(New-Object -TypeName psobject -Property @{'ID'=$dateID;'Date'=$date})
    }
}
$newdlist | Export-Csv -Path dat.csv 
```

现在，如果您想再次使用 $newdlist，您只需使用 Import-Csv 导入 Csv 文件。

```
PS C:\> $data = Import-Csv date.csv
PS C:\> $data

ID                                                          Date
--                                                          ----
1                                                           *-01-01
1                                                           *-12-25
1                                                           2007-05-28
1                                                           2007-09-03
2                                                           2008-11-11
2                                                           2008-11-27
3                                                           2008-03-21
3                                                           2010-04-02 
```

我不知道如何将 SQL 与 powershell 一起使用，但现在使用数据更容易。

```
$data | % {"INSERT '$($_.Date)' INTO 'Id' Where 'Id'='$($_.ID)'"} 
```

**更多的**

CSV 文件如下所示：

```
#TYPE System.Management.Automation.PSCustomObject
"ID","Date"
"1","*-01-01"
"1","*-12-25"
"1","2007-05-28"
"1","2007-09-03"
"2","2008-11-11"
"2","2008-11-27"
"3","2008-03-21"
"3","2010-04-02" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:58:13.700

这是我用来生成 csv 文件的内容：

```
[xml]$xml = Get-Content -path "c:\temp\datedata.xml"

$nodes = $xml.Settings.CentralOnly.DateLists.DateList

$array = @()

foreach ($node in $nodes) {

    $id = $node.ID

    foreach ($date in $node.Date) {

        $entry = New-Object PSObject -property @{
            ID = $id
            Date = $date
        }

        $array += $entry
    }

}

$array | Export-Csv -Path 'c:\Temp\data.csv' -Delimiter ',' -noTypeInformation 
```

**注意：**您需要使用 -noTypeInformation 从 csv 文件中排除类型。

# jquery - Twitter Bootstrap 选项卡 - 用作正常的锚标记行为。未捕获的错误

> ID：15748271
> 
> 赞同：0
> 
> 时间：2013-04-01T17:30:58.360
> 
> 标签：jquery, twitter-bootstrap, jsfiddle

这是我难以置信的烤面条。所以我设置了一个[小提琴](http://jsfiddle.net/motocomdigital/aVBUy/1/)来证明我的问题。但小提琴确实有效。

行。我想使用引导选项卡 - 只是为了它们的外观，所以不使用它们的引导行为。

我只是希望锚点 href 像正常的默认行为一样工作。因此，当单击选项卡时，浏览器会重定向到 href。就像普通的锚标签一样。

所以我为我的标签设置了一个导航标记......

```
<ul class="nav nav-tabs" id="subTabs">

    <li class="active"><a href="http://mywebsite.com">Admin</a></li>
    <li><a href="http://mywebsite.com/individual">Individual</a></li>   
    <li><a href="http://mywebsite.com/studio/">Studio</a></li>
    <li><a href="http://mywebsite.com/location/">Location</a></li>
    <li><a href="http://mywebsite.com/engineers-images/">Engineers</a></li>
    <li><a href="http://mywebsite.com/tech-sketch-images/">Technical Sketch</a></li>
    <li><a href="http://mywebsite.com/videos/">Videos</a></li>
    <li><a href="http://mywebsite.com/documents/">Documents</a></li>

</ul>

<script type="text/javascript">
    $('#subTabs a').click(function (e) {
        return true 
    })
</script> 
```

正常输出选项卡。

因此，当我单击 iphone/ipad 上的选项卡时，它工作正常。

但是当我在桌面浏览器上单击它时，我只会收到这个 js 错误，并且没有任何反应。

![在此处输入图像描述](https://i.stack.imgur.com/OzAir.png)

这简直是​​疯了。

因为使用我创建的[小提琴](http://jsfiddle.net/motocomdigital/aVBUy/1/)，它完全一样，它工作正常！！！

任何人都可以帮助我，请理解什么是错的。

谢谢

[http://jsfiddle.net/motocomdigital/aVBUy/1/](http://jsfiddle.net/motocomdigital/aVBUy/1/)

* * *

对于临时措施，我必须这样做......

```
<script type="text/javascript">
    $('#subTabs a').click(function (e) {
        e.preventDefault();
        window.location.href = $(this).attr('href');
    })
</script> 
```

但就在页面重定向之前，您可以看到同样的错误发生。

但是您肯定不需要js来使链接可点击吗？

如何删除引导选项卡的默认行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:43:06.360

这个点击事件不应该是必要的。html代码看起来不错。至少如果你已经发布了所有的 js 代码。您链接到的小提琴没有 js 部分，所以这就是它起作用的原因。

但是如果你出于某种原因需要这个 js，我认为不是这样，你会丢失一些分号。我会把事件处理程序放在`ready`回调中。

```
$(document).ready(function() {
    $('#subTabs a').click(function(e) {
        return true; 
    });
}); 
```

它看起来像在触摸设备上工作的原因可能是，点击甚至没有在那里触发。

# jquery - jquery ui 对话框：删除还是关闭？

> ID：15748272
> 
> 赞同：0
> 
> 时间：2013-04-01T17:30:58.440
> 
> 标签：jquery, jquery-ui

关闭 jQuery UI 对话框时的最佳做法是什么？我使用一个对话框，以便用户可以执行搜索。

用户完成后，我应该使用 .close() 还是 .remove()？

我担心的是，如果他们决定进行另一次搜索……关闭或删除旧搜索会更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:38:53.797

关闭和显示比删除和重新创建要快得多，但如果它对您很重要，如果您只是保存并显示它，任何以前的用户输入仍将在对话框中。

根据我的经验，最好的办法是保留对话框，并在（重新）打开它之前对其进行初始化。这样，您可以将 DOM 的添加或删除降至最低，并且初始化步骤使您有机会确保用户看到他们期望看到的内容。

# c - 为什么我指向整数数组的指针不起作用？

> ID：15748275
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:02.347
> 
> 标签：c, arrays, pointers

这是问题所在：[http ://cps125.scs.ryerson.ca/labs/homework8.gif](http://cps125.scs.ryerson.ca/labs/homework8.gif)

这是我的尝试：

```
#include <stdio.h>

void tenfold(int (*array1)[9], int (*array2)[9])
{
    int i;
    for (i = 0; i < 9; i++) {
        if ((*array1)[i] > 0) {
            (*array2)[i] = 10 * (*array1)[i];
        } else {
            (*array2)[i] = (*array1)[i];
        }
    }
}

int main()
{
    int array1[9] = { 3, 4, 5, 6, 7, -8, -9, 1, 2 }, array2[9], i;

    tenfold(&array1, &array2);

    for (i=0; i < 9; i++) {
        printf("%lf ", array2[i]);
    }
    return 0;
} 
```

这是输出：

44100667367791664000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000.000000 441006673677917200000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000.000000 4410066736779177 60000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000.000000 4410066736779183200000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000.000000 44100667367791888000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000000000.000000 44100691391845304000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000.000000 441006913918452980000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000.000000 4410066736779155 20000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000.000000 4410066736779160800000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000 4410066736779155 20000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000.000000 4410066736779160800000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000.000000000000 4410066736779155 20000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000.000000 4410066736779160800000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000.000000000000 4410066736779160800000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000.000000000000 4410066736779160800000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000.000000

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:33:43.370

这里至少有一个问题：

```
printf("%lf ", array2[i]); 
```

`%lf`字面意思是“长浮点数”，但是你想打印整数：

```
printf("%i\n", array2[i]); 
```

还要记住 printf 等待`\n`刷新。

编辑：正如 newacct 所指出的，`%f`并且最终`%lf`都是`double`，因为 varargs 提升`float`为`double`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:33:43.513

函数中输入数组的定义无需加星号`tenfold`

只需将其定义如下

```
void tenfold(int array1[9], int array2[9]) 
```

`*`并在使用`array1`和`array2`进入函数时去掉星号`tenfold`

```
void tenfold(int array1[9], int array2[9])
{
    int i;
    for (i = 0; i < 9; i++) {
        if ((array1)[i] > 0) {
            (array2)[i] = 10 * (array1)[i];
        } else {
            (array2)[i] = (array1)[i];
        }
    }
} 
```

当你调用`tenfold`函数时`main`：

```
tenfold(array1, array2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:35:36.870

"%lf" 是浮点数的格式，而不是整数。

# xpath - Windows 8 桌面应用程序 - 如何从我的 Facebook/Twitter 和 YouTube 订阅源中提取数据？

> ID：15748280
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:13.390
> 
> 标签：xpath, windows-8, desktop-application

我想制作一个个性化的 Windows 8 应用程序。

如何从我的 Facebook/Twitter 和 YouTube 订阅源中提取数据？

我设法使用“$xpath->query”在 PHP 中轻松地在网站上做到这一点，但由于我不能为此使用 PHP，我想知道我应该研究什么。

我曾尝试研究 Windows 桌面应用程序的 xpath 支持，但找不到任何有用的东西。

使用 Javascript/C++/C# 或 VB 最容易做到这一点吗？我应该研究什么功能？

很抱歉提出这样一个愚蠢的问题，但我已经花了几个小时研究，但我仍然不明智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:52:59.383

如果我正确理解您的问题，您已经设法以 XML 格式检索数据，并且您现在正在寻找一种解析它的方法。

如果您将使用 C# 或 VB，则没有可用的 XPath 实现，但您可以使用 LINQ to XML 代替。它有不同的语法，但你可以用它实现几乎相同的效果。

[MSDN 上提供](http://msdn.microsoft.com/en-us/library/bb387061.aspx)了一个教程，以及一个[可供下载的示例](http://code.msdn.microsoft.com/windowsapps/XLinq-XmlReader-and-1e17c0a5)。这应该足以让你开始。

# mysql - MySQL Innodb 中的选择和更新查询非常慢

> ID：15748283
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:17.223
> 
> 标签：mysql, vb.net

我有 1 个包含 25 亿条记录（2.5 Cr.）的表，我正在尝试根据索引列获取记录数。执行相同的操作需要 115 秒。

询问

```
Select count(1) from table1 where column=code

Table1: table with 2 billion (2 Cr.)
code gets resultset from DB with 1 to 10k rows,
Column is indexed. 

Server Details
Intel Xeon 3.10ghz
8 gb RAM

MySQL server 5.1
MySQL Connector 5.0.6

My.cnf details
Default Engine =InnoDB
Innodn_buffer_pool=4G 
```

更新查询也需要太多时间，请建议我如何调整 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:16:09.847

20 亿行表的 8 GB 内存并不算多。

查询大概只需要读取索引，`select`但索引必须加载到内存中。这需要将索引的所有 20 亿行加载到内存中，然后使用它。115 可能看起来有点长，但不是特别长。

您想查看内存设置，以确保您正在使用可用内存。您可能会考虑为这个尺寸问题获得更好的硬件。或者，如果这是一个常见的过滤子句，您可能希望按代码对表进行分区。

# windows-phone-8 - 应用程序不会打开特定网页？

> ID：15748284
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:18.763
> 
> 标签：windows-phone-8, mobile-website

我正在开发一个基本上是移动网站包装器的 Windows Phone 8 应用程序。唯一的问题是应用程序不会打开网页。我可以打开任何其他网站（谷歌、雅虎等），但每当我尝试打开移动网站时，它都不会呈现任何内容。我什至可以加载两个 webviews，一个是移动网站，一个是 yahoo，一个 yahoo 会加载，另一个不会。我认为这可能是服务器设置，但我不知道是否有解决方法。有人知道我应该怎么做吗？或者以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:24:45.673

`WebBrowser`默认情况下禁用a 中的 JavaScript 。当您将`IsScriptEnabled`值更改为 时，它是否有效`true`？

```
<phone:WebBrowser IsScriptEnabled="True" Name="WebBrowserView" /> 
```

# javascript - 如何下载从 html 文件链接的一堆 pdf 文件？

> ID：15748285
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:19.910
> 
> 标签：javascript

我朋友的电脑坏了，他唯一可以用来查看他的几何书的是可访问页面：[http ://www.classzone.com/cz/books/geometry_2007_na/secured/resources/applications/ebook/accessibility/ml_geometry_na/toc .html](http://www.classzone.com/cz/books/geometry_2007_na/secured/resources/applications/ebook/accessibility/ml_geometry_na/toc.html)因为他的 iPad 无法查看 Flash。

第一页的链接如下所示： ..... [http://www.classzone.com/cz/books/geometry_2007_na/secured/resources/applications/ebook/accessibility/ml_geometry_na/page_1.pdf](http://www.classzone.com/cz/books/geometry_2007_na/secured/resources/applications/ebook/accessibility/ml_geometry_na/page_1.pdf)

第二页：.....blahblah/page_2.pdf 一直到 page_1000.pdf

问题是没有“下一页”按钮，所以切换页面很麻烦。此外，它需要互联网连接。

如何将所有这些 pdf 文件下载到一个文件夹中，以便他可以更轻松地在 iPad 上阅读它们？我也想有这个选项，所以我可以离线查看我的数学书。我知道 javascript，并且正在考虑一个 for 循环：

```
for(var i=1; i<=500; i++) {
 var link = "http://www.classzone.com/cz/books/geometry_2007_na/secured/resources/applications/ebook/accessibility/ml_geometry_na/page_" + i + ".pdf";
 // how can I download the pdf from variable link 
} 
```

太感谢了！如果 javascript 不能做到这一点，那么任何其他编程语言都可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:08:04.897

您可以使用 Perl`wget`并快速获取它们。

```
#!/usr/bin/perl -w
$x = 1;
while ($x < 1001) {
    system ("wget http://www.classzone.com/cz/books/geometry_2007_na/secured/resources/applications/ebook/accessibility/ml_geometry_na/page_$x.pdf");
    $x++;
} 
```

# sql-server - 比较查询 sql server 中的日期时间

> ID：15748289
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:34.137
> 
> 标签：sql-server

我有多个字段比较，唯一失败的是日期时间字段。这是我的查询：

```
SELECT 
       [RPC_NUMERO_CHEQUE]
      ,[RPC_NUMERO_CUENTA_ORIGEN]
      ,[RPC_ESTATUS_PAGO]
      ,[RPC_CODIGO_OFICINA]
      ,[RPC_FECHA_CHEQUE]
  FROM [Filemaker_CheckPro].[dbo].[TBL_RESUMEN_PROCESO_CAMARAS]
  WHERE [RPC_NUMERO_CHEQUE]='0025' 
     AND [RPC_NUMERO_CUENTA_ORIGEN]='07101000376' 
     AND [RPC_ESTATUS_PAGO]=1 
     AND [RPC_CODIGO_OFICINA]=1 
     AND [RPC_PROCESS_DATE] BETWEEN 20120911 AND 20120912//<--- HERE 
```

如您所见，它不起作用，但我也需要比较这些字段，它应该返回 1 个或多个结果。那么，我该如何存档呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:33:43.747

您当前的查询非常接近。由于您有日期的字符串值，因此您需要在日期值周围加上单引号：

```
AND [RPC_PROCESS_DATE] BETWEEN '20120911' AND '20120912' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:38:57.843

您可以像这样尝试使用Sql的[Cast函数](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
 AND [RPC_PROCESS_DATE] BETWEEN 
      CAST('20120911' as datetime) AND 
      CAST('20120912' as datetime) 
```

# sql - 如何获取每个项目的不同子项目的计数？

> ID：15748290
> 
> 赞同：0
> 
> 时间：2013-04-01T17:31:38.880
> 
> 标签：sql, ms-access

给定一个如下所示的表：

```
DATE    USER         TYPE        DEPT
3/1/13  Team1        Add         Finance
3/1/13  Team1        Add         Collections
3/2/13  Team1        Delete      Finance
3/2/13  Team1        Delete      Finance
3/2/13  Team1        Delete      Finance
3/3/13  Team1        Delete      Collections
3/3/13  Team1        Change      Finance
3/3/13  Team1        Change      Finance
3/4/13  Team1        Add         Finance
3/5/13  Team1        Delete      Collections 
```

我怎样才能得到这样的输出？

```
TYPE        DEPT        COUNT
Add         Collections 1
Add         Finance     2
Change      Collections 0 (note: this line could be omitted if COUNT = 0)
Change      Finance     2
Delete      Collections 2
Delete      Finance     3 
```

我还需要指定 USER = Team1 和日期范围。到目前为止，我有以下内容，但它不起作用：

```
SELECT user, type, Count(*) AS Total
FROM table1
GROUP BY user, type
HAVING (((user)="Team1")); 
```

这给了我：

```
USER    TYPE    Total
Team1   Add     3
Team1   Change  2
Team1   Delete  5 
```

但不会按 DEPT 分解，我不确定如何指定日期范围。

一如既往，谢谢！！

编辑：我想我想通了：

```
SELECT User, Type, Dept, Count(*) AS Total
FROM Table1
WHERE (((Date) Between #3/1/2013# And #3/5/2013#))
GROUP BY User, Type, Dept
HAVING (((User)="Team1")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:40:37.223

您必须对 TYPE 和 DEPT 进行分组，并将 USER 放在 where 子句中：

```
select TYPE, DEPT, count(*) as TOTAL
from table1 where USER = 'Team1'
group by TYPE, DEPT
having TOTAL > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:42:31.130

`GROUP BY`您必须使用列进行扩展`DEPT`：

```
GROUP BY user, type, dept 
```

为了满足日期范围条件添加`WHERE`部分：

```
WHERE date >= startDate AND date <= endDate 
```

要获取一个用户的数据，只需添加另一个`WHERE`条件：

```
WHERE user = "Team1" 
```

整个查询应如下所示：

```
SELECT user, type, dept, Count(*) AS Total
FROM table1
WHERE date >= startDate AND date <= endDate AND user = "Team1"
GROUP BY user, type, dept 
```

您不必做任何事情来删除行`Total = 0`- 它们不会在那里，因为带有那个的项目`type`并且`dept`不在组源中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:43:30.747

我想你可以试试这个。

```
SELECT Type, Dept, Count(*) AS Total
FROM Table1
WHERE (((Date) Between #3/1/2013# And #3/5/2013#))
AND (((User)="Team1"))
GROUP BY Type, Dept 
```

# ios - 在 ipad 上写入 EXI 格式的 xml

> ID：15748300
> 
> 赞同：1
> 
> 时间：2013-04-01T17:32:26.583
> 
> 标签：ios, xml, gdataxml, exi

我需要在 ipad 应用程序上读取和写入 w3c 格式的 xml 文件。在我之前的应用程序中，我使用 GDataXML 读取了基本的 xml 文件，这完全符合我的需要。我可以使用相同的 GDataXML 来读取和写入 w3c 格式的 xml 文件吗？还是我需要不同的类？

编辑：我需要读写的格式是[Efficient XML Interchange (EXI)](http://www.w3.org/TR/2011/REC-exi-20110310/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:30:48.573

据我所知，Apple 和 Google 都没有在他们的产品中做任何与 EXI 相关的事情，而目前 iOS 上唯一可用的选择似乎是来自 AgileDelta [1] 的商业产品。[1] [http://www.agiledelta.com/product_efxsdk.html](http://www.agiledelta.com/product_efxsdk.html)

# javascript - 如果我也可以更简单地执行 Object.defineProperty，那么它有什么用？

> ID：15748302
> 
> 赞同：2
> 
> 时间：2013-04-01T17:32:30.727
> 
> 标签：javascript, defineproperty

Object.defineProperty 有什么用...

```
var myObj = {someNum: 123};
Object.defineProperty(myObj, "anotherNum",
{value: 456, writable: true, enumerable: true, configurable: true});
alert(myObj.someNum + " " + myObj.anotherNum); 
```

...如果我也可以...

```
var myObj = {someNum: 321};
myObj.anotherNum = 654;
alert(myObj.someNum + " " + myObj.anotherNum); 
```

[jsfiddle在这里](http://jsfiddle.net/4HSrr/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:23:45.283

应该很清楚：该`.defineProperty()`方法使您可以控制如何访问该属性。当您简单地将属性添加到对象时，它始终是可写、可枚举和可配置的。

该`.defineProperty()`方法还允许您设置 getter 和 setter 函数。

# python - 如何在函数中访问 Aʟʟ 全局变量？

> ID：15748303
> 
> 赞同：1
> 
> 时间：2013-04-01T17:32:33.007
> 
> 标签：python, global-variables, shelve

我正在尝试模仿`matlab`加载和保存功能。我正在关注这个线程：[搁置代码给出了 KeyError](https://stackoverflow.com/questions/8857768/shelve-code-gives-keyerror)

它很聪明。但是，如果我在单独的模块中编写该代码，并尝试导入该模块并调用该函数，则它无法访问全局变量。

具体来说，我写了一个`happy.py`并在里面有函数：

```
def save(filename='tmp', globals_=None):
    if globals_ is None:
        globals_ = globals()

    globals()
    import shelve
    my_shelf = shelve.open(filename, 'n')
    for key, value in globals_.items():
        if not key.startswith('__'):
            try:
                my_shelf[key] = value
            except Exception:
                print('ERROR shelving: "%s"' % key)
            else:
                print('shelved: "%s"' % key)
    my_shelf.close()

def load(filename='tmp', globals_=None):
    import shelve
    my_shelf = shelve.open(filename)
    for key in my_shelf:
        globals()[key] = my_shelf[key]
    my_shelf.close() 
```

当我尝试

```
a = 1
b = 2
happy.save() 
```

它不会给出保存`a`和`b`。

这是因为`global()`不会给模块外的对象吗？那我该怎么做我想做的事呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:37:50.780

以下将作为一个单独的模块工作：

```
import shelve
import sys
import types

EXCLUDED_TYPES = (types.ModuleType,)  # Everything can't be shelved.

def save(filename='tmp', globals_=None):
    if globals_ is None:
        globals_ = sys._getframe(1).f_globals  # Caller's globals.

    with shelve.open(filename, 'n') as my_shelf:
        for key, value in globals_.items():
            if not (key.startswith('__') or isinstance(value, EXCLUDED_TYPES)):
                try:
                    my_shelf[key] = value
                except Exception as e:
                    print('ERROR shelving: "%s"' % key, 'Exception:', e)
                else:
                    print('shelved: "%s"' % key)

def load(filename='tmp', globals_=None):
    if globals_ is None:
        globals_ = sys._getframe(1).f_globals  # Caller's globals.

    with shelve.open(filename) as my_shelf:
        for key in my_shelf:
            globals_[key]=my_shelf[key]
            print('unshelved: "%s"' % key) 
```

一般来说，我认为函数创建这样的全局变量不是一个好主意。另请注意，这`load()`可能会默默地更改调用者命名空间中的现有值。

您无法轻松保存*所有*全局命名空间，因为除了`__main__`'s. 如果您真的想这样做，可以通过遍历`sys.modules`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:39:10.247

您可以使用`inspect`来查看堆栈。我定义的这个愚蠢的（命名不佳的函数）似乎可以很好地从调用命名空间中获取全局变量，尽管我没有对其进行广泛测试。我也不确定它是否适用于不同的 python 实现。（我提到这一点是因为该`inspect.currentframe`功能肯定是依赖于实现的）。对于它的价值，它似乎可以与 Cpython 一起工作。

```
import inspect
def save(globals=None):
    if globals is None:
        frames = inspect.stack()
        caller_frame = frames[-1][0]
        globals = dict((k,v) for (k,v) in caller_frame.f_globals.items() if not k.startswith('__'))
    return globals

if __name__ == "__main__":
    a = 1
    b = 2
    print save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:47:12.360

将此代码粘贴到控制台时，我没有遇到问题：

```
>>> def save(filename='tmp',globals_=None):
...     import shelve
...     globals_ = globals_ or globals()
...     my_shelf=  shelve.open(filename, 'n')
...     for key, value in globals_.items():
...         if not key.startswith('__'):
...             try:
...                 my_shelf[key] = value
...             except Exception:
...                 print('ERROR shelving: "%s"' % key)
...             else:
...                 print('shelved: "%s"' % key)
...     my_shelf.close()
... 
>>> def load(filename='tmp',globals_=None):
...     import shelve
...     my_shelf = shelve.open(filename)
...     for key in my_shelf:
...         globals()[key]=my_shelf[key]
...     my_shelf.close()
... 
>>> a, b = 1, 2
>>> save()
shelved: "load"
shelved: "a"
shelved: "b"
shelved: "save" 
```

进而：

```
>>> def save(filename='tmp',globals_=None):
...     import shelve
...     globals_ = globals_ or globals()
...     my_shelf=  shelve.open(filename, 'n')
...     for key, value in globals_.items():
...         if not key.startswith('__'):
...             try:
...                 my_shelf[key] = value
...             except Exception:
...                 print('ERROR shelving: "%s"' % key)
...             else:
...                 print('shelved: "%s"' % key)
...     my_shelf.close()
... 
>>> def load(filename='tmp',globals_=None):
...     import shelve
...     my_shelf = shelve.open(filename)
...     for key in my_shelf:
...         globals()[key]=my_shelf[key]
...     my_shelf.close()
... 
>>> load()
>>> a, b
(1, 2) 
```

但是当你将它作为一个模块使用时，它有点奇怪：

```
>>> from happy import *
>>> a, b
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> load()
>>> a, b
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> happy.a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'happy' is not defined
>>> from happy import *
>>> a, b
(1, 2) 
```

这里有足够的空间让你有一个解决办法吗？

# assembly - 在汇编语言中使用跳转和比较

> ID：15748305
> 
> 赞同：2
> 
> 时间：2013-04-01T17:32:38.357
> 
> 标签：assembly, calculator, x86-16

我在下面有这个计算器代码，它工作正常，但它不会跳转到“划分”..我仍在学习汇编编程的过程中..需要帮助来解决这个问题......

```
.model 小
.stack 100h

。数据
msg1 db 13,10,13,10，“输入第一个数字：$”
msg2 db 13,10，“输入第二个数字：$”
msgEr db 13,10，“错误 $”
msgCh db 13,10，“按 A 加，S 减，D 乘，F 减，X 退出：$”
msgSum db 13,10,13,10, "总和是 : $"
msgDif db 13,10,13,10，“区别是：$”
msgDiv db 13,10,13,10，“商是：$”
msgMul db 13,10,13,10, "产品是 : $"
tmp 数据库？

。代码

开始：
移动斧头，@data
mov ds, ax

铅 dx, msg1
mov 啊, 09h
整数 21 小时
移动 bx, 0

开始1：
mov 啊, 01h
整数 21 小时
cmp al,0dh      
下一个1
mov 啊,0        
亚铝，30h      
推斧         
移动斧头，10d      
mul bx          
流行音乐          
添加 bx,ax       
跳转开始1      

下一个：
推bx
铅 dx,msg2
mov ah,09h
整数 21 小时

移动 bx,0

开始2：
mov 啊,01h
整数 21 小时
cmp al,0dh
我的选择
mov 啊,0
亚铝，30h
推斧
移动斧头，10d
mul bx
流行音乐
添加 bx,ax
跳转开始2

选择：
领导 dx, msgCh
mov 啊, 09h
整数 21 小时

mov 啊, 01h
mov 答案，人
整数 21 小时

cmp al,'f'
je分割

cmp al,'a'  
je添加

cmp al,'s'
je 减法

cmp al,'d'
je 倍增

cmp al,'x'
mov ah, 4ch
整数 21 小时

错误：
领导 dx,msgEr
mov ah,09h
整数 21 小时
跳转开始

划分：
流行斧
div bx
推斧
领导 dx,msgDiv
mov ah,09h
整数 21 小时
流行斧
mov cx,0
移动 dx,0
mov bx,10d
跳转

添加：     
流行斧
添加斧头，bx   
推斧
领导 dx,msgSum   
mov ah,09h
整数 21 小时
流行斧
mov cx,0
移动 dx,0
mov bx,10d
跳转   

乘法：
流行斧
mul bx      
推斧     
领导 dx,msgMul   
mov ah,09h
整数 21 小时
流行斧
mov cx,0
移动 dx,0
mov bx,10d
跳转

减去：
流行斧
子斧头，bx
推斧
引导 dx,msgDif
mov ah,09h
整数 21 小时
流行斧
mov cx,0
移动 dx,0
mov bx,10d

休息：
div bx
推dx
移动 dx,0
公司
或斧头，斧头
休息

答：        
流行音乐
添加 dl,30h
mov 啊,02h
整数 21 小时
循环回答

跳转开始

结束开始

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T01:47:07.377

您必须在执行操作之前清除 DX。x86 中的除法将在`DX:AX`. 如果你没有先清除它并且它有一些内容，你最终可能会出现溢出情况。显然，这很糟糕。:)

所以：

```
dividing: 
pop ax
div bx 
```

应该变成：

```
dividing: 
pop ax
mov dx,0
div bx 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-19T09:01:01.160

```
.model small
.stack 100h

.data
msg1 db 13,10,13,10, "Enter 1st Number : $"
msg2 db 13,10, "Enter 2nd Number : $" 
msg01 db 13,10,13,10, "Enter base Number : $"
msg02 db 13,10, "Enter power Number : $"
msgEr db 13,10, "Error $"
msgCh db 13,10, "Press A to ADD , S to SUBTRACT ,M to MULTIPLY, D to DIVIDE,F to FIND FACTORIAL,P to FIND X POWER Y, X to EXIT : $ "
msgSum db 13,10,13,10, "Sum is : $"
msgDif db 13,10,13,10, "Difference is : $"
msgDiv db 13,10,13,10, "Quotient is : $"
msgMul db 13,10,13,10, "Product is : $" 
msgPOW db 13,10,13,10, "ANS is : $"
tmp     db ?

.code

start:
mov ax, @data
mov ds, ax

lea dx, msgCh
mov ah, 09h
int 21h

mov ah, 1
mov dl, al
int 21h

cmp al,'d'
je dividing

cmp al,'a'  
je adding

cmp al,'s'
je subtracting

cmp al,'m'
je multiplying   

cmp al,'f'
je fact

cmp al,'p'
je x_pow_y

cmp al,'x'
mov ah, 4ch
int 21h

error:
lea dx,msgEr
mov ah,09h
int 21h 
jmp start

;//////////////////////////////////////

dividing:
lea dx, msg1
mov ah, 9
int 21h  

start1:
mov ah, 1
int 21h
cmp al,0dh      
je next1
mov ah,0        
sub al,30h      
push ax         
mov ax,10d      
mul bx          
pop bx          
add bx,ax       
jmp start1      

next1:
push bx
lea dx,msg2
mov ah,09h
int 21h

mov bx,0

start2:
mov ah,1
int 21h
cmp al,0dh
je d
mov ah,0
sub al,30h
push ax
mov ax,10d
mul bx
pop bx
add bx,ax 
jmp start2
d:
pop ax
mov dx,0
div bx
push ax
lea dx,msgDiv
mov ah,09h
int 21h 
pop ax
mov cx,0
mov dx,0
mov bx,10d
jmp break

 ;///////////////////////////////////

adding:  
lea dx, msg1
mov ah, 9
int 21h
mov bx, 0

start01:
mov ah, 1
int 21h
cmp al,0dh      
je next01
mov ah,0        
sub al,30h      
push ax         
mov ax,10d      
mul bx          
pop bx          
add bx,ax       
jmp start01      

next01:
push bx
lea dx,msg2
mov ah,09h
int 21h

mov bx,0

start02:
mov ah,1
int 21h
cmp al,0dh
je a
mov ah,0
sub al,30h
push ax
mov ax,10d
mul bx
pop bx
add bx,ax 
jmp start02 
a:   
pop ax
add ax,bx   
push ax
lea dx,msgSum   
mov ah,09h
int 21h 
pop ax
mov cx,0
mov dx,0
mov bx,10d
jmp break 

;///////////////////////////////  

multiplying:

lea dx, msg1
mov ah, 9
int 21h
mov bx, 0

start001:
mov ah, 1
int 21h
cmp al,0dh      
je next001
mov ah,0        
sub al,30h      
push ax         
mov ax,10d      
mul bx          
pop bx          
add bx,ax       
jmp start001      

next001:
push bx
lea dx,msg2
mov ah,09h
int 21h

mov bx,0

start002:
mov ah,1
int 21h
cmp al,0dh
je m
mov ah,0
sub al,30h
push ax
mov ax,10d
mul bx
pop bx
add bx,ax 
jmp start002
m: 
pop ax 
mov dx,0
mul bx      
push ax     
lea dx,msgMul   
mov ah,09h
int 21h 
pop ax
mov cx,0
mov dx,0
mov bx,10d
jmp break

;//////////////////////////////////  

fact: 

lea dx, msg1
mov ah, 9
int 21h
mov bx, 0

start003:
mov ah, 1
int 21h
cmp al,0dh      
je l
mov ah,0        
sub al,30h      
push ax

mov ax,10d      
mul bx          
pop bx          
add bx,ax       
jmp start003      

l:                                       ;ax=6
mov cx,bx
mov ax,1 

jmp l2
l2:
cmp cx,0
je l1
mov dx,0 
mul cx

push ax

lea dx,msgPOW   
mov ah,09h
int 21h  

sub cx,1
pop ax

jmp l2
l1: 
mov dx,0
mov bx,10d
jmp break 

;//////////////////////////////////////////////\\\\\\\\\\\\\\\\\\\\\\\

x_pow_y:

lea dx, msg01
mov ah, 9
int 21h
mov bx, 0

start004:
mov ah, 1
int 21h
cmp al,0dh

je next004
mov ah,0        
sub al,30h      
push ax         
mov ax,10d      
mul bx          
pop bx          
add bx,ax       
jmp start004      

next004:
push bx
lea dx,msg02
mov ah,09h
int 21h

mov bx,0

start005:
mov ah,1
int 21h
cmp al,0dh
je p
mov ah,0
sub al,30h
push ax
mov ax,10d
mul bx
pop bx
add bx,ax 
jmp start005 

p:  
mov cx,bx 

pop ax
mov bx,ax 
mov dx,0

c:
cmp cx,1
je c1
mul bx      
push ax     
lea dx,msgPOW   
mov ah,09h
int 21h
sub cx,1 
pop ax
jmp c
c1:
mov cx,0
mov dx,0
mov bx,10d
jmp break

 ;/////////////////////////////// \\\\\\\\\\\\\\\\\\\\\ ' _ '

subtracting: 
lea dx, msg1
mov ah, 9
int 21h
mov bx, 0

start0001:
mov ah, 1
int 21h
cmp al,0dh      
je next0001
mov ah,0        
sub al,30h      
push ax         
mov ax,10d      
mul bx          
pop bx          
add bx,ax       
jmp start0001      

next0001:
push bx
lea dx,msg2
mov ah,09h
int 21h

mov bx,0

start0002:
mov ah,1
int 21h
cmp al,0dh
je s
mov ah,0
sub al,30h
push ax
mov ax,10d
mul bx
pop bx
add bx,ax 
jmp start0002
s:
pop ax
sub ax,bx 
push ax
lea dx,msgDif
mov ah,09h
int 21h 
pop ax
mov cx,0
mov dx,0
mov bx,10d

break:
div bx
push dx
mov dx,0
inc cx
or ax,ax 
jne break 

ans:        
pop dx
add dl,30h
mov ah,02h
int 21h
loop ans

jmp start

end start 
```

# jquery - jQuery替换跨度文本不起作用

> ID：15748306
> 
> 赞同：1
> 
> 时间：2013-04-01T17:32:39.087
> 
> 标签：jquery, text, replace

我有一个基本页面，我在其中显示和隐藏基于按钮按下的 div。作为页面的一部分，我想更改标题以反映适当的内容。

这是HTML：

```
<h2 class="section_header left">
  <span>
     Missing <span id="category">People</span> Nationwide
  </span>
</h2> 
```

这是jQuery：

```
$(document).ready(function() {
   $('#allcat').click(function(){
     $('.child').show();
     $('.adult').show();
     $("#category").text("People");
   });
   $('#children').click(function(){
     $('.child').show();
     $('.adult').hide();
     $("#category").text("Children");
   });
   $('#adults').click(function(){
     $('.child').hide();
     $('.adult').show();
     $("#category").text("Adults");
   });
 }); 
```

我试过 .text() 和 .html()

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:02:57.037

我真的觉得很笨。这是同一代码在一个页面中出现两次并覆盖自身的情况。当开发人员齐心协力时，上面的代码确实可以按预期工作。谢谢你的帮助。

# angularjs - Angular JS 路由不起作用，只显示部分路径，而不是部分路径

> ID：15748307
> 
> 赞同：5
> 
> 时间：2013-04-01T17:32:42.180
> 
> 标签：angularjs, routes

我正在关注关于 AngularJS 的教程 - [“使用 AngularJS 构建网站”](http://www.youtube.com/watch?v=zogrnQjHZAM)

我使用的路线与教程几乎相同：

```
// JavaScript Document
angular.module('quest', []).
    config(function($routeProvider) {
        $routeProvider.
            when('/about', {template:'partials/about.html'}).
            when('/start', {template:'partials/start.html'}).
            otherwise({redirectTo:'/home', template:'partials/home.html'});
    }); 
```

**问题是**：它只显示资源的路径，而不是资源的内容，所以不显示 html 内容，它只显示：

```
PARTIALS/ABOUT.HTML 
```

我不确定我做错了什么，但它确实有效，如果我转到 #/about URL，它会显示“PARTIALS/ABOUT.HTML”，如果我将 url 更改为 index.html#/start，它会显示“PARTIALS/开始.HTML"

页面的html：

```
<!DOCTYPE html>
<html lang="en" ng-app="quest">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title></title>
    </head>
    <body ng-controller="MainController">
        <script type="text/javascript" src="js/angular.min.js"></script>
        <script type="text/javascript" src="js/quest.js"></script>

        <div ng-view></div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T17:38:37.833

使用`templateUrl`代替`template`

# php - 如何在 php 邮件程序中添加密件抄送

> ID：15748308
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:32:45.440
> 
> 标签：php, phpmailer

我有以下代码。请协助我在此脚本中添加密件抄送：

```
<?php
if(isset($_POST['from'])) {

$email_to = $_POST['to'];

$email_subject = "Invitation";

function died($error) {

    echo "We're sorry, but there's errors found with the form you submitted.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

if( !isset($_POST['name']) ||
    !isset($_POST['address']) ||        
    !isset($_POST['from']) ||
    !isset($_POST['phone']) ||
    !isset($_POST['to'])) {
    died('We are sorry, but there appears to be a problem with the form you submitted.');       
}

$name = $_POST['name']; 
$address = $_POST['address']; 
$email_from = $_POST['from']; 
$phone = $_POST['phone']; 
$email_to = $_POST['to']; 

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'From Email Address you entered does not appear to be valid.<br         />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
 if(!preg_match($string_exp,$name)) {
$error_message .= 'The First Name you entered does not appear to be valid.<br />';
}
 if(!preg_match($email_exp,$email_to)) {
$error_message .= 'TO Email Address you entered does not appear to be valid.<br />';
 }

 if(strlen($error_message) > 0) {
died($error_message);

 }
$email_message = "Got one invitation request from:.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "".clean_string($name)."\n";
$email_message .= "".clean_string($address)."\n";
$email_message .= "".clean_string($phone)."\n";

$headers = 'From: '.$email_from."\r\n".
Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  

echo "<script>window.close(), 2000;</script>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:34:59.893

BCC 标头允许您执行此操作。您的脚本几乎已经完全为此设置了 - 只需更改以下内容：

```
$headers = 'From: '.$email_from."\r\n".
           'Reply-To: '.$email_from."\r\n" .
           'X-Mailer: PHP/' . phpversion(); 
```

至：

```
$headers = 'From: '.$email_from."\r\n".
           'Reply-To: '.$email_from."\r\n" .
           'BCC: '.$email_bcc."\r\n".
           'X-Mailer: PHP/' . phpversion(); 
```

# uiview - 当所有视图都被动画化时，如何设置手势识别器以交互任何 UIView？

> ID：15748310
> 
> 赞同：0
> 
> 时间：2013-04-01T17:33:03.743
> 
> 标签：uiview, core-animation, uigesturerecognizer, calayer

[我从https://github.com/DuncanMC/iOS-CAAnimation-group-demo](https://github.com/DuncanMC/iOS-CAAnimation-group-demo)找到了下面列出的代码 。这种特殊方法允许用户使用手势识别器在核心动画序列中“进行中”时停止 UIView。点击视图时，动画停止。如图所示，此代码仅适用于动画视图。我有许多动画视图，我需要与任何视图进行交互。我想我必须设置一组视图（或图层）并循环浏览它们。这个对吗？我怎么能这样做？谢谢！

```
 /*
 This method gets called from a tap gesture recognizer installed on the view myContainerView.
 We get the coordinates of the tap from the gesture recognizer and use it to hit-test
 myContainerView.layer.presentationLayer to see if the user tapped on the moving image view's
(presentation) layer. The presentation layer's properties are updated as the animation runs, so hit-testing
the presentation layer lets you do tap and/or collision tests on the "in flight"   animation.
*/

- (IBAction)testViewTapped:(id)sender
{
  CALayer *tappedLayer;
  id layerDelegate;
  UITapGestureRecognizer *theTapper = (UITapGestureRecognizer *)sender;
  CGPoint touchPoint = [theTapper locationInView: myContainerView];
  if (animationInFlight)
 {
    tappedLayer = [myContainerView.layer.presentationLayer hitTest: touchPoint];
    layerDelegate = [tappedLayer delegate];

    if (((layerDelegate == imageOne && !doingMaskAnimation)) ||
      (layerDelegate == waretoLogoLarge && doingMaskAnimation))
    {
      if (myContainerView.layer.speed == 0)
        [self resumeLayer: myContainerView.layer];
      else
     {
        [self pauseLayer: myContainerView.layer];

    //Also kill all the pending label changes that we set up using performSelector:withObject:afterDelay
    [NSObject cancelPreviousPerformRequestsWithTarget: animationStepLabel];
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:45:22.877

哈哈。那个演示项目是我的。编写代码是为了找到被点击的层，然后使用这样一个事实，即对于支持 UIView 的层，该层的委托就是视图本身。

在代码中找到 layerDelegate 的地方，您应该确保它是KindOfClass UIView，然后使用任何合适的方法来将您的视图与您动画的视图相匹配。您可以使用 IBOutletCollection 来跟踪您正在制作动画的视图，或者手动创建一个可变数组并向其中添加视图对象、使用视图标签或任何对您的应用程序有意义的东西。

# iphone - 如何在 UITableView 中将 fromIndex 处的 Row 交换为 toIndex？

> ID：15748316
> 
> 赞同：1
> 
> 时间：2013-04-01T17:33:15.197
> 
> 标签：iphone, ios, objective-c, cocoa-touch

**我用ARC**创建了一个简单的项目，其中我有`UITableView`. 我`NSMutableArray`有`NSMutableDictionary`。

**像**

```
(
        {
        comment = "";
        "field_name" = "field_name 1";
        "main_id" = 1;
        "order_index" = 0;
        "picker_value" = "";
    },
        {
        comment = "";
        "field_name" = "field_name 2";
        "main_id" = 2;
        "order_index" = 1;
        "picker_value" = "";
    },
        {
        comment = "";
        "field_name" = "field_name 3";
        "main_id" = 3;
        "order_index" = 2;
        "picker_value" = "";
    },
        {
        comment = "";
        "field_name" = "field_name 4";
        "main_id" = 4;
        "order_index" = 3;
        "picker_value" = "";
    },
) 
```

键`"field_name"`的值显示在 my 的每个单元格上`UITableView`。它工作正常。但我想在我**的**`UITableViewCell`.

**例如：**

```
1 value - 0 order_index 
2 value - 1 order_index -----
3 value - 2 order_index      |-> I Want to swap value 2 to 4…(But do not want to change order_index)
4 value - 3 order_index -----

It should Be

1 value - 0 order_index 
4 value - 1 order_index 
3 value - 2 order_index      
2 value - 3 order_index 

value of dictionary will swap but do not  want to change order_index 
```

我知道的方法`UITableView`

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.row > self.MyArray.count-1)
        return NO;
    return YES;
}

// Process the row move. This means updating the data model to correct the item indices.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath
      toIndexPath:(NSIndexPath *)toIndexPath
{
    // here i get fromIndexPath.row and toIndexPath.row
    NSMutableDictionary *oldDict = [NSMutableDictionary dictionary];
    oldDict = [(NSMutableDictionary *)[self.listOfReportField objectAtIndex:fromIndexPath.row] copy];

    [self.myArray removeObject:oldDict];
    [self.myArray insertObject:[self.myArray objectAtIndex:toIndexPath.row-1] atIndex:fromIndexPath.row];
    [self.myArray insertObject:oldDict atIndex:toIndexPath.row];

    // Here i am not swap my row , what should be i need to do here ??
 } 
```

b 作为我的要求，我首先要交换 `value`字典，但不是`order_index` 在这里。我无法交换价值。

请给我建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:40:05.240

第 1 步：保存订单索引值以及实际索引（在您的情况下为第 1 个）`"order_index" = 1;`，也就是第 4 个。

第 2 步：交换（第 2 个值与第 4 个值）。

第 3 步：因为它是数组，所以将索引值替换为实际索引（第 1 步）和第 4 步相同。

***编辑：***完整的工作代码：

```
-(void)swapArray:(NSMutableArray *)array MaintaingOrderFrom:(NSInteger)swapFrom swapTo:(NSInteger)swapTo{
    [array exchangeObjectAtIndex:swapFrom withObjectAtIndex:swapTo];
    NSString *tempOrderIndex=array[swapFrom][@"order_index"];
    array[swapFrom][@"order_index"]=array[swapTo][@"order_index"];
    array[swapTo][@"order_index"]=tempOrderIndex;
} 
```

**注意：**里面的数组和字典应该是可变的。

***编辑 2：***要检查，我需要创建您的数据模型

```
NSMutableDictionary *dict1=[NSMutableDictionary dictionaryWithDictionary:@{@"comment": @"",
                     @"field_name":@"field_name 1",
                     @"main_id":@"1",
                     @"order_index":@"0",
                     @"picker_value":@""
                     }];
NSMutableDictionary *dict2=[NSMutableDictionary dictionaryWithDictionary:@{@"comment": @"",
                      @"field_name":@"field_name 2",
                      @"main_id":@"2",
                      @"order_index":@"1",
                      @"picker_value":@""
                      }];
NSMutableDictionary *dict3=[NSMutableDictionary dictionaryWithDictionary:@{@"comment": @"",
                      @"field_name":@"field_name 3",
                      @"main_id":@"3",
                      @"order_index":@"2",
                      @"picker_value":@""
                      }];
NSMutableDictionary *dict4=[NSMutableDictionary dictionaryWithDictionary:@{@"comment": @"",
                      @"field_name":@"field_name 4",
                      @"main_id":@"4",
                      @"order_index":@"3",
                      @"picker_value":@""
                      }];

NSMutableArray *array=[NSMutableArray arrayWithArray:@[dict1,dict2,dict3,dict4]];

[self swapArray:array MaintaingOrderFrom:1 swapTo:3];

NSLog(@"%@",array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:37:08.683

NSMutableArray 有一个方法`- (void)exchangeObjectAtIndex:(NSUInteger)idx1 withObjectAtIndex:(NSUInteger)idx2` 为什么不使用 fromIndexPath 和 toIndexPath 的两个值调用该方法？

如果我正确阅读了您的问题，您希望字典中的“order_index”K/V 对与数组顺序匹配吗？使用上述方法交换值后，您可以调用：

```
[[self.myArray objectAtIndex:fromIndexPath.row] setObject:[NSNumber numberWithInt:fromIndexPath.row] forKey:@"order_index"];
[[self.myArray objectAtIndex:toIndexPath.row] setObject:[NSNumber numberWithInt:toIndexPath.row] forKey:@"order_index"]; 
```

# d3.js - d3折线图标签重叠

> ID：15748318
> 
> 赞同：4
> 
> 时间：2013-04-01T17:33:22.387
> 
> 标签：d3.js, overlap, labels, linechart

我根据此处找到的示例创建了一个折线图：

[http://bl.ocks.org/mbostock/3884955](http://bl.ocks.org/mbostock/3884955)

但是，对于我的数据，线标签（城市）最终会重叠，因为不同线的 y 轴上的最终值经常靠近。我知道我需要比较每行的最后一个值，并在值相差 12 个单位或更少时向上或向下移动标签。我的想法是查看这段代码编写的文本标签

```
city.append("text")
.datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
.attr("transform", function(d) { return "translate(" + x(d.value.date) + "," +  y(d.value.temperature) + ")"; })
.attr("x", 3)
.attr("dy", ".35em")
.text(function(d) { return d.name; }); 
```

如果 y(d.value.temperature) 值相差 12 或更小，则将这些值分开，直到它们之间至少有 12 个单位。关于如何完成这项工作的任何想法？这是我的第一个 d3 项目，语法仍然很适合我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:13:08.480

一次传递所有标签可能会更好——这也更符合一般 d3 的想法。然后你可以有这样的代码：

```
svg.selectAll("text.label").data(data)
   .enter()
   .append("text")
   .attr("transform", function(d, i) {
       var currenty = y(d.value.temperature);
       if(i > 0) {
           var previousy = y(data[i-1].value.temperature),
           if(currenty - previousy < 12) { currenty = previousy + 12; }
       }
       return "translate(" + x(d.value.date) + "," +  currenty + ")";
   })
   .attr("x", 3)
   .attr("dy", ".35em")
   .text(function(d) { return d.name; }); 
```

这没有考虑到前一个标签可能已被移动的事实。您可以显式获取前一个标签的位置，并根据该位置移动当前标签。代码几乎相同，只是您需要保存对当前元素 ( `this`) 的引用，以便以后可以访问它。

所有这些都不会阻止标签与它们最终标记的线条相距甚远。如果您需要移动每个标签，最后一个标签会很远。更好的做法可能是单独创建一个图例，您可以根据需要在其中间隔标签和线条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-16T14:28:19.480

考虑使用 D3 强制布局来放置标签。在此处查看示例：[https ://bl.ocks.org/wdickerson/bd654e61f536dcef3736f41e0ad87786](https://bl.ocks.org/wdickerson/bd654e61f536dcef3736f41e0ad87786)

假设您有一个`data`包含具有`value`属性和比例的对象的数组`y`：

```
// Create some nodes
const labels = data.map(d => {
  return {
    fx: 0,
    targetY: y(d.value)
  };
});

// Set up the force simulation
const force = d3.forceSimulation()
  .nodes(labels)
  .force('collide', d3.forceCollide(10))
  .force('y', d3.forceY(d => d.targetY).strength(1))    
  .stop();

// Execute thte simulation
for (let i = 0; i < 300; i++) force.tick();

// Assign values to the appropriate marker
labels.sort((a, b) => a.y - b.y);
data.sort((a, b) => b.value - a.value);
data.forEach((d, i) => d.y = labels[i].y); 
```

现在您的`data`数组将有一个`y`表示其最佳位置的属性。

示例使用 D3 4.0，在此处阅读更多内容：[https ://github.com/d3/d3-force](https://github.com/d3/d3-force)

# jpa - 如何让 Eclipselink 示例工作：“student”和“mysports”示例

> ID：15748321
> 
> 赞同：1
> 
> 时间：2013-04-01T17:33:32.140
> 
> 标签：jpa, glassfish, eclipselink, sample

我一直在尝试使以下 Eclipselink 示例正常工作，但成功率不到 0%：

A) [http://wiki.eclipse.org/EclipseLink/Examples/JPARS/Simple](http://wiki.eclipse.org/EclipseLink/Examples/JPARS/Simple)

B) git://git.eclipse.org/gitroot/eclipselink/examples/mysports.git

这两个样本都是最新的，应该“开箱即用”。我的结果：A) 在 glassfish 上启动和部署，但应用程序完全没有响应 B) 没有部署，因为 glassfish 没有找到持久性 xml 中提到的数据源：java:global/mysports

对于两者，我都试图获取有关它们应该如何工作的信息，但是在搜索了两天的文档之后，我可以放心地声明：实际上没有任何文档记录。

对于 A) 我完全一无所知，没有为这个示例配置任何东西，但是提供的用于与 REST 服务交互的 URL 总是返回 404，并且没有任何日志或错误消息。

对于 B）除了损坏的数据源（我猜是我的错），我尝试设置默认 JDBC 数据源，以查看至少 REST 服务本身是否工作：它看起来死了，打开示例 JSF 页面时出现异常（页面内的引用变量都解析为 NULL）。

有人尝试过实际运行这些样本吗？在远离任何可测试的事物数小时后，我感到非常沮丧......

也许有一些问题可以作为起点： - JPA-RS 如何在应用服务器中注册？我怎么知道它是否存在？它映射到哪个 URL？- 这个神奇的“java:global/mysports”数据源是如何工作的？- Maven 配置的行为很有趣，我无法正确调试两个样本中的任何一个（在任何时间点都没有遇到断点）。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:49:05.103

如果您使用的 Glassfish 早于 Glassfish 4.0 ( [http://dlc.sun.com.edgesuite.net/glassfish/4.0/promoted/](http://dlc.sun.com.edgesuite.net/glassfish/4.0/promoted/) )，您需要从 [http://www下载更新版本的 EclipseLink 2.4.2 二进制文件.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)（2.4.2 Nightly Build Results）并用您在上面下载的相应 jar 替换 $GLASSFISH_HOME/glassfish/modules 下的以下文件：

*   org.eclipse.persistence.antlr.jar
*   org.eclipse.persistence.jpa.jar
*   org.eclipse.persistence.asm.jar
*   org.eclipse.persistence.jpa.modelgen.jar
*   org.eclipse.persistence.core.jar
*   org.eclipse.persistence.oracle.jar
*   javax.persistence.jar
*   org.eclipse.persistence.dbws.jar
*   org.eclipse.persistence.jpa.jpql.jar

确保在替换上面列出的捆绑包之后和重新启动 Glassfish 之前，通过删除 $GLASSFISH_HOME\glassfish\domains\your_domain\osgi-cache 目录来清除 Glassfish osgi 缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:10:04.267

这些都是高级示例，除非您正在寻找这些特定功能，否则我建议您从更简单的示例开始。

这里记录了许多 EclipseLink JPA 示例，

[http://wiki.eclipse.org/EclipseLink/Examples](http://wiki.eclipse.org/EclipseLink/Examples)

这里大部分的例子还在 SVN 中，

[http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/examples/](http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/examples/)

有关 JPA-RS 示例的文档，请参阅，

[http://wiki.eclipse.org/EclipseLink/Examples/JPA#JPA-RS](http://wiki.eclipse.org/EclipseLink/Examples/JPA#JPA-RS)

如果您遇到特定问题，请尝试将问题添加到示例的 wiki 讨论页面。

MySports 示例非常先进。除非您正在寻找可扩展的实体和多租户，否则我不建议您从这个示例开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:55:41.870

为了补充 James 的评论，如果您对 JPA-RS 特别感兴趣，也许这些额外的评论会有所帮助。我还建议在 wiki 讨论页面上提问。

JPA-RS 通过 WEB-INF/lib 目录中的 org.eclipse.persistence.jpars_[version].jar 在应用服务器中注册。这个 jar 包含定义 JPA-RS 服务的 web-fragment.xml。如果以下 URL 模式返回持久性单元元数据，您将知道它是否已部署：

```
http://<server>:<port>/<applicationName>/persistence 
```

JPA-RS 的一些附加文档： - [http://www.eclipse.org/eclipselink/documentation/2.4/solutions/restful_jpa001.htm](http://www.eclipse.org/eclipselink/documentation/2.4/solutions/restful_jpa001.htm) - wiki.eclipse.org/EclipseLink/Development/2.4.0/JPA-RS/REST -API

有助于调试的一件事是查看 Glassfish 服务器日志。如果您在 Eclipse 中运行，请在 Server 视图中右键单击 Glassfish 服务器，转到 Glassfish->View Log File，这将在您的控制台视图中打开服务器日志。这将向您展示部署中发生的情况，并提醒您注意任何错误。还请务必仔细检查您的网址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:51:29.597

好的，女士们。我的一个朋友有一个绝妙的主意，强制所有日志记录在 eclipselink-jpars 库上（通过在我们能想到的每个文件中设置这个值），实际上我们发现了一个隐藏在最低日志级别的异常：

```
javax.xml.bind.PropertyException: name: eclipselink.json.include-root value: false 
```

不管这意味着什么，但这再次让我相信我暂时不会使用这个特性/lib。异常应该在所有日志级别上可见，特别是如果我降到 FINE（如示例中所述！）！就因为这个，我几乎失去了三天。

# android - SensorEventListener 实现不起作用

> ID：15748323
> 
> 赞同：0
> 
> 时间：2013-04-01T17:33:37.280
> 
> 标签：android, android-sensors

我正在尝试在我的简单 Activity 上使用 SensorEventListener，但每次运行应用程序后都会摔倒。

这是活动代码：

```
package com.chovanec.elastix;

import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity implements SensorEventListener {

    private final SensorManager m_sensor_manager;
    private final Sensor m_accelerometer;

    public MainActivity()
    {
        m_sensor_manager = (SensorManager) getSystemService(SENSOR_SERVICE);
        m_accelerometer = m_sensor_manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    protected void onResume()
    {
        super.onResume();
        m_sensor_manager.registerListener(this, m_accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    }

    public void onSensorChanged(SensorEvent event)
    {
        _("onSensorChanged");
        _("" + event.values[0]);
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy)
    {

    }

    private void _(String msg)
    {
        Log.d("chovanec", msg);
    }

} 
```

这是猫日志：

```
04-01 19:25:16.755: D/AndroidRuntime(19142): Shutting down VM
04-01 19:25:16.755: W/dalvikvm(19142): threadid=1: thread exiting with uncaught exception (group=0x40f3e2a0)
04-01 19:25:16.765: E/AndroidRuntime(19142): FATAL EXCEPTION: main
04-01 19:25:16.765: E/AndroidRuntime(19142): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.chovanec.elastix/com.chovanec.elastix.MainActivity}: java.lang.IllegalStateException: System services not available to Activities before onCreate()
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.os.Looper.loop(Looper.java:137)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at java.lang.reflect.Method.invoke(Method.java:511)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at dalvik.system.NativeStart.main(Native Method)
04-01 19:25:16.765: E/AndroidRuntime(19142): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.Activity.getSystemService(Activity.java:4603)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at com.chovanec.elastix.MainActivity.<init>(MainActivity.java:19)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at java.lang.Class.newInstanceImpl(Native Method)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at java.lang.Class.newInstance(Class.java:1319)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
04-01 19:25:16.765: E/AndroidRuntime(19142):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
04-01 19:25:16.765: E/AndroidRuntime(19142):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:36:10.977

它清楚地说

```
引起：java.lang.IllegalStateException：
系统服务在 onCreate() 之前对活动不可用

```

活动中没有构造函数的概念。将您的代码转移到活动的 onCreate 方法。

```
m_sensor_manager = (SensorManager) getSystemService(SENSOR_SERVICE);
m_accelerometer = m_sensor_manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:44:46.007

删除以下代码：

```
public MainActivity()
{
    m_sensor_manager = (SensorManager) getSystemService(SENSOR_SERVICE);
    m_accelerometer = m_sensor_manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
} 
```

并将这些行放在 onCreate() 中。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    m_sensor_manager = (SensorManager) getSystemService(SENSOR_SERVICE);
    m_accelerometer = m_sensor_manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-14T07:25:03.850

这是不正确的：m_sensor_manager = (SensorManager) getSystemService(SENSOR_SERVICE);

像这样使用： m_sensor_manager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);

# php - $.post() 中的 jQuery 语句无法正常工作

> ID：15748324
> 
> 赞同：0
> 
> 时间：2013-04-01T17:33:39.993
> 
> 标签：php, javascript, jquery, html, post

`fnbtn`当按下 Esc 键时，我的 jQuery 脚本中有以下代码对 div 进行了一些更改：

```
$(document).keypress(function(e){
  if(e.keyCode==27) {
    if(window.discon==0)
    {
    window.discon = 1;
    $("#fnbtn").replaceWith("<div id=\"fnbtn\"><p id=\"fnbtnp\">The variable is one...<br>Blah blah...<\/p><\/div>");
        }
    else if(window.discon==1)
    { 
    window.discon=2;
    $.post(
      'do.php',
      {doit: 4, uid: window.uid},
      function(rcvd) { 
        $("#fnbtn").replaceWith("<div id=\"fnbtn\"><p id=\"fnbtnp\">The variable is two...<br>Blah blah...<\/p><\/div>");
        $("#disp").append("<p><span id=\"cmnt2\">"+rcvd+"</span></p>");
        });
    //alert("Alert something here");
    }
  }
 }); 
```

`disp``$.post`是从请求中接收到的数据附加到的另一个 div 。该`do.php`文件包含一些 mysql 查询和以下语句：

```
echo "This is the data returned from the do.php file"; 
```

这是我的问题。当我将此脚本放在我的 php 文件中时，第一次`fnbtn`按下时 div 会成功更改。`Esc`但是当`Esc`第二次按下时，div`fnbtn`没有改变。我认为这与`$.post()`请求有关。

但是当我包含该`alert()`语句（当前已被注释掉）时，一切正常，并且在我按下`OK`警报框上的按钮之前，我可以看到所做的更改。

这个问题的原因是什么？是因为`$.post()`请求在`$("#fnbtn").replaceWith()`and`$("#disp").append()`语句执行之前完成引起的吗？以及如何包括在内`alert()`？

感谢您的帮助。提前致谢。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:33:20.877

*如果您设置`window.discon = 2`了这是否意味着`if(window.discon == 0)`并且`if(window.discon == 1)`将返回 false 并且不会第二次运行？我已经尝试过你的代码，对我来说它可以正常工作到上面提到的部分。添加`alert()`似乎没有任何区别，尽管它确实在`$.post()`完成之前运行。*

不管我在那里说什么，我似乎也不太明白你到底指的是什么。

在玩了一点代码之后，我没有发现它有任何问题，所以可能是因为您拥有的脚本不同。对我来说，无论有没有`alert()`

您可以尝试使用代码玩一点，还可以添加一个`.fail`功能

```
 $.post('do.php', {doit: 4, uid: window.uid}, function(rcvd) {
           $rcvd = rcvd;
        }).done(function(){
           $("#fnbtn").replaceWith("<div id=\"fnbtn\"><p id=\"fnbtnp\">The variable is two...<br>Blah blah...<\/p><\/div>");
           $("#disp").append("<p><span id=\"cmnt2\">" + $rcvd + "</span></p>");            
        }).fail(function(){
            alert('Could not reach do.php');        
       }); 
```

唯一的区别`alert()`是页面被停止执行，直到用户单击确定。这让我觉得可能还有其他一些脚本与这个发生冲突。

# jquery - 在模糊时关闭包含活动 Select2 元素的 Bootstrap 下拉菜单

> ID：15748326
> 
> 赞同：1
> 
> 时间：2013-04-01T17:33:43.323
> 
> 标签：jquery, twitter-bootstrap, jquery-select2

我有一个需要单击两次才能关闭 Bootstrap 下拉菜单的情况。当在下拉菜单之外发生点击时，我需要关闭两者，比如在另一个下拉按钮上。

标准的选择元素可能会发生同样的事情，但这是我的特殊情况。我尝试`dropdown('close')`在单击各种 Select2 元素时调用，但没有成功。

[http://jsfiddle.net/isherwood/PwNpB/15](http://jsfiddle.net/isherwood/PwNpB/15)

```
<div class="dropdown">
    <span data-toggle="dropdown" class="btn  dropdown-toggle">
        Button <span class="caret pull-right"></span>
    </span>

    <div class="dropdown-menu">
        <select id="e1">
            <option value="AL">Alabama</option>
            <option value="WY">Wyoming</option>
        </select>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:36:53.703

您可以使用此解决方法：

```
// initialize Select2 
$("#e1").select2().on('open', function () {
    $('#select2-drop-mask')
       .height($(window).height())
       .width($(window).width())
       .css('opacity', .1);
});

$(document).on('mousedown', '#select2-drop-mask', function () {
    $('.dropdown.open').removeClass('open');
}); 
```

[见 JSFIDDLE](http://jsfiddle.net/PwNpB/40/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T23:46:15.220

虽然我对 twitter-bootstrap 或 select2 都不太熟悉（也不太熟悉 JavaScript），但我注意到 select2 插入了一个名为的元素，该元素`#select2-drop-mask`捕获`mousedown`- 和 -`touchstart`事件并处理 select2-dropdown 的关闭：

```
mask.bind("mousedown touchstart", function (e) {
    var dropdown = $("#select2-drop"), self;
    if (dropdown.length > 0) {
        self=dropdown.data("select2");
        if (self.opts.selectOnBlur) {
            self.selectHighlighted({noFocus: true});
        }
        self.close();
    }
}); 
```

如果我们将这些相同的事件（简单的`click`不起作用）附加到`document`并确保单击的元素实际上是`#select2-drop-mask`（否则 bootstrap-tooltips ' [toggle](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-dropdown.js#L41) ' 将被调用两次），事情似乎就像你想要的那样 - 的每当单击 select2-element 之外的内容时，twitter-bootstrap 下拉菜单就会关闭：

```
function closeBootstrapDropdown() {
    if ($(event.target).is('#select2-drop-mask')) {
        // toggle the twitter-bootstrap dropdown
        $('.dropdown.open .dropdown-toggle').dropdown('toggle');
    }
}

$(document).on('mousedown touchstart', closeBootstrapDropdown); 
```

这是一个[http://jsfiddle.net/PwNpB/3/](http://jsfiddle.net/PwNpB/3/) - 虽然这似乎有效，但对我来说仍然感觉有点脏，所以我希望有人真正了解这里发生的事情以及为什么会加入。

# r - Gviz 中的注释轨道

> ID：15748329
> 
> 赞同：1
> 
> 时间：2013-04-01T17:33:45.373
> 
> 标签：r, plot, ggplot2, bioconductor

有没有使用该`bioconductor`软件包经验的人：`Gviz`知道如何`AnnotationTrack`直接在 a上添加一个`DataTrack`？

例如，`ggplot2`我可以使用 + 添加到预先存在的情节中`geom_text`，但我无法找到类似的功能`Gviz`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-14T13:52:43.687

虽然这不是您想要的，但一种可能的解决方案是添加一个`HighlightTrack`涵盖您感兴趣的区域的。虽然这不会专门标记/添加关键元素到你的`DataTrack`，但它有助于突出不同之间的对齐`DataTracks`。

**例子：**

```
library(Gviz)
library(GenomicRanges)
data(geneModels)
data(cpgIslands)
gen <- genome(cpgIslands)
chr <- 1
start <- 120005434
end <- 129695434
itrack <- IdeogramTrack(genome = gen, chromosome = chr)
gtrack <- GenomeAxisTrack()
grtrack <- GeneRegionTrack(geneModels, genome = gen, chromosome = chr, name = "foo")
htrack <- HighlightTrack(trackList = list(gtrack, grtrack), start = 121535434, end = 124535434, chromosome = chr)
plotTracks(list(itrack, htrack), from = start, to = end) 
```

**图形输出**

[![在此处输入图像描述](https://i.stack.imgur.com/5TWYk.png)](https://i.stack.imgur.com/5TWYk.png)

尽管`grtrack`是空的，但它演示了`HighlightTrack`将如何跨越指定的`DataTracks`（在本例中为`grtrack`和`gtrack`）。

有关信息的更多信息，请参阅[GViz 文档](http://bioconductor.org/packages/release/bioc/html/Gviz.html)。

# visual-studio - SASS 计算舍入 - 使用 Web Workbench 和 Visual Studio 2012 配置小数位数

> ID：15748332
> 
> 赞同：0
> 
> 时间：2013-04-01T17:33:48.653
> 
> 标签：visual-studio, sass, decimal, rounding, visual-studio-extensions

在 SASS 中，您通常可以在计算中配置所需的小数位数（请参阅[Sass 和向下舍入数字。可以配置吗？](https://stackoverflow.com/questions/7672473/sass-and-rounding-down-numbers-can-this-be-configured)）。

这很方便，尤其是 Chrome 有时会出现一些奇怪的舍入错误。

我目前正在使用 Mindscape Web Workbench ( [http://www.mindscapehq.com/products/web-workbench](http://www.mindscapehq.com/products/web-workbench) ) 在 Microsoft Visual Studio 2012 中使用 SASS。有人知道您如何在这样的环境中配置这些设置吗？

（我还在 Mindscape 自己的支持论坛上发布了这个问题：http: [//www.mindscapehq.com/forums/thread/673536](http://www.mindscapehq.com/forums/thread/673536)）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:26:22.163

Mindscape 回到了论坛，你可以通过“编译选项指令”来做到这一点。只需将其放在 SASS 文件的顶部：

```
//* scss-compile-options: --precision 8 
```

# javascript - 根据选择下拉选项将输入字段更改为禁用或启用

> ID：15748333
> 
> 赞同：0
> 
> 时间：2013-04-01T17:33:49.970
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试根据下拉菜单的选择启用或禁用输入字段。

代码在这里摆弄：http: [//jsfiddle.net/mwoods98/cr7dW/](http://jsfiddle.net/mwoods98/cr7dW/)

```
$('#getHoldStatus').change(function()
                    {
                        var selected_item = $(this).val()
                        if(selected_item == "On Hold until Candidate Available"){
                            $('#datepicker').val("").removeClass('hidden');
                        }
                        else
                        {
                            $('#datepicker').val(selected_item).addClass('hidden');
                        }
                    }
                    ); 
```

在此示例中，您将看到三个日期字段将使用 jquery datepicker

这个想法是，当页面首次加载时，输入字段：保留开始日期和保留结束日期将是：不显示或禁用。

如果选择了“等待候选人可用”，则保留开始日期和保留结束日期都被激活/可见。如果选择了“保留直到可用位置”，则只有保留开始日期是活动的/可见的。

我找到了一个有效的脚本，但是当我在我的页面上尝试它时它不起作用。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:38:31.237

> 我找到了一个有效的脚本，但是当我在我的页面上尝试它时它不起作用。

如果脚本在 jsFiddle 上运行而不是在您的站点上，则可能需要检查以下内容。

1.  如果 jQuery 添加成功。
2.  您已将代码放入 document.ready 函数中。

**编辑：**基于 OP 的评论

在更改事件中，您使用 val() 将值与应该与值而不是文本进行比较的文本进行比较。

*改变*

```
if(selected_item == "On Hold until Candidate Available"){ 
```

*到*

```
if(selected_item == "3"){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:54:36.973

我刚刚看了看脚本，有几件事你想改变。

1) 而不是 display:none in css change to visibility:hidden 2) 当 javascript 返回一个 selected_item 它返回下拉列表的值而不是文本所以你想检查 if(selected_item=="3") 或任何你需要的数字.

这应该解决问题。

# .net - 从excel到sql server

> ID：15748335
> 
> 赞同：1
> 
> 时间：2013-04-01T17:33:54.983
> 
> 标签：.net, sql-server, excel

我有一些 excel 文件，其中包含一些我需要将其转换为 sql server 数据库的信息。我面临的问题是这些信息不是我的数据库模型的结构，所以我需要做一些修改。我正在使用.net，我正在考虑使用**Open XML SDK**来解析 excel 文件，这是一个好的选择还是有更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:38:01.693

你的选择是

1.  [Microsoft Excel 自动化模型](http://msdn.microsoft.com/en-us/library/wss56bz7%28v=vs.80%29.aspx)
2.  开放 XML SDK
3.  [SharePoint Excel 自动化服务](http://msdn.microsoft.com/en-us/library/ff640648%28v=office.14%29.aspx)

**1**的好处是它的学习曲线更少，网络上的示例更多等。但是它需要在机器上安装 Excel，并且非常耗费资源。不要轻易期望 100 次同时转换。

**2**的好处是它免费并且消耗很少的系统资源但更难掌握。如果您需要在服务器上自动执行此操作 2) 是有道理的

**如果您需要在服务器盒上使用3**选项也很好，但您需要安装共享点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:43:14.737

如果可用，为什么不使用 SSIS 包？

[http://www.mssqltips.com/sqlservertip/1393/import-excel-unicode-data-with-sql-server-integration-services/](http://www.mssqltips.com/sqlservertip/1393/import-excel-unicode-data-with-sql-server-integration-services/)

然后，您可以递归地执行 SSIS 包，或者...

如果您只需要执行一次，我会看一下 SSMS 导入/导出向导...不确定它是否 excel，但我知道它可以使用 .csvs，您可以使用 excel 转换您的电子表格到。如果您需要多次执行此操作，这并不是很有趣，但就您的时间而言，它比任何其他方法都快。

# mysql - 两个 ORDER BY 子句和一个 LIMIT

> ID：15748336
> 
> 赞同：1
> 
> 时间：2013-04-01T17:33:55.967
> 
> 标签：mysql, sql, sql-order-by

这是一些排序：我有一个包含 id、名称和评级的表。我想根据评分列出 10 个最佳项目，这很好：

```
SELECT id FROM items ORDER BY ratings DESC LIMIT 10 
```

但现在困难的部分来了：我想根据评分列出 10 个最佳项目，但按字母顺序排列。我试过

```
SELECT id FROM items ORDER BY ratings DESC, names ASC LIMIT 10 
```

和

```
SELECT id FROM items ORDER BY names ASC, ratings DESC  LIMIT 10 
```

但两者都没有给出预期的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T17:35:48.297

您可以使用子查询：

```
SELECT *
FROM (
   SELECT id, names
   FROM items 
   ORDER BY ratings DESC
   LIMIT 10
   ) t
ORDER BY names 
```

*编辑：进一步解释*

您的原始查询按评级 DESC 排序，然后按名称排序 - 它只会对具有相同评级的名称进行排序。因此，如果两个项目具有相同的评级，那么你会得到这 2 个按名称排序。*它将首先*按评级对所有记录进行排序，然后按名称（在相同评级内）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:36:04.227

```
SELECT id, name, rating
FROM
    (SELECT id, name, rating FROM items ORDER BY ratings LIMIT 10) t
ORDER BY name 
```

这将按 排序前 10 名`rating`，然后按 排序`name`。

您的查询不正确，因为：*它们按名称对行进行排序，然后按评级（或相反的顺序），在执行排序后取 top10*。您需要进行第一次排序，取前 10 个，然后使用第二列值对这 10 个结果进行排序。

# wcf - 在 Azure 中托管超过 25 个 WCF 服务

> ID：15748341
> 
> 赞同：2
> 
> 时间：2013-04-01T17:34:15.420
> 
> 标签：wcf, azure, soa

我们的 WCF 服务遇到了 Azure 的 25 个内部端点的限制。为了与 SOA 原则保持一致，我们的 WCF 服务相当小，通常在我们的系统中每个“名词”一个。我们为每个服务合同定义一个 Azure InternalEndpoint。我们现在想要添加我们的第 26 个 WCF 服务，但由于 25 个端点的限制而不能。我们真的不想仅仅因为这个 Azure 限制就任意开始组合服务合同。

问题：有没有更好的方法来托管不需要每个服务合同一个端点的大量 WCF 服务？

这是一个示例 csdef 文件片段：

```
<ServiceDefinition name="MyDeployment" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WorkerRole name="MyWorkerRole" vmsize="Small">
    <Endpoints>
      <InternalEndpoint protocol="tcp" name="IUserService" />
      <InternalEndpoint protocol="tcp" name="IArticleService" />
      <InternalEndpoint protocol="tcp" name="IDocumentService" />
      <InternalEndpoint protocol="tcp" name="ICommentingService" />
      <InternalEndpoint protocol="tcp" name="ILocationService" />
      <InternalEndpoint protocol="tcp" name="IAuthorizationService" />
      <InternalEndpoint protocol="tcp" name="IAuthenticationService" />
      <InternalEndpoint protocol="tcp" name="ILoggingService" />
      <InternalEndpoint protocol="tcp" name="IService09" />
      <InternalEndpoint protocol="tcp" name="IService10" />
      <!-- and so on -->
      <InternalEndpoint protocol="tcp" name="IService24" />
      <InternalEndpoint protocol="tcp" name="IService25" />
      <InternalEndpoint protocol="tcp" name="IServiceWeWantToAddButCannot" />
    </Endpoints>
</ServiceDefinition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:57:15.153

好吧，如果最终结果是 25 个服务，那么我会说您将 SOA“原则”推得太远了。文件服务？！ILoggingService？！

有一些好的服务不应该作为单独的实体存在，因为它们是支持你的系统的东西，但它们本身并不是服务。我会说你需要改变你的一些服务，然后组合起来像 10 甚至是一个非常大的数字。

像这样的东西：

*   支持

    *   日志记录
    *   文档
    *   本土化
*   文章

*   产品

*   顾客

    *   验证
    *   授权

类似的东西，只有 4 项服务。我认为您缺少构图方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:35:07.243

正如我在对您的问题的评论中提到的那样，我认为您并不真正需要`InternalEndpoints`您拥有的所有这些。您正在将这些与 WCF 端点一对一配对。这可能是错误的。相反，将它们与您的 WCF 绑定/行为配对（实际上，每个端口一个）。在我们的例子中，我们有大约 250 个不同的 WCF 服务都通过这个端点。这是我们`csdef`文件中 100% 的端点：

```
<Endpoints>
  <InputEndpoint name="WcfConnections" protocol="tcp" port="8080" localPort="8080" />
</Endpoints> 
```

（虽然我们使用`InputEndpoint`而不是`InternalEndpoint`，但从这个问题的角度来看应该没有区别。）

`netTcpBindings`在我们的自托管 TCP 服务应用程序中，三个不同的端点使用了该单个端点。我们还有一个 TCP 服务的 Web 应用版本（便于在 IIS 中进行本地开发托管/测试），我们使用的绑定是：

```
<bindings>
  <netTcpBinding>
    <binding name="A" maxBufferPoolSize="5242880" maxBufferSize="5242880" maxReceivedMessageSize="5242880" listenBacklog="100" maxConnections="1000">
      <readerQuotas maxDepth="256" maxStringContentLength="16384" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="Certificate" />
      </security>
    </binding>
    <binding name="B" maxBufferPoolSize="15728640" maxBufferSize="15728640" maxReceivedMessageSize="15728640" listenBacklog="100" maxConnections="1000">
      <!-- 15MB max size -->
      <readerQuotas maxDepth="256" maxStringContentLength="15728640" maxArrayLength="15728640" maxBytesPerRead="204800" maxNameTableCharCount="15728640" />
      <security mode="Transport">
        <transport clientCredentialType="Certificate" />
      </security>
    </binding>
    <binding name="C" maxBufferPoolSize="524288" maxBufferSize="524288" maxReceivedMessageSize="524288" listenBacklog="100" maxConnections="1000">
      <!-- 0.5MB max size -->
      <readerQuotas maxDepth="256" maxStringContentLength="524288" maxArrayLength="524288" maxBytesPerRead="204800" maxNameTableCharCount="524288" />
      <security mode="Transport">
        <transport clientCredentialType="Certificate" />
      </security>
    </binding>
  </netTcpBinding>
</bindings> 
```

最后，只要您愿意在每个端口共享多个服务（除了一些**非常**高负载的情况，使用适当的自托管应用程序应该没问题），那么您所做的就是不必要的。

也许您的更大问题以及您需要学习提出的问题是，“如何在自托管 WCF 应用程序的单个端口上托管多个服务？” 如果是这种情况，请查看这段代码（注意，`endpoint`我们在循环中使用的对象只是一个包含每个 WCF 端点的一些关键部分的结构）：

```
// Build up Services
var hosts = new List<ServiceHost>();
foreach (var endpoint in endpoints)
{
    var host = new ServiceHost(endpoint.ServiceType, new Uri(string.Format("net.tcp://{0}:{1}", FullyQualifiedHostName, SharedTcpPortNumber)));
    hosts.Add(host);
    foreach (var behavior in MyBehaviorSettings)
    {
        if (behavior is ServiceDebugBehavior)
            host.Description.Behaviors.Find<ServiceDebugBehavior>().IncludeExceptionDetailInFaults = (behavior as ServiceDebugBehavior).IncludeExceptionDetailInFaults;
        else
            host.Description.Behaviors.Add(behavior);
    }

    if (endpoint.ServiceContract == null)
        throw new Exception();
    if (endpoint.ServiceBinding == null)
        throw new Exception();
    if (endpoint.EndpointUrl == null)
        throw new Exception();
    if (endpoint.ListenUrl == null)
        throw new Exception();

    // Add the endpoint for MyService 
    host.AddServiceEndpoint(endpoint.ServiceContract, endpoint.ServiceBinding, endpoint.EndpointUrl, new Uri(endpoint.ListenUrl));
    host.Open();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T17:27:03.667

WCF 可以在同一个物理端口上托管多个服务。

例如，如果您将服务注册到以下端点：

http://145.12.12.23:1000/

然后您将无法使用相同的端口。

但是，如果您将在末尾添加例如合同名称 - 您可以将服务注册到此类端点：

http://145.12.12.23:1000/A合同

http://145.12.12.23:1000/BContract

http://145.12.12.23:1000/CContract

WCF 将创建将每个 URL 映射到特定主机的代理。

# c++ - 如何表示昂贵与便宜的模板参数？

> ID：15748343
> 
> 赞同：0
> 
> 时间：2013-04-01T17:34:26.310
> 
> 标签：c++, templates, c++11, typetraits

我有一个简单`bi_map`的双向映射类的工作代码，用于在两个方向上存储关联的键值对。我目前的用法是，`NID`是某种数字 ID 或枚举，`OBJ`而是昂贵的不可复制的类对象。

最近，我注意到我也需要`bi_map<NID,std::string>`,是一个真正应该被复制`std::string`的便宜。`OBJ`

*概括下面的代码的正确方法是什么，以便用户可以指示某些东西是昂贵的（我想使用指针/引用）还是便宜的（我想按值复制所有内容），以便我可以使用正确的实现？*

**代码**

```
template<typename NID,typename OBJ>
class bi_map
{
  std::map<NID,OBJ*>        m_nid_2_ptr;
  std::map<OBJ const*,NID>  m_ptr_2_nid;

public:
  void insert( NID nid, OBJ& obj )
  {
    m_nid_2_ptr.insert( std::make_pair( nid, &obj ));
    m_ptr_2_nid.insert( std::make_pair( &obj, nid ));
  }

  NID operator[]( OBJ const& obj ) const
  {
    return m_ptr_2_nid.at( &obj );
  }
  OBJ const& operator[]( NID nid ) const
  {
    return *(m_nid_2_ptr.at( nid ));
  }

  using pairs_cb = std::function<void(NID,OBJ const&)>;
  void pairs( pairs_cb cb ) const
  {
    for( const auto& p : m_nid_2_ptr )
      cb( p.first, *p.second );
  }
  size_t size() const { return m_nid_2_ptr.size(); }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:31:49.617

一般来说，有多种选择，我想，没有一个正确的答案。所以，让我们试着找到适合*你*的东西。你说你想区分便宜的和昂贵的类型。最重要的设计选择是**界面**。你可以使用：

1) 将模板专门用于指针，在接口中*明确*提示您使用的是廉价类型：

```
bi_map< int, std::string* > bi_map_1; // note * is to flag std::string as cheap
bi_map< int, ExpensiveObject > bi_map_2; // no *, thus using heavy implementation 
```

这是这样实现的：

```
template< typename NID, typename OBJ >
struct bi_map
{
    // implementation for expensive objects, use OBJ* or std::shared_ptr<OBJ>
};

// specialize of the second parameter is a pointer
template< typename NID, typename OBJ >
struct bi_map< NID, OBJ* >
{
    // implementation for cheap objects, store a copy, i.e., use OBJ
}; 
```

当然，如果您发现它更具可读性，您也可以使用`&`而不是标记类型。`*`

2）如果您*不*希望廉价/昂贵的分离出现在界面中，即，如果您愿意

```
bi_map< int, std::string > bi_map_1; // no *
bi_map< int, ExpensiveObject > bi_map_2; // no * 
```

你需要一些不同的东西。一种解决方案是添加默认模板参数：

```
template< typename >
struct is_expensive_for_bi_map : std::false_type {};

template< typename IND, typename OBJ, bool = is_expensive_for_bi_map< OBJ >::value >
struct bi_map
{
    // implementation for expensive objects, use OBJ* or std::shared_ptr<OBJ>
};

template< typename NID, typename OBJ >
struct bi_map< NID, OBJ, false >
{
    // implementation for cheap objects, store a copy, i.e., use OBJ
}; 
```

对于您认为昂贵的每种类型，您添加

```
template<>
struct is_expensive_for_bi_map< ExpensiveObject > : std::true_type {}; 
```

如果昂贵的应该是默认值，只需颠倒名称并调整其余部分，应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:42:52.060

另外一个选项：

```
template<typename T>
struct notExpensive {
  static const bool value = FALSE;
  typedef T REF;
  static T& ref(T& x) { return x; }
  static T& deref(T& x) { return x; }
};
template<typename T>
struct isExpensive {
  static const bool value = TRUE;
  typedef T* REF;
  static T* ref(T& x) { return &x; }
  static T deref(T* x) { return x; }
};
template<typename T>
struct expensiveP : public notExpensive<T> {};

// List of expensive types:
template<> struct expensiveP<ExpensiveObject> : public isExpensive<T> {}; 
```

然后用昂贵的P调用填充BiMap。

# ruby-on-rails - 通过 JSON Api 扩展 Activerecord

> ID：15748346
> 
> 赞同：0
> 
> 时间：2013-04-01T17:34:42.680
> 
> 标签：ruby-on-rails, api, activerecord, extend

我正在尝试为手机做一个应用程序，并希望使用 Rails 作为我的后端。我非常喜欢Activerecord，我想通过JSON API（find、first、last等）提供他最常用的查询接口方法。我认为有一颗宝石可以做到这一点，但找不到。

使用标准导轨脚手架，我只能查询特定记录，例如：

```
http://myhost:3000/mycontroller/index/1.json 
```

我还想知道，如果有任何语法可用于请求，指定任何类型的过滤器，如“1 到 10 之间的 id”或“created_Date>=01-01-2013”​​等...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:06:43.573

查看[has_scope](https://github.com/plataformatec/has_scope) gem。它不会向您的 API 公开 ActiveRecord finder 方法（这是相当不安全的），但它提供了一些出色的助手来向它公开 AR 范围。

# c# - 将文本框绑定到数据库（C# Web 开发人员）

> ID：15748350
> 
> 赞同：0
> 
> 时间：2013-04-01T17:35:01.253
> 
> 标签：c#, sql-server, database, binding

我正在使用 Microsoft Visual Web Developer 2010 Express。我一直在尝试将我的文本框输入输入到我创建的数据库表中。我在使用 DataBinding 属性（位于底部的 BindTextBoxes 方法下）时遇到了问题。我搜索了互联网，发现 Web Developer 中不存在 DataBinding 属性。是否有另一种方法可以将文本框输入传输到数据库表中？

这是我的代码的数据库部分（在 C# 中）：

```
 namespace WebApplication2
    {
        public partial class _Default : System.Web.UI.Page
        {
     //used to link textboxes with database
     BindingSource bsUserDetails = new BindingSource();

     //info stored in tables
     DataSet dsUserDetails = new DataSet();

     //manages connection between database and application
     SqlDataAdapter daUserDetails = new SqlDataAdapter();

     //create new SQL connection
     SqlConnection connUserDetails = new SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Users\synthesis\Documents\Visual Studio 2010\Projects\Practical\Practical\App_Data\UserDetails.mdf;Integrated Security=True;User Instance=True");

     protected void Page_Load(object sender, EventArgs e)
     {
         //link textboxes to relevant fields in the dataset
         bsUserDetails.DataSource = dsUserDetails;
         bsUserDetails.DataMember = dsUserDetails.Tables[0].ToString();

         //call BindTextBoxes Method
         BindTextBoxes();

     private void BindTextBoxes()
     {
     txtBoxCell.DataBindings.Add(new Binding("Name entered into txtBox", bsUserDetails,              
     "Name column in database table", true));
     }
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:45:20.630

您总是可以编写自己的 SQL 来从文本框中插入数据。您需要设置一个 SqlConnection 和 SqlCommand 对象。然后您需要在命令上定义 SQL 并设置参数以防止 SQL 注入。像这样的东西：

```
StringBuilder sb = new StringBuilder();
sb.Append("INSERT INTO sometable VALUES(@text1,@text2)");

SqlConnection conn = new SqlConnection(connStr);
SqlCommand command = new SqlCommand(sb.ToString());
command.CommandType = CommandType.Text;
command.Parameters.AddWithValue("text1", text1.Text);
command.Parameters.AddWithValue("text2", text2.Text);
command.ExecuteNonQuery(); 
```

# c# - Razor 发布到共享主机后生成不同的 HTML

> ID：15748351
> 
> 赞同：0
> 
> 时间：2013-04-01T17:35:02.910
> 
> 标签：c#, jquery, asp.net-mvc-4, jquery-validate, asp.net-mvc-validation

型号类：

```
public class MyClass 
{ 
    ......
    [MaxLength(9), Required, DisplayName("Social security number")]
    [RegularExpression(@"\d{3}-\d\d-\d{4}", ErrorMessage = "Invalid social security number")]
    public string SocialSecurityNumber { get; set; }
} 
```

剃刀：

```
@Html.TextBoxFor(model => model.SocialSecurityNumber, new { id = "ssn" })
@Html.ValidationMessageFor(model => model.SocialSecurityNumber) 
```

在 Visual Studio 2012/Chrome 中运行时生成的代码。

```
<input data-val="true" 
  data-val-regex="Invalid social security number" 
  data-val-regex-pattern="\d{3}-\d\d-\d{4}" 
  data-val-required="The Social security number field is required." 
  id="ssn" 
  name="SocialSecurityNumber" 
  type="text" 
  value="" 
  class="input-validation-error">
<span 
  class="field-validation-error" 
  data-valmsg-for="SocialSecurityNumber" 
  data-valmsg-replace="true">
  <span for="ssn" class="" style="">Invalid social security number</span>
</span> 
```

发布到共享主机后生成的代码

```
<input 
  data-val="true" 
  data-val-regex="Invalid social security number" 
  data-val-regex-pattern="\d{3}-\d\d-\d{4}" 
  data-val-required="The Social security number field is required." 
  id="ssn" 
  name="SocialSecurityNumber" 
  type="text" 
  value="">
<span 
   class="field-validation-valid" 
   data-valmsg-for="SocialSecurityNumber" 
   data-valmsg-replace="true"></span> 
```

为什么通过 VS 运行的站点生成的 html 代码更多？（ `class="input-validation-error">`等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:43:24.593

你有两种情况-

第一个示例显示了一个带有*无效*输入的文本框，因此 css 类`input-validation-error`和`SPAN`.

第二个示例显示*有效*（或没有）输入，因此文本框上缺少 CSS 类并且`SPAN`.

在每个站点的表单中输入一个无效的 SSN 并提交，看看是否得到相同的结果。

# visual-studio - 如何在 Visual Studio 的预构建步骤中终止可能不存在的进程？

> ID：15748355
> 
> 赞同：16
> 
> 时间：2013-04-01T17:35:24.147
> 
> 标签：visual-studio, command-line, kill-process, prebuild, xaml-designer

问题是如果这个过程不存在，构建就会失败。我试着写这样的东西

```
tasklist /nh /fi "imagename eq XDesProc.exe" | find /i "XDesProc.exe" && (
TASKKILL /F /IM "XDesProc.exe"
) || (
echo XAML designer is not running
) 
```

但 ERRORLEVEL 也等于 1，如果 XDesProc.exe 未运行，则 bild 失败。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-01T18:01:52.673

您可以对 PID 使用条件测试来避免这种情况：

```
 taskkill /f /fi "pid gt 0" /im xdesproc.exe 
```

# c++ - 堆和类析构函数

> ID：15748370
> 
> 赞同：0
> 
> 时间：2013-04-01T17:36:08.133
> 
> 标签：c++, class, heap-memory, destructor

我的代码有问题。我收到 BLOCK_TYPE_IS_VALID 错误...我知道 new 和 delete 有问题，但我找不到它。我有一个带有这些功能的 myString 类：

```
 //constructors and destructors
myString::myString() {
    this->string_ = NULL;
    this->length = 0;

    cout << "created " << "NULL" << endl;
}

myString::myString(char a[]) {
    int i;
    for (i=0; a[i]!=NULL; i++);
    this->length = i;

    int j=0;
    while(pow(2,j)<i)
        j++;

    this->string_ = new char [(int)pow(2,j)];
    for (int i=0; i<this->length; i++)
        this->string_[i] = a[i];

    cout << "created " << this->string_ << endl;
}

myString::~myString() {
    cout << "deleteing " << this->string_ << endl;
    if (this->string_ != NULL)
        delete [] this->string_;
} 
```

当我运行这个

```
myString a("aaa");
myString b("bbbb");
myString c;
c = a + b;
cout << c.get_lenght() << endl;
cout << c.get_string() << endl; 
```

我在“c = a+b”行中得到错误，然后程序停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:55:02.500

您需要为您的类定义一个[复制构造函数](http://en.wikipedia.org/wiki/Copy_constructor)和[赋值运算符](http://en.wikipedia.org/wiki/Assignment_operator_%28C++%29)。

```
myString::myString( const myString& );
myString& operator=( const myString& ); 
```

否则，你就违反了[三原则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

这段代码...

```
c = a + b; 
```

可能会产生暂时`myString`持有的价值`a + b`。

默认生成的复制和赋值实现将给出与**临时对象**`c` **相同的`string_`**指针。

当运行这些字符串中的任何一个的析构函数时，另一个字符串将有一个悬空指针。

*巧合的是，这段代码：*

```
if (this->string_ != NULL)
    delete [] this->string_; 
```

*永远不会采取不同的行动，而不是简单地：*

```
delete [] this->string_; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:57:00.463

你没有显示类定义，但我猜你没有遵循[三规则](https://stackoverflow.com/questions/4172722)。

如果没有正确实现的复制构造函数和复制赋值运算符，就不可能安全地复制对象。默认实现将简单地复制指针（和其他成员变量），让两个副本在其析构函数中删除相同的内存块。

最简单的解决方案是使用旨在为您管理内存的类。`std::string`或者`std::vector<char>`在这里是理想的。

假设您有充分的理由自己管理内存，您将需要以下内容：

```
// Copy constructor
myString(myString const & other) :
    string_(new char[other.length]),
    length(other.length)
{
    std::copy(other.string_, other.string_+length, string_);
}

// Simple assignment operator
// For bonus points (and a strong exception guarantee), use the copy-and-swap idiom instead
myString & operator=(myString const & other) {
    if (this != &other) {
        delete [] string_; // No need to check for NULL (here or in the destructor)
        string_ = new char[other.length];
        length = other.length;
        std::copy(other.string_, other.string_+length, string_);
    }
    return *this;
} 
```

在 C++11 中，为了获得更多奖励积分，还可以考虑提供移动构造函数和赋值运算符。这些只需要修改指针，所以会比复制效率高得多。

# prestashop - Prestashop 男/女开关

> ID：15748373
> 
> 赞同：0
> 
> 时间：2013-04-01T17:36:18.030
> 
> 标签：prestashop

只是一个小问题

我想在网站顶部添加一个切换按钮，允许用户更改 GENDER

举个例子：

我有这样的架构：

```
CAT1
 SUBCAT1
  MEN
   ARTICLE1
   ARTICLE2
   ARTICLE3
  WOMEN
   ARTICLE1
   ARTICLE2
   ARTICLE3
SUBCAT2 
```

ETC...

我怎么能做到这一点？还是您认为我应该采取其他方式？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:21:34.840

每个性别的文章基本相同吗？还是它们完全不同？我访问的大多数网店，男性和女性的文章大多不同，通常在常规类别菜单中进行选择。但是如果文章都是一样的，只是属性略有不同，我想你的想法是有道理的。在后一种情况下，最简单且干扰最小的方法是创建具有属性`men`和的产品`women`，这将为您提供一个包含产品性别选择的下拉列表。如果您需要比这更复杂的东西，最简单的方法可能是为您想要打开的页面编辑主题模板。“页面参数”只是指向相应其他性别类别的链接。

# javascript - 需要帮助 - 地图无法在 JQuery UI 选项卡中正确加载 - 不是重复的

> ID：15748374
> 
> 赞同：2
> 
> 时间：2013-04-01T17:36:32.240
> 
> 标签：javascript, jquery-ui, google-maps-api-3, jquery-ui-tabs

**其他帖子中的“答案”都没有解决我的问题。请阅读我的帖子并尝试引导我朝着正确的方向前进**

***编辑 - 编辑 - 编辑***

***我已更新 java 脚本以包含推荐的功能***

***我在这里为那些不喜欢 jsfiddle 的人提供了 HTML***

我在这里阅读了大量的问题和答案，但我无法让我的 Google 地图正确加载到调用它的 JQueryUI 选项卡中。

我知道必须先加载地图，但我无法让选项卡加载然后返回主页选项卡。我尝试了左偏技术，但无济于事。

我需要帮助。一套新的眼睛会非常有帮助。

任何帮助将不胜感激，因为我在这个项目上远远落后。

请查看下面引用的 jsfiddle，并告诉我哪里出错了。我已经筋疲力尽了，真的可以对此进行一些干预。你们中的一个 Java/jqueryui 大师肯定可以通过一个快速的小高峰看到我哪里出错了。

问题出在***位置***选项卡上

jsfiddle - [http://jsfiddle.net/hughesjoseph/hNKPY/](http://jsfiddle.net/hughesjoseph/hNKPY/)

测试站点[http://l2technotes.dyndns.org](http://l2technotes.dyndns.org)

如果您转到地址/#tabs-4，则正确加载

**完整的 Java 脚本**

```
 (function (mapDemo, $, undefined) {
    mapDemo.Directions = (function () {
        function _Directions() {
            var map,
            directionsService, directionsDisplay,
            autoSrc, autoDest, pinA, pinB,

            markerA = new google.maps.MarkerImage('images/car.png'),
                markerB = new google.maps.MarkerImage('images/gmaplogo.png'),

            // Caching the Selectors
                $Selectors = {
                    mapCanvas: jQuery('#mapCanvas')[0],
                    dirPanel: jQuery('#directionsPanel'),
                    dirInputs: jQuery('.directionInputs'),
                    dirSrc: jQuery('#dirSource'),
                    dirDst: jQuery('#dirDestination'),
                    getDirBtn: jQuery('#getDirections'),
                    dirSteps: jQuery('#directionSteps'),
                    paneToggle: jQuery('#paneToggle'),
                    useGPSBtn: jQuery('#useGPS'),
                    paneResetBtn: jQuery('#paneReset')
                },

                autoCompleteSetup = function () {
                    autoSrc = new google.maps.places.Autocomplete($Selectors.dirSrc[0]);
                    autoDest = new google.maps.places.Autocomplete($Selectors.dirDst[0]);
                }, // autoCompleteSetup Ends

                directionsSetup = function () {
                    directionsService = new google.maps.DirectionsService();
                    directionsDisplay = new google.maps.DirectionsRenderer({
                        suppressMarkers: true
                    });

                    directionsDisplay.setPanel($Selectors.dirSteps[0]);
                }, // direstionsSetup Ends

                trafficSetup = function () {
                    // Creating a Custom Control and appending it to the map
                    var controlDiv = document.createElement('div'),
                        controlUI = document.createElement('div'),
                        trafficLayer = new google.maps.TrafficLayer();

                    jQuery(controlDiv).addClass('gmap-control-container').addClass('gmnoprint');
                    jQuery(controlUI).text('Traffic').addClass('gmap-control');
                    jQuery(controlDiv).append(controlUI);

                    // Traffic Btn Click Event
                    google.maps.event.addDomListener(controlUI, 'click', function () {
                        if (typeof trafficLayer.getMap() == 'undefined' || trafficLayer.getMap() === null) {
                            jQuery(controlUI).addClass('gmap-control-active');
                            trafficLayer.setMap(map);
                        } else {
                            trafficLayer.setMap(null);
                            jQuery(controlUI).removeClass('gmap-control-active');
                        }
                    });
                    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(controlDiv);
                }, // trafficSetup Ends

                mapSetup = function () {
                    map = new google.maps.Map($Selectors.mapCanvas, {
                        zoom: 16,
                        center: new google.maps.LatLng(32.565243, -97.130531),

                        mapTypeControl: true,
                        mapTypeControlOptions: {
                            style: google.maps.MapTypeControlStyle.DEFAULT,
                            position: google.maps.ControlPosition.TOP_RIGHT
                        },

                        panControl: true,
                        panControlOptions: {
                            position: google.maps.ControlPosition.RIGHT_TOP
                        },

                        zoomControl: true,
                        zoomControlOptions: {
                            style: google.maps.ZoomControlStyle.LARGE,
                            position: google.maps.ControlPosition.RIGHT_TOP
                        },

                        scaleControl: true,
                        streetViewControl: true,
                        overviewMapControl: true,

                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    });

                    var marker1 = new google.maps.Marker({
                        position: new google.maps.LatLng(32.565243, -97.130531),
                        map: map,
                        icon: markerB
                    });

                    autoCompleteSetup();
                    directionsSetup();
                    trafficSetup();
                }, // mapSetup Ends 

                directionsRender = function (source, destination) {
                    $Selectors.dirSteps.find('.msg').hide();
                    directionsDisplay.setMap(map);

                    var request = {
                        origin: source,
                        destination: destination,
                        provideRouteAlternatives: false,
                        travelMode: google.maps.DirectionsTravelMode.DRIVING
                    };

                    directionsService.route(request, function (response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {

                            directionsDisplay.setDirections(response);

                            var _route = response.routes[0].legs[0];

                            pinA = new google.maps.Marker({
                                position: _route.start_location,
                                map: map,
                                icon: markerA
                            });
                        }
                    });
                }, // directionsRender Ends

                fetchAddress = function (p) {
                    var Position = new google.maps.LatLng(p.coords.latitude, p.coords.longitude),
                        Locater = new google.maps.Geocoder();

                    Locater.geocode({
                        'latLng': Position
                    }, function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            var _r = results[0];
                            $Selectors.dirSrc.val(_r.formatted_address);
                        }
                    });
                }, // fetchAddress Ends

                invokeEvents = function () {
                    // Get Directions
                    $Selectors.getDirBtn.on('click', function (e) {
                        e.preventDefault();
                        var src = $Selectors.dirSrc.val(),
                            dst = $Selectors.dirDst.val();

                        directionsRender(src, dst);
                    });

                    // Reset Btn
                    $Selectors.paneResetBtn.on('click', function (e) {
                        $Selectors.dirSteps.html('');
                        $Selectors.dirSrc.val('');
                        $Selectors.dirDst.val('');

                        if (pinA) pinA.setMap(null);
                        if (pinB) pinB.setMap(null);

                        directionsDisplay.setMap(null);
                    });

                    // Toggle Btn
                    $Selectors.paneToggle.toggle(function (e) {
                        $Selectors.dirPanel.animate({
                            'left': '-=305px'
                        });
                        jQuery(this).html('&gt;');
                    }, function () {
                        $Selectors.dirPanel.animate({
                            'left': '+=305px'
                        });
                        jQuery(this).html('&lt;');
                    });

                    // Use My Location / Geo Location Btn
                    $Selectors.useGPSBtn.on('click', function (e) {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(function (position) {
                                fetchAddress(position);
                            });
                        }
                    });
                }, //invokeEvents Ends 

                _init = function () {
                    mapSetup();
                    invokeEvents();
                }; // _init Ends

            this.init = function () {
                _init();
                return this; // Refers to: mapDemo.Directions
            };
            return this.init(); // Refers to: mapDemo.Directions.init()
        } // _Directions Ends
        return new _Directions(); // Creating a new object of _Directions rather than a function
    } ()); // mapDemo.Directions Ends
})(window.mapDemo = window.mapDemo || {}, jQuery);
var mapFirstClick = false;
$("#maptab").click(function () {
    mapFirstClick || setTimeout(function () {
        google.maps.event.trigger(map, 'resize');
        mapFirstClick = true;
        map.setCenter(32.565243, -97.130531);
    }, 250);
});
function PrintElem(elem) {
    Popup($(elem).html());
}
function Popup(data) {
    var mywindow = window.open('', 'my div', 'height=600,width=800');
    mywindow.document.write('<html><head><title>Driving Directions to Electrolysis by Bridgett</title>');
    mywindow.document.write('</head><body >');
    mywindow.document.write(data);
    mywindow.document.write('</body></html>');
    mywindow.print();
    mywindow.close();
    return true;
}
$(function () {
    $("#tabs").tabs();
});
$(function () {
    $("#accordion").accordion({
        collapsible: true,
        active: false,
        heightStyle: "content"
    });
}); 
```

**相关的 HTML**

```
<html>

    <head>
        <meta charset="utf-8">
        <title>Electrolysis by Bridgett</title>
        <!-- Favorite Icon -->
        <link rel="shortcut icon" href="images/beLogoColor3D.png" />
        <link href="css/style.css" rel="stylesheet" type="text/css" />
    </head>

    <body onload: "#maptab";>
        <div id="tabs">
            <ul style="border:3px solid green">
                <li class="myMenu"><a href="#tabs-4" onclick="maptab"><img height="20px" src="images/map.png" alt="" class="img center" /> Location</a>
                </li>
            </ul>
            <div id="tabs-4">
                <div class="myDirections" style="width:19%;">
                    <div>
                        <form>
                            <p>
                                <label class="mytxt">Driving From :</label>
                                <br />
                                <input type="text" value="" id="dirSource" style="width:98%;" />
                            </p>
                            <input type="hidden" value="1003 E. Broad St., 76063" id="dirDestination" />
                            <div class="mybutton"><a href="#getDirections" id="getDirections">Get Directions to<br />Electrolysis by Bridgett</a>
                            </div>
                            <center>
                                <input type="button" value="Print Directions" onclick="PrintElem('#directionSteps')" />
                            </center>
                        </form>
                    </div>
                    <div id="directionSteps">
                        <center>
                            <p class="msg">Step by Step Directions Appear Here</p>
                        </center>
                    </div>
                </div>
                <div class="myMap" style="width:78%;">
                    <div id="mapCanvas" style="width:100%;height:550px"></div>
                </div>
            </div>
        </div>
    </body>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places" type="text/javascript"></script>
                <script src="js/jquery-1.9.0.js" type="text/javascript"></script>
        <script src="js/jquery-ui-1.10.0.custom.js" type="text/javascript"></script>
    <script src="js/sample.js" type="text/javascript"></script>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:26:00.043

我也遇到过这个问题：

```
google.maps.event.trigger(map, 'resize'); 
```

触发此选项卡褪色时（250毫秒后默认）。这段代码对我有用：

```
 var mapFirstClick = false;
        $("#tabMap").click(function() {
            mapFirstClick || setTimeout(function() {
                google.maps.event.trigger(map, 'resize');
                mapFirstClick = true;
                map.setCenter(latLng);
            }, 250);
        }); 
```

# codeigniter - 在 CodeIgniter 应用程序中导航和更新内容

> ID：15748378
> 
> 赞同：0
> 
> 时间：2013-04-01T17:36:49.827
> 
> 标签：codeigniter, menu

我正在将 CI 与 Twitter Bootstrap 一起用于一个基本站点：

在我的主布局视图中，这是主要内容区域的设置方式：

```
 <div class="container-fluid"> 
        <div class="row-fluid">
            <div class="span1"></div>
            <div class="span8">
                <?php echo $this->load->view($subview); ?>
            </div>
            <div class="span3" id="sidebar">
                <?php echo $this->load->view($this->global_data['sidebarview']); ?>
            </div>
        </div>
    </div> 
```

一个侧边栏视图是这样的：

```
<div class="container-fluid" id="sidebar-about">  
    <div class="well sidebar-nav">  
        <ul class="nav nav-list">  
            <li class="nav-header"><i class="icon-info-sign"></i>&nbsp;More about us</li>  
            <li class="active"><a href="about">Who are we?</a></li>  
            <li><a href="#">Why we did it?</a></li>  
            <li><a href="#">What we promise?</a></li>  
            <li class="nav-header"><i class="icon-asterisk"></i>&nbsp;Services</li>  
            <li><a href="#">Free</a></li>  
            <li><a href="#">Premium</a></li>  
        </ul>  
    </div><!--/.well -->  
</div><!--/span--> 
```

这个侧边栏中的每个链接我想从我的主布局中用 class="span8" 更新 div。

我该怎么做？我应该使用 ajax 调用来更新 span8 div 的内容吗？或者只是在关于控制器中创建更多方法？

# php - Codeigniter 检索 Chargify 返回参数

> ID：15748380
> 
> 赞同：0
> 
> 时间：2013-04-01T17:36:54.990
> 
> 标签：php, codeigniter

将 Chargify 与 Codeigniter 框架一起使用。完成 Chargify 注册后，可以使用参数设置返回 URL。看来这些参数只能返回?id=123&ref=321。使用 Codeigniter，我如何获取这些返回参数？

```
http://www.website.com/confirmation?id=3163255&ref=5159c58278a1f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:16:47.573

默认情况下，CodeIgniter 会破坏`$_GET`通常用于访问 URL 中的参数的变量。

此行将解析 URL 并`$_GET`使用 URL 的参数填充数组。当您想`$_GET`在 CodeIgniter 项目中选择性地使用数组时，它很有用，而不是必须启用 CodeIgniter 的*查询字符串*，这将是全局且持续活动的。

```
parse_str(substr(strrchr($_SERVER['REQUEST_URI'], "?"), 1), $_GET); 
```

然后可以像通常访问数组一样访问它，例如：

```
$id  = $_GET['id'];
$ref = $_GET['ref']; 
```

# python - 基本的 Python 重复练习

> ID：15748382
> 
> 赞同：-4
> 
> 时间：2013-04-01T17:37:07.930
> 
> 标签：python

当我遇到这个问题时，我正在尝试学习 Python。我不是要你为我回答这个问题，我只是需要一些帮助。**注意：我只被允许使用循环和 if 语句等。什么都没有。**我不明白我可以在哪里使用循环来创建这个程序或所需的公式。

你的父母需要买一辆新车，他们正试图决定是否购买混合动力车。与非混合动力汽车相比，混合动力汽车产生的二氧化碳排放量更少，燃油效率更高。然而，混合动力汽车也比非混合动力汽车花费更多的钱。帮助您的父母决定购买哪种类型的车辆（严格按照财务成本而不考虑环境效益）。典型的家庭每年行驶 20,000 公里，目前汽油价格为 1.30 美元/升。

允许用户输入混合动力和非混合动力车辆的成本以及这些车辆的综合燃油效率。此外，允许用户输入他们每年驾驶的平均公里数（注意：平均为 20000 公里/年）。然后输出两辆车的成本相等需要多少年的所有权。假设汽油价格保持在 1.30 美元/升不变。

显然，gas 的成本会逐年增加（这称为通货膨胀）。将天然气价格每年上涨 3%（即年通货膨胀率为 3%）的想法纳入您的计算中。

**这是我到目前为止所拥有的：**

```
count=0
total=0
gas=1.30
avgkm=20000

normalcost=input("Please enter the cost of the non-hybrid vehicle: ")
hybridcost=input("Please enter the cost of the hybrid vehicle: ")
fueleff=input("Please enter the combined fuel effiency of both vehicles: ") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:53:12.753

我会在不提供太多代码的情况下回答（毕竟，这是你的作业，不是我的）。

第一：您的问题是关于汽车的成本（包括燃料成本）将与另一辆车的成本相等（或相似）的年限。因此，您需要三样东西：一个年份计数器和两个应计成本：

```
i = 0              # The year counter
cost_a = price_a   # The accrued cost of car A: It starts with the cost of the car
cost_b = price_b   # The accrued cost of car B: It starts with the cost of the car 
```

然后，您需要每年添加成本，因此您需要一个执行三件事的循环：增加年份计数，并在每次迭代中将成本添加到每辆汽车。所以，你需要问自己这些问题：

1.  你需要为每辆车增加多少成本？
2.  你的“停止”标准是什么？换句话说：你什么时候停止迭代？

对于增量，在每次迭代中，您需要执行以下操作：

```
i = i + 1    # Add a year
cost_a = cost_a + year_costs_a    # The increment of costs for car A during the year
cost_b = cost_b + year_costs_b    # The increment of costs for car B during the year 
```

最后：通货膨胀。请记住，通货膨胀每年都会“改变”价格，因此：

```
price = price * (1 + inflation_rate) 
```

当然，您需要使用适当的值初始化价格才能有意义。

* * *

总而言之，要解决这个问题（或任何其他编程问题），您需要将其“拆分”为小任务（或步骤），然后尝试将它们放在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:00:54.607

你有两辆车，costing`hybrid_cost`和`standard_cost`。每年，每辆车都会行驶一段距离。一年的总成本是`km_driven * liters_per_km * dollars_per_liter`。`dollars_per_liter`每年增加 3%，这意味着对于每一年*i*，`price = base_price * (1 + 0.03 * i)`.

混合动力从一开始的成本`hybrid_cost - standard_cost`开始，并增加了成本，而标准从零开始。你认为终点会是什么？

编程的一个关键部分是*函数*，其中可以定义小型通用计算以使用特定输入运行，以及*循环*，执行指定操作一定次数，然后在满足一个或多个条件时停止。希望这足以让你开始......

# c# - 将 Linq to CRM 与早期绑定实体一起使用时出错

> ID：15748383
> 
> 赞同：1
> 
> 时间：2013-04-01T17:37:13.103
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm, crm

我正在 CRM 2011 中编写一个插件。我正在尝试使用 Linq to CRM 来检索实体记录，这是代码片段：

```
Entity legalcase = new Entity("lgl_legalcase");
legalcase = legalDataContext.Lgl_legalcaseSet.FirstOrDefault(l => l.Lgl_legalcaseId == legalCaseGUID); 
```

它在这条线上抛出一个错误，说它不能从类型 Microsoft.Xrm.Sdk.Entity 转换为类型 Legal.Entities.Lgl_legalcase。我已经验证了这个插件在使用 Retrieve 方法而不是 LINQ 语法时可以正常工作，但我想让它与 LINQ 一起工作。有谁知道为什么这会引发错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:40:28.083

你需要投：

```
Entity legalcase = new Entity("lgl_legalcase")
legalcase = (Entity)legalDataContext.Lgl_legalcaseSet.FirstOrDefault(l => l.Lgl_legalcaseId == legalCaseGUID); 
```

或将 legalcase 定义为`Lgl_legalcase`类型

```
Lgl_legalcase legalcase = new Lgl_legalcase();
legalcase = legalDataContext.Lgl_legalcaseSet.FirstOrDefault(l => l.Lgl_legalcaseId == legalCaseGUID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:13:33.407

我刚刚重构了我的代码，使代理现在位于我的插件引用的库中；重构后，我收到此错误消息。

在网上搜索了 20 秒后，我找到了以下建议的修复：添加`[assembly: Microsoft.Xrm.Sdk.Client.ProxyTypeAssemblyAttribute()]`到插件程序集中

我的虚拟机正在运行，不允许我复制和粘贴，否则，我将分享来自 Microsoft 社交的链接，并归功于我从中复制此内容的人。

# events - 如何在python中捕获打印机事件

> ID：15748386
> 
> 赞同：13
> 
> 时间：2013-04-01T17:37:34.407
> 
> 标签：events, printing, python-3.x, ctypes, pywin32

我想在打印机开始打印时捕捉信号。如果您告诉我如何获取将要打印的文档的路径，那就太好了。

`pywin32print`看起来很有用，但我不知道如何使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T21:58:11.967

要收到新打印作业的通知，您可以使用[`FindFirstPrinterChangeNotification`](http://msdn.microsoft.com/en-us/library/dd162722)、`FindNextPrinterChangeNotification`和 kernel32 中的等待功能，例如[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/ms687032).

这是一个设置过滤器以等待本地打印服务器上的新打印作业的示例。`JOB_NOTIFY_FIELD_DOCUMENT`如果你想从结构中获得价值，还有很多工作要做[`PRINTER_NOTIFY_INFO_DATA`](http://msdn.microsoft.com/en-us/library/dd162854)。

**编辑：** Malik Brahimi 要求提供有关获取打印作业 ID 的信息，因此我决定将其充实为一个更完整的示例。新代码添加了一个`wait_for_print_job_info`函数，该函数等待使用该`PRINTER_NOTIFY_OPTIONS`结构指定的通知。Windows 在上述结构的数组中返回数据，每个结构都有给定数据`PRINTER_NOTIFY_INFO_DATA`的打印作业。`Id`

数据必须通过调用来释放`FreePrinterNotifyInfo`，我在类的`__del__`终结器中自动处理`PPRINTER_NOTIFY_INFO_GC`。

```
import ctypes
from ctypes import wintypes

kernel32 = ctypes.WinDLL('kernel32.dll', use_last_error=True)
winspool = ctypes.WinDLL('winspool.drv', use_last_error=True)

# define LPHANDLE, PDWORD, and PWORD for Python 2
if not hasattr(wintypes, 'LPHANDLE'):
    setattr(wintypes, 'LPHANDLE', ctypes.POINTER(wintypes.HANDLE))
if not hasattr(wintypes, 'PDWORD'):
    setattr(wintypes, 'PDWORD', ctypes.POINTER(wintypes.DWORD))
if not hasattr(wintypes, 'PWORD'):
    setattr(wintypes, 'PWORD', ctypes.POINTER(wintypes.WORD))

INFINITE = -1
WAIT_OBJECT_0 = 0x00000000
WAIT_TIMEOUT  = 0x00000102
WAIT_FAILED   = 0xFFFFFFFF
INVALID_HANDLE_VALUE = wintypes.HANDLE(-1).value

PRINTER_CHANGE_ADD_PRINTER               = 0x00000001
PRINTER_CHANGE_SET_PRINTER               = 0x00000002
PRINTER_CHANGE_DELETE_PRINTER            = 0x00000004
PRINTER_CHANGE_FAILED_CONNECTION_PRINTER = 0x00000008
PRINTER_CHANGE_PRINTER                   = 0x000000FF

PRINTER_CHANGE_ADD_JOB                   = 0x00000100
PRINTER_CHANGE_SET_JOB                   = 0x00000200
PRINTER_CHANGE_DELETE_JOB                = 0x00000400
PRINTER_CHANGE_WRITE_JOB                 = 0x00000800
PRINTER_CHANGE_JOB                       = 0x0000FF00

PRINTER_CHANGE_ADD_FORM                  = 0x00010000
PRINTER_CHANGE_SET_FORM                  = 0x00020000
PRINTER_CHANGE_DELETE_FORM               = 0x00040000
PRINTER_CHANGE_FORM                      = 0x00070000

PRINTER_CHANGE_ADD_PORT                  = 0x00100000
PRINTER_CHANGE_CONFIGURE_PORT            = 0x00200000
PRINTER_CHANGE_DELETE_PORT               = 0x00400000
PRINTER_CHANGE_PORT                      = 0x00700000

PRINTER_CHANGE_ADD_PRINT_PROCESSOR       = 0x01000000
PRINTER_CHANGE_DELETE_PRINT_PROCESSOR    = 0x04000000
PRINTER_CHANGE_PRINT_PROCESSOR           = 0x07000000
PRINTER_CHANGE_SERVER                    = 0x08000000 # NT 6.1+

PRINTER_CHANGE_ADD_PRINTER_DRIVER        = 0x10000000
PRINTER_CHANGE_SET_PRINTER_DRIVER        = 0x20000000
PRINTER_CHANGE_DELETE_PRINTER_DRIVER     = 0x40000000
PRINTER_CHANGE_PRINTER_DRIVER            = 0x70000000

PRINTER_CHANGE_ALL                       = 0x7F77FFFF
PRINTER_CHANGE_TIMEOUT                   = 0x80000000

PRINTER_NOTIFY_CATEGORY_ALL = 0x00
PRINTER_NOTIFY_CATEGORY_3D  = 0x01

PRINTER_NOTIFY_TYPE = 0x00
JOB_NOTIFY_TYPE     = 0x01

PRINTER_NOTIFY_FIELD_SERVER_NAME            = 0x00 # not supported
PRINTER_NOTIFY_FIELD_PRINTER_NAME           = 0x01
PRINTER_NOTIFY_FIELD_SHARE_NAME             = 0x02
PRINTER_NOTIFY_FIELD_PORT_NAME              = 0x03
PRINTER_NOTIFY_FIELD_DRIVER_NAME            = 0x04
PRINTER_NOTIFY_FIELD_COMMENT                = 0x05
PRINTER_NOTIFY_FIELD_LOCATION               = 0x06
PRINTER_NOTIFY_FIELD_DEVMODE                = 0x07
PRINTER_NOTIFY_FIELD_SEPFILE                = 0x08
PRINTER_NOTIFY_FIELD_PRINT_PROCESSOR        = 0x09
PRINTER_NOTIFY_FIELD_PARAMETERS             = 0x0A
PRINTER_NOTIFY_FIELD_DATATYPE               = 0x0B
PRINTER_NOTIFY_FIELD_SECURITY_DESCRIPTOR    = 0x0C
PRINTER_NOTIFY_FIELD_ATTRIBUTES             = 0x0D
PRINTER_NOTIFY_FIELD_PRIORITY               = 0x0E
PRINTER_NOTIFY_FIELD_DEFAULT_PRIORITY       = 0x0F
PRINTER_NOTIFY_FIELD_START_TIME             = 0x10
PRINTER_NOTIFY_FIELD_UNTIL_TIME             = 0x11
PRINTER_NOTIFY_FIELD_STATUS                 = 0x12
PRINTER_NOTIFY_FIELD_STATUS_STRING          = 0x13 # not supported
PRINTER_NOTIFY_FIELD_CJOBS                  = 0x14
PRINTER_NOTIFY_FIELD_AVERAGE_PPM            = 0x15
PRINTER_NOTIFY_FIELD_TOTAL_PAGES            = 0x16 # not supported
PRINTER_NOTIFY_FIELD_PAGES_PRINTED          = 0x17 # not supported
PRINTER_NOTIFY_FIELD_TOTAL_BYTES            = 0x18 # not supported
PRINTER_NOTIFY_FIELD_BYTES_PRINTED          = 0x19 # not supported
PRINTER_NOTIFY_FIELD_OBJECT_GUID            = 0x1A
PRINTER_NOTIFY_FIELD_FRIENDLY_NAME          = 0x1B # NT 6.0+
PRINTER_NOTIFY_FIELD_BRANCH_OFFICE_PRINTING = 0x1C # NT 6.2+

JOB_NOTIFY_FIELD_PRINTER_NAME        = 0x00
JOB_NOTIFY_FIELD_MACHINE_NAME        = 0x01
JOB_NOTIFY_FIELD_PORT_NAME           = 0x02
JOB_NOTIFY_FIELD_USER_NAME           = 0x03
JOB_NOTIFY_FIELD_NOTIFY_NAME         = 0x04
JOB_NOTIFY_FIELD_DATATYPE            = 0x05
JOB_NOTIFY_FIELD_PRINT_PROCESSOR     = 0x06
JOB_NOTIFY_FIELD_PARAMETERS          = 0x07
JOB_NOTIFY_FIELD_DRIVER_NAME         = 0x08
JOB_NOTIFY_FIELD_DEVMODE             = 0x09
JOB_NOTIFY_FIELD_STATUS              = 0x0A
JOB_NOTIFY_FIELD_STATUS_STRING       = 0x0B
JOB_NOTIFY_FIELD_SECURITY_DESCRIPTOR = 0x0C # not supported
JOB_NOTIFY_FIELD_DOCUMENT            = 0x0D
JOB_NOTIFY_FIELD_PRIORITY            = 0x0E
JOB_NOTIFY_FIELD_POSITION            = 0x0F
JOB_NOTIFY_FIELD_SUBMITTED           = 0x10
JOB_NOTIFY_FIELD_START_TIME          = 0x11
JOB_NOTIFY_FIELD_UNTIL_TIME          = 0x12
JOB_NOTIFY_FIELD_TIME                = 0x13
JOB_NOTIFY_FIELD_TOTAL_PAGES         = 0x14
JOB_NOTIFY_FIELD_PAGES_PRINTED       = 0x15
JOB_NOTIFY_FIELD_TOTAL_BYTES         = 0x16
JOB_NOTIFY_FIELD_BYTES_PRINTED       = 0x17
JOB_NOTIFY_FIELD_REMOTE_JOB_ID       = 0x18

PRINTER_NOTIFY_OPTIONS_REFRESH = 0x01
PRINTER_NOTIFY_INFO_DISCARDED  = 0x01

JOB_STATUS_PAUSED            = 0x00000001
JOB_STATUS_ERROR             = 0x00000002
JOB_STATUS_DELETING          = 0x00000004
JOB_STATUS_SPOOLING          = 0x00000008
JOB_STATUS_PRINTING          = 0x00000010
JOB_STATUS_OFFLINE           = 0x00000020
JOB_STATUS_PAPEROUT          = 0x00000040
JOB_STATUS_PRINTED           = 0x00000080
JOB_STATUS_DELETED           = 0x00000100
JOB_STATUS_BLOCKED_DEVQ      = 0x00000200
JOB_STATUS_USER_INTERVENTION = 0x00000400
JOB_STATUS_RESTART           = 0x00000800
JOB_STATUS_COMPLETE          = 0x00001000
JOB_STATUS_RETAINED          = 0x00002000
JOB_STATUS_RENDERING_LOCALLY = 0x00004000
JOB_STATUS_ALL               = 0x00007FFF

JOB_STATUS_STRING = {
    JOB_STATUS_PAUSED:   'PAUSED',
    JOB_STATUS_ERROR:    'ERROR',
    JOB_STATUS_DELETING: 'DELETING',
    JOB_STATUS_SPOOLING: 'SPOOLING',
    JOB_STATUS_PRINTING: 'PRINTING',
    JOB_STATUS_OFFLINE:  'OFFLINE',
    JOB_STATUS_PAPEROUT: 'PAPEROUT',
    JOB_STATUS_PRINTED:  'PRINTED',
    JOB_STATUS_DELETED:  'DELETED',
    JOB_STATUS_BLOCKED_DEVQ: 'BLOCKED_DEVQ',
    JOB_STATUS_USER_INTERVENTION: 'USER_INTERVENTION',
    JOB_STATUS_RESTART:  'RESTART',
    JOB_STATUS_COMPLETE: 'COMPLETE',
    JOB_STATUS_RETAINED: 'RETAINED',
    JOB_STATUS_RENDERING_LOCALLY: 'RENDERING_LOCALLY'}

class SYSTEMTIME(ctypes.Structure):
    _fields_ = (('wYear',         wintypes.WORD),
                ('wMonth',        wintypes.WORD),
                ('wDayOfWeek',    wintypes.WORD),
                ('wDay',          wintypes.WORD),
                ('wHour',         wintypes.WORD),
                ('wMinute',       wintypes.WORD),
                ('wSecond',       wintypes.WORD),
                ('wMilliseconds', wintypes.WORD))
    @property
    def as_datetime(self):
        from datetime import datetime
        return datetime(self.wYear, self.wMonth, self.wDay,
                        self.wHour, self.wMinute, self.wSecond,
                        self.wMilliseconds * 1000)

class PRINTER_NOTIFY_OPTIONS_TYPE(ctypes.Structure):
    _fields_ = (('Type',      wintypes.WORD),
                ('Reserved0', wintypes.WORD),
                ('Reserved1', wintypes.DWORD),
                ('Reserved2', wintypes.DWORD),
                ('Count',     wintypes.DWORD),
                ('_pFields',  wintypes.PWORD))
    def __init__(self, Type=JOB_NOTIFY_TYPE, pFields=None):
        super(PRINTER_NOTIFY_OPTIONS_TYPE, self).__init__(Type)
        if pFields is not None:
            self.pFields = pFields
    @property
    def pFields(self):
        ptr_t = ctypes.POINTER(wintypes.WORD * self.Count)
        return ptr_t(self._pFields.contents)[0]
    @pFields.setter
    def pFields(self, pFields):
        self.Count = len(pFields)
        self._pFields = pFields

PPRINTER_NOTIFY_OPTIONS_TYPE = ctypes.POINTER(PRINTER_NOTIFY_OPTIONS_TYPE)

class PRINTER_NOTIFY_OPTIONS(ctypes.Structure):
    _fields_ = (('Version', wintypes.DWORD),
                ('Flags',   wintypes.DWORD),
                ('Count',   wintypes.DWORD),
                ('_pTypes', PPRINTER_NOTIFY_OPTIONS_TYPE))
    def __init__(self, Flags=0, pTypes=None):
        super(PRINTER_NOTIFY_OPTIONS, self).__init__(2, Flags)
        if pTypes is not None:
            self.pTypes = pTypes
    @property
    def pTypes(self):
        ptr_t = ctypes.POINTER(PRINTER_NOTIFY_OPTIONS_TYPE * self.Count)
        return ptr_t(self._pTypes.contents)[0]
    @pTypes.setter
    def pTypes(self, types):
        if isinstance(types, PRINTER_NOTIFY_OPTIONS_TYPE):
            self.Count = 1
            self._pTypes = ctypes.pointer(types)
        else:
            self.Count = len(types)
            self._pTypes = types

PPRINTER_NOTIFY_OPTIONS = ctypes.POINTER(PRINTER_NOTIFY_OPTIONS)

class PRINTER_NOTIFY_INFO_DATA(ctypes.Structure):
    class _NOTIFY_DATA(ctypes.Union):
        class  _DATA(ctypes.Structure):
            _fields_ = (('cbBuf', wintypes.DWORD),
                        ('pBuf',  wintypes.LPVOID))
        _fields_ = (('adwData', wintypes.DWORD * 2),
                    ('Data',    _DATA))
    _fields_ = (('Type',        wintypes.WORD),
                ('Field',       wintypes.WORD),
                ('Reserved',    wintypes.DWORD),
                ('Id',          wintypes.DWORD),
                ('_NotifyData', _NOTIFY_DATA))
    @property
    def _data_as_string(self):
        if self._NotifyData.Data.pBuf:
            return ctypes.c_wchar_p(self._NotifyData.Data.pBuf).value
        return u""
    @property
    def _data_as_datetime(self):
        if self._NotifyData.Data.pBuf:
            t = SYSTEMTIME.from_address(self._NotifyData.Data.pBuf)
        else:
            t = SYSTEMTIME()
        return t.as_datetime
    @property
    def NotifyData(self):
        if self.Type == JOB_NOTIFY_TYPE:
            if self.Field == JOB_NOTIFY_FIELD_PRINTER_NAME:
                return 'job_printer_name', self._data_as_string
            if self.Field == JOB_NOTIFY_FIELD_MACHINE_NAME:
                return 'job_machine_name', self._data_as_string
            if self.Field == JOB_NOTIFY_FIELD_USER_NAME:
                return 'job_user_name', self._data_as_string
            elif self.Field == JOB_NOTIFY_FIELD_STATUS:
                return 'job_status', self._NotifyData.adwData[0]
            elif self.Field == JOB_NOTIFY_FIELD_DOCUMENT:
                return 'job_document', self._data_as_string
            elif self.Field == JOB_NOTIFY_FIELD_PRIORITY:
                return 'job_priority', self._NotifyData.adwData[0]
            elif self.Field == JOB_NOTIFY_FIELD_POSITION:
                return 'job_position', self._NotifyData.adwData[0]
            elif self.Field == JOB_NOTIFY_FIELD_SUBMITTED:
                return 'job_submitted', self._data_as_datetime
            elif self.Field == JOB_NOTIFY_FIELD_PAGES_PRINTED:
                return 'job_pages_printed', self._NotifyData.adwData[0]
            elif self.Field == JOB_NOTIFY_FIELD_BYTES_PRINTED:
                return 'job_bytes_printed', self._NotifyData.adwData[0]
        # else return a copy of NotifyData
        data = self._NOTIFY_DATA.from_buffer_copy(self._NotifyData)
        if data.Data.pBuf:
            buf_t = ctypes.c_char * data.Data.cbBuf
            buf_src = buf_t.from_address(data.Data.pBuf)
            buf_cpy = buf_t.from_buffer_copy(buf_src)
            buf_ptr = ctypes.c_void_p(ctypes.addressof(buf_cpy))
            data.Data.pBuf = buf_ptr
        return (self.Type, self.Field), data

class PRINTER_NOTIFY_INFO(ctypes.Structure):
    _fields_ = (('Version', wintypes.DWORD),
                ('Flags',   wintypes.DWORD),
                ('Count',   wintypes.DWORD),
                ('_aData',  PRINTER_NOTIFY_INFO_DATA * 1))
    @property
    def aData(self):
        ptr_t = ctypes.POINTER(PRINTER_NOTIFY_INFO_DATA * self.Count)
        return ptr_t(self._aData[0])[0]

PPRINTER_NOTIFY_INFO = ctypes.POINTER(PRINTER_NOTIFY_INFO)
PPPRINTER_NOTIFY_INFO = ctypes.POINTER(PPRINTER_NOTIFY_INFO)

class PPRINTER_NOTIFY_INFO_GC(PPRINTER_NOTIFY_INFO):
    """PRINTER_NOTIFY_INFO * that Windows deallocates"""
    _type_ = PRINTER_NOTIFY_INFO
    _freed = False
    def __del__(self,
                FreePrinterNotifyInfo=winspool.FreePrinterNotifyInfo):
        if self and not self._freed:
            FreePrinterNotifyInfo(self)
            self._freed = True

def check_bool(result, func, args):
    if not result:
        raise ctypes.WinError(ctypes.get_last_error())
    return args

def check_ihv(result, func, args):
    if result == INVALID_HANDLE_VALUE:
        raise ctypes.WinError(ctypes.get_last_error())
    return args

def check_idv(result, func, args):
    if result == WAIT_FAILED:
        raise ctypes.WinError(ctypes.get_last_error())
    return args

winspool.OpenPrinterW.errcheck = check_bool
winspool.OpenPrinterW.argtypes = (
    wintypes.LPWSTR,   # _In_  pPrinterName
    wintypes.LPHANDLE, # _Out_ phPrinter
    wintypes.LPVOID)   # _In_  pDefault

winspool.ClosePrinter.errcheck = check_bool
winspool.ClosePrinter.argtypes = (
    wintypes.HANDLE,) # _In_ hPrinter

winspool.FindFirstPrinterChangeNotification.errcheck = check_ihv
winspool.FindFirstPrinterChangeNotification.restype = wintypes.HANDLE
winspool.FindFirstPrinterChangeNotification.argtypes = (
    wintypes.HANDLE, # _In_ hPrinter
    wintypes.DWORD,  #      fdwFilter
    wintypes.DWORD,  #      fdwOptions
    PPRINTER_NOTIFY_OPTIONS) # _In_opt_ pPrinterNotifyOptions

winspool.FindNextPrinterChangeNotification.errcheck = check_bool
winspool.FindNextPrinterChangeNotification.argtypes = (
    wintypes.HANDLE, # _In_      hChange
    wintypes.PDWORD, # _Out_opt_ pdwChange
    PPRINTER_NOTIFY_OPTIONS, # _In_opt_  pPrinterNotifyOptions
    PPPRINTER_NOTIFY_INFO)   # _Out_opt_ ppPrinterNotifyInfo

winspool.FindClosePrinterChangeNotification.errcheck = check_bool
winspool.FindClosePrinterChangeNotification.argtypes = (
    wintypes.HANDLE,) # _In_ hChange

winspool.FreePrinterNotifyInfo.errcheck = check_bool
winspool.FreePrinterNotifyInfo.argtypes = (
    PPRINTER_NOTIFY_INFO,) # _In_ pPrinterNotifyInfo

kernel32.WaitForSingleObject.errcheck = check_idv
kernel32.WaitForSingleObject.restype = wintypes.DWORD
kernel32.WaitForSingleObject.argtypes = (
    wintypes.HANDLE, # _In_ hHandle
    wintypes.DWORD)  # _In_ dwMilliseconds

def wait_for_print_job(filter=PRINTER_CHANGE_ADD_JOB,
                       timeout=INFINITE,
                       printer_name=None):
    if timeout != INFINITE:
        timeout = int(timeout * 1000)
    hPrinter = wintypes.HANDLE()
    dwChange = wintypes.DWORD()
    winspool.OpenPrinterW(printer_name, ctypes.byref(hPrinter), None)
    try:
        hChange = winspool.FindFirstPrinterChangeNotification(
                    hPrinter, filter, 0, None)
        try:
            if (kernel32.WaitForSingleObject(hChange, timeout) !=
                WAIT_OBJECT_0): return
            winspool.FindNextPrinterChangeNotification(
                hChange, ctypes.byref(dwChange), None, None)
            return dwChange.value
        finally:
            winspool.FindClosePrinterChangeNotification(hChange)
    finally:
        winspool.ClosePrinter(hPrinter)

DEFAULT_FIELDS = (
    JOB_NOTIFY_FIELD_PRINTER_NAME,
    JOB_NOTIFY_FIELD_STATUS,
    JOB_NOTIFY_FIELD_DOCUMENT,
    JOB_NOTIFY_FIELD_PRIORITY,
    JOB_NOTIFY_FIELD_POSITION,
    JOB_NOTIFY_FIELD_SUBMITTED)

def wait_for_print_job_info(fields=DEFAULT_FIELDS,
                            timeout=INFINITE,
                            printer_name=None):
    if timeout != INFINITE:
        timeout = int(timeout * 1000)
    hPrinter = wintypes.HANDLE()
    fields = (wintypes.WORD * len(fields))(*fields)
    opt = PRINTER_NOTIFY_OPTIONS(
            pTypes=PRINTER_NOTIFY_OPTIONS_TYPE(
                    Type=JOB_NOTIFY_TYPE, pFields=fields))
    pinfo = PPRINTER_NOTIFY_INFO_GC() # note: GC subclass
    result = []
    winspool.OpenPrinterW(printer_name, ctypes.byref(hPrinter), None)
    try:
        hChange = winspool.FindFirstPrinterChangeNotification(
                    hPrinter, 0, 0, ctypes.byref(opt))
        try:
            if (kernel32.WaitForSingleObject(hChange, timeout) !=
                WAIT_OBJECT_0): return result
            winspool.FindNextPrinterChangeNotification(
                hChange, None, None, ctypes.byref(pinfo))
            for data in pinfo[0].aData:
                if data.Type != JOB_NOTIFY_TYPE:
                    continue
                nd = (data.Id,) + data.NotifyData
                result.append(nd)
            return result
        finally:
            winspool.FindClosePrinterChangeNotification(hChange)
    finally:
        winspool.ClosePrinter(hPrinter)

def job_status_string(status, nfmt='%#010x'):
    if status == 0:
        return nfmt % 0
    strings = []
    for state, string in JOB_STATUS_STRING.items():
        if status & state:
            strings.append(string)
            status &= ~state
            if not status:
                break
    if status:
        strings.append(nfmt % status)
    return ','.join(strings) 
```

**示例用法：**

```
if __name__ == '__main__':
    import time
    print('Type Ctrl+C to exit')
    try:
        while True:
            info = wait_for_print_job_info(timeout=0.25)
            if not info:
                continue
            for nd in info:
                job_id, key, value = nd
                if key == 'job_status':
                    status_string = job_status_string(value)
                    value = '%#010x (%s)' % (value, status_string)
                print('[%08x] %s: %s' % (job_id, key, value))
                time.sleep(.05)
            print('')
            time.sleep(.05)
    except KeyboardInterrupt:
        pass 
```

连续两次打印测试页的示例输出：

```
Type Ctrl+C to exit
[00000001] job_printer_name: Larry (Network)
[00000001] job_status: 0x00000008 (SPOOLING)
[00000001] job_document: Test Page
[00000001] job_priority: 1
[00000001] job_position: 1
[00000001] job_submitted: 2016-02-06 13:14:14.139000
[00000001] job_position: 1
[00000002] job_printer_name: Larry (Network)
[00000002] job_status: 0x00000008 (SPOOLING)
[00000002] job_document: Test Page
[00000002] job_priority: 1
[00000002] job_position: 2
[00000002] job_submitted: 2016-02-06 13:14:15.186000
[00000001] job_position: 1
[00000001] job_position: 1
[00000001] job_position: 1
[00000001] job_position: 1
[00000001] job_position: 1
[00000001] job_position: 1
[00000001] job_status: 0x00002010 (PRINTING,RETAINED)
[00000001] job_position: 1
[00000001] job_status: 0x00000010 (PRINTING)
[00000001] job_status: 0x00000094 (DELETING,PRINTED,PRINTING)
[00000001] job_status: 0x00000094 (DELETING,PRINTED,PRINTING)
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_position: 1
[00000002] job_status: 0x00002010 (PRINTING,RETAINED)
[00000002] job_position: 1
[00000002] job_status: 0x00000010 (PRINTING)
[00000002] job_status: 0x00000094 (DELETING,PRINTED,PRINTING)
[00000002] job_status: 0x00000094 (DELETING,PRINTED,PRINTING)
[00000002] job_status: 0x00000084 (DELETING,PRINTED)
[00000002] job_status: 0x00000184 (DELETING,PRINTED,DELETED) 
```

# android-ndk - AAssetManager_openDir 在启动时崩溃的应用程序

> ID：15748393
> 
> 赞同：1
> 
> 时间：2013-04-01T17:37:56.913
> 
> 标签：android-ndk

我正在尝试遍历资产文件夹中包含的所有文件。要获取我使用的工作目录：`AAssetManager_openDir`. 然而，在我的代码中简单地使用它会导致启动时崩溃 - android_main 甚至都看不到。有没有人遇到过类似的问题和/或知道如何解决这个问题？

```
const char* filename = (const char*)NULL;
const char* dirName = "";
AAssetDir* dir = AAssetManager_openDir(assetManager, dirName);
while((filename = AAssetDir_getNextFileName(dir)) != NULL)
{
    //action per file
}
AAssetDir_close(dir); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:41:23.367

```
const char* dirName = ""; 
```

可能是导致崩溃的原因。

而是尝试：

```
while(1)
{
const char* filename = AAssetDir_getNextFileName(dir);
if(!filename)
break;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:14:23.450

好吧，我没有任何运气让它工作，所以我尝试了一种不同的方法。

我编译了一个 Minizip 的静态库，并结合 Zlib，打开了 APK 文件（通过 JNIEnv 找到该文件的路径）并发现其中包含的文件名，跳过了资产文件夹中不包含的条目。

迂回的方式来做到这一点，但由于 AAssetManager_openDir 不工作，这似乎是唯一的选择。

如果有人确实找到了“正确”的解决方案，那就太好了。

# playframework - 如何运行同一个 Play 的两个实例！框架应用？

> ID：15748395
> 
> 赞同：4
> 
> 时间：2013-04-01T17:37:59.273
> 
> 标签：playframework, playframework-2.1

我正在尝试运行同一个 Play 应用程序的两个实例，以便将来透明地升级应用程序。

当我启动第一个实例时，显然一切都很好。当我启动`start 9525`命令以在端口 9525 上启动应用程序的第二个实例时，我收到以下错误：

```
Play server process ID is 8909
This application is already running (Or delete .../RUNNING_PID file) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:59:56.617

[这个 Play 的文档](http://www.playframework.com/documentation/2.1.0/HTTPServer)已经描述了使用 Apache 进行“*透明升级*”。通常，您需要在两个**单独**的文件夹中启动两个实例

开头：

1.  使用应用程序源在您的文件夹中创建`dist`包
2.  将其解压缩到某个子文件夹，即。`instance1`
3.  `instance1`例如，从所需端口开始，`9998`它将是您*的日常*实例

更改后，当您想以透明方式重新部署应用程序时：

1.  将更改推送到服务器（假设您正在使用一些版本控制系统，即 git）
2.  创建`dist`并将其解压缩到**其他**文件夹，即。`instance2`
3.  **在另一个**端口上启动它，即。`9999`
4.  停止文件夹中的应用程序`instance1`
5.  将解压缩的 dist 从复制`instance2`到`instance1`
6.  启动应用程序`instance1`并停止应用程序`instance2`
7.  每次需要重新部署新更改时重复此过程。

当然，创建将同时执行所有步骤的简单 shell 脚本将是您的好帮手。

**提示：**

为了避免经常重新部署，特别是当您只需要替换/修改一些**公共** 和**静态**内容（如 CSS 或图像）时，您还可以使用 Apache common`vhost`来处理这些资源。只需`vhost`为某个文件夹创建一个子域，即。`http://static.domain.tld`或使用单独的域更好：`http://my-cdn.tld`因此您可以使用如下路径：

```
<img src="http://static.domain.tld/images/photo.png" alt="" /> 
```

代替

```
<img src="/public/images/photo.png" alt="" /> 
```

好处：

*   您无需重新部署应用程序即可更改这些文件。
*   您不发送 cookie，这对于公共资产来说大多是多余的（如果 vhost 的域不是主项目）
*   您可以使用 HTTP 服务器的配置来设置缓存标签（性能！）
*   您正在所有实例之间自动共享静态数据。
*   您不会浪费 JVM 资源来提供图片 :) 我注意到，虽然 Play 的默认服务器可以非常快，但使用简单的 HTTP 服务器提供静态内容可能更快......

最后，根据我的经验，nginx 比 Apache 快。因此，如果在您的情况下 HTTP 服务器的唯一任务是负载平衡 Play 的应用程序，请考虑使用 nginx，它只是更轻。

# actionscript-3 - 如何在播放过程中停止声音

> ID：15748396
> 
> 赞同：1
> 
> 时间：2013-04-01T17:38:01.173
> 
> 标签：actionscript-3, media, audio

我正在尝试编写一些代码，在按下按钮时播放声音，但是如果按下按钮并且声音正在播放，那么声音会暂停并再次播放，而不是只是播放和重叠。

这就是我所拥有的

```
 var sound:alarm = new alarm();
    var isPlaying:Boolean = false;

    public function Main()
    {
        button.addEventListener(MouseEvent.CLICK,playSound);
    }

    public function playSound(e:Event):void
    {
        if(isPlaying)sound.stop();
        sound.play();
        isPlaying=true;
    } 
```

乍一看它似乎有效，但后来我在输出中看到以下内容

> 类型错误：错误 #1006：停止不是函数。
> 在 Main/playSound()
> 
> 类型错误：错误 #1006：停止不是函数。
> 在 Main/playSound()

所以显然它可以工作，尽管 stop 不是 Sound 类的方法。实现这一点的正确方法是什么？另外我一直想知道是否有更合适的条件可以使用，因为使用此代码 sound.stop() 每次在第一次单击按钮后进入函数时都会调用，是否有一种方法可以让我签入是否实时播放声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:51:17.917

在您的代码中，该函数`playSound(e:Event)`应该`playSound(e:MouseEvent);`

也是您的权利`stop()`不是`Sound`该类的方法，但是您不使用该类，而是使用`Sound`该类`alarm`（除非警报类扩展了 Sound 类）。

另一方面，我搜索了谷歌并弹出了[Flash 播放/暂停声音](https://stackoverflow.com/questions/3690178/flash-play-pause-sound-toggle-button)

### 更新：

```
import flash.media.SoundChannel;
// Make sure to import the SoundChannel class

var sc:SoundChannel = new SoundChannel();
var sound:Sound = new alarm();
var isPlaying:Boolean = false;
var pausePos:Number = 0;

public function Main()
{
    button.addEventListener(MouseEvent.CLICK,playSound);
}

public function playSound(e:MouseEvent):void
{
    if(isPlaying) {
        pausePos = sc.position;
        sc.stop();
        isPlaying = false;
    } else {
        sc = sound.play(pausePos);
        isPlaying = true;
    }
} 
```

这段代码应该可以工作，但是我没有测试过，所以如果给出任何错误或没有达到预期的结果，请告诉我，我会看看我能做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:51:33.360

简短的回答......好吧，我的全部回答:)。尝试使用 SoundChannel 对象，而不是使用声音对象。它提供了更多选项，包括音量和平衡控制，最突出的是停止。

文档应该提供足够的信息来使用它。这是比较常见的。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html)

# javascript - 请求动画帧 Javascript 游戏计时器

> ID：15748398
> 
> 赞同：0
> 
> 时间：2013-04-01T17:38:02.957
> 
> 标签：javascript, timer

以下作品：

```
window.requestAnimFrame = (function(){
return  window.requestAnimationFrame ||
window.webkitRequestAnimationFrame   ||
window.mozRequestAnimationFrame      ||
window.oRequestAnimationFrame        ||
window.msRequestAnimationFrame       ||
function(callback){ window.setTimeout(callback, 1000 / 60); };
})();

function gameLoop() {
    requestAnimFrame(gameLoop);
} 
```

但是，当我尝试使用模块模式打包功能时，如下所示：

```
var GameModule = {

    requestAnimFrame: function() { 
    return window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame  ||
        window.mozRequestAnimationFrame     ||
    window.oRequestAnimationFrame       ||
        window.msRequestAnimationFrame      ||
    function(callback){ window.setTimeout(callback, 1000 / 60); };
   },

   gameLoop: function() {
       this.requestAnimFrame(this.gameLoop);
   }
};

// run the game
(function(){
    Game.gameLoop();
})(); 
```

...它只调用 requestAnimFrame 一次。我已经搞砸了很长时间，似乎无法找到一种让它递归运行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:47:56.703

固定的：

```
this.requestAnimFrame(this.gameLoop()); 
```

# android - 在平板电脑和数据库之间构建同步的最佳方式？

> ID：15748400
> 
> 赞同：0
> 
> 时间：2013-04-01T17:38:14.733
> 
> 标签：android, synchronization

只是好奇将数据从数据库同步到安卓平板电脑的最佳实践。

表：

```
- Part1
- Part2
- Part3
- Part4
- Part5 
```

每当我在平板电脑上打开应用程序时，我都会从数据库中获取最新列表，截断表格，然后重新添加记录。每个表包含 400 条记录。因此，从服务器获取数据并添加它需要大约 60.45 个表。因为我有 5 张桌子，所以大约需要 5 分钟。有没有更好的方法来实现我正在做的事情的高效同步？从服务器获取数据后，我没有截断表，而是尝试在添加之前先检查它是否存在，但这对时间没有帮助。

我目前在做什么：我从 API 服务器获取 JSON 列表并截断表并将行添加回来。5 个表，每个表有 500 条记录，非常耗时。

```
 libraryApp = (LibraryApp) act.getApplication();
    List<Pair> technicians = getJsonData("get_technicians");
    if(technicians.size() > 0) {
        stiLibraryApp.getDataManager().emptyTechnicianTable(); // truncate current table
        // add technicians back to database
        for(Pair p : technicians) {
            libraryApp.getDataManager().saveTechnician(new Technician((Integer) p.key(), (String) p.value()));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:59:25.567

鉴于提供的信息有限，我会尝试以下方法：

(1) 让您的服务器记录您要更新的表上次“放置”在服务器上的时间。我不知道您使用的是什么后端语言，所以我无法提出建议。但是保持 lastupdated 时间戳应该很容易。

使用此时间戳，您将能够判断服务器上的表版本是否比移动设备上的版本更新。

(2) 使用`AsyncTask`下载您需要的数据。我不确定所有 5 个表是否都在同一个活动中，在单独的活动中，在片段中还是在其他东西中。但是，总体思路如下：

```
private class GetTableData extends AsyncTask<Void, Void, Void>{
    @Override
    protected Void doInBackground(){
        //get data from your sever
        return null;
    }

    protect void onPostExecute(Void result){
        //update the table view if version on server is newer
    } 
```

您将放置所有 I/O 方法，即连接到您的服务器并在`doInBackground`. 您将把更新表格视图的所有方法放在`onPostExecute`. 这种分离是必要的，因为虽然 I/O 函数必须在 Jellybean 之后在后台运行，但必须从 UI 线程更新视图。

(3) 检查您下载的内容的时间戳。如果您下载的内容较新，请更新您的表格。你可以通过简单地在你的`onPostExecute`函数中添加一个条件语句来完成这个，这样

```
if(lastDownloadTime < lastUpdatedOnServerTime){
    //update view
} 
```

根据表文件的大小，您可能希望在服务器代码上添加一个函数，该函数仅返回表上次更新的时间。这样，您可以对照上次下载表格的时间检查上次更新的时间。如果表格在您下载后在服务器上更新，您可以继续下载新信息。

这是基本的想法。您可以根据自己的设置对其进行调整。

# iphone - 双击放大图像视图

> ID：15748401
> 
> 赞同：-3
> 
> 时间：2013-04-01T17:38:17.387
> 
> 标签：iphone, ios, objective-c, uiimageview

我想在单击时显示*放大*和*缩小*效果。`ImageView`

如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:43:27.330

您需要将图像视图添加为 UIScrollView 的子视图。您可以在滚动视图上安装 UITapGestureRecognizer 并将 numberOfTapsRequired 属性设置为 2。在手势识别器的回调方法中，只需将滚动视图的 zoomScale 属性设置为所需的缩放量。不要忘记在滚动视图上设置 maximumZoomScale 和 minimumZoomScale。

# groovy - 如何在 groovys 中“包含”常用方法

> ID：15748405
> 
> 赞同：1
> 
> 时间：2013-04-01T17:38:28.907
> 
> 标签：groovy

我开发了一些 groovys 用作 Serviio 的插件。这些插件使用的许多方法都很常见，但是当进行更改时，每个插件都需要更新。因此，我想在 tools.groovy 的每个插件中“包含”这些方法。我尝试了其他帖子中建议的 2 种不同方法。

我尝试使用

```
evaluate(new File("C:\\Program Files\\Serviio\\plugins\\tools.groovy")) 
```

在 tools.groovy 刚刚拥有的每个插件的开头

```
class Tools{method1{return}method2{return}} 
```

但是在执行插件时我得到

```
Caught: groovy.lang.MissingMethodException: No signature of method: Tools.main() is applicable for argument types: () values: [] 
```

如果我再添加

```
void main(args) { } 
```

到类工具，错误消失了，但运行的是 Tools.main 而不是 plugin.main，我没有得到任何输出。

我建议的第二种方法是使用

```
def script = new GroovyScriptEngine( '.' ).with {
  loadScriptByName( 'C:\\Program Files\\Serviio\\plugins\\tools.groovy' )
} 
this.metaClass.mixin script 
```

然而，这给出了错误

```
unexpected token: this @ line 55, column 2.
this.metaClass.mixin script 
```

任何有关如何使这些解决方案发挥作用的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:49:42.030

您是否尝试定义一个通用的基本脚本并将其作为编译器配置提供。

[http://groovy.codehaus.org/Embedding+Groovy](http://groovy.codehaus.org/Embedding+Groovy)

从 groovy 文档中...

```
class ScriptBaseTest {

  @Test
  void extend_groovy_script() {
    def compiler = new CompilerConfiguration()
    compiler.setScriptBaseClass("ScriptBaseTestScript")

    def shell = new GroovyShell(this.class.classLoader, new Binding(), compiler)

    assertEquals shell.evaluate("foo()"), "this is foo"
  }
}

abstract class ScriptBaseTestScript extends Script {
  def foo() {
    "this is foo"
  }
} 
```

# ruby-on-rails - 扩展 has_many 时引用调用实例变量

> ID：15748409
> 
> 赞同：0
> 
> 时间：2013-04-01T17:38:42.123
> 
> 标签：ruby-on-rails, has-many, model-associations, rails-models

我有一个模型叫它`Project`有很多`Proposals.`

Project 模型有一个属性叫做`winning_proposal_id`

现在我有这样的东西来找到获胜的提案以及一个 has_many 提案：

```
belongs_to :winning_proposal, :class_name => "Proposal", :foreign_key => "winning_proposal_id"
has_many :proposals, dependent: :destroy 
```

我从中做的：

```
@project.winning_proposal 
```

参考获胜的提案，但我不是这个的粉丝。

我更喜欢的是这样的：

```
@project.proposals.winner 
```

我认为它更干净。但是，要做到这一点，我需要能够从块中引用实例变量 wins_proposal_id：

```
has_many :proposals, dependent: :destroy do
  def winner
    self.where(id: winning_proposal_id).first
  end
end 
```

但这不起作用。我相信我可以做到这一点：

```
has_many :proposals, dependent: :destroy do
  def winner
    self.where(id: self.project.first.winning_proposal_id).first
  end
end 
```

但这似乎很笨拙。任何人都知道如何从块中引用调用实例变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:03:00.437

为其他感兴趣的人想出来：

```
has_many :proposals, dependent: :destroy do
 def winner
  self.first(conditions: {id: proxy_association.owner.winning_proposal_id})
 end
end 
```

关键是使用`proxy_association.owner`来引用父级。

# java - 有没有办法使用 Java 从对象本身内部销毁对象？

> ID：15748412
> 
> 赞同：0
> 
> 时间：2013-04-01T17:38:50.317
> 
> 标签：java

我想从对象本身内部杀死/删除一个对象。

我需要的是，对该对象的引用为空，但我不想将句柄传递给容器。这是一个小代码示例：

```
class Obj {
     void run(){
         if(true)
             kill(); 
     }
}
class A{
    Obj o;
    void main(){
        o.run();
    }
} 
```

跑步后`o.run()`我想`o == null`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:47:53.457

您不能根据需要从对象本身中对对象的引用为空。从您实际拥有要在范围内无效的引用的角度来看，您可以这样做。

完成后为空引用`run()`：

*根据反馈*编辑...**

 *```
class Obj {
    private boolean killMe = false;
    void run(){
        if(someConditionHere) {
            killMe = true;
        }
    }
    public boolean isKillable() { return killMe; }
}

class A{
    Obj o;
    void main(){
        o.run();
        if(o.isKillable()) {
            o = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:20:43.417

您将无法从其自己的成员方法中取消对象引用，因为对象无法更改其他对象拥有的引用。但是您可以将其所有成员字段设置为 null：未来的调用者每次尝试访问该对象时肯定会收到 NullPointerException。如果你想一想，这甚至比自杀要好：这个物体将保持足够的活力，足以在他周围传播死亡。
如果你幸运的话，你甚至可以让整个应用程序自杀！

如果一个对象可以将其他对象已经对其进行的所有引用设置为空，那么对象世界将是​​一团糟，因为在 OOP 中，一个对象“拥有”它的属性（无论如何都是*私有*的）并且能够从外部更改它们source 将完全打破封装概念。

现在我很确定它有时可能会很方便（否则你不会问这个问题），但如果你在 java 中编程，你将不会被允许“开箱即用”。
唯一的方法是让你的对象和持有对它的引用的对象就一个共同的策略达成一致。
就像他们在尝试做任何其他事情之前应该调用的 isDead 方法一样。
您还可以实现一个 PsychologicalSupport 对象，它将外部对象的访问代理到您的抑郁对象。当你的对象想死时，他只需要通知它的支持对象，PS 对象将停止代理消息，你的对象将被垃圾回收。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T23:39:32.757

我会这样做：

```
class Obj {
    Obj run(){
        if(someConditionHere) {
            return null;
        }

        return this;
    }
}

class A {
    Obj o;
    void main(){
        o = o.run();
    }
} 
```

所以不需要在A中检查o的内部状态。而且封装性更强。*

# css - 用图像连续定位 div 类？

> ID：15748416
> 
> 赞同：0
> 
> 时间：2013-04-01T17:38:58.313
> 
> 标签：css, html

所以这就是它的样子：

[http://www.whybaguio.com/php/visit/attractions.php](http://www.whybaguio.com/php/visit/attractions.php)

如何在不使用浮动元素的情况下每行放置三个图像。如果我使用浮动，包装器的背景会被删除:(我不知道如何解决这个问题，我尝试使用显示：内联，使用 span 而不是 div 但没有任何效果:(

请帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:40:59.687

只需添加`overflow: hidden;`到`#wrapperatt`div 中，因为浮动的子元素不在文档流中导致容器崩溃 -[这是非常典型的浮动行为](http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow)，也是您看到背景消失的原因。

# c# - 收到有关程序终止的通知

> ID：15748420
> 
> 赞同：0
> 
> 时间：2013-04-01T17:39:13.617
> 
> 标签：c#

请在下面找到我的一段代码。我浏览了 Stack Overflow，了解如何在进程终止时获得通知，并在我的代码中使用以下建议（最后 3 行）。

```
 private void button1_Click(object sender, EventArgs e)
    {
        folderBrowserDialog1.ShowDialog();
        System.Diagnostics.Process process = new System.Diagnostics.Process();
        System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();            
        //startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        startInfo.FileName = "cmd.exe";
        startInfo.Arguments = "/C rep_cmd "+textBox2.Text+" -text "+folderBrowserDialog1.SelectedPath+"\\";
        process.StartInfo = startInfo;
        System.Diagnostics.Process.Start(startInfo);
        if (process.HasExited == true)
           MessageBox.Show("Process done successfully!");            
    } 
```

但是，当我运行程序时，我得到一个运行时异常，说“没有进程与这个对象相关联”。不知道如何纠正这种情况。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:59:41.007

您必须生成一个并行线程来检查进程是否在该并行线程中退出。以下方法可以解决问题。为确保您不会阻塞程序，请从并行线程调用它

```
 public  void  CheckProc() 
    {
        while (true)
        {
            if (process.HasExited == true)
            {
                MessageBox.Show("Process done successfully!");
                break;
            }

        }
    } 
```

还要通过 [http://msdn.microsoft.com/en-us/library/system.diagnostics.process.hasexited.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.hasexited.aspx)

# c# - 如何更改 Dapper Extensions 中的方言？

> ID：15748421
> 
> 赞同：7
> 
> 时间：2013-04-01T17:39:16.553
> 
> 标签：c#, postgresql, dapper

默认情况下，dapper 扩展的 RDBMS 方言是 SqlServer。如何将其更改为另一种方言？

我想我可以做到：（我只是快速地拼凑出一种 pgsql 方言）

`var conf = new DapperExtensionsConfiguration(typeof(AutoClassMapper<>), new List<Assembly>(), new DapperExtensions.Sql.PostgreSqlDialect());`

但是我该怎么处理这个conf？我是否将其设置为连接或某处的静态方法？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T23:36:30.267

解决方案是：

```
DapperExtensions.DapperExtensions.SqlDialect = new PostgreSqlDialect(); 
```

请注意，异步扩展也必须手动设置方言：

```
DapperExtensions.DapperAsyncExtensions.SqlDialect = new PostgreSqlDialect(); 
```

# powershell-2.0 - 使用powershell v3.0查询域计算机上的物理内存

> ID：15748422
> 
> 赞同：0
> 
> 时间：2013-04-01T17:39:20.500
> 
> 标签：powershell-2.0, powershell-3.0

我一直在用我能找到的任何东西来查询一个简单的 wmiobject；物理内存; 但是，我需要在域的根级别执行此操作。

由于我在根级别尝试这个，任何人都可以建议天气或不是一个好主意（ping 会成为一个问题吗？）。此外，

1）我可以从客户端机器（我的笔记本电脑 W7 x64）查询这个吗？2）有人可以为我提供一种简单的方法来查询域上所有计算机帐户的物理内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:34:56.040

为此，您需要对所有机器的网络访问、访问 WMI 的权限和耐心。如果域是 3 到 10 台机器，这应该没问题。如果您需要更多，我建议您查看 Jobs

```
get-help about_jobs 
```

这个简短的脚本创建了您域中所有计算机的列表，物理内存以 GB 为单位

```
import-module activedirectory
$computers = get-adcomputer -filter * | Select DNsHostname,Name,DistinguishedName 
foreach ($computer in $computers){
    $W32System = get-wmiobject win32_computersystem -computer $computer.DnsHOstname
    $computer | add-member -name "PhysicalMemory" -value ($W32System.totalphysicalmemory/1GB) -membertype NoteProperty
}
$computers 
```

# javascript - 我怎么能调用这个方法？

> ID：15748427
> 
> 赞同：0
> 
> 时间：2013-04-01T17:39:32.580
> 
> 标签：javascript, asp.net, xml, html

```
 <%@ Page Title="About" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeFile="About.aspx.cs" Inherits="About" %>

<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();

    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(window.location.search);
        if (results == null)
            return "";
        else
            return decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    function calcRoute() {

        start = document.getElementById('startvalue').value;

        end = document.getElementById('endvalue').value;

        var request = {
            origin: start,
            destination: end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };

        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {

                directionsDisplay.setDirections(response);
                this.distance = response.routes[0].legs[0].distance.value / 1000;

            }
        });

    }

    function Button1_onclick() {
        calcRoute();
    }

    window.onload = InitializeMap;
    </script>

    <div style="height: 86px; width: 689px; margin-left: 16px; margin-top: 0px">

        <table style="width: 96%;">
            <tr>
                <td class="auto-style1">
                    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                </td>
                <td>
                    <asp:TextBox  runat="server" id ="startvalue"></asp:TextBox>
                </td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td class="auto-style2">
                    <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
                </td>
                <td class="auto-style3">
                    <asp:TextBox runat="server" id ="endvalue"></asp:TextBox>
                </td>
                <td class="auto-style3"></td>
            </tr>
            <tr>
                <td class="auto-style1">&nbsp;</td>

                <td>                 
                       <input id="Button1" type="button" value="GetDirections" onclick="return Button1_onclick()" />

            </tr>

        </table> 
```

我想调用 Button1_onclick() 函数，但它不起作用。这段代码没有问题。问题是调用函数是错误的。所以拜托，**你能告诉我我该怎么做吗..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:16:06.820

您是否尝试过从函数调用中删除返回？此代码触发事件。

```
<asp:Content ID="ContentMain" ContentPlaceHolderID="ContentBody" runat="server">    
    <script type="text/javascript" language="javascript">
        function Button1_Click() {
            alert('foo');
        }
    </script>
<input type="button" id="Button1" onclick="Button1_Click()" value="GetDirections" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:47:49.527

这可能是因为您的 HTML 标记无效

```
 <tr>
                <td class="auto-style1">&nbsp;</td>

                <td>                 
                       <input id="Button1" type="button" value="GetDirections" onclick="return Button1_onclick()" />

</td> <!-- Missing closing tag -->

            </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:57:14.827

试试这个代码**onclick="return javascript:calcRoute()**而不是 OnClick="return Button1_onclick"

并检查此脚本文件（`**<script type="text/javascript" src="../../Scripts/jquery-ui-1.9.2.min.js"></script>**`）（任何最小化版本）是否在您的母版页中引用？

```
 <tr>
                <td class="auto-style1">&nbsp;</td>

                <td>                 
                   <input id="Button1" type="button" value="GetDirections" *onclick="return javascript:calcRoute();"** />
               </td>    
            </tr> 
```

**编辑：**

试试这个另一种方式

```
$("#filter").click(function(){
   Button1_onclick();
});

<input id="Button1" type="button" value="GetDirections" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T21:53:23.220

你为什么不直接调用函数呢？

```
<input id="Button1" type="button" value="GetDirections" onclick="Button1_onclick()" /> 
```

否则，在 Button1_onclick 中应该返回一个值。

```
function Button1_onclick() {
        calcRoute();
        return true;
} 
```

# wpf - 可以对复合对象的字段进行数据绑定吗？

> ID：15748428
> 
> 赞同：2
> 
> 时间：2013-04-01T17:39:34.283
> 
> 标签：wpf, mvvm, .net-4.0

我有一个 WPF 窗口，其中包含我希望绑定到我的模型的控件。该模型实现 INotifyPropertyChanged 以在 Properties 更改值时通知视图。属性是由字段支持的原语，例如：

```
private bool m_isRunning;
public bool IsRunning
{
    get { return m_isRunning; }
    private set
    {
        m_isRunning= value;
        OnPropertyChanged("IsRunning");
    }
}

protected virtual void OnPropertyChanged(string propertyName)
{
    if (String.IsNullOrEmpty(propertyName))
    {
        return;
    }
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

这适用于原始值。我还有一个具有各种原始属性和哈希表的复合对象。或者，我想绑定到 ObservableCollection 的 Count 属性。我想将我的视图控件绑定到复合对象中的属性，但我认为这是不可能的。就像是：

```
 <Run Text="{Binding Path=CompositeObject.SomeInnerProperty, Mode=OneWay,  UpdateSourceTrigger=PropertyChanged}" /> 
```

这似乎不可能，但是还有其他方法吗？我觉得我唯一的选择是公开映射到复合对象内部属性的属性，但这似乎有很多重复，例如：

```
public bool SomeInnerProperty
{
    get { return m_myComposite.SomeInnerProperty; }
    private set
    {
        m_myComposite.SomeInnerProperty= value;
        OnPropertyChanged("SomeInnerProperty");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:49:42.340

绑定到类似的东西没有任何问题`CompositeObject.SomeInnerProperty`，但是如果`CompositeObject`没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，那么您的 UI 将不会收到更改通知，并且知道它需要在`SomeInnerProperty`更改时进行更新。

另外，请注意，您只能绑定到属性（使用 get 和 set 方法），而不能绑定到字段。所以你可以绑定`public string SomeValue { get; set; }`但你不能绑定到`public string SomeValue;`

关于处理重复代码，我个人使用一些[Visual Studio 宏](https://stackoverflow.com/questions/14261344/observablecollection-property-class/14261661#14261661)来为我编写我的公共属性，所以如果你不想`INotifyPropertyChanged`在你的`CompositeObject`类上实现，也许你可以考虑做类似的事情。应该注意的是，宏已从 Visual Studio 2012 中删除，因此如果您有较新的版本，您可能需要使用其他替代方法，例如[创建加载项来运行宏](https://stackoverflow.com/a/12394986/302677)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:50:06.943

前段时间我遇到了同样的问题。看看我是怎么解决的： [MVVM INotifyPropertyChanged conflict with base class PropertyChange](https://stackoverflow.com/questions/9053764/mvvm-inotifypropertychanged-conflict-with-base-class-propertychange)

基本上，我创建了一个实现 INotifyPropertyChanged 的​​基类，并让我的所有类都从该基类继承，并且数据绑定工作正常。

你有两个选择：

1.  如果您的模型类没有实现 INPC，则按照您的建议在 ViewModel 中创建包装器属性，或者
2.  在您的模型中实现 INPC 并在 ViewModel 中公开您的主要对象，只要内部属性通知更改，您就可以绑定任意深度。

# c# - 获取点击的图片框数组的索引

> ID：15748429
> 
> 赞同：1
> 
> 时间：2013-04-01T17:39:39.847
> 
> 标签：c#, winforms

我正在动态创建一些图片框并点击图片框的事件如下

```
Image myImage = Image.FromFile("image/Untitled6.png"); 
PictureBox[] txtTeamNames = new PictureBox[5];        

for (int i = 0; i < txtTeamNames.Length; i++)
{
  var txt = new PictureBox();
  txtTeamNames[i] = txt;                
  txtTeamNames[i].Image = myImage;                
  txtTeamNames[i].Height = 53;
  txtTeamNames[i].Width = 48;                
  this.panel1.Controls.Add(txtTeamNames[i]);                
  txtTeamNames[i].Visible = true;
  txtTeamNames[i].Click += new EventHandler(this.clcikeventhandle);
} 
```

当有人点击任何图片框时，我如何找到它的数组索引和名称？

```
void clickEventHandler(object sender, EventArgs e)
{          
  //???
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:41:36.417

您可以`PictureBox`通过`sender`参数访问 。所以试试这个：

```
PictureBox[] txtTeamNames;

void YourMethod()
{
    Image myImage = Image.FromFile("image/Untitled6.png"); 
    txtTeamNames = new PictureBox[5];        
    //The same as your code
}   

void clcikeventhandle(object sender, EventArgs e)
{          
    int index = txtTeamNames.IndexOf(sender As PictureBox);
} 
```

**编辑：方法#2**

但是，如果您对在类范围内声明该数组不满意，您可以尝试以下方法：

```
//Same as your code
for (int i = 0; i < txtTeamNames.Length; i++)
{
    //Save as your code
    txtTeamNames[i].Tag = i;                        // ADD THIS LINE
} 
```

然后：

```
void clcikeventhandle(object sender, EventArgs e)
{            
    int index = int.Parse((sender as PictureBox).Tag.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:54:39.013

另一个建议 - 创建一个自定义类，它继承自`PictureBox`. 它将有一个额外的`Index`属性。您可以在这两行之间进行设置：

```
txtTeamNames[i].Visible = true;
//assign the index here
txtTeamNames[i].Click += new EventHandler(this.clcikeventhandle); 
```

像这样：

```
txtTeamNames[i].Index = i; 
```

然后在处理程序中：

```
void clickEventHandle(object sender, EventArgs e)
{ 
  PictureBox pbox = sender As PictureBox;
  int index = pbox.Index();
  string name = pbox.Name();
} 
```

您保持相同的变量范围，如果您担心它可能会很有用。如果您可以将范围升级`txtTeamNames`到班级级别，请参阅[**Hossein Narimani Rad**](https://stackoverflow.com/a/15748476/897326)[的另一个答案](https://stackoverflow.com/a/15748476/897326)**。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T08:51:59.987

```
namespace your_name_project
{
    public partial class Form_Begin : Form
    {
        PictureBox[] pictureBoxs = new PictureBox[6];
        public Form_Begin()
        {
            InitializeComponent();
            pictureBoxs[0] = pictureBox1; pictureBoxs[1] = pictureBox2; pictureBoxs[2] = pictureBox3;
            pictureBoxs[3] = pictureBox4; pictureBoxs[4] = pictureBox5;   pictureBoxs[5] = pictureBox6;     
        }
//continue 
        List<PictureBox> pictureBoxes = new List<PictureBox>();

            private void buttonX1_Click(object sender, EventArgs e)
            {
                for (int i = 0; i <3; i++)
                {
                    pictureBoxs[i].Image =your_name_project.Properties.Resources.image_1;// load image1 and Image_2from resource in property of picturebox  
                }
                for (int i = 3; i < 6; i++)
                {
                    pictureBoxs[i].Image = your_name_project.Properties.Resources.Image_2;
                }
            } 
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T03:50:06.563

我已经尝试过上面引用的第一种方法，但它对我不起作用。我需要更改语法才能工作。我不确定为什么，但我的方法 1 的工作方式是：

```
PictureBox[] txtTeamNames;

void YourMethod()
{
    Image myImage = Image.FromFile("image/Untitled6.png"); 
    txtTeamNames = new PictureBox[5];        
    //The same as your code
}   

void clcikeventhandle(object sender, EventArgs e)
{          
    int index = Array.IndexOf(txtTeamNames, sender); //DIFFERENT HERE
} 
```

如果有人有想法...**

# javascript - jquery ui 对话框中元素的高 z-index 无法出现在对话框上方

> ID：15748430
> 
> 赞同：0
> 
> 时间：2013-04-01T17:39:40.577
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-dialog

我正在尝试将自定义下拉列表放入我用作 jquery UI 模式的 div 中。问题是，当下拉菜单显示时，它出现在模态框内部——溢出模态框高度，给模态框一个滚动条，并且没有像我期望的那样显示下拉列表的全部内容（`z-index`设置为一个非常高的数字）外面模态的。

当您看到它时会更有意义：我在[JSBIN](http://jsbin.com/ukoqup/2/edit)制作了一个简化的丑陋版本。为什么 z-index 在这里不好？谢谢！

# visual-studio - 使用 MEX 文件静态构建外部库

> ID：15748431
> 
> 赞同：2
> 
> 时间：2013-04-01T17:39:41.297
> 
> 标签：visual-studio, matlab, opencv, mex

我下载了 OpenCV 的源代码并通过 Visual Studio（在发布模式下）静态构建（无 DLL 选项），以便我可以创建独立的可执行文件。它在带有 \MT 标志（运行时库：多线程）的发布模式下与 Visual Studio 完美配合。请注意，如果我在调试模式下编译\链接或更改 \MT 标志，例如 \MD: Multi-threaded DLL，则会出现错误）

现在，我想将它与 MEX 一起使用。我在 mex 规范（mexopt.bat 文件）中用 \MT 更改了 \MD，并且 mex 编译\链接没有任何错误。但是，当我执行 MEX 函数时，它会破坏 MATLAB 并显示错误消息：“检测到分段违规”。

我之前使用过带有 MEX 功能的 OpenCV。但是，这是一个动态编译。

我想我可以解决这个问题，如果我修改 mexopt.bat 文件中的 Visual Studio 编译器\链接器标志。

你能帮助我吗 ？

# eclipse - 如何在本地服务器上运行 eclipse m2e webapp 项目？

> ID：15748434
> 
> 赞同：9
> 
> 时间：2013-04-01T17:39:55.923
> 
> 标签：eclipse, maven, m2e, eclipse-wtp, maven-war-plugin

我正在尝试使用 m2e 创建一个简单的 webapp 作为 maven 项目来帮助我管理依赖项，但我必须遗漏一些东西，因为我无法从 eclipse 运行该项目。

为了提供更多背景信息，这就是我所做的：

首先，我选择创建一个“Maven 项目”

![在此处输入图像描述](https://i.stack.imgur.com/WuAaS.png)

然后，我选择“maven-webapp-archetype”

![在此处输入图像描述](https://i.stack.imgur.com/1hkQo.png)

最后，填写下一步的项目基本信息表，完成项目创建。此时一切看起来都很好。

问题是当我尝试运行该项目时，我没有找到适合在本地服务器上运行该项目的任何东西：

![在此处输入图像描述](https://i.stack.imgur.com/avqXy.png)

此外，从本地服务器的“添加和删除...”上下文菜单条目中，我的项目不会出现在 Web 项目列表中。

我错过了设置中的一步，还是有其他更合适的方式来启动项目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T19:02:18.013

您应该安装[m2e-wtp](http://www.eclipse.org/m2e-wtp/)连接器。

您可以从以下位置安装它：*Window*、*Preferences*、*Maven*、*Discovery*，单击*Open Catalog*并搜索*wtp*。选中 m2e-wtp 旁边的框，然后单击*Finish*。

安装过程完成后，允许它重新启动 Eclipse。之后，您可能需要右键单击项目，选择*Maven*并*更新项目*。

# java - 如何在 groovy 模板中引用根对象？

> ID：15748438
> 
> 赞同：0
> 
> 时间：2013-04-01T17:40:03.123
> 
> 标签：java, groovy

我想创建一个 groovy 模板，它在根地图上进行迭代，但我不知道如何引用该地图。

例如，如果我传入一张地图

```
def map = [a: 1, b:2] 
```

使用模板（其中 ??? 将是根元素）

```
<% ???.each { %>
"name": "it.key", "value": "it.value"
<% } %> 
```

有没有办法引用这个根对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:00:49.297

使用`binding.variables`. 例子：

```
import groovy.text.SimpleTemplateEngine

def template = new SimpleTemplateEngine().createTemplate('''
<% binding.variables.each { key, value -> %>
name = $key, value = $value
<% } %>
''')
def out = template.make([hello: 'world'])
println out.toString() 
```

# svn - 我可以提交一个 SVN 差异文件，而不是一次提交 10 个单独的文件吗？

> ID：15748440
> 
> 赞同：0
> 
> 时间：2013-04-01T17:40:08.397
> 
> 标签：svn, version-control, diff

我有一个我在 SVN 的源代码树中处理的文件列表。我可能会更改一些其他文件以供本地使用，但我不想提交它们。最近，我错误地工作迟到了，我提交了一些注释掉的代码，这反过来又给我的公司造成了一些收入损失，并损害了我的信誉。所以我创建了一个简单的 bash 脚本，其中包含我正在处理的文件列表，并为这些文件创建了一个差异。现在我有一个差异文件，其他人可能称之为补丁。我可以以某种方式提交此 SVN 差异文件以避免提交所有文件吗？我通过 ssh 连接到一个运行 RHEL5 的远程机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:36:34.987

如果您在 Windows 上，TortoiseSVN 客户端有一个听起来正是您需要的功能：*更改列表*。这允许您将文件分成任意组；该图显示了一个称为“设置”的所有其他未分组（“无更改列表”）。通过将您的私人更改分成他们自己的组，可以更容易地避免无意提交您不想提交的文件。

我在我的**TortoiseSVN 和 Subversion Cookbook的**[第 1 章](https://www.simple-talk.com/dotnet/.net-framework/subversion-and-tortoisesvn-cookbook-part-1--the-basics/#grouping)中对此进行了更多讨论；另请参阅TortoiseSVN 手册中有关[更改列表的部分。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-changelists.html)

 **![TortoiseSVN 变更列表](https://i.stack.imgur.com/6KuVu.png)

*（图片由 TortoiseSVN 文档提供。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:52:55.627

不，但你可以`svn commit $(<list_of_files.txt)`...**

# linux - 虽然 shell 脚本中的循环说 [: too many arguments

> ID：15748441
> 
> 赞同：0
> 
> 时间：2013-04-01T17:40:08.517
> 
> 标签：linux, bash, shell, unix, while-loop

我正在尝试运行一个非常简单的脚本，该脚本读取用户的输入并在用户输入与预期不匹配时不断循环问题。

它正在通过 bash 执行：

```
echo "Specify a directory [Y/N]?"

read ans
while [ [ "$ans" != "Y" ] || [ "$ans" != "y" ] || [ "$ans" != "N" ] || [ "$ans" != "n" ] ]
do
    echo "$ans is not valid, please answer [Y/N]"
    read ans
done 
```

代码继续......

知道为什么这不起作用吗？这似乎是一个非常直接的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:45:21.243

那应该工作：

```
echo "Specify a directory [Y/N]?" 
read ans 
while [ "$ans" != "Y" ] && [ "$ans" != "y" ] && [ "$ans" != "N" ] && [ "$ans" != "n" ]
do
    echo "$ans is not valid, please answer [Y/N]"
    read ans 
done 
```

有几个错误：

*   你可能在想**AND**而不是**OR**
*   `[ ]`多条件 while 循环没有全局变量

# regex - 什么字符串满足正则表达式： (^$)|(^.*\{count\}.*$)

> ID：15748451
> 
> 赞同：0
> 
> 时间：2013-04-01T17:40:45.840
> 
> 标签：regex

AWS ElasticTranscoder 需要缩略图来满足 (^$)|(^. *{count}.* $)。

什么字符串可以满足这个正则表达式的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:42:54.697

*   一个空字符串
*   包含字符串的字符串`{count}`

`^`表示字符串的开头，并`$`表示结尾。`.`匹配任何单个字符，`*`表示匹配 0 次或多次。`|`是“或”运算符和`(`/`)`在这种情况下按照您的预期工作。`\`表示下一个字符是文字​​。

因此，`^$`是一个空字符串，`^.*\{count\}.*$`表示任何文本，后跟`{count}`，然后是任何文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:43:46.187

以下字符串将满足正则表达式：

*   空字符串（将匹配`^$`）
*   在任何位置包含子字符串的字符串`{count}`（将匹配`^.*\{count\}.*$`）

# php - PHP 将日期增加 7 小时

> ID：15748455
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:41:01.023
> 
> 标签：php, date, time, directory, glob

到目前为止一切正常，但我想将修改日期增加 7 小时。这意味着它将符合我的时区。我在互联网上搜索了答案，但似乎无法正常工作。我想增加的日期是'$fileDate'。到目前为止，这是我的代码：

```
<?php 

// list from a given folder $folder="test/";
$folder = "../";
$files = glob($folder."*jpg*" ); // to avoid hidden files

// Sort files by modified time, latest to oldest
//array_multisort(array_map( 'filemtime', $files ),SORT_NUMERIC,SORT_DESC,$files);

// Use SORT_ASC in place of SORT_DESC for oldest to latest
array_multisort(array_map( 'filemtime', $files ),SORT_NUMERIC,SORT_ASC,$files);

// display the file names 
print("<table>
    <tr>
        <td align='center'>File Name</td>
        <td align='center'>Last Modified Date</td>
    </tr>");
if(count($files)){
    for( $i=0 ; $i < count($files) ; $i++ ){
        print("<tr>");
        print("<td>".basename($files[$i])."</td>");
        $fileDate = date("F d Y H:i:s", filemtime($files[$i]));
        print("<td>".$fileDate."</td>");
        print("</tr>");
    }
}
print("</table>");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:52:31.733

试试这个

```
$fileDate = date("F d Y H:i:s", filemtime($files[$i])+ (60*60*7)); 
```

要增加它，请添加您要添加​​的相应秒数。7 小时 = 60*60*7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:03:15.820

这应该有效：

```
$filetime_nf = filemtime($files[$i]) + 25200;
$fileDate = date("F d Y H:i:s", $filetime_nf); 
```

它将文件日期时间增加七个小时并将其存储为变量，然后使用 date 函数对其进行格式化。

# ios - 分布配置文件未正确映射

> ID：15748456
> 
> 赞同：1
> 
> 时间：2013-04-01T17:41:01.367
> 
> 标签：ios, xcode, macos

我最近在工作中升级了我的 Mac，并导入了我的开发人员和部署配置文件（将于 7 月到期）。

在 XCode 中，我可以选择我的部署配置文件（似乎已正确映射），但是当我编译应用程序以进行分发时，它会说“身份‘iPhone 分发’与任何配置文件中的任何身份都不匹配”。

这让我整天发疯。有人会认为您可以加载您的配置文件，签署应用程序，然后编译，而不会出现所有这些令人头疼的问题。要启动，这是一个**不会**在应用商店中发布的企业应用程序。曾经。

有没有人看到这个和/或知道如何解决它？它阻碍了我——为了让我开始部署应用程序，我需要让这个配置文件正常工作。

任何帮助表示赞赏。

# java - 从 System.in 读取的两个相同字符串是否会存储在一个公共内存位置？

> ID：15748458
> 
> 赞同：3
> 
> 时间：2013-04-01T17:41:05.713
> 
> 标签：java

假设我们有这样的程序：

```
import java.io.*;

public class ReadString {

   public static void main (String[] args) {

      //  prompt the user to enter their name
      System.out.print("Enter your name: ");

      //  open up standard input
      BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

      String userName = null;
      String userNameCopy = null;

      //  read the username from the command-line; need to use try/catch with the
      //  readLine() method
      try {
         userName = br.readLine();
         System.out.print("Enter your name once again: ");
         userNameCopy = br.readLine();
      } catch (IOException ioe) {
         System.out.println("IO error trying to read your name!");
         System.exit(1);
      }

      System.out.println("Thanks for the name, " + userName);

   }

}  // end of ReadString class 
```

现在，如果用户输入他的用户名两次，`userName`字符串`userNameCopy`将具有相同的值。由于字符串是不可变的，Java 编译器是否足够聪明，可以只使用一个内存对象和两个对它的引用，还是这种行为只保留给硬编码到程序中的字符串文字？

如果答案是“否，编译器将在堆上创建两个单独的对象”。为什么呢？是因为从池中搜索完全匹配的速度很慢吗？如果是这样，字符串池不能像某种哈希表或类似的东西那样实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:44:08.557

池被实现为散列数据结构。Java 将是否进行搜索和共享非文字字符串对象的决定留给程序员。请参阅字符串方法[intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:46:06.853

这与您从哪里读取字符串无关。事实上，您的输入流实现从从源读取的字节数据创建新字符串。但是，您只能通过查看实现类的源代码才能确定这一点。一般来说，你不应该假设字符串被一个类所保留，除非它在其文档中明确说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:07:42.597

String Pool 的实现由编译器在编译时决定。StringPool 由 HashMap 实现。现在在您的情况下，因为编译器不确定您将向这些变量输入什么字符串，所以现在运行时负责在堆上创建字符串对象。这正是 Java 处理字符串的方式。如果你想把字符串放在 StringPool 中，你仍然可以使用`String#intern()`

# php - php在谷歌搜索中获取变量

> ID：15748461
> 
> 赞同：0
> 
> 时间：2013-04-01T17:41:07.617
> 
> 标签：php, mysql, seo

我有一个允许用户创建个人资料页面的网站。他们通过提交将图片、文本等转储到 mqsql 数据库中的 html 表单来做到这一点。当他们访问他们的个人资料时（例如）：www.mysite.com/profile.php?id=104

在 profile.php 中，我有一个关键字元标记，其中填充了一些可搜索的信息：

元名称=“关键字”内容=$用户名...

是否可以通过这种方式让每个个人资料都显示在 Google 搜索中？YouTube 似乎也这样做了。

除非 Google 使用每个 ID 搜索 profile.php，否则他们不会知道我受密码保护的数据库中的内容。

任何建议或反馈将不胜感激！

布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:02:14.573

Google 与您网站的任何其他访问者没有什么不同，因此如果您的网站不包含指向个人资料页面的链接，Google 将不会找到这些页面并将其编入索引（当然，除非有人发布了指向他/她的个人资料页面的链接在另一个网站上）。

您可以通过创建（动态生成的）sitemap.xml 文件“帮助”Google 在您的网站上查找页面；

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)

但是，如果个人资料页面受到保护并且只有登录用户可以访问，那么 Google 将无法访问这些页面。您可以为 Google-bot 设置一个例外并允许它在不登录的情况下访问，但您不应该*这样*做。首先，其他人很容易滥用它并访问私人信息。其次，如果 Google 发现您正在为 Google Bots 提供不同的内容，您将受到处罚，并且可能根本不会被编入索引。

最后一句话：问问自己，您网站的用户是否*希望*他们的个人资料页面被索引。我不知道您网站的目的，但始终考虑到这一点。

# r - 关于通过函数修改的返回值

> ID：15748466
> 
> 赞同：2
> 
> 时间：2013-04-01T17:41:15.807
> 
> 标签：r

我正在尝试使用修改数组中的值的函数，这里是函数

```
testReturn<-function(a){
for (i in 1:6){
a[i]<-a[i]+i
}
return(a)
} 
```

以下是运行结果

```
> a<-rep(0,6)
> testReturn(a)
  [1] 1 2 3 4 5 6
> a
  [1] 0 0 0 0 0 0 
```

看起来函数本身成功地修改了 array `a`。但是返回的`a`数组仍然保持不变。如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:44:40.603

您需要将函数的结果分配回`a`：

```
a <- testReturn(a) 
```

就像@Aditya 所说，R 通过值传递，而不是通过引用传递，这与 Fortran 中子例程的工作方式不同。一旦你`a`对函数内部进行了更改，就会在函数内部创建一个副本`a`。此新版本仅在功能范围内相关。将它传递给函数外部环境的方法是使用返回参数 via `return()`。

返回结果后，您仍然需要将其分配给全局环境中的新变量。在您展示的示例中，该对象未分配给任何新对象，而只是打印到屏幕上。要将其分配给 的全局值`a`，只需使用我上面列出的代码。

# php - 如何在数组PHP的末尾删除一个元素并在开头添加一个元素

> ID：15748471
> 
> 赞同：0
> 
> 时间：2013-04-01T17:41:27.873
> 
> 标签：php, arrays

好的，所以我把头撞在墙上，但我无法弄清楚这一点，我正在 PHP 中制作最近的项目列表，我也想在其中添加一个元素作为数组的开头并在我有 5 后在末尾删除 1数组中的元素，但这不起作用

```
if(!isset($_SESSION['recent_items'])) {
    $_SESSION['recent_items'] = array();
}

if(isset($_SESSION['recent_items'])) {
    if(count($_SESSION['recent_items']) <= 4) {
        array_push($_SESSION['recent_items'], $script_id);
    } else {
        array_shift($_SESSION['recent_items']);
        array_unshift($_SESSION['recent_items'], $script_id);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:42:35.417

你需要的是`array_pop`而不是`array_shift`

```
if(!isset($_SESSION['recent_items'])) {
    $_SESSION['recent_items'] = array();
}

if(isset($_SESSION['recent_items'])) {
    if(count($_SESSION['recent_items']) <= 4) {
        array_push($_SESSION['recent_items'], $script_id);
    } else {
        array_pop($_SESSION['recent_items']);
        array_unshift($_SESSION['recent_items'], $script_id);
    }
} 
```

# postgresql - 将主键更改为自动递增

> ID：15748473
> 
> 赞同：24
> 
> 时间：2013-04-01T17:41:30.640
> 
> 标签：postgresql, pgadmin

我有一个表 Player 和一个主键 playerID，它是 character(7)。我已经在这个表中有一些记录，并且还有一些其他的表有 playerID 作为外键，这些表也已经有一些记录。

如何将 playerID 设置为自动递增？看了一会觉得应该从一开始就做这个，但既然现在做不到，那有没有我做得到的呢？

例如，当我运行这个

```
ALTER TABLE player ADD COLUMN key_column BIGSERIAL PRIMARY KEY; 
```

它返回一个错误：

```
ERROR: multiple primary keys for table "player" are not allowed 
```

如果我删除现有的 playerID，其他表中引用它的记录也将被删除。

有没有办法将现有的主键 playerID “更改”为自动递增？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-01T18:06:49.950

我想通了：只需向 playerID 添加一个自动增量默认值：

```
create sequence player_id_seq;
alter table player alter playerid set default nextval('player_id_seq');
Select setval('player_id_seq', 2000051 ); --set to the highest current value of playerID 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T18:34:29.273

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

   -- create som data to play with
CREATE TABLE bagger
        ( player_id CHAR(6)
        , tralala varchar
        );

  -- populate the table
INSERT INTO bagger(player_id,tralala)
SELECT gs::text, 'zzz_' || gs::text
FROM generate_series(1,10) gs
        ;

SELECT * FROM bagger;

  --
  -- create the sequence, change the datatype and bind it to the sequence
  --
CREATE SEQUENCE player_id_seq;
ALTER TABLE bagger
        ALTER COLUMN player_id TYPE INTEGER USING player_id::integer
        , ALTER COLUMN player_id SET NOT NULL
        , ALTER COLUMN player_id SET DEFAULT nextval('player_id_seq')
        ;
ALTER SEQUENCE player_id_seq
        OWNED BY bagger.player_id
        ;
   --
   -- reset the sequence to containe the maximum occuring player_id in the table
   --
SELECT setval('player_id_seq', mx.mx)
FROM (SELECT MAX(player_id) AS mx FROM bagger) mx
        ;
SELECT * FROM bagger;
\d bagger 
```

输出：

```
DROP SCHEMA
CREATE SCHEMA
SET
CREATE TABLE
INSERT 0 10
 player_id | tralala 
-----------+---------
 1         | zzz_1
 2         | zzz_2
 3         | zzz_3
 4         | zzz_4
 5         | zzz_5
 6         | zzz_6
 7         | zzz_7
 8         | zzz_8
 9         | zzz_9
 10        | zzz_10
(10 rows)

CREATE SEQUENCE
ALTER TABLE

 setval 
--------
     10
(1 row)

 player_id | tralala 
-----------+---------
         1 | zzz_1
         2 | zzz_2
         3 | zzz_3
         4 | zzz_4
         5 | zzz_5
         6 | zzz_6
         7 | zzz_7
         8 | zzz_8
         9 | zzz_9
        10 | zzz_10
(10 rows)

                                 Table "tmp.bagger"
  Column   |       Type        |                      Modifiers                      
-----------+-------------------+-----------------------------------------------------
 player_id | integer           | not null default nextval('player_id_seq'::regclass)
 tralala   | character varying | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:59:17.757

我不认为你可以在一个表中有 2 个主键，并且因为 playerID 数据类型是 character(7) 我不认为你可以将其更改为自动递增。

因此，如果您希望能够添加新的主键，我相信您必须删除 playerID 上的主键约束。

由于您的表上已经有数据，并且您在其他表中使用 playerID 作为外键，因此我建议您复制您的播放器表并在第二个表上测试这些更改以避免损坏您的数据。

但在您尝试所有这些之前，请确保您尝试使用创建您正在更改的表的相同 db-user 进行此更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-26T13:37:26.930

以下代码将自动递增设置为 PGSQL 中的现有列：

```
ALTER TABLE schema.table ALTER COLUMN id 
  SET DEFAULT nextval('schema.table_id_seq'::regclass); 
```

# iphone - 在 iOS 和非公共 API 的 Phonegap 应用程序中使用 Jquery Mobile

> ID：15748475
> 
> 赞同：0
> 
> 时间：2013-04-01T17:41:32.953
> 
> 标签：iphone, ios, cordova, app-store

我正准备将我的第一个 iOS 应用程序发送到应用商店，所以我正在阅读 AppStore 指南。我使用 JQuery Mobile Framework 创建了一个带有 Phonegap 的应用程序。

我有两个问题：

**1-) 我只是想知道这条线是什么意思？**

```
Apps that use non-public APIs will be rejected 
```

这些“非公共 API”是什么？我在我的应用程序中使用了来自 github 的一些 API。

**2-) 我在使用 Jquery Mobile 时犯了错误吗？**

```
Apps that are not very useful, unique, are simply web sites bundled as Apps, or do not provide any lasting entertainment value may be rejected 
```

我的应用程序就像一个本地应用程序，不需要互联网连接。但我不使用objective-c。这使我的应用程序成为“捆绑为应用程序的网站”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:50:38.137

1.  非公共 API 是 Apple 自己的未记录 API：例如，您不能使用 UIWebDocumentView，因为它是 Apple 在自己的应用程序中使用的未记录类。如果您根本不使用 Objective-C，这与您无关。

2.  如果您在您的应用程序中使用任何开源或商业框架，请务必检查许可证以查看您是否有权在您的产品中使用它。

3.  在谈论捆绑为应用程序的无用应用程序和网站时，Apple 的意思是他们不希望应用程序充当品牌的广告并且除了推广该品牌之外没有其他特定用途。只要您的应用程序稳定且具有自我推广以外的目的，Apple 就不会关心您使用什么技术来制作它。

# cakephp - Cakephp 2.3 $this->Auth->allow() 没有按预期工作

> ID：15748477
> 
> 赞同：2
> 
> 时间：2013-04-01T17:41:40.650
> 
> 标签：cakephp, authentication, cakephp-2.3

我正在尝试在 CakePHP 2.3 中使用 AuthComponent，但它的行为不像我期望的那样。

基本上，当我这样做时

$this->Auth->allow('view');

用户只应该有权访问视图方法，这就是发生的事情。

问题是，当用户登录时，他突然也可以访问“添加”方法（我目前在控制器中唯一的其他方法。当他注销时，他不再有权添加。

这是我的代码：

//应用控制器

```
<?php
App::uses('Controller', 'Controller');

class AppController extends Controller {

public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Blowfish' => array(
                'fields' => array('username' => 'email', 'password' => 'password')
            )
        )
    )

);

public function beforeFilter() {      
  $this->Auth->deny('add');
  $this->Auth->allow('view');
}

} 
```

我的 PagesController 就是这样：

```
<?php
App::uses('AppController', 'Controller');

class PagesController extends AppController {

public $uses = array('Pages');

public function view($id = null) {
       echo 'In view';
    }

public function add($id = null) {
       echo 'In add';
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:04:36.870

您误解了 allow()/deny() 的作用。它们的意思是指定是否可以通过身份验证（也称为登录）访问操作。这并不意味着控制授权，即在用户登录后控制对操作的访问。为此，您需要配置授权。阅读[本文](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)应该可以帮助您更好地理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T19:02:17.837

如果你在 cakephp 2.x 上工作，你必须这样做：

```
function beforeFilter(){       
    $this->Auth->allow(array('action you want to allow1','action you want to allow2'));
} 
```

*   允许（数组（））而不是允许（）

---将该代码放入控制器具有您希望允许无需登录即可访问的操作

如果你使用 $this->Auth->allow() 你必须调用 parent::beforeFilter(); 在函数 beforeFilter() 中是这样的：

```
function beforeFilter(){     
             parent::beforeFilter();    
    $this->Auth->allow('add','view');
} 
```

# javascript - 在 javascript 函数中更改服务器端控件的值

> ID：15748482
> 
> 赞同：1
> 
> 时间：2013-04-01T17:42:01.257
> 
> 标签：javascript, asp.net

我想在 javascript 函数中设置标签的文本，函数调用并将文本设置为标签，我看到了，但是当我想从文本后面的代码中读取标签的文本时，文本是前一个文本（例如，如果标签的文本是“5”并且我设置它在函数中为“10”，但在文本后面的代码中为“5”）

**Javascript函数**

```
function PopUpFunction(code) {
  $("#<%= lblStatus.ClientID %>").text(code);
  return false;
} 
```

**设置`click event`LinkBut​​ton 的功能**

```
lnk.Attributes.Add("onclick", "PopUpFunction(10);"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:42:56.443

您已将文本用作属性，但它是一个函数，使用 text() 而不是文本

```
$("#<%= lblStatus.ClientID %>").text(code); 
```

发出警报以检查您的页面是否已刷新或重定向

```
function PopUpFunction(code) {
  $("#<%= lblStatus.ClientID %>").text(code);
  alert($("#<%= lblStatus.ClientID %>").text());
} 
```

您可以尝试返回 false 以停止回发。

```
lnk.Attributes.Add("onclick", "return PopUpFunction(10);");

function PopUpFunction(code) {
  $("#<%= lblStatus.ClientID %>").text(code);
  alert($("#<%= lblStatus.ClientID %>").text());
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:54:35.540

**您的代码不起作用的原因**

发生这种情况是因为您调用了 JavaScript 函数并设置了值，但之后页面重新加载......所以原始值覆盖了新值......

如果您返回 False 那么它不会回发数据并且页面不会重新加载..

像下面这样尝试......它会帮助你......

**C＃**

```
 lnk.Attributes.Add("onclick", "return PopUpFunction(10);"); 
```

**Javascript：**

```
 <script>
       function PopUpFunction(code) {
           document.getElementById("lblStatus").innerHTML = code
           return false;
       }
   </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:09:10.537

`(**<script type="text/javascript" src="../../Scripts/jquery-ui-1.9.2.min.js"></script>**)`您是否在页头标记中引用了任何脚本文件（任何最小化版本） ？

必须在您的页面中添加任何最小化版本脚本。并首先在 IE 浏览器中运行您的应用程序。让知道检查IE浏览器是否抛出任何错误？

# c++ - 使用可变参数模板和类型列表将不透明数组映射到函数参数

> ID：15748483
> 
> 赞同：2
> 
> 时间：2013-04-01T17:42:02.127
> 
> 标签：c++, c++11, variadic-templates, stdbind

**TLTR**：我想根据存储在可变参数模板列表中的索引定义的特定顺序将模板容器中的一些数组映射到函数的参数（我想不出更简单的方法来定义问题）。

数组是使用存储的，`void*`但数组和函数参数之间的类型安全由辅助类保证。同一个帮助类必须扩展给定的参数包，获取适当的数组，将它们绑定到函数指针并调用函数。这就是我卡住的地方。

**详细信息**：对于冗长的问题和无法编译的发布代码，我提前道歉，但我尽量简洁。

问题在于将容器的正确成员映射到函子对象。容器有一个由[typelist](http://books.google.co.uk/books?id=aJ1av7UFBPwC&lpg=PA64&ots=YRgG1oOi6Y&dq=loki%20typelists&pg=PA64#v=onepage&q=loki%20typelists&f=false)定义的数组列表，其实现类似于[这个](http://loki-lib.sourceforge.net/html/a00681.html)。

为简单起见，我们假设 typelist 辅助对象`TLAlg::length<TL>`和`TLAlg::TypeAt`被定义并允许用户分别访问 typelist 的长度和第 N 个类型。

容器类为类型列表（称为字段）中的每种类型分配一个数组，并存储一个指向这些缓冲区的不透明指针。实现类型安全的 getter 以访问特定的字段索引。其实现如下：

```
// container class, stores an array for each type in the typelist
template<class TL>
class Volume {
public:
    // list of opaque buffers
    void *opaque_buffers[TLAlg::length<TL>::value];

    template<int size>
    Volume(const size_t (&dim)[size]){
        // each opaque_buffers is initialized here
        ...
    }

    // getters are using the field index for type-safety
    template <int index> typename
    TLAlg::TypeAt<TL, index>::Result &
    get(const std::initializer_list<size_t> &position);
}; 
```

我们想要实现一个`Functor`对象，该对象将使用类型列表的特定子集在卷上应用给定函数。用户不是直接操作数组，而是给出他想要访问的字段的索引列表和要应用的函数的指针。函子对象负责设置正确的参数。

为了提高类型安全性，我们将它们分成两个列表：只读和读/写（读`const`和非`const`）。给定的函数原型必须与函子对象的定义一致：代码只有在给定的函数指针与参数定义完全匹配时才能编译，所以我们不必担心类型不匹配。函子的实现是：

```
template<typename TL, class T1, class T2> struct Functor{};
template< typename TL,
          template<size_t...> class T1, size_t... A1, // read only arguments
          template<size_t...> class T2, size_t... A2  // read-write arguments
        >
struct Functor< TL, T1<A1...>, T2<A2...> >{
    // type of the function pointer
    typedef void (*Type)(const typename TLAlg::TypeAt<TL, A1>::Result* ... ,
                               typename TLAlg::TypeAt<TL, A2>::Result* ...);

    Functor(Volume<TL> &v, Type f): f(f){
        // At this point we have everything we need: the volume, the function
        // and the list of arguments, but how to combine them all?

        // maybe some magic here to map the opaque pointers to the arguments?
    }

    void operator()(){
        // or maybe here?
    }
} 
```

如您所见，函子目前没有做任何事情，因为我不知道如何将两个参数包映射到容器数组并将它们绑定到函数指针......

为清楚起见，下面是仿函数类的使用示例：

```
// main Typelist
typedef Typelist<float, Typelist<double, Typelist<int, NullType>>> Pixel;

// function we want to apply: reads first and last field of the list and updates second
void foo(const float  *f1, 
         const int    *f3,
               double *f2){}

// helper class to store the parameter packs
template<size_t ... T> struct Pack {};

int main(){
    // volume declaration
    Volume<Pixel> volume((size[]){1024,1024});

    // delare typesafe functor
    Functor<Pixel,     // typelist
            Pack<0,2>, // list of read-only fields
            Pack<1>    // list of read-write fields
           > apply_foo(volume, foo);

    apply_foo(); // <- this does nothing at the moment
} 
```

我尝试了`std::forward`很`std::bind`长时间，但我还没有找到正确的解决方案。可能会考虑替换类型列表，`std::tuple`但最好保留当前定义。

这段代码可能看起来很奇怪而且不必要地复杂，但它是一个非常简化的大型框架版本，使用这些类是有意义的。

任何帮助将不胜感激。

**Yakk的回答澄清：**

我确实需要一个类型列表，因为我在其中做了更多的魔法，例如列表的每个元素都可以是一个元组而不是单个类型来关联一个名称。这允许整洁的代码，如：

```
typedef MakeTypeList((float,  p),
                     (float,  bnd),
                     (float,  gosa)) HimenoFields;

// I can now use aliases, and the declaration order does not matter in the code.
// here is an access to the second field:
volume.get<HimenoFields::bnd>({0,0,0}); 
```

你可以想象这如何与我想用函子实现的那种操作很好地结合起来。

其次，我明白你为什么对吸气剂感到困惑。正如我最初所说，这是一个非常简化的代码版本，尽管问题很长。在实际程序中，体积是多维的，要么在单个数组中展平，要么在多维数组中分配，这就是 getter 需要完整坐标的原因。这些 getter 有几种不同参数的实现。

最后，Functor 不需要知道将函数应用到哪个元素，因为它本身控制迭代空间并应用预定义的骨架（即模板、波前......）。为了简单起见，我再次省略了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:26:36.607

首先，我会重写你的`type_list`：

```
template<typename... Ts>
struct type_list {}; 
```

使用可变类型而不是您的 18 参数破解。写作`type_at<n>::type`并不`index_of<T>::value`难。这些和基于对的映射`TypeList`也不难。

```
template<typename list>
struct make_TypeList;

template<typename T0, typename T1, typename...Ts>
struct make_TypeList<type_list<T0, T1, Ts...>> {
  typedef typename make_Typelist< type_list<T1, Ts...> >::type tail;
  typedef TypeList< T0, tail > type;
};
template<typename T0>
struct make_TypeList<type_list<T0>> {
  typedef TypeList< T0, NullType > type;
};
template<>
struct make_TypeList<type_list<>> {
  typedef NullType type;
}; 
```

如果你真的需要它。有理由使用非类型列表，但您没有展示任何内容。

建立一个编译时类型索引的集合有点棘手，但如果你传入一个上限，你就可以做到。目标是创建一个序列：

```
template<size_t... s>
struct seq {}; 
```

如果您在编译时获取这些索引，这会更容易。一旦你有了这个序列，并且你有了`type_at`，你就可以编写一个类似这样的调用函数：

```
template<size_t... s, typename... Ts>
void evaluate( seq<s...> unused, void(*func)(Ts*... ts) ) {
  func( &get_at<s>()... );
} 
```

我们将序列直接解压缩到函数调用中。碰巧的是，所讨论的序列通常只是`0,1,2,3,4,...,n-1`，可以很容易地生成：

```
template<size_t max, size_t... s>
struct make_seq:make_seq<max-1, max-1, s...> {};
template<size_t... s>
struct make_seq<0, s...> {
  typedef seq<s...> type;
}; 
```

明确一点：`operator()`在做 a 之后调用一个辅助函数`make_seq<sizeof...(Ts)>::type()`，将它传递给辅助函数，然后调用`func( &get_at<s>(/*n maybe?*/)... )`，并且 bob 是你的叔叔

让我困惑的一件事是：

```
// getters are using the field index for type-safety
template <int index> typename
TLAlg::TypeAt<TL, index>::Result &
get(const std::initializer_list<size_t> &position); 
```

我不确定为什么`const std::initializer_list<size_t> &position`需要，或者至少为什么你没有：

```
template <int index> typename
TLAlg::TypeAt<TL, index>::Result &
get_at(size_t n); 
```

如果您是多种类型的数组，这使我认为您`operator()`的仿函数中缺少“我将此仿函数应用于哪个索引” 。`Volume`

但我强烈怀疑“制作一组索引，调用一个辅助函数，这样你就可以得到勇气，然后在函数调用中扩展包”是你缺少的技巧。

# python - 从 mongodb 集合中提取所有 _id 的最佳方法

> ID：15748486
> 
> 赞同：4
> 
> 时间：2013-04-01T17:42:16.660
> 
> 标签：python, mongodb, indexing, pymongo

从 mongodb 集合中提取所有 _id 的最佳方法是什么？我正在使用 pymongo 与 mongodb 一起工作。以下代码：

```
for item in db.some_collection.find({}, {'_id': 1}):
    # do something 
```

需要一些时间来遍历所有集合。我只需要 _id 值，它们都应该适合内存。为什么这段代码没有立即完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T17:51:16.650

使用[`distinct`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.distinct)：

```
some_collection.distinct('_id') 
```

* * *

```
In [5]: c = pymongo.connection.Connection('127.0.0.1')

In [6]: c['test']['test'].insert({'a': 2})
Out[6]: ObjectId('5159c8e9d286da0efccb7b70')

In [7]: c['test']['test'].insert({'a': 3})
Out[7]: ObjectId('5159c8ecd286da0efccb7b71')

In [8]: c['test']['test'].insert({'a': 5})
Out[8]: ObjectId('5159c8edd286da0efccb7b72')

In [9]: c['test']['test'].distinct('_id')
Out[9]:
[ObjectId('5159c8e9d286da0efccb7b70'),
 ObjectId('5159c8ecd286da0efccb7b71'),
 ObjectId('5159c8edd286da0efccb7b72')] 
```

# ruby-on-rails-3 - 如何通过 hidden_ field 将“nil”作为参数值传递？

> ID：15748487
> 
> 赞同：0
> 
> 时间：2013-04-01T17:42:17.560
> 
> 标签：ruby-on-rails-3

在我的应用程序控制器中

```
class FeedEntriesController < ApplicationController
  def index
    @search = FeedEntry.search(params[:search])
    @feed_entries = @search.page(params[:page])
    @app_keys = AppKey.all
  end
end 
```

在我的 Views/feed_entries/index.html.erb

```
<li>
    <%= form_for @search do |f|%>
    <%= f.hidden_field :last_clicked_on, value: 'nil' %>
    <%= f.submit "History" %>
    <% end %>
</li> 
```

我正在使用`gem 'meta_search'`for 搜索数据库。

feed_entries 表包含 last_clicked_on:datetime 属性，默认为 nil。我只想将“nil”作为 last_clicked_on 属性的值传递。这样，控制器将`last_clicked_on = nil` 单独搜索。

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:53:16.320

如果您总是想搜索`last_clicked_on`nil，您可能应该为您的模型添加一个[范围。](http://guides.rubyonrails.org/active_record_querying.html#scopes)

如果您不想这样做，您可以跳过隐藏字段，只需添加到 params 哈希：

```
params[:search][:last_clicked_on] = nil 
```

在执行搜索之前

# php - 在 PHP 中设置此 XML 的正确方法

> ID：15748489
> 
> 赞同：0
> 
> 时间：2013-04-01T17:42:27.593
> 
> 标签：php, xml

由于代码和描述错误而更新

我对 XML 还是很陌生，但是在使用内置函数创建 XML 文件时我自己掌握了。

我可以像这样创建文件...

```
$xml['doc'] =       new DOMDocument('1.0', 'utf-8'); 
```

依此类推，它的输出是这样的......

```
<?xml version="1.0" encoding="utf-8"?>
<adf>
elements...
</adf> 
```

我需要的是...

```
<?xml version="1.0" encoding="utf-8"?>
<?adf version="1.0"?>
<adf>
elements...
</adf> 
```

正在寻找添加 <adf version="1.0"?> 的正确方法？它不需要结束标签。我遵循所需的特定格式。特别是此处记录的 ADF 1.0.... [http://en.wikipedia.org/wiki/Auto-lead_Data_Format](http://en.wikipedia.org/wiki/Auto-lead_Data_Format)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:45:59.210

您想要的输出不是有效的 XML，因为在`<?xml ... ?>`声明之前不允许任何内容。您的自定义内容需要成为正常 XML 流的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:01:42.730

该`<?target content?>`构造称为[XML 处理指令](http://en.wikipedia.org/wiki/Processing_Instruction)。

`<?xml ?>`是一种特殊情况：它必须是文档中的第一件事。您的`<?adf version="1.0" ?><?xml version="1.0"?>`示例不是格式良好的 XML。不过`<?xml version="1.0"?><?adf version="1.0" ?>`还好。

您可以使用以下命令轻松创建处理指令[`createProcessingInstruction`](http://php.net/manual/en/domdocument.createprocessinginstruction.php)

```
$doc = new DOMDocument('1.0', 'utf-8');
$pi = $doc->createProcessingInstruction('adf', 'version="1.0"');
$doc->appendChild($pi);
// you still need a root element to be well-formed
$doc->appendChild($doc->createElement('adf'));
echo $doc->saveXML(); 
```

此代码将打印以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<?adf version="1.0"?>
<adf/> 
```

请注意，处理指令的内容*不是*由 xml 处理器解析的——它只是文本，就像注释一样。如果您在其中使用类似 xml 的属性语法，您将不得不自己解析它。

在绝大多数情况下，使用真实元素和属性是比使用自定义处理指令更好的选择。（ADF 需要一个处理指令，所以在这种情况下当然应该使用一个。）

# mysql - MySQL 类型 VARCHAR 与 TEXT

> ID：15748491
> 
> 赞同：0
> 
> 时间：2013-04-01T17:42:33.200
> 
> 标签：mysql, database, database-design

我被要求在访问 MySQL 数据库的 Web 应用程序（php、jquery、html）上添加功能并修复已知错误。我注意到几个管理页面没有正确更新。具体来说，正在输入的文本在大约 20 个字符处被截断。在对代码、数据库例程和数据库字段进行了一些检查以确保没有字符限制（我相信该字段被声明为 VARCHAR(60)）之后，我决定看看如果我将字段更改为会发生什么输入文本。它开始工作了！

所以这个问题得到了解决，然而，我读到 TEXT 类型已被贬值，建议使用 VARCHAR 类型。所以问题是，我只是将它保留为 TEXT 类型而不担心它，还是我努力让它作为 VARCHAR 工作，有谁知道为什么 VARCHAR 会起作用？

# objective-c - 如何将函数的结果作为宏变量传递？

> ID：15748492
> 
> 赞同：0
> 
> 时间：2013-04-01T17:42:35.000
> 
> 标签：objective-c, c, function, pointers, macros

假设我已经设置了一个宏扩展如下......

```
#define WARN_START @"DANGER"
#define WARN_RESET @"THE COAST IS CLEAR"
#define WARN(x) WARN_START x WARN_RESET 
```

`INPUT` `WARN(@"*** Your boss is coming. ***")`

`OUTPUT``DANGER *** Your boss is coming. *** THE COAST IS CLEAR` ✅</p>

假设我有一个函数……</p>

```
NSString * WhosComing(void){ return @"*** Some fool. ***"; } 
```

**如何在不先将其分配给变量的情况下将此类函数的结果传递给宏，即**

`WARN(WhosComing())`

`ERROR``expected ')'`

我搞砸了额外的括号，即

`#define WARN((x))`…… 或者……`WARN_START (x) WARN_RESET`但是……</p>

`ERROR``invalid operands to binary expression`， ETC。

以及尝试将 cuntion 作为指针或其他东西传递，即`WARN(&WhosComing())`无济于事。我确信这是可能的/直接的……但我没有计算机科学学位，所以我从来没有学过……对某人来说容易回答吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:58:11.090

你不能用宏做你正在尝试的事情。在编译过程中连接相邻的字符串文字是 C 语言（以及因此是 Objective-C、C++）的一个特性，这对于 Objective-C 进行了扩展以包含`NSString`文字。

您的宏扩展为：

```
@"DANGER" @"*** Your boss is coming. ***" @"THE COAST IS CLEAR" 
```

然后编译器将这 3 个文字连接成 1。

但是传入你的函数，你会得到：

```
@"DANGER" WhosComing() @"THE COAST IS CLEAR" 
```

这是无效的代码。

有多种解决方案；如果真的担心函数调用的成本，您可以使用一个真正的函数，将其内联：

```
NS_INLINE NSString *WARN(NSString *msg)
{
   return [NSString stringWithFormat:@"%@%@%@", WARN_START, msg, WARN_RESET];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:52:34.047

好吧，您不能在编译时插入函数的结果，因为显然函数的结果在执行之前不存在。但是你可以这样做：

```
#define WARN(x) [NSString stringWithFormat:@"%@ %@ %@", WARN_START, (x), WARN_RESET] 
```

但这并不比函数更好，不是吗？如果宏的参数是文字字符串，您可以按照您想要的方式编写它。但是由于参数的值在编译时甚至都不知道，所以在宏扩展阶段你不能用它做很多事情，所以发出一个在运行时产生你想要的值的表达式几乎是你唯一的选择.

# sql - select 语句可以包含嵌套的结果集吗？

> ID：15748497
> 
> 赞同：10
> 
> 时间：2013-04-01T17:42:54.650
> 
> 标签：sql, sql-server

给定下表和示例数据：

```
create table Orders (
  ID int not null primary key, 
  Customer nvarchar(100) not null);

create table OrderItems (
  ID int not null primary key,
  OrderID int not null foreign key references Orders(ID),
  Product nvarchar(100) not null);

insert into Orders values (1, 'John');
insert into Orders values (2, 'James');
insert into OrderItems values (1, 1, 'Guitar');
insert into OrderItems values (2, 1, 'Bass');
insert into OrderItems values (3, 2, 'Guitar');
insert into OrderItems values (4, 2, 'Drums'); 
```

我想知道我是否可以查询父`Orders`表并将子`OrderItems`表作为嵌套结果集获取到父结果中。像这样的东西：

```
| ORDER.ID | ORDER.CUSTOMER | ORDER.ORDERITEMS                   |
------------------------------------------------------------------
|          |                | ORDERITEMS.ID | ORDERITEMS.PRODUCT |
|          |                |-------------------------------------
|        1 |           John |             1 |             Guitar |
|          |                |             2 |               Bass |
|        2 |          James |             3 |             Guitar |
|          |                |             4 |              Drums | 
```

我想到的查询（在 SQL Server 中不起作用）是这样的：

```
-- doesn't work, but shows the intent to have nested result sets
select 
  o.OrderID [Order.ID], o.Customer [Order.Customer],
  (select 
     oi.ID [OrderItems.ID], oi.Product [OrderItems.Product] 
     from OrderItems oi where o.ID = oi.OrderID
  ) [Order.OrderItems]
from Orders o; 
```

这只是一个概念性问题，因为我试图想办法以最少的重复获取相关数据（`join`例如，与 a 会发生的情况相反）。

SQL Fiddle[在这里](http://sqlfiddle.com/#!6/5405a/2)。

**更新**

我从[这个答案](https://softwareengineering.stackexchange.com/a/91292/21384)中发现 Oracle 使用游标表达式支持它：

```
select 
  o.*,
  cursor(select oi.* from OrderItems oi where o.ID = oi.OrderID) as OrderItems
from Orders o; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T17:46:25.590

不，这真的不可能。

SQL Server 不支持嵌套关系和[NF²](http://en.wikipedia.org/wiki/Database_normalization#Non-first_normal_form_.28NF.C2.B2_or_N1NF.29)

尽管您可以使用`FOR XML PATH`以分层方式将其恢复。

```
SELECT ID       AS [@ID],
       Customer AS [@Customer],
       (SELECT ID      AS [@ID],
               OrderID AS [@OrderID],
               Product AS [@Product]
        FROM   OrderItems
        WHERE  OrderItems.OrderID = o.ID
        FOR XML PATH('OrderItems'), TYPE)
FROM   Orders o
FOR XML PATH('Order'), ROOT('Orders') 
```

退货

```
 <Orders>
      <Order ID="1" Customer="John">
        <OrderItems ID="1" OrderID="1" Product="Guitar" />
        <OrderItems ID="2" OrderID="1" Product="Bass" />
      </Order>
      <Order ID="2" Customer="James">
        <OrderItems ID="3" OrderID="2" Product="Guitar" />
        <OrderItems ID="4" OrderID="2" Product="Drums" />
      </Order>
    </Orders> 
```

这不会重复父母`Orders`

# .net - System.TypeLoadException 在 .NET 4.0 迁移后引用 .NET 1.0 程序集

> ID：15748509
> 
> 赞同：3
> 
> 时间：2013-04-01T17:43:17.273
> 
> 标签：.net, com, migration, arcgis

有一个项目从 .NET 3.5 迁移到 .NET 4.0。该项目有一些对 .NET 1.0 程序集的引用，这些程序集是 COM 对象的包装器。这些 .NET 1.0 程序集和 COM 对象是外部公司的产品。该项目可以编译，但在运行时，当软件引用那些 1.0 程序集中定义的对象时，第一个点会引发异常：

`System.TypeLoadException: Could not load the structure 'ESRI.MapObjects2.Core.ShapeTypeConstants' from assembly 'ESRI.MapObjects2.Core, Version=2.4.1.0, Culture=neutral, PublicKeyToken=8fc3cc631e44ad86'.`

该结构被标记为符合类型等效条件，但它具有静态或非公共字段。实际的“结构”是一个枚举，在 Reflector 中它看起来像这样：

`[Guid("B027CAB1-6908-11D2-AF98-006097DA3688")] public enum ShapeTypeConstants { moShapeTypeEllipse = 0x1a, moShapeTypeLine = 0x16, moShapeTypeMultipoint = 0x18, moShapeTypePoint = 0x15, moShapeTypePolygon = 0x17, moShapeTypeRectangle = 0x19 }`

内部异常为空。我可以看到 0x80131522 (-2146233054) 的 HRESULT，这意味着 COR_E_TYPELOAD。我不认为我缺少任何本机 dll 或程序集，因为我们的 .NET 工作正常（并且它使用相同的代码、相同的引用）。

如何解决此异常？是否有一种简单的方法，例如在 dll 的配置文件中指定 requiredRuntime 或在 csproj 的参考部分中指定 requiredTargetFramework？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:22:29.863

如果情况很恶劣，那我也可以玩得很粗糙。

如果我们查看实际的错误消息，它会抱怨“结构”中的“静态或非公共”字段。所谓结构其实就是一个枚举。似乎是 COM 层上的包装器枚举。还有几十种不同的包装枚举，每个值都是明确指定的。每个枚举还包含一个名为“value__”的私有 int 变量。更具体地说，它看起来像这样： `.field private specialname rtspecialname int32 value__`

那么我们为什么不简单地将它们公开：

1.  用 ildasm 拆解源码。
2.  用 public 替换 private 范围限定符（如果我没记错的话：替换了 49 个位置）。
3.  最后，我使用修改后的 IL 中的 ilasm 编译了一个 dll。

瞧！生成的 dll (ESRI.MapObjects2.Core.dll) 是 311.296 字节，而原来的长度是 323.584 字节，这让我还是有点怀疑。但是，如果我用我修改过的 dll 覆盖 GAC 中的原始 dll，一切正常，我们的软件就不会再崩溃了。我无法确认一切都 100% 有效，因为我并不真正了解我们软件的 GIS 部分。但是到目前为止我设法得到的还可以。让人担心的是：如果公共变量的存在会改变任何结构布局，它可能会导致枚举值的偏移或其他混淆。但希望它不会混淆任何东西。这是一个快速破解，在生产中需要在安装 MapObjects42 后覆盖 GAC 中的 ESRI.MapObjects2.Core.dll。叹。所以我不一定建议任何人，但它似乎奏效了，它给了我一些满足感，一种报复的感觉。黑客在一天结束时给了我一点快乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:40:32.743

对其他人来说可能的解决方案：省略供应商提供的 .NET 包装器 dll，并直接从我们的项目中引用底层 COM 组件。Joe Parker 在此线程中对此进行了描述：http: [//social.msdn.microsoft.com/Forums/zh-CN/vblanguage/thread/81c44b22-7bdc-4379-b0f6-953e1f96adfe](http://social.msdn.microsoft.com/Forums/zh-CN/vblanguage/thread/81c44b22-7bdc-4379-b0f6-953e1f96adfe)。“我们能够使用 MapObjects 2.3 解决这个问题，方法是将控件引用为 COM 组件，而不是使用 MapObjects 附带的 .NET dll。从您的项目中删除 ESRI.??? 引用，然后添加对 COM 组件的引用” ESRI MapObjects 2.3"。这用实际在 VS 2010 中运行的 .NET 代码包装了 COM 组件。

然后对于可视组件，右键单击您的工具箱并“选择项目”。从“COM components”选项卡中选择“MapObjects 2.3 Map Control”，然后您就可以将控件添加到表单中。在我的情况下，我必须将其添加到表单中，然后将其删除，这样 Visual Studio 就会自动向项目添加对“AxMapObjects2”的引用。此参考具有视觉控制和一些支持类型。然后我只是用 AxMapObjects2.AxMap 替换了旧的 AxMap 引用，用 MapObjects2.Typename 替换了其他类型，一切正常（至少到目前为止）。”

我认为他的方法也可以推广到其他类似情况：“app<->vendor .NET wrapper<->vendor COM objects”。不幸的是，在我们的案例中，该方法可能并不容易，因为我们不仅在应用程序中托管了一个 COM 控件，而且在我们软件的其他模块中，我们还具有导出和导入功能以及其他零散的东西。所以我不能只在那里引用 GUI COM 组件，我只需要在其他地方的一些核心功能。但我想我会分享这个发现，它可能对其他人有所帮助。我 100% 确定不是 MapObjects2，我们的应用程序将是唯一的受害者。随着越来越多的项目将迁移到 .NET 4.0 并且仍然有一些旧的遗留负担可以面对这个问题。

# popup - 询问专家弹出窗口

> ID：15748510
> 
> 赞同：2
> 
> 时间：2013-04-01T17:43:18.380
> 
> 标签：popup

今天在寻找一些答案时，我得到了一个标题为“询问专家”的“​​弹出窗口”，它并不是真正的弹出窗口，看起来更像是 javascript。单击“窗口”，您会看到一个带有“专家”的聊天框。“专家”总是很有趣，但知识渊博。问我这个人代表什么公司，“这取决于”。我必须说非常有趣的对话。我检查了所有正在运行的进程，没有看到任何我不认识的东西。病毒扫描已经干净了。这与stackoverflow有关吗？我没有在我浏览过的其他网站上看到它。虽然这很有趣，但我需要知道是否需要备份重要数据并应用良好的磁盘映像。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:00:04.760

我也知道了，它给出了自动响应，它是愚人节玩笑的机器人，别担心它不是病毒 :)

# ios - 在 2.5.0 中使用 Cordova 媒体对象的 Soundcloud 流式传输

> ID：15748516
> 
> 赞同：1
> 
> 时间：2013-04-01T17:43:29.573
> 
> 标签：ios, cordova, audio-streaming

我正在使用 IOS 中引用的 Cordova 媒体对象：

[http://cordova.apache.org/docs/en/2.5.0/cordova_media_media.md.html#Media](http://cordova.apache.org/docs/en/2.5.0/cordova_media_media.md.html#Media)

在 android 设备上，它可以完美运行，几秒钟内即可加载。但在 IOS 设备上，有时需要一分钟以上。旁边我的设备变得几乎没有响应。

在控制台中，我收到此通知：

```
 void SendDelegateMessage(NSInvocation *): delegate (webView:resource:didFinishLoadingFromDataSource:) failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode 
```

我已经提到它不是真正的流媒体，而只是将完整的文件加载到设备上。有没有办法解决这个问题？使用科尔多瓦 2.5.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:15:57.563

发生的是cordova，在运行之前先下载文件，我所做的是更改（CDVSound.m）的prepareToPlay方法，使用NSURLConnection下载文件并运行CFRunLoopRun（），这让我可以显示loding图标对用户来说，没有解决问题，但我为我工作。

```
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

if (theConnection) {
  receivedData = [NSMutableData data];
  CFRunLoopRun();
} else {
 // Inform the user that the connection failed.
 }

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

  // This returns control to wherever you called
  // CFRunLoopRun() from, so you can still clean up
  // or do other interesting things.
    NSLog(@"Termina de cargar...");
    CFRunLoopStop(CFRunLoopGetCurrent());

 }

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Error: %@", error);
    CFRunLoopStop(CFRunLoopGetCurrent());
  } 
```

# visual-studio-2010 - 是否有我可以使用的其他 Web 浏览器组件不是基于 IE 的 VS 2010？

> ID：15748518
> 
> 赞同：3
> 
> 时间：2013-04-01T17:43:31.453
> 
> 标签：visual-studio-2010, c#-4.0, webbrowser-control

我正在开发一个需要显示网页并使用该网页中的组件在第二台显示器上显示信息的项目。Internet Explorer 是我存在的祸根，因为我在 Windows 7 上进行开发，而我的大多数雇主客户仍然使用 XP，因此使用 IE8。Windows 7 不支持 IE8 而不跳过一堆箍，这在背后是一个巨大的痛苦。是否有任何 Web 浏览器组件使用 Internet Explorer 以外的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:13:35.750

查看[Awesomium .NET](http://awesomium.codeplex.com/)一个用于 Chromium 工具包的 C# 包装器。它非常强大，您实际上可以获取渲染网页的原始像素数据，或者您可以只使用其中一个预构建的控件嵌入到您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:50:04.143

您可以使用 WebKit.Net [http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)，它是 webkit 浏览器上的 .NET 包装器。

# php - XML DOMDocument 输出未编码引号

> ID：15748520
> 
> 赞同：2
> 
> 时间：2013-04-01T17:43:59.827
> 
> 标签：php, xml, encoding, simplexml, domdocument

我似乎在使用我正在处理的 xml 的无人区。我必须满足一种第三方格式，其中一个部分的格式如下：

```
<description>
    big red 
    <name>'ball'</name>
</description> 
```

在上面的示例中，使用 $dom->saveXML() 输出 xml 结果，其中单引号仍未编码（对于双引号也是如此）。不编码单引号或双引号会在我的一些客户系统中引发错误。

另一方面，SimpleXML 将允许我输出编码的引号，但我无法弄清楚如何创建一个既有文本值又有子节点的节点。意思是，更新文本会删除子项，尝试重新添加子项会删除文本。

我已经为此苦苦挣扎了一段时间，因此不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:03:48.533

由于这不是有效的 XML，因此您可以手动检查输出并使用正则表达式自己对引号进行编码。

# javascript - Javascript - 在构造函数或构造函数的原型属性中设置属性？

> ID：15748521
> 
> 赞同：7
> 
> 时间：2013-04-01T17:44:07.397
> 
> 标签：javascript, constructor, prototype

所以我已经看到并听说应该在构造函数的原型属性中设置方法，这样它就没有几个不同的实例。但是属性本身呢？哪个是最佳实践？如果是这样的话，构造函数不应该总是空的吗？

```
function Gadget(name, color) {
     this.name = name;
     this.color = color;
     this.whatAreYou = function(){
       return 'I am a ' + this.color + ' ' + this.name;
     }
￼} 
```

这真的应该是……？

```
function Gadget(name,color){}

Gadget.prototype.name = name;
Gadget.prototype.color = color;
Gadget.prototype.whatAreYou = function() {
   return 'I am a ' + this.color + ' ' + this.name;
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T17:49:12.877

如果您在原型上设置它，则该属性由所有实例共享。通常不是你想要的。[我在http://js-bits.blogspot.com/2014/10/understanding-prototypical-inheritance.html](http://js-bits.blogspot.com/2014/10/understanding-prototypical-inheritance.html)上写了一篇博客。您通常希望每个小工具都有自己的名称和颜色。您将如何使用您建议的代码来做到这一点？

顺便说一句，您建议的代码有未定义的变量（名称，颜色）

通常的方法是在原型上设置方法，在对象本身上设置常规值。除非您确实希望所有实例共享一个属性，否则就像我们在静态类型语言中所说的静态属性一样。

这是一个例子

```
function Gadget(name,color){
    this.name = name;
    this.color = color;
    // Since all gadgets in on the prototype, this is shared by all instances;
    // It would more typically be attached to Gadget.allGadgets instead of the prototype
    this.allGadgets.push(this);
    // Note that the following would create a new array on the object itself
    // not the prototype
    // this.allGadgets = [];

}

Gadget.prototype.allGadgets = [];
Gadget.prototype.whatAreYou = function() {
    return 'I am a ' + this.color + ' ' + this.name;
}; 
```

要记住的一个重要概念是写入（分配）总是应用于对象本身，而不是原型。然而，读取将遍历原型链以查找该属性。

那是

```
function Obj() {
   this.map = {};
}

function SharedObj() {}
SharedObj.prototype.map = {};

var obj1 = new Obj();
var obj2 = new Obj();
var shared1 = new SharedObj();
var shared2 = new SharedObj();

obj1.map.newProp = 5;
obj2.map.newProp = 10;
console.log(obj1.map.newProp, obj2.map.newProp); // 5, 10

// Here you're modifying the same map
shared1.map.newProp = 5;
shared2.map.newProp = 10;
console.log(shared1.map.newProp, shared2.map.newProp); // 10, 10

// Here you're creating a new map and because you've written to the object directly    
// You don't have access to the shared map on the prototype anymore
shared1.map = {};
shared2.map = {};
shared1.map.newProp = 5;
shared1.map.newProp = 10;
console.log(shared1.map.newProp, shared2.map.newProp); // 5, 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:52:36.613

对于属性，这可能与您期望的方式不同。方法应该在原型上声明，因为您希望所有实例共享相同的函数引用。每个实例的属性通常不同。在处理原语时，您可能不会注意到这一点，但是对于作为对象（或数组，……）的属性，您*会遇到“奇怪”的行为*

```
function Test(){}
Test.prototype.foo = {bar: 1};
Test.prototype.baz = 1;

var one = new Test();
var two = new Test();
one.foo.bar = 3;
two.foo.bar === 3; // true, because of object reference
// BUT:
one.baz = 3;
two.baz === 1; // true 
```

# asp.net - 使用文本框值和通配符进行搜索

> ID：15748523
> 
> 赞同：0
> 
> 时间：2013-04-01T17:44:10.797
> 
> 标签：asp.net

我想搜索在我的文本框中输入的字符的名称的empid。使用通配符。我写了声明

```
da = new SqlDataAdapter(
 "Select empID from emp where FirstName like ' "+textbox1.text+" ' % "
   , connstring); 
da.Fill(ds); 
```

这个说法正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:52:44.723

您对[**sql-injection**](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)开放，请[`sql-parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)改用：

```
string sql = "SELECT empID " +
              "FROM emp " + 
              "WHERE FirstName like @FirstName";
using(var con = new SqlConnection(connstring))
using (SqlCommand command = new SqlCommand(sql, con))
{
    command.Parameters.AddWithValue("@FirstName",  textbox1.text + "%");
    using(var da = new SqlDataAdapter(command))
    {
        da.Fill(ds);
    }
} 
```

% 符号需要作为参数值的一部分，使用绑定参数时根本不需要单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:55:29.740

您输入的语句将允许在通配符搜索之前的名字前面和名字后面有空格。如果你想搜索名字的任何部分，你应该把你的 SQL 改成这样：

```
SELECT empID FROM emp WHERE FirstName LIKE '@FirstName%' 
```

此外，使用这样的参数化查询比仅仅连接你的参数更安全：

```
StringBuilder sb = new StringBuilder();
sb.Append("SELECT empID FROM emp WHERE FirstName LIKE '@FirstName%'");

SqlConnection conn = new SqlConnection(connStr);
SqlCommand command = new SqlCommand(sb.ToString());
command.CommandType = CommandType.Text;
command.Parameters.AddWithValue("FirstName", textbox1.Text);
DataTable dt = new DataTable();
SqlDataAdapter da = new SqlDataAdapter(command);
da.Fill(dt); 
```

如果要使用存储过程，则需要像这样设置 SqlCommand 对象：

```
SqlCommand command = new SqlCommand("Procedure", conn);
command.CommandType = Command.StoredProcedure; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:51:17.437

这种说法有很多错误之处。

最简单的一个是您的单引号和文本框值之间有空格，而百分号超出了它需要的位置。还有，`textbox1.text`拼写错误。它应该更接近：

```
da = new SqlDataAdapter(
 "Select empID from emp where FirstName like '"+textbox1.Text+"%' ", connstring); 
```

但这只是第一个问题。 **更大的问题是这是 SQL 注入的主要候选者。** 请参阅[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

# ruby-on-rails - 如何恢复终端命令所做的更改？

> ID：15748524
> 
> 赞同：0
> 
> 时间：2013-04-01T17:44:15.493
> 
> 标签：ruby-on-rails, terminal

如果您在终端上运行了以下命令，如何恢复项目中的更改：

```
rails new store
rails g scaffold product name price:decimal --skip-stylesheets
rake db:migrate
rails g bootstrap:install
rails g bootstrap:themed products -f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:50:20.803

如果您只想在控制台中进行测试，您可以使用`sandbox`rails 控制台的参数，如下所示：

```
rails console --sandbox 
```

在您的情况下，您可能只是删除所有内容并重新开始，但您可以执行类似的操作

```
rails d scaffold product
rake db:rollback 
```

我不确定你是否能做到

```
rails d bootstrap:install
rails d bootstrap:themed 
```

如果没有，您可以查看创建了哪些文件并手动删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:51:56.970

不可能对每个命令。

例如`rake db:migrate`可以用`rake db:rollback`

`rails g scaffold product name price:decimal --skip-stylesheets`可以恢复`rails destroy model product`

`rails new store`用一个简单的`rm -rf store`（小心这个！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:52:04.220

这当然是撤消脚手架的一种解决方案

```
rails destroy scaffold product 
```

# python - Python 正则表达式匹配转义字符

> ID：15748526
> 
> 赞同：0
> 
> 时间：2013-04-01T17:44:19.047
> 
> 标签：python, regex

我需要匹配以下组：

```
:data:
:abc'e12\:3\:text: 
```

在一个字符串中，意思是

```
:(?P<data>.*?): 
```

但也允许转义冒号`\:`

我最好的尝试是这样的：

```
:(?P<data>((?<=\\):|.)*?): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:59:34.687

```
p = re.compile(r':((\\:|[^:])+):')
print p.match(":abc'e12\:3\:text:").group(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:53:52.527

您始终可以确保使用“^”和“$”获取开始和结束字符：

```
^:(.+):$ 
```

您也可以将“.+”替换为您想要的正则表达式类型。

# php - 将两个字符串与变量分开的最佳方法

> ID：15748527
> 
> 赞同：0
> 
> 时间：2013-04-01T17:44:21.463
> 
> 标签：php, string, variables

我设法检索了我正在寻找的数据，这些数据采用两个 url 的形式，我需要将它们提取到两个单独的变量中。我是否以最有效的方式检索数据，然后我如何才能拥有两个包含 url 数据的变量。

```
$item = $this->_item;//Item ID

foreach ($item->getElements() as $elements) {
    $images = $elements->get('file');

    if(!empty($images)) {
        $imagesnonnull = $images;
        $image = JURI::base() . $imagesnonnull;
        var_dump($image);
    }
} 
```

var_dump 结果如下：

```
string(33) "http://demo.com/images/image1.jpg"
string(33) "http://demo.com/images/image2.jpg" 
```

我很乐意提供更多信息并尝试任何改进代码的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:46:02.977

> 那么我怎样才能有两个包含 url 数据的变量。

通过将它们推到一个数组上

```
$urls[] = $url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:46:20.457

您可以使用：

1-数组

```
$image[] = JURI::base() . $imagesnonnull; 
```

2- 或字符串

```
$image.= JURI::base() . $imagesnonnull; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:50:33.447

```
 $item = $this->_item;//Item ID
 $urls = array();

            foreach ($item->getElements() as $elements) {
                $images = $elements->get('file');

                   if(!empty($images)) {
                       $imagesnonnull = $images;
                       $image = JURI::base() . $imagesnonnull;
                       //var_dump($image);
                       $urls[] = $image;
                   }
            } 
```

之后获取数组值

# python - Python - 如何确定解析的 XML 元素的层次结构级别？

> ID：15748528
> 
> 赞同：5
> 
> 时间：2013-04-01T17:44:22.110
> 
> 标签：python, xml, parsing, hierarchy

我正在尝试使用 Python 从 XML 文件中解析具有特定标记的元素并生成输出 excel 文档，该文档将包含元素并保留它们的层次结构。

我的问题是我无法弄清楚每个元素（解析器迭代的）嵌套的深度。

XML 示例提取（3 个元素，它们可以任意嵌套在它们自己内部）：

```
<A>
   <B>
      <C>
      </C>
   </B>
</A>
<B>
    <A>
    </A>
</B> 
```

以下代码使用 ElementTree 可以很好地迭代元素。但我认为 ElementTree 无法确定每个元素的嵌套深度。见下文：

```
import xml.etree.ElementTree as ET

root = ET.parse('XML_file.xml')
tree = root.getroot()
for element in tree.iter():
    if element.tag in ("A","B","C"):
        print(element.tag) 
```

这将为我提供按正确顺序排列的元素 A、B、C 的列表。但我需要用他们的水平信息打印出来，

所以不仅：

```
A
B
C
B
A 
```

但是像：

```
A
--B
----C
B
--A 
```

为了能够做到这一点，我需要获取每个元素的级别。有没有合适的python解析器可以轻松做到这一点？我会想象像“element.hierarchyLevel”这样会返回一些整数索引的东西......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T18:06:59.793

尝试使用递归函数来跟踪您的“级别”。

```
import xml.etree.ElementTree as ET

def perf_func(elem, func, level=0):
    func(elem,level)
    for child in elem.getchildren():
        perf_func(child, func, level+1)

def print_level(elem,level):
    print '-'*level+elem.tag

root = ET.parse('XML_file.xml')
perf_func(root.getroot(), print_level) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:01:39.313

您可以使用[xml.sax.saxhandler](http://docs.python.org/2/library/xml.sax.handler.html)：

```
import xml.sax as sax
import xml.sax.handler as saxhandler

class TreeBuilder(saxhandler.ContentHandler):
    # http://docs.python.org/library/xml.sax.handler.html#contenthandler-objects
    def __init__(self):
        self.level = 0
    def startElement(self, name, attrs):
        print('--'*self.level + name)
        self.level += 1
    def endElement(self, name):
        self.level -= 1

builder = TreeBuilder()
src = '''\
<root>
<A>
   <B>
      <C>
      </C>
   </B>
</A>
<B>
    <A>
    </A>
</B>
</root>
'''
sax.parseString(src, builder) 
```

产量

```
root
--A
----B
------C
--B
----A 
```

# flash - 在 AS2 中重新定义函数

> ID：15748539
> 
> 赞同：2
> 
> 时间：2013-04-01T17:45:05.683
> 
> 标签：flash, actionscript, actionscript-2

假设您在 AS2 中执行此操作：

```
_root.foo = function(x){
//Do stuff
} 
```

以后可以这样重新定义吗

```
_root.foo = function(x){
//Do different stuff
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:55:08.110

是的，您可以在 AS2 中替换这样的函数，除非您尝试替换由 Flash 运行时在 ActionScript 之外实现的函数。因此，您的示例代码将按您的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T21:59:43.020

但是，如果您重新定义函数并返回第一次定义函数的位置，它将起作用，除非您再次重新定义它，否则它将保持不变。

# php - 按引用数组对对象内容进行排序

> ID：15748547
> 
> 赞同：1
> 
> 时间：2013-04-01T17:45:38.203
> 
> 标签：php, sorting

我的问题可能看起来有点傻，但我正在编写一个从给定数据输出 HTML 表格的对象。给定的数据是一个 json 编码的字符串，其中包含这些标头数组和数据对象：

例如：

```
{
    "header":["id","fname","lname","position"],
    "data":{
        "0":{"position":"Developer","fname":"Tom","lname":"Jones","id":12},
        "1":{"position":"UI Designer","fname":"John","lname":"Smith","id":18},
        "2":{"position":"UX Specialist","fname":"Farid","lname":"Rn","id":110}
    }
} 
```

问题是数据的顺序与标题不同。

我想使用标头数组作为参考，并按它对每一行数据对象进行排序。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:49:40.580

当然！使用外部和内部循环。外部循环遍历数据元素，内部循环遍历标题列表。对于标题列表中的每一项，从数据项中的关联数组中获取它的值。

伪代码：

```
foreach ($thing->data as $item) {
    // here would be a good place for the <tr>
    foreach ($thing->header as $header) {
        $dataforheader = $item->$header;
        // do something, maybe output a <td>
    }
} 
```

现在，您还可以将其放入备用数据结构中进行排序。

# spring-mvc - 与 Liferay 的春季社交

> ID：15748548
> 
> 赞同：0
> 
> 时间：2013-04-01T17:45:54.830
> 
> 标签：spring-mvc, liferay, liferay-6, spring-social

我目前正在 Liferay 6.1 GA2 中开发应用程序，我想使用 Spring Social 服务。

如果有人可以分享一些文档、链接或示例代码，那将是非常有帮助的。

谢谢高塔姆

# javascript - Select2 示例不起作用

> ID：15748549
> 
> 赞同：8
> 
> 时间：2013-04-01T17:45:56.490
> 
> 标签：javascript, jquery, jquery-select2

我正在尝试使用[Select2.js 插件](http://ivaynberg.github.com/select2/)。我创建了一个最简单的 select2 示例，但我不知道为什么这不起作用？

[http://jsbin.com/edeseh/2/edit](http://jsbin.com/edeseh/2/edit)

您可以在小提琴中看到选择列表中的项目选择并允许清除不起作用。

谁能帮助我，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T17:59:14.443

您应该使用选项值来启用选择

和

您应该使用空选项来显示占位符和`allowClear`选项。

这是工作小提琴：

[http://jsbin.com/edeseh/8/edit](http://jsbin.com/edeseh/8/edit)

从链接复制的主要代码：

**HTML：**

```
<select id="e2" style="width:200px;">
  <option value=""><option>
  <option value="1">Mustard</option>
  <option value="2">Ketchup</option>
  <option value="3">Relish</option>
</select> 
```

**JavaScript：**

```
$("#e2").select2({
  placeholder: "Select a State",
  allowClear: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T05:57:30.093

旧版本要求您在下拉列表中添加“select2”类。

# android - Android 开发者文档：下载？

> ID：15748558
> 
> 赞同：17
> 
> 时间：2013-04-01T17:46:23.430
> 
> 标签：android

我的网络连接速度很慢，使用[https://developer.android.com/guide/components/index.html](https://developer.android.com/guide/components/index.html)上的文档很痛苦。我可以将整个 Android Developer 文档下载到我的机器上并在本地浏览吗？这将包括所有各种类和其他内容的文档。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T17:51:59.217

是的你可以。

打开 SDK 管理器（位于 中`android_sdk_dir/SDK Manager.exe`）。

在最新的 API (4.2) 中选择`Documentation for Android SDK`.

下载后，您可以在`android_sdk_dir/docs`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:48:27.197

> 我可以将整个 Android Developer 文档下载到我的机器上并在本地浏览吗？

在 SDK 管理器中，只需为最近的 API 选择“Android SDK 文档”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:52:40.630

您可以在 $ANDROID_SDK/docs/ 下获得它。如果还没有，请通过“Android SDK 文档”选项下载。

或者，您可以[下载源代码树](http://source.android.com/source/downloading.html)并将其链接到您的 IDE。

# xcode - Mac 弹出菜单栏应用程序

> ID：15748564
> 
> 赞同：1
> 
> 时间：2013-04-01T17:47:05.323
> 
> 标签：xcode, macos, asihttprequest

我下载了这个项目（[https://github.com/shpakovski/Popup](https://github.com/shpakovski/Popup)）并尝试实现 ASIHTTPRequest 框架，但没有成功。因为 Popup 使用的是 ARC，所以我为 ASI 类禁用了它。

它说链接器命令失败，似乎缺少一个框架，但我以与往常相同的方式进行操作，并添加了所有必需的框架。

你们中有人可以将 ASIHTTPRequest 实现到 Popup 框架或给我发送一个类似的弹出项目吗？

谢谢您的帮助！

# youtube-api - YouTube API“已发布”过滤器似乎不起作用

> ID：15748565
> 
> 赞同：0
> 
> 时间：2013-04-01T17:47:08.637
> 
> 标签：youtube-api

我正在尝试使用 YouTube API 返回最近发布的视频，但我使用的过滤器似乎没有按预期工作。

此 API 调用仅返回两个视频，而 3 月 1 日之后发布的视频应该更多：

> [https://gdata.youtube.com/feeds/api/videos?q=&fields=entry[xs:dateTime(published)%20%3E%20xs:dateTime('2013-03-01T12:00:00.000Z') ]](https://gdata.youtube.com/feeds/api/videos?q=&fields=entry%5Bxs%3adateTime%28published%29%20%3E%20xs%3adateTime%28%272013-03-01T12:00:00.000Z%27%29%5D)

但是，如果我添加查询字符串，则会返回更多结果。例如：

> [https://gdata.youtube.com/feeds/api/videos?q=surfing&fields=entry[xs:dateTime(published)%20%3E%20xs:dateTime('2013-03-01T12:00:00.000Z') ]](https://gdata.youtube.com/feeds/api/videos?q=surfing&fields=entry%5Bxs%3adateTime%28published%29%20%3E%20xs%3adateTime%28%272013-03-01T12:00:00.000Z%27%29%5D)

有谁知道为什么？无论查询字符串如何，我应该使用另一种方法来获取最新发布的视频吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:26:03.443

我理解您的困惑，但这不是该`fields=`参数的用途。[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_partial)应该希望能把事情弄清楚，但总而言之，`fields=`以这种方式使用相当于在没有`fields=`参数的情况下发出请求，然后过滤该请求的结果，以便它只包含与您的过滤器匹配的条目。

因此，如果您的请求`fields=`通常会返回 25 个特定视频，添加`fields=`到它会给您一个包含 0 到 25 个视频的响应——所有不匹配的视频都会被过滤掉。

[您可以使用http://gdata.youtube.com/feeds/api/videos?v=2&orderby=published](http://gdata.youtube.com/feeds/api/videos?v=2&orderby=published)请求最近发布的视频的供稿，无需任何其他过滤器

# c# - 为什么文件打不开？

> ID：15748567
> 
> 赞同：0
> 
> 时间：2013-04-01T17:47:15.793
> 
> 标签：c#, file

我无法打开文件。

```
private void button1_Click(object sender, EventArgs e)
{
    // Load the CSV file
    var lines = File.ReadAllLines(@"C:\chat.csv");

    var xml = new XElement("Chat-Log",          // To convert to XML
       lines.Select(line => new XElement("Item",
          line.Split('|')                       // indicate split
          .Select((column, index) => new XElement("Column" + index, column)))));

    xml.Save(@"C:\xml-out.xml");     // Save to XML file

    MessageBox.Show("Converted to XML");

    FileStream fileStream = new FileStream(@"c:\xmlout.xml", FileMode.Open);
    try
    {
        TextWriter tw = new StreamWriter("c:\\xml-out.xml");
    }
    finally
    {
        fileStream.Close();
    }
} 
```

上面的代码应该打开`C:\xml-out.xml`，对吧？

```
 TextWriter tw = new StreamWriter("c:\\xml-out.xml"); 
```

我不知道为什么它没有打开文件。有什么线索吗？

我尝试[了各种选择](http://www.csharp-examples.net/filestream-open-file)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:51:28.393

出于某种原因，您正在打开一个流，*然后*尝试为它创建一个编写器。

如果该文件之前不存在，那么调用`new FileStream(@"c:\xmlout.xml", FileMode.Open)`将引发异常......如果该文件之前*确实*存在，那么您将无法在以下行中打开它的写入器，因为您仍然打开文件以供阅读。然后，您还关闭了`FileStream`块中的`finally`，但从不关闭`StreamWriter`，这很奇怪。

我希望您可能有一个异常，显示其中哪些实际上导致了问题，但是您当然应该删除`FileStream`.

您应该使用一个`using`语句，这样您就不需要显式`try`/`finally`块：

```
using (StreamWriter writer = File.CreateText(@"c:\xml-out.xml"))
{
} 
```

当然，您可能没有权限在文件系统的根目录上创建文件*......*

# javascript - 黑莓10 javascript获取设备电话号码

> ID：15748571
> 
> 赞同：1
> 
> 时间：2013-04-01T17:47:30.437
> 
> 标签：javascript, blackberry-webworks, blackberry-10

我正在尝试从 javascript 获取电话号码。我看到了几个代码示例，但都是针对 BB10 之前的。我也试过这段代码

```
var lines = blackberry.identity.phone.getLineNumber(1);

for (var i = 0; i < lines.length - 1; i++) {
    alert(blackberry.identity.phone.getLineNumber(lines[i]));
} 
```

但它返回未定义。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:40:07.137

尝试这个：

```
<script type="text/javascript">
  var lines = blackberry.identity.phone.getLineIds();
  for (var i = 0; i < lines.length-1; i++) {
    alert("Line id : " + lines[i] + " has phone number : " + blackberry.identity.phone.getLineNumber(lines[i]));
  }
</script> 
```

资料来源：你最好的朋友，[API 参考](http://developer.blackberry.com/html5/apis/blackberry.identity.phone.html)

# arrays - 从文件中计数和读取整数

> ID：15748572
> 
> 赞同：0
> 
> 时间：2013-04-01T17:47:34.543
> 
> 标签：arrays, visual-c++, counting

好的，所以目前我很难尝试从文件中读取整数。（我正在使用 C++）

```
 int main(void)
{
    int size = 0;
    string name;
    string line;
    while(getline(cin,line)) //get the line from input//
    {
        size++;
    }
    cout << size;
} 
```

这是目前的代码，文件的输入是

```
2 3 17 1 9 23 8 4 22 15 10 
```

`8 7 14`

我使用 Visual Studio 2010 并设置了调试器以从文件中获取输入并输出到另一个文件。

输出仅为 2，因为它仅计算行数。

无论如何，我要做的是计算这个文件中的所有数字，然后创建一个计数的“大小”数组，然后将每个数字输入到数组中。现在我想要这种方式的原因是因为我希望能够接受任意数量的整数。有人可以在这里帮助我吗？

我希望它在不使用向量的情况下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:55:53.827

编辑：这是您正在寻找的 c++

我的 C++ 技能有点生疏，所以请原谅，但这应该可以

```
#include <iostream>
#include <fstream>
#include <string>
#include <stdlib.h>

using namespace std;
#define MAX_LINES 25
#define MAX_IN_LINE 50

int main() {
  //open our file
  ifstream myfile ("test.txt");
  //initialize our array's
  int myarray[MAX_LINES][MAX_IN_LINE];
  //used for knowing how many numbers are stored in each array
  int totalargs[MAX_LINES];
  //rest of variables
  string line,tempnum;
  int end=0;
  int firstarg=0,secondarg=0;
  int num;

  //set all of our arrays to be zero'd out
  memset(myarray,0,MAX_LINES*MAX_IN_LINE);
  memset(totalargs,0,MAX_LINES);

  //make sure file is opened
  if (myfile.is_open()) {
    //get a line
    getline(myfile,line);
    //the first line is the number, so set it to num
    num=atoi(line.c_str());

    while(!myfile.eof()) {
      getline(myfile,line);
      //if there is a , in the line we have gotten
      while((end=line.find(' ',0))!=string::npos) {
        //get the number before the ,
        tempnum=line.substr(0,end);
        myarray[firstarg][secondarg]=atoi(tempnum.c_str());
        secondarg++;
        //erase the part of the line we have gotten
        line.erase(0,end+1);
      }
      //we will have an extra number at the end after that loop
      //this gets that last number
      tempnum=line.substr(0,line.length());
      myarray[firstarg][secondarg]=atoi(tempnum.c_str());
      //set the number of args to our array
      totalargs[firstarg]=secondarg;
      firstarg++;
      //reset arg.
      secondarg=0;
    }
  } else {
    cout << "cannot open";
  }

  //this is extra, but it just shows you your variables and that
  //they really do have numbers in them.
  cout << "num: " << num << endl;
  for (int x=0;x<firstarg;x++) {
    cout << "Array " << x+1 << ": " << myarray[x][0];
    for (int y=1;y<=totalargs[x];y++) {
      cout << "," << myarray[x][y];
    }
    cout << endl;
  }
} 
```

另一个更简单的解决方案是

```
vector<int> numbers;
ifstream fin("infile.txt");
int x;
while( fin >> x ) {
    numbers.push_back(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:11:04.030

```
std::ifstream in("myFile.txt");
int i, size=0;
while(in>>i) // counting int at the input
{
    size++;
}
in.seekg (0, in.beg);
int arr=new int[size];
for(size_t i=0;i<size;++i)
  in>>arr[i];

...
delete[]arr; 
```

为什么不使用矢量？

```
std::ifstream in("myFile.txt");
int i;
std::vector<int> v;
while(in>>i) // counting int at the input
{
    v.push_back(i);
} 
```

# ms-access - vba - 此集合中未找到项目

> ID：15748576
> 
> 赞同：1
> 
> 时间：2013-04-01T17:47:55.763
> 
> 标签：ms-access, vba

我不断收到运行时错误“3265”：

rstAnswers("20GBRank") = irank 在此集合中找不到项目，而它在其他数据库中工作。

我究竟做错了什么？我该如何解决？

```
Option Compare Database
Option Explicit

Public Function Update20BldgRank()
Dim db As Database
Dim rstAnswers As Recordset
Dim i As Integer
Dim irank As Integer
irank = 1
Set db = CurrentDb()
Set rstAnswers = db.OpenRecordset("Top20Genbld13", dbOpenDynaset)
rstAnswers.MoveFirst
Do Until rstAnswers.EOF
rstAnswers.Edit
rstAnswers("20GBRank") = irank
rstAnswers.Update
rstAnswers.MoveNext
irank = irank + 1
Loop
rstAnswers.Close
Update20BldgRank = irank - 1
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:51:33.823

只需确保字段（列）**20GRank**存在于您收到错误的数据库中。

# wpf - 绑定到 DataTemplate 中的视图模型属性

> ID：15748578
> 
> 赞同：12
> 
> 时间：2013-04-01T17:48:06.737
> 
> 标签：wpf, xaml, properties, binding, datatemplate

我对 XAML 还很陌生，但很喜欢学习它。我真正苦苦挣扎的事情是将属性绑定到`DataTemplate`.

我创建了一个简单的 WPF 示例来（希望）解释我的问题。

在这个示例中，我试图将a中的`Visibility`属性绑定到我的视图模型中的属性。（使用此场景纯粹用于学习/演示。）`CheckBox``DataTemplate`

我有一个名为 的简单`Item`数据模型，但在此示例中几乎没有相关性。

```
class Item : INotifyPropertyChanged
{

    // Fields...
    private bool _IsRequired;
    private string _ItemName; 
```

还有一个相当简单的视图模型，名为 ItemViewModel。

```
class ItemViewModel : INotifyPropertyChanged
{
    private ObservableCollection<Item> _Items;
    private bool _IsCheckBoxChecked;
    private bool _IsCheckBoxVisible;

    public ObservableCollection<Item> Items
    {
        get { return _Items; }
        set { _Items = value; }
    }

    public bool IsCheckBoxChecked
    {
        get { return _IsCheckBoxChecked; }
        set
        {
            if (_IsCheckBoxChecked == value)
                return;
            _IsCheckBoxChecked = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("IsCheckBoxChecked"));
                PropertyChanged(this, new PropertyChangedEventArgs("IsCheckBoxVisible"));
            }
        }
    }

    public bool IsCheckBoxVisible
    {
        get { return !_IsCheckBoxChecked; }
        set
        {
            if (_IsCheckBoxVisible == value)
                return;
            _IsCheckBoxVisible = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("IsCheckBoxVisible"));
        } 
```

`INotifyPropertyChanged`（为简洁起见，省略了构造函数和实现。）

MainPage.xaml 中的控件布局如下。

```
<Window.Resources>
    <local:VisibilityConverter x:Key="VisibilityConverter"/>
</Window.Resources>

<Window.DataContext>
    <local:ItemViewModel/>
</Window.DataContext>

<Grid>
    <StackPanel>
        <CheckBox x:Name="checkBox" Content="Hide CheckBoxes"  FontSize="14"  IsChecked="{Binding IsCheckBoxChecked, Mode=TwoWay}" />
        <ListView ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch" >
            <ListView.ItemTemplate >
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding ItemName}"/>
                        <CheckBox  Grid.Column="1" Visibility="{Binding IsCheckBoxVisible, Converter={StaticResource VisibilityConverter}}"   >
                            <CheckBox.DataContext>
                                <local:ItemViewModel/>
                            </CheckBox.DataContext>
                        </CheckBox>
                    </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
       <StackPanel Orientation="Horizontal" Margin="4,4,0,0">
        <TextBlock Text="IsCheckBoxVisible:"/>
            <TextBlock Text="{Binding IsCheckBoxVisible}" Margin="4,0,0,0" FontWeight="Bold" />
        </StackPanel >
        <Button Content="Button" Visibility="{Binding IsCheckBoxVisible, Converter={StaticResource VisibilityConverter}}" Margin="4,4,4,4"/>
    </StackPanel>

</Grid> 
```

“隐藏复选框”复选框绑定`IsCheckBoxChecked`并用于更新`IsCheckBoxVisible`. 我还在下方添加了一些额外的控件`DataTemplate`来证明（对我自己而言）一切正常。）

我还实现了 Jeff Wilcox 的值转换器。（谢谢。）[http://www.jeff.wilcox.name/2008/07/visibility-type-converter/](http://www.jeff.wilcox.name/2008/07/visibility-type-converter/)

当我运行应用程序时，选中和取消选中“隐藏复选框”，`DataTemplate`按预期控制函数外部，但是，`Checkbox`数据模板内部保持不变。

我在以下方面取得了成功：

```
IsVisible="{Binding IsChecked, Converter={StaticResource VisibilityConverter}, ElementName=checkBox}" 
```

但我不只是试图模仿另一个控件，而是根据一个值做出决定。

我非常感谢您提供的任何帮助或建议。

谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T04:13:21.863

当您在 DataTemplate 中时，您的 DataContext 是数据模板化对象，在本例中是一个`Item`. 因此，DataTemplate 中 CheckBox 的 DataContext 是一个`Item`，而不是你的`ItemViewModel`. 您可以通过您的 看到这一点`<TextBlock Text="{Binding ItemName}"/>`，它绑定到`Item`类上的一个属性。IsCheckBoxVisible 的绑定试图在 上找到一个名为 IsCheckBoxVisible 的属性`Item`。

有几种方法可以解决这个问题，但到目前为止最简单的是这样做：

在您的窗口（在 xaml 中）上，给它和 x:Name。例如：

```
<Window [...blah blah...]
        x:Name="MyWindow"> 
```

将绑定更改为如下所示：

```
<CheckBox Grid.Column="1"
          Visibility="{Binding DataContext.IsCheckBoxVisible, ElementName=MyWindow, Converter={StaticResource VisibilityConverter}}"> 
```

我们使用 Window 作为 Binding 的源，然后查看它的 DataContext 属性（应该是你的`ItemViewModel`，然后拉出 IsCheckBoxVisible 属性。

如果您想要更高级的东西，另一种选择是使用代理对象来引用您的 DataContext。请参阅[有关 DataContextProxy 的这篇文章](http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx)。

# django - 让 django 使用内部连接

> ID：15748579
> 
> 赞同：1
> 
> 时间：2013-04-01T17:48:11.967
> 
> 标签：django, join, filter, many-to-many

嗨，我需要做一个相当复杂的查询。在某种程度上，我可以设法让 django 返回对象，但有些是重复的。

模型如下：ProjectType、ProjectIdea。我需要从公司可以启动的数据库中选择项目类型。每家公司都可以启动他们有想法但没有专利的项目。如果他们的专利过期了，即使他们没有这个想法，他们也可以开始申请。

```
class ProjectType(models.Model):
    patent_expires = models.DateTimeField(null=True)
    patent_owner = models.ForeignKey(Company,null=True)

#This really is just MtoN relationship
class ProjectIdea(models.Model):
    project = models.ForeignKey(ProjectType)
    company = models.ForeignKey(Company) 
```

我尝试了以下查询：

```
#problem is that ProjectType(s), where patent expired and the company has idea for is returned twice
models.ProjectType.objects.filter(Q(projectidea__company=request.user.company) | Q(patent_expires__lt=timezone.now()))

#doesn't return projects where patent is expired and idea exists
models.ProjectType.objects.filter(Q(projectidea__company=request.user.company),(Q(patent_owner__isnull=True) | Q(patent_owner=request.user.company))).filter(Q(patent_expires__lt=timezone.now()) | Q(patent_owner__isnull=True))

#returns only the projects where patent expired and idea exists. Omits the not patented projects, where idea exists
q = models.ProjectType.objects.filter(Q(patent_expires__lt=timezone.now()) | Q(patent_owner=request.user.company)).filter(projectidea__company=request.user.company,patent_owner__isnull=True)

.distinct() #has no effect what so ever 
```

我尝试了多种变体，但我无法弄清楚如何正确编写它。我也尝试了仅使用 .exclude() 的方法，但似乎我不能在其中使用 Q(...) & Q(...) ，这使得表达式不可能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:54:09.297

我天真地认为这是可行的，（假设我已经正确地捕捉到了你的意图）。

```
our_ideas = Q(projectidea__company=request.user.company)
has_patent = Q(patent_owner__isnull=False)
patent_expired = Q(patent_expires__lt=timezone.now())

startable_projects = models.ProjectType.objects\
    .filter( (~has_patent & our_ideas) | (has_patent & patent_expired) ).distinct() 
```

如果没有，您能否提供生成的 SQL 以及您希望看到的 SQL 示例？

# c# - Mysql C#将int值更新1

> ID：15748580
> 
> 赞同：-1
> 
> 时间：2013-04-01T17:48:20.563
> 
> 标签：c#, mysql, .net

我使用这种方法将登录列的值增加一：

```
MySqlConnection connect = new MySqlConnection(connectionStringMySql);
MySqlCommand cmd = new MySqlCommand();

cmd.Connection = connect;
cmd.Connection.Open();

string commandLine = null;
commandLine = "UPDATE Users SET logins = (@cur_value := logins) + 1 WHERE id = @id;";

cmd.CommandText = commandLine;

cmd.Parameters.AddWithValue("@id", userId);

cmd.ExecuteNonQuery();
cmd.Connection.Close(); 
```

我得到了这个例外：

> 命令执行期间遇到致命错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:20:38.453

试试这段代码

```
string commmandLine = "UPDATE Users SET logins = logins + 1 WHERE id = @id";
cmd.Set 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:16:04.250

首先尝试此代码

commandLine = "更新用户设置**登录 =1** WHERE id = @id";

如果上面的代码没有抛出任何错误，那么试试下面的代码

```
commandLine = "UPDATE Users SET **logins =@YourValue** WHERE id = @id";

cmd.CommandText = commandLine;
cmd.Parameters.AddWithValue("@id", userId);

cmd.Parameters.AddWithValue("@YourValue", 1);//**Put your logins value** 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T18:02:28.390

添加以下行：

```
 cmd.Parameters.AddWithValue("@cur_value", yourValue); 
```

还要做出更清晰的sql语句：

```
UPDATE Users 
SET logins = @cur_value + 1 
WHERE id = @id; 
```

将有问题的代码段用`try/catch`. 代表非托管资源（如 Stream 或 SqlConnection）的类正在实现`IDisposable`接口。它们通常需要用`using`语句括起来才能正确释放它们的资源，即使抛出异常（或使用 try/finally 和 finally 块调用方法`Close`或`Dispose`）。然后你的代码会很好很清晰:)

# java - 我应该使用 Drools 来处理这个复杂的逻辑吗

> ID：15748582
> 
> 赞同：0
> 
> 时间：2013-04-01T17:48:29.403
> 
> 标签：java, drools, rules

当前应用程序用作一个审核工具，其中在需要对门户中的用户可见的文档和产品中，根据已登录的用户在运行时根据某些规则检查。例如，检查包括是否拥有登录属于文档分配到的特定国家/地区。如果文档被指定为美国国家和语言英语，则登录用户的国家和语言将根据文档的这些属性进行检查。如果匹配，则文档将显示给用户。这里比较的是 2 个对象 - 通过会话传递的用户对象。当前从数据库中检索文档相关信息（国家、语言）并存储为缓存。

问题是 1\. Drools 是否能够处理这种复杂的逻辑？2\. 文档属性数据（有多少个文档属性）可以缓存在Drools中使用吗？3\. 如何在 Drools 中传递一个用户会话对象？4\. 处理大约1亿条记录性能会好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:09:14.210

答案：

1) 是的。容易地。事实上，对于这样一组相对简单的（静态）规则（可以由查询语言处理），Drools 可能是矫枉过正。2）我不太清楚你在这里的意思。3）你不能（至少没有任何有意义的方式）。流口水不是魔术。4) Drools 不是数据库。它不处理记录。它处理规则。你给它一个或多个规则，以及一组用于测试这些规则的参数，Drools 会告诉你数据是否符合这些规则。

一般来说，您并不需要 Drools 来满足您的想法，任何设计正确的 RDBMS 都可以使用关系数据和查询来处理这些规则。您应该改用它。

# java - 扫描文本并在匹配时替换

> ID：15748584
> 
> 赞同：0
> 
> 时间：2013-04-01T17:48:55.923
> 
> 标签：java, android, if-statement, for-loop

你能告诉我`for`下面的循环有什么问题吗？我希望程序扫描文本中的所有单词并检查它们 - 如果发现它与一组单词中的一个匹配，它会替换它。例如，如果文本中的句子是“nona chan”，我希望它逐字扫描，如果找到单词“nona”替换为“good”，然后继续下一个单词。

```
package com.example.split;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText te1 = (EditText) findViewById(R.id.t1);
        final EditText te2 = (EditText) findViewById(R.id.t2);

        final Button b = (Button) findViewById(R.id.b1);
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //imva.setImageResource(R.id.b1);

                String t = te1.getText().toString();
                String[] t1 = t.split(" ");
                for (int i = 0; i <= t1.length; i++) {

                    do {
                        if (t1[i].equals("nona")) {
                            String v1 = t1[i];
                            String v2 = " good  ";
                            String a = v1.replace(v1, v2);
                            te2.setText(a);
                        } else if (t1[i].equals("chan")) {
                            String v1 = t1[i];
                            String v3 = " job  ";
                            String a = v1.replace(v1, v3);
                            te2.setText(a);
                        }
                    } while (te1.length() != 0);
                }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:49:50.677

您超出了数组范围。代替

```
for (int i = 0 ; i<= t1.length ; i++) 
```

和

```
for (int i = 0 ; i < t1.length ; i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:54:38.727

除了@Reimeus 的回答和@Pragnani 的评论之外，你的`for()`循环超过数组长度1 都是正确的......

删除`do/while`循环，因为它总是会无限循环并挂起您的应用程序！
用它的内容替换然后循环。

* * *

此外，此行不执行任何操作：

```
String a =  v1.replace(v1, v2); 
```

只是安装`v2`到`a`中，因此可以替换为：

```
String a = v2; 
```

# javascript - Javascript 复制日期 + 一年

> ID：15748585
> 
> 赞同：1
> 
> 时间：2013-04-01T17:49:03.927
> 
> 标签：javascript, forms

我不知道为什么我找不到这个问题的答案，但现在已经搜索了 2 个多小时，我准备打破一些东西。

我需要做的就是复制用户输入的日期并添加一年：

```
<input id='r_start' name='r_start' type='date' value='' />
<input id='r_end' name='r_end' type='date' value='' /> 
```

所以当 r_start 被编辑时，r_end 会自动更新为加一年，

这应该不难吧？度过了漫长的一天！

- >请日历年

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:13:57.997

[jsFiddle 演示](http://jsfiddle.net/GdcPS/18/)

**HTML**

```
<input id='r_start' name='r_start' value='' type='date'/>
<input id='r_end' name='r_end' value='' type='date' /> 
```

**JavaScript**

```
$(document).ready(function(){
    $('#r_start').on('change',function(){
        var d = new Date($(this).val());
        d.setMonth(d.getMonth()+13);
        var a = ((d.getMonth()) < 10) ? '0'+(d.getMonth()) : (d.getMonth());
        var b = (d.getDate() < 10) ? '0'+d.getDate() : d.getDate();
        d = d.getFullYear()+'-'+a+'-'+b;
        $('#r_end').val(d);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:53:05.667

**[jsFiddle 演示](http://jsfiddle.net/WNNe2/1/)**

只需在日期上加上 12 个月：

```
 var yourDate = new Date();
 yourDate.setMonth(yourDate.getMonth()+12); 
```

# templates - Twig/Symfony2：搜索多个模板目录？

> ID：15748593
> 
> 赞同：0
> 
> 时间：2013-04-01T17:49:24.347
> 
> 标签：templates, symfony, twig

我想做的事情很简单，但我还没有找到解决方案。在我的应用程序中，我想按主题、语言和范围组织所有模板。为此，有必要为正确的模板构建和搜索多个路径。

例如，请求 Acme:Default:editAction 并且默认加载 Acme:Default:edit.html.twig 模板。

```
APP_PATH/src/Acme/DefaultBundle/Resources/views/Default/edit.html.twig 
```

现在我想更改此行为并按给定顺序在多个路径中搜索该模板。

```
1\. VIEWS_PATH/%theme%/%lang%/%scope%/Default/edit.html.twig
2\. VIEWS_PATH/%theme%/%lang%/Default/edit.html.twig
3\. VIEWS_PATH/%theme%/Default/edit.html.twig
4\. VIEWS_PATH/Default/edit.html.twig 
```

最简单的方法是什么？在配置或事件侦听器中的某个位置添加路径或覆盖 TemplateLoaderClass？

请不要推荐任何捆绑包。我只是想了解一下 Symfony(2.1)/Twig 是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:15:39.177

绑定一个以模板服务为参数的事件监听器，并在 kernel.view 事件上修改模板名称。

有关此代码示例，请参阅[https://stackoverflow.com/a/12403233/1649758](https://stackoverflow.com/a/12403233/1649758)。

# java - 播放框架 CompilationException

> ID：15748595
> 
> 赞同：0
> 
> 时间：2013-04-01T17:49:32.820
> 
> 标签：java, exception, playframework, compiler-errors

当我遇到此错误时，我正在尝试预编译 play 1.2.5 项目：

```
Compilation error (In /app/controllers/api/Drivers.java around line 168)
The file /app/controllers/api/Drivers.java could not be compiled. 
Error raised is : driverResume cannot be resolved or is not a field

play.exceptions.CompilationException: driverResume cannot be resolved or is not a field
at play.classloading.ApplicationCompiler$2.acceptResult(ApplicationCompiler.java:246)
at org.eclipse.jdt.internal.compiler.Compiler.handleInternalException(Compiler.java:676)
at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:520)
at play.classloading.ApplicationCompiler.compile(ApplicationCompiler.java:282)
at play.classloading.ApplicationClassloader.getAllClasses(ApplicationClassloader.java:426)
at play.Play.preCompile(Play.java:593)
at play.Play.init(Play.java:299)
at play.server.Server.main(Server.java:159) 
```

driverResume 字段是公共的并且在 Driver 类中可见。

我用 jdk 1.6.0 在不同的计算机上尝试过，但总是遇到同样的异常。

有谁知道如何获得有关预编译过程、编译器逻辑的更多信息，或者已经遇到过此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:55:50.343

看起来这可能是您误读编译错误的问题。编译器抱怨 Drivers 类，而您说该字段在 Driver（不是 Drivers）类中是公共的。

这可能是问题吗？

# c++ - 插入数据库失败

> ID：15748596
> 
> 赞同：0
> 
> 时间：2013-04-01T17:49:35.287
> 
> 标签：c++, postgresql

```
void InsertEmployeeRec(PGconn *conn, char * fullname)
{
  // Append the SQL statment
  std::string sSQL;
  sSQL.append("INSERT INTO Worker VALUES ('");
  sSQL.append(fullname);
  sSQL.append("')");

  // Execute with sql statement
  PGresult *res = PQexec(conn, sSQL.c_str());

    if (PQresultStatus(res) != PGRES_COMMAND_OK)
    {
        printf("Insert employee record failed");
        PQclear(res);
        CloseConn(conn);
    }

  printf("Insert employee record - OK\n");

  // Clear result
  PQclear(res);
} 
```

这是我插入数据库并像这样调用它的功能

```
InsertEmployeeRec(conn,"n"); 
```

最后，我得到错误：

检测到 glibc *** /home/mert/workspace1/Project/Debug/Project: 双重释放或损坏 (!prev): 0x0000000001df4050 ***

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:59:25.767

你打`PQclear(res);`了两次电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:57:32.823

如果 Worker 表中有多个列，则需要声明它们：

```
sSQL.append("INSERT INTO Worker (one_column, name, another_one) VALUES ('"); 
```

您只需要声明没有默认值的列。

# matlab - 如何最快地从数组中删除整行/列？

> ID：15748599
> 
> 赞同：-4
> 
> 时间：2013-04-01T17:49:55.750
> 
> 标签：matlab

例如，我想将 360x160 数组转换为 360x159 数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:51:51.357

你可以只选择你需要的行：

```
a = ones(360,160);
b = a(:,1:159);
size(b)
ans =

   360   159 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:23:00.493

正如@jucestain 建议的那样，最快的方法是删除该列。如果要保留原始数组，请复制它并从副本中删除。@Molly 的解决方案稍微慢一些。

```
>> tic; a=ones(360,160); a(:,160)=[]; toc
Elapsed time is 0.001409 seconds.
>> tic; a=ones(360,160); b=a; b(:,160)=[]; toc
Elapsed time is 0.001827 seconds.
>> tic; a=ones(360,160); b=a(:,1:159); toc
Elapsed time is 0.004002 seconds. 
```

# css - 导航菜单项的背景颜色

> ID：15748607
> 
> 赞同：0
> 
> 时间：2013-04-01T17:50:24.293
> 
> 标签：css

更新：为清楚起见，我添加了黄色背景颜色以查看“显示”或“透明”的内容

我似乎无法弄清楚如何在此导航栏中保持相同的样式，但将背景颜色设为白色，而不是透明。我还想摆脱每个下拉菜单项之间的透明度。

[http://jsfiddle.net/trevoray/VZ7qD/20/](http://jsfiddle.net/trevoray/VZ7qD/20/)

任何帮助将不胜感激！

特雷弗

```
 .nav {
border-radius:4px;
box-shadow: 0 3px 4px #8b8b8b; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:56:18.667

您需要`background-color`在以下 CSS 类中设置

```
.nav > li 
{
   background-color:white;
} 
```

[JS 小提琴示例](http://jsfiddle.net/VZ7qD/23/)

# php - preg_match_all 返回一个空数组

> ID：15748613
> 
> 赞同：0
> 
> 时间：2013-04-01T17:50:44.267
> 
> 标签：php, wordpress

我正在开发一个 WordPress 插件，但在从正则表达式中获取正确信息时遇到了一个严重问题。

正则表达式的代码如下：

```
preg_match_all("|grass1(.*)grass2|i", $split[1], $out); 
```

输出是一个空数组。

$split[1] 是电子邮件的正文（作为字符串）。

我正在寻找提取grass1 和grass2 之间的所有信息。因此，在电子邮件的正文中（作为字符串）存在“grass1 Something Something Grass2”，我需要Something Something 作为输出。这就是问题所在，而且很奇怪，因为如果字符串是主题、标题或整个电子邮件，它就可以正常工作。所以我对发生了什么感到困惑。任何有助于理解问题的帮助都会有所帮助。

电子邮件正文示例：

```
"_NextPart_000_0098_01CE2BC1.BFAF9200
 Content-Type: text/plain charset="us-ascii" Content-Transfer-Encoding: 7bit
 grass1 I'm testing the before or after function. If successful you should see all of           this message in a future email. grass2" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:05:00.673

可能在grass1 和grass2 之间有一些换行符“\n”，所以“m”（多行搜索）修饰符可能很有用：

```
preg_match_all("|grass1(.*)grass2|im", $split[1], $out); 
```

有关修饰符的引用，请参见 PHP 手册[reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)。

例如，“s”（“.”也匹配“\n”）可以作为替代：

```
preg_match_all("|grass1(.*)grass2|is", $split[1], $out); 
```

**ADD** 明确一点：“m”和“s”相似但不相同：

*   "s" 让 "."(dot) 也匹配换行符，所以 ".*" 匹配多行文本
*   *"m" 将模式应用于多行文本，因此 "a\nb" 匹配以a*结尾并以*b*开头的行，换句话说，我可以使用 "\n" 作为搜索模式

# entity-framework - EF CodeFirst 出现循环或多级联路径错误

> ID：15748615
> 
> 赞同：2
> 
> 时间：2013-04-01T17:50:57.010
> 
> 标签：entity-framework, ef-code-first

**我首先使用实体​​框架代码**开发了一个 asp.net mvc 解决方案，但出现错误：

`Introducing FOREIGN KEY constraint 'FK_dbo.Transports_dbo.Shippers_ReceiverId' on table 'Transports' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.`

在创建数据库的过程中启动解决方案时会发生这种情况。

这是我的模型：

```
public class Transport
{
    [Key]
    public int Id { get; set; }
    ...
    public int SenderId { get; set; }
    public int ReceiverId { get; set; }
    ...
    public virtual Shipper Sender { get; set; }
    public virtual Shipper Receiver { get; set; }
}

public class Shipper
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public string Street { get; set; }
    public string Number { get; set; }
} 
```

如果我评论，`public virtual Shipper Receiver { get; set; }`那么它可以工作，所以这是循环问题。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:42:25.367

对于更复杂的“自绑定”或“多对同一”关系，您需要明确定义关系 - 最好使用流畅的配置。

例如

```
modelBuilder.Entity<Transport>()
    .HasRequired(at => at.Sender)
    .WithMany(a => a.TransportsAsSender)
    // .HasForeignKey(at => at.SenderId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Transport>()
    .HasRequired(at => at.Receiver)
    .WithMany(a => a.TransportsAsReceiver)
    // .HasForeignKey(at => at.ReceiverId)
    .WillCascadeOnDelete(false); 
```

...假设您还添加：

```
public ICollection<Transport> TransportsAsSender { get; set; }
public ICollection<Transport> TransportsAsReceiver { get; set; } 
```

...到`Shipper`

或者只是使用...

```
.WithMany() // and no collection navigation properties 
```

# javascript - redis命令的异步执行

> ID：15748616
> 
> 赞同：1
> 
> 时间：2013-04-01T17:50:59.310
> 
> 标签：javascript, asynchronous, redis

我正在尝试使用以下代码执行 redis 的几个异步方法

```
var redis = require("redis");
var client = redis.createClient();
var async = require("asyncjs");

   async.list([
        client.hincrby("traffic:" + siteId, 'x', 1),
        client.hincrby("traffic:" + siteId, 'y', 1),
        client.hincrby("traffic:" + siteId, 'z', 1)
    ]).call().end(function(err, result)
    {
        console.log(err); // returns error [TypeError: Object true has no method 'apply']
        console.log(result); // undefined
        if(err) return false;
        return result;
    }); 
```

**所有方法执行成功**

但我得到了错误`[TypeError: Object true has no method 'apply']`

该方法被执行并返回true，它可能将其解释为true，但我不明白为什么它必须使用该方法应用它？

我可以通过将函数（错误，结果）作为最后一个元素添加到 client.hincrby 来获得增量的结果。但是如何在最终函数的结果变量中获得所有结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:55:03.277

我想您使用的 asyncjs 模块是记录在以下位置的模块： [https ://github.com/fjakobs/async.js](https://github.com/fjakobs/async.js)

在您的代码中：

*   list() 是一个生成器。它允许数组被 asyncjs 迭代。数组是一个值数组。
*   call() 是一个**调用**每个项目的映射器。因此，这些项目必须是可调用的（即它们必须是回调）。
*   end() 是一个终止端点，在迭代结束时调用。作为参数，您只能获得序列的最后一个值（而不是整个序列）。

您收到“ *[TypeError: Object true has no method 'apply']* ”错误，因为您构建的列表不是回调列表。它是一个值列表。

这是一些应该做你想做的代码：

```
var redis = require("redis");
var client = redis.createClient();
var async = require("asyncjs");

function main() {

  var siteId = 1;

  async
    .list(['x','y','z'])
    .map( function (item,next) {
      client.hincrby('traffic:' + siteId, item, 1, function (err,res) {
        next(err,res)
      })
    })
    .toArray( function(err,res) {
      console.log(err); 
      console.log(res); 
    });
}

main() 
```

请注意，这里我们使用 map() 代替 call()，使用 toArray() 代替 end()。

# c# - 调试期间不显示图像

> ID：15748620
> 
> 赞同：3
> 
> 时间：2013-04-01T17:51:15.213
> 
> 标签：c#, wpf, image

以下问题：我的窗口上只有一个带有以下 XAML 代码的图像框：

```
<Image x:Name="image1" HorizontalAlignment="Left" Height="100" Margin="261,161,0,0" VerticalAlignment="Top" Width="100" Stretch="Fill" IsHitTestVisible="True" Source="Resources/Jellyfish.jpg"/> 
```

没有错误，图像以编辑模式显示： [屏幕截图 1](http://img4.fotos-hochladen.net/uploads/image1e67kcuxyv0.png)

但是当我调试程序时，图像没有出现:( [截图2](http://img5.fotos-hochladen.net/uploads/image2l67zr9mnj4.png)

有人看错了吗？

问候 MightyM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:05:31.087

你所要做的就是

1.  确保您的项目有一个名为`Resources`
2.  您`Resources`的文件夹中有一个名为 jellyfish.jpg 的文件
3.  `JellyFish.jpg`显示 Build Action 设置为“Resource”的属性窗口

**3**将确保**JellyFish.jpg**作为资源流嵌入到您的程序集中。如果您不想要嵌入式资源，您可以查看[PACK URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)以获取其他选择

# php - 从 Ajax 响应中获取多个数据

> ID：15748624
> 
> 赞同：2
> 
> 时间：2013-04-01T17:51:20.577
> 
> 标签：php, javascript, ajax, return-value

当 process.php 响应 form.html 发出的 Ajax 请求时，它会回复“false”或“true [哈希值]”（其中哈希值是哈希函数的输出）。在 form.html 中，我想为两个可能的响应调用不同的函数，但是如何解析响应？例如我必须调用
`var responses = xmlhttp.responseText.split(" ")`
假设散列函数从不输出“false”我可以使用
`if(xmlhttp.responseText != "false")`
这两种方法似乎有点老套和低效，有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:29:14.420

您可以在 PHP 代码中执行以下操作：

```
$returnValue['ValueA'] = "a value";
$returnValue['ValueB'] = "another value";

echo json_encode($returnValue); 
```

在您的 JavaScript 代码中（此处使用 JQuery）：

```
$.ajax({
    type: "GET",
    dataType: "json",
    url: "./myphpfile.php",
    data: "parameter=parametervalue",
    success: function(data){
        printresult(data);
    }
});

function printresult(data)
{
    alert(data['ValueA']);   
    alert(data['ValueB']);
} 
```

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T13:49:46.483

我也遇到过类似的情况，这是我使用基本 Javascript 的解决方案。

首先在 PHP 方面，我可以有四种结果之一（在 INSert 或 UPDate 上通过或失败），因此我对 AJAX 的响应预先包含了这些结果：

```
[...]  
$echoStr = 'PASS/INS/Adding ID Succeeded.';   // INSert successful  
[...]  
$echoStr = 'FAIL/INS/Adding ID Failed';       // INSert failed  
[...]  
$echoStr = 'PASS/UPD/Updating D Succeeded.';  // UPDate successful  
[...]  
$echoStr = 'FAIL/UPD/Updating ID Failed';     // UPDate failed  
[...]  
echo $echoStr; return;                        // Reply to AJAX request. 
```

在 Javascript 端（ajax1 是我的 AJAX obj），我将响应字符串分成三个部分并进行相应处理：

```
[...]  
ajax1.onreadystatechange = function() { 

  if (ajax1.readyState == 4 && ajax1.status == 200) {  

    response = ajax1.responseText;     // PASS or FAIL, INS or UPD, free form text alert

    passFail = response.substr(0,4);   // PASS or FAIL

    insUPD   = response.substr(5,3);   // INS or UPD

    usrMsg   = response.substr(9);     // Free form alert text

    if (passFail == 'PASS' && insUPD == 'INS') {

       // do what you need to do here
    }

    alert(usrMsg);
  }                 //  if (ajax1.readyState == 4 && ajax1.status == 200) {  
}                   //  ajax1.onreadystatechange = function() {  
[...] 
```

# modulus - “myimage.%2d.png”是什么意思

> ID：15748627
> 
> 赞同：0
> 
> 时间：2013-04-01T17:51:28.467
> 
> 标签：modulus, imagesource

不敢相信我不能用谷歌搜索这个——我知道这与图像填充有关。是吗

myimage.%2d.png 指定一个序列，如 {myimage.01.png, myimage.02.png, myimage.03.png...

和

myimage.%3d.png 指定一个序列，如 {myimage.001.png, myimage.002.png, myimage.003.png...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:04:03.153

如果您正在处理 printf() 样式格式（这就是我的样子），您可以使用“myimage.%02d.png”来填充零，如您的第一个序列和“myimage.%03d.png”第二个序列。不过，您确实应该为您的问题添加一些上下文...

# html - 响应表隐藏没有值的列

> ID：15748628
> 
> 赞同：4
> 
> 时间：2013-04-01T17:51:30.733
> 
> 标签：html, css, responsive-design, liquid-layout

在我的一个页面上，我有一个响应式表格，当浏览器变小时它会改变布局。当我的表中的列有值时，一切正常，如[this fiddle](http://jsfiddle.net/hcz88)所示。

但是，当列没有值时，其中一些不会显示在表格布局的小版本中，如[this fiddle](http://jsfiddle.net/hcz88/1)所示。

我错过了什么？

我还从下面的非工作版本中复制了必要的代码：

```
@media only screen and (max-width: 760px),
 (min-device-width: 768px) and (max-device-width: 1024px) {
    /* Force table to not be like tables anymore */
    table, thead, tbody, th, td, tr { 
        display: block; 
    }

    /* Hide table headers (but not display: none;, for accessibility) */
    thead tr { 
        position: absolute;
        top: -9999px;
        left: -9999px;
    }

    tr { border: 1px solid #ccc; }

    td { 
        /* Behave  like a "row" */
        border: none;
        border-bottom: 1px solid #eee; 
        position: relative;
        padding-left: 50%; 
    }

    td:before { 
        /* Now like a table header */
        position: absolute;
        /* Top/left values mimic padding */
        top: 6px;
        left: 6px;
        width: 45%; 
        padding-right: 10px; 
        white-space: nowrap;
    }

    /* Label the data */
    td:nth-of-type(1):before { content: "MFG P/N"; }
    td:nth-of-type(2):before { content: "MFG Name"; }
    td:nth-of-type(3):before { content: "Part ID"; }
    td:nth-of-type(4):before { content: "Description"; }
    td:nth-of-type(5):before { content: "Cost"; }
    td:nth-of-type(6):before { content: "Price"; }
    td:nth-of-type(7):before { content: "On Hand"; }
    td:nth-of-type(8):before { content: "On Order"; }
    td:nth-of-type(9):before { content: "Allocated"; }
    td:nth-of-type(10):before { content: "Shipped"; }
    td:nth-of-type(11):before { content: "Report"; }
    td:nth-of-type(12):before { content: "RMA"; }
    td:nth-of-type(10):before { content: "File"; }
    td:nth-of-type(10):before { content: "Add Part"; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:24:36.667

你的问题和你描述的不完全一样。在“非工作示例”小提琴中查看您的表格时，结果不显示一系列空表格单元格 - 它*不*显示表格单元格。

相反，您正在输出：

```
<td valign="top" colspan="10" class="dataTables_empty">No data available in table</td> 
```

你正在使用一个相当聪明的 CSS 技巧在每个单元格之前显示列文本 - 我为你鼓掌 - 但我的印象是你并不真正理解 CSS 技巧是如何工作的，这就是为什么你有错误。让我为你分解它，所以它是有道理的。

您的 CSS 是基于使用选择器`:nth-of-type(N)`在`<td>`. 您的网格中有 9 列：*Company*、*Cust.No*、*Contact*、*Address*、*Phone*、*Email*、*File*、*Created Date*和*Notes*。

当您的页面低于某个宽度时，根据您的媒体查询，会发生以下情况：

```
thead tr { 
    position: absolute;
    top: -9999px;
    left: -9999px;
} 
```

此块将`<thead>`包含表格列标题的标签移出屏幕的可见空间（可视区域上方和左侧 10,000 像素）。

```
table, thead, tbody, th, td, tr { 
    display: block; 
}
td { 
    /* Behave  like a "row" */
    border: none;
    border-bottom: 1px solid #eee; 
    position: relative;
    padding-left: 50%; 
} 
```

正如评论所说，这些块禁用了`display: table`表格的默认 CSS 渲染，而是开始强制其中包含的所有元素`block`显示 - 这意味着每个新元素默认情况下将在新行上开始。这就是导致您的单元格在一行中彼此重叠出现的原因。

`padding-left: 50%`标签上的是`<td>`强制您的数据从表格中心开始显示的原因。

现在魔术：

```
td:nth-of-type(1):before { content: "MFG P/N"; } 
```

这行说...“对于任何`<td>`标签，如果它是`<td>`其父元素中的第 (1) 个，则将文本 'MFG P/N' 注入其`:before`伪元素。”

`:before`伪元素是一种 CSS 结构，它出现在*DOM 之外*（您无法在标记中或通过检查页面元素看到它） - 但仍会呈现在屏幕上。它呈现*在*它应用到的元素内 (the `<td>`)。下面的 CSS 告诉它如何显示：

```
td:before { 
    /* Now like a table header */
    position: absolute;
    /* Top/left values mimic padding */
    top: 6px;
    left: 6px;
    width: 45%; 
    padding-right: 10px; 
    white-space: nowrap;
} 
```

换句话说，在`position: relative` `<td>`父元素中，从上边缘开始定位`:before`伪元素，从左边缘开始，使其与等宽。`6px``6px``45%``<td>`

这就是在行前注入“标题”的原因。

**现在解决问题**：

您的 HTML/JS 当前在您的非工作示例中呈现以下 HTML（简化以显示重要部分）：

```
<table>
  <thead><!-- omitted because it is off-screen --></thead>
  <tbody>
    <tr class="odd">
      <td valign="top" colspan="10" class="dataTables_empty">
        No data available in table
      </td>
    </tr>
  </tbody>
</table> 
```

请注意，*您**的`<td>``<tbody>`*. 这就是为什么您没有显示带有多个前置标题的多行 -`<td>`您的 CSS 仅作用于一个单元格。

相反，如果您希望显示一系列带有必要标题值的空框，则需要将 HTML 输出更改为以下内容：

```
<table>
  <thead><!-- still omitted, because it still doesn't matter --></thead>
  <tbody>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td><!-- 9 columns, to match your 9 headers -->
  </tbody>
</table> 
```

这将允许您的 CSS 规则`:nth-of-type(1)`通过`:nth-of-type(9)`正确呈现必要的标题，通过提供“不可见”内容， `&nbsp;`（不间断空格）强制表格`<td>`在所有浏览器中显示标签。

我希望这有帮助。

**附加说明：**

您当前的 CSS 包含一堆您不需要的垃圾。具体来说：

```
td:nth-of-type(10):before { content: "Shipped"; }
td:nth-of-type(11):before { content: "Report"; }
td:nth-of-type(12):before { content: "RMA"; }
td:nth-of-type(10):before { content: "File"; }
td:nth-of-type(10):before { content: "Add Part"; } 
```

你的最后 5 条`:nth-of-type`规则。这些将永远不会应用，使用您当前的 HTML 布局 - 因为您的表格中只有 9 列。

此外 - 您有 3 条单独的目标规则`:nth-of-type(10)`……这意味着即使您*确实*有第 10 列，也只会应用这些规则中的*最后一条*`"Add Part"`( )，因为它将覆盖前两条。

# php - 有没有办法使用 php 或 htaccess 来防止访问 url 的某个部分

> ID：15748629
> 
> 赞同：1
> 
> 时间：2013-04-01T17:51:32.747
> 
> 标签：php, javascript, html, .htaccess, redirect

例如，用户无法访问[http://example.com/here](http://example.com/here)，但可以访问添加更多内容的任何内容。一个例子是[http://example.com/her?action=blah](http://example.com/her?action=blah) blah。

这样做的目的是防止通过直接访问页面来访问文件，但允许文件与添加的更多操作/链接一起使用。

我只想感谢大家的快速反应。根据我得到的答案，我使用了 php 并且它有效。

我使用了以下内容：

```
function access_granted(){
 global $pagenow;
 if(!isset($_GET['action']) && 'wp-login.php' == $pagenow ) {
  wp_redirect('http://example.com/');
  exit();
 }
} 
```

不过，我确实有一个问题。我将 wp-login.php 网址更改为[http://example.com/here](http://example.com/here)而不是[http://example.com/wp-login.php](http://example.com/wp-login.php)。

我的问题是现在，函数 access_granted 不再起作用了。我的猜测是 $pagenow。

任何建议，例如如何检查 url/here 而不是 wp-login.php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:04:33.930

如果您想采用 .htaccess 方式，请执行此操作。通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^$
RewriteRule ^here/?$ - [NC,L,F] 
```

这将抛出禁止的错误，`/here`或者`/here/`但将允许`/here?bar=foo`URI 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:54:06.590

example.com/here 是由 PHP 脚本处理的吗？如果是这样，请在脚本开头进行输入验证，如果不符合要求，请提供错误页面或重定向（[http://php.net/manual/en/function.http-redirect。 php](http://php.net/manual/en/function.http-redirect.php) ) 到另一个页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:00:31.223

就在这里。你真的不需要处理htaccess，你可以用php来做。首先，您需要检查是否设置了所需的选项。例如，如果您有一个`GET`带有名称的属性，`action`您可以检查它是否使用`isset`函数设置。您还需要指定自定义 HTTP 403 页面并将用户重定向到该页面。`action`这是一个在未定义时显示禁止错误的示例：

```
<?php
if (!isset($_GET['action'])) {
   header('HTTP/1.0 403 Forbidden',403);
   header('Location: 403.html');
   exit;
}
?> 
```

您可能还会发现以下链接很有用： [How to display Apache's default 404 page in PHP](https://stackoverflow.com/questions/5953096/how-to-display-apaches-default-404-page-in-php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T18:14:50.830

如果您希望它在任何附加到 URL 的情况下工作，您可以在 /here 由 PHP 处理时使用它：

```
 <?php
  if(!$_GET){
         die('You are not allowed to access this URL.');
   }
   else {
     ... PHP code that will execute in case the user is allowed to access the URL(you can also use HTML by just having ?> here instead and add <?php } ?> at the end of the document)  ...
  }
 ?> 
```

希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T17:57:27.457

当然，您可以为此使用 PHP。在 here.php 上，您需要在代码顶部有一行（在您的示例中），如下所示：

```
if(!isset($_GET['action']){
     header('location:/notallowed.php');
     exit;
} 
```

notallowed.php 是当他们没有完整链接时您想要显示的任何内容。

# doctrine - 学说 2 - 无法保存一对多的自我参照关系

> ID：15748635
> 
> 赞同：0
> 
> 时间：2013-04-01T17:51:49.357
> 
> 标签：doctrine, one-to-many, categories, self, persist

我在保存一对多自引用关系时遇到问题，父母和孩子都正确保存在数据库中，但我让孩子的 parent_id 为空。我遵循了学说示例……但不知道

```
namespace CD\Entity;
/**
 * @Entity
 */

class Category {

/**
* @Id 
* @Column(type="integer")
* @GeneratedValue(strategy="IDENTITY")
*/
private $id;

/** @Column(type="string",length=50) */
private $name;

/**
 * @OneToMany(targetEntity="Category", mappedBy="parent",cascade={"persist"})
 */
private $children;

/**
 * @ManyToOne(targetEntity="Category", inversedBy="children")
 * @JoinColumn(name="parent_id", referencedColumnName="id")
 */
private $parent;

// setters and getters ... 
```

}

我的控制器在这里：

```
public function insertAction()
{

    $cm = new CD\Entity\Category();
    $cc = new CD\Entity\Category();

    $cm->name = 'mainCat';
    $cc->name = 'childCat';

    $cm->children = array($cc);

    $this->_em->persist($cm);
    $this->_em->flush();        

} 
```

我真的不知道我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:14:45.177

您是否尝试过[Doctrine Extensions](https://github.com/l3pp4rd/DoctrineExtensions)，尤其是[树](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/tree.md)扩展？它使这样的工作变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:48:37.180

您需要保留所有实体。运行后（假设您使用学说）

> 学说：生成：实体 CD/实体

您将有一个名为“Category->addChildren”的函数，它应该用于将子项添加到现有的类别实体。

尝试这个：

```
public function insertAction()
{

    $cm = new CD\Entity\Category();
    $cc = new CD\Entity\Category();

    $cm->setName('mainCat');
    $cc->setName('childCat');

    $cm->addChildren($cc);

    $this->_em->persist($cm);        
    $this->_em->persist($cc);        

    $this->_em->flush();        

} 
```

# java - 在java中给GC更多的CPU时间？

> ID：15748639
> 
> 赞同：5
> 
> 时间：2013-04-01T17:52:02.480
> 
> 标签：java, optimization, garbage-collection

我有一个 java 应用程序，它使用尽可能多的 CPU，并使用它，大量内存（高达 80Gb）。

我正在为该应用程序优化 GC，并且我想告诉 JVM 使用给定百分比的时间（60%）来进行 GC，否则机器不在 GC 中的时间量正在处理和分配更多内存。

我想确认该`-XX:CMSIncrementalDutyCycle=60`参数是我正在寻找的东西，以及是否有任何其他参数可以为 GC 提供更多功能（我已经看过`CMSIncrementalPacing`and `CMSIncrementalDutyCycleMin`）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:02:35.740

> 我想确认 XX:CMSIncrementalDutyCycle=60 参数是我正在寻找的参数，以及是否有任何其他参数可以为 GC 提供更多功能（我已经看过 CMSIncrementalPacing 和 CMSIncrementalDutyCycleMin）

不，你错了。此标志不会控制分配给 JVM GC 的可用 CPU 百分比。该文档指出：

```
-XX:CMSIncrementalDutyCycle=<N> default: 50 
```

> 这是允许并发收集器运行的次要收集**之间**的时间百分比 (0-100) 。如果启用了 CMSIncrementalPacing，那么这只是初始值。

因此，假设您正在使用 CMS 收集器 ( `-XX:+UseConcMarkSweepGC`)，那么上面的标志控制 CMS 允许在次要 GC 收集之间执行的时间百分比。

没有标志可以让您直接控制 GC 线程执行的时间量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:02:46.447

您**无法在 GC 收集期间设置**CPU使用率**上限**。

`CMSIncrementalDutyCycle`用于**设置次要收集之间的时间**（参见[[1]](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)），因此您可以控制 GC 运行的频率，从而间接控制 CPU 使用率。但是，没有任何参数可以让您直接控制 CPU 使用率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:04:57.550

首先，`CMSIncreamentalDutyCycle`对增量 CMS 算法的影响（应由 启用`-XX:+CMSIncrementalMode`）。无论如何，增量模式都不利于您的任务。

其次，您可以限制 GC 任务消耗的 CPU 核心数。

*   `-XX:ParallelGCThreads=N`为 Stop-the-World 阶段设置核心数
*   `-XX:ConcGCThreads=N`设置并发任务的核心数（仅适用于 CMS）

[您可以在此处](http://blog.ragozin.info/2011/09/hotspot-jvm-garbage-collection-options.html)找到更多与 GC 相关的选项。

# mongodb - Cloud9 上的 NodeJS、ExpressJS 和 PassportJS 会话连接到 Appfog Mongo

> ID：15748644
> 
> 赞同：4
> 
> 时间：2013-04-01T17:52:16.110
> 
> 标签：mongodb, express, mongoose

我很难在 Appfog 上与 MongoDB 建立任何类型的连接以进行会话存储。我目前正在使用 PassportJS 和 Mongoose 运行 Node Express。我已经在线学习了许多示例和教程，并尝试了一些 ODM 映射器。

我必须承认，我一直在努力获得任何形式的联系，更不用说抽象的会话工作了。

我已经在[这里](https://stackoverflow.com/questions/14995336/how-to-get-mongodb-working-on-appfog)和[这里](https://stackoverflow.com/questions/10661981/cloud9-mongodb-nodejs)尝试了 SO 示例，但没有成功。每次我尝试连接以下代码时：-

```
var env = process.env.NODE_ENV || 'development',
    config = require('./config/config')[env],
    auth = require('./config/middlewares/authorization'),
    mongoose = require('mongoose');

// Bootstrap db connection
mongoose.connect(config.db); 
```

我得到一个： -

```
Error: Error setting TTL index on collection : sessions
    at module.exports._get_collection (/var/lib/stickshift/514a22705973cafc85000110/app-root/data/447240/node_modules/connect-mongo/lib/connect-mongo.js:137:23)
    at Db.ensureIndex (/var/lib/stickshift/514a22705973cafc85000110/app-root/data/447240/node_modules/mongodb/lib/mongodb/db.js:1227:28)
    at Db.indexInformation (/var/lib/stickshift/514a22705973cafc85000110/app-root/data/447240/node_modules/mongodb/lib/mongodb/db.js:1371:30) 
```

任何人都可以提供任何可能的方向或帮助来完成这项工作吗？

请询问您是否需要在此处进一步转储代码以帮助解决问题。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:56:22.743

我遇到了同样的问题，它发生是因为我使用部分连接的数据库来初始化 express.session()。

这是我最初的：

> ```
> mongoose.connect(dbPath);
> ...
> app.configure(function() {
>   ...
>   app.use(express.session({
>     secret : secret,
>     store: new MongoStore({ db: mongoose.connection.db })
>   }));
>   ...
> }); 
> ```

'new MongoStore()' 调用发生在 mongoose.connect() 完成之前，因此它使用尚未连接的 db 设置 'sessions' 的 TTL 并失败。我切换到“new MongoStore({ url: dbPath })”，这解决了这个问题，但可能会导致 2 个不同的数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T02:09:47.960

我遇到了同样的错误，通过使用[这个](https://stackoverflow.com/questions/16226472/mongoose-autoreconnect-option)问题中的代码来获得更多的错误信息来解决它；它帮助我意识到问题确实是连接字符串中的用户 ID 和密码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T07:16:29.293

我无法连接到 AppFog 工作。不幸的是，AppFog 本身也无济于事。因此，我启动了一个 MongoHQ 实例，并且完全没有连接问题。

# android - 在 Android 中的 startActivity() 方法后丢失 Activity 详细信息

> ID：15748647
> 
> 赞同：0
> 
> 时间：2013-04-01T17:52:33.937
> 
> 标签：android, android-intent, android-activity

我的项目 Connect+Details 和 Menu 中有 2 项主要活动。在我将第一个活动切换到第二个活动之后，一切顺利。问题从“菜单”返回到“连接+详细信息”开始。

当我使用后退键在第二个活动之间切换并返回第一个活动时，一切顺利。

当我使用此代码时问题开始：

```
Intent myIntent = new Intent(Menu.this, ConnectActivity.class);
startActivity(myIntent); 
```

我确实回到了“连接+详细信息”，但该活动中的每个细节都丢失了。

我的问题很简单，我怎样才能回到预览活动并仍然拥有该活动中使用的详细信息。

编辑：即使我在第 4 次、第 5 次活动中也是如此，所以`finish()`对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:13:05.247

您可能希望将数据保存在数据库中`SharedPreferences`或数据库中，然后使用保存的数据重新填充您的`Activity`. 您可以在离开时使用[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)保存一对，即使您的应用程序关闭，这也会持续存在。`key/value``Connect Activity`

如果要存储大量数据，那么您可以考虑使用[SQLite DB](http://developer.android.com/guide/topics/data/data-storage.html#db)。设置和使用这可能有点棘手，但如果您要存储大量数据，这可能是值得的……尤其是对于不同的用户而言。

`Activity`当您离开程序时，这两个选项都会保留您的数据。您也可以使用`static Array`前两个选项中的一个，但可能会更适合您。

**[Storage Options Docs](http://developer.android.com/guide/topics/data/data-storage.html)**提供了一些不错的示例来帮助您入门，尤其是当您决定 Shared Preferences 对您有用时。

**编辑**

除非有所改变，否则您不能将可序列化对象存储在`SharedPreferences`. 但这[是一个 SO 链接](https://stackoverflow.com/questions/5816695/android-sharedpreferences-with-serializable-object)，讨论将它们保存到文件并从那里读取。也许这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:36:50.063

不要使用 Intent 从 'Menu' 移动到 'Connect+Details' 而是调用 finish(); 从中

仅在头等舱使用意图移动到第二个，即；“连接+详细信息”到“菜单”

不要在 Connect+Details 中调用 finish()

# html - 页面内的锚链接

> ID：15748652
> 
> 赞同：0
> 
> 时间：2013-04-01T17:52:44.723
> 
> 标签：html, anchor

我有一个指向 domain.com/faq/#fees 的链接。我如何让它向下滚动到常见问题页面的费用部分？

```
<section id="Fees">  // doesn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:55:03.530

`<section id="fees">`或链接到`domain.com/faq/#Fees`.

它区分大小写。

# ldap - LDAP 和持久性数据？

> ID：15748654
> 
> 赞同：0
> 
> 时间：2013-04-01T17:52:49.413
> 
> 标签：ldap, persistence, persistent-storage

我只是好奇为什么 LDAP（轻量级目录协议）会或不会被视为持久性数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:45:25.723

您正在将“协议”与“数据”混为一谈。没有“LDAP 数据”。

除此之外，LDAP 目录可以看作是持久存储的经典示例。

1.  LDAP 目录条目的平均生命周期为几周，甚至几个月。
2.  LDAP 服务器针对“偶尔写入，多次读取”的使用模式进行了优化。
3.  现代 LDAP 服务器允许使用确保目录中数据一致性的机制。

# javascript - 对象上的 Javascript reduce()

> ID：15748656
> 
> 赞同：229
> 
> 时间：2013-04-01T17:53:04.083
> 
> 标签：javascript, arrays, object, reduce

有一种很好的 Array 方法[`reduce()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)可以从 Array 中获取一个值。例子：

```
[0,1,2,3,4].reduce(function(previousValue, currentValue, index, array){
  return previousValue + currentValue;
}); 
```

用对象实现相同目标的最佳方法是什么？我想这样做：

```
{ 
    a: {value:1}, 
    b: {value:2}, 
    c: {value:3} 
}.reduce(function(previous, current, index, array){
  return previous.value + current.value;
}); 
```

但是，Object 似乎没有`reduce()`实现任何方法。

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2013-04-01T18:03:46.473

一种选择`reduce`是[`keys()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)：

```
var o = { 
    a: {value:1}, 
    b: {value:2}, 
    c: {value:3} 
};

Object.keys(o).reduce(function (previous, key) {
    return previous + o[key].value;
}, 0); 
```

有了这个，您需要指定一个初始值，否则第一轮将是`'a' + 2`.

如果您希望结果为 Object ( `{ value: ... }`)，则每次都必须初始化并返回该对象：

```
Object.keys(o).reduce(function (previous, key) {
    previous.value += o[key].value;
    return previous;
}, { value: 0 }); 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2017-08-20T16:54:31.740

在这种情况下，您真正​​想要的是[`Object.values`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values). 考虑到这一点，这是一个简洁的**ES6**实现：

```
const add = {
  a: {value:1},
  b: {value:2},
  c: {value:3}
}

const total = Object.values(add).reduce((t, {value}) => t + value, 0)

console.log(total) // 6 
```

或者简单地说：

```
const add = {
  a: 1,
  b: 2,
  c: 3
}

const total = Object.values(add).reduce((t, n) => t + n)

console.log(total) // 6 
```

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2017-02-27T14:58:23.897

**ES6 实现：** [Object.entries()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)

```
const o = {
  a: {value: 1},
  b: {value: 2},
  c: {value: 3}
};

const total = Object.entries(o).reduce(function (total, pair) {
  const [key, value] = pair;
  return total + value.value;
}, 0); 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-04-01T18:16:07.007

首先，您不太了解[reduce](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)以前的值是什么。

在您拥有的伪代码中`return previous.value + current.value`，因此该`previous`值将是下一次调用时的数字，而不是对象。

其次，`reduce`是一个数组方法，而不是对象的方法，并且在迭代对象的属性时不能依赖顺序（请参阅：[https ://developer.mozilla.org/en-US/docs/ JavaScript/Reference/Statements/for...in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)，这也适用于[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)）；所以我不确定`reduce`在对象上应用是否有意义。

但是，如果顺序不重要，您可以：

```
Object.keys(obj).reduce(function(sum, key) {
    return sum + obj[key].value;
}, 0); 
```

或者您可以只[映射](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Map)对象的值：

```
Object.keys(obj).map(function(key) { return this[key].value }, obj).reduce(function (previous, current) {
    return previous + current;
}); 
```

PS 在 ES6 中使用胖箭头函数的语法（已经在 Firefox Nightly 中），你可以缩小一点：

```
Object.keys(obj).map(key => obj[key].value).reduce((previous, current) => previous + current); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-27T12:21:33.307

可以使用以下方法将对象转换为数组：[Object.entries()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)、[Object.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)、[Object.values()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values)，然后减少为数组。但是您也可以在不创建中间数组的情况下减少对象。

我创建了一个用于处理对象的小助手库[odict 。](https://github.com/isum/odict)

```
npm install --save odict 
```

它的`reduce`功能非常类似于[Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
export const reduce = (dict, reducer, accumulator) => {
  for (const key in dict)
    accumulator = reducer(accumulator, dict[key], key, dict);
  return accumulator;
}; 
```

您还可以将其分配给：

```
Object.reduce = reduce; 
```

因为这个方法非常有用！

所以你的问题的答案是：

```
const result = Object.reduce(
  {
    a: {value:1},
    b: {value:2},
    c: {value:3},
  },
  (accumulator, current) => (accumulator.value += current.value, accumulator), // reducer function must return accumulator
  {value: 0} // initial accumulator value
); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-10-14T18:32:28.850

让我总结一下可能性。目标始终是从对象中创建一个数组。为此有各种 Javascript 对象函数。对于每个单独的函数，都有不同的解释方式。所以它总是取决于我们的对象是什么样子以及我们想要做什么。

在上面的示例中，它是一个包含三个对象的对象。

```
const obj = { 
    a: {value: 1}, 
    b: {value: 2}, 
    c: {value:3} 
}; 
```

### 使用 Object.keys

Object.keys 只给我们对象的键。

```
const arr = Object.keys(obj);
// output arr: 
[a, b, c]

const result = arr.reduce((total, key) => {
    return sum + obj[key].value;
}, 0);
// output result
// 6 
```

### 使用 Object.value

Object.value() 返回数组中的每一个值。

```
const arr = Object.value(obj);
// output arr
[
   {value: 1},
   {value: 2},
   {value: 3},
]

const result = arr.reduce((total, singleValue) => {
   return total + singleValue.value;
}, 0);

// output result
// 6

// Or the short variant
const resultShort = Object.values(obj).reduce((t, n) => t + n.value, 0)

// output resultShort
// 6 
```

### 使用 Object.entries

Object.entries 将每个单独的对象值拆分为一个数组。

```
const arr = Object.entries(obj)
// output arr
[
  ["a", {visitors: 1}],
  ["b", {visitors: 2}],
  ["c", {visitors: 4}]
]

const result = arr.reduce((total, singleArr) => {
  return total + singleArr[1].value;
}, 0);

// output result
// 6 
```

是使用 reduce 还是使用数组函数 map() 取决于您和您想要做什么。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-10-05T11:43:12.620

扩展 Object.prototype。

```
Object.prototype.reduce = function( reduceCallback, initialValue ) {
    var obj = this, keys = Object.keys( obj );

    return keys.reduce( function( prevVal, item, idx, arr ) {
        return reduceCallback( prevVal, item, obj[item], obj );
    }, initialValue );
}; 
```

使用示例。

```
var dataset = {
    key1 : 'value1',
    key2 : 'value2',
    key3 : 'value3'
};

function reduceFn( prevVal, key, val, obj ) {
    return prevVal + key + ' : ' + val + '; ';
}

console.log( dataset.reduce( reduceFn, 'initialValue' ) );
'Output' == 'initialValue; key1 : value1; key2 : value2; key3 : value3; '. 
```

n'Joy it，伙计们！;-)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-09T14:50:43.203

1：

```
[{value:5}, {value:10}].reduce((previousValue, currentValue) => { return {value: previousValue.value + currentValue.value}})

>> Object {value: 15} 
```

2：

```
[{value:5}, {value:10}].map(item => item.value).reduce((previousValue, currentValue) => {return previousValue + currentValue })

>> 15 
```

3：

```
[{value:5}, {value:10}].reduce(function (previousValue, currentValue) {
      return {value: previousValue.value + currentValue.value};
})

>> Object {value: 15} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-04-01T18:14:22.340

您可以使用生成器表达式（多年来在所有浏览器和 Node 中都支持）来获取可以减少的列表中的键值对：

```
>>> a = {"b": 3}
Object { b=3}

>>> [[i, a[i]] for (i in a) if (a.hasOwnProperty(i))]
[["b", 3]] 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-01T18:22:50.553

如果您可以使用数组，请使用数组，数组的长度和顺序是其价值的一半。

```
function reducer(obj, fun, temp){
    if(typeof fun=== 'function'){
        if(temp== undefined) temp= '';
        for(var p in obj){
            if(obj.hasOwnProperty(p)){
                temp= fun(obj[p], temp, p, obj);
            }
        }
    }
    return temp;
}
var O={a:{value:1},b:{value:2},c:{value:3}}

reducer(O, function(a, b){return a.value+b;},0); 
```

/* 返回值：（数字）6 */

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-04-01T19:01:11.973

这不是很难自己实现：

```
function reduceObj(obj, callback, initial) {
    "use strict";
    var key, lastvalue, firstIteration = true;
    if (typeof callback !== 'function') {
        throw new TypeError(callback + 'is not a function');
    }   
    if (arguments.length > 2) {
        // initial value set
        firstIteration = false;
        lastvalue = initial;
    }
    for (key in obj) {
        if (!obj.hasOwnProperty(key)) continue;
        if (firstIteration)
            firstIteration = false;
            lastvalue = obj[key];
            continue;
        }
        lastvalue = callback(lastvalue, obj[key], key, obj);
    }
    if (firstIteration) {
        throw new TypeError('Reduce of empty object with no initial value');
    }
    return lastvalue;
} 
```

在行动：

```
var o = {a: {value:1}, b: {value:2}, c: {value:3}};
reduceObj(o, function(prev, curr) { prev.value += cur.value; return prev;}, {value:0});
reduceObj(o, function(prev, curr) { return {value: prev.value + curr.value};});
// both == { value: 6 };

reduceObj(o, function(prev, curr) { return prev + curr.value; }, 0);
// == 6 
```

您还可以将其添加到 Object 原型中：

```
if (typeof Object.prototype.reduce !== 'function') {
    Object.prototype.reduce = function(callback, initial) {
        "use strict";
        var args = Array.prototype.slice(arguments);
        args.unshift(this);
        return reduceObj.apply(null, args);
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-14T08:30:26.590

试试这个。它将从其他变量中排序数字。

```
const obj = {
   a: 1,
   b: 2,
   c: 3
};
const result = Object.keys(obj)
.reduce((acc, rec) => typeof obj[rec] === "number" ? acc.concat([obj[rec]]) : acc, [])
.reduce((acc, rec) => acc + rec) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-01-21T17:00:50.200

如果作为数组处理会容易得多

返回水果的总量：

```
let fruits = [{ name: 'banana', id: 0, quantity: 9 }, { name: 'strawberry', id: 1, quantity: 1 }, { name: 'kiwi', id: 2, quantity: 2 }, { name: 'apple', id: 3, quantity: 4 }]

let total = fruits.reduce((sum, f) => sum + f.quantity, 0); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-01T00:54:51.467

由于尚未真正在答案中得到确认，因此下划线`reduce`也适用于此。

```
_.reduce({ 
    a: {value:1}, 
    b: {value:2}, 
    c: {value:3} 
}, function(prev, current){
    //prev is either first object or total value
    var total = prev.value || prev

    return total + current.value
}) 
```

注意，`_.reduce`如果列表对象只有一项，将返回唯一的值（对象或其他），而不调用迭代器函数。

```
_.reduce({ 
    a: {value:1} 
}, function(prev, current){
    //not called
})

//returns {value: 1} instead of 1 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-07-25T05:30:22.910

试试这个单线箭头功能

```
Object.values(o).map(a => a.value, o).reduce((ac, key, index, arr) => ac+=key) 
```

# playframework - Play Framework - Java：@ManyToMany 关联是否占用大量资源？

> ID：15748658
> 
> 赞同：1
> 
> 时间：2013-04-01T17:53:09.680
> 
> 标签：playframework, many-to-many, playframework-2.0, playframework-2.1, ebean

**问题**：
像@OneToMany 或@ManyToMany 这样的关联是否会占用大量内存？即会播放！服务器在检索包含相应字段的实体时将所有内容加载到内存中？

**以下场景：**
型号：

```
@Entity
public class User extends Model
{
    @Id
    public Long id;

    public String name;        

    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(       name = "user_user",
               joinColumns = @JoinColumn(name = "source_user_id"),
        inverseJoinColumns = @JoinColumn(name = "target_user_id"))
    List<User> friends = new ArrayList<User>();

    /* 
    Many other fields
    .
    .
    .
    */
} 
```

我们在这样的模板中调用它：

```
@(user: User)

@for(friend <- user.friends){
    <div>
       @friend.name
    </div>
} 
```

**问题继续：**
现在假设我碰巧有 1000 个朋友。

*   我的朋友列表中的每个朋友都会被加载到内存中吗？
*   如果是（这似乎是合乎逻辑的结论），结合具有更大内存占用的模型创建 @ManyToMany 或 @OneToMany 关联是否被认为是“不好的做法”，什么被认为是“最佳做法”？

# node.js - 猫鼬：更新不起作用

> ID：15748660
> 
> 赞同：1
> 
> 时间：2013-04-01T17:53:12.693
> 
> 标签：node.js, mongodb, mongoose

基本思想是这样的：

```
model.find({}, function(err, docs) {
    docs.forEach(function(doc) {
        // update it with whatever new object
        model.update({"category":"cat1"});
    });
}); 
```

现在我的问题是任何形式的更新/保存都不起作用。我可以使用模型查找、计数等。我试过`doc.save()`, `model.findOneAndUpdate()`，使用`$set`特定字段的参数，它们不起作用。我去了 mongo shell 并使用参数输入了更新命令，它起作用了。

`var m = new model({..})`有一次它确实有效，是当我尝试`m.save()`使用`find()`. 但我需要按字段查找文档并更新它们。

我觉得我错过了一些非常基本的东西，有人可以帮我吗？

编辑：mongoose.disconnect() 稍后在代码中被调用。所以查询没有执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T22:55:25.540

此问题的另一个可能原因是当您使用混合类型时，如`Schema.Types.Mixed`. 如果您只更新 Mixed 字段，则 Mongoose 不知道您已更新该字段。所以你需要打电话[`markModified`](http://mongoosejs.com/docs/api.html#document_Document-markModified)

我最近遇到了这个问题，想知道发生了什么让我很头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:51:03.700

~~除非它只是一个错字，否则您正在对错误的对象进行更新。你可能想做~~

~~model.find({}, function(err, docs) { docs.forEach(function(doc) { doc.update({/ *fields here* /}); }); });~~

上面的答案是不正确的。

**编辑**

稍微想了想，你到底为什么要这么做`find`？没有它，您应该能够更新您的文档。检查[API 文档以获取更新](http://mongoosejs.com/docs/api.html#model_Model.update)

```
model.update({}, {field1: 'updated value'}, function(err) {}); 
```

# solr - 构建 Solr 自定义请求处理程序 - 将组子句应用于查询

> ID：15748662
> 
> 赞同：0
> 
> 时间：2013-04-01T17:53:14.727
> 
> 标签：solr, lucene

我正在编写一个自定义处理程序，我将在其中运行多个查询，然后合并结果。目前我遇到了在处理程序中创建查询的问题，我需要在其中应用“分组依据”子句......

这就是我创建查询的方式：

```
String q = params.get(CommonParams.Q);
...... 
Query myQuery = new WildcardQuery(new Term( "name", q )); 
...... 
ScoreDoc[] hits = searcher.search(myQuery , 100).scoreDocs; 
```

我的问题是：如何获取“q”变量并应用“group by”子句以便对结果进行分组？

例子：

我索引了以下内容：

```
<doc>
<filed name=id>001</field>
<filed name=name>foo</field>
<filed name=color>red</field>
</doc> 

<doc>
<filed name=id>001</field>
<filed name=name>foo</field>
<filed name=color>blue</field>
</doc>

<doc>
<filed name=id>002</field>
<filed name=name>bar</field>
<filed name=color>red</field>
</doc> 

<doc>
<filed name=id>002</field>
<filed name=name>bar</field>
<filed name=color>blue</field>
</doc> 
```

是否可以将分组应用于我的请求处理程序内部的“查询”对象以按 id 分组。

```
Query query = new WildcardQuery(new Term( "name", q )); 
```

这样只会返回2个文件？

我在网上到处搜索，我没有找到任何与我的问题相关的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:48:53.893

从Solr 3.3/4.0 开始，[结果分组/字段折叠](http://wiki.apache.org/solr/FieldCollapsing)功能似乎是您正在寻找的。这允许您通过查询传递`group.field`参数，例如：

```
&q=name:something&group=true&group.field=id 
```

# c - C 客户端/服务器程序：服务器在不应该的情况下多次发送答案

> ID：15748668
> 
> 赞同：1
> 
> 时间：2013-04-01T17:53:27.120
> 
> 标签：c, network-programming

我在 C 中有以下场景：一个简单的客户端程序向服务器发送类似 HTTP 的请求，然后服务器应该返回指定文件的输入。到目前为止，服务器应该只支持三种方法：GET、HEAD 和错误请求的默认答案。

这是服务器程序的一部分：

```
for(;;){
    struct sockaddr_in clientAddr;
    int clientAddrLen = sizeof(clientAddr);
    int clientSocket;

    clientSocket = accept(serverSocket, (struct sockaddr*)&clientAddr, &clientAddrLen);

    char buf[BUFSIZE];
    int bytesRecv;

    bytesRecv = recv(clientSocket, (char*)&buf, BUFSIZE, 0);
    while(bytesRecv > 0){
        char *method;
        method = strtok(buf, " ");
        printf("method %s\n", method);
        if(strncmp(method, head, 4) == 0){
            /*HEAD*/
            char answer[] = "method: HEAD\0";
            send(clientSocket, answer, sizeof(answer) + 1, 0);
        }else{
            if (strncmp(method, get, 3) == 0){
                /*GET*/
                char answer[] = "method: GET\0";
                send(clientSocket, answer, sizeof(answer) + 1, 0);
            }else{

                /*bad request*/
                char answer[] = "HTTP/1.1 400 Bad Request\0";
                send(clientSocket, answer, sizeof(answer) + 1, 0);
            }   
        }

        /*Read*/
        bytesRecv = recv(clientSocket, (char*)&buf, BUFSIZE, 0);
    } 
```

这是客户端程序的一部分，它要求在命令行上输入请求，然后发送相应的输入：

```
char* server_reply[1024];
char* msg[100];

/*send requests*/
for(;;){
    printf("Request:\n");
    scanf("%s", &msg);

    if(strcmp(msg, "quit") == 0){
        break;
    }

    send(clientSocket, msg, sizeof(msg), 0);

    if(recv(clientSocket, server_reply, sizeof(server_reply), 0) < 0){
        printf("Failure in recv.");
    }else{
        printf("Server: %s\n", server_reply);
    }
} 
```

现在，问题如下：当我在客户端输入例如“GET HEAD asd”时，我从服务器得到三个答案，即

> 方法：获取
> 
> 方法：头
> 
> HTTP/1.1 400 错误请求

当它实际上应该只是“方法：GET”时。我真的不明白这种行为......感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:01:42.923

```
scanf("%s", &msg); 
```

**读取字符串不是整行**。这意味着当你进入`GET HEAD asd`你的循环运行三遍。

首先它读取`GET`发送它
然后`HEAD`发送它
然后`asd`

# jquery - 在 jQuery 的 var 中添加 html 标签

> ID：15748669
> 
> 赞同：0
> 
> 时间：2013-04-01T17:53:28.963
> 
> 标签：jquery

我正在使用下面的代码制作一些动画。但是我需要用跨度包装第一个单词，这样我就可以更改第一个单词的颜色。我将如何添加跨度？

jQuery 一点也不强，所以任何帮助都将不胜感激。谢谢你。

jQuery：

```
$(function() {
    var num = 0;
    var words = [
        {left: "Slam Your Face", right: "Watch Out"},
        {left: "Death", right: "Death"}
     ];    

    var fadel = $('#fadeL');
    var fader = $('#fadeR');

    animate();

    function animate() {
        var leftword = words[num].left;
        var rightword = words[num].right;

    fadel
        .stop()
        .css('top', '18px')
        .css('left', '0')
        .css('opacity', 0)
        .text(leftword).show();

    fader
        .stop()
        .css('top', '68px')
        .css('left', '400px')
        .css('opacity', 0)
        .text(rightword).show();

    fadel.animate({
        opacity: 1,
        left: (350 - fadel.width()) + 'px'
        }, 3000, function() {
            fadel.fadeOut("fast", function() {
            queueNext();
        });
    });

    fader.animate({
        opacity: 1,
        left: '250px'
    }, 3000, function() {  
            fader.fadeOut("fast");
        });
    }

    function queueNext() {
        if (++num == words.length)
        num = 0;

        animate();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:55:06.807

见小提琴：http: [//jsfiddle.net/YxMHx/6/](http://jsfiddle.net/YxMHx/6/)

```
$(function() {
    var num = 0;
    var someConditionIsTrue = true;
    var words = [
        {left: "Slam Your Face", right: "Watch Out"},
        {left: "Death", right: "Death"}
     ];    

    var fadel = $('#fadeL');
    var fader = $('#fadeR');

    animate();

    function animate() {
        var leftword = words[num].left;
        var rightword = words[num].right;

        var first = leftword.slice(0, leftword.indexOf(" "));

        first = "<span class=\"span_class\">" + first + "</span>";
        var lastWords = leftword.substring(leftword.indexOf(" ") + 1);

        var finalString = first + lastWords;

    fadel
        .stop()
        .css('top', '18px')
        .css('left', '0')
        .css('opacity', 0)
        .html(finalString).show().delay(2000);

    fader
        .stop()
        .css('top', '68px')
        .css('left', '400px')
        .css('opacity', 0)
        .text(rightword).show();

    fadel.animate({
        opacity: 1,
        left: (350 - fadel.width()) + 'px'
        }, 3000, function() {
            fadel.fadeOut("fast", function() {
            queueNext();
        });
    });

    fader.animate({
        opacity: 1,
        left: '250px'
    }, 3000, function() {  
            fader.fadeOut("fast");
        });
    }

    function queueNext() {

        if (++num == words.length)
        num = 0;

        animate();
    }

    queueNext();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:00:54.733

```
function spanFirstWord(str) {
    return str.replace(/^(\w+)/, '<span class="first">$1</span>');
}

function animate() {
    var leftword = spanFirstWord(words[num].left);
    var rightword = spanFirstWord(words[num].right);

fadel
    .stop()
    .css('top', '18px')
    .css('left', '0')
    .css('opacity', 0)
    .html(leftword).show();

fader
    .stop()
    .css('top', '68px')
    .css('left', '400px')
    .css('opacity', 0)
    .html(rightword).show();

fadel.animate({
    opacity: 1,
    left: (350 - fadel.width()) + 'px'
    }, 3000, function() {
        fadel.fadeOut("fast", function() {
        queueNext();
    });
}); 
```

# ruby-on-rails - 获取正确的 current_page？在 Rails 路由中渲染匹配时

> ID：15748670
> 
> 赞同：2
> 
> 时间：2013-04-01T17:53:29.213
> 
> 标签：ruby-on-rails

使用 Rails 3.2。我`current_page?`用来确定当前页面以添加`active`到适当的导航链接。

当登录失败时，它会返回到`user_sessions#new`，但`current_page?`不再识别`login_path`，因此不会将类添加`active`到链接中。

我不能使用`redirect_to`，因为我想捕捉控制器中的错误。

我怎样才能`current_page?`认识到`user_sessions#new`呢？

下面是我的代码：

```
# routes.rb
# Following 2 lines ensure that the login url is maintained as "login" even there are errors after submitting the form
match 'login' => 'user_sessions#new', :as => :login, :via => :get
match 'login' => 'user_sessions#create', :as => :login, :via => :post

# user_sessions_controller.rb
class UserSessionsController < ApplicationController  
  def create
    @user_session = UserSession.new(params[:user_session])
    if @user_session.save
      flash[:success] = "Login successful!"
      redirect_back_or_default profile_account_url
    else
      render 'new'
    end
  end
end

# _sub_nav.html.erb
<ul class="nav nav-tabs">
  <li<%= " class=active" if current_page?(login_path) %>>
    <a href="<%= login_path %>">Login</a>
  </li>
  <li<%= " class=active" if current_page?(signup_path) %>>
    <a href="<%= signup_path %>">Signup</a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:00:13.777

我相信改变

`<li<%= " class=active" if current_page?(login_path) %>>`

至

`<li<%= " class=active" if current_page?(:controller => 'user_session', :action => 'new') %>>`

应该管用。

# design-patterns - 在 Mvc4 和 Knockout 中嵌套多个 Views\ViewModels

> ID：15748671
> 
> 赞同：0
> 
> 时间：2013-04-01T17:53:29.923
> 
> 标签：design-patterns, breeze, single-page-application, durandal, hottowel

我有一个正在处理的 Mvc4 SPA 项目，我需要能够将多个视图相互嵌套。视图和视图模型使用 Durandal 链接起来。

在 Mvc3 中，我以前通过在视图中的局部视图中使用局部视图并将参数向下传递给局部视图来完成此操作。这样做我能够在一对多关系上有多个部分，而这些部分又显示了多个部分显示一对多关系，所有这些都链接回父视图。

先前在 Mvc3 中使用的示例 =

```
Public class ParentsController
{
public ActionResult Parent(int id)
{
    Parent parent = Db.Parents.Find(id);
    ViewBag.ParentId = parent.Id;
    return View(parent)
}

public PartialViewResult Child(int id)
{
    Child childs = Db.Childs.Where(w => w.ParentId = id);
    return PartialView("ChildPartial", childs.ToList());
}

public PartialViewResult GrandChild(int id)
{
    GrandChild grandChilds = Db.GrandChilds.Where(w => w.ChildId = id);
    return PartialView("GrandChildPartial", grandChilds.ToList());
}
} 
```

并查看类似

```
Parent.cshtml
@{
    ViewBag.Title = "Parent";
}
@Html.DisplayFor(Model.ParentName)
@{Html.RenderAction("ChildPartial", new { id = ViewBag.ParentId});}

ChildPartial.cshtml
@{
    ViewBag.Title = "Children";
}
{ foreach (var child in childs)
{
@{Html.DisplayFor(child.ChildsName)}
@{Html.RenderAction("GrandChildPartial", new { id = ViewBag.ChildId});}
}}

GrandChildPartial.cshtml
@{
    ViewBag.Title = "Grand Children";
}
{ foreach (var grandChild in GrandChilds)
{
@{Html.DisplayFor(grandChild.GrandChildsName)}
}} 
```

同样，上面是我过去使用的模式的一个简短示例，不需要帮助。

我可以使用 Breeze 从父视图模型中相对容易地加载子项和显示子项，但是当我进入大子项时，感觉就像我正在进入“意大利面条”代码并从一个视图模型加载太多。我在想正确的做法是为父母、孩子和孙子创建一个视图模型，将它们分开并使其可重用。

我的问题是父视图模型应该加载孩子的视图模型，然后让孩子的视图模型加载孙子的视图模型，还是应该有一个视图从单独的父级到子级到孙子级组成和级联？即一个视图应该分别加载3个视图模型还是应该有一个专用的父视图模型调用所有三个视图模型并或多或少地相互独立地加载它们？我在这里寻找最佳实践，因为 SPA 的想法对我来说相对较新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:11:43.013

在这里宣布最佳实践还为时过早……尤其是当您的应用程序的实际工作流程和性能特征未知时（此时可能不知道）。

一般来说，我们认为每个虚拟机都加载它需要的东西而不是依靠主虚拟机来为从属虚拟机提供服务会更好。这里的直觉是你把它分解成单独的虚拟机，这样它们就可以执行自己的职责......所以让他们去做吧。主节点成为其子虚拟机的协调者，并尽可能远离他们的实现细节。

我们打算在下个月左右发布一个名为“ **TempHire** ”的新样本，它植根于“Hot Towel(ette)”，可能会提供一些指导。时间可能不适合你。但是您可以[在 GitHub 上找到代码](https://github.com/IdeaBlade/Breeze/tree/master/Samples_Unpublished/TempHire.Breeze)），我将总结（并过度简化）该示例的与您的问题相关的功能：

1.  主 VM 与根实体（在您的情况下为父实体）相关联。

2.  主 VM 接收专用于该根实体的工作流并标有根实体 ID 的“数据上下文”（工作单元 [UoW]）。

3.  “工作单元管理器”通过根实体 ID 创建和跟踪 UoW。如果您要求 Parent-1 的 UoW，它会为您提供它正在跟踪的 UoW，或者为您创建一个新的。

4.  这使得子虚拟机可以轻松地与主虚拟机共享数据上下文，并且以一种相当解耦的方式彼此共享。主服务器不必通过嵌套 VM 链传递 UoW。相反，每个 VM 都被注入了“工作单元管理器”，并且可以通过父 ID 向“工作单元管理器”请求一个 UoW；它将获得“其他人都在使用”的 UoW。

5.  现在，任何 VM 都可以通过向 UoW 请求数据来加载它需要的任何数据（或从 UoW 缓存中的数据中受益）。虚拟机不必“考虑”它是第一个还是最后一个请求数据，数据是否在缓存中，数据是在开始时全部检索还是根据需要检索。UoW 可以封装这些细节，公开简单的“查询”方法供 VM 使用。

6.  当然，UoW 应该提供适当的“刷新”方法来应对陈旧性......对于每个应用程序中的每种类型都有不同的定义。

7.  我们倾向于为每个任务“沙箱化”UoW，这些任务通常围绕根实体进行。因此，Parent-1 的主 VM 有自己的 UoW 和自己的 EntityManager，而 Parent-2 的主 VM 有自己的 UoW 和自己的 EntityManager。通过这种方式，用户可以同时在 Parent-1 和 Parent-2 上工作（例如，在更新订单 #456 的同时创建订单 #123）并且独立地工作，而不会混合更改。

8.  “工作单元管理器”创建带有嵌入式实体管理器 (EM) 的 UoW。它使用名为“EntityManagerProvider”的辅助服务创建新的 EM。“EntityManagerProvider”负责铸造新的 EM 并用“全局数据”填充它们，例如参考列表（例如，状态、状态代码、颜色等）。

9.  “EntityManagerProvider”（EMP）在内部保留一个只读的“主 EM”，其中包含源 MetadataStore 和这些静态引用列表的规范版本。它创建的新 EM 通常是这个隐藏的主 EM 的副本。因此，整个系统只对元数据发出一个请求，对那些静态引用列表发出一个请求。EMP 负责将源材料分发给它创建的新 EM。

你需要多少这个？我不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:03:35.883

我的好友 Steve Schmidt 提供了另一种必须考虑的攻击途径：**一个 ViewModel / Multiple Views**。

在这种方法中，您可以组合不同的视图，每个视图都专用于根实体及其子对象图的特定视角。这些与您原始提案的意见大致相同（如果不相同）。

有什么不同？只有一个视图模型！使用 Durandal 的“ko compose”自定义 Knockout 绑定可以轻松地将多个视图附加到同一个 ViewModel。您可以在布局级别获得很好的分离，而无需建立并行 VM。

当提供模型的非可视化表示逻辑很简单但您想从不同的角度（AKA，“围绕数据旋转”）查看该模型时，这种方法很有效。

Master/Detail 可以是一个简单的例子。想象一个参考列表编辑器，列表项位于顶部的“网格”中，右侧有一个简单的表单，显示所选项目的详细信息。这里没有太多逻辑。为什么要为两个虚拟机而烦恼，并且必须将“列表虚拟机”中的项目列表与“编辑器虚拟机”中的选定项目协调？作为单个虚拟机要简单得多。

这在简单的情况下工作得非常好，在典型的应用程序中有很多简单的情况。

将此视为对我的其他答案中描述的重型多 VM 技术的补充。

# android - Android v8 - 适用于 ARM，在 x86 上崩溃

> ID：15748673
> 
> 赞同：2
> 
> 时间：2013-04-01T17:53:40.090
> 
> 标签：android, android-ndk, x86, v8, android-x86

我有一个使用嵌入式 v8 的现有 Android 应用程序。我们以前只为 ARM 构建，并且能够在不崩溃的情况下运行。现在我们要添加 x86 支持。我构建了针对 x86 的 v8 发布版本（并重建了针对 x86 的 NDK 代码），我的应用程序因 v8 内部的错误而崩溃，因此我重建了 v8 的调试版本并使用 ndk-stack 获取详细的错误信息：

```
03-29 19:31:59.257: E/v8(7626): #
03-29 19:31:59.257: E/v8(7626): # Fatal error in src/api.h, line 453
03-29 19:31:59.257: E/v8(7626): # 
03-29 19:31:59.257: E/v8(7626): CHECK(entered_contexts_.length() == 0) failed
03-29 19:31:59.257: E/v8(7626): # 
```

在我正在构建的 v8 版本中，这是第 453 行：

```
ASSERT(entered_contexts_.length() == 0); 
```

这是它作为上下文一部分的函数：

```
 void Free() {
    ASSERT(blocks_.length() == 0);
    ASSERT(entered_contexts_.length() == 0);
    ASSERT(saved_contexts_.length() == 0);
    blocks_.Free();
    entered_contexts_.Free();
    saved_contexts_.Free();
    if (spare_ != NULL) {
      DeleteArray(spare_);
      spare_ = NULL;
    }
    ASSERT(call_depth_ == 0);
  } 
```

当然有可能我以某种方式错误地为 x86 构建了 v8，但是我验证了 v8 在崩溃之前成功地初始化和解释了脚本（在 x86 上），所以我猜测我们使用 v8 的代码存在问题——也许是ARM 版本比 x86 版本更宽容？

有关如何隔离此问题的任何想法？有什么想法可能导致我进入 Free() 中的断言失败？我认为我没有在任何地方明确调用 Free()，所以我猜这可能是一个处于无效状态的垃圾收集对象？

提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T06:38:13.593

检查这些链接，

[http://software.intel.com/en-us/articles/creating-and-porting-ndk-based-android-apps-for-ia/](http://software.intel.com/en-us/articles/creating-and-porting-ndk-based-android-apps-for-ia/)

示例应用程序移植指南： http: [//software.intel.com/en-us/articles/using-the-android-x86-ndk-with-eclipse-and-porting-an-ndk-sample-app](http://software.intel.com/en-us/articles/using-the-android-x86-ndk-with-eclipse-and-porting-an-ndk-sample-app)

也在那里发布您的查询。

问候， 普里亚

# android - 将实时视频从 android 流式传输到 wowza

> ID：15748675
> 
> 赞同：7
> 
> 时间：2013-04-01T17:53:43.473
> 
> 标签：android, streaming, live, wowza

我正在尝试制作一个使用 eclipse 和 android sdk 将实时视频从手机摄像头发送到 wowza 媒体服务器的 android 应用程序。我尝试在 code.google 上使用 spydroid ip 摄像头（这是链接[https://code. google.com/p/spydroid-ipcamera/](https://code.google.com/p/spydroid-ipcamera/)），但我不知道在这个应用程序中要进行哪些更改才能使其流式传输到我的本地主机 wowza 服务器。spydroid 附带的教程不清楚（这是指向教程：[https](https://code.google.com/p/spydroid-ipcamera/issues/detail?id=2) ://code.google.com/p/spydroid-ipcamera/issues/detail?id= 2）。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-24T19:32:37.930

对于仍在寻找答案的所有人-尝试查看[fyhertz lib](https://github.com/fyhertz/libstreaming/wiki/Using-libstreaming-with-Wowza-Media-Server)。我认为它易于应用且足够稳定

# filepicker.io - filepicker.io 批量转换图像

> ID：15748676
> 
> 赞同：0
> 
> 时间：2013-04-01T17:53:46.113
> 
> 标签：filepicker.io

有没有办法批量转换图像？我们正在尝试替换 imagemagick 并减轻服务器的负载——我有一个工作版本，它只是循环遍历大小并在原始图像上调用 convert，制作 23 个不同样式（大小和裁剪）的副本。但是，如果用户在所有转换完成之前离开页面，脚本就会停止，我最终会丢失一堆图像样式。

Filepicker.io 有没有解决这个问题的好方法？我真的很希望能够将选项列表传递给 convert 方法并在后台完成。

在此先感谢，
-杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:51:47.363

最好的方法是使用 /convert 端点进行即时转换（[https://developers.filepicker.io/docs/web/#fpurl-images](https://developers.filepicker.io/docs/web/#fpurl-images)）或对我们的休息端点进行 POST创建转换后的图像并通过服务器端调用将它们存储在 S3 中

# javascript - RectangularRangeIndicator 格式，如使用 dojo 的三角形

> ID：15748680
> 
> 赞同：2
> 
> 时间：2013-04-01T17:53:57.620
> 
> 标签：javascript, jquery, css, dojo

我正在尝试向我的垂直仪表添加一个指标，但指标的格式就像一个三角形，但我希望它是一条大线。

这是[JSFIDDLE](http://jsfiddle.net/BFPuL/8/)示例。

编码 ：

```
 require(['dojo/parser', 'dojox/dgauges/components/default/VerticalLinearGauge','dojox/dgauges/RectangularRangeIndicator', 'dojo/domReady!'], function (parser, VerticalLinearGauge) {
    parser.parse();
    var ri = new dojox.dgauges.RectangularRangeIndicator();
    ri.set("start",0 );
    ri.set("value", 30);
    ri.set("startThickness",100);
    ri.set("endThickness",100);
    gauge.getElement("scale").addIndicator("ri", ri, false);    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:38:18.553

我认为属性是`startThickness`和`endThickness`（最后没有“中风”）。但是，当将这些属性设置为预期的相等值时，我仍然没有得到一条实线。`startThickness`处理属性的方式似乎发生了一些奇怪的事情（可能是错误） 。

这个问题让我很感兴趣，所以我稍后会尝试留出一些时间来深入研究源代码以查看真正的问题是什么，但现在我可以为您提供一个肮脏的解决方法。使用`dojox/gfx`模块绘制 RectangularRangeIndicator，绘制的指标轮廓由`stroke`属性控制。因此，如果您愿意，您可以执行以下操作：

```
var ri = new dojox.dgauges.RectangularRangeIndicator();
ri.set("start",0 );
ri.set("value", 30);
ri.set("startThickness", 0);
ri.set("endThickness", 0);
ri.set("stroke", {color: "red", width: 2.5});
ri.set("paddingLeft", 7); // Default is 10, set this to whatever works for you. 
```

这看起来会画出一条直线（这实际上是一个非常薄的形状的边界）。[看看它在一个真实例子中的样子](http://jsfiddle.net/BFPuL/4/)。同样，我知道这不是最好的解决方案，因为它更像是一个肮脏的技巧，但它是一种解决呈现范围指示器的代码中似乎存在错误的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:00:58.213

这是一个错误，它将在下一个版本（1.8.x 和 1.9）中修复。

见[https://github.com/dmandrioli/dgauges/issues/15](https://github.com/dmandrioli/dgauges/issues/15)

作为一种解决方法，您可以像这样重新定义 bad 方法：

```
myRangeIndicator._defaultVerticalShapeFunc = 
   function(indicator, group, scale, startX, 
            startY, endPosition, startThickness, endThickness, 
            fill, stroke){ ... } 
```

在[http://jsfiddle.net/BFPuL/5/上查看此解决方法](http://jsfiddle.net/BFPuL/5/)

# jquery - jQuery Ajax 成功函数在特定服务器上返回 null

> ID：15748688
> 
> 赞同：0
> 
> 时间：2013-04-01T17:54:18.417
> 
> 标签：jquery, ajax

这真让我抓狂！我的代码在我的计算机上运行，​​在在线服务器上运行，但在另一台服务器上返回 null！

任何想法？？

这是 jQuery Ajax 代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#signup').submit(function() {
        $.ajax({
            url: 'mailchimp.php',
            data: 'ajax=true&email=' + escape($('#email').val()) + '&phone=' + escape($('#phone').val()) + '&uname=' + encodeURIComponent($('#uname').val()) ,
            success: function(msg) {
                $('#form').html(msg);
            }
        });

        return false;
    });
});
</script> 
```

我通过直接输入 url 测试了 mailchimp.php；它工作正常，并与预期的结果相呼应。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:17:26.283

我仍然不知道确切的问题是什么，但由于 encodeURIComponent 函数生成的百分比符号的存在，似乎没有执行 ajax 帖子。

这是我在 ajax 函数中所做的。我用连字符替换了所有 % 符号。

```
uname = uname.replace(/\%/g, '-'); 
```

在我的 PHP 代码中，我把所有的 % 符号都放回去了，而不是连字符。

```
urldecode(str_replace('-', '%', $_GET['uname'])) 
```

也许这不是最好的解决方案，但它终于奏效了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:58:18.517

尝试给出 url 的绝对路径并尝试。我可能错了，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:00:42.730

你是跨域发帖吗？那么你应该使用 JSONP [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)。

# java - Java PhysX 绑定？

> ID：15748689
> 
> 赞同：1
> 
> 时间：2013-04-01T17:54:18.527
> 
> 标签：java, physics, physx

是否有任何类型的 Java 的 PhysX 绑定？我环顾四周，看到了这个：http: [//jphysx.com/](http://jphysx.com/)，但我得到了一些奇怪的俄语错误。即使是具有 Java 支持的普通旧的强大物理引擎也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:58:39.563

我无法告诉你它的效果如何，但你看过谷歌代码项目[physX4java](http://code.google.com/p/physx4java/)吗？

# delphi - 如何在Delphi中动态制作多个Label、Edits等？

> ID：15748698
> 
> 赞同：-3
> 
> 时间：2013-04-01T17:54:48.190
> 
> 标签：delphi, list, controls, delphi-2009

我希望用户创建自己的控件列表，例如`TEdit`、`TCheckBox`、`TLabel`和其他内容。但是，当我必须预定义每个控件但我不知道要定义多少个对象时，我该如何制作另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:17:19.057

这是创建每个知道其类类型的对象时应该执行的操作：

```
var
  Obj:TControl;
begin
  Obj := TEdit.Create(AOwner);
  with Obj do begin
    //Set properties here...
    ...
    Parent := Self;    //Assuming that you're writing code in your form class. if not, use object variable pointing to your form instead of `self`
  end;
end; 
```

要存储未知数量的对象，您可以使用动态数组或链接列表，甚至可以使用`Controls`表单的属性。

这是你想做的事情的开始（基础）。您有很多选择来实现应用程序的这一部分。例如，您可以`array of TControl`在您的表单类中有一个，并且使用`Length`和`SetLength`函数您可以计算出您的用户添加了多少对象到表单中。

# c# - DownloadString 在似乎在浏览器中工作的 https url 上给出超时

> ID：15748701
> 
> 赞同：4
> 
> 时间：2013-04-01T17:55:00.160
> 
> 标签：c#, json, https, webclient

我正在尝试将此 URL 中的内容获取到我的程序中：[https://data.mtgox.com/api/2/BTCUSD/money/ticker](https://data.mtgox.com/api/2/BTCUSD/money/ticker)。在我的任何浏览器中访问 URL 时，它都能正常工作。

但是在我的程序中，它等待 90 秒，然后给我一个超时。

这是我的代码：

```
 private const string ApiLnk = "https://data.mtgox.com/api/2/BTCUSD/money/ticker";

    static void Main(string[] args)
    {
        using (WebClient client = new WebClient())
        {
            string s = client.DownloadString(ApiLnk);
            int i = 0;
        }
    } 
```

字符串 s 永远不会被分配，因为 client.DownloadString() 是一个停滞的。

当获得像 Google.com 这样的普通 URL 时，它可以完美运行。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T17:59:43.850

只需设置`HttpRequestHeader.Accept`和`HttpRequestHeader.UserAgent`标题。这有效

```
using (WebClient client = new WebClient())
{
    client.Headers[HttpRequestHeader.Accept] = "text/html, image/png, image/jpeg, image/gif, */*;q=0.1";
    client.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12";
    string s = client.DownloadString(ApiLnk);
    int i = 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T17:59:49.063

将用户代理添加到标题中，您应该没问题。

```
client.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T17:58:16.423

使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)来比较线路工作时（浏览器）和不工作时（您的代码）传输的内容...一旦您知道差异，您就可以相应地更改您的代码...

# java - C和Java在变量方面的区别？

> ID：15748706
> 
> 赞同：1
> 
> 时间：2013-04-01T17:55:03.983
> 
> 标签：java, c

我最近问了这个问题：[为什么我指向整数数组的指针不起作用？](https://stackoverflow.com/questions/15748275/why-arent-my-pointers-to-integer-arrays-working)

其中一个建议是使用常规变量而不是指向变量的指针。

我过去用 Java 编程过。如果我理解正确，如果您在 Java 中有此代码：

```
void test(b) {
    b++;
}

void main() {
    int a = 0;
    test(a);
} 
```

然后 a 将保持为 0。但如果我理解正确，在 C 中，如果我有以下代码：

```
void test(b) {
    b++;
}

int main() {
    int a = 0;
    test(a);
    return 0;
} 
```

然后a变成1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:57:37.397

不，在 c 中传递一个值会复制该值，并且原始变量不会更改。

现在，您可以传递该变量的地址值，然后在函数中查看传递的地址指向的位置，并更改该地址处的值，瞧，原始变量已更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:00:54.263

不会。在 C 示例中，`a`仍将保留其原始值。在 C 中，所有参数都按值传递，而在 Java 中，只有原始类型按值传递，所有其他类型均按引用传递。要达到您描述的效果，您的代码应如下所示：

```
void test(int* b) {
    (*b)++;
}

int main() {
   int a = 0;
   test(&a);
   return 0;
} 
```

在这里，`test`接受一个指针`int`，然后取消引用该指针（获取位于指定地址的内存中的值）并将其增加 1。在`main()`您传递的地址为`a`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:03:14.147

等一下。”在 C 中，参数通过值传递给函数，而其他语言可能通过引用传递变量。这意味着接收函数获取值的副本，并且无法直接更改原始变量。对于一个函数改变从另一个函数传递的变量，调用者必须传递它的地址（指向它的指针），然后可以在接收函数中取消引用。有关更多信息，请参阅指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:03:21.213

在这两种语言中，变量的传递都是通过复制值来传递的。只是使用C，您可以将内存位置（指针）作为值传递，并有效地通过引用获得传递。

在 Java 中，您可以通过传入引用来做同样的事情（实际上没有内存地址值）；但是，java 内置类型不能通过引用传递，因为只有对象可以通过引用来引用。注意数组实际上是java中的对象，所以有些规则在处理数组时必须被解释*为对象*，即使它们是Java原语的数组。

# android - 在 Android 中截屏时出错

> ID：15748713
> 
> 赞同：0
> 
> 时间：2013-04-01T17:55:27.377
> 
> 标签：android, screenshot

我正在尝试截取我正在绘制的图表的屏幕截图，但每次尝试我都会得到一个`NullExceptionPointer`.

这是我的代码：

```
lineChart.setChartData(array1,array2,xd);
View v1 = lineChart.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false); 
```

`lineChart`自定义视图在哪里

此 logcat 将此行指示为 null：`bitmap = Bitmap.createBitmap(v1.getDrawingCache());` 这是我的 logcat ：

```
04-01 19:21:11.524: E/AndroidRuntime(333): FATAL EXCEPTION: main

04-01 19:21:11.524: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.appui/com.example.appui.CompareActivity}: java.lang.NullPointerException
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)

04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-01 19:21:11.524: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 19:21:11.524: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
04-01 19:21:11.524: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-01 19:21:11.524: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-01 19:21:11.524: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
04-01 19:21:11.524: E/AndroidRuntime(333): Caused by: java.lang.NullPointerException
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.graphics.Bitmap.createBitmap(Bitmap.java:367)
04-01 19:21:11.524: E/AndroidRuntime(333):  at com.example.appui.CompareActivity.onCreate(CompareActivity.java:37)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 19:21:11.524: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-01 19:21:11.524: E/AndroidRuntime(333):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:48:51.183

The documentation for [View.getDrawingCache(boolean)](http://developer.android.com/reference/android/view/View.html#getDrawingCache%28boolean%29) states:

> Returns the bitmap in which this view drawing is cached. **The returned bitmap is null when caching is disabled.**

Set the drawing cache to true using [setDrawingCacheEnabled(boolean)](http://developer.android.com/reference/android/view/View.html#setDrawingCacheEnabled%28boolean%29). You can also check if the drawing cache is enabled using [isDrawingCacheEnabled()](http://developer.android.com/reference/android/view/View.html#isDrawingCacheEnabled%28%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:12:36.300

我没有使用过getRootView，但[文档](http://developer.android.com/reference/android/view/View.html#getRootView%28%29)说明了它

> 返回包含此视图的最顶层视图

如果它本身就是最顶层的 View，它将返回 null。尝试

```
View v1 = (View)lineChart; 
```

反而。

从[文档](http://developer.android.com/reference/android/view/View.html#buildDrawingCache%28%29)（和从[这里](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)），我想你可以通过添加来强制构建绘图缓存

```
 // this is the important code :)  
// Without it the view will have a dimension of 0,0 and the bitmap will be null          
   v1.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
   v1.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight()); 
   v1.buildDrawingCache(); 
```

在你得到位图之前

```
bitmap = Bitmap.createBitmap(v1.getDrawingCache()); 
```

# file-upload - 在精细上传器对象上调用的 reset() 函数不起作用

> ID：15748716
> 
> 赞同：2
> 
> 时间：2013-04-01T17:55:33.927
> 
> 标签：file-upload, fine-uploader

我想知道将 FineUploaders 上传器重置为其初始状态的正确方法是什么？

```
$('#uploader').fineUploader('reset') 
```

这导致“未捕获的类型错误：无法调用未定义的方法‘重置’”在重置函数的定义中

```
reset: function() {
    this.log("Resetting uploader...");
    this._handler.reset();
    this._filesInProgress = [];
    this._storedIds = [];
    this._autoRetries = [];
    this._retryTimeouts = [];
    this._preventRetries = [];
    this._button.reset();
    this._paramsStore.reset();
    this._endpointStore.reset();
--> this._pasteHandler.reset(); <--
    this._netFilesUploadedOrQueued = 0;
}, 
```

所以似乎没有创建 _pasteHandler 。我是否在我的配置中遗漏了某些东西，或者是上传程序本身中的这个错误（我严重怀疑，因为我无法找到其他有类似问题的人）

由于这是我第一次遇到 Fine Uploader，因此我们将不胜感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:02:20.347

这似乎是 Fine Uploader 3.4（昨天发布）中的一个错误。它将影响任何尝试在未启用粘贴上传功能的情况下重置 Fine Uploader 实例的人。[您能否在Github 项目的问题跟踪器](https://github.com/Widen/fine-uploader/issues?labels=enhancement%2CP3&state=open)中打开一个错误报告以便对其进行跟踪？我今天会尝试解决这个问题。

更新：在 3.4.1 中修复。

# c# - 从 Apache Tomcat 到 IIS7 C# Web 服务并返回到 Apache Tomcat 的 WSDL 问题

> ID：15748728
> 
> 赞同：2
> 
> 时间：2013-04-01T17:56:25.867
> 
> 标签：c#, web-services, apache, iis, wsdl

我在现有环境中隐含供应商框时遇到了一些问题。他们的机器正在运行 Apache Tomcat，而我正在运行 IIS7。当 WSDL 文件从 Apache 传递到 IIS 时，IIS会以 Apache 服务器希望看到的`<s:`而不是返回响应。`<xsd:`下面是发送的 WSDL 文件的开头。返回的数据是正确的，但是他们希望看到的格式以`<xsd:`NOT开头`<s:`

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:ahpns="http://ws.ebc.ahp.ini.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    name="AHPEligibilityBenefitClaimsWS" targetNamespace="http://ws.ebc.ahp.ini.com/">
    <wsdl:types>
        <xsd:schema targetNamespace="http://ws.ebc.ahp.ini.com/">
            <xsd:element name="GetClaimsDataRequest">
                <xsd:complexType>
                    <xsd:sequence> 
```

# c++ - Windows8 的 AttachConsole(...) 替代品

> ID：15748730
> 
> 赞同：0
> 
> 时间：2013-04-01T17:56:30.540
> 
> 标签：c++, windows, winapi, process, console

在 Windows8 上运行控制台（即父进程是 cmd.exe）应用程序时，AttachConsole(ATTACH_PARENT_PROCESS) 返回 TRUE，GetLastError() 返回 ERROR_NOT_SUPPORTED。有没有可以与这个操作系统一起使用的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T12:37:58.897

如果 AttachConsole 返回 true，则 GetLastError 的值是随机的（即，成功调用 AttachConsole 或实际上任何 Win32 API 函数都不会重置最后一个错误代码）。仅检查设置的错误代码。

# javascript - 如何在自定义指令中显示一个空模板

> ID：15748732
> 
> 赞同：0
> 
> 时间：2013-04-01T17:56:38.557
> 
> 标签：javascript, angularjs, ng-repeat

我正在研究一个自定义指令，当范围内没有任何内容可显示时，该指令将显示嵌入的空模板 - 就像在这个*plunker中*[一样](http://plnkr.co/edit/BxnmZKeo1RLuL9KDB1Fz)。

我无法删除 ng-repeat 中的空模板，也无法仅在没有数据时显示空消息。没有可显示的内容时，如何显示空模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:56:51.493

实际上，我不确定在指令中这样做是否正确 - 您最好在主模板中显示不同的 DIV。

但这是我的想法：不是转置，而是根据是否显示任何项目进行手动编译。

这是工作（但仍然有点脏）plunker：[http ://plnkr.co/edit/dxUjpeCbSKKjaXqK9qBF?p=preview](http://plnkr.co/edit/dxUjpeCbSKKjaXqK9qBF?p=preview)

请注意，即使我正在查看整个列表，也仅在状态（空/非空）更改时才进行重新编译。

注意 2：它不是完全嵌入 - 模板内的范围（空且非空）将被隔离到指令的范围内。您可以通过使用不同的编译或子范围来解决这个问题 - 有几个解决方案，但它们与这个问题无关:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:57:41.097

您不需要为此提供指令。只需从中删除指令`app.js`并将按钮后的代码替换为：

```
 <div ng-hide="things.length">nothing to show here</div>
  <div ng-show="things.length">
    <ul>
      <li ng-repeat="thing in things">thing #{{thing}}</li>
    </ul>
  </div> 
```

这是工作代码：[http ://plnkr.co/edit/u4FF77y6dhXHj0FQC9Ai?p=preview](http://plnkr.co/edit/u4FF77y6dhXHj0FQC9Ai?p=preview)

# angularjs - Angular JS 命名约定（$、camelCase 和 PascalCase）

> ID：15748734
> 
> 赞同：24
> 
> 时间：2013-04-01T17:56:53.530
> 
> 标签：angularjs

AngularJS 中使用 $ 前缀提供程序的约定是什么？我应该在自己的代码中为所有自定义服务添加前缀吗？

看起来 Angular 附带的所有东西都有前缀服务，例如`$http`. 然而，控制器`$`在大多数文章中都没有前缀。此外，所有 Angular 代码都带有名为 in 的服务`camelCase`，但是我`PascalCase`在许多在线博客中也看到过。哪一个是公约？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-09-14T07:09:16.387

1.  用于`PascalCase`控制器和返回应该是新的构造函数的函数，例如`var user = new User()`. Angular 中的控制器被视为作用域构造函数——因此是 PascalCase。

2.  控制器应该`Controller`附加在他们的名字中。有关命名示例，请参见[http://demisx.github.io/angularjs/2014/09/14/angular-what-goes-where.html](http://demisx.github.io/angularjs/2014/09/14/angular-what-goes-where.html)。

3.  用于`camelCase`其他一切。

这些遵循世界各地的开发人员习惯的重要 Javascript 约定。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-01T17:59:05.577

文档为内部服务声明了此约定，但也声明您不应该为自己的服务这样做以减少命名冲突。

[http://docs.angularjs.org/guide/concepts#angular_namespace](http://docs.angularjs.org/guide/concepts#angular_namespace)

此外，关于camelCase，文档说要使用camelCase。

> Angular 使用 name-with-dashes 作为属性名，使用 camelCase 作为相应的指令名

[http://docs.angularjs.org/tutorial/step_00](http://docs.angularjs.org/tutorial/step_00)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-20T17:48:55.857

```
We can filter Text in CamelCase using following code 
 app.filter('camelCase', function(){
            var camelCaseFilter = function(input){
                    var words = input.split(' ');
                     for (var i = 0, len = words.length; i < len; i++)
                         words[i] = words[i].charAt( 0 ).toUpperCase() + words[i].slice(1);
                     return words.join(' ');
                 };
                 return camelCaseFilter;
        }); 
```

# javascript - Grunt 任务样式指南 styledocco

> ID：15748739
> 
> 赞同：0
> 
> 时间：2013-04-01T17:57:14.397
> 
> 标签：javascript, gruntjs

有没有办法在[https://github.com/indieisaconcept/grunt-styleguide](https://github.com/indieisaconcept/grunt-styleguide) [http://jacobrask.github.com/styledocco/](http://jacobrask.github.com/styledocco/)生成的输出中包含一个 .js 文件？

我有一个繁重的任务，将我的 CSS 编译成一个 HTML 文件，但我也想包含一个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:55:29.373

您可以将其添加到[默认模板](https://github.com/indieisaconcept/grunt-styleguide/blob/master/templates/kss/index.html)或您自己的模板中。

# websphere - 在 EJB 的战争部门中引用类时的 ClassNotFound

> ID：15748742
> 
> 赞同：0
> 
> 时间：2013-04-01T17:57:18.020
> 
> 标签：websphere, ejb-3.0

我有一堂战争课...

```
SomeClass.java 
```

这个阶级被嵌入了一场嵌入耳朵的战争中。此外，嵌入在耳朵中的是一个 EJB 类，它引用了战争中的一个类（不是我的设计）。这个类显然存在，我可以在部署的 WS 应用程序中看到它。耳朵文件如下所示...

```
ear file
  META-INF
  war file <Where the .class is found>
  ejb jar file 
```

但是我仍然在 SomeClass 上得到一个 ClassNotFound 异常，谁能想到我错过了什么？这是相当旧的版本，所以即使 jar 处于爆炸战争中，我是否必须在 ejb jar 的 META-INF 中设置类路径？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:10:18.767

由于您使用的是 WebSphere，因此您可能希望尝试将 WAR 类加载器策略设置为“Application”，如以下文档中所述：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/crun_classload.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/crun_classload.html)

这将为整个应用程序创建一个类加载器，即 EJB 和 WAR 中的类将由同一个类加载器加载。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:09:10.993

天哪，这真的很乱。很高兴这不是你的设计。如您所知，EJB 类永远不应该依赖于 war 文件中的库或类。也就是说，如果您需要您的类“SomeClass.java”对 war 和 ejb.jar 包都可用，那么您应该构建一个包含该类的第三个 standard.jar 文件并将其放在 ear/lib 文件夹下你的包裹。这应该使该类可用于两个包，即 .war 和 .jar(ejb) 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T20:32:26.813

在 EAR 文件结构下创建一个 lib 文件夹，并复制您想要在其中用于 WAR 和 EJB 的所有 jar 文件。这应该可以解决问题。

# ruby-on-rails - Rails - 使用自定义 URL 指定根路径：'/dashboard'

> ID：15748749
> 
> 赞同：5
> 
> 时间：2013-04-01T17:57:35.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

如何使此根路径转到：'/dashboard' 而不仅仅是[http://example.com](http://example.com)？

```
root :to => 'dashboard#index', :constraints => lambda{|req| !req.session[:user_id].blank?} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T18:00:20.150

您可以通过以下方式实现：

```
root :to => redirect('/dashboard')
match '/dashboard', :to => "dashboard#index",
  :constraints => lambda {|req| !req.session[:user_id].blank? } 
```

# java - 使用 Apache POI 创建和更改 Excel 表

> ID：15748753
> 
> 赞同：5
> 
> 时间：2013-04-01T17:57:50.983
> 
> 标签：java, excel, apache-poi

是否可以使用 apache POI 创建和更改 Excel 表？

有代表 Excel 表的类（[http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFTable.html](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFTable.html)），并且有两种方法 createTable 和 getTables（[http://poi. API 中的apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFSheet.html#createTable()](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFSheet.html#createTable()) )，但 API 没有说明如何操作 XSSFTable 对象以选择表格的单元格范围

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T20:26:17.903

JExcelAPi 实际上可能更好，更易于管理。我都用过。但是，说 Andy Khan 的 JExcelAPI 是基于 POI 构建的是不正确的。它本身就是一个成熟的 Java 实现，您可以在其中获取源代码并对其进行更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-20T20:10:37.497

有一个库，它建立在 POI 之上 - [JExcelApi](http://jexcelapi.sourceforge.net/) 我认为你可以做以下两个之一：

1.  看，它是如何在 JExcelApi 中实现的，并以同样的方式实现

2.  只需使用 JExcelApi

# iphone - 枚举类型警告的隐式转换

> ID：15748763
> 
> 赞同：3
> 
> 时间：2013-04-01T17:58:26.387
> 
> 标签：iphone, xcode, implicit-conversion, uicontrolevents

Xcode 现在在之前正常的代码行上抛出了一个警告标志。

```
[_slider2 setThumbImage:thumbImage2Pressed forState:UIControlEventTouchDown]; 
```

发出警告：

“从枚举类型'enum UIControlEvents'到不同枚举类型'UIControlStat'（又名'enum UIControlState'）的隐式转换

该怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T18:53:15.457

`UISlider`方法：

```
- (void)setThumbImage:(UIImage *)image forState:(UIControlState)state; 
```

接受`forState`一个`UIConstrolState`，而不是一个`UIControlEvents`。

也许你可以试试这个：

```
[_slider2 setThumbImage:thumbImage2Pressed forState: UIControlStateNormal]; 
```

或另一个`UIControlState`。

# xamarin.ios - MonoTouch - 更改 DetailTextLabel 文本颜色导致 NullReferenceException 错误

> ID：15748764
> 
> 赞同：0
> 
> 时间：2013-04-01T17:58:28.487
> 
> 标签：xamarin.ios, nullreferenceexception, monotouch.dialog, detailtextlabel

我正在尝试使用 monotouch.dialog 为我的表格完成一个自定义单元格，并且除了我的单元格的详细文本标签颜色之外，几乎所有内容都已整理好。

我正在重写 GetCell 来自定义我的 EntryElement 单元格，如下所示：

```
public class CustomStyledEntryElementPlain : MonoTouch.Dialog.EntryElement
{
    public CustomStyledEntryElementPlain (string _caption, string _value) : base(string.Empty,string.Empty,string.Empty,false)
    {
        KeyboardType = UIKeyboardType.Default;
        Value = _value;
        ReturnKeyType = UIReturnKeyType.Done;
        Caption = _caption;
    }

    public override UITableViewCell GetCell(UITableView tableView) {
        var cell = base.GetCell(tableView);
        cell.BackgroundColor = Resources.XDarkGrayColor;
        cell.TextLabel.TextColor = Resources.XWhiteColor;
        cell.BackgroundView = new UIView (RectangleF.Empty);
        cell.DetailTextLabel.TextColor = UIColor.White; //this line causes the error

        return cell;
    }
} 
```

然后我像这样创建元素：

```
new CustomSection ("Testing"){
                new CustomStyledEntryElementPlain("Test","Test1"),
                new CustomStyledEntryElementPlain("Test","Test2")
            }, 
```

但是，在显示表格时，我收到错误：“System.NullReferenceException 已被抛出对象引用未设置为对象的实例”

当我最初制作这个原型时，我可以发誓我让 DetailTextLabel 文本颜色正常工作！注释掉课程的更改会导致我的表格和单元格显示得很好，尽管带有黑色文本（我想将其更改为白色！）

有没有人知道我为什么会得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:06:16.290

中的`DetailTextLabel`属性`UITableViewCell`仅在 Cell 具有`UITableViewCellStyle`支持它的情况下才可用。从[属性](http://docs.go-mono.com/?link=P%3aMonoTouch.UIKit.UITableViewCell.DetailTextLabel)`UITableViewCell`的文档：[`DetailTextLabel`](http://docs.go-mono.com/?link=P%3aMonoTouch.UIKit.UITableViewCell.DetailTextLabel)

> 如果单元格是使用支持详细标签的 MonoTouch.UIKit.UITableViewCellStyle 创建的，则 UITableViewCell 会自动创建辅助（详细）标签。
> 
> 如果单元格的样式不支持详细标签，则此属性返回 null。

查看文档[`UITableViewCellStyle`](http://docs.go-mono.com/?link=T%3aMonoTouch.UIKit.UITableViewCellStyle)以了解哪些样式支持此属性。

# python - 没有VTK的python中3D数据的插值/二次采样

> ID：15748767
> 
> 赞同：3
> 
> 时间：2013-04-01T17:58:40.330
> 
> 标签：python, 3d, interpolation, sampling

我想做的很简单，但到目前为止我还没有找到一个简单的方法：

我有一个带有浮点值的 3D 直线网格（因此 3 个坐标轴 -1D numpy 数组 - 用于网格单元的中心和一个具有相应形状的 3D numpy 数组，每个单元中心都有一个值），我想插值（或您可以将其称为子采样）将整个数组转换为具有线性插值的子采样数组（例如，大小因子为 5）。到目前为止，我看到的所有方法都涉及 2D 和 1D 插值或 Id 宁愿不使用的 VTK 技巧（可移植性）。

有人可以提出一种方法，相当于在 3D 阵列中同时采用 5x5x5 单元格，平均并返回一个在每个方向上小 5 倍的阵列吗？

提前感谢您的任何建议

**编辑：** 这是数据的样子，“d”是一个 3D 数组，表示 3D 单元格网格。每个单元格都有一个标量浮点值（在我的情况下为压力），“x”、“y”和“z”是三个 1D 数组，其中包含每个单元格的单元格的空间坐标（请参阅形状以及“x”数组的方式好像）

```
In [42]: x.shape
Out[42]: (181L,)

In [43]: y.shape
Out[43]: (181L,)

In [44]: z.shape
Out[44]: (421L,)

In [45]: d.shape
Out[45]: (181L, 181L, 421L)

In [46]: x
Out[46]: 
array([-0.410607  , -0.3927568 , -0.37780656, -0.36527296, -0.35475321,
       -0.34591168, -0.33846866, -0.33219107, -0.32688467, -0.3223876 ,
        ...
        0.34591168,  0.35475321,  0.36527296,  0.37780656,  0.3927568 ,
        0.410607  ]) 
```

我想要做的是创建一个 3D 数组，可以说形状为 90x90x210（大约缩小 2 倍），首先对具有上述尺寸的数组上的轴坐标进行二次采样，然后将 3D 数据“插值”到那个大批。我不确定“插值”是否是正确的术语。下采样？平均？这是数据的二维切片：![密度图](https://i.stack.imgur.com/lbQ9e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:26:21.150

这是使用[scipy.interpolate.griddata](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html)在不规则网格上进行 3D 插值的示例。

```
import numpy as np
import scipy.interpolate as interpolate
import matplotlib.pyplot as plt

def func(x, y, z):
    return x ** 2 + y ** 2 + z ** 2

# Nx, Ny, Nz = 181, 181, 421
Nx, Ny, Nz = 18, 18, 42

subsample = 2
Mx, My, Mz = Nx // subsample, Ny // subsample, Nz // subsample

# Define irregularly spaced arrays
x = np.random.random(Nx)
y = np.random.random(Ny)
z = np.random.random(Nz)

# Compute the matrix D of shape (Nx, Ny, Nz).
# D could be experimental data, but here I'll define it using func
# D[i,j,k] is associated with location (x[i], y[j], z[k])
X_irregular, Y_irregular, Z_irregular = (
    x[:, None, None], y[None, :, None], z[None, None, :])
D = func(X_irregular, Y_irregular, Z_irregular)

# Create a uniformly spaced grid
xi = np.linspace(x.min(), x.max(), Mx)
yi = np.linspace(y.min(), y.max(), My)
zi = np.linspace(y.min(), y.max(), Mz)
X_uniform, Y_uniform, Z_uniform = (
    xi[:, None, None], yi[None, :, None], zi[None, None, :])

# To use griddata, I need 1D-arrays for x, y, z of length 
# len(D.ravel()) = Nx*Ny*Nz.
# To do this, I broadcast up my *_irregular arrays to each be 
# of shape (Nx, Ny, Nz)
# and then use ravel() to make them 1D-arrays
X_irregular, Y_irregular, Z_irregular = np.broadcast_arrays(
    X_irregular, Y_irregular, Z_irregular)
D_interpolated = interpolate.griddata(
    (X_irregular.ravel(), Y_irregular.ravel(), Z_irregular.ravel()),
    D.ravel(),
    (X_uniform, Y_uniform, Z_uniform),
    method='linear')

print(D_interpolated.shape)
# (90, 90, 210)

# Make plots
fig, ax = plt.subplots(2)

# Choose a z value in the uniform z-grid
# Let's take the middle value
zindex = Mz // 2
z_crosssection = zi[zindex]

# Plot a cross-section of the raw irregularly spaced data
X_irr, Y_irr = np.meshgrid(sorted(x), sorted(y))
# find the value in the irregular z-grid closest to z_crosssection
z_near_cross = z[(np.abs(z - z_crosssection)).argmin()]
ax[0].contourf(X_irr, Y_irr, func(X_irr, Y_irr, z_near_cross))
ax[0].scatter(X_irr, Y_irr, c='white', s=20)   
ax[0].set_title('Cross-section of irregular data')
ax[0].set_xlim(x.min(), x.max())
ax[0].set_ylim(y.min(), y.max())

# Plot a cross-section of the Interpolated uniformly spaced data
X_unif, Y_unif = np.meshgrid(xi, yi)
ax[1].contourf(X_unif, Y_unif, D_interpolated[:, :, zindex])
ax[1].scatter(X_unif, Y_unif, c='white', s=20)
ax[1].set_title('Cross-section of downsampled and interpolated data')
ax[1].set_xlim(x.min(), x.max())
ax[1].set_ylim(y.min(), y.max())

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/8WWa9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:19:59.773

简而言之：分别在每个维度上进行插值是正确的方法。

* * *

您可以简单地平均每个 5x5x5 立方体并返回结果。但是，如果您的数据应该是连续的，您应该明白这不是好的二次采样做法，因为它可能会导致混叠。（此外，您不能合理地将其称为“插值”！）

良好的重采样滤波器需要比重采样因子更宽，以避免混叠。由于您正在下采样，您还应该意识到您的重采样滤波器需要根据*目标*分辨率*而不是*原始分辨率进行缩放——为了正确插值，它可能需要是 5x5x5 的 4 或 5 倍立方体。这是很多样本 -`20*20*20`远远超过`5*5*5`......

因此，重采样的实际实现通常单独过滤每个维度的原因是它更有效。通过 3 次通过，您可以对每个输出样本使用更少的乘法/累加操作来评估您的滤波器。

# php - PHP 脚本导致服务器错误

> ID：15748768
> 
> 赞同：-3
> 
> 时间：2013-04-01T17:58:42.143
> 
> 标签：php

下面是一个php脚本，它不干净也不友好或多或少需要指出它为什么会导致我的服务器崩溃的方向，我试图在我的服务器上查看我的错误日志，但它崩溃了，我现在无法访问它......我的php技能不是那么好......任何帮助表示赞赏：

```
 $checker = 0;
  function shuffleArray($myArray) {
  $value_count = array_count_values($myArray);

  $last_value = $myArray[count($myArray) - 1];
  unset($myArray[count($myArray) - 1]);
  $shuffle = array();
  $last = false;

  while (count($myArray) > 0) {
  $keys = array_keys($myArray);
  $i = round(rand(0, count($keys) - 1));
   while ($last === $myArray[$keys[$i]] ) {
    $i = round(rand(0, count($keys) - 1));
    echo "stuck";$checker++;
    if($checker>100){
        echo " Too many checks so die, and restart process ";
        exit;

    }
  }
  $shuffle[] = $myArray[$keys[$i]];
  $last = $myArray[$keys[$i]];
  unset($myArray[$keys[$i]]);
}

if ($last_value === $last) {
$i = 0;
foreach($shuffle as $key=>$value) {
     if ($value !== $last_value) {
        $i = $key;
        break;
    }
  }
  array_slice($shuffle, $i + 1, 0, $last_value);
  } else {
  $shuffle[] = $last_value;
  }

  return $shuffle;
  }

 $shuffleReel = (shuffleArray($virtualReel));
 function bob(){
if($checker>100){
    $checker = 0;
    shuffleArray();
    echo "bob";
    reset($myArray);
}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:04:18.283

在使用双引号（称为插值）访问关联数组变量时，您必须将它们包含在 {} 中。例如：

`$reelFrame['value1'] = "{$ini_array['Symbol1']}";//notice I added {} around the array and encased Symbol1 in single quotes. The latter part is not necessary but recommended.`

你必须对所有十行都这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:19:40.243

答案是循环中没有错误处理，所以发生的事情是我的服务器资源都用完了：为了解决这个问题，我必须从触发脚本的地方将 null 返回到 flash /Action 脚本。

```
 if($checker>100){
        $returnString = http_build_query("Error_1); // for flash to restart script
                     echo $returnString;
        exit;   
       } 
```

# bash - 使用工艺替代的三通中的断管

> ID：15748770
> 
> 赞同：5
> 
> 时间：2013-04-01T17:58:50.003
> 
> 标签：bash, shell

我刚刚发现了进程替换使用`>()`并且对此感到非常兴奋，但是当我尝试它时，它并不总是有效。例如

这有效：

```
cat /usr/share/dict/words |tee >(tail -1) > /dev/null
ZZZ 
```

这给出了一个损坏的管道错误：

```
cat /usr/share/dict/words |tee >(head -1) > /dev/null
1080
tee: /dev/fd/63: Broken pipe 
```

知道为什么吗？谢谢！

更新：这是在 RHEL 4 和 RHEL 6.2 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T20:34:14.280

这里解释了为什么你会得到头部错误而不是尾部错误：

head -1 只需读取其输入的一行。然后它将退出，并且三通继续将其输出输入...

另一方面，tail -1 必须读取完整的输入才能完成其工作，因此它永远不会在 tee 完成之前终止管道。

您可以放心地忽略损坏的管道消息，并且许多程序停止报告此类错误。在我的机器上我看不到它。

# php - Doctrine2 按特定字符串值排序

> ID：15748772
> 
> 赞同：0
> 
> 时间：2013-04-01T17:58:53.280
> 
> 标签：php, symfony, doctrine-orm

例如，我有发布状态的博客文章表（新、审核、存档）。

我如何才能获得状态为“审核”的帖子将位于首位的实体？

我知道我可以用 PHP 和自定义排序解决这个问题，但是我如何用 Doctrine 2 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:23:17.850

您可以实现自定义 DQL 函数。这是一个可能适用于 MySQL`order by field`功能的示例：

```
class CustomOrder extends FunctionNode
{
    public $field = null;
    public $customerOrder = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->field = $parser->StringPrimary() 
        $parser->match(Lexer::T_COMMA);
        $this->secondDateExpression = $parser->StringPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'FIELD(' .
            $this->field->dispatch($sqlWalker) . ', ' .
            $this->customOrder->dispatch($sqlWalker) .
        ')'; 
    }
} 
```

`Order By CustomOrder('status', "'new', 'moderation', 'archive'")`您会在 DQL 查询中这样调用它。

我认为在 PHP 中进行自定义排序对您的用例同样有效，除非您在许多地方重用自定义排序函数。

# c# - 显示多行

> ID：15748773
> 
> 赞同：0
> 
> 时间：2013-04-01T17:58:54.043
> 
> 标签：c#, asp.net, ms-access, asp.net-mvc-2

我有数据（3 个变量）要从 ms 访问数据库（产品表）中获取并将其显示在 aspx 页面上。我设法只显示第一行数据。似乎问题出在 foreach 循环中的 aspx 页面代码中。我就是头晕眼花。

这是 ProductController 类：

```
 public ActionResult Index()
    {
        string str = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\vindom\\Desktop\\DB2.accdb";
        //  connection string from database Properties
        OleDbConnection con = new OleDbConnection(str);
        OleDbCommand cmd;
        OleDbDataReader reader;
        con.Open();
        {
            cmd = new OleDbCommand("SELECT * FROM product", con);
            reader = cmd.ExecuteReader();
            while(reader.Read())
                {
                ViewData["Prod_Type"] =  reader.GetValue(0);
                ViewData["Prod_N"] = reader.GetValue(1);
                ViewData["Prod_d"] = reader.GetValue(2);
                }
            con.Close();

        return View();
    }
    } 
```

这是aspx代码：

```
 <table>
  <tr>
  <th>Product Type</th>
  <th>Product Number</th>
  <th>Product Details</th>
  <th></th>
  </tr>
  <%@foreach (var item  in View)
  {%>
 <tr>
 <td><%= Html.Encode(ViewData["Prod_Type"]) %></td>
 <td><%= Html.Encode(ViewData["Prod_N"]) %></td>
 <td><%= Html.Encode(ViewData["Prod_d"]) %></td>
 </tr>
 <%}%>
 </table> 
```

..和Product.cs

```
namespace Tok.Models
{
    public class Product 
    {
        public string Product_Type { get; set; }
        public string Product_NUM { get; set; }
        public string Product_desc { get; set; }

        public  ICollection<Process> Processes;
    }

    public class Process
    {
        public string ProcessId { get; set; }
        public string Process_desc { get; set; }
        public string Next_processs { get; set; }

        public virtual Product Product { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:18:32.607

试试下面的方法。这将遍历您的记录集，但您的视图中的内容将不起作用。您需要将行存储在某种形式的集合中， ViewData["Prod_XXX"] 用于单个数据实例，而不是多行。

您可以像这样构建一个行列表：

```
List<Prod> prodRows = new List<Prod>();
while (reader.Read())
{
     prodRows.Add(new Prod 
     { 
         Prod_Type = reader.GetValue(0),
         Prod_N = reader.GetValue(1),
         Prod_d = reader.GetValue(2)
      });
 } 
```

其中 Prod 是这样定义的类：

```
 public class Prod
 {
     public string Prod_Type { get; set; }
     public string Prod_N { get; set; }
     public string Prod_d { get; set; }
 } 
```

然后在你的视图中你可以有这样的东西：

```
@model List<Prod>
@foreach(var row in Model)
{
  //Your display HTML
} 
```

这不是一个确切的答案，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:22:33.730

您的问题是，从外观上看，您正在执行以下代码：

```
ViewData["Prod_Type"] =  reader.GetValue(0);
ViewData["Prod_N"] = reader.GetValue(1);
ViewData["Prod_d"] = reader.GetValue(2); 
```

... 三次，但每次覆盖前一组值。

您似乎也没有将模型传递给您的视图。由于您要遍历数据列表，因此您需要定义一个类来表示模型记录（可能`Product`或类似的东西），并将您构建的记录集合传递给您的视图`Product`。

像这样的东西（假设你有一个`Product`类）：

```
List<Product> model = new List<Product>();
while(reader.Read())
{
  Product newEntry = new Product() { 
     Prod_Type = reader.GetValue(0),   // I'm ignoring the need to cast the values 
     Prod_N = reader.GetValue(1),
     Prod_d = reader.GetValue(2)
  };
  model.Add(newEntry);
}
// housekeeping
return View(model); 
```

# java - 如何从 android 将 multipart/form 数据发送到 Web 服务器？

> ID：15748787
> 
> 赞同：7
> 
> 时间：2013-04-01T17:59:39.053
> 
> 标签：java, android, html, forms, http

我无法将表单数据发布到 Web 服务器。每次我尝试发布时，我都会从服务器“未收到消息”收到此响应，因此显然代码有问题。我错过了什么吗？

这是我要发布的 HTML 部分：

```
<form id="post" action="url" method="post" enctype="multipart/form-data">
<fieldset>
<input id="board" name="board" value="hiekkalaatikko" type="hidden">
<input id="thread" name="thread" value="0" type="hidden">

<input name="uuid" id="uuid" value="1e54a561-b08e-4bad-b9b6-e618ccd91ef5" type="hidden">
<input name="email" style="position: absolute; left: -9999px;" type="text">
<table id="postform">
<tbody>
<tr>
<td class="label"><label for="postername">Viestinimi</label></td>
<td><input name="postername" id="postername" onkeyup="checkName('poster');" type="text"> <span id="posternamestatus"></span></td>
</tr>
<tr>
<td class="label"><label for="functions">Toiminnot</label></td>
<td><input name="functions" id="functions" type="text"></td>
</tr>
<tr>
<td class="label"><label for="subject">Aihe</label></td>
<td>
<input name="subject" id="subject" maxlength="60" type="text">
<input value="Lähetä" name="submit" id="submit" type="submit">
<span id="qrinfo"></span>
</td>
</tr>
<tr>
<td class="label"><label for="msg">Viesti</label></td>
<td><textarea name="msg" id="msg" rows="4" cols="48"></textarea></td>
</tr>
<tr>
<td class="label"><label for="file">Tiedosto</label></td>
<td><input name="file" id="file" size="35" type="file"> <label for="spoilerfile">Juonipaljastus</label> <input id="spoilerfile" name="spoilerfile" type="checkbox"></td>
</tr>
<tr>
<td class="label"><label for="embed">Upote</label></td>
<td>
<input name="embed" id="embed" type="text">
<select name="embedtype" id="embedtype">
<option value="9">Naamapalmu</option>
<option value="1" selected="selected">YouTube</option>
<option value="7">LiveLeak</option>
<option value="4">SoundCloud</option>
<option value="8">Vimeo</option>
<option value="5">Vocaroo</option>
</select> <a href="http://ylilauta.org/scripts/help.php?embeds" onclick="window.open(this.href,'embedhelp','width=640,height=480,scrollbars=yes'); return false;">Upotusohje</a>
</td>
</tr>
<tr>
<td colspan="2">
<ul id="postinfo">
<li>Sallitut tiedostotyypit ovat gif, jpeg, jpg, mp3, png, rar, swf, zip</li>
<li>Suurin sallittu tiedostokoko on 10 Mt.</li>
<li>2642 käyttäjää paikalla. (<a href="http://ylilauta.org/online.php">Graafi</a>)</li>
<li>Yhteensä 10161 viestiä on lähetetty tälle alueelle. (<a href="http://ylilauta.org/postcount.php">Graafi</a>)</li>
<li><a href="http://ylilauta.org/hiekkalaatikko/threadlist">Aiheluettelo</a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</fieldset>
</form> 
```

这是android端代码：

```
@Override
public void onClick(View v) {
    switch(v.getId()){
    case R.id.send:
        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        try{
            reqEntity.addPart("content-type", new StringBody("text/html; charset=UTF-8"));
            reqEntity.addPart("board", new StringBody("hiekkalaatikko",Charset.forName("UTF-8")));
            reqEntity.addPart("thread", new StringBody("0", Charset.forName("UTF-8")));
            reqEntity.addPart("anticaptcha", new StringBody(anticaptcha, Charset.forName("UTF-8")));
            reqEntity.addPart("uuid", new StringBody(UUID, Charset.forName("UTF-8")));
            reqEntity.addPart("email", new StringBody("", Charset.forName("UTF-8")));
            reqEntity.addPart("postername", new StringBody(mNameField.getText().toString(), Charset.forName("UTF-8")));
            reqEntity.addPart("functions", new StringBody(mActionField.getText().toString(), Charset.forName("UTF-8")));
            reqEntity.addPart("subject", new StringBody(mSubjectField.getText().toString(),Charset.forName("UTF-8")));
            reqEntity.addPart("submit", new StringBody("Lähetä", Charset.forName("UTF-8")));
            reqEntity.addPart("subboard", new StringBody("0", Charset.forName("UTF-8")));
            reqEntity.addPart("msg", new StringBody(mMessageField.getText().toString(), Charset.forName("UTF-8")));
            reqEntity.addPart("spoilerfile", new StringBody("checked", Charset.forName("UTF-8")));
            reqEntity.addPart("embed", new StringBody("9", Charset.forName("UTF-8")));
        }
        catch(Exception e){}
        postReply reply = new postReply();
        reply.execute(reqEntity);
        break;
    }
}

public class postReply extends AsyncTask<MultipartEntity, Void, HttpResponse>{

    @Override
    protected HttpResponse doInBackground(MultipartEntity... arg0) {
        array = arg0[0];
        HttpResponse response = null;
        try {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("url");
            httppost.setEntity(arg0[0]);
            response = httpclient.execute(httppost);
            BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            String sResponse;
            StringBuilder s = new StringBuilder();
            while ((sResponse = reader.readLine()) != null) {
                s = s.append(sResponse);
            }
            System.out.println(s);

        } catch (IOException e) {
            Log.i("Post", "Exception");
            e.printStackTrace();
        }
        return response;
    } 
```

编辑：我尝试将此数据从浏览器和此应用程序发送到测试服务器。我没有看到任何数据丢失，但我仍然从目标服务器收到相同的响应“未收到消息”。

这是从浏览器发送的：

```
 Time: Wed, 10 Apr 13 11:33:30 -0700
Source ip: ***********

Headers (Some may be inserted by server)
UNIQUE_ID = UWWwetBx6hIAAA7wUFQAAAAK
HTTP_HOST = posttestserver.com
HTTP_USER_AGENT = Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
HTTP_ACCEPT = text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
HTTP_ACCEPT_LANGUAGE = fi-fi,fi;q=0.8,en-us;q=0.5,en;q=0.3
HTTP_ACCEPT_ENCODING = gzip, deflate
HTTP_CONNECTION = close
CONTENT_TYPE = multipart/form-data; boundary=---------------------------1974624714324
CONTENT_LENGTH = 1326
REMOTE_ADDR = **************
REMOTE_PORT = 11440
GATEWAY_INTERFACE = CGI/1.1
REQUEST_METHOD = POST
QUERY_STRING = dir=example
REQUEST_URI = /post.php?dir=example
REQUEST_TIME = 1365618810

Post Params:
key: 'board' value: 'hiekkalaatikko'
key: 'thread' value: '0'
key: 'uuid' value: '1e54a561-b08e-4bad-b9b6-e618ccd91ef5'
key: 'email' value: ''
key: 'postername' value: 'name '
key: 'functions' value: 'functions'
key: 'subject' value: ''
key: 'submit' value: 'Lähetä'
key: 'msg' value: 'Test message'
key: 'embed' value: ''
key: 'embedtype' value: '1'
Empty post body.

== Multipart File upload. ==
Received 1 file(s)
 0: posted name=file
    name: 
    type: 
    error: 4
    size: 0
File specified was not uploaded. Possible file upload attack. 
```

这是来自我的应用程序：

```
 Time: Wed, 10 Apr 13 11:35:01 -0700
Source *************

Headers (Some may be inserted by server)
UNIQUE_ID = UWWw1dBx6hIAAA7bTL8AAAAD
HTTP_HTTP_ACCEPT = text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
HTTP_HTTP_ACCEPT_LANGUAGE = fi-fi,fi;q=0.8,en-us;q=0.5,en;q=0.3
CONTENT_LENGTH = 2189
CONTENT_TYPE = multipart/form-data; boundary=---------------------------321842129511553
HTTP_HOST = posttestserver.com
HTTP_CONNECTION = close
HTTP_USER_AGENT = Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
REMOTE_ADDR = ***************
REMOTE_PORT = 11448
GATEWAY_INTERFACE = CGI/1.1
REQUEST_METHOD = POST
QUERY_STRING = dir=example
REQUEST_URI = /post.php?dir=example
REQUEST_TIME = 1365618901

Post Params:
key: 'board' value: 'hiekkalaatikko'
key: 'thread' value: '0'
key: 'uuid' value: '0c44a067-802d-480d-b636-335d6d837c13'
key: 'email' value: ''
key: 'subject' value: ''
key: 'embed' value: ''
key: 'embedtype' value: '9'
key: 'msg' value: 'Test message'
key: 'submit' value: 'Luo aihe'
key: 'postername' value: 'Name'
key: 'functions' value: 'Functions'
key: 'noko' value: 'off'
Empty post body.

== Multipart File upload. ==
Received 0 file(s) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:39:56.330

您发送的是一连串实体，而不是`UrlEncoded`服务器期望的实体。尝试遵循以下模式：

```
 List<NameValuePair> values = new ArrayList<NameValuePair>();  
    values.add( new BasicNameValuePair( "board", "hiekkalaatikko" ) );
    values.add( new BasicNameValuePair( "thread", "0" ) );
    ...
    httppost.setEntity( new UrlEncodedFormEntity( values ) ); 
```

除非您将文件发送到服务器，否则您实际上并不需要多部分实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:14:32.130

您必须尝试通过更改 MultipartEntry 来编码您的值。它还可以帮助您`Charset.forName("UTF-8")`到处重复

```
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, null, Charset.forName(HTTP.UTF_8)); 
```

不要忘记也添加这个

```
 httpclient.getParams()
                .setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1); 
```

在执行之前添加此行以查看您发送到服务器的请求行

```
System.out.println("executing request " + httppost.getRequestLine()); 
```

这也是为了查看来自服务器的响应行

```
response.getStatusLine().toString() 
```

在 httpresponse 之后添加此行以关闭连接

```
httpclient.getConnectionManager().shutdown(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:27:32.077

**使用这个方法::**

```
 public static String uploadFile2Server(String uploadUrl, String filePath,
        String serverKeyName) {
    HttpURLConnection urlConnection = null;
    DataOutputStream dos = null;
    DataInputStream inputStream = null;
    String lineEnd = "rn";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024;
    StringBuilder stringBuilder = null;
    try {
        // ------------------ CLIENT REQUEST
        FileInputStream fileInputStream = new FileInputStream(new File(
                filePath));
        // open a URL connection to the Server
        URL url = new URL(uploadUrl);
        // Open a HTTP connection to the URL
        urlConnection = (HttpURLConnection) url.openConnection();
        // Allow Inputs
        urlConnection.setDoInput(true);
        // Allow Outputs
        urlConnection.setDoOutput(true);
        // Don't use a cached copy.
        urlConnection.setUseCaches(false);
        // Use a post method.
        urlConnection.setRequestMethod("POST");
        urlConnection.setRequestProperty("Connection", "Keep-Alive");
        urlConnection.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);
        dos = new DataOutputStream(urlConnection.getOutputStream());
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\""
                + serverKeyName + "\";filename=\"" + filePath + " \""
                + lineEnd);
        dos.writeBytes(lineEnd);
        // create a buffer of maximum size
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        // read file and write it into form...
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        while (bytesRead > 0) {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }
        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
        // close streams
        fileInputStream.close();
        dos.flush();
        dos.close();
    } catch (Exception exception) {
        exception.printStackTrace();
    }
    // ------------------ read the SERVER RESPONSE
    try {
        inputStream = new DataInputStream(urlConnection.getInputStream());
        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(inputStream));
        stringBuilder = new StringBuilder();

        String line;
        while ((line = bufferedReader.readLine()) != null) {
            stringBuilder.append(line);
        }
        bufferedReader.close();
        inputStream.close();
    } catch (Exception exception) {
        exception.printStackTrace();
    }
    return stringBuilder.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T22:09:52.430

不要忘记在 MultipartEntity 对象的构造函数中设置边界，以防您定义一个服务器端。

```
// MultipartEntity(HttpMultipartMode mode, String boundary, Charset charset) 
MultipartEntity entity = new MultipartEntity(null, "your boundary", null); 
```

*关于边界的额外信息：[http ://en.wikipedia.org/wiki/MIME#Multipart_messages](http://en.wikipedia.org/wiki/MIME#Multipart_messages)

# asp.net-mvc-3 - 控制器没有获取视图数据

> ID：15748796
> 
> 赞同：0
> 
> 时间：2013-04-01T18:00:20.097
> 
> 标签：asp.net-mvc-3

```
function export(){
$.ajax({ url: "@Url.Content("~/controllr/method")",
            type: 'GET',
            data: { selectedValue : $("#BranchId option:selected").text() },               
            traditional: true,
            async:false,
            success: function (result ) {
        },
        failure: function () {
            failed=true;
            alert("Error occured while processing your request");
        },
        error: function (xhr, status, err) {                
            failed=true;
            alert("Error occured while processing your request");
        }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:54:58.103

您是否尝试在控制器操作上设置断点并查看它是否被击中？请尝试以下基本代码，看看通话是否打通

```
$.ajax({
    url: ‘@Url.Content(“~/MyController/MyMethod”)’,
    type: ‘post’,
    data: {
       selectedBranchId : $("#BranchId option:selected").text()
    }
});

// I am the controller action
public ActionResult MyMethod(string selectedBranchId)
{
    // your code
} 
```

请注意，我已删除所有回调代码，并将控制器名称和操作名称更改为回发变量的名称

# c# - 使用 iTextSharp c# 从 PDF 中逐行提取文本

> ID：15748800
> 
> 赞同：10
> 
> 时间：2013-04-01T18:00:33.543
> 
> 标签：c#, pdf, itext, extract, carriage-return

我需要对从 PDF 文档中提取的数据进行一些分析。

使用`iTextSharp`，我使用该`PdfTextExtractor.GetTextFromPage`方法从 PDF 文档中提取内容，它以一行长的形式返回给我。

有没有办法逐行获取文本，以便我可以将它们存储在数组中？这样我就可以逐行分析数据，这将更加灵活。

下面是我使用的代码：

```
 string urlFileName1 = "pdf_link";
        PdfReader reader = new PdfReader(urlFileName1);
        string text = string.Empty;
        for (int page = 1; page <= reader.NumberOfPages; page++)
        {
            text += PdfTextExtractor.GetTextFromPage(reader, page);
        }
        reader.Close();
        candidate3.Text = text.ToString(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-02T13:13:40.063

```
 public void ExtractTextFromPdf(string path)
    {
        using (PdfReader reader = new PdfReader(path))
        {
            StringBuilder text = new StringBuilder();
            ITextExtractionStrategy Strategy = new iTextSharp.text.pdf.parser.LocationTextExtractionStrategy();

            for (int i = 1; i <= reader.NumberOfPages; i++)
            {
                string page = "";

                page = PdfTextExtractor.GetTextFromPage(reader, i,Strategy);
                string[] lines = page.Split('\n');
                foreach (string line in lines)
                {
                    MessageBox.Show(line);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-05T06:02:14.023

这里的所有其他代码示例都对我不起作用，可能是由于对 itext7 API 的更改。

这个最小的例子在这里工作正常：

```
var pdfReader = new iText.Kernel.Pdf.PdfReader(fileName);
var pdfDocument = new iText.Kernel.Pdf.PdfDocument(pdfReader);
var contents = iText.Kernel.Pdf.Canvas.Parser.PdfTextExtractor.GetTextFromPage(pdfDocument.GetFirstPage()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-16T13:25:59.650

我知道这是在一个较旧的帖子上发布的，但我花了很多时间试图弄清楚这一点，所以我将与未来尝试谷歌搜索的人分享这个：

```
using System;
using System.Text;
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.parser;

namespace PDFApp2
{
class Program
{
    static void Main(string[] args)
    {

        string filePath = @"Your said path\the file name.pdf";
        string outPath = @"the output said path\the text file name.txt";
        int pagesToScan = 2;

        string strText = string.Empty;
        try
        {
            PdfReader reader = new PdfReader(filePath);

            for (int page = 1; page <= pagesToScan; page ++) //(int page = 1; page <= reader.NumberOfPages; page++) <- for scanning all the pages in A PDF
            {
                ITextExtractionStrategy its = new iTextSharp.text.pdf.parser.LocationTextExtractionStrategy();
                strText = PdfTextExtractor.GetTextFromPage(reader, page, its);

                strText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(strText)));
                //creating the string array and storing the PDF line by line
                string[] lines = strText.Split('\n');
                foreach (string line in lines)
                {
                    //Creating and appending to a text file
                    using (System.IO.StreamWriter file = new System.IO.StreamWriter(outPath, true))
                    {
                        file.WriteLine(line);
                    }
                }
            }

            reader.Close();
        }
        catch (Exception ex)
        {
            Console.Write(ex);
        }
    }
}
} 
```

我让程序从一个设定的路径读取 PDF，然后输出到一个文本文件，但你可以将它操作到任何东西。这是建立在 Snziv Gupta 的回应之上的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-06T20:44:49.350

LocationTextExtractionStrategy 将自动在输出文本中插入 '\n'。但是，有时它会在不应该插入的地方插入 '\n'。在这种情况下，您需要构建自定义 TextExtractionStrategy 或 RenderListener。基本上检测换行符的代码是方法

```
public virtual bool SameLine(ITextChunkLocation other) {
            return OrientationMagnitude == other.OrientationMagnitude &&
                   DistPerpendicular == other.DistPerpendicular;
        } 
```

在某些情况下，如果 DistPerpendicular 和 other.DistPerpendicular 之间只有很小的差异，则不应插入 '\n'，因此您需要将其更改为 Math.Abs​​(DistPerpendicular - other.DistPerpendicular) < 10

或者，您可以将这段代码放在自定义 TextExtractionStrategy/RenderListener 类的 RenderText 方法中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T10:00:01.263

使用 LocationTextExtractionStrategy 代替 SimpleTextExtractionStrategy。LocationTextExtractionStrategy 提取的文本在行尾包含换行符。

```
ITextExtractionStrategy Strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), renderFilter);
string pdftext = PdfTextExtractor.GetTextFromPage(reader,pageno, Strategy);
string[] words = pdftext.Split('\n');
return words; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-05-09T12:52:14.127

尝试

```
 String page = PdfTextExtractor.getTextFromPage(reader, 2);
 String s1[]=page.split("\n"); 
```

# javascript - 当数字有前导零时会发生什么？

> ID：15748801
> 
> 赞同：3
> 
> 时间：2013-04-01T18:00:37.013
> 
> 标签：javascript

我今天一直在尝试调试一个问题，我终于发现了问题所在。出于某种原因，当一个数字以零开头时，JavaScript 会做一些非常奇怪的事情。

例子：

```
alert(132);
alert(0132);

var test = 0132;
alert(test); 
```

JSFiddle：http: [//jsfiddle.net/U8sFu/3/](http://jsfiddle.net/U8sFu/3/)

第一个弹出窗口显示“132”，第二个弹出窗口显示“90”，第三个显示“90”。

我的问题是，为什么数字 0132 变成了数字 90？这对我来说真的很莫名其妙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T18:02:08.003

以 0 开头的数字被解析为[八进制字面](http://en.wikipedia.org/wiki/Octal)量，以 8 为基数。

# jquery - jQuery 可折叠

> ID：15748805
> 
> 赞同：1
> 
> 时间：2013-04-01T18:00:50.303
> 
> 标签：jquery

我正在尝试创建一个无序列表，其中每个列表都`<li>`包含另一个无序列表。我要触发子菜单向下滑动的列表项有 class `mobile-collapse`，子菜单有 class `mobile-drop-menu`。这是我的jQuery代码：

```
<script>
$(function() {
$(".mobile-drop-menu").hide();
$(".mobile-collapse").click(function() { 
    $(this).children().slideToggle();
});
});

</script> 
```

但是当我测试它并单击它时`mobile-collapse <li>`它消失了。这是一个测试它的链接。您必须将窗口大小拖到非常小才能显示无序列表。[https://wwwdev.cco.purdue.edu/boot/student.shtml#](https://wwwdev.cco.purdue.edu/boot/student.shtml#)

有人可以帮我解决这个问题或找到更好的方法来实现这个目标吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:33:24.983

你的清单是这种形式

```
<li class="mobile-collapse"><a href="#">Services</a>
        <ul class="mobile-drop-menu">
            <li><a href="#">International Students</a></li>
            <li><a href="#">Teacher Employment</a></li>
            <li><a href="#">Diverse Populations</a></li>
        </ul> 
```

with class`<a href="#">Services</a>`的孩子也是如此， 这样做将**隐藏/显示**所有with class 的孩子，它们是：`li``mobile-collapse`
`$(this).children().slideToggle();`**`li``mobile-collapse`**

 **```
<a href="#">Services</a>
        <ul class="mobile-drop-menu">
            <li><a href="#">International Students</a></li>
            <li><a href="#">Teacher Employment</a></li>
            <li><a href="#">Diverse Populations</a></li>
        </ul> 
```

因此，将您的功能更改为：您需要使用`find()`转义搜索列表`<a>`

```
 $(function() {
    $(".mobile-drop-menu").hide();
    $(".mobile-collapse").click(function() { 
        $(this).find('.mobile-drop-menu').slideToggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:38:46.890

Jquery slideToggle 只需使用“ `display:block`”或“ `display:none`”来显示或隐藏元素。

```
$(this).children().slideToggle(); 
```

这将对包含链接的“ **mobile-collapse** ”类的所有子元素进行操作。所以我们需要过滤掉链接元素。

**您可以更改**行：
`$(this).children().slideToggle();`
 **`$(this).children(".mobile-drop-menu").slideToggle();`**

 **希望这会奏效。****

# ruby-on-rails - 访问哈希数组中的哈希键值

> ID：15748806
> 
> 赞同：0
> 
> 时间：2013-04-01T18:00:53.323
> 
> 标签：ruby-on-rails, xml, hash

我正在尝试获得`:visits`价值。我正在使用此代码来访问该值

```
puts "#{my_hash[0]['metrics'][0][:visits]}" 
```

并收到此错误：

```
undefined method `[]' 
```

**编辑：**这是完整的输出`puts my_hash`

```
{"xml"=>"<entry><id>ID_DATA</id><updated>2013-04-01T18:10:36.599Z</updated><title type=\"text\">ga:month=01 | ga:year=2013</title><link rel=\"alternate\" type=\"text/html\" href=\"http://www.google.com/analytics\" /><dxp:dimension name=\"ga:month\" value=\"01\" /><dxp:dimension name=\"ga:year\" value=\"2013\" /><dxp:metric name=\"ga:visits\" type=\"integer\" value=\"26248\" /><dxp:metric name=\"ga:bounces\" type=\"integer\" value=\"17174\" /></entry>", "id"=>"https://www.googleapis.com/analytics/v2.4/data?ids=ga:45872215&amp;ga:month=01&amp;ga:year=2013&amp;start-date=2013-01-01&amp;end-date=2013-03-28", "updated"=>Mon, 01 Apr 2013 18:10:36 +0000, "title"=>"ga:month=01 | ga:year=2013", "dimensions"=>[{:month=>"01"}, {:year=>"2013"}], "metrics"=>[{:visits=>26248.0}, {:bounces=>17174.0}]}
{"xml"=>"<entry><id>ID_DATA</id><updated>2013-04-01T18:10:36.599Z</updated><title type=\"text\">ga:month=02 | ga:year=2013</title><link rel=\"alternate\" type=\"text/html\" href=\"http://www.google.com/analytics\" /><dxp:dimension name=\"ga:month\" value=\"02\" /><dxp:dimension name=\"ga:year\" value=\"2013\" /><dxp:metric name=\"ga:visits\" type=\"integer\" value=\"24808\" /><dxp:metric name=\"ga:bounces\" type=\"integer\" value=\"16716\" /></entry>", "id"=>"https://www.googleapis.com/analytics/v2.4/data?ids=ga:45872215&amp;ga:month=02&amp;ga:year=2013&amp;start-date=2013-01-01&amp;end-date=2013-03-28", "updated"=>Mon, 01 Apr 2013 18:10:36 +0000, "title"=>"ga:month=02 | ga:year=2013", "dimensions"=>[{:month=>"02"}, {:year=>"2013"}], "metrics"=>[{:visits=>24808.0}, {:bounces=>16716.0}]}
{"xml"=>"<entry><id>ID_DATA</id><updated>2013-04-01T18:10:36.599Z</updated><title type=\"text\">ga:month=03 | ga:year=2013</title><link rel=\"alternate\" type=\"text/html\" href=\"http://www.google.com/analytics\" /><dxp:dimension name=\"ga:month\" value=\"03\" /><dxp:dimension name=\"ga:year\" value=\"2013\" /><dxp:metric name=\"ga:visits\" type=\"integer\" value=\"23556\" /><dxp:metric name=\"ga:bounces\" type=\"integer\" value=\"16261\" /></entry>", "id"=>"https://www.googleapis.com/analytics/v2.4/data?ids=ga:45872215&amp;ga:month=03&amp;ga:year=2013&amp;start-date=2013-01-01&amp;end-date=2013-03-28", "updated"=>Mon, 01 Apr 2013 18:10:36 +0000, "title"=>"ga:month=03 | ga:year=2013", "dimensions"=>[{:month=>"03"}, {:year=>"2013"}], "metrics"=>[{:visits=>23556.0}, {:bounces=>16261.0}]} 
```

我正在使用 Gattica`to_hash`方法。[https://github.com/chrisle/gattica](https://github.com/chrisle/gattica)

```
my_hash = data.to_h['points'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:06:45.577

文档给出了这个荒谬的咒语：

```
puts my_hash.first.metrics.detect { |metric| metric.key == :visits }.value 
```

# java - JavascriptInterface 调用但不显示 Toast

> ID：15748811
> 
> 赞同：4
> 
> 时间：2013-04-01T18:01:02.790
> 
> 标签：java, javascript, android

我有一个网络视图，它忽略了我所有的 javascript 接口方法，或者至少看起来如此。当我从普通浏览器运行该网站时，它会引发错误，因为未按预期定义接口，但这使我相信至少调用了接口方法，但还有其他问题。谁能帮我弄清楚什么？

声明东西

```
 @Override
    protected void onPostExecute(ValidationResult validation)
    {
        if (validation.wasSuccessful)
        {
            URL = validation.message;
            wv = (WebView) findViewById(R.id.webView);              
            wv.addJavascriptInterface(new KioskInterface(wv.getContext()), "Android");
            WebSettings ws = wv.getSettings();
            ws.setJavaScriptEnabled(true);
            wv.loadUrl(URL);
        }
        else
        {
            errorAlert(title, msg + "\nContact network management.");
        }
    } 
```

信息亭接口类

```
public class KioskInterface {
    Context c;

    KioskInterface(Context context)
    {
        c = context;
    }

    @JavascriptInterface
    public void showToast()
    {
        Toast.makeText(c, "Hiding Keyboard", Toast.LENGTH_LONG).show();
    }
} 
```

Javascript

```
function example() {
    Android.showToast();
} 
```

我从来没有看到任何 Toast，但我也没有收到任何错误或损坏的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:44:51.897

事实证明，即使您正在安装新版本的应用程序，清除缓存也很重要。

# c# - 冒泡排序列表框我错过了什么吗？

> ID：15748816
> 
> 赞同：0
> 
> 时间：2013-04-01T18:01:30.173
> 
> 标签：c#, bubble-sort

我想用冒泡排序对数组 [10] 进行排序，并将未排序/排序的项目放在列表框中。但是数组没有排序，并且总是给我相同的数字数组。

```
 private void button1_Click(object sender, EventArgs e)
    {
        lblB.Show();
        lblQ.Hide();

        lbS.Items.Clear();
        lbU.Items.Clear();
        Random r = new Random();
        int n = 10;
        int[] arr = new int[n];
        //listbox fill random
        for (int i = 0; i < arr.Length; i++)
        {
            arr[i] = r.Next(0, 20);
            lbU.Items.Add(arr[i]);
        }
        int temp = 0;
        for (int i = 0; i < arr.Length; i++)
        {
            for (int j = 0; j < arr.Length; j++)
            {
                if (arr[i] < arr.Length)
                {
                    temp = arr[i];
                    arr[i] = j;
                    arr[j] = temp;
                }    
            }            
        }
        for (int i = 0; i < arr.Length; i++)
        {
            lbS.Items.Add(arr[i]);
        }

    } 
```

我在这里错过了什么吗，

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:09:07.720

您的代码中有一个错误是对数组进行排序：

```
for (int i = 0; i < arr.Length; i++)
{
   for (int j = 0; j < arr.Length; j++)
   {
       if (arr[i] < arr.Length)
       {
           temp = arr[i];
           arr[i] = j;          // <<-- Mistake here - should be arr[i] = arr[j];
           arr[j] = temp;
       }    
   }            
} 
```

# javascript - JS 对象值以“未定义”开头

> ID：15748823
> 
> 赞同：0
> 
> 时间：2013-04-01T18:01:49.487
> 
> 标签：javascript, jquery, javascript-objects

我正在尝试将数组用作键值类型场景，并且它正在处理每个值都以“未定义”开头的例外情况。我相信这是由于初始分配是 += 运算符，但我不知道如何解决它。

这是去掉了很多字符串连接的代码......

```
 var phasehtml = {};
        $.each(json, function (i, item) {
            phasehtml[item.Phase] += 'item:'+item.ID;
        }); 
```

基本上我正在尝试将字符串附加到适当的键....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:04:28.577

如果已经有 ID，您可以将代码更改为仅附加 ID：

```
var phasehtml = {};
$.each(json, function (i, item) {
   // Use the existing value for the phase, or an empty string that we can append to
   var existingValue = (phasehtml.hasOwnProperty(item.Phase) ? phasehtml[item.Phase] : "");
   phasehtml[item.Phase] = existingValue + 'item:' + item.ID; 
}); 
```

假设您希望 phasehtml 包含每个阶段的“item:1item:2”形式的附加列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:16:06.707

您发布的数组是空的。

var phasehtml = {};

这似乎是以下语句 phasehtml[item.Phase] 被评估为“未定义”的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:19:26.553

嗯，

有问题。

在您的代码中，您尝试添加以前未定义的值，这就是发生此错误的原因。

在您的代码中，您尚未初始化要添加的变量。

所以试试这个：

```
 var phasehtml = {};
    $.each(json, function (i, item) {
        phasehtml[item.Phase] = "";
        phasehtml[item.Phase] += 'item:'+item.ID;
    }); 
```

在这首先分配一些值，这里是空白，然后使用数组的索引。

# ios - 阻止将对象添加到数组...无法使其工作

> ID：15748826
> 
> 赞同：0
> 
> 时间：2013-04-01T18:01:58.767
> 
> 标签：ios, objective-c, xcode, objective-c-blocks

我正在制作一个搜索文本的应用程序（通过块方法枚举整个文本）。搜索控制器类应该将结果编译成一个数组，然后通过委托方法返回。

我知道搜索逻辑正在工作，因为在添加委托方法之前，我正在获取结果，并且我的 resultsCount 整数仍在记录预期的结果数。我所做的更改是在队列中调用此方法，并将其分派回主队列，如下所示：

```
searchQueue = dispatch_queue_create("searchQueue", NULL);
dispatch_async(searchQueue, ^{

    dispatch_async(dispatch_get_main_queue(), ^ {
               [controller performSearchWithString:searchText andTexts:[self textsToSearch]];
    }); 
```

由于我这样做了，我的实际数组没有拾取*任何*这些对象（或者它立即转储它们？） - 它总是记录“null”。我不知道为什么。将数组声明为 __block 对象不会更改它，也不会将其创建为类的属性。这是我的方法代码：

```
-(void)performSearchWithString:(NSString *)searchString andTexts:(NSSet *)texts
{

NSMutableArray *pendingResults = nil;
__block int resultsCount = 0;

NSError *error = nil;

for (id book in texts) {
    if ([book isEqual:kBook1]){

        NSURL *url = [[NSBundle mainBundle] URLForResource:@"neiJing" withExtension:@"txt"];

        NSString *text = [NSString stringWithContentsOfURL:url encoding:NSStringEncodingConversionAllowLossy error:&error];
        [text enumerateSubstringsInRange:NSMakeRange(0, [text length])
                                 options:NSStringEnumerationByWords
                              usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
                                  //NSRange found = [substring rangeOfString:text];
                                  if ([searchString caseInsensitiveCompare:substring] == NSOrderedSame) {
                                      SearchResult *result = [[SearchResult alloc] init];
                                      result.title = @"neiJing";
                                      result.author = @"Author";
                                      //result.excerpt = substring; // Add logic to configure excerpt range
                                      result.range = NSMakeRange(substringRange.location-500, substringRange.length + 500);
                                      result.excerpt = [NSString stringWithFormat:@"...%@...",[text substringWithRange:result.range]];
                                      [pendingResults addObject:result];
                                      NSLog(@"%@", pendingResults);
                                      resultsCount++;
                                  }
                              }];
    }

if (error == nil) {
    [self.delegate SearchControllerDidReturnResults:[NSArray arrayWithArray:pendingResults]];
} 
```

非常感谢任何帮助。我仍然很难理解块，没有任何直接“C”的背景，但我认为我掌握了变量范围是如何受到影响的。似乎我仍然缺少一个关键概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:15:02.220

在我看来，您似乎遇到了 Objective-C 的特性之一，即您可以保留一个变量集`nil`并仍然向它发送消息。

程序将静默继续，没有任何错误消息、警告或其他变量可能未初始化的迹象。

因此，当您设置`pendingResults = nil`然后稍后调用

```
[pendingResults addObject:result]; 
```

结果将是消息`addObject:`被发送到`nil`，绝对没有结果，甚至没有控制台消息。

我的猜测是，如果您将声明更改`pendingResults`为：

```
NSMutableArray *pendingResults = [NSMutableArray array]; 
```

事情将开始发生。也许不是正确的事情（它有很多代码，很多事情仍然可能出错）但你会在你的数组中得到*一些东西。*

虽然这种（非）处理`nil`可能看起来像一个“特性”，它使查找错误变得更加困难（而且确实如此），但这也意味着在许多情况下，Objective-C 代码比“竞争”要干净得多。作为比较，看看 Java，它`NullPointerException`左右摇摆不定，导致许多人在代码中乱扔指针，测试指针是否为非空。

因此，一旦您掌握了 Objective-C 的这一特殊方面，它最终会成为您在调试器中检查的第一件事（并且您*确实*使用了调试器，对吗？）

# c++ - 是否有必要删除渲染上下文并销毁设备上下文？

> ID：15748834
> 
> 赞同：6
> 
> 时间：2013-04-01T18:02:43.873
> 
> 标签：c++, winapi, opengl

OpenGL使用win32 api时是否需要删除HDC和HRC？我认为 Win32API 会在窗口关闭时销毁它们？

澄清：HRC 是 HGLRC 对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T00:27:32.887

有必要吗”？如果您的进程在关闭窗口后自行终止，则不会。Windows 将清理这些类型的未完成句柄。

*你应该*这样做吗？绝对地。您应该始终清理您在应用程序中使用的对象。把东西丢在地上让操作系统清理不是一个好习惯。如果没有其他原因，您可能想在关闭旧窗口后创建一个新窗口。在这种情况下，你有这个垃圾 HGLRC 占用了宝贵的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:12:33.760

除了关闭窗户之外，您还必须担心其他事情。例如，阅读[http://blogs.msdn.com/b/oldnewthing/archive/2013/03/06/10399678.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2013/03/06/10399678.aspx)，它表示对象的所有者在将其选入 DC 时无法将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:14:50.907

尽快释放（不要删除）HDC。我已经完成了 OpenGL，所以我不完全知道 HGLRC 的用途，但我怀疑它的处理方式类似。获取句柄很便宜；坚持下去可能会有问题。

# streaminsight - 连续输出流洞察

> ID：15748835
> 
> 赞同：0
> 
> 时间：2013-04-01T18:02:45.170
> 
> 标签：streaminsight

是否可以通过streaminsight获得连续的输出流？我的问题是，当我使用跳跃/翻滚窗口对输入流进行查询时，当没有输入事件时，查询不会给我任何输出。这听起来很正常，但是在没有输入事件的情况下，是否有可能获得一个每 5 秒输出一次的窗口机制？

这是我的代码，也许在此之后问题变得清晰：

```
var inputStream = CepStream<ServiceBusMessage>.Create("Inputstream Portal Orders");

// Counts the number of messages in a window of 5 seconds
var countStream = from w in inputStream.TumblingWindow(outputConfig.windowSize)
                  select w.Count();

var queryTemplate = app.CreateQueryTemplate("Count Window Portal Orders", "des...", countStream);

var queryBinder = new QueryBinder(queryTemplate);
queryBinder.BindProducer<ServiceBusMessage>("Inputstream Portal Orders", inputAdapter, config, EventShape.Point);

// Just an simple outputadapter
queryBinder.AddConsumer<long>("output", outputAdapter, outputConfig, EventShape.Point, StreamEventOrder.ChainOrdered);

var query = app.CreateQuery("Counter portal orders", "des...", queryBinder);

query.Start(); 
```

我想要的输出让我们说这个输入：

```
example input
input time 1: x
input time 2: x
input time 6: x
input time 16: x

expecting output:
2 events in last 5 seconds
1 events in last 5 seconds
0 events in last 5 seconds
1 events in last 5 seconds 
```

希望这种窗口机制在streaminsight中是可能的，我在谷歌上搜索了很多东西，阅读了开发人员指南，但注意到处理有争议的输出或类似的东西。希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:21:48.930

There are no windowing mechanisms that have the behavior you are wanting.

How are you using the output? There might be another way to tackle the problem.

# javascript - 在组单击事件上更改 Kinetic.Text 的文本

> ID：15748837
> 
> 赞同：0
> 
> 时间：2013-04-01T18:02:52.187
> 
> 标签：javascript, canvas, html5-canvas, kineticjs

刚开始检查动力学 js。我有很多组，每个组都有 a`Kinetic.Text`和 a `Kinetic.Rect`。

我可以通过这个提示轻松更改任何文本；

```
text.on('click', function(evt) {
          this.setText(prompt('New Text:'));
          layer.draw(); //redraw the layer containing the textfield
        }); 
```

但我想根据文本更改矩形（包含文本）的高度和宽度。所以，这是我尝试过的，但这不起作用。它向我显示了提示，但不会更改文本，并且在那之后我的组变得无法点击！；

```
 group.on('click', function(evt) {
              this.get('.textbox').setText(prompt('New Text:'));
              //this.get('.rectangle')....change rect's height/width here
              layer.draw(); //redraw the layer containing the textfield
            }); 
```

rectangle 和 textbox 是两个`Kinteic.Text`和`Kinetic.Rect`每个组中的名称。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:43:47.590

您可以使用 Kinetic 的 getTextWidth() 来查看文本的宽度。然后调整矩形。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/MZCCA/](http://jsfiddle.net/m1erickson/MZCCA/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <button id="fitText">Fit text in the rectangle</button>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script>

        $("#fitText").click(function(){ redraw();})

        function redraw(){
            var textWidth=text.getTextWidth();
            // redraw the container--add 10px because the text has 5px padding
            container.setWidth(textWidth+10);
            layer.draw();
        }

        var stage = new Kinetic.Stage({
          container: 'container',
          width: 400,
          height: 200
        });
        var layer = new Kinetic.Layer();

        var container = new Kinetic.Rect({
          x: 100,
          y: 30,
          width: 75,
          height: 30,
          fill:"yellow",
          stroke: 'black',
          strokeWidth: 4,
          draggable: true
        });

        var text = new Kinetic.Text({
          x: 100,
          y: 30,
          text: 'Here is some text.',
          fontSize: 18,
          fontFamily: 'Calibri',
          fill: '#555',
          padding: 5,
          align: 'center'
        });

        layer.add(container);
        layer.add(text);
        stage.add(layer);

    </script>
  </body>
</html> 
```

# php - php while 循环与 $i++

> ID：15748840
> 
> 赞同：2
> 
> 时间：2013-04-01T18:03:00.593
> 
> 标签：php, while-loop

我想要做的是在while循环中有一个单选按钮，并且每次运行循环时收音机的名称都会增加1。
现在代码不起作用，因为它没有逐渐增加。任何建议都会很棒。

```
$query = mysql_query("SELECT * FROM table WHERE id = '1' ORDER BY time ASC");
echo '<table> <th> A </th> <th> time </th> <th> B </th>'; 

while($row = mysql_fetch_assoc($query)) {

    $i= 1;
    echo '<tr><td>';
    echo '<input type="radio" name="';echo $i++; echo'" /> '; echo $row['a'];
    echo '</td>';
    echo '<td>';
    echo $row['time'];
    echo '</td>';
    echo '<td>';
    echo '<input type="radio" name="';echo $i++; echo '" />'; echo $row['b'];
    echo '</td> </tr> ';
}

echo '</tr></table>'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:05:45.567

您每次都在重置计数器。

```
$i = 1;

while($row = mysql_fetch_assoc($query)) {
    // Your code

    $i++;
} 
```

.. 并替换`echo $i++;`为`echo $i;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:06:22.090

只需移动`$i= 1;`循环外

像这样：

```
...
$i= 1;
while($row = mysql_fetch_assoc($query)) {
    ...
    echo '<input type="radio" name="';echo $i; echo'" /> '; echo $row['a'];
    ...
    ...
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:06:27.557

您的逻辑无效：

```
$i = 0;
while($row = mysql_fetch_assoc($query)) {
$i++;
echo '<tr><td>';
echo '<input type="radio" name="';echo $i; echo'" /> '; echo $row['a'];
echo '</td>';
echo '<td>';
echo $row['time'];
echo '</td>';
echo '<td>';
echo '<input type="radio" name="';echo $i; echo '" />'; echo $row['b'];
echo '</td> </tr> ';
} 
```

每次你输入`$i++`PHP 都会增加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:57:39.947

呵呵.. ;））

```
$query = mysql_query("SELECT * FROM table WHERE id = 1 ORDER BY time ASC");

echo "<table>\n";
echo "  <tr>\n";
echo "    <th> A </th>\n";
echo "    <th> time </th>\n";
echo "    <th> B </th>\n";
echo "  </tr>\n";

$i = 0;

while($row = mysql_fetch_assoc($query)) {
    echo "  <tr>\n"
    echo '    <td><input type="radio" name="' . $i . '" />' . $row['a'] . "</td>\n";
    echo '    <td>' . $row['time'] . "</td>\n";
    echo '    <td><input type="radio" name="' . $i . '" />' . $row['b'] . "</td>\n";
    echo "  </tr>\n";
    $i++;
}

echo "</table>\n"; 
```

我没有检查您的代码，包括 SQL 查询是否正确，但如果有错误或格式不正确，请继续修复此代码！

# android - 活动的内容视图是什么？

> ID：15748844
> 
> 赞同：-2
> 
> 时间：2013-04-01T18:03:10.290
> 
> 标签：android, android-layout, android-fragments

这个语句中的内容是什么意思？

```
fragmentTransaction.replace(android.R.id.content, fragment1); 
```

这是来自 Android Developers 片段示例之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:17:40.967

通常，它是`ViewGroup`您附加片段的对象。例如：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

此代码会将`fragment_container`视图中的任何内容替换为`newFragment`.

```
transaction.replace(R.id.fragment_container, newFragment); 
```

# vim - 在 vi 中重新映射或忽略空格键

> ID：15748845
> 
> 赞同：2
> 
> 时间：2013-04-01T18:03:11.693
> 
> 标签：vim, keyboard

Vim/vi 快捷方式很棒，但是如果可以配置一种行为，我会非常高兴。我的机器使用巴西葡萄牙语（abnt2）键盘映射，一些重音符号（如插入符号）需要一个额外的空格键才能打印，显然是因为它们等待/期待另一个字符，主要是元音。“剪切直到找到空行”的示例：

```
 d/^$ 
```

br-abnt2 上实际需要的击键：

```
 d / <shift + ~ , spacebar>(to result ^) $ <enter> 
```

我可以使用[这个很棒](https://stackoverflow.com/questions/1218390/what-is-your-most-productive-shortcut-with-vim)`{ d }`的线程上的解释，但我会在需要额外退格技巧的其他重音符号（反斜杠）上受益更多，最重要的是，例如，无需将我的键盘映射更改为“美国”。

**编辑：**我也知道这是一个键盘映射限制，因为我们的语言期望在重音之后有一些东西，这就是为什么我问是否有办法在 vim 中规避这个限制。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:59:07.917

问题不在于编辑器，而在于您的键盘映射。实际上，`caret`被设置为“死键”。这意味着它应该在打印之前等待其他输入。

您可能需要的是一个具有`caret`非死键的新键映射。例如，uk-gb map 有`caret`一个键以及另一个死键（如果我没记错的话）。

如果你不想/不能重新映射你的键盘，你可以使用 vim 映射功能这样做。只需选择一个未使用的键并像这样映射它：

```
imap g ^ 
```

这将在插入模式下`^`键入`g`时插入（存在其他模式的其他映射，nmap，...）。例如，要在 vim 命令行中使用 vim 映射，您应该使用：

```
cmap g ^ 
```

然后您的示例将起作用。

# javascript - 将 Array 方法与嵌套（多维）数组一起使用？

> ID：15748854
> 
> 赞同：1
> 
> 时间：2013-04-01T18:03:49.077
> 
> 标签：javascript, nested-loops, multidimensional-array

将 Array 方法与嵌套数组一起使用时遇到问题。

```
var map = [
        ["Blank", "Blank", "Blank"],
        ["Blank", "Player", "Blank"],
        ["Blank", "Blank", "Blank"]
];

for (i=0; i<map.length; i++) {
        for (j=0; j<map[i].length; j++) {
            var playerY = map[i][j].indexOf("Player");
        }
}

console.log(playerY); 
```

这将始终记录-1，这是我知道的错误。虽然我认为我的问题是使用嵌套数组。这也可能是我使用 .indexOf() 的方式或循环遍历数组的方式的问题。谢谢你的帮忙。任何建议将不胜感激！:)

编辑：感谢您的所有帮助。我最终改变了很多东西，而不是一起使用 .indexOf() 方法。这就是我最终要做的。

```
var map = [
        ["Blank", "Blank", "Blank"],
        ["Blank", "Player", "Blank"],
        ["Blank", "Blank", "Blank"]
];

for (x = 0; x < map.length; x++) {
    for (y = 0; y < map[x].length; y++) {
        if (map[x][y] == "Player") {
            console.log("(" + x.toString() + ", " + y.toString() + ")");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T18:07:20.903

当在嵌套数组中`indexOf`找到时，循环不会停止。`"Player"`它将继续循环，因此`playerY`每次迭代都会覆盖 的值。为了解决这个问题，我们必须`break`在`indexOf`找到字符串时：

```
for (i = 0; i < map.length; i++) {
    for (j = 0; j < map[i].length; j++) {
        var playerY = map[i][j].indexOf("Player");

        if (playerY > -1) break; // We have found "Player"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:07:28.487

您的问题是`playerY`针对每个元素进行评估`map`，并且由于最后一个元素不匹配`"Player"`，因此您的最终结果是`-1`.

基本上在这种情况下就像你在测试这个：

```
var playerY = map[2][2].indexOf("Player"); 
```

既然那个元素是`"Blank"`，它会返回`-1`

# vb.net - 从单独的窗口窗体调用 tabPage

> ID：15748857
> 
> 赞同：1
> 
> 时间：2013-04-01T18:04:09.053
> 
> 标签：vb.net, visual-studio-2012, tabcontrol, nullreferenceexception, tabpage

我今天才刚刚开始编写 VB。所以请原谅我的无能。

我目前有两种窗口形式，一种通过 TabControl 浏览不同的页面（称为 BusinessSalesPage.vb），另一种是独立的（BusinessQuestion.vb）。当在 BusinessSalesPage.vb 上按下按钮时，将打开第二个窗口窗体。

当第二个窗口打开它有两个按钮时，我希望用户能够单击一个按钮，然后将它们从第一个窗口 (BusinessSalesPage.vb) 上的 TabControl 带到第三个选项卡。提前致谢。

这是我的代码：

```
Public Class BusinessQuestion
Inherits System.Windows.Forms.Form
Friend WithEvents mainMenu As System.Windows.Forms.TabControl
Friend WithEvents TabPage3 As System.Windows.Forms.TabPage

Private Sub yesButn_Click(sender As Object, e As EventArgs) Handles yesButn.Click

    mainMenu.SelectedTab = TabPage3()

End Sub
End Class 
```

这是我得到的错误：

已处理 NullReferenceException - 对象引用未设置为对象的实例。

编辑

```
Public Class BusinessSalesPage
Inherits System.Windows.Forms.Form
Public Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    mainMenu.SelectedTab = TabPage2
    BusinessQuestion.Show()

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T14:03:59.773

@LarsTech我也试过这个，但我的代码有问题。在第一个表单上，当我键入 mainMenu.SelectedTab = TabPage 1 时出现错误：“SelectedTab 不是 System.Windows.Forms.MainMenu 的成员，并且未声明 TabPage1。由于其保护级别，它可能无法访问。在第二个表单上它没有找到 InitializeControls，只有 InitializeComponents。我在 VS 2010 中，这是我的代码：

第一种形式：

```
Public Class WCC
  Inherits System.Windows.Forms.Form

  Public Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    mainMenu.SelectedTab = TabPage1

    Dim MSO As New MSO2014CC(mainMenu:=, TabPage1:=)
    MSO.ShowDialog()        

  End Sub
End Class 
```

第二种形式：

```
Public Class MSO2014CC
Inherits System.Windows.Forms.Form
Friend WithEvents mainMenu As System.Windows.Forms.TabControl

  Public Sub New(mainMenu As TabControl, tabPage1 As TabPage)
    InitializeComponent()
    Me.mainMenu = mainMenu
    Me.TabPage1 = tabPage1

  End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:44:49.937

您需要对 mainForm 的实际实例的引用。你目前没有。

您可以尝试在构造函数中传递引用：

```
Public Class BusinessQuestion
  ' code...
  Public Sub New(mainMenu As TabControl, tabPage3 As TabPage)
    InitializeControls()
    Me.mainMenu = mainMenu
    Me.TabPage3 = tabPage3
  End Sub
  ' code...
End Class 
```

您的 BusinessSalesPage 应该看起来像这样：

```
Public Class BusinessSalesPage
  Inherits System.Windows.Forms.Form

  Public Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    mainMenu.SelectedTab = TabPage2

    Dim bq As New BusinessQuestion(mainMenu, TabPage3)
    bq.ShowDialog()        
  End Sub
End Class 
```

# php - php字符串htmlspecialchars和标签？

> ID：15748872
> 
> 赞同：0
> 
> 时间：2013-04-01T18:05:11.080
> 
> 标签：php, tags, chat, messages, htmlspecialchars

我需要一些关于我的聊天脚本的帮助，该脚本现在不允许使用 html 标签。

我需要它来允许`<b>` `<u>`和`<i>`标记，以便用户可以编辑他们的文本。

我的系统将 url 转换为链接，因此某些 html 有某种基本系统，但我需要那些文本编辑系统。以下是可以使用的文件，它们是我自己域中的文本文档：http: [//shadowkiro.net/help_needed_stackowerflow](http://shadowkiro.net/help_needed_stackowerflow)

我一直在尝试从这里和那里搜索答案，找到一些关于 strip_tags 和 string htmlspecialchars 的东西。它们看起来像是我需要让我的 html 标签工作以及我需要放入 chat_room.js 文件的东西，但我完全不知道如何将它们作为代码与我的所有聊天消息的 chat_room.tpl 网站合作被发送到聊天窗口。在 chat_room.tpl 中也是这个聊天脚本自己的粗体、下划线和斜体脚本，它将粗体、斜体或下划线整个文本而不是它的一部分。我需要一个选项来粗体、斜体或仅在部分文本下划线。

这是我的聊天内容的小打印屏幕：http: [//i1110.photobucket.com/albums/h448/shadowkiro/chat_window.png](http://i1110.photobucket.com/albums/h448/shadowkiro/chat_window.png)

帮我？

我对此很不满意，很抱歉我的英语不好，这不是我的母语。

* * *

我已经在 chat_room.js 中尝试过，但没有成功。

```
// B I U codes here

    if (typeof(converted_parts[i])=='undefined' && 0==msg_parts[i].indexOf('<b>') && msg_parts[i]) {
              msg_parts[i]='<b>'+htmlspecialchars(msg_parts[i])+'</b>'; 
```

`}`

```
 if (typeof(converted_parts[i])=='undefined' && 0==msg_parts[i].indexOf('<i>') && msg_parts[i]) {
              msg_parts[i]='<i>'+htmlspecialchars(msg_parts[i])+'</i>'; 
```

`}`

```
 if (typeof(converted_parts[i])=='undefined' && 0==msg_parts[i].indexOf('<u>') && msg_parts[i]) {
              msg_parts[i]='<u>'+htmlspecialchars(msg_parts[i])+'</u>'; 
```

`}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:07:09.987

使用[HTML Purifier](http://htmlpurifier.org/)，它将允许您创建 HTML 标签的白名单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:30:29.407

首先做`htmlspecialchars()`然后替换输出的代码

```
<?php
$string=htmlspecialchars($string);

$string = 'any text <i>';
$patterns = array();
$patterns[0] = "/&lt;i&gt;/"; // for<i>
$patterns[1] = "/&lt;b&gt;/"; // for<b>
$patterns[2] = "/&lt;u&gt;/"; // for<u>

$replacements = array();

$replacements[0] = '<i>';
$replacements[1] = '</b>';
$replacements[2] = '</u>';

echo preg_replace($patterns, $replacements, $string);
?> 
```

# java - 如何将 JDBC mysql 驱动程序添加到 Eclipse 项目中？

> ID：15748874
> 
> 赞同：13
> 
> 时间：2013-04-01T18:05:13.183
> 
> 标签：java, mysql, servlets, jdbc, driver

1.  我已经下载了 mysql-connector-java-5.1.24-bin.jar
2.  我`lib`在我的项目中创建了一个文件夹并将 jar 放在那里。
3.  项目的属性->构建路径->添加JAR并选择上面的JAR。
4.  我仍然得到`java.sql.SQLException: No suitable driver found for jdbc:mysql//localhost:3306/mysql`

我正在使用 mysql 5.5 代码：

```
package DBTest;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.sql.*;
import java.util.*;

/**
 * Servlet implementation class TenUsers
 */
@WebServlet("/TenUsers")
public class TenUsers extends HttpServlet {
    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        PrintWriter out = response.getWriter();
        String mySqlUrl = "jdbc:mysql://localhost:3306/mysql";

        Properties userInfo = new Properties();
        userInfo.put("user", "root");
        userInfo.put("password", "SabababArba");
        try{
            Connection connection = DriverManager.getConnection(mySqlUrl, userInfo);
        }catch(Exception e) {
            out.println(e);
        }      
    }
} 
```

如果我在得到`Class.forName("com.mysql.jdbc.Driver");`之前添加`Connection connection = DriverManager.getConnection(mySqlUrl, userInfo);``java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T21:09:53.487

尝试插入：

```
DriverManager.registerDriver(new com.mysql.jdbc.Driver()); 
```

在获取 JDBC 连接之前。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T19:15:39.413

> *1：我已经下载了mysql-connector-java-5.1.24-bin.jar*

好的。

* * *

> *2：我在我的项目中创建了一个lib文件夹并将jar放在那里。*

错误的。您需要将 JAR 放到`/WEB-INF/lib`文件夹中。您无需创建任何其他文件夹。

* * *

> *3：project的properties->build path->add JAR，选择上面的JAR。*

不必要。撤消这一切以避免可能的冲突。

* * *

> *4: 我还是得到 java.sql.SQLException: No suitable driver found for jdbc:mysql//localhost:3306/mysql*

此异常可能有 2 个原因：

1.  JDBC 驱动程序不在运行时类路径中。这将通过做2）正确的方式来解决。
2.  任何加载的 JDBC 驱动程序都无法识别 JDBC URL。实际上，JDBC URL 是错误的，根据[MySQL JDBC 驱动程序文档](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)，方案和主机之间应该有另一个冒号。

    ```
    jdbc:mysql://localhost:3306/mysql 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-30T17:20:13.873

您可以将驱动程序的 .jar 文件粘贴到 Java 设置中，而不是将其添加到您创建的每个项目中。将其粘贴到 C:\Program Files\Java\jre7\lib\ext 或安装了 java 的任何位置。

在此之后，您会发现.jar 驱动程序已列入您在 IDE 中创建的项目（JRE 系统库）的库文件夹中。无需重复添加。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-25T22:26:56.697

1.  复制**mysql-connector-java-5.1.24-bin.jar**

2.  将其粘贴到 **\Apache Software Foundation\Tomcat 6.0\lib\<--here-->**

3.  从 Eclipes 重新启动您的服务器。

4.  完毕

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T18:09:08.340

您尚未将驱动程序加载到内存中。在下面使用这个`init()`

```
Class.forName("com.mysql.jdbc.Driver"); 
```

此外，您在 url 中错过了一个冒号 (:)，请使用此

```
String mySqlUrl = "jdbc:mysql://localhost:3306/mysql"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-03T09:20:38.673

如果您一次又一次遇到此异常，请下载 my-sql 连接器并粘贴到 tomcat/WEB-INF/lib 文件夹中...请注意，有时 WEB-INF 文件夹不包含 lib 文件夹，当时手动创建 lib 文件夹并将mysql连接器粘贴到该文件夹​​中..这绝对可行。如果仍然有问题，请检查您的jdk是否必须与您的系统匹配。也就是说，如果你的系统是 64 位的，那么 jdk 必须是 64 位的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-12T16:57:06.783

试试这个教程，它有解释，它会很有帮助 [http://www.ccs.neu.edu/home/kathleen/classes/cs3200/JDBCtutorial.pdf](http://www.ccs.neu.edu/home/kathleen/classes/cs3200/JDBCtutorial.pdf)

# c# - 数据驱动测试删除空格

> ID：15748883
> 
> 赞同：2
> 
> 时间：2013-04-01T18:05:47.423
> 
> 标签：c#, xml, unit-testing, mstest, data-driven-tests

我正在编写一个单元测试来测试以下方法。

```
public void MyMethod(string parm1)
{
    // Validate parm1.
    string[] invalidTokens = new string[] { "/", "{", "}", ".", "--", ";", " ", ",", "=", "(", ")", "\"", "'", "?" };
    foreach (string token in invalidTableTokens)
    {
        if (parm1.Contains(token))
            throw new ArgumentException("Parameter cannot contain \"" + token + "\".");
    }

    // No invalid characters so continue processing...
} 
```

单元测试应验证传递包含无效字符的字符串是否会导致异常。我希望我的单元测试是使用 XML（或 CSV）数据源驱动的数据。

```
[TestMethod()]
[DeploymentItem("\\path\my_data.xml")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML", "|DataDirectory|\\my_data.xml", "Token", DataAccessMethod.Sequential)]
public void MyMethod_Parm1ContainsInvalidCharacters_ThowsException()
{
    // Arrange
    string invalidToken = TestContext.DataRow["Token_Text"].ToString();
    MyClass sut = new MyClass ();

    // Act
    string errorMessage = "";
    try
    {
        sut.MyMethod(invalidToken);
    }
    catch (ArgumentException ex)
    {
        errorMessage = ex.Message;
    }

    // Assert
    Assert.AreEqual(errorMessage, "Parameter cannot contain \"" + invalidToken + "\".");
} 
```

除非测试需要通过单个空格字符“”，否则此方法有效。不幸的是，当我需要它作为空格时，它的值`Token_Text`总是“”。

```
<?xml version="1.0" encoding="utf-8" ?>
<InvalidTokens>
  <Token>/</Token>
  <Token>{</Token>
  <Token>}</Token>
  <Token>.</Token>
  <Token>--</Token>
  <Token>;</Token>
  <Token> </Token> <!-- Fails here-->
  <Token Token_Text=" "/> <!-- Also fail here -->
  <Token>,</Token>
  <Token>=</Token>
  <Token>(</Token>
  <Token>)</Token>
  <Token>"</Token>
  <Token>'</Token>
  <Token>?</Token>
</InvalidTokens> 
```

我也尝试过使用以下 CSV 文件并获得相同的结果。

```
Token
"/"
"{"
"}"
"."
"--"
";"
" " <-- Fails  here
","
"="
"("
")"
""""
"'"
"?" 
```

如何表示用于数据驱动单元测试的单个空格字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:42:55.563

我能够通过使用特殊字符十进制编码来表示一个空格。

```
<Token>&#032;</Token> 
```

# eclipse - scala eclipse项目中的Bval ValidationMessages.properties

> ID：15748884
> 
> 赞同：0
> 
> 时间：2013-04-01T18:05:55.193
> 
> 标签：eclipse, scala, sbt, bean-validation

我有一个使用 bval 的 scala 项目（基于未过滤和码头）。我已经尝试了所有我能想到的从属性文件加载自定义验证消息的方法，但它只是不起作用。我有一个这样的scala类：

```
class AddName{
    @NotEmpty(message = "{firstName.notEmpty}")
    var firstName: String = ""
    @NotEmpty(message = "{lastName.notEmpty}")
    var lastName: String = ""
} 
```

以及包含以下内容的 ValidationMessages.properties 文件：

```
firstName.notEmpty=enter a first name
lastName.notEmpty=enter a last name 
```

但是验证结果的输出与`{firstName.notEmpty}`我尝试什么无关。

我尝试将属性文件放在项目根目录中的资源文件夹中，该文件夹由运行配置导出到类路径。我也尝试将它放在`target/scala-2.9.1/classes`文件夹中，然后使用`sbt compile`.

# codeigniter - 如何找到编写应用程序的 codeigniter 版本？

> ID：15748886
> 
> 赞同：9
> 
> 时间：2013-04-01T18:06:08.213
> 
> 标签：codeigniter

我正在查看某人的代码，我可以看到他们正在使用 codeigniter。但我试图弄清楚他们使用的是哪个版本。我一直在目录结构中寻找一些信息，但还没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T18:12:23.750

在框架内部，它在“CI_VERSION”中定义。

路径是 system/core/CodeIgniter.php

```
define('CI_VERSION', '2.1.3'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T18:08:36.847

就这么简单；

```
echo CI_VERSION; 
```

该常量是全局可用的，并且预先填充了您拥有的代码的发布版本。

只需将 echo 放在一个空的控制器中，然后在浏览器中调用它来测试它。

# php - Symfony 2 和 Goutte

> ID：15748888
> 
> 赞同：0
> 
> 时间：2013-04-01T18:06:11.920
> 
> 标签：php, symfony, iconv, goutte

我想从一个使用 CP1251 编码的站点获取一些信息。

```
use Goutte\Client;
use Nonlux\Bundle\Entity\News;
....
protected function downloadQueuePage(){
    $cli = new Client();
    $url=array_pop($this->_url);
    $this->output->writeln("http://www.baikal-daily.ru" . $url);
    $cra=$cli->request("get", "http://www.baikal-daily.ru" . $url);
    $news=new News();
    $news->setSiteId(1);
    $news->setUrl($url);
    $news->setTitle($cra->filter("#content .main h3")->text());
 } 
```

默认爬虫在某些页面上返回空节点 h1，但它存在于页面上并且布局类似是有效的。经过 Groute、Crawler 和 iconv 的神奇代码。在一种情况下，我得到：

```
В Улан-Удэ трёхлетний мальчик упал в открытый колодец
упал в открытый колодец
�й колодец
дец
� 
```

而是：

```
В Улан-Удэ трёхлетний мальчик упал в открытый колодец 
```

还有一次我从控制台收到很多哔声信号，它会转储接收到的页面。我怎么解决这个问题？何处寻万恶之源？

# html - 表在 Firefox 中位置错误

> ID：15748895
> 
> 赞同：0
> 
> 时间：2013-04-01T18:06:45.967
> 
> 标签：html, css

我有一堆内联 div，然后是一个块 div。在块 div 内，应该有表格，类似这样：

```
<div class="myInlineDiv"></div>
<div class="myInlineDiv"></div>
<div class="myBlockDiv">
    <table>
        ...
    </table>
</div> 
```

问题是：表格在 FireFox 中未对齐。它在 Chrome 和 IE 中运行良好。

这是小提琴： http: [//jsfiddle.net/zk9eD/2/](http://jsfiddle.net/zk9eD/2/)红色块应该在黄色区域。

（我可以解决 position: inline 的位置问题；但它会导致表格宽度的另一个问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:11:50.033

添加`float:left;`表类

```
.table1 {
    background-color: red;
    width: 100%;
    border: 0px;
    float:left;
} 
```

检查工作演示 - [http://jsfiddle.net/zk9eD/5/](http://jsfiddle.net/zk9eD/5/)

# ios - 当我需要首次加载屏幕时如何组织控制器和视图

> ID：15748900
> 
> 赞同：1
> 
> 时间：2013-04-01T18:07:20.340
> 
> 标签：ios

我是 iOS 开发的新手，有点迷茫。我的问题是关于一般用户体验和具体的架构建议。

基本上我的应用程序应该如下工作：

首次启动时，它向远程服务器请求信息，通过 GPS 请求用户位置。当这些事情发生时，应用程序应该显示某种带有进度指示器和文本的首次启动视图。第一个问题是：如果用户无法从远程服务器下载信息怎么办？此信息是必不可少的，没有它，应用程序将无法继续工作。我应该重试下载吗？我应该向用户展示一些 MessageBox 吗？对于桌面应用程序，我会为用户提供两种选择——重试或退出。退出在 iOS 应用程序中是不可接受的，所以我应该显示消息框吗？或者我只需要通过首次启动视图上的文本通知用户问题，然后静默重试下载信息，直到成功？或者创建按钮“重试”并让用户这样做？

如果设备提供了用户位置并且下载成功，则我拥有继续所需的所有信息。否则用户必须选择他的国家和城市才能继续。

然后我有 3 个具有不同功能的选项卡。我已经实现了。

所以我的问题是：如何显示首次加载视图及其控制器？我是否应该检查 appdelegate 初始化方法并将首次加载视图分配为主视图，然后重新分配给通常的应用程序 UITabbarController（不知道该怎么做）？或者我需要将 UITabbarController 设置为根控制器，并在初始化的第一个选项卡控制器中检查它是否是首次启动并为首次视图控制器调用类似 presentViewController 的东西？我想在其他地方实现这个检查，appdelegate 是个好地方，因为初始化代码并不真正属于第一个选项卡控制器。

我创建了具有多个视图的示例程序，这些视图由 UITabbarController 或 UINavigationController 管理，但我不明白如何自己管理多个视图，没有帮助控制器为我工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:48:06.350

创建一个`presentViewController:animated:completion:`在加载数据时显示的视图控制器，并将其显示在`viewDidLoad`根视图控制器中。

我会使用[AFNetworking](http://afnetworking.com)之类的东西从服务器加载。

```
NSURL *url = [NSURL URLWithString:@"https://your-url.com"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // Dismiss the loading view controller and proceed as normal
} failure:^( AFHTTPRequestOperation *operation , NSError *error ) {
    // Display an alertView that gives the option to retry
}];
[operation start]; 
```

确保在`dispatch_async(dispatch_get_main_queue(), ^{});`调用中将任何 UI 更新包装在块中，以使更新发生在主线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:05:21.807

我目前正在开发具有类似行为的应用程序。

我使用 UINavigationController 作为根控制器。之后，我有一个带有 UIActivityIndi​​catorView 的视图控制器。我在 ViewWillAppear 方法中启动动画，在 ViewDidAppear 方法中调用实现远程调用的方法。

如果调用成功，我转到下一个视图。

如果调用失败，我会使用 UIAlertView 通知用户，然后他们点击 OK 重试。

# matlab - Matlab：用于实时事件分析的精确定时getsnapshot

> ID：15748903
> 
> 赞同：2
> 
> 时间：2013-04-01T18:07:32.317
> 
> 标签：matlab, image-processing, real-time, video-capture, timed

我得到了一个由外部源以 1/0.14s 的恒定速率触发的相机，并使用 Matlab for-loop 拍摄定时图片以进行实时测量。但是，每次执行“getsnapshot”的时间都非常不同。有时我得到一张不到 0.14 秒的照片，有时需要 0.5 秒才能拍一张照片。无论如何要将“getsnapshot”与外部触发器同步？或者至少让“getsnapshot”准确计时？

以下是我的代码：

```
vid = videoinput('camera');  
preview(vid);  

for i=1:100  
data=getsnapshot(vid);  
%...data processing...  
%....  
clear data  
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:38:56.000

首先，删除该`preview(vid)`行，这可能就是 rep. 你得到的利率很奇怪。当您获取数据时，您不需要启用此预览选项，因为它会从您的 CPU 中获取资源。

然后，您可能需要将 imaq 工具箱上的相机属性设置为触发模式。例如，对于`gentl`相机类型，这可能类似于：

```
 triggerconfig(vid, 'hardware', 'DeviceSpecific', 'DeviceSpecific');

    src = getselectedsource(vid);
    src.FrameStartTriggerMode = 'On';
    src.FrameStartTriggerActivation = 'RisingEdge';
    src.FrameStartTriggerDelayAbs = 0;
    src.FrameStartTriggerSource = 'Line1';
    src.FrameStartTriggerOverlap = 'Off'; 
```

然后，使用某些相机，您可以读取它们的触发器，即每当相机曝光时，它都会向某些输出发送一个 ttl。Matlab 定义它的方法是这样的：

```
 src.SyncOut1SyncOutPolarity = 'Normal';
    src.SyncOut1SyncOutSource = 'Exposing'; 
```

同样，您需要在 imaq 工具中使用您的相机选项。此外，您之后采取的数据处理步骤可能需要一些时间，因此对其进行基准测试以查看您可以获取数据并即时分析它而不会发生瓶颈。

最后，您可以使用`getdata`而不是`getsnapshot`（阅读文档以查看它们的区别），并采用以下形式：`[img, time, metadata] = getdata(vid);` 这将为您提供每张拍摄图像的时间戳，因此您可以看到正在发生的事情。此外，而不是`clear data`用来`flushdata(vid)`防止 vid 对象完全填满内存缓冲区（尽管如果你只在一个循环中运行 100 次迭代，你应该没问题）。

# wcf - WCF 业务对象或数据合同

> ID：15748905
> 
> 赞同：0
> 
> 时间：2013-04-01T18:07:57.460
> 
> 标签：wcf, datacontracts

我有三个项目：

*   WCF 服务项目（接口和实现）
*   使用 WCF 服务的 aspx Web 项目（客户端）
*   包含我的业务对象的类库项目（由 WCF 项目和客户端共享）

我在 WCF 服务实现类文件中有一个方法，它从 SQL 中检索数据的通用列表（引用包含业务对象的项目），使用 System.Web.Script.Serialization.JavaScriptSerializer 序列化数据并将结果作为细绳。

Web 客户端获取此字符串并将其反序列化回适当的业务对象（引用保存业务对象的项目）

这是一个 Intranet 应用程序，我想确保我正确地执行此操作。

我的问题是：

*   我应该使用 DataContracts 而不是业务对象吗？不确定何时使用 DataContracts 以及何时使用业务对象。
*   如果我使用 DataContracts，我是否应该使用 System.Web.Script.Serialization.JavaScriptSerializer？

任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:31:31.983

当然，没有一个答案。我认为问题是您是否首先要使用业务对象，否则我的第四点几乎涵盖了它。

如果业务对象看起来像数据合同那样，请使用它们，即它们是一堆公共属性并且不包含子/孙等的集合。

如果业务对象包含一堆您不需要的数据，请不要使用它们。例如，用数百个实体填充网格需要特定于该网格的数据合同。

如果业务对象包含验证逻辑等，请务必使用它们，否则您必须在 Web 服务中复制它们。

如果您只是要使用数据契约来完全扩展业务对象，请务必使用业务对象。

如果您想从非 .net 代码中使用该服务接口，请不要使用业务对象。

如果您必须大规模配置它们的序列化，请不要使用业务对象。

如果业务对象需要“知道”它们在哪里（Web 服务器或应用服务器），请不要使用它们

不是你的情况，而是：如果你正在为数据输入构建富客户端，请使用业务对象。

暂时就这些了，我看看有没有更多的事情发生在我身上。:)

# asp.net - HttpWebRequest.GetResponse 不返回服务器端控件的 AutoID

> ID：15748906
> 
> 赞同：0
> 
> 时间：2013-04-01T18:08:03.193
> 
> 标签：asp.net, .net, httpwebrequest, httpwebresponse

在 .NET 中，默认情况下，对于服务器端控件，客户端 ID 与生成的文本连接。

例如：

```
<asp:TextBox ID="txtUser" runat="server"> 
```

会成为...

```
<input type="text" id="ctl00_body_txbUser"> 
```

但是，当我使用**HttpWebRequest.GetResponse(objReq.Getresponse, HttpWebResponse)**请求同一页面时，该项目返回时没有自动生成的文本。

```
<input type="text" id="txbUser"> 
```

是否可以使用 HttpWebRequest 对象和 GetResponse 以使其返回带有自动生成的 ID 的 .NET 用于服务器端控件的响应？

我正在与以前设置特定于 ID 的翻译规则的第 3 方合作，现在我们正在尝试针对 API 调用使用相同的规则，该调用传递了从页面生成的字符串。但是，从页面生成的字符串没有相同的 ID。

下面是用于将网页作为字符串返回的代码。

```
Public Shared Function GetWebPageAsString(ByVal strURI As String, ByVal strPostData As String) As String
    ' Declare our variables. '
    Dim objHttpRequest As HttpWebRequest
    Dim PostBuffer() As Byte
    Dim PostDataStream As Stream = Nothing
    Dim objHttpResponse As HttpWebResponse = Nothing
    Dim objStreamReader As StreamReader = Nothing
    Dim strResponseText As String = ""
    Try
        ' Create a new request. '
        objHttpRequest = CType(WebRequest.Create(strURI), HttpWebRequest)
        objHttpRequest.Timeout = 3000000
        objHttpRequest.Method = "POST"
        PostBuffer = Encoding.ASCII.GetBytes(strPostData)
        objHttpRequest.ContentType = "application/x-www-form-urlencoded"
        objHttpRequest.ContentLength = PostBuffer.Length
        PostDataStream = objHttpRequest.GetRequestStream
        PostDataStream.Write(PostBuffer, 0, PostBuffer.Length)
        PostDataStream.Close()
        ' Get the response to our request as a stream object. '
        objHttpResponse = CType(objHttpRequest.GetResponse, HttpWebResponse)
        ' Create a stream reader to read the data from the stream. '
        objStreamReader = New StreamReader(objHttpResponse.GetResponseStream, Encoding.UTF8)
        ' Copy the text retrieved from the stream to a variable. '
        strResponseText = objStreamReader.ReadToEnd()
        ' Close our objects. '
        objStreamReader.Close()
        objHttpResponse.Close()
    Catch ex As Exception
        strResponseText = strURI & " | " & strPostData
        Throw (ex)
    Finally
        If Not objStreamReader Is Nothing Then
            objStreamReader.Close()
        End If
        If Not PostDataStream Is Nothing Then
            PostDataStream.Close()
        End If
        If Not objHttpResponse Is Nothing Then
            objHttpResponse.Close()
        End If
        objHttpRequest = Nothing
        PostBuffer = Nothing
        PostDataStream = Nothing
        objHttpResponse = Nothing
        objStreamReader = Nothing
    End Try
    ' Set return value. '
    Return strResponseText
End Function 
```

编辑：***为了澄清，我需要 ID 继续由 .NET 自动生成。我知道我可以通过将模式设置为静态来使它们相等。不幸的是，我们正在使用的第 3 方已经根据 .NET 生成的 ID 为我们当前的页面创建了规则。使用 HTTPRequest 对象请求同一页面并将数据推送到流中。我不再看到自动生成的 ID，即使它是同一页***。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:32:30.250

创建一个干净的母版页并将您的页面放入其中。那应该可以解决ID问题。

# macos - 从 OS X 中的剪贴板获取文件路径

> ID：15748909
> 
> 赞同：3
> 
> 时间：2013-04-01T18:08:11.433
> 
> 标签：macos, cocoa, clipboard, nspasteboard

我希望我的应用程序之前将文件的完整路径复制到剪贴板。

我试过这个：

```
NSPasteboard *p = [NSPasteboard generalPasteboard];
NSDictionary *options = [NSDictionary dictionary];
NSString *path = [[p readObjectsForClasses:[NSArray arrayWithObjects:[NSString class], nil] options:options] objectAtIndex:0]; 
```

这仅返回文件名，而不是路径。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T22:59:33.983

试试这个：

```
NSPasteboard *pasteboard = [NSPasteboard generalPasteboard];
NSArray *classes = [NSArray arrayWithObject:[NSURL class]];

NSDictionary *options = [NSDictionary dictionaryWithObject:
                         [NSNumber numberWithBool:YES] forKey:NSPasteboardURLReadingFileURLsOnlyKey];

NSArray *fileURLs =
[pasteboard readObjectsForClasses:classes options:options]; 
```

这直接来自 Apple 的[粘贴板编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PasteboardGuide106/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008099)。

# matlab - 啁啾相位改变

> ID：15748912
> 
> 赞同：1
> 
> 时间：2013-04-01T18:08:22.893
> 
> 标签：matlab, frequency, phase

我正在尝试创建一个扫频余弦，并且我希望能够随意设置相位。我尝试了该代码，但出现错误。我想创建一个矢量垫（1:40），我可以在其中手动设置它的相位。

```
Fs = 32000;                %Sampling Frequency 
t = 0: 1/Fs: 10 -1/Fs;     %Time 
tt = 10;                   %Time when the chance occurs 
f1 = 20;                   %Starting Frequency 
f2 = 250;                  %Ending Frequency 
cosineph = zeros(1,40);    %Phase of cosines

for iMat= 1:40

   k=iMat/2;   
   mat(iMat) = chirp(t,k*f1,tt,k*f2,'linear',cosineph(iMat)); 

end 
```

我得到的错误是“在赋值 A(I) = B 中，B 和 I 中的元素数量必须相同。”

现在，我猜它指的是变量 t，所以我尝试将它实现到嵌入式 for 中，但没有得到我想要的结果。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:11:27.613

您正在尝试将向量（ 的输出`chirp`）分配给矩阵 ( ) 的单个元素`mat`。这行不通。您可以改用元胞数组。在下面的示例中，我已替换`mat`为元胞数组`outArray`.

```
Fs = 32000;                %Sampling Frequency 
t = 0: 1/Fs: 10 -1/Fs;     %Time 
tt = 10;                   %Time when the chance occurs 
f1 = 20;                   %Starting Frequency 
f2 = 250;                  %Ending Frequency 
cosineph = zeros(1,40);    %Phase of cosines

for iMat= 1:40

   k=iMat/2;   
   outArray{iMat} = chirp(t,k*f1,tt,k*f2,'linear',cosineph(iMat)); 

end 
```

# c++ - 在结构内声明变量时出现分段错误

> ID：15748913
> 
> 赞同：1
> 
> 时间：2013-04-01T18:08:29.600
> 
> 标签：c++, struct, segmentation-fault

我最近在开发我的应用程序时遇到了一个非常奇怪的段错误。基本上，如果我将另一个变量添加到我的一个结构中，则在执行时会导致段错误，没有明显的原因。删除此变量可立即解决问题。结构如下：

```
typedef struct Note {
    char cNote;
    unsigned int uiDuration;
    unsigned int uiVelocity;
}; 
```

只要我添加一个

```
long lStartTime; 
```

结构中任何位置的变量，代码照常编译，但会引发分段错误。GDB 的回溯在我什至不使用的一些不起眼的 WIN 方法中丢失了。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:10:33.040

我看到了几种可能的解释：

1.  某处的某处假设它`struct`具有一定的大小。改变尺寸会破坏事物。
2.  您可能有某种内存错误，它是通过您更改内存中事物的布局而暴露出来的。尝试使用 valgrind 或 Purify 之类的工具。
3.  您正在更改`struct`头文件中的 ，但未能重建所有使用`struct`.

# php - 在 Windows 中使用 Sublime Build。从 Sublime 运行 PHP 脚本

> ID：15748914
> 
> 赞同：1
> 
> 时间：2013-04-01T18:08:35.973
> 
> 标签：php, sublimetext2

我正在尝试使用 Windows 让 sublime 构建系统为 PHP 工作。我看了[这个](https://tutsplus.com/lesson/custom-builds/)很棒的视频；但他的演示是在 Mac 上进行的，使用他的技术似乎无法在 Windows 上做同样的事情；至少我无法像在 Mac 上使用终端一样从命令行运行 PHP 文件。他也没有提到需要使用 WAMP 或 MAMP，但我自己使用 Wamp。

最终我想要做的是直接在 Sublime 中运行一个 PHP 文件，就像他在视频中所做的那样。这可能吗？如果可以，怎么办？我在 Windows 7 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:29:21.187

[在此页面](http://www.xcjs.com/2012/01/02/adding-a-php-build-system-to-sublime-text-2/)上找到了答案

```
{
    "cmd": ["C:\\wamp\\bin\\php\\php5.2.6\\php.exe", "$file"]
} 
```

# javascript - Node.js 服务器向主干模型发送数据

> ID：15748917
> 
> 赞同：1
> 
> 时间：2013-04-01T18:08:41.520
> 
> 标签：javascript, node.js, backbone.js, express, socket.io

我正在尝试将socket.io与backbone.js集成，所以基本上我有一个节点服务器，它从数据库中获取数据并将数据发送到主干客户端，客户端的模型应该以某种方式检索传入的数据，但我不是现在确定如何将 socket.io 放入模型中，只是在尝试失败后感到困惑。任何专家请启发我将不胜感激！

节点服务器在 url /pics 中向客户端发送数据

```
app.get('/pics', function(req, res){
    db.collection('pics', function(err, collection) {
        collection.find().toArray(function(err, items) {
            io.sockets.on('connection', function (socket) {
              socket.emit('news', items);
            });  
        });
    }); 
}); 
```

Backbone 模型中的客户端应该检索发出的数据（该模型适用于正常的 http 数据发送）：

```
window.Pic = Backbone.Model.extend({
    urlRoot: "/pics",
    idAttribute: "_id",
    initialize: function (){},
    defaults: {
        _id: null,
        name: "",
        date: "",
    }
});

window.PicCollection = Backbone.Collection.extend({
    model: Pic,
    url: "/pics"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:10:18.467

我必须承认在 node + socket.io 上使用 Backbone 非常有趣。不过还没有把心思放在里面。首先，您是否考虑过为 websockets 使用插件 Backbone？有些人创造了这样的。

给出另一种方法，我认为您实际上没有太多选择。使用 socket.io 来监听传入的数据会导致这样的结果：

```
socket.on('model', function(attributes) {
  // do something
}); 
```

因此，您必须有权访问一些可以手动更新模型的集合。

如果您希望在您的模型中真正使​​用 socket.io，一种更透明的方法是扩展您的模型以在其创建时开始监听一些自定义事件。我将链接一个 jsfiddle 来展示可以做什么。

**编辑：** [给你。](http://jsfiddle.net/tYhpz/)
请注意，这充满了样板。我试图找出一种方法来做一个通用的socketModel。如果我找到一个，我会更新。

# java - 按下链接时设置 JSTL 会话变量

> ID：15748918
> 
> 赞同：0
> 
> 时间：2013-04-01T18:08:41.983
> 
> 标签：java, jquery, jsp, url, struts2

我目前正在尝试创建一个切换，当按下该切换时，它会以与当前布尔值相反的方式重新加载页面。

```
<s:url action="mainMenuLabelToggle" var="mainMenuToggle"></s:url> 
<a href="${mainMenuToggle}" onclick="<s:set var ="LabelToggle" value
="!#session.LabelToggle" scope="session"/>"> view without labels </a> 
<br> 
```

这是我尝试过的当前解决方案，但不幸的是它不起作用。由于我认为首先编译 JSP 部分，它似乎在每次页面加载时运行变量声明，而不是 onclick。还有其他可能的解决方案吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:03:12.183

```
onclick="toggleLabel();"

<script type="text/javascript">
  function toggleLabel(){
    $.ajax("<s:url action='mainMenuLabelToggle'/>");
    document.location.reload(true);
  }
</script> 
```

在动作类

```
boolean labelToggle = session.get("labelToggle");
session.put(!labelToggle); 
```

# sql - 从特定位置选择一个字符串 - T-SQl

> ID：15748920
> 
> 赞同：0
> 
> 时间：2013-04-01T18:09:00.973
> 
> 标签：sql, sql-server, sql-server-2008, tsql

假设我的表中有以下记录。

```
4 - Mar 1 thru Apr 11
13 - Dec 01 thru Dec 31 
```

我想选择字符串，以便输出是，

```
Mar 1 thru Apr 11
Dec 01 thru Dec 31 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:14:07.640

我可以使用：

`CHARINDEX ( expressionToFind ,expressionToSearch [ , start_location ] )`

请参阅文档：http: [//msdn.microsoft.com/en-us/library/ms186323.aspx](http://msdn.microsoft.com/en-us/library/ms186323.aspx)

所以，这将是：

```
SELECT SUBSTRING([*FieldName*], CHARINDEX('-', [*FieldName*])+2, 252) FROM [*Table*] 
```

`252`是字符数，这是`nvarchar`字段的默认长度。如果需要，增加或减少这个数字。

我把`+2`（`-`破折号和空白）去掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:31:53.160

您有很多选择，我将使用带有**SUBSTR**和**LEN**子句的**SELECT ，（请参阅此页面：http:** [//oreilly.com/catalog/sqlnut/chapter/ch04.html](http://oreilly.com/catalog/sqlnut/chapter/ch04.html)）

 ****数据：
4 - 3 月 1 日至 4 月 11 日
13 - 12 月 1 日至 12 月 31 日

SELECT SUBSTR(your-field,4,TRIM(LEN(your-field)-4)) FROM your-table;

**输出：**
3 月 1 日至 4 月 11
日 12 月 1 日至 12 月 31 日

**注意**
- SUBSTR：返回参数的一部分
- LEN：返回参数的长度
- TRIM：返回不带空格的长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:23:18.650

```
SELECT REPLACE((SUBSTRING('4 - Mar 1 thru Apr 11', CHARINDEX(' - ', '4 - Mar 1 thru Apr 11'), LEN('4 - Mar 1 thru Apr 11'))),' - ','') 
```

这也有效，

我现在会检查你的选择。

谢谢你们所有的帮助。****

# javascript - 使用 Google Maps API 从 JSON 文件显示多边形

> ID：15748927
> 
> 赞同：0
> 
> 时间：2013-04-01T18:09:14.350
> 
> 标签：javascript, jquery, json, google-maps, google-maps-api-3

我能够将 JSON 文件加载到页面中（当前使用 jQuery），并将内容设置为页面中的变量。

JSON 包括对建筑轮廓的引用，如下所示；

```
[
    {
        "buildingNumber":"7",
        "buildingDescription":"Building Seven",
        "spatial":{
            "points":
                [
                    "-1.2345678,50.9876543",
                    "-1.2345677,50.9876544",
                    "-1.2345676,50.9876545",
                    "-1.2345675,50.9876546"
                ]
        }
    }
] 
```

使用 jQuery `$.each`，我可以加载变量并遍历建筑物，此外，每栋建筑物，我可以非常简单地遍历这些点。

问题在于谷歌似乎只记录了以下描述多边形的方法；

```
var triangleCoords = [
    new google.maps.LatLng(25.774252, -80.190262),
    new google.maps.LatLng(18.466465, -66.118292),
    new google.maps.LatLng(32.321384, -64.75737)
]; 
```

这是有道理的，但我看不出如何从我目前拥有的数组中获取这种格式。我真的很感激任何关于从一个到另一个开始移动的指针，或者描述多边形的另一种方式。

我研究了这个`array.push()`函数，虽然它看起来像是一种本地化的方式，但我看不到如何根据数组中的迭代值动态创建变量。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:23:04.390

目前你的观点是字符串。将它们转换为 google.maps.LatLng 对象：

```
var point = "-1.2345678,50.9876543";
var coords = point.split(",");
var pt = new google.maps.LatLng(parseFloat(coords[0]), 
                                parseFloat(coords[1])); 
```

然后将生成的 google.maps.LatLng 对象推送到多边形的“路径”数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:27:54.737

你有一个表示纬度和经度的字符串数组，你需要一个`google.maps.LatLng`. 我会在这里使用`array.map()`函数 -[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)。

```
var polyCoords = spatial.points.map(function(point) {
    var pointCoords = point.split(',');
    return new google.maps.LatLng(
        parseFloat(pointCoords[0]),
        parseFloat(pointCoords[1]));
}); 
```

# wordpress - 自定义 WordPress 菜单循环上的上一个和下一个按钮

> ID：15748928
> 
> 赞同：0
> 
> 时间：2013-04-01T18:09:17.993
> 
> 标签：wordpress, loops, menu

所以我必须用上一个和下一个按钮循环一些页面......

基本上，您的第一页列出了该类别中的一堆页面，然后当您单击链接时，它会将您带到“详细信息”页面，这就是我需要按钮的地方。

只想要一种简单的方法来做到这一点，而不是在每个“详细信息”页面上手动添加链接......

有什么建议么？

非常感激。

特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:47:11.927

你需要和你在 wp 的帖子部分看到的一样吗？

带有摘录的帖子列表的类别页面，当您单击它时，您会转到该帖子，在那里您可以导航到上一篇或下一篇文章？

# java - 如何通过Java获取存储在Mysql Mediumblob中的文本？

> ID：15748930
> 
> 赞同：0
> 
> 时间：2013-04-01T18:09:25.093
> 
> 标签：java

我是 Java 的初学者，不明白如何通过 Java 获取我存储在 Mysql 数据库中的一段文本作为 Mediumblob。以下是我遇到问题的代码部分。我已经通过.getString() 和.getInt() 成功获取了其他以VARCHAR 和INT 形式存储的数据。我确实在下面尝试了 .getObject() ，但这似乎不起作用。任何见解将不胜感激〜谢谢。

```
 try{
        con = DriverManager.getConnection(url, user, password);  
        pst = con.prepareStatement("SELECT * FROM exercise WHERE exercise_name = Clams;");
        rs = pst.executeQuery();  

        while (rs.next()){

            java.sql.Blob id = rs.getBlob("description");
            System.out.print(id);
        }

    }catch(SQLException ex){

    }finally {
        try {
            if (rs != null){
                rs.close();
            }
            if (pst != null){
                pst.close();
            }
            if (con != null){
                con.close();
            }
        }catch(SQLException ex){
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:28:41.523

尝试这个

```
java.sql.Blob id = rs.getBlob("description");
String s = new String(id.getBytes(0,id.length())); 
```

# c++ - 错误：运算符“&&”没有正确的操作数

> ID：15748934
> 
> 赞同：-5
> 
> 时间：2013-04-01T18:09:48.730
> 
> 标签：c++, c, eclipse, compiler-errors, arduino

我按照指南在 Eclipse 中导入 Ardupilot 项目（[https://code.google.com/p/ardupilot-mega/wiki/Eclipse](https://code.google.com/p/ardupilot-mega/wiki/Eclipse)）

我第一次可以构建项目，但之后我总是遇到这两个错误：

```
autogenerated:1:33: error: operator '&&' has no right operand 
```

[...]

```
make: *** [/tmp/ArduPilotMega.build/ArduPilotMega.o] Error 1 
```

更详细：

```
**** Build of configuration Default for project ArduPilot-mega ****

make apm1 
make: ../sketchbook/Tools/scripts/arduino_version.sh: Command not found
../mk//Arduino.mk:537: warning: overriding recipe for target `clean'
../libraries/AP_Common/Arduino.mk:324: warning: ignoring old recipe for target `clean'
../mk//Arduino.mk:555: warning: overriding recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.elf'
../libraries/AP_Common/Arduino.mk:341: warning: ignoring old recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.elf'
../mk//Arduino.mk:560: warning: overriding recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.hex'
../libraries/AP_Common/Arduino.mk:346: warning: ignoring old recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.hex'
../mk//Arduino.mk:565: warning: overriding recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.eep'
../libraries/AP_Common/Arduino.mk:351: warning: ignoring old recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.eep'
../mk//Arduino.mk:642: warning: overriding recipe for target `/tmp/ArduPilotMega.build/arduino/core.a'
../libraries/AP_Common/Arduino.mk:428: warning: ignoring old recipe for target `/tmp/ArduPilotMega.build/arduino/core.a'
../mk//Arduino.mk:663: warning: overriding recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.cpp'
../libraries/AP_Common/Arduino.mk:449: warning: ignoring old recipe for target `/tmp/ArduPilotMega.build/ArduPilotMega.cpp'
../mk/targets.mk:65: warning: overriding recipe for target `etags'
%% ArduPilotMega.o
../mk//targets.mk:65: warning: ignoring old recipe for target `etags'
In file included from ../sketchbook/libraries/AP_GPS/AP_GPS.h:7:0,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:30:
../sketchbook/libraries/AP_GPS/AP_GPS_SIRF.h:26:0: warning: ignoring #pragma pack 
../sketchbook/libraries/AP_GPS/AP_GPS_SIRF.h:64:0: warning: ignoring #pragma pack 
In file included from ../sketchbook/libraries/AP_GPS/AP_GPS.h:9:0,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:30:
../sketchbook/libraries/AP_GPS/AP_GPS_UBLOX.h:28:0: warning: ignoring #pragma pack 
../sketchbook/libraries/AP_GPS/AP_GPS_UBLOX.h:77:0: warning: ignoring #pragma pack 
In file included from ../sketchbook/libraries/AP_GPS/AP_GPS.h:10:0,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:30:
../sketchbook/libraries/AP_GPS/AP_GPS_MTK.h:28:0: warning: ignoring #pragma pack 
../sketchbook/libraries/AP_GPS/AP_GPS_MTK.h:39:0: warning: ignoring #pragma pack 
In file included from ../sketchbook/libraries/AP_GPS/AP_GPS.h:11:0,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:30:
../sketchbook/libraries/AP_GPS/AP_GPS_MTK16.h:27:0: warning: ignoring #pragma pack 
../sketchbook/libraries/AP_GPS/AP_GPS_MTK16.h:41:0: warning: ignoring #pragma pack 
autogenerated:1:33: error: operator '&&' has no right operand
In file included from ../sketchbook/libraries/AP_GPS/AP_GPS.h:15:0,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:30:
../sketchbook/libraries/AP_GPS/AP_GPS_Shim.h: In member function 'virtual bool AP_GPS_Shim::read()':
../sketchbook/libraries/AP_GPS/AP_GPS_Shim.h:24:8: warning: unused variable 'updated'
In file included from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:39:0:
../sketchbook/libraries/PID/PID.h: In member function 'void PID::operator()(float, float, float, int16_t)':
../sketchbook/libraries/PID/PID.h:107:39: warning: declaration of 'imax' shadows a member of 'this'
In file included from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:44:0:
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h: In function 'void comm_send_ch(mavlink_channel_t, uint8_t)':
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:28:11: warning: enumeration value 'MAVLINK_COMM_2' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:28:11: warning: enumeration value 'MAVLINK_COMM_3' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:28:11: warning: enumeration value 'MAVLINK_COMM_NB' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:28:11: warning: enumeration value 'MAVLINK_COMM_NB_HIGH' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h: In function 'uint8_t comm_receive_ch(mavlink_channel_t)':
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:47:11: warning: enumeration value 'MAVLINK_COMM_2' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:47:11: warning: enumeration value 'MAVLINK_COMM_3' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:47:11: warning: enumeration value 'MAVLINK_COMM_NB' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:47:11: warning: enumeration value 'MAVLINK_COMM_NB_HIGH' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h: In function 'uint16_t comm_get_available(mavlink_channel_t)':
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:65:11: warning: enumeration value 'MAVLINK_COMM_2' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:65:11: warning: enumeration value 'MAVLINK_COMM_3' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:65:11: warning: enumeration value 'MAVLINK_COMM_NB' not handled in switch
../sketchbook/libraries/GCS_MAVLink/GCS_MAVLink.h:65:11: warning: enumeration value 'MAVLINK_COMM_NB_HIGH' not handled in switch
../sketchbook/ArduPilotMega/ArduPilotMega.pde: In function 'void __vector_25()':
../sketchbook/ArduPilotMega/ArduPilotMega.pde:63:1: warning: comparison between signed and unsigned integer expressions
../sketchbook/ArduPilotMega/ArduPilotMega.pde: In function 'void __vector_36()':
../sketchbook/ArduPilotMega/ArduPilotMega.pde:64:1: warning: comparison between signed and unsigned integer expressions
../sketchbook/ArduPilotMega/ArduPilotMega.pde: In function 'void __vector_54()':
../sketchbook/ArduPilotMega/ArduPilotMega.pde:65:1: warning: comparison between signed and unsigned integer expressions
../sketchbook/ArduPilotMega/Attitude.pde: In function 'void stabilize()':
../sketchbook/ArduPilotMega/Attitude.pde:9:14: warning: unused variable 'temp'
../sketchbook/ArduPilotMega/GCS_Mavlink.pde: In member function 'void GCS_MAVLINK::handleMessage(mavlink_message_t*)':
../sketchbook/ArduPilotMega/GCS_Mavlink.pde:469:21: warning: unused variable 'type'
../sketchbook/ArduPilotMega/GCS_Mavlink.pde:564:21: warning: unused variable 'loadAction'
../sketchbook/ArduPilotMega/Log.pde: In function 'int8_t help_log(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/Log.pde:30:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/Log.pde: In function 'int8_t erase_logs(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/Log.pde:136:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/Log.pde: In function 'int8_t select_logs(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/Log.pde:157:21: warning: operation on 'bits' may be undefined
../sketchbook/ArduPilotMega/Log.pde: In function 'int8_t process_logs(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/Log.pde:185:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/Log.pde: In function 'void start_new_log(byte)':
../sketchbook/ArduPilotMega/Log.pde:225:6: warning: unused variable 'page'
../sketchbook/ArduPilotMega/Log.pde:228:7: warning: unused variable 'data'
../sketchbook/ArduPilotMega/Log.pde: In function 'void get_log_boundaries(byte, byte, int&, int&)':
../sketchbook/ArduPilotMega/Log.pde:283:11: warning: declaration of 'byte num_logs' shadows a parameter
../sketchbook/ArduPilotMega/Log.pde:260:30: warning: shadowed declaration is here
../sketchbook/ArduPilotMega/Log.pde: In function 'int find_last_log_page(int)':
../sketchbook/ArduPilotMega/Log.pde:312:15: warning: comparison between signed and unsigned integer expressions
../sketchbook/ArduPilotMega/climb_rate.pde: In function 'void add_altitude_data(long unsigned int, long int)':
../sketchbook/ArduPilotMega/climb_rate.pde:21:16: warning: unused variable 'i'
../sketchbook/ArduPilotMega/climb_rate.pde:22:6: warning: unused variable 'dx'
../sketchbook/ArduPilotMega/commands_process.pde: In function 'void change_command(uint8_t)':
../sketchbook/ArduPilotMega/commands_process.pde:5:34: warning: declaration of 'index' shadows a global declaration
../sketchbook/ArduPilotMega/climb_rate.pde:7:15: warning: shadowed declaration is here
../sketchbook/ArduPilotMega/planner.pde: In function 'int8_t planner_mode(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/planner.pde:23:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/planner.pde: In function 'int8_t planner_gcs(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/planner.pde:47:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/radio.pde: In function 'void throttle_failsafe(uint16_t)':
../sketchbook/ArduPilotMega/radio.pde:116:14: warning: comparison between signed and unsigned integer expressions
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_mode(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:44:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_show(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:51:11: warning: unused variable 'i'
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_factory(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:77:11: warning: unused variable 'i'
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_flightmodes(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:188:23: warning: declaration of 'oldSwitchPosition' shadows a global declaration
../sketchbook/ArduPilotMega/ArduPilotMega.pde:180:9: warning: shadowed declaration is here
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_declination(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:270:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_erase(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:276:11: warning: unused variable 'i'
../sketchbook/ArduPilotMega/setup.pde: In function 'int8_t setup_compass(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/setup.pde:296:8: warning: unused variable 'junkbool'
../sketchbook/ArduPilotMega/system.pde: In function 'void init_ardupilot()':
../sketchbook/ArduPilotMega/system.pde:143:8: warning: unused variable 'junkbool'
../sketchbook/ArduPilotMega/system.pde:48:6: warning: unused variable 'last_log_start'
../sketchbook/ArduPilotMega/system.pde:49:6: warning: unused variable 'last_log_end'
../sketchbook/ArduPilotMega/system.pde: In function 'void startup_IMU_ground()':
../sketchbook/ArduPilotMega/system.pde:433:11: warning: unused variable 'store'
../sketchbook/ArduPilotMega/test.pde: In function 'int8_t test_mode(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/test.pde:72:1: warning: no return statement in function returning non-void
../sketchbook/ArduPilotMega/test.pde: In function 'void test_wp_print(Location*, byte)':
../sketchbook/ArduPilotMega/test.pde:319:47: warning: declaration of 'index' shadows a global declaration
../sketchbook/ArduPilotMega/climb_rate.pde:7:15: warning: shadowed declaration is here
In file included from ../sketchbook/libraries/FastSerial/../AP_Common/AP_Common.h:37:0,
                 from ../sketchbook/libraries/FastSerial/BetterStream.h:16,
                 from ../sketchbook/libraries/FastSerial/FastSerial.h:56,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:27:
../sketchbook/libraries/FastSerial/../AP_Common/AP_Var.h: In constructor 'AP_VarT<T>::AP_VarT(AP_Var_group*, AP_Var::Key, T, const prog_char_t*, AP_Var::Flags) [with T = float, AP_Var::Key = unsigned int, AP_Var::Flags = unsigned char]':
../sketchbook/libraries/FastSerial/../AP_Common/AP_Var.h:870:63:   instantiated from here
../sketchbook/libraries/FastSerial/../AP_Common/AP_Var.h:514:5: warning: declaration of 'index' shadows a global declaration
../sketchbook/ArduPilotMega/climb_rate.pde:7:15: warning: shadowed declaration is here
In file included from ../sketchbook/libraries/AP_Compass/../AP_Math/AP_Math.h:6:0,
                 from ../sketchbook/libraries/AP_Compass/AP_Compass_HMC5843.h:5,
                 from ../sketchbook/libraries/AP_Compass/AP_Compass.h:6,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:35:
../sketchbook/libraries/AP_Compass/../AP_Math/vector3.h: In constructor 'Vector3<T>::Vector3() [with T = float]':
../sketchbook/libraries/AP_IMU/IMU.h:18:8:   instantiated from here
../sketchbook/libraries/AP_Compass/../AP_Math/vector3.h:54:17: warning: operation on '((Vector3<float>*)this)->Vector3<float>::x' may be undefined
In file included from ../sketchbook/libraries/FastSerial/../AP_Common/AP_Common.h:37:0,
                 from ../sketchbook/libraries/FastSerial/BetterStream.h:16,
                 from ../sketchbook/libraries/FastSerial/FastSerial.h:56,
                 from ../sketchbook/ArduPilotMega/ArduPilotMega.pde:27:
../sketchbook/libraries/FastSerial/../AP_Common/AP_Var.h: In constructor 'AP_VarT<T>::AP_VarT(AP_Var_group*, AP_Var::Key, T, const prog_char_t*, AP_Var::Flags) [with T = int, AP_Var::Key = unsigned int, AP_Var::Flags = unsigned char]':
../sketchbook/libraries/PID/PID.h:43:47:   instantiated from here
../sketchbook/libraries/FastSerial/../AP_Common/AP_Var.h:514:5: warning: declaration of 'index' shadows a global declaration
../sketchbook/ArduPilotMega/climb_rate.pde:7:15: warning: shadowed declaration is here
../sketchbook/ArduPilotMega/Log.pde: In function 'int8_t dump_log(uint8_t, const Menu::arg*)':
../sketchbook/ArduPilotMega/Log.pde:116:1: warning: control reaches end of non-void function
../sketchbook/ArduPilotMega/commands_logic.pde: In function 'bool verify_may()':
../sketchbook/ArduPilotMega/commands_logic.pde:201:1: warning: control reaches end of non-void function
../sketchbook/ArduPilotMega/Log.pde: At global scope:
../sketchbook/ArduPilotMega/Log.pde:13:15: warning: 'int8_t print_log_menu(uint8_t, const Menu::arg*)' declared 'static' but never defined
make: *** [/tmp/ArduPilotMega.build/ArduPilotMega.o] Error 1

**** Build Finished **** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:17:12.460

对于某些构建环境，这似乎是最新版本的 ArduPilot 的一个已知问题。

[2013 年 1 月 2 日报告的问题](https://code.google.com/p/ardupilot-mega/issues/detail?id=842)

# unicode - 使用 notepad++ 打开包含 unicode 字符的文件似乎已损坏

> ID：15748936
> 
> 赞同：1
> 
> 时间：2013-04-01T18:09:56.493
> 
> 标签：unicode, notepad++

我正在使用最新版本的 Notepad ++ 6.3.1 并使用 Windows 操作系统。尽管将编码更改为 UTP8，但尝试打开包含 unicode 字符的文件时似乎已损坏。它显示为“[][][][]”。我在设置中遗漏了什么？请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:06:04.117

这是字体问题。您需要在计算机中安装包含日文字符的字体，并且还需要将 Notepad++ 设置为使用这种字体，以便查看正在查看的文本类型。但是，Notepad++ 似乎能够在需要时使用备用字体（例如，当所选字体不包含出现在文本中的所有字符时），所以问题可能是您的系统中*没有*字体包含这些字符。例如，请参阅[Windows 计算机的东亚 Unicode 字体](http://www.alanwood.net/unicode/fonts-east-asian.html)列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T12:31:29.127

不幸的是，不是字体问题。尝试使用这些字符，使用 UTF-16 编码： , , (> U+FFFF)

结论：Notepad++ 没有完整的 Unicode 支持（与 Windows Notepad 或 AkelPad 不同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T19:19:30.797

Notepad++ 也不一致。使用 UTF-8 格式的文档，使用 Lucida Console 字体，创建一行

⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙

并在中间输入换行符-第二行变成5个块，然后删除换行符-所有10个字符都正确显示。

使用 MS Gothic 字体，此测试始终显示正确的字符

> Notepad++ v7.5.1（64 位）构建时间：2017 年 8 月 29 日 - 02:38:44 路径：C:\Program Files\Notepad++\notepad++.exe 管理模式：关闭本地配置模式：关闭操作系统：Windows 10（64-位）插件：mimeTools.dll NppConverter.dll

# sass - 如何在 SASS 中定义动态 mixin 或函数名？

> ID：15748937
> 
> 赞同：19
> 
> 时间：2013-04-01T18:09:57.903
> 
> 标签：sass, mixins, dynamic-function

我想在 SASS 中动态创建 mixins，以列表中的每个项目命名，但它似乎不起作用。

我试过这个，但我得到一个错误：

```
$event-icons: fair, concert, art-show, conference, dance-show, film, party, festival, theatre, launch
@each $event-icon in $event-icons
  @mixin event-icon-#{$event-icon}
    background-position: -($event-icon-width * $i) 0 
```

错误：

```
Invalid CSS after "": expected expression (e.g. 1px, bold), was "#{$event-icon}" 
```

SASS 不支持这种用法吗？我在手册中找不到任何关于它的内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-01T18:27:01.687

**@mixins 中的变量插值目前似乎不受支持。**

SASS 文档调用它`#{} interpolation`并[这样描述它](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)：

> 插值：#{}
> 
> 您还可以使用 #{} 插值语法在**选择器**和**属性名称中使用 SassScript 变量：**

```
$name: foo;
$attr: border;
p.#{$name} {
  #{$attr}-color: blue;
} 
```

根据[文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)，变量名称的插值似乎仅支持选择器和属性名称，而不支持`@mixin`s。如果您喜欢该功能，则可能需要为其[提交问题](https://github.com/nex3/sass/issues)，尽管[此问题](https://github.com/nex3/sass/issues/626)可能已经在跟踪您所描述的内容。

**编辑：** 您确定需要使用 a`@mixin`来完成您正在谈论的样式吗？您可以只使用带有插值的选择器吗？例如，这是否可行：

```
$event-icons: fair, concert, art-show, conference, dance-show, film, party, festival, theatre, launch
@for $i from 1 to length($event-icons)
  $event-icon: nth($event-icons, $i)
  .event-icon-#{$event-icon}
    background-position: -($event-icon-width * $i) 0 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-30T00:43:32.703

截至目前（2014 年 3 月 30 日），**[Chris Eppstein](https://stackoverflow.com/users/41221/chriseppstein)**仍然拒绝实现动态混合。请参阅Github 上的**[issue 857](https://github.com/nex3/sass/issues/857)**和**[issue 626](https://github.com/nex3/sass/issues/626)**。

我一直试图让 Chris 相信，这个功能对于 Sass 释放其真正力量非常重要……而且我不是唯一一个。

如果您同意这是一个重要功能，请转到**[issue 857](https://github.com/nex3/sass/issues/857)**和**[issue 626](https://github.com/nex3/sass/issues/626)**并自行解决此问题。我们越多地为此功能提供用例，我们就越有可能说服 Chris 和/或其他主要开发人员之一。

* * *

**更新**：在 2016 年，Eppstein 确实最终实现了此功能，因为它的请求数量众多。但是，今天（2018 年年中），这些更改仍未合并到主分支中，因此在 sass 版本中仍然不可用。见 [**问题 2057**](https://github.com/sass/sass/pull/2057)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-08T22:45:04.063

最好的解决方案是实现一个带有参数的 mixin。

```
$event-icons: fair, concert, art-show, conference, dance-show, film, party, festival, theatre, launch
@mixin event-icon($name)
  @if not index($event-icons, $name)
    @error "#{$name} is not an event icon."
  background-position: -($event-icon-width * $i) 0 
```

# sql - 修改现有的 to_char 日期格式

> ID：15748938
> 
> 赞同：0
> 
> 时间：2013-04-01T18:10:05.687
> 
> 标签：sql, oracle, peoplesoft

Oracle SQL 自动将我的字段 D.START_DT 转换为以下格式：

```
TO_CHAR(D.START_DT,'YYYY-MM-DD') 
```

这让我很难修改自己的日期格式。

我试过用另一个包裹`TO_CHAR`它，但没有运气。

```
TO_CHAR(TO_CHAR(D.START_DT,'YYYY-MM-DD'), 'MM/DD') 
```

而且我尝试`SUBSTR`选择某些字符，但没有运气。我认为连字符正在进入他的方式。

```
SUBSTR(TO_CHAR(D.START_DT,'YYYY-MM-DD'), 6, 7) || '/' || SUBSTR(TO_CHAR(D.START_DT,'YYYY-MM-DD'), 9, 10) 
```

解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:28:13.690

我同意 RMAN Express 并且认为将日期转换为您需要的任何格式都没有问题...如果您仍然遇到问题，请尝试此操作（外部查询中的第一个 to_char() 是可选的）：

```
SELECT to_char(to_date(some_date, 'YYYY-MM-DD'), 'MM/DD') final_date
  FROM
  (
  SELECT TO_CHAR(SYSDATE,'YYYY-MM-DD') some_date -- this is your "auto converted" date 
   FROM dual
  )
 / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:14:46.470

DATE 数据类型没有格式。当您在屏幕上看到打印的日期时，有一些东西应用了您看到的格式。可能是您正在使用的程序（如 SQL Developer）或您的 NLS 设置等中的“默认值”。但是，DATE 数据类型没有格式。因此，您可以完全控制在屏幕上看到的格式。

最简单的是使用 TO_CHAR 函数：

从对偶中选择 TO_CHAR(D.START_DT,'YYYY')；

仅返回四位数年份。

请参阅 TO_CHAR 日期格式选项。

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#CDEHIFJA](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#CDEHIFJA)

您应该始终在代码中提供格式，而不是依赖其他一些“默认”来提供它。

# java - 是通过类传递图像还是在每个类（android）中重新创建图像更好？

> ID：15748944
> 
> 赞同：0
> 
> 时间：2013-04-01T18:10:36.180
> 
> 标签：java, android

我创建了一个简单的应用程序，将图像尺寸转换为用户想要的大小，我将其布置在 3 个屏幕上，第一个屏幕允许用户选择图像并将其显示在屏幕上。然后第二个屏幕显示文件的属性（路径、名称、高度和宽度）以及调整名称、高度和宽度的选项。第三个屏幕显示调整大小的图像，并带有保存新图像的选项。目前我只在类之间传递图像url并解码每个类中的位图，例如

```
Bitmap bmap = BitmapFactory.decodeImage(image_URL); 
```

我的问题是在类之间传递 URL 还是传递位图更好？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:17:47.780

你有几个选择：

*   通过数据共享图像`static`- 最好在您的 `Application`班级中。示例：[使用类在 Java 中存储静态数据？](https://stackoverflow.com/questions/12157991/using-a-class-to-store-static-data-in-java)
*   通过`Intent`可能的数据传递图像，但非常不鼓励。
*   按照您的建议传递 URL，然后每次重新打开并调整其大小。
*   使用组合。例如，您应该只将图像信息传递到显示所述信息的第二个屏幕。

我建议第一个项目符号是最佳实践，并且对您很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:14:53.923

这应该是正确的做法。不应将位图从一项活动传递到另一项活动。始终建议通过路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:15:07.270

我认为这取决于你的图像在哪里（你在设备上有图像）我认为最好的方法是传递图像路径，但如果你在网络上有图像并且你必须下载它我认为传递位图比传递更好URL（只是为用户拒绝互联网连接和更快）

# copy - NSTextField：公开其复制和粘贴方法

> ID：15748945
> 
> 赞同：3
> 
> 时间：2013-04-01T18:10:38.697
> 
> 标签：copy, paste, nstextfield, fieldeditor

我试图在其窗口委托中访问 NSTextField 实例的复制、剪切和粘贴方法，以便我可以自定义这些方法。我发现与 tableViews 和 textViews 不同，文本字段的复制、粘贴和剪切操作在委托中没有响应。我的理解是所有文本控件都共享窗口的字段编辑器，但情况似乎并非如此。

我想也许 TextField 的字段编辑器没有与窗口委托共享，但是我做了一些测试，发现当我输入控件时，这些字段编辑器是相同的——非常奇怪。

我目前的解决方法是使用 NSTextView 的子类实例，其中复制和粘贴操作方法根据需要进行响应。然而，这有其自身的问题，我希望有一些方法可以让 NSTextFields 按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-10T02:22:53.503

nstextfield 没有复制和粘贴功能。这些只能在 nstextview 中找到。问题是，当编辑文本字段时，它会在编辑过程中打开一个名为 fieldeditor 的文本视图，并将其设置为第一响应者。

怎么解决：

每个文本字段都有一个连接到它的子单元格（`cell`在图片中称为但应该更恰当地命名，例如`CustomTextEditor`）：

[![在此处输入图像描述](https://i.stack.imgur.com/oZVqK.png)](https://i.stack.imgur.com/oZVqK.png)

该单元格有一个实现自定义字段编辑器的方法，称为`fieldEditorForView`：

```
class cell: NSTextFieldCell {

    var editor: NSTextView

    override func fieldEditorForView(aControlView: NSView) -> NSTextView? {
        if editor == nil {
            editor = ESPasteView()
        }
        return editor
    }

} 
```

上述函数允许您提供自己的自定义`NSTextView`子类：

```
class ESPasteView: NSTextView, NSTextViewDelegate {

    override func paste(sender: AnyObject?) {
        Swift.print("user tries to paste")
        super.pasteAsPlainText(nil)
    }

} 
```

归功于：

[如何在 NSTextField (Cocoa) 中单击鼠标右键禁用上下文菜单？](https://stackoverflow.com/questions/26518860/how-to-disable-context-menus-with-right-mouse-click-in-an-nstextfield-cocoa/26520025#comment65089534_26520025)

和指出现场编辑的 Ken Thomases。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T18:16:40.140

也许你可以看看 NSTextField 的：

```
- (BOOL)writeSelectionToPasteboard:(NSPasteboard *)pboard type:(NSString *)type;
- (BOOL)readSelectionFromPasteboard:(NSPasteboard *)pboard type:(NSString *)type; 
```

这将允许您拦截调用自定义响应。

# silverlight - Xaml 组件在 Silverlight+XNA 应用程序的多个页面中可见

> ID：15748948
> 
> 赞同：0
> 
> 时间：2013-04-01T18:10:56.013
> 
> 标签：silverlight, windows-phone-7, xna

我正在为 windows phone 7 做一个 Silverlight+XNA 游戏，我需要一个可以出现在多个页面中的 xaml 动画。这样做的最佳做法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:24:42.627

根据动画的含义及其实现方式，最明显的方法之一是将其放入 XAML`ResourceDictionary`中，可以通过单独的 XAML 文件，也可以是 core 的一部分`App.xaml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:29:38.110

制作用户控件将是一个很好的方法。制作一个包含图像的用户控件。让用户控件设置图像并运行动画。

# c# - Visual Studio 中列表框的上移、下移按钮

> ID：15748949
> 
> 赞同：4
> 
> 时间：2013-04-01T18:10:58.543
> 
> 标签：c#, button, visual-studio-2012, selected

我正在尝试制作一个上移按钮和一个下移按钮，以在 Microsoft Visual Studio 2012 的 ListBox 中移动所选项目。我在 WDF、jquery、winforms 和其他一些表单中看到了其他示例，但我没有还没有看到 Microsoft Visual Studio 中的示例。

我尝试过这样的事情：

```
 listBox1.AddItem(listBox1.Text, listBox1.ListIndex - 1); 
```

但是 Microsoft Visual Studio 在其 ListBoxes 中没有“AddItem”属性。

有关更多信息，我有两个列表框，我想让我的向上和向下移动按钮使用；SelectedPlayersListBox 和 AvailablePlayersListBox。有人会好心给我 Microsoft Visual Studio 中“上移”和“下移”按钮的示例吗？谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T15:08:24.823

无讽刺的回答。享受

```
private void btnUp_Click(object sender, EventArgs e)
{
    MoveUp(ListBox1);
}

private void btnDown_Click(object sender, EventArgs e)
{
    MoveDown(ListBox1);
}

void MoveUp(ListBox myListBox)
{
    int selectedIndex = myListBox.SelectedIndex;
    if (selectedIndex > 0)
    {
        myListBox.Items.Insert(selectedIndex - 1, myListBox.Items[selectedIndex]);
        myListBox.Items.RemoveAt(selectedIndex + 1);
        myListBox.SelectedIndex = selectedIndex - 1;
    }
}

void MoveDown(ListBox myListBox)
{
    int selectedIndex = myListBox.SelectedIndex;
    if (selectedIndex < myListBox.Items.Count - 1 & selectedIndex != -1)
    {
        myListBox.Items.Insert(selectedIndex + 2, myListBox.Items[selectedIndex]);
        myListBox.Items.RemoveAt(selectedIndex);
        myListBox.SelectedIndex = selectedIndex + 1;

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:14:09.217

你正在寻找`ListBox.Items.Add()`

对于向上移动，这样的事情应该起作用：

```
void MoveUp()
{
    if (listBox1.SelectedItem == null)
        return;

    var idx = listBox1.SelectedIndex;
    var elem = listBox1.SelectedItem;
    listBox1.Items.RemoveAt(idx);
    listBox1.Items.Insert(idx - 1, elem);
} 
```

向下移动，只需更改`idx - 1`为`idx + 1`

# sharepoint-2010 - CAML 查询无法正常工作

> ID：15748953
> 
> 赞同：0
> 
> 时间：2013-04-01T18:11:06.587
> 
> 标签：sharepoint-2010, caml

我正在尝试遵循 CAML 查询，但它无法正常工作，而不是返回 2 个文档，它返回了所有 .

```
<Where><And><Or><Eq><FieldRef Name='Participant' /><Value Type='User'>Project1, test</Value></Eq><Eq><FieldRef Name='Participant' /><Value Type='User'>Project2, test</Value></Eq></Or><Eq><FieldRef Name='Department' /><Value Type='Text'>Positioning</Value></Eq></And></Where> 
```

我已经尝试在 CAML 查询生成器中进行测试，但没有找到任何选项来添加两个 OR 和一个 AND 条件，就像上面一样。

我的完整查询构建代码是，

```
 strQuery1 = "<Where><And>";
                strQuery1 +="<Or>";
                foreach (string p in ParticipantNames)
                {
                    strQuery1 += "<Eq><FieldRef Name='Participant' /><Value Type='User'>" + p + "</Value></Eq>";
                }
                strQuery1 +="</Or>";
                strQuery1 += "<Eq><FieldRef Name='Department' /><Value Type='Text'>" + dept + "</Value></Eq></And></Where>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:48:31.213

您是否检查过您在“ParticipantNames”变量中获得了多少值？因为 And , 或 CAML 中的条件我们只能指定 2 个条件，请检查它循环了多少次？

```
<Where>
<And>
  <Or>
   <Or>
    <Eq><FieldRef Name='Participant' /><Value Type='User'>Project1, test</Value></Eq>
    <Eq><FieldRef Name='Participant' /><Value Type='User'>Project2, test</Value></Eq>
   </Or>
   <Eq><FieldRef Name='Participant' /><Value Type='User'>Project3, test</Value></Eq>
  </Or>
  <Eq><FieldRef Name='Department' /><Value Type='Text'>Positioning</Value></Eq>
</And>
</Where> 
```

# scala - 玩 2 Anorm 和 scala 模式匹配

> ID：15748955
> 
> 赞同：0
> 
> 时间：2013-04-01T18:11:09.627
> 
> 标签：scala, playframework-2.0, anorm

我在使用 anorm 从 play2 模块查询 mysql 数据库时尝试使用模式匹配。代码如下所示：

```
def test= Action {
    DB.withConnection { implicit c =>
    val entities = SQL("SELECT entity.idEntity, entity.name FROM entity")().collect {
        case Row(id:Int, name:String) => Entity(id, name)
  }
  printList(entities.toList)

} 
```

但是 name:String 不匹配任何东西（已经尝试只匹配整数并且它工作正常）。在我的数据库中，实体表“名称”列类型是 varchar(45)。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:23:49.310

您可以尝试匹配`Row`一个`Int`和一个命名的通配符。

```
scala> new Row(0,"foo")
res0: Row = Row(0,foo)

scala> res0 match{
     | case Row(i: Int,s @ _) => println(i + " " + s)
     | }
0 foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T20:57:25.510

如果 name 可以为空，则此匹配应该有效：

```
case Row(id:Int, Some(name:String)) 
```

# php - php首字母大写

> ID：15748960
> 
> 赞同：-5
> 
> 时间：2013-04-01T18:11:21.173
> 
> 标签：php

我有这个回声：

```
<?=$item['Field']?> 
```

我试图让每个第一个字母大写。

我试过这个

```
<?$item = ucwords(strtolower('Field'));?> 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:12:55.850

试试看：

```
<?$item_capitalize = ucwords(strtolower($item['Field']));?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:14:10.997

我想你想要以下之一

```
<?= $item[ucwords(strtolower('Field'))]; ?>
<?= ucwords(strtolower($item['Field'])); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:14:16.393

如果你想打印它，不要分配它。

```
<?=ucwords(strtolower($item['Field']));?> 
```

# c++ - 将存储在 std::function 中的带有捕获子句的 lambda 转换为原始函数指针

> ID：15748961
> 
> 赞同：8
> 
> 时间：2013-04-01T18:11:26.630
> 
> 标签：c++, binding, lambda, function-pointers, std-function

由于我[最近的最后一个问题](https://stackoverflow.com/questions/15747669/how-to-get-this-pointer-from-stdfunction/15747877#15747877)不幸措辞并导致解决了另一个问题，然后是我的问题，因此我将尝试以清晰的方式阐述我的实际问题。

在开始之前，作为旁注，我将 Javascript Engine V8 集成到我的 C++ 应用程序中。这就是示例中所有类型的来源。这也是我最后需要一个原始函数指针的原因。但我在下面详细说明。

从一个类内部，我需要将带有捕获子句的 lambda 表达式`[=]`作为类型的参数传递`std::function`给另一个函数，并将其转换为那里的原始函数指针。

在这段代码中，`InvocationCallback`只是一个带有签名的函数的 typedef `Handle<Value>(Arguments const &)`。

```
typedef Handle<Value> (*InvocationCallback)(Arguments const &);

void Bind(string Name, function<Handle<Value>(Arguments const &)> Function)
{
    InvocationCallback* function = Function.target<InvocationCallback>();
} 
```

所有 lambda 表达式也具有相同的签名。请注意，与此示例`Handle<String>`中的兼容`Handle<Value>`。它也是由 Javascript Engine V8 提供的。

```
Bind("name", [=](const Arguments& args) -> Handle<Value>{
    Handle<String> result = String::New(Name().c_str());
    return result;
}); 
```

C++ 允许我将这个 lambda 传递`std::function`给上面的函数。但我猜一个 lambda 表达式也存储了它所引用的对象的引用。`[=]`必须以某种方式实现指定的访问权限。这可能是转换`std::function`为原始函数指针失败的原因。

```
InvocationCallback* function = Function.target<InvocationCallback>(); 
```

既没有编译时错误也没有运行时错误，但调试器告诉我它会导致空指针。但我需要原始函数指针进行进一步处理。我想我可以先`std::bind`在引用或`this`-pointer 之后转换 lambda。

更新：由于似乎不可能从 lambda 中获取状态，这就是我尝试过的。它编译但`function`出来是一个空指针。

```
Bind("name", this, [](Base* object, const Arguments& args) -> Handle<Value>{
    return v8::String::New(((Derived*)object)->Name().c_str());
});

void Bind(string Name, Module *Object, function<Handle<Value>(Module*, Arguments const &)> Function)
{
    function<Handle<Value>(Arguments const &)> method = std::bind(Function, Object, std::placeholders::_1);
    InvocationCallback* function = method.target<InvocationCallback>();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:32:45.697

你不能，因为捕获的 lambda 是一个*闭包*，所以它有状态（它是一个带有实例变量的对象）。函数指针没有状态。因此，如果没有 1) 您正在使用的需要函数指针的 API 还允许您在传递状态的地方传递用户数据参数，或者 2) 将状态存储在全局变量或其他东西中，您就无法做到这一点。

在 Stack Overflow 上搜索“要回调的成员函数”，您就会知道（基本上，您希望使用成员函数 the `operator()`，作为回调）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T07:24:57.480

您可以将捕获的 lambda/functor 转换为函数指针，但在执行此操作时需要小心：

[https://codereview.stackexchange.com/questions/79612/c-ifying-a-capturing-lambda](https://codereview.stackexchange.com/questions/79612/c-ifying-a-capturing-lambda)

# git - git 撤消对过去提交的签出

> ID：15748964
> 
> 赞同：2
> 
> 时间：2013-04-01T18:11:46.783
> 
> 标签：git, version-control, git-checkout

所以我做了`git checkout <past_commit_hashtag>`

但后来我想撤消它并返回到当前的最新版本

所以我做了很多事情：

```
git reset --hard
git checkout <root folder>
git branch -D master
git checkout master 
```

尽管如此，我现在收到一条错误消息`Fatal error: Cannot redeclare file_create_url() etc`，暗示我没有正确恢复到最新版本......

我该如何正确地回到当前版本？

`git pull --rebase`显示我的分支是最新的而且`git status`显示没有肮脏的变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:18:58.733

要“撤消签出”，您只需签出所需的修订。如果您想恢复到某个分支，只需执行`git checkout branchname`. 当然，如果您已经执行了几个不了解其含义的随机命令，则回滚它们可能会更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:20:32.377

做一个

```
git reflog 
```

要查看您在本地移动 HEAD ref 的历史并找到您想要返回的提交的哈希值，请执行

```
git checkout $THATHASH 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:34:29.297

你处于*分离的 HEAD*状态，回去本来只是`git checkout master`. 但与此同时，在你身边挣扎删除了那个（`git branch -D master`）......恭喜！

`git fsck --lost-found`应该向您展示几个漂浮在空中的提交（您已经放弃的提交，以及您的被杀死的提交`master`）。每一个都做`git checkout`一个，然后环顾四周。如果它看起来像你迷路了`master`，在那里做一个`git branch master`。检查它的理智。该分支的配置（它从哪里获取等）丢失，需要重建。见`git config`，`git remote`等等。

另请查看git book 中的[“维护和数据恢复”章节。](http://git-scm.com/book/en/Git-Internals-Maintenance-and-Data-Recovery)

如果有*任何*疑问，请将包含存储库的目录复制到一个新副本中，您可以在那里闲逛，直到您确切知道如何恢复（不，`git`不会丢失任何数据，但是解开可以用几个命令造成的混乱是另一回事一壶鱼……）

# php - 如何使选择列表的输出依赖于父列表？

> ID：15748968
> 
> 赞同：8
> 
> 时间：2013-04-01T18:12:32.030
> 
> 标签：php, wordpress

我有两个数组，它们的父类别和子类别都出现在选择列表中，如何使子类别仅显示其父类别中的项目？

```
 <?php $carMakes = array(
 'show_option_all'    => '',
 'show_option_none'   => ('All Makes'),
 'orderby'            => 'ID', 
 'order'              => 'ASC',
 'show_count'         => 0,
 'hide_empty'         => 1, 
 'child_of'           => 25,
 'exclude'            => 0,
 'echo'               => 1,
 'selected'           => 0,
 'hierarchical'       => 0, 
 'name'               => 'cat',
 'id'                 => '',
 'class'              => 'postform',
 'depth'              => 0,
 'tab_index'          => 0,
 'taxonomy'           => 'category',
 'hide_if_empty'      => false
); ?>

<?php $carModels = array(
 'name'               => 'subcat',
 'hierarchical'       => 1,
 'parent'             => get_cat_id('model'),
 'show_option_none'   => ('All Models'),
 'hide_empty'   => 0  ); 
?>

<?php wp_dropdown_categories($carMakes); ?> 

<?php wp_dropdown_categories($carModels); ?> 
```

例如，只需要显示属于汽车制造商的车型

```
Make=Toyota  Model=Supra
             Model=Corolla
             Model=Tundra 
```

这是类别结构的示例

```
Make (parent category)
     -Toyota
     -Nissan
     -Mazda
     -Ford

    Model (parent category)
     -Supra
     -Skyline
     -Mustang
     -Rx7
     -Corolla 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:14:53.463

一直想使用 Ajax 对链式选择进行练习，所以，我们开始吧；）

这是一个完整的插件，应该安装在`wp-content/plugins/your-plugin-name`文件夹中。由三个文件组成，插件本身、Javascript 文件和 Ajax 加载器图像。

安装插件并激活，并**在一些主题模板文件中插入以下内容**：

```
<?php 
if( class_exists( 'BRSFL_Chained_Selection' ) ) {
    // Parameters: ( $cat_id, $dropdown_text )
    BRSFL_Chained_Selection::print_cats( 1, 'All Makes' ); 
}
?> 
```

此外，根据需要调整两个调用`wp_dropdown_categories`。详情请查看代码注释。

子类别下拉列表会**根据类别下拉列表的变化进行修改：**

> ![在此处输入图像描述](https://i.stack.imgur.com/oCVAk.png)

## 链式categories.php

```
<?php
/**
 * Plugin Name: Chained Categories
 * Plugin URI: http://stackoverflow.com/q/15748968/1287812
 * Description: Demonstration of chained categories with Ajax. 
 *   Plugin structure based on <a href="https://gist.github.com/3804204">Plugin Class Demo</a>, by Thomas Scholz.
 *   Use the dropdowns in the theme with this PHP method call: BRSFL_Chained_Selection::print_cats();
 * Author: Rodolfo Buaiz
 * Author URI: http://wordpress.stackexchange.com/users/12615/brasofilo
 */

add_action(
    'plugins_loaded',
    array ( BRSFL_Chained_Selection::get_instance(), 'plugin_setup' )
);

class BRSFL_Chained_Selection
{
    /**
     * Plugin instance.
     *
     * @see get_instance()
     * @type object
     */
    protected static $instance = NULL;

    /**
     * URL to this plugin's directory.
     *
     * @type string
     */
    public $plugin_url = '';

    /**
     * Path to this plugin's directory.
     *
     * @type string
     */
    public $plugin_path = '';

    /**
     * Access this plugin’s working instance
     *
     * @wp-hook plugins_loaded
     * @since   2012.09.13
     * @return  object of this class
     */
    public static function get_instance()
    {
        NULL === self::$instance and self::$instance = new self;
        return self::$instance;
    }

    /**
     * Used for regular plugin work.
     *
     * @wp-hook plugins_loaded
     * @since   2012.09.10
     * @return  void
     */
    public function plugin_setup()
    {    
        $this->plugin_url    = plugins_url( '/', __FILE__ );
        $this->plugin_path   = plugin_dir_path( __FILE__ );
        $this->load_language( 'chainedselections' );

        add_action( 'wp_enqueue_scripts', array( $this, 'script_enqueuer' ) );
        add_action( 'wp_ajax_custom_query', array( $this, 'custom_query' ) );
        add_action( 'wp_ajax_nopriv_custom_query', array( $this, 'custom_query' ) );
    }

    /**
     * Constructor. Intentionally left empty and public.
     *
     * @see plugin_setup()
     * @since 2012.09.12
     */
    public function __construct() {}    

    /**
     * Enqueue frontend scripts
     */
    public function script_enqueuer() 
    {
        wp_register_script( 
             'ajax-quote' 
            , plugin_dir_url( __FILE__ ) . '/ajax.js'
            , array( 'jquery' ) 
        );

        wp_enqueue_script( 'ajax-quote' );

        wp_localize_script( 
             'ajax-quote' 
            , 'wp_ajax' 
            , array( 
                 'ajaxurl'  => admin_url( 'admin-ajax.php' ) 
                , 'ajaxnonce' => wp_create_nonce( 'ajax_chained_selection_validate' )
                , 'icon' => plugin_dir_url( __FILE__ ) . '/ajax-loader.gif' 
            ) 
        );
    }    

    /**
     * Ajax create sub-categories dropdown
     */
    public function custom_query()
    {
        // Security
        check_ajax_referer( 'ajax_chained_selection_validate', 'security' );

        // Check if jQuery posted the data
        if( !isset( $_POST[ 'chained_subcat_id' ] ) )
            return false;

        // Adjust parameters
        $carMakes = array(
            'show_option_all'    => '',
            'show_option_none'   => 'All ' . $_POST[ 'chained_subcat_name' ],
            'orderby'            => 'ID', 
            'order'              => 'ASC',
            'show_count'         => 0,
            'hide_empty'         => 0, 
            'exclude'            => 0,
            'echo'               => 1,
            'selected'           => 0,
            'child_of'           => $_POST[ 'chained_subcat_id' ],
            'hierarchical'       => 1, 
            'name'               => 'chained-subcontainer',
            'id'                 => '',
            'class'              => 'postform',
            'depth'              => 1,
            'tab_index'          => 0,
            'taxonomy'           => 'category',
            'hide_if_empty'      => false
        ); 

        // Print sub-categories
        wp_dropdown_categories( $carMakes );
        exit();
    }       

    /**
     * Loads translation file.
     *
     * Accessible to other classes to load different language files (admin and
     * front-end for example).
     *
     * @wp-hook init
     * @param   string $domain
     * @since   2012.09.11
     * @return  void
     */
    public function load_language( $domain )
    {
        $locale = apply_filters( 'plugin_locale', get_locale(), $domain );

        // Load translation from wp-content/languages if exist
        load_textdomain(
                $domain, WP_LANG_DIR . $domain . '-' . $locale . '.mo'
        );

        // Load regular plugin translation
        load_plugin_textdomain(
            $domain,
            FALSE,
            $this->plugin_path . '/languages'
        );
    }

    /**
     * Print the dropdown in the frontend
     */
    public static function print_cats( $cat_id, $dropdown_text )
    {
        // Adjust parameters
        $carMakes = array(
            'show_option_all'    => '',
            'show_option_none'   => $dropdown_text,
            'orderby'            => 'ID', 
            'order'              => 'ASC',
            'show_count'         => 0,
            'hide_empty'         => 0, 
            'exclude'            => 0,
            'echo'               => 1,
            'selected'           => 0,
            'child_of'           => $cat_id,
            'hierarchical'       => 1, 
            'name'               => 'chained-categories',
            'id'                 => '',
            'class'              => 'postform',
            'depth'              => 1,
            'tab_index'          => 0,
            'taxonomy'           => 'category',
            'hide_if_empty'      => false
        ); 

        // Print categories
        wp_dropdown_categories( $carMakes );

        // Empty dropdown for sub-categories
        echo '<div id="chained-subcontainer">
                <select name="chained-subcategories" id="chained-subcategories">
                    <option value="">- Select a category first -</option>
                </select>
            </div>';
    }
} 
```

## ajax.js

```
jQuery( document ).ready( function( $ ) 
{ 
     var data = {
         action: 'custom_query',
         security: wp_ajax.ajaxnonce
     };

    $( "#chained-categories" ).on( "change", function( e ) 
    {
        // Add specific data to the variable, used to query the sub-categories
        data[ 'chained_subcat_id' ] = $( this ).val();
        data[ 'chained_subcat_name' ] = $(
            '#chained-categories option[value=' 
            + $( this ).val() 
            + ']'
            ).text();

        // A sub-category was selected
        if( $( this ).val() > 0 )
        {
            // Ajax loader icon 
            $( '#chained-subcontainer' ).html( '<img src="' + wp_ajax.icon + '">' );

            // Ajax call
            $.post( 
                wp_ajax.ajaxurl, 
                data,   
                // No error checking is being done with the response                
                function( response )
                {
                    $( '#chained-subcontainer' ).html( response );
                }
            );
        }
        // No selection, show default
        else
        {
            $( '#chained-subcontainer' ).html( '<select name="chained-subcategories" id="chained-subcategories"><option value="">- Select a category first -</option></select>' );
        }           
    });
} ); 
```

## ajax-loader.gif

![ajax 加载器](https://i.stack.imgur.com/Gdbjg.gif)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T03:41:21.537

为什么不使用对象？你需要一个工厂来制造汽车。

一个很好的参考：http: [//sourcemaking.com/creational_patterns](http://sourcemaking.com/creational_patterns)

我也喜欢考虑让对象保持小、简单，并尽可能少做。将功能分解为简单的概念，如“制作”和“展示”。这使得它们可互换和可扩展。您最终将能够只要求 $this->model->

我会这样处理：

1个对象来组织数据//模型

另一个来构建你的行//控制器

另一个显示//查看

要开始这样看，请先编写一些函数以了解您想知道的内容。

```
foreach (make)->show(models); 
```

您可能会发现您需要以不同的方式查询数据……换句话说，请预先向数据库询问更具体的问题，而不是在收到数据后对其进行过滤。也许现在过滤似乎更快，但是您以后还需要做多少其他问题和过滤呢？

还有一条评论：php 更易于控制，而 javascript 感觉更美观。我说在他们最合适和最简单的上下文中解决问题——在这个问题上坚持使用 php。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:23:21.527

没有 AJAX 的唯一方法是获取所有“Make”类别的列表，然后使用 wp_dropdown_categories() 和 child_of 参数为每​​个“Make”的每个“模型”生成一个下拉列表。在页面加载时隐藏所有“制作”下拉菜单，将更改事件处理程序附加到“制作”下拉菜单，当它被调用时，显示适当的“模型”下拉菜单，同时隐藏所有其他下拉菜单。显示/隐藏可以使用 jQuery 或纯 JS 完成。每个“模型”下拉菜单都必须有一个唯一的 ID，可用于识别它属于哪个“品牌”。

# magento - 根据值的 id 获取 Magento 选项实体值

> ID：15748970
> 
> 赞同：1
> 
> 时间：2013-04-01T18:12:35.000
> 
> 标签：magento

这是特定于 magento 基本安装的场景。选择制造商过滤器后，我希望能够更改我的类别页面上的一些内容。

我看到的是 [http://www.myurl.com/path/to/cat.html?manufacturer=777](http://www.myurl.com/path/to/cat.html?manufacturer=777)

由此我可以通过执行以下操作来获取制造商 ID：

```
$request->getParam('manufacturer'); 
```

我想要做的是跳入`eav_attribute_option_value`并根据`value_id`（在我的情况下为 8404）和制造商 ID 获取制造商名称，以返回制造商的名称。

我相信还有其他用例也会变得很方便。就我而言，我将根据其他一些逻辑将品牌添加到类别标题标签中。这将创建新的高品牌类别页面，这些页面应该在谷歌上排名很好。

因此，您的基本类别标题标签可能如下所示：“洗衣机”

然后 Maytag 的制造商品牌过滤页面将如下所示：“Maytag 洗衣机”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:37:32.923

我能够找到一种肮脏的方法来做到这一点。$query = "SELECT * FROM mg_eav_attribute_option_value WHERE option_id =" 。$request_params['制造商'] 。"限制 0 , 30"; $read = Mage::getSingleton('core/resource')->getConnection('core_read'); $manufacturer = $read->fetchAll($query);

# c++ - 错误：ISO C 禁止声明没有类型的“测试”

> ID：15748973
> 
> 赞同：1
> 
> 时间：2013-04-01T18:12:39.570
> 
> 标签：c++

我正在自己学习 C++，我遇到了这个问题。我写了几行简单的代码只是想测试一下“auto”，似乎它不再起作用了。我在下面粘贴了我的代码：

```
#include <iostream>
using namespace std;
int main(int argc, char** argv) {
    auto test=1;
    return 0;
} 
```

然后报标题中的错误。我使用 NetBeans IDE。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:14:22.137

问题是您的编译器要么不支持 C++11 `auto`，要么已禁用它（C++03 模式）。

所以`auto`关键字，而不是类型推断，是一个存储修饰符。然后类型丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:13:19.500

要使用新的 C++11 含义`auto`，您必须有一个兼容的编译器，并告诉它源文件正在使用 C++11 功能。

使用`gcc`，可以使用`-std=c++11`。

# web-services - 如何为 64 位 Windows 编译 WSO2 Web 服务框架 - C++？

> ID：15748975
> 
> 赞同：2
> 
> 时间：2013-04-01T18:12:48.133
> 
> 标签：web-services, soap, axis2, wso2, axis2c

我已经下载了 WSF-CPP 2.1.0 源，并将 vcvars 设置为 x86_amd64（使用 VS 2008/9.0），但我遇到了问题：

1.  我必须禁用 wsf_c/axis2c/build/win32/makefile 中的 /WX 编译器选项才能尝试构建任何东西，因为 Axis2/C 代码中充斥着警告。
2.  现在我遇到了多个 Axis2/C 源文件试图包含不存在的文件的问题，例如 httpd.h、http_core.h 等（具体的违规者在 wsf_c/axis2c/src/core/transport/http /服务器/apache2）。

对于编写 makefile 的人来说，数字 1 可能只是一个坏主意，因此可以忽略。但是数字 2 似乎比一些缺少的标头表明一个更大的问题，主要是因为我能够编译从[Apache 网站](http://axis.apache.org/axis2/c/core/download.cgi)下载的 Axis2/c 库而没有问题，但是代码是相同的（包括不存在的标头的#includes ）。有谁知道可能导致这种差异的原因是什么？

具体来说，这里是我尝试设置 64 位环境变量的方式。我所做的只是替换 build.bat 和 wsf_c/build.bat 中的这一行：

```
@call vcvars32.bat /nologo 
```

和

```
@call "C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat" x86_amd64 
```

我做错了吗？我是不是搞砸了别的东西？

此外，这是我在 StackOverflow 上提出的第一个问题。关于这一点，我会感谢任何关于格式、内容、语气、适当性等的批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:54:06.877

对于任何尝试使用不再受支持、过时的 WSO2 WSF/CPP/C 或 Axis2/C 的可怜人，我的第一个建议是尽可能使用不同的库。如果您拒绝接受此建议，请继续阅读。

最后通过反复试验让它正确构建。这是它所需要的：

*   如我的问题所述，我必须禁用 wsf_c/axis2c/build/win32/makefile 中的 /WX 编译器选项，以防止构建由于 Axis2/C 代码中的所有警告而立即失败。
*   同样如我的问题中所述，我必须更改 build.bat 顶部的行（build.bat 或 wsf_c/build.bat 都可以，因为它们在同一个控制台中运行，您只需要设置一次环境变量每个控制台会话）。我改变了线路

    ```
    @call vcvars32.bat /nologo 
    ```

    到

    ```
    @call "C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat" x86_amd64 
    ```

    这将编译器设置为在 64 位配置中构建所有内容。

*   在 wsf_c/build.bat 中，我必须将第 11 行（或附近）的 Axis2/C 构建命令从

    ```
    nmake dist AUTOCONF=..\..\..\configure.in 
    ```

    到

    ```
    nmake install AUTOCONF=..\..\..\configure.in 
    ```

    这神奇地修复了丢失的标题错误。如果我知道为什么，我会解释它。

*   然后我不得不在该命令之后直接添加这一行：

    ```
    move ..\deploy ..\axis2c-bin-1.6.0-win32 
    ```

    这是修复其余构建脚本所必需的，因为它们都将构建目录引用为`axis2c-bin-1.6.0-win32`，即使 Axis2/C 实际上将所有内容都放在名为“deploy”的文件夹中。如果您热衷于细节，您可以将对该文件夹的每个引用更改为最后具有“win64”，但我只是想以尽可能少的努力让它工作。

但请注意，这些都是超出 WSO2 文档中初始安装/构建说明的所有步骤。WSO2 说明中指出的所有步骤仍然是必需的（显然，除了专门用于 32 位的任何步骤）。

不幸的是，这并没有解决我的真正问题，即试图从 Axis2/C 加载 Rampart DLL。我一直在追求 WSO2 的实施，希望他们以更好的方式构建东西，但可惜，没有运气。我会将我的 Rampart 问题发布在一个单独的、同样不太可能被回答的线程中。我还没有在网络上的任何地方找到解决方案。

# python - 我可以从它的内存地址中获取一个 python 对象吗？

> ID：15748980
> 
> 赞同：16
> 
> 时间：2013-04-01T18:12:58.163
> 
> 标签：python, pyqt4, ipython, dereference

我正在学习如何将 Qt 与 PyQt 一起使用，并且我有一个带有 StandardItemModel 的 QTabelView 我已成功填充模型并将 itemChanged 信号连接到插槽。我想弄乱IPython中返回的任何对象，所以目前我有这行：

```
def itemChangedSlot(epw, item):
    new_data = item.data()
    print new_data
    print item 
```

哪个打印

```
<PyQt4.QtGui.QStandardItem object at 0x07C5F930>
<PyQt4.QtCore.QVariant object at 0x07D331F0> 
```

在 IPython 会话中是否可以使用此内存地址获取对象？我在 Google 上没有看到任何内容，也许我的术语不对？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T18:17:18.903

您需要持有对对象的引用（即，将其分配给变量或将其存储在列表中）。

没有语言支持从对象地址直接到对象（即[指针解引用](http://en.wikipedia.org/wiki/Dereference_operator)）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-01T18:50:30.240

你几乎肯定问错了问题，而 Raymond Hettinger 的答案几乎肯定是你真正想要的。

尝试深入研究 CPython 解释器的内部结构以用于学习目的或对其进行审计以查找安全漏洞或其他东西时，这样的事情可能很有用……但即便如此，您最好还是将 Python 解释器嵌入到程序中并编写暴露的函数任何你想要的 Python 解释器，或者至少编写一个 C 扩展模块，让你操作 CPython 对象。

但是，如果你真的需要这样做……</p>

首先，甚至没有可靠的方法从`repr`. 大多数具有有用`eval`-able 表示的对象都会为您提供。例如，repr 的`('1', 1)`is `"('1', 1)"`， not `<tuple at 0x10ed51908>`。此外，即使对于没有有用表示的对象，返回`<TYPE at ADDR>`只是许多类型遵循的未说明约定（以及用户定义类的默认值），而不是您可以依赖的东西。

但是，由于您可能只关心 CPython，因此您可以依赖[`id`](http://docs.python.org/2/library/functions.html#id)：

> CPython 实现细节：这是对象在内存中的地址。

（当然，如果您有要调用`id`（或`repr`）的对象，则不需要通过指针取消引用它，如果您没有该对象，则它可能已被垃圾回收，因此没有什么可取消引用的，但也许您仍然有它，只是不记得你把它放在哪里了……）

接下来，你如何处理这个地址？好吧，Python 没有公开任何与`id`. 但是[Python C API](http://docs.python.org/2/c-api/index.html)是有据可查的——而且，如果你的 Python 是围绕一个共享库构建的，那么可以[`ctypes`](http://docs.python.org/2/library/ctypes.html)通过加载它来访问该 C API。实际上，`ctypes`提供了一个特殊的变量，可以自动加载正确的共享库来调用 C API `ctypes.pythonapi`，.

在非常旧的版本中`ctypes`，您可能必须显式查找并加载它，例如`pydll = ctypes.cdll.LoadLibrary('/usr/lib/libpython2.5.so')`（这适用于在 /usr/lib 中安装了 Python 2.5 的 linux；显然，如果这些细节中的任何一个不同，则确切的命令行会有所不同。）

当然，这样做会使 Python 解释器崩溃比做任何有用的事情要容易得多，但做任何有用的事情也不是不可能的，你可能会喜欢用它做实验。

# java - FileDialog中的保存格式下拉菜单

> ID：15748988
> 
> 赞同：0
> 
> 时间：2013-04-01T18:13:22.840
> 
> 标签：java, filedialog

我想创建一个保存对话框，用户可以在其中指定文件格式以通过名称字段下方显示的下拉菜单保存文件。我使用的是 FileDialog 类而不是 Swing 的 JFileChooser，因为它使用本机操作系统的保存对话框窗口，而不是自定义窗口（这在 Mac OS X 上尤其重要）。

我尝试将 FileNameFilter 添加到 FileDialog 框，但这似乎只在它处于加载模式而不是保存模式时才会影响它。有没有办法做到这一点？如果没有，是否有任何替代方案可以保留本机保存对话框的外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T11:42:10.810

我将 JFileChooser 用于保存对话框，并使用 UIManager 设置系统的原生外观。

要添加我想要保存的文件格式，我只需要将它硬编码到我的应用程序中。

例如。 `out = new FileOutputStream(chooser.getSelectedFile() +".xls");`

希望这可以帮助。