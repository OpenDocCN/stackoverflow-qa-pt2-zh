# StackOverflow 问答 13724000-13724999

# opencv - OpenCV：分割HSV图像并通过H通道扫描

> ID：13724003
> 
> 赞同：0
> 
> 时间：2012-12-05T13:10:15.930
> 
> 标签：opencv

当我想通过 H 通道扫描并在拆分 HSV 图像后打印其像素值时遇到问题。**问题是输出不是数字而是乱码。**

以下是我的代码（**使用 Opencv**）：

```
Mat hsv;
cvtColor(saveImage,hsv,CV_BGR2HSV);// convert BRG to HSV
vector<cv::Mat> v_channel;
split(hsv,v_channel);          //split into three channels
if (v_channel[0].data==0)      //channel[0] is Hue
{
    cout<<"Error getting the Hue***********"<<endl;
}

for (int i=0;i<hue.rows;i++)     //scan through Hue 
{
    for (int j=0;j<hue.cols;j++)
    {
        cout<<v_channel[0].at<uchar>(i,j)<<endl;
    }
} 
```

希望任何人都可以提供帮助。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:37:36.150

数据存储为字节，即字符，输出将字符解释为字符并尝试打印符号。简单地告诉它它们是整数

`cout<< (int) v_channel[0].at<uchar>(i,j)<<endl;`

# c# - 在非托管 C++ 项目中使用 C# COM -> 0x7697C41F (KernelBase.dll) 处的第一次机会异常

> ID：13724006
> 
> 赞同：7
> 
> 时间：2012-12-05T13:10:24.417
> 
> 标签：c#, .net, visual-c++, com, com-interop

我正在尝试从非托管 Visual C++ 解决方案中的 C# COM 项目调用方法，但我不断收到下一个错误

```
First-chance exception at 0x7697C41F (KernelBase.dll) in Program.exe: 0x04242420 (parameters: 0x31415927, 0x6F310000, 0x00BBDAE8). 
```

在下一段代码

```
SalesForceNew::IMyObjectClassPtr p;
p.CreateInstance(__uuidof(SalesForceNew::TestObject)); // error
SalesForceNew::MyObject mo = p->getObject(1, "a"); 
```

但是 的值`mo`与预期的一样（5，“aa”）。

我用这行代码导入 tlb 文件：

```
#import "C:\Users\Bob\Desktop\ComTest\SalesForceNew\bin\x86\Debug\SalesForceNew.tlb" named_guids 
```

C#项目如下：

界面：

```
using System.Runtime.InteropServices;

namespace SalesForceNew
{
    [ComVisible(true)]
    [Guid("22901ACD-CA30-4D3E-B84B-73B707026AE5")]
    public interface IMyObjectClass
    {
        MyObject getObject(int i, string s);
    }

    [ComVisible(true)]
    [StructLayout(LayoutKind.Sequential)]
    public struct MyObject
    {
        public int Getal;
        public string Text;
    }
} 
```

实现接口的类：

```
using System.Runtime.InteropServices;

namespace SalesForceNew
{
    [ClassInterface(ClassInterfaceType.None)]
    [Guid("234A2A35-F270-458D-A67B-C834EB794B27")]
    [ComVisible(true)]
    public class TestObject : IMyObjectClass
    {
        public MyObject getObject(int i, string s)
        {
            return new MyObject() { Getal = i * 5, Text = s + s };
        }
    }

} 
```

我检查了 C# COM 项目的选项`Register for COM interop`和`Make assembly COM-Visible`属性。

* * *

更新：如果我们将 C# COM 项目的 frameworkversion 更改为 2.0、3.0 或 3.5，则不会出现错误。它仅在 frameworkversion 为 4.0 或 4.5 时显示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T15:27:48.097

异常代码小于 0x80000000 的异常是非致命异常。它们往往被用来传递信息。鞋子适合这里，异常代码 0x04242420 已被逆向工程为 CLRDBG_NOTIFICATION_EXCEPTION_CODE，在谷歌查询中输入数字以查看命中。 [微软员工的这个回答](http://social.msdn.microsoft.com/Forums/eu/clr/thread/bca092d4-d2b5-49ef-8bbc-cbce2c67aa89)可能是最可靠的一个：

> 出于好奇，我做了一点挖掘，发现这实际上是一个未记录的异常 (CLRDBG_NOTIFICATION_EXCEPTION_CODE)，这显然是 4.0 CLR 中托管调试器使用的 IPC 协议的补充。忽略它应该是完全安全的。

# android - how to send notifications from a website to an android app

> ID：13724007
> 
> 赞同：10
> 
> 时间：2012-12-05T13:10:34.227
> 
> 标签：android, rest, web, notifications, android-notifications

I have made a website in html using a bit of javascript and php. I have made an android application using eclipse and java. what code or software or technique do i need to employ to allow my website to send notifications to my applications. And eventually send notifications from my app back to my website.

the aim one day is to send notifications from my website to a specific app on a specific android device.

Please answer my question or provide links to a solution. and excuse my ignorance as i am new to this.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:24:58.200

要向任何 android 设备发送通知，您可以使用两种技术：1) 推送。2）拉。

对于推送技术，您可以使用 GCM（Google 云消息传递）。

对于拉取技术，您可以使您的应用程序不断地连接到服务器并尝试从那里获取数据。

GCM 的优点：
1）电池消耗低。因为它将消息推送到用户设备，并且当用户连接到服务器时它会推送消息。

对于 GCM，您可以使用以下链接作为参考：
1) [http://developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)
2) [http://www.techrepublic.com/blog/app-builder/implementing- googles-cloud-to-device-messaging/428](http://www.techrepublic.com/blog/app-builder/implementing-googles-cloud-to-device-messaging/428)
3) [http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)
4) [https://github.com/teleknEsis/TechRepublic-Samples/tree/master/ C2DMS示例](https://github.com/teleknEsis/TechRepublic-Samples/tree/master/C2DMSample)

# ios - 是否可以从子类中推送视图控制器？

> ID：13724015
> 
> 赞同：0
> 
> 时间：2012-12-05T13:10:55.413
> 
> 标签：ios, uitableview, uinavigationcontroller, subclass

我创建了一个 navigationController 应用程序，它在堆栈中有一个子类，基本上如下所示：

*   根视图控制器
*   leaderboardViewController <----- 此 VC 中的 UITableView 设置为文件所有者
    *   UITableViewCell
        *   UICollectionView <-----这是我尝试推送新视图控制器的地方

在 UITableViewCell.m 文件中的 collectionView didSelect 方法中：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    userCell *user = (userCell *)[self.collectionView cellForItemAtIndexPath:indexPath];
    imageTag = ((UICollectionView *)user).tag;
    leaderboardViewController *leaderboardView = [[leaderboardViewController alloc] init];
    [imageManager getInsightWithCompletionBlock:^(UIImage *image){
          [leaderboardView postInfo];

    }];
} 
```

然后在 leaderBoardViewController.m 中是 postInfo 方法：

```
-(void)postInfo
{
    NSLog(@"posted!");
    largeInsight *detailedInsight = [[largeInsight alloc] initWithNibName:@"largeInsight" bundle:[NSBundle mainBundle]];
    [[self navigationController] pushViewController:detailedInsight animated:YES];        
} 
```

NSLog 出现在调试区域中，因此 postInfo 函数正在运行，但它只是不推送新的 viewController。我猜这是我错过的事情，或者我正在做我不应该做的事情......我不认为这是因为 UICollectionView 子类，因为我指的是 leaderboardViewController。我只是不知道为什么它没有运行navigationController 的代码。有没有人遇到过同样的问题？谢谢！

**更新**

在一些帮助下，我删除了新的实例变量`leaderboardViewController`并将其放入`NSNotificationCenter`VC 以在`postInfo`发送通知时运行该方法：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    userCell *user = (userCell *)[self.collectionView cellForItemAtIndexPath:indexPath];
    imageTag = ((UICollectionView *)user).tag;

    [imageManager getInsightWithCompletionBlock:^(UIImage *image){[[NSNotificationCenter defaultCenter] postNotificationName:@"PostCellInformation" object:self];
    }];
} 
```

然后在初始化collectionView的leadboardVC.m中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(postInfo) name:@"PostCellInformation" object:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:17:53.440

这条线...

```
leaderboardViewController *leaderboardView = [[leaderboardViewController alloc] init]; 
```

...创建. **_** `leaderboardViewController`由于它是新的，它不是控制显示的当前视图控制器层次结构的一部分。这意味着它推送的任何东西也不是当前显示层次结构的一部分。

（因此，我怀疑您`navigationController`的`nil`也在其中`postInfo`，但我想记录该值以确定。）

# c# - 遍历字典并获取每个值 C#

> ID：13724017
> 
> 赞同：0
> 
> 时间：2012-12-05T13:11:02.490
> 
> 标签：c#, c#-4.0

我正在使用以下代码来获取字典的每个值及其索引

```
foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key)))
{
     var wordFreq = entry.Value;
     ........
} 
```

为什么突然出错

> *当前上下文中不存在名称“条目”*

出现？？有人可以帮忙吗？

十分感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:13:08.163

`entry`在 lambda 中定义 - 在 to 参数中，`Select`并且仅在其范围内。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T13:14:56.127

要遍历字典元素，您所要做的就是：

```
foreach (var entry in freq)
{
    var wordFreq = entry.Value;
    ........
    ........
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T13:19:07.823

您正在字典上定义两个迭代器：`foreach`循环和`Select`操作。您可能应该将它们合并为一个：

```
foreach (var entry in freq)
{
    var termIndex = GetTermIndex(entry.Key);
    var wordFreq = entry.Value;
    // ........
    // ........
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T13:21:27.510

是`entry=>GetTermIndex(entry.Key)`lambda 函数。它具有与返回类型 GetTermIndex 方法相同的类型的传入参数“条目”和传出参数。

```
freq.Select(entry => GetTermIndex(entry.Key)) 
```

相当于：

```
foreach(var entry in freq)
{
    yield return GetTermIndex(entry.Key);
} 
```

入口第二个代码片段在foreach本地存在，不能在它之外访问。编译器告诉你。

您应该将代码重写为：

```
 foreach (var entry in freq)
        {
            var termIndex = GetTermIndex(entry.Key));
            var wordFreq = entry.Value;
            ........
            ........
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T13:20:49.170

你应该改变：

```
...
var wordFreq = entry.Value;
... 
```

到：

```
...
var wordFreq = termIndex.Value;
... 
```

因为 this 是 foreach 中的对象，所以 entry 在 lambda 表达式的范围内

# android - 如何在 X86 linux 中调用 android 动态库（.so）？

> ID：13724025
> 
> 赞同：2
> 
> 时间：2012-12-05T13:11:24.243
> 
> 标签：android, x86, arm

有一个预构建的 apk，我在 apk 的 lib 目录中获得了一些 .so 文件。我可以在 X86 平台调用这些 .so 文件吗？有qemu模拟器，可以运行arm linux。是否可以模拟arm PC，然后调用so库，并将结果返回给X86 PC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:01:00.507

英特尔有一个名为[libhoudini](https://www.google.com/search?q=libhoudini)的二进制翻译器。这用于在基于 Intel 的 Android 设备上运行包含 ARM 本机代码的 APK。- 只是你描述的情况。

![在此处输入图像描述](../Images/6bbd82bfffee1ad28d5fb49fcc5b9e8d.png)

# css - div边框重叠按钮边框，如何反转？

> ID：13724026
> 
> 赞同：0
> 
> 时间：2012-12-05T13:11:27.927
> 
> 标签：css, html, button, border

我遇到了css和边框的问题。我有[这个例子](http://jsfiddle.net/LLVtr/)运行良好，但我希望[这个](http://jsfiddle.net/GfENx/)以相同的方式工作，我的意思是“.current”按钮的右边框（白色）必须与“.simpleTabsContent”边框重叠，但它没有，它是在 div 边框后面。

我尝试使用 z-index，但没有任何更改。我尝试了很多东西，但没有任何效果。

CSS代码无法按我的意愿工作：

```
div.simpleTabs { width: 90px;float:left;padding: 0; }
ul.simpleTabsNavigation { margin: 10px -1px 0 0; padding:0; text-align:left;}
ul.simpleTabsNavigation li { list-style:none; display:inline; padding:0; }
ul.simpleTabsNavigation li button {
margin-bottom: 3px;width: 100%; color:#41635e; border:1px solid #6DA69D;
padding:3px 6px; background:#b6d2ce; font-size:12px; font-weight: bold;
text-decoration:none; font-family: Verdana; }
ul.simpleTabsNavigation li button:hover { background-color:#d3e4e1; }
ul.simpleTabsNavigation li button.current {
background:#ffffff; color:#6da69d; border-right:1px solid #ffffff;}
div.simpleTabsContent { border:1px solid #6DA69D; padding:0px 5px 5px 10px; }
#msg{float:left;  width:350px;  padding: 5px 10px;  margin-top:10px;}
#container{ margin: 0; width: 500px; position: relative;} 
```

CSS代码按我的意愿工作：

```
div.simpleTabs { padding: 5px 0 0 5px; }
ul.simpleTabsNavigation { margin:0 10px -1px 10px; padding:0; text-align:left; }
ul.simpleTabsNavigation li { list-style:none; display:inline; margin:0; padding:0; }
ul.simpleTabsNavigation li button {
color:#41635e; border:1px solid #6DA69D; padding:3px 6px; background:#b6d2ce;
font-size:12px; font-weight: bold; text-decoration:none; font-family: Verdana; }
ul.simpleTabsNavigation li button:hover { background-color:#d3e4e1; }
ul.simpleTabsNavigation li button.current {
background:#ffffff; color:#6da69d; border-bottom:1px solid #ffffff; }
div.simpleTabsContent { border:1px solid #6DA69D; padding:5px 15px }
#msg{ margin: 0 5px 5px 10px;}
#container{ margin: 0; float: left; width: 450px;  position: relative;} 
```

我会很感激一些帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:18:26.550

原始链接[http://jsfiddle.net/LLVtr/](http://jsfiddle.net/LLVtr/)在最新的 Chrome 中的按钮和消息之间存在间隙。通过在版本 2 中为消息添加边距将使其看起来相同。

添加到#msg

```
margin-left: 2px; 
```

结果：

[http://jsfiddle.net/GfENx/3/](http://jsfiddle.net/GfENx/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:26:33.087

这可以通过简单地为两个主要元素提供适当的 z-index 值来解决。要`div.simpleTabs`添加：

```
position:relative; z-index: 2; 
```

要`div.simpleTabsContent`添加：

```
position:relative; z-index: 1; 
```

现在`simpleTabs`div 与 div 重叠`simpleTabsContent`，这意味着您更改的边框现在可见。这是一个演示：http: [//jsfiddle.net/WEBnc/](http://jsfiddle.net/WEBnc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:16:38.353

```
div.simpleTabs { position: relative; width: 90px;float:left;padding: 0; z-index: 1; margin-right: -1px;}

ul.simpleTabsNavigation { margin: 10px 0px 0 0; padding:0; text-align:left;}

ul.simpleTabsNavigation li { list-style:none; display:inline; padding:0; }

ul.simpleTabsNavigation li button { 
    margin-bottom: 3px;width: 100%; color:#41635e; border:1px solid #6DA69D; 
    padding:3px 6px; background:#b6d2ce; font-size:12px; font-weight: bold; 
    text-decoration:none; font-family: Verdana; }

ul.simpleTabsNavigation li button:hover { background-color:#d3e4e1; }

ul.simpleTabsNavigation li button.current { 
    background:#ffffff; color:#6da69d; border-right: 1px solid #fff;}

div.simpleTabsContent { border:1px solid #6DA69D; padding:0px 5px 5px 10px; }

#msg{float:left;  width:350px;  padding: 5px 10px;  margin-top:10px;}

#container{ margin: 0; width: 500px; position: relative;
}
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:21:39.897

```
div.simpleTabs { width: 90px;float:left;padding-right: 3px; } 
```

而不是填充：0；我已将其设置为 padding-right:3px;

[http://jsfiddle.net/VS7fn/](http://jsfiddle.net/VS7fn/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:33:48.317

```
div.simpleTabs { width: 90px;float:left;padding-right: 0px; position: absolute;}

ul.simpleTabsNavigation { margin: 10px -1px 0 0; padding:0; text-align:left;}

ul.simpleTabsNavigation li { list-style:none; display:inline; padding:0; }

ul.simpleTabsNavigation li button {
    margin-bottom: 3px;width: 100%; color:#41635e; border:1px solid #6DA69D;
    padding:3px 6px; background:#b6d2ce; font-size:12px; font-weight: bold;
    text-decoration:none; font-family: Verdana; }

ul.simpleTabsNavigation li button:hover { background-color:#d3e4e1; }

ul.simpleTabsNavigation li button.current {
    background:#ffffff; color:#6da69d; border-right:1px solid #ffffff;}

div.simpleTabsContent { border:1px solid #6DA69D; padding:0px 5px 5px 10px; }

#msg{float:left;  width:350px;  padding: 5px 10px;  margin-top:10px; margin-left:90px;}

#container{ margin: 0; width: 500px; position: relative;
} 
```

它会为你工作。

# android - how to get current visible android.support.v4.app.Fragment in robotium

> ID：13724031
> 
> 赞同：1
> 
> 时间：2012-12-05T13:11:32.670
> 
> 标签：android, robotium

I am using robotium 3.6 and I want to get the current visible fragment of `android.support.v4.app.FragmentActivity`. How to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:13:13.443

假设您实际上正在使用 FragmentActivity，那么 solo.getCurrentActivity() 应该返回您想要的活动，但它将被强制转换为活动，您需要将其强制转换为普通 java 中的 android.support.v4.app.FragmentActivity方法：

```
android.support.v4.app.FragmentActivity fragmentActivity = (android.support.v4.app.FragmentActivity) solo.getCurrentActivity(); 
```

如果你在 tabhost 或类似的地方有这个，这可能不起作用。

# java - 将java代码转换为jar文件后在哪里包含日志属性文件

> ID：13724034
> 
> 赞同：0
> 
> 时间：2012-12-05T13:11:40.377
> 
> 标签：java, tomcat, jar, log4j

我编写了包含许多 java 文件的 java 包。

在eclipse中工作时会创建日志文件，但我将其转换为jar文件并将其放在apache tomcat中并将日志属性文件包含在classes文件夹中......

但是没有生成日志......建议我应该在哪里包含日志属性文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:19:44.647

[从http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)读取：

> 默认的 log4j 初始化在 web 服务器环境中特别有用。在 Tomcat 3.x 和 4.x 下，您应该将 log4j.properties 放在您的 Web 应用程序的 WEB-INF/classes 目录下。Log4j 将找到属性文件并对其进行初始化。这很容易做到并且有效。

希望这可以帮助！

# asp.net - VS2010 ASP.NET 入门项目

> ID：13724040
> 
> 赞同：0
> 
> 时间：2012-12-05T13:12:00.500
> 
> 标签：asp.net, visual-studio-2010, templates

我正在尝试创建一个 ASP.NET 网站，我想从这里的模板开始： [http ://weblogs.asp.net/scottgu/archive/2009/08/26/starter-project-templates-vs -2010-and-net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/08/26/starter-project-templates-vs-2010-and-net-4-0-series.aspx)

我过去使用过这个模板，但由于某种原因，我目前使用的计算机没有它。实际上，当我选择*File->New Web Site...*时，我得到的选项比该站点上显示的要少得多（例如，我无法制作“AJAX 服务器控件”）。

谁能指导我如何将这些功能添加到 Visual Studio 中？我需要安装插件吗？

我正在使用安装了 SP1 的 VS2010。安装了 .NET 4.0 的 Windows XP。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:21:55.023

在某些情况下（微软喜欢让简单的事情变得复杂）模板没有正确部署。

您可以尝试`devenv.exe /setup`从提升的命令行运行。这将重建模板缓存。这将从模板档案中提取所有模板文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:15:05.163

根据您在安装过程中选择的选项，您的可用选项可能会少很多。

您可能需要安装这些额外的项目，您可以重新安装 VS 并在安装期间选择可用选项，或者转到文件> 新项目.. 并选择左侧的“在线模板”按钮并搜索您想要的项目安装。

# android - Using WebView for multi-page login to website and fetch data

> ID：13724049
> 
> 赞同：3
> 
> 时间：2012-12-05T13:12:28.613
> 
> 标签：android, android-webview, android-jsinterface

I'm building an Android app as a mobile client for a website that does not (and will not) have it's own UI for mobile browsers. My chosen architecture uses a hidden WebView which I initialise (loadURL) with the login page, and then I load JavaScript to populate the login pages (there are two) with the user's name, password and other credentials. Once logged in, I'll navigate to a new URL and then use a JavaScriptInterface to extract sections of HTML from the pages for parsing and use in my app, following the tutorial here: [http://lexandera.com/2009/01/extracting-html-from-a-webview/](http://lexandera.com/2009/01/extracting-html-from-a-webview/)

My Webview has a JavaScriptInterface class with 3 methods:

```
class MyJavaScriptInterface {
  @JavascriptInterface
  public void method1(String html) { // do something }
  @JavascriptInterface
  public void method2(String html) { // do something }
  @JavascriptInterface
  public void method3(String html) { // do something }
} 
```

and

```
WebSettings ws = getSettings();
ws.setSaveFormData(false);
ws.setJavaScriptEnabled(true);
addJavascriptInterface(new MyJavaScriptInterface(), "HTMLOUT"); 
```

This scripting of the website is done in my WebView's WebViewClient.onPageFinished method, which checks the current URL and then executes the next step in the login/browsing process. i.e.

```
setWebViewClient(new WebViewClient() {
  @Override
  public void onPageFinished(WebView view, String url) {

  String javascript;

  if (url.contentEquals(<first login page>) {
  javascript = "javascript:document.forms['aspnetForm'].elements[<my element>].value = <email address>;";
  javascript += "document.getElementById(<id of Submit button>).click();";
  view.loadUrl(javascript);
  } 
  if (url.contentEquals(<second login page>) {
  view.loadUrl(<javascript to enter further credentials and click Submit>);
  }
  if url.contentEquals(<welcome page>) {
  view.loadUrl(<javascript to call JavaScriptInterface method1 with selected HTML>);
  view.loadUrl(<javascript to call JavaScriptInterface method2 with selected HTML>);
  view.loadUrl(<another page>);
  }
  if (url.contentEquals(<another page>) {
  view.loadUrl(<javascript to call JavaScriptInterface method3 with selected HTML>);
  }
  } 
```

My problem is that when running the app, the onPageFinished callback doesn't always get called for every page, so the process stalls. But when I debug in Eclipse/ADT, and single-step through the code, it seems to work perfectly every time and all the page navigation works and the JavascriptInterface methods get called.

Is there some thread or race condition issue to be considered here? Is there a better -more reliable and/or easier - way to architect this?

# c# - Fluent NHibernate 一对一保存

> ID：13724051
> 
> 赞同：0
> 
> 时间：2012-12-05T13:12:32.837
> 
> 标签：c#, oracle, nhibernate, fluent-nhibernate, fluent

我有 3 节课：

```
public class WorkEntity
{
    public virtual int WorkId { get; set; }
    public virtual OrderExtensionEntity OrderExtension { get; set; }
}

public class OrderExtensionEntity
{
    public virtual int Id { get; set; }
    public virtual WorkEntity Work { get; set; }
    public virtual IList<IssueInformation> Issues { get; set; }
}

public class IssueInformationEntity
{
    public virtual int Id { get; set; }
    public virtual long WorkId { get; set; }
} 
```

它们被映射：

```
public class WorkMap : ClassMap<WorkEntity>
{
    public WorkMap()
    {
        Id(x => x.WorkId).Column("ID_ZLECENIE").GeneratedBy.Sequence("SEQ_TAE_ZLECENIE");
        HasOne(x => x.OrderExtension).Constrained();
     }
}

public class OrderExtensionMap : ClassMap<OrderExtensionEntity>
{
    public OrderExtensionMap()
    {
        LazyLoad();

        Id(x => x.Id).Column("ID_ZLECENIE").GeneratedBy.Foreign("Work");
        HasMany(x => x.IssueInformation).KeyColumn("FK_ZLECENIE");
    }
}

public class IssueInformationMap : ClassMap<IssueInformationEntity>
{
    public IssueInformationMap()
    {
       Id(x => x.Id).Column("ID_ZAD_ROZ_ADRES").GeneratedBy.Sequence("SEQ_ZAD_ROZ_ADRES");

        Map(x => x.WorkId).Column("FK_ZLECENIE").Not.Nullable();
    }
} 
```

当我在数据库 (Oracle) 上创建记录时，我可以从表中获取所有信息。但我无法使用以下方法保存 OrderExtensionEntity：

```
var orderExtension = new OrderExtension();
orderExtension._some_variables_like_strings_to_be_saved_

Session.SaveOrUpdate(orderExtension) 
```

如果我尝试这样做，它会告诉我“未解决的财产工作”和其他一些错误：

```
orderExtension.Work = new WorkEntity() { WorkId = 12345 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:30:15.513

试试这个映射。这就是我的一对一关系的样子。

```
public class WorkMap : ClassMap<WorkEntity>
{
    public WorkMap()
    {
        Id(x => x.WorkId).Column("ID_ZLECENIE").GeneratedBy.Sequence("SEQ_TAE_ZLECENIE");
        HasOne(x => x.OrderExtension)
            .Cascade.All();
     }
}

public class OrderExtensionMap : ClassMap<OrderExtensionEntity>
{
    public OrderExtensionMap()
    {
        LazyLoad();

        Id(x => x.Id).Column("ID_ZLECENIE").GeneratedBy.Foreign("Work");
        HasOne(x => x.Work).Constrained();
        HasMany(x => x.IssueInformation).KeyColumn("FK_ZLECENIE");
    }
} 
```

# python - 将文件数据从函数导入列表

> ID：13724053
> 
> 赞同：1
> 
> 时间：2012-12-05T13:12:35.693
> 
> 标签：python, file, list, function

我需要使用某些服务器的 IP 和主机名创建重复的配置文件。该数据包含在一个大列表中，类似于所包含的模拟数据；

```
192.168.0.1 -   data    info    hosta
192.168.0.2 -   data    info    hostb
192.168.0.3 -   data    info    hostc
192.168.0.4 -   data    info    hostb 
```

此数据包含我不想要的任意信息，例如以下项目，'

```
-   data    info    ' 
```

我的想法是我可以将拆分数据读入一个列表。然后我将能够遍历列表，仅指定要显示的列表中的每个编号元素，只留下；

```
192.168.0.1
192.168.0.2
... 
```

然后将其放入仅包含 IP 地址的新列表中。

我创建了一个将文件读入列表的函数

```
def importlines():
    mf = open('C:\\scripts\\nagios\\filename.txt','r')
    lines = mf.read().split()
    print(lines)
mf.close()

#the data is read in correctly
#I then attempted to create a blank list
hosts = []

#then append the output from the function call to the list
hosts.append(importlines()) 
```

但是，这会导致“无”，如果我再次执行 hosts.append(importlines())，我会遇到无，无。所以它似乎是在列表中附加一个不包含任何内容的元素。我试过执行 hosts.append(print(importlines())) 但是我有同样的问题。

如您所知，我是您可能描述为偶然的系统管理员，并且在这方面没有经验。我也知道这将创建一个大列表的问题，在我的脑海中，我相信我需要一个包含每一行列表的列表。我在这里不正常吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:14:40.830

您正在拆分整个文件，而不是每一行。此外，您的函数仅*打印*，它实际上并不用于`return`将结果返回给调用者。

```
def importlines():
    with open('C:/scripts/nagios/filename.txt') as mf:
        return [l.split()[0] for l in mf] 
```

将*只*返回一个 IP 地址列表。您可以将结果直接分配给`hosts`：

```
hosts = importlines() 
```

您自己的代码在 中没有返回任何内容`importlines()`，python 函数的默认返回值为`None`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T13:16:37.853

你必须从函数中返回一些东西。print() 语句不返回任何内容。尝试这样的事情：

```
定义导入线（）：
    toRet = []
    mf = open('C:\\scripts\\nagios\\filename.txt','r')
    行 = mf.read().split()
    对于行中的行：
        toRet.append(行[0])
    返回Ret

```

# ruby-on-rails - no encode delegate for this image format @ error/constitute.c/WriteImage/1153

> ID：13724057
> 
> 赞同：1
> 
> 时间：2012-12-05T13:12:44.247
> 
> 标签：ruby-on-rails, amazon-s3, amazon-web-services, imagemagick, rmagick

I'm using Paperclip, ImagMagick, Rmagick, Amazon-s3

I'm getting this error when getting an image from url and after custom resizing image replacing the changed image to amazon.

Magick::ImageMagickError (no encode delegate for this image format `//s3.amazonaws.com/beu-dev/temp_images/final_images/000/000/377/original/template_37720121205-5921-99989h.png' @ error/constitute.c/WriteImage/1153): app/models/temp_image.rb:38:in`write' line#38 is last line before end of this method

```
def reprocess_final_image
    image_file_url = self.final_image.url(:original).split('?')[0]
    thumb = Magick::Image.read(image_file_url).first
    thumb.format = "PNG"
    thumb.crop_resized!(240,200, Magick::NorthWestGravity)
    **thumb.write(image_file_url)** ***Line#38***
  end 
```

Note: One more thing This code works perfectly when using system file system, but when started using amazon s3 Error happening

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T05:00:29.507

问题解决了。
1.勾选“识别-列表格式”

如果您在列表中没有看到**.jpeg 格式**。然后您需要添加**.jpeg 库**。

curl -O [http://www.ijg.org/files/jpegsrc.v8c.tar.gz](http://www.ijg.org/files/jpegsrc.v8c.tar.gz)

```
tar zxvf jpegsrc.v8c.tar.gz
cd jpeg-8c/
./configure
make 
```

Sudo make install
现在重新安装**imagemagick**然后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:18:38.803

我认为您需要使用本地文件名而不是 URL。Imagemagick 不能只通过 http 将文件写入 URL。要替换源文件，您需要使用 Amazon S3 API。

```
thumb.crop_resized!(240,200, Magick::NorthWestGravity)
thumb.write(local_temp_file_name)

# abstract Amazon S3 API. Use your favorite API
S3Object.store(local_temp_file_name, open(local_temp_file_name)) 
```

# android - Cant parcel a recycled bitmap error

> ID：13724061
> 
> 赞同：5
> 
> 时间：2012-12-05T13:12:47.180
> 
> 标签：android

I am trying to add image to camera surfaceview and tried to get that image by using the following code.

```
 else if(v.equals(findViewById(R.id.ok_button))){
//                saveImage();

                topbar.setVisibility(View.GONE);
                menubar.setVisibility(View.GONE);
                bottom.setVisibility(View.GONE);

                View s = ml.getRootView();
                s.setDrawingCacheEnabled(true);

                Bitmap b = s.getDrawingCache();

                Bitmap watermarkimage=b;
                s.setVisibility(View.GONE);
                Log.e("ok","ok");
                Intent i=new Intent(CameraActivity.this,Update.class);
                 i.putExtra("data",watermarkimage);
                 startActivity(i);
                 finish();
                 } 
```

I saved the whole activity to get the image.And by using the following code I got the Bitmap

```
 View s = ml.getRootView();
                s.setDrawingCacheEnabled(true);

                Bitmap b = s.getDrawingCache(); 
```

When I tried to send this bitmap to Another Activity I am getting this error

```
12-05 17:58:38.700: E/AndroidRuntime(10590): FATAL EXCEPTION: main
12-05 17:58:38.700: E/AndroidRuntime(10590): java.lang.IllegalStateException: Can't parcel a recycled bitmap
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.graphics.Bitmap.checkRecycled(Bitmap.java:210)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.graphics.Bitmap.writeToParcel(Bitmap.java:960)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.os.Parcel.writeValue(Parcel.java:1070)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.os.Parcel.writeBundle(Parcel.java:502)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.content.Intent.writeToParcel(Intent.java:5492)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1341)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1374)
12-05 17:58:38.700: E/AndroidRuntime(10590):    at android.app.Activity.startActivityForResult(Activity.java:2873) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:07:32.757

尝试制作此位图的副本或克隆并将副本打包。

```
Bitmap watermarkimage = b.copy(b.getConfig(), true); 
```

我会冒险猜测 getDrawingCache 返回的数据与 b 和 watermarkimage 共享。所以也许 setVisible to Gone 导致它被回收。

# mysql - 如何替换或更新表中的现有值

> ID：13724062
> 
> 赞同：0
> 
> 时间：2012-12-05T13:12:50.530
> 
> 标签：mysql, sql

我将一个访问数据库导入mysql。mysql 数据库用于使用 asp.net mvc 3 构建我的应用程序。由于我的访问值已更改，我正在寻找一种更新 mysql 数据库的方法。

我的表有超过 70 000 条记录。我已将我的访问数据库导入 mysql 中的另一个表。现在我如何将这些值从一个 mysql 表更新到另一个表，如果有新记录也添加它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:15:03.633

试试这个格式::

```
update
table1 inner join table2 on (//join condition)

set table1.column1=table2.column2

where // the clause 
```

# r - if/else 构造内部和外部函数

> ID：13724063
> 
> 赞同：24
> 
> 时间：2012-12-05T13:12:52.530
> 
> 标签：r, if-statement

当我查看 R 函数时，我经常会发现以下结构：

```
f <- function(exp=T) {
  if (exp)
    a <- 1
  else
    a <- 2
}
f()
f(F) 
```

这将毫无错误地运行。但是执行内部函数代码会引发错误，因为 R 可能假定语句在第一次赋值后完成`a <- 1`并且无法处理以下 else。

```
exp=T
if (exp)
  a <- 1
else
  a <- 2 
```

现在，这对我来说很有意义，但我仍然想了解为什么在函数内部或外部执行时，执行代码的行为会有所不同。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-14T20:40:30.137

**执行摘要：**

R 只有两种方法可以知道 else 子句属于它上面的 if 子句：

1.  整个 if...else 语句（可能还有其他语句）都用大括号括起来；
2.  else 一词与 if 子句的结尾出现在同一行。

**证据：**

上面的讨论对我有帮助，但我希望我能提供一个有用的狡辩。是的，这是正确的

```
f <- function (exp)
    if (exp)
        1  
    else
        2 
```

由于 R 未能继续阅读超过 1 ，经典`Error: unexpected 'else' in "else"`消息失败。已正确提供了两种方法来使 R 继续阅读超过 1：

```
f <- function (exp) {
    if (exp)
        1  
    else
        2
} 
```

和

```
f <- function (exp) if (exp) 1 else 2 
```

但是还有第三种方法还没有提到——`else`向上移动一条线。因此，以下内容也有效，因为 R 知道继续阅读 1：

```
f <- function (exp)
    if (exp)
        1  else
        2 
```

我认为关键是要么支撑整个函数体，要么确保它`else`与 if 子句的末尾出现在同一行，以便 R 知道继续阅读。这就是单线解决方案有效的原因。这也是为什么它有效的原因：

```
f <- function (exp)
    if (exp) {
        1
    } else
        2 
```

但这失败了：

```
f <- function (exp)
    if (exp) {
        1
    }  
    else
        2 
```

并且使用更标准的函数体支撑，这也有效：

```
f <- function (exp) {
    if (exp) {
        1
    }  
    else
        2
} 
```

但是我们是否正在构建一个函数是一个红鲱鱼。重要的只是大括号和`else`. 因此，这些工作：

```
{
    if (exp) {
        1
    }  
    else
        2
}

if (exp) {
    1
} else
    2 
```

但这失败了：

```
if (exp) {
    1
} 
else
    2 
```

并在顶部展示我的断言 1，这是有效的：

```
{
x <- 4
if (exp) 
    1
else
    2
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-05T13:16:52.003

这是使用交互式 shell ( [REPL](https://en.wikipedia.org/wiki/REPL) ) 运行脚本的结果：

在第一个分支之后，shell 已经看到了一个完整的语句，因此它假定您已经完成了输入。不幸的是，R 使用相同的 shell 来解释脚本，即使它们不是以交互方式输入的——所以即使你将`if`语句保存到文件中并且`source`它（或将其通过管道传输到 R 中）你也会在`else`分支上得到错误。

但以下将正常工作：

```
if (exp) a <- 1 else a <- 2 
```

在这里，解释器吞下该行并执行它。

在你的函数中，人们会假设这同样适用——<em>确实如此！但是，在您的情况下，函数*本身*以左大括号开头，因此 R 必须读取直到找到匹配的右大括号。相比之下，采用以下函数声明：

```
f <- function (exp)
    if (exp)
        a <- 1
    else
        a <- 2 
```

在 R 中，您可以在主体周围定义没有大括号的函数。`if`但是上面的代码将失败，原因与没有大括号的独立失败的原因相同。相比之下，如果我`if`在单行上编写了该代码，则该代码将再次起作用。

顺便说一句，您的函数使用对未使用变量的赋值。您可以（应该）执行以下操作：

```
f <- function (exp) {
    if (exp)
        1
    else
        2
} 
```

......`if`在外壳内使用时也是如此：

```
a <- if (exp) 1 else 2 
```

因为在 R 中，`if`是一个返回值的*表达式。*

# sql - select all users that have only one order and that order meets some criteria

> ID：13724064
> 
> 赞同：2
> 
> 时间：2012-12-05T13:12:53.477
> 
> 标签：sql, tsql, sql-server-2005

I have table containing users like so:

```
user_id | status
----------------
1       | 1
2       | 2
3       | 1
4       | 1 
```

And table containing orders

```
order_id | user_id | status
---------------------------
1        | 1       | 1
2        | 2       | 1
3        | 2       | 2
4        | 2       | 1
5        | 3       | 1 
```

And table containing ordered products

```
order_id | cash
----------------
1        | 10
1        | 20
1        | 10
2        | 10
3        | 10
3        | 10 
```

What I need to select are all users that have status=1 and have exactly one order and that order must have status=1 and sum of all products for that order must be >=30.

So for above data query should return only user with id=1

I've managed to write select procedure but it isn't working fast:

```
SELECT user_id
FROM   users US
WHERE  status = 1
       AND (SELECT Count(*)
            FROM   orders ORD
            WHERE  ORD.user_id = US.user_id) = 1
       AND (SELECT Count(*)
            FROM   orders ORD
            WHERE  ORD.user_id = US.user_id
                   AND ORD.status = 1) = 1
       AND (SELECT Sum(PRO.cash)
            FROM   products PRO
                   JOIN orders ORD
                     ON PRO.order_id = ORD.order_id
            WHERE  ORD.user_id = US.user_id) > 30 
```

I would like to improve this a bit so I won't have to use so much inner selects

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:20:04.813

您通常可以通过将查询从`where`子句移动到`joins`：

```
select  u.user_id
from    Users u
join    Orders o
on      o.user_id = u.user_id
join    Producs p
on      p.order_id = o.order_id
group by
        u.user_id
having  min(u.status) = 1 -- there's only 1 user, so min() is safe
        and count(distinct o.order_id) = 1
        and min(o.status) = 1 -- there's only 1 order, so min() is safe
        and sum(p.cash) > 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:18:02.260

```
SELECT USER_ID
  FROM (SELECT US.USER_ID, SUM (PRO.CASH) CASH
          FROM USERS US, ORDERS ORD, PRODUCTS PRO
         WHERE US.USER_ID = ORD.USER_ID AND ORD.ORDER_ID = PRO.ORDER_ID AND US.STATUS = 1 AND ORD.STATUS = 1)
 WHERE CASH > 30 
```

# php - MySQL select statement not returning rows

> ID：13724067
> 
> 赞同：0
> 
> 时间：2012-12-05T13:12:59.720
> 
> 标签：php, mysql

I have a simple SELECT statement that I'm using in PHP:

```
$vote=mysql_query("SELECT * FROM `votes` where username = '$big_hand_username' AND 
`voter` = '$user_name'"); 
```

When using this statement I don't get any rows returned. I should get 1 row returned. I only have one row in the votes table and it contains the username field that matches variable $big_hand_username. $big_hand_username & $user_name both contain data and I've echoed them out to make sure.

However, when I just select all from votes table I get 1 row returned, which you'd expect. I can also select all from another table using the same variable:

```
$vote=mysql_query("SELECT * FROM `users` where username = '$big_hand_username'"); 
```

This returns 1 row, which you'd expect as it contains a row containing the matching the field username.

I just can't understand why I can't get a row returned from votes table using the first select statement. Am I missing something? Could it be something to do with construction of the table? I've also tried running through while loop after the select statement but can't see anything wrong. Any pointers would be helpful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:15:22.237

尝试这个

```
$vote=mysql_query("SELECT * FROM `votes` where username = '".$big_hand_username."' AND 
voter = '".$user_name."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:54:29.123

尝试波纹管

```
$sql="
        SELECT * FROM votes 
        WHERE username = '{$big_hand_username}' 
        AND voter = '{$user_name}'
    ";
echo $sql; // for debuging also user_name,big_hand_username check
// for preventing sql-injection
$vote=mysql_query($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:34:50.013

尝试这个

```
$vote = mysql_query("
            SELECT * FROM votes 
            WHERE username = '{$big_hand_username}' 
            AND voter = '{$user_name}'
        "); 
```

# java - 如何从码头下的 web-app.war 获取 lib.jar 的类实例？

> ID：13724069
> 
> 赞同：0
> 
> 时间：2012-12-05T13:13:03.373
> 
> 标签：java, maven, jetty

我有两个 Maven 模块。第一个模块包含实用程序类并与数据库、属性文件一起使用，还启动嵌入式码头服务器。构建后它由 lib.jar 表示。

第二个模块是 web-app（一些 web UI 表单），它使用（至少我想使用）第一个模块中的实用程序类来用数据填充 web 表单。

嵌入式码头服务器运行构建在第二个模块中的 web-app.war。

结果文件夹结构（码头使用它）如下：

```
webapp
|/bin [script to launch jetty -> it calls jetty launch methods from lib.jar]
|/data [data (config, properties files) that is read out by classes from lib.jar]
|/libs [lib.jar and other libs are here]
|/web [web-app.war is here] 
```

我想要做的是使用上面的文件夹结构从 web-app.war 访问 lib.jar 中的实用程序类，并通过其中的公共接口获取数据。有什么办法吗？

如果仍然含糊不清，我将重新提出问题。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:16:01.873

由于您正在嵌入工作，因此您应该有一个 WebAppContext 实例，您可以在该实例上使用 setExtraClassPath() 更改类路径设置......或者简单地将 setParentLoaderPriority() 设置为 true 也应该可以工作。方法名可能有点偏，代码不在我面前。

# node.js - 使用 Node.js 创建带有 oauth 的 RESTful Web 服务

> ID：13724071
> 
> 赞同：4
> 
> 时间：2012-12-05T13:13:15.710
> 
> 标签：node.js, rest, oauth

我想用 Node.js 的 OAuth 创建一个 RESTful 网络服务，但我不知道从哪里开始。

我的意思是我想制作自己的服务器（像 Google 或 Facebook 那样）。例如：你做一个App，当你的App想要获取某个Facebook用户的资源或授权时，它必须向Facebook发送一个request_token，然后取回一个access_token。然后我创建另一个客户端来从我之前创建的服务器获取 request_token 和 access_token。

也许我的问题出现了一些错误，因为我是这个话题的新手。希望有人能理解我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T17:57:45.667

在启动自己的 RESTful 服务器之前，您需要阅读大量内容，在这个[答案](https://stackoverflow.com/questions/13516622/php-rest-api-authorization-for-client-applications/13518924#13518924)中寻找有关 api 服务器的理论。

然后你会看到工具/包满足你的需求，也许你可以看看那些：

*   [node-oauth2-provider](https://github.com/ammmir/node-oauth2-provider)：当应用程序要求您访问数据的权限时，提供与 facebook 一样的授权过程。
*   [express](https://github.com/visionmedia/express)：Web 应用程序框架。
*   [猫鼬](https://github.com/LearnBoost/mongoose)：将帮助您进行模式验证/查询等，如果您想要一个不太完整的解决方案，请参阅[mongolian](https://github.com/marcello3d/node-mongolian)
*   尝试找出您至少需要那些集合、应用程序、用户、数据的集合（或您将存储数据的主要集合，也可以是产品、帖子等）。

**2012-12-28 更新**

看看[actionHero](http://actionherojs.com/)，它是一个用于 tcp 套接字、Web 套接字和 http 客户端的 node.js API 框架。actionHero 的目标是创建一个易于使用的工具包，用于制作可重用和可扩展的 API。actionHero 提供集群支持、共享缓存、集成延迟处理等。

# css - 为什么我的 DIV 高度为零？

> ID：13724074
> 
> 赞同：0
> 
> 时间：2012-12-05T13:13:26.990
> 
> 标签：css, html

我有一个 div 居中在另一个 div 中，其中包含我的页面内容（在这种情况下，是一个包含一些信息的表格）但是，我无法让它显示背景图像，因为它的高度不会扩展到它的表格的高度包含。有人能告诉我为什么吗？

```
<div>
    <div style="width: 900px; margin: auto; border: 1px solid #F00;">
        <table align="right">
            <tr><td>Something to make the hight of the container not zero</td></tr>
        </table>
    </div>
</div> 
```

**更新**

我道歉，我省略了`align = "right"`表格元素（并在下面回答了我的问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:38:33.963

**问题解决了**

一旦你把属性`align = "right"`放在你的表格元素上，它就会把它变成一个浮动元素（相当于 style 属性`float: right`。浮动元素被认为不占用高度，因为它们是浮动的......因此包含的高度div 保持为零。

感谢您的投入，我再次为遗漏道歉。

# c++ - Boost::spirit 在规则中使用织物方法

> ID：13724078
> 
> 赞同：1
> 
> 时间：2012-12-05T13:13:37.643
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在使用 boost::spirit 为简单的脚本语言构建解析器。在一条规则中，我想使用对结构方法的调用来创建一个新对象，该对象是该规则的返回值。

规则是

```
qi::rule<Iterator, NodeHandle(), Skipper>      value; 
```

并定义为

```
value = ( '%' >> +(qi::alpha) >> '%')
        [phoenix::bind(&CreateVarNode, qi::_val, qi::_1)]; 
```

实际上，这些“NodeHandles”是通过这些方法构建的

```
NodeHandle CreateVarNode(std::wstring var)
{
    Node::ptr node(new VarTerminal(var));
    return NodeHandle(node);        
} 
```

问题是，这种精神不喜欢这种规则结构。您能帮我了解如何实现使用此结构方法返回此对象的规则吗？

谢谢！

干杯，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:13:06.253

假设工厂函数实际上是命名空间级函数：

```
namespace Factories
{
    NodeHandle CreateVarNode(std::wstring var)
    {
        Node::ptr node(new VarTerminal(var));
        return NodeHandle(node);        
    }
} 
```

这应该很好地工作：

```
value = ( '%' >> +(qi::alpha) >> '%')
        [qi::_val = phoenix::bind(&Factories::CreateVarNode, qi::_1)]; 
```

如果它实际上是一个名为`Factories`. 您还可以实现一些便利并将其编写为：

```
value = ( '%' >> +(qi::alpha) >> '%') [ createvar ]; 
```

这需要一些管道才能使用 Phoenix 功能。完整样本：

```
#define BOOST_SPIRIT_USE_PHOENIX_V3

#include <boost/spirit/include/qi.hpp>
namespace qi  = boost::spirit::qi;
namespace phx = boost::phoenix;

struct VarNode    { VarNode    (std::string        ){ /*todo*/ }  } ;
struct LitNode    { LitNode    (double             ){ /*todo*/ }  } ;
struct Assignment { Assignment (std::string, double){ /*todo*/ }  } ;

struct Node { typedef Node* ptr; };
struct NodeHandle { /*todo*/ };

template <typename ProductNode>
struct NodeFactory
{
    template<typename... T> struct result { typedef NodeHandle type; };

    template<typename... T>
        NodeHandle operator()(T&&... a) const
        {
            Node::ptr node(new ProductNode(std::forward<T>(a)...));
            return NodeHandle(node);
        }
};

int main ()
{
    static const phx::function<NodeFactory<VarNode> >    createvar;
    static const phx::function<NodeFactory<LitNode> >    createliteral;
    static const phx::function<NodeFactory<Assignment> > createassign;

    qi::rule<std::string::const_iterator, NodeHandle()> value 
        = ( '%' >> +(qi::alpha) >> '%') [createvar];

    const std::string input("%a%");
    auto f=begin(input), l=end(input);
    assert(qi::parse(f, l, value));
} 
```

# python - 如何使用 Mechanize 从表格的最后一列中提取 URL，其中该行包含某些单词

> ID：13724083
> 
> 赞同：1
> 
> 时间：2012-12-05T13:14:03.947
> 
> 标签：python, mechanize, mechanize-python

我正在尝试为我维护的内部票务系统自动执行一些繁琐的 Web 任务。有一个页面，其中包含一个自动生成的完整的邮件服务器配置表。每行用于不同的邮件服务器，每行的最后一列包含 2 个链接，如果该行中的第一列与特定单词匹配，我需要能够提取第一个链接。我正在尝试使用 mechanize 在 python 中执行此操作。

该表的名称如下：

```
<table id="pop-mail-servers-table" class="aui aui-table-rowhover"> 
```

有问题的行如下所示：

```
 <tr>
                    <td>
                        <span class="mail-server-name">
                            <strong>testhandler-mcfake</strong>
                        </span>
                                                        <div class="description"></div>
                                                </td>
                    <td>
                        <ul class="item-details">
                            <li>
                                <dl>
                                    <dt>Host:</dt>
                                    <dd><span class="mail-server-host">fake.mail.server</span></dd>
                                </dl>
                                <dl>
                                    <dt>Username:</dt>
                                    <dd><span class="mail-server-username">testhandler-mcfake</span></dd>
                                </dl>
                            </li>
                        </ul>
                    </td>
                    <td>
                        <ul class="operations-list">
                            <li><a id="edit-pop-10550" href="UpdatePopMailServer!default.jspa?id=10550">Edit</a></li>
                            <li><a id="delete-pop-10550" href="DeleteMailServer!default.jspa?id=10550">Delete</a></li>
                        </ul>
                    </td>
                </tr> 
```

所以基本上如果第一列包含“testhandler-mcfake”，那么我想从同一行的最后一列中提取编辑 URL。

这是一回事吗？可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:31:45.350

[PyQuery](http://packages.python.org/pyquery/)允许您使用类似 jQuery 的语法来选择 HTML 元素。

# sqlite - 如何比较 SQLite 中的日期时间

> ID：13724097
> 
> 赞同：0
> 
> 时间：2012-12-05T13:15:01.700
> 
> 标签：sqlite, datetime

我已经在 SQLite 表中以“2012-09-12_12:45”格式存储了 entrytime，现在我必须找到 08:00 到 19:00 之间的所有条目。请建议我查询以查找此类条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:42:32.237

```
SELECT * FROM MyTable WHERE substr(MyColumn, 12, 5) BETWEEN '08:00' AND '19:00' 
```

# excel - 数据透视表格式返回错误

> ID：13724108
> 
> 赞同：1
> 
> 时间：2012-12-05T13:15:28.203
> 
> 标签：excel, excel-2010, pivot-table, vba

我正在研究一个将数据透视表放在一起的宏。

我的问题：我无法让计算部分工作。每次我在 PivotField(18) 应该计算 .Function=xlCount 的阶段运行代码时都会出错。我得到的错误是“范围类的 1004 选择方法失败”。

我在网上和 MS 帮助部分找到的所有示例都是按照我设置代码的方式构建的。我错过了什么？？？

任何帮助都非常感谢...

我一天中大部分时间都在努力解决这个问题。以下页面（[链接](http://peltiertech.com/WordPress/referencing-pivot-table-ranges-in-vba/)）非常有帮助，但并没有帮助我解决这个特殊问题。

```
' Start of PivotSpecific Formatting
Set pt = ActiveSheet.PivotTables("PT" & wsNewWorksheetName)
With pt
    ' Prevent AutoFormatting of Columns
    .HasAutoFormat = False
    ' Hide Field Headers
    .DisplayFieldCaptions = False
    .TableStyle2 = "PivotStyleMedium2"
    ' Apply calculation to numbers and change Caption
    With .PivotFields(18)
        .Caption = "Demand"
        .Function = xlCount
        .NumberFormat = "#,##0"
    End With
    With .PivotFields(15)
        .Caption = "Lowest OP"
        .Function = xlMin
        .NumberFormat = "#,##0.00"
    End With
End With 
```

更新 1：数据透视表的屏幕截图 ![数据透视表截图](../Images/1fc599578352041b948697f8b354aaa9.png)

更新 2：来自 bonCodigo 的测试代码 这是针对我的工作簿调整的代码。有了这个我在行上得到一个运行时错误 91： Set pvField = pvTable.PivotFields(18)

```
Dim wkSheet As Worksheet
Dim pvTable As PivotTable
Dim pvField As PivotField

Set wkSheet = ThisWorkbook.Worksheets(wsNewWorksheetName)
Set pvTble = wkSheet.PivotTables("PT" & wsNewWorksheetName)
Set pvField = pvTable.PivotFields(18)

With pvField
     .Caption = "Demand"
     .Function = xlCount
     .orientation = xlDataField
     .NumberFormat = "#,##0"
End With

Set pvField = Nothing
Set pvTable = Nothing
Set wkSheet = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:36:43.327

请尝试此操作并评论您的结果。所以我们可以从那里看到。

```
Option Explicit

'-- whatever other code you may have... 

Dim wkSheet as Worksheet
Dim pvTable as PivotTable
Dim pvField as PivotField

Set wkSheet = ThisWorkbook.Worksheets("Sheet1") '-- user proper sheet name explicitly
Set pvTble = wkSheet.PivotTables("PivotTable1") 
   ' or wkSheet.PivotTables(1) '-- use pivot table name or index
Set pvField = pvTable.PivotFields("SomeField") '-- use pivot field name or index

' -- do whatever you want to do with the pivot table

' -- do what you need to do with the pivot field
With pvField
     .Caption = "Demand"
     .Orientation = xlDataField '--<< THIS could well be the culprit
     .Function = xlCount
     .NumberFormat = "#,##0"
End With

Set pvField = Nothing
Set PvTable = Nothing
Set wkSheet = Nothing 
```

* * *

由于您要格式化多个字段，因此如果它们是连续的，我建议您使用循环`DataFields Index`

例如`pvTable.DataFields(1).Function = xlCount`

否则，您将不得不单独定义它们。最好将变量分配为对您打算交互的对象的引用。:)

# c++ - 在两个文件之间共享 C++ 结构

> ID：13724109
> 
> 赞同：0
> 
> 时间：2012-12-05T13:15:28.950
> 
> 标签：c++, struct, share

我想在两个文件之间共享一个 C++ 结构（在 Android-NDK 编程的上下文中）。在第一个中，结构被初始化，而在另一个中，它最终被使用。

所以我在头文件 struct.h 中定义结构（我包含在两个 .cpp 文件中）并将其声明为静态变量：

```
struct A {
   int v;
   A(){
    v = 0;
   }
}

static A structA; 
```

然后我在第一个 i.cpp 文件中为其分配一个值，例如：Av = 5。但是当我在第二个 j.cpp 中调用它时，它仍然是 0。

整个过程是这样的：

Java 代码 -> 调用 i.cpp 并赋值 -> Java 代码 -> 调用 j.cpp 并读取值 -> 错误

但

Java 代码 -> 调用 i.cpp 并赋值 -> Java 代码 -> 调用 i.cpp 并读取值 -> 正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:18:11.253

这是因为`static`声明变量时的关键字`structA`。这使得该变量在包含头文件的每个源文件中都是唯一的。

如果您声明变量`extern`而不是`static`，并在一个源文件中定义它（没有`static`or `extern`），您应该会看到它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:19:44.250

首先，您要共享的是一个**对象**，而不是一个结构。该结构定义了对象的**类型**。

其次，`static`意思是“不要与其他翻译单位共享”。我敢打赌你把它卡在那里，因为没有它你会从链接器那里得到关于重复定义的投诉。

这样做的方法是在标头中**声明**对象并仅在一个地方**定义**它。这在标题中：

```
extern A structA; 
```

这在您要初始化它的源文件中：

```
A structA; 
```

# mysql - 用于在不同行的不同列之间获取差异的 Sql 查询

> ID：13724110
> 
> 赞同：1
> 
> 时间：2012-12-05T13:15:33.773
> 
> 标签：mysql, sql-server-2008

我有不同的记录，其中包含开始日期和结束日期列。如果我按开始日期的升序对记录进行排序。并希望连续查找一行的开始日期和前一行的结束日期之间的差异。

```
e.g.
Table: Data
------------
Date1           Date2           
13-DEC-2011     15-DEC-2011      
18-DEC-2011     16-DEC-2011     
21-DEC-2011     24-DEC-2011 
```

如果我有第三列说 ID 并且我想要按这些 ID 分组的差异，则再进行一个查询，例如

```
 ID          Date1             Date2           
              1     13-DEC-2011     15-DEC-2011      
              1     18-DEC-2011     16-DEC-2011     
              2     21-DEC-2011     24-DEC-2011  
              2     25-JAN-2012     25-FEB-2012
              2     29-FEB-2012     25-MAR-2012

              and I need :  

             ID INTERVAL FREE
              1 15 DEC to 18 DEC
              2 24dec to 25 jan;25 feb to 29 feb 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:30:25.770

这是[SQLFiddle 演示](http://sqlfiddle.com/#!3/dc879/10)

```
with t1 as
(
select t.*,
        row_number() over (order by date1) rn 
        from t
)
select t1.date1 as d1,t1.Date2 as d2 ,
t2.Date2 as PreviousDate2,
t1.Date1-t2.Date2 as DIff
from t1
left join t1 t2 on t1.rn=t2.rn+1
order by t1.rn 
```

这是回答您编辑的问题的查询：

[SQLFiddle 演示](http://sqlfiddle.com/#!3/499d0/4)

如果您需要在一个逗号分隔的行中收集每个 ID 的行，您应该在客户端而不是 SQL 中进行。

```
with t1 as
(
select t.*,
        row_number() over (partition by id order by date1) rn 
        from t
)
select t1.id,
t2.Date2 as PreviousDate2,
t1.date1 as d1
from t1
left join t1 t2 on (t1.rn=t2.rn+1) and (t1.id=t2.id)
where t2.Date2 is not null
order by t1.id,t1.rn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:31:55.327

试试这个 ：：

```
SELECT 
DATEDIFF(temp1.from, temp2.to) as diff
from
(
SELECT t.DATE1 as from, 
       @rownum := @rownum + 1 AS rank1
  FROM YOUR_TABLE t, 
       (SELECT @rownum := 0) r
order by Date1
) as temp1
inner join 

(
SELECT t.DATE2 as to, 
       @rownum := @rownum + 1 AS rank2
  FROM YOUR_TABLE t, 
       (SELECT @rownum := 1) r
order by Date1
) as temp2 on (temp1.rank1=temp2.rank2) 
```

# tomcat - slf4j 绑定不兼容

> ID：13724115
> 
> 赞同：0
> 
> 时间：2012-12-05T13:15:58.620
> 
> 标签：tomcat, grails, slf4j

我只是将我的 grails 应用程序部署到 tomcat 并且我得到了 SLF4J：您的 slf4j 绑定请求的版本 1.5.8 与 [1.6] SLF4J 不兼容：请参阅[http://www.slf4j.org/codes.html#version_mismatch](http://www.slf4j.org/codes.html#version_mismatch)了解更多详情。但我不知道它来自哪里。

```
SEVERE: Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;Ljava/lang/Throwable;)V
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.error(SLF4JLocationAwareLog.java:225)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:225)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1603)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:17:43.047

您可能在不知不觉中使用弹簧？如果是这样，那似乎就是从那里来的。

# android - android崩溃中的自定义列表

> ID：13724119
> 
> 赞同：1
> 
> 时间：2012-12-05T13:16:16.160
> 
> 标签：android, android-listview

我创建了自定义列表，但是当我运行它时，应用程序崩溃，其中有什么问题，请告诉我。我想在功能上，当我按下“+”按钮时，它会将 EditText 的计数增加一，当我按下“-”按钮时，它会将 EditText 的计数减少一..任何人都告诉我有什么问题使用这段代码。创建自定义列表..

列出 XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

     <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

    </ListView>

</RelativeLayout> 
```

容器 XML 文件，其中包含按钮等

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="1kg" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:weightSum="5" >

        <Button
            android:id="@+id/btnSubtract "
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="-" />

        <EditText
            android:id="@+id/etQuantity"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:ems="10"
            android:inputType="number" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/btnAdd"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="+" />
    </LinearLayout>

</LinearLayout> 
```

主要的java类

```
package com.example.custoplist;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends ListActivity {
    String[] itemsList= {"1/2 kg","1 kg", "5 kg", "10 kg", "16 kg"};
    String[] itemQuantity = new String[5];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        setListAdapter(new MyAdapter(this, android.R.layout.simple_list_item_1,android.R.id.text1,itemsList));

    }
    private class MyAdapter extends ArrayAdapter<String>{

        public MyAdapter(Context context, int resource, int textViewResourceId,
                String[] objects) {
            super(context, resource, textViewResourceId, objects);
            // TODO Auto-generated constructor stub
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            //return super.getView(position, convertView, parent);

            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row = inflater.inflate(R.layout.content, parent, false);
            TextView tvTitle = (TextView) findViewById(R.id.tvTitle);
            EditText etQuantity = (EditText) findViewById(R.id.etQuantity);
            Button btnAdd = (Button) findViewById(R.id.btnAdd);
            Button btnsSubtract = (Button) findViewById(R.id.btnSubtract);
            tvTitle.setText(itemsList[position]);   
            return row;
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:17:55.623

更改这些行

```
 TextView tvTitle = (TextView) findViewById(R.id.tvTitle);
        EditText etQuantity = (EditText) findViewById(R.id.etQuantity);
        Button btnAdd = (Button) findViewById(R.id.btnAdd);
        Button btnsSubtract = (Button) findViewById(R.id.btnSubtract); 
```

和

```
 TextView tvTitle = (TextView) row.findViewById(R.id.tvTitle);
        EditText etQuantity = (EditText) row.findViewById(R.id.etQuantity);
        Button btnAdd = (Button) row.findViewById(R.id.btnAdd);
        Button btnsSubtract = (Button) row.findViewById(R.id.btnSubtract); 
```

# java - Tomcat 在处理带有身份验证标头的 android 请求之前发送 400 秒

> ID：13724125
> 
> 赞同：2
> 
> 时间：2012-12-05T13:16:36.020
> 
> 标签：java, android, tomcat, bad-request

我正在编写一个用于发送和接收消息的基本 android 应用程序。我还在使用 Tomcat 7.0.21 编写服务器端代码。我目前正在尝试实现“程序化 Web 应用程序安全性”（http://courses.coreservlets.com/Course-Materials/msajsp.html），其中显式执行客户端身份验证。

我现在已经完成了这个实现，当我使用 REST 客户端发送请求时它工作正常。但是，当我从 Android 设备/模拟器发送请求时，我收到 java.io.FileNotFoundException。当我检查 tomcat 访问日志时，似乎 tomcat 在我的 Servlet 代码执行之前发送了一个 400 Bad Request，从而产生了异常。

我不知道这个问题是客户端还是服务器端。任何关于如何实现这一点的见解或建议都会受到极大的欢迎。谢谢你。

Tomcat localhost_access_log：

```
192.168.1.2 - - [05/Dec/2012:12:20:39 +0100] "GET /CA/users/get_contacts?user_id=freespirit HTTP/1.1" 400 - 
```

我扩展的 Servlet 类，我相信它们永远不会被执行：

```
package carter.server.conversations;

import java.io.IOException;
import java.sql.Connection;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import sun.misc.BASE64Decoder;
import carter.sqlite.SQLiteUtilities;
import carter.sqlite.conversations.DatabaseHelper;

public class AuthorizationServlet extends HttpsServlet {

    protected static final int SERVLET_EXCEPTION_UNAUTHORIZED = 1;

    @Override
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        super.doGet(request, response);

        String authorization = request.getHeader("Authorization");
        if(authorization == null){
            System.out.println("CAAuthorizationServlet: Authorization is null. Sending 401.");
            response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
        }
        else{
            String base64encodedDetails = authorization.substring(6).trim(); //remove "BASIC " prefix
            BASE64Decoder decoder = new BASE64Decoder();
            String unencodedDetails = new String(decoder.decodeBuffer(base64encodedDetails));
            String[] userDetails = unencodedDetails.split(":");
            //check database for given details
            Connection databaseConnection = SQLiteUtilities.getConnection(Constants.databasePath);
            try{
                String password = DatabaseHelper.getPassword(userDetails[0], databaseConnection);
                if(password.equals(userDetails[1]) == false){
                    //password does not match this user
                    System.out.println("CAAuthorizationServlet: password does not match this user. Sending 401.");
                    response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
                }
            }
            catch(SQLException e){
                // no such user found in database.
                System.out.println("CAAuthorizationServlet: no such user exists in database. Sending 401.");
                response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
            }
            finally{
                SQLiteUtilities.closeConnection(databaseConnection);
            }
        }
    }

    @Override
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        super.doPost(request, response);
        doGet(request, response);
    }

}

package carter.server.conversations;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class HttpsServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        System.out.println("CAHttpsServlet: checking request is secure");
        if(request.isSecure() == false){
            System.out.println("CAHttpsServlet: Request is NOT secure. Sending 400");
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
        }
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        doGet(request, response);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:26:42.413

嗯，您在自己的代码中拒绝了请求：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    System.out.println("CAHttpsServlet: checking request is secure");
    if(request.isSecure() == false){
        System.out.println("CAHttpsServlet: Request is NOT secure. Sending 400");
        response.sendError(HttpServletResponse.SC_BAD_REQUEST);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:25:02.273

它似乎与[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)相关。

您需要在 Tomcat 服务器上启用跨域请求。

为此，您需要`crossdomain.xml`在 Tomcat 的 ROOT webapp 上创建一个文件，其内容如下：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all"/>
    <allow-access-from domain="*" />
    <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

# x3d - 从用户那里获取边界框的输入并在 x3d 场景的内联脚本中使用它

> ID：13724129
> 
> 赞同：1
> 
> 时间：2012-12-05T13:16:38.283
> 
> 标签：x3d, x3dom

我对编程很陌生，编写了一个简单的程序来获取用户的输入，我想在 X3D 场景中使用它。如果我将它作为 URL 运行（“http://vmclient03.rz.hft-stuttgart.de:8080/cs3d/Controller?do=GetScene&service=W3DS&version=0.4.0&crs=epsg:31467&format=model/x3d%2bxml&x3d. optimize=true&boundingBox="+bbox) 它可以工作，但我想将它包含在 x3d 的内联函数中，以便用户输入边界框坐标，我可以在定义的框中获取场景。这是我到目前为止编写的代码。提前谢谢你。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Title Please</title>
<script src="jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://www.x3dom.org/download/x3dom.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.x3dom.org/download/x3dom.css"   />
</head>

<body bgcolor="#FF9900" >
<h1> Please Fill the number</h1>
<br />
<hr />
<form method="GET"  name="form" 
  onsubmit="return validateForm(this)">
<br>
<hr color="#333333" />
Lower Left X Co-ordinate: <input type="text" id="num1" name="ULX" onchange=  "isNumeric(document.getElementById('num1'), 'Please Enter number only')"  /><br />
Lower Left Y Co-ordinate: <input type="text" id="num2" name="ULY"   onchange="isNumeric(document.getElementById('num2'), 'Please Enter number only')"/><br />
Upper Right X Co-ordinate: <input type="text" id="num3" name="LWX"  onchange="isNumeric(document.getElementById('num3'), 'Please Enter number only')"/><br />
Upper Right Y Co-ordinate: <input type="text" id="num4" name="LWY"  onchange="isNumeric(document.getElementById('num4'), 'Please Enter number only')"/><br />
<hr />
<input type="submit"/>
</form>
</body>
<script language="javascript">
  function isNotEmpty(elem) {
  var str = elem.value;
  var re = /.+/;
  if(!str.match(re)) {
    alert("Please fill in the required field.");
    setTimeout("focusElement('" + elem.form.name + "', '" + elem.name + "')", 0);
    return false;
    } else {
    return true;
  }
}

function isNumeric(a, helperMsg)
{
 var numericExpression = /^-?\d*\.?\d*$/;
 if(a.value.match(numericExpression))
   {
    return true;
    }else
      {
       alert(helperMsg);
       a.focus();
       return false;
      }
 }

function validateForm(form)
 {
  if (isNotEmpty(form.num1)) 
{
     if (isNotEmpty(form.num2))
     {
          if (isNotEmpty(form.num3))
      {
               if (isNotEmpty(form.num4))
           {
                    var bbox = $("#num1").val()+","+$("#num2").val()+","+$("#num3").val()+","+$("#num4").val();
           <!--<x3d width="800px" height="600px">
              <!--<scene>
             <!--<inline url="http://vmclient03.rz.hft-stuttgart.de:8080/cs3d/Controller?do=GetScene&service=W3DS&version=0.4.0&crs=epsg:31467&format=model/x3d%2bxml&x3d.optimize=true&boundingBox="+bbox></inline>
              <!--</scene>
          <!--</x3d>
                          window.open("http://vmclient03.rz.hft-stuttgart.de:8080/cs3d/Controller?do=GetScene&service=W3DS&version=0.4.0&crs=epsg:31467&format=model/x3d%2bxml&x3d.optimize=true&boundingBox="+bbox);
                    }
                }
            }
        }

    return false;
   }
  </script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:59:10.673

您可以在页面中已有场景，并在提交表单时更改 Inline 节点的 url：

```
<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<title>X3DOM</title>
<link href="http://x3dom.org/x3dom/release/x3dom.css" rel="stylesheet" />
<style>
.error{border: 2px solid red}
label{display: block}
</style>

</head>
<body>

<X3D width="400px" height="300px" showStat="true">
    <Scene>
        <Inline id="myInline"></Inline>
    </Scene>
</X3D>

<fieldset>
    <label>
        Lower Left X Co-ordinate:
        <input type="text" id="num1" name="ULX" value="-1" />
    </label>
    <label>
        Lower Left Y Co-ordinate:
        <input type="text" id="num2" name="ULY" value="-1" />
    </label>
    <label>
        Upper Right X Co-ordinate:
        <input type="text" id="num3" name="LWX" value="1" />
    </label>
    <label>
        Upper Right Y Co-ordinate:
        <input type="text" id="num4" name="LWY" value="1" />
    </label>
</fieldset>

<button id="mySubmit">Submit</button>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://x3dom.org/x3dom/release/x3dom.js"></script>
<script>
$(function(){

    var $inline = $("#myInline");

    var $fields = $("input").change(function(){
        var $field = $(this);
        if ($.isNumeric($field.val())) $field.removeClass("error");
        else $field.addClass("error");
    });

    $("#mySubmit").click(function(){
        if ($fields.filter(".error").length == 0){
            var bbox = $("#num1").val() + "," + $("#num2").val() + "," + $("#num3").val() + "," + $("#num4").val();
            var url = "http://vmclient03.rz.hft-stuttgart.de:8080/cs3d/Controller?do=GetScene&service=W3DS&version=0.4.0&crs=epsg:31467&format=model/x3d%2bxml&x3d.optimize=true&boundingBox=" + bbox;
            $inline.attr("url", url);
        } else {
            alert("Enter a number in every field first !");
        }
        return false;
    });

});
</script>

</body>
</html> 
```

# c - 为什么我得到错误无效指针？

> ID：13724142
> 
> 赞同：0
> 
> 时间：2012-12-05T13:17:11.917
> 
> 标签：c, linux, gcc

```
/* DECLARED FUNCTIONS */
char *DetectDevice(void);

int main(int argc, char *argv[])
{
    char *PathToDevice;
    PathToDevice = DetectDevice();

...

    if(close(fd) == -1)
    {
        printf("Error Closing Port");
    }else
    {
        printf("whihi!");
        free(PathToDevice);
    }

    return 0;
}

char *DetectDevice(void)
{   
    char *Usbs = malloc(1024);
    Usbs = "/dev/ttyUSB1";
    return Usbs;
} 
```

错误消息：*** 检测到 glibc *** ./test: free(): invalid pointer: 0xbec1b504

顺便说一句……这个程序是在树莓派上编译的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:20:45.030

```
char *DetectDevice(void)
{   
    char *Usbs = malloc(1024);
    Usbs = "/dev/ttyUSB1";
    return Usbs;
} 
```

在`char *DetectDevice(void)`您被分配的 `"/dev/ttyUSB1"`字符串地址`Usbs` ，您返回。并尝试释放。malloc存储的地址`Usbs`被`Usbs = "/dev/ttyUSB1";`语句覆盖，并且 Usbs 具有该常量字符串的地址。
`"/dev/ttyUSB1"`不是您错误地尝试释放的动态分配的！

**这样做。**

```
char *DetectDevice(void)
    {   
        char *Usbs = malloc(1024);
        strcpy(Usbs,"/dev/ttyUSB1");
        return Usbs;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T13:19:33.487

`Usbs = "/dev/ttyUSB1";`更改`Usbs`为指向字符串文字。这可能存在于只读内存中，无法释放。采用

```
char *DetectDevice(void)
{   
    char *Usbs = malloc(1024);
    strcpy(Usbs, "/dev/ttyUSB1");
    return Usbs;
} 
```

复制字符串，或

```
char *DetectDevice(void)
{   
    return strdup("/dev/ttyUSB1");
} 
```

而是用适量的内存分配字符串。

或者，您也可以识别`DetectDevice`返回只读字符串

```
const char *DetectDevice(void)
{   
    return "/dev/ttyUSB1";
} 
```

并`free`从调用代码中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:24:12.787

`free`带有`malloc`or `calloc`or`realloc`总是在那对。

free 只能应用于使用`malloc`or`calloc`或分配的指针`realloc`。

当您`1024`在函数中分配内存块时`DetectDevice`。在下一行中，您已将指针分配给 String literal `"/dev/ttyUSB1"`。

因此，您的指针返回并指向相同的内容`PathToDevice`，现在您正在尝试释放它，因此您会收到这种错误消息。

您应该使用`strcpy(Usbs,"/dev/ttyUSB1")`然后返回`Usbs`.

你不仅有问题，`free`而且你也有`memory leak`。从您的代码中删除后`free(PathToDevice)`，您仍然有内存泄漏而没有任何错误。

（**建议**：首先在堆上分配内存然后编写代码以使指针开始指向其他地址是不好的做法。这会导致内存泄漏）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T14:47:41.593

虽然这可能不是您的问题，但您应该检查`malloc`实际返回的地址是有效地址而不是 NULL，尤其是在资源有限的系统上，例如树莓派。

IE

```
char *DetectDevice(void)
    {   
        char *Usbs = malloc(1024);
        if(Usbs != NULL)
        {
           strcpy(Usbs,"/dev/ttyUSB1");
        }
        else
        {
          // malloc didn't allocate memory do something about it.
        }
        return Usbs;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:20:40.007

您似乎期望此属性`Usbs = "/dev/ttyUSB1"`意味着“将右侧字符串的内容写入 Usbs 指向的内存”。

这不是它的意思。它的意思是“覆盖 Usbs 以指向静态分配的常量字符串的位置”。这样的位置不由 管理`malloc`，也不能由 释放`free`。

要将常量字符串的内容复制到`Usbs`您需要使用`string.h`.

# jquery - 如何将 GWTQuery 添加到现有的 Vaadin 项目？

> ID：13724146
> 
> 赞同：0
> 
> 时间：2012-12-05T13:17:19.117
> 
> 标签：jquery, gwt, vaadin, gwtquery

我是 Vaadin 和 GWT 的新手，但我是一名高级 javascript 程序员。现在我正在处理现有的 Vaadin 项目，并希望在我的项目中使用 jQuery 的巨大可能性......我如何将 GWTQuery 添加到现有的 Vaadin 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:52:18.130

与任何其他 GWT 项目相同：

1.  将 GWTQuery JAR 放在项目路径上的文件夹下（不必将其定位在 下`WEB-INF/lib`，因为在运行时不需要它）。
2.  将它包含在项目的构建路径中（例如，在 eclipse 中 - 右键单击​​ JAR 文件并选择***Build Path > Add To Build Path***）。
3.  在模块 xml 中添加相应的条目：

    ```
    <inherits name="com.google.gwt.query.Query" /> 
    ```

确保在生产模式下运行之前运行 GWT 编译器。

**进一步阅读：**在 Google Developers 的 GWT 文档上
*[组织项目。](https://developers.google.com/web-toolkit/doc/1.6/DevGuideOrganizingProjects)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:18:01.457

1.- 如果您使用 maven，请将这些行添加到您的`pom.xml`：

```
<dependency>
 <groupId>com.googlecode.gwtquery</groupId>
 <artifactId>gwtquery</artifactId>
 <version>1.2.0</version>
 <scope>provided</scope>
</dependency> 
```

否则从项目站点下载 gwtquery-1.2.0.jar 并将其包含在您的类路径中

2.- 将此行添加到`your_application.gwt.xml`文件中：

```
<inherits name='com.google.gwt.query.Query'/> 
```

3.- 从`GQuery`类中静态导入方法

```
import static com.google.gwt.query.client.GQuery.*; 
```

4.- 用它来增强你的 dom 或小部件

```
$("css_selector").css("width", "100%");
$("css_selector", my_widget).hide(); 
```

5.- 请注意，您不能使用 jquery 插件，但可以使用 jquery 的核心 api（有一些区别）。不过有很多 gquery 插件。

# ios4 - 是否可以在没有 Core Data 的情况下使用 NSUndoManager？

> ID：13724148
> 
> 赞同：0
> 
> 时间：2012-12-05T13:17:24.810
> 
> 标签：ios4, uigesturerecognizer, nsundomanager

我创建了一个没有核心数据的应用程序。该应用程序具有许多功能，例如使用手势、颜色和文本操作视图。

我想要做的是使用撤消和重做功能。
我阅读了有关 Core Data 和 NSUndoManager 的所有内容，但我无法理解它，因为我尝试做的所有事情......都行不通。

我的问题是：是否可以在没有 Core Data 的情况下使用 NSUndoManager？
并且：我怎样才能实现视图的撤消？

一个操作可以改变我的对象叫做 aView (UIImageView) 我在 undoManager 中注册了信息

**编辑**

```
- (IBAction)rotationDetected:(UIRotationGestureRecognizer *)gestureRecognizer {

    static CGFloat initialRotation;
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
        initialRotation = atan2f(gestureRecognizer.view.transform.b, gestureRecognizer.view.transform.a);
    }
    CGFloat newRotation = initialRotation + gestureRecognizer.rotation;
    aView.transform = CGAffineTransformMakeRotation(newRotation);

    //undo
    [self.undoManager registerUndoWithTarget:self selector:@selector(rotationDetected:)object:aView];
    [self.undoManager setActionName:NSLocalizedString(@"viewChanged",@"title undo")];
} 
```

此处描述了单击按钮调用的撤消方法：

```
-(void)undo: (id) sender{ 

    [aView.undoManager undo];
    [[self undoManager] undo];
} 
```

如果我插入一个 if 子句询问是否 undoManager.canUndo == YES，它会返回 undoManager 不能撤消。
这意味着 undoManager 为 nil，但为什么呢？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:23:19.260

是的，您可以`NSUndoManager`与 Core Data 分开使用。大量关于 NSUndoManager 的[信息](http://developer.apple.com/library/ios/#documentation/General/Conceptual/Devpedia-CocoaApp/UndoManager.html)。

你需要做更多的阅读，了解什么`NSUndoManager`可以为你做，什么不能为你做，看看它如何适合 UIViews 等。也许暂时忘记 Core Data 并专注于`NSUndoManager`.

“因为我正在尝试做的一切......不工作” - 如果您遇到特定问题，您可以在 StackOverflow 上提出有关它们的问题。如果您只说“它不起作用”，我们无法为您提供具体帮助。

除了细节之外`NSUndoManager`，还有一些与撤消和重做操作相关的设计模式，例如命令模式。参见例如[“撤消”功能的最佳设计模式](https://stackoverflow.com/questions/3448943/best-design-pattern-for-undo-feature)。

# ruby-on-rails - 如何在 Rails 3 中修改活动记录查询结果属性值

> ID：13724158
> 
> 赞同：1
> 
> 时间：2012-12-05T13:18:08.157
> 
> 标签：ruby-on-rails, ruby, activerecord

我有疑问

```
@users = User.all 
```

`@users`包含 name、created_at、email、mobile 等作为属性值

我想将创建的 at 从 mysql 日期时间格式更新为用户可读格式并在控制器中更新它

我已经编写了将日期转换为人类可读格式的代码，但在查看之前不知道如何为属性设置值

所以任何方法都会被应用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:17:03.307

Rails 可以添加额外的日期/时间格式...在初始化文件中添加如下内容：

```
Date::DATE_FORMATS[:short_date] = "%b %d, %Y"
Date::DATE_FORMATS[:short_slashed] = "%m/%d/%Y" #careful when giving this to mysql adapter
Date::DATE_FORMATS[:date_dashed] = "%m-%d-%Y"
Date::DATE_FORMATS[:mysql_date] = "%Y-%m-%d"
Date::DATE_FORMATS[:full_date] = "%A, %B %d, %Y"
Time::DATE_FORMATS[:short_slashed] = "%m/%d/%Y %I:%M %p"
Time::DATE_FORMATS[:mytime] = "%a %b %d at %I:%M %p"
Time::DATE_FORMATS[:short_date] = "%b %d, %Y"
Time::DATE_FORMATS[:date_dashed] = "%m-%d-%Y"
Time::DATE_FORMATS[:mysql_date] = "%Y-%m-%d" 
```

然后在您看来，您可以选择其中任何一个：

```
 @user.created_at.to_s(:mytime) 
 @user.created_at.to_s(:short_date) 
```

[文件](http://apidock.com/rails/ActiveSupport/TimeWithZone/to_s)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:23:30.667

`strftime()`直接在`created_at`视图中的属性上使用：

```
@user.created_at.strftime("%D") 
```

文档：[http ://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T13:23:40.157

只是为了展示而弄乱属性值 - 坏主意，不要那样做。

这看起来像一个辅助方法。我可能会将其放入用户模型本身（`make_human_date`包含您未指定的“人性化”日期的逻辑）

```
# model
class User
  def human_created_at
    make_human_date(created_at)
  end
end

# view
<%= @user.human_created_at %> 
```

或者，您可以创建一个真正的辅助方法，因为它只帮助演示，而不是业务逻辑的一部分。

```
# helper
module MyControllerHelper
  def human_created_at user
    make_human_date(user.created_at)
  end
end

# view
<%= human_created_at(@user) %> 
```

# oracle - Oracle UTL_FILE - 单个单元格的 excel 中的多行

> ID：13724160
> 
> 赞同：1
> 
> 时间：2012-12-05T13:18:11.020
> 
> 标签：oracle, csv, plsql, utl-file

我需要在使用 PL/SQL 的 UTL_FILE 包生成的 csv 文件中显示以下内容。

标题 1 标题 2 标题 3 ABCDE 123 987641213 xxx 街道 yyyy

对于“Heading1”中的每个值，我从特定表中获取 3 行地址。在输出 csv 文件中，我需要在单个单元格中显示地址，其中数据由新行分隔。

我尝试使用游标并使用 chr(10)、chr(12)、chr(15) 附加数据，但徒劳无功。

请帮助我获得输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:29:00.977

您必须引用具有回车符的字段

```
heading1,headiing2,heading3
abcde,123,"1 street
town
90210"
abcde,124,"13 street
town
43245" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:53:48.290

DazzaL 提出的建议应该可行，但如果您无法更改您的情况下的输入文件，您可以使用以下代码：

```
declare
    v_line varchar2(2000);
    v_c1   varchar2(10);
    v_c2   varchar2(10);
    v_c3   varchar2(1980);
    nb_line_per_record integer := 3;
    v_line_in_record   integer;
    v_seperator varchar2(1) := ',';
    v_file UTL_FILE.FILE_TYPE;
begin
    v_file := utl_file.FOPEN(your_directory, 'your_file','r');
    v_line_in_record := 0;
    --we skip the first line
    UTL_FILE.GET_LINE(v_file, v_line);
    loop
        v_line_in_record := v_line_in_record + 1; 
        begin
            UTL_FILE.GET_LINE(v_file, v_line);
        EXCEPTION
            WHEN no_data_found THEN
                exit;
        END;
        --first line of record we cut by v_seperator
        if v_line_in_record = 1 then
           v_c1 := substr(v_line,1,instr(v_line,v_seperator,1,1)-1);
           v_c2 := substr(v_line,instr(v_line,v_seperator,1,1)+1,
                          instr(v_line,v_seperator,1,2)-                                
                          instr(v_line,v_seperator,1,1)-1);
           v_c3 := substr(v_line,instr(v_line,v_seperator,1,2)+1) 
                          || char(10);--if you want new line in adresse 
        else
            --not first line we concatanate to adress with new line
            v_c3 := v_c3 || v_line ||
                    case when v_line_in_record = 2 then char(10) else '' end; 
        end if;
        if v_line_in_record = 3 then
            v_line_in_record := 0;
            --do something with your record 
            insert into yourtable values (v_c1,v_c2,v_c3);
        end if;
    end loop;
    UTL_FILE.FCLOSE(v_file);
    COMMIT;
end; 
```

但这只有在您绝对确定每条记录都是 3 行时才有效。如果我是你，我会在每条记录后添加一个记录分隔符并使用[SQLLOADER](http://www.orafaq.com/wiki/SQL%2aLoader_FAQ)将此文件加载到表中。您可以使用 SQLLOADER 定义记录分隔符。这是一个使用 & 作为记录分隔符的示例 ctl

> ```
> options (skip=1) 
>   load data 
>   infile "yourfile" "str '&'" 
>   truncate into table your_table 
>   fields terminated by "," 
>   trailing nullcols 
>   (heading1, heading2, heading3) 
> ```

如果您使用记录分隔符，您甚至可以在文件上创建一个[外部表](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm)。

# repeater - 中继器中的嵌套网格视图未以 pdf 格式导出

> ID：13724161
> 
> 赞同：0
> 
> 时间：2012-12-05T13:18:17.707
> 
> 标签：repeater

我正在尝试以 pdf 格式导出多个网格视图，但它们未在 HtmlTextWriter 中呈现网格视图是动态创建的，嵌套在转发器控件中。作为数据源，我使用的是数据表，尽管这些表显示在浏览器中（连同它们的数据），但它们并没有呈现在 pdf 文件中。

在代码下方谢谢！

ASPX：

```
<asp:Panel ID="pnlContent" runat="server">
        <asp:Repeater ID="rptResult" runat="server" OnItemDataBound="rptResult_ItemDataBound" EnableViewState="false">
            <HeaderTemplate>                                
                Detalii test<br />
            </HeaderTemplate>
            <ItemTemplate>
                <asp:Literal ID="ltGroupId12" runat="server" Visible="false" Text='<%# Eval("GroupId12")%>'></asp:Literal>                    
                <asp:GridView ID="gvResultDetail" runat="server" AutoGenerateColumns="false" ShowHeader="false" GridLines="Both"
                     OnRowDataBound="gvResultDetail_RowDataBound">
                    <Columns>
                        <asp:BoundField DataField="Group1Desc" ItemStyle-CssClass="gridviewItemGroup1TestResult" />
                        <asp:BoundField DataField="Group2Desc" ItemStyle-CssClass="gridviewItemGroup2TestResult"/>
                        <asp:TemplateField ItemStyle-CssClass="gridviewItemStdTestResult">
                            <ItemTemplate>
                                test
                                <asp:Label ID="lblRequestedResultText" runat="server" Visible="false" Text="Position request<br />Total: "></asp:Label>
                                <asp:Label ID="lblRequestedResultValue" runat="server" Visible="false" Text='<%# Eval("RequestedResult")%>'></asp:Label>                                
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ItemStyle-CssClass="gridviewItemStdTestResult">
                            <ItemTemplate>
                                <asp:Label ID="lblActualResultText" runat="server" Visible="false" Text="Answer level<br />Total: "></asp:Label>
                                <asp:Label ID="lblActualResultValue" runat="server" Visible="false" Text='<%# Eval("ActualResult")%>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ItemStyle-CssClass="gridviewItemStdTestResult">
                            <ItemTemplate>
                                <asp:Label ID="lblDifferencesText" runat="server" Visible="false" Text="Difference:"></asp:Label>
                                <asp:Label ID="lblDifferencesValue" runat="server" Visible="false" Text='<%# Eval("Differences")%>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ItemStyle-CssClass="gridviewItemStdTestResult">
                            <ItemTemplate>
                                <asp:Label ID="lblPercentageText" runat="server" Visible="false" Text="KQ<br />"></asp:Label>
                                <asp:Label ID="lblPercentageValue" runat="server" Visible="false" Text='<%# Eval("Percentage") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField Visible="false">
                            <ItemTemplate>
                                <asp:Literal ID="ltGroupType" runat="server" Visible="false" Text='<%# Eval("RecordType")%>'></asp:Literal>
                                <asp:Literal ID="ltNoRows" runat="server" Visible="false" Text='<%# Eval("NoRows")%>'></asp:Literal>
                                <asp:Literal ID="ltBasicDomain" runat="server" Visible="false" Text='<%# Eval("BasicDomain")%>'></asp:Literal>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <HeaderStyle CssClass="gridviewHeaderTestResult" />
                    <RowStyle CssClass="gridviewRowTestResult" />
                    <AlternatingRowStyle CssClass="gridviewRowTestResult" />                
                </asp:GridView>
            </ItemTemplate>                
            <SeparatorTemplate>
                <br />
            </SeparatorTemplate>
            <FooterTemplate>
                End
            </FooterTemplate>        
        </asp:Repeater>

        <br />
    </asp:Panel> 
```

ASPX.CS：

```
Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=SDT.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
DataTable dtDetailedResult = (DataTable)Session["dtDetailedResult"];
    rptResult.DataSource = dtDetailedResult;
    rptResult.DataBind();        
    pnlContent.RenderControl(hw);
StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A4, 70f, 70f, 20f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:50:26.597

我不确定嵌套的网格视图，但要将网格视图导出为 pdf，您必须从 Internet 下载 itextsharp.dll 并将其放在项目的 bin 文件夹中。

有一个示例输出示例，说明如何将 gridview 导出为 pdf。你可以参考这里。

[导出-gridview-to-pdf](http://nice-tutorials.blogspot.in/2010/01/export-gridview-to-pdf-in-aspnet-using.html)

希望能帮助到你。

# css - 处理流体布局上的水平对齐

> ID：13724163
> 
> 赞同：1
> 
> 时间：2012-12-05T13:18:18.610
> 
> 标签：css, position, width, responsive-design, fluid-layout

我有一个两列布局（流体左侧，固定右侧）。
我想在流体列中连续放置三个 div，以便它们在包装器中居中，同时有足够的空间，然后它们应该在左侧对齐。

```
<div class="wrapper">
Wrapper
<div class="header">
         header
</div> 
<div class="wrapleft">       
    <div class="left">
        <div class="subwrapper">
            <div class="first">Once this reach the left border, it should stay there.</div>
            <div class="second">This one should go under the blue div when there is not enough space for two divs and stay left aligned.</div>
            <div class="third">This one should go under the blue div when there is not enough space for three divs and stay left aligned.</div>
        </div>
    </div>
</div>    
<div class="right">
        right
</div> 
    <div class="footer">
        footer
    </div> 
```

```
.wrapper{
   width: 100%;
   margin: 0 auto;
    text-align:center;
}
.header{
   float: left;
   width: 100%;
   background-color: #f4f4f4;
    text-align:left;
}
.wrapleft{
   float: left;
   width: 100%;
   background-color: #cfcfcf;
    text-align:center;
}
.left{
   margin-right: 250px;
   background-color: #afeeee;
   height: 200px;
    text-align:right;
}
.right{
   float: right;
   width: 240px;
   margin-left: -240px;
   background-color: #98fb98;
   height: 200px;
}
.footer{
   float: left;
   width: 100%;
   background-color: #f4f4f4;
}
body {
   padding: 0px;
   margin: 0px;
}

.subwrapper div {
    height: 100px;
    width:200px;
    margin: 0 auto;
    text-align:center;
    color:white;
    display: inline-block;
    vertical-align:top;
    }
.subwrapper {
width:100%;
    background:purple;
    max-width:100%;
}

.first {
    background:blue;
}

.second {
    background:green;
}

.third {
    background:red;
}
​ 
```

这是一个 jsfiddle，阐明了我的意思[http://jsfiddle.net/notme/SZjJG/](http://jsfiddle.net/notme/SZjJG/)
实际上我可以得到第一部分，但是一旦没有更多空间，我就无法对齐左侧的 div。
我不能使用媒体查询，因为宽度是动态的。

更新
我尝试添加一些图片以使事情变得清晰。

**大分辨率**：三个 div 居中 ![大分辨率](../Images/c5168ef03518fef205465e8b877aa11a.png)

**中等分辨率**：三个 div 适合宽度
![中等分辨率](../Images/4bb94a160a76434d5d04d7ca4542c445.png)

**小分辨率**：三个 div 应该留在左侧。**我不希望左边距用黄色圈起来**。
![小分辨率](../Images/a3da86ad04722897e6b5d10ce3f239e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:30:51.387

尝试添加：

```
.first, .second, .third {
    float:left;
} 
```

还添加到子包装器：

```
max-width: 600px;
display: block;
margin: 0 auto; 
```

出于显而易见的原因，您需要添加“display: block”和“margin: 0 auto”。但是，“max-width”需要等于 .first、second 和 .third div 的最大宽度。

但是，一旦将填充添加到 .first、.second 和 .third div，宽度就会增加。不知道你是否知道。所以你可能想添加“box-sizing:border-box;” 到你的.first，.second。和 .third div 的 CSS。

示例：http: [//jsfiddle.net/SZjJG/17/](http://jsfiddle.net/SZjJG/17/)

# asp.net-mvc - 我无法在 asp.net MVC 3.0 razor 中下载文件（System.Security.SecurityException：该程序集不允许部分受信任的调用者。）

> ID：13724166
> 
> 赞同：0
> 
> 时间：2012-12-05T13:18:25.950
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在我的控制器中创建一个可以为我下载文件的功能。但它不能在线工作。当我在线部署我的项目时，我收到了这个错误。

![在此处输入图像描述](../Images/bb58b708f220374a8aa6c373795d72e4.png)

请帮我解决这个问题。

> ```
>  <a id="export_excel" href='#'>
> <img id="export" src='@Url.Content("~/images/buttons/get_report.jpg")' alt="Get Report" 
> ```
> 
> />

在 jquery 中，我正在使用它。

> $(document).ready(function () { $("#export_excel ").click(function (event) { // $(this).attr('href', "/Home/ExportToExcelCombine?select_rows="+ $ ('#select_rows').val()); var val=$('#select_rows').val(); $(this).attr('href', '@Url.Action("ExportToExcelCombine", "Home ")?select_rows='+val); }); });

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:11:52.513

我在控制器中使用此代码导出到 excel。我正在使用 NPOI dll 导出到 excel。

> 公共 ActionResult ExportToExcelCombine(string select_rows) {
> 
> var workbook = new HSSFWorkbook();
> 
> ```
>  string[] test = select_rows.ToString().Split(';');
> 
>                 var sheet = workbook.CreateSheet("Summary");
>                int row_index = 0;
>                var excelnewrow = sheet.CreateRow(row_index);
>                excelnewrow.CreateCell(0).SetCellValue("Entity Name");
> 
>                row_index++;
> 
>                excelnewrow = sheet.CreateRow(row_index);
>                excelnewrow.CreateCell(0).SetCellValue("Type of Entity");
> 
>                row_index++;
>                excelnewrow = sheet.CreateRow(row_index);
>                excelnewrow.CreateCell(0).SetCellValue("Industry");
> 
>                row_index++;
>                excelnewrow = sheet.CreateRow(row_index);
>                excelnewrow.CreateCell(0).SetCellValue("Country");
> 
>                row_index++;
>                excelnewrow = sheet.CreateRow(row_index);
>                excelnewrow.CreateCell(0).SetCellValue("");
> 
>                row_index++;
>                excelnewrow = sheet.CreateRow(row_index);
> 
>                HSSFCellStyle style_summary_color = workbook.CreateCellStyle();
> 
>                // cell background
>                style_summary_color.FillForegroundColor = NPOI.HSSF.Util.HSSFColor.BLACK.index;
>                style_summary_color.FillPattern = HSSFCellStyle.SOLID_FOREGROUND;
> 
>                // font color
>                HSSFFont font_summary_color = workbook.CreateFont();
>                font_summary_color.Color = NPOI.HSSF.Util.HSSFColor.WHITE.index;
>                style_summary_color.SetFont(font_summary_color);
> 
>                excelnewrow.RowStyle = style_summary_color;
> 
>                excelnewrow.CreateCell(0).SetCellValue("Facebook");
>                excelnewrow.GetCell(0).CellStyle = style_summary_color;
> 
>                row_index++;
>                excelnewrow = sheet.CreateRow(row_index);
>                excelnewrow.CreateCell(0).SetCellValue(""); 
> ```
> 
> 使用 (var exportData = new MemoryStream()) { workbook.Write(exportData);
> 
> ```
>  string saveAsFileName = string.Format("Report-{0:d}.xls", DateTime.Now).Replace("/", "-");
> 
>                     Response.ContentType = "application/vnd.ms-excel";
>                     Response.AddHeader("Content-Disposition", string.Format("attachment;filename={0}", saveAsFileName));
>                     Response.Clear();
>                     Response.BinaryWrite(exportData.GetBuffer());
>                     Response.End();
>                     return File(saveAsFileName, "application/vnd.ms-excel", saveAsFileName);
>                 } 
> ```
> 
> TempData["Message"] = "Excel报表创建成功！";
> 
> ```
>  //return File(buffer, "application/vnd.ms-excel");
> 
>                 return RedirectToAction("ExcelPackage"); 
> ```
> 
> }

鉴于，我正在使用

在 jquery 中，我正在使用

> $(document).ready(function () { $("#export_excel ").click(function (event) { // $(this).attr('href', "/Home/ExportToExcelCombine?select_rows="+ $ ('#select_rows').val()); var val=$('#select_rows').val(); $(this).attr('href', '@Url.Action("ExportToExcelCombine", "Home ")?select_rows='+val); }); });

我将 $('#select_rows').val() 用于隐藏字段值，当我在 Jtable 中选择一些行时，它会发生变化。

# c++ - 最大大小的 async_read()

> ID：13724169
> 
> 赞同：0
> 
> 时间：2012-12-05T13:18:37.360
> 
> 标签：c++, boost, asyncsocket

我有一个问题`boost::async_read()`。
在网上，我发现有一个功能`read_at_least(n)`。但我正在寻找一个`read_max()`可以读取最大字节数的函数。

问题是我有不同的结构要阅读，每个结构都从结构本身的大小开始。我希望能够执行以下操作：

```
int s = async_read([...], read_at_least(4), read_max(4));
async_read([...], read_at_least(s), read_max(s)); 
```

不这样做的问题是我必须存储其余的读取操作，以防它读取的内容超过我想要的。

提前谢谢你，弗洛里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:21:30.683

您是否看过[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/transfer_exactly.html)，基本上，为读取操作提供了完成条件，您可以在其中准确指定要读取的字节数。

# gridview - 从 Gridview WinRT 问题中删除多个项目

> ID：13724170
> 
> 赞同：1
> 
> 时间：2012-12-05T13:18:39.617
> 
> 标签：gridview, windows-runtime

我正在开发一个 WinRT 应用程序，在该应用程序的页面上，我有一个 GridView 显示多个项目（一些注释，类似于通过创建 ItemsPage 模板的 gridview），其源集是通过绑定到包含这些注释的数据库中的表来设置的。网格`SelectionMode` 设置为`Extended`。在同一页面上，在应用栏中，我有一个删除按钮。当我从 GridView 中选择多个项目并按下删除按钮时，我希望将它们全部删除。问题是它们并没有被全部删除，只有一半，这很奇怪（或者可能不是，我真的不知道我在这里错过了什么）

删除按钮的代码如下所示：

```
foreach (var item in ViewNotesGridView.SelectedItems)
{
    App.ViewModel.RemoveNote((Note)item);
} 
```

以下是 GridView 的一些设置：

```
<GridView 
    x:Name="ViewNotesGridView" 
    ItemsSource="{Binding Notes}"
    ItemTemplate="{StaticResource Standard200X200NoteTemplate}"
    SelectionMode="Extended"
    IsItemClickEnabled="True"
> 
```

如果我尝试一一删除它们，它可以工作，但如果我尝试同时删除多个项目，它永远不会删除所有选择的项目。

例如，我有注释 1、2、3、... 10。我将它们全部选中并单击删除，之后我仍然保留注释 2、4、6、8、10...

非常感谢任何帮助，谢谢。

# ios - 模拟器中的 UIView 边界/绘图不正确

> ID：13724173
> 
> 赞同：2
> 
> 时间：2012-12-05T13:18:52.130
> 
> 标签：ios, xcode, uiview, ios-simulator, bounds

我创建了一个单视图测试应用程序，并在主故事板中添加了一个and `UIButton`。我已经调整了按钮和视图的大小以具有相同的大小。`UIView``UIViewController`

![在此处输入图像描述](../Images/0ae3ff9dc9e2b00d27f8d9877275e050.png)

在我的 VC 的 -viewDidAppear:animated 方法中，我转储了按钮和视图的框架和边界：

```
- (void)viewDidAppear:(BOOL)animated
{
    NSLog(@"button bounds: %@", NSStringFromCGRect(self.theButton.bounds));
    NSLog(@"button frame:  %@", NSStringFromCGRect(self.theButton.frame));

    NSLog(@"view bounds:   %@", NSStringFromCGRect(self.theView.bounds));
    NSLog(@"view frame:    %@", NSStringFromCGRect(self.theView.frame));
} 
```

这是在模拟器中运行时的输出：

```
button bounds: {{0, 0},     {100, 100}}
button frame:  {{110, 72},  {100, 100}}
view bounds:   {{0, 0},     {100, 12}}
view frame:    {{110, 179}, {100, 12}} 
```

在设备上运行时：

```
button bounds: {{0, 0},     {100, 100}}
button frame:  {{110, 72},  {100, 100}}
view bounds:   {{0, 0},     {100, 100}}
view frame:    {{110, 179}, {100, 100}} 
```

我不明白为什么在模拟器中运行时视图报告高度为 12。视图在模拟器中绘制不正确，但在设备上运行时按预期绘制。请注意，`UIViewController`'s `UIVIew`topmost 未选中“Autoresize Subviews”（尽管这两种方式都没有区别）。

（Xcode 4.5.2。iOS 6.0）

谢谢， CS

![在此处输入图像描述](../Images/6c3799970a71a2fbe254cef47ecfc8c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:26:44.893

单击显示布局中的“应用 Retina 4 Form Factor”按钮。您为 Retina 4 设置了此设置，因此在模拟器中运行时屏幕大小调整为 3.5。您可以通过运行 iPhone5 模拟器（Retina 4 英寸）来验证这一点。将外形尺寸切换为 3.5 英寸后，您会注意到高度变为 12 英寸。

![在此处输入图像描述](../Images/8c4301b76ea830fe8cd020e5021823d7.png)

# atk4 - 是否可以只重新加载一行 ATK4 Grid？

> ID：13724174
> 
> 赞同：1
> 
> 时间：2012-12-05T13:18:54.047
> 
> 标签：atk4, php

是否可以仅重新加载 ATK4 Grid 的一行？

例如，在 CRUD 中的大多数情况下，在 Form 中进行更改后，您只需要重新加载一个网格行而不是所有 Grid 对象。

**编辑：**

很抱歉没有明确表示我对 ATK4（敏捷工具包）框架专用的这个功能感兴趣。我在这个问题中添加了 atk4 标签，但在主题和问题正文中没有提到“ATK4”。对此感到抱歉。

我或多或少知道如何使用 jQuery 以标准方式做到这一点，但我很感兴趣，也许有一些方法可以在 ATK4 框架中更轻松地做到这一点。像 $grid->row(ID)->reload() 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:09:48.393

Agile Toolkit 不为此提供开箱即用的功能。它曾经是 ui.atk4_grid.js 的一部分，仍然可以找到它将自定义请求发送到 Grid 视图，但是表格并不总是能很好地处理这个问题，有时您还需要重新加载多行.

您拥有为此构建附加组件的所有工具。您需要调用 grid::formatRow() 一次并返回 HTML，然后使用 JS 将其插入到网格中。

下面是旧的（删除）方法：

```
function getRowContent($id,$datatype='jquery'){

    // if DB source set
    if(isset($this->dq)){
        // *** Getting required record from DB ***
        $idfield=$this->dq->args['fields'][0];
        if($idfield=='*'||strpos($idfield,',')!==false)$idfield='id';
        $this->dq->where($idfield,$id);
        //we should switch off the limit or we won't get any value
        $this->dq->limit(1);
        #zak: This fix is if grid is not using the $this->api->db database but some else it hsould be depending only on $this->>
        $row_data=$this->dq->do_getHash(); //$this->api->db->getHash($this->dq->select());
    }
    // if static source set
    elseif(isset($this->data)){
        $found=false;
        foreach($this->data as $index=>$row){
            if($row['id']==$id){
                $row_data=$row;
                $found=true;
                break;
            }
        }
        // no data found, returning empty string
        if(!$found)return "";
    }
    else return "";
    // *** Initializing template ***
    $this->precacheTemplate(false);

    // *** Rendering row ***
    $this->current_row=$row_data;
    $this->formatRow();

    // *** Combining result string ***
    $func='formatRowContent_'.$datatype;
    return $this->$func($id);
}
protected function formatRowContent_html($id){
    $this->row_t->set($this->current_row);
    return $this->rowRender($this->current_row);
}
protected function formatRowContent_ajax($id){
    $result="";
    foreach($this->columns as $name=>$column){
        $result.=$this->current_row[$name]."<t>".$this->current_row[$name.'_original'].
            // appending styles as structured string
            "<t>".$this->getFieldStyle($name,$id).
            "<row_end>";
    }
    return $result;
}
protected function formatRowContent_jquery($id){
    $result=array();
    $i=1;
    foreach($this->columns as $name=>$column){
        $result[$i]['data']=array('actual'=>$this->current_row[$name],
            'original'=>$this->current_row[$name.'_original']);
        $result[$i]['params']=$this->tdparam[$this->getCurrentIndex()][$name];
        $i++;
    }
    $result=json_encode($result);
    return $result;
} 
```

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T17:05:31.070

在带有 js()->univ()->reloadRow($id) 的 atk4 中，它处理 jquery 客户端部分以刷新一行。现在网格（服务器部分）也需要在这个 reload_row 请求到达时输出一行而不是整个网格。这可以通过以下 Grid 扩展来完成（基于网格/内联的功能）：

```
Class TestGrid extends Grid {

  function init() {
    parent::init();
    if($row_id=$_GET[$this->name.'_reload_row']){
      $g=$this;
      $this->api->addHook('pre-render',function() use($g,$row_id){
        $g->precacheTemplate();
        foreach($g->getIterator() as $g->current_id=>$g->current_row){
          if($row_id == $g->current_id) {
            $g->formatRow();
            $result=$g->rowRender($g->row_t);
            if($g->api->jquery)$g->api->jquery->getJS($g);
            break;
          }
        }
        throw new \Exception_StopRender($result);
      });
    }
  }
} 
```

为了在页面上使用 CRUD 进行测试（它也应该只与 Grid 一起使用）：

```
$g=$this->add('CRUD', array('grid_class' => 'TestGrid'));
$g->setModel('User');
if($g->grid) {
  $g->grid->addColumn('button', 'rerow');
  if($row_id = $_GET['rerow']){
    $g->grid->js()->univ()->reloadRow($row_id)->execute();
  }
} 
```

这会产生一个带有额外按钮“Rerow”的 CRUD，单击该按钮将重新加载特定行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:57:18.480

当谈到 CRUD 时，您可能有一些包含数据行的概览。我猜想在单击`Edit`具体行后您可能会打开一个弹出窗口，其中包含一个允许用户更改该行数据的表单。当您要求刷新一个具体的行时，我也猜想您正在使用 AJAX 调用发送和存储数据。

好吧，在这里您可以利用`onSuccess`AJAX 部分的优势（使用 jQuery 时`$.ajax`）。提交数据后，您必须存储行 ID 以正确处理它。成功执行 AJAX 调用后，将调用`onSuccess`句柄，您应该在其中实现代码，该代码将使用先前存储的行 ID 寻址该行，并将单元格中的数据重置为当前已提交和存储的数据。

# c# - 顶部垂直对齐的多行文本框

> ID：13724183
> 
> 赞同：3
> 
> 时间：2012-12-05T13:19:24.750
> 
> 标签：c#, .net, wpf, xaml, textbox

我正在尝试创建一个多行`TextBox`以允许用户输入文本。

我有：

```
<TextBox Grid.Row="0"
    Height="107"
    ScrollViewer.VerticalScrollBarVisibility="Auto"
    ScrollViewer.HorizontalScrollBarVisibility="Disabled"
    AcceptsReturn="True"
    HorizontalAlignment="Left"
    Margin="164,80,0,0"
    VerticalAlignment="Top"
    Width="237"
    Text="{Binding Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" MaxLength="300" 
    TextWrapping="Wrap"/> 
```

但是文本垂直居中，我似乎找不到`TextAlignment`垂直对齐的属性。

我随后将文本框包装在边框中并删除了`Height`规范，但是当我单击文本框下方的区域（但在边框内）时，我希望文本框获得焦点，但我似乎找不到这样做的方法.

有没有人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T13:25:05.300

所以在评论中讨论之后。这是答案：

```
<TextBox Height="107"
ScrollViewer.VerticalScrollBarVisibility="Auto"
ScrollViewer.HorizontalScrollBarVisibility="Disabled"
AcceptsReturn="True"
HorizontalAlignment="Left"
Margin="657,237,0,0"
VerticalAlignment="Top"
Width="237"
Text="Text alignment left and top" MaxLength="300" 
TextWrapping="Wrap" VerticalContentAlignment="Top" HorizontalContentAlignment="Left"/> 
```

任何问题都不应悬而未决！:)

# ruby - Ruby drb 互联网连接

> ID：13724190
> 
> 赞同：0
> 
> 时间：2012-12-05T13:19:45.450
> 
> 标签：ruby, drb

我一直在用 Ruby drb 做一些测试。我有以下代码（只是在 ruby​​ 文档中找到的示例代码）

服务器：

```
require 'drb/drb'
URI="druby://:9000"
class TimeServer
  def get_current_time
    return Time.now
  end
end
FRONT_OBJECT=TimeServer.new; $SAFE = 1
DRb.start_service(URI, FRONT_OBJECT)
DRb.thread.join 
```

客户：

```
require 'drb/drb'
SERVER_URI="druby://private-ip:9000"
DRb.start_service
timeserver = DRbObject.new_with_uri(SERVER_URI)
puts timeserver.get_current_time 
```

如果我们都连接到同一个路由器（例如，共享相同的私有 ip xxx151 和 xxx155），则此方法有效。

但是，当我们在相距很远的机器上进行测试并将服务器 URI 更改`SERVER_URI="druby://public-ip-of-server:9000"`为客户端时，我们会遇到连接超时。

有谁知道解决方案？路由器上的端口转发不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T13:13:16.560

我认为您的问题是您处理的是状态完整的数据包检查防火墙[(spi)](https://en.wikipedia.org/wiki/Stateful_firewall)。大多数防火墙不允许来自外部的网络连接，这些连接不是从内部首先建立的。

Skype 解决此问题的方法是让客户端与 Internet 上的服务器建立连接，然后连接回来并让客户端连接到完成争用所需的其他端口。在任何情况下，一侧都需要接受连接。

1）如果您可以访问网络服务器，您可以将您的服务实现为一个完整的网络服务。

2) drb 不提供加密或安全性，因此您可能需要考虑将其包装在 ssl 或 ssh 中。

# php - 如何访问返回的 php 对象的 json 数据

> ID：13724193
> 
> 赞同：1
> 
> 时间：2012-12-05T13:19:49.147
> 
> 标签：php, jquery, json

我在 php 中创建了一个大型数据结构，我将其发送回 jQuery“发布”请求。数据以以下格式到达

```
"{\"event\":{\"id\":\"5\",\"title\":\"Test Event\",\"event_ref\":\"TEST\",\"approval\":\"na\",\ 
```

数据作为双引号字符串发送回，双引号已转义。url 目录标记也被转义。以上只是返回的字符串的一小部分。

*   如果我警告（数据），我会在警告框中显示字符串。
*   如果我 alert(data[0]) 我得到一个 " 显示
*   如果我 alert(data[event]) 我得到未定义的显示。

通常，我不能使用点表示法或数组表示法来访问数据。我怀疑我需要摆脱外部封闭的双引号并取消转义它。数据是一个数组，有些项目是简单的值，有些是对象，有些是对象数组。

如何访问返回的数据？尽管某些对象经常会丢失，但结构总是相同的。

js代码是：

```
//  The login button
$("#loginButton").click(    function(){
var username = $('input#login-username').val();     
var password = $('input#login-passwd').val();       
    alert("Login button clicked with username/password: "+username+" / "+password);
$.post(
    $_interface,
    { option: 'login', userID: username, pwd: password },
    function(response){
        if (response) {
//              alert("Response = true");
            $.post(
                $_interface,
                { option: 'superGlobalValues', target: 'session' },
                function(data){
                alert(data);
                    }
                );
            } else {
            alert("Response = false");  
            }
        }
    );
}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:55:36.143

1.  检查 php.ini 中的 magic_quotes_gpc 和 magic_quotes_runtime 是否已关闭（使用搜索）
2.  您也可以在 .htaccess 中写入：

    ```
    php_flag magic_quotes_gpc 0
    php_flag magic_quotes_runtime 0 
    ```

3.  您可以在请求的数据上使用 php 函数 stripslashes($string)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:26:25.520

jquery 上 .post 函数的结构是：

```
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

在这种情况下，您正在使用 url、data 和 success 函数，理论上 jquery 应该已经知道答案是 json 答案并评估对象的答案，但只是为了确保更改您的代码以添加 json数据类型：

```
$.post(
  $_interface,
  { option: 'login', userID: username, pwd: password },
  function(response){
    if (response) {
        // alert("Response = true");
        $.post(
            $_interface,
            { option: 'superGlobalValues', target: 'session' },
            function(data){
            alert(data);
                }
            );
        } else {
        alert("Response = false");  
        }
    }, "json"
); 
```

如果这不起作用，只需评估答案，而不是这样做

```
function(data) {
  alert(data);
} 
```

做类似的事情

```
function(data) {
  my_json = eval(data);
  alert(my_json);
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T13:25:33.257

[jQuery ajax](http://api.jquery.com/jQuery.ajax/)对象具有参数 dataType，可以将其设置为 JSON，您将获得正确的解析响应作为对象。例子：

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: function(data){ //data contains parsed response, try to console.log this },
  dataType: 'json'
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T13:28:20.377

Vadim 是对的，或者使用 var myObj = JSON.parse(data)。

# javascript - 如何使用fancybox标题将iframe输入值发送给父级

> ID：13724194
> 
> 赞同：0
> 
> 时间：2012-12-05T13:19:50.117
> 
> 标签：javascript, ajax, fancybox, fancybox-2

我试图这样做，但结果为零：

```
 $(".fancybox-html").fancybox({
    type                : 'iframe',
    beforeLoad: function() {
        this.title = '<li onclick="parent.sendIframeDataToParent(document.getElementsByName(&quot;sector&quot;), &quot;sector_hook&quot;);">Submit</li>'
    }
}); 
```

这是 iframe 中输入的代码：

```
<input type="checkbox" id="contact" name="sector" value="cellular"> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:47:19.430

尝试这个：

```
$(".fancybox-html").fancybox({
      type : 'iframe',
      beforeShow : function(){
      contactChecked = $('.fancybox-iframe').contents().find('#contact').is(':checked');
    },
      afterClose: function(){
      //   The checkbox state is now available in the parent to do with as you wish
      alert(contactChecked); 
    }
}); 
```

注意：这仅适用于 Fancybox2。

# internationalization - gettext：如何退回到基础语言？

> ID：13724198
> 
> 赞同：1
> 
> 时间：2012-12-05T13:20:03.660
> 
> 标签：internationalization, wxwidgets, gettext

我打算使用 wxWidgets 重写我们的应用程序。也正因为如此，我想使用使用`gettext`人类语言的方式。我们目前使用其中四个：捷克语、斯洛伐克语、英语和德语。特定的语言并不那么重要。

重要的是，捷克语和英语被认为是一种基础语言。这意味着如果使用切换到德语，并且文本没有在那里定义，他或她会自动获取英文文本（这里的 gettext 没有问题）。但是，当用户使用斯洛伐克语时，备用语言是捷克语。当用户使用英语时，它甚至可以退回到捷克语（开发人员的一种错误，因为英语也应该是完整的）。

我知道 gettext 默认使用一种语言——直接写在源代码中。其他语言以 .mo 文件的形式提供。刚接触 gettext 和 wxWidgets...

有没有办法实现回退到与默认语言（即源文件）不同的另一种显式语言？换句话说，内存中可以存在更多语言并动态切换吗？

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:53:48.097

不，你不能有选择地提供这样的后备。OTOH 绝对没有什么能阻止您将捷克语翻译复制到斯洛伐克语（即`cp cz.po sk.po`），然后只用真正的斯洛伐克语翻译替换其中的一些。而且，当然，对于德语，如果您在资源中使用英语，它应该会自动工作（即使您的母语是捷克语，我强烈建议您这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:49:06.363

您的应用程序将显示的语言由 wxLocale ( [http://docs.wxwidgets.org/trunk/classwx_locale.html](http://docs.wxwidgets.org/trunk/classwx_locale.html) )控制

当您的应用程序启动时，您可以通过调用 Init(wxLANGUAGE_DEFAULT) [http://docs.wxwidgets.org/trunk/classwx_locale.html#a37c254f20d4862b6efea2fedf63a231a将语言设置为系统默认值](http://docs.wxwidgets.org/trunk/classwx_locale.html#a37c254f20d4862b6efea2fedf63a231a)

[您可以通过调用 GetLanguage() http://docs.wxwidgets.org/trunk/classwx_locale.html#a6516d2529c936e441d7d23c42dc3e1b4](http://docs.wxwidgets.org/trunk/classwx_locale.html#a6516d2529c936e441d7d23c42dc3e1b4)查看已加载的语言

如果返回的语言不是您支持的语言之一，那么您可以将其更改为您想要用作该特定语言的后备的任何语言。例如，如果 GetLanguage 告诉您使用了德语，您的代码可以将其设置为英语，但如果斯洛伐克语则回退到捷克语，依此类推，您希望定义多少对。

```
// set languagew to system default
myLocale = new wxLocale;
myLocale->Init();

// find language being used and choose fallback if required
switch( myLocale->GetLanguage() ) {
   case wxLANGUAGE_ENGLISH: case wxLANGUAGE_CZECH: ...
   // a language we support, nothing more needed
   break;
   case wxLANGUAGE_SLOVAK: ...
   // a language that falls back to czech
   myLocale->Init( wxLANGUAGE_CZECH ); break;
  case wxLANGUAGE_GERMAN: ...
   // a language that falls back to english
   myLocale->Init( wxLANGUAGE_ENGLISH ); break;
   default:
   // a language we dont support and have not specified a fall back for
   // for now, let's go with english
   myLocale->Init( wxLANGUAGE_ENGLISH ); break;
} 
```

# objective-c - 在静态库 iOS 中导入标头

> ID：13724199
> 
> 赞同：2
> 
> 时间：2012-12-05T13:20:14.157
> 
> 标签：objective-c, ios

我有一个相对简单的问题，希望能得到答案。

想象一下，我在 iOS 中有一个静态库，比如 MyLibrary.a

在这个库中说有一些 .m 文件调用：`"#import SomeHeaderWhichDoesNotYetExist.h"` - 但是问题是，当`"#import SomeHeaderWhichDoesNotYetExist.h"`调用时， SomeHeaderWhichDoesNotYetExist.h 可能不一定存在于项目中（正如其标题所暗示的那样）。例如，

```
#ifdef something
#import SomeHeaderWhichDoesNotYetExist.h
#endif 
```

当有人**使用**Mylibrary.a 时——他/她可能会在**稍后**实现 SomeHeaderWhichDoesNotYetExist.h，并且我们希望 MyLibrary.a 能够按照上面代码中的指定自动使用它。你认为这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:42:16.110

如您所见，我们经常使用类似的类型

```
#ifdef TARGET_OS_IPHONE 
    // iOS
#elif defined TARGET_IPHONE_SIMULATOR
    // iOS Simulator
#elif defined TARGET_OS_MAC
    // Other kinds of Mac OS
#else
    // Unsupported platform
#endif 
```

所以我会说，**是的，你可以**！

但是你需要定义`something`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:26:16.720

不，它不能，至少不是你展示的方式。

您显示的条件编译块用于预处理器，它在编译之前被调用。如果您想以这种方式包含任何新内容，则必须重新构建。

# java - “org.xml.sax.SAXException：SimpleDeserializer 遇到了一个子元素，这是不应该的......”在 java 中调用 web 服务时出错

> ID：13724200
> 
> 赞同：0
> 
> 时间：2012-12-05T13:20:13.350
> 
> 标签：java, web-services, exception, sax, runtime-error

我正在尝试从 java 中的 eclipse 调用 opentaps 的 web 服务。我有代码

```
Service service = new Service();
        Call call = (Call) service.createCall();

        call.setTargetEndpointAddress(new java.net.URL("url"));
        call.setOperationName(new QName("quickCreateCustomer", "quickCreateCustomer"));

        call.addParameter("emailAddress", org.apache.axis.Constants.XSD_STRING, javax.xml.rpc.ParameterMode.IN);
        call.addParameter("firstName", org.apache.axis.Constants.XSD_STRING, javax.xml.rpc.ParameterMode.IN);
        call.addParameter("lastName", org.apache.axis.Constants.XSD_STRING, javax.xml.rpc.ParameterMode.IN);
        call.addParameter("login.password", org.apache.axis.Constants.XSD_STRING, javax.xml.rpc.ParameterMode.IN);
        call.addParameter("login.username", org.apache.axis.Constants.XSD_STRING, javax.xml.rpc.ParameterMode.IN);

        call.setReturnType(org.apache.axis.Constants.XSD_STRING);

        Object responseWS = call.invoke(new Object[] { "mail_id", "s", "h", "pwd", "user_name" });

        System.out.println("ReceivingResponse: " + (String) responseWS);

        output = call.getOutputParams(); 
```

但它给出了运行时错误，

```
- Unable to find required classes (javax.activation.DataHandler and javax.mail.internet.MimeMultipart). Attachment support is disabled.
- Exception:
org.xml.sax.SAXException: SimpleDeserializer encountered a child element, which is NOT  expected, in something it was trying to deserialize.
at org.apache.axis.encoding.ser.SimpleDeserializer.onStartChild(SimpleDeserializer.java:145)
at org.apache.axis.encoding.DeserializationContext.startElement(DeserializationContext.java:1035)
at org.apache.axis.message.SAX2EventRecorder.replay(SAX2EventRecorder.java:165)
at org.apache.axis.message.MessageElement.publishToHandler(MessageElement.java:1141)
at org.apache.axis.message.RPCElement.deserialize(RPCElement.java:236)
at org.apache.axis.message.RPCElement.getParams(RPCElement.java:384)
at org.apache.axis.client.Call.invoke(Call.java:2448)
at org.apache.axis.client.Call.invoke(Call.java:2347)
at org.apache.axis.client.Call.invoke(Call.java:1804)
at TriongleJava.main(TriongleJava.java:36)
org.xml.sax.SAXException: SimpleDeserializer encountered a child element, which is NOT expected, in something it was trying to deserialize. 
```

在线上

```
Object responseWS = call.invoke(new Object[] { "mail_id", "s", "h", "pwd", "user_name" }); 
```

由于我是 Java 新手，我不知道如何删除它，甚至我也不知道错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T15:38:44.950

我们的团队在使用轴 1.4.1 访问 web 服务时遇到了同样的错误，问题是由于更高版本的 JRE 即 JRE 1.6.0_37。使用 JRE 1.6.0 时，它开始在 Eclipse java 项目和 Jetty web 应用程序中工作。

干杯，尼桑特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:25:45.940

似乎您缺少对[JavaMail](http://www.oracle.com/technetwork/java/javamail/)包（`mail.jar`和`activation.jar`）的运行时依赖项。

# asp.net - 为什么我的 ASP.NET MVC4 ActionLink Ajax 代码不发出异步请求？

> ID：13724204
> 
> 赞同：0
> 
> 时间：2012-12-05T13:20:32.163
> 
> 标签：asp.net, ajax, asp.net-mvc-4

为什么这段代码不能正常工作？显示了链接，但是当我单击它时，请求不是异步发出的。相反，浏览器发出了一个正常的请求！:/ 注意：我使用的是 ASP.NET MVC 4！

这是我的 CSHTML 块代码：

```
<div id="latestReviews"></div>

@Ajax.ActionLink("Click here to see the latest review", "LatestReviews", "Home", null, new AjaxOptions {
    UpdateTargetId =  "latestReviews",
    InsertionMode = InsertionMode.InsertAfter,
    HttpMethod = "GET"
}) 
```

这是我的控制器动作：

```
 [HttpGet]
    public PartialViewResult LatestReviews(){
        var review = RestaurantReviewQueries.FindTheLatest(_db.Reviews, 1).Single();
        return PartialView("_Review", review);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:16:39.017

最后我解决了这个问题！在 _Layout.cshtml 中有一个可选部分可以在视图中呈现，称为“脚本”。我所做的只是渲染“脚本”部分：

```
@section scripts {
     <script type="text/javascript" src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
}

    ...

<div id="latestReviews"></div>

@Ajax.ActionLink("Click here to see the latest review", "LatestReviews", "Home", null, new AjaxOptions {
    UpdateTargetId =  "latestReviews",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "GET"
}) 
```

# ssis - 在 SSIS 中使用日志记录和事件处理程序有什么区别？

> ID：13724206
> 
> 赞同：2
> 
> 时间：2012-12-05T13:20:38.920
> 
> 标签：ssis

如果我想在 SISS 包中发生某些事件时保存信息/日志，哪种方式更好？

1.  使用 SSIS 日志记录 - 将提供程序类型设置为 SQL Server 并选择要存储在 SQL Server 中的事件。
2.  在包/任务上使用事件处理程序并使用执行 sql 任务将信息保存到 SQL Server 中的表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:18:08.470

更好是主观的。只有了解您的要求，您才能确定一个是否比另一个更好。

## SSIS 日志记录

这是一种简单的、开箱即用的跟踪包裹进度的机制。该表已经存在于 SQL Server 中，并且如果您登录到除 msdb 之外的其他内容（请允许），则会将其复制到目标目录中。如果它为您关心的事件记录的信息符合您的要求，那么这是一个明智的选择。

## 事件处理程序

事件处理程序路由为记录的信息提供了更大的灵活性。事实上，如果您有需要，您可以在事件处理程序中拥有完整的工作流程（我强烈建议*不要*使用这种方法）和事件处理程序。使用事件处理程序记录内容的缺点是您需要在任何地方进行设置。复制和粘贴在 2012 年变得不那么不稳定了，但是对您的日志记录的任何更改都必须在您的所有包中永久存在。

在最长的时间里，我们使用“两者”的方法来记录包裹信息。我们的日志记录到 SQL Server，我们记录了 OnError、OnTaskFailed、OnWarning、OnInformation、OnPreExecute、OnPostExecute。这为我们提供了比我们通常需要的更多信息，但它很容易访问，所以我们保留了它。

我们还连接了一个 OnTaskFailed 事件，以向待命寻呼机发送电子邮件，详细说明有关失败的信息。当我们每天运行 3 个包时，这很好用。当我们要运行数百个包时...... Ick。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:57:13.397

**事件处理程序**应该用于处理该事件，即不仅仅是记录信息。换句话说，它们提供了比日志记录更多的功能。

而 SSIS 日志记录只是顾名思义。

# ios - 尝试将 AdWhirl 与 Admob 一起使用时出错

> ID：13724208
> 
> 赞同：5
> 
> 时间：2012-12-05T13:20:46.400
> 
> 标签：ios, ios5, admob, adwhirl

我正在尝试为 AdWhirl 设置一个测试应用程序，以查看它的功能等。我在 Xcode 中设置了一个新应用程序，它只加载一个视图。

我已经下载并添加了 AdWhirl 的最新 SDK，然后删除了我不使用的适配器中的所有文件夹...按步骤 4 - [https://www.adwhirl.com/doc/ios/AdWhirliOSSDKSetup.html](https://www.adwhirl.com/doc/ios/AdWhirliOSSDKSetup.html)

然后我下载了适用于 AdMob 的 SDK 并在 Admob 上设置了一个新应用程序，将相关的 pub ID 输入到 AdWhirl 的设置中......我还在吗？

在不对应用程序本身进行任何进一步更改的情况下，我会收到以下构建错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SKStoreProductViewController", referenced from:
  objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
"_SKStoreProductParameterITunesItemIdentifier", referenced from:
  -[GADOpener openInAppStore:fallbackURLString:] in libGoogleAdMobAds.a(GADOpener.o) 
```

ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我有所有相关的图书馆包括图片来展示。还包括一张图片来显示文件的布局。

有没有人遇到过这个问题，可以帮忙。这里的很多帖子都说要检查 MessageUI 框架并检查框架搜索路径的构建设置，但在这种情况下这一切都很好......

![在此处输入图像描述](../Images/ba81001fb38e0c32d1888b7282bcdc9f.png)

![在此处输入图像描述](../Images/ae4bcd5a1012a761f40de147b9de90ba.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T13:35:27.393

看起来您缺少 Admob 所需的**StoreKit**框架。尝试将其添加到您的项目中。请参阅[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T09:37:31.103

我注意到当我在项目的“*功能*”选项卡中将“应用内购买”开关切换为“关闭”时，*StoreKite.framework自动取消链接。*厚脸皮。

# html - CSS left, position 和 floating ...在多个浏览器中的不同结果

> ID：13724210
> 
> 赞同：0
> 
> 时间：2012-12-05T13:20:48.290
> 
> 标签：html, css

左，位置和浮动。不同的结果导致多个浏览器。这里发生了什么？提前致谢！

图片在这里[CSSProblem](http://img853.imageshack.us/img853/9684/whywl.jpg)

这是带有标头值的 Index.css

```
 #static_header { background: url('white_grid_bg.png') repeat scroll 0% 0% transparent; height: 80px; border-top: 1px solid rgb(201, 208, 214); width:100%; position: relative; }
            #static_header .link_wrapper { width: 960px; padding: 0px 10px; margin: auto; }
            #static_header .link_wrapper a { float: right; position: relative; text-transform: uppercase; }

            #static_header .link_wrapper img { float: right; position: relative; top: 26px; /*padding-right: -154px;*/  padding-left:15px;border-left: 1px dotted black;z-index:8;  width: 11%; }
            #static_header .link_wrapper .txtlink { top: 30px; margin-right: 20px; font-family: helvetica,arial,sans-serif; font-size: 12px; font-weight: bold; color: rgb(105, 113, 126); text-decoration: none; padding: 1px 0px; }
            #static_header .link_wrapper a.txtlink:hover, #static_header .link_wrapper a.txtlink.active { color: rgb(17, 68, 132); border-bottom: 2px solid rgb(50, 142, 236); }
            #static_header .link_wrapper #header_logo { float: left; background: url('aspelogo6.png') no-repeat scroll 0% 0% transparent; height: 90px; width:90px; top: 3px; position: relative; z-index: 400;  left: 0px; margin-left: -98px;display:block; width:10%; } 
```

这是导航的 HTML 代码

```
 <!-- Navigation Panel -->
        <div class="container">

            <div >  
              <ul id="nav">
                <li class="current"><a href="#" title="Home" >Home</a></li>
                <li><a href="http://www.freshdesignweb.com/" >Catalogs</a></li>
                <li><a href="http://www.freshdesignweb.com/" >Products</a></li>
                <li><a href="http://www.freshdesignweb.com/" >About Us</a></li>
                <li><a href="http://www.freshdesignweb.com/" >Contact</a></li>
              </ul>
            </div>  
        </div> 
```

这是导航样式表

```
 /*  NAVIGATION Buttons*/
            #nav { top: -1091px; padding-top: 0.85em; width: 50%;font-family:'Alegreya SC', Georgia, serif; font-size: 1.4em; position:relative; z-index:118;  float:right; right: 290px;  }
            #nav li { margin: 0 0 0.5em 0; display: block; float: left; clear: none; margin-right: 2.5%; background:#d18b5e; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; padding:5px 10px 5px 10px;}
            #nav li:last-child { margin-right: 0; }
            #nav a { display: block; color: #FFF; text-decoration:none; }
            #nav a:hover { color: #484a50; border-bottom-color: #484a50; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:25:11.397

尝试添加`position:relative`到导航的容器 div，然后添加`position:absolute;`导航。

和`float:right;`打得`position:relative;`不好。

# javascript - 通过 THREE.js 中的 Object Loader 获取对象的纹理

> ID：13724212
> 
> 赞同：0
> 
> 时间：2012-12-05T13:21:02.973
> 
> 标签：javascript, webgl, three.js

我通过 THREE.js 中的 Object Loader 加载树模型，但没有加载任何纹理，它只是一个简单的树，上面有白光。代码是

```
var loader = new THREE.OBJMTLLoader();
loader.addEventListener('load', function (event) {
    var object = event.content;
    object.position.y = 0;
    object.position.x = 500;
    object.position.z = 500;
    object.rotation.x = -(Math.PI / 2);
    object.scale.set(5, 5, 2);
    scene.add(object);
});
loader.load('obj/Palm_Tree.obj', 'obj/Palm_Tree.mtl'); 
```

我应该怎么做才能加载树纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:43:51.617

默认行为根据 MTL 文件中的 'map_kd' 值分配三个 js 材质的 'map' 参数。确保它在那里指定。

它使用 'loadTexture()' 而不是 'loadCompressedTexture()' 所以请注意默认行为不处理 DDS 文件。

# jquery - 移动设备的左右滑动菜单

> ID：13724213
> 
> 赞同：3
> 
> 时间：2012-12-05T13:21:04.343
> 
> 标签：jquery, css, menu, uislider

只是想知道是否有人遇到过解释如何实现这种响应式菜单导航的教程或网站，在移动设备上，您可以在菜单之间左右滚动。如 AIDS.GOV 网站[http://www.aids.gov/](http://www.aids.gov/)所示。

我在这里发布这个不仅仅是懒惰，我整个上午都在寻找，只能在菜单教程中找到一个 facebook 风格的幻灯片。

提前致谢

# javascript - 删除具有特定类名的 tr

> ID：13724215
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:21:13.673
> 
> 标签：javascript

我必须删除某些在表中有特定类的 tr..我尝试了下面的东西，但它似乎不起作用

```
var d1 = document.getElementsByClassName("t1");
    for (var i = 0; i < d.length; i++) {
        d1[i].parentElement.removeChild(d1[i]);
    } 
```

有人可以指导我正确的方向吗

```
<html>
    <head>
        <script type="text/javascript">
            function removeTR (){
            }
        </script>
    </head>
    <body onload="javascript:removeTR()">
        <table>
            <tr >
                <td></td>
            </tr>
            <tr class="t1">
            </tr>
            <tr class="t1">
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:26:00.543

您有一些拼写错误和另一个更基本的问题：您不能以这种方式迭代并同时删除[getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)返回的动态集合（实时 NodeList） 。

```
var d = document.getElementsByClassName("t1");
for (var i = 0; i < d.length; i++) {
    d[i].parentElement.removeChild(d[i]);
} 
```

在第二次迭代中，您将尝试删除索引 1 处的元素，但索引 0 处仍有一个元素，因此永远不会被删除。

一个解决方案是这样的：

```
var d = document.getElementsByClassName("t1");
while (d.length) d[0].parentElement.removeChild(d[0]); 
```

[示范](http://jsfiddle.net/6sGNW/)

# android - IOS safari 和 Android 股票浏览器不会在 png 图像中呈现透明像素

> ID：13724217
> 
> 赞同：1
> 
> 时间：2012-12-05T13:21:15.950
> 
> 标签：android, ios, browser, png, transparency

我有一个漂亮的半透明绿色花朵背景图像，应该整齐地环绕图像。对于桌面浏览器，它运行良好

![左右两边的花好看](../Images/206926b2997ccd7d7f2b43abe22c5ee3.png)

但在移动平台股票浏览器上它看起来像（这是从我尝试索引 PNG 时开始的，但使用完整的 24 位 png 它呈现相同（除了相同的光滑白花）

![在 IOS 和 android 股票上渲染](../Images/08e52788dcc125351a87429af78315d5.png)

我为此使用的 CSS 代码是：

```
body div.econtainer div.makeitnice div.flowers 
    {
    position:absolute;
    top:0px;
    right:30px;
    background:none;
    background-color: transparent;
    background-image: url(images/greenflowers.png);
    width:790px;
    height:200px;
    } 
```

即使我只是简单地使用`<img src="images/greenflowers.png">`它，它仍然会以白色背景呈现。

有谁知道在股票浏览器上正确显示半透明 png 的解决方案？

这是我尝试使用的透明png：

![绿花](../Images/4bd92b8c46b73ec94fbca9fe7267bc07.png)

我正在尝试在此背景之上使用它：

```
border-bottom-style:solid;
border-bottom-color:#fff;
border-bottom-width:1px;
position:absolute;
top:0px;
left:0px;
width:100%;
height:200px;
max-height:200px;
margin-top:30px;
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDE3OCwyMDEsMCwxKTsiIC8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDEzMywxNTEsMCwxKTsiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgZmlsbD0idXJsKCNncmFkaWVudCkiIGhlaWdodD0iMTAwJSIgd2lkdGg9IjEwMCUiIC8+PC9zdmc+);
background-image: linear-gradient(bottom, #859700 0%, #B2C900 40%);
background-image: -o-linear-gradient(bottom, #859700 0%, #B2C900 40%);
background-image: -moz-linear-gradient(bottom, #859700 0%, #B2C900 40%);
background-image: -webkit-linear-gradient(bottom, #859700 0%, #B2C900 40%);
background-image: -ms-linear-gradient(bottom, #859700 0%, #B2C900 40%);
background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.0, #859700),
    color-stop(0.4, #B2C900)
);

padding:0px;
overflow:visible;
-webkit-box-shadow: 0px 4px 5px rgba(50, 50, 50, 0.20);
-moz-box-shadow:    0px 4px 5px rgba(50, 50, 50, 0.20);
box-shadow:         0px 4px 5px rgba(50, 50, 50, 0.20);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:25:06.190

试试这个添加

```
getWindow().getAttributes().format = android.graphics.PixelFormat.RGBA_8888; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:48:09.120

我有一个很大的面部表情时刻。

我已经为此奋斗了两个月，我根本无法弄清楚其中的逻辑。问题出在 econtainer 元素中，它有一个参数：width:100%。

发生的情况是它只将宽度渲染到视口的实际页面宽度。

因此，如果您在移动设备上有一个 480 像素宽的浏览器屏幕，它会将宽度设置为 480 像素，渲染 480 像素的渐变，并且在您横向滚动时不会重新渲染。

通过添加 min-width:1200px 解决了这个问题；现在它可以正确渲染了！

谢谢大家关注这个...

# macos - 带有旋转的 Layer-Backed View 上的核心动画

> ID：13724222
> 
> 赞同：0
> 
> 时间：2012-12-05T13:21:30.043
> 
> 标签：macos, cocoa, core-animation

只想旋转 NSView （没有动画）。图层支持视图（setWantsLayer=YES）。适用于不透明度、位置。但是当我尝试旋转时

```
[view.layer setValue:[NSNumber numberWithInt:45*M_PI/180] forKeyPath:@"transform.rotation.y"]; 
```

什么都没发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:42:01.997

您正在旋转 0 度。

45 * π / 180 = 0.785`int`是 0。

将您的 NSNumber 更改为浮点数或双精度数

```
[NSNumber numberWithFloat:45*M_PI/180] 
```

# monitoring - 详细的多任务监控

> ID：13724225
> 
> 赞同：0
> 
> 时间：2012-12-05T13:21:33.860
> 
> 标签：monitoring, multitasking, preemption

我正在尝试组装一个计算机模型并在其上运行一些模拟（学校作业的一部分）。这是一个非常简单的模型 - 一个 CPU、一个磁盘和一个进程生成器，它生成轮流使用 CPU 和访问磁盘的用户进程（我决定省略各种系统进程，因为根据 Process Explorer 他们使用下一个没有 CPU 时间 - 我基于在 Windows 7 上运行的 Microsoft Process Explorer 工具）。这就是我停下来的地方。

我不知道如何获取有关各种进程读/写磁盘的频率、一次有多少数据以及它们使用 CPU 的时间的相关数据。假设我想获得一些关于 PC 上一些典型操作的统计数据——播放音乐/电影、浏览互联网、玩游戏、使用 Office、视频编辑等等……有没有办法收集这些数据？

我正在使用 RR 模拟抢占式多任务处理，时间量为 15 毫秒以切换进程​​，这就是它的外观：
-> 进程到达 CPU
-> 进程在 0-15 毫秒内完成工作，放弃 CPU 或被切断
现在，出现了两种选择：
a）进程只是在它再次获得 CPU 之前或在它获得一些用户输入之前（如果无事可做）就坐下来等待 b）从磁盘处理请求的数据，并且在所述数据之前不重新加入队列可用

我希望模型中a）和b）之间的决定基于概率来完成，例如a）为90％，b）为10％。但我不知道如何让这些百分比对于某种类型的流程至少有点现实。此外，一个进程通常可以同时访问多少数据？

有任何可用的提示、资源、实用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:25:14.860

我想我自己找到了答案，尽管答案并不可靠。

适用于 Windows 的 Process Explorer 实用程序测量磁盘 I/O - 按容量和出现次数。因此，有一个粗略的方法可以得到答案：假设一个进程在 30 分钟内执行 3 000 次读取，同时在此期间使用 2% 的 CPU（假设是单核 CPU）。因此，该进程使用了​​ 36000 毫秒的 CPU 时间，分为约 5200 个块（这是不可靠的部分 - 该进程很可能不会使用整个时隙，所以我将只除以一半的时隙）。3000/5200 在使用 CPU 后有 57% 的机会读取数据。

我希望我没有误解 Process Explorer 中的“读取”统计信息。

# jquery - 在联系表单的弹出窗口中添加电子邮件字段，然后提交

> ID：13724228
> 
> 赞同：0
> 
> 时间：2012-12-05T13:21:40.887
> 
> 标签：jquery, html, dialog, popup

我正在尝试制作一个联系表单，当用户单击提交时，会弹出一个弹出窗口，并要求验证电子邮件和电子邮件和提交按钮的输入字段。

所以数据应该传递给弹出窗口。

我为此使用对话框 jquery。尝试在 jsfiddle.net 上制作它，但我不是那么好听。

这是我的代码：

表格代码：

```
 <form action="contact-submit.php">
   First Name : <input type="text" name="firstname" /><br />
   Last  Name  : <input type="text" name="lastname" />
   <div class="dialog"> //used to popup
    Verify your email address <br />
    <input type="text" name="email" />
    <input type="submit" />
    </div>
   </form> 
```

# java - 单例和公共静态变量 Java

> ID：13724230
> 
> 赞同：11
> 
> 时间：2012-12-05T13:21:45.660
> 
> 标签：java, singleton, static-variables

我有两个选择：

1.  单例模式

    ```
    class Singleton{
        private static Singleton singleton = null;

        public static synchronized Singleton getInstance(){
            if(singleton  == null){
                singleton = new Singleton();
            }
            return singleton;
        }
    } 
    ```

2.  使用`static final`字段

    ```
    private static final Singleton singleton = new Singleton();

    public static Singleton getSingleton() {
        return singleton;
    } 
    ```

有什么不同？（单线程或多线程）

更新：我知道 Bill Pugh 或`enum`方法。我不是在寻找正确的方法，但我只使用了 1。b/w 1 或 2 真的有什么区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T13:23:01.697

主要区别在于，使用第一个选项，单例只会在`getInstance`被调用时被初始化，而使用第二个选项，它会在包含类被加载后立即被初始化。

第三个（首选）惰性且线程安全的选项是使用枚举：

```
public enum Singleton {
    INSTANCE;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T13:26:22.613

有一个区别：

解决方案1是延迟初始化，单例实例将在第一次调用时创建`getInstance`

解决方案 2 是急切初始化，单例实例将在类加载时创建

它们都是线程安全的，调用第二个多线程有点误导

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T16:15:02.967

第一种解决方案似乎更懒惰，但实际上并非如此。

当第一次访问静态方法/字段时初始化一个类。

这很可能`getInstance()`是该类唯一可公开访问的静态方法/字段。这就是单例的意义所在。

然后当有人`getInstance()`第一次调用时初始化该类。这意味着这两种解决方案在惰性方面基本相同。

当然，第二种解决方案看起来更好，性能更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T13:26:52.460

因此，通过更新，上述两个选项都是线程安全的。但是，该`synchronized`选项要求调用`instance`的每个线程都获取此锁，因此如果这样做会降低性能。此外，`synchronized`在方法级别使用具有使用公共可用锁（类本身）的潜在问题，因此如果某个线程获取此锁（它可以），您最终可能会出现死锁。该`static final`选项性能更高，但不会对单例进行延迟初始化（取决于系统，这可能不是问题）。

另一个允许 Singleton 的线程安全惰性初始化的选项如下：

```
 public class MySingleton{
      private static class Builder{
          private static final MySingleton instance = new MySingleton();
      }

      public static MySingleton instance(){
           return Builder.intance;
      }
 } 
```

这是因为静态内部类保证在包含类中的任何方法被执行之前被初始化。

# facebook - Facebook 应用程序图标未显示在链接中

> ID：13724231
> 
> 赞同：1
> 
> 时间：2012-12-05T13:21:46.760
> 
> 标签：facebook, icons, hyperlink

我开发了我的第一个 facebook 应用程序，并为它上传了缩略图和图标![在此处输入图像描述](../Images/83e1d4f5abe20d9453f3bc9547224990.png)。但是，当我链接我的应用程序或将其发布到某人的墙上时，该图标会显示为好像我没有上传它一样。

![在此处输入图像描述](../Images/a686cb7666b75c557cf63297c84da6f5.png)

我的问题是这张图片是否应该在我的 PHP api 代码中，还是我必须从我的 facebook 应用程序页面上传它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:41:26.967

我找到了解决方案。似乎 facebook 缓存有问题，所以我使用了[调试工具](https://developers.facebook.com/tools/debug)，现在每当我分享链接时，我的缩略图就会显示出来。我不需要在代码中做任何事情，只需要在 facebook 应用程序 UI 上。

# android - 如何提取 ramdisk.img

> ID：13724232
> 
> 赞同：7
> 
> 时间：2012-12-05T13:21:52.693
> 
> 标签：android, rom

使用 ubuntu

我输入**文件 ramdisk.img**并且终端显示**ramdisk.img**：数据，我使用`cpio`并没有提取任何内容！我怎么能`extract`这样**ramdisk.img**？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-05T14:00:10.527

**ramdisk.img**实际上很有可能是一个压缩文件**ramdisk.cpio.gz**。要提取它，请使用以下命令：

```
cd /Path/To/Folder/With/ramdisk.cpio.gz/File
mkdir temp_directory && cd temp_directory
gunzip -c ../ramdisk.img | cpio -idm 
```

查看此博客文章了解更多信息：[http ://blog.djodjo.org/?p=536](http://blog.djodjo.org/?p=536)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:30:11.253

您可以挂载图像：

```
mkdir ~/img_mnt
mount -t udf filename.img ~/img_mnt -o loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T21:26:43.780

只需使用 p7-zip，它是 7z 仅适用于 POSIX。

```
7z e ramdisk.e RamdiskExtracted 
```

不过，我不确定是否要重新打包和保留元数据。

我想你可以将它安装为 rw 吗？

# google-provisioning-api - Java 的 Google Apps Provisioning API 可选属性 IP_WHITELIST

> ID：13724235
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:22:16.107
> 
> 标签：google-provisioning-api

我正在创建一个系统以将客户内部系统与 Google 配置集成。出现的一件事是Java 的 Google Apps Provisioning API 上**IP_WHITELIST optionalAttribute 的含义，**[见此处](https://developers.google.com/google-apps/provisioning/#creating_a_user_for_a_domain_experimental)。

它对创建的用户有什么作用，因为我在 Google Apps 的 CPanel 上没有找到任何与此项目匹配的属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:43:56.003

它没有做任何事情。默认情况下它始终为 False，但切换它不会影响用户从任何 IP 地址登录的能力。我的理解是它是谷歌使用但被放弃的东西，所以它相当于一个没有电线在任何地方运行的电灯开关。

# c# - 从asp.net c中的列表视图访问数据控件

> ID：13724236
> 
> 赞同：0
> 
> 时间：2012-12-05T13:22:22.493
> 
> 标签：c#, asp.net

我已经在这方面工作了一段时间了。我只是想访问数据列表中的内容。我可以从 PageLoad 中很好地获取项目，甚至设置一些动态项目.. 但我无法从我的按钮单击处理程序访问控件。我尝试过其他变体，例如

```
ListView1.FindControl("DropDownList1") as DropDownList; 
```

这给出了一个NULL。我试过了

```
<asp:LinkButton id="addPro" runat="server" CommandArgument='<%# DropDownList1.SelectedItem.Text %>' onCommand ="addPro_Click">Add To Cart</asp:LinkButton> 
```

这表示它无法在范围内找到数据控制。

```
 <asp:ListView ID="ListView1" runat="server" 
        DataKeyNames="Expr7,Expr1,productNo" DataSourceID="SqlDataSource1">
        <AlternatingItemTemplate>
            <span style="">
            <asp:Label ID="productNameLabel" runat="server" 
                Text='<%# Eval("productName") %>' />
            <br />
            <asp:Image runat="server" height = "300" ImageUrl='<%# Eval("img") %>'></asp:Image>
            <br />
            Description:<br />
            <asp:Label ID="itemNotesLabel" runat="server" Text='<%# Eval("itemNotes") %>' />
            <br />

            stock:
            <asp:Label ID="stockLabel" runat="server" Text='<%# Eval("stock") %>' />
            <br />
            price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# "$"+ Eval("price")+".00" %>' />
            <br />

            Quantitiy: <asp:DropDownList id="DropDownList1" runat="server"> </asp:DropDownList>            
            <br />

            <asp:LinkButton id="addPro" runat="server" CommandArgument='<%# Eval("productNo") %>' onCommand ="addPro_Click">Add To Cart</asp:LinkButton>
            <br /><br /><br />
<br /></span>
        </AlternatingItemTemplate> 
```

点击时

```
protected void addPro_Click(Object sender, CommandEventArgs e)
{
    string addr = "";
    string v = Request.QueryString["cat"];
    if (v != null)
    {
        v = "cat=" + v+"&";
    }
    else
    {
        v = "";
    }

    DropDownList stockDD = (DropDownList) FindControl("DropDownList1");
    if (stockDD != null)
        addr = "~/product.aspx/?" + v + "add=" + e.CommandArgument.ToString() + "&quant=" + stockDD.SelectedItem.Text;
    else
        addr = "ERROR!";
    Response.Redirect(addr+e.CommandArgument.ToString());        
    ListView1.ItemDataBound += (sa, ea) =>
        {
            DropDownList stockD = ea.Item.FindControl("DropDownList1") as DropDownList;
            Label l = ea.Item.FindControl("Lable12") as Label;
            l.Text = stockD.SelectedItem.Text;
            addr = "~/product.aspx/?" + v + "add=" + e.CommandArgument.ToString() + "&quant=" + stockD.SelectedItem;

        };
  // Response.Redirect(addr);
} 
```

任何朝着正确方向的帮助都会大有帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:30:17.393

试试这个：

```
LinkButton lbSender = (LinkButton)sender;
ListViewDataItem lvItem = (ListViewDataItem)(lbSender.Parent);
DropDownList DropDownList1 = lvItem.FindControl("DropDownList1"); 
```

`ListView.Items`是一个集合，`ListViewDataItem`它`ListViewItem`继承自 ，继承自`Control`。这意味着您可以`Controls`使用`FindControl`. 你只需要看看层次结构。

文档：http `ListView`: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.aspx)

文档：http `ListViewDataItem`: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewdataitem.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewdataitem.aspx)

文档：http `ListViewItem`: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewitem.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewitem.aspx)

文档：http `Control`: [//msdn.microsoft.com/en-us/library/system.web.ui.control.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.aspx)

# c++ - 仅接受字符串文字的 C++11 函数？

> ID：13724242
> 
> 赞同：15
> 
> 时间：2012-12-05T13:22:43.160
> 
> 标签：c++, linux, gcc, c++11

我想编写一个只接受字符串文字作为参数的 C++11 函数：

```
 void f(const char* s) { static_assert(s is a string literal); ... } 
```

那是：

```
 f("foo"); // OK

 char c = ...;
 f(&c); // ERROR: Doesn't compile

 string s = ...;
 f(s.c_str()); // ERROR: Doesn't compile

 etc 
```

有没有办法实现这个？该函数的签名可以更改，添加宏或任何其他语言功能的使用也是如此。

如果这是不可能的，那么最接近的近似值是多少？（无论如何，用户定义的文字可以提供帮助吗？）

如果没有，GCC 4.7 / Linux 中是否有特定于平台的方式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T13:34:15.617

我认为你会得到最接近的是这个

```
template<int N>
void f(const char (&str)[N]){
  ...
} 
```

它将使用文字和数组而不是指针进行编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T14:08:45.007

另一种方法可能是制作 GCC 扩展，以在编译时检查您的特定函数是否仅使用文字字符串调用。

您可以使用[MELT](http://gcc-melt.org/)来扩展 GCC。MELT 是一种用于扩展 GCC 编译器的高级域特定语言，非常适合您想要的那种检查。

基本上，您将在 GCC 中添加一个新的传递，并在 MELT 中传递代码，这将找到每个调用您的函数的 gimple，并检查参数是否确实是一个文字字符串。[融化示例的示例](https://github.com/bstarynk/melt-examples)`ex06`应该会激发您的灵感。然后订阅[gcc-melt@googlegroups.com](https://groups.google.com/forum/?fromgroups#!forum/gcc-melt)并在那里询问您的 MELT 特定问题。

^(当然，这不是一个万无一失的方法：该函数可以通过指针间接调用，并且它可以例如具有部分文字字符串，例如`f("hello world I am here"+(i%4))`在概念上是带有一些文字字符串（例如在`.rodata`段中）的调用，但不在生成的代码中也不在gimple中。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-28T13:54:43.287

我用这个：

```
// these are used to force constant, literal strings in sqfish binding names
// which allows to store/copy just the pointer without having to manage
// allocations and memory copies
struct _literalstring
{
    // these functions are just for easy usage... not needed
    // the struct can be empty
    bool equal(_literalstring const *other) { return !strcmp((const char *)this, (const char *)other); }
    bool equal(const char *other) { return !strcmp((const char *)this, other); }
    const char *str(void) { return (const char *)this; }
    bool empty(void) { return *(const char *)this == 0; }
};

typedef _literalstring *LITSTR;

constexpr LITSTR operator "" _LIT(const char *s, size_t) {
    return (LITSTR)s;
} 
```

然后你只需像这样声明你的函数：

```
void myFunc(LITSTR str)
{
    printf("%s\n", str->str());
    printf("%s\n", (const char *)str);
    const char *aVar = str->str();
    const char *another = (const char *)str;
} 
```

你这样称呼它：

```
myFunc("some text"_LIT); 
```

如果你做这样的事情：

```
myFunc("some text");
myFunc(aTextVariable); 
```

你得到一个编译器错误。

# javascript - 未捕获类型错误对象没有动力学方法

> ID：13724243
> 
> 赞同：0
> 
> 时间：2012-12-05T13:22:51.473
> 
> 标签：javascript, jquery, jquery-plugins

我收到错误 - 未捕获的类型错误对象在 $('#body').kinetic( 这里 'body' 是 div 的 id 以下是代码上没有动力学方法；

```
 // Implement drag & scroll the window behavior
        if ($.browser.msie == null) {
            $('#body').kinetic({
                moved: function (settings) {
                    if (!window.dragging) {
                        $(window).scrollLeft($(window).scrollLeft() + settings.scrollLeft);
                        $(window).scrollTop($(window).scrollTop() + settings.scrollTop);
                    }
                }
            });
        } 
```

# c# - Visual Studio 中的树视图链接

> ID：13724252
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:28.387
> 
> 标签：c#, visual-studio-2010

我们必须为 scrum 管理系统设计一个界面作为一个单一的产品。但是，我们只对界面感兴趣。编码是零标记（实际上我们没有使用任何 C#）。我们需要做的就是链接表单（甚至这不是必需的）。

为了使表单更具可读性，我包含了一个树视图。它看起来像这样：

```
All projects
  - Project 1
    - Product Backlog
    - Team
    - Sprints
      - Sprint Backlog 1
      - Sprint Backlog 2  

  - Project 2 etc 
```

在我的主界面页面上，我已链接到每个项目，因此您可以在树视图中选择一个项目，它将弹出一个新表单（在前一个表单的顶部）。这使用以下代码：

```
 private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
    {
        switch (e.Node.Text)
        {
            case "Project 1":
                var newForm = new ProjectInterface();
                newForm.Show();
                this.Hide();
                break;

            etc
        }
    } 
```

这一切在主界面页面上都可以正常工作。但是，当我打开新表单以查看项目 1 时，树视图中的任何链接实际上都不起作用。例如，如果我正在查看项目 1 并希望查看项目 2，则以下代码（我认为！）应该可以工作：

```
 private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
    {
        switch (e.Node.Text)
        {
            case "Project 2":
                var newForm = new ProjectInterface2();
                newForm.Show();
                this.Hide();
                break;
        }
    } 
```

有人对我做错了什么有任何想法吗？

另外，请记住我们这样做的方式是由讲师设定的（我们也在同时学习使用 Subversion）。因此，不要担心指出更有效的方法来做到这一点，只是如何将表单链接在一起！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:00:07.027

如果您在设计器中看到主表单 treelist1 代码并将其与复制的表单设计器代码进行比较，您会注意到这一行缺少 this.treeView1.AfterSelect += new System.Windows.Forms.TreeViewEventHandler(this.treeView1_AfterSelect);

将此添加到新复制的表单设计器中，它应该可以工作。

# c++ - C++，模板化模板规范

> ID：13724254
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:32.117
> 
> 标签：c++, templates, specifications

我有一个没有实现两种方法的模板。

对于我提供规范的那些，我只想使用作为模板规范的类。

例子：

```
template<class T> class Temp
{
  void Method1();
};

Temp<int>::method1() {...} 
```

现在我想为规范提供一个模板类型，比如

```
template<class General> void Temp<General> method1() {...} 
```

我将指定哪些类型是`General`.

如何使用 C++ 语法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:32:36.603

您似乎想为已知类型列表提供一堆专业化。为此，您可以使用 SFINAE（例如`std::enable_if`）和一些模板元编程。

给你一个想法：

```
#include <type_traits>

template <class T, class... Candidates>
struct is_one_of;

/* alternative 1 - too complicated
template <class T, class Head, class... Tail>
struct is_one_of<T, Head, Tail...> 
  : std::integral_constant<bool, std::is_same<T, Head>::value || is_one_of<T, Tail...>::value>
{}; */

/* better alternative - thanks, Dan */
template <class T, class Head, class... Tail>
struct is_one_of<T, Head, Tail...> : is_one_of<T, Tail...> {}

template <class T, class... Tail>
struct is_one_of<T, T, Tail...> : std::true_type {}

/* needed for both alternatives */
template <class T>
struct is_one_of<T> : std::false_type {}; 
```

现在`enable_if`你的专业取决于`is_one_of<T, ?your-list-of-General-types-here?>`

# php - 如何获取第一张图片并将其设置为帖子缩略图？

> ID：13724255
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:38.050
> 
> 标签：php, wordpress, function, post, thumbnails

我有这两个功能，我在网上找到并根据我的需要进行了编辑。
我要做的是将wordpress帖子的缩略图设置为默认值，以前在函数本身图像中设置，或者嵌入在帖子中的第一个图像。
然而，某处出了点问题……

**wptuts_save_thumbnail($post_id)** -> 将帖子的缩略图设置为默认值，**或者**如果**尚未设置**第一张图片（由帖子的作者...）！

```
function wptuts_save_thumbnail( $post_id ) {
$post_thumbnail = get_post_meta( $post_id, '_thumbnail_id', true );

if (!wp_is_post_revision($post_id)) { // Verify that the post is not a revision
    if (empty($post_thumbnail)) {       // Check if Thumbnail does NOT exist!
        $firstImg = firstImg($post_id); // Get the first image of a post (if available)
        if(!$firstImg){ // if available, update the post thumbnail
            update_post_meta( $post_id, '_thumbnail_id', 'link to default image here' );
        } else { // else -> set thumbnail to default thumbnail
            update_post_meta( $post_id, '_thumbnail_id', $firstImg );
        }
    }
}
} 
```

**firstImg($post _id)** -> 用于获取帖子的第一张图片（通过 id）

```
function firstImg($post_id) {
  $post = get_post($post_id);
  $first_img = '';
  ob_start();
  ob_end_clean();
  $output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
  $first_img = $matches[1][0];

  $urlLength = strlen(site_url());
  $first_img = substr($first_img, $urlLength);

  if(empty($first_img)){
    return false;
  }

  return $first_img;
} 
```

这些函数的唯一问题在于`if(!$firstImg) - else`语句。
图像将始终设置为默认值，无论是否在帖子中嵌入图像。
`$firstImg`如果存在则确实返回第一张图像，因此问题必须在 2`if`的任何一个中：`if(empty($first_img))`OR `if(!$firstImg)`。
我试图寻找问题的任何线索，但我一无所获。

希望有人可以对这个问题有所了解:)
提前致谢！

**附加信息：**
- 这两个功能都写在`functions.php`我的主题中。
-`wptuts_save_thumbnail($post_id)`设置为每次发布**新**帖子时运行。
- 返回时，`$first_img`是**图像的相对路径**（即 /wp-contents/uploads/img.jpg），或`false`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:47:17.783

我可以通过查看代码指出，对 firstImg 的检查：

```
if(!$firstImg){ // if available, update the post thumbnail
  update_post_meta( $post_id, '_thumbnail_id', 'link to default image here' );
} else { // else -> set thumbnail to default thumbnail
  update_post_meta( $post_id, '_thumbnail_id', $firstImg );
} 
```

似乎返回 false，这将为您提供默认图像。

您可以做的是检查转储中的 $matches[1][0] 或 firstImg 函数中的 print_r 的结果。在返回之前还要检查 $first_img 是什么时候。这可以帮助您找到答案，因为您似乎没有在 $first_img 中得到预期的结果。

希望有帮助。

# c# - 名为 data 的对象的 IEnumerable<> 属性的命名约定

> ID：13724257
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:41.007
> 
> 标签：c#, naming-conventions

您会为返回 IEnumerable 的 Data 类的类的属性命名什么？

数据-数据-数据枚举？

```
public class MyClass
{       
  IEnumerable<Data> DataEnumeration { get; }
}

public class Data
{
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:41:57.077

大量数据集中在一处。也许您可以将其称为 DataStack ？

```
public class MyClass
{       
   IEnumerable<Data> DataStack { get; }
}

public class Data
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:39:02.200

那么数据的集体名词是 donut 根据这个： [http ://all-sorts.org/collectors/donut](http://all-sorts.org/collectors/donut)

那么怎么样

```
IEnumerable<Data> Donut{ get; } 
```

;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:29:10.960

“数据”已经是复数了；我会选择那个或DataEnumeration。

# error-handling - Biztalk Orchestrations Managing BRE Failures

> ID：13724258
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:42.990
> 
> 标签：error-handling, biztalk, biztalk-rule-engine

I have been having trouble managing Orchestrations and Business Rule Engines. I wish to capture, in my orchestration, a BRE failure so that if a BRE failure occurs I chose an alternate routing pattern. My orchestration in port is an MX receiving pipeline. From research I have been able to find the SWIFTErrorExtractor.ErrorExtractor but for some reason although my messages are failing with 6 BRE validation rules, my orchestration fails with an exception being unable to extract an error segment from my message.

The only way I was able to find the BRE failures was to enlist but not start my orchestration and enable my ports. Place the message in the "in" folder. Then from the main page, search for all suspended messages, and this message has the errors.

How can I capture these error descriptions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:54:53.863

我没有直接实现我的消息，而是实现了一个多部分消息。“正文”部分是我的消息，“错误”部分是 XML 文档。在运行我的编排时，“错误”部分会自动填充验证错误。我无法在网上找到任何地方，并且在我的 BizTalk 管理控制台中看到了暂停消息的解决方案。它有 2 个部分，Body 和 Error。所以我创建了相同的多部分味精，它起作用了。我严重怀疑这会奏效。

# sql - SQL，将字段添加到数据库时放入两个字段并修改

> ID：13724259
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:46.523
> 
> 标签：sql, database, postgresql

我有这个数据库设置： [http ://sqlfiddle.com/#!12/b2989](http://sqlfiddle.com/#!12/b2989)

我想在我已经拥有“ID”的项目下添加一条名为“solrID”的记录。

是否可以进行 SQL 设置，因此每当将条目放入 ID 时，我也会将相同的值添加到 SOLRID 中，除非我以文本“app”开头。

因此，当我向我的“项目”表中添加一条记录时，ID 自动递增以具有“ **2** ”的值，然后*我希望 SOLRID 自动具有值“ **app2** ”。*

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:11:53.810

想到的两个选择是创建一个动态创建 solrID 的视图，或者如果您真的想要一个存储基本上是冗余数据的列，您可以使用触发器来填充 solrID。

对我来说，只知道我从您的消息中知道的内容，除非您有真正的理由将 solrID 存储在实际表中，否则我会考虑使用视图。

# c# - 服务器标签格式错误

> ID：13724260
> 
> 赞同：2
> 
> 时间：2012-12-05T13:23:48.870
> 
> 标签：c#, asp.net, servertag

我知道有很多关于这个错误的线程，但我已经查看了所有线程并且无法使其工作。这可能是我忽略的非常小的东西。

这是我现在在 asp:Button 组件中的代码

```
<asp:Button ID="btn_profile" runat="server" Text="Bekijk de wenslijst"
CssClass="wenslijst_preview_btn" 
OnClick="btn_goToChild_Click(<%# Eval("pk_child_id") %>)"/> 
```

我尝试了多种方法，例如以下内容：

```
OnClick='btn_goToChild_Click(<%# Eval("pk_child_id") %>)' 
```

但后来我收到以下错误：

```
preprocessor directives must appear as the first non-whitespace character on a line 
```

如果您需要查看更多代码，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:27:40.623

`OnClick`是服务器端事件，因此应该只是服务器端事件处理程序的名称。`OnClientClick`（如果可用）是客户端事件处理程序，因此需要一个 JavaScript 表达式来评估。

尝试

```
 <asp:Button ID="Button1" runat="server" Text="Button"
             OnClientClick='btn_goToChild_Click(<%# Eval("pk_child_id") %>)' /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:28:33.943

```
<asp:Button ID="btn_profile" runat="server" Text="Bekijk de wenslijst"
 CssClass="wenslijst_preview_btn" CommandArgument='<%# Eval("pk_child_id") %>'
 OnClick="btn_goToChild_Click"/>
  protected void btn_goToChild_Click(object sender, EventArgs e)
    {
        Button btn= (Button) sender;
        if (btn==null) return;
        var id =btn.CommandArgument;
         // Or int id=(int)btn.CommandArgument;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T13:30:02.020

如果要使用 Javascript 表达式，请使用`OnClientClick`not `OnClick`。这些是不同的附带事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:51:24.060

OnClick 仅用于服务器端方法，对于客户端调用，您应该使用“OnClientClick”属性。

# css - css 定位问题 - 在某些页面上发生，但在其他页面上没有

> ID：13724261
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:51.460
> 
> 标签：css

我注意到在我网站的某些产品页面（但不是全部）上，我遇到了一个奇怪的问题，其中一张产品图片出现在它应该显示的图片下方的行中。

因此，在某些页面上，“购买此产品的人还购买了...”的图片，在最后一行，其中一个产品掉了一行，显然不合适。 [http://tinyurl.com/cs6d3q5](http://tinyurl.com/cs6d3q5)

但大多数其他页面都很好！ [http://tinyurl.com/clwq3dz](http://tinyurl.com/clwq3dz)

我不知道是什么问题。据我所知，他们都应该以同样的方式行事。谁能启发我并告诉我他们是如何调试的？我在 FF 上使用 Firebug 和开发人员工具，但它们似乎不像以前那样有用

谢谢

这是用于创建它的代码：

```
if($also_purchased_products->RecordCount() > 0) {
    echo '<div style="clear:both"></div>';
    echo '<div class="sideboxHeading">People who bought this also purchased...</div>       <div class="ProdInfoDotSpacer"></div>';
    while (!$also_purchased_products->EOF) {
        $also_purchased_products->fields['products_name'] = zen_get_products_name($also_purchased_products->fields['products_id']);
        echo '<div class="alsoPurchasedWrapper">';
        echo '<a href="' . zen_href_link(zen_get_info_page($also_purchased_products->fields['products_id']), 'products_id=' . $also_purchased_products->fields['products_id']) . '">' . zen_image(DIR_WS_IMAGES . $also_purchased_products->fields['products_image'], $also_purchased_products->fields['products_name'], SMALL_IMAGE_WIDTH, SMALL_IMAGE_HEIGHT) . '</a><br />';
        echo '<a href="' . zen_href_link(zen_get_info_page($also_purchased_products->fields['products_id']), 'products_id=' . $also_purchased_products->fields['products_id']) . '">' . $also_purchased_products->fields['products_name'] . '</a>';
    echo '</div>';
    $also_purchased_products->MoveNext();   
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:35:12.417

这是因为

```
 <a href="http://www.traditionalirishgifts.com/black-sage-guinness-harp-knit-scarf">Black/Sage Guinness harp knit </a> 
```

这`Black/Sage Guinness harp knit scarf`是很长的尝试排序

![在此处输入图像描述](../Images/6babfb773be2a1269cf6abaa7ba4c7be.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:38:34.137

当上一个项目的文本链接超过一行时，就会出现问题。正如 NullPointer 所说，您可以截断它，或者设置一个高度`.alsoPurchasedWrapper`：

```
.alsoPurchasedWrapper {
  float: left;
  width: 150px;
  margin: 5px 0px 10px 20px;
  height: 170px;
} 
```

# c++ - 带有“（”的奇怪 C++ 语法错误

> ID：13724263
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:54.190
> 
> 标签：c++, class, syntax, header, typedef

我的代码有一个奇怪的问题（或者我有点生疏）：以下代码：

```
#include <iostream>
#include <vector>

using namespace std;

typedef vector<double> vDouble;
typedef vector<int> vInt;

//Class for calculations
class CallCosts
{
    CallCosts::CallCosts();
    CallCosts::CallCosts(vDouble nrates(4, 0)); //Constructor

    void CallCosts::setRates(vDouble sr(4, 0));
    void CallCosts::getTotals(vDouble gt(4, 0), vInt minutes(4, 0));

    vDouble rates(4, 0);
    vDouble totals(4, 0);

}; 
```

编译器在第 16 行给了我一个错误：

```
CallCosts::CallCosts(vDouble nrates(4, 0)); //Constructor 
```

错误是：在 '(' 标记之前需要 ',' 或 '...'。

现在我很确定我没有错过 ; 任何地方，那么还有什么可能导致这种情况？另一个注意事项：我之前使用的是普通变量而不是 typedef，并且代码可以正常工作，所以这可能是问题所在，但除此之外我不确定吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:29:37.827

您对构造函数的声明是错误的：

```
 CallCosts::CallCosts(vDouble nrates(4, 0)); 
```

它应该如下所示：

```
CallCosts(const vDouble& nrates); 
```

你通过 const 引用传递你的向量。

定义应如下所示：

```
CallCosts::CallCosts(const vDouble& nrates) : rates(nrates) {} 
```

在这里，您使用初始化列表来初始化您的私有变量，该变量作为参数传递给您的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:25:29.700

`CallCosts::`在类声明中删除。

另外，这`CallCosts::CallCosts(vDouble nrates(4, 0));`应该是什么意思？

如果您想要一个参数类型为 的构造函数`vDouble`，请使用`CallCosts(vDouble nrates)`. 如果要指定默认值，请执行此操作`CallCosts(vDouble nrates= vDouble(4, 0));`并删除默认构造函数。

# iphone - CGContextDrawImage 跨设备的字节值不一致？

> ID：13724264
> 
> 赞同：0
> 
> 时间：2012-12-05T13:23:55.907
> 
> 标签：iphone, objective-c, ios, bitmap, core-graphics

我正在尝试比较两个图像（实际上在更大的图像中找到一个较小的“子图像”），并且我正在使用下面提供的方法加载图像。

下面的代码现在包含一个测试 for 循环，它总结了所有单独的字节值。我发现这个总和因此字节不同，这取决于它正在运行的设备。我的问题是为什么会这样？

```
// Black and white configuration:
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
NSUInteger bytesPerPixel = 1;
NSUInteger bitsPerComponent = 8;
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;

// Image
CGImageRef imageRef = [[UIImage imageNamed:@"image.jpg"] CGImage];
NSUInteger imageWidth = CGImageGetWidth(imageRef);
NSUInteger imageHeight = CGImageGetHeight(imageRef);
NSUInteger imageSize = imageHeight * imageWidth * bytesPerPixel;
NSUInteger imageBytesPerRow = bytesPerPixel * imageWidth;

unsigned char *imageRawData = calloc(imageSize, sizeof(unsigned char));
CGContextRef imageContext = CGBitmapContextCreate(imageRawData, imageWidth, imageHeight, bitsPerComponent,
                                                  imageBytesPerRow, colorSpace, bitmapInfo);

// Draw the actual image to the bitmap context
CGContextDrawImage(imageContext, CGRectMake(0, 0, imageWidth, imageHeight), imageRef);
CGContextRelease(imageContext);

NSUInteger sum = 0;
for (int byteIndex = 0; byteIndex < imageSize; byteIndex++)
{
    sum += imageRawData[byteIndex];
}

NSLog(@"Sum: %i", sum); // Output on simulator:    Sum: 18492272
                        // Output on iPhone 3GS:   Sum: 18494036
                        // Output on another 3GS:  Sum: 18494015
                        // Output on iPhone 4:     Sum: 18494015

free(imageRawData);
CGColorSpaceRelease(colorSpace); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:57:45.630

这些设备是否都运行相同版本的操作系统？另一种可能性（除了色彩空间，有人已经提到）是 JPG 解码库可能略有不同。由于 JPEG 是一种有损图像格式，因此不同的解码器会生成位图不相等的结果并非不可想象。鉴于 iOS UI 中大量使用图像，假设 JPG 解码器将不断调整以获得最佳性能似乎是合理的。

我什至相信可以想象，在不同型号的设备（即不同的处理器）上运行的相同操作系统版本之间，如果有多个版本的 JPG 解码器，每个版本都针对特定的 CPU 进行了高度优化，结果可能不相等，尽管这不能解释具有相同操作系统的相同型号的 2 台设备之间的区别。

您可以尝试使用无损格式的图像重新运行实验。

还可能值得指出的是，为 CGBitmapContext 提供自己的后备内存，但不特别考虑字对齐可能会导致性能不佳。例如，您有：

```
NSUInteger imageBytesPerRow = bytesPerPixel * imageWidth; 
```

如果 imageBytesPerRow 不是 CPU 原生字长的倍数，您将获得次优性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:07:58.030

我假设“设备灰色”颜色空间因设备而异。尝试使用独立于设备的色彩空间。

# android - Geolocation not working on some Android devices with google maps API

> ID：13724266
> 
> 赞同：1
> 
> 时间：2012-12-05T13:24:04.610
> 
> 标签：android, google-maps, geolocation

Geolocation works on the iPhone and some Android devices. It seems the problem is with the newer Android devices. I have read where you need the high accuracy set to true, but I can seem to get it to work.

I may be adding the high accuracy in the wrong place. This is the code without the high accuracy.

```
function autofill(type) {

if (type == "from") {
    if (document.forms[0].exfrom.value == "gps") {
        var startPos;
        navigator.geolocation.getCurrentPosition(

        function (position) {
            startPos = position;

            var locationcor = startPos.coords.latitude + "  " + startPos.coords.longitude;

            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            document.forms[0].from.value = locationcor;

            var geocoder;
            initialize();
            codeLatLng();

            function initialize() {
                geocoder = new google.maps.Geocoder();
                var latlng = new google.maps.LatLng(lat, lng);
                codeLatLng(function (addr) {
                    document.forms[0].from.value = addr;
                });
            }

            function codeLatLng(callback) {
                var latlng = new google.maps.LatLng(lat, lng);
                if (geocoder) {
                    geocoder.geocode({
                        'latLng': latlng
                    }, function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {
                                callback(results[0].formatted_address);
                            } else {
                                document.forms[0].from.value = locationcor;
                            }
                        } else {
                            document.forms[0].from.value = locationcor;
                        }
                    });
                }
            }
        }, function (error) {
            alert("Error occurred. Error code: " + error.code);
            // error.code can be:
            //   0: unknown error
            //   1: permission denied
            //   2: position unavailable (error response from locaton provider)
            //   3: timed out
        });

    } else {
        document.forms[0].from.value = document.forms[0].exfrom.value;
    }
} else {
    document.forms[0].to.value = document.forms[0].exto.value;
}
} 
```

# javascript - 谷歌地图获取位置

> ID：13724267
> 
> 赞同：0
> 
> 时间：2012-12-05T13:24:05.827
> 
> 标签：javascript, google-maps-api-3

我正在使用 Google maps api，但在尝试获取标记位置时遇到了问题。

我有两个文本字段作为地址输入，并用标记显示结果。

当我想获取标记`position(by getPosition() function)`时，使用 new`google.maps.LatLngBounds()`时，标记在地图上的位置是正确的，但是该`getPosition()`功能给了我一个错误的答案，只有在我第二次搜索地址时`getPosition`，才会为第一次地址搜索更新.

就像它有一个交易，当我使用时`getPosition()`，位置还没有更新。

有人知道为什么吗？

谢谢

这是我的代码的一部分。如果我将使用 JSON 请求来获取地址位置，它会更好吗？

```
function GetAddress(add , map , pointtype) {

    var country = 'france';        

    var address =  add + ', ' + country; 

    geocoder = new google.maps.Geocoder();
      if(pointtype == 0){
        geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {                

          origmarker.setPosition(results[0].geometry.location) ;  
          origmarker.setTitle(add);

        } 
       });
      }
      else{
          geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {              

            desmarker.setPosition(results[0].geometry.location) ;  
            desmarker.setTitle(add);

        } 
       });
      }
}

var bounds = new google.maps.LatLngBounds() ;

bounds.extend(origmarker.getPosition());
bounds.extend(desmarker.getPosition());

map.fitBounds(bounds); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:30:24.560

听起来您正在使用地理编码器在地图上放置标记。地理编码器是异步的，在回调例程运行之前您不能使用结果。听起来您正在尝试在回调运行之前使用标记的位置（因此您可以从最后一次调用中获取值）。

# vba - Application-Defined or Object-Defined Error while using Excel VBA

> ID：13724269
> 
> 赞同：1
> 
> 时间：2012-12-05T13:24:15.033
> 
> 标签：vba, excel

I get "Application-Defined or Object-Defined Error" while I run the below Macro.

I want to parse through each column in "DB" sheets and search for that column.

```
Sub test()  
Dim FindString As Range
Dim Rng As Range

Dim i, j As Integer
Dim finalcol As Long

Worksheets("DB").Select

finalcol = Worksheets("DB").Cells(1, Application.Columns.Count).End(x1toleft).column
On Error Resume Next

For i = 1 To finalcol
    FindString = Cells(1, i).Value

    If Trim(FindString) <> "" Then
        With Sheets("DB").Range("A:A")
            Set Rng = .Find(What:=FindString, _
                        After:=.Cells(.Cells.Count), _
                        LookIn:=xlValues, _
                        LookAt:=xlWhole, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)
            If Not Rng Is Nothing Then
                Application.Goto Rng, True
            Else
                MsgBox "Nothing found"
            End If
        End With
    End If
Next i
On Error GoTo 0

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:43:02.167

你的`x1toleft`常数应该是`xlToLeft`（ex ell，而不是 ex one）。它不会转换为驼色外壳的事实是一个提示。

此外，FindString 不应该是`Dim FindString As String`Range。如果你摆脱了这`On Error Resume Next`条线，你会得到一个`FindString = Cells(1,i).Value`在线错误，因为你必须使用`Set`对象变量。当它运行并且错误被抑制时，FindString（作为 Range 变量）是 Nothing。

我没有得到你得到的错误，它只是找不到任何东西。但是，如果您进行这些更改，它将修复它或暴露真正的错误。在任何情况下，您都应该删除错误处理，直到您对其进行调试，然后再将其添加回来。

# c# - 如果单击搜索，则会出现 GridView 结果

> ID：13724271
> 
> 赞同：-2
> 
> 时间：2012-12-05T13:24:32.723
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0, asp-classic

请给我正确的运动方式。我在哪里可以获得有用的信息？我想要的是： -

有带有参数和 2 个按钮的表格：搜索、重置。

我想实现逻辑 - 输入一些参数并单击搜索按钮 - GridView 结果如下所示。

示例，文章会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:39:00.030

有很多很好的教程可用。考虑阅读它们。

主要思想是过滤数据，然后将其绑定到 GridView。

例如。

```
DataTable data = GetData();
DataView dv = data.DefaultView;
dv.RowFilter = "id= " + 2;
GridView1.DataSource = dv;
GridView1.DataBind(); 
```

例如。

[具有多个过滤器的 Asp.Net GridView 控件](http://www.aspdotnetcodes.com/Asp.Net_GridView_Filter.aspx)

[ASP.NET 数据控件](http://www.asp.net/web-forms/overview/aspnet-data-controls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:33:46.363

这是来自 www.asp.net/mvc 的 mvc3 示例

[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

# javascript - 同一页面上的多个自动完成字段出现问题

> ID：13724272
> 
> 赞同：1
> 
> 时间：2012-12-05T13:24:35.237
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, dialog

我正在使用 jQuery v1.8.3 和 jQuery UI v1.9.2。我以这种方式实现了[自动完成](http://api.jqueryui.com/autocomplete)和[对话框](http://jqueryui.com/dialog/)小部件：

```
$("#A_autocomplete").autocomplete({
  select   : function(event, ui) {
    event.preventDefault();

    if ( condition ) {
      // Open a modal dialog window
      $("#dialog_window").dialog('open');
    } else {
      // Populate the autocomplete input with the label (not the value)
      $(this).val(ui.item.label);
    }
  },
  ...
}); 
```

在上面的代码中，自动完成功能何时`condition`按`false`预期`#A_autocomplete`工作。何时打开对话框`condition`并`true`执行 AJAX 请求，以便使用响应 HTML 数据填充*其*正文内容。该 HTML 数据包含另一个带有`id`of 的自动完成字段`#B_autocomplete`，甚至这个自动完成字段也按预期工作。

但是，关闭对话框窗口后，自动完成`#A_autocomplete`功能*不再*正常工作：`$(this).val(ui.item.label)`似乎*不再*触发。

我该如何解决这个问题？

* * *

我注意到，打开对话框后，在 DOM 主体中存在*两个*自动完成菜单：

```
# Generated "by" / "for" the #A_autocomplete
<ul class="ui-autocomplete" id="ui-id-1">
  <li>...</li>
</ul>

# Generated "by" / "for" the #B_autocomplete after the dialog is opened
<ul class="ui-autocomplete" id="ui-id-11">
  <li>...</li>
</ul> 
```

我认为问题可能取决于...

# crystal-reports - 带有 Visual Studio 2012 的 Crystal 报表

> ID：13724274
> 
> 赞同：5
> 
> 时间：2012-12-05T13:24:49.963
> 
> 标签：crystal-reports, visual-studio-2012, .net-4.5

我正在使用水晶报表来创建我的报表。我正在使用 Visual Studio 2012。我使用 VS2010 创建报告，然后将它们添加到 VS2012 中的解决方案中。问题是当我在 VS2012 下运行报告时遇到异常 bobj undefined 。是与项目在VS2012下运行的事实有关还是由其他原因引起的？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:25:54.010

适用于 Microsoft Visual Studio 的 SAP Crystal Reports Developer 版本终于可用，因此您可以在 vs 2012 中创建它们。

下载[http://scn.sap.com/docs/DOC-35074](http://scn.sap.com/docs/DOC-35074)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T21:16:13.950

通过以下 URL，您可能会为您的问题找到完美的答案。这不是我的经验，我在使用 VS 2012 搜索 Crystal 报表集成基础知识时找到了这个答案。

[http://www.codeproject.com/Tips/695587/Beginners-tutorial-on-how-to-load-Crystal-Reports](http://www.codeproject.com/Tips/695587/Beginners-tutorial-on-how-to-load-Crystal-Reports)

祝你好运，祝你有美好的一天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T08:30:54.767

不，这不是 VS2012 的问题。
Crystal 报表运行时已安装，但浏览器无法访问它的文件。
您将应用程序安装在与默认网站不同的网站中。是吗？
查看本文末尾的解决方案。

## 分析问题

可以分析问题，发现**403（Forbidden）**错误

*   使用**客户端工具**（浏览器的调试窗口）

`GET http://someServer:20080/aspnet_client/system_web/4_0_30319/crystalreportviewers13/js/crviewer/crv.js 403 (Forbidden)
GET http://someServer:20080/aspnet_client/system_web/4_0_30319/crystalreportviewers13/js/crviewer/images/style.css 403 (Forbidden)`

*   或者**服务器工具**（IIS日志，WIN2003上放在`%SYSTEMROOT%\System32\LogFiles\W3SVC###\`）。

> 2011-03-28 13:00:49 W3SVC701536 95.228.38.41 GET /aspnet_client/system_web/4_0_30319/crystalreportviewers13/js/crviewer/images/style.css - 20080 - 192.168.1.2 Mozilla/5.0+（兼容；+MSIE+9.0 ;+Windows+NT+6.1;+Trident/5.0) 403 6 64 错误！2011-03-28 13:00:49 W3SVC701536 95.228.38.41 GET /aspnet_client/system_web/4_0_30319/crystalreportviewers13/js/crviewer/crv.js - 20080 - 192.168.1.2 Mozilla/5.0+（兼容；+MSIE+9.0；+ Windows+NT+6.1;+Trident/5.0) 403 6 64 错误！

## 导致问题

*   `crv.js`在这两种情况下，我都发现`style.css`有些文件没有提供；
*   这些文件由 CR 安装程序放置在`wwwroot\aspnet_client`文件夹中，但由于某些原因无法访问；
*   在我的情况下，原因是我创建了一个**不同的网站（端口 20080）并且 aspnet_client 文件夹没有放在该网站内**

我可以看到你使用不同版本的软件和不同的配置，但**我认为你有同样的问题**。

## 解决方案

解决方案是以这种方式在 IIS 上工作：

*   **将`aspnet_client`文件夹**从`c:\inetpub\wwwroot`文件夹复制到**新的网站根文件夹**。

或者（这个更好）

*   **创建一个**名为`aspnet_client`指向`c:\inetpub\wwwroot` **新网站内部的虚拟目录**

# javascript - Map/Reduce 示例...这是正确的吗？

> ID：13724278
> 
> 赞同：0
> 
> 时间：2012-12-05T13:24:59.247
> 
> 标签：javascript, mongodb, callback, mapreduce

我不止一次看到以下reduce函数作为mongodb的mapreduce用法示例：

```
function reduce(key, values) {
    var result = {count:0};
    values.forEach(function(value) {
        result.count += value.count;
    });
    return result;
} 
```

但这让我觉得很奇怪。迭代是使用 .forEach() 方法完成的，该方法使用回调函数进行计数。但是，我们*返回结果；*马上。

有时我们会在回调完成迭代值之前返回结果变量吗？

我认为回调的目的是我们将它委托给（可能）不同的线程，而主控制流正常继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:29:12.743

`forEach`不是异步的。
该`return`语句只会在`forEach`完成后执行。

# javascript - Raphael JS 在设置为 % 时检测画布大小

> ID：13724279
> 
> 赞同：2
> 
> 时间：2012-12-05T13:25:01.560
> 
> 标签：javascript, raphael

我正在使用 Raphael JS，并创建一个宽度设置为`100%`容器的画布，如下所示......

```
// there is a `div` with id `paper`
paper = Raphael('paper', '100%', '100%')
paper.circle(50, 40, 100) 
```

现在我想知道画布有多大。如何可靠地找出所有平台上的画布大小？

我没有使用 jQuery。

* * *

**更新：**潜在的解决方法

通过使 cavas 按比例缩放，使像素宽度变得不必要的解决方案将获得奖励积分。我相当确定这是可能的，`canvas`所以假设 Raphael 可以，所以如果我将所有元素创建为设定的宽度（比如 100 像素宽的画布），那么我应该能够将画布缩放到`100%`屏幕上，并且画布应该填满屏幕，所有元素都被适当地拉伸，并保持它们的比例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:37:15.913

您可以使用视图框来缩放以适应全屏模式。

[http://raphaeljs.com/reference.html#Paper.setViewBox](http://raphaeljs.com/reference.html#Paper.setViewBox)

您定义一个包含您的 svg 数据的物理区域（x、y、宽度、高度），所有内容都将按比例放大，同时保持比例。视图框区域按比例放大（当您为 fit 指定 false 时）到它可以在容器内的最大大小。

```
paper.setViewBox(0, 0, 100, 100, false);​ 
```

不幸的是，Raphael 似乎没有让您选择指定如何处理溢出。例如，您可能希望将视图框居中，以便均匀分布任何多余的部分。如果您有一个 100 x 200 的容器并且您有一个 100 x 100 的视图框，那么您在放大后的视口下方有 100 像素的高度，此时您可能希望视口上方有 50 像素，下方有 50 像素。

在 SVG 中，这些选项是在 SVG 容器的`preserveAspectRatio`属性上定义的。如果您不支持 VML (lte ie8) 选项，那么您可以更改此属性以影响对齐方式。

[http://premsobel.info/notes/ml/svg/viewports.html](http://premsobel.info/notes/ml/svg/viewports.html)

至于一般检测宽度和高度，最好使用`element.clientWidth`and检测父节点的宽度或高度`element.clientHeight`。我倾向于避免使用 body 作为父节点，并添加自己的内部容器来检测大小。你的画布是某个容器的 100% 宽度/高度，所以我会去寻找那个容器以找出它的大小。

# c# - switch 语句中的奇变量范围

> ID：13724281
> 
> 赞同：16
> 
> 时间：2012-12-05T13:25:04.267
> 
> 标签：c#, c++, scope, switch-statement

[这个问题](https://stackoverflow.com/q/241134/1471381)让我想起了我脑海中关于 switch 的一个老问题：

```
 int personType = 1;
    switch (personType)
    {
        case 1:
            Employee emp = new Employee();
            emp.ExperienceInfo();
            break;
        case 2:
            Employee emp = new Employee(); 
            //Error: A local variable named 'emp' is already defined in this scope
            emp.ManagementInfo();
            break;
        case 3:
            Student st = new Student();
            st.EducationInfo();
            break;
        default:
            MessageBox.Show("Not valid ...");
    } 
```

为什么 emp 在“案例 2”中被识别？在 C++ 中（如果我没记错的话）我们可以同时使用多种情况，但在 C# 中这是不可能的，我们应该`case 1`用 break 结束，所以下面的代码在 C++ 中似乎是正确的，而在 C# 中是错误的：

```
case 1:
case 2:
   SomeMethodUsedByBothStates(); 
```

当我们不能有这样的行为时，为什么我们应该能够声明 emp in`case 1`并在其中看到它`case 2`？如果从来没有两种情况一起发生，那么为什么要在两者中都看到对象呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-05T13:29:50.943

案例不会在 c++ 或 c# 中创建范围。在 case 中声明的所有这些变量都在相同的范围内，即 switch 语句的范围内。如果您希望这些变量在某些特定情况下是本地的，则需要使用大括号：

```
switch (personType)
{
    case 1: {
        Employee emp = new Employee();
        emp.ExperienceInfo();
        break;
    }
    case 2: {
        Employee emp = new Employee(); 
        // No longer an error; now 'emp' is local to this case.
        emp.ManagementInfo();
        break;
    }
    case 3: {
        Student st = new Student();
        st.EducationInfo();
        break;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T13:29:23.607

您展示的第二个代码在 C# 中非常好，假设案例 2 有一个`break`or `return`：

```
case 1:
    // no code here...
case 2:
    SomeMethodUsedByBothStates();
    break; 
```

允许空箱掉线。*不允许*
在 一个失败的案例分支中有代码。因此，以下内容将无效：

 *```
case 1:
    SomeMethodUsedOnlyByCase1();
    // no break here...
case 2:
    SomeMethodUsedByBothStates();
    break; 
```

* * *

关于范围的问题是另一个问题。基本上，范围是 switch 语句本身，而不是 case 分支。

要使您的示例编译，只需通过添加花括号来为 case-branch 提供它们自己的范围：

```
int personType = 1;
switch (personType)
{
    case 1:
    {
        Employee emp = new Employee();
        emp.ExperienceInfo();
        break;
    }
    case 2:
    {
        Employee emp = new Employee(); 
        emp.ManagementInfo();
        break;
    }
    case 3:
    {
        Student st = new Student();
        st.EducationInfo();
        break;
    }
    default:
        MessageBox.Show("Not valid ...");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T13:35:16.473

在案例中声明变量时，请使用大括号进行说明。

```
int personType = 1;
switch (personType)
{
    case 1: 
   {
     ///
     break;
   }
    case 2: 
   {
     ///
     break;
    }
    case 3: 
   {
        ///
        break;
   }
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:05:06.030

范围一点也不奇怪。局部变量的范围是从定义它的点到定义它的块的末尾。因此，各种`emp`变量都在范围内，直到以`{`after`switch`语句开头并在相应的`}`. `case`标签没有什么特别之处。它们不会改变变量的范围。*

# email - CakePHP 2.1 CakeEmail 发送电子邮件

> ID：13724283
> 
> 赞同：0
> 
> 时间：2012-12-05T13:25:05.813
> 
> 标签：email, sendmail, cakephp-2.1

我正在使用 cakephp 2.1，我想向用户发送电子邮件。所以我使用的代码如下。

```
App::uses('CakeEmail', 'Network/Email');
public function sendMail($to, $subject, $data) {

    // Set the Params
    $email = new CakeEmail('default');
    $email->from(array('admin@admin.com' => 'Admin'));
    $email->emailFormat('text');
    $email->to($to);
    $email->subject($subject);

    // Send Email
    if($email->send($data)) {
        return true;
    } else {
        return false;
    }
} 
```

此函数返回 true，但我没有收到电子邮件。请建议我哪里出错了。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:00:22.877

Could be a myriad of reasons. Check the configuration settings in **app/Config/email.php**. You’ll need an SMTP server to relay your email.

# c++ - 自由函数和继承

> ID：13724290
> 
> 赞同：0
> 
> 时间：2012-12-05T13:25:32.603
> 
> 标签：c++

我正在尝试一个有两个类和一个免费功能的基本东西。首先我有两个课程：

```
struct BASE{
    BASE(int a = 0):a_(a){};
    virtual ~BASE(){};
    virtual void foo(){std::cout << "BASE " << std::endl;}
    int a_;
};

struct DERIVED: public BASE{
    DERIVED():BASE(){};
    void foo(){std::cout << "DERIVED " << std::endl;}
}; 
```

然后我填写一个 std::vector （或 boost::ptr_vector）

```
std::vector<BASE* > vec;    
vec.push_back( new BASE(2));
vec.push_back( new DERIVED); 
```

如果我调用我的函数 foo，则没有 pb 虚拟的东西效果很好，但是如果我创建两个自由函数：

```
void foo(BASE*   a, DERIVED*   b){
    std::cout << " mix base/derived " << std::endl;
}

void foo(BASE*   a, BASE*   b){
    std::cout << " full base " << std::endl;
} 
```

如果我做

```
foo(vec[0], vec[1]); //failed 
```

我会收到消息

```
full base 
```

嗯，这是合乎逻辑的，因为我有 BASE* 的向量，但它是否存在以获得对我的自由函数的良好调用？我需要继承，所以我不能真正分离这两个类，因为我必须填满这个容器

此外，最后我的向量将被随机填充，所以我无法提前知道如何正确投射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:43:43.247

获得解决方法的最简单（也是最快）的方法是再引入一个虚函数来唯一标识派生类（使用`int`、`enum`值或`typeid`）。所以稍后你可能会调用它并意识到你在 , 后面有什么确切的派生类（或者可能是基类）`BASE*`，并对`dynamic_cast`那个类型做。

[您没有提供有关您要解决的问题的详细信息...如果您想实施双重调度](http://en.wikipedia.org/wiki/Double_dispatch)（或某种），请确保您已经对现有解决方案进行了完整的研究...

但通常，如果你需要`dynamic_cast`它意味着你的设计有问题（领域的 OOP 模型）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:39:01.153

就像你事先不知道你`vec[i]`是什么一样，编译器也不知道。函数重载解析是一个编译时过程，而多态性 - 运行时。

因此它调用`void foo(BASE* a, BASE* b)`版本。

换句话说，您想要做的事情是不可能的，除非您`dynamic_cast`尝试强制转换为每个可能的派生类。`0`如果对象类型错误，它将返回。

然而，许多人会争辩说，使用 `dynamic_cast`是糟糕设计的标志。而且它也很贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:43:09.950

您需要为此进行动态调度，如下所示：

```
void foo(BASE *a, BASE *b) {
  if (DERIVED *bb = dynamic_cast<DERIVED*>(b)) {
    foo(a, bb);
  } else {
    std::cout << " full base " << std::endl;
  }
} 
```

如果您不想使用 a `dynamic_cast`，您可以添加一个虚函数，`BASE`该函数将返回某种形式的类标识符（例如 an `enum`），在每个派生类中覆盖它，然后根据此函数的返回值分叉调用（连同`static_cast`）。

# json - 在 yii 中，如何将 json 格式的输入插入到表中

> ID：13724293
> 
> 赞同：0
> 
> 时间：2012-12-05T13:25:40.977
> 
> 标签：json, yii, extjs4

我正在使用 extjs 和 yii 创建项目。我的客户端设计在 extjs-4 中，服务器端设计在 yii 框架中。

现在我有表**Poll**字段为：

*   花粉
*   民意调查问题
*   活跃
*   用户身份

和**Polloption**：

*   花粉
*   选项

现在在创建新极点期间，在 extjs 中设计的轮询创建视图表单将接收输入并将此数据以 json 格式发送到服务器端，如-

```
{
  'success':true,
  'results':[ {
              'pollid' : 1,
               'pollQuestion' : 'Which is capital of india',
           } 
           {  options from polloption table in json format
   }]
} 
```

所以在服务器端，所有这些值都将以 json 格式出现。所以现在在 yii 中，我想在相应的投票表字段中插入这个接收到的输入。

那么 Yii 将如何转换这个 json 格式的输入并将这些值插入到 poll 表的相应字段中。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:49:08.823

你的问题非常模糊和笼统。以下是您要执行的操作的概述：

*   将数据提交给 Yii 控制器
*   如果数据在正文中，请使用 PHP 的[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)。如果你 POST 或 GET 它，你可以使用 Yii 的[CHttpRequest::getParam](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#getParam-detail)读取原始 JSON
*   使用[CJSON::decode()](http://www.yiiframework.com/doc/api/1.1/CJSON#decode-detail)将 JSON 解析为 PHP 数组
*   操作数组值，并构建一个新数组
*   返回数据（如果您只需要原始 JSON 而不需要视图，则回显或打印它）。您可能需要再次返回 JSON 以在 extjs4 中使用它，因此您需要使用[CJSON::encode()](http://www.yiiframework.com/doc/api/1.1/CJSON#encode-detail)方法

# php - 以后应该使用什么方法设置变量，然后回显页面标题

> ID：13724295
> 
> 赞同：-2
> 
> 时间：2012-12-05T13:25:49.010
> 
> 标签：php, variables, ob-start

我试图避免两次查询我的数据库：设置`<title>`属性和回显页面标题。我只想查询一次：

例子：

```
<html>
  <head>
  <?php
    // how should I use here ob_start() ? Is there any other possible way to achieve this?
    $title = "";
    echo '<title>', $title, '</title>'; // this should be in the end <title>value of $row['page_title']</title>
  ?>
  </head>
  <body>
     <?php
       $sql = $mysqli->query("MY QUERY");
       $row = $sql->fetch_assoc();
       $title = $row['page_title']; // I want that this assignment to set the variable in the top
       // I know that for this job I can use ob_start() but I didn't used it until now
       // and I will really appreciate any help from you.

     ?>
     <h1><?php echo $title; ?></h1>
  </body>
</html> 
```

我知道我可以在回显`title`属性之前进行查询，但我不想那样做。你有什么建议吗？或者你能告诉我如何使用那个`ob_start()`/`ob_clean()`功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:29:34.407

将查询移到代码顶部并重用变量！

```
<?php
       $sql = $mysqli->query("MY QUERY");
       $row = $sql->fetch_assoc();
       $title = $row['page_title']; 
?>
<html>
  <head>
  <?php echo '<title>', $title, '</title>'; ?>
  </head>
  <body>
     <h1><?php echo $title; ?></h1>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:13:50.027

`ob_start();`，在通常意义上，不会帮助你。但是，您可以使用这样的丑陋解决方案：

```
ob_start();
echo '
  <html>
    <head>
      <title>{title}</title>
    </head>
  <body>
    ';
$header = ob_get_clean();

// and then, when you know your title
echo str_replace('{title}', $known_title, $header); 
```

*但我强烈建议采取另一种方法。在收集完所有数据并且您知道有关所需模板的所有详细信息后，您需要选择并填写模板。*如果你开始抢先呼应不同的部分，你会遇到越来越多的麻烦。现在您需要更改某些页面的标题。然后你需要为特定页面添加 css 文件，你将不得不再次做那个丑陋的事情。为什么不以正确的方式去做呢？

# android - 视频无法使用 Android 的原生 MediaPlayer 播放，但可以使用 Dropbox 的视频播放器播放

> ID：13724298
> 
> 赞同：3
> 
> 时间：2012-12-05T13:26:01.150
> 
> 标签：android, ffmpeg, video-streaming, media-player, dropbox

我无法使用 Android 的 MediaPlayer 播放某个 .3gp 文件（来自 Dropbox 链接）。但是，该文件可以从 Dropbox Android 应用程序神奇地播放而没有问题。

我正在尝试使用它来播放它：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
intent.setData(Uri.parse("https://www.dropbox.com/s/zpiqwmxka6llavt/SketchyFile.3gp"));
startActivity(intent); 
```

我的清单包含

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

这给出了“无法播放此视频”错误。

![错误截图](../Images/50577dd4ea22fec8acc48dd49720dc86.png)

Logcat 显示：

```
I/NuCachedSource2(89): new range: offset= 2245017
I/ChromiumHTTPDataSource(89): connect to https://dl.dropbox.com/0/view/a1crokuhpprsaeo/SketchyFile.3gp @2245017
I/NuCachedSource2(89): ERROR_END_OF_STREAM
E/MediaPlayer(3629): error (1, -2147483648)
E/MediaPlayer(3629): Error (1,-2147483648)
D/VideoView(3629): Error: 1,-2147483648 
```

如果我尝试从 Dropbox Android 应用程序播放它，Dropbox 的视频播放器播放它没有问题。

![保管箱成功截图](../Images/986ee171254679ebc3ec563b0d5c8ca3.png)

根据 ffmpeg 的 ffprobe 工具，我可以验证媒体类型对 Android 来说不是奇特的东西。

Dropbox 是否在执行一些奇怪的转码伏都教，有没有办法让我以类似的方式进行这项工作？

编辑：这里有一些关于 DropBox 的编码 voodoo 的更多[见解](https://tech.dropbox.com/2014/02/video-processing-at-dropbox/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:27:05.813

由于我既没有投递箱应用程序源，也没有访问实际文件的权限，所以我将根据几个假设做出最好的猜测。

本机应用程序无法播放该文件，因为它的格式无法在那里播放。你能说下载文件，把它放在sd卡里然后播放吗？如果不是，那么手机不支持这种格式。

为什么Dropbox播放器播放它？基于相同假设，我的猜测是 drop box 播放器在 jni 下方添加了自己的解码库（例如 ffmpeg ）。所以它可以解码这个。

另一个可能的猜测：您正在尝试对 3gp 文件进行流式播放，这是不可能的。HTTP pd 播放可能是可能的。再次，下载并从sd卡播放，如果可以播放，那么可能就是这个问题。该文件可能不会被提示它需要是哪个文件。

投递箱正在播放这个，因为也许投递箱应用程序以某种方式通过其他一些api访问文件末尾的标题（你的巫术）？

同样，以上两个都是我看到的常见问题的猜测，因为我既没有 Dropbox 应用程序源，也没有访问您的文件或确切地知道您如何尝试使用本机播放器播放视频。也许上述提示之一有帮助。祝你好运！

编辑：看到的问题：Nexus S 不在本地或从 http 链接播放给定文件。事实证明，重新混合到 mp4 使得 Nexus S 可以双向播放。这意味着某些 android 设备的本地原生播放器中不存在 3gp 支持。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-12T08:00:28.417

您可以使用`try-catch`如下：

```
try
{
  VideoView videoView = (VideoView) findViewById(R.id.VideoView);         
  MediaController mediaController = new MediaController(this);
  mediaController.setAnchorView(videoView);
  // Set Audio/Video
  String strfilename = "http://example.com/video.mp4";
  Uri video = Uri.parse(strfilename);
  videoView.setMediaController(mediaController);
  videoView.setVideoURI(video);
  videoView.start();   
} 
catch (Exception e) 
{
  //enter code here
  //Handle Errors
} 
```

# objective-c - 在 NSMenuItem 中显示模型的数据

> ID：13724306
> 
> 赞同：3
> 
> 时间：2012-12-05T13:26:19.887
> 
> 标签：objective-c, cocoa-bindings, nsmenuitem

我想在状态栏菜单中显示我的模型的一些数据。所以，我将我的实体对象绑定到一个的标题`NSMenuItem`：

```
 [self.statusMenu setAutoenablesItems:NO];

        NSMenuItem * exportMenuItem = [[NSMenuItem alloc] init];
        [exportMenuItem bind:@"title" toObject:expo withKeyPath:@"menuItemTitle" options:nil];
        [exportMenuItem setEnabled:NO];

        [self.statusMenu insertItem:exportMenuItem atIndex:3]; 
```

到目前为止，它工作正常。但是当我更新我的模型时，它不会更新`NSMenuItem`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:39:22.313

作为参考，这个问题的规范解决方案是实现这样的类方法：

```
+ (NSSet *)keyPathsForValuesAffectingMenuItemTitle
{
    return [NSSet setWithObjects: @"propertyMenuItemTitleDependsOn1", 
                                  @"propertyMenuItemTitleDependsOn2",
                                  nil];
} 
```

如果您实现这样的方法，则框架将在任何其他属性发生更改时处理调用`willChangeValueForKey:`和`didChangeValueForKey:`键。`menuItemTitle`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:49:17.950

好的，我明白了：

`menuItemTitle`是一个动态的 getter 方法，它结合了`expo`. 所以`NSMenuItem`'s 标题没有得到更新的原因可能是，这`menuItemTitle`可能永远不会真正设置。

`menuItemTitle`那么，当我的一个属性被设置时，我怎么知道它已经改变了呢？覆盖`expo`要添加的设置器`[self willChangeValueForKey:@"menuItemTitle"];`并且`[self didChangeValueForKey:@"menuItemTitle"];`不起作用，因为它会导致一次又一次地调用设置器本身的无限循环。

所以这是我的解决方案：我覆盖了`[NSManagedObject setValue:(id)value forKey:(NSString *)key]`：

```
- (void)setValue:(id)value forKey:(NSString *)key {
    [self willChangeValueForKey:@"menuItemTitle"];
    [super setValue:value forKey:key];
    [self didChangeValueForKey:@"menuItemTitle"];
} 
```

# java - 如何关闭两个表单但只使用单个命令（SetVisible），Java

> ID：13724311
> 
> 赞同：1
> 
> 时间：2012-12-05T13:26:24.583
> 
> 标签：java, swing, user-interface, jframe

我有两个表格form1和form2。我想当我`setVisible(false)` form1，然后form2也自动`setVisible(false)`。那么，如何使用单个命令 setVisible 而立即关闭两个窗体。

或者也许如何使 form2 像确认对话框。所以，不要进入 Form1，如果 form2 还没有关闭

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:34:24.713

也许只需检查 form1是否存在`isVisible(form1)`，如果是，则`setVisible(false)`. 这是你想要的吗？

我想到了另一件事。取决于你想做什么，也许使用`dispose()`而不是`setVisible()`.

希望我能帮上忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:32:40.680

为此编写一个方法并改用它：

```
private void setFormsVisible(boolean b) {
  form1.setVisible(b);
  form2.setVisible(b);
} 
```

那么你的表单应该是类变量。您还可以尝试使表单最终化，并覆盖 form1 的 setVisible-method。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:33:44.667

form2 应该是一个模态对话框，其父级设置为 form1。这将阻止与 form1 的交互，直到 form2 关闭。

# javascript - Javascript - onscroll 顺利移动到下一个锚点？如何？

> ID：13724313
> 
> 赞同：7
> 
> 时间：2012-12-05T13:26:35.503
> 
> 标签：javascript, scroll, position, fixed

我正在构建一个单页网站，其中包含几个部分，每个部分都填写用户的窗口；我有那个工作。

我想做的是：

当用户向上或向下滚动时，他/她将（相应地）向上或向下滚动到之前或之后的部分。我的每个部分的顶部都有一个锚点。

这是我想要实现的一个例子。每篇文章都填满了页面。滚动后，您将跳转到下一篇文章。

[http://www.made-my-day.com/](http://www.made-my-day.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-14T08:37:09.487

我认为您可以使用此插件完成工作：[https](https://github.com/alvarotrigo/fullPage.js) ://github.com/alvarotrigo/fullPage.js 。

此外，它似乎正在积极更新。对 repo 的最后一次提交是在 3 天前进行的。

干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T14:01:53.603

你应该看看[scrollorama](http://johnpolacek.github.com/scrollorama/)和[superscrollorama](http://johnpolacek.github.com/superscrollorama/)。

它们是许多可用于滚动的很酷的效果，包括与您提供的网站一样的效果。

- 更新 -

在与 OP 交谈后，我意识到这两个图书馆都没有做他想做的事。所以，我的新建议是[reveal-js](http://lab.hakim.se/reveal-js)，一个js表现库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:24:35.330

你真的不想在`onscroll`. 考虑一下，`onscroll`除了“页面的视图正在移动”的事件之外，这实际上什么都不是。

这并不意味着他们正在使用鼠标滚轮来做到这一点。

在手机上，你的计划是有意义的：那么它就像使拖动运动等于滑动运动一样。伟大的。

我首选的滚动方法是单击鼠标中键，然后将鼠标放在锚点下方，这样我就可以在每个文本块滚动过屏幕时阅读它。

对于长块，我什至不需要手放在鼠标上。

因此，在我的情况下，`onscroll`将以每秒 60 个事件的速度触发，如果您自动跳转文章，我将通过您的整个站点的内容进行传送。

其他人仍然拖动实际的滚动条。

听鼠标滚轮和按键（上/下，pg-up/pg-down），而不是任何移动页面的方法，更安全... ...但是您确定所有文章都足够小以便所有内容都适合所有浏览器窗口，即使是愚蠢的小分辨率（iPhone 3）？

因为如果人们需要滚动来阅读内容，那么突然之间，您将面临一个更加复杂得多的解决方案：
您将需要听取任何类型的常规（或自定义）滚动请求，才能访问当前内容的底部... ...然后您必须向用户提供某种视觉队列，他们现在位于内容的最底部，并继续使用触发方法（滑动/拖动/keys/mwheel) 将切换文章。

前两个很好... ...让它感觉像智能手机一样充满弹簧。
...其他两个呢，人们可能希望在一秒钟内多次击中他们，以到达他们要去的地方？

# c# - 有没有办法在 C# 中调用 super 的 super

> ID：13724314
> 
> 赞同：3
> 
> 时间：2012-12-05T13:26:40.587
> 
> 标签：c#, polymorphism, base

我知道这是蹩脚的设计，我只是有点懒得检查代码，我宁愿走捷径。

```
class Grandma
{
   public virtual void Mtd(){}
}

class Mommy : Grandma
{
   public override void Mtd(){ base.Mtd(); /* other stuff I wanna skip*/}
}

class Daughter : Mommy
{
   public override void Mtd(){ /*base.base.Mtd() //How can I do it ? */}
} 
```

因为该方法是虚拟上播将不起作用。那么，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:33:21.013

这是不可能的; 但是，如果你想走捷径，你可以在你的`Mommy`方法中添加一个类型检查：

```
class Mommy : Grandma
{
    public override void Mtd()
    { 
        base.Mtd();   // calls `Grandma` implementation

        if (this.GetType() == typeof(Mommy))
        {
            // not executed for any derived class
        }

        if (!(this is Daughter))
        {
            // not executed for `Daughter`
        }
    }        
}

class Daughter : Mommy
{
    public override void Mtd()
    { 
        base.Mtd();   // calls `Mommy` implementation
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T13:29:17.203

无法“跳过”`Mommy`覆盖。你必须以某种方式重构它。

# android - SimpleAdapter 中的 WebView

> ID：13724317
> 
> 赞同：1
> 
> 时间：2012-12-05T13:26:46.360
> 
> 标签：android, simpleadapter

我用 json 创建 Rss，当我从后台获取 jsonObject 时，在 postExecute 我用对象结果创建 Map，然后我有一个错误 LogCat 在 SimpleAdapter 中导致错误 WebView 为什么，没有人可以帮忙？

**日志猫**

```
 12-05 17:55:35.597: E/AndroidRuntime(22543): FATAL EXCEPTION: main
    12-05 17:55:35.597: E/AndroidRuntime(22543): java.lang.IllegalStateException: android.webkit.WebView is not a  view that can be bounds by this SimpleAdapter
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.SimpleAdapter.bindView(SimpleAdapter.java:195)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.SimpleAdapter.createViewFromResource(SimpleAdapter.java:126)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.SimpleAdapter.getView(SimpleAdapter.java:114)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.AbsListView.obtainView(AbsListView.java:2161)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.ListView.makeAndAddView(ListView.java:1831)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.ListView.fillDown(ListView.java:674)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.ListView.fillFromTop(ListView.java:735)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.ListView.layoutChildren(ListView.java:1652)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.AbsListView.onLayout(AbsListView.java:1996)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.View.layout(View.java:14003)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.View.layout(View.java:14003)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.View.layout(View.java:14003)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.View.layout(View.java:14003)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.View.layout(View.java:14003)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.Choreographer.doFrame(Choreographer.java:532)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.os.Handler.handleCallback(Handler.java:725)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.os.Handler.dispatchMessage(Handler.java:92)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.os.Looper.loop(Looper.java:137)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at android.app.ActivityThread.main(ActivityThread.java:5238)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at java.lang.reflect.Method.invokeNative(Native Method)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at java.lang.reflect.Method.invoke(Method.java:511)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
    12-05 17:55:35.597: E/AndroidRuntime(22543):    at dalvik.system.NativeStart.main(Native Method) 
```

**源代码**

```
protected void onPostExecute(JSONObject result) {
      super.onPostExecute(result);
      if(result != null){ 

      JSONObject jsn = result;
      try {
        JSONArray jarray = jsn.getJSONArray("item");
        for (int i = 0; i < jarray.length(); i++){
            JSONObject jsno = jarray.getJSONObject(i);
            Log.d("Log", jsno.getString("title"));
             rssMap = new HashMap<String, Object>();
             rssMap.put(TITLE, jsno.getString("title"));
             rssMap.put(CATEGORY, jsno.getString("category"));
             rssMap.put(DATE, jsno.getString("pubDate"));
             rssMap.put(DESCRIPTION, jsno.getString("description"));// This for webView, it's  html code!
             rssView.add(rssMap);
        }
        SimpleAdapter adapter = new SimpleAdapter(
                getApplicationContext(), rssView, R.layout.item, 
                new String[] {TITLE, CATEGORY, DATE, DESCRIPTION}, 
                new int[] {R.id.title, R.id.cat, R.id.date, R.id.desc}
                );
        list.setAdapter(adapter);
      }
      catch (JSONException e) {     
            e.printStackTrace();}
      }
      else{
          /*
           * Тут мне нужен AlertDialog с оповещанием что нету подключения к сети!
           * */
          showDialog(errorShow);      
      }

    }

} 
```

**项目.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Заголовок"
        android:textColor="#33b5e5"
        android:textSize="23sp" />

    <TextView
        android:id="@+id/date"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="05.12.2012"
        android:textColor="#969696"
        android:textSize="14sp" />

    <TextView
        android:id="@+id/cat"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Категория"
        android:textColor="#969696"
        android:textSize="14sp" />

    <WebView
        android:id="@+id/desc"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:00:09.103

SimpleAdapter 的 Android 文档指出：

> 将数据绑定到视图分两个阶段进行。首先，如果 SimpleAdapter.ViewBinder 可用，`setViewValue(android.view.View, Object, String)`则调用。如果返回值为`true`，则表示发生了绑定。如果返回值为 false，则依次尝试以下视图：

*   实现 Checkable 的视图（例如`CheckBox`）。预期的绑定值是一个布尔值。
*   `TextView`. 预期的绑定值是一个字符串并被`setViewText(TextView, String)`调用。
*   `ImageView`. 预期的绑定值是资源 id 或字符串，并且`setViewImage(ImageView, int)`或被`setViewImage(ImageView, String)`调用。

> 如果找不到合适的绑定，则抛出 IllegalStateException。

适配器无法自行将您的`jsno.getString("description")`（即 a `String`）转换为 URL。您可以尝试转换字符串，然后将其作为 URL 对象放入 中`rssMap`，但是，我建议您实现自己的自定义`Adapter`和覆盖方法来设置绑定期间`getView()`的 URL 。`WebView`

# javascript - 为什么 jsHint 警告我：'(var) 已定义但从未使用过'？

> ID：13724318
> 
> 赞同：1
> 
> 时间：2012-12-05T13:26:46.327
> 
> 标签：javascript, jquery, jshint

我正在使用 CodeKit 在我的脚本上运行 jsHint，并将它们最小化，我想了解以下错误：

```
 // create a next button for each text input and wire it for nextQ()!
    var next = $('<a class="button next">Next</a>')
        .on( 'click', function() {
            nextQ( $(this) );
        })
        .insertAfter( $questions.find(':text') ); 
```

jsHint 警告：

> next 已定义但从未使用过

鉴于元素在每次页面加载时都是 insertAfter() ，这是 jsHint 的限制，还是我做错了什么？我的 jQuery 非常基础，我想从错误中学习！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:28:20.853

好吧，您正在定义一个回调，不需要将其分配给变量；你可以简单地做：

```
$('<a class="button next">Next</a>')
    .on( 'click', function() {
        nextQ( $(this) );
    })
.insertAfter( $questions.find(':text') ); 
```

所以 next 没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:30:01.870

`next`var 是不必要的，因为它`.insertAfter()`在 from 的返回值上被调用`.on()`。除非你要调用一些东西`next`，否则你可以这样做：

```
$('<a class="button next">Next</a>')
    .on( 'click', function() {
        nextQ( $(this) );
    })
    .insertAfter( $questions.find(':text') ); 
```

# ios - UITableViewCell 链接到 PageViewController 中的特定页面

> ID：13724323
> 
> 赞同：5
> 
> 时间：2012-12-05T13:27:00.947
> 
> 标签：ios, objective-c, uitableview

我对 iOS 编程相当陌生，遇到了一个我自己无法解决的问题。

我的应用程序的主要部分是可搜索的动物列表（AnimalTableViewController）（此功能有效）。单击某个单元格后，您应该能够查看动物的图像。所有的动物图像都在 PagerViewController (CustomPagerViewController) 中编译。

**[![我的故事板的图像可以在这里找到](../Images/8054ec732351f0c330580f22187f4695.png)](https://i.stack.imgur.com/6w6nS.jpg)**

**我需要做的是将动态表格单元格连接到特定的视图/故事板。**我之前已经能够将单元格连接到图像 - 图像数组显示在单个视图控制器中。这次我选择通过 PagerViewController 来实现，因为我需要 swipe 功能（与 swipe 相关的方法可以在 PagerViewController.m 中找到，它们都按预期工作）。

请你帮我解决这个问题，我还没有找到任何关于如何在 UITableView 和 PagerViewController 之间传递数据的教程或建议。

**AnimalTableViewController.m**

```
@implementation AnimalTableViewController

@synthesize allTableData;
@synthesize filteredTableData;
@synthesize searchBar;
@synthesize isFiltered;
@synthesize tableView;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super init];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    tableView.delegate = (id)self;
    tableView.dataSource = (id)self;

    searchBar.delegate = (id)self;

    allTableData = [[NSMutableArray alloc] initWithObjects:
                    [[Animal alloc] initWithName:@"Aardvark" andDescription:@"Aardvark"],
                    [[Animal alloc] initWithName:@"Alligator" andDescription:@"Alligator"],
                    [[Animal alloc] initWithName:@"Alpaca" andDescription:@"Alpaca"],
                    [[Animal alloc] initWithName:@"Ant" andDescription:@"Ant"],
                    [[Animal alloc] initWithName:@"Anteater" andDescription:@"Anteater"],
                    [[Animal alloc] initWithName:@"Armadillo" andDescription:@"Armadillo"],
                    [[Animal alloc] initWithName:@"Baboon" andDescription:@"Baboon"],
                    [[Animal alloc] initWithName:@"Badger" andDescription:@"Badger"],
                    [[Animal alloc] initWithName:@"Bat" andDescription:@"Bat"],
                    [[Animal alloc] initWithName:@"Bear" andDescription:@"Bear"],
                    [[Animal alloc] initWithName:@"Beaver" andDescription:@"Beaver"],
                    [[Animal alloc] initWithName:@"Bee" andDescription:@"Bee"],
                    [[Animal alloc] initWithName:@"Bison" andDescription:@"Bison"],
                    nil ];
}

- (void)viewDidUnload
{
    [self setSearchBar:nil];
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int rowCount;
    if(self.isFiltered)
        rowCount = filteredTableData.count;
    else
        rowCount = allTableData.count;

    return rowCount;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    Animal* animal;
    if(isFiltered)
        animal = [filteredTableData objectAtIndex:indexPath.row];
    else
        animal = [allTableData objectAtIndex:indexPath.row];

    cell.textLabel.text = animal.name;
//    cell.detailTextLabel.text = animal.description;

    return cell;
}

#pragma mark - Table view delegate

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {
        isFiltered = true;
        filteredTableData = [[NSMutableArray alloc] init];

        for (Animal* animal in allTableData)
        {
            NSRange nameRange = [animal.name rangeOfString:text options:NSCaseInsensitiveSearch];
            NSRange descriptionRange = [animal.description rangeOfString:text options:NSCaseInsensitiveSearch];
            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [filteredTableData addObject:animal];
            }
        }
    }

    [self.tableView reloadData];
}

@end 
```

**CustomPagerViewController.m**

```
@interface CustomPagerViewController ()

@end

@implementation CustomPagerViewController

- (void)viewDidLoad
{
    // Do any additional setup after loading the view, typically from a nib.
    [super viewDidLoad];

    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"Aardvark"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"Alligator"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"Alpaca"]];
}

@end 
```

**PagerViewController.m**

```
@interface PagerViewController ()
@property (assign) BOOL pageControlUsed;
@property (assign) NSUInteger page;
@property (assign) BOOL rotating;
- (void)loadScrollViewWithPage:(int)page;
@end

@implementation PagerViewController

@synthesize scrollView;
@synthesize pageControl;
@synthesize pageControlUsed = _pageControlUsed;
@synthesize page = _page;
@synthesize rotating = _rotating;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self.scrollView setPagingEnabled:YES];
    [self.scrollView setScrollEnabled:YES];
    [self.scrollView setShowsHorizontalScrollIndicator:NO];
    [self.scrollView setShowsVerticalScrollIndicator:NO];
    [self.scrollView setDelegate:self];
}

- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers {
    return NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    [viewController willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    _rotating = YES;
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    [viewController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];

    self.scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [self.childViewControllers count], scrollView.frame.size.height);
    NSUInteger page = 0;
    for (viewController in self.childViewControllers) {
        CGRect frame = self.scrollView.frame;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0;
        viewController.view.frame = frame;
        page++;
    }

    CGRect frame = self.scrollView.frame;
    frame.origin.x = frame.size.width * _page;
    frame.origin.y = 0;
    [self.scrollView scrollRectToVisible:frame animated:NO];

}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    _rotating = NO;
    UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    [viewController didRotateFromInterfaceOrientation:fromInterfaceOrientation];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    for (NSUInteger i =0; i < [self.childViewControllers count]; i++) {
        [self loadScrollViewWithPage:i];
    }

    self.pageControl.currentPage = 0;
    _page = 0;
    [self.pageControl setNumberOfPages:[self.childViewControllers count]];

    UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    if (viewController.view.superview != nil) {
        [viewController viewWillAppear:animated];
    }

    self.scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [self.childViewControllers count], scrollView.frame.size.height);
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    if ([self.childViewControllers count]) {
        UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
        if (viewController.view.superview != nil) {
            [viewController viewDidAppear:animated];
        }
    }
}

- (void)viewWillDisappear:(BOOL)animated {
    if ([self.childViewControllers count]) {
        UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
        if (viewController.view.superview != nil) {
            [viewController viewWillDisappear:animated];
        }
    }
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated {
    UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    if (viewController.view.superview != nil) {
        [viewController viewDidDisappear:animated];
    }
    [super viewDidDisappear:animated];
}

- (void)loadScrollViewWithPage:(int)page {
    if (page < 0)
        return;
    if (page >= [self.childViewControllers count])
        return;

    // replace the placeholder if necessary
    UIViewController *controller = [self.childViewControllers objectAtIndex:page];
    if (controller == nil) {
        return;
    }

    // add the controller's view to the scroll view
    if (controller.view.superview == nil) {
        CGRect frame = self.scrollView.frame;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0;
        controller.view.frame = frame;
        [self.scrollView addSubview:controller.view];
    }
}

- (void)previousPage {
    if (_page - 1 > 0) {

        // update the scroll view to the appropriate page
        CGRect frame = self.scrollView.frame;
        frame.origin.x = frame.size.width * (_page - 1);
        frame.origin.y = 0;

        UIViewController *oldViewController = [self.childViewControllers objectAtIndex:_page];
        UIViewController *newViewController = [self.childViewControllers objectAtIndex:_page - 1];
        [oldViewController viewWillDisappear:YES];
        [newViewController viewWillAppear:YES];

        [self.scrollView scrollRectToVisible:frame animated:YES];

        self.pageControl.currentPage = _page - 1;
        // Set the boolean used when scrolls originate from the UIPageControl. See scrollViewDidScroll: above.
        _pageControlUsed = YES;
    }
}

- (void)nextPage {
    if (_page + 1 > self.pageControl.numberOfPages) {

        // update the scroll view to the appropriate page
        CGRect frame = self.scrollView.frame;
        frame.origin.x = frame.size.width * (_page + 1);
        frame.origin.y = 0;

        UIViewController *oldViewController = [self.childViewControllers objectAtIndex:_page];
        UIViewController *newViewController = [self.childViewControllers objectAtIndex:_page + 1];
        [oldViewController viewWillDisappear:YES];
        [newViewController viewWillAppear:YES];

        [self.scrollView scrollRectToVisible:frame animated:YES];

        self.pageControl.currentPage = _page + 1;
        // Set the boolean used when scrolls originate from the UIPageControl. See scrollViewDidScroll: above.
        _pageControlUsed = YES;
    }
}

- (IBAction)changePage:(id)sender {
    int page = ((UIPageControl *)sender).currentPage;

    // update the scroll view to the appropriate page
    CGRect frame = self.scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;

    UIViewController *oldViewController = [self.childViewControllers objectAtIndex:_page];
    UIViewController *newViewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    [oldViewController viewWillDisappear:YES];
    [newViewController viewWillAppear:YES];

    [self.scrollView scrollRectToVisible:frame animated:YES];

    // Set the boolean used when scrolls originate from the UIPageControl. See scrollViewDidScroll: above.
    _pageControlUsed = YES;
}

- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView {
    UIViewController *oldViewController = [self.childViewControllers objectAtIndex:_page];
    UIViewController *newViewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    [oldViewController viewDidDisappear:YES];
    [newViewController viewDidAppear:YES];

    _page = self.pageControl.currentPage;
}

#pragma mark -
#pragma mark UIScrollViewDelegate methods

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    // We don't want a "feedback loop" between the UIPageControl and the scroll delegate in
    // which a scroll event generated from the user hitting the page control triggers updates from
    // the delegate method. We use a boolean to disable the delegate logic when the page control is used.
    if (_pageControlUsed || _rotating) {
        // do nothing - the scroll was initiated from the page control, not the user dragging
        return;
    }

    // Switch the indicator when more than 50% of the previous/next page is visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    if (self.pageControl.currentPage != page) {
        UIViewController *oldViewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
        UIViewController *newViewController = [self.childViewControllers objectAtIndex:page];
        [oldViewController viewWillDisappear:YES];
        [newViewController viewWillAppear:YES];
        self.pageControl.currentPage = page;
        [oldViewController viewDidDisappear:YES];
        [newViewController viewDidAppear:YES];
        _page = page;
    }
}

// At the begin of scroll dragging, reset the boolean used when scrolls originate from the UIPageControl
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    _pageControlUsed = NO;
}

// At the end of scroll animation, reset the boolean used when scrolls originate from the UIPageControl
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    _pageControlUsed = NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:39:15.620

您需要设置从单击`UITableViewCell`到新 viewController 的 segue。使用该`prepareForSegue`方法并将`UIImage`（或图像数组）传递给新的 viewController。一旦数组成为新 viewController 的一部分，您就可以随心所欲地操作数组。

1.  设置从`UITableViewCell`viewController 到新的 segue。
2.  设置 segue 标识符。
3.  根据选定`UITableViewCell`的`indexPath`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:59:11.103

为 segue 创建一个标识符（Interface Builder 中 2 个视图之间的线）

![在此处输入图像描述](../Images/47e9c4adeaa97e4a7514e81cd0082125.png)

然后将以下代码添加到 AnimalTableViewController

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Animal* animal;
    if(isFiltered)
        animal = [filteredTableData objectAtIndex:indexPath.row];
    else
        animal = [allTableData objectAtIndex:indexPath.row];

    [self performSegueWithIdentifier:@"DetailSegue" sender:animal];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"DetailSegue"]) {

        PagerViewController *detailVC = [segue destinationViewController];
        detailVC.currentAnimal = sender;
    }
} 
```

然后在您的 PagerViewController.h 中创建

```
@property (strong, nonatomic) Animal *currentAnimal; 
```

现在您可以通过 self.currentAnimal 访问 PagerViewController 中的动物

# java - 管道 yuv 帧到 ffmpeg

> ID：13724325
> 
> 赞同：2
> 
> 时间：2012-12-05T13:27:08.047
> 
> 标签：java, android, ffmpeg

我读取相机输入帧，然后对它们进行一些转换，然后我想制作一个视频。目前我正在将原始 yuv420 图像作为一个大文件写入 sdcard，然后调用静态编译的 FFMPEG 将其编码为 mp4 电影。

问题是因为每秒写入 10 个图像会导致 yuv420p 格式的 480x320 图像以大约 2MB/s 的速度写入 SDCARD。这对于 SDCARD 来说太过分了。

那么是否可以将这些 yuv420 图像直接通过管道传输到 FFMPEG 以及如何？

# android - 在android中登录后访问https内容

> ID：13724328
> 
> 赞同：0
> 
> 时间：2012-12-05T13:27:18.993
> 
> 标签：android, ssl, login, https, response

我需要访问通过 https 协议的外部网站的内容。该网站显示您的课程安排，我想解析这些信息以在我的应用程序中进行调整。

好吧，我正在考虑使用 httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 连接到登录页面 我把用户名和密码放在哪里。然后，与计划页面建立另一个连接，因为我应该登录。但是第二个响应显示来自登录页面的 html，所以我想这不会以这种方式工作，我需要一些 cookie我必须通过第二个请求才能访问。

这是我正在使用的代码：

```
public class ConexionIntranet extends AsyncTask<String, Void, String>  {
private String sUserName = "username...";
private String sPassword = "password...";

protected String doInBackground(String... urls) {
    try {
        InputStream is = null;
        HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;

        DefaultHttpClient client = new DefaultHttpClient();

        SchemeRegistry registry = new SchemeRegistry();
        SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
        socketFactory.setHostnameVerifier((X509HostnameVerifier) hostnameVerifier);
        registry.register(new Scheme("https", socketFactory, 443));
        SingleClientConnManager mgr = new SingleClientConnManager(client.getParams(), registry);
        DefaultHttpClient httpClient = new DefaultHttpClient(mgr, client.getParams());

        // Set verifier      
        HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);

        // Example send http request
        final String url = urls[0];
        HttpPost httpPost = new HttpPost(url);
        HttpPost httpPost2 = new HttpPost("https://url...");
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("user", sUserName));
        nameValuePairs.add(new BasicNameValuePair("pass", sPassword));
        try {
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            httpPost2.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        } catch (UnsupportedEncodingException e1) {
            Log.d("datos", "Error: "+e1.getMessage());
        }
        HttpResponse res;
        String result;
        try {
            res = httpClient.execute(httpPost);
            Log.d("datos", "Respuesta post: "+res.toString());

            res = httpClient.execute(httpPost2);
            is=res.getEntity().getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
            Log.d("datos", "Respuesta: "+result);
        } catch (ClientProtocolException e) {
            Log.d("datos", "Error: "+e.getMessage());
        } catch (IOException e) {
            Log.d("datos", "Error: "+e.getMessage());
        }           
        return null;
    } catch (Exception e) {
        Log.d("datos", "Error: "+e.getMessage());
        return null;
    }
}} 
```

关于如何解决这个问题的任何想法？也许只需一个请求即可访问内容并同时登录？

提前感谢您的宝贵时间！

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:52:58.687

您需要使用[HttpContext](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html)并在后续的 http 调用中重用它。上下文会将 cookie 存储在 cookie 存储中（请参阅[CookieStore](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/CookieStore.html)的 javadoc ），并将它们用于下一次调用。

首先，定义HttpContext：

```
DefaultHttpClient client = new DefaultHttpClient();
CookieStore cookieStore = new BasicCookieStore();
HttpContext httpContext = new BasicHttpContext();
httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore); 
```

然后，在您的电话中使用它：

```
 HttpResponse res;
    String result;
    try {
        res = httpClient.execute(httpPost, httpContext);
        Log.d("datos", "Respuesta post: "+res.toString());

        res = httpClient.execute(httpPost2, httpContext);
        is=res.getEntity().getContent();

        /* rest of the code */

    } catch (ClientProtocolException e) {
        Log.d("datos", "Error: "+e.getMessage());
    } catch (IOException e) {
        Log.d("datos", "Error: "+e.getMessage());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:19:54.150

好吧，我终于找到了使用 HttpsURLConnection 的正确解决方案。HttpClient 似乎已被弃用：

我将代码留在这里，也许它可以帮助遇到同样问题的人：

```
public class ConexionIntranet extends AsyncTask<String, Void, String>  {
    private String sUserName = "user";
    private String sPassword = "password";
    private String urlLogin = "https://web.com/login";
    private String urlSchedule = "https://web.com/service";
    private String urlHost = "https://web.com/";
    private String resultado = "";

    protected String doInBackground(String... urls) {
        try {
            // Recuperamos los parámetros relativos a las urls así como user y pass introducidos por el usuario
            for(int i=0; i<urls.length; i++){
                if(i==0) urlLogin = urls[i];
                if(i==1) urlSchedule = urls[i];
                if(i==2) sUserName = urls[i];
                if(i==3) sPassword = urls[i];
                if(i==4) urlHost = urls[i];
            }
            HttpsURLConnection urlc = null;  
            DataOutputStream dataout = null;
            BufferedReader in = null;

            // Generamos el primer request, de tipo GET a la web de la intranet
            // En esta petición definimos que no siga redirecciones. Esto es debido a que al no tener cookie
            // la conexión lo toma como si no aceptara cookies y entrará en un bucle de dirección
            // saltando una excepción por exceder el número de redirecciones.
            // De esta forma, guardamos la cookie que nos asigna el response header y es la que emplearemos
            // en las sucesivas peticiones.
            URL urlPreLog = new URL(urlHost);
            HttpsURLConnection.setFollowRedirects(false);
            urlc = (HttpsURLConnection) urlPreLog.openConnection();
            // DoOutput a false para indicar que no es tipo POST
            urlc.setDoOutput(false);
            urlc.setRequestMethod("GET");
            // Imprimimos el código de respuesta recibido
            Log.d("datos", "Codigo respuesta: "+urlc.getResponseCode());
            // Obtenemos la cookie que nos han asignado.
            Map<String, List<String>> mapa = urlc.getHeaderFields();
            String newCookie = "";
            if(mapa!=null){
                Log.d("datos", "Recupera el mapa");
                List<String> list = mapa.get("Set-Cookie");         
                if((list != null)&&(list.size()>0)){
                    Log.d("datos", "Recupera la lista");
                    newCookie = list.get(0).substring(0,list.get(0).indexOf("path")).trim();
                }
            } 
            Log.d("datos", "Cookie: "+newCookie);
            //Desconectamos
            urlc.disconnect();

            // Generamos un segundo request, de tipo POST, a la página de login de la intranet.
            // Es aquí donde realizamos el login, por medio de los datos de output que se envían a la conexión
            // https establecida.
            // La cookie empleada es la recuperada anteriormente.
            URL urlLog = new URL(urlLogin);
            // Volvemos a habilitar la redirección
            HttpsURLConnection.setFollowRedirects(true);
            urlc = (HttpsURLConnection) urlLog.openConnection();
            urlc.setRequestMethod("POST");
            urlc.setDoOutput(true);
            urlc.setDoInput(true);
            urlc.setUseCaches(false);
            urlc.setAllowUserInteraction(false);
            urlc.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
            urlc.setRequestProperty("Cookie",newCookie);
            urlc.setRequestProperty("User-Agent", "Chrome");
            // Escribimos los datos de output que llevan entre otros el usuario y la contraseña
            String output = "accion="+URLEncoder.encode("validar", HTTP.UTF_8)+"&user="+URLEncoder.encode(sUserName, HTTP.UTF_8)
                    +"&pass="+ URLEncoder.encode(sPassword, HTTP.UTF_8)+"&conectar="+URLEncoder.encode("Conectar", HTTP.UTF_8);
            dataout = new DataOutputStream(urlc.getOutputStream());
            // Al hacer el writeBytes se produce la operación POST
            dataout.writeBytes(output);
            // Imprimimos el código de respuesta obtenido
            Log.d("datos", "Codigo respuesta: "+urlc.getResponseCode());
            // Desconectamos
            urlc.disconnect();

            // Generamos la última petición, de tipo GET a la página del horario de la intranet.
            URL urlSche = new URL(urlSchedule);
            urlc = (HttpsURLConnection) urlSche.openConnection();
            urlc.setRequestMethod("GET");
            urlc.setDoInput(true);
            urlc.setUseCaches(false);
            urlc.setAllowUserInteraction(false);
            urlc.setRequestProperty("Cookie", newCookie);
            urlc.setRequestProperty("User-Agent", "Chrome");
            in = new BufferedReader(new InputStreamReader(urlc.getInputStream(), Charset.forName("ISO-8859-15")),8096);
            // Imprimimos el código de respuesta obtenido
            Log.d("datos", "Codigo respuesta: "+urlc.getResponseCode());
            String response;
            StringBuilder sb = new StringBuilder();
            // Se guarda el código html de la respuesta
            while ((response = in.readLine()) != null) {
                sb.append(response + "\n");
                Log.d("datos", response); 
            }
            resultado = sb.toString();
            //Desconectamos y cerramos el stream de entrada
            urlc.disconnect();
            in.close();
        } catch (ProtocolException e) {
            Log.d("datos", "Error de protocolo: "+e.getMessage());
        } catch (IOException e) {
            Log.d("datos", "Error de E/S: "+e.getMessage());
        } catch (Exception e){
            Log.d("datos", "Excepcion: "+e.getMessage());
        }
        return resultado;
    }
} 
```

# mysql - MySQL 连接语法未知列

> ID：13724330
> 
> 赞同：0
> 
> 时间：2012-12-05T13:27:36.313
> 
> 标签：mysql

为什么 sm.status_id 和 sm.user_id 出现未知列错误？我通常不将`JOIN`关键字用于表连接。

```
...
FROM questions q, connections sm
JOIN users u ON q.user_id = u.id
JOIN users lu ON q.last_user = lu.id
JOIN (SELECT q2.id FROM questions q2 WHERE q2.status_id = sm.status_id LIMIT 2) x ON x.id = q.id
WHERE sm.user_id = 38
GROUP BY th.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:53:44.527

您当前的查询存在一些问题。

首先，您正在混合`JOIN`语法。你有两个逗号分隔的值，然后加入一个`ON`条件。

其次，您试图访问您无法访问的内部子查询中的表的别名。

我的建议是尝试这样的事情：

```
FROM questions q
JOIN users u 
    ON q.user_id = u.id
JOIN users lu 
    ON q.last_user = lu.id
JOIN 
(
    SELECT q2.id 
    FROM questions q2 
    JOIN connections sm
        ON q2.status_id = sm.status_id 
    WHERE sm.user_id = 38
    LIMIT 2
) x ON x.id = q.id
GROUP BY th.id 
```

您没有发布您的`SELECT`列表，但如果您想在列表中包含`connections`表中的字段，`select`那么您需要再次加入它或在子查询中包含这些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:34:26.993

原因是 :: 您需要在 select 子句中使用该列以使其在子查询中可见，例如：

```
Select status_id ,sm.user_id
FROM questions q, connections sm
JOIN users u ON q.user_id = u.id
JOIN users lu ON q.last_user = lu.id
JOIN (SELECT q2.id FROM questions q2 WHERE q2.status_id = sm.status_id LIMIT 2) x ON x.id = q.id
WHERE sm.user_id = 38
GROUP BY th.id 
```

# iphone - OpenGL ES 2\. 纹理映射到四边形（不是正方形或矩形）？

> ID：13724334
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:27:44.283
> 
> 标签：iphone, ios, opengl-es-2.0, textures, texture-mapping

[http://smotr.im/9KwB](http://smotr.im/9KwB)

有一些图片：1）我有一个纹理2）我已经用三角形条画了一条线3）我需要达到的结果

问题是如何在这些通常不是常规四边形的线段内绘制纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:18:04.053

你是什​​么意思，“通常不是常规的四边形”？它们是四边形吗？

如果它们是四边形，只需正常分配纹理坐标。硬件将正确插值。

如果它们不是四边形，你为什么不把它们做成四边形呢？

# javascript - jQuery .text() 返回的字符串的行为不像字符串

> ID：13724335
> 
> 赞同：2
> 
> 时间：2012-12-05T13:27:53.417
> 
> 标签：javascript, jquery, ruby-on-rails, backbone.js

我在 coffeescript 中的一个主干.js 中工作，我正在尝试使用“where”函数从集合中选择一个模型。我传入一个字符串变量作为第二个参数，该字符串是通过在 span 元素上返回 jQuery .text() 函数来分配的。

我确实从 .text() 函数中得到了一个字符串，但它的行为不像普通字符串。如果我手动分配变量，我只能使用变量作为 where() 参数。

**编辑：**我将 $('e.target') 更改为 $(e.target)，结果证明这是我的要点。我只是在总结我的问题时打错了。您可以在下面看到我在右边得到的返回值。

```
value = $(e.target).text()              # value => 'target text'
value.charAt(0)                           # =>*nothing at all!*  

value = "manually assigned text"          # value => 'manually assigned text'
value.charAt(0)                           # =>* 'm' 
```

这是我的片段以供进一步检查：[https ://gist.github.com/4215344](https://gist.github.com/4215344)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:34:32.090

试试这个：

```
value = $(e.target).text(); 
```

周围没有引号`e.target`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:34:42.393

问题不是`.text()`，而是你的选择器；`'e.target'`不是有效的选择器。您可能打算这样做：

```
value = $(e.target).text(); 
```

照原样，调用`.text()`空对象返回空白。

通过删除引号，您实际上是在引用`target`事件对象的属性，它直接对应于一个元素。您之前拥有的是带有 的`<e>`元素的选择器字符串`class='target'`，这显然不是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:19:30.447

原来检查 value.length 是关键。由于某种原因，它大约是 36 个字符。我尝试在我的 haml 模板中调用 .strip 那里的变量，但额外的空格不是来自 ruby​​ 方面。

我刚刚使用了 jQuery 的 .trim() 函数。

这是我的新任务：

```
fontName = $(e.target).text().trim() 
```

# socialauth - 通过 POST 而不是 GET 的 Google 登录回调

> ID：13724336
> 
> 赞同：0
> 
> 时间：2012-12-05T13:27:59.547
> 
> 标签：socialauth

我目前正在使用一个库（**SocialAuth.NET** - [http://code.google.com/p/socialauth-net/](http://code.google.com/p/socialauth-net/)）来处理多个社交平台上的登录。

到目前为止，使用 facebook 和 twitter，我没有任何问题。然而，在尝试实施 Google 登录过程时，有时（显然是随机的）会发生错误。

在进行了一些调查（调试库并使用 Fiddler 等）之后，我得出的结论是，有时，google 部分的登录过程通过**POST**而不是通过**GET**返回到我的身份验证处理程序。使用 Fiddler，我能够清楚地识别消息正文中的所有参数（在**POST**回调的情况下）或查询字符串（在**GET**回调的情况下），因此谷歌正确记录了我的用户。

这会导致 SocialAuth.NET 库方法出现异常，因为它希望所有参数都在查询字符串中传递，因此登录过程失败（显然，在我这边 - 谷歌认为我已登录，因为它方面一切正常)

总之，我要问的是：为什么有时谷歌会通过**POST**而不是**GET**来回答我的服务器？我应该做些什么来避免这种情况，否则需要在**SocialAuth.NET**库中进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:38:18.327

到目前为止，我还没有遇到过 Google 的这个问题。它总是在查询字符串中返回信息。如果您能以某种方式确定复制的确切步骤，那就太好了。无论如何，如果您想修改库以检查 POST，那么您需要更改 Core/callbackHandler.cs 的 ProcessRequest 方法（可能是第 76 行）。

# javascript - 使用 FullScreen API 全屏显示 Keydownevent

> ID：13724344
> 
> 赞同：3
> 
> 时间：2012-12-05T13:28:31.243
> 
> 标签：javascript, jquery, firefox, google-chrome, fullscreen

我在 chrome 和 firefox 中使用 JavaScript FullScreen API 和 jQuery。我想停止 keydownevent 冒泡，因为我不希望该用户使用热键（F11 和 Ecs）离开全屏模式。但是chrome中的回调不会调用，而firefox中的回调调用F11，但不调用Esc。为什么会这样？

```
$(document).bind({
    'keydown': function (e) {
        alert('It works!');
        if (e.which == 122 || e.which == 27) {
             alert('F11 or Esc');
             return false;
        }
});

var docElm = document.getElementById('gallery');
if (docElm.mozRequestFullScreen) {
     docElm.mozRequestFullScreen();
}
else if (docElm.webkitRequestFullScreen) {
     docElm.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:36:57.460

发生这种情况是因为它是一种内置的安全方法，浏览器供应商已经对其进行了明确的硬编码，以防止您的客户想要做的事情：阻止人们离开。

就个人而言，我希望它`esc`可以用作一个按钮来调出全屏游戏的菜单（因为这是多年来所做的事情），但目前这不是一个选项。

当然，你可以听退出全屏，然后调出游戏菜单（这很奇怪），但除此之外，联盟营销人员只会在全页广告上塞满你，让它们全屏，然后不提供退出按钮，除了关闭浏览器（如果不使用键盘，您将无法做到这一点，全屏也可以阻止）。

# batch-file - 如何在文本文件的行中搜索特定关键字并将字符串存储到该关键字的右侧

> ID：13724345
> 
> 赞同：0
> 
> 时间：2012-12-05T13:28:32.087
> 
> 标签：batch-file

我是 Windows 批处理脚本的新手，无法从文本文件中提取信息。我的脚本需要遍历行数未知的文本文件并搜索字符串“安装程序 ID：”。一旦找到它，我需要存储冒号右侧的任何信息。

例如，如果我的文本文件如下所示：

```
SomeText.txt
------------------------
Installer Date: 2010_10_24_24345
OXF BUILD ID: OXF-12223
Installer ID: OTFI-316
Excel  ID: 2-10186
BUILD DBID: 296414
Version: 6.2 
```

我想存储：

```
OTFI-316 
```

到目前为止，我已经做了这样的事情：

```
@echo off
setlocal EnableDelayedExpansion
set file=build_info.txt
FOR /F "tokens=*" %%i IN (%file%) DO (
findstr Installer ID: %%i
if %errorlevel%==0 (
set installer_id=SUBSTRING I
) 
```

但我在用两个单词和冒号搜索“安装程序 ID：”的 %%i 时遇到问题，从那里我不确定如何正确地为 %%i 子串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:44:06.850

这里的问题是它将 Installer 和 ID 视为单独的命令。更重要的是，ID 后面的 : 意味着它把 ID: 当作一个驱动器。要绕过它，请将 Installer ID: 括在引号中。

例如，如果我有一个名为 test.txt 的文本文件，其内容如下：

```
Test
abcinstaller ID:xyz
Test 2 
```

然后我可以搜索它：

```
findstr "Installer ID:" test.txt 
```

它返回：

```
abcinstaller ID:xyz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:20:22.757

正如 user1595254 建议的那样，我使用 FINDSTR 来定位我需要的内容并将其写入临时文件。然后我将我的 var 设置为那个临时文件：

```
@echo off
findstr "Installer" build_info.txt > findstr_results
findstr "ID" findstr_results> installer_id
set /p installer_id= < installer_id
del findstr_results
del installer_id
echo %installer_id% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:11:46.393

将 FINDSTR 命令放在 FOR IN() 子句中，然后解析结果。

我将 DELIMS 设置为冒号和空格，以便以下所有行都会给出正确的结果：

```
Installer ID: OTFI-316
Installer ID:OTFI-316
Installer ID:      OTFI-316 
```

您想要第二个标记（`*`in `tokens=2*`）之后的所有内容。

```
@echo off
set "file=build_info.txt"
set "installer_id="
for /f "tokens=2* delims=: " %%A in (
  'findstr /bc:"Installer ID:" "%file%"'
) do set "installer_id=%%B" 
```

# android - 机器人：getResources().getIdentifier NotFound 异常

> ID：13724348
> 
> 赞同：1
> 
> 时间：2012-12-05T13:28:36.423
> 
> 标签：android, getresource, getstring

我通过 json 获取我的数据。将其放入 Hashmap 并在 ListView 中列出。这很好用！

现在我想要这样的东西：

```
String myArt=report_TJ_+e.getString("artID"); 
```

这在我的组合中不起作用。这是我的代码：

```
 try{
    //String text = getString(R.string.report_TJ);
    JSONArray  earthquakes = json.getJSONArray("uTraf");
    mylist.clear();
    String report_TJ_btn = null;
            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                String imageString=report_TJ_btn+e.getString("artID");
                String myArt = getString(getResources().getIdentifier(imageString, "", getPackageName()));

                map.put("id",  String.valueOf(i));
                map.put("first", myArt + "Stau: " + e.getString("road") + ", " + e.getString("county"));
                map.put("second", e.getString("timestamp") + ", " + e.getString("suburb"));
                mylist.add(map);
            }       
  } 
```

错误：E/AndroidRuntime(641)：原因：android.content.res.Resources$NotFoundException：字符串资源 ID #0x0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:54:17.697

您必须设置`"string"`而不是`"strings"`作为第二个参数。

```
String myArt = getString(getResources().getIdentifier(imageString, "string", getPackageName())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:35:07.673

根据您的评论，您需要：

`String myArt = getString(getResources().getIdentifier("report_TJ_btn " + e.getString("artID"), "strings", getPackageName()));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:45:44.230

使用字符串 report_TJ_btn = "";

# java - 我的构造函数有问题 - ToString 不断返回 null

> ID：13724352
> 
> 赞同：-2
> 
> 时间：2012-12-05T13:28:49.900
> 
> 标签：java, constructor, tostring

我不希望您阅读整个代码。如果您将其复制并粘贴到您的 IDE 中，您应该会发现问题所在。我是 Java 新手，由于这个构造函数问题，这段代码占用了我的时间。总而言之，代码工作正常，但不返回对象的字符串表示

```
public class TestContact {

public static void main(String[] args) {

    // Juiste invoer begins with 0 and 9 digits
    Phone vasteTel1 = new Phone("027261747", "FIX");
    // wrong fix phone
    Phone vasteTel2 = new Phone("27261447", "FIX");

    // Juiste invoer begins with 0 and 10 digits
    Phone mobieleTel1 = new Phone("0495556080", "MOBIELE");
    // // wrong mobile phone
    Phone mobieleTel2 = new Phone("10495557841", "MOBIELE");

    Contact contact1 = new Contact("Joske Ergens", "mobiele",
            "jos.ergens@where.com", "0495558041");
    Contact contact2 = new Contact("Joseline Peremans", "mobiele",
            "joseline.peremans@where.com", "024596247");

    System.out.println("NUMMER " + vasteTel1.getNummer() + "\nSOORT: "
            + vasteTel1.getSoort() + "\nGELDIG NUMMER ?: "
            + vasteTel1.isGeldigNummer() + "\n");
    System.out.println("NUMMER " + vasteTel2.getNummer() + "\nSOORT: "
            + vasteTel2.getSoort() + "\nGELDIG NUMMER ?:"
            + vasteTel2.isGeldigNummer() + "\n");
    System.out.println("NUMMER " + mobieleTel1.getNummer() + "\nSOORT: "
            + mobieleTel1.getSoort() + "\nGELDIG NUMMER ?: "
            + mobieleTel1.isGeldigNummer() + "\n");
    System.out.println("NUMMER " + mobieleTel2.getNummer() + "\nSOORT: "
            + mobieleTel2.getSoort() + "\nGELDIG NUMMER ?: "
            + mobieleTel2.isGeldigNummer() + "\n");

    System.out.println(contact2);

} 
```

}

公共类联系人扩展 ContactGegevens {

```
ContactGegevens gegevens;
String naam;

public Contact() {

}

public Contact(String naam, String soort, String mail, String nummer) {
    this.naam = naam;
    gegevens = new ContactGegevens(getNummer(), getSoort(), getEmail());

}

public void toonInfo() {

}

public String toString() {
    return "NAAM: " + naam + "|\n" + gegevens.getNummer();
} 
```

}

公共类 ContactGegevens 扩展电话 {

```
private String eMail;
private Phone gsm;
private Phone telefoon;

public ContactGegevens() {

}

public ContactGegevens(String nummer, String soort, String email) {
    super(nummer, soort);
    this.eMail = email;
    gsm = new Phone(getNummer(), getSoort());
    telefoon = new Phone(getNummer(), getSoort());

}

public String getEmail() {
    return eMail;

}

public Phone getGsm() {
    return gsm;

}

public Phone getTelefoon() {
    return telefoon;
}

public String toString() {
    // return email adress vast foon, gsm
    return "" + eMail + "  " + gsm;
} 
```

}

公共类电话{

```
private static final int LENGTE_MOBIEL = 10;
private static final int LENGTEVAST = 9;

private String nummer;
private String soort;

public Phone() {

}

public Phone(String nummer, String soort) {
    this.nummer = nummer;
    this.soort = soort;
}

public String getNummer() {

    return nummer;
}

public String getSoort() {

    return soort;
}

public boolean isGeldigNummer() {
    if ((nummer.startsWith(nummer, 0) && nummer.length() == LENGTE_MOBIEL))
        return true;
    else if ((nummer.startsWith(nummer, 0) && nummer.length() == LENGTEVAST))
        return true;

    else
        return false;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:37:42.063

您的错误实际上在这里：

```
public Contact(String naam, String soort, String mail, String nummer) {
    this.naam = naam;
    gegevens = new ContactGegevens(getNummer(), getSoort(), getEmail());
} 
```

您将 gegevens 对象设置为新的 ContactGegevens，并调用对象的 getter，这将返回所有空值，因为它的字段尚未设置。适配如下：

```
public Contact(String naam, String soort, String mail, String nummer) {
    this.naam = naam;
    gegevens = new ContactGegevens(nummer, soort, mail);
} 
```

此外，您正在扩展和组合相同的类，请查看一些面向对象的书籍...您应该

一个。扩展 ContactGegevens 类，并调用 super(...) 构造函数，而不是使其成为字段。湾。要么不扩展它，而是通过让 ContactGegevens 成为您现在正在做的字段来组合 Contact 和 ContactGegevens。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:33:29.513

如果您扩展一个类，您不会创建该类的实例。相反，您需要调用`super()`. 例如：

```
public class Contact extends ContactGegevens {  
    public Contact(String naam, String soort, String mail, String nummer) {
      super(nummer, soort, email);
      this.naam = naam;
    }
} 
```

在`ContactGegevens`你扩展`Phone`类。这很好，但您似乎想要存储 2 个不同的电话号码。因此，在这种情况下，您不需要/要求扩展`Phone`. 但是实例化 2 个`Phone`对象，就像您已经在做的那样：

```
public class ContactGegevens {
    public ContactGegevens(String nummer, String soort, String email) {
        super(nummer, soort);
        this.eMail = email;
        gsm = new Phone(getNummer(), getSoort());
        telefoon = new Phone(getNummer(), getSoort());
    }
} 
```

如果您只需要 1 个电话号码，则可以保留该`extend Phone`部分并删除`gsm`and`telefoon`字段（和实例化）。类似于`Contact`。

此外，您还包括默认构造函数`ContactGegevens()`，没有任何内容。这可能会破坏您的应用程序，因为您的类中有未实例化/未初始化的字段。因此，您要么需要删除它们，要么为您的字段提供默认值。

# javascript - 自动刷新 div 内容 - 没有 PHP

> ID：13724354
> 
> 赞同：1
> 
> 时间：2012-12-05T13:28:57.907
> 
> 标签：javascript, jquery, html, refresh

我已经在网上搜索了一段时间，试图找到一个简单的解决方案。我有一些 html，在其中我有一个引用另一个 html 页面的 div。我想做的就是在设定的计时器上重新加载那个 div。

我没有任何 PHP 页面。目前页面加载正确，我只是希望它不时重新加载。如果我按 F5 按钮，它会正确重新加载......但它会重新加载整个页面。我只想重新加载这个 div。

这甚至可能是 HTML 页面还是它们需要是 PHP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:39:25.670

将您的 php 内容加载到 div 中：

> `$("#yourDiv").load("yourURL.php");`

# json - 如何将 svg 文件从 inkscape 转换为 geoJson 格式

> ID：13724369
> 
> 赞同：2
> 
> 时间：2012-12-05T13:29:32.893
> 
> 标签：json, svg, d3.js, geojson

我有一张使用inkscape 生成的地图，但我想要geoJson 格式的地图。我怎样才能做到这一点？我需要在 d3.js 中使用 json 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:42:59.690

您需要检查 SVG 如何保存地理信息。解析相关值并将数字转换为目标格式。但是解析和解释取决于许多因素（SVG 中使用了哪些 xml 元素，`<path>`vs`<line>`等）。这些数字在很大程度上取决于源 SVG 的缩放比例。

这是您非常通用的问题的非常通用的答案：

1.  解析 SVG
2.  从解析树中读取所需的字符串和地理编号
3.  将数字转换（缩放）为目标格式。
4.  写出目标格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-13T00:30:29.400

这只有在 SVG 包含足够的地理数据来进行转换时才有可能。如果坐标和投影数据嵌入在 SVG XML 的某个位置，那么 Juve 概述的过程就可以工作。

# java - 如何在java中对三个数组进行排序？

> ID：13724371
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:29:35.857
> 
> 标签：java, arrays, sorting

我的程序中有三个数组姓氏、名字和结果，需要创建一个排序数组姓氏：克里斯名字：查尔顿：结果：54 姓氏：安妮特：名字：莱尔：结果 67 如果我想按姓氏的字母顺序对其进行排序，我需要移动所有字段，而不仅仅是姓氏。这是我正在处理的冒泡排序代码

```
 int swap;
    boolean swapflag = true;
    //outer loop
    while (swapflag == true)
    {
        swapflag = false;
        //inner loop
        for (int index=0; index < (nums.length - 1); index++)
        {
            //swap routine
            if (nums[index]> nums[index + 1])
            {   //swap routine
                swap = nums[index];
                nums[index] = nums[index + 1];
                nums[index + 1] = swap;
                swapflag = true;
            }
        }//end inner
    }//end outer

    System.out.println ("\nArray Contents after sorting"
            + "\n*************");

    for (int index=0; index < nums.length; index ++)
    {  
        System.out.println("Array element " 
                + index + ": " + nums[index]);  
    }
} 
```

}

```
 `     package projStudent;
import java.util.Scanner;
public class UnitResults 
{
    //delcare Scanner as keyb
    static Scanner keyb = new Scanner (System.in);
    //declare fields
    static String studentForename [];
    static String studentSurname [];
    static int [] studentResult;

    static int pointer;

    //constructor
    UnitResults(int sizeofclass)
    {//start of constructor
        studentForename = new String [sizeofclass];
        studentSurname = new String [sizeofclass];
        studentResult = new int [sizeofclass];
        pointer = 0;
    }//end of constructor

    public boolean add(String studentForename[], String studentSurname[],
             int studentResult[])
    {//start of add method
        if (pointer == studentResult.length )
        {//start of if statement
            System.out.println("Sorry Array is full");
            return false;
            studentResult[pointer] = studentResult[];
            pointer ++;
        }//end of if statement

    }//end of add method
    public boolean delete(int element)
    {//start of delete method
        element = element - 1;
        if ((element >= 0) && ( element < pointer))
        {//start of if statement
            for(int index = (element + 1); index < pointer; index++)
            {//start of for statement
                studentResult[index - 1] = studentResult[index];   
            }//end of for statement
            pointer--;
            return true;
        }//end of if statement
        else
        {//start of else statement
            return false;
        }//end of else statement  
    }//end of delete method

       public String find()
    {//start of display
        String strOutput="";
        strOutput = strOutput + "Students";
        if (pointer==0)
        {//start of if statement
            strOutput = strOutput + "There are no records in this Array";
            return strOutput;
        }//end of if statement

    for (int index=0; index < pointer; index++)
    {//start of for method
        strOutput = strOutput + "Student Name" + studentSurname[index] + studentForename + 
                "Student Result" + studentResult +"\n";
    }//end of for method

    return strOutput;
}//display
   public int sort (int UnitResults)

   {//start of sort
       int sort;
       boolean swapflag = true;
       while (swapflag == true)
       {//start of while loop
           swapflag = false;
           for (int index=0; index < (UnitResults - 1); index++)
           {
               if (studentResult[index]> studentResult[index + 1])
            {   //swap routine
                sort = studentResult[index];
                studentResult[index] = studentResult[index + 1];
                studentResult[index + 1] = sort;

                swapflag = true;
            }

           }

       }//end of while loop

   }//end of sort 
```

}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:32:34.880

不幸的是，您的帖子令人困惑，因为您没有包含一些内容，例如您正在排序的当前数组是什么。不过，如果我正确理解你的问题......

无论使用哪种语言，您的策略都将涉及更改交换元素的方式。如果您的数组由复合数据组成，那么只需在交换中分配就可以了。如果您的数据是分散的，那么您的交换需要交换每个变量。您始终可以将数组的索引排序到另一个数组中，然后使用该数组间接引用第一个数组以进行排序访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:55:55.917

我建议您为此目的使用列表。首先创建一个对象。例如，“Person”包含“Forname”、“Surename”、“Result”的成员。然后用这些对象填充列表，实现接口 Compareable 并使用 Collection.sort() 方法。

```
class Person implements Comparable<Person>
{
   private String forname;
   private String surname;
   private int rating;

   public Person(String forename, String surname, int rating)
   {
         this.forname = forename;
         this.surname = surname;
         this.rating = rating 
   }

  public int compareTo(Person p) {
       if(p.rating == this.rating) 
          return 0;
       else if(p.rating < this.rating) 
            return -1;

       return 1;  
  }

}

class Test{

    public static void main(String[] args){

        List<Person> personList = new ArrayList<Person>();

         Person p1 = new Person("John","Smith",10);
         Person p2 = new Person("Max","Muster",20);
         Person p3 = new Person("Sarah","Clark",15);

         personList.add(p1);
         personList.add(p2);
         personList.add(p3);

         personList.sort();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:59:18.570

Can't understand properly the question: are you looking for a way to manually implement a sorting algorithm (bubble, quick or whatever) or you would like to simply sort them the best you can? Generally speaking you should never implement your own sort 'cause Java provides itself a very efficient lot... or is this an exercise? Probably :)

Best way I can imagine is, provided the 3 arrays in their original form are linked by index, create a surname/index map, load it form surname array, sort the Map.Entry by key and then you will have the array indexes sorted the way you wanted. Check here for more details: [how to sort Map values by key in Java](https://stackoverflow.com/questions/922528/how-to-sort-map-values-by-key-in-java)

PS The solutions provided by the others are correct and preferrable if you are NOT doing an exercise :) Better deal with a structured object than with 3 separated data.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:51:02.523

Java 编程语言有许多特性可以帮助您解决您遇到的问题，其中第一个是包含适当的数据结构和用于在这些数据结构中操作对象的方法。

首先，我建议使用 java 类来表示一个人的实体……想想看，当你查找一个人的信息时，你不会查阅三本不同的书，或者电脑屏幕，或者你有什么，当所有这些信息都可以组织到一个地方时。例如，对于您上面的人，您可以使用以下内容：

```
public class Person implements Comparable<Person> {
    public String firstName;
    public String lastName;
    public int result;

    public Person(String fn, String ln, int r) {
        firstName = fn;
        lastName = ln;
        result = r;
    }

    public int compareTo(Person otherPerson) {
       return lastName.compareTo(otherPerson.lastName);
    }

} 
```

这将为您提供一个对象，该对象将存储您的所有个人信息，并且默认情况下可以轻松按姓氏排序（您可以使用比较器更改此行为，我不会在这里介绍。）

现在，您可以拥有一个 Persons 数组，而不是拥有三个不同的名字、姓氏和结果数组。在 java 语言中实际上已经有数组的排序机制，如果您选择，您可以研究和使用它，但是如果您想使用自己的排序，您只需将交换条件替换为如下内容：

```
if(persons[index].compareTo(persons[index+1]) > 0) {
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:53:35.573

我只想问你

为什么要创建班级学生，即

> ```
> class Student{
>      private String studentForename;
>      private String studentSurname;
>      private int studentResult;
> //setters and getters
> } 
> ```

并将它们放入一些集合中，即列表中，您将它们放入 3 个不同的数组中？

您是否意识到，如果您将它们很好地放在列表中，您可以通过使用对它们进行排序`Collections.sort()`？

# java - 网络摄像头捕获仅有时有效

> ID：13724372
> 
> 赞同：0
> 
> 时间：2012-12-05T13:29:41.580
> 
> 标签：java, driver, webcam

我在 Windows 中有一个简单的网络摄像头程序，它“偶尔”工作，但大多数时候它在尝试查找默认驱动程序时挂起。

```
public class JavaApplication54 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    Webcam webcam = Webcam.getWebcams().get(0);

    webcam.open();
    BufferedImage image = webcam.getImage();
    ImageIO.write(image, "PNG", new File("test.png"));
    image = null;
    webcam.close();
} 
```

我得到的输出是

```
13:22:08.910 [main] INFO  c.g.sarxos.webcam.WebcamDriverUtils -
    Searching driver com.github.sarxos.webcam.ds.openimaj.OpenImajDriver
    13:22:08.915 [main] DEBUG c.g.sarxos.webcam.WebcamDriverUtils -
    Driver com.github.sarxos.webcam.ds.openimaj.OpenImajDriver not found
    13:22:08.915 [main] INFO  c.g.sarxos.webcam.WebcamDriverUtils -
    Searching driver com.github.sarxos.webcam.ds.civil.LtiCivilDriver
    13:22:08.915 [main] DEBUG c.g.sarxos.webcam.WebcamDriverUtils -
    Driver com.github.sarxos.webcam.ds.civil.LtiCivilDriver not found
    13:22:08.915 [main] INFO  c.g.sarxos.webcam.WebcamDriverUtils -
    Searching driver com.github.sarxos.webcam.ds.jmf.JmfDriver
    13:22:08.916 [main] DEBUG c.g.sarxos.webcam.WebcamDriverUtils -
    Driver com.github.sarxos.webcam.ds.jmf.JmfDriver not found
    13:22:08.916 [main] INFO  com.github.sarxos.webcam.Webcam - Webcam
    driver has not been found, default one will be used! 13:22:08.925
    [main] DEBUG c.g.s.w.d.b.WebcamDefaultDriver - Searching devices 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T19:32:07.593

如果我是正确的，这是在 Webcam Capture API 代码中发现的死锁问题之一。有关详细信息，您可以在[Webcam Capture Github 项目](https://github.com/sarxos/webcam-capture)页面上查看这些票：[#128](https://github.com/sarxos/webcam-capture/issues/128)，[#30](https://github.com/sarxos/webcam-capture/issues/31)

我认为您的解决方案将是使用最新版本，即（在我写这个答案时）[0.3.10-RC6](http://www.sarxos.pl/repo/maven2/com/github/sarxos/webcam-capture/0.3.10-RC6/webcam-capture-0.3.10-RC6-dist.zip)。无论用于开发的 IDE（或 CLI），它都应该工作。

# python - 如何将列表中的数字相乘（删除重复项后）？

> ID：13724376
> 
> 赞同：2
> 
> 时间：2012-12-05T13:29:57.657
> 
> 标签：python

我正在使用 Python 3.2.3 IDLE。我看到有些人使用 reduce 命令，但由于某种原因我没有。就像代码不会以紫色出现，它会将 reduce 识别为变量。

这是我的代码的一部分：

```
numbers = [10, 11, 11]
numbertotal = (set(numbers))
#removes duplicates in my list, therefore, the list only contains [10, 11]
print ("The sum of the list is", (sum(numbertotal))) #sum is 21
print ("The product of the list is" #need help here, basically it should be 10 * 11 = 110 
```

我基本上想在删除重复项后将列表相乘`numbertotal`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:31:25.793

你`reduce`隐藏在：

```
from functools import reduce

print("The product of the list is", reduce(lambda x,y:x*y, numbertotal)) 
```

或者

```
from functools import reduce
import operator as op

print("The product of the list is", reduce(op.mul, numbertotal)) 
```

在 python3 中，它已移至`functools`. [处理这个`2to3`案子](http://docs.python.org/3.2/library/2to3.html?highlight=reduce#2to3fixer-reduce)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:33:02.253

这对你有用吗？

```
product = 1
for j in numbertotal:
    product = product * j
print 'The product of the list is', product 
```

# linux - 有没有办法在不重新编译的情况下在 linux 中使进程静态？

> ID：13724380
> 
> 赞同：0
> 
> 时间：2012-12-05T13:30:04.047
> 
> 标签：linux, shared-libraries, static-libraries, static-linking

我有一个需要多个共享库的二进制文件。我想在没有附加文件的情​​况下分发它。有没有办法只使用二进制文件和库来静态链接它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T13:32:31.537

不，没有办法将动态链接某些库的程序转换为静态链接它们的程序。

但你为什么要问？你不能`LD_LIBRARY_PATH`在运行二进制文件之前发布一个适当设置的 shell 包装器吗？

# python - 在 ZeroRPC 中实现自定义队列

> ID：13724387
> 
> 赞同：2
> 
> 时间：2012-12-05T13:30:26.137
> 
> 标签：python, zeromq

目前，我正在使用 ZeroRPC，我让“工人”连接到“服务器”并完成服务器发送给他们的工作。

目前，只要有调用，就会通过 ZeroRPC 进行调用，据我所知，它使用 FIFO 队列。

我想使用我自己的队列来限制/优先处理呼叫。

我希望 ZeroRPC 公开一个`Event`在其内部队列为空时触发的 gevent。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:36:19.393

您想要做的是在您的服务器中创建自己的工作队列。并按照您希望的优先级向自己发送呼叫。

由于几行代码比 3 卷中的任何吸血鬼故事都表达得更多，让我们在伪代码中查看服务器的外观：

```
myqueue = MySuperBadAssQueue()

def myqueueprocessor():
  for request in myqueue: # blocks until next request
    gevent.spawn(request.processme) # do the job asynchronously

gevent.spawn(myqueueprocessor) # do that at startup

class Server:

  def dosomething(args...blabla...):  # what users are calling
    request = Request(args...blabla...)
    myqueue.put(request)  # something to do buddy!
    return request.future.get() # return when request is completed
                                # (can also raise an exception)

# An example of what a request could look like:
class Request:
  def __init__(self, ....blablabla...):
    self.future = gevent.AsyncResult()

   def process():
     try:
         result = someworker(self.args*) # call some worker
         self.future.set(result) # complete the initial request
     except Exception as e:
         self.future.set_exception(e) 
```

它由 MySuperBadAssQueue 来完成所有智能工作，如果需要，可以节流，必要时取消带有异常的请求，等等......

ZeroRPC 不会公开任何事件来让您知道它的“内部”队列是否为空：

> 事实上，ZeroRPC 中并没有明确的队列。会发生什么，只是先到先得，确切的顺序取决于 ZeroMQ 和 Gevent IOLoop（libevent 或 libev 取决于版本）。碰巧在实践中，这很方便地像 FIFO 队列一样播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T02:00:39.633

我自己没有尝试过，但我已经阅读了源代码。我很有动力，因为我想自己做这件事。

似乎您要做的是继承`zerorpc.Server`并覆盖该`_acceptor`方法。根据消息[来源](https://github.com/dotcloud/zerorpc-python/blob/master/zerorpc/core.py#L159)，`_acceptor`是接收消息然后产生线程来运行它们。因此，如果您更改逻辑/循环以合并您的队列，您可以使用它来限制。

# android - 左右滑动图像android

> ID：13724388
> 
> 赞同：1
> 
> 时间：2012-12-05T13:30:28.500
> 
> 标签：android, android-layout, android-imageview, android-image, ontouchlistener

我将两个图像存储在一个数组中，图像会出现，但我想要实现的是，当用户向右滑动屏幕时，第二个图像会出现，而当向左滑动回第一个图像时。我对android应用程序开发很陌生，非常感谢一些帮助。目前，所有发生的事情都是当用户单击图像时，它会转到第二张图像，仅此而已。

我还添加了我的代码：

```
public class ScrollingQuran extends Activity {

private ImageView imgView;

private Integer[] Imgid = {

        R.drawable.page1, R.drawable.page2

};

@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.qurangallery);

    imgView = (ImageView)findViewById(R.id.ImageView01);

    imgView.setImageResource(Imgid[0]);

    imgView.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View v, MotionEvent event)
        {
        ImageView iv = (ImageView) v;
        if (event.getAction() == MotionEvent.AXIS_VSCROLL) {

            iv.setImageResource(R.drawable.page2);
            return true;
        } else if (event.getAction() == MotionEvent.AXIS_HSCROLL) {
            iv.setImageResource(R.drawable.page2);
            return true;
        }

        return false;
    } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:42:56.357

[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)还可以帮助您实现左右滑动功能，

[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

[android viewPager 实现](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:34:25.457

我认为这段代码会对你有所帮助。在这个 transimg1 是一个图像切换器

```
in_right = AnimationFactory.inFromRight();  
in_left = AnimationUtils.loadAnimation(this,android.R.anim.slide_in_left);  
out_right = AnimationUtils.loadAnimation(this,android.R.anim.slide_out_right);      
out_left = AnimationFactory.outToLeft();
gestureDetector1 = new GestureDetector(new MyGestureDetector1());
gestureListener1 = new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector1.onTouchEvent(event);  
    }
};

transimg1.setOnTouchListener(gestureListener1);
class MyImageSwitcherFactory implements ViewFactory 
{
    public View makeView() 
    {

       ImageView imageView = new ImageView(getApplicationContext());
       imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
       imageView.setLayoutParams(new ImageSwitcher.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
       return imageView;

    }
}

public static class AnimationFactory 
{
       public static Animation inFromRight() 
        {
           Animation inFromLeft = new TranslateAnimation
           (
                   Animation.RELATIVE_TO_PARENT,1.0f,Animation.RELATIVE_TO_PARENT,0.0f,
                   Animation.RELATIVE_TO_PARENT,0.0f,Animation.RELATIVE_TO_PARENT,0.0f
           );
           inFromLeft.setDuration(250);
           inFromLeft.setInterpolator(new AccelerateInterpolator());
           return inFromLeft;
       }
       public static Animation outToLeft() 
       {
           Animation inFromLeft = new TranslateAnimation
           (
              Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f,
              Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
           );
           inFromLeft.setDuration(250);
           inFromLeft.setInterpolator(new AccelerateInterpolator());
           return inFromLeft;
       }
}class MyGestureDetector1 extends SimpleOnGestureListener {
    @Override
      public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) 
      {
          try 
          {

                if((e1.getX()-e2.getX()>SWIPE_MIN_DISTANCE)) 
                {
                    gif.setVisibility(View.INVISIBLE);
                }
                else if(e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE)
                {
                    gif.setVisibility(View.VISIBLE);
                    gif.start();
                }
          }
          catch(Exception e)
          {
              Toast.makeText(getApplicationContext(), e.toString() + " MyGestureDetector2 count=" + exccount , Toast.LENGTH_SHORT).show();
          }
          return false;
      }

    @Override
    public boolean onDown(MotionEvent arg0)
    {
        return true;
    }
} 
```

这是[Dustin Graham](https://www.blogger.com/profile/11587958740447306614)的博客，其中包含更多示例：http: [//developingandroid.blogspot.in/2009/09/implementing-swipe-gesture.html](http://developingandroid.blogspot.in/2009/09/implementing-swipe-gesture.html)

# sencha-touch - 在模型上使用代理或在 sencha touch 中存储有什么区别？

> ID：13724389
> 
> 赞同：0
> 
> 时间：2012-12-05T13:30:28.903
> 
> 标签：sencha-touch, sencha-touch-2

我见过一些例子，其中代理不仅在商店中声明，还在模型中声明。这对我来说似乎有点多余。为什么需要在两者上都设置代理？将它放在模型上而不是商店有什么好处，反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:44:47.520

[Sencha 论坛中 Mitchell Simoens 的回答](http://www.sencha.com/forum/showthread.php?177591-Proxy-in-Model-vs.-Store)：

> 从技术上讲，确实没有区别。商店将在其自身上查找代理配置，如果不存在，则在模型上查找它。如果您想自己使用模型（例如表单），那么在模型上使用代理将允许您仍然使用代理。

希望这可以帮助

# android - 从 Android 中的引用库启动服务

> ID：13724399
> 
> 赞同：2
> 
> 时间：2012-12-05T13:31:04.223
> 
> 标签：android

我有一个启动服务的 Android 项目。然后我把它变成了一个 Android 库并将其添加到另一个 Android 项目中。现在我正在尝试从我的主要 Android 项目自动启动该服务，但我迷路了。这是我清单中的代码（我已经从库中添加了所有类）：

```
 <service
            android:name="com.test.mqttclientserver.MQTTService"
            android:enabled="true"
            android:exported="false"
            android:label="Service" >
            <intent-filter>
                <action android:name="com.test.mqttclientserver.MQTTService" />
            </intent-filter>
        </service>

        <activity
            android:name="com.test.mqttclientserver.MQTTClient"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.test.mqttclientserver.MQTTNotifier"
            android:label="@string/app_name" >
        </activity> 
```

在主项目的一个活动中：

```
private boolean mBounded;
    private MQTTService mService;
    private MQTTConnectionStatus connectionStatus = MQTTConnectionStatus.INITIAL;  ..... public IBinder onBind(Intent intent) {
        return mBinder;
    }

    public MQTTConnectionStatus getConnectionStatus() {
        return connectionStatus;
    }

    ServiceConnection mConnection = new ServiceConnection() {

        public void onServiceDisconnected(ComponentName name) {
            Toast.makeText(SplashScreen.this, "Service is disconnected", 1000)
                    .show();
            mBounded = false;
            mService = null;
        }

        public void onServiceConnected(ComponentName name, IBinder service) {
            Toast.makeText(SplashScreen.this, "Service is connected", 1000).show();
            mBounded = true;
            LocalBinder mLocalBinder = (LocalBinder) service;
            mService = (MQTTService) mLocalBinder.getService();
        }
    };

    public void onStart(final Intent intent, final int startId) {
        System.out.println("onStart loading...");
        Intent mIntent = new Intent(this, MQTTService.class);
        bindService(mIntent, mConnection, BIND_AUTO_CREATE);
        System.out.println("onStart ending...");
    }

    protected void onStop() {
        super.onStop();
        if (mBounded) {
            unbindService(mConnection);
            mBounded = false;
        }
    } 
```

这还不够吗？一个提示就足够了。感谢您的时间。

# c++ - return 语句中的条件测试

> ID：13724401
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:31:17.353
> 
> 标签：c++

是什么意思：`return _a != MAX_A_VAL`？除了三元运算符之外，我还没有在 return 语句中看到条件。这是什么？顺便说一句，这是在`operator bool()`类方法中使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:32:09.483

这意味着进行比较`_a != MAX_A_VAL`，然后返回其结果（`true`或`false`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T13:32:45.833

这意味着如果`_a`不等于`MAX_A_VAL`它应该返回`true`，否则它应该返回`false`

这是一个布尔比较。

像这样阅读可能更容易：

```
return (_a != MAX_A_VAL); 
```

或者您可以查看的另一种方式是：

```
bool retvalue = (_a != MAX_A_VAL);
return retvalue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:33:03.757

该`return`语句可以使用*任何*表达式作为其返回值，它不必像变量那样简单。

# python - 确定线的哪一侧在，给定第三个点指示所需的一侧

> ID：13724405
> 
> 赞同：0
> 
> 时间：2012-12-05T13:31:31.450
> 
> 标签：python, line, computational-geometry

我正在尝试提出一个函数，该函数采用两个点来形成一条线、一个参考点和一个点，如果该点位于所形成的线上，或者是

已知在线的外侧部分的点，以及需要确定它是在由所形成的线划分的一半区域的外侧还是内侧的点。在这种情况下，上线算作外线。

这与[这个](https://stackoverflow.com/questions/3461453/determine-which-side-of-a-line-a-point-lies)问题类似，但期望的一方可能有一个正或负的叉积，因此需要一种稍微不同的方法。我已经尝试过几次让它与交叉产品一起工作，此时我只是在寻找可以肯定工作的东西。

编辑：内部/外部只是由于问题的性质而使用，似乎比“a 面”和“b 面”或“左侧”和“右侧”更好。在这种情况下，“内部”点将被忽略，而“外部”点将保留。

这是一个使用线两侧的示例：

![在此处输入图像描述](../Images/dcf8fe2264bab0e105294e43456d699d.png)

虽然它们是正方形，但每个都代表一个“点”。红色方块是组成这条线的两个。然后有一个绿色和一个蓝色点。绿点内为蓝点，蓝点内为外点。蓝色圆圈代表被认为是外部的点。蓝色圆圈的点被认为是相对于蓝色点的外部点，而绿色圆圈的点被认为是绿色点的外部点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:57:53.343

You can still use cross products. If `A` and `B` are the points defining the line, `R` is your reference point, and `P` is your test point, then form the two cross products `AB`x`AR` and `AB`x`AP`. The dot product of these two vectors will be positive if the points lie on the same side of the line and negative if they do not.

# actionscript-3 - AS3：如何正确删除影片剪辑而不会出现错误 1009 溢出？

> ID：13724406
> 
> 赞同：3
> 
> 时间：2012-12-05T13:31:31.403
> 
> 标签：actionscript-3, flash

我有一个类 Catcher，它可以让你控制游戏中的电影剪辑。我正在尝试对游戏进行编程，以便它完成并且您可以重新启动。所以我需要删除所有内容并返回菜单。应该是一件容易解决的事情，但我似乎不知道如何解决。

到目前为止，我只有 ourCatcher.parent.removeChild(ourCatcher); 从舞台上删除我的电影剪辑。还有一个 if 语句来停止将东西放到舞台上的功能之一。SoundMixer.stopAll(); 停止音乐。然后我让它进入第 3 帧，即游戏结束屏幕。

它看起来不错，但我在错误控制台中不断出现 1009 错误，当我重新启动游戏时，它非常慢。Catcher 中的移动功能似乎仍在运行并产生错误，因为 Catcher 已从舞台上移除并且现在为空。

我知道我需要取消引用与 Catcher 相关的所有内容，但在我的情况下我无法在网上找到任何文档来执行此操作。每个人似乎都有不同的方法，我尝试过但不起作用。

我用来移动角色的 Catcher 类中的两个函数：

```
public function Catcher(stageRef:Stage) 
    {
        stop();
        this.stageRef = stageRef;
        key = new KeyObject(stageRef);

        addEventListener(Event.ENTER_FRAME, loop, false, 0, true);
    }

    //movement
    public function loop(e:Event):void
    {           
        if (key.isDown(Keyboard.A))
                vx -= walkSpeed;

        else if (key.isDown(Keyboard.D))
                vx += walkSpeed;

        else
                vx *= friction;

        //update position
        x += vx;

        //speed adjustment
        if (vx > maxspeed)
            vx = maxspeed;
        else if (vx < -maxspeed)
            vx = -maxspeed;

        //stay inside screen
        if (x > stageRef.stageWidth)
        {
            x = stageRef.stageWidth;
            vx = -vx
        }

        else if (x < 0)

        {
            x = 0;
            vx = -vx;
        }

        if (key.isDown(Keyboard.A))
        {
            scaleX = -1;
        }

        else if (key.isDown(Keyboard.D))
        {
            scaleX = 1;
        }

        movement();

        // Jumping
        jump += gravity;

        if (y > stage.stageHeight /1.5)
        { 
            jump = 0;
            canJump = true;
        }

        if (key.isDown(Keyboard.SPACE) && canJump)
        {
            jump = -10;
            canJump = false;
        }

        y += jump;

    } 
```

我要从舞台上移除东西的另一个类称为 CatchingGame ，它有一个丢弃对象的功能，我将游戏放在代码那里当 playerlives == 0 。

```
if (playerLives == 0 )
                {
                stop();
                ourCatcher.parent.removeChild(ourCatcher);
                SoundMixer.stopAll();
                gotoAndStop(3);
                } 
```

我可能犯了一个基本错误，因为这是我的第一个 Flash 游戏。非常感谢任何帮助，因为这几乎是完成我的游戏的最后一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:05:10.150

```
if (ourCatcher.parent) ourCatcher.parent.removeChild(ourCatcher);
else trace("Catcher without a parent still plays! DEBUG THIS!"); 
```

基本上，您很可能会失去对捕手的控制，也就是说，它似乎两次试图将自己从舞台上移开。在它第一次移除自身后，它`parent`变为空，因此为 1009。而且，当你达到 2028 时，同样的原因适用，你的捕手不再是任何地方的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:08:12.143

而不是仅仅通过引用其父项来删除子项来删除子项（我必须进行测试以确保这确实有效）。在您创建/实例化 Catcher 的同一位置创建一个函数，该函数首先删除 eventListener ENTER_FRAME，然后删除 Catcher。

```
if (playerLives == 0 ) {
  stop();
  removeCatcher();
  SoundMixer.stopAll();
  gotoAndStop(3);
}

// new location in the main code where the catcher is created
function removeCatcher():void {
  ourCatcher.cleanUp();
  removeChild(ourCatcher);
}

// in the Catcher class
function cleanUp():void {
  removeEventListener(Event.ENTER_FRAME, loop);
} 
```

# ruby-on-rails - 如何在rails中解析json url响应

> ID：13724411
> 
> 赞同：1
> 
> 时间：2012-12-05T13:31:48.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, ruby-on-rails-3.2

我有一个简单的 Rails 应用程序，它向外部网站发出请求并返回一个带有回调的 json url 响应到我的网站，以通知我的 Rails 应用程序有关响应的信息。json url 示例是`https://voguepay.com/?v_transaction_id=demo-1345109950&type=json`，响应正文如下：

```
{"merchant_id":"demo","transaction_id":"demo-1345109950","email":"testuser@buyerdomain.com","total":"10","total_paid_by_buyer":"10.00","total_credited_to_merchant":"9.90","extra_charges_by_merchant":"0.00","merchant_ref":"","memo":"Donation of N10 to Test User","status":"Approved","date":"2012-01-01 11:39:11","referrer":"http:\/\/sellerdomain.com\/buy_now.html","method":"VoguePay","fund_maturity":"2012-01-03"} 
```

我想将此响应转换为 Rails 方法，而不是简单地给我进行查询所需的属性。例如，从响应正文中，我需要执行如下操作：

```
def notify
  response = Json.parse('https://voguepay.com/?v_transaction_id=demo-1345109950&type=json').body
  response.status
  response.date
  response.merchant_id
  response.total
end 
```

上面的代码只是一个示例，用于解释我想要实现的目标。任何帮助都会很棒。

我已经尝试过[typhoeus](http://rubygems.org/gems/typhoeus)和[yajl-ruby](http://rubygems.org/gems/yajl-ruby) gems，但是当请求进来时，我所有的身份验证方法都被删除了，并且我不断收到错误消息无法验证 csrf 元令牌。即使我跳过它，当前用户也会自动注销（使用设计身份验证）。使用的代码示例如下：

```
class NotificationsController < ApplicationController
  skip_before_filter :verify_authenticity_token

  def notify
      @transaction_id = params[:transaction_id]
      do_notify
  end

  private
  def do_notify
    hydra = Typhoeus::Hydra.new
    request = Typhoeus::Request.new("https://voguepay.com/?v_transaction_id=#{@transaction_id}&type=json")
    request.on_complete do |response|
        logger.info("#{response.request.url} in #{response.time} seconds")  #remove in production to avoid huge logs
              transaction = Yajl::Parser.parse(response.body)  #or Yajl::Parser.parse(response.body)

              #Now we have the following keys in our transaction hash  you can do whatever
              transaction[:merchant_id]
              transaction[:transaction_id]
              transaction[:email]
              transaction[:total]
              transaction[:merchant_ref]
              transaction[:memo]
              transaction[:status]
              transaction[:date]
              transaction[:referrer]
              transaction[:method]
              @plan = Plan.find_by_id(transaction[:merchant_ref])
              if(transaction[:total] == 0)
                logger.error "Invalid total for transaction:#{@transaction_id}"
                 #do not subscribe the user or generate invoice, notify user of error n cancel order
              elsif(transaction[:status] != 'Approved')
                logger.error "Failed transaction for transaction:#{@transaction_id}"
                 #do not subscribe the user or generate invoice, notify user of error n cancel order
              elsif(transaction[:total] >= @plan.naira_price.to_s)
                current_user.award_user_credits(@plan.hjc.to_i)
              end            
    end
    hydra.queue(request)
    hydra.run
  end
end 
```

再说了，我不想使用我想手动做的 gem，看看 csrf 元令牌是否不会受到影响。因此，任何关于我如何实现这一目标的想法都会很棒。我正在使用导轨 3.2.9。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:39:13.723

你可以做：

```
def notify
  response = JSON('https://voguepay.com/?v_transaction_id=demo-1345109950&type=json').body
 response["status"]
 response["date"]
 response["merchant_id"]
 response["total"]
end 
```

# ruby-on-rails - 如何使用 Barby 为字符串生成 code_128 条形码

> ID：13724415
> 
> 赞同：3
> 
> 时间：2012-12-05T13:31:56.180
> 
> 标签：ruby-on-rails, barcode

我目前正在使用带有包装器 gem has_barcode 的 Barby gem 来为我拥有的字符串生成条形码：j5xvvcz。

Gemfile gems（主要是为那些不熟悉这个解决方案的人）

```
#for barcode generation
gem "barby", "~> 0.5.0"
gem "has_barcode", "~> 0.2.0"
gem "rqrcode", "~> 0.4.2" #for qr code support 
```

我的模型中有代码

```
include HasBarcode

has_barcode :barcode,
            :outputter => :svg,
            :type => :code_93,
            :value => Proc.new { |p| "#{p.number}" } 
```

我将其渲染到屏幕的位置：

如果我尝试生成 qr_code 或 code_93，一切正常，但 code_128 或 code_39 也不起作用，得到**数据无效**消息。我担心的是 code_93 不会在某些设备中得到认可，因为它似乎没有被广泛采用（从我[在这里](http://www.makebarcode.com/specs/speclist.html)读到的128 将是最好的解决方案）

这似乎是我可能做错的事情，因为代码对 code_128 有效，因为我在[这里](http://www.racoindustries.com/barcodegenerator/1d/code-128.aspx)测试它。

任何人都知道我的方法可能有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:04:52.990

显然，code_128 的“A”模式不适合带有 Barby 的小型股。

所以我必须让模式 B 工作。

当前发布的 gem 版本的 has_barcode 强制模式 'A'，所以我添加了一点“home-patch”，同时向 github 添加了一个建议。

这是我最终的 has_barcode.rb 文件：

```
require "rubygems"
require "i18n"
require "active_support"
require "active_support/hash_with_indifferent_access.rb"
require "active_support/inflector.rb"
require "barby"

require "has_barcode/configuration"

module HasBarcode
  def self.included(base)
    base.send(:extend, ClassMethods)
  end

  module ClassMethods
    def has_barcode(*args)
      options = args.extract_options!
      @@barcode_configurations ||= {}
      @@barcode_configurations[args.first] = HasBarcode::Configuration.new(options)

      define_method args.first do
        if options[:type] == :code_128
          @@barcode_configurations[args.first].barcode_class.new(options[:value].call(self), options[:code128])
        else
          @@barcode_configurations[args.first].barcode_class.new(options[:value].call(self))
        end
      end

      define_method "#{args.first}_data" do |opts|
        if opts
          send(args.first).send("to_#{options[:outputter]}", opts)
        else
          send(args.first).send("to_#{options[:outputter]}")
        end
      end

    end

    def barcode_configurations
      @@barcode_configurations
    end
  end

end 
```

我的模型：

```
has_barcode :barcode,
              outputter: :svg,
              type: :code_128,
              code128: 'B',
              value: Proc.new { |p| "#{p.number}" } 
```

我的观点：

```
<%= my_model.barcode_data(xdim:2, height:60).html_safe %> 
```

请注意，在当前日期 (2012-12-05)，当前 gem 没有更新为允许传递 xdim 和 height 等输出器参数的最新更改。

此答案基于最新的代码更新（与问题相关）和我自己的建议，可以在[这里找到](https://github.com/dpickett/has_barcode/issues?state=closed)

虽然这个解决方案没有嵌入到 has_barcode gem 中，但我将直接使用 Barby：

在我的模型中添加：

```
def get_barcode(number)
     require 'barby'
     require 'barby/barcode/qr_code'
     require 'barby/outputter/svg_outputter'

     barcode = Barby::Code128B.new("#{number}")

     barcode.to_svg(xdim:2, height:60)
  end 
```

在视图中：

```
<%= my_model.get_barcode(my_model.number).html_safe %> 
```

# javascript - 从 android 活动恢复 Webview(page)

> ID：13724418
> 
> 赞同：2
> 
> 时间：2012-12-05T13:32:11.247
> 
> 标签：javascript, android

我正在从 Main 活动加载一个 URL，

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

在网络上执行一些活动后，在一个事件中，我使用 droidgap 调用另一个活动。
我无法在完成活动时将控制权交还给网页。基本上我需要恢复/网页机制，我离开了 android 活动。

下面是一些片段，MyClass(DroidGap) 可以访问 JS-

```
public class MyClass extends DroidGap{
  static WebView mAppView;
  static DroidGap mGap;
  private String RInfo[] =  new String[5];

  public MyClass(DroidGap gap, WebView view)
  {
    mAppView = view;
    mGap = gap;   
  }

  public void initiateDP(){
    Intent intent = new Intent(mGap, DPActivity.class);
      mGap.startActivity(intent);
  } 
```

主要活动 ：-

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.init();
    super.setIntegerProperty("loadUrlTimeoutValue", 40000);

    mc = new MyClass(this, appView);
    appView.addJavascriptInterface(mc, "MyCls");

    super.loadUrl("file:///android_asset/www/index.html"); 
} 
```

索引.html：-

```
alert('shaken');
           var r = window.confirm('Do you want to enable remote');
           if(r == true)
           {

                        //    alert('before redirecting');
                             window.MyCls.initiateDP();

           } 
```

这将启动 DPActivity。所以从DPActivity，我必须回到我离开的页面。在 DPActivity 中：-

```
if(MyClass.mAppView.canGoBack()) {
             MyClass.mAppView.goBack();
}
else{
finish();
} 
```

这没有发生。请建议我任何其他机制，如果有错误请纠正我。

# python - 安装 scikit：找不到 gcc-4.2，改用 Clang

> ID：13724419
> 
> 赞同：1
> 
> 时间：2012-12-05T13:32:15.027
> 
> 标签：python, gcc, clang, llvm-gcc

尝试在我的 Mac (OS X Lion) 上安装 scikit 时，我偶然发现了这个错误：

> 未找到 gcc-4.2，改用 clang。

我搜索了如何解决这个问题，[似乎](https://github.com/scikit-image/scikit-image/issues/283)环境变量 CC 设置不正确。我现在的问题是，我怎样才能改变这个，我必须改变什么？我`/usr/lib/`确实看到了 g++、gcc、llvm-g++-4.2 和 llvm-gcc-4.2 可执行文件。此外，当我检查时，`env`我没有看到 CC 变量。即使我尝试导出 CC=gcc 我也看不到它的`env`命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:26:48.520

有多种方法可以做到这一点：

1.  如果`make`要编译源代码，请使用以下命令：

    > ```
    > make CC=/path/to/gcc CXX=path/to/g++ 
    > make CC=/path/to/gcc CXX=path/to/g++ install 
    > etc. 
    > ```

2.  您可以通过以下方式永久更改默认编译器：

    > ```
    > cd /usr/bin
    > rm cc c++ gcc g++
    > ln -s gcc-4.2 cc
    > ln -s gcc-4.2 gcc
    > ln -s c++-4.2 c++
    > ln -s g++-4.2 g++ 
    > ```

不过，您也应该`clang`尝试一下 - 它一点也不差，而且在许多情况下，它可以生成与`gcc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:48:26.410

如果 scikits*明确地*寻找 gcc-4.2，听起来它在设置过程中是硬编码的（坏主意 imo）。

然后我会选择符号链接解决方案；与我的评论或 Ramneek 的回答有点不同，但几乎相同：

```
sudo ln -s /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:54:46.647

`gcc`这样不应该在`/usr/lib/`，但（也）在`/usr/bin/`。里面的`/usr/lib/`是子目录，里面的`/usr/bin/`是可执行文件。

很可能您在这些子目录中有库，但没有实际的可执行文件和头文件。

您在安装 XCode 期间是否安装了命令行工具？

# blackberry - 在黑莓上连接 BIS 时出现错误请求 400

> ID：13724420
> 
> 赞同：0
> 
> 时间：2012-12-05T13:32:17.817
> 
> 标签：blackberry, connection

我在连接 BIS 时遇到问题，我从服务器 400 得到答案。这是一个错误的请求。但是当我连接wifi时，我没有这个问题。当我在网页中重定向并且某些文件 CSS 未正确显示时，会出现此问题。`;deviceside=false;ConnectionType=mds-public`我在连接 BIS 时使用此后缀。

有人对此有任何想法吗？

# ruby-on-rails - 当服务器位于另一个时区时，如何强制使用 UTC 时间

> ID：13724421
> 
> 赞同：1
> 
> 时间：2012-12-05T13:32:18.437
> 
> 标签：ruby-on-rails

我的服务器有系统时区“欧洲/巴黎”

我配置了我的 Rails 应用程序（Rails 3.29） config.time_zone = 'Europe/London' config.active_record.default_timezone = :utc

所有事件的开始/结束日期都存储在数据库中：“2013-01-02 10:00:00”

问题在于范围

```
scope :starting, lambda {|start_date_time|
  {:conditions => ["starts_at = ?", Event.db_datetime(start_date_time)] }
}
...
def self.db_datetime(date_time)
  Time.at(date_time.to_i).utc.to_s(:db)
end 
```

当我创建 start_date_time 过滤器时，我得到一个系统本地时区日期时间 start_date_time = Time.new(2013, 1, 2, 10, 0, 0) 2013-01-02 10:00:00 +0100

```
and Event.db_datetime(start_date_time) gives "2013-01-02 09:00:00" 
which cannot be found 
```

有没有办法强制 utc datetime 所以： start_date_time = Time.new(2013, 1, 2, 10, 0, 0) 会给 2013-01-02 10:00:00 UTC

感谢您的反馈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:55:00.743

**Time.at** - 或**Time.new** - 解析系统本地时区的时间，此处显示为 UTC+1。这就是为什么解析 UTC+1 中的 10:00 变成 UTC 中的 09:00。

我认为您正在寻找的功能是

```
Time.zone.at                             #equivalent to Time.at
Time.zone.local(2013, 1, 2, 10, 0, 0)    #equivalent to Time.new 
```

它将在定义的时区中解析给定的日期和时间

```
config.time_zone = 'Europe/London' 
```

其结果是一个**TimeWithZone**对象，它是 Rails 对 ruby**​​ Time**的扩展。

您可以查看此文档页面[http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)以获取有关 TimeWithZone 的更多信息。

你可以这样使用它；db_datetime(date_time) 方法不再是必需的：

```
# class Event
scope :starting, lambda {|start_date_time|
  {:conditions => ["starts_at = ?", start_date_time.to_s(:db)] }
}
# I think to_s(:db) already handle the .utc conversion part

## example
start_date_time = Time.zone.local(2013, 1, 2, 10, 0, 0) 
Event.starting(start_date_time) 
```

# openid - Google OpenID 登录 - x-has-session 如何工作？

> ID：13724429
> 
> 赞同：3
> 
> 时间：2012-12-05T13:32:40.440
> 
> 标签：openid, google-openid

我有一个带有外部用户系统（用户名/电子邮件/sessionId）的 Google Chrome 扩展程序，人们可以使用他们自己选择的凭据（通过 SSL）登录。我想将其更改为使用 Google OpenID 登录，如下所示：

1.  用户点击“通过 Google 登录”：
2.  扩展执行`checkid_immediate`* 登录请求：
    *   如果`checkid_immediate`登录失败：
        1.  `checkid_setup`该扩展程序将打开一个新选项卡，其中包含** 登录（和电子邮件获取）的指定参数。
        2.  用户选择帐户并批准我的服务。
        3.  在我的返回页面上，我将 OpenID 身份和电子邮件保存在我的数据库中。
        4.  我通过 Javascript 关闭选项卡。
    *   否则`checkid_immediate`成功并返回 OpenID 身份：
        1.  我通过在我的数据库中查找 OpenID 身份来确定哪个用户。
3.  我登录用户并`sessionId`照常设置。

据我了解`x-has-session`，将允许我获取当前登录用户的 OpenID（如果他们之前允许我的服务使用他们的登录名），但响应始终为`openid_mode=setup_needed`.

使用我自己的帐户进行测试，我能够使用新的选项卡`checkid_setup`方法进行授权，然后从`checkid_immediate`XmlHttpRequest 获得成功的响应。**但是，只有当我在`openid.claimed_id`和`openid.identity`参数中插入从 Google 获得的 OpenID 时，这才有可能。**

无论`openid.identity`和`openid.ui.mode`参数如何，请求都会成功。

我是否完全误解了我能做什么`x-has-session`？

`checkid_immediate`如果是，是否是通过我在运行请求时获得的 OpenID 标识符从我的扩展程序（而不在新选项卡中打开它）执行我的请求的唯一方法`checkid_setup`？

* * *

*`checkid_immediate`请求参数（使用 XMLHttpRequest 作为 POST 请求发送）：

```
var endpoint = "https://www.google.com/accounts/o8/ud";
var openIdParameters = {
  "openid.ns": "http://specs.openid.net/auth/2.0",
  "openid.mode": "checkid_immediate",
  "openid.return_to": "http://example.com/googleAuth.php",
  "openid.realm": "http://example.com",
  "openid.claimed_id": "http://specs.openid.net/auth/2.0/identifier_select",
  "openid.identity": "http://specs.openid.net/auth/2.0/identifier_select",
  "openid.ns.ui": "http://specs.openid.net/extensions/ui/1.0",
  "openid.ui.mode": "x-has-session"
}; 
```

在`openid.return_to`URL 处，我所做的只是回显`json_encode($_REQUEST)`（仅 GET/POST 变量，不包括 cookie），它在我的 XmlHttpRequest 中作为响应获取。

* * *

*`checkid_setup`请求参数（在新标签中打开）：

```
var endpoint = "https://www.google.com/accounts/o8/ud";
var openIdParameters = {
  "openid.ns": "http://specs.openid.net/auth/2.0",
  "openid.mode": "checkid_setup",
  "openid.return_to": "http://example.com/googleAuth.php",
  "openid.realm": "http://example.com",
  "openid.claimed_id": "http://specs.openid.net/auth/2.0/identifier_select",
  "openid.identity": "http://specs.openid.net/auth/2.0/identifier_select",
  "openid.ns.ax": "http://openid.net/srv/ax/1.0",
  "openid.ax.mode": "fetch_request",
  "openid.ax.required": "email",
  "openid.ax.type.email": "http://axschema.org/contact/email"
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:37:52.357

好的，所以我终于弄清楚了为什么我的测试表现得很奇怪（以及为什么`x-has-session`它似乎没有做任何事情）：如果您使用多个帐户登录（对我来说就是这种情况），Google OpenID 登录有点工作不同。

让我们来看看差异（这些结果是通过我自己的测试获得的，因此它们可能不是 100% 准确 - 他们还假设没有其他任何东西会触发`setup_needed`Google 的响应，例如切换`openid.realm`）：

* * *

**1：**未指定 OpenID 且未指定的即时请求`x-has-session`：

*   **未登录：** Google`openid_mode=setup_needed`在响应中指定参数。
*   **单次会话：**如果用户已批准服务，Google`openid_mode=id_res`会`openid_mode=setup_needed`在响应中指定其他参数。
*   **多个会话：**`openid_mode=setup_needed`无论是否批准服务，Google 都会在响应中指定参数。

* * *

**2：**立即请求不指定 OpenID，但指定`x-has-session`：

*   **未登录：**与**1**相同（未登录）。
*   **单次会话：**如果用户已批准服务，Google 会指定参数，否则在响应中`openid_mode=id_res`忽略。`x-has-session``openid_mode=setup_needed``openid_ext1_mode=x-has-session`
*   **多个会话：**`openid_mode=setup_needed`无论是否批准服务，Google 都会在响应中指定参数。

* * *

**3：**立即请求指定 OpenID 而未指定`x-has-session`：

*   **未登录：**与**1**相同（未登录）。
*   **单次会话：**同**1**（单次会话）。
*   **多个会话：**与单个会话相同。

* * *

**4：**立即请求指定 OpenID 和`x-has-session`：

*   **未登录：**与**1**相同（未登录）。
*   **单次会话：**同**2**（单次会话）。
*   **多个会话：**与单个会话相同。

* * *

换句话说：

*   如果使用单个会话，立即模式 using`x-has-session`可以告诉您 Google 用户是否已登录，或者如果用户已经批准该服务，则**无论指定其 OpenID**是否都返回成功响应。
*   如果使用多个会话**并指定 OpenID**，则行为与单个会话相同。
*   如果使用多个会话**而不指定 OpenID**立即模式总是返回失败响应并且`x-has-session`不适用。

# c++ - 如何在函数中传递二维数组作为参数并在 C++ 中返回二维数组？

> ID：13724432
> 
> 赞同：1
> 
> 时间：2012-12-05T13:32:44.767
> 
> 标签：c++, arrays, pointers

在 C++ 中，如何将二维数组作为参数传递给函数并且该函数返回一个二维数组？

如果我有一个这样定义的数组：

```
struct Hello
{
   int a;
   int b;
};

Hello hello[3][3] = {.......}; 
```

如何在函数中返回上面的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:34:51.640

答案取决于二维数组的含义。

C++ 的方式是有一个`std::vector<std::vector<Type> >`，在这种情况下，答案是这样的

```
typedef std::vector<std::vector<myType> > Array2D;

Array2D f(const Array2D& myArray)
{

} 
```

如果您已动态分配数组，`Type**`如

```
Type** p  = new Type*(n);
for(int i = 0; i < n; ++i)
{
    p[i] = new Type(m);
} 
```

那么您可以简单地将 Type** 与尺寸一起传递。

```
... f(Type** matrix, int n, int m); 
```

如果你有一个普通的二维数组

```
 Type matrix[N][M]; 
```

那么你可以将它作为

```
template<int N, int M>
... f(Type (&matrix)[N][M]); 
```

我故意将前面两个示例中的返回类型留空，因为它取决于您返回的内容（传递的数组或新创建的数组）和所有权策略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T21:58:27.747

```
Hello(&f(Hello(&In)[3][3])) [3][3] {
    //operations
    return In; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:30:33.833

难以阅读（推荐使用 typedef），但您可以这样做：

```
Hello(&f(Hello(&A)[3][3])) [3][3] {
    // do something with A
    return A; 
} 
```

如果这是同一个数组，您实际上不需要返回。而是返回`void`- 语法会简单得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:49:39.813

我会这样做...

```
typedef std::vector< int > vectorOfInts;
typedef std::vector< vectorOfInts > vectorOfVectors;

vectorOfVectors g( const vectorOfVectors & voi ) {
  std::for_each( voi.begin(), voi.end(), [](const vectorOfInts &vi) {
    std::cout<<"Size: " << vi.size() << std::endl;
    std::for_each( vi.begin(), vi.end(), [](const int &i) {
      std::cout<<i<<std::endl;
    } );
   } );

  vectorOfVectors arr;
  return arr;
}

int main()
{
  vectorOfVectors arr( 10 );
  arr[0].push_back( 1 );
  arr[1].push_back( 2 );
  arr[1].push_back( 2 );
  arr[3].push_back( 3 );
  arr[3].push_back( 3 );
  arr[3].push_back( 3 );
  g( arr );
  return 0;
} 
```

# android - 我需要将我的日期和时间与手机日期和时间进行比较？

> ID：13724433
> 
> 赞同：0
> 
> 时间：2012-12-05T13:32:50.600
> 
> 标签：android, datetime, android-emulator, datepicker, compare

对于任务剩余应用程序，我需要将移动当前日期和时间与我的任务和时间进行比较。这怎么可能？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:36:47.177

假设 x1 将您的任务时间转换为长值，并通过`System.currentTimeMillis()`sppose x2 获取系统时间。

像比较长值一样比较它们..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:37:07.040

使用[日历](http://developer.android.com/reference/java/util/Calendar.html)类。

获取 的实例`Calendar`，设置小时、分钟、日期等，然后使用`getTimeInMillis()`需要与`System.currentTimeMillis()`.

此外，您可能想查看[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)以实际安排一些动作到某个时刻。

# postgresql - postgresql initdb - 目录不为空

> ID：13724446
> 
> 赞同：0
> 
> 时间：2012-12-05T13:33:52.527
> 
> 标签：postgresql, filesystems, ext4

我正在 ubuntu lucid 服务器上安装 postgres 8.4（不，目前我们在该服务器上使用“lucid”LTS 版本，因此尚无法升级（尽管我们现在将很快开始精确测试系统） ))

我已经使用 ext4 文件系统为 /var/lib/postgresql/8.4/main 目录设置了一个自己的分区。（那些真正喜欢 postgres 安装的人知道现在发生了什么......）由于 ext4 在所有文件系统的根目录中放置了一个 lost+found 目录，postgres 不会使用该目录作为它的数据目录，因为它最初是不是空的...

*initdb: directory "/var/lib/postgresql/8.4/main" 存在但不为空 如果要创建一个新的数据库系统，删除或清空目录 "/var/lib/postgresql/8.4/main" 或运行initdb 的参数不是“/var/lib/postgresql/8.4/main”。*

最简单的方法是删除 lost+found 并在 initdb 完成工作后重新创建它。- 这会导致任何问题吗？lost+found 是否有任何特殊属性或任何使其无法重新创建的东西，而且，除了 checkdisk 找到需要放在那里的东西之外的任何其他时间都需要它？

另一种方法是卸载 .../main/ 文件系统，初始化数据库，临时将 .../main/ 文件系统安装在其他地方，将东西移到那里并将其安装到位。似乎比“最简单的方法”多一点工作。

或者是否有某种方法可以让 initdb 忽略该目录不为空？（看不到任何命令行开关）

postgres 主目录中的 lost+found 目录可能会导致任何问题吗？

目前我在虚拟机上运行系统进行测试，所以如果我把事情搞砸了真的没关系，但在将其作为安装关键任务系统的官方方式之前，最好有一些对此的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:17:31.527

`lost+found`具有预先分配的块，使 fsck 在分区缺少空闲块时更容易将数据移入其中。要创建它，最好使用`mklost+found`命令而不是`mkdir`.

如果您不重新创建它，`fsck`无论如何都会在需要时进行。

但是，如果涉及到在 PGDATA 中发现损坏的地步`fsck`，我会考虑进行备份，而不是指望`lost+found`检索任何内容。

# php - 递归PHP函数

> ID：13724455
> 
> 赞同：2
> 
> 时间：2012-12-05T13:34:13.287
> 
> 标签：php, recursion, html-lists

如何为递归 PHP 函数安排`<ul>`& ？`<li>`我做了如下，但不能正常工作：

```
<?php
echo '<ul>';
$sql = mysql_query("select * from categories where parent_id = 0");
while($rs=mysql_fetch_array($sql)){
   echo '<li>'.$rs['name'];
   echo show_subcategory(($rs['cat_id']));
   echo '</li>';
}
echo '</ul>';

function show_subcategory($category_id){
$sql = mysql_query("select * from categories where parent_id ='$category_id'");
if(mysql_num_rows()>0){
echo '<ul>';
   while($rs=mysql_fetch_array($sql)){
     echo  '<li>'.$rs['name'];
     echo show_subcategory(($rs['cat_id']));
     echo '</ul></li>';
   }
 }else{
  echo '</li>';
 }
}
?> 
```

* * *

```
CREATE TABLE IF NOT EXISTS categories (
  cat_id int(11) NOT NULL AUTO_INCREMENT,
  parent_id int(11) NOT NULL DEFAULT '0',
  name varchar(20) NOT NULL,
  description text NOT NULL,
  slug varchar(50) NOT NULL,
  PRIMARY KEY (cat_id)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

INSERT INTO categories (cat_id, parent_id, name, description, slug) VALUES
(1, 0, 'programming', 'Forum ', 'programming'),
(2, 1, 'php', 'php programming', 'php'),
(3, 1, 'python', '', ''),
(4, 1, 'java', '', ''),
(5, 1, 'visual basic', '', ''),
(6, 2, 'codeigniter', '', ''),
(7, 2, 'joomla', '', ''); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:43:08.360

由于它是一个递归函数，应该输出每个类别和所有子类别的列表，因此您也可以将“顶级”父类别显示移动到其中（并通过调用`show_subcategory(0);`.

之后，我们可以删除子关闭`</ul>`和`</li>`标签，它会给我们类似的东西：

```
function show_subcategory($category_id){
    $sql = mysql_query("select * from categories where parent_id ='$category_id'");
    if(mysql_num_rows()>0){
        echo '<ul>';
        while($rs = mysql_fetch_array($sql)){
            echo  '<li>' . $rs['name'];
            echo show_subcategory(($rs['cat_id']));
            echo '</li>';
        }
        echo '</ul>';
    }
}

show_subcategory(0); 
```

旁注，不具体回答：
我建议升级到[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)扩展。两者都支持准备好的语句，可提供针对 SQL 注入攻击的安全性（您当前的代码容易受到攻击）。

# jquery - 想要在 div 之间切换，以便只有一个可见

> ID：13724457
> 
> 赞同：0
> 
> 时间：2012-12-05T13:34:13.843
> 
> 标签：jquery, html, show-hide

我是 jquery 的新手，并且编写了以下代码来在我正在设计的页面的内容 div 之间切换。我希望默认隐藏三个内容 div，然后如果单击标题，我希望该内容 div 可见。如果单击不同的标题，我希望 div 自动关闭，因此一次只能看到一个。

我认为这段代码会起作用，但似乎不是出于某种原因。

**代码：**

```
<head>

<script type="text/javascript" language="javascript">

$('document').ready(function(){

$('#partnersContent').hide();
$('#companyContent').hide();
$('#investmentsContent').hide();

$('#partnersHeader').click(function(){
    $('#partnersContent').slideToggle('1000');
    $('#companyContent').hide('bind');
    $('#investmentsContent').hide('bind');
});

$('#companyHeader').click(function(){
    $('#companyContent').slideToggle('1000');
    $('#partnersContent').hide('bind');
    $('#investmentsContent').hide('bind');
});

$('#investmentsHeader').click(function(){
    $('#investmentsContent').slideToggle('1000');
    $('#companyContent').hide('bind');
    $('#partnersContent').hide('bind');
});

});
</script>
</head>

<body>

<div id='partners'>
    <div id='partnersHeader'>Partners</div>
    <div id='partnersContent'>Information about partners</div>
</div>
<div id='company'>
    <div id='companyHeader'>Company</div>
    <div id='companyContent'>Information about company</div>
</div>
<div id='investments'>
    <div id='investmentsHeader'>Investments</div>
    <div id='investmentsContent'>Information about investments</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:43:33.630

对所有标题使用一个类 - `.tab_title`- 对所有选项卡使用一个类 - `.tab`，如下所示：

```
 <body>

<div id='partners'>
    <div class="tab_title" id='partnersHeader'>Partners</div>
    <div class="tab" id='partnersContent'>Information about partners</div>
</div>
<div id='company'>
    <div class="tab_title" id='companyHeader'>Company</div>
    <div class="tab" id='companyContent'>Information about company</div>
</div>
<div id='investments'>
    <div class="tab_title" id='investmentsHeader'>Investments</div>
    <div class="tab" id='investmentsContent'>Information about investments</div>
</div>

</body> 
```

CSS：

`.tab { display:none; }`

JS：

```
$('.tab_title').click(function(){
     $('.tab').hide(); // hide all tabs
     $(this).next().show(); // show relevant tab
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:45:38.503

根据您的消息来源，以及它在我的小提琴中确实有效的事实（http://jsfiddle.net/GjuYK/1/）我猜您忘记了

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:39:58.727

您的调用`.hide()`包含字符串“绑定”。

的正确参数`.hide()`是表示速度和/或 function() 回调的字符串。

我认为你只需要不`.hide()`带参数调用。

# javascript - 为单元测试模拟 DOM 事件的最佳方法？

> ID：13724468
> 
> 赞同：4
> 
> 时间：2012-12-05T13:34:51.843
> 
> 标签：javascript, jquery, events

我正在使用 moo4q+jquery 和 qUnit+sinon 测试框架。

目前要触发点击事件，我做了以下事情：

`object.jThis.click(); // simulate a click event`

`object.jThis`对象映射到的 jQuery 对象（包装器集）在哪里。

对我来说，问题是其他事件，例如`.hover()`不触发事件的方式与`.click()`.

这只是 jQuery API 中的不一致吗？

编辑：

```
// wire up event
attach: function() {
    this.jThis.hover(function(eventObj) {
        this.proxied.showOptionsProxy(true);
    }, function() {
        this.proxied.showOptionsProxy(false);
    });
}
// unit test: 
test("Test_hover_shows_menu", 2, function() {
    var target = this.getTarget();
    this.spy(target.proxied, 'showOptionsProxy');
    target.detach(); // must detach only for unit test after setting up spy on the proxy
    target.attach();
    target.jThis.mouseenter();
    ok(target.proxied.showOptionsProxy.calledWith(true), "hovering over options button shows the menu");
    target.jThis.mouseleave();
    ok(target.proxied.showOptionsProxy.calledWith(false), "mousing away from options button hides menu");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:37:08.453

`hover()`不是事件而是糖`.on( "mouseenter mouseleave")`，您可以通过触发`.mouseenter()`进入阶段和`.mouseleave()`离开阶段来触发悬停

见：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

演示：http: [//jsfiddle.net/2ZLMJ/](http://jsfiddle.net/2ZLMJ/)

# c# - 如何使用自定义参数（不是 postdata，不是 url 参数）复制 webrequest？

> ID：13724473
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:35:03.140
> 
> 标签：c#, httpwebrequest, fiddler

**语境：**

大家好，我正在尝试在此[网站](http://sefaznet.ac.gov.br/sefazonline/servlet/hpfsincon)上模拟查询，但我没有这样做。

我正在使用`C#`一个自定义的自行开发的库来包装 WebRequests 操作，从而更容易模拟`Posts and Gets`字符串和位图。

另外，我正在使用[Fiddler2](http://www.fiddler2.com/fiddler2/) Web Debugger 来调试服务的 Web 请求

**如何自己测试服务：**

1.  链接到[服务](http://sefaznet.ac.gov.br/sefazonline/servlet/hpfsincon)
2.  在第一个白盒上使用此文档：04034872000121
3.  输入验证码并点击“Consultar”

就是这样。

**问题：**

在使用 fiddler 调试请求后，并在代码上复制所有内容（Cookie、Origin、Host、带有巨大 json 的 Postdata 等）。

查询请求仍然无法正常工作，它再次将我重定向到主页，而不是查询文档。（我允许对 Web 请求对象进行“自动重定向”）。

我无法复制的唯一参数是：`GxAjaxRequest: 1`

以下是请求的 Fiddler 调试反馈：

```
POST http://sefaznet.ac.gov.br/sefazonline/servlet/hpfsincon?0898a16d81a4e94896958b17b52f252d,gx-no-cache=1354713117196 HTTP/1.1
Host: sefaznet.ac.gov.br
Connection: keep-alive
Content-Length: 1337
Origin: http://sefaznet.ac.gov.br
GxAjaxRequest: 1 **Weird Parameter. I've never saw it before.**
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko)     Chrome/23.0.1271.95 Safari/537.11
Content-Type: application/x-www-form-urlencoded
Accept: */*
Referer: http://sefaznet.ac.gov.br/sefazonline/servlet/hpfsincon
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: GX_SESSION_ID=vSLRLKed3eXJGMBorGepVtQkJOQ1I3o0EBUVzT0g%2BI8%3D;     JSESSIONID=af2ba968b7889ec8869caaaba281

vNUMDOC=04034872000121&cfield=chin&BUTTON1=Consultar&BTN_VOLTAR=Retornar&GXState=%7B%22_EventName%22%3A%22E'VISUALIZADADOS'.%22%2C%22_EventGridId%22%3A44%2C%22_EventRowId%22%3Aundefined%2C%22nRC_Duplicados%22%3A%220%22%2C%22CAPTCHA1_Reloadimagetext%22%3A%22Obter%20nova%20imagem!%22%2C%22CAPTCHA1_Validationresult%22%3A1%2C%22GX_FocusControl%22%3A%22vNUMDOC%22%2C%22GX_AJAX_KEY%22%3A%2264FFFF0AFF7A4DFF2655FFFFFF26FF77%22%2C%22AJAX_SECURITY_TOKEN%22%3A%221a9634f566dcd40d12bb8146fd7ff6edca12ae737a3743d79b4b826c3bd4a604%22%2C%22GX_CMP_OBJS%22%3A%7B%7D%2C%22sCallerURL%22%3A%22%2Fsefazonline%2Fservlet%2Fhpfsindado%3FeTlFtl5mBgEOtpLCt8Q02bMjmN3K93hV7i2Uxq_rHv0%3D%22%2C%22GX_RES_PROVIDER%22%3A%22com.genexus.webpanels.GXResourceProvider%22%2C%22GX_THEME%22%3A%22GeneXusX%22%2C%22_MODE%22%3A%22%22%2C%22Mode%22%3A%22%22%2C%22IsModified%22%3A%221%22%2C%22MESSAGE_Width%22%3A%22100%22%2C%22MESSAGE_Height%22%3A%22100%22%2C%22MESSAGE_Show%22%3A%22false%22%2C%22MESSAGE_Title%22%3A%22Title%22%2C%22MESSAGE_Message%22%3A%22This%20is%20the%20message%22%2C%22MESSAGE_Type%22%3A%22alert%22%2C%22MESSAGE_Icon%22%3A%22info%22%2C%22MESSAGE_Cls%22%3A%22%22%2C%22MESSAGE_Position%22%3A%22t%22%2C%22MESSAGE_Duration%22%3A1%2C%22MESSAGE_Visible%22%3A1%2C%22CAPTCHA1_Width%22%3A%22140%22%2C%22CAPTCHA1_Height%22%3A%2239%22%2C%22CAPTCHA1_Visible%22%3A1%7D& 
```

**问题：**

我实际上如何通过代码将此参数复制/添加到我的 webrequest 中？

有什么办法吗？

顺便说一句，该站点的脚本乱七八糟，这些脚本很难从请求中使用的大多数参数中“找出”来源。

我希望有人可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:41:24.693

我想通了。

问题是我必须为每个请求添加一个自定义标头。

```
webRequest.Headers.Add ("customheadertext and value"); 
```

现在提琴手正确显示了我的新请求，并添加了标头

```
POST http://sefaznet.ac.gov.br/sefazonline/servlet/hpfsincon?0898a16d81a4e94896958b17b52f252d,gx-no-cache=1354721123208 HTTP/1.1
GxAjaxRequest: 1
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko)   Chrome/13.0.782.107 Safari/535.1
Content-Type: application/x-www-form-urlencoded
Referer: http://sefaznet.ac.gov.br/sefazonline/servlet/hpfsincon
Host: sefaznet.ac.gov.br
Cookie: GX_SESSION_ID=B8w8AQ4W%2FLzLHIpBor3JwJDQAWGy1xRqCYUMnzF14Yk%3D;     JSESSIONID=c19564cbebfab1911442fd64a0bb
Content-Length: 1291
Expect: 100-continue
Accept-Encoding: gzip, deflate 
```

# maven - maven-pax-provision + equinox：java.lang.Long 不能转换为 java.lang.String

> ID：13724478
> 
> 赞同：2
> 
> 时间：2012-12-05T13:35:23.087
> 
> 标签：maven, osgi, equinox, apache-felix, pax-runner

我正在经历一些奇怪的、不可重现的行为。

我正在使用 maven-bundle-plugin 和 maven-pax-plugin 开发一个 OSGi 应用程序，以便在 Apache Felix 和 Eclipse Equinox 中运行它。

从今天开始，当我尝试启动或停止捆绑时，有时会出现以下错误，例如

磅工作正常

输出（摘录）：

```
0|Active     |    0|OSGi System Bundle (3.8.1.v20120830-144521)
1|Active     |    1|Console plug-in (1.0.0.v20120522-1841)
2|Active     |    1|Apache Felix Gogo Command (0.12.0)
3|Active     |    1|Apache Felix Gogo Runtime (0.10.0)
4|Active     |    1|Apache Felix Gogo Shell (0.10.0)
5|Active     |    5|OSGi R4 Core Bundle (4.1.0)
6|Active     |    5|slf4j-api (1.6.6)
7|Active     |    5|Logback Core Module (1.0.7)
8|Active     |    5|Logback Classic Module (1.0.7) 
```

但是，例如，当我尝试停止 6 时，我得到以下异常：

```
g! stop 6
java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.String
at org.eclipse.equinox.console.commands.EquinoxCommandsConverter.convert(EquinoxCommandsConverter.java:61)
at org.apache.felix.gogo.runtime.CommandProcessorImpl.convert(CommandProcessorImpl.java:254)
at org.apache.felix.gogo.runtime.CommandSessionImpl.convert(CommandSessionImpl.java:374)
at org.apache.felix.gogo.runtime.Reflective.coerce(Reflective.java:389)
at org.apache.felix.gogo.runtime.Reflective.coerce(Reflective.java:310)
at org.apache.felix.gogo.runtime.Reflective.invoke(Reflective.java:110)
at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:82)
at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)
at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)
at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
at org.apache.felix.gogo.shell.Console.run(Console.java:62)
at org.apache.felix.gogo.shell.Shell.console(Shell.java:203)
at org.apache.felix.gogo.shell.Shell.gosh(Shell.java:128)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.felix.gogo.runtime.Reflective.invoke(Reflective.java:137)
at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:82)
at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)
at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)
at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
at org.apache.felix.gogo.shell.Activator.run(Activator.java:75)
at java.lang.Thread.run(Thread.java:722) 
```

每个 Bundle 都会发生这种情况，在 Felix 中一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:21:30.967

这是 Equinox 命令包中的错误。它无法正确转换类型。gogo 运行时打印 printStackTrace 并使用 felix 命令正确执行命令。

# php - 如何逐步将网站转换为 CodeIgniter？

> ID：13724479
> 
> 赞同：8
> 
> 时间：2012-12-05T13:35:25.787
> 
> 标签：php, codeigniter

我一直在对 PHP 的 OO 和 MVC 进行大量研究，并且几乎已经选择将我管理的现有大型网站迁移到 CodeIgniter。我觉得使用 OO+MVC 环境具有巨大的组织和性能优势，与网站现在使用的现有功能/程序结构相比，有望提高开发速度。

然而，由于网站的庞大规模，我想逐渐将代码转移到 CodeIgniter 的结构中，从而有一个过渡时间段，其中部分网站处于 CI 中，而其他部分则采用旧样式。

从代码结构的角度来看，是否有任何关于最好的方法的建议，同时最大限度地减少重复代码的数量？我对 OO 也很陌生，由于学习曲线，我觉得渐进式是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:42:16.487

我认为您必须确定数据库（模型）中的依赖实体并首先从它们开始，例如一些联系人、用户注册等。

最可靠和最安全的方法是，您必须将当前工作站点复制到本地计算机并开始一点一点地进行操作，直到完成所有操作，然后将其上传到您的公共网络服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:57:17.807

您可以将 CI 安装到一个文件夹中并仅重定向（尽管`.htaccess`）您想使用 CI 处理的请求。除此之外，一切都应该照常工作，您不需要更改很多当前功能。在 CI 上工作的部分越多，您将拥有的重定向规则就越多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:15:38.610

我只会在本地从头开始（几乎）编写整个站点，然后在一切正常并经过测试后将其上传到服务器。

“几乎”从头开始是指您可以将一些 HTML 复制到 View 文件中，并且可能使用一些现有的 PHP 来拼凑后端的各个部分，但我认为您必须从一开始就编写大部分内容. 我使用 MVC 模式以面向对象的方式制作了一个半大规模的 Web，即使将其转移到 CodeIgniter 也不是一件容易的事，更不用说一个完全按程序编写的网站了。这是我的看法。

# excel - EPPLUS - 重命名单元格

> ID：13724482
> 
> 赞同：2
> 
> 时间：2012-12-05T13:35:30.737
> 
> 标签：excel, epplus

我正在使用 EPPLUS 构建自定义 Excel 电子表格。我缺少的一项功能是更改单元格的名称。EPPLUS 能以某种方式实现吗？如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:00:34.997

假设这`book`是您的工作簿并且`sheet`是您的工作表。让我们试试这个代码片段

```
var cell = sheet.Cells["C2"]; // Cell or Range you want to name
sheet.Names.Add("The_Name_Here", cell); 
```

该名称将添加到工作表中。如果要访问整个工作簿中的名称，请尝试：

```
var cell = sheet.Cells["C2"]; // Cell or Range you want to name
book.Names.Add("The_Name_Here", cell); 
```

根据您的需要，名称的范围可以是`sheet.Names`或`book.Names`。我不知道如何修改现有名称，但可以确定 1 个单元格/范围可能有多个名称。

# ant - TeamCity 使用 Ant 部署到 Tomcat 失败

> ID：13724484
> 
> 赞同：1
> 
> 时间：2012-12-05T13:35:47.550
> 
> 标签：ant, teamcity, ant-contrib

我在 Ubuntu 12 上运行 TeamCity 7，我正在尝试使用 Ant 将 war 文件部署到 IP x 机器上的 tomcat 服务器。问题是 - 这在使用 TeamCity 7 的另一台机器上工作，我唯一改变的是机器（移动到在 KVM 上运行的 Ubuntu）和 TC 版本（升级）。

1.  我已将 ANT_HOME 设置为正确的位置，并且我看到 TC 在构建日志中使用它： ... -Dant.home=/usr/share/ant ...

2.  我已将以下 jar 添加到我的 ANT_HOME/lib：catalina-ant、tomcat-coyote、tomcat-juli、tomcat-util

3.  构建在具有默认 Ant 设置的代理上运行

4.  我的 ant 文件如下所示：

> ```
> <target name="deploy.to.server">
>     <property name="port" value="${tomcat.port}"/>
>     <property name="tomcat.manager" value="manager/text"/>
>     <property name="url" value="http://${tomcat.server}:${port}/${tomcat.manager}"/>
>     <property name="path" value="/${server.name}"/>
> 
>     <echo message="Deploying application to ${url}"/>
> 
>     <antcall target="undeploy.from.tomcat"/>
>     <sleep seconds="3"/>
>     <antcall target="deploy.to.tomcat"/>
> </target>
> 
> <taskdef name="deploy"    classname="org.apache.catalina.ant.DeployTask"/>
> <taskdef name="undeploy"  classname="org.apache.catalina.ant.UndeployTask"/>
> 
> <target name="deploy.to.tomcat" description="Install web application">
>     <deploy url="${url}" username="${username}" password="${password}"
>             path="${path}" war="${work.dir}/${path}.war"/>
> </target>
> 
> <target name="undeploy.from.tomcat" description="Remove web application">
>     <undeploy url="${url}" username="${username}" password="${password}"
>             path="${path}"/>
> </target> 
> ```

我在 TC 日志中有这个：

```
[Step 1/2] Starting: /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java -Dagent.home.dir=/home/system/dev/TeamCity/buildDeployAgent -Dagent.name=Deploy Agent -Dagent.ownPort=9091 -Dagent.work.dir=/home/system/dev/TeamCity/buildDeployAgent/work -Dant.home=/usr/share/ant -Dbuild.number=131 -Dbuild.vcs.number.Nutrino_Monitor_sources=588 -Dbuild.vcs.number.Nutrino_build_scripts=590 -Dfile.encoding=ANSI_X3.4-1968 -Dfile.separator=/ -Djava.io.tmpdir=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp -Dos.arch=amd64 -Dos.name=Linux -Dos.version=3.5.0-19-generic -Dpath.separator=: -Dteamcity.agent.cpuBenchmark=684 -Dteamcity.agent.dotnet.agent_url=http://localhost:9091/RPC2 -Dteamcity.agent.dotnet.build_id=45574 -Dteamcity.auth.password=mlTjdmhOxwfxuM6vGfcQPsKg81q29rFU -Dteamcity.auth.userId=TeamCityBuildId=45574 -Dteamcity.build.changedFiles.file=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp/changedFiles7524737972530602224.txt -Dteamcity.build.checkoutDir=/home/system/dev/TeamCity/Builds/DeployNutritionServer -Dteamcity.build.id=45574 -Dteamcity.build.properties.file=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp/teamcity.build3049879068391711216.properties -Dteamcity.build.tempDir=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp -Dteamcity.build.workingDir=/home/system/dev/TeamCity/Builds/DeployNutritionServer -Dteamcity.buildConfName=Deploy to Integration -Dteamcity.buildType.id=bt38 -Dteamcity.configuration.properties.file=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp/teamcity.config301718488736388101.properties -Dteamcity.projectName=Nutrition Builds -Dteamcity.runner.properties.file=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp/teamcity.runner1078243400245029410.properties -Dteamcity.runtime.props.file=/home/system/dev/TeamCity/buildDeployAgent/temp/agentTmp/ant7992360137092769527runtime -Dteamcity.tests.recentlyFailedTests.file=/home/system/dev/TeamCity/buildDeployAgent/temp/buildTmp/testsToRunFirst5600043147441131768.txt -Dteamcity.version=7.1.2 (build 24170) -Dtomcat.server=integration -Duser.country=US -Duser.home=/home/system -Duser.language=en -Duser.name=system -Duser.timezone=Asia/Jerusalem -Dwork.dir=/home/system/dev/TeamCity/Builds/DeployNutritionServer -classpath /usr/share/java/ant-launcher-1.8.2.jar org.apache.tools.ant.launch.Launcher -lib /home/system/dev/TeamCity/buildDeployAgent/plugins/antPlugin/ant-runtime.jar:/home/system/dev/TeamCity/buildDeployAgent/lib/runtime-util.jar -listener jetbrains.buildServer.agent.ant.AgentBuildListener -buildfile /home/system/dev/TeamCity/Builds/DeployNutritionServer/build/deploy.xml deploy.nutrino.server
[15:06:21][Step 1/2] in directory: /home/system/dev/TeamCity/Builds/DeployNutritionServer
[15:06:21][Step 1/2] taskdef
[15:06:21]
[taskdef] taskdef class org.apache.catalina.ant.DeployTask cannot be found
 using the classloader AntClassLoader[]
[15:06:21]
[Step 1/2] The following error occurred while executing this line:
/home/system/dev/TeamCity/Builds/DeployNutritionServer/build/tomcat.tasks.xml:9: taskdef class org.apache.catalina.ant.DeployTask cannot be found
 using the classloader AntClassLoader[]
[15:06:21][Step 1/2] Process exited with code 1
[15:06:21][Step 1/2] Ant output
[15:06:21][Ant output] Buildfile: /home/system/dev/TeamCity/Builds/DeployNutritionServer/build/deploy.xml
[15:06:21][Ant output] 
[15:06:21][Ant output] BUILD FAILED
[15:06:21][Ant output] /home/system/dev/TeamCity/Builds/DeployNutritionServer/build/deploy.xml:8: The following error occurred while executing this line:
[15:06:21][Ant output] /home/system/dev/TeamCity/Builds/DeployNutritionServer/build/tomcat.tasks.xml:9: taskdef class org.apache.catalina.ant.DeployTask cannot be found
[15:06:21][Ant output]  using the classloader AntClassLoader[]
[15:06:21][Ant output] 
[15:06:21][Ant output] Total time: 0 seconds
[15:06:22][Step 1/2] Step Deploy (Ant) failed 
```

现在，这非常奇怪，因为当我从命令行运行它时，它运行良好： ant -buildfile deploy.xml -Dtomcat.server= ...

两者之间没有明显的区别—​​—从 CL 和通过 TC 代理运行它都应该从 ANT_HOME (usr/share/ant) 运行 Ant，并在 $ANT_HOME/lib 中加载库。

任何帮助，将不胜感激。:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T10:25:18.373

只是回答问题，

感谢@timomeinen - 将 catalina-ant.jar 添加到 $ANT_HOME/lib 完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T16:11:24.507

这意味着它没有看到 lib catalina-ant.jar

你可以加：

类名="org.apache.catalina.ant.DeployTask"
**类路径="C:\Programming\Tomcat\Instances\8080\lib\catalina-ant.jar"**

它将解决这个参考问题，但我猜你将来会遇到其他库的类似问题，所以从长远来看，你仍然需要解决参考问题。

# c++ - 我的库中的多个类：不允许不完整的类型

> ID：13724490
> 
> 赞同：0
> 
> 时间：2012-12-05T13:35:59.170
> 
> 标签：c++, object, instantiation

这是我第一次将我的库功能拆分为多个类。我不确定如何根据类实例化我的对象。即使类在同一个 .h 文件中，我是否需要实例化类对象才能访问这些类方法和变量？我收到第 30 行的错误“不允许不完整类型”。

我的代码：

```
/*
File: sensor.h

Header file for phSensor Library.
*/

#ifndef SENSOR_H
#define SENSOR_H

#include "mbed.h"
#include "cfExtensions.h"
#include "msExtensions.h"

#include <string>

class phSensor;
class ecSensor;
class tempSensor;

class sensor
{
public:
    sensor(); //Default sensor constructor
    sensor(cfExtensions &cfExt, msExtensions &msExt);

private:
    cfExtensions &_cfExt;
    msExtensions &_msExt;

    phSensor     ph;  // Line 30, gets error "incomplete type is not allowed"
    ecSensor     ec;
    tempSensor   temp;

    string _phCurrentPhValue;
    string _phMaxValue;
    string _phMinValue;

};

class phSensor
    : public sensor
{
public:
    phSensor();

    void outputPhMaxValue();

private:
    float _getCurrentPhValue();
    float _getPhMaxValue();
    float _getPhMinValue();

    void _setPhMaxValue();
    void _setPhMinValue();

    void _calibratePhSensor();

    Ticker getPhMax;
    Ticker getPhMin;
};

class ecSensor
    : public sensor
{
public:
    ecSensor();
};

class tempSensor
    : public sensor
{
public:
    tempSensor();

};

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:39:26.633

在您的情况下，您只能声明对不完整类型的指针或引用

```
phSensor     ph;
ecSensor     ec;
tempSensor   temp; 
```

所有这些都会出错，如果`sensor`不知道所有成员的布局，就无法定义布局。

此外，对象不可能包含其自己的类的子对象，但这就是您要尝试做的事情 -既继承`phSensor`又是. 很可能您需要这些作为指针。`ecSensor``sensor``sensor`

```
phSensor     *ph;
ecSensor     *ec;
tempSensor   *temp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:35:06.887

其他人已经评论了声明的问题`phSensor ph;`。

我要评论你的设计。

**关于你的`class sensor`**
第一关，你为什么要这样做？

您在面向对象中学习的第一件事是关于继承，例如一个`Vehicle`类，其中`Car`,`Truck`和`Bicycle`所有都是该基本车辆类的子类。很好，很简单，但经常出错。最终，您需要摒弃对面向对象编程的幼稚看法。

恰当的例子：仅仅因为 pH 传感器、电导率传感器和温度传感器都是某种类型的传感器，并不一定意味着创建`Sensor`基类是一个好主意。所有传感器共有的共同元素是什么？如果没有，那么拥有那个`sensor`基类可能不是一个好主意。

**做一件事并做好**
你的`sensor`班级正在做两件事。它是其他传感器类的基类*，*它是三种传感器的集合。这是两个非常不同的东西，所以这些不同的行为应该属于两个非常不同的类。如果您将该类分为两个类，`sensor`作为基类（如果需要；见上文）和一个`multisensor`包含 pH 传感器、电导率传感器和温度传感器的类，那么您的直接问题就会消失。没有必要让这个`multisensor`类继承自`sensor`，甚至从`phsensor`etc 继承。这个新类将包含多个传感器。组合通常是比继承更好的途径。

**关于类`sensor`构造函数**
您有两个作为引用的数据成员。引用只能由构造函数设置，并且只能在初始化列表中。我可以看到非默认构造函数做了什么。你的默认构造函数是做什么的？您的派生类只有默认构造函数，这表明它们正在调用`sensor`类的默认构造函数。这有意义吗？摆脱那些默认构造函数可能会更好。在 C++03 中执行此操作的标准方法是将默认构造函数声明为私有但从不提供实现。C++11 中有一个更好的选择，就是将构造函数声明为已删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:39:41.847

您声明了 phSensor 类，因此类型名称是已知的。尽管如此，此时编译器对该类的成员或方法一无所知，因此它无法知道类型的大小。只要类只被声明而不被定义，你就只能对它使用指针或引用。

另外：如果您仔细查看班级布局，这将无法正常工作。假设您实例化 phSensor。phSensor 扩展了传感器，因此也初始化了传感器的所有成员。其中一个成员又是一个 phSensor，它是从传感器派生的，它持有另一个继承传感器的 phSensor，依此类推。你看，这个实例化永远不会结束并耗尽所有内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T13:40:26.047

您不应该在同一个文件中声明这些类。如果你这样做，模块化代码的想法是没有意义的。

# r - paste 中“collapse”的缩写？

> ID：13724492
> 
> 赞同：18
> 
> 时间：2012-12-05T13:36:13.587
> 
> 标签：r, argument-matching, partial-matches

使用 R 中的命令`paste`，我想同时使用参数`sep`和`collapse`，但你不能缩写`collapse`为`coll`甚至`collaps`. 然而，对于其他功能，部分缩写有效。

例如：

```
paste(letters, colla=", ")
# [1] "a , " "b , " "c , " "d , " "e , " "f , " "g , " "h , " "i , " "j , " "k , " "l , " "m , " "n , " "o , " "p , " "q , " "r , "
[19] "s , " "t , " "u , " "v , " "w , " "x , " "y , " "z , "
paste(letters, collapse=", ")
# [1] "a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z" 
```

没有其他以 开头的参数可以折叠`coll`，这会干扰部分参数匹配。

为什么我在调用时必须输入整个参数名称`paste`，而我不必为其他函数输入？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T13:46:21.573

我相信这`...`是导致您必须使用精确参数匹配的粘贴。*具体来说，在*参数列表中的事实`,collapse`之后。*`...`*

 *示范：

```
f1 <- function(x, collapse) cat("collapse",collapse)
f2 <- function(..., collapse) cat("collapse",collapse)
f3 <- function(collapse, ...) cat("collapse",collapse)

> f1(c="test",1)
collapse test
> f2(1,c="test")
Error in base::cat(...) : argument "collapse" is missing, with no default
> f2(1,collapse="test")
collapse test
> f3(c="test",1)
collapse test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:47:10.457

包装器功能可能会有所帮助，就像`paste0`

```
p <- function(..., s=" ", clap=NULL) {   # or whichever abbreviation you prefer. I originally had `col`, but that was dumb. 
   paste(..., sep=s, collapse=clap)
}

p0 <- function(...,  clap=NULL) {
   paste(..., sep="", collapse=clap)
} 
```

例如：

```
p(c("hello", "world"), c("abc", "123"), clap="$")
# [1] "hello abc$world 123"

p0(c("hello", "world"), c("abc", "123"), clap="$")
# [1] "helloabc$world123" 
```*

# java - 如何在 CXF 中每次发送肥皂消息时使用 ws-security 信息？

> ID：13724501
> 
> 赞同：0
> 
> 时间：2012-12-05T13:36:52.577
> 
> 标签：java, cxf

我希望能够动态更改/设置每个在 cxf 中发送肥皂消息的 ws-security 信息。怎样才能做到最好。

详细信息：我想在运行时更改密钥库名称、密钥库别名、密码、主机名等设置，最好在每次发送消息时更改。目前我正在使用：带有 WSS4JOutInterceptor 和 WSS4JInInterceptor 拦截器的 jaxws 客户端进行签名。我正在使用带有 tls 客户端参数的 http 管道进行 SSL/TLS 通信。jaxws 客户端和 http 管道都在 spring 中配置，并且在 Spring 配置中设置了它们的配置，如密钥库名称、别名和密码。

我看到了选项：1）我在运行时通过全局属性更改这些设置。2）我更改每个发送消息的这些设置（最好）。

2）我认为是可取的，但最困难的。我该怎么做？

我在考虑： a) jaxws 客户端：制作我自己的进出拦截器来拦截消息，并根据该消息所需的安全设置使用正确的（缓存的）WSS4JOutInterceptor 拦截器。如果缓存中不存在 WSS4JOutInterceptor 拦截器，则会创建它（我可能缓存了最多 5 个 WSS4JOutInterceptor 实例）。但是，当与@Webservice 代理交谈以创建和发送soap 请求/消息时，我如何确定我的拦截器中需要哪些设置，因为这在应用程序的其他部分中是已知的......也许我可以添加通过 JaxWsClientProxy 将某种 securityInfo 对象传递给 soap 消息，但是如何......

b）http管道：使用ConduitSelector（从未使用过，但会发现），这样我就可以选择正确的http管道，但我遇到与（a）中相同的问题：“如何确定我应该使用哪些设置使用”，因为它们在创建/发送肥皂消息时已知，并且拦截器稍后设置......可能我必须为每个发送消息设置一个管道选择器..

最后上面成为一个大故事;），但我希望很清楚你可以给一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T21:43:18.870

这个问题的公认答案似乎是（来自[http://www.mail-archive.com/users@cxf.apache.org/msg29804.html](http://www.mail-archive.com/users@cxf.apache.org/msg29804.html)）：

> 嗨，埃德，
> 
> 正如我已经写过的，您甚至不需要拦截器来更改属性。您可以通过发送消息在客户端中执行此操作：
> 
> AddNumbers 端口 = (AddNumbers)service.getPort(portName, AddNumbers.class); ((BindingProvider)port).getRequestContext().put(SecurityConstants.ENCRYPT_PROPERTIES, )。
> 
> 虽然，如果您想在拦截器中执行此操作，您可以使用相同的技术传递带有消息属性的必要信息。
> 
> 在 CXF 中控制安全性的最标准和推荐的方法是使用 WS-Policy。您还可以在运行时动态应用它。如果您对这种方式感兴趣，我可以提供更多关于如何动态设置 WS-Policy 的信息。
> 
> 干杯，安德烈。

（来自[http://www.mail-archive.com/users@cxf.apache.org/msg29809.html](http://www.mail-archive.com/users@cxf.apache.org/msg29809.html)）：

> 如果你这样做： ((BindingProvider)port).getRequestContext().put("thread.local.request.context", "true");
> 
> 以后对 getRequestContext() 的调用将使用线程本地请求上下文。这允许请求上下文是线程安全的。（注意：响应上下文在 CXF 中始终是线程本地的）。
> 
> [http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe%3F](http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe%3F)中的详细信息
> 
> 干杯，安德烈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:47:42.240

我发现这些`org.apache.cxf`包非常有助于让我不必编写自定义类并且能够坚持使用基本界面。

对于您的实例，该方法可能如下所示：

*   使用`JAX-WS`or`wsimport`客户端
*   使用`cxf` `WSS4JOutInterceptor`具有动态属性的
*   使用动态`CallbackHandler`类访问密钥库

典型的 ( `wsimport`'d) 客户端公共 API 可能如下所示：

```
public class SomeServiceClient
{

  public SomeService getSomeService( URL url )
  {

    SomeService_Service svc = new SomeService_Service();

    SomeService someService = svc.getSomeServicePort();

    Client client = ClientProxy.getClient( someService );
    Endpoint cxfEP = client.getEndpoint();

    Map<String, Object> outProps = new HashMap<String, Object>();
    outProps.put( WSHandlerConstants.ACTION, "Signature" );
    outProps.put( WSHandlerConstants.USER, "foo" );
    outProps.put( WSHandlerConstants.PW_CALLBACK_CLASS, SomeClientCallbackHandler.class.getName() );
    outProps.put( WSHandlerConstants.SIG_PROP_FILE, "client-sign.properties" );

    WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor( outProps );

    cxfEP.getOutInterceptors().add( wssOut );

    return someService;
  }
} 
```

您可以提供一些逻辑来确定`WSHandlerConstants.USER`要传递的值、`PW_CALLBACK_CLASS`使用的值以及`SIG_PROP_FILE`使用的值。

属性文件可能如下所示。您可以简单地选择多个文件，或者您可以在类中动态添加这些属性：

```
# properties for accessing the java keystore using Merlin
org.apache.ws.security.crypto.provider=org.apache.ws.security.components.crypto.Merlin
org.apache.ws.security.crypto.merlin.keystore.type=jks
org.apache.ws.security.crypto.merlin.keystore.password=bar
org.apache.ws.security.crypto.merlin.keystore.alias=foo
org.apache.ws.security.crypto.merlin.keystore.file=foobar.keystore 
```

最后，您`CallbackHandler`需要提供您在密钥库中标识的证书别名的密码。这也可能包含一些动态逻辑。

```
public class SomeClientCallbackHandler implements CallbackHandler
{

    @Override
    public void handle( Callback[] callbacks ) throws IOException, UnsupportedCallbackException
    {
        for( Callback thisCallback : callbacks )
        {
            WSPasswordCallback pwcb = (WSPasswordCallback)thisCallback;
            String user = pwcb.getIdentifier();
            int usage = pwcb.getUsage();

            if( usage == WSPasswordCallback.SIGNATURE )
            {
                if( "foo".equals( user ) ) pwcb.setPassword( "bar" );
            }
        }        
    }
} 
```

最后，与只做一次所需的工作相比，没有太多工作可以让这一切都“动态”地处理多个密钥库。它可能比编写自己的“输入”或“输出”拦截器更可取。

# php - Doctrine 2 是 Array Coulmn 中的元素更漂亮吗？

> ID：13724504
> 
> 赞同：0
> 
> 时间：2012-12-05T13:37:05.680
> 
> 标签：php, arrays, doctrine

因为我才几天才学习 symfony2 和教义 2，所以我有很多疑问，对于更有经验的人来说可能是愚蠢的。

我有一个带有“标签”字段的博客文章类：

```
class Article 
{
    /**
     * @ORM\Column(type="array")
     */
     protected $tags;
} 
```

现在，我看到 Doctrine 以这种格式将它们作为“longtext”类型存储在数据库中：

```
a:4:{i:0;s:8:"symfony2";i:1;s:3:"php";i:2;s:8:"paradise";i:3;s:7:"symblog";} 
```

由于我创建了一个标签页面，其中显示了由所选标签标记的所有文章，因此我需要检查博客文章的“标签数组”中是否有此标签。

```
public function getByTag($tag)
{
    $likelyBlogs = $this->createQueryBuilder('b')
        ->select('b')
        ->where('LOWER(b.tags) LIKE :tag')
        ->setParameter('tag', '%:"'.$tag.'"%')
        ->getQuery()
        ->getResult();

    return $likelyBlogs;
} 
```

然而，这完美地工作，**->where('LOWER(b.tags) LIKE :tag')**对我来说看起来有点 hacky 所以我想检查是否有任何其他更“自然”的方法来检查值是否存在于数组中?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:58:05.417

看看多对多关系：[http ://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional)

如果您真的想将标签存储在与博客文章相同的行中，您应该考虑使用像 MongoDB 这样的 NoSQL 数据库。但在普通 SQL 中，最好对表进行规范化并将标签放在一个表中。

# java - 用动态值替换 XSLT？

> ID：13724507
> 
> 赞同：1
> 
> 时间：2012-12-05T13:37:14.457
> 
> 标签：java, xml, xslt

我有一个可以替换一些 xml 值的 xsl 模板。现在我希望这些值由我的代码动态生成。

```
Transformer trans = TransformerFactory.newInstance().newTransformer(new StreamSource(new File("foo.xsl"));
trans.transform(new StreamSource(new File("foo.xml"), new StreamResult(new File("output.xml"))); 
```

我怎样才能获得例如仅在 id=1 的情况下替换名称？而且通过javacode动态提供该id，而不是硬编码？

```
<?xml version="1.0"?>
<my:accounts xmlns:my="http://myns">
<my:account>
<my:name>alex</my:name>
<my:id>1</my:id>
</my:account>
<my:account>
<my:name>Fiona</my:name>
<my:id>2</my:id>
</my:account>
</my:accounts> 
```

这将替换所有名称：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://myns">

 <xsl:param name="propertyName" select="'alex'"/>

      <xsl:template match="node() | @*">
        <xsl:copy>
          <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
     </xsl:template>

<xsl:template match="*[local-name()='account']/*[local-name()='name']/text()[.='{$propertyName}']">
       <xsl:text>johndoe</xsl:text>
      </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:00:19.273

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="http://myns">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pId" select="2"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
 </xsl:template>

 <xsl:template match="my:name/text()">
   <xsl:choose>
     <xsl:when test="../../my:id = $pId">johndoe</xsl:when>
     <xsl:otherwise><xsl:copy-of select="."/></xsl:otherwise>
   </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<my:accounts xmlns:my="http://myns">
    <my:account>
        <my:name>alex</my:name>
        <my:id>1</my:id>
    </my:account>
    <my:account>
        <my:name>Fiona</my:name>
        <my:id>2</my:id>
    </my:account>
</my:accounts> 
```

**产生想要的正确结果**：

```
<my:accounts xmlns:my="http://myns">
   <my:account>
      <my:name>alex</my:name>
      <my:id>1</my:id>
   </my:account>
   <my:account>
      <my:name>johndoe</my:name>
      <my:id>2</my:id>
   </my:account>
</my:accounts> 
```

**说明**：

1.  使用全局范围`<xsl:param>`。尽管设置了默认值，但它会被转换调用者指定的值覆盖。

2.  请注意，如何为转换指定外部参数的值的问题对于不同的 xslt 处理器（供应商）有不同的答案。您需要阅读您使用的特定 XSLT 处理器的文档，以获得针对您的特定情况的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:46:37.910

您可以在 xsl 样式表中定义一个参数

```
<xsl:param name="id" select="'0'"/> 
```

然后将其作为 Java 中的参数传递：

trans.setParameter("id", "1");

这对你有用吗？或者你想传递多个参数？

类似于[这里提到的东西 - 变压器类](http://onjava.com/pub/a/onjava/excerpt/java_xslt_ch5/index.html?page=4)

这个 xsl 有效，但它在 2.0 中

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://myns">
<xsl:param name="id" select="'1'"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
 </xsl:template>

<xsl:template match="*[local-name()='account'][*:id=$id]/*[local-name()='name']/text()">
   <xsl:text>johndoe</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

# apache-flex - 如何像融合图一样在flex中制作动画折线图

> ID：13724508
> 
> 赞同：0
> 
> 时间：2012-12-05T13:37:16.480
> 
> 标签：apache-flex, linechart

我正在使用 flex 制作折线图。我找不到任何动画方式，就像融合图中的折线图一样。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:56:49.613

Lots of info available:

[http://blog.flexexamples.com/2007/10/15/using-data-effects-to-animate-chart-data/](http://blog.flexexamples.com/2007/10/15/using-data-effects-to-animate-chart-data/)
[http://dougmccune.com/blog/2007/06/03/save-a-snapshot-image-of-a-flex-app-without-a-server/](http://dougmccune.com/blog/2007/06/03/save-a-snapshot-image-of-a-flex-app-without-a-server/)
[https://stackoverflow.com/questions/681969/how-to-animate-the-flex-chart-axis-when-the-maximum-of-the-data-changes](https://stackoverflow.com/questions/681969/how-to-animate-the-flex-chart-axis-when-the-maximum-of-the-data-changes)

# jquery - 复选框未在临时 jquery ui 对话框中刷新其状态

> ID：13724510
> 
> 赞同：0
> 
> 时间：2012-12-05T13:37:22.837
> 
> 标签：jquery, jquery-ui, checkbox, refresh, checked

我在主页上有一些复选框；当它们中的每一个被单击时，我会创建一个临时的 jquery ui 对话框，上面有一些复选框（那些不起作用的）；我发现第一次加载对话框复选框，可以通过 jquery 选中和取消选中它们。如果我关闭并重新创建该对话框，我将无法通过 jquery 选中或取消选中复选框；我尝试了以下方法但没有结果（元素状态更改但页面上复选框的元素未刷新）

```
$('#checkbox').attr('checked', true);
$('#checkbox').prop('checked', true); 
```

元素状态更改，我检查了它

```
$('#checkbox').attr('checked');
$('#checkbox').prop('checked');
$('#checkbox').is(':checked'); 
```

代码如下：

```
// For each checkbox in a form in main page
$('.first_form_cbox').each(function() 
{
    // When each checkbox is clicked (checked) fun_handler is called,
    // and id of checkbox is passed to it
    var id = $(this).attr('id');
    $(this).click({'id': id }, fun_handler); 
});

// Handler for click on main page checkbox
function fun_handler()
{
    // Dialog body is created    
    var dlg_body = '<div class="sfun_container">';
    // Array that holds values used by checkboxes
    var fun_list = new Array( 
        {'name' : 'Minimum, Maximum', 'fun' : 'MMX'},
        {'name' : 'Average', 'fun' : 'AVG'},
        {'name' : 'Standard Deviation', 'fun' : 'STD'},
        {'name' : 'Standard Error of the Mean', 'fun' : 'SEM'},
        {'name' : 'Distinct Count', 'fun' : 'DCNT'}
        );
    // Creates all checkboxes using values defined in fun_list
    for (var f_index in fun_list)
    {
        dlg_body += '<input id="tfun_cbox_' + fun_list[f_index]['fun'] 
            + '" type="checkbox" class="tfun_cbox" value="'
            + fun_list[f_index]['fun'] + '"/>' 
            + fun_list[f_index]['name'] + '<br/>';
    }
    dlg_body += '</div>';
    // Creates temporary dialog
    $('<div title="Select function(s)"><p>' + dlg_body + '</p></div>').dialog(
    {
        modal : true,
        width : 320,
        resizable : false,
        // When open
        open : function ()
        {
            // Gets from data-funs attribute of main page checkbox
            // Each main page checkbox may have some functions already
            // inserted in data-funs, if earlier some dialog checkboxes,
            // that represent functions, were checked and their values
            // saved in data-funs
            var funs = $('#' + event.data['id']).data('funs');
            if (funs != undefined)
            {
                // Retrieves from funs which dialog checkboxes were checked
                for(var f_index in funs)
                {
                    // Checks dialog checkbox
                    $('#tfun_cbox_' + funs[f_index]).prop('checked', true);
                }
            }
        },
        close : function ()
        {
            if ($('.tfun_cbox:checkbox:checked').length > 0)
            {
                // Some dialog checkboxes are checked
                var funs = new Array();
                $('.tfun_cbox:checkbox:checked').each(function()
                {
                    // Saves dialog checked checkbox state value in funs
                    funs.push($(this).val());
                    // Unchecks dialog checkbox
                    $(this).prop('checked', false);
                });
                // Saves all checkboxes value in data-funs of main page
                // checkbox
                $('#' + event.data['id']).data('funs', funs);
            }
        },
        buttons : [
        {
            text : "Ok",
            click : function()
            {
                // Checks back main page checkbox that 
                // when clicked fired fun_handler
                $('#' + event.data['id']).prop('checked', true);
                $(this).dialog("close");
            }
        },
        {
            text : "Cancel",
            click : function()
            {
                // Unchecks all dialog checkboxes in order not to save them
                $('.tfun_cbox:checkbox:checked').prop('checked', false);
                $(this).dialog("close");
            }
        }]
    });    
} 
```

如果需要，我会发布更多代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:38:51.030

尽量不要使用 id 选择器，而是使用类 1。我的意思是不要选择 $('#checkbox')，而是选择 $('.mycheckbox')。如果不是，您将创建两个具有相同 id 的对象，并且在第二个调用中，JQuery 可能指的是旧对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T19:04:54.920

我可能错了，因为我不完全了解 jqueryui 对话框的工作原理，但是如果您尝试在某些 DOM 元素上附加事件，这些元素会被破坏然后重新创建，它们显然会丢失所有绑定在它们上的事件。如果我需要处理未来 DOM 元素的事件，我可能会使用[`.delegate()`](http://api.jquery.com/delegate/)or指令。[`.on()`](http://api.jquery.com/on/)

# mysql - 在另一个表的帮助下更新 mysql 中的列

> ID：13724512
> 
> 赞同：1
> 
> 时间：2012-12-05T13:37:31.220
> 
> 标签：mysql

我在数据库中有两个表：

第一桌：学生

```
Field           Type          Null    Key   Default
id              int(11)       NO      PRI   NULL
class_id        int(11)       NO      PRI   NULL
admission_id    int(11)       NO      PRI   NULL
school_id       int(11)       NO      PRI   NULL
name            varchar(64)   YES           NULL
admin_date      datetime      YES           NULL 
```

二表：录取

```
Field           Type          Null    Key   Default
id              int(11)       NO      PRI   NULL
class_id        int(11)       NO      PRI   1
school_id       int(11)       NO      PRI   NULL
name            varchar(64)   YES           NULL
admin_date      datetime      YES           NULL 
```

现在我想将我稍后介绍的Admission表的class_id列填写到表中。默认情况下，所有 class_id 都设置为 1，因此需要根据学生进行更新。我在做什么：

```
 Update Admission
   set class_id = (select class_id from Students where Students.school_id = Admission.school_id); 
```

我收到一条错误消息：错误 1452（23000）：无法添加或更新子行：外键约束失败

你能帮我解决我出错的地方或任何其他替代解决方案来填写列吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:39:49.783

试试这个 ：：

```
Update Admission
inner join Students on (Students.school_id = Admission.school_id)
   set Admission.class_id = Students.class_id 
```

# java - 从 ANT 运行 junitreport 时出现 OutOfMemoryError

> ID：13724519
> 
> 赞同：1
> 
> 时间：2012-12-05T13:37:42.777
> 
> 标签：java, ant, jenkins, environment-variables, out-of-memory

我们有一份 Jenkins 工作来测试我们的应用程序。执行时，我们在执行使用以下代码段生成 junitreport 的目标时得到著名的 OutOfMemoryError。

```
 <junitreport todir="${tmp.dir}/reports-test-shared">
            <fileset dir="${tmp.dir}/reports-test-shared">
                <include name="TEST-*.xml" />
            </fileset>
            <report format="frames" todir="html" />
        </junitreport> 
```

我们得到的确切堆栈跟踪如下。

```
/app/ci/jenkins/jobs/FLEETperfect Trunk Junit Test MOS/workspace/trunk/com.bsiag.fleet.build/build.xml:818: java.lang.OutOfMemoryError: Java heap space
    at com.sun.org.apache.xerces.internal.util.XMLStringBuffer.append(XMLStringBuffer.java:205)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.scanData(XMLEntityScanner.java:1380)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanCDATASection(XMLDocumentFragmentScannerImpl.java:1654)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2986)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:180)
    at org.apache.tools.ant.taskdefs.optional.junit.XMLResultAggregator.createDocument(XMLResultAggregator.java:254)
    at org.apache.tools.ant.taskdefs.optional.junit.XMLResultAggregator.execute(XMLResultAggregator.java:144)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

编辑：我们的 build.xml 中的第 818 行是上面显示的 junitreport 任务

我已经查看了其他 SO 问题中给出的一些建议，例如[这里](https://stackoverflow.com/questions/417152/how-do-i-set-javas-min-and-max-heap-size-through-environment-variables)、[这里](https://stackoverflow.com/questions/11908497/ant-with-junit-task-outofmemoryerror?lq=1)和[这里](https://stackoverflow.com/questions/4182746/junitreport-ant-task-giving-java-lang-outofmemoryerror-java-heap-space)。

最常见的建议是

*   JAVA_OPTS中增加Xms和Xms
*   在 ANT_OPTS 中增加 Xmx 和 Xms

**这是我到目前为止所做的：**

*   将环境变量 JAVA_OPTS 设置为“-Xms512m -Xmx2048m”
*   将环境变量 ANT_OPTS 设置为“-Xms512m -Xmx2048m”
*   在我执行以下操作的 tomcat/bin 目录中创建了 setenv.sh： export JAVA_OPTS="$JAVA_OPTS -Xms512m -Xmx2048m"
*   向环境变量 JAVA_OPTS 和 ANT_OPTS 添加了“-XX:MaxPermSize=256m”

**我的问题如下。**我不知道我所做的内存设置是否是 ANT 用于运行报告生成的内存设置 (junitreport)

为了让 junitreport 在没有 OutOfMemoryError 的情况下终止，我必须在哪里增加堆大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:03:09.473

像这样的问题可能会使用另一种方法来解决。我没有增加堆空间，而是试图找到如此大空间需求的原因。我发现了一个测试，它向 sysout 写入了很多信息。这导致生成的 xml 文件大于 200mb。显然对于 2 或 3 GB 的堆大小来说太大了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T02:31:08.853

此错误已在[ANT 错误 34342](https://issues.apache.org/bugzilla/show_bug.cgi?id=34342)中提出。普遍的共识是，它是由用于生成报告的 XSLT 中的内存消耗过多引起的，并且不会在 ANT 中修复。

对我有用的是增加传递给 ant 的最大堆大小，例如 -Xmx3304m

在 Jenkins 中，您可以在 InvokeAnt>Advanced>JavaOptions 中将最大堆大小传递给 ANT，并添加类似 -Xmx2000m 的内容

关于实际的最大堆大小值，建议应为物理内存的 1/4 或 1GB，以较小者为准。但是，您可能需要超出 1GB 的限制才能避免此内存错误。请参阅Oracle 网站上的[垃圾收集器人体工程学指南。](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/gc-ergonomics.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:32:48.293

尝试如下设置 junit ant 目标的**maxmemory**选项；

```
<junit maxmemory="512m" fork="true"> 
```

请注意，根据 junit ant 目标[文档](http://ant.apache.org/manual/Tasks/junit.html)，您需要设置 fork="true" 才能获取 maxmemory 元素。否则将被忽略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T05:44:42.413

请尝试添加，

```
-Xms512m
-Xmx1024m
-XX:MaxPermSize=256m 
```

# qt - Qt - QTableView 中的 SelectedItems

> ID：13724520
> 
> 赞同：3
> 
> 时间：2012-12-05T13:37:46.930
> 
> 标签：qt, qt4

我正在尝试从 QTableView 小部件（下面复制的片段）返回所选行的向量，但是返回的值与选择不对应，我相信我不了解 QTableView 的 QModelIndexList/QModelIndex。你能让我知道我错在哪里或从 QTableView 访问所选项目的正确方法吗？C_model 的类型为 QStandardItemModel

```
for(int i = 0; i < c_model->rowCount(); i++)
  {
    if (selectionModel->isRowSelected(i, QModelIndex()))
    {
      QStringList selection;
      std::vector<std::string> currentIndexValues;
      for (int j = 0; j < c_model->columnCount(); j++)
      {
        QVariant q = c_model->data(c_model->index(i, j));
        selection.append(q.toString());

        currentIndexValues.push_back(q.toString().toLocal8Bit().constData());
        printf(" %s\t ", currentIndexValues[j].c_str());
      }
      printf("\n");
      v_selectedItems.push_back(currentIndexValues);
    }
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:03:21.007

`QAbstractItemView`（的基类）为此`QTableView`提供了一个。`QItemSelectionModel`您可以通过[QTableView::itemSelectionModel()](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#selectionModel)访问该模型 ，然后通过[QItemSelectionModel::selectedRows()](http://qt-project.org/doc/qt-4.8/qitemselectionmodel.html#selectedRows)检索选定的行：

```
QModelIndexList selectedRows = yourTableView->selectionModel()->selectedRows();

foreach( QModelIndex index, selectedRows )
{
    int row = index.row();
} 
```

# android - Android：哪些事件会唤醒设备

> ID：13724521
> 
> 赞同：1
> 
> 时间：2012-12-05T13:37:46.633
> 
> 标签：android, events, sleep, wakeup

我写了一个android应用程序，现在有一个问题。

如果我的应用程序正在运行并且我关闭了我的设备，那么有时它会在大约 8 秒后唤醒，然后屏幕打开并再次显示我的应用程序。

我的问题是：哪些事件或处理约束（如处理广播意图）会唤醒设备？

编辑：带有 RCT_WAKEUP 的警报会打开设备屏幕吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:22:07.477

AlarmManager 实际上不会为您打开屏幕。您可以改用唤醒锁。

```
PowerManager.WakeLock wakelock;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    .........

    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakelock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
                | PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.SCREEN_BRIGHT_WAKE_LOCK, "AlarmReceiver");
    wakelock.acquire();       
} 
```

完成活动后，请务必释放唤醒锁：

```
@Override
protected void onStop() {
    super.onStop();
    wakelock.release();
} 
```

您还需要在清单文件中添加唤醒锁定权限：

```
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

或者，如果您不想包含此额外权限，则可以在活动中使用以下代码而不是使用唤醒锁：

```
this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN |
                WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |
                WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
                WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON |
                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

# coldfusion - 如何让 Verity 搜索包含百分比 ("%") 符号的字符串？

> ID：13724523
> 
> 赞同：0
> 
> 时间：2012-12-05T13:38:06.837
> 
> 标签：coldfusion, full-text-search, coldfusion-8, verity

我有一个搜索财务文件的搜索应用程序。用户希望能够搜索百分比——即“100%”或“50%”——但结果不能正确返回。

例如，当我搜索“1.00%”（我知道在某些文档中存在）时，搜索结果会突出显示字符串“1:00”，这是一个时间，而不是我搜索的文字字符串。

是否有某种方法可以转义百分比符号等特殊符号，以便 Verity 可以找到它们？

@duncan 您的解决方案似乎部分有效。现在我遇到的问题是它没有正确搜索小数百分比 - 即“2.1%”返回突出显示字符串“2 1%”的结果。我尝试在标准之前切换到`type="explicit"`with `<WORD>`，但现在它什么也没带回来。是否有任何文档提供 Verity 视为“特殊字符”的所有字符。一旦我弄清楚了，我需要找到一种方法来逃避所有这些字符（我在想一个正则表达式，但不知道该怎么做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:46:49.293

您是否尝试过转义 % 字符？

```
"100\%" 
```

请参阅： http: [//my.safaribooksonline.com/book/web-development/coldfusion/0321223675/verity-search-language/app05lev1sec4](http://my.safaribooksonline.com/book/web-development/coldfusion/0321223675/verity-search-language/app05lev1sec4)

# android - 使所有 gcm 令牌无效

> ID：13724526
> 
> 赞同：5
> 
> 时间：2012-12-05T13:38:19.120
> 
> 标签：android, google-cloud-messaging

我的应用程序使用 gcm。每次用户登录时，都会注册新的 gcm 令牌并将其发送到我的第 3 方服务器。每次用户注销时，都会注销 gcm 令牌。这炒锅没有任何问题。

问题是在测试时，测试人员可以在不注销的情况下卸载应用程序，然后重新安装并登录另一个帐户。然后他会从两个不同的帐户收到两个 gcms。这意味着他将收到他当前未登录的帐户的私人 gcms。有时，实时用户甚至会发生这种情况。

GCM 文档指出，如果卸载应用程序，gcm 令牌*有时会过期。*在实践中，这永远不会发生。
[http://developer.android.com/google/gcm/gcm.html](http://developer.android.com/google/gcm/gcm.html)

GCM 文档还指出，您可以通过执行取消注册 GCM 令牌

```
Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
startService(unregIntent); 
```

但是，如果您在重新安装后尝试此方法似乎不起作用。我确实收到了回调，它告诉我令牌未注册，但 gcm 令牌仍然可以正常工作。

我的问题是：您能否确保您的应用程序没有有效的 gcm 令牌？我真的很想在应用程序首次启动期间取消注册所有现有令牌，或者至少从手机设置中重置它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:14:25.233

您的应用程序的 GCM 令牌对于每台设备都是唯一的，因此，如果您有不同的用户告诉您他们使用与其他用户相同的 GCM 令牌，那么您就知道您描述的情况已经发生。基本上，每次收到 GCM 令牌时，您都应该删除所有具有相同 GCM 令牌的旧记录，然后再将其仅分配给新用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:45:08.633

我相信当您的服务器向无效的注册 ID 发送消息时，您会收到错误消息。我认为您可以捕获此错误以从数据库/数据存储中删除这些注册 ID。

同样来自文档（[规范 id](http://developer.android.com/google/gcm/adv.html)）：

> 如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

# xcode4.5 - 在 Xcode 4.5.2 上创建 .ipa 应用程序

> ID：13724533
> 
> 赞同：5
> 
> 时间：2012-12-05T13:38:33.973
> 
> 标签：xcode4.5

如何在新的 Xcode 中创建 .ipa 文件并将其部署到 iOS 5.1.1 上的越狱 iPhone 4S？

Xcode 中的 .app 是红色的，所以我无法在 Finder 上显示它。

我目前没有注册 Apple 开发者计划。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:45:48.740

您需要*存档*项目，然后选择*导出为 Xcode 存档*（请参阅此[Apple 指南](http://developer.apple.com/library/ios/#recipes/xcode_help-archives_organizer/articles/distributing_ios_apps.html)）。

然后您需要在 Finder 中找到存档，您可以通过右键单击 Xcode 中的存档并选择*Show in Finder*来完成。

要将其安装到您的手机上，您可以使用[Installous](http://hackulo.us/wiki/Installous)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T16:02:17.070

[除非您破解 SDK](http://iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile)，否则您无法在没有配置文件/证书的情况下使用内置存档命令。

自 iOS 6 和 Xcode 4.2 以来，我还没有测试过上述内容。我无法想象 4.2 和 4.5 之间发生了很大变化。应用这些更改后，您可以使用自签名证书构建或根本不构建。

我不记得这是否允许您直接在 xcode 中使用 IPA 构建，但如果不是，那么让构建阶段运行一个 shell 脚本来这样做是微不足道的。这是我为[GemRB](https://github.com/gemrb/gemrb)制作的：

```
#increment the version number for the build
REV=`git log --pretty=format:'' | wc -l | sed 's/\ //g'`
VERSION=`git describe --tags --dirty=-patched`
DATE=`date -u +%Y-%m-%d\T%T\Z`

/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $REV" "${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"
/usr/libexec/PlistBuddy -c "Set :CFBundleShortVersionString $VERSION" "${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"

#updtate the iTumesMetaData
cp ios/iTunesMetadata.plist.in ios/iTunesMetadata.plist
/usr/libexec/PlistBuddy -c "Set :softwareVersionExternalIdentifier $REV" "ios/iTunesMetadata.plist"
/usr/libexec/PlistBuddy -c "Set :releaseDate $DATE" "ios/iTunesMetadata.plist"

#make iOS ipa
#purge payload of everything
if [ -d `ios/Payload`];
then
rm -r ios/Payload;
fi
mkdir -p ios/Payload

WORKING_DIR=`pwd`

cp -r "$BUILT_PRODUCTS_DIR"-iphoneos/GemRB.app ios/Payload/GemRB.app
cd ios
zip -r GemRB-ios-$VERSION.ipa iTunesArtWork iTunesMetadata.plist Payload

# copy the optional plugins
cd ..
cp "$BUILT_PRODUCTS_DIR"/OGGReader.so "$BUILT_PRODUCTS_DIR/$PLUGINS_FOLDER_PATH"/OGGReader.so
cp "$BUILT_PRODUCTS_DIR"/PNGImporter.so "$BUILT_PRODUCTS_DIR/$PLUGINS_FOLDER_PATH"/PNGImporter.so 
```

显然，如果您不想要它，请更改一些路径变量并删除自动版本的内容。

# c# - XML 持久性不止一项？

> ID：13724537
> 
> 赞同：0
> 
> 时间：2012-12-05T13:38:48.830
> 
> 标签：c#, xml, serialization, xml-serialization

嘿，我有以下代码将列表中的数据存储到 XML 文件中，但是当我将第二个项目添加到列表中时，它只会覆盖 XML 中的第一个项目，因此 XML 文件中只有一个项目，如何我解决这个

班级

```
public class Visits
{
/*
 * This class represents a single appointment
 */

    private string Customer_Name;
    private string Customer_Address;
    private DateTime Arrival_Time;
    private string Visit_Type;
    private Double Lat1;
    private Double Long1;
    //Private methods. Note the use of DateTime to store arrival time

    public string name{
        //Description property
        set { Customer_Name = value; }
        get {return Customer_Name;}
    }

    public string address
    {//Time property
        set { Customer_Address = value; }
        get { return Customer_Address; }
    }

    public DateTime arrival
    {   //Duration property
        set { Arrival_Time = value; }
        get { return Arrival_Time; }
    }

    public string type
    {
        set { Visit_Type = value; }
        get { return Visit_Type; }
    }

    public Double Lat
    {
        //Description property
        set { Lat1 = value; }
        get { return Lat1; }
    }

    public Double Lon1
    {
        //Description property
        set { Long1 = value; }
        get { return Long1; }
    } 
    public override string ToString()
    {   //Return a String representing the object
        return Visit_Type + "     " + Customer_Name + " " + Customer_Address + " " + Arrival_Time.ToString() + " " + "Latitude  " + Lat1 + " " + "Longitude  " + Long1;
    }
} 
```

}

然后列表

```
class List
{
/*
 * This object represents the List. It has a 1:M relationship with the Visit class
 */

    private List<Visits> visits = new List<Visits>();
    //List object use to implement the relationshio with Visits

    public void addVisits(Visits vis)
    {
        //Add a new Visit to the List
        visits.Add(vis);
    }

    public List<String> listVisits()
    {//Generate a list of String objects, each one of which represents a Visit in List.

        List<String> listVisits = new List<string>();
        //This list object will be populated with Strings representing the Visits in the lists

        foreach (Visits vis in visits)
        {
            String visAsString = vis.ToString();
            //Get a string representing the current visit object

            listVisits.Add(visAsString);
            //Add the visit object to the List
        }

        return listVisits;
        //Return the list of strings
    }

    public Visits getVisits(int index)
    {
        //Return the visit object at the <index> place in the list

        int count = 0;
        foreach (Visits vis in visits)
        {
            //Go through all the visit objects
            if (index == count)
                //If we're at the correct point in the list...
                return vis;
            //exit this method and return the current visit
            count++;
            //Keep counting
        }
        return null;
        //Return null if an index was entered that could not be found
    }
} 
```

}

然后添加代码

```
 thePickup.name = txtCustName.Text;
            thePickup.address = txtCustAddress.Text;
            thePickup.arrival = DateTime.Parse(txtArrival.Text);
            thePickup.Dname = txtDeliveryName.Text;
            thePickup.Daddress = txtDaddress.Text;
            thePickup.Lat = Double.Parse(txtLat.Text);
            thePickup.Lon1 = Double.Parse(txtLong.Text);
            thePickup.type = "Pickup";
            //Update thePickup object to reflect any changes made by the user

            XmlSerializer SerializerObj = new XmlSerializer(typeof(Pickups));

        using (TextWriter WriteFileStream = new StreamWriter(@"Pickup.xml", true))
        {
            SerializerObj.Serialize(WriteFileStream, thePickup);
        } 
```

当我添加一个新条目时它只是改变了原始条目的格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:44:46.273

您应该尝试使用[XPath](http://www.w3schools.com/xpath/default.asp)支持的库来处理 XML 组装和创建。

当您使用 C# 时，我会推荐[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)来处理“解析”的事情。

为了构建 XML，[这里](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)是学习如何使用 XPath 构建 XML 的一个很好的来源。

您还可以使用 C# 中的本机 XMLDocument 类，如果您之前在没有任何解析逻辑的情况下构建它，可能会更有用。

看看[这里](http://csharp.net-tutorials.com/xml/using-xpath-with-the-xmldocument-class/)

**XPath 示例：**

这是一个 XPath 示例，可以帮助您避免覆盖 XML 文件中的实际节点。

```
CreateTag("//NODE1/NODE2", "TAG_NAME", tagContent);

    private void CreateTag(string xPath, string tag, string tagContent)
    {
        XmlNode node = _xml.SelectSingleNode(xPath);
        XmlElement element = _xml.CreateElement(tag);

        element.InnerText = tagContent;
        node.AppendChild(element);
    } 
```

如果您的集合有多个同名节点：

```
CreateTag("//SINTEGRA//SEARCH//RECORDS//RECORD[last()]", kv.Key, kv.Value); 
```

大多数.dll实现的XPath方法在哪里`last()`，它将索引返回到lastnode + 1，以便您的节点将在最后一个创建的节点之后插入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:54:37.893

不要序列化单个元素而是列表：

```
 List<Pickups> list = new List<Pickups>();

 foreach ( var pickup in ... )
    list.Add( pickup );

 ...
 XmlSerializer SerializerObj = new XmlSerializer(typeof(List<Pickups>));

 TextWriter WriteFileStream = new StreamWriter(@"Pickups.xml");
 SerializerObj.Serialize( WriteFileStream, list ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:47:15.820

尝试这个：

```
using(TextWriter WriteFileStream = new StreamWriter(@"Pickups.xml", true))
{
    SerializerObj.Serialize(WriteFileStream, thePickup);
} 
```

反而。

该`boolean true`参数表示 StreamWriter 会将`append`下一个写入块写入现有文件，而不是覆盖它

否则，您的代码每次都会覆盖**Pickups.xml文件。**并且不要忘记关闭 WriteFileStream 对象。

我试图重现你的情况：

```
 public class Pickups
    {
        public string name { get; set; }
        public string address { get; set; }
        public string Dname { get; set; }
        public string Daddress { get; set; }
        public string type { get; set; }
        public DateTime arrival { get; set; }
        public DateTime Lat { get; set; }
        public DateTime Lon1 { get; set; }
    }

```
class Program
{

    static void Main()
    {
        Pickups thePickup = new Pickups();
        thePickup.name = "nameProp";
        thePickup.address = "addressProp";
        thePickup.arrival = DateTime.Now;
        thePickup.Dname = "txtDeliveryName";
        thePickup.Daddress = "txtDaddress";
        thePickup.Lat = DateTime.Now;
        thePickup.Lon1 = DateTime.Now;
        thePickup.type = "Pickup";
        //Update thePickup object to reflect any changes made by the user

        XmlSerializer SerializerObj = new XmlSerializer(typeof(Pickups));

        using (TextWriter WriteFileStream = new StreamWriter(@"Pickups.xml", true))
        {
            SerializerObj.Serialize(WriteFileStream, thePickup);
        }

        Pickups thePickup1 = new Pickups();
        thePickup1.name = "nameProp2";
        thePickup1.address = "addressProp2";
        thePickup1.arrival = DateTime.Now;
        thePickup1.Dname = "txtDeliveryName2";
        thePickup1.Daddress = "txtDaddress2";
        thePickup1.Lat = DateTime.Now;
        thePickup1.Lon1 = DateTime.Now;
        thePickup1.type = "Pickup2";

        using (TextWriter WriteFileStream = new StreamWriter(@"Pickups.xml", true))
        {
            SerializerObj.Serialize(WriteFileStream, thePickup1);
        }
    }

} 
``` 在**Pickups.xml**文件中，我得到了预期的结果（2 个实体）：

```
<?xml version="1.0" encoding="utf-8"?>
<Pickups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <name>nameProp</name>
  <address>addressProp</address>
  <Dname>txtDeliveryName</Dname>
  <Daddress>txtDaddress</Daddress>
  <type>Pickup</type>
  <arrival>2012-12-05T15:30:37.809487+01:00</arrival>
  <Lat>2012-12-05T15:30:37.810487+01:00</Lat>
  <Lon1>2012-12-05T15:30:37.810487+01:00</Lon1>
</Pickups><?xml version="1.0" encoding="utf-8"?>
<Pickups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <name>nameProp2</name>
  <address>addressProp2</address>
  <Dname>txtDeliveryName2</Dname>
  <Daddress>txtDaddress2</Daddress>
  <type>Pickup2</type>
  <arrival>2012-12-05T15:30:37.989487+01:00</arrival>
  <Lat>2012-12-05T15:30:37.989487+01:00</Lat>
  <Lon1>2012-12-05T15:30:37.989487+01:00</Lon1>
</Pickups> 
```

你确定你修复了你程序的所有部分吗？也许您从代码中的不同位置写入同一个文件？

```

# sql - 删除域对象时出现“参照完整性约束违规”

> ID：13724538
> 
> 赞同：6
> 
> 时间：2012-12-05T13:38:57.807
> 
> 标签：sql, hibernate, grails

在我疯狂的宇宙中，一个房间可以有很多椅子，而椅子可以“属于”很多房间。在 grails 中它看起来像这样。椅子不应该知道它们属于哪个房间。

```
class Room {
    String name
    static hasMany = [chairs: Chair]
    static constraints = {
    }
}
class Chair {
    String name
    static constraints = {
    }
} 
```

我想删除一把椅子并自动删除所有拥有该椅子的房间域对象中对椅子的任何引用。我成功了，但有一个我不喜欢的修复程序。在 ChairController 我做了以下

```
def deleleChair(){
    def chairToDelete = Chair.get(params.id)
    Room.findAll().each {room->
        if(room.chairs.contains(chairToDelete)){
            room.removeFromChairs(chairToDelete)
            room.save(failOnError:true)
        }
    }
    chairToDelete.delete(params.chairId)
} 
```

是否有我需要设置的休眠配置以便它自动执行此操作？这在现实世界的场景中似乎很常见。当我可能决定（更疯狂的例子）汽车域对象可以有很多椅子时，我不想实现相同的代码。

我曾尝试使用 grails 事件推送插件。我有一个 ChairService ，它有一个动作来监听 gorm 中的 beforeDelete 事件。

```
class ChairService {
    @grails.events.Listener(topic = 'beforeDelete', namespace = "gorm")
    def handleDeletedChair(Chair chair){
         Room.findAll().each {room->
            if(room.chairs.contains(chairToDelete)){
                room.removeFromChairs(chairToDelete)
                room.save(failOnError:true, flush:true)
            }
        }
    }
} 
```

每当尝试删除椅子时都会调用此函数，但是当它返回到 ChairController 以执行实际的椅子删除时，删除操作仍然认为对 Room 的引用仍然存在并抛出一个

```
 Caused by JdbcSQLException: Referential integrity constraint    violation:"FK4ACA6A6151428364: PUBLIC.ROOM_CHAIR FOREIGN KEY(CHAIR_ID) REFERENCES PUBLIC.CHAIR(ID)"; SQL statement: 
```

从椅子上删除 id=? 和版本=？[23503-164]

我希望这个逻辑与椅子分开，椅子不应该与房间无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:18:57.047

因为这种关系不是双向存在的，所以我不确定是否有更优雅的解决方案。

但是，如果您要处理很多房间/椅子，我建议您使用带有预测的条件查询来仅加载您要删除的 ID，而不是加载所有房间的椅子。**最好**使用该`executeUpdate`方法进行“批量”删除。这样做也应该有助于解决您的错误。

[grails标准查询文档...](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html)

[删除 grails 文档中的对象...](http://www.grails.org/doc/latest/guide/single.html#5.3.2%20Deleting%20Objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:02:37.687

一个简单的解决方案是使用标准 SQL：

```
import grails.events.Listener
import groovy.sql.Sql

class ChairService {
    def dataSource // autowired

    @Listener(topic='beforeDelete', namespace='gorm')
        def handleDeletedChair(Chair chairToDelete) {
        new Sql(dataSource).execute('DELETE FROM room_chair WHERE chair_id=?', [chairToDelete.id])
        return true
    }
} 
```

由于这是 SQL，它可能取决于您使用的数据库（我用 H2 测试过）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:32:31.797

我在 ChairController.delete 中发现了错误，这是抛出的错误。删除发生并删除关联，但抛出异常。我的解决方案非常讨厌，我基本上抓住了异常并在之后呈现了相关视图。

```
Caused by HibernateOptimisticLockingFailureException: Object of class [test.cascade.Chair] with identifier [2]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [test.cascade.Chair#2]
->>   10 | doCall             in test.cascade.ChairService$_handleDeletedChair_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|      7 | handleDeletedChair in test.cascade.ChairService
|    238 | invoke . . . . . . in org.grails.plugin.platform.events.registry.DefaultEventsRegistry$ListenerHandler
|    159 | invokeListeners    in org.grails.plugin.platform.events.registry.DefaultEventsRegistry
|     69 | event . . . . . .  in org.grails.plugin.platform.events.publisher.DefaultEventsPublisher
|    149 | event              in org.grails.plugin.platform.events.EventsImpl
|     70 | onApplicationEvent in org.grails.plugin.platform.events.publisher.GormBridgePublisher
|   1110 | runWorker          in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . .  in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run                in java.lang.Thread

Caused by StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [test.cascade.Chair#2]
->>   10 | doCall             in test.cascade.ChairService$_handleDeletedChair_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|      7 | handleDeletedChair in test.cascade.ChairService
|    238 | invoke . . . . . . in org.grails.plugin.platform.events.registry.DefaultEventsRegistry$ListenerHandler
|    159 | invokeListeners    in org.grails.plugin.platform.events.registry.DefaultEventsRegistry
|     69 | event . . . . . .  in org.grails.plugin.platform.events.publisher.DefaultEventsPublisher
|    149 | event              in org.grails.plugin.platform.events.EventsImpl
|     70 | onApplicationEvent in org.grails.plugin.platform.events.publisher.GormBridgePublisher
|   1110 | runWorker          in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . .  in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run                in java.lang.Thread 
```

# android - 如何在 Phonegap 2.2.0 中正确实现 WebIntent 插件？

> ID：13724543
> 
> 赞同：0
> 
> 时间：2012-12-05T13:39:01.643
> 
> 标签：android, cordova, phonegap-plugins, webintents

我正在尝试在我为我的工作（社会住房）制作的应用程序中实现 phonegap 插件 WebIntent。我希望该应用程序能够将带有附件（维修图片等）的电子邮件发送到我们的办公室，这样我们就可以准确地看到我们需要维修什么并提供更好的服务。

我设法启动了相机并可以拍照，然后成功将应用程序定向到包含 WebIntent 插件的功能。下面是我的脚本：

```
 function camera()
 {
 navigator.camera.getPicture(sendEmail, onFail, { quality: 20,
 destinationType: Camera.DestinationType.FILE_URI });

 function sendEmail(to, subject, body) {
 var extras = {};
 extras[WebIntent.EXTRA_SUBJECT] = "Test";
 extras[WebIntent.EXTRA_TEXT] = "Test";
 window.plugins.webintent.startActivity({
 url: "johnsmith@gmail.com",
 action: WebIntent.ACTION_SEND,
 type: 'image/jpeg',
 extras: extras
 },
 function() {
 alert("mail sent");
 },
 function() {
 alert('Failed to send email');
 }
 );
 }

 function onFail(message) {
 alert('Failed because: ' + message);
 }

 } 
```

如您所见，目前我没有尝试将 imageURI 传递给 WebIntent。我只想让插件首先使用一些简单的文本。但是，每当我运行此功能时，插件都会返回“发送邮件失败”警报，甚至无需打开我的邮件应用程序。有什么想法我哪里出错了吗？

我的 Logcat 看起来像这样：

```
12-04 21:56:28.242: I/CordovaLog(25195): Changing log level to DEBUG(3)
12-04 21:56:28.252: I/CordovaLog(25195): Found preference for useBrowserHistory=true
12-04 21:56:28.252: D/CordovaLog(25195): Found preference for useBrowserHistory=true
12-04 21:56:28.252: I/CordovaLog(25195): Found preference for exit-on-suspend=false
12-04 21:56:28.252: D/CordovaLog(25195): Found preference for exit-on-suspend=false
12-04 21:56:28.292: D/JsMessageQueue(25195): Set native->JS mode to 2
12-04 21:56:28.322: D/DroidGap(25195): DroidGap.init()
12-04 21:56:28.622: D/HardwareRenderer(25195): Disabling v-sync
12-04 21:56:28.622: D/CordovaWebView(25195): DroidGap.loadUrl(file:///android_asset/www/index.html, 10000)
12-04 21:56:28.622: D/DroidGap(25195): onMessage(splashscreen,show)
12-04 21:56:28.622: D/CordovaWebView(25195): >>> loadUrl(file:///android_asset/www/index.html)
12-04 21:56:28.622: D/PluginManager(25195): init()
12-04 21:56:28.652: D/CordovaWebView(25195): >>> loadUrlNow()
12-04 21:56:28.652: D/DroidGap(25195): Resuming the App
12-04 21:56:28.662: D/HardwareRenderer(25195): Disabling v-sync
12-04 21:56:28.662: D/DroidGap(25195): Paused the application!
12-04 21:56:28.662: D/CordovaWebView(25195): Handle the pause
12-04 21:56:28.722: D/libEGL(25195): loaded /system/lib/egl/libGLES_android.so
12-04 21:56:28.732: D/libEGL(25195): loaded /system/lib/egl/libEGL_adreno200.so
12-04 21:56:28.752: D/libEGL(25195): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
12-04 21:56:28.752: D/libEGL(25195): loaded /system/lib/egl/libGLESv2_adreno200.so
12-04 21:56:28.882: D/OpenGLRenderer(25195): Enabling debug mode 0
12-04 21:56:28.882: W/Adreno200-EGLSUB(25195): SetSwapInterval() interval: 0 not set
12-04 21:56:28.902: W/Adreno200-EGLSUB(25195): SetSwapInterval() interval: 0 not set
12-04 21:56:29.052: D/DroidGap(25195): onMessage(onPageStarted,file:///android_asset/www/index.html)
12-04 21:56:29.332: D/CordovaLog(25195): exception firing pause event from native
12-04 21:56:29.332: D/CordovaLog(25195): null: Line 1 : exception firing pause event from native
12-04 21:56:29.332: I/Web Console(25195): exception firing pause event from native at null:1
12-04 21:56:32.142: D/Cordova(25195): onPageFinished(file:///android_asset/www/index.html)
12-04 21:56:32.142: D/DroidGap(25195): onMessage(onNativeReady,null)
12-04 21:56:32.142: D/DroidGap(25195): onMessage(onPageFinished,file:///android_asset/www/index.html)
12-04 21:56:32.242: I/SqliteDatabaseCpp(25195): sqlite returned: error code = 14, msg = cannot open file at line 27699 of [8609a15dfa], db=/data/data/com.saffronhousingmobileapp/databases/webview.db
12-04 21:56:32.242: I/SqliteDatabaseCpp(25195): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27699 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/com.saffronhousingmobileapp/databases/webview.db
12-04 21:56:33.562: D/DroidGap(25195): onMessage(networkconnection,wifi)
12-04 21:56:33.612: D/DroidGap(25195): onMessage(splashscreen,hide)
12-04 21:56:33.622: D/DroidGap(25195): onMessage(spinner,stop)
12-04 21:56:34.192: D/DroidGap(25195): onMessage(spinner,stop)
12-04 21:58:47.542: D/SoftKeyboardDetect(25195): Ignore this event
12-04 21:58:48.242: D/DroidGap(25195): Resuming the App
12-04 21:58:52.032: D/Cordova(25195): onPageFinished(file:///android_asset/www/index.html#page4)
12-04 21:58:52.032: D/DroidGap(25195): onMessage(onNativeReady,null)
12-04 21:58:52.032: D/DroidGap(25195): onMessage(onPageFinished,file:///android_asset/www/index.html#page4)
12-04 21:58:55.182: D/DroidGap(25195): Paused the application!
12-04 21:58:55.182: D/CordovaWebView(25195): Handle the pause
12-04 21:58:55.582: D/OpenGLRenderer(25195): Flushing caches (mode 1)
12-04 21:58:55.662: D/OpenGLRenderer(25195): Flushing caches (mode 0)
12-04 21:59:04.372: D/dalvikvm(25195): GC_FOR_ALLOC freed 1484K, 48% free 4368K/8323K, paused 18ms
12-04 21:59:05.252: I/dalvikvm-heap(25195): Grow heap (frag case) to 31.703MB for 20155408-byte allocation
12-04 21:59:05.252: W/CursorWrapperInner(25195): Cursor finalized without prior close()
12-04 21:59:05.292: D/dalvikvm(25195): GC_CONCURRENT freed 9K, 15% free 24042K/28039K, paused 1ms+3ms
12-04 21:59:10.572: D/dalvikvm(25195): GC_EXPLICIT freed 19734K, 85% free 4321K/28039K, paused 2ms+3ms
12-04 21:59:10.572: W/CursorWrapperInner(25195): Cursor finalized without prior close()
12-04 21:59:10.572: D/DroidGap(25195): Resuming the App
12-04 21:59:10.612: W/Adreno200-EGLSUB(25195): SetSwapInterval() interval: 0 not set
12-04 21:59:10.662: W/System.err(25195): java.lang.ClassNotFoundException: com.borismus.webintent.WebIntent
12-04 21:59:10.662: W/System.err(25195): at java.lang.Class.classForName(Native Method)
12-04 21:59:10.662: W/System.err(25195): at java.lang.Class.forName(Class.java:217)
12-04 21:59:10.662: W/System.err(25195): at java.lang.Class.forName(Class.java:172)
12-04 21:59:10.662: W/System.err(25195): at org.apache.cordova.api.PluginEntry.getClassByName(PluginEntry.java:102)
12-04 21:59:10.662: W/System.err(25195): at org.apache.cordova.api.PluginEntry.createPlugin(PluginEntry.java:78)
12-04 21:59:10.662: W/System.err(25195): at org.apache.cordova.api.PluginManager.getPlugin(PluginManager.java:258)
12-04 21:59:10.662: W/System.err(25195): at org.apache.cordova.api.PluginManager.exec(PluginManager.java:216)
12-04 21:59:10.662: W/System.err(25195): at org.apache.cordova.ExposedJsApi.exec(ExposedJsApi.java:43)
12-04 21:59:10.662: W/System.err(25195): at android.webkit.JWebCoreJavaBridge.setNetworkOnLine(Native Method)
12-04 21:59:10.662: W/System.err(25195): at android.webkit.JWebCoreJavaBridge.setNetworkOnLine(Native Method)
12-04 21:59:10.662: W/System.err(25195): at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1370)
12-04 21:59:10.662: W/System.err(25195): at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 21:59:10.672: W/System.err(25195): at android.os.Looper.loop(Looper.java:137)
12-04 21:59:10.672: W/System.err(25195): at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:789)
12-04 21:59:10.672: W/System.err(25195): at java.lang.Thread.run(Thread.java:856)
12-04 21:59:10.672: W/System.err(25195): Caused by: java.lang.NoClassDefFoundError: com/borismus/webintent/WebIntent
12-04 21:59:10.672: W/System.err(25195): ... 15 more
12-04 21:59:10.672: W/System.err(25195): Caused by: java.lang.ClassNotFoundException: com.borismus.webintent.WebIntent
12-04 21:59:10.672: W/System.err(25195): at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-04 21:59:10.672: W/System.err(25195): at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-04 21:59:10.672: W/System.err(25195): at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-04 21:59:10.682: W/System.err(25195): ... 15 more
12-04 21:59:10.682: I/System.out(25195): Error adding plugin com.borismus.webintent.WebIntent.
12-04 21:59:10.762: D/HardwareRenderer(25195): Disabling v-sync
12-04 21:59:10.812: W/Adreno200-EGLSUB(25195): SetSwapInterval() interval: 0 not set 
```

我是否设置错误？我已将 WebIntent.Java 添加到 src/com/borismus，我已将 webintent.js 添加到 assets/www，我已将插件添加到我的 config.xml，并在我的 html 文件中引用了 js。有什么我想念的吗？我正在使用 Cordova 2.2.0。

或者有没有更好的方法将图像传递到邮件应用程序？我知道适用于 iOS 的 EmailComposer，但我最初正在寻找一个 Android 解决方案。是否有任何“共享”插件可以做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:12:56.837

因此，在谷歌群组 phonegap 页面上发布此问题后，我找到了解决方案。就我而言，我将 WebIntent.java 放在了错误的文件夹中。

我将 WebIntent.java 放在 src/com/borismus 中。

但它应该在 src/com/borismus/webintent 中。

对于任何感兴趣的人，以下代码将启动相机应用程序，然后在成功时将该图片附加到使用 WebIntent 插件预先填充字段的电子邮件中：

```
 function camera()
    {
        navigator.camera.getPicture(sendEmail, onFail, { quality: 20, 
            destinationType: Camera.DestinationType.FILE_URI }); 

        function sendEmail(imageURI) { 
            var extras = {};
            extras[WebIntent.EXTRA_SUBJECT] = "Please type your name and address here.";
            extras[WebIntent.EXTRA_TEXT] = "Please type your query here.";
            extras[WebIntent.EXTRA_STREAM] = imageURI;
            window.plugins.webintent.startActivity({
                url: "johnsmith@gmail.com",
                action: WebIntent.ACTION_SEND,
                type: 'image/jpeg', 
                extras: extras 
              }, 
              function() {
                  alert("Mail sent");
              }, 
              function() {
                alert('Failed to send email');
              }
            ); 
        }

        function onFail(message) {
            alert('Failed because: ' + message);
        }

    } 
```

希望这可以帮助某人。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T06:33:02.613

作为您的参考`Logcat`，`[ClassNotFoundException: com.borismus.webintent.WebIntent]` 我认为您在定义插件时遇到问题`config.xml`..

有关更多信息，您可以查看[https://github.com/InQBarna/WebIntent/blob/master/plugin.xml](https://github.com/InQBarna/WebIntent/blob/master/plugin.xml)

# nhibernate - NHibernate DTO 映射

> ID：13724546
> 
> 赞同：5
> 
> 时间：2012-12-05T13:39:11.430
> 
> 标签：nhibernate, mapping

1.  是否可以为 DTO 对象创建映射然后查询它们而不是域？如果不解释为什么？
2.  如果我需要几个 dto 怎么办？

* * *

*   DTos 是只读的
*   ID 由 NH 自动生成
*   将来，这些 dto 将设置映射到链接的 dto。
*   我使用 DTO 来减少查询大小

    ```
    <class name="Person" table="`APP_Person`">  
        <property name="FirstName" type="string" length="512" />
        <property name="Age" type="int" /> 
        <property name="SocialNumber" type="int" />
        <property name="PassportId" type="int" />
        <property name="Salary" type="int" />
    </class>

    <class  name="PersonDTO" table="`APP_Person`">  
        <property name="FirstName" type="string" length="512" />
        <property name="Age" type="int" />
    </class> 
    ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T14:21:19.007

您不需要映射/持久化`DTO`对象。通常只读数据并发送到应用程序的其他层（Web 服务、视图等）。

您可以对返回列表的`Person`实体创建查询。`PersonDTO`看看`SetResultTransformer`方法。尝试这样的事情：

```
var query = session.CreateQuery("select p.FirstName, p.Age from Person p order by p.FirstName")
                   .SetResultTransformer(NHibernate.Transform.Transformers.AliasToBean(typeof(PersonDTO)))
                   .List<PersonDTO>(); 
```

还有你的 DTO：

```
public class PersonDTO 
{
   public string FirstName { get; set; }
   public int Age { get; set; }
} 
```

查询列的结果`hql`应该与 DTO 的属性具有相同的名称，以便 NHibernate 在构造 DTO 和水合对象时进行正确的反射。

## 林克

作为结果，您还可以使用`linq`（`DTO`或 DTO 列表）。样品：

```
var query = Session.Query<Person>().OrderBy(x => x.FirstName)
                   .Select(x = new PersonDTO() { FirstName = x.FirstName, Age = x.Age })
                   .ToList(); 
```

看这篇文章： http: [//gustavoringel.blogspot.com.br/2009/02/creating-dto-in-nhibernate-hql-using.html](http://gustavoringel.blogspot.com.br/2009/02/creating-dto-in-nhibernate-hql-using.html)

# c++ - C++(11) 中的常量右值

> ID：13724553
> 
> 赞同：10
> 
> 时间：2012-12-05T13:39:31.147
> 
> 标签：c++, gcc, c++11

为什么C++(11) 中没有 R`const int`值**？**我认为 R 值是不能在左侧的“任何东西”，而常量可以满足这一点。此代码失败：

```
int f(int && x) { return 100; }

void g() {
  const int x = 1;
  f(x);
}

error: invalid initialization of reference of type ‘int&&’ from expression
of type ‘const int’ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T13:58:59.770

^(好的，表达式1)分为三类：

1.  那些代表具有身份且无法移动的对象；
2.  那些代表具有身份且可以从中移动的对象；
3.  那些表示没有身份且可以从中移动的对象；

第一个被称为左值，第二个是xvalues，第三个是prvalues。如果我们将左值和 xvalues 放在一起，我们就有了 glvalues。Glvalues 是所有表示具有标识的对象的表达式。如果我们将 xvalues 和 prvalues 放在一起，我们就有 rvalues。右值是表示可以移动的对象的所有表达式。

有问题的表达式`x`, 是一个glvalue：可以写`&x`，所以对象显然有一个标识。

我们可以从这个表达式中移开吗？这个对象即将过期吗？不它不是。它仅在当前表达式之后的某个时间过期。这意味着它不能被移动。这使它成为一个左值。

所有这些名称可能有点令人困惑，因为 C++ 中的左值和右值不再意味着它们在 C 起源中的含义。^(C++ 的含义与在 assignment 2)的左侧或右侧完全无关。

就个人而言，我更喜欢使用Bjarne[这篇论文](http://stroustrup.com/terminology.pdf)中的术语：iM-values（而不是 lvalues）、im-values（而不是 xvalues）、Im-values（而不是 prvalues）、i-values（而不是 glvalues）、和 m 值（而不是右值）。不幸的是，这不是标准使用的术语。

* * *

¹这里的“有身份”是指“可以取其地址”；“可以移出”意味着它即将到期，要么是由于它的临时性质，要么是因为程序员通过调用`std::move`或类似的东西在类型系统中明确表示了这一点。

²你可以在赋值的左边有右值：`std::vector<int>(17) = std::vector<int>(42)`是一个有效的表达式，即使它是无用的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T14:04:36.963

> 我认为 R 值是“任何东西”，不能在 [赋值操作] 的左侧

那是 C++03 的定义`rvalue`，即便如此，它也是一种俗语，并非普遍适用。

在 C++11 中， 和 的定义`lvalue`有所`rvalue`改变。规则很复杂，标准中的个别情况会根据具体情况进行处理，但这里有一个一般的经验法则：

1.  如果您可以获取某物的地址，那么它就是`lvalue`
2.  如果表达式的类型是`lvalue`引用，则该表达式是`lvalue`
3.  如果以上都不适用，那就是`rvalue`

在您的特定情况下，您可以获取`x`（例如，它“有名字”）的地址，因此它是一个左值。

您可以在两篇优秀的文章中阅读更多关于 C++11 中左值和右值的信息：

*   [rvalue References Explained](http://thbecker.net/articles/rvalue_references/section_01.html)，作者 Thomas Becker（博客文章）
*   [通用参考](http://accu.org/var/uploads/journals/Overload111.pdf)，由 Scott Meyers 编写（重载 #111）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:56:13.787

参数类型是右值引用，标准禁止使用“引用相关”类型的左值初始化右值引用。

> 8.5.3 参考文献[dcl.init.ref]
> 
> ...
> 
> 5 ... 如果 T1 与 T2 引用相关并且引用是右值引用，则初始化表达式不应是左值。

因此，以下是错误：

```
void f (long &&);

const long x = 1;
void g () { f (x); } 
```

但以下不是：

```
void f (long &&);

const int x = 1;
void g () { f (x); } 
```

* * *

因此，错误的原因**不仅仅是**“初始化不是使用右值”，而是因为“初始化是使用与引用相关类型的左值”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:01:46.403

简单来说，您应该能够“窃取”右值的值。这是对右值进行不同处理的重点。所以右值应该是未命名的，即将在不久的将来死去的东西。

# javascript - javascript函数调用失败

> ID：13724554
> 
> 赞同：-2
> 
> 时间：2012-12-05T13:39:40.477
> 
> 标签：javascript

为什么我不能在我的 js 中使用这个函数：error: ReferenceError: new_tweet is not defined

```
 function new_tweet(){
         alert("here i am");
  }

  function add_div(){
    mydiv = document.getElementById("new_twt");
    mydiv.innerHTML="<input type='button' value='You have new conversations' onclick=new_tweet();>";
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:44:45.273

问题可能是您在某种负载处理程序中执行此操作，这意味着它`new_tweet`不是全局的，因此在您单击按钮时不可用。尝试`new_tweet`在全局范围内定义。

这是一个演示：http: [//jsfiddle.net/DUbc3/](http://jsfiddle.net/DUbc3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:43:30.043

尝试将 ' 添加到 onclick

```
<input type='button' value='You have new conversations' onclick='new_tweet()'> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:46:17.813

```
var newTweet = function (e) {
     alert("here i am");
}

function add_div(){
    var button = document.createElement("button");
    button.innerHTML = 'You have new conversations';
    button.onclick = newTweet;
    document.getElementById("new_twt").appendChild(button);
}

add_div(); 
```

见演示：http: [//jsfiddle.net/DUbc3/1/](http://jsfiddle.net/DUbc3/1/)

# git - 如何在 powershell 中捕获 git 错误消息？

> ID：13724561
> 
> 赞同：2
> 
> 时间：2012-12-05T13:39:50.373
> 
> 标签：git, powershell, psake

我正在写一个psake脚本。其中一项任务是从 Github 托管的存储库中提取文件：

```
Framework "4.0"
$ErrorActionPreference = "stop"

formatTaskName "`n##------ {0} ------##`n"

task DeployToLocalDevelopmentEnvironment {
    # other commands

    exec { git pull origin somebranch } # this is the line that fails

    # other commands
} 
```

* * *

`pull`命令失败并显示以下消息：

> 来自[https://github.com/account_name/project_name](https://github.com/account_name/project_name)

看起来其余的错误消息在某处被截断，所以我实际上无法找到问题的原因。

关于如何查看完整错误消息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:01:45.957

您是否尝试过将[Out-File](http://technet.microsoft.com/en-us/library/ee176924.aspx)作为日志机制？

```
exec { git pull origin somebranch | Out-File C:\output.txt } 
```

*如果在纯*Powershell中执行“git pull”，则不需要“exec” 。你试过没有“exec”吗？像这样：

```
git pull origin somebranch 
```

我相信您的问题在于 PSAKE 截断您的结果消息。在纯powershell中尝试一下，看看返回了什么？我什至不知道这是否可能......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:32:58.427

仍然不知道为什么会发生，但我找到了解决方法：

```
$processStartInfo = new-object system.diagnostics.processStartInfo
$processStartInfo.workingDirectory = (get-location).path
$processStartInfo.fileName = "git"
$processStartInfo.arguments = "pull origin $branch_name"
$processStartInfo.useShellExecute = $false

$process = [system.diagnostics.process]::start($processStartInfo);
$process.waitForExit(); 
```

我有一个理论，但无法证明（还）：

*   有三个潜在原因：powershell、psake、git
*   我可以通过直接从 powershell 调用 git 来排除 psake
*   从 PowerShell 调用时，所有其他命令行工具都能正确输出消息，因此排除 PowerShell
*   我怀疑问题在于 git 如何将消息输出到控制台
*   下一步是联系 PowerShell 团队以找到合适的解决方案。最好的方法是什么？

# c# - Winforms ComboBox DataBinding DisplayMember 到 SubObject 属性

> ID：13724565
> 
> 赞同：10
> 
> 时间：2012-12-05T13:39:57.867
> 
> 标签：c#, data-binding, properties, combobox

我搜索了 2 小时或更长时间，但找不到答案。所以我在这里试试：

我想知道如何（以及是否可以完成）我可以将模型列表数据绑定到 WinForms ComboBox，并使用模型属性的属性（在列表中）作为 DisplayMember 吗？请参阅此处的代码：

```
public partial class Form1 : Form
{
    private List<UserDataModel> userData = new List<UserDataModel>();

    public Form1()
    {
        InitializeComponent();

        MyInit();
    }

    public void MyInit()
    {
        var userDataModel1 = new UserDataModel();
        userDataModel1.Name = "Mike";
        userDataModel1.Phone = "555-666";
        userDataModel1.Home = new HomeDataModel();
        userDataModel1.Home.StreetName = "MikeStreet";
        userDataModel1.Home.GeoLocationX = 111;
        userDataModel1.Home.GeoLocationY = 222;

        var userDataModel2 = new UserDataModel();
        userDataModel2.Name = "Jonathan";
        userDataModel2.Phone = "777-888";
        userDataModel2.Home = new HomeDataModel();
        userDataModel2.Home.StreetName = "JonathanStreet";
        userDataModel2.Home.GeoLocationX = 333;
        userDataModel2.Home.GeoLocationY = 444;

        userData.Add(userDataModel1);
        userData.Add(userDataModel2);

        // This works as usually:
        /*
        comboBox1.DisplayMember = "Name";
        comboBox1.ValueMember = "Home";
        comboBox1.DataSource = userData;
        */

        // But this works not (either with comboBox1.DataBindings.Add() nor with BindingSource):
        comboBox1.DisplayMember = "Home.StreetName";
        comboBox1.ValueMember = "Home";
        comboBox1.DataSource = userData;

        // To drive me crazy, THAT shit works:
        textBox1.DataBindings.Add("Text", userData, "Home.StreetName");

        /*
        So how can i use a String-Property of a SubObject as ComboBox-DisplayMember ???

        BTW: To rebuild the sample, you only need a normal Forms Application and
        then drop a ComboBox and a TextBox on it. Copy that code here, and run it.
        */
    }
}

internal sealed class UserDataModel
{
    public string Name { get; set; }
    public string Phone { get; set; }
    public HomeDataModel Home { get; set; }
}

internal sealed class HomeDataModel
{
    public string StreetName { get; set; }
    public int GeoLocationX { get; set; }
    public int GeoLocationY { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-15T22:01:14.990

Just added to your code one method (event actually), and it's working.

```
public partial class Form1 : Form
{
    private List<UserDataModel> userData = new List<UserDataModel>();
    public Form1()
    {
        InitializeComponent();

        MyInit();
    }

    public void MyInit()
    {
        var userDataModel1 = new UserDataModel();
        userDataModel1.Name = "Mike";
        userDataModel1.Phone = "555-666";
        userDataModel1.Home = new HomeDataModel();
        userDataModel1.Home.StreetName = "MikeStreet";
        userDataModel1.Home.GeoLocationX = 111;
        userDataModel1.Home.GeoLocationY = 222;

        var userDataModel2 = new UserDataModel();
        userDataModel2.Name = "Jonathan";
        userDataModel2.Phone = "777-888";
        userDataModel2.Home = new HomeDataModel();
        userDataModel2.Home.StreetName = "JonathanStreet";
        userDataModel2.Home.GeoLocationX = 333;
        userDataModel2.Home.GeoLocationY = 444;

        userData.Add(userDataModel1);
        userData.Add(userDataModel2);

        // This works as usually:
        /*
        comboBox1.DisplayMember = "Name";
        comboBox1.ValueMember = "Home";
        comboBox1.DataSource = userData;
        */

        // But this works not (either with comboBox1.DataBindings.Add() nor with BindingSource):
        comboBox1.DisplayMember = "Home.StreetName";
        comboBox1.ValueMember = "Home";
        comboBox1.DataSource = userData;

        // To drive me crazy, THAT shit works:
        textBox1.DataBindings.Add("Text", userData, "Home.StreetName");

        /*
        So how can i use a String-Property of a SubObject as ComboBox-DisplayMember ???

        BTW: To rebuild the sample, you only need a normal Forms Application and
        then drop a ComboBox and a TextBox on it. Copy that code here, and run it.
        */
    }

    // To add this method - follow to my instructions below
    private void ComboBoxFormat(object sender, ListControlConvertEventArgs e)
    {
        e.Value = ((UserDataModel)e.ListItem).Home.StreetName;
    }
}

internal sealed class UserDataModel
{
    public string Name { get; set; }
    public string Phone { get; set; }
    public HomeDataModel Home { get; set; }
}

internal sealed class HomeDataModel
{
    public string StreetName { get; set; }
    public int GeoLocationX { get; set; }
    public int GeoLocationY { get; set; }
} 
```

To create this method (event), go to your form in a [Design] mode, right click on the ComboBox -> Properties.

In the top of the Properties window, click on Events (lightning icon),

look for Format in the events list below (under Property Changed) and type there some event name, let's say: ComboBoxFormat , and press Enter. That's it ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:57:52.260

好的，我有 DisplayMember 工作。您不能将“Home”用作 ValueMember 作为其对象，您必须指向其属性之一（StreetName、GeoLocationX、GeoLocationY）。

```
public partial class Form1 : Form
    {

        private List<UserDataModel> userData = new List<UserDataModel>();

        public Form1()
        {
            InitializeComponent();
            MyInit();
        }

        public void MyInit()
    {
        var mymodel = new UserDataModel("Derek", "999-999", new HomeDataModel("Sesame Street", 111, 222));

        var mymodel1 = new UserDataModel("John", "999-999", new HomeDataModel("Tin Can Alley", 333, 444));

        userData.Add(mymodel);
        userData.Add(mymodel1);

        BindingSource bs = new BindingSource();
        bs.DataSource = userData;

        comboBox1.DataSource = bs;
        comboBox1.DisplayMember = "Home.StreetName";

    }
}

internal sealed class UserDataModel
{
    public string Name { get; set; }
    public string Phone { get; set; }
    public HomeDataModel Home { get; set; }

    public UserDataModel()
    {

    }

    public UserDataModel(string name, string phone, HomeDataModel home)
    {
        this.Name = name;
        this.Phone = phone;
        this.Home = home;
    }
}

internal sealed class HomeDataModel
{
    public string StreetName { get; set; }
    public int GeoLocationX { get; set; }
    public int GeoLocationY { get; set; }

    public HomeDataModel()
    {

    }

    public HomeDataModel(string streetname, int x, int y)
    {
        this.StreetName = streetname;
        this.GeoLocationX = x;
        this.GeoLocationY = y;

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:37:48.057

[这](https://stackoverflow.com/questions/8367860/use-of-combobox-valuemember-and-displaymember/8367960#8367960)是一个类似的问题。在标记的答案中，您可以看到他们将 the 设置`BindingContext`为`Form`on the`ComboBox`并且似乎对他们有用...

```
//...
comboBox1.BindingContext = this.BindingContext; 
```

希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:54:10.283

澄清一下：ComboBox 默认始终使用托管表单 BindingContext。我用该代码对其进行了测试：

```
 var bc = comboBox1.BindingContext;
        if (bc == this.BindingContext)
        {
            if (bc.Equals(this.BindingContext))
            {
                MessageBox.Show("combobox always use same binding context as his hosting form");
            }
        } 
```

并显示了消息框。

# android - 如何在 Android 应用程序的 ontouch 事件中检索 EditText 或 ViewText 中的单词

> ID：13724567
> 
> 赞同：1
> 
> 时间：2012-12-05T13:40:12.317
> 
> 标签：android, user-interface

我有一个带有 EditText 的应用程序，其中包含一些文本。我想创建一个事件来检索我在 EditText 组件中触摸的单词。我怎么做？

提前致谢

科比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:47:57.187

你可以`selected word`从你的编辑文本中得到..

```
String text=yourEditText.getText().toString();
String slectedWord=text.subSequence(yourEditText.getSelectionStart(), yourEditText.getSelectionEnd()); 
```

# java - IDEA中的guava源代码有错误，发生了什么

> ID：13724571
> 
> 赞同：0
> 
> 时间：2012-12-05T13:40:42.403
> 
> 标签：java, intellij-idea, guava

我想研究番石榴。所以我想从源代码构建
1：git clone [https://code.google.com/p/guava-libraries/](https://code.google.com/p/guava-libraries/)
2：导入到 IDEA
3：然后 Absent 类有错误
**，错误是 Class Absent 必须要么声明为抽象，要么在 Optional** 中实现抽象方法 transform(Function) 更多信息，请参阅附件
如何解决？
![在此处输入图像描述](../Images/74b48f1538de0d4a9cab48cb5884039d.png)

![在此处输入图像描述](../Images/077c89b2359fd48e14959256c37b9a75.png)

![在此处输入图像描述](../Images/85a97fe9665f6f380e58aeb1b24e7b8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:08:18.097

抽象类 Optional 具有以下功能：

```
public abstract <V> Optional<V> transform(Function<? super T, V> function); 
```

Absent 类是这样实现的：

```
@Override public <V> Optional<V> transform(Function<Object, V> function) { 
```

这是正确的Java。我认为 Idea 在这里有一个错误，当它不能正确识别这个覆盖时。但是您应该能够编译此代码，因为编译 Idea 使用 javac 编译器。

# java - 在休眠中使用无状态会话从对象集合中删除条目

> ID：13724573
> 
> 赞同：0
> 
> 时间：2012-12-05T13:41:05.220
> 
> 标签：java, hibernate

可能吗？我尝试这样做，但它不起作用：

```
StatelessSession sess = getSessionFactory().openStatelessSession();
sess.beginTransaction();
MessageDetails md = (MessageDetails) sess.get(MessageDetails.class,1189469L);
md.setCc(null);
sess.update(md);
sess.getTransaction().commit();
sess.close(); 
```

cc 是这样定义的：

```
@ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
@JoinTable(name = "MessageEntryCc")
public Set<EmailAndName> getCc() {
    return cc;
} 
```

运行代码后，MessageEntryCc 仍然包含 message_details_id = 1189469 的条目...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:45:33.547

请`CascadeType=DELETE_ORPHAN`在您的映射中添加：

```
 @ManyToMany(fetch = FetchType.LAZY, 
                      cascade={CascadeType.ALL, CascadeType.DELETE_ORPHAN}) 
```

# javascript - ReferenceError: $未定义函数错误

> ID：13724575
> 
> 赞同：0
> 
> 时间：2012-12-05T13:41:19.023
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我的 jquery 脚本遇到了麻烦。谁应该计算旧 twitter 方式上的字符数。我开始`ReferenceError: $ is not defined`指点

```
$(function() { 
```

这是我在 Rails 应用程序上的脚本。

**索引.hml.erb**

```
<% title "Welcome #{current_user.username}" %>

<script type="text/javascript">
    $(function() {
        $('#flit_message').keyup(function(){
            var content_lenght = $(this).val().length;
            var remaining = 140 - content_length
            $('#char_count').html(remaining);
        })
    })
</script>
<%= form_for Flit.new, :html => {:id => 'new_flit_form'}    do |f| %>
    <h3 style="float: left;">What are you doing?</h3>
    <h3 id="char_count" style="float: right;font-size: 23px; font-weight: bold; color: #aaa;">140</h3>
    <div class="clear"></div>
    <!-- <div id="new_flit_form"> -->
    <%=h f.text_area :message %>
    <div id="latest_message">
        <strong>Latest: </strong><%=h @last_flits.message %>
        <%= distance_of_time_in_words_to_now(@last_flits.created_at)%> ago
    </div>
    <div id="submit_button_container">
    <%=h f.submit "update", :class => "button"  %>
    </div>
    <div class="clear"></div>

    <!-- </div> -->
    <% end %>

    <ul id= "flits_list">
        <% @flits.each do |flit| %>
            <li<% if @flits.first == flit %> class="first"<% end %>>
            <%= image_tag flit.user.gravatar_url %>
            <div class="flit_message_container">
            <%=h link_to flit.user.username %>
              <%=h flit.message %>
            <div class="time_ago">
              <%= distance_of_time_in_words_to_now(flit.created_at)%> ago
            </div>
            </div>
            <div class="clear"></div>
            </li>
            <% end %>
    </ul> 
```

**这是 application.js 文件**

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require_tree . 
```

**html页面源代码**

```
<!DOCTYPE html>
<html>
  <head>
    <title>Welcome breanne</title>
    <link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/flits.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/welcome.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <script src="/assets/defaults.js" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="JnHvVRrW5Ts6TQf+D35OByvXxEY+Gl6P5NU5dVs8r3o=" name="csrf-token" />

  </head>
  <body>
    <div id="container">
      <h1>Welcome breanne</h1>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" >
        $(function() {
            $('#flit_message').keyup(function(){
                var content_lenght = $(this).val().length;
                var remaining = 140 - content_length;
                $('#char_count').html(remaining);
            })
        })
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:44:31.057

99% 的时间这意味着 JQuery 没有被包含在本节之前的页面中。你在哪里包括它？

像这样在head标签中包含它

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" /> 
```

见：http: [//jquery.com/download/](http://jquery.com/download/)

您可能希望取消注释该文件中的 JQuery 行（删除 //）当您加载页面时，查看源代码并查看是否可以看到 jquery 包含。如果它不存在，则您的应用程序没有正确包含它。

# javascript - 如何委托准备好的功能

> ID：13724576
> 
> 赞同：0
> 
> 时间：2012-12-05T13:41:19.573
> 
> 标签：javascript, jquery

我知道 jquery 支持委托函数来添加和删除函数自定义跟随事件。前任

```
$("body").delegate("#p", "click", cfunc); 
```

但是如何在页面加载时委托功能？

已编辑------

我在我的问题中显示了更多的前代码以获取更多详细信息：:)

我有一个函数自定义名称=`cfunc()` 现在我需要在页面加载时调用它以在其中运行许多事件。

在加载的时间页面上，查看器进行一些事件（例如：调整大小，滚动......）我需要`undelegate` `cfunc()`并使用一些新的变量再次调用。

--- 编辑 2 -----

对不起大家，我会写更多的代码：

这是我要委托的功能

```
function bbbb_scroll(pos)
    {
        $(document).scroll(function() {
            var _currentpos = $(window).scrollTop();

            if (_currentpos > pos) {
                console.log('match');
            }
        });
    } 
```

现在我想在舞台就绪时将它添加到页面上

```
$(document).ready(function() {
        $(window).delegate("body", "resize", bbbb_scroll);
    }); 
```

毕竟，当用户`resize`使用浏览器的窗口时，我需要`undelegate` `bbbb_scroll`函数并使用新的 var （在`pos`变量上）再次调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:45:59.213

```
$(document).ready(function(){

    var position = 100;

    var scrollCallback = function(pos){

        var _currentpos = $(window).scrollTop();

        if (_currentpos > pos) {
            console.log('match');
        }
    };

    var resizeCallback = function(){

        $(document).unbind('scroll');

        $(document).on('scroll', function(){

            scrollCallback(position);

        });
    };

    $(window).on('resize', resizeCallback);

}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:44:48.220

这个很明显

查看[jQuery 文档](http://api.jquery.com/ready/)

```
$(document).ready(function(){
    //- do your stuff    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:46:54.583

`ready`您通过将函数（匿名或按名称）传递给方法来委托函数在文档加载时运行

匿名方法：

```
$(document).ready(function(){
   ...
}); 
```

命名函数

```
function myReadyHandler(){..}

$(document).ready(myReadyHandler); 
```

# wso2 - WSO2 Esb 任务启动和停止事件

> ID：13724583
> 
> 赞同：1
> 
> 时间：2012-12-05T13:41:43.200
> 
> 标签：wso2, osgi, wso2esb, wso2carbon, synapse

我目前正在 wso2 esb 中实现一个自定义任务，它检查服务器上的一些进程并在进程未启动时启动它们。但是，如果服务器上的 wso2 carbon 实例停止，我也需要停止这些进程。Apache synapse 任务接口只有执行方法。apache synapse 或 wso2 carbon 中是否有提供启动和停止等方法的接口，或者是否可以将突触调度程序任务转换为 osgi 包？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:41:08.330

**解决了**

希望这些信息对其他人有用。我的问题的第二部分“是否可以将突触调度程序任务转换为 osgi 包”是真正的问题，答案是肯定的。在 wso2 中，您可以编写自己的包并将其拖放到 {carbon_server_path}/repository/component/dropins 并在服务器启动时安装包。所以这里有一些代码片段显示了我的实现：

**任务执行**

```
 package com.fga.test.task;

    import org.apache.synapse.task.Task;

    public class ProcessChecker implements Task  {

    @Override
    public void execute() {

          //Check for processes and start them
    }
} 
```

**捆绑激活器**

```
 package com.ardic.arcsp.cluster.task;

    import org.osgi.framework.BundleActivator;
    import org.osgi.framework.BundleContext;

    public class Activator implements BundleActivator {

   /**
    * Initializes process list from configuration file
    */
    @Override
    public void start(BundleContext context) throws Exception {
          //Do some initialization

    }

     /**
      * Stops all processes
     */
    @Override
    public void stop(BundleContext context) throws Exception {
           //Get process list from config file and stop them
    } 
```

激活器启动和停止调用方法将分别在服务器启动和停止事件中调用。

注意：这里使用maven bundle插件创建bundle，我的工作环境是WSO2 esb 4.0.2版

# ruby-on-rails - Coffeescript / Rails 中的范围

> ID：13724601
> 
> 赞同：2
> 
> 时间：2012-12-05T13:43:03.010
> 
> 标签：ruby-on-rails, coffeescript

当我做这样简单的事情时：

```
$ ->
  $('#target').html('blabla') 
```

有用。

当我尝试：

```
$ ->
  $('#target').html('blabla').myFunction()

  myFunction = ->
    // a certain action 
```

我总是得到一个错误：`TypeError: $(...).html(...).myFunction is not a function`。

这是为什么？

正如您可能猜到的那样，我离专业人士还很远！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:48:13.677

如果你做这样的事情：

```
$ ->
  $('#target').html('blabla').myFunction()

  myFunction = ->
    alert("OK") 
```

被转化为：

```
$(function() {
  var myFunction;
  $('#target').html('blabla').myFunction();
  return myFunction = function() {
    return alert("OK");
  };
}); 
```

如您所见， myFunction 是一个包含某些结构的变量，但是当您执行 $('#target'#).html('blablabla') 时返回的对象没有名为 myFunction 的方法，这就是你得到那个错误的原因。

我不确定你想做什么，但你可以做类似的事情

```
$ ->
  myFunction = (data) ->
    alert(data)

  myFunction $('#target').html('blablabla') 
```

转换为：

```
$(function() {
  var myFunction;
  myFunction = function(data) {
    return alert(data);
  };
  return myFunction($('#target').html('blablabla'));
}); 
```

如果您正在学习咖啡脚本，那么需要考虑转换的好网站是[http://js2coffee.org/](http://js2coffee.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:48:25.100

这不是 CoffeeScript 问题。您没有定义可以在 jQuery 对象上调用的 jQuery 插件，而只是一个常规函数。看看这里：[http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# vba - 将定义的范围复制到另一个工作表 VBA 上的下一个可用列中

> ID：13724602
> 
> 赞同：0
> 
> 时间：2012-12-05T13:43:03.367
> 
> 标签：vba, excel-2003

我试图将指定的愤怒从一个工作簿粘贴到另一个工作簿，我指定的范围称为 SourceRange，其目的地是 TargetRange。

但是，如果我的 TargetRange 工作簿的 c2 列中存在数据，我需要将 SourceRange 粘贴到我的 TargetRange 中的下一个可用列中。

如果 c2 中不存在数据，则下面的代码当前将 SourceRange 复制为黄色，如果有数据，则将其变为绿色，绿色实例需要粘贴到 c2 之后的下一个可用列中，因此 d2。

我知道偏移功能，但我不确定应该在哪里使用它。

```
 Select Case MasterWorkbook.ActiveSheet.Range("c2") = ""

Case True
' The opened file automatically becomes the new active workbook and active worksheet.

Set SourceRange = ActiveSheet.Range("c2:c26")
Set TargetRange = MasterWorkbook.ActiveSheet.Range("c2:c29")
' Copy cell values one at a time from the source range to the target range.

For Row = 2 To 29
    TargetRange.Cells(Row, 1).Value = SourceRange.Cells(Row, 1).Value
Next

ActiveWorkbook.Close

' Set background colour of target range.
TargetRange.Select
With Selection.Interior
    .ColorIndex = 6
    .Pattern = xlSolid

End With

Case False

' The opened file automatically becomes the new active workbook and active worksheet.

Set SourceRange = ActiveSheet.Range("c2:c26")
Set TargetRange = MasterWorkbook.ActiveSheet.Range("c2:c29")
' Copy cell values one at a time from the source range to the target range.

'Sheets.Add.Name = "workbookname"
For Row = 2 To 29
    TargetRange.Cells(Row, 1).Value = SourceRange.Cells(Row, 1).Value

Next

ActiveWorkbook.Close

' Set background colour of target range.
TargetRange.Select
With Selection.Interior
    .ColorIndex = 10
    .Pattern = xlSolid

End With
End Select 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:18:07.837

尝试这个

```
Sub test()
     Dim SourceRange As Range
     Dim TargetRange As Range
     ' The opened file automatically becomes the new active workbook and active worksheet.

     Set SourceRange = ActiveSheet.Range("c2:c26")
     Set TargetRange = MasterWorkbook.ActiveSheet.Range("b3")
     If TargetRange.Text <> "" then
         Set TargetRange = TargetRange.End(xlToRight).Offset(0, 1)
     End If
     Set TargetRange = MasterWorkbook.ActiveSheet.Range(TargetRange, TargetRange.Offset(25, 0))
     ' Copy cell values ALL AT ONCE from the source range to the target range.

     SourceRange.Copy
     TargetRange.PasteSpecial xlPasteValues

     ActiveWorkbook.Close

     ' Set background colour of target range.

     With TargetRange.Interior
         .ColorIndex = IIf(TargetRange.Column = 3, 6, 10)
         .Pattern = xlSolid
     End With
End Sub 
```

我建议您逐行浏览它，以便您了解正在发生的事情。

# c# - Try Catch finally - 处理掉一个阅读器

> ID：13724611
> 
> 赞同：0
> 
> 时间：2012-12-05T13:43:30.750
> 
> 标签：c#

在 C# 中，我`TRY..CATCH..FINALLY`在代码中使用了一个块来执行存储过程。

如果有异常，那么`FINALLY`我想关闭阅读器 -`PolicyResult`以及连接。

但是，我收到一个错误

> *当前上下文中不存在名称 PolicyResult*

`PolicyResult`是中定义的DataReader，但在该部分`TRY`中似乎无法识别。`FINALLY`

为什么？

```
 public static IEnumerable GetPolicies(int? MasterPkgID)
        {
            // Create a list of policies belonging to the master package.
            List<AdditionalInterestPolicyData> additionalInterestPolicyData = new List<AdditionalInterestPolicyData>();

            // Set the SQL connection to the database.
            SqlConnection objConn = new SqlConnection(ConfigurationManager.ConnectionStrings["QUESTIONNAIRE2"].ConnectionString);

            try
            {
               // Open the connection.
               objConn.Open();

               // Get the list of policies by executing a stored procedure.
               SqlCommand PolicyCmd = new SqlCommand("p_expapp_get_policy_detail_by_master_pkg", objConn);
               PolicyCmd.Parameters.Clear();
               PolicyCmd.CommandType = CommandType.StoredProcedure;
               PolicyCmd.Parameters.Add("@a_master_package_iden_key", SqlDbType.Int).Value = MasterPkgID;

               SqlDataReader PolicyResult = PolicyCmd.ExecuteReader();

               // Loop thru the results returned.
               while (PolicyResult.Read())
               {
                  // Add to the list of policies - creates a new row for the collection.
                  additionalInterestPolicyData.Add(new AdditionalInterestPolicyData(
                                                         Int32.Parse(PolicyResult["affiliate_id"].ToString()),
                                                         Int32.Parse(PolicyResult["master_package_iden_key"].ToString())
                                                                                   )
                                                  );
               }
            }
            catch (Exception ex)
            {
                bError = true;
            }
            finally
            {
                PolicyResult.Close();
                objConn.Close();
            }

            return additionalInterestPolicyData;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:46:38.497

考虑使用`using`关键字

```
using (System.Data.SqlClient.SqlDataReader r = PolicyCmd.ExecuteReader())
{
    //DO STUFF
} 
```

您还可以定义和对象`using`的范围。范围关闭后，对象将被释放。`SqlConnection``SqlCommand`

```
using (System.Data.SqlClient.SqlConnection connection = new System.Data.SqlClient.SqlConnection())
{
    ...
    using (System.Data.SqlClient.SqlCommand command = new System.Data.SqlClient.SqlCommand())
    {
        ...
        using (System.Data.SqlClient.SqlDataReader reader = new System.Data.SqlClient.SqlDataReader())
        {
            //DO STUFF
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T13:45:54.073

因为您在 try 块中声明的所有内容在除嵌套和父块之外的其他块中不可见。对外宣布。

```
 SqlDataReader PolicyResult=null;
 try
 {
   ...
   PolicyResult = PolicyCmd.ExecuteReader();
 } 
```

比检查它是否不为空

```
 finally
 {
   if(PolicyResult!=null) PolicyResult.Close();
   objConn.Close();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:49:09.273

在 中定义的任何内容仅*在.****中***可见。如果你想在你的块中访问 - 你需要在块*外*声明它。`try {...}`*`try { ... }``PolicyResult``finally`*`try { ... }`**

 **这样做的首选方法是使用一个`using (....) { .... }`块，但是，它会自动保证正确处理并基本上使`finally`块过时：

```
try
{
    // Open the connection.
    objConn.Open();

    // Get the list of policies by executing a stored procedure.
    using (SqlCommand PolicyCmd = new SqlCommand("p_expapp_get_policy_detail_by_master_pkg", objConn))
    {
           PolicyCmd.Parameters.Clear();
           PolicyCmd.CommandType = CommandType.StoredProcedure;
           PolicyCmd.Parameters.Add("@a_master_package_iden_key", SqlDbType.Int).Value = MasterPkgID;

           using (SqlDataReader PolicyResult = PolicyCmd.ExecuteReader())
           {
               // Loop thru the results returned.
               while (PolicyResult.Read())
               {
                  // do your stuff here....
               }
           }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T13:46:06.540

PolicyResult 在 try 块的范围内定义，因此在它之外不可用（例如，在 finally 块中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:48:29.687

那是因为它们在不同的范围内。

尝试在 try catch 之前声明变量：

```
SqlDataReader PolicyResult;

try
{
    // assign PolicyResult
}
catch
{
}
finally
{
    // use PolicyResult
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T13:46:21.157

错误是正确的，它确实不存在，因为当您使用 try/catch 创建一个**范围**时，在该范围内创建的任何变量都不会在范围外知道。

您可以通过将 decleration 移至try/catch 块*之前轻松解决此问题：*

```
SqlDataReader PolicyResult;
// Other variable declerations

try
{
}
finally
{
  // PolicyResult was decleared OUTSIDE the try block so it is known here.
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T13:46:37.037

在语句`PolicyResult`之前定义：`try`

```
SqlDataReader PolicyResult = null; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-05T13:53:04.107

您至少需要在 try 块之外声明 PolicyResult ，我也建议在外面实例化它。像这样的东西应该工作：

```
public static IEnumerable GetPolicies(int? MasterPkgID)
{
    // Create a list of policies belonging to the master package.
    List<AdditionalInterestPolicyData> additionalInterestPolicyData = new List<AdditionalInterestPolicyData>();

    // Set the SQL connection to the database.
    SqlConnection objConn = new SqlConnection(ConfigurationManager.ConnectionStrings["QUESTIONNAIRE2"].ConnectionString);

    SqlDataReader PolicyResult = null;

    try
    {
        // Open the connection.
        objConn.Open();

        // Get the list of policies by executing a stored procedure.
        SqlCommand PolicyCmd = new SqlCommand("p_expapp_get_policy_detail_by_master_pkg", objConn);
        PolicyCmd.Parameters.Clear();
        PolicyCmd.CommandType = CommandType.StoredProcedure;
        PolicyCmd.Parameters.Add("@a_master_package_iden_key", SqlDbType.Int).Value = MasterPkgID;

        PolicyResult = PolicyCmd.ExecuteReader();
        // Loop thru the results returned.
        while (PolicyResult.Read())
        {
            // Add to the list of policies - creates a new row for the collection.
            additionalInterestPolicyData.Add(new AdditionalInterestPolicyData(
                                                    Int32.Parse(PolicyResult["affiliate_id"].ToString()),
                                                    Int32.Parse(PolicyResult["master_package_iden_key"].ToString())
                                                                            )
                                            );
        }
    }
    catch (Exception ex)
    {
        bError = true;
    }
    finally
    {
        if(PolicyResult != null) PolicyResult.Close();
        objConn.Close();
    }

    return additionalInterestPolicyData;
} 
```

然而值得注意的是，这可能不是最好的方法。首先，您可能应该已经打开了数据库连接。为每个事务打开和关闭数据库连接变得非常混乱非常快。您很容易忘记关闭连接，如果有错误日志记录可能会根据上下文进行欺骗。如果这是一个 Web 应用程序，最好通过会话管理系统初始化连接，该系统将在页面加载后或在执行第一个查询时立即打开连接。这样，您的连接打开和关闭逻辑都在一个地方。然后可以安全地假设连接确实在任何后续代码中连接，并且您可以更轻松地处理任何特定于事务的错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-05T13:46:44.737

如果您希望在 catch 和/或 finally 中使用它，请在 try 块之前声明 SqlDataReader PolicyResult

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-05T13:47:02.813

**PolicyResult 对象在try**块的范围内声明，因此它不存在或无法从**finally**块中访问。将声明移到连接对象声明旁边的 try 之外。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-05T13:47:22.227

try {} 定义了一个与 finally {} 分开的范围

您必须在 try 和 finally 之外声明 PolicyResult，将其初始化为 null，并在关闭之前检查 finally 中是否为 null。**

# objective-c - 如何以不同样式格式化日期？

> ID：13724612
> 
> 赞同：-4
> 
> 时间：2012-12-05T13:43:30.080
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我必须格式化日期字符串： **2012 年 12 月 4 日星期二**

变成这种格式：

**2012-12-04**

我正在使用此代码，但我不知道应该使用哪个正确的**setDateFormat**字符串来获得所需的结果。

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dddd d M YYYY"];
NSDate *date = [dateFormat dateFromString:tempDate]; 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:50:49.030

yyyy-MM-dd（假设您的示例中的 12 是月份）

这一切都在[NSDateFormatter 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)中的“使用格式字符串指定自定义格式”下进行了解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:00:46.740

使用以下代码完成任务！

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EEEE d MMMM yyyy"];
    NSDate *date = [dateFormat dateFromString:tempDate];

    // Converts date object to desired output format
    [dateFormat setDateFormat:@"YYYY-MM-dd"];
    NSString* formattedDateStr = [dateFormat stringFromDate:date]; 
```

# objective-c - 我需要缩放 ScrollView 中 UIView 中的 UIImageview

> ID：13724622
> 
> 赞同：0
> 
> 时间：2012-12-05T13:44:02.993
> 
> 标签：objective-c

我需要缩放 ScrollView 中 UIView 中的 UIImageview。我试过这个：

```
[scroll setMinimumZoomScale:2];
[scroll setZoomScale:10]; 
```

但它不起作用为什么？

我实现了这个方法

```
 - (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {

return img1; 
```

}

它可以工作，但会移动其他页面的图像并停止滚动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:55:22.147

你设置了最大缩放比例吗？它的默认值为 1.0。

定义：

```
@property(nonatomic) float maximumZoomScale;     // default is 1.0\. must be > minimum zoom scale to enable zooming 
```

尝试：

```
[scroll setMinimumZoomScale:2];
[scroll setMaximumZoomScale:12];
[scroll setZoomScale:10]; 
```

# javascript - Backbone.js 错误报告实践

> ID：13724624
> 
> 赞同：1
> 
> 时间：2012-12-05T13:44:06.430
> 
> 标签：javascript, backbone.js, error-logging, error-reporting

我正在设计一个相当健壮的富客户端应用程序，我倾向于将客户端代码基于 Backbone，并且我对可用/推荐的错误报告实现感到好奇。

由于我们对胖客户端代码的依赖，我们想尽可能多地了解发生的 javascript 错误。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:13:57.573

我建议让您的主`App`命名空间对象扩展`Backbone.events`并侦听“错误”事件并相应地报告详细信息。这将是聚合所有错误并统一报告它们的一个很好的中心位置。您可以结合各种技术来实际记录错误，包括向用户显示通知、将一些详细信息添加到 DOM 中的隐藏节点以获得技术支持，或者将详细信息发送到 Web 上的远程服务。

然后在整个代码库中，您将需要实际检测/捕获错误（这通常意味着显式编码以在 JavaScript 中检查它们），收集相关信息（可能是一个不错的堆栈跟踪），并在`App`事件总线。这可能是错误，例如渲染视图时应该存在的 DOM 选择器丢失、从服务器接收到的意外数据等。

对于 AJAX/HTTP 请求的错误，您可以`Backbone.sync`在那里覆盖并添加额外的错误报告。这是一个很好的中心位置，您与服务器的所有交互都将在这里发生。遵循相同的模式来检测错误，收集详细信息，将“错误”事件触发到主`App`事件总线，然后如果可能的话允许应用程序继续，或者如果错误不可恢复，则优雅地降级/失败。

# asp.net - 使用 LinqToSql 验证错误 (Visual Studio 2010)

> ID：13724628
> 
> 赞同：0
> 
> 时间：2012-12-05T13:44:29.560
> 
> 标签：asp.net, linq-to-sql

我正在尝试`LinqToSql`在 Visual Studio 2010（Asp.net，C#）中使用。插入/删除/更新记录工作得很好，但如果我在一个`int`字段中写字母，程序会以一种不漂亮的方式中断。

在我的`DataClasses.Designer`我有：

```
partial void Insertproduct(product instance); 
```

我添加了其他类：

```
public partial class product
{

    partial void OnPriceChanging(string value)
    {
        Regex Price = new Regex("^[A-Z0-9 a-z]*$");
        if (Precio.IsMatch(value) == false)
        {
            throw new Exception("Just numbers");
        }
    }

} 
```

我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:48:36.357

使用 int.TryParse 如果字符串无法转换为 int，它将返回 0。

```
int number;
bool IsNumber = int.TryParse("someString", out number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:55:45.643

您使用的正则表达式不适用于验证“仅数字”。用这个：

```
public partial class Product
{

    partial void OnPriceChanging(string value)
    {
        Regex price = new Regex("^[0-9]*$");
        if (!price.IsMatch(value))
        {
            throw new Exception("Just numbers");
        }
    }

} 
```

# spotify - 使用 Spotify-API 获取曲目的封面

> ID：13724646
> 
> 赞同：3
> 
> 时间：2012-12-05T13:45:56.903
> 
> 标签：spotify

有没有办法通过 spotify-API 获取曲目的封面？我找不到任何照片文件的路径。

此致！

# python - Pydev PyUnit 使用 thread.join 确保所有线程都加入时出现问题

> ID：13724653
> 
> 赞同：6
> 
> 时间：2012-12-05T13:46:11.247
> 
> 标签：python, eclipse-plugin, python-2.7, pydev, python-unittest

我在使用 pydev 测试我的测试一直挂起的地方时遇到问题。我已经深入研究了这个问题，并且知道根本原因是什么。我提供了以下代码示例，可用于重现该问题。

我主要在 Centos 6.3、python 2.7、eclipse juno、pydev 2.7.1 上进行测试，但是该问题也出现在具有类似设置的 windows 7 上。

我有一个 python 脚本，它作为服务器不同线程的进程启动器运行（都在第三方库中，所以我不能退出系统的那一侧）。

为了确保所有线程都在我的 process.py 结束时完成，我有一段代码尝试在退出之前加入所有线程。

```
 for t in threading.enumerate():               
     if t.getName() != 'MainThread':
         t.join() 
```

这在正常的生产代码中工作正常。

在 Eclipse 中使用 pydev 在 PyUnit 中运行测试时会出现此问题。额外的线程被添加到 python 中，导致我的测试挂起。

如果我使用 Run As -> Python Run 启动我的程序，我的代码将按预期运行并正常退出。如果我使用 Run As -> Python unit-test 启动我的程序，测试总是挂起。

如果我查看可用的线程，问题就会变得清晰。使用提供的测试代码示例，我可以看到当只是将测试作为 python 运行运行时，显示了以下线程（如预期的那样）

```
Thread:  <bound method _MainThread.getName of <_MainThread(MainThread, started 140268135126784)>> 
Thread:  <bound method ThreadClass.getName of <ThreadClass(Thread A, started 140268006471424)>>
Thread:  <bound method ThreadClass.getName of <ThreadClass(Thread B, started 140267927631616)>> 
```

当我将测试作为单元测试运行时

```
Thread:  <bound method _MainThread.getName of <_MainThread(MainThread, started 139904571213568)>>
Thread:  <bound method WriterThread.getName of <WriterThread(pydevd.Writer, started daemon 139904379361024)>>
Thread:  <bound method ThreadClass.getName of <ThreadClass(Thread A, started 139904130479872)>>
Thread:  <bound method ThreadClass.getName of <ThreadClass(Thread B, started 139904119990016)>>
Thread:  <bound method PyDBCommandThread.getName of <PyDBCommandThread(pydevd.CommandThread, started daemon 139904358381312)>>
Thread:  <bound method ReaderThread.getName of <ReaderThread(pydevd.Reader, started daemon 139904368871168)>>
Thread:  <bound method ServerComm.getName of <ServerComm(Thread-4, started 139904345736960)>> 
```

python 添加的额外线程似乎破坏了这段代码。当我的代码尝试加入 ServerComm 或 pydev.Writer 时，它会挂起。

我知道我可以尝试不按名称加入这些线程，但是这样我正在更改生产代码来处理这个问题，我不太热衷于那个解决方案。以前有没有其他人遇到过这个问题并找到了一个好的解决方法？对此的任何帮助将不胜感激。以下是该问题的示例代码。

示例**test_process.py**

```
import sys
import traceback
import unittest

class TestUBProcessManager(unittest.TestCase):
    def setUp(self):
        pass

    def runTest(self):
        globalsDict = {'sys':sys, '__name__':'__main__'}

        haveException = False
        try:
            execfile('Process.py', globalsDict)
        except Exception, detail:
            haveException = True
            traceback.print_exc()

        self.assertFalse(haveException)

if __name__ == '__main__':
    unittest.main() 
```

示例**流程.py**

```
import threading                                                                                                    
import time                                                                                                         

class ThreadClass(threading.Thread):                                                                                

    def __init__(self, threadName, threadRunCount,threadSleep):                                                     
        threading.Thread.__init__(self)                                                                             
        self.name = threadName;                                                                                     
        self.runCount = threadRunCount;                                                                             
        self.sleepTime = threadSleep;                                                                               

    def run(self):                                                                                                  
        for i in range (1,self.runCount):                                                                           
            print "\t",self.name, "Working";                                                                        
            time.sleep(self.sleepTime);                                                                             

class Launcher(object):                                                                                             
    def __init__(self):                                                                                             
        print "Init Threads";                                                                                       
        self.threadA = ThreadClass("Thread A",3,2)                                                                  
        self.threadB = ThreadClass("Thread B",7,2)                                                                  

    def launchProcess(self):                                                                                        
        print "Starting Threads";                                                                                   
        self.threadA.start();                                                                                       
        self.threadB.start();                                                                                       
        time.sleep(2);                                                                                              

if __name__ == '__main__':                                                                                          
    launcher = Launcher()                                                                                           
    try:                                                                                                            
        launcher.launchProcess()                                                                                    
    finally:                                                                                                        
        print "Available Threads Needed To Finish"                                                                  
        for t in threading.enumerate():                                                                             
            print "Thread: ",t.getName                                                                              

        print "Attempt to join threads to ensure all threads are finished"                                          
        for t in threading.enumerate():                                                                             
            print "About To Join : ",t.getName                                                                      
            if t.getName() != 'MainThread':                                                                         
                    t.join()                                                                                        
    print "All Done" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:37:11.813

以防其他人遇到这个问题。我决定更改我的代码以检查测试开始时存在哪些线程。

```
if __name__ == '__main__':                                                                                          
    initialThreads = [];    
    for t in threading.enumerate():
        initialThreads.append(t);

    launcher = Launcher()                                                                                           
    try:                                                                                                            
        launcher.launchProcess()                                                                                    
    finally:                                                                                                        
        print "Available Threads Needed To Finish"                                                                  
        for t in threading.enumerate():                                                                             
        print "Thread: ",t.getName                                                                              

        print "Attempt to join threads to ensure all threads are finished"                                          
        for t in threading.enumerate():                                                                             
            print "About To Join : ",t.getName                                                                      
            if t not in initialThreads:                                                                         
                t.join()                                                                                        
    print "All Done" 
```

# c# - 通过 c# 代码将 appSettings 部分添加到 web.config

> ID：13724661
> 
> 赞同：2
> 
> 时间：2012-12-05T13:46:25.760
> 
> 标签：c#, .net, web-config

我只是通过此代码阅读 web.config 文件

```
Configuration configuration = WebConfigurationManager.OpenWebConfiguration("~");

AppSettingsSection appSettingsSection = (AppSettingsSection)configuration.GetSection("appSettings");

if (appSettingsSection != null)
{
         appSettingsSection.Settings.Remove(key);
         config.Save();
} 
```

`appSettings`当文件中存在时，它可以正常工作`web.config`。

如果文件不存在，我的查询是`appSettings`在文件中添加标签。`web.config`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:30:31.960

在这里，我添加了值为“myValue”的新应用程序密钥“myKey”：

```
 System.Configuration.KeyValueConfigurationCollection settings;
        System.Configuration.Configuration config;

        System.Configuration.ExeConfigurationFileMap configFile = new System.Configuration.ExeConfigurationFileMap();
        configFile.ExeConfigFilename = "App.config";
        config = System.Configuration.ConfigurationManager.OpenMappedExeConfiguration(configFile, System.Configuration.ConfigurationUserLevel.None);
        settings = config.AppSettings.Settings;

        config.AppSettings.Settings.Add(new System.Configuration.KeyValueConfigurationElement("myKey", "myValue"));
        config.Save(); 
```

所以关键是加载特定的配置（添加你希望的 appSettings），添加新的密钥并保存它。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:02:40.923

You can check if your `web.config` has `appSettings` tag or not like this;

```
string s = ConfigurationManager.AppSettings["appSettings"];

if (!String.IsNullOrEmpty(s))
{
    // Key exists
}
else
{
    // Key doesn't exist
} 
```

I couldn't find anything adding dynamically `appSettings` tag but found three-part series about .NET configuration that could be quite usefull.

*   [Unraveling the mysteries of .NET 2.0 configuration](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration.aspx)
*   [Decoding the mysteries of .NET 2.0 configuration](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration2.aspx)
*   [Cracking the mysteries of .NET 2.0 configuration](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration3.aspx)

# jquery - 在css中分配屏幕的宽度和高度属性

> ID：13724662
> 
> 赞同：0
> 
> 时间：2012-12-05T13:46:25.577
> 
> 标签：jquery, jquery-ui, css

如何将css中的宽度和高度值分别指定为屏幕的宽度和高度。我尝试使用以下 CSS，但现在为我工作。

```
.classname
 {
     height:100%;
     width:100%;
 } 
```

**编辑**

我也使用过 Jquery 代码

```
 $("#PanelGrid").width = $(window).width(); 
```

但不起作用。

这是代码。

```
<table style="font-family: calibri; height: 100%;" border="0px" cellpadding="0" cellspacing="0"
    width="100%">

   <tr>
        <td style="font-family: Calibri">
            <div id="PanelGrid" style="overflow:auto;"> </td>
   <tr></table> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:56:18.313

CSS 中的百分比高度是一件有趣的事情。转到这个小提琴[http://jsfiddle.net/b5ww2/5/](http://jsfiddle.net/b5ww2/5/)并尝试执行以下操作：

1.

```
#div1 {
    height: 100%;
    position: absolute;
}​ 
```

2.

```
#div1 {
    height: 50%;
    position: absolute;
}​ 
```

3.

```
#div1 {
    height: 100%;
}​ 
```

4.

```
#div1 {
    height: 50%;
}​ 
```

您应该看到结果：当定位正常（静态）时，元素的百分比高度实际上与其父元素的高度相关。当您使用绝对定位时，视口（屏幕）充当元素的父元素，您可以按照预期使用百分比高度。

因此，如果您知道元素包含块的高度相对于视口的绝对高度，则可以简单地相应地调整百分比高度。否则，您可能需要使用绝对定位并处理随之而来的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:02:46.617

如果类 .classname 的元素有父元素，它将使用*父元素的 100% 的*高度和宽度，而不是浏览器窗口的。

尝试使用绝对定位强制它，[就像在这个例子](http://andrewpeace.com/css-full-screen-div.html)中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:25:58.487

如果您试图使 div 用完窗口的全部高度和宽度，并且即使浏览器大小发生更改也*始终使用全部高度/宽度，您可以尝试：*

```
.classname {
    position:absolute;
    top:0;
    right:0;
    bottom:0;
    left:0;
    margin:0;
} 
```

这会将容器的外部边界放在视口的边缘。

希望有帮助。

# c# - 如何使用 Windows Phone 8 读取任何 NFC 二进制消息

> ID：13724677
> 
> 赞同：1
> 
> 时间：2012-12-05T13:47:03.667
> 
> 标签：c#, nfc, windows-phone-8, proximity

我正在为 Windows Phone 开发一个 NFC 应用程序，我想订阅**任何**二进制消息。我怎样才能实现这样的功能`nfc.SubscribeForAnyMessage( HandleNFCMessage);`？目前我只能订阅特定的消息类型，例如`nfc.SubscribeForMessage("NDEF", HandleNFCMessage);`

谢谢，

能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:47:06.397

您必须将 MessageType 指定为订阅消息的唯一方法是您已经提到的方法。要查看可以指定的 MessageTypes，请参阅 PublishBinaryMessage 的文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh701129.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701129.aspx)

也许如果您将“Windows”指定为 MessageType，您将获得所有二进制消息，但我现在无法测试。您始终可以为您的应用订阅多个 MessageType。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:10:12.710

什么是“二进制 NFC”消息？在 WP8/Win8 proxmity 框架内处理的所有消息都必须具有消息类型。在这种情况下，“二进制消息”只是具有字节数组 (IBuffer) 有效负载但仍具有消息类型的消息。

我不相信可以订阅 NFC 消息的通配符。您绝对可以注册[一些基本类型的 MessageType](http://msdn.microsoft.com/en-us/library/windows/apps/hh701129.aspx)（如 NDEF 等），但每个应用程序都可以声明自己的自定义消息类型，如不会被通配符捕获的 Windows.MyApp.MyMessage。

你到底想做什么？如果您只是想知道 NFC 标签何时可以覆盖它，请考虑使用[DeviceArrived](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.proximity.proximitydevice.devicearrived.aspx)和[DeviceDeparted](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.proximity.proximitydevice.devicedeparted.aspx)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T13:12:53.303

Windows Phone 8 仅支持“NDEF”格式的标签。 [http://www.developer.nokia.com/Community/Wiki/Use_NFC_tags_with_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/Use_NFC_tags_with_Windows_Phone_8)

# azure - Azure 网站无法访问 Azure DB

> ID：13724682
> 
> 赞同：10
> 
> 时间：2012-12-05T13:47:12.730
> 
> 标签：azure, web-config, azure-sql-database, azure-storage, azure-web-app-service

这个错误让我发疯，我什至无法重现它！

我已将我的网站发布到 Windows Azure 和 SQL Azure，效果很好。突然之间，它不起作用，我收到了这个令人讨厌的错误：

这是我得到的错误：

[http://jsfiddle.net/shimmy/pcS7g/embedded/result](http://jsfiddle.net/shimmy/pcS7g/embedded/result)

这是错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我想强调我可以通过 SSMS 或 VS 访问 SQL 并查看我的表等。

我不知道是什么导致了这个恼人的错误，每次部署后都会一次又一次地发生。

堆栈跟踪：

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5295167
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5307115
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +920
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +5309659
   System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions) +38
   System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +5311874
   System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) +143
   System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry) +83
   System.Data.SqlClient.SqlConnection.Open() +96
   System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString) +76

[HttpException (0x80004005): Unable to connect to SQL Server database.]
   System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString) +131
   System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install) +89
   System.Web.Management.SqlServices.Install(String database, String dbFileName, String connectionString) +27
   System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString) +386 
```

**更新**

以下是出现在服务器 web.config 上的连接字符串的副本：

```
<connectionStrings>
  <add name="Context" connectionString="Data Source=tcp:abcdefg.database.windows.net,1433;Initial Catalog=Database;User Id=shimmy@tcp:abcdefg;Password=my123password;" providerName="System.Data.SqlClient" />
  <add name="Storage" connectionString="DefaultEndpointsProtocol=https;AccountName=accountname;AccountKey=accountkey==" />
</connectionStrings> 
```

我什至尝试从服务器的 web.config 中完全删除连接字符串。我不知道这`App_Data`东西是从哪里来的！

我的`DbContext`样子是这样的：

```
public Context()
  : base("name=Context") //I also tried "Context" alone
{
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-22T19:19:15.617

我知道这是一个非常古老的帖子，但我只是在同一个问题上作斗争......

我遇到了同样的问题，虽然我不明白，但我发现如果我当前登录（在我的网站上，而不是 Azure 控制台上），我需要注销然后重新登录，这个数据库错误就会消失. 这对我来说毫无意义，但它在我部署后对我有用。我已经部署了很多次并且一切正常（无需注销/登录）。有时它会跳入这种模式。不知道那里发生了什么。

它与 web.config 中的连接字符串无关 - 它们都被正确转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T15:28:57.347

您的应用程序似乎希望能够在 SQL Server Express 的本地实例上使用项目中的附件设置数据库。您的错误消息中的关键行是：

> 连接字符串使用应用程序 App_Data 目录中的数据库位置指定本地 Sql Server Express 实例。

您可能需要更新配置文件中的连接字符串以匹配 Azure 网站中的连接字符串。使用 SQL Server 设置网站后，可以在 Azure 仪表板中获取此信息，并通过同一仪表板进行设置。

这里有很好的说明：[http ://blog.davidebbo.com/2012/09/managing-database-connections-in-azure.html](http://blog.davidebbo.com/2012/09/managing-database-connections-in-azure.html)

# c++ - Double to `unsigned long long` 导致内存（堆栈？）损坏

> ID：13724684
> 
> 赞同：5
> 
> 时间：2012-12-05T13:47:14.613
> 
> 标签：c++, casting, visual-studio-2012, unsigned-long-long-int

以下代码有什么问题（崩溃）：

```
#include <string>
#include <iostream>

void foo(std::string str, unsigned long long val)
{
    std::cout<< str<< " "<< val<< std::endl; // Crashes if commented as well
}

int main()
{
    double d = 30.0;
    foo("abc", d);
} 
```

Visual Studio 2012/调试/Win32

它适用于 x64 以及如果我们更改`unsigned long long`为`long long`甚至`unsigned long`

此代码段崩溃。在其他情况下，函数参数的地址会发生变化。

我怀疑它与`_stol2`将转换`double`为`unsigned long long`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:44:52.150

作为错误[提交给 Microsoft （已接受）](https://connect.microsoft.com/VisualStudio/feedback/details/773581/casting-double-to-unsigned-long-long-causes-memory-stack-corruption)

# linux - kthread & interupt -- handler --- 有没有可能

> ID：13724691
> 
> 赞同：2
> 
> 时间：2012-12-05T13:47:31.293
> 
> 标签：linux, linux-kernel, linux-device-driver

Linux驱动程序是否有可能拥有一个kthread、中断句柄和系统调用。意味着linux内核内核允许以上三个吗？

中断处理程序将在中断时保存来自通信通道的接收数据。
Kthread 会将数据传输出通信通道。
系统调用可用于配置驱动程序或获取其状态。

此外，如果中断处理程序和 kthread 正在使用 - 相同的硬件寄存器 - 那么我们如何保护这个关键部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:52:40.197

> 中断处理程序将在中断时保存来自通信通道的接收数据。

设备驱动程序的中断服务例程 ISR 通常处理接收条件、传输条件以及错误和状态事件的中断。已经有设备具有多条中断线，但现在几乎每个设备都只有一条中断线，并且必须询问中断状态寄存器以确定产生中断的条件。

仅使用 ISR 进行接收是不寻常的。

> Kthread 会将数据传输出通信通道。

与设备驱动程序关联的线程更可能是用于“下半部分处理”的小任务。这是一种在 ISR 中最小化处理时间的技术，同时对原始数据进行一些处理，尤其是在接收到的数据包/帧上。

使用 kthread 传输数据似乎不合常规，并且可能会导致问题（例如可避免的临界区）。如果线程正在执行轮询编程 I/O，因为没有可用的 DMA 和 Tx 中断，那么这种方案可能是合理的。

> 系统调用可用于配置驱动程序或获取其状态。

Linux 设备驱动程序已经定义了一组入口点：[Linux 设备驱动程序入口点](https://stackoverflow.com/questions/12917198/linux-device-driver-program-where-the-program-starts/12923107#12923107)
这些入口点大部分是由用户应用程序通过系统调用间接访问的。
不太可能专门为驱动程序创建系统调用。

> 此外，如果中断处理程序和 kthread 正在使用 - 相同的硬件寄存器 - 那么我们如何保护这个关键部分？

内核中的关键部分通常由自旋锁保护。
但是，排除锁会增加延迟并降低系统响应能力。
一个好的系统设计可以避免创建（不必要的）临界区。如果对设备寄存器的访问被分配到中断级别和任务级别，那么可能只需要一个空闲使用的自旋锁。

因此，一个 kthread、一个中断处理程序和系统调用可以与 Linux 驱动程序相关联，但不一定是您指定的方式。

# 附录

> 但就我而言，我期待使用 mmap 系统调用来发送和接收来自驱动程序的数据。

您需要澄清使用的意思`mmap`。
如果您要访问`mmap()`目标 SPI 设备（例如 SD 卡或闪存）上的文件，则文件系统或 MTD 层将处理“映射”，设备驱动程序将简单地执行普通读取 &写操作。

> 当我在中断处理程序中收到数据包时，我不能直接将其发送到映射区域吗？（你的建议是——下半部分的 Tasklet 对接收到的数据有好处）

如果目标 SPI 设备是接收/发送数据包的通信设备，那么您的程序可能无法`mmap()`为该数据提供缓冲区。该`mmap()`功能是对虚拟内存功能的巧妙再利用。虚拟内存功能不是在后备存储（交换区域）之间交换文本和数据，而是用于出现在用户空间内存中的特定文件。尽管所有设备都表示为“文件”，但设备文件可能会`stat()`在`mmap()`. 也许可以做到（对于有限的转移），但我从未尝试过。

如果您指的是驱动程序的*fops* `mmap()`功能，那超出了我的范围。事实上，在 Linux 源代码树中的 1200 多个驱动程序中，似乎只有大约 200 个设备驱动程序实现了特定*的 fops*。

> 根据您的建议，我将使用 DMA 从 SPI 端口传输数据，为了实现这一点，我们是否必须为此编写一些函数并将函数地址告诉 DMA？

您是否正在为通过 SPI 或 SPI 控制器连接的设备实现驱动程序？
如果它是使用 SPI 的目标设备，那么您可能会通过标准 SPI 接口使用这些[SPI 驱动程序之一。](http://lxr.free-electrons.com/source/drivers/spi/)您可能会使用诸如

```
spi_message_init()
spi_message_add_tail()
spi_sync() 
```

启动和监控 I/O 操作。使用该交叉引用网站在其他驱动程序中搜索这些函数名称以获取使用示例。DMA 的使用取决于 SPI 驱动程序。
如果您正在为 SPI 控制器实现驱动程序，则使用其他 SPI 驱动程序作为示例。

您似乎对 I/O 和驱动程序概念有一个扁平化的看法，但Linux 中的*功能*是在不同的*层*中实现的。
您似乎还打算避免复制操作。“计算”中有很多数据的缓冲和复制。通常将数据从一个缓冲区复制到另一个缓冲区只是解决棘手问题（例如受保护内存与未受保护内存）的最简单解决方案。

# 附录 2

也许您应该查看现有[的高性能 MCP2515 CAN 驱动程序和 WCCD 框架](http://www.can-cia.org/fileadmin/cia/files/icc/13/junilla.pdf)来替换 SocketCAN。作者通过优化 ISR 和最小化关键区域及其锁的使用来记录显着的性能改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:12:26.607

我看不出为什么一个司机不会拥有所有这些。

你的数据应该用锁来保护。如果曾经从中断处理程序中获取锁，请使用`spin_lock_irq`/`spin_unlock_irq`来获取和释放它（在所有地方，不仅仅是中断处理程序）。

# dataset - 有没有办法在 RDLC 报告中显示用户参数

> ID：13724695
> 
> 赞同：0
> 
> 时间：2012-12-05T13:47:48.983
> 
> 标签：dataset, reportviewer

我有一个客户的要求，他要求用户使用 RDLC 输入到报告中的参数显示在报告中。我不是在谈论传递参数来生成报告，我说的是有一些文本框来显示要生成报告的参数。

有人对此有解决方案吗？我已经尝试过了，但是[http://www.ramto.com/blog/post/Using-RDLC-files-and-Microsoft-Report-Viewer-in-ASPNET.aspx](http://www.ramto.com/blog/post/Using-RDLC-files-and-Microsoft-Report-Viewer-in-ASPNET.aspx)，但它在 RDLC 中引发错误并说“区域'DataSetName'中缺少数据集名称”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:12:57.940

右键单击文本框->在常规选项卡下单击值的表达式按钮->单击类别参数->然后选择参数。

显示报表时，文本框应显示提供给 ReportViewer 控件的参数值。

# android - Adobe Air - Captive 运行时添加 Internet 权限请求

> ID：13724699
> 
> 赞同：0
> 
> 时间：2012-12-05T13:47:56.003
> 
> 标签：android, air, android-manifest

我正在为 Android 发布一个带有 Flash CS6 和 Air 3.4 的应用程序。如果我使用**强制运行时发布，我会添加一个****互联网**权限请求（android.permission.INTERNET）。（不是我设置的。如果我在没有强制运行时的情况下发布应用程序，它就不存在）

这是正常的吗？如果是这样 - 为什么 Adob​​e Air 会添加/需要它？

谢谢你。乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:35:14.800

“当您捆绑运行时，ADT 将 INTERNET 和 BROADCAST_STICKY 权限添加到您的应用程序。AIR 运行时需要这些权限”

[FlashBuilder 在构建 APK 时添加了 INTERNET 权限，即使它不在我的 APP XML 中](https://stackoverflow.com/questions/13039462/flashbuilder-adds-internet-permission-even-though-it-is-not-in-my-app-xml-when-b)

# ssh - 使用 cmus/ssh 从服务器流式传输音乐

> ID：13724704
> 
> 赞同：4
> 
> 时间：2012-12-05T13:48:15.863
> 
> 标签：ssh, stream, debian, raspberry-pi

我有一台服务器在家里运行，我想在工作时从它流式传输音乐。我不想挂载 samba 文件夹或其他东西。

是否可以通过 cmus（在服务器上运行）和 ssh（ssh 命令或 win 上的 putty）播放音乐？声音输出需要是远程PC的扬声器，而不是服务器。这可能吗？

我没有得到这个工作。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-15T03:29:25.207

我为 Linux 编写的教程：

* * *

# **使用CMUS**和**SSHFS**通过 SSH 播放音乐

 **### 注意：这适用于使用[Crouton的 Chromebook](https://github.com/dnschneid/crouton)

### 1\. 安装**sshfs**：

```
sudo apt-get install sshfs 
```

### 2.安装**cmus**：

```
sudo apt-get install cmus 
```

### 3.用家用电脑添加**ssh key ：**

`ssh-copy-id`是你的朋友。

（参见其他教程）

### 4.**创建**挂载文件夹：

```
sudo mkdir -p /mnt/example/mount/location 
```

（编辑此位置以反映您想要的目录结构。即，如果您想挂载`music`文件夹，请挂载类似的东西`/mnt/example/music`）

### 5.使用 sshfs**挂载文件夹**

```
sudo sshfs -p PORT_NUMBER -o allow_other -o IdentityFile=~/.ssh/id_rsa user@192.XXX.XXX.XXX:./folder/to/mount /mnt/example/location 
```

> 该`-o allow_other`参数非常重要，否则您将无法访问挂载。如果您使用标准 443 端口，可以忽略 PORT_NUMBER，否则将其设置为正确的值。

### 6.**将音乐添加**到您的收藏：

从终端启动 cmus：

```
$ cmus 
```

键入`:`以调出 cmus 命令行并键入：

```
add /mnt/example/location 
```

这会将音乐添加到您的收藏中。`man cmus`从终端输入 cmus 键盘快捷键的来龙去脉。

### 7\. 完成后卸载驱动器：

```
sudo umount /mnt/example/location 
```

## 其他注意事项：

可能需要确保 cmus 配置为使用脉冲音频，而不是 alsa。我认为这是通过编辑`~/.cmus/autosave`和设置参数来完成的`set output_plugin=pulse`，但我不必这样做，所以我认为你可以放心地忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:06:35.063

那么在Linux中这是很有可能的。找到了一个完全符合您需要的论坛主题。您可能需要四处搜索，但这应该[可以帮助您入门](http://www.linuxquestions.org/questions/linux-networking-3/playing-audio-files-over-ssh-connection-linux-linux-432640/)

一个简短的解释是：通过 Internet 流式传输音频的带宽非常大。一个简单的解决方案是使用 Gnump3，它可以降低采样音乐。Gnump3 并不是真正的“广播”类应用程序。更像是远程访问您的音乐。**

# android - 使视图像对话框 Android 一样聚焦

> ID：13724705
> 
> 赞同：0
> 
> 时间：2012-12-05T13:48:21.863
> 
> 标签：android, dialog, android-alertdialog

我想像`AlertDialog`. 我怎样才能做到这一点 ？

PS：我的观点相当复杂，因此，我使用的是[Android Docs](http://developer.android.com/reference/android/app/AlertDialog.html)中建议的 FrameLayout 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:12:56.303

每当我在对话框中显示复杂的视图时，我更喜欢将整个视图放在 XML 中，然后创建一个新的 Activity 并将 Activity 的内容视图设置为该 XML，然后以此作为 Dialog 启动活动

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

看看帖子

[Android Activity 作为一个对话框](https://stackoverflow.com/questions/1979369/android-activity-as-a-dialog)

这是相当容易和简单直接的，希望这会有所帮助！

# html - 将htm文件转换成ppt文件

> ID：13724709
> 
> 赞同：1
> 
> 时间：2012-12-05T13:48:32.260
> 
> 标签：html, powerpoint

我需要使用 Apache POI 将 .htm 文件转换为 power point 演示文稿（ppt）。但后来我意识到 Apache POI 只能将原始数据转换为 ppt。为此，我们必须从 htm 文件中提取数据并相应地将其输入到 ppt 文件中。我们可以使用 Apache POI 实现自动化吗？那么还有其他选项可以将 htm 文件转换为 ppt 文件吗？请提前指导我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:05:43.050

既然您提到了 POI，我假设您有兴趣在 Java 中执行此操作。

docx4j 使用 xhtmlrenderer（飞碟）将 XHTML 转换为 docx，因此您也可以使用它将 XHTML 转换为 pptx（与 POI 或 docx4j 结合使用）。

但是编写这样的转换器并不是胆小的人的工作。

另一种可能的方法是使用 OpenOffice/LibreOffice，但快速浏览一下，它更适合将 HTML 导入文档。另请参阅 help.libreoffice.org/Impress/Importing_HTML_Pages_Into_Presentations

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:51:21.213

您想要完成的另一个选项是[pandoc](http://johnmacfarlane.net/pandoc/)，它可以从 HTML 或 Markdown（以及其他内容）转换为多种格式。如果我没记错的话，它不支持 Powerpoint，但它支持许多其他演示格式，包括 HTML5 和 PDF 幻灯片。

# racket - PLT-Scheme（现在称为 Racket）中的“PLT”代表什么？

> ID：13724714
> 
> 赞同：7
> 
> 时间：2012-12-05T13:48:57.893
> 
> 标签：racket

我很好奇：PLT-Scheme（现在称为球拍）中的“PLT”代表什么？我能得出的最接近的答案是[本页](http://racket-lang.org/people.html)上的““PLT”指的是作为 Racket 开发团队核心的团队” 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T13:52:14.373

没有人真正确定，但这[可能](http://en.wikipedia.org/wiki/Talk:Racket_(programming_language)#What_does_PLT_stand_for.3F)会启发你。

* * *

**编辑**

因为只有链接的答案从来都不是一个好主意

PLT 从来都不是一个明确的首字母缩略词。最初，设计师是莱斯大学**编程**语言团队的一员，但一旦团队扩大到这个范围，这个首**字母****缩略词**就不再合适了。即使没有完整的形式，这个名字仍然存在。（有一段时间，现在是球拍）

 ***** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T13:59:03.593

PLT 代表“编程语言团队”。最初创建 PLT Scheme（现为 Racket）的[团队。](http://www.cs.rice.edu/CS/PLT/)****

# javascript - Jqplot - 带有来自多个 y 轴的数据的荧光笔显示工具提示

> ID：13724716
> 
> 赞同：0
> 
> 时间：2012-12-05T13:48:59.243
> 
> 标签：javascript, jquery, css, graph, jqplot

我正在使用 JqPlot。

这是我的[小提琴](http://jsfiddle.net/yrshaikh/yRLJF/)，下面是我的截图。我正在使用两个 y 轴。在左 y 轴上我有我的收入，在我右 y 轴上我有我的页面浏览量。

现在悬停在线上，我想在工具提示中同时显示视图和收入，如下面的示例所示，我一次只能从 2 个轴获取数据。

有什么想法吗 ？

![在此处输入图像描述](../Images/38af87b5e12844d2c713757dfd595c00.png)

下面是我的代码

```
$(document).ready(function () {

  $.jqplot.config.enablePlugins = true;

  s1 = [['23-May-08',1, 11],['24-May-08',4, 14],['25-May-08',2, 22],['26-May-08', 6, 26]];
  s2 = [['23-May-08',11, 1],['24-May-08',14, 4],['25-May-08',22, 2],['26-May-08', 26, 6]];

  plot1 = $.jqplot('chart',[s1, s2],{
     title: 'Highlighting, Dragging, Cursor and Trend Line',
     axes: {
         xaxis: {
             renderer: $.jqplot.DateAxisRenderer,
             tickOptions: {
                 formatString: '%#m/%#d/%y'
             },
             numberTicks: 4
         },
         yaxis: {
             tickOptions: {
                 formatString: '$%.2f'
             }
         }
     },
     highlighter: {
         show:true,
     },
     cursor: {
         show: true
     },
      series: [
        {
            lineWidth: 2,
            highlighter: { formatString: "<div style='background-color:white; border:1px #ddd solid; width:220px; height:60px'>%s . Views : %s Revenue : %s </div>" }
        },
        {
            yaxis: 'y2axis',
            highlighter: { formatString: "<div style='background-color:white; border:1px #ddd solid; width:220px; height:60px'>%s . Views : %s Revenue : %s </div>" }
        }]
  });
});​ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T06:05:35.910

这是我所做的，我使用`tooltipContentEditor`了`highlighter`. 在这里查看[更新的小提琴](http://jsfiddle.net/yrshaikh/yRLJF/2/)。

![在此处输入图像描述](../Images/00375968c64199f6cc13af97d9e832a2.png)

```
series: [
{
    lineWidth: 2,
    highlighter: {
        show: true,
        tooltipContentEditor: function (str, seriesIndex, pointIndex, plot) {

            var date = plot.data[seriesIndex][pointIndex][0];
            var revenue = plot.data[seriesIndex][pointIndex][3];
            var views = plot.data[1][pointIndex][4];

            var html = "<div>Date : ";
            html += date;
            html += "  <br>Money : ";
            html += revenue;
            html += "  <br>Views : ";
            html += views;
            html += "  </div>";

            return html;
        }
    }
},
{
    yaxis: 'y2axis',
    highlighter: {
        show: true,
        tooltipContentEditor: function (str, seriesIndex, pointIndex, plot) {

            var date = plot.data[seriesIndex][pointIndex][0];
            var views = plot.data[seriesIndex][pointIndex][5];
            var revenue = plot.data[0][pointIndex][6];

            var html = "<div>Date : ";
            html += date;
            html += "  <br>Money : ";
            html += revenue;
            html += "  <br>Views : ";
            html += views;
            html += "  </div>";

            return html;
        }
    }
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:53:00.040

代替

```
plot.data[seriesIndex][pointIndex] 
```

用这个

```
plot.series[seriesIndex].data[pointIndex] 
```

因为 plot.data 保存用户指定的数据（可能未排序）

并且 plot.series 保存绘制的数据（如果 sortdata 为 true，则可以对其进行排序，这是默认值）。

# css - 无法显示部分 css sprite 图像

> ID：13724720
> 
> 赞同：0
> 
> 时间：2012-12-05T13:49:10.827
> 
> 标签：css, css-sprites

我正在尝试让 css sprites 工作。我的图像由两部分组成。左侧为黑色，右侧为白色。

下面的代码显示了图像的白色部分。如果我将#item0 中的-40px 值更改为0，它会同时显示黑色和白色部分。

我不能让它只显示图像的黑色部分。你能发现我做错了什么吗？

```
<style type="text/css">
    #menu-left {            
        width: 200px;
        background-color: #73b2d6;

    }

    #navlist li {
        list-style: none;
        padding-left: 10px;
        width: 190px;
    }

    #navlist a {
        width: 150px;
        height: 44px;
        padding-left: 40px;
        padding-top: 20px;
        display: block;
        width: 100px;
    }

    #item0 {
        background: url('http://www.fabian.dk/all.png') -40px 7px no-repeat;
    }
</style>

<div id="menu-left">
    <ul id="navlist">
        <li id="item0"><a href="#">link 1</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:00:55.280

不幸的是，它不能以我能想到的方式使用您拥有的 DOM 结构来完成。由于 li 元素比背景大，因此无法像这样剪切图像的右侧部分。

我能想到的最简单的事情是在您的 li 元素中添加一个具有固定大小的附加元素，并将背景应用于该元素而不是整个 li。

**HTML：**

```
<div id="menu-left">
    <ul id="navlist">
        <li id="item0"><div></div><a href="#">link 1</a></li>
    </ul>
</div>​ 
```

**CSS：**

```
#navlist li div {
    background: url('http://www.fabian.dk/all.png') 0 7px no-repeat;
    width: 40px;
    height: 40px;
    float: left;
}​ 
```

[**工作示例**](http://jsfiddle.net/6Ue6e/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:07:28.263

或者，您可以使用`:before`伪类。

```
#item0:before {
        background: url('http://www.fabian.dk/all.png') 0 7px no-repeat;
        content : '';
        height: 40px;
        position: absolute;
        width: 40px;
    } 
```

# ios - 是否可以在我的应用程序中嵌入 wps

> ID：13724721
> 
> 赞同：0
> 
> 时间：2012-12-05T13:49:14.813
> 
> 标签：ios, xcode

是否可以在原生 iOS 应用程序中嵌入 wps 功能？我想设计一个图形界面，允许通过wps按钮物理访问路由器的用户让iPhone使用wps加入该wifi网络。任何一般建议从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:53:13.857

我认为您没有获得对 wfi 适配器所需的低级访问权限，抱歉.. 或者您是否想在越狱设备上执行此操作/不适用于应用商店

# php - PHP 会话管理 - 使用 MySQL 连接的登录掩码

> ID：13724724
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:49:29.447
> 
> 标签：php, mysql, login

可能我错了，但我认为下面发布的这个代码应该可以工作。任何 PHP 代码都不会从第 1-10 行和第 100-106 行执行。我已经在我的 XAMPP 和通过公共 webhoster 的在线 FTP 上对其进行了测试。从 FTP 或本地客户端执行的所有其他文件通常都使用 PHP（例如数据库连接）。

并且不要怀疑第 6、7、8 和 100 - 106 行只是测试 PHP 是否正常工作的测试行，在我看来并非如此。

主要目标：如果会话处于活动状态并且设置了变量“访问”，则直接重定向到 userview.php。

[pastebin 上的代码（登录掩码）](http://pastebin.com/LJvEKKPZ)

[数据库连接](http://pastebin.com/hNaS0VhU)

如果有人可以提供帮助，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:55:31.953

尝试用 替换`<? ?>`标签`<?php ?>`，或检查`short_open_tag`php.ini 文件中的指令。

# cocoa - Cocoa 自动布局和滚动视图

> ID：13724725
> 
> 赞同：4
> 
> 时间：2012-12-05T13:49:36.843
> 
> 标签：cocoa, layout, nsscrollview, autolayout

我正在做一些财产检查员视图之王。我仅在外部面板上使用带有自定义布局的自动布局（明确设置框架属性）。让我解释：

*   检查器属性视图的每一行都由仅使用自动布局的 InspectorPropertyCell 实现。
*   有一个 StackPanel 自定义控件，它可以堆叠单元格并使用自动布局。对于每个组，都有一个关联的堆栈面板。04 组在 03 组内。两者都是可折叠的。
*   有一个堆叠所有组的外部堆叠面板。此外部堆栈面板使用 frame 属性显式设置高度。
*   这都包含在一个 NSScrollView 中。

看一张图片：

![在此处输入图像描述](../Images/970008b5e9ebb9c17dd9982590d3ce70.png)

一切正常，但如果我调整窗口大小使其内容区域小于整个属性检查器视图（这样我可以滚动属性检查器视图），然后滚动到底部，然后折叠最后一组（组 04），属性检查员视图缩小并正确运行。此外，滚动可视区域也相应调整。问题是我无法撤消第 04 组的折叠。

通过在代码中设置几个断点，我发现了问题所在。我只是不知道如何解决它。问题是，虽然调用了 updateConstraints 通道（因为我调用了 -setNeedsUpdateConstraints），但没有调用 -layout 通道。即使我通过调用 -layoutSubtreeIfNeeded 强制布局传递，自动布局似乎也没有效果，因为我设置为 0（使用约束）的某些单元格的高度在我进行折叠时仍然为 0当我展开。

如果我调整窗口大小，则会再次调用布局传递。当然，这是不可接受的。

请帮忙！！！我即将完全放弃自动布局并仅使用布局进行自定义布局......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:08:50.807

我通过显式调用子视图上的布局来解决......这有点奇怪......但我需要在我自己布局之前对我的孩子进行布局（StackPanel）。

# javascript - 如何确保多个选择框中的至少一个选择框在 jQuery 中具有值

> ID：13724729
> 
> 赞同：2
> 
> 时间：2012-12-05T13:49:50.783
> 
> 标签：javascript, jquery, jquery-validate

我有一个动态表单，用户可以在其中添加多个选择框：

```
<form id="ticket_form">
  <select class="required" name="quantity[1]"></select>
  <select class="required" name="quantity[2]"></select>
  <select class="required" name="quantity[3]"></select>
</form> 
```

目前，我确保用户为每个选择框选择了一个值：

```
$("#ticket_form").validate({
  rules: {
    'quantity[]': 'required'
  },
  messages: {
    'quantity[]': 'This field is whack'
  }
}); 
```

我实际上只需要其中一个来具有选定的值。当至少一个选择框有值时，我应该怎么做才能让验证通过？

**更新**

这是我最终根据 Ben Barden 的解决方案解决我的问题的代码：

```
$.validator.addMethod("groupSelect", (function(value, element, isRunning) {
  return $(".required[value!=\"\"]").length > 0;
}), "At least one must be selected."); 
```

我还在该类中添加了一个额外的类规则`required`，因此我不必再向实际的验证规则添加任何内容：

```
$.validator.addClassRules({
  'required': {
    'groupSelect': true
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:57:21.917

为此，您几乎必须创建自己的验证规则，但您需要的规则非常简单。该类的所有成员都将验证是否存在该类的任何成员，其值不是默认值。因此，您使用类选择器，然后通过值不等于选择器进一步过滤，并检查结果是否包含任何内容。

```
 jQuery.validator.addMethod(
    "groupSelect",
    function (value, element, isRunning)
    {
        return $('.groupSelectClass[value!="defaultSelectValue"]').length > 0;
    },
    "At least one must be selected."); 
```

然后只需将`groupSelect`规则（写在那里的规则）应用于`groupSelectClass`类（确保在生成时将其添加到所有选择器）并确保您所取代的`defaultSelectValue`实际上是选择器的默认值。请注意，这一切都需要在基本`validate`调用之前设置，而不是之后。

编辑：

进一步解释：上面的代码块通过名称`groupSelect`（或您放在那里的任何内容）定义了一个验证规则。如所写，`groupSelect`当且仅当至少一个具有类“groupSelectClass”的节点具有除“defaultSelectValue”之外的某个值时，该规则才返回有效。如果您确保具有“groupSelectClass”类的所有内容都是默认值为“defaultSelectValue”的选择框，则当且仅当至少设置了这些选择框之一时，此规则才会返回有效。如果您随后使用该函数将此规则应用于“groupSelect”类`jQuery.validator.addClassRules`，它将导致所有这些选择框都将其作为验证要求，并显示“必须选择至少一个”。关于验证失败。 [http://docs.jquery.com/Plugins/Validation/Validator/addClassRules](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules)应该让您对如何使用 addClassRules 函数有足够的了解。事实上，我建议您阅读该站点中的一般内容，特别是验证插件信息，如果您打算使用它做很多事情的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:56:29.913

我有一个检查这个的功能，但这是一个非 .validate() 方法

```
function CheckValue(){
    var oneSelected = false;

     $('#ticket_form select').each(function(k,v){

          // this assumes that zero is an unselected index 
          if($(v).children('option:selected').val() != 0){

             oneSelected = true;

           }

     });

     return oneSelected;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:03:14.453

```
var index = [];

$('.required').each(function(i) {
    if ($(this).val() != null) { // Check for null or undefined if not proceed
        index.push(i);
    }
}); 
```

index 现在为具有值的选择框提供了一组索引。使用 using 访问它们`index[0]`，其中 0 是第一个匹配的带有值的选择。

```
var selectVal = $('.required').eq(index[0]).val(); 
```

# python - 如何获取scrapy失败的URL？

> ID：13724730
> 
> 赞同：49
> 
> 时间：2012-12-05T13:49:55.233
> 
> 标签：python, web-scraping, report, scrapy

我是scrapy的新手，我知道这是一个很棒的爬虫框架！

在我的项目中，我发送了超过 90,000 个请求，但其中一些请求失败了。我将日志级别设置为 INFO，我只能看到一些统计信息，但没有详细信息。

```
2012-12-05 21:03:04+0800 [pd_spider] INFO: Dumping spider stats:
{'downloader/exception_count': 1,
 'downloader/exception_type_count/twisted.internet.error.ConnectionDone': 1,
 'downloader/request_bytes': 46282582,
 'downloader/request_count': 92383,
 'downloader/request_method_count/GET': 92383,
 'downloader/response_bytes': 123766459,
 'downloader/response_count': 92382,
 'downloader/response_status_count/200': 92382,
 'finish_reason': 'finished',
 'finish_time': datetime.datetime(2012, 12, 5, 13, 3, 4, 836000),
 'item_scraped_count': 46191,
 'request_depth_max': 1,
 'scheduler/memory_enqueued': 92383,
 'start_time': datetime.datetime(2012, 12, 5, 12, 23, 25, 427000)} 
```

有什么方法可以获得更详细的报告吗？例如，显示那些失败的 URL。谢谢！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-10T11:22:28.187

是的，这是可能的。

*   如果 url 的响应状态是 404，下面的代码将一个`failed_urls`列表添加到一个基本的蜘蛛类并附加 urls （这需要扩展以涵盖其他需要的错误状态）。
*   接下来，我添加了一个句柄，它将列表连接成一个字符串，并在蜘蛛关闭时将其添加到蜘蛛的统计信息中。
*   根据您的评论，可以跟踪 Twisted 错误，下面的一些答案提供了有关如何处理该特定用例的示例
*   代码已更新为可与 Scrapy 1.8 一起使用。这一切都应该归功于[Juliano Mendieta](https://stackoverflow.com/users/6937440/juliano-mendieta)，因为我所做的只是添加他建议的编辑并确认蜘蛛按预期工作。

* * *

```
from scrapy import Spider, signals

class MySpider(Spider):
    handle_httpstatus_list = [404] 
    name = "myspider"
    allowed_domains = ["example.com"]
    start_urls = [
        'http://www.example.com/thisurlexists.html',
        'http://www.example.com/thisurldoesnotexist.html',
        'http://www.example.com/neitherdoesthisone.html'
    ]

    def __init__(self, *args, **kwargs):
            super().__init__(*args, **kwargs)
            self.failed_urls = []

    @classmethod
    def from_crawler(cls, crawler, *args, **kwargs):
        spider = super(MySpider, cls).from_crawler(crawler, *args, **kwargs)
        crawler.signals.connect(spider.handle_spider_closed, signals.spider_closed)
        return spider

    def parse(self, response):
        if response.status == 404:
            self.crawler.stats.inc_value('failed_url_count')
            self.failed_urls.append(response.url)

    def handle_spider_closed(self, reason):
        self.crawler.stats.set_value('failed_urls', ', '.join(self.failed_urls))

    def process_exception(self, response, exception, spider):
        ex_class = "%s.%s" % (exception.__class__.__module__, exception.__class__.__name__)
        self.crawler.stats.inc_value('downloader/exception_count', spider=spider)
        self.crawler.stats.inc_value('downloader/exception_type_count/%s' % ex_class, spider=spider) 
```

* * *

示例输出（请注意，只有在实际抛出异常时才会出现下载器/exception_count* 统计信息 - 我通过在关闭无线适配器后尝试运行蜘蛛来模拟它们）：

```
2012-12-10 11:15:26+0000 [myspider] INFO: Dumping Scrapy stats:
    {'downloader/exception_count': 15,
     'downloader/exception_type_count/twisted.internet.error.DNSLookupError': 15,
     'downloader/request_bytes': 717,
     'downloader/request_count': 3,
     'downloader/request_method_count/GET': 3,
     'downloader/response_bytes': 15209,
     'downloader/response_count': 3,
     'downloader/response_status_count/200': 1,
     'downloader/response_status_count/404': 2,
     'failed_url_count': 2,
     'failed_urls': 'http://www.example.com/thisurldoesnotexist.html, http://www.example.com/neitherdoesthisone.html'
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 12, 10, 11, 15, 26, 874000),
     'log_count/DEBUG': 9,
     'log_count/ERROR': 2,
     'log_count/INFO': 4,
     'response_received_count': 3,
     'scheduler/dequeued': 3,
     'scheduler/dequeued/memory': 3,
     'scheduler/enqueued': 3,
     'scheduler/enqueued/memory': 3,
     'spider_exceptions/NameError': 2,
     'start_time': datetime.datetime(2012, 12, 10, 11, 15, 26, 560000)} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-29T22:49:49.240

这是另一个如何处理和收集 404 错误的示例（查看 github 帮助页面）：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.item import Item, Field

class GitHubLinkItem(Item):
    url = Field()
    referer = Field()
    status = Field()

class GithubHelpSpider(CrawlSpider):
    name = "github_help"
    allowed_domains = ["help.github.com"]
    start_urls = ["https://help.github.com", ]
    handle_httpstatus_list = [404]
    rules = (Rule(SgmlLinkExtractor(), callback='parse_item', follow=True),)

    def parse_item(self, response):
        if response.status == 404:
            item = GitHubLinkItem()
            item['url'] = response.url
            item['referer'] = response.request.headers.get('Referer')
            item['status'] = response.status

            return item 
```

只需运行`scrapy runspider`并`-o output.json`查看`output.json`文件中的项目列表。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-11-28T13:45:32.983

Scrapy 默认忽略 404 并且不解析它。如果您收到错误代码 404 作为响应，您可以通过一种非常简单的方法来处理它。

在**settings.py 中**，写：

```
HTTPERROR_ALLOWED_CODES = [404,403] 
```

然后在你的解析函数中处理响应状态码：

```
def parse(self,response):
    if response.status == 404:
        #your action on error 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-08-26T21:52:47.307

@Talvalin 和 @alecxe 的答案对我帮助很大，但它们似乎没有捕获不生成响应对象的下载器事件（例如，`twisted.internet.error.TimeoutError`和`twisted.web.http.PotentialDataLoss`）。这些错误显示在运行结束时的统计转储中，但没有任何元信息。

正如我在[这里](https://groups.google.com/forum/#!forum/scrapy-users)发现的那样，错误由[stats.py](https://github.com/scrapy/scrapy/blob/master/scrapy/downloadermiddlewares/stats.py)中间件跟踪，在`DownloaderStats`类的`process_exception`方法中捕获，特别是在`ex_class`变量中，它根据需要递增每个错误类型，然后在运行结束时转储计数。

要将此类错误与来自相应请求对象的信息相匹配，您可以为每个请求添加一个唯一的 id（通过`request.meta`），然后将其拉入 的`process_exception`方法`stats.py`：

```
self.stats.set_value('downloader/my_errs/{0}'.format(request.meta), ex_class) 
```

这将为每个没有响应的基于下载器的错误生成一个唯一的字符串。然后，您可以将更改`stats.py`的内容另存为其他内容（例如`my_stats.py`），将其添加到 downloadermiddlewares（具有正确的优先级），然后禁用 stock `stats.py`：

```
DOWNLOADER_MIDDLEWARES = {
    'myproject.my_stats.MyDownloaderStats': 850,
    'scrapy.downloadermiddleware.stats.DownloaderStats': None,
    } 
```

运行结束时的输出如下所示（此处使用元信息，其中每个请求 url 映射到一个 group_id 和 member_id 由斜杠分隔，如`'0/14'`）：

```
{'downloader/exception_count': 3,
 'downloader/exception_type_count/twisted.web.http.PotentialDataLoss': 3,
 'downloader/my_errs/0/1': 'twisted.web.http.PotentialDataLoss',
 'downloader/my_errs/0/38': 'twisted.web.http.PotentialDataLoss',
 'downloader/my_errs/0/86': 'twisted.web.http.PotentialDataLoss',
 'downloader/request_bytes': 47583,
 'downloader/request_count': 133,
 'downloader/request_method_count/GET': 133,
 'downloader/response_bytes': 3416996,
 'downloader/response_count': 130,
 'downloader/response_status_count/200': 95,
 'downloader/response_status_count/301': 24,
 'downloader/response_status_count/302': 8,
 'downloader/response_status_count/500': 3,
 'finish_reason': 'finished'....} 
```

[这个答案](https://stackoverflow.com/a/11071745/1599229)处理非基于下载器的错误。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-29T11:08:13.543

从 scrapy 0.24.6 开始，alecxe 建议的方法[不会](https://stackoverflow.com/a/14593509/1906307)捕获起始 URL 的错误。要使用起始 URL 记录错误，您需要覆盖`parse_start_urls`. 为此目的调整 alexce 的答案，您将得到：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.item import Item, Field

class GitHubLinkItem(Item):
    url = Field()
    referer = Field()
    status = Field()

class GithubHelpSpider(CrawlSpider):
    name = "github_help"
    allowed_domains = ["help.github.com"]
    start_urls = ["https://help.github.com", ]
    handle_httpstatus_list = [404]
    rules = (Rule(SgmlLinkExtractor(), callback='parse_item', follow=True),)

    def parse_start_url(self, response):
        return self.handle_response(response)

    def parse_item(self, response):
        return self.handle_response(response)

    def handle_response(self, response):
        if response.status == 404:
            item = GitHubLinkItem()
            item['url'] = response.url
            item['referer'] = response.request.headers.get('Referer')
            item['status'] = response.status

            return item 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-07-06T09:44:48.580

这是关于这个问题的更新。我遇到了类似的问题，需要使用 scrapy 信号来调用管道中的函数。我已经编辑了@Talvalin 的代码，但为了更清楚起见，我想给出一个答案。

基本上，您应该添加 self 作为 handle_spider_closed 的参数。您还应该在 init 中调用调度程序，以便可以将蜘蛛实例 (self) 传递给处理方法。

```
from scrapy.spider import Spider
from scrapy.xlib.pydispatch import dispatcher
from scrapy import signals

class MySpider(Spider):
    handle_httpstatus_list = [404] 
    name = "myspider"
    allowed_domains = ["example.com"]
    start_urls = [
        'http://www.example.com/thisurlexists.html',
        'http://www.example.com/thisurldoesnotexist.html',
        'http://www.example.com/neitherdoesthisone.html'
    ]

    def __init__(self, category=None):
        self.failed_urls = []
        # the dispatcher is now called in init
        dispatcher.connect(self.handle_spider_closed,signals.spider_closed) 

    def parse(self, response):
        if response.status == 404:
            self.crawler.stats.inc_value('failed_url_count')
            self.failed_urls.append(response.url)

    def handle_spider_closed(self, spider, reason): # added self 
        self.crawler.stats.set_value('failed_urls',','.join(spider.failed_urls))

    def process_exception(self, response, exception, spider):
        ex_class = "%s.%s" % (exception.__class__.__module__,  exception.__class__.__name__)
        self.crawler.stats.inc_value('downloader/exception_count', spider=spider)
        self.crawler.stats.inc_value('downloader/exception_type_count/%s' % ex_class, spider=spider) 
```

我希望这对将来遇到同样问题的人有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-31T23:37:24.270

除了其中一些答案之外，如果您想跟踪 Twisted 错误，我会看看使用 Request 对象的`errback`参数，您可以在该参数上设置一个回调函数，以便在请求失败时使用[Twisted Failure调用。](https://twistedmatrix.com/documents/current/api/twisted.python.failure.Failure.html)除了 url，此方法还可以让您跟踪失败的类型。

然后，您可以使用以下方法记录 url：（传入的 Twisted对象`failure.request.url`在哪里）。`failure``Failure``errback`

```
# these would be in a Spider
def start_requests(self):
    for url in self.start_urls:
        yield scrapy.Request(url, callback=self.parse,
                                  errback=self.handle_error)

def handle_error(self, failure):
    url = failure.request.url
    logging.error('Failure type: %s, URL: %s', failure.type,
                                               url) 
```

Scrapy 文档给出了一个完整的例子来说明如何做到这一点，除了对 Scrapy 记录器的调用现在已经[贬值](https://doc.scrapy.org/en/latest/topics/logging.html)了，所以我已经调整了我的例子来使用 Python 的内置[日志记录](https://docs.python.org/3/library/logging.html)）：

[https://doc.scrapy.org/en/latest/topics/request-response.html#topics-request-response-ref-errbacks](https://doc.scrapy.org/en/latest/topics/request-response.html#topics-request-response-ref-errbacks)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-28T15:52:29.230

您可以通过两种方式捕获失败的 url。

1.  使用 errback 定义 scrapy 请求

    ```
    class TestSpider(scrapy.Spider):
        def start_requests(self):
            yield scrapy.Request(url, callback=self.parse, errback=self.errback)

        def errback(self, failure):
            '''handle failed url (failure.request.url)'''
            pass 
    ```

2.  使用信号.item_dropped

    ```
    class TestSpider(scrapy.Spider):
        def __init__(self):
            crawler.signals.connect(self.request_dropped, signal=signals.request_dropped)

        def request_dropped(self, request, spider):
            '''handle failed url (request.url)'''
            pass 
    ```

**[!Notice]**带有 errback 的 Scrapy 请求无法捕获一些自动重试失败，例如连接错误，设置中的[RETRY_HTTP_CODES](https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#retry-http-codes)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-12-04T11:41:10.633

基本上 Scrapy 默认忽略 404 错误，它是在 httperror 中间件中定义的。

因此，将**HTTPERROR_ALLOW_ALL = True**添加到您的设置文件中。

在此之后，您可以通过**parse 函数**访问**response.status**。

 **你可以这样处理。

```
def parse(self,response):
    if response.status==404:
        print(response.status)
    else:
        do something 
```**

# python - (g)vim 在保存时冻结

> ID：13724733
> 
> 赞同：2
> 
> 时间：2012-12-05T13:50:06.873
> 
> 标签：python, vim

我在 (g)vim 中开发，它通常工作正常。最近，它在文件保存操作期间开始冻结。在我的工作流程中，我节省了很多，所以这不是一个“小”问题。

在保存过程中查看 strace ，看起来 vim 扫描了完整的目录项目树，从运行它的文件夹开始。因此，要么 VIM 中存在错误（恕我直言，极不可能），要么我的配置有问题。

我没有安装很多插件，上周我添加的最后一个是vim-flake8。

我怎样才能找到问题？

谢谢。

# vb.net - 在桌面背景上显示一个winform，并且只在桌面背景上显示

> ID：13724734
> 
> 赞同：0
> 
> 时间：2012-12-05T13:50:06.277
> 
> 标签：vb.net

有没有办法让 winform（VB.NET 或 C#）只能显示在工作站的桌面上？有没有人尝试过这样做？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:52:56.177

将其放入表单绘制事件中：

```
 Me.SendToBack() 
```

# module - prestashop 1.5 中的模块更改

> ID：13724736
> 
> 赞同：0
> 
> 时间：2012-12-05T13:50:16.067
> 
> 标签：module, prestashop

我需要更改畅销产品模块，使其显示新产品而不是畅销产品，所有其他条件都相同。这是否可以通过较少的努力实现，或者需要强大的 php 技能？任何人都可以分享有关如何做到这一点的任何建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:30:42.393

你为什么不使用新产品块而不是顶级销售？

未经测试，但它应该可以工作，您也可以更改 blockbestsellers.php 并替换此行：

```
$bestsellers = ProductSale::getBestSalesLight((int)($params['cookie']->id_lang), 0, 4); 
```

有了这个：

```
$bestsellers = Product::getNewProducts((int)($params['cookie']->id_lang), 0, (int)(Configuration::get('NEW_PRODUCTS_NBR'))); 
```

这是获取新产品的代码

# php - Elasticsearch 或 Solr + Mysql 表搜索

> ID：13724737
> 
> 赞同：0
> 
> 时间：2012-12-05T13:50:21.200
> 
> 标签：php, mysql, search, solr, elasticsearch

我是 Solr 和 Elasticsearch 的新手。我有一个用 MYSQL 作为数据库的 PHP 编写的 Web 应用程序。我有 5 列包含文本数据。我只想对这 5 列进行索引和应用搜索（来自 Elasticsearch/Solr）。我做了很多谷歌并没有得到它。

例如 ：

1.  我有 5 列，即。标题、描述、评论、评论、其他。
2.  用户访问[http://www.my_site.com](http://www.my_site.com)并输入他/她的搜索查询
3.  现在我希望我的应用程序搜索 1\. 中提到的所有列并返回结果。

（Mysql 支持跨多列搜索，但它不完整，像“SQL_LIKE”一样工作。我想要一个像电子商务网站那样的搜索引擎）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:12:57.570

首先，您必须索引文档（即示例中的行）。如果您的数据在 MySQL 中，我建议您使用：

*   [弹性搜索](http://www.elasticsearch.org)
*   [Elasticsearch JDBC 河](https://github.com/jprante/elasticsearch-river-jdbc)

启动 Elasticsearch，添加河流，然后开始搜索。

你可以看看[Elastica](https://github.com/ruflin/Elastica) for a PHP Client。

# java - 使用 RXTX 和 Java 继续与串行设备通信

> ID：13724740
> 
> 赞同：2
> 
> 时间：2012-12-05T13:50:31.803
> 
> 标签：java, serial-port, rxtx

我需要修改 RXTX“基于事件的双向通信”（请参阅[​​ http://rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication](http://rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication)），以便我能够将特定响应写回串行设备关于其上一条消息。

我通过发送第一个命令开始通信。到目前为止一切正常。现在我从串行设备得到答案。我用进一步的命令对答案做出反应。但是我不能再写了，因为写线程已经结束了。

有人知道如何处理吗？非常感谢！

```
public class TwoWaySerialComm {
    public TwoWaySerialComm() {
        super();
    }

public static void main(String[] args) {
        try {

            // 0\. call connect()
            (new TwoWaySerialComm()).connect("COM1");

        } catch (Exception e) {
            e.printStackTrace();
        }
}

void connect(String portName) throws Exception {

                // 1\. get CommPortIdentifier, open etc...

                // 2\. then do
                InputStream in = serialPort.getInputStream();
                OutputStream out = serialPort.getOutputStream();

                // 4\. start writer thread
                (new Thread(new SerialWriter(out))).start();

                // 5\. instantiate SerialReader 
                serialPort.addEventListener(new SerialReader(in));
                serialPort.notifyOnDataAvailable(true);

}

public static class SerialWriter implements Runnable {

        OutputStream out;

        public SerialWriter(OutputStream out) {
            this.out = out;
        }

        public void run() {
            try {

                // establish a communication by sending the first command. the serial device will answer!   
                String toSend = "blablabla";
                this.out.write(toSend);

                // thread ended???

}

public static class SerialReader implements SerialPortEventListener {

        private InputStream in;

        public SerialReader(InputStream in) {
            this.in = in;

        }

        public void serialEvent(SerialPortEvent arg0) {

            // event occurs beacause device answers after writing.

            int data;

            try {

                StringBuffer sb = new StringBuffer();
                String LineOfData=null;

                while ((data = in.read()) > -1) {

                    if (data == '\n') {
                        break;
                    }

                    sb.append(Integer.toHexString(data));
                    LineOfData = sb.toString();

                }
                // I store the answer and send it to an EventIterpreter. Regarding the answer, it creates an appropriate response itselves.
                EventInterpreter e = new EventInterpreter(LineOfData);  
                String result = e.getData

HERE >> // Now I want to send this response back to the device. But the thread is already ended.

            } catch (IOException e) {
                e.printStackTrace();
                System.exit(-1);
            }
        }

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:58:16.877

## 不要让运行 SerialWriter 的线程完成。

`while (System.in.read() != -1)`在原始示例中`run()`，您会注意到`SerialWriter`. 这很重要。运行它的线程*阻塞*，`read()`然后，一旦它有一些数据要读取，它就会做一些工作，然后*循环*回到同一个位置，等待更多的输入。这是一个在正常情况下不*应该*完成的线程。

至关重要的是，编写器的非守护线程正在运行这一事实意味着，当您的主线程（JVM 用来启动程序的线程）用完 connect() 方法中的语句时，JVM 不会立即关闭.

## 串口在它自己的线程上回叫你

当`serialPort`调用您的侦听器的`public void serialEvent(SerialPortEvent)`方法时，*它会在自己的线程上执行此操作*。

您现在的任务是尽可能快*地脱离 serialPort 的线程。*几乎，读取数据，将其粘贴在缓冲区中，您的另一个线程可以在空闲时对其进行解析和操作，同时让 serialPort 继续处理通信。你当然不应该尝试在它自己的线程上调用你时写入串行端口。它没有任何状态回复你，因为它在等你完成！

## 您希望您的“作家”线程“等待”，直到有东西要回复

您可以通过提供“锁定”对象来进行安排。由于这些是现代时代，请使用：

```
import java.util.concurrent.locks.*;

// accessible to both reader and writer
...
Lock lock = new ReentrantLock();
Condition dataAvailable = lock.newCondition();
byte[] buffer;

// in the writer
...
public void run() {
    while(true) {
        lock.lock();
        try {
            dataAvailable.await();  // writer thread dozes
            doStuff(buffer);
        } finally {
            lock.unlock();
        }
    }
}

// in the reader
...
public void onEvent() {
    lock.lock();
    try {
        buffer = readData();
        dataAvailable.signal();   // writer thread wakes up
    } finally {
        lock.unlock();
    }
} 
```

## 读一本关于并发的好书

并发是棘手的。您需要阅读[Java Concurrency in Practice](http://my.safaribooksonline.com/book/programming/java/0321349601)。

当您尝试剪切和粘贴上面的代码示例时，您会注意到`Condition#await()`throws `InterruptedException`。究竟该怎么做超出了这个答案的范围。:-) 这`while(true)`也有点狡猾。

# c++ - 构造 QFileInfo 对象会导致文件系统访问吗？

> ID：13724744
> 
> 赞同：4
> 
> 时间：2012-12-05T13:50:40.527
> 
> 标签：c++, qt

从 QFileInfo 文档运行此示例代码时：

```
 QFileInfo fi("/tmp/archive.tar.gz");
 QString base = fi.baseName();  // base = "archive" 
```

它会导致访问文件系统吗？

我假设调用`fi.lastModified()`或`fi.exists()`需要访问文件系统，但是我只使用它来提取文件名的一部分（扩展名、基本文件名、仅目录等）呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T14:17:04.130

如果不查看方法的实现，很难准确地说出哪种方法访问文件系统，哪种方法不访问。但我在图书馆找到了回答你问题的这种解释：

> ### 性能问题
> 
> 的一些`QFileInfo`函数查询文件系统，但出于性能原因，一些函数只对文件名本身进行操作。例如：要返回一个相对文件名的绝对路径，`absolutePath()`必须查询文件系统。但是，该 `path()`函数可以直接处理文件名，因此速度更快。
> 
> **注意：**为了提高性能，`QFileInfo`缓存有关文件的信息。因为文件可以被其他用户或程序更改，甚至可以被同一程序的其他部分更改，所以有一个刷新文件信息的功能：`refresh()`. 如果您想关闭 a`QFileInfo`的缓存并在每次向它请求信息时强制它访问文件系统，请调用 `setCaching(false)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-23T02:04:23.147

我有同样的问题，所以我研究了 Qt 源代码。确切地说是 462 版。此外，我的重点特别`QFileInfo`是采用 a 的构造函数`QString`（如原始问题代码所示）。

此构造函数调用`QAbstractFileEngine::create`它本身进行 2 次明显调用：

1.  `QDir::searchPaths()`
2.  `new QFSFileEngine()`

鉴于我对这两个操作的理解，我相当有信心此构造函数**不会访问文件系统**，而是准备`QFileInfo`使用本机环境中提供的文件名执行此类操作（文件路径约定，如 Unix 与 MS-DOS ）。

需要考虑的一件事是，此声明/代码随时可能更改。因此，除非 Qt 的文档直接指出它不访问文件系统，否则我的回答不会永远正确。

# excel - 比较两张表中的数据并将其写入同一工作簿的另一张表中

> ID：13724745
> 
> 赞同：0
> 
> 时间：2012-12-05T13:50:41.383
> 
> 标签：excel, vba, compare

我想要我的代码做什么：有一张名为“DB”的表格，其中包含从表格中获取的数据。我有“XML”工作表，其中包含从 XML 获取的数据。我想从“DB”表中获取列名“FName”并在“XML”表中搜索相同的列名“FName”。如果列名匹配，则从“DB”表中获取相应的值并与“XML”表进行比较。我在同一个工作簿中有另一张“结果”表。我从“DB”表中获取了列名并粘贴了转置（按行排列）。我必须在以下情况下执行：
1\. 如果两个工作表中的列名匹配：
- 在两个工作表中搜索相应列名的值匹配。如果值匹配，在“结果”中

2.如果列名在两张表中都不匹配：
- 在“结果”表中，我必须在列名为“FName”的行旁边的列中写下“NO Matching COLUMN”。

目前，在这段代码中，我想解析“DB”表中的每一列并搜索该列。但我收到 "Application-Defined or Object-Defined Error" 。

请让我知道如何实现上述场景：

```
Dim FindString As Range
Dim Rng As Range

Dim i, j As Integer
Dim finalcol As Long

Worksheets("DB").Select

finalcol = Worksheets("DB").Cells(1, Application.Columns.Count).End(x1toleft).column
On Error Resume Next

For i = 1 To finalcol
 FindString = Cells(1, i).Value

If Trim(FindString) <> "" Then
    With Sheets("xml").Range("A:A")
        Set Rng = .Find(What:=FindString, _
                        After:=.Cells(.Cells.Count), _
                        LookIn:=xlValues, _
                        LookAt:=xlWhole, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)
        If Not Rng Is Nothing Then
            Application.Goto Rng, True
        Else
            MsgBox "Nothing found"
        End If
    End With
End If
Next i
 On Error GoTo 0 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:32:09.480

根据你的描述，这是我能想到的。这些行取决于“DB”表中有多少行

```
 Private Function CheckColumn(SheetN As String, col As String)   
 'checks if a column is in sheet returns errorif not found 
 On Error GoTo NotHere
     CheckColumn = WorksheetFunction.Match(col, Sheets(SheetN).Rows(1), 0)
 On Error GoTo 0

Exit Function
    NotHere:
        MsgBox col & " was not found in sheet " & SheetN    
End Function

Sub MatchNoMatch()
Dim rngDB As Range
Dim colname As String
Dim sh1 As String
Dim sh2 As String
Dim sh3 As String
Dim dbcol As Integer
Dim xmlcol As Integer
Dim rcol As Integer
Dim Firstrow As Long
Dim Lastrow As Long

'column you want to search up
colname = "FNAME"

'the sheets you want to find the column in
sh1 = "DB"
sh2 = "XML"
sh3 = "RESULT"

'Gets the column number from each sheet
dbcol = CheckColumn(sh1, colname)
xmlcol = CheckColumn(sh2, colname)
rcol = CheckColumn(sh3, colname)

'Sets the range for sh1 to do compare
With Worksheets(sh1)
    Firstrow = .UsedRange.Cells(1).Row + 1
    Lastrow = .UsedRange.Rows(.UsedRange.Rows.Count).Row
    Set rngDB = .Range(.Cells(Firstrow, dbcol), .Cells(Lastrow, dbcol))
End With

'checks each value against sh2 and writes in sh3\. If more values in sh2 they will be ignored
For Each e In rngDB
    If e.Value <> Worksheets(sh2).Cells(e.Row, xmlcol) Then
        Worksheets(sh3).Cells(e.Row, rcol + 1) = "NO MATCH"
    Else
        Worksheets(sh3).Cells(e.Row, rcol + 1) = "MATCH"
    End If
Next e
End Sub 
```

# java - MVC：如何处理复杂的模型？

> ID：13724747
> 
> 赞同：0
> 
> 时间：2012-12-05T13:50:46.637
> 
> 标签：java, oop, model-view-controller, model

我正在尝试在我的开发中应用 MVC（没有任何框架），但我遇到了很多麻烦。第一个麻烦：M！您如何处理具有深层数据结构和多个“根元素”的复杂模型？

这是一个非常简单的例子。假设我们的模型只有两个“点”。哪个是最好的模型实现？

## 想法 n°1：使用一个入口点和吸气剂

```
import java.awt.Point;
public class TwoPointsA {
    private final Point A = new Point();
    private final Point B = new Point();
    public Point getA() {
        return this.A;
    }
    public Point getB() {
        return this.B;
    }
} 
```

## 想法 2：使用一个入口点并委托方法

```
import java.awt.Point;
public class TwoPointsB {
    private final Point A = new Point();
    private final Point B = new Point();
    public void translateA(final int dx, final int dy) {
        this.A.translate(dx, dy);
    }
    public void translateB(final int dx, final int dy) {
        this.B.translate(dx, dy);
    }
} 
```

## 想法 3：使用多个入口点和吸气剂

```
import java.awt.Point;
public class TwoPointsC {
    public enum Points {
        A, B;
        private final Point value = new Point();
        public Point get() {
            return this.value;
        }
    }
} 
```

## 想法 4：使用多个入口点和委托方法

```
import java.awt.Point;
public class TwoPointsD {
    public enum Points {
        A, B;
        private final Point value = new Point();
        public void translate(final int dx, final int dy) {
            this.value.translate(dx, dy);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:23:45.057

MVC 是关于分离关注点的。

MODEL 和 VIEW 是对象的集合。

您的 VIEW 中的对象可能具有 BUTTON、WINDOW、TEXTAREA 等类型。

您的模型中的对象具有与您的域相关的类型，例如地址、邮政编码等

CONTROLLER 对象为您的模型提供接口。VIEW 对象与 CONTROLLER 对象对话以与您的系统进行交互。

传统上 VIEW 对象可以直接与 MODEL 对象对话，但不推荐这样做。

所有对象都符合OO原则，都是完整的对象。

# ruby-on-rails - 为什么我在使用 current_user.has_role 时看到“0”？

> ID：13724751
> 
> 赞同：1
> 
> 时间：2012-12-05T13:50:54.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, roles, cancan

在视图中，我为角色设置了验证（gems canscan 和 rolify）。

作为 HAML 中的示例

```
=if current_user.has_role? :admin
  = link_to current_user.name, '#' 
```

生成的 HTML

```
<a href="#">Administrator</a>
"
0

" 
```

为什么我看到“0”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:59:34.097

您应该`-`在 if 语句前使用 a ，可能：

```
- if current_user.has_role? :admin
  = link_to current_user.name, '#' 
```

当您使用`=`那里时，它将显示该表达式的结果，这不是您想要的。

# linux - 使用 grep 的不同结果

> ID：13724752
> 
> 赞同：1
> 
> 时间：2012-12-05T13:50:58.837
> 
> 标签：linux, shell, unix, grep

我有以下两个文件：

```
$cat file1
"2020051576BPI";"TS.1.BPI.20121129120000.005.txt";"Error";"'OF_USM_DBTI0000029'/'CO_SERVICE_SVCID11066'/'CO_FA_SC_600224'/. appears less times in the Input File (0), but should appear at least 1 times";""
"2019707951BPI";"TS.1.BPI.20121129120000.014.txt";"Error";"'OF_USM_DBTI0000029'/'CO_SERVICE_SVCID11066'/'CO_FA_SC_600224'/. appears less times in the Input File (0), but should appear at least 1 times";""
"Failed to parse string. Error msg: Failed to parse 'Fatal Error at file (buffer) "", line 366, column 17   Message: Expected whitespace'" 
```

```
$cat file2
"'OF_USM_DBTI0000029'/'CO_SERVICE_SVCID11066'/'CO_FA_SC_600224'/. appears less times in the Input File (0), but should appear at least 1 times"
"Failed to parse string. Error msg: Failed to parse 'Fatal Error at file (buffer) "", line 366, column 17   Message: Expected whitespace'" 
```

我正在阅读 file2 并使用 grep 我在 file1（大文件）中找到行。我这样做如下：

```
$cat file2|while read line
do
grep $line file1
done 
```

但我得到的结果如下：

```
grep: can't open appears
grep: can't open less
grep: can't open times
grep: can't open in
grep: can't open the
grep: can't open Input
grep: can't open File
grep: can't open (0),
grep: can't open but
grep: can't open should
grep: can't open appear
grep: can't open at
grep: can't open least
grep: can't open 1
grep: can't open times"
USM_GRPSET_BPI_ERROR_20121130_171648.TXT:"2020051576BPI";"TS.1.BPI.20121129120000.005.txt";"Error";"'OF_USM_DBTI0000029'/'CO_SERVICE_SVCID11066'/'CO_FA_SC_600224'/. appears less times in the Input File (0), but should appear at least 1 times";""
USM_GRPSET_BPI_ERROR_20121130_171648.TXT:"2019707951BPI";"TS.1.BPI.20121129120000.014.txt";"Error";"'OF_USM_DBTI0000029'/'CO_SERVICE_SVCID11066'/'CO_FA_SC_600224'/. appears less times in the Input File (0), but should appear at least 1 times";""
grep: can't open to
grep: can't open parse
grep: can't open string.
grep: can't open Error
grep: can't open msg:
grep: can't open Failed
grep: can't open to
grep: can't open parse
grep: can't open 'Fatal
grep: can't open Error
grep: can't open at
grep: can't open file
grep: can't open (buffer)
grep: can't open "",
grep: can't open line
grep: can't open 366,
grep: can't open column
grep: can't open 17
grep: can't open Message:
grep: can't open Expected
grep: can't open whitespace'"
USM_GRPSET_BPI_ERROR_20121130_171648.TXT:"2019714006BPI";"TS.1.BPI.20121129120000.005.txt";"Error";"Failed to parse string. Error msg: Failed to parse 'Fatal Error at file (buffer) "", line 366, column 17   Message: Expected whitespace'";"" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:53:01.323

尝试引用您要查找的内容：

```
while read line
do
  grep -F "$line" file1
done < file2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:27:35.973

您需要引用该模式。

但是，我怀疑您实际上应该做的是将字符串`file2`直接提供给 grep 彻底`-f`切换：

```
grep -Ff file2 file1 
```

然后任何固定的字符串`file2`都会从`file1`.

请注意，如果 的行`file2`是正则表达式，则应省略该`-F`开关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:53:24.293

grep的第一个参数加双引号

```
grep "$line" file1 
```

或者

```
grep "${line}" file1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:15:51.400

使用引号并放弃[cat 的无用用法](http://en.wikipedia.org/wiki/Cat_%28Unix%29#Useless_use_of_cat)：

```
while read line
do
  grep -F "$line" file1
done < file2 
```

# r - RMySQL dbWriteTable 以 MySQL 保留字作为名称的表

> ID：13724756
> 
> 赞同：0
> 
> 时间：2012-12-05T13:51:05.320
> 
> 标签：r, rmysql

我在使用 RMySQL 包中的 dbWriteTable 命令时遇到问题。我必须将记录附加到一个名为“order”的表名，这是 MySQL 中的一个保留字。

```
dbWriteTable(connection, "`order`", df, append = T) 
```

给出错误：

> 警告消息：在 mysqlWriteTable(conn, name, value, ...) 中：无法创建表：正在中止 mysqlWriteTable

只要我在反引号之间下订单，其他查询（如 SELECT）就可以正常工作。

任何想法如何执行 dbWriteTable 命令？不幸的是，重命名表格是没有选择的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:15:18.523

尝试将其写为限定名称，例如：mydb.order（不带反引号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T23:50:28.797

尝试以下

```
dbWriteTable(connection, "`order`", df, append = 1) 
```

# selenium - 用于隐藏输入类型的 Selenium IDE 命令

> ID：13724760
> 
> 赞同：1
> 
> 时间：2012-12-05T13:51:12.337
> 
> 标签：selenium, selenium-ide

我是 selenium 的新手，在 selenium IDE 中录制时，它没有录制下拉列表，我正在发布它的 html 代码。

如果 IDE 未记录事件，则会出现诸如元素被定义为隐藏的问题。

谢谢你的帮助 ：）

```
<input type="hidden" name="roleSpecification.industries.id" value="" />
<select name="roleSpecification.industries.id" size="3" data-placeholder="Any"   class="test chzn-select" multiple="multiple" id="roleSpecification_industries_id" >
<option value="1">Accounting</option>
<option value="2">Architecture &amp; Planning</option>
<option value="3">Arts</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:24:10.030

来自[硒参考](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)。

> **storeVisible（定位器，变量名）**
> 
> 确定指定元素是否可见。通过将 CSS 的“visibility”属性设置为“hidden”或将“display”属性设置为“none”，可以将元素呈现为不可见，无论是元素本身还是其祖先。如果元素不存在，此方法将失败。
> 
> **论据：**
> 
> *   定位器 - 元素定位器
>     
>     
> *   variableName - 存储结果的变量的名称。
>     
>     
> 
> **回报：**
> 
> 如果指定元素可见，则为 true，否则为 false
> 
> **相关断言，自动生成：**
> 
> *   断言可见（定位器）
> *   assertNotVisible ( 定位器 )
> *   验证可见（定位器）
> *   verifyNotVisible ( 定位器 )
> *   waitForVisible ( 定位器 )
> *   waitForNotVisible ( 定位器 )

您可以使用`verifyVisible(css=input[name="roleSpecification.industries.id"])`

# c++ - 如何编写可以采用任意容器（类型为“X”）的流式“运算符<<”？

> ID：13724766
> 
> 赞同：9
> 
> 时间：2012-12-05T13:51:39.827
> 
> 标签：c++, templates, stl, iostream

我有一个 C++ 类“ `X`”，如果要将它们***的容器***发送到`std::ostream`.

我最初专门为`std::vector<X>`：

```
std::ostream& operator << ( std::ostream &os, const std::vector<X> &c )
{
   // The specialized logic here expects c to be a "container" in simple
   // terms - only that c.begin() and c.end() return input iterators to X
} 
```

如果我想支持`std::ostream << std::deque<X>`或`std::ostream << std::set<X>`任何类似的容器类型，我知道的唯一解决方案是复制粘贴整个函数并仅更改函数签名！

有没有办法通用编码`operator << ( std::ostream &, const Container & )`？

（`Container`这里的“”可以是满足上述注释描述的任何类型。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T20:26:23.033

如果您之前阅读过此答案，您可能需要向下滚动到下面的 ADL 版本。它得到了很大改善。

首先，一个简短而实用的版本：

```
#include <iostream>
#include <type_traits>
template<typename T, typename Iterator, typename=void>
struct is_iterator_of_type: std::false_type {};

template<typename T, typename Iterator>
struct is_iterator_of_type<
  T,
  Iterator,
  typename std::enable_if<
    std::is_same<
      T,
      typename std::iterator_traits< Iterator >::value_type
    >::value
  >::type
>: std::true_type {};

template<typename Container>
auto operator<<( std::ostream& stream, Container const& c ) ->
  typename std::enable_if< is_iterator_of_type<int, typename Container::iterator>::value, std::ostream& >::type
{
  return stream << "int container\n";
}
template<typename Container>
auto operator<<( std::ostream& stream, Container const& c ) ->
  typename std::enable_if< is_iterator_of_type<double, typename Container::iterator>::value, std::ostream& >::type
{
  return stream << "double container\n";
} 
```

它只检测看起来有点像的东西`int`和`double`具有明显重载的容器。我建议更改`operator<<`. ;)

一条更合适的路线（感谢@Xeo）将是这个 adl-hack。我们创建了一个辅助命名空间，我们在其中 import`begin`和`end`from ，然后一些模板函数在和`std`上进行参数依赖查找（如果我们没有更紧密的绑定，请查看版本），然后使用这些函数来确定我们是什么传入的可以视为 X 上的容器：`begin``end``std``aux::adl_begin`

```
#include <iostream>
#include <vector>
#include <type_traits>
#include <iterator>
#include <set>

template<typename T, typename Iterator, typename=void>
struct is_iterator_of_type: std::false_type {};

template<typename T, typename Iterator>
struct is_iterator_of_type<
  T,
  Iterator,
  typename std::enable_if<
    std::is_same<
      T,
      typename std::iterator_traits< Iterator >::value_type
    >::value
  >::type
>: std::true_type {};

namespace aux {
  using std::begin;
  using std::end;
  template<class T>
  auto adl_begin(T&& v) -> decltype(begin(std::forward<T>(v))); // no implementation
  template<class T>
  auto adl_end(T&& v) -> decltype(end(std::forward<T>(v))); // no implementation
}

template<typename T, typename Container, typename=void>
struct is_container_of_type: std::false_type {};

template<typename T, typename Container>
struct is_container_of_type<
  T,
  Container,
  typename std::enable_if<
    // we only want this to be used if we iterable over doubles:
    is_iterator_of_type<
      T,
      decltype(void(aux::adl_begin(*(Container*)nullptr)), aux::adl_end(*(Container*)nullptr)) // ensure being and end work as bonus
    >::value
  >::type
>: std::true_type
{};

template<class Ch, class Tr, class Container>
auto operator<<( std::basic_ostream<Ch,Tr>& stream, Container const& c ) ->
  typename std::enable_if<
    is_container_of_type<double, Container>::value,
    decltype(stream)
  >::type
{
  stream << "'double' container: [ ";
  for(auto&& e:c)
    stream << e << " ";
  return stream << "]";
}

int main() {
  std::cout << std::vector<double>{1,2,3} << "\n";
  std::cout << std::set<double>{3.14,2.7,-10} << "\n";
  double array[] = {2.5, 3.14, 5.0};
  std::cout << array << "\n";
} 
```

有了这个，不仅`double`s 的数组算作容器 over `double`，所以在其命名空间中定义 a`begin`和`end`函数的任何东西都可以返回超过 double 的迭代器，该迭代器将容器作为参数也可以工作。这与`for(auto&& i:container)`查找的工作方式相匹配（完美？相当好？），“容器”的良好定义也是如此。

但是请注意，随着我们添加更多这些装饰，具有我们正在使用的所有 C++11 功能的当前编译器将越来越少。我相信以上在 gcc 4.6 中编译，但不是 gcc 4.5.*。

...

这是原始的短代码，周围有一些测试框架：（如果你的编译器抛出它很有用，你可以在下面看到它出错的地方）

```
#include <iostream>
#include <type_traits>
#include <vector>
#include <iostream>
#include <set>

template<typename T, typename Iterator, typename=void>
struct is_iterator_of_type: std::false_type {};

template<typename T, typename Iterator>
struct is_iterator_of_type<
  T,
  Iterator,
  typename std::enable_if<
    std::is_same<
      T,
      typename std::iterator_traits< Iterator >::value_type
    >::value
  >::type
>: std::true_type {};

void test1() {
  std::cout << is_iterator_of_type<int, std::vector<int>::iterator>::value << "\n";
}
template<typename T, typename Container>
auto foo(Container const&) -> typename std::enable_if< is_iterator_of_type<T, typename Container::iterator>::value >::type
{
  std::cout << "Container of int\n";
}
template<typename T>
void foo(...)
{
  std::cout << "No match\n";
}
void test2() {
  std::vector<int> test;
  foo<int>(test);
  foo<int>(test.begin());
  foo<int>(std::set<int>());
}
template<typename Container>
auto operator<<( std::ostream& stream, Container const& c ) ->
  typename std::enable_if< is_iterator_of_type<int, typename Container::iterator>::value, std::ostream& >::type
{
  return stream << "int container\n";
}
void test3() {
  std::vector<int> test;
  std::cout << test;
  std::set<int> bar;
  std::cout << bar;
}
template<typename Container>
auto operator<<( std::ostream& stream, Container const& c ) ->
  typename std::enable_if< is_iterator_of_type<double, typename Container::iterator>::value, std::ostream& >::type
{
  return stream << "double container\n";
}
void test4() {
  std::vector<int> test;
  std::cout << test;
  std::set<int> bar;
  std::cout << bar;
  std::vector<double> dtest;
  std::cout << dtest;
}
void test5() {
  std::vector<bool> test;
  // does not compile (naturally):
  // std::cout << test;
}
template<typename Container>
auto operator<<( std::ostream& stream, Container const& c ) ->
  typename std::enable_if< is_iterator_of_type<bool, typename Container::iterator>::value, std::ostream& >::type
{
  return stream << "bool container\n";
}
void test6() {
  std::vector<bool> test;
  // now compiles:
  std::cout << test;
}
int main() {
  test1();
  test2();
  test3();
  test4();
  test5();
  test6();
} 
```

以上大约一半是测试样板。`is_iterator_of_type`模板和`operator<<`重载是您想要的。

我假设类型容器`T`是任何具有 typedef 的类`iterator`，其`value_type`类型为`T`. 这将涵盖每个`std`容器，以及大多数自定义容器。

执行运行链接：http: [//ideone.com/lMUF4i——](http://ideone.com/lMUF4i)请注意，一些编译器不支持完整的 C++11 SFINAE，可能需要 tomfoolery 才能使其工作。

留下的测试用例可以帮助某人检查他们的编译器对这些技术的支持程度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:14:56.323

```
template<template<class T, class A> class container>
std::ostream& opertaor << ( std::ostream&, const container<X, std::allocator<X> > &)
{
} 
```

如果您的实现向量、列表等具有超过 2 个模板参数，这将不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T14:06:21.190

简单但不优雅 - 下一个维护您的代码的人可能会喜欢缺少花哨的模板！在实践中，我会将“打印”方法隐藏在 cpp 中，或者至少隐藏在`Detail`命名空间中。

```
#include <iostream>
#include <vector>
#include <deque>
#include <list>
#include <set>
#include <multiset>

class X {};

template <typename T>
std::ostream& Print(std::ostream& os, const T& container)
{
    for(auto ii = container.cbegin(); ii != container.cend(); ++ii);
        //etc
        //
    return os;
}

std::ostream& operator<<(std::ostream& os, const std::vector<X>& v) { return Print(os, v); }
std::ostream& operator<<(std::ostream& os, const std::deque<X>& v) { return Print(os, v); }
std::ostream& operator<<(std::ostream& os, const std::list<X>& v) { return Print(os, v); }
std::ostream& operator<<(std::ostream& os, const std::set<X>& v) { return Print(os, v); }
std::ostream& operator<<(std::ostream& os, const std::multiset<X>& v) { return Print(os, v); }

int main()
{
            // Example
    std::vector<X> v;
    std::cout << v;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:15:21.550

如果您将问题稍微重新定义为为任何提供基于范围的 Widget 访问的类提供特殊的流式传输行为，而不是为所有 Widget 容器提供特殊行为，一种解决方案是：

```
 template <class Container>
  std::ostream& operator << (std::ostream &out, const Container &container) 
  {
    for(const Widget& c : container) {
      out << c;
      out.put(' ');
    }
    return out;
  } 
```

这适用于`std::vector`、`std::list`、`std::deque`和`std::set`。如果您尝试流式传输不提供对 Widget 范围访问的内容，例如`std::list<int>`，您将收到编译错误，因为 const Widget 引用无法绑定到`std::list<int>`. 如果您为运算符 << 提供重载，`std::list<int>`则代码将编译。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T14:57:46.200

虽然@razeh 有一个很好的解决方案，但如果您需要花哨并专门打印容器的容器`X`和容器的容器`Y`，您可以执行以下操作：

```
 // Types for which you want specialized streaming of containers
    // We need some identifiable typedef in these types
    struct  X { typedef void X_type; };
    struct  Y { typedef void Y_type; };

    // Wrappers for implementing streaming logic for each type        

template <typename C>
struct WrapX
{
    WrapX(const C& c) : c(c) { }
    const C& c;

    std::ostream& stream(std::ostream& os)
    {
         // Special container of X printing
         return os;
    }
};

template <typename C>
struct WrapY
{
    WrapY(const C& c) : c(c) { }
    const C& c;

    std::ostream& stream(std::ostream& os)
    {
        // Special container of Y printing
        return os;
    }
};

    // Wrap functions, by using a 'dummy' parameter
    // we can get the compiler to select the function based
    // on the incoming type

template <typename C >
WrapX<C> Wrap(const C& c,  typename C::value_type::X_type* = 0) { return WrapX<C>(c); }

template <typename C>
WrapY<C> Wrap(const C& c, typename C::value_type::Y_type* = 0) { return WrapY<C>(c); }

    // Overload - same problem as @razeh solution, this is a VERY generic
    // function and may clash with other declarations. Keep it closely confined to
    // where you need it.
template <typename C>
std::ostream& operator<<(std::ostream& os, const C& c) { return Wrap(c).stream(os);  }

int main()
{
    std::vector<X> vx;
    std::cout << vx;

        std::vector<Y> vy;
        std::cout << vy;
} 
```

# database - 随处可用的 Heroku 数据库

> ID：13724768
> 
> 赞同：0
> 
> 时间：2012-12-05T13:52:00.107
> 
> 标签：database, heroku

我正在使用 postgres 数据库在 heroku 上运行 python 应用程序。

*如果我在 PGAdmin 中输入凭据或将其添加到本地*环境中的 django 安装中，我就可以开始写入和读取操作。

虽然调试起来非常舒适，但感觉有点不安全。

当然，它是 ssl，但这是一个正常的用例吗？

如果不是，我将如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:57:05.230

I don't know if you should consider it the normal use case but to be on the safe side you should "fork" the database and work on this new copy. More here: [https://postgres.heroku.com/fork](https://postgres.heroku.com/fork)

# clojure - 在clojure中获取具有最大值的哈希元素

> ID：13724769
> 
> 赞同：4
> 
> 时间：2012-12-05T13:52:11.590
> 
> 标签：clojure, hashmap

如何在clojure hashmap中找到最大值元素？假设有以下哈希图：

```
{:a 1 :b 3 :c 4 :d 18 :e 9} 
```

在这种情况下，我们需要 :d 作为结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T14:03:47.897

我想这是你的解决方案

```
(key (apply max-key val {:a 1 :b 3 :c 4 :d 18 :e 9}))
-> :d 
```

# c# - 存储“大量”字符串的数据类型建议？

> ID：13724770
> 
> 赞同：1
> 
> 时间：2012-12-05T13:52:12.790
> 
> 标签：c#, .net, hash, dictionary, storage

我有一个非常定期查询数据库的应用程序。它返回多达数百万个字符串，其中绝大多数是 bieng 重复。我需要将所有这些记录存储在内存中，并试图最小化占用空间。

我目前的设计是在每个字符串上调用 GetHashCode()，然后存储哈希而不是字符串本身。

然后我尝试将其添加到`Dictionary<hashcode,string>()`结构中。我还保留了第二个字典，`Dictionary<hashcode,count>()`随着更多条目使用该字符串，该字典将递增\递减。

在条目处理方法中，我递减计数器，如果使用量降至零，则从字典中删除字符串。

所以，有几个问题：

这是愚蠢的差事吗？是否有一些我可以使用的数据类型可以比与这个巨头合作节省大量时间\精力？

我希望我的字符串表是线程安全的（目前不是）。使用 ConcurrentDictinary 是我最好的选择吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:54:07.163

这样做的主要问题是两个不同的字符串可以具有相同的哈希码。

听起来你让这变得比它需要的更复杂。你需要的是实习：

[http://msdn.microsoft.com/en-us/library/system.string.intern.aspx](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)

CLR 已经维护了一个字符串实例表以节省内存。

**更新**

但是...您应该牢记文档中的警告：在 CLR 卸载之前，不会对实习字符串进行垃圾收集，即它们在您的应用程序域的生命周期内一直存在。

但是您可以很容易地自己实现相同的模式：

```
class LocalStringInterner
{
    private Dictionary<string, string> _strings = new Dictionary<string, string>();

    public string Intern(string str)
    {
        string interned;
        if (_strings.TryGetValue(str, out interned))
            return interned;

        _strings.Add(str, str);
        return str;
    }
} 
```

这样，当您不再需要那组字符串时，您可以放弃`LocalStringInterner`.

为了使其在多个线程中使用安全，您可以将主体包装`Intern`在一个`lock(_strings)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:06:23.317

也许 md5-Hash 可以帮助你。它应该（理论上）是唯一的，并且受到大多数数据库的支持（如果不是 C# 将帮助您）。

MySQL：

```
SELECT name, md5(name)
FROM user 
```

也就是说，我会考虑一种更好的数据库方法。

如果您在服务器端的每个字符串都有一个唯一的 id，这应该是一件容易的事。

假设您有一个名为`string_resources`auto_increment`id`列和`varchar`字段的表。我还将添加一个唯一索引`value`以确保您不会两次存储字符串。

```
|id     | value          |
|1      | Hello          |
|2      | World          |
...
|145789 | Something else | 
```

现在您可以将 int 值存储在字典中

```
md5: 128bit
int32: 32bit  // <-- You Don't Say? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:37:41.613

我没有看到获取哈希码并将字符串存储在 a`Dictionary<hash,string>`中以及将计数存储在单独的字典中的意义。您可以使用字符串本身作为键，字典将自动（内部）创建和存储哈希码。因此，仅使用一本字典`Dictionary<string,count>`就足够了。您还可以通过 . 从字典中检索字符串`dict.Keys`。

两个不同字符串的哈希码可以相同。这称为碰撞。自动处理这些`Dictionary<TKey,TValue>`碰撞。

`ConcurrentDictinary<TKey,TValue>`似乎是合适的；但是，我对此没有任何经验。

# spring-mvc - 使用属性中的值列表自动装配 bean

> ID：13724773
> 
> 赞同：2
> 
> 时间：2012-12-05T13:52:16.860
> 
> 标签：spring-mvc, javabeans

我的 XML 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="filterBySlic" class="ca.ups.tundra.msg.FilterMessagesBySlic">
        <property name="slicList">
            <list><value>4196</value><value>1101</value><value>2795</value></list>
        </property>
        <property name="messageList">
            <list><value>7762</value><value>7765</value><value>7766</value><value>7767</value><value>7768</value></list>
        </property>
        <property name="serviceLevelList">
            <list><value>E1</value><value>E3</value><value>E4</value><value>29</value></list>
        </property>
        <property name="serviceTypeList">
            <list><value>029</value><value>096</value></list>
        </property>
    </bean>

</beans> 
```

这是我在课堂上使用的：

```
ApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"spring-pred-filter.xml"});

FilterMessagesBySlic filterConfig = (FilterMessagesBySlic)context.getBean("filterBySlic"); 
```

我访问值列表的条件；

```
filterConfig.getSiteList().contains(msgSlic) 
```

这工作正常。相反，我需要使用`@Autowired`来访问这些值列表！任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:45:53.857

您可以将列表从匿名内部 bean 更改为普通 bean，并将它们注入其他 bean，如下所示：

**xml配置**：

```
<util:list id="slicList" value-type="java.lang.String">
    <value>4196</value>
    <value>1101</value>
    <value>2795</value>
</util:list> 
```

**在 bean 中注入 slicList**：

```
public class Foo {
    @Resource(name = "slicList")
    List<String> messageList;
} 
```

这当然意味着实例`Foo`是由spring管理的。

是你要找的吗？

# mysql - 如何在 find() cakephp 中指定范围

> ID：13724774
> 
> 赞同：1
> 
> 时间：2012-12-05T13:52:18.343
> 
> 标签：mysql, cakephp, range

我是 CakePHP 的新手，我尝试过搜索，但找不到这个问题的答案。

简单地说，我希望查询是这样的：

```
SELECT id from posts WHERE id IN (15,18,20); 
```

但我不知道在`find()`电话中放什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:07:18.467

这在[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)的 CakePHP 在线手册中有介绍。只需在您的 : 中指定一个数组`conditions`：

```
<?php
$ids = array(1,2,3,4,5,6);
$results = $this->Post->find('all', array(
    'conditions' => array(
        'Post.id' => $ids
    )
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:01:42.503

从模型来看，它会是这样的：

```
$ids   = array(15, 18, 20);
$posts = $this->find('all', array(
    'conditions'  => array(
        'Post.id' => $ids
     )
); 
```

在条件数组中，您可以传递要在“IN”子句中使用的值数组

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T14:01:17.510

从帖子控制器内部

```
$id_array = array(15, 18, 20);
$this->Post->find('all', array('Post.id' => $id_array)); 
```

有关该主题的更多信息 [http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T14:02:29.130

`$conditions = array("Post.title" => array("First post", "Second post", "Third post")) $this->find(all,array($conditions));`

如果它有效，请检查它。

# php - Facebook 应用程序身份验证

> ID：13724776
> 
> 赞同：0
> 
> 时间：2012-12-05T13:52:30.370
> 
> 标签：php, facebook, facebook-graph-api, oauth, oauth-2.0

我使用 Manuel Lemos 的**OAuth 2.0** PHP 库，最近我从[https://www.facebook.com/settings?tab=applications](https://www.facebook.com/settings?tab=applications)中删除了我的应用程序，现在当我尝试授权我的应用程序时，我收到了这个错误。

> **OAuth 客户端错误**
> 
> 错误：无法访问 API 调用：返回了意外的响应状态 400 响应：{"error":{"message":"验证访问令牌时出错：用户 123456 未授权应用程序 987654321。","type ":"OAuthException","code":190,"error_subcode":458}}

有谁知道如何重新验证我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:06:31.427

解决。这只是一个**cookie**问题。嗯……感谢上帝。(y)

# razor - 通过razor mvc从下拉列表中插入选定的值

> ID：13724777
> 
> 赞同：1
> 
> 时间：2012-12-05T13:52:32.920
> 
> 标签：razor, asp.net-mvc-4

> 嗨，我有一个项目，我的任务之一是通过 razor mvc 从下拉列表中插入选定的值到 DB 字段。我做了我的代码，但没有插入任何值，DDL 也有来自 DB 的项目。我的剃须刀 mvc4 项目。

```
 public ActionResult Create()
    {
        var data = db.Categories.ToList().Distinct();

        foreach (var t in data)
        {

            s.Text = t.Name;
            s.Value = t.Cat_ID.ToString();
            items.Add(s);
        }
        ViewBag.Parent = items;

        return View();
    }

[HttpPost]
    public ActionResult Create(Category category, IEnumerable<HttpPostedFileBase> files)
    {

        if (Request.Files.Count > 0)
        {
            var uploadedFile = Request.Files[0];

            var fileSavePath = "";
            var fileName = "";

            fileName = Path.GetFileName(uploadedFile.FileName);
            fileSavePath = Server.MapPath("~/App_Data/Uploads/" + fileName);

            uploadedFile.SaveAs(fileSavePath);
            category.Path = "~/App_Data/Uploads/" + fileName;
        }

        var data = db.Categories.ToList().Distinct();
        List<SelectListItem> items = new List<SelectListItem>();
        foreach (var t in data)
        {
            SelectListItem s = new SelectListItem();
            s.Text = t.Name;
            s.Value = t.Cat_ID.ToString();
            items.Add(s);
            if (s.Selected)
            { category.Parent_ID = int.Parse(s.Value); }
        }

        db.Categories.Add(category);
        db.SaveChanges();

        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:45:14.123

您正在同一个循环中创建新的 selectListItem 。对于任何项目，您都将被选中 == true。

如果您的模型绑定到所需的下拉列表，则可能是用户在 UI 上（发布之前）选择的项目，存在于类别参数中。

我怀疑这是一个逻辑错误。

问候， 马赫什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:34:18.547

嗨，您的代码应该是这样的。我假设您有具有特定结构的模型。如果贝洛代码没有给你一个线索，那么请。说明您的视图和模型如何以及您的要求是什么。

希望这可以帮助。

```
[HttpPost]
public ActionResult Create(Category category, IEnumerable<HttpPostedFileBase> files)
{

    if (Request.Files.Count > 0)
    {
        var uploadedFile = Request.Files[0];

        var fileSavePath = "";
        var fileName = "";

        fileName = Path.GetFileName(uploadedFile.FileName);
        fileSavePath = Server.MapPath("~/App_Data/Uploads/" + fileName);

        uploadedFile.SaveAs(fileSavePath);
        category.Path = "~/App_Data/Uploads/" + fileName;
    }

    var data = db.Categories.ToList().Distinct();

    //I assume that you need to find the category from db.Caegories which user has selected on the UI and submited the form.
    //I assume the parameter category is the one which you want to find from DB.
    //category is your model has Parent_Id property which is bound to UI control (ie. dropdown) 
    var categoryToSave = (from c in data
                            where c.Cat_ID == category.Parent_ID
                            select c).firstOrDefault();
    if(categoryToSave!=null)
    {
//I believe here you want to save this category to some other table. 
//Now you have got the category tht user has selected on UI. 
//Write the further logic here.....

        db.SaveChanges();
    }
    return RedirectToAction("Index");
} 
```

问候， 马赫什

# selenium - 如何在 Chrome 中运行 Selenium WebDriver 测试用例

> ID：13724778
> 
> 赞同：160
> 
> 时间：2012-12-05T13:52:34.030
> 
> 标签：selenium, webdriver, selenium-webdriver, selenium-chromedriver

我试过这个

```
WebDriver driver = new ChromeDriver(); 
```

但我得到的错误是

> 失败的测试： setUp(com.TEST)：驱动程序可执行文件的路径必须由 webdriver.chrome.driver 系统属性设置；有关更多信息，请参阅[此处的代码](http://code.google.com/p/selenium/wiki/ChromeDriver)。可以从此[链接下载最新版本](http://code.google.com/p/chromedriver/downloads/list)

如何让 Chrome 测试 Selenium WebDriver 测试用例？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-12-05T18:00:28.900

您需要从以下位置下载可执行驱动程序： [ChromeDriver 下载](https://sites.google.com/a/chromium.org/chromedriver/downloads)

然后在创建驱动程序对象之前使用以下内容（已按正确顺序显示）：

```
System.setProperty("webdriver.chrome.driver", "/path/to/chromedriver");
WebDriver driver = new ChromeDriver(); 
```

这是从[ChromeDriver 文档](https://sites.google.com/a/chromium.org/chromedriver/)中最有用的指南中提取的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-08T05:51:55.737

[从Chrome 驱动程序](https://sites.google.com/a/chromium.org/chromedriver/)下载 Google Chrome 驱动程序的更新版本。

[请在此处](https://chromedriver.storage.googleapis.com/2.41/notes.txt)阅读发行说明。

如果 Chrome 浏览器更新了，那么您需要从上面的链接下载新的 Chrome 驱动程序，因为它会与新的浏览器版本兼容。

```
public class chrome
{

    public static void main(String[] args) {

        System.setProperty("webdriver.chrome.driver", "/path/to/chromedriver");
        WebDriver driver = new ChromeDriver();

        driver.get("http://www.google.com");
    }

} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-05T14:18:18.017

您应该将 chromeDriver 下载到一个文件夹中，然后将此文件夹添加到您的 PATH 环境变量中。

您必须重新启动控制台才能使其正常工作。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-05-10T00:01:04.393

如果您在 macOS 机器上使用[Homebrew](https://en.wikipedia.org/wiki/Homebrew_(package_manager))，您可以使用以下命令：

```
brew tap homebrew/cask && brew cask install chromedriver 
```

之后它应该可以正常工作，无需其他配置。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-30T17:16:37.377

您需要安装 Chrome 驱动程序。[您可以使用NuGet](https://en.wikipedia.org/wiki/NuGet)安装此包，如下所示：

[![](../Images/56cc9955a9f2cf4144967532c219a227.png)](https://i.stack.imgur.com/WhojI.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-15T13:27:19.830

您可以使用以下代码在 Chrome 中使用 Selenium WebDriver 运行测试用例：

```
import java.io.IOException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

public class ChromeTest {

    /**
     * @param args
     * @throws InterruptedException
     * @throws IOException
     */
    public static void main(String[] args) throws InterruptedException, IOException {
        // Telling the system where to find the Chrome driver
        System.setProperty(
                "webdriver.chrome.driver",
                "E:/chromedriver_win32/chromedriver.exe");

        WebDriver webDriver = new ChromeDriver();

        // Open google.com
        webDriver.navigate().to("http://www.google.com");

        String html = webDriver.getPageSource();

        // Printing result here.
        System.out.println(html);

        webDriver.close();
        webDriver.quit();
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-11-29T18:59:40.327

`chromedriver` [在此处](https://sites.google.com/a/chromium.org/chromedriver/downloads)查找最新版本。下载后，将其解压缩到 Python 安装的根目录下，例如 ，`C:/Program Files/Python-3.5`仅此而已。

您甚至不需要在任何地方指定路径和/或添加`chromedriver`到您的路径等。我只是在一个干净的 Python 安装上完成了它，并且有效。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-03-23T12:54:12.360

下载最新版本的 Chrome 驱动程序并使用以下代码：

```
System.setProperty("webdriver.chrome.driver", "path of chromedriver.exe");
WebDriver driver = new ChromeDriver();
driver.manage().window().maximize();
Thread.sleep(10000);
driver.get("http://stackoverflow.com"); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-02T09:49:22.927

在 Ubuntu 上，您可以简单地安装`chromium-chromedriver`软件包：

```
apt install chromium-chromedriver 
```

请注意，这也会安装过时的 Selenium 版本。要安装最新的 Selenium：

```
pip install selenium 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-08T12:19:39.153

前面的所有答案都是正确的。以下是对问题和解决方案的深入探讨。

例如 Selenium 中的驱动程序构造函数

```
WebDriver driver = new ChromeDriver(); 
```

搜索驱动程序可执行文件，在这种情况下，Google Chrome 驱动程序搜索 Chrome 驱动程序可执行文件。如果服务无法找到可执行文件，则会引发异常。

这就是异常的来源（注意检查状态方法）

```
 /**
   *
   * @param exeName Name of the executable file to look for in PATH
   * @param exeProperty Name of a system property that specifies the path to the executable file
   * @param exeDocs The link to the driver documentation page
   * @param exeDownload The link to the driver download page
   *
   * @return The driver executable as a {@link File} object
   * @throws IllegalStateException If the executable not found or cannot be executed
   */
  protected static File findExecutable(
      String exeName,
      String exeProperty,
      String exeDocs,
      String exeDownload) {
    String defaultPath = new ExecutableFinder().find(exeName);
    String exePath = System.getProperty(exeProperty, defaultPath);
    checkState(exePath != null,
        "The path to the driver executable must be set by the %s system property;"
            + " for more information, see %s. "
            + "The latest version can be downloaded from %s",
            exeProperty, exeDocs, exeDownload);

    File exe = new File(exePath);
    checkExecutable(exe);
    return exe;
  } 
```

以下是引发异常的检查状态方法：

```
 /**
   * Ensures the truth of an expression involving the state of the calling instance, but not
   * involving any parameters to the calling method.
   *
   * <p>See {@link #checkState(boolean, String, Object...)} for details.
   */
  public static void checkState(
      boolean b,
      @Nullable String errorMessageTemplate,
      @Nullable Object p1,
      @Nullable Object p2,
      @Nullable Object p3) {
    if (!b) {
      throw new IllegalStateException(format(errorMessageTemplate, p1, p2, p3));
    }
  } 
```

**解决方案**：在创建驱动程序对象之前设置系统属性，如下所示。

```
System.setProperty("webdriver.gecko.driver", "path/to/chromedriver.exe");
WebDriver driver = new ChromeDriver(); 
```

以下是驱动程序服务搜索驱动程序可执行文件的代码片段（适用于 Chrome 和 Firefox）：

**铬合金：**

```
 @Override
    protected File findDefaultExecutable() {
      return findExecutable("chromedriver", CHROME_DRIVER_EXE_PROPERTY,
          "https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver",
          "http://chromedriver.storage.googleapis.com/index.html");
    } 
```

**火狐：**

```
@Override
 protected File findDefaultExecutable() {
      return findExecutable(
        "geckodriver", GECKO_DRIVER_EXE_PROPERTY,
        "https://github.com/mozilla/geckodriver",
        "https://github.com/mozilla/geckodriver/releases");
    } 
```

其中 CHROME_DRIVER_EXE_PROPERTY = "webdriver.chrome.driver" 和 GECKO_DRIVER_EXE_PROPERTY = "webdriver.gecko.driver"

其他浏览器的情况类似，以下是可用浏览器实现列表的快照：

[![在此处输入图像描述](../Images/9fe0913e688e2e282f0aaf7ccb414be4.png)](https://i.stack.imgur.com/EGh8P.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-12T16:37:09.523

要在 Chrome 中运行 Selenium WebDriver 测试用例，请执行以下步骤：

1.  首先，设置属性和Chrome驱动路径：

    ```
    System.setProperty("webdriver.chrome.driver", "/path/to/chromedriver"); 
    ```

2.  初始化 Chrome 驱动的对象：

    ```
    WebDriver driver = new ChromeDriver(); 
    ```

3.  将 URL 传递到`get`WebDriver 的方法中：

    ```
    driver.get("http://www.google.com"); 
    ```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-25T22:03:25.900

我将二进制文件包含到我的项目资源目录中，如下所示：

```
src\main\resources\chrome\chromedriver_win32.zip
src\main\resources\chrome\chromedriver_mac64.zip
src\main\resources\chrome\chromedriver_linux64.zip 
```

代码：

```
import org.apache.commons.io.IOUtils;
import org.apache.commons.lang3.SystemUtils;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

import java.io.*;
import java.nio.file.Files;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

public WebDriver getWebDriver() throws IOException {
    File tempDir = Files.createTempDirectory("chromedriver").toFile();
    tempDir.deleteOnExit();
    File chromeDriverExecutable;

    final String zipResource;
    if (SystemUtils.IS_OS_WINDOWS) {
        zipResource = "chromedriver_win32.zip";
    } else if (SystemUtils.IS_OS_LINUX) {
        zipResource = "chromedriver_linux64.zip";
    } else if (SystemUtils.IS_OS_MAC) {
        zipResource = "chrome/chromedriver_mac64.zip";
    } else {
        throw new RuntimeException("Unsuppoerted OS");
    }

    try (InputStream is = getClass().getResourceAsStream("/chrome/" + zipResource)) {
        try (ZipInputStream zis = new ZipInputStream(is)) {
            ZipEntry entry;
            entry = zis.getNextEntry();
            chromeDriverExecutable = new File(tempDir, entry.getName());
            chromeDriverExecutable.deleteOnExit();
            try (OutputStream out = new FileOutputStream(chromeDriverExecutable)) {
                IOUtils.copy(zis, out);
            }
        }
    }

    System.setProperty("webdriver.chrome.driver", chromeDriverExecutable.getAbsolutePath());
    return new ChromeDriver();
} 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2015-02-21T07:08:49.653

下载chromedriver的EXE文件，解压到当前项目位置。

这是链接，我们可以在其中下载最新版本的chromedriver：

[https://sites.google.com/a/chromium.org/chromedriver/](https://sites.google.com/a/chromium.org/chromedriver/)

这是启动浏览器并导航到 URL 的简单代码。

```
System.setProperty("webdriver.chrome.driver", "path of chromedriver.exe");

WebDriver driver = new ChromeDriver();

driver.get("https://any_url.com"); 
```

# xpath - Xpath - 如何选择兄弟节点包含某些文本的子节点

> ID：13724780
> 
> 赞同：1
> 
> 时间：2012-12-05T13:52:43.887
> 
> 标签：xpath, subtree

我想使用 XPath 来选择包含`<name>`带有“ABC”的 -tag 的子树，而不是来自以下 xml 的另一个。这可能吗？作为一个小问题，我将使用哪些关键字在 Google 上找到类似的内容（例如，通过我将拥有术语的属性选择子树）？

```
<root>
  <operation>
    <name>ABC</name>
    <description>Description 1</description>
  </operation>
  <operation>
    <name>DEF</name>
    <description>Description 2</description>
  </operation>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:05:11.747

**使用**：

```
/*/operation[name='ABC'] 
```

**对于你的第二个问题**：我强烈建议*不要*依赖在线资源（有些不太好），而是阅读一本关于 XPath 的好书。

**请参阅此处列出的一些资源**： [https ://stackoverflow.com/questions/339930/any-good-xslt-tutorial-book-blog-site-online/341589#341589](https://stackoverflow.com/questions/339930/any-good-xslt-tutorial-book-blog-site-online/341589#341589)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T06:16:00.477

对于您的第一个问题，我认为更准确的方法是：
`//operation[./name[text()='ABC']]`.
而根据[这个](https://stackoverflow.com/questions/3655549/xpath-containstext-some-string-doesnt-work-when-used-with-node-with-more)，我们也可以做到：
`//operation[./name[text()[.='ABC']]]`

# c# - 来自文本文件c#的二维数组

> ID：13724781
> 
> 赞同：-3
> 
> 时间：2012-12-05T13:52:45.287
> 
> 标签：c#, arrays, file, text, 2d

我有一个看起来像这样的文本文件

```
1 2 3 4 5 6 7 8 9 10
11 12 13 14 15 16 17 18 19 20
21 22 23 24 25 26 27 28 29 30
31 32 33 34 35 36 37 38 39 40
41 42 43 44 45 46 47 48 49 50
51 52 53 54 55 56 57 58 59 60
61 62 63 64 65 66 67 68 69 70
71 72 73 74 75 76 77 78 79 80
81 82 83 84 85 86 87 88 89 90
91 92 93 94 95 96 97 98 99 100 
```

在 10 x 10 网格中。使用 c# 我需要获取文本文件并将其转换为整数的二维数组，以便我可以在独立级别上操作整数。请帮忙解决不了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T14:11:44.817

```
String input = File.ReadAllText( @"c:\myfile.txt" );

int i = 0, j = 0;
int[,] result = new int[10, 10];
foreach (var row in input.Split('\n'))
{
    j = 0;
    foreach (var col in row.Trim().Split(' '))
    {
        result[i, j] = int.Parse(col.Trim());
        j++;
    }
    i++;
} 
```

索引将从**0**开始，因此如果您想访问**第四行的****第 10**列：

 **```
Console.WriteLine(result[3,9]); //40 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T13:58:08.373

锯齿状阵列？

```
int[][] list = File.ReadAllLines("a.txt")
                   .Select(l => l.Split(' ').Select(i => int.Parse(i)).ToArray())
                   .ToArray(); 
```

**编辑**

[您可以在此处](https://stackoverflow.com/a/1814063/932418)使用 JaggedToMultidimensional

```
int[,] list2 = JaggedToMultidimensional(list); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T13:57:34.673

也许：

```
var result = File.ReadLines(path)
    .SelectMany((l, i) => l.Split()
                           .Select(s => new int[] { i, int.Parse(s) })
                           .ToArray())
    .ToArray(); 
```

**编辑**：虽然这是一个参差不齐的数组`int[][]`。**

# html - Facebook 元错误，但不是吗？

> ID：13724782
> 
> 赞同：0
> 
> 时间：2012-12-05T13:52:49.300
> 
> 标签：html, facebook, facebook-opengraph, meta

我有一个错误，我无法理解为什么使用 facebook 元...

这是页面： http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fmikrobusz-berles.com%2Fhir%2Fkedvezmenyek%2F2012-12-05%2Fteli_mikrobusz_berles_kedvezmenyesen_utazasi_iridaknak.html](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmikrobusz-berles.com%2Fhir%2Fkedvezmenyek%2F2012-12-05%2Fteli_mikrobusz_berles_kedvezmenyesen_utazasi_iridaknak.html)

这是我的 Facebook 元数据。

```
<meta property="og:title" content="Téli mikrobusz bérlés kedvezményesen utazási iridáknak"/>
<meta property="og:image" content="http://mikrobusz-berles.com/upload/images/m1.png"/>
<meta property="og:site_name" content="mikrobusz-berles.com"/>
<meta property="og:description" content="<p>
    A kedvezmény időtartama: 2012\. Nov. 1-től 2013\. Márc. 1-ig.<br />
    <br />
    Síutakat szervező utazási irodák jelentkezését várjuk partneri együttműködés céljából. A weboldalunkon feltüntetett áraknál is kedvezményesebb bérlési lehetpséget kínálunk, további részletekér vegye fel velünk a kapcsolatot!</p>
"/> 
```

它包含在 HEAD HEAD 标签之间。但是 facebook 说：

> 正文中的元标记：您的 . 这可能是因为您的格式错误并且它们在解析树中的位置较低，或者您不小心将 Open Graph 标记放在了错误的位置。无论哪种方式，您都需要在标签可用之前对其进行修复。

我应该怎么办？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:56:39.147

the metatags should be on the `<head>` part of your site

apparently you don't have one

you can see what facebook sees on your site [here](http://developers.facebook.com/tools/debug/og/echo?q=http://mikrobusz-berles.com/hir/kedvezmenyek/2012-12-05/teli_mikrobusz_berles_kedvezmenyesen_utazasi_iridaknak.html)

edit: after looking in your page's source code - you don't have an opening `<html>` tag (right in the beginning of the page - after the `DOCTYPE` decleration

moreover - you have some junk printed in the start of the page, try removing it

# html - 如何保持垂直对齐文本在中间独立于字体系列和字体大小？

> ID：13724789
> 
> 赞同：2
> 
> 时间：2012-12-05T13:53:15.587
> 
> 标签：html, css

我想要一个垂直集中的文本。

**但问题是**：当我增加 时`font-size`，不同的浏览器呈现不同的字体系列（字体堆栈）并且它不保持中间对齐。

[http://jsfiddle.net/rpNnh/1/](http://jsfiddle.net/rpNnh/1/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:09:12.903

在[jsfiddle中查看解决方案](http://jsfiddle.net/rpNnh/12/)

详细地

html代码

```
<div>
<p>text+<br>sdffd</p>
</div>
<br/><br/>
<a href="#" class="switchFont">Switch Font</a>​ 
```

CSS

```
div{
    width: 200px;
    height: 200px;
    border: 1px solid black;
    display: table; //added
}
p{
    line-height: 20px; //changed
    font-size: 18px;
    text-align: center;
    display: table-cell; //added
    vertical-align: middle; //added
}

p.times{
    font-family: "verdana"; //changed
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:56:10.933

您可以通过将此 CSS 放在 div 上来垂直对齐中间的文本：

```
text-align: center;
display: table-cell;
vertical-align: middle; 
```

# excel - 从工作簿中的工作表子集中复制数据并粘贴到主工作表，而不考虑标准主工作表

> ID：13724790
> 
> 赞同：1
> 
> 时间：2012-12-05T13:53:16.580
> 
> 标签：excel, vba, variables

您好，社区，并提前感谢您的帮助。我创建了一个工作簿，其中包含可变数量的工作表，其中大多数具有变量名称。但是，有 4 个工作表不会更改，我不希望从中复制数据。我正在尝试的代码如下：如果我离基地很远，请告诉我。

V/R 道格

```
Private Sub GroupReport_Click()

Dim sh As Worksheet
Dim DestSh As Worksheet
Dim Last As Long
Dim CopyRng As Range
Dim Disreguard(1 To 4) As String

Disreguard(1) = "RDBMergeSheet"
Disreguard(2) = "0 Lists"
Disreguard(3) = "0 MasterCrewSheet"
Disreguard(4) = "00 Overview"

   ' Delete the summary sheet if it exists.
Application.DisplayAlerts = False
On Error Resume Next
ActiveWorkbook.Worksheets("RDBMergeSheet").Delete
On Error GoTo 0
Application.DisplayAlerts = True

' Add a new summary worksheet.
Set DestSh = ActiveWorkbook.Worksheets.Add
DestSh.Name = "RDBMergeSheet"

' Loop through all worksheets and copy the data to the
' summary worksheet.
For Each sh In ActiveWorkbook.Worksheets
        If sh.Name <> Disreguard.Worksheets.Name Then
        Last = LastRow(DestSh)
        Set CopyRng = sh.Rows("21")
        CopyRng.Copy
        With DestSh.Cells(Last + 1, "A")
            .PasteSpecial xlPasteValues
            .PasteSpecial xlPasteFormats
            Application.CutCopyMode = False
        End With

    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:04:08.497

不幸的是，这条线对你不起作用：

```
If sh.Name <> Disreguard.Worksheets.Name Then 
```

Disreguard 变量是一个数组，但不是 VBA 中的对象，因此您无法使用点运算符访问任何方法。您必须遍历数组的内容并根据您正在测试的字符串检查每个项目。

您可以添加一个函数来测试它，如下所示：

```
Private Function toDisreguard(ByRef list() as String, ByRef searchString As String) As Boolean
    Dim i As Long
    For i = LBound(list) To UBound(list)
        If (searchString = list(i)) Then
            toDisreguard = True
            Exit Function
        End If
    Next i

    toDisreguard = False
End Function 
```

然后将数组与工作表名称一起传递以进行测试，如下所示：

```
If (toDisreguard(Disreguard, sh.Name) = False) Then 
```

此外， LastRow() 函数不是从您发布的内容中定义的。这是您创建的功能吗？

事实上，您可以自己跟踪最后一行，因为您每次运行时都在重建“RDBMergeSheet”工作表。您可以从设置 Last = 1 开始，然后一路递增。最后一件事，您可能应该测试每张纸的第 21 行中是否有任何数据，这样您就不会复制空白行：

```
' Loop through all worksheets and copy the data to the
' summary worksheet.
Last = 1

For Each sh In ActiveWorkbook.Worksheets
    If (toDisreguard(Disreguard, sh.Name) = False) Then
        'Last = LastRow(DestSh)
        If (Application.WorksheetFunction.CountA(sh.Rows("21")) > 0) Then
            Set CopyRng = sh.Rows("21")
            CopyRng.Copy
            With DestSh.Cells(Last, "A") ' notice i changed this as well
                .PasteSpecial xlPasteValues
                .PasteSpecial xlPasteFormats
                Application.CutCopyMode = False
            End With
            Last = Last + 1
        End If
    End If
Next 
```

# c# - 如何在漫长的循环中使用服务器端变量更新客户端？

> ID：13724795
> 
> 赞同：0
> 
> 时间：2012-12-05T13:53:30.063
> 
> 标签：c#, javascript, asp.net, asp.net-4.5

我正在尝试将 Web 界面放在一个冗长的服务器端进程上，该进程应该在进程运行时向客户端发送定期进度\统计报告。我怎样才能做到这一点？

这是我到目前为止所尝试的。只要循环正在处理，webmethod 中的会话就为空。一旦循环完成并再次按下开始按钮，它就能够获取会话值并填充标签。在进程运行时，如何让它向客户端发送更新？

我正在使用 VS2012 和 ASP.NET 4.5。

编辑：更具体地说，问题发生在服务器忙于循环时。如果我取消循环并简单地尝试定期从服务器中提取变量值，那么就没有问题了。将该变量放在一个循环中并尝试定期获取它，您会看到问题所在，如果您运行它，我发布的代码应该可以澄清问题。

谢谢。

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="ClientProgressTest.Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        function GetCount() {

        $.ajax({
            type: "POST",
            url: "Default.aspx/GetCount",
            contentType: "application/json; charset=utf-8",
            data: {},
            dataType: "json",
            success: function (data) {
                lblCount.innerHTML = data.d;
            },
            error: function (result) {
                alert(result.status + ' ' + result.statusText);
            }
        });

        setTimeout(GetCount, 5000);
    }
</script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <label id="lblCount"></label>
        <br />
        <br />
        <asp:Button ID="btnGetCount" runat="server" Text="Get Count" OnClientClick="GetCount();" OnClick="btnGetCount_Click" />
    </div>
    </form>
</body>
</html> 
```

**默认.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ClientProgressTest
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        [WebMethod(EnableSession = true)]
        public static string GetCount()
        {
            string count = null;

            if (HttpContext.Current.Session["count"] != null)
            {
                count = HttpContext.Current.Session["count"].ToString();
            }

            return count;
        }

        protected void btnGetCount_Click(object sender, EventArgs e)
        {
            Session["count"] = null;

            for (int i = 0; i < 10000000; i++)
            {
                Session["count"] = i;
            }
        }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:12:15.420

我在这里对这个问题做了一个冗长的回答：[How to update a status label inside ajax request](https://stackoverflow.com/questions/13068200/how-to-update-a-status-label-inside-ajax-request/13087734#13087734)

为了其他人能够找到相同的解决方案，我也会在这里粘贴答案：

==================================================== =================================

此示例使用 JQuery 进行 AJAX，代码隐藏在 vb.net 中。

本质上，您需要做的是进行第一次调用以开始漫长的过程，然后反复进行第二次调用，使用第二种方法来获取长期的状态。

AJAX

这是您对漫长过程的主要要求。如果需要，您需要将数据传递给该方法。注意有一个processName。这应该是一个随机字符串，以确保您仅获得此进程的状态。其他用户将有不同的随机 processName，因此您不会混淆状态。

**JAVASCRIPT**

```
 var processName = function GenerateProcessName() {

        var str = "";
        var alhpabet = "abcdefghijklmnopqrstuvwxyz";
        for (i = 1; i < 20; i++) {
            str += alhpabet.charAt(Math.floor(Math.random() * alhpabet.length + 1));
        }
        return str;
    }

    function StartMainProcess(){
    $j.ajax({
            type: "POST",
            url: "/MyWebservice.asmx/MyMainWorker",
            data: "{'processName' : '" + processName + "','someOtherData':'fooBar'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d) {                        
                    // do a final timerPoll - process checker will clear everything else
                    TimerPoll();
                }
            }
        });
        TimerPoll();
     } 
```

您的第二次 AJAX 调用将使用另一种方法来获取进度。这将通过计时器方法每 XXX 次调用一次。

这是 TimerPoll 函数；在这种情况下，它将每 3 秒触发一次

**JAVASCRIPT**

```
function TimerPoll() {
        timer = setTimeout("GetProgress()", 3000)
    } 
```

最后，GetProgress() 函数用于获取进度。我们必须传入上面使用的相同 processName，才能获取此用户调用的进程

**JAVASCRIPT**

```
function GetProgress() {
        // make the ajax call
        $j.ajax({
            type: "POST",
            url: "/MyWebService.asmx/MyMainWorkerProgress",
            data: "{'processName' : '" + processName + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {

                // Evaulate result..
                var process = msg.d

                if (process.processComplete) {
                    // destroy the timer to stop polling for progress
                    clearTimeout(timer);

            // Do your final message to the user here.                      

                } else {

                   // show the messages you have to the user.
                   // these will be in msg.d.messages

                    // poll timer for another trip
                    TimerPoll();
                }
        });

    } 
```

现在，在后端，您将拥有几个与 AJAX 通信的 Web 方法。您还需要一个共享/静态对象来保存所有进度信息，以及您想要传回给用户的任何内容。

在我的例子中，我创建了一个类，它的属性填充并在每次调用 MyMainWorkerProcess 时传回。这看起来有点像这样。

**VB.NET**

```
 Public Class ProcessData
        Public Property processComplete As Boolean
        Public Property messages As List(Of String) = New List(Of String)
    End Class 
```

我也有一个使用这个类的共享属性，它看起来像......（这个共享属性能够保存多个用户的多个进程进度 - 因此是字典。字典的键将是进程名称。所有进度数据将属于 ProcessData 类

```
Private Shared processProgress As Dictionary(Of String, ProcessData) = New Dictionary(Of String, ProcessData) 
```

我的主要工作函数看起来有点像这样。请注意，我们首先确保没有另一个 processProgress 具有相同的

**VB.NET**

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function MyMainWorker(ByVal processName as string, ByVal SomeOtherData as string) as Boolean

        '' Create progress object - GUI outputs process to user
        '' If the same process name already exists - destroy it
        If (FileMaker.processProgress.ContainsKey(processName)) Then
            FileMaker.processProgress.Remove(processName)
        End If

        '' now create a new process
        dim processD as ProcessData = new ProcessData() with {.processComplete = false}

        '' Start doing your long process.

        '' While it's running and after whatever steps you choose you can add messages into the processData which will be output to the user when they call for the updates
         processD.messages.Add("I just started the process")

         processD.messages.Add("I just did step 1 of 20")

         processD.messages.Add("I just did step 2 of 20 etc etc")

         '' Once done, return true so that the AJAX call to this method knows we're done..
        return true

End Function 
```

现在剩下的就是调用 progress 方法了。所有这一切都要做的是返回字典 processData 与我们之前设置的 processName 相同。

**VB.NET**

```
<WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function MyMainWorkerProgress(ByVal processName As String) As ProcessData

        Dim serializer As New JavaScriptSerializer()

        If (FileMaker.processProgress.ContainsKey(processName)) Then
            Return processProgress.Item(processName)
        Else
            Return New ProcessData()
        End If

    End Function 
```

瞧..

所以回顾一下..

1.  创建 2 个 Web 方法 - 一个用于执行漫长的过程，一个用于返回它的进度
2.  对这些 Web 方法创建 2 个单独的调用。第一个是给主要工作人员，第二个是重复 xx 秒，给一个将提供进度的工作人员
3.  以您认为合适的方式将您的消息输出给用户...

如果有一些错别字，请不要拍我:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:59:59.897

Typical web application frameworks are not well suited for this kind of thing. That is to say this isn't just a drawback of ASP.Net you'll run into this in PHP, RoR and I suspect many other frameworks in the future.

Long running tasks should be pawned off on processes that exist outside of IIS. There's no reason to bog down your web server with something that isn't about serving web pages. You can do this by either spawning a process from within your web application code or create a service that is constantly running in the background and checking some common resource (like a database) for jobs.

In either case the common resource would serve as a progress indicator. The external process would continuously update some value say, `PercentComplete` as the task moves along. Meanwhile your web application would need some kind of method for checking this value and returning it to the client. An AJAX web method would probably give you the best results.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:01:00.623

创建一个将返回进程当前进度的 Web 服务。在客户端脚本中设置一个计时器，该计时器在触发时从 Web 服务获取当前进度，然后使用新值动态更新客户端显示元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:00:41.323

Probably the most up to date and fun way of implementing (if you're not hiving it off outside the web server process) this would be to use Signal R hubs to relay back messages to the client. Check it out on git hub here [https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

# ruby-on-rails - 使用 nearSphere 返回查询点的距离

> ID：13724798
> 
> 赞同：2
> 
> 时间：2012-12-05T13:53:46.537
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在尝试使用 geoSpatial 查询来查询我的集合，以返回靠近某个点的结果以及与该点的距离。

我正在使用`Queryable#near_sphere`Mongoid [http://mongoid.org/en/origin/docs/selection.html](http://mongoid.org/en/origin/docs/selection.html) 这将在查询中执行 $nearSphere 命令。

我看过`geoNear`命令： [http ://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand)

这似乎返回了计算距离的结果

有没有办法：

a) 使用 nearSphere 返回距离
b) 将 geoNear 与 Mongoid 一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:52:02.047

I dont think this command is available on Origin, you might open a feature request if you wish [https://github.com/mongoid/origin/issues](https://github.com/mongoid/origin/issues).

As a work around you can issue the command straight from moped, something like this:

```
Person.mongo_session.command({ :geoNear => 'places' })... 
```

than you can put together your command, following the docs from mongodb.

# c++ - 如何在 C++ 中抛出未知异常？

> ID：13724799
> 
> 赞同：0
> 
> 时间：2012-12-05T13:53:47.070
> 
> 标签：c++, exception

我有一个类似于报告的问题：

[http://social.msdn.microsoft.com/Forums/lv/windbg/thread/52000403-db16-4f33-9b38-dae79d9ba038](http://social.msdn.microsoft.com/Forums/lv/windbg/thread/52000403-db16-4f33-9b38-dae79d9ba038)

由于文件路径，Adplus 无法为未知异常生成完整转储文件

我们得到了一个 SecondChance_*_UnknownException，adplus 尝试（但失败）将其作为文件名的一部分包含在内。

我想尝试类似于链接中建议的更改，但我想测试 adplus 是否可以为我创建转储文件。

所以，问题是，“如何在 C++ 中抛出未知异常？”

**更新：见下面的 MSalters 评论和我的展示如何创建未知异常**

此外，为了将来参考，我添加了我的 adplus 配置文件，它可以进行完全转储，并且文件名中的星号没有问题。

```
<ADPlus Version='2'>
    <KeyWords>
        <KeyWord Name="MyActF">
            .dump -u /ma ${AdpDumpDir}\FULLDUMP_FirstChance_UnknownException_${AdpProcName}_.dmp
        </KeyWord>
        <KeyWord Name="MyActS">
            .dump -u /ma ${AdpDumpDir}\FULLDUMP_SecondChance_UnknownException_${AdpProcName}_.dmp
        </KeyWord>
    </KeyWords>
  <Exceptions>  
        <Exception Code="epr">
            <Actions1>Void</Actions1>
            <Actions2>Void</Actions2>
        </Exception> 
        <Exception Code="bpe">
            <Actions1>FullDump</Actions1>
            <Actions2>FullDump</Actions2>       
        </Exception>
        <Exception Code="*">
            <Actions1>Log;Stack;Void</Actions1>
            <Actions2>Log;Stack;MyActS</Actions2>
            <ReturnAction1>GN</ReturnAction1>
            <ReturnAction2>GN</ReturnAction2>
        </Exception>
   </Exceptions>
</ADPlus> 
```

一些注意事项：此文件不会在 epr 进程关闭时创建转储，它会在“bpe”上进行完整转储，并对“ *”转储进行特殊处理，因此 adplus 不会在创建文件名时出错。我可能倾向于只对第二次机会未知异常进行完全转储...在 Actions1 下，异常代码 = "* " 可以放置 MyActF 或 Void，具体取决于您是否想要完全转储或不进行转储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:52:59.827

“第二次机会”意味着您可能正在处理结构化异常处理 (Win32)，而不是 C++ 异常。SEH 异常通过`RaiseException()`. 它的第一个参数是异常代码，例如`0xC0000005`。显然，并非所有 40 亿个可能的值都有名称。因此，任何没有名称的值都是“未知的”。

# android - Android如何计算layout_weight以像素为单位？

> ID：13724800
> 
> 赞同：0
> 
> 时间：2012-12-05T13:53:49.310
> 
> 标签：android, layout, view, pixel

我使用 weight_sum = 7 将 LinearLayout 划分为 7 个不同的视图，每个视图的 layout_weight = 1。整个 LinearLayout 在设备上跨越 100 多个像素。

100 像素 / 7 = 14.29 像素。由于像素只能是整数，因此 7 个子视图的实际像素大小将如下所示：

14 - 14 - 14 - 14 - 14 - 15 - 15

我现在想知道Android使用哪个公式来计算向下舍入和向上舍入的位置。

对于定位，对于任何大小为 x 且具有 y 子视图的 LinearLayout，我都需要知道它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:40:52.397

如果你在[LinearLayout](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/LinearLayout.java)的源代码中 看到，你可以看到它使用简单的`Math.Max`函数来做这样的简单计算。您可以在[此处找到更多相关信息](https://stackoverflow.com/questions/577427/evenly-divide-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:47:35.193

从[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/LinearLayout.java#LinearLayout.onMeasure%28int,int%29)中，它将除法转换为`int`. 见第 441 行。

因此，它总是取地板整数值

# python - Google App Engine - Get parent key or ancestor's path's property

> ID：13724805
> 
> 赞同：1
> 
> 时间：2012-12-05T13:54:00.340
> 
> 标签：python, google-app-engine, google-cloud-datastore

I have a data structure like this:

```
Restaurant > Menu > Category > Dish 
```

when I load every dish for a restaurant, using:

```
q = db.Query(Dish)
q.ancestor('Restaurant Key') 
```

I would like for every dish to come with a path with the property 'name' of each ancestor:

```
dish.path = "Cheesecake Factory > Meals > Beefs > Beef with Potatoes" 
```

I know about `dish.to_path()`, but that only returns the ancestor's entity kind.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:45:11.780

This is possible if you are using they name of the object as the key, id ("Cheescake Factory", "Meals", "Beefs" etc.)

dish.key().to_path() should provide you with a list with the format [etc. grandparent-kind, grandparent-name/id, parent-kind, parent-name/id, kind, name/id>]

However, if the name of your object is not the key, you'll have to fetch each ancestor object to get the name. In this case, it would probably be better to store the entire path as a string inside your dish entity, so as to save on datastore fetches.

# entity-framework - 实体框架 DefaultConnectionFactory 被忽略

> ID：13724807
> 
> 赞同：2
> 
> 时间：2012-12-05T13:54:10.190
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我正在使用带有 Code First 的实体框架 5。我已经编写了一个自定义`IDbConnectionFactory`，我想将它用于我的`DbContext`类建立的所有连接，所以在应用程序生命周期的早期，在完成任何数据库工作之前，我调用

```
Database.DefaultConnectionFactory = new MyConnectionFactory(); 
```

但是，`MyConnectionFactory.CreateConnection`从未调用过，这向我表明 EF 已将其改回 - 但调试器显示`MyConnectionFactory`在运行了几个查询后它仍然是一个。出于某种原因，它只是不使用它。

My`DbContext`通过传递 app.config 文件中的连接字符串的名称进行初始化，并且这些连接字符串确实指定了一个显式提供程序（实际上它们必须这样做），所以我想知道这是否会导致连接的每个连接覆盖基于连接字符串的工厂。这种情况会发生吗？我可以在不注册一个全新的提供商的情况下停止它（尽管这可能不太难做到？）。

无论我在网上看到什么（在各种 app.config 示例中被 defaultConnectionFactory 标记所掩盖）都表明您可以将其更改`IDbConnectionFactory`为您选择的实例，它会起作用，但我的行为不正常。

这样做的目的是让我在打开新连接时运行一组特定的 SQL 语句，所以这个问题的第二部分是有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-09T01:20:29.587

我知道这并不理想，但这对我有用：

```
public class DBBase : DbContext
{
    public DBBase(string nameOrConnectionString)
        : base(Database.DefaultConnectionFactory.CreateConnection(nameOrConnectionString), true)
    {
    }
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:47:01.780

您需要获得为要使用的每个呼叫建立的连接。例如使用以下代码。

```
private static void UsingCustomConnection()
{
    using (var conn = Database.DefaultConnectionFactory.CreateConnection("YourDbName"))
    {
        using (var context = new YourContext(conn))
        {
            context.Destinations.Add(new Destination {Name = "Colorado"});
            context.SaveChanges();
        }
    }
} 
```

您需要在 YourContext 中进行设置

```
public YourContext(DbConnection connection)
    : base(connection, contextOwnsConnection: false)
{

} 
```

# iphone - 在 iPhone 应用程序中打开的网页在关闭后不会停止声音

> ID：13724808
> 
> 赞同：0
> 
> 时间：2012-12-05T13:54:15.273
> 
> 标签：iphone, html, webpage, html5-audio

我有一个移动迷你网站，可以通过横幅从一些 iphone/android 应用程序访问

该站点集成了一个 html`<audio>`标签，该标签在单击按钮后会播放一​​些声音

虽然在某些应用程序中一切正常，但在某个应用程序中 - 当单击横幅时，迷你站点会在应用程序内的某种浏览器中打开（下面提供的屏幕截图）

问题是当用户在播放声音时关闭该浏览器（通过单击 X 按钮） - 声音不会停止

无论如何要知道浏览器何时关闭以手动停止声音？

我想`window.onbeforeunload`在这里不起作用，因为如果网站被卸载 - 声音无论如何都会停止

我正在谈论的那种浏览器的屏幕截图：

![iphone在应用浏览器中](../Images/6837c1e76d62a1dab65bbad1b9df9762.png)

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:01:47.207

一种可能性是为事件设置一个事件侦听器，`blur`然后暂停音频。

# java - 不断收到“SQLiteException：没有这样的表”异常

> ID：13724809
> 
> 赞同：4
> 
> 时间：2012-12-05T13:54:16.547
> 
> 标签：java, android, exception, android-sqlite

我试图创建 SQLiteDatabase 来保存我从 JSONObject 从 post 请求中获得的数据。我的主要课程：

```
public class MainActivity extends Activity {

    static JSONObject result;
    public Context mContext;
    public SQLiteDatabase db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mContext = getApplicationContext();
       new UpdateData().execute();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class UpdateData extends AsyncTask<String, Void, JSONObject>{

        private JSONObject object;
            @Override
            protected JSONObject doInBackground(String... params) {
                try {
                    HttpClient client = new DefaultHttpClient();  
                    String postURL = "http://test.com";
                    HttpPost post = new HttpPost(postURL);
                        List<NameValuePair> crc = new ArrayList<NameValuePair>();
                        crc.add(new BasicNameValuePair("crc", "test"));
                        UrlEncodedFormEntity ent = new UrlEncodedFormEntity(crc,HTTP.UTF_8);
                        post.setEntity(ent);
                        HttpResponse responsePOST = client.execute(post);  
                        HttpEntity entit = responsePOST.getEntity();
                        String retSrc = EntityUtils.toString(entit);
                        object = new JSONObject(retSrc);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                return object;
            }
            @Override
            protected void onPostExecute(JSONObject result) {
                MainActivity.this.result = result;
                DataBase dbHelper = new DataBase(mContext) ;
                db = dbHelper.getWritableDatabase(); 
                dbHelper.createDB(db, result);  
                /*Cursor cursor = db.query("departments", null , null,
                        null, null, null, null, null);
                System.out.println(cursor.getString(1));*/
                }

    }
} 
```

和数据库助手

```
public class DataBaseHelper extends SQLiteOpenHelper {

    public boolean isDownloaded = false; 
    public boolean shutdown = false;

    private Context mContext;
    private JSONObject exams;
    private JSONObject specs;
    private JSONObject deps;

    private static final int DATABASE_VERSION = 2;
    private static final String DATABASE_NAME = "data.db";

    private static final String EXAMS_TABLE_NAME = "exams";
    private static final String EXAMS_TABLE_CREATE =
                "CREATE TABLE " + EXAMS_TABLE_NAME + " (" +
                "id VARCHAR (255), " +              //0
                "name VARCHAR (255)," +             //1
                "type VARCHAR (100)," +             //2
                "level VARCHAR (100),"  + ");" ;    //3

    private static final String SPEC_TABLE_NAME = "specializations";
    private static final String SPEC_TABLE_CREATE =
                "CREATE TABLE " + SPEC_TABLE_NAME + " (" +
                "id VARCHAR (255), " +                  //0
                "name VARCHAR (255)," +                 //1
                "name_en VARCHAR (255)," +          //2
                "description VARCHAR (255)," + ");" ;       //3

    private static final String DEP_TABLE_NAME = "departments";
    private static final String DEP_TABLE_CREATE =
                "CREATE TABLE " + DEP_TABLE_NAME + " (" +
                "id VARCHAR (255), " +                  //0
                "name VARCHAR (255)," +                 //1
                "name_en VARCHAR (255)," +          //2
                "www VARCHAR (255)," +                  //3
                "email VARCHAR (255)," +                //4
                "phone VARCHAR (100),"  + ");" ;        //5

    public DataBase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        mContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

    public boolean doesDBexist() {
        File db;
        db = new File("/data/data/my.package/databases/data.db");
        return db.exists();
    }

    public boolean createDB(SQLiteDatabase db, JSONObject jsonObject) {
        try { // if not working create new one
            exams = jsonObject.getJSONObject("exams");
            specs = jsonObject.getJSONObject("spec");
            deps = jsonObject.getJSONObject("department");
            db.execSQL(EXAMS_TABLE_CREATE);             // here I get exception (described below)
            db.execSQL(SPEC_TABLE_CREATE);
            db.execSQL(DEP_TABLE_CREATE);
            putContentValues(db);
            isDownloaded = true;
            return true;
        } catch (SQLiteException e1) {
            db = null;
            return false;
        } catch (Exception e3) {
            shutdown = true;
            return false;
        }
    }

        public void putContentValues(SQLiteDatabase db) throws JSONException    {
            ContentValues cv = new ContentValues();

            for (Iterator<String> it = exams.keys(); it.hasNext(); it.next()) {
                JSONObject exam = exams.getJSONObject(it.toString());
                cv.put("id", it.toString());
                cv.put("name", exam.getString("name"));
                cv.put("type", exam.getString("type"));
                cv.put("level", exam.getString("level"));
                db.insert(EXAMS_TABLE_NAME, null, cv);
                cv.clear();

            }

            for (Iterator<String> it = specs.keys(); it.hasNext(); it.next()) {
                JSONObject spec = specs.getJSONObject(it.toString());
                cv.put("id", it.toString());
                cv.put("name", spec.getString("name"));
                cv.put("name_en", spec.getString("name_en"));
                cv.put("desription", spec.getString("desription"));

                db.insert(SPEC_TABLE_NAME, null, cv);
                cv.clear();
            }

            for (Iterator<String> it = deps.keys(); it.hasNext(); it.next()) {
                JSONObject dep = deps.getJSONObject(it.toString());
                cv.put("id", it.toString());
                cv.put("name", dep.getString("name"));
                cv.put("name_en", dep.getString("name_en"));
                cv.put("www", dep.getString("www"));
                cv.put("email", dep.getString("email"));
                cv.put("phone", dep.getString("phone"));
                db.insert(DEP_TABLE_NAME, null, cv);
                cv.clear();
            }

        }

} 
```

我无法调试它。当我在中创建`Cursor`时`MainActivity`，行后出现异常`db.execSQL(EXAMS_TABLE_CREATE);` `android.database.sqlite.SQLiteException: no such table: departments: , while compiling: SELECT * FROM departments` ，当我不创建光标时，它只是在调试时停在那里。我无法检查我的数据库中是否有任何内容以及是否正确制作。我试图像有人在这个问题中所说的那样重命名我的数据库： [android.database.sqlite.SQLiteException：没有这样的表](https://stackoverflow.com/questions/6763867/android-database-sqlite-sqliteexception-no-such-table)，但它没有解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T13:59:32.427

that cannot be correct:

```
"CREATE TABLE " + EXAMS_TABLE_NAME + " (" +
            "id VARCHAR (255), " +              //0
            "name VARCHAR (255)," +             //1
            "type VARCHAR (100)," +             //2
            "level VARCHAR (100),"  + ");" ; 
```

remove the last "," in that create-statement and try it again.

btw... you did that fault in all create statements.

# java - 我可以使用注入的 bean 作为另一个类方法的参数吗？

> ID：13724813
> 
> 赞同：0
> 
> 时间：2012-12-05T13:54:35.957
> 
> 标签：java, spring

我正在做一个休眠项目，我正在将一些逻辑从 BLL 类移动到 DTO，我想知道是否可以将对象注入 DTO？BLL 类的代码依赖于大量导入的 bean，但是当我尝试将它们导入 DTO 对象时，我的 applicationContext 会搞砸。

飞行助手类：

```
public class FlightHelper {

    @Inject
    private InjectedClass injectedClass;

    public void testMethod(Flight flight) {
        ...code here
        flight.getPrice(injectedClass);
    }
} 
```

飞行等级：

```
public class Flight {
    public void getPrice(InjectedClass injectedClass) {
        ...code here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:59:30.070

是的你可以。

但是，设计不是很好，因为 Flight 和 FlightHelper 类之间的交互非常强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:59:10.630

是的，你可以，但你可能也想将它们注入另一个类。

# ruby - 定义调用 require 的文件的路径

> ID：13724821
> 
> 赞同：3
> 
> 时间：2012-12-05T13:55:12.017
> 
> 标签：ruby

我正在编写一个 gem，它应该自动定义调用这个 gem 的文件的路径。

这是它应该如何工作的：

```
 # inside some custom.rb file   
 require 'my_super_gem'
   # after require gem should automatically define the path of custom.rb file 
```

我认为`__FILE__`在 gem 模块内部是一个好主意，但它定义了 gem 模块的路径，而不是带有`require 'my_super_gem'`.

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:28:39.877

解析结果

```
caller.first 
```

或尝试调查

```
loaded_features 
```

# android - 重新编译Android时无法创建system.img

> ID：13724824
> 
> 赞同：3
> 
> 时间：2012-12-05T13:55:24.030
> 
> 标签：android

我想重新编译android项目。我按照[这里](http://source.android.com/source/building.html)的步骤...但是每次处理约 2 小时后（我猜没有错误），我都无法在输出目录中找到“system.img”文件。我可以找到其他 2 个文件 ramdisk.img、userdata.img 和提取的系统文件夹，但找不到 system.img。

这会导致模拟器在尝试运行它时给出此错误：

> 模拟器：错误：此配置没有初始系统映像！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:45:38.020

我让它现在工作。我发现编译“libwebcore”模块时发生错误，因此它结束了该过程。

我在[这里](http://grokbase.com/t/gg/android-porting/12akwmrgs7/ld-error-when-compile-the-libwebcore-so)找到了解决方案。

1-我清理了 libwebcore 的构建文件，只是为了不清理所有构建，否则，我们将不得不再次重做所有构建

```
make clean-libwebcore 
```

2-我只构建 libwebcore 模块，只关心它，直到它成功。

```
make -j8 libwebcore 
```

3-您只需使用 make 启动正常的构建过程即可继续构建其他剩余模块 *

```
make -j8 
```

# spring - UnsupportedClassVersionError 在 Tomcat 5 + Java 1.5 中部署 Spring 3.x

> ID：13724826
> 
> 赞同：1
> 
> 时间：2012-12-05T13:55:25.543
> 
> 标签：spring, spring-mvc, tomcat5.5

我正在尝试在运行 Tomcat 5.5 + Java 1.5 的服务器中部署使用 Spring 3.1.2 构建的 Web 应用程序。这个应用程序在我的本地机器上运行良好，使用 Tomcat 6 + Java 1.6，你可以想象它不在服务器中。我可以用 JDK 1.5 编译我自己的类，但我不知道如何用 Spring 库来编译，知道吗？

更新：

在我的 pom.xml 中，我有这个以确保我使用 Java 1.5 进行编译：

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.5</source>
        <target>1.5</target>
    </configuration>
</plugin> 
```

这是我得到的堆栈跟踪：

```
09:21:37,940 ERROR [[/saml2Sample]:3767] Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.saml.SAMLBootstrap#0' defined in class path resource [security/securityContext.xml]: Instantiation of bean failed; nested exception is java.lang.UnsupportedClassVersionError: Bad version number in .class file
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1102)
at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:674)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3763)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4211)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:497)
at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1204)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:585)
at org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:503)
at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(DynamicMetaDataImpl.java:213)
at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(MetaDataImpl.java:220)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:815)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:784)
at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1377)
at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:212)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:524)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
at org.apache.catalina.valves.FastCommonAccessLogValve.invoke(FastCommonAccessLogValve.java:495)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
at java.lang.Thread.run(Thread.java:595) 
```

```
Caused by: java.lang.UnsupportedClassVersionError: Bad version number in .class file
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1815)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:869)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1322)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1201)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)
at java.lang.Class.getConstructor0(Class.java:2671)
at java.lang.Class.getDeclaredConstructor(Class.java:1953)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:67)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
... 51 more 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:19:34.083

我认为您可能对为 Java 5 编译 Spring 类的必要性感到困惑。您不必重新编译 Spring（我很确定 Spring 3.x 仍在为 Java 5+ JVM 编译）。

我认为可能发生的情况是您的 war 文件包含为 Java 5 JVM 无法处理的 JDK6 编译的类。仔细检查项目的编译器设置以确保它正在创建 1.5 兼容的类文件。在 Eclipse 中，它位于 Project Properties/Java Compiler 区域中。对于 Ant，它是 javac 任务的一个属性。对于 Maven，它是编译器插件配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:58:57.373

Package all spring jars in your "WEB-INF/lib".

Per Spring 3.1.2\. Documentation: [http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/new-in-3.0.html#new-in-3.0-intro](http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/new-in-3.0.html#new-in-3.0-intro)

> **Java SE and Java EE Support**
> 
> The Spring Framework is now based on Java 5, and Java 6 is fully supported.
> 
> Furthermore, Spring is compatible with J2EE 1.4 and Java EE 5, while at the same time introducing some early support for Java EE 6.

# android - Eclipse 启动后，Android ADB 设备消失（Mac）

> ID：13724830
> 
> 赞同：1
> 
> 时间：2012-12-05T13:55:50.597
> 
> 标签：android, eclipse, adb

```
>adb devices
List of devices attached 
0123456789ABCDEF    device 
```

一旦我开始日食，该设备就不再出现了。要再次列出它，我必须关闭 Eclipse 并执行

```
>adb kill-server
>adb devices 
```

那么这里发生了什么？如果 dab 没有列出它，我将无法在 Eclipse 中使用我的 Odys Next。

# angularjs - angularjs - 运行时依赖注入？

> ID：13724832
> 
> 赞同：14
> 
> 时间：2012-12-05T13:55:53.623
> 
> 标签：angularjs

简单的我希望..

这是一个供参考的[plunker 。](http://plnkr.co/edit/dX0Oz1?p=preview)

我知道如何在编译时指定依赖项（请参阅 MainCtrlInjected 控制器）。但是如何在运行时拉下一个依赖项，并给出该依赖项的名称？（参见 MainCtrlInjectedRuntime 控制器）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T14:33:45.747

您可以使用 $injector 在运行时获取您的值：

检查我的分叉 plunker：[http ://plnkr.co/edit/iVblEU?p=preview](http://plnkr.co/edit/iVblEU?p=preview)

代码：

```
app.controller('MainCtrlInjectedRuntime', [
  '$scope',
  '$injector'
  ($scope, $injector) ->

   nameValHandle = 'nameVal'

   # !!! This is how you inject at runtime
   name = $injector.get(nameValHandle)

   $scope.name = name
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:00:58.137

我刚刚进入 angularjs，但我相信处理这种情况的适当方法是将服务注入 MainCtrlInjectedRuntime。注入的服务将具有您的某种GetNameFromValue 方法。

# android - 加载以前访问过的页面

> ID：13724840
> 
> 赞同：0
> 
> 时间：2012-12-05T13:56:13.467
> 
> 标签：android, webview

我正在使用 WebView.goBack() 导航到以前访问过的页面，并且效果很好。我的问题是：WebView 总是加载（从互联网 - 这需要几秒钟）前一页，就好像它是第一次访问一样。我的意思是，如果我在 3 秒前访问了网页，我想它被缓存在某个地方，并希望它通过单击后退按钮立即显示出来。已经尝试过 WebSettings.setcachemode()，但没有帮助。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:39:18.360

我想你还有更多事情要做。这对我有用（或者可能不是。我的连接速度非常快:-)）：

```
viewer.getSettings().setAppCacheMaxSize(1024*1024*8); 
viewer.getSettings().setAppCachePath("/data/data/your_apppackage/cache"‌​);
viewer.getSettings().setAppCacheEnabled(true); 
viewer.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT); 
```

# perl - searchcpan.actvestate.com 正在重定向到 search.cpan.org

> ID：13724843
> 
> 赞同：0
> 
> 时间：2012-12-05T13:56:18.423
> 
> 标签：perl, cpan, activestate

抱歉，如果我对 perl 存储库有任何理解错误。

我在我的 windows 上使用 activestate perl 进行开发。

为了寻找任何缺失的模块，我曾经在[http://searchcpan.activestate.com](http://searchcpan.activestate.com)网站上进行搜索。这曾经为我提供有关分发和存储库（activestate、trouchelle、贿赂等）以及支持此模块的各种版本的 perl 的信息。

现在看来，该站点正在重定向到 search.cpan.org。我在这里缺少一些信息，例如要使用的发行版。

请让我知道在这种情况下如何找到存储库名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:09:25.240

我猜它现在位于[http://code.activestate.com/ppm/](http://code.activestate.com/ppm/)上。顺便说一句，[http](http://searchcpan.activestate.com/) ://searchcpan.activestate.com/至少可以重定向到[http://metacpan.org/](http://metacpan.org/) :)

# c# - Regex change to "" not working

> ID：13724845
> 
> 赞同：0
> 
> 时间：2012-12-05T13:56:23.750
> 
> 标签：c#, regex

I need to change:

```
","
":"
"{"
"}" 
```

From string to `""`

I wrote this:

```
Regex remove = new Regex("\"\"\":\"\"{\"\"}\"]");
remove.Replace(str, ""); 
```

But this didn't change the values I needed to change. Where did I make a error?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:58:54.143

The replace method returns the replaced string.

You should try

```
Regex remove = new Regex(",|:|\\{|\\}");
str = remove.Replace(str, ""); 
```

Note: The regex looks for , : { and } within "".

EDIT: Modified Code with regular expressing string as well, thanks to ArsenMkrt

# windows-phone-7 - windows phone 7 应用程序在 windows phone 8 设备上是否兼容？

> ID：13724852
> 
> 赞同：15
> 
> 时间：2012-12-05T13:56:49.383
> 
> 标签：windows-phone-7, compatibility, windows-phone-8

非常直接的问题。我的公司开发了一个 windows phone 7 应用程序，并一直在 windows phone 7 设备上对其进行测试。我们是否可以安全地假设同一个应用程序将向后兼容并在 Windows Phone 8 设备（如诺基亚 Lumia 920）上无缝运行？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T14:05:17.837

是的，它会起作用。但它不会像真正的 WP8 应用程序那样利用所有 WP8 功能。我建议您创建该项目的副本并将其更新到 WP8 以获得更好的性能。例如，还将任何列表框替换为 LongListSelectors。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T19:53:37.060

在大多数情况下，它应该可以正常工作，但您应该检查此已知重大更改列表，并且您还应该在新设备上彻底测试您的应用程序，以防万一。
例如 FMRadio 类不再适用于 WP8 并且还有其他类似问题：
[Windows Phone 的应用平台兼容性](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947%28v=vs.105%29.aspx)

# javascript - 我想重新定位通过 Raphael js 创建的圆圈，并将其用作标题中的字母

> ID：13724853
> 
> 赞同：3
> 
> 时间：2012-12-05T13:56:55.980
> 
> 标签：javascript, html, css, raphael, vector-graphics

我使用 Raphael JS 创建了一个矢量图形 - 特别是一个圆圈。

我现在想用这个圆圈作为标题中的字母“O”。它也是一个在点击时会产生动画的圆圈。我想知道这是否可能。

这是一个小提琴，可以更好地解释我想说的话。

html非常简单：

```
<h2>N<span id="canvas_cont"></span>OTRE APPROCHE :</h2> 
```

[这是jsfiddle](http://jsfiddle.net/nXtqb/1/)

基本上，圆圈将充当“Notre”中的第二个字母，单击时将移动到屏幕右侧。之后会发生其他事情，但这种效果是我想要得到的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:24:26.393

将 Raphael 画布放在一个跨度中很聪明，但最终我怀疑您会后悔以这种方式将原生 HTML 与 Raphael 混合。这样做可能需要大量绝对定位和 z 索引，这些在 Raphael 中得到更好的处理和支持。

我建议您在 Raphael 中简单地绘制文本：

```
var text = r.set();
text.push(
    r.text(10,20,"N"),
    r.text(70,20,"TRE APPROCHE :")
);
text.attr({
    'text-anchor': 'start',
    'font-size':'36px'        
}); 
```

如果 SVG/VML 样式不合适，您也可以只使用图像。同样，我建议使用 Raphael (paper.image()) 将该图像放在画布上；

请注意，在更新的小提琴中，我将画布设置为 div 的徽标宽度。

[更新了小提琴](http://jsfiddle.net/nXtqb/2/)。

# performance - 林克。链接 Select/Where 子句是否更慢？

> ID：13724854
> 
> 赞同：1
> 
> 时间：2012-12-05T13:56:58.663
> 
> 标签：performance, linq, select, iterator, where

如果我链接子句，例如

```
var results = elements
    .Where(n => n > 3)
    .Where(n => n % 2 == 0); 
```

这比刚才慢吗

```
var results = elements.Where(n => n > 3 && n % 2 == 0); 
```

解释为什么能或者为什么不能？

编辑：似乎共识是即使 POCO 对象也迭代两次。如果是这种情况，有人可以解释为什么微软不会组合这些谓词。我偶然发现`Enumerable.CombinePredicates`我认为这样做了。有人可以解释一下这是做什么的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:03:28.980

如果您在谈论 LINQ-to-objects，每个都`Where`涉及设置一个新的迭代器状态机，这很昂贵，所以是的，它比将两个条件放在一起要慢。

如果您在谈论 LINQ-to-其他东西，那么，这取决于；额外的`Where`可能只是在某处涉及额外的字符串连接。它仍然可能更昂贵，但确切的差异取决于 LINQ 提供程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:18:02.837

**编辑**：我看起来更近了一点。`WhereEnumerableIterator`扩展方法返回的实际`Where`覆盖了该`Where`方法并将谓词组合成一个回调。

```
public override IEnumerable<TSource> Where(Func<TSource, bool> predicate) {
    return new Enumerable.WhereEnumerableIterator<TSource>(
        this.source, 
        Enumerable.CombinePredicates<TSource>(this.predicate, predicate));
}

private static Func<TSource, bool> CombinePredicates<TSource>(
    Func<TSource, bool> predicate1, Func<TSource, bool> predicate2
    ) {
    return (TSource x) => predicate1(x) && predicate2(x);
} 
```

因此，我在机器上看到的速度差异可能应该归因于其他原因。

~~第一个示例将遍历`elements`集合一次以查找满足条件的项`item > 3`，然后再次查找满足条件的项`item % 2 == 0`。~~

第二个示例将遍历`elements`集合一次以查找满足条件的项目`item > 3 && item % 2 == 0`。

~~在提供的示例中，第二个很可能总是比第一个快，因为它只循环`elements`一次。~~

这是我在机器（.NET 3.5）上获得的一些非常一致的结果的示例：

```
 var stopwatch = new System.Diagnostics.Stopwatch();
    var elements = Enumerable.Range(1, 100000000);
    var results = default(List<int>);
    stopwatch.Start();
    results = elements.Where(n => n > 3).Where(n => n % 2 == 0).ToList();
    stopwatch.Stop();
    Console.WriteLine(stopwatch.Elapsed);
    stopwatch.Reset();
    stopwatch.Start();
    results = elements.Where(n => n > 3 && n % 2 == 0).ToList();
    stopwatch.Stop();
    Console.WriteLine(stopwatch.Elapsed);
    Console.WriteLine("Done");
    Console.ReadLine(); 
```

结果：

```
00:00:03.0932811
00:00:02.3854886
Done 
```

**编辑**：
@Rawling 是正确的，因为我的解释仅适用于 POCO 对象集合中使用的 LINQ。当用作 LINQ-to-SQL、NHibernate、EF 等的接口时，您的结果将更加依赖于实现。

# python - Keyboard input between select() in Python

> ID：13724856
> 
> 赞同：5
> 
> 时间：2012-12-05T13:57:06.090
> 
> 标签：python, select, stdin, readline, keyboard-input

I write some codes to get the input from keyboard and also check something is alive or not:

```
import sys
from select import select

timeout = 10
while is_alive(): # is_alive is a method to check some stuffs, might take 5 secs
    rlist, _, _ = select([sys.stdin], [], [], timeout)
    if rlist:
        s = sys.stdin.readline()
        print repr(s)
        handle(s) # handle is a method to handle and react according to input s 
```

I found that when the keyboard input ends outside of the waiting in `select()` (usually it ends during the 5 secs of `is_alive()`), the `if rlist:` will get false.

I can understand why but I don't know how to solve it.

And there is still another question related to the situation mentioned above, sometimes `readline()` will return the last line of my input when some inputs are located across different `select()` waiting.

That means, if I enter **'abc\n'** and unfortunately the **'\n'** located outside of wating in `select()` (that means, when I press ***Enter***, the program are executing other parts, such as `is_alive()`), and then if I enter **'def\n'** and this time the ***Enter*** pressed successfully located within `select()`, I'll see the `s` from `readline()` becomes **'def\n'** and the first line is disappeared.

Is there any good solution to solve two issues above? I'm using FreeBSD 9.0.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:44:24.303

正如您在`is_alive()`调用中的代码`ssh`，这将消耗标准输入。

尝试从`ssh`选项`-n`或重新定向的`stdin`.

后者将与

```
sp = subprocess.Popen(..., stdin=subprocess.PIPE)
sp.stdin.close() 
```

# java - Why java.util.concurrent.atomic.AtomicBoolean is internally implemented with int?

> ID：13724858
> 
> 赞同：24
> 
> 时间：2012-12-05T13:57:12.830
> 
> 标签：java, multithreading, concurrency, atomic, java.util.concurrent

AtomicBoolean stores its value in:

```
private volatile int value; 
```

Then, for example, extracting its value is done like this:

```
 public final boolean get() {
    return value != 0;
} 
```

What is the reason behind it? Why `boolean` was not used?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T14:23:48.253

AFAIK，`int`是可以跨不同机器类型实现的最小类型 CAS 操作。

注意：由于对象分配是 8 字节对齐的，因此使用较小的类型不会节省任何内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:28:55.993

这可能是为了能够将几个`Atomic`类建立在同一个基 ( `Unsafe`) 上，该基使用整数并提供比较和交换操作。

[Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)很好地解释了内部工作原理。

# javascript - Why won't this jQuery ajax call work in chrome

> ID：13724864
> 
> 赞同：0
> 
> 时间：2012-12-05T13:57:20.253
> 
> 标签：javascript, jquery, ajax, google-chrome

I cannot get this $.ajax function to work in Chrome. When I make the ajax request, a response is never returned. When I view this in Chrome dev tools, it states that the json request is still pending. So far, I have found suggestions to add these parameters to the options.

'{type: "post", data: '', cache: false, async: false}'

However, none of these options made it work.

```
 try {
            var o = {username: 'adobeedge', count: 4};
            var twitterUrl = 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=' + o.username + '&count=' + o.count;

            $("body").append('<p>attempting ajax</p>');

            $.ajax({url: twitterUrl,
                dataType: 'jsonp',
                type: "post",
                data: '',
                cache: false,
                async: false,
            })
                    .success(function(data) {

                    $.each(data, function(index, item) {
                        $("body").append(item.text);
                    });
                }) ;
        }
        catch (error) {
            alert("Error: " + error.toString());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:51:48.453

以下代码在我的情况下工作正常

我的 chrome 版本：23.0.1271.95 m

```
try {
        var o = {username: 'adobeedge', count: 4};
        var twitterUrl = 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=' + o.username + '&count=' + o.count;

        $("body").append('<p>attempting ajax</p>');

        $.ajax({url: twitterUrl,
            dataType: 'jsonp',
            type: "post",
            data: '',
            cache: false,
            async: false,
        })
                .success(function(data) {

                $.each(data, function(index, item) {
                    $("body").append(item.text);
                });
            }) ;
    }
    catch (error) {
        alert("Error: " + error.toString());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T23:42:55.613

我今天在 OSX 10.8.2 上的一个完全修补的 Chrome 上与这个问题作斗争，你描述的确切症状。这是我可以通过谷歌找到的唯一提及我的问题。

事实证明，这是由一个名为[Disconnect](https://chrome.google.com/webstore/detail/disconnect/jeoacafpbcihiomhlakheieifhpjdfeo?hl=en)的以隐私为中心的扩展程序引起的。

尝试禁用扩展程序以查看是否可以解决问题。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:08:53.857

我不知道这是否有任何帮助，但我从未见过附加在 ajax 调用外部的成功函数。我看过的所有 jQuery ajax 文档都显示了附在末尾的“.done”。但是，我只看到成功定义为实际 ajax 调用本身中的一个选项。您可以尝试如下重写它：

```
$.ajax({
    url: twitterUrl,
    dataType: 'jsonp',
    type: "post",
    data: '',
    cache: false,
    async: false,
    success: function(data) {
        $.each(data, function(index, item) {
            $("body").append(item.text);
        });
    }
}); 
```

看看这是否有帮助。还有另一篇[Stack Overflow 文章](https://stackoverflow.com/questions/8840257/jquery-ajax-handling-continue-responses-success-vs-done)也可能对您有所帮助。本文描述了“success:”与“.done”的不同用法。有关 .ajax 文档的更多信息，请访问 .ajax 的 jQuery API[文档](http://api.jquery.com/jQuery.ajax/)。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:17:05.337

`jsonp`不支持同步调用。试试`async: true`。

我无法尝试它，因为我在推特被封锁的办公室工作。

# java - OpenJPA：映射 Oracle RAW 列

> ID：13724868
> 
> 赞同：0
> 
> 时间：2012-12-05T13:57:36.823
> 
> 标签：java, oracle, websphere, openjpa

我们的一个 Oracle 数据库中有一个 RAW 列。

就我们在​​其他项目中看到的而言，应该可以将此列映射到 String 属性。

```
@Column(name = "MYFIELD")
private String myfield; 
```

它适用于 Spring，但在 WebSphere 7 中，我们收到以下错误：

```
<openjpa-1.2.3-SNAPSHOT-r422266:1372550 fatal user error> org.apache.openjpa.persistence.ArgumentException: "mypackage.MyClass.myfield" declares a column that is not compatible with the expected type "varchar".  Column details:
Full Name: MYTABLE.MYFIELD
Type: varbinary
Size: 50
Default: null
Not Null: true 
```

出了什么问题？我们在 WebSphere 中也看到了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:28:30.367

最后，我们不得不从 persistence.xml 文件中删除以下行：

```
 <property name="openjpa.jdbc.SchemaFactory" value="native(ForeignKeys=true)"/> 
```

# javascript - 更改 div 内容的不完全工作的 jQuery 脚本

> ID：13724870
> 
> 赞同：1
> 
> 时间：2012-12-05T13:57:58.730
> 
> 标签：javascript, jquery, html

所以我的问题在这里：http: [//jsfiddle.net/hskhu/](http://jsfiddle.net/hskhu/)

当我单击“Rejestracja”链接时，它会更改 div 的内容，但是在此之后当我尝试单击“logowanie”链接时没有任何关系，我不知道为什么有人可以帮助我？所有具有 Rejestracja 和 logowanie 内容的 div 都在带有 display:none 属性的 html 下

JS在这里：

```
<script>
    $(document).ready(function(){
        $('#change').click(function(){
            var $which = $(this).html();
            var $wyjmij = $('#' + $which).html();
            $('#loginbox').html($wyjmij);
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:01:09.790

您正在将事件绑定到具有 id 的元素`#change`。单击链接时您正在替换元素，这意味着当前绑定的事件没有有效的目标。

您需要将事件绑定到更接近的静态元素并将事件委托给`#change`.

您可以使用`on()`.
检查[**on() 文档**](http://api.jquery.com/on/)`Direct and delegated events`中的部分。[](http://api.jquery.com/on/)

 **将您的代码更改为以下内容：

```
$(document).ready(function(){
    $("#loginbox").on("click", "#change", function(){
        var $which = $(this).html();
        var $wyjmij = $('#' + $which).html();
        $('#loginbox').html($wyjmij);
    });
}); 
```

### [DEMO](http://jsfiddle.net/hskhu/2/) - 通过绑定到`#loginbox`目标来使用动态绑定`#change`**

# python - Step by step showing 2D/3D add/remove points

> ID：13724871
> 
> 赞同：3
> 
> 时间：2012-12-05T13:58:01.410
> 
> 标签：python, coordinates, computational-geometry, point

I'm writing some python functions that deals with manipulating sets of 2D/3D coordinates, mostly 2D.

The issue is debugging such code is made difficult just by looking at the points. So I'm looking for some software that could display the points and showing which points have been added/removed after each step. Basically, I'm looking for a turn my algorithm into an animation.

I've seen a few applets online that do things similar what I was looking for, but I lack the graphics/GUI programming skills to write something similar at this point, and I'm not sure it's wise to email the authors of things whose last modified timestamps reads several years ago. I should note I'm not against learning some graphics/GUI programming in the process, but I'd rather not spend more than 1-3 days if it can't be helped, although such links are still appreciated. In this sense, linking to a how-to site for writing such a step-by-step program might be acceptable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:53:52.267

使用该`matplotlib`库，很容易获得工作动画。下面是一个可以使用的最小示例。该功能`generate_data`可以根据您的需要进行调整：

```
import numpy as np
import matplotlib.pyplot as plt 
import matplotlib.animation as animation

def generate_data():
    X = np.arange(25)
    Y = X**2 * np.random.rand(25)
    return X,Y 

def update(data):
    mat[0].set_xdata(data[0])
    mat[0].set_ydata(data[1])
    return mat 

def data_gen():
    while True:
        yield generate_data()

fig, ax = plt.subplots()
X,Y = generate_data()
mat = ax.plot(X,Y,'o')
ani = animation.FuncAnimation(fig, update, data_gen, interval=500,
                              save_count=10)

ani.save('animation.mp4')
plt.show() 
```

![在此处输入图像描述](../Images/349c304fa879e5d3cfbfc4fd8ada5044.png)

此示例改编自[先前的答案](https://stackoverflow.com/a/10431216/249341)并修改为显示线图而不是颜色图。

# java - Set annotation meta properties programmatically

> ID：13724872
> 
> 赞同：3
> 
> 时间：2012-12-05T13:58:03.083
> 
> 标签：java, annotations

Is it possible to set properties of annotation programmatically. So if I have :

```
@interface Author(
    String name();
    Date date ();
) 
```

I want to be able to set the name property inside the code as if it is a regular class. Is this possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:19:07.380

*   您不能`Date`在注释中使用
*   要在运行时访问它，您需要添加`@Retention(RetentionPolicy.RUNTIME)`保留策略
*   注释的声明用于`{}`注释定义，而不是`()`
*   **不，您不能在运行时使用普通 Java 功能修改注释**
*   您可以使用字节码操纵器来执行此操作，例如[Javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)。但这并不是微不足道的。

为什么要在运行时执行此操作？可能还有其他更好的解决方案来解决您的问题。

# c# - How to Implement GetEnumerator method for class that implements IEnumerable >

> ID：13724878
> 
> 赞同：3
> 
> 时间：2012-12-05T13:58:25.203
> 
> 标签：c#, linq, ienumerable

**BACKGROUND:** I created a generic `TimeSeries<T>` class that should implement the `IEnumerable<IEnumerable<T>>` interface:

```
public interface ITimeSeries<T> : IEnumerable<IEnumerable<T>> 
{
    T[,] DataMatrix { get; }  

    DateTime[] DateTime { get; }

    string[] Variables { get; }
}

public class TimeSeries<T> : ITimeSeries<T>
{
    public IEnumerator<IEnumerable<T>> GetEnumerator()
    {...}

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

The `TimeSeries<T>` class is 'internally' implemented as a matrix data structure with each column representing a different variable and each row an observation. There is also an additional `DateTime[]` array that represents the time axis.

As a start I would like to be able to iterate through the `TimeSeries<T>` variable by variable with a `foreach` loop and also through all observations for a specific variable (with an inner `foreach` loop), but the actual reason for the IEnumerable interface implementation is to get all the features provided by LINQ through the `IEnumerable` interface, provided that I can somehow ensure that the DateTime association of each observation stays intact.

**So for the question:** How should I go about to implement the `GetEnumerator` method to achieve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:14:00.737

最简单的方法就是遍历行并返回每一行的值。我假设您以行优先顺序存储，其中第一个维度是行，第二个维度是列。只需翻转下面的 r 和 c 以获得列主顺序：

```
public IEnumerator<IEnumerable<T>> GetEnumerator()
{
    int rows = DataMatrix.GetLength(0);
    int cols = DataMatrix.GetLength(1);

     for(int r = 0; r < rows; r++)
     {
        T[] row = new T[cols]();

        for(int c = 0; c < cols; c++)
        {
            row[c] = DataMatrix[r,c];
        }
        yield return row;
    }
} 
```

如果您想避免复制，您可以将其实现为 a `List`of `List`s 或 an `Array`of `Array`s（a`T[][]`而不是 a `T[,]`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:45:23.613

我决定添加一个结构，它包装每个值并添加 DateTime stamp 和 Variable name 属性，GetEnumerator 方法产生一列包装值：

```
 public struct TSItem<T>
    {
        public string Variable { get; private set; }
        public DateTime Date { get; private set; }
        public T Value { get; private set; }
    }

    public IEnumerator<IEnumerable<TSItem<T>>> GetEnumerator()
    {
        int rows = DataMatrix.GetLength(0);
        int cols = DataMatrix.GetLength(1);

        for (int c = 0; c < cols; c++)
        {
            var col = new List<TSItem<T>>();

            for (int r = 0; r < rows; c++)
            {
                col.Add(new TSItem<T>(this.Variables[c], this.DateTime[r], 
                                DataMatrix[r, c]));
            }
            yield return col;
        }
    } 
```

这可能不是性能最高的解决方案，但在 LINQ 查询方面实现了我想要的。

# java - What exception would be thrown in a @Transactional method if a database connection is unavailable?

> ID：13724885
> 
> 赞同：0
> 
> 时间：2012-12-05T13:58:52.613
> 
> 标签：java, spring, jpa

Using `@org.springframework.transaction.annotation.Transactional` with

```
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="txMgr">
    <property name="entityManagerFactory" ref="emFactory"/>
</bean> 
```

and

```
<tx:annotation-driven mode="aspectj" transaction-manager="txMgr"/> 
```

What exception would be thrown upon entering the `@Transactional` method, if any?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:15:21.157

它将成为 RuntimeException 的子类。

这必须在比您的服务更高的级别上进行管理。如果数据库是 KO，回滚是无关紧要的^^。

# php - Handling relationships with the Data Mapper pattern

> ID：13724886
> 
> 赞同：10
> 
> 时间：2012-12-05T13:58:52.413
> 
> 标签：php, design-patterns, orm, datamapper

I am using the Data Mapper Pattern and I am wondering what is the best way to handle relationships with that pattern. I spent a lot of time searching for solutions in Google and Stack overflow, I found some but I am still not completely happy about them, especially in one special case that I will try to explain.

I am working with PHP so the examples of code that I will put are in PHP.

Let's say I have a table "team" (id, name) and a table "player" (id, name, team_id). This is a 1-N relationship. By implementing the Data Mapper pattern, we will have the following classes: Team, TeamMapper, Player and PlayerMapper.

So far, everything is simple. What if we want to get all players from a team?

The first solution I found is to create a method getAllPlayers() in the Team class which will handle that with lazy loading and proxies. Then, we can retrieve the players of a team like that:

```
$players = $team->getAllPlayers(); 
```

The second solution I found is to directly use the PlayerMapper and pass the team ID as parameter. Something like:

```
$playerMapper->findAll(array('team_id' => $team->getId())); 
```

But now, let's say that I want to display a HTML table with all the teams and with a column 'Players' with all of the players of each team. If we use the first solution I described, we will have to do one SQL query to get the list of teams and one query for each team to get the players, whcih means N+1 SQL queries where N is the number of teams.

If we use the second solutions I described, we can first retrieve all team IDs, put them in an array, and then pass it to the findAll method of the player mapper, something like that:

```
$playerMapper->findAll(array('team_id' => $teamIds)); 
```

In that case, we need to run only 2 queries. Much better. But I am still not very happy with that solution because the relationships are not described into the models and it is the developer who must know about them.

So my question is: are there others alternatives with the Data Mapper pattern? With the example I gave, is there a good way to select all teams with all players in just 2 queries with the description of the relationships into the model?

Thank you in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:43:28.003

如果您查看 Martin Fowler 描述 DataMapper 工作原理的文本，您会发现您可以使用一个查询来获取您需要的所有数据，然后将这些数据传递给每个映射器，从而允许映射器仅挑选数据它需要。

对您来说，这将是一个从 Team 到 Player 的查询，返回一个结果集，其中包含每个唯一 Player 的重复 Team 数据。

然后，您必须通过仅在数据更改时创建新对象来满足映射代码中的重复。

我做了类似的事情，其中​​等效的是团队映射器迭代结果集，并且对于每个独特的团队，将结果集传递给玩家映射器，以便它可以创建一个玩家，然后将玩家添加到团队的集合中。

虽然这可行，但这种方法在下游存在问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T09:45:52.610

我已经在我的一个项目中成功实施了这个问题的可能解决方案。它并不复杂，在上述示例中只使用 2 个查询。

解决方案是添加另一层负责处理关系的代码。

例如，我们可以把它放在一个服务类中（它也可以用于其他东西，而不仅仅是处理关系）。因此，假设我们在 Team 和 TeamMapper 之上有一个 TeamService 类。TeamService 将有一个方法 getTeamsWithRelationships() 将返回一组 Team 对象。getTeamsWithRelationships() 将使用 TeamMapper 获取团队列表。然后，使用 PlayerMapper，它将只查询这些球队的球员列表，并使用 Team 类中的 setPlayers() 方法将球员设置为球队。

该解决方案非常简单且易于实现，并且适用于所有类型的数据库关系。我想有些人可能会反对它。如果是这样，我很想知道有什么问题？

# android - whenever delete the record from sqlite databse navigate the activity to previous and display the records which available in databse

> ID：13724887
> 
> 赞同：0
> 
> 时间：2012-12-05T13:58:52.943
> 
> 标签：android

In my application listview is available and in each row add button and show button available, whenever add button clicked the data is stored sqlite database.After show button clicked navigate the another activity in that all data displayed which is available in database. And in that activity delete button is available,whenever delete button is clicked delete the record from the database at the same time navigate the activity to previous activity and display remaining records in that activity.And my question is how to navigate activity after delete the record from the database. This is my onclick listener if(v.equals(btnAddBeer)){

```
 if(addCheck==true){
              if(helper.getBeerid(strBeerId).getCount()>0)
              { 
```

// Toast.makeText(MyBeersActivity.this, "Already added", Toast.LENGTH_SHORT).show(); } else{

```
 db = helper.getWritableDatabase();
               helper.insert(strBeerId,strBeerName,strBeerId,db);
               btnAddBeer.setBackgroundResource(R.drawable.deletebeer_reviews);
               Toast.makeText(MyBeersReviewsActivity.this, "Successfully added", Toast.LENGTH_SHORT).show();
               addCheck=false;
              }
            }
            else{

                helper.deleteRecord(strBeerId);
                Log.e("delete.....","successfully");

                new AlertDialog.Builder(getParent()) 
                .setTitle("Message")
                .setMessage(strBeerName+" is deleted successfully")
                .setPositiveButton(DataUrls.dialogbutton, new DialogInterface.OnClickListener() 
                {
                            public void onClick(DialogInterface dialog, int whichButton) 
                            {
                                MyBeersTabActivity.group.onBackPressed();
                            }
                }).show();
            }
        } 
```

1.  List item

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:02:24.480

Sounds like you simply need to `finish()` the "data display" `Activity` from the OnClickListener of the delete button.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:54:51.767

您可以使用 onBackPressed() 函数返回上一页。在删除按钮的 onclick 事件中调用此内置函数。

# ruby-on-rails - How to strip the CSS code in Rails

> ID：13724890
> 
> 赞同：0
> 
> 时间：2012-12-05T13:58:57.913
> 
> 标签：ruby-on-rails, ruby, string, escaping

I have the rails application which accepts the XML output from another application. For some condition the XML tage content come up with CSS code

For example :

```
<\/sample/> .headermenu{float:left;no-repeat right;font-size:0.75em; padding-bottom:3px}, #div{float:left} This is the test value from another site <\/sample/> 
```

In my ruby application i have parse the XML content and display the content.

It start displaying CSS content like the above. I want to display strip the CSS code if exist in the content.

Is their any way . we can do this please help...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:24:22.747

`raw`方法可能会对您有所帮助。它会在不转义字符串的情况下输出数据。
查看此处[http://apidock.com/rails/ActionView/Helpers/RawOutputHelper/raw](http://apidock.com/rails/ActionView/Helpers/RawOutputHelper/raw) 了解更多详情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T14:53:45.557

我不知道这是否是您正在寻找的，但是您可以在需要 rails 或 ruby​​ gem 时顺便尝试[css 解析器，只需在 ruby](http://rubygems.org/gems/css_parser) [​​gems搜索即可](http://rubygems.org)

# javascript - Execute jQuery after changing DOM

> ID：13724893
> 
> 赞同：2
> 
> 时间：2012-12-05T13:59:03.240
> 
> 标签：javascript, dom, dom-events, fancybox

This piece of code adds images to the DOM after dragging them into a div-element.

```
var showImage = function (ev) {
    var file = ev.target.file;

    var thumb = new Image(100,100);
    thumb.src = ev.target.result;
    thumb.className = 'thumbFoto';
    thumb.title = file.name;
    thumb.alt = file.name;

    var anchor = document.createElement('a');
    anchor.className = 'thumbLink';
    anchor.href = ev.target.result;
    anchor.rel = 'album1';
    anchor.title = file.name;
    anchor.appendChild(thumb);

    dropZone.appendChild(anchor);
} 
```

This code is linked to the page using

```
<script type="text/javascript" src="js/code.js"></script> 
```

After the images are added to the webpage, I would like preview them using Fancybox. When the page is loaded (before I dragged any image onto it), this script is executed in the html-header:

```
<script type="text/javascript">
    $(document).ready(function() {
        /* Apply fancybox to albums */
        $("a.thumbLink").fancybox();
    });
</script> 
```

Now how do I make sure I can preview the recently added images using Fancybox?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:19:11.520

我假设您使用 jQuery UI 可拖动对象，您可以在可拖动对象的事件中调用您的幻想`stop()`框，如下所示：

```
$( ".selector" ).draggable({
    stop: function( event, ui ) {
        $("a.thumbLink").fancybox();
    }
}); 
```

**编辑：**

根据您的代码，您可以简单地将您的 fancybox 调用者放入函数中`showFileInList`，如下所示：

```
var showFileInList = function (ev) {
    var file = ev.target.file;

    if(document.getElementById("fileDropText")){
        var textToBeRemoved = document.getElementById("fileDropText");
        var imageToBeRemoved = document.getElementById("fileDropImg");
        textToBeRemoved.parentElement.removeChild(textToBeRemoved);
        imageToBeRemoved.parentElement.removeChild(imageToBeRemoved);
    }

    var thumb = new Image(100,100);
    thumb.src = ev.target.result;
    // var thumb = createThumb(ev.target.result);
    thumb.className = 'thumbFoto';
    thumb.title = file.name;
    thumb.alt = file.name;

    var anchor = document.createElement('a');
    anchor.className = 'thumbLink';
    anchor.href = ev.target.result;
    anchor.rel = 'album1';
    anchor.title = file.name;
    // anchor.addEventListener("click", showImagePreview, false);
    anchor.appendChild(thumb);

    // fileList.insertBefore(anchor, dropZone);
    dropZone.appendChild(anchor);

    // show fancybox
    $("a.thumbLink").fancybox({type: "inline", href: "#fileDrop"});
} 
```

**[在此处](http://jsfiddle.net/aanred/2daab/)**查看工作代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:30:35.010

尝试使用“责任链”模式通过单个对象路由所有 DOM 更改。这样，对象就可以跟踪对 dom 的任何更改。然后我会使用 ConversationJS 来触发一个函数，该函数可以对 DOM 进行任何更改：[https ://github.com/rhyneandrew/Conversation.JS](https://github.com/rhyneandrew/Conversation.JS)

# sql - how to query the occuring time of the max wind from a database?

> ID：13724894
> 
> 赞同：-1
> 
> 时间：2012-12-05T13:59:03.687
> 
> 标签：sql, sql-server, tsql, sql-server-2005

I want to find the occuring time of the max wind, the max wind, and total rain from a database. The database have three columns: observerTime, wind and rain, how to generate the SQL statement to get the result ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:02:50.493

```
select observerTime from t where wind = (select max(wind) from t) 
```

or if you need the last date when it occures

```
select max(observerTime) from t where wind = (select max(wind) from t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:29:17.570

您没有提到数据库，但以下其中一项可能会起作用：

```
select top 1 *, (select sum(rain) from t) as TotalRain
order by wind desc 
```

或者：

```
select *, (select sum(rain) from t) as TotalRain
from t
order by wind desc
limit 1 
```

或者

```
select *, (select sum(rain) from t) as TotalRain
from (select *
      from t
      order by wind desc
     ) t
where rownum = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:46:20.737

你应该能够使用这样的东西：

```
select t1.observerTime, 
  t1.wind, 
  (select sum(rain) from yourtable) TotalRain
from yourtable t1
inner join
(
  select max(wind) MaxWind
  from yourtable
) t2
  on t1.wind = t2.maxwind 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e60a2/6)

由于您使用的是 SQL Server，因此您还可以使用`row_number()`：

```
select observertime,
  wind,
  (select sum(rain) from yourtable) TotalRain
from
(
  select observertime,
    wind,
    rain,
    row_number() over(order by wind desc) rn
  from yourtable
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e60a2/12)

# linux - x64 memset core, is passed buffer address truncated?

> ID：13724895
> 
> 赞同：27
> 
> 时间：2012-12-05T13:59:09.010
> 
> 标签：linux, debugging, gcc, assembly, gdb

**1\. Problem Background**

Recently a core dump occurred on one of our on-line search server. The core happens in `memset()` due to the attempt to write to an invalid address, and hence received the SIGSEGV signal. The following information is from dmsg:

`is_searcher_ser[17405]: segfault at 000000002c32a668 rip 0000003da0a7b006 rsp 0000000053abc790 error 6`

The environment of our on-line servers goes as follows:

*   OS: RHEL 5.3
*   Kernel: 2.6.18-131.el5.custom, x86_64 (64-bit)
*   GCC: 4.1.2 20080704 (Red Hat 4.1.2-44)
*   Glibc: glibc-2.5-49.6

The following is the relevant code snippet:

```
CHashMap<…&gt;::CHashMap(…)
{
     …
     typedef HashEntry *HashEntryPtr;              
     m_ppEntry = new HashEntryPtr[m_nHashSize];   // m_nHashSize is 389 when core
     assert(m_ppEntry != NULL);
     memset(m_ppEntry, 0x0, m_nHashSize*sizeof(HashEntryPtr)); // Core in this memset() invocation 
     …
} 
```

The assembly code of the above code is:

```
…
0x000000000091fe9e <+110>:   callq  0x502638 <_Znam@plt>  // new HashEntryPtr[m_nHashSize]
0x000000000091fea3 <+115>:   mov    0xc(%rbx),%edx         // Get the value of m_nHashSize
0x000000000091fea6 <+118>:   mov    %rax,%rdi               // Put m_ppEntry pointer to %rdi for later memset invocation
0x000000000091fea9 <+121>:   mov    %rax,0x20(%rbx)        // Store the pointer to m_ppEntry member variable(%rbx holds the this pointer)
0x000000000091fead <+125>:   xor    %esi,%esi               // Generate 0
0x000000000091feaf <+127>:   shl    $0x3,%rdx               // m_nHashSize*sizeof(HashEntryPtr)
0x000000000091feb3 <+131>:   callq  0x502b38 <memset@plt> // Call the memset() function
… 
```

In the core dump, the assembly of `memset@plt` is:

```
(gdb) disassemble 0x502b38
Dump of assembler code for function memset@plt:
    0x0000000000502b38 <+0>:     jmpq   *0x771b92(%rip)        # 0xc746d0 <memset@got.plt>
    0x0000000000502b3e <+6>:     pushq  $0x53
    0x0000000000502b43 <+11>:    jmpq   0x5025f8
End of assembler dump.
 (gdb) x/ag 0x0000000000502b3e+0x771b92
    0xc746d0 <memset@got.plt>:      0x3da0a7acb0 <memset>
 (gdb) disassemble 0x3da0a7acb0
 Dump of assembler code for function memset:
    0x0000003da0a7acb0 <+0>:     cmp    $0x1,%rdx
    0x0000003da0a7acb4 <+4>:     mov    %rdi,%rax
    … 
```

For the above GDB analysis， we know that the address of `memset()` has been resolved in the relocation PLT table. That is to say, the first `jmpq *0x771b92(%rip)` will directly jump to the first instruction of function `memset()`. Besides, the program had run nearly one day on-line, the relocation address of `memset()` should have been already resolved earlier.

**2\. Weird phenomenon**

This core fired at the instruction `=> 0x0000003da0a7b006 <+854>: mov %rdx,-0x8(%rdi)` in the `memset()`. Actually this is the instruction in the `memset()` to set the `0` at the right begin position of the buffer which is the first parameter of `memset()`.

When cored , in frame 0, the value of `$rdi` is `0x2c32a670` ,and `$rax` is `0x2c32a668`. From the assembly analysis and off-line test, `$rax` should hold the source buffer of the `memset`, i.e., the first parameter of `memset()`.

So, in our example, `$rax` should be same as the address of `m_ppEntry`, the value of which is stored in the `this` object (`this` pointer is stored in `%rbx`) first before it is zeroed by `memset` later. However, the value of `m_ppEntry` is `0x2ab02c32a668`.

Then use `info files` GDB command to check, the address `0x2c32a668` is indeed invalid (not mapped), and address `0x2ab02c32a668` is a valid address.

**3\. Why it is weird?**

The weird place of this core is that: If the real address of `memset` has been resolved already(very very probably), then there are only very few instructions between the operation to put the pointer value into `m_ppEntry` and the attempt to `memset` it. And actually the value of register `$rax` (holding the passed buffer address) are not changed at all during these instructions. So, how can `m_ppEntry` isn’t equal to `$rax`?

What is weird *More* is that: when core, the value of `$rax` (`0x2c32a668`) is actually the value of lower 4 bytes of `m_ppEntry` (`0x2ab02c32a668`). If there is indeed some relationship between the two values, is the `m_ppEntry` parameter passed to `memset` being truncated? However, the involved several instructions all use `%rax`, rather than `%eax`. By the way, I cannot reproduce this issue offline.

So,

1) Which address is valid? If `0x2c32a668` is valid? Is the heap corrupted just between the several instructions? And how to paraphrase that the value of `m_ppEntry` is `0x2ab02c32a668`, and why the low 4 bytes of this two value is the same?

2) If `0x2ab02c32a668` is valid, why the address is truncated when passed into the 64-bit `memset()`? Under which condition this error will occur? I cannot reproduce this offline. Is this issue an known bug? I didn't find it through Google.

3) Or, is it due to some hardware or power issue to make the 4 higher bytes of `%rdi` passed to `memset` zeroed? (I’m very very reluctant to believe this).

**At last, any comment on this core is appreciated.**

Thanks,

Gary Hu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:40:46.113

考虑到您提到一天的运行情况，我假设大部分时间这段代码都可以正常工作。我同意信号值得检查，它看起来确实像在其他地方发生指针截断一样可疑。

我认为唯一的另一件事可能是新的问题。有没有可能有时您最终会调用重载的 new 运算符？为了完整起见， m_ppEntry 的声明是什么？我假设您使用的是 no throw new 否则`assert(m_ppEntry != NULL);`将毫无意义。

# c++ - 在 QPainter::end() 之前调用 QImage::save() 是否安全

> ID：13724898
> 
> 赞同：2
> 
> 时间：2012-12-05T13:59:10.853
> 
> 标签：c++, qt, qpainter, qimage

在这段代码中：

```
QPainter painter(&image);

// do painting .......

painter.end(); // is this needed?
image.save(tempFileName); 
```

为了刷新所有更改，我是否需要在保存 QImage 之前关闭 QPainter，或者我可以在关闭 QPainter 对象之前保存它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:09:23.863

是的，你应该在打电话`painter.end()`之前打电话`image.save()`。的行为`painter.end()`最终取决于在您的程序运行的任何平台上使用的底层绘制引擎。在*某些*平台上使用*某些*`image.save()`版本的 Qt之前，您可能能够摆脱调用，但是更改您的平台或您的 Qt 版本可能会在以后给您带来问题。`painter.end()`

# jquery - console.timeEnd("") reference for an if Function (Javascript)

> ID：13724900
> 
> 赞同：0
> 
> 时间：2012-12-05T13:59:20.540
> 
> 标签：jquery

**How the current version of my code works:**

When a user's mouse pointer hovers a Nav element the background image of the website fades to a smaller less opaque version. When the mouse leaves the nav Element it returns to the previous image.

The code for this looks like this:

```
$(document).ready(function(){
  $("li a").mouseenter(function(){
    $('.image').fadeTo(100, 0.5, function() {
    $(".image").css("background","url(images/backdrop_smaller.png)");
    });
  });
$("li a").mouseout(function(){
    $('.image').fadeTo(100, 1.0, function() {
    $(".image").css("background","url(images/backdrop_orig.png)");
  });
  });
}); 
```

The only problem with this is that if the user rapidly moves in between Nav elements the image rapidly shifts (which looks disorienting) and eventually lags behind the users command (due to the .fadeTo interval).

So as to prevent this I thought I would set up a console timer to print the time when the User leaves a nav element and enters another. Then create an if function to dictate whether or not the first mouseout transition plays to completion.

The timer looks like this:

```
$(document).ready(function(){
  $("li a").mouseout(function(){
    console.time("time")
});
});

  var FunctionEndTime = $(document).ready(function(){
  $("li a").mouseenter(function(){
    var end = console.timeEnd("time")
});
}); 
```

My problem lies in referencing this printed console time in the if function and then also preventing the fade triggered by .mouseout from playing to completion. For example, if the the time difference was less than the fade time (100ms) the fade would stop transitioning. This would leave the smaller less opaque background image and prevent disorienting image flicker and

Here is what my not working code looks like:

```
function TimeReset() {
  if (end < 25)
  {
    $(document).ready(function(){
  $("li a").mouseout(function(){
     $('.image').fadeTo(100, 0.5, function() {
    $(".image").css("background","url(images/backdrop_smaller.png)");
      });
  });
});
} 
```

The code above obviously does not do what I would like and is referencing things incorrectly. I just am not sure how to do it properly.

The question is: am I thinking about this all incorrectly? or do I just not know how to implement the code to completion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:24:55.257

To prevent blinking on rapid cursor moving you may consider using [$.stop()](http://docs.jquery.com/Effects/stop#clearQueuegotoEnd) before queuing new animation step. It should look like that:

```
$('.image').stop().fadeTo(100, 0.5, function() { ... 
```

Note that $.stop() has two optional parameters that can be helpful.

# clojure - Clone seq in Clojure

> ID：13724907
> 
> 赞同：4
> 
> 时间：2012-12-05T13:59:34.797
> 
> 标签：clojure, seq

How can I lazily "clone" a seq in Clojure. Something along the lines of

```
(let [[s1 s2] (clone-seq s)]
 ...) 
```

such that s1 and s2 are independent seqs backed by s?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T14:10:47.840

“克隆”一个 seq 对我来说是错误的：在正常的 Clojure 使用中，你会期望 seqs 是*不可变*的，所以做这样的事情应该是完全可以的：

```
(let [s1 s
      s2 s]
   .....) 
```

如果您的 seq 是可变的或在遍历它们时有某种副作用，那么您可能会因为不同的原因遇到问题：可变的 seq 往往不适合像 Clojure 这样的函数式语言。你会遇到各种奇怪的问题：例如，当你“克隆”一个序列时，你是否希望副作用发生两次？您是否还需要对所有内容进行深度克隆？

# php - Zend 1.12 中 auth 适配器类文件的放置位置

> ID：13724909
> 
> 赞同：0
> 
> 时间：2012-12-05T13:59:37.933
> 
> 标签：php, zend-framework, zend-auth, zend-autoloader

因为我使用的是遗留表，所以我编写了自己的`Auth_Adapter`名为`User_Auth_Adapter_DbTable`. 我有一个模块`user`，我想在那里开设这个课程。

但是，我不知道将文件实际放在哪里以及如何命名它以便 Zend 自动加载器可以找到它。我google了一个多小时，没有找到提示，所以我把它放在下面`/application/modules/user/controller/Auth/Adapter/DbTable.php`，因为它是由那里的控制器使用的。但是没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:19:42.747

你能分享一些来自适配器的代码吗？我认为从逻辑上讲它必须在模型文件夹中。并且此类的名称应遵循 Zend Framework 命名约定。所以如果你把它放到models/user/auth/adapter/DbTable.php 类应该命名为Model_User_Auth_Adapter_DbTable

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:26:05.857

我认为您需要定义服务文件夹。定义文件夹命名`service`路径`/application/modules/user/service/`（[推荐 Zend-project 结构](http://framework.zend.com/manual/1.12/en/project-structure.project.html)），把你的适配器 DbTable.php 放在那里（类名必须是 bee `Application_Modules_User_Service_DbTable`）。你可以调用这个类：

```
$adapter = new Application_Modules_User_Service_DbTable(); 
```

# java - Java Swing UI 替换

> ID：13724914
> 
> 赞同：0
> 
> 时间：2012-12-05T13:59:45.827
> 
> 标签：java, swing

我必须创建一个可以使用 Java swing 的桌面应用程序 (.exe)。用于执行某些数据库操作的后端代码是用 Java 编写的。在 Swing 中编写 UI 会很容易，但我想知道是否有比 Swing 更好的东西，它看起来比 Swing UI 好得多。

我可以使用 Flex 吗？是否可以轻松地与 Java 代码合并。请建议是否有人知道开发此应用程序的任何其他更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:01:19.483

目前我会说你最好的选择是 JavaFX2（它带有最新的 Java 7 版本）。这提供了丰富的现代用户界面，您可以使用 Java（可选地与 XML 结合）构建它。JavaFX2 是 Oracle 官方对 AWT/Swing 的替代，将不再进一步开发。

此图像（取自 Oracle 文档）提供了一些示例。

![JavaFX 2 示例](../Images/44d6682304950ec9b4f417877a8b2f99.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:14:23.183

JavaFX 2 是 Swing 的更现代替代品，后者目前相对年轻，但在明年发布 Java 8 时可能会获得更大的发展势头。（在 JavaFX 2 中，旧的 FXScript 也消失了，API 现在是纯 Java。）就个人而言，我发现 API 更容易学习和更好地使用，并且从美学上讲，默认的跨平台外观实际上看起来不错。

见[这里](http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6)：

> *JavaFX 是否正在取代 Swing 作为 Java SE 的新客户端 UI 库？*
> 
> 是的。然而，在可预见的未来，Swing 仍将是 Java SE 规范的一部分，因此包含在 JRE 中。虽然我们建议开发人员在构建新应用程序时尽可能利用 JavaFX API，但可以使用 JavaFX 扩展 Swing 应用程序，从而实现更平滑的过渡。

如果你想要一些保持原生外观的东西（JavaFX 不提供我目前知道的原生皮肤），那么你可能想看看 SWT（就像 AWT 一样，它使用原生组件，但它更现代）或qt-jambi（本机 QT 工具包的 Java 绑定。）SWT 可能是两者中更受欢迎和受支持的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:29:58.937

[http://www.oracle.com/technetwork/java/javafx/overview/index.html](http://www.oracle.com/technetwork/java/javafx/overview/index.html)。我建议你使用 javafx。它类似于摇摆。[http://docs.oracle.com/javafx/](http://docs.oracle.com/javafx/)。

# javascript - javascript OOP nesting properties

> ID：13724915
> 
> 赞同：0
> 
> 时间：2012-12-05T13:59:50.493
> 
> 标签：javascript, oop

What I'm trying to achieve is the following structure for an object. Note that all properties values are constant strings:

```
ObjA
    ObjB
        prop1
        prop2
        prop3
    ObjC
        prop4
        prop5
    .
    .
    . 
```

So shoud it be possible to access the properties value using the following sintax:

```
alert(ObjA.ObjC.pro4); 
```

So far, I've tried something like the following without success.

```
 var csi = new Object();
    var cao98 = new Object();
    csi.cao98="";
    csi.cao98.rgi = "NRRGILIG";
    alert (csi.cao98.rgi); 
```

Is it possible? I do not want to get to far on this issue since there's a lot of discussion on this theme.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:02:51.193

If you just want plain objects, you can write that all into one expression using the literal syntax for objects:

```
var ObjA = {
        ObjB: {
            prop1: 'hello',
            prop2: 'howdy'
        },
        ObjC: {
            prop1: 'hi',
            prop2: 'world'
        }
    }
}

console.log(ObjA.ObjB.prop1 + ' ' + ObjA.ObjC.prop2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:01:30.320

在您的第三行，您将一个空字符串分配给`cao98`您的`csi`对象的属性。

我认为您的意思是：

```
var csi = new Object();
var cao98 = new Object();
csi.cao98=cao98;
csi.cao98.rgi = "NRRGILIG";
alert (csi.cao98.rgi); 
```

如果您只是像这样逐字定义对象，则可以改用对象文字语法：

```
var csi = {
    cao98: {
        rgi: "NRRGILIG"
    }
};

alert (csi.cao98.rgi); 
```

最佳方法取决于您使用对象的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:04:05.047

try

```
 var csi = {
        cao: {
            rgi: 'NRRGILIG'
        }
    }; 
```

# java - How to create a list of duplicated list items?

> ID：13724917
> 
> 赞同：1
> 
> 时间：2012-12-05T14:00:00.727
> 
> 标签：java, list, duplicates, java-6

I have a list of objects in this format :

```
class myObj {

    private String identifier;

    public myObj(String identifier){
        this.identifier = identifier;
    }

}

List<myObj> allobjects = new ArrayList<myObj>();
allobjects.add(new myObj("123"));
allobjects.add(new myObj("123"));
allobjects.add(new myObj("123"));
allobjects.add(new myObj("123"));
allobjects.add(new myObj("1234"));
allobjects.add(new myObj("12345"));
allobjects.add(new myObj("12"));
allobjects.add(new myObj("12")); 
```

What is an elegant method of extracting the duplicate objects into seperate Lists ? So in above example a new List is returned containing two lists. The first lists contains :

```
new myObj("123");
new myObj("123");
new myObj("123");
new myObj("123"); 
```

The second list contains :

```
new myObj("12");
new myObj("12"); 
```

A possible solution is to create a new object :

```
List<List<myObj>> newList = new ArrayList<List<myObj>> 
```

And then for each element in the list 'allobjects' iterate over each element and for each element that is contained more than once add it to the list. Then at the end of the iteration for the current element add the newly created list to 'newList'

Is this acceptable or is there another solution ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:10:07.427

将 equals 和 hashCode 方法添加到 myObj 类，以便您可以将它们用作 Map 键：

```
class myObj {

    private String identifier;

    public myObj(String identifier){
        this.identifier = identifier;
    }

    public int hashCode(){
        return identifier.hashCode();
    }

    public boolean equals(Object o){
        return identifier.equals(((myObj)o).identifier);
    }
} 
```

然后声明一个地图：

```
Map<myObj, List<myObj>> map = new HashMap<myObj, List<MyObj>>() 
```

并遍历原始列表。使用 myObj 作为映射键，每次检索与该 myObj 对应的列表。如果您第一次遇到某个 myObj，请不要忘记创建列表：

```
for(myObj obj : allobjects){
    List<myObj> list = map.get(obj);
    if(list == null){
        list = new ArrayList<myObj>();
        map.put(obj, list);
    }
    list.add(obj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:02:22.317

Implement equals as required and then you can just use contains and iterate through checking *other* collection.

Here's a way to do it with jdk8s' lambdas.

```
TransformService transformService = (inputs1, inputs2) -> {
            Collection<String> results = new ArrayList<>();
            for (String str : inputs1) {
                if (inputs2.contains(str)) {
                    results.add(str);
                }
            }
            return results;
        };
        Collection<String> inputs1 = new ArrayList<String>(2) {{
            add("lemon");
            add("cheese");
            add("orange");
        }};
        Collection<String> inputs2 = new
                ArrayList<String>(2) {{
                    add("apple");
                    add("random");
                    add("cheese");
                }};
        Collection<String> results = transformService.transform(inputs1, inputs2);
        for (String result : results) {
            System.out.println(result);
        }
    }

    public interface TransformService {
        Collection<String> transform(Collection<String> inputs1, Collection<String> inputs2);
    } 
```

# python - wait until page refreshed

> ID：13724924
> 
> 赞同：9
> 
> 时间：2012-12-05T14:00:27.620
> 
> 标签：python, selenium, webdriver, wait, selenium-webdriver

Here is a description of what I am trying to do using Selenium Webdriver in Python: I have my website which takes as input various parameters for a specific product and outputs a price for the product with those parameters. I am keeping all but one parameters constant and varying one specific parameter in a for loop to see how the price varies according to that one specific parameter. Once i change the parameter i submit the form and then i use implicitly wait as follows:

```
submit_btn.click()
driver.implicitly_wait(10)  
driver.find_element_by_name("Buy_Product")
soup=BeautifulSoup(driver.page_source) 
```

When entering the first set of parameters the page is clear and it does not contain the buttton with name "Buy_Product" so i am using the line

```
driver.find_element_by_name("Buy_Product") 
```

to make sure the code waits for that button to appear which will mean the page now contains the price i want to extract. The problem is that the second time through the loop when i vary the parameter and try to get the new price the button "Buy_Product" is already there so implicitly wait does not work anymore and sometimes it will take the previous page_source before the price has time to be updated. The tricky part is that sometimes even for different parameters the price is the same so i can not just check whether the visible text of the price has changed. Any ideas how this can be solved without using time.sleep?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:07:53.060

如果 Anuragh27crony 的解决方案对您不起作用，您可能还想考虑等待 jquery 处于非活动状态。代码看起来基本相同，但传入这个 javascript 调用：

```
ExecuteScript("return jQuery.active == 0") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:35:20.007

这里的情况有些棘手......我不确定......如果这有帮助......但试一试......

我的建议是关于 JavaScript 注入，我在其中检查页面是否已完全加载并等到那时。(c# 代码片段)

```
IWait<IWebDriver> Driver_Wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver, TimeSpan.FromSeconds(30.00));
Driver_Wait.Until(Driver => ((IJavaScriptExecutor)JS_Driver).ExecuteScript("return document.readyState").Equals("complete")); 
```

我希望这会有所帮助....一切顺利:-)

# c# - How to reference a file inside class library

> ID：13724925
> 
> 赞同：0
> 
> 时间：2012-12-05T14:00:28.713
> 
> 标签：c#, .net

I have this code in my asp.net app:

```
String appPath = HttpContext.Current.Request.MapPath(HttpContext.Current.Request.ApplicationPath);

String path = appPath + "\\Database\\SAMPLE.BIN"; 
```

I want to movie it to a class library, which then will be referenced by multiple projects.

The thing is that `HttpContext.Current.Request.ApplicationPath` is referencing the running app and not the class lib.

How do I put the `SAMPLE.BIN` inside the class lib, so that I don't have to duplicate it in all referencing projects?

EDIT:

At the end I need to be able to:

```
myobject.DatabasePath = appRoot + "\\Database\\SAMPLE.BIN"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:37:52.563

您有 2 个选择：

要么将值作为参数传递给新库：

```
public class MyNewLibrary {
  private string _path { get; set; }

  public MyNewLibrary(string path)
  {
      this.path = path;
  }
} 
```

或者您导入`System.Web`参考并随意使用`HttpContext`。

# symfony - 同时检查 ACL 类范围和对象范围

> ID：13724926
> 
> 赞同：0
> 
> 时间：2012-12-05T14:00:32.723
> 
> 标签：symfony, acl

我想在 Symfony2 中使用访问控制列表对我的访问控制进行建模。用户具有允许类范围访问的不同角色，但他们也可以具有对象范围访问。默认示例：管理员角色可以编辑所有评论，用户可以编辑自己的评论。

现在问题是检查权限：目前只检查类或对象范围：

`$securityContext->isGranted('EDIT', $identity)`

`identity`要么在哪里

`new ObjectIdentity('class', 'Acme\\BlogBundle\\Document\\Comment')`

或`comment`对象本身。

我认为选民会检查类范围和对象范围的访问，基于`comment`对象显然提供自己的类这一事实。现在我将如何实施呢？创建自定义选民？还是我完全错过了其他东西？

e：文档说：“PermissionGrantingStrategy 首先检查所有对象范围的 ACE，如果不适用，则将检查类范围的 ACE”：[http://symfony.com/doc/current/cookbook/security/acl_advanced。 html](http://symfony.com/doc/current/cookbook/security/acl_advanced.html)

所以这显然意味着如果存在对象范围，则根本不考虑类范围。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:26:00.917

好吧，创建一个类范围，我应该使用

```
$acl->insertClassAce($securityIdentity, MaskBuilder::MASK_OWNER); 
```

代替`->insertObjectAce(...`

这使得它可以在标准的 MySQL 实现中工作，但是 IamPersistent/MongoDBAclBundle 有一个错误，即 acl_entry 和类作用域 acl_oid 之间没有链接，这导致类作用域在投票期间永远不会出现在 $acl 中。

# checked - 如何以编程方式按下工具条按钮？

> ID：13724927
> 
> 赞同：3
> 
> 时间：2012-12-05T14:00:40.140
> 
> 标签：checked, delphi-prism, toolstripbutton, oxygene

我想在我的代码中按下工具条按钮，但我似乎无法做到这一点。我知道在 Delphi RAD Studio 或 XE 上，您可以执行以下操作并按下按钮。

```
ToolStripButton1.Down := true; 
```

我看到的唯一接近“向下”的 ToolStripButton 属性被**检查**为真或假。如果我将它设置为 true，它只会突出显示工具条按钮而不是按下它。

**当我将鼠标放在按钮上并单击时，按钮的外观如下：**

![在此处输入图像描述](../Images/325389be3192ad31247e13c327668975.png)

您可以清楚地看到“放大”按钮是向下的。

**这是当我尝试通过将 CheckOnClick 设置为 true 和 Checked true 来通过我的代码执行相同操作时按钮的外观。**

![在此处输入图像描述](../Images/23e43f2c50598f37a9f6e1e98eaf33a0.png)

在这张图片中，您唯一能看到的是它周围的蓝色框。我想如果我只使用按钮上的文本，你会看到整个按钮都被蓝色填充，表明它被按下了。

![在此处输入图像描述](../Images/69743fb8b932bf7acd051a2ac2f7ca3a.png)

我的其他程序中也有工具条按钮，其作用方式相同，但我必须使用 imagelist 控件在按下或按下或检查与未按下或按下或检查之间切换。

那么，有没有办法在 Delphi Prism 或 C# 中以编程方式按下 ToolStripButton？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:53:28.110

将`ToolStripButton.CheckOnClick`属性设置为`True`。（可在.`Behavior`部分中找到`Items Collection Editor`。）

这使得单击它就像`Down`在 Delphi 中切换属性`TSpeedButton`（使其平坦或凹陷），并且`if ToolStripButton1.Checked`相当于`if SpeedButton1.Down`在 Delphi 中。

为了设置测试，我做了以下事情：

*   创建了一个新的 Winforms 应用程序
*   掉了一个`ToolStrip`到新的`MainForm`
*   添加了四个`ToolStripButton`项目并为它们提供了图像，以使它们更易于查看。
*   为它们中的每一个设置`CheckOnClick`属性`True`
*   将`Checked`属性设置`toolStripButton1`为`True`；
*   将以下代码添加到`toolStripButton1.Click`

    方法 MainForm.toolStripButton1_Click(sender: System.Object; e: System.EventArgs); 开始 toolStripButton2.Checked := not toolStripButton2.Checked; toolStripButton4.Checked := toolStripButton2.Checked; 结尾;

运行应用程序（初始启动，`toolStripButton1`选中，其他未选中）：

![一键按下](../Images/2f5a04a1c9bd3db7d59a357422143ebe.png)

第一个按钮显然是向下的，其余的都是向上的。

点击`toolStripButton1`一次后：

![两个按钮向下](../Images/717014f41c734a94248c69000d9db48e.png)

现在第一个按钮向上（未选中），第二个和第四个按钮向下（选中）。（如果我在以后的帖子中做连续的图像，我应该更加注意尺寸的一致性。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-24T01:12:11.617

如果在 'Leave' 事件中已将此代码放置在前面的控件中。

```
 Private Sub PurposeComboBox_Leave(sender As Object, e As EventArgs) Handles PurposeComboBox.Leave

    Me.AppliancesForSelectedFunctionToolStripButton.PerformClick()

    End Sub 
```

我不知道您是否可以在表单加载中放置代码。希望这可以帮助。

# c# - 浏览器启动时禁用 Selenium webdriver？

> ID：13724934
> 
> 赞同：0
> 
> 时间：2012-12-05T14:01:01.663
> 
> 标签：c#, firefox, selenium, webdriver, selenium-webdriver

我正在使用 Selenium Firefox Web 驱动程序并尝试启动我专门为 Selenium 创建的现有配置文件。

Firefox 以正确的配置文件启动，但 Web 驱动程序在扩展中显示为禁用，因此 Selenium 无法连接到 Web 驱动程序。如何确保它以启用扩展程序开始？

我会发布代码，但代码工作正常并且使用了正确的配置文件。我相信这是一个 Firefox 配置问题。如果我让 Selenium 创建一个临时配置文件，它可以正常工作，但我需要访问我设置的扩展之一以及该扩展的配置。我看到可以通过代码加载扩展，但我不知道如何加载相同的配置。

# powershell - 如何从命令行运行 Powershell 脚本并将目录作为参数传递

> ID：13724940
> 
> 赞同：68
> 
> 时间：2012-12-05T14:01:21.427
> 
> 标签：powershell, powershell-2.0

```
PowerShell -Command .\Foo.ps1 
```

*   `Foo.ps1`：

    ```
    Function Foo($directory)
    {
        echo $directory
    }

    if ($args.Length -eq 0)
    {
        echo "Usage: Foo <directory>"
    }
    else
    {
        Foo($args[0])
    } 
    ```

    尽管`Foo.ps1`位于我调用 Powershell 的目录中，但这会导致：

    ```
    The term '.\Foo.ps1' is not recognized as the name of a cmdlet, function, script file, or operable program. 
    Check the spelling of the name, or if a path was included, verify that the path is correct and try again. 
    ```

    *   *编辑：由于`profile.ps1`包含PowerShell 正在更改目录而无法正常工作`cd C:\`*

然后我尝试调用它，指定脚本文件的完整路径，但无论我尝试什么，我都无法让它工作。*我相信我必须引用路径，因为它包含空格，我需要将参数传递给脚本的文件名也是如此。*

*   迄今为止最好的猜测：

    ```
    PowerShell -Command "'C:\Dummy Directory 1\Foo.ps1' 'C:\Dummy Directory 2\File.txt'" 
    ```

    输出错误：

    ```
    Unexpected token 'C:\Dummy Directory 2\File.txt' in expression or statement. 
    At line:1 char:136. 
    ```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-05T14:19:53.083

试试这个：

```
powershell "C:\Dummy Directory 1\Foo.ps1 'C:\Dummy Directory 2\File.txt'" 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-12-05T14:31:38.620

您正在调用脚本文件而不是命令，因此您必须使用 -file 例如：

```
powershell -executionPolicy bypass -noexit -file "c:\temp\test.ps1" "c:\test with space" 
```

对于 PS V2

```
powershell.exe -noexit &'c:\my scripts\test.ps1' 
```

（检查此技术网页面的底部[http://technet.microsoft.com/en-us/library/ee176949.aspx](http://technet.microsoft.com/en-us/library/ee176949.aspx)）

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-06-13T17:39:57.200

使用该标志`-Command`，您可以执行整个 powershell 行，就好像它是 PowerShell 提示符中的命令一样：

```
powershell -Command "& '<PATH_TO_PS1_FILE>' '<ARG_1>' '<ARG_2>' ... '<ARG_N>'" 
```

这解决了我在 Visual Studio Post-Build 和 Pre-Build 事件中运行 PowerShell 命令的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-07T00:27:13.260

在 ps1 文件的顶部添加参数声明

**测试.ps1**

```
param(
  # Our preferred encoding
  [parameter(Mandatory=$false)]
  [ValidateSet("UTF8","Unicode","UTF7","ASCII","UTF32","BigEndianUnicode")]
  [string]$Encoding = "UTF8"
)

write ("Encoding : {0}" -f $Encoding) 
```

**结果**

```
C:\temp> .\test.ps1 -Encoding ASCII
Encoding : ASCII 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T14:54:57.790

**将您的代码更改为以下内容：**

```
Function Foo($directory)
    {
        echo $directory
    }

    if ($args.Length -eq 0)
    {
        echo "Usage: Foo <directory>"
    }
    else
    {
        Foo([string[]]$args)
    } 
```

然后将其调用为：

> powershell -ExecutionPolicy RemoteSigned -File "c:\foo.ps1" "c:\Documents and Settings" "c:\test"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-20T13:25:28.093

你有输入并按回车：

PowerShell -命令

# java - 无法使用 Ant 删除文件

> ID：13724944
> 
> 赞同：0
> 
> 时间：2012-12-05T14:01:31.693
> 
> 标签：java, ant

我跟着[这个教程](http://www.tutorialspoint.com/ant/ant_build_project.htm)。我已经在 /WEB-INF/classes 中构建了一个类。我构建了包含以下内容的文件：

```
<target name="build" description="Compile main source tree java files">
   <mkdir dir="${build.dir}"/>
   <javac destdir="${build.dir}" source="1.5" target="1.5" debug="true"
             deprecation="false" optimize="false" failonerror="true">
      <src path="${src.dir}"/>
      <classpath refid="master-classpath"/>
   </javac>
</target> 
```

但现在我只是清理，不再建造，

```
<?xml version="1.0"?>
<project name="fax" basedir="." default="build">
    <property name="src.dir" value="src"/>
    <property name="web.dir" value="war"/>
    <property name="build.dir" value="${web.dir}/WEB-INF/classes"/>
    <property name="name" value="fax"/>

    <path id="master-classpath">
        <fileset dir="${web.dir}/WEB-INF/lib">
            <include name="*.jar"/>
        </fileset>
        <pathelement path="${build.dir}"/>
    </path>

    <target name="build" description="Compile source tree java files">

    </target>

    <target name="clean" description="Clean output directories">
        <delete>
            <fileset dir="${build.dir}">
                <include name="**/*.class"/>
            </fileset>
        </delete>
    </target>

</project> 
```

但不幸的是，当我输入“ant”时，它给了我“构建成功”的消息，但这个文件没有被删除？有人告诉我这里有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:14:42.047

当您键入“ant”时，默认目标将被执行，并且您的默认目标是 ant xml 第一行中定义的“build”

```
<project name="fax" basedir="." default="build"> 
```

要清理，请使用：“ant clean”或将默认目标从构建更改为清理。但我认为您可能希望保留默认目标以分别构建和调用 clean。

其他替代方法是使用目标的依赖关系。即你可以在构建目标之前自动调用干净的目标。

To do this, change the build target tag by adding a depends attribute to it as follows: < target name="build" description="Compile source tree java files" depends="clean">

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:15:19.207

Typing `ant` is like typing `ant build`.

However, the delete operation is part of the clean target, so you should not expect clean to be executed if you execute `ant build`.

Try `ant clean` instead. ant will then execute the `clean` target.

# php - 从循环中获取复选框的多个值

> ID：13724945
> 
> 赞同：1
> 
> 时间：2012-12-05T14:01:32.113
> 
> 标签：php, mysql

```
while($row = mysql_fetch_array($result)){       
echo '<tr>
        <td>'.$row[0].'</td>
        <td>'.$row[1].'</td>
        <td>'.$row[2].'</td>';
        $price=$row['price'];
        echo "<td><input type='checkbox' name='er' value='$price'></td>";
echo "</tr>"; 
```

PHP 文件

```
 <?php
       $ercharge=$_POST['er'];
       echo $ercharge;
?> 
```

我有一个来自 mysql 表的费用列表，每个项目都有一个复选框，因此它可以计算总和。上面的代码有效，它输出检查项目的价格。问题是，它只有一个项目。勾选多项时，仅输出一项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:12:30.250

试试这个可能对你有帮助

```
echo "<td><input type='checkbox' name='er[]' value='$price'></td>";
echo "</tr>";

$recharge=$_POST['er'];

foreach($recharge as $val)
{
     echo $val;
} 
```

**或者** 你可以**不**使用就这样做`foreach`

```
$arra_val=array_sum($recharge); 
```

您只需要将值放入某个变量并回显它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:05:12.080

尝试这个：-

```
echo "<td><input type='checkbox' name='er[]' value='$price'></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:06:41.743

如果要传递数组中的多个元素，请在名称后面加上方括号，因此它将是：

```
echo "<td><input type='checkbox' name='er[]' value='$price'></td>"; 
```

$_POST['er'] 的结果将是所有复选框值的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:16:02.467

`[]`输入框名称应通过添加后缀反映它是一个数组：

```
echo '<td><input type="checkbox" name="er[]" value=" . htmlspecialchars($row['price']) . "></td>'; 
```

然后，在确保输入验证为正确值之后处理总和：

```
if ($ers = filter_input(INPUT_POST, 'er', FILTER_VALIDATE_FLOAT, FILTER_FORCE_ARRAY)) {
    $ercharge = array_sum($ers);
} 
```

# c# - 无法将“mshtml.HTMLDocumentClass”转换为“mshtml.IMarkupServices”

> ID：13724946
> 
> 赞同：3
> 
> 时间：2012-12-05T14:01:39.240
> 
> 标签：c#, .net, com, com-interop, mshtml

我在投射`mshtml.HTMLDocumentClass`到时遇到问题`mshtml.IMarkupServices`

```
IHTMLDocument2 doc = new HTMLDocumentClass();
doc.write(new object[] { item.HTMLBody });
IHTMLTxtRange range = ((IHTMLBodyElement)doc.body).createTextRange();
IHTMLTxtRange baseRange = ((IHTMLBodyElement)doc.body).createTextRange();

var markupServices = (IMarkupServices)doc; // <--- exception is thrown here 
```

相同的代码在一种情况下有效，但在另一种情况下会引发异常。调用是相同的，但在不同的代码位置工作方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:46:01.423

问题在于`ApartmentState`：

```
thread.SetApartmentState(Thread.CurrentThread.GetApartmentState()); 
```

# php - Linux oracle => odbc => PHP 变音问题

> ID：13724948
> 
> 赞同：1
> 
> 时间：2012-12-05T14:01:44.203
> 
> 标签：php, oracle, odbc

我有一个带有存储变音符号的 varchar2 字段的 Oracle 数据库。我还有一个通过 ODBC 连接到数据库的 PHP 应用程序。整个事情在Linux上运行。

变音符号的问题是现在它们被转换为普通字母，例如 ä => a，但仅在 PHP-Application 和 isql 程序中。如果我使用 sqlplus 或 Oracle Web GUI，一切正常，这告诉我问题出在 odbc 连接上。

我只是不知道如何配置 ODBC，所以它使用正确的编码......

*编辑* 连接是通过

```
odbc_connect(DSN, User, PW) 
```

我知道 DSN 对应于 /root/.odbc.ini 或 /etc/odbc.ini 中的配置。我不完全确定，因为我没有设置系统并且我没有经验完全是 ODBC。目前 DSN 为“NAPA”，/etc/odbc.ini 文件具有以下设置：

```
[NAPA]
Driver = Oracle 11g ODBC driver
DSN = OracleODBC-11g
ServerName = localhost
UserID = *****
Password = ****
NLS_LANG = AMERICAN.WE8MSWIN1252
Charset = utf8 
```

数据库参数是

```
SQL> SELECT * FROM NLS_DATABASE_PARAMETERS;
+-------------------------------+-----------------------------------------+
| PARAMETER                     | VALUE                                   |
+-------------------------------+-----------------------------------------+
| NLS_LANGUAGE                  | AMERICAN                                |
| NLS_TERRITORY                 | AMERICA                                 |
| NLS_CURRENCY                  | $                                       |
| NLS_ISO_CURRENCY              | AMERICA                                 |
| NLS_NUMERIC_CHARACTERS        | .,                                      |
| NLS_CHARACTERSET              | WE8MSWIN1252                            |
| NLS_CALENDAR                  | GREGORIAN                               |
| NLS_DATE_FORMAT               | DD-MON-RR                               |
| NLS_DATE_LANGUAGE             | AMERICAN                                |
| NLS_SORT                      | BINARY                                  |
| NLS_TIME_FORMAT               | HH.MI.SSXFF AM                          |
| NLS_TIMESTAMP_FORMAT          | DD-MON-RR HH.MI.SSXFF AM                |
| NLS_TIME_TZ_FORMAT            | HH.MI.SSXFF AM TZR                      |
| NLS_TIMESTAMP_TZ_FORMAT       | DD-MON-RR HH.MI.SSXFF AM TZR            |
| NLS_DUAL_CURRENCY             | $                                       |
| NLS_COMP                      | BINARY                                  |
| NLS_LENGTH_SEMANTICS          | BYTE                                    |
| NLS_NCHAR_CONV_EXCP           | FALSE                                   |
| NLS_NCHAR_CHARACTERSET        | AL16UTF16                               |
| NLS_RDBMS_VERSION             | 10.2.0.1.0                              |
+-------------------------------+-----------------------------------------+ 
```

# css - Webpart 标题在编辑时可见，之后不可见

> ID：13724951
> 
> 赞同：1
> 
> 时间：2012-12-05T14:01:46.630
> 
> 标签：css, sharepoint, sharepoint-2010, web-parts

我有一个非常奇怪的 Sharepoint 2010 问题。我有一个 webpart，它输出列表的内容。

Webpart 有一个带有样式背景的标题。

当我编辑 web 部件时，它看起来应该。它有漂亮的背景颜色，它显示了文本等。但是，当我转到 webpart 应该所在的页面时，webpart 标题消失了。它没有在 HTML 代码中呈现（因此，我猜这不是样式问题）。

这是编辑页面时呈现的 HTML：

```
<td id="WebPartTitleWPQ6" class="ms-WPHeaderTd" title="Documents">
<h3 class="ms-standardheader ms-WPTitle" style="text-align:justify;">
<a href="link" accesskey="W">
<nobr>
<span>Documents</span>
<span id="WebPartCaptionWPQ6"></span>
</nobr>
</a>
</h3>
</td> 
```

当不编辑时，这个 td 永远不会被渲染。

显示 Web 部件中的内容。

这不应该是一个安全问题，因为我已经移动了 Web 部件，所以我尝试了不同的区域。我也尝试过不同的 CSS 类。

最后，我确定 Chrome 不是没有。我都试过了。

任何想法为什么不显示 webpart 标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:56:33.290

按照下面给出的步骤可能可以解决您的问题：

*   打开 Sharepoint Designer 2010。
*   以高级模式打开母版页。
*   找到`<title>`标签。它包含一个`<asp:ContentPlaceHolder>`标签。
*   删除`<title>`和`</title>`标记之间的任何空格。这意味着，标题标签在同一行开始和结束。

*   保存并发布。

让我知道结果。

谢谢

# java - Java中描述实例和参数的方法的执行顺序？

> ID：13724952
> 
> 赞同：18
> 
> 时间：2012-12-05T14:01:47.153
> 
> 标签：java

在声明中：

```
fooFunc().barFunc(bazFunc()); 
```

`barFunc()`显然不能执行，直到两者`bazFunc()`都`fooFunc()`完成。

但是执行的顺序有`fooFunc()`保证`bazFunc()`吗？

*相关（但不同！）问题：* [Java 中参数保证的执行顺序？](https://stackoverflow.com/questions/2201688/order-of-execution-of-parameters-guarantees-in-java)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:12:16.180

这方面的文档是[15.12.4。方法调用的运行时评估](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.4)

它说“在运行时，方法调用需要五个步骤。首先，可以计算目标引用。其次，评估参数表达式。第三，检查要调用的方法的可访问性。第四，实际代码定位要执行的方法。第五，创建新的激活帧，必要时进行同步，将控制权移交给方法代码。

在示例中，`fooFunc()`作为计算目标引用的一部分被调用，并且`bazFunc()`是参数表达式之一，因此`fooFunc()`必须首先调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T14:06:19.413

[JLS](http://docs.oracle.com/javase/specs/) , Java SE 7 Edition 有以下示例，它说它是`fooFunc()`before `bazFunc()`，但是我只能找到示例 - 我还没有找到指定它的关联语句：

> **示例 15.12.4.1-2。方法调用期间的评估顺序**
> 
> 作为实例方法调用（第 15.12 节）的一部分，有一个表达式表示要调用的对象。在评估方法调用的任何参数表达式的任何部分之前，该表达式似乎已被完全评估。因此，例如，在：
> 
> ```
> class Test2 { 
> 
>     public static void main(String[] args) { 
>         String s = "one"; 
>         if (s.startsWith(s = "two")) 
>             System.out.println("oops"); 
>     } 
> } 
> ```
> 
> `s`before的出现`".startsWith"`首先被评估，在参数 expression 之前`s = "two"`。因此，`"one"`在将局部变量 s 更改为引用 string 之前，将对 string 的引用记住为目标引用`"two"`。结果，该 方法是为具有参数 `startsWith`的目标对象调用的，因此调用的结果为假，因为字符串 不是以 开头。因此测试程序不打印。`"one"``"two"``"one"``"two"``"oops"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:07:56.260

首先`fooFunc`,然后`bazFunc`,最后`barFunc`

这是一些演示它的代码：

```
public class OrderJava {
  public static void main(String[] args) {
    fooFunc().barFunc(bazFunc());
  }

  public static Bar fooFunc() {
    System.out.println("I am fooFunc!");
    return new Bar();
  }

  public static class Bar {
    public void barFunc(Object o) {
      System.out.println("I am barFunc!");
    }
  }

  public static Object bazFunc() {
    System.out.println("I am bazFunc!");

    return null;
  }
} 
```

这段代码的输出是：

```
I am fooFunc!
I am bazFunc!
I am barFunc! 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T14:03:55.017

`fooFunc()`将首先执行，然后执行，`bazFunc()`最后执行`barFunc()`

我们都可以同意`fooFunc()`必须执行之前`barFunc()`有任何操作。

鉴于只有在需要它的参数`bazFunc()`时才会调用`barFunc()`它，所以有理由认为这会在`fooFunc()`.

# playframework-2.0 - 播放框架：生产模式下没有资产

> ID：13724954
> 
> 赞同：2
> 
> 时间：2012-12-05T14:02:00.693
> 
> 标签：playframework-2.0, development-environment, assets, production-environment

我有一个奇怪的问题。我有一个用 Play 编写的应用程序！框架 2.0.4。它使用一些公共资产（css/images/javascript）。当我在开发模式下运行它时一切都很好：

```
blus@vmblus:~/svn/blus> play
[info] Loading project definition from /home/blus/svn/blus/project/project
[info] Loading project definition from /home/blus/svn/blus/project
[info] Set current project to blus (in build file:/home/blus/svn/blus/)
       _            _
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/

play! 2.0.4, http://www.playframework.org

> Type "help play" or "license" for more information.
> Type "exit" or use Ctrl+D to leave this console.

[blus] $ run

--- (Running the application from SBT, auto-reloading is enabled) ---

[info] play - Listening for HTTP on port 9000...

(Server started, use Ctrl+D to stop and go back to the console...) 
```

资产在浏览器中加载没有任何问题。但是当我想在生产模式下运行**同一个**应用程序（不复制，不移动，只是一样）时，资产就消失了：

```
[blus] $ start 9000

(Starting server. Type Ctrl+D to exit logs, the server will remain in background)

Play server process ID is 6845
[info] play - Application started (Prod)
[info] play - Listening for HTTP on port 9000... 
```

萤火虫显示：

```
"NetworkError: 404 Not Found - http://vmblus:9000/assets/stylesheets/main.css" 
```

没有找到所有需要的资产。这怎么可能？我能做些什么来解决这个问题？

这是我的一部分`conf/routes`：

```
GET /assets/*file controllers.ExternalAssets.at(path="public", file) 
```

这就是我如何在视图中调用我的资产：

```
<link rel="stylesheet" media="screen" href="@routes.ExternalAssets.at("stylesheets/main.css")"> 
```

我看到了[这个问题](https://stackoverflow.com/questions/12520668/play-framework-404-error-with-assets-on-stage-mode)，但我的路径没有`//`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:27:55.863

您正在使用`controllers.ExternalAssets.at`而不是`controllers.Assets.at`

这很可能是原因。

# c# - something wrong reading XML LINQ

> ID：13724955
> 
> 赞同：0
> 
> 时间：2012-12-05T14:02:03.847
> 
> 标签：c#, xml, linq, linq-to-xml

This is my source XML :

```
<?xml version="1.0" encoding="UTF-8"?>
<cteProc xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04">
<CTe>
<infCte versao="1.04" Id="CTe35121004211559000111570010000118991000119858">
<ide>
     <cUF>35</cUF>
     <cCT>00011985</cCT>
     <CFOP>7358</CFOP>
     <natOp>PRESTACAO DE SERVICO DE TRANSPORTE</natOp>
     <forPag>1</forPag>
     <mod>57</mod>
     <serie>1</serie>
     <nCT>11899</nCT>
     <dhEmi>2012-10-01T09:34:45</dhEmi>
</ide>
<compl>
<emit>
<rem>
<dest>
<vPrest>
<imp>
<infCTeNorm>
</infCte>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
</CTe>
<protCTe versao="1.04">
</cteProc> 
```

I have read this file with this code :

```
 XmlTextReader reader = new XmlTextReader(@"C:\Separados\56000858_v01.04-procCTe.xml");
        XmlNodeType type;
        while (reader.Read())
        {
            type = reader.NodeType;
            if (type == XmlNodeType.Element)
            {
                if (reader.Name == "cUF")
                {  reader.Read(); Xmunini = reader.Value; textBox1.Text = Xmunini;}

                if (reader.Name == "cCT")
                {  reader.Read(); vtprest = reader.Value; textBox2.Text = vtprest;}

                if (reader.Name == "natOp")
                {   reader.Read(); UFIni = reader.Value; textBox3.Text = UFIni; }

                if (reader.Name == "nCT")
                { reader.Read(); NCT = reader.Value; textBox4.Text = NCT;} 
```

But, i have read in many post here , the method with LINQ is more efficient, i have try write this :

```
 var custs45 = from c in XElement.Load(@"C:\Separados\56000858_v01.04-procCTe.xml").Elements("Cte")

    select new { 
    CFOP = c.Element("CFOP").Value,
    xMunIni = c.Element("xMunIni").Value 
    }; 
```

My question is how to assign CFOP and Xmunini to a variable?? i have write this but do not show anything

```
 string CFF;
    foreach (var valores in custs45)
    { 
      CFF = valores.CFOP.ToString() ;        
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:25:56.967

您找不到节点，因为根节点已删除命名空间。这是解决方案：

```
XDocument xdoc = XDocument.Load(path_to_xml);
XNamespace ns = "http://www.portalfiscal.inf.br/cte";
string CFF = (string)xdoc.Descendants(ns + "CFOP").Single(); 
```

此外，您在`CTe`元素名称中有拼写错误。而您缺少`CFOP`的不是`CTe`. 而且您的 xml 中仍然没有`xMunIni`元素。

您的原始查询应如下所示：

```
XNamespace ns = "http://www.portalfiscal.inf.br/cte";
var custs45 = from ide in XElement.Load(path_to_xml).Descendants(ns + "ide")
              select new
              {
                  CFOP = (string)ide.Element(ns + "CFOP"),
                  xMunIni = (string)ide.Element(ns + "xMunIni")
              }; 
```

# android - Jquery Mobile on android link transition double blink

> ID：13724956
> 
> 赞同：2
> 
> 时间：2012-12-05T14:02:20.383
> 
> 标签：android, jquery, html, cordova, jquery-mobile

Im having a problem with Jquery Mobile after compiling it with Phonegap.

Here is a code snippet:

```
function game() {
    $.mobile.changePage( "#game", { transition: "slideup"} );
} 
```

## Page 1:

```
<a onclick="game()" data-role="button">Start game</a> 
```

## Page2:

```
<div data-role="page" id="game" data-theme="a">
   ... 
</div> 
```

When i click the link "Start Game" it sure does change the page, but it double blinks. This looks very bad, and im trying to get rid of it. I like the transision slideup, but i just want the page to change without it looking like its double changing.

Anyone able to help? :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:18:52.270

在 Android 上闪烁的 Phonegap 问题是由于 Android 2.x 等平台性能不佳。我建议您在该 android 版本上关闭它们。有一些可能的 css 修复，但我从未设法将它们正确地包含在我的代码中。

可以像这样关闭转换：

```
$(document).bind("mobileinit", function()
{
    if (navigator.userAgent.indexOf("Android") != -1)
    {
        $.mobile.defaultPageTransition = 'none';
        $.mobile.defaultDialogTransition = 'none';
    }
}); 
```

更多关于安卓手机问题的信息可以在这里找到：http: [//jquerymobile.com/blog/2012/01/10/upcoming-releases-1-0-1-1-1-and-beyond/](http://jquerymobile.com/blog/2012/01/10/upcoming-releases-1-0-1-1-1-and-beyond/)

> *经过大量测试和改进后，我们决定使用 3D 转换功能测试，将 Android 2.x 等性能不佳的平台从更复杂的幻灯片、弹出和翻转过渡中排除，因此这些将回退到默认值淡入淡出所有过渡以确保流畅的体验。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:07:40.027

找到解决方案，感谢 Gajotres。

我发现我必须在 jquery mobile 之前包含转换禁用脚本，这有点奇怪。之后包含它会更合乎逻辑，但是它现在可以工作了，我很高兴:)

解决方案：

```
<script src="js/disableTransition.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

# java - Java SQL only show right record

> ID：13724957
> 
> 赞同：1
> 
> 时间：2012-12-05T14:02:20.830
> 
> 标签：java, mysql, sql, jdbc

For a school exercise I need to get some information from a database.

We need to scan a RFID card and lookup in the database. But when I try to print out the line in the IDE I get more results than I want.

The RFID tag something like: 2R KL MZ 89 and if I try to get it from the database I get: Access Granted. (because that is the record that is right) and Access Denied. (because that is the record which is wrong.

Long story short: How do I get ONLY Access Granted. when the tag is correct and ONLY Access Denied.

Code:

```
while (rs.next()) {

        String number = rs.getString("number");

        if (number.equals(key)) {
            System.out.println("Access Granted.");
        } else {
            System.out.println("Access Denied");
        }
    } 
```

Table:

My table is only id, which is auto increment, and the other row is called number which contains two records: the right tag and the wrong one.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:11:48.167

您应该使用如下查询：

> 从 myTable 中选择 1，其中 RF_ID = key

使用这个，如果密钥存在，您将有一条线，否则没有线。

如果您只需要查找表中的特定值，那么循环多行是没有用的。

# ios - iOS - UIWebView loading an image located in the tmp folder

> ID：13724960
> 
> 赞同：0
> 
> 时间：2012-12-05T14:02:27.117
> 
> 标签：ios, image, uiwebview

I have an image file saved in the application's temp folder, say IMG.png. I am injecting an HTML string into a UIWebView using:

```
 NSString *HTML = [NSString stringWithFormat:
                     @"<body><h2>%@</h2><img src=\"%@\"></img><p>%@</p>%@</body>",
                     title, image, body];

    [webView loadHTMLString:HTML baseURL:[NSURL URLWithString:HOST]]; 
```

I tried many combinations of paths for the NSString `image`, but I cannot get this WebView to load my local image properly.

Can you please help me?

Here's what I use to save my image in the temp folder:

```
[self saveImage:result withFileName:post.title ofType:@"jpg" inDirectory:NSTemporaryDirectory()]; 
```

which relies on:

```
-(void) saveImage:(UIImage *)image withFileName:(NSString *)imageName ofType:(NSString *)extension inDirectory:(NSString *)directoryPath {

    if ([[extension lowercaseString] isEqualToString:@"png"]) {
        [UIImagePNGRepresentation(image) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"png"]] options:NSAtomicWrite error:nil];
    } else if ([[extension lowercaseString] isEqualToString:@"jpg"] || [[extension lowercaseString] isEqualToString:@"jpeg"]) {
        [UIImageJPEGRepresentation(image, 1.0) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"jpg"]] options:NSAtomicWrite error:nil];
    } else {
        NSLog(@"Image Save Failed\nExtension: (%@) is not recognized, use (PNG/JPG)", extension);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:50:27.817

```
 [webView loadHTMLString:HTML baseURL:[NSURL URLWithString:HOST]]; //the 'HOST' must be your application's temp folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:17:07.613

尝试使用 NSURL 组合文件 URL：

```
NSURL *url = [NSURL fileURLWithPath:[[NSTemporaryDirectory() stringByAppendingPathComponent:@"filename"] stringByAppendingPathExtension:@"jpg"]];
NSString *image = [url absoluteString]; 
```

（假设您的图像文件名是“filename.jpg”）

应该导致类似：

```
file://localhost/private/var/mobile/Applications/E754629C-4163-4829-9D10-89D55A61264E/tmp/filename.jpg 
```

希望这可以帮助。

# pentaho - Kettle Join Rows - 大于 x 的最近元素

> ID：13724970
> 
> 赞同：1
> 
> 时间：2012-12-05T14:02:59.567
> 
> 标签：pentaho

使用 pentaho 水壶（也称为 pdi），我有一个合并两个数据流的“加入行（笛卡尔积）”步骤。

第一个和第二个流都附加了一个数值。例如，

```
Stream 1 - Values 1, 3, 5
Stream 2 - Values 2, 4, 6 
```

我想加入两个流以获得以下输出：

```
(1, 2)
(3, 4)
(5, 6) 
```

我将正确的输出描述为让流 1 选择大于流 1 的值的最小值。

在 Join Rows 步骤中，我可以指定流 2 的值大于流 1 的值。不幸的是，这会产生以下不正确的结果：

```
(1, 2)
(1, 4)
(1, 6)
(3, 4)
(3, 6)
(5, 6) 
```

我应该使用不同的步骤来代替 Kettle 中的“加入行”吗？还是我错过了连接行步骤的设置？

注意：我还研究了使用 Stream Lookup 步骤，但它仅适用于 equals 而不适用于我的逻辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:17:41.140

你已经成功了一半。

*   您有两个输入：Stream1 (1, 3, 5) 和 Stream2(2, 4, 6)
*   您在 value(stream2) > value(stream1) 上加入行（确保在加入之前对它们进行排序）
*   您对 {value(Stream1), value(Stream2) 上的结果流进行排序，这给了您

> ```
> (1, 2)
> (1, 4)
> (1, 6)
> (3, 4)
> (3, 6)
> (5, 6) 
> ```

*   放置“添加值字段更改序列”步骤并将“如果以下字段的值更改则初始化序列”设置为 value(Stream1)。结果流是：

> ```
> (Stream1, Stream2, result)
> (1, 2, 1)
> (1, 4, 2)
> (1, 6, 3)
> (3, 4, 1)
> (3, 6, 2)
> (5, 6, 1) 
> ```

*   放置一个过滤步骤并过滤“结果= 1”。
*   来自过滤器“真”分支的结果流是期望的结果。

我用解决方案上传了“example.ktr”（我使用了 Kettle 4.3\. 版本）：

[例子.ktr](https://docs.google.com/open?id=0B_C8tdbiOkEARF9jUnVNNlNBUFU)

# ruby-on-rails-3 - 具有唯一范围条件的 Rails 3 验证

> ID：13724972
> 
> 赞同：1
> 
> 时间：2012-12-05T14:03:03.957
> 
> 标签：ruby-on-rails-3, validation, model

例如，我的模型验证中有此代码：

```
 validates :fb_user_id, :uniqueness => {:scope => :campaign_id} 
```

但是对于不同的用户可能会发生`campaign_id`值为 -1 的情况，这会引发验证异常。有可能做这样的事情吗？

```
 validates :fb_user_id, :uniqueness => {:scope => :campaign_id}, if :campaign_id != -1 
```

我可以`if conditions`在 validates 语句中放置一个内联，或者如果不可能，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T21:14:20.713

按照MagicMarkker的思路，我找到了解决办法：

```
validates :fb_user_id, :uniqueness => {:scope => :campaign_id}, :if => :valCampaign?

def valCampaign?
    if campaign_id == -1
        return false # skip the validation
    else 
        return true  # run the validation
    end
end 
```

# ide - 教孩子编程

> ID：13724973
> 
> 赞同：-2
> 
> 时间：2012-12-05T14:03:06.337
> 
> 标签：ide, programming-languages, development-environment

我想知道用于教授各种编程的最佳方法/工具/语言/IDE。

我将年龄划分如下：

*   4-6

    6-9

    9-12

    12-5

    16+

你觉得分工是对的吗？什么工具/语言最适合每个群体？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:19:08.730

*   4-9**可视化编程语言**
    *   Scratch.mit.edu / Snap.berkeley.edu
    *   乐高头脑风暴
    *   任何带有基本命令的视觉语言
*   9-12
    *   Alice 这是一种处理 3d 空间和光照的更高级的可视化编程语言。
    *   **基础语言**
        *   基本的
        *   COBOL（我会选择这个，因为它仍在使用）
        *   Visual Basic 6 (not vb.net) - 这种语言也用于 excel 宏
        *   Qbasic - 许多程序员开始使用的旧 dos 编程语言。
        *   任何一种像这样的语言都只是汇编的一步，所以没有复杂的事情要理解
    *   **数据库**
        *   如果他们想在数据库中沾沾自喜，请教他们访问。不过不要教他们太多。这是一个非程序员的数据库。
    *   **网络路由**
        *   HTML - 非常简单和有益
        *   CSS - 为 HTML 设计
*   12-15
    *   **基于结构/脚本的语言**
        *   C
        *   Python
        *   PHP / Perl / 红宝石
        *   JavaScript
    *   **数据库：基本 SQL**
        *   mysql
        *   MSSql
*   16+**高级语言**
    *   C++ / C#
    *   爪哇
    *   任何oo语言
    *   **网络路由**
        *   jQuery
        *   昏死
        *   有角度的
        *   d3
    *   **数据库**- 最佳流程
        *   外键
        *   正常化
        *   表现
    *   Oracle - 是另一种数据库语言，但只有在他们了解上述所有数据库内容和编程语言后才能学习。
    *   在网络上工作的编程

希望有帮助。

# ios - How to Reload NavigationItem Title

> ID：13724976
> 
> 赞同：0
> 
> 时间：2012-12-05T14:03:19.760
> 
> 标签：ios, uinavigationitem

I've define a button to change navigationItem title by using below method.

```
self.navigationItem.title 
```

However, the title doesn't change immediately before I re-push to this view. Is there have a method like [tableView reload] to reload the title and make it shows changed immediately?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:07:08.110

这会帮助你

```
 self.title = @"Some title here"; 
```

# ruby-on-rails - NoMethodError in Recipes#new

> ID：13724980
> 
> 赞同：0
> 
> 时间：2012-12-05T14:03:28.380
> 
> 标签：ruby-on-rails, null

I'm new to Ruby on Rails and I'm having a problem with creating categories.

Ruby on Rails gives this message when trying to to view the categories:

```
 <div class="field">
   <%= f.label :category %><br /> 
   <%= f.collection_select :category_id, @categories, :id, :name, :prompt => true %>
 </div>
 <div class="field"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:09:46.470

似乎在您的食谱控制器中的新操作方法中，您需要填充@categories。

例如/

```
def new
   @categories = Category.all
   # .. other code
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:08:01.150

以下应该工作

```
<%= f.collection_select :category_id, @categories ? @categories : [], :id, :name, :prompt => true %> 
```

根据该`collection_select`方法`@categories`应该是一个对象数组，错误是在获取值时发生`@categories`的`nil`

# ios - Youtube integration in iOS SDK

> ID：13724981
> 
> 赞同：1
> 
> 时间：2012-12-05T14:03:28.387
> 
> 标签：ios, video, youtube, private

How I can integrate Youtube with iOS? Mainly I want to play private videos without asking for login. Login should be hard coded in the app and will not ask user before playing the private video.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T11:11:16.360

某些 YouTube 视频可以在 MPMoviePlayerController 中播放 - 有些则不能。当您通过 YouTube 数据 API [https://developers.google.com/youtube/2.0/reference#Videos_feed](https://developers.google.com/youtube/2.0/reference#Videos_feed)查询视频时， 您将获得可用于特定视频的所有内容类型，包括 Flash 播放器、3GPP、MP4 （如果可用）等。您可以使用这些 URL 加载 MPMoviePlayerController。这很好，但正如我所说 - 并非所有视频都可以以这种方式嵌入。某些视频（主要是需要显示广告的视频）无法放入原生控制器。

# android - edittext 位于按钮上方

> ID：13724983
> 
> 赞同：0
> 
> 时间：2012-12-05T14:03:37.663
> 
> 标签：android

![在此处输入图像描述](../Images/e2b3bc69c0f0a593927c379ec6ecd48e.png)我尝试了很多次，但没有...我在屏幕顶部有一个图像，一个编辑文本和 2 个按钮。填充edittext，位于按钮上方，用户无法单击“发送”或“取消”。我也尝试使用“scrollview”，但我有同样的问题。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/inviabackground2"
android:orientation="vertical"
android:layout_weight="1"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/logoinvia" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

</LinearLayout>

            <EditText
                android:id="@+id/editText1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10" >

</EditText>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:layout_weight="1"
    android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Invia per mail!" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center_vertical|center_horizontal"
                android:text="Annulla" />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:28:29.033

这对我有用。它会随着用户键入而向下滚动。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="bottom"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_launcher" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/imageView1"
            android:ems="10" >
        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_alignParentLeft="true"
            android:text="Invia per mail!" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_toRightOf="@id/button1"
            android:layout_alignParentRight="true"
            android:text="Annulla" />
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:11:46.013

这是布局：

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="1" xmlns:android="http://schemas.android.com/apk/res/android">

<ScrollView 
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="0.30"
    >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="bottom"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_launcher" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/imageView1"
            android:ems="10" >
        </EditText>

    </LinearLayout>

</ScrollView>

<LinearLayout 
    android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.70"
            android:gravity="center"
            android:weightSum="1">

    <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_alignParentLeft="true"
            android:text=" mail!" 
            android:layout_weight="0.50"/>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_toRightOf="@id/button1"
            android:layout_alignParentRight="true"
            android:text="xyz" 
            android:layout_weight="0.50"/>

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:36:36.873

这是您的解决方案：

```
![<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="1" xmlns:android="http://schemas.android.com/apk/res/android">

     <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_launcher" />

<ScrollView 
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="0.50"
    >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="bottom"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/imageView1"
            android:ems="10" >
        </EditText>

    </LinearLayout>

</ScrollView>

<LinearLayout 
    android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.50"
            android:gravity="center"
            android:weightSum="1">

    <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_alignParentLeft="true"
            android:text=" mail!" 
            android:layout_weight="0.50"/>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_toRightOf="@id/button1"
            android:layout_alignParentRight="true"
            android:text="xyz" 
            android:layout_weight="0.50"/>

</LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/68a395881f77d4af0ca6573aef0aeb6a.png)

# c# - 无法生成 .xlsx 文件

> ID：13724988
> 
> 赞同：1
> 
> 时间：2012-12-05T14:04:00.057
> 
> 标签：c#, excel-2007, text-files

我有一个文本文件，它位于制表符分隔符中，以下是我生成其 Excel 的代码。

```
protected void to_excel(object sender, EventArgs e)
    {
        string filepath = Path.Combine(Server.MapPath("~/Files"), fileupload.FileName);
        fileupload.SaveAs(filepath);
        string fname = fileupload.PostedFile.FileName;
        DataTable dt = (DataTable)ReadToEnd(filepath);
        string sFilename = fname.Substring(0, fname.IndexOf("."));
        HttpResponse response = HttpContext.Current.Response;
        Response.Clear();
        Response.AddHeader("content-disposition", "attachment;filename=" + sFilename + ".xls");
        Response.Charset = "";
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        System.IO.StringWriter stringWrite = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter htmlWrite = new System.Web.UI.HtmlTextWriter(stringWrite);
        System.Web.UI.WebControls.DataGrid dg = new System.Web.UI.WebControls.DataGrid();
        dg.DataSource = dt;
        dg.DataBind();
        dg.RenderControl(htmlWrite);
        Response.Write(stringWrite.ToString());
        Response.End();
    }
    private object ReadToEnd(string filePath)
    {
        DataTable dtDataSource = new DataTable();
        string[] fileContent = File.ReadAllLines(filePath);
        if (fileContent.Count() > 0)
        {
            string[] columns = fileContent[0].Split('\t');
            for (int i = 0; i < columns.Count(); i++)
            {
                dtDataSource.Columns.Add(columns[i]);
            }
            for (int i = 1; i < fileContent.Count(); i++)
            {
                string[] rowData = fileContent[i].Split('\t');
                dtDataSource.Rows.Add(rowData);
            }
        }
        return dtDataSource;
    } 
```

此代码工作正常，因为我正在生成 2003 excel 文件 (.xls)。

但是，如果我通过将代码更改为生成 2007 (.xlsx)

```
Response.AddHeader("content-disposition", "attachment;filename=" + sFilename + ".xlsx"); 
```

我收到这样的[错误](http://s11.postimage.org/i2xt9tonn/error.jpg)。

我做了功课，才知道这个错误是因为我的程序生成的 .xlsx 文件是通过使用 HTML（标记语言）XML（标记语言）完成的，这实际上应该为 2007 excel 文件完成。

我的问题是我应该做些什么改变才能得到想要的结果，即我得到 2007 年的 excel 表！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-14T13:18:24.923

您可以使用 DataSet创建**具有多个工作表的 Excel，例如**

```
using Excel = Microsoft.Office.Interop.Excel;
using Microsoft.Office.Interop.Excel;
using System.Data;
using System.IO;

[HttpPost]
    public ActionResult CreateExcel(int id)
    {
        DataSet dataSet = new DataSet(); //Your Data Set
        if (dataSet.Tables.Count > 0)
        {
            System.Data.DataTable dt1 = new System.Data.DataTable();
            System.Data.DataTable dt2 = new System.Data.DataTable();
            dt1 = dataSet.Tables[0];
            dt2 = dataSet.Tables[1];

            if (dt1.Rows.Count > 1 && dt2.Rows.Count > 1)
            {
                var excel = new Microsoft.Office.Interop.Excel.Application();
                var workbook = excel.Workbooks.Add(true);

                AddExcelSheet(dt1, workbook);
                AddExcelSheet(dt2, workbook);

                //KK-Save the excel file into server path
                string strLocation = "~/Upload/TempExcel/";
                string fName = "Report_" + DateTime.Now.ToString("MMddyyyyHHmmss") + ".xlsx";
                string strPath = Path.Combine(Server.MapPath(strLocation), fName);
                workbook.SaveAs(strPath);
                workbook.Close();

                //KK-Generate downloading link view page
                System.Web.HttpResponse Response = System.Web.HttpContext.Current.Response;
                Response.ClearContent();
                Response.Clear();
                //Response.ContentType = "application/vnd.ms-excel";  //This is for office 2003
                Response.ContentType = "application/application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                Response.AppendHeader("Content-Disposition", "attachment; filename=YourReport.xlsx");
                Response.TransmitFile(strPath);
                Response.Flush();
                Response.End();

                //KK-Deleting the file after downloading
                if (System.IO.File.Exists(strPath))
                    System.IO.File.Delete(strPath);
            }
        }

        return View();
    }

    /// <summary>
    /// KK-This method add new Excel Worksheet using DataTable
    /// </summary>
    /// <param name="ds"></param>
    private static void AddExcelSheet(System.Data.DataTable dt, Workbook wb)
    {
        Excel.Sheets sheets = wb.Sheets;
        Excel.Worksheet newSheet = sheets.Add();

        int iCol = 0;

        foreach (DataColumn c in dt.Columns)
        {
            iCol++;
            newSheet.Cells[1, iCol] = c.ColumnName;
            newSheet.Cells[1, iCol].Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.RoyalBlue);
            newSheet.Cells[1, iCol].Font.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.White);
            newSheet.Cells[1, iCol].Font.Bold = true;
            newSheet.Cells[1, iCol].BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlThin);
        }

        int iRow = 0;
        foreach (DataRow r in dt.Rows)
        {
            iRow++;

            // add each row's cell data...
            iCol = 0;

            foreach (DataColumn c in dt.Columns)
            {
                iCol++;
                newSheet.Cells[iRow + 1, iCol] = r[c.ColumnName];
                newSheet.Cells[iRow + 1, iCol].BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlThin);
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:53:34.710

您应该检查 OpenXML SDK：http: [//msdn.microsoft.com/en-us/library/office/gg278328.aspx](http://msdn.microsoft.com/en-us/library/office/gg278328.aspx)

或者，您可以查看此处列出的各种商业库：http: [//polymathprogrammer.com/spreadsheetopenxml/spreadsheetcodelibrariescomparison.pdf](http://polymathprogrammer.com/spreadsheetopenxml/spreadsheetcodelibrariescomparison.pdf)

我对 Aspose Cells 有很好的体验。

PS：您的代码不会生成有效的 xls 文件，但 html 会以某种方式被 excel 正确解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:17:05.703

您必须使用扩展库，我建议您使用 EPPlus，它是一个使用 Open Office Xml 格式 (xlsx) 读写 Excel 2007/2010 文件的 .net 库。 [图书馆](http://epplus.codeplex.com)

然后替换代码

```
protected void to_excel(object sender, EventArgs e)
    {
        string filepath = Path.Combine(Server.MapPath("~/Files"), fileupload.FileName);
        fileupload.SaveAs(filepath);
        string fname = fileupload.PostedFile.FileName;
        DataTable dt = (DataTable)ReadToEnd(filepath);
        string sFilename = fname.Substring(0, fname.IndexOf("."));
        sFilename = sFilename + ".xlsx";
        MemoryStream ms = DataTableToExcelXlsx(dt, "Sheet1");
        ms.WriteTo(HttpContext.Current.Response.OutputStream);
        HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=" + sFilename);
        HttpContext.Current.Response.StatusCode = 200;
        HttpContext.Current.Response.End();
    }

public void toexcel(DataTable dt, string Filename)
    {
        MemoryStream ms = DataTableToExcelXlsx(dt, "Sheet1");
        ms.WriteTo(HttpContext.Current.Response.OutputStream);
        HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=" + Filename);
        HttpContext.Current.Response.StatusCode = 200;
        HttpContext.Current.Response.End();
    }
    public bool IsReusable
    {
        get { return false; }
    }
    public static MemoryStream DataTableToExcelXlsx(DataTable table, string sheetName)
    {
        MemoryStream Result = new MemoryStream();
        ExcelPackage pack = new ExcelPackage();
        ExcelWorksheet ws = pack.Workbook.Worksheets.Add(sheetName);
        int col = 1;
        int row = 1;
        foreach (DataColumn column in table.Columns)
        {
            ws.Cells[row, col].Value = column.ColumnName.ToString();
            col++;
        }
        col = 1;
        row = 2;
        foreach (DataRow rw in table.Rows)
        {
            foreach (DataColumn cl in table.Columns)
            {
                if (rw[cl.ColumnName] != DBNull.Value)
                    ws.Cells[row, col].Value = rw[cl.ColumnName].ToString();
                col++;
            }
            row++;
            col = 1;
        }
        pack.SaveAs(Result);
        return Result;
    } 
```

我在[这里得到了这个解决方案](http://forums.asp.net/p/1863741/5230401.aspx/1?Unable+to+generate+the+xlsx+file+)

# android - Android ICS 隐藏系统栏

> ID：13724991
> 
> 赞同：0
> 
> 时间：2012-12-05T14:04:05.590
> 
> 标签：android

我正在尝试隐藏/最小化 Android 4.0.3 中的系统栏。目前我正在做

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

在`onCreate`我的活动中。一旦用户触摸屏幕，该栏就会再次出现。根据其他 STO 线程，这种行为是无法规避的。我的想法是在我的视图中捕捉任何触摸事件，并在显示后立即重新隐藏栏。在点击处理程序中运行上面显示的代码没有任何效果。如何实现（几乎）隐藏栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:32:09.353

我不会谈论“为什么”，只谈论“如何”:-)

那么，关于

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

这不会影响使用系统栏而不是单独的导航和状态栏的平板电脑设备。

在平板电脑上，您可以尝试（API 级别 14 起）

```
myView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

要检测事件，我认为您可以使用它来捕获事件：

```
myView.setOnSystemUiVisibilityChangeListener(
   new OnSystemUiVisibilityChangeListener()
      {
      public void onSystemUiVisibilityChange(int visibility)
      {
         if (visibility == View.SYSTEM_UI_FLAG_VISIBLE) {
            // TODO whatever you want
         }
         else {
            // TODO what to do in the other case
         }
      }
   }
); 
```

更一般地说，这是来自“专业 Android 4 应用程序开发”的附加建议

> 将 UI 中的其他更改与导航可见性的更改同步通常是一种很好的做法。例如，您可以根据进入和退出“全屏模式”选择隐藏和显示操作栏和其他导航控件。您可以通过将 OnSystemUiVisibilityChangeListener 注册到您的视图来做到这一点 - 通常，您用于控制导航可见性的视图

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:15:39.070

你不能隐藏它，但你可以简单地禁用它，除了家。试试[这个链接。](https://stackoverflow.com/questions/14801928/is-it-possible-to-hide-the-system-bar/15652646#15652646). 使用 SYSTEM_UI_FLAG_LOW_PROFILE 您可以使系统栏变暗，并使用`onWindowFocusChanged()`可以获取焦点并折叠它。

# objective-c - When app returns to foreground async main_queue calls not performed until after expiration handler

> ID：13724992
> 
> 赞同：1
> 
> 时间：2012-12-05T14:04:32.397
> 
> 标签：objective-c, queue, grand-central-dispatch, foreground

I've a task that renders e.g. 50 objects and saves each one as a file. It's set up to continue running in the background and notify the user when the task is completed. While in the foreground, there's a progress bar, that shows the user how far along everything is.

The rendering & writing of files are all done on custom background threads, using GCD. In order to update the progress bar, dispatch_async on the main_queue is called.

* * *

## Here's my problem...

When the user enters the background, the task continues as planned and, if let alone and still in the background, notifies the user when it's complete. But if the user returns sooner, and the app is still rendering/writing, I/the user would expect to see the progress and all >>> That does not happen. Even though my method to update the progress bar is sent off via dispatch_async on main_queue, the task isn't executed (or the main_queue received if you will), until the 'renter/writing' task I sent in the background is completed and the ExpirationHandler performed.

In the 'applicationWillEnterForeground:' method I tell the app, that it should 'endBackgroundTask:' and set the instance (=self.backgroundTask) to 'UIBackgroundTaskInvalid', but that doesn't make a difference

## My question...

Is there a way for me to get back control of a task (running on a GCD-custom background thread) that I sent into the background (beginBackgroundTaskWithExpirationHandler:) when the app closed?

AND/OR

Do I not specifically have to get back control, but do/set something differently?

# java - How to apply perspective transform to a layout in Android

> ID：13724994
> 
> 赞同：2
> 
> 时间：2012-12-05T14:04:36.450
> 
> 标签：java, android, 3d, android-relativelayout

I want to apply exactly the same (3D Transform) as the below link for a Relative layout in Android. This code makes the view to tilt.

[How do I apply a perspective transform to a UIView?](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview)

Any help will be great !

Thanks

# jquery - synchronous jquery cors post fails on IE9

> ID：13724996
> 
> 赞同：0
> 
> 时间：2012-12-05T14:04:45.730
> 
> 标签：jquery, ajax

This works on Firefox and Chrome but not on IE9:

```
 $.ajax({
            async: false,
            url: settings['server'],
            type: "POST",
            data: "u=" + window.location
                + "&h=" + encodeURIComponent(myhtml),
            success:  function (args) { 
                myhtml = evalt(args);
            },
            error: function (jqXHR, textStatus, errorThrown) {
               alert(errorThrown);
            }
          }); 
```

I have set the headers in PHP, tried out the "XDR"-patch and other research on the web...

Any ideas?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:08:25.780

通过安装 IE10 解决；-)

我很高兴地说，这个问题不会在 IE10 中持续存在......