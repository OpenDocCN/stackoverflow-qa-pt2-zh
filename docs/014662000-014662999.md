# StackOverflow 问答 14662000-14662999

# jquery - How can you remove a CSS :hover effect with jQuery?

> ID：14662001
> 
> 赞同：0
> 
> 时间：2013-02-02T12:42:24.773
> 
> 标签：jquery, html, css

> **Possible Duplicate:**
> [Can I disable a CSS :hover effect via JavaScript?](https://stackoverflow.com/questions/2754546/can-i-disable-a-css-hover-effect-via-javascript)

I have a dropdown menu which works fine using the css .hover pseudoclass. It works fine on both desktops and tablets. On tablets, the hover effect is triggered when the menu is clicked. Presumably the tablet manufacturers have done this to make them compatible with this sort of menu.

The menu is pure CSS/HTML and requires no javascript to work.

However, I want to add swipe functionality, so that you can swipe left or right on an open menu, and it will move to the next option, without you having to click on the top menu. Unfortunately, programatically controlling the menus is clashing with the tablet's hover functionality. IE, the new menu is appearing, but the old menu isn't disappearing because the tablet browser is still treating it as an active hover.

So, what I want to be able to do is use jquery to disable the css :hover definitions. Once I have done that I will be able to implement a jquery tablet solution, while leaving the existing code intact.

I know I could do this by using different CSS files for tablets and desktops, but I was wondering if there was a neater solution that could be done using jquery.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:48:52.180

`removeClass`您可以使用 jQuery和 jQuery来“玩”您的元素所具有的 CSS 类`addClass`。

*   [http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)
*   [http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

# php - php source code for calling individual student result

> ID：14662002
> 
> 赞同：0
> 
> 时间：2013-02-02T12:42:33.433
> 
> 标签：php, mysql, phpmyadmin

The following codes brings out all the individual data in the database. All I need is to display a single individual data session in username and password.

Code used:

```
$sql= "SELECT * FROM $db_tbl WHERE username='" . $_SESSION['myusername'] . "'LIMIT 1"; 
```

# asp.net - When does the Instantiation stage of an ASP.NET page lifecycle occur? And what exactly is it?

> ID：14662003
> 
> 赞同：1
> 
> 时间：2013-02-02T12:42:40.433
> 
> 标签：asp.net, page-lifecycle

I have read this page: [Viewstate n page lifecycle](http://msdn.microsoft.com/en-in/library/ms972976.aspx) and also [ASP.NET page lifecycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx#additional_page_life_cycle_considerations) . My questions are these:

1 - Instantiaton means that the code for the control hierarchy is CREATED, and then in Initialization stage, it's executed, right?

2 - Does the Instantiation stage which is described in the page lifecycle, occur everytime? That is, does this occur for the first time and also during postbacks??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:47:20.093

是的，每次页面加载（包括回发）时都会重建控件层次结构。

在回发时，控件使用来自 ViewState 的值进行水合。

# c# - 为什么这个输出在 C# 和 C++ 中不同？

> ID：14662010
> 
> 赞同：3
> 
> 时间：2013-02-02T12:43:17.270
> 
> 标签：c#, c++

在 C# 中

```
var buffer = new byte[] {71, 20, 0, 0, 9, 0, 0, 0};

var g = (ulong) ((uint) (buffer[0] | buffer[1] << 8 | buffer[2] << 16 | buffer[3] << 24) |
                    (long) (buffer[4] | buffer[5] << 8 | buffer[6] << 16 | buffer[7] << 24) << 32); 
```

在 C++ 中

```
#define byte unsigned char
#define uint unsigned int
#define ulong unsigned long long

byte buffer[8] = {71, 20, 0, 0, 9, 0, 0, 0};

ulong g = (ulong) ((uint) (buffer[0] | buffer[1] << 8 | buffer[2] << 16 | buffer[3] << 24) |
                    (long) (buffer[4] | buffer[5] << 8 | buffer[6] << 16 | buffer[7] << 24) << 32); 
```

C# 输出`38654710855`，C++ 输出`5199`。

为什么？我已经为此挠头好几个小时了……

编辑：C# 有正确的输出。

感谢大家的帮助:) Jack Aidley 的答案是第一个，所以我将其标记为已接受的答案。其他答案也是正确的，但我不能接受多个答案：\

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T12:47:19.170

C++ 不起作用，因为您正在转换为`long`在大多数当前 C++ 实现中通常是 32 位的，但其确切长度留给实现者。你想要`long long`。

另外，请阅读下面 Bikeshedder 的更完整答案。他非常正确，固定大小的 typedef 是一种更可靠的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T12:48:28.597

问题是 long 类型`C++`仍然是 4 字节或 32 位（在大多数编译器上），因此您的计算会溢出它。`C#`然而in`long`等效于`C++`'s`long long`并且是 64 位的，因此表达式的结果适合类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T12:54:04.423

您`unsigned long`的长度不是 64 位。`sizeof(unsigned long)`您可以使用which 应该返回 4（=32 位）而不是 8（=64 位）轻松检查这一点。

如果您希望它们具有特定大小，请不要使用 int/short/long。该标准只是这么说`short <= int <= long <= long long`并定义了最小尺寸。它们实际上可以是相同的大小。`long`保证至少为 32 位，并`long long`保证至少为 64 位。（请参阅[C++ 标准的第 22 页](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)）如果您真的想使用特定大小，我仍然强烈建议您不要这样做并坚持使用 stdint。

使用[`<cstdint>`](http://www.cplusplus.com/reference/cstdint/)(C++11) 或`<cstdint.h>`(C++98) 和定义的类型`uint8_t`, `uint16_t`, `uint32_t`,`uint64_t`代替。

## 更正了 C++ 代码

```
#include <stdint.h>
#include <iostream>

int main(int argc, char *argv[]) {
    uint8_t buffer[8] = {71, 20, 0, 0, 9, 0, 0, 0};
    uint64_t g = (uint64_t) ((uint32_t) (buffer[0] | buffer[1] << 8 | buffer[2] << 16 | buffer[3] << 24) |
                              (int64_t) (buffer[4] | buffer[5] << 8 | buffer[6] << 16 | buffer[7] << 24) << 32);
    std::cout << g << std::endl;
    return 0;
} 
```

带输出的演示： http: [//codepad.org/e8GOuvMp](http://codepad.org/e8GOuvMp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T12:49:30.627

您的铸件中有一个细微的错误。

C# 中的 long 是一个 64 位整数。C++ 中的 long 通常是一个 32 位整数。

因此`(long) (buffer[4] | buffer[5] << 8 | buffer[6] << 16 | buffer[7] << 24) << 32)`，当您在 C# 或 C++ 中执行它时，您的含义会有所不同。

# r - 查找组的最大值和总和并插入R中的相关行

> ID：14662011
> 
> 赞同：0
> 
> 时间：2013-02-02T12:43:34.697
> 
> 标签：r, plyr

我有一个示例数据框`sample.data`，如下所示：

```
x   y   z
1   0   1
1   0   1
1   0   1
1   0   1
1   0   2
1   0   2
1   0   2
1   0   2
1   0   2
0   1   2 
```

我需要找到 z 的每个类别的 x 和 y 的最大值和总和（z 就像 1,2,...600）。为此，我使用 plyr 的 ddply ：

```
library(plyr)
z.group<-ddply (sample.data,.(z),summarize,max_x=max(x), max_y=max(y), sum_x=sum(x), sum_y=sum(y))

z.group 
 z   max_x  max_y  sum_x    sum_y
  1    1    0   4   0
  2    1    1   5   1 
```

现在，我需要将这些`sum_x, sum_y, max_x, and max_y`作为`sample.data`相关行下的列插入。例如，`if max_x is 1 for z=1, then I insert max_x is 1 for all rows with z=1`。预期的输出是

```
x   y   z   max_x  max_y    sum_x  sum_y
1   0   1   1   0   4   0
1   0   1   1   0   4   0
1   0   1   1   0   4   0
1   0   1   1   0   4   0
1   0   2   1   1   5   1
1   0   2   1   1   5   1
1   0   2   1   1   5   1
1   0   2   1   1   5   1
1   0   2   1   1   5   1
0   1   2   1   1   5   1 
```

我想知道如何获得预期的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T12:50:29.873

您可以直接一步完成，使用`transform`

```
.group<-ddply (sample.data,.(z),transform,max_x=max(x), max_y=max(y), sum_x=sum(x), sum_y=sum(y))
> z.group
   x y z max_x max_y sum_x sum_y
1  1 0 1     1     0     4     0
2  1 0 1     1     0     4     0
3  1 0 1     1     0     4     0
4  1 0 1     1     0     4     0
5  1 0 2     1     1     5     1
6  1 0 2     1     1     5     1
7  1 0 2     1     1     5     1
8  1 0 2     1     1     5     1
9  1 0 2     1     1     5     1
10 0 1 2     1     1     5     1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T12:47:06.433

我认为你可以这样做`merge`：

```
merge(sample.data, z.group, by="z")

#    z x y max_x max_y sum_x sum_y
# 1  1 1 0     1     0     4     0
# 2  1 1 0     1     0     4     0
# 3  1 1 0     1     0     4     0
# 4  1 1 0     1     0     4     0
# 5  2 1 0     1     1     5     1
# 6  2 1 0     1     1     5     1
# 7  2 1 0     1     1     5     1
# 8  2 1 0     1     1     5     1
# 9  2 1 0     1     1     5     1
# 10 2 0 1     1     1     5     1 
```

另一种`data.table`选择：

```
require(data.table)
dt <- data.table(sample.data, key="z")
dt[, list(x=x, y=y, max_x=max(x), max_y=max(y), sum_x=sum(x), sum_y=sum(y)), by=z] 
```

更好/更短的解决方案（正如@agstudy 建议的那样，应该是可能的）：

```
dt[, `:=`(max_x=max(x), max_y=max(y), sum_x=sum(x), sum_y=sum(y)), by=z] 
```

# wordpress - jQuery pagination not working on Wordpress

> ID：14662014
> 
> 赞同：0
> 
> 时间：2013-02-02T12:43:45.007
> 
> 标签：wordpress, pagination

I am building a page on Wordpress that has a DIV and inside that DIV there are many DIVs that share the same class, which I would like to paginate. I found a nice jQuery plugin that works fine on another page (not Wordpress). On the WP page, it initially shows the number of DIVs I set for pagination, but when clicking on NEXT/PAGE/PAGE NUMBER it shows nothing.

Works here (not Wordpress):

[http://roshtof.co.il/second_hand.php](http://roshtof.co.il/second_hand.php)

Doesn't work here:

[http://roshtof.co.il/wp-rosh/%D7%98%D7%99%D7%A4%D7%99%D7%9D-%D7%9C%D7%9E%D7%AA%D7%95%D7%A4%D7%A4%D7%99%D7%9D/](http://roshtof.co.il/wp-rosh/%D7%98%D7%99%D7%A4%D7%99%D7%9D-%D7%9C%D7%9E%D7%AA%D7%95%D7%A4%D7%A4%D7%99%D7%9D/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:57:08.483

Your plugin is working fine thats why it has brought up 16 items into 4 pages and does all initial work for you. There is an error on line 327 , 328

```
<script>
  $("#leftTip").load('http://roshtof.co.il/wp-rosh/%D7%98%D7%99%D7%A4%D7%99%D7%9D-%D7%9C%D7%9E%D7%AA%D7%95%D7%A4%D7%A4%D7%99%D7%9D/ #tips-for-drummers:first-child');
 </script> 
```

You need to put this code inside dom ready event and it would work. Nothing to do with wordpress. All wordpress does is throw out html and js for you so once you have this issue fixed then it would be all fine.

Because of the js error the scripts on paging click are not working. Other stuff might be broken as well due to js error.

# php - 如何表示两个外键引用一个主键的 yii 关系？

> ID：14662016
> 
> 赞同：1
> 
> 时间：2013-02-02T12:44:02.310
> 
> 标签：php, mysql, frameworks, yii

我如何表示这个模型的关系：我们有一个包含 PKey 的用户表。用户有两种类型：雇主和工人 -> 这两个表包含一个 Fkey 重新引用到用户 PKey。

我在用户模型中编写了类似的代码：

```
public function userTypeMapper($type) 
{
    switch ($type) {
        case 'w':
            return 'Worker';            
        case 'e':
            return 'Employer';          
        case 'a':
            return 'Admin';         
        default:
            return 'Employer';          
            return 'Guest';         
    }
}   
/**
 * @return array relational rules.
 */
public function relations()
{
    $entity = $this->userTypeMapper($this->u_type);
    return array(
        'entity' => array(self::HAS_ONE, $entity,  'u_id'),
        'projects' => array(self::HAS_MANY, 'Project', 'pr_u_id'),
    );
} 
```

以这种方式 $entity 在雇主和工人模型之间交替！

问题是它不起作用！！！我不知道为什么当项目模型获取所有者（在用户中）时未设置 u_type。实际上，在解释关系时没有设置任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:09:05.523

好吧，关系函数在模型初始化时调用，它没有任何属性。当您`$user = new User();`的模型`User`已经具有初始关系时。您必须设置所有关系：

```
public function relations()
{
    return array(
        'Worker' => array(self::HAS_ONE, 'Worker',  'u_id'),
        'Employer' => array(self::HAS_ONE, 'Employer',  'u_id'),
        'Admin' => array(self::HAS_ONE, 'Admin',  'u_id'),
        'Guest' => array(self::HAS_ONE, 'Guest',  'u_id'),
        'projects' => array(self::HAS_MANY, 'Project', 'pr_u_id'),
    );
}

/**
 * Get entity
 */
public function getEntity()
{
    switch ($this->u_type) {
        case 'w':
            return $this->Worker;
        case 'e':
            return $this->Employer;
        case 'a':
            return $this->Admin;
        default:
            return $this->Guest;
    }
} 
```

当您想要获取实体模型时，您只需调用

```
$user   = User::model()->findByPk($user_id);
$entity = $user->entity; 
```

# jquery-mobile - 淘汰可观察数组有界列表视图不会在 JQM 中呈现

> ID：14662020
> 
> 赞同：0
> 
> 时间：2013-02-02T12:45:00.827
> 
> 标签：jquery-mobile, knockout.js

JQM 列表视图与数据一样填充，没有预期的问题，但我无法使用 JQM 样式呈现它。任何人都可以帮助我解决这个问题。

我试过 listview(), listview("refresh"), trigger("create") 他们都没有工作

```
var ProfessionsModel = function() {
    var self = this;
    self.professionDetails = ko.observableArray([]);
    self.getProfessionDetails=function(){
        var rest = new RestService('${pageContext.request.contextPath}/rest/profession/designations');
        rest.findAll(function(data) {
            $.each(data, function(index, value){
                self.professionDetails.push(value);
            });
        });
    };

    self.removeProfessionDetails= function(){
        self.professionDetails.removeAll();
    };

};

var pm = new ProfessionsModel();

$('#profession').live('pagecreate', function(event) {
    ko.applyBindings(pm, this);
});

$('#profession').live('pagebeforeshow', function(event) {
    pm.removeProfessionDetails();
});

$('#profession').live('pageshow', function(event) {
    pm.getProfessionDetails();
    $('#profession').find("ul").listview();
    $('#profession').find("ul").listview("refresh");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:17:49.117

你在错误的时刻做这件事。您想相信 jQM 对正确时机的挑剔。

```
var ProfessionsModel = function() {
    var self = this;
    self.professionDetails = ko.observableArray([]);
    self.getProfessionDetails=function(){
        var rest = new RestService('${pageContext.request.contextPath}/rest/profession/designations');
        rest.findAll(function(data) {
            $.each(data, function(index, value){
                self.professionDetails.push(value);
            });
            $('#profession').find("ul").listview();
            $('#profession').find("ul").listview("refresh");                
        });
    };

    self.removeProfessionDetails= function(){
        self.professionDetails.removeAll();
    };

}; 
```

如果在追加内容后不执行 jQM 触发器刷新，则会停止，因此在 $.each 部分之后刷新。

# css - I made a class for A tags in a special div, but it applies to whole website

> ID：14662023
> 
> 赞同：0
> 
> 时间：2013-02-02T12:45:51.897
> 
> 标签：css

```
div.browseBuildsArea-pro  a:active, a:visited, a:link { 
    text-decoration: none; 
    color: #dddddd; 
    background-color: rgba(0, 0, 0, 0.3); 
    padding: 10px; 
}

div.browseBuildsArea-pro  a:hover {
    text-decoration: none; 
    color: #dddddd; 
    background-color: rgba(0, 0, 0, 0.9); padding: 10px;
} 
```

Links are like this:

```
<div class="browseBuildsArea-pro">
<div class="build-poster">
    <div class="inner">
        <a href="#">Test</a>
    </div>
</div>
</div> 
```

The problem is, the CSS attributes above applies to all `a` tags in website. This A class should only work under `browseBuildsArea-pro` class of `div`.

Any thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:47:56.587

也许试试这个：

```
div.browseBuildsArea-pro  A:active, 
div.browseBuildsArea-pro  A:visited, 
div.browseBuildsArea-pro  A:link { 
    text-decoration: none; 
    color: #dddddd; 
    background-color: rgba(0, 0, 0, 0.3); 
    padding: 10px; 
} 
```

`div.browseBuildsArea-pro`不会自动超过逗号。

# php - 为文件夹中的一堆 mp4 视频生成缩略图

> ID：14662027
> 
> 赞同：4
> 
> 时间：2013-02-02T12:46:16.483
> 
> 标签：php, ffmpeg, thumbnails

我读过[这个](https://stackoverflow.com/questions/9107710/create-video-thumbnail-of-all-files-in-a-directory-via-ffmpeg-and-php)，但没有太多帮助。

我有一个名为**videos**的文件夹和另一个名为**thumbnails**的文件夹。我在视频文件夹中有许多 mp4 视频，并希望使用 ffmpeg 和 php 在第 4 秒将缩略图捕获到缩略图文件夹。

1.  我在 windows whit php 5.3.8 和 Apache 2.2.21 上使用 Wamp server 2.2
2.  我从[ffmpeg 下载页面的](http://www.ffmpeg.org/download.html)**FFmpeg Windows Builds**部分下载了ffmpeg，并[从此](http://ffmpeg.zeranoe.com/builds/win32/static/ffmpeg-latest-win32-static.7z)链接 下载了静态 32 版本。
3.  我将 7z 文件提取到我的网站根目录
    ，这是我的 php 代码：

    ```
    $ffmpeg = "includes/ffmpeg/bin/ffmpeg";
    foreach(glob('files/videos/*.mp4') as $pathname){
      $filename = substr($pathname,13,strripos($pathname,'.mp4')-13);
      $thumbnail = 'files/thumbnails/'.$filename.'.jpg';
      exec("ffmpeg -i $pathname -an -y -f mjpeg -ss 00:00:04 -vframes 1 $thumbnail");
    } 
    ```

但什么也没有发生，缩略图文件夹总是空的！
- 我怎样才能知道我的服务器上是否安装了 ffmpeg？
- 我怎样才能让我的脚本工作？
请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-04T11:05:23.063

试试这个：

```
$ffmpeg = "c:/wamp/www/includes/ffmpeg/bin/ffmpeg";
$videos = "c:/wamp/www/files/videos/*.mp4";
$ouput_path = "c:/wamp/www/files/thumbnails/";
foreach(glob($videos) as $v_file){
    $fname = basename($v_file, ".mp4");
    $thmb = $ouput_path.$fname.'_tn.jpg';
    $cmd = "$ffmpeg -i $v_file -an -y -f mjpeg -ss 00:00:04 -vframes 1 $thmb";
    $stat = system ($cmd);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:05:00.473

尝试在命令中使用绝对路径，而不是依赖于 PATH ENV 变量：两者都`exec()`有效`system()`。解析路径定义。

```
/* Using Absolute paths */
$ffmpeg = "c:/wamp/www/includes/ffmpeg/bin/ffmpeg";
$videos = "c:/wamp/www/files/videos/*.mp4";
$ouput_path = "c:/wamp/www/files/thumbnails/";

foreach(glob($videos) as $video_file){

    $filename = basename($video_file, ".mp4");
    $thumbnail = $ouput_path.$filename.'_tn.jpg';
    $command = "$ffmpeg -i $video_file -an -y -f mjpeg -ss 00:00:04 -vframes 1 $thumbnail";

    $status = system ($command);
/*or
    $status = exec($command);

    if ($status === false) {
        var_dump("ERROR: Conversion Failed!!!!");
    } else
        var_dump($status);
*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-27T21:58:06.083

我不允许添加评论，所以在这里（作为帖子）是我在处理这个问题时发现的：文件名中的空格阻止 ffmpeg 找到正确的文件。所以一种方法是更改​​文件名。

# textview - TextView 在 VideoView 上的透明度

> ID：14662028
> 
> 赞同：4
> 
> 时间：2013-02-02T12:46:22.010
> 
> 标签：textview, transparency, android-videoview, alpha

我正在编写一个在 Android 4.0.3 上运行的应用程序，它通过 HDMI 使用视频输出进行显示。

我有一个在 VideoView 之上工作的有色透明 TextView，但是经过一系列看似无关的更改，我已经破坏了它并且无法让它再次工作。

我正在使用 SetBackgroundColor，即

```
myTextView.setBackgroundColor( Color.argb ( 128, 128, 0, 0 ) ); 
```

症状是 TextView 显示纯色背景颜色 (RGB 128,0,0) 并且没有透明度。如果我将 alpha 设置为 0 之间，背景将变得完全透明，但我仍然可以在 TextView 内的文本轮廓上辨认出 VideoView 后面的背景颜色。例如，当我将 alpha 设置为更高的值（例如 10）时，背景变为纯色，即上面的示例将变为 RGB(128,0,0)。

我已经摆弄了很多东西，例如`setAlpha(float)`, `setBackgroundColor(Color)`, 以不同的顺序动态创建视图, 在 XML 中创建和排序视图 , `bringToFront()`, `getBackground().setAlpha( int )`,`android:background="@android:color/transparent"`都没有进一步的成功。

我构建了另一个简单的应用程序，删除了所有内容以尝试弄清楚发生了什么，但没有成功。

**XML 布局**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/frame"
   android:orientation="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >
   <VideoView 
    android:id="@+id/videoScreen"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" >
   </VideoView>  
   <TextView
       android:id="@+id/textScreen"
       android:layout_width="300sp"
       android:layout_height="fill_parent"
       android:background="#80800000"
       android:text="@string/hello_world" 
       android:lines="400" >    
    </TextView>
</FrameLayout> 
```

**简单的视频视图**

```
final MediaController mediaController = new MediaController( getWindow().getContext() );
videoView = ( VideoView )findViewById( R.id.videoScreen );
mediaController.setAnchorView( videoView );
videoView.setMediaController( mediaController );        
videoView.setVideoPath( "/mnt/extsd/test-movie.mov" );
videoView.start(); 
```

如果我理解正确，这应该会在正在运行的 VideoView 上产生一个红色、半透明的 TextView，但我似乎无法让它工作。

如果我删除 VideoView 并放置一个带有图片的 ImageView，透明度和背景颜色着色**确实**有效。我怀疑 TextView over VideoView 有什么不寻常的地方。

有没有人有任何建议我可能做错了什么？还是要检查的东西？

我有什么明显的遗漏吗？

一个使用 Color 背景颜色的 TextView 的简短示例。如果有人有，将不胜感激 VideoView 上的*argb ( 128, 128, 0, 0 )。*

# symfony-2.1 - Symfony2 表单 - 编辑保存的数据

> ID：14662029
> 
> 赞同：0
> 
> 时间：2013-02-02T12:46:27.563
> 
> 标签：symfony-2.1

我正在寻找如何使用从现有对象中获取的数据预填充表单的指导。我想它应该使用方法 setData，我期待一些简单的东西， `$form->setData($existingObject)`但没有成功。

*为了更好地解释，让我们举一个简单的例子。*
我有用户输入他的个人数据的表格。通过调用 form.factory 在控制器中创建表单，

```
$form = $this->get('form.factory')->create(new personType()); 
```

我有表单类“personType”，这个表单类定义了名为“person”的 data_class 对象。用户提交表单，数据保存在对象 person 中，该对象保存在 session 中。我需要选择重新打开表单并填写保存在会话中存储的对象中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:07:45.113

在您的控制器中，您需要创建/查找您的对象，然后将其传递给您的 createForm

> $task = 新任务();
> $task->setTask('写一篇博文');
> $task->setDueDate(new \DateTime('明天'));
> 
> $form = $this->createForm(new TaskType(), $task);

[http://symfony.com/doc/master/book/forms.html#creating-form-classes](http://symfony.com/doc/master/book/forms.html#creating-form-classes)

在你的例子中，尝试

> $人 = ...;
> $form = $this->get('form.factory')->create(new personType(), $person);

# css - css3多个背景图像的后备？

> ID：14662030
> 
> 赞同：11
> 
> 时间：2013-02-02T12:46:46.927
> 
> 标签：css, background, background-image

我有两张图片作为我身体的背景：

```
background: url(../img/upper_bg.png) 0 495px repeat-x, url(../img/bg.png) repeat; 
```

我发现为了显示`upper_bg.png`上面的`bg.png`图像，我需要将它放在列表的首位。但是，对于不支持多个背景的浏览器，我只想展示`bg.png`，我担心浏览器会`upper_bg.png`作为后备而不是`bg.png`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-02T12:49:07.273

只需在多个背景之前添加一个`background`带有 bg.png 的声明即可：

```
background: url(../img/bg.png) repeat;
background: url(../img/upper_bg.png) 0 495px repeat-x, url(../img/bg.png) repeat; 
```

较旧的浏览器会忽略第二行而保留第一行；他们根本不应该尝试使用第二行的任何部分。支持多个背景的浏览器将使用第二行而不是第一行，方法是照常覆盖它。

# java - WSO2ESB-Error Java 客户端消费者和 WS 提供者

> ID：14662037
> 
> 赞同：2
> 
> 时间：2013-02-02T12:47:48.883
> 
> 标签：java, jakarta-ee, wso2, wso2esb, wso2developerstudio

我正在尝试使用带有开发人员工作室的 Eclipse Helios 执行 Java 客户端代码，以与 WSO2ESB 中的 Web 服务进行通信。当我运行代码时，出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/wso2/securevault/SecretResolverFactory
    at org.apache.axis2.deployment.AxisConfigBuilder.populateConfig(AxisConfigBuilder.java:92)
    at org.apache.axis2.deployment.DeploymentEngine.populateAxisConfiguration(DeploymentEngine.java:854)
    at org.apache.axis2.deployment.FileSystemConfigurator.getAxisConfiguration(FileSystemConfigurator.java:116)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:64)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContextFromFileSystem(ConfigurationContextFactory.java:210)
    at org.apache.axis2.client.ServiceClient.configureServiceClient(ServiceClient.java:151)
    at org.apache.axis2.client.ServiceClient.<init>(ServiceClient.java:144)
    at org.wso2.cs.helloservices.ProxyWSOneStub.<init>(ProxyWSOneStub.java:91)
    at org.wso2.cs.helloservices.ProxyWSOneStub.<init>(ProxyWSOneStub.java:77)
    at org.wso2.cs.helloservices.ProxyWSOneStub.<init>(ProxyWSOneStub.java:126)
    at org.wso2.cs.helloservices.ProxyWSOneStub.<init>(ProxyWSOneStub.java:118)
    at org.wso2.cs.helloservices.ClientSizeResponseSynchronous.ClientSizeResponseSynchronous(ClientSizeResponseSynchronous.java:22)
    at org.wso2.cs.helloservices.MainSizeResponseSynchronous.main(MainSizeResponseSynchronous.java:38)
Caused by: java.lang.ClassNotFoundException: org.wso2.securevault.SecretResolverFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 13 more 
```

请任何解决方案来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T19:04:07.120

要将必要的依赖项添加到您的类路径，请按照以下步骤操作。

*   转到“ESB_HOME/bin”目录。

*   发出命令“ant”，它将在使用 ESB 进行自定义开发时将您希望在类路径中拥有的所有库复制到“ESB_HOME/repository/lib”目录。（确保你先安装了ant）

*   将“ESB_HOME/repository/lib”jar 目录添加到类路径中。

*   执行你的客户。

希望这可以帮助。

问候， 普拉巴斯

# php - 数组推入php但ajax返回未定义

> ID：14662039
> 
> 赞同：0
> 
> 时间：2013-02-02T12:47:57.597
> 
> 标签：php, jquery, ajax

我正在尝试使用 php 在我的数组中推送新值

```
$select_all_schools = "SELECT * FROM schools ";
$query = mysql_query($select_all_schools) OR die(mysql_error());

while($row = mysql_fetch_array($query)){
    $item=array(    
        'school_name' => $row['school_name'],
        'school_address' => $row['school_address'],
        'school_id' => $row['school_id'],
    );

    $select_sections = "SELECT * FROM section WHERE school_id = '".$row['school_id']."'";

    $query_section = mysql_query($select_sections) or die(mysql_error());
    $sections_counts = mysql_num_rows($query_section);
    $select_sections_deped_archive = "SELECT * FROM deped_grade_archive 
                                      WHERE school_id = '".$row['school_id']."'
                                      GROUP BY section_id ";

    $query_section_deped_archive = mysql_query($select_sections_deped_archive) or die(mysql_error());
    $sections_counts_grade_archive = mysql_num_rows($query_section_deped_archive);

    if($sections_counts_grade_archive == $sections_counts ){
         $item['stat'] = 'Complete';
    }
    else{
        $item['stat'] ='Incomplete';
    }
}           

echo json_encode($item); 
```

然后使用ajax获取值

```
function get_all_school_status(){
    $.ajax({
        type:'POST',
        url:'deped_functions.php',
        dataType:'json',
        data:{'func_num':'1'},
        success:function (data){
            $.each(data, function(i, item) {
               html = "<tr>";
               html += "<td style='width:20%;'><input type='radio' name='school_id' value='"+data[i].school_id+"'></td>";
               html += "<td style='width:25%;'><label>"+data[i].stat+"</label></td>";
               html += "<td style='width:55%;'><label >"+data[i].school_name+"</label></td>";
               html += "</tr>";

               $('#table-schools-content').append(html);
           });
       }
   });
}
get_all_school_status(); 
```

但不幸的是，尽管我的控制台显示我正确地将值从 php 获取到 ajax，但我得到了未定义的值。我做错了什么？..请帮助大家。tnx 提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:30:33.383

js部分代码是正确的，但是你的**php数组形成错误**。
尝试替换上面的代码。错误被评论。

```
$count = 0; // keys of array
while($row = mysql_fetch_array($query)){
    $count++; // in prevoius version you get only one row from table
    // correct version of school array
    $item[$count] = array(    
        'school_name' => $row['school_name'],
        'school_address' => $row['school_address'],
        'school_id' => $row['school_id'],
    );

    $select_sections = "SELECT * FROM section WHERE school_id = '".$row['school_id']."'";

    $query_section = mysql_query($select_sections) or die(mysql_error());
    $sections_counts = mysql_num_rows($query_section);
    $select_sections_deped_archive = "SELECT * FROM deped_grade_archive 
                                      WHERE school_id = '".$row['school_id']."'
                                      GROUP BY section_id ";

    $query_section_deped_archive = mysql_query($select_sections_deped_archive) or die(mysql_error());
    $sections_counts_grade_archive = mysql_num_rows($query_section_deped_archive);

    if($sections_counts_grade_archive == $sections_counts ){
        // success or error message with key 'status'
        $item[$count]['status'] = 'Complete';
    }
    else{
         $item[$count]['status'] = 'Incomplete';
    }
} 
```

结果： [http ://clip2net.com/s/2MJmt](http://clip2net.com/s/2MJmt)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T12:55:42.190

[jQuery .each 方法](http://api.jquery.com/each/)不是用来遍历数组而是 HTML 元素。应该使用 FOR 循环正常遍历您的学校数组：

```
success: function(data) {
               if(typeof data == "string")   //handle PHP errors - this happens if non-json string is returned by a server
                   alert("JQuery failed to convert data to JS object!");
               for(var i=0; i<data.length; i++) {
                   /*Do whatever with data[i]*/
               }
         } 
```

如果数据数组包含像 data["school1"] 或类似的非*有序键，则必须使用`for(var i in data)`类似于 PHP foreach 的键。

另外，我不确定，但我认为你应该有`dataType:'application/json'`，这是正确的[json mime 类型](https://stackoverflow.com/questions/477816/the-right-json-content-type)。

# mysql - 在Mysql中查找哪个条目出现的最大次数

> ID：14662040
> 
> 赞同：1
> 
> 时间：2013-02-02T12:48:04.957
> 
> 标签：mysql, sql, max, derived-table

我有一张`T`这样的桌子：

```
ID | brand
2 | 100
2 | 300
2 | 300
1 | 100
1 | 200 
```

我想找出哪个 ID、品牌组合出现超过 50% 的 ID。例如：这里的结果应该是

```
ID | brand
2 | 300 
```

因为 (2,300) 在 ID 2 中出现了 3 次中的 2 次。在 ID1 中，两种组合都是 50% 次，所以 ID 1 没有行。
现在我这样处理它：
首先我找到了每个 ID 的计数，品牌组合：

```
(select id,brand,count(*) c from T group by id,brand) as F 
```

然后我列出所有满足上述条件的 ID

```
select ID from F group by ID having max(c)/count(*) > 0.5 
```

它工作得很好，但问题是我无法获得相应的品牌，因为在上面的查询中，我给出

```
select ID, brand ... 
```

然后它总是给桌子的第一品牌。
这是[sql小提琴](http://www.sqlfiddle.com/#!2/cfd4d/2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:57:38.717

这是我的第一次尝试。

```
SELECT ID, BRAND
FROM
(
  SELECT t.ID, t.BRAND, s.TotalCount, 
          COUNT(*) * 1.0 / s.TotalCount Percentage
  FROM   T
         INNER JOIN
        (
          SELECT ID, COUNT(*) totalCOunt
          FROM   T
          GROUP  BY ID
        ) s ON T.ID = s.ID
  GROUP  BY ID, BRAND
  HAVING (COUNT(*) * 1.0 / s.TotalCount) > 0.5
) r 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/cfd4d/25)
*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/cfd4d/31)

# node.js - 如何为 node.js 中的每个用户生成相同的动画？

> ID：14662041
> 
> 赞同：2
> 
> 时间：2013-02-02T12:48:09.907
> 
> 标签：node.js

我想生成一些随机圆圈，它们在画布上实时移动，并确保每个用户看到相同的东西。

但我不知道。如何确保它是一样的？我需要存储数据吗？</p>

我想它可能需要使用socket.io？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:01:48.503

您可以通过将圆转换为 base64 (dataUri) 字符串并使用 socket.io 将字符串广播给用户来获得圆的字符串表示。

大多数节点画布库都内置了这个方法（toDataUri），所以它应该相当简单。

# php - 我的删除 cronjob php 函数有什么问题？

> ID：14662047
> 
> 赞同：0
> 
> 时间：2013-02-02T12:48:48.580
> 
> 标签：php, shell, command, crontab

我正在尝试编写一个有助于删除 cron 作业的函数，我尝试了一些网络上的类，但它没有用，所以我自己写它，它没有正确删除命令的问题，要么删除它，或者它正在删除文件中存在的每个 cron 作业的一半！

这是我的功能：

```
function delete_cronjob($command)
{
   $outputs = array();
    exec('crontab -l',$outputs);

    for($i=0;$i<count($outputs);$i++)
    {
        if ($outputs[$i]==$command)
            $outputs[$i]=NULL;
    }

      shell_exec('crontab -r');
      for($i=0;$i<count($outputs);$i++)
      {
          if ($outputs[$i]!=NULL)
            shell_exec('(crontab -l ; echo "'.$outputs[$i].'") |uniq - | crontab -');
      } 
```

}

这是我使用的那种 cron 工作：

```
$command='0 0 * * * ssh -p 22 root@192.168.0.121 "cd /home/sally/;./bckp_rstr.bash _ _ 0 1 test root@192.168.0.196:/home/sally/sal_bckp/ 192.168.0.121 22 1 "';
delete_cronjob($command); 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:06:39.747

如果它在您的系统上像在我的（Fedora）上一样工作，我建议只使用 file_put_contents，更不用说出错了

此外，我将 cron 作业存储在数据库中，因此我可以将它们标记为活动/非活动，然后转储活动的作业 - 以及一个用于评论/描述其作用的字段

它具有覆盖手动编辑的任何 crons 的缺点，但我不倾向于这样做。拥有一个可供我们所有服务器访问的 crons 存储的优势——有一个字段说明 crons 用于哪些服务器——胜过这一点。这也意味着 crons 列表与其余数据一起备份，如果需要，可以很容易地推送到其他机器:) 值得考虑。

# sql-server - 我应该使用 int32 还是 int64 作为 SQL Server 数据库中的主键？

> ID：14662048
> 
> 赞同：15
> 
> 时间：2013-02-02T12:48:49.280
> 
> 标签：sql-server

在 SQL Server 中创建新数据库时，我应该使用 int32 还是 int64 的主键？

int32 更快吗？

我认为我不想使用 int32 的原因是：int32 数据类型的上限不会将特定表上的总事务限制为 2,147,483,647？我无意在其中存储那么多数据，但如果我经常需要创建新记录然后删除其他过时的记录怎么办？以后有很多交易，我不会用完钥匙吗？是否已经有一些方法可以解决这个问题？或者我应该只使用长数据类型。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-02T13:34:23.150

使用类型`INT`(int32)，从 1 开始，您可以获得**超过 20 亿**行可能的行——这对于绝大多数情况来说应该绰绰有余。使用`BIGINT`(int64)，你得到大约**9 quintillion**（9 有 18 个零 - 9'223'0000 亿） - 对你来说足够了吗？

只需几个快速计算：

*   如果您使用`INT IDENTITY`从 1 开始，并且**每秒插入一行**，则需要**66.5 年**才能达到 20 亿的限制....

*   如果您使用`BIGINT IDENTITY`从 1 开始的 a，并且**每秒插入 1000 行**，那么在达到 9.22 quintillion 限制之前，您需要令人难以置信的**2.92 亿年......**

[在MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms186775.aspx)中阅读有关它的更多信息（包括所有选项）。

# android - 更新数据库中的数据时出现 NullPointerException

> ID：14662054
> 
> 赞同：1
> 
> 时间：2013-02-02T12:49:13.930
> 
> 标签：android, sqlite, nullpointerexception, android-sqlite

该应用程序有 2 个活动，第一个活动有 2 个字段，第二个活动有 1 个字段。第一个两个字段被插入到表中，即第一个活动。一旦插入前两个字段，用户就会被重定向到新活动。新活动有第三个字段，保存时应该在同一个表中更新。但是，在插入第一个两个值之后，当我在同一个表中更新第三个值时，我得到空指针异常。提前致谢。

这是我更新第三个值的第二个活动

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.act2);
        ed3=(EditText)findViewById(R.id.data3id);
        updatebtn=(Button)findViewById(R.id.updatebtnid);

        final Intent intent = getIntent();
        mRowId=intent.getStringExtra("KEYROWID");

        updatebtn.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {
                dba = new DBAdapter(v.getContext());

                String data3=ed3.getText().toString();

                dba.open();

                 String updatequery = "UPDATE "+ DBAdapter.DATABASE_TABLE+ " SET ";

                updatequery = updatequery + "KEY_DATA3='" +data3 +"'";
                Log.v("updatequery",updatequery);
                updatequery = updatequery + " WHERE _id = '" + mRowId + "';";
                Log.v("updatequery-new",updatequery);
                Log.v("test-1","update");
                try{
                    Log.v("test-2","update");
                    myDB.execSQL(updatequery);

                }catch(Exception e){
                    e.printStackTrace();
                }finally{
                    Log.v("test-3","update");

                    if(myDB != null)myDB.close();

                }

            } 
```

这是我的 DBAdapter 类

```
public class DBAdapter {
    public static final String KEY_ROWID= "_id";
    public static final String KEY_DATA1="data1";
    public static final String KEY_DATA2="data2";
    public static final String KEY_DATA3="data3";

    private static String TAG="DBAdapter";

    static String DATABASE_NAME="update.db";
    static final String DATABASE_TABLE="update_table";
    private static int DATABASE_VERSION=2;

    private final Context context;
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_CREATE =
      "create table update_table(_id integer primary key autoincrement, "
    + "data1 varchar, data2 varchar, data3 varchar);";

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {

            db.execSQL(DATABASE_CREATE);
        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS update_table");
            onCreate(db);
        }
    }

    public DBAdapter(Context ctx) {
        this.context = ctx;
    }

    public DBAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(context);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    public long createddb(String data1,String data2,String data3) {

        ContentValues initialValues = new ContentValues();

        initialValues.put(KEY_DATA1, data1);
        initialValues.put(KEY_DATA2, data2);
        initialValues.put(KEY_DATA3, data3);

       return  mDb.insert(DATABASE_TABLE, null, initialValues);

    }

    public boolean deleteSaleseditdetails(long rowId) {

        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public int fetchmaxId(){
        //return mDb.query(DATABASE_TABLE, new String[]{KEY_ROWID},null, null, null, null, null);
        String selectQuery = "SELECT max("+KEY_ROWID+") from " + DATABASE_TABLE ;
         Cursor c= mDb.rawQuery(selectQuery, null);
        c.moveToFirst();
        return c.getInt(0);
        //  cursor.moveToLast();

    }

    public boolean deletedb(long rowId) {

        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    } 
```

以下是我进入 logcat 文件的错误

```
02-02 18:10:48.751: W/System.err(17003): java.lang.NullPointerException
02-02 18:10:48.761: W/System.err(17003):    at com.example.testupdate.Activity2$1.onClick(Activity2.java:62)
02-02 18:10:48.761: W/System.err(17003):    at android.view.View.performClick(View.java:2408)
02-02 18:10:48.761: W/System.err(17003):    at android.view.View$PerformClick.run(View.java:8816)
02-02 18:10:48.761: W/System.err(17003):    at android.os.Handler.handleCallback(Handler.java:587)
02-02 18:10:48.761: W/System.err(17003):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-02 18:10:48.761: W/System.err(17003):    at android.os.Looper.loop(Looper.java:123)
02-02 18:10:48.761: W/System.err(17003):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-02 18:10:48.761: W/System.err(17003):    at java.lang.reflect.Method.invokeNative(Native Method)
02-02 18:10:48.761: W/System.err(17003):    at java.lang.reflect.Method.invoke(Method.java:521)
02-02 18:10:48.761: W/System.err(17003):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-02 18:10:48.761: W/System.err(17003):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-02 18:10:48.761: W/System.err(17003):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:01:01.007

问题`myDB`出在`null`. 我在您的代码中看不到这一点，但请检查您的`myDB`字段是否在某处初始化。如果没有，那就是导致您的`NullPointerException`.

顺便说一句，您正在检查是否`myDB`不是`null`为了知道是否应该关闭它：

```
if(myDB != null)myDB.close(); 
```

但是你打电话时没有做同样的检查`myDB.execSQL(updatequery);`

# android - 如何在eclipse中使用“ADT 21.0.1”为android模拟器安装皮肤（来自三星）？

> ID：14662056
> 
> 赞同：5
> 
> 时间：2013-02-02T12:49:44.177
> 
> 标签：android, android-emulator, emulation, adt, eclipse-adt

如何在eclipse中使用“ADT 21.0.1”为android模拟器安装皮肤（来自三星）？

我可以用“ADT 16.0.1”来做到这一点，我使用了三星的 Galaxy S2 皮肤 [http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-S2-Skin-for-handset-仿真](http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-S2-Skin-for-handset-emulation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T16:24:27.017

解压皮肤文件夹并将其复制到/platforms/android-x/skins/。然后重启eclipse就可以看到Galaxy S2的皮肤了，同时新建了一个模拟器。

# android - 我如何将变量从活动传递到广播接收器？

> ID：14662065
> 
> 赞同：0
> 
> 时间：2013-02-02T12:50:52.917
> 
> 标签：android, broadcastreceiver

> **可能重复：**
> [将值从活动传递到广播接收器并从广播接收器启动服务](https://stackoverflow.com/questions/9390279/pass-a-value-from-activity-to-broadcastreceiver-and-start-a-service-from-the-bro)

我创建了一个将来电号码发送到蓝牙的应用程序，我想将管理员号码从活动传递给接收器。我该怎么做？

```
 public void onResume() {
   super.onResume();

  registerReceiver(new IncomingCallReceiver(), new  intentFilter("android.intent.action.PHONE_STATE"));

   @Override
    public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();

            String msg2 = intent.getStringExtra("admin_no");

            if(null == bundle)
                    return;

            Log.i("IncomingCallReceiver",bundle.toString());

            String state = bundle.getString(TelephonyManager.EXTRA_STATE);

            Log.i("IncomingCallReceiver","State: "+ state);

            if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
            {
                    String phonenumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:55:24.157

尝试过这样的事情？

```
 Intent intent = new Intent("android.intent.action.PHONE_STATE");
    intent.putExtra("admin_no","9999999"); // change number here.
    sendBroadcast(intent); 
```

# php - PHP，2 行成 1

> ID：14662067
> 
> 赞同：1
> 
> 时间：2013-02-02T12:51:30.357
> 
> 标签：php, mysql, phpmyadmin

由于数据库的组织方式，我无法将正确的结果集放入 1 行。我使用以下 SQL：

```
SELECT ord.ID, ord.post_date, ord.post_status, ord.post_type, 
meta.meta_value, term.term_id, term.name, 
SUBSTRING(meta.meta_value,LOCATE('\"id\";i:', meta.meta_value)+7,3) AS prodID,
user.user_email
FROM wp_posts ord
INNER JOIN wp_postmeta meta ON meta.post_id = ord.ID
INNER JOIN wp_term_relationships rel ON ord.ID = rel.object_id 
INNER JOIN wp_terms term on term.term_id = rel.term_taxonomy_id 
LEFT JOIN wp_users user ON user.ID = meta.meta_value
WHERE ord.post_type = 'shop_order'
AND (meta.meta_key = '_customer_user' OR meta.meta_key = '_order_items')
AND ord.post_date >= DATE_SUB(NOW(), INTERVAL 2 HOUR)
AND ord.post_status <> 'trash'
AND term.term_id = 34
ORDER BY `ord`.`ID`  DESC 
```

结果是：

```
ID Descending   post_date   post_status     post_type   meta_value  term_id     name    prodID  user_email
451     2013-02-02 10:24:00     publish     shop_order  2   34  processing      sales@proxyplayer.co.uk
451     2013-02-02 10:24:00     publish     shop_order  a:1:{i:0;a:10:{s:2:"id";s:3:"339";s:12:"variation_...   34  processing  338     NULL 
```

理想情况下，我想将 meta.meta_value 作为一行返回，因此，元值 2 将与 a:1:{i:0;a:10:{s:2:"id";i 连接:338;s:12:"variation_id";...

但是，我认为在这种情况下我不能这样做，因为 meta_value 在元表中有 2 个单独的行。

所以，我想我可以在 PHP 中控制它并得到值 2 和值 338。但是我怎样才能在一个while循环中做到这一点？

```
while ($squid = mysql_fetch_array($result, MYSQL_ASSOC)) {

//1st row

//2nd row

//processing code

} 
```

我要在其中添加一个额外的while循环来跳过数据库中每2行数据吗？我应该将它加载到数组中并循环遍历数组中的 2 行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:57:32.217

您需要在 PHP 中执行此操作是正确的：MySQL 不理解 PHP 的序列化数据格式。

但是，您不需要像您说的那样跳过行。在循环外创建一个存储 $ID -> meta_data 关系的数组。我不完全知道你想如何连接它们，但看一下这个例子。

```
$squArr = array();
while($squid = mysql_fetch_assoc...) // I'm using fetch assoc so I can use the row names as array indices
{
    $rowID = $squid['ID'];
    $rowMeta = $squid['meta_value'];
    $squArr[$rowID][] = $rowMeta;
} 
```

在这里，这将为每个 ID 创建一个元数据数组。不过，您可以将 while 循环最后一行中的操作替换为不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:59:27.327

如果要获取数组中的所有行，可以执行以下操作：

```
$results = array();
while ($squid = mysql_fetch_array($result, MYSQL_ASSOC)) {
  if (isset($results[$squid['ID']))
  {
    // row with index ID already added, modify existing row
    $results[$squid['ID']]['meta_value'] .= ';' . $squid['meta_value'];
  }
  else
  {
    // add new row, using the ID as the index
    $results[$squid['ID']] = $squid;
  }
} 
```

您可能需要将您的循环放在`processing code`循环之后，因为循环中的数据不完整，即使您不使用`meta_value`，您也不想做所有事情两次。

# php - ckeditor 设置文本区域值

> ID：14662068
> 
> 赞同：0
> 
> 时间：2013-02-02T12:51:31.743
> 
> 标签：php, javascript, json, ckeditor

我无法从 textarea 获得正确的值

```
<textarea class="ckeditor" name="cmscontent" id="cmscontent"></textarea>
<script type="text/javascript">
    CKEDITOR.replace('cmscontent');
</script> 
```

我正在使用 JSON 请求将其发送到服务器，并且该`$_POST['cmscontent']`值始终为空。我还有其他事情要做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:20:13.560

您需要`editor.updateElement()`在发送 AJAX 请求保存内容之前调用。此方法将使用编辑器的内容更新 textarea 元素。

您可以`editor`从`CKEDITOR.replace()`或从实例对象获取实例 - `CKEDITOR.instances.cmscontent`。

# android - Arduino Android USB 连接

> ID：14662069
> 
> 赞同：2
> 
> 时间：2013-02-02T12:51:52.350
> 
> 标签：android, usb, arduino, usbserial

我正在使用 Arduino [Duemilanove](http://en.wikipedia.org/wiki/List_of_Arduino_boards_and_compatible_systems#Superseded_versions)和[Nexus 7](http://en.wikipedia.org/wiki/Nexus_7)。我已成功检测到 Arduino 板并显示了供应商 ID 和产品 ID。我正在尝试将数据从我的平板电脑传输到 Arduino 板上，并尝试让板上的[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)闪烁。Android的代码如下。

### 主要活动.java

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
        UsbDeviceConnection connection;
        HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
        Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
        UsbDevice device = null;
        while(deviceIterator.hasNext()){
            device = deviceIterator.next();
            String s = device.getDeviceName();
            int pid = device.getProductId();
            int did = device.getDeviceId();
            int vid = device.getVendorId();
            TextView tv = (TextView) findViewById(R.id.textview);
            tv.setText(s+"\n"+Integer.toString(pid)+"\n"+Integer.toString(did));
        }
        connection = manager.openDevice(device);
        DataTransfer dt = new DataTransfer(device,connection);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

### 数据传输.java

```
public class DataTransfer extends Thread {
    UsbDevice device;
    UsbDeviceConnection connection;
    byte data = 1;
    public DataTransfer(UsbDevice device, UsbDeviceConnection connection) {
        // TODO: Auto-generated constructor stub
        device = this.device;
        connection = this.connection;
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        super.run();
        UsbInterface usbIf = device.getInterface(0);
        UsbEndpoint end1 = usbIf.getEndpoint(0);

        //UsbRequest ureq = connection.requestWait();
        final Object[] sSendLock = new Object[]{};
        boolean mStop = false;
        byte mData = 0x00;

        if(!connection.claimInterface(usbIf, true))
        {
            return;
        }

        connection.controlTransfer(0x21, 34, 0, 0, null, 0, 0);
        connection.controlTransfer(0x21, 32, 0, 0, new byte[] { (byte) 0x80,
                0x25, 0x00, 0x00, 0x00, 0x00, 0x08 }, 7, 0);
        connection.controlTransfer(0x40, 0x03, 0x4138, 0, null, 0, 0); //Baudrate 9600

        UsbEndpoint epIN = null;
        UsbEndpoint epOUT = null;

        for (int i = 0; i < usbIf.getEndpointCount(); i++) {
            if (usbIf.getEndpoint(i).getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
                if (usbIf.getEndpoint(i).getDirection() == UsbConstants.USB_DIR_IN)
                    epIN = usbIf.getEndpoint(i);
                else
                    epOUT = usbIf.getEndpoint(i);
            }
        }

        for (;;) { // This is the main loop for transferring
            synchronized (sSendLock) { //OK, there should be a OUT queue, no guarantee that the byte is sent actually.
                try {
                    sSendLock.wait();
                }
                catch (InterruptedException e) {
                    if (mStop) {
                        return;
                    }
                    e.printStackTrace();
                }
                connection.bulkTransfer(epOUT,new byte[] {data}, 1, 0);
            }
        }
    }
} 
```

我的 Arduino 代码是：

```
int incomingByte = 0; // For incoming serial data
void setup() {
    pinMode(13, OUTPUT);
    Serial.begin(9600); // Opens serial port, sets data rate to 9600 bps.
}

void loop() {
    // Send data only when you receive data:
    if (Serial.available() > 0) {
        // Read the incoming byte:
        incomingByte = Serial.read();
        digitalWrite(13, HIGH);   // Set the LED on
        delay(1000);              // Wait for a second
        digitalWrite(13, LOW);    // Set the LED off

        // Say what you got:
        Serial.print("I received: ");
        Serial.println(incomingByte, DEC);
    }
} 
```

问题是 Arduino 板上没有 LED 发光。我不确定问题出在哪里，因为我刚刚开始在这个领域工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:37:52.123

您在评论中从[http://android.serverbox.ch/?p=549](http://android.serverbox.ch/?p=549)引用的项目仅适用于较新的 Arduino 板，例如 Uno（或其他使用 CDC-ACM serial-over-USB 的板）他们实施的计划）。

较旧的 Arduino 板（例如您的 Duemilanove）使用 FTDI USB 串行芯片，这需要不同的 USB 操作。

您可能会在某处找到有关将 FT232 系列 USB 串行转换器与 Android 的 USB 主机 api 接口的东西（FTDI 部件广泛用于嵌入式系统，因此您会找到一些东西并不是不可能的），或者您可以得到一个 Uno 板来尝试你已经拥有的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T08:10:43.810

我知道已经有一段时间了，但无论如何，我做了一个简短的图书馆来做这件事。这就是你使用它的方式：

```
Arduino arduino = new Arduino(Context);

@Override
protected void onStart() {
    super.onStart();
    arduino.setArduinoListener(new ArduinoListener() {
        @Override
        public void onArduinoAttached(UsbDevice device) {
            // arduino plugged in
            arduino.open(device);
        }

        @Override
        public void onArduinoDetached() {
            // arduino unplugged from phone
        }

        @Override
        public void onArduinoMessage(byte[] bytes) {
            String message = new String(bytes);
            // new message received from arduino
        }

        @Override
        public void onArduinoOpened() {
            // you can start the communication
            String str = "Hello Arduino !";
            arduino.sendMessage(str.getBytes());
        }
    });
}

@Override
protected void onDestroy() {
    super.onDestroy();
    arduino.unsetArduinoListener();
    arduino.close();
} 
```

Arduino方面的代码可能是这样的：

```
void setup() {
    Serial.begin(9600);
}

void loop() {
    if(Serial.available()){
        char c = Serial.read();
        Serial.print(c);
    }
} 
```

有兴趣的可以查看**[github](https://github.com/omaflak/Arduino)**页面。

# javascript - Javascript：将值传递给具有数组属性的函数

> ID：14662075
> 
> 赞同：0
> 
> 时间：2013-02-02T12:52:29.087
> 
> 标签：javascript, jquery

对不起，我不擅长这个，但我想创建一个这样的函数

```
function show (message['head':'error','body':'msg'])
{ // 'error' and 'msg' and the default values
alert(message[head]);

}

show ({'head' : 'this is head', 'body' : 'this is body'}); 
```

上述方法正常工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T12:54:19.383

像这样：

```
function show (message)
{
    alert(message.head);
    // or
    alert(message['head']); // Note the quotes
} 
```

你的电话很好。

[正如大卫指出的那样](https://stackoverflow.com/a/14662097/157247)，要提供默认值，您可以使用[功能强大的`||`运算符](http://blog.niftysnippets.org/2008/02/javascripts-curiously-powerful-or.html)：

```
function show (message)
{
    var head = message.head || 'error',
        body = message.body || 'msg';

    alert(head);
} 
```

（上面的方法与 David 的方法略有不同，因为它避免更改`message`传入的对象，这通常不是一个好主意，因为函数不拥有对象，调用者拥有。）

这是有效的，因为如果`head`（例如）根本不在`message`对象上，它是错误的，因此`head = message.head || 'error'`最终分配`'error'`给`head`. 这是一个方便的技巧，但有一个陷阱：如果`head`可能已经有一个错误的值，而且这是有效的，你不想使用这个`||`技巧。相反，您可以使用`in`检查：

```
function show (message)
{
    var head = 'head' in message ? message.head : 'error',
        body = 'body' in message ? message.body : 'msg';

    alert(head);
} 
```

如果它存在，它将使用来自的值`message`，无论它是否是假的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:55:29.613

如果对象没有属性，则访问该属性将返回 value `undefined`。我们可以将它与逻辑 OR`||`运算符一起使用来为对象分配默认值。

```
function show(message) {
    message.head = message.head || 'error';
    message.body = message.body || 'msg';

    alert(message.head);
} 
```

如果`message.head`未定义，它将分配`"error"`给对象属性，否则将保留其值。

* * *

正如 Crower 指出的那样，这有一个潜在的“陷阱”，因为空字符串可以被推断为一个虚假值，从而导致不需要的默认值分配。使用这个版本来检查属性是否真的在对象上：

```
function show(message) {
    message.head = message.hasOwnProperty('head') ? message.head : 'error';
    message.body = message.hasOwnProperty('body') ? message.body : 'msg';

    alert(message.head);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T13:03:04.267

请检查[这个](http://jsfiddle.net/SLePB/)

并标记您满意的正确答案。

```
function show(message){
  alert(message['head']);
} 
```

# statistics - 压缩/加密数据中的熵和字节分布比较

> ID：14662077
> 
> 赞同：1
> 
> 时间：2013-02-02T12:52:32.757
> 
> 标签：statistics, distribution, entropy, chi-squared

我有一个问题困扰了我一段时间。

熵测试通常用于识别加密数据。当分析数据的字节均匀分布时，熵达到最大值。熵测试识别加密数据，因为该数据具有均匀分布 - 就像压缩数据一样，在使用熵测试时被归类为加密。

示例：一些 JPG 文件的熵是 7,9961532 Bits/Byte，一些 TrueCrypt 容器的熵是 7,9998857。这意味着通过熵测试，我无法检测到加密数据和压缩数据之间的差异。但是：正如您在第一张图片上看到的那样，显然 JPG 文件的字节不是均匀分布的（至少不像来自 truecrypt-container 的字节那样均匀）。

另一个测试可以是频率分析。测量每个字节的分布，例如执行卡方检验以将分布与假设分布进行比较。结果，我得到了一个 p 值。当我对 JPG 和 TrueCrypt 数据执行此测试时，结果不同。

JPG 文件的 p-Value 为 0，这意味着从统计上看分布不均匀。TrueCrypt 文件的 p 值为 0,95，这意味着分布几乎完全均匀。

我现在的问题是：有人能告诉我为什么熵测试会产生这样的误报吗？是表示信息内容的单位的比例（每字节的位数）吗？例如，p 值是否是一个更好的“单位”，因为规模更小？

非常感谢你们的任何回答/想法！

编辑：不幸的是我不能发布图片，因为我还没有获得 10 名声望 :(

# matlab - Matlab直方图

> ID：14662079
> 
> 赞同：0
> 
> 时间：2013-02-02T12:53:20.617
> 
> 标签：matlab, histogram

我在 Matlab 中绘制了一个直方图（比如一些随机数的 P(r)）。我现在如何获得与给定 r 值对应的 P(r) 值？我的意思是我需要与 MATLAB 中直方图的 x 轴上的给定值相对应的条形高度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:55:56.057

来自[Matlab 文档`hist`](http://www.mathworks.co.uk/help/matlab/ref/hist.html)：

> `[n,xout] = hist(...)`返回向量`n`并`xout`包含频率计数和 bin 位置。

换句话说，`hist`具有可选的输出参数，其中包含您需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:04:49.577

在我创建一些示例代码时，请参阅@Oli 已经回答了这个问题：

```
%# Generate random data
nPoints = 100;
data = rand(N,1);

%# Calculate histogram
[nInBin, binPos] = hist(data,20);

%#Extract P() from nInBin
P = nInBin / nPoints;

%# X position to look for histgram "height" in
posToLookFor = 0.4;

%# Find closest bin
[~, closestBin] = min(abs(binPos-posToLookFor));

%#Visualize
figure();
bar(binPos,P)
hold on;
plot([posToLookFor posToLookFor], [0 P(closestBin)],'r','linewidth',3) 
```

![在此处输入图像描述](../Images/1a8745ec837a8980030bbe653d855ab2.png)

# c - Flex/Bison：我如何拥有这个“SELECT 123 +”？

> ID：14662088
> 
> 赞同：0
> 
> 时间：2013-02-02T12:54:26.937
> 
> 标签：c, bison, flex-lexer

我创建了一个非常简单的 SQL 解析器，但是在模糊测试期间我遇到了这种情况：

```
SELECT   123     +      ,
K_SELECT INTEGER T_PLUS T_COMMA 
```

当然这是一个语法错误，但我不知道如何“捕捉”它。

它如何在“next_column_expression 来得太早”和“binary_expression 未完成”之间做出决定。我在 Java 项目上与 ANTLR3 合作过。但这完全不同。

这是骨架解析器规则：

```
/* be more versbose about error messages */
%error-verbose

/* keywords */
%token K_CREATE
%token K_FROM
%token K_INTEGER
%token K_SELECT
%token K_TABLE
%token K_TEXT
%token K_WHERE
%token K_VALUES
%token K_INSERT
%token K_INTO

/* variable tokens */
%token IDENTIFIER
%token INTEGER

/* fixed tokens */
%token T_ASTERISK
%token T_PLUS
%token T_EQUALS
%token T_END ";"
%token T_COMMA
%token T_BRACKET_OPEN
%token T_BRACKET_CLOSE

%token END 0 "end of file"

%%

input:
    statement {
    }
    END
;

statement:
    select_statement {
    }
    |
    create_table_statement {
    }
    |
    insert_statement {
    }
;

keyword:
    K_CREATE | K_FROM | K_INTEGER | K_SELECT | K_TABLE | K_TEXT | K_WHERE | K_VALUES | K_INSERT | K_INTO
;

table_name:
    error {
        // "Expected table name"
    }
    |
    keyword {
        // "You cannot use a keyword for a table name."
    }
    |
    IDENTIFIER {
    }
;

select_statement:
    K_SELECT column_expression_list {
        // "Expected FROM after column list."
    }
    error
    |
    K_SELECT error {
        // "Expected column list after SELECT."
    }
    |
    K_SELECT column_expression_list {
    }
    K_FROM table_name {
    }
;

column_expression_list:
    column_expression {
    }
    next_column_expression
;

column_expression:
    T_ASTERISK {
    }
    |
    expression {
    }
;

next_column_expression:
    |
    T_COMMA column_expression {
    }
    next_column_expression
;

binary_expression:
    value {
    }
    operator {
    }
    value {
    }
;

expression:
    value
    |
    binary_expression
;

operator:
    T_PLUS {
    }
    |
    T_EQUALS {
    }
;

value:
    INTEGER {
    }
    |
    IDENTIFIER {
    }
;

%% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:41:43.677

您需要了解 LR (shift-reduce) 解析，并且您需要了解 yacc 如何使用语法中的错误规则从错误中恢复。前者是一个大问题，并且有许多书籍涵盖理论和实践 PDA 和 shift-reduce 解析（经典，[Hopcroft & Ullman](https://rads.stackoverflow.com/amzn/click/com/0201441241)和[Aho，Sethi & Ullman](https://rads.stackoverflow.com/amzn/click/com/0201100886)是完整的，如果相当密集）。

一旦你理解了 shift-reduce 解析，yacc 错误恢复就相当简单了。基本上，每当它进入不能移动或减少当前令牌的状态时，它需要一系列简单的步骤来尝试恢复：

1.  它会弹出状态，直到达到可以转移特殊`error`标记的状态。如果当前状态可以转变，这可能是零弹出`error`。

2.  它移动错误标记，然后在目标状态中进行任何默认缩减。

3.  它会丢弃输入标记，直到找到可以在当前状态下处理的标记。`error`与状态丢弃一样，如果转移后的状态可以处理下一个令牌，则丢弃可能为零。

就是这样。

因此，如果我们查看您当前的语法和示例错误输入会发生什么，我们会发现：

1.  将`SELECT`令牌转换为状态`select_statement: K_SELECT ...`
2.  转移`123`令牌，将其简化为 a`value`并转移到状态`*expr: value ...`
3.  转移`+`令牌，将其简化为一个`operator`并转移到一个状态`binary_expression: value operator ...`
4.  看到令牌`,`并且在当前状态下不能移位或减少，因此发出语法错误。
5.  流行音乐国家正在寻找一个可以处理`error`. 前两个状态（来自上面的 3 和 2）不能这样被丢弃。下一个状态可以，所以我们最终处于一个状态`select_statement: K_SELECT error`
6.  那是一个默认的归约状态，所以它被归约到`select_statement`哪个被归约到`statement`哪个转移到一个状态`input: statement END`
7.  它开始丢弃输入标记，直到找到当前状态可以处理的标记，即只有`END`. 所以它会丢弃所有东西，直到它到达`END`或 eof。

现在你的问题似乎是，“我该如何做一些不同的事情？”

如果您想要“二进制表达式未完成”恢复，您可以添加如下规则：

```
binary_expression: value error 
```

这最终会成为上述`*expr: value`状态的一部分，因此错误恢复将停止在那里弹出并移动错误令牌，最终进入可以移动`,`令牌的状态。

每当您试图解开大型语法中的状态并了解错误恢复将做什么时，使用 -v 标志运行 yacc/bison 以生成`.output`包含所有状态的文件会非常有帮助。

# javascript - javascript:window.print() 在我有 1 页时打印 2 页

> ID：14662091
> 
> 赞同：4
> 
> 时间：2013-02-02T12:54:36.090
> 
> 标签：javascript, css, printing

我有一个简单的 HTML 文档，其中仅包含一个图像标签。我想在文档加载后打印图像。我的代码：

```
<body>    
    <img id="form1" src="form1.jpg" alt="form1" style="margin: 0 auto;display:block;" onLoad="javascript:window.print()" />
</body> 
```

它可以工作，但问题是它同时打印图像（网页）和另一张空纸，顶部只有一个文本，它给出了图像的地址和 html 标题。如何防止打印多余的纸张？

PS：我使用了 jquery 插件，如 PrintElement.js、jqPrint.js 等，但它们有同样的问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:33:38.307

您可以使用 CSS 来控制图像大小等进行打印 - 使用`@media print`

给图像一个`max-width`.

这样，您可以控制图像在页面上的呈现方式。例子：

```
@media print { 
    body img {
       width: 90%; max-width: 1048px; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:04:50.650

稍微缩小图像并以边距居中。

```
<img src="form1.jpg" width="90%" style="margin:auto;"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T13:24:27.213

您可以通过js制作一个iframe标签并将图像放在上面然后只打印iframe。

我希望它有效

```
<iframe id="iframeprint" style="display:none"></iframe> 
```

也许你需要这个 js 代码

访问 iframe 内部

```
document.getElementById('iframeprint').contentWindow.document.body.innerHTML=document.getElementById('form1'); 
```

仅打印 iframe

```
document.getElementById('iframeprint').contentWindow.print() ; 
```

# graphviz - DOT 语言是否支持变量/别名？

> ID：14662092
> 
> 赞同：37
> 
> 时间：2013-02-02T12:54:45.047
> 
> 标签：graphviz

我正在尝试打印出有向图，并且不断更改各种节点属性，例如颜色和形状。有没有办法使用定义一次并用于多个节点的变量？理想情况下，我想要这样的东西：

```
digraph g { 

building_color = "red"
land_color = "green"

farm  [ fillcolor=land_color]
barn  [ fillcolor=building_color]
house  [ fillcolor=building_color]

} 
```

所以我可以改变一次建筑颜色，而不必去每个节点。这可能吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-02T13:12:45.277

您可以定义**默认值**以避免重复：

```
digraph g{
   node[fillcolor=red];
   barn;
   house;
   ...
   node[fillcolor=green];
   farm;
   ...

   edge[color=red];
   barn -> house;
   edge[color=green];
   barn --> farm;
   house --> farm;
} 
```

*不支持*实变量。**

 ** * *

[`gvpr`](https://graphviz.gitlab.io/_pages/pdf/gvpr.1.pdf)一个更复杂的解决方法是使用**图形模式扫描和处理语言**。

`gvpr`读取和输出图形，并允许添加和修改图形、节点和属性。

例如，您可以将自定义信息存储在[`comment`](https://graphviz.gitlab.io/_pages/doc/info/attrs.html#d:comment)属性中，并让您的脚本根据该属性的内容执行操作。

[这个](https://stackoverflow.com/a/6687261/63733)和[这个](https://stackoverflow.com/a/7362207/63733)SO 答案包含`gvpr`脚本示例。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-05-20T07:37:15.053

最简单的解决方案是使用`m4`-[通用的文本到文本预处理器](https://en.wikipedia.org/wiki/GNU_m4)。

`SampleGraph.dot.m4`：

```
digraph g { 

   define(`building_style',`style=filled, fillcolor = "red"')
   define(`land_style',`style=filled, fillcolor = "green"')

   farm  [label="Farm", land_style]
   barn  [building_style]
   house [label="House", building_style]
} 
```

跑`m4 SampleGraph.dot.m4 > SampleGraph.dot`

结果`SampleGraph.dot`：

```
digraph g { 

   farm  [label="Farm", style=filled, fillcolor = "green"]
   barn  [style=filled, fillcolor = "red"]
   house [label="House", style=filled, fillcolor = "red"]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T18:57:10.213

您可以使用[**graphviz-py**](https://github.com/Alwinator/graphviz-py)，它允许您在 Graphviz 图表中执行 Python 代码。

## 例子

```
digraph g {
{{
building_color = "red"
land_color = "green"
}}

node[style=filled]

farm  [ fillcolor={{= land_color }}]
barn  [ fillcolor={{= building_color }}]
house  [ fillcolor={{= building_color }}]

} 
```

## 输出

[![输出](../Images/c40e2d5fd032f1d3dda286d634f5cc84.png)](https://i.stack.imgur.com/IeI6H.png)*

# xml - VB.NET - DataSet、DataGrid 和 XML - 选择表和行

> ID：14662093
> 
> 赞同：1
> 
> 时间：2013-02-02T12:54:47.510
> 
> 标签：xml, vb.net, datagrid, dataset

到目前为止，我一直在使用文本文件在我的应用程序中存储数据。它们是用逗号分隔的。我使用 ListView 和相当多的代码来呈现数据。

今天我了解了 DataSet 和 DataGrid 组件。我很想使用它们。然后我的数据可以存储在 XML 中，这很好，因为服务器也这样做。

不知道如何让它工作。我有一个简单的层次结构：

```
<myapp>
  <user>
    <firstname>John</firstname>
    <lastname>Doe</lastname>
  </user>
  <collection>
    <name>Beer cans</name>
    <item>
      <id>1</id>
      <name>Heineken</name>
    </item>
  </collection>
  <collection>
    <name>Coffee mugs</name>
    <item>
      <id>18</id>
      <name>Starbucks</name>
    </item>
  </collection>
</myapp> 
```

通常我会将集合元素包装在父元素中，但这似乎使 VB.NET 中的事情变得复杂。无论如何。我的问题是...

如果我的应用程序中有一个用户可以单击的集合列表，我希望在 DataGrid 中显示该集合中的所有项目。

到目前为止，我的代码在某种程度上选择了正确的集合，但我似乎无法访问这些项目本身，例如：

```
Dim DataSet As New DataSet
DataSet.ReadXml("c:\john.doe.xml")
MainGrid.DataSource = DataSet.Tables("collection").Select("name='" & selName & "'") 
```

（编辑：错字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:56:58.963

```
 If NetworkInterface.GetIsNetworkAvailable Then
        Dim cl As New WebClient
        AddHandler cl.DownloadStringCompleted, AddressOf cl_DownloadStringCompleted
        Dim url As String = "Your link in here"
        cl.DownloadStringAsync(New Uri(url))
    Else
        MessageBox.Show("check your internet connection first")
    End If

Private Sub cl_DownloadStringCompleted(sender As Object, e As System.Net.DownloadStringCompletedEventArgs)
Dim doc = XDocument.Parse(e.Result)
For Each result In doc.<myapp>.<user>
        TextBlock1.Text = TextBlock1.Text & Environment.NewLine & result.<firstname>.Value
    Next
End Sub 
```

我希望它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:36:45.410

尝试这个 ：

```
Dim CollectionTable As DataTable = DataSet.Tables("collection")
Dim CollectionSelection As DataRow() = CollectionTable.Select("name='" & selName & "'")
Dim CollectionID As Integer

If CollectionSelection.Count = 1 Then
    CollectionID = CollectionSelection(0)("collection_id")
Else
    Exit Sub
End If

MainGrid.DataSource = DataSet.Tables("item").Select("collection_id =" & CollectionID).CopyToDataTable() 
```

您的 DataSet 正在读取您的 xml 并正在创建 3 个表`user`，`collection`并且`item`。该`item`表有 3 列`id` `name` `collection_id`。所以我所做的是根据集合名称选择 collection_id 并根据该 ID 选择项目。请注意，集合表具有列`name`和`collection_id`。

# java - Guava EventBus Google App Engine 是否友好？

> ID：14662099
> 
> 赞同：3
> 
> 时间：2013-02-02T12:55:47.347
> 
> 标签：java, multithreading, google-app-engine, guava

GAE 限制`Thread`在运行时创建新实例。番石榴有一个很好的[`EventBus`](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)，我想我想在即将到来的 GAE 项目中使用它。

但是，如果我要遇到任何与线程相关的访问限制，我什至不想走这*条路*。所以我问：番石榴是否`EventBus`利用线程创建？**它对 GAE 友好吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T13:25:58.850

看起来您可以[`AsyncEventBus`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/AsyncEventBus.html)使用[GAE 线程工厂](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager#currentRequestThreadFactory%28%29)创建一个：

```
//GAE Thread Factory
ThreadFactory factory = ThreadManager.currentRequestThreadFactory();
Executor executor = Executors.newCachedThreadPool(factory)
//AsyncEventBus
EventBus eventBus = new AsyncEventBus(executor); 
```

另请参阅：[https ://developers.google.com/appengine/docs/java/runtime](https://developers.google.com/appengine/docs/java/runtime)

# jsplumb - 无法在 JSPlumb 中创建直线连接

> ID：14662104
> 
> 赞同：4
> 
> 时间：2013-02-02T12:56:32.417
> 
> 标签：jsplumb

我正在尝试在 JSPlumb 中创建两个端点之间的直线连接。当我尝试连接到端点时，源点被拖动而不是创建直线连接。

这里的小提琴：http: [//jsfiddle.net/dutchman71/aMksZ/2/](http://jsfiddle.net/dutchman71/aMksZ/2/)

任何帮助表示赞赏。

```
 var endpointOptions = { 
                    anchor:"BottomCenter",
                    maxConnections:1, 
                    isSource:true, 
                    isTarget:true, 
                    endpoint:["Dot", {radius:5}], 
                    paintStyle:{fillStyle:"#5b9ada"},
                    connectorStyle : {  lineWidth: 3, strokeStyle:"#5b9ada" },
                    connector : new jsPlumb.Connectors.Straight(),
                    setDragAllowedWhenFull:true,
                    connectorOverlays:[ 
                        [ "Arrow", { width:20, length:30, location:1, id:"arrow" } ], 
                        [ "Label", { label:"", id:"label" } ]
                    ]               
                    }

            jsPlumb.bind("ready", function() {

                    jsPlumb.addEndpoint('block1', endpointOptions);

                    jsPlumb.addEndpoint('block2', endpointOptions);

                    jsPlumb.draggable('block1');
                    jsPlumb.draggable('block2');
            }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T14:38:05.127

是的，所以看来我可能已经找到了答案（请参阅[文档](http://www.jsplumb.org/doc/connectors.html)）。替换这一行：

```
connector: new jsPlumb.Connectors.Straight() 
```

用这条线：

```
connector: ["Straight"] 
```

# android - 睡眠后重新加载应用程序

> ID：14662108
> 
> 赞同：1
> 
> 时间：2013-02-02T12:56:53.573
> 
> 标签：android, libgdx

我在 libgdx 论坛上找到了这个帖子，我也遇到了同样的问题……</p>

我用libGDx，2012年8月做了一个游戏。在这个游戏中，当我按下手机的待机按钮（屏幕关闭）然后再次按下它时，屏幕和按下之前一样待机按钮。在代码中我什么都没写，现在我想制作另一个游戏（使用初始屏幕中的 assetsManager 上传资源），当我按下手机的待机按钮然后再次按下它时游戏重新开始！所以我再次看到启动画面

我用过这样的东西：

```
@Override
public void resume()
{
    super.resume();
    this.setScreen(mainMenuScreen);
} 
```

但是不行。。

有什么解决办法吗？非常感谢！！

PS：这是整个游戏类..

```
public static Screen gameScreen;
public static Screen mainMenuScreen;
public static Screen chooseTimeScreen;
public static Screen creditsScreen;
public static AssetManager manager = new AssetManager();;
public static SpriteBatch batcher;
boolean create = false;

@Override
public void create()
{

    Gdx.app.log("----------------", manager + "");

    if (manager == null)
    {
        manager = new AssetManager();
        batcher = new SpriteBatch();
        setScreen(new SplashScreen(this, manager));
    }
    else
    {
        batcher = new SpriteBatch();
        setScreen(mainMenuScreen);
    }

}

@Override
public void dispose()
{
    super.dispose();
    manager.dispose();
    batcher.dispose();

    if(gameScreen != null) gameScreen.dispose();
    if(mainMenuScreen != null) mainMenuScreen.dispose();
    if(chooseTimeScreen != null) chooseTimeScreen.dispose();
    if(creditsScreen != null) creditsScreen.dispose();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:59:43.227

还要检查您在该`onCreate`方法中所做的事情。这有时会在屏幕从睡眠中唤醒时调用。如果您要重新创建启动画面，或者在此处重置它，这将是一个问题。

另外，你的代码状态`resume()`，不应该是`onResume()`

为了避免在执行以下操作中重新创建您的资产管理器`onCreate`：

```
if(manager == null)
    manager = new AssetManager(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T07:51:38.037

一个解决方案是

1.  project.properties 文件修改

    目标=android-14

2.  AndroidManifest.xml 文件修改

    android:configChanges="keyboard|keyboardHidden|orientation|screenSize"

    在 android:configChanges 添加 screenSize

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:42:12.633

您正在使用`static`变量来跟踪需要在应用程序恢复时重新加载的状态。由于 Android 生命周期的工作方式，“静态”变量引用将（通常但不总是）在简历中保持有效，但实际的 Android“活动”将被销毁。您应该重新创建简历上的所有资源。（在你的情况下，我认为你没有创建它们，但你应该，然后你使用它们，它们指的是旧的，现在死的 Activity 的陈旧状态。）

有关说明，请参阅[Android 静态对象生命周期](https://stackoverflow.com/questions/1944369/android-static-object-lifecycle-application-act-crazy)。

简短的回答是，对于 libGDX，除非您完全确定自己在做什么，否则**不要**使用`static`变量来跟踪应用程序状态，始终（重新）在`create`方法中创建您的状态。

# jquery - Asp.net Mvc 4 Awesome PopupFormAction 只有一个按钮

> ID：14662109
> 
> 赞同：2
> 
> 时间：2013-02-02T12:56:59.227
> 
> 标签：jquery, asp.net-mvc-4, asp.net-mvc-awesome

如何在 Awesome Popup Form Action 中隐藏 Ok 按钮

这是我的代码：

```
@{
    var DetailFormat = string.Format("<button type='button' class='awe-btn' onclick=\"{0}\"><span class='ico-edit'></span></button>",
        Url.Awe().PopupFormAction().Title("Détail article").CancelText("Fermer").Height(500)
            .Url(Url.Action("Details", new { Id = ".Id" })));
} 
```

我想在标题为“详细信息”的 PopupForm 中隐藏“确定”按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:04:48.410

使用`.hide()`：

```
$('.awe-btn').hide(); 
```

事实上，`you have to mention your situation or scenario`你想在哪里以及如何隐藏它。

## 更新：

```
$('.awe-btn[title="Détail"]').hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T23:36:34.687

在最新版本（3.5）中，您可以调用

```
.ShowDefaultButtons(false) 
```

这在向导演示中使用[http://demo.aspnetawesome.com/WizardDemo](http://demo.aspnetawesome.com/WizardDemo)

并在调用`.Button`后添加您需要的任何按钮

# ffmpeg - ffmpeg：在这个例子中设置什么速率

> ID：14662115
> 
> 赞同：0
> 
> 时间：2013-02-02T12:58:00.903
> 
> 标签：ffmpeg

我正在用 ffmpeg、多个图像和一个 wav 文件编译一个视频。它被正确编译，但图像似乎在 wav 完成之前结束。基本上最后几帧是空白的。是否可以应用计算来设置帧速率等，以免发生这种情况？Wav 持续时间：60 秒图像数量：175 使用的命令：

```
ffmpeg -r 5 -i img%d.jpg -i audio.wav -r 30 video.mov 
```

我应该在这里使用什么费率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:07:33.553

如果我理解正确，您需要 175 张图像来填充 60 秒，所以您可能应该使用：

```
ffmpeg -r 5 -i img%d.jpg -i audio.wav -r 175/60 video.mov 
```

# grails - Grails：处理具有未知数量的键值对的发布请求

> ID：14662119
> 
> 赞同：0
> 
> 时间：2013-02-02T12:58:14.103
> 
> 标签：grails, http-post

我正在编写一个能够处理不同类型的发布请求的控制器。

因此，我希望能够获取请求中键值对的数量，然后将它们作为某种形式的对象（列表或某种迭代器）检索，以便我可以遍历它们检索它们的键和值并妥善处理。

如下所示：

```
def sz = request.size  // may or may not be necessary, but would still like to know how
def keyValPairs = request.listOfPosts
for (def keyVal : keyValPairs) {
    def key = keyVal.getKey();
    def val = keyVal.getVal();
    doSomething(key, val);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:24:02.413

这里要提几件事。首先，这一切都取决于 POST 数据的编码。例如，如果您以 JSON 格式发送数据，则将其转换为地图与您将其发送为不同的格式`Content-Type: application/x-www-form-urlencoded`（如果您从 HTML 表单发送数据就是这种情况）。

如果后者是真的，你唯一需要做的就是使用`getParameterMap()`from plain old [`ServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29)。Grails 仅覆盖此方法以提供与路由完美配合的数据结构，即[GrailsParameterMap](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/servlet/mvc/GrailsParameterMap.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:14:52.380

所以一个示例解决方案是：

```
def controllerFunction() {

    def enu = request.getParameterMap();
    String msg = "";

    for (def obj : enu) {
        msg += "\n<br/> Object key: " + obj.key;
        msg += "\n<br/> Object value: " + obj.value[0]; // [0] seems to remove some problematic square brackets that wrap around the value
        msg += "\n<br/> ";                  
    }

    render rtn; 
} 
```

# iphone - 核心数据和线程

> ID：14662120
> 
> 赞同：4
> 
> 时间：2013-02-02T12:58:30.777
> 
> 标签：iphone, ios, ipad, core-data, thread-safety

我正在开发一个使用核心数据的应用程序，我知道这不是线程安全的，但很难理解如何正确管理它。让我解释一下我到目前为止...

我创建了一个单例来启动托管对象，然后可用于所有其他类，这似乎工作正常，因为所有类都接收到相同的托管对象地址。

然后我有两个按此顺序执行的类...

1.  数据加载。这将获取记录计数，如果为零则加载核心数据库。
2.  然后显示在步骤 1 中存储的数据的表格视图。

我的问题是第 1 步。总是返回零记录，第 2 步。正在工作并返回正确的记录数。

已经对 1\. 的问题进行了一些测试。由于它正在运行的线程，如果我在创建托管对象的同一个线程上发送请求，它就可以完美地工作。

那么为什么它在第 1 类中。我必须确保请求在正确的线程上，但在第 2 类中。它只是工作，或者只是纯粹的运气。是否有推荐和记录的线程和核心数据方法？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T13:09:38.090

Core Data 中并发的黄金法则是：**每个 NSManagedObjectContext 只能从一个线程访问——它被创建的线程**。此外，托管对象只能与您获取它的 MOC 一起使用 - 不能将其传递给其他 MOC！

但是您可以在线程之间共享一个持久存储协调器，因为每个 MOC 在使用它时都会锁定 PSC - 所以一个常见的设置就是为多个 MOC 设置一个 PSC。

更多信息在这里：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)

如果您的情况 2\. 在使用不同的线程时似乎可以正常工作，我会说这更多地取决于运气，并且这并不是正确的做法。不要依赖运气，遵循我上面提到的规则，一切都会好起来的。

**其他相关阅读：**

[CoreData 是什么意思不是线程安全的？](https://stackoverflow.com/questions/4545531/what-is-meant-by-coredata-is-not-thread-safe)

[http://www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

[http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)

[http://digitalflapjack.com/blog/2010/jun/11/parallelcoredata/](http://digitalflapjack.com/blog/2010/jun/11/parallelcoredata/)

[http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/](http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/)

**作为一般规则**，值得记住的是，当 API 或文档说“不要做 X”时，这**并不**意味着每次做 X 都会失败或遇到问题——它只是意味着它可能会回到一天缠着你。不要让事情碰运气，找出你被允许做的事情（API 文档等）然后去做。

# javascript - 产生特定频率的声音

> ID：14662131
> 
> 赞同：4
> 
> 时间：2013-02-02T12:59:33.850
> 
> 标签：javascript, audio

我找到了这个库：[http](http://codebase.es/riffwave/) ://codebase.es/riffwave/ ，它在 javascript 中即时生成声音。

我想要的是具有生成特定频率的正弦波的功能。

但是我们使用这个库的方式需要大量的数学运算，我无法让它发挥作用。

我试过

```
for(var i=0;i<10000;i++)data.push(127*(Math.sin(2*Math.PI*f*i))); 
```

但它没有用。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:52:57.790

试试这个：

```
var freq = 440;  // Frequency (cycles per second)
var rate = 44100;  // Sample rate (samples per second)
for (var i = 0; i < 10000; i++) {
    var time = i / rate;       
    data[i] = 128 + Math.round(127 * (Math.sin(2 * Math.PI * freq * time)));
} 
```

# php - 使用 AJAX 上传文件 - xhr

> ID：14662132
> 
> 赞同：0
> 
> 时间：2013-02-02T12:59:35.940
> 
> 标签：php, xmlhttprequest

我正在尝试使用 AJAX 上传文件，但我的输出始终为空...

那么代码有什么问题或缺少什么？谢谢！

**HTML：**

```
<form id="data" method="post" enctype="multipart/form-data">
    <input name="file" type="file" />
    <input type="button" value="Upload" />
</form>
<progress></progress> 
```

**JS：**

```
$(":file").bind('change blur', function(e) {
    var file = this.files[0];
    name = file.name;
    size = file.size;
    type = file.type;
    console.log(name);
    console.log(size);
    /**
        OUTPUT:
            2-years-anniversaryv1.png jquery.form.img.js:10
            18407 
    */
    var formData = new FormData($(this)[0]);
    $.ajax({
        url: '/upload',
        type: 'POST',
        xhr: function() {
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload) {
                myXhr.upload.addEventListener('progress', progress, false); 
            }
            return myXhr;
        },
        success: function(result)
        {
            console.log($.ajaxSettings.xhr().upload);
            alert(result);
        },
        data: formData,
        cache: false,
        contentType: false,
        processData: false
    });
});

function progress(e){
    if(e.lengthComputable){
        $('progress').attr({value:e.loaded,max:e.total});
    }
} 
```

**PHP：**

```
private function upload_file() {

   $this->getLog(print_r($_FILES,true));

   $returnData = array("file" => 'asd');

   echo json_encode($returnData);

} 
```

**获取日志输出：**

```
Array
(
)

Array
(
)

Array
(
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:57:59.897

如果您通过 AJAX 上传，则需要使用以下方式访问文件的内容`fopen()`：

```
<?php
$f = fopen('php://input','rb');
$target = fopen('file_name_here','wb');
while($chunk=fread($f,8192)){
    fwrite($target,$chunk);
}
fclose($f);
fclose($target); 
```

此外，您需要使用`FileReader`该类读取文件的内容：

```
var file = this.files[0];
var reader = new FileReader();
reader.onload = function(e){
    var xhr = new XMLHttpRequest();
    xhr.onload = function(){
        //upload finished
    }
    xhr.open('POST','path/to/upload.php',true);
    xhr.send(e.target.result);
}
reader.readAsArrayBuffer(file); 
```

# c - 压缩结构中的变量可以原子读取吗？

> ID：14662135
> 
> 赞同：3
> 
> 时间：2013-02-02T12:59:44.193
> 
> 标签：c, arm, atomic

我正在为 Cortex M0 (ARM) CPU 编写代码，并且 32 位读/写是原子的。现在我想知道当我读/写 8bit/16bit 变量时，它们是否也保证是原子的？我的直觉说是的，因为它们在内部与 32 位部分对齐，所以 CPU 不可能需要两条单独的指令来读/写它们。

但是我也碰巧在打包结构中存储了很多变量以节省内存，并且变量可能未在 32 位边界上对齐，因此 16 位值的每一半可能位于不同的部分中。

那么，当我使用打包结构时，我是否会丢失原子操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:33:54.937

使用打包结构，您将永远不会对与内存单元边界重叠的字段进行读/写原子操作。这意味着只有 8 位操作保证是原子的，否则它取决于你的字段的内存对齐方式。

# php - PHP如果没有选择图像如何使用旧图像

> ID：14662141
> 
> 赞同：0
> 
> 时间：2013-02-02T13:00:48.670
> 
> 标签：php, file-upload, if-statement, image-uploading

如果没有选择图像，如何使用旧图像？

当有人更新他的个人资料但没有选择要更新的图像时，它是个人资料页面，那么旧图像应该保留在那里..

应该是这样的if-else语句还是有其他方式？

```
 //check if file is selected.
    if (empty($_FILES['profilepic']))
    {
                 //if file selected this code should run

         $fileselected="file selected";
    }
    else
    {
                //this executes if file not selected
        $fileselected="No File Has Been Selected";
    }

echo $fileselected; 
```

应该怎么编码？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:26:54.700

感谢@Lion

```
if($_FILES["profilepic"]["error"])
{//if the file is not selected} 
else {//if the file is selected} 
```

对我来说几乎有用.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T08:08:39.573

```
if(empty($_FILES['image']['name']))
{
    $image=$row['image'];
    //upload from root folder//
    $upload=$_SESSION['KCFINDER']['uploadURL'] = '/images'.$image;
    upload script
} else {
    normal upload script
} 
```

# php - 使用常量作为类名

> ID：14662144
> 
> 赞同：6
> 
> 时间：2013-02-02T13:01:22.530
> 
> 标签：php, language-construct

我需要使用常量作为类名来访问此类静态属性，即

```
class a {

    public static $name = "Jon";

}

define("CLASSNAME", "a");

echo CLASSNAME::$name; 
```

这将返回错误，该类`CLASSNAME`不存在。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T13:14:30.907

反射是可能的：

```
class a {

    public static $name = "Jon";

}

define("CLASSNAME", "a");

$obj = new ReflectionClass(CLASSNAME);
echo $obj->getStaticPropertyValue("name"); 
```

如果这是一个好的设计选择是另一个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:09:35.563

使用 PHP 的绝对混乱的解引用：

```
$CLASSNAME = 'a';
$a::$name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T14:26:32.687

我正在研究这个问题，因为该课程基于必须给出的特定上下文。所以我在我的类中创建了一个函数，它将返回你需要的类，如下所示：

```
/**
 * Instantiate a class by class name in variable
 *
 * @param string $className The name of the class
 * @return mixed The instantiated class
 */
protected function getClass($className)
{
    return new $className;
} 
```

因此，`$class = new $this->getClass(static::CLASSNAME);`当您在当前类中定义一个包含您要实例化的类的名称的常量时，您可以使用它来调用它。在您的情况下，您可以在没有 ' `static::`' 或您想使用的任何变量的情况下使用它。不要忘记实现一些错误处理。

# django - Twitter Bootstrap 不能与 Django 一起使用？

> ID：14662145
> 
> 赞同：1
> 
> 时间：2013-02-02T13:01:35.720
> 
> 标签：django, twitter-bootstrap

我已经从网站上下载了引导文件并创建了一个 html 文档来测试引导程序。我已将所有这些文件保存在我的 Django 应用程序的模板文件夹中。现在，当我直接使用浏览器打开 html 文件时，引导程序可以工作，但是当我使用 Django 并使用服务器访问它时，它不再工作。知道问题可能是什么吗？我会向任何请求它的人提供代码。

我现在尝试了这两个：

*   [Django：CSS 不工作](https://stackoverflow.com/questions/13446325/django-css-is-not-not-working)
*   [如何在 Django 中使用 Bootstrap？](https://stackoverflow.com/questions/10157059/looking-for-an-explanation-of-different-bootstrap-apps-for-django)

不幸的是，它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:41:51.047

我一直在我的 django 项目中使用 bootstrap，因为我是一个糟糕的前端，而且一开始我几乎遇到了同样的问题。问题是您的模板目录并不打算由您的 django 应用程序提供服务，而需要样式表的是客户端浏览器。您的应用程序需要在客户端工作的那些文件称为静态文件，需要分开提供。

[简而言之，您可以在此处](https://docs.djangoproject.com/en/dev/howto/static-files/)找到有关管理静态文件的所有信息，您需要做的是：

1.  将您的静态文件放在安全目录中，可以是`PROJECT'S_ROOT/public/static_files`.
2.  将该目录（使用完整路径）添加到您的`STATICFILES_DIRS`in `settings.py`.
3.  设置`STATIC_ROOT`和`STATIC_URL`
4.  使用`urls.py`

您选择使用引导程序是明智的 :)，一个人不能把所有事情都做得很好。另一个建议是使用这个[django-boilerplate](https://github.com/martinogden/django-boilerplate)，它具有所有这些常见的小困难设置，并且具有更漂亮且更面向生产的文件夹结构。

# mysql - 如何在 MySQL 中拖动平均结果直到添加新值？

> ID：14662146
> 
> 赞同：1
> 
> 时间：2013-02-02T13:01:46.903
> 
> 标签：mysql

我正在尝试建立一个包含销售额和平均销售额的表格。

每一行都必须是自然日，所以周末将没有销售。由于我知道避免周末来计算销售平均值的事实，我使用两个查询并链接结果。

一切都很顺利，除了我希望查询保留周末的最后一个销售平均值，如下所示，与去年 2 月的销售情况一样：

```
What I get:           What I would like:

day   sales     avg   day   sales     avg
-------------------   -------------------
28   57,544  52,289   28   57,544  52,289
27   24,585  52,013   27   24,585  52,013
26        0       0   26        0  53,537    
25        0       0   25        0  53,537    
24   64,494  53,537   24   64,494  53,537
23   41,593  52,892   23   41,593  52,892
22  119,473  53,598   22  119,473  53,598
21   61,368  49,207   21   61,368  49,207
20   22,739  48,338   20   22,739  48,338
19        0       0   19        0  50,307    
18        0       0   18        0  50,307    
17   60,764  50,307   17   60,764  50,307
16   28,227  49,436   16   28,227  49,436
15   47,697  51,364   15   47,697  51,364
14   21,423  51,730   14   21,423  51,730
13  119,182  55,098   13  119,182  55,098
12        0       0   12        0  47,087    
11        0       0   11        0  47,087    
10   26,382  47,087   10   26,382  47,087
 9   62,140  50,045    9   62,140  50,045
 8   76,742  48,029    8   76,742  48,029
 7   90,080  42,287    7   90,080  42,287
 6   27,865  30,339    6   27,865  30,339
 5        0       0    5        0  31,163
 4        0       0    4        0  31,163
 3   26,577  31,163    3   26,577  31,163
 2   50,259  33,456    2   50,259  33,456
 1   16,653  16,653    1   16,653  16,653
-------------------   ------------------- 
```

这是我的代码示例：

```
select q0.day,
q1.net,
q2.med
from
(
select day(date) as day
from dates
order by date desc
) as q0
left join
(
select day(date) as day,
▸   sum(sales) as net
▸   from file
▸   group by date
) as q1
on q0.day=q1.day
left join
(
select day(q20.date) as day,
avg(q21.neto) as med
from
▸   (select date
▸   from file
▸   group by date
▸   ) as q20,
▸   (select date,
▸   sum(sales) as net
▸   from file
▸   group by date
▸   ) as q21
where q20.date >= q21.date
group by q20.date
) as q2
on q0.day=q2.day 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:03:34.297

试试这个查询：

```
SELECT D.day AS day,
       SUM(CASE WHEN N.day = D.day THEN N.net ELSE 0 END) AS net,
       AVG(N.net) AS avg
FROM dates D
LEFT JOIN (SELECT day, SUM(sales) AS net
           FROM file F
           GROUP BY day) N
ON N.day <= D.day
GROUP BY D.day
ORDER BY day DESC 
```

它的工作原理是在文件表中查找每一天的净销售额，然后在加入日期表后选择日期、当天的总和以及截至当天的非空值的平均值。

要对其进行测试：请参阅此 SQLfiddle：[http ://sqlfiddle.com/#!2/b7271/3/0](http://sqlfiddle.com/#!2/b7271/3/0)

# c# - 本地代理服务器的良好缓冲区大小

> ID：14662148
> 
> 赞同：0
> 
> 时间：2013-02-02T13:01:52.147
> 
> 标签：c#, http, proxy, protocol-buffers

我正在研究用 c# 编写的本地代理服务器的良好缓冲区大小。缓冲区是一个字节数组，用于存储接收到的 HTTP-Response 和 HTTP-Request 部分。我知道，它不应该太小（由于 socket.receive 调用的数量不断增加）。如果我选择的数字太大，它也会降低性能（我在某处读过，但不记得原因）。你能告诉我一个好的缓冲区大小吗？引用一个著名的网站会很好吗？

# c - 为什么网卡可以有可变的mac地址？

> ID：14662151
> 
> 赞同：-2
> 
> 时间：2013-02-02T13:02:02.143
> 
> 标签：c, networking, ip, virtualization, ethernet

为了在网络上唯一标识一个网卡，制造商会为每个网卡分配一个唯一的 MAC 地址，并且它是不可更改的。我们称这种类型的mac地址为“永久mac地址”。我能理解它的必要性。

不过，还有另外一种mac地址：“当前mac地址”；它可以编程更改；我无法理解它的必要性。

根据维基百科，当前的mac地址可用于网络虚拟化和“mac spoofing”。我认为这没有必要。

如果要在真实网卡上做一个虚拟网卡，假设真实网卡的mac地址是“id1”，虚拟网卡的mac地址是“id2”，那么它们可以同时接收/响应目标地址为“id1”的两个帧”或“id2”。通过这种方式，真正的 NIC 不必需要当前的 mac 地址。

如果实现了一个虚拟网卡，那么“mac 欺骗”也很容易实现。

我对么？

PS：下面的文章给出了更改mac地址的一些原因：

[http://blog.technitium.com/2011/06/why-you-need-to-change-mac-address.html](http://blog.technitium.com/2011/06/why-you-need-to-change-mac-address.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:15:47.550

制造商提供的 MAC 地址是唯一标识物理网卡的地址 - 它通常刻录在设备 ROM 中。任何其他 MAC 都是纯虚拟的，可以添加并由运行设备的 SW 堆栈使用。没有规则如何做到这一点，只要 2 个通信方就包含可用于虚拟化的附加 MAC 地址（es）的协议达成一致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:05:42.760

是的，MAC 欺骗很容易，因为您需要做的就是修改您发送的以太网帧中的[相关字段](http://en.wikipedia.org/wiki/Ethernet_frame)。

# jsf - JSF javax.servlet.ServletException：组件的重复 ID wdForm：j_id205

> ID：14662153
> 
> 赞同：1
> 
> 时间：2013-02-02T13:02:14.073
> 
> 标签：jsf, richfaces

在我的应用程序中，在其中一个页面中，我有几个数据输出和数据迭代组件。此页面还包含几个弹出模型面板。每个组件都是使用其唯一 ID 创建的。该页面包含几个独立的表单来提交组件。提到的页面是我在应用程序中的主页。当我进入页面时，它会将我重定向到前面提到的主页。最初，当我进入页面时，它可以正常工作。但是，当我浏览其他页面并返回主页时，我遇到了“组件 ID 重复”错误。我试图通过谷歌搜索和阅读其他表格来解决这个问题，但我无法获得明确的答案。我该如何解决它，我应该彻底考虑什么标准。任何帮助将不胜感激。深深的感谢...

# symfony - 表单占位符中的翻译

> ID：14662157
> 
> 赞同：0
> 
> 时间：2013-02-02T13:03:08.600
> 
> 标签：symfony, translation

使用symfony2.1。

我确实在 Form/RegisterUser.php 中构建了一个表单

```
public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder->add(
        'email',
        'email',
        array('attr' => array('placeholder' => 'email.placeholder')));
    $builder->add(
        'password',
        'repeated',
        array(
            'first_name' => 'password',
            'second_name' => 'confirm',
            'type' => 'password',
            'invalid_message' => 'register.password.repeat', ));
    $builder->add("t_and_c", "checkbox", array("mapped" => false, ));

    // "True" validator on the form for t&c
    $builder->addValidator(new CallbackValidator( function(FormInterface $form) {
        if (!$form["t_and_c"]->getData()) {
            $form->addError(new FormError('Please accept the terms and conditions in order to register'));
        }
    }));
}

/**
 * Returns the default options for this form type.
 * @param array $options
 * @return array The default options
 */
public function getDefaultOptions(array $options) {
    return array('data_class' => 'Frontend\AccountBundle\Entity\User');
} 
```

在 app/Ressources/translation/validators.LANG.yml 中：

```
<trans-unit id="6">
    <source>email.placeholder</source>
    <target>Enter email.</target>
</trans-unit>
<trans-unit id="12">
    <source>register.password.repeat</source>
    <target>Passwords don't match.</target>
</trans-unit> 
```

字段 invalid_message 将被翻译，而不是字段 email.placeholder。有错误吗？我不使用树枝并进行正常渲染。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:40:48.430

翻译后的错误消息会像您做的那样进入您的 validators.LANG.yml。但是其他所有内容都需要进入您的**messages.LANG.yml**。

另外，我对您如何格式化 yml 感到有些困惑。通常你会这样写：

```
email:
    placeholder: Enter email.

register:
    password:
        repeat: Passwords don't match 
```

# jquery - json函数不返回数据

> ID：14662160
> 
> 赞同：0
> 
> 时间：2013-02-02T13:03:53.190
> 
> 标签：jquery, json

我有以下 Javascript 函数：

```
function GetUniversity()
{       
    $.getJSON(AddressAccess+"Home/university/format/json",
        function(data) 
        { 
            data = data[0];
            return data;
        }); 
} 
```

现在，当我在函数中测试数据时，数据变量肯定有从 url 返回的数据。现在这是我调用此函数的代码：

```
$(document).on('pagebeforeshow','#searchpage',
                    function()
                    {
                        var UniveristyDat = null;
                        UniveristyData = GetUniversity();
                        alert(UniveristyData.Name);
                        var out = '';
                        for(i in UniveristyData)
                        {
                            out+= i + ' ' + UniveristyData[i] + "\n";
                        }
                        alert(out);

                    }
              ); 
```

现在从理论上讲，UniveristyData var 应该返回了 contense，但由于某种原因它为 null。不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:10:13.317

调用`$.getJSON()`是异步的。当请求完成时，您传递给它的函数将被执行。但是，其余代码会立即进行评估。因此，您的`GetUniversity()`函数不会产生任何返回值，您可以使用。

为了解决这个问题，您有 2 个选项：

1.  （更糟）[`$.ajax`](http://api.jquery.com/jQuery.ajax/)改用并`async: false`在选项中设置。这将保持 JavaScript 的执行，直到请求完成。但是要小心，因为这意味着您的整个页面在此期间都无法使用！
2.  （更好）将所有相关功能传递到`$.getJSON`. 当请求完成并且您的代码/页面的其余部分在此期间可以正常工作时，它将被执行。

```
function GetUniversity()
{       
    $.getJSON(AddressAccess+"Home/university/format/json",
        function(data) 
        { 
            var UniveristyData = data[0];
            alert(UniveristyData.Name);
            var out = '';
            for(i in UniveristyData) {
              out+= i + ' ' + UniveristyData[i] + "\n";
            }
            alert(out);
        }); 
}

$(document).on('pagebeforeshow','#searchpage', GetUniversity ); 
```

# java - 将动态值传递给路由 URI

> ID：14662161
> 
> 赞同：1
> 
> 时间：2013-02-02T13:04:06.543
> 
> 标签：java, playframework, playframework-1.x

我正在尝试根据文本框的内容将动态值发送到 Routes URI 路径，但是当我尝试时，它以 null 的形式出现。

这是我尝试过的：

```
<form action="@{Application.hello(myName)}" method="get">
Name: <input type="text" name="myName">
<input type="submit" value="Submit">
</form> 
```

我希望将文本框中输入的值传递给路由文件，但它不起作用。如果我传递一个常量字符串，例如：

```
<form action="@{Application.hello('John')}" method="get">
Name: <input type="text" name="myName">
<input type="submit" value="Submit">
</form> 
```

然后我的代码工作正常，但我不想要一个常数值；我希望在路由 URI 路径中传递文本框值。

**编辑**

使用上面的代码，每次单击按钮并提交表单时，URL 都会包含名称，`/.../John`因为我已经对其进行了硬编码。

我想要实现的不是将名称硬编码为`John`. URL 中的名称将来自用户在文本框中输入的内容。例如，如果用户输入的名称是，`Mike`那么 URL 应该是`/.../Mike`基于用户文本框输入的等等。

简而言之，我不想将值硬编码为`John`但愿意根据文本框输入使其动态化。

请让我知道如何做到这一点。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:51:23.033

您正在尝试路由到尚未指定的用户名的 URL。

在页面加载时，当用户没有将 John 指定为名称时，Play 不知道您想要 hello /name/John。

为了让您做您想做的事情，您需要使用 javascript 在提交时更改表单操作 url 以将操作 url 替换为`/name/(value of myName input field)`

或者，您可以将其拆分为两个单独的控制器操作。

路线：

```
POST /greet  Application.greet
GET  /users/{myName}  Application.hello 
```

应用程序.java

```
// accepts the form request with the myName paramater
public static void greet(String myName) {
    // redirects the user to /users/{myName}
    Application.hello(myName);
}

// welcomes the user by name
public static void hello(String myName) {
    render(myName);
} 
```

查看模板：

```
<-- this url should be /greet  (noted we are submitting via POST) -->
<form action="@{Application.greet()}" method="post">
Name: <input type="text" name="myName">
<input type="submit" value="Submit">
</form> 
```

# iphone - iPhone SDK：自定义标签栏 - 如何使用 TweetBotTabBar

> ID：14662162
> 
> 赞同：0
> 
> 时间：2013-02-02T13:04:12.277
> 
> 标签：iphone, ios, cocoa, uitabbarcontroller

在搜索了如何为我的 iphone 应用程序实现自定义标签栏后，我遇到了位于此处的 TweetBot 标签栏[TweetBotTabBar](https://github.com/i300/TweetBotTabBar)

我下载了 zip 文件并在 Xcode 中打开了 Tweet Bot 项目，但是我不确定如何在我自己的应用程序中使用它。

我是否必须将 TweetBot 项目导入到我自己的项目中，还是必须单独复制和粘贴代码？

我现有的代码使用 SDK 中包含的标准 UITabBarController。

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:04:35.943

从源文件中将这些文件复制到您的项目中

![标签栏文件](../Images/65f3349025d978eb09cc6aea75e18d98.png)

然后创建您的 rootViewController 并向视图添加一个 TBTabBar，将不同的视图控制器分配给您的不同标签栏并在内部实现 TBTabbarDelegate。

```
#import <UIKit/UIKit.h>
#import "TBTabBar.h"
@interface ViewController : UIViewController<TBTabBarDelegate>{
    TBTabBar *tabBar;
}

@end 
```

这个视图控制器的实现如下

```
#import "ViewController.h"
#import "TweetBotTabBarTestViewController.h"
@interface ViewController ()

@end

@implementation ViewController
- (void)dealloc
{
    [tabBar release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    TweetBotTabBarTestViewController *vc1 = [[TweetBotTabBarTestViewController alloc] init];
    TweetBotTabBarTestViewController *vc2 = [[TweetBotTabBarTestViewController alloc] init];
    TBViewController *vc3 = [[TBViewController alloc] init];
    vc3.view.backgroundColor = [UIColor darkGrayColor];

    TBTabButton *t1 = [[[TBTabButton alloc] initWithIcon:[UIImage imageNamed:@"timelineIcon"]] autorelease];
    t1.highlightedIcon = [UIImage imageNamed:@"timelineIconHighlighted"];
    t1.viewController = vc1;
    TBTabButton *t2 = [[[TBTabButton alloc] initWithIcon:[UIImage imageNamed:@"mentionsIcon"]] autorelease];
    t2.highlightedIcon = [UIImage imageNamed:@"mentionsIconHighlighted"];
    t2.viewController = vc2;
    TBTabButton *t3 = [[[TBTabButton alloc] initWithIcon:[UIImage imageNamed:@"messagesIcon"]] autorelease];
    t3.highlightedIcon = [UIImage imageNamed:@"messagesIconHighlighted"];
    t3.viewController = vc3;
    TBTabButton *t4 = [[[TBTabButton alloc] initWithIcon:[UIImage imageNamed:@"favoritesIcon"]] autorelease];
    t4.highlightedIcon = [UIImage imageNamed:@"favoritesIconHighlighted"];
    t4.viewController = vc3;
    TBTabButton *t5 = [[[TBTabButton alloc] initWithIcon:[UIImage imageNamed:@"searchIcon"]] autorelease];
    t5.highlightedIcon = [UIImage imageNamed:@"searchIconHighlighted"];
    t5.viewController = vc3;
    NSArray *a = [NSArray arrayWithObjects:t1, t2, t3, t4, t5, nil];
    tabBar = [[TBTabBar alloc] initWithItems:a];
    tabBar.delegate = self;
    [self.view addSubview:tabBar];
    [tabBar showDefaults];
}

#pragma mark - TBTabbar Delegate
-(void)switchViewController:(UIViewController *)viewController {
    UIView *currentView = [self.view viewWithTag:SELECTED_VIEW_CONTROLLER_TAG];
    [currentView removeFromSuperview];

    viewController.view.frame = CGRectMake(0,0,self.view.bounds.size.width, self.view.bounds.size.height-(tabBar.frame.size.height));

    viewController.view.tag = SELECTED_VIEW_CONTROLLER_TAG;

    [self.view insertSubview:viewController.view belowSubview:tabBar];
}

@end 
```

# jquery - Coffeescript 找不到 div - railscast 114 已修改

> ID：14662163
> 
> 赞同：0
> 
> 时间：2013-02-02T13:04:15.910
> 
> 标签：jquery, ruby-on-rails-3.1, coffeescript, railscasts

尝试使用无尽页面遵循 railscast 114 的指南，`will_paginate`但我的咖啡脚本出现错误：

# home.js.coffee

```
jQuery ->
if $('.pagination').length
  $(window).scroll ->
   url = $('.pagination .next_page').attr('href')
   if url && $(window).scrollTop() > $(document).height() - $(window).height() - 50
     $('.pagination').text("Fetching more products...")
     $.getScript(url)
$(window).scroll() 
```

在线上：

```
 if $('.pagination').length 
```

我收到以下错误：

```
Uncaught TypeError: Cannot read property 'length' of null 
```

脚本似乎没有读取我的索引文件，因为脚本找不到我的任何 div 框...

请帮助... 一个星期以来一直被这个无尽页面的问题所困扰。

# 更新咖啡脚本

```
jQuery ->
  if $('.pagination').length
    $(window).scroll ->
      url = $('.pagination .next_page').attr('href')
      if url && $(window).scrollTop() > $(document).height() - $(window).height() - 50
        $('.pagination').text("Fetching more products...")
        $.getScript(url)
    $(window).scroll() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:10:20.083

为了使其工作，您需要在加载 DOM 后执行选择器。您在第一行中正确定义了一个函数来实现这一点，但是这个函数（在 上执行`document.ready`）有一个空的主体。

简而言之，将除第一行之外的所有代码缩进一级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:29:01.617

这是通过将咖啡脚本移动到 application.js，用 jQuery 重写，然后调用 var $j = jQuery.noConflict(); 来解决的。并在 evert $-sign 前面附加 $j 符号。不知道为什么这有效。认为它与同时运行的多个脚本有关。

现在看起来像这样：

```
var $j = jQuery.noConflict();
$j(function() {
if ($j('.pagination').length) {
$j(window).scroll(function() {
var url;
url = $j('.pagination .next_page').attr('href');
if (url && $j(window).scrollTop() > $j(document).height() - $j(window).height() - 50) {
$j('.pagination').text("Fetching more products...");
return $j.getScript(url);
}
});
return $j(window).scroll();
}
}) 
```

# mysql - Mysql - 无法将变量传递给子查询

> ID：14662165
> 
> 赞同：4
> 
> 时间：2013-02-02T13:04:22.110
> 
> 标签：mysql, sql, subquery

这是我的查询：

```
SELECT user.*, @UserID:=user.uid,
    (SELECT count(c1) FROM (
    SELECT COUNT(*) AS c1 FROM user_group
    WHERE user_group.uid=@UserID
    GROUP BY user_group.uid
) x1) AS x2

FROM user 
```

问题是`@UserID`in 没有传递给子查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:07:12.947

为什么要在那里传递变量？像这样直接使用外部表引用。

```
SELECT user.*, 
(SELECT COUNT(*) AS c1 FROM user_group
WHERE user_group.uid=user.uid
GROUP BY user_group.uid) AS GroupCount
FROM user; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:08:21.443

如何使用`JOIN`？我认为结果与您想要的相同。我猜*你想得到用户拥有的组总数*。正确的？

```
SELECT  a.*, 
        COALESCE(b.totalCount, 0) totalCount,
        COALESCE(b.totalType, 0) totalType
FROM    user a
        LEFT JOIN
        (
            SELECT  uid, 
                    COUNT(*) totalCount, 
                    COUNT(DISTINCT type) totalType
            FROM    user_Group 
            GROUP BY uid
        ) b ON a.uid = b.uid 
```

# ios - 如何在 UISearchBar 中从自定义 inputView 动态更改为默认 inputView？

> ID：14662167
> 
> 赞同：1
> 
> 时间：2013-02-02T13:04:47.710
> 
> 标签：ios, cocoa-touch

在我的应用程序中，我需要在`UISearchBar`.

我想做如下图。

第一张图片是默认输入键盘（英文）。

![在此处输入图像描述](../Images/36309e6ab94cc9e12fedddafafc2c415.png)

第二张图片是自定义键盘。

![在此处输入图像描述](../Images/90666a858c7371ccc2db8d3255075942.png)

当我点击默认（英文）键盘的 `inputAccessoryView`按钮时，我想做，我想更改为我的自定义输入视图（下图）。当我再次点击该`inputAccessoryView`按钮时，我想隐藏我的自定义键盘并更改为默认键盘。

我不知道该怎么做。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:10:33.963

UISearchBar API 无法让您正式访问其文本字段的`inputView`. 但是您可以通过查找文本字段来获得此类访问权限，如下所示：

```
for (UIView* v in searchBar.subviews) {
    if ([v isKindOfClass: [UITextField class]]) {
        UITextField* tf = (UITextField*)v;
        tf.inputView = //...
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:51:47.677

我刚刚得到了我自己问题的答案。那只是个把戏。

只是`nil`用来`inputView`。:D

# .net - IIS 4.5 集成和经典的.LESS CSS 失败

> ID：14662171
> 
> 赞同：-1
> 
> 时间：2013-02-02T13:05:04.973
> 
> 标签：.net, iis, .net-4.5, dotless

将最新的无点 DLL 与 .NET 4.5 集成或经典应用程序池一起使用时，出现内部服务器 500 错误。我目前没有 4.0 应用程序池（直接安装 VS 2012 ......所以这是 4.5 问题，还是有另一种方法可以使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:28:53.013

切换到 4.5 集成模式解决了这个问题，并确保所有 LESS 文件都存在，我缺少一个。经典对我不起作用。

# avr - 如何在 atmega128 中配置看门狗定时器 10 秒延迟

> ID：14662179
> 
> 赞同：-1
> 
> 时间：2013-02-02T13:06:16.687
> 
> 标签：avr, atmega

我正在使用**ATMEGA128 16AC**。所以我想使用看门狗定时器至少在 10 秒后重置 AVR。对于在 10 秒内未按下前键盘键，控制器应重新启动。

我尝试使用 wdt_enable(value); 之类的库函数；也尝试配置 WDTCR reg，但未能获得 10 秒的延迟。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:59:59.337

在 ATmega 128 中使用 16 位定时器配置如下所示。

```
// Enable overflow interrupt.
TIMSK |= (1 << TOIE1);      

// Enable global interrupts.            
sei();

// Start timer at Fcpu/1024\. Approx 3.33sec for each cycle.(F_CPU = 16MHz External)                                     
TCCR1B |= (1 << CS12) | (1 << CS10); 
```

因此，当您像这样配置计时器时，计时器将每 3.33 秒溢出一次，然后您可以定义此溢出的倍数，例如

```
#define INPUT_KEY_TIMEOUT 10 
```

只是您需要检查计时器 ISR 中的状态

```
 if(system_timer_count == INPUT_KEY_TIMEOUT) {
      //Do something if the following condition met.
  } 
```

通过这种方式，您可以创建任何时间延迟，而不会干扰控制器的正常工作。只有当满足上述条件时，控制器才准备好在 ISR 中执行任何操作。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:54:25.420

看门狗定时器取决于两件事（来自数据表）：

*   看门狗 RC 振荡器工作模式（表 13，第 41 页）。您希望将其设置为可能的最低值，即 1MHz（默认值）。
*   看门狗预分频器（表 22，第 56 页）。您希望将此设置为可能的最高值，即 2,048K，并为您提供 1.8 秒的最大超时（如果您的 Vcc 为 5V）。

因此，您使用 WDT 的时间不能超过 1.8 秒。

您可以使用其中一个 16 位定时器（也有预分频器，表 62，第 136 页）来生成中断，该中断调用您必须编写的中断例程。中断例程应该做的是减少一个在启动时在其声明中设置的全局变量，如果该变量达到 0，则跳转到地址 0（与复位后 AVR 开始执行的地址相同）。您可以轻松计算出这些值应该是什么。

如果按下某个键，则重置计时器和全局变量。随着所有这些中断例程修改变量，它需要被声明`volatile`。

我对 PIC16 系列有更多经验，但我很确定这将适用于 AVR。

# jquery - 字符数据的验证问题

> ID：14662180
> 
> 赞同：0
> 
> 时间：2013-02-02T13:06:20.317
> 
> 标签：jquery, html

使用直接输入到 W3schools 验证器中，我遇到了很多错误，但其中很多错误非常相似，如下所示：

此处不允许使用字符数据：

```
var $tr = $("<tr class='optionAndAnswer' align='center'>"); 
```

（指向末尾的“）

此外，我一直在下面得到这个，我不太明白问题是什么：

这个怎么样？

```
var $options = $("<td><table class='option'><tbody><tr><td class='opt'>1\. Option Type:</td></tr></tbody></table></td>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:49:35.727

听起来您正在使用 XHTML 并将您的 JavaScript 内联在一个`<script>`元素中。

解决这个问题的最简单方法是**不使用 XHTML**，这给大多数人带来的麻烦多于好处。请改用 HTML 4.01 Strict 或 HTML 5 草稿。

如果你想坚持使用 XHTML，那么……</p>

在 XHTML 中[，脚本元素的规则发生了](http://www.w3.org/TR/xhtml1/#h-4.8)变化，不再包含内在的 CDATA（因为 XML 不支持它）。这意味着这`<`意味着像往常一样“开始标记”而不是“小于符号”。您必须使用显式 CDATA 标记或`<`通过字符引用（例如 ）来表示具有特殊含义的字符（例如`&gt;`）。

由于大多数 XHTML 都是在`text/html`您编写 XHTML 时提供的，因此它与 HTML 解析器以及 XHTML 解析器兼容。字符引用方法将在 HTML 解析模式下中断。

请参阅[HTML 兼容性指南](http://www.w3.org/TR/xhtml-media-types/#C_4)，其中解释了如何将 CDATA 标记与脚本元素中的 HTML 和 XHTML 兼容。请注意他们使用外部脚本的建议。

# mysql - 如何从表中计算多个值的出现次数并选择最大值

> ID：14662182
> 
> 赞同：2
> 
> 时间：2013-02-02T13:06:25.433
> 
> 标签：mysql, sql, select, count, max

我正在努力进行正确的 mysql 查询。这是表格：

```
**survey_result**
question_id
header_id
answer 
```

其中答案是 (0,1,2,3,4,5) 范围内的 int。我想进行查询，我将计算特定 id 出现了多少次，特定答案发生了。所以对于 question_id = 1 我想看看：

```
question_id answer occurence_number
1           0      12
1           1      20
1           2      34
1           3      5
1           4      9
1           5      15 
```

而且很可能我想选择一个出现次数最多或最少的答案。但这是第二部分，我正在为第一部分苦苦挣扎。

在第一条语句的巨大帮助下，我设法完成了它，这就是工作版本的样子：

```
select question_id, max(occurence_number) FROM
(select question_id, answer, count(*) as occurence_number
from survey_result
group by question_id, answer
order by question_id asc, occurence_number desc) as results
GROUP BY question_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:15:26.840

```
SELECT
  Question_id,
  answer,
  COUNT(answer)
FROM Questions
WHERE question_id = 1
GROUP BY Question_ID, answer; 
```

对于第二部分，要获得最大出现次数的答案：

```
SELECT
  Question_id,
  answer,
  COUNT(answer)
FROM questions
GROUP BY Question_ID,  
         answer
HAVING COUNT(answer) = (SELECT MAX(TheCount)
                        FROM
                        (
                           SELECT COUNT(answer) AS TheCount
                           FROM questions
                           GROUP BY answer
                        ) AS t) ; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/01dd7/13)

**或者：**简单地说：

```
SELECT
  Question_id,
  answer,
  COUNT(answer) Occurrance
FROM Questions
WHERE question_id = 1
GROUP BY Question_ID, answer
ORDER BY Occurrance DESC 
LIMIT 1; 
```

但这只会给你一个值。*但是*，如果存在具有相同最大出现时间的答案，则使用前一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:12:08.593

```
select question_id, answer, count(*) as occurence_number
from survey_result
group by question_id, answer
order by question_id asc, occurence_number desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:05:50.923

SELECT Question_id, answer, COUNT(answer) FROM Questions WHERE = 1 GROUP BY (Question_ID, answer)

# json - 如何在 ESB 上使用 JSON 代理服务公开 SOAP 数据服务？

> ID：14662183
> 
> 赞同：1
> 
> 时间：2013-02-02T13:06:43.197
> 
> 标签：json, soap, proxy, wso2, wso2esb

我正在制作 Stratos Live。我已经实现了一个 SOAP 数据服务。我想将它公开为在 ESB 上定义代理的 JSON REST 服务。我该如何定义它？直通代理？变压器代理？（我已经尝试定义一个直通代理，但是我也暴露了soap；我没有找到如何配置json协议）

我找到了这个例子：

[http://docs.wso2.org/wiki/display/ESB451/Sample+440%3A+Exposing+a+SOAP+Service+Over+JSON](http://docs.wso2.org/wiki/display/ESB451/Sample+440%3A+Exposing+a+SOAP+Service+Over+JSON)

但它指的是本地使用：如何在 Stratos Live 控制台上使用它？Stratos Live 也有例子吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:17:19.240

您可以直接从 WSO2 数据服务服务器将数据公开为 RESTful 资源。以下文档将帮助您。 [http://docs.wso2.org/wiki/display/DSS301/Expose+Data+as+REST+Resources](http://docs.wso2.org/wiki/display/DSS301/Expose+Data+as+REST+Resources)

在这种情况下，您不需要 ESB 代理服务，因为您的需求可以直接从 Data Services Server 实现。如果您需要完成任何转换或服务链类型的场景，代理服务可能会变得很方便。

# javascript - 链接到锚点时，如何防止我的页面被重新加载？

> ID：14662187
> 
> 赞同：1
> 
> 时间：2013-02-02T13:06:59.403
> 
> 标签：javascript, angularjs

我的页面上有几个锚点，如下所示：

```
<a ng-href="#1363219200000">03/14/2013<i class="icon-chevron-right"></i></a> 
```

在页面下方，我有一个锚点，例如：

```
<a id="1363219200000" class="tableAnchor" href=""></a> 
```

现在，当我单击第一个链接时，页面将重新加载。然后，它会跳转到锚点（感谢我使用[`$anchorScroll();`](http://docs-angularjs-org-dev.appspot.com/api/ng.%24anchorScroll)）。但是，我真的不明白为什么要重新加载页面。

我读过关于[ngHref](http://docs.angularjs.org/api/ng.directive%3angHref)的内容，但这个例子对我来说没有任何意义。无论我尝试哪种方式，页面总是会重新加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:06:59.403

您应该利用[`reloadOnSearch`](https://github.com/angular/angular.js/commit/dc0b0c77c7ba3e419442ec639356ab5d3ba7efbe)路由的属性来避免重新加载。

就像是：

```
 when( "/meetings", {
            templateUrl   : "partials/meetings",
            controller    : MeetingController,
            reloadOnSearch: false
          } ). 
```

# drop-down-menu - 如何在 Meteor 上保留引导下拉状态

> ID：14662190
> 
> 赞同：2
> 
> 时间：2013-02-02T13:07:25.223
> 
> 标签：drop-down-menu, twitter-bootstrap, meteor

我有每个表格行的引导下拉按钮。
单击下拉菜单时，它会显示一个带有一些输入字段的小表单。
当用户提交此表单数据或重新绘制该行时，下拉菜单关闭。

`Template.preserve()`我尝试使用类似于输入的方法保留下拉状态，但没有成功。

一些建议使用`{{#constant}}`围绕下拉列表的指令我在表单中也有一些需要重新渲染的反应性内容，所以这个选项不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T05:40:00.997

我已经注意到反应式模板的这个问题，并且我知道没有好的解决方案。这有点像黑客，但它有效。

**选项 1** 手动向下拉列表中添加和删除 CSS 类。使用会话变量来保存下拉菜单的状态。

这应该是下拉列表的默认状态...`class="dropdown"` 当用户单击下拉列表时，使用会话变量保存其状态并将“打开”添加到 HTML 类属性。`class="dropdown open"` 当用户关闭下拉菜单时删除“打开”

**选项 2：** 1\. 用户单击下拉按钮。2\. 使用会话变量将下拉按钮 ID 保存为活动状态。3\. 使用以下回调重新打开您的下拉菜单...`Template.myTemplate.rendered = function ( ) { if (dropdown = active) { $().dropdown('toggle'); //instead of toggle try 'open' } }`

我还没有尝试过使用下拉菜单，但是每次模板继续渲染时，模态框都会消失，我遇到了同样的问题。我尝试了第二个选项，但效果不是很好。我最终使用了类似第一个选项的方法来解决问题，并且效果很好。

# javascript - Java 脚本重定向在 smarty .tpl 文件中不起作用

> ID：14662196
> 
> 赞同：1
> 
> 时间：2013-02-02T13:07:43.320
> 
> 标签：javascript, redirect, smarty, window.location

我正在使用 PHP、Smarty 组合开发一个 Web 应用程序，我在 .tpl 文件中编写了一个 javascript 重定向，但它现在无法正常工作。请看一下代码并帮助我找出问题所在。

这是代码段，

```
{literal}

<script type="text/javascript">
    if(confirm({/literal}'{$info}'{literal})){
        window.location = "logbook_client_section.php?e={$ckey}";
    }
</script>
{/literal} 
```

问题仅在重定向部分，现在重定向到`logbook_client_section_add.php?e={$ckey}`，我想获取`$ckey ( smarty variable)`url 中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:48:38.577

试试看

```
 {literal}

     <script type="text/javascript">
         if(confirm('{/literal}{$info}{literal}')){
             window.location = "oop.php?e={/literal}{$ckey}{literal}";
         }
     </script>
     {/literal} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:13:37.733

您正在尝试在块`{$var}`内使用 a 。`{literal}`那行不通……

避免因关闭/打开代码中的`{literal}`块而导致代码不可读的最干净的解决方案是：

```
<script type="text/javascript">
    var info = '{$info}';
    var ckey = '{$ckey}';
{literal}
    if(confirm(info)){
        window.location = "logbook_client_section.php?e=" + ckey;
    }
{/literal}
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T13:12:27.487

您可以改用它：

```
var ckey='{$ckey}';
window.location = "logbook_client_section.php?e="+ckey; 
```

# java - Android上的蓝牙不发送消息

> ID：14662198
> 
> 赞同：0
> 
> 时间：2013-02-02T13:08:05.610
> 
> 标签：java, android, bluetooth, message, bluecove

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:50:38.833

经过更多的谷歌搜索后，我找到了[Jon Skeet 的答案](https://stackoverflow.com/questions/737318/should-i-use-datainputstream-or-bufferedinputstream/737329#737329)，并将其更改`DataInputStream`为一个包装在 an 中的 InputStream`InputStreamReader` 和一个在`BufferedReader`. 然后我可以使用`readLine()`并且我得到正确的字符。

# javascript - 由于 JSON 字符串中的 HTML 实体导致 JavaScript 崩溃

> ID：14662200
> 
> 赞同：2
> 
> 时间：2013-02-02T13:08:26.017
> 
> 标签：javascript, asp.net-mvc, json, razor

我正在使用`NewtonSoft.Json.JsonConvert.SerializeObject()`将 ASP.NET Dictionary 对象序列化为 JSON 字符串。然后我通过 ViewBag 将此字符串传递给我的 MVC 视图。

当我在我的 MVC Razor by Razor 语法中尝试将 JSON 字符串从 ViewBag 加载到 JavaScript 变量中时，我的 JavaScript 由于语法错误而崩溃。当我检查源代码时，我发现：

```
var hf = {&quot;Test0&quot;:65,&quot;Test1&quot;:23,&quot;Test2&quot;:43,&quot;Test3&quot;:6,&quot;Test4&quot;:31,&quot;Test5&quot;:78,&quot;Test6&quot;:1,&quot;Test7&quot;:53,&quot;Test8&quot;:74,&quot;Test9&quot;:54}; 
```

这是我在视图中加载 ViewBag 内容的逻辑：

```
@section RenderChart
{
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    function drawChart() {
        var hf = @ViewBag.ChartJsonData; 
```

出于某种原因，我的 JSON 字符串被 HTML 编码。在运行它之后，我尝试将它传递到 ViewBag 中，`Server.HtmlDecode()`但这并没有帮助。有谁知道我如何解码这个字符串或将它传递给我的 MVC 视图中的 JavaScript 而无需将其转换为 HTML 实体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T13:12:03.873

如果每个字符串以`@`.

如果你不想要 HTML 编码，你需要用[Html.Raw](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)包装你的字符串：

```
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    function drawChart() {
        var hf = @Html.Raw(ViewBag.ChartJsonData)
    }
</script> 
```

# python - Python 请求：后续 request.get 是如何准确处理的？

> ID：14662207
> 
> 赞同：2
> 
> 时间：2013-02-02T13:09:47.243
> 
> 标签：python, python-requests

```
import requests

for i in range(3):
    g = requests.get('http://some-url/')
    print "request done" 
```

**对于每个开始的*请求*，“它”是否在执行另一个请求之前等待响应到达（完全完成加载响应）？**

我已经将完成这些请求所需的时间与来自我的浏览器的请求进行了比较，并且使用*Requests*的加载时间要快得多。我不确定这是否仅仅是因为我的浏览器执行 javascript、加载图像等，还是因为 Requests 的工作方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:20:32.977

是的，`requests.get`是同步操作。它等待页面内容作为 str 被拉入 python。您看到的时间差异确实是由于执行 javascipt 和在浏览器中获取附加文件造成的。

在 firefox webconsole 中，您可以看到下载页面内容所需的时间。这个时间应该大致等于您看到的请求时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T13:20:56.380

是的，每个请求都是同步完成的，所以下一个请求只有在前一个请求完成后才会开始。引用[发行说明](http://pypi.python.org/pypi/requests)：

> **0.13.0 (2012-05-29)**
> 
> 删除 Requests.async 以支持[grequests](https://github.com/kennethreitz/grequests)

# android - 一个应用程序中的两个数据库

> ID：14662211
> 
> 赞同：0
> 
> 时间：2013-02-02T13:10:33.657
> 
> 标签：android, database

> **可能重复：**
> [android中单个应用程序中的多个数据库](https://stackoverflow.com/questions/7848915/multiple-database-in-single-app-in-android)

我有一个带有数据库文件的应用程序。现在我想在这个应用程序中构建另一个数据库文件来存储另一种数据。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:17:09.230

虽然可以在单个应用程序中拥有多个数据库，*但我仍然建议在单个数据库中拥有多个表而不是多个数据库。*

这是创建多个数据库的解决方案。

[如何在单个应用程序中添加多个数据库](https://stackoverflow.com/a/4499816/519718)

# javascript - 将 HTTPS javascript 文件链接到 HTTP 站点

> ID：14662214
> 
> 赞同：0
> 
> 时间：2013-02-02T13:10:50.067
> 
> 标签：javascript, http, https

我刚刚安装了我的 SSL 证书，所以我可以使用 HTTPS 协议访问我的网站。我不希望整个站点都是 HTTPS，而只是登录面板和注册页面。注册页面很容易实现为 HTTPS，但登录面板是 JavaScript 代码，它使用 AJAX 来识别用户。如何使该脚本文件成为 HTTPS（也将 PHP 文件称为 HTTPS）？是否有意义？我可以像这样在 HTML 文件的标题中添加脚本文件`<script type="text/javascript" src="https://www.mysite.com/js/login.js"></script>`吗？谢谢！

# php - 如何使用 PHP 中的变量从 SQL 中对表进行排序

> ID：14662216
> 
> 赞同：1
> 
> 时间：2013-02-02T13:10:53.827
> 
> 标签：php, sql, sorting, variables, html-table

我在从 SQL 数据库获取的信息中对表进行排序时遇到问题。我需要使用 PHP 变量 $points 对表进行排序（从 SQL 数据库中的两个不同字段计算并打印为表的最后一部分，因此这些点不包含在 SQL 中）。

所以基本上我需要按 $points 对表进行排序，而不会将有关点的任何信息直接保存到 SQL 数据库中。

我想知道如果可能的话，最简单的方法是什么？

PHP代码在这里：

```
if(isset($_REQUEST['button'])) {
    $connect = mysqli_connect("localhost","root","","Points_database");
    if (mysqli_connect_errno()) {
        echo "Error: ", mysqli_connect_error();
        exit();
    }
    $sql = "SELECT * FROM Points_table;";
    $query = mysqli_query($connect,$sql);
    echo "<table><tr><td>Team</td><td>Games</td><td>Wins</td><td>Tie</td><td>Losses</td><td>Goals</td><td>Points</td></tr>";
    $rowcount=0;
    while($row = mysqli_fetch_array($query,MYSQL_ASSOC)) {
        $rowcount++;
        $points= $row['wins'] * 3 + $row['tie'];
        if($rowcount%2==0) {
            echo "<tr class='rowstyle2'>";
        }
        else {
            echo "<tr>"; 
        }
        echo "<td>".$row['team']."</td><td>".$row['games']."</td><td>".$row['wins']."</td><td>".$row['tie']."</td><td>".$row['losses']."</td><td>".$row['goals']."</td><td>".$points."</td></tr>";
    }
    echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:21:58.173

为什么不？

```
SELECT *, (wins*3 + tie) AS pts FROM table ORDER BY pts DESC 
```

或者如果您不想在 SQL 中进行计算

```
SELECT * FROM table ORDER BY wins*3 + tie DESC 
```

这是：[http ://sqlfiddle.com/#!2/d2045/4](http://sqlfiddle.com/#!2/d2045/4)

# python - 确定给定的 Python 模块是否是标准库的一部分

> ID：14662220
> 
> 赞同：6
> 
> 时间：2013-02-02T13:11:18.293
> 
> 标签：python, module, standard-library

如何确定 Python 模块是否是标准库的一部分？换句话说：是否有 Python 等效于 perl 的 corelist 实用程序？

我会用它来设定我对开发过程中可移植性的期望。如果它依赖于实现，我对 CPython 很感兴趣。

到目前为止，我找到的最佳答案是：

[python标准库的哪些部分保证可用？](https://stackoverflow.com/questions/13334536/which-parts-of-the-python-standard-library-are-guaranteed-to-be-available)

即在 Python 标准库文档的索引页面上搜索模块名称：http: [//docs.python.org/2/library/](http://docs.python.org/2/library/)。但是，这不如使用实用程序方便，并且也没有告诉我有关最低要求版本的任何信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T13:28:54.590

使用 setuptools 安装脚本 ( `setup.py`) 时，您*测试*所需的模块，并更新安装依赖项列表以添加反向端口（如果需要）。

例如，假设您需要该`collections.OrderedDict`课程。文档声明它是在 Python 2.7 中添加的，但有一个[可](http://pypi.python.org/pypi/ordereddict)在 Python 2.4 及更高版本上运行的反向移植。在`setup.py`你测试类的存在`collections`。如果导入失败，请将反向端口添加到您的需求列表中：

```
from setuptools import setup

install_requires = []

try:
    from collections import OrderedDict
except ImportError:
    install_requires.append('ordereddict')

setup(
    # ...
    install_requires=install_requires
) 
```

然后在您需要`OrderedDict`使用相同测试的代码中：

```
try:
    from collections import OrderedDict
except ImportError:
    # use backported version
    from ordereddict import OrderedDict 
```

并依靠`pip`or `easy_install`or or `zc.buildout`or 其他安装工具为您获取额外的库。

许多最近添加的核心库都有可用的向后移植，包括`json`（称为`simplejson`）、、`argparse`（`sqlite3`包`pysqlite`，`from pysqlite2 import dbapi as sqlite3`用作后备）。

您*仍然*需要阅读文档；Python 文档非常*好*，对于新模块、类、方法、函数或参数，文档在它们添加的 Python 版本中明确提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:44:50.617

您应该阅读该模块的文档。你说你想要一个实用程序，因为阅读文档很不方便。但是您正在针对模块进行编码？无论如何，在这种情况下，您应该花点时间阅读文档，除非您只是通过将您在网上找到的神秘片段粘贴在一起来制作科学怪人的怪物。

你不会使用几十个模块，你可以花点时间阅读文档。此外，通常，文档确实提到了引入它们的 Python 版本。

文档很好：使用它们。

# api - 开源项目但对 API 密钥保密

> ID：14662221
> 
> 赞同：3
> 
> 时间：2013-02-02T13:11:25.523
> 
> 标签：api, authentication, github

我想使用 GitHub API 创建一个开源项目，但是我遇到了一个问题，我的密钥在源代码中。我从不同的地方读过，从来没有在源代码中包含任何密钥，我同意这一点。我还发现了一些关于通过网络服务器进行身份验证而不是让用户获取自己的 API 密钥的模糊参考。

据我了解，它会是这样的：

当需要使用 GitHub 进行身份验证时，我会让用户向我的服务器发送请求。从那里，我将使用自己的 API 密钥向 GitHub 进行身份验证，并在成功身份验证后，将签名返回给发出请求的用户。从那时起，他们可以直接与 GitHub 通信。那是对的吗？

如果这就是它的工作原理，我很想知道更多关于这个过程的信息。这是我第一次使用 API，所以我对此很陌生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T09:57:49.810

我从来没有收到过这个问题的答案，所以我想我会传递我在此期间发现的东西。

开源使用 API 的项目的主要问题是泄露您的客户端机密（至少在 GitHub 的情况下，这就是我发布这个问题的原因）。您永远不应该在源代码中包含您的客户端密码。如果有人知道您的客户端密码和客户端 ID，他们可以有效地模拟您的应用程序。

所以，这留下了两个选择。

1）。运行您自己的简单服务器。

2）。要求每个 fork 项目的人都获得自己的 GitHub API 密钥。

我建议使用选项 2。如果您将应用程序开源，它就不再是您的了，而且您对其他人将如何使用它没有发言权。那么，您为什么要对其他人的应用程序在使用您的客户端 ID 和密码时所做的事情负责？

这里还有另一个问题。一旦通过 GitHub 进行身份验证并获得 Auth Token，您需要以某种方式安全地存储该 Auth Token。起初我没有意识到，但它基本上是一个密码。如果您以纯文本形式存储 Auth Token 并且其他人恢复了它，他们可以向 API 发出请求并检索所有用户数据。（这是使用 OAuth2 和不记名令牌。）

在客户端上存储身份验证令牌确实不是一个好方法。当您尝试开源您的项目时，这也会带来另一个问题。无论谁使用您的开源项目，基本上都需要使用他们自己的服务器进行初始身份验证，然后还要存储身份验证令牌。

只是一些事情要记住。

# javascript - 性能：CSS 过渡与 Javascript 效果

> ID：14662222
> 
> 赞同：2
> 
> 时间：2013-02-02T13:11:27.820
> 
> 标签：javascript, jquery, css, css-transitions

在过去的 10 年里，我一直是 DOM 中各种视觉效果的 javascript 转换的粉丝。几年前，我对 CSS 过渡进行了一些试验，但由于缺乏支持以及当时浏览器的性能问题，我将它们排除在外，作为可靠的替代方案。

我现在正在重新讨论这个话题，并且一直在寻找可以显示这两种方法在性能和跨设备和浏览器支持方面的差异的资源和测试。

**问题：**谁能推荐一些好的 2012/2013 年末资源来比较这两种方法与简单的动画效果？

**Mods：**我知道[存在类似的问题](https://stackoverflow.com/questions/2999749/performance-of-css-transitions-vs-js-animation-packages)，但是随着新浏览器的出现，以及 CSS`transition`规范实现的改进，我认为这是一个需要重新提出的有效问题，因为上一次讨论这个问题是在 2010 年

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:20:19.643

你可以试试这些资源：

1.  [http://www.css3maker.com/css3-transform.html](http://www.css3maker.com/css3-transform.html)
2.  [https://developer.mozilla.org/en-US/docs/CSS/transform](https://developer.mozilla.org/en-US/docs/CSS/transform)
3.  [http://tympanus.net/codrops/2011/10/24/creative-css3-animation-menus/](http://tympanus.net/codrops/2011/10/24/creative-css3-animation-menus/)
4.  [http://www.greywyvern.com/?post=337](http://www.greywyvern.com/?post=337)

还有更多...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T15:33:14.323

这里是：[http ://css3.bradshawenterprises.com/blog/jquery-vs-css3-transitions/](http://css3.bradshawenterprises.com/blog/jquery-vs-css3-transitions/)

结论是，如果您可以将 css 用于动画，那么您应该：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:23:07.343

你在这里：[为什么使用 translate() 移动元素比 pos:abs top/left 更好](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)

# joomla - 无法在 joomla 2.5.4 中实例化邮件功能

> ID：14662224
> 
> 赞同：0
> 
> 时间：2013-02-02T13:11:41.633
> 
> 标签：joomla, phpmyadmin, joomla2.5, php

当用户注册时，我正在尝试从我的组件发送邮件。我尝试了所有三个，即 PHPMail、Sendmail 和 SMTP，但都没有。我在 localhost (WampServer 2.2) 中测试它，Joomla 版本是 2.5.4。我不确定这是 WampServer 问题还是 Joomla 或我自己的代码。这是我的代码：

```
function postmail($name, $receiver){

          jimport('joomla.mail.helper');

          $mailer =& JFactory::getMailer();

          $config =& JFactory::getConfig();
          $sender = array($config->getValue( 'config.mailfrom'),$config->getValue( 'config.fromname' ) );
          $mailer->setSender($sender);

          $recipient = $receiver;
          $mailer->addRecipient($recipient);

          $body   = "<body><br><p>"; 
          $body   .= "<strong>$name,</strong>&nbsp;";   
          $body   .= "</p><br></body>";

          $mailer->isHTML(true);
          $mailer->Encoding = 'base64';
          $mailer->setBody($body);

          $send =& $mailer->Send();

          if ( $send != true ) {
                    //echo 'Error sending email: ' . $send->message;
            return false;
          } else {
                    //echo 'Mail sent';
                return true;
          }
} 
```

它收到错误“无法实例化邮件功能”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:19:25.943

要了解问题所在，您确实需要获取错误消息。

改变

```
//echo 'Error sending email: ' . $send->message; 
```

至

```
echo 'Error sending email:'.$send->get('message'); 
```

然后再次运行它。您得到的错误应该告诉我们为什么它没有实例化。让我们知道它的内容，以便我们为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:03:00.020

我相信导致这个问题的原因有很多。但是为了测试，您可以随时通过在此处安装此工具来创建自己的邮件服务器[http://www.toolheap.com/test-mail-server-tool/](http://www.toolheap.com/test-mail-server-tool/)

除了在 joomla 邮件设置中将 localhost 作为 smtp 主机，然后在 web 服务器的 php.ini 中添加 smtp=localhost 之外，您无需进行任何更改。就是这样，它应该工作。

这只是为了测试您的代码是否正确，并且您在 joomla 中使用了正确的邮件设置。如果这不起作用，我相信问题不在您的代码中，而是在您的邮件设置中。

# asp.net-mvc-3 - 在 MVC3 中为某些 css 和 js 文件启用缓存

> ID：14662225
> 
> 赞同：0
> 
> 时间：2013-02-02T13:11:43.687
> 
> 标签：asp.net-mvc-3, caching, browser

想询问是否有任何方法可以在 ASP.Net MVC3 中为某些文件/文件夹启用缓存

目标文件是一些 CSS 和 Jquery js 文件，它们可能很长一段时间都不会更改。

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:06:27.253

从 IIS 配置 HTTP Expires Response Headers，非常简单，只需检查**Expire Web 内容**

[http://technet.microsoft.com/en-us/library/cc770661(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc770661(v=ws.10).aspx)

是的，使用捆绑！当包中的任何文件更改时，它将生成唯一的哈希，脚本和样式将被重新缓存。

# linux - 如何在 shell 脚本中从 line3 等中减去 line1 中的数据？

> ID：14662226
> 
> 赞同：0
> 
> 时间：2013-02-02T13:11:43.853
> 
> 标签：linux, bash, shell

我有一个包含一列多行的文件。

我想将每一行相互减去，以检查我期望哪一行开始具有恒定差异。

```
i.e
line1-line2
line2-line3
line3-line4
etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:42:19.647

您可以`awk`这样做：

```
awk 'NR>1 {print prev - $1} {prev=$1}' <input_file> 
```

这样，动作`{print prev - $1}`只对第一行之后的行执行，而动作`{prev=$1}`对每一行执行，但在第一个模式被评估并且是相应的动作之后，以防万一，执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:29:40.403

使用 while 循环。记住最后一行：

```
previous=0
while read n ; do
    if ((previous)) ; then
        echo $((previous-n))
    fi
    previous=$n
done 
```

如果您的行包含浮点数，请使用`bc`或切换到某种脚本语言，例如 Perl。

# angularjs - 我可以将 Twitter Flight 与 AngularJS 结合起来吗？

> ID：14662227
> 
> 赞同：5
> 
> 时间：2013-02-02T13:11:48.910
> 
> 标签：angularjs, twitter-flight

几个小时前，Twitter 发布了 Flight，一个基于组件的 JavaScript 框架。它的组件是普通的 DOM 元素，并通过普通的 DOM 事件进行通信，这非常好。

我只是想知道......我可以将它与 AngularJS 结合起来吗？如果我正确理解这两个框架，我可以使用 AngularJS 创建“新”元素，这些元素可以由 Flight 组件使用并包含它。这些组件可以通过 AngularJS 填充数据。换句话说：我可以像往常一样使用 AngularJS，但指令是“装饰”的 Flight 组件。（使用 Flight 来创建视图并使用 AngularJS 来处理其他所有事情。）

这有意义吗？如果不是......我不明白飞行的目的:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T16:27:35.863

我了解您想要执行以下操作：使用 Flight 组件和 Flight 视图装饰 AngularJS 指令。

您可能可以在指令中创建这些 Flight 组件，并从 Angular 提供的数据绑定中获得优势。但是，从以下几点来看：

```
"Flight enforces strict separation of concerns. 
 When you create a component you don't get a handle to it. " 
```

似乎 Flight 并没有宣传您通过数据绑定与这些组件对话。

此外，指令本身已经可以被视为组件。至于创建视图，在 AngularJS 中，DOM 已经是视图，你为什么要在顶部使用 Flight 视图？

此外，由于 AngularJS 没有订阅 Flight 使用的事件，因此它无法知道 DOM 何时被修改（我不确定这一点，如果我错了，请更有知识的人纠正我）。

至于说得通。它看起来不像 Flight 旨在解决与 Angular 相同的问题。我认为 AngularJS 指令解决了与 Flight 组件相同的问题，但提供了更多。

# android - Android - Java：在类型已知之前从 JSON 初始化 ArrayList

> ID：14662232
> 
> 赞同：0
> 
> 时间：2013-02-02T13:12:07.163
> 
> 标签：android, listview, arraylist, android-arrayadapter

我有一系列自定义对象，这些对象填充了一系列最终填充列表视图的自定义 ArrayAdapter。在我的活动/片段中，我使用相同的模式从 Web 服务器获取内容、填充类型化的数组列表、将数组列表放入适当的适配器，然后将适配器分配给列表视图。

我想做的是创建一个 pojo，它可以为我需要这种模式的所有实例管理这个过程。我对逻辑的基础没有问题，而是被细节所困扰。

例如，我想做的是这个......

```
if (x == y) {
    ArrayList<SpecificObject> a = new ArrayList<SpecificObject>();
} else if (x == z) {
    ArrayList<DifferentObject> a = new ArrayList<DifferentObject>();
} else {
    ArrayList<AnotherObject> a = new ArrayList<AnotherObject>();
} 
```

当然，这里的问题是编译器建议“a”未初始化。如果不解决此类问题，从概念的角度来看，我将无法创建可以处理列表管理的单个 pojo。

我的问题是：在需要处理任意数量的特定对象类型的同时，如何开发一种通用的方法来处理这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:31:06.507

一种解决方案是只保留一个对象的 ArrayList，并在分配时进行转换。

```
 ArrayList<Object> a = new ArrayList<Object>(); 
```

然后，当您需要分配它时，您可以：-

```
if (x = y) {
    assignCall(ArrayList<SpecificObject>) a);
}
... 
```

但请注意，无法在运行时检查演员阵容，因此您会收到警告，如果您转换了错误的内容，则会收到 ClassCastExceptions。我通常会注意到这些警告，即可能有更好的方法来构建事物，但这取决于你;-)

# magento - 在 Magento 的 payment.phtml 中添加 javascript 代码

> ID：14662234
> 
> 赞同：0
> 
> 时间：2013-02-02T13:12:15.817
> 
> 标签：magento, action

我有以下布局xml

```
<reference name="content">
    <block type="gate/paycheckout" name="payair.gate.paycheckout" before="-" template="gate/checkout.phtml"/>
    <block type="gate/paymentjs" name="payair.gate.paymentjs" />
</reference> 
```

我有一个块，我通过它在 payment.phtml 上调用 javascript 及其工作，但我想调用 Magento addJs 操作方法以在 payment.phtml 页面上动态添加 javascript，而不是通过调用块。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:38:22.790

您应该将脚本添加到头部：

布局xml文件：

```
<layout>
  <name_of_the_handle>
    <reference name="head">
      <action method="addJs"><script>gate/payment.js</script></action>
    </reference>
  </name_of_the_handle>
  ...
</layout> 
```

在这种情况下，payment.js 文件应该位于 js/gate/payment.js

# java - SpringMVC 存储 Base64

> ID：14662237
> 
> 赞同：3
> 
> 时间：2013-02-02T13:12:30.377
> 
> 标签：java, html, spring-mvc, base64

我有一个带有注册表单的 Spring MVC 应用程序。这个表格有一张base64数据格式的图片。我想将这些数据存储在数据库中。目前我将base64数据存储在一个输入元素中。我对此有几个问题；

1.  我应该在什么html元素中保存base64数据目前我正在使用输入元素但是我在插入时遇到错误（Blob是数据库和Java对象中使用的数据类型） -

    `Failed to convert property value of type java.lang.String to required type java.sql.Blob for property photo; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [java.sql.Blob] for property photo: no matching editors or conversion strategy found`

    或者有没有办法在java中将String转换为BLOB

2.  即使数据在base64中，我还需要在表单标签上使用enctype="multipart/form-data"吗？

3.  如果base64数据存储在html文件元素中，我如何对其进行验证以检查它是否为NULL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:08:50.543

您可以使用`LobHelper`将其转换为`Blob`. 您从休眠会话中获得 LobHelper `Session.getLobHelper()`。

只要您没有`<input type="file" />`，就不需要 enctype="multipart/form-data"。

验证应该像使用 @NotNull 的普通字符串属性一样工作。

就我个人而言，我不会将它编码存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:45:32.050

你可能已经把`path`Blob 的 , 例如`<form:input path="theBlobField">`没有添加一个`PropertyEditor`for Blobs 在你的`initBinder`,

这意味着，您正在尝试将 String 类型的值直接存储到 Blob 类型 - 瞧！非法状态异常。

可能的方法是创建一个`PropertyEditor`将 Base64 编码的字符串转换为 Blob 类型的方法。

要解码编码的字符串，您可以使用 appache commons'`Base64.decodeBase64`返回一个字节数组，然后将这些字节转换为 Blob

另一种解决方案是忘记路径，使用简单的`<input name="photoData">`标签，然后在后端，只需使用`request.getParameter("photoData")`which 获取 base64 编码的字符串数据

还有一件事，如果事情不起作用，那么编码数据可能以`mimeType`声明开头。要删除它，请使用

```
//@RequestParam data
//remove mimeType declaration in the data string first
String byteStr = data.split(",")[1];

//get the byte array of the data
byte[] bytes = Base64.decodeBase64(byteStr); 
```

# python - 用于 Django Web 应用程序的 Sqlite 中的独家读取/更新

> ID：14662238
> 
> 赞同：1
> 
> 时间：2013-02-02T13:12:39.307
> 
> 标签：python, django, sqlite

我有一个简单的 Django 网络应用程序，带有一个 Sqlite DB，用于从用户那里收集电影评论，每部电影都应该有 2 个评论者来查看它并为其提供评论。

要动态实现 2 条评论/电影要求，我必须确保我不会向超过 2 个登录用户展示给定电影。否则，我将获得超过 2 条对该电影的评论。

因此，在发送任何电影进行审核之前，我需要检查它尚未发送给 2 位评论者。问题是：如果我将这些信息保存在数据库中，我可能会有超过 2 个并发请求选择某部电影并将其发送出去以供审查，因为它们都同时执行了读取/检索操作。

希望我有类似“SELECT FOR UPDATE”的东西，但不幸的是，SQLite 不支持。

有没有人有任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:27:45.773

我认为您可以使用[事务](http://www.sqlite.org/lang_transaction.html)来解决您的问题。这是[适当的 django 文档](https://docs.djangoproject.com/en/dev/topics/db/transactions/)，[这](http://tomicloud.com/2012/02/django-sqlite)是一个示例。

如果您尝试让两个并发事务写入同一个 sqlite DB，看起来您会得到“OperationalError：database is locked”。您可能想要使用 Django ORM（请参阅链接），但这里有一个 hacky 示例来演示这个想法。

```
import sqlite3
# 2 connections, 2 cursors
con = sqlite3.connect('test.db', isolation_level=None)
con2 = sqlite3.connect('test.db', isolation_level=None)
cur = con.cursor()
cur2 = con2.cursor()

# create really simple table
try:
    cur.execute("CREATE TABLE MOVIES(id INTEGER PRIMARY KEY, r1 INTEGER, r2 INTEGER)")
    cur.execute("INSERT INTO MOVIES(id,r1, r2) VALUES (1,0,0)")
    cur.execute("INSERT INTO MOVIES(id,r1, r2) VALUES (2,0,0)")
except:
    pass

# awkward read/write split mid-transaction is purely for demonstration purposes..
def read(cursor):
    cursor.execute("BEGIN IMMEDIATE TRANSACTION")  # get write lock straight away
    data = cursor.execute("SELECT * FROM MOVIES WHERE r1 == 0 OR r2 == 0")
    return data.fetchall()

def write(cursor, movie_id, reviewer_column, new_reviewer_id):
    cursor.execute("UPDATE MOVIES SET %s=%d WHERE id == %d AND %s ==0" % (
        reviewer_column, new_reviewer_id, movie_id, reviewer_column))
    cursor.execute("COMMIT")

# works fine
data1 = read(cur) # [(1, 0, 0), (2, 0, 0)]
write(cur, data1[0][0], "r1", 123)

# now we have concurrent access..
data1 = read(cur) # [(1, 123, 0), (2, 0, 0)]
data2 = read(cur2) # throws OperationalError: database is locked.
# the second thread should probably wait a bit before retrying.

# in the mean time..
write(cur, data1[0][0], "r2", 456) #works

# now it's safe for the second thread to retry
data2 = read(cur2) # [(2, 0, 0)]
write(cur2, data2[0][0], "r1", 457) #works 
```

以上之后的数据：

```
# MOVIES
# id |  r1 |  r2
#  1 | 123 | 456
#  2 | 457 |   0 
```

它会保护你避免在你的数据库中胡说八道，但是立即写锁是一种稍微粗略的到达那里的方式。

# android - Android REST客户端到magento

> ID：14662241
> 
> 赞同：5
> 
> 时间：2013-02-02T13:12:57.190
> 
> 标签：android, magento, rest, oauth

我正在尝试构建一个使用来自 Magento 服务器的数据的 Android 应用程序。我正在寻找一个好的示例（使用 oAuth 身份验证），甚至是一个可以帮助我加快速度的框架。任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T11:13:25.240

我也用谷歌搜索了将近一周，最后我在这里得到了一个教程

[http://gmartinezgil.wordpress.com/2013/08/05/using-the-magento-rest-api-in-java-with-scribe/](http://gmartinezgil.wordpress.com/2013/08/05/using-the-magento-rest-api-in-java-with-scribe/)

我遵循方法，但我无法产生结果。这可能会对你有所帮助。

检查这个也 - [android连接到magento](https://stackoverflow.com/questions/20112174/android-connect-to-magento/25947581#25947581)

# php - 在 PHP 中运行时排序

> ID：14662243
> 
> 赞同：1
> 
> 时间：2013-02-02T13:13:15.913
> 
> 标签：php, sql, sorting, mysqli

我的 DB 模式就像`Course_Table` `{course_name,marks,std_ID}` 我只为一个特定的学生获得 1 个科目分数，因此我的逻辑和预演流程是

```
$std_id=Select std_id From student_Table

 foreach(Iterate all students)
 select marks from course_table where std_ID=student_ID
 {
Print Student marks  //here i need sorted List,,,
 }
My problem is not actually  the Code,I am looking for logic 
```

我想按升序打印学生分数。

*   我想的是使用`Order By`子句，但它没有用，因为我每个学生只有 1 条记录。
*   可能是我需要创建一个单独的类，在这个类中输入所有数据，然后对其进行排序..（一种非常忙碌的方法将是我的最后一个选择）
*   我正在寻找可以解决我的查询的替代方法或逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:38:37.187

我会写一个查询给我所有需要的数据，然后循环...

就像是...

```
Select student_ID, marks from course_Table order by student_ID, marks //this way the select is already orderd by student and marks.  all we have to do is display it.  Since you're not using name or anything getting records just from course_Table is fine.

for each record in resultset
  if oldstudent=resultset.student then
    isnewStudent=false
    displaymark(resultset.mark, isNewStudent)
  else
    oldstudent = resultset.student
    isNewStudent=True
    displaymark(resultset.mark, isNewstudent)
  end if
next record 
```

# css - CSS：将父元素居中，同时让子元素向左浮动并左对齐

> ID：14662246
> 
> 赞同：0
> 
> 时间：2013-02-02T13:13:38.277
> 
> 标签：css, centering

在我的首页上，我想将目录视图居中（标题为“Golfverzeichnis”的内容区域）：[链接](http://www.golfanatics.de/J3/)

要居中的 CSS 元素的名称：jrDirView

问题描述：它们下面的图像和左对齐的链接应该保持不变，但是现在左对齐的整个目录视图区域应该居中，所以左右的空白是相等的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:20:32.083

将休闲添加到您的 CSS jrDirView 类中

```
.jrDirView{
   margin: 0 auto;
   width:1000px;
} 
```

您可以试验宽度，直到找到所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:53:06.517

如果您查看页面，内容区域已经居中。

您可以通过在最右侧列中显示的图像之一下放置大量标签来证明这一点。

问题是您的内容未居中，因此对用户而言，页面似乎偏离了中心。

您可以通过任意设置 jrDirView 的左边距来调整问题，以强制内容显示为居中，但这不是一个非常强大的解决方案。

更好的解决方案可能是强制文本区域的宽度（大约）与图像的已知宽度相同，然后在 jrListingThumbnail 和 jrContentDiv 上设置左右填充

# android - OnItemClickListener 不适用于自定义 ListView 适配器

> ID：14662247
> 
> 赞同：0
> 
> 时间：2013-02-02T13:13:39.093
> 
> 标签：android, android-listview

我有两个活动。一个在列表视图中显示所有通知，并显示指向 pdf 文件的链接。第二个活动在选择项目时运行。基本上第二个活动应该在项目点击时启动，它应该打开 pdf 文件。

问题是它不会在项目选择上启动第二个活动。发布代码供您参考。

代码：

AllEventsActivity.java

```
 public class AllEventsActivity extends ListActivity {

private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

private static String url_all_products = "http://myurl/fetchnotice.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "notices";
private static final String TAG_PID = "nid";
private static final String TAG_NAME = "notice";
private static final String TAG_INFO = "noticeinfo";
private static final String TAG_DATE = "date";

// products JSONArray
JSONArray products = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_events);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();
    Button go_btn = (Button) findViewById(R.id.go_btn);
    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching pdfviewer activity
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.einfo)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    PdfViewActivity.class);
            // sending pid to next activity
            in.putExtra("pathid", pid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

class LoadAllProducts extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllEventsActivity.this);
        pDialog.setMessage("Loading results. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);
                    String info = c.getString(TAG_INFO);
                    String date = c.getString(TAG_DATE);
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_INFO, info);
                    map.put(TAG_DATE, date);
                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } else {
                // nothing found
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllEventsActivity.this, productsList,
                        R.layout.list_item_eve, new String[] { TAG_PID,
                                TAG_NAME, TAG_INFO, TAG_DATE },
                        new int[] { R.id.eid, R.id.ename, R.id.einfo, R.id.date});
                // updating listview
                setListAdapter(adapter);
            }
        });

    }
}
} 
```

第二个活动：

```
 public class PdfViewActivity extends Activity { 

   private WebView webview;

    //private ProgressDialog progressDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photoview);

        webview = (WebView) findViewById(R.id.my_img);
        webview.getSettings().setBuiltInZoomControls(true);
        webview.getSettings().setUseWideViewPort(true);
        webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);

        String id = getIntent().getExtras().getString("pathid");
        webview.loadUrl("http://docs.google.com/viewer?url="+id);
    }
  } 
```

XML 代码：list_item_eve.xml

```
 <?xml version="1.0" encoding="utf-8"?>

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" 
android:background="@color/itm_bg"
android:textColor="@drawable/text_color">

<TextView
    android:id="@+id/eid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:visibility="gone" 
    android:textColor="@drawable/text_color"/>

<!-- Name Label -->
<TextView
    android:id="@+id/ename"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="6dip"
    android:paddingLeft="6dip"
    android:textSize="12dip"
    android:textStyle="italic" 
    android:textColor="@drawable/text_color"/>

<TextView
    android:id="@+id/einfo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="12dip"
    android:autoLink="web"
    android:textColorLink="@color/link"
    android:paddingTop="6dip"
    android:textSize="14dip"
    android:textStyle="bold" 
    android:textColor="@drawable/text_color"/>

<TextView
    android:id="@+id/date"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoLink="web"
    android:textColorLink="@color/link"
    android:paddingLeft="15dip"
    android:paddingTop="6dip"
    android:textColor="#ffffff"
    android:textSize="9dip"
    android:textStyle="italic" />

<View android:id="@+id/sepbottom" 
      android:background="#000000" 
      android:layout_width = "fill_parent"
      android:layout_height="2dip"
      android:layout_marginTop="10dip"
      />

</LinearLayout> 
```

all_events.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@color/itm_bg"
android:textColor="@drawable/text_color">

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:08:10.073

最简单和最合适的方法是将 ListView 项内的所有子视图设置为不可聚焦/不可点击，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:orientation="vertical" 
   android:background="@color/itm_bg"
   android:textColor="@drawable/text_color">

<TextView
android:id="@+id/eid"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:visibility="gone" 
android:focusable="false"
android:clickable="false"
 android:textColor="@drawable/text_color"/>

   <!-- Name Label -->
  <TextView
android:id="@+id/ename"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingTop="6dip"
android:paddingLeft="6dip"
android:textSize="12dip"
android:textStyle="italic" 
android:focusable="false"
android:clickable="false"
android:textColor="@drawable/text_color"/>

<TextView
android:id="@+id/einfo"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingLeft="12dip"
android:autoLink="web"
android:textColorLink="@color/link"
android:paddingTop="6dip"
android:textSize="14dip"
android:textStyle="bold" 
android:focusable="false"
android:clickable="false"
android:textColor="@drawable/text_color"/>

<TextView
android:id="@+id/date"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:autoLink="web"
android:textColorLink="@color/link"
android:paddingLeft="15dip"
android:paddingTop="6dip"
android:textColor="#ffffff"
 android:textSize="9dip"
android:focusable="false"
 android:clickable="false"
 android:textStyle="italic" />

<View android:id="@+id/sepbottom" 
  android:background="#000000" 
  android:layout_width = "fill_parent"
  android:layout_height="2dip"
  android:focusable="false"
  android:clickable="false"
  android:layout_marginTop="10dip"
  />

   </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:18:46.427

检查您是否在 AndroidManifest 文件中添加了第二个活动。

# c++ - 双向链表：没有在前面插入值

> ID：14662250
> 
> 赞同：1
> 
> 时间：2013-02-02T13:14:24.970
> 
> 标签：c++, data-structures, doubly-linked-list

这是一个 DLinkedList 实现，使用 addFront() 将 int 类型的元素添加到其中，但使用 front() 未检索到它。没有显示错误。不知道为什么？？这是完整的实现。代码在 xCode4.5 上运行。

```
int main(int argc, const char * argv[])
{
    DLinkedList listOne;

    if(listOne.empty()){
        cout<<"Empty";
    }
    const int num=23;
    listOne.addFront(num);

    //Here 0 is returned from front(), while it should be 23;
    cout<<listOne.front()<<endl;

    return 0;
}

//Node Defination
class DNode {                   // doubly linked list node
private:
    int elem;                   // node element value
    DNode* prev;                // previous node in list
    DNode* next;                // next node in list
    friend class DLinkedList;           // allow DLinkedList access
};

class DLinkedList {             // doubly linked list
public:
    DLinkedList();              // constructor
    ~DLinkedList();             // destructor
    bool empty() const;             // is list empty?
    const int front() const;            // get front element
    const int back() const;         // get back element
    void addFront(const int e);     // add to front of list
    void addBack(const int e);      // add to back of list
    void removeFront();             // remove from front
    void removeBack();              // remove from back
private:                    // local type definitions
    DNode* header;              // list sentinels
    DNode* trailer;
protected:                  // local utilities
    void add(DNode* v, const int e);        // insert new node before v
    void remove(DNode* v);          // remove node v
};

void listReverse(DLinkedList& L) {      // reverse a list
    DLinkedList T;              // temporary list
    while (!L.empty()) {            // reverse L into T
        int s = L.front();  L.removeFront();
        T.addFront(s);
    }
    while (!T.empty()) {            // copy T back to L
        int s = T.front();  T.removeFront();
        L.addBack(s);
    }
}

void DLinkedList::remove(DNode* v) {        // remove node v
    DNode* u = v->prev;             // predecessor
    DNode* w = v->next;             // successor
    u->next = w;                // unlink v from list
    w->prev = u;
    delete v;
}

void DLinkedList::removeFront()     // remove from font
{ remove(header->next); }

void DLinkedList::removeBack()      // remove from back
{ remove(trailer->prev); }

// insert new node before v
void DLinkedList::add(DNode* v, const int e) {
    DNode* u = new DNode;  u->elem = e;     // create a new node for e
    std::cout<<u->elem<<std::endl;
    u->next = v;                // link u in between v
    u->prev = v->prev;              // ...and v->prev
    v->prev->next = v->prev = u;
}

void DLinkedList::addFront(const int e) // add to front of list
{
    add(header->next, e);
}

void DLinkedList::addBack(const int e)  // add to back of list
{ add(trailer, e); }

DLinkedList::~DLinkedList() {           // destructor
    while (!empty()) removeFront();     // remove all but sentinels
    delete header;              // remove the sentinels
    delete trailer;
}

DLinkedList::DLinkedList() {            // constructor
    header = new DNode;             // create sentinels
    trailer = new DNode;
    header->next = trailer;         // have them point to each other
    trailer->prev = header;
    std::cout<<"DLinkedListConstructor"<<std::endl;
}

bool DLinkedList::empty() const     // is list empty?
{ return (header->next == trailer); }

const int DLinkedList::front() const    // get front element
{ return header->next->elem; }

const int DLinkedList::back() const     // get back element
{ return trailer->prev->elem; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:44:25.793

问题出在您的`add`功能上：

```
// insert new node before v
void DLinkedList::add(DNode* v, const int e) {
    DNode* u = new DNode;  u->elem = e;     // create a new node for e
    std::cout<<u->elem<<std::endl;
    u->next = v;                // link u in between v
    u->prev = v->prev;              // ...and v->prev
    v->prev->next = v->prev = u;
} 
```

让我们一起来看看吧。您从以下情况开始（我已将`v->prev`指向的节点称为`p`）：

```
┌───────────┐
│           ▼
p ◀──────── v

      u 
```

然后您设置`u->next`为`v`：

```
┌───────────┐
│           ▼
p ◀──────── v
            ▲
      u─────┘ 
```

然后`u->prev`到`v->prev`：

```
┌───────────┐
│           ▼
p ◀──────── v
▲           ▲
└─────u─────┘ 
```

下一行是问题所在。首先它分配`u`给`v->prev`：

```
┌───────────┐
│           ▼
p     ┌──── v
▲     ▼     ▲
└─────u─────┘ 
```

然后它将相同的指针分配给`v->prev->next`。但是`v->prev`现在是`u`，所以你只是设置`u->next`指向`v`并且它已经这样做了。所以没有变化。

现在，当您尝试获取最前面的元素时，您只会得到 element `v`，这是您的哨兵节点。

您需要分别完成这两项任务：

```
v->prev->next = u;
v->prev = u; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:37:46.170

首先，您没有为*所有*节点初始化`prev`和`next`指针。构造列表时，列表的构造函数会：

 *```
header = new DNode;             // create sentinels
trailer = new DNode;
header->next = trailer;         // have them point to each other
trailer->prev = header; 
```

这意味着`header->prev`并且`trailer->next`未初始化。这些指针不会`NULL`自动初始化，所以要小心。

但是您观察到的根本原因是在您的`add_front()`函数中，您正在调用一个`add()`最终执行此操作的函数：

```
// Replacing v with header->next, which is the actual argument of the call
...
u->next = header->next;          // u->next = trailer      
u->prev = header->next->prev;    // u->prev = trailer->prev; // Uninitialized!
header->next->prev = u;          // trailer->prev = u;
header->next->prev->next = u;    // u->next = u 
```

由于最后一条语句，这显然是错误的，并且因为您从未分配`header->next = u`.

顺便说一句，我建议您考虑使用智能指针而不是原始指针，并根据所需的所有权语义进行适当的选择。除此之外，智能指针会自动初始化为`nullptr`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:37:30.333

代码在 windows 中的 Mingw 编译器上运行得很好，并且使用代码块给出了 23，而不是 0....但是，我建议进行以下更改，因为一些编译器从右到左分配值，堆栈的东西....

```
void DLinkedList::add(DNode* v, const int e) {
    DNode* u = new DNode;  u->elem = e;     // create a new node for e
    std::cout<<u->elem<<std::endl;
    u->next = v;                // link u in between v
    u->prev = v->prev;              // ...and v->prev
    v->prev->next = u;              // do this first......
    v->prev = u;                    // then this.
} 
```*

# java - 多部分表单处理

> ID：14662252
> 
> 赞同：0
> 
> 时间：2013-02-02T13:14:43.713
> 
> 标签：java, forms, servlets, multipart

我正在使用公共文件上传，使用 post 方法上传图像文件。图像上传成功，但是当我尝试使用`request.getParameter("field_name");`方法访问表单的任何其他字段时，我得到所有相应字段的空值，因此我得到了各种异常。这是我的表单代码：

```
<form id="add-book" name="add-book" class="add-book" method="post" action="ServletImageUpload" enctype="multipart/form-data">
        <table>
        <tr>
          <td>field1</td>
          <td><input type="text" name="isbn" id="isbn" /></td>
         </tr>
         <tr>
           <td>Upload image</td>
           <td><input type="file" name="upload"  /></td>//image upload field
         </tr>

       <!--rest of the form fields -->
 </form> 
```

那么方法有问题`request.getParameter();`吗？为什么我无法获取参数的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:30:49.393

我猜你不能`request.getParameter()`在 form 是`multipart`. 您可以使用提供 API 的[Apache Commons Fileupload](http://commons.apache.org/fileupload/using.html)来解析多部分请求，并单独遍历它的各个部分。

# ios - 清理和删除 DerivedData 文件夹的区别

> ID：14662259
> 
> 赞同：8
> 
> 时间：2013-02-02T13:15:35.837
> 
> 标签：ios, xcode, xcode4.5

这两个动作之间的实际区别是什么？

我问是因为我发现清理 (Cmd-Shift-K) 是一个缓慢且耗时的过程，并且删除整个 DerivedData 文件夹的速度要快得多。

**更多信息**

1) 我已将我的 DerivedData 文件夹设置在 XCode 首选项中我的项目文件夹的相对文件夹中。

2）我通常处理只有一个目标的项目。我很少需要处理 2 个或更多目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T11:17:44.637

这在 User Your Loaf 关于[Xcode 4 DerivedData 和清理构建目录](http://useyourloaf.com/blog/2011/09/14/xcode-4-deriveddata-and-cleaning-the-build-directory.html)的文章中进行了解释。

> 在 Xcode 4 中，Product > Clean 菜单选项通过删除应用程序和 dSYM 文件以及预编译的头文件来清理所有目标的构建目录。

另一方面，DerivedData 包含其他内容：

> 每个工作区都有一组唯一的符号索引、构建产品、窗口布局等，否则 Xcode 将其称为派生数据。

因此，如果您想真正清理所有内容，答案是使用新的 Xcode 4 *Clean Build Folder*操作，方法是在按住*Option*键的同时选择*Product*菜单。这也将删除 DerivedData 内容：

 *![在此处输入图像描述](../Images/ad0149ee5f2bf5cc1a56d74fcdecb330.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:49:22.263

1.  清理速度较慢，因为它逐个删除文件，而不是整个文件夹
2.  删除 DerivedData 文件夹后，速度会有所下降，因为 XCode 必须为您的源重新创建索引。
3.  有“清理构建文件夹...”命令（Option-Cmd-Shift-K，或选择产品菜单并按选项按钮）。它删除文件夹而不是文件，因此对您来说可以更快。*

# android - GLES20.glTexImage2D 使用 GL_LUMINANCE_ALPHA 加载的损坏数据

> ID：14662268
> 
> 赞同：0
> 
> 时间：2013-02-02T13:16:47.257
> 
> 标签：android, opengl-es, glteximage2d

我正在使用 opengl ES2.0 在 Android 上渲染 16 位灰度数据。（我在着色器中处理 16 位到 8 位的动态范围缩放，16 位输入是强制性的，因为它是数据的传入格式。）分辨率为 640x512。

目前，我通过一次将 2 个像素推入 320x512 32 位 RGBA 纹理来完成这项工作。IE：

`texture2D(thData, vTextureCoord)[0]` 是像素`i`低字节，

`texture2D(thData, vTextureCoord)[1]` 是像素`i`高字节，

`texture2D(thData, vTextureCoord)[2]` 是像素`i+1`低字节，

`texture2D(thData, vTextureCoord)[3]` 是像素`i+1`高字节。

我能够从中重建数据，但我已经通过渲染到 640x512 缓冲区并使用 gl_FragCoord.x 和条件语句来确定是从通道 0,1 还是 2,3 绘制像素来重建原始分辨率。代码如下所示：

```
 private final String mFragmentShader =
    "precision highp float;\n" + 
    "varying vec2 vTextureCoord;\n" +
    "uniform sampler2D thData;\n" +
    "void main() {\n" +

    //This works out whether the pixel is in an odd or even column:
    "int odd = 0;\n" +
    "if (fract(gl_FragCoord.x/2.) >= 0.5) odd = 2;\n"+

    //This chooses the channels based on the column number
    "float data =((texture2D(thData, vTextureCoord)[odd]) + (texture2D(thData, vTextureCoord)[odd+1]*256.))*256.;\n" + 
```

原则上这很好，但由于某种原因，我似乎正在交换一些列，我的猜测是它可能是舍入错误导致条件语句的结果不正确。

我想做的是首先使用 16 位全分辨率纹理来避免下采样，这看起来很简单；我刚刚更改了 glTexImage2D 代码：

```
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGBA, 320, 512, 0, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, sBuffer); 
```

到

```
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE_ALPHA, 640, 512, 0, GLES20.GL_LUMINANCE_ALPHA, GLES20.GL_UNSIGNED_BYTE, sBuffer); 
```

但是，当我这样做时，我似乎在纹理中得到了奇怪的数据。`texture2D(thData, vTextureCoord)[0]`似乎是正确的，但`texture2D(thData, vTextureCoord)[1]`具有与元素 0 相同的数据，像素的高字节无处可见。

我在这里错过了什么吗？

或者任何人都可以提出另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:40:46.913

您是否设置了所有像素解包参数？见[glPixelStorei](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)。您很可能必须将 GL_UNPACK_ALIGNMENT 设置为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:43:48.000

`GL_LUMINANCE_ALPHA`纹理在所有 、 和 组件中复制第`x`一个`y`组件`z`。第二个组件是 in `w`，正如`ALPHA`枚举名称的 "" 部分所暗示的那样。参见`GL_LUMINANCE_ALPHA`格式的定义：[http ://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexImage2D.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexImage2D.xml)

# c# - WPF动画工作不规律

> ID：14662269
> 
> 赞同：1
> 
> 时间：2013-02-02T13:16:47.863
> 
> 标签：c#, .net, wpf, animation, graphics

我在 MainWindow 中有一个为 GeometryModel3D 对象的立方体的动画代码

**动画代码**

```
 private void animate(GeometryModel3D back)
    {
            Transform3DGroup transGroup = new Transform3DGroup();
           DoubleAnimation cardAnimation = new DoubleAnimation();

            cardAnimation.From = 0;
            cardAnimation.To = 0.3;
            cardAnimation.Duration = new Duration(TimeSpan.FromSeconds(2));

            cardAnimation.AutoReverse = true;                      
            Transform3D transform = new TranslateTransform3D(0, 0, 0);
            transGroup.Children.Add(transform);

            back.Transform = transGroup;
            transform.BeginAnimation(TranslateTransform3D.OffsetZProperty,
                      cardAnimation);

    } 
```

在**主窗口**代码中我有

```
 Window1 win1 = new Window1();

   public MainWindow()
    {
        InitializeComponent();

      }

     public void textbox_keydown( KeyEventArgs e)
          {
              if(e.Key==Key.Return)
               {  
                  if( some condition nothing to do with animation at all)
                  { 
                      animate(cube);
                       win1.ShowDialogue();
                    }

                    //Position1 
               }
           } 
```

当我运行程序第一次动画不显示并且 window1 显示时，现在我再次在文本框中输入一些条目并再次输入第二次动画显示，之后每次只有第一次它不显示。

另外，如果我输入 **“动画（立方体）；”** 在位置 1 动画即使是第一次也能正常工作，每隔一次也会偏离路线。

为什么在上述情况下调用 textbox_keydown(KeyEventArgs e) 时动画第一次不工作，而在调用 textbox_keydown(KeyEventArgs e) 时只在第二次及以后工作。

我忘记了任何线程问题或启动吗？

上面的动画函数在 textbox_keydown(KeyEventArgs e) 之后的 MainWindow 中。

# sql-server - 当网站托管在 IIS 中时无法打开数据库

> ID：14662271
> 
> 赞同：3
> 
> 时间：2013-02-02T13:17:00.290
> 
> 标签：sql-server, asp.net-mvc, iis

当我从 Visual Studio 运行我的网站时，一切正常。现在我正在尝试继续并开始测试多租户部分，所以我不得不将我的网站移动到 IIS。

由于某种原因，我无法访问数据库。打开需要访问数据库的页面时出现的错误是：

> *无法打开登录请求的数据库“GWD”。登录失败。用户 'IIS APPPOOL\gwd' 登录失败。*
> 
> *异常详细信息：System.Data.SqlClient.SqlException：无法打开登录请求的数据库“GWD”。登录失败。用户 'IIS APPPOOL\gwd' 登录失败。*

另一个[论坛](http://devilswork.wordpress.com/2009/01/28/login-failed-for-user-networkservice/)描述了如何添加`NT AUTHORITY\NETWORK SERVICE`. 但这并不能解决问题。我确实`NT AUTHORITY\NETWORK SERVICE`为所有现有数据库（包括主数据库）创建并添加了 dbowner，但没有结果。

我没有想法，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T13:23:27.937

您还需要将应用程序池标识更改`NETWORK SERVICE`为。启动 Internet 信息服务 (IIS) 管理器，深入到应用程序池，然后选择您正在使用的应用程序池。（不确定？深入到左侧站点下的虚拟目录，然后单击右侧的基本设置。）然后单击您的应用程序池，单击高级设置，然后将进程模型下的身份更改为网络服务。

在 SQL Server Management Studio 中，您需要在`NT AUTHORITY\NETWORK SERVICE`数据库的安全性下添加用户，但听起来您已经这样做了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:55:04.100

您看到错误“无法打开登录请求的数据库“GWD”。登录失败。用户“IIS APPPOOL\gwd .....”的登录失败，因为您将应用程序复制到 IIS 服务器并且成员资格提供程序已在没有 applicationName 属性的情况下添加到 web.config 文件中。

我建议你在你的提供者声明中添加一个“applicationName”属性。例子：

```
<membership>
<providers>
<add name ....
.
.
.
.
applicationName="/yourWebApp" />

</providers>
</membership> 
```

只需查看 aspnet_Application 表即可找出在开发期间创建用户/数据时使用的应用程序名称。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:51:49.827

@Nicholas Piasecki 提供了一种潜在的解决方案，另一种是保留应用程序池，而是授予它当前在访问数据库的情况下运行的 AppPoolIdentity。

首先，您需要为用户添加一个新的 Windows 登录到 SQL Server：“IIS APPPOOL\gwd”。

完成此操作后，您将能够将该用户添加到具有适当权限的数据库中，就像您为网络服务所做的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-23T07:28:29.983

我认为您必须阅读这篇文章 [从 codeproject 配置 IIS、asp.net 和 SQL Server](http://www.codeproject.com/Articles/674930/Configuring-IIS-ASP-NET-and-SQL-Server) 在本文中，您将学习如何使用网络服务配置 IIS 和 SQL Server（附截图）

**本文内容**

*   安装 IIS
*   为网络服务配置 IIS
*   配置 SQL Server 权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T05:56:32.533

在您的 IIS 上选择您在站点上使用的应用程序池 > 右键单击​​ > 单击高级设置。在身份上选择“网络服务”

[在此处输入图像描述](https://i.stack.imgur.com/3wPO1.png)

在您的数据库 [SQL] 上为 NT AUTHORITY\NETWORK SERVICE 创建登录名。修改用户映射

[在此处输入图像描述](https://i.stack.imgur.com/c1PWd.png)

# qt - 从 Qt 4.x 移植到 Qt 5

> ID：14662273
> 
> 赞同：3
> 
> 时间：2013-02-02T13:17:11.263
> 
> 标签：qt, qt4, qt5, qt4.8

有人将 Qt 4.x 应用程序移植到 Qt 5 吗？我们即将移植一些广泛使用 Qt 4.8 的软件。我们使用 Core、GUI、Network、OpenGL、Test、Webkit 和 Xml 库，我们的软件可在 Windows、OS X 和 Linux 上使用。

如果您有将 Qt 4.x 应用程序移植到 Qt 5 的经验，您是否遇到过任何具体问题？

# wordpress - Wordpress php查询数据库中超过1个表

> ID：14662274
> 
> 赞同：0
> 
> 时间：2013-02-02T13:17:26.163
> 
> 标签：wordpress

我有一个查询，我需要访问由 ID 相关的不同表中的信息以获取必要的信息。这就是代码的样子，我想知道是否有更有效的方法来编写代码？

```
<?php 
global $wpdb;
$eventlist = $wpdb->get_results( $wpdb->prepare( "SELECT * FROM wp_events_detail LIMIT 3 ", $id ), OBJECT );
foreach ( $eventlist as $event ) {
    $get_team_id = $event->id;
    $startdate = $event->start_date;
    $enddate = $event->end_date;
    echo  '<div class="span3">';
    echo  '<h3>' .$event->event_name. '</h3>';
    echo ''.date("l", strtotime($startdate)).'<br />';
    echo date("F", strtotime($startdate));
    echo $event->venue_title;

    /* GET START AND END TIME */
        $event_times = $wpdb->get_results( $wpdb->prepare( "SELECT * FROM wp_events_start_end WHERE event_id = %d", $get_team_id ), OBJECT );
        foreach ( $event_times as $event_time ) {
            $start_time = $event_time->start_time;
            $end_time   = $event_time->end_time;

            echo '<strong>' . date("g:i", strtotime($start_time)) . '</strong><small>' . date("a", strtotime($start_time)) . '</small> > ';
            echo '<strong>' . date("g:i", strtotime($end_time)) . '</strong><small>' . date("a", strtotime($end_time)) . '</small>';
        }

        /* Get Venue Name */
        $event_venue = $wpdb->get_results( $wpdb->prepare( "SELECT * FROM wp_events_venue_rel WHERE event_id = %d", $get_team_id ), OBJECT );
        foreach ( $event_venue as $venue ) {
            $venue_id = $venue->venue_id;                               
            $ts = $wpdb->get_results( $wpdb->prepare( "SELECT * FROM wp_events_venue WHERE id = %d", $venue_id ), OBJECT );
            foreach ( $ts as $t ) {
                echo $t->name;
            }
        }
    echo  '</div>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:48:27.600

是的，有一种**更**有效的方法。[在此处](http://mysqljoin.com/joins/inner-join-tutorial/)或[此处](http://www.mysqltutorial.org/mysql-inner-join.aspx)或[此处](https://dev.mysql.com/doc/refman/5.0/en/join.html)查看 MySQL 中的 JOIN

# ruby-on-rails - Wicked gem Rails - 如何创建一个新对象

> ID：14662279
> 
> 赞同：6
> 
> 时间：2013-02-02T13:18:32.767
> 
> 标签：ruby-on-rails, controller

Wicked Gem Wiki 上的[逐步构建部分对象](https://github.com/schneems/wicked/wiki/Building-Partial-Objects-Step-by-Step)页面解释了如何使用`wicked`.

但是我必须如何创建一个新`Product`对象？

我必须在新的行动中这样做`ProductsController`吗？我必须重定向到哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-23T07:57:05.393

以下语句在[逐步构建部分对象](https://github.com/schneems/wicked/wiki/Building-Partial-Objects-Step-by-Step)页面中给出。

`This also means to get to the create action we don't have a product_id yet so we can either create this object in another controller and redirect to the wizard, or we can use a route with a placeholder product_id such as [POST] /products/building/build in order to hit this create action.`

您可以在另一个控制器中创建对象并重定向到向导或使用带有占位符的路由来点击创建操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-11T17:15:22.360

这是我的应用程序中对我有用的示例

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_sign_up_path_for(resource)
    user_background = resource.build_user_background
    user_background.save
    user_background_build_path(user_background.id, :first_step_name)
  end

end 
```

这将创建`UserBackground`对象，然后使用新创建的对象 ID 将用户传递到 wicked 控制器的第一步。

# ios - iOS Gamekit 蓝牙 4+ 玩家？

> ID：14662287
> 
> 赞同：3
> 
> 时间：2013-02-02T13:19:41.907
> 
> 标签：ios, bluetooth, gamekit, multiplayer

我想制作一个多人游戏，允许 4 个人通过蓝牙将他们的 iphone 连接在一起并玩实时网络游戏。

我一直在阅读和阅读有关此的内容，但无法确定是否可能。我找到了演示如何通过蓝牙连接 2 个设备的文档，但我想连接 4 个。这可能吗？

它可以是主机客户端设置，还是必须是 p2p？

有没有人打算通过蓝牙实现 4 人多人 ios 游戏？你能给我一些关于这怎么可能的建议吗？

# uitableview - monotouch UITableView SectionIndexTitles 刹车自定义单元格的背景

> ID：14662292
> 
> 赞同：0
> 
> 时间：2013-02-02T13:19:50.040
> 
> 标签：uitableview, xamarin.ios

我在使用 Monotouch SectionIndex 侧面板时遇到了非常奇怪的问题。基本上加完之后

**公共覆盖字符串[] SectionIndexTitles (UITableView tableView)**

对于我的表数据源，我可以看到侧索引被正确填充，尽管它削减了我的自定义单元格的一些背景，这使它看起来有点奇怪（见下图）

我在 AppearanceManager 中设置了**UITableView.Appearance.BackgroundColor = UIColor.Clear**，从外观上看，SectionIndex 继承了它，尽管我想要让 SectionIndex 保持在“顶部”而不影响它下面的任何东西，包括我的单元格的背景图像.

我是否缺少一些需要应用于 UITableView 的属性？

我花了很长时间试图找出丢失的东西，但没有得到任何结果......

谢谢！

截图 - [http://blue-and-orange.net/media/30659/untitled.jpg](http://blue-and-orange.net/media/30659/untitled.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:25:20.243

好的，我发现了问题！

不应直接在单元格的 BackgroundColor 属性上分配背景，而是需要将自定义单元格中的 BackgroundView 分配给 - new UIVIew() （具有背景设置）

UIView backgroundView = new UIView(); backgroundView.BackgroundColor = UIColor.FromPatternImage(Resources.CinemaListingCellBackground); 背景视图 = 背景视图；

# php - PHP忽略if语句，取消设置会话变量

> ID：14662293
> 
> 赞同：0
> 
> 时间：2013-02-02T13:19:52.573
> 
> 标签：php, session, unset

我有一个 PHP 脚本，它存储一个从会话变量中提交表单的 url，然后将其与当前页面 url 进行比较。如果它与会话中存储的不同，它就会被取消设置，至少它应该是这样工作的。问题是用于检查两个 url 是否匹配的 if 语句似乎被忽略了，并且会话变量无论如何都未设置。

```
$compare_url_old = array_shift(explode(',', $_SESSION['search_page']));
$compare_url_new = array_shift(explode(',', $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']));

if ($compare_url_new != $compare_url_old)
{
    unset($_SESSION['search_page']);
    unset($_SESSION['search_price_min']);
    unset($_SESSION['search_price_max']);
    unset($_SESSION['search_name']);
} 
```

奇怪的是，如果我尝试在 if 语句中回显某些内容，它会正常工作，但由于某种原因，每次都会调用未设置的函数，尽管结果如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:41:36.527

问题解决了，原来这是我在有问题的代码上方忽略的东西，脚本工作正常。对此感到抱歉。

# objective-c - 用未知数量的列填充 NSTableView

> ID：14662295
> 
> 赞同：8
> 
> 时间：2013-02-02T13:20:09.890
> 
> 标签：objective-c, xcode, cocoa, nstableview

我有一个 NSTableview 和一个按钮。NSTableview 的列数未知。

第一列有一个图像井和 2 个文本框，其他的（同样是未知数字）是普通的文本框列。

该按钮打开文件打开对话框。一旦我选择了文件（.jpg），我想处理它们。

到目前为止，一切都已完成（选择文件、列等）。缺少的是表格的填充：

我有遍历所有选定文件的循环。做这个的最好方式是什么：

*   在第一个单元格的图像井中显示图像，
*   在第一个单元格的第一个文本框中键入文件名，
*   在文本框的第二个单元格中键入文件路径，
*   在所有其他列中键入“YES”。

我的困难是我不知道会有多少列，因为它取决于用户。列数在运行时不会改变。它们是在启动时根据配置设置的。如果更改了配置，则应重新加载应用程序。

我是 Objective-C/Cocoa 编程的初学者。

编辑：根据要求提供附加信息：

它是一个基于视图的 NSTableView，每一列都代表一个稍后必须对图像执行的操作。程序用户可以决定采取什么行动以及采取多少行动，这就是表格视图中列数未知的原因。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T16:30:52.097

您可以使用 以编程方式添加列`addTableColumn:`。此方法采用`NSTableColumn`您可以在代码中创建的实例。

您的体系结构的其余部分（显示图像等）不会因为列是动态添加的而与“正常”代码发生特别变化。

这是一个可以帮助您入门的片段：

```
NSTableColumn* tc          = [[NSTableColumn alloc] init];

NSString *columnIdentifier = @"NewCol"; // Make a distinct one for each column
NSString *columnHeader     = @"New Column"; // Or whatever you want to show the user

[[tc headerCell ] setStringValue: columnHeader];
tc.identifier = columnIdentifier;

// You may need this one, too, to get it to show.
self.dataTableview.headerView.needsDisplay = YES; 
```

填充表格时，假设模型是一个对象数组（in `self.model`）`NSDictionary`，它可以是这样的；

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{

     NSString *columnIdentifier = tableColumn.identifier;

     NSDictionary *rowDict = [self.model objectAtIndex: row];

     NSString *value = [rowDict valueForKey: columnIdentifier]; // Presuming the value is stored as a string 

     // Show the value in the view
} 
```

更多在[文档](https://developer.apple.com/reference/appkit/nstableview)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T02:31:47.233

当用户添加列或行时，您应该在模型中反映它（通过绑定或通过代码），以便在需要填充表时知道表的大小。

设置 tableView.delegate（在代码中或在 Interface Builder 中），参考[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSTableViewDelegate)

实施：

```
- (NSView*) tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn*)tableColumn row:(NSInteger)row
{ 
    Item* itemView = [tableView makeViewWithIdentifier:@"rowItem" owner:self];

    /*Here you populate your cell view*/
    id entryObject = [self.entries objectAtIndex:row];
    [itemView setEntry:entryObject];

    return itemView;
} 
```

然后调用`[tableView reloadData];`

也许你最好使用这种方法

`- (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex`

只需查看[NSTableViewDataSource](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40004178)和[NSTableViewDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSTableViewDelegate)

# javascript - 电子邮件地址中的 Javascript 'cvml'

> ID：14662296
> 
> 赞同：10
> 
> 时间：2013-02-02T13:20:12.723
> 
> 标签：javascript, email, gmail

我最近收到了一个有 Gmail 地址的人的回复。

在邮件正文中，我的回信地址为：

```
"My name" <myname@mydomain.com<javascript:_e({}, 'cvml','myname@mydomain.com');>> 
```

在线搜索显示这段 JavaScript 代码经常出现在电子邮件消息中，但没有解释它的作用。

这与Google+有关吗？

它的目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T20:22:55.070

我相信这源于用于渲染自定义字体的 Cufon-yui.js。Cufon 用于`cvml`返回`urn:schemas-microsoft-com:vml`向量标记语言的 XML 命名空间。

# spring - spring 和 log4j 示例中的 log4j 空指针异常

> ID：14662298
> 
> 赞同：1
> 
> 时间：2013-02-02T13:20:18.737
> 
> 标签：spring, log4j, nullpointerexception

我正在尝试在我的春季示例中包含 log4j。但是，当我尝试

```
private static final Logger log = Logger.getLogger(MainApp.class); 
```

我得到了错误

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
at org.apache.logging.log4j.LogManager.getContext(LogManager.java:203)
at org.apache.log4j.Logger$PrivateManager.getContext(Logger.java:61)
at org.apache.log4j.Logger.getLogger(Logger.java:43)
at core.MainApp.<clinit>(MainApp.java:11)
Exception in thread "main" 
```

MainApp.java 文件：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import org.apache.log4j.Logger;

public class MainApp {

private static final Logger log = Logger.getLogger(MainApp.class);
public static void main(String[] args) {

      ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");

       log.info("Going to create HelloWord Obj");

       HelloWorld obj = (HelloWorld) context.getBean("helloWorld");

       obj.getMessage();

       log.info("Exiting the program");

}
} 
```

我还将 log4j.properties 文件保存在我的类路径中。我想我也初始化了我的 log4j。我的 beans.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="helloWorld" class="core.HelloWorld">
   <property name="message" value="Hello World!"/>
</bean>

<bean id="log4jInitializer">
<property name="staticMethod">
    <value>org.springframework.util.Log4jConfigurer.initLogging</value>
</property>
<property name="arguments">
     <list>
        <value>log4j.properties</value>
     </list>
</property>
</bean>

</beans> 
```

我的 log4j.properties 文件：

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=D:\\loging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=debug, file, stdout 
```

有谁知道是什么问题？问候！

# java - 在 JFrame 上查看附加图像

> ID：14662305
> 
> 赞同：0
> 
> 时间：2013-02-02T13:21:27.903
> 
> 标签：java, image, swing, jframe

我用 JFrame 创建了一个登录框，不允许用户输入空或有字母的用户名和密码。

我的登录框架和主框架类都是 jframe（扩展 jframe），我想对它们都使用这个 ImagePanel 类。但是，我想为我的每个类更改它的 painComponents() 方法。

我可以更改 ImagePanel 类摘要来执行此操作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:24:31.103

您必须调用该`repaint()`方法。

此外，如果添加新组件，您还必须验证框架：

```
validate();
repaint(); 
```

# c++ - 如何使用def文件在de dll中使用mfc

> ID：14662308
> 
> 赞同：1
> 
> 时间：2013-02-02T13:22:04.380
> 
> 标签：c++, plugins, dll, mfc

我正在为名为 MusicBee 的音乐播放器编写插件。我在写它时遇到了一个问题。我必须使用 mfc 进行很多思考。比如hbitmap、特殊定时器等东西。但是每次我将 VS2012 中的“使用 MFC”从“使用标准 Windows 库”更改为“使用 mfc ...”时，我的代码都不会编译。问题是我必须用于 MusicBee 插件的 def 文件。

def 文件如下所示：

```
LIBRARY "mb_LogitechPlugin" 
EXPORTS   
    Initialise @1 
    Configure @2
    Close @3
    Uninstall @4
    ReceiveNotification @5
    RetrieveLyrics @6
    RetrieveArtwork @7
    SaveSettings @8
    Refresh @9
    IsReady @10
    GetIcon @11
    FolderExists @12
    GetFolders @13
    GetFiles @14
    FileExists @15
    GetFile @16
    GetFileArtwork @17
    GetPlaylists @18
    GetPlaylistFiles @19
    GetStream @20
    GetError @21 
```

所有其他代码可以在以下位置找到： [https ://bitbucket.org/jimmyD/musicbee-logitech-applet/src](https://bitbucket.org/jimmyD/musicbee-logitech-applet/src)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:24:31.413

您根本不必使用 MFC。

MFC（Microsoft 基础类）只不过是 Win32 API 的（坏）包装器。你不需要全部使用它。如果 MFC 为您做了一些您无法弄清楚的特殊事情，我建议您查看包含的 MFC 源代码。这真的不值得，只是为了获得 HBITMAP 或其他一些东西。

# ruby-on-rails - 收到的日期时间格式日期在 Rails 中采用不同的格式

> ID：14662311
> 
> 赞同：0
> 
> 时间：2013-02-02T13:22:32.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, datejs

我有一个表，其中包含一个名为 DOB 的列，其数据类型是 DATETIME。问题是 created_at 也是一个日期时间，但它通过 JSON 接收的数据是这种格式

```
"created_at":"2013-02-02 11:57:42",
"dob":"2013-02-18T18:30:00Z" 
```

两个日期的格式不同，但它们都具有日期时间数据类型。现在我正在使用[Datejs](http://www.datejs.com/)

要格式化不会解析 DOB 格式的日期，它只能解析 created_at 格式。

我现在该怎么办 ？

这是我正在做的解析 datejs

```
 if(value.dob != null){
            alert(value.dob);
            d1 = Date.parse(value.dob);
            alert(d1);
            dob = d1.toString("M-d-yyyy");

        } 
```

我在控制台上收到此错误：

```
: d1 is null
[Break On This Error]   

dob = d1.toString("M-d-yyyy"); 
```

我的控制器：

```
 def get_oi_report_contact
       @contactlist = CaseOiReportMap.select("rc.*").where("case_oi_report_maps.oireport_identifier = ?",identifier)
       .joins("LEFT JOIN case_oi_report_contacts_maps cm on cm.case_oi_report_map_id = case_oi_report_maps.id")
       .joins("LEFT JOIN oi_report_contacts rc on rc.id = cm.oi_report_contact_id ")
       respond_to do |format|
          format.json { render :json => @contactlist.to_json }
       end

  end 
```

我还使用了猴子补丁：

```
class ActiveSupport::TimeWithZone
    def as_json(options = {})
        strftime('%Y-%m-%d %H:%M:%S')
    end
end 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:27:37.180

用于`strftime`格式化时间字符串[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)

# c - 副作用的大小和分配位置

> ID：14662312
> 
> 赞同：0
> 
> 时间：2013-02-02T13:22:36.733
> 
> 标签：c, size, malloc

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

我不明白为什么会这样：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct
{
    char b;
    int a;
} A;

typedef struct
{
    char b;
} B;

int main() {
    A object;
    printf("sizeof char is: %d\n",sizeof(char));
    printf("sizeof int is: %d\n",sizeof(int));
    printf("==> the sizeof both are: %d\n",sizeof(int)+sizeof(char));
    printf("and yet the sizeof struct A is: %d\n",sizeof(object));
    printf("why?\n");

    B secondObject;
    printf("pay attention that the sizeof struct B is: %d which is equal to the "
            "sizeof char\n",sizeof(secondObject));

    return 0;
} 
```

我想我在代码中解释了我的问题，无需再解释了。除此之外我还有一个问题：我知道在：堆/静态堆/堆栈上有分配，但这意味着分配位置是未知的，怎么可能？

我说的是这个例子：

```
 typedef struct
{
    char *_name;
    int   _id;
} Entry;

int main()
{
    Entry ** vec = (Entry**) malloc(sizeof(Entry*)*2);
    vec[0] = (Entry *) malloc(sizeof (Entry));
    vec[0]->_name = (char*)malloc(6);
    strcpy (vec[0]->_name, "name");
    vec[0]->_id = 0;
    return 0;
} 
```

我知道： vec 在堆栈上。*vec 在堆上。*vec[0] 在堆上。vec[0]->id 在堆上。

但是： vec[0]->_name 不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:26:10.100

在结构的成员之间和结构的末尾有未指定的填充量。在 C 中，结构对象的大小大于或等于其成员大小的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:29:20.447

编译器可以自由地在结构中添加填充以确保数据类型正确对齐。例如， an`int`将与`sizeof(int)`字节对齐。所以我希望你的`A`结构大小的输出是`8`. 编译器会这样做，因为`int`从未对齐的地址中获取一个充其量是低效的，最坏的情况是根本不起作用——这取决于计算机使用的处理器。对于大多数数据类型，x86 将愉快地从未对齐的地址中提取，但提取操作需要大约两倍的时间。

在您的第二个代码片段中，您尚未声明`i`.

所以`vec[0]->_name`不是未知的 - 它在堆上，就像你从“malloc”（和`malloc`'s 的兄弟姐妹）得到的任何其他东西一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T13:32:09.630

如果您搜索 CPU 和内存对齐，请查看[这个问题](https://stackoverflow.com/q/3025125/912144)以及[这个问题和许多其他问题。](https://stackoverflow.com/q/1855896/912144)简而言之，如果 CPU 访问与其正在读取的数据大小对齐的内存，它们会更快乐。例如，如果您正在读取 a `uint16_t`，那么如果您在一个 2 的倍数的地址读取它会更有效（在大多数 CPU 上）。为什么 CPU 以这种方式设计的细节是另一回事。

这就是为什么编译器会来救援并以一种最适合 CPU 访问它们的方式填充结构的字段，但代价是额外的存储空间。在您的情况下，您可能会在`char`and之间获得 3 个字节的填充`int`，假设`int`是 4 个字节。

如果您查看 C 标准（我现在附近没有）或[malloc 的手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)，您会看到这样一个短语：

> malloc() 和 calloc() 函数返回一个指向已分配内存的指针，该指针适合任何类型的变量对齐。

这种行为正是由于我上面提到的相同原因。所以简而言之，内存对齐是需要关心的，这就是编译器在结构布局和其他地方为你做的事情，比如局部变量的布局等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T13:33:05.883

您在这里遇到了结构填充。`b`编译器可能会在 in的字段之后插入三个字节的填充`struct A`，以便该`a`字段是 4 字节对齐的。您可以使用特定于编译器的位在某种程度上控制此填充；例如，在 MSVC、[pack pragma](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.90%29.aspx)或[`aligned`](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html)GCC 上的属性，但我不建议这样做。结构填充用于指定成员对齐限制，并且某些架构会在未对齐访问时出错。（其他人可能会手动修复对齐，但通常这样做会[相当缓慢](http://www.alexonlinux.com/aligned-vs-unaligned-memory-access)。）

另见：[http ://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding](http://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding)

* * *

至于你的第二个问题，我不确定你所说的“未知”是什么意思。需要详细说明吗？

# php - 带有隐藏字段的输入表单如何保护它

> ID：14662313
> 
> 赞同：4
> 
> 时间：2013-02-02T13:22:55.157
> 
> 标签：php, security

在我知道如何保护上传图像[绕过表单输入字段以上传不需要的文件](https://stackoverflow.com/questions/14660632/bypassing-forms-input-fields-to-upload-unwanted-files)后，我想给出另一个来自 2 个字段的示例，其中一个是隐藏的。

**SQL 表**(id,name,jod,number)

```
CREATE TABLE `users` (
  `id` bigint(20) unsigned NOT NULL auto_increment,
  `name` varchar(255) default '0',
  `job` varchar(255) default NULL,
  `number` varchar(255) default NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

**表格代码**（支持成员将编辑自己的信息）

```
<form action="send.php" method="post" name="send" id="send">
 <input type="text" name="name" id="name" value="John"/>
 <input type="text" name="job" id="job" value="Plumber"/>
 <input type=hidden name="number" id="number" value="1234"/>
 <input type="Submit" name="Submit" value="Submit"/>
</form> 
```

后来有一个firefox扩展可以绕过不同的输入到服务器端绕过检查并且可能会造成很多损坏所以在这里它可以停止整个过程并使您能够将隐藏表的值编辑`number`为任何`value="1"`导致更新的值会员信息有`value number 1`。

![在此处输入图像描述](../Images/eb8828fc7e2060eef3428c0357e9b0a6.png)

该扩展的工作原理如下，它可以在输入数据传递到服务器端之前伪造输入数据。

![在此处输入图像描述](../Images/ff1b47fbc7ba0aa7067219c289f7e831.png)

**PHP 代码发送.php**

```
if(isset($_POST['send'])){  

$name   = mysql_real_escape_string($_POST[name]);
$job    = mysql_real_escape_string($_POST[job]);
$number = mysql_real_escape_string($_POST[number]);

$sql= "update users SET name='$name',job='$job' WHERE number='$number'";
       mysql_query($sql) or die("query failed: $sql".mysql_error());

echo "Update Done";

} else { 
echo "Nothing to update";
} 
```

**那么如何** 保护这个简单的表单免受这种输入表单的影响？~ 谢谢

这个问题真的很痛苦，因为它使我的网站可以自由地被黑客入侵:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:35:15.717

如果用户授权不是您的原因，您可以尝试以下技术：

*   使用带有其他信息的数字的哈希设置隐藏字段
*   使用加密的数字设置隐藏字段（可能的盐也可以增加安全性）

当然，它会在发送表单 HTML 和验证帖子信息时增加额外的步骤，但至少攻击者在帖子上伪造一个有效数字会困难得多。虽然如果攻击者知道不同用户的加密/散列号码，它不会拯救你，除非明智地使用带有隐藏字段的加盐信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:29:20.290

您无法控制人们向您的服务器提交的数据。

您必须在服务器上检查用户是否有权查看信息或进行他们要求的更改。

例如：

> 能够将隐藏表编号的值编辑为任何值，例如 value="1" 导致成员的更新信息具有该值编号 1。

该过程将类似于：

1.  是否允许编辑此字段？如果是这样，那么确定。
2.  请求是否来自经过身份验证的用户？如果不是，则返回错误消息和登录表单
3.  请求是否来自 id=1 的用户？如果是这样，那么确定
4.  如果请求来自具有管理员权限的用户？如果是这样，那么确定
5.  返回错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:31:10.563

如果您有一个表单和任何用户来编辑这些值，那么这个问题就会出现。更好的方法是对用户进行身份验证。仅允许使用帐户登录的用户对其各自的帐户进行更改。

另外，不要使用 mysql_query 或 mysql_* 之类的东西，它们在 php5 中是不安全的和贬值的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T05:22:53.300

无法保护隐藏字段。防止恶意人员对其进行编辑是 100% 不可能的。

您能做的最好的事情就是验证其数据。

对于示例字段，您能做的最好的事情就是确保它实际上是一个数字。

但这无济于事。

您需要做的是将旧数据作为隐藏数据发送。所有的。用旧身份证完成。

然后验证旧数据和新数据。确保其中没有注入的 sql 代码。完成此操作后，您将拥有

```
$name
$job
$id
$old_name
$old_job 
```

可以了，好了。那么你也能。

`select * from users where name="$old_name" and job="$old_job`

如果你回到一排，那么你可以 `update users set name="$name", job="$job$" where id=$id`

现在，即使用户更改了 ID，它也不会做任何事情，因为选择将返回 0 行，并且编辑尝试将中止。

现在，如果有人碰巧知道其他人输入的所有三个字段，他们仍然可以更改它。解决这个问题的唯一方法是强制身份验证，并让另一个数据库将用户名/密码对绑定到 ID。

# c# - 如何在 MySql 中使用实体框架

> ID：14662318
> 
> 赞同：0
> 
> 时间：2013-02-02T13:23:24.473
> 
> 标签：c#, asp.net, mysql, entity-framework

如何使用**C#-ASP.Net**在**Mysql中使用****实体框架**？

 ****[http://www.codeproject.com/Tips/426790/Using-MySQL-with-Entity-Framework](http://www.codeproject.com/Tips/426790/Using-MySQL-with-Entity-Framework)

我正在尝试本教程，但在 Reference 中找不到MySql.dll **（****Win 应用程序）、MySql.Data.Entity.dll**，因此我无法继续该教程的下一步。

 **我什至在我的 Mysql 文件夹中找不到 Mysql.dll 和 mysql.data.entity.dll，但我已经在我的计算机中安装了 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:31:00.900

文章在“先决条件”中说“下载并安装 MySQL 连接器”。

在快速谷歌之后，第一个结果是[http://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)。通过我发现[http://dev.mysql.com/downloads/connector/net/#downloads](http://dev.mysql.com/downloads/connector/net/#downloads)。

这是你要找的吗？******

# python - 如何从需要命令行输入的 python 脚本导入

> ID：14662319
> 
> 赞同：0
> 
> 时间：2013-02-02T13:23:27.860
> 
> 标签：python, ipython

例如：我有一个 python 脚本 scip.py

```
from sys import argv

# parsing the input
script, NU = argv

def main(NU):
    return 

def somefunc():
    return

if __name__ == '__main__':
    main(NU) 
```

假设我在 [I] python shell 中。我可以运行脚本，例如通过`run scip.py 1`. 但是我怎样才能从中导入函数呢？`import scip`失败，因为它需要变量来解包。`import scip 1`给出一个语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:36:02.633

这应该可以解决问题：

```
def main(NU):
    return 

def somefunc():
    return

if __name__ == '__main__':
    from sys import argv

    # parsing the input
    script, NU = argv
    main(NU) 
```

# ios - 移除 NSNotificationCenter 观察者

> ID：14662322
> 
> 赞同：7
> 
> 时间：2013-02-02T13:23:34.177
> 
> 标签：ios, objective-c, nsnotificationcenter, nsnotifications

我通过在 ViewDidLoad 中添加以下代码来检测键盘的显示/隐藏：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardDidHide:) 
                                             name:UIKeyboardDidHideNotification 
                                           object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardWillShow:) 
                                             name:UIKeyboardWillShowNotification 
                                           object:nil]; 
```

在某些时候，虽然我想删除这些观察者，但不调用

```
 [[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

因为这会删除所有观察者，而我还有其他不想被删除的观察者。我怎样才能只删除这两个？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-02T13:25:31.533

```
[[NSNotificationCenter defaultCenter] removeObserver:self 
                                                name:UIKeyboardDidHideNotification 
                                              object:nil];

[[NSNotificationCenter defaultCenter] removeObserver:self 
                                                name:UIKeyboardWillShowNotification 
                                              object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:31:10.337

使用[官方文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/removeObserver%3aname%3aobject%3a)中描述的`removeObserver:name:object:`方法，删除特定通知名称的观察者。`NSNotificationCentre`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:31:20.273

采用`[[NsNotificationCenter defaultCenter] removeObserver:self name: UIKeyboardWillShowNotification object:nil]`

# c# - 简单的 MIDI 文件创建器

> ID：14662325
> 
> 赞同：-1
> 
> 时间：2013-02-02T13:23:58.410
> 
> 标签：c#, midi

我有一个我写的 MIDINote 类的数组。每个 MIDINote 都有 MIDI 音符编号，以及该音符的起始、偏移和持续时间。现在我想用这些音符创建一个 MIDI 文件。它应该是单声道的，这意味着它应该只有一个轨道。并且所有音符的音量应该相同。我已经看过其他解决方案了；但是，他们似乎都没有做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:23:52.673

[查看MIDI.NET](http://midinet.codeplex.com)库的记录到文件示例应用程序。虽然文件处理可能看起来很复杂——那是因为它是建立在一个通用的块文件库上的，但它的使用相对简单。

但是请注意，MIDI 适用于 Note-On 和 Note-Off 事件，因此您必须将您的音符持续时间转换为音符关闭事件。

希望能帮助到你。

# android - Android：在多行文本视图下方放置按钮

> ID：14662335
> 
> 赞同：0
> 
> 时间：2013-02-02T13:24:56.773
> 
> 标签：android, eclipse, button, textview

我正在设计一个 Android 应用程序，但我被卡住了。尝试了很多东西，但到目前为止没有任何帮助。我有一个包含多个 TextView 和按钮的活动。其中一个文本视图包含一个地址，但它可以是多行的。所以有时它有 1 行，有时最多 4 行。现在我想在下面放置一个按钮。当 textview 只有 1 行时，没问题，但是当它有更多时，文本会越过我的按钮。这是我的 XML 文件中的视图：

```
<TextView
   android:id="@+id/locatie"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:textAppearance="?android:attr/textAppearanceMedium"/>
<Button
   android:id="@+id/button1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentLeft="true"
   android:layout_alignParentRight="true"
   android:layout_below="@+id/locatie"
   android:text="@string/mapknop" /> 
```

我在我的文本视图上尝试了很多东西，比如最小行和最大行，但没有任何效果。有人有解决方案吗？谢谢

编辑：这是我完整的 XML 文件

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/evenement"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="5dp"
        android:contentDescription="@string/affiche"
        android:onClick="showImage" />

    <TextView
        android:id="@+id/datum"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="19dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/uren"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/datum"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/DETAILS"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/uren"
        android:layout_marginTop="24dp"
        android:text="@string/details"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/DETAILS"
        android:text="@string/vvk"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:text="@string/kassa"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2"
        android:text="@string/locatie"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/vvk"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"
        android:layout_marginLeft="18dp"
        android:layout_toRightOf="@+id/textView3"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/kassa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView3"
        android:layout_alignLeft="@+id/vvk"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <!--  PROBLEM OCCURS FROM HERE -->
    <TextView
        android:id="@+id/locatie"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_alignLeft="@+id/kassa"
        android:textAppearance="?android:attr/textAppearanceMedium"/>

      <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/locatie"
        android:text="@string/mapknop" />

      <!--  UNTIL HERE -->

    <TextView
        android:id="@+id/omschrijving"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView4" />

    <TextView
        android:id="@+id/TextView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/omschrijving"
        android:layout_marginTop="49dp"
        android:layout_alignLeft="@+id/lineup"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" 
        android:text="@string/lineup"/>

    <TextView
        android:id="@+id/lineup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/TextView5" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        android:text="@string/omschrijving"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" />

</RelativeLayout> 
```

编辑：这是 1 行与 2 行的屏幕截图

[http://i.imgur.com/uChHNmA.jpg?1](http://i.imgur.com/uChHNmA.jpg?1) [http://i.imgur.com/5w0mjoh.jpg](http://i.imgur.com/5w0mjoh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T10:36:10.047

使用 Edittext 代替 TextView 会更好。这是对我有用的代码示例，希望对您有用。

```
<EditText
    android:id="@+id/locatie"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginRight="5dp"
    android:hint="locatie"
    android:textColor="#000000"
    android:lines="1"
    android:maxLength="32"
    android:digits="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKJLZXCVBNM0123456789- "/> 
```

# javascript - ReferenceError: todoItem 未定义 Backbone + CoffeeScript

> ID：14662337
> 
> 赞同：1
> 
> 时间：2013-02-02T13:25:10.570
> 
> 标签：javascript, jquery, backbone.js, coffeescript, underscore.js

我正在尝试将骨干与咖啡脚本一起使用，而不是 javascript：

```
TodoItem = Backbone.Model.extend(
  toggleStatus: ->
    if @.get 'status' is "incomplete"
      @.set 'status': 'complete' 
    else
      @.set 'status': 'incomplete'
    @.save()  
    )

todoItem = new TodoItem(
  description: 'I play the guitar'
  status: 'incomplete'
  id: 1
)

TodoView = Backbone.View.extend(
  tagName: 'div'
  id: "box"
  className: 'red-box'

  events: 
    "click h3": "alertStatus"
    'change input': 'toggleStatus'

  template: 
    _.template "<h3> <input type=checkbox #{ print "checked" if status is "complete"} /> <%= description %></h3>"

  initialize: ->
    @.model.on 'change', @.render, @
    @.model.on 'destroy', @.remove, @

  toggleStatus: ->
    @.model.toggleStatus()

  alertStatus: ->
    alert('Hey you clicked the h3!')

  remove: ->
    @.$el.remove()

  render: ->
    @.$el.html @.template(@.model.toJSON())
)

todoView = new TodoView({model: todoItem})
todoView.render()
console.log todoView.el 
```

如果我在控制台中尝试：

```
todoItem.set({description: 'asdfadfasdfa'}); 
```

我得到：

```
ReferenceError: todoItem is not defined 
```

此外，我看不到我体内的 div：

```
<div id="box" class="red-box">
  <h3>
  <input type="checkbox" undefined>
  "I play the guitar"
  </h3>
 </div> 
```

但我可以在我的控制台中看到这个 div 很好。

**错误在哪里？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:36:52.243

CoffeeScript 的优点之一是您可以`@foo`使用`@.foo`. 写得少一点，读起来好一点。

* * *

您不必使用 Backbone 的`.extend()`，因为 CoffeeScript 具有以完全兼容的方式工作的类：

```
class TodoView extends Backbone.View
  tagName: 'div'
  id: 'box' # don't do this if you have more than one TodoView on the page at once
  className: 'red-box' 
```

* * *

`todoItem`未定义，因为 CoffeeScript 会将您的所有代码包装在“立即执行的函数表达式”中，从而防止变量泄漏到全局范围（这是一件好事）。从文档：

> 尽管为了清楚起见在本文档中被隐藏，但所有 CoffeeScript 输出都包装在一个匿名函数中：`(function(){ ... })();`这个安全包装器与`var`关键字的自动生成相结合，使得意外污染全局命名空间变得极其困难。

如果要检查局部变量，请在 Chrome 的调试器或 Firebug 中设置断点。

* * *

我担心这段代码：

```
_.template "... #{ print "checked" if status is "complete"} ..." 
```

是什么`print`？你在哪里定义的？就此而言，在哪里`status`？你的意思是`@status`？

* * *

最后，您没有看到的原因`div`是您从未将它添加到 DOM。`.render()`呈现元素...但它不会自动为您将其插入页面。你必须自己做：

```
todoView.render()
$('body').append(todoView.el) # (or wherever you want it to go) 
```

# php - 更改 MYSQL INT 值

> ID：14662339
> 
> 赞同：0
> 
> 时间：2013-02-02T13:25:37.703
> 
> 标签：php, mysql, phpmyadmin

我是 MySQL 的真正新手，我设法创建了一个名为 maintenance 的表，默认`int`值为 0，我正在尝试创建一个按钮，将这个值更改为 1。

这是我在 phpmyadmin 中的屏幕截图，我只需要找到一些 php 代码，将值更改为我尝试了很多东西但都没有奏效的值！

![图片](../Images/ff5b6a1251c70875b65e08efcc5a3932.png)

仅供参考，当值为 1 时，将显示维护页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:28:57.910

好的，你这里有一个空表，有一行状态。

首先，您需要插入刚刚创建的状态行。通过 PHPMyAdmin 执行此操作（单击顶部的插入），或使用以下 SQL

```
INSERT INTO gfx_maintenance(status) VALUES(0) 
```

现在，您实际上在数据库中有一些数据。要更改此设置，请单击 PHPMyAdmin 中出现的小铅笔，或使用以下 SQL：

```
UPDATE gfx_maintenance SET status=1 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:33:31.920

检查表格并转到更改选项那里你会找到一个默认选项，然后选择作为定义选项，输入你想要的值

# php - 在单选按钮选项选择上的 OpenCart 产品页面中自动更新价格

> ID：14662344
> 
> 赞同：0
> 
> 时间：2013-02-02T13:26:30.563
> 
> 标签：php, jquery, opencart

我想根据单选按钮选择自动更新产品价格

[http://demo.wdsindia.com/yossi/index.php?route=product/product&path=18&product_id=59](http://demo.wdsindia.com/yossi/index.php?route=product/product&path=18&product_id=59)当我点击 14K、18K 的单选按钮但错误的价格发生变化时。

与主要价格相同的`14K option`价格`add $50`

和主要价格的`18K option`价格`add $100`

但问题是当我选择任何选项时，它会增加 100 美元的主要价格。

> 这是我用来更改值的 jQuery

```
<script type="text/javascript">
$(document).ready(function() {
   $('.option').change(function() {
   var OriginalPrice = $('#thisIsOriginal').text();
   var OriginalCurrency = OriginalPrice.substring(0, 1);
   OriginalPrice = OriginalPrice.substring(1);

   var newPriceValue = $('.option :selected').text();
   var position1 = newPriceValue.indexOf("(");
   var position2 = newPriceValue.indexOf(")");
   position1 = position1+3;
   var finalPriceValue = newPriceValue.substring(position1, position2);
   if(newPriceValue.indexOf('.') == -1)
   {
    finalPriceValue = "0";
   }
   finalPriceValue = parseFloat(finalPriceValue) + parseFloat(OriginalPrice);
   finalPriceValue = finalPriceValue.toFixed(2);

   $('#priceUpdate').text(OriginalCurrency + finalPriceValue);
   });
});
</script> 
```

提前致谢

# regex - Perl：使用拆分但忽略引号

> ID：14662349
> 
> 赞同：0
> 
> 时间：2013-02-02T13:27:27.273
> 
> 标签：regex, perl, hash, split

我正在尝试从输入字符串创建 Perl 哈希，但我遇到了原始“拆分”的问题，因为值可能包含引号。下面是一个示例输入字符串，以及我的（期望的）结果哈希：

```
my $command = 'CREATE:USER:TEL,12345678:MOB,444001122:Type,Whatever:ATTRIBUTES,"ID,0,MOB,123,KEY,VALUE":TIME,"08:01:59":FIN,0';

my %hash = 
  (
   CREATE     => '',
   USER       => '',
   TEL        => '12345678',
   MOB        => '444001122',
   Type       => 'Whatever',
   ATTRIBUTES => 'ID,0,MOB,123,KEY,VALUE',
   TIME       => '08:01:59',
   FIN        => '0',
  ); 
```

输入字符串为任意长度，未设置键数。

谢谢！

-hq

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T13:33:12.190

~~使用[Text::CSV](http://p3rl.org/Text::CSV)。它正确处理逗号分隔的值文件。~~

## 更新

标准模块似乎无法解析您的输入格式，即使使用`sep_char`and 也是如此`allow_loose_quotes`。因此，您必须自己完成繁重的工作，但您仍然可以使用 Text::CSV 来解析每个键值对：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

use Data::Dumper;

use Text::CSV;

my $command = 'CREATE:USER:TEL,12345678:MOB,444001122:Type,Whatever:ATTRIBUTES,"ID,0,KEY,VALUE":TIME,"08:01:59":FIN,0';

my @fields = split /:/, $command;
my %hash;
my $csv = Text::CSV->new();

my $i = 0;
while ($i <= $#fields) {
    if (1 == $fields[$i] =~ y/"//) {
        my $j = $i;
        $fields[$i] .= ':' . $fields[$j] until 1 == $fields[++$j] =~ y/"//;
        $fields[$i] .= ':' . $fields[$j];
        splice @fields, $i + 1, $j - $i, ();
    }
    $csv->parse($fields[$i]);
    my ($key, $value) = $csv->fields;
    $hash{$key} = "$value"; # quotes turn undef to q()
    $i++;
}

print Dumper \%hash; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T14:02:58.700

据我所见，最明显的候选者 - `Text::CSV`- 不能正确处理这种格式，所以只有一个本土的正则表达式解决方案。

```
use strict;
use warnings;

my $command = 'CREATE:USER:TEL,12345678:MOB,444001122:Type,Whatever:ATTRIBUTES,"ID,0,KEY,VALUE":TIME,"08:01:59":FIN,0';

my %config;
for my $field ($command =~ /(?:"[^"]*"|[^:])+/g) {
  my ($key, $val) = split /,/, $field, 2;
  ($config{$key} = $val // '') =~ s/"([^"]*)"/$1/;
}

use Data::Dumper;
print Data::Dumper->Dump([\%config], ['*config']); 
```

**输出**

```
%config = (
            'TIME' => '08:01:59',
            'MOB' => '444001122',
            'Type' => 'Whatever',
            'CREATE' => '',
            'TEL' => '12345678',
            'ATTRIBUTES' => 'ID,0,KEY,VALUE',
            'USER' => '',
            'FIN' => '0'
          ); 
```

如果你有 Perl v5.10 或更高版本，那么你有方便的`(?| ... )`正则表达式组，它允许你写这个

```
use 5.010;
use warnings;

my $command = 'CREATE:USER:TEL,12345678:MOB,444001122:Type,Whatever:ATTRIBUTES,"ID,0,KEY,VALUE":TIME,"08:01:59":FIN,0';

my %config = $command =~ /(\w+) (?| , " ([^"]*) " | , ([^:"]*) | () )/gx;

use Data::Dumper;
print Data::Dumper->Dump([\%config], ['*config']); 
```

这会产生与上面的代码相同的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T15:13:03.697

这看起来像是[`Text::ParseWords`](http://search.cpan.org/perldoc?Text%3a%3aParseWords)可以处理的。该`quotewords`子例程将拆分分隔符上的输入`:`，忽略引号内的分隔符。这将为我们提供基本的项目列表，在输出中首先显示为`$VAR1`. 之后，使用正则表达式解析逗号分隔的项目是一件简单的事情，该正则表达式将处理可选的第二次捕获以容纳空标签，例如 for`CREATE`和`USER`.

```
use strict;
use warnings;
use Data::Dumper;
use Text::ParseWords;

while (<DATA>) {
    chomp;
    my @list = quotewords(':', 0, $_);
    my %hash = map { my ($k, $v) = /([^,]+),?(.*)/; $k => $v; } @list;
    print Dumper \@list, \%hash;
}

__DATA__
CREATE:USER:TEL,12345678:MOB,444001122:Type,Whatever:ATTRIBUTES,"ID,0,KEY,VALUE":TIME,"08:01:59":FIN,0 
```

**输出：**

```
$VAR1 = [
          'CREATE',
          'USER',
          'TEL,12345678',
          'MOB,444001122',
          'Type,Whatever',
          'ATTRIBUTES,ID,0,KEY,VALUE',
          'TIME,08:01:59',
          'FIN,0'
        ];
$VAR2 = {
          'TIME' => '08:01:59',
          'MOB' => '444001122',
          'Type' => 'Whatever',
          'CREATE' => '',
          'TEL' => '12345678',
          'ATTRIBUTES' => 'ID,0,KEY,VALUE',
          'USER' => '',
          'FIN' => '0'
        }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:18:51.813

```
my %hash = $command =~ /([^:,]+)(?:,((?:[^:"]|"[^"]*")*))?/g;
s/"([^"]*)"/$1/g
   for grep defined, values %hash; 
```

# wordpress - 列出正常的 wordpress 类别

> ID：14662352
> 
> 赞同：0
> 
> 时间：2013-02-02T13:28:09.330
> 
> 标签：wordpress, categories

您好，我有自定义类别的下拉列表，这是适用于自定义类别的链接脚本。

```
 var categories = [
        {foreach $categories as $category}
            { value: {$category->term_id}, label: {$category->name} }{if !($iterator->last)},{/if}
        {/foreach}
        ]; 
```

但是我想在这个下拉列表中使用普通类别，我怎样才能改变这个脚本只显示普通类别？

如果需要，这是我的函数文件[http://jsfiddle.net/ELVFV/](http://jsfiddle.net/ELVFV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:44:23.437

代替

```
...
'taxonomy' => 'ait-dir-item-location',
... 
```

你会用

```
...
'taxonomy' => 'category',
... 
```

要获取类别（自定义或默认），您可以使用 get_terms 函数。这是一个例子：

```
$categories = get_terms( 'category' );
foreach ( $categories as $category ){
    echo $category->name;
} 
```

# excel - SumIf 在 VBA 中使用日期和范围

> ID：14662357
> 
> 赞同：0
> 
> 时间：2013-02-02T13:29:00.243
> 
> 标签：excel, vba

我试图总结一行，因为另一行与用户定义的变量具有相同的月份。我相信 sumif 函数将是我最好的选择，但它似乎对我不起作用。我希望它查看的行显然是带有日期格式的 Date 行（使用 .numberformat = "ddd mm/dd"），但 sumif 似乎无法在每个单元格中选择月份。这是我到目前为止的代码：

```
Dim cMade As Integer
Dim sDate As Date
 cMade = cMade + Application.WorksheetFunction.SumIf(ActiveSheet.Range("B1:RC1"), Month(sDate), ActiveSheet.Range("B30:RC30")) 
```

如您所见，sDate 是用户通过用户表单输入的日期，然后我使用日期序列进行转换。B1-RC1 是我希望它查看的日期。如果月份匹配，范围 B30-RC30 是我希望它获取的总和（我将它作为 + cMade 的原因是因为它在循环中循环工作表）。

这段代码正确吗？我一直在弄乱它并寻找替代品几个小时，但我似乎什么也想不出来！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:51:57.210

假设这只是您代码的一部分，我可能只猜到其余部分，请尝试以下更正：

1.  我认为你应该定义`Range("B30,RC30")`为`Range("B30:RC30")`- 根据描述，这里的逗号看起来像是一个错字。
2.  替换`Application.SumIf`为`Application.WorksheetFunction.SumIf`。

另外，考虑定义更精确的范围，例如通过`Worksheets("Sheet1").Range("A1:C10")`或`ActiveSheet.Range("A1:C10")`语法。但是，这可能是一项额外的措施 - 我看不到您的其余代码。

希望这对您有所帮助。

# javascript - 事件监听器在 jsFiddle 中工作，但不在页面上

> ID：14662358
> 
> 赞同：1
> 
> 时间：2013-02-02T13:29:18.597
> 
> 标签：javascript

> **可能重复：**
> [为什么 jQuery 或诸如 `getElementById` 之类的 DOM 方法找不到元素？](https://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element)

此事件侦听器适用于 jsFiddle，但当我从我的 PHP 页面调用它时不起作用。

```
function addDice() {  
 var add = document.getElementById("add");  
alert("test");      
}  

var el = document.getElementById("add");   
el.addEventListener("click", addDice, false);  

   <li id="add">CAll ADD</li> 
```

我在`<Script>`标签之间的索引页中有脚本，如果我`onclick="addDice"`在`<li>`标签中放一个它可以工作，但不能与`eventListener`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:38:05.330

尝试这个：

```
window.onload = function () {
    function addDice() {  
        var add = document.getElementById("add");  
        alert("test");      
    }  
    var el = document.getElementById("add");   
    el.addEventListener("click", addDice, false);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:39:29.070

你的代码在#add之前运行那是行不通的你可以像这样解决它

```
window.onload=function(){
         var el = document.getElementById("add");   
         el.addEventListener("click", addDice, false);
} 
```

或通过 JQuery

```
jQuery(document).ready(function() {
         var el = document.getElementById("add");   
         el.addEventListener("click", addDice, false);

}) ; 
```

# asynchronous - 使用动作组合时 Play2 异步

> ID：14662363
> 
> 赞同：2
> 
> 时间：2013-02-02T13:29:41.090
> 
> 标签：asynchronous, playframework-2.0

在 Play2 中，我了解动作组合的概念以及使用 Async {...} 进行异步响应，但我还没有看到将这些方法一起使用的示例。

为了清楚起见，假设您正在使用操作组合来确保用户经过身份验证：

```
 def index = Authenticated { user =>
   Action { request =>
     Async {
        Ok("Hello " + user.name)      
     }
   }
  } 
```

在 的实现中`Authenticated`，如果我们假设正在查找这个数据库以检索用户，那么在我看来这部分将是一个阻塞调用，只留下`Action`正文中的响应是非阻塞的。

有人可以解释我如何进行包含身份验证部分的非阻塞异步 I/O 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T11:01:13.110

我可以举一个完整的例子： http: [//pastebin.com/McHaqrFv](http://pastebin.com/McHaqrFv)

它的本质是：

```
 def WithAuthentication(f: WithAuthentication => Result) = Action {
    implicit request => AsyncResult {
      // async auth logic goes here
    }
  } 
```

简单地在控制器中：

```
 def indexAction = WithAuthentication {
    implicit request =>
      Ok(views.html.index())
  } 
```

甚至：

```
 def someAction = WithAuthentication {
    implicit request => Async {
      // more async logic here
    }
  } 
```

这是一个模板友好的解决方案，请随意使用。也许有时我会从中创建一个插件。刚刚为我的应用程序编码，到目前为止它似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:21:47.703

我的解决方案是由内而外地组合动作，如下所示：

```
def index = Action { request =>
  Async {
    Authenticated { user =>
      Ok("Hello " + user.name)      
    }
  }
} 
```

然后我的`Authenticated`签名看起来像：

```
def Authenticated(body: => Result): Result = {
  // authenticate, and then
  body
} 
```

这里的缺点是正文解析将在身份验证之前进行，这对您来说可能是也可能不是问题。

# networking - 往返时间（滑动窗口）？

> ID：14662365
> 
> 赞同：1
> 
> 时间：2013-02-02T13:30:12.833
> 
> 标签：networking, sliding-window, roundtrip

我有两个问题：

1.  在计算RTT时，我们是否应该考虑传输时间？

2.  两个站 M 和 N 之间的距离是 L 公里。所有帧都是 K 位长。每公里的传播延迟为 t 秒。令 T bits/sec 为信道容量。假设处理延迟可以忽略不计，当使用滑动窗口协议时，为了最大限度地利用，帧中序列号字段的最小位数是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:06:55.027

1) RTT 是从段传输到收到 ACK 的测量时间。所以传输时间会很明显的被考虑。可以忽略重传时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T15:57:18.090

RTT 是通过考虑传播延迟、排队延迟、传输延迟和处理延迟的值来计算的。

Rtt = 2*[传播延迟+N(排队延迟+传输延迟+处理延迟)]

# jquery - 为什么我的 jQuery "fadeIn" 不能在 IE 中工作？

> ID：14662367
> 
> 赞同：0
> 
> 时间：2013-02-02T13:30:26.107
> 
> 标签：jquery, internet-explorer, fadein

因此，众所周知，IE 不像大多数其他浏览器类型那样先进，这让我非常头疼。所以我已经完成了我需要模板化的网站项目，但是 4 个链接不会在 Internet Explorer 中打开代码的“淡入”部分。

谁能告诉我我哪里出错了？！呸呸呸呸

结构：

```
body
{
    margin: 0; 
    padding: 0;
    height:100%;
    width:100%;
    background-color: #FFF;
    z-index:-1;
} 
#content
{
    width: 100%;
    height: 640px;
    background-color:#060;
    z-index:20;
    position:relative;
}
#content-inner
{
    width: 960px;
    height: 640px;
    background-color:#666;
    margin-left:auto;
    margin-right:auto;
    z-index:-1;
    position:relative;
}

#hidebar
{
    width: 100%;
    height: 290px;
    background-color:#000;
    position:absolute;
    z-index:2;
    bottom:0;
    left:0;
    display:none;
}

#jqb1
{
    margin-left:auto;
    margin-right:auto;
    width:960px;
    height:100%;
    background-color:#F00;
    display:none;
}
#jqb2
{
    margin-left:auto;
    margin-right:auto;
    width:960px;
    height:100%;
    background-color:#00F;
    display:none;
}
#jqb3
{
    margin-left:auto;
    margin-right:auto;
    width:960px;
    height:100%;
    background-color:#9F3;
    display:none;
}
#jqb4
{
    margin-left:auto;
    margin-right:auto;
    width:960px;
    height:100%;
    background-color:#360;
    display:none;
}

#navbar
{
    width: 100%;
    height: 257px;
    background-color:#F00;
}
#navbar-inner
{
    width: 960px;
    height: 257px;
    background-color:#666;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}

#footer
{
    width: 100%;
    height: 181px;
    background-image:url(images/gray-pixel.png);
    position:relative;  
}
#footer-inner
{
    width: 960px;
    height: 181px;
    background-color:#666;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}
#footer-small
{
    width:230px;
    float:left;
    height:100%;
    background-color:#999;
    position:relative;
}
#footer-large
{
    width:500px;
    float:left;
    height:100%;
    background-color:#CCC;
    position:relative;
}
#colour-bar
{
    width: 100%;
    height: 13px;
    background-color:#639;
    position:relative;
}

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote,     pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s,     samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li,     fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article,     aside, details, figcaption, figure, footer, header, hgroup, mark, menu, meter, nav, output,     progress, section, summary, time {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
}
ul {
    list-style-type:none;
}
ul li a{
    font:700 49px/1.2em Arial, Helvetica, sans-serif;
    color:#fff;
    text-decoration:none;
    height:59px;
    display:inline-block;
    list-style-type:none;
    text-align:center;
    position::relative;
    vertical-align: baseline;
}

ul li a:hover{
    color:#e25709;
}
div.table 
{
    border: 0px solid black; 
    display: table;
    margin-left:auto;
    margin-right:auto;
}
div.tr {border: 0px solid black; display: table-row; }
div.td {border: 0px solid black; display: table-cell; }

h3
{
    color:#FFF;
    font-size:22px;
    font-family:Arial, Helvetica, sans-serif;
    padding-top:30px;
    padding-left:25px;
    padding-bottom:20px;
}

h4
{
    color:#FFF;
    font-size:13px;
    font-style:normal;
    font-family:Arial, Helvetica, sans-serif;
    padding-left:25px;
    padding-right:25px;
    line-height:1.2em;
} 
```

索引页：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link rel="stylesheet" type="text/css" href="css/structure.css"/>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
    <div id="content">
        <div id="hidebar">
            <div id="jqb1"></div>
            <div id="jqb2"></div>
            <div id="jqb3"></div>
            <div id="jqb4"></div>    
        </div>       
        <div id="content-inner">
        <a href="index.html">
                <img src="images/logo.jpg"/ alt>
            </a>

        </div>  

    </div>
    <div id="colour-bar"></div>
    <div id="navbar">
        <div id="navbar-inner">
            <ul>
                <li><a href="#" rel="1"><button1>About us</button1></a></li>
                <li><a href="#" rel="2"><button2>Partners</button2></a></li>
                <li><a href="#" rel="3"><button3>Solutions</button3></a></li>
                <li><a href="#" rel="4"><button4>Services</button4></a></li>
            </ul>
        </div>
    </div>
    <div id="footer">
        <div id="footer-inner">
            <div id="footer-small"></div>
                <div id="footer-large">
                    <div class="table">
                        <div class="tr">
                            <div class="td">
                                <h3>Contact Us:</h3>
                            </div>
                            <div class="td">
                            </div>
                        </div>
                        <div class="tr">
                            <div class="td">
                                <h4>AUS - Melbourne<br />
                                101 Main Street<br />
                                Glen Iris VIC 3146</h4>
                            </div>
                            <div class="td">
                                <h4>Email: mail@website.com<br />
                                Phone: (03) 9888 8888<br />
                                Fax: (03) 9888 8888</h4>
                            </div>
                        </div>
                    </div>
                </div>
            <div id="footer-small"></div>
        </div>
    </div>

<script>
$("button1").click(function () {
$("#hidebar").fadeIn("slow");
$("button1").toggle();
$("button2").show();
$("button3").show();
$("button4").show();
$("#jqb1").show();
$("#jqb2").hide();
$("#jqb3").hide();
$("#jqb4").hide();
});

$("button2").click(function () {
$("#hidebar").fadeIn("slow");
$("button2").toggle();
$("button1").show();
$("button3").show();
$("button4").show();
$("#jqb2").show();
$("#jqb1").hide();
$("#jqb3").hide();
$("#jqb4").hide();
});

$("button3").click(function () {
$("#hidebar").fadeIn("slow");
$("button3").toggle();
$("button1").show();
$("button2").show();
$("button4").show();
$("#jqb3").show();
$("#jqb1").hide();
$("#jqb2").hide();
$("#jqb4").hide();
});

$("button4").click(function () {
$("#hidebar").fadeIn("slow");
$("button4").toggle();
$("button1").show();
$("button2").show();
$("button3").show();
$("#jqb4").show();
$("#jqb1").hide();
$("#jqb2").hide();
$("#jqb3").hide();
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:10:50.697

我相信您面临的问题与 IE 不了解自定义元素有关`<button1>`

我将它们更改为`<button>`带有 ID 的标准元素：

```
<button id="button1">About us</button>
<button id="button2">Partners</button>
<button id="button3">Solutions</button>
<button id="button4">Services</button> 
```

反过来，我还更改了按钮处理程序以相应地触发元素 ID：

```
$("#button1").click(function () {
    ...
});

$("#button2").click(function () {
    ...
});

$("#button3").click(function () {
    ...
});

$("#button4").click(function () {
    ...
}); 
```

我将您的代码移到小提琴中，并在 IE10 中使用文档模式 IE7-IE9 对其进行了测试。初始淡入淡出不触发的问题似乎已经解决。

[jsfiddle](http://jsfiddle.net/QZPWm/1/)

# javascript - Sench Touch 2 动态获取容器数据/存储

> ID：14662369
> 
> 赞同：1
> 
> 时间：2013-02-02T13:30:36.173
> 
> 标签：javascript, extjs, extjs4, sencha-touch, sencha-touch-2

我想动态获取容器数据。任何人都可以帮助我动态显示容器项目。日期或商店 url 可能是一些外部页面，我想使用 MVC 获取容器商店/日期。有什么可以帮助我的吗？

下面是我的代码

```
Ext.define('Mvcapp.view.LayoutList',{
extend: 'Ext.Container',
xtype: 'layoutlist',

config:{
        title: 'Layout',
        iconCls:'star',
        styleHtmlContent: true,
        items:[{
        data: [{
            fname: 'Stratton',
            lname: 'Sclavos',
            role: 'Executive Chairman'
        }, {
            fname: 'Michael',
            lname: 'Mullany',
            role: 'CEO'
        }, {
            fname: 'Ted',
            lname: 'Driscoll',
            role: 'Vice President Worldwide Sales'
        }, {
            fname: 'Abraham',
            lname: 'Elias',
            role: 'Chief Technical Officer'
        }, {
            fname: 'Jeff',
            lname: 'Hartley',
            role: 'Vice President of Services and Training'
        }, {
            fname: 'Adam',
            lname: 'Mishcon',
            role: 'Vice President of Operations'
        }, {
            fname: 'Judy',
            lname: 'Lin',
            role: 'Vice President of Engineering'
        }], // data
      tpl: '<tpl for="."><div style="float:left;width:300px;"><strong>{lname}</strong>, {fname} <em class="muted">({role})</em></div></tpl>'
      }]

}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:10:52.303

您需要做的是，首先定义一个具有必填字段的模型。接下来创建一个商店并将模型配置设置为先前定义的。在定义商店时，您需要从 sencha touch 提供的各种代理中进行选择。如果您正在构建为手机构建的应用程序，那么没有太多选择。您只需使用 JsonP 代理。

这就是我要做的 -

```
 var listitem=Ext.define('ListItem', {
        extend: 'Ext.data.Model',
        config: {
            fields: ['fname','lname','role']
        }
    });

    var store = Ext.create('Ext.data.Store', {
        model: listitem,
        autoLoad: true,
        proxy: {
            type: 'jsonp',
            url: 'http://localhost/json_feed_url.php',
            reader: {
                type: 'json',
                rootProperty: 'data'
            }
        }
    });
    var myList = Ext.create('Ext.List', {
        styleHtmlContent:true,
        store:store,
        itemTpl:['<div style="float:left;width:300px;"><strong>{lname}</strong>, {fname} <em class="muted">({role})</em></div>']
    });
    Ext.Viewport.add(myList); 
```

如您所见，我首先为我们的商店定义了模型。Store 是使用 JsonP 代理创建的，并设置为自动加载。我还设置了阅读器，它将读取从服务器收到的响应并解析它。我现在不必再担心了，因为我要做的只是设置**rootPropery**。

接下来创建一个列表，并`store`在其配置中分配先前定义的列表。因此，每当运行这段代码时，store 都会从服务器获取数据并将其显示在列表中。猜猜这就是你想要的。

首先，只需将这部分放在`launch`您的方法中`app.js`，您就可以开始了。如果你想要这里的 php 代码 -

```
<?php header('Content-type:application/javascript');
$items =array();
$items[] = array('fname'=>'A','lname'=>'B','role'=>1);
$items[] = array('fname'=>'C','lname'=>'D','role'=>2);
$items[] = array('fname'=>'E','lname'=>'F','role'=>3);
$items[] = array('fname'=>'G','lname'=>'H','role'=>4);
$items[] = array('fname'=>'I','lname'=>'J','role'=>5);
print $_GET['callback'].'('.json_encode(array('data'=>$items)) .')';
?> 
```

我熟悉 php n all，但你可以使用任何适合你的东西。想法是一样的。:D

# java - 使用 maven-shade-plugin 构建的 pdfbox 程序的结果与正常的 NetBeans 运行不同

> ID：14662373
> 
> 赞同：0
> 
> 时间：2013-02-02T13:31:02.060
> 
> 标签：java, maven, pdfbox, maven-shade-plugin

我有使用 PDFBox 1.7.1 的 java 程序，它是用 maven-shade-plugin 2.0 构建的。

这是使用 PDFBox api 的代码：

```
public class PdfFile {

    protected PDDocument document = null;

    public boolean load(byte[] bytes) throws IOException {
        InputStream is = new ByteArrayInputStream(bytes);
        PDFParser parser = new PDFParser(is);
        parser.parse();
        COSDocument cosDoc = parser.getDocument();
        this.document = new PDDocument(cosDoc);
        return true;
    }

    public byte[] extractText() throws IOException {
        PDFTextStripper pdfStripper = new PDFTextStripper();
        byte[] text = pdfStripper.getText(this.document).getBytes();

        return text;
    }

    public void close() throws IOException {
        if(this.document != null) {
            this.document.close();
        }
    }
} 
```

所以基本上方法`load()`从字节数组加载pdf文档，方法`extractText()`将从PDF中提取的文本作为字节数组返回。当我从 NetBeans`Run`按钮运行程序时它可以工作，但是当我从使用 maven-shade-plugin 构建的单个 jar 运行它时，返回的文本的字符编码错误。例如单词：

```
odpowiadająca (normal polish characters)
odpowiadajšca (netbeans run)
odpowiadajÄca (single shade jar) 
```

我知道它是完全相同的文件（字节数组），作为`to PdfFile.load()`两次运行的参数。所以问题在于PDF框以两种不同格式返回文本......

我有3个问题：

1.  为什么用 shade 插件编码构建的 jar 不同？
2.  如何控制/设置使用 shade 插件构建的 jar 使用的编码？
3.  如何强制 PDF 框以正确格式返回文本？

我知道在命令行 PDFBox 中有设置编码的选项：

```
java -jar {$jar_path} ExtractText -encoding UTF-8 
```

但我在 PdfBox api 中找不到它...

* * *

已解决：我必须改变

```
pdfStripper.getText(this.document).getBytes(); 
```

到

```
pdfStripper.getText(this.document).getBytes("UTF8"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:37:35.747

首先，这是两个事实（关于您的问题 2）：

*   根据[此代码](http://www.docjar.org/html/api/org/apache/pdfbox/ExtractText.java.html)：默认输出编码为 UTF-8。
*   有一个[PDFTextStripper 构造函数](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/PDFTextStripper.html#PDFTextStripper%28java.lang.String%29)将输出编码作为参数。

对于问题 1 和 3：

`byte[]`我认为您的问题与您将返回的`extractText()`转换为字符串的方式更相关。

`new String(byte[])`使用平台编码。因此，在 netbeans 或 shell 中执行此操作会产生不同的结果，因为我希望在 Netbeans 中运行时平台编码可能会有所不同。

发布处理结果的代码`extractText()`可能会有所帮助。

# actionscript-3 - 更改 AS3 中任何选定文本字段的格式？

> ID：14662374
> 
> 赞同：0
> 
> 时间：2013-02-02T13:31:02.900
> 
> 标签：actionscript-3, action

当点击事件被触发时，我创建了几个文本字段。现在我想更改任何选定文本字段的文本格式。但该格式仅应用于最后创建的文本字段。我尝试了以下方法：

```
function _txtbtn(e:*):void
{
    myText = new TextField();
    mc3 = new MovieClip();
    myText.text = "text...";
    myFormat.font = "Arial";
    myFormat.color = txt_color()
    myText.setTextFormat(myFormat);
    mc3.addChild(myText);
    addChild(mc3);
    mc3.x = _can.x;
    mc3.y = p;
    p= mc3.y+mc3.height+10;
    mc3.addEventListener(MouseEvent.MOUSE_DOWN,_select)
}

function _select(e:MouseEvent):void
{
    tool_stage.combo.addEventListener(Event.CHANGE,_font)
}

function _font(e:Event):void
{
    format.font = tool_stage.combo.selectedLabel;
    myText.setTextFormat(format);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:55:24.477

没错，因为变量 myText 引用了最后一个 Object。

取而代之的是，您可以从事件中获取当前的 TextField 对象。每个事件都有 currentTarget 值，它指的是触发了该事件的对象。然后，您可以将 currentTarget 转换为您的类型并使用它执行操作。

不幸的是，我没有你的完整代码，这就是为什么我有自己的版本。看看它，我想它可以帮助你。

//main.as

```
package
{
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.text.TextField;
import flash.text.TextFormat;

public class Main extends Sprite
{
    private var button:Sprite;
    private var p:int = 50;
    private var x0:int = 20;

    public function Main()
    {
        init();
    }

    private function init():void
    {
        button = new Sprite();

        button.graphics.beginFill(0xFFCC00);
        button.graphics.drawRect(0, 0, 80, 20);
        button.graphics.endFill();

        button.addEventListener(MouseEvent.CLICK, onBtnClick);

        this.addChild(button);
    }

    private function onBtnClick(e:*):void
    {
        var myFormat:TextFormat = new TextFormat();

        var myText:TextField = new TextField();
        var mc3:MovieClip = new MovieClip();
        myText.text = "text...";
        myFormat.font = "Arial";
        myFormat.color = 0x000000;
        myText.setTextFormat(myFormat);

        mc3.addChild(myText);

        addChild(mc3);
        mc3.x = x0;
        mc3.y = p;

        p= mc3.y+mc3.height+10;

        myText.addEventListener(MouseEvent.CLICK, onTextClick)
    }

    private function onTextClick(evt:MouseEvent):void
    {
        var newFormat:TextFormat = new TextFormat();
        newFormat.size = 30;
        newFormat.font = "Verdana";
        (evt.currentTarget as TextField).setTextFormat(newFormat);
    }
}
} 
```

# vb6 - visual basic 6 access 2007 数据库编程级联组合框

> ID：14662381
> 
> 赞同：1
> 
> 时间：2013-02-02T13:31:35.493
> 
> 标签：vb6, combobox, ms-access-2007, database-programming

我有一个名为：`schoolInfo`in access 2007 的表，它有两个字段`(schName and mjrName)`。

现在我正在尝试在 Visual Basic 6 中设计一个`(cboMajors)`与其他组合相关的组合`(cboSchool)`。

事实上，我想要级联组合框。当我在 cboSchool 中选择一个项目时，另一个组合应该只代表该学校的相关专业`(records with schName=x and mjrName=y)`。

```
Private Sub Form_Activate()

connection
' the Connection is a code in module contains codes are needed to make the connection between form and the database

fill_schools
fill_majors

End Sub 
```

还，

```
Private Sub fill_schools()
 With rs

    .Open "select DISTINCT schName from tblSchoolsInfo", cn, 2, 3

        Do While Not .EOF
        cboSchool.AddItem (.Fields(0))
        .MoveNext
    Loop
  End With
  rs.Close
End Sub

Private Sub fill_majors()

 With rs
    .Open "select DISTINCT mjrName from tblSchoolsInfo where schName= '" & Me.cboSchool & " '", cn, 2, 3

        Do While Not .EOF
        cboMajors.AddItem (.Fields(0))
        .MoveNext
    Loop
  End With
End Sub 
```

现在：第一个组合得到正确的值，但第二个是完全空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:42:24.070

OP 在 dreamincode.net 中解决了这个问题。他在组合框字符串的末尾添加了一个额外的空格：Me.cboSchool & " '"

我一直想说：“这种行为是设计使然。” :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:06:57.217

在您给我们的代码片段中，我看不到您在 Form_Activate() 中实际选择学校的任何地方。这意味着到该过程结束时，学校中将没有选择，因此 fill_majors() 将执行：

```
select DISTINCT mjrName from tblSchoolsInfo where schName= ' ' 
```

顺便说一句，那个尾随空格是故意的吗？在这种情况下，即使选择了学校，它也不会返回记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:33:46.590

只是一个建议你检查了 cboMajors.AddItem (.Fields(0)) <--- .Fields()

# javascript - 用户脚本：提交前运行代码

> ID：14662382
> 
> 赞同：-1
> 
> 时间：2013-02-02T13:31:37.997
> 
> 标签：javascript, jquery, greasemonkey, userscripts

目前正在制作用户脚本。我遇到的问题是，当单击这个提交按钮时，我的代码没有运行。有什么帮助吗？

```
$('#quick_reply_submit, input[value="Post Reply"]').click(function()
{
    clearCookie();
}); 
```

在`clearCookie()`中，我只是删除了一个 cookie。Alert()'ing 消息工作正常。我试过 return false 但这也不起作用。

--

的HTML：

`<input type="submit" class="button" name="submit" value="Post Reply" tabindex="3" accesskey="s">`

正如我所说，选择器没有任何问题。一条消息正在被警告（），但之后没有代码。

--

编辑：固定。看我的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:51:22.073

这是我的错。与选择器或上面的代码无关。

当按钮为 时，我正在删除一个 cookie `clicked`，但是我正在重新保存`blur`问题所在的 cookie。

# performance - JSF 2 提高页面加载性能

> ID：14662386
> 
> 赞同：1
> 
> 时间：2013-02-02T13:32:00.967
> 
> 标签：performance, jsf-2, richfaces, performance-testing

我正在尝试调整 jsf 2 页面的加载性能。以下是性能测量的一些跟踪： - 首次页面加载：全局页面加载时间 1404 毫秒，特别是在“渲染响应”阶段花费

> UserSessionBean - 匿名用户：来宾！用户设置为新用户 +++++ ++++++ +++++ [PHASE LISTENER] END PHASE RENDER_RESPONSE 6 执行时间 = 1318ms +++ ++++++ +++++ 全局页面执行时间 = 1404ms

*   第二次页面加载：全局页面加载时间为 656 毫秒，尤其是在“render rsponse”阶段

> INVOKE_APPLICATION 5 +++ ++++++ +++++ +++++ ++++++ +++++ [PHASE LISTENER] END PHASE INVOKE_APPLICATION 5 执行时间 = 0ms +++ ++ ++++ +++++ +++++ ++++++ +++++ [PHASE LISTENER] START PHASE RENDER_RESPONSE 6 +++ ++++++ +++++ 2013-02 -02 14:28:16,535 [http-bio-8083-exec-3] 信息 com.azone.web.UserSessionBean - SecurityContextHolder.getContext().getAuthentication 0 ms 2013-02-02 14:28:16,536 [ http-bio-8083-exec-3] INFO com.azone.web.UserSessionBean - 匿名用户：访客！用户设置为新用户 +++++ ++++++ +++++ [PHASE LISTENER] END PHASE RENDER_RESPONSE 6 执行时间 = 614ms +++ ++++++ +++++ 全局页面执行时间 = 656ms getAuthentication 0 ms 2013-02-02 14:28:16,536 [http-bio-8083-exec-3] 信息 com.azone.web.UserSessionBean - 匿名用户：访客！用户设置为新用户 +++++ ++++++ +++++ [PHASE LISTENER] END PHASE RENDER_RESPONSE 6 执行时间 = 614ms +++ ++++++ +++++ 全局页面执行时间 = 656ms getAuthentication 0 ms 2013-02-02 14:28:16,536 [http-bio-8083-exec-3] 信息 com.azone.web.UserSessionBean - 匿名用户：访客！用户设置为新用户 +++++ ++++++ +++++ [PHASE LISTENER] END PHASE RENDER_RESPONSE 6 执行时间 = 614ms +++ ++++++ +++++ 全局页面执行时间 = 656ms

这是我的页面来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

<ui:composition template="../templates/template.xhtml">

    <ui:define name="contentWrapper">   

<f:metadata>
    <f:viewParam name="itemFamily" value="#{newItemAdd.itemFamily}" />  
    <f:event     type="preRenderView"     listener="#{newItemAdd.initFamily}" />
</f:metadata>

    <h:form>
        <rich:panel id="mainFilters">

            <h:outputText value="property 1" />

            <h:panelGrid columns="2" cellspacing="6" width="600">

                <h:panelGrid columns="3" cellspacing="6" width="300">

                    <h:outputText value="First name: " />
                    <h:inputText id="fname" value="#{newItemAdd.userForm.user.firstName}">
                        <f:validateRequired />
                        <rich:validator />
                    </h:inputText>
                    <rich:message for="fname" />

                    <h:outputText value="Tel:" />
                    <h:inputText id="tel" value="#{newItemAdd.userForm.currentPhone}">
                        <f:validateRequired />
                        <rich:validator />
                    </h:inputText>
                    <rich:message for="tel" />

                    <h:outputText value="Email:" />
                    <h:inputText id="email" value="#{newItemAdd.userForm.user.email}">
                        <f:validateRequired />
                        <rich:validator />
                    </h:inputText>
                    <rich:message for="email" />

                </h:panelGrid>

                <h:panelGrid columns="2" cellspacing="6" width="300">

                    <h:outputText value="Governorate" />
                    <h:selectOneMenu id="govList"
                        value="#{newItemAdd.itemForm.region.governorate.governorateId}"
                        valueChangeListener="#{newItemAdd.itemForm.processGovernoratesChange}">
                        <f:selectItem id="govdefitm" itemValue="0"
                            itemLabel="All Governorates" />
                        <f:selectItems id="governoratesList"
                            value="#{newItemAdd.itemForm.governoratesList}" />
                        <f:ajax event="change" execute="@this" render="munList" />
                    </h:selectOneMenu>

                    <h:outputText value="Municipality" />
                    <h:selectOneMenu id="munList"
                        value="#{newItemAdd.itemForm.region.municipality.municipalityId}">
                        <f:selectItem id="mundefitm" itemValue=""
                            itemLabel="All Municipalities" />
                        <f:selectItems id="municipalitiesList"
                            value="#{newItemAdd.itemForm.municipalitiesList}" />
                    </h:selectOneMenu>

                </h:panelGrid>
            </h:panelGrid>

            <h:panelGrid columns="2" cellspacing="6" width="600">

                <h:panelGrid columns="3" cellspacing="6" width="300">

                    <h:outputText value="Property 2" />                 
                    <h:inputText id="property2" value="#{newItemAdd.itemForm.property2}" />
                    <rich:message for="property2" />

                    <h:outputText value="Property 3" />
                    <h:selectOneMenu id="propList"
                        value="#{newItemAdd.itemForm.property3}"
                        valueChangeListener="#{newItemAdd.itemForm.processProperty3Change}">
                        <f:selectItem id="mandefitm" itemValue="0" itemLabel="All porperties" />
                        <f:selectItems id="propList"
                            value="#{newItemAdd.itemForm.property3List}" />
                        <f:ajax event="change" execute="@this" render="modList" />
                    </h:selectOneMenu>
                    <rich:message for="propList" />
                </h:panelGrid>

                <h:panelGrid columns="3" cellspacing="6" width="300">
                    <h:outputText value="property 4" />
                    <h:inputText id="prop4" value="#{newItemAdd.itemForm.property4}" />
                    <rich:message for="prop4" />

                    <h:outputText value="Property 4" />
                    <h:selectOneMenu id="prop4List"
                        value="#{newItemAdd.itemForm.model}">
                        <f:selectItem id="moddefitm" itemValue="" itemLabel="All Properties" />
                        <f:selectItems id="prop41List" value="#{newItemAdd.itemForm.properties4List}" />
                    </h:selectOneMenu>
                    <rich:message for="prop4List" />
                </h:panelGrid>

            </h:panelGrid>
        </rich:panel>

        <!-- -->

        <rich:panel id="optionalFilters">

            <h:panelGrid columns="2" cellspacing="6" width="600">

                <h:panelGrid columns="2" cellspacing="6" width="400">
                    <h:outputText value="Property 5" rendered="#{!newItemAdd.type1}"/>
                    <h:selectOneMenu id="property5" rendered="#{!newItemAdd.type1}"
                        value="#{newItemAdd.itemForm.property5}"
                        layout="pageDirection">
                        <f:selectItem id="propId" itemValue="0"
                            itemLabel="Any property" />
                        <f:selectItems value="#{newItemAdd.itemForm.properties5List}" var="item"
                            itemLabel="#{item.label}" itemValue="#{item.value}" />
                    </h:selectOneMenu>

                    <h:outputText value="Property 7 " rendered="#{newItemAdd.type2}"/>
                    <h:selectOneMenu id="property7" rendered="#{newItemAdd.type2}"
                        value="#{newItemAdd.itemForm.family1.property7.property7Id}">
                        <f:selectItem id="trmdefitm" itemValue="0"
                            itemLabel="Any property" />
                        <f:selectItems id="property7List"
                            value="#{newItemAdd.itemForm.property7List}" />
                    </h:selectOneMenu>

                    <h:outputText value="Property 8" />
                    <h:selectOneMenu id="property8List"
                        value="#{newItemAdd.itemForm.property8}">
                        <f:selectItem id="bdydefitm" itemValue=""
                            itemLabel="All properties" />
                        <f:selectItems id="propList" value="#{newItemAdd.itemForm.property8List}" />
                    </h:selectOneMenu>

                    <h:outputText value="Property 9 " rendered="#{newItemAdd.type2}"/>
                    <h:selectOneMenu id="property9" rendered="#{newItemAdd.type2}"
                        value="#{newItemAdd.itemForm.family1.property9.property9Id}">
                        <f:selectItem id="trndefitm" itemValue="0"
                            itemLabel="Any Property" />
                        <f:selectItems id="prop9List"
                            value="#{newItemAdd.itemForm.property9List}" />
                    </h:selectOneMenu>

                    <h:outputText value="Property 10 " />
                    <h:selectOneMenu id="prop10"
                        value="#{newItemAdd.itemForm.property10}">
                        <f:selectItem id="minprcdefitm" itemValue="" itemLabel="Any Property" />
                        <f:selectItems id="prop10List"
                            value="#{newItemAdd.itemForm.property10List}" />
                    </h:selectOneMenu>
                    <h:outputText value=" ?? " />

                    <h:outputText value="property" />
                    <h:outputText value="property ??" />
                    <h:outputText value="property ? property ? property ?" />
                    <h:outputText value="property ? property ? property ?" />
                    <h:outputText value="property ??" />

                </h:panelGrid>

                <h:outputText value="property" />

            </h:panelGrid>

            <h:panelGrid id="property11">
                <h:outputText value="property 11" />
                <h:inputTextarea value="#{newItemAdd.itemForm.property11}" cols="50"
                    rows="10" />
            </h:panelGrid>

            <h:panelGrid columns="2" columnClasses="top,top">
                <rich:fileUpload fileUploadListener="#{newItemAdd.picsManager.listener}"
                    id="upload" acceptedTypes="jpg, gif, png, bmp"
                    ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');"
                    maxFilesQuantity="3">
                    <a4j:ajax event="uploadcomplete" execute="@none" render="info" />
                </rich:fileUpload>

                <h:panelGroup id="info" layout="block">
                    <rich:panel bodyClass="info">
                        <f:facet name="header">
                            <h:outputText value="Uploaded Files Info" />
                        </f:facet>
                        <h:outputText value="No files currently uploaded"
                            rendered="#{newItemAdd.picsManager.size==0}" />
                        <rich:dataGrid columns="1" value="#{newItemAdd.picsManager.files}" var="file"
                            rowKeyVar="row">
                            <rich:panel bodyClass="rich-laguna-panel-no-header">
                                <h:panelGrid columns="2">                               

                                    <a4j:mediaOutput element="img" mimeType="image/jpeg"
                                        createContent="#{newItemAdd.picsManager.paint}" value="#{row}"
                                        style="width:100px; height:100px;" cacheable="false">
                                        <f:param value="#{fileUploadBean.timeStamp}" name="time" />
                                        <a4j:ajax event="click" execute="newItemAdd.picsManager.paint" ></a4j:ajax>

                                    </a4j:mediaOutput>

                                    <h:panelGrid columns="2">
                                        <h:outputText value="File Name:" />
                                        <h:outputText value="#{file.name}" />
                                        <h:outputText value="File Length(bytes):" />
                                        <h:outputText value="#{file.length}" />
                                    </h:panelGrid>
                                </h:panelGrid>
                            </rich:panel>
                        </rich:dataGrid>
                    </rich:panel>
                    <br />
                    <a4j:commandButton action="#{newItemAdd.picsManager.clearUploadData}"
                        render="info, upload" value="Clear Uploaded Data"
                        rendered="#{newItemAdd.picsManager.size>0}" />
                </h:panelGroup>
            </h:panelGrid>

        </rich:panel>
        <rich:messages />
        <a4j:commandButton value="Go!"
            action="#{newItemAdd.testCheck}" />
    </h:form>

    </ui:define>
</ui:composition>

</html> 
```

在此先感谢您的帮助。

**更新：** 我已将我的表格分成如下所述的 2 个表格，但它似乎没有帮助:(

```
 <h:form>   

        <ui:include src="file_test_part_1.xhtml"/>
        <!-- -->
        <ui:include src="file_test_part_2.xhtml"/>

        <rich:messages />
        <a4j:commandButton value="Go!"
            action="#{newCarAdd.testCheck}" />
    </h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-23T02:25:32.500

您可以采取一些措施来提高屏幕的性能

1.  **GZIP 过滤器**将显着减少初始加载时间。它在传输到客户端浏览器时压缩页面内容（动态和静态内容）。参考[https://stackoverflow.com/a/35567295/5076414](https://stackoverflow.com/a/35567295/5076414)
2.  您还可以实现一个**cacheFilter**以使您的屏幕性能与基于 JavaScript 的 UI 相当。这将缓存屏幕的静态内容，例如图标、图像、样式表、javascript 等。您可以控制要缓存的内容和要排除的内容。参考[https://stackoverflow.com/a/35567540/5076414](https://stackoverflow.com/a/35567540/5076414)
3.  对于客户端 UI 组件，您可以使用**Primefaces**，它是基于 JQuery 的 UI。

## 如何验证我的屏幕是否使用 gzip 和缓存

要查看您的内容是否已经使用 gzip 和缓存，请在**Google Chrome**浏览器中 -> 右键单击​​屏幕 -> 检查 -> 单击网络选项卡 -> 刷新屏幕。单击图像、图标、样式表，看看您是否在**响应标题中看到以下内容**

`Cache-Control:max-age=2592000`如果元素的状态是 304（来自缓存）

`Content-Encoding:gzip`如果元素的状态是 200

# html - 在 Opera 中没有明显原因的滚动条显示

> ID：14662387
> 
> 赞同：1
> 
> 时间：2013-02-02T13:32:03.227
> 
> 标签：html, css, opera

`Blue inline-block #b`with`vertical-align: middle`放在里面`red #a`。在某个时刻`blue #b`具有其父级的完整高度。

[http://jsfiddle.net/TK2qs/1/](http://jsfiddle.net/TK2qs/1/)

麻烦制造者仅是 Opera [1]，即使`red parent #a`[2] 下面有一些空间，它也会在窗口上放置垂直滚动条。超级有趣的细节是，标记中实际上没有任何东西似乎占用了下面的额外空间`red #a`——甚至`document element`不占用这个空间。

`display: inline-block`当或`vertical-align: middle`规则`blue #b`被丢弃时，注意到的行为消失。尽管如此，找到一个同时保持这两个规则的解决方案还是很有用的。

*要重现 JSFiddle 中的问题，请拖动右下子框架的边框。*

感谢您的关注！

[1_] 仅在我当前的版本中检查：12.11。

[2_] [jsfiddle.net 示例][1] 中大约 40-50 像素。大小随`red #a`高度而变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:50:15.110

我同意furikuretsu的回答。 `overflow:hidden`摆脱神秘的隐形内容。

奇怪的是，我在里面放的文字越多`div#c`，空间就越小。当文本填充超过一半高度时，空间完全消失。这是一个观察，而不是解决方案！

我将此作为错误报告给 Opera。不知道会不会有什么好处...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:32:03.227

[http://jsfiddle.net/Mpmgv/](http://jsfiddle.net/Mpmgv/)

我自己找到了两种解决方法。

首先是隐藏溢出的`blue #b`。它是一个可行的解决方案这一事实让我想到*隐形的大元素*可能位于内部某处`blue #b`，而不是其他任何地方。

第二种解决方法是在`blue #b`. 因此，所有打算放入的内容都`blue #b`将进入合成子项。

`red #a`您可以通过在元素上添加适当的类来检查这两种解决方案。

尽管如此，我仍然等待并非常感谢任何关于在 Opera 中出现这种奇怪问题的原因的想法。

# database - 我如何进行每个标准化阶段？

> ID：14662389
> 
> 赞同：0
> 
> 时间：2013-02-02T13:32:08.687
> 
> 标签：database, database-design, normalization

我有一个要创建的数据库，其中包含我需要包含在其中的字段列表。我需要做一个表格来显示从 1NF 到 2NF 到 3NF 的标准化过程。但是，我根本不了解规范化，我迫切需要尝试将其规范化。我使用的字段如下：

**客户ID**

姓

名字

电子邮件

电话号码

**预订编号**

日期资源

已收集（是/否）

**电话号码**

牌

模型

操作系统

屏幕尺寸

存储大小

价格

描述

图1

图2

缩略图

库存

标记（是/否）

**联系人 ID**

主题

信息

日期联系方式

已回复（是/否）

我不太擅长数据库设计，所以任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:00:54.817

假设这不是家庭作业，我想知道为什么你必须展示你达到 3NF 的过程。如果您的数据库在 3NF 中，谁在乎您是如何到达那里的？同样，假设这不是家庭作业，有一种简单的方法可以立即设计一个 3NF 中的数据库。

学习 ER 建模。使用 ER 建模来描述您的数据库必须满足的信息需求。仔细选择您的实体。对于每个实体，请非常小心地为该实体选择一个 id。如果它不在给定的数据中，您可能必须合成一个 id。这是数据分析，而不是数据库设计。确保您在此阶段发现的属性与正确的实体或关系相关联。

这取决于上下文。例如，在人事系统中，“出生日期”是员工的一个属性。但是在分娩中心，“出生日期”是出生的一个属性，出生的人与那个出生有关系。一胎可以生几个人。

了解如何将 ER 模型转换为关系模型。出于这些目的，SQL 模型和关系模型可以被视为等效的。在选择主键时要非常非常小心，并注意使用“automunber”等功能的后果。您可能需要使用此功能，但是当冗余数据输入导致两行具有不同主键且都引用主题实体的同一实例时，请想出应对方法。

如果您的属性已连接到正确的实体或关系，如果您正确地转换为关系模型，并且如果您选择了正确的主键，您的数据库将自动处于 3NF。

如果这是家庭作业，那么您的老师的要求在您的问题中并不清楚。了解老师试图教给您的内容可能就像告诉我们真正的要求是什么一样容易。

# java - 在属性文件中写入属性而不破坏文件中的窗口路径

> ID：14662391
> 
> 赞同：0
> 
> 时间：2013-02-02T13:32:22.630
> 
> 标签：java, properties, path, window

我在 Windows 中有一个包含绝对文件路径的属性文件，如下所示：

```
[PRAXIS]
PVS=CDP_Z1
PXID=94773

[SENDEN]
PVS=CDP_Z1
DATEI=C:\imex_workspace\1535_1297160840340.1247
VERSION=2.5

[STATUS]
ERRORLEVEL=0
ERRORTEXT=
READY=0 
```

该A文件包含B文件的文件路径。我想使用 Java Properties 类将 READY 属性写入 1，其他保持不变。

```
Properties p = new Properties();
String upload = "a.ini";
p.load(new FileInputStream(upload));
if(p.get("READY") != null && "0".equals(p.get("READY")))
{
  p.setProperty("READY","1");
  p.store(new FileOutputStream(new File(upload)),null);
} 
```

不知何故，a.ini 中的文件路径在 a.ini 更新后被破坏。有人帮助找出在文件中写入属性的最佳方法（可能不是 ini，可能是 txt 文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:23:43.650

问题背后的原因是对于 Java 属性文件，反斜杠字符用作C 或 Java 语言中的[转义字符。](http://en.wikipedia.org/wiki/Escape_character#Programming_and_data_formats)

您在问题中发布的此文件不是有效的 Java 属性文件，它是 Windows INI 文件。Windows INI 文件与 Java 属性文件不同，因为它们具有“部分”（在您的示例中为 praxis senden 状态），还因为路径以 DOS 格式指定，这意味着反斜杠 ( `\`) 用作路径分隔符。在 Java 中，路径分隔符可用作`\`Windows 中的反斜杠 ( )，但最常见的是 unix 斜杠 ( `/`)。问题是，如果你想使用反斜杠，你需要“转义”它，所以你的路径应该用双反斜杠指定：

```
DATEI=C:\\imex_workspace\\1535_1297160840340.1247 
```

或以其他方式：

```
DATEI=C:/imex_workspace/1535_1297160840340.1247 
```

通过这种方式，路径与 Java 属性文件格式兼容。但这会对使用此 .ini 文件的 Windows 应用程序产生副作用。

为了解决这个问题，我认为您最好使用适当的库来处理 Windows`.ini`配置文件，这将保证涵盖这种情况，但也包括您可能没有考虑过的其他可能性，因为 Java 属性文件遵循不同的规范比 Windows`.ini`格式。

在这里，您可以找到一些您可能需要考虑的库：

*   [Ini4J](http://ini4j.sourceforge.net/)
*   [Apache 公用配置](http://commons.apache.org/configuration/)
*   [JNiFile](https://github.com/SubZane/JIniFile)

# jquery - Flexslider 2 不在 IE7 中显示图像

> ID：14662392
> 
> 赞同：0
> 
> 时间：2013-02-02T13:32:28.660
> 
> 标签：jquery, css, flexslider

我正在使用 Flexslider 2，它在除 IE7 之外的所有浏览器中都运行良好。在 IE7 中，图像未加载，我只能看到导航箭头。

这就是我初始化插件的方式，

```
$('.flexslider').flexslider({
               animation: "slide",              //Select your animation type (fade/slide)
               slideshow: true,                //Should the slider animate automatically by default? (true/false)
               slideshowSpeed: 7000,           //Set the speed of the slideshow cycling, in milliseconds
               animationDuration: 500,         //Set the speed of animations, in milliseconds
               directionNav: true,             //Create navigation for previous/next navigation? (true/false)
               controlNav: true,               //Create navigation for paging control of each clide? (true/false)
               keyboardNav: true,              //Allow for keyboard navigation using left/right keys (true/false)
               touchSwipe: true,               //Touch swipe gestures for left/right slide navigation (true/false)
               prevText: "Previous",           //Set the text for the "previous" directionNav item
               nextText: "Next",               //Set the text for the "next" directionNav item
               randomize: false,                //Randomize slide order on page load? (true/false)
               slideToStart: 0,                //The slide that the slider should start on. Array notation (0 = first slide)
               pauseOnAction: true,            //Pause the slideshow when interacting with control elements, highly recommended. (true/false)
               pauseOnHover: false,            //Pause the slideshow when hovering over slider, then resume when no longer hovering (true/false)
               controlsContainer: ".flexslider-container"           //Advanced property: Can declare which container the navigation elements should be appended too. Default container is the flexSlider element. Example use would be ".flexslider-container", "#container", etc. If the given element is not found, the default action will be taken.
           }); 
```

除此之外，我使用默认的 CSS 和 HTML，没有任何更改。如果有人能帮我解决这个问题，我将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:12:02.913

分享链接。如果他们的 (woothemes/madebymuffin) 在 IE7 中工作，那么它可能是您页面上的其他内容。您是在 IE7 中的实际机器上还是在浏览器堆栈或其他东西上测试这个？

# asp.net-mvc - 使用淘汰赛、jbst 等的基于 json 的 mvc 网格

> ID：14662398
> 
> 赞同：0
> 
> 时间：2013-02-02T13:32:55.557
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, knockout.js, grid

我有一个 ASP.Net MVC3 Web 应用程序一直在使用[jQuery 表单插件](http://malsup.com/jquery/form/)进行 ajaxSubmit。**我有一个网格，我在过滤、排序和分页时使用 ajax 回发来刷新它**- 简单来说，我只是替换了从 ajax 回发获得的网格 html 结果。适用于任何类型的网格功能，因为网格 html 是在服务器端呈现的。

现在，我正在寻找一个基于 json 的网格，它具有一些基本功能，如排序、分页以及可能的分组和服务器端分页！可编辑网格不是主要焦点，但它会是一个额外的优势。我看到大多数解决方案都指向[Knockoutjs](http://knockoutjs.com/examples/grid.html)。我一直在尝试，但它需要更多的功课，尤其是分组等高级功能......

我找到了一些基本的例子，比如

1.  [Knockoutjs 基本网格（带添加/删除）](http://www.codeproject.com/Articles/409247/Knockoutjs-grid-with-Asp-net)
2.  [SimpleGrid 组件](https://stackoverflow.com/questions/8008616/knockoutjs-the-simplegrid-component)
3.  [jQgrid也支持json](https://stackoverflow.com/questions/2690657/mapping-json-data-in-jqgrid)
4.  [jqxgrid](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxgrid/jquery-grid-working-with-knockoutjs.htm)

除此之外，我还遇到了一个新概念**[——JsonML + 浏览器端模板 (JBST)](http://www.jsonml.org/bst/example/)**基本上，它适用于 json，在将元素添加到页面之前，它允许我们更改元素的行为。[浏览器端模板](http://ajaxpatterns.org/Browser-Side_Templating)。有没有人经历过？能和KO比吗？

*我欢迎您对我的基于 json 的简单特色网格提出建议和专业建议（假设 json 是传递数据的最佳方式）。如果您知道另一种方法，也请分享。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:33:06.293

你检查过 KoGrid，它是一个原生的 KO 网格

[https://github.com/Knockout-Contrib/KoGrid](https://github.com/Knockout-Contrib/KoGrid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:15:00.617

我做了功课，这是我的最终结论。首先 - 没有像 KO 支持这样的东西 - 插件必须有一个 ko 绑定处理程序（KOGrid 除外）。

**DataTables** -[支持 json](http://datatables.net/blog/Extended_data_source_options_with_DataTables)但找不到原生 KO 支持（[外部插件](http://www.joshbuckley.co.uk/2011/07/knockout-js-datatable-bindings/)）。绑定看起来简单直接 fwd 但许多[差异脚本](http://datatables.net/download/)文件。

**SlickGrid** - 支持[json](https://github.com/mleibman/SlickGrid/blob/master/examples/example6-ajax-loading.html)但需要一些后期处理。可能的外部[KO 绑定](https://stackoverflow.com/questions/7742821/updating-slickgrid-with-knockoutjs-via-dependentobservable)可行。使用 ko.utils.unwrapObservable。

**[ko.SimpleGrid](https://github.com/SteveSanderson/knockout/blob/gh-pages/examples/resources/knockout.simpleGrid.1.3.js)**[绑定 ko.bindingHandlers.simpleGrid 的实现（支持分页）如KO 演示](http://knockoutjs.com/examples/grid.html)中所见。（[源](http://jsfiddle.net/rniemeyer/QSRBR/)）[没有对排序的原生支持，](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/rl6B2jP2-BQ)但可以扩展

*我最后的选择——*

> **[KOGrid](http://ericmbarnard.github.com/KoGrid/#/examples)**可能是第一个纯 KO 为基础的网格！所以显然json兼容。支持本机排序（无需额外的脚本）。还发现了大型数据集的服务器端分页。**合而为一**！

```
function columnDefsVM() {
    var self = this;
    this.myData = ko.observableArray([{ name: "Moroni", age: 50 },
                     { name: "Tiancum", age: 43 },
                     { name: "Enos", age: 34 }]);
    this.gridOptions = { data: self.myData,
      columnDefs: [{field: 'name', displayName: 'Name'},{field: 'age', displayName: 'Age'}]
    };
}
ko.applyBindings(new columnDefsVM()); 
```

还有一些——

*   **[JsonML + 浏览器端模板 (JBST)](http://www.jsonml.org/bst/example/)**无法推断太深，但它确实提供了一种使用 js 进行模板和运行时行为修改的有效方法！
*   简单[的 http://paramquery.com/demos](http://paramquery.com/demos)
*   功能丰富的 jqGrid [http://www.trirand.net/demoaspnetmvc.aspx](http://www.trirand.net/demoaspnetmvc.aspx) ( [json](https://stackoverflow.com/questions/2690657/mapping-json-data-in-jqgrid) & [KO](https://github.com/CraigCav/Knockout-jqGridBinding) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:03:38.030

您还可以在这里查看网格示例：[jqxGrid with Knockout](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxknockout/index.htm)

# batch-file - 在字符串批处理中用管道替换符号

> ID：14662402
> 
> 赞同：0
> 
> 时间：2013-02-02T13:33:24.053
> 
> 标签：batch-file, output

我有这个字符串，叫它str，可能看起来像这个XinfoX。我想要一个命令，使用批处理，用这个符号'|'替换'X' （管道符号）。我已经尝试过了，但是 cmd 不断关闭/崩溃。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:53:38.493

使用变量编辑/替换请参阅[此处](http://ss64.com/nt/syntax-replace.html)了解详细信息

```
set str=XinfoX
echo %str:X=^|%

C:\>echo %str:X=^|%
|info| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:35:32.873

您的命令正在崩溃，因为该`|`角色充当管道运算符。但是您想将其用作文字字符。该字符必须被转义或引用。

```
set str=XinfoY

:: using quotes
set "str=%str:X=|%"

:: using escape
set str=%str:Y=^|% 
```

如果您的字符串包含引号，使得某些字符串被引用而某些字符串没有被引用，那么情况可能会变得复杂。解决方案是使用延迟扩展。

```
setlocal enableDelayedExpansion
set str="Xinfo1X"info2X
set "str=!str:X=|!" 
```

# java - Selenium：无法通过包含来定位元素

> ID：14662404
> 
> 赞同：0
> 
> 时间：2013-02-02T13:33:30.253
> 
> 标签：java, xpath, selenium-webdriver

当我运行此代码时：

```
 driver = new HtmlUnitDriver();
        baseUrl = "http://localhost:8080/alooh-paid";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);        
           WebElement loginElement =driver.findElement(By.xpath("//input[contains(@id,'name']")); 
```

我收到此错误：

> org.openqa.selenium.InvalidSelectorException：无法评估 xpath 表达式 '//input[contains(@id,'name']' 有关此错误的文档，请访问： [http://seleniumhq.org/exceptions/invalid_selector_exception。 html](http://seleniumhq.org/exceptions/invalid_selector_exception.html)构建信息：版本：'2.20.0'，修订：'16008'，时间：'2012-02-28 15:00:40' 系统信息：os.name：'Windows 7'，os.arch：'x86 '，os.version：'6.1'，java.version：'1.7.0_03'

这是我的 selenium IDe 源代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://localhost:8080/" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
    <td>open</td>
    <td>/alooh-paid/login.jsf</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>//input[@id='j_idt11:j_idt14:name']</td>
    <td>admin</td>
</tr>
<tr>
    <td>type</td>
    <td>//input[@id='j_idt11:j_idt14:password']</td>
    <td>12563</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=j_idt11:j_idt14:register</td>
    <td></td>
</tr>

</tbody></table>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:44:12.250

我认为这是括号不匹配的简单案例。

你有`"//input[contains(@id,'name']"`

而不是使用它更改为`"//input[contains(@id,'name')]"`

# php - 如何使我的应用程序可以使用但不能在浏览器中查看的文件？

> ID：14662408
> 
> 赞同：1
> 
> 时间：2013-02-02T13:34:00.893
> 
> 标签：php, apache, .htaccess

我的应用程序中有一个文件，应用程序使用该文件来确定设置，例如最大上传大小、用户是否可以注册等。而且我需要在应用程序主管中使用它，以便人们可以更改他们的本地配置。但不幸的是，你可以去 /config/local.json 下载它。我确实考虑过让 /config/ 重写到 PHP 页面，但这有点长，但我可能还必须这样做。

我将 PHP 作为 Apache 模块运行。有没有办法我可以用 .htaccess 或其他东西来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:51:43.477

在 .htaccess 文件中可以接受这样的事情：

```
<IfModule mod_php5.c>
    php_value upload_max_filesize 20M
    php_value post_max_size 20M
    php_value max_execution_time 200
    php_value max_input_time 200
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:47:22.047

好吧，您可以将文件保存在文档根目录之外（您保存站点的基本目录的一个目录）并从脚本访问该文件。

您可以在 apache 配置文件中编辑文档根目录。

`/etc/apache2/sites-enabled/000-default`对于 *nix 环境

# xml - 如何保留 xml 文档中的所有标签、结构和文本，只用 XSLT 替换一些？

> ID：14662409
> 
> 赞同：3
> 
> 时间：2013-02-02T13:34:13.017
> 
> 标签：xml, xslt, xml-parsing

我一直在尝试将简单的 xsl 样式应用于 xml 文档：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <html>
      <body>

        <xsl:for-each select="//title">
          <h1><xsl:value-of select="."/></h1>
        </xsl:for-each>

      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

不幸的是，这似乎只是简单地忽略了所有其他标签并将它们以及它们的内容从输出中删除，而我只剩下转换为 h1s 的标题。我想做的是保留我的文档结构，同时只替换它的一些标签。

例如，如果我有这个文件：

```
<section>
  <title>Hello world</title>
  <p>Hello!</p>
</section> 
```

我可以得到这个：

```
<section>
  <h1>Hello world</h1>
  <p>Hello!</p>
</section> 
```

不太确定从 XSLT 手册的哪个位置开始查找。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T15:18:25.507

正如 OR Mapper 所说，解决方案是在您的转换中添加一个标识模板，然后覆盖您需要的部分。这将是完整的解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <!-- Identity template -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <html>
      <body>
        <xsl:apply-templates select="@* | node()" />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="title">
    <h1>
      <xsl:apply-templates select="@* |node()" />
    </h1>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<html>
  <body>
    <section>
      <h1>Hello world</h1>
      <p>Hello!</p>
    </section>
  </body>
</html> 
```

如果您真的只想保留原始 XML 但替换`<title>`，您可以删除中间`<xsl:template>`，您应该得到结果：

```
<section>
  <h1>Hello world</h1>
  <p>Hello!</p>
</section> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:48:00.973

您只想替换`<title>`元素。但是，在您的 XSLT 中，您为文档的根元素 ( `/`) 定义了一个模板，并将整个根元素*替换为您的模板的内容。*

你*真正*想要做的是定义一个身份转换模板（谷歌这个，它是 XSLT 中的一个重要概念）基本上从你的源文档中复制所有内容，以及一个*只*匹配你的`<title>`元素并用你的新代码替换它们的模板，像这样：

```
<xsl:template match="title">
    <h1><xsl:value-of select="."/></h1>
</xsl:template> 
```

# c# - 寻找 Properties.Settings.Default 的快捷方式

> ID：14662410
> 
> 赞同：6
> 
> 时间：2013-02-02T13:34:14.170
> 
> 标签：c#, winforms, shortcut, properties.settings

我定义的选项越多，当我必须修改它们时就越需要输入。所以我正在寻找更短版本的 Properties.Settings.Default.varX

我试过：

```
Properties.Settings settings = Properties.Settings.Default;
settings.var1 = "x";
settings.var2 = "y";
settings.var3 = "Z";
Properties.Settings.Default = settings; 
```

但 Properties.Settings.Default 是只读的，并且 Save 函数没有过载。

那么除了一次又一次地键入 Properties.Settings.Default 之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T13:44:28.307

试试这样：

```
Properties.Settings settings = Properties.Settings.Default;
settings.var1 = "x";
settings.var2 = "y";
settings.var3 = "Z";
settings.Save(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T13:42:27.243

为了缩短您必须输入的内容，您可以尝试将其添加到初始 using 语句中

```
using MyProps = <your_namespace>.Properties.Settings; 
```

然后在代码中你可以使用

```
MyProps.Default.Var1 = ""; 
```

`<your_namespace>`应替换为定义设置的完整命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-28T16:07:50.800

我使用的一些我觉得很方便的东西如下：

```
var props = Properties.Settings.Default; 
```

这样，如果我输入“props”，就好像我输入了“Properties.Settings.Default”。所以我现在可以打字了

> 道具名称

代替

> 属性.设置.默认.名称

# .net - SQL to Linq - 选择第一个匹配的行

> ID：14662415
> 
> 赞同：1
> 
> 时间：2013-02-02T13:35:14.463
> 
> 标签：.net, sql, c#-4.0, linq-to-sql

我一直在努力寻找我正在解决的这个任务问题的答案，尽管早上没有在这里搜索。我已经研究了 MIN/MAX 子句，但似乎无法正确适应我的场景。

我正在执行这个简单的 LINQ 查询，在其中搜索列匹配的所有行

```
using (DataClasses2DataContext db = new DataClasses2DataContext())
        {
            var routes = (

                          from txcalllines in db.TxcAllLines
                          where
                              txcalllines.LineName == searchString
                          select txcalllines);

            return routes.ToList();
        } 
```

这将返回以下结果：

```
FILE                           LINE   START               FINISH
output_txc_45486m.xml           486   North Station       Friswell Place
SVRAYAO486-20121008-22264.xml   486   Dunoon              Inveraray
SVRAYAO486-20121008-22265.xml   486   Dunoon              Inveraray
SVRAYAO486-20121008-22266.xml   486   Dunoon              Inveraray
SVRGMB04860-20120103-5774.xml   486   BURY                RADCLIFFE
SVRGMB04860-20120103-5775.xml   486   BURY                RADCLIFFE
SVRYNAO486-20120217-44588.xml   486   Selby Bus Stn       Pollington Circular 
```

问题是，运行这个查询会返回几行相同的路由（你可以看到 LINE、START 和 FINISH 是一样的），我只想返回每个路由的第一个匹配行。

所以想要的结果是：

```
FILE                           LINE   START               FINISH
output_txc_45486m.xml           486   North Station       Friswell Place
SVRAYAO486-20121008-22264.xml   486   Dunoon              Inveraray
SVRGMB04860-20120103-5774.xml   486   BURY                RADCLIFFE
SVRYNAO486-20120217-44588.xml   486   Selby Bus Stn       Pollington Circular 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:44:37.353

您可以使用`GroupBy`then 获取每个组的第一个元素。

```
var routes = (from txcalllines in db.TxcAllLines
              where txcalllines.LineName == searchString
              group txcalllines by new { txcalllines.Start, txcalllines.Finish } into g  // Groups the txcalllines by the pair (Start, Finish)
              select g.First());  // Gets the first intem of the group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:46:08.037

我误解了这个问题，我道歉......也许这可能会有所帮助？ [https://stackoverflow.com/a/706903/1380061](https://stackoverflow.com/a/706903/1380061)

# api - WP7 + XNA 游戏 - 在线排行榜

> ID：14662418
> 
> 赞同：0
> 
> 时间：2013-02-02T13:35:30.153
> 
> 标签：api, windows-phone-7, xna, leaderboard

寻找 xna+wp7 游戏的在线排行榜。

我正在尝试使用 www.mogade.com，但他们停止支持新用户。谁能告诉我任何其他可用的在线排行榜（免费）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:59:56.733

发现这个，看起来不错 www.scoreoid.net

[https://dev.windowsphone.com/en-us/featured/partners](https://dev.windowsphone.com/en-us/featured/partners)

# php - foreach 循环不止一步

> ID：14662424
> 
> 赞同：0
> 
> 时间：2013-02-02T13:36:31.347
> 
> 标签：php, mysql, pdo, phpmyadmin

我正在使用`PDO`从数据库中获取结果，然后使用`foreach`循环来显示数据。

我的代码是

```
$result1=$objPage->getGallery($id);
foreach($result1 as $row)
{

    echo "pic1=" . $row['pic']; 
    echo "pic2=" . $row['pic']; 
    echo "pic3=" . $row['pic']; 
    echo "<br>";    
} 
```

实际上，我想在一行中显示三个图片名称，然后是接下来的 3 个名称。

但现在它打印一个名字3次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:38:36.450

做这样的事情：

```
$result1=$objPage->getGallery($id);
$count = 0;
foreach($result1 as $row)
{
    echo "pic" . $count + 1 . "=" . $row['pic']; 
    if( $count % 3 == 2 )
    {
        echo "<br>";    
    }
    $count++;
} 
```

**信息**

1.  [模 %](http://en.wikipedia.org/wiki/Modulo_operation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:05:49.363

首先，准备你的数据

```
$data = $objPage->getGallery($id);
$data = array_chunk($data,3); 
```

然后输出

```
<table>
<? foreach($data as $chunk): ?>
  <tr>
<? foreach($chunk as $row): ?>
    <td><img src="<?=$row['pic']?>"></td>
<? endforeach ?>
  </tr>
<? endforeach ?>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:40:14.280

您可以使用外部标志，如下所示：

```
$flag = 0;
$result1=$objPage->getGallery($id);
foreach($result1 as $row) {
    echo "pic" . ($flag + 1) . "=" . $row['pic'];
    if( $flag % 3 == 0 )
        echo "<br>";
    $flag++;   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T13:41:23.970

您可以按照其他人的建议使用模数，但是这种更紧凑的方法怎么样？

```
$result1 = $objPage->getGallery($id);
$separators = array('', '', '<br/>');
foreach ($result1 as $index => $row) {
    echo 'pic' . ($index % 3) . '=' . $row['pic'] . $separators[$index % 3];
} 
```

# html - 图片在网站上不起作用？

> ID：14662435
> 
> 赞同：0
> 
> 时间：2013-02-02T13:38:34.287
> 
> 标签：html, css

大家好，如果有一个简单的原因，请多多包涵，因为这是我设计和托管的第一个站点，它花费了足够长的时间来整理如何上传它以及正确指向它的域名。

问题是我在 Dream Weaver CS5 中设计了我的网站。我创建了一个单独的文件夹来存储与该站点关联的所有图像。不幸的是，在上传网站并访问它之后，图像都丢失了，我不知道为什么？该网站是 brettmoney.com 或 brett money.co.uk。

其次，这不是一个主要问题，我仍然需要解决它并且可能很容易修复，但我顶部的导航栏在 IE 中移动到 2 行，但在 chrome 上是正确的。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:40:48.963

您的图像路径区分大小写，我将其中一个从`Images/Next_Event_UK_north_hants.png`更改`images/Next_Event_UK_north_hants.png`为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:40:59.270

`Images/Logo.png`应该`images/logo.png`

案例对于基于 *nix 的环境很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T13:49:03.280

您是否已将 Images 文件夹放在 public_html 文件夹中？因为这可能是我在查找该文件夹时收到 404 错误的原因。

**编辑：**从外观上看，您需要确保使用正确的大小写，因为文件夹图像存在但不存在图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:12:38.930

这是由于您指定的路径问题，例如图像而不是图像。所以使用图像/logo.png。其次，由于间距，您的顶部导航在 IE 浏览器中中断。您必须减少您提供的填充 `.NavBar ul li { margin: 0px; **padding: 0px 16px;** list-style: none; display: inline;`

# go - len() 运行多少次？

> ID：14662438
> 
> 赞同：9
> 
> 时间：2013-02-02T13:38:42.460
> 
> 标签：go

len(p) 会运行多少次？只有一个，结果将被保存，还是每次迭代都会运行？

```
func main() {
    p := []int{2, 3, 5, 7, 11, 13}
    for i:=0;i<len(p);i++ {}
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T16:32:35.687

`len()`在切片上由编译器优化，就像访问局部变量一样。这不是真正的函数调用。

您可以通过以下方式进行验证：

```
$ 猫 x.go
包主
导入“fmt”
功能主要（）{
    a := []int{1,2, 3}
    fmt.Println(len(a))
}

```

然后查看编译器输出：

$ go tool 6g -S x.go

```
--- prog list "main" ---
0000 (x.go:3) 文本主+0(SB),$128-0
0001 (x.go:4) MOVQ $0,autotmp_0002+-80(SP)
0002 (x.go:4) MOVQ $0,autotmp_0002+-72(SP)
0003 (x.go:4) MOVQ $0,autotmp_0002+-64(SP)
0004 (x.go:4) LEAQ autotmp_0002+-80(SP),BX
0005 (x.go:4) MOVQ BX,autotmp_0001+-56(SP)
0006 (x.go:4) MOVQ autotmp_0001+-56(SP),BX
0007 (x.go:4) MOVQ statictmp_0000+0(SB),BP
0008 (x.go:4) MOVQ BP,(BX)
0009 (x.go:4) MOVQ statictmp_0000+8(SB),BP
0010 (x.go:4) MOVQ BP,8(BX)
0011 (x.go:4) MOVQ statictmp_0000+16(SB),BP
0012 (x.go:4) MOVQ BP,16(BX)
0013 (x.go:4) MOVQ autotmp_0001+-56(SP),BX
0014 (x.go:4) MOVQ $3,CX
0015 (x.go:5) LEAQ autotmp_0005+-16(SP),DI
0016 (x.go:5) MOVQ $0,AX
0017 (x.go:5) STOSQ ,
0018 (x.go:5) STOSQ ,
0019 (x.go:5) LEAQ autotmp_0005+-16(SP),BX
0020 (x.go:5) MOVQ BX,autotmp_0004+-48(SP)
0021 (x.go:5) MOVQ autotmp_0004+-48(SP),BX
0022 (x.go:5) MOVQ $1,SI
0023 (x.go:5) MOVQ $1,DX
0024 (x.go:5) MOVQ BX,autotmp_0003+-40(SP)
0025 (x.go:5) MOVQ autotmp_0003+-40(SP),BX
0026 (x.go:5) MOVQ $type.int+0(SB),AX
0027 (x.go:5) MOVQ AX,(BX)
0028 (x.go:5) MOVQ CX,8(BX)
0029 (x.go:5) MOVQ autotmp_0003+-40(SP),BX
0030 (x.go:5) MOVQ BX,(SP)
0031 (x.go:5) MOVQ SI,8(SP)
0032 (x.go:5) MOVQ DX,16(SP)
0033 (x.go:5) 调用,fmt.Println+0(SB)
0034 (x.go:6) 回复 ,

```

注意 CALL 到`fmt.Println`，但没有调用到`len`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-02T14:09:30.740

尝试一个实验！ [http://play.golang.org/p/Eksb6bQovC](http://play.golang.org/p/Eksb6bQovC)

或阅读文档： http: [//golang.org/ref/spec#For_statements](http://golang.org/ref/spec#For_statements) （TL；DR：“在每次迭代之前评估条件。”）

在您的示例中， len 是条件的一部分，因此在每次迭代之前都会对其进行评估。条件评估为真的六次迭代将进行一次迭代，然后再进行一次评估，条件评估为假并退出 for 循环。所以，总共七次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T14:45:14.127

第二个实验：

```
func Test_X(t * testing.T) {
    list := []int{1, 2, 3}
    fmt.Printf("# b: len(list) %d\n", len(list))
    for i := 0; i < len(list); i++ {
        fmt.Printf("# %d: len(list) %d, list[%d] == %d\n", i, len(list), i, list[i])
        if i == 2 {
            list = append(list, 4)
        }
    }
    fmt.Printf("# a: len(list) %d\n", len(list))
} 
```

输出：

```
=== RUN Test_X
# b: len(list) 3
# 0: len(list) 3, list[0] == 1
# 1: len(list) 3, list[1] == 2
# 2: len(list) 3, list[2] == 3
# 3: len(list) 4, list[3] == 4
# a: len(list) 4
--- PASS: Test_X (0.05 seconds) 
```

它给出了不优化然后 len() 调用的原因。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-02T13:44:53.653

从算法的角度来看，条件是针对循环的每个步骤进行评估的。在这种情况下，它似乎是 len(p) 评估的六倍。

# java - Guice：注入与布线

> ID：14662441
> 
> 赞同：2
> 
> 时间：2013-02-02T13:38:54.707
> 
> 标签：java, dependency-injection, guice

很多时候，类需要被实例化（构造），然后“连接”（配置）才能使用。例如：

```
// Construction.
EventBus bus = new EventBus();
FizzEventHandler fizzHandler = new FizzHandler();
BuzzEventHandler buzzHandler = new BuzzHandler();

// Wiring.
bus.register(fizzHandler);
bus.register(buzzHandler); 
```

在 Guice 中，我们通过以下方式完成第一部分（构造；注入）`Binder`：

```
public class MyModule extends AbstractModule {
    @Override
    public void configure() {
        bind(EventBus.class).to(SimpleEventBus.class);
        bind(FizzEventHandler.class).to(DefaultFizzEventHandler.class);
        bind(BuzzEventHandler.class).to(DefaultBuzzEventHandler.class);
    }
} 
```

但是**布线**发生在哪里？当我的基于 Guice 的应用程序启动时，我们使用 DI“引导”过程：

```
public class MyApp {
    private EventBus bus;
    private FizzEventHandler fizzHandler;
    // ...etc.

    public static void main(String[] args) {
        MyApp app = new MyApp();
        app.run();
    }

    public MyApp() {
        // Bootstrap DI.
        MyModule myModule = new MyModule();
        Injector injector = Guice.createInjector(myModule);

        bus = injector.inject(EventBus.class);
        fizzHandler = injector.inject(FizzEventHandler.class);
        // ...etc.

        // Wire
        bus.register(fizzHandler);
    }
} 
```

这适用于顶级（根）DI 类。但是随着我们进一步“向下”依赖树，并进入应用程序使用的所有其他对象，将连接逻辑放在这样的构造函数中是丑陋的并且（我*相信*）是一种不鼓励的做法。

所以我问：厌战的 Guice 退伍军人将他们的接线/配置代码放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:50:40.970

我在一个使用 Guice 的相当大的系统（约 3000 个类）上工作。我想说我们的方法是用构造函数做所有事情。正如您所描述的，没有明显的“建设”和“布线”活动，只有建设。

在您的示例中，事件处理程序将是总线的构造函数参数，它将在其构造函数中注册它们。

如果您想相当灵活地注入给定类型的所有组件（在这里，您希望将所有事件侦听器注入总线），您可以使用[multibindings](http://code.google.com/p/google-guice/wiki/Multibindings)。但是，我认为我们实际上并没有在我们的代码库中使用它。我们只是写出需要注入的所有东西的手动列表，事实证明这在实践中并不是那么困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:46:50.833

我一般使用多个模块，按逻辑功能分开。所以一个模块可能有身份验证，另一个有数据存储库，另一个是我正在使用的消息传递系统，*等等*。这允许你有不同的模块来模拟、缓存 Vs. 非缓存，或者只是同一服务的不同实现，并快速轻松地切换依赖块。

为了让事情变得更加灵活，你可以有一个配置文件来声明注入器启动时应该使用的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T00:35:46.943

当我在实例化我的对象后立即完成一些逻辑时，我通常在使用@Provides 注释的方法中执行它。您的示例可能如下所示：

```
public class MyModule extends AbstractModule {
   @Override
   protected void configure() {

    bind(FizzEventHandler.class).to(DefaultFizzEventHandler.class);
    bind(BuzzEventHandler.class).to(DefaultBuzzEventHandler.class);

   }

   @Provides
   public EventBus getEventBus(SimpleEventBuss simpleBus/* this here is going to be injected as it is a class not an interface and Guice is clever and it know how to do it ;) */
     , FizzEventHandler fizz, BuzzEventHandler buzz) {
    simpleBus.register(fizz);
    simpleBus.register(buzz);
    return simpleBus;
   }
  } 
```

# meteor - 如何在循环中插入文档？

> ID：14662443
> 
> 赞同：0
> 
> 时间：2013-02-02T13:39:06.603
> 
> 标签：meteor

我正在迭代一个时刻范围的日期范围并尝试插入文档。我收到以下错误：

```
Exception while simulating the effect of invoking '/carpool_events/insert' 
Error
 Error: Sorting not supported on Javascript code
    at Error (<anonymous>)
    at Object.LocalCollection._f._cmp     (http://localhost:3000/packages/minimongo/selector.js?    5b3e1c2b868ef8b73a51dbbe7d08529ed9fb9951:251:13)
    at Object.LocalCollection._f._cmp     (http://localhost:3000/packages/minimongo/selector.js?    5b3e1c2b868ef8b73a51dbbe7d08529ed9fb9951:226:36)
    at LocalCollection._f._cmp (http://localhost:3000/packages/minimongo/selector.js?5b3e1c2b868ef8b73a51dbbe7d08529ed9fb9951:218:33)
    at _func (eval at <anonymous> (http://localhost:3000/packages/minimongo/sort.js?08a501a50f0b2ebf1d24e2b7a7f8232b48af9057:63:8), <anonymous>:1:51)
    at Function.LocalCollection._insertInSortedList     (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:616:9)
    at Function.LocalCollection._insertInResults (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:534:31)
    at LocalCollection.insert (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:362:25)
    at m.(anonymous function) (http://localhost:3000/packages/mongo-livedata/collection.js?3ef9efcb8726ddf54f58384b2d8f226aaec8fd53:415:36)
    at http://localhost:3000/packages/livedata/livedata_connection.js?77dd74d90c37b6e24c9c66fe688e9ca2c2bce679:569:25 
```

这是我的插入循环。我已经通过写入console.log而不是插入来测试循环并且循环工作正常

```
 'click button.save-addEventDialogue': function(e, tmpl) {

          var start = Session.get("showAddEventDialogue_dateRangeStart");
          var end = Session.get("showAddEventDialogue_dateRangeEnd");
          var dateRange = moment().range(moment(start),moment(end));
          var dateLoopIncrement = moment().range(moment(start),moment(start).add('days',1));

          console.log(dateRange);
          console.log(dateLoopIncrement);

          // Loop through the date range
          dateRange.by(dateLoopIncrement, function(moment) {
            // Do something with `moment`
            var dateToSave = dateRange.start;  

        // Insert the record
            Carpool_Events.insert({
                       owner: Meteor.user().profile.name,
                       owner_id: Meteor.userId(),
                       original_owner: Meteor.user().profile.name,
                       original_owner_id: Meteor.userId(),
                       declined: 0,
                                  date: dateToSave.toDate()
                      });
            dateToSave.add('days',1);
         });            

         // Clear the Session
         Session.set("showAddEventDialogue_dateRangeStart","");
         Session.set("showAddEventDialogue_dateRangeEnd","");

         // Close the dialogue
         Session.set("showAddEventDialogue", false);
       } 
```

这样做的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:51:53.593

从客户端执行批量插入（循环插入）时，似乎会出现问题。我最终做的是使用 Meteor.methods 在服务器端执行插入。无论在客户端上执行此操作的问题是什么，这似乎都可以解决。

我还意识到我不需要使用矩范围来迭代日期。相反，我只是使用时刻来获得天数的差异并对其进行迭代。

客户端中的JS代码：

```
'click button.save-addEventDialogue': function (e, tmpl) {
  var start = moment(Session.get("showAddEventDialogue_dateRangeStart"));
  var end = moment(Session.get("showAddEventDialogue_dateRangeEnd"));
  var days = end.diff(start, 'days');
  var count = 0;
  var dateToSave = moment(start);

  // Loop through the date range
  for (count; count <= days; count++) {
    Meteor.call('bulkInsertCarpoolEvent', Meteor.user(), dateToSave.toDate());
    dateToSave.add('days', 1);
  };

  // Clear the Session
  Session.set("showAddEventDialogue_dateRangeStart", "");
  Session.set("showAddEventDialogue_dateRangeEnd", "");

  // Close the dialogue
  Session.set("showAddEventDialogue", false);

  } 
```

在服务器上：

```
Meteor.startup(function () {
  Meteor.methods({
    bulkInsertCarpoolEvent: function (user, date) {

      return Carpool_Events.insert({
        owner: user.profile.name,
        owner_id: this.userId,
        original_owner: user.profile.name,
        original_owner_id: this.userId,
        declined: 0,
        date: date
      });

    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:37:16.647

错误消息`Sorting not supported on Javascript code`是将 JavaScript 函数 (!) 插入集合的结果 - 例如，通过执行类似`Carpool_Events.insert({x: function () { ... }});`JavaScript 函数的操作通常不应进入集合。

在您的代码中的某个地方，您可能没有调用函数（例如，`Meteor.userId`在客户端上编写而不是在`Meteor.userId()`.这个。

我无法在您的代码中直观地找到问题——如果我错了，为了取得更大的进步，复制会很有帮助。

# actionscript-3 - 如何使用（调用）函数中的变量（AS3）？

> ID：14662444
> 
> 赞同：0
> 
> 时间：2013-02-02T13:39:20.230
> 
> 标签：actionscript-3, flash

我正在尝试对一个在地图中移动的角色（perso）进行编程，生成一个数组。我的变量“t”调用了我的“Tuiles”MovieClip，创建了一个网格（格栅），在我的“地图”数组上每个“1”都有新的瓷砖。我首先用一个瓦片子修复了碰撞函数，所以，我创建了“地图”和“网格”函数。我需要“t”变量来创建世界和角色碰撞。如果我将变量放在我的函数“creeDecor”上，Flash 会生成它，但说我的碰撞函数不存在变量“t”。如果我将“t”变量作为一般变量放在我的代码顶部，Flash 会在舞台右下角生成一个平铺，碰撞功能运行良好......

我怎么能把它们混合两次？可能吗 ？

我让你我的整个代码。如果您希望它工作，您只需创建一个 MovieClip 类名称“Tuiles”（正方形：32*32）和第二个 MC“Perso”。

```
//Creation of perso

var perso:Perso = new Perso();

var grille:MovieClip = new MovieClip();

var t:Tuiles = new Tuiles();

var T:int = 32;

var map:Array = [

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],

                 ]

// temporary stockage

var stock:Array = [

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

                 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]

                 ]

creeDecor()                                                                        

initHero();

stage.addEventListener(KeyboardEvent.KEY_DOWN, clavierDown);

stage.addEventListener(KeyboardEvent.KEY_UP, clavierUp);

stage.addEventListener(Event.ENTER_FRAME, animation);

// Stage collision

var minX = 0;

var minY = 0;

var maxX = stage.stageWidth - perso.width;

var maxY = stage.stageHeight - perso.height;

var speedHero = 5;

function clavierDown(e)

{

    switch(e.keyCode)

    {  

        case 37:

            perso.speedX = -speedHero;

            break;

        case 39:

            perso.speedX = speedHero;

            break;

        case 38:

            perso.speedY = -speedHero;

            break;

        case 40:

            perso.speedY = speedHero;

            break;

}

}

function clavierUp(e)

{

    switch(e.keyCode)

    {

        case 37:

            perso.speedX = 0;

            break; 

        case 39:

            perso.speedX = 0;

            break;

        case 38:

            perso.speedY = 0;

            break;

            case 40:

            perso.speedY = 0;

            break;

    }

}

function animation(e)

{

    animeHero();

}

   // Stage border collision function

function animeHero()

{       

       if(perso.x + perso.speedX >= minX && perso.x + perso.speedX <= maxX)

   {

       perso.x += perso.speedX;

   } else if (perso.speedX < 0)

   {

       perso.x -= Math.abs(perso.x-minX);

               //trace(Math.abs(perso.x-minX));

   } else {

       perso.x += Math.abs(perso.x-maxX) ;

   }

   if(perso.y + perso.speedY >= minY && perso.y + perso.speedY <= maxY)

   {

       perso.y += perso.speedY;

   }

  collision();

}

function initHero()

{

    perso.speedX = 0;

    perso.speedY = 0;

    perso.x = 200;

    perso.y = 300;

    addChild(perso);

}

function collision() {

    if (perso.hitTestObject(t))

    {

        if (perso.x >= t.x + t.width - speedHero && perso.x <= t.x +t.width + 2)

        {

            perso.x = t.x + t.width;

        }

        if (perso.x + perso.width >= t.x - 2 && perso.x + perso.width <= t.x + speedHero)

        {

            perso.x = t.x - perso.width;

        }

        if (perso.y >= t.y + t.height - speedHero && perso.y <= t.y +t.height + 2)

        {

            perso.y = t.y + t.height;

        }

        if (perso.y + perso.height >= t.y - 2 && perso.y + perso.height <= t.y + speedHero)

        {

            perso.y = t.y - perso.height;

        }

    }

}

// level creation

function creeDecor():void{

    for (var i:int=0; i<20; i++){                                // boucle sur les 20 colonnes

        for (var j:int=0; j<15; j++){                            // boucle sur les 15 lignes de chaque colonne

            var f:int = map[j][i] 

            if(f>0)  {     
                t.x= i*T;  

                t.y= j*T;  

                t.gotoAndStop(f)             

                grille.addChild(t)         

                // Specialisation

                if (f==1)

                stock[j][i] = t;

            }

            else

            {

                stock[j][i] = []                               

            }

        }

    }

}

addChild(grille) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:37:22.027

你想做很多不同`Tuiles`的事情，并检查每个人的碰撞。听起来您最初是在制作新`Tuiles`的`creeDecor()`，但除非您将新瓷砖存储在此之外，否则只`creeDecor()`知道它们。（这就是为什么 Flash`t`说不存在于`collision()`.）[这个关于函数范围的页面](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f54.html)可能会有所帮助，如果您还没有阅读该文档的其余部分，那么它可能会有所帮助。

因此，您可能会`Tuiles`在顶层准备所有您的列表，例如：

```
var tList:Vector.<Tuiles> = new Vector.<Tuiles>(); 
```

这意味着两者都`creeDecor()`可以`collision()`看到`tList`。然后就像你以前做的那样，每次你需要一个新`Tuiles`的，**并将它们添加到列表中**：`creeDecor()`

 **```
if(f>0)  {
    var newT:Tuiles = new Tuiles();
    tList.push(newT);
    // Set up newT's position etc... 
```

然后，您可以使用[“for each... in”为每个](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#for_each..in)`Tuiles`in运行命中测试`tList`

```
for each (var t:Tuiles in tList) {
    if (perso.hitTestObject(t))
        // Your collision code...
    }
} 
```

如果你只有简单的方块，那么进行碰撞检测的方法可能比使用`hitTestObject`多次更快，因此如果速度较慢，调整它可能是一个很好的下一步。**

# ruby-on-rails - 为什么我在前 2 个用户之后收到“此授权码已被使用”？

> ID：14662454
> 
> 赞同：1
> 
> 时间：2013-02-02T13:40:38.620
> 
> 标签：ruby-on-rails, facebook, omniauth

我正在使用 Omniauth-Facebook 来创建和验证用户。它适用于前两个用户，但不适用于第三个用户。我仍然可以进行身份​​验证；这是失败的 CREATE 过程。这似乎是一个没有解决方案的常见问题。

错误日志：

```
 facebook) Callback phase initiated.
(facebook) Authentication failure! invalid_credentials: OAuth2::Error, : 
{"error":{"message":"This authorization code has been used.","type":"OAuthException","code":100}} 
```

onmiauth.rb:

```
 Rails.application.config.middleware.use OmniAuth::Builder do
  provider :developer unless Rails.env.production?
  provider :facebook, 'xxxxxxx', 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx',
           :scope => 'email,user_birthday,user_hometown,user_location', :display => 'popup'
end 
```

会话控制器：

```
class SessionsController < ApplicationController
  def create
      auth = request.env["omniauth.auth"]
      player = Player.find_by_provider_and_uid(auth["provider"], auth["uid"]) || Player.create_with_omniauth(auth)
      session[:player_id] = player.id
      redirect_to bienvenue_index_path, :notice => "Signed in!"
  end

  def destroy
  session[:player_id] = nil
  redirect_to root_url, :notice => "Signed out!"
  end
end 
```

还有我的播放器模型：

```
class Player < ActiveRecord::Base

  attr_accessible :email, :gender, :habitation, :image, :nom, :nom_complet, :prenom, :provider, :token, :uid, :taille, :poids, :pied, :poste_prefere, :vehicule
  has_many :matches
  has_many :activities

  validates_presence_of :prenom
  validates_presence_of :nom

  def self.create_with_omniauth(auth)

    large = "http://graph.facebook.com/#{auth["uid"]}/picture?type=large"

      create! do |player|
        player.provider = auth["provider"]
        player.uid = auth["uid"]
        player.nom_complet = auth["info"]["name"]
        player.nom = auth["info"]["last_name"]
        player.prenom = auth["info"]["first_name"]
        player.image = auth["info"]["image"]
        player.image_large = large
        player.email = auth["info"]["email"]
        player.gender = auth["extra"]["raw_info"]["gender"]
        player.habitation = auth["extra"]["raw_info"]["location"]["name"]          
        player.token = auth["credentials"]["token"]

      end
    end 

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T14:12:33.090

对于其他偶然发现同样错误的人来说，我的错误是由另一个问题引起的。

我`skip_before_filter :authenticate`在`Users::OmniauthCallbacksController`

**为什么我认为这有效：**

最初，我在omniauth_facebook gem 中跟踪了这个[错误。](https://github.com/mkdynamic/omniauth-facebook/issues/73)

这突出了错误消息与快速连续发送两个 FB 回调请求这一事实有关的事实。不幸的是，我没有定义两次omniauth详细信息，所以最初无法确定它的来源。

然后我意识到在我的`ApplicationController`我有`before_filter :authenticate`。我认为发生的事情是 Facebook 回调请求遇到了这个身份验证障碍，然后立即请求新的身份验证。

告诉 Devise 跳过此操作为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:20:20.107

好的，我找到了解决方案。

在我的模型中`player.rb`，这条线：

```
player.habitation = auth["extra"]["raw_info"]["location"]["name"] 
```

为一名玩家返回 Nil。

评论这一行解决了这个问题。希望这可以帮助

# html5-audio - 如何使用 360player (soundmanager2) 播放声音？

> ID：14662458
> 
> 赞同：1
> 
> 时间：2013-02-02T13:40:51.083
> 
> 标签：html5-audio, soundmanager2

我已经设置了声音管理器：

```
soundManager.setup({ 
```

我创造了一个声音：

```
soundManager.createSound({ 
```

从控制台我也有threeSixtyPlayer：

```
threeSixtyPlayer.init()
threeSixtyPlayer.init(): Found 0 relevant items. 
```

那么如何让360player播放声音呢？以及如何检测到它已播放完毕，以便在那之后创建并播放下一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:51:16.103

文档缺少有关 360ui 的信息，但根据我的尝试：

需要的 HTML 代码：

```
<div id="sm2-container"></div>
<div class="ui360 ui360-vis">
    <a id="song_link" class="sm2_link" href="asfgasg.mp3"></a>
</div> 
```

JS：

```
soundManager.setup({
    url: 'inc/soundmanager/',
    flashVersion: 9,
    useFlashBlock: true,
    onready: function() {
        soundManager.createSound('someSongId_', selectedSong);
    },
    ontimeout: function() {
        // Error msg
    }
}); 
```

您还需要文件（取决于您想要的主题）：

*   flashblock.css
*   360player.css
*   360player-visualization.css
*   berniecode-animator.js
*   360-button-vis-play-light.png
*   360-button-vis-pause-light.png

之后应该有一个带有“播放”图像的 div。

要播放，您可以使用 soundManager.getSoundById('myId') 并将其与 onfinish 事件链接。文档中的示例：

```
soundManager.play('myId',{
    onfinish: function() {
    alert('The sound '+this.id+' finished playing.');
    }
}); 
```

希望能帮助到你...

# if-statement - 决策树 Python 2.7 例外

> ID：14662463
> 
> 赞同：0
> 
> 时间：2013-02-02T13:41:31.957
> 
> 标签：if-statement, python-2.7

我正在编写一个脚本来计算 1900 年至 2099 年的复活节日期。问题是，对于 4 年（1954、1981、2049 和 2076），公式略有不同（即，日期已关闭 7天）。

```
def main():
    print "Computes the date of Easter for years 1900-2099.\n"

    year = input("The year: ")

    if year >= 1900 and year <= 2099:
        if year != 2049 != 2076 !=1981 != 1954:
            a = year%19
            b = year%4 
            c = year%7
            d = (19*a+24)%30
            e = (2*b+4*c+6*d+5)%7
            date = 22 + d + e     # March 22 is the starting date
            if date <= 31:
                print "The date of Easter is March", date
            else:
                print "The date of Easter is April", date - 31
        else: 
            if date <= 31:
                print "The date of Easter is March", date - 7 
            else:
                print "The date of Easter is April", date - 31 - 7
    else:
        print "The year is out of range."   

main() 
```

Exerything 运行良好，但计算时间为 4 年。

我得到的是： `if date <= 31: UnboundLocalError: local variable 'date' referenced before assignment`每当我输入任何 4 年作为输入时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:43:30.347

你不能像这样链接表达式；使用运算符链接测试`and`或使用`not in`表达式代替：

```
# and operators
if year != 2049 and year != 2076 and year != 1981 and year != 1954:

# not in expression
if year not in (2049, 2076, 1981, 1954): 
```

该表达式的`year != 2049 != 2076 !=1981 != 1954`含义不同，它被解释为`(((year != 2049) != 2076) !=1981) != 1954`；第一个测试是`True`or `False`，这两个值都不会等于任何其他数字，并且该分支将*始终*评估为`False`。

不过，您仍然会得到`UnboundLocalError`for `date`，因为您的`else`分支引用`date`但它从未在该分支中设置。当`else`分支执行时，所有 Python 看到的是：

```
def main():
    print "Computes the date of Easter for years 1900-2099.\n"

    year = input("The year: ")

    if year >= 1900 and year <= 2099:
        if False:    
            # skipped
        else: 
            if date <= 31:
                print "The date of Easter is March", date - 7 
            else:
                print "The date of Easter is April", date - 31 - 7 
```

并且`date`在这种情况下永远不会被赋值。您仍然需要`date`在该分支中单独计算，*或者*将`date`值的计算完全移出`if`语句；我不熟悉复活节的计算，所以我不知道在这种情况下你需要做什么。

# delphi - 有没有更好的方法来委托枚举？

> ID：14662465
> 
> 赞同：2
> 
> 时间：2013-02-02T13:41:51.660
> 
> 标签：delphi, delphi-2010, enumeration

我有以下代码将枚举交给私有字段：

```
interface

type    

TMyClassEnumerator = class(TEnumerator<TMyClass>)
end;

TMyContainerClass = class(TObject)
private
  FItems: TObjectDictionary<string, TMyClass>;
public
  function GetEnumerator: TMyClassEnumerator;
end;

implementation

function TMyContainerClass.GetEnumerator: TMyClassEnumerator;
begin
  Result := TMyClassEnumerator(FItems.Values.GetEnumerator);
end; 
```

我这样做对吗？我为实现或创建自己的接口而奋斗`IENumerable<TMyClass>`，但是，我没有编译它......上面的代码确实适用于例如`for..in`，但我觉得我应该通过实现这样的接口使其成为一个适当的可枚举。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:57:06.620

您的方法是合理的，但我认为您不需要强制转换或确实声明一个枚举器类。我会这样做：

```
TMyContainerClass = class
private
  FItems: TObjectDictionary<string, TMyClass>;
public
  function GetEnumerator: TEnumerator<TMyClass>;
end;

function TMyContainerClass.GetEnumerator: TEnumerator<TMyClass>;
begin
  Result := FItems.Values.GetEnumerator;
end; 
```

# jekyll - 在 Octopress / Jekyll 中调试液体标签

> ID：14662466
> 
> 赞同：5
> 
> 时间：2013-02-02T13:42:04.780
> 
> 标签：jekyll, liquid, octopress

任何想法如何查看液体标签实际失败的位置？

更清楚地说，我在使用插件时遇到了一些问题，我在预览我的网站时看到的只是

```
Liquid Error: can’t convert Array into String 
```

在我的网站上。如何获取更多调试信息？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T08:36:30.133

尝试使用 --trace 运行 rake generate 以获取更多详细信息。

```
rake generate --trace 
```

通常，它会给出错误被提升的确切位置。然后简单地打印一些变量或使用[调试器](https://github.com/cldwalker/debugger)进行调试。

这个[博客](http://abop.github.io/blog/2013/05/15/debug-with-jekyll-rubygem/)可能会有所帮助。

# makefile - 仅当源被先前的命令修改时才重建

> ID：14662471
> 
> 赞同：2
> 
> 时间：2013-02-02T13:42:33.450
> 
> 标签：makefile, cmake, precompiled-headers

我有一个 python 脚本，它从 C++ 源文件中提取信息并将其写入头文件。每当生成的头文件发生变化（这种情况很少发生）时，我想重新编译它（通过 GCC 预编译头文件功能）。

显然，调用脚本的命令依赖于源文件，而重新编译命令依赖于脚本生成的头文件。

```
add_custom_command(OUTPUT "file.pch.h" COMMAND <script> DEPENDS "file.cpp")
add_custom_command(OUTPUT "file.pch.h.gch" COMMAND <compile> DEPENDS "file.pch.h") 
```

但现在`file.pch.h.gch`依赖于`file.cpp`并在它更改时重新编译。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:08:16.697

让您的脚本将标头写入临时文件，并且仅在`file.pch.h`更改时将其复制到现有文件中。然后（快速）脚本在每次`file.cpp`更改时运行，但预编译的标头只有在更改时才会重新预编译。

如果您不想修改脚本，可以使用单独的[`move-if-change`](http://gcc.gnu.org/svn/gcc/trunk/move-if-change)脚本，运行以下命令：

```
myscript < file.cpp > file.pch.h.tmp && move-if-change file.pch.h.tmp file.pch.h 
```

使用 Cmake 可能有更好的方法来执行此操作，但这是使用 Make 解决此问题的老式方法。

* * *

这是一个使用 CMake 的工作示例。

主程序，`foo.c`：

```
#include "foo.pch.h"

#ifndef FOO_PCH
#include <stdio.h>
#endif

int main() {
    printf("Hello, world\n");
    return 0;
} 
```

生成预编译头的程序，`make-pch`：

```
#!/bin/bash

(echo '#define FOO_PCH 1'
 awk '/^#endif/ { p = 0 }
      p { print $0 }
      /^#ifndef FOO_PCH/ { p = 1 }') < foo.c > foo.pch.h.tmp

if ! cmp -s foo.pch.h{.tmp,}; then
    echo 'Header changed, updating'
    mv foo.pch.h{.tmp,}
else
    echo 'Header not changed'
    rm -f foo.pch.h.tmp
fi 
```

并且`CMakeLists.txt`：

```
cmake_minimum_required(VERSION 2.8)
add_executable(foo foo.c foo.pch.h.gch)
add_custom_command(OUTPUT "foo.pch.h" COMMAND ./make-pch DEPENDS "foo.c")
add_custom_command(OUTPUT "foo.pch.h.gch"
                   COMMAND echo calling gcc
                   COMMAND gcc foo.pch.h
                   DEPENDS "foo.pch.h") 
```

让我们构建它：

```
$ cmake .
-- The C compiler identification is GNU 4.2.1
-- The CXX compiler identification is Clang 4.1.0
-- Checking whether C compiler has -isysroot
-- Checking whether C compiler has -isysroot - yes
-- Checking whether C compiler supports OSX deployment target flag
-- Checking whether C compiler supports OSX deployment target flag - yes
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/andrew/sx/14662471
$ make
[ 33%] Generating foo.pch.h
Header changed, updating
[ 66%] Generating foo.pch.h.gch
calling gcc
Scanning dependencies of target foo
[100%] Building C object CMakeFiles/foo.dir/foo.c.o
Linking C executable foo
[100%] Built target foo
$ ./foo
Hello, world
$ # it’s up-to-date, so calling make again does nothing
$ make
[100%] Built target foo
$ Let’s change the C file
$ sed -i -e 's/Hello, world/Hello there, world/' foo.c
$ make
[ 33%] Generating foo.pch.h
Header not changed
Scanning dependencies of target foo
[ 33%] Generating foo.pch.h
Header not changed
[ 66%] Building C object CMakeFiles/foo.dir/foo.c.o
Linking C executable foo
[100%] Built target foo
$ # note that the precompiled header was *not* recompiled
$ ./foo
Hello there, world
$ # now let’s add a header file
$ sed -i -e $'s/stdio.h>/stdio.h>\\\n#include <stdlib.h>/' foo.c
$ make
[ 33%] Generating foo.pch.h
Header changed, updating
[ 66%] Generating foo.pch.h.gch
calling gcc
Scanning dependencies of target foo
[100%] Building C object CMakeFiles/foo.dir/foo.c.o
Linking C executable foo
[100%] Built target foo
$ # the precompiled header file *was* recompiled 
```

# asp.net - 使用 System.Web.Mail 发送电子邮件

> ID：14662472
> 
> 赞同：3
> 
> 时间：2013-02-02T13:42:34.133
> 
> 标签：asp.net

我想用asp发送电子邮件。

我使用此代码

```
using System.Web.Mail;

MailMessage msg = new MailMessage();
msg.To = "aspnet@yahoo.com";
msg.From = "info@mysite.com";
msg.Subject = "Send mail sample";
msg.BodyFormat = MailFormat.Html;
string msgBody="Hello My Friend. This is a test.";
msg.Body = msgBody ;
SmtpMail.SmtpServer = "localhost";
SmtpMail.Send(msg); 
```

但我得到错误：

> 错误的命令顺序。服务器响应是：此邮件服务器在尝试发送到非本地电子邮件地址时需要身份验证。请检查您的邮件客户端设置或联系您的管理员以验证是否为此服务器定义了域或地址。

如何用asp发送邮件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:05:59.887

我使用此代码。

```
 MailMessage msg = new MailMessage();
 msg.Body = "Body";

 string smtpServer = "mail.DomainName";
 string userName = "info@mysite.com";
 string password = "MyPassword";
 int cdoBasic = 1;
 int cdoSendUsingPort = 2;
 if (userName.Length > 0)
  {
    msg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpserver", smtpServer);
    msg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpserverport", 25);
    msg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendusing", cdoSendUsingPort);
    msg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate", cdoBasic);
    msg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendusername", userName);
    msg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendpassword", password);
    }
    msg.To = user.Email;
    msg.From = "info@Mysite.com";
    msg.Subject = "Subject";
    msg.BodyEncoding = System.Text.Encoding.UTF8;
    SmtpMail.SmtpServer = smtpServer;
   SmtpMail.Send(msg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:53:29.920

您可能需要提供凭据。

例子：

```
smtpMail.Credentials = new NetworkCredential("username", "password") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:04:57.263

如果您尝试在不进行身份验证的情况下发送电子邮件，恐怕这是不可能的。如果您网站中的任何用户可以在没有密码的情况下发送电子邮件，那就太可怕了。它将允许用户从其他个人帐户发送电子邮件。所以考虑到安全性，发送邮件需要提供邮箱地址和密码

```
var fromAddress = "";      // Email Address here. This will be the sender.
string fromPassword = ""; // Password for above mentioned email address.
var toAddress = "";//   Receiver email address here
string subject = "Hi";
string body = "Body Text here";
var smtp = new System.Net.Mail.SmtpClient();
    {
        smtp.Host = "smtp.gmail.com"; // this is for gmail.
        smtp.Port = 587;
        smtp.EnableSsl = true;
        smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
        smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
        smtp.Timeout = 20000;
    }
smtp.Send(fromAddress, toAddress, subject, body); 
```

**[编辑]** 对不起我的错误我没有注意到。他们都用于相同的目的。如果您使用更高版本（2.0 或更高版本）的 .Net 框架，请使用 System.Net.Mail。如果您使用 System.Web.Mail，它只会显示一条警告，说明不推荐使用。但这会奏效。

这是 System.web.mail 的答案

```
 MailMessage mail = new MailMessage();
  mail.To.Add("to@domain.com");
  mail.From = new MailAddress("from@domain.com");
  mail.Subject = "Email using Gmail";
  mail.Body = "";

  mail.IsBodyHtml = true;
  SmtpClient smtp = new SmtpClient();
  smtp.Host = "smtp.gmail.com";
smtp.EnableSsl = true;
smtp.Credentials = new System.Net.NetworkCredential(mail.From,"YourPassword");
    smtp.Send(mail); 
```

# android - 一次显示按日期排序的所有图像和视频

> ID：14662473
> 
> 赞同：0
> 
> 时间：2013-02-02T13:42:42.533
> 
> 标签：android, image, video, android-sdcard

我想一次获取所有图像和视频，应该根据日期显示。**我已经分别获得了图像和视频，**但我同时想要两者

昨天我添加了两个图像（I1，I2）和一个视频（V1）文件

今天我添加了另一个图像（I3）和视频（V2）文件

然后我想按以下顺序显示所有 5 个 SD 卡数据

L1

L2

V1

L3

V3

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:55:29.990

此方法 >`file.lastModified()`为您提供文件的时间戳，然后您可以在列表中相应地对文件进行排序。

# ruby-on-rails - ActiveSupport::JSON.backend = "JSONGem"

> ID：14662474
> 
> 赞同：1
> 
> 时间：2013-02-02T13:42:45.717
> 
> 标签：ruby-on-rails, ruby

我需要将此代码添加到我的 Rails 应用程序的应用程序初始化程序中。但是我正在阅读/研究的一些内容建议我将此调用放在我的 environment.rb 文件中，而其他信息则建议我将其放在我的 application.rb 文件中。

哪一个是正确的位置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:51:22.317

老实说，没关系。有些人会创建一个`config`文件，其他人只会将它包含在代码中。拥有一个配置文件确实可以更轻松地跟踪所有内容，并将它们保存在同一个地方。但就性能而言，这并不重要。

# c# - 应用程序池 dll 和 GAC

> ID：14662476
> 
> 赞同：0
> 
> 时间：2013-02-02T13:42:54.507
> 
> 标签：c#, asp.net, iis-7, gac, application-pool

我们有大约 80 个应用程序将在同一台服务器上。所有使用相同自定义构建应用程序、aspnet webform、c# 的非常小的站点是否已编译。每个应用程序在其自己的 bin 目录中都有一个应用程序 dll 的副本，以及一些开源第三方库（bin 文件夹在磁盘上大约 15mb） 该应用程序由我完成，因此我可以重建签名并放入 GAC，以便所有站点从那里得到。我的问题是：“就内存消耗而言，gac 中只有一个 dll 副本而不是 80 个副本会更好吗？” “这是否可以提高整体性能和内存使用量，除了我可以删除 15*80Mb 磁盘空间使用量之外？” 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:53:12.313

DLL内存消耗将是相同的。在 GAC 中注册 Dll 的一个可靠优势是它可以被系统上运行的任何 dot net 应用程序找到。第二种是将dll放入GAC时，通过使用ngen.exe，您可以生成DLL的本机映像，这是一个完全机器级别的编译版本，与即时编译一样，从而提高执行速度。可能还有其他优点，但这是我现在能想到的。

# android - 管理 ListView 中的按钮以显示/隐藏部分

> ID：14662477
> 
> 赞同：0
> 
> 时间：2013-02-02T13:43:08.757
> 
> 标签：android, android-layout, android-listview, android-button

我有一个`ListView`with`Button`的。我想隐藏当我单击`Button`第二个项目时可见的项目。

![在此处输入图像描述](../Images/96bcf72fd7423a78f7de1e917cf19007.png)

如果我单击按钮“1”，我想隐藏蓝色的“布局”。如果单击是同一个项目，我可以管理布局，但是当我单击另一个项目的按钮时，布局仍然可见。如何设置这些项目的可见性？

这是可能的代码。我的列表适配器

```
public View getView(int position, View convertView, ViewGroup parent) {
    final String item = items.get(position);
    View v = null;
    if (convertView != null)
        v = convertView;
    else
        v = inflater.inflate(R.layout.item, parent, false);
    TextView itemTV = (TextView) v.findViewById(R.id.item);
    itemTV.setText(item);
final ImageView number1 = (ImageView) v.findViewById(R.id.number1);

    final ImageView number2 = (ImageView) v.findViewById(R.id.number2);

    final ImageView button1 = (ImageView) v.findViewById(R.id.button1);

    final ImageView button2 = (ImageView) v.findViewById(R.id.button2);

    final RelativeLayout blue = (RelativeLayout) v.findViewById(R.id.blue);
    final RelativeLayout green = (RelativeLayout) v
            .findViewById(R.id.green);
    blue.setVisibility(RelativeLayout.GONE);
    green.setVisibility(RelativeLayout.GONE);

    button1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            if (on == 0) //show hide ---int on=0;
            {

                blue.setVisibility(RelativeLayout.VISIBLE);
                green.setVisibility(RelativeLayout.GONE);
                on = 1;

                Toast.makeText(context, "ImageButton clicked" + item,
                        Toast.LENGTH_SHORT).show();
                number1.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        Toast.makeText(context,
                                "CLICK" + item,
                                Toast.LENGTH_SHORT).show();

                    }
                });

                number2.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        Toast.makeText(context,
                                "ClICK" + item,
                                Toast.LENGTH_SHORT).show();

                    }
                });

            }// on equals 0
            else {
                on = 0;
                blue.setVisibility(RelativeLayout.GONE);
                green.setVisibility(RelativeLayout.GONE);
            }

        }
    });
    button2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            blue.setVisibility(RelativeLayout.GONE);
            green.setVisibility(RelativeLayout.VISIBLE);
            Toast.makeText(context, "CLICK" + item,
                    Toast.LENGTH_SHORT).show();
            number2.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    Toast.makeText(context, "CLICK" + item,
                            Toast.LENGTH_SHORT).show();

                }
            });

        }
    });

    return v;
} 
```

我的活动

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    ListView lv = (ListView) findViewById( R.id.list );

    lv.setOnItemClickListener(
            new OnItemClickListener() {
                public void onItemClick(AdapterView<?> arg0,
                        android.view.View arg1, int arg2, long arg3) {

                    Toast.makeText( ListImageButton.this,
                            "List item clicked",
                            Toast.LENGTH_SHORT).show();
                }
        });
    ArrayList<String> items = new ArrayList<String>();
    items.add( "item1");
    items.add( "item2");
    items.add( "item3");
    ListAdapter adapter = new ListAdapter( this, items);
    lv.setAdapter( adapter );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:52:54.780

我假设您想根据从一行中单击的数字按钮在*单行上显示蓝色或绿色部分。*尝试这样的事情：

```
// two fields in the adapter class
private int mBlueFlag = -1;
private int mGreenFlag = -1;

public View getView(int position, View convertView, ViewGroup parent) {
    final String item = items.get(position);
    View v = null;
    if (convertView != null) {
        v = convertView;
    } else {
        v = inflater.inflate(R.layout.item, parent, false);
    } 
    TextView itemTV = (TextView) v.findViewById(R.id.item);
    itemTV.setText(item);
    final ImageView number1 = (ImageView) v.findViewById(R.id.number1);
    final ImageView number2 = (ImageView) v.findViewById(R.id.number2);
    // I assume this are the buttons with 1 and 2 which show the green/blue row part
    final ImageView button1 = (ImageView) v.findViewById(R.id.button1);
    final ImageView button2 = (ImageView) v.findViewById(R.id.button2);
    final RelativeLayout blue = (RelativeLayout) v.findViewById(R.id.blue);
    final RelativeLayout green = (RelativeLayout) v.findViewById(R.id.green);
    if (mBlueFlag != -1 && mBlueFlag == position) {
    blue.setVisibility(View.VISIBLE);
    } else {
    blue.setVisibility(View.GONE);
    }
    if (mGreenFlag != -1 && mGreenFlag == position) {
    green.setVisibility(View.VISIBLE);
    } else {
        green.setVisibility(View.GONE);
    }

    button1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {          
             mGreenFlag = position;
             mBlueFlag = -1;
         // set the other OnCLickListener
         notifyDataSetChanged();
        }
    });
    button2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
             mBlueFlag = position;
         // set the other OnClickListeners
         notifyDataSetChanged();
        }
    });
    return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:37:38.053

您需要更改基于此列表的信息，并调用 notifityDataSetChanged()，它将重新创建列表。

# django - 如何在 django sweetpie 中使用后向关系

> ID：14662478
> 
> 赞同：1
> 
> 时间：2013-02-02T13:43:12.377
> 
> 标签：django, reverse, tastypie

这是我的模型

```
class Nisit(models.Model): 
```

和这个

```
class Page(models.Model):
followingNisit = models.ManyToManyField(Nisit,blank=True) 
```

这是我的资源

```
class NisitResource(ModelResource):
    page = fields.ToManyField('chula.api.PageResource','page_set',null=True)
class Meta:
    queryset = Nisit.objects.all()      
    resource_name = 'nisit'
    filtering = {
        'page' : ALL_WITH_RELATIONS,
        'id' : ALL,
    }

class PageResource(ModelResource):
    followingNisit = fields.ToManyField(NisitResource, 'followingNisit',null=True)
    reporter = fields.ManyToManyField(ReporterResource,'reporter')
    followers_count = fields.CharField(attribute='followers_count')

class Meta:
    queryset = Page.objects.all()
    resource_name = 'page'
    authorization= Authorization()
    filtering = {
        'id':ALL,
        'followingNisit': ALL_WITH_RELATIONS,
    } 
```

当我请求时没问题 -------127.0.0.1:8000/api/v2/page/?format=json&followingNisit__id=1

但相反，当我请求 ---------127.0.0.1:8000/api/v2/nisit/?format=json&page__id=1 时，我会收到此错误

```
{"error_message": "Cannot resolve keyword 'page_set' into field. Choices are: displayName, facebook, faculty, friend, id, major, n_id, name, page, password, picture, reporter, year_in_school", "traceback": "Traceback (most recent call last):\n\n  File \"D:\\Study\\SeniorProject\\Code\\mysite\\tastypie\\resources.py\", line 202, in wrapper\n    response = callback(request, *args, **kwargs)\n\n  File \"D:\\Study\\SeniorProject\\Code\\mysite\\tastypie\\resources.py\", line 441, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n\n  File \"D:\\Study\\SeniorProject\\Code\\mysite\\tastypie\\resources.py\", line 474, in dispatch\n    response = method(request, **kwargs)\n\n  File \"D:\\Study\\SeniorProject\\Code\\mysite\\tastypie\\resources.py\", line 1127, in get_list\n    objects = self.obj_get_list(request=request, **self.remove_api_resource_names(kwargs))\n\n  File \"D:\\Study\\SeniorProject\\Code\\mysite\\tastypie\\resources.py\", line 1890, in obj_get_list\n    base_object_list = self.apply_filters(request, applicable_filters)\n\n  File \"D:\\Study\\SeniorProject\\Code\\mysite\\tastypie\\resources.py\", line 1862, in apply_filters\n    return self.get_object_list(request).filter(**applicable_filters)\n\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\query.py\", line 624, in filter\n    return self._filter_or_exclude(False, *args, **kwargs)\n\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\query.py\", line 642, in _filter_or_exclude\n    clone.query.add_q(Q(*args, **kwargs))\n\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\query.py\", line 1250, in add_q\n    can_reuse=used_aliases, force_having=force_having)\n\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\query.py\", line 1122, in add_filter\n    process_extras=process_extras)\n\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\query.py\", line 1316, in setup_joins\n    \"Choices are: %s\" % (name, \", \".join(names)))\n\nFieldError: Cannot resolve keyword 'page_set' into field. Choices are: displayName, facebook, faculty, friend, id, major, n_id, name, page, password, picture, reporter, year_in_school\n"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:19:25.170

我也一直在努力解决 setup_joins 引发的相同 FieldError，我想我刚刚解决了我的问题。我试图通过多对多关系进行过滤，但永远无法让“_set”`fields.ToManyField()`正常工作。在错误情况下调试 TastyPie 代码并在一个有效的简单过滤器中之后，我意识到可以完全绕过对中间资源的需求。

这是对我有用的方法，希望对您的情况有所帮助。由于我不知道您的模型设置，因此我将制作一个类似的示例。

一、机型：

```
### models.py ###
from django.db import models

class Ingredient(models.Model):
    name = models.CharField(max_length=100)
    description = models.TextField()

    def __unicode__(self):
        return '%s' % (self.name)

class RecipeIngredient(models.Model):
    recipe = models.ForeignKey('Recipe')
    ingredient = models.ForeignKey('Ingredient')
    weight = models.IntegerField(null = True, blank = True)

    def __unicode__(self):
        return '%s: %s' % (self.recipe, self.ingredient)

class Recipe(models.Model):
    title = models.CharField(max_length=100)
    ingredients = models.ManyToManyField(Ingredient, through='RecipeIngredient')

    def __unicode__(self):
        return '%s' % (self.title) 
```

这里是模型资源：

```
### api.py ###
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS
from tastypie import fields
from some_app.models import Ingredient, Recipe

class IngredientResource(ModelResource):

    class Meta:
        queryset = Ingredient.objects.all()
        resource_name = 'ingredient'
        filtering = {
            'name': ALL,
        }

class RecipeResource(ModelResource):
    ingredients = fields.ToManyField(
        'some_app.api.IngredientResource',
        'ingredients',
        full=True)

    class Meta:
        queryset = Recipe.objects.all()
        resource_name = 'recipe'
        filtering = {
            'title': ALL,
            'ingredients': ALL_WITH_RELATIONS,
        } 
```

注意我没有RecipeIngredientResource，我直接连接到IngredientResource，因为Recipe模型包含ManyToManyField`ingredients`和选项`through='RecipeIngredient'`

过滤特定成分的所有食谱的示例 URL 如下所示：

`http://localhost:8000/api/recipes/recipe/?ingredients__name=blueberry`

而且，为了完整起见，这里有一个名为“some_app”的 Django 应用程序的固定装置，以节省任何想要实现此示例的人输入数据的时间：

```
[
    {
        "pk": 1, 
        "model": "some_app.ingredient", 
        "fields": {
            "name": "apple", 
            "description": "a tempting fruit"
        }
    }, 
    {
        "pk": 2, 
        "model": "some_app.ingredient", 
        "fields": {
            "name": "cherry", 
            "description": "a red fruit"
        }
    }, 
    {
        "pk": 3, 
        "model": "some_app.ingredient", 
        "fields": {
            "name": "blueberry", 
            "description": "a blue fruit"
        }
    }, 
    {
        "pk": 4, 
        "model": "some_app.ingredient", 
        "fields": {
            "name": "flour", 
            "description": "used for baking and stuff"
        }
    }, 
    {
        "pk": 5, 
        "model": "some_app.ingredient", 
        "fields": {
            "name": "sugar", 
            "description": "makes stuff sweet"
        }
    }, 
    {
        "pk": 1, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 1, 
            "weight": 3, 
            "ingredient": 1
        }
    }, 
    {
        "pk": 2, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 1, 
            "weight": 2, 
            "ingredient": 4
        }
    }, 
    {
        "pk": 3, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 1, 
            "weight": 4, 
            "ingredient": 5
        }
    }, 
    {
        "pk": 4, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 2, 
            "weight": 8, 
            "ingredient": 2
        }
    }, 
    {
        "pk": 5, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 2, 
            "weight": 4, 
            "ingredient": 4
        }
    }, 
    {
        "pk": 6, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 2, 
            "weight": 6, 
            "ingredient": 5
        }
    }, 
    {
        "pk": 7, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 3, 
            "weight": 15, 
            "ingredient": 3
        }
    }, 
    {
        "pk": 8, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 3, 
            "weight": 5, 
            "ingredient": 4
        }
    }, 
    {
        "pk": 9, 
        "model": "some_app.recipeingredient", 
        "fields": {
            "recipe": 3, 
            "weight": 6, 
            "ingredient": 5
        }
    }, 
    {
        "pk": 1, 
        "model": "some_app.recipe", 
        "fields": {
            "title": "Apple Pie"
        }
    }, 
    {
        "pk": 2, 
        "model": "some_app.recipe", 
        "fields": {
            "title": "Cherry Pie"
        }
    }, 
    {
        "pk": 3, 
        "model": "some_app.recipe", 
        "fields": {
            "title": "Blueberry Pie"
        }
    }
] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T16:24:20.223

事情就是这样，如果`django tastypie`与 django 非常相似（正如任何人所期望的那样），您正在使用一个错误的关键字，在您的情况下，它不会是`page_set`，`page`而是使用它，它会起作用。

我建议您在字段名称中使用复数

```
pages = fields.ToManyField('chula.api.PageResource','page_set',null=True) 
```

所以前向关系是`pages`，后向关系是`page_set`我现在不记得是哪个了。但无论如何它会更好看。

# c++ - 如何将数据传递给 glutTimerFunc？

> ID：14662482
> 
> 赞同：0
> 
> 时间：2013-02-02T13:43:32.377
> 
> 标签：c++, opengl, glut

```
#include <gl/freeglut.h>

void Keyboard(int value){

    glutTimerFunc(33,Keyboard,0);
}

int main(int argc, char **argv){
   glutTimerFunc(33,Keyboard);
} 
```

有什么方法可以将数据从主函数传递到键盘函数而不必使用全局变量？似乎 glutTimerFunc 函数只允许具有签名（int 值）的函数，这似乎非常严格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:23:25.870

> 那么有没有另一种方法可以将数据放入另一个函数而不让它们是全局的？

就像其他人已经建议的那样：不要使用 GLUT。GLUT 从来都不是严肃应用的基础。这是一个用于小型 OpenGL 技术演示的小型框架。您遇到的问题是 C 和 C++ 缺少一个称为“闭包”的概念，有时也称为“委托”。其他语言有它们，事实上，当您在这些语言中使用 GLUT 绑定时，您不会遇到问题。

由于 C/C++ 缺乏闭包是如此突出，因此编写了一个小库（内部做疯狂但天才的事情），允许它在 C 中创建闭包。它被称为*ffcall*，不幸的是似乎没有维护，但正在使用中通过项目作为 GNU Common Lisp 和 Scheme 编译器。

我已经在 StackOverflow 的答案[https://stackoverflow.com/a/8375672/524368](https://stackoverflow.com/a/8375672/524368)和[https://stackoverflow.com/a/10207698/524368中写过关于使用 ffcall 的文章](https://stackoverflow.com/a/10207698/524368)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:08:23.033

您可以使用一个技巧：将指向对象的指针作为值传递，然后将其转换为 int：

```
i instance;
keyboard((int)&i); 
```

如果您需要使用计时器调用函数，请考虑这样一个事实，即当函数结束时，堆栈中的所有对象都被释放。因此，在这种情况下，您应该使用 new 分配对象，并且在需要解除分配的情况下始终拥有它的句柄。

这很棘手，我知道。如果您可以切换到另一个库，请执行此操作。

# ajax - 处理 AJAX 文件上传/防止孤立文件的常用方法是什么？

> ID：14662486
> 
> 赞同：2
> 
> 时间：2013-02-02T13:43:48.023
> 
> 标签：ajax, file-upload

我计划使用[FineUploader.js](http://fineuploader.com/index.html)让我的用户能够拖放图像、一次选择多个图像等……也许更重要的是，在他们完成表单的其余部分时上传图像。

我将为此项目使用 ASP.NET MVC/.NET 4.5/C# 平台。

如果用户不填写表格怎么办？如果他们真的点击了取消按钮，我可能会触发一个命令来删除已经上传的图像。如果他们只是关闭浏览器呢？

如何防止文件被上传但未被使用？

# ios - 如何使用属性管理内存

> ID：14662487
> 
> 赞同：0
> 
> 时间：2013-02-02T13:43:50.117
> 
> 标签：ios, memory-management, memory-leaks

我的.h 文件

```
@interface myObject : NSObject {
    NSMutableDictionary *myDictn ;
} 
```

我有财产

```
@property (nonatomic,retain) NSMutableDictionary *myDictn ; 
```

然后在 .m 文件中

我从 id 分配了它

```
- (id)init {
    if (self=[super init]) {
        myDictn= [NSMutableDictionary  alloc]init];
    }
} 
```

我的问题是我在 Property 中提到了 Retain 并且我也分配了内存（**Retain Count 在 (id)init 中变为 2**）
那么在这种情况下如何管理内存？
我对此很陌生，所以对内存管理有很多想法。

还有一件事，如果`method x`我的代码中有 a 并且我也分配了内存，`myDictn`那么在这种情况下，我该如何使用 release .?? 提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:52:09.563

初始化保留属性的正确方法是：

```
NSMutableDictionary *newDict = [[NSMutableDictionary alloc] init];
self.myDictn = newDict;
[newDict release]; 
```

或者：

```
self.myDict = [NSMutableDictionary dictionary]; 
```

第一种方法通过对临时对象执行 alloc,init（增加保留计数的操作）来确保不增加已保留属性的保留计数。

第二种方法使用一种方便的方法来获取字典的自动释放实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:58:42.250

您应该首先参考[*Cocoa Fundamentals Guide*](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW39)。然后，如果您的目标是 iOS > 4.3，则可以依靠[自动引用计数](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)来进行内存管理。但请务必了解基本概念并阅读基本指南，否则您将在黑暗中浪费大量时间进行编程。

# java - 如何从 Java 中的动画 gif 中删除闪烁？

> ID：14662492
> 
> 赞同：1
> 
> 时间：2013-02-02T13:44:26.720
> 
> 标签：java, swing, gif

我一直在尝试使用`BufferStrategy`a in a `Canvas`in a来实现游戏`JFrame`，但我似乎无法让我的动画`.gif`图像（实现为`new ImageIcon().getImage()`）在不闪烁的情况下播放。

我认为问题在于`.gif`刷新率和画布重绘的速度，但这只是一个猜测。我已经尝试了几个小时的各种事情，并在互联网上搜索了一些解决方案，但还没有一个解决方案。任何帮助将不胜感激。

另一方面，`.gif`工作正常。它不会在像 XnView 这样的图像查看程序中闪烁，并且`JLabel`在一个超级简单的`JFrame`程序中也可以正常播放。

# php - 如何在 Joomla 2.5 中从 K2 中的 URL 中删除主要类别

> ID：14662497
> 
> 赞同：2
> 
> 时间：2013-02-02T13:44:45.327
> 
> 标签：php, joomla, joomla-extensions, joomla-k2

我有什么：Joomla 2.58，K2，sh404sef

问题：我想将 K2 主类别放在我的主页上，所以它显示了一些子类别文件夹......但我不希望在 URL 中看到主类别。但应该看到所有其他类别。怎么做？！

*   例如，现在，在 sh404sef 之后，我得到了 url： [http ://mypage.com/all-categories/clothes/](http://mypage.com/all-categories/clothes/)

*   但我希望它是： http: [//mypage.com/clothes/](http://mypage.com/clothes/) //因为 Main-Category 什么都没有，只有 Sub 的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:53:02.157

您是否可以选择菜单项的所有子类别而不是父项？

或者

[从 url htaccess apache 中删除目录](https://stackoverflow.com/questions/9516852/remove-directory-from-url-htaccess-apache)

在 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^((?!all-categories/).*)$ bar/$1 [NC,L] 
```

# angularjs - AngularJS：构建 HTML 小部件时将哪些逻辑放在哪里

> ID：14662501
> 
> 赞同：1
> 
> 时间：2013-02-02T13:45:22.723
> 
> 标签：angularjs

我对 Angular.js 非常（！）新手，并试图了解将我的逻辑的各个部分放在哪里，以便遵循最佳实践并分离业务和表示逻辑。

我的具体用例是我有一个包含许多注册和可用席位的课程列表。基于这些值，我想呈现一个进度条（或者，如果未设置可用座位，则只是一个文本）。

我的问题是将逻辑的各个部分放在哪里，以及如何正确传递值。到目前为止，我已经创建了指令的 HTML 部分，如下所示：

```
<signupprogress available="{{course.available_seats}}" filled="{{course.filled_seats}}"></signupprogress> 
```

我的问题是（首先也是最重要的）一个指令是否是执行此操作的正确方法，以及因此，构建进度条的逻辑是否应该进入编译函数、链接函数、模板或其他地方. 对我来说，链接函数的编译似乎是最正确的，但我不想用 HTML 填充它们，我也无法从 HTML 中正确获取属性值（我只见过 attrs.$observe 示例实现一个属性的获取）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:49:38.100

在我看来，该指令是要走的路。我会将我的 HTML 内容包含在模板中，将逻辑包含在链接函数中（编译函数通常更多地用于转发器等）。并在指令定义中使用“范围”属性，设置为“=”，这样更改会自动反映。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:52:00.957

是的，使用指令，因为您需要修改 DOM。

如果进度条的所有 HTML 和替代文本都可以放在指令的模板中，那么就这样做。并且，如果可能的话，使用 '@' 进行单向绑定，这清楚地表明该指令不需要修改“可用”和“填充”值。如果您发现需要链接功能，那么正如@ShaiRez 提到的，'=' 可能更容易。（顺便说一句，这是一种[$watch 多个属性](https://stackoverflow.com/a/12976630/215945)的方法，而不是使用 $observe。也许可以对 $observe 使用相同的技术。）

要在模板中显示进度条或替代文本，请在模板中使用 ng-hide 或 ng-show。这是一个[简单的例子](https://stackoverflow.com/a/14364799/215945)（也使用'@'）。

# php - 如何检测二维多边形组中的内部顶点？（例如确定地区的邮政编码）

> ID：14662502
> 
> 赞同：2
> 
> 时间：2013-02-02T13:45:41.063
> 
> 标签：php, google-maps, computational-geometry, edge-detection

我正在寻找一种方法，最好是在 PHP 中，分析一组多边形以检测该组的外部边界。

具体来说，这是用于呈现区域的 Google Maps v3 应用程序。领土中的每个多边形都是一个邮政编码。我正在尝试仅检测和绘制领土边界。这是我要完成的工作的模型：

![复杂区域边缘检测前后图像](../Images/1aa53c07714077098b8ae581924231e9.png)

我在解决这个问题时面临的挑战：

1.  每个区域内的邮政编码可以（并且通常是）不连续的（参见上例中的红色和绿色区域）。
2.  邮政编码不一定是凸的，因此凸包技术不起作用（也许我错了？）
3.  尽管它在上图中看起来像，但顶点很少从一个 ZIP 到另一个 ZIP 真正冗余。每个纬度/经度坐标（即多边形的每个顶点）都有 10 个小数点的精度。我已经尝试并拒绝了一种舍入技术，因为它从来没有产生一个仍然类似于原始形状的干净数据集。

从积极的方面来说，这些领土一旦建立就永远不会改变。因此，此过程可以离线运行以计算和存储生成的区域多边形集。

**澄清：** 我的数据存储在邮政编码级别。每个邮政编码由一组或多组大型纬度/经度坐标定义。每个纬度/经度坐标定义了 Google 地图多边形中的一个顶点。与更大的地区一样，每个邮政编码可能是凸面的，也可能不是凸面的，它可能是也可能不是一个连续的多边形。较大的区域仅存储为邮政编码列表；没有为地区存储多边形数据——这是我在这里试图解决的问题。

非常感谢您提供正确方向的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:43:35.940

听起来您有一个与哪些地区相关的邮政编码列表。每个邮政编码都有一个多边形。

如果是这种情况，那么解决方案相当简单。关键的观察/假设是边界邮政编码应该共享需要删除的边缘。如果不是这种情况，那么以下是一个有争议的问题。

对于每个地区：

创建一个以排序边缘为键的字典，它的项目是具有该边缘的多边形列表。然后遍历领土中的多边形并填写字典。这可能很棘手，因为您需要确保*Edge(A,B) 与 Edge(B,A) 相同*，这可以通过对边缘中的点进行排序来完成。

一旦你浏览了所有的多边形，你最终会得到一个边表，以及它们与哪个多边形相关联。将此表转换为图形，忽略两个或多个多边形中的所有边，尽管“或更多”可能是不可能的。结果应该是一个*无向*循环图，您应该能够使用类似于深度优先搜索的算法从图中提取领土多边形。

性能应该是 O(N)，其中 N 是边/顶点的总数。

# mysql - 删除 MySQL 子查询

> ID：14662503
> 
> 赞同：0
> 
> 时间：2013-02-02T13:45:41.730
> 
> 标签：mysql, sql, sql-delete

我有一个生成结果的查询：

```
SELECT urenID FROM uren WHERE uren.urenDossierID IN (SELECT dossierID FROM dossier WHERE dossierKlantID NOT IN (SELECT klantID from klant)) 
```

现在我想删除生成该查询的所有记录。现在是我的问题；怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:47:08.090

只需替换`SELECT urenID`为`DELETE`

```
DELETE FROM uren WHERE uren.urenDossierID IN (SELECT dossierID FROM dossier WHERE dossierKlantID NOT IN (SELECT klantID from klant)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:47:06.967

试试这个。

```
DELETE FROM uren WHERE urenID in (
   SELECT urenID FROM uren WHERE uren.urenDossierID IN (SELECT dossierID FROM dossier WHERE dossierKlantID NOT IN (SELECT klantID from klant))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T13:53:59.240

我坚信`JOIN`比`IN`

```
DELETE  a
FROM    uren a
        LEFT JOIN dossier b
            ON a.urenDossierID = b.dossierID
        LEFT JOIN klant c
            ON b.dossierKlantID = c.klantID
WHERE   b.dossierID IS NOT NULL AND
        c.klantID IS NULL 
```

# ios - 发送测试员 iOS 应用程序

> ID：14662509
> 
> 赞同：1
> 
> 时间：2013-02-02T13:46:10.923
> 
> 标签：ios, xcode

我正在为居住在不同州的人编写一个 iOS 应用程序。上次我完成更新让他测试时，他不得不开车过来把它放在他的 iPad 上。

他都设置了配置文件等。上次我只是在 xcode 中点击“运行”，它就在他的 iPad 上运行。

有没有办法将应用程序作为电子邮件中的链接发送给他？该应用程序非常小（大约 20mb）。他没有 mac，所以他无法打开 xcode 文件，但他有 iTunes。

我可以通过互联网向他发送应用程序进行测试的其他（最好是免费）方式吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:58:50.743

如果您的目标是 iOS 8+，您实际上可以直接在 iTunes Conenct 中设置 Beta 和 Sandbox 测试人员，无需任何设备 UUID，只需电子邮件地址。这使得设置和管理同步，而无需关心某人拥有哪些设备。

只需转到 iTunes Connect > 用户和角色。在那里你可以添加人。然后进入您的实际应用程序，您可以分配人员参与测试。然后，您只需通过 Xcode 上传您的应用程序（就像发布版本一样），最后，批准该构建以进行预发布，这将允许您的所有测试人员安装它。

### 原帖：

我们使用 Ad Hoc 分发来处理这个问题。我们花了一段时间才让这一切正常工作，但一旦我们做到了，它就对我们所有的 beta 测试人员都产生了惊人的效果。在推送更新之前，我们会将应用程序的新更新发送给少数人进行测试。

这是一个可能会有所帮助的[教程。](http://agilewarrior.wordpress.com/2012/04/02/how-to-distribute-ad-hoc-build-with-xcode-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:54:16.793

您可以为他的设备使用 Ad Hoc 配置文件，并为 Ad Hoc 归档您的项目。

# php - 在回调函数中使用全局变量的替代方法是什么？

> ID：14662511
> 
> 赞同：1
> 
> 时间：2013-02-02T13:46:25.683
> 
> 标签：php, callback, global-variables

我已经使用 PHP 很长时间了，但直到最近才真正使用回调。在下面的代码中，回调（示例是 QueryPath，如果您想知道，但它可以是任何接受回调的东西）将添加一些指向数组的链接：

```
// parse any product links out of the html
$aProducts = array();
qp( $html, 'a' )->each(function($index, $element){
    global $aProducts;

    $link = qp($element)->attr('href');

    $pregMatch = preg_match('@(.*)-p-(.*)\.html@i', $link, $matches);

   if( $pregMatch ) {
        $product_id = (int)$matches[2];

                if( !in_array($product_id, $aProducts) ) {
            $aProducts[] = $product_id;
        }
    }

});

    // print out our product array
    print_r( $aProducts ); 
```

使用的替代方法是什么`global $aProducts`（如果有的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:49:30.990

使用`use`：

```
qp( $html, 'a' )->each(function($index, $element) use(&$aProducts) { 
```

注意`&`. 这是必需的，否则您将使用数组的副本。您也可以*使用*乘法值，只需将它们用 . 分隔即可`,`。例如：`use(&$aProducts, $someObj, &$someInt)`

PHP.net：http://www.php.net/manual/en/language.namespaces.importing.php [_](http://www.php.net/manual/en/language.namespaces.importing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:51:06.300

我建议您不要使用全局变量，而是将您的代码放在一个类上并使用 $this 而不是全局变量。它必须工作

# java - Java tan 函数未按预期工作

> ID：14662512
> 
> 赞同：0
> 
> 时间：2013-02-02T13:46:26.180
> 
> 标签：java, math, trigonometry

> **可能重复：**
> [tan 45 给我 0.9999](https://stackoverflow.com/questions/13775550/tan-45-gives-me-0-9999)

当我使用时，`tan`我得到一个很长的答案：

```
double degrees = 45.0;
double radians = Math.toRadians(degrees);
System.out.println(Math.tan(radians)); 
```

当我运行此代码时，我得到：

```
0.9999999999999 repeating 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:48:46.823

因为双打（或者实际上是双打的下属系统，IEEE754）并不完美。在使用双精度和浮点数（任何语言，不仅仅是 Java）时，请始终注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:49:00.673

为什么不？这是接近一。浮点运算永远不会精确。原因是 CPU 中的数字以二进制形式表示。
并且二进制浮点表示不能精确地表示例如 1/10。

只需阅读一些关于浮点编程的内容。

# android - 通过 NDK 在 Android 上加载不同版本的系统共享库？

> ID：14662513
> 
> 赞同：0
> 
> 时间：2013-02-02T13:46:30.063
> 
> 标签：android, android-ndk, shared-libraries, skia

我正在尝试通过使用一些本机库来开发一个 android 应用程序。但是，系统共享库`android 4.0`和`android 4.1.2`不同。为了保证兼容性，我从平台 4.0 获取 libskia.so 文件，并将其导入到我的项目中。我希望像使用第 3 方共享库一样加载这个共享库。不幸的是，在运行时`android 4.1.2`，我的应用程序似乎仍然调用系统skia 库。我对此一无所知，以下是我的`Android.mk`文件

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := sample
LOCAL_SRC_FILES := sample-jni.cpp

LOCAL_CFLAGS    := -I /home/WORKING_DIRECTORY/external/skia/include \
-I /home/WORKING_DIRECTORY/external/skia/include/core \
-I /home/WORKING_DIRECTORY/frameworks/base/core/jni/android/graphics  \
-I /home/WORKING_DIRECTORY/frameworks/base/include \
-I /home/WORKING_DIRECTORY/frameworks/base/native/include/android \
-I /home/WORKING_DIRECTORY/system/core/include \
-I /home/WORKING_DIRECTORY/external/skia/include/xml \
-I /home/WORKING_DIRECTORY/external/skia/include/images \
-I /home/WORKING_DIRECTORY/external/skia/include/views \

 LOCAL_SHARED_LIBRARIES :=skia jnigraphics
 include $(BUILD_SHARED_LIBRARY)
 include $(LOCAL_PATH)/prebuilt/Android.mk 
```

和预建的makefile

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := skia
LOCAL_SRC_FILES := libskia.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := jnigraphics
LOCAL_SRC_FILES := libjnigraphics.so
include $(PREBUILT_SHARED_LIBRARY) 
```

有任何想法吗？或者，是否有任何其他方法来确保兼容性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T18:39:11.160

您可以使用带有参数 RTLD_DEEPBIND 的本机代码中的 dlopen 来使用不同版本的 libskia。这将覆盖全局符号表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:27:14.853

[我希望你明白，除了稳定的 API](https://android.googlesource.com/platform/ndk/+/master/docs/STABLE-APIS.html)之外，不建议对系统库有任何依赖。但 Android 的开放性允许（无论是在技术上还是在许可方面）引入这种依赖关系。从本质上讲，这意味着在非特许水域航行，并且不仅准备在平台的下一版本中进行 API 更改，而且还准备在同一平台级别的供应商提供（即非 AOSP）设置中进行 API 更改。

从理论上讲，您可以将系统库的变体副本放入应用程序的**libs/armeabi-v7a**文件夹中，并使用[System.load(fullPath)](http://developer.android.com/reference/java/lang/System.html#load%28java.lang.String%29)而不是**loadLibrary()**加载它。

但在实践中，我相信**system/lib/libskia.so**将在您有机会执行代码之前加载到您的进程中，并且您不能在同一进程中加载​​同一个库的两个版本。此外，旧版本的**libskia**很可能无法在系统上加载，因为它依赖于其他系统库。

确保前向（和供应商）兼容性的最安全方法是对未记录的系统功能使用[动态链接](https://groups.google.com/d/topic/android-ndk/sOGz0nyLbg4/discussion)，并在此过程中执行仔细的错误检查。

但在很多情况下，系统无文档的 API 实际上是相当稳定的，而且 Google 的 Android 团队中的好人不会经常进行重大更改。因此，如果您链​​接到 4.0 版本的**skia** ，您的代码很可能只会在 4.1.2 及更高版本上运行......

**更新：**在你的特殊情况下，当一个额外的字段`fTextLocale`被添加到一个旧的类中时，你应该首先祝福那些没有在类声明中间插入这个字段的开发人员。因为现在您有了一个合理的策略：使用 4.1.2 标头（带有额外字段），链接到 4.0 库（不会将访问器方法引入新字段），并且您的代码有望正常工作。

# iphone - 如何从 AVAudioPlayer 中的音频文件图像设置 UIImageView 中的图像？

> ID：14662515
> 
> 赞同：0
> 
> 时间：2013-02-02T13:46:37.103
> 
> 标签：iphone, ios6, uiimageview, avaudioplayer

我想以编程方式制作基本的音频播放器应用程序。如果每个音频文件都包含图像，那么我希望在 UIImageView 中自动从音频文件中设置图像。如果任何文件不包含任何图像文件，则应将其设置为默认图像。

如下图所示：

![在此处输入图像描述](../Images/d1d05a3c70d52fdaaae9d9ae2b8bc71f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:20:05.907

检查你是如何拍摄这些图像的。-case它的Networking，使用SDWebImage，看这里： [https ://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

-如果这些图像保存在核心数据中（示例）在您的数据中进行搜索，如果存在，选择该数据并将其转换为图像

```
UIImage * image = [UIImage imagewithData:dataImage]; 
```

请记住，您需要在线或离线拥有数据库映像。然后只需进行搜索，案例存在，放图片，案例不，默认图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:53:11.283

您需要的代码可以在[Apple 的示例](http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html)中找到，正如 overbombing 所引用的问题中所引用的那样。它们使您轻松：

```
MPMediaItem *currentItem = [musicPlayer nowPlayingItem];

// Assume that there is no artwork for the media item.
UIImage *artworkImage = noArtworkImage;

// Get the artwork from the current media item, if it has artwork.
MPMediaItemArtwork *artwork = [currentItem valueForProperty: MPMediaItemPropertyArtwork];

// Obtain a UIImage object from the MPMediaItemArtwork object
if (artwork) {
    artworkImage = [artwork imageWithSize: CGSizeMake (30, 30)];
} 
```

无论如何，我建议您阅读[Apple 的示例](http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html)，看来您所做的几乎与他们所做的完全一样。

# grails - 用于 Grails 的 Quartz 插件 - 生产环境中的 OutOfMemoryError

> ID：14662517
> 
> 赞同：0
> 
> 时间：2013-02-02T13:46:56.197
> 
> 标签：grails, quartz-scheduler, cloud-foundry

我正在尝试将我的 Grails 2.1.1 应用程序部署到 cloudfoundry.com。在我的本地计算机上，应用程序运行没有问题。从 BuildConfig.groovy 中删除 Quartz 插件依赖项时，我能够成功启动 cloudfoundry 上的应用程序。

依赖：

```
compile ":quartz:1.0-RC5" 
```

grails cf-logs 打印以下错误：

```
Exception in thread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" java.lang.OutOfMemoryError: PermGen space 
```

下面看我的工作：

```
package de.tum.wi.fm.game
import org.quartz.JobExecutionContext

class StartGameJob {
    def execute(JobExecutionContext context) {
        def gameRoundId = context.mergedJobDataMap.get('gameRoundId')

        if(gameRoundId) {
            GameRound gameRound = GameRound.get(gameRoundId)
            if(gameRound) {
                Game game = gameRound?.game
                game.currentGameRound = gameRound
                game.save(flush: true)
            }
        }
    }
} 
```

触发器放置在服务中：

```
def jobParams = [gameRoundId:gameRound.id]
Date gameRoundEndDate = gameRound.endDate.toDate()
ChangeRoundJob.schedule(gameRoundEndDate, jobParams) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:54:42.843

您是否尝试过为应用程序分配更多内存？您可以使用 VMC 执行此操作；

```
vmc scale [application name] 
```

按照提示操作，VMC 应该会询问您希望分配多少内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:47:54.577

The OutOfMemoryError exception determines that the JVM hasn't enough memory assigned. You need to increase the memory of cloudfoundry instance and consequently increase memory of the JVM.

Try to execute following commands when deploying your application:

```
grails -Dgrails.env=production cf-push --memory=2048 --no-start
grails -Dgrails.env=production cf-env-add JAVA_OPTS -Xmx1024m -XX:MaxPermSize=512m
grails -Dgrails.env=production cf-start 
```

The first command will push (deploy) the application into the cloudfoundry instance and doesn't start it.

The second will set JVM environment variables, sufficient memory settings.

Third command starts the application.

# c# - 获取字符串一部分的有效方法

> ID：14662520
> 
> 赞同：1
> 
> 时间：2013-02-02T13:47:08.997
> 
> 标签：c#

我有一个由`prefix`a`type`和 name 组成的名称，我想检索该`name`部分。

`Prefix`始终保持不变，但`Type`可以改变。

我有以下代码来获取名称部分：

```
 string prefix = "Prefix-";
            string str =prefix + "Type-hello-j---.xml"; 
            str = Path.GetFileNameWithoutExtension(str);
            str = str.Substring(prefix.Length);
            str = str.Substring(str.IndexOf('-') + 1); 
```

在上面的示例中，名称部分是：`hello-j---` 在 C# 中是否有任何有效/更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T13:59:01.613

您可以使用[允许您指定零件数量的](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)[重载`string.Split()`](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)：

```
string fileName = "Prefix-Type-hello-j---.xml"; 
string withoutExtension = Path.GetFileNameWithoutExtension(str);
var parts = str.Split(new[]{'-'}, 3);
string name = parts[2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:53:45.383

如果这始终是您的字符串的结构，这将起作用：

```
string name =  str.Split(new[]{'-'})[2]; 
```

我假设你只想要“你好”。如果您想要名称的其余部分，您可以使用 @KingCronus 建议的重载方法：

```
string name = str.Split(new[]{'-'}, 3)[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:44:14.003

这取决于您如何定义效率，但如果代码行符合您的定义，那么：

```
var str = "prefix-Type-hello-j---.xml"; 
var name = Regex.Match(str, @"(.+?-)(.+?-)(?<name>.+)\.").Groups["name"].Value; 
```

前两个捕获组使用前缀和类型，然后命名组使用名称，直到扩展启动。

这段代码假设总是有一个匹配，如果没有它会抛出一个空引用异常。

请参阅[正则表达式匹配](http://msdn.microsoft.com/en-us/library/0z2heewz.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:08:03.157

您还可以创建一个扩展函数，其工作方式类似于 String.IndexOf，但它获取指定字符的第 n 次出现的位置：

```
public static int IndexOfWithCount(this string input, char character, int occurenceNumber)
{
    int count = 0;
    for (int numCaracter = 0; numCaracter < input.Length; numCaracter++)
        if (input[numCaracter] == character)
        {
            count++;
            if (count == occurenceNumber)
                return numCaracter;
        }

    return -1;
} 
```

要使用它：

```
string nameWithoutExt = Path.GetFileNameWithoutExtension(str);
string result = nameWithoutExt.Substring(nameWithoutExt.IndexOfWithCount('-', 2) + 1); 
```

# c# - 使用 (F3,F6) 等功能键从其父窗体调用 UserControl 的按钮单击事件

> ID：14662524
> 
> 赞同：1
> 
> 时间：2013-02-02T13:47:31.923
> 
> 标签：c#

用户控制中的代码（Windows 用户控制）。

我有一个按钮，当单击该按钮时，会触发一些逻辑。

下面是按钮事件。

```
 private void btnCancel_Click(object sender, EventArgs e)
 {
     // Some Logic
 } 
```

我有主窗体（Windows 窗体）

我在我的主 Winform 的面板中添加了上述用户控件。
从这里我想`btnCancel_Click`使用一些功能键（F3，F4）来调用用户控制事件。

这对我来说是一件非常新鲜的事情。请在这方面帮助我。

谢谢 。克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:58:01.957

将您的父表单`KeyPreview`属性设置为 true ，然后在`KeyDown`您的父表单的情况下，查找`if(e.KeyCode == Keys.F3)`，然后为您的用户控件编写一个公共方法，该方法会触发`btnCancel_Click`. 您可以从父表单访问它。

父表格：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.F3)
    {
        MyUserControl.FireButtonEvent();
    }
} 
```

用户控制：

```
public void FireButtonEvent()
{
  this.btnCancel_Click(null, EventArgs.Empty);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:03:56.420

创建一个`KeyEvent`方法。例如：

```
private void KeyDown(Object sender, KeyEventArgs e)
{
    string sKey = e.KeyValue.ToString();
    if (sKey==112) {//SomeCode;} // F1
} 
```

在设计器代码中，将方法链接到主窗体上的按键事件：

`this.KeyDown += new System.Windows.Forms.KeyEventHandler(this.KeyDown);`

在网上查找要激活它的按钮的键值，F1 到 F24 是值 112 到 135。

# asp.net - 实施了基本的认证弓，没有打开页面。一切都需要身份验证？

> ID：14662525
> 
> 赞同：0
> 
> 时间：2013-02-02T13:47:35.153
> 
> 标签：asp.net, asp.net-mvc, basic-authentication

我按照 Bjorns 编写的关于基本身份验证的教程，[http://blog.smithfamily.dk/2008/08/27/ImplementingBasicAuthenticationInASPNET20.aspx](http://blog.smithfamily.dk/2008/08/27/ImplementingBasicAuthenticationInASPNET20.aspx)，但现在每个页面都需要身份验证。

我想要的是我的 Home 控制器开放且免费，还可以登录和注册。我坚信它们会是这样，并且我可以通过以下方式固定所需的零件：

```
[Authorize]
        public ActionResult Test()
        {
            return View();
        } 
```

我的 system.web 看起来像：

```
<authentication mode="None" />
    <authorization>
      <allow users="?" />
    </authorization> 
```

和 system.webServer：

```
<modules>
      <add name="BasicAuthHttpModule" type="TestProj.Modules.BasicAuthenticationModule" />
    </modules> 
```

关于如何定义需要登录才能进入旅馆的打开页面和锁定页面的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:24:29.290

您可以使用`AllowAnonymous`操作过滤器来避免对操作进行身份验证。样品：

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{

} 
```

或在您的控制器中：

```
[AllowAnonymous]
public class HomeController : Controller
{
  // all actions would allow anonymous users
} 
```

# git - 为什么即使在配置之后 Git 也不允许我提交？

> ID：14662526
> 
> 赞同：94
> 
> 时间：2013-02-02T13:47:37.647
> 
> 标签：git, github, commit, config

这个问题似乎是重复的，但实际上并非如此。只是一个不断重复的细微差别。git 不断告诉我：“请告诉我你是谁”，即使在设置之后也是如此。当我跑步时`git commit`，这就是我得到的......

```
$ git commit

*** Please tell me who you are.

Run

git config --global user.email "you@example.com"

git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect email address (got 'Obby@ObbyWorkstation.(none)') 
```

但是当我跑步时`git config --global -l`，它给了我所有的细节......

```
$ git config --global -l
user.name=myname
user.mail=me.myself@gmail.com
http.proxy=proxy.XX.XX.XX:XXXX 
```

我已经更改了我的姓名、电子邮件和代理，但是当我运行命令时它们看起来很好，即使在 .gitconfig 文件中我也可以看到这些值已设置。可能缺少什么，因为我根本无法承诺。每次都问我是谁？

@sheu 告诉我一些我改变的东西，但仍然是同样的问题。当我设置时`--local`，仍然`git commit`问我同样的问题。这是输出

```
$ git config --local -l
core.repositoryformatversion=0
core.filemode=false
core.bare=false
core.logallrefupdates=true
core.symlinks=false
core.ignorecase=true
core.hidedotfiles=dotGitOnly
user.name=myname
user.mail=me.myself@gmail.com 
```

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-02-02T14:07:05.307

那是一个错字。您不小心在**电子邮件**`user.mail`中设置了没有**电子邮件**。通过在全局配置中设置来修复它**`user.email`**

 **```
git config --global user.email "you@example.com" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-02T13:58:46.130

您正在设置全局 git 选项，但本地结帐可能设置了覆盖。尝试使用 再次设置它们`git config --local <setting> <value>`。您可以查看`.git/config`本地结帐中的文件，以查看结帐定义的本地设置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-21T21:36:03.487

你有一个本地的`user.name`还是`user.email`覆盖全球的？

```
git config --list --global | grep user
  user.name=YOUR NAME
  user.email=YOUR@EMAIL
git config --list --local | grep user
  user.name=YOUR NAME
  user.email= 
```

如果是这样，请删除它们

```
git config --unset --local user.name
git config --unset --local user.email 
```

本地设置是针对每个克隆的，因此您必须取消设置本地`user.name`和`user.email`机器上的每个存储库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-12T21:09:07.467

即使在正确设置配置后我也遇到了这个问题。`git config`

我的场景是通过主管（在 Linux 中）发出 git 命令。在进一步调试时，主管没有从主文件夹中读取 git 配置。因此，我必须在主管配置中设置环境 HOME 变量，以便它可以正确定位 git 配置。奇怪的是，主管无法仅从主管配置中配置的用户名（/etc/supervisor/conf.d）中找到 git 配置。**

# php - 执行 rowCount 和第二个 foreach 循环时出现两个 PDO 错误

> ID：14662527
> 
> 赞同：-3
> 
> 时间：2013-02-02T13:47:43.373
> 
> 标签：php, mysql, pdo

现在已经为此苦苦挣扎了几个小时。谁能指出我哪里出错了。

我得到 的**第一个错误是：**

```
Fatal error: Call to undefined method PDO::rowCount() in
pm_wall.php on line 8
Call Stack: 0.0000 643680 1\. {main}()
index.php:0 0.0015 662904 2.
include('pm_wall.php')
index.php:117 
```

我得到的**第二个错误是：**

```
Warning: Invalid argument supplied for foreach() in pm_wall.php on line 19

Call Stack:
    0.0000     643296   1\. {main}() index.php:0
    0.0015     649864   2\. include(index.php:117 
```

我该如何解决这个问题？下面是我的代码：

```
$sql = "SELECT * from pm_msg";
$result = $pdo->query($sql);
if($pdo->rowCount() > 0 && !empty($result)) // first error occurs here
{
    foreach ($result as $row) 
    {
        $user_id = $row['user_id'];
        echo '<div id="content">
                    <div class="stbody">
                    <div class="stimg">';

        // set profile picture  

        $sql = "SELECT img FROM pm_user WHERE id=$user_id";
        $result = $pdo->query($sql);
        foreach ($result as $row) // second error occurs here
        {
            echo $row['img'];
        }

        echo '<div id="stexpandbox"><div></div>';       
        echo '</div></div></div></div>';
    }
}
else
    {
        echo 'Wanna be starting soemthing?';
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:54:45.450

rowCount() 必须在您的 PDO 语句上调用，而不是在您的 PDO 实例上！

$result->rowCount(); 阅读错误可能会有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:55:46.977

可能是这样的：

```
$sql = "SELECT * from pm_msg";
$result = $pdo->query($sql);
if($result->rowCount() > 0 && !empty($result)) // first error occurs here
{
    while( $row = $result->fetch(PDO::FETCH_ASSOC) ) 
```

* * *

[花一点时间（一两天），在php.net](http://php.net/manual/en/book.pdo.php)上阅读有关 PDO 及其用法的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T10:39:59.107

在 PDO 中使用此选项来获取受影响和匹配的行：

```
PDO::MYSQL_ATTR_FOUND_ROWS   => TRUE 
```

例如，如果在更新时找不到该行 - 它将返回 0。希望这会有所帮助。

# ios - 如何使用 %d 本地化 stringWithFormat？

> ID：14662532
> 
> 赞同：1
> 
> 时间：2013-02-02T13:48:25.870
> 
> 标签：ios, localization, nslocalizedstring

我必须使用带有整数值的 stringWithFormat 本地化详细文本标签，如下所示。

```
cell.detailTextLabel.text = 
    [NSString stringWithFormat:@"Remaining: %d", count]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:40:36.127

例如，假设它`"Remaining: %d" = "Remaining: %d`在您的英语 Localizable.strings 文件中并且`"Remaining: %d" = "Restante: %d`在您的西班牙语文件中，以下代码将解决您的特定问题：

```
cell.detailTextLabel.text = 
    [NSString stringWithFormat:NSLocalizedString(@"Remaining: %d", @"description for translators"), count]; 
```

如果您需要本地化具有多个参数的字符串，则上述解决方案不够灵活（在某些语言中，您可能需要更改占位符的顺序）。您可以使用[位置说明符](https://stackoverflow.com/questions/1063843/is-there-a-way-to-specify-argument-position-index-in-nsstring-stringwithformat)为您的解决方案添加这种灵活性。

# entity-framework - 不是有效的实体或映射的超类

> ID：14662535
> 
> 赞同：16
> 
> 时间：2013-02-02T13:48:32.310
> 
> 标签：entity-framework, symfony, doctrine

我有 2 个捆绑包，1 个 CMS 捆绑包将成为父捆绑包。我在两个捆绑包中都有重复的实体。就像`User`CMS 包中的用户一样，我将其设为抽象类。（不确定这是否是正确的选择。实际上，我想要的是在需要时扩展我的用户实体。）。

厘米用户：

```
abstract class User implements UserInterface 
```

捆绑用户：

```
use MV\CMSBundle\Entity\User as BaseUser;

/**
 * @ORM\Entity(repositoryClass="MV\NameBundle\Repository\UserRepository")
 * @DoctrineAssert\UniqueEntity(fields={"email"}, message="user.email.already.exist" )
 */
class User extends BaseUser
{
    ....
} 
```

我收到错误`Class "MV\CMSBundle\Entity\User" is not a valid entity or mapped super class.`

我在 symfony 的文档中搜索并找到了这个页面：[entities-entity-mapping](http://symfony.com/doc/2.0/cookbook/bundles/override.html#entities-entity-mapping)但他们没有添加一些内容 xD

哦，不，我不想使用 FOSUserBundle ;)

Symfony：2.1

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T18:01:45.853

就我而言`* @ORM\Entity`，我的班级定义中缺少我。

```
/**
 * @ORM\Entity
 * @ORM\Table(name="listtype")
 */
class ListType
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-02T14:46:43.207

定义基类如下：

```
/**
 * @ORM\MappedSuperclass
 */
abstract class BaseUser
{
    // ...
} 
```

定义真实实体：

```
/**
 * @ORM\Entity
 */
class User extends BaseUser
{
    // ...
} 
```

因为您缺少基类上的 @MappedSuperclass 注释，所以 Doctrine 会引发您提到的异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T20:22:08.917

就我而言，问题`eaccelerator`在于它删除了**Doctrine**使用的所有评论。禁用后`eaccelerator`它起作用了。您可以禁用您的 php 设置，或者，

在`web/app_dev.php`or`web/app.php`文件中。

```
<?php
    ini_set('eaccelerator.enable', 0);
    ini_set('eaccelerator.optimizer', 0);
    //rest of the code. 
```

**注意：**禁用此功能后请清除 symfony2 缓存。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-18T08:17:22.670

我有同样的问题。但是为了让它工作，我不得不改变线路：

```
* @ORM\Table
* @ORM\Entity 
```

# button - Joomla。如何在页面底部制作“点击查看更多”按钮

> ID：14662541
> 
> 赞同：0
> 
> 时间：2013-02-02T13:49:05.637
> 
> 标签：button, joomla, scroll, click

在 Joomla 页面中，我有很大的内容，我不想制作像 1、2、3 等这样的页面，但就像在 Facebook 中向下滚动直到看到“点击查看更多”按钮并且不刷新它添加一些数据到页面底部。我不知道如何制作它，也许这里有任何扩展？或者有什么脚本？做起来这么难？谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:38:04.450

To do it the ajax way, i.e. only loading content when you intend to show it, you will need to write a custom jQuery function that onload:

1.  finds the "next page" button and store the url into a variable (this will contain the whole url followed by &pagenumber=2 or /page/2 or something similar).
2.  remove its handler and replace it with a custom ajax call:
3.  jQuery.get with the url you just stored adding &format=raw (this will return the content of the next page, without the rest of the template, and without any scripts and css - which you have already loaded)
4.  on success remove the "next page" button you modified,
5.  then insert in its place the html received from the ajax call,
6.  repeat from n.1 until there is no "next page" button

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:46:39.033

阅读您的查询后，我知道您的 joomla 文章中有大量内容。页面加载后，您希望在单击查看更多按钮后显示部分内容 n 稍后部分显示。如果我是正确的，那么在您的文章中编写脚本，将 div 标签添加到您的内容中。将 display none 属性应用于要在单击时显示的 div 的内容。使用 JQuery 或 Js，您可以在单击按钮后显示隐藏部分。

# mysql - Ruby on Rails：用 Ruby 代码替换 SQL 查询的“LIKE”部分

> ID：14662556
> 
> 赞同：1
> 
> 时间：2013-02-02T13:51:17.597
> 
> 标签：mysql, ruby, ruby-on-rails-3

在我的应用程序中，我有一个“LIKE”SQL 查询，类似于......

```
Item.where("name LIKE ?", "%"+params[:q]+"%").all 
```

但我只想打 db 1x（在应用程序启动时），因为项目的数量很大，并加载这个通用部分......

```
Item.all 
```

...存入内存（全局变量），因此我可以稍后在整个应用程序中重用其内容，在不同的情况下，并使用一些特定于案例的 Ruby 代码进行改进（请参阅“LIKE”部分）。

用 Ruby 进行这种“过滤”的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:58:58.717

你可以为此使用[低级缓存吗？](https://devcenter.heroku.com/articles/caching-strategies#low-level-caching)

# c - 是什么导致编译器警告未使用的函数？

> ID：14662561
> 
> 赞同：0
> 
> 时间：2013-02-02T13:51:45.267
> 
> 标签：c, arrays, prototype, function-pointers, gcc-warning

简单设置：有 n 个函数原型和函数实现。有一大堆函数指针。每个函数都列在此数组中。使用 gcc 编译时，有些仍然会导致 -Wunused-function。

代码：

```
void foo1(void);
void foo2(void);
void bar1(void);
void bar2(void);

/* and their implementations */

void (*functions[])(void) = { foo1, foo2, bar1, bar2 }; 
```

这就是设置的样子（只是一个例子）！现在使用 gcc 编译时，其中一个 foo/bar 函数会导致 -Wunused-function 警告。其他人没有。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T14:01:30.853

> **-Wunused-function**
> 
> 每当声明了静态函数但未定义或未使用非内联静态函数时发出警告。此警告由**-Wall**启用。

此警告似乎在*从不*使用函数*和*声明（原型）但未定义函数时触发。

您确定您没有错过实现您声明的任何功能吗？

# c - 使用 libpng 过滤器

> ID：14662566
> 
> 赞同：0
> 
> 时间：2013-02-02T13:52:30.240
> 
> 标签：c, libpng

我想用 libpng 读取 PNG 文件，我想使用过滤器 png_set_rgb_to_gray_fixed 将 RGB 值转换为灰度。原始图像每个通道有 8 位，因此每个像素有 3 个字节。我希望输出为每像素 8 位。但是 png_get_rowbytes 告诉我行大小是 3*width。我做错了什么？

这是我的代码（为简洁起见，我删除了错误检查代码）：

```
FILE *fp = fopen(filename,"rb");
png_structp png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, 0, 0, 0);
png_infop info_ptr = png_create_info_struct(png_ptr);    
png_infop end_info = png_create_info_struct(png_ptr);
png_init_io(png_ptr, fp);
png_uint_32 width,height;
int color_depth,color_type, interlace_type, compression_type, filter_method;    
png_read_info(png_ptr, info_ptr);    
png_get_IHDR(png_ptr, info_ptr, &width, &height,
             &color_depth, &color_type, &interlace_type,
             &compression_type, &filter_method);
assert(color_type == PNG_COLOR_TYPE_RGB); 
png_set_rgb_to_gray_fixed(png_ptr, 3,-1,-1);

int rowbytes = png_get_rowbytes(png_ptr, info_ptr);
assert(rowbytes == width ); // FAILS: rowbytes == 3*width 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:19:04.963

您需要调用[png_read_update_info](http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Desktop-generic/LSB-Desktop-generic/libpng12.png.read.update.info.1.html)：

> png_read_update_info() 更新 info_ptr 指向的结构以反映已请求的任何转换。例如，将更新行字节以使用 png_read_update_info() 处理隔行扫描图像的扩展。

所以：

```
png_set_rgb_to_gray_fixed(png_ptr, 3,-1,-1);
png_read_update_info(png_ptr, info_ptr);
int rowbytes = png_get_rowbytes(png_ptr, info_ptr); 
```

# ruby - 在 Mac OS X 10.8.2 上安装 Ruby

> ID：14662569
> 
> 赞同：35
> 
> 时间：2013-02-02T13:52:59.573
> 
> 标签：ruby, macos, installation, makefile

我提到了[在 Rails 上安装 Ruby - Mac OS Lion](https://stackoverflow.com/questions/6840719/installing-ruby-on-rails-mac-os-lion)并遵循[Alain Beauvois 的回复](https://stackoverflow.com/questions/6840719/installing-ruby-on-rails-mac-os-lion/8464619#8464619)，几乎所有事情都搞定了。唯一的区别是我使用的是 1.9.3 而不是 1.9.2。

我已经创建了`.bash_profile`，甚至确保了它的存在`open -e .bash_profile`，甚至添加了 Alain Beauvois 所说的这条线。

但现在似乎问题是我收到了这个错误：

```
Error running 'make', please read /usr/local/rvm/log/ruby-1.9.3-p374/make.log
There has been an error while running make. Halting the installation. 
```

引用的日志包含以下内容：

```
[2013-02-02 21:41:52] make
    CC = clang
    LD = ld
    LDSHARED = clang -dynamic -bundle
    CFLAGS = -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration  -pipe 
    XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
    CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/usr/local/rvm/usr/include -I. -I.ext/include/x86_64-darwin12.2.1 -I./include -I.
    DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  
    SOLIBS = 
compiling regparse.c
regparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32]
    return t->num_entries;
    ~~~~~~ ~~~^~~~~~~~~~~
1 error generated.
make: *** [regparse.o] Error 1 
```

我什至试过

```
rvm -install ruby-1.9.3-p374 
```

但仍然得到同样的错误。在我进入这部分之前，我确实遇到了一些奇怪的错误，但是在我重新运行它并`sudo`在它前面添加之后，它起作用了。AFAIK， =用权限/特权`sudo`做某事，对吧？`su`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T22:02:19.530

我有完全相同的错误，但我使用的是 brew 而不是 MacPorts。我所要做的就是：

```
brew update
brew tap homebrew/dupes
brew install apple-gcc42
rvm get stable
rvm install 1.9.3-p374 
```

正如一些说明所指出的那样，我不必设置 CC 环境变量。！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-09T15:46:47.123

如果你使用的是 rbenv 和 ruby​​-build 而不是 rvm，你必须这样做：

```
env CC=gcc rbenv install 1.9.3-p392 
```

如果这不起作用，请尝试以下操作：

```
# this export must be done before every new ruby build
export CC=gcc
# use the version you wish to install
rbenv install 1.9.3-p392 
```

如果还是不行，需要先安装gcc：

```
brew update
brew tap homebrew/dupes
# install apple-gcc, only once needed
brew install apple-gcc42 
```

在 ruby​​ 人员构建兼容 clang 的 ruby​​ 版本之前，您必须在每次构建新的 ruby​​ 版本之前导出 CC 变量

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-02T14:43:24.773

刚找到[这个](https://gist.github.com/3237860)。我认为这是你需要做的。

首先，如果您还没有下载[MacPorts](http://www.macports.org/)并安装它。然后运行以下两个命令：

```
sudo port selfupdate
sudo port install apple-gcc42 
```

也得到真正的 UNIX GCC。然后，安装 1.9.3 运行：

```
CC=/opt/local/bin/gcc-apple-4.2 rvm install ruby-1.9.3-p194 --enable-shared --without-tk --without-tcl 
```

它告诉 rvm 使用 UNIX GCC 安装 Ruby，无需 Tk 或 Tcl 需要 X11（OSX 10.8 中省略）。如果您想要 readline 支持、OpenSSL 等，请查看上面链接的要点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T23:31:48.000

这也适用于 OSX 10.8.2 + XCode 4.6 上的 rbenv

```
$ export CC=gcc
$ rbenv install 1.9.3-p385 -v 
```

但是知道如果苹果将来更改 Xcode 的命令行工具，homebrew 可以安装另一个版本的 gcc 也很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T01:59:47.880

这在没有安装自制软件或 Macports 的 ruby​​-1.9.3-p385 上也适用于我。

```
export CC=gcc
rvm install 1.9.3 
```

给出消息“Ruby 'ruby-1.9.3-p385' 是使用 clang 构建的 - 但它不（完全）受支持，预计会出现错误。” 完成任务后。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-29T18:43:28.173

只是在列表中添加另一个答案......我正在使用 ruby​​-install，这对我有用：

```
CC=/usr/local/bin/gcc-4.2 ruby-install ruby 1.9.3-p0 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-07T23:22:11.050

我刚刚做了（在安装 XCode 命令行工具之后）：

```
$ 出口 CC=gcc
$ rvm 安装 1.9.3

```

虽然它说“Ruby 'ruby-1.9.3-p374' 是使用 clang 构建的 - 但它没有（完全）支持，预计会出现错误。” - 有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-17T13:25:02.153

我试过了`apple-gcc42`，`CC=/usr/bin/gcc`但没有任何运气，所以我不确定它们是否有必要。我正在使用`rbenv`管理器，所以这对我来说在尝试安装时有用`1.9.3-p385`

```
brew install readline
CONFIGURE_OPTS="--with-readline-dir=$(brew --prefix readline)" rbenv install 1.9.3-p385 
```

[在这个博客](http://rors.org/2011/10/25/compiling-ruby-on-a-fresh-lion-install)上找到它

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-12T17:58:41.193

备案：在`rbenv`, `ruby 1.9.3-p385`, **`gcc48`**( `brew install gcc48`) 上为我工作`Darwin Kernel Version 15.2.0`。（编译过程中有很多我忽略的警告，到目前为止，ruby 工作正常）。

我只需要在`CC=gcc-4.8`之前设置`rbenv install 1.9.3-p385`

# java - 无状态会话 Bean 中的实例变量 - 状态是如何维护的？

> ID：14662583
> 
> 赞同：1
> 
> 时间：2013-02-02T13:54:26.547
> 
> 标签：java, jakarta-ee, ejb-3.0, instance-variables, stateless-session-bean

**在 GlassFish 3.0 上运行的**服务器****

 **```
@Stateless(mappedName="messengerservice")
public class MessengerService implements MsnService{

    int count;

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        count = count+1;
        return count;
    }
} 
```

**客户**

```
 for(int i=0;i<5;i++){
      MsnService br = (MsnService) ctx.lookup("java:global/EJbTutorial/MessengerService");
      System.out.println(br.getCount());
  } 
```

**输出**

```
1
2
3
4
5 
```

EJB规范说服务器维护一个会话bean池，我在一个实例中增加值，重新查找希望得到一个新实例，并且似乎维护了实例变量值

这怎么可能 ？除非服务器每次都向我返回相同的实例，或者是这样。

我什至尝试在循环中执行它并得到相同的结果。任何人都可以阐明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:42:22.730

它给出了正确的输出，[从这个链接引用](http://www.java-samples.com/showtutorial.php?tutorialid=841)，它说

> 使用无状态 bean，只要 EJB 容器能够池化无状态 bean，客户端就可以调用任何可用的实例化 bean 实例。这可以减少 bean 的实例化数量，从而减少所需的资源。
> 
> Bean pooling 当前未调用的任何无状态会话 bean 方法实例同样可被 EJB
> 容器或应用程序服务器调用以服务客户端的请求。这允许 EJB 容器汇集无状态 bean 实例并
> 提高性能。
> 
> 可伸缩性 因为无状态会话 bean 能够为多个客户端提供服务，所以当应用程序有大量客户端时，它们往往更具可伸缩性。与有状态会话 bean 相比，无状态会话 bean 通常需要较少的实例化。
> 
> 性能 EJB 容器永远不会将无状态会话 bean 从 RAM 移出到辅助存储，这可能与有状态会话 bean 一样；因此，无状态会话 bean 可能提供比有状态会话 bean 更高的性能。

阅读更多关于[无状态和有状态会话 bean 之间的区别](http://www.java-samples.com/showtutorial.php?tutorialid=841)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:52:12.013

为了测试，如果无状态 Bean 确实像汤姆安德森建议的那样进行了池化，我尝试使用并行线程执行它

客户

```
ExecutorService service =  Executors.newFixedThreadPool(10);           

for(int i=0; i<5;i++){
  Future future=  service.submit(new MessengerClient("Thread "+i+" :"));
  }        

service.shutdown(); 
```

**输出**

```
Thread 0 :1
Thread 1 :1
Thread 3 :1
Thread 4 :1
Thread 2 :1
Thread 1 :2
Thread 2 :3
Thread 3 :4
Thread 4 :5
Thread 0 :6
Thread 1 :7
Thread 2 :8
Thread 3 :9
Thread 4 :10
Thread 0 :11
Thread 1 :2
Thread 2 :12
Thread 3 :13
Thread 4 :14
Thread 2 :15
Thread 1 :16
Thread 3 :17
Thread 4 :18
Thread 0 :19
Thread 0 :20 
```

好吧，这证明线程确实使用了新实例**

# javascript - 自定义弹出谷歌地图

> ID：14662584
> 
> 赞同：2
> 
> 时间：2013-02-02T13:54:33.937
> 
> 标签：javascript, jquery, html, css, google-maps

如何用谷歌地图做这种弹出窗口？访问[http://www.flightradar24.com/](http://www.flightradar24.com/)并单击一个机场，可以看到弹出窗口是完全个性化的。所以我设法在谷歌地图上创建了弹出窗口，但现在我看不到这是如何为每个弹出窗口放置不同的消息的。以及如何自定义包含 css 和 javascript 的弹出窗口？所以现在我在这里，我想知道目前我的脚本是否正确以及以后如何到达像 Flightradar24 机场这样的弹出窗口？

```
<script type='text/javascript'> $(function(){function initialize() {
    var mapOptions = {
      zoom: 4,
       disableDefaultUI: true,
      center: new google.maps.LatLng(45.35, 4.98),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'),
                                  mapOptions);

    addMarkerWithWindow("This is Lemans", new google.maps.LatLng(48.006922, 0.20874), map);
addMarkerWithWindow("This is Paris", new google.maps.LatLng(48.856291, 2.352705), map);
}

    function addMarkerWithWindow(name, coordinate, map) {
var popup=$('<div/>', {
    content: name
});

    var image = 'rss.png';
    var marker = new google.maps.Marker({
    map: map,
icon: image,
    position: coordinate
});

    var styles = [
   {
      featureType: "all",
      stylers: [
        { saturation: -15 },
        { lightness: -10 },
      ]
    },

            ];
map.setOptions({styles: styles});

//  jQuery 

var popup=$('<div/>', {
    'id':'This is Lemans',
    'text':'Hello World!'

}).dialog({
    'autoOpen':false,
    'width': 600,
    'height':600,
    'resizable':false,
    'modal':false,
    'title':'Le Mans'
});

google.maps.event.addListener(marker, 'click', function(e) {
    console.log(e);
    popup.dialog('open');
});}initialize();});//]]>  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:13:00.633

如果您更改 addMarkerWithWindow 函数以在弹出窗口中使用它的参数，[您的代码对我](http://www.geocodezip.com/v3_SO_infowindowOnMap.html)有用：

```
function addMarkerWithWindow(name, coordinate, map) {
    var image = 'rss.png';
    var marker = new google.maps.Marker({
      map: map,
      // icon: image,
      position: coordinate
    });

   //  jQuery 
   var popup=$('<div/>', {
    'id':'This is '+name,
    'text':'Hello World!'

   }).dialog({
    'autoOpen':false,
    'width': 600,
    'height':600,
    'resizable':false,
    'modal':false,
    'title':name
   });

   google.maps.event.addListener(marker, 'click', function(e) {
    // console.log(e);
    popup.dialog('open');
   });
} 
```

（console.log 在 IE 中不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:24:03.777

嗨，您正在寻找类似[JSFiddle 的东西，在地图点击时会弹出自定义弹出窗口](http://jsfiddle.net/farrukhsubhani/MKSnD/2/show/)。它只是一个快速模型，用于展示如何在鼠标悬停事件上显示隐藏。您可能可以放置一些漂亮的动画并停止事件传播，或者也可以使其成为点击事件。

您应该查看的代码是从第 120 行到第 151 行

```
 events:{
  mouseover: function(marker, event, context){
    var listelement = jQuery("li[data-mapid='"+context.data.id+"']");
    jQuery(listelement).attr('style','background-color:#ccc');
    jQuery(listelement).attr('data-isactive','1');
    var map = $(this).gmap3("get"),
      infowindow = $(this).gmap3({get:{name:"infowindow"}});
    if (infowindow){
      infowindow.open(map, marker);
      infowindow.setContent(context.data.ht);
      jQuery("#customPopup").html(context.data.ht); //This puts html in popup. You can even get html from a jquery template or get it via json if you want.
        jQuery("#customPopup").show(500); // This part shows the popup
    } else {
      $(this).gmap3({
        infowindow:{
          anchor:marker, 
          options:{content: context.data.ht}

        }
      });
        jQuery("#customPopup").html(context.data.ht); //This is when no window is present so we create new window and again full it with html as you wish
        jQuery("#customPopup").show(500); //Then show it to the user
    }
  },
  mouseout: function(marker,event,context){
    var listelement = jQuery("li[data-mapid='"+context.data.id+"']");
    jQuery(listelement).attr('style','background-color:#fff');
    jQuery(listelement).attr('data-isactive','0');
    var infowindow = $(this).gmap3({get:{name:"infowindow"}});
    if (infowindow){
      infowindow.close();
      jQuery("#customPopup").html(""); //Hide the html or not. if you do this then html will go away first before hiding it not so good animated effect but you get the point.
      jQuery("#customPopup").hide(500); //Take it away from user
    } 
```

# ruby-on-rails-3.1 - 在我的场景中使用 link_to 的最佳方式是什么

> ID：14662590
> 
> 赞同：0
> 
> 时间：2013-02-02T13:55:11.720
> 
> 标签：ruby-on-rails-3.1

我正在使用rails，所以我在这里遇到了问题

```
link_to 'Movie Title', {:action=> 'sort', :checks=>"#{@temp.join('_')}"}, :id => 'title_header' 
```

这是我的代码片段，悬停或单击此链接时，我得到的是 /movies/sort?checks=G_PG_NC-17

但我需要它像 movies/sort/G_PG_NC-17 一样，看到没有“检查”的区别吗？在第二个 url 中，无论如何我可以借助 javascript 和 routs.rb 中的一些更改来实现这一点，但我认为还有别的东西，我可以轻松完成。非常感谢您的意见。

干杯。乔西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:03:36.637

我认为没有比编辑`routes.rb`文件并添加以下内容更简单的方法了：

`match 'movies/sort/:checks`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:23:33.493

在路线中添加这个

`get '/movies/sort/:checks' => 'movies#sort', as: :movies_sort_checks`

然后

`link_to 'Movie Title', movies_sort_checks_path(@temp.join('_'))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:45:39.127

最后它是由我自己完成的，无论如何我对rails很陌生，我想否则我不会想出这个问题。

所以这部分 link_to 'Movie Title', {:action=> 'sort', :checks=>"#{@temp.join('_')}"}, :id => 'title_header' 更改为 link_to 'Movie标题',returm_link(@temp), :id => 'title_header'

现在看到 return_link 是一个辅助方法。转到控制器并添加 def return_link(kick) '/'+shot+'/'+kick.join('_') end helper_method :stringo

最后如你所料改变 routes.rb match '/sort/:checks', :to => 'movies#sort'

一切都按预期完成，所以自定义助手在这里真的很有帮助

干杯。乔西。

# xml - 查找特殊字符的 XML CDATA（大写 L，上面带有点）

> ID：14662591
> 
> 赞同：0
> 
> 时间：2013-02-02T13:55:14.140
> 
> 标签：xml, unicode, cdata

这个[网页](http://titus.uni-frankfurt.de/unicode/unicsel/latkomb.htm)有一些关于我需要的字符的数据（大写 L，上面有点）。它大约在页面的一半处。

但我不知道如何把它变成 CDATA。例如，这就是我为 X 上的酒吧所做的事情。

```
<xsl:text disable-output-escaping="yes"><![CDATA[&#772;]]></xsl:text> 
```

我会为 L 用一个点做什么 CDATA？

更新，这个 CDATA 模板是我的主要解决方案：

```
<xsl:text disable-output-escaping="yes">L<![CDATA[&#775;]]></xsl:text> 
```

它在浏览器中测试得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:38:37.763

您不需要引入 CDATA 部分 - 或通过禁用输出转义来解决它引入的问题。这是不必要的复杂。您输入的内容在解析为：

```
<xsl:text>L̇</xsl:text> 
```

如果没有，那么您的堆栈中存在更深层次的 Unicode 问题，例如，没有以 UTF-8 提供输出（在这种情况下，您应该先解决该问题），或者使用不支持 Unicode 的文本编辑器（在这种情况下，您可以使用数字字符引用`L&#775;`，或者`L&#x0307;`如果您愿意）。

如果您看到点出现在一个意想不到的地方，那是您的浏览器/编辑器中的字体呈现问题，与 XML 无关。当您使用组合变音符号（例如长音符号 (U+0304, 772) 或上面的点 (U+0307, 775)）来表示 X-macron 和 L-dot 等不常见的组合时，这些组合不会出现在任何现代语言中，您正在使用的字体确实不太可能具有该组合的良好预组合字形。

相反，你会得到两个形状的粗略叠加，它们是否完全对齐将是运气。最坏的情况是，字体根本没有组合字符的字形，在这种情况下，显示引擎通常会完全回退到不同的字体，这使得结果更不可能漂亮。

一般来说，常见的字体/网络浏览器在结合真实语言使用的常见变音符号方面并没有那么好。尝试将该功能用于任意组合最有可能导致混乱的 Z̛al͏go̵t̸e͝x҉t̷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:01:24.987

您根本不需要 CDATA。你可以只使用`L̇`.

在此，CDATA 用于阻止字符引用被`L̇`XSL 引擎转换为 a。也就是说，这`&#772;`是输出而不是`L̇`.

不过没有任何必要，因为您可以在`L̇`任何地方使用 raw 。

```
<xsl:text disable-output-escaping="yes">L̇</xsl:text> 
```

# java - 如何在 GWT 中检查时间戳的正则表达式？

> ID：14662597
> 
> 赞同：3
> 
> 时间：2013-02-02T13:56:11.363
> 
> 标签：java, regex, gwt

以下时间戳格式的正则表达式是什么

```
YYYY-MM-DD HH:mm:ss.S

YYYY-MM-DD HH:mm:ss.S AM/PM

YYYY-MM-DD HH:mm:ss.S AM/PM Z

YYYY-MM-DD HH:mm:ss.S Z 
```

在哪里

```
Y: year, 
M: Month,
D: Date,
H: hour,
m: minute,
s: second,
S: Milisecond 3 digit only,
Z: Time zone. 
```

我得到字符串格式的时间戳格式，所以想验证它。

如何在 GWT 中检查上述正则表达式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T14:07:04.953

只是一些简单的事情，只描述这样的模式：

```
^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}(?: [AP]M)?(?: [+-]\d{4})?$ 
```

因为任何使用正则表达式进行真实日期验证的尝试听起来都是错误的。

我将大写 Z 作为 RFC822 时区，正则表达式需要更改以符合 TZD 或一般文本时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:31:54.693

除了`Datejs`在 js 上中继来检查日期字符串之外，Gwt 还带有[DateTimeFormat](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/i18n/client/DateTimeFormat.html)来解析日期字符串和格式日期，并支持语言环境。`IllegalArgumentException`如果解析的字符串与预期的格式不匹配，它会引发 a 。

```
String dateStr = "2011-04-21 20:37:36.999 -0800";
String fmt = "yyyy-MM-dd HH:mm:ss.S Z"; // your 4th case: YYYY-MM-DD HH:mm:ss.S Z
DateTimeFormat format = DateTimeFormat.getFormat(fmt);
try {
  Date date = format.parse(dateStr);
  System.out.println("Validated: " + date);
} catch (IllegalArgumentException e) {
  System.out.println("Validation error: " + e.getMessage());
}

dateStr = "2011-04-21 08:37:36.999 PM -0800"; // your 3rd case YYYY-MM-DD HH:mm:ss.S AM/PM Z
fmt = "yyyy-MM-dd hh:mm:ss.S a Z";
format = DateTimeFormat.getFormat(fmt);
try {
  Date date = format.parse(dateStr);
  System.out.println("Validated: " + date);
} catch (IllegalArgumentException e) {
  System.out.println("Validation error: " + e.getMessage());
} 
```

您没有说格式字符串是固定的还是可以在执行验证之前在运行时提供。因此，在第二种情况下，您需要使用`replace`将 'Y' 更改为 'y'，并将 'AM/PM' 更改为 'a'，它们是`DateTimeFormat`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:16:52.610

我会说使用[Datejs](http://www.datejs.com/)

否则，您将需要进行大量编码，而正则表达式并不是验证时间戳及其是否有效的最佳选择。Datejs 将检查日期的有效性，然后您将收到一个 Date 对象或 null（如果它无效！）。

> Date.parse("2013-02-02 12:01:01.000", "yyyy-MM-dd HH:mm:ss.u");

**有关更多信息，请参阅：**

> Datejs [API 文档](http://code.google.com/p/datejs/wiki/APIDocumentation)
> 
> Datejs[格式规范](http://code.google.com/p/datejs/wiki/FormatSpecifiers)

# image - Okami sumie 风格渲染算法

> ID：14662600
> 
> 赞同：0
> 
> 时间：2013-02-02T13:56:27.290
> 
> 标签：image, algorithm, graphics, 3d, rendering

嘿，所以我想知道是否有人对如何以用于视频游戏 Okami 的风格渲染场景的论文/算法有任何阅读建议。

我自己做了一些搜索，发现了一些“sumie”风格的论文，但是那里提出的算法是黑白的，我正在寻找有颜色的东西。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:54:41.940

您正在寻找[非真实感渲染](http://en.wikipedia.org/wiki/Non-photorealistic_rendering)。算法有几十种，我不能告诉你游戏中到底用的是哪一种，可能是更多的算法加在一起。[无论如何，您可能会在计算机图形学中的风格化描述](http://www.red3d.com/cwr/npr/)和谷歌搜索中找到一些算法和技术。

# html - 禁止使用 HTML 过滤器“证明”

> ID：14662604
> 
> 赞同：2
> 
> 时间：2013-02-02T13:56:51.643
> 
> 标签：html, plone, filtering

在我的 Plone (4.2) 站点上，我有几个用户经常从 Word 或 OpenOffice 中粘贴文本。这些文本有时对齐为“对齐”，而我不想在网站上允许对齐的文本块（因为它看起来很难看）。

在 Plone 控制中心的“HTML 过滤器设置”下，似乎无法禁止某个 html 属性设置——可以允许匹配和标记属性。我想禁止所有`<xxx align="justify">`，同时仍然允许元素与`<xxx align="right">`.

有没有办法根据 Plone 中的属性值进行 HTML 过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:45:19.250

您可以在 Plone 的 html 过滤器中禁止属性对齐。然后使用默认对齐方式，即“左”。

现在最常见的对齐文本的方法是使用 css: 。该 html 过滤器中也可能不允许使用 css 属性“text-align”。请不要忘记从 tinyMCE 工具栏中删除“调整”按钮。

# php - PHP 检测并删除不必要的价格

> ID：14662608
> 
> 赞同：-2
> 
> 时间：2013-02-02T13:57:14.747
> 
> 标签：php

对于发票，我想确定我的总金额是否有不必要的一分钱。例如 5.01 美元或 5.51 美元。如果它检测到美分，那么我运行一个 if 语句来删除美分：负 0.01 例如。更改`30.51`并`0.01`发出警告信息

并且
`30.51`还要`0.51`

并且
`30.51`还要`1`

两者都来自 POST，因此它们都是**PHP 字符串**。

但不用担心 - 多亏了 dmayo，我现在可以开始工作了

```
$pieces = explode(".", $TotalAmt);
echo "<br>p1:".$pieces[1]; // piece2
$p1 = $pieces[1];
$spl1 = str_split($p1);
$TAmttmp = 0; 
//echo "<br>sp11:".$spl1; // error convert array to string
$TAmttmp = $spl1[0];
echo "<br>TAmttmp: with useless cent".$TAmttmp;
echo "<br>IT:".$IT;
if ($TAmttmp == 0.01) //so if there is 1 cent subtract the useless cent.
$TAmt = $TAmt - 0.01;
echo "<br>TAmt: with useless cent".$TAmt;
echo "<br>TAmt: without useless cent".$TAmt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:12:10.953

@Gumbo 是对的，我们需要知道您的转换背后的逻辑以提供准确的答案。

你可以做一个爆炸：

```
$var = explode('.',$_POST['val']);
$digits = $var[1]; // this will give you the digits after the decimal point 
```

现在你可以根据你的逻辑做你需要的事情了。

您也可以使用 a`substr()`找到小数点的位置（总是从右边三个位置？），然后获取子字符串。

不确定哪个会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:23:54.680

我不知道你到底想要什么，但也许这会有所帮助：

```
$nr = "30.51";

echo round($nr - floor($nr), 2); // 0.51    
echo round(($nr * 10 - floor($nr * 10)) / 10, 2); // 0.01    
echo round(($nr * 10 - floor($nr * 10)) * 10); // 1 
```

# android - 将来自相机的图像与来自drawables的图像合并

> ID：14662611
> 
> 赞同：1
> 
> 时间：2013-02-02T13:57:48.693
> 
> 标签：android, bitmap

我正在尝试合并 2 个图像，一个是来自相机的位图，第二个是存储在 drawables 中的 .png 文件。我所做的是我将这两个图像用作位图，并尝试使用画布将它们合并，如下所示：

```
Bitmap topImage = BitmapFactory.decodeFile("gui.png");
Bitmap bottomImage = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);

Canvas canvas = new Canvas(bottomImage);
canvas.drawBitmap(topImage, 0, 0, null); 
```

但我一直收到“位图大小超过 VM 预算”错误。我几乎尝试了所有方法，但它仍然不断抛出此错误。还有另一种合并2张图片的方法吗？我需要做的很简单 - 我需要拍照并将其与存储在可绘制对象中的 .PNG 图像合并保存。例如，这个应用程序非常接近我的需要 - [https://play.google.com/store/apps/details?id=com.hl2.hud&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5obDIuaHVkIl0](https://play.google.com/store/apps/details?id=com.hl2.hud&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5obDIuaHVkIl0)。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:02:58.873

请参阅下面的代码以组合两个图像。此方法返回组合位图

```
public Bitmap combineImages(Bitmap frame, Bitmap image) {
        Bitmap cs = null;
        Bitmap rs = null;

        rs = Bitmap.createScaledBitmap(frame, image.getWidth() + 50,
                image.getHeight() + 50, true);

        cs = Bitmap.createBitmap(rs.getWidth(), rs.getHeight(),
                Bitmap.Config.RGB_565);

        Canvas comboImage = new Canvas(cs);

        comboImage.drawBitmap(image, 25, 25, null);
        comboImage.drawBitmap(rs, 0, 0, null);
        if (rs != null) {
            rs.recycle();
            rs = null;
        }
        Runtime.getRuntime().gc();
        return cs;
    } 
```

您可以根据您的要求更改高度和宽度希望这会有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:27:41.903

图片有多大？我只在尝试将大图像加载到内存时遇到了这个问题。

您解码的字节数组实际上是图像吗？

通过快速查看 android 文档，您可以使用可能在这种情况下工作的默认相机应用程序捕获图像。

[http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

另请参阅此问题：[从相机捕获图像并在活动中显示](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)

**编辑：**如果图像非常大，您可能还需要缩小相机中的图像。有关详细信息，请参阅我链接到的 android 页面的末尾。

# objective-c - 屏幕底部的 UITextField 看不见

> ID：14662613
> 
> 赞同：0
> 
> 时间：2013-02-02T13:57:58.007
> 
> 标签：objective-c, uitextfield, visibility

`UITextField`在屏幕底部使用它，当键盘打开时，用户看不到他在写什么，因为键盘覆盖了文本字段。

有什么方法可以查看您写的内容或将文本字段页面向上推？

```
userName = [[UITextField alloc] initWithFrame:CGRectMake(133, 280, 200, 30)];  
    [userName setDelegate:self];
    [userName setText:@"NickName"];
    [userName setBorderStyle:UITextBorderStyleRoundedRect];
    [userName setTextColor: [UIColor colorWithRed:0 green:0 blue:0 alpha:1.0]];
    [[[[CCDirector sharedDirector] view] window] addSubview:userName]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:21:45.183

我认为..你必须使用带有 Scrollview 的文本字段。这样，用户可以向上滚动，从而可以看到他正在输入的内容。

更新：我找到了[这个](http://mobiledevelopertips.com/user-interface/adjust-textfield-hidden-by-keyboard.html)链接，可以满足你的需要。

# windows-phone-7 - WebBrowser 作为 ListItem 并滚动

> ID：14662616
> 
> 赞同：0
> 
> 时间：2013-02-02T13:58:08.467
> 
> 标签：windows-phone-7, webbrowser-control, windows-phone-8

这个关于 WP8 项目的问题。我有一个 LongListSelector，下面有图片和 html 格式的文本。目前，每个图片都作为列表中的一个项目实现。最后一个带有浏览器的项目有自己的模板，并显示 WebBrowser 而不是图片。我预计这个项目的行为类似于 TextBox，我可以通过与 LongListSelector 交互来滚动它。

但是这个 WebBrowser 里面有它自己的滚动并拦截任何周围的滚动事件。因此，每当我向下滚动列表以将 WebBrowserControl 显示到整个屏幕时，我都无法返回图片。

请帮我解决这个问题。什么是合适的解决方案？我需要一张单独的图片，因为想在上面实现“点击”逻辑。而且我也想拥有 WebBrowser（但更喜欢让它类似于 RichTextBox （我在 WP8 中找不到））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T13:56:11.073

使用 ListBox.ItemTemplate 以及 DataTemplate 和内部 dataTemplate 我们可以自定义创建 xaml 标记！

# performance - 在 EntityFramework 中将查询编译与执行分开

> ID：14662617
> 
> 赞同：0
> 
> 时间：2013-02-02T13:58:09.670
> 
> 标签：performance, entity-framework, ef-code-first

我们有一个性能问题，它缩小到我们的应用服务器。一种可能的怀疑是，在某些情况下，编译 Linq2Entity 查询的时间变得过长。我们正在扩展我们的日志系统以包含已执行的 sql。我打算使用的`.ToString()`方法`IQueriable`来获取sql。

1.  这会强制 EF 编译查询吗？
2.  `IQueriable`当我们枚举并避免重新编译查询时，EF 会使用这个计划吗？
3.  这有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:36:29.367

1.  是 - EF 将通过查询管道（包括生成实际 SQL 查询的提供程序）运行您的查询，
2.  这取决于 - 如果您在 .NET Framework 4.5 上使用 EF，查询会自动编译和缓存（有关更多详细信息，请参阅[性能注意事项](http://msdn.microsoft.com/en-in/data/hh949853)）。
3.  如果查询被编译和缓存，可能不会。

# java - 是否有 GraphViz 的 3D 版本？

> ID：14662618
> 
> 赞同：9
> 
> 时间：2013-02-02T13:58:10.193
> 
> 标签：java, perl, graphviz

我发现 GraphViz 易于使用，但它呈现 2D 图形。是否有渲染 3D 图形的等价物？节点可以保持 2D，但 3D 图形会很棒。如果没有，是否有替代方法，例如使用 Perl 模块或 Java 包？

我的搜索只导致 3D 游戏引擎。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-28T20:01:27.427

使用 GraphViz，您可以直接渲染到 VRML：

```
dot -Tvrml graphviz.dot > graphviz.vrml 
```

然后你可以使用这个工具（一个可以从命令行运行的 java jar）将 VRML 转换为 X3D：

[http://www.deem7.com/vrmlmerge/howto.php](http://www.deem7.com/vrmlmerge/howto.php)

然后使用以下技术在浏览器中查看 X3D 文件：

[http://doc.x3dom.org/tutorials/models/inline/index.html](http://doc.x3dom.org/tutorials/models/inline/index.html)

**更新*（多年后）***：deem7.com 似乎已经消失了，虽然您可以通过 Wayback 机器找到原始工具，但似乎还有其他在线工具可以做到这一点。示例：[https ://doc.instantreality.org/tools/x3d_encoding_converter/](https://doc.instantreality.org/tools/x3d_encoding_converter/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T18:25:01.627

我所知道的没有一个很好的交互工具，但你可以在[Pajek](http://vlado.fmf.uni-lj.si/pub/networks/pajek/)中生成 3D 布局，然后在网站中使用[King 查看器](http://kinemage.biochem.duke.edu/software/king.php)。[你可以在这个YouTube 视频](http://www.youtube.com/watch?v=W1ebqyfCk4I)中看到一个例子，这里有一个截图：

![在此处输入图像描述](../Images/8341387f508dfc39c0804c4611e1e089.png)

正如您所知，虽然 3D 图形可视化看起来很漂亮，但由于大量遮挡，它们实际上在显示图形结构方面很差。这对于没有交互的静态图像来说更糟。我强烈建议使用良好的 2D 图形可视化系统，例如[Gephi](https://gephi.org/)、[NodeXL](https://nodexl.codeplex.com/)或[Cytoscape](http://cytoscape.org/)。*免责声明：我是 NodeXL 项目的顾问。*

# php - 如何创建具有多页最多 5 页的会话

> ID：14662619
> 
> 赞同：-2
> 
> 时间：2013-02-02T13:58:17.047
> 
> 标签：php

几天来一直在研究这个脚本，任何帮助请如何更正这个脚本：

我想创建一个适用于所有页面的 1 脚本：

```
 //Start session
session_start();

//Check whether the session variable SESS_MEMBER_ID is present or not
if(!isset($_SESSION['SESS_MEMBER_ID']) || (trim($_SESSION['SESS_MEMBER_ID']) == 'TRUE')) {
    header("location: access-denied.php");
    exit();
} 
```

错误是：警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /homepages/46/d445712420/htdocs/user/portugal

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:09:43.830

您在`session_start()`调用之前有一些输出，因此 HTTP 标头已经发送，php 需要修改这些以启动会话，并且不再可能。重新组织您的代码，以便`session_start()`在您发送任何输出之前进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:03:03.610

您确定要将其与“TRUE”字符串进行比较吗？我不知道您期望什么值，但尝试 $var == TRUE 可能会有所帮助。

# c# - 使用 RenderTargetBitmap 和 PngBitmapEncoder 时的 PNG 大小增长

> ID：14662625
> 
> 赞同：0
> 
> 时间：2013-02-02T13:59:03.990
> 
> 标签：c#, wpf, png, imaging, tiling

我正在使用一种方法将一些平铺图像合并为一个图像。但是如果我将它应用到四个 30kb-PNG 图像，生成的 PNG 图像将是 500K（比我预期的多 4 倍）

这是我正在使用的代码的一部分（*由 Cédric Bignon 建议*）：

```
BitmapFrame frame1 = BitmapDecoder.Create(new Uri(path1), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();
BitmapFrame frame2 = BitmapDecoder.Create(new Uri(path2), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();
BitmapFrame frame3 = BitmapDecoder.Create(new Uri(path3), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();
BitmapFrame frame4 = BitmapDecoder.Create(new Uri(path4), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();

// Gets the size of the images (I assume each image has the same size)
int imageWidth = frame1.PixelWidth;
int imageHeight = frame1.PixelHeight;

// Draws the images into a DrawingVisual component
DrawingVisual drawingVisual = new DrawingVisual();
using (DrawingContext drawingContext = drawingVisual.RenderOpen())
{
    drawingContext.DrawImage(frame1, new Rect(0, 0, imageWidth, imageHeight));
    drawingContext.DrawImage(frame2, new Rect(imageWidth, 0, imageWidth, imageHeight));
    drawingContext.DrawImage(frame3, new Rect(0, imageHeight, imageWidth, imageHeight));
    drawingContext.DrawImage(frame4, new Rect(imageWidth, imageHeight, imageWidth, imageHeight));
}

// Converts the Visual (DrawingVisual) into a BitmapSource
RenderTargetBitmap bmp = new RenderTargetBitmap(imageWidth * 2, imageHeight * 2, 96, 96, PixelFormats.Pbgra32);
bmp.Render(drawingVisual);

// Creates a PngBitmapEncoder and adds the BitmapSource to the frames of the encoder
PngBitmapEncoder encoder = new PngBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create(bmp));

// Saves the image into a file using the encoder
using (Stream stream = File.OpenWrite(pathTileImage))
    encoder.Save(stream); 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:36:37.117

不知道原始图像很难说。PNG 支持多种颜色模型和压缩。例如，如果 4 张原始图像具有（不同的）调色板，并且构图必须采用真彩色格式，那么总尺寸可能会超过原始尺寸的 4 倍。

# r - 在 Knitr 中为 md 或 HTML 输出设置页面宽度

> ID：14662626
> 
> 赞同：8
> 
> 时间：2013-02-02T13:59:10.050
> 
> 标签：r, markdown, knitr, pandoc

我有 knitr 来创建我的统计分析的输出以及数字。我的分析有许多由标题标记的级别。为了获得带有目录的漂亮 html 页面，我使用“pander”（pandoc R 包）将我的 .md 文件转换为 html，因为 knitr 不会在 html 文件中嵌入目录。

问题：当我使用 pander 时，它会创建一个固定宽度的页面（很窄），我的大图需要左右滚动。有没有办法调整 .md 页面宽度或直接 pander 以输出具有自动宽度设置的页面（调整到任何屏幕宽度）。

我确实花时间寻找解决方案：要么让 knitr 芳香地嵌入 TOC，要么将宽度参数嵌入到 r 代码中

```
```{r set-options, echo=FALSE, cache=FALSE}
options(width=600)
opts_chunk$set(comment = "", warning = FALSE, message = FALSE, echo = TRUE, tidy = FALSE,       size="small")

``` 
```

或调整pader输出参数但没有任何运气。

如果有人能解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T17:01:01.507

`knitr`不直接处理markdown渲染，可以通过[package](http://cran.r-project.org/package=markdown)`*.md`编译到，其中有一个wrapper函数。要获取目录，您可以将选项添加到，例如`*.html`[`markdown`](http://cran.r-project.org/package=markdown)`knitr``knit2html()``toc``markdown::markdownToHTML()`

```
library(knitr)
knit2html('foo.Rmd', options = c('toc', markdown::markdownHTMLOptions(TRUE))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:18:20.633

为避免滚动，您可以使用`out.width`和`out.height`来固定最终输出文件中绘图的宽度和高度。

```
```{r fig.width=7, fig.height=6,out.width=250,out.height=400}
plot(cars)
``` 
```

# html - 在 WordPress 中创建客户视频评论页面

> ID：14662629
> 
> 赞同：0
> 
> 时间：2013-02-02T13:59:38.160
> 
> 标签：html, wordpress, video, client

我们正在寻找一种简单的方法来与我们的客户分享我们正在进行的工作视频 - 以获取反馈。

我们正在使用 WordPress。

我们希望避免使用电子邮件/ftp/youtube/vimeo 等...并且只需让我们的客户访问我们提供给他们的网站链接。

有没有办法让我得到以下信息：

*   在我们的网络服务器上创建一个目录“client_0001”
*   将我们客户的视频上传到目录
*   将服务器“ [http://mysite.com/client_0001](http://mysite.com/client_0001) ”的链接发送给我们的客户
*   当客户访问链接时，他们将看到我们的 wordpress 网站，但不是一些帖子/页面，而是网站模板，页面中包含我们上传的每个视频的 html5video/mp4 播放器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:40:44.947

**我希望**十年前我在 Dreamweaver 中手工制作所有这些客户端页面时拥有 WordPress...

现在唯一需要注意的是可以直接在 WP 中上传的文件大小。但这可以通过 FTP 上传到自定义文件夹并执行视频播放器[**短代码**](http://codex.wordpress.org/Shortcode_API)来渲染播放器 + 后帧来解决：

`[vplay file="http://example.com/custom/video.mp4" poster="http://example.com/wp-content/uploads/picture.jpg"]`

一个自定义[**页面模板**](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)，例如，带有自定义页眉和页脚，在页面创建后会有一个类似的 URL：`http://example.com/clients/project-name/`。

为了客户的方便，密码保护，或网站的某些会员资格受限制的内容。为内部沟通启用评论表单。如有必要，图片库。在其他好东西中。

YouTube 和 Vimeo 的优点在于隐私选项和为您进行网络格式渲染。在这个 WordPress 答案，[仪表板中的视频教程中](https://wordpress.stackexchange.com/a/54043/12615)，我写了一些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:46:40.220

没有真正的理由使用 Wordpress 执行此操作。事实上，在 Wordpress 中做这件事肯定会做更多的工作。一个不错的方法可能是使用您的模板/html5 播放器创建一个 php 页面，并让该页面解析一个 GET 变量以显示视频。这样您就可以向您的客户发送链接，例如[http://mysite.com/video_preview.php?videofile=somevideofile.mp4](http://mysite.com/video_preview.php?videofile=somevideofile.mp4)

例如：

目录结构：

```
example.com/
    previews/
        video_preview.php
        someVideo.mp4 
```

然后在 video_preview.php 中，您可以解析一个 GET 变量并显示您想要的任何页面。这是一个粗略的例子。

```
<?php $video = $_GET['videofile'] ?>
<html>
// The HTML you want to use for the template.  All CSS/JS, etc, etc...make it look pretty. (or dow't)
// Then you'd call your video player, however you want to do that.  Basically, you just dynamically choose the video file based on the URL your client clicks.
<player src=<?php echo $video ?>
</html> 
```

# java - 持久性，oracle 瘦，ORA-12505，TNS 侦听器当前不知道 SID

> ID：14662631
> 
> 赞同：2
> 
> 时间：2013-02-02T14:00:02.633
> 
> 标签：java, oracle, jpa, persistence

我正在使用 11 g express edition，Eclipse Juno，Java 6

Oracle 已启动并运行，甚至尝试立即关闭和启动，但未收到 SID 侦听器错误

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

  <persistence-unit name="default" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>com.crspdemo.Employee</class>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:jsfDatabase"/>
      <property name="javax.persistence.jdbc.password" value="admin"/>
      <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.driver.OracleDriver"/>
      <property name="javax.persistence.jdbc.user" value="system"/>
      <!--<property name="eclipselink.ddl-generation" value="create-tables"/>-->
    </properties>
  </persistence-unit>

</persistence> 
```

**错误：**

```
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException 
```

内部异常：java.sql.SQLException：侦听器拒绝连接并出现以下错误： **ORA-12505，TNS：侦听器当前不知道连接描述符中给出的 SID**

**Listner.ora**

![监听器.ora](../Images/6823030912641af340411e8b22fd03a0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:21:17.960

尝试为 XE 使用默认 SID：

```
<property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:XE"/> 
```

# javascript - JSON数据中的jQGrid celledit显示URL未设置警报

> ID：14662632
> 
> 赞同：0
> 
> 时间：2013-02-02T14:00:14.590
> 
> 标签：javascript, jquery, jqgrid

我需要从服务器加载 JSON，并且我想让用户能够单击并编辑该值。

> 但是当他们编辑时，它不应该调用服务器。我的意思是我不会立即更新。所以我不想要editurl。所以我尝试了“ClientArray”，但它仍然显示 Url 未设置警报框。**但是当用户单击“添加评论项”按钮**时，我需要所有已编辑的值，此按钮将触发**AddSelectedItemsToSummary()**以将这些值保存在服务器中

**MVC HTML 脚本**

```
<div>
<table id="persons-summary-grid"></table>
<input type="hidden" id="hdn-deptsk" value="2"/>
<button id="AddSelectedItems" onclick="AddSelectedItemsToSummary();" />
</div>

$(document).ready(function(){
   showSummaryGrid(); //When the page loads it loads the persons for Dept
}); 
```

**JSON数据**

```
 {"total":2,"page":1,"records":2,
     "rows":[{"PersonSK":1,"Type":"Contract","Attribute":"Organization
           Activity","Comment":"Good and helping og"},
          {"PersonSK":2,"Type":"Permanant","Attribute":"Team Management",
          "Comment":"Need to improve leadership skill"}
    ]} 
```

**jQGRID代码**

```
var localSummaryArray;

function showSummaryGrid(){

 var summaryGrid = $("#persons-summary-grid");

 // doing this because it is not firing second time using .trigger('reloadGrid')
 summaryGrid.jqGrid('GridUnload'); 
 var deptSk = $('#hdn-deptsk').val();
 summaryGrid.jqGrid({
 url: '/dept/GetPersonSummary',
 datatype: "json",
 mtype: "POST",
 postData: { deptSK: deptSk },
 colNames: [
            'SK', 'Type', 'Field Name', 'Comments'],
colModel: [
           { name: 'PersonSK', index: 'PersonSK', hidden: true },
           { name: 'Type', index: 'Type', width: 100 },

           { name: 'Attribute', index: 'Attribute', width: 150 },
           { name: 'Comment', index: 'Comment', editable: true, 
                    edittype: 'textarea',  width: 200 }
         ],

cellEdit: true,
cellsubmit: 'clientArray',
editurl: 'clientArray',
rowNum: 1000,
rowList: [],        
pgbuttons: false,     
pgtext: null,         
viewrecords: false,    
emptyrecords: "No records to view",
gridview: true,
caption: 'dept person Summary',
height: '250',

jsonReader: {
    repeatitems: false

},
loadComplete: function (data) {

        localSummaryArray= data;
        summaryGrid.setGridParam({ datatype: 'local' });
        summaryGrid.setGridParam({ data: localSummaryArray});
    }

});
) 
```

**按钮点击功能**

```
function AddSelectedItemsToSummary() {

 //get all the items that has comments 
 //entered using cell edit and save only those.
 // I need to prepare the array of items and send it to MVC controller method
 // Also need to reload summary grid

} 
```

有人可以帮忙吗？**为什么我收到那个 URL 未设置错误？**

**编辑：**

> 此代码在 loadComplete 更改后工作。在它显示没有 URL 设置警报之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:20:29.413

我不明白您描述的单元格编辑问题。此外，您写道“当用户连续单击 + 图标时，我需要编辑的值”。“+”图标在哪里？你的意思是“trash.gif”图标吗？如果您想使用**单元格编辑**，您如何想象在单击行上的图标的情况下？单击“trash.gif”图标时应该开始编辑哪个单元格？您可以开始编辑其他一些单元格作为带有“trash.gif”图标的单元格是[editCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing#methods)，但我认为这对用户来说不会很舒服，因为从用户的角度来看，他将开始编辑一个单元格单击另一个单元格。好像我很不舒服。可能你想实现[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)？

您的代码中的一个明显错误是使用`showSummaryGrid`inside of `RemoveFromSummary`。该函数`RemoveFromSummary` **创建**jqGrid 而不仅仅是填充它。所以一个人应该**只调用一次**。要刷新网格的主体，您应该调用`$("#persons-summary-grid").trigger("refreshGrid");`。而不是使用`postData: { deptSK: deptSk }`您应该使用

```
postData: { deptSK: function () { return $('#hdn-deptsk').val(); } } 
```

*如果触发refreshGrid*就足够了，它将向服务器发送来自`'#hdn-deptsk'`. 有关更多信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。

**更新**：我无法重现您描述的问题，但我准备[了满足您需要的演示](http://www.ok-soft-gmbh.com/jqGrid/CellEditWithJson-Murali.htm)（如果我正确理解您的要求）。您可能需要的代码中最重要的部分将在下面找到

```
$("#AddSelectedItems").click(function () {
    var savedRow = summaryGrid.jqGrid("getGridParam", "savedRow"),
        $editedRows,
        modifications = [];
    if (savedRow && savedRow.length > 0) {
        // save currently editing row if any exist
        summaryGrid.jqGrid("saveCell", savedRow[0].id, savedRow[0].ic);
    }
    // now we find all rows where cells are edited
    summaryGrid.find("tr.jqgrow:has(td.dirty-cell)").each(function () {
        var id = this.id;
        modifications.push({
            PersonSK: id,
            Comment: $(summaryGrid[0].rows[id].cells[2]).text() // 2 - column name of the column "Comment"
        });
    });
    // here you can send modifications per ajax to the server and call
    // reloadGrid inside of success callback of the ajax call
    // we simulate it by usage alert
    alert(JSON.stringify(modifications));
    summaryGrid.jqGrid("setGridParam", {datatype: "json"}).trigger("reloadGrid");
}); 
```

# javascript - utf - xmlhttp请求对象的.open()方法的url参数中的8个字符

> ID：14662633
> 
> 赞同：0
> 
> 时间：2013-02-02T14:00:14.790
> 
> 标签：javascript, ajax, utf-8

我有一个 Web 服务，它尝试在一个大数据库中查找以在客户端 html 页面中输入的这三个字母开头的所有元素：

这是 Java 中的代码 - 用于我的 Web 服务

```
public class locselall 
{

public String FindEl(String myel ) throws ClassNotFoundException 
{

    String strXml = "<response>";

    Class.forName("org.postgresql.Driver");
    try 
    {
        conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/plovdivbizloca", "postgres", "tan");
    }

    catch (SQLException ex) 
    {

        ex.printStackTrace();
    }

    Statement mystmt = null;
    String selectQuery = "select biz_subject from pl_biz WHERE biz_subject ILIKE '"+ myel + "%'";

    try {
        mystmt = conn.createStatement();
        ResultSet mysr = mystmt.executeQuery(selectQuery);
        ResultSetMetaData rsmd = mysr.getMetaData();
        int colCount = rsmd.getColumnCount();
        int numberrow = 0;
        strXml += "<rows>";

        while (mysr.next()) 
        {
            strXml += "<row id= '" + numberrow + "'>";
            for (int i = 1; i <= colCount; i++) 
            {
                String elementname = rsmd.getColumnName(i);
                String elementValue = mysr.getString(i);
                strXml += "<colunm colname='" + elementname
                        + "' colvalue='" + elementValue + "'/>";
            }
            numberrow++;
            strXml += "</row>";
        }
        strXml += "</rows>";

    } 
    catch (Exception ex) 
    {

    }
    strXml += "</response>";

    return strXml;
} 
```

}

当我在浏览器中输入时没有问题

```
http://localhost:9091/locselall/services/locselall/FindEl?myel=СИТ 
```

一切正常；

* * *

这是客户端的html页面

```
<html>
<head>
<script>

var xmlhttp;
    if (window.XMLHttpRequest) 
    {
        xmlhttp = new XMLHttpRequest();
    } 
    else 
    {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
function triming()
{

var strInput= document.getElementById('txtInput').value;
//var newstr = strInput.replace(/[\p{L}]/gi, '');
var newstr = strInput.replace(/[^\u0400-\u04FF0-9]/gi, '');

         xmlhttp.onreadystatechange = function() 
        { 
            if (xmlhttp.readyState==4 && xmlhttp.status==200) 
            {
                alert(xmlhttp.responseText);
                //var xmlObj = xmlhttp.responseXML;   
                //var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

            }

        }

        var url = "http://localhost:9091/locselall/services/locselall/FindEl?myel="+ newstr;
        alert (url);

        document.getElementById('pr').innerHTML = url;

        xmlhttp.open("GET", url, true);
        xmlhttp.send(); 

}

</script>

</head>
<body>
<input type= "text" id="txtInput"   />
<input type="button" id="btnSearch" onClick = "triming();"/>
<div id="pr"></div>

</body>
</html> 
```

如您所见，我有一个关于 url 的警报，它与我在浏览器中输入以测试我的 web 服务的 url 完全相同 - 但这次我没有得到任何记录；服务器只返回，这意味着当它到达要选择的语句时，它不能被执行

我认为问题在于我的变量 newstr 应该包含 utf - 8 元素并且它没有正确发送到服务器。结果它无法选择任何记录！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:50:19.583

好吧，问题是，当你`http://localhost:9091/locselall/services/locselall/FindEl?myel=СИТ`在 Chrome 等浏览器中访问 url 时，它实际上会向这个 URL 发出请求：

```
http://localhost:9091/locselall/services/locselall/FindEl?myel=%D0%A1%D0%98%D0%A2 
```

为确保这也发生在代码中，您必须使用`encodeURIComponent`：

```
var url = "http://localhost:9091/locselall/services/locselall/FindEl?myel="+ 
          encodeURIComponent(newstr); 
```

# entity-framework - 如何在 EF (MVC4 Visual Studio 2012) 中禁用代码优先功能

> ID：14662643
> 
> 赞同：15
> 
> 时间：2013-02-02T14:01:02.510
> 
> 标签：entity-framework, asp.net-mvc-4, visual-studio-2012, ef-code-first

如何在 EF (Visual Studio 2012) 中禁用代码优先功能

我正在使用 Visual Studio 2012、MVC4（Internet 应用程序模板）。

我想使用 EF，但不想使用它的代码优先功能。我希望应用程序出错，而不是根据我的代码创建或修改我的数据库。（我无法忍受这种我的数据库在幕后被更改的感觉......我希望应用程序使用我创建的确切数据库......如果有任何需要更改的东西，我会我自己做）

新的 Ef (VS2012) 有可能吗？

我看到很多人问这个问题，但到目前为止我无法找到答案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-02T15:01:29.567

您可以使用 Code First 并确保您的数据库在更改模型时永远不会被更新或覆盖，方法是将数据库初始化程序设置为`null`：

```
Database.SetInitializer<MyDbContext>(null); 
```

它是类的静态方法，`Database`应在应用程序开始时调用，例如在 global.asax 或上下文类的静态构造函数中。这样做您必须手动更改模型类和数据库模式，以便它们匹配。

您还可以使用逆向工程师功能从现有数据库创建 Code First 模型。这里解释：http: [//msdn.microsoft.com/en-us/data/jj200620](http://msdn.microsoft.com/en-us/data/jj200620)

或者，如果您根本不想使用 Code First 并与模型设计器一起工作，您可以使用 Database First 方法，此处解释：http: [//msdn.microsoft.com/en-us/data/jj206878](http://msdn.microsoft.com/en-us/data/jj206878)

关于所有可能选项的概述在这里：http: [//msdn.microsoft.com/en-us/data/ee712907.aspx](http://msdn.microsoft.com/en-us/data/ee712907.aspx)

# android - Android：仅在离开应用程序时显示状态栏通知

> ID：14662644
> 
> 赞同：3
> 
> 时间：2013-02-02T14:01:05.710
> 
> 标签：android, android-notifications

我有一个包含四个活动的应用程序，在应用程序中，用户会发现自己不断地浏览这四个活动。该应用程序还在后台有一个正在进行的服务，该服务显示一个状态栏通知，并监听将出现在通知上的内容的更改。

目前，只要用户启动需要显示通知的操作，服务就会显示通知，因此，即使您仍在使用应用程序，也会显示通知。期望的场景是仅在用户离开应用程序时才显示通知。

我试图覆盖这样的生命周期方法：

```
 @Override
protected void onPause() {  
    Intent intent = new Intent();
    intent.setAction(MyService.ACTION_DISPLAY_PENDING_NOTIFICATION);
    sendBroadcast(intent);
    super.onPause();
}

@Override
protected void onResume() { 
    super.onResume();
    Intent intent = new Intent();
    intent.setAction(MyService.ACTION_CANCEL_NOTIFICATION);
    sendBroadcast(intent);      
} 
```

服务是这样的：

```
@Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if (action.equals(ACTION_DISPLAY_PENDING_NOTIFICATION)) {
            showNotification();
        }

        else if (action.equals(ACTION_CANCEL_NOTIFICATION)) {
            mNotificationManager.cancel(mNotId);
        }
    } 
```

这个，有效。但是，由于在用户导航离开**活动时****随时**发送意图，因此当用户导航通过 4 个活动时，我会遇到不希望的行为和轻微的性能下降。即使从活动 A 转到活动 B，或 4 个活动中的任何组合，该服务也会尝试显示通知。

 **通知会立即取消，因为当新的 Activity B 启动时，它会在**onResume**期间调用 mNotificationManager.cancel(mNotifId) ，但是通知是在离开 Activity A 时被告知服务被告知这样做时构建并显示了几分之一秒的. 这是我想要解决的行为，而不是不必要地构建和显示此通知，

有什么方法可以知道用户何时将活动离开另一个**应用程序**，即主页等；但不在应用程序本身内？

**编辑**：

澄清一下，在 onPause 方法期间活动必须检查两件事，

a) 前台是否有任何先前的活动？为什么？因为用户可以通过按返回来导航出活动，这意味着将显示堆栈上的最后一个活动。为了检查这一点，DennisDrew 的答案会起作用，我们可以这样检查：

```
if(!ForegroundHelper.activityExistsInForeground()){
//show your notification
} 
```

但这不是用户可以导航出活动的唯一方式，用户还可以按下 HomeKey，在这种情况下，无论`activityExistsInForeground()`评估为真还是假，都应该显示通知。

b) 用户是否要去应用程序中的另一个活动？例如，用户在 Activity A 上，A 是目前前台**唯一**的 Activity，用户单击启动 Activity B 的 UI 元素。尽管`activityExistsInForeground()`评估为 false，但用户并**没有**离开应用程序，他正在启动一个新实例以前不在freground 上的活动。

我尝试添加诸如`private boolean launchingNewActivity = false`默认值之类的标志，并将标志设置为`true`当我知道我要去另一个活动时，例如在我的列表视图上单击一个项目时：

```
litview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            launchingNewActivity = true
            startActivity2(arg2);
        }           
    }); 
```

然后在 onPause 期间检查：

```
@Override
protected void onPause() {
    if(!ForegroundHelper.activityExistsInForeground() && launchingNewActivity){
    //show your notification        
} 
```

但是这样做，它**永远不会**显示通知，不知何故，双重检查总是默认为假。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:01:47.743

如果您使用单例引用怎么办？你可以制作一个像这样的类：

```
public static class ForegroundHelper {
    public static boolean[] activityStates = new boolean{false, false, false, false};
    public static final int ACTIVITY_A = 0;
    public static final int ACTIVITY_B = 1;
    public static final int ACTIVITY_C = 2;
    public static final int ACTIVITY_D = 3;

    public static boolean activityExistsInForeground(){
        for(boolean b : activityStates){
            if(b)
                return true;
        }

        return false;
    }
} 
```

然后，在每个活动的 onResume() 中执行：

```
//For your first activity (Activity A)
ForegroundHelper.activityStates[ForegroundHelper.ACTIVITY_A] = true; 
```

在每个活动的 onPause() 中执行：

```
ForegroundHelper.activityStates[ForegroundHelper.ACTIVITY_A] = false; 
```

然后在每个活动的 onStop() 中执行：

```
if(!ForegroundHelper.activityExistsInForeground()){
    //show your notification
} 
```

顺便说一句，我从来没有做过这样的事情，所以我不知道它是否会完全按照我的编码工作......但如果这有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:38:24.877

为此，我扩展了应用程序类并保留了我将在每个 onResume /onPause 方法中设置的“topActivity”，如下所示：

```
public class myApp extends Application{

   private Activity topActivity;
} 
```

现在在每个活动中

```
@Override
protected void onResume() {

((myApp) getApplication()).setOnTopActivity(this);
}

@Override
    protected void onPause() {
        ((myApp) getApplication()).setOnTopActivity(null);
        super.onPause();
    } 
```

这样，当应用程序不可见时，topActivity 为空。因此，在显示您的通知之前，只需检查是否**topActivity==null**。如果是，您的应用程序不在前台，您可以显示您的通知。

如果您无权访问您的应用程序类，您始终可以以静态方式存储此值 :)**

# apache - 停止 .htaccess 将所有内容重定向到

> ID：14662649
> 
> 赞同：0
> 
> 时间：2013-02-02T14:02:06.157
> 
> 标签：apache, .htaccess, mod-rewrite

我已经设置了我的 .htaccess 来重定向来自 http://subdomain.domain.com.tld、http://www.subdomain.domain.com.tld 和 http://domain.com.tld/folder 的请求（文件夹包含子域的内容）到 https://subdomain.domain.com.tld 所以我的 subdomain.domain.com.tld 的单域 SSL 证书设置始终使用。

我的问题是 http://domain.com.tld 也重定向到 https://subdomain.domain.com.tld。我该如何阻止这个？

```
RewriteOptions inherit
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^subdomain.domain\.com.tld
RewriteRule ^(.*)$  https://subdomain.domain.com.tld/$1 [R=301,L]
RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^folder$ "https\:\/\/subdomain\.domain\.com\.tld\/" [R=301,L] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:41:02.420

这些规则应该替换之后的所有内容`RewriteEngine on`：

```
RewriteCond %{HTTP_HOST} ^(www\.)?subdomain\.domain\.com\.tld$ [NC]
RewriteRule ^(.*)$ https://subdomain.domain.com.tld$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^domain\.com\.tld$ [NC]
RewriteRule ^folder/?(.*)$ https://subdomain.domain.com.tld$1 [R=301,L] 
```

第一组规则匹配[http://subdomain.domain.com.tld](http://subdomain.domain.com.tld)和[http://www.subdomain.domain.com.tld](http://www.subdomain.domain.com.tld)

第二组匹配[http://domain.com.tld/folder](http://domain.com.tld/folder)，但不匹配没有“文件夹”部分的[http://domain.com.tld 。](http://domain.com.tld)

编辑：更正了评论中指出的错字和 RewriteConds 中的转义点。

# networking - 使用 iptables 将特定地址上的流量转发到外部主机？

> ID：14662656
> 
> 赞同：2
> 
> 时间：2013-02-02T14:02:29.680
> 
> 标签：networking, iptables

我想将通过`xx.xx.xx.xx`外部 IP 连接的端口 25565 上的所有 TCP 流量转发到`yy.yy.yy.yy`端口 25565 上。

本质上，

```
xx.xx.xx.xx:25565 --> yy.yy.yy.yy:25565 
```

但是，它不能转发来自任何 IP 的连接——它必须来自`xx.xx.xx.xx.`

# excel - Excel txt文件导入（特定列）到带有VBA的表中

> ID：14662658
> 
> 赞同：2
> 
> 时间：2013-02-02T14:02:48.927
> 
> 标签：excel, vba, text, import

我在整理我的 VBA 代码时发现了这个论坛。到目前为止，我在 VBA 编程方面的经验很少。这就是为什么我从两天以来一直在研究我的问题的解决方案，但没有成功。但是，我对提高我的编程技能很感兴趣，希望您能帮助我做到这一点。

基本上我想将一个 TXT 文件导入到活动的 Excel 工作簿中，在名为“TblDataImport”的表末尾名为“DataImport”的工作表中。

TXT 文件由 13 列组成，由制表符分隔：

1.  行：公司名称
2.  行：**日期** ***名称***CustomerGroup CustomerNo **SalesOrder** ItemNumber ItemGroup LineStatus ***Quantity*** ***Price*** ***Discount*** DiscountPercentage **NetAmount**
3.  行：所有对应的值...

我不需要导入第一行和第二行，因为我想将数据导入到区域的表存在，包括标题。此外，我只需要 13 列中的 7 列，这些列以粗体显示。如果用户可以使用打开文件对话框选择文本文件，那将是完美的。

如果我手动打开 TXT 文件并将其内容粘贴到 Excel 中，它已经包含
在正确的列中。所以在格式化方面不应该有任何陷阱。

我很好奇您提出的解决方案。

使用宏记录器我只能满足我的一些条件：

```
Sub DataImport()  
' DataImport Makro  
    Sheets("DataImport").Select  
    With ActiveSheet.QueryTables.Add(Connection:= _  
        "TEXT;C:\Users\Sales.txt", Destination:=Range _  
        ("$A$1"))  
        .Name = "AxaptaSales"  
        .FieldNames = True  
        .RowNumbers = False  
        .FillAdjacentFormulas = False  
        .PreserveFormatting = True  
        .RefreshOnFileOpen = False  
        .RefreshStyle = xlInsertDeleteCells  
        .SavePassword = False  
        .SaveData = True  
        .AdjustColumnWidth = True  
        .RefreshPeriod = 0  
        .TextFilePromptOnRefresh = False  
        .TextFilePlatform = 850  
        .TextFileStartRow = 1  
        .TextFileParseType = xlDelimited  
        .TextFileTextQualifier = xlTextQualifierDoubleQuote  
        .TextFileConsecutiveDelimiter = False  
        .TextFileTabDelimiter = True  
        .TextFileSemicolonDelimiter = False  
        .TextFileCommaDelimiter = False  
        .TextFileSpaceDelimiter = False  
        .TextFileColumnDataTypes = Array(4, 1, 9, 9, 1, 9, 9, 9, 1, 1, 1, 9, 1)  
        .TextFileTrailingMinusNumbers = True  
        .Refresh BackgroundQuery:=False  
    End With  
End Sub 
```

但是，此代码仅将所有列粘贴到单元格 A1 中（而不是在表的末尾）。它还包括第一行和第二行以及我不需要的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:45:39.890

如果您将以下代码添加到上面的代码中，这会将其添加到工作表中已有数据的末尾

```
Sub DataImport()

   Dim LastRow As Integer
   Dim LastRow2 As integer
    LastRow = Range("A65536").end(xlup).row
    LastRow = LastRow + 1  
 ' DataImport Makro  
Sheets("DataImport").Select  
With ActiveSheet.QueryTables.Add(Connection:= _  
    "TEXT;C:\Users\Sales.txt", Destination:=Range _  
    ("$A" & LastRow))  
    .Name = "AxaptaSales"  
    .FieldNames = True  
    .RowNumbers = False  
    .FillAdjacentFormulas = False  
    .PreserveFormatting = True  
    .RefreshOnFileOpen = False  
    .RefreshStyle = xlInsertDeleteCells  
    .SavePassword = False  
    .SaveData = True  
    .AdjustColumnWidth = True  
    .RefreshPeriod = 0  
    .TextFilePromptOnRefresh = False  
    .TextFilePlatform = 850  
    .TextFileStartRow = 1  
    .TextFileParseType = xlDelimited  
    .TextFileTextQualifier = xlTextQualifierDoubleQuote  
    .TextFileConsecutiveDelimiter = False  
    .TextFileTabDelimiter = True  
    .TextFileSemicolonDelimiter = False  
    .TextFileCommaDelimiter = False  
    .TextFileSpaceDelimiter = False  
    .TextFileColumnDataTypes = Array(4, 1, 9, 9, 1, 9, 9, 9, 1, 1, 1, 9, 1)  
    .TextFileTrailingMinusNumbers = True  
    .Refresh BackgroundQuery:=False  
End With
Range("A" & LastRow & ":A" & LastRow + 1).entireRow.delete
LastRow2 = Range("A65536").end(xlup).row
Range("H" & LastRow & ":M" & LastRow2).entirecolumn.delete 
```

结束子

我认为这应该按照您的要求进行（但我自己还是个新手）

# python - 搅拌机游戏引擎导入错误

> ID：14662663
> 
> 赞同：8
> 
> 时间：2013-02-02T14:03:15.517
> 
> 标签：python, blender

我刚开始学习搅拌机及其脚本并尝试运行它的示例代码

```
import bge

def main():

cont = bge.logic.getCurrentController()
own = cont.owner

sens = cont.sensors['mySensor']
actu = cont.actuators['myActuator']

if sens.positive:
    cont.activate(actu)
else:
    cont.deactivate(actu)
main() 
```

并得到以下错误： ImportError: No module named 'bge' 我搜索了解决方案但找不到任何模块。如何解决这个问题？我正在使用搅拌机 2.65

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T17:08:25.480

当您按“运行脚本”或尝试在终端中发出此命令时，运行 import bge 不起作用。您必须按“P”来激活游戏引擎模式。要运行脚本，请将控制器连接到脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T03:30:05.690

1.  import 'bge' 必须是 'blender game'，而不是 blender 渲染
2.  在“游戏逻辑编辑器”中给出“始终”运行 python 脚本
3.  开始游戏

# opencv - FreeBSD 上 OpenCV 2.4.3 中的头文件问题

> ID：14662664
> 
> 赞同：3
> 
> 时间：2013-02-02T14:03:18.107
> 
> 标签：opencv, makefile, cmake, freebsd

我目前正在研究比较不同操作系统在图像处理中的性能。因此，我必须在 FreeBSD 系统上安装 OpenCV 2.4.x（最好是 2.4.3）。

问题是它包含 asm/types.h，它不是一个符合 POSIX 的库，而是一个 Linux 库。

所以我使用安装指南建议的标准标志运行 cmake：

```
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local .. 
```

其中 .. 正确指向源文件夹。一切正常，所以我运行 make：

> [ 16%] 构建 CXX 对象模块/highgui/CMakeFiles/opencv_highgui.dir/src/cap_libv4l.cpp.o
> /root/work/OpenCV-2.4.3/modules/highgui/src/cap_libv4l.cpp:238:54: 错误: asm/types.h: 没有这样的文件或目录

问题是：我应该怎么做才能告诉编译器它需要包含另一个头文件而不是原始头文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T14:55:22.663

此问题已在[Bug#651872 中得到解决：opencv: FTBFS on kfreebsd](http://us.generation-nt.com/answer/bug-651872-opencv-ftbfs-kfreebsd-help-205753341.html)

在**modules/highgui/src/cap_libv4l.cpp**中，***删除或注释掉***以下包括：

```
#include <asm/types.h> 
```

在**modules/highgui/src/cap_v4l.cpp**做同样的事情。

# c# - MonoGame 阅读触摸手势

> ID：14662667
> 
> 赞同：6
> 
> 时间：2013-02-02T14:03:34.747
> 
> 标签：c#, iphone, xamarin.ios, monogame

我目前正在使用梦幻般的 monogame 框架编写游戏。我无法正确响应触摸输入。当用户水平或垂直拖动时，我想每次拖动执行一次操作。问题是每次拖动都会多次发出手势。这是我的代码：

```
var gesture = default(GestureSample);

while (TouchPanel.IsGestureAvailable)
    gesture = TouchPanel.ReadGesture();

if (gesture.GestureType == GestureType.VerticalDrag)
{
    if (gesture.Delta.Y < 0)
        return new RotateLeftCommand(_gameController);

    if (gesture.Delta.Y > 0)
        return new RotateRightCommand(_gameController);
}

if (gesture.GestureType == GestureType.HorizontalDrag)
{
    if (gesture.Delta.X < 0)
        return new RotateLeftCommand(_gameController);

    if (gesture.Delta.X > 0)
        return new RotateRightCommand(_gameController);
} 
```

出于本示例的目的，我已将所有这些代码移到一个块中。返回的 RotateRightCommand 或 RotateLeftCommand 然后由在屏幕上旋转对象的调用代码执行。这整个代码块正在monogame的更新循环中运行。我认为我在重置触摸输入方面遗漏了一些东西，这就是为什么我一次拖动会返回 3 或 4 个 RotateCommands。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T10:50:28.593

编辑：您在这里没有正确使用手势。每次手指在屏幕上移动时，都会生成一个拖动手势。如果您将手指从屏幕的一侧移动到另一侧（非常快），您会得到很多小的拖动手势。这就是 XNA 和 MonoGame 的工作方式。

这是您正在寻找的逻辑：

```
var touchCol = TouchPanel.GetState();

foreach (var touch in touchCol)
{
    // You're looking for when they finish a drag, so only check
    // released touches.
    if (touch.State != TouchState.Released)
        continue;

    TouchLocation prevLoc;

    // Sometimes TryGetPreviousLocation can fail. Bail out early if this happened
    // or if the last state didn't move
    if (!touch.TryGetPreviousLocation(out prevLoc) || prevLoc.State != TouchState.Moved)
        continue;

    // get your delta
    var delta = touch.Position - prevLoc.Position ;

    // Usually you don't want to do something if the user drags 1 pixel.
    if (delta.LengthSquared() < YOUR_DRAG_TOLERANCE)
        continue;

    if (delta.X < 0 || delta.Y < 0)
        return new RotateLeftCommand(_gameController);

    if (delta.X > 0 || delta.Y > 0)
        return new RotateRightCommand(_gameController);   
} 
```

如果你更喜欢做手势，你可以这样做：

```
var gesture = default(GestureSample);

while (TouchPanel.IsGestureAvailable)
{
    gesture = TouchPanel.ReadGesture();

    if (gesture.GestureType == GestureType.DragComplete)
    {
        if (gesture.Delta.Y < 0 || gesture.Delta.X < 0)
            return new RotateLeftCommand(_gameController);
        if (gesture.Delta.Y > 0 || gesture.Delta.X > 0)
            return new RotateRightCommand(_gameController);
    }
} 
```

无论哪种方式都会给你你正在寻找的行为。正如我在原始帖子中所说，您仍然需要将逻辑放入循环中，因为您可以有多个手势排队，并且您不想假设堆栈中的最后一个是拖动。（多亏了多点触控，您可以进行拖动、点击、拖动完成等）。

我不是 100% 确定这是否是您的问题……但是您的逻辑在这里是错误的。CodeFormatting老大在这里打我，但应该更像这样：

```
var gesture = default(GestureSample);

while (TouchPanel.IsGestureAvailable)
{
    gesture = TouchPanel.ReadGesture();

    if (gesture.GestureType == GestureType.VerticalDrag)
    {
        if (gesture.Delta.Y < 0)
            return new RotateLeftCommand(_gameController);
        if (gesture.Delta.Y > 0)
            return new RotateRightCommand(_gameController);
    }

    if (gesture.GestureType == GestureType.HorizontalDrag)
    {
        if (gesture.Delta.X < 0)
            return new RotateLeftCommand(_gameController);
        if (gesture.Delta.X > 0)
            return new RotateRightCommand(_gameController);
    }
} 
```

通过不将 TouchPanel.ReadGesure() 放入循环中，您每帧只能读取一个手势。可用的手势被放入队列中，并且仅在调用 ReadGesture() 时被移除。因此，如果您的帧速率出现问题，或者您无法像操作系统读取手势那样快（这很有可能），那么您将使用旧信息。[你可以在这里](https://github.com/mono/MonoGame/blob/develop/MonoGame.Framework/Input/Touch/TouchPanel.cs)看到。对于这个应用程序，我建议采用每个手势，并将其组合成一个或两个，然后根据它决定你应该做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:27:51.183

我想这取决于你认为什么是阻力。MonoGame 和 XNA 考虑检测触摸输入从一次更新到下一次拖动的变化。因此，如果您认为从手指触摸屏幕直到您将其移除，您将收到一个手势，那么在 XNA 和 MonoGame 术语中这是不正确的。返回的 Gesture 是从 T-1 到 T 的 Delta，其中 T 是 Now，T-1 是之前对 Update 的调用。

# c++ - 工业级 n 吨基类模板

> ID：14662673
> 
> 赞同：7
> 
> 时间：2013-02-02T14:04:08.693
> 
> 标签：c++, templates, design-patterns, c++11, singleton

我正在研究一个 n-ton 基类模板。我还不担心懒惰，所以*意图*是：

> 确保一个类只有 n 个实例，并提供对它们的全局访问点。

到目前为止，这是我的代码：

```
template<typename Derived, size_t n = 1>
class n_ton_base                 // Singletons are the default
{
    static Derived instances[n + (n == 0)];
                              // Zerotons are supported, too
protected:

    // Prevent n_ton_base to be used outside of inheritance hierarchies
    n_ton_base() {} 

    // Prevent n_ton_base (and Derived classes) from being copied
    n_ton_base(const n_ton_base&) = delete;

public:
                   // Get first element by default, useful for Singletons
    template<size_t i = 0>
    static Derived& get_instance()
    {
        static_assert(i < n, "Time to increase n it seems!");
        return instances[i];
    }
}; 
```

以下是如何使用它：

```
class SingletonExample : public n_ton_base<SingletonExample>
{
public:
    void method()
    {
        std::cout << "Singletons are overused.\n";
    }    
};

class DoubletonExample : public n_ton_base<DoubletonExample, 2>
{
public:
    void method()
    {
        std::cout << "Doubleton " << this << " says hello.\n";
    }    
};

int main()
{
    SingletonExample::get_instance().method();
    DoubletonExample::get_instance().method();
    DoubletonExample::get_instance<0>().method();
    DoubletonExample::get_instance<1>().method();
} 
```

不幸的是，代码还没有编译：

```
/tmp/ccsFtliS.o: In function `SingletonExample& n_ton_base<SingletonExample, 1ul>::get_instance<0ul>()':
nton.cpp:(.text._ZN10n_ton_baseI16SingletonExampleLm1EE12get_instanceILm0EEERS0_v[SingletonExample& n_ton_base<SingletonExample, 1ul>::get_instance<0ul>()]+0x5): undefined reference to `n_ton_base<SingletonExample, 1ul>::instances'
/tmp/ccsFtliS.o: In function `DoubletonExample& n_ton_base<DoubletonExample, 2ul>::get_instance<0ul>()':
nton.cpp:(.text._ZN10n_ton_baseI16DoubletonExampleLm2EE12get_instanceILm0EEERS0_v[DoubletonExample& n_ton_base<DoubletonExample, 2ul>::get_instance<0ul>()]+0x5): undefined reference to `n_ton_base<DoubletonExample, 2ul>::instances'
/tmp/ccsFtliS.o: In function `DoubletonExample& n_ton_base<DoubletonExample, 2ul>::get_instance<1ul>()':
nton.cpp:(.text._ZN10n_ton_baseI16DoubletonExampleLm2EE12get_instanceILm1EEERS0_v[DoubletonExample& n_ton_base<DoubletonExample, 2ul>::get_instance<1ul>()]+0x5): undefined reference to `n_ton_base<DoubletonExample, 2ul>::instances'
collect2: ld gab 1 als Ende-Status zurück 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T15:25:30.910

正如[Etienne Cordonnier 指出的那样](https://stackoverflow.com/questions/14662673/industrial-strength-n-ton-base-class-template#comment20492756_14662673)，使用本地静态而不是类静态要容易得多：

```
template<typename Derived, size_t n = 1>
class n_ton_base                 // Singletons are the default
{
protected:

    // Prevent n_ton_base to be used outside of inheritance hierarchies
    n_ton_base() {} 

    // Prevent n_ton_base (and Derived classes) from being copied
    n_ton_base(const n_ton_base&) = delete;

public:
                   // Get first element by default, useful for Singletons
    template<size_t i = 0>
    static Derived& get_instance()
    {
        static_assert(i < n, "Time to increase n it seems!");

        static Derived instance;
        return instance;
    }
}; 
```

请注意，每个实例化的成员函数都有自己的本地静态，因此不需要数组。

这也实现了[线程安全的延迟初始化](https://stackoverflow.com/questions/8102125/)，而我无需对此做任何事情。好的！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T14:11:18.850

在全局范围内添加：

```
template<typename Derived, size_t n>
Derived n_ton_base<Derived, n>::instances[n + (n == 0)]; 
```

顺便说一句，`std::array<>`允许零大小的数组，因此您可能需要考虑它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T14:16:11.063

您可以在[此处](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr038.htm)找到有关类静态成员的说明：

> 静态数据成员（仅限 C++）：
> 
> 在类的成员列表中声明静态数据成员不是定义。您必须在命名空间范围内的类声明之外定义静态成员。例如：
> 
> ```
> class X {
> public:
>     static int i;
> };
> 
> int X::i = 0; // definition outside class declaration 
> ```

因此，您必须`n_ton::instances`在班级之外进行定义。

# ruby-on-rails-3 - SELECT FOR UPDATE 不会在带有 PostgreSQL 9.1 的 Rails 3.2.11 上阻塞

> ID：14662675
> 
> 赞同：4
> 
> 时间：2013-02-02T14:04:38.370
> 
> 标签：ruby-on-rails-3, activerecord, locking, postgresql-9.1

我正在尝试使用悲观锁来避免竞争条件。我期待在一个线程通过 获取一行之后`SELECT FOR UPDATE`，另一个寻找同一行的线程将被阻塞，直到锁被释放。但是，在测试时，似乎锁不成立，第二个线程可以获取该行并对其进行更新，即使第一个线程尚未保存（更新）该行也是如此。

以下是相关代码：

数据库模式

```
class CreateMytables < ActiveRecord::Migration
  def change
    create_table :mytables do |t|
        t.integer  :myID
        t.integer  :attribute1
        t.timestamps
    end

    add_index :mytables, :myID, :unique => true

  end
end 
```

mytables_controller.rb

```
class MytablessController < ApplicationController

    require 'timeout'

    def create
        myID = Integer(params[:myID])
        begin
            mytable = nil
            Timeout.timeout(25) do 
                p "waiting for lock"              
                mytable = Mytables.find(:first, :conditions => ['"myID" = ?', myID], :lock => true ) #'FOR UPDATE NOWAIT') #true) 
                #mytable.lock!
                p "acquired lock"                 
            end
            if mytable.nil?
                mytable = Mytables.new
                mytable.myID =  myID
            else
                if mytable.attribute1 > Integer(params[:attribute1])
                    respond_to do |format|
                        format.json{
                            render :json => "{\"Error\": \"Update failed, a higher attribute1 value already exist!\", 
\"Error Code\": \"C\"
}"
                            }
                    end
                    return
                end
            end
            mytable.attribute1 =  Integer(params[:attribute1])           
            sleep 15  #1 
            p "woke up from sleep"
            mytable.save! 
            p "done saving"             
            respond_to do |format|
                format.json{
                          render :json => "{\"Success\": \"Update successful!\",
\"Error Code\": \"A\"
}"
                            }
            end
        rescue ActiveRecord::RecordNotUnique #=> e     
            respond_to do |format|
                format.json{
                            render :json => "{\"Error\": \"Update Contention, please retry in a moment!\",
\"Error Code\": \"B\"
}"
                            }
            end
        rescue Timeout::Error
            p "Time out error!!!"
            respond_to do |format|
                format.json{
                            render :json => "{\"Error\": \"Update Contention, please retry in a moment!\",
\"Error Code\": \"B\"
}"
                            }
            end
        end   
    end
end 
```

我已经在两种设置下对其进行了测试，一种是在 Heroku 上运行带有独角兽的应用程序，`worker_processes 4`另一种是在我的机器上本地运行，安装了 PostgreSQL 9.1，运行应用程序的两个单线程实例，一个是`rails server -p 3001`，另一个是`thin start`（对于出于某种原因，如果我只是跑步`rails server`或`thin start`独自一人，他们只会按顺序处理来电）。

设置 1：数据库中感兴趣的 myID 的原始属性 1 值为 3302。我向 Heroku 应用程序发起了一次更新调用（将属性 1 更新为值 3303），然后等待大约 5 秒，然后向 Heroku 应用程序发起另一个更新调用（将属性 1 更新为值 3304）。我预计第二个调用大约需要 25 秒才能完成，因为由于`sleep 15`我之前在代码中引入的命令，第一个调用需要 15 秒才能完成`mytable.save!`，并且第二个调用应该在该行阻塞`mytable = Mytables.find(:first, :conditions => ['"myID" = ?', myID], :lock => true )`大约 10 秒，然后获得锁，然后休眠 15 秒。但事实证明，第二次通话只比第一次通话晚了大约 5 秒。

如果我颠倒请求顺序，即第一次调用是将attribute1更新为3304，延迟5秒第二次调用是将attribute1更新为3303，最终值为3303。查看Heroku上的日志，第二次调用等待没有理论上第一个调用处于休眠状态并因此仍持有锁时获取锁的时间。

设置 2：运行同一应用程序的两台 Thin rails 服务器，一台在端口 3000 上，一台在端口 3001 上。我的理解是它们连接到同一个数据库，因此如果服务器的一个实例通过 获取锁`SELECT FOR UPDATE`，另一个实例应该无法获取锁，将被阻塞。但是，锁定行为与 Heroku 上的相同（没有按我的预期工作）。而且由于服务器在本地运行，我设法执行额外的调整测试，以便在第一个调用休眠 15 秒时，我在启动第二个调用之前更改了代码，以便 5 秒后的第二个调用仅休眠 1第二次获得锁后，第二次调用确实比第一次调用早得多......

我也尝试在该行之后立即使用`SELECT FOR UPDATE NOWAIT`并引入一个额外的行，但结果是一样的。`mytable.lock!``SELECT FOR UPDATE`

所以在我看来，虽然`SELECT FOR UPDATE`命令已成功发送到 PostgreSQL 表，但其他线程/进程仍然可以`SELECT FOR UPDATE`在同一行，甚至`UPDATE`同一行没有阻塞...

我完全困惑，任何建议都会受到欢迎。谢谢！

PS1 我在行上使用锁的原因是我的代码应该能够确保只有将行更新为更高的属性值的调用才会成功。

PS2 本地日志中的示例 SQL 输出

```
"waiting for lock"
  Mytables Load (4.6ms)  SELECT "mytables".* FROM "mytables" WHERE ("myID" = 1935701094) LIMIT 1 FOR UPDATE
"acquired lock"
"woke up from sleep"
   (0.3ms)  BEGIN
   (1.5ms)  UPDATE "mytables" SET "attribute1" = 3304, "updated_at" = '2013-02-02 13:37:04.425577' WHERE "mytables"."id" = 40
   (0.4ms)  COMMIT
"done saving" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:55:31.263

事实证明，因为 PostGreSQL 有 autocommit 默认开启，所以该行

```
Mytables Load (4.6ms)  SELECT "mytables".* FROM "mytables" WHERE ("myID" = 1935701094) LIMIT 1 FOR UPDATE 
```

实际上之后是自动提交，因此释放了锁。

[从这个页面http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html)阅读时我弄错 了

```
.find(____, :lock => true) 
```

方法自动打开一个事务，类似于

```
.with_lock(lock = true) 
```

覆盖在同一页的末尾...

所以要修复我的 Rails 代码，我只需要将它包装在一个事务中，通过添加

```
Mytables.transaction do 
```

在下面

```
begin 
```

并在“救援”行之前添加一个额外的“结束”。

生成的 SQL 输出将更像：

```
(0.3ms)  BEGIN
Mytables Load (4.6ms)  SELECT "mytables".* FROM "mytables" WHERE ("myID" = 1935701094) LIMIT 1 FOR UPDATE
(1.5ms)  UPDATE "mytables" SET "attribute1" = 3304, "updated_at" = '2013-02-02 13:37:04.425577' WHERE "mytables"."id" = 40
(0.4ms)  COMMIT 
```

# drupal - 从本地主机迁移到实时服务器重定向错误

> ID：14662676
> 
> 赞同：-1
> 
> 时间：2013-02-02T14:04:38.883
> 
> 标签：drupal, drupal-7, cpanel

我正在将我的本地 Drupal 7 站点移动到网络上的实时站点。我已按照以下步骤操作。我确实在 example.org/drupal 的子域中安装了 Drupal。

1）清除缓存表

2)导出数据库

3) 登录您的 Cpanel。转到 Mysql 数据库。创建一个新的数据库。（记住数据库的名称）并向其中添加用户。（记住用户名和密码，因为您需要在 settings.php 文件中使用相同的用户名和密码）

4）现在从cpanel转到Phpmyadim。选择您创建的新数据库。单击导入并上传您在步骤 4 中创建的那个 sql 文件。 5）检查您是否有相同的编号。新数据库中的表（在服务器上），就像在本地服务器上一样

5）现在转到您的 settings.php 文件 sites/default/settings.php 并将数据库名称更改为您使用为该数据库创建的用户名：密码创建的新名称

6) 现在使用您的 ftp 帐户和 filezilla 传输服务器上的所有文件

在我访问 mysite.com/drupal 时完成所有步骤后，我收到“页面未正确重定向”错误。它表明它正在重定向到[http://example.org/drupal/install.php](http://example.org/drupal/install.php)。在做了一些研究后，我发现这通常是由于 settings.php 中的错误造成的。我已经尝试了我能想到的一切，但错误仍然存​​在。

这是我在 settings.php 中第 180 行的代码。

```
/* 
 * Database configuration format:
 * @code
 *   $databases['default']['default'] = array(
 *     'driver' => 'mysql',
 *     'database' => 'whiteoa_wob_newdesign',
 *     'username' => 'whiteoa_admin',
 *     'password' => '********',
 *     'host' => 'localhost',
 *     'prefix' => '',
 *   );
 */ 
```

我还尝试了没有 whiteoa 前缀的数据库名称和用户名。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:20:41.353

两种可能。

您需要在 settings.php 中将 $base_url 设置为 yourdomain.com/drupal ，否则您的 .htaccess 文件中有问题。

尝试在您的 .htaccess 文件中取消注释 RewriteBase /drupal 或在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T07:05:18.987

我知道这太老了，无法回答，但它可能会在未来对某人有所帮助：

如我所见，您的数据库设置存在问题。

数据库设置应如下所示：

```
$databases = array (
'default' => array (
'default' => array (
'database' => 'prefix_db_name',
'username' => 'prefix_db_user',
'password' => '******',
'host' => 'localhost',
'port' => '',
'driver' => 'mysql',
'prefix' => '',
),
),
); 
```

# ios - 编辑 UItextview 时隐藏和显示 IOS 键盘

> ID：14662677
> 
> 赞同：0
> 
> 时间：2013-02-02T14:04:41.927
> 
> 标签：ios, objective-c, xcode

我想检测某些 UItextField 和 UItextView 何时被编辑，以便运行动画。我以这种方式解决了这个问题：

```
-(void)textFieldDidBeginEditing: (UITextField *)textField{
NSLog(@"sowing keyboard");

if ((textField == timebegin)||(textField == timeend)||(textField == number)||(textField == costlist)||(textField == costnormal)||(textField == newmessagename)||(textField == noteView))     {

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
}else{

}
}

-(void)textFieldDidEndEditing: (UITextField *)textField{
NSLog(@"hiding keyboard");

}

-(void)textViewDidBeginEditing: (UITextView *)textView{
NSLog(@"sowing keyboard");

if (textView == generalDetails) {

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
}else{

}
}

-(void)textViewDidEndEditing: (UITextView *)textView{
NSLog(@"hiding keyboard");

}

- (void)keyboardDidHide:(NSNotification *)aNotification {

[[NSNotificationCenter defaultCenter] removeObserver:self name: UIKeyboardDidHideNotification object:nil];

[[NSNotificationCenter defaultCenter] removeObserver:self name: UIKeyboardWillShowNotification object:nil];

 NSLog(@"hiding keyboard");

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.27];
scroll1.frame = CGRectMake(0, -340, 768, 1004);
[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.37];
scroll2.frame = CGRectMake(0, 678, 768, 1004);
[UIView commitAnimations];

[self.mapView setHidden:NO];
    addImageForCommentingButton.hidden = NO;

//fade in
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationDelegate:self];

[self.mapView setAlpha:1.0];
    [addImageForCommentingButton setAlpha: 1.0];

[UIView commitAnimations];

}

- (void)keyboardWillShow:(NSNotification *)notification {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.27];
scroll1.frame = CGRectMake(0, -604, 768, 1004);
[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.47];
scroll2.frame = CGRectMake(0, 414, 768, 1004);
 [UIView commitAnimations];

[UIView animateWithDuration:1.0
             animations:^{
                 self.mapView.alpha=0.0;
                 [addImageForCommentingButton setAlpha: 0.0];
             }
             completion:^(BOOL finished){
                 self.mapView.hidden=YES;
                 addImageForCommentingButton.hidden = YES;
             }];
} 
```

当我开始编辑名称在 if 语句中的 UItextField 之一时，将添加观察者并运行 showKeyboard 方法中的动画。这与 UItextView 一般细节不同。当我开始编辑它时，动画没有运行，好像代码没有被调用，但是它被调用了，并且添加了观察者（我从 NSlog 理解了这一点）。关键是 UItextView 和 UItextField 的代码是相同的，那么如何一个工作而另一个不工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:36:36.180

通过这样做解决：

```
-(void)textViewDidBeginEditing: (UITextView *)textView{
NSLog(@"sowing keyboard textView");

if (textView == generalDetails) {

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];

    [self keyboardWillShow];

}else{

}
} 
```

很奇怪，我认为方法keyboardWillShow根本没有被调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:38:45.110

如果添加`[self keyboardWillShow]`解决了问题，那么您的方法可能没有正确实施。`keyboardWillShow`并且`keyboardWillShow:`是两种不同的方法。

如果要`keyboardWillShow:`调用通知，则必须将其定义如下：

```
- (void) keyboardWillShow: (NSNotification*) notification
{
} 
```

# scala - 更强大的 getOrElse？

> ID：14662678
> 
> 赞同：2
> 
> 时间：2013-02-02T14:04:43.653
> 
> 标签：scala

我有以下代码：

```
val userName = users.get(userID) match {
  case Some(user) => user.name
  case None => "Invalid User ID"
} 
```

有没有更简洁的写法？

我想知道是否有类似的东西`getOrElse`可以让我在成功时应用一个函数（提取用户名），否则返回一个普通值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T14:13:22.860

```
scala> Map("a" -> 1).get("a").fold("invalid user id")("value:"+_)
res15: String = value:1

scala> Map("a" -> 1).get("b").fold("invalid user id")("value:"+_)
res16: String = invalid user id 
```

`Option.fold`类型推断有一些问题，对于潜在的陷阱，请参见[另一个](https://stackoverflow.com/questions/12321164/option-fold-in-scala-2-10/12321238#12321238)答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T14:11:09.847

不是在一个方法调用中，而是在两个中：

```
users.get(userID).map(_.name).getOrElse("Invalid User ID") 
```

糟糕，`Option.fold`根据@sschaef 的回答，显然最终被添加到 Scala 2.10 中。

# php - 如何根据相关表中的值更新MYSQL表列

> ID：14662683
> 
> 赞同：1
> 
> 时间：2013-02-02T14:05:09.613
> 
> 标签：php, mysql, sql, sql-update

我有一个表A如下：

```
ID NAME VALUE
1  abc  10
2  xyz  15 
```

我有一个表 B 如下：

```
ID VALUE_1 VALUE_2 VALUE_3 TOTAL YEAR
1  0       0       0       0     2012
2  0       0       0       0     2013
3  0       0       0       0     2012 
```

我想要所有的`UPDATE`行`Table B`和`SET` `VALUE_2`列`VALUE``Table A`

我开始我的查询语句如下：

```
$query_string = '
UPDATE Table_B
SET VALUE_2 = (SELECT...something should go here I think)
WHERE Table_B.year = "2013" 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:07:57.070

```
UPDATE  tableB b
        INNER JOIN tableA a
            ON a.ID = b.ID AND b.YEar = 2013
SET     b.VALUE_2 = a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/304c3/1)

# ruby-on-rails - 如何让friendly_id gem 使用另一个模型的属性？

> ID：14662684
> 
> 赞同：0
> 
> 时间：2013-02-02T14:05:13.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2, friendly-id

目前在我的消息表上使用friendly_id。消息访问如下：

```
site.com/messages/id e.g. site.com/messages/8 
```

我想这样使用它：

```
site.come/messages/username e.g. site.com/messages/terrytibbs 
```

当我使用消息表中的“body”属性对其进行测试时，我的 gem 工作正常。发送了一条短消息“test”并尝试使用 site.com/messages/test 访问它，它工作正常。

但是我需要使用用户的用户名来做到这一点。我想知道是否有办法访问另一个模型属性，因为我的用户名存储在我的用户表中。我总是可以在我的消息表中创建一个用户名列并将他们的用户名保存在那里，但我不喜欢在我已经拥有另一个用户名列时拥有另一个用户名列的想法。

由于我的表是链接的，因此我可以使用他们的 sender_id 或 recipient_id 轻松找到消息发件人或收件人的用户名，因为这与他们在我的 users 表中的 ID 匹配。

有没有一种快速简便的方法来做我想做的事情，或者我必须求助于在我的消息表中创建一个用户名列？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:08:51.427

这没有任何意义，也不是friendly_id 的用途 -`/messages/8`将加载单个消息实例，而将其替换为`/messages/terrytibbs`可能会加载用户 terrytibbs 接收/发送的消息列表。

我会在下创建一个正常的收集路线`messages`，例如。`get :username`然后在该操作中加载用户-> 获取他们的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:17:29.450

@sevenseacat 是对的，但我相信您会以这种方式发生路线冲突：

```
/messages/:id
/messages/:username 
```

也许路由应该更像 /user/:id/messages 这将是用户下的消息的嵌套路由

```
resources :users do
  resources :messages, only: [:index]
end 
```

运行`rake routes`查看生成的路由。在您的 MessagesController 中，您将收到 :user_id 并且可以轻松调用：

```
User.find(params[:user_id]).messages 
```

确保你`has_many :messages`在你的用户模型中工作。

# objective-c - ObjectiveC 和 substringToIndex。点问题

> ID：14662690
> 
> 赞同：0
> 
> 时间：2013-02-02T14:05:54.843
> 
> 标签：objective-c

我是 Objective C 的新手，并且对 substringToIndex 有一个奇怪的问题。

背景：代码是删除计算器显示的最后一个字符的函数的一部分。我需要能够在删除点时进行标记

我的代码是：

```
NSString *currentDisplay = self.display.text;
NSString *lastChar = [currentDisplay substringToIndex: 1];
NSLog(@"lastChar -->%@<--",lastChar); 
```

问题是：变量 currentDisplay 是一个数值，例如“123.45”。当。。。的时候 ”。” （点）是要删除的字符，所以变量lastChar应该是“.”，日志显示一个随机数，通常是最后一个被删除的字符。

知道我做错了什么吗？

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:16:02.043

如果要判断最后一个字符是否为“点”，请使用

```
if ([currentDisplay characterAtIndex:currentDisplay.length - 1] == '.') .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:53:40.243

这应该可以帮助您：

```
BOOL flagIfDotIsDeleted = NO;
unichar leftmostChar = [currentDisplay characterAtIndex: currentDisplay.length - 1];
if (leftmostChar == '.')
{
    flagIfDotIsDeleted = YES;
    currentDisplay = [currentDisplay substringToIndex: currentDisplay.length - 2];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:47:48.913

这更简单，如果你想知道最后一个字符是否是一个点......

```
if([currentDisplay hasSuffix:@"."]) 
```

# grails - 使用 Groovy Spring security getCurrentUser 获取有意义的字符串

> ID：14662693
> 
> 赞同：0
> 
> 时间：2013-02-02T14:06:19.393
> 
> 标签：grails, spring-security

我为当前用户收集字符串的代码如下所示。

```
package timetracker2

import grails.timesecurity.*
import timetracker2.TimeController

class Time {

   def springSecurityService

   int id
   Project projectname
   Date dateCreated
   Date dateWorked
   Double timeSpent
   TimeClassification classification

   String currentUser = {
      String currentUser = springSecurityService.getCurrentUser()
      def user = springSecurityService.getCurrentUser()
      String username = user
      return username
   }

   static constraints = {
      timeSpent blank: false
      classification blank: true
   }

   static mapping = {
      table 'Time'
      cache true
      id column: 'Time_id'
      dateCreated column: 'Date_created'
      dateWorked column: 'Date_Worked'
      timeSpent column: 'Time_Spent'
      currentUser column: 'Username'
   }
} 
```

这是我得到的字符串.... timetracker2.Time$_closure1@108115

那是怎么回事？？？？任何帮助将不胜感激。

我也尝试过使用获取授权，并且尝试在我的 person 类中添加一个 toString 方法。可惜没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:46:22.383

我怀疑这里的部分问题是您在`springSecurityService`设置之前尝试使用它。声明中的初始化表达式

```
String currentUser = springSecurityService.getCurrentUser() 
```

在构造对象时运行，但此时`springSecurityService`引用为空，因为它仅在构造函数完成后才被注入。您可以将引用的代码`springSecurityService`放入`beforeInsert`事件中，这会将调用延迟到对象首次保存到数据库的位置。你可能想要`principal.username`而不是`getCurrentUser()`（感谢 Burt Beckwith 的指针）

```
class Time {
  def springSecurityService

  String currentUser
  // other fields...

  def beforeInsert() {
    currentUser = springSecurityService.principal.username
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:10:58.590

您正在使用`currentUser`调用闭包的结果初始化变量，该`toString()`闭包在调用时返回当前用户。

你想要的是

```
String currentUser = springSecurityService.getCurrentUser() 
```

`currentUser`它使用返回的值初始化变量`springSecurityService.getCurrentUser()`。

# node.js - 在 Mocha 中异步测试大量数据

> ID：14662699
> 
> 赞同：1
> 
> 时间：2013-02-02T14:06:57.517
> 
> 标签：node.js, unit-testing, testing, mongoose, mocha.js

我需要遍历电子邮件列表并检查它们是否有效。如果验证失败，我会抛出一个错误让 Mocha 知道。

```
it('validates valid email addresses', function (done) {
  [
    'oliverash@me.com',
    'oliver.ash@me.com',
    'oliver-ash@me.com',
    'oliver+ash@me.com',
    'oliver\'s-email@me.com'
  ].forEach(function (value) {
    user.email = value

    user.validate(function (err) {
      // Failed to validate, throw an error
      if (err) {
        throw new Error()
      }
    })
  })

  // All documents validated, so call `done`
  done()
}) 
```

然而，这段代码似乎不能正常工作——如果数组中的最后一封电子邮件无效，它就会失效。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T14:41:16.960

您可以使用*[async](https://github.com/caolan/async)*实用程序库来简化执行异步循环。

```
it('validates valid email addresses', function (done) {
  async.forEach([
    'oliverash@me.com',
    'oliver.ash@me.com',
    'oliver-ash@me.com',
    'oliver+ash@me.com',
    'oliver\'s-email@me.com'
  ], 
  function (value, callback) {
    user.email = value
    user.validate(callback)
  },
  function (err) {
    if (err) {
      throw new Error()
    }
    done()
  })
}) 
```

第一个函数在数组中的每个元素上调用，它有两个参数：数组中的项目和一个回调函数。如果回调收到错误，它会立即停止迭代。一旦数组中的所有项都完成（或其中任何一项都返回错误），就会调用最终函数。在这个例子中，它要么抛出错误，要么运行 Mocha done 函数。

[async](https://github.com/caolan/async#forEach)的自述文件很好地解释了 forEach 函数的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:35:17.230

如果您的`user.validate`函数是异步的，您的 forEach 调用将不会等待`user.validate`.

这意味着您的 forEach 函数将在`user.validate`调用所有回调`done()`之前结束，并将在每次验证结束之前调用。

您应该使用`forEach`函数的所有参数并`done()`在`user.validate`回调中调用。我将添加一个计数变量来计数调用的回调并知道何时需要调用`done()`函数。

```
it('validates valid email addresses', function (done) {
  var count = 0;     // count variable
  [
    'oliverash@me.com',
    'oliver.ash@me.com',
    'oliver-ash@me.com',
    'oliver+ash@me.com',
    'oliver\'s-email@me.com'
  ].forEach(function (value, index, array) {
    user.email = value;

    user.validate(function (err) {
      ++count;      // Callback called, we add +1 to count.
      if (err) {
        throw new Error();
      }
      // Check if all callbacks have been called and call done if true.
      if (count === array.length)
        done();
    });

  });

}) 
```

这应该会更好。我没有测试它，但它应该可以工作。

PS：请不要忘记分号。在某些情况下，它会给你带来不确定的行为，不放它们是一个坏习惯（我们是程序员！）。

**编辑 - 08/06/13**：刚刚阅读了一些关于 Javascript 中分号的内容并记住了这个线程，这就是为什么你应该在你的代码中加入分号：http: [//bonsaiden.github.io/JavaScript-Garden/#core.semicolon](http://bonsaiden.github.io/JavaScript-Garden/#core.semicolon)

# mysql - 尝试在 Navicat 中创建关系

> ID：14662705
> 
> 赞同：0
> 
> 时间：2013-02-02T14:07:28.330
> 
> 标签：mysql

我很笨，一年前为客户创建了表格。现在我知道得更好，应该使用关系。现在我正在尝试在 Navicat 中创建它们。执行：

```
ALTER TABLE geerdink_new.dossier 
  ADD CONSTRAINT fk_dossier_klant_1 
    FOREIGN KEY (dossierKlantID) 
    REFERENCES geerdink_new.klant (klantID) 
```

我收到一些错误：

> [Msg] 失败 - 外键 fk_dossier_klant_1 出错 - 1452 - 无法添加或更新子行：外键约束失败 ( `geerdink_new`. `#sql-420_51`, CONSTRAINT `fk_dossier_klant_1`FOREIGN KEY ( `dossierKlantID`) REFERENCES `klant`( `klantID`))

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:13:09.860

这不是 Navicat 错误，而是 MySQL 错误。当您尝试创建约束时，某些内容不正确匹配，可能是：

1）列定义不相同（例如一个是无符号整数，另一个是有符号整数）

2) 一列中的值与您正在与之创建关系的列中的值不对应。

编辑：试试这个查询：

```
SELECT klantID FROM klant LEFT JOIN geerdink_new ON geerdink_new.dossierKlantId = klant.klantID WHERE dossierKlantId IS NULL; 
```

# jquery - 如何在可滚动的 Div 中显示 JQPlot 条形图

> ID：14662714
> 
> 赞同：2
> 
> 时间：2013-02-02T14:08:25.917
> 
> 标签：jquery, jqplot

我想在存在 Chart 的 DIV 中显示水平滚动条，但无论我分配给容器 DIV 的大小如何，Chart 控件都会占用所有空间。这是我正在使用的代码。

```
 <div id="chart1" style="height: 230px; width: 355px; overflow: scroll; padding-left: 10px;"></div> 
```

[http://i.stack.imgur.com/R6GZI.png](http://i.stack.imgur.com/R6GZI.png)

从图像中可以看出，它要么显示两个滚动条，并且如果我设置了overflow-x:true 和overflow-y: hidden，那么它显示了水平滚动，但被禁用了。

请问有什么帮助吗？

# iphone - 我们有 Admob 对 Coroa SDK 的支持了吗..？

> ID：14662716
> 
> 赞同：0
> 
> 时间：2013-02-02T14:08:50.753
> 
> 标签：iphone, admob, coronasdk

我想知道 Corona SDK 中是否支持 Admob？我正在寻找它，我还设法找到了一些线程，上面写着“Corona SDK 中尚未添加 Admob 支持”，但这些帖子已经很老了。

现在，在这个时间点.. Corona 是否添加了对 Admob 的支持..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T13:54:02.357

Corona SDK 现在正式支持 AdMob：[http ://docs.coronalabs.com/daily/plugin/ads-admob/](http://docs.coronalabs.com/daily/plugin/ads-admob/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:41:19.937

Corona SDK 不正式支持 AdMob。您可以使用 GitHub 上称为 AdMediator 的变通方法。由于是一种非官方方法，这样做可能会给您的 AdMob 帐户带来风险。

您过去可以通过 WebView 使用 Adsense 风格的广告，但 Google 已将其淘汰。

[Corona SDK 的 AdMediator](https://github.com/deniza/Ad-Mediator-for-Corona/wiki/Documentation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:45:15.933

不，Corona 不支持 AdMob（还...）

但是论坛中有一些技巧可以让它在 Android 上运行。

我没有看到让它在 iOS 上运行的技巧。

# ios - 我是否通过 prepareForSegue 传递了相同的对象？

> ID：14662718
> 
> 赞同：0
> 
> 时间：2013-02-02T14:08:53.430
> 
> 标签：ios, objective-c, cocoa-touch, segue

我`segue`在故事板中创建了一些。它有一些标识符。我在方法中配置`destinationViewController`并分配了一些对象作为 this 的属性。这个对象也是我的控制器的属性，它调用了. 在我有，当我按下它时，我打电话给其他人，然后我回到以前的视图。当我在这个 viewController 中时，传递给这个对象的属性等于. 有可能做这样的事情吗？：`destinationViewController``prepareForSegue:sender:``segue``destinationViewController``BarButtonItem``segue``destinationViewController``nil`

1.  当我在`SourceViewController`其中时，`someProperty`我设置了`DestinationViewController`.
2.  当我从`DestinationViewController`我的财产回来时， `someProperty`in `SourceViewController`is not null - 它应该与切换 viewController 之前相同。

这是可能的？

现在我必须从 to 传递`someObject`，`A`当`B`我切换视图时，我必须`someObject`从`B`to传递`A`——同一个对象。

感谢您的回复和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:11:20.253

当您返回另一个视图时，尽量不要使用另一个 segue。无论是使用导航控制器还是在模式中，您都应该能够关闭当前视图。至于您需要相同的对象，请在将控制器 A 传递给控制器​​ B 时保留对控制器 A 中对象的引用。两个控制器都将引用同一个对象，因此在控制器 B 中对其进行更改将显示在您的对象中自动参考控制器 A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:21:05.037

您真的不应该这样做，原因是当您返回 SourceViewController 时，它实际上会创建一个新的 VC 并将其推送到堆栈上，因此您的堆栈最终会变成“SourceVC、DetailVC、SourceVC”，这可能不是您想要的！您可能希望您的导航控制器弹出 DetailVC ([ `self.navigationController dismissViewControllerAnimated:YES]`)

至于房产。这取决于属性是什么以及您是否拥有更多属性，但根据 MVC 模式，您很有可能实际上想要创建一个模型类来为您处理此变量。然后，当您推送到 DetailVC 时，您将传递对模型的引用，并且 DetailVC 可以通过模型访问该变量（获取或设置），然后当您弹回 SourceVC 时，它可以使用对模型的引用，它已经有检索新设置的属性。

# c# - 修改动态属性选择器 Lambda

> ID：14662719
> 
> 赞同：2
> 
> 时间：2013-02-02T14:08:58.630
> 
> 标签：c#, .net, entity-framework, lambda, expression-trees

我编写了一个小方法，可以从字符串构建属性选择器 lambda - 类似于 Dynamic LINQ 所做的以及 Stack Overflow 上的一百万个其他示例。

例如，给定 this `Expressions.PropertySelector<Type, PropertyType>("Source.Date")`，如果编译，它会返回一个`Func`类似于 this`(Type) => type.Source.Date`的 。

无论如何，我遇到了一种情况，我不仅需要选择属性，还需要调用由其类型定义的方法。

因此，例如，我想要与此等效的：`(Type) => Type.Source.Date.ToString("Y")`. 我知道我可能可以修改我的`PropertySelector`方法以检测方法调用并构建适当的表达式，但我很好奇是否有更好的方法。

对于那些好奇我为什么需要这个的人：基本上它用于我正在构建的实体框架支持的存储库。我有一个方法允许调用者传递一个 lambda 来表示要分组的属性。调用者自己根据用户输入构造 lambda。所以我认为这样做是最好的方法。

但是，例如，如果要分组的属性是`DateTime`. 我会对其格式化的字符串进行分组。

处理这种情况的最佳方法是什么？理想情况下，我希望调用者在动态构建表达式后对其进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T20:32:24.227

如果我理解正确，您有两个表达式：一个 from `T1`to `T2`，第二个 from `T2`to`T3`并且您想将它们组合成一个（from `T1`to `T3`）。您可以使用[LINQKit](http://www.albahari.com/nutshell/linqkit.aspx)来执行此操作：

```
public static Expression<Func<T1, T3>> CombineExpressions<T1, T2, T3>(
    Expression<Func<T1, T2>> first, Expression<Func<T2, T3>> second)
{
    Expression<Func<T1, T3>> result = x => second.Invoke(first.Invoke(x));
    // I think double Expand here is necessary because of Invoke inside Invoke
    return result.Expand().Expand();
} 
```

例如：

```
Expression<Func<Person, DateTime>> getDateExpression =
    person => person.DOB;
Expression<Func<DateTime, string>> dateFormatExpression =
    date => date.ToString("Y");
Expression<Func<Person, string>> result =
    CombineExpressions(getDateExpression, dateFormatExpression); 
```

在这里，`result`包含表达式`(Person x) => x.DOB.ToString("Y")`。

您可以动态构建一个或两个表达式，它不会改变组合的工作方式。

# r - 如何绘制 3 组比例维恩/欧拉图？

> ID：14662721
> 
> 赞同：6
> 
> 时间：2013-02-02T14:09:19.053
> 
> 标签：r, plot, venn-diagram

我有一组微阵列数据，我想按照附图（用PowerPoint完成）来表示。我已经尝试了可用于 R 的各种软件包（VennDiagram、venneuler、limma）。但是，我无法按比例绘制数据或显示值。

有谁知道怎么做？

可以在下面找到要玩的代码！

谢谢！

```
# you might need these:
source("http://www.bioconductor.org/biocLite.R")
biocLite("limma")
library(VennDiagram)
library(limma)
library(venneuler)

# Trial 1: Kind of proportional but difficult to customize for labels and other stuff
su <- venneuler(c(A=162, B=104, C=86, "A&B"=206, "A&C"=112, "B&C"=90 ,"A&B&C"=2433))
plot(su)

# Trial 2: looks nice but not proportional
hw <- c(F,F,F,F,T,T,T,T)
hm <- c(F,F,T,T,F,F,T,T)
hr <- c(F,T,F,T,F,T,F,T)
c4 <- cbind(hw,hm,hr)
e <- vennCounts(c4)
e[1:8,4] <- c(3193,86,104,90,162,112,206,2433)
vennDiagram(e) 
```

![在此处输入图像描述](../Images/a61b2b9c45ca41e67de41bd19df013ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T13:47:35.247

我会推荐 VennDiagram 包： [http ://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf](http://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf)

在 pake 19 中，您会发现 10 个非常好的示例（包括高级示例和简化示例）。到目前为止，我还没有发现我需要它做的任何事情。

作为对最终来到这里的其他人的一般帮助（与此问题不直接相关，但相关），我建议您使用[此搜索来寻找您的答案](https://www.google.se/search?q=site%3ahttp://unix.stackexchange.com+OR+site%3ahttp://stackoverflow.com+OR+site%3ahttp://superuser.com+OR+site%3ahttp://askubuntu.com+OR+site%3ahttp://cran.r-project.org+OR+site%3ahttp://rprogramming.net+OR+site%3ahttps://http://manuals.bioinformatics.ucr.edu/home/R_BioCondManual+OR+site%3ahttps://sites.google.com/a/bioinformatics.ucr.edu/bioinformatics-manuals+OR+site%3ahttp://en.wikibooks.org/wiki/R_Programming++venn+diagrams+&ie=utf-8&oe=utf-8&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a&channel=sb&gfe_rd=ctrl&ei=UkEsU-SkIOSO8QfSz4CwBg&gws_rd=cr#q=site%3Ahttp%3A%2F%2Funix.stackexchange.com+OR+site%3Ahttp%3A%2F%2Fstackoverflow.com+OR+site%3Ahttp%3A%2F%2Fsuperuser.com+OR+site%3Ahttp%3A%2F%2Faskubuntu.com+OR+site%3Ahttp%3A%2F%2Fcran.r-project.org+OR+site%3Ahttp%3A%2F%2Frprogramming.net+OR+site%3Ahttps%3A%2F%2Fhttp%3A%2F%2Fmanuals.bioinformatics.ucr.edu%2Fhome%2FR_BioCondManual+OR+site%3Ahttps%3A%2F%2Fsites.google.com%2Fa%2Fbioinformatics.ucr.edu%2Fbioinformatics-manuals+OR+site%3Ahttp%3A%2F%2Fen.wikibooks.org%2Fwiki%2FR_Programming++venn+diagram&rls=org.mozilla%3aen-US%3aofficial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-24T11:19:29.257

使用我的`nVennR`包，这可以通过两种方式完成，如[小插图](https://cran.r-project.org/web/packages/nVennR/vignettes/nVennR.html)所示。在这个例子中，

```
> library(nVennR)
> myV <- createVennObj(nSets = 3, sNames = c('A', 'B', 'C'), sSizes = c(0, 86, 104, 90, 162, 112, 206, 2433))
> myV <- plotVenn(nVennObj = myV) 
```

[![三组，比例](../Images/707e42f0cb348a5a5601e0544d4d45a9.png)](https://i.stack.imgur.com/uLQYc.png)

包可以代表更大数量的集合。

# android - Android - 在可绘制对象中获取形状颜色/实体

> ID：14662726
> 
> 赞同：1
> 
> 时间：2013-02-02T14:10:16.277
> 
> 标签：android, drawable, shape

我想获取存储在可绘制的 xml 文件中的形状的颜色。

我来到了将 Drawable 存储在 Drawable 变量中的步骤，所以，现在我想获取形状的颜色（实心标签）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-17T08:27:06.070

```
GradientDrawable gradientDrawable = (GradientDrawable)view.getBackground();
Class<? extends GradientDrawable> aClass = gradientDrawable.getClass();
try {
    Field mFillPaint = aClass.getDeclaredField("mFillPaint");
    mFillPaint.setAccessible(true);
    Paint strokePaint= (Paint) mFillPaint.get(gradientDrawable);
    int solidColor = strokePaint.getColor();
} catch (Exception e) {
    e.printStackTrace();
} 
```

我认为***solidColor***是你想要得到的。

# ios - CollectionView 窗口保持黑色

> ID：14662727
> 
> 赞同：4
> 
> 时间：2013-02-02T14:10:28.100
> 
> 标签：ios, objective-c, uiviewcontroller, uicollectionview, custom-cell

我正在编写 iOS 应用程序。我有 CollectionView 窗口，并在其中通过拖放添加了一个 customCell。当我运行应用程序时，CollectionView 窗口的一部分是黑色的。集合可重用视图标识符设置为“ItemCell”。自定义视图单元设置为“CustomViewCell”类。CollectionView 的 dataSource 和 delegate 已设置为 FirstViewController。那是代码：

```
FirstViewcontroller:
#import <UIKit/UIKit.h>
#import "CustomViewCell.h"

@interface FirstViewController : UIViewController<UICollectionViewDataSource, UICollectionViewDelegate>
@property (weak, nonatomic) IBOutlet UITextField *txtField;

- (IBAction)slideRed:(id)sender;

- (IBAction)slideGreen:(id)sender;
- (IBAction)slideBlue:(id)sender;
- (IBAction)btnAdd:(id)sender;

@end 
```

.m 文件：

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}
-(void)viewDidAppear:(BOOL)animated
{

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 10;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 5;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{

    CustomViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ItemCell" forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[CustomViewCell alloc]init];
    }

    cell.label.text = @"KitKat";
    //cell.lblMain.textColor = [UIColor whiteColor];
    // cell.backgroundColor = [UIColor blackColor];

    return cell;
}

- (IBAction)slideRed:(id)sender {
}

- (IBAction)slideGreen:(id)sender {
}

- (IBAction)slideBlue:(id)sender {
}

- (IBAction)btnAdd:(id)sender {
}
@end 
```

自定义视图单元：

```
#import "CustomViewCell.h"

@implementation CustomViewCell
@synthesize label;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

@end 
```

如何强制该 collectionView 窗口显示带有标签的 customCell。然而它只是一个黑窗。此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-15T14:10:07.850

无法使默认透明度起作用。但是一个解决方法解决了这个问题。1\. 选择collectionView。2\. 通过单击“背景”属性添加颜色。3\. 选择一种颜色（在我的例子中是“白色”） 4\. 将颜色“不透明度”设置为“0%”vola.. 你会得到一个透明的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T05:54:28.170

您可能需要一个额外的步骤（我认为是类型转换），我发现这有助于将整个过程联系在一起。这是我要比较的代码：

```
- (CustomViewCell *)collectionView:(UICollectionView *)collectionView
              cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"collectCell";
    CustomViewCell *customCell = (CustomViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

    return customCell;
} 
```

www 的评论是正确的，您需要初始化您的 UI 元素`(id)initWithFrame:(CGRect)frame`并将它们添加到您`self.contentView addSubview:viewElement`的相同方法中。例如：

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
    if (self) {
        stringLabel = [[UILabel alloc] init];
        //set the properties of your element
        [self.contentView addSubview:stringLabel];
    }
return self;
} 
```

您可能还想试试这个：

`[collectionView registerClass:[CustomViewCell class] forCellWithReuseIdentifier:@"collectCell"];`

# ruby-on-rails - 使用 SAX Parser 获取多个子节点？

> ID：14662728
> 
> 赞同：0
> 
> 时间：2013-02-02T14:10:32.000
> 
> 标签：ruby-on-rails, ruby, nokogiri, sax, saxparser

我有一个大型的本地 XML 文件（24 GB），其结构如下：

```
<id>****</id>
<url> ****</url> (several times within an id...) 
```

我需要这样的结果：

```
id1;url1
id1;url2
id1;url3
id2;url4
.... 
```

我想将 Nokigiri 与 SAX Parser 或 Reader 一起使用，因为我无法将整个文件加载到内存中。我正在使用 Ruby Rake 任务来执行代码。

我的 SAX 代码是：

```
task :fetch_saxxml => :environment do

  require 'nokogiri'
  require 'open-uri'

  class MyDocument < Nokogiri::XML::SAX::Document
    attr_accessor :is_name

    def initialize
      @is_name = false
    end

    def start_element name, attributes = []
      @is_name = name.eql?("id")
    end

    def characters string
      string.strip!
      if @is_name and !string.empty?
        puts "ID: #{string}"
      end
    end

    def end_document
      puts "the document has ended"
    end

  end

  parser = Nokogiri::XML::SAX::Parser.new(MyDocument.new)
  parser.parse_file('/path_to_my_file.xml')

end 
```

为了获取文件中的 ID，这很好，但我也需要获取每个 id 节点中的 URL。

如何在该代码中添加“每个都做”之类的内容来获取 URL 并获得如上所示的输出？或者是否可以在“字符”中调用多个动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:32:49.507

实际上，这是在多个节点发生时解析它们的解决方案。SAX 解析器的问题在于您必须找到一种方法来处理“&”等特殊字符……但那是另一回事了。

这是我的代码：

```
class MyDoc < Nokogiri::XML::SAX::Document
  def start_element name, attrs = []
    @inside_content = true if name == 'yourvalue'
    @current_element = name
  end

  def characters str

    if @current_element == 'your_1st subnode'

    elsif @current_element == 'your 2nd subnode'

    end
    puts "#{@current_element} - #{str}" if @inside_content && %w{your_subnodes here}.include?(@current_element)
  end

  def end_element name
    @inside_content = false if name == 'yourvalue'
    @current_element = nil
  end

end

parser = Nokogiri::XML::SAX::Parser.new(MyDoc.new)
parser.parse_file('/path_to_your.xml')

end 
```

# php - 创建 wordpress 循环 - 使用 get_template_part 还是使用函数？

> ID：14662729
> 
> 赞同：0
> 
> 时间：2013-02-02T14:10:36.723
> 
> 标签：php, wordpress, loops

我正在创建自定义循环，然后创建一个“动态”外观的网站（可以调用不同的模块以使每个页面看起来不同）。

我的问题是，使用循环执行此操作的正确方法是什么。

我是否基于具有名称变体的原始 loop.php 为每个模块创建单独的模板文件并使用 get_template_part 调用它们？还是我只是为每个模块创建一个函数并使用函数名称调用它们？

我认为两者都会起作用，所以很困惑该走哪条路线。

Ps 通过模块，我的意思是主页（例如）可以放置多个不同外观的块，并以不同方式呈现的帖子循环（想想 theverge.com）并制作自定义主页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:22:19.067

第一个选项更好，因为有意义的文件名在 get_template_part() 中更易于使用和理解。通常我们使用 content.php，但是当您需要更多视图或更多子模块时，文件名中的前缀将发挥重要作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:04:12.313

我不知道你所说的“模块”是什么意思。这不是 WordPress 使用的术语，您也没有真正定义它。

**编辑：**根据下面的评论，听起来您可能指的是 WordPress 称为[“小部件”的“模块”](http://codex.wordpress.org/WordPress_Widgets)。虽然经常提到“侧边栏小部件”，但您可以将它们放在任何您想要的地方，而不仅仅是放在一边。这些将是动态交换内容的另一种方式，但方式不同。可以根据需要从后端添加或删除小部件。

不过，一般来说，使用[`get_template_part`](http://codex.wordpress.org/Function_Reference/get_template_part). 它提供了与为每个主题部分创建函数大致相同的功能（但不完全相同），并且还允许[子主题](http://codex.wordpress.org/Child_Themes)覆盖功能。如果子主题添加与父模板部分同名的模板部分，则使用子主题的部分。这可以很方便。随着 WordPress 核心代码的变化，在可能的情况下使用核心功能还有助于使您的代码随着时间的推移变得更加健壮。

# php - 我可以使用 PHP 获取 iframe 父窗口的 url 吗？

> ID：14662731
> 
> 赞同：18
> 
> 时间：2013-02-02T14:10:44.477
> 
> 标签：php, url

我在网页上有一个 iframe，我想从 iframe 获取父窗口的 url。是的，我一直在网上搜索，但我一直在使用 JavaScript 获得解决方案。

那么你们知道任何只使用 PHP 的解决方案吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-02T14:15:39.737

如果没有客户端显式发送数据（例如使用 AJAX），服务器端脚本无法了解客户端的任何信息。

如果您可以控制 iframe 本身，则始终可以在查询字符串中传递变量并使用以下命令访问它们`$_GET`：

**HTML**

```
<iframe src="http://example.com/file.php?variable=value"></iframe> 
```

**PHP**

```
<?php

    echo $_GET['variable'] // Outputs 'value'

?> 
```

# 更新（这实际上可能）

可能有一种使用`$_SERVER['HTTP_REFERER']`. 包含 iframe 的 HTML 文件在请求文件时会发送一些标头，其中一个似乎是 HTTP_REFERER。我在本地对此进行了测试，它似乎有效。

唯一的缺点是您不知道引荐来源网址是否是 iframe。同样，如果您可以控制 iframe，您可以使用上面的方法传递一个变量，说它是一个 iframe，然后使用下面的方法动态获取 URL。

**例如，假设这个文件的 URL 是[http://example.com/](http://example.com/)：**

```
<iframe src="http://example.com/file.php"></iframe> 
```

**PHP 文件，我们将其命名为 file.php：**

```
<?php
    echo $_SERVER['HTTP_REFERER']; // Should output http://example.com.
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-10T10:09:10.757

我遇到了同样的问题，我在 iframe 中运行搜索例程，并希望能够从其他页面创建链接，从而自动执行所述 iframe 的搜索功能。

在阅读了所有“只能在 javascript 中完成”之后，我使用了这个：

```
$topurl=$_SERVER['HTTP_REFERER'];
$q=substr($topurl,strpos($topurl,'=')+1); 
```

粗鲁但对我的需要有效。我知道您可以花哨并分解 url 的所有参数，但我只需要一个搜索词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:13:28.287

那行不通，您可以使用JavaScript。

# c# - 一种类型的多线程，一种功能

> ID：14662739
> 
> 赞同：-1
> 
> 时间：2013-02-02T14:11:22.907
> 
> 标签：c#, multithreading, function, for-loop

首先我很抱歉，如果有另一个这样的线程，我没有看到它！我的问题是：我想创建多个线程。但是这些线程必须执行相同的功能。我怎样才能做到这一点？像这样：

```
for(int i=0;i<20;i++)
{
  Thread t = new Thread(myFunction);
  t.Start();
} 
```

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:24:01.860

我看不出你所拥有的有什么问题（也许如果你在 myFunction 中分享一些代码，我们可以获得更好的图片）。

我建议您使用 ThreadPool，或者使用 Task Parallel 库而不是手动创建自己的线程。

这里有一些技巧：

```
System.Threading.Tasks.Parallel.For(0, 20, myFunction); // myFunction should accept an int, and return void) 
```

如果 myFunction 的签名不同，您可以使用 lambda 来“翻译”——请注意，您正在调用一个在此处调用函数的函数：

```
Parallel.For(0, 20, i => myFunction()); //(I could pass any param to my function in this example) 
```

这是一个线程池方式

```
System.Threading.Threadpool.QueueUserWorkItem(myFunction) // myFunction needs to accept an object 
```

// 下面是如何使用任何签名将其排队到线程池中

```
ThreadPool.QueueUserWorkItem(s => myFunction()); 
```

另一个海报已经提到使用任务来做到这一点。如果你正在做的事情很简单，我会使用 Parallel.For。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:15:53.247

为什么不使用任务？它也是异步的（因为我认为这就是您要寻找的东西。

```
for(int i=0;i<20;i++)
{
  Task task = new Task(new Action(myFunction));
  task.Start();
} 
```

可以在这里找到区别：

[任务和线程有什么区别？](https://stackoverflow.com/questions/4130194/what-is-the-difference-between-task-and-thread)

# linker - cuda 未定义对 __constant__ 数组的引用

> ID：14662741
> 
> 赞同：0
> 
> 时间：2013-02-02T14:11:41.117
> 
> 标签：linker, cuda, undefined-reference

我使用 nvcc 遇到了以下问题。我使用单独的编译（最后让它与[cmake](https://stackoverflow.com/questions/13683575/cuda-5-0-separate-compilation-of-library-with-cmake)`__device__ __constant__ (extern) type1<type2> var[length]`一起运行）并且在声明数组时遇到了问题。

这是我的标题：

```
#include <type.h>
#include <type2.h>

#ifndef GUARD_H_
#define GUARD_H_

namespace NameSpace1{
  namespace NameSpace2{

    namespace Constants{
      __device__ __constant__ extern Type1<Type2> array[10];
      __device__ Type1<Type2> accessConstantX(size_t index);
    }
  }
}
#endif 
```

还有她我的 .cu 文件：

```
#include <header.h>
#include <assert.h>

namespace NameSpace1{
  namespace NameSpace2{

    namespace Constants{
      __device__ Type1<Type2> accessConstantX(size_t index){
    assert(index <= 9);
    return array[index];
      }
    }
  }
} 
```

我从中间单独的编译步骤中得到以下错误：

```
nvlink error   : Undefined reference to '_ZN12NameSpace115NameSpace29Constants17arrayE' 
```

这是访问 .cu 文件的结果。感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:19:30.213

我发现我的错误是什么，正在阅读[这篇文章](https://stackoverflow.com/questions/1578635/declaring-a-global-in-a-global-header-file)。原来我不明白如何在头文件中正确声明全局变量。我的问题与 nvcc 无关。感谢@talonmies 的帮助，它为我指明了寻找答案的方向。

这是我的问题的解决方案：

这是我的标题：

```
#include <type.h>
#include <type2.h>

#ifndef GUARD_H_
#define GUARD_H_

namespace NameSpace1{
  namespace NameSpace2{

    namespace Constants{
      extern __device__ __constant__ extern Type1<Type2> array[10];
      __device__ Type1<Type2> accessConstantX(size_t index);
    }
  }
}
#endif 
```

还有她我的 .cu 文件：

```
#include <header.h>
#include <assert.h>

namespace NameSpace1{
  namespace NameSpace2{

    namespace Constants{
      __device__ __constant__ Type1<Type2> array[10];
      __device__ Type1<Type2> accessConstantX(size_t index){
        assert(index <= 9);
        return array[index];
      }
    }
  }
} 
```

# jquery - jQuery Mobile - 一一加载数据

> ID：14662743
> 
> 赞同：1
> 
> 时间：2013-02-02T14:11:43.450
> 
> 标签：jquery, jquery-mobile

我需要在 jQuery Mobile 应用程序中设计这个场景。我有 2 个屏幕 a) 登录 b) 仪表板主页

仪表板主屏幕具有以下组件 a) 列表框 A 动态显示类型 A 的项目及其各自的计数。2）列表框B动态显示类型B的项目及其各自的计数。3）列表框 C 显示固定的 3 个项目（类型 C）及其各自的计数。

每个计数都被按钮覆盖以深入到另一个屏幕以获取更多详细信息。

以下 Web 服务可用 a) 用于验证用户和有效用户的登录服务，A 类项目和 B 类项目的列表。b)Count A 服务，分别提供 A 类项目的计数。c)count B 服务，分别提供 B 类物品的计数。d)count C 分别提供 C 类项目的计数。

所有服务都是基于 SOAP 的。

当用户单击登录按钮时，将进行 Ajax 调用以调用登录服务并下载可用的 A 类和 B 类项目并存储在本地存储中。本地存储数据后，用户将导航到仪表板屏幕以显示 A 类和 B 类项目，而无需计数。

现在需要通过计数 A 、计数 B 和计数 C ajax 调用来显示各自的计数。

我想知道以这样的方式显示仪表板屏幕的最佳方法，即首先加载项目，然后是它们的计数。登录后用户应该看到带有项目的仪表板屏幕，而无需太多等待，然后在订单计数服务中异步地一个一个地计数被称为。

我不希望用户在点击登录按钮后在登录屏幕上等待，直到调用所有服务并且数据可用。我希望当数据可用时，它们应该在用户被重定向到仪表板后显示在屏幕上。

请建议我实现这一目标的方法和方法。我是 jQuery 的初学者。如果这是一个天真的 Q，请原谅。

任何建议都会受到赞赏。这种场景的任何链接、教程、演示也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:50:23.600

我从你的 Q 中得到的是你想要加载页面而不让用户等待它加载；那么你可能可以使用

```
jQuery.mobile.loadPage("wantedpage.html",{options}); 
```

此功能将在后台加载页面；

或者你可以检查这个：http: [//jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html) 希望这对你有帮助。

# html - jQuery 集合问题

> ID：14662749
> 
> 赞同：1
> 
> 时间：2013-02-02T14:11:57.413
> 
> 标签：html, css, collections

我的脚本有问题。我有我的文件结构列表（所以这是由递归 php 函数构建的，我不知道我有多少子文件或子目录）。默认情况下，文件夹是隐藏的，当用户点击文件夹时，包含 ul 的第一个会向下滑动。问题是 $('.folder') 选择器选择子文件夹，然后选择父文件夹等等，因为每个文件夹都有相同的文件夹类。因此，当我单击打开的文件夹的文件夹时，单击的文件夹将打开，但父文件夹将关闭。我希望描述足够清楚。

这是一些代码：

HTML：

```
<ul>
 <li class="file">file1.txt</li>
 <li class="folder">
  folder1
    <ul>
      <li class="folder">
        folder2
          <ul>
            <li class="file">fileA.txt</li>
            <li class="file">fileB.txt</li>
          </ul>
      </li>
      <li class="file">file1A.txt</li>
    </ul>
  </li>
  <li class="file">file2.txt</file>
</ul> 
```

JS：

```
$(document).ready(function() {
  $('.folder').click(function() {
    $(this).children('ul:first').slideToggle();
  });
}); 
```

因此，当我单击文件夹 2 时，文件夹 2 的 ul 会向下滑动，但之后文件夹 1 会向上滑动，因为文件夹 2 和文件夹 1 都在 $('.folder') 的集合中。

解决办法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:15:33.540

```
$('.folder').click(function(e) {
    $(this).children('ul:first').slideToggle();
    e.stopPropagation();
    return false;
}); 
```

尝试使用`e.stopPropagation()`. 它可以防止对 PARENT 执行操作。

[***工作小提琴***](http://jsfiddle.net/5dtDm/)

# ruby-on-rails - Aglie Web 开发中的 Ajax

> ID：14662755
> 
> 赞同：1
> 
> 时间：2013-02-02T14:13:02.673
> 
> 标签：ruby-on-rails, ajax

我正在用著名的书“Aglie web development with rails(4th editon)”来研究rails。在我完成示例“添加一点 Ajax”之后，我遇到了麻烦。我已将“create.js.rjs”更改为 create.js.rjs，其代码为：

```
$('#cart').html("<%= j render @cart  %>"); 
```

之后，当我单击“添加到购物车”按钮时，购物车显示两个相同的产品。html 代码在这里：

```
<tr>
  <td>1×</td>
  <td>CoffeeScript</td>
  <td class="item_price">$36.00</td>
</tr>      
<tr>
  <td>1×</td>
  <td>CoffeeScript</td>
  <td class="item_price">$36.00</td>
</tr>
  <tr class="total_line">
  <td colspan="2">Total</td>
  <td class="total_cell">$72.00</td>
</tr> 
```

在我重新加载页面后，它是正确的，只显示一项。

日志：

```
 Started POST "/line_items?product_id=10" for 127.0.0.1 at 2013-02-02 21:48:41 +0800
 Processing by LineItemsController#create as JS
 Parameters: {"authenticity_token"=>"K89hdtwnYs8TiSqYlYXVtWv1DixGPM8a4TnmDbudRqc=",  "product_id"=>"10"}
 Cart Load (0.2ms)  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 40]]
 Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY title LIMIT 1  [["id", "10"]]
 LineItem Load (0.4ms)  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = 40 AND "line_items"."product_id" = 10 LIMIT 1(0.1ms)  begin transaction
 SQL (0.6ms)  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "quantity", "updated_at") VALUES (?, ?, ?, ?, ?)  [["cart_id", 40], ["created_at", Sat, 02   Feb 2013 13:48:41 UTC +00:00], ["product_id", 10], ["quantity", 1], ["updated_at", Sat, 02 Feb 2013 13:48:41 UTC +00:00]](166.5ms)  commit transaction(0.2ms)  begin transaction(0.2ms)  commit transaction
 LineItem Load (0.6ms)  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = 40
 Product Load (0.3ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 10 ORDER BY title LIMIT 1
 Rendered line_items/_line_item.html.erb (4.4ms)
 Rendered carts/_cart.html.erb (11.7ms)
 Rendered line_items/create.js.erb (14.1ms)
 Completed 200 OK in 199ms (Views: 18.6ms | ActiveRecord: 169.2ms)

  Started GET "/" for 127.0.0.1 at 2013-02-02 21:50:58 +0800
  Processing by StoreController#index as HTML
  Product Load (0.4ms)  SELECT "products".* FROM "products" ORDER BY title
  Cart Load (0.2ms)  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 40]]
  Rendered store/index.html.erb within layouts/application (4.9ms)
  LineItem Load (0.4ms)  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = 40
  Product Load (0.5ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 10 ORDER BY title LIMIT 1
  Rendered line_items/_line_item.html.erb (3.0ms)
  Rendered carts/_cart.html.erb (7.3ms)
  Completed 200 OK in 29ms (Views: 25.3ms | ActiveRecord: 1.4ms) 
```

非常感谢您的帮助！

# c++ - Qt - 在大文本缓冲区中滚动

> ID：14662761
> 
> 赞同：2
> 
> 时间：2013-02-02T14:13:24.793
> 
> 标签：c++, qt, text, qt4, scroll

我有一个巨大的文本缓冲区，其中每一行都是通过库生成的，我希望我的 QPlainTextEdit 小部件能够使用我的 QScrollBar 以编程方式加载其中的一部分。

这是我的想法：

*   用**push_back**加载**向量 <string>**中的每一行，并用总行数存储一个**计数**变量
*****   使用 QScrollBar 加载其值位置 + 一些其他行来填充编辑框区域****

 ****这可能有效，但我发现**push** 'ing **_back**向量中的每一行都非常慢，即使我为其元素**保留空间。**如果我将每一行附加到一个相当快的**字符串**，但是我需要用 '\n' 字符分割每一行。

我需要一种快速 push_back 或能够在巨大的文本缓冲区中快速获取 n 行的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T05:33:55.437

我遇到了类似的问题，您可能正在寻找的是惰性实例化。获取文件中的总行数。由于您的文本框仅显示 n 行，因此当滚动条转到位置 y（行 y）时，仅显示文件中的行 [y, n+y]

如果您想要更多的缓冲区，请考虑将数据分解为逻辑页面。即，如果您的“页面”大小为 200 行，那么当您通过滚动条转到第 300 行时，您知道要加载第 2 页。

逐行读取文件总是线性时间。但是程序速度变慢是由于在内存中保留了大量数据。****

# cuda - Cuda 内核启动失败

> ID：14662765
> 
> 赞同：0
> 
> 时间：2013-02-02T14:14:01.823
> 
> 标签：cuda, gpgpu, gpu

这是我的代码。我有一个 (x,y) 对数组。我想为每个坐标计算最远点。

```
#define GPUERRCHK(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
   if (code != cudaSuccess)
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}

__device__ float computeDist( float x1, float y1, float x2, float y2 )
{
    float delx = x2 - x1;
    float dely = y2 - y1;
    return sqrt( delx*delx + dely*dely );
}

__global__ void kernel( float * x, float * y, float * dev_dist_sum, int N )
{
    int tid = blockIdx.x*gridDim.x + threadIdx.x;
    float a = x[tid];  //............(alpha)
    float b = y[tid];  //............(beta)
    if( tid < N )
    {
    float maxDist = -1;
    for( int k=0 ; k<N ; k++ )
    {
        //float dist = computeDist( x[tid], y[tid], x[k], y[k] ); //....(gamma)
        float dist = computeDist( a, b, x[k], y[k] );             //....(delta)
        if( dist > maxDist )
        maxDist = dist; 
    }
    dev_dist_sum[tid] = maxDist;
    }
}

int main()
{
.
.

    kernel<<<(N+31)/32,32>>>( dev_x, dev_y, dev_dist_sum, N );
    GPUERRCHK( cudaPeekAtLastError() );
    GPUERRCHK( cudaDeviceSynchronize() );

.
.

} 
```

我有一个 NVidia GeForce 420M。我已经验证 cuda 在我的计算机上可以使用它。当我为 N = 50000 运行上述代码时，内核无法启动并抛出错误消息“未指定的错误消息”。但是，对于像 10000 这样的较小值，它似乎可以正常工作。

此外，如果我注释掉 alpha、beta、delta（请参阅代码中的标记）并取消注释 gamma，则该代码甚至适用于较大的 N 值，例如 50000 或 100000。

我想使用 alpha 和 beta 来通过更多地使用线程内存而不是全局内存来减少内存流量。

我如何对这个问题进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:12:26.477

@mkuse。gridDim 可以可视化为网格中线程块的 2-D 空间排列，而 blockDim 是线程的 3-D 空间排列。例如，dim3 gridDim(2,3,1) 表示 x 方向有 2 个线程块，y 方向有 3 个线程块。您可以达到的最大值是 65536 = 2^16。dim3 blockDim(32,16,1) 处于线程粒度。x 方向 32 个线程，y 方向 16 个线程，总共 512 个线程。您可以使用线程 ID 访问每个线程。但是，由于您有多个块，因此您必须使用各自的 blockdims 和 griddims 来识别线程。

# angularjs - Angular.JS 中的指令是什么

> ID：14662766
> 
> 赞同：6
> 
> 时间：2013-02-02T14:14:07.040
> 
> 标签：angularjs

我很难理解 AngularJS 中的指令。AngularJS 自己的定义充其量是令人困惑的：

`Directives are a way to teach HTML new tricks. During DOM compilation directives are matched against the HTML and executed. This allows directives to register behavior, or transform the DOM.`

有人可以用编程教学中常用的简单英语解释 AngularJS 中的指令吗？就像是：`directives are funcions/objects that extends ...`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T15:45:35.263

它们是扩展 HTML、添加新元素和/或向现有元素添加新属性的一种方式。来自 Angular 的开发者指南：

*指令是由自定义属性、元素名称或类名称的存在触发的行为或 DOM 转换。指令允许您以声明方式扩展 HTML 词汇表。*

您可以使用它们来向 HTML 添加行为，定义一个*链接*函数来保持属于范围和 DOM 元素的变量之间的双向绑定，或者用于动态操作 DOM，定义一个可以修改甚至生成新的 DOM 元素和属性的*编译函数。*将其视为扩展 HTML 并将其转换为*特定领域语言*的一种方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T14:20:11.393

指令可以是属性、标签甚至是类名。

一旦您将它们写入 HTML 标记，它就会被 Angular 拾取并按照您定义的方式进行操作。

它使您能够定义新的自定义 HTML 元素，如 or ，或新的行为属性，如

```
<div angry></div> 
```

每当有人单击该 div 时，他都会收到“我很生气”并发出警报。

你基本上可以做你需要的每一个扩展，以使你的 html 尽可能简洁和易于理解。这一切都取决于你如何定义你的指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-05T06:42:39.920

AngularJS 指令是 HTML 模板标记（即属性、元素和 CSS 类）和支持 JavaScript 代码的组合。angularJs JavaScript 代码定义了 html 元素的 html 数据和行为。

AngularJs 指令用于扩展 HTML 词汇表，即它们用新的行为装饰 html 元素并帮助以有趣的方式操作 html 元素的属性。

AngularJS 提供了一些内置指令，例如 ng-app、ng-controller、ng-repeat、ng-model 等

# node.js - 使用 nodejs 在 Heroku 上的新 Relic

> ID：14662771
> 
> 赞同：2
> 
> 时间：2013-02-02T14:14:49.907
> 
> 标签：node.js, heroku, newrelic

如何使用 Node.js 在 Heroku cedar 堆栈上安装 New Relic？

官方文档即将发布...

Heroku 教程没有 nodejs。

[https://devcenter.heroku.com/articles/newrelic](https://devcenter.heroku.com/articles/newrelic)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T18:31:13.770

Node.js 的 New Relic 现在处于测试阶段：[https ://github.com/newrelic/node-newrelic/](https://github.com/newrelic/node-newrelic/)

如果您想在发布时收到通知，可以在此处进行操作：http: [//try.newrelic.com/nodejs](http://try.newrelic.com/nodejs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T21:54:53.547

New Relic 目前没有对 Node.js 的官方支持。我已经使用[Nodefly](http://apm.nodefly.com/)来满足一些分析需求。它的功能并不完全，但他们一直在努力使它变得更好。它非常易于使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-07T22:14:37.633

现在 New Relic 正式支持 Node.js。

[http://blog.newrelic.com/2013/10/24/node-joins-new-relic-family/](http://blog.newrelic.com/2013/10/24/node-joins-new-relic-family/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T16:51:06.197

New Relic 还没有对 Node.js 的官方支持。您可以使用像[Nodetime](https://addons.heroku.com/nodetime)这样的第 3 方 Heroku 插件来追踪问题。它目前处于测试阶段，并且是免费的。

# android - 无法在 Android 的平板电脑布局中调整按钮

> ID：14662772
> 
> 赞同：0
> 
> 时间：2013-02-02T14:14:50.843
> 
> 标签：android, android-tablelayout

我有 3 行显示按钮的平板电脑布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/TableLayout01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerInParent="true"
        android:stretchColumns="*" >

        <TableRow
            android:id="@+id/TableRow01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:text="Download1"
                android:textColor="#EDFF99"
                android:textStyle="bold" />

            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:text="Download2"
                android:textColor="#EDFF99"
                android:textStyle="bold" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1" >

            <Button
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:text="Upload1"
                android:textColor="#EDFF99"
                android:textStyle="bold" />

            <Button
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:text="Upload2"
                android:textColor="#EDFF99"
                android:textStyle="bold" />
        </TableRow>
                <TableRow
            android:id="@+id/TableRow01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:text="Download1"
                android:textColor="#EDFF99"
                android:textStyle="bold" />

            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:text="Download2"
                android:textColor="#EDFF99"
                android:textStyle="bold" />
        </TableRow>
    </TableLayout>

</RelativeLayou 
```

吨>

它的输出如图 1 所示。但我希望第 2 行可以覆盖其余区域并在屏幕中心查看（按钮）显示，如图 2 所示。![在此处输入图像描述](../Images/5a5498401f1f3216cc231dc2adfbe8c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:43:18.397

此代码为您提供所需的外观。请在发布到 stackoverflow 之前尝试一切。这其实很简单。这是屏幕截图：

[![](../Images/d68bcb1b0a148c5779eabd5f960e4e32.png)](https://i.stack.imgur.com/zF2SI.jpg)

```
<TableLayout
    android:id="@+id/TableLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:text="Download1"
            android:textColor="#EDFF99"
            android:textStyle="bold" />

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:text="Download2"
            android:textColor="#EDFF99"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_weight="1" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:text="Upload1"
            android:textColor="#EDFF99"
            android:textStyle="bold" />
    </TableRow>
            <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:text="Download1"
            android:textColor="#EDFF99"
            android:textStyle="bold" />

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:text="Download2"
            android:textColor="#EDFF99"
            android:textStyle="bold" />
    </TableRow>
</TableLayout> 
```

# html - 用正则表达式搜索和替换

> ID：14662774
> 
> 赞同：0
> 
> 时间：2013-02-02T14:14:59.690
> 
> 标签：html, regex, text-editor

我正在尝试用正则表达式搜索和替换，但它不起作用。

我有一些像这样的html：

```
<p><b>Noten</b></p>
<p><b>somethingelse</b></p>
<p><b>random extra</b></p>
<p><b>something 3</b></p> 
```

并希望它像这样：

```
<h2>Noten</h2>
<h2>somethingelse</h2>
<h2>random extra</h2>
<h2>something 3</h2> 
```

但是我如何找到所有正确的元素？我只能找到没有空格或数字的，如下所示：

```
<p><b>[a-z]*</b></p> 
```

而且我不知道如何替换它，以便`<p>`和`<b>`标签改变`<h2>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T14:20:04.760

测试它

```
var regex = /<p><b>([^>]+)<\/b><\/p>/ig;
var s="<p><b>Noten</b></p>";
var result = s.replace(regex, "<h2>$1<\/h2>");
alert(result); 
```

但我建议你使用 Dom 和 JQuery 来做这更容易

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:21:28.147

试试这个

它在 JavaScript 中

```
s="<p><b>Noten</b></p>"
s.replace("<p><b>","<h2>")
s.replace("</p></b>","</h2>") 
```

工作示例：

这是小提琴：http: [//jsfiddle.net/ZqqFv/2/](http://jsfiddle.net/ZqqFv/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T14:27:34.090

很大程度上取决于您尝试使用正则表达式的位置，但我只是简单地运行它一个

```
<p><b>

/<p><b>/<h2>/ 
```

第二次

```
<\/b><\/p>

/<\/b><\/p>/<\/h2>/ 
```

# javascript - jQuery添加div但不能移动/调整大小

> ID：14662778
> 
> 赞同：1
> 
> 时间：2013-02-02T14:15:33.290
> 
> 标签：javascript, jquery

我只是在玩jQuery，我在这里遇到了一个小问题。正如您在我的示例中看到的：http: [//jsfiddle.net/wzdzc/](http://jsfiddle.net/wzdzc/)

当您单击“添加 div”时，将添加具有正确类的 div。但是，您不能移动/调整它的大小？这是为什么？和/或我怎么能做到这一点？

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Draggable - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <style>
    #draggable { width: 150px; height: 150px; padding: 0.5em; }
    #wrapper { width: 500px; height: 500px; background: red; }
    .resize_drag { background-color: white; width: 150px; height: 150px;}
    #add_div { padding: 5px; background-color: yellow; width: 200px }
  </style>
  <script>

  $(function() {

    var coordinates = function(element) {

      element = $(element);

      var top = element.position().top;
      var left = element.position().left;

      $('#results').text('X: ' + left + ' ' + 'Y: ' + top);

    }

    $(".resize_drag").draggable({
        containment: 'parent',
        scroll: false,
        drag: function() {
            var $this = $(this);
            var thisPos = $this.position();
            var parentPos = $this.parent().position();
            var x = thisPos.left - parentPos.left;
            var y = thisPos.top - parentPos.top;
            $("#results").text(x + ", " + y);
        }
    });

    $( ".resize_drag" ).resizable({
      containment: 'parent',
      stop: function(event, ui) {
        var width = ui.size.width;
        var height = ui.size.height;
        $("#results2").text(width + ", " + height);
      }
    });

    $("#wrapper").draggable({});

    $("#add_div").on("click",function() {
      $("<div class='resize_drag'>DragMe</div>").appendTo('#wrapper');
    });

  });

</script>

</head>
<body>

<div id="wrapper">

  <div class="resize_drag">
    <p>Drag me around</p>
  </div>

  <div class="resize_drag">
    <p>Drag me around2</p>
  </div>

</div> <!-- end wrapper -->

  <div id="results"></div>
  <div id="results2"></div>

  <div id="add_div">Add DIV</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:28:23.853

您需要将 both`resizable`和`draggable`函数添加到新元素，因为`$(".resize_drag").draggable()`仅适用于现有元素：

```
 $("#add_div").on("click",function() {
      $("<div class='resize_drag'>DragMe</div>").appendTo('#wrapper').draggable().resizable();
    }); 
```

[小提琴](http://jsfiddle.net/6A5CZ/)

这是一个简化版本。如果您需要使用参数/事件运行这些函数，请将它们也添加到单击处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:42:25.137

问题在于添加新的 div 那不可拖动和可调整大小的 Chenge 代码 像这样

```
$("#add_div").on("click",function() {
  $("<div class='resize_drag'>DragMe</div>").appendTo('#wrapper').draggable({
    containment: 'parent',
    scroll: false,
    drag: function() {
        var $this = $(this);
        var thisPos = $this.position();
        var parentPos = $this.parent().position();
        var x = thisPos.left - parentPos.left;
        var y = thisPos.top - parentPos.top;
        $("#results").text(x + ", " + y);
    }
  }).resizable({
     containment: 'parent',
     stop: function(event, ui) {
        var width = ui.size.width;
        var height = ui.size.height;
        $("#results2").text(width + ", " + height);
     }
  });
});

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:19:28.277

```
$('.resize_drag').livequery(function() {
  $(this).resizable({...});
}); 
```

使用[http://archive.plugins.jquery.com/project/livequery](http://archive.plugins.jquery.com/project/livequery)插件

或者您必须在每个添加的元素上调用 $.resizable

# android - ListView 中的 SetOnClickListener

> ID：14662780
> 
> 赞同：0
> 
> 时间：2013-02-02T14:15:33.670
> 
> 标签：android, .net, xamarin.android

早上好，我实现了一个`listView`隐藏了一些信息的按钮和一个按钮，但是按钮的单击事件有问题，我使用的是 MonoDroid，我实现了界面`OnClickListener ()`，我的问题是，如果我设置`button.setOnclickListener (new MyClassClick ())`在`ListView`适配器内部，它每次`ListView`滚动都会创建一个对象，并且不能重用之前创建的对象，可以检查按钮是否已经有一个链接到他的动作？输入一个`GetOnclickListener ()`？

 ``public override View GetView(int position, View convertView, ViewGroup parent){

```
 var item = produtos[position];
        ViewHolderProdutos viewHolder;
        var view = convertView;
        if (view == null)
        {
            view = context.LayoutInflater.Inflate(Resource.Layout.ProdutoListItem,parent, false);
            viewHolder = new ViewHolder();
            viewHolder.Inicializa(view);
            view.Tag = viewHolder;
        }
        ProductsBase prod = (ProductsBase) productList[position];
        viewHolder = (ViewHolder)view.Tag;
        viewHolder.Bind(prod);
        var btnIncluir = view.FindViewById<Button>(Resource.Id.btnIncluir);
        //Evento Click do Botão Incluir
        btnIncluir.SetOnClickListener(new OnClickButton(productList[position].pro_codigo.ToString(), parent.Context));
        return view; 
```

}`  `对不起，如果文字混乱，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:00:13.543

在您`Adapter`的 s`GetView`方法中，您只需要设置`OnClickListener`when `convertView`is `null`。

```
public override View GetView(int position, View convertView, ViewGroup parent)
{
    var view = convertView;

    if (null == view)
    {
        //1\. inflate or create your views here
        //2\. Set OnClickListeners
    }

    //populate views with Adapter item data
} 
`````

# c# - 从 StreamReader 检索超过 65536 个字符

ID：14662784

赞同：0

时间：2013-02-02T14:15:57.377

标签：c#, buffer, streamreader

# php - Markdown 正则表达式中的原子组

> ID：14662785
> 
> 赞同：4
> 
> 时间：2013-02-02T14:15:58.500
> 
> 标签：php, regex, markdown

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:09:28.023

原子组后面的`+`量词意味着正则表达式引擎将尝试匹配组内的模式一次或多次。这与引擎只会尝试匹配模式一次的第二个表达式不同。

`+`后面没有惰性修饰符`?`，所以会贪婪匹配，即尽可能多的匹配。

分组可能是原子的，因为除了使组不被捕获外，它还可以防止在整个子表达式的每次完全匹配后进行任何回溯。

如果或一旦`\n*`组末尾的 未能匹配换行符，因为`+`引擎将开始尝试从头开始再次匹配组。如果它没有这样做，那么由于组是原子的，现有的匹配将被返回。

如果组不是原子的，引擎将回溯以尝试不同的方式来匹配刚刚成功匹配的内容，然后再次尝试匹配组的开头。

例如，如果匹配的最后三个字符是换行符，`\n*`它会首先放弃最后一个并尝试再次匹配组的开头。当失败时，它会给出另一个换行符并重试，依此类推。

回溯将继续到序列和`(.+\n)*`那里，由于与匹配的内容`.`和与匹配多少字符的灵活性，引擎可以通过多种方式匹配模式，然后再尝试再次匹配。`+``*`

整个子表达式可以以多种不同的方式匹配字符串的同一部分，因此在引擎确定无法进行进一步匹配之前，可能会进行大量低效、耗时的回溯。

原子团表示意味着可以避免这种情况。

# c++ - 使用 HLSL 在 VS2012 上编译时：float4 未定义

> ID：14662792
> 
> 赞同：0
> 
> 时间：2013-02-02T14:17:28.810
> 
> 标签：c++, directx, hlsl

我刚刚开始学习一些 DirectX 和 hlsl 的基础知识。我正在按照书中的示例进行操作。我对以下基本着色器有疑问：

```
float4 VS_Main( float4 pos:POSITION):SV_POSITION
{
return pos;
} 
```

情报说 float4 是一个未定义的标识符。据我所知，这应该是 HLSL 中用于定义 4 维向量的标准类型，但我无法获得足够的信息，这本书也无济于事。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:20:43.620

我认为 VS2012 上的 Intellisense 不支持 HLSL 关键字；你可以忽略它无法解决的事实`float4`。另请参阅：[VS2010 - HLSL Intellisense？](https://stackoverflow.com/questions/4269602/vs2010-hlsl-intellisense)（有些答案确实提到了VS2012）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:44:53.283

C++ 编译器不编译 HLSL。HLSL应该以资源的形式使用，然后应该在运行时加载。不能简单地创建一个`.cpp`文件并期望 HLSL 代码编译为 C++。

# ruby - 什么是`rubygems-update`？

> ID：14662794
> 
> 赞同：1
> 
> 时间：2013-02-02T14:17:30.963
> 
> 标签：ruby, rubygems, gem

宝石[`rubygems-update`](https://rubygems.org/gems/rubygems-update)有什么作用？手册说这是对 gem 的更新，但不清楚这意味着什么。我已经在我的计算机上安装了 gem（版本 1.8.25），但我能够在此之上安装`rubygems-update`版本 1.8.25（与 相同的版本号`gem`），从而生成 gem 版本 1.8.25。这意味着什么？做有什么区别：

```
gem update --system 
```

和

```
update_rubygems 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T14:28:09.533

如您所知，RubyGems 是 Ruby 的包管理框架，而 gems 是它的更新。

```
gem update --system 
```

这是正常的升级策略。对于安装的旧版本的RubyGems，分两步完成，如下两步：

```
gem install rubygems-update
update_rubygems 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:24:30.117

1.  gem ruby​​gems-update 有什么作用？

    `rubygems-update`是包含命令的 gem `gem`，它将安装到您的 ruby​​ bin 目录中，因此您可以使用诸如此类`gem install`的命令。

2.  `rubygems-update`你可以安装与你调用时出现的版本号相同的版本号的gem是什么意思`gem --version`？

    rubygems-update*的*版本号是`gem`命令在被要求时输出的版本号。如果您 cd 到 的内容`rubygems-update`，然后转到文件`command_manager.rb`，您将在第 138 行找到以下内容：

    ```
    when '-v', '--version'
    say Gem::VERSION
    terminate_interaction(0) 
    ```

    那么，你的安装能力`rubygems-update`，是什么意思呢？这就引出了第三个问题：

3.  `gem update --system`和 和有什么不一样`update_rubygems`？

    很少。实际上，`gem update --system [VERSION]`它只是以下两个命令的包装器：

    ```
    gem install rubygems-update -v [VERSION]
    update_rubygems 
    ```

    要查看实际执行的代码`gem update --system`，请 cd 到其中的内容`rubygems-update`，然后查看文件`update_command.rb`。你可以做得到`gem update --system -v`它正在做什么的详细输出。

# c# - 为什么我在图像的开头有不需要的额外字节？

> ID：14662795
> 
> 赞同：3
> 
> 时间：2013-02-02T14:17:39.277
> 
> 标签：c#, asp.net-mvc-3, nginx, mono, fastcgi

问题：

我为我的兄弟制作了一个主页，可在此处访问：
[http ://www.daniel-steiger.ch](http://www.daniel-steiger.ch)

它在 Linux 上使用 Microsoft ASP.NET MVC3 和 mono 3，通过 fastcgi 和 nginx（加上我自己的 DNS 服务器）。

现在我知道这是一个不寻常的星座，但到目前为止，一切都很好。
但是，我遇到了一个非常微妙的小错误。

当在图库中单击缩略图时，我想通过图库控制器的 FullImage 方法在新选项卡中显示全尺寸图像。
例如，这个直接 url：
[http](http://www.daniel-steiger.ch/gallery/FullImage/001.jpg)

://www.daniel-steiger.ch/gallery/FullImage/001.jpg 在 Internet Explorer 中，我将图像作为文本获取。
在所有其他浏览器中显示“无效图像”消息。
我通过直接文件 URL 调用图像解决了这个问题，它工作正常：
[http ://www.daniel-steiger.ch/Content/images/gallery/001.jpg?LastWriteTimeUTC=1358694795000](http://www.daniel-steiger.ch/Content/images/gallery/001.jpg?LastWriteTimeUTC=1358694795000)

随后，我向单声道邮件列表
[http://mono.1490590.n4.nabble.com/Bug-in-mono-3-0-1-MVC3-File-FileResult-td4658382.html报告了该错误](http://mono.1490590.n4.nabble.com/Bug-in-mono-3-0-1-MVC3-File-FileResult-td4658382.html)

现在我得到了回应，这都是我的错，因为我设置了错误的图像 mime 类型，这是/是真的。
然而，我发现奇怪的是，如果是这样的话，相同的代码在 Windows 上也能正常工作，而且像 Chrome 这样的智能浏览器通常会检测到错误的 mime 设置并使用正确的设置。

所以我将mime-type从“image/jpg”更改为“image/jpeg”，并将项目重新部署到服务器。
如果图像实际上是 jpeg 图像，我还检查了文件实用程序，并且确实如此。

奇怪的是它仍然没有显示图像。
在 Internet Explorer 上，我现在得到“不可用”。
在所有其他浏览器上，我得到：图像无法显示，因为它包含错误。

我现在确实从图像包含错误的 URL 中获取图像。
wget [http://www.daniel-steiger.ch/gallery/fullimage/001.jpg](http://www.daniel-steiger.ch/gallery/fullimage/001.jpg)

然后我在无效文件和原始文件之间进行了二进制比较：

```
cmp -l 001.jpg 001a.jpg   | awk '{printf "%08X %02X %02X\n", $1, strtonum(0$2), strtonum(0$3)}' >> comparison.txt 
```

这是比较结果：

![BinDiff](../Images/f2f0551148891e1fd96aec30ee3b5831.png) 让我眼前一亮的是，Internet Explorer 说他找不到的图像实际上是 1.7 MB 大小，并且包含额外的字节：

```
31 39 36 62 36 38 0D 0A 
```

一开始......
任何人都知道这里出了什么问题/这些字节可能来自哪里（除了它很可能来自单声道/fastcgi中的错误）？

这是新的控制器代码顺便说一句：

```
namespace Homepage.Controllers
{

    public class GalleryController : Controller
    {

        protected static string GetImageDirectory()
        {
            string bd = AppDomain.CurrentDomain.BaseDirectory;
            string strImageDirectory = System.IO.Path.Combine(bd,
            "Content");
            strImageDirectory =
            System.IO.Path.Combine(strImageDirectory, "images");
            strImageDirectory =
            System.IO.Path.Combine(strImageDirectory, "gallery");

            return strImageDirectory;
        } // End Function GetImageDirectory

        protected static string strImageDirectory = GetImageDirectory();

        public FileResult FullImage(string id)
        {
            string strFileName =
            System.IO.Path.Combine(strImageDirectory, id);

            //return new FilePathResult("CorrectFullPathAndFileName", "CorrectMime");
            //return File(strFileName, "image/jpg"); // Old
            return File(strFileName, "image/jpeg"); // New
        } // End Action FullImage

        public FileResult Thumb(string id)
        {
            //return Redirect(id);

            string strFileName =
            System.IO.Path.Combine(strImageDirectory, id);

            System.IO.Stream ms =
            Tools.Imaging.GetThumbnailStream(strFileName,
            System.Drawing.Imaging.ImageFormat.Png);
            return File(ms, "image/png");
            /*
            using (System.IO.Stream ms =
            Tools.Imaging.GetThumbnailStream(strFileName,
            System.Drawing.Imaging.ImageFormat.Png))
            {
                return File(ms, "image/png");
            }*/
        } // End Action Thumb

    } // End Class GalleryController : Controller

} // End Namespace Homepage.Controllers 
```

**编辑：**
它变得陌生：
还有一个额外的序列

```
0d 0a 0d 0a 30 0d 0a 0d  0a 
```

在末尾...

我刚刚做了 hexdump，发现原始文件有文件大小（屏住呼吸）：

```
00196b68 
```

这里是 hexdump（每个 8 MB）：

规范格式（hexdump -C 001.jpg > 001.txt）：
原始文件：[http](http://www.daniel-steiger.ch/001.txt)
: //www.daniel-steiger.ch/001.txt 拙劣的文件： [http://www .daniel-steiger.ch/001a.txt](http://www.daniel-steiger.ch/001a.txt)

纯转储（hexdump 001.jpg > 001_1.txt）：
原始文件：[http](http://www.daniel-steiger.ch/001_1.txt)
: //www.daniel-steiger.ch/001_1.txt 盗版文件： [http://www.丹尼尔-施泰格.ch/001a_1.txt](http://www.daniel-steiger.ch/001a_1.txt)

嗯，拙劣文件的十六进制转储为 5 MB，原始文件的转储为 8.2 MB...

我使用最新的稳定 nginx：

```
sudo -s
nginx=stable # use nginx=development for latest development version
add-apt-repository ppa:nginx/$nginx
apt-get update 
apt-get install nginx 
```

Tools.Imaging 的完整代码（同时将 Tools 重命名为 MvcTools，以匹配程序集命名空间）

```
using System;
using System.Text;

namespace MvcTools
{

    public class Imaging
    {

        //public static System.Drawing.Size m_sMaxThumbNailDimensions = new System.Drawing.Size(200, 200);
        public static System.Drawing.Size m_sMaxThumbNailDimensions = new System.Drawing.Size(300, 300);

        public static System.IO.Stream GetImageAsStream(
                                                 string strOrgFileName
                                                , System.Drawing.Imaging.ImageFormat ifOutputFormat
                                           )
        {
            return GetImageAsStream(strOrgFileName, ifOutputFormat, 1024);
        } // End Function GetImage

        public static System.IO.Stream GetImageAsStream(
                                                 string strOrgFileName
                                                ,System.Drawing.Imaging.ImageFormat ifOutputFormat
                                                ,int rez
                                           )
        {
            System.IO.MemoryStream ms = null;

            if (!System.IO.File.Exists(strOrgFileName))
                throw new System.IO.FileNotFoundException(strOrgFileName);

            try
            {

                using (System.Drawing.Image imgSourceImage = System.Drawing.Image.FromFile(strOrgFileName))
                {

                    ms = new System.IO.MemoryStream();
                    imgSourceImage.Save(ms, ifOutputFormat);
                    ms.Position = 0;
                } // End Using imgSourceImage

            } // End Try
            catch (Exception ex)
            {
                System.Windows.Forms.MessageBox.Show(ex.GetType().ToString());
                System.Windows.Forms.MessageBox.Show(ex.Message);
                //Response.Write(ex.Message);
            } // End Catch

            return ms;
        } // End Function GetImageAsStream

        public static System.Drawing.Size GetThumbnailSize(string strOrgFileName)
        {
            System.Drawing.Size sThumbNailSizeToUse = new System.Drawing.Size();

            try
            {

                using (System.Drawing.Image imgSourceImage = System.Drawing.Image.FromFile(strOrgFileName))
                {
                    decimal decPixToSubstract = 0;
                    decimal decPercentage;

                    if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)
                    {
                        if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)
                        {
                            decPercentage = (((decimal)imgSourceImage.Size.Width - (decimal)m_sMaxThumbNailDimensions.Width) / (decimal)imgSourceImage.Size.Width);
                            decPixToSubstract = decPercentage * imgSourceImage.Size.Height;
                            sThumbNailSizeToUse.Width = m_sMaxThumbNailDimensions.Width;
                            sThumbNailSizeToUse.Height = imgSourceImage.Size.Height - (int)decPixToSubstract;
                        } // End if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)
                        else
                        {
                            decPercentage = (((decimal)imgSourceImage.Size.Height - (decimal)m_sMaxThumbNailDimensions.Height) / (decimal)imgSourceImage.Size.Height);
                            decPixToSubstract = decPercentage * (decimal)imgSourceImage.Size.Width;
                            sThumbNailSizeToUse.Height = m_sMaxThumbNailDimensions.Height;
                            sThumbNailSizeToUse.Width = imgSourceImage.Size.Width - (int)decPixToSubstract;
                        } // End else of if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)

                    } // End if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)
                    else
                    {
                        sThumbNailSizeToUse.Width = imgSourceImage.Size.Width;
                        sThumbNailSizeToUse.Height = imgSourceImage.Size.Height;
                    } // End else of if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)

                } // End Using imgSourceImage

            } // End Try
            catch (Exception ex)
            {
                System.Windows.Forms.MessageBox.Show(ex.Message);
                //Response.Write(ex.Message);
            } // End Catch

            return sThumbNailSizeToUse;
        } // End Sub GetThumbnailSize(string strOrgFileName)

        // http://stackoverflow.com/questions/7319842/mvc3-razor-thumbnail-resize-image-ideas
        // http://stackoverflow.com/questions/1528525/alternatives-to-system-drawing-for-use-with-asp-net/1528908#1528908
        public static void GenerateThumbnailFile(
                                        string strPhysicalPath,
                                        string strOrgFileName, string strThumbnailFileName,
                                        System.Drawing.Imaging.ImageFormat ifOutputFormat, int rez
                                     )
        {

            try
            {

                using (System.Drawing.Image imgSourceImage = System.Drawing.Image.FromFile(strOrgFileName))
                {
                    //System.Drawing.Image oImg = System.Drawing.Image.FromStream(fil.InputStream);

                    decimal decPixToSubstract = 0;
                    decimal decPercentage;

                    //default
                    System.Drawing.Size sThumbNailSizeToUse = new System.Drawing.Size();
                    if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)
                    {
                        if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)
                        {
                            decPercentage = (((decimal)imgSourceImage.Size.Width - (decimal)m_sMaxThumbNailDimensions.Width) / (decimal)imgSourceImage.Size.Width);
                            decPixToSubstract = decPercentage * imgSourceImage.Size.Height;
                            sThumbNailSizeToUse.Width = m_sMaxThumbNailDimensions.Width;
                            sThumbNailSizeToUse.Height = imgSourceImage.Size.Height - (int)decPixToSubstract;
                        } // End if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)
                        else
                        {
                            decPercentage = (((decimal)imgSourceImage.Size.Height - (decimal)m_sMaxThumbNailDimensions.Height) / (decimal)imgSourceImage.Size.Height);
                            decPixToSubstract = decPercentage * (decimal)imgSourceImage.Size.Width;
                            sThumbNailSizeToUse.Height = m_sMaxThumbNailDimensions.Height;
                            sThumbNailSizeToUse.Width = imgSourceImage.Size.Width - (int)decPixToSubstract;
                        } // End else of if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)

                    } // End if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)
                    else
                    {
                        sThumbNailSizeToUse.Width = imgSourceImage.Size.Width;
                        sThumbNailSizeToUse.Height = imgSourceImage.Size.Height;
                    } // End else of if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)

                    using (System.Drawing.Bitmap bmpThumbnail = new System.Drawing.Bitmap(sThumbNailSizeToUse.Width, sThumbNailSizeToUse.Height))
                    {
                        bmpThumbnail.SetResolution(rez, rez);
                        using (System.Drawing.Image imgThumbNail = bmpThumbnail)
                        {

                            using (System.Drawing.Graphics gGraphicsContext = System.Drawing.Graphics.FromImage(imgThumbNail))
                            {
                                gGraphicsContext.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
                                gGraphicsContext.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
                                gGraphicsContext.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;

                                System.Drawing.Rectangle rThumbnailDimension = new System.Drawing.Rectangle(0, 0, sThumbNailSizeToUse.Width, sThumbNailSizeToUse.Height);
                                gGraphicsContext.DrawImage(imgSourceImage, rThumbnailDimension);
                            } // End Using gGraphicsContext

                            imgThumbNail.Save(System.IO.Path.Combine(strPhysicalPath, strThumbnailFileName), ifOutputFormat);
                        } // End Using imgThumbNail

                    } // End Using bmpThumbnail

                } // End Using imgSourceImage

            } // End Try
            catch (Exception ex)
            {
                System.Windows.Forms.MessageBox.Show(ex.Message);
                //Response.Write(ex.Message);
            } // End Catch

        } // End Function GenerateThumbNail

        public static System.IO.Stream GetThumbnailStream(
                                                               string strOrgFileName
                                                             , System.Drawing.Imaging.ImageFormat ifOutputFormat
                                                         )
        {
            return GetThumbnailStream(strOrgFileName, ifOutputFormat, 1024);
        } // End Function GetThumbnailStream

        public static System.IO.Stream GetThumbnailStream(
                                      string strOrgFileName
                                     ,System.Drawing.Imaging.ImageFormat ifOutputFormat
                                     ,int rez
                                  )
        {

            System.IO.MemoryStream ms = null;

            try
            {

                using (System.Drawing.Image imgSourceImage = System.Drawing.Image.FromFile(strOrgFileName))
                {
                    decimal decPixToSubstract = 0;
                    decimal decPercentage;

                    System.Drawing.Size sThumbNailSizeToUse = new System.Drawing.Size();
                    if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)
                    {
                        if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)
                        {
                            decPercentage = (((decimal)imgSourceImage.Size.Width - (decimal)m_sMaxThumbNailDimensions.Width) / (decimal)imgSourceImage.Size.Width);
                            decPixToSubstract = decPercentage * imgSourceImage.Size.Height;
                            sThumbNailSizeToUse.Width = m_sMaxThumbNailDimensions.Width;
                            sThumbNailSizeToUse.Height = imgSourceImage.Size.Height - (int)decPixToSubstract;
                        } // End if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)
                        else
                        {
                            decPercentage = (((decimal)imgSourceImage.Size.Height - (decimal)m_sMaxThumbNailDimensions.Height) / (decimal)imgSourceImage.Size.Height);
                            decPixToSubstract = decPercentage * (decimal)imgSourceImage.Size.Width;
                            sThumbNailSizeToUse.Height = m_sMaxThumbNailDimensions.Height;
                            sThumbNailSizeToUse.Width = imgSourceImage.Size.Width - (int)decPixToSubstract;
                        } // End else of if (imgSourceImage.Size.Width > imgSourceImage.Size.Height)

                    } // End if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)
                    else
                    {
                        sThumbNailSizeToUse.Width = imgSourceImage.Size.Width;
                        sThumbNailSizeToUse.Height = imgSourceImage.Size.Height;
                    } // End else of if (m_sMaxThumbNailDimensions.Width < imgSourceImage.Size.Width || m_sMaxThumbNailDimensions.Height < imgSourceImage.Size.Height)

                    using (System.Drawing.Bitmap bmpThumbnail = new System.Drawing.Bitmap(sThumbNailSizeToUse.Width, sThumbNailSizeToUse.Height))
                    {
                        bmpThumbnail.SetResolution(rez, rez);
                        using (System.Drawing.Image imgThumbNail = bmpThumbnail)
                        {

                            using (System.Drawing.Graphics gGraphicsContext = System.Drawing.Graphics.FromImage(imgThumbNail))
                            {
                                gGraphicsContext.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
                                gGraphicsContext.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
                                gGraphicsContext.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;

                                System.Drawing.Rectangle rThumbnailDimension = new System.Drawing.Rectangle(0, 0, sThumbNailSizeToUse.Width, sThumbNailSizeToUse.Height);
                                gGraphicsContext.DrawImage(imgSourceImage, rThumbnailDimension);

                                ms = new System.IO.MemoryStream();
                                imgThumbNail.Save(ms, ifOutputFormat);
                                ms.Position = 0;
                            } // End Using gGraphicsContext

                        } // End Using imgThumbNail

                    } // End Using bmpThumbnail

                    /*
                    byte[] buffer = null;
                    using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
                    {
                        imgThumbNail.Save(ms, ifOutputFormat);
                        buffer = ms.ToArray();
                    }
                    */

                    // Exerts from Page_Load method 
                    //Response.ContentType = "image/" + extension;
                    //Response.OutputStream.Write(pBuffer, 0, pBuffer.Length);
                    //Response.End();

                    //imgThumbNail.Save(System.IO.Path.Combine(strPhysicalPath, strThumbnailFileName), ifOutputFormat);
                } // End Using imgSourceImage

            } // End Try
            catch (Exception ex)
            {
                //Console.WriteLine(ex.Message);
                System.Windows.Forms.MessageBox.Show(ex.Message);
                //Response.Write(ex.Message);
            } // End Catch

            //System.Windows.Forms.MessageBox.Show("image/" + ifOutputFormat.ToString().ToLower());
            return ms;
        } // End Function GenerateThumbNail

    } // End Class Imaging

} // End Namespace Tools 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:01:19.287

这似乎是一个涉及[Chuncked 传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)的错误

```
Class: System.Web.HttpResponse (or one of its dependencies)
Method: TransmitFile(string filename) 
```

**编辑：**
构造函数中有这段代码：

```
if (worker_request != null)
      use_chunked = (worker_request.GetHttpVersion () == "HTTP/1.1"); 
```

修补它以检查 CGI（如果 CGI，服务器处理文件传输，因此可能没有根据[RFC 3875](http://forum.nginx.org/read.php?2,235985,235988#msg-235988)从 FastCGI 服务器返回的分块编码。

```
 internal HttpResponse (HttpWorkerRequest worker_request, HttpContext context) : this ()
        {
            WorkerRequest = worker_request;
            this.context = context;

#if !TARGET_J2EE
            if (worker_request != null)
            {

                if(worker_request.GetHttpVersion () == "HTTP/1.1")
                {
                    string GatewayIface = context.Request.ServerVariables["GATEWAY_INTERFACE"];
                    use_chunked = (GatewayIface == null || !GatewayIface.StartsWith("CGI"));
                }
                else
                    use_chunked = false;

            }
#endif
            writer = new HttpWriter (this);
        } 
```

添加补丁到 [https://bugzilla.xamarin.com/show_bug.cgi?id=10001](https://bugzilla.xamarin.com/show_bug.cgi?id=10001)
在单声道 3.2.3 中修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:26:39.257

```
31 39 36 62 36 38 0D 0A 
```

是`196b68/r/n`ASCII码。

*   [这种颜色](http://hex-color.com/code/196b68)与您的代码有什么关系？
*   该字符串是否`196b68/r/n`说明了与您的平台相关的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T05:29:50.777

我不认识那个 Tools.Imaging.GetThumbnailStream() 函数，谷歌也不认识。假设这是您自己的代码或第 3 方库，我会在那里寻找奇怪字节流的来源。

# c# - 检查两个区域是否接触

> ID：14662796
> 
> 赞同：20
> 
> 时间：2013-02-02T14:18:02.350
> 
> 标签：c#, rectangles

> **可能重复：**
> [查找两个矩形的重叠区域（在 C# 中）](https://stackoverflow.com/questions/1551243/finding-the-overlapping-area-of-two-rectangles-in-c)

我有两个由左上角和右下角标识的区域（图 1）。

在 c# 中，我如何测试他们是否有联系（图 2）？

![在此处输入图像描述](../Images/aee2a824ec8689db21b327c36ece0ee3.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-02T14:24:21.690

假设您有两个`Rectangle`s`r1`和`r2`，您可以通过以下方式检查它们是否相互交叉：

```
if(r1.IntersectsWith(r2))
{
    // Intersect
} 
```

* * *

如果您需要它们彼此相交的确切区域，您可以这样做：

```
Rectangle intersectArea = Rectangle.Intersect(r1, r2); 
```

您可以查看文档：[`Rectangle.IntersectsWith`](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.intersectswith.aspx),[`Rectangle.Intersect`](http://msdn.microsoft.com/en-us/library/y10fyck0.aspx)

* * *

**额外的重要说明：**

我刚刚检查过，如果两个矩形只是在边缘上相互接触，则`Rectangle.Intersect`返回一个一维为零的矩形，**但是** `Rectangle.IntersectsWith`会返回`false`。所以你需要注意这一点。

例如，`Rectangle.Intersect`on`{X=0,Y=0,Width=10,Height=10}`并且`{X=10,Y=0,Width=10,Height=10}`将返回`{X=10,Y=0,Width=0,Height=10}`。

如果您希望`true`它们也只是相互接触，请将条件更改为：

```
if(Rectangle.Intersect(r1, r2) != Rectangle.Empty)
{
    // Intersect or contact (just touch each other)
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-02T14:21:55.180

如果您不想依赖`System.Drawing`：

让我们注意：

*   `X1`, `Y1`, `X2`, `Y2`: 第一个矩形的点的坐标（用`X1 < X2`和`Y1 < Y2`）
*   `X1'`, `Y1'`, `X2'`, `Y2'`: 第二个矩形的点的坐标（用`X1' < X2'`和`Y1' < Y2'`）

当且仅当：

```
(X2' >= X1 && X1' <= X2) && (Y2' >= Y1 && Y1' <= Y2) 
```

# mfc - 基于文件扩展名的具有多个视图的 MFC SDI

> ID：14662798
> 
> 赞同：1
> 
> 时间：2013-02-02T14:18:15.993
> 
> 标签：mfc, file-extension, sdi

我正在尝试构建具有以下要求的 MFC SDI（单文档界面）应用程序：

1.  一次只显示一个文档。

2.  根据从文件打开对话框中选择的文件类型支持不同的视图。例如，如果选择 *.txt 文件，我将显示 MyCViewText，而如果选择 *.jpg 文件，我将显示 MyCViewImage。

3.  显示文件扩展名文件打开对话框的自定义列表。例如，使用自定义对话框和过滤器，例如：`CFileDialog *dlg = new CFileDialog(TRUE, NULL, NULL, NULL, L"Text Files (*.txt)|*.txt|" L"JPEG Files (*.jpg)|*.jpg||");`

但是，我有两个问题。

首先，我不知道在哪里为 File -> Open 对话框插入文件扩展名过滤器。如果我`CWinApp::OnFileOpen()`使用 custom覆盖`CFileDialog`，那么我将丢失 SDI 提供的所有幕后行为，例如调用`CDocument::OnDocumentOpen()`调用和初始化文档模板的 CView。我无法调用`CWinApp::OnFileOpen()`覆盖，因为在第一个文件打开对话框之后出现了第二个文件打开对话框，并且没有文件扩展名过滤器。

其次，从文件打开对话框中选择文件后，我不知道在哪里插入视图切换代码。文档模板设置如下：

```
pDocTemplate = new CSingleDocTemplate(
    IDR_MAINFRAME,
    RUNTIME_CLASS(CMyAppDoc),
    RUNTIME_CLASS(CMainFrame),
    RUNTIME_CLASS(CMyCView)); 
```

似乎我想覆盖`CWinApp::OnFileOpen()`和切换文档模板视图 RUNTIME_CLASS (CMyCView)，但我不确定这是否可能。

MFC SDI 是否不适合我的三个要求？我是否必须改用 MFC MDI 应用程序？如果我必须以某种方式使用 MDI，那么我将如何限制在任何给定时间仅加载和显示一个文档？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:48:56.410

在您的 InitInstance 函数中，创建一个新的 SingleDocTemplate 并将其添加到模板集合中：

```
CSingleDocTemplate* pDocTemplate2;
  pDocTemplate2 = new CSingleDocTemplate(IDR_MAINFRAME2,
     RUNTIME_CLASS(CMyDoc2),
     RUNTIME_CLASS(CMainFrame),       // main SDI frame window
     RUNTIME_CLASS(CMyView2));
  if (!pDocTemplate2)
     return FALSE;

  AddDocTemplate(pDocTemplate2); 
```

文件类型和扩展名放在字符串表条目中。

```
IDR_MAINFRAME2 "MyCalc Windows Application\nSheet\nWorksheet\n Worksheets (*.myc)\n.myc\nMyCalcSheet\n MyCalc Worksheet" 
```

MFC 将识别模板，并将其作为 File-New 或 File-Open 的选项提供。根据您的要求，您可能需要为 CMyDoc2 和 CMyView2 创建新类，或者如果可以使它们适用于任一文件类型，则可能使用原始类。

# ios - 如何在 iOS 的 tableview 上创建视觉效果

> ID：14662802
> 
> 赞同：0
> 
> 时间：2013-02-02T14:18:46.930
> 
> 标签：ios, objective-c, tableview

更新：接受的答案导致 CATransformations 和这个问题[Using CATransform3D](https://stackoverflow.com/questions/14675440/using-catransform3d)这是正确的方向但是我仍然遇到问题。

* * *

我对 iOS 和 Objective-C 非常陌生，并且非常坚持如何在整个表格视图上应用效果。

我正在尝试创建一个类似于《星球大战》开场爬行的外观的表格视图。

我很难找出如何将这种效果添加到表格视图中。

理想情况下，我需要能够使文本向任何方向发展，但现在只能满足于上升。

文本将被动态添加，列表也需要反向工作，即上下移动。

我最初的想法是将tableview的形状从矩形更改为梯形，并在屏幕上向上缩小文本，但是我找不到任何关于如何创建整个tableview的形状的信息，而不仅仅是个人单元格（例如根据屏幕上的位置动态缩小/增长单元格大小）。

我的第二个想法是通过挤压表格视图的顶部以创建梯形形状来对表格视图应用通用效果，然后单元格内的文本将自动具有正确的大小（因为它们都被效果挤压）。然而，我再次找不到关于应用这种性质的效果的信息。

任何帮助、想法或方向将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:13:39.320

由于每个 UIView（以及每个 UIView 子类）都由[CALayer](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)支持，因此您应该能够在 UITableView 的图层上设置 transform 属性以实现这种视觉效果。

```
#import <QuartzCore/QuartzCore.h>

tableView.layer.transform = ...; 
```

更多信息：[如何将透视变换应用于 UIView？](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview)

# javascript - 打开 Paypal 数字商品灯箱

> ID：14662806
> 
> 赞同：5
> 
> 时间：2013-02-02T14:19:13.280
> 
> 标签：javascript, django, paypal, stripe-payments

我希望我的客户使用 Paypal 数字商品灯箱。我在 Python/Django/Javascript 中使用以下步骤通过将客户发送到 Paypal 网站来创建订单：

1.  单击按钮。
2.  通过调用 Paypal 的 SetExpressCheckout 生成令牌。
3.  [通过访问“ https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=](https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=) ”为我的产品创建订单，并将步骤 2 中的令牌字符串附加到 URL。

上面显示我正确生成了一个令牌，但我想在第 3 步中使用灯箱。我已经阅读了数字商品集成指南，但我看不到如何让灯箱弹出并输入灯箱的令牌。其他文件让我认为 Paypal 会导致灯箱在返回令牌时显示。是否有关于如何激活灯箱的基本 HTML/Javascript/Python 示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:57:03.247

我们有一个很好的指南，展示了如何将灯箱与数字商品一起使用：[https ://developer.paypal.com/webapps/developer/docs/classic/express-checkout/digital-goods/IntroducingExpressCheckoutDG/](https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/digital-goods/IntroducingExpressCheckoutDG/)

希望这会有所帮助，蒂姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:20:05.170

我的解决方案是改用[Stripe](http://stripe.com)。在 5 分钟内，我得到了一个有效的灯箱信用卡表格。不到一个小时，我就连接了一个有效的支付解决方案，并将测试交易注册到我的帐户。

编辑：我不知道为什么有人投票反对我的答案。在等待有人回答我的问题时，我真诚地第一次尝试了 Stripe。有效。

# php - 发布变量值而不是变量名

> ID：14662811
> 
> 赞同：0
> 
> 时间：2013-02-02T14:19:33.843
> 
> 标签：php, html, mysql, sql, database

我正在尝试从文本框代码中获取条目以转到 php 表单并让 php 表单将其发送到数据库。我遇到的问题不是发布它发布 $code 的文本框值。我正在使用mysql和php。

PHP：

```
<?
if( $_POST )
{
$username="***";
$password="***";
    $con = mysql_connect("***",$username,$password);

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("inmoti6_mysite", $con);

    $code = $_POST['code'];

    $code = htmlspecialchars($code); 

    $query = 'INSERT INTO `storycodes`.`storycodes` (`code`) VALUES ("$code");';

    mysql_query($query);

    echo "<h2>Thank you for your Comment!</h2>";

    mysql_close($con);
}
?> 
```

怀疑这是问题所在，但这是html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Database</title>
</head>

<body>
<form id="form1" name="form1" method="post" action="/scripts/database2.php">
  <label>Code:
  <input name="code" type="text" id="code" value="" size="45" />
</label>
  <p>
    <label>
    <input type="submit" name="submit" id="submit" value="Submit" />
    </label>
  </p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:23:16.383

您需要为要在字符串中识别的变量使用双引号，因此请更改：

```
$query = 'INSERT INTO `storycodes`.`storycodes` (`code`) VALUES ("$code");'; 
```

到

```
$query = "INSERT INTO `storycodes`.`storycodes` (`code`) VALUES ('$code');"; 
```

你还有一个sql注入问题；我建议您使用准备好的语句和绑定变量切换到 PDO（或 mysqli）。至少您应该[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)在将变量插入数据库之前使用它们，但正如您在手册中看到的那样，这些`mysql_*`函数已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:23:26.297

它不发布 $code，您使用 $code 作为值而不是变量。问题与报价有关。

```
$query = "INSERT INTO `storycodes`.`storycodes` (`code`) VALUES (\"$code\");"; 
```

试试这个。

# vba - excel 2007 无法切换到设计模式

> ID：14662813
> 
> 赞同：0
> 
> 时间：2013-02-02T14:20:04.103
> 
> 标签：vba, excel

我正在尝试在我的工作表上插入一个基本命令按钮。但是，设计模式按钮不起作用。按下后它不会一直亮着。它什么也没做。所以我无法访问按钮的属性并为其分配代码。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:56:34.540

Please check on these:

*   According to the image the `Design Mode` is on
*   Where you can click on the button and add a code to be triggered on it's `on click` event
*   Click on the Orange Design Icon to Exit the Design Mode
*   Now if you click on your button, it should call your function/sub accordingly

![enter image description here](../Images/e0027a02d7a6fa763540d3db6f77343f.png)

# c - #define Square(x) (x*(x))

> ID：14662815
> 
> 赞同：5
> 
> 时间：2013-02-02T14:20:08.053
> 
> 标签：c, c-preprocessor

> **可能重复：**
> [使用#define 定义的数字的平方](https://stackoverflow.com/questions/3719150/square-of-a-number-being-defined-using-define)

你能解释一下为什么下面的代码输出“29”吗？

```
#define Square(x) (x*(x))

void main()
{
    int x = 5;
    printf("%d", Square(x+3));
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-02T14:21:54.803

由于宏仅进行文本替换，因此您最终会得到：

```
x + 3 * (x + 3) 
```

这是29。

您绝对应该始终将宏参数放在括号之间。

```
#define Square(x) ((x)*(x)) 
```

更好的是，使用一个函数并相信编译器会内联它。

* * *

编辑

正如 leemes 所指出的，宏计算`x`两次的事实可能是一个问题。使用函数或更复杂的机制（例如 gcc 语句表达式）可以解决此问题。这是一个笨拙的尝试：

```
#define Square(x) ({    \
    typeof(x) y = (x);  \
    y*y;                \
}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T14:32:37.817

请注意，虽然宏

```
#define Square(x) ((x)*(x)) 
```

似乎解决了问题，**它没有**。考虑一下：

```
int x = 5;
printf("%d\n", Square(x++)); 
```

预处理器将其扩展为：

```
((x++)*(x++)) 
```

这是*未定义的行为*。一些编译器会将其评估为

```
(5 * 5) 
```

这似乎一开始就如预期的那样。但`x = 7`之后，由于增量运算符已被应用了两次。显然不是你要找的。

有关输出，请参见此处：http: [//ideone.com/9xwyaP](http://ideone.com/9xwyaP)

## 这就是为什么宏*是邪恶的。

（*宏往往被用作内联函数的替代品。）

您可以在 C++ 中使用可以处理所有类型的模板函数来解决此问题，在 C 中通过指定具体类型来解决此问题（因为 C 中甚至不支持重载，所以您能得到的最好的方法是带有后缀的不同函数）：

```
// C
int SquareI(int x) { return x * x; }
float SquareF(float x) { return x * x; }
double SquareD(double x) { return x * x; }

// C++
template<typename T>
T Square(T x) { return x * x; } 
```

特别是对于 GCC，还有另一种解决方案，因为 GCC 提供了`typeof`运算符，所以我们可以在宏中引入一个临时值：

```
#define Square(x) ({ typeof (x) _x = (x); _x * _x; }) 
```

等等瞧：http: [//ideone.com/OGu08W](http://ideone.com/OGu08W)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-02T14:23:38.427

运算符优先级。你看，因为 Square 是一个宏，而不是一个函数，这是编译器实际看到的：

```
(x+3*(x+3)) 
```

哪个运算符优先级最终为：

```
5 + (3 * (8)) 
```

或 29\. 解决问题：

```
#define Square(x) ((x)*(x)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-02T14:23:03.970

预处理器将 Square(x) 替换为 x*(x)。

您的代码看起来像`printf("%d", x+3*(x))`.

你应该使用`#define Square(x) ((x)*(x))`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-02T14:28:10.113

`#define square(X) (x*(x))`是一个宏，因此编译器将宏替换为以下代码：

```
square(x+3) = x+3*(x+3)

     = 5+3*(5+3) = 5+3*(8) = 29 
```

# java - OutputStream 不适用于线程

> ID：14662819
> 
> 赞同：0
> 
> 时间：2013-02-02T14:20:24.273
> 
> 标签：java, multithreading, stream

你能帮我解决下一个问题吗？我正在尝试将 PrintStream 与我的线程一起使用，以使它们向不同的输出写入内容。问题是： System.out 完美，但是当我尝试添加

```
File f1 = new File("src/task7/simple/1.txt"); 
PrintStream filePRinPrintStream = new PrintStream(f1) 
```

我的线程不想写任何东西，它不会抛出任何警告或异常，而普通打印是 main() 方法是可以的。

```
filePRinPrintStream.println("PREVED"); 
```

这是我的代码摘录，供您参考。

```
public class NamePrinterThread implements Runnable, NamePrinterIF{

    private String name;
    private PrintStream outputStream;
    private long interval;
    private int count;

    @Override
    public void setPrintName(String name) {
        this.name = name;
    }

    @Override
    public void setStream(PrintStream stream) {
        if(stream == null) throw new NullPointerException("PrintStream is null");
        this.outputStream = stream;
    }

    @Override
    public void setInterval(long ms) {
        if(ms <= 0) throw new IllegalArgumentException("Printing interval can't be negative");
        this.interval = ms;
    }

    @Override
    public void setCount(int count) {
        if(count <= 0) throw new IllegalArgumentException("Printing count can't be negative");
        this.count = count;
    }

    @Override
    public void run() {
        for (int i = 0; i < this.count; i++) {
            try {
                outputStream.println(this.name);
                Thread.sleep(interval);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }       
    }

    public void startThread(){
        new Thread(this, name).start();
    }

} 
```

和另一个类的主要方法

```
public static void main(String[] args) {

        File f1 = new File("src/task7/simple/1.txt");

        try(PrintStream filePRinPrintStream = new PrintStream(f1)){ 

            //filePRinPrintStream.println("PREVED");
            NamePrinterIF thread2 = new NamePrinterThread();
            thread2.setCount(20);
            thread2.setInterval(350);
            thread2.setStream(filePRinPrintStream);
            thread2.setPrintName("thread2");

            thread2.startThread();

            filePRinPrintStream.flush();
        } catch(IOException e){
            e.printStackTrace();
        }

        NamePrinterIF thread1 = new NamePrinterThread();
        thread1.setCount(10);
        thread1.setInterval(200);
        thread1.setStream(System.out);
        thread1.setPrintName("thread1");

        thread1.startThread();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:25:17.487

如果完成，请在 main 中关闭您的打印流。如果 main 在所有线程终止后终止，然后您干净地关闭流，那将是一个好主意。

# javascript - 使用 JavaScript/Hammer.js 检测 Android 捏以缩放 innerWidth

> ID：14662824
> 
> 赞同：4
> 
> 时间：2013-02-02T14:20:42.527
> 
> 标签：javascript, android, jquery, hammer.js, jquery-events

我想知道缩放时缩放的innerWith/viewport宽度。

如果它低于 500 像素，我想更改图像：

```
$("img#ad").attr("src", "http://img0.www.suckmypic.net/img/1/L/mmy4jT8s/jsFiddle3.png"); 
```

我试过这样的事情：

```
var hammer = new Hammer(document.getElementById("log"));

hammer.ontransformstart = function(ev) {
    var pziW = "test"; // Declare here the innerWidth of the pinch to zoom
    if (pziW < 500) {
        $("img#ad").attr("src", "http://img0.www.suckmypic.net/img/1/L/mmy4jT8s/jsFiddle3.png");
    }
};
hammer.ontransform = function(ev) {
    var pziW = "test"; // Declare here the innerWidth of the pinch to zoom
    if (pziW < 500) {
        $("img#ad").attr("src", "http://img0.www.suckmypic.net/img/1/L/mmy4jT8s/jsFiddle3.png");
    }
};
hammer.ontransformend = function(ev) {
    var pziW = "test"; // Declare here the innerWidth of the pinch to zoom
    if (pziW < 500) {
        $("img#ad").attr("src", "http://img0.www.suckmypic.net/img/1/L/mmy4jT8s/jsFiddle3.png");
    }
}; 
```

但我不知道如何声明缩放的innerWidth。

这是jsFiddle：

[http://jsfiddle.net/nLvu6/](http://jsfiddle.net/nLvu6/)

有人有答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:10:06.590

您想要检测的不是 innerWidth。

看一下传递给锤子函数的 ev 变量：

```
distance: 0
distanceX: 0
distanceY: 0
originalEvent: TouchEvent
position: Object
rotation: 124.85234015769826
scale: 2.0725083746457824
touches: Array[0]
type: "transformend"
__proto__: Object 
```

`scale: 2.0725083746457824`是我们想要的那个。如果比例高于或低于某个阈值，则执行图像替换功能。

我已经分叉了你的 JSFiddle。见这里：http: [//jsfiddle.net/BFBrU/14/](http://jsfiddle.net/BFBrU/14/)

![捏之前](../Images/1a4f4ecb120f91bfecf14162ac8b55ac.png)![捏后](../Images/c88ec79ba8e7474120ceacc3679dc920.png)

# cocoa - 具有十进制值的 NSStepper

> ID：14662833
> 
> 赞同：0
> 
> 时间：2013-02-02T14:22:04.237
> 
> 标签：cocoa, nstextfield

是否有人有解决方法来使用`NSStepper`增量设置为 0.1 的控件（实际上是很多......）或除整数值之外的任何其他值`setIncrement:`，而无需调用每个`NSStepper`实例？

我有一个类似编辑器的 UI，它需要步进器以`NSTextField`微小的增量更改其附件的值。

在 Interface Builder (IB) 中将增量设置为十进制值会导致将其四舍五入为整数 - 尽管 API 接受双精度值。

即使在增量字段中不输入任何内容并使用`NSStepper`调用`setIncrement:`所有实例的子类将其设置为例如 0.1 on也会`init`失败，因为 IB 显然仍将增量设置为 0 或`init`调用后的值。

不过，不确定它是如何做到的，因为`setIncrement:`子类中的覆盖没有被调用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:23:48.133

如果您有很多`NSStepper`s 与标准的 s 仅在增量上有所不同，那么您可以尝试子类化`NSStepper`并覆盖`initWithCoder:`它，这是从 nib 文件重新创建对象时调用的初始化程序。

我倾向于将`initWithCoder:`指定的初始化程序与 一起考虑`initWithFrame:`，但文档在这方面并不太含糊。无论如何，如果您`super`在设置自己的属性之前调用它，它应该可以工作并且很健壮。如果您使用这种技巧，您还可以考虑重写`initWithFrame:`以进行相同的初始化，这样您就可以在不同的方法中获得一致的行为来实例化子类。

这种方法的缺点是您将无法`increment`在 Interface Builder 中为您的自定义子类设置，因此您可能希望很好地记录它以备后用。

# ios - 未显示新的 CoreData 版本属性

> ID：14662842
> 
> 赞同：0
> 
> 时间：2013-02-02T14:23:30.517
> 
> 标签：ios, core-data

我正在向现有的 CoreData 实体添加两个属性。我已经对我的数据模型文件进行了版本控制并重新生成了我的实体，因此属性现在同时显示在头文件和代码文件中。我的应用程序可以很好地加载和读取数据库，但是当我尝试为任一新属性分配值时，我收到一条错误消息，指出这些属性不存在。编译器对它们很好，但在运行时设置断点并检查对象属性表明新属性确实不存在。

除了数据模型文件的版本控制和重新生成数据模型实体之外，我还需要配置它们以正确使用新数据模型吗？我是否需要以某种方式指向最新版本的数据模型？在创建我的持久存储时，我使用的是轻型迁移选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:51:26.233

我想到了。当您添加数据模型的新版本时，您仍然需要选择您的应用程序应该使用哪个版本。我想这是有道理的，因此您可以使用新版本，但不能让您的应用立即使用它。您可以通过在项目导航器中选择顶级数据模型文件，然后在文件检查器中选择所需版本来执行此操作。

# chef-infra - 厨师存储库的目的是什么？

> ID：14662848
> 
> 赞同：2
> 
> 时间：2013-02-02T14:23:59.953
> 
> 标签：chef-infra

我是厨师的新手。安装后，文档提示我从 git 克隆一个 chef 存储库。我想知道厨师存储库的目的是什么。如果我只需要将它用作厨师客户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:50:55.703

chef 存储库提供了组织所有工件（食谱、食谱、角色等）的结构，这些工件与 chef 一起用于描述和最终配置您的基础架构。当您创建自己的食谱、修改现有食谱并将它们上传到您的厨师服务器时，在开发时需要该存储库。将存储库视为将基础架构实现为代码的工作空间。

Chef 文档将开发机器称为**Chef 工作站**。工作站具有一个或多个存储库，用于管理基础设施工件和与厨师服务器交互的刀工具。

在由 chef*管理*的常规节点上不需要存储库和刀。这就是厨师客户所需要的一切。相反，工作站用于*管理*厨师。存储库和刀是用于此目的的工具。

您可以在存储库中处理一些诸如角色和数据包之类的事情，您也可以使用 Chef 服务器 Web UI 进行定义，但是您将没有工作的版本控制历史记录。对于食谱，即使您不需要修改任何内容，您仍然需要使用刀将它们从存储库上传到服务器。

有关更多信息，请参阅 chef wiki：[工作站](http://wiki.opscode.com/display/chef/Workstation+Setup)、[存储库](http://wiki.opscode.com/display/chef/Chef+Repository)、[刀](http://wiki.opscode.com/display/chef/Knife)。

# c - C程序列出文件

> ID：14662851
> 
> 赞同：0
> 
> 时间：2013-02-02T14:24:10.960
> 
> 标签：c, linux

我正在创建一个非常简单的 C 程序调用`open.c`，它可以：

1）列出目录中的文件，这些文件将文件文本存储在数组中

到目前为止我有这段代码，但它似乎不起作用。

{ }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T14:28:28.973

您需要使用和`argv`比较命令行参数。`"-ah"``"-ad"`

```
#include <string.h>

if (argc > 2)
{
  if (strcmp (argv[1], "-ah") == 0)
  {
    /* List hidden files */
  }
  else if (strcmp (argv[1], "-ad") == 0)
  {
    /* List files */
  }
  else
  {
    /* Unknown command-line argument */
  }
}
else
{
  /* No command-line arguments */
} 
```

参考：

> ### C11 (n1570), § 5.1.2.2.1 程序启动
> 
> 如果声明了它们，则`main`函数的参数应遵守以下约束：
> 
> — 的值`argc`应为非负数。
> 
> —`argv[argc]`应为空指针。
> 
> — 如果 argc 的值大于零，则`argv[0]`通过`argv[argc-1]` inclusive 的数组成员应包含指向字符串的指针，这些指针在程序启动之前由宿主环境赋予实现定义的值。目的是从托管环境中的其他地方向程序提供在程序启动之前确定的信息。如果主机环境不能提供大写和小写字母的字符串，则实现应确保以小写形式接收字符串。
> 
> — 如果argc的值大于零，则指向的字符串`argv[0]`代表程序名；`argv[0][0]`如果主机环境中没有程序名，则应为空字符。如果 argc 的值大于 1，则`argv[1]`through 指向的字符串`argv[argc-1]`代表程序参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:28:35.277

代替

```
if (-ad) 
```

你必须写一些像

```
if (strcmp(argv[1],"-ad")==0) 
```

相同的`if (-ah)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T14:29:03.200

您尝试读取命令行参数的方式是错误的

给定

```
int main(int argc, const char * argv[]) 
```

程序的第一个参数（例如“-ad”）将存储在`argv[1]`. 您需要分析该字符串以了解您的程序预期执行的操作。

[这是](http://crasseux.com/books/ctutorial/argc-and-argv.html)argc 和 argv 的基本介绍。在现实世界的程序中也应该有一些保护：例如，程序应该通过检查 argc 来检查它是否实际上是用参数调用的：

```
if (argc < 2) {
   printf("What do you want me to do?\n");
   return 3;
} 
```

或者 - 但尝试通过手动处理命令行参数至少一次来使其工作 - 您可以将整个命令行处理委托给[getopt](http://linux.die.net/man/3/getopt)。

# c# - 如何遍历 X 和 Y 的所有可能组合

> ID：14662857
> 
> 赞同：2
> 
> 时间：2013-02-02T14:24:49.830
> 
> 标签：c#, java, for-loop, iterator

我正在尝试遍历 X 和 Y 的所有组合。我将值增加 0.01，这是一个双精度值，但它实际上从未达到 0。

```
for (double x = -50; x < 50; x += 0.01)
{
     for (double y = -50; y <50; y += 0.01)
     {
          //Some code
     }
} 
```

知道为什么会这样吗？我假设这与“双重”有关，如果是这样，我可以用什么作为替代方案？

更新：我将其更改为十进制并将所有十进制数字更改为末尾有一个“m”。现在一切正常，我爱你们：D

代码现在读取 -

```
for (decimal x = -50; x < 50; x += 0.01m)
{
      for (decimal y = -50; y < 50; y += 0.01m)
      {
            // Some code
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:28:42.303

我怀疑您正在测试零，如下所示：

```
if (x == 0.0) {
    // it is zero.
} 
```

由于*浮点舍入错误*，这可能会失败。

浮点数的属性之一是它们没有对许多十进制数的精确表示。在这种情况下，您会发现 0.01 最接近的表示是“关闭”了一个很小的量。所以当你`0.01`加到`-50.0`五千次时，结果并不完全正确`0.0`。

您需要测试是否`x`是零加/减一些小错误；例如`0.00001`，在这种情况下应该没问题。

更好的是，您可以通过将循环变量声明为整数然后将其除以 0.01 来给出您的值，从而避免整个舍入`x`问题`y`；例如

```
for (int i = -5000; i < 5000; i++) {
    double x = i / 0.01d;
    // etcetera 
```

* * *

实际上，由于您的代码使用的是 a`0.01`而不是`0.01d`，因此我认为表示中的错误将超出应有的范围...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:31:28.437

由于舍入/截断错误，不可能将值 0.01 完全存储在双精度值中。因此，将它们中的几个相加会增加错误的幅度，可能使其错过 0。相反，请尝试使用小数类型或迭代整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T14:32:06.037

问题是计算机中的浮点数通常不能精确地表示十进制值，它们只能近似它们。[您可以查看有关浮点数](http://en.wikipedia.org/wiki/Floating_point)的 wiki 文章以获取更多详细信息。

如果你使用这样的东西，你的代码会更好：

```
for (int idxX = -5000; idxX < 5000; idxX += 1)
{
    double x = (double) idxX / 100.0;

    for (int idxY = -5000; idxY < 5000; idxY += 1)
    {
        double y = (double) idxY / 100.0;

        //Some code
    }
} 
```

这避免了浮点数的一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:32:34.067

试试这个技巧：

```
for (int x = -5000; x < 5000; x++)
    {
         for (int y = -5000; y <5000; y++)
         {
              System.out.println((double)x/100.0+" ~~ "+(double)y/100.0);
         }
    } 
```

问候，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T14:32:36.600

请改用小数。然后你会打到 0。用双精度计算会给你舍入错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T14:39:28.120

在大多数 C 派生语言中，`double`和`float`是具有以 2 为底的[幂](http://en.wikipedia.org/wiki/Floating_point)的数字。这意味着它与十进制数本身几乎没有关系，并且不一定总是准确地存储它们，它只是存储一个近似值。

对此的解决方案是使用以 10 为底的幂，幸运的是，C# 有一个具有此属性的类型：`decimal`. 替换`double`为`decimal`，你可能很高兴。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-02T14:40:06.253

这个怎么样：

```
if (x == (.01-.01)){} 
```

# android - 通过编辑 xml 文件使文本适合文本视图（高度 =“fill_parent”）

> ID：14662860
> 
> 赞同：0
> 
> 时间：2013-02-02T14:25:10.780
> 
> 标签：android, xml, text, textview

我有一个在我的 xml 文件中定义的文本视图。我想让文本视图中的文本适合文本视图。我已将 textview 的高度设置为“fill_parent”（我不能使用“wrap_content”，因为我想让 textview 适合其父布局）。另外我想将文本对齐到 textview 的右侧（我为此使用了重力属性，但不起作用。）。我应该在 xml 文件中添加哪些代码行来拟合文本和对齐文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:22:15.807

添加此以右对齐

```
android:gravity="right"
android:textAlignment="gravity" 
```

至于填充整个屏幕，据我所知并搜索过，没有这样的命令。不过，您可以为它制作自己的功能。继续以编程方式增加文本并设置滚动视图并查看滚动条是否已进入视图，一旦出现，将文本大小设置为小于调用滚动条的值。

它似乎有缺陷，但它有效。

# php - 网站在 localhost 和上传到服务器时显示不同

> ID：14662861
> 
> 赞同：1
> 
> 时间：2013-02-02T14:25:12.760
> 
> 标签：php, html, css, web

我设计了一个使用 php 的响应式网站。它主要是 html，但我已经包含了一些 php 函数并保存了所有页面。我有 2 个样式表，1 个用于响应式视图，另一个用于普通视图。我在我的本地主机（wamp 服务器）中测试了完整的网站，没有发现任何问题，但是当我在线上传网站时，完整的设计似乎一团糟。包括 css 在内的所有文件都已正确上传。

字体太小，对齐不正确，网站似乎被推卸了，但是在我的本地主机上测试时，同一个网站正确显示了所有内容。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:47:32.280

1.  确保所有文件（尤其是 CSS 和 JS）都已加载。例如，您可以使用[Firebug Net panel](https://getfirebug.com/wiki/index.php/Net_Panel#Request_List)进行检查。要格外小心地寻找任何在 Windows 上被忽视但在 Linux 上致命的拼写错误（例如，在 Windows 上 test.JPG 和 test.jpg 是相同的，在 linux 上这是两条不同的路径！）
2.  按 CTRL+0（零）重置域的缩放级别。
3.  确保您没有在 localhost 上加载（或无法加载）的任何其他文件和库到您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:59:36.513

您可能正在使用不是“网络安全”的字体。确保您使用的是[此处](http://www.w3schools.com/cssref/css_websafe_fonts.asp)所示的字体系列。字体系列允许每个浏览器选择它熟悉的字体，但与原始字体足够接近，不会对布局产生太大影响。默认情况下，所有浏览器都可以呈现的字体很少。但是，如果使用该字体非常重要，您可以上传您的字体文件以供浏览器在加载时下载。虽然加载页面需要很长时间。更多信息在[这里。](https://stackoverflow.com/questions/7961721/how-do-i-install-a-custom-font-on-an-html-site)我也喜欢使用[fontsquirrel](http://www.fontsquirrel.com/fontface/generator)。

# directx - 如何将鼠标转换为世界坐标？

> ID：14662865
> 
> 赞同：0
> 
> 时间：2013-02-02T14:25:34.190
> 
> 标签：directx, mouse, slimdx

对于每个世界、视图和投影变换，我都有一个 SlimDX 矩阵。根据[http://msdn.microsoft.com/en-gb/library/windows/desktop/bb147302(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb147302(v=vs.85).aspx)，投影变换在 (-1,1)^3 立方体中留下坐标。

我认为通过将鼠标相对于渲染目标的位置转换为投影空间（即将其缩放到 (-1,1) 范围并将其固定在 z 轴上的 -1 处），然后应用倒置的 worldviewprojection。

下面的代码显示了我的尝试。我的测试是运行应用程序并使用鼠标滚轮放大和缩小，看看打印的 X 坐标是否发生变化，同时将鼠标光标保持在窗口的左边缘 - 它不会，所以某处一定有问题。

```
form.MouseMove += (obj, eargs) =>
        {
            SlimDX.Matrix worldview = SlimDX.Matrix.Multiply(SlimDX.Matrix.Identity, viewMatrix);
            SlimDX.Matrix worldviewprojection = SlimDX.Matrix.Multiply(worldview, projectionMatrix);
            worldviewprojection.Invert();

            var pointX = (float)((2.0 * ((float)eargs.Location.X) / (float)form.Width) - 1.0f);
            var pointY = (float)((2.0 * (((float)eargs.Location.Y) / (float)form.Height)) - 1.0f) * -1.0f;
            var mouseInProjectionSpace = new Vector4(pointX, pointY, -1.0f, 1.0f);
            var mouseInWorldSpace = Vector4.Transform(mouseInProjectionSpace, worldviewprojection);
            Console.WriteLine(mouseInWorldSpace);
        };

        form.MouseWheel += (_, __) =>
            {
                if (__.Delta > 0)
                    cam.Z /= 2.0f;
                else
                    cam.Z *= 2.0f;
                viewMatrix = GetView(cam);
                Console.WriteLine("zzz="+cam.Z);
            }; 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:16:25.470

你的 z 是错误的，因为在投影空间中 z 是 0（近平面）到 1（远平面）

所以它：

```
Vector2 mouse = //Normalized as -1 to 1 (as you did)
Vector3 orig = new Vector3(mouse.X,mouse.Y,0.0f);
Vector3 far = new Vector3(mouse.X,mouse.Y,1.0f);

//This gets mouse position on near plane
Vector3 origin = Vector3.TransformCoordinate(orig,worldviewprojectioninverse);

//This gets mouse position on far plane
Vector3 posfar = Vector3.TransformCoordinate(far,worldviewprojectioninverse); 
```

# php - 我可以在同一个准备好的语句中从等于更改为不等于吗

> ID：14662866
> 
> 赞同：1
> 
> 时间：2013-02-02T14:25:38.547
> 
> 标签：php, mysqli, prepared-statement

我试图弄清楚如何创建准备好的语句。我现在有这个：

```
$stmt = $mysqli->stmt_init();

if($stmt->prepare("SELECT fk_player_id, player_draws, player_turn, player_passes, swapped FROM ".$prefix."_gameplayer WHERE fk_game_id = ? AND fk_player_id = ?")){

    $stmt->bind_param('ii', $currgame, $playerid);
    $stmt->execute();
    $stmt->bind_result($playerid, $udraws, $uturn, $upass, $uswaps);
    $stmt->fetch();

    // HERE I WANT TO MAKE A NEW CALL //

    $stmt->close(); 

} 
```

在该区域**// 这里我想打一个新电话 //**我想运行这个：

```
$sql = mysql_query("SELECT fk_player_id, player_tiles, player_draws, player_turn, player_passes, swapped FROM ".$prefix."_gameplayer WHERE fk_game_id = $currgame AND fk_player_id != $playerid");
$row = mysql_fetch_assoc($sql);

$opponent = $row['fk_player_id'];
$oppTiles = $row['player_tiles'];

$odraws = $row['player_draws']+1;
$oturn = $row['player_turn'];
$opass = $row['player_passes'];
$oswaps = $row['swapped']; 
```

除了 = 和 != 之外，这两个调用是相同的。这可以在同一个语句中完成吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:37:51.747

据我了解您的问题，您需要所有玩家。
好吧，全选。您可以在显示时分开

```
$sql = "SELECT * FROM {$prefix}_gameplayer WHERE fk_game_id = ?";
$stmt = $mysqli->stmt_init();

$data = array();
if($stmt->prepare($sql)){
    $stmt->bind_param('i', $currgame);
    $stmt->execute();
    $res = $stmt->get_result();
    while ($ow = $res->fetch_assoc()) {
        $data[] = $row;
    }
    $stmt->close(); 
}
// to display own games
foreach ($data as $row) {
    if ($row['fk_player_id'] == $playerid) {
        // do something
    }
}
// to display other games
foreach ($data as $row) {
    if ($row['fk_player_id'] != $playerid) {
        // do something
    }
} 
```

# android - 无法在模拟器上加载地图

> ID：14662867
> 
> 赞同：0
> 
> 时间：2013-02-02T14:26:12.520
> 
> 标签：android, google-maps

我使用 MapActivity 加载谷歌地图，但显示的是灰色网格而不是谷歌地图。我已经设置了 API 密钥，它是从我自己的 PC 生成的，并且是用 XML 编写的。

```
<com.google.android.maps.MapView
        android:id="@+id/myMap"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below = "@+id/lngText"
        android:enabled="true"
        android:clickable="true"
        android:apiKey ="0QEUXb8GY3QS9cQfDiZfa2vZxtBZVpxcpcSlOCQ">
 </com.google.android.maps.MapView> 
```

我已经添加了权限和库，甚至是功能：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_GPS"/>
<uses-feature android:name="android.hardware.location.gps"/> 
<uses-library android:name="com.google.android.maps"/> 
```

代码很简单。

```
MapView myMap = (MapView)findViewById(R.id.myMap);
    POS = new GeoPoint((int)40.38014 ,(int)117.00021);

    MapController myMapController = myMap.getController();
    myMapController.setCenter(POS);
    latText.setText(Integer.valueOf(POS.getLatitudeE6()).toString());
    myMapController.setZoom(9); 
```

你能帮我调查一下是什么原因吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:48:56.377

创建新的 AVD，然后选择 Target-"Google APIs (Google Inc.)-API level xx" I had attach image![在此处输入图像描述](../Images/794f9694fb47cb17ef4bdd8c423a0954.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:42:02.693

首先检查而不提供要显示的地理位置。让我们显示默认视图，通过它我们可以检查程序是否真的存在错误。

接下来检查互联网连接。互联网连接速度慢也可能导致此类问题

在创建 avd 的进一步过程中，请务必同时选择 Google map api，并在使用 avd 期间选择适当的 avd 和 google map api

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:37:43.120

您在创建 avd 时是否选择了 Google API 图像？

创建 AVD 时，您必须确保为目标选择“Google API（版本 xx）”

# windows - Windows DOS 命令问题 - 请

> ID：14662872
> 
> 赞同：0
> 
> 时间：2013-02-02T14:27:09.610
> 
> 标签：windows, for-loop, batch-file, dos

我收到以下代码错误，有什么想法吗？我变得 %%S 出乎意料。

我只是在编辑现有的脚本。非常感谢 ！

```
for /f %%s in ('dir /b /Od export*')  do (copy /Y "%%s" exportCurrent.txt) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:38:44.963

从命令行使用 single `%s`，从批处理文件使用 double `%%s`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:36:14.557

您应该只在批处理脚本中使用 %%varname 语法。在这里，使用简单的 %varname 语法，如下所示：

```
for /f %s in ('dir /b /Od export*')  do (copy /Y "%s" exportCurrent.txt) 
```

# php - 从选择mysql中排除id

> ID：14662878
> 
> 赞同：0
> 
> 时间：2013-02-02T14:27:58.477
> 
> 标签：php, mysql

我想从表中排除一个 id 但似乎没有得到这个工作。

这是一个从 2 个表中获取数据的 CodeIgniter 数据表。

我想从warehouse_id 2 中排除数据

```
 function getdata()
    {
            $this->load->library('datatables');
            $this->datatables->select("products.id as productid, image, code, name, size, color, type, gender, price, (CASE WHEN sum(warehouses_products.quantity) Is Null THEN 0 ELSE sum(warehouses_products.quantity) END) as totalQuantity");
            $this->datatables->from('products');
            $this->datatables->join('warehouses_products', 'products.id=warehouses_products.product_id', 'left');
            $this->datatables->where('warehouses_products.warehouse_id !=', '2');
            $this->datatables->group_by("productid");

      echo $this->datatables->generate();
      } 
```

错误是：

```
Fatal error: Call to a member function num_rows() on a non-object in /system/database/DB_active_rec.php on line 990 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:41:11.210

假设你的引号等是正确的...... where 位看起来错误使用 "" 作为完整的 where sql 和字段值使用单引号......同样因为 id 是一个整数，所以不需要在它周围加上引号。

由于您是按产品 ID 进行分组的，即使产品在仓库 id 2 中，如果该产品存在于任何其他仓库中，也不会被排除在外

因此，如果您想排除仓库 id 2 中的所有产品，您应该在 where 子句中使用子选择，类似于 where “product_id not in (Select * from products where warehouse=id = 2)”

很大程度上取决于您真正想要实现的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:31:32.280

加入后应该去哪里。[mysql select](http://dev.mysql.com/doc/refman/5.0/en/select.html)的链接
另外，我不知道“数据表”的实现，但我认为 where 方法缺少单引号。

我研究了“codeigniter”示例，通过那里的示例应该是：

```
$this->db->where('name', $name); 
$this->db->where('email', $email); 

Custom key or value method 

$this->db->where('name !=', $name); 
// Produces WHERE 'name' != '$name' 
```

因此你的 where 方法应该是

```
$this->datatables->where('warehouses_products.warehouse_id !=', '2'); 
```

# android - Android - 隐藏开关小部件上的标签

> ID：14662886
> 
> 赞同：1
> 
> 时间：2013-02-02T14:28:40.953
> 
> 标签：android, widget, switch-statement

我正在向我的屏幕添加一个 Switch 小部件，但我不希望显示标签。如果我将 android:text 设置为空字符串，或者根本不设置它，则小部件左侧有一个空白间隙，点击该间隙会导致小部件切换。

有谁知道如何隐藏开关的标签部分？预先感谢您的帮助。

```
<Switch
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text=""
  android:textOn="@string/switch_text_yes"
  android:textOff="@string/switch_text_no"
  android:checked="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:02:40.913

我发现这与我使用 TableLayout 的事实有关。Switch（虽然不是实际可见的按钮）正在扩展到与整个单元格一样宽，即使`android:layout_width`设置为`wrap_content`. 可见的按钮在右侧是正常大小，左侧的间隙足够大，可以占用单元格的其余部分。

答案是`android:layout_gravity="left"`在Switch上设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-16T09:44:15.267

您看到的差距是 switchPadding - 开关和标题文本之间的最小空间。

有一个 XML 属性 switchPadding（在 Switch 和 SwitchCompat 视图中），您可以将其设置为 0dp 以消除间隙。

文档：[SwitchCompat.setSwitchPadding](https://developer.android.com/reference/androidx/appcompat/widget/SwitchCompat#setSwitchPadding(int))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T16:25:15.443

我解决了这个问题，首先删除“text”中的值，将“layout_width”设置为“wrap_content”，将“layout_gravity”设置为包括“left”并调整“switchMinWidth”参数以使其更长。

# jquery - 在 jQuery 中使用 on() 获取容器

> ID：14662888
> 
> 赞同：5
> 
> 时间：2013-02-02T14:28:43.677
> 
> 标签：jquery, event-delegation

我在 div 中有一个按钮来隐藏该 div，我想将 div 传递给处理程序。这是我当前的代码：

```
$('#hidden-div').on('click', '#hide-btn', { element : $('#hidden-div') }, hideElement); 
```

有什么办法可以避免重新选择容器？像这样的东西会很好：

```
$('#hidden-div').on('click', '#hide-btn', { element : $(this) }, hideElement); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T14:38:12.890

[`event.delegateTarget`](http://api.jquery.com/event.delegateTarget/)持有一个 DOM 元素引用。

```
$('#hidden-div').on('click', '#hide-btn', hideElement);

function hideElement(e) {
    $(e.delegateTarget)//do stuff
} 
```

您仍然必须将其包装在 jQuery 对象中，但从 DOM 元素引用创建 jQuery 对象不会查询 DOM。

# python - 基于 Python 的 Socket 程序接受 libPcap(C-based)

> ID：14662890
> 
> 赞同：0
> 
> 时间：2013-02-02T14:29:09.050
> 
> 标签：python, linux, sockets, networking, pcap

亲爱的大家：

我使用**基于 python 的套接字客户端**来发送字符串数据（即日志数据）。

另一方面，我使用**libpcap 在服务器端嗅探字符串数据**。

# 但是当我第二次向服务器端发送字符串数据时，客户端出现错误。

如下错误：

```
Traceback (most recent call last):
  File "./udp_client_not_sendback.py", line 21, in <module>
    s.sendall(data) #Send UDP data
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 111] Connection refused 
```

以下是我在客户端和服务器端的代码：

***客户端（Python）***

```
import socket, sys

host = sys.argv[1] #Server IP Address

textport = sys.argv[2] #Server Binding Port

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) #socket

try:
    port = int(textport)
except ValueError:
    port = socket.getservbyname(textport, 'udp')

s.connect((host, port)) #connect

while(1):
    print "Enter data to transmit:"

    data = sys.stdin.readline().strip() #UDP data

    s.sendall(data) #Send UDP data 
```

***服务器端（C libpcap）***

```
 pcap_handler_func(u_char *user, const struct pcap_pkthdr *h, const u_char *bytes)
    {
    char timebuf[64];
    char addrstr[64];
    struct ether_header *ethhdr = (struct ether_header *)bytes;
    struct iphdr *ipv4h;
    struct ip6_hdr *ipv6h;

    memset(timebuf, 0, sizeof(timebuf));
    if (ctime_r(&h->ts.tv_sec, timebuf) == NULL) {
    return;
    }
    timebuf[strlen(timebuf) - 1] = '\0';
    printf("%s, caplen:%d, len:%d, ", timebuf, h->caplen, h->len);
    ipv4h = (struct iphdr *)(bytes + sizeof(struct ether_header));
    inet_ntop(AF_INET, &ipv4h->saddr, addrstr, sizeof(addrstr));
    printf("src[%s]\n", addrstr);

    return;
    }

    int main()
    {
    pcap_t *p;
    char errbuf[PCAP_ERRBUF_SIZE];
    char cmdstr[] = "udp";
    struct bpf_program bpfprog;

    p = pcap_open_live("eth1", 65536, 1, 10, errbuf);

    //Filter
    if (pcap_setfilter(p, &bpfprog) < 0) {
    fprintf(stderr, "%s\n", pcap_geterr(p));
    return 1;
    }

    //Packet action
    if (pcap_loop(p, -1, pcap_handler_func, NULL) < 0) {
    fprintf(stderr, "%s\n", pcap_geterr(p));
    pcap_close(p);
    return 1;
    }

    pcap_close(p);
    return 0;
    } 
```

我认为问题是我没有在服务器端绑定套接字，我只是使用 pcap 来捕获字符串数据。

所以第二次在客户端发生了套接字错误。

任何人都可以给我一些建议来克服这个问题？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:13:41.047

libpcap 及其使用的捕获机制***不***适合在编写 TCP/UDP/IP 服务器时使用！它们的目的是 1）允许被动捕获数据包和（在某些情况下以及使用较新版本的 libpcap）注入数据包和 2）在链路层上运行且没有实现的协议的用户模式实现在操作系统内核中。

如果您在某台机器上运行一个进程，使用 libpcap 监听数据包，则***不会***在该机器上创建一个套接字来接收发送到某个特定 TCP 或 UDP 端口的数据包。

当您的程序第一次尝试将数据包发送到有问题的 UDP 端口时，您发送它的机器可能会看到它被发送到没有套接字正在侦听的 UDP 端口，并发回一个 ICMP 端口不可达信息。发送调用已经完成；UDP 是一种无连接协议，没有可靠的传递保证，因此 UDP 发送不会*等待*任何形式的回复 - 如果数据包发送到网络上，则认为“成功”，因为无法进行其他成功传递的检查在 UDP 级别进行。

However, as you connected the socket in the client program, the client machine's ICMP implementation, if it sees the ICMP Port Unreachable message, will set an indicator on the socket to tell the program that the *previous* UDP packet couldn't be delivered (as there was nothing to which to deliver it). A receive attempt on that socket - or, it appears, a subsequent attempt to send a packet on that socket - will return the "connection refused" error as an indication that the *previously-sent* packet couldn't be delivered. It will also mean that the second attempt to send the packet won't actually send the packet; you'd have to make *another*尝试，我认为，这将成功发送数据包，尽管如果服务器上没有程序监听该 UDP 端口，它将再次获得 ICMP 端口不可达。

这*就是*为什么您在使用 libpcap 的嗅探器（***不是***服务器！）应用程序中看到第一个数据包而不是第二个数据包的原因。

所以当他/她说“必须有一个实际的服务器在服务器端运行”时，millimoose 是 100% 正确的。编写一个 - 使用常规套接字，而不是 libpcap 和它可能使用的任何机制（Linux 上的 AF_PACKET 套接字，*BSD 和 OS X 上的 BPF 设备等），然后在服务器机器上运行它。您还可以*同时*运行基于 libpcap 的*嗅探器*程序或其他一些嗅探器程序，例如 tcpdump 或 {Wireshark, TShark}，以查看线路上发生了什么。

# google-analytics - Facebook喜欢按钮倾斜谷歌分析页面时间加载

> ID：14662891
> 
> 赞同：0
> 
> 时间：2013-02-02T14:29:19.863
> 
> 标签：google-analytics, facebook-like

我有一个性能相当不错的网站，平均加载时间为`0.97`所有页面。但是，我们最近在我们的主页上添加了一个 Facebook 喜欢按钮，这导致`2.09`该特定页面的加载时间。

这绝对不是一个值得关注的关键问题。例如，我可以在页面加载后用 js 插入点赞按钮，但它必须是 iframe，从而限制点击量（GA 社交插件）。

有没有办法在页面加载后呈现like按钮并仍然保留API，允许点击跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:19:38.690

在 onload 后尝试加载 facebook：

```
<script>
(function(w, d, s) {
  function go(){
    var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.src = url; js.id = id;
      fjs.parentNode.insertBefore(js, fjs);
    };
    load('//connect.facebook.net/en_US/all.js#appId=272697932759946&xfbml=1', 'fbjssdk');
    load('https://apis.google.com/js/plusone.js', 'gplus1js');
    load('//platform.twitter.com/widgets.js', 'tweetjs');
  }
  if (w.addEventListener) { w.addEventListener("load", go, false); }
  else if (w.attachEvent) { w.attachEvent("onload",go); }
}(window, document, 'script'));
</script> 
```

资料来源：[http ://www.aaronpeters.nl/blog/why-loading-third-party-scripts-async-is-not-good-enough](http://www.aaronpeters.nl/blog/why-loading-third-party-scripts-async-is-not-good-enough)

# php - PHP文件将密码存储为文本文件

> ID：14662892
> 
> 赞同：0
> 
> 时间：2013-02-02T14:29:41.157
> 
> 标签：php, security, passwords

对于我只有朋友知道的非常小的网站，我正在开发一个密码系统。我将密码保存在这样的 php 文件中。

```
<?php
if($_GET["p"]=="password"){
?>
user1 password1
user2 password2
<?php
}
?> 
```

然后，我可以使用 file_get_contents(pass.php?p="password"); 读取密码 而且我仍然可以通过写入 php 文件来写入密码，就像我写入文本文件一样。这种方法不安全吗？是否有不需要数据库的类似方法？我认为我的网站不需要加密，如果密码被泄露也不会造成太大的伤害。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:35:49.730

哇。我会说这很不安全。有理由不使用数据库吗？

另外，如果您愿意，为了在没有数据库的情况下使其更安全，您可以创建用户名+密码与[md5](http://www.php.net/manual/en/function.md5.php)和/或[sha1](http://www.php.net/manual/en/function.sha1.php)编码的组合，并将其保存为目录中的无扩展名文件，并比较该组合是否正确[文件已存在](http://www.php.net/manual/en/function.file-exists.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:12:53.927

这些是改进您当前方法的一些建议。

*   您可以使用我记得的 apache rewrite 模块来限制直接访问此文件。

*   使用复杂密码（带有特殊字符和数字的短语）作为页面访问的主要密码。

*   同样对于主密码，比较密码的 md5 或 sha1 哈希值与 GET 变量值的 md5 和 sha1 哈希值，而不是在那里放置纯文本。

*   存储密码的 md5 或 sha1 哈希值，而不是存储纯文本密码。然后在比较密码时，您可以将用户输入的值转换为该值的哈希值，并将其与存储的值进行比较。

*   我记得在散列时，您可以使用种子，这将进一步提高安全性。

这将使它更安全一些，因为如果有人登录到服务器，他不能直接获取您用户的密码文本。但请注意，大多数哈希值都可以使用雨弓表来破解。但这至少比存储纯文本密码更安全。

但是我仍然更喜欢您可以将数据存储在数据库中而不是像这样的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:56:27.297

查看网站[http://www.hackthissite.org](http://www.hackthissite.org)它允许您做真实生活中人们如何破解网站的例子。其中一项基本任务是学习从包含的文本文件中获取密码。如果有人弄清楚文本文件的下落。可以轻松找到隐藏文件，然后他们将可以访问您的所有密码。这取决于您，如果您不关心安全性，您甚至可能没有登录系统。如果您确实关心，只需获取 mysql，它是免费的，并且不难使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T20:02:27.100

无论您是将密码存储在文件中还是在数据库中，都应采取相同的措施。不要在那里存储明文密码，而**只存储密码的哈希值**。因此，即使有人可以读取文件，他也不知道密码。作为副作用，它还将避免特殊字符的编码问题。

使用像 BCrypt 这样的慢速密钥派生函数来散列密码。像 MD5 或 SHA-512 这样的快速散列函数不适用于散列密码，因为攻击者可以暴力破解它们的速度太快（使用普通硬件每秒大约 8 Giga MD5 值）。

PHP 很快提供了两个简单的函数`password_hash()`来`password_verify()`生成这样的 BCrypt 值。还存在旧 PHP 版本的功能，看看这个[答案](https://stackoverflow.com/a/14274045/575765)。

# android - 通过浏览器发布到 Facebook 墙

> ID：14662894
> 
> 赞同：0
> 
> 时间：2013-02-02T14:29:48.240
> 
> 标签：android, facebook

我需要在用户的 Facebook 墙上发布一些文本。正在考虑集成 facebook API，但在此之前我想确认没有更简单的方法可以做到这一点。

我们可以简单地将要通过 post 方法发布的数据传递到 facebook url 吗？让 facebook 检测到用户未通过身份验证并在浏览器中显示登录屏幕，并且在身份验证成功后继续进行墙发布任务。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:00:22.810

是的。查看[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)

# jquery - ColorBox - 防止关闭

> ID：14662895
> 
> 赞同：0
> 
> 时间：2013-02-02T14:29:52.653
> 
> 标签：jquery, colorbox

我想防止意外关闭颜色框，因此我将从加载的 iframe 内部显示/隐藏关闭按钮。

我阅读了文档，但两个示例似乎都不起作用：

```
var originalClose = $.colorbox.close;
$.colorbox.close = function(){
    var response;
    if($('#cboxLoadedContent').find('form').length > 0){
        response = confirm('Do you want to close this window?');
        if(!response){
            return; // Do nothing.
        }
    }
    originalClose();
}; 
```

或者

```
<!-- calling colorbox's close method from within an iframe: -->
<a href='#' onclick='parent.$.colorbox.close(); return false;'>close this iframe</a> 
```

...彩盒只是没有关闭。我究竟做错了什么？

在控制台中我看到：

```
Uncaught TypeError: Cannot read property 'colorbox' of undefined 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T07:41:22.537

尝试使用 $('#cboxClose').remove(); 关闭颜色框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:40:19.310

它应该是：

```
parent.$('#yourElement').colorbox.close(); 
```

其中*yourElement*将是包含颜色框的 iframe 的 ID/选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:34:02.003

您需要在库之后包含`colorbox.css`和。`jquery.colorbox.js``jquery`

您的第一个示例覆盖了颜色框`close`功能，第二个示例只是关闭了颜色框。

```
$('#cboxLoadedContent').find('form') 
```

在我的示例中，我没有`form`，所以我删除了`form`选择器。

演示：http: [//jsfiddle.net/BY3ZK/](http://jsfiddle.net/BY3ZK/)

Colorbox 只是`div`，而不是 iframe，所以我`parent`从这里删除：

```
parent.$.colorbox.close(); 
```

演示：http: [//jsfiddle.net/BY3ZK/1/](http://jsfiddle.net/BY3ZK/1/)

# jquery - JqueryTools Scrollable：单击按钮后更改滚动步骤

> ID：14662897
> 
> 赞同：0
> 
> 时间：2013-02-02T14:29:59.347
> 
> 标签：jquery, slider, jquery-tools

我喜欢“ [jquery tools](http://jquerytools.org/demos/scrollable/index.html) ”中的可滚动插件。到目前为止效果很好。刚刚注意到，当由按钮触发时，更改滚动步骤不起作用。虽然它正在处理“文档加载”。我想更改单击按钮后滚动的项目数量。但这失败了。

这在“文档加载”之后立即起作用：

```
$("#scrollable").scrollable({
size: 5;
}); 
```

但是，当通过单击按钮执行此操作时，它不会：

```
 $("#mybutton").click(function(event) {

        // approach 1
        var api = $("#scrollable").data("scrollable");
        api.size = 1;

        // approach 2
        $("#scrollable").data("scrollable").size = 1;

        // approach 3
        $("#scrollable").scrollable({size: 1}) ;
      }); 
```

这两种方法中的任何一种都应该有效，但它没有......似乎在 doc load scrollable 之后不允许我更改“大小”。有什么解决办法吗？

多姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:05:19.210

作品... [http://jsfiddle.net/NwhYD/2/](http://jsfiddle.net/NwhYD/2/)

这解决了问题：

```
jQuery(".scrollable").data("scrollable").getConf().size=1; 
```

# mysql - MySQL：在一个查询中从某些服务器中进行多项选择？

> ID：14662899
> 
> 赞同：1
> 
> 时间：2013-02-02T14:30:13.480
> 
> 标签：mysql

我可以在一次查询中从某些服务器中选择数据吗？

MySQL：

> server1：
> 数据库：
> 用户
> 
> server2
> 数据库：
> 用户
> 
> serverN 个
> 数据库
> 用户

是否可以通过一次查询从所有服务器的用户表中选择记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:36:10.050

不，你不能。您只能在连接到的同一台服务器上使用 select 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:38:21.203

我不确定，但经常引用数据库引擎不是为此目的而设计的。这是与它相关的东西[multiple_db_across_multiple_servers](https://stackoverflow.com/questions/3568618/execute-one-mysql-query-on-multiple-databases)可能会在一定程度上回答您的问题。

# gwt - gwt 不加载具有相同名称的新图像

> ID：14662912
> 
> 赞同：2
> 
> 时间：2013-02-02T14:31:47.690
> 
> 标签：gwt, browser-cache

我的页面上有一张图片，我正在将一张相同的新图片上传到同一位置。当我上传新图片时，浏览器仍然显示旧图片。当我在服务器端检查它时，我看到了新图像。我不想更改图像的名称，因为它包含一些数据库记录 ID 等。

如何显示我的新图像？ps 1：我试过 ctrl + f5 ps 2：我试过关闭并打开浏览器 ps 3：我尝试将 ime 的 url 设置为空字符串，然后设置为图像的 ro url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:46:13.187

您没有提到尝试**CTRL + SHIFT + DEL**（网络开发人员一直最喜欢的）。用户触发错误或 chrome 开发工具来确定您的新图像是否被您的浏览器获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:37:16.093

尝试`empty the browser cache`（清除所有缓存的数据）。您也可以从其他浏览器查看（检查浏览器缓存是否*真的是有罪的）*

如果您使用一些浏览器端开发工具（例如 Firebug），您可以看到从服务器加载的图像。通常有一个“清除缓存”按钮用于这些目的。

# module - 来自外部模块的事件监听器调用函数

> ID：14662918
> 
> 赞同：0
> 
> 时间：2013-02-02T14:32:19.307
> 
> 标签：module, coronasdk, addeventlistener

正如标题所述，我有一个事件监听器，它从我的火箭类中调用一个函数

但我在调用所述函数时收到错误，代码如下。

火箭级.LUA

```
module(..., package.seeall)

function rocket()

local rocket = {}
local rocket_mt = { __index = rocket }  -- metatable
local sprite
local rockettop, rocketbottom, speedX, speedY

function rocket.new()   -- constructor

local newRocket = {
sprite = "red-rocket.png"

}
return setmetatable( newRocket, rocket_mt )
end 

function rocket:draw(x,y,group)

local spritesheetdata = {
width = 30,
height = 55,
numFrames = 7,
sheetContentWidth = 210,
sheetContentHeight = 55,
}

local spritesheet = graphics.newImageSheet( "red_rocket.png", spritesheetdata )

local spritesequencedata = {

 { name = "idle", frames = {1}, 
   } ,

 { name = "afterburn",
   start = 2,
   count = 2,
   time = 500,
   loopCount = 0, -- optional default 0(infinite)
   loopDirection = "forward" -- optional (default)
   } ,
   {  name = "explode",
   start = 4,
   count = 4,
   time = 1200,
   loopCount = 1
     }
 }

   sprite = display.newSprite( spritesheet, spritesequencedata)
   rockettop = {-14.5, 5, 0, -25,14.5,5}
   rocketbottom = {-14.5,7,-14.5,6,14.5,6,14.5,7}

   physics.addBody(sprite, {shape = rockettop},{bounce = 0.5,friction = 0.6, shape =  rocketbottom} )
   sprite.angularDamping = 2
   sprite.x = x
   sprite.y = y
   sprite:setSequence("idle")
   sprite:play()
   group:insert (sprite)

   end

function rocket:thrust(event)

speedX = 0.0025 * (math.sin(sprite.rotation*(math.pi/180)))
speedY = -0.0025 * (math.cos(sprite.rotation*(math.pi/180)))
if(event.phase =="began") then

  sprite:applyLinearImpulse(speedX, speedY, sprite.x, sprite.y)

  return true
  end
  sprite:setSequence("afterburn")
  sprite:play()

end

   return rocket

 end 
```

和 CONTROLS.LUA

```
module(..., package.seeall)
rocket = require("rocketclass")

local controlthrust = display.newImage("thrust control.png")
controlthrust.y = display.contentWidth/1.6   
controlthrust.x = display.contentWidth/1.1

local controlleft = display.newImage("direction controls.png")
controlleft.y = display.contentWidth/1.6

local controlright = display.newImage("direction controls.png")
controlright.y = display.contentWidth/1.6
controlright.x = display.contentWidth/6
controlright.rotation = 180

controlthrust:addEventListener("touch",rocket:thrust) 
```

从控制台收到的错误是：

controls.lua:21：尝试调用方法“推力”堆栈回溯：C：在函数“错误”中？：在函数“gotoScene”中 ...nts\corona projects\rocket lander - classes\menu.lu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:40:40.617

我看不到你在哪里调用rocket.new()。我认为你需要做这样的事情：

```
 rocketclass = require("rocketclass")

 rocket = rocketclass.new() 
```

在为它设置触摸处理程序之前。

# php - 如何将 JavaScript 变量输出存储到 PHP 变量中？

> ID：14662927
> 
> 赞同：14
> 
> 时间：2013-02-02T14:33:07.827
> 
> 标签：php, javascript, html

我在 JavaScript 中有以下代码：

```
<script>
var a="Hello";
</script> 
```

PHP代码： -

```
<?php 
$variable = // I want the above JavaScript variable 'a' value to be stored here
?> 
```

注意：我不希望它在表单提交中。我在 JavaScript 中有一些逻辑，我想在同一个 PHP 页面中使用它......请让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-02T14:49:02.007

你必须记住，如果 JS 和 PHP 存在于同一个文档中，PHP 将首先执行（在服务器上），JS 将在第二个执行（在浏览器上）——两者永远不会交互（除了你用PHP输出JS，这并不是两个引擎之间的真正交互）。

考虑到这一点，最接近的方法是在 JS 中使用 PHP 变量：

```
<?php
$a = 'foo'; // $a now holds PHP string foo
?>
<script>
    var a = '<?php echo $a; ?>'; //outputting string foo in context of JS
                                 //must wrap in quotes so that it is still string foo when JS does execute
                                 //when this DOES execute in the browser, PHP will have already completed all processing and exited
</script>
<?php
//do something else with $a
//JS still hasn't executed at this point
?> 
```

正如我所说，在这种情况下，PHP（全部）首先在服务器上执行，导致：

1.  `$a`要创建为字符串 'foo'的 PHP 变量
2.  `$a`在某些 JavaScript（当前未执行）的上下文中输出的值
3.  用 PHP 做的更多`$a`
4.  所有输出，包括带有 var 赋值的 JS，都被发送到浏览器。

正如所写，这导致以下内容被发送到浏览器执行（为了清楚起见，我删除了 JS 注释）：

```
<script>
    var a = 'foo';
</script> 
```

然后，也只有到那时，JS 才会开始执行，并将其自己的变量`a`设置为“foo”（此时 PHP 不在图片范围内）。

换句话说，如果两者存在于同一个文档中，并且没有与服务器进行额外的交互，那么 JS 在 PHP 中不会产生任何影响。此外，PHP 对 JS 的影响仅限于在 JS 的上下文中输出一些 JS 或某些东西的简单能力。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-09T11:44:06.607

```
<html> 
<head>
    <script>
        var a="Hello";
    </script>

</head> 

<body> 
    <?php 
        echo $variable = "<script>document.write(a)</script>"; //I want above javascript variable 'a' value to be store here
    ?>
</body> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T14:42:14.310

理想的方法是通过 AJAX 调用传递它，但对于快速而肮脏的方法，您所要做的就是在`$_GET`参数中使用此变量重新加载页面 -

```
<script>
  var a="Hello";
  window.location.href = window.location.href+'?a='+a;
</script> 
```

您的页面将重新加载，现在在您的 PHP 中，您将可以访问该`$_GET['a']`变量。

```
<?php 
  $variable = $_GET['a'];
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T14:38:23.930

如果这与表单提交有关，请在表单内使用隐藏输入并将隐藏输入值更改为此变量值。然后您可以在 php 页面中获取隐藏的输入值，并在表单提交后将其分配给您的 php 变量。

**更新：**

根据您的编辑，您似乎不了解 javascript 和 php 的工作原理。Javascript 是一种客户端语言，而 php 是一种服务器端语言。因此，当您在服务器中执行相关页面时，您无法执行 javascript 逻辑并将该变量值用于 php 变量。您可以在客户端浏览器处理从 Web 服务器返回的网页后运行相关的 javascript 逻辑（该网页已经执行了相关页面的 php 代码）。在执行 javascript 代码并将相关值分配给相关 javascript 变量之后，您可以使用表单提交或 ajax 发送该 javascript 变量值以供另一个 php 页面使用（或处理并获取相同 php 页面的请求）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T14:42:45.470

你真的不能。PHP 在服务器上生成，然后发送到浏览器，JS 开始做这件事。所以，无论页面上的 JS 发生什么，PHP 都不知道，因为它已经完成了。@manjula 是正确的，如果您希望这种情况发生，您必须使用 POST 或 ajax。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-24T19:42:34.507

JavaScript 变量 = PHP 变量尝试如下：-

```
<script>
var a="Hello";
<?php
$variable='a';
?>
</script> 
```

注意：-它仅在您在脚本标记下执行 php 代码时运行。我有一个成功初始化 php 变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-13T10:36:58.037

您可以使用 AJAX 解决此问题。您不需要为 AJAX 加载 JQuery，但它比原生 JS 具有更好的错误和成功处理能力。

我会这样做：

1）为页面上的所有锚点添加一个点击事件监听器。2）点击时，您可以为您的php设置一个ajax请求，在您设置锚ID或文本值的POST-DATA 3）php获取该值，您可以为您的数据库设置一个请求。然后返回所需的值并将其回显到 ajax 请求。4）您的ajax请求的成功功能正在做一些事情

有关 ajax 请求的更多信息，请查看此处：

-> Ajax-Request NATIVE [https://blog.garstasio.com/you-dont-need-jquery/ajax/](https://blog.garstasio.com/you-dont-need-jquery/ajax/)

一个简单的 JQuery 示例：

```
$("button").click(function(){
  $.ajax({url: "demo_test.txt", success: function(result){
    $("#div1").html(result);
  }});
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-19T12:59:41.157

在你看来：

```
 <?php $value = '<p id="course_id"></p>';?> 
```

javascript代码：

```
 var course = document.getElementById("courses").value;

 document.getElementById("course_id").innerHTML = course; 
```

# java - 安排一个批处理文件在java中每2分钟运行一次

> ID：14662928
> 
> 赞同：0
> 
> 时间：2013-02-02T14:33:08.393
> 
> 标签：java

我创建了一个名为 abc.bat 的批处理文件，它为我执行了一些任务，但现在我必须每 10 分钟手动执行一次，请告知我如何安排它，以便它可以在我正在寻找的 Windows 中作为服务运行任何将在每五分钟后运行并执行该批处理文件 abc.bat 的 java 程序或石英实现，请告知我如何安排在 java 中执行批处理文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:41:25.523

我的 Java 有一个类`TimerTask`可以定期执行某些操作。
然后在那个计时器中运行蝙蝠

```
Runtime.getRuntime().exec("cmd.exe /c start myjob.bat"); 
```

# jquery - jQuery Knob 插件，停止重复动画（slideDown、slideUp）

> ID：14662930
> 
> 赞同：0
> 
> 时间：2013-02-02T14:33:11.067
> 
> 标签：jquery, jquery-knob

我使用[旋钮插件](https://github.com/aterrien/jQuery-Knob)。[jsFiddle](http://jsfiddle.net/almostemp/8VC95/1/)在我添加以下代码来更改悬停值（第 327 行）之前，它的效果非常好：

```
.bind( "mousemove"
       , function (e) {
           e.preventDefault();
           s._xy()._mouse(e);
         }
) 
```

我需要在用户单击（释放功能）拨盘后显示：

```
<div class="tooltip">Tooltip...</div> 
```

第 673 行：

```
$(".dial").knob({
    'release': function ()
    {
        $(".tooltip").slideDown();
        $(".tooltip").delay(1500).slideUp();
    }
}); 
```

但是点击表盘后它会不断重复。每 1.5 秒上下滑动一次。我想阻止它重复。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:17:36.817

您需要添加一个新的处理程序，`_move`. 由于 的行为`_mouse`是针对点击事件的。

```
.bind("mousemove", function (e) {
    e.preventDefault();
    s._xy()._move(e);
}) 
```

```
this._move = function (e) {
    var v = s.xy2val(e.pageX, e.pageY);

    if (v == s.cv)
      return;

    if (s.cH && (s.cH(v) === false))
      return;

    s.change(v);
    s._draw();
}; 
```

[看这里。](http://jsfiddle.net/HfFWm/)

# java - 返回数组中字符串的位置？

> ID：14662931
> 
> 赞同：0
> 
> 时间：2013-02-02T14:33:16.407
> 
> 标签：java, arrays

我已经制作了一个数组，我希望用户输入两个不同的字符串，例如部门的“ITEC”和 courseNumber 的“110”。然后我想搜索数组，看看那些字符串是不是一个接一个，比如整个数组中的“ITEC 110”。然后我希望它返回它所在字符串开头的两个数字。

数组的部分内容如下所示，另外还有大约 15 行类似：

0 0 核心 101 3 大学核心 A：核心 101
0 1 ITEC 110 3 信息技术概论

这是我拥有的代码的一部分：

```
if ("find".equals(option))
{
  String department;
  String courseNumber;

  System.out.print("Please enter the Department:\n");
  department = scan.next();
  System.out.print("Please enter the Course Number:\n");            
  courseNumber = scan.next();

  int count = 0;

  Courses[] POS = new Courses[50];

  while (scan.hasNext())
  {
    POS[count] = new Courses(scan.nextLine());
    if (POS[count].equals(department + "" + courseNumber))
      System.out.println("YES");

    count++;
  }
  System.out.println("\n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:59:15.477

1.  您可以连接两个字符串（部门，课程编号）
2.  遍历数组并查找包含连接字符串的字符串。
3.  取匹配字符串的前两个单词。

# titanium - 使用 Titanium 屏蔽视图（Appcelerator）

> ID：14662932
> 
> 赞同：1
> 
> 时间：2013-02-02T14:33:23.963
> 
> 标签：titanium, titanium-mobile, image-masking

我需要使用 Titanium 创建一个老虎机游戏。我面临的问题最好用图像来解释：

![基本布局](../Images/68c09dd2dbd5f0c7c9d424b4a9180e02.png)

这是我的基本布局。我将机器中显示的图像放在一个 3x3 矩阵中，并在顶部放置机器的“框架”。我想剪切显示在机器框架下的图像的顶部和底部，并实现这样的效果：

![在此处输入图像描述](../Images/74ce53d34c631bd086b865223b9bb9aa.png)

如果我可以使用支持遮罩视图（组）的框架，那么我可以在对象顶部放置一个图像遮罩，我想像这样剪切，问题就解决了：

![在此处输入图像描述](../Images/8e715ffd643de2e5a18d47a129932557.png)

但我不能在 Titanium 中做到这一点，我唯一能做的就是创建蒙版图像（[Ti.UI.createMaskedImage](http://developer.appcelerator.com/apidoc/mobile/1.8.2/Titanium.UI.createMaskedImage-method.html)）。

我真的不想创建从两个方向切成两半的所有小图像的版本。

任何帮助或解决此问题的想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:46:51.940

只需创建一个作为机器屏幕的视图，然后将图像放入其中。将视图的borderRadius 设置为0，这将使It Clip 其子项。

# html - 如何在使用 twitter 的新小部件时禁用消息“您确定要再次发送表单”？

> ID：14662933
> 
> 赞同：3
> 
> 时间：2013-02-02T14:33:37.100
> 
> 标签：html, forms, widget, twitter

我刚刚将 twitter 的新小部件添加到我的网站。

它总是显示在侧边菜单中，并且侧边菜单在我的网站上随处可见。

但是对于 Safari，当我返回上一页时，它总是会弹出此消息。

```
Are you sure you want to send a form again? 
```

我认为该评论表单中的 post 方法正在这样做。如何自定义该消息并将其隐藏给查看我网站的每个人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:29:13.767

您不能只删除表单重新提交消息。您可以将其发布到单独的页面，然后将用户重定向回来。

# android - 接受 unicode 的 Android IME

> ID：14662935
> 
> 赞同：5
> 
> 时间：2013-02-02T14:33:50.790
> 
> 标签：android, unicode, keyboard, ime

在为 android 编写输入法编辑器时，除了更改 android:keyLabel 之外，我需要做什么才能使其映射接受一些 unicode 字符作为输入（例如，让我将马拉雅拉姆语字符映射为输入：0D00 - 0DFF）

```
 <Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
        android:horizontalGap="0px"
        android:keyHeight="@dimen/key_height"
        android:keyWidth="10%p"
        android:verticalGap="0px" >

        <Row>
            <Key
                android:codes="45"
                android:keyEdgeFlags="left"
                android:keyLabel="q"
                android:popupCharacters="@string/hello"
                android:popupKeyboard="@xml/qwerty"/>
            <Key
                android:codes="51"
                android:keyLabel="w" />
            <Key
                android:codes="33"
                android:keyLabel="e" />
            <Key
                android:codes="46"
                android:keyLabel="r" />
            <Key
                android:codes="48"
                android:keyLabel="t" />
            <Key
                android:codes="53"
                android:keyLabel="y" />
            <Key
                android:codes="49"
                android:keyLabel="u" />
            <Key
                android:codes="37"
                android:keyLabel="i" />
            <Key
                android:codes="43"
                android:keyLabel="o" />
            <Key
                android:codes="44"
                android:keyEdgeFlags="right"
                android:keyLabel="p" />
        </Row>
        <Row>
            <Key
                android:codes="29"
                android:horizontalGap="5%p"
                android:keyEdgeFlags="left"
                android:keyLabel="a" />
            <Key
                android:codes="47"
                android:keyLabel="s" />
            <Key
                android:codes="32"
                android:keyLabel="d" />
            <Key
                android:codes="34"
                android:keyLabel="f" />
            <Key
                android:codes="35"
                android:keyLabel="g" />
            <Key
                android:codes="36"
                android:keyLabel="h" />

            <Key
                android:codes="38"
                android:keyLabel="J" />
            <Key
                android:codes="49"
                android:keyLabel="K" />

            <Key
                android:codes="40"
                android:keyEdgeFlags="right"
                android:keyLabel="l" />
        </Row>
        <Row>
            <Key
                android:codes="60"            
                android:keyEdgeFlags="left"
                android:keyIcon="@drawable/sym_keyboard_shift"
                android:iconPreview="@drawable/sym_keyboard_shift"
                android:isModifier="true"
                android:isSticky="true"
                android:keyWidth="15%p"
                android:keyLabel="shift" />
            <Key
                android:codes="54"
                android:keyLabel="z" />
            <Key
                android:codes="52"
                android:keyLabel="x" />
            <Key
                android:codes="31"
                android:keyLabel="c" />
            <Key
                android:codes="50"
                android:keyLabel="v" />
            <Key
                android:codes="30"
                android:keyLabel="b" />
            <Key
                android:codes="42"
                android:keyLabel="n" />
            <Key
                android:codes="41"
                android:keyLabel="m" />
            <Key
                android:codes="67"
                android:isRepeatable="true"
                android:keyEdgeFlags="right"
                android:keyIcon="@drawable/sym_keyboard_delete"
                android:keyWidth="15%p" />
        </Row>
        <Row android:rowEdgeFlags="bottom" >
            <Key
                android:codes="-3"
                android:keyEdgeFlags="left"
                android:keyIcon="@drawable/sym_keyboard_done"
                android:keyWidth="20%p" />
            <Key
                android:codes="-2"
                android:keyLabel="123"
                android:keyWidth="15%p" />
            <Key
                android:codes="62"
                android:isRepeatable="true"
                android:keyIcon="@drawable/sym_keyboard_space"
                android:keyWidth="30%p" />
            <Key
                android:codes="46,55"
                android:keyLabel=". ,"
                android:keyWidth="15%p" />
            <Key
                android:codes="10"
                android:keyEdgeFlags="right"
                android:keyIcon="@drawable/sym_keyboard_return"
                android:keyWidth="20%p" />
        </Row>

    </Keyboard> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-03T21:49:40.920

我知道这是一个老问题，但是当我需要它时我还没有找到答案，所以我会在这里为可能寻找它的其他人提供一个。

根据[文档](https://developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html#attr_android:codes)：Keyboard.Key 的 (android.inputmethodservice.Keyboard.Key) android:codes xml 属性是：

> 此键输出的 unicode 值或逗号分隔值。
> 
> 可以是字符串值，使用 '\;' 为 unicode 字符转义诸如 '\n' 或 '\uxxxx' 之类的字符；可以是整数值，例如“100”。

我不知道如何使用 '\;' 但您可以：

*   (1) 使用十进制 unicode 值，您可以在此处查找，例如：[http](http://unicodelookup.com/#%090xD05/1) ://unicodelookup.com/#%090xD05/1 例如 3333 表示 U+0D05

或者

*   (2) 而不是用 '\;' 转义 指定 0x 前缀，例如 0x0D05

字符 അ 马拉雅拉姆字母 A U+0D05 的示例：

(1)

```
<Key android:codes="3333" android:keyLabel="\u0D05"/> 
```

(2)

```
<Key android:codes="0x0D05" android:keyLabel="\u0D05"/> 
```

# silverlight - 是否有任何第三方工具可以将 Silverlight 导出到 powerpoint

> ID：14662938
> 
> 赞同：0
> 
> 时间：2013-02-02T14:34:12.583
> 
> 标签：silverlight, silverlight-4.0

是将silverlight控件导出到PPT幻灯片的任何第三方工具。

# javascript - 如果 div 被隐藏，如何使用 fadeIn()

> ID：14662941
> 
> 赞同：0
> 
> 时间：2013-02-02T14:34:37.643
> 
> 标签：javascript, jquery, html, css, fadein

我需要能够在默认隐藏的 div 中平滑淡入淡出。

我正在使用这段代码：

```
$(".grey_cover").css({
    visibility: "visible"
}).fadeIn(2000, function () {
    $(".popup").css({
        visibility: "visible"
    }).fadeIn(3000);
}); 
```

div`grey_cover`和默认情况下`popup`有`visibility:hidden`。此代码正在运行，但 div 的弹出速度如此之快..这毫秒没有做任何事情..我尝试使用`slow`选项而不是，`milliseconds`但仍然存在相同的行为。

我想慢慢淡化它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:36:16.477

你不应该使用`visibility`这个但是`display: none;`. 然后删除 jQuery CSS 部分。比你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:41:13.807

用这个

CSS：

```
.grey_cover {
   visibility: visible;
   display: none;
}

.pop_up {
   visibility: visible;
   display: none;
} 
```

javascript:

```
 $(".grey_cover").fadeIn(2000, function() { 
     $(".popup").fadeIn(3000);
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T14:49:08.513

如果你不能改变你的 CSS 规则。您可以设置`opacity`为`0`和`visibility`设置为`visible`。然后`.animate()`可以处理动画。

```
$(".grey_cover").css({
    opacity: 0,
    visibility: "visible"
}).animate({
    opacity: 1
}, 2000, function() {
    $(".popup").css({
        opacity: 0,
        visibility: "visible"
    }).animate({
        opacity: 1
    }, 3000);
}); 
```

话虽如此，`display`在大多数情况下使用更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:36:38.700

你在淡入它们之前让它们可见 - 你不需要让它们可见，fadeIn 会处理它。

# c# - 如何模拟返回 void 但修改使用 Moq 传入的引用类型的方法

> ID：14662944
> 
> 赞同：7
> 
> 时间：2013-02-02T14:35:06.677
> 
> 标签：c#, unit-testing, moq

我有一个`Interface`

```
public interface IRequester
{
    void Check(Check check);
} 
```

我想模拟这个`Moq`显然很容易。我遇到的问题是我希望在模拟`Check`调用之后修改传入的参数（因为它是一个参考）。如您所见`Check`，这只是一个简单的 POCO。

```
public class Check
{
    public string Url { get; set; }
    public int Status { get; set; }
} 
```

理想情况下，我想更改传入的`Status`属性值。`Check`

这可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-02T14:56:48.153

使用`Callback`方法。我认为这将是这样的：

```
yourMock.Setup(x => x.Check(It.IsAny<Check>()))
    .Callback((Check c) => { c.Status = 1234567; }); 
```

如果您只需要一个作业，则可以省略大括号`{ }`和第一个分号。`;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:39:38.603

认为您可以使用 ref 关键字来获得您想要的东西：

> 方法参数上的 ref 方法参数关键字导致方法引用传递给该方法的相同变量。当控制权传递回调用方法时，对方法中的参数所做的任何更改都将反映在该变量中。

[http://msdn.microsoft.com/en-us/library/14akc2c7(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/14akc2c7(v=vs.71).aspx)

# objective-c - __NSCFBoolean isEqualToString:]: 无法识别的选择器发送到实例

> ID：14662947
> 
> 赞同：6
> 
> 时间：2013-02-02T14:35:32.317
> 
> 标签：objective-c, json

当我从`JSON`php 获取值时，我遇到了以下问题`__NSCFBoolean isEqualToString`：

我的代码如下：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
        //convert to JSON
        for(id key in res) {
        id value = [res objectForKey:key];

        NSString *keyAsString = (NSString *)key;
        NSString *valueAsString = (NSString *)value;
        //NSCFBoolean
        /*if([value isKindOfClass:[NSNumber class]])
        {
            printf("Number");
        }
        else if([value isKindOfClass:[NSString class]])
        {
            printf("String --- \n");
            if([value isEqualToString:@"0"])
            {
                printf("Wrong \n");
            }
            else
            {
                printf("Right \n");
            }
        }*/
        NSLog(@"%@",[valueAsString class]);
        if([keyAsString isEqualToString:@"success"])
        {
            printf("Working \n");
        }
        else
        {
            printf("Not Working\n");
        }
        //Error is in below line
        if([valueAsString isEqualToString:@"0"])// strcmp([value objCType], @encode(BOOL)) == 1)
        {
            [self loginSuccess];
        }
        else if(strcmp([value objCType], @encode(BOOL)) == 0)
        {
            [self loginFailure];
        }
        NSLog(@"key: %@", keyAsString);
        NSLog(@"value: %@", valueAsString);
    } 
```

} }

获取`[__NSCFBoolean isEqualToString:]:`发送到实例 0x1dc9964 的无法识别选择器的问题

从昨天开始在谷歌搜索这个问题，但还没有解决方案。现在，NSCFBoolean 在 iOS 6.0 中也不可用。那么我该怎么做才能从`JSON`字符串中检查“0”或“1”呢？请帮忙。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-02T14:53:24.043

`value`是一个 NSNumber 对象（__NSCFBoolean，因为 NSNumber 是一个类簇）而不是一个字符串！用于`[value boolValue]`确定是 0 还是 1。

投射对象不会改变它的类型！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:39:47.393

这是可疑的部分：

```
if([keyAsString isEqualToString:@"success"] && [valueAsString isEqualToString:@"0"])
{
} 
```

keyAsString、valueAsString（可能是这个）或两者都不是字符串对象。为什么？我们无法从您的代码中知道这一点，可能您的 JSON 数据有问题。请向我们展示更多代码。

**编辑**

试试这个 ：

```
if([keyAsString isEqualToString:@"success"] && [valueAsString isEqualToNumber:@(NO)])
{
} 
```

# android - 我如何将参数与 registerReceiver 一起传递？

> ID：14662950
> 
> 赞同：2
> 
> 时间：2013-02-02T14:36:05.137
> 
> 标签：android, broadcastreceiver

我创建了一个应用程序，用于将来电号码发送到蓝牙工作正常。现在我想将管理员号码用户从活动传递给接收者。我该怎么做？我尝试了一些东西，但我的 apk 崩溃了......在添加了传递变量方法之后.. .如果管理员呼叫，我想发送 bt 信号...

```
 public void onResume() {
 super.onResume();

 registerReceiver(new IncomingCallReceiver(), new   intentFilter("android.intent.action.PHONE_STATE"));

//Intent intent = new Intent("android.intent.action.PHONE_STATE");
//intent.putExtra("admin_no",strAdmin); // change number here.
//sendBroadcast(intent);

wl.acquire();

}

public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();

           // String admin2 = intent.getStringExtra("admin_no");

            if(null == bundle)
                    return;

            Log.i("IncomingCallReceiver",bundle.toString());

            String state = bundle.getString(TelephonyManager.EXTRA_STATE);

            Log.i("IncomingCallReceiver","State: "+ state);

            if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
            {
                    String phonenumber =  bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.i("IncomingCallReceiver","Incomng Number: " + phonenumber);

                    String info = "Detect call... \nIncoming number: " + phonenumber;

                    Toast.makeText(context, info, Toast.LENGTH_LONG).show();

                   if(info.indexOf(admin)>0){

                     //Toast.makeText(context, "Alarm service!",Toast.LENGTH_LONG).show();

                          //Intent service = new Intent(context, Btservice.class);

                         //context.startService(service);

                         //String msg = intent.getStringExtra("data");

                   try {
                         //DetectCallBt.sendDataBT(bat);
                        Activity2.sendDataBT("1");
                    } catch (IOException e) {
                         //TODO Auto-generated catch block
                        e.printStackTrace();
                    }
   } 
```

# c++ - 升压测试和异步 IO：地址内存访问冲突：故障地址没有映射

> ID：14662956
> 
> 赞同：2
> 
> 时间：2013-02-02T14:36:31.347
> 
> 标签：c++, linux, boost-asio, boost-test

我正在尝试为 tcpip 的异步 I/O 设置升压测试。

我发送 tcp 信息的功能：

```
 int TcpClient::sendMsgToServer(string msg) {
    if (isConnected == true) {
        Logger::debug("Asynch send request for msg: " + msg, __LINE__,
                __FILE__);
        sendSequence++;
        msg.append("\r\n");
        int length = msg.length() + 2; //+2 is for \r\n
        char* buffer = (char*) msg.c_str();
        Logger::debug(buffer, __LINE__, __FILE__);
        m_Socket.async_send(boost::asio::buffer(buffer, length),
                boost::bind(&fingigcc::TcpClient::sendMsgToServerErrorHandler,
                        this, boost::asio::placeholders::error,
                        boost::asio::placeholders::bytes_transferred));
        std::string sentMsg = "Sent Msg: " + msg;
        Logger::debug(sentMsg, __LINE__, __FILE__);

        return 0;
    } else {
        return -1;
    }

}

    void TcpClient::sendMsgToServerErrorHandler(
            const boost::system::error_code& error, std::size_t bytes_transferred) {
        Logger::debug("Sending complete: ", __LINE__, __FILE__);
        sendResponseSequence++;
        int i = error.value();
        std::stringstream ss;
        ss.clear();
        ss << i;
        Logger::debug("RESULTCODE: " + ss.str(), __LINE__, __FILE__);
        if (i == 0) {
            Logger::debug("RESULT: " + error.message(), __LINE__, __FILE__);

        } else {
            Logger::crit(error.message(), __LINE__, __FILE__);
            m_Socket.close();
            isConnected = false;
            connectionStateChanged(isConnected);
        }

    } 
```

现在，如果我只是在主线程中运行它（不运行增强测试），这个函数就可以正常工作

我的升压测试功能如下所示：

```
BOOST_AUTO_TEST_CASE( CommunicationCore_sendTcpIpMsg_test ) {

    CommunicationCoreFixture f;
    int compare = f.c->initializeTcpIpConnection(serverAddress, serverPort); // i initialize the connection here. runs fine with any issue
    sleep(2);
    compare = f.c->sendMsgToServer("IDENTIFY console-2");
    BOOST_MESSAGE("Sending returned value : " << compare);
    BOOST_CHECK(compare == 0);
} 
```

它失败并出现以下错误：

```
 Entering test case "CommunicationCore_sendTcpIpMsg_test"
unknown location(0): fatal error in "CommunicationCore_sendTcpIpMsg_test": memory access violation at address: 0x01003255: no mapping at fault address
*****************Test is aborted 
```

在测试此类异步功能时我应该注意什么？

我的构建信息是：

```
Platform: linux
Compiler: GNU C++ version 4.7.2
STL     : GNU libstdc++ version 20120920
Boost   : 1.49.0 
```

* * *

编辑：

我也试过用以下方式修改它..但仍然得到同样的错误：

```
int TcpClient::sendMsgToServer(string msg) {
    if (isConnected == true) {
        Logger::debug("Asynch send request for msg: " + msg, __LINE__,
                __FILE__);
        sendSequence++;
        msg.append("\r\n");
    char *buffer = new char[msg.size() + 1];
    buffer[msg.size()] = 0;
    memcpy(buffer, msg.c_str(), msg.size());
    Logger::debug(buffer, __LINE__, __FILE__);

    m_Socket.async_send(boost::asio::buffer(buffer, (msg.size() + 1)),
            boost::bind(&fingigcc::TcpClient::sendMsgToServerErrorHandler,
                    this, boost::asio::placeholders::error,
                    boost::asio::placeholders::bytes_transferred));
        std::string sentMsg = "Sent Msg: " + msg;
        Logger::debug(sentMsg, __LINE__, __FILE__);

        return 0;
    } else {
        return -1;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:00:34.800

`m_Socket.async_send(boost::asio::buffer(buffer, length)`-- 但是对象是本地的，超出范围后`msg`其`c_str()`结果无效！`msg`因此，您实际上将*临时缓冲区*传递给异步操作。缓冲区不会超过此操作，因此段错误是不可避免的。

# mysql - 每行单独发生的事件

> ID：14662963
> 
> 赞同：2
> 
> 时间：2013-02-02T14:36:58.657
> 
> 标签：mysql

我想为表创建一个事件：-

```
ACCOUNTS(id char(5),balance decimal(10,2), date_created date) 
```

该`DATE_CREATED`列的值将始终为 = `NOW()`，即该行插入表中的日期

我希望每行的余额在**每 31 天后**增加 2% ，根据其 `DATE_CREATED`列，即`DATE_CREATED+31 Days`每行的 () 之后。

我想知道这是否可能，如果可能，那么它的代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T14:58:49.693

您需要编写一个`UPDATE`使用`DATEDIFF`和`MOD`

尝试类似：

```
UPDATE Accounts 
SET Balance = Balance * 1.02 
WHERE DATEDIFF(now(),date_created) MOD 31 = 0; 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/25182/1)。

您可以安排它每天运行。这可能是你最好的方法。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:02:56.347

这将每天运行，但基于`where clause`它将更新表。

```
CREATE EVENT `myEvent`
ON SCHEDULE AT CURRENT_TIMESTAMP
DO BEGIN
    -- update balance by 2%
    UPDATE yourtable
    SET balance = balance * 1.02
    WHERE DateDiff(CurDate(), created_date) MOD 31 = 0
END; 
```

如果您正在寻找`Created_Date`从今天起有 31 天间隔的更新，那么`Where clause`：

```
WHERE Date_Format(Date_Add(CurDate(), interval 31 day),'%Y-%m-%d') = Date_Format(CurDate(),'%Y-%m-%d') 
```

或者

`WHERE DateDiff(CurDate(), created_date) = 31`

# c# - c#点课作业、作业（不作弊）

> ID：14662965
> 
> 赞同：-1
> 
> 时间：2013-02-02T14:37:07.863
> 
> 标签：c#, class, point

我有一个小问题。在我的家庭作业中，我必须创建并实现在屏幕上`Point` `class`代表 a的 a。它应该在窗口的特定位置标出字符“*” 。例如，页面的宽度应为 80 像素，最大高度应为 49 像素。在assignent上也有提示，说我应该在.`point``console``console``console``Console.SetCursorPosition()``MSDN`

那么，我走了多远？好吧，我创建了一个`class`名为“点”，`int`为协调器声明了 2 个变量 x 和 y 并创建了一个构造函数。但我不确定构造函数是否应该将这两个变量作为参数，以及它应该如何处理它们。

注意：我不希望人们为此编写整个代码；这不是我学习的方式。我写在这里是为了让`C#`比我有更多经验的人可以帮助我引导我走向正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:03:48.073

IMO 表示位置的类应该是不可变的值对象，因此它应该获得值语义。

我会做什么：

*   创建一个类`ConsolePoint`
*   必须`private readonly int`字段来存储坐标的值
*   有两个公共属性，其 getter 返回字段的值，没有 setter
*   有一个构造函数，它接受两个坐标，`ArgumentOutOfRangeException`如果它们无效则抛出，然后分配给字段。

然后实现价值平等：

*   覆盖`Equals`和`GetHashCode`
*   重载`==`和`!=`。

所有这四个应该是一致的。

* * *

但是，如果您更喜欢可变类，我会创建两个可变字段和两个属性，它们的设置器验证坐标。这很有效，因为两个坐标的验证是独立的。在这种情况下，我只使用默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:10:32.680

有很多可能性。一种方法是编写一个构造函数，该构造函数接受两个参数，这些参数对应于您的类中`x`的两个字段。`y`然后构造函数“body”应该将第一个参数分配给`x`，第二个参数分配给`y`。

请注意，如果您选择将构造函数参数命名为与字段完全相同，则标识符`x`指的是参数，而不是字段。在这种情况下，您将需要写入`this.x`以引用该字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:50:58.333

您说您被引导到该[`Console.SetCursorPosition`](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx)方法 - 该页面，特别是示例部分，应该对您非常有用。

就您的班级而言，如果您发布了一些代码，则提供建议会更容易。在 C# 中，有几种常见的方法可以在类的实例上设置变量：如果它们是[fields ，则可以在](http://msdn.microsoft.com/en-us/library/ms173118.aspx)[构造函数](http://msdn.microsoft.com/en-us/library/ms173115.aspx)中传递值并让构造函数进行赋值，或者如果它们是[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)，则可以直接设置它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:56:53.853

一般来说，你会跌跌撞撞地进入有时会以宗教热情讨论的领域。有些人提倡单阶段初始化过程，构造函数总是产生一个有效且可用的对象或抛出异常。第二个想法是构造函数给你一个'空白'对象，你`init()`稍后调用例如一个方法。构造函数给出的对象将不可用。这将被称为两阶段初始化。

我碰巧在中间地带的某个地方，但倾向于单相初始化。有时两阶段初始化有其应用，IMO 在大多数情况下没有。其他答案建议制作`Point`一个不可变对象，在这种情况下，您必须使用构造函数对其进行初始化。

除了使您的对象不可变之外：如果没有充分的理由*不在*您的构造函数中初始化它，请不要这样做。如果您不初始化构造值，则必须在初始化之前检测类的使用情况（至少我会，以防止出现错误），而不会从中受益。

对于构造函数应该做什么：检查最大值/最小值并初始化字段。如果超出范围，则抛出异常。如果你的对象是可变的，不要忘记在你的 set 方法中做同样的事情。

在这种情况下，您可能会考虑使用属性并使类像 CodesInChaos 在他的回答中描述的那样不可变。

# java - 像数组列表中的计数器一样不断返回 0

> ID：14662967
> 
> 赞同：0
> 
> 时间：2013-02-02T14:37:20.173
> 
> 标签：java, sql, arraylist

我尝试为论坛线程做类似的计数器。这是我的代码：

点击喜欢按钮时，它会将值插入数据库。

```
public void submitLike(ActionEvent e) {
    int count = 0;
    int newCount = count + 1;
    eForumLikeDislike amount = new eForumLikeDislike(userName,topicId,newCount);
    amount.likeCounter();
} 
```

`SQL statement`我在点击时插入的那个。

```
 public void SetUpLikeAmount() {
    int likes = 0;
    ArrayList <Integer> likeArray = new ArrayList <Integer>();
    for (int count = 0; count < likeArray.size();count++){
    // Set Up Database Source
    db.setUp("IT Innovation Project");
    String sql = "Select likeDislike_likes from forumLikeDislike WHERE topic_id = "
            + topicId + "";
    ResultSet resultSet = null;
    // Call readRequest to get the result
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            likeArray.add(Integer.parseInt(resultSet.getString("likeDislike_likes")));
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
    likes += likeArray.get(count);
    }
    jLabel_like.setText(Integer.toString(likes));
} 
```

我尝试显示某个线程的总喜欢的方法。

```
public void SetUpLikeAmount() {
    int likes = 0;
    ArrayList <Integer> likeArray = new ArrayList <Integer>();
    for (int count = 0; count < likeArray.size();count++) {
        // Set Up Database Source
        db.setUp("IT Innovation Project");
        String sql = "Select likeDislike_likes from forumLikeDislike WHERE topic_id = "
                     + topicId + "";
        ResultSet resultSet = null;
        // Call readRequest to get the result
        resultSet = db.readRequest(sql);
        try {
            while (resultSet.next()) {
                likes = Integer.parseInt(resultSet.getString("likeDislike_likes"));
                likes += likeArray.get(count);
            }
            resultSet.close();
        } catch (Exception e) {
            System.out.println(e);
        }

    }
    jLabel_like.setText(Integer.toString(likes));
} 
```

但是，金额一直退回给我0。有什么问题吗？我该如何解决？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:49:21.303

如果您能够更改数据库设计，请这样做。具体来说，从表 forumLikeDislike 中删除字段 likeDislike_likes。

一旦你完成了（或者即使你没有），你可以替换这个查询，

```
Select likeDislike_likes 
from forumLikeDislike 
WHERE topic_id = the topicId variable you submit 
```

使用此查询：

```
select count(*) likes
from forumLikeDislike 
WHERE topic_id = the topicId variable you submit 
```

它将返回一行您想要的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:55:51.077

我不是 100% 确定这些点，因为我还没有尝试过代码，但我的想法是让您检查其中的一些代码：

1.  获取数据

    `ArrayList <Integer> likeArray = new ArrayList <Integer>();` `for (int count = 0; count < likeArray.size();count++)`

您的 likeArray 大小始终从零开始。所以，这意味着计数已经小于 0，因此我认为它甚至没有进入循环......你检查过吗？

1.  你为什么这么做：

    ```
    int count = 0;
    int newCount = count + 1;
    eForumLikeDislike amount = new eForumLikeDislike(userName,topicId,newCount);
    amount.likeCounter(); 
    ```

您的 newCount 将始终为 1。您可以避免 count = 0; newCount = count + 1 并且直接有一行说

```
 eForumLikeDislike amount = new eForumLikeDislike(userName,topicId, 1); 
```

或者，也许您应该获得 eForumLikeDislike，然后使用 addLike() 方法使用用户名和 topicId 将其递增 1。

希望有帮助。干杯

# string - BATCH：字符串替换子

> ID：14662971
> 
> 赞同：2
> 
> 时间：2013-02-02T14:37:28.410
> 
> 标签：string, batch-file, substitution

我正在尝试批量制作一个 sub 在字符串中找到一个字符串并将其替换为第三个。环顾四周，我发现[在这里](http://www.dostips.com/DtTipsStringManipulation.php#Snippets.Remove)`SET`我可以用命令擦除一个字符串。

所以，这就是我尝试过的：

```
:modifyString what with [in]
SET _what=%~1
ECHO "%_what%"
SET "_with=%~2
ECHO "%toWith%"
SET _In=%~3
ECHO "%_In%"
SET _In=%_In:%toWhat%=%toWith%%
ECHO %_In%
SET "%~3=%_In%"
EXIT /B 
```

`ECHO`s 仅用于“调试”目的。

我所知道的是错误在...

```
SET _In=%_In:%toWhat%=%toWith%% 
```

...因为关闭`%_in%`变量的 % 字符。

我也尝试过诸如...

```
SET _In=%_In:!toWhat!=!toWith!%
SET _In=!_In:%toWhat%=%toWith%! 
```

...以及其他毫无意义的人。

这是主要问题，另一个是返回`%_In%`。`[in]`

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T14:54:36.943

这是一个使用`!`DelayedExpansion 方法的示例。

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
set "xxString=All your base are belong to us"
set "xxSubString=your base are belong"
set "xxNewSubString=of your bases belong"
echo Before
set xx
echo.
set "xxString=!xxString:%xxSubString%=%xxNewSubString%!"
echo After
set xx
endlocal
pause >nul 
```

输出

```
Before
xxNewSubString=of your bases belong
xxString=All your base are belong to us
xxSubString=your base are belong

After
xxNewSubString=of your bases belong
xxString=All of your bases belong to us
xxSubString=your base are belong 
```

固定你的

```
@echo off
:: Make sure that you have delayed expansion enabled.
setlocal EnableDelayedExpansion

:modifyString what with [in]
SET "_what=%~1"
SET "_with=%~2"
SET "_In=%~3"
ECHO "%_what%"
ECHO "%_with%"
ECHO "%_In%"
:: The variable names were not the same as the ones
:: defined above.
SET _In=!_In:%_what%=%_with%!
ECHO %_In%

:: This will not change the value of the 3rd parameter
:: but instead will create a new parameter with the
:: value of %3 as the variable name.
SET "%~3=%_In%"
endlocal
EXIT /B 
```

如何在不延迟扩展的情况下进行子字符串替换。使用该`call`命令创建两个级别的变量扩展。使用单`%`环绕变量首先展开，然后使用双`%%`环绕变量展开第二次。

```
@echo off
setlocal EnableExtensions
set "xxString=All your base are belong to us"
set "xxSubString=your base are belong"
set "xxNewSubString=of your bases belong"
echo Before
set xx
echo.
call set "xxString=%%xxString:%xxSubString%=%xxNewSubString%%%"
echo After
set xx
endlocal
pause >nul 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T23:17:34.287

谢谢大家！

我把我最后做的东西贴给你：

```
:modifyString what with in tRtn
set "_in=%~3"
set "_in=!_in:%~1=%~2!"
IF NOT "%~4" == "" SET %~4=%_in%
EXIT /B 
```

EG 如果我以这种方式调用这个子：

```
SET "str=All your base are belong to us"
SET "toFind=your base are belong"
SET "space=of your bases belong"
ECHO %str%
CALL :modifyString "%toFind%" "%space%" "%str%" string 
```

%string% 将成为新的更正字符串，所以如果你这样做......

```
ECHO "%string%" 
```

它会打印：

```
"All of your bases belong to us" 
```

PS如果我迟到了，我很抱歉，但由于我的声誉很低，我不得不等待！

# javascript - IP 地址验证不起作用

> ID：14662975
> 
> 赞同：0
> 
> 时间：2013-02-02T14:37:46.367
> 
> 标签：javascript, validation, ip

我正在尝试使用核心 javascript 验证 IP 地址。我想确保每个 IP 地址部分的值必须大于 > 100。但它不能正常工作。请查找以下代码以获取更多详细信息。

```
function testIP(){
            var ip=document.getElementById("ipaddress").value;
            var first= ip.substring(0,3);
            var second= ip.substring(4,7);
            var third= ip.substring(8,11);
            var fourth= ip.substring(12,15);
            var error=false;
            if(first){

                var ippart1 = 0+first;

                if(first<100){

                }
                else{
                    alert("Please enter a valid ip address.First part of ip address is incorrect"); 
                    error=true;
                }
            }
            else    
                error=true;
            if(second){

                var ippart2 = 0+second;

                if(ippart2<100){

                }
                else{
                    alert("Please enter a valid ip address.Second part of ip address is incorrect");
                    error=true;
                }
            }
            else    
                error=true;
            if(third){

                var ippart3 = 0+third;

                if(ippart3<100){

                }
                else{
                    alert("Please enter a valid ip address.Third part of ip address is incorrect"); 
                    error=true;
                }
            }
            else    
                error=true;
            if(fourth){

                var ippart4 = 0+fourth;
                if(ippart4<100){

                }
                else{
                    alert("Please enter a valid ip address.Forth part of ip address is incorrect");
                    error=true;
                }
            }
            else    
                error=true;
            if(error==true){

                return false;
            }
            else
                return true;

        } 
```

我认为问题在于字符串到整数的转换。我也尝试过`parseInt`功能。它也不起作用。请看一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T14:46:41.273

您应该`split()`（[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)）使用点的值。然后您可以检查这些值。

为什么你的方法不对；

考虑我输入 85.15.13.25

变量值：

```
first: 85.
second: 15.
third: 13.
fourth: 25 
```

所以第一，第二和第三个变量是错误的，它们包含一个点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:03:07.637

首先，我建议使用此函数检查地址是否有效：

> ```
>  function validate( value ) {
>          RegE = /^\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}$/  
>          if(value.match(RegE))  
>             alert('Valid IP');  
>          else  
>             alert('Invalid IP'); 
>       } 
> ```

然后使用 parse int 但条件良好（> 而不是 <）：

```
if(parseInt(first)>100){

                } 
```

还可以考虑重构您的代码:)

# java - Spring MVC 3\. 表单选择选项

> ID：14662979
> 
> 赞同：0
> 
> 时间：2013-02-02T14:37:56.023
> 
> 标签：java, forms, spring-mvc

我是 Spring MVC 的新手，我正在尝试从控制器获取 jsp 表单选择列表的值。选择列表显示，但它是空的。我尝试了不同的示例等，但仍然找不到，问题出在哪里。

控制器：

```
@Controller
public class MainController {
       @RequestMapping(value = "/", method = RequestMethod.GET)
       public ModelAndView login() {
          return new ModelAndView("login", "command", new Person());
       }

       @RequestMapping(value = "/", method = RequestMethod.POST)
       public String login(@ModelAttribute("xxx")Person person, ModelMap model) {
           Map<String,String> list = new LinkedHashMap<String,String>();
           list.put("opt1", "value1");
           list.put("opt2", "value2");
           model.put("list", list);

          return "newView";
       }
} 
```

新视图.jsp：

```
<form:form method="POST" action="/xxx/saveUser" command="">
   <table>
    <tr>
      <form:select path="name">
        <form:options items="${list}" />
      </form:select>
    </tr>
</table>  
</form:form> 
```

Person.java 模型：

```
public class Person {
       private String name;
//Getters and setters and more values etc...
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:07:02.063

看看这个问题。

[如何在 Spring MVC 中填充下拉框](https://stackoverflow.com/questions/10499641/how-to-populate-dropdown-box-in-spring-mvc)

这有你的答案。

# java - Android 启动接收器崩溃

> ID：14662980
> 
> 赞同：1
> 
> 时间：2013-02-02T14:37:56.653
> 
> 标签：java, android, android-intent, broadcastreceiver, boot

我的手机已连接到 Eclipse，但在手机“完全”启动之前我看不到 logcat，并且我的接收器（应用程序）在此之前崩溃，所以我无法调试它。我确信它必须与上下文和意图有关：

由于上下文问题，我的接收器在启动时崩溃了，我敢肯定：

```
 public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Calendar c2 = Calendar.getInstance();               
    int hour = c2.get(Calendar.HOUR_OF_DAY);
    int minute = c2.get(Calendar.MINUTE);
    int sek = c2.get(Calendar.SECOND);

    int dan;
    int dodaj;

    milivreme = ((hour * 60 * 60 * 1000)+ (minute * 60 * 1000) + (sek * 1000));

    Cursor cursor = DatabaseManager.getAllData();

    cursor.moveToFirst();
    if (!cursor.isAfterLast())
    {
        do
        {               
    milibaza = cursor.getInt(3);
    razlika = milibaza - milivreme;

    Intent intent1 = new Intent(context, AlarmReceiver.class);
    PendingIntent pendingintent = PendingIntent.getService(context, 2, intent1, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager am = (AlarmManager) context.getSystemService(context.ALARM_SERVICE);

    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + razlika, pendingintent);
        }
        while (cursor.moveToNext());
    }
} 
```

更新，终于设法捕捉到异常：

```
01-06 02:21:19.920: E/AndroidRuntime(7360): java.lang.RuntimeException: Unable to start receiver com.example.prva.OnBootReceiver: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:53:34.417

由于您的代码尚不清楚问题，但有一些建议给您。

1）您的变量`milivreme`等 `milibaza`必须是长类型而不是int。

2）而不是下面的代码，只使用`milivreme = System.currentTimeMillis();`它以毫秒为单位给出当前时间。

```
 Calendar c = Calendar.getInstance();                
    int hour = c.get(Calendar.HOUR_OF_DAY);
    int minute = c.get(Calendar.MINUTE);
    int sek = c.get(Calendar.SECOND);
    int dan;
    int dodaj;

    milivreme = ((hour * 60 * 60 * 1000)+ (minute * 60 * 1000) + (sek * 1000)); 
```

3）检查游标是否不为空。前`cursor.moveToFirst();`

4）看到这一行>>

```
PendingIntent pendingintent = PendingIntent.getService(context, 2, intent1, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:45:49.503

你应该只使用上下文，用上下文替换上下文，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:54:10.733

你应该使用`Context context`，不要`Context contextic`。

```
private Context contextic;    //    NEEDLEES !
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Calendar c = Calendar.getInstance();                
    int hour = c.get(Calendar.HOUR_OF_DAY);
    int minute = c.get(Calendar.MINUTE);
    int sek = c.get(Calendar.SECOND);
    int dan;
    int dodaj;

    milivreme = ((hour * 60 * 60 * 1000)+ (minute * 60 * 1000) + (sek * 1000));

    Cursor cursor = DatabaseManager.getAllData();

    cursor.moveToFirst();
    if (!cursor.isAfterLast())
    {
        do
        {               
    milibaza = cursor.getInt(3);
    razlika = milibaza - milivreme;

    Intent intent1 = new Intent(context, AlarmReceiver.class);
    PendingIntent pendingintent = PendingIntent.getService(context, 2, intent1, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager am = (AlarmManager) context.getSystemService(context.ALARM_SERVICE); //CONTEXT ! 

    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + razlika, pendingintent);
        }
        while (cursor.moveToNext());
    }} 
```

我问你的问题：你为什么写`while (cursor.moveToNext());`（问题是你在循环后使用分号）？

如果我的回答没有帮助，请提供堆栈跟踪。

# arrays - TypeScript 函数数组

> ID：14662995
> 
> 赞同：9
> 
> 时间：2013-02-02T14:39:46.347
> 
> 标签：arrays, function, types, typescript, type-alias

我想知道如何在 TypeScript 中声明类型函数数组。

例如，假设我有一个字段可以保存一个没有参数并返回 void 的函数：

```
private func: () => void; 
```

现在，假设我想要一个可以容纳此类函数数组的字段：

```
private funcs: () => void  []; 
```

这显然是错误的方法，因为编译器认为这是一个返回空数组的函数。

尝试用括号隔离内联原型声明，如下所示：

```
private funcs2: (  () => void  ) []; 
```

导致编译器错误。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T16:14:21.150

您需要使用完整的类型文字语法而不是`=>`速记：

```
private funcs: { (): void; }[]; 
```

如果看起来太奇怪，您也可以制作一个界面：

```
// (elsewhere at top-level)
interface foo {
    (): void;
}

class etc {
    private funcs: foo[];
} 
```

# java - setContentView R.layout

> ID：14662999
> 
> 赞同：0
> 
> 时间：2013-02-02T14:40:12.617
> 
> 标签：java, android, eclipse

我遇到了 R.layout 未定义的问题，有人可以帮忙吗？如您所见，我没有像其他答案中建议的那样导入 r.layout 这个明显常见的问题。我检查了所有现有的评论，但没有任何建议可以解决我的错误。

```
package com.tom;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    Button new_proj, open_proj;
    TextView display;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        new_proj = (Button) findViewById(R.id.bNew);
        open_proj = (Button) findViewById(R.id.bOpen);
        display = (TextView)findViewById(R.id.tvDisplay);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:20:44.013

如果您认为您拥有当前代码但也有 R 错误，那么首先通过 project-> clean the build 清理项目。在它之后，如果你有正确的代码，它必须保留 R。即使这样做也不能解决，那么可以确定你已经完成了这里不支持的代码。所以最好将之前的事情撤消到你之前正确的地方。

例如，有一次在我的项目中，我在尝试放置 flv 文件时丢失了 R。后来我知道它只支持mp3。此类错误可能导致此类问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:46:28.140

在您的源文件中，`Shift-Ctrl-O`(Mac: `Shift-Command-O`) 将添加所需的导入并删除不必要的导入。如果这不能解决问题，请查看“问题”选项卡以查看其中一个`XML`文件是否损坏。