# StackOverflow 问答 13597000-13597999

# javascript - 如何“撤消”以编程方式将文本插入文本区域？

> ID：13597007
> 
> 赞同：25
> 
> 时间：2012-11-28T02:54:14.643
> 
> 标签：javascript, jquery, textarea, undo

我有一个文本区域和一个按钮。单击该按钮会导致将文本插入到文本区域中。

有没有办法让用户按 Ctrl/Cmd+z 撤消文本的插入并将文本区域恢复到以前的状态？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-01-19T02:33:47.743

我认为利用浏览器的撤消堆栈而不是捕获事件的最简单方法。

为此，您需要为不同的浏览器使用不同的代码。幸运的是，在所有主流浏览器中，只有 Firefox 有不同的方法。

```
// http://stackoverflow.com/a/9851769/529024
// Opera 8.0+
var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;

// Firefox 1.0+
var isFirefox = typeof InstallTrigger !== 'undefined';

// Safari 3.0+ "[object HTMLElementConstructor]" 
var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0 || (function(p) {
  return p.toString() === "[object SafariRemoteNotification]";
})(!window['safari'] || safari.pushNotification);

// Internet Explorer 6-11
var isIE = /*@cc_on!@*/ false || !!document.documentMode;

// Edge 20+
var isEdge = !isIE && !!window.StyleMedia;

// Chrome 1+
var isChrome = !!window.chrome && !!window.chrome.webstore;

var position = 0;

// text to anser
var text = 'Inserted Text';

// Just for fun :)
if (isFirefox)
  text = "  __ Firefox __ ";
else if (isIE)
  text = "  __ IE __ ";
else if (isEdge)
  text = "  __ Edge __ ";
else if (isSafari)
  text = "  __ Safari __ ";
else if (isOpera)
  text = "  __ Opera __ ";
else if (isChrome)
  text = "  __ Chrome __ ";

/* Adding text on click based on browser */
jQuery(".addText").on("click", function() {
  if (isFirefox) {
    // Firefox
    var val = jQuery(".textArea").val();

    var firstText = val.substring(0, position);
    var secondText = val.substring(position);

    jQuery(".textArea").val(firstText + text + secondText);
  } else {

    jQuery(".textArea").focus();
    var val = jQuery(".textArea").val();

    jQuery(".textArea")[0].selectionStart = position;
    jQuery(".textArea")[0].selectionEnd = position;

    document.execCommand('insertText', false, text);
  }
});

jQuery(".textArea").on("focusout", function(e) {
  position = jQuery(this)[0].selectionStart;
});
```

```
textarea {
  padding: 10px;
  font-family: Calibri;
  font-size: 18px;
  line-height: 1.1;
  resize: none;
}
.addText {
  padding: 5px 15px;
  transition: all 0.5s;
  border: 1px solid black;
  border-radius: 2px;
  background-color: #169c16;
  width: 70px;
  margin: 10px 0;
  color: white;
  cursor: pointer;
}
.addText:hover {
  background-color: #2776b9;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<textarea name='textArea' class='textArea' rows="7" cols="50">Suspendisse convallis, metus at laoreet congue, sapien dui ornare magna, a porttitor felis purus a ipsum. Morbi vulputate erat rhoncus, luctus neque ut, lacinia orci. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis
  egestas. Fusce aliquam, nulla nec fringilla ultrices, ipsum lectus maximus nisl, ut laoreet purus lectus eget nisl. Duis blandit cursus nulla. Vestibulum consectetur, nunc non viverra condimentum, neque neque tincidunt diam, nec vestibulum neque nisi
  ac sem. Integer aliquam a leo id laoreet. Mauris ultrices mauris lorem, eu hendrerit odio volutpat ut. Nam eget hendrerit metus.</textarea>
<div class='addText'>
  Add Text
</div>
```

**测试：**

*   法郎：50
*   铬：55
*   边缘 38
*   野生动物园：5.1
*   歌剧：42

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T02:58:35.867

您需要以特殊方式插入文本，以便用户可以使用正常的撤消/重做行为。

```
var textEvent = document.createEvent('TextEvent');

textEvent.initTextEvent('textInput', true, true, null, "new text");

document.getElementById("your-textarea").dispatchEvent(textEvent); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T02:55:34.317

将原始值保存`textarea`在其中`data`：

```
var $textarea = $('textarea');

$('button').on('click', function () {
    var val = $textarea.val();

    $textarea.data('old-val', val).val(val + ' some text');
}); 
```

如果您想要一个数据数组（如@ahren 建议的那样），请使用：

```
var $textarea = $('textarea');

$('button').on('click', function () {
    var val = $textarea.val();

    if ( ! $textarea.data('old-val')) {
        $textarea.data('old-val', []);
    }

    $textarea.data('old-val').push(val);

    $textarea.val(val + ' some text');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T03:01:28.190

```
$("#target").keypress(function(event) {
  if ( event.which == 'Z' && first press == 'Cmd' && second press == 'Ctrl') {//check for key press
     event.preventDefault();
    text.value = defaultValueForTextField
   }
}); 
```

这应该是你正在寻找的。第一次和第二次按需要保存，因为您需要组合印刷机。不过，您确实需要保存默认文本值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-04T12:06:58.860

即使这个问题是一年前的问题，我也想分享我的方式。

你可以这样做：

```
 $(function () {

  // Check to see if an array is not already defined.
  if (!$('#t').data('old-val')) {

    // If the check returns True we proceed to create an array in old-val.
    $('#t').data('old-val', []);

  }

  // Get the current content value.
  inputValue = $('#t').val();

  // Push it to the old-val array.
  $('#t').data('old-val').push(inputValue);

  // We start with a current array position of 0.
  curArrPos = 0;

  $('#c').click(function () {
    // Append a string to the #t.
    $('#t').val(' ==this is the 2nd appended text==');

    // Save the current content value.
    inputValue = $('#t').val();
    // Push it to the array.
    $('#t').data('old-val').push(inputValue);
    // Increment current array position.
    ++curArrPos;

  });

  $('#b').click(function () {
    // Append a string to the #t.
    $('#t').val(' ==this is the 1st appended text==');

    // Save the current content value.
    inputValue = $('#t').val();
    // Push it to the array.
    $('#t').data('old-val').push(inputValue);
    // Increment current array position.
    ++curArrPos;

  });

  $('#undo').click(function () {
    // First check that the old-val array length is greater than 1 (It's the initial position. No need undoing to a blank state) and current array position greater than 0 (for the same reason).
    if ($('#t').data('old-val').length > 1 && curArrPos > 0) {

      // Set current #t value to the one in the current array position, minus one.
      // Minus one gets you to the previous array position (ex. current=5; previous= current - 1 = 4).
      $('#t').val($('#t').data('old-val')[curArrPos - 1]);

      // Decrease current array position, because we effectively shifted back by 1 position.
      --curArrPos;
    }
  });

  $('#redo').click(function () {
    if (currentArrayPos < $('#c').data('old-val').length - 1) {

      $('#t').val($('#t').data('old-val')[curArrPos + 1]);

      // Increase current array position, because we effectively shifted forward by 1 position.
      ++curArrPos;

    }
  });

}); 
```

如果您想尝试一下，这里有一个小提琴[http://jsfiddle.net/45Jwz/1/](http://jsfiddle.net/45Jwz/1/)

*我写这样的代码是为了更好地理解，但你当然应该比这更好地写出实际的代码，而且不那么冗长。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-18T14:16:44.277

你可以这样做，

**HTML**

```
<div id="text-content">
 <textarea rows="10" cols="50"></textarea>
   <input type="button" name="Insert" value="Insert" />
</div> 
```

**jQuery**

```
var oldText = [],ctrl=false;
   $(function(){
      $("input[name=Insert]").click(function(){
          var text = oldText.length+1;
          oldText.push(text);
          var textAreaText = $('textarea').val();
          textAreaText +=text;
          $('textarea').val(textAreaText);
          $("input[name=insertText]").val('');
     });
     $('textarea').keydown(function(e){
            if(e.which == 17){ ctrl = true;}
     });
     $('textarea').keyup(function(e){
         var c = e.which;
         if(c == 17){ ctrl = false;}
         if(ctrl==true && c==90 ){
            oldText.pop(); 
            var text = '';
            $.each(oldText,function(i,ele){
               text += ele;
            });
            $('textarea').val(text);
        }
     })
  }) 
```

您还可以检查和试验[fiddle](https://jsfiddle.net/tonmoydeveloper/19Lqmtmv/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-18T16:47:41.243

**先添加html，然后可以使用keypress事件撤消**

你也可以在这里试试[http://jsfiddle.net/surendra786/1v5jxaa0/](http://jsfiddle.net/surendra786/1v5jxaa0/)

```
 <input type="text" class="reset actor_input" name="actor" value="add actors"></input>

            <input type="text" name="actors"></input>

            <div class="found_actors"></div>

            <div id="add" class="button_content">ADD</div>

            <div id="undo" class="button_content">UNDO</div>

            <div class="actors_list"><textarea readonly style="resize: none;" rows="20" cols="20" name="actors-list"></textarea></div>

        </div> 
```

**然后添加jquery **

```
 var items = [];

$("#add").click(function() {
    // Push the new actor in the array
    items.push($("[name='actor']").val());
    populate();
});

$(document).keydown(function(e){
       if( e.which === 90 && e.ctrlKey ){
         console.log('control + z'); 
         if (items.length > 0) {
        // remove last element of the array
        items.splice(-1,1);
        populate();
    }
      }          
}); 

populate = function() {
    $("[name='actors-list']").text('');
    $("[name='actors-list']").append(items.join('&#13;&#10;'));
    $("[name='actors']").val(items.join(','));   
} 
```

你可以在这里试试[http://jsfiddle.net/surendra786/1v5jxaa0/](http://jsfiddle.net/surendra786/1v5jxaa0/)

这对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-16T12:52:42.253

具体的库和技术很大程度上取决于您的堆栈。

我可以立即想到两种通用方法。

首先：将之前的状态保存在控制器中。挂钩到快捷方式并将内容替换为以前的状态。如果进行了其他修改，请删除该挂钩。或多或少是你 2013 年的做法

这是一种快速的方法，如果您想要一个具有多次编辑历史的堆栈，则效果不佳。

第二：观察文本输入并定期将状态保存在堆栈中。挂钩到快捷方式。（接管整个过程）。这是一种更简洁的方式，因为您的修改在概念上与用户修改相同。

使用 redux/flux 架构，这可能非常简单 [http://redux.js.org/docs/recipes/ImplementingUndoHistory.html](http://redux.js.org/docs/recipes/ImplementingUndoHistory.html)

要捕获 cmd/ctrl+z 您可以查看[https://github.com/madrobby/keymaster](https://github.com/madrobby/keymaster)

如果您详细说明您的堆栈/要求，我将很乐意扩展此答案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-19T00:05:03.903

这里有很多适用的答案可以满足您的需求。这是我在你的情况下会做的事情。这允许更改您最有可能使用的文本变量，您可以设置它，或者用户可以使用另一个字段设置它，等等。

[在这里写代码](http://codepen.io/calebswank11/pen/EZZwMY?editors=1010)

它的要点是这样的。

```
$(document).ready(function(){
  function deployText(){
    var textArray = [];
    var textToAdd = 'let\'s go ahead and add some more text';
    var textarea = $('textarea');
    var origValue = textarea.text();
    textArray.push(origValue);

    $('button').on('click', function(e){
      textArray.push(textToAdd);
      textarea.text(textArray);
      console.log(textArray.length);
      console.log(textArray);
    });

    $(document).on('keypress', function(e){
      var zKey = 26;
      if(e.ctrlKey && e.which === zKey){
        removePreviousText();
      }
    })

    function removePreviousText(){
      console.log(textArray);
      if(textArray.length > 1){
        textArray.pop();
        $('textarea').text(textArray);
      }
    }
  }
  deployText()
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-18T03:55:56.577

这是一个想法：

如果我们可以像用户在文本区域中输入一样生成键盘事件，那么浏览器将自动能够处理 Undo 事件。因此，我们应该尝试为要插入的文本模拟键盘事件，而不是仅仅附加/更改 textarea 的值。

根据 MDN 的文档（下面给出的链接），我们可以使用`KeyboardEvent`object 来生成事件，例如：

```
 var e1 = new KeyboardEvent(<type>, <details>);
  var b1 = <textbox>.dispatchEvent(e1); 
```

在哪里：

*   `<type>`表示事件类型，例如`keydown`,`keypress`或`keyup`
*   `<details>`表示具有事件详细信息的对象，`key`例如`code`
*   `<textbox>`表示我们要在其上触发事件的目标文本框

这是一个[JSFiddle](https://jsfiddle.net/vnathalye/8ow267bf/8/)，我尝试在其中模拟给定字符串中每个字符的`keydown`,`keypress`和`keyup`事件。尽管它触发了适当的事件处理程序，但字符并没有显示/添加到文本框中。

我注意到的是，当我`a`在文本框中键入时生成的事件对象与在模拟 3 个事件以`a`使用我的代码时生成的事件对象存在一些差异。区别是（在 Firefox 50.1.0 中测试时）：

1.  `explicitOriginalTarget``originalTarget`与我模拟事件时不同；当我在文本框中输入时两者都具有相同的值
2.  `rangeParent`当我在文本框中输入时，`rangeOffset`值是`null`/ ；`0`当我模拟事件时，它们有一些值
3.  `isTrusted`属性是`true`我在文本框中输入时；当我模拟它的事件时`false`（对于使用脚本生成的任何事件，它都会有`false`）

MDN 链接：

*   [创建和触发内置事件](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#Triggering_built-in_events)
*   [键盘事件](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent)
*   [键盘事件构造函数](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-18T12:43:20.853

最简单的方法似乎是这样的：

*   在 DOM textarea 本身的属性中保存按钮单击时以前的 textarea 内容。
*   在 BODY 级别拦截键盘（您不知道何时以及是否按下 Ctrl-Z 时焦点在哪里）
*   （可选）**还可以根据需要拦截来自不同对象的尽可能多的事件**：输入、keyPress 等，也在 BODY 级别。

现在：

*   当用户单击按钮时，旧内容被保存，并且 textarea 的自定义“脏”属性设置为 true
*   如果用户按下 Ctrl-Z 或 Cmd-Z，撤消例程很简单（在 jQuery 中应该是`$('#idOfTextarea').val($('#idOfTextarea').attr('prevContents'));`. 撤消例程也清除“脏”属性，因此撤消不会被调用两次。
*   （可选）如果用户更改了另一个字段，点击了其他地方等，textarea 的脏属性也被清除，并且更改变为可撤消。
*   （可选）具有自身撤消功能的对象可以/必须停止事件传播，以避免其他撤消具有两种效果。

您可能希望或不希望也拦截 textarea 上的 onChange。如果 onChange 触发并且未设置dirty，则这是初始按钮单击，可能会被忽略。否则，它可能表明用户已将他自己的一些更改添加到单击的文本中。在这种情况下，您可能希望禁用撤消以保留这些更改，或要求用户确认。

# javascript - 无进程的 JavaScript 异步非阻塞函数

> ID：13597012
> 
> 赞同：0
> 
> 时间：2012-11-28T02:54:54.547
> 
> 标签：javascript, node.js

我在 stackoverflow 上阅读了一些关于这个主题的问题，但似乎没有一个能回答我的疑问。

我知道如何使用[process.nextTick](http://nodejs.org/api/process.html#process_process_nexttick_callback)创建异步函数：

```
var async_function = function(val, callback){
    process.nextTick(function(){
        callback(val);
    });
}; 
```

我也读过[Promise](https://stackoverflow.com/questions/4296505/understanding-promises-in-node-js)，但是如何在不使用进程、Promise 等库的情况下编写异步非阻塞函数？

什么是原生方式？我首先想到了这种方法：

```
var async = function(val, cb) {
    cb(val);    
} 
```

但是，该功能块：

```
async(3, function(val) {
    console.log(val);
});
console.log(4);
// returns:
3
4 
```

那么正确的实现方式是什么？如果不依赖这些库，我如何编写异步函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:59:23.183

您可以使用`setTimeout`- 它是像延迟一样的本机功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:35:47.567

将函数的工作分解成块，并[`process.nextTick`](http://nodejs.org/api/process.html#process_process_nexttick_callback)在当前块完成后用于将下一个块排队。这样，您就可以在每个工作块之间执行其他排队的回调。当所有块都完成后，调用作为参数传递给函数的回调。

以上假设您的函数没有调用现有的异步 API，这自然会使您的函数异步而不做任何特殊的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:58:05.050

在 Node.js 上，您需要使用`process.nextTick`. 在浏览器中，您可以使用`postMessage`比`setTimeout(function(){},0)`.

`postMessage`这是hack的跨浏览器实现： [https ://github.com/timoxley/next-tick/blob/master/index.js](https://github.com/timoxley/next-tick/blob/master/index.js)

# python - 如何向谷歌数据存储 StringListProperty 添加选项？

> ID：13597014
> 
> 赞同：1
> 
> 时间：2012-11-28T02:55:01.677
> 
> 标签：python, google-app-engine, google-cloud-datastore, webapp2

好的，问题就在这里。我有这个代码

```
list_categories = [None,"mathematics","engineering","science","other"]
class Books(db.Model)
    title = db.StringProperty(required=True)
    author = db.StringProperty()
    isbn = db.StringProperty()
    categories = db.StringListProperty(default=None, choices = set(list_categories)) 
```

我在这里要做的是让我的 book.categories 成为列表类别的子集，例如我有一本书的类别应该是“工程”和“数学”，但是当我设置

```
book.categories = ['engineering','mathematics'] 
```

它 webapp2 给了我一个错误

```
BadValueError: Property categories is ['engineering','mathematics']; must be one of set([None,"mathematics","engineering","science","other"]) 
```

我最初的猜测是我必须将我的 list_choices 设置为 [None,"mathematics","engineering","science","other"] 的 POWERSET，但这太低效了。

有谁知道这个的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:33:00.093

错误的原因（我相信你已经猜到了）是它`StringListProperty`没有对`choices`关键字参数进行任何特殊处理 - 它只是将它传递给`ListProperty`构造函数，然后将它传递给`Property`构造函数，它在哪里评价：

```
if self.empty(value):
    if self.required:
        raise BadValueError('Property %s is required' % self.name)
    else:
      if self.choices:
        match = False
        for choice in self.choices:
          if choice == value:
            match = True
        if not match:
          raise BadValueError('Property %s is %r; must be one of %r' %
                              (self.name, value, self.choices)) 
```

问题是它单独遍历每个`choice`，但它会将它与您的整个列表（`value`）进行比较，这永远不会导致匹配，因为字符串不等于列表（再次，您知道这一点:)）。

我的建议是修改您将列表分配给属性的方式。例如，而不是：

```
book.categories = ['engineering','mathematics'] 
```

尝试这样的事情：

```
for category in ['engineering','mathematics']:
    book.categories.append(category) 
```

由于`ListProperty`包含一个列表，您可以单独附加每个项目，以便它通过上述代码中的测试。请注意，为了让它在我的测试中工作，我必须以稍微不同的方式设置模型 - 但是，如果您可以解决上面提到的错误，那么该`append`方法应该可以正常工作。

我同意，这让它变得不那么简单了，但它应该绕过上面的问题并希望能奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:07:30.257

Create a many to many relationship using list of keys. Use the `categories` property in `class Book` as a list of keys of `class Category`.

```
class Book(db.Model)
    title = db.StringProperty(required=True)
    author = db.StringProperty()
    isbn = db.StringProperty()

    # List Of Keys
    categories = db.ListProperty(db.Key)

class Category(db.Model)
    name = db.StringProperty(choices = ('science', 'engineering', 'math')) 
```

For more info and code samples about modeling check out: [https://developers.google.com/appengine/articles/modeling](https://developers.google.com/appengine/articles/modeling)

# android - 运行 Android 模拟器时出现问题：“警告：数据分区已在使用中”

> ID：13597016
> 
> 赞同：3
> 
> 时间：2012-11-28T02:55:07.667
> 
> 标签：android, android-emulator, android-build

我似乎对Android模拟器有一些问题。我按照所有说明正确构建它，我可以像这样运行模拟器：

```
emulator -sysdir out/target/product/generic/ \
 -system out/target/product/generic/system.img \
 -ramdisk out/target/product/generic/ramdisk.img \
 -kernel kernel-goldfish-xattr-2.6.29 \ 
 -sdcard tdroidsd.img -skindir development/tools/emulator/skins \
 -data out/target/product/generic/userdata.img \
 -skin WVGA800 \
 -memory 512 -partition-size 500 
```

这可以很好地启动模拟器。但是，每当我启动它时，都会收到以下警告：

```
WARNING: Data partition already in use. Changes will not persist! 
```

这是一个很大的痛苦，因为每当我重新启动或杀死模拟器时，我安装的任何应用程序都会消失。

我看到在 stackoverflow 上有很多与此相关的主题，我检查了以下内容：

*   锁定文件的存在：无
*   adb-server ：杀死它并重新启动它并没有什么不同

我应该注意，我丝毫没有使用 Eclipse，而且我使用的是 Linux 机器（Gentoo）。

以详细方式运行显示以下内容：

```
emulator: autoconfig: -initdata out/target/product/generic/userdata.img
disk.ramdisk.path = out/target/product/generic/ramdisk.img
disk.systemPartition.initPath = out/target/product/generic/system.img
disk.systemPartition.size = 500m
disk.dataPartition.path = out/target/product/generic/out/target/product/generic/userdata.img
disk.dataPartition.size = 500m
avd.name = <build> 
```

似乎 disk.dataPartition.path 设置以某种方式出现乱码，但我不知道为什么。我的 .bashrc 中有以下内容

```
 export PATH="~/bin:$PATH"
 export ANDROID_PRODUCT_OUT="~/tdroid/tdroid-4.1.1_r6/out/target/product/generic"
 export PATH="~/tdroid/tdroid-4.1.1_r6/system/core:$PATH"
 export ANDROID_BIN="~/tdroid/tdroid-4.1.1_r6/out/host/linux-x86/bin"
 export ANDROID_QTOOLS="~/tdroid/tdroid-4.1.1_r6/development/emulator/qtools"
 export ANDROID_TOOLCHAIN="~/tdroid/tdroid-4.1.1_r6/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.6/bin"
 export ANDROID_EABI_TOOLCHAIN="~/tdroid/tdroid-4.1.1_r6/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.6/bin"
 export ANDROID_HOST_OUT="~/tdroid/tdroid-4.1.1_r6/out/host/linux-x86"
 PATH=$ANDROID_BIN:$PATH
 PATH=$ANDROID_HOST_OUT:$PATH 
```

如果有人能指导我解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T15:28:55.793

我发现这个问题正在寻找相同的问题。你提到的乱码`disk.dataPartition.path`导致我更多地玩弄路径。`system.img`我从和 中删除了 sysdir 路径`userdata.img`。`ramdisk.img`请注意和仍然需要路径`sdcard.img`。一旦我做了这个改变，错误就消失了。这是我更新的脚本。

```
emulator \
   -sysdir img/ \
   -system system.img \
   -ramdisk img/ramdisk.img \
   -data userdata.img \
   -kernel prebuilts/qemu-kernel/arm/kernel-qemu-armv7 \
   -sdcard img/sdcard.img \
   -skindir sdk/emulator/skins \
   -skin WVGA800 \
   -memory 512 \
   -partition-size 1024 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T13:45:50.927

我有同样的问题，我使用 sysdir 的相对路径作为数据参数解决了它。

# php - 上传到虚拟主机时出现 curl 错误

> ID：13597021
> 
> 赞同：1
> 
> 时间：2012-11-28T02:55:21.930
> 
> 标签：php, json, curl

我将有一个`php`上传`json`到网络。

这是我要上传的文件（位于我的本地驱动器中）

**测试.php**

```
$string = file_get_contents("results.json");

$ch = curl_init();
$post_values = array('json_data' => $string);
curl_setopt($ch, CURLOPT_URL, '<dir path>/test1.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_values);
$data = curl_exec($ch);
if (!curl_errno($ch)) {
    echo 'Received raw data' . $data;
}
curl_close($ch);
?> 
```

这是获取发布的 json 的代码

**test1.php**

```
<?php

$data = json_decode($_POST['json_data'], true);

header('Content-type: text/json');

foreach ($data['queue'] as $queue) {
    echo "Wof = " . $queue['wof'];
    echo "Input Date = " . $queue['input_date'] . "<br />";
}
?> 
```

两种代码都运行良好。

但是当我将**test1.php**上传到网络服务器时，这意味着我将我`json`的计算机中的位置发送到服务器。我不工作。

我得到没有错误消息，只是它不显示数据。只显示`Received raw data`

我的问题是：**如何解决？，我的代码有问题吗？**

提前致谢。

# php - 当一个 CT 引用另一个 CT 时，如何消除视图中的重复 Drupal 节点？

> ID：13597024
> 
> 赞同：2
> 
> 时间：2012-11-28T02:55:36.540
> 
> 标签：php, drupal, drupal-7, drupal-views, entityreference

*带有相关模块的 Drupal 7：视图和实体参考*

我有一个简单地显示两个不同内容类型记录的“预告片”显示类型的视图，我们会说它们是文章和页面。

My Article CT 显示了一些简单的字段。

My Page CT 有几个字段，还有一个实体参考字段（无限条目）。实体参考字段指向其他文章节点。

然后，正如预期的那样，“我的视图”显示每条记录的 Teaser 显示，当然，当 Page 记录引用另一个 Article 记录时，该 Article 的 Teaser 将显示为 Page Teaser 的一部分。

这很棒。问题是，我不想显示重复的文章预告片。这意味着，如果页面引用了一篇文章，我不想将相同的文章预告片显示为单独的列表。

这样想，我有这些文章：

1.  第1条
2.  第二条
3.  第三条

我有这些页面：

1.  第 4 页
2.  第 5 页
3.  第 6 页

第 4 页点 -> 在第 1 条和第 2 条

第 6 页点 -> 在第 2 条

***TL;博士***

**现在视图将显示如下内容：**

*   第1条
*   第二条
*   第 4 页
    *   第1条
    *   第二条
*   第 5 页
*   第 6 页
    *   第二条
*   第三条

**我想要的是这样的：**

*   第 4 页
    *   第1条
    *   第二条
*   第 5 页
*   第 6 页
    *   第二条
*   第三条

编辑：这是我正在尝试做的快速图表。顺便说一下，这是对视图使用“内容”而不是“字段”，因为两个 CT 的视图中存在不相等的字段。

![图表](../Images/beda813bf37e52d823b50167a34126b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-16T17:27:26.720

问题在于，从数据库的角度来看，这些记录实际上*是*不同的，因为不同的实体引用生成了多条记录。

Drupal 8 的核心问题是[Views relationship with multi-valued entity reference fields invalidate Distinct query option](https://www.drupal.org/project/drupal/issues/2993688)。那里应该有可用的补丁。

对于 Drupal 7，使用[Views Distinct](https://www.drupal.org/project/views_distinct)模块，因为[它可能不会在 Views 中修复](https://www.drupal.org/project/views/issues/2976266)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:09:01.133

从`Advanced`部分下的查看页面。点击`Other`-> `Query settings: Settings`。然后选中`Distinct`复选框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T14:20:57.030

我最终通过使用对应实体引用模块 (CER) 解决了这个问题。这会创建在父 <-> 子之间同步的 2 向关系。使用它，我可以简单地从视图中过滤所有具有父级的子级。

# java - BufferedReader，客户端/服务器

> ID：13597027
> 
> 赞同：2
> 
> 时间：2012-11-28T02:56:16.530
> 
> 标签：java, client-server, server-side, bufferedreader

对于类，我正在创建一个简单的客户端/服务器。客户端打开一个 jframe，用户在其中输入主机和端口号。如果建立了连接，则会打开另一个具有 keylistener 的 jframe。在客户端输入的内容会显示在服务器的 jtextarea 中。我能够在客户端和服务器之间建立连接，但在此之后我立即遇到空指针异常。我假设我应该在我的服务器中使用除 bufferedreader 之外的其他东西，或者我是否可以阻止服务器读取直到实际输入某些内容？还是我在做其他完全错误的事情？任何帮助将不胜感激，相关代码如下。

```
public class TypeServer extends JPanel {

BufferedReader lnr;

public TypeServer(Socket soc) throws IOException {

    InputStream inStream = soc.getInputStream();
    InputStreamReader isr = new InputStreamReader(inStream);
    BufferedReader lnr = new BufferedReader(isr);

}
//below is in the main function
try {
        ServerSocket srv = new ServerSocket(5555);
        Socket soc=srv.accept();
        while (true) {

            // Create server
            TypeServer tc = new TypeServer(soc);
            String line=tc.lnr.readLine();
            textArea.append(line);
            srv.close();
            soc.close();

        }
    } 
```

编辑：我很抱歉之前没有包括这个，但是 String line=tc.lnr.readLine(); 行命中空指针异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:02:59.437

在您的主要内容中，您正在使用实例变量

```
String line=tc.lnr.readLine(); //lnr is not initialized 
```

您必须更改以下内容

```
BufferedReader lnr = new BufferedReader(isr); //initializing the local variable 
```

至

```
this.lnr = new BufferedReader(isr); 
```

# java - Roblox 论坛, Web Scraping App (Android) 问题

> ID：13597028
> 
> 赞同：2
> 
> 时间：2012-11-28T02:56:21.940
> 
> 标签：java, android, web-scraping, roblox

我一直在等待一个想法，我想我终于有了一个。我将尝试使用 Web Scraping 制作一个 Android 应用程序，这将使我能够比现在更好地导航和使用 Roblox 上的论坛（如果你真的想查找的话，请访问 .com）。这些论坛不仅总体上很糟糕，而且在我的 Android 设备（三星 Galaxy Player）上更糟糕。谁能给我指点或建议？我不确定我应该使用哪些库...这是我第一次尝试编码 :)

哦，显然我想给它一个回复帖子的功能，但我不确定这种类型的登录如何工作......

编辑：我从这个应用程序中得到了这个想法：[GooglePlay](https://play.google.com/store/apps/details?id=com.andrewshu.android.reddit&hl=en)，[Github](https://github.com/talklittle/reddit-is-fun)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T06:47:57.117

您应该查看如何从网站获取数据，并且您还应该确保您了解 html。您还需要一种简单的方法来处理 html。

*   获取页面（使用问题中的示例）：[从网页中读取数据](https://stackoverflow.com/questions/5232535/read-data-from-webpage)
*   关于html的一点：http: [//www.w3schools.com/html/default.asp](http://www.w3schools.com/html/default.asp)
*   处理html：http: [//jsoup.org/cookbook/extracting-data/dom-navigation](http://jsoup.org/cookbook/extracting-data/dom-navigation)

要登录，您应该使用登录信息向标准登录页面发送一个 post 请求，然后保留生成的 cookie 并将其与您的其他请求一起传递。

*   关于处理 cookie 的小知识：[Java：使用 POST 登录时处理 cookie](https://stackoverflow.com/questions/3047363/java-handling-cookies-when-logging-in-with-post)

您可能还想考虑一些事情：

*   论坛中帖子的线性或分支视图？
*   如果有人发布新帖子，您应该收到消息吗？
*   自带搜索功能？
*   签名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-20T08:36:02.970

你必须使用java的JSOUP libaray，你可以通过这个库轻松解析html数据。示例：在 doc 对象中，您将获得完整的网页

```
File input = new File(url);
Document doc = null;
doc = Jsoup.connect(url).get();
Elements headlinesCat1 = doc.select("div[class=abc"); 
```

# java - 快速排序 - 递归

> ID：13597030
> 
> 赞同：1
> 
> 时间：2012-11-28T02:56:44.500
> 
> 标签：java, algorithm, sorting, quicksort

我正在尝试以两种方式对快速排序进行编码，一种是就地编码，另一种是使用单独的数组。我有点卡在一些逻辑上，看看我有什么，提前感谢您的帮助！

```
public List<Integer> sort(List<Integer> arr){
  if(arr.length > 0)
    List<Integer> ret = new ArrayList<Integer>();
  ret = quickSort(arr);
  return ret;
 }

public List<Integer> quickSort(List<Integer> arr){
  if(arr.length < 2)
    return;

  int pivot = arr[0];
  List<Integer> left = new ArrayList<Integer>();
  List<Integer> right = new ArrayList<Integer>();

  for(int i = 0; i < arr.length; i++){
    if(arr[i] <= pivot)
      left.add(arr[i]);
    else
      right.add(arr[i]);
  }
  quickSort(left);
  quickSort(right);

} 
```

现在我被困住了，我不知道在递归地遍历两组之后我会做什么，主要是停留在如何将它们连接在一起并返回一个排序列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:08:52.093

您需要将`left`和`right`序列组合在一起。您需要在算法结束时（关闭之前`}`）执行此操作。在伪代码中：

```
int leftpos = 0, rightpos = 0;
List newlist = new ArrayList();
for(int pos = 0; pos < arr.length; pos++)
  if left[pos] < right[pos] newlist.add(left[leftpos++]);
    else newlist.add(right[rightpos++]);
return newlist; 
```

这只是一个伪代码。您需要添加代码来检查for 循环中每个数组 (`left`和) 的长度。`right`

另外我必须注意，这远非快速排序。如此多`new`的数组分配使算法极其缓慢，这在排序时是不受欢迎的。

此外，第 3 行的右侧是多余的。你不需要在这里分配任何东西，因为它会在下一行被覆盖。我只是简单地用这个替换你的第 3-5 行：

```
return quickSort(arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:34:04.373

让我为你解决这个问题。

首先，除非您使用*链表*，否则您总是希望进行就地排序（即使这样，通常也需要转换为数组，就地排序，然后再转换回链表——它减少了垃圾收集器的压力）。.NET List<>s 实际上是扩展数组。

接下来，快速排序实际上是关于枢轴操作的。这是一种方法：

```
// Quicksort the sub-array xs[lo..hi].
void QSort(int[] xs, int lo, int hi) {
    if (hi <= lo) return; // Don't sort empty or singleton sub-arrays.
    var p = [choose some pivot value from xs[lo..hi]];
    var a = lo; // Invariant: x[lo..a - 1] <= p.
    var z = hi; // Invariant: p < x[z + 1..hi].
    while (a <= z) {
        if (xs[a] <= p) a++; else Swap(xs, a, z--);
    }
    QSort(xs, lo, a - 1); // Sort the items <= p.
    QSort(xs, z + 1, hi); // Sort the items > p.
}

void Swap(int[] xs, int i, int j) {
    var tmp = xs[i];
    xs[i] = xs[j];
    xs[j] = tmp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T17:52:30.490

Groovy 上的简单实现

```
def qs(list) {
  if (list.size() < 2) return list   
  def pivot = list[0]
  def items = list.groupBy { it <=> pivot }.withDefault { [] }
  qs(items[-1]) + items[0] + qs(items[1])
} 
```

# php - 视图中的未定义变量错误

> ID：13597031
> 
> 赞同：1
> 
> 时间：2012-11-28T02:56:47.620
> 
> 标签：php, codeigniter, controller, views

我的控制器在这个问题中： [如何为此添加分页](https://stackoverflow.com/questions/13584783/how-to-add-pagination-to-this)

但是现在，我的视图中出现了未定义的变量，View 有一个输入

```
<input name='query'/> 
```

我在控制器中收到它，

```
$query = $this->input->get('query'); 
```

现在，我正在尝试将相同的查询字符串传递回我在分页链接内的视图中。

```
<a href="<php echo base_url(); ?>main/search/query=<?php echo $query; ?>&off=<?php echo $off=5;">1</a> 
```

`$off`有效但无效`$query`。但我没有将其保存`$query`到数据库中。所以，我也不能用`$data['query']`。完全糊涂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:00:49.460

$off 不会引发错误，因为您将整数 5 分配给它。

您需要通过将数据粘贴在一个数组中来从控制器内部将数据传递给视图

```
 $data['query']= $query;
 $this->load->view('myview', $data); 
```

然后 $query 可用于视图。不知道你为什么说你不能这样做

# hibernate - grails 域关系

> ID：13597037
> 
> 赞同：4
> 
> 时间：2012-11-28T02:57:42.450
> 
> 标签：hibernate, grails, pagination, lazy-loading, grails-orm

我有一个类叫做`School`它有很多，所以现在当我阅读using`Students`的实例时，我不希望所有的学生都被急切地获取，所以我将获取策略更改为，`School``School.read(id)``lazy`

但现在它会获取`students`我访问的所有时间`school.students`，我想先手动设置 5 `students`，然后如果需要 5-10，依此类推

我们如何以这种方式自定义延迟获取？

`School`有很多`Student`

`Student``School`与个人无关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:27:05.610

您可以使用**batchSize**自定义延迟加载期间获取的结果数量：

```
class Book {
…
static mapping = {
    batchSize 10
   }
} 
```

请参阅[Grails 文档](http://grails.org/doc/latest/ref/Database%20Mapping/batchSize.html)。

**编辑**

`School.students`您可以使用查询创建一个简单的服务，而不是调用

```
class SchoolService{

def getLastStudents(School school, int max, int offset){
        // (Not tested but should be something like this)
        def query = "select student from School school join school.students student where school=:school"
        def students = School.executeQuery(query, [school: school], [max: max, offset: offset]) }

} 
```

然后调用`schoolService.getLastStudents(school, 10, 0)`例如获取最后 10 名学生。

[您可以在官方文档](http://grails.org/doc/latest/guide/single.html#querying)中阅读有关 Gorm 标准的所有信息。

# c++ - 如何将字符串和整数组合成一个字符串（C++）

> ID：13597039
> 
> 赞同：2
> 
> 时间：2012-11-28T02:57:59.437
> 
> 标签：c++, string, pointers, int

> **可能重复：**
> [C++ 连接字符串和 int](https://stackoverflow.com/questions/191757/c-concatenate-string-and-int)

我正在尝试使用许多字符串和整数来创建一个字符串，但我收到消息：“错误 C2110：'+'：无法添加两个指针”

这是我的代码：

`transactions[0] = "New Account Made, Customer ID: " + ID + ", Customer Name : " + firstName + " " + secondName + endl + ", Account ID: " + setID + ", Account Name: " + setName;`

（注意 ID 和 setID 是一个 int）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:01:51.053

使用字符串流：

```
#include <sstream>

...
std::stringstream stm;
stm<<"New Account Made, Customer ID: "<<ID<<", Customer Name : "<<firstName<<" "<<secondName<<std::endl<<", Account ID: "<<setID<<", Account Name: "<<setName; 
```

然后，您可以使用 stm.str() 访问生成的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:00:57.180

您应该使用字符串流：将字符串写入其中；然后写int。`str()`最后通过stream的方法收获结果：

```
stringstream ss;
string hello("hello");
int world = 1234;
ss << hello << world << endl;
string res = ss.str();
cout << res << endl; 
```

这是[ideone 上演示的链接](http://ideone.com/pRPMGO)。

# objective-c - IOS 从 WebView 和 Page 打印 PDF 略有偏移

> ID：13597042
> 
> 赞同：3
> 
> 时间：2012-11-28T02:58:18.113
> 
> 标签：objective-c, ios, webview

我正在使用下面的代码从名为“webby”的 Webview 打印 PDF。当我打印 PDF 时，页面输出会在顶部显示上一页。换句话说，如果我打印第 3 页，它会在第 3 页显示第 2 页的最后一行，并且第 3 页的底部不会打印。关于我做错了什么或应该改变的任何想法？

```
UIPrintInteractionController *print = [UIPrintInteractionController sharedPrintController];

UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.outputType = UIPrintInfoOutputGeneral;

printInfo.duplex = UIPrintInfoDuplexLongEdge;
print.printInfo = printInfo;
print.showsPageRange = YES;

UIViewPrintFormatter *viewFormatter = [self.webby viewPrintFormatter];
viewFormatter.startPage = 0;
print.printFormatter = viewFormatter;

UIPrintInteractionCompletionHandler completionHandler = ^(UIPrintInteractionController *printInteractionController, BOOL completed, NSError *error) {};

[print presentAnimated:YES completionHandler:completionHandler]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:31:32.900

我使用了几乎相同的代码，只是做了一点点改动

你能试试下面的代码吗

```
- (IBAction)printWebPage:(id)sender
{
    UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];
    if(!controller){

        return;
    }

    UIPrintInteractionCompletionHandler completionHandler = 
    ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
        if(!completed && error){

        }
    };

    // Obtain a printInfo so that we can set our printing defaults.
    UIPrintInfo *printInfo = [UIPrintInfo printInfo];
    // This application produces General content that contains color.
    printInfo.outputType = UIPrintInfoOutputGeneral;
    // We'll use the URL as the job name
    printInfo.jobName = @"";
    // Set duplex so that it is available if the printer supports it. We
    // are performing portrait printing so we want to duplex along the long edge.
    printInfo.duplex = UIPrintInfoDuplexLongEdge;
    // Use this printInfo for this print job.
    controller.printInfo = printInfo;

    // Be sure the page range controls are present for documents of > 1 page.
    controller.showsPageRange = YES;

    // This code uses a custom UIPrintPageRenderer so that it can draw a header and footer.
    MyPrintPageRenderer *myRenderer = [[MyPrintPageRenderer alloc] init];
    // The MyPrintPageRenderer class provides a jobtitle that it will label each page with.
    myRenderer.jobTitle = printInfo.jobName;
    // To draw the content of each page, a UIViewPrintFormatter is used.
    UIViewPrintFormatter *viewFormatter = [webviwReport viewPrintFormatter];

#if SIMPLE_LAYOUT
    /*
     For the simple layout we simply set the header and footer height to the height of the
     text box containing the text content, plus some padding.

     To do a layout that takes into account the paper size, we need to do that 
     at a point where we know that size. The numberOfPages method of the UIPrintPageRenderer 
     gets the paper size and can perform any calculations related to deciding header and
     footer size based on the paper size. We'll do that when we aren't doing the simple 
     layout.
     */
    UIFont *font = [UIFont fontWithName:@"Helvetica" size:10]; 
    CGSize titleSize = [myRenderer.jobTitle sizeWithFont:font];
    myRenderer.headerHeight = myRenderer.footerHeight = titleSize.height + 5;
#endif
    [myRenderer addPrintFormatter:viewFormatter startingAtPageAtIndex:0];
    // Set our custom renderer as the printPageRenderer for the print job.
    controller.printPageRenderer = myRenderer;
    [myRenderer release];

    // The method we use presenting the printing UI depends on the type of 
    // UI idiom that is currently executing. Once we invoke one of these methods
    // to present the printing UI, our application's direct involvement in printing
    // is complete. Our custom printPageRenderer will have its methods invoked at the
    // appropriate time by UIKit.

    //    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    //        [controller presentFromBarButtonItem:printButton animated:YES completionHandler:completionHandler];  // iPad
    //    else
    //        [controller presentAnimated:YES completionHandler:completionHandler];  // iPhone
    [controller presentFromRect:CGRectMake(btnReportPrint.frame.origin.x, btnReportPrint.frame.origin.y+40, btnReportPrint.frame.size.width, btnReportPrint.frame.size.height) inView:self.view animated:YES completionHandler:completionHandler];

} 
```

# jquery - qTip2 调整图像大小以适合窗口

> ID：13597048
> 
> 赞同：1
> 
> 时间：2012-11-28T02:59:20.673
> 
> 标签：jquery, image-resizing, qtip2, window-resize

我希望我的 qTip 在屏幕中央显示单击的缩略图的较大图像，但要根据窗口大小调整工具提示和图像的大小。

到目前为止，我的结果仅以默认宽度显示工具提示，并且不会调整以显示完整图像。

[http://jsfiddle.net/fDavN/5206/](http://jsfiddle.net/fDavN/5206/)

```
// Create the tooltips only on document load
$(document).ready(function() {
    $('img').each(function() {
        // Grab fullsize image src
        var bigSrc = $(this).attr('src').replace(".jpg", "_b.jpg");
        $(this).qtip({
            content: {
                title: '<img src="' + bigSrc + '" alt="" />',
                text: function(api) {
                    // Retrieve content from ALT attribute of the $('.selector') element
                    return $(this).attr('alt');
                }
            },
        position: {
            my: 'center',
            at: 'center',
            target: $(window)
        },
        show: {
            event: 'click',
            modal: true
        },
        hide: false,
        style: {
            tip: false,
            classes: 'preview'
            }
        });
    });
});​ 
```

# memory-management - 如何在内存中获取 REALbasic 中字符串变量的大小？

> ID：13597049
> 
> 赞同：1
> 
> 时间：2012-11-28T02:59:19.813
> 
> 标签：memory-management, realbasic

我正在使用一个长的连接字符串变量并对该变量进行处理。我需要知道内存中的大小何时会变得太大，因此我需要找到该字符串在内存中的大小。有没有办法，如果有，怎么办？

```
Dim str As String = someLargeAmountOfText
process(str) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:29:57.850

您可以使用 LenB 函数找出字符串占用了多少字节。更多信息请访问[http://docs.realsoftware.com/index.php/LenB](http://docs.realsoftware.com/index.php/LenB)

```
Dim str As String = someLargeAmountOfText
Dim iLength As UInt64 = str.lenB
If iLength <= somevalue Then
   Process(str)
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:50:25.810

MemoryBlock 也可用于获取 String 使用的内存大小：

```
Dim s As String = "abcde"
Dim mb As MemoryBlock
mb = s
Dim size As UInt64 = mb.Size 
```

# c++ - 如何在子目录中生成带有源的 Makefile？

> ID：13597051
> 
> 赞同：0
> 
> 时间：2012-11-28T02:59:27.740
> 
> 标签：c++, makefile

我有以下方式的来源。

```
/src/main.cpp
/src/hearts/hearts.cpp
/src/spades/spades.cpp
/src/oldmaid/oldmaid.cpp 
```

我将如何为此创建一个makefile？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:13:06.183

A simple way to do this would be to add all the source to a variable and use that variable in your make command. Here's a snippet with the relevant sections.

```
APP_SRC=src/main.cpp \
    src/hearts/hearts.cpp \
    src/spades/spades.cpp \
    src/oldmaid/oldmaid.cpp

CC=g++
CFLAGS= -Wall (and any other flags you need)

#
# Rules for building the application and library 
#
all: 
make bin

bin: 
$(CC)  $(CFLAGS) $(APP_SRC) 
```

And here's a [link](http://oreilly.com/catalog/make3/book/) to a good book to get started learning Make.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:13:13.973

An excerpt from my Makefile. This searches for cpp files in the src directory and compiles them. You can add new files and make picks them automatically.

```
CC = g++  

all: compile
   find src -name '*.o' -print0 | xargs -0 $(CC) -o myExecutable

compile:
    find src -name '*.cpp' -print0 | xargs -0 $(CC) -c

clean:
    find src -iname '*.o' -print0 | xargs -0 rm 
```

# php - 如何使用 jquery 在 php 中获取循环文本字段和隐藏字段的值

> ID：13597052
> 
> 赞同：0
> 
> 时间：2012-11-28T02:59:28.887
> 
> 标签：php, jquery

如何使用 jQuery 获取每个输入字段（隐藏和可见）的值？

```
<?php 
     $date   = date('m-d-Y');
     $ts     = strtotime($date);
     $year   = date('o', $ts);
     $week   = date('W', $ts);

     for($i = 1; $i <= 7; $i++) {
     ?><td><?php
     $ts = strtotime($year.'W'.$week.$i);
     ?><input type="text" name="days" id="days" />
      <input type="hidden" name="date_now" id="date_now" value="<?php print date("Y-m-d", $ts); ?>" />
    </td><?php
    } 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:29:04.317

循环产生的所有输入是否都打算作为一个表单的一部分提交？为什么不将它们整理[成一个数组](https://stackoverflow.com/questions/3314567/how-to-get-form-input-array-into-php-array)？

将名称分别从`days`to`days[]`和 from`date_now`更改`date_now[]`为 。

将 php 控制结构直接嵌入 html 时，请考虑使用[替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)以提高清晰度。

如果您将当前循环计数器嵌入到每个输入的 id 中，您将能够单独选择每个输入。

如果您`class`为每个输入添加一个属性，您可以将它们作为一个组来选择。

您可以通过将 的结果直接传递给 的第二个参数来消除`$ts`每次循环迭代中对 的额外分配。[`strtotime()`](http://php.net/manual/en/function.strtotime.php)[`date()`](http://php.net/manual/en/function.date.php)

由于尚不完全清楚您的最终意图是什么，因此这里是修改了您的初始代码示例，并应用了我的所有建议：

```
<?php 
$date = date('m-d-Y');
$ts = strtotime($date);
$year = date('o', $ts);
$week = date('W', $ts);

for($i = 1; $i <= 7; $i++): 
$dt = date("Y-m-d", strtotime($year.'W'.$week.$i));
?>
<td>
<input type="text" name="days[]" id="days<?=$i?>" class="days" />
<input type="hidden" name="date_now[]" id="date_now<?=$i>" value="<?=$dt?>" class="date_now" />
</td>
<?php endfor; ?> 
```

从上面的代码中，您可以像这样单独选择一个输入：

`$("#days3").val();`

或者，您可以像这样选择所有隐藏的输入：

```
var dates_now = [];
$(".date_now").each(function(i, input) {
    dates_now.push(input.val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:01:59.747

假设您想要所有值，将 id='days' 和 id='date_now' 更改为类（class='days' 和 class='date_now'），我们可以将它们放入这样的数组中：

```
var days_array     = [];
var date_now_array = [];

$('.days').each(function() {
    days_array.push($(this).val());
});

$('.date_now').each(function() {
    date_now_array.push($(this).val());
}); 
```

现在是变量`days_array`并`date_now_array`包含所有值。

# mysql - MySQL左连接多行

> ID：13597054
> 
> 赞同：0
> 
> 时间：2012-11-28T02:59:48.880
> 
> 标签：mysql, join, rows

我正在寻找加入 2 个表，但第二个表具有一对多的关系。如果任何行具有特定值，我可以省略整行吗？让我再解释一下。

```
User table

id name email
1  bob  bob@test.com
2  foo  foo@test.com

Music table

id userId
1  1
1  2
2  1
3  1
2  2 
```

假设我不希望它显示用户是否与音乐表 id 2 有关系。还要寻找不同的用户。

如果我尝试这样的事情，它仍然会显示两个用户。

```
SELECT * FROM users u LEFT JOIN music m ON u.id = m.userId WHERE m.id <> 3 
```

我希望它检查所有行，如果它的 id 为 3，它就不会显示。我希望我是有道理的。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:24:52.967

尝试使用这样的子查询：

```
SELECT * FROM users
WHERE id NOT IN (SELECT userId FROM music WHERE id=3) 
```

此查询意味着如果他们的 id 与 music.id 3 无关，则选择所有用户。

# iphone - iPhone SDK：For 循环 + ViewWithTag 问题

> ID：13597055
> 
> 赞同：0
> 
> 时间：2012-11-28T02:59:54.333
> 
> 标签：iphone, ios5, ios6

```
for (int i = 1; i < [[[UILocalizedIndexedCollation currentCollation] sectionTitles] count]+1; i++) {

    HeaderButton *headerLabel = (HeaderButton *)[tileView viewWithTag:i];
} 
```

大家好，我正在使用 For 循环来遍历我的 XIB 文件中的按钮网格。对于英语本地化，它可以 100% 工作并在网格中找到所有 26 个按钮。

如果您注意到，我正在使用 LocalizedIndex，它将为我返回适当的“小于 NUMBER_HERE”语句。对于日语，它返回 < 38，应该找到所有 37 个按钮。

现在奇怪的问题。日语、西班牙语甚至中文本地化的相同 for 循环将无法正常工作。

我正在失去理智。我插入了 NSLog 语句，它告诉我，它找到标签最多为 27 个的按钮（日语可能有 37 个，西班牙语可能有 30 个等），然后它在 28 处崩溃，告诉我：

```
-[UIView setTitle:forState:]: unrecognized selector sent to instance 0x1dd6b640 
```

我知道 UIView 没有 setTitle:forState: 方法。我使用上面的 cast 语句来指向特定视图中的 Button Subclass 按钮。就像我说的那样，对于英语，这 100% 有效，但对于其他任何东西，它都不起作用。

没有理由发生这种情况。我的代码是 100% 正确的。Xcode 的 viewWithTag 为 28 似乎有问题。

有任何想法吗？

问候，椰子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:43:42.717

这里有一些你可以用来调试的代码，以及在你整理好以后保留。对该项目了解不多，看起来 viewWithTag 正在寻找一种您不期望的类型。让我们用一个内省的测试来代替盲目的演员......

```
for (int i = 1; i < [[[UILocalizedIndexedCollation currentCollation] sectionTitles] count]+1; i++) {

    // let's start out not assuming anything about subviews we find
    UIView *view = [tileView viewWithTag:i];
    if ([view isKindOfClass:[HeaderButton self]]) {
        // now we're sure about what we have
        HeaderButton *headerLabel = (HeaderButton *)view;
        // now we can setTitle:forState: and so on, safely knowing the type
    } else {
        // while we're here, let's find out what was crashing the app
        NSLog(@"look out! view with tag %d is of type %@", i, [view class]);
    }
} 
```

# qt - 如何在不复制内存的情况下创建灰度 QImage(QImage::Format_Indexed)

> ID：13597058
> 
> 赞同：2
> 
> 时间：2012-11-28T03:00:24.207
> 
> 标签：qt, opencv

我正在尝试创建包装由 OpenCv 创建的现有图像缓冲区的 QImage 我正在考虑使用以下构造函数来执行此操作。

```
QImage::QImage ( const uchar * data, int width, int height, 
                 int bytesPerLine, Format format ) 
```

所以，我的代码就像

```
QImage qimage((const uchar*)iplImage->imageData, 
              iplImage->width, iplImage->height, 
              iplImage->widthStep, 
              QImage::Format_Indexed);     // image buffer not copied!
qimage.setColorTable(grayScaleColorTable); // color table's item count 256 for grayscale.
                                           // now new image buffer is allocated here. 
```

好的，在调用这个 ctor 时实际上没有完成任何内存复制。但是，我的问题来了。`QImage::setColorTable()`是非 const 成员函数，其中 QImage 分配新的图像缓冲区以通过其内部 detach() 函数进行复制。

我发现 Qt3 支持这种问题，其中 ctor 可以接受颜色表作为其 ctor 中的参数，但我在 > Qt4 中没有找到任何此类支持。

如何为现有图像缓冲区创建灰度 QImage？

提前感谢您

[编辑]

感谢 Stephen Chu，我意识到以下构造函数创建了可读写的 QImage 对象

```
 QImage ( uchar * data, int width, int height, Format format )
    QImage ( uchar * data, int width, int height, int bytesPerLine, Format format ) 
```

即使`QImage::setColorTable()`在实例化之后立即调用它，也不会分配新的缓冲区。另一方面，接收“const”数据缓冲区的构造函数创建只读 QImage 对象，当`QImage::setColorTable()`调用任何非 const 成员函数（我不想要）时，分配新缓冲区并从原始缓冲区深度复制。

```
 QImage ( const uchar * data, int width, int height, Format format )
    QImage ( const uchar * data, int width, int height, int bytesPerLine, Format format ) 
```

# linux - 如何在 Linux 上从压缩源构建 ManDVD 包？

> ID：13597059
> 
> 赞同：0
> 
> 时间：2012-11-28T03:00:24.723
> 
> 标签：linux, makefile, installation, maya, xfce

当我尝试将任何压缩文件安装到 Linux 中时，我永远无法做到，因为：

1.  当我执行`./configure`系统时说`bash: ./configure: No such file or directory`。

2.  当我执行`sudo ./configure`系统时说`sudo: ./configure: command not found`。

3.  最糟糕的是，当我执行`make`系统时说make：`*** No rule to make target '/usr/lib64/qt-3.3/mkspecs/default/qmake.conf', needed by 'Makefile'. Stop.`

4.  用`make install`系统说`make: *** No rule to make target '/usr/lib64/qt-3.3/mkspecs/default/qmake.conf', needed by 'Makefile'. Stop.`

5.  完成：我无法将存储库中没有的任何内容安装到我的系统中。

注意：我使用 Linux Mint XFCE 13 (Maya)。

我能做些什么来解决这个不愉快的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:05:59.250

As [ManDVD's `Makefile`](https://gist.github.com/4158962) says:

```
#############################################################################
# Makefile for building: mandvd
# Generated by qmake (1.07a) (Qt 3.3.8b) on: Sun Mar  8 18:32:50 2009
# Project:  mandvd.pro
# Template: app
# Command: $(QMAKE) -o Makefile mandvd.pro
############################################################################# 
```

Makefile was autogenerated by `qmake`.

I'm no expert at using `qmake`, but I think executing `qmake` will re-generate `Makefile`, so then you can run `make && sudo make install` as `INSTALL` file says.

You should've already discovered project is kind of messy (if not discontinued at all), so take care, and may the force be with you :)

# django - 如何在 Django 中创建一个持续时间字段？

> ID：13597063
> 
> 赞同：0
> 
> 时间：2012-11-28T03:00:48.843
> 
> 标签：django, datetime, field, icalendar, rfc5545

我使用在管理站点注册的 Django 模型。我的模型的一个字段代表一个持续时间。我想使用 DateTimeField，但不是将值保存到数据库中的日期时间，而是将其保存为 varchar，根据 RFC5545 (ical) 格式化（例如，持续时间为 1 天 1 小时 1 分钟 1 sec 将存储为“P1DT1H1M1S”）。我该怎么做？我应该覆盖 DateTimeField 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:04:28.167

您可以为其创建自定义 Django 字段，而不是覆盖 DateTimeField。

[https://docs.djangoproject.com/en/dev/howto/custom-model-fields/](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:10:49.880

是的，只是 subclass`model.Field.`并定义了两个方法：

**[Field.to_python(self, value)](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.to_python)** - 将 db 值转换为 python 对象。

**[Field.get_prep_value(self, value)](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.get_prep_value)** - 这与`to_python`将对象转换为数据库值相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:31:08.973

感谢 bakkal 和 Pol。下面是我想出的。

```
from django.db import models
from icalendar.prop import vDuration
from django.forms.widgets import MultiWidget
from django.forms import TextInput, IntegerField
from django.forms.util import flatatt
from django.forms.fields import MultiValueField
from django.utils.encoding import force_unicode
from django.utils.safestring import mark_safe
from django.utils.text import capfirst
from django.utils.translation import ugettext_lazy as _
from django.core import validators
from datetime import timedelta

def is_int(s):
    try: 
        int(s)
        return True
    except ValueError:
        return False

class Widget_LabelInputField(TextInput):
    """
    Input widget with label
    """
    input_type="numbers"
    def __init__(self, labelCaption, attrs=None):
        self.labelCaption = labelCaption
    super(Widget_LabelInputField, self).__init__(attrs)

    def _format_value(self, value):
        if is_int(value):
            return value
        return '0'

    def render(self, name, value, attrs=None):
        if value is None:
            value = '0'
        final_attrs = self.build_attrs(attrs, type=self.input_type, name=name)
        if value != '':
            # Only add the 'value' attribute if a value is non-empty.
            final_attrs['value'] = force_unicode(self._format_value(value))
        if (self.labelCaption):
        typeString = self.labelCaption + ': '
        else:
            typeString = ''           
        return mark_safe(u'' + typeString + '<input%s style=\'width: 30px; margin-right: 20px\'/>' % flatatt(final_attrs))

class Widget_DurationField(MultiWidget):
    """
    A Widget that splits duration input into two <input type="text"> boxes.
    """

    def __init__(self, attrs=None):
        widgets = (Widget_LabelInputField(labelCaption='days', attrs=attrs),
                   Widget_LabelInputField(labelCaption='hours', attrs=attrs),
                   Widget_LabelInputField(labelCaption='minutes', attrs=attrs),
                   Widget_LabelInputField(labelCaption='seconds', attrs=attrs)
                   )
        super(Widget_DurationField, self).__init__(widgets, attrs)

    def decompress(self, value):
        if value:
            duration = vDuration.from_ical(value)
            return [str(duration.days), str(duration.seconds // 3600), str(duration.seconds % 3600 // 60), str(duration.seconds % 60)]
        return [None, None, None, None]

class Forms_DurationField(MultiValueField):
    widget = Widget_DurationField
    default_error_messages = {
        'invalid_day': _(u'Enter a valid day.'),
        'invalid_hour': _(u'Enter a valid hour.'),
        'invalid_minute': _(u'Enter a valid minute.'),
        'invalid_second': _(u'Enter a valid second.')
    }

    def __init__(self, *args, **kwargs):
        errors = self.default_error_messages.copy()
        if 'error_messages' in kwargs:
            errors.update(kwargs['error_messages'])
        fields = (
            IntegerField(min_value=-9999, max_value=9999,
                      error_messages={'invalid': errors['invalid_day']},),
            IntegerField(min_value=-9999, max_value=9999,
                      error_messages={'invalid': errors['invalid_hour']},),
            IntegerField(min_value=-9999, max_value=9999,
                      error_messages={'invalid': errors['invalid_minute']},),
            IntegerField(min_value=-9999, max_value=9999,
                      error_messages={'invalid': errors['invalid_second']},),
        )
        super(Forms_DurationField, self).__init__(fields, *args, **kwargs)

    def compress(self, data_list):
        if data_list:
            if data_list[0] in validators.EMPTY_VALUES:
                raise ValidationError(self.error_messages['invalid_day'])
            if data_list[1] in validators.EMPTY_VALUES:
                raise ValidationError(self.error_messages['invalid_hour'])
            if data_list[2] in validators.EMPTY_VALUES:
                raise ValidationError(self.error_messages['invalid_minute'])
            if data_list[3] in validators.EMPTY_VALUES:
                raise ValidationError(self.error_messages['invalid_second'])

            return vDuration(timedelta(days=data_list[0],hours=data_list[1],minutes=data_list[2],seconds=data_list[3]))
        return None

class Model_DurationField(models.Field):
    description = "Duration"

    def __init__(self, *args, **kwargs):
        super(Model_DurationField, self).__init__(*args, **kwargs)

    def db_type(self, connection):
        return 'varchar(255)'

    def get_internal_type(self):
        return "Model_DurationField"

    def to_python(self, value):
        if isinstance(value, vDuration) or value is None:
            return value

        return vDuration.from_ical(value) 

    def get_prep_value(self, value):
        return value.to_ical() 

    def formfield(self, **kwargs):
        defaults = {
            'form_class': Forms_DurationField,
            'required': not self.blank,
            'label': capfirst(self.verbose_name),
            'help_text': self.help_text}
        defaults.update(kwargs)
        return super(Model_DurationField, self).formfield(**defaults) 
```

# ruby-on-rails-3 - Rails：动态命名实例变量

> ID：13597072
> 
> 赞同：0
> 
> 时间：2012-11-28T03:01:28.617
> 
> 标签：ruby-on-rails-3, loops

只是想知道如何动态命名（例如，在循环中）一系列实例变量。像这样的东西：

```
<% @current_issue.articles.each_with_index do |a, i| %>
  <% i += 1 %>
  <%= f.collection_select("article#{i}", @articles_hash1, :first, :last) %>
  <% @articles1.each do |r| %>
    <%= link_to(image_tag(r.image.url(:large)), r.image.url(:large), :id => 'article'+i.to_s+'_thumb'+r.id.to_s) %>
  <% end %>
<% end %> 
```

而不是`@articles_hash1`它会在哪里`@articles_hash[i]`。我只是不确定如何实现这一目标。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:04:59.750

```
<% @current_issue.articles.each_with_index do |a, i| %>
  <%= f.collection_select("article#{i}", @articles_hash[i], :first, :last) %>
  <% @articles_hash[i].each do |r| %>
    <%= link_to(image_tag(r.image.url(:large)), r.image.url(:large), :id => 'article'+i.to_s+'_thumb'+r.id.to_s) %>
  <% end %>
<% end %> 
```

我没有检查任何语法问题，但这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:13:16.330

对于任何为此苦苦挣扎的人，请帮自己一个忙，并构建一个有问题的实例变量数组，即：

```
@articles = (1..3).to_a.map { |i| Article.all_articles(i).reverse } 
```

然后遍历该数组，即：

```
<% @articles.each_with_index do |a, i| %>
  <% i += 1 %>
  <%= f.collection_select("article#{i}", @articles[i-1], :id, :name) %>
<% end %> 
```

# javascript - 获取选定的文本 标签

> ID：13597073
> 
> 赞同：4
> 
> 时间：2012-11-28T03:01:41.067
> 
> 标签：javascript, jquery, dom, text

使用 jquery 或纯 javascript，有没有办法获取`<p>`标签的当前选定文本？我知道[input.selectionStart](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#dom-textarea/input-selectionstart)，但它只存在于`<input>`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:36:19.137

这是一个简单的解决方案。适用于 chrome、safari、FF 和 IE9+，但您必须在您可能想要支持的任何其他旧版浏览器上进行测试。[http://jsfiddle.net/YEu3k/1/](http://jsfiddle.net/YEu3k/1/)

```
<p id="pText">here is some text</p>

<script>
    document.getElementById('pText').onmouseup = function(){
        var sel = window.getSelection(), range;
        if (sel.getRangeAt) {
            range = sel.getRangeAt(0);
            alert(range);
        }
    };
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:11:03.067

尝试使用[https://github.com/madapaja/jquery.selection](https://github.com/madapaja/jquery.selection)

选择范围在每个浏览器中是不同的行为。这个插件通常是选择范围的接口。

# google-app-engine - 从 Google App Engine（Java 版本）将数据导出到 Google 电子表格

> ID：13597074
> 
> 赞同：0
> 
> 时间：2012-11-28T03:01:41.963
> 
> 标签：google-app-engine, google-sheets, google-drive-api, google-spreadsheet-api

我现在无处可去。当我在 Google 上四处寻找“从 Google App Engine 将数据导出到 Google 电子表格”的示例时，我看到了很多 Google Conversion API、Google Conversion API、Google Spreadsheet API 和 Google Docs API 教程。但是当我在谷歌网站上查看时，它们都被谷歌弃用了？？？那么，现在最新的更新是什么，以便我可以使用它？

=====

好的，现在我通过 OAuth2 使用 Google Drive SDK 创建文本文件。但我有这个问题：

这是错误：

> java.lang.NullPointerException
> at java.net.URI$Parser.parse(URI.java:3004)
> at java.net.URI.(URI.java:577)
> at com.google.api.client.http.GenericUrl.( GenericUrl.java:100)
> 在 com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
> 在 com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive. java:309)
> 在 com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331)
> **在 com.company.dashboard.service.DriveService.initDoc(DriveService.java:84)**

这是代码：

```
private GoogleCredential buildGoogleCredential(Credential credential) {
    try {
        logger.warning(oauth2Service.getClientCredential().toString());
        GoogleCredential googleCredential = new GoogleCredential.Builder()
                                                .setClientSecrets(oauth2Service.getClientCredential())
                                                .setTransport(new NetHttpTransport())
                                                .setJsonFactory(new JacksonFactory()).build();

        googleCredential.setAccessToken(credential.getAccessToken());
        googleCredential.setRefreshToken(credential.getRefreshToken());

        return googleCredential;

    } catch (IOException e) {
        e.printStackTrace();
    }

    return null;
}

private Drive buildService(GoogleCredential credential) {

    return new Drive.Builder(new NetHttpTransport(), new JacksonFactory(), credential).build();
}

public void initDoc(HttpServletRequest req) 
        throws Exception {
    User user = UserServiceFactory.getUserService().getCurrentUser();

    Credential credential = oauth2Service.getStoredCredential(
            user.getUserId(), 
            (CredentialStore)req.getSession().getServletContext().getAttribute(OAuth2Constant.GOOG_CREDENTIAL_STORE));

    if (credential != null) {
        logger.warning("Using access token: " + credential.getAccessToken());

        try {
            GoogleCredential googleCredential = buildGoogleCredential(credential);

            Drive service = buildService(googleCredential);

            if (service == null) {
                logger.warning("very bad!");
            }

            File body = new File();
            body.setTitle("My document");
            body.setDescription("A test document");
            body.setMimeType("text/plain");

            java.io.File fileContent = new java.io.File("document.txt");
            FileContent mediaContent = new FileContent("text/plain", fileContent);

            service.files().insert(body, mediaContent).execute();
            //File file = service.files().insert(body, mediaContent).execute();
            //System.out.println("File ID: " + file.getId());

        } catch (HttpResponseException e) {
          if (e.getStatusCode() == 401) {
              logger.warning(e.getMessage());
            // Credentials have been revoked.
            // TODO: Redirect the user to the authorization URL.
            throw new UnsupportedOperationException();
          }
        } catch (IOException e) {
          System.out.println("An error occurred: " + e);
        }
    } 
```

oauth2Service.getClientCredential() 返回（xxx = 客户端 ID 和客户端密码，此处未显示）

> {"web":{"client_id":"xxx.apps.googleusercontent.com","client_secret":"xxx"}}

这是我的范围：

```
final static List<String> SCOPES = Arrays.asList("https://www.googleapis.com/auth/userinfo.profile", 
                                                 "https://www.googleapis.com/auth/userinfo.email",
                                                 "https://www.googleapis.com/auth/drive",
                                                 "https://www.googleapis.com/auth/docs",
                                                 "https://www.googleapis.com/auth/drive.file");
final static String AUTH_RESOURCE_LOC = "/client_secrets.json";
final static String OATH_CALLBACK = "http://localhost:8888/oauth2callback"; 
```

这条线

> service.files().insert(body, mediaContent).execute();

抛出 NullPointerException。知道出了什么问题吗？？？

P/S：凭据 = com.google.api.client.auth.oauth2.Credential。我的 OAuth2 一切正常。我可以毫无问题地检索用户信息，但不能检索 Drive API。如您所见，服务不为空，我将其记录为“非常糟糕”并且未显示。没有抛出 401 异常意味着我的 Oauth2 对范围很好。

=======

## 该死！！！！终于解决问题了！！！我的代码完全正确！只是我启用了错误的 API！它应该是 Drive API 而不是 Drive SDK API :/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:07:32.287

您可以从 GAE 生成一个 csv 文件并使用 Drive API 将其上传，`?convert=true`以使其自动转换为 Google 电子表格：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# memory-leaks - xCode 和 iOS：使用泄漏进行调试

> ID：13597077
> 
> 赞同：0
> 
> 时间：2012-11-28T03:01:51.300
> 
> 标签：memory-leaks, instruments, xcode4.5

我正在使用 Instruments Tool ( Leaks ) 来诊断泄漏，但我不太明白如何回溯到我的代码。有谁知道我该如何进一步诊断？

在 iPad (iOS 4.3.5) 上使用 Xcode 4.5 和分析。

**更新**：这是回溯：

```
thread #4: tid = 0x3203, 0x35dffd7a libicucore.A.dylib`utext_hasMetaData + 546, stop reason = EXC_BAD_ACCESS (code=2, address=0x0)
    frame #0: 0x35dffd7a libicucore.A.dylib`utext_hasMetaData + 546
    frame #1: 0x003c17d0
    frame #2: 0x35da6746 libicucore.A.dylib`icu::RuleBasedBreakIterator::handleNext(icu::RBBIStateTable const*) + 806
    frame #3: 0x35da6406 libicucore.A.dylib`icu::RuleBasedBreakIterator::next() + 82
    frame #4: 0x35da5cde libicucore.A.dylib`icu::RuleBasedBreakIterator::following(int) + 218
    frame #5: 0x35db0538 libicucore.A.dylib`ubrk_following + 8
    frame #6: 0x32bb0bc8 WebCore`WebCore::textBreakFollowing(WebCore::TextBreakIterator*, int) + 8
    frame #7: 0x32b9baee WebCore`WebCore::nextBreakablePosition(unsigned short const*, int, int, bool) + 270
    frame #8: 0x32bd0dc8 WebCore`WebCore::RenderBlock::findNextLineBreak(WebCore::BidiResolver<WebCore::InlineIterator, WebCore::BidiRun>&, bool, bool&, bool&, bool&, WebCore::EClear*) + 6920
    frame #9: 0x32b8ce02 WebCore`WebCore::RenderBlock::layoutInlineChildren(bool, int&, int&) + 1922
    frame #10: 0x32b8a1ae WebCore`WebCore::RenderBlock::layoutBlock(bool) + 690
    frame #11: 0x32b897c2 WebCore`WebCore::RenderBlock::layout() + 26
    frame #12: 0x32b8b956 WebCore`WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 414
    frame #13: 0x32b8b24c WebCore`WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 428
    frame #14: 0x32b8a1bc WebCore`WebCore::RenderBlock::layoutBlock(bool) + 704
    frame #15: 0x32b897c2 WebCore`WebCore::RenderBlock::layout() + 26
    frame #16: 0x32b8b956 WebCore`WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 414
    frame #17: 0x32b8b24c WebCore`WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 428
    frame #18: 0x32b8a1bc WebCore`WebCore::RenderBlock::layoutBlock(bool) + 704
    frame #19: 0x32b897c2 WebCore`WebCore::RenderBlock::layout() + 26
    frame #20: 0x32b8b956 WebCore`WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 414
    frame #21: 0x32b8b24c WebCore`WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 428
    frame #22: 0x32b8a1bc WebCore`WebCore::RenderBlock::layoutBlock(bool) + 704
    frame #23: 0x32b897c2 WebCore`WebCore::RenderBlock::layout() + 26
    frame #24: 0x32b8b956 WebCore`WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 414
    frame #25: 0x32b8b24c WebCore`WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 428
    frame #26: 0x32b8a1bc WebCore`WebCore::RenderBlock::layoutBlock(bool) + 704
    frame #27: 0x32b897c2 WebCore`WebCore::RenderBlock::layout() + 26
    frame #28: 0x32b8974e WebCore`WebCore::RenderView::layout() + 334
    frame #29: 0x32b85cba WebCore`WebCore::FrameView::layout(bool) + 1486
    frame #30: 0x32b82c12 WebCore`WebCore::Document::implicitClose() + 794
    frame #31: 0x32b828f6 WebCore`WebCore::FrameLoader::checkCallImplicitClose() + 86
    frame #32: 0x32b827fe WebCore`WebCore::FrameLoader::checkCompleted() + 134
    frame #33: 0x32b82380 WebCore`WebCore::FrameLoader::finishedParsing() + 64 
```

![泄露截图](../Images/e6ec455639fdb85aa6f7d744cce6e78e.png)

**更新**：具有扩展细节的仪器。仍然没有指向来源。它改为指向机器代码。

![带有扩展细节](../Images/0378d2732bf5558790ecd9693a1298d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:29:48.193

如果您打开扩展的详细视图，当您从详细视图中选择泄漏时，您应该能够看到调用堆栈。此外，切换到调用树视图可以帮助您确定代码中发生泄漏的位置。使用跳转栏切换到调用树视图。

当您切换到调用树视图时，您应该会在调用树的左侧看到一系列复选框。选择 Invert Call Tree 和 Hide System Libraries 复选框允许您在调用树中找到您的代码。双击调用树中的一个函数将显示分配泄漏内存的代码行。

# android - Spinner 发送不同的值

> ID：13597080
> 
> 赞同：0
> 
> 时间：2012-11-28T03:02:03.490
> 
> 标签：android, android-spinner

如何使微调器发送指定值以外的不同值：

例如。我的 strings.xml 有以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <string name="app_name">My First App</string>
    <string name="edit_message">Search the Movie Title</string>
    <string name="button_send">Search</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>

    <string-array name="title_type">
        <item>All Types</item>
        <item>Feature Film</item>
        <item>TV Series</item>
        <item>Video Game</item>
    </string-array>
</resources> 
```

现在，当用户单击所有类型而不是所有类型时，我需要发送所有类型。原因是我需要构建一个接受“alltypes”来获取数据的 URL。

我的 MainActivity.java 代码为：

```
public class MainActivity extends Activity {

private Button btn;
private EditText edit;
private Spinner spinner;
private TextView textView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn = (Button) findViewById(R.id.button);
    edit = (EditText) findViewById(R.id.edit_message);
    spinner = (Spinner) findViewById(R.id.spinner);
    textView = (TextView) findViewById(R.id.textView1);

    btn.setOnClickListener(
            new View.OnClickListener()
            {
                public void onClick(View view)
                {
                    //Log.v("EditText", edit.getText().toString());
                    //Log.v("Spinner", spinner.getSelectedItem().toString());
                    //if(spinner.getSelectedItem().toString()=="All Types")

                    String url="http://cs-server.xxx.edu:23405/examples/servlet/HelloWorldExample?title="+edit.getText().toString()+"&type="+spinner.getSelectedItem().toString();
                    Log.v("url",url);
                }
            });

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,R.array.title_type,android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

 //String url="http://cs-server.xxx.edu:23405/examples/servlet/HelloWorldExample?tit  le="+edit.getText().toString()+"&type="+spinner.getSelectedItem().toString();
  // Log.v("url",url);

spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        //Object item = parent.getItemAtPosition(pos);

    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
});

}

private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";
      for (String url : urls) {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        try {
          HttpResponse execute = client.execute(httpGet);
          InputStream content = execute.getEntity().getContent();

          BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
          String s = "";
          while ((s = buffer.readLine()) != null) {
            response += s;
          }

        } catch (Exception e) {
          e.printStackTrace();
        }
      }
      return response;
    }

    @Override
    protected void onPostExecute(String result) {
      textView.setText(result);
    }
  }

  public void readWebpage(View view) {
    DownloadWebPageTask task = new DownloadWebPageTask();
    task.execute(new String[] { "http://facebook.com"});

  }
} 
```

我对 Android 编程相当陌生。关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:04:16.587

You can use following approach.

```
<string-array name="title_values">
        <item>alltypes</item>
        <item>featurefilm</item>
        <item>tvseries</item>
        <item>videogame</item>
</string-array> 
```

Modification in the code will be

```
String[] titleValues = getResources().getStringArray(
                R.array.title_values);

 titleSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

     public void onItemSelected(AdapterView <? > adapterView, View view,
     int position, long id) {

         String selectedItem = titleValues[position];

     }

     public void onNothingSelected(AdapterView <? > arg0) {

     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:40:25.980

```
 yourspinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) 
            {
                String selecteditem = yourspinner.getSelectedItem().toString();
                selecteditem = selecteditem.equals("All Types")?selecteditem..replaceAll(" ", "").toLowerCase():selecteditem;
               // removes the space and converts to lowercase
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

第二个选项。

```
 String[] customarr = {"feature,tv_series,game","feature","tv_series","game"};
 String selecteditem = customarr[yourspinner.getSelectedItemPosition()] 
```

# visual-studio-2010 - Visual Studio - “应用程序无法正确启动”

> ID：13597084
> 
> 赞同：5
> 
> 时间：2012-11-28T03:02:39.807
> 
> 标签：visual-studio-2010, visual-c++, runtime-error

当我尝试运行我的 Visual C++ 应用程序时，出现一个提示“应用程序无法正确启动 (0xc000007b)”的框。唯一的输出是

已加载“C:\Windows\SysWOW64\ntdll.dll”，无法找到或打开 PDB 文件已加载“C:\Windows\SysWOW64\kernel32.dll”，无法找到或打开 PDB 文件已加载“C:\Windows\SysWOW64” \KernelBase.dll'，找不到或打开 PDB 文件

但是所有这些文件都存在......这让我认为这不是应用程序错误的原因。没有其他输出，我不知道可能出了什么问题。如果有人知道我可以检查什么或如何解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:55:52.210

几个蓝图：

1.  重新构建应用程序，包括所有相关的 DLL，然后重试。
2.  确保所有相关的 DLL、服务（如 MSMQ）都可用且正在运行。
3.  检查您的一个 DLL `DllMain`是否正在恢复失败，这会导致应用程序启动。如果任何 DLL 在初始化时返回失败，操作系统将不会启动。
4.  确保您使用的调试/发布 DLL 具有正确的 CRT/MFC 版本，或已链接其他 DLL/EXE。
5.  使用 Dependency Walker 找出任何 DLL 丢失、未找到或不同平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:09:49.540

min 的一位同事告诉我，他曾经读过**重新构建**opencv 应该可以解决这个问题。这对我有用。请注意，我在 win7 64 位 cpu 下使用 opencv1.1(x86)。

祝你好运。哈桑。

# ios - 使用 iOS FB SDK 3.1.1 处理 FBSessionStateClosedLoginFailed 的正确方法是什么

> ID：13597087
> 
> 赞同：1
> 
> 时间：2012-11-28T03:02:43.043
> 
> 标签：ios, facebook, facebook-ios-sdk

当我的应用程序需要例如从用户的 facebook 读取数据时，它会检查活动 FBSession 的当前状态。例如`FBSessionStateOpen`，它知道它只能从 Facebook 请求信息，而`FBSessionStateCreatedTokenLoaded`它必须调用`openWithCompletionHandler`. `FBSession`如果当前状态是 应该调用什么方法`FBSessionStateClosedLoginFailed`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:53:26.583

这意味着登录尝试失败。当我发生这种情况时，我会`- closeAndClearTokenInformation`提醒用户登录失败并询问他是否想再次登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:40:02.630

简而言之：在 Facebook 示例中 [https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

当这种情况发生时，他们的示例代码将调用 loginViewController 或等效项。

这是他们陷入这种情况时的评论。“如果令牌无效，我们想立即切换回登录视图，但是我们会稍微延迟一下，以解决此问题和登录视图之前消失的竞争”

PS 我在解决 Facebook 开放图形设置时修复了这个错误，并在 Scrumptious 示例上进行了更多研究，例如“return [FBSession.activeSession handleOpenURL:url];” 和“[FBSession.activeSession handleDidBecomeActive];”

长篇大论：这取自官方 FB 文档。 [http://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#FBSessionState+enum](http://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#FBSessionState+enum)

鉴于这是前提条件，并且它已通过其他枚举状态而不是连接错误：“FBSessionStateClosedLoginFailed 关闭会话状态指示登录尝试失败”

它没有明确说明问题。这可能是缓存的错误信息。就个人而言，最谨慎的是，我会调用'- (void)closeAndClearTokenInformation;"，此方法将清理每个缓存信息并向客户端/用户显示错误消息，例如“无效登录，请重试”。

然后，允许客户端选择再次进行全新登录或跳过此过程（如果可能）。

高温高压

# python - Pythonic逐行读取文件的方法？

> ID：13597088
> 
> 赞同：5
> 
> 时间：2012-11-28T03:02:49.327
> 
> 标签：python

下面两种方法逐行读取文件的 Pythonic 方法是什么？

```
with open('file', 'r') as f:
    for line in f:
        print line 
```

或者

```
with open('file', 'r') as f:
    for line in f.readlines():
        print line 
```

还是我缺少什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T03:05:21.953

文件句柄是它们自己的迭代器（具体来说，它们实现了迭代器协议）所以

```
with open('file', 'r') as f:
  for line in f:
    # code 
```

是首选用法。 `f.readlines()`返回行列表，这意味着将整个文件吸收到内存中-> 通常不建议使用，尤其是对于大文件。

应该指出的是，我同意上下文管理器值得的观点，并且在我的代码示例中包含了一个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T03:05:15.227

在您介绍的两个中，第一个是推荐练习。正如评论中所指出的，任何不使用上下文管理器的解决方案（如下所示）都意味着文件处于打开状态，这是一个坏主意。

**留下悬空文件句柄的原始答案因此不应遵循** 但是，如果除了阅读这些行之外您不需要`f`任何目的，您可以这样做：

```
for line in open('file', 'r'):
    print line 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T04:06:01.017

不需要 .readlines() 方法调用。

**PLUS：**关于*with*声明

with语句的执行行为如下注释，

```
with open("xxx.txt",'r') as f:    
                                  // now, f is an opened file in context
    for line in f:
        // code with line

pass                              // when control exits *with*, f is closed
print f                           // if you print, you'll get <closed file 'xxx.txt'> 
```

# php - 什么是清洁剂？

> ID：13597090
> 
> 赞同：1
> 
> 时间：2012-11-28T03:03:11.943
> 
> 标签：php, string, function, strpos

将换行符转换为 HTML break ( `<br>`)时

使用什么清洁剂？

```
str_replace(array("\r\n", "[br]", "\r"), '<br>', $Content); 
```

或者

```
str_replace("\r\n", '<br>', $Content);
str_replace("[br]", '<br>', $Content);
str_replace("\r", '<br>', $Content); 
```

我一直在使用第一种方法，但是我的一个朋友说我现在使用的方式在处理方面比较马虎。

我在函数中使用格式；所以

```
function Formatting ($Content)
{
 $Content = str_replace(array("\r\n", "[br]", "\r"), '<br>', $Content);
 return $Content;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:12:25.350

我会自己调整这个（来自手册页[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)中的用户注释：

```
<?php
/**
 * Converts newlines and break tags to an
 * arbitrary string selected by the user,
 * defaults to PHP_EOL.
 *
 * In the case where a break tag is followed by
 * any amount of whitespace, including \r and \n,
 * the tag and the whitespace will be converted
 * to a single instance of the line break argument.
 *
 * @author Matthew Kastor
 * @param string $string
 *   string in which newlines and break tags will be replaced
 * @param string $line_break
 *   replacement string for newlines and break tags
 * @return string
 *   Returns the original string with newlines and break tags
 *   converted
 */
function convert_line_breaks($string, $line_break=PHP_EOL) {
    $patterns = array(   
                        "/(<br>|<br \/>|<br\/>)\s*/i",
                        "/(\r\n|\r|\n)/"
    );
    $replacements = array(   
                            PHP_EOL,
                            $line_break
    );
    $string = preg_replace($patterns, $replacements, $string);
    return $string;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:13:44.537

在回应 Dagons 的评论时，他的建议非常有效；无需使用 nl2br() 创建新函数来执行此任务

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

# r - 将data.frame中的列堆叠成R中的一列

> ID：13597091
> 
> 赞同：13
> 
> 时间：2012-11-28T03:03:43.743
> 
> 标签：r, dataframe, reshape

我在将 data.frame 中的列堆叠成一列时遇到问题。现在我的数据看起来像这样：

```
id   time    black   white   red 
a     1       b1      w1     r1
a     2       b2      w2     r2
a     3       b3      w3     r3
b     1       b4      w4     r4
b     2       b5      w5     r5
b     3       b6      w6     r6 
```

我正在尝试转换 data.frame 使其看起来像这样：

```
id   time  colour 
a     1     b1
a     2     b2
a     3     b3
b     1     b4
b     2     b5
b     3     b6
a     1     w1
a     2     w2
a     3     w3
b     1     w4
b     2     w5
b     3     w6
a     1     r1
a     2     r2
.     .     .
.     .     .
.     .     . 
```

我猜这个问题需要使用 reshape 包，但我不确定如何使用它将多列堆叠在一列下。任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T03:12:34.737

这是从重塑中融化的：

```
library(reshape)
melt(x, id.vars=c('id', 'time'),var='color') 
```

* * *

并且使用 `reshape2`（最新、更快的版本`reshape`）语法几乎相同。

帮助文件包含有用的示例（请参阅`?melt`和指向 的链接`melt.data.frame`）。

在您的情况下，类似以下内容将起作用（假设您的 data.frame 被调用`DF`）

```
library(reshape2)
melt(DF, id.var = c('id','time'), variable.name = 'colour') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-30T06:34:11.767

由于您在标题中提到“堆叠”，您还可以查看`stack`基础 R 中的函数：

```
cbind(mydf[1:2], stack(mydf[3:5]))
#    id time values   ind
# 1   a    1     b1 black
# 2   a    2     b2 black
# 3   a    3     b3 black
# 4   b    1     b4 black
# 5   b    2     b5 black
# 6   b    3     b6 black
# 7   a    1     w1 white
# 8   a    2     w2 white
# 9   a    3     w3 white
# 10  b    1     w4 white
# 11  b    2     w5 white
# 12  b    3     w6 white
# 13  a    1     r1   red
# 14  a    2     r2   red
# 15  a    3     r3   red
# 16  b    1     r4   red
# 17  b    2     r5   red
# 18  b    3     r6   red 
```

如果“黑色”、“白色”和“红色”列中的值为`factor`s，则需要`character`先将它们转换为值。

```
cbind(mydf[1:2], stack(lapply(mydf[3:5], as.character))) 
```

# php - Pdo 行计数错误

> ID：13597092
> 
> 赞同：1
> 
> 时间：2012-11-28T03:03:46.140
> 
> 标签：php, mysql, pdo, rowcount

我一直在尝试使用作为 PDO 一部分的行计数功能。我正在使用 for each 循环遍历损坏部件列表，然后计算我需要订购的每个部件的数量，但使用代码我把它放在下面，它不起作用，我正在修复这个错误

> “致命错误：在第 15 行的 W:\xampp\htdocs\ICT_Devices\damage_log\damage_parts_find.php 中的非对象上调用成员函数 rowCount()”

任何帮助都会很棒，我的 php 位于此处，我知道 pdo 连接文件和 for each 循环都可以工作，但是行数方面我有问题

```
<?php
define('INCLUDE_CHECK',true);
require '../lib/connect/PDO_connect.php';

foreach($db->query("SELECT * FROM `damage_list`") as $damage_part) {
$parts=$damage_part['Damage'];  
$stmt = $db->query('SELECT * FROM damage_log where damage=$parts');

$row_count = $stmt->rowCount();
echo $parts. "=".$row_count;
echo "<br>";

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:18:41.690

因为[当使用单引号时，变量**不会**被扩展](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)。

所以你的查询*实际上*看起来像：

```
SELECT * FROM damage_log where damage=$parts 
```

因此发生错误，并且`$stmt`是`FALSE`。

使用双引号可能会解决您的问题。

此外，由于您没有`$parts`在 SQL 语句中引用，请确保`$parts`始终是数字或任何其他不需要引用的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:20:54.190

错误消息告诉您 $stmt 不是对象。

这可能是因为您的查询很糟糕......`$parts`没有在单引号内解释，因此在查询中是字面意思。

# assembly - 实现汇编逻辑“非”指令

> ID：13597094
> 
> 赞同：0
> 
> 时间：2012-11-28T03:04:01.053
> 
> 标签：assembly, x86, bitwise-operators, logical-operators

所以我遇到了汇编语言的问题。我需要一种方法，仅使用“and”和“or”指令从“not”指令中获得相同的预期结果。所以如果我有：

```
AL = 1011000

not AL = 0100111 
```

但我只需要使用和/或指令的结果。

我想我必须使用屏蔽位等，但到目前为止还没有运气。即使是在正确的方向上轻轻一点也将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:03:29.313

这很容易：

```
mov ah, 11111111b    ; this is your mask
mov al, 00010011b    ; anything you want the 'not' from
xor al, ah 
```

而已！甚至没有使用 and 运算符。
我不知道您使用的是什么汇编程序，但这适用于 nasm。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:36:30.103

您可以循环执行（未经测试）。但它浪费寄存器。

```
NotAL:
    mov bl, 1
    mov bh, 0feh
L3:
    test al, bl
    jne L1
    or al, bl
    jmp L2
L1:
    and al, bh
L2:
    shl bl, 1
    rol bh, 1
    test bl, bl
    jne L3

    ret 
```

# php - XPATH 选择具有多个子值部分匹配的节点

> ID：13597096
> 
> 赞同：1
> 
> 时间：2012-11-28T03:04:20.447
> 
> 标签：php, xml, xpath

我想选择具有特定值的孩子很少的元素。这是xml的示例：`

```
<events>
  <event>
    <startDateTime>2012-12-0128090</startDateTime>
    <homeTeam>
      <name>TEST123</name>
    </homeTeam>
  </event>
</events>` 
```

我想要的结果是事件，它包含值为 2012-12-01 的 startDateTime 并包含 homeTeam/Name 的 TEST 值。

我正在尝试这样：

```
//events/event[startDateTime[contains(.,'2012-12-01')] and homeTeam/name[contains(.,'TEST')]]'); 
```

这也会返回与指定的 starDateTime 不同的事件。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:32:38.793

我稍微调整了您的 XML 和 XPath

```
<events>
    <event>
        <startDateTime>2012-12-0128090</startDateTime>
        <homeTeam>
            <name>TEST123</name>
        </homeTeam>
    </event>
    <event>
        <startDateTime>*2013-12-0128090*</startDateTime>
        <homeTeam>
            <name>TEST123</name>
        </homeTeam>
    </event>
</events> 
```

然后我使用以下 XPath 访问第二个节点：

```
//events/event[(startDateTime[contains(.,'2013-12-01')]) and (homeTeam/name[contains(.,'TEST')])] 
```

我还用不同的名称值对其进行了测试，它似乎工作正常。

# air - 空中移动应用程序-调试

> ID：13597099
> 
> 赞同：0
> 
> 时间：2012-11-28T03:04:30.407
> 
> 标签：air

我已经使用 AIR 完成了一个移动应用程序的开发，并且每当我在设备上运行时，应用程序的名称总是带有 -debug 的名称。当我提交到 Apple/Android 市场时，它会自动删除吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:40:45.710

我没有意识到有一个导出发布构建按钮！

# java - 使用 scribe 获得谷歌授权，但无法获取谷歌联系人

> ID：13597102
> 
> 赞同：0
> 
> 时间：2012-11-28T03:04:42.077
> 
> 标签：java, struts2, scribe

我想从 gmail 中获取联系人。为此，我正在使用使用 GoogleExample.java 的[Sribe](https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/GoogleExample.java) ，它工作正常并给了我令牌。对于授权，它给了我链接，例如 [https://www.google.com/accounts/OAuthAuthorizeToken?oauth_token=](https://www.google.com/accounts/OAuthAuthorizeToken?oauth_token=) ******

我正在与谷歌成功地进行连接过程，

1）我想从他的帐户中获取用户联系人我不知道该怎么做。请提供任何示例

2）为了授权，我必须手动复制链接，我不想手动进行。

使用 struts2 开发这个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:18:43.510

您不需要手动进行授权，在 scribe 中，这是为了演示目的而完成的，您有办法做到这一点。

按照下面提到的步骤

1.  创建一个向 Google API 创建请求的控制器，您需要传递 api_key、secret 并且可以传递 redirect_url 和其他信息。
2.  将用户重定向到 Google 并让他/她授权您的应用程序

重定向 URL 告诉任何 OAuth/OpenID 提供者在他/她授权/拒绝您的应用程序后将用户重定向回哪里

在重定向回来时，Google 将为您提供一个授权令牌。您可以连接到 Google API 以获取用户联系人

这是一个演示代码，一旦用户重定向回您的网站，您如何从 Google 获取数据

```
Verifier verifier = new Verifier(oauth_verifier);
Token accessToken = oAuthGetAccessToken.getAccessToken((Token) session.get(OAuthConstants.REQUEST_TOKEN), verifier, service);
service.signRequest(accessToken, request);
Response response = request.send(); 
```

实际发生的情况是，当用户重定向回来时，我们借助 Google 发送的验证器令牌创建了一个验证器，我们`access_token`从 Google 内部获取了它作为访问用户数据的密钥，最后我们向 Google API 发送请求以获取数据。

请务必在您的初始请求中设置范围，告诉服务提供商您想从用户配置文件中访问哪些数据。

# ios - 存折通行证可以多天使用吗？

> ID：13597103
> 
> 赞同：4
> 
> 时间：2012-11-28T03:04:50.683
> 
> 标签：ios, ios6, passbook

我正在尝试使用相关日期来优化显示我的应用程序的通行证的时间。

我知道的relatedDate 选项是：指定一天的开始和结束时间，或者指定一个似乎在锁定屏幕中显示通行证的时间，在任一方向（！）至少有四个小时的窗口对于“通用”通行证类型。

似乎应该有一种方法可以指定，例如，对于优惠券，它应该在接下来的两周在商店里时显示在锁定屏幕上，此时它应该过期。有没有？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:00:48.067

抱歉，目前没有办法做到这一点。

相关性是您和系统之间的合作努力。您的通票给出时间点（相关日期）和/或空间点（相关位置）。没有提供持续时间或区域的 API。系统决定在该位置周围使用什么半径以及在日期周围使用什么时间窗口。[Passbook 指南中](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW53 "在存折文档中")有一些相关位置的文档，但没有记录时间窗口。在实践中，时间窗口约为 4-8 小时，具体取决于通行证样式。

您应该访问 Apple 的[错误报告页面](http://bugreport.apple.com/)并提交增强请求，描述它将如何为您的优惠券增加价值以使其与多天相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:17:16.657

虽然不是您要查找的内容，但您可以在促销期结束后发送推送更新以删除位置。

如果您有在特定商店中有效的促销活动，那么您可以使用`relevantText`适合促销期的地点，例如*20% Off，Ends Jan 20*。促销结束后，您将发送没有位置的推送（或替换为新报价）。

or pass 类型`relevantDate`不支持该密钥，并且无法为基于时间的警报指定自定义锁定屏幕消息，因此我个人更喜欢在已知位置时使用位置警报。例外情况是提前几个小时提醒用户是有意义的（例如牙科预约或预定的个人培训课程）。`coupon``storeCard`

# c# - 我如何在c#中拆分字符串？

> ID：13597104
> 
> 赞同：-5
> 
> 时间：2012-11-28T03:04:51.513
> 
> 标签：c#

在我的应用程序中，我需要存储给定的以下数据..

**街道、城市、州、邮政和国家**

* * *

**---样品地址---**

***街道：#306，洛杉矶，opp Line Tower，3rd cross

城市/城镇：宏茂桥

州：阿尔梅拉

邮政：520506

国家：迪拜

* * *

但我的字符串之类的意思

**"#306, Los Angel,opp Line Tower,3rd cross\nAng Mo Kio Al-mera 520506\nDubai"**

从上面的字符串中，我如何拆分街道、城市、州、邮政和国家。

**[注意：所有字段都不是必填字段，甚至可能为空。所以当空字段将值作为相应字段的空字符串传递时]**

C#变量声明：string street,city,state,postal,country=string.empty;

我如何将上面的原始字符串中的值存储为对应的 c# 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:09:20.940

尝试这个：

```
var address = "#306, Los Angel,opp Line Tower,3rd cross\nAng Mo Kio Al-mera 520506\nDubai".Split(new [] {',', '\n' })
var array = address.Split(new [] {',', '\n' }) 
```

然后遍历一个数组来分配变量。这将由新行和逗号分隔，并将保留空字段（即多个逗号不是问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:40:33.480

```
 var address = "#306, Los Angel,opp Line Tower,3rd cross\nAng Mo Kio Al-mera 520506\nDubai".Split(new[] { ',', '\n' });
        var array = Page.Request["Address"].ToString().Split(new[] { ',', '\n' });

        if (array.Count() != 0)
        {
            if (array[array.Count() - 1].ToString() != "") // Country
                sCountry = array[array.Count() - 1].ToString();
            else
                sCountry = "";

            var sTemp = array[array.Count() - 2].ToString().Split(new[] { ' ' });

            if (sTemp.Count() != 0)
            {

                // PostalCode
                if (sTemp[sTemp.Count() - 1].ToString() != "")
                {
                    sPostalCode = sTemp[sTemp.Count() - 1].ToString();
                }
                else
                {
                    sPostalCode = "";
                }

                //State Name
                if (sTemp[sTemp.Count() - 2].ToString() != "")
                {
                    sState = sTemp[sTemp.Count() - 2].ToString();
                }
                else
                {
                    sState = "";
                }

            }
            else
            {
                sPostalCode = "";
                sState = "";
            }

            if (array[array.Count() - 3].ToString() != "") // City
                sCity = array[array.Count() - 3].ToString();
            else
                sCity = "";

            for (int i = 0; i < (array.Count() - 3); i++)  // Street
            {
                sStreet = sStreet + array[i].ToString();
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:07:26.880

使用 C# [Split()](http://www.dotnetperls.com/split)函数

```
string[] add_var=addrString.Split(','); 
```

# php - PHP中两个字符串的比较和array_slice

> ID：13597110
> 
> 赞同：0
> 
> 时间：2012-11-28T03:05:10.717
> 
> 标签：php, csv, string-comparison, slice

我觉得我做了一些非常愚蠢的事情，但我无法弄清楚它是什么。
我正在运行由`fgetcsv()`. 我想要的是在一行中的值与下一行中的值不同的位置将数组一分为二。
此代码导致`$first`保留除一个数组之外的所有数组，并`$second`保留最后一个 - 完全忽略字符串比较。`strcmp()`结果是一样的。

```
$csv = array();
$file = fopen('A.csv', 'r');
while (($result = fgetcsv($file)) !== false)
{
    $csv[] = $result;
}
fclose($file);

array_shift($csv); //gets rid of the CSV headers
$rows = count($csv);

for ($i = 0; $i <= $rows; $i++){
    if ($csv[$i][1] != $csv[$i+1][1]){
        $first = array_slice($csv, 0, $i);
        $second = array_slice($csv, $i);
    }
} 
```

以下是 CSV 文件的示例：

```
NAME,MATCHNAME,CHROMOSOME,START LOCATION,END LOCATION,CENTIMORGANS,MATCHING SNPS
A,person_one,2,20945970,23287731,2.48,500
A,person_one,2,233444593,234432885,1.56,500
A,person_one,4,99184637,100861136,1.24,500
A,person_two,1,154990798,157871980,2.8,700 //Here's where the new array should start
A,person_two,1,67136078,70785393,2.28,800 
```

**编辑：**我`$first`对这个例子的期望是：

```
Array
(
[0] => Array
    (
        [0] => A
        [1] => person_one
        [2] => 2
        [3] => 20945970
        [4] => 23287731
        [5] => 2.48
        [6] => 500
    )

[1] => Array
    (
        [0] => A
        [1] => person_one
        [2] => 2
        [3] => 233444593
        [4] => 234432885
        [5] => 1.56
        [6] => 500
    )

[2] => Array
    (
        [0] => A
        [1] => person_one
        [2] => 4
        [3] => 99184637
        [4] => 100861136
        [5] => 1.24
        [6] => 500
    )
) 
```

我的预期`$second`是：

```
Array
(
[0] => Array
    (
        [0] => A
        [1] => person_two
        [2] => 1
        [3] => 154990798
        [4] => 157871980
        [5] => 2.8
        [6] => 700
    )

[1] => Array
    (
        [0] => A
        [1] => person_two
        [2] => 1
        [3] => 67136078
        [4] => 70785393
        [5] => 2.28
        [6] => 800
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:57:23.713

它正在做你想做的事，但是当它到达最后一次迭代时，它会将最后一行中的任何内容与 进行比较`null`，因此它会覆盖`$first`and `$second`。

尝试`break;`在分配后添加以在满足条件时跳出循环。

# iphone - 在目标 C 中进行洪水填充时的 EXC_BAD_ACCESS

> ID：13597112
> 
> 赞同：1
> 
> 时间：2012-11-28T03:05:17.270
> 
> 标签：iphone, objective-c, ios, ipad

我在目标 c 中编写了一个递归洪水填充方法，我目前在 iPad 应用程序中使用该方法。

我通过图像的 RGBA 原始数据获取用户在 UIImage 中触摸的点的颜色。

问题是它运行了一段时间，然后应用程序在访问原始数据时崩溃并出现 EXC_BAD_ACCESS。我的问题是为什么，这是“堆栈溢出”吗？并且任何人都可以提出解决此问题/改进此方法的方法。

这是我的方法（它可能更干净，我很抱歉）。

```
-(unsigned char *)floodFill:(unsigned char *)data withImageRef:(CGImageRef)imgRef withColor:(UIColor *)color whereColor:(UIColor *)pixelColor atX:(int)xx andY:(int)yy
    {
        //create points for top bottom left and right pixel
        CGPoint top = CGPointMake(xx, yy-1);
        CGPoint bottom = CGPointMake(xx, yy+1);
        CGPoint left = CGPointMake(xx-1, yy);
        CGPoint right = CGPointMake(xx+1, yy);

        //convert new color to rgba values
        const CGFloat *rgb = CGColorGetComponents(color.CGColor);

        float newRed = rgb[0];
        float newGreen = rgb[1];
        float newBlue = rgb[2];
        float newAlpha = CGColorGetAlpha(color.CGColor);

        //convert old color to rgba values
        const CGFloat *rgb2 = CGColorGetComponents(pixelColor.CGColor);

        float oldRed = rgb2[0];
        float oldGreen = rgb2[1];
        float oldBlue = rgb2[2];
        float oldAlpha = CGColorGetAlpha(pixelColor.CGColor);

        NSUInteger width = CGImageGetWidth(imgRef);
        NSUInteger bytesPerPixel = 4;
        NSUInteger bytesPerRow = bytesPerPixel * width;
        int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;

        //color current pixel
        data[byteIndex] = (char)newRed*255;
        data[byteIndex+1] = (char)newGreen*255;
        data[byteIndex+2] = (char)newBlue*255;
        data[byteIndex+3] = (char)newAlpha*255;

        CGFloat red, green, blue, alpha;
        CGPoint currentPoint;

        //check top pixel
        currentPoint=top;
        if(currentPoint.x>=0 && currentPoint.y>=0)
        {
            byteIndex = (bytesPerRow * currentPoint.y) + currentPoint.x * bytesPerPixel;
            red   = (data[byteIndex]     * 1.0) / 255.0;
            green = (data[byteIndex + 1] * 1.0) / 255.0;
            blue  = (data[byteIndex + 2] * 1.0) / 255.0;
            alpha = (data[byteIndex + 3] * 1.0) / 255.0;
            if(red==oldRed&&green==oldGreen&&blue==oldBlue&&alpha==oldAlpha)
                data=[self floodFill:data withImageRef:imgRef withColor:color whereColor:pixelColor atX:currentPoint.x andY:currentPoint.y];
        }

        //check bottom pixel
        currentPoint=bottom;
        if(currentPoint.x>=0 && currentPoint.y>=0)
        {
            byteIndex = (bytesPerRow * currentPoint.y) + currentPoint.x * bytesPerPixel;
            red   = (data[byteIndex]     * 1.0) / 255.0;
            green = (data[byteIndex + 1] * 1.0) / 255.0;
            blue  = (data[byteIndex + 2] * 1.0) / 255.0;
            alpha = (data[byteIndex + 3] * 1.0) / 255.0;
            if(red==oldRed&&green==oldGreen&&blue==oldBlue&&alpha==oldAlpha)
                data=[self floodFill:data withImageRef:imgRef withColor:color whereColor:pixelColor atX:currentPoint.x andY:currentPoint.y];
        }

        //check left pixel
        currentPoint=left;
        if(currentPoint.x>=0 && currentPoint.y>=0)
        {
            byteIndex = (bytesPerRow * currentPoint.y) + currentPoint.x * bytesPerPixel;
            red   = (data[byteIndex]     * 1.0) / 255.0;
            green = (data[byteIndex + 1] * 1.0) / 255.0;
            blue  = (data[byteIndex + 2] * 1.0) / 255.0;
            alpha = (data[byteIndex + 3] * 1.0) / 255.0;
            if(red==oldRed&&green==oldGreen&&blue==oldBlue&&alpha==oldAlpha)
                data=[self floodFill:data withImageRef:imgRef withColor:color whereColor:pixelColor atX:currentPoint.x andY:currentPoint.y];
        }

        //check right pixel
        currentPoint=right;
        if(currentPoint.x>=0 && currentPoint.y>=0)
        {
            byteIndex = (bytesPerRow * currentPoint.y) + currentPoint.x * bytesPerPixel;
            red   = (data[byteIndex]     * 1.0) / 255.0;
            green = (data[byteIndex + 1] * 1.0) / 255.0;
            blue  = (data[byteIndex + 2] * 1.0) / 255.0;
            alpha = (data[byteIndex + 3] * 1.0) / 255.0;
            if(red==oldRed&&green==oldGreen&&blue==oldBlue&&alpha==oldAlpha)
                data=[self floodFill:data withImageRef:imgRef withColor:color whereColor:pixelColor atX:currentPoint.x andY:currentPoint.y];
        }

        return data;
    } 
```

谢谢-TJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:12:32.727

递归方法是堆栈溢出异常的主要原因，因为每个递归调用都被压入堆栈直到达到结束条件，特别是在洪水填充算法中这种方法根本不适合，与现代计算机相比，ipad 资源有限，考虑使用基于循环洪水填充算法或扫描线算法的实现

欲了解更多信息，请访问此链接[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T04:12:15.377

您必须检查您没有超出为图像分配的内存。您在检查`currentPoint.x>=0 && currentPoint.y>=0`. 但这并不能阻止您在最后一行时通过图像的末尾。

你需要做检查`currentPoint.y < height && currentPoint.x < width`。

# python - 如何使用 Python 将主机名添加到 known_hosts？

> ID：13597115
> 
> 赞同：2
> 
> 时间：2012-11-28T03:05:23.617
> 
> 标签：python, ssh

我正在使用此代码将服务器添加到 known_hosts：

```
subprocess.Popen(['sshpass', '-p', password, 'ssh', '-o', 'StrictHostKeyChecking=no', add_key], stdout=subprocess.PIPE).communicate()[0] 
```

这会将主机名添加到 known_hosts 但服务器在尝试进入主机时挂起。我只想将主机名添加到 known_hosts 并继续我的其他代码。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:08:10.797

This should do the job. This solution use the [pexpect](http://www.noah.org/wiki/pexpect) library which is a great way to automate commands. You basically call add_known_hosts with the host, user, password that you want added. it will try to ssh to that host and either enters the password or responds to the add to known hosts connection with a yes and then enters the password. Finally it cleanly exits the connection by sending the exit command. You can modify this and not require a username and password and just answer yes to the continue connecting question and then end the ssh process instead of continuing with the password prompt.

```
import pexpect, time

def add_known_hosts(host, user, password):
    child = pexpect.spawn('ssh %s@%s' % (user, host))
    i = child.expect(['.* password:', '.* continue connecting (yes/no)?'])
    if i == 1:
        child.sendline('yes')
        child.expect('.* password:')
    child.sendline(password)
    child.expect('%s@%s' % (user, host))
    time.sleep(1)
    child.sendline('exit')

add_known_hosts('myhost', 'myusername', 'mypassword') 
```

**debugging**

from the comments below it seems you are facing issues using pexpect on your system. A good way to just to do a simple test to confirm pexpect is working correctly with ssh is to run the code below. Fill in host, user with your appropriate settings and then run the code, you should be able to interact with the ssh session. At this point you can build up from here and see exactly what text you are expecting to get from ssh and what text you want to send in response.

```
import pexpect
host, user = 'myhost', 'myusername'
child = pexpect.spawn('ssh %s@%s' % (user, host))
child.interact() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:26:29.470

没关系，自己解决了。这是我所做的：

```
test = subprocess.Popen(['sshpass', '-p', password, 'ssh', '-o', 'StrictHostKeyChecking=no', add_key])
            time.sleep(5.0)
            test.kill() 
```

谢谢！

# asp.net - 框和标签未对齐 CSS

> ID：13597117
> 
> 赞同：0
> 
> 时间：2012-11-28T03:06:00.797
> 
> 标签：asp.net, html, css

基于这个答案[StackOverflow @Nikita Rybak](https://stackoverflow.com/a/3732313/461887)我按照他的解决方案创建了一组标签和文本框，这些解决方案表明正在使用 JSFiddle。

我已经复制了这个并在我的 ASP 项目中添加了更多类别，但是当加载到 chrome 中时，框和文本都没有对齐。

这是我的 html 文件

```
<div id="User">
<div>
<div class="left">
    <asp:Label ID="lbl_UserName" runat="server" Text="User Name"></asp:Label>
</div>
<div class="right">
    <asp:TextBox ID="txtbx_UserName" runat="server"></asp:TextBox>
    <br />
</div>
</div>

<div>
<div class="left">
    <asp:Label ID="lbl_FirstName" runat="server" Text="First Name"></asp:Label>
</div>
<div class="right">
    <asp:TextBox ID="txtbx_FirstName" runat="server"></asp:TextBox>
</div>
</div>

<div>
<div class="left">
    <asp:Label ID="lbl_Password" runat="server" Text="Password"></asp:Label>
</div>
<div class="right">
    <asp:TextBox ID="txtbx_Password" runat="server"></asp:TextBox>
</div>
</div>

<div>
<div class="left">
    <asp:Label ID="lbl_ConfPassword" runat="server" Text="Confirm Password"></asp:Label>
</div>
<div class="right">
    <asp:TextBox ID="txtbx_ConfPassword" runat="server"></asp:TextBox>
</div>
</div>
</div> 
```

和我的 CSS 文件

```
#Content
{
    position: relative;
    float:none;
    border: 1px solid #000000;
    float: left;
    padding: 80px 40px 60px 40px;
    text-align:center;
    background-color: #F8F8F8;
    left: 0px; right: 0px;
    text-align: center;   
}

#User .left {
    width: 30%;
    float: left;
    text-align: right;}

#User .right {
    width: 65%;
    margin-left: 10px;
    float:left;} 
```

我的不工作有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:55:14.267

它应该可以正常工作，尽管你有太多不必要的 div，而且你还有一个换行符，可能会把事情搞砸。看看[这个小提琴](http://jsfiddle.net/jesus_tesh/JnUWx/)

**HTML**

```
<div id="User">
    <div class="left">
        <label>User name</label>
    </div>
    <div class="right">
        <input type="text" />
    </div>
    <div class="left">
        <label>First name</label>
    </div>
    <div class="right">
        <input type="text" />
    </div>
    <div class="left">
        <label>Password</label>
    </div>
    <div class="right">
        <input type="text" />
    </div>
    <div class="left">
        <label>Confirm password</label>
    </div>
    <div class="right">
        <input type="text" />
    </div>
</div>​​​​​​​​​​​​ 
```

**CSS**

```
#User .left {
    width: 30%;
    float: left;
    text-align: right;}

#User .right {
    width: 65%;
    margin-left: 10px;
    float:left;}​ 
```

此外，您在 CSS 螺母中定义了一个 #Content 元素，它不在 HTML 中，因此*可能*会导致问题。

**编辑** 我能想到的唯一另一件事是标签控件将文本包装在一个 - 也许尝试一个文字控件？小提琴工作正常，所以它必须是带有 webforms 控件的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:42:30.063

Float 应该非常小心地使用。相反，您可以使用位置属性来相应地定位您的 div。

# cookies - 将服务于 wsgi 服务器的 localhost 的 cookie 转换为 nginx 反向代理

> ID：13597118
> 
> 赞同：0
> 
> 时间：2012-11-28T03:06:26.040
> 
> 标签：cookies, nginx, reverse-proxy, paster

我有 nginx 设置来面对一个 python 粘贴实例。它们在同一个盒子上，粘贴从 127.0.0.1 和 nginx 服务到外部世界。

当我的 python 应用程序设置 cookie 时，问题就出现了，域与 localhost 保持一致，使 cookie 无用。显然我不是第一个遇到这个问题的人，但是我很难找到标准的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:03:45.120

The [proxy_cookie_domain](http://nginx.org/r/proxy_cookie_domain) directive is exists exactly for this case.

But it most likely that you do not pass the `Host` header.

```
proxy_set_header Host $host; 
```

[http://nginx.org/r/proxy_set_header](http://nginx.org/r/proxy_set_header)

# c# - 双重动画后的事件，同时保持上下文

> ID：13597119
> 
> 赞同：0
> 
> 时间：2012-11-28T03:06:35.183
> 
> 标签：c#, wpf

我正在尝试创建动画，但在动画发生后执行某些代码时遇到问题。动画代码如下...

```
public static void Friend(Canvas canvas)
{
    foreach (var element in canvas.Children.OfType<Image>())
    {
        var elementName = Regex.Split(element.Name, "_");
        if (elementName[0] == "friend")
        {
            var slideDown = new DoubleAnimation
                {
                    From = Canvas.GetBottom(element),
                    To = Canvas.GetBottom(element) - element.Height,
                    Duration = new Duration(TimeSpan.FromSeconds(1)),
                    AutoReverse = true
                };
            element.BeginAnimation(Canvas.BottomProperty, slideDown);
            slideDown.Completed += (sender, e) => Test(sender, e, element, canvas);
        }
    }
} 
```

之后发生的事件是……

```
var random = new Random();
element.Source = Core.StreamImage(Wardrobe.Friends[Wardrobe.RandomFriend()]);
Canvas.SetLeft(element, random.Next(0, (int)(canvas.ActualWidth - element.Width)));
// then reverse the previous animation. 
```

如您所见，事件需要保留动画的上下文才能使其工作，但事件处理程序不允许这样做。我曾尝试直接在下面添加此代码，`element.BeginAnimation`但它会过早执行。

我还尝试将动画的各个部分拆分为单独的函数，但当然你不能在一个对象上拥有多个动画，因为这些函数不会按顺序执行，导致只播放最后一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:32:13.373

尝试将事件移到执行之上

```
public static void Friend(Canvas canvas)
{
    foreach (var element in canvas.Children.OfType<Image>())
    {
        var elementName = Regex.Split(element.Name, "_");
        if (elementName[0] == "friend")
        {
            var slideDown = new DoubleAnimation
                {
                    From = Canvas.GetBottom(element),
                    To = Canvas.GetBottom(element) - element.Height,
                    Duration = new Duration(TimeSpan.FromSeconds(1)),
                    AutoReverse = true
                };
            slideDown.Completed += (sender, e) => Test(sender, e, element, canvas);
            element.BeginAnimation(Canvas.BottomProperty, slideDown);
        }
    }
} 
```

我不是 100% 但我认为动画在执行后会变成 Freezable，所以我们不能修改

顺便说一句，您可以在一个对象上有多个动画，但您需要使用“故事板”。

故事板示例：

```
 var slideDown = new DoubleAnimation { From = 100, To = 200, Duration = new Duration(TimeSpan.FromSeconds(5)), AutoReverse = true };
 var slideLeft = new DoubleAnimation { From = 100, To = 200, BeginTime = TimeSpan.FromSeconds(5), Duration = new Duration(TimeSpan.FromSeconds(5)), AutoReverse = true };

 Storyboard storyBoard = new Storyboard();
 storyBoard.Children.Add(slideDown);
 storyBoard.Children.Add(slideLeft);
 Storyboard.SetTargetName(slideDown, myCanvas.Name);
 Storyboard.SetTargetName(slideLeft, myCanvas.Name);
 Storyboard.SetTargetProperty(slideLeft, new PropertyPath(Canvas.LeftProperty));
 Storyboard.SetTargetProperty(slideDown, new PropertyPath(Canvas.TopProperty));

 myCanvas.BeginStoryboard(storyBoard); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:44:12.960

这是我用来解决我遇到的问题的代码......

```
public static void Friend(Canvas canvas)
{
    var random = new Random();
    foreach (var element in canvas.Children.OfType<Image>())
    {
        var elementName = Regex.Split(element.Name, "_");
        if (elementName[0] == "friend")
        {
            var slideDown = new DoubleAnimation
            {
                From = Canvas.GetBottom(element),
                To = Canvas.GetBottom(element) - element.Height,
                Duration = new Duration(TimeSpan.FromSeconds(1))
            };
            slideDown.Completed += (sender, e) =>
            {
                element.Source = Core.StreamImage(Wardrobe.Friends[Wardrobe.RandomFriend()]);
                Canvas.SetLeft(element, random.Next(0, (int)(canvas.ActualWidth - element.Width)));
                var slideUp = new DoubleAnimation
                {
                    From = Canvas.GetBottom(element),
                    To = Canvas.GetBottom(element) + element.Height,
                    Duration = new Duration(TimeSpan.FromSeconds(1))
                };
                element.BeginAnimation(Canvas.BottomProperty, slideUp);
            };
            element.BeginAnimation(Canvas.BottomProperty, slideDown);
        }
    }
} 
```

# java - 在java中重绘

> ID：13597122
> 
> 赞同：1
> 
> 时间：2012-11-28T03:06:54.350
> 
> 标签：java, swing, user-interface, dictionary, paint

我创建了一个类似于 pacman 的游戏。我已经使用此代码显示了地图。

```
int leveldata1[] =
    { 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
      40, -1,  1,  1,  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 40,
      40, 40,  40,  40,  40, 40, 40, 40, 40, 40, 40, 0, 0, 0, 40, 
      40, 0,  1,  1,  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 40, 
      40, 0, 40, 40, 40, 40, 40, 40,  40, 40, 40, 40, 40, 40, 40,
      40, 1, 1, 1, 1, 1, 1, 1,  1, 1, 1, 1, 1, 1, 40, 
      40, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0,  40, 
      40, 40, 40, 40, 40, 40, 40, 0, 0, 40, 40, 40, 40, 40, 40,
      40, 40, 40, 40, 40, 40, 40, 0, 0, 40, 40, 40, 40, 40, 40,
      40, 1, 1, 1, 1, 1, 1, 0, 0, 40, 40, 40, 40, 40, 40, 
      40, 1, 1, 1, 1, 1, 1, 0, 0, 40, 40, 40, 40, 40, 40,
      40, 1, 1, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
      40, 0, 0, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1,  40,
      40, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 5, 40,
      40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40 };

40 = wallblock
1 = dots
0 = grass
5 = finish
2 = enemy

public void paint(Graphics g)
{  
  super.paint(g);
if (ingame == false)
  {
      MainMenu mm = new MainMenu();
      Graphics2D g2d = (Graphics2D) g;
      mm.displayMainMenu(g2d);
  }
  else if(ingame== true)
  {
      if(level == 1)
      {
          Graphics2D g2d = (Graphics2D) g;
          Maze mz1 = new Maze();
          mz1.drawMaze(g2d, level, lives);
          pl1.drawCharacter(g2d);
          DrawScore(g2d);
      }
  } 
```

在我的迷宫课上：

```
 life = new ImageIcon(MainMenu.class.getResource("../images/life.png")).getImage();
    wallBlock = new     ImageIcon(MainMenu.class.getResource("../images/Wall.png")).getImage();
    grass = new ImageIcon(MainMenu.class.getResource("../images/Grass.png")).getImage();
    dots = new ImageIcon(MainMenu.class.getResource("../images/Dots.png")).getImage();
    enemy = new ImageIcon(MainMenu.class.getResource("../images/Enemy.png")).getImage();
    finish = new ImageIcon(MainMenu.class.getResource("../images/Finish.png")).getImage();

    if (level == 1) 
    {
        for(int i = 0;i<leveldata1.length;i++)
        {   
            if(super.leveldata1[i] == 40)
                g2d.drawImage(wallBlock, mapx,mapy, null);
            if(super.leveldata1[i] <= 5)
                g2d.drawImage(grass, mapx,mapy, null);
            if(super.leveldata1[i] == 1)
                g2d.drawImage(dots, mapx,mapy, null);
            if(super.leveldata1[i] == 5)
            {
                g2d.drawImage(finish, mapx,mapy, null);
            }
            if(super.leveldata1[i] == 2)
            {
                g2d.drawImage(enemy, mapx,mapy, null);
                enemyx[0] = mapx;
                enemyy[0] = mapy;
            }

            if(mapx < 460)
            {
                mapx += 33;
            }
            else
            {
                mapy += 33;
                mapx = 0;
            }

        }
        while(j < lives)
        {
            g2d.drawImage(life, x,0, null);
            x += 40;
            j++;
        }
    } 
```

我可以通过使用关键事件和以下代码成功检测字符是否与点图像相交。

```
if(leveldata1[playerpos-1] != 40)
{
    if(leveldata1[playerpos-1] == 1)
    {
        leveldata1[playerpos-1] = 0;
        score += 5;
        level1totalpoints -=1;
    }
    if(leveldata1[playerpos-1] == 5)
    {
        if(level1totalpoints == 0)
        {
            level = level + 1;
        }
    }
    playerpos = playerpos -1;
    pl1.moveCharacter(-33, 0);
 } 
```

问题是我无法在我的绘制方法中更新我的地图以将点图像更改为指示角色与点图像相交的草图像。就像吃豆子一样。

我正在使用 actionPerformed

```
public void actionPerformed(ActionEvent e) {
    repaint(); 
} 
```

希望在我将 1 = dot 更改为 0 = Grass 后地图会自动更新。使用这条线`leveldata1[playerpos-1] = 0`。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:43:44.043

我认为您应该在 repaint() 之前调用 revalidate()[这可能会解决您的问题：](https://stackoverflow.com/questions/10119069/repaint-jpanel-doesnt-work-in-japplet)

```
public void actionPerformed(ActionEvent e) {
    revalidate();
    repaint(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:21:38.410

不知道您的级别参数到底是什么。但也许你对数组有引用问题：[Java: How to pass byte[] by reference?](https://stackoverflow.com/questions/333151/java-how-to-pass-byte-by-reference)

# java - Android 应用程序中的按钮处理程序

> ID：13597123
> 
> 赞同：1
> 
> 时间：2012-11-28T03:06:59.270
> 
> 标签：java, android

我正在尝试为我的应用程序添加多个按钮处理程序。我已经成功创建了一个链接到网页的按钮。但是，我的下一个按钮遇到了麻烦。我想在点击时进入一个新屏幕。我已经创建了新的屏幕 xml 文件和相应的 java 文件。我还将活动添加到清单中。我只是不确定如何将多个按钮处理程序添加到主 java 页面。我附上了我如何做我的第一个按钮。关于如何为将更改视图的按钮添加到此页面的第二个处理程序的任何建议？

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    addListenerOnButton();

}

public void addListenerOnButton() {

    Button button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

          Intent browserIntent = 
            new Intent(Intent.ACTION_VIEW, Uri.parse("http://m.noblenet.org/eg/opac/home?locg=1"));
            startActivity(browserIntent);

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:33:37.327

处理按钮单击的最简单方法之一是在 xml 文件中使用 android:onClick 属性来获取按钮视图。例如，在您的 xml 的 Button View 中添加 android:onClick="clickMe" 并在您的 java 代码中编写 Public void clickMe(View view) { //do something on button click }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:40:42.997

如果我理解正确，那么按钮会通过 onCreateOptionsMenu 逻辑出现。在这种情况下处理点击事件的最佳方法是覆盖 onOptionsItemSelected API。看[这里](http://developer.android.com/reference/android/app/Activity.html#onOptionsItemSelected%28android.view.MenuItem%29)了解更多详情

# android - 权限仅授予系统应用程序，在清单中

> ID：13597125
> 
> 赞同：26
> 
> 时间：2012-11-28T03:07:09.910
> 
> 标签：android, permissions, android-manifest

我想将此权限添加到我的 Android 清单中：

> ```
> <uses-permission android:name="android.permission.MODIFY_PHONE_STATE" /> 
> ```

但是在我将此权限粘贴到清单中后，它会测试红色下划线并显示：

> 权限仅授予系统应用程序

我能做些什么？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-15T09:02:30.983

`MODIFY_PHONE_STATE`权限仅授予系统应用程序。

供您参考，有 2 种类型的 Android 应用程序：系统和用户

> ***用户应用程序***只是您通过 Google Play 商店、亚马逊应用程序商店或侧载安装的所有正常应用程序。这些进入您的 Android 手机的 /data 分区，这是可用于用户数据和应用程序的内部存储器的一部分。
> 
> ***系统应用程序***基本上是预装在您的 ROM 中的应用程序。在标准的 Android 用户环境中，用户没有对 /system 分区的写入权限，因此无法直接安装或卸载系统应用程序。
> 
> 为了在您的 Android 设备上安装应用程序作为系统应用程序， ***您的设备必须是 root 或安装了自定义恢复（或两者）***。

话虽如此，该错误实际上是错误的，因为您有有效的代码并且编译应该可以工作。如果它发出警告会更好。在 Eclipse 中，您可以轻松修复它。只需前往：

> **窗口 -> 首选项 -> Android -> Lint 错误检查。**

从列表中查找**`ProtectedPermission`**并将严重性设置为错误以外的内容（例如信息）。这样你的项目仍然可以编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T03:22:39.363

`MODIFY_PHONE_STATE`是系统权限。系统应用程序要么预先安装到系统文件夹中，要么由制造商使用其安全证书编译。

因此，如果您尝试这样做，您就是在尝试使用不再受支持的 API。使用 Android 2.3+ 版本，您可以监控来电，但不允许阻止（我认为您发布的链接就是您想要做的）。

如果您需要关注 Android 问题：[Issue 15022](http://code.google.com/p/android/issues/detail?id=15022)和[Issue 14789](http://code.google.com/p/android/issues/detail?id=14789)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-08T00:21:07.230

当您更改清单时，此错误会出现在 SDK 19 及更高版本中。进行项目清理和构建。它应该清除此错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-31T12:32:07.160

只需清理您的项目就可以了：

项目 > 清洁...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-04T11:02:42.670

因为这是系统级权限设备开发人员不授予此权限，所以应用程序开发工具也会对此发出警告，因此您必须

> 简单地清理项目并重建就是这样

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-27T08:27:45.353

**有四种类型的权限**

```
Regular
Dangerous
Signed
Signed or System 
```

`The first two can be used by Simple Apps`其他两个只能由构建在框架中的应用程序使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-13T12:53:59.253

从列表中找到 ProtectedPermission

```
Window -> Preferences -> Android -> Lint Error Checking. 
```

并将严重性设置为错误以外的其他内容（例如信息）。这样你的项目仍然可以编译。

# ruby - Resque 弹出而不是失败

> ID：13597126
> 
> 赞同：0
> 
> 时间：2012-11-28T03:07:10.817
> 
> 标签：ruby, resque, resque-retry

我有一个简单的 ruby​​resque 代码。

但是由于一些代码问题，一些工作失败了。

问题是它们不会出现在失败的作业中，它们只是消失了（一旦从队列中取出作业，它就会被弹出，所以它被删除了）。

我怎样才能使工作处于失败的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:02:46.713

我看到了问题。一旦作业从队列中取出，它就会从 redis 中删除。一旦失败，它就会在失败的作业中回到 redis 中。但是当你停止工人（ctrl+c）的那一刻，它没有时间把它放回失败的工作中

# java - Google GWT - 地图 API v3 运行错误

> ID：13597127
> 
> 赞同：1
> 
> 时间：2012-11-28T03:07:16.867
> 
> 标签：java, javascript, google-maps, gwt, google-maps-api-3

我目前正在用 java 制作一个类，允许我查看谷歌地图并计算距离。在这一点上，我想做的就是查看地图。谁能帮我？

这是我的代码：

```
public class MapOperations{

    private GoogleMap map;

    /*Import Club's School and set center accordingly*/
    private static final LatLng WEST = LatLng.create(42.02606, -87.77194);
    private static final LatLng NORTH = LatLng.create(41.850033, -87.6500523);

    public MapOperations(){
        try{
            init(); 
        }
        catch(Exception e){
            System.out.println(e);
        }
    }

    public void init() {
        MapOptions mapOpts = MapOptions.create();
        mapOpts.setZoom(16);
        mapOpts.setCenter(WEST);

        mapOpts.setMapTypeControl(true);
        MapTypeControlOptions mapTypeCtrlOpts = MapTypeControlOptions.create();
        mapTypeCtrlOpts.setMapTypeIds(ArrayHelper.toJsArrayString(MapTypeId.ROADMAP.getValue(), MapTypeId.HYBRID.getValue()));
        mapTypeCtrlOpts.setStyle(MapTypeControlStyle.DROPDOWN_MENU);
        mapOpts.setMapTypeControlOptions(mapTypeCtrlOpts);

        mapOpts.setZoomControl(true);
        ZoomControlOptions zoomOpts = ZoomControlOptions.create();
        zoomOpts.setStyle(ZoomControlStyle.SMALL);
        mapOpts.setZoomControlOptions(zoomOpts);

        mapOpts.setMapTypeId(MapTypeId.ROADMAP);
        map = GoogleMap.create(Document.get().getElementById("map_canvas"), mapOpts);

        Button btn = new Button("Reset Center", new ClickHandler() {
            public void onClick(ClickEvent event) {
                map.setCenter(WEST);
                map.setZoom(16);
            }
        });

        // Add button to the root panel. (register it on the GWT side)
        RootPanel.get().add(btn);

        // Add button as a map control.
        map.getControls().get(
                new Double(ControlPosition.TOP_RIGHT.getValue()).intValue()).push(
                        btn.getElement());
    }
} 
```

当我尝试运行我的代码时，我收到了这个错误：

```
com.google.gwt.core.client.JavaScriptException: (TypeError) @com.google.maps.gwt.client.GoogleMap::create(Lcom/google/gwt/dom/client/Node;Lcom/google/maps/gwt/client/MapOptions;)([null, JavaScript object(1433)]): Cannot read property 'offsetWidth' of null 
```

# git - Lion中没有命令Git

> ID：13597132
> 
> 赞同：-2
> 
> 时间：2012-11-28T03:07:54.543
> 
> 标签：git, github, osx-mountain-lion

我是 GitHub 世界的新手，我需要帮助！！

[我从github 源](http://code.google.com/p/git-osx-installer/downloads/list?can=3&q=&sort=-uploaded&colspec=Filename%20Summary%20Uploaded%20Size%20DownloadCount)安装了 git 1.8， 但是当在我的控制台中按 git 时说

```
git credential-osxkeychain <get|store|erase> 
```

我尝试修改

> ./bash_profile 导出 PATH=$PATH:/usr/local/git/bin/

但没有醒来，请问有什么想法吗？

I use Mac OSX Mountain Lion 10.8.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:07:16.553

Easiest Way to Install Git:

1.  Install [MacPorts](http://www.macports.org/)
2.  In Terminal `sudo port install git`
    *   You may need to run `sudo port -v selfupdate` before using this install command.

MacPorts has a wide variety of command-line, X11 or Aqua based open-source software for mac without the need for messing with the source to get things to compile. You can see a list of all the ports [here](http://www.macports.org/ports.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:56:57.203

解决方案是：

卸载 git

> usr/本地/git

重新安装 git [Git Sources](http://git-scm.com/download)

执行这个脚本

> 为非终端programs.sh设置git PATH

内包

# javascript - 这个动作实际上会增加还是减少网页的性能？

> ID：13597134
> 
> 赞同：0
> 
> 时间：2012-11-28T03:08:15.963
> 
> 标签：javascript, jquery, html

我创建了这段代码来提高我的网页性能。如果`autoplay.v.mystart`为true，则不会播放2个幻灯片的滑动和动画，我对此做了条件。我的目标是在用户滚动时停止动画并在用户停止滚动时重新激活它，我认为这将减少网页负载，使网页滚动更流畅，因为我听人们说停止未使用的动画或隐藏未使用的东西。但是，我发现它并没有变得更顺畅，而是更加滞后。是否使用滚动事件侦听器和计时器/清除超时也会占用大量资源？实现我的目标、减少网页负载的最佳方法是什么？我在想我应该删除这段代码吗？那将是一种浪费，我无法决定

```
var saviour = {
    '$mywrapper' : $('#wrapper'),
    'mychecked':false,
    run : function(){
        var wrapper_timer;
        saviour.$mywrapper.scroll(function(){
            if(saviour.mychecked==false){
                saviour.mychecked = true;
                autoplay.v.mystart = false;
                clearTimeout(wrapper_timer);
                setTimeout(function(){saviour.mychecked=false},1000);
                wrapper_timer = setTimeout(function(){
                autoplay.v.mystart = true;
                console.log('autoplay restart')
                },4000);
                console.log('check');
            }
        });
    }
}
saviour.run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:28:41.010

[首先，这是一个 jQuery 插件，它基于this](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)提供 'scrollstart' 和 'scrollstop' 事件，它是为早期版本的 jQuery 编写的，需要进行现代化改造。

```
(function($, latency) {
    var special = $.event.special;
    special.scrollstart = {
        setup: function() {
            var timer;
            function handler(evt) {
                if (timer) {
                    clearTimeout(timer);
                } else {
                    evt.type = 'scrollstart';
                    $.event.handle.apply(this, arguments);
                }
                timer = setTimeout(function() {
                    timer = null;
                }, latency);
            };
            $(this).on('scroll.start', handler);
        },
        teardown: function() {
            $(this).off('scroll.start');
        }
    };
    special.scrollstop = {
        setup: function() {
            var timer;
            function handler(evt) {
                var _self = this,
                    _args = arguments;
                if (timer) {
                    clearTimeout(timer);
                }
                timer = setTimeout(function() {
                    timer = null;
                    evt.type = 'scrollstop';
                    $.event.handle.apply(_self, _args);
                }, latency);
            };
            $(this).on('scroll.stop', handler);
        },
        teardown: function() {
            $(this).off('scroll.stop');
        }
    };
})(jQuery, 300); 
```

这个版本：

*   用and替换`.bind()`and ，加上相关的简化。`.unbind()``.on()``.off()`
*   允许将延迟指定为自执行函数包装器的参数。

有了“scrollstart”和“scrollstop”事件检测，用于启动和停止动画的应用程序片段可以像这样简单：

```
$(window).on ('scrollstart', function(e) {
    allowAnim = false;    
    stopAnim();
}).on ('scrollstop', function(e) {
    allowAnim = true;
    anim();
}).trigger('scrollstop'); 
```

where `anim()`and `stopAnim()`are your functions for start and stop animation(s) and `allowAnim`is an boolean var in an external scope。

您可能需要调整延迟。我发现 300 大约是可接受的最小值，而且反应灵敏。较大 较高的值会降低响应速度，但会更好地防止动画在滚动中途重新启动。

**[演示](http://jsfiddle.net/LqDr4/2/)**

# android - android:launchMode="singleTask" 不会阻止多个根活动共存

> ID：13597135
> 
> 赞同：2
> 
> 时间：2012-11-28T03:08:31.393
> 
> 标签：android, instance, launcher, single-instance, launchmode

我的目的是确保任务中的根活动在任何情况下都只有一个实例。所以我设置了 android:launchMode="singleTask"，它在大多数情况下都能正常工作。

但是，如果我将我的任务快速切换到其他人并多次切换回来，launchMode 设置似乎失去了效果。我观察到在前一个被销毁之前创建了一个新的活动实例，如下所示。

有人可以帮忙提供一个完美的解决方案，以确保在任何条件下都存在一个根活动实例吗？

提前致谢

```
11-28 10:43:41.158: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onPause
11-28 10:43:41.158: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onResume
11-28 10:43:41.468: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onPause
11-28 10:43:41.468: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onResume
11-28 10:43:41.818: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onPause
11-28 10:43:41.868: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onCreate
11-28 10:43:42.848: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onStart
11-28 10:43:42.868: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onResume
11-28 10:43:42.868: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onPause
11-28 10:43:42.868: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onResume
11-28 10:43:42.868: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onStop
11-28 10:43:42.878: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@40523a90 onDestroy
11-28 10:43:42.928: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onPause
11-28 10:43:42.928: W/Launcher(15718): Function Called: com.firebear.launcher.Launcher@4054e0a8 onResume 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:51:16.910

您是否在开始另一个活动时调用`finish()`根活动？如果是这样，请删除该声明。

根活动通常只创建一次，并且只有在它被销毁时才会重新创建。这是正常的应用程序行为，无需在清单中设置任何标志。如果根活动已经存在，`onStart()`并且`onResume()`将被调用。

# javascript - FullCalendar 事件标题只允许一行

> ID：13597136
> 
> 赞同：6
> 
> 时间：2012-11-28T03:08:31.470
> 
> 标签：javascript, css, calendar, fullcalendar

即使标题很长，如何使全日历中的事件标题也只有**一行。**默认情况下，它是显示完整标题，我希望它像谷歌日历一样好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T08:46:02.943

在您的 css 文件中查找以下条目：

```
.fc-event-time, .fc-event-title {
    padding: 0 1px;
} 
```

并像这样修改它

```
.fc-event-time, .fc-event-title {
    padding: 0 1px;
    white-space: nowrap;
}

.fc-title {
    white-space: normal;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-16T02:26:45.183

您可以在 HTML 页面上执行此操作，而不是编辑源 CSS：

```
<style>
.fc-day-grid-event > .fc-content {
    white-space: normal;
}
</style> 
```

资料来源：[全日历中的多行标题...](https://stackoverflow.com/a/27370044/194717)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:11:58.300

我可以通过使用空格来解决这个问题：nowrap;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-08T18:35:30.870

这是在您使用 Angular 7 第 4 版的情况下。这对我有用：

```
.fc-event {
    /* force events to be one-line tall */
    white-space: nowrap !important;
    overflow: hidden;
} 
```

# jquery - jQuery 将两个 tr 类合二为一

> ID：13597137
> 
> 赞同：2
> 
> 时间：2012-11-28T03:08:36.633
> 
> 标签：jquery, html-table

抱歉刚刚得到更新，tr 类 A 和 B 重复了很多。我想将每个 AB 组合成 C 并显示所有 C。

我有一张这样的桌子：

```
<table class="table">
<tbody>
<tr class="A">
<td>11111</td>
<td>22222</td>
<td>33333</td>    
</tr>
<tr class="B">
<td>44444</td>
<td>55555</td>
<td>66666</td>    
</tr>
<tr class="A">
<td>77777</td>
<td>88888</td>
<td>99999</td>    
</tr>
<tr class="B">
<td>10101</td>
<td>11111</td>
<td>22222</td>    
</tr>
</tbody>
</table> 
```

我想要做的是一些 jQuery 将两个 tr 组合在一起，例如：

```
<table class="table">
<tbody>
<tr class="C">
<td>11111</td>
<td>22222</td>
<td>33333</td>    
<td>44444</td>
<td>55555</td>
<td>66666</td>    
</tr>
<tr class="C">
<td>77777</td>
<td>88888</td>
<td>99999</td>    
<td>10101</td>
<td>11111</td>
<td>22222</td>    
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T03:12:00.093

Here is a working example: [http://jsfiddle.net/65XaF/](http://jsfiddle.net/65XaF/)

```
$(document).ready(function() {
    var a = $('.A');
    var b = $('.B');
    a
        .append(b.children())
        .removeClass('A')
        .addClass('C');
    b.remove();
});​ 
```

Note: question was updated to reflect multiple A & B groups after this answer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T03:17:09.093

要保留第一个表并将数据插入第二个表，您可以执行以下操作：

```
var c = $('.C');

c.append($('.A').children().clone());
c.append($('.B').children().clone()); 
```

[http://jsfiddle.net/mA88C/](http://jsfiddle.net/mA88C/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T03:36:26.343

单线：

```
$('.A,.B').remove().children('td').appendTo($('<tr />', {'class':'C'})
                                  .appendTo('table'));​ 
```

[**小提琴**](http://jsfiddle.net/szfrd/2/)

由于问题刚刚更改为包含相同类的多次出现，因此修改后的版本将与问题中的新 HTML 一起使用：

```
$('.A').each(function() {
    $(this).add($(this).next('.B')).remove().children('td')
           .appendTo($('<tr />', {'class':'C'})
           .appendTo('table'));
}); 
```

​<a href="http://jsfiddle.net/szfrd/3/" rel="nofollow"> **FIDDLE**

或者更像 Joseph Silber 的建议：

```
$('.A').each(function() {
    $(this).append($(this).next('.B').remove().children()).prop('class','C');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T03:50:55.370

这是一个性能更高的单线：

```
$('.A').prop('class', 'C').append( $('.B').remove().children() ); 
```

这是小提琴：http: [//jsfiddle.net/dAJ4L/](http://jsfiddle.net/dAJ4L/)

* * *

如果你有多个，使用这个：

```
$('.A').each(function() {
    $(this).prop('class', 'C').append( $(this).next().remove().children() );
}); 
```

这是小提琴：http: [//jsfiddle.net/bMHNv/](http://jsfiddle.net/bMHNv/)

* * *

...如果你能克服对单行的痴迷，你应该缓存`$(this)`：

```
$('.A').each(function() {
    var $this = $(this);
    $this.prop('class', 'C').append( $this.next().remove().children() );
}); 
```

这是小提琴：http: [//jsfiddle.net/bMHNv/1/](http://jsfiddle.net/bMHNv/1/)

* * *

**PS**与 DOM 的任何交互都非常昂贵。在操作大量数据时，建议您首先从 DOM 中分离元素，进行操作，然后将其重新添加。因此，为了提高性能，您应该[`.detach()`](http://api.jquery.com/detach/)在操作之前将表从 DOM 中分离出来：

```
var $table = $('.table').detach();

$table.find('.A').each(function() {
    var $this = $(this);
    $this.prop('class', 'C').append( $this.next().remove().children() );
});

// Insert the table back into the DOM.
// Since I don't know your DOM structure, I can't help you out with this.
// You'll have to figure it out on your own. 
```

最后，这是小提琴：http: [//jsfiddle.net/bMHNv/2/](http://jsfiddle.net/bMHNv/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T03:31:23.213

这是另一种方法。

```
var allTds = $('.table > tbody > tr > td');  // Get all the TD's
$("tbody").html("<tr class='C'></tr>");      // Add the TR C Class
$(".C").html(allTds);                        // Add the TD's 
```

# c# - C# 中空泛型参数 <,> 的术语是什么？

> ID：13597138
> 
> 赞同：10
> 
> 时间：2012-11-28T03:08:50.703
> 
> 标签：c#, generics

> **可能重复：**
> [C# 语言：泛型、打开/关闭、绑定/未绑定、构造](https://stackoverflow.com/questions/6607033/c-sharp-language-generics-open-closed-bound-unbound-constructed)

在 C# 中使用反射做一些事情时，我注意到某些类型具有类型定义，例如

```
Foo<,> 
```

这个符号的官方术语是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T03:13:56.640

Type names which are missing generic parameters such as `List<>` are referred to as unbound generic types. [This question](https://stackoverflow.com/questions/6607033/c-sharp-language-generics-open-closed-bound-unbound-constructed) has a good summary of unbound generic types as well as some related terminology.

Depending on what context you are describing these types, some other terminology may be used. The C# specification uses the term "unbound generic type" to refer to something like `T<>`. The .Net framework seems to prefer the terms "generic type definition" (as [dasblinkenlight](https://stackoverflow.com/a/13597178/124538) pointed out, see also [`Type.GetGenericTypeDefinition()`](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx)) or "open generic type" (see [this](http://msdn.microsoft.com/en-us/library/ms172334.aspx) article).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T03:13:01.353

This is a type that represents a *generic type definition*:

```
 var genType = typeof(Foo<int,int>);
 var genTypeDef = genType.GetGenericTypeDefinition(); // Returns typeof(Foo<,>) 
```

# mysql - 如何改变sql上select语句的结果

> ID：13597141
> 
> 赞同：1
> 
> 时间：2012-11-28T03:08:53.663
> 
> 标签：mysql, sql

```
SELECT        tbl_varsity_2.idnumber AS IDNUMBER, CONCAT(tbl_varsity_2.firstname, ' ', tbl_varsity_2.middlename, '. ', tbl_varsity_2.lastname) AS NAME, 
                         COALESCE(tbl_attendance_2.login, { d '0000-00-00 00:00:00' }) AS LOGIN, COALESCE(tbl_attendance_2.logout, { d '0000-00-00 00:00:00' }) AS LOGOUT, 
                         tbl_attendance_2.totaltime AS TOTALTIME, tbl_varsity_2.sport AS SPORT FROM            tbl_varsity tbl_varsity_2 LEFT JOIN
                         tbl_attendance tbl_attendance_2 ON tbl_varsity_2.idnumber = tbl_attendance_2.idnumber WHERE (tbl_varsity_2.status = 'active') AND(tbl_varsity_2.idnumber != ALL (SELECT tbl_varsity_5.idnumber FROM tbl_varsity tbl_varsity_5  INNER JOIN tbl_attendance tbl_attendance_5 ON tbl_varsity_5.idnumber=tbl_attendance_5.idnumber WHERE (tbl_attendance_5.login BETWEEN '2012-11-23 00:00:00' AND '2012-11-25 00:00:00') AND (tbl_varsity_5.status='active'))) 
```

结果是 10169060 Shee-Ann G. Dela Cruz `2012-11-27 09:07:53 2012-11-27 14:08:03` <*我想将此值更改为 [0000-00-00 00:00:00]>* 乒乓球女子 123456 Kevin S. `0000-00-00 00:00:00 0000-00-00 00:00:00` Juanico 羽毛球男子 12692070 Charie May C. Cudiamat 0000-00 -00 00:00:00 0000-00-00 00:00:00 女篮

这样所有的值都是 0000-00-00 00:00:00

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:09:22.160

if you want the `0000-00-00 00:00:00` value to be displayed on all records (since you didn't specify any condition), just use it on your select statement:

```
SELECT tbl_varsity_2.idnumber AS IDNUMBER
    , CONCAT(tbl_varsity_2.firstname, ' ', tbl_varsity_2.middlename, '. ', tbl_varsity_2.lastname) AS NAME
    /*, COALESCE(tbl_attendance_2.login, { d '0000-00-00 00:00:00' }) AS LOGIN
    , COALESCE(tbl_attendance_2.logout, { d '0000-00-00 00:00:00' }) AS LOGOUT*/
    , '0000-00-00 00:00:00' AS LOGIN
    , '0000-00-00 00:00:00' AS LOGOUT
    , tbl_attendance_2.totaltime AS TOTALTIME
    , tbl_varsity_2.sport AS SPORT 
    FROM tbl_varsity tbl_varsity_2 
    LEFT JOIN tbl_attendance tbl_attendance_2 ON tbl_varsity_2.idnumber = tbl_attendance_2.idnumber 
    WHERE (tbl_varsity_2.status = 'active') 
        AND (tbl_varsity_2.idnumber != ALL (
                SELECT tbl_varsity_5.idnumber 
                    FROM tbl_varsity tbl_varsity_5  
                    INNER JOIN tbl_attendance tbl_attendance_5 ON tbl_varsity_5.idnumber=tbl_attendance_5.idnumber 
                    WHERE (tbl_attendance_5.login BETWEEN '2012-11-23 00:00:00' AND '2012-11-25 00:00:00') 
                        AND (tbl_varsity_5.status='active')
                )
            ) 
```

# three.js - 指定景深的范围（MeshDepthMaterial 范围？）

> ID：13597144
> 
> 赞同：3
> 
> 时间：2012-11-28T03:09:15.760
> 
> 标签：three.js

我已经调整了这个后处理示例[http://mrdoob.github.com/three.js/examples/webgl_postprocessing_dof.html](http://mrdoob.github.com/three.js/examples/webgl_postprocessing_dof.html)以应用景深/散景效果。如何指定焦点范围（或任何可以调用的范围）？

如果相机远平面为 10000，而模型尺寸为 10，则无法聚焦到模型的各个部分 - 因为它试图从 1-10000（近相机到远相机）而不是 1-10 聚焦（在相机和我的模型背面之间），实际感兴趣的区域。

在我意识到将相机远平面设置得尽可能低（与场景大小大致相同）之后，它确实工作正常，因此可以在实际模型所在的位置调整焦点。

现在我不能再做相机远平面的技巧了，因为我添加了一个天空盒，所以相机需要让它的远平面与模型尺寸有很大的关系。这会破坏景深；我可以聚焦很近或很远，但整个模型要么完全模糊，要么根本不模糊，因为可调节距离太大（一直到天空盒）。

如果我知道我想要关注的领域，我如何在我的代码中指定它？

这是我的设置代码：

```
dof_material_depth = new THREE.MeshDepthMaterial();
dof_scene = new THREE.Scene();

dof_camera = new THREE.OrthographicCamera(SCREEN_WIDTH / - 2, SCREEN_WIDTH / 2,  SCREEN_HEIGHT / 2, SCREEN_HEIGHT / - 2, -10000, 10000 );
dof_camera.position.z = 100;

dof_scene.add( dof_camera );

var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };
dof_rtTextureDepth = new THREE.WebGLRenderTarget(SCREEN_WIDTH, SCREEN_HEIGHT, pars );
dof_rtTextureColor = new THREE.WebGLRenderTarget(SCREEN_WIDTH, SCREEN_HEIGHT, pars );

dof_bokeh_shader = THREE.BokehShader;

dof_bokeh_uniforms = THREE.UniformsUtils.clone(dof_bokeh_shader.uniforms );
dof_bokeh_uniforms[ "tColor" ].value = dof_rtTextureColor;
dof_bokeh_uniforms[ "tDepth" ].value = dof_rtTextureDepth;
dof_bokeh_uniforms[ "focus" ].value = 1.1;
dof_bokeh_uniforms[ "aspect" ].value = SCREEN_WIDTH / SCREEN_HEIGHT;

dof_materialBokeh = new THREE.ShaderMaterial( {
  uniforms: dof_bokeh_uniforms,
  vertexShader: dof_bokeh_shader.vertexShader,
  fragmentShader: dof_bokeh_shader.fragmentShader
 });

 dof_quad = new THREE.Mesh( new THREE.PlaneGeometry(SCREEN_WIDTH, SCREEN_HEIGHT), dof_materialBokeh );

dof_quad.position.z = -500;
dof_scene.add(dof_quad ); 
```

这里是渲染部分：

```
renderer.render(scene, camera, dof_rtTextureColor, true );

scene.overrideMaterial = dof_material_depth;
renderer.render(scene, camera, dof_rtTextureDepth, true );

dof_scene.overrideMaterial = null;
render(dof_scene, dof_camera );

var delta = 0.01;
composerScene.render( delta); 
```

编辑：

通过在渲染深度材质之前为相机设置一个低远平面，然后在渲染合成之前恢复正常，我确实设法获得了预期的结果：

```
renderer.render(scene, camera, dof_rtTextureColor, true );

var oldfar = camera.far; // this goes to skybox
camera.far = scenesize; // this goes to just behind the model

scene.overrideMaterial = dof_material_depth;
renderer.render(scene, camera, dof_rtTextureDepth, true );

camera.far = oldfar;

dof_scene.overrideMaterial = null;
render(dof_scene, dof_camera );

var delta = 0.01;
composerScene.render( delta); 
```

这很完美。不过，我会留下这个问题，因为我对 WebGLL / 3D 编程很陌生，想学习，并且想知道是否可以在着色器/材质设置阶段做到这一点。

# c++ - C++ win32 应用程序的单元测试

> ID：13597146
> 
> 赞同：0
> 
> 时间：2012-11-28T03:09:19.047
> 
> 标签：c++, visual-studio-2010, unit-testing

我必须为在 Visual Studio 2010 上开发的 C++ win32 控制台应用程序编写单元测试。

*   以前我通过添加对测试项目的取消引用为 C++ DLL 编写了一些单元测试。
*   但如您所知，无法引用 win32 exe 文件来测试项目。

那么如何在测试项目中使用“我的项目中的方法”呢？我厌倦了添加整个项目作为参考。但不是成功。请一些指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:32:20.330

您需要创建新项目并在那里添加您计划测试的代码的源文件。这意味着对于您的测试，您将只有包含您的开发和测试代码的可执行文件。

其他方式（不太推荐）是将测试 DLL 注入进程并从该 dll 内部寻找目标代码的入口点。

# java - Intent.createChooser 未创建完整列表

> ID：13597149
> 
> 赞同：2
> 
> 时间：2012-11-28T03:09:44.280
> 
> 标签：java, android, messaging

在创建了一个小型 android 应用程序之后，我有一个文本字段，我想在其中共享文本。一切正常，直到导致它共享的意图。我已经完全按照培训页面上的方式进行了设置：

[http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)

像这样：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.send_to)); 
```

我完全使用他们的代码进行调试，但是当我按下按钮时，当我有更多应该能够接收的应用程序时，我只会得到 4 个应用程序的列表（AndFTP、蓝牙、Drive 和 Facebook）数据（例如 Twitter、消息、Gmail 等） 我该怎么办？

**- 编辑 -**

我忘了说我的设备是Droid DNA，因为我觉得这个问题可能与HTC sense有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T01:42:54.550

旧的，但对我来说是一个愚蠢的错误，没有完全理解 UI

# bash - 将 Chef 配方转换为一系列 Bash 命令？

> ID：13597156
> 
> 赞同：1
> 
> 时间：2012-11-28T03:10:28.717
> 
> 标签：bash, chef-infra

通常，人们想要将 Bash 脚本转换为 Chef。但有时（比如，现在）你需要做相反的事情。是否有一种自动方法来获取在给定配置上为给定 Chef 食谱运行的命令列表？

我并不想最终得到具有厨师食谱全部功能的东西。我想以一小组命令结束，这些命令可以在此特定环境中重现此特定安装。（在这种情况下，原因是我需要分离出 'sudo' 命令并让它们由其他人运行。我确实在可以运行 Chef 以执行此任务的机器上具有 sudo 访问权限。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:29:56.967

我怀疑你是否能做到这一点，即使你能做到，也可能比在 Chef 中实现你需要的工作更多。

例如，即使是像创建配置文件这样简单的事情也在 Chef 中作为 ruby​​ 代码实现；你需要想办法把它变成`echo "…" > /etc/whatever.com`. 为*所有*资源这样做将是一项重大任务。

在我看来，您实际上应该做的是修改您用来以不同用户身份运行命令的任何 Chef 食谱。

类似`template`和`file`的事情非常简单：文件将以 root 身份创建，然后`chown`-ed 给正确的用户。只需指定用户`execute`即可将资源（运行命令）配置为运行命令：`su`

```
execute "something" do
  command "whoami"
  user "nobody"
end 
```

您可能需要一些时间才能弄清楚，但是一旦掌握了窍门，就很容易了；比转换为 bash 容易得多。

# javascript - 从点获取DOM文本节点？

> ID：13597157
> 
> 赞同：14
> 
> 时间：2012-11-28T03:10:30.320
> 
> 标签：javascript, dom

就像我可以用`document.elementFromPoint`or从一个点获取一个元素一样`document.getElementFromPoint`，如果该点位于一个文本节点上，是否有可能以某种方式获取一个文本节点？我想如果至少我能得到文本节点的位置和大小，我就可以找出其中哪些包含该点。但是 DOM 节点没有位置属性。有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-09T17:28:31.233

这是一个适用于所有当前浏览器的实现： [https ://github.com/nuxodin/q1/blob/master/q1.dom.js](https://github.com/nuxodin/q1/blob/master/q1.dom.js)

```
document.betaNodeFromPoint = function(x, y){
    var el = document.elementFromPoint(x, y);
    var nodes = el.childNodes;
    for ( var i = 0, n; n = nodes[i++];) {
        if (n.nodeType === 3) {
            var r = document.createRange();
            r.selectNode(n);
            var rects = r.getClientRects();
            for ( var j = 0, rect; rect = rects[j++];) {
                if (x > rect.left && x < rect.right && y > rect.top && y < rect.bottom) {
                    return n;
                }
            }
        }
    }
    return el;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-02T12:55:17.577

对于 Firefox，您应该使用`document.caretPositionFromPoint`

这是一个 greap 演示：[https ://developer.mozilla.org/en-US/docs/Web/API/document.caretPositionFromPoint](https://developer.mozilla.org/en-US/docs/Web/API/document.caretPositionFromPoint)

对于 Chrome 和 Edge，请尝试`document.caretRangeFromPoint(x,y)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:37:57.323

考虑到这个文件（[小提琴](http://jsfiddle.net/vFK9F/1/)）：

```
<html>
<body>
    some text here 
    <p id="para1">lalala</p> 
    bla bla
</body>
</html>​ 
```

而这段代码：

```
$(document).on('click', function(evt) {
    var elem = document.elementFromPoint(evt.clientX, evt.clientY);
    console.log(elem);
}); 
```

当您单击`<p>`标签内的任意位置时，会记录标签元素本身。但是，当单击周围的文本时，`<body>`会返回 ，因为文本片段不被视为元素。

**结论**

这是不可能完成你想要的`elementFromPoint()`，因为文本片段不接收点击事件，我认为这根本不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T03:18:05.247

您可以使用`element.nodeName`它来查看它是否是文本节点，然后`element.nodeValue`查看它的值。

# sockets - 套接字程序设置

> ID：13597158
> 
> 赞同：0
> 
> 时间：2012-11-28T03:10:35.060
> 
> 标签：sockets, embedded-linux

我正在编写我的第一个套接字程序以将我的主机连接到在其他 PC 上运行的服务器。我指的是以下链接，但没有明白这一行的含义。

[http://www.thegeekstuff.com/2011/12/c-socket-programming/](http://www.thegeekstuff.com/2011/12/c-socket-programming/)

> 调用函数“listen()”，第二个参数为“10”，指定服务器将为此侦听套接字排队的最大客户端连接数。

意思是说它会监听 10 次新的连接请求。听时实际发生了什么:?:

一旦某些客户端正确连接到套接字，我们将进入while循环如果没有客户端请求在while的第二个循环中连接到套接字，则在while循环内部确实接受块：？：

当我们在 while 循环中时，listen() 系统调用仍在工作或终止:?:

还有什么时候我们会退出while循环:?:

请论坛上的人可以帮助我理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:01:49.140

该`listen`调用的作用是告诉系统它应该用于新连接的队列大小。此队列仅用于您尚未接受的连接，因此它不是您将拥有的总连接数。

除了设置传入连接队列的大小外，它还在套接字上设置一个标志，表明它是一个被动侦听套接字。

所做的事情`listen`是在套接字上设置的，因此只要套接字打开队列并且标志有效。

# ios - 我们仍然可以使用 xcode 4.2 提交 iOS 应用程序吗？

> ID：13597159
> 
> 赞同：2
> 
> 时间：2012-11-28T03:10:44.707
> 
> 标签：ios, xcode, xcode4, osx-snow-leopard

我在应用商店中有一个与 iOS 4.0 及更高版本兼容的应用。我在雪豹 10.6.8 上使用 xcode 4.2 构建了应用程序现在我想对我的应用程序进行更新。我可以使用 xcode 4.2 提交应用程序吗？还是我必须升级到山狮并下载 xcode 4.4.1（我希望我的应用程序仍然与 iOS 4.0 及更高版本兼容）。我不需要 iOs 6 带来的任何额外 api，但是我可以使用 iOS 5 的云功能（这不是必需的）。那么我仍然可以使用 xcode 4.2 提交到当前的应用商店吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:15:29.437

是的，Xcode 4.2 仍可用于将应用程序提交到 App Store。我相信即使是 3.x 版本仍然可以使用，尽管过程不同。

# templates - Go lang 模板：用于构建

> ID：13597164
> 
> 赞同：9
> 
> 时间：2012-11-28T03:11:30.027
> 
> 标签：templates, go

golang http/template 有替代特性，`if`构造，但是没找到`for`构造。如何遍历切片？像这样：

```
{{for x in xs}}
  Hello, {{x.Name}}!
{{end}} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T03:13:57.873

采用`range`

```
{{range xs}}
  Hello, {{.Name}}!
{{end}} 
```

# tomcat - 以爆炸方式运行 Maven Tomcat 7

> ID：13597166
> 
> 赞同：3
> 
> 时间：2012-11-28T03:11:39.357
> 
> 标签：tomcat, maven, tomcat7, maven-plugin

如何以爆炸的方式运行Maven tomcat7？我正在尝试运行从同一上下文文件夹中读取动态文件的 Web 应用程序。

我试过用这个：

```
mvn tomcat7:run 
```

并将一些本地文件（在tomcat启动后）放入相同的上下文中，例如：`C:\Project1\target\web\yada_yada.jpg`但是当访问url时`http://localhost:8080/Project1/yada_yada.jpg`似乎找不到添加的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:54:01.950

设法从这篇文章中得到提示 [mvn tomcat7:run - 它是如何工作的？](https://stackoverflow.com/questions/7823346/mvn-tomcat7run-how-does-it-work). `mvn tomcat7:run`默认情况下`warSourceDirectory`指向*src*的点（不是*target*）。现在覆盖`warSourceDirectory`将给出一个类似的爆炸版本。

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0-beta-1</version>
    <configuration>
        <warSourceDirectory>${basedir}/target/web</warSourceDirectory>
    </configuration>
</plugin> 
```

# jsf - value not updated in bean

> ID：13597168
> 
> 赞同：2
> 
> 时间：2012-11-28T03:11:55.300
> 
> 标签：jsf

```
<h:form>
    <h:messages />
        <h:selectOneRadio value="#{bean.selectedValue}" id="selectId"
            layout="pageDirection">
            <f:selectItems value="#{bean.values}" var="value"
                itemLabel="#{value.text}" itemValue="{value}" />
        </h:selectOneRadio>
        <h:commandButton value="Press Me" >
            <f:ajax listener="#{bean.btn_action}" execute="@form"/>
        </h:commandButton>
</h:form> 
```

Below are code details.

*   Bean is backing bean in @ViewScope.
*   bean.values is list of another managed bean which is in @RequestScope.
*   Radio button value is binded to above @RequestScope managed bean in backing bean. #{bean.selectedValue}
*   selectedValue is reference to object in backing bean having getter/setter.

Issues. - When execute=@form is added to ajax tag, listener is not even called. - After execute-@form, listener is getting called **however radio button selected value is not updated in backing bean.** - When i debug getter is always called for selectedValue never the setter.

Any help will be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:29:37.217

假设这`itemValue="{value}"`只是一个粗心的错字并且您从未注意服务器日志，那么如果`#{value}`表示非标准类型并且您没有`Converter`该类型或没有`equals()`正确实现该类型的方法，则此构造将静默失败.

第一步是添加`render="@form"`到`<f:ajax>`，以便`<h:messages>`更新，这样您就不需要查看服务器日志中的转换/验证错误。

```
<f:ajax execute="@form" listener="#{bean.btn_action}" render="@form" /> 
```

第二步是根据显示的转换/验证错误解决问题。很可能您有一个转换错误*“空转换器”*，或者您可能已经有一个，但是您收到了一个验证错误*“值无效”*。

以下答案详细回答了这两个潜在问题：

*   [如何从数据库中填充 h:selectOneMenu 的选项？](https://stackoverflow.com/questions/6848970/how-to-prepopulate-a-hselectonemenu-from-a-db/6850681#6850681)
*   [在 h:selectOneMenu 中使用 JSF 转换器导致验证错误：值无效](https://stackoverflow.com/questions/10605468/using-jsf-converter-in-hselectonemenu-results-in-validation-error-value-not-va/10605832#10605832)

# c++ - c++ string += how is it implemented?

> ID：13597170
> 
> 赞同：0
> 
> 时间：2012-11-28T03:12:15.817
> 
> 标签：c++, string

I am just curious about the implementation of c++ string +=.

Is there any performance penalty for this? Which one is supposed to be faster?

```
String a = "xxx";
a += "(" + "abcd" + ")" 
```

or

```
String a = "xxx";
a.append("(");
a.append("abcd");
a.append(")"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:59:18.173

鉴于它们在标准中具有逐字相同的规范，很难设想一个合理的实现，其中它们的运行时成本会有所不同：

> `21.4.6 basic_string modiﬁers [string.modiﬁers]`
> 
> `21.4.6.1 basic_string::operator+= [string::op+=]`
> 
> `basic_string& operator+=(const basic_string& str);`
> 
> 1 效果：**通话`append(str.data, str.size()).`**
> 
> 2 回报：`*this`
> 
> `...`
> 
> `21.4.6.2 basic_string::append [string::append]`
> 
> `basic_string& append(const basic_string& str);`
> 
> 1 效果：**通话`append(str.data(), str.size()).`**
> 
> 2 回报：`*this.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:18:17.820

`+=`如果操作员不是通过调用来实现的，我会感到非常惊讶`append`。

事实上，[SGI 的文档](http://www.sgi.com/tech/stl/basic_string.html)表明`basic_string`：

> `basic_string& operator+=(const basic_string& s)` 相当于`append(s)`。

此外，[代码](http://www.sgi.com/tech/stl/string)如下：

```
basic_string& operator+=(const basic_string& __s) { return append(__s); } 
```

[http://www.sgi.com/tech/stl/string](http://www.sgi.com/tech/stl/string)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:19:53.700

它们之间没有区别，实际上+=运算符的实现只是调用append。我从 STL 代码中读取它。

# git - Git总是在没有快进的情况下合并，除了拉动时？

> ID：13597171
> 
> 赞同：10
> 
> 时间：2012-11-28T03:12:20.013
> 
> 标签：git, version-control, github, git-config

有没有办法让 git 总是在没有快进的情况下合并，除了拉动时？

在一个不错的 git-flow 之后，我喜欢保留我的分支历史记录（以后更容易删除功能等），所以我将我的配置设置为在合并时**从不快进，如下所示：**

```
git config --global merge.ff false 
```

但是，每当我从远程更新我当前的分支/拉取时，它都会创建一个合并提交......这真的很恶心，特别是对于在*GitHub 上*分叉其他项目时。

有没有办法`git pull` **总是**快进？不幸的是，我尝试这样做：

```
git pull --ff-only upstream master 
```

...只是看着它吐出一个错误：

```
fatal: You cannot combine --no-ff with --ff-only. 
```

我真的厌倦了看到这个：

![毛：一](../Images/57a2ea57d7b8d39f02e57e76a7c575d3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T04:54:34.830

你可以试试这个：

```
git pull --rebase upstream master 
```

这会将您的提交重新设置在上游提交之上。

这是它的作用的说明。

您的本地存储库：

```
* bbbbbbb (HEAD, master) My changes.
* aaaaaaa Initial commit. 
```

上游仓库：

```
* ccccccc (upstream/master) Their changes.
* aaaaaaa Initial commit. 
```

之后`git pull --rebase upstream master`：

```
* bbbbbbb (HEAD, master) My changes.
* ccccccc (upstream/master) Their changes.
* aaaaaaa Initial commit. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:16:02.187

我建议你在一个单独的分支中工作，并继续重新定位到远程分支而不是合并。

改变：

```
$ git checkout -b my-topic-branch
$ (work work work)
$ git commit
$ git checkout master
$ git pull origin master
$ git merge my-topic-branch 
```

经过：

```
$ git checkout -b my-topic-branch
$ (work work work)
$ git commit
$ git fetch origin
$ git rebase origin/master
$ git checkout master
$ git merge my-topic-branch 
```

如果这种配置组合不起作用，我认为你只剩下这个了。

# ios - 在设备上安装 TestFlight 本身

> ID：13597180
> 
> 赞同：2
> 
> 时间：2012-11-28T03:13:07.423
> 
> 标签：ios, testflight

当用户将他们的第一台设备添加到 TestFlight 并创建他们的帐户时，它会安装一个应用程序，该应用程序是**TestFlight**网站的移动版本的包装器。这为他们提供了一种方便的方式来安装开发人员发送给他们的任何构建，而无需通过他们的电子邮件。

当他们在另一台设备上再次执行该过程时，它不会安装应用程序 - 仅安装 TestFlight 无线配置文件。

他们如何在第二台设备上获取该应用程序，或者如果他们无意中从第一台设备中删除了该应用程序？他们可以将页面的移动 Safari 快捷方式添加到他们的主屏幕，但这与在移动 Safari 中打开页面并不完全相同。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T08:23:15.757

*由于已接受答案中的链接不再有效，我给你一个额外的答案，其中包含从（目前）[正确链接中无耻窃取的说明。](http://help.testflightapp.com/customer/portal/articles/829655-why-is-the-testflight-icon-on-my-device-white-) （希望即使链接失效，这个答案也会很有用。）*

**有时 Mobile Safari 会导致网页剪辑问题，需要重新创建。以下是如何做到这一点：**

1.  从您的设备中删除 TestFlight 网络剪辑。
2.  删除 TestFlight WebClip 配置文件。（设置 > 常规 > 个人资料）
3.  清除 Safari 的历史记录、Cookie 和数据。
4.  重新启动您的设备。
5.  在 Mobile Safari 上登录[https://testflightapp.com/m/login 。](https://testflightapp.com/m/login)
6.  点击连接设备。
7.  点击安装配置文件页面上的安装，然后按照提示安装配置文件和网络剪辑。
8.  看到已安装的配置文件后，点击完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:26:03.070

尝试按照[TestFlight 中的这些说明进行操作。](http://help.testflightapp.com/customer/portal/articles/829655-why-is-the-testflight-icon-on-my-device-white-)

# ios - Playing music while recording with no re-routing

> ID：13597184
> 
> 赞同：0
> 
> 时间：2012-11-28T03:13:13.457
> 
> 标签：ios, audio, core-audio, audiosession

I'm coding an app and I need to not interrupt any music the user is playing while the app is recording through the mic.

However, if I use kAudioSessionProperty_OverrideAudioRoute with kAudioSessionOverrideAudioRoute_Speaker for my audio session properties, audio is re-routed to the external speaker even if the headphones are plugged in. If I use kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, background music is not permitted to play even if I'm using kAudioSessionProperty_OverrideCategoryMixWithOthers.

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:29:43.437

我找到了答案。

不要这样做：

```
AudioSessionSetProperty( kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof( trueValue ), &trueValue );
AudioSessionSetProperty( kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(trueValue), &trueValue); 
```

相反，首先设置默认扬声器属性：

```
AudioSessionSetProperty( kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(trueValue), &trueValue);
AudioSessionSetProperty( kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof( trueValue ), &trueValue ); 
```

设置默认路径覆盖似乎会被吹走，允许与其他应用程序混合。所以只需设置允许与其他应用程序混合。

# codeigniter - 模型加载失败

> ID：13597188
> 
> 赞同：0
> 
> 时间：2012-11-28T03:13:47.030
> 
> 标签：codeigniter

我的 Code Ignitor 出现问题，因为我加载模型时代码失败，没有留下任何痕迹。

我正在尝试像这样加载我的模型

```
<!--CONTROLLER-->
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Concierge extends Public_Controller {

public function submit()
{
    $this->load->model('Concierge_model');
} 
```

我的模型设置如下：

```
<!--MODEL-->
<?php

class Concierge_model extends CI_Model {

public function __construct()
{
    parent::__construct();
}

function saveRequest($action, $owner)
{
    $query = $this->db->query('select * from table');
    return $query;
} 
```

有谁看到可能是导致我的问题的问题？我正在使用 CodeIgnitor 2.1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:30:51.277

假设 Public_Controller 是自定义的，请确保该类扩展 CI_Controller 并确保在那里调用父级的构造函数。

```
class Public_Controller extends CI_Controller {
  public function __construct() {
    parent::__construct();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:44:56.987

我不知道问题出在哪里，我删除了模型、视图和控制器并重新创建了它们。这解决了这个问题，但遗憾的是没有阐明导致它的原因。

# c# - Retrieve data from one form and use it in another form

> ID：13597194
> 
> 赞同：0
> 
> 时间：2012-11-28T03:14:01.573
> 
> 标签：c#, windows, visual-studio, forms

Alrighty. Here is my problem. I have just about everything done. I just need to take input from the form, and then use it in an algorithm in the second form. I have everything else written up, I just need to know how to connect the 2 so I can write up the last of the code. I've done some research, but none of it seems to go with what I'm trying to do.

Here is the main form.

```
namespace Airplanes
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void radioButton2_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void Arrival_Click(object sender, EventArgs e)
        {
            ArrivalForm newForm;
            newForm = new ArrivalForm();
            newForm.ShowDialog();

        }

        private void Fuel_Click(object sender, EventArgs e)
        {
            Fuelform newForm2;
            newForm2 = new Fuelform();
            newForm2.ShowDialog();

        }

        private void Status_Click(object sender, EventArgs e)
        {

        }

        private void Items_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void NameBox_TextChanged(object sender, EventArgs e)
        {

        }

        private void FuelBox_TextChanged(object sender, EventArgs e)
        {

        }

        private void GateBox_TextChanged(object sender, EventArgs e)
        {

        }

        private void Singlebutton_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void PrivateButton_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void CommercialButton_CheckedChanged(object sender, EventArgs e)
        {

        }

    }
} 
```

And here is the form I'm trying to connect to the main form.

```
namespace Airplanes
{
    public partial class Fuelform : Form
    {
        public Fuelform()
        {
            InitializeComponent();
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void Fuelform_Load(object sender, EventArgs e)
        {

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

Thanks in advance for any answers.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T03:23:11.340

有几种方法......最简单的可能是通过新表单的构造函数传递数据。

```
FuelForm newForm2 = new FuelForm(myData); 
```

然后更改 FuelForm 的构造函数：

```
public FuelForm(int myData)  // or whatever data type you need
{
    // Deal with myData
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:27:44.263

以源代码形式

```
 destinationForm df = new destinationForm ();
            df .myValue= "My Value";
            df .ShowDialog(); 
```

在目的地表格中

```
 private string destVariable;

     public string myValue
            {
                get { return destVariable; }
                set { destVariable= value; }
            } 
```

那么您可以在目的地形式的任何地方使用 destVariable

# sharepoint - SharePoint 2010 function

> ID：13597195
> 
> 赞同：0
> 
> 时间：2012-11-28T03:14:05.210
> 
> 标签：sharepoint, sharepoint-2010

I am new to SharePoint 2010 and I use it for managing our dept. documents. I created some document libraries and a folder (gather the history docs by time) to manage the documents. Recently I had a request from my manager that he wanted to view the newest documents from those document libraries in a simple page. The total requests have to include the info of date uploaded, the user who uploaded it, frequency of changes etc. I am using a workflow to resolve it, but it is hard to me now.

Does anyone have an idea on how to solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:25:12.783

我可能理解错了，但您可以这样做来创建一个 webpart 页面，以查看每个列表的最新文档

*   创建一个引用您的 DocLib 的 List WebPart
*   创建一个按创建或编辑日期升序排列的 Listview

以下是有关 ListViews 的更多信息：http: [//www.informit.com/articles/article.aspx? p=1622404&seqNum=14](http://www.informit.com/articles/article.aspx?p=1622404&seqNum=14)

我希望这可以帮助你。

# octave - GNU octave's mean function

> ID：13597197
> 
> 赞同：1
> 
> 时间：2012-11-28T03:14:49.373
> 
> 标签：octave, mean

K guys: What is the mean of {1, 2, 3} 2 right? Apparently not:

```
octave:50> B = [1, 2, 3]
B =

   1   2   3

octave:51> mean(B)
ans =

   0.42478
   0.55752
   0.73451

octave:52> B = [1;2;3]
B =

   1
   2
   3

octave:53> mean(B)
ans =

   0.42478
   0.55752
   0.73451 
```

Do I just not know what a mean is?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:39:49.990

您可能使用的`mean`函数与 Octave 中定义的默认函数不同。我已经尝试了您的代码并得到`2`了答案。要确定这一点，请在八度提示符处输入以下命令

```
which mean 
```

这是我的输出

```
`mean' is a function from the file /usr/share/octave/3.4.3/m/statistics/base/mean.m 
```

如果我`mean`通过输入以下代码定义

```
function retval = mean (v)
   retval = v / e;
endfunction 
```

`mean(B)`我什么时候得到不同的答案`B = [1, 2, 3]`

```
ans =

   0.36788   0.73576   1.10364 
```

如果我输入命令`which mean`，我现在得到这个

```
`mean' is a command-line function 
```

# coding-style - Inverted if-statements

> ID：13597199
> 
> 赞同：7
> 
> 时间：2012-11-28T03:14:54.897
> 
> 标签：coding-style

Is there a particular reason to favor stepping into multiple blocks vs. short cutting? For instance, take the following two functions in which multiple conditions are evaluated. The first example is stepping into each block, while the second example short cuts. The examples are in Python, but the question is not restricted to Python. It is overly trivialized as well.

```
def some_function():
    if some_condition:
        if some_other_condition:
            do_something() 
```

vs.

```
def some_function():
    if not some_condition:
        return
    it not some_other_condition:
        return
    do_something() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T03:43:21.823

偏爱第二个使代码更易于阅读。在您的示例中并不那么明显，但请考虑：

```
def some_function()
    if not some_condition:
       return 1
    if not some_other_condition:
       return 2
    do_something()
    return 0 
```

对比

```
def some_function():
    if some_condition:
       if some_other_condition:
           do_something()
           return 0
       else:
           return 2
    else:
        return 1 
```

即使函数没有“失败”条件的返回值，使用反向 ifs 方式编写函数也可以更轻松地放置断点和调试。在您的原始示例中，如果您想知道您的代码是否因为 some_condition 或 some_other_condition 失败而未运行，您将在哪里放置断点？

# scada - ScadaBR 或 Mango（一个 scada 软件）

> ID：13597200
> 
> 赞同：0
> 
> 时间：2012-11-28T03:14:58.543
> 
> 标签：scada

Mango是一个scada软件。现在我想开发它的图形视图并在它上有一个突破。我真的很困惑下一步该做什么。那么有人可以给我一些想法吗？我将不胜感激。。

感谢您提供的任何帮助！此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:00:06.137

ScadaBR 是 Mango M2M 的一个分支，它以前是一个开源项目。自 1.12 版以来，Mango 已更改其许可证。

两种 SCADA 都很棒，功能齐全，有很多协议，并且易于修改（提供论坛和文档）。但**ScadaBR 将永远是一个 OS 项目**。它有一个 SOAP API，最近还有一个 REST API。ScadaBR 是一个巴西项目，尚未为其网站或 wiki 提供英文翻译。只有英语人士的论坛。我建议使用带有自动翻译功能的 Chrome，它应该可以解决问题 =]

**芒果M2M**

[http://mango.serotoninsoftware.com/forum](http://mango.serotoninsoftware.com/forum)

**斯卡达BR**

[http://www.scadabr.org.br](http://www.scadabr.org.br)

问候

# git - git add 不会拾取添加到现有目录的新文件

> ID：13597201
> 
> 赞同：2
> 
> 时间：2012-11-28T03:14:59.470
> 
> 标签：git

我在本地存储库中的现有目录中添加了一些新文件（基本上我对另一个目录中的一些文件进行了 cp）但是，当我执行 git add 时。并运行 git status 我看到以下消息：

没有什么可提交的（工作目录干净）

想知道添加这些文件需要做什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T07:52:40.297

无论路径如何，这都应该有效

```
git add -A 
```

# java - 为什么引用类型可以与java中的对象类型不同

> ID：13597203
> 
> 赞同：0
> 
> 时间：2012-11-28T03:15:07.970
> 
> 标签：java

```
class Animal {

}

class Horse extends Animal {

}

public class Test {
    public static void main(){
        Animal a = new Horse();//mark1
    }
}

Animal ah = new Horse();// reference type is Animal and object is Horse 
```

下面我不能完全理解： **Animal ah = new Horse();// 引用类型是 Animal 对象是 Horse**
我总是保持引用类型与对象相同
我想知道使用*not-same*的原因引用类型。请告诉我一些使用它更合适的条件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:28:59.070

这适用于多种场合，一个简单的例子是如果你需要一组动物：

```
Animal array[] = new Animal[3];
array[0] = new Horse();
array[1] = new Cow();
array[2] = new Animal(); 
```

您可以定义一些通用方法，或者为每个扩展的类指定它们。

```
public class Cow extends Animal {
    public void sound() {
        System.out.println("MOO");
    }
}

public class Horse extends Animal {
    public void sound() {
        System.out.println("HEEEHREHE");
    }
} 
```

在 Animal 中你不知道该做什么，所以你可以使用类似的东西

```
public class Animal {
    public void sound() {
        System.out.println(".");
    }
} 
```

问题是，如果你遍历数组中的每一个动物，它会使用为它定义的方法。

```
for (int i = 0; i < 3; i++) {
    array[i].sound();
} 
```

会输出：

```
HEEEHREHE
MOO
. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:45:54.843

除了在程序执行期间能够让相同的变量引用不同类的对象外，通常这样做是为了保持编码选项的开放。

经典案例是：

```
List<String> myList = new ArrayList<String>(); 
```

编译器会拒绝例如 myList.ensureCapacity(100) 因为 ensureCapacity 不是 List 方法。myList 只能使用 List 方法。如果在程序运行并被测量之后，结果证明使用 LinkedList 会使程序更快，那么只有构造函数调用会发生变化。没有对 myList 做任何对任何 List 都不起作用的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:22:36.830

因此，您可以使用任何动物或马作为“ab”类型。在这种特殊情况下，通过 Animal 类型引用对象的用处在于，在稍后阶段，当你想让 ah 指向其他一些动物对象时，比如 Dog（实现 Animal 接口），那么在其他代码位置你不会需要在代码中的其他地方进行更改，它仍然是 Animal 类型。因此，通过接口类型引用对象引用可以自由地动态更改实际的实现实例，并且它也对外界隐藏了实现类。

# haskell - 如何安装 unittyped 和 base-4.6.0.0？

> ID：13597208
> 
> 赞同：1
> 
> 时间：2012-11-28T03:15:53.003
> 
> 标签：haskell, cabal, haskell-platform

我已经安装了 Haskell Platform 2012.4.0.0，我想试试 unittyped 包。

当我尝试安装它时，`cabal-dev -s some-dir install unittyped`我收到了错误：

```
$ cabal-dev -s some-dir install unittyped
Resolving dependencies...
cabal: Could not resolve dependencies:
trying: unittyped-0.1 (user goal)
next goal: base (dependency of unittyped-0.1)
rejecting: base-3.0.3.2, 3.0.3.1 (global constraint requires installed
instance)
rejecting: base-4.5.1.0/installed-724... (conflict: unittyped => base>=4.6 && <4.7)
rejecting: base-4.6.0.0, 4.5.1.0, 4.5.0.0, 4.4.1.0, 4.4.0.0, 4.3.1.0, 4.3.0.0,
4.2.0.2, 4.2.0.1, 4.2.0.0, 4.1.0.0, 4.0.0.0 (global constraint requires installed instance) 
```

并`cabal-dev -s some-dir install base-4.6.0.0`产生类似的消息。

有没有办法克服这些错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:28:27.033

该[`unittyped`](http://hackage.haskell.org/package/unittyped)软件包需要 GHC >= 7.6，它使用`DataKinds`（嗯，`DataKinds`首次出现在 7.4 中，但实现尚未完成；也许`unittyped`也适用于 7.4）并显式依赖`base >= 4.6 && < 4.7`.

如上所述，它*也可能*与 ghc-7.4 一起使用，以测试

```
$ cabal unpack unittyped
$ cd unittyped-0.1
-- edit the .cabal file to allow base-4.5.*
-- and bump the version, so that cabal doesn't think it cannot work with base-4.5.*
$ cabal install 
```

这可能会也可能不会。

安全的选择是安装 ghc-7.6.1，但这意味着放弃 Haskell 平台。

# android - 在后退按钮android上显示空白屏幕

> ID：13597215
> 
> 赞同：0
> 
> 时间：2012-11-28T03:17:18.400
> 
> 标签：android

用户在身份验证步骤中单击设备的后退按钮后，如何避免显示空白屏幕？

*[已编辑]*

流程是要求用户通过 twitter 进行身份验证。如果用户到达该步骤，则可能是用户未进行身份验证并按下设备的后退按钮并返回应用程序。在该步骤，应用程序显示空白页。

```
alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                prefs = PreferenceManager.getDefaultSharedPreferences(context);
                if (MyUtils.checkIsAuthenticated(prefs)) {
                    //sending the tweet
                } else {
                    Intent i = new Intent(context,
                            GotoRequestTokenActivity.class);
                    context.startActivity(i);
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:52:40.723

您的 qsn 是来自对话框，而不是按对话框上的按钮，用户按返回键？还是在您移至已启动的活动并用户回击之后？

在第一种情况下，我想您应该检查用户是否绕过 OnResume 中的对话框。在第二种情况下，使您的对话框成为具有对话框主题的活动，并在 onclicklistener 中调用 finish()。（当您进入下一个活动时，您的对话框将关闭）

无论如何，请检查您的日志，看看您是否泄漏了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:22:11.337

您将此演示用于 twitter 集成，因为此演示打开一个登录对话框，而不是打开登录 twitter url...所以，如果您想从那里返回，您可以轻松地做到这一点..请参阅此链接...这是就像脸书对话框一样..

[https://github.com/lorensiuswlt/AndroidTwitter](https://github.com/lorensiuswlt/AndroidTwitter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:29:17.933

尝试覆盖 onBackPressed() 方法，你可以在那里做一些事情来禁用后退按钮 pr 完成你的活动或显示相关的 toast，如“取消身份验证”

# c++ - OpenGL 和 Windows 编程 C++

> ID：13597231
> 
> 赞同：0
> 
> 时间：2012-11-28T03:19:58.713
> 
> 标签：c++, windows, opengl

如果我想开始学习 OpenGL 并且暂时不关心可移植性，那么将 OpenGL 和 Windows 编程一起使用是否不明智？（我在 Windows 上开发）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:27:10.490

一点也不。如果您已经了解 Windows API/消息泵，添加 OpenGL 上下文管理位不会有太大问题。

如果您不熟悉 Windows 编程和 OpenGL，我建议您从 GLUT 或类似框架开始，这样您就可以专注于 OpenGL 位，而不必过多担心与窗口系统的交互。

# python - 如何为scrapy编写添加访问网址的规则

> ID：13597232
> 
> 赞同：3
> 
> 时间：2012-11-28T03:20:10.600
> 
> 标签：python, scrapy, web-crawler

当scrapy 关闭时，它会忘记所有的url。我想在开始时给scrapy一组已被抓取的网址。如何给 crawlspider 添加一条规则，让它知道哪些 url 被访问了？

当前功能：

```
SgmlLinkExtractor(allow=(), deny=(), allow_domains=(), deny_domains=(), restrict_xpaths(), tags=('a', 'area'), attrs=('href'), canonicalize=True, unique=True, process_value=None) 
```

只需使用 parse 告诉蜘蛛要抓取哪个 url。我怎么能告诉scrapy哪些网址不应该访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:29:58.037

当 scrapy 停止时，它会将抓取的 URLS 指纹保存在 request.seen 文件中。这是由 dedup 类完成的，该类用于抓取 url 两次，但是如果您重新启动具有相同作业目录的抓取工具，它将不会抓取已经看到的 url。如果您想控制此过程，您可以自己替换默认的 dedup 类。另一种解决方案是添加您自己的[蜘蛛中间件](http://doc.scrapy.org/en/latest/topics/spider-middleware.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T14:14:48.590

Scrapy 的 Jobs 功能允许您启动和暂停您的蜘蛛。您可以在运行之间保留有关蜘蛛的信息，并且在您重新启动时它会自动跳过重复的请求。

有关更多信息，请参见此处：[作业：暂停和恢复爬网](https://doc.scrapy.org/en/latest/topics/jobs.html)

# java - 如何在java中从目录中拖放文件

> ID：13597233
> 
> 赞同：9
> 
> 时间：2012-11-28T03:20:29.503
> 
> 标签：java, swing, file, awt, drag-and-drop

我想实现从某个目录（例如某人的硬盘驱动器）拖放文件，但不知道该怎么做。我已经阅读了 java api，但它谈到了颜色选择器和列表之间的拖放，以及如何从计算机文件系统中拖动文件并放入我的应用程序中。我尝试为拖动开始时编写 transferhandler 类和鼠标事件，但似乎没有任何效果。现在我回到只设置我的 JFileChooser 以便启用拖动但如何放下？

非常感谢任何信息或指向正确方向的信息。

```
 import javax.swing.*;

  import java.awt.BorderLayout;
 import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

import javax.swing.BorderFactory;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFileChooser;
import javax.swing.JFrame;

import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.filechooser.FileFilter;

 public class FileChooserDemo
 extends JPanel
 implements ActionListener 
  {

JLabel selectedFileLabel;
 JList selectedFilesList;
 JLabel returnCodeLabel;

 public FileChooserDemo() 
    {
 super();
 createContent();
 }

void initFrameContent() 
    {
        JPanel closePanel = new JPanel();
        add(closePanel, BorderLayout.SOUTH);
}

 private void createContent()
    {
 setLayout(new BorderLayout());

        JPanel NorthPanel = new JPanel();

     JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("File");
        JMenuItem quit = new JMenuItem("Quit");

        menuBar.add(menu);
        menu.add(quit);

        NorthPanel.add(menu,BorderLayout.NORTH);

  JPanel buttonPanel = new JPanel(new GridLayout(7,1 ));
  JButton openButton = new JButton("Open...");
  openButton.setActionCommand("OPEN");
  openButton.addActionListener(this);
 buttonPanel.add(openButton);

 JButton saveButton = new JButton("Save...");
 saveButton.setActionCommand("SAVE");
 saveButton.addActionListener(this);
 buttonPanel.add(saveButton);

  JButton delete = new JButton("Delete");
  delete.addActionListener(this);
  delete.setActionCommand("DELETE");
  buttonPanel.add(delete);

 add(buttonPanel, BorderLayout.WEST);

 // create a panel to display the selected file(s) and the return code
 JPanel displayPanel = new JPanel(new BorderLayout()); 
 selectedFileLabel = new JLabel("-");

 selectedFileLabel.setBorder(BorderFactory.createTitledBorder
 ("Selected File/Directory   "));

 displayPanel.add(selectedFileLabel, BorderLayout.NORTH);

 selectedFilesList = new JList();
 JScrollPane sp = new JScrollPane(selectedFilesList);
 sp.setBorder(BorderFactory.createTitledBorder("Selected Files "));
 MouseListener listener = new MouseAdapter()
 {
   public void mousePressed(MouseEvent me)
   {
       JComponent comp = (JComponent) me.getSource();
       TransferHandler handler = comp.getTransferHandler();
       handler.exportAsDrag(comp, me, TransferHandler.MOVE);   
   }
 };
 selectedFilesList.addMouseListener(listener);

 displayPanel.add(sp);

 returnCodeLabel = new JLabel("");
 returnCodeLabel.setBorder(BorderFactory.createTitledBorder("Return Code"));
 displayPanel.add(returnCodeLabel, BorderLayout.SOUTH);

 add(displayPanel);
}

 public void actionPerformed(ActionEvent e)
    {
          int option = 0;
 File selectedFile = null;
 File[] selectedFiles = new File[0];

 if (e.getActionCommand().equals("CLOSE"))
      {
   System.exit(0);
 }
 else if (e.getActionCommand().equals("OPEN"))
        {
     JFileChooser chooser = new JFileChooser();
        chooser.setDragEnabled(true);
        chooser.setMultiSelectionEnabled(true);
     option = chooser.showOpenDialog(this);
     selectedFiles = chooser.getSelectedFiles();
   }
 else if (e.getActionCommand().equals("SAVE"))
        {
     JFileChooser chooser = new JFileChooser();
     option = chooser.showSaveDialog(this);
     selectedFiles = chooser.getSelectedFiles();
   }

 // display the selection and return code
 if (selectedFile != null)
   selectedFileLabel.setText(selectedFile.toString());
 else
   selectedFileLabel.setText("null");
 DefaultListModel listModel = new DefaultListModel();
 for (int i =0; i < selectedFiles.length; i++)
   listModel.addElement(selectedFiles[i]);

 selectedFilesList.setModel(listModel);
 returnCodeLabel.setText(Integer.toString(option));
 }

 public static void main(String[] args) 
    {
 SwingUtilities.invokeLater
 (new Runnable()
       {
    public void run()
         {
      FileChooserDemo app = new FileChooserDemo();
      app.initFrameContent();
      JFrame frame = new JFrame("LoquetUP");
      frame.getContentPane().add(app);
         frame.setDefaultCloseOperation(3);
         frame.setSize(600,400);
         frame.setResizable(false);
         frame.setLocationRelativeTo(null);

      //frame.pack();
      frame.setVisible(true);
    }
  });
 }

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-28T04:05:26.457

This is my take on the idea. I've used the "traditional" drag and drop API in this example. It has some extra "paint" tweaks just to show off what you might be able to do.

![enter image description here](../Images/593b903f9fb9b8c98bd6efeb95facc87.png)![enter image description here](../Images/4fab26f737682f22eaa48f814d42f216.png)

This example doesn't scan folders dropped onto it, so any folder will only register as a single file, but I'm sure you can work it out

```
public class TestDragNDropFiles {

    public static void main(String[] args) {
        new TestDragNDropFiles();
    }

    public TestDragNDropFiles() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new DropPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class DropPane extends JPanel {

        private DropTarget dropTarget;
        private DropTargetHandler dropTargetHandler;
        private Point dragPoint;

        private boolean dragOver = false;
        private BufferedImage target;

        private JLabel message;

        public DropPane() {
            try {
                target = ImageIO.read(new File("target.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            setLayout(new GridBagLayout());
            message = new JLabel();
            message.setFont(message.getFont().deriveFont(Font.BOLD, 24));
            add(message);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        protected DropTarget getMyDropTarget() {
            if (dropTarget == null) {
                dropTarget = new DropTarget(this, DnDConstants.ACTION_COPY_OR_MOVE, null);
            }
            return dropTarget;
        }

        protected DropTargetHandler getDropTargetHandler() {
            if (dropTargetHandler == null) {
                dropTargetHandler = new DropTargetHandler();
            }
            return dropTargetHandler;
        }

        @Override
        public void addNotify() {
            super.addNotify();
            try {
                getMyDropTarget().addDropTargetListener(getDropTargetHandler());
            } catch (TooManyListenersException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public void removeNotify() {
            super.removeNotify();
            getMyDropTarget().removeDropTargetListener(getDropTargetHandler());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (dragOver) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setColor(new Color(0, 255, 0, 64));
                g2d.fill(new Rectangle(getWidth(), getHeight()));
                if (dragPoint != null && target != null) {
                    int x = dragPoint.x - 12;
                    int y = dragPoint.y - 12;
                    g2d.drawImage(target, x, y, this);
                }
                g2d.dispose();
            }
        }

        protected void importFiles(final List files) {
            Runnable run = new Runnable() {
                @Override
                public void run() {
                    message.setText("You dropped " + files.size() + " files");
                }
            };
            SwingUtilities.invokeLater(run);
        }

        protected class DropTargetHandler implements DropTargetListener {

            protected void processDrag(DropTargetDragEvent dtde) {
                if (dtde.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
                    dtde.acceptDrag(DnDConstants.ACTION_COPY);
                } else {
                    dtde.rejectDrag();
                }
            }

            @Override
            public void dragEnter(DropTargetDragEvent dtde) {
                processDrag(dtde);
                SwingUtilities.invokeLater(new DragUpdate(true, dtde.getLocation()));
                repaint();
            }

            @Override
            public void dragOver(DropTargetDragEvent dtde) {
                processDrag(dtde);
                SwingUtilities.invokeLater(new DragUpdate(true, dtde.getLocation()));
                repaint();
            }

            @Override
            public void dropActionChanged(DropTargetDragEvent dtde) {
            }

            @Override
            public void dragExit(DropTargetEvent dte) {
                SwingUtilities.invokeLater(new DragUpdate(false, null));
                repaint();
            }

            @Override
            public void drop(DropTargetDropEvent dtde) {

                SwingUtilities.invokeLater(new DragUpdate(false, null));

                Transferable transferable = dtde.getTransferable();
                if (dtde.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
                    dtde.acceptDrop(dtde.getDropAction());
                    try {

                        List transferData = (List) transferable.getTransferData(DataFlavor.javaFileListFlavor);
                        if (transferData != null && transferData.size() > 0) {
                            importFiles(transferData);
                            dtde.dropComplete(true);
                        }

                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                } else {
                    dtde.rejectDrop();
                }
            }
        }

        public class DragUpdate implements Runnable {

            private boolean dragOver;
            private Point dragPoint;

            public DragUpdate(boolean dragOver, Point dragPoint) {
                this.dragOver = dragOver;
                this.dragPoint = dragPoint;
            }

            @Override
            public void run() {
                DropPane.this.dragOver = dragOver;
                DropPane.this.dragPoint = dragPoint;
                DropPane.this.repaint();
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T03:29:53.767

您需要尝试拖放，并在尝试拖动文件时准确查看可用的风格。如果您在自定义 TransferHandler 中执行此操作，您会惊喜地发现 Flavor 是`DataFlavor.javaFileListFlavor`，这表明该项目可以简单地用作`List`. 试试看，你会发现它有效！

请注意查看您发布的代码，我没有看到您尝试使用 TransferHandler 的任何代码，因此很难说您在这里可能做错了什么。

**编辑 1**
您似乎正在尝试使用 MouseListener 进行拖放，我不熟悉这种用法。你能参考一个告诉你这样做的教程吗？

**编辑 2**

```
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.File;
import java.io.IOException;
import java.util.List;

import javax.swing.*;

@SuppressWarnings("serial")
public class FileDragDemo extends JPanel {
   private JList list = new JList();

   public FileDragDemo() {
      list.setDragEnabled(true);
      list.setTransferHandler(new FileListTransferHandler(list));

      add(new JScrollPane(list));
   }

   private static void createAndShowGui() {
      FileDragDemo mainPanel = new FileDragDemo();

      JFrame frame = new JFrame("FileDragDemo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class FileListTransferHandler extends TransferHandler {
   private JList list;

   public FileListTransferHandler(JList list) {
      this.list = list;
   }

   public int getSourceActions(JComponent c) {
      return COPY_OR_MOVE;
   }

   public boolean canImport(TransferSupport ts) {
      return ts.isDataFlavorSupported(DataFlavor.javaFileListFlavor);
   }

   public boolean importData(TransferSupport ts) {
      try {
         @SuppressWarnings("rawtypes")
         List data = (List) ts.getTransferable().getTransferData(
               DataFlavor.javaFileListFlavor);
         if (data.size() < 1) {
            return false;
         }

         DefaultListModel listModel = new DefaultListModel();
         for (Object item : data) {
            File file = (File) item;
            listModel.addElement(file);
         }

         list.setModel(listModel);
         return true;

      } catch (UnsupportedFlavorException e) {
         return false;
      } catch (IOException e) {
         return false;
      }
   }
} 
```

# c - c程序退出时如何创建文件？

> ID：13597234
> 
> 赞同：0
> 
> 时间：2012-11-28T03:20:29.993
> 
> 标签：c, shell, signals, signal-processing

我正在做一个任务，我在 shell 中实现 unix history 命令。在我的程序中，我为 SIGINT 编写了一个信号处理程序。当用户输入 (ctrl)(c) 时，将显示他们的历史记录。

当我的程序终止时，我需要将历史记录存储在一个文件中。有没有一种简单的方法可以检测我的程序何时退出？或者我是否需要为每种类型的信号（(ctrl)(d)、pausebreak 等）提供一个信号处理程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:24:14.410

`atexit()`可能是您要查找的内容，请参阅手册页：[man 3 atexit](http://www.kernel.org/doc/man-pages/online/pages/man3/atexit.3.html)

用法类似于：

```
#include <stdlib.h>

static void save_the_file(void)
{
    /* ... */
}

int main()
{
    atexit(save_the_file);
    return 0;
} 
```

另一种选择是使用`destructor`属性（GCC/Clang）：

```
static __attribute__((destructor)) void save_the_file(void)
{
     /* your code */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T03:25:41.983

atexit 就是这样。但是如果你也想关注 SIGKILL，你需要调用 waitpid() 的观察者进程。

# javascript - Openlayers 导出 KML 并关闭（名称）标签

> ID：13597235
> 
> 赞同：1
> 
> 时间：2012-11-28T03:20:31.757
> 
> 标签：javascript, gis, openlayers

我可以很好地使用 Openlayers 导出 KML。问题：我想知道在 Google 地球中显示时是否需要添加一些 JS 来关闭标签？

谢谢！

# objective-c - 我可以将 JSON 数据写入 iOS/Objective-C 中的文件吗？

> ID：13597237
> 
> 赞同：20
> 
> 时间：2012-11-28T03:20:33.300
> 
> 标签：objective-c, ios

我需要使用 Objective-C 将 JSON 数据写入文件。我的数据看起来像这样：

```
data = {
    "NrObjects" : "7",
    "NrScenes" : "5",
    "Scenes" : [
        { "dataType" : "label", "position" : [20, 20, 300, 300], "value" : "Hello" },
        { "dataType" : "label", "position" : [20, 60, 300, 300], "value" : "Hi There" }
    ]
} 
```

它可能比这更复杂，但我需要知道的是我是否可以使用 Obj-C 来做到这一点，即，创建这种形式的对象，将数据写入文件，然后将其读回。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-28T03:23:31.597

有一个专门为此制作的类，称为**NSJSONSerialization**。

你是这样读的：

```
NSArray* jsonResponse = [NSJSONSerialization JSONObjectWithData:theResponse
                                                        options:kNilOptions
                                                          error:&error]; 
```

并这样写：

```
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:userDetails
                                                   options:kNilOptions 
                                                     error:&error]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-26T01:34:57.420

写：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:jsonObject];
[data writeToFile:path atomically:YES]; 
```

读：

```
NSData *data = [NSData dataWithContentsOfFile:path];
NSDictionary *jsonObject = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

# c++ - GMP 比 MPIR 有什么优势吗？

> ID：13597243
> 
> 赞同：7
> 
> 时间：2012-11-28T03:21:14.927
> 
> 标签：c++, gmp

两者似乎都是不错的 bignum 库，但我不确定每个库的优缺点是什么。我知道这是一个广泛的问题，但我主要关注的是显着差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:29:27.400

MPIR 最初是 GMP 的一个分支，因此它们共享很多代码。最明显的区别是 MPIR 可以由 MS Visual Studio 编译，并具有优化的汇编语言支持。最新的 MPIR 版本 (2.6.0) 包括一个比 GMP 5.0 更快的新 FFT 乘法算法（对于我测试的大小，YMMV）。另一方面，GMP 在几乎所有 Linux 发行版上都可用。

# c++ - C++ 中的比较器和优先级队列

> ID：13597244
> 
> 赞同：1
> 
> 时间：2012-11-28T03:21:16.903
> 
> 标签：c++

> **可能重复：**
> [内部类可以访问私有变量吗？](https://stackoverflow.com/questions/486099/can-inner-classes-access-private-variables)

因此，我尝试使用优先级队列，并且在此队列的上下文中，如果 D[i] < D[j]，我想将整数 i 定义为“小于”另一个整数 j。我怎样才能做到这一点？（D是对象的数据成员）

到目前为止我有

```
/* This function gets the k nearest neighbors for a user in feature
 * space.  These neighbors are stored in a priority queue and then
 * transferred to the array N. */
void kNN::getNN() {
    int r;
    priority_queue<int, vector<int>, CompareDist> NN;

    /* Initialize priority queue */
    for (r = 0; r < k; r++) {
        NN.push(r);
    }

    /* Look at the furthest of the k users.  If current user is closer,
     * replace the furthest with the current user. */
    for (r = k; r < NUM_USERS; r++) {
        if (NN.top() > r) {
            NN.pop();
            NN.push(r);
        }
    }

    /* Transfer neighbors to an array. */
    for (r = 0; r < k; r++) {
        N[r] = NN.top();
        NN.pop();
    }
} 
```

在 kNN.hh 中：

```
class kNN {

private:
    struct CompareDist {
        bool operator()(int u1, int u2) {
            if (D[u1] < D[u2])
                return true;
            else
                return false;
        }
    };
... 
```

但是，这给了我错误

```
kNN.hh: In member function ‘bool kNN::CompareDist::operator()(int, int)’:
kNN.hh:29: error: invalid use of nonstatic data member ‘kNN::D’ 
```

我能做些什么呢？如果我在比较器中引用特定对象，似乎 C++ 不喜欢它，但我不知道如何在不引用 D 的情况下解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T03:36:23.147

您可以将对象的引用传递给`D`对象的构造函数`CompareDist`，然后`D`在`operator()`.

在这个示例中，我存储了一个指向`D`. 根据 的类型`D`，您可能希望存储`D`. （如果`D`是原始数组，我的示例中的语法可以简化。）

```
struct CompareDist {
    const DType* pD;
    CompareDist(const DType& D) : pd(&D) {}
    bool operator()(int u1, int u2) {
        return (*pD)[u1] < (*pD)[u2];
    }
};

priority_queue<int, vector<int>, CompareDist> NN(CompareDist(D)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T03:25:56.540

好的，现在我已经更好地阅读了您的问题，我可以更新答案：问题是它`D`是一个包含在 实例中的对象`kNN`，因此它不是`static`也不能从静态上下文中访问。

您可以通过在类中使用对 D 的静态引用来解决问题，例如

```
// .h
class kNN {
  static Type* current;
  ..

    struct CompareDist {
      bool operator()(int u1, int u2) {
        if ((*current)[u1] < (*current)[u2])
          return true;
        else
          return false;
      }
    };
}

// .cpp
Type *kNN::current = NULL;

void kNN::method()
{
  kNN::current = D; // beforing using the comparator
  ..
} 
```

此外，签名应通过 const 引用使用元素，例如

```
bool operator()(const int &u1, const int &u2) 
```

# algorithm - MFU和LRU页面替换算法比较

> ID：13597246
> 
> 赞同：3
> 
> 时间：2012-11-28T03:21:31.457
> 
> 标签：algorithm, page-replacement

MFU（最常用）页面替换算法什么时候比LRU（最不常用）有更好的性能？什么时候比LRU差？除了 MFU 页面替换算法的基本定义之外，我在哪里可以找到信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T04:48:09.893

通常，我看到一个 MFU 缓存用作主缓存，由使用 LRU 替换算法的辅助缓存（MRU 缓存）支持。这个想法是最近使用的东西将保留在主缓存中，从而提供非常快速的访问。当少量项目被频繁使用时，这会减少您在 MRU 缓存中看到的“流失”。它还可以防止那些常用的项目仅仅因为它们有一段时间没有被使用而被从缓存中逐出。

如果您有少量经常引用的项目和大量不经常引用的项目，则 MFU 可以很好地工作。例如，一个典型的桌面用户可能有三四个他每天使用很多次的程序，以及数百个他很少使用的程序。如果您想通过在内存程序中缓存来改善他的体验，以便它们能够快速启动，那么您最好缓存他经常使用的那些东西。

另一方面，如果您有大量基本上是随机引用的项目，或者某些项目的访问频率略高于这些项目，或者项目通常被批量引用（即项目 A 在短时间内被多次访问，并且然后根本没有），那么 LRU 缓存驱逐方案可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:42:13.387

最近最少使用 (LRU) 页面替换算法

在这个算法中，最长时间没有被使用的页面必须被替换。

LRU 页面替换算法的优点：

1.  它可以进行全面的统计分析。
2.  从未遭受贝拉迪异常的困扰。

最常使用的页面替换算法 (MFU)

实际上 MFU 算法认为最频繁使用的页面不会立即被需要，所以它会替换 MFU 页面

示例：考虑以下引用字符串：7 0 1 2 0 3 0 4 2 3 0 3 2 1 2 0 1 7 0 1

缓冲区大小：3 字符串：7 0 1 2 0 3 0 4 2 3 0 3 2 1 2 0 1 7 0 1

**7 0 1 2 0 3 0 4 2 3 0 3 2 1 2 0 1 7 0 1**

```
7 7 7 2 2 2 0 4 2 2 0 0 2 2 2 0 0 7 7 7

  0 0 0 0 3 3 3 3 3 3 3 3 3 3 3 3 3 0 0

    1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
```

# actionscript-3 - 从 Stage Flash AS3 中移除按钮

> ID：13597247
> 
> 赞同：0
> 
> 时间：2012-11-28T03:21:33.373
> 
> 标签：actionscript-3, flash, button, actionscript, stage

我目前在舞台上有几个电影剪辑和按钮，它们可以做不同的事情。我有一个按钮，可以“攻击”敌方玩家并降低他的HP。这个按钮有一个点击事件监听器，当它被激活时，它会通过一个 IF 语句并根据他的生命值有多低来改变他的生命值条等。当健康达到 0 时，我想将整个屏幕转换到另一个结束屏幕。

我尝试使用 .visible 使我的所有其他对象变得不可见并且有效，但是将我单击以攻击的实例按钮设置为不可见将不起作用。我也尝试过 removeChild，它不会删除按钮，并且 gotoAndPlay/Stop 到未来的帧给了我一个空对象引用。

这是该帧中特定按钮的代码。

```
stop();

OSButton.addEventListener(MouseEvent.CLICK, OSAttack);

function OSAttack(event:MouseEvent):void
{
    var health1:int = parseInt(RegHealth.text);
    health1 = health1 - 1000;

        if(health1 == 9000 || health1 == 8000 || health1 == 7000 || health1 == 6000 || health1 == 5000
       || health1 == 4000 || health1 == 3000 || health1 == 2000 || health1 == 1000 || health1 ==0){
        REGHPBAR.play();
    }

    RegHealth.text = health1.toString();

    if(health1 <= 0){
        ////// WHAT CODE DO I PUT HERE? 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:46:05.900

尝试对变量和函数名称使用带有前导小写字符的格式，对类名称使用前导大写字符。这是一种常见的做法，可以让您更轻松地阅读代码。

删除按钮时，您也应该删除侦听器。（查找并阅读有关弱引用的信息，因为您可能决定开始使用它）。

所以你的 AS3 可能看起来像这样：

```
oSButton.addEventListener(MouseEvent.CLICK, oSAttack);

//or using weak referencing
//oSButton.addEventListener(MouseEvent.CLICK, oSAttack, false 0, true);

function oSAttack(event:MouseEvent):void
{
var health1:int = parseInt(regHealth.text);
health1 = health1 - 1000;

if(health1 == 9000 || health1 == 8000 || health1 == 7000 || health1 == 6000 || health1 == 5000 || health1 == 4000 || health1 == 3000 || health1 == 2000 || health1 == 1000 || health1 ==0){
REGHPBAR.play();
}

regHealth.text = health1.toString();

if(health1 <= 0){
////// remove the button
oSButton.removeEventListener(MouseEvent.CLICK, oSAttack);
oSButton.parent.removeChild(oSButton);

//if you no longer need the button you can null it
oSButton = null;
}

} 
```

# iphone - “未使用属性访问结果 - getter 不应用于副作用”检查文本字段是否为空时出错

> ID：13597250
> 
> 赞同：-3
> 
> 时间：2012-11-28T03:22:21.003
> 
> 标签：iphone, ios, xcode, ipad, uitextfield

检查 Textfield 是否为空时，我收到此错误（“未使用属性访问结果 - getter 不应用于副作用”）。**这是我的代码：**

```
{
        if ([text1.text,text2.text length] > 0) {
// The Error was the comma between both text fields :)
        }

    } 
```

编辑：这段代码在@danh 的帮助下消除了错误

```
if (text1.text.length > 0 || text2.text.length > 0) {

}

else {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:31:36.180

您是否尝试测试任一字符串的长度均非零？

```
if (text1.text.length > 0 || text2.text.length > 0) 
```

# sql - pgbench 进行大量事务后数据库暂时断开连接

> ID：13597251
> 
> 赞同：7
> 
> 时间：2012-11-28T03:22:32.177
> 
> 标签：sql, database, postgresql, benchmarking, postgresql-9.2

我正在使用（PostgreSQL）9.2.1 并使用 pgbench 测试数据库。

```
pgbench -h 192.168.39.38 -p 5433 -t 1000 -c 40 -j 8 -C -U admin testdb 
```

当我使用 -C 参数（为每个事务建立一个新连接）时，事务总是在第 16381 个事务之后丢失。

```
Connection to database "testdb" failed
could not connect to server: Can't assign requested address
    Is the server running on host "192.168.39.38" and accepting
    TCP/IP connections on port 5433?
Client 19 aborted in establishing connection.
Connection to database "testdb" failed
could not connect to server: Can't assign requested address
    Is the server running on host "192.168.39.38" and accepting
    TCP/IP connections on port 5433?
Client 19 aborted in establishing connection.
....

transaction type: TPC-B (sort of)
scaling factor: 30
query mode: simple
number of clients: 40
number of threads: 8
number of transactions per client: 1000
number of transactions actually processed: 16381/40000
tps = 1665.221801 (including connections establishing)
tps = 9487.779510 (excluding connections establishing) 
```

并且每次测试**实际处理的事务数**始终为**16381**。但是，pgbench 可以成功，并且所有事务都在以下情况下处理

> -C 未使用

或者

> 总交易量小于 16381

删除这些事务后，数据库可以在几秒钟内继续接受连接。我想知道我是否错过了 PostgreSQL 的一些配置。

谢谢

* * *

*编辑*我发现客户端被阻止连接几秒钟，但其他人仍然可以访问数据库。这是否意味着同一个客户端不能在短时间内发送太多交易？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:25:59.067

我找到了它在大约 16000 次交易后失去连接的原因。TCP wait_time 为这个错误负责。以下命令将显示 TCP 连接的状态：

```
$ netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' 
```

尽管如此，它并没有在 MAC OS X 中显示 TIME_WAIT。因此我错过了它。通过以下命令调整 TCP wait_time 后，pgbench 可以正常工作。

```
$ sudo sysctl -w net.inet.tcp.msl=1500
net.inet.tcp.msl: 15000 -> 1500 
```

感谢您的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:40:55.197

操作系统确实存在最大连接数限制。阅读文档中的[最大连接数](http://www.postgresql.org/docs/current/static/runtime-config-connection.html#RUNTIME-CONFIG-CONNECTION-SETTINGS)：（加粗的相关部分）

> 确定与数据库服务器的最大并发连接数。**默认值通常为 100 个连接，但如果您的内核设置不支持它可能会更少（在 initdb 期间确定）**。此参数只能在服务器启动时设置。
> 
> 增加此参数可能会导致 PostgreSQL 请求的 System V 共享内存或信号量超过操作系统默认配置所允许的数量。**如有必要，请参阅第 17.4.1 节了解有关如何调整这些参数的信息。**

您只能打开 16381 个连接，可以通过 2^14 (=16384) 个可能的最大连接减去默认为超级用户连接保留的 3 个连接来解释（请参阅文档）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:27:05.637

有趣的是，16381 如此接近 2 的幂。

这主要是猜测：

我想知道这是否是操作系统的事情。查看 TPS 数据，是否为每笔交易创建了新的连接？[*编辑*是的，现在我正确阅读了您的问题。]

也许操作系统只有这么多它可以使用的连接资源，并且在最近建立了 16381（加上几个额外的）之后无法立即创建新连接？

可能存在用于指定可用连接资源数量的操作系统设置，这可能允许使用更多连接。您可以在问题中添加一些操作系统详细信息吗？

* * *

特别是我会怀疑您连接的端口号一直在增加并且您达到了限制。尝试“lsof -i”，看看你是否可以在发生连接时捕捉到连接，看看这个数字是否在上升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T09:54:22.223

我通过设置为 /etc/sysctl.conf 解决了问题：

```
net.ipv4.ip_local_port_range = 32768 65000
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_fin_timeout = 10 
```

# php - 如何验证输入的文本字段是否是使用 php 和 SQL DB 的手机号码

> ID：13597255
> 
> 赞同：2
> 
> 时间：2012-11-28T03:22:55.553
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 验证电话号码？](https://stackoverflow.com/questions/3090862/how-to-validate-phone-number-using-php)

谁能帮我知道如何使用php验证输入的字段值是否是电话号码...我在sql db中使用了变量$phone，datatype =varchar 10现在我想验证用户是否只输入数字场地..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:32:09.737

使用 preg_match

```
if(preg_match('/^(NA|[0-9+-]+)$/',$str)) {
        *code here*
} else {
        "code here"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:32:41.513

一种方法是使用正则表达式。在验证电话号码时，如果您接受伴随字符并自己过滤掉它们（-+()），用户会更容易。

[http://www.php.net/manual/en/function.preg-replace.php](http://www.php.net/manual/en/function.preg-replace.php)

```
$phone = preg_replace ( '/[+\\.\\(\\) ]/' , '' , $phone); 
```

完成此操作后，可以像这样检查 10 位数字的匹配（假设带有区号的美国号码）：

```
if(preg_match ( '/^\\d{10}$/', $phone) ) {
    // Good match
} 
```

[http://www.php.net/manual/en/function.preg-match.php](http://www.php.net/manual/en/function.preg-match.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T03:26:18.397

[is_numeric 能](http://php.net/manual/en/function.is-numeric.php)解决您的问题吗？

编辑：我的目标不是解决 OPs 问题，只是希望给他/她指点。然而，仔细阅读这个问题让我认为 OP 没有意识到国际化问题。她的字段长度为 10 个字符，因此像 +447970122467（一个有效的英国手机号码）这样的数字会导致失败。我将假设它们在北美，因此可以假设所有数字都符合[北美编号计划](http://en.wikipedia.org/wiki/North_American_Numbering_Plan)。用文字来描述这一点，取自该页面：

> 组件名称 编号范围 注释
> 
> +1 国际电联国家呼叫代码“1”也是访问 NANP 号码之间长途服务的常用中继代码。在内部 NANP 上下文中，数字通常不带前导“+”
> 
> NPA 编号计划区号 允许的范围：第一个数字为 [2–9]，第二个和第三个数字为 [0–9]。涵盖加拿大、美国、加勒比海的部分地区以及一些大西洋和太平洋岛屿。区号通常用括号括起来。
> 
> NXX 中心局（交换）代码 允许的范围：第一个数字为 [2–9]，第二个和第三个数字为 [0–9]。通常被认为是用户号码的一部分。三位数的中心局代码分配给为其客户服务的特定 CO，但可能通过重定向或转发给移动运营商和其他服务而在物理上分散。
> 
> xxxx 用户号码 [0–9] 用于四位数字中的每一位。这个唯一的四位数字是用户号码或电台代码。`

这应该足以让 OP 开始解决他们的问题。很抱歉在我最初的回复中很简短。

# r - 使用 Vim-R-plugin 在 vi m 中更改 R 缩进样式

> ID：13597256
> 
> 赞同：13
> 
> 时间：2012-11-28T03:23:01.533
> 
> 标签：r, vim

我使用 Vim-R-plugin 和 Vim 为我的 R 代码提供语法高亮。常规缩进样式在括号的开头对齐函数中的参数。我想将其更改为更像花括号内的代码，其中新行缩进两个空格，而不是与花括号内联。

我的函数名称往往很冗长，默认的缩进样式将我的所有参数一直推到屏幕右侧。

这里有一些例子：

```
# Default indentation style
result <- fun(
              par1 = "abc",
              par2 = "def",
              par3 = 3
              ) 
```

所需的样式模仿`for`循环和函数定义的缩进样式。

```
# Desired indentation style
result <- fun(
  par1 = "abc",
  par2 = "def",
  par3 = 3
)

# Similar to for loop indentation
for(i in 1:10) {
  print(i)
}

# ... and function definitions
fun <- function(par1 = 1) {
 print(par1 + 1)
} 
```

我查看了 Vim-R-plugin 代码，但它太密集了，我无法理解。有没有办法让我改变它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-17T09:18:21.473

如果有人寻找这个问题：

```
:help r-plugin-indenting 
```

简短的回答。在 .vimrc 中，添加这些行：

```
" set vim-r-plugin to 
let r_indent_align_args = 0

" Set vim-r-plugin to mimics ess :
let r_indent_ess_comments = 0
let r_indent_ess_compatible = 0 
```

缩进将像 OP 所描述的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:48:38.010

看看`:help 'cindent'`和`:help 'smartindent'`开始；您可以使用这两个选项中的任何一个相对轻松地配置缩进。您也可以尝试编写自己的`indentexpr`，但这有点高级。这将需要放弃 Vim-R 插件以支持 Vim-native 缩进解决方案。

# c - “静态数组的动态数组”

> ID：13597262
> 
> 赞同：5
> 
> 时间：2012-11-28T03:23:55.187
> 
> 标签：c, types, struct, static-array

如何在 C 中指定静态数组的动态数组？
我想制作一个包含两个静态数组动态数组的结构。

```
struct indexed_face_set {
    double * [3] vertices;
    int * [3] faces;
}; 
```

这应该包含一个动态的顶点列表，每个顶点是 3 个双精度数，以及一个动态的面列表，每个顶点是 3 个整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:38:28.657

语法是，C 的声明方法不是最干净的，C++ 继承了...

```
double (*vertices)[3]; 
```

该声明意味着这`vertices`是一个指向`double [3]`对象的指针。请注意，括号是必需的，否则（如`double *vertices[3]`）将意味着 3 的数组`double*`。

一段时间后，你最终习惯了表达式括号的倒置方式......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:42:12.603

For the specific case of a structure containing two arrays each of dimension 3, it would be simpler to make the arrays a part of the structure, rather than dynamically allocating them separately:

```
struct indexed_face_set
{
    double vertices[3];
    int    faces[3];
}; 
```

However, there certainly could be cases where it makes sense to handle dynamic array allocation. In that case, you need a pointer to an array in the structure (and not an array of pointers). So, you would need to write:

```
struct indexed_face_set
{
    double (*vertices)[3];
    int    (*faces)[3];
}; 
```

To allocate a complete `struct indexed_face_set`, you need to use something like `new_indexed_face_set()` and to free one you need to use something like `destroy_indexed_face_set()`:

```
struct indexed_face_set *new_indexed_face_set(void)
{
    struct indexed_face_set *new_ifs = malloc(sizeof(*new_ifs));
    if (new_ifs != 0)
    {
        double (*v)[3] = malloc(sizeof(*v));
        int    (*f)[3] = malloc(sizeof(*f));
        if (v == 0 || f == 0)
        {
            free(v);
            free(f);
            free(new_ifs);
            new_ifs = 0;
        }
        else
        {
            new_ifs->vertices = v;
            new_ifs->faces = f;
        }
    }
    return(new_ifs);
}

void destroy_indexed_face_set(struct indexed_face_set *ifs)
{
    if (ifs != 0)
    {
        free(ifs->vertices);
        free(ifs->faces);
        free(ifs);
    }
} 
```

Then you can use it like this:

```
void play_with_ifs(void)
{
    struct indexed_face_set *ifs = new_indexed_face_set();
    if (ifs != 0)
    {
        (*ifs->vertices)[0] = 3.14159;
        (*ifs->vertices)[1] = 2.71813;
        (*ifs->vertices)[2] = 1.61803;
        (*ifs->faces)[0] = 31;
        (*ifs->faces)[1] = 30;
        (*ifs->faces)[2] = 29;
        do_something_fancy(ifs);
        destroy_indexed_face_set(ifs);
    }
} 
```

Note that the notation using pointers to arrays is moderately messy; one reason why people do not often use them.

You could use this fragment as the body of a header:

```
#ifndef DASS_H_INCLUDED
#define DASS_H_INCLUDED

struct indexed_face_set;
extern void play_with_ifs(void);
extern void do_something_fancy(struct indexed_face_set *ifs);
extern void destroy_indexed_face_set(struct indexed_face_set *ifs);
extern struct indexed_face_set *new_indexed_face_set(void);

#endif /* DASS_H_INCLUDED */ 
```

It doesn't need any extra headers included; it does not need the details of the structure definition for these functions. You'd wrap it in suitable header guards.

* * *

Because the code above is a bit messy when it comes to using the arrays, most people would use a simpler notation. The header above can be left unchanged, but the code could be changed to:

```
struct indexed_face_set
{
    double *vertices;
    int    *faces;
};

struct indexed_face_set *new_indexed_face_set(void)
{
    struct indexed_face_set *new_ifs = malloc(sizeof(*new_ifs));
    if (new_ifs != 0)
    {
        double *v = malloc(3 * sizeof(*v));
        int    *f = malloc(3 * sizeof(*f));
        if (v == 0 || f == 0)
        {
            free(v);
            free(f);
            free(new_ifs);
            new_ifs = 0;
        }
        else
        {
            new_ifs->vertices = v;
            new_ifs->faces = f;
        }
    }
    return(new_ifs);
}

void destroy_indexed_face_set(struct indexed_face_set *ifs)
{
    if (ifs != 0)
    {
        free(ifs->vertices);
        free(ifs->faces);
        free(ifs);
    }
}

void play_with_ifs(void)
{
    struct indexed_face_set *ifs = new_indexed_face_set();
    if (ifs != 0)
    {
        ifs->vertices[0] = 3.14159;
        ifs->vertices[1] = 2.71813;
        ifs->vertices[2] = 1.61803;
        ifs->faces[0] = 31;
        ifs->faces[1] = 30;
        ifs->faces[2] = 29;
        do_something_fancy(ifs);
        destroy_indexed_face_set(ifs);
    }
} 
```

This is much simpler to understand and use and would generally be regarded as more idiomatic C.

Since the size of each array is fixed, there's no particular need to record the size in the structure. If the sizes varied at runtime, and especially if some indexed face sets had, say, 8 vertices and 6 faces (cuboid?), then you might well want to record the sizes of the arrays in the structure. You'd also specify the number of vertices and number of faces in the call to `new_indexed_face_set()`.

# ios - 应用内购买，iOS 5 和 6 有什么区别？

> ID：13597263
> 
> 赞同：0
> 
> 时间：2012-11-28T03:24:00.380
> 
> 标签：ios, compatibility, in-app-purchase

我搜了一下，只找到了一个类似的问题，没有完全回答，和我的不一样，所以在这里问。

我按照 Troy IAP 教程 (http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/) 编写了我的 IAP，它在 iOS 6.0 模拟器或真正的非监狱中运行良好-断裂测试装置。但是，当我在 iOS 5.0/5.1 Simulator 中测试时（我没有 5.x 设备），IAP 流程经过所有步骤到支付队列并返回 stateFailed。除 IAP 外，该程序在 iOS 5.x 中运行良好。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:36:30.080

我也面临同样的问题，是的，在这里提问，我找到了这个答案。

[您无法在 iOS5 模拟器中可靠地测试应用内购买。您需要在设备上对其进行测试。](https://stackoverflow.com/questions/15432805/in-app-purchase-not-working-in-ios-5/15432869?noredirect=1#comment21828261_15432869)

# oracle - 有没有办法使用 EJB 身份验证数据连接到持久存储？

> ID：13597266
> 
> 赞同：1
> 
> 时间：2012-11-28T03:24:20.163
> 
> 标签：oracle, authentication, ejb, weblogic, persistent

有一些用户具有 (1) 用户名​​、(2) 密码和 (3) 角色属性。

我想使用用户的凭据对 EJB 服务操作（WebLogic 12c App Server）进行身份验证和授权。

同时，我想使用这些凭据连接到持久性存储（Oracle 11g 数据库），因为我的客户想要限制 db 对象访问取决于用户角色属性。

是否有 WebLogic 或 Oracle 数据库工具可以这样做？

有什么办法吗？

很高兴看到您的所有回复。谢谢你。

# java - 为什么我的 XML 文件的输出附加一个“/>”

> ID：13597267
> 
> 赞同：-1
> 
> 时间：2012-11-28T03:24:47.903
> 
> 标签：java, xml

这是我的困境：

我有一个 XML，我想在其中插入 animation_sequence，但是，代码添加了带有左尖括号的 animation_sequnce/>，我可以添加除那个之外的所有其他元素。这是为什么？我尝试在此处添加 XML，但它不会呈现。这是我的代码：

```
 Element state = testDoc.createElement("state");
    state.setTextContent(element);
    Element animationState = testDoc.createElement("animation_state");
    Element sequence = testDoc.createElement("animation_sequence");

    testDoc.getElementsByTagName("animations_list").item(0).appendChild(animationState).appendChild(state);
    testDoc.getElementsByTagName("animation_state").item(testDoc.getElementsByTagName("state").getLength() - 1).appendChild(sequence); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:42:30.323

您向我们展示的代码在树中创建节点。它不会在任何内容上附加任何尖括号。尖括号仅在序列化树时出现（将其转换为词法 XML）。通常系统会负责如何序列化 XML，当它在不同的序列化方式之间进行选择时，您无需担心，因为解析 XML 时，差异无关紧要。

现在可能是“/>”是您构建的树不是您打算构建的树的症状，但这是另一回事。

# java - 测试 - 如何创建 Mock 对象

> ID：13597269
> 
> 赞同：5
> 
> 时间：2012-11-28T03:25:00.127
> 
> 标签：java, unit-testing, mocking

我只是想知道如何创建 Mock 对象来测试代码，例如：

```
public class MyTest
{
  private A a;
  public MyTest()
  {
     a=new A(100,101);
  }
} 
```

?

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T03:34:29.457

直接使用实例化对象的代码`new`使测试变得困难。通过使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，您可以将对象的创建移到要测试的代码之外。这为您提供了一个注入模拟对象和/或模拟工厂的地方。

> 请注意，您选择`MyTest`作为要测试的类有点不幸，因为顾名思义，它就是测试本身。我将其更改为`MyClass`. 此外，在构造函数中创建对象可以很容易地通过传入一个实例来替换，`A`因此我将把创建移到稍后调用的方法中。

```
public interface AFactory
{
    public A create(int x, int y);
}

public class MyClass
{
    private final AFactory aFactory;

    public MyClass(AFactory aFactory) {
        this.aFactory = aFactory;
    }

    public void doSomething() {
        A a = aFactory.create(100, 101);
        // do something with the A ...
    }
} 
```

现在您可以在测试中传入一个模拟工厂，该工厂将创建一个模拟`A`或`A`您选择的模拟工厂。让我们使用 Mockito 创建模拟工厂。

```
public class MyClassTest
{
    @Test
    public void doSomething() {
        A a = mock(A.class);
        // set expectations for A ...
        AFactory aFactory = mock(AFactory.class);
        when(aFactory.create(100, 101)).thenReturn(a);
        MyClass fixture = new MyClass(aFactory);
        fixture.doSomething();
        // make assertions ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T03:32:09.587

使用`mockito`mcking 框架，尝试如下操作：

```
 whenNew(MyTest.class)
     .withArguments(Mockito.anyInt(), Mockito.anyInt())
     .thenReturn(new MockedMyTest(param1, param2)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T03:38:36.643

使用接口 Ia；然后。

```
Class A implements Ia;
Class MockA implements Ia;
private Ia a; 
```

然后

```
public MyMockTest {
a = new MockA(100, 100);
int result = a.doWork();
assertEquals(200, result);
 // asuming doWork would add both constructor parameters
} 
```

# python - 如何在 django 中对上传的文件执行验证

> ID：13597271
> 
> 赞同：0
> 
> 时间：2012-11-28T03:25:11.790
> 
> 标签：python, django, forms, file-upload

我正在以 django 形式上传 pdf 文件。

但是我需要通过读取文件的内容然后检查来对 pdf 文件执行验证，如果它无效然后给出一些错误消息。

但我无法找到如何获取 pdf 文件位置，以便我可以读取文件并进行一些测试。

我不想先保存在临时位置然后进行验证然后删除文件

我只需要文件的路径，这样我就可以在文件上运行一些系统命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:37:48.953

下面的示例基于 django 文档中的[基本文件上传](https://docs.djangoproject.com/en/1.4/topics/http/file-uploads/#basic-file-uploads)示例。在此示例中，您可以有一个名为 check_pdf 的函数，它对 pdf 文件进行验证，并根据它是否有效返回真/假。根据您将用户重定向到成功或无效的 pdf 页面。这是最简单的方法。您可以使用表单 api 执行更多操作并显示特定的错误消息。

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response

def upload_file(request):
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid():
            if check_pdf(request.FILES['file'].name):
                return HttpResponseRedirect('/success/url/')
            else:
                return HttpResponseRedirect('/invalid_pdf/url/')
    else:
        form = UploadFileForm()
    return render_to_response('upload.html', {'form': form}) 
```

# vb.net - SMTP.Send(Mail) 错误

> ID：13597273
> 
> 赞同：0
> 
> 时间：2012-11-28T03:25:36.057
> 
> 标签：vb.net, smtp

这是我的代码（是的，我审查了我的电子邮件/密码）（当您单击按钮时）

```
Dim Mail As New MailMessage
Mail.Subject = "test email"
Mail.To.Add("*****")
Mail.From = New MailAddress("*****") '
Mail.Body = "This is an email!"
Dim SMTP As New SmtpClient("smtp.gmail.com")
SMTP.EnableSsl = True
SMTP.Credentials = New System.Net.NetworkCredential("*****", "*****")
SMTP.Port = 587
SMTP.Send(Mail)
MsgBox("Sent Successfully") 
```

SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。了解更多信息（链接没有帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:42:12.777

解决了！我永远不会猜到。谷歌不允许我使用我的帐户，因为它被黑了。当我写代码时，它显然被黑了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:46:23.210

仅供参考，更安全的版本是

```
 Using mail As MailMessage = New MailMessage
        mail.Subject = "test email"
        mail.To.Add("*****")
        mail.From = New MailAddress("*****") '
        mail.Body = "This is an email!"
        Using smtp As New SmtpClient("smtp.gmail.com")
            smtp.EnableSsl = True
            smtp.Credentials = New System.Net.NetworkCredential("*****", "*****")
            smtp.Port = 587
            smtp.Send(mail)
        End Using
    End Using
    MsgBox("Sent Successfully") 
```

这将确保清理`mail`和对象，无论是否发生异常。`smtp`

# c# - C# 中的可空双 NaN 比较

> ID：13597277
> 
> 赞同：6
> 
> 时间：2012-11-28T03:25:52.290
> 
> 标签：c#, double, nan

我有 2 个可为空的双精度值，一个期望值和一个实际值（我们称它们为 value 和 valueExpected）。使用 100 * (value / valueExpected) 找到百分比。但是，如果 valueExpected 为零，则返回 NaN。到目前为止一切都很好。

现在，如果我需要检查值，看看它是否为 NaN，我该怎么办？通常可以使用：

```
if (!Double.IsNaN(myDouble)) 
```

但这不适用于可为空的值（IsNaN 仅适用于不可为空的变量）。我已经更改了我的代码来进行检查（valueExpected == 0），但我仍然很好奇 - 有没有办法检查可为空的 NaN？

**编辑：**当我说代码不起作用时，我的意思是它不会编译。首先测试 null 不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T03:29:38.367

对于所有[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)实例，您首先检查[`bool HasValue`](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)属性，然后才能访问该[`T Value`](http://msdn.microsoft.com/en-us/library/ydkbatt6.aspx)属性。

```
double? d = 0.0;        // Shorthand for Nullable<double>
if (d.HasValue && !Double.IsNaN(d.Value)) {
    double val = d.Value;

    // val is a non-null, non-NaN double.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T22:32:40.447

你也可以使用

```
if (!Double.IsNaN(myDouble ?? 0.0)) 
```

如果最里面的括号中的值是非空的`myDouble`（去掉了它的包装），或者只是如果是。Se[运算符 (C#)](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。`Nullable<>``0.0``myDouble``null`[`??`](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T03:45:53.003

我有同样的问题，我通过铸造双打解决了它？带双

```
double.IsNaN((double)myDouble) 
```

如果 NaN 则返回 true，否则返回 false

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-18T13:40:03.977

使用 C# 7.0[模式匹配](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#pattern-matching)组合 null + NaN 检查检查可以这样写：

```
double? d = whatever;
if(d is double val && double.IsNaN(val))
   Console.WriteLine(val); 
```

优点是`val`手头的局部范围变量，它不是`null`，也不是，`double.NaN`甚至可以在`if`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-13T16:19:03.123

在[较新的 Roslyn C# 版本](https://github.com/dotnet/roslyn/commit/71a87eca6c65dbda7ec58daa6d4cfdc7cd310dbc)中使用模式匹配，`double.NaN`是一种有效的模式，可以使用`IsNaN`（即它的工作方式不同于IEEE 浮点标准所指定的`Equals()`where `NaN`is never equal ）。`NaN`

因此，您现在可以这样做：

```
double? myDouble = something;
if (myDouble is double and not double.NaN)
   Console.WriteLine("A number"); 
```

为了测试`NaN`，甚至可以这样缩短：

```
double? myDouble = something;
if (myDouble is double.NaN)
   Console.WriteLine("Not a number and not NULL"); 
```

# .net - 当一个线程占用过多 CPU 资源时需要线程管理

> ID：13597290
> 
> 赞同：0
> 
> 时间：2012-11-28T03:27:07.467
> 
> 标签：.net, vb.net

我有一个将工作分配给多个线程的应用程序。有时一个线程会占用过多的 CPU 负载，而所有其他线程都会受此影响。我该怎么做才能以这样的方式管理线程，如果一个线程正在使用 CPU，那么只需暂停它，或者将其切片以使所有线程的负载或多或少均匀。

**更新**我的任务是独立的。不确定是否可以为每个线程添加性能计数器并测量负载。如果线程超出限制，则暂停它直到稍后时间。

**使用 TPL 负载平衡的**更新问题是我的线程是 STA。**一种解决方案是按照众所周知的算法（如“循环负载平衡”）创建自制的负载平衡。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:29:59.887

您说*您*将工作分配给多个线程。所以，由*你*来分解和正确分配工作。您需要充分了解代码的性能，以便查看工作负载并确定工作负载需要多少资源。然后，您可以拆分工作负载，以便每个工作单元在资源方面或多或少相同。

我不认为你会找到一个完整的神奇解决方案。Task Parallel Library i .NET 4.0 及更高版本之类的东西可以提供帮助，但它不是灵丹妙药。**

# objective-c - iOS 6 上奇怪的 tableViewCell 问题

> ID：13597292
> 
> 赞同：0
> 
> 时间：2012-11-28T03:27:10.253
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

这些“管道”字符出现在我的表格视图的某些单元格中，但仅在 iOS 6 上。第一个屏幕截图显示了 iOS 6 上的问题，下面的屏幕截图是 iOS 4.3：

我感谢提供的任何帮助。

这是我正在使用的代码：

```
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d%d", indexPath.section, indexPath.row];

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        UIView *clearColor = [[UIView alloc] init];
        clearColor.backgroundColor = [UIColor clearColor];
        cell.selectedBackgroundView = clearColor;
    }

    UILabel *label1 = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 243.5, 25)];
    [label1 setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16.0]];
    [label1 setTextColor:[UIColor blackColor]];
    label1.text = [[self.tableDataSource objectAtIndex:indexPath.row] objectForKey:@"Name"];
    [cell addSubview:label1];

    UILabel *label2 = [[UILabel alloc]initWithFrame:CGRectMake(253.5, 10, 243.5, 25)];
    [label2 setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16.0]];
    [label2 setTextColor:[UIColor blackColor]];
    label2.text = [[self.tableDataSource objectAtIndex:indexPath.row] objectForKey:@"Email"];
    [cell addSubview:label2];

    UILabel *label3 = [[UILabel alloc]initWithFrame:CGRectMake(507, 10, 243.5, 25)];
    [label3 setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16.0]];
    [label3 setTextColor:[UIColor blackColor]];
    label3.text = [[self.tableDataSource objectAtIndex:indexPath.row] objectForKey:@"Phone"];
    [cell addSubview:label3];

    UILabel *label4 = [[UILabel alloc]initWithFrame:CGRectMake(760.5, 10, 243.5, 25)];
    [label4 setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16.0]];
    [label4 setTextColor:[UIColor blackColor]];
    label4.text = [[self.tableDataSource objectAtIndex:indexPath.row] objectForKey:@"Business"];
    [cell addSubview:label4];

    return cell;
} 
```

[点击查看大图]

[![在此处输入图像描述](../Images/fdc276c68cf4cc3c37050b9079903c88.png)](https://i.stack.imgur.com/uk2YJ.png)

[![在此处输入图像描述](../Images/534ca9a901b2ceee5db1846d3e7b1bf0.png)](https://i.stack.imgur.com/WDoC3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:58:20.790

原来我必须将每个标签的背景颜色设置为清除：

```
label.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:59:14.683

您使用 UILabel 的任何具体原因？我检查了我拥有的 iOS6 应用程序的代码，并使用了 NSStrings。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSString *newTitle = @"my string";
  cell.textLabel.text = newTitle;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:41:28.840

为标签设置清晰的背景颜色

label.backgroundColor = [UIColor clearColor];

# android - AVD 卡在风景中

> ID：13597293
> 
> 赞同：0
> 
> 时间：2012-11-28T03:27:13.843
> 
> 标签：android, screen-orientation, avd

我是新来的。遇到了上述问题。旋转 AVD 的方向没有问题。但是，我的主屏幕、应用程序和所有内容都停留在横向模式。

下面链接中的屏幕截图（我还不能发布图片）

[风景](http://i.imgur.com/Sek4n.png) [肖像](http://i.imgur.com/mLGhl.png)

# c# - 通过 HtmlAgility 和自定义 webclient 使用链接填充字典

> ID：13597294
> 
> 赞同：0
> 
> 时间：2012-11-28T03:27:35.093
> 
> 标签：c#, .net, winforms, html-parsing, html-agility-pack

```
 private void button1_Click(object sender, EventArgs e)
    {
        test();
    }

    public void test()
    {

        Dictionary<string, string> LnksDict = new Dictionary<string, string>();

        using (SmartWebClient smwc = new SmartWebClient())
        {

            HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
            htmlDoc.LoadHtml(smwc.DownloadString("http://www.google.com/adplanner/static/top1000/"));
            var links = htmlDoc.DocumentNode
                            .Descendants("a").Select(x => x.Attributes["href"]);
            foreach (var link in htmlDoc.DocumentNode.SelectNodes("//a"))
            {
                var UrlVal= link.Attributes["href"].Value;
                var name = UrlVal.Split('.')[1];

                LnksDict.Add(name, UrlVal);
            } 
        }
    }

#region <<=========== SmWbCl ============>>

public class SmartWebClient : WebClient
{
    private readonly int maxConcurentConnectionCount;

    public SmartWebClient(int maxConcurentConnectionCount = 20)
    {

        this.maxConcurentConnectionCount = maxConcurentConnectionCount;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var httpWebRequest = (HttpWebRequest)base.GetWebRequest(address);
        if (httpWebRequest == null)
        {
            return null;
        }

        if (maxConcurentConnectionCount != 0)
        {
            this.Proxy = null;
            this.Encoding = Encoding.GetEncoding("UTF-8");
            httpWebRequest.ServicePoint.ConnectionLimit = maxConcurentConnectionCount;
        }

        return httpWebRequest;
    }

}

#endregion 
```

在这段代码中，我试图构建一个 url 列表，以便稍后用作自动完成源。

我做错的是将解析的值添加到字典中的条件。

我需要找到一种方法来添加域名作为密钥，即使已经存在，

所以我希望能够提出一个条件：

如果`key`此字典中的已经存在，则添加`collection index`当前`link`到`string.value`的`key` **作为后缀**

或者，如果您想一起提出不同的解决方案......我很乐意看到新的例子。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:25:12.683

我认为你想要的，而不是 a `Dictionary<string, string>`，是 a `Dictionary<string, HashSet<string>>`。这样，您可以为每个域构建一个 URL 列表。您将项目添加到列表的代码将是：

```
var UrlVal= link.Attributes["href"].Value;
var name = UrlVal.Split('.')[1];

// get links for this host
HashSet hostLinksList;
if (!LnksDict.TryGetValue(name, out hostLinksList))
{
    hostLinksList = new HashSet<string>();
    LnksDict.Add(name, hostLinksList);
}
// add the URL to the list of links for this host
hostLinksList.Add(UrlVal); 
```

这里的关键是当项目已经存在时调用`Add`a`HashSet`不会引发异常。它只是不再添加它并返回`false`以指示该项目已经在集合中。

完成后，您将获得每个主机（域）的 URL 列表，然后您可以将其用于自动完成。

顺便说一句，您使用拆分主机的方法`Split('.')`效果不佳。它采用“www.example.com”形式的域。例如，如果您遇到“example.com”（没有“www”），您将获得“com”作为名称。此外，“www.example.com”将与“www.example.org”和“www.example.co.uk”发生冲突。您需要一种更好的方法来识别主机。

# javascript - 无效的 JSON 语法和 $.getJSON

> ID：13597300
> 
> 赞同：1
> 
> 时间：2012-11-28T03:28:35.933
> 
> 标签：javascript, jquery, json

我有一个 JSON 文件*my.json*，其内容如下：

```
{   
    title: "My Title",
} 
```

并且，一个 jQuery 片段来阅读它：

```
var reading_file = $.getJSON('my.json', function (data) {
  alert('Success.');
} 
```

回调中的*alert()*永远不会被调用，因为 JSON 文件中存在错误，即`title`未包装为字符串，如`"title"`.

在浏览器 (Chrome) 上运行时，这不会引发错误或任何错误指示。具体来说，`my.json`已正确检索（状态代码：200），尽管`reading_file.state()`总是`pending`.

我的问题：

1.  什么是捕获此类错误的好方法，即无效的 JSON 数据/语法？
2.  在`function (data) { alert ... }`回调内部，`this`指的是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:33:44.110

从[文档](http://api.jquery.com/jQuery.ajax/)

> 在 jQuery 1.4 中，JSON 数据以严格的方式解析；拒绝任何格式错误的 JSON 并引发解析错误

您将使用错误处理程序来捕获错误。就像是

```
var reading_file = $.getJSON('my.json', function (data) {
  alert('Success.');
}).error(function(jqXHR, textStatus, errorThrown) {
    alert("Stop! Error time!");
}); 
```

**更新**

正如[Ian](https://stackoverflow.com/users/1317927/ian)所提到的，`this`在*成功*回调上下文中*不是*Ajax 事件。它似乎是传递给的配置对象`$.ajax()`。

# javascript - 我可以检索当前的锚点位置吗？

> ID：13597305
> 
> 赞同：2
> 
> 时间：2012-11-28T03:29:33.140
> 
> 标签：javascript

我一直试图弄清楚这一点，但我一直在迷惑自己。

我有一个博客，所有帖子按时间顺序从 1 到 X（类）编号，博客的每个页面显示 10 个帖子，每个帖子都有一个编号的锚点（post1、post2 等）。

如果用户没有通过单击链接到达锚点，我无法弄清楚如何检索当前显示在屏幕上的元素的锚点的 ID/类/名称（滚动条所在的位置）。

这甚至可以做到吗？我正在尝试用 JavaScript 对其进行编码，但我不知道从哪里开始，向正确的方向点头会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:46:46.407

如果锚点的 id/name 不在 URL 中，那么您可以尝试组合一个函数来获取元素的绝对位置

```
function pos(e) {
    var o = {left:e.offsetLeft, top:e.offsetTop};
    while (e=e.offsetParent)
        o.left = o.left + e.offsetLeft,
        o.top = o.top + e.offsetTop;
    return o;
} 
```

循环`document.getElementsByTagName('a')`（或您要检查的其他一些节点列表）

并检查`window.scrollY <= o.top && o.top <= window.scrollY + window.innerHeight`是否`<a>`在窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:53:16.463

我会测试所有锚链接是否在视口中可见。如果可见多个，您需要决定选择哪一个。

[如何判断 DOM 元素在当前视口中是否可见？](https://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport)

# rest - 如果我有一个 RESTful API 的基本 URL，有没有办法确定它提供了哪些资源？

> ID：13597311
> 
> 赞同：2
> 
> 时间：2012-11-28T03:29:46.863
> 
> 标签：rest

我有 RESTful API 的基本 URL。我有一个它提供的一些资源类型的列表。像：

```
GET http://www.baseURL.com:8180/fruits 
```

将导致类似：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
  <FruitList xmlns="http://www.baseURL.com/Fruits">
  <Fruit>
    <Identity createdTimeStamp="2011-05-13T09:45:16.611-05:00" lastUpdatedTimeStamp="2012-11-19T03:24:19.310-06:00">
        <FruitName>Apple</FruitName>
    </Identity>
  </Fruit>
  <Fruit>
    <Identity createdTimeStamp="2011-05-13T09:45:17.241-05:00" lastUpdatedTimeStamp="2012-11-19T03:24:20.431-06:00">
      <FruitName>Banana</FruitName>
    </Identity>
  </Fruit>
  <Fruit>
    <Identity createdTimeStamp="2011-05-13T09:45:19.445-05:00" lastUpdatedTimeStamp="2012-11-19T03:24:21.281-06:00">
      <FruitName>Orange</FruitName>
    </Identity>
</Fruit>
</FruitList> 
```

如果我不知道这个 API 有“水果”作为资源，有没有办法可以通过某种通用的 GET 命令来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:10:20.833

对此没有标准。即使你得到了回应，你也无法知道回应*意味着*什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:22:37.277

所有通信都需要一些高级知识，包括 RESTful API。如果我说“你好”而你只说克林贡语，你可能会认为我在侮辱你。RESTful API 所需的预设知识包括：

*   入口点（URL）
*   了解接口以及如何有效地使用它（即 HTTP 方法和返回码 - 请参阅[REST API - 为什么使用 PUT DELETE POST GET？](https://stackoverflow.com/questions/4573305/)了解更多信息）
*   可以合理预期哪些表示格式可用
*   理解这些格式的语义

这些应该记录在案，以便客户作者可以使用它们。因此，尽可能重用现有规范而不是发明新规范是有意义的。这样做意味着现有客户可以理解您的大部分或全部 API，甚至无需查看任何文档。这就是如何将新网站添加到 Internet 的方式，而无需浏览器供应商返回并更新其浏览器以访问新网站。

例如在 HTML 中：

```
entry point = http://www.example.com/
hypertext formats expected = HTML, XHTML, SVG, etc. 
```

现代浏览器知道每一个的语义，所以当它在 HTML 响应中遇到文本时

```
<link rel="stylesheet" href="/style.css"> 
```

它将知道 LINK 元素代表一个超媒体路径，并且资源的关系是“样式表”关系的关系，它理解这具有一定的效果（即重新设置主要响应的表示形式）。

您的 API 应该在其基本 URL 中`http://www.baseURL.com:8180/`包含一组指向它提供的资源的超媒体链接，`<a href="/fruits">Fruits</a>`任何理解 HTML 的客户端都可以遵循这些链接。如果您想为这些链接添加*意义*，您需要提供关系。已经存在一个[预定义的链接关系列表，](http://www.iana.org/assignments/link-relations/)但如果这些都不适合您，您可以寻找在其他公共本体中定义的合适关系，或者使用您控制的命名空间中的 URI 定义您自己的关系。建议使用提供人类可读文档的可取消引用的 HTTP URL。例如：

```
rel="http://www.baseURL.com:8180/documentation/#FruitList" 
```

所以，直接回答你的问题，

> 如果我不知道这个 API 有“水果”作为资源，有没有办法可以通过某种通用的 GET 命令来解决这个问题？

您的客户端需要获取 API 的入口 URL，查看为每个链接提供的关系，并知道这意味着什么，因为它是在某处预定义的，并且客户端知道 FruitList 对用户意味着什么。

# c - 打印从 C 函数返回为 char* 的字符串

> ID：13597317
> 
> 赞同：0
> 
> 时间：2012-11-28T03:30:31.610
> 
> 标签：c, shell

我正在用 C 编写一个简单的 shell 程序。作为程序的一部分，我正在编写一个标记器来将用户输入分解为标记。每次调用标记器时，它都会返回下一个标记。标记器的代码如下所示：

```
char* nextToken(char string[])
{
char token[50]= {}; //stores the current token
//More code here, will post if necessary
puts(token);
return token;
}

int main()
{
char inputString[] = "cpgm one two <three| script a b >file";
char *token = nextToken(inputString);
while(*token!='\0') //I'm using a char[] with a single null character as a delimiter to indicate the last token has been reached
{
    token = nextToken(inputString);
}

} 
```

当我像这样运行程序时，“puts”正常工作；也就是说，每次调用该函数时，都会以正确的顺序打印相应的令牌，如下所示：

cpgm 一二 < 三 | 脚本 a b > 文件

但是，当我删除 nextToken 中的“puts”行并将其放入主函数时，如下所示：

```
 while(*token!='\0')
 {
     puts(token);
     token = nextToken(inputString);
 } 
```

并尝试从我的主函数中打印令牌，我所看到的只是一个奇怪字符的列表，如下所示：

￡bHd? �bH �bH � �bHd � �bHd?

� �                                                                                                                                                                                                             还

知道为什么会这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:32:34.900

您正在`token`堆栈上分配字符串。这意味着当您返回它时，它将被释放，并且不能再使用了。您应该为您的字符串分配内存：

```
char *token = malloc(50); 
```

然后你还必须记住稍后释放字符串，一旦你完成它，通过调用

```
free(token); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:38:44.067

这是因为您正在访问垃圾值。在 nextToken() 结束后，自动令牌被释放，成为调用者的垃圾值。为了解决它，将变量的生命周期更改为静态或进行动态内存分配。但如您所知，它可能不是首选。做就是了：

```
static char token[50]; 
```

# html - 液体 div 图像叠加

> ID：13597321
> 
> 赞同：1
> 
> 时间：2012-11-28T03:31:07.987
> 
> 标签：html, css, image, scaling, fluid

我有一个很像[这个用户](https://stackoverflow.com/questions/10728806/div-overlay-on-a-responsive-image)的问题，但我想更进一步，让我的图像有一个高度可以流畅地响应它的容器。

[我在这里](http://dabblet.com/gist/4158867)做了一个东西来演示。
我想要做的是给容器 div 类“navcont”（灰色区域）一个流动的高度。如果我取出高度，我无法在同一列中堆叠类似的 div，更不用说可爱的（但强制性的）溢出：隐藏隐藏所有内容。

非常感谢任何和所有的帮助；谢谢 c:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:52:22.890

你需要做一些修复：

```
.subnav img{
    position:relative;top:0;right:0;bottom:0;left:0;
    z-index: 1000;
}

.navcont{
    margin: 20px;
    position:relative;
} 
```

# c++ - 带有 LNK2019 错误的对象的 C++ 链表

> ID：13597327
> 
> 赞同：1
> 
> 时间：2012-11-28T03:32:00.457
> 
> 标签：c++, object, linked-list, lnk2019

基本上这是我的 C++ 分配项目，我对 C++ 很陌生，我遇到了这个错误。main == 中的注释代码也有错误不是匹配的操作数

1>Main2.obj : 错误 LNK2019: 无法解析的外部符号“class std::basic_ostream > & __cdecl operator<<(class std::basic_ostream > &,class Customer &)” (??6@YAAAV?$basic_ostream@DU? $char_traits@D@std@@@std@@AAV01@AAVCustomer@@@Z) 在函数 "void __cdecl display(struct Node *)" (?display@@YAXPAUNode@@@Z) 中引用

这是代码 Main.cpp

```
 #include <iostream>
    #include "account.h"
    #include "cheque.h"
    #include "customer.h"

    using namespace std;

    struct Node {
    Node* m_next;
    Customer& m_customer;
    Node(Customer& customer) : m_next(0), m_customer(customer) {}   
    };

   // only for the 1st Node
    void initNode(struct Node *head,Customer n){
head->m_customer = n;
head->m_next =NULL;
    }

     // apending
    void addNode(struct Node *head, Customer n) {
Node *newNode = new Node(n);
newNode->m_customer = n;
newNode->m_next = NULL;

Node *cur = head;
while(cur) {
    if(cur->m_next == NULL) {
        cur->m_next = newNode;
        return;
    }
    cur = cur->m_next;
}
    }

    void insertFront(struct Node **head, Customer n) {
Node *newNode = new Node(n);
newNode->m_customer = n;
newNode->m_next = *head;
*head = newNode;
    }

    //struct Node *searchNode(struct Node *head, Customer n) {
//Node *cur = head;
//while(cur) {
    //if(cur->m_customer == n) return cur;
    //cur = cur->m_next;
//}
//cout << "No Node " << n << " in list.\n";
    //}

    bool deleteNode(struct Node **head, Node *ptrDel) {
Node *cur = *head;
if(ptrDel == *head) {
    *head = cur->m_next;
    delete ptrDel;
    return true;
}

while(cur) {
    if(cur->m_next == ptrDel) {
        cur->m_next = ptrDel->m_next;
        delete ptrDel;
        return true;
    }
    cur = cur->m_next;
}
return false;
     }

     void deleteLinkedList(struct Node **node)
    {
struct Node *tmpNode;
while(*node) {
    tmpNode = *node;
    *node = tmpNode->m_next;
    delete tmpNode;
}
    }

    void display(struct Node *head) {
Node *list = head;
while(list) {
    cout << list->m_customer << " ";
    list = list->m_next;
}
cout << endl;
cout << endl;
     }

    int main() 
     {
     Customer test1("sdfs","sdf2","dsfpppsf","fdgdfg","fdgdsffg");

struct Node *newHead;
struct Node *head = new Node(test1);

Customer test2("sdsffs","sdfhhmj2","dsfhfsf","fdgdfgs","fdsggdfg");
Customer test3("sdsdfs","sdllllf2","dsfldfgsf","fdgaghdfg","fdgbvcbdfg");
Customer test4("sdgnfgfs","ssdfsdf2","dsfhjhdsf","fdbvcgdfg","fdgsfddfg");

addNode(head,test2);
display(head);

addNode(head,test3);
display(head);

insertFront(&head,test4);
display(head);

cout << "Deleting the copied list\n";
deleteLinkedList(&newHead);
display(newHead);
return 0;
     } 
```

客户.cpp

```
 #include "customer.h"

    using namespace std;

     Customer::Customer(string init_name, string init_address, string init_telephone, string init_sex, string init_dob)
        {
      name = init_name;
address = init_address;
telephone = init_telephone;
sex = init_sex;
dob = init_dob;
     }

           void Customer::showPersonDetails(void)
           {
        cout << "Name : " 
        << name << endl;
        cout << "Address : " 
        << address << endl ;
        cout << "Telephone : " 
        << telephone << endl;
        cout << "Sex : " 
        << sex << endl ;
        cout << "Date of Birth : " 
        << dob << endl;
           } 
```

最后是customer.h

```
 #ifndef CUSTOMER_H
      #define CUSTOMER_H

  #include <iostream>
  #include<string>

 using namespace std;

  class Customer
   {
   private:
     //
     // class members
     //
     string name; 
     string address;
     string telephone;   
     string sex;
     string dob;

   public:

     // Constructor
     Customer(string init_name, string init_address, string init_telephone, string init_sex, string init_dob);   

     // a print method
     void showPersonDetails(void);
     void changeDetails(void);

     // This operator is a friend of the class, but is NOT a member of the // class:
     friend ostream& operator <<(ostream& s, Customer& a);

        };  

        // This is the prototype for the overload
       ostream& operator <<(ostream& s, Customer& a);

           #endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:35:01.640

在您的标题中，您有以下声明：

```
// This operator is a friend of the class, but is NOT a member of the class:
friend ostream& operator <<(ostream& s, Customer& a); 
```

您的 cpp 文件中没有定义 - 您需要提供定义。

```
ostream& operator <<(ostream& s, Customer& a)
{
    s << a.name << ... etc...
    return s;
} 
```

您遇到**链接器**错误的原因是声明存在，但定义不存在。

在`Main.cpp`你有用于的`display`功能：`operator<<``Customer`

```
void display(struct Node *head) {
Node *list = head;
while(list) {
    cout << list->m_customer << " "; // this line here uses operator<< for Customer
    list = list->m_next;
} 
```

它**编译**是因为`operator<<`存在于标头中，所以可以找到符号......但在**链接**阶段找不到对象定义（的主体*）*`operator<<` - 所以你得到一个`unresolved external`链接器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:41:04.010

您应该`operator<<`在 Customer.cpp 中为您的 Customer 类实现

```
friend ostream& operator <<(ostream& s, Customer& a)
{
        s << "Name : "         << a.name << endl;
        s << "Address : "      << a.address << endl ;
        s << "Telephone : "    << a.telephone << endl;
        s << "Sex : "          << a.sex << endl ;
        s << "Date of Birth : "<< a.dob << endl;
        return s;
} 
```

# asp.net-mvc - LINQ to SQL - 填充集合属性的子属性

> ID：13597332
> 
> 赞同：1
> 
> 时间：2012-11-28T03:32:14.387
> 
> 标签：asp.net-mvc, linq-to-sql, ef-code-first

我在 ASP.NET MVC4 项目中使用 Code First 和 LINQ to SQL。在下面的查询中，我试图填充 PatientView.Appointments.ScheduledBy，但它返回 null。我尝试添加 .Include("Appointments.ScheduledBy")，但 Appointments.ScheduledBy 继续返回 null。

如何修改 LINQ to SQL 表达式以填充 ScheduledBy？

这是我的 LINQ to SQL（Id 是操作的参数）

```
var q = from p in context.Patients.Include("Appointments.ScheduledBy")
        where p.Id == Id
        select new PatientView
        {
             Patient = p,
             Appointments = p.Appointments.OrderByDescending(a => a.ScheduledFor)
        };
PatientView pv = q.Single(); 
```

PatientView 是视图的视图模型。Appointments 属性确实被填充，但 Appointments 的 ScheduledBy 属性为空。

```
public class PatientView
{
    public Patient Patient { get; set; }
    public IEnumerable<Appointment> Appointments { get; set; }
}

public class Patient
{
    public int Id { get; set; }
    public string Number { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public List<Appointment> Appointments { get; set; }
}

public class Appointment
{
    public int Id { get; set; }
    public Patient Patient { get; set; }
    public Employee ScheduledBy { get; set; }
    public DateTime ScheduledFor { get; set; }
}

public class Employee
{
    public int Id { get; set; }
    public string Email { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

# mongodb - MongoLab REST API：数组切片支持

> ID：13597334
> 
> 赞同：0
> 
> 时间：2012-11-28T03:32:24.983
> 
> 标签：mongodb, mongodb-query, mlab

想知道 MongoLab 的 REST API 中是否有数组切片支持。我正在尝试这个：

```
https://api.mongolab.com/api/1/databases/<my-db>/collections/<my-coll>?apiKey=<my-api-key>&q={_id:1234},{arrayName:{$slice:2}} 
```

我的架构采用以下格式

```
{
    "_id": "1234",
    "arrayName": [
        {   "f_id": "661963387",
            "f_name": "Test",
        },
        {   "f_id": "661963387",
            "f_name": "Test",
        },
        {   "f_id": "661963387",
            "f_name": "Test",
        }
    ]
} 
```

该查询在终端上运行。有没有办法使用 REST API 让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:13:23.087

如果将它放在字段参数“f”中，它应该可以工作。

q={'_id':1234}&f={'arrayName':{'$slice':2}}

-将要

# javascript - 在 Ember.js 中，当您手动声明视图及其对应的控制器时，是否有将其范围限定为当前应用程序状态的概念？

> ID：13597336
> 
> 赞同：1
> 
> 时间：2012-11-28T03:32:38.190
> 
> 标签：javascript, web-applications, ember.js

例如，一个特定的应用程序状态可能有一个只呈现一些背景容器的主视图，

```
App.EditView = Ember.View.extend({
      templateName:  'edit-template',
 })

App.EditController = Ember.ObjectController.extend({
      title: 'Edit state',
}) 
```

当我导航到此状态时会实例化：

```
App.editRouter = Ember.Route.extend({

    route: '/edit',

    connectOutlets: function( router, context ){           
        router.get('applicationController').connectOutlet( 'mainOutlet', 'edit' )
    }
}) 
```

到达这里后，用户可以手动声明映射到新视图和控制器（和模型，但这里没有超级相关）的新 div 元素，新 div 可能是也可能不是由 editView 呈现的 div 的子元素。

我目前的做法

```
App.smallView1 = App.SmallView.create({ 
     controller: App.smallController1
}).append()

App.smallController1 = App.SmallController.create() 
```

如您所见，这里没有任何内容表明视图和控制器声明的状态。我感到困惑的是：

这对视图-控制器与 EditView 和 EditController 的实例之间有什么关系？

pair和editRouter是什么关系？

是否应该有需要明确指定的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:32:29.320

这对视图控制器似乎没有被路由器使用，所以你必须为它们创建一个路由并将出口与你的视图控制器对连接，除非你想将此视图附加到一个赢得不改变每条路线。它也与其他视图控制器对没有任何关系。

至于你的问题：

> 这对视图-控制器与 EditView 和 EditController 的实例之间有什么关系？

`EditView`A：就目前而言，代码在小视图和控制器与编辑视图和控制器之间没有直接关系，但不同的是，这对`EditController`并不是“创建”的，而是“给定”给应用程序的，这将需要在需要时通过其自己的初始化逻辑 ( `initialize`) 或在需要时创建视图实例时注意实例化该类型。这对可能对路由器不利`smallView1`，`smallController1`因为它们的实例名称以“1”结尾，我不确定 Ember 是否期望这样，但无论如何，这些都被实例化并作为“活动”对象直接附加到应用程序，使用路由器时不需要。这回答了你的问题了吗？

> pair和editRouter是什么关系？

答：在您的代码中，`editRouter`定义了当您在该路线上时您的应用程序的状态（自`Route`extends以来）；`State`这意味着框架了解当您处于给定状态时，您需要发生一些特定的事情，例如，加载状态所需的视图，加载视图应显示的数据等......这是通过 完成的`connectOutlet`，所以对于此特定路线，您与`smallView1`或`smallController1`除非您使用不同的签名手动`connectOutlet`指定`viewClass`and没有任何类型的关系。`controller`

> 是否应该有需要明确指定的依赖项？

答：是的。使用 时`Router`，您的应用程序必须有一个名为 的控制器`ApplicationController`，而当您调用 时`connectOutlet`，您传递的名称必须对应一个视图和控制器（我认为控制器可能不是我需要的，但我目前不确定）。因此，如果您说`connectOutlet('about')`，框架将查找`AboutView`按约定命名的视图，然后将实例化此视图并在容器视图中的适当插座上呈现。

> 如果需要，控制器将如何访问路由器？

答：在您的应用程序中的任何位置，您都可以通过`App.router`假设您的应用程序名为“App”并且您的路由器名为“Router”来访问路由器，因此在您的控制器中的任何方法中，您都可以，例如，使用路由器过渡：`App.router.transitionTo('root.index.home')`。

# c - TCP/P Socket 阻塞串行连接

> ID：13597341
> 
> 赞同：3
> 
> 时间：2012-11-28T03:33:00.737
> 
> 标签：c, sockets, serial-port, posix, nonblocking

我有一个程序应该同时读取串行端口和 tcp/ip 套接字。

但是，当我通过套接字接收消息时，我只能看到串行信息。我相信这与 accept() 方法的阻塞/非阻塞有关。但是，我一直未能弄清楚如何为其添加标志。

有人有想法么？

我必须重写整个事情还是可以只添加一个标志？

```
int main(int argc, char *argv[]) {
  int       list_s;                /*  listening socket          */
  int       conn_s;                /*  connection socket         */
  short int port;                  /*  port number               */
  struct    sockaddr_in servaddr;  /*  socket address structure  */
  char      buffer[MAX_LINE];      /*  character buffer          */
  char     *endptr;                /*  for strtol()              */

  /*  Get port number from the command line, and
   *        set to default port if no arguments were supplied  */

  if ( argc == 2 ) {
    port = strtol(argv[1], &endptr, 0);
    if ( *endptr ) {
      fprintf(stderr, "ECHOSERV: Invalid port number.\n");
      exit(EXIT_FAILURE);
    }
  }
  else if ( argc < 2 ) {
    port = ECHO_PORT;
  }
  else {
    fprintf(stderr, "ECHOSERV: Invalid arguments.\n");
    exit(EXIT_FAILURE);
  }

  /*  Create the listening socket  */

  if ( (list_s = socket(AF_INET, SOCK_STREAM, 0)) < 0 ) {
    fprintf(stderr, "ECHOSERV: Error creating listening socket.\n");
    exit(EXIT_FAILURE);
  }

  /*  Set all bytes in socket address structure to
   *        zero, and fill in the relevant data members   */

  memset(&servaddr, 0, sizeof(servaddr));
  servaddr.sin_family      = AF_INET;
  servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
  servaddr.sin_port        = htons(port);

  /*  Bind our socket addresss to the 
   *    listening socket, and call listen()  */

  if ( bind(list_s, (struct sockaddr *) &servaddr, sizeof(servaddr)) < 0 ) {
    fprintf(stderr, "ECHOSERV: Error calling bind()\n");
    exit(EXIT_FAILURE);
  }

  if ( listen(list_s, LISTENQ) < 0 ) {
    fprintf(stderr, "ECHOSERV: Error calling listen()\n");
    exit(EXIT_FAILURE);
  }

  /*  Enter an infinite loop to respond
   *        to client requests and echo input  */
   int result = 0;
  int portID = -1;
  char *device = "/dev/ttyUSB1";
   int rate = convertRate("115200");
   char parity = convertParity("N");
   int databits = convertDatabits("8");
   int stopbits = convertStopbits("1");
  portID = posixComOpen(device,rate,parity,databits,stopbits);

  while ( 1 ) {

      char input = 0;

      while(posixComDataReady(portID) && posixComRead(portID, &input)) {
    printf("%c", input);
      } //while

      /* Write character to Vex */
     if(posixComWrite(portID, 'x') < 0)
       printf("POSIX: Error Writing char %c",'x');

    /*  Wait for a connection, then accept() it  */

    if ( (conn_s = accept(list_s, NULL, NULL) ) < 0 ) {
      fprintf(stderr, "ECHOSERV: Error calling accept()\n");
      exit(EXIT_FAILURE);
    }

    /*  Retrieve an input line from the connected socket
     *      then simply write it back to the same socket.     */
    Readline(conn_s, buffer, MAX_LINE-1);
    printf("Netbook got a TCP/IP message: %s\n", buffer);
    char* sendMessage = "Thanks for the message!";
    Writeline(conn_s,sendMessage , strlen(sendMessage));

    /*  Close the connected socket  */
    if ( close(conn_s) < 0 ) {
      fprintf(stderr, "ECHOSERV: Error calling close()\n");
      exit(EXIT_FAILURE);
    }

  }//while

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:41:15.197

你是对的，问题是`accept`阻塞直到有一个新的连接。

我不知道串行连接是如何工作的，但您可能想查看该`select`函数，它允许您等待几个不同的文件描述符，并在另一端有数据时响应它们。

下面是一个如何将 select 用于套接字的示例：[Server Example](http://www.gnu.org/software/libc/manual/html_node/Server-Example.html)

# python - 使用 Python ldap 模块以编程方式启用/禁用帐户？

> ID：13597345
> 
> 赞同：2
> 
> 时间：2012-11-28T03:33:55.750
> 
> 标签：python, ldap

我想以编程方式启用/禁用 LDAP 用户帐户。从命令提示符我可以使用 dsutil ，这显然设置/删除了 nsAccountLock 操作属性。我试图做 modify_s() 以在 Python 中设置和删除此属性，但始终收到以下错误消息：“对条目 '' 的 'nsAccountLock' 属性的'写入'权限不足”。

有没有办法通过 Python 以编程方式设置/删除/添加操作属性或以其他方式启用/禁用 ldap 用户？

谢谢， C

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-02T09:39:32.643

您应该使用包含一组控制位的属性“userAccountControl”。

如果您正在管理普通用户，启用用户：

```
userAccountControl = 512 
```

并禁用它：

```
userAccountControl = 514 
```

通常，如果您想启用/禁用现有用户，您应该检索当前值并以这种方式更新它。

```
userADAccountControlFlag = 2
userAccountControl = user.userAccountControl

# To enable user:
userAccountControl = userAccountControl & ~userADAccountControlFlag # (& bit-wise AND, ~ bit-wise Negate)

# To disable user:
userAccountControl = userAccountControl | userADAccountControlFlag # (| bit-wise OR)

user.userAccountControl = userAccountControl

# Then update user on ldap server 
```

您可以在此处找到有关 userAccountControl 属性的更多信息：[http ://www.selfadsi.org/ads-attributes/user-userAccountControl.htm](http://www.selfadsi.org/ads-attributes/user-userAccountControl.htm)

# ruby-on-rails - 如何修复 Ruby “没有要加载的此类文件 -- xsd/qname”错误？

> ID：13597351
> 
> 赞同：3
> 
> 时间：2012-11-28T03:34:29.140
> 
> 标签：ruby-on-rails, ruby, exception, ruby-1.9

我正在尝试运行 FlightXML2 Ruby 库来访问 FlightAware API。（图书馆的代码在这里：[https](https://github.com/flightaware/flightxml2-client-ruby) ://github.com/flightaware/flightxml2-client-ruby ）

当包含带有“require 'FlightXML2.rb'”行的库文件时，会发生以下异常：

```
LoadError: no such file to load -- xsd/qname
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /...PATH TO GEMS.../lib/FlightXML2.rb:1:in `<top (required)>'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /...PATH TO GEMS.../activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from (irb):2
    from /...PATH TO GEMS.../railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /...PATH TO GEMS.../railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /...PATH TO GEMS.../railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我怀疑这与编写库的 Ruby 1.9 和 1.8 之间的不兼容有关。有没有办法让这个工作与 Ruby 1.9 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:48:22.700

为了让 FlightXML2 在我的 Rails 项目中运行，我必须安装“xmlparser”和“soap4r”gem，并添加以下 Gemfile：

```
gem 'xmlparser'
gem 'soap4r', :git => 'git://github.com/felipec/soap4r.git' 
```

并添加以下兼容性创可贴：

```
require 'rexml/document'
require 'continuation'

class Symbol
  def sub(*args)
    to_s.sub(*args)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:05:52.027

你需要的是

```
 gem install xmlparser
gem install soap4r 
```

# java - 为什么 Java 文件权限方法在 Windows 上返回 true

> ID：13597352
> 
> 赞同：0
> 
> 时间：2012-11-28T03:34:44.857
> 
> 标签：java, windows, file-permissions

有人问我这个问题，因为我不是 Windows 用户，所以无法回答。

**请您解释一下为什么以下代码在Windows**上执行时不会返回正确的结果，而在**Linux**上运行时却返回精确的结果。

但最终在 Windows 上会引发**异常**，因为操作系统不允许程序创建文件夹。

***我们使用 JDK 6***

我们从文件夹中删除所有**权限**`c:\temp`

![在此处输入图像描述](../Images/ffb3b5ccf2999c041fc392311e30cb41.png)

我们检查程序中的权限，所有方法都返回true！！！

![在此处输入图像描述](../Images/d521283a33348eeb0a1adbed71201a61.png)

# python - 使用 bash 或 python 基于空格/制表符解析字符串的行

> ID：13597353
> 
> 赞同：1
> 
> 时间：2012-11-28T03:34:59.903
> 
> 标签：python, bash, parsing, whitespace

我正在使用 httpry 从我机器上的接口中提取 http 数据包。它以非常干净的格式输出结果，列由空格或制表符分隔。这是输出中的示例行。

```
2012-11-27 20:29:22     192.168.1.132   74.125.224.51   >       GET     www.google.com  /       HTTP/1.1        -       - 
```

我正在尝试编写一个脚本（在 bash 或 python 中）来抓取网站，在本例中为 www.google.com，并将它们写入文件。将它们写入文件很容易，但我没有任何基于空格或制表符解析的经验。如果有人能让我指出如何做到这一点的正确方向，那就太好了。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:37:23.613

在我看来，这`awk`就是这里的工作工具（来自 bash 脚本）：

```
httpry -other -args -here | awk '{print $7}' > outfile.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T03:40:48.843

在 Python 中，只需对字符串使用 split 方法。

**代码**

```
data = "2012-11-27 20:29:22     192.168.1.132   74.125.224.51   >       GET     www.google.com  /       HTTP/1.1        -       -"
print data.split() 
```

**输出**

```
['2012-11-27', '20:29:22', '192.168.1.132', '74.125.224.51', '>', 'GET', 'www.google.com', '/', 'HTTP/1.1', '-', '-'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:21:59.687

您可以在 bash 中使用“set --”根据空格将字符串拆分为单词。例子：

```
echo "2012-11-27 20:29:22     192.168.1.132   74.125.224.51   >       GET     www.google.com  /       HTTP/1.1        -       -" \
| while read line; do 
    set -- $line;
    N=$#;
    for ((i=0; i<N; i++)); do
        echo "Field $i = '$1'";
        shift;
    done;
  done 
```

输出：

```
Field 0 = '2012-11-27'
Field 1 = '20:29:22'
Field 2 = '192.168.1.132'
Field 3 = '74.125.224.51'
Field 4 = '>'
Field 5 = 'GET'
Field 6 = 'www.google.com'
Field 7 = '/'
Field 8 = 'HTTP/1.1'
Field 9 = '-'
Field 10 = '-' 
```

要仅提取字段 7，请尝试

```
while read line; do set -- $line; echo "$7"; done 
```

# ios - 当起点和终点已知但高度可变时，如何在 cocos2d/box2d 中创建预览轨迹？

> ID：13597355
> 
> 赞同：4
> 
> 时间：2012-11-28T03:35:12.090
> 
> 标签：ios, cocos2d-iphone, box2d-iphone

我是一位经验丰富的 iPhone 开发人员，但对 Cocos2D 和 Box2D 不熟悉，我完全承认我需要物理复习。我要构建的是预览轨迹（一条弧线表示基于输入变量的弹丸飞行路径 - 类似于在许多愤怒的小鸟风格游戏中看到的）。

不过，我想做一些不同的事情，在其中设置起点（屏幕上的弹丸开始位置）和终点（目标位置）。然而，基于用户输入的抛物线高度会发生变化。所以从这个意义上说，我不是使用抛物线路径来预览目标将降落的位置，而是使用弹丸击中目标的角度（同样，抛物线总是在目标处终止）。

我还没有在网上看到任何完全满足我需求的东西。大多数可用代码更多地与向用户显示弹丸将降落的位置有关。我想确定角度（矢量）和施加到身体以匹配不同抛物线幅度的脉冲，但总是在同一位置结束。一张图片值一千字，所以我已经链接到一张自制的图片来尝试帮助解释（所以不会让我嵌入图片）。

[示例图片](https://dl.dropbox.com/u/93968151/Blank.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:53:14.790

让我们用数学模型来表示......`Angle`抛物线的方向是输入变量，抛物线在`0`和中穿过 x 轴`target point`，`height`将被计算。

抛物线看起来像这样：`y = x*(a-x)*b`，其中`a`定义到目标点的距离，`b`是一些（与`a`）影响起始角度和高度的值。我们可以通过`atan (x/y)`原点中心计算角度。我们知道，正切表示抛物线的导数。导数是`y' = a*b - 2*x*b`，并且在原点中心`y=0`和`x=0`，我们得到`[derivative in origin center] = a*b`。`a`被预定义为到目标点的距离，因此`angle`受变化`b`:的影响`angle = atan(a*b)`。

此时我们有抛物线方程`y = x*(a-x)*b`，预定义`a=[distance to target point]*4`和角度方程`angle=atan(a*b)`，其中`b`是输入值。例如：

*   到点的距离是 10 ->`a=40`
*   用户输入 45* -> tan(45*) = 1, `b = tan(45*)/a`->`b=1/40`
*   将这些值放入等式中`y = x*(a-x)*b`：`y = x*(40-x)/40`并检查...

至于最大高度，它是根据`a*x^2+b*x+c = 0`条件为的方程计算的`х=-b/2а`。我想，自己计算应该不难:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:33:58.493

Try checking Bezier curves. You can define the path you need using them. You can use them with or without cocos 2d.

# php - wordpress 类文件获取 $_GET

> ID：13597359
> 
> 赞同：0
> 
> 时间：2012-11-28T03:35:43.283
> 
> 标签：php, wordpress, class

做某事，我被困在一个点上。

我有一个在 wordpress 页面上加载的类文件。我想要做的是寻找`$_GET`vars 是否存在，如果它们在我的类中调用一个函数。

如果有帮助，我会在班级顶部使用构造函数。

反正我能做到吗？他是我上课开始时的 __construct 东西

```
class mijireh_class extends wpsc_merchant
{
function __construct( $purchase_id = null, $is_receiving = false ) {
    $this->name = __( 'Mijjireh', 'wpsc_gold_cart' );
    parent::__construct( $purchase_id, $is_receiving );

    if(!class_exists('Mijireh')) {
        require_once dirname( __FILE__ ) . DIRECTORY_SEPARATOR . 'mijireh'. DIRECTORY_SEPARATOR . 'Mijireh.php';
    }

    add_action('init', array(&$this, 'mijireh_notify'), 10, 2);
}

public function mijireh_notify()
{
    if(isset($_GET['task']) && $_GET['task'] == 'mijireh_notify') {
        print $_GET['task'];
        exit;
             }
     }
} 
```

我尝试刷新该页面并传递参数？task=mijireh_notify&order_number=8001354073961 但它没有调用函数，我得到了打印和退出，所以我应该知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:42:08.537

对 $_GET 数据采取行动：

```
add_action('init', 'process_get');
//function in your class
function process_get(){
 if(isset($_GET['som_field'])) {
   // process $_GET data here
 }
} 
```

你的意思是这样的吗

# ajax - JQuery Ajax 并将多个复杂对象发布到 asp.net MVC 控制器

> ID：13597361
> 
> 赞同：5
> 
> 时间：2012-11-28T03:35:44.680
> 
> 标签：ajax, asp.net-mvc

`你好，

将多个参数发布到 mc 控制器方法时出现问题。

```
controller...
[HttpPost]
public ActionResult SaveSomething(SomeDomainObject domainObject, bool anOption)
{
}

Ajax Code...
function performPostData(postDataOptions,closeWindow) {
        $.ajax({ type: postDataOptions.httpVerb,
            url: postDataOptions.url,
            datatype: "json",
            traditional: true,
            data: postDataOptions.data(),
            success: function () {
                if (closeWindow) {
                    var window = $('#window').data("kendoWindow");
                    window.close();             
                }
            },
            error: function (xhr, status, error) {
                var msg = JSON.parse(xhr.responseText);
                var validator = $("#editBase").kendoValidator().data("kendoValidator"),
                status = $(".editValidationStatus");
                var err = msg.Message;
                status.text(err).addClass("invalid");
            }
        });
    }

JScript function to format data...

function GetPostData()
{
    var _domainObject={            
            prop1: 1,
            prop2: 2,
            prop3: 3                      
        };
        return JSON.stringify({ domainObject:_domainObject,anOption: true});
} 
```

我在网络捕获中看到这是请求正文：

```
{"domainObject":{"prop1":1,"prop2":2,"Prop3":3},"anOption":true} 
```

控制器引发以下异常：

```
The parameters dictionary contains a null entry for parameter 'anOption' of non-nullable type 'System.Boolean' for method 'System.Web.Mvc.ActionResult SaveSomething(Domain.Data.SomeDomainObject, Boolean)' in 'Reports.Controllers.TestController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. Parameter name: parameters 
```

我已经旋转了好几个小时，试图获取一个简单的域对象和另一个 bool 类型的参数来序列化并传递给我的控制器。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T19:54:43.920

看起来您在 jquery ajax 调用中缺少内容类型参数。您应该将其显式设置为 json，如以下代码所示：

```
function performPostData(postDataOptions,closeWindow) {
    $.ajax({ type: postDataOptions.httpVerb,
        url: postDataOptions.url,
        datatype: "json",
        contentType: "application/json; charset=utf-8",

        ...rest of your code 
```

否则它将获得其默认值（请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）：

> 应用程序/x-www-form-urlencoded；字符集=UTF-8

# javascript - 我的数组输出中的这个“#”来自哪里？

> ID：13597363
> 
> 赞同：0
> 
> 时间：2012-11-28T03:35:49.807
> 
> 标签：javascript, jquery, arrays

编辑我简化了

```
out.push('<li>' + clicks[i].target + outputTime + 'm</li>');
        }
(".taskList ul li p").html(out.join('')); 
```

至

```
$(".taskList ul li p").html(outputTime); 
```

/EDIT 我正在使用带有回调函数的 jQuery Jeditable 插件来在字段更改时启动计时器。

单击按钮时，计算 Jedit 和单击事件之间的时间，并将值放置在已编辑的 '..click to edit' 文本旁边的 dom 中-在将整个 Div 移动到新部分之前，计时器为重置并创建一个新的 Jeditable 实例来代替原始实例。

我的困难在于，我从另一个堆栈溢出帖子[http://jsfiddle.net/wwnyY/11/](http://jsfiddle.net/wwnyY/11/)上找到的 jsfiddle 中获取了大部分代码的计时器部分。这个输出是在我的结果前面放置一个 # 字符。

我发现计时器代码正在使用 push() 方法，这正在返回一个数组，我猜这就是我的额外字符的来源。就编程而言，数组是我目前的绊脚石，我想知道是否有人可以解释我如何正确处理数组以删除 # 或者我可以在下面的代码中用什么替换它（我无法放置外部jsfiddle中的链接，因此已发布代码[http://binarygeometry.net/test/index.html](http://binarygeometry.net/test/index.html)）

```
<div class="row">
   <div class="eight columns">
   <div class="row taskList">
       <ul>
           <li>
          <div class="nine columns task">
          <div class="edit">
                        ..click to edit
                      </div>
          </div>
              <div class="three columns time">
                     <p>00.00</p>
              </div>
       </li>
       </ul>
 </div>
     <ul class="row doneList">
     <li>

     </li>
 </ul>       
</div>

<div class="four columns">
<p><a href="#" class="success button" id="done">Go!</a></p>
</div>
</div>

 $(document).ready(function() {

 $(".edit").editable("echo.php", {
     placeholder : "Click me to edit",
     loadtype : "POST",
     callback: function(value, settings) {
      startTime = new Date().getTime();
      console.log(startTime);
     }
 });

$("#done").click(function(e){

    function update_output() {  

        var out  = [],
            displayTime;

        for (var i = 0, len = clicks.length; i < len; i++) {
            displayTime = (clicks[i].time - startTime);
            console.log(displayTime);
            outputTime = displayTime //* 0.00001666666;
            console.log(outputTime);
            outputTime = outputTime.toFixed(0);
            console.log(outputTime);
            out.push('<li>' + clicks[i].target + outputTime + 'm</li>');
        }
        $(".taskList ul li p").html(out.join(''));
    }

    var clicks = [];

    clicks.push({ time : new Date().getTime(), target : $(this).attr('href') });
    update_output();

    $(".taskList ul li").appendTo(".doneList")
    $(".edit").removeClass("edit").unbind("click.editable");
    $("<li><div class='nine columns task'><div class='edit'>..click to edit</div><div class='three columns time'><p></p></div></li>")
        .appendTo(".taskList ul");

    $(".edit").editable("echo.php", {
         placeholder : "Click me to edit",
         loadtype : "POST",
         callback: function(value, settings) {
            startTime = new Date().getTime();
            console.log(startTime);
         }
     });
    e.preventDefault();//
});

 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:40:21.293

您不想添加`#`网址吗？然后添加处理程序`return false;`的底部`click`。（使用代替`e.preventDefault()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:22:17.840

通过简化

```
 out.push('<li>' + clicks[i].target + outputTime + 'm</li>');
    }
 (".taskList ul li p").html(out.join('')); 
```

至

```
//out.push('<li>' + clicks[i].target + outputTime + 'm</li>');
  }
$(".taskList ul li p").html(outputTime); 
```

html() 函数不再通过 push() 方法输出变量，而是简单地将 outputTime 变量作为节点插入。

# javascript - JavaScript 中 32 位有符号乘法与 64 位结果

> ID：13597364
> 
> 赞同：1
> 
> 时间：2012-11-28T03:36:03.480
> 
> 标签：javascript, algorithm, integer, multiplication

我正在用 JavaScript 开发一个 VM，需要将两个带符号的 32 位数字与存储为两个 32 位带符号数字（高 32 位和低 32 位）的 64 位带符号结果相乘。

我设法通过将两个数字拆分为 16 位对并将它们相乘来对无符号数字做同样的事情`a*b = (ah * 2^16 + al) * (bh * 2^16 + bl)`：

```
function mul_32_unsigned( a, b )
{
  var ah = a >>> 16;
  var bh = b >>> 16;
  var al = a & 0xFFFF;
  var bl = b & 0xFFFF;

  var mid = ah * bl + al * bh;
  var albl = al * bl;

  var imm = mid + ( albl >>> 16 );

  var carry = ( imm > 0xffffffff ) ? 0x10000 : 0;

  var lo = ( ( mid << 16 ) + albl ) >>> 0;
  var hi = ( ah * bh + ( imm >>> 16 ) + carry ) >>> 0;

  return [ lo, hi ];
} 
```

但是，我真的不明白如何对签名号码做同样的事情。我唯一能想到的就是否定任何负数`a`或`b`使两者都为正数，执行无符号乘法，然后在需要时否定结果，但这感觉像是一个毫无头绪的次优解决方案。关于如何做得更好的任何想法？将`a`和`b`分成两个有符号的 16 位数字似乎是合乎逻辑的，但是我对如何在没有任何错误的情况下执行其余部分感到迷茫。

ps 如果您认为我的未签名实现也不是最理想的，也请随时指出这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:50:36.323

将带符号的 32 位整数拆分为两个 16 位整数的正确方法是作为带符号的 16 位上半部分和无符号的 16 位下半部分 - 您需要通过减去一个来对负数进行调整从上半部分开始，并在下半部分加上 2^16（以使其为正）。

例如，数字 -100000 应该成为 -2 的上半部分和 31072 的下半部分。通过重构 -2 * 2^16 + 31072 == -131072 + 31072 == -100000 可以看到。

在此之后，您可以正常执行交叉乘法算法；结果的上半部分将是一个有符号的 32 位整数（因为它是其中一些有符号的乘积之和），而下半部分将是一个无符号的 32 位整数。解释它涉及反向执行相同的“技巧”。

顺便说一句，这对应于一个相当自然的解释，如果你在一台机器上进行本机乘法运算时查看本机整数的各个单词，你会看到什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-04T16:59:16.900

我发现自己遇到了同样的问题，但没有找到完整的回复。这不是微不足道的。所以我在这里提出了一个解决方案：

```
if (!Math.umul32_64) {
    Math.umul32_64 = function (a, b, result) {
        if (result === undefined) result = [0, 0];

        a >>>= 0;
        b >>>= 0;

        if (a < 32767 && b < 65536) {
            result[0] = a * b;
            result[1] = (result[0] < 0) ? -1 : 0;
            return result;
        }

        var a00 = a & 0xFFFF, a16 = a >>> 16;
        var b00 = b & 0xFFFF, b16 = b >>> 16;

        var c00 = a00 * b00;
        var c16 = (c00 >>> 16) + (a16 * b00);
        var c32 = c16 >>> 16;
        c16 = (c16 & 0xFFFF) + (a00 * b16);
        c32 += c16 >>> 16;
        var c48 = c32 >>> 16;
        c32 = (c32 & 0xFFFF) + (a16 * b16);
        c48 += c32 >>> 16;

        result[0] = ((c16 & 0xFFFF) << 16) | (c00 & 0xFFFF);
        result[1] = ((c48 & 0xFFFF) << 16) | (c32 & 0xFFFF);
        return result;
    };
}

if (!Math.imul32_64) {
    Math.imul32_64 = function (a, b, result) {
        if (result === undefined) result = [0, 0];

        if (a == 0) return result[0] = result[1] = 0, result;
        if (b == 0) return result[0] = result[1] = 0, result;

        a |= 0, b |= 0;

        if ((a >= -32768 && a <= 32767) && (b >= -32768 && b <= 32767)) {
            result[0] = a * b;
            result[1] = (result[0] < 0) ? -1 : 0;
            return result;
        }

        var doNegate = (a < 0) ^ (b < 0);

        Math.umul32_64(Math.abs(a), Math.abs(b), result);

        if (doNegate) {
            result[0] = ~result[0];
            result[1] = ~result[1];
            result[0] = (result[0] + 1) | 0;
            if (result[0] == 0) result[1] = (result[1] + 1) | 0;
        }

        return result;
    };
} 
```

# drupal - 从drupal的arg（x）中清理/转义输出有必要吗？

> ID：13597369
> 
> 赞同：6
> 
> 时间：2012-11-28T03:36:37.817
> 
> 标签：drupal, xss

我正在安装 arg(x) 的 drupal 7

[http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/arg/7](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/arg/7)

已经在 html 输出、视图模板和其他地方等中使用了很多。虽然我已经查看了文档并搜索了这个主题，但我仍然对是否需要清理/转义 arg 的输出感到困惑(x) 使用 php 的 htmlspecialchars 或 drupal 的 check_plain 等来防止 xss。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:23:09.267

从技术上讲，根据我的测试，您**确实需要**逃避它。但好的一面是，`arg()`并不总是使用直接的用户输入。

如果 URL（或更准确地说，`$_GET['q']`）是`node/<h3>/edit`，则`arg(1)`返回`<h3>`不带检查的内容。如果您想自己测试，请添加下面的代码段并自己查看。

```
<?php
echo (arg(1, 'node/<h3>/edit')); ?>Normal text 
```

您现在将在 h3 中看到“普通文本”。

如果一个节点的 ID 为 4，则在查看该节点时，`$_GET['q']`将为 node/4。如果路径没有别名，则 URL 将相同。根据上面的示例，如果用户打开`node/<h3>`，`arg(1)`将`<h3>`不会转义，但有疑问，用户会看到您使用的代码段，`arg()`因为该页面返回 404 结果（您看不到任何块、页面内容等）。

使用`arg()`in `t()`、 url()`l()`和其他函数将始终对结果进行转义/清理，因此在实际世界中，您不太可能找到有人可以对您的网站进行 XSS 攻击的真实案例。

这是我能想到的一个不好的用途。在 page.tpl.php 文件中，您可以从 URL 路径添加一个类，如下所示：

```
<body class="<?php print arg(0); ?>"> 
```

您可以期望在节点页面上，您会看到 body 标签的类是“node”，而在管理页面上，类是“admin”。但是想象一下用户打开一个这样的页面：

```
http://example.com/" onclick="alert('You are clicking on me');" 
```

所以 body 标签的实际 HTML 应该是这样的：

```
<body class="" onclick="alert('You are clicking on me');"> 
```

现在你会看到 body 标签有一个空的 class 属性，并且 body 还添加了一个 onclick 事件。这可能是你能看到的最糟糕的例子——但我只是想给你看一些真实的例子。不过使用`$node->nid`是安全的。

# c - 从有问题的伪代码中插入和修复红黑树

> ID：13597372
> 
> 赞同：1
> 
> 时间：2012-11-28T03:36:53.387
> 
> 标签：c, debugging, tree, segmentation-fault, red-black-tree

我有来自 Thomas H Cormen 和其他红树和黑树的“算法简介”一书中的伪代码。

插入和插入修复的伪代码位于[此处](http://net.pku.edu.cn/~course/cs101/2007/resource/Intro2Algorithm/book6/chap14.htm)

我在这一行遇到了一个段错误：`while(n->parent->color == 'r')`在尝试插入“8”时使用以下测试数据的插入修复函数中：

测试数据：

```
i 5
i 7
i 1
i 8
i 3 
```

我相信这是因为 n 的父级可能不存在？但我不确定如何在不完全搞砸伪代码的情况下适当地更改代码。：

这是我的插入：

```
void insert_fix(node * n)
{
    node * y;
    if(n->parent)
    {
        while(n->parent->color == 'r')
        {
            if(n->parent == n->parent->parent->left)
            {
                y = n->parent->parent->right;
                if(y->color == 'r')
                {
                    n->parent->color = 'b';
                    y->color = 'b';
                    n->parent->parent->color = 'r';
                    n = n->parent->parent;
                }
                else
                {
                    if(n == n->parent->right)
                    {
                        n = n->parent;
                        rotate_left(n);
                    }
                    n->parent->color = 'b';
                    n->parent->parent->color = 'r';
                }
            }
            else
            {
                y = n->parent->parent->left;
                if(y->color == 'r')
                {
                    n->parent->color = 'b';
                    y->color = 'b';
                    n->parent->parent->color = 'r';
                    n = n->parent->parent;
                }
                else
                {
                    if(n == n->parent->left)
                    {
                        n = n->parent;
                        rotate_right(n);
                    }
                    n->parent->color = 'b';
                    n->parent->parent->color = 'r';
                }
            }
        }
    }
    root->color = 'b';
} 
```

这是我的插入修复：

```
void insert_fix(node * n)
{
    node * y;
    if(n->parent)
    {
        while(n->parent->color == 'r')
        {
            if(n->parent == n->parent->parent->left)
            {
                y = n->parent->parent->right;
                if(y->color == 'r')
                {
                    n->parent->color = 'b';
                    y->color = 'b';
                    n->parent->parent->color = 'r';
                    n = n->parent->parent;
                }
                else
                {
                    if(n == n->parent->right)
                    {
                        n = n->parent;
                        rotate_left(n);
                    }
                    n->parent->color = 'b';
                    n->parent->parent->color = 'r';
                }
            }
            else
            {
                y = n->parent->parent->left;
                if(y->color == 'r')
                {
                    n->parent->color = 'b';
                    y->color = 'b';
                    n->parent->parent->color = 'r';
                    n = n->parent->parent;
                }
                else
                {
                    if(n == n->parent->left)
                    {
                        n = n->parent;
                        rotate_right(n);
                    }
                    n->parent->color = 'b';
                    n->parent->parent->color = 'r';
                }
            }
        }
    }
    root->color = 'b';
} 
```

*为了清楚起见，我在上面的 while 循环周围添加了额外的 if 语句，这样如果节点是根节点就不会发生任何事情，但是它并没有像我希望的那样解决我的问题。

为了更好地衡量，我根据我在互联网上找到的信息编写了左右旋转功能略有不同，我认为它们写得很好：

```
void rotate_right(node *n)
{
    node* left = n->left;
    swap_nodes(n, left);
    n->left = left->right;
    if(left->right != NULL)
        left->right->parent = n;
    left->right = n;
    n->parent = left;
}

void rotate_left(node *n)
{
    node* right = n->right;
    swap_nodes(n, right);
    n->right = right->left;
    if(right->left != NULL)
        right->left->parent = n;
    right->left = n;
    n->parent = right;
}

void swap_nodes(node* oldNode, node* newNode)
{
    if(oldNode->parent == NULL)
        root = newNode;
    else
    {
        if(oldNode == oldNode->parent->left)
            oldNode->parent->left = newNode;
        else
            oldNode->parent->right = newNode;
    }

    if(newNode != NULL)
        newNode->parent = oldNode->parent;
} 
```

同样，我觉得我的真实代码准确地遵循了伪代码，但我无法弄清楚我缺少的部分。

让我知道！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:29:30.323

我认为 CLRS 中的 RBT 插入算法存在错误。当 parent 和 uncle 的颜色都是红色时，算法首先将 parent 和 uncle 重新绘制为黑色，然后向上移动，如您的代码中所示`n = n->parent->parent`。然而，这并不是案件的结束。相反，算法应该在向上移动后递归调用自身。即，以您的代码为例，应该有这样的语句：

```
insert_fix(n); 
```

后`n = n->parent->parent.`

如果我错了，请纠正我。顺便说一句，[维基百科条目“红黑树”](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)在这种情况下可能会有所帮助。

# java - 将列表写入文件

> ID：13597373
> 
> 赞同：2
> 
> 时间：2012-11-28T03:37:05.983
> 
> 标签：java, list, arraylist

我正在尝试将列表中的所有元素存储在文件中以供以后检索，因此当程序关闭时，数据不会丢失。这可能吗？我写了一些代码来尝试，但这不是我想要的。这是我到目前为止所写的。

```
import java.util.*;
import java.io.*;
public class Launch {
    public static void main(String[] args) throws IOException {
        int[] anArray = {5, 16, 13, 1, 72};
        List<Integer> aList = new ArrayList();
        for (int i = 0; i < anArray.length; i++) {
            aList.add(anArray[i]);
        }
        File file = new File("./Storage.txt");
        if (!file.exists()) {
            file.createNewFile();
        }
        FileWriter fw = new FileWriter(file);
        BufferedWriter bw = new BufferedWriter(fw);
        for (int i = 0; i < aList.size(); i++) {
            bw.write(aList.get(i));
        }
        bw.flush();
        bw.close();
    }
} 
```

建议？

编辑：我正在寻找要写入文件的数组本身，但这就是正在写入的内容。 ![在此处输入图像描述](../Images/bbe958de981a857a52df758392a56045.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:42:45.163

```
import java.util.*;
import java.io.*;
public class Launch {
    public static void main(String[] args) throws IOException {
        int[] anArray = {5, 16, 13, 1, 72};
        List<Integer> aList = new ArrayList();
        for (int i = 0; i < anArray.length; i++) {
            aList.add(anArray[i]);
        }
        File file = new File("./Storage.txt");
        if (!file.exists()) {
            file.createNewFile();
        }
        FileWriter fw = new FileWriter(file);
        BufferedWriter bw = new BufferedWriter(fw);
        for (int i = 0; i < aList.size(); i++) {
            bw.write(aList.get(i).toString());
        }
        bw.flush();
        bw.close();
    }
} 
```

在写入之前，我编辑了 bw.write 行以将 int 更改为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-07T06:27:46.297

刚刚为此学习了一个干净的解决方案。使用apache commons-io 的[FileUtils](https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html)。

```
File file = new File("./Storage.txt");
FileUtils.writeLines(file, aList, false); 
```

将 false 更改为 true，如果要附加到文件，以防它已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:43:39.443

如果您希望它写入实际数字，请使用 a`PrintWriter`代替。

```
PrintWriter pw = new PrintWriter(new File(...));
pw.print(aList.get(i)); 
```

# javascript - D3 水平条形图的条形并非全部出现

> ID：13597374
> 
> 赞同：0
> 
> 时间：2012-11-28T03:37:10.353
> 
> 标签：javascript, d3.js

我在 d3 中创建了一个条形图

```
 $(document).ready(function(){
    var data = [0,20,10,60,100,75,40,20,25,2];
 var width = 300;
 var height = 300;
 var padding = 1;
    var userPerformanceChart = d3.select("#userPerformanceChart").append("svg").attr("width",width).attr("height",height);
    userPerformanceChart.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
    .attr("x",40)
    .attr("y",function(d,i){
        console.log("function being called");
        return i*(width/data.length);
    })
    .attr("width",function(d){
        return d;
    })
    .attr("height",width/data.length - padding)
    .attr("fill",function(d){
        return "rgb(0," + (d*2) + ",0)";
    }); 
```

这是我的 html -

```
<div class="clear"></div>
<div class="horizontalMenu clear" id="quizSummaryMenu">
    <a href="#" class="quizSummaryLink" id="quizLink">Quiz</a>
    <a href="#" class="quizSummaryLink" id="historyLink">Statistis</a>
    <a href="#" class="quizSummaryLink" id="topScorersLink">Top Scorers</a>
    <a href="#" class="quizSummaryLink" id="practiceModeLink">Practice Mode</a>
    <a href="#" class="quizSummaryLink" id="editQuizLink">Edit Quiz</a>
</div>
<div class="subContainer" id="quizDisplayContainer">

<div id="userPerformanceChart"></div>

</div> 
```

顶部矩形没有出现，它似乎出现在菜单后面，我不知道为什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:46:02.520

实际上顶栏存在...由于数据数组的第一个索引为0，因此第一个栏的宽度计算为零...

# arrays - 数组。平均图像。数据分析

> ID：13597377
> 
> 赞同：3
> 
> 时间：2012-11-28T03:37:30.140
> 
> 标签：arrays, matlab, math, mean

**分析**：简而言之，我正在使用散射仪数据寻找森林砍伐率。为此，我需要将所有数据（941 个 .sir 文件）加载到一个数组中。每个 .sir 文件代表 4 天的数据。然后我使用这个数组来找到平均值和标准差。为了检测植被的变化，我需要确定并去除季节性平均值。然后，我将估计数据的标准偏差和与当地标准相关的阈值，并确定给定年份中变化较大（高标准）的区域。这些地区发生重大变化，可能与森林砍伐有关。高阈值是去除海洋。低值是关键——要可靠地看到变化，它必须大于标准偏差的 3 倍。

**问题/问题**：我不知道如何平均然后将 7 个数据文件（28 天，大约一个月）存储到一个数组中。

**目标**：获取每个月平均值之间的差异（7-8 个 .sir 文件）并将这些值存储到数组中以进行比较。

![例子](../Images/4bfd8eb0225452c7bc5426850ac1717c.png)

尝试这样做：

> 1) 填充 3D 矩阵/数组。预分配数组。设置一个计数器变量。循环遍历每 7 个文件（例如，names(1:7:end)）并将其插入矩阵，使用计数器作为第三维的索引：
> myMat(:,:,counter) = loadingir(...);
> 计数器 = 计数器 + 1；

整个代码实际上是这样的：

```
%monthly avg test
%N=floor(length(fname)/7);
%dayv = zeros(7,x2-x1+1,y2-y1+1);
%for i=1:N
  %tmp2=zeros(size(tmp));
  %M=min(7,length(fname)-((N-1)*6+1));
  %for j=1:M
    %ii=j+(i-1)*7;
    %tmp = loadsir(fname(ii).name);
    %tmp2=tmp2+tmp/M;

x1=495;
x2=600;
y1=394;
y2=501;

meanArray = zeros(1,941);
fname = dir('*sir');
[tmp, head] = loadsir(fname(1).name);
dayh = zeros(length(fname),x2-x1+1,y2-y1+1);

%use temporary array to simplify 3d array creation
for i=1:length(fname)
   tmp = loadsir(fname(i).name);
   dayh(i,:,:) = tmp(x1:x2,y1:y2);
end

% create mean and standard deviation images
av=squeeze(mean(dayh,1));
st=squeeze(std(dayh,1));

%store means into an array
meanArray(:,:) = av;

% display mean image
figure(1)
imagesc(av)
colorbar;

% display std image
figure(2)
imagesc(st)
colorbar;

% High threshold = bad data
ThresH=0.35;
% Low threshold = area of significant change
thresL=st*3;

% create copy of mean image
img=av;
% apply threshold
ind= st>ThresL & st <ThresH;
img(ind)=0; % set to high value to make more visible
ind=find(st>=ThresH);
img(ind)=-30; % discard very high variance areas

% display image with significant change indicated
figure(3)
imagesc(img)
colorbar; 
```

如果有人想提供帮助，他们可以在 gtalk 上添加我：exzacklyright@gmail.com 我最好在星期五之前完成这个，这样我就有时间在下星期一之前设置一个演示文稿。

# windows-8 - 此应用程序无法打开

> ID：13597379
> 
> 赞同：-2
> 
> 时间：2012-11-28T03:37:35.890
> 
> 标签：windows-8, screen-resolution

我在 inspiron 戴尔 mini 10 中安装了 Windows 8 的试用版，我打开它显示的应用程序

> 此应用无法打开屏幕分辨率太低，无法运行此应用

我的屏幕分辨率是 1024*600 错误信息显示

> 您的分辨率低于 1024*768 有时项目可能不适合并且应用程序可能无法打开

帮助我了解如何在 Windows 8 中打开应用程序和调整设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:08:58.057

**请遵循以下说明：**

1.  按“WIN+R”组合键启动“运行”对话框，然后键入 regedit 并按 Enter。它将打开注册表编辑器。

2.  现在按“Ctrl+F”键，它将打开查找对话框。您也可以使用“编辑 -> 查找”菜单打开它。现在在查找文本框中键入以下文本：

**Display1_DownScalingSupported**

1.  单击“查找下一个”按钮，它将让您转到上述注册表项的第一次出现。找到名称为“Display1_DownScalingSupported”的键后，将其值从 0 更改为 1

2.  按 F3 键，它会让您转到下一个出现的文本字符串。如果您发现更多名称为“Display1_DownScalingSupported”的键，请将所有键的值从 0 更改为 1

3.  完成后，关闭注册表编辑器并重新启动系统。

4.  重新启动后，右键单击桌面并选择“屏幕分辨率”选项。现在您应该在屏幕分辨率列表中获得 1024x768 选项。选择它并应用更改。

5.  就是这样。这个技巧将迫使 Windows 认为您的屏幕分辨率为 1024x768，您将能够毫无问题地运行 Metro 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:50:22.217

运行 Windows 应用商店（以前称为“Metro 风格”）应用程序的最低分辨率为 1024x768。这不适用于您的所有桌面应用程序。这是对此[文档的参考](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780612.aspx#minimum_screen_resolutions)。

# timer - del_timer_sync() 当处理程序使用 mod_timer 重新武装其计时器时

> ID：13597385
> 
> 赞同：4
> 
> 时间：2012-11-28T03:38:36.787
> 
> 标签：timer, linux-kernel

我正在使用一个周期性计时器，其中处理函数在使用 mod_timer 完成时重新启动计时器。当我使用 del_timer_sync() 终止计时器并且处理程序正在运行时，这是否意味着计时器被重新武装并且没有被删除，或者该函数是否以某种方式终止了计时器？在它不杀死计时器的情况下，有没有办法通过返回值知道函数是否必须等待处理程序完成？在这种情况下，我可以循环调用 del_timer_sync() 直到返回不是那个值。我正在使用的内核版本是 2.6.26.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:49:40.667

查看[`del_timer_sync()`Linux内核中是如何定义的](http://lxr.free-electrons.com/source/kernel/time/timer.c#L1066)，它将确保在它返回之前，定时器被杀死并且不会被重新武装。

换句话说，`del_timer_sync()`是一个阻塞函数调用。调用时，如果计时器处理程序正在运行，则`del_timer_sync()`仅**在**计时器处理程序完成最后一次执行后返回。

# android - 如何在fragment中增加fragment

> ID：13597387
> 
> 赞同：0
> 
> 时间：2012-11-28T03:38:56.440
> 
> 标签：android, button, fragment

我想用这个按钮来增加上面片段中的片段。

请告诉我该怎么做。谢谢各位朋友。

我的想法是做一个操作界面切换一个屏幕五个按钮分别连接到不同屏幕不同屏幕有五个按钮

这是我的源代码。备注错误码

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view = inflater.inflate(R.layout.indexomune, container, false);
    Button USER = (Button)view.findViewById(R.id.USER);
    USER.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
                FragmentManager user = getFragmentManager();
                FragmentTransaction User = user.beginTransaction();
                Fragment fragment = user.findFragmentById(R.id.USSER);
                if (fragment == null) {
                    String title = "Fragment A";
                    usermenu TAT = new usermenu(title);
                    user.add(R.id.USSER, TAT);
                    //The method add(int, usermenu) is undefined for the type FragmentManager
                    user.addToBackStack(null);
                    //The method addToBackStack(null) is undefined for the type FragmentManager
                    user.commit();
                    //The method commit() is undefined for the type FragmentManager
                }

        }

    });
    return view;

} 
```

# python - 你如何在python中的变量旁边放置一个句点？

> ID：13597389
> 
> 赞同：0
> 
> 时间：2012-11-28T03:39:08.720
> 
> 标签：python

我是 python 新手，所以这对你们来说真的很容易，我敢肯定。

我在 python 中写了一个简单的东西，但我很好奇如何在我正在使用的变量旁边放置一个句点，我将在这里向您展示：

```
i = 5
print "i is equal to", i,"." 
```

我运行它，结果如下：

```
i is equal to 5 . 
```

你是怎么做到的，所以（句号）就在 5 旁边，比如“我等于 5”。

我试着搜索这个，但我觉得它太简单了，我找不到它，哈哈，我不知道确切的名字是什么，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T03:40:59.677

使用[字符串格式](http://docs.python.org/2/library/stdtypes.html#string-formatting)：

```
print "i is equal to %d." % i 
```

从 Python 2.6 开始，字符串有一个[`.format()`](http://docs.python.org/2/library/stdtypes.html#str.format)可以交替使用的函数：

```
>>> print "i is equal to {}".format(i)
i is equal to 5 
```

如果您有一个在格式字符串中多次使用的占位符，这很有用：

```
>>> print "i={0}, a.k.a. 'i is equal to {0}.'".format(i)
i=5, a.k.a. 'i is equal to 5.' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T03:49:10.203

你也可以像这样连接，

```
print "i is equal to " + str(i) + "." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T12:31:01.003

```
print "i is equal to", str(i) + "." 
```

您也可以只在最后使用 str() 函数，无需将所有内容都转换为字符串。当您在打印行中有更多变量和文本时会更容易。

例子：

```
print (a,"+",b,"is equal to", str(a+b) + ".") 
```

对比

```
print (str(a)+" + "+str(b)+" is equal to "+str(i)+".") 
```

# php - mysql 从 9 个值中给出 6 个错误

> ID：13597390
> 
> 赞同：0
> 
> 时间：2012-11-28T03:39:14.140
> 
> 标签：php, mysql, pdo

我正在使用这样的查询

```
$escaped = mysql_real_escape_string($_GET['submenu']);

$result = $db->select('SELECT pagename,metakeywords,metadescription,title1,title2,title3,article1,article2,article3 FROM sub_menu WHERE id='.$escaped.''); 
```

并像这样使用元标记等中的值

```
<meta name="description" content="<?php echo $result[0]['metadescription']; ?>" /> 
```

但是对于 title1,title2,title3,article1,article2 和 article3 的值，我总是得到相同的结果，即使我在不​​同的行中，我从完全不同的行中得到结果，并且总是相同的结果，但所有其他值正在更改为新请求的。

对我来说很奇怪，有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:48:49.063

听起来问题出在您的数据中，而不是您的查询中。直接转到数据库，然后运行查询。结果是否与您在 PHP 页面上看到的一致？

我还推测数据库规范化存在一些问题，这可能会导致您的 INSERT/UPDATE 脚本（我假设在其他地方）出现问题，这反过来又是导致数据库异常的原因。

我经常在学生的项目中看到类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:04:21.140

检查 print_r($result) 一切都很好。然后每次 print_r 粘贴一个模板父亲 ... 并看到一个模板正在用另一个查询覆盖 $result ，因此 article1 等不再存在。所以 php 使用了最后一个值 $result[0]['article1'] 等...我的坏：D

# c - 返回语句、值——它们是如何使用的？

> ID：13597391
> 
> 赞同：2
> 
> 时间：2012-11-28T03:39:15.880
> 
> 标签：c, function, return, return-value

我对 C 中的 return 语句有点困惑。我正在上 C 的大学介绍课，我们已经学习了函数，但是我仍然不太了解返回值的用途。你能用它们做什么？价值去哪儿了？例如，

```
#include <stdio.h>

int add(int, int);

int main()
{
    int x=0, y =0, z;
    // insert code here...
    printf("Enter a number: ");
    scanf("%d", &x);

    printf("Enter another number: ");
    scanf("%d", &y);

    z = add(x,y);
    printf("%d\n", z);

    return z;
}

int add(int x, int y)
{
    int sum;
    sum = x + y;
    return sum;
} 
```

由于 printf 函数，总和仅显示。会发生什么`return z`？你能以某种方式将返回值传递给其他函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:47:07.577

通常，调用函数中的变量会“捕获”返回值。在您的情况下，`main`是调用函数，并且`add`是“被调用者”或被调用的函数。 `int z`是捕获返回值的内容。

当然，您可以将返回值传递给其他函数！就像是：

```
z = add(add(5,7), add(1,2)); 
```

将返回 15！幕后发生的事情，不用太复杂，是`add`首先评估内部的两个函数，然后将返回值压入堆栈以供外部`add`函数使用。堆栈是程序用来存储临时值的一段内存。

在 的情况下`main`，标准的返回值`0`表示程序正确执行，非零返回值表示错误。 `main`程序启动时由操作系统调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:43:43.710

return 将返回输出值。例如，当您使用 add 函数时，它将返回 x+y 的值，从而返回 sum 变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:44:09.617

在 main() 函数的这种情况下，它将返回代码给调用者。通常，0 值表示成功，非零值表示错误。

它在 bash 脚本中可能非常有用，例如：

```
foo && baa 
```

`baa``foo`如果程序成功退出，程序只会运行。

Tipycall 示例是在 UNIX 上编译库：

`./configure && make && make install`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T03:42:27.157

您的“add”函数返回一个整数值。在“main()”函数中，您将“z”设置为该函数的结果......即......返回值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T03:42:55.790

返回值是传递回调用函数的值。例如：

```
int theSum = add(2, 3); // theSum will equal 5 because the method add(int x, int y) will return 5. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T03:56:40.677

在试图理解函数如何工作时，main() 方法中的返回值并不重要。您通常返回 0 或 -1 来指示程序的状态。在 add 函数中，您将一个 int 返回给调用 add 方法的任何其他函数。在您的情况下，主要方法是调用 add 函数，并且 add 函数返回一个 int 。您可以从您声明的任何其他方法调用 add 函数，因此您可以重用函数。这就是函数最重要的好处之一，您可以编写一次代码并多次使用它。所以你可以做这样的事情

```
int addNumbers(int x,int y,int z)
{

int sum = 0;

sum = sum + add(y,x);
sum = sum + add(z,0); // or sum = add(z,sum) 

return sum;
} 
```

现在你有两个函数，其中一个（addNumbers）正在调用另一个（add）。你可以从你的 main 函数中调用它们。

# sorting - 使用凸包算法对整数进行排序

> ID：13597392
> 
> 赞同：4
> 
> 时间：2012-11-28T03:39:22.777
> 
> 标签：sorting, convex-hull

二维凸包的算法使用排序。假设有人给了你一个库，它的凸包实现为黑盒子。展示如何使用凸包算法对给定整数序列进行排序。短语“黑匣子”意味着您不查看代码内部；你只知道输入和输出是什么，结果是什么样子。您不能从凸包的库实现中“拉出排序算法”。您可以假设您可以将凸包算法称为原始步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-20T20:40:26.567

对于输入序列 A=[x1,...,xn] 的整数，n=|A| 中的每个 xi，创建其对应点 (xi, xi^2)，然后在 2D 空间中组合 n 个点。这些点形成抛物线，即凸曲线。在线性时间内，您可以检查点以检测最左边的点 pl，然后您可以从点 pl 开始向右遍历凸包，以产生数字 x1、...、xn 的排序顺序。

因为 Ω(n logn) 是基于比较的排序的下限，我们可以争辩说，凸包占用的时间不少于否则排序可能比其下限更便宜，这将导致收缩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T03:56:46.030

将整数视为位于 x 轴上的点（即 y 坐标为零）。将点馈送到凸包算法。如果算法不够健壮，无法处理这种退化情况，请将每个整数分为两个点 (x, 1) 和 (x, -1)。作为算法的输出，您将获得形成闭环（多边形）的点。四处寻找x最小的点，然后点的x值增加将代表排序的整数。

同样，如果凸包算法在处理位于同一直线上的边界点时存在问题，请使用 y 值的平方整数来强调凸性 - 当然，如果所有整数都是非负的。如果存在负整数，则需要在计算 y 值的平方之前减去最小值。

# java - 这会导致java中的内存泄漏吗？

> ID：13597393
> 
> 赞同：3
> 
> 时间：2012-11-28T03:39:30.887
> 
> 标签：java, garbage-collection

这是一个面试问题，但我不太确定正确答案。假设我们有一些类，例如：

```
public class A {
    public Object link;
    public A() {
        link = null;
    }
} 
```

然后我们创建两个实例：

```
A a1 = new A();
A a2 = new A();
a1.link = a2;
a2.link = a1; 
```

然后我们发布引用：

```
a1 = null;
a2 = null; 
```

那么问题来了：因为JVM会使用GC机制。它将如何处理这种情况？它会在运行时立即删除这两个实例，还是只对内存空间进行签名并将它们单独放置？如果我有 100 万个这样的实例形成一个循环并且没有外部引用怎么办？清理会让GC线程挂起吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:43:10.550

对象本身可以通过任意数量的链接（您提到的一百万个循环）相互引用。如果没有返回线程的“路由”，则对象有资格进行垃圾收集，无论它们连接到多少其他符合垃圾条件的节点。

现在这并不意味着他们会被收集，只是他们有资格。因此，如果您的垃圾收集器决定不处理它们，那么我想这可能被认为是内存泄漏。你不能保证它们会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T03:42:47.647

对于某些垃圾收集策略（例如[引用计数](http://en.wikipedia.org/wiki/Reference_counting)）的幼稚实现，循环引用可能会导致内存泄漏。（这并不是说引用计数是幼稚的，而是说糟糕的实现可能会遇到这个问题。）

但是，这个问题对于实施 GC 的人来说是众所周知的，并且可以避免。此外，大多数现代 JVM 使用分代垃圾收集器，它们通常不会遇到此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:48:01.993

根据代码的当前逻辑，a1 有一个指向 a2 的成员变量，而 a2 有一个指向 a1 的 ha 成员变量。当您执行 a1 = null a1 时，就有资格获得 GCed。a2 也是如此。现在，当 GC 运行时，它会尝试查看从根目录开始可以访问的所有对象，即使这两个相互引用，它们也会从根目录开始在链中变得不可访问（隔离情况），因此它们会毫无问题地进行垃圾收集。

# wordpress - 301 将旧子域重定向到新域页面

> ID：13597395
> 
> 赞同：1
> 
> 时间：2012-11-28T03:40:01.933
> 
> 标签：wordpress, web, subdomain

我已经单独（在自己的服务器上）为现有域设计了一个新网站（在 Wordpress 中），并且我试图在指向新网站之前设置一些 301 重定向。

唯一的问题是：旧站点上的博客和商店是子域。1\. blog.domain.com 2\. shop.domain.com

我希望 3) www.domain.com/blog 和 4) www.domain.com/shop 分别指向 1 和 2。

使用 cPanel，我尝试在新网站上设置 1&2，以便可以设置从这些地址到 (3 & 4) 的 301 重定向。当我这样做时，在文件服务器上创建了两个名为“blog”和“shop”的文件夹，这导致链接中断。

鉴于上述情况，我认为可能有更好的方法来做到这一点。

任何人都可以分享最好的方法吗？非常感谢你们。

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:34:02.200

WordPress 创建的 htaccess 文件允许您创建自己的文件夹/文件以在 WP 之外导航 - 如果文件/文件夹不存在，则它们属于 WordPress 永久链接系统。

因此，您应该能够在 cPanel 中创建重定向，或者在 htaccess 文件中创建自己的重定向，Google 上的大量资源可用于 htaccess 中的 301。

我不知道 cPanel 在创建重定向后会创建文件夹，但是如果您只是删除它们，一切都应该可以正常工作。

# c# - 如何在 WCF 应用程序中找到 web.config 文件，该文件中使用了哪些引用？

> ID：13597396
> 
> 赞同：0
> 
> 时间：2012-11-28T03:40:04.880
> 
> 标签：c#, wcf

我是 WCF 应用程序的新手。您如何在 wcf 应用程序中找到 web.config 文件，是否有任何特定文件夹可以找到这些应用程序。以及如何在 wcf 应用程序中使用企业日志跟踪特定方法。

Rgards raghava

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:01:30.417

您可以通过打开 .svc 文件并在其中搜索来跟踪特定方法。Web.config 文件可以在服务文件夹下找到。

如果您有服务的 dll，请使用反射器提取程序集并搜索特定方法。

# c# - WCF 消息检查器不起作用

> ID：13597408
> 
> 赞同：1
> 
> 时间：2012-11-28T03:41:52.540
> 
> 标签：c#, .net, wcf, wcf-extensions

最近，我正在探索某种方法来记录我的 WCF 服务处理的任何请求/响应。

在此之前，我对跟踪选项有一些不好的经验。现在，我还不知道如何从跟踪中获取实际的响应和请求（我尝试了 svctraceviewer 工具，但它没有得到对我有意义的东西）。即便如此，生成的跟踪文件也已损坏（其中包含一些意想不到的字符）。

大约三四天前，我了解了消息检查器技术。我阅读[了本手册](http://msdn.microsoft.com/en-us/library/aa717047%28v=vs.100%29.aspx)并在我的其他项目中实现了客户端消息检查器。实际上，我可以看到我的 wcf 客户端发送的任何请求以及该请求的其他服务响应。

我希望做另一侧日志记录同样容易（例如从客户端获取服务请求和服务器对它们的响应）。但我不冷。以下是详细信息：

```
public class LogMessageBehavior : IEndpointBehavior
{
    public LogMessageBehavior() 
    { }

    public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters) 
    { }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
    {
        throw new NotImplementedException();
    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.EndpointDispatcher endpointDispatcher)
    {
        LogMessageInspector inspector = new LogMessageInspector();
        endpointDispatcher.DispatchRuntime.MessageInspectors.Add(inspector);
    }

    public void Validate(ServiceEndpoint endpoint) 
    { 
    }

}

public class LogMessageBehaviorExtensionElement : BehaviorExtensionElement
{
    public LogMessageBehaviorExtensionElement() { }

    public override Type BehaviorType
    {
        get
        {
            return typeof(LogMessageBehavior);
        }
    }

    protected override object CreateBehavior()
    {
        return new LogMessageBehavior();
    }
}

public class LogMessageInspector : IDispatchMessageInspector
{
    object IDispatchMessageInspector.AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
    {
        throw new NotImplementedException();
    }

    void IDispatchMessageInspector.BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
    {
        throw new NotImplementedException();
    }
} 
```

几乎所有代码都使用 NotImplementedException 存根，但我在每个方法和属性上都设置了断点。此外，我将讲述他们是如何被击中的。

```
App.config

<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <extensions>
      <behaviorExtensions>
        <add name="LogMessage" type="MyService.Extensions.LogMessageBehaviorExtensionElement, MyServiceApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
      </behaviorExtensions>
    </extensions>
    <behaviors>     
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="True"/>          
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="LogMessageEndpointBehavior">
          <LogMessage />
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <diagnostics>
      <messageLogging
           logEntireMessage="true"
           logMalformedMessages="true"
           logMessagesAtServiceLevel="true"
           logMessagesAtTransportLevel="true"
           maxMessagesToLog="3000"
           maxSizeOfMessageToLog="20000"/>
    </diagnostics>
    <!-- omitted for brewity -->
    <services>
      <service name="MyService">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/"/>
          </baseAddresses>
        </host>
        <endpoint address="MyServiceAddress" binding="basicHttpBinding" bindingConfiguration="MyService" contract="MyService" name="MyService"  behaviorConfiguration="LogMessageEndpointBehavior">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>

    <bindings>
      <basicHttpBinding>
        <binding name="MyService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
       <!-- omitted for brewity -->
      </basicHttpBinding>
    </bindings>
  </system.serviceModel>

  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="messages"
          type="System.Diagnostics.XmlWriterTraceListener"
          initializeData="C:\messages.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>

</configuration> 
```

以下是该服务的安装方式：

```
ServiceHost myserviceHost = new ServiceHost(typeof(MyService), new Uri(Environment.bindAddress));            
myserviceHost.Open();

Console.WriteLine(myserviceHost.BaseAddresses[0]);
Console.ReadLine(); 
```

服务等级没有任何特别之处。

那么，这个建筑是如何运作的。正如我之前提到的，我在每个方法和属性中都设置了断点。在我开始调试后，我们按以下顺序获得断点命中：

```
1\. public LogMessageBehaviorExtensionElement() { } 
2\. get { return typeof(LogMessageBehavior);  }
3\. get { return typeof(LogMessageBehavior);  } (again)
4\. get { return typeof(LogMessageBehavior);  } (again)
5\. get { return typeof(LogMessageBehavior);  } (again) 
```

好的，让我们尝试向服务发送一些东西，看看它是如何反应的。所以我发送了一些请求（使用 WSDL 生成）来处理`http://localhost:8733/`并获得有效的响应。我为此使用了 SoapUI。VS 中没有任何断点活动！消息检查器不起作用。服务方法命中的断点，它表明该方法在没有消息检查器的情况下确实有效。

我还尝试使用此代码附加行为来设置服务（因此没有在 app.config 中指定行为）：

```
ServiceHost myserviceHost = new ServiceHost(typeof(MyService), new Uri(Environment.bindAddress));            
myserviceHost.Open();

foreach (ServiceEndpoint endpoint in myserviceHost.Description.Endpoints)
{
    endpoint.Behaviors.Add(new LogMessageBehavior());
}

Console.WriteLine(myserviceHost.BaseAddresses[0]);
Console.ReadLine(); 
```

在这个选项中，我们得到了这个断点命中的顺序：

```
1\. public LogMessageBehavior() { } 
```

这就对了。而且也没有任何检查员在发送服务请求方面的活动。

那么我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:15:42.870

添加行为后尝试打开主机。它应该可以正常工作。

```
ServiceHost myserviceHost = new ServiceHost(typeof(MyService), new Uri(Environment.bindAddress));

foreach (ServiceEndpoint endpoint in myserviceHost.Description.Endpoints)
{
   endpoint.Behaviors.Add(new LogMessageBehavior());
}

myserviceHost.Open();

Console.WriteLine(myserviceHost.BaseAddresses[0]);
Console.ReadLine(); 
```

# objective-c - NSUserDefaults：更新 plist 中的数据

> ID：13597421
> 
> 赞同：0
> 
> 时间：2012-11-28T03:42:45.893
> 
> 标签：objective-c, macos, cocoa

我正在使用 保存应用程序首选项`[NSUserDefaults standardUserDefaults]`，其中有一些项目，其中一个是一个充满字典的数组。我想删除该数组中的第一项，所以我尝试类似：

```
[[[NSUserDefaults standardUserDefaults] objectForKey:accounts] removeObjectAtIndex:0]; 
```

这确实会删除索引 0 处的数组项，但不会更新 plist 文件。但是，当我这样做时

```
[[NSUserDefaults standardUserDefaults] removeObjectForKey:accounts]; 
```

它删除所有项目并更新 plist 文件。为什么第一行不将数据保存到plist？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:00:45.097

文档指出从返回的值`NSUserDefaults`是不可变的。我认为这意味着如果您检索一个值（`objectForKey:`例如通过），然后修改该值，则更改不会保留回用户默认值。您需要自己通过`setObject:forKey:`.

来自[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

> 从 NSUserDefaults 返回的值是不可变的，即使您将可变对象设置为值。例如，如果您将可变字符串设置为“MyStringDefault”的值，那么您稍后使用 stringForKey: 检索的字符串将是不可变的。

虽然这真的很奇怪，但以下似乎可行......（但不会持续改变）。

```
 [[NSUserDefaults standardUserDefaults] setObject:@[@{@"hello" : @"1234"}, @{@"bye" : @"aoeu"}] forKey:@"accounts"];
  // Outputs both dictionaries
  NSLog(@"%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"accounts"]);
  [[[NSUserDefaults standardUserDefaults] objectForKey:@"accounts"] removeObjectAtIndex:0];
  // Outputs only 1 dictionary
  NSLog(@"%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"accounts"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:46:00.723

试试这个。

```
NSMutableArray *Arr=(NSMutableArray *)[[NSUserDefaults standardUserDefaults] objectForKey:@"YourKey"];
[Arr removeObjectAtIndex:0];
[[NSUserDefaults standardUserDefaults] setObject:Arr forKey:@"YourKey"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:04:17.077

这是我发现的另一个解决方案，可以避免启动数组：

```
//do whatever with [NSUserDefaults standardUserDefaults]
[[NSUserDefaults standardUserDefaults] setBool:randomValue forKey:randomKey];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# wordpress - WordPress 数据库复制重复键，不正确的索引？

> ID：13597424
> 
> 赞同：1
> 
> 时间：2012-11-28T03:43:03.373
> 
> 标签：wordpress, database-replication

我在 WordPress 中创建了一个网站，该网站在很长一段时间内都可以正常工作。我将该站点复制到第二台服务器以进行负载平衡，该服务器以双向关系触发数据复制，双向主从。当我尝试复制数据时，我收到由重复键引起的错误。如果有人知道如何避免这种情况，请告诉我（我正在考虑编写一个 php 脚本来定位这些重复项并解决它们）。

仅供参考，我正在运行 WP 版本 3.4.2（之前运行 3.3.1 时出现相同的错误）。PHP5.3.10-1Ubuntu3.4 和 MySQL5.5。

更重要的是，我在 CMS 中出现了一些非常奇怪的问题，我认为表索引中可能存在一些交叉线。例如，在一个页面中，我单击“上传/插入”，当我尝试上传文件时，它卡在“运行”中。但是，我在服务器上和“媒体库”下看到该文件确实已成功上传。如果我尝试“删除”该文件，它会失败。如果我尝试“插入帖子”，它会创建 30 个以我刚刚上传的图片名称作为页面标题的新页面！

（例如，我上传了一个名为“image.jpg”的文件并单击插入它，它不插入而是创建了 30 个相同的页面，称为“image”。我也无法删除这些页面。）

另外，如果我尝试“添加新”页面，当我保存时，它会提示我“你确定要这样做”并且不会创建新记录。

# javascript - 单击dom节点时，如何在js中绑定事件和运行事件？

> ID：13597425
> 
> 赞同：0
> 
> 时间：2012-11-28T03:43:07.087
> 
> 标签：javascript, mootools

我有一个想法，我想点击一个按钮然后绑定并运行一些函数，这不应该在 dom 准备好时绑定，如何编码？
我的大部分 js 函数都有点击事件，我通常命名这些函数，然后添加
window.addEvent("domready",function(){fn();});
当dom准备好时让它工作
对我来说这样做是一个好习惯吗？

这种方式是不是更好？
不要在dom准备好时绑定click事件，而是当用户点击该位置时，
快速绑定相关事件fn并运行
这种方式应该节省浏览器的资源吗？因为当dom准备好时它不会绑定所有
的东西，有时用户根本不会点击这个地方，所以绑定事件没有意义。
如果这种方式更好，任何人都可以告诉我单击然后绑定并运行时如何编码？

![在此处输入图像描述](../Images/bec966082f941addec74e5e35a967989.png)

```
<script type="text/javascript" src="http://localhost/bvtemplates/y01/includes/templates/y01/jscript/jscript_010_mootools.js"></script>\
<script type="text/javascript">
    /* ------- 
        most of my js function has click event , I normally name these functions and then add
        window.addEvent("domready",function(){fn();});
        to let it works when dom is ready
        Is it a good habit for me doing it like that?

        Is this way bellow better?
        not to bind the click event when dom ready, but when user click the place, 
        quickly bind the relative event fn and run
        should this way save the resource of browser? for it will not bind all things when dom ready, 
        sometimes the user will not click the place at all ,so there is no meaning to bind the event.
        If better this way, any one can tell me how to code when click then bind and run?
    ------- */

    function a(){
        $$('.a').addEvent('click', function (){
            alert('a');
        });
    }
    window.addEvent("domready",function(){a();});

    function b(){
        $$('.b').addEvent('click', function (){
            alert('b');
        })'
    }
    window.addEvent("domready",function(){a();});
</script>
<button class="a">a</button>
<button class="b">b</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:53:12.137

> 这样做对我来说是个好习惯吗？

是的，但还有其他可用的策略。哪个最好取决于您的要求以及每种方法的功能是否适合您的情况。但是您当前的策略很好并且通常可以实施。

> 这种方式是不是更好？在dom准备好时不绑定click事件，而是当用户点击该地方时，快速绑定相关事件fn并运行

不，您将添加一个侦听器来添加一个侦听器，这没有意义。此外，调度事件时调用的侦听器具有关联的事件对象，除非您实现自己的事件管理框架，否则很难使用您建议的方法复制该对象。你想这样做吗？

> 这种方式应该节省浏览器的资源吗？

不可以。还有其他策略可以减少文档中的侦听器数量，例如事件委托。

> 因为当dom准备好时它不会绑定所有的东西，有时用户根本不会点击这个地方，所以绑定事件没有意义。

浏览器调度数以万计的事件，它们在这方面相当有效。如果性能是一个问题，那么就解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-04T12:28:18.973

这并不能帮助你提高代码能力。我希望你能从中有所收获。

```
<button class="a">a</button>
<button class="b">b</button>
// button should be created first.
 let btn = document.querySelector('.a');
        btn.onclick = function () {
            alert('a');
        } 
 let btn1 = document.querySelector('.b');
 btn1.onclick = function () {
     alert('b');
 }
                    // function a() {
                    //       $$('.a').addEvent('click', function (){
                    //          alert('a');
                    //       });
                    //  }

    // function b(){
    //     $$('.b').addEvent('click', function (){
    //         alert('b');
    //     })
    // }
    // window.addEvent("domready",function() {a();});
</script> 
```

# android - 如何从 IntentService 返回 ArrayList 结果

> ID：13597429
> 
> 赞同：2
> 
> 时间：2012-11-28T03:43:24.333
> 
> 标签：android, android-intent, android-listview, android-service, intentservice

我有一个 IntentService，它使用来自网络源（AWS SDB 表）的数据加载一个 ArrayList。ArrayList 位于全局空间中——调用 Activity 和 IntentService 都可以访问（如下所示：）`appState = ((App)getApplicationContext())`。IntentService完成后，通过ResultReceiver通知Activity，Activity调用`adapter.notifyDataChanged()`更新ListView。

这个解决方案大部分时间都有效，......但它违反了只有 UI 线程才能更改 ListView 底层数据的规则。因此，有时我会收到错误消息：“适配器的内容已更改，但 ListView 未收到通知。”

我想这一定是一个普遍的情况。如果您对此问题有任何建议或最佳实践，请告诉我。以下是我知道的三个选项：

1.  保留`IntentService`，并让它将结果存储在另一个“工作”的 ArrayList 中，也在全局空间中。当结果准备好时，IntentService 调用 ResultReceiver（在 UI 线程上），然后它可以：a）将结果复制到与 ListView 关联的 ArrayList，以及 b）调用 adapter.notifyDataChanged()。缺点：我不喜欢将临时/工作数据放在全局空间中的想法，并且复制结果列表似乎效率低下。

2.  保留`IntentService`，并让它通过加载有 ParcelableArrayList 的包传回结果。缺点：我不确定这种方法是否适用于非常大的结果集。它还需要复制结果列表。

3.  切换到`Service`构建结果列表的本地副本的 a。让 Activity 直接访问 Service 的地址空间以读取结果列表。CON：仍然需要将结果复制到与 ListView 关联的 ArrayList。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:02:19.340

我切换到使用`Parcelable`（即上面的选项2），现在它工作正常。我使用[这个接受的答案](https://stackoverflow.com/questions/7400564/android-parcelable-retailerorderactivity-java-return-null/7400675#7400675)中的代码作为参考。

仍在测试中，但我很确定更改通过从 UI 线程更新适配器的基础列表解决了我遇到的错误。我还没有尝试过超过 100 个元素的列表，但到目前为止还不错。谢谢。

# objective-c - 子类化和添加 init 方法总是返回 nil

> ID：13597439
> 
> 赞同：0
> 
> 时间：2012-11-28T03:44:06.627
> 
> 标签：objective-c, inheritance, init, subclassing

我正在尝试对该类进行子`UIImage`类化并添加一个`init`带有一些添加变量的自定义方法。但是，当我尝试使用新的初始化程序创建一个新对象时，该对象始终是`nil`. 新`init`方法如下：

```
- (id)initWithLat:(int)latitude andLong:(int)longitude andSize:(int)size {
    self = [super initWithContentsOfFile:@"dot.png"];
    if (self) {
        self.lat = latitude;
        self.longi = longitude;
        self.dotScale = size;
    }
    return self;
} 
```

我相信我的子类化正确，这是我的头文件：

```
#import <UIKit/UIKit.h>

@interface Dot : UIImage {
    int lat;
    int longi;
    int dotScale;
}

@property  int lat;
@property  int longi;
@property  int dotScale;

- (id)initWithLat:(int)latitude andLong:(int)longitude andSize:(int)size;

@end 
```

尝试将`Dot`对象添加到`NSMutableArray`.

```
dots = [[NSMutableArray alloc] init];
[dots addObject:[[Dot alloc] initWithLat:0 andLong:0 andSize:1]]; 
```

我的猜测是新的初始化程序有问题。我[以此](https://stackoverflow.com/questions/4359617/overriding-init-in-subclass)为指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:50:20.850

`initWithContentsOfFile:`如果找不到文件，则返回 nil。能找到吗？使用日志记录/断点来找出初始化程序期间发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:52:03.170

这是文档`initWithContentsOfFile`：

```
initWithContentsOfFile:
使用指定文件的内容初始化并返回图像对象。

- (id)initWithContentsOfFile:(NSString *)path

参数
*小路*
文件的路径。此路径应包含标识图像数据类型的文件扩展名。

返回值
一个已初始化的 UIImage 对象，如果方法找不到文件或从其内容初始化图像，则返回 nil。

```

请注意，如果找不到指定的文件，则调用将返回 nil。没有找到您的“dot.png”文件可能是一个安全的赌注，特别是因为您没有指定它的完整路径。我无法想象你为什么要硬编码这个值，你可能应该为文件名添加一个参数，到初始化程序。

# java - 新意图不起作用

> ID：13597444
> 
> 赞同：0
> 
> 时间：2012-11-28T03:44:52.877
> 
> 标签：java, android, android-intent

为什么新意图在第二部分（onTouchEvent 内部）中起作用，但在第一部分（更新（））中不起作用。如果我把它放在方法 update() 中（我需要它的地方），它不会做任何事情。我在其中放置了一个日志条目，以查看它是否真的通过了 if/then，它确实通过了。

更新：

好的，现在变得很奇怪。我在这里尝试了所有 3 个答案，但仍然无法正常工作。直到我的手机屏幕熄灭（使用通过 USB 连接的 android）。现在，当我再次打开它时，我看到新活动已经开始！

更新 2：在模拟器中尝试过，它确实工作正常！这怎么可能？

```
class GameView extends SurfaceView implements SurfaceHolder.Callback {
    private MainThread _thread;

public GameView(Context context) {
        super(context);
        getHolder().addCallback(this);

        _thread = new MainThread(getHolder(), this);
        setFocusable(true);
}

public void update() {

        if (deckPos >= 25) {
            Log.v("DEBUG", "finished");

            // --- DOESNT WORKS HERE ---
            Context context = getContext();
            Intent intent = new Intent(context, ScoreScreen.class);
            context.startActivity(intent);
            // ------------------

        }

    }

public boolean onTouchEvent(MotionEvent event) {
        synchronized (_thread.getSurfaceHolder()) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {

            // --- WORKS HERE ---
            Context context = getContext();
            Intent intent = new Intent(context, ScoreScreen.class);
            context.startActivity(intent);
            // ------------------

                touchX = (int) event.getX();
                touchY = (int) event.getY();
                touching = true;

                if (cardDispencer.contains(touchX, touchY)) {
                    holdingCard = true;
                }

                int t = returnTouchingCardGrid(touchX, touchY);

                if (t < gridIDs.length && gridIDs[t] == 0) {
                    gridIDs[t] = deck[deckPos];
                    deckPos++;
                    updateScore();
                }

            }

            if (event.getAction() == MotionEvent.ACTION_MOVE) {
                touchX = (int) event.getX();
                touchY = (int) event.getY();
            }

            if (event.getAction() == MotionEvent.ACTION_UP) {

                int t = returnTouchingCardGrid((int) event.getX(), (int) event.getY());

                if (t < gridIDs.length && gridIDs[t] == 0 && holdingCard) {
                    gridIDs[t] = deck[deckPos];
                    deckPos++;
                    updateScore();
                }

                touching = false;
                holdingCard = false;

            }

            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:07:07.460

Change:

```
Intent intent = new Intent(context, ScoreScreen.class);
context.startActivity(intent); 
```

to:

```
Intent intent = new Intent(your_current_activity.this, ScoreScreen.class)
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:49:43.967

将您的代码更改为这样

```
public void update() {

    if (deckPos >= 25) {
        Log.v("DEBUG", "finished");

        Intent intent = new Intent(getApplicationContext(), ScoreScreen.class);
        startActivity(intent);
    }
} 
```

使用 Intent 开始活动，而不是使用上下文变量。如果您需要更多说明如何使用意图调用另一个活动，您可以[在此处找到不错的教程](http://www.vogella.com/articles/AndroidIntent/article.html)

# javascript - window.open 在 IE8 中打开新窗口而不是新选项卡

> ID：13597452
> 
> 赞同：-1
> 
> 时间：2012-11-28T03:45:48.080
> 
> 标签：javascript, window

> **可能重复：**
> [想在 IE8 的新标签页中打开](https://stackoverflow.com/questions/9175634/want-to-open-in-new-tab-on-ie8)

在 ie8 中，window.open() 打开新窗口而不是新标签。这是浏览器行为吗？我们可以改变它吗？请给我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:48:44.673

不能改变。这是浏览器中的一项设置，您无法使用 Javascript 更改 - 只有用户可以更改它。但这必须是重复的，我已经听过很多次了

[http://www.google.com/?q=javascript%20window.open%20new%20tab](http://www.google.com/?q=javascript%20window.open%20new%20tab)

# java - 如何使我的代码使每个方块的颜色不同？

> ID：13597454
> 
> 赞同：0
> 
> 时间：2012-11-28T03:46:01.707
> 
> 标签：java, graphics, colors

我的代码正常运行并反复更改代码中方块的颜色，但更改时所有方块的颜色都相同。

主程序：

```
import java.awt.Graphics;
import java.awt.Color;
import java.awt.Font;
import java.util.Random;
import javax.swing.Timer;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.Canvas;
import javax.swing.JPanel;

public class RandomColoredBoxes extends JPanel
{
private Timer timer;
private final static int SLEEP = 110;

public RandomColoredBoxes()
{       
    setBackground(Color.BLACK);
    setVisible(true);

    ActionListener paintCaller = new ActionListener(){
        public void actionPerformed(ActionEvent event)
        {
            repaint();  
        }
    };
    timer = new Timer(SLEEP, paintCaller);
    timer.start();
}   

public void paintComponent( Graphics window )
{
    super.paintComponent(window);

    window.setColor(Color.RED);
    window.setFont(new Font("TAHOMA",Font.BOLD,12));
    window.drawString("Graphics Lab Lab11k ", 20, 40);
    window.drawString("Drawing boxes with nested loops ", 20, 80);

    drawBoxes(window);
}

public void drawBoxes(Graphics window)
{
    int colorValue1 = (int)(Math.random() * 256);
    int colorValue2 = (int)(Math.random() * 256);
    int colorValue3 = (int)(Math.random() * 256);

    Color random = new Color(colorValue1, colorValue2, colorValue3);
    window.setColor(random);
    //for loop to to across the x - getWidth() might be useful
    for(int x = 30; x <= getWidth()- 30; x+=15){
        for(int y = 100; y <= getHeight() - 30; y+= 15){
            window.fillRect(x, y, 8, 8);
        }
    }
        //for loop to go down the y - getHeight() might be useful

            //draw random colored boxes
}
} 
```

还有我的图形跑步者课程：

```
import javax.swing.JFrame;

public class GraphicsRunnerRandom extends JFrame
{
private static final int WIDTH = 800;
private static final int HEIGHT = 600;

public GraphicsRunnerRandom()
{
    super("Graphics Runner");
    setSize(WIDTH,HEIGHT);

    getContentPane().add(new RandomColoredBoxes());                 

    //getContentPane().add(new RandomColoredBoxes());

    setVisible(true);
}

public static void main( String args[] )
{
    GraphicsRunnerRandom run = new GraphicsRunnerRandom();
}
} 
```

除了方块一起变化，其他一切都在正常运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:48:05.190

而不是这个：

```
int colorValue1 = (int)(Math.random() * 256);
int colorValue2 = (int)(Math.random() * 256);
int colorValue3 = (int)(Math.random() * 256);

Color random = new Color(colorValue1, colorValue2, colorValue3);
window.setColor(random);
//for loop to to across the x - getWidth() might be useful
for(int x = 30; x <= getWidth()- 30; x+=15){
    for(int y = 100; y <= getHeight() - 30; y+= 15){
        window.fillRect(x, y, 8, 8);
    }
} 
```

试试这个：

```
//for loop to to across the x - getWidth() might be useful
for(int x = 30; x <= getWidth()- 30; x+=15){
    for(int y = 100; y <= getHeight() - 30; y+= 15){
        int colorValue1 = (int)(Math.random() * 256);
        int colorValue2 = (int)(Math.random() * 256);
        int colorValue3 = (int)(Math.random() * 256);

        Color random = new Color(colorValue1, colorValue2, colorValue3);
        window.setColor(random);

        window.fillRect(x, y, 8, 8);
    }
} 
```

基本的区别是`window.setColor`从循环内部创建新颜色（以及调用） - 这样每次循环开始时，在绘制框之前，将使用新的随机颜色。

# java - ActionListener 每个按钮的不同变量

> ID：13597464
> 
> 赞同：0
> 
> 时间：2012-11-28T03:47:52.863
> 
> 标签：java, arrays, swing, jbutton, actionlistener

我有一个 JButton 数组，我想让每个 JButton 在另一个数组中更改它们各自对应变量的值，我需要为每个按钮创建一个单独的侦听器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:24:45.703

您不需要为每个按钮创建单独的侦听器。一个听众会做，但你必须使用查询源`getSource()`并相应地决定你的行动路径。

如果您确实实现了单独的侦听器，那么编码可能会更容易，但可能需要额外的内存。所以这一切都取决于你的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:51:03.653

最干净的方法是为每个按钮创建一个单独的侦听器。

但是，您可以为所有按钮创建一个侦听器，该侦听器将动作事件的`getSource()`组件与每个 JButton 进行比较，并根据源等于哪一个执行。

# c# - 如何获取图片中区域的颜色

> ID：13597466
> 
> 赞同：0
> 
> 时间：2012-11-28T03:47:57.080
> 
> 标签：c#, image, colors

我有一些图片，例如： ![在此处输入图像描述](../Images/2be52d65425b2be747620720ed8b05b5.png)

我想得到图片中区域的颜色。例子 ![在此处输入图像描述](../Images/efb2d495763df3f13da3ea52e307115e.png)

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:50:41.750

首先，您不能“通常”获得某个区域的颜色（除非您对该区域的颜色进行平均或其他一些操作）。您将寻找特定像素的颜色。

从您的`Bitmap`, 调用您想要获取颜色的图片`GetPixel`的坐标。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)`X,Y`的文档。

**编辑：**从评论中，看到[这个线程](https://stackoverflow.com/questions/1165107/how-do-i-invert-a-colour-color-c-net)来反转颜色，这应该很直接从`Color`返回的`GetPixel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:51:26.850

看看[`Bitmap.GetPixel`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)方法，看看是否合适；要获得整个区域的颜色，您只需编写一个从左上角到右下角像素的循环并执行操作。

如果您使用的是 Winforms 或 WPF，或者您只是从磁盘加载直接位图，我们必须知道任何更具体的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:53:16.773

[这个](http://csharpmentor.blogspot.in/2009/05/get-rgb-color-at-point-in-image-with.html)有一个例子来获取图像点的颜色

# mysql - 显示正确的“最常访问”日期

> ID：13597470
> 
> 赞同：3
> 
> 时间：2012-11-28T03:48:17.067
> 
> 标签：mysql, sql, date, group-by

我有一些问题要显示访问次数最多的日期。这是它在数据库中的样子：

```
date_firstvisit
2012-11-25 15:49:16
2012-11-21 17:42:40
2012-11-21 15:36:04
2012-11-20 07:39:11
2012-11-19 09:19:36
2012-11-15 23:03:24
2012-11-15 22:57:47
2012-11-15 03:10:20
2012-11-15 03:10:14 
```

此 SQL 查询应该打印`2012-11-15`，但它只打印`0000-00-00`：

```
SELECT date_firstvisit FROM visitors
GROUP BY DATE(date_firstvisit)
ORDER BY COUNT(date_firstvisit) DESC
LIMIT 1 
```

如果我替换`SELECT date_firstvisit FROM visitors`它`SELECT * FROM visitors`打印`2012-11-28`. 这当然是错误的！

我不知道我的 SQL 查询出了什么问题，所以我现在问你，我错过了什么吗？

**编辑**

此代码显示了我如何将数据打印到我的网站。根据 njk 的说法，这个 SQL 是正确的，但它只是继续打印`0000-00-00`。

```
$get_mostactive_date = $sql->query("SELECT DATE(date_firstvisit), COUNT(date_firstvisit) FROM visitors GROUP BY DATE(date_firstvisit) ORDER BY COUNT(date_firstvisit) DESC LIMIT 1");
$mostactive_date = $get_mostactive_date->fetch(PDO::FETCH_ASSOC);

echo $mostactive_date['date_lastactive']; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:54:22.163

这将显示具有相同最高总访问次数的日期

```
SELECT DATE(date_firstvisit) Dates, COUNT(*) totalCount
FROM visitors
GROUP BY DATE(date_firstvisit)
HAVING COUNT(*) = 
(
  SELECT MAX(s)
  FROM(
  SELECT COUNT(*) s
  FROM visitors
  GROUP BY DATE(date_firstvisit))s
) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/bb906/2)
*   [SQLFiddle 演示（*有重复*）](http://sqlfiddle.com/#!2/78188/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T03:53:14.017

您缺少. `DATE`_ 您还需要一个别名来处理函数的使用。`date_firstvisit``SELECT``PDO`

假设 MySQL：

```
SELECT DATE(date_firstvisit) AS firstvisit, COUNT(date_firstvisit) AS count
FROM visitors
GROUP BY DATE(date_firstvisit)
ORDER BY COUNT(date_firstvisit) DESC
LIMIT 1 
```

## [看到它在行动](http://sqlfiddle.com/#!2/47a2f/4)

# c# - 使用键值对 并行.ForEach

> ID：13597473
> 
> 赞同：2
> 
> 时间：2012-11-28T03:48:46.670
> 
> 标签：c#, parallel.foreach

我想使用 Parallel.For 并行运行这个正常循环或`Parallel.ForEach<>`

```
foreach (KeyValuePair<String, String> symbol in symbolsConfigured){..} 
```

我一直在这样的其他地方使用-

```
Parallel.ForEach(sig.Products, dbp =>
            {...} 
```

但是我想不出这个怎么写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:50:12.637

你做的完全一样：

```
Parallel.ForEach(symbolsConfigured, kvp =>
            {...}); 
```

编译器将推断回调的参数类型，就像任何其他调用一样。

# java - 将 HashMap 属性保存到属性文件，并将这些属性加载回 HashMap

> ID：13597476
> 
> 赞同：3
> 
> 时间：2012-11-28T03:48:57.510
> 
> 标签：java, hashmap, properties-file

`HashMap`因此，我在将属性存储到文件时遇到了转换问题，`Properties`因为 的键`HashMap`是一个无法转换为的对象，`java.lang.String`因为属性必须是`(String, String)`而 my `HashMap`is `(Object, Long)`。

我只想将 的内容保存到文件中，以便下次运行程序时`HashMap`可以将这些内容加载回。`HashMap`

我经历了过多的毫无价值的尝试，试图`HashMaps`在它们被保存之前重新填充它们所包含的对象。我试图想出一种简单的方法将对象转换为我可以做的字符串，但是由于`Properties`并且`HashMaps`没有被索引，我无法将这些字符串更改回它们需要的对象。如何做到这一点？

这是我正在尝试做的事情：

```
 public File savedHashMaps = new File("SavedHashMaps.list");
// in my case, the object is 'Location' from an implemented API
public Map<Location, Long> map = new HashMap<Location, Long>();

public void saveMaps() {
    Properties prop = new Properties();
    try {
        if (!map.isEmpty()) {
            prop.load(new FileInputStream(savedHashMaps));
            prop.putAll(map);
            prop.store(new FileOutputStream(savedHashMaps), null);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void loadMaps() {
    Properties prop = new Properties();
    try {
        prop.load(new FileInputStream(savedHashMaps));
        if (!prop.isEmpty()) {
            map.putAll((Map)prop);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:10:35.350

使用`ObjectInput/OutputStream`

```
public File savedHashMaps = new File("SavedHashMaps.list");
public Map<Location, Long> map = new HashMap<Location, Long>();

public void saveMaps() {
    try {
        ObjectOutputStream oos = new ObjectOutputStream (new FileOutputStream(savedHashMaps));
        oos.writeObject(map);
        oos.close();
    } catch (Exception e) {
        // Catch exceptions
    }
}

public void loadMaps() {
    try {
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(savedHashMaps));
        Object readMap = ois.readObject();
        if(readMap != null && readMap instanceof HashMap) {
            map.putAll((HashMap) readMap);
        }
        ois.close();
    } catch (Exception e) {
        // Catch exceptions
    }
} 
```

这是来自记忆，非常抱歉出现错误，但是这将保存并重新加载您的所有位置、长映射。另请注意，Location 类必须实现`Serializable`（或具有实现它的超类）（这是一个标记接口（参见 java.dzone.com/articles/marker-interfaces-java），因此您只需添加`implements Serializable`）。

# ruby - sinatra 无法获取数据

> ID：13597477
> 
> 赞同：-1
> 
> 时间：2012-11-28T03:48:57.963
> 
> 标签：ruby, sinatra

西纳特拉路线

```
get '/' do
  @tasks = Task.all
  slim :index
end

post '/' do
  Task.create params[:task]
  redirect '/'
end 
```

指数

```
form action="/" method="POST"
  input type="text" name="task"
  input.button type="submit" value="New Task >>"
h2 My Tasks
ul.tasks
  @tasks.each do |task|
    li.task = task.name 
```

问题：`POST`成功，但失败，我想`Task.create`可能有一些问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:45:16.133

你不需要一个`-`吗？

```
ul.tasks
  - @tasks.each do |task|
    li.task = task.name 
```

# javascript - 设置下载窗口位置

> ID：13597480
> 
> 赞同：0
> 
> 时间：2012-11-28T03:49:14.400
> 
> 标签：javascript, jsp, download

当我们点击一​​个链接时，一些链接可能会提示我们选择打开方式或保存选项。我们可以在javascript或jsp中设置这个弹出窗口的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:51:12.343

使用纯 javascript/jsp 是不可能的。javascript 可以影响文档中的元素，而不是浏览器设置或对话框。而且jsp也可以影响来自http服务器的内容，而不是客户端，当然还有浏览器的东西。

# javascript - 否定自调用函数？!function ($) { ... }(window.jQuery);

> ID：13597481
> 
> 赞同：4
> 
> 时间：2012-11-28T03:49:30.223
> 
> 标签：javascript, jquery, twitter-bootstrap, negate, self-invoking-function

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

我正在查看 Twitter Bootstrap JavaScript 代码，我注意到他们所有的插件都包含在否定自调用函数中。

我知道`function ($) { ... }(window.jQuery);`立即调用该函数。

但这是`!`为了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T03:54:46.327

1）如果你这样做：

```
function () { /* ... */ }(); 
```

你会得到一个错误。
JS 不允许你触发函数声明（因为“变量提升”的概念，这在技术上不正确，但对很多人来说更容易思考）。
如果您使用声明性函数：

```
function myFunc () { /* ... */ } 
```

JS 引擎将在您所在的范围内创建它们，然后再创建范围的变量——即使变量都在顶部而函数都在底部。

所以当你写：

```
function myFunc () { /* ... */ }(); 
```

那里有一个错误，因为在当前范围内甚至不存在的 var 可能会在内部被调用，这是有保证的崩溃。

更进一步，如果你不给你的函数声明一个名字：

```
function () { /* ... */ } 
```

...那么无论如何都会出现错误，因为您还不能调用该函数，但是您无法获取它，因为它没有名称，并且您没有将其分配给变量.

像`()`or `+`or之类的操作符`!`——任何会迫使引擎评估接下来会发生什么的东西，都将允许你触发如下函数：

```
+function () { /* ... */ }(); 
```

只要没有变量监听返回语句，就可以了。

2) 另外，在 的情况下`!function () { /*...*/ }();`，如果该函数自然没有 return 语句，那么它将 return `undefined`。
相反的`undefined`是`true`当以这种方式被胁迫时......

...因此，如果您真的非常想要，您可以执行以下操作：

```
var success = !function () { /* ... */ }();
if (success) { doStuff(); } 
```

# php - 如何将jquery中数组中的值传递给codeigniter中的控制器

> ID：13597482
> 
> 赞同：0
> 
> 时间：2012-11-28T03:49:35.163
> 
> 标签：php, jquery, codeigniter

我是codeigniter和jquery的新手，但我现在维护的网站使用这个框架和语言，..问题是我在页面中有这些文本字段和隐藏字段，..我想获取这些输入的值通过 jquery 的字段，.，通过 jquery 的 $.post 将这些传递到控制器，.,. 我知道如何跟踪流程，但我不知道如何在我的控制器中获取传递的值，我是 codeigniter 的新手和jquery,,我想学习的同时完成了任务,.,. 这是我的视图页面中的代码..

```
 <?php $date = date('m/d/Y');
    $ts = strtotime($date);
    $year = date('o', $ts);
    $week = date('W', $ts);
    for($i = 1; $i <= 7; $i++) {
           $ts = strtotime($year.'W'.$week.$i);
        ?><input type="text" name="days" class="days" /><input type="hidden" id="date_now" name="date_now" value="<?php print date("Y-m-d", $ts); ?>" />

    } 
?> 
```

和我用于文本输入的 jquery

```
$(".saveTimeSheet").click(function() { 
    var days_array     = [];
    var date_now_array = [];

    $('.days').each(function() {
            days_array.push($(this).val());
    });
    $.post("<?php print base_url().'index.php/MyController/saveTimeTable'?>", {days_array: days_array},
        function(data){
            if(data=='success')
            {
                alert('success');
            }
            else{
                error_message(data);
            }
    });
 }); 
```

我的控制器代码...

```
function saveTimeTable()
{
   $idnum=$this->session->userdata('id');       
       $duration=$this->input->post('days_array')*3600;
       $this->mmyhr->modeSaveTimeTable($idnum, $duration);
} 
```

我的型号代码（mmyhr）

```
function modeSaveTimeTable($idnum, $duration)
{
   $this->db->set('employee_id', $idnum);
   $this->db->set('duration', $duration);
   $this->db->insert('hs_hr_time_event');
 } 
```

任何人都可以帮助我,.,.please....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:41:27.643

根据您上面的代码，您的控制器应该是这样的：

```
function saveTimeTable()
{
    $idnum=$this->session->userdata('id');
    $days_array = $this->input->post('days_array');

    foreach($days_array as $day){
        $duration=$day*3600;
        $this->mmyhr->modeSaveTimeTable($idnum, $duration);
    }    
} 
```

# mod-jk - Mod_jk + Google OpenID = 错误 502

> ID：13597483
> 
> 赞同：1
> 
> 时间：2012-11-28T03:49:39.513
> 
> 标签：mod-jk, google-openid

我们使用 mod_jk 来重定向 Appserver，如**httpd->mod_jk->glassfish**并且效果很好。
但是当我们想用 Google OpenID 登录时，它会显示“502 Bad gateway”错误。
任何人都可以帮忙吗？

这是我的 mod_jk 设置：

```
#Set worker using ajp13
worker.list=works01,status
# Set properties for works01 (ajp13)
worker.works01.type=ajp13
worker.works01.host=192.168.2.114
worker.works01.port=8009
worker.works01.socket_keepalive=1
worker.works01.connection_pool_timeout=300

worker.status.type=status 
```

非常感谢。

# html - 如何将html文本转换为代码中的原始文本，换句话说，从html中剥离文本

> ID：13597485
> 
> 赞同：0
> 
> 时间：2012-11-28T03:49:49.163
> 
> 标签：html, asp.net-mvc, razor

使用 rss feed(syndicationfeed) 我有一些编码文本，通常在视图中我可以说 @Html.Raw(feed.summary) 其中 feed.summary 是一些带有文本的 html，它会显示没有所有文本的文本html代码。但是由于某种原因，这不起作用。它打破了我的看法，没有崩溃，只是没有显示任何东西。所以我想知道是否有一种方法可以在代码中执行此操作，这样文本将全部准备好，并且在我看来我不必使用 Html.Raw() 。任何建议表示赞赏。

```
 @Html.Raw(feed.RssShortSummary) 
  //This doesn't work, it messes all my styling up and simply doesn't even display the text. 
```

在后面的代码中：（我尝试过 MvcHtmlString.Create()）但仍然返回 html 代码，而不是我需要的文本。

```
 MvcHtmlString.Create(summary); 
```

所以如果我有：

```
 <p>Here is some text</p> 
```

Html.Raw() 将返回“Here is some text”，但由于某种原因这会扰乱我的观点。我已经尝试过 MvcHtmlString.Create 但它仍然返回给我：

```
<p>Here is some text</p> //returning all the html instead just "Here is some text" 
```

在代码c#中我试过：

```
 var x = MvcHtmlString.Create(rssItem.RssSummary); 
```

例如 rssItem.RssSummary =

```
 <p>Here is some text</p> 
```

x 仍在生成：

```
 <p>Here is some text</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:24:58.733

在 .net 中有许多删除标签的方法，[C# Remove HTML Tags](http://www.dotnetperls.com/remove-html-tags)不错的文章，其中描述了几种删除标签的方法，基于该文章，删除标签的最佳方法是 StripTagsCharArray，因为它比 Regex 方法更快：

```
 /// <summary>
    /// Remove HTML tags from string using char array.
    /// </summary>
    public static string StripTagsCharArray(string source)
    {
    char[] array = new char[source.Length];
    int arrayIndex = 0;
    bool inside = false;

    for (int i = 0; i < source.Length; i++)
    {
        char let = source[i];
        if (let == '<')
        {
        inside = true;
        continue;
        }
        if (let == '>')
        {
        inside = false;
        continue;
        }
        if (!inside)
        {
        array[arrayIndex] = let;
        arrayIndex++;
        }
    }
    return new string(array, 0, arrayIndex);
    } 
```

# java - 分配非静态变量的静态方法

> ID：13597491
> 
> 赞同：1
> 
> 时间：2012-11-28T03:50:34.673
> 
> 标签：java, variables, methods, static

我有两个类 GUI（呈现我的主 JFrame）和 Print 类（由 GUI 类上的 JButton 调用）。现在在我的 GUI 类上，我有 JTextArea 和一个方法：

```
void setOutput(String data)
{
   // output is JTextArea
   output.setText(data);
} 
```

但是，数据是提供给 Print JFrame 的，其中我有一个带有动作侦听器的 JButton：

```
sizOpt.addActionListener(new ActionListener()
{       
    @Override
    public void actionPerformed(ActionEvent event)
    {
       // textfield is a JTextField component
       String data = textfield.getText();   

       // My problem is here i need to invoke the setOutput
       // method in GUI to output the string however i cant call that method in
       // any way but making it static or calling new GUI which will create a new
       // Instance of GUI class
       GUI.setOutput(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:53:27.790

答案：根本不要在这里使用静态的任何东西。

唯一应该是静态的是您的主要方法，可能就是这样。如果您需要在 GUI 上调用方法，则在可视化 GUI 的***实例***上调用它，而不是作为静态方法。通常棘手的部分是获得有效的引用，你是正确的，你不应该创建一个新的 GUI 对象，但同样不要尝试做一个不起作用的静态解决方案。获取有效引用的一些方法是通过构造函数参数或 setter 方法。

IE，

```
public class PrintJFrame extends JFrame {
  private GUI gui;

  public PrintJFrame(GUI gui) {
    this.gui = gui;
  }

  // ...
} 
```

现在，在您的 ActionListener 中，您可以在 gui 变量持有的正确 GUI 引用上调用方法。接下来我们将讨论为什么应该避免让类扩展 JFrame 和类似的 GUI 组件。接下来我们'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:57:05.717

Make a static reference to the instance of your JFrame subclass, with an appropriate instance method on the JFrame to retrieve the text.

# git - Git合并和推送

> ID：13597494
> 
> 赞同：25
> 
> 时间：2012-11-28T03:50:51.857
> 
> 标签：git, github, branch, push

我是从 Git 开始的，所以我觉得这个问题可能是一天中最新鲜的问题，因为这个任务非常简单，但它却让人头疼。

我有 2 个本地分支机构：

*   掌握
*   本地/生产

和2个遥控器：

*   掌握
*   生产

我需要将本地更改传递给生产。所以，我的工作流程是：

```
git checkout local/production
git merge master
git commit
git push 
```

**git merge：** 似乎工作正常，它检测到所有差异。

**git提交：**

> 在本地/生产分支上
> 
> 您的分支领先于 'origin/production' 2 次提交。
> 
> 没有什么可提交的（工作目录干净）

和**git 推送：**

> 一切都是最新的

仅此而已，我无法将更改推送到远程存储库。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-28T04:56:56.640

**根本原因：**为了缩短解释，在我看来，您`local/production`没有跟踪`origin/production`。您可以使用`git branch -avv`.

**关于`git push`**：请注意，`git push`不带参数将更新本地跟踪分支中已更新的*所有*远程分支（来自`git-push(1)`手册页）：

```
git push ...  [<repository> [<refspec>...]]

The special refspec : (or +: to allow non-fast-forward updates) directs git to
push "matching" branches: for every branch that exists on the local side, the
remote side is updated if a branch of the same name already exists on the remote
side. This is the default operation mode if no explicit refspec is found (that is
neither on the command line nor in any Push line of the corresponding remotes
file---see below). 
```

因为`git push`如果忘记在本地分支中做了哪些更改，simple 的结果有时会出乎意料，所以我个人喜欢明确指定要推送哪些分支。在您的情况下，这似乎是您想要做的：

```
git push origin local/production:production 
```

如果要`local/production`跟踪`origin/production`，可以使用选项创建`local/production`跟踪分支：`origin/production``-u`

```
git push -u origin local/production:production 
```

（只需要一次）。然后你可以从原点拉到`local/production`.

**内容提要：**您需要了解跟踪分支的概念以及`git push`.

**PS**我想知道您`local/production`在这里选择的分支名称。为什么不只是`production`？我怀疑您已经进行了`production`跟踪`origin/production`，并且可能`local/production`用于本地开发。在这种情况下，一个合理的工作流程是这样的：

1.  `git pull origin production:production`将更改拉到您的`production`
2.  如果有新的提交`production`，那`local/production`是落后的，那么要么重新建立你`local/production`的基础`production`（或合并`production`在`local/production`）
3.  您想要推送更改的那一刻，`merge`或者`cherry-pick`您的提交`production`并使用`git push origin production:production`.

# ios - 保存到核心数据时出现错误代码 1560 与 1570

> ID：13597501
> 
> 赞同：0
> 
> 时间：2012-11-28T03:51:28.133
> 
> 标签：ios, core-data

保存核心数据时两个错误代码有什么区别？从一些帖子中阅读，它们都引用了相同的错误描述：必填字段未填写。有没有更具体的不同？因为有时我会得到 1560 错误代码，但我也会得到 1570 错误代码。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:55:29.943

这`1560`是一个多重错误错误。来自[核心数据常量参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Miscellaneous/CoreData_Constants/Reference/reference.html)。

```
NSValidationMultipleErrorsError                  = 1560,
NSValidationMissingMandatoryPropertyError        = 1570, 
```

听起来您正在获得多个与代码一起`1570`交付的 s 。`NSError``1560`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-05T11:24:59.317

同意 Mark Adams 的观点，我将 1560 代码作为许多 1570 的父错误。对我来说，这发生在我有一个子类标记为“非可选”而父类是“可选”时，所以我应该级联删除。一旦我将父删除规则设置为级联，这对我有用。显然，这取决于您想要的功能。

[关系：在我的情况下，我必须将删除规则设置为级联。](https://i.stack.imgur.com/gjCUP.png)

# ruby-on-rails - 有点 INVALID_URI - '500'

> ID：13597504
> 
> 赞同：8
> 
> 时间：2012-11-28T03:51:50.353
> 
> 标签：ruby-on-rails, url-shortener

我正在为 Bitly API 版本 3 使用 Bitly gem (https://github.com/philnash/bitly)

将应用程序部署到 Heroku 时缩短 URL 时出现错误。在本地，缩短工作正常。

```
def get_short_url(url)
    Bitly.use_api_version_3
    bitly = Bitly.new(Settings.bitly.login, Settings.bitly.api_key)
    result = bitly.shorten(url) ----------------- Line 3
    result.short_url
end 
```

上面代码中的第 3 行给出了 INVALID_URI - '500' 错误。

我要缩短的 URL 是

```
"https://rs-4615.xyz.com/users/profile_view/20492083" 
```

当我使用 bitly.com 时，它会缩短。

我无法弄清楚这个问题。任何人都可以帮忙吗？

沙杜尔。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T19:42:30.263

***回答和接受以防万一其他人遇到同样的问题。***

问题是在我的代码中生成的 URL 没有将“https”协议预先添加到 URL 中，因此失败。

所以，生成的是

```
rs-4615.xyz.com/users/profile_view/20492083 
```

代替

`https://rs-4615.xyz.com/users/profile_view/20492083`——这是正确的。

@jstim，感谢您的所有帮助。

# oracle - 在 Oracle 中创建函数时出现 PLS-00103 错误

> ID：13597505
> 
> 赞同：1
> 
> 时间：2012-11-28T03:51:55.023
> 
> 标签：oracle, sqlplus, pls-00103

我在以下函数中遇到了几个错误：

```
CREATE OR REPLACE FUNCTION department_salary
    (emp_dept VARCHAR2, salary NUMBER)
    RETURN NUMBER AS
        dept_sal NUMBER := salary;
    BEGIN
        IF emp_dept = 'MIS' THEN dept_sal := (dept_sal * .10) + dept_sal;
        ELSEIF emp_dept = 'SALES' THEN dept_sal := (dept_sal * .15) + dept_sal;
        ELSEIF emp_dept = 'HR' THEN dept_sal := (dept_sal * .20) + dept_sal;
        ELSE dept_sal := -1;
    END IF;

    RETURN dept_sal;

END; 
```

/

我得到的错误如下：

```
LINE/COL ERROR
-------- ----------------------------------------------------------------
7/10     PLS-00103: Encountered the symbol "EMP_DEPT" when expecting one
         of the following:
         := . ( @ % ;

8/10     PLS-00103: Encountered the symbol "EMP_DEPT" when expecting one
         of the following:
         := . ( @ % ;

14/4     PLS-00103: Encountered the symbol ";" when expecting one of the
         following:
         if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:06:17.893

The problem is the syntax of the `IF` statement. In particular, the keyword is `ELSIF` not `ELSEIF` (no `e`). If you change that, the function will compile

```
SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE FUNCTION department_salary
  2    (emp_dept VARCHAR2, salary NUMBER)
  3    RETURN NUMBER
  4  AS
  5    dept_sal NUMBER := salary;
  6  BEGIN
  7    IF emp_dept = 'MIS' THEN dept_sal := (dept_sal * .10) + dept_sal;
  8    ELSIF emp_dept = 'SALES' THEN dept_sal := (dept_sal * .15) + dept_sal;
  9    ELSIF emp_dept = 'HR' THEN dept_sal := (dept_sal * .20) + dept_sal;
 10    ELSE dept_sal := -1;
 11    END IF;
 12    RETURN dept_sal;
 13* END;
 14  /

Function created. 
```

If you are writing code like this, however, it is generally clearer to use a `CASE` statement

```
SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE FUNCTION department_salary
  2    (emp_dept VARCHAR2, salary NUMBER)
  3    RETURN NUMBER
  4  AS
  5    dept_sal NUMBER := salary;
  6  BEGIN
  7    CASE emp_dept
  8      WHEN 'MIS'   THEN dept_sal := (dept_sal * .10) + dept_sal;
  9      WHEN 'SALES' THEN dept_sal := (dept_sal * .15) + dept_sal;
 10      WHEN 'HR'    THEN dept_sal := (dept_sal * .20) + dept_sal;
 11      ELSE dept_sal := -1;
 12    END CASE;
 13    RETURN dept_sal;
 14* END;
 15  /

Function created. 
```

# c# - 在 C++ 中的两个类之间共享一个（QList 的）实例

> ID：13597507
> 
> 赞同：2
> 
> 时间：2012-11-28T03:52:03.247
> 
> 标签：c#, c++, qt

从 C# 到 Qt，我无法理解如何正确翻译以下常见习语 (C#)：

```
class Customer {
  public property List<Address> Addresses { get; }
}

class AnotherClass {
  public void SetAsShipping(List<Address> addresses) {
    foreach(var address in addresses)
      if (address.IsMatch(_shipping))
        address.IsShipping = true;    // This is the important part
  }
}

var cust = new Customer();
var another = new AnotherClass();

another.SetAsShipping(cust.Addresses); 
```

我有以下 C++：

```
class Customer {
  public:
    QList<Address> addresses() const { return _addresses; }
  private:
    QList<Address> _addresses;
};

class AnotherClass {
public:
  void setAsShipping(QList<Address> addresses);
};

AnotherClass::setAsShipping(QList<Address> addresses) {
  QList<Address>::iterator address;

  for (address = addresses->begin(); address != addresses->end(); ++address)
    if (address->isMatch(_shipping))
      address->setIsShipping(true);    // This is modifying a copy :(
}

Customer cust;
AnotherClass another;

another.setAsShipping(cust.addresses()); 
```

我知道我可以将 _addresses 作为引用返回，然后通过引用传递它，但显然这可能会导致问题，因为我的 Customer 实例可能会在对 _addresses 的引用之前超出范围，这将导致“悬空引用”。我从搜索中发现了很多。我没有找到应该做的事情。显然，有一种标准的 C++ 方法可以做这种事情，但是我的大脑被困在托管代码模式中，它没有跳出来。我应该如何编写这段代码，以便地址列表可以被 AnotherClass 修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:36:49.480

在您的 C# Customer 类中，Addresses 只是公共属性，您也可以在 C++ 中这样做，但这显然不是一个好的设计。

```
class Customer {
  public:
     QList<Address> _addresses;
};

AnotherClass::setAsShipping(QList<Address>& addresses) {
  for (QList<Address>::iterator address = addresses->begin(); 
       address != addresses->end(); ++address)
  {    
    if (address->isMatch(_shipping)) {
      address->setIsShipping(true);    // Now modify the real object
    } 
  }
} 
```

为了以更好的方式做到这一点，让我们重新考虑您的 C# 设计。

1.为什么是`List<Address> Addresses`公开的？

2.SetAsShipping真的应该属于Another类吗？看起来它属于客户类？

3.进一步增强，可以使用Qlist算法代替for循环查找地址吗？

```
class Customer
{
public:
    void setAsShipping(const Address& address)
    {
        for (QList<Address>::iterator address = addresses->begin(); 
        address != addresses->end(); ++address)
        {    
            if (address->isMatch(_shipping)) {
                address->setIsShipping(true);    // Now modify the real object
            } 
        }
    }
private:
  QList<Address> _addresses;
};

customer cust;
AnotherClass another;

cust.setAsShipping(another.address()); 
```

现在还有悬而未决的参考问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:10:04.717

May be you can try returning the QList object copy instead of keeping the return type of `setAsShipping` as `void`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T09:30:43.397

要获得等效的 C# 属性，您必须更改模板的参数（[QSharedPointer](http://doc.qt.digia.com/qt/qsharedpointer.html#details)）：

```
class Customer : {
  public:
     QList<QSharedPointer<Address> > _addresses;
}; 
```

QSharedPointer 是非侵入式引用计数指针（这将简化内存管理）。这样，您可以对 QList 元素进行修改（这是您需要的），但是您无法更改此 QList 的内容（添加/删除/替换元素），并且您仍然有正常的 getter（返回值而不是引用）的地址.

所以你有问题的代码将像这样工作：

```
AnotherClass::setAsShipping(const QList<Address> addresses) {
// here you have a copy of QList - it is copy on write pattern 
// so adding const will prevent from creating a copy of QList 

  Q_FOREACH (QSharedPointer<Address> address, addresses)
    if (address->isMatch(_shipping))
      address->setIsShipping(true);    // This will modify original value
} 
```

您可以使用[QSharedDataPointer](http://doc.qt.digia.com/qt/qshareddatapointer.html#details)（引用计数侵入指针 - 在这种情况下`Address`必须扩展 QSharedData）。

# entity-framework - Entity Framework 5 Code First、WebApi 以及如何使用 ModelState.IsValid 和标识列创建 POST 方法

> ID：13597508
> 
> 赞同：0
> 
> 时间：2012-11-28T03:52:04.307
> 
> 标签：entity-framework, ef-code-first, asp.net-web-api, entity-framework-5

我正在开发一个使用 Entity Framework 5 Code First、WebApi 和 ASPNET MVC 4 的项目。我有一个像这样的模型

```
public class Category
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }
} 
```

而这个配置

```
public class CategoryMap : EntityTypeConfiguration<Categoria>
{
    public CategoryMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(t => t.Name)
            .HasMaxLength(50);

        this.Property(t => t.Description)
            .HasMaxLength(100);
    }
} 
```

现在，在我的 webapi 控制器中（在 POST 方法中）我正在尝试验证发送的模型，但由于它是一个 POST（创建）并且 Id 是 IDENTITY，它即将为空或为空，因此 Model.Valid 说它无效。

```
public HttpResponseMessage Post(Category category)
{
    if (ModelState.IsValid)
    {
        ...
        return response;
    }

    throw new HttpResponseException(HttpStatusCode.BadRequest);
} 
```

除了更改列的类型并且不检查模型是否有效之外，还有其他解决方案吗？

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:09:24.463

I haven't personally worked with the WebAPI, but is there some problem working with view models in the WebAPI instead of the actual domain object?

Create a "CreateCategory" view model class and bind that to the POST verb. This view model would be the same as your domain class less the fact it wouldn't expose an ID property and whatever other changes you'd like. Since there's no property to validate, there's nothing to trip up validation on.

```
public HttpResponseMessage Post(CreateCategoryViewModel category) 
```

You validate the view model with Model.IsValid, it passes validation, then you map the view model to your actual model object.

Should work much the same as a standard MVC action binding a view model.

Hope that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:49:11.353

创建一个复制 Category 属性、Name 和 Description 的接口（比如 ICategory），并让 Category 类实现该接口。然后修改您的 HTTPRespoonseMessge Post 方法以采用 ICategory 类型的参数。

公共 HttpResponseMessage 帖子（ICategory 类别）{ }

# iphone - UIAccelerometer 校准后更灵敏？

> ID：13597509
> 
> 赞同：2
> 
> 时间：2012-11-28T03:52:15.603
> 
> 标签：iphone, objective-c, ios, uiaccelerometer, calibration

所以我在我的游戏中做了一个基本的校准，如下所示：校准代码：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    [[NSUserDefaults standardUserDefaults] setFloat:acceleration.x forKey:@"X-Calibrate"];
} 
```

然后在我的游戏视图中，这些是加速度计的一些定义：

```
#define kFilteringFactor 0.13
#define MAXXACCELERATION 24 
```

在我的游戏类的 init 方法中，我这样做：

```
calibrationFloat = [[NSUserDefaults standardUserDefaults] floatForKey:@"X-Calibrate"]; 
```

然后我这样做：

```
- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    //Low Pass Filter (gets rid of little jitters) + Calibration value combined
    rollingX = ((acceleration.x - calibrationFloat) * kFilteringFactor) + (rollingX * (1.0 - kFilteringFactor));
} 
```

calibrationFloat 设置为游戏开始前从 NSUserDefaults 读取的值。

然后在游戏循环中我这样做：

```
int rollingAmount = (IS_IPAD() ? 52 : 44);
CGFloat xFloat = (rollingX * rollingAmount);
pos.x += xFloat < -MAXXACCELERATION ? -MAXXACCELERATION : (xFloat > MAXXACCELERATION ? MAXXACCELERATION : xFloat); 
```

然后我根据 pos.x 设置图像的位置。***然而，这就是问题所在：*** 在我校准之后，我的图像运动的灵敏度非常高，因此它的运动速度非常快。在我校准之前，运动速度很好，所以校准一定是出了问题。

这里有什么不正确的地方吗，我的计算有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:25:25.653

尝试添加同步，以确保您在 NSUserDefaults 中写入了正确的值：

'因为您无法确定您的设置在读取之前已写入磁盘，因此您最好立即强制您的应用程序写入它

在苹果文档中：

> 同步 将对持久域的任何修改写入磁盘，并将所有未修改的持久域更新到磁盘上的内容。
> 
> *   (BOOL)synchronize 返回值 如果数据成功保存到磁盘，则为 YES，否则为 NO。

并尝试使用 setDouble: 而不是 setFloat （UIAccelerationValue x 被定义为 double...当然使用 doubleForKey: 当您稍后阅读时）

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    [[NSUserDefaults standardUserDefaults] setDouble:acceleration.x forKey:@"X-Calibrate"];
    if ([[NSUserDefaults standardUserDefaults] synchronize]) {
        NSLog(@"OK: well written!!!");
    }else {
        NSLog(@"NO! Error!!!");
    }

} 
```

# javascript - Rails Javascript 弹出新窗口

> ID：13597512
> 
> 赞同：0
> 
> 时间：2012-11-28T03:52:41.827
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

如何使 javascript 打开一个新窗口与 mailto: 在 Rails 中结合使用？

现在，我有一个链接

```
= mail_to @receiver.email, "SEND TO #{@receiver.name}",:subj=>@receiver.subj,
:body=>@receiver.msg 
```

但是如果用户点击这个链接，它会改变当前窗口的视图。所以我想让用户点击链接，打开一个新窗口，并连接到用户的邮件应用程序，比如浏览器中的 gmail..

如何实现？

还有一个问题，如果我知道如何制作弹出窗口，以及如何在没有用户点击的情况下让视图“点击”mailto 本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:55:29.167

添加`:target => '_blank'`到您的链接：

```
= mail_to @receiver.email, "SEND TO #{@receiver.name}",:subj=>@receiver.subj, :body=>@receiver.msg, :target => '_blank' 
```

对于您的第二个问题，您可以为链接分配一个类`:class => 'clickable'`并像这样触发它（jQuery 示例）

```
$('.clickable').trigger('click'); 
```

# javascript - jQuery 正则表达式过滤数据

> ID：13597513
> 
> 赞同：0
> 
> 时间：2012-11-28T03:52:44.703
> 
> 标签：javascript, jquery, regex, json

我有这个字符串

> [111] 测试团队 +3½-110

我的预期是这个

团队：测试团队，投注：+3½-110

我怎么能在jquery中做到这一点？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:37:46.390

你不会为此使用 jQuery（“json”标签也不合适），你会使用标准的 JS 字符串操作函数（有或没有正则表达式）。

我假设拆分字符串的规则是忽略方括号中的任何前导值，然后将所有内容`+`作为团队名称，并将所有内容`+`（包括其`+`本身）作为下注。如果有多个，`+`那么除了最后一个之外的所有都将被视为团队名称的一部分。

```
function formatBet(input) {
    return input.replace(/^(\[[^\]]*\] )?(.+)( \+[^+]+)$/,"team: $2, bet:$3");
}

console.log(formatBet("[111] Test Team +3½-110"));
     // logs "team: Test Team, bet: +3½-110"
console.log(formatBet("Test Team +3½-110"));   
     // logs "team: Test Team, bet: +3½-110"
console.log(formatBet("[111] Test + Team +3½-110"));
     // logs "team: Test + Team, bet: +3½-110"
console.log(formatBet("[111] Whatever +3½-110"));
     // logs "team: Whatever, bet: +3½-110" 
```

演示：http: [//jsfiddle.net/LKJjw/](http://jsfiddle.net/LKJjw/)

在我的正则表达式中：

```
^(\[[^\]]*\] )? 
```

...可选地匹配字符串 a 的开头，`[`后跟零个或多个非`]`字符，后跟`]`一个空格。然后：

```
(.+) 
```

...匹配团队名称 - 一个或多个任意字符。然后：

```
( \+[^+]+)$ 
```

...匹配一个空格，后跟 a `+`，后跟`+`字符串末尾的一个或多个非字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:28:47.397

```
var str = '[111] Test Team +3½-110';
str.replace('[111] Test Team','team : Test Team, bet :'); 
```

# c# - 我可以裁剪网站的一部分并放入我的 WPF Web 浏览器吗？

> ID：13597514
> 
> 赞同：0
> 
> 时间：2012-11-28T03:52:45.040
> 
> 标签：c#, wpf, browser

我尝试在我的网格中创建一个 WPF Web 浏览器。我的网格大小不足以容纳整个 html。假设我想在我的网络浏览器中输入谷歌搜索。我可以只裁剪 google.com 的中间部分（如下图所示）并放入我的网络浏览器吗？那可能吗？

![在此处输入图像描述](../Images/03e49a493760b9ce143ce3c3d413203a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:56:32.740

这是一种选择，但它有点像黑客。

另一种解决方案是修改您加载的网页的 DOM 并应用大约 80% 的 CSS 缩放（或任何合适的值），以便可以显示整个页面。

您还可以将 CSS 框剪辑应用到根`<html>`或`<body>`元素以实现不那么混乱的结果。

# javascript - 如何从javascript下载文件

> ID：13597516
> 
> 赞同：1
> 
> 时间：2012-11-28T03:52:53.907
> 
> 标签：javascript, ajax, download

我正在尝试使用要下载的文件弹出我的下载功能，当我单击链接时它将文件的二进制文件输出到 div，我该如何制作它，以便当我单击链接时，它会改为询问我要下载吗？我知道我可以用查询字符串和在 php 中使用标头来做到这一点，但我可以用 ajax/javascript 以类似的方式做到这一点吗？谢谢，这是我尝试过的：

```
<html>
<head>
<script>
function Download(plan_name)
{
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var resp = xmlhttp.responseText;
            document.getElementById("txtHint").innerHTML=resp;

            //HOW TO SHOW test.zip in a save-as dialog?
        }
    }

    xmlhttp.open("GET","fetcher.php?file=/raid0/data/naswebsite/Projects/Projects/07-003_Dawson_Mine/Flight\ Plans/Dawson_Sth_1211_AMG_700.zip");
    xmlhttp.send();
}

</script>
</head>
<body>

<a href="#" onClick="Download();">Test Download</a>
<div id="txtHint"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:55:28.057

无法从 AJAX 请求下载文件。
相反，您可以将 URL 加载到隐藏的`<iframe>`.

# erlang - Erlang 的导出语法 /x 是什么意思？为什么是斜线，然后是数字？

> ID：13597522
> 
> 赞同：11
> 
> 时间：2012-11-28T03:53:17.620
> 
> 标签：erlang

```
-export([consult/1,
         dump/2, 
         first/1, 
         for/3,
         is_prefix/2). 
```

我正在阅读文档并与上面的语法混淆。`/1`上面列表中的, `/2`,是什么意思`/3`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T04:05:45.850

`/1, /2, /3`等被称为函数的[“Arity”](http://en.wikipedia.org/wiki/Arity)，Arity 表示该函数接受的参数数量。

在 Erlang 中，两个同名但元数不同的函数是两个不同的函数，因此每个函数都是显式导出的。引用[Erlang 文档](http://en.wikipedia.org/wiki/Arity)是这样说的：

> 函数由模块名称、函数名称和*arity*唯一定义。

例如，如果您有两个函数：

```
do_something() -> does_something().

do_something(SomeArg) -> some_something_else(SomeArg). 
```

在你的模块顶部，你只有

```
-export([do_something/0]). 
```

然后只会导出带有零参数的 do_something（即，可以从系统中的其他模块访问）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:58:08.637

它是函数签名。

`consult/1`表示名为的函数`consult`接受一个参数。`dump/2`表示该函数`dump`接受两个参数。

查阅[文档](http://www.erlang.org/doc/reference_manual/functions.html)以获取更多信息

# javascript - IP 名称和路径显示在窗口中

> ID：13597525
> 
> 赞同：0
> 
> 时间：2012-11-28T03:53:46.853
> 
> 标签：javascript, window, location, title

我必须在新窗口中打开一个 pdf 文件。但是当它在新窗口中打开时，它会显示完整的路径，包括 ip 地址作为页面标题。我的需要是我必须手动给一个标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:05:17.817

The easiest way to change the title of the popup window would be to embed the PDF file (e.g. using an iframe) in a "wrapper" webpage with the desired title, and then open the wrapper page in your popup. Something like this:

```
<!DOCTYPE html>
<meta charset=utf-8>
<title>Form 1040</title>
<style type="text/css">
BODY { margin: 0; padding: 0 }
IFRAME { position: absolute; width: 100%; height: 100%; border: 0 }
</style>
<body>
<iframe src="http://www.irs.gov/file_source/pub/irs-pdf/f1040.pdf"></iframe>
</body> 
```

# c++ - 如何使用内置类（左）和已定义类的指针重载运算符？

> ID：13597526
> 
> 赞同：1
> 
> 时间：2012-11-28T03:53:49.650
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

我想要做的是重载一个使用多项式添加常数的运算符。这是类定义。

```
class polynomial
{
public:
    polynomial();// default constructor
    polynomial(double*,int);//  parameterized constructor
    polynomial(polynomial*);// copy constructor
    ~polynomial();//destructor
    polynomial* const operator+(polynomial*);
    polynomial* const operator+(double);
    friend polynomial* const operator+(double,polynomial);
    polynomial* operator-(polynomial*);
    polynomial* operator-(const double);
    polynomial* operator*(polynomial*);
    polynomial* polynomial::operator*(const double);
    friend ostream& operator<<(ostream&,polynomial*);
    friend double evaluate(polynomial*,double);
    friend double* extract(polynomial*);
    polynomial* operator =(polynomial*);
    int degree;
private:
    double* polyNum;
}; 
```

因为我们无法访问内置类的定义来添加我们想要的操作符作为成员函数。我们别无选择，只能使用非成员函数。但是当我尝试这样做时，会出现一个错误，即“..'operator +' must have at least one form parameter of class type..”

```
 friend polynomial* const operator+(double,polynomial*); 
```

但是，当我尝试传递一个对象而不是它的指针时，另一个问题是，当它从其他函数返回时，它会自动调用析构函数并擦除对象内部指针指向的所有数据。

```
 polynomial* const operator+(double constant,polynomial p)
{
->  return p+constant;
} 
```

*   p {degree=3 polyNum=0x00de8188 {1.0000000000000000} } 多项式

```
polynomial* const operator+(double constant,polynomial p)
{
    return p+constant;
->
} 
```

*   p {degree=3 polyNum=0x00de8188 {-2.6569842580370804e+303} } 多项式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:04:26.740

You seem to be confused about the need for pointers. (Hint: there is no need for pointers in your class.)

To answer your specific question, your `operator+` functions should look like this:

```
class polynomial {
public:
  polynomial& operator +=(double d) {
     polynum[0] += d; // or whatever
     return *this;
  }
  polynomial& operator+=(const polynomial& p) {
    for( ... ) {
      polynum[i] += p.polynum[i]; // or whatever
    }
    return *this;
  }

  // other stuff goes here, too
  ...
};

polynomial operator+(polynomial p, double d) { return p += d; }

polynomial operator+(double d, polynomial p) { return p += d; }

polynomial operator+(polynomial l, const polynomial& r) { return l += r; } 
```

Typical usage would be:

```
int main () {
  polynomial p, q, r;
  double d;
  ... fill in p, q, and d ...
  q = p + d;
  r = d + p;
  p = q + r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:13:47.750

我之前唯一的复制构造函数是

```
polynomial(polynomial*);
// copy constructor work with pointer 
```

它使当我将对象而不是指针作为参数传递给函数时

```
 polynomial* const operator+(double constant,polynomial p)
{
    return p+constant;
} 
```

局部变量只是简单地从外部变量复制值，包括 p.polynum 的值。结果，有两个指针指向同一个数组。当函数完成并准备返回时，它调用析构函数来销毁局部变量p，这顺便销毁了p.polynum的数组。这就是为什么外部指针指向的数组内的值被擦除的原因。这就是为什么我们需要为包含指针的类创建一个真正的复制构造函数。

解决方案：

> 添加一个额外的复制构造函数：

```
polynomial(polynomial*);
// copy constructor2 work with object. 
```

# asp.net - 如何为 EF 生成的实体类中的每个虚拟属性添加过滤器属性？

> ID：13597531
> 
> 赞同：1
> 
> 时间：2012-11-28T03:54:21.957
> 
> 标签：asp.net, .net, asp.net-mvc, entity-framework, entity-framework-5

我想为 Entity Framework 自动生成的实体类中的每个虚拟属性添加一个过滤器属性，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:42:49.453

假设您正在使用 DatabaseFirst，您`Model.tt`的项目中应该有一个自动生成实体类的文件。在其中`Model.tt`有一个`WriteProperty`实际生成属性的函数，您可以在那里添加您的属性。它看起来像这样：

```
void WriteProperty(string accessibility, string type, string name, string getterAccessibility, string setterAccessibility)
{
#>
    [YourCustomFilterAttribute]
    <#=accessibility#> <#=type#> <#=name#> { <#=getterAccessibility#>get; <#=setterAccessibility#>set; }
<#+
} 
```

如果您需要有条件地应用该属性，您当然可以使用`type`,和其他参数。`name`

# xamarin.android - 使用 monodroid 的异步 WCF 调用

> ID：13597535
> 
> 赞同：0
> 
> 时间：2012-11-28T03:54:51.660
> 
> 标签：xamarin.android

我当前调用 WCF 的方法是沼泽标准事件，异步样式（例如）

```
foo.EventArgs += Foo_EventArgsCompleted
foo.EventArgsAsync(params...) 
```

这很好用，但有时速度非常慢，而且很麻烦，因为您需要另一种方法来处理结果。

有没有办法让它更接近在 Win8 上完成的方式？

```
private async foo<bool>()
{
  try 
  {
     await foo.EventArgsAsync(params...)
  } 
  catch
  {
     // catch here
  }

  // deal with the code back
  return true;
} 
```

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:18:27.120

您可以[编写自己的`*TaskAsync`扩展方法](http://msdn.microsoft.com/en-us/library/hh873178.aspx)。

如果您的代理有`*Begin`/`*End`方法，您可以使用`TaskFactory.FromAsync`：

```
public static Task<int> FooTaskAsync(this FooClient client)
{
  return Task<int>.Factory.FromAsync(client.BeginFoo, client.EndFoo, null);
} 
```

否则，您必须使用`TaskCompletionSource`：

```
public Task<int> FooTaskAsync(this FooClient client)
{
  var tcs = new TaskCompletionSource<int>();
  client.FooCompleted += (s, e) =>
  {
    if (e.Error != null) tcs.SetException(e.Error);
    else if (e.Cancelled) tcs.SetCanceled();
    else tcs.SetResult(e.Result);
  };
  client.FooAsync();
  return tcs.Task;
} 
```

# c# - 按顺序映射的 Google 多个标记

> ID：13597538
> 
> 赞同：0
> 
> 时间：2012-11-28T03:55:02.900
> 
> 标签：c#, asp.net, google-maps-api-3

我[在 Code Project 上使用示例 Google Maps API V3 for ASP.NET](http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET)，它运行良好。

我想为其添加一些功能，但我不确定是否可行。我做了一些研究，但我不确定我的术语是什么。

我们每 15 秒向 SQL Server 报告一次纬度/经度。我想每分钟读一次，并绘制出车辆经过 x 次读数的路线

我可以毫无问题地用纬度/经度将图钉放在地图上，但我想用线条或类似的东西来显示它的路线。

谷歌地图可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:04:24.660

当然。在 Google Maps API 中，这些被称为`Polyline`s。

这是文档的链接：

[https://developers.google.com/maps/documentation/javascript/reference#Polyline](https://developers.google.com/maps/documentation/javascript/reference#Polyline)

这是使用`Polyline`s 的开发人员示例之一：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/polyline-complex](https://google-developers.appspot.com/maps/documentation/javascript/examples/polyline-complex)

# r - 条形图后面的情节线

> ID：13597543
> 
> 赞同：8
> 
> 时间：2012-11-28T03:55:30.910
> 
> 标签：r, plot

我想创建一个条形图，其中条形图绘制在水平线的顶部。

下面的代码实现了这一点：

```
y <- c(1,2,3,5)
barplot(y)
abline(h=mean(y))
barplot(y, add=T) 
```

但是，我担心 中的`add=T`参数`barplot()`如果重复使用，可能会引入打印伪影。我很好奇是否有上述代码的替代方法（尽管上述代码可能是最快的方法）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T04:34:16.017

您可以在第一次通话中不绘制任何内容：

```
y <- c(1,2,3,5)
barplot(
  rep(NA, length(y)),
  ylim = pmax(range(y), 0),
  axes = FALSE
)
abline(h = mean(y))
barplot(y, add = TRUE) 
```

[![条形图后面有水平线，根据需要](../Images/a9d583a9067907ff1fed528c5c78864a.png)](https://i.stack.imgur.com/FPOcj.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T04:09:48.447

如果您使用 ggplot2，则不必担心这一点。您的问题归结为几何顺序：

```
ggplot(data.frame(x=1:4, y=y), aes(x=x, y=y)) + 
    geom_bar(stat="identity") + 
    geom_hline(yintercept=mean(y), color="red") 
```

![排在前面](../Images/8b3362bb05cf3b9907af35dd74699e7f.png)

相比下：

```
ggplot(data.frame(x=1:4, y=y), aes(x=x, y=y)) + 
    geom_hline(yintercept=mean(y), color="red") +
    geom_bar(stat="identity") 
```

![后面的线](../Images/76ee6151efa23881b523fdf752436493.png)

# android - 超载虚拟机？线性布局背景图片

> ID：13597544
> 
> 赞同：1
> 
> 时间：2012-11-28T03:55:31.100
> 
> 标签：android, xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="center"
android:background="@drawable/background1">

<ImageButton
    android:id="@+id/make"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:scaleType="fitXY"
    android:src="@drawable/button1" >
</ImageButton>

<ImageButton
    android:id="@+id/see"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:scaleType="fitXY"
    android:src="@drawable/button2" >
</ImageButton> 
```

它的三个非常小的 JPEGS 一个是背景，另外两个是按钮，我知道我得到一个运行时错误，但是当我删除 LinearLayout 的 android:background 时它运行正常，我做错了什么？

```
 11-27 23:25:37.464: D/dalvikvm(422): GC_EXTERNAL_ALLOC freed 49K, 50% free        2742K/5379K, external 1625K/2137K, paused 74ms
11-27 23:25:38.624: D/dalvikvm(422): GC_EXTERNAL_ALLOC freed 2K, 50% free 2740K/5379K,   external 12425K/14473K, paused 99ms
11-27 23:25:38.674: E/dalvikvm-heap(422): 22118400-byte external allocation too large for this process.
11-27 23:25:38.734: E/GraphicsJNI(422): VM won't let us allocate 22118400 bytes
11-27 23:25:38.734: D/dalvikvm(422): GC_FOR_MALLOC freed 0K, 50% free 2740K/5379K, external 12425K/14473K, paused 44ms
11-27 23:25:38.744: D/AndroidRuntime(422): Shutting down VM
11-27 23:25:38.744: W/dalvikvm(422): threadid=1: thread exiting with uncaught exception   (group=0x40015560)
11-27 23:25:38.784: E/AndroidRuntime(422): FATAL EXCEPTION: main
11-27 23:25:38.784: E/AndroidRuntime(422): java.lang.RuntimeException: Unable to start  activity ComponentInfo{genie.lamp.rub/genie.lamp.rub.FirstScreen}:  android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.os.Looper.loop(Looper.java:130)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-27 23:25:38.784: E/AndroidRuntime(422):  at java.lang.reflect.Method.invokeNative(Native Method)
11-27 23:25:38.784: E/AndroidRuntime(422):  at java.lang.reflect.Method.invoke(Method.java:507)
11-27 23:25:38.784: E/AndroidRuntime(422):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-27 23:25:38.784: E/AndroidRuntime(422):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-27 23:25:38.784: E/AndroidRuntime(422):  at dalvik.system.NativeStart.main(Native  Method)
11-27 23:25:38.784: E/AndroidRuntime(422): Caused by: android.view.InflateException:   Binary XML file line #2: Error inflating class <unknown>
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
11-27 23:25:38.784: E/AndroidRuntime(422):  at  com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java: 56)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-27 23:25:38.784: E/AndroidRuntime(422):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.Activity.setContentView(Activity.java:1657)
11-27 23:25:38.784: E/AndroidRuntime(422):  at genie.lamp.rub.FirstScreen.onCreate(FirstScreen.java:16)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-27 23:25:38.784: E/AndroidRuntime(422):  ... 11 more
11-27 23:25:38.784: E/AndroidRuntime(422): Caused by: java.lang.reflect.InvocationTargetException
11-27 23:25:38.784: E/AndroidRuntime(422):  at java.lang.reflect.Constructor.constructNative(Native Method)
11-27 23:25:38.784: E/AndroidRuntime(422):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
11-27 23:25:38.784: E/AndroidRuntime(422):  ... 21 more
11-27 23:25:38.784: E/AndroidRuntime(422): Caused by: java.lang.OutOfMemoryError:  bitmap size exceeds VM budget
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.Bitmap.nativeCreate(Native Method)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.View.<init>(View.java:1951)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.View.<init>(View.java:1899)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.view.ViewGroup.<init>(ViewGroup.java:286)
11-27 23:25:38.784: E/AndroidRuntime(422):  at android.widget.LinearLayout.<init>(LinearLayout.java:120)
11-27 23:25:38.784: E/AndroidRuntime(422):  ... 24 more
11-27 23:25:41.264: I/Process(422): Sending signal. PID: 422 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:04:13.233

使用相同的 xml 文件。

并更改打开的东西更改您使用的所有图片或图像以 .PNG 格式更改它，因为只有 PNG 和使用相同的 XML，Android 才能完美地工作，但仅更改可绘制文件夹中的所有图片或图像。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="center"
android:background="@drawable/background1">

<ImageButton
    android:id="@+id/make"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:scaleType="fitXY"
    android:src="@drawable/button1" >
</ImageButton>

<ImageButton
    android:id="@+id/see"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:scaleType="fitXY"
    android:src="@drawable/button2" >
</ImageButton> 
```

绘制 9-patch

```
http://developer.android.com/tools/help/draw9patch.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:25:08.117

是的，您可以尝试用 png 图像而不是 jpeg 替换可绘制图像。还要发布您收到的运行时错误。

# php - 在浏览器中显示 XSS

> ID：13597545
> 
> 赞同：0
> 
> 时间：2012-11-28T03:55:38.797
> 
> 标签：php, xss, security

我正在构建一个应用程序来检索任何类型的用户输入，即使用户输入了 xss 注入代码。除此之外，我提供了一个管理视图来显示用户放置的全部内容，或者他们放置了 html 代码、bb 代码、xss、javascript 等（类似用于分析目的）。

我认为 htmlentities($data, ENT_QUOTES) 就足够了，但是在阅读[https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)之后，它让我更加困惑。

我不想删除任何标签或脚本，我只想在带有转义的 html 中显示它。如果我把它放在 textarea 标签上会保存吗？我的意思是如果数据包含 xss 如果在文本中它不会执行？

```
<textarea name="comment" rows="30" cols="100"><?php echo htmlentities($data, ENT_QUOTES); ?></textarea> 
```

或者有任何安全的方法可以在浏览器上显示 xss，但它自己没有执行 xss。

对不起，我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:15:43.943

如果您的管理员打开特制的用户输入，那么您发布的代码很容易受到 XSS 攻击，攻击者可以获得该页面的管理权限。将用户代码放在 textarea 或任何其他标签中并不能防止 XSS 攻击。黑客所要做的就是在他的输入中关闭 textarea 标签，然后做任何他想做的事。

我很高兴你找到了 owasp cheet sheet :) 你应该遵循它非常有用。请记住转义放置在页面上的所有用户输入。

我会推荐使用`htmlspecialchars`，然后使用：[tags present here](http://code.google.com/p/fuzzdb/source/browse/trunk/attack-payloads/xss/xss-rsnake.txt?r=186)进行一些测试。如果您看不到 JS 警报，那么您的应用程序在一定程度上受到了 xss 攻击的保护。

# php - Facebook JSON 数组

> ID：13597546
> 
> 赞同：1
> 
> 时间：2012-11-28T03:55:39.013
> 
> 标签：php, facebook, json

如何显示数据-> 名称？

```
{
   "data": [
      {
         "name": "Aasdada",
         "category": "asdasd",
         "id": "2342342342",
         "created_time": "2012-11-28T03:56:00+0000"
      }
   ],
   "paging": {
      "next": "https://graph.facebook.com/&limit=5000&offset=5000&__after_id=12312"
   }
} 
```

我试过了，但没有任何结果：

```
$user = json_decode(file_get_contents($graph_url), true);
echo("Hello " . $user->data->name);

//also tried this
echo("Hello " . $user[data]); //did not echo anything
echo("Hello " . $user->data[0]->name); //did not echo anything

$user->data[0]['name'] //still no luck 
```

可能是什么问题呢？无论如何，我的代码适用于不在数组中的数据。

我只是想简单地说明用户是否喜欢页面。如果数据没有内容，则表示用户不喜欢该页面。如果它有数据，则表示用户喜欢该页面。

- 编辑 -

所以尝试了这个：

```
array(2) { ["data"]=> array(1) { [0]=> array(4) { ["name"]=> string(28) "Aasdda" ["category"]=> string(5) "asdad" ["id"]=> string(15) "3123123123" ["created_time"]=> string(24) "2012-11-28T03:56:00+0000" } } ["paging"]=> array(1) { ["next"]=> string(245) "https://graph.facebook.com/100023123123" } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:03:47.453

尝试：

```
$user['data']['0']['name'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:58:00.960

尝试：

```
 $user->data[0]['name'] 
```

# c# - 使用目标框架 3.5 从控制台应用程序访问字体文件夹

> ID：13597547
> 
> 赞同：0
> 
> 时间：2012-11-28T03:55:48.947
> 
> 标签：c#, console-application

我需要在我的 c:/windows/ 文件夹中获取特定字体的路径当目标框架为 4.0 时，以下代码可以完美运行但我的应用程序只能针对 3.5，我需要在控制台应用程序中使用它 c#

我怎样才能做到这一点？谢谢。

```
string arialuniTff = path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Fonts), "arial.TTF"); 
```

**3.5 中的错误消息：“System.Environment.SpecialFolder”不包含定义**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:26:25.310

字体文件夹通常位于`%windir%\Fonts`，因此您应该能够像这样获得该位置：

```
Path.Combine(
    System.Environment.GetEnvironmentVariable("windir"),
    "Fonts"); 
```

它是一个虚拟文件夹，因此理论上它可以位于其他地方。在实践中，我从未见过或听说过这种情况。（微软对这个位置有足够的信心，可以在他们的“[如何安装字体](http://support.microsoft.com/kb/314960)”页面上引用它）。不过，我敢肯定，如果您试图找到这样的特定文件名，那么您已经有了很好的错误处理能力。

奖金信息：

您可能已经知道这一点，但如果您需要了解特定版本的 .net 框架中可用的类、方法等，您可以从 MSDN 中找到。转到文档页面（在[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)上说这个），然后单击左上角的“.NET Framework 4.5”链接并选择不同的版本以查看您正在查看的页面，就像它在该版本中一样.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T14:40:33.370

请参阅[如何在 .NET 3.5 中获取 CSIDL_COMMON_DOCUMENTS 的路径？](https://stackoverflow.com/questions/8610787/how-to-get-the-path-to-csidl-common-documents-in-net-3-5)

它为`const int CSIDL_COMMON_DOCUMENTS = 0x002e;`.

对于`Fonts`文件夹，使用`const int CSIDL_FONTS = 0x0014;`

这将是：

```
[DllImport("shell32.dll"), CharSet = CharSet.Auto]
static extern int SHGetFolderPath(IntPtr hwndOwner, int nFolder, IntPtr hToken, uint dwFlags, [Out] StringBuilder pszPath);

const int CSIDL_FONTS = 0x0014;
const int CSIDL_FLAG_CREATE = 0x8000;

StringBuilder sb = new StringBuilder();

int retVal = SHGetFolderPath(IntPtr.Zero,
                                 CSIDL_FONTS | CSIDL_FLAG_CREATE,
                                 IntPtr.Zero,
                                 0,
                                 sb);
Debug.Assert(retVal >= 0);  // assert that the function call succeeded
String folderLocation = sb.ToString(); 
```

# knockout.js - 剔除映射选择列表到 ViewModel

> ID：13597549
> 
> 赞同：0
> 
> 时间：2012-11-28T03:56:02.830
> 
> 标签：knockout.js, knockout-2.0

我正在进行我的第一个淘汰赛项目，可以使用一些指导。到目前为止，我可以从我的服务中在我的视图模型中填充我的主类，但是我正在尝试绑定选择列表框并且控件没有像我预期的那样绑定，尽管数据可用。虽然我现在可以获取选择列表数据来填充表单，但它没有选择正确的索引。

非常感谢您的关注！

```
 // Initialized the namespace
    var Namespace = {};

    // View model declaration
    Namespace.initMemberVM = function (model) {
        var memberViewModel = {
            Id: ko.observable(model.Id),
            Married: ko.observable(model.Married),
            Name: ko.observable(model.Name),
            SalutationId : ko.observable(model.SalutationId),
            Salutation: ko.observable(Namespace.salutations[model.SalutationId]),
            Salutations: Namespace.salutations 
        };
        return memberViewModel;
    };

    Namespace.initSalutations = function (model) {
        console.log('called initSalutations');
        Namespace.salutations = ko.mapping.fromJS(model); 
    };

 // Bind the member
    Namespace.bindData = function (model) {
        // Create the view model
        var viewModel = Namespace.initMemberVM(model);

        ko.applyBindings(viewModel);
    };
    $(document).ready(function () {
        Namespace.getSalutations();
        Namespace.getMember(1);
    }); 
```

这是ajax调用返回的数据

```
[{"Id":1,"Name":"Mr","IsMarried":false,"TimeStamp":"2012-11-27T21:49:10.583"},{"Id":2,"Name":"Mrs.","IsMarried":true,"TimeStamp":"2012-11-27T21:49:10.583"},{"Id":3,"Name":"Ms","IsMarried":false,"TimeStamp":"2012-11-27T21:49:10.583"},{"Id":4,"Name":"Miss","IsMarried":false,"TimeStamp":"2012-11-27T21:49:10.583"}] 
```

这是HTML

```
 <table>
        <tbody>
        <tr><td>User Id</td><td colspan="4"><label data-bind="text: Name"></label></td></tr>
        <tr>
        <td>Salutation</td><td><select   data-bind="options: Salutations, value: Id, optionsText: 'Name'"></select></td>
        </tr>
        <tr>
        <td></td><td>First</td><td>Middle</td><td>Last</td>
        </tr>
        <tr>
            <td>Name</td><td><input type="text" data-bind="value: FName"></td><td><input type="text"  data-bind="value: MName"></td><td><input type="text"  data-bind="value: LName"></td>
        </tr>

    </tbody> 
```

更新：经过进一步挖掘后，我发现我的选择没有保存正确索引的原因是 b/c 当我尝试将该值设置为我的 memberViewModel 时，Namespace.salutations 数组没有及时填充.

任何有关如何管理的指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:14:39.807

对于那些有类似问题的人，这里是您可能会发现有用的剩余代码。同样，如果您在评论中错过了它，我更新了我对服务的第一次调用，以恢复我的控制器的数据至于我的会员。我稍后会调整这种方法，以便存储参考数据以供以后单独使用，但现在......

```
 $.each(my.dataService.member.Salutations, function (i, p) {
                    salutations.push(new my.Dropdown(selectedItem)
                            .id(p.Id)
                            .name(p.Name)
                    );
                });

    // for creating Position Models
    my.Dropdown = function (selectedItem) {
        var self = this;
        self.id = ko.observable();
        self.name = ko.observable();
        // non-persitable properties
        self.isSelected = ko.computed(function () {
            return selectedItem() === self;
        });
    }; 
```

# ruby-on-rails-3 - 表单中的嵌套模型未保存

> ID：13597550
> 
> 赞同：0
> 
> 时间：2012-11-28T03:56:06.237
> 
> 标签：ruby-on-rails-3, rspec, nested-forms

我知道这里有几个不同的帖子，人们试图让他们的带有嵌套模型的 Rails 3 表单“工作”。我看过很多，包括[Subclass Is Not Saving](https://stackoverflow.com/questions/7601462/nested-model-form-one-subclass-isnt-saving-its-changes)和[Nested Model with Polymorphic Association](https://stackoverflow.com/questions/7019758/nested-model-forms-with-polymorphic-association)，以及 Ryan Bates 的 Railscasts on [Nested Model Forms](http://railscasts.com/episodes/196-nested-model-form-revised)和他关于 Complex Forms 的两个教程。

也就是说，我很难理解为什么我的表单中的对象没有保存。

这是我的模型：

**课程.rb**

```
class Course < ActiveRecord::Base
  attr_accessible :course_name, :course_semester, :course_summary, :course_year, :objectives_attributes

  has_many :objectives, as: :objectiveable
  accepts_nested_attributes_for :objectives, :reject_if => lambda { |a| a[:objective].blank? }, :allow_destroy => true 
```

**目标.rb**

```
class Objective < ActiveRecord::Base
attr_accessible :objective
belongs_to :objectiveable, polymorphic: true 
```

我的表格：

**新的.html.erb**

```
<%= form_for [current_user, @course] do |course| %>

<%= course.label "Course Name" %>
<%= course.text_field :course_name, id:"course_name" %>

<%= course.label "Semester" %>
<%= course.select(:course_semester,[['Fall', 'Fall'], ['Spring', 'Spring'], ['Summer', 'Summer'], ['Winter','Winter']] ) %>

<%= course.label "Course Year" %>
<%= course.text_field :course_year, id:"course_year" %>

<p>Course Objectives</p>
<%= course.fields_for :objectives do |objective| %>

    <%= objective.text_field :objective, name: "objective" %>

<% end %>

<%= course.label "Course Summary" %>
<%= course.text_area :course_summary, id:"course_summary" %>

<%= course.submit "Save and Return", name: "save_and_return" %>
<%= course.submit "Create a Unit", name: "course_to_unit" %>

<% end %> 
```

我的控制器：

**course_controller.rb**

```
class CoursesController < ApplicationController
before_filter :authenticate_user!
load_and_authorize_resource

def new
  @course = current_user.courses.new
  @course.objectives.build
end

def create
  @course = current_user.courses.new(params[:course])
  if @course.save && params[:save_and_return]
    redirect_to user_path(current_user)
  elsif @course.save && params[:course_to_unit]
    redirect_to new_course_unit_path(@course)
  else
    flash[:notice] = "Sorry, there was a mistake with the form"
    render 'new'
  end
end 
```

我的日志：

**测试日志**

```
Started POST "/users/1/courses" for 127.0.0.1 at 2012-11-27 22:23:00 -0500
Processing by CoursesController#create as HTML
  Parameters: {"utf8"=>"✓", "course"=>{"course_name"=>"Physics 1", "course_semester"=>"Fall", "course_year"=>"2012", "course_summary"=>"This is a valid course summary."}, "objective"=>"An objective", "save_and_return"=>"Save and Return", "user_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "courses" ("course_name", "course_semester", "course_summary", "course_year", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["course_name", "Physics 1"], ["course_semester", "Fall"], ["course_summary", "This is a valid course summary."], ["course_year", 2012], ["created_at", Wed, 28 Nov 2012 03:23:00 UTC +00:00], ["updated_at", Wed, 28 Nov 2012 03:23:00 UTC +00:00], ["user_id", 1]]
  [1m[35m (6.1ms)[0m  commit transaction
Redirected to http://www.example.com/users/1
Completed 302 Found in 17ms (ActiveRecord: 7.0ms) 
```

我可以在日志中的参数哈希中看到目标，但是在提交数据时，没有任何内容被插入到目标表中。在我的控制台中，我可以使用@course.objectives.create 或@course.objectives.build 创建目标，因此我知道该关联正在工作（另外我已经在Rspec 中测试了模型）。但我无法弄清楚我在表单级别做错了什么。

我还应该注意，我在 Rspec 中将其作为测试运行，如下所示：

**course_pages_spec.rb**

```
 it "Adds at least one objective to the course" do
        expect {
          fill_out_course_form_with_valid_info
          click_button save_button
        }.to change(Course, :count).by_at_least(1)
        Course.last.objectives.count.should == 1
      end 
```

虽然我也启动了 Rails Server，但在表单中输入值并获得相同的结果。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:46:37.623

所以，答案比我想象的要容易得多。在我的嵌套表单中，我有以下内容：

```
<p>Course Objectives</p>
<%= course.fields_for :objectives do |objective| %>

  <%= objective.text_field :objective, name: "objective" %>

<% end %> 
```

事实证明，通过将“name”定义为“objective”，我覆盖了默认的“name”，“course[objectives_attributes][0][objective]”，这是传递参数的位置/方式。

根据[Rails 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)，

> 与使用普通 HTML 相比，表单助手旨在使使用资源更容易。
> 
> 模型的表单是使用 form_for 创建的。该方法产生一个表单构建器，该构建器知道表单所涉及的模型。因此，表单构建器能够为与模型属性对应的输入字段以及方便的名称、ID、端点等生成默认值。
> 
> **生成的字段名称中的约定允许控制器接收在参数中结构良好的表单数据，而您无需付出任何努力。**

我首先拥有“名称”属性的原因是为了让 Capybara 在我的测试中能够抓住一些东西。猜猜这不是一个好主意:-)

（我所做的是使用 Firebug 来确定表单字段的 ID 是什么，然后对其进行测试。）

# jquery - 在提交表单之前检查 ajax 中的错误

> ID：13597554
> 
> 赞同：1
> 
> 时间：2012-11-28T03:56:19.047
> 
> 标签：jquery, ajax

```
$(document).ready(function(){
    $("#userid").blur(function(){
        $.post("validation.php?input=userid",{ userid:$("#userid").val() } ,function(data){
            if(data == "blank"){
                $("#useridError").removeClass().addClass('messageError').html('Please do not leave blank!');
            }
        });

    });
}); 
```

大家好，我有这段代码使用 jQuery 来验证用户 ID。将会有更多的验证，例如密码、名称等。但我很困惑。现在我可以告诉用户插入的用户 ID 包含错误。在发布表格时，我如何检查错误？

例如，userid 和 name 出错，所以当我们点击提交时，表单不会提交。如果没有显示错误，则可以提交表单。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:04:19.797

```
<script type="text/javascript">
/*$(document).ready(function(){
    $("#userid").blur(function(){
        $.post("validation.php?input=userid",{ userid:$("#userid").val() } ,function(data){
            if(data == "blank"){
                $("#useridError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });

    });
     $("#useremail").blur(function(){
        $.post("validation.php?input=useremail",{ useremail:$("#useremail").val() } ,function(data){
            if(data == "blank"){
                $("#useremailError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });

    });
     $("#username").blur(function(){
        $.post("validation.php?input=username",{ username:$("#username").val() } ,function(data){
            if(data == "blank"){
                $("#useremailError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });

    });
});*/

function validate_userid(){
    $.post("validation.php?input=userid",{ userid:$("#userid").val() } ,function(data){
            if(data == "blank"){
                $("#useridError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });
}
function validate_useremail(){
    $.post("validation.php?input=useremail",{ useremail:$("#useremail").val() } ,function(data){
            if(data == "blank"){
                $("#useremailError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });
}

function validate_username(){
    $.post("validation.php?input=username",{ username:$("#username").val() } ,function(data){
            if(data == "blank"){
                $("#useremailError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });
}
function validate(){
var userid = $("#userid").val();
var useremail = $("#useremail").val();
var username = $("#username").val();
if(userid == ""){
    validate_userid();
}else if(useremail == ""){
    validate_useremail();
}else if(username == ""){
    validate_username();
}
}

/*You can use any one of the validate()--------------the two are working as same-------------------*/
function validate(){
    var userid = $("#userid").val();
    var useremail = $("#useremail").val();
    var username = $("#username").val();
    if(userid == ""){
        $.post("validation.php?input=userid",{ userid:$("#userid").val() } ,function(data){
            if(data == "blank"){
                $("#useridError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });
    }else if(useremail == ""){
        $.post("validation.php?input=useremail",{ useremail:$("#useremail").val() } ,function(data){
            if(data == "blank"){
                $("#useremailError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });
    }else if(username == ""){
        $.post("validation.php?input=username",{ username:$("#username").val() } ,function(data){
            if(data == "blank"){
                $("#useremailError").removeClass().addClass('messageError').html('Please do not leave blank!');
                return false;
            }
        });
    }
}

</script>
<form action="" method="post">
<input type="text" name="userid" id="userid" value="" onblur="return validate_userid();" />
<div id="useridError"></div>

<input type="text" name="useremail" id="useremail" value="" onblur="return validate_useremail();" />
<div id="useremailError"></div>

<input type="text" name="username" id="username" value="" onblur="return validate_username();" />
<div id="usernameError"></div>

   <input type="submit" value="SUBMIT" name="submit" id="submit" onclick="return validate();" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:04:27.160

`Regex`您可以使用如下方式检查值

**脚本**

```
var ck_name = 'YourDesiredRegExForValidation';//set your desired Regex to validate your `name`

function validate(form){
   var name = form.name.value;
   //set your all field's value in a variable
   var errors = [];

 if (!ck_name.test(name)) {
  errors[errors.length] = "You valid Name .";
 }
 //simultaneously check out all fields

 if (errors.length > 0) {
      reportErrors(errors);
      return false;
 }
  return true;
}

// Following function is just to display Errors
function reportErrors(errors){
      var msg = "Please Enter Valide Data...\n";
      for (var i = 0; i<errors.length; i++) {
              var numError = i + 1;
              msg += "\n" + numError + ". " + errors[i];
      }
      alert(msg);
 } 
```

看看[这个](http://www.9lessons.info/2009/03/perfect-javascript-form-validation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:42:24.103

   简而言之，如果数据没有通过验证，让函数返回false；返回 false 将阻止表单将数据发布到服务器；如果数据确实通过了验证，则让函数返回 true。
   我可以进一步解释，但基本上，这就是需要发生的事情。

   希望这可以帮助。

# git - 需要 Rstudio、make 和 git 的项目设置建议

> ID：13597555
> 
> 赞同：1
> 
> 时间：2012-11-28T03:56:19.243
> 
> 标签：git, r, makefile, project

我正在从手动流程转向自动化流程，需要帮助。

我有一个包含 csv 数据文件的目录，这些文件提供了一组 R 例程进行分析。该目录以创建日期命名，但并非目录中的所有文件都已更新

目录（例如 data2012-11-26）总是有七个元素：

```
BW_Weekly.csv
BW_Monthly.csv
BW_Yearly.csv
CLR_Weekly.csv
CLR_Monthly.csv
CLR_Yearly.csv
Special_Weekly.csv 
```

其他限制 - 我有时必须回到以前的日期目录来分析旧集。“每周”文件每周更新一次，“每月”和“每年”文件每月更新一次。

我今天的工作流程是：每周一通过电子邮件接收周文件，下个月的第一个星期一接收月/年文件（即下周一，我将在月/年文件中收到 11 月的更新。创建一个新目录与星期一日期。将当前的每月/每年文件复制到该目录。将每周文件从电子邮件保存到该新目录。使用新目录名称更新 R 分析文件中的变量名称。运行（源）分析，绘图结果。非常手动。

我试图弄清楚如何使用 git（可能还有一个或两个 makefile 规则）在更自动化的过程中执行此操作。-感谢您的任何建议-

我有点混乱的想法是使用 git 在文件到达时提交/标记文件。然后使用 makefile 规则 1) 检查最新的数据文件 2) 运行/将结果绘制成 pdf 3) 查看 pdf 以进行分析。另外，我可以停止一遍又一遍地编辑文件......

这将允许一些事情：

```
git checkout data2012-11-26 (or whatever Monday date I want)
build all (in RStudio Build Tab ideally) 
```

这些文件很大——每个 csv 文件大约 15-20MB。git可以处理吗？并且有人可以帮助制定可以完成这项工作的规则（除了最低限度的makefile规则之外，我不擅长任何其他事情）......甚至可以进行结帐吗？

愿意使用新的文件命名约定 - 如果您认为这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:56:38.550

我确实会为此推荐 make 。我做了一些非常相似的事情，并且一直在努力寻找使分析可重复、模块化和自动化的最佳方法。我最近将[这个](https://github.com/paulhurleyuk/AnalysisWorkflowSkeleton)发布到 github（因此我在搜索时找到了这个帖子）。这里没有硬性和快速的答案，但这里有一些想法。

*   使您的分析模块化。我有单独的 R 文件来获取数据，然后清理，然后处理，然后生成报告元素，然后生成报告。
*   让所有脚本访问一组标准数据，然后您可以将它们推送到 git 并将 git 留给版本控制，而不必为不同的数据集更新脚本
*   为您的分析创建一个 makefile，指定每个步骤的输出及其执行方式，然后 make 将检查您的所有依赖项

然后你可以覆盖任何新的数据文件，然后运行 ​​make 来更新所有内容。运行旧的分析就像检查该分支并再次运行分析一样简单。

# flash - 如何使 MOUSEEVENT.ROLL_OVER 在 Actionscript 3.0 中的两个重叠 Sprite 上都启用

> ID：13597558
> 
> 赞同：0
> 
> 时间：2012-11-28T03:56:36.533
> 
> 标签：flash, actionscript

我有两个 Sprite，它们有一个重叠区域。当鼠标滑过该区域时，我想让这两个 Sprite 都响应`MOUSEEVENT.ROLL_OVER`事件。但是，在我的情况下，只有上层 Sprite 会捕获该事件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:34:32.377

只需将这 2 个精灵放入另一个精灵中，然后像这样听新的精灵：

```
var sprite3:Sprite = new Sprite();

sprite3.addChild(sprite1);
sprite3.addChild(sprite2);

addChild(sprite3);

sprite3.addEventListener(MouseEvent.ROLL_OVER, onRollOverHandler); 
```

# java - 我想清理我的 if-else 逻辑

> ID：13597564
> 
> 赞同：1
> 
> 时间：2012-11-28T03:57:13.050
> 
> 标签：java, coding-style, if-statement, code-cleanup

这似乎效率低下或丑陋或出于任何原因，我希望它更优雅

```
if (a > b) {
    recurseWith(a);
    recurseWith(b);
else {
    recurseWith(b);
    recurseWith(a);
} 
```

在我的代码中 a 和 b 更长，新函数的参数更庞大，而且看起来很蹩脚。有没有办法清理这个？

顺序很重要，因为它们使用全局变量，而且，这段代码可以正常工作。

我正在寻找 Java 中的解决方案

-奥斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:01:46.670

Will following logic not help here ?

```
if(a<=b) swap(a,b);

recurseWith(a);
recurseWith(b); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T04:03:06.037

I don't have a good answer, but depending on the grossness/longness of the parameters can hide them in a Runnable so you only have to write them once. Your decide whether this is "cleaner". It's going to look worse here, because we're using `a` and `b`.

```
Runnable aRunnable = new Runnable() {
    public void run() {
        recurseWith(a);
    }
}

Runnable bRunnable = new Runnable() {
    public void run() {
        recurseWith(b);
    }
}

if (a > b) {
    aRunnable.run();
    bRunnable.run();
else {
    bRunnable.run();
    aRunnable.run();
} 
```

# java - 语句没有出现在终端窗口java中

> ID：13597566
> 
> 赞同：-1
> 
> 时间：2012-11-28T03:57:27.763
> 
> 标签：java

这是测试器类，终端窗口仅从该行显示

```
System.out.println ("Waiting position for patient3: " + daylog.findWaitingPosition (patient3)); 
```

我在下面的代码中提到了（向下滚动一下以查看我的文字）。它上面没有显示任何东西，有人知道为什么吗？

```
import java.text.DecimalFormat;

public class DayLogTest
{
public static void main (String[] args)
{
    DayLog today = new DayLog (11,12,1992);

    doTest(today);
}

private static void doTest (DayLog daylog)
{
    Patient patient1 = new Patient(1111, "aaaa", "aaaa", 11,11,1991);
    Patient patient2 = new Patient(2222, "bbbb", "bbbb", 9,12,1992);
    Patient patient3 = new Patient(3333, "cccc", "cccc", 8,7,1941);
    Patient patient4 = new Patient(4444, "dddd", "dddd", 4,5,1851);
    Patient patient5 = new Patient(5555, "eeee", "eeee", 1,1,1231);

    System.out.println ("Test 1");
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Phase 1: Adding Patients (patient1, patient2, patient3) ");
    daylog.addPatient (patient1, 12,30);
    daylog.addPatient (patient2, 12,40);
    daylog.addPatient (patient3, 8,40);
    System.out.println ("Number of Patients Arrived: " + daylog.getArrived());
    System.out.println ("Number of Patients Waiting: " + daylog.getNumberWaiting());
    System.out.println ("Waiting position for patient1: " + daylog.findWaitingPosition (patient1));
    System.out.println ("Waiting position for patient2: " + daylog.findWaitingPosition (patient2));
    System.out.println ("Waiting position for patient3: " + daylog.findWaitingPosition (patient3));
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Treating patient1");
    daylog.treatPatient (patient1, 15, 30);
    System.out.println ("Number of Patients Waiting: " + daylog.getNumberWaiting());
    System.out.println ("Waiting position for patient2: " + daylog.findWaitingPosition (patient2));

DOES NOT PRINT ANYTHING ABOVE HERE IN TERMINAL WINDOW
DOES NOT PRINT ANYTHING ABOVE HERE IN TERMINAL WINDOW
DOES NOT PRINT ANYTHING ABOVE HERE IN TERMINAL WINDOW

    System.out.println ("Waiting position for patient3: " + daylog.findWaitingPosition (patient3));
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Phase 2: Adding patient4 and patient 5");
    daylog.addPatient (patient4, 5,25);
    daylog.addPatient (patient5, 16,24);
    System.out.println ("Number of Patients Arrived: " + daylog.getArrived());
    System.out.println ("Number of Patients Waiting: " + daylog.getNumberWaiting());
    System.out.println ("Waiting position for patient2: " + daylog.findWaitingPosition (patient2));
    System.out.println ("Waiting position for patient3: " + daylog.findWaitingPosition (patient3));
    System.out.println ("Waiting position for patient4: " + daylog.findWaitingPosition (patient4));
    System.out.println ("Waiting position for patient5: " + daylog.findWaitingPosition (patient5));
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Treating patient 3 and 5");
    daylog.treatPatient (patient3, 11,40);
    daylog.treatPatient (patient5, 19,24);
    System.out.println ("Number of Patients Arrived: " + daylog.getArrived());
    System.out.println ("Number of Patients Waiting: " + daylog.getNumberWaiting());
    System.out.println ("Waiting position for patient2: " + daylog.findWaitingPosition (patient2));
    System.out.println ("Waiting position for patient4: " + daylog.findWaitingPosition (patient4));
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Phase 3: printReport method");
    daylog.printReport();
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Phase 4: printWaitingList Method");
    daylog.printWaitingList();
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Phase 5: getAverageWaitingTime Method");
    System.out.println ("I have designed the test to be 3 hours average so far, which is 180 minutes");
    DecimalFormat fmt = new DecimalFormat ("");
    System.out.println ("Average waiting time: " + fmt.format(daylog.getAverageWaitingTime()) + " minutes");
    System.out.println ("------------------------------------------------------------");
    System.out.println ("Phase 6: Adding patient2");
    daylog.treatPatient (patient2, 20, 40);
    System.out.println ("Number of Patients Arrived: " + daylog.getArrived());
    System.out.println ("Number of Patients Waiting: " + daylog.getNumberWaiting());
    System.out.println ("Waiting position for patient2: " + daylog.findWaitingPosition (patient1));
    System.out.println ("Waiting position for patient2: " + daylog.findWaitingPosition (patient2));
    System.out.println ("Waiting position for patient3: " + daylog.findWaitingPosition (patient3));
    System.out.println ("Waiting position for patient4: " + daylog.findWaitingPosition (patient4));
    System.out.println ("Waiting position for patient5: " + daylog.findWaitingPosition (patient5));

  }
} 
```

如果需要，供参考，DayLog 类和患者类

```
public class DayLog
{
private Date logDate;

private int noOfArrivals = 0;

//Number of waiting patients, different from number of arrived.
private int noOfWaiting = 0;
//Number of patients being treated
private int noOfTreated = 0;

//Sets the size of the waitinglist and treatmentlist arrays
private int waitingListCapacity = 100;
private int treatmentListCapacity = 100;

//Waitlist position for the method findWaitingPosition which is one more than the index.
private int waitlistPosition;

private Patient[] waitingList;
private Patient[] treatmentList;

public DayLog (int day, int month, int year)
{
    logDate = new Date (day, month, year);

    waitingList = new Patient[waitingListCapacity];
    treatmentList = new Patient[treatmentListCapacity];
}

public void addPatient (Patient patient, int hours, int minutes)
{
    patient.setArrivalTime (hours, minutes);

    noOfArrivals++;

    for (int i = 0; i <= waitingList.length-1; i++)
    {
        if ( waitingList[i] == null )
        {
            waitingList[i] = patient;
            noOfWaiting++;
            return;
        }
    }

}

public int getArrived ()
{
    return noOfArrivals;
}

public int getNumberWaiting ()
{
    return noOfWaiting;
}

public int findWaitingPosition (Patient patient)
{
    for ( int i=0; i <= waitingList.length-1; i++)
    {
        if ( waitingList[i] == patient )
        {
            waitlistPosition = i+1;
            return waitlistPosition;
        }
    }

    return -1;
}

public void treatPatient (Patient patient, int hours, int minutes)
{
    for (int i = 0; i <= waitingList.length-1; i++)
    {
        if (waitingList[i] == patient)
        {
            patient.setTreatmentStart (hours, minutes);
            treatmentList[noOfTreated] = patient;
            noOfTreated++;

            for (int j=i; j < noOfWaiting-1; j++ )
            {
                waitingList[j] = waitingList[j+1];
            }

            waitingList[noOfWaiting-1] = null;
            noOfWaiting--;
        }
    }

}

public void printReport ()
{
     System.out.println ("Number of patients arrived: " + noOfArrivals); 
     System.out.println ("Number of patients waiting: " + noOfWaiting ); 
     System.out.println ("Number of being treated: " + noOfTreated);

}

public void printWaitingList ()
{
    for (int i = 0; i <= waitingList.length-1; i++)
    {
        if ( waitingList[i] == null )
        {
        }
        else
        {
            waitingList[i].getAsString();
        }
    }

}

public void printTreatmentList ()
{
    for (int i = 0; i <= treatmentList.length-1; i++)
    {
        if ( treatmentList[i] == null )
        {
        }
        else
        {
            treatmentList[i].getAsString();
        }
    }
}

public double getAverageWaitingTime ()
{
    int sum = 0;
    int count = 0;
    double averageWaitingTime;
    for (int i = 0; i <= treatmentList.length-1; i++)
    {
        if ( treatmentList[i] == null )
        {
        }
        else
        {
            sum += treatmentList[i].getWaitingTime();
            count++;
        }
    }

    averageWaitingTime = (sum / count);
    return averageWaitingTime;

}
          } 
```

病人等级

```
public class Patient
{
private int patientRefNo;
private String patientName;
private String patientGp;

private Date patientBirthday;

private Time patientArrivalTime;
private Time patientTreatmentTime;

public Patient (int refNo, String name, String gp, int day, int month, int year)
{
    patientRefNo = refNo;
    patientName  = name;
    patientGp    = gp;

    patientBirthday = new Date(day, month, year);

    patientArrivalTime = null;
    patientTreatmentTime = null;

}

protected void setArrivalTime (int hours, int minutes)
{
    patientArrivalTime = new Time (hours, minutes);
}

protected void setTreatmentStart (int hours, int minutes)
{
    patientTreatmentTime = new Time (hours, minutes);
}

public int getPatientNo ()
{
    return patientRefNo;
}

public String getGPName ()
{
    return patientGp;
}

public Date getDOB ()
{
    return patientBirthday;
}

public int getWaitingTime ()
{
    if ( patientArrivalTime == null || patientTreatmentTime == null )
    {

        return -1;
    }
    else
    {

        return patientTreatmentTime.getElapsedTime (patientArrivalTime);
    }
}

public String getAsString ()
{

   System.out.println ("Patient Name: " + patientName);
   System.out.println ("Patient Reference Number: " + patientRefNo);
   System.out.println ("Patient Family Doctor: " + patientGp);
   System.out.println ("Patient Birthday: " + patientBirthday.getAsString());

   if ( patientArrivalTime == null )
   {
       System.out.println ("Patient Arrival Time: this patient has not arrived yet");
   }
   else 
   {
        System.out.println ("Patient Arrival Time: " + patientArrivalTime.getAsString());
   }

   if ( patientTreatmentTime == null )
   {
       System.out.println ("Patient Treatment Time: this patient has not been treated yet");
   }
   else
   {
       System.out.println ("Patient Arrival Time: " + patientTreatmentTime.getAsString());
   }

   return "";
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:13:21.403

很难测试所有内容（因为据我所知，这里没有包含自定义`Date`和`Time`类），但是如果我冒险猜测，窗口*是否*有可能打印出所有这些语句，但是太多了，你看不到最上面的吗？

It'd be quite odd if only some of the `System.out.println`'s work; try commenting out a few of the last prints, and check if you can see any of the output from before `"Waiting position for patient3"`.

# c - 将字符串构建为链表

> ID：13597569
> 
> 赞同：2
> 
> 时间：2012-11-28T03:57:44.273
> 
> 标签：c, string, data-structures, linked-list, char

如果我试图扫描一个**未知长度**的字符串，一次扫描一个字符并构建一个字符链表来创建字符串是否是一种好方法？我目前面临的唯一问题是我不确定如何在不要求用户一次输入一个字符的情况下一次处理一个字符的字符串，这是不合理的。有更好的方法吗？我想避免为了容纳大多数字符串而分配任意大尺寸的 char 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:01:21.440

在我的建议中，拥有一个字符链接列表将是一个非常糟糕的主意，因为它会为单个字符串消耗太多内存。

相反，您分配一个标称大小的缓冲区（例如 128 个字节）并继续读取字符。一旦你感觉缓冲区快满了，分配另一个两倍于当前大小的缓冲区并将第一个缓冲区的内容复制到第二个缓冲区，释放第一个缓冲区。像这样，你可以继续直到你的字符串被完全读取。

此外，在我编写或看过的大多数程序中，都会保持字符串大小的上限，如果输入的字符串看起来超出大小，程序将返回错误。字符串大小的上限是根据应用程序上下文确定的。例如：如果您正在阅读的字符串是一个名称，它通常不能超过 32 个（或某个 x 值）字符，如果是这样，那么该名称将被截断以适应缓冲区。以这种方式，缓冲区可以自己第一次分配为上限大小。

这只是一个想法。可能有许多其他方法可以解决这个问题，而不是链表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:50:16.123

*暂时忽略node-per-char*链表的过度内存使用，并假设您实际构建了它并将字符串放入其中。你真的可以使用它吗？

例如：

*   非*连续*缓冲区意味着许多标准函数（例如`printf()`、`strlen()`、`fwrite()`）将根本不兼容或难以使用。
*   *对字符串的非序列访问*效率极低。

至于更好的方法：这真的取决于你要对字符串做什么。（例如，如果您可以处理传入的字符串，也许您甚至不需要将整个内容保存在内存中。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:12:45.877

将其存储在一个数组中。使用固定大小的数组初始化数组，并在读取输入时将它们存储在数组中。当数组已满并且新输入出现时，然后创建一个更大的双倍大小数组，并将旧数组复制到新数组中。现在继续在这个数组中添加新的字符。重复该过程，直到您读取所有数据。您可以通过以下方法优化将字符从旧数组复制到新数组的过程

```
1)Initialize a variable old_idx to 0
2) When a new char comes (after the old array is full) then create a new array of double size of older one and copy the new char at old_size+1 index. Also copy the data at index old_idx in old array at old_idx in newer array.
3)Increment old_idx 
```

最后只检查如果 old_idx < old_array_size 然后复制其余的旧数据。

整个过程的摊销成本非常低，这也是 java 中的 ArrayList 的工作原理。

Array 相对于链表的优势是显而易见的

```
1) Less memory footprint
2)Faster linear access (as in array all the memory allocations for data happen in contiguous manner) 
```

# html - HTML5 中的元名称分布

> ID：13597571
> 
> 赞同：3
> 
> 时间：2012-11-28T03:58:05.047
> 
> 标签：html, validation, markup, w3c

我正在将 HTML4 网站转换为 HTML5。

在[w3.org validator](http://validator.w3.org)上，我收到一个错误：

> *第 19 行，第 49 列：***元素元上属性名称的错误值分布：未注册关键字分布。**
> 
>    <meta name="分布" content="全球" />

全球分销有什么替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:06:05.470

`dcterms.audience`通常用于分发类的目的。查看[都柏林核心](http://dublincore.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:02:57.397

在 HTML5 中，您只能使用`name`那些

*   [在 HTML5 规范中定义](http://www.w3.org/TR/html5/the-meta-element.html#standard-metadata-names)或
*   [在 WHATWG wiki 中注册](http://wiki.whatwg.org/wiki/MetaExtensions)。

因此，您必须[注册](http://www.w3.org/TR/html5/the-meta-element.html#other-metadata-names)该`name`值才能将其添加到 wiki。

* * *

但是，也许您根本不需要这个`meta`元素？它有任何（内部）用途吗？如果没有，您可以完全省略它。

# c - 使用 c 中的结构进行复杂向量加法

> ID：13597579
> 
> 赞同：0
> 
> 时间：2012-11-28T03:59:18.180
> 
> 标签：c, arrays, multidimensional-array

我正在尝试使用 C 中的结构对项目进行复杂的向量加法和点积。但是，我编写了我的代码，虽然它正在编译没有问题，但一旦我运行我的程序，它就会停止工作。我还有该程序的其他部分，但这只是相关部分。我也在尝试用复数做矩阵加法和乘法。如果我能让这些工作，我想我可以修改其他人。任何帮助将不胜感激。谢谢，我很感激。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#define PI 3.14159265359

typedef struct complex
{
    double re;
    double im;
}complex;

typedef struct vect_complex
{
    double *re;
    double *im;
}vect_complex;

typedef struct mat_complex
{
    //int i=0,j=0;
    double re[100][100];
    double im[100][100];
}mat_complex;

void vector_add(vect_complex a[4], vect_complex b[4], vect_complex c[4])
{
    int i;
    for(i=0; i<3 ;i++);
    {
        c->re[i] = a->re[i] + b->re[i];
        c->im[i] = a->im[i] + b->im[i];
    }
    printf("Vector addition = (%f + %f*j)i + (%f +%f*j)j + (%f + %f*j)k\n\n",c-    >re[0],c->im[0],c->re[1],c->im[1],c->re[2],c->im[2]);
}

void addmx(mat_complex *a, mat_complex *b, mat_complex *c)
{
    int  i, j;
    for ( i = 0 ; i < '\0' ; i++ )
    {
        for ( j = 0 ; j < '\0' ; j++ )
        {
            c->re[i][j] = a->re[i][j] + b->re[i][j];
            c->im[i][j] = a->im[i][j] + b->im[i][j];
        }
    }
    printf("***Matrix Addition***\n");
    for ( i = 0 ; i < '\0' ; i++ )
    {
        for ( j = 0 ; j < '\0' ; j++ )
        {
            printf("(%f + %f*j)   ", c->re[i][j],c->im[i][j]);
        }
        printf("\n");
    }
}

int main()
{
vect_complex aaa;
vect_complex bbb;
*aaa.re = 5;
*aaa.im = 4;
*bbb.re = 3;
*bbb.im = 2;
vect_complex ccc;

vector_add(&aaa, &bbb, &ccc);
vector_dot_prod(&aaa, &bbb, &ccc);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:30:11.267

这里有很多问题需要处理。

## 1.vect_complex

也许您希望您`vect_complex`拥有固定数量的元素，在这种情况下应该定义它：

```
typedef struct vect_complex
{
    double re[3];
    double im[3];
} vect_complex; 
```

或者，您可以保留当前定义，但每次使用该结构时都需要分配新数组：

```
int main(void)
{
    vect_complex vc;

    vc.re = (double *) malloc(3 * sizeof(double));
    vc.im = (double *) malloc(3 * sizeof(double));

    vc.re[0] = 1.0;
    vc.im[0] = 2.0;
    ...
} 
```

## 2.vector_add

这个函数应该将引用`vect_complex`作为输入，而不是复杂向量的数组。这个实现假设了`vect_complex`我上面给出的定义。

```
void vector_add(vect_complex * a, vect_complex * b, vect_complex * result)
{
    int i;
    for (i = 0; i < 3; i++)
    {
        result->re[i] = a->re[i] + b->re[i];
        result->im[i] = a->im[i] + b->im[i];
    }
} 
```

## 3.addmx

我不确定`'\0'`s 在这里做什么。将其更改为

```
for (i = 0; i < 100; i++)
    for (j = 0; j < 100; j++)
    {
        ...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:01:38.047

首先，您的程序在 *aaa.re = 5; 行停止。

```
int main()
{
vect_complex aaa;
vect_complex bbb;
*aaa.re = 5;  //your program stops here.
....
} 
```

原因是您定义了结构 aaa，它为双指针 re 和 im 分配内存，而不是为双精度值。

截至目前，这些指针将指向未初始化的值。当你引用 *aaa.re ie) 当你取消引用它时，你会得到分段错误。

例如，aaa.re 指向我的框中的 0x17。当我取消引用它时，出现分段错误，因为它引用的内存地址超出了程序内存区域。

为了解决这个问题，你应该为 double 分配内存并将它的地址存储到指针 re 中。然后存储双精度值。

大脑完美地覆盖了其他细节。

谢谢， nvseenu

# java - 函数中的Java最终变量

> ID：13597584
> 
> 赞同：2
> 
> 时间：2012-11-28T04:00:36.827
> 
> 标签：java, jakarta-ee, final

```
void function_ab(){

if ( a == true){
    final Class_A obj = new Class_A("a"); //This is an example scenario, so I couldn't create a setter to pass in "a" instead of passing it into Contructor.
}else{
    final Class_A obj = new Class_A("B");
}

// the code below will access obj object in Inner class.

} 
```

我需要在声明之后访问 obj，但由于它们是在“if”块中声明的，所以之后我将无法访问它。我也不能这样做：

```
void function_ab(){

final Class_A obj = null;
if ( a == true){
    obj = new Class_A("a"); //final variable cannot be changed.
}else{
     obj = new Class_A("B");
}

// the code below will access obj object in Inner class.

} 
```

上面的代码无效。那么让它工作的唯一方法是将 obj 变量声明为类变量吗？我尽量避免这样声明，因为它只在那个函数中使用。

请告诉我是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T04:02:48.117

而不是使用：

```
final Class_A obj = null; 
```

你应该可以使用

```
final Class_A obj; 
```

这将允许您`obj`在 if 语句中进行初始化 - 有关更多信息，请查看来自 Wikipedia 的[空白决赛](http://en.wikipedia.org/wiki/Final_%28Java%29#Blank_final)的描述，这是我们所有人都信任的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:02:19.400

你可以做

```
final Class_A obj = a ? new Class_A("a") : new Class_A("B"); 
```

但是，我不知道是否有办法在更复杂的条件下做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T06:50:54.113

结合 tbd 和 Xymotech 的答案 + 我的另一个信息，您可以执行以下操作。

1）在您的代码中，您声明了这样的最终变量`final Class_A obj = null;`

一旦您将最终变量分配给某个值，您就不能再替换或重新分配它的值。有关这方面的更多信息，请参阅[此处](http://en.wikipedia.org/wiki/Final_%28Java%29)和[此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)

话虽如此，您不允许这样做

```
if ( a == true){
    final Class_A obj = new Class_A("a"); 
}else{
    final Class_A obj = new Class_A("B");
} 
```

2）如果您要使用其他值或简单的计算来确定让我们说一个布尔值，您可以这样做

```
final Class_A obj = a ? new Class_A("a") : new Class_A("B"); 
```

从你的代码来看，你可以做我给你的两个给定的选择。

但是从你的代码中你可以做到这一点。

```
void function_ab(){

final Class_A obj;
if ( a == true){
    obj = new Class_A("a"); //final variable cannot be changed.
}else{
     obj = new Class_A("B");
}

// the code below will access obj object in Inner class.

} 
```

只需删除的空分配 `final Class_A obj;`

# winapi - 如何以编程方式将参数/指令注入预构建的可移植可执行文件

> ID：13597595
> 
> 赞同：1
> 
> 时间：2012-11-28T04:02:04.410
> 
> 标签：winapi, assembly, masm, portable-executable

我有两个可执行文件，都是我手动创建的，我将它们分别称为 1.exe 和 2.exe。首先，这两个可执行文件均由 MSVS 2010 使用 Microsoft 编译器编译。我想在 1.exe 中输入一条消息，我希望 1.exe 将该消息注入 2.exe（可能作为某种参数），所以当我在 1.exe 注入消息后运行 2.exe 时， 2.exe 将显示该消息。

**注意**- 这不是非法使用，这两个可执行文件都是由我创建的。

对我来说最重要的是：

1.  在 2.exe 中放置消息/指令的位置，**以便 2.exe 可以轻松访问它们**
2.  2.exe 将如何实际**FIND**使用这些参数（消息）。

我完全理解我不能简单地使用 C++ 代码作为注入，它必须是可以由编译器在运行时生成/翻译的裸程序集（如果我错了，请纠正我）

我一直在考虑的一些解决方案：

1.  在 2.exe 中创建一个需要参数的标准函数（例如显示消息框），然后将这些参数（消息）简单地注入函数中？
2.  在 2.exe 中创建某种结构来保存 1.exe 将注入的值，如果是这样如何？我是否需要硬编码将这些参数放入的偏移量？

**注意**- 我不指望一个勺子，我想熟练地理解编程的这方面，我已经阅读了 PE 文件格式并对汇编（MASM 汇编器语法）有深刻的理解，并且渴望学习更多。感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:07:40.207

很少有程序员需要做这种事情。没有它，你的整个职业生涯都可以。我最后一次这样做是在 1983 年左右。

如果我没记错的话，我在 2.exe 中包含了一个类似这样的汇编模块（我忘记了语法）：

```
.GLOBAL TARGET
TARGET  DB 200h  ; Reserve 512 bytes 
```

1.exe 然后打开 2.exe，在符号表中搜索全局符号“TARGET”，找出它在文件中的位置，写入它想要的 512 字节，然后保存文件。这是针对许可计划的。

* * *

[https://stackoverflow.com/users/422797/igor-skochinsky](https://stackoverflow.com/users/422797/igor-skochinsky)的评论提醒我当时没有使用符号表。那是一个不同的操作系统。在这种情况下，我确实扫描了一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:20:04.683

从您的描述看来，您只需要在命令行上传递一个值。

Win32`GetCommandLine()`函数将为您提供您可以传递给的传递值`MessageBox()`。

如果它需要是另一个正在运行的实例，那么另一种形式的 IPC，如 windows 消息 ( `WM_COPYDATA`) 将起作用。

# java - Android 是否像 iPhone 一样在顶部栏有一个互联网状态转圈？

> ID：13597598
> 
> 赞同：0
> 
> 时间：2012-11-28T04:02:27.563
> 
> 标签：java, android, iphone, ios, cocoa-touch

iPhone 有这个旋转图标，当互联网在后台运行时，您可以使该图标出现。打开/关闭它是一个非常简单的调用。

Android有这样的东西吗？我怎么称呼它，它是如何工作的？

![在此处输入图像描述](../Images/938e9cd74eb0d9db12ad830a477c5fe7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:00:20.363

您应该在 ActionBar 中显示它。

最简单的方法

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
setProgressBarIndeterminateVisibility(true); 
```

或者使用 ActionBarSherlock 实现向后兼容性

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
setSupportProgressBarIndeterminateVisibility(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:12:08.813

不，我还没有在安卓上看到它。但是，对于 ICS 及以上版本，我们会看到 WiFi 或 3G 附带的 2 个箭头，以指示网络上是否有活动。但是，可能无法以编程方式控制它。

否则，您可以在活动中使用不确定的进度条来显示后台工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:16:44.890

您可以尝试使用 Android 通知并使用 AnimationDrawable。检查[这个答案](https://stackoverflow.com/a/8764950/265375)。（请注意，我还没有尝试过）。

# java - building on linux issue

> ID：13597599
> 
> 赞同：0
> 
> 时间：2012-11-28T04:02:38.340
> 
> 标签：java, android, eclipse

I am trying to build SystemUI using Ubuntu, but when I try to download the repo, o just get source files like manifests, not any actual part. So I have the git source of just SystemUI, but I do not know how to build it. I am having troubles installing the parts needed to build (using online tutorials for how to build). If anyone has advice for how to build just that one app in windows preferably, but Linux is fine, it'd be great!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:38:41.943

你必须下载整个东西，因为有这样一个依赖网络，你不可能`SystemUI`自己构建。

安装并构建所有内容后，如果您只是在目录下编辑文件，则在该`SystemUI`目录中运行`make`（或`mm`如果您运行则使用`. build/envsetup.sh`）将只构建该项目，但是您再次遇到将单个可执行文件插入到系统图...

# data-structures - Lazy deletion on hash tables

> ID：13597600
> 
> 赞同：3
> 
> 时间：2012-11-28T04:02:42.583
> 
> 标签：data-structures, hashtable

In my implementation I use lazy deletion with linear or quadratic probing for collision resolution. For insertions, when I encounter a lazily deleted item, I replace it with the item to be inserted. What are the disadvantages or incorrectness of doing it this way(for either linear or quadratic or double hash collision resolution)? Doesn't it save space?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:50:26.857

开放寻址哈希表的问题在于它们的性能会随着时间的推移而下降，尤其是当条目非常动态时。

例如，让我们考虑一个简单的线性探测列表。如果您在哈希槽 1 上发生 3 次冲突，则将使用槽 1、2、3。如果 2 被删除，您需要将其标记为“以前使用过”才能在插槽 3 中找到该项目。在某些使用模式下，这会将您的哈希表降级到线性搜索时间越来越长的地步，需要代价高昂的重新调整以使其再次生效。

在插入/删除大量项目时，已关闭地址的哈希表的性能会随着时间的推移更加稳定。但是它们对缓存不友好，因为您必须摆弄指针。

因此，如果您有几乎恒定的键，请使用开放寻址，否则考虑使用封闭寻址哈希表。

对于某些问题，您可能还想研究其他概念，例如布谷鸟哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T12:09:20.450

无需从线性探测的开放寻址哈希表中进行延迟删除。硬删除可以简单地在恒定时间内完成，而无需表降级。多年来，维基百科哈希表页面上都有它的伪代码。我不知道为什么不再存在，但这里有一个永久链接回到它的时候：[Old Wikipedia Hash Table page](https://en.wikipedia.org/w/index.php?title=Hash_table&oldid=95275577)，为了您的方便，这里是伪代码：

```
function remove(key)
 i := find_slot(key)
 if slot[i] is unoccupied
     return   // key is not in the table
 j := i
 loop
     j := (j+1) modulo num_slots
     if slot[j] is unoccupied
         exit loop
     k := hash(slot[j].key) modulo num_slots
     if (j > i and (k <= i or k > j)) or
        (j < i and (k <= i and k > j)) (note 2)
         slot[i] := slot[j]
         i := j
 mark slot[i] as unoccupied 
```

该页面上还有一些[真实代码](http://ici.cvs.sourceforge.net/ici/ici/set.c?view=markup)的参考。我相信这与插入具有完全相同的性能特征，并将表恢复到与从未添加条目一样好的状态。

这种删除方法比常用的“标记已删除并偶尔重新散列所有内容”要好，因为上述方法是恒定时间而不是摊销的恒定时间。如果您有一个包含一百万个要添加和删除的项目的哈希表，在“标记已删除”方法中，偶尔的添加或删除将比之前和之后的时间长一百万倍 - 这不是良好的性能特性。

# c++ - how does compiler do with array declaration

> ID：13597607
> 
> 赞同：0
> 
> 时间：2012-11-28T04:03:21.513
> 
> 标签：c++, arrays, pointers

```
char c='c';
char *pc = &c;
char a[]="123456789";
char *p = &(a[1]); 
cout <<"the size of the a: "<< sizeof (a)<< endl; //10
cout <<"the size of the p: "<< sizeof (p)<< endl; //4
cout << p[100] <<endl;//cross boundary intentionally
cout << pc[0];//c
cout << pc[1]; 
```

Compiler no longer treat the **p** as an array? how does compiler verify whether it is or not an Array? Is there any difference between **p** and **pc** ?

Thanks!!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:06:14.383

> Compiler no longer treat the p as an array?

It never treated it as an array, because it was not. It was always a pointer. **Arrays are not pointers.** Read this, accept it, embrace it! They sometimes *decay* into pointers (when passed as parameters), but they are not pointers.

> Is there any difference between p and pc ?

Type-wise - no. There's a difference in that they point to different `char`s.

Also, `pc[1]` is undefined behavior. You only own the memory `pc` points to directly - i.e. a single byte that contains the character `'c'`. Same goes for `p[100]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:10:48.807

The compiler treats as arrays only variables declared as arrays, i.e. with square brackets. Pointers are not arrays, though, although you can treat array names as if they were pointers for the purposes of constructing pointer expressions.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:59:31.390

如果您想使用编译器检查数组边界的数组结构，您可以使用`std::vector`. 例如

```
#include <vector>

int main()
{
    int array[]={0,1,2,3,4,5};
    std::vector<int> vec;
    vec.assign(array, array+6);

    for(unsigned int i=0; i<vec.size(); ++i)
    {
         std::cout << vec.at(i);
    }

    return 0; 
} 
```

在这里，vec.at(i) 检查向量的边界。如果使用 vec[i]，这也是有效的，但编译器不检查边界。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T04:07:24.773

The compiler cannot and will not treat p as an array. p is just a pointer to a char to which any address can be assigned. Why would the compiler treat it as an array?

# google-drive-api - how to know the number of words written in a google drive file in a particular day?

> ID：13597609
> 
> 赞同：1
> 
> 时间：2012-11-28T04:03:29.330
> 
> 标签：google-drive-api

I'm planning to write a CLI program that can count the number of words written in a particular day for a particular file in Google Drive. I wonder **how should look the algorithm able to do that?**

Since Google Drive uses revisions, I don't know how to re-build a file from a range of revisions occurred in a particular day. Assume this scenario

```
file1 is written -> day 0
modifications are made (mam for short) -> rev1, day1'
mam -> rev2, day2'
mam -> rev3, day2''
mam -> rev4, day3'
mam -> rev5, day3''
mam -> rev6, day3''' 
```

I dream with a CLI utility that I could say it, *google-drive-wc file1 day2* and it returns the number of words [by default] written in *day2*, where *day2* has a particular format e.g. mm-dd-yy.

Thanks so much for your advice,

# objective-c - 正在跳过详细视图控制器中的第一种方法

> ID：13597612
> 
> 赞同：1
> 
> 时间：2012-11-28T04:03:42.557
> 
> 标签：objective-c, ios, core-data, uiviewcontroller

RoomItem 中是否需要一些重要的东西来确保不跳过此方法？这是我的详细视图控制器中的第一个，当我处于调试模式时它会不断被跳过。我确定我错过了一些简单得可笑的东西，但我已经盯着它看了好几个小时，就是不知道它是什么。

```
@interface DetailViewController ()
- (void)configureView;
@end
@implementation DetailViewController
- (void)setDetailItem:(RoomItem *)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}
- (void)configureView
{
// Update the user interface for the detail item.
if (self.detailItem) {
    [_roomTxt setText:[_detailItem room]];
    [_buildingTxt setText:[_detailItem building]];
    [_dateTxt setText:[self dateCreatedString]];
    [_buildingImageView setImage:[_detailItem buildingImage]];
    _oi = [_detailItem objectIndex];
}
} 
```

**分配和初始化新的和现有的 detailViewControllers 的 MasterViewController（根表视图）方法**

```
- (void)insertNewObject:(id)sender
{
//add button invokes this
DetailViewController *ivc = [[DetailViewController alloc] init];
[self.navigationController pushViewController:ivc animated:YES];
NSLog(@"detailViewController allocated and initialized: %@", ivc);
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (!self.detailViewController) {
    self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    NSLog(@"detailViewController initialized: %@", self.detailViewController);
}
//navigates to detailViewController and passes it the item's data
self.detailViewController.detailItem = [[[RoomList sharedStore] getAllItems] objectAtIndex:[indexPath row]];
[self.navigationController pushViewController:self.detailViewController animated:YES];
} 
```

**这是 tableView:didSelectRowAtIndexPath 方法，它应该从 RoomList:sharedStore 传递详细视图控制器所需的所有内容：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (!self.detailViewController) {
    self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
}
//navigates to detailViewController and passes it the item's data
self.detailViewController.detailItem = [[[RoomList sharedStore] getAllItems] objectAtIndex:[indexPath row]];
[self.navigationController pushViewController:self.detailViewController animated:YES];
} 
```

**...和 ​​RoomItem.m 文件：**

```
- (void)awakeFromFetch
{
[super awakeFromFetch];

UIImage *pic = [UIImage imageWithData:[self buildingThumbnailData]];
[self setPrimitiveValue:pic forKey:@"buildingThumbnail"];
}
- (id)initWithRoom:(NSString *)room Building:(NSString *)building 
{
self = [super init];
if (self) {
    [self setRoom:room];
    [self setBuilding:building];
}
return self;
} 
```

**DetailViewController.h**

```
#import <UIKit/UIKit.h>
@class RoomItem;
//pic edit: added delegates
@interface DetailViewController : UIViewController <UINavigationControllerDelegate,
UIImagePickerControllerDelegate, UITextFieldDelegate, UIPopoverControllerDelegate,
UIPageViewControllerDelegate>
{
__weak IBOutlet UITextField *roomField;
__weak IBOutlet UITextField *buildingField;
__weak IBOutlet UILabel *dateLabel;

UIPopoverController *imagePickerPopover;
}
@property (nonatomic, strong) RoomItem *detailItem;
@property (weak, nonatomic) IBOutlet UIButton *updateBtn;
@property (weak, nonatomic) IBOutlet UIButton *detailsBtn;
@property (weak, nonatomic) IBOutlet UITextField *roomTxt;
@property (weak, nonatomic) IBOutlet UITextField *buildingTxt;
@property (weak, nonatomic) IBOutlet UILabel *dateTxt;
@property (weak, nonatomic) IBOutlet UIImageView *buildingImageView;
@property (weak, nonatomic) UIImage *buildingImage;
@property (weak, nonatomic) NSNumber *oi;
- (IBAction)backgroundTapped:(id)sender;
- (IBAction)takePicture:(id)sender;
- (IBAction)updateRoomItem:(id)sender;
- (IBAction)goToReportDetails:(id)sender;
@end 
```

**编辑：这是一个伪 UML 图，说明了当我使用调试器单步执行时所看到的内容（它从左到右，从上到下读取）：** ![在此处输入图像描述](../Images/88eeed95148cb1ac65bf62eb210247e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:58:30.677

没有调用setter是很奇怪的。我会排队

```
self.detailViewController.detailItem = [[[RoomList sharedStore] getAllItems] objectAtIndex:[indexPath row]]; 
```

并用这段代码替换它，这可能更容易理解：

```
RoomItem *tempItem = [[[RoomList sharedStore] getAllItems] objectAtIndex:[indexPath row]];
DetailViewController *tempDVC = self.detailViewController; // could just use _detailViewController
tempDVC.detailItem = tempItem;  // breakpoint on this line 
```

然后当断点命中时，我会单步执行已编译的汇编程序以找出它的去向。在 Xcode Debugger 上有相关说明[- 如何在 CPU 指令级别单步执行](https://stackoverflow.com/questions/2009009/xcode-debugger-how-to-single-step-at-level-of-cpu-instructions)- 特别是几周前 Max MacLeod 的答案。

我会把它写成另一个评论，因为它不是一个真正的答案，但它太长了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:42:29.223

好吧，首先是第一件事。跳过 -(void)setDetailItem:(RoomItem *)newDetailItem 的原因是我没有将 DVC 中新创建的 RoomItem 传递给它。我最初是这样做的，但是在尝试在其他地方纠正问题时错误地摆脱了它。

**在 DetailViewController.m 中：**

```
- (void)insertNewObject:(id)sender
{
RoomItem *newItem = [[RoomList sharedStore] createItem];

DetailViewController *ivc = [[DetailViewController alloc] init];

[ivc setDetailItem:newItem];

[self.navigationController pushViewController:ivc animated:YES];
NSLog(@"detailViewController allocated and initialized: %@", ivc);
} 
```

尽管在 RoomList.m 文件中进行了一些重组，但要使其正常工作。我最初试图将创建和更新功能结合到一种方法中。如果我在 MVC 中创建并在 DVC 中更新，那不会飞。

**所以我把两者分开：**

```
- (RoomItem *)createItem
{
double order;

//create new roomItem
//tracks what number item it's creating
if ([allItems count] == 0) {
    order = 1.0;
}
else
{
    order = [[[allItems lastObject] objectIndex] doubleValue] + 1;
}
NSLog(@"Adding after %d items, order = %.2f", [allItems count], order);

RoomItem *p = [NSEntityDescription insertNewObjectForEntityForName:@"RoomItem"
                                                inManagedObjectContext:context];

[p setObjectIndex:[NSNumber numberWithDouble:order]];
[p setDateCreated:[NSDate date]];
[allItems addObject:p];

[self saveChanges];

return p;
}
- (RoomItem *)updateItemWithRoom:(NSString *)room Building:(NSString *)building ObjectIndex:(NSNumber *)objectIndex DateCreated:(NSDate *)dateCreated ImageKey:(NSString *)imageKey BuildingImage:(UIImage *)buildingImage BuildingThumbnail:(UIImage *)buildingThumbnail BuildingThumbnailData:(NSData *)buildingThumbnailData
{
NSError *error = nil;

NSEntityDescription *entity = [NSEntityDescription entityForName:@"RoomItem" inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entity];

int32_t oid = [objectIndex integerValue] - 1;
NSLog(@"objectIndex = %d", oid);

RoomItem *currentRoomItem = [[context executeFetchRequest:request error:&error] objectAtIndex:oid];

//[currentRoomItem setItemEdited:YES];
[currentRoomItem setRoom:room];
[currentRoomItem setBuilding:building];
[currentRoomItem setImageKey:imageKey];
[currentRoomItem setBuildingImage:buildingImage];
[currentRoomItem setBuildingThumbnail:buildingThumbnail];
[currentRoomItem setBuildingThumbnailData:buildingThumbnailData];

[self saveChanges];

return currentRoomItem;
} 
```

最后，setDetailItem 和 configureView 方法：

```
- (void)setDetailItem:(RoomItem *)detailItem
{
if (_detailItem != detailItem) {
    _detailItem = detailItem;
    [self configureView];
}
}
- (void)configureView
{
if (self.detailItem) {
    [_roomTxt setText:[_detailItem room]];
    [_buildingTxt setText:[_detailItem building]];
    [_dateTxt setText:[self dateCreatedString]];
    [_buildingImageView setImage:[_detailItem buildingImage]];
}
} 
```

这应该作为一个关于花时间阅读核心数据文档或任何其他文档的教训......尤其是像我这样的菜鸟。

再次感谢 emrys57 的帮助。

# xcode - "svn: Path ' ' is not a directory" when trying to localize

> ID：13597615
> 
> 赞同：0
> 
> 时间：2012-11-28T04:03:54.573
> 
> 标签：xcode, svn, localization

I am working with Xcode 4.5.2.

My project is under svn version. Previously I localizes my application for Japanese through Xcode interface (click on xib, png ..., then in inspector view click on "make localized"). This automatically moved the file in jp.lproj folder and the svn was totally fine with this.

Then I manually add en.lproj folders next to each jp.lproj and moved the english version of each file in it. From the project setting Info panel, I clicked on localize, and chose English. A dialog box ask me which japanese version file I want to localize, but after clicking on "finish", xCode keep showing the message : "svn:Path '/User/.......MyXcodeProject/.../en.proj/...png is not a directory". I don't have this message if I don't manually create the folder and copy the file in it. Instead XCode automatically create the folder en.lproj, copy the japanese version in it and do the necessary svn modification.

Is there a mean to avoid this message and force xCode to use the already existing english version ? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:14:48.697

你在不知不觉中复制了

> .svn

复制时的文件。您应该删除此文件并“添加”并签入它应该可以工作

# python - 使用 Python 3.2 VS2010 编译 Numpy

> ID：13597629
> 
> 赞同：1
> 
> 时间：2012-11-28T04:04:28.860
> 
> 标签：python, visual-studio-2010, numpy

我已经能够使用 VS2010 编译 Python 3.2，但是编译 numpy 1.6.2rc1 甚至 numpy1.7 都没有运气

例如，我可以使用 VS2008 编译 Python3.2 和 Numpy（32 位和 64 位）

如果 numpy VS2010 是可能的，或者甚至是更合适的论坛来搜索，有没有人有任何线索？

谢谢。抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:50:59.263

您可以通过 MinGW 和 MinGW64 编译 numpy，它们使用与 VC++ 相同的运行时。

我在[SF.NET上传了一个 64 位的 numpy 1.6.2](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/ray_linn/64bit-libraries/numpy/)

# shell - Check if argument is not Integer

> ID：13597637
> 
> 赞同：1
> 
> 时间：2012-11-28T04:05:46.960
> 
> 标签：shell, integer, arguments

This checks if argument is an integer in Bourne Shell Script:

```
if [[ $3 =~ ^[0-9]+$ ]] && ((  $3 >= 1 )) 
```

How do I check if argument is not an integer (can consist of integers and alphabets)? So, I guess it's just the complement of above, but I'm not sure how to change it. Where can I find info on what these symbol mean?: =~ ^ + $ &

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:19:16.440

您可以使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)来否定 if 条件检查，如下所示：

```
if [[ ! $3 =~ ^[0-9]+$ ]] || ((  $3 < 1 )) 
```

*   里面的`!`符号`[[...]]`表示否定。
*   `$3 < 1`是否定的`$3 >= 1`

该`=~`运算符允许在 if 语句中使用正则表达式。

这里`&&`使用的意思是“逻辑与”

其余符号`^ + $`用于[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，这是一个值得阅读的主题，比我在这个答案中所能提供的要多，但简而言之：

*   `^`: 匹配行首
*   `+`: 匹配一个或多个（在这种情况下它匹配一个或多个数字）
*   `$`: 匹配行尾
*   一起，`^[0-9]+$`意味着：只匹配一个只有数字的字符串。

# algorithm - 遗传算法收敛的合理比特串大小

> ID：13597639
> 
> 赞同：0
> 
> 时间：2012-11-28T04:05:56.540
> 
> 标签：algorithm, machine-learning, genetic-algorithm

在典型的遗传算法中，是否有任何指导方针来估计在给定人口中个体描述中的熵量的情况下收敛所需的世代？

此外，我认为还要求每代的后代数量和突变率是合理的，但目前我对这些参数的调整不太感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:18:40.323

嗯，没有任何具体的数学模型形式的指导方针，但是人们使用几个概念来交流参数设置和如何选择它们的建议。其中一个概念是多样性，它类似于你提到的熵。另一个概念称为选择压力，它根据个体的相对适应度确定必须选择个体的机会。

可以计算每一代的多样性和选择压力，但代际之间的变化很难估计。您还需要能够预测交叉和变异算子的预期质量的模型，以便估计下一代的适应度分布。

最近发表了关于这些主题的工作： * Chicano 和 Alba。2011\. 使用景观理论精确计算位翻转突变的期望曲线 * Chicano、Whitley 和 Alba。2012\. 均匀交叉期望曲线的精确计算

您的问题是出于一般研究兴趣还是寻求实际指导？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:31:09.347

不。如果你定义了算法的数学模型（初始种群、组合函数、变异函数）你可以使用正常的数学方法来计算你想知道的，但是“典型的遗传算法”太模糊了，没有任何有意义的答案。

如果您想设置某些遗传算法的超参数（例如“DNA”位的数量），这通常以任何机器学习算法的常用方式完成，并带有交叉验证集。

# php - 错误：第一个参数应该是一个数组

> ID：13597642
> 
> 赞同：0
> 
> 时间：2012-11-28T04:06:09.440
> 
> 标签：php

我有这段代码，在它之前没有任何代码引用下面看到的任何变量。但是我仍然找不到为什么会收到错误消息：“第一个参数应该是...中的数组”

```
$array = array("element here for reason");

function sortdata()
{
    $File = fopen("Names.txt", "r");

    //put each file line into an array element
    while(!feof($File))
    {
        array_push($array, fgets($File));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:09:58.120

`$array`超出了该功能的范围。您可以使用`global`.

```
$array = ..;
function sortdata() {
    global $array;
    ...
}
sortdata(); 
```

或者，您可以通过引用将其传递给函数。

```
$array = ..;
function sortdata(&$array) {
    ...
}
sortdata($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:10:37.760

您应该尝试首先初始化数组并将数组置于函数范围内，如下所示：

```
$array = array();
array_push($array, "element here for reason");

function sortdata()
{
    global $array;

    $File = fopen("Names.txt", "r");

    //put each file line into an array element
    while(!feof($File))
    {
        array_push($array, fgets($File));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:11:48.620

代码的问题是您没有将 $array 变量传递给函数。除此之外，使用快捷方式将项目添加到数组而不是调用 array_push 会更有效，因为它消除了调用函数的开销。

```
$array = array("element here for reason");

function sortdata($array)
{
    $File = fopen("Names.txt", "r");

    //put each file line into an array element
    while(!feof($File))
    {
        $array[] = fgets($File);
    }

    return $array;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T04:16:50.107

您在函数体内使用变量 $array 。在这种情况下，这是局部变量，它会自动设置为字符串。

要使用全局变量 $array，您应该在函数中使用**全局指令。**

```
function sortdata() {
global $array;
/* there your code for work with $array */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T05:24:52.490

```
This give you backward compatibility

function sortdata(array $array = array())
{
    $File = fopen("Names.txt", "r");

    while(!feof($File))
    {
      array_push($array, fgets($File));
    }

    return $array;
} 
```

# jquery - webkit中console.log jquery对象时如何查看DOM元素

> ID：13597646
> 
> 赞同：10
> 
> 时间：2012-11-28T04:06:44.370
> 
> 标签：jquery, google-chrome, webkit

曾经能够在 jQuery 对象上执行 console.log，Chrome 会像 Elements Tab 一样输出相应的 DOM 元素。

现在它这样做了：

```
console.log($('body'));
[<body>, context: #document, selector: "body"] 
```

如果你省略了 console.log，直接在控制台中输入，你可以得到旧的行为：

```
$('body')
[<body>​…​&lt;/body>​] 
```

这就是我要的！如何取回它，以便我以编程方式记录 jQuery 对象并让它们返回实时 DOM 对象，例如元素 Tab？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T04:10:03.377

这应该为你做：

```
console.log($('body')[0]); 
```

jQuery 将元素包装在数组中的原因，因此您需要通过数组索引访问实际元素。

或者单击左侧的小三角形以展开输出，以便您可以与打印出来的元素进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T07:17:24.747

对于 Drupal 对象或其他不使用 $ 的框架，请使用以下内容：

```
console.log(jQuery('body')[0]); 
```

或（使用旧语法）：

```
jQuery('body'); 
```

# c++ - ICP、内部指标的保证

> ID：13597648
> 
> 赞同：10
> 
> 时间：2012-11-28T04:06:54.543
> 
> 标签：c++, algorithm, machine-learning, nearest-neighbor

因此，我编写了一个[迭代最近点](http://en.wikipedia.org/wiki/Iterative_closest_point)(ICP) 算法，并将模型拟合到点云。作为对那些不了解的人的快速教程，ICP 是一种简单的算法，它将点拟合到模型，最终在模型和点之间提供齐次变换矩阵。

这是一个快速图片教程。

步骤 1\. 在模型集中找到离您的数据集最近的点：

第 2 步：使用一堆有趣的数学（有时基于梯度下降或 SVD）将云拉得更近并重复，直到形成姿势：

![图2][2]

现在这一点很简单并且有效，我想要帮助的是： **我如何判断我的姿势是否是好的？**

所以目前我有两个想法，但它们有点老套：

1.  ICP算法中有多少点。即，如果我几乎不适合任何点，我认为姿势会很糟糕：

    但是如果姿势真的很好呢？它可能是，即使只有几分。我不想拒绝好的姿势：

![图 5](../Images/1e9e35349fd869b46ca9b3bd7aae563f.png)

所以我们在这里看到的是，如果低点在正确的位置，实际上可以形成一个非常好的位置。

因此，研究的另一个指标是提供的点与使用的点的比率。这是一个例子

![图 6](../Images/1fe40542705546b622ed94f37dc41b5e.png)

现在我们排除了太远的点，因为它们将是异常值，现在这意味着我们需要一个良好的起始位置才能使 ICP 工作，但我可以接受。现在在上面的例子中，保证会说不，这是一个不好的姿势，它会是正确的，因为点与包含的点的比率是：

```
2/11 < SOME_THRESHOLD 
```

所以这很好，但是在上面显示的三角形倒置的情况下它会失败。它会说倒三角形很好，因为所有点都被 ICP 使用。

您**不需要**成为 ICP 专家来回答这个问题，我正在寻找好的想法。使用点的知识我们如何分类它是否是一个好的姿势解决方案？

将这两种解决方案一起使用是一个很好的建议，但如果你问我，它是一个非常蹩脚的解决方案，只是门槛它非常愚蠢。

如何做到这一点有什么好主意？

PS。如果你想添加一些代码，请去吧。我在 C++ 中工作。

聚苯乙烯。有人帮我标记这个问题，我不确定它应该落在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T06:56:28.877

一种可能的方法可能是通过它们的形状和方向来比较姿势。

形状比较可以用[Hausdorff 距离进行，直到等距](http://en.wikipedia.org/wiki/Hausdorff_distance#Related_concepts)，也就是说，如果姿势是相同的形状，如果

```
d(I(actual_pose), calculated_pose) < d_threshold 
```

`d_threshold`应该从实验中找到哪里。由于 XI 的等距修改会考虑不同角度的旋转 - 在这种情况下似乎就足够了。

如果姿势具有相同的形状，我们应该比较它们的方向。为了比较方向，我们可以使用稍微简化[的 Freksa 模型](http://act-r.psy.cmu.edu/people/douglass/Douglass/Douglass/Agents/PDF/Freksa1992.pdf)。对于每个姿势，我们应该计算值

```
{x_y min, x_y max, x_z min, x_z max, y_z min, y_z max} 
```

然后确保姿势对应值之间的每个差异都不会中断`another_threshold`，这也是从实验中得出的。

希望这是有道理的，或者至少您可以从中得出对您的目的有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T05:50:00.617

ICP 试图最小化你的点云和模型之间的距离，是吗？根据执行后的实际距离来评估它不是最有意义的吗？

我假设它试图最小化您尝试拟合的每个点与最近的模型点之间的平方距离之和。所以如果你想要一个质量指标，为什么不把这个和归一化，除以它适合的点数。是的，异常值会在某种程度上破坏它，但它们也会在某种程度上破坏你的适合度。

似乎您可以提出的任何计算都比 ICP 最小化的任何计算提供更多的洞察力，并将其合并到算法本身中更有用，因此它也可以最小化它。=)

**更新**

我想我不太了解算法。似乎它迭代地选择了一个点子集，将它们转换为最小化错误，然后重复这两个步骤？在这种情况下，您的理想解决方案会选择尽可能多的点，同时保持误差尽可能小。

您说将这两个术语结合起来似乎是一个弱解决方案，但在我看来，这听起来像是对您想要的东西的准确描述，并且它捕获了算法的两个主要特征（是吗？）。使用类似的东西进行评估`error + B * (selected / total)`似乎在精神上类似于使用正则化来解决梯度下降（和类似）ML算法的过度拟合问题。为 B 选择一个好的值需要一些实验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T16:58:42.937

看看你的例子，似乎决定比赛好坏的因素之一就是积分的质量。您可以在计算指标时使用/计算权重因子吗？

例如，您可以对共线/共面或空间上接近的点进行加权，因为它们可能定义了相同的特征。这可能会让你的倒置三角形被拒绝（因为这些点在一条线上，这不是整体姿势的一个很好的指标）但是角落情况会是好的，因为它们大致定义了船体。

或者，也许权重应该是点在姿势周围的分布情况，再次尝试确保您具有良好的覆盖范围，而不是匹配小的模糊特征。

# xcode - Unable to download Xcode update to 4.5.2 from iTunes store

> ID：13597649
> 
> 赞同：0
> 
> 时间：2012-11-28T04:07:02.543
> 
> 标签：xcode, itunes

I noted that there was an update to xcode available (to 4.5.2), but after not receiving any update notifications I logged into the iTunes store and tried to run 'update' from there. It then replied that I needed to log into the iTunes store with the Apple ID that originally purchased the app. I only have one Apple ID. I recently upgraded the hard drive on my macbook. I presume this error relates to the change in the hard-drive or to the change in the name of the drive I made during the upgrade. Apple support suggest removing Xcode from my macbook and downloading and re-installing it from scratch. Has anyone else experienced this issue and/or can offer some suggestions about the best way to go about the update in this situation? Would re-using the /Applications/Install XCode.app on the machine be a way to get this to work?

# iphone - Send messages from server to iOS app

> ID：13597655
> 
> 赞同：0
> 
> 时间：2012-11-28T04:07:29.173
> 
> 标签：iphone, web-services, sockets, nsstream

I am very new to web technologies, but have been developing for iphone for 3 years. I need to send a message from a server I rent to my app. Not a "push notification" for the user, but for the app itself. How should I do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:10:33.917

In general, it's not possible for a server to *directly* contact an app running on a mobile device (since the device might be behind firewalls or [NAT](https://en.wikipedia.org/wiki/Network_address_translation)). Instead, the mobile device usually makes a connection *to* the server, and the server responds with any information available for the device.

This is basically how APNS notifications work, except that Apple has already done most of the infrastructure work for you. Push notifications take very little battery power, and since iOS can batch requests for *all* apps at once, each app does not need to make its own connection to a server somewhere.

If you implement this yourself, you will need to learn about a technology such as [long polling](https://en.wikipedia.org/wiki/Push_technology). If you're very new to web technologies, you might consider getting some help making the web server side work.

# ios - AdMob 和 AdWhirl 与 iOS6 混淆

> ID：13597657
> 
> 赞同：3
> 
> 时间：2012-11-28T04:07:49.630
> 
> 标签：ios, ios6, admob, adwhirl

今天下午我花了几个小时试图让去年春天的旧 iOS 应用程序项目在带有 iOS6 的 iPhone4 上运行，并遇到了有关*arm7s*和 AdWhirl 框架的各种错误。

在尝试解决它时，我发现我的 AdWhirl SDK 已过时，所以我尝试更新它，但似乎 AdWhirl 现在是 AdMob。AdMob 现在更名为 Google。我完全糊涂了。当前 AdWhirl SDK 中的示例代码似乎已过时，无法编译。AdMob 示例代码也是如此。我搜索信息的大多数链接也已过时。

有人可以向我解释（缓慢而简单的英语）截至**2012 年 11 月 27 日**的当前状态：

1.  AdWhirl 现在基本上是无关紧要了吗？

2.  AdMob 是否执行相同类型的广告中介？

3.  AdMob 可以在 iOS6 上运行吗？

4.  最后，目前是否有实施 AdMob 的教程？（他们网站上的信息有冲突）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:37:40.727

1 和 2 - 大约 6 到 7 个月前，Google AdMob 开始提供中介作为其产品的一部分，并且几乎已成为 AdWhirl 的继任者。它提供相同类型的中介，有更多广告网络选择，更稳定，并且得到 Google 更好的支持。它还具有 AdWhirl 不具备的其他功能，例如支持 320x50 以外的格式，以及设置国家级网络排序的能力。AdWhirl 现在处于维护模式，但我不确定最新 iOS AdWhirl SDK 上 armv7s 支持的状态如何。

3 - AdMob 确实在 iOS6 上运行（支持 armv7s），从 v6.2.0 开始。

4 -[本指南](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation)应该足以让您开始使用调解。请记住，您需要为您正在使用的广告网络添加所有 SDK 和适配器库。AdMob 网络已融入 AdMob 中介库。

# apache-commons-email - Unable to listen to events using Apache Commons Email

> ID：13597659
> 
> 赞同：0
> 
> 时间：2012-11-28T04:08:03.750
> 
> 标签：apache-commons-email

I'm sending emails using Apache commons email lib.

However, I'm unable to listen to Connection and Transport events. I have added event listeners using:

```
email.getMailSession().getTransport().addConnectionListener(this);
email.getMailSession().getTransport().addTransportListener(this); 
```

...but don't receive any events.

My code is as follows:

```
public class MailSendTest implements ConnectionListener, TransportListener{
final Email email = new SimpleEmail();

public void sendEmail(){
    try {
        email.setHostName("smtp.host.com");
        email.setFrom("from@host.com");
        email.addTo("to@host.com");
        email.setBounceAddress("from@host.com");
        email.setSubject("Testing");
        email.setMsg("Test Message");
        email.setDebug(true);
        email.setAuthentication("from@host.com", "pass");
        email.setSslSmtpPort("465");
        email.setSocketTimeout(60000);

        email.getMailSession().getTransport().addConnectionListener(this);
        email.getMailSession().getTransport().addTransportListener(this);

        email.send();

    } catch (Exception ex) {
        JOptionPane.showMessageDialog(null, "Err : "+ex.getMessage());
    } 
}

@Override
public void opened(ConnectionEvent e) {
    System.out.println("####Connected to "+ email.getHostName());
}

@Override
public void disconnected(ConnectionEvent e) {
    System.out.println("####Disconnected from "+ email.getHostName());
}

@Override... 
```

}

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T14:44:39.757

我也发现它无法这样做，但是在进行了一些挖掘之后......我发现commons mail依赖于java mail API（mail.jar），所以apache commons mail只是抽象应该谨慎地做的事情，如果您正在使用 java 邮件 API。

我的建议是按照本教程[的](http://www.tutorialspoint.com/java/java_sending_email.htm)操作，即创建 Session 对象，然后从中检索 Transport 对象......然后您可以附加您的 TransportListener。

我目前仍在执行上述方式（在写这篇文章时），我希望它的工作！顺便说一句，使用[它](http://connector.sourceforge.net/doc-files/Properties.html)来定义 SMTP 的属性。

祝你好运

# javascript - 将 JSON 对象的键转换为点符号路径

> ID：13597662
> 
> 赞同：9
> 
> 时间：2012-11-28T04:08:11.327
> 
> 标签：javascript, json

我不想使用已知的点表示法访问深层对象，而是想做相反的事情：从深层对象的键构建点表示法字符串。

所以给定以下 JSON 对象：

```
{
  great:{
    grand:{
      parent:{
        child:1
      },
      parent2:1
    }
  }
} 
```

我想获得以下路径数组：

```
[
  "great.grand.parent.child",
  "great.grand.parent2"
] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T04:21:59.683

试试这个。但我不知道你为什么需要这个。

```
function path(a) {
  var list = [];
  (function(o, r) {
    r = r || '';
    if (typeof o != 'object') {
      return true;
    }
    for (var c in o) {
      if (arguments.callee(o[c], r + "." + c)) {
        list.push(r.substring(1) + "." + c);
      }
    }
    return false;
  })(a);
  return list;
}
var a = {
  great:{
    grand:{
      parent:{
        child:1
      },
      parent2:1
    }
  }
};
console.log(JSON.stringify(path(a))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:53:56.693

```
var path = function (a) {
  var list = [];
  (function(o, r) {
    r = r || '';
    if (_.isArray(o)) {
      return true;
    }
    for (var c in o) {
      if (arguments.callee(o[c], r + (r!=""?"[":"") + c + (r!=""?"]":""))) {
        list.push(r + (r!=""?"[":"") + c + (r!=""?"]":""));
      }
    }
    return false;
  })(a);
  return list;
}; 
```

使用这样的输入（输入错误的深层 JSON 对象）：

```
{
    "email": [
      "Enter a valid email."
    ],
    "billing": {
      "name": [
        "Enter a billing name."
      ],
      "line1": [
        "Enter a street address or PO box."
      ],
      "city": [
        "Enter a city."
      ],
      "state": [
        "Enter your state abbreviation."
      ],
      "zip": [
        "Enter a valid 5-digit zip."
      ]
    },
    "shipping": {
      "name": [
        "Enter a billing name."
      ],
      "line1": [
        "Enter a street address or PO box."
      ],
      "city": [
        "Enter a city."
      ],
      "state": [
        "Enter your state abbreviation."
      ],
      "zip": [
        "Enter a valid 5-digit zip."
      ]
    },
    "payment": {
      "number": [
        "Enter a valid credit card number."
      ],
      "exp_month": [
        "Enter a valid expiration month."
      ],
      "exp_year": [
        "Enter a valid expiration year."
      ],
      "cvc": [
        "Enter a valid CVC."
      ]
    }
 } 
```

您会得到这样的输出（数组表示法中的输入名称，通过客户端模板在其中附加错误）

```
["email", "billing[name]", "billing[line1]", "billing[city]", "billing[state]", "billing[zip]", "shipping[name]", "shipping[line1]", "shipping[city]", "shipping[state]", "shipping[zip]", "payment[number]", "payment[exp_month]", "payment[exp_year]", "payment[cvc]"] 
```

# javascript - Server-Side DOM Manipulation Technology the right option get html responses

> ID：13597663
> 
> 赞同：2
> 
> 时间：2012-11-28T04:08:33.810
> 
> 标签：javascript, web-applications

I'm a security guy by day a coder by night and I usually write my tools in java. It was something I was taught in school so really its just the simple fact that I'm comfortable writing in that language.

I have been for a few years now been limited by the inability to take a response from a server and build it up by actually running the JavaScript. This has drastically hurt my ability to do so many things like spider and simply see an actual response as if it was built in a browser. In order to compensate for this Weakness I have tried to use a number of different headless browsers. I tried JX browser, CORBA,SWT, HTML unit, etc. You name it I have tried to use it. As many of you know none of these technologies can even accurately handle some of the most simple JavaScript applications. Therefore, I'm really looking for an alternative.

I've been looking into potentially using something like server-side JavaScript in order to render the HTML and manipulate the DOM. I was looking at things like Node.js,PhantomJS, etc. ideally I would like to be able to keep using my Java code and somehow use these technologies as a supplement for those headless browsers. However, it looks like being able to talk to these technologies will be difficult. It looks like I might be able to leverage the commandline with Java and write to files with those js technologies and read those files with my Java code. This does seem a little clunky so I thought maybe I should just flip over to fully using these to build my tools. I wanted to get others' ideas or opinions on this. Just to give you an idea of what I typically need to do I need to be able to I need to build the send HTTP requests and get responses back,crawl sites, things like that.

I'm really just looking to see if there are other options available or if I'm going about this the right way

# android - 我可以对隐私 URL 做些什么？

> ID：13597666
> 
> 赞同：68
> 
> 时间：2012-11-28T04:09:21.070
> 
> 标签：android

我正在尝试将我的 android 应用程序投放市场，而我最不需要的是隐私网址。问题是我没有网站。我刚刚创建了这个应用程序作为我的第一个项目。我能做些什么来解决这个问题吗？我可以使用博客网站、脸书页面或推特页面吗？我真的不需要为网站付费，而且我现在没有时间创建自己的网站。我只是希望在完成所有这些工作后最终能把我的应用程序安装起来，但我被困住了。我在网上看了看，但如果没有网站，我似乎真的找不到任何东西。我可以自己写，但它仍然给我留下了一个事实，即我没有网站可以发布它。

谢谢！

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-11-28T05:06:19.500

如果您也需要，您可以[在 Google 协作平台上创建免费网站](http://sites.google.com)并创建[样板隐私政策](http://www.freeprivacypolicy.com/free-privacy-policy-generator.php)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-05-02T06:29:43.080

# 网站托管

[结帐 GitHub 的 GitHub Pages 服务](https://pages.github.com/)。他们免费为您托管一个简单的静态网站！基本说明：

1.  [在GitHub 上](http://github.com)创建一个名为`[username].github.io`（替换“[用户名]”）的公共存储库
2.  将文件提交`index.html`到 repo 的根目录。
3.  您可以在线查看您的网站，网址为`http://[username].github.io/`。

# 隐私政策

[此处的基本隐私政策模板](https://www.docracy.com/mobileprivacy)......它将为您提供一个模板，您可以简单地复制、粘贴和修改以满足您的需求。不像大多数其他地方追求你的钱和/或个人信息！！！

甚至一些免费的也让您填写调查表，并在最后一刻要求您发送电子邮件...烦人！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-07-25T09:50:15.003

*   试用[应用隐私政策生成器](https://app-privacy-policy-generator.firebaseapp.com/#)
*   以 HTML 格式下载/复制内容
*   将其托管在[Github Pages](https://pages.github.com/) / [Google Sites](https://sites.google.com/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-12-15T22:34:34.457

我刚刚创建了一个 Google Doc，将其共享设置为公开，并将可共享链接放在隐私 url 中。简单的。:-)

编辑：我注意到我需要为每个应用程序创建一个新文档，否则我收到错误：

> 您不允许使用该域作为隐私策略 URL。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-28T04:58:06.870

您可以为您的应用创建一个 Google Groups 新闻组。发布带有您的隐私政策的便签并锁定线程。提供指向该粘性的链接作为您的隐私链接。如果您的政策必须更改，请根据需要进行更新。

十分简单。

# macos - Writing Spotlight metadata to files on OS X (specifically kMDItemDisplayName)

> ID：13597668
> 
> 赞同：2
> 
> 时间：2012-11-28T04:09:23.877
> 
> 标签：macos, metadata, spotlight, file-attributes

I see that this has been answered previously by Ken T., but I have a case where the code appears to work, and the call to setxattr() returns 0, but the item I want to modify does not change.

Specifically, I'm trying to change the metadata attribute kMDItemDisplayName, and my call looks like this (modeled after the sample posted by Ken T):

[Note: the "name" param below is an NSString *]

```
rc = setxattr([pathString cStringUsingEncoding:NSUTF8StringEncoding],
                 "kMDItemDisplayName",
                 [name cStringUsingEncoding:NSUTF8StringEncoding],
                 [name lengthOfBytesUsingEncoding:NSUTF8StringEncoding],
                 0,
                 0); 
```

Doing an mdls on the file in question shows that the kMDItemDisplayName attribute is present, but I can't get it to change to anything other than the actual file name (which I assume is the default behavior).

Am I misunderstanding something about how setxattr() is supposed to work?

Any help very much appreciated.

Oh, BTW, why am I trying to do this? It appears (from examining how Bare Bones' Yojimbo does things) that Spotlight uses the kMDItemDisplayName value to list files in the Spotlight search results menu in the finder, which is something I'd like to implement in my app.

Thanks!

* * *

Heyyyy... wait a minute...

From the command line, doing xattr -l shows that as far as xattr knows, there is an attribute called kMDItemDisplayName, and it is what I set it to be... However, mdls on the same file still shows the kMDItemDisplayName attribute as the file name.

Do I need to be asking about Launch Services instead of xattr stuff??

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:22:15.803

好的。在四处寻找并阅读更多 Apple 文档后，我意识到我需要做些什么。我正在回答我自己的问题，希望这些信息可能对其他人有所帮助。

因为我必须编写自己的 mdimporter 来支持我的应用程序的文件格式，所以我想我会尝试在元数据导入时将 kMDItemDisplay 名称项添加到元数据存储中。

令我惊讶和高兴的是，它在第​​一次尝试时就奏效了！

因此，答案是，如果您想要覆盖或添加自定义 kMDItem* 类型，您可以在元数据导入时使用 Spotlight 导入器执行此操作。

希望有人觉得这有帮助！

# css - 文本装饰：外观和计算值之间的明显差异

> ID：13597673
> 
> 赞同：4
> 
> 时间：2012-11-28T04:09:59.237
> 
> 标签：css

在使用与 a:link around div相关的代码时，我注意到了这一点（奇怪？）[- 在 div 中设置样式](https://stackoverflow.com/questions/13595357/alink-around-div-styling-inside-div)

鉴于此 HTML：

```
<a id="foo" href="foobar">
  <div id="bar">
    <h2 id="baz">Foo</h2>
  </div>
</a> 
```

这个CSS（添加背景颜色以显示结构）：

```
a {
  display: block;
  padding: 20px;
  background-color: rgb(240,240,240);
}

#bar {
  width: 200px;
  height: 100px;
  background-color: rgb(220,220,220);
}

#baz {
  padding: 20px;
  text-decoration: none;
} 
```

[小提琴](https://jsfiddle.net/xD6f9/)

* * *

Chrome 将匹配的 CSS 规则显示为包含`text-decoration: none;`但文本确实带有下划线：

[![Chrome 控制台](../Images/57f971064ddd8328d7659aae0cb9055a.png)](https://i.stack.imgur.com/5JNnj.png)
[（来源：[pangram.net](http://pangram.net/sandbox/td-chrome-console.png)）]

* * *

同样，使用 Firebug，Firefox 会返回`null`计算的`textDecoration`样式：

[![萤火虫](../Images/435eecb0168007556bff5a0c6827243d.png)](https://i.stack.imgur.com/MrdkP.png)
[（来源：[pangram.net](http://pangram.net/sandbox/td-firebug.png)）]

[MDN 说这`text-decoration`适用于所有元素](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration)。

我意识到将`text-decoration`属性应用到`a`链接有一个简单的解决方法，但这不是我所期望的行为。谁能解释这个（明显的）差异？

**编辑：**我相信答案就在这里：[线条装饰：下划线、上划线和删除线](https://www.w3.org/TR/css-text-decor-3/#line-decoration)

> 当在建立内联格式化上下文的块容器上指定或传播到块容器时，装饰将传播到匿名内联盒，该盒包装块容器的所有流入内联级子项。

但我仍然不完全明白发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:54:12.037

您可能知道，Chrome 和 Firefox 默认为超链接添加下划线。

这里发生的情况是，虽然`text-decoration`被*计算*为`none`on `#baz`（如您的 CSS 规则中指定的那样），但*使用的值*最终是`underline`作为从其祖先`a`元素传播浏览器默认样式的结果。在将页面渲染到画布上时，这个使用的值*替换*了计算值，但就 DOM 而言，计算值仍然是`none`，仅基于级联分辨率。

因此，这里的差异在于计算值和使用值之间的差异。定义见[第 6.1 节](http://www.w3.org/TR/CSS21/cascade.html#value-stages)。

这种将值传播`text-decoration`到后代框的行为*独立于级联发生*[，](http://www.w3.org/TR/CSS21/text.html#lining-striking-props)如下所述：

> 当在内联元素上指定或传播到内联元素时，它会影响该元素生成的所有框，并进一步传播到分割内联的任何流入块级框（参见[第 9.2.1.1 节](http://www.w3.org/TR/CSS21/visuren.html#anonymous-block-level)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T04:23:52.523

您需要将 放在`text-decoration: none`链接`a`上以删除下划线

[小提琴](http://jsfiddle.net/xD6f9/2/)

我认为下划线仍然存在，因为该元素位于`a`链接或`a`标签内，浏览器将其识别为链接，但元素本身没有文本装饰..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T04:25:17.480

“text-decoration”是'a'标签的属性......所以只需将它添加到'a'标签和它的工作......看[这里的演示](http://jsfiddle.net/xD6f9/3/)

```
a {
  display: block;
  padding: 20px;
  background-color: rgb(240,240,240);
  text-decoration: none;
} 
```

# java - 为什么 foo(Object... obj) 在 Java1.5 中实现？

> ID：13597674
> 
> 赞同：1
> 
> 时间：2012-11-28T04:10:00.323
> 
> 标签：java, jakarta-ee

作为两个函数

```
foo(Object... obj)
{
for(int i=0;i<obj.length;i++)
System.out.println(obj[i]);
} 
```

和

```
foo(Object [] obj)
{
for(int i=0;i<obj.length;i++)
    System.out.println(obj[i]);
} 
```

并且可以完成函数调用

foo(obj,str,1);

foo({obj,str,1});

分别执行相同的功能，后者从 java 的一开始就存在，那么为什么要实现 Object... obj

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T04:14:02.293

这些`...`函数是一种[*语法糖*](http://en.wikipedia.org/wiki/Syntactic_sugar)——它们提供了更方便的语法（没有大括号），而不会改变其他任何东西，包括性能。编译器在后台做同样的事情，让你使用更方便的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:13:53.060

这不起作用：

```
foo({obj, str, 1}); 
```

你需要做：

```
foo(new Object[] {obj, str, 1}); 
```

这很尴尬，我非常感谢可变参数语法。从功能上讲，您是正确的，它们是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:23:08.093

加上一个语法糖......所以它只是意味着它可以让你的代码更好。这是一个例子：

```
public class App {

    public static void main(String[] args) {
        Object obj = new Object();
        String str = "test";
        varArgsFoo(obj, str, 1); //Don't have to use an Array...
        varArgsFoo(new Object[]{obj, str, 1}); //But you can if it suits you.
        arrayFoo(new Object[]{obj, str, 1}); // Compiles, but you MUST pass in an Array.
        arrayFoo(obj, str, 1); // Won't compile!!! Varargs won't work if an array is expected.

    }

    /**
     * Can use simply a variable number of arguments, or an array whatever you like.
     * @param obj
     */
    static void varArgsFoo(Object... obj) {
        for (int i = 0; i < obj.length; i++) {
            System.out.println(obj[i]);
        }
    }

    /**
     * Must use an array, varargs (the ... notation) won't work.
     *
     * @param obj
     */
    static void arrayFoo(Object[] obj) {
        for (int i = 0; i < obj.length; i++) {
            System.out.println(obj[i]);
        }
    }
} 
```

# generics - Is it possible to access a GATT (Generic Attribute Profile) Bluetooth device using Windows 7?

> ID：13597680
> 
> 赞同：3
> 
> 时间：2012-11-28T04:10:30.040
> 
> 标签：generics, attributes, bluetooth, profile

I have a low power RF bluetooth device that requires to be accessed using a GATT interface (Generic Attribute Profile). I have found examples for Windows 8 and Visual Studio 2012.

I run Visual Studio 2010.

Could someone either describe how to access a GATT device (using C++ or C#) and/or point to examples on how to access such devices?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-01T11:26:26.710

阅读您的文字，我假设您想在普通的 Windows PC 应用程序中建立蓝牙连接。

据我所知，Windows 不允许以这种方式进行蓝牙连接，Windows 应用商店的 Windows 8.1 应用程序除外。这些应用程序也可以在 PC 上运行，因此最好的做法是将您的想法实现为应用程序。

当您想要将蓝牙集成到现有应用程序中时会出现问题，因为 Windows 应用程序和 Windows 8.1 应用程序由于库的差异而彼此不兼容。

# php - Woocommerce 获取下一个/上一个产品

> ID：13597687
> 
> 赞同：3
> 
> 时间：2012-11-28T04:11:02.643
> 
> 标签：php, wordpress, woocommerce

我正在尝试找到一种方法来向 woocommerce 中的每个产品页面添加两个链接

一个链接将用户发送到下一个产品，一个链接到上一个产品，但我想不出一种方法来实现这一点。有没有人这样做或知道怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T18:55:50.270

在做了更多研究之后，以下简单的解决方案解决了这个问题：

```
<?php previous_post_link('&laquo; %link'); ?>  previous product    
<?php next_post_link('%link &raquo;'); ?>      next product 
```

# ruby-on-rails - Rails UI 日期导航控件生成（ActiveRecord 逻辑）

> ID：13597689
> 
> 赞同：0
> 
> 时间：2012-11-28T04:11:05.693
> 
> 标签：ruby-on-rails, datetime, activerecord

我有一个应用程序，用户可以在其中查看今天或给定日期的体育赛事（如果用户在 URL 中手动输入）。用户可以使用 UI 控件按日期导航体育赛事，大致如下所示：

```
Tue Nov. 27  | Wed Nov. 28  | Thu Nov. 29 
```

（日期是除了中间当前活动的链接之外的链接。）

此日期导航控件非常适合几乎每天发生的体育赛事。用户永远不会盯着空白页的事件。但是，对于 NFL 等体育赛事，事件仅发生在周一、周四、周日（有时是周六），用户使用日期导航 UI 控件变得很麻烦。

我想做的是更改创建日期导航 UI 链接背后的逻辑，以仅包含那些有事件的日期。逻辑是这样的：

*   给定今天的日期或用户提供的日期，返回最近的有事件的日期（current_date）
*   给定一个 current_date，找到最近的有事件的前一个日期（previous_date）
*   给定一个 current_date，找到最近的下一个有事件的日期 (next_date)

因此，对于 NFL，日期导航 UI 控件可能如下所示，假设今天的日期是 11 月 27 日：

```
Mon Nov. 25  | Thu Nov. 29  | Sun Dec. 2 
```

判断给定日期是否有任何事件的方法是按`start_time`数据库中的字段。

我不喜欢在没有代码的情况下发布问题，但我正在寻找一些指导，说明我应该如何解决这个问题，而不必多次访问数据库。

注意＃1：当您单击一项运动的日期时，它会返回该日期的所有事件。日期导航不用于查看单个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:04:31.467

在您的模型中创建一个范围方法，以获取给定运动的下两个开始日期和最近的开始日期。限制它只返回三个记录。

在您的控制器中使用此范围仅获取这三个游戏对象。使用控制器中的这三个游戏对象，将它们作为实例变量（例如）传递给视图局部`render @games`，并在局部中编写通用链接代码`<%= link_to "#{@games.start_time}", your_path(@game) %>`。Rails 将自动迭代此部分以获取集合中的对象数量（三个游戏）。

来源： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

# cakephp - Flash 消息不显示 cakephp

> ID：13597694
> 
> 赞同：0
> 
> 时间：2012-11-28T04:11:42.910
> 
> 标签：cakephp, flash-message

我知道这个问题已经被问过很多次了，但没有一个答案能解决我的问题。首先让我展示一下我在哪里设置了 Flash 并回显 $this->Session->flash()。

这是我的添加功能：

```
if(!empty($this->request->data))
    {
        $friend_id = $this->request->data['User']['id'];
        $user_id = $this->Auth->User('id');
        $already_friends = $this->Group->findByIdAndFriend($user_id, $friend_id);
        if($already_friends)
        {
            $this->Session->setFlash(__('You are already friends', true));
        }
        else
        {
            $this->Group->create();
            $data = array($user_id, $friend_id);
            if($this->Group->save($data))
            {
                $this->Session->setFlash(__('You are now friends', true));
            }
            else {
                $this->Session->setFlash(__('Failed to add friend. Please try again', true));
            }               
        }
        $this->redirect(array('action' => 'index')); 
```

这是我的布局，它的必要部分：

```
 <div id="header">
            <?php echo $this->Html->image('connect.jpg', array('alt' => 'My Image', 'id' => 'headerImage')) ?>
            <div id="headerNavMenu">
                <div name="navTab" class="menuTab">
                    <?php echo $this->Html->link('Me', array('controller' => 'users', 'action' => 'view', CakeSession::read("Auth.User.id")), array('class' => 'tabName')) ?>                        
                </div>
                <div name="navTab" class="menuTab">
                    <?php echo $this->Html->link('My Schedule', array('controller' => 'newSchedules', 'action' => 'index'), array('class' => 'tabName')) ?>
                </div>
                <div name="navTab" class="menuTab">
                    <?php echo $this->Html->link('My Group', array('controller' => 'groups', 'action' => 'index'), array('class' => 'tabName')) ?>
                </div>
                <div name="navTab" class="menuTab">
                    <a href="#" class="tabName">Settings</a>
                </div>
            </div>
            <div id="login">
                <?php echo CakeSession::read("Auth.User.firstName").' '.CakeSession::read("Auth.User.lastName").' '  ?>
                <?php echo $this->Html->link('logout', array('controller' => 'users', 'action' => 'logout')) ?>
            </div>
        </div>
        <div id="mainContent">
            <?php echo $this->Session->flash(); ?>
            <?php echo $this->Session->flash('auth'); ?>
            <?php echo $this->fetch('content') ?>
        </div>
    </div> 
```

除了没有显示闪烁消息的事实之外，似乎也没有检查模型的验证标准，因为特定消息也没有显示。

我是 cakePHP 的新手，但我一直在关注博客教程来完成我的大部分工作。闪存消息过去可以工作，但现在它甚至不适用于以前的模型。

这是我的验证：

```
public $validate = array(
    'first_name' => array(
        'required' => array(
            'rule' => array('notempty'),
            'message' => 'First Name cannot be blank',
            'allowEmpty' => false,
            'required' => true
        )
    ),
    'last_name' => array(
        'required' => array(
            'rule' => array('notempty'),
            'message' => 'Last Name cannot be blank',
            'allowEmpty' => false,
            'required' => true
        )
    ),
    'email' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'Email cannot be blank',
            'allowEmpty' => false,
            'required' => true
        ),
        'valid' => array(
            'rule' => array('email', true),          
            'message' => 'This is not a valid email',
            'required' => true
        ),
        'unique' => array(
            'rule' => array('isUnique'),
            'message' => 'This email already exists',
            'required' => true
        )
    ),
    'password' => array(
        'required' => array(
            'rule' => array('notempty'),
            'message' => 'Password cannot be blank',
            'allowEmpty' => false,
            'required' => true
        ),
        'valid' => array(
            'rule' => array('minlength', 6),
            'message' => 'Password has to be at least 6 characters',
            'required' => true
        ),
        'password_has_to_be_alphanumeric' => array(
            'rule' => 'alphanumeric',
            'message' => 'Password has to be alphanumeric',
            'required' => true
        )
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:57:57.133

我无法添加评论，所以我必须回答，但在你的 add 函数的第 4 行你应该用小写写 user `$this->Auth->user('id');`。主题检查是否已将 Session 组件添加到 AppController 中的 $components 数组

# python - 为什么在测试值时包含对象的列表为 False？

> ID：13597696
> 
> 赞同：1
> 
> 时间：2012-11-28T04:11:49.733
> 
> 标签：python, object, truthtable

我希望一个空列表将测试值设为 False，但我有点困惑，为什么包含对象的列表的引用在测试值时也报告为 False，如下例所示：

```
>>> weapon = []
>>> weapon == True
False
>>> weapon.append("sword")
>>> weapon == True
False
>>> weapon
['sword'] 
```

如果`weapon = []`是假的，为什么`weapon = ['sword']`也会是假的？根据文档[http://docs.python.org/release/2.4.4/lib/truth.html](http://docs.python.org/release/2.4.4/lib/truth.html)，它应该是 True。我对此的理解缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:13:50.127

你应该做一个检查

```
In [1]: w = []

In [2]: if w:
   ...:     print True
   ...: else:
   ...:     print False
   ...:
False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T04:20:50.977

当你这样做时：

```
w = []
if w:
    print "Truthy"
else:
    print "Falsy" 
```

需要注意的关键是，您在`if`子句中测试的任何内容都被强制转换为布尔值。明确地说：

```
w = []
if bool(w):
    print "Truthy"
else:
    print "Falsy" 
```

要将苹果与苹果进行比较，则您不想`["sword"]`与`True`. 相反，您想`bool(["sword"])`比较`True`：

```
bool(["sword"]) == True
# True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T04:17:26.927

从那篇文章中，请注意，即使事物被认为具有“真实”的真值，它们也不一定`== True`。例如：

```
["hi"] == True 
// False

if ["hi"]:
    print("hello")
// prints hello 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T04:21:05.203

`bool()`如果要直接比较，则需要使用

```
>>> weapon = []
>>> bool(weapon) == True
False
>>> weapon.append("sword")
>>> bool(weapon) == True
True 
```

当您使用`if`or测试条件时`while`，转换为`bool`隐式完成

```
>>> if weapon == True:  # weapon isn't equal to True
...     print "True"
... 
>>> if weapon:
...     print "True"
... 
True 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T04:21:52.367

文档说***“可以测试任何对象的真值***`[] == False`”而不是`['whatever'] == True`. 您应该测试文档中指定的对象***“用于 if 或 while 条件或作为布尔运算的操作数”***。

# .net - 如何设计软件以适应新的模块处理程序

> ID：13597697
> 
> 赞同：0
> 
> 时间：2012-11-28T04:11:53.423
> 
> 标签：.net, wcf, design-patterns, inversion-of-control

我正在开发一个显示来自 WCF 服务的数据的软件。WCF 服务位于我客户的服务器中，我无权修改它们。

我的客户有 3 个应用程序，称为：App1、App2、App3。我的职责是编写一个应用程序来收集正在运行的应用程序的信息，然后调用特定的 WCF 服务来获取用于显示的数据。

eg: App1 正在运行，并且在 Form1 上显示 user1 的信息，我的应用程序将收集 user1_id, user1_name 调用 Service.GetUserAlerts1(user1_id, user1_name) --> return List

App2 正在运行，并且 user2 的信息在 Form2 上（Form2 与 Form1 不同）--> 我的应用程序将收集 user2_pin、user2_postcode、user2_idnumber 然后调用服务 Service.GetUserAlerts2(user2_pin, user2_postcode, user2_idnumber) -->返回列表

所以我需要设计我的应用程序以适应新的 App4 而无需任何代码修改。我正在考虑使用 IoC 模式，但我真的不知道如何解决这个问题。

有什么想法吗？

非常感谢。

福

# android - 将列表视图图像从一个活动传递到android中的下一个活动

> ID：13597699
> 
> 赞同：0
> 
> 时间：2012-11-28T04:12:03.767
> 
> 标签：android, image, android-intent, xml-parsing, android-listview

我开发了一个 Android 应用程序。

该应用程序正在使用 xml 解析执行显示的列表视图。

我使用了下面的代码。文本数据成功地从一个活动传递到下一个活动，但图像不会从一个活动传递到另一个活动。

如何将图像从一个活动传递到 Android 应用程序中的下一个活动？

这是第一个活动：

```
String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
String duration = ((TextView) view.findViewById(R.id.duration)).getText().toString();
String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
String image = ((ImageView) view.findViewById(R.id.list_image)).getImageMatrix().toString();
// Starting new intent
Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
in.putExtra(KEY_TITLE, title);
in.putExtra(KEY_DURATION, duration);
in.putExtra(KEY_ARTIST, artist);
in.putExtra(KEY_THUMB_URL, image);
startActivity(in); 
```

这是下一个活动：

```
Intent in = getIntent();

// Get XML values from previous intent
String title = in.getStringExtra(KEY_TITLE);
String duration = in.getStringExtra(KEY_DURATION);
String artist = in.getStringExtra(KEY_ARTIST);
Bitmap bitmap =(Bitmap) in.getParcelableExtra(KEY_THUMB_URL);
// Displaying all values on the screen
TextView lblName = (TextView) findViewById(R.id.name_label);
TextView lblCost = (TextView) findViewById(R.id.cost_label);
TextView lblDesc = (TextView) findViewById(R.id.description_label);
ImageView image = (ImageView)findViewById(R.id.image_label);
image.setImageBitmap(bitmap); 
lblName.setText(title);
lblCost.setText(duration);
lblDesc.setText(artist); 
```

**编辑：**

我已经更改了第一个活动，如下面的代码：

```
String image = ((ImageView) view.findViewById(R.id.list_image)).getImageMatrix().toString();
Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
in.putExtra(KEY_THUMB_URL, image); 
```

我改变了第二个活动，如下所示：

```
static final String KEY_THUMB_URL = "Image";
String Image = in.getStringExtra(KEY_THUMB_URL);
ImageLoader imageLoader = new ImageLoader(getApplicationContext());
ImageView thumb = (ImageView) findViewById(R.id.image_label);
imageLoader.DisplayImage(Image, thumb); 
```

在我必须运行该应用程序之后意味着我只得到空图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:02:39.160

位图不能直接通过意图传递，而是您必须将位图转换为字节数组，然后通过意图传输字节数组，并在调用的活动中将字节数组转换为位图。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),"Image ID");
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes); 
```

然后传递图像

```
 intent.putExtra("imagepass", bytes.toByteArray());
             startActivity(intent); 
```

然后在调用活动

```
 Bundle extras = getIntent().getExtras();
    byte[] byteArray = extras.getByteArray("imagepass");
    Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);

    ImageView iv=(ImageView) findViewById(R.id.imgvw2);
    iv.setImageBitmap(bmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:15:23.607

为了在活动之间传递图像，首先将您的图像转换为位图，然后使用[THIS](https://stackoverflow.com/a/7890405/1405983)将该位图传递给下一个活动。

# c - 如何使用外部 cuda 设备变量

> ID：13597707
> 
> 赞同：3
> 
> 时间：2012-11-28T04:12:43.133
> 
> 标签：c, cuda, header-files

我需要将代码写入几个 .cu 文件。但是我应该在哪里定义用于许多 .cu 文件的**设备变量。**

一个例子

文件 common.h

```
__device__ int x; 
```

文件 A.cu

```
__global__ void a() 
```

文件 B.cu

```
__global__ void b() 
```

a(),b() 都使用 x。我该怎么办？

在 C 语言中，我应该写一些类似 extern **device** int x; 然后我在另一个地方定义**device** int x 。但是在CUDA中我做不到。如果我这样做了，它会告诉我“…………”之前在这里声明过

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T04:44:59.093

**编辑**：@talonmies 是对的（像往常一样）。所以我删除了我对 CUDA 4.1 的评论

此外，我给出的编译命令也不太正确。因此，让我用一个明显有效且具有正确说明的答案来代替我的答案。

*您需要 CUDA 5.0 和计算能力 2.0 或更高版本的设备才能正常工作。*

我确信可能有更好的方法，但这似乎对我有用：

com.h：

```
#ifndef DEVMAIN
extern __device__ int x;
#endif 
```

铜：

```
#include "com.h"
__global__ void a(){

  x = -5;
} 
```

b.cu：

```
#include <stdio.h>
#define DEVMAIN
#include "com.h"

extern __global__ void a();
__device__ int x;

__global__ void b(){

  x = 5;
}

int main() {
  int temp=7;
  cudaMemcpyToSymbol(x,&temp, sizeof(int));
  a<<<1,1>>>();
  cudaMemcpyFromSymbol(&temp,x,sizeof(int));
  printf("in host : %d\n",temp);
  b<<<1,1>>>();
  cudaMemcpyFromSymbol(&temp,x,sizeof(int));
  printf("in host2 : %d\n",temp);
  return 0;
} 
```

编译：

```
nvcc -arch=sm_20 -dc a.cu
nvcc -arch=sm_20 -dc b.cu
nvcc -arch=sm_20 -o ab a.o b.o 
```

输出：

```
$ ./ab
in host : -5
in host2 : 5
$ 
```

对不起我以前的错误。

# scala - 斯卡拉自定义地图

> ID：13597721
> 
> 赞同：5
> 
> 时间：2012-11-28T04:13:59.203
> 
> 标签：scala, types

我正在尝试实现一种类似于 Map 的新类型 Chunk。基本上，“Chunk”要么是 String -> Chunk 的映射，要么是字符串本身。

例如，它应该能够像这样工作：

```
val m = new Chunk("some sort of value") // value chunk 
assert(m.getValue == "some sort of value")

val n = new Chunk("key" -> new Chunk("value"), // nested chunks
                  "key2" -> new Chunk("value2"))
assert(n("key").getValue == "value")
assert(n("key2").getValue == "value2") 
```

我大部分时间都在工作，除了我对 + 运算符如何用于不可变映射感到有些困惑。

这是我现在拥有的：

```
class Chunk(_map: Map[String, Chunk], _value: Option[String]) extends Map[String, Chunk] {
  def this(items: (String, Chunk)*) = this(items.toMap, None)
  def this(k: String) = this(new HashMap[String, Chunk], Option(k))
  def this(m: Map[String, Chunk]) = this(m, None)

  def +[B1 >: Chunk](kv: (String, B1)) = throw new Exception(":( do not know how to make this work")
  def -(k: String) = new Chunk(_map - k, _value)
  def get(k: String) = _map.get(k)
  def iterator = _map.iterator

  def getValue = _value.get
  def hasValue = _value.isDefined

  override def toString() = {
    if (hasValue) getValue
    else "Chunk(" + (for ((k, v) <- this) yield k + " -> " + v.toString).mkString(", ") + ")"
  }

  def serialize: String = {
    if (hasValue) getValue
    else "{" + (for ((k, v) <- this) yield k + "=" + v.serialize).mkString("|") + "}"
  }
}

object main extends App {
  val m = new Chunk("message_info" -> new Chunk("message_type" -> new Chunk("boom")))
  val n = m + ("c" -> new Chunk("boom2"))
} 
```

此外，我们将不胜感激就总体上这种实现是否合适发表评论。

谢谢！

编辑：代数数据类型解决方案非常好，但仍然存在一个问题。

```
def +[B1 >: Chunk](kv: (String, B1)) = Chunk(m + kv) // compiler hates this
def -(k: String) = Chunk(m - k) // compiler is pretty satisfied with this 
```

这里的 - 运算符似乎有效，但 + 运算符真的希望我返回 B1 类型的东西（我认为）？它失败并出现以下问题：

```
overloaded method value apply with alternatives: (map: Map[String,Chunk])MapChunk <and> (elems: (String, Chunk)*)MapChunk cannot be applied to (scala.collection.immutable.Map[String,B1]) 
```

Edit2：Xiefei 回答了这个问题——扩展 map 需要我用 Chunk 的超类型（B1）处理 +，所以为了做到这一点，我必须有*一些*实现，所以这就足够了：

```
def +[B1 >: Chunk](kv: (String, B1)) = m + kv 
```

但是，我从来没有真正打算使用那个，相反，我还将*包括*我的实现，它返回一个块，如下所示：

```
def +(kv: (String, Chunk)):Chunk = Chunk(m + kv) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:56:51.900

[代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_type)方法怎么样？

```
 abstract sealed class Chunk
  case class MChunk(elems: (String, Chunk)*) extends Chunk with Map[String,Chunk] {
    val m = Map[String, Chunk](elems:_*)
    def +[B1 >: Chunk](kv: (String, B1)) =  m + kv
    def -(k: String) =  m - k
    def iterator = m.iterator
    def get(s: String) = m.get(s)
  }
  case class SChunk(s: String) extends Chunk
  // A 'Companion' object that provides 'constructors' and extractors..
  object Chunk {
    def apply(s: String) = SChunk(s)
    def apply(elems: (String, Chunk)*) = MChunk(elems: _*)
    // just a couple of ideas...
    def unapply(sc: SChunk) = Option(sc).map(_.value)
    def unapply(smc: (String, MChunk)) = smc match {
      case (s, mc) => mc.get(s)
    }

  } 
```

您可以使用如下：

```
val simpleChunk = Chunk("a")
val nestedChunk = Chunk("b" -> Chunk("B"))
// Use extractors to get the values.
val Chunk(s) = simpleChunk // s will be the String "a"
val Chunk(c) = ("b" -> nestedChunk) // c will be a Chunk: Chunk("B")
val Chunk(c) = ("x" -> nestedChunk) // will throw a match error, because there's no "x"
// pattern matching:
("x" -> mc) match { 
  case Chunk(w) => Some(w)
  case _ => None 
} 
```

提取器`unapply`只是一个建议；希望你能把这个想法搞砸，直到你得到你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:51:08.863

它的编写方式，没有办法强制它不能同时是 a`Map`和 a `String`。我会考虑使用`Either`并添加您需要的任何便利方法来捕获价值：

```
case class Chunk(value:Either[Map[String,Chunk],String]) {
  ...
} 
```

这也将迫使您考虑在诸如将键/值对添加到`Chunk`表示 a 的 a等情况下您真正需要做什么`String`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T04:39:08.033

您是否考虑过使用组合而不是继承？因此，与其直接扩展 Map[String, Chunk] 的 Chunk ，不如让 Chunk 在内部保留一个 Map[String, Chunk] 的实例并提供您需要的额外方法，否则委托给内部映射的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T04:42:17.833

```
def +(kv: (String, Chunk)):Chunk = new Chunk(_map + kv, _value)
override def +[B1 >: Chunk](kv: (String, B1)) = _map + kv 
```

您需要的是一种新`+`方法，并且还要实现在`Map`trait 中声明的方法。

# ruby-on-rails-3 - 在 Rails 中预编译资产时，如何解决 Unexpected character '' 错误？

> ID：13597723
> 
> 赞同：0
> 
> 时间：2012-11-28T04:14:05.177
> 
> 标签：ruby-on-rails-3, asset-pipeline

我正在尝试第一次部署我的应用程序并遇到资产管道问题。当我运行时`bundle exec rake assets:precompile`，出现以下错误；

```
cool_app@ip-10-248-17-168:/rails_apps/cool_app/current$ bundle exec rake assets:precompile
/home/cool_app/.rvm/rubies/ruby-1.9.3-p327/bin/ruby /rails_apps/cool_app/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
Unexpected character '' (line: 13934, col: 1, pos: 403510)

Error
    at new JS_Parse_Error (<eval>:1720:22)
    at js_error (<eval>:1728:15)
    at parse_error (<eval>:1824:17)
    at next_token (<eval>:2070:17)
    at handle_slash (<eval>:2024:32)
    at Object.next_token [as input] (<eval>:2067:39)
    at next (<eval>:2175:37)
    at Object.semicolon [as 1] (<eval>:2221:38)
    at prog1 (<eval>:2770:28)
    at simple_statement (<eval>:2362:35)
  (in /rails_apps/cool_app/releases/20121128034720/app/assets/javascripts/application.js) 
```

我认为这意味着我的 javascript 迷宫中某处有一个非法字符（不是渲染）（应该更早部署！）但是告诉我它位于第 13934 行的第 1 列似乎并不是特别有用。我该如何去追捕这个？错误消息非常无用（我在这里也注意到了很多关于这个主题的其他问题）。

*   编辑 -

我不确定其重要性，但如果我`RAILS_ENV=development rake assets:precompile`在我的开发机器上运行，任务似乎毫无怨言地执行。我的服务器是 Ubuntu 12.04，我的开发机器是 OSX 10.8。我现在对 Javascript 运行时的了解还不够，无法自己解决这个问题（但我正在寻找）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T11:37:19.237

好，

把它砸在键盘上几个小时让我头疼，但我解决了我的问题。

首先，一些阅读表明 uglifier 是我错误的原因。我`config.assets.compress = false`在 config/production.rb 中设置，果然我能够预编译我的资产。

我对此并不满意，因为我的 Javascript 文件是 625kB，我真的希望它被压缩，所以我查看了生成的 application.js 文件并找到了第 13934 行第 1 列所指的内容。原来它是文件 jquery.caret.1.02.js 的第 8 行第 1 列，这是我正在使用的一个小型 jQuery 插件。第一行看起来像这样；

```
 (function($,len,createRange,duplicate){ 
```

行前有一个空格。我删除了那个空间（我怀疑它是一些不正确的非打印 unicode 字符，但没有费心去研究它），设置`config.assets.compress = true`，然后再试一次，没有更多的错误消息！（我的 Javascript 已降至 159kB）

我希望有一天这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:43:28.767

另一个原因可能是 js 文件中的 html 样式注释。

这将产生

```
Unexpected character '<' 
```

只是把它拿出来，希望它能节省一些时间和麻烦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T07:53:48.300

我也一直在抨击这个问题。对我来说，问题在于使用 gem **uglifier**。当我移除 uglifier 并`bundle exec rake assets:precompile`再次运行时，我成功了。

一般来说，这似乎是一个javascript压缩问题。看看你用什么 gem 来压缩你的 JS

# arraylist - 在 JComboBox 中选择对象时，如何使用自定义对象的访问器获取类属性？

> ID：13597724
> 
> 赞同：1
> 
> 时间：2012-11-28T04:14:17.147
> 
> 标签：arraylist, jcombobox

我在使用 JComboBox 方面需要帮助：我有一个 ArrayList，我将它加载到我的 JComboBox 中。

代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class JFrameOrder extends JFrame {
    ArrayList <Customer> cust = new ArrayList<Customer>();

public JFrameOrder() {
    initComponents();
    Inventory.createCustomers();
    cust = Inventory.customerList();
    jCboCustName.addItem("");
    for (Customer c : cust){
        jCboCustName.addItem(c);
    } 
```

Inventory 类有一个创建 ArrayList - 客户列表的方法。Customer 类有两个字段：int custID 和 String custName。它也有访问器和修改器。我可以通过覆盖 ToString 让 JComboBox 显示名称。我想更新一个 JLabel 以根据选择显示相应的 custID。

如果 jCboCustName.getSelectedItem() 返回一个对象，我不应该能够使用该对象的访问器和突变器吗？毕竟我确实将元素作为对象加载。请帮忙。

提前致谢。

# django - Django联系表邮件错误

> ID：13597726
> 
> 赞同：0
> 
> 时间：2012-11-28T04:14:27.253
> 
> 标签：django, forms, email

我的表单从我的 settings.py 中列出的帐户发送电子邮件很好，但在消息中我只得到表单的主题部分和消息部分。电子邮件中没有发件人部分，所以我不知道谁会发送电子邮件。有谁知道如何解决这一问题？

我的表格.py

```
class ContactForm(forms.Form):
    subject = forms.CharField(max_length=50)
    message = forms.CharField()
    sender = forms.EmailField() 
```

My Views.py 联系功能

```
def contact(request):
if request.method == 'POST':
    form = ContactForm(request.POST)
    if form.is_valid():
        subject = form.cleaned_data['subject']
        message = form.cleaned_data['message']
        sender = form.cleaned_data['sender']
        recipients = ['otheremail@gmail.com']
        send_mail(subject, message, sender, recipients)
        return HttpResponseRedirect('/thanks/')

else:
    form = ContactForm()
return render(request, "contact.html", {'form':form,}) 
```

我的设置.py

```
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'myemail@gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:19:54.057

该代码应该可以正常工作。我在下面实现了同样的事情并且它有效，但是我遇到了一个你可能遇到的 gmail 问题。

```
send_mail(Subject, Message, 'myemail@example.ca', To) 
```

问题是，为了让发件人成为我在设置中使用 gmail 时分配的发件人 - “发件人”必须在您的 gmail 帐户设置中的已批准发件人列表中。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:34:40.133

您将不得不使用 EMAIL_HOST_USER 作为发件人，因为您要从该用户帐户发送邮件。请在您的views.py 中导入您的设置，如下所述。

```
import settings

send_mail(subject, message, settings.EMAIL_HOST_USER, recipients) 
```

# css - 如何在实体的文本中放置回车？

> ID：13597729
> 
> 赞同：0
> 
> 时间：2012-11-28T04:14:54.573
> 
> 标签：css, firefox-addon, dtd

在我`dtd`的插件 xul 的本地化字符串文件中，我有一个很长的字符串，其中需要回车。

```
<!ENTITY myentity.label "THIS IS A TEST OF THE EMERGENCY BROADCAST SYSTEM. **break** REPEAT: THIS IS ONLY A TEST."> 
```

我可以`break`在我的例子中加入什么？我的 dtd 文件被编码为没有 BOM 的 UTF-8。

我试过（代替`break`）： `\u000D` `\u000D\u000A` `&#xa;` `%0D%0A`

而且我也尝试添加文字回车。

```
<!ENTITY myentity.label "THIS IS A TEST OF THE EMERGENCY BROADCAST SYSTEM.
REPEAT: THIS IS ONLY A TEST."> 
```

但是当字符串显示在 Firefox 的对话窗口中时，它仍然显示为一个没有中断的长行 - 这意味着文本超出了对话框的边缘。

似乎[我应该使用字符的 unicode 代码](https://stackoverflow.com/questions/3496078/firefox-addon-doesnt-work-when-using-in-menu-label-and-tooltip?rq=1)，但是当我添加它时，它只是按字面意思打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:37:20.747

您不能直接在实体中放置回车符。

如果实体是 a 的文本内容`<description>`，您可以添加`xmlns:html="http://www.w3.org/1999/xhtml`到您的窗口或覆盖定义中，然后`<html:br/>`在您的实体中使用。

做你想做的事情的首选方法是通过 CSS 在 XUL 描述条目上设置最大宽度并允许它换行。为此，文本必须是描述的子项（而不是值属性）。

看：

[https://developer.mozilla.org/en-US/docs/XUL/description](https://developer.mozilla.org/en-US/docs/XUL/description)

# asp.net-mvc - jquery mobile - MVC：如何保存弹出对话框中的输入

> ID：13597732
> 
> 赞同：0
> 
> 时间：2012-11-28T04:15:11.480
> 
> 标签：asp.net-mvc, jquery-mobile

新手在这里，在这个问题上摸不着头脑。

您通常如何保存弹出对话框中指定的信息以供页面上的其他表单使用？

场景：

1.  单击选项按钮，会弹出一个对话框。

2.  设置一些复选框、单选按钮等...

3.  提交表单（对话框似乎需要它自己的表单）

您通常只是将输入保存在会话、cookie 中，还是有其他方式从主窗体访问对话框控件？

似乎我缺少一些基本的东西，因为设置一些选项并在页面的其余部分使用它们应该很容易。

所有建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:12:48.530

如果您尝试将数据从一个页面/对话框传递到另一个页面，请参阅[在页面之间传递参数](http://jquerymobile.com/test/docs/pages/page-scripting.html)

# android - 使用 Android 应用程序进行 Google+ 共享

> ID：13597735
> 
> 赞同：3
> 
> 时间：2012-11-28T04:15:29.140
> 
> 标签：android

需要在 Facebook、Twitter、google+ 等所有社交网站上分享我们的应用程序。使用 Share auth api 我们可以在 Facebook 和 Twitter 上分享。

分享认证 API： [http ://code.google.com/p/socialauth-android/wiki/GettingStarted](http://code.google.com/p/socialauth-android/wiki/GettingStarted)

无法在 google+ 中分享，有可用的插件吗？

现在正在使用这个示例程序，无法使用它分享。

[https://github.com/imellon/Google-Plus-Android-Sample](https://github.com/imellon/Google-Plus-Android-Sample)

请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:41:24.713

[尽管在https://developers.google.com/+/mobile/android/](https://developers.google.com/+/mobile/android/)上提供了一些选项，但 Google plus 还没有公开可用的 API

我强烈建议不要为每个社交网络使用唯一的 SDK，因为它们包含很多错误，而且不是很可靠。

如果您只想将简单文本从您的应用程序共享到 Facebook、Twitter、Google+ 等...我建议创建一个选择器，让用户从他的手机中选择他想要共享的应用程序。它简单、可靠，这就是它通常在 android 中完成的方式。

示例代码：

```
 Intent shareIntent=new Intent(Intent.ACTION_SEND);
        shareIntent.setType("text/plain");
        shareIntent.putExtra(Intent.EXTRA_TEXT,"your text here");
        shareIntent.putExtra(Intent.EXTRA_SUBJECT, "post title");
        startActivity(Intent.createChooser(shareIntent, "Share...")); 
```

这将向用户显示所有能够共享文本帖子的应用程序。如果用户在他/她的手机中有 facebook、twitter 和 google+ 应用程序，那么它将显示所有这些应用程序，并且用户可以选择要分享到哪些应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:50:58.083

您可能正在寻找适用[于 android 的 Google plus sdk](https://developers.google.com/+/mobile/android/getting-started)。

[登录](https://developers.google.com/+/mobile/android/sign-in)
[分享](https://developers.google.com/+/mobile/android/share)[在您的应用中向用户的 Google+ 历史记录 +1 内容](https://developers.google.com/+/mobile/android/recommend)
[写入精彩瞬间](https://developers.google.com/+/mobile/android/write-moments)

# python - PyQt 中的继承困难

> ID：13597737
> 
> 赞同：1
> 
> 时间：2012-11-28T04:15:59.843
> 
> 标签：python, qt

我正在尝试运行“使用 Python 和 QT 进行快速 GUI 编程”一书中的示例，但收到一条错误消息。

```
import sys
from math import *
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class Form(QDialog):
    def __init__(self,parent = None):
        super(Form,self).__init__(parent)
        self.browser = QTextBrowser()
        self.lineedit = QLineEdit("Type an Expression and press enter")
        self.lineedit.selectAll()

        layout = QBoxLayout()
        layout.addWidget(self.browser)
        layout.addWidget(self.lineedit)
        self.setLayout(layout)
        self.lineedit.setFocus()

        self.connect(self.lineedit, SIGNAL("returnPressed()"),self.UpdateGUI)
        self.setWindowTitle("Ryans App")

def UpdateGUI(self):
    try 
        text = self.lineedit.text()
        self.browser.append("%s = <b>%s</b>" % (text,eval(text)))
    except:
        self.browser.append("<font color=red>%s is Invalid!</font>" % text )

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

我得到的痕迹是：

```
Traceback (most recent call last):
File "C:\Users\MyName\workspaces\LearningProject\src\LearningModule.py", line 33,   in <module>
form = Form()
File "C:\Users\MyName\workspaces\LearningProject\src\LearningModule.py", line 16,  in __init__
layout = QBoxLayout()
TypeError: QBoxLayout(QBoxLayout.Direction, QWidget parent=None): not enough arguments 
```

我很困惑为什么它需要一个参数来创建 Form 对象，因为我只是想从 QDialog 继承......我错过了语法中的微妙之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:48:42.670

我拥有的版本使用 QVBoxLayout 代替：

```
...
self.lineedit.selectAll()
layout = QVBoxLayout()
layout.addWidget(self.browser)
... 
```

我的理解是，由于它垂直排列小部件，因此 .LeftToRight 和 parent 并不是绝对必要的。

我正在使用本书网站上最新的 python 2.6 代码存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:46:36.480

创建 时`QBoxLayout`，您需要指定方向（例如`QBoxLayout.LeftToRight`）和可选的父级（在这种情况下，`self`应作为父级）。这些应该添加到您的`layout = QBoxLayout()`行中。

# c - 将指向数组的指针从另一个函数中传递给函数

> ID：13597740
> 
> 赞同：1
> 
> 时间：2012-11-28T04:16:23.243
> 
> 标签：c

我将我的信息存储在指向结构的指针数组中。换句话说，数组的每个元素都是一个指向链表的指针。

我不知道数组应该有多长，所以不是在我的 main() 函数中初始化数组，而是初始化双指针

```
struct graph** graph_array; 
```

然后，一旦我获得了数组的长度，我尝试使用函数 GraphInitialize 初始化 graph_array 的每个元素：

```
 int GraphInitialize(struct graph ***graph_array, int vertices)
    {
      *graph_array = malloc(sizeof **graph_array * vertices);
      if (*graph_array)
      {
        int i;
        for (i = 0; i < vertices; i++)
        {
          (*graph_array)[i] = NULL; // parentheses matter here!
        }
      }
      else
      {
        return -1;
      }

      return 0;
    } 
```

但问题是：我不直接从 main() 调用 GraphIntialize。相反，我首先从 main 调用 getdata()，然后将指向 graph_array 的指针传递给 getdata，如下所示。

```
 getdata(argc, argv, vertpt, edgept, &graph_array)

    int getdata(int argc, char *argv[], int *verts, int *edges, struct graph* **graph_array) 
```

然后 getdata 从我的输入文件中检索顶点数，并使用它来调用 GraphInitialize：

```
 if ((GraphInitialize(&graph_array, *verts)) == -1)
    {
      printf("GraphCreate failed");
      return 0;
    } 
```

这会导致错误：“预期的'struct graph 3ASTERISKS（三重指针）'但参数的类型是'struct graph 4ASTERISKS（四重指针）'。这太令人困惑了。如果有办法我可以解决这个问题而不需要所有这些指针可能是最好的答案，但我正在尝试创建和抽象数据类型，所以我不想在我的主函数中创建一个 graph_array 数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:32:31.177

我想，你不必在这里使用'&'：

```
if ((GraphInitialize(&graph_array, *verts)) == -1) 
```

您想初始化一个双指针 ( `graph**`)，但要做到这一点，您将指向它的指针传递给您的函数，因此它们都得到一个三重指针 ( `graph ***`) 作为输入。调用链看起来像这样（这更像是一个伪代码）：

```
void GraphInitialize(struct graph *** graph_array);

void getdata(..., struct graph *** graph_array )
{
    ...
    GraphInitialize(graph_array); //graph_array here is the same triple pointer, that 'getdata' recieved as an input, so there is no need to use '&' operator.
    ...
}

void main() 
{
    graph ** graph_array = ...; // this is a double pointer, obviously
    getdata( ..., &graph_array); //getdata gets a triple pointer as an input, so we get the graph_array address by '&' operator;
} 
```

所以正确的形式是

```
if ((GraphInitialize(graph_array, *verts)) == -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:55:21.413

采用

```
if ((GraphInitialize(graph_array, *verts)) == -1)
    {
    printf("GraphCreate failed");
  return 0;
} 
```

我希望这有效..

# ruby-on-rails - to_json/as_json 覆盖

> ID：13597741
> 
> 赞同：0
> 
> 时间：2012-11-28T04:16:24.670
> 
> 标签：ruby-on-rails, ruby, activerecord

我在 ActiveRecord 类中覆盖 to_json：

```
def to_json(options={})
    puts options
    options.merge :methods => [:shortened_id, :quote]
    puts options
    super(options)
end 
```

它没有对选项哈希做任何事情，即它没有改变它。

我通过调用它

```
obj.to_json 
```

我打电话看它是否正在修改选项哈希并打印

```
{}
{} 
```

另外，我用 as_json 试过这个，没有运气。to_json 和 as_json 之间有什么区别，为什么这不起作用？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:22:23.820

[`Hash#merge`](https://ruby-doc.org/core/Hash.html#method-i-merge)返回合并的哈希：

> **合并(other_hash) → new_hash**
> **合并(other_hash){|key, oldval, newval| 块} → new_hash**
> 
> 返回包含*other_hash*内容和*hsh*内容的新哈希。

所以你要：

```
options = options.merge :methods => [:shortened_id, :quote] 
```

或使用[`merge!`](https://ruby-doc.org/core/Hash.html#method-i-merge-21)它就地修改哈希：

```
options.merge! :methods => [:shortened_id, :quote] 
```

# c# - IEnumerable 。去查查看

> ID：13597742
> 
> 赞同：3
> 
> 时间：2012-11-28T04:16:29.300
> 
> 标签：c#, linq, lambda, lookup

我正在尝试使用以下代码将 an`IEnumerable<KeyValuePair<string, object>>`转换为：`ILookup<string, object>`

```
var list = new List<KeyValuePair<string, object>>()
{
    new KeyValuePair<string, object>("London", null),
    new KeyValuePair<string, object>("London", null),
    new KeyValuePair<string, object>("London", null),
    new KeyValuePair<string, object>("Sydney", null)
};

var lookup = list.ToLookup<string, object>(a => a.Key); 
```

但是编译器抱怨：

> 实例参数：无法从 'System.Collections.Generic.List>' 转换为 'System.Collections.Generic.IEnumerable'

和

> 'System.Collections.Generic.List>' 不包含 'ToLookup' 的定义和最佳扩展方法重载 'System.Linq.Enumerable.ToLookup(System.Collections.Generic.IEnumerable, System.Func)' 有一些无效论据

和

> 无法从“lambda 表达式”转换为“System.Func”

我对 lambda 表达式做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T04:19:07.330

只需删除`<string, object>`要自动推断的类型：

```
var lookup = list.ToLookup(a => a.Key); 
```

因为它真的应该是：

```
var lookup = list.ToLookup<KeyValuePair<string, object>, string>(a => a.Key); 
```

# android - Android：按钮在列表视图中多次显示

> ID：13597748
> 
> 赞同：1
> 
> 时间：2012-11-28T04:17:01.270
> 
> 标签：android, listview

我试图编写代码以使用布局底部的“下一步”按钮突出显示列表的选定值。但由于某种原因，在每个列表项之后，“下一步”按钮也会出现。有人可以帮我解决这个问题吗？

这是布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/questionLayout"
    >

    <TextView android:id="@+id/txtExample"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25sp"
        android:textColor="#000000"
        android:background="#FF0000"
        />

    <ListView
        android:id="@+id/listExample"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#CCCCCC"
        android:choiceMode="singleChoice"
        />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">

        <Button
             android:id = "@+id/next"
             android:text="Next"
             android:layout_width = "wrap_content"
             android:layout_height = "wrap_content"
             android:layout_gravity="center"
             android:layout_weight="50"
        />
        <Button
             android:id = "@+id/submit"
             android:text="Submit"
             android:layout_width = "0dp"
             android:layout_height = "wrap_content"
             android:layout_weight="50"
             android:layout_gravity="center"
        />

    </LinearLayout>

</LinearLayout> 
```

Java 代码：

```
public class updateList extends Activity {

private SelectedAdapter selectedAdapter;
private ArrayList<String> list;
int correct_answer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    list = new ArrayList<String>();
    list.add("Choice One");
    list.add("Choice Two");
    list.add("Choice Three");

    selectedAdapter = new SelectedAdapter(this,0,list);
    selectedAdapter.setNotifyOnChange(true);

    ListView listview = (ListView) findViewById(R.id.listExample);
    listview.setAdapter(selectedAdapter);

    listview.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view,
                                       int position, long id) {
            // user clicked a list item, make it "selected"
            selectedAdapter.setSelectedPosition(position);
        }
    });
    }
} 
```

在此先感谢 SSP

选定的适配器类：

```
public class SelectedAdapter extends ArrayAdapter{

// used to keep selected position in ListView
private int selectedPos = -1;   // init value for not-selected

public SelectedAdapter(Context context, int textViewResourceId,
                   List objects) {
    super(context, textViewResourceId, objects);
}

public void setSelectedPosition(int pos){
    selectedPos = pos;
    // inform the view of this change
    notifyDataSetChanged();
}

public int getSelectedPosition(){
    return selectedPos;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    // only inflate the view if it's null
    if (v == null) {
        LayoutInflater vi = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.activity_main, null);
    }

    // get text view
    TextView label = (TextView)v.findViewById(R.id.txtExample);

    // change the row color based on selected state
    if(selectedPos == position){
        label.setBackgroundColor(Color.CYAN);
    }else{
        label.setBackgroundColor(Color.WHITE);
    }

    label.setText(this.getItem(position).toString());

    /*
    // to use something other than .toString()
    MyClass myobj = (MyClass)this.getItem(position);
    label.setText(myobj.myReturnsString());
    */
    return(v);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:34:42.180

> 但由于某种原因，在每个列表项之后，“下一步”按钮也会出现。

ListView 的行布局由您膨胀的布局确定，`getView()`或者如果您没有覆盖，则传递给适配器的超类`getView()`。仔细检查此布局并删除不需要的代码。

* * *

**添加**
ListView 项目的布局只需一个 TextView，因为您只想在每个中显示一个短语。*但是，您当前正在传递整个主布局，这会在每一*行中创建按钮、未使用的 ListView 以及其他所有内容......

而是使用`android.R.layout.simple_list_item_1`in `getView()`，当然您还需要更改传递给的 id `findViewById()`：

```
if (v == null) {
    LayoutInflater vi = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = vi.inflate(android.R.layout.simple_list_item_1, null);
}

// get text view
TextView label = (TextView)v.findViewById(android.R.id.text1); 
```

请观看 Android 的 Romain Guy 讨论[编写高效的适配器](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)以加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:26:52.807

像这样在xml中更改您的列表视图

```
<ListView
android:id="@+id/listExample"
android:layout_width="fill_parent"
android:layout_height="0dp"
android:layout_weight="1"//===== set maximum heighthere
android:layout_marginBottom="50dp"//  === give some space at bottom so that buttons will appear
android:background="#CCCCCC"
android:choiceMode="singleChoice"
  /> 
```

# php - php preg_replace_callback 没用

> ID：13597749
> 
> 赞同：-1
> 
> 时间：2012-11-28T04:17:01.963
> 
> 标签：php, str-replace, preg-replace-callback

我尝试从字符串中替换字符并放入其他字符，为此使用 preg_replace_callback 函数，问题是此函数更改原始文本的顺序并显示不同的结果

**例如，如果字符串 it´s ：**

大家好 [1-2-3] 这是一个测试 [4-5-6-7-8] **--- > 原文**

**脚本搜索 [ ] 并用 [ ] 将此内容与其他文本分开，但按我放在这里的方式显示：**

1-2-3 4-5-6-7-8 大家好，这是一个测试 --- > 不好的结果

**当正确的顺序是第一个没有 [ ]**

大家好 1-2-3 这是一个测试 4-5-6-7-8

**我创建的脚本：**

```
<?php

$text = " This is a test [gal~ruta~100~100] This is other test [gal~ruta2~100~100]";

function gal($matches)
{

global $text;

$exp=explode("~",$matches[1]);

$end=str_replace($matches[1],$a,$text);

if ($exp[0]=="gal")
{
$a="".$exp[1]."".$exp[2]."".$exp[3]."";
echo $a;
}

}

echo preg_replace_callback(
"/\[(.*?)\]/",
"gal",
$text);

?> 
```

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:21:10.353

您需要从回调中返回一些内容，这些内容将替换为原始字符串。您肯定不想这样做`echo`，这会按执行顺序将值直接发送到输出。

但是，听起来您甚至不需要回调函数来删除数字周围的括号。

```
$str = preg_replace("/\[(.*?)\]/", "$1", $str); 
```

[键盘](http://codepad.viper-7.com/nfB7N9)。

# c# - 等待的任务没有异步运行

> ID：13597752
> 
> 赞同：3
> 
> 时间：2012-11-28T04:17:35.753
> 
> 标签：c#, async-await, linq-to-twitter

我正在尝试异步下载一些 twitter 信息，它阻塞了 UI 线程。我正在使用 LinqToTwitter (http://linqtotwitter.codeplex.com/) 下载信息。

这是对任务的调用

```
PublicTweetListBox.ItemsSource = await getTweets(twitterCtx); 
```

这是任务本身

```
async Task<List<TweetViewModel>> getTweets(TwitterContext twitterCtx)
{       
    var tweetList = await Task.FromResult<List<TweetViewModel>>(
    (from tweet in twitterCtx.Status
    where tweet.Type == StatusType.User
    && tweet.ScreenName == UserName.Text
    select new TweetViewModel
    {
        Name = tweet.User.Name,
        Tweet = tweet.Text,
        ImageUrl = tweet.User.ProfileImageUrl
    })
    .ToList());

    return tweetList;

} 
```

我在等待下载列表的方式上做错了，如果有帮助的话，TweetViewModel 是一种自定义类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:11:35.953

`async`并且`await`不要神奇地使阻塞代码变为非阻塞。Linq-to-twitter 不是一个异步 API，将它放在 a`Task.FromResult`中将无济于事。

如果您想将查询推送到后台线程，您可以使用`Task.Run`而不是`Task.FromResult`. 更有效（但更复杂）的解决方案是使用异步 twitter API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:33:51.357

以前的答案很好，我只想补充已经说过的话。LINQ 不支持 C# 5.0 异步，所以我使用 LINQ to Twitter 来支持它：

```
 static void AsyncSearchSample(TwitterContext twitterCtx)
    {
        (from search in twitterCtx.Search
         where search.Type == SearchType.Search &&
               search.Query == "LINQ To Twitter"
         select search)
        .MaterializedAsyncCallback(resp =>
        {
            if (resp.Status != TwitterErrorStatus.Success)
            {
                Exception ex = resp.Error;
                // handle error
                throw ex;
            }

            Search srch = resp.State.First();
            Console.WriteLine("\nQuery: {0}\n", srch.SearchMetaData.Query);

            srch.Statuses.ForEach(entry =>
                Console.WriteLine(
                    "ID: {0, -15}, Source: {1}\nContent: {2}\n",
                    entry.ID, entry.Source, entry.Text));
        });
    } 
```

MaterializedAsyncCallback 采用 TwitterAsyncResult<IEnumerable<T>> 类型的参数，resp，其中 T 是实体类型。在此示例中，T 是搜索。resp.Status 让您知道在调用期间是否引发了异常，并允许您通过 resp.Error 属性进行访问。resp.State 使您可以访问 IEnumerable<T>，它是一个包含元数据和状态实体（推文）列表的单个搜索实体。

底层 HTTP 调用确实异步执行，尽管它们使用 APM，而不是 C# 5.0 异步。我计划在未来对查询和命令进行更深入的异步研究，但今天使用的 LINQ to Twitter 非常有效。

[@乔梅奥](https://twitter.com/JoeMayo)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T04:39:30.743

它阻塞了 UI 线程，因为这`await`就是本意。:)

> await 运算符应用于异步方法中的任务，以暂停该方法的执行，直到等待的任务完成。任务代表正在进行的工作。

[http://msdn.microsoft.com/en-us/library/hh156528.aspx](http://msdn.microsoft.com/en-us/library/hh156528.aspx)

IMO 这是异步编程以同步方式工作的“黑客”。要在后台加载项目并`ItemSource`在完成时更新，请使用工作线程并调用“Dispatcher.Invoke”来更新`ItemSource`结果。

# c# - 无法将 LINQ 结果绑定到下拉列表

> ID：13597753
> 
> 赞同：0
> 
> 时间：2012-11-28T04:17:36.457
> 
> 标签：c#, linq, entity-framework-5, asp.net-4.5

我是链接新手，正在关注[如何将 LINQ 数据绑定到下拉列表](https://stackoverflow.com/questions/554649/how-to-bind-linq-data-to-dropdownlist)以尝试使用 LINQ 将我的数据绑定到下拉列表，但我收到错误“数据直接绑定到存储查询（DbSet、DbQuery、DbSqlQuery）是“ 我遵循了代码示例，所以我不确定我做错了什么或如何解决它。任何人都可以请注意，因为这是使用 LINQ 的第二天。

```
 using (var db = new FullContext())
            {
                ddlItemType.DataSource = from t in db.ItemTypes
                                         select new { t.ID, t.Name };
                ddlItemType.DataTextField = "Name";
                ddlItemType.DataValueField = "ID";
                ddlItemType.DataBind();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:20:44.457

你是`binding dropdown with query instead of data object`。您返回查询的语句但不是实际数据。您需要将其与实例列表的数据对象绑定。

更改查询

```
ddlItemType.DataSource = from t in db.ItemTypes
     select new { t.ID, t.Name }; 
```

到数据源

```
ddlItemType.DataSource =  (from t in db.ItemTypes
     select new { t.ID, t.Name }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:19:24.630

你能试一下吗：

```
ddlItemType.DataSource = (from t in db.ItemTypes
                          select new { t.ID, t.Name }).ToList() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:26:48.967

```
public static void ListItem(DropDownList container) {
        DbDataContext db = new DbDataContext();
        var rs = from t in db.ItemTypes
                         select new { t.ID, t.Name };

        foreach (var r in rs)
            container.Items.Add(new ListItem(t.ID + " - " + t.Name, t.ID));
} 
```

**打电话：**

> ListItem(YourDropdownListID);

# javascript - 在 Javascript 的 onclick 语句上显示点击的图像

> ID：13597754
> 
> 赞同：-1
> 
> 时间：2012-11-28T04:17:53.780
> 
> 标签：javascript, image

首先，请记住，我对 Javascript 并不熟练。我几天前才知道这个。

我希望页面做什么：当用户单击调色板时，图像会发生变化。[我已经完成了这个]但是当用户点击前。灰色图像的缩略图然后大盒子上的主图像应该改变并显示图像的更大视图。

我尝试过的事情：

> onclicks 数据

这是我的整个代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Banana Peel</title>
<link href="../CSS/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="../Javascript/jquery.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript" src="../Javascript/imagepanner.js"></script>

<script type="text/javascript" src="../Javascript/ProdPop.js"></script>

<script type="text/javascript">
function ImgSwitch1() {
document.swap.src='../Images/Prod1.jpg';
}

function ImgSwitch2() {
document.swap.src='../Images/Prod2.jpg';
}

function ImgSwitch3() {
document.swap.src='../Images/Prod3.jpg';
}

function ImgSwitch4() {
document.swap.src = '../Images/Men1.jpg';
}

function ImgSwitch5() {
document.swap.src = '../Images/Men1A.jpg';
}

function ImgSwitch6() {
document.swap.src = '../Images/Men1B.jpg';
}

function ImgSwitch7() {
document.swap.src = '../Images/women1.jpg';
}

function ImgSwitch8() {
document.swap.src = '../Images/kids1.jpg';
}

function switch1(div) {
if (document.getElementById('one')) {
var option=['one','two','three'];
for(var i=0; i<option.length; i++)
{ obj=document.getElementById(option[i]);
obj.style.display=(option[i]==div)? "block" : "none"; }
}
}
//
function switchImg(i){
document.images["wine"].src = i;

}
</script>

<SCRIPT LANGUAGE="JavaScript">
<!-- Original:  Benjamin Wright, Editor -->

<!-- This script and many more are available free online at -->
<!-- The JavaScript Source!! http://www.javascriptsource.com -->

<!-- Begin
// Preload Images
var image0 = new Image(); image0.src = "../Images/Prod1.jpg";

var image1 = new Image(); image1.src = "../Images/Prod1.jpg"; onclick = switchImg("../Images/Prod1.jpg");
var image2 = new Image(); image2.src = "../Images/Prod1B.jpg"; onclick = switchImg("../Images/Prod1B.jpg");
var image3 = new Image(); image3.src = "../Images/Prod1C.jpg"; onclick = switchImg("../Images/Prod1C.jpg");

var image4 = new Image(); image4.src = "../Images/Men1.jpg";
var image5 = new Image(); image5.src = "../Images/Men1A.jpg";
var image6 = new Image(); image6.src = "../Images/Men1Bjpg";

var image7 = new Image(); image7.src = "../Images/Prod1.jpg"; onclick = switchImg("../Images/Prod1.jpg");
var image8 = new Image(); image8.src = "../Images/Prod1B.jpg"; onclick = switchImg("../Images/Prod1B.jpg");
var image9 = new Image(); image9.src = "../Images/Prod1C.jpg"; onclick = switchImg("../Images/Prod1C.jpg");

//  End -->
</script>
</head>

<body id="PicPopUp">    
<!-- TWO STEPS TO INSTALL CHANGE MULTIPLE IMAGES:

  1\.  Copy the coding into the HEAD of your HTML document
  2\.  Add the last code into the BODY of your HTML document  -->

<!-- STEP ONE: Paste this code into the HEAD of your HTML document  -->

<!-- STEP TWO: Copy this code into the BODY of your HTML document  -->
<!--------------->
<!--
<a href="#" onclick="image0.src='../Images/Men1.jpg'; image1.src='../Images/Men2.png'; image2.src='../Images/Men3.png';
image3.src='../Images/Men4.png';" 
>
<img name="image0" src="../Images/Prod1.jpg" width="100px" height="100px"></a>

<img name="image1" src="../Images/Prod2.jpg" border="1" width="100px" height="100px">
<img name="image2" src="../Images/Prod3.jpg" border="1" width="100px" height="100px">
-->
<!----------------------------------------------->

<!--------------------------------------------->

<div id="GalleryPopUp">
<div id="image-switch">
<div id="ZoomBoxContainer">
<div class="pancontainer">
<table id="ProdTable">
<tr>
<td colspan="3">
<div class="fright"><img src="../Images/Prod1.jpg" id="wine" height="350px" alt="" /></div>
</td></tr>
</table>
</div><!--end of class pancontainer-->
</div><!--end of ZoomBoxContainer-->

<div id="ProductDescription">
<!--img id="prodexit" src="../Images/prodexit.png"-->
<p id="ProdName5">
<b>STATUS QUO</b> / NAVY BLUE
</p>

<p id="ProdCode">
SRP: <b>PHP 310.00</b><br/>
CODE: <b>001</b>
</p>

<div id="ProdDescBG">
<p id="ProdDesc">Product Details:<br/>
<font color="#FFFFFF">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</font>
</p>
</div><!--end of ProdDescBG-->

<div id="colorbox1" onclick="switchImg('../Images/Prod1.jpg');
image1.src='../Images/Prod1.jpg'; image2.src='../Images/Prod1A.png';
image3.src='../Images/Prod1B.png';
">
</div><!--end of colorbox1-->

<div id="colorbox2" onclick="switchImg('../Images/Prod2.jpg');
image1.src='../Images/Prod2.jpg'; image2.src='../Images/Prod2B.jpg';
image3.src='../Images/Prod2C.jpg';
">
</div><!--end of colorbox2-->

<div id="colorbox4" onclick="switchImg('../Images/Prod3.jpg');
image1.src='../Images/Prod3.jpg'; image2.src='../Images/Prod3B.jpg';
image3.src='../Images/Prod3C.jpg';
">
</div><!--end of colorbox4-->

<div id="SelectSize">
<img id="prodselect" src="../Images/selectsize.png">
<select id="prodselectsize">
<option>5</option>
<option>6</option>
<option>7</option>
<option>8</option>
<option>9</option>
<option>10</option>
<option>11</option>
<option>12</option>
</select>
</div><!--end of SelectSize-->

<div id="SelectQuantity">
<img id="quantityselect" src="../Images/quantity.png"><input id="prodselectquantity" type="text" value=""></input>
</div><!--end of Selectquantity-->

<div id="StockStats">
<p id="StockStatus">
STOCK STATUS: <b>IN STOCK</b></p>
</div><!--end of StockStats-->

<div id="HomeEmail">
<a href="../HTML/Home.html"><img id="homeicon" src="../Images/home.png"></a>
<a href="mailto:sales@bananapeel.net"><img id="emailicon" src="../Images/email.png"></a>
<a href="../HTML/Cart.html" onmouseover="this.src='../Images/addviewcart2.jpg'"  onmouseout="this.src='../Images/addviewcart.jpg'" /><img id="addviewcart" src="../Images/addviewcart.jpg" onmouseover="this.src='../Images/addviewcart2.jpg'"  onmouseout="this.src='../Images/addviewcart.jpg'"></a>
</div><!--end of HomeEmail onmouseover="this.src='image2.gif'"
onmouseout="this.src='image1.gif'"-->

<!--div id="AddToViewCart">
</div><end of AddToViewCart-->

</div><!--end of ProductDescription-->

<div id="thumbnails">
<table id="ProdThumbs">
<tr>

<td style="margin-left:-2px;">
<a href="#n" name="image7" onclick="switchImg('../Images/Prod1.jpg');"><img id="ProdThumb1" name="image1" src="../Images/Prod1.jpg"></a>
</td>

<td style="margin-left:4px;">
<a href="#n" name="image8" onclick="switchImg('../Images/Prod1A.png');"><img id="ProdThumb2" name="image2" src="../Images/Prod1A.png"></a>
</td>

<td style="margin-left:4px;">
<a href="#n" name="image9" onclick="switchImg('../Images/Prod1B.png')"><img id="ProdThumb3" name="image3" src="../Images/Prod1B.png"></a>
</td>
</tr>
</table>
</div><!--end of thumbnails-->

</div>
<div class="clear"></div>
</div><!--End of Gallery-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:20:56.610

您可以在单击时在运行时更改 src

```
syntax: elementNode.setAttribute(name,value)

document.getElementById('something').setAttribute('src','image/men1.jpg'); 
```

更新：

```
<a href="#n" name="image9" onclick="switchImg('../Images/Prod1B.png',this)"><img id="ProdThumb3" name="image3" src="../Images/Prod1B.png"></a>

<script>
function switchImg(i,ev)
{
var ret_id=$(ev).children().attr('id');
//in javascript
document.getElementById(ret_id).setAttribute('src',i);
//in jquery
$('#'+ret_id).attr('src',i);
}
</script> 
```

# java - KeyListener - 为什么 keyPressed 方法被一种类型延迟？

> ID：13597760
> 
> 赞同：0
> 
> 时间：2012-11-28T04:19:19.493
> 
> 标签：java, swing, jtextfield, keylistener, documentlistener

我想要做的是按下键盘的那一刻，文本字段上写的任何内容都将显示在 System.out.printLn() 中。但是对于我制作的每种类型，只有当我按下另一个键时才会显示。

例如..我按'A' ...然后将显示一个空格。我按'B' ...然后将显示'A'。我按'C' ...然后将显示'AB'。

我想要的是如果我按'A' ...然后会显示'A'...等可能吗？我也在 keyTyped() 上试过这个，但结果是一样的..

这是我的简短代码...

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class NewClass extends JFrame implements KeyListener{
JTextField tf = new JTextField();
NewClass(){
    this.setLayout(null);
    tf.setBounds(50, 50, 200, 30);

    add(tf);
    tf.addKeyListener(this);
}

public static void main(String[] args) {
    NewClass r = new NewClass();
    r.setVisible(true);
    r.setSize(300, 200);
    r.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

@Override
public void keyTyped(KeyEvent e) {
}

@Override
public void keyPressed(KeyEvent e) {
    System.out.println(tf.getText());
}

@Override
public void keyReleased(KeyEvent e) {
}

} 
```

有什么建议么？提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T04:22:06.797

问题是在 TextBox 更新*之前*`keyPressed`被调用。

 *代替

```
tf.addKeyListener(this); 
```

尝试使用这个：

```
tf.getDocument().addDocumentListener(new DocumentListener() {
public void changedUpdate(DocumentEvent e) {
    printIt();
}
public void removeUpdate(DocumentEvent e) {
    printIt();
}
public void insertUpdate(DocumentEvent e) {
    printIt();
}

public void printIt() {
    System.out.println(tf.getText());
} 
```

您需要导入`javax.swing.event.DocumentEvent`和`javax.swing.event.DocumentListener`.*

# java - 想知道共享偏好限制

> ID：13597762
> 
> 赞同：4
> 
> 时间：2012-11-28T04:19:38.760
> 
> 标签：java, android, sharedpreferences

共享偏好是否有任何限制，而不是 sqlite，我可以优先保存吗？

我在文档中看到最大长度是`8192`，即偏好元素大小？

```
public static final int MAX_VALUE_LENGTH -
Maximum size in characters allowed for a preferences value.
Constant Value: 8192 (0x00002000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:32:55.273

文档中提到的大小是“一个值可以具有的最大字符数”。不是您可以存储的元素数量。

尽管您可以存储的项目数量没有固有限制 - 随着项目数量的增加，检索和存储变得非常昂贵。

SharedPreferences 旨在用于您在整个应用程序中可能需要的全局常量，而不是作为数据库替换。

您不能对其执行数据操作和其他 SQLite 操作。

所以当数据很重要时，总是选择数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:26:26.370

SharedPreferences 存储在 /data/data/[package_name]/shared_prefs/[app name].xml 中。所以在xml中存储没有限制。

但是如果要处理大量数据，存储在 SharedPreferences 中将不是一种有效的方式。更好地使用数据库。

# java - getClass() 不工作？

> ID：13597769
> 
> 赞同：0
> 
> 时间：2012-11-28T04:20:17.013
> 
> 标签：java, compareto

```
public int compareTo(Object a) {  
    int Output = 0;  
    if(this.equals(a))  
        Output = 0;  
    if(a instanceof this.getClass()) {  
        if(this._numDec > ((this.getClass())a)._numDec)   
        Output = 1;  
        if(this._numDec < ((this.getClass())a)._numDec)   
        Output = -1;  
    }  
    return Output;  
} 
```

你好。我的 CS 老师告诉我们的班级创建一个函数，该函数将确定两个值中的哪一个更大，如果前者较大则输出 1，如果它们相等则输出 0，如果前者较小则输出 -1。`this.getClass()`最初是一个 Hexadecimal 类，用于将 Hexadecimal 值转换为 _numDec 。但是，当我尝试使用 this.getClass() 时出现错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:20:26.307

您没有遇到问题，因为您的调用`getClass()`不起作用，您遇到问题是因为您使用了不正确的转换语法。正确的语法格式如下：

```
<type> target_var = (<type>) source_var; 
```

where`<type>`应该是一个实际的 Java 类型（原始或对象）。有效的 Java 原始类型是（int、float、long、double、char、boolean ...）。有效的对象类型由它们的完全限定名称指定，如果类型被导入，则由简单名称指定。例如（字符串、可序列化、对象、JFrame ...）。

在您的代码中，这一行：

```
if(this._numDec > ((this.getClass())a)._numDec) 
```

不会编译，因为您将转换指定为`this.getClass()`，这是一个动态表达式，而不是有效类型。

有几种方法可以实现您的***真正***目标，也就是确定提供的对象是否属于可以与当前对象进行比较的类型，然后执行比较。这是一种这样的方式：

```
if(a instanceof Binary)) {
    if(this.getNumDec() > ((Binary)a).getNumDec())   
        Output = 1;  
    else 
        Output = -1;  
} else if(a instanceof Hexadecimal) {
    if(this.getNumDec() > ((Hexadecimal)a).getNumDec())
        Output = 1;
    else
        Output = -1;
} 
```

请注意，我已将直接属性访问的使用替换为访问器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:29:50.447

明确写出确切的类名。

```
if (a instanceof Hexadecimal) {  
    if (this._numDec > ((Hexadecimal) a)._numDec)   
        Output = 1;  
    if (this._numDec < ((Hexadecimal) a)._numDec)   
        Output = -1;  
} 
```

顺便说一句，如果`a`不是`Hexadecimal`对象，那么您的方法将返回 0。它应该返回非零。

# vba - 在找到 txt 的位置获取段落编号，并使用 Word 2010 vba 将文本移动到段落末尾

> ID：13597775
> 
> 赞同：1
> 
> 时间：2012-11-28T04:21:03.520
> 
> 标签：vba, ms-word, find, word-automation, textrange

我正在尝试使用 VBA 将出现在各个段落开头的富文本子句（“strText”）移动到出现子句的每个段落的末尾，然后在 strText 下划线。

我是 vba 编程的新手/爱好者，所以请保持温柔。在寻求帮助之前，我花了几天时间解决这个问题。

我尝试编码的问题（如下所示）：

1.  我试图将找到的文本（strText）出现的段落编号分配给 var“LparaNo”。但是“LparaNo”返回的数字完全不符合标准。如果有人对如何获得正确的段落编号有任何建议，我将不胜感激。我的意图是设置一个范围变量 objRange_ParaHoldingText=ActiveDocument.Paragraphs(LparaNo).Range，即一个范围，该范围将反映在其中找到所寻找的文本的段落。

2.  我不知道如何将 objRange01（“strText”，它是格式化的文本）移动到它出现的段落的末尾。

任何建议将不胜感激。

谢谢，马克

```
Sub subFindTextAndMoveItToEndOfTheSameParagraphAndUnderlineIt_03()

    ' Code canniablized from http://stackoverflow.com/questions/11733766/how-to-search-for-text-and-check-for-underline-in-vba-for-word
    Dim c As Range
    Dim fnd As String
    Dim strText As String
    Dim objRange01 As Range
    Dim objRange02 As Range
    Dim objRange03 As Range
    Dim LparaNo As Long
    Dim strParazText As String

    With ActiveDocument

        strText = "Falsification  45 C.F.R. §" & Chr(160) & "6891(a)(2):  "

        ' My objectives are: (1) to move strText from the beginning of various paragraphs, to the end of each paragraph where it appears,
        '    and thereafter, (2) to delete the ":" at the end of strText, and (3) to underline strText

        fnd = strText

        If fnd = "" Then Exit Sub

        Set c = ActiveDocument.Content

        c.Find.ClearFormatting
        c.Find.Replacement.ClearFormatting

        With c.Find
            .Text = fnd
            .Replacement.Text = ""
            .Forward = True
            .Wrap = wdFindStop
        End With

        c.Find.Execute

        While c.Find.Found
            c.Select ' I am trying to select the text that was found

            Set objRange01 = c ' I am trying to set objRange01 = the text that was found, and selected
            Selection.EndOf Unit:=wdParagraph, Extend:=wdExtend ' I am extending the selection to include the entire paragraph
            Set objRange02 = Selection.Range 'The entire paragraph
            Set objRange03 = ActiveDocument.Range(Start:=0, End:=Selection.End) ' I am trying to set objRange02 = all text from
            '                                                                     '   beginning of doc thru objRange01.text
            LparaNo = objRange03.ComputeStatistics(wdStatisticParagraphs) + 1 ' I am trying to set LparaNo = the no. of paras in all
            '                                                                 '    text from beginning of doc thru the end of objRange02.
            '                  ' Alas, the number generated for "LparaNo" is incorrect. The paragraph number generated for "LparaNo"
            '                  '    is the number for a paragraph that appears 5 pages before objRange01.text

            MsgBox "Paragraph # " & LparaNo & "  [objRange01.Text = c = ]  " & Chr(34) & objRange01.Text & Chr(34) & vbCrLf & _
                    vbCrLf & objRange02.Text & vbCrLf & vbCrLf & _
                    ActiveDocument.Paragraphs(LparaNo - 2).Range.Text & vbCrLf & _
                    ActiveDocument.Paragraphs(LparaNo - 1).Range.Text & vbCrLf & _
                    ActiveDocument.Paragraphs(LparaNo).Range.Text & vbCrLf ' & _
'                    ActiveDocument.Paragraphs(LparaNo + 1).Text & vbCrLf & _
'                    ActiveDocument.Paragraphs(LparaNo + 2).Range.Text & vbCrLf '& _

            objRange01.Move Unit:=wdParagraph, Count:=1 ' I am trying unsuccessfully to move the selected text to the beginning
            '                                            '   of the next paragraph
            objRange01.Move Unit:=wdCharacter, Count:=-1 ' I am trying unsuccessfully to move the selected text from the beginning
            '                                            '   of the next paragraph, to the end of the preceding paragraph, i.e.,
            '                                            '   to the end of the selected text's paragraph of origin.
            c.Find.Execute

        Wend ' While c.Find.Found

    End With

End Sub 'subFindTextAndMoveItToEndOfTheSameParagraphAndUnderlineIt_03 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:38:28.967

这是一个不使用 Find 的建议。如果要使用 Find，则需要循环，如果存在多次查找相同文本的风险，这可能会很棘手。相反，我的解决方案循环通过 Paragraphs 集合。这是否符合您的要求？

```
Sub subFindTextAndMoveItToEndOfTheSameParagraphAndUnderlineIt_04()
Dim currDoc As Document
Set currDoc = ActiveDocument
Dim docRng As Range, currRng As Range, strRng As Range
Set docRng = ActiveDocument.Content
Dim currPara As Paragraph
Dim strText As String
strText = "Falsification  45 C.F.R. §" & Chr(160) & "6891(a)(2):  "
Dim i As Long
' Set a counter to indicate the paragraph. This should be sufficient,
' unless your document is complicated in a way I cannot predict.
i = 0

' Loop through the paragraphs in the active document.
For Each currPara In docRng.Paragraphs
    i = i + 1
    ' Check each paragraph for a match to strText. By using Mid you eliminate
    ' the chance of finding the string somewhere else in the text. This will work
    ' for different strText values.
    If Mid(currPara.Range.Text, 1, Len(strText)) = strText Then
        Set currRng = currDoc.Range(currPara.Range.Start, currPara.Range.End)
        ' Adds a space at the end of the paragraph. If you don't want the space,
        ' just delete the InsertAfter method. MoveEnd is used to bring the end of the
        ' range before the paragraph marker.
        With currRng
            .MoveEnd Unit:=wdCharacter, Count:=-1
            .InsertAfter " "
        End With
        Set strRng = currDoc.Range(currRng.Start, currRng.Start + Len(strText))
        ' Set a range for the string, underline it, cut it, paste it at the end of the
        ' paragraph (again, before the paragraph marker), and select it. Note that moving
        ' a range doesn't move the text in it. Cut and paste does that.
        With strRng
            .Underline = wdUnderlineSingle
            .Cut
            .Move Unit:=wdParagraph, Count:=1
            .Move Unit:=wdCharacter, Count:=-1
            .Paste
            .Select
        End With
        ' Collapse the selection to the end of the text and backspace three times to
        ' remove the colon and two spaces. If these final characters are variable, you'll
        ' want something spiffier than this.
        With Selection
            .Collapse wdCollapseEnd
            .TypeBackspace
            .TypeBackspace
            .TypeBackspace
        End With
        ' Expand the range we've been using to hold the paragraph so that it includes the newly
        ' pasted text.
        currRng.Expand wdParagraph
        ' I wasn't entirely sure what you wanted to convey in your message box. This displays
        ' the paragraph number and the new text of the paragraph.
        MsgBox "Paragraph # " & i & "  [currRng.Text = ]  " & Chr(34) & currRng.Text
    End If
Next currPara

End Sub 
```

# javascript - 使用 Javascript 检测窗口底部并在请求加载时忽略所有事件

> ID：13597777
> 
> 赞同：0
> 
> 时间：2012-11-28T04:21:06.623
> 
> 标签：javascript, jquery

我有一个匿名函数来检测用户是否滚动到窗口底部。在匿名函数内部，我调用了一个需要一段时间才能完成的数据库。

```
var allowing_more = 1;

$(window).scroll(function() {
    if (allowing_more == 1){
        if ($(window).scrollTop() + $(window).height() == $(document).height()) {
            allowing_more = 0;
            //query
            allowing_more = 1;
        }
    }
}); 
```

此时，如果用户再次滚动到窗口底部，则似乎会创建一个队列来保存用户在加载查询时滚动到窗口底部的事件。完成查询后，将执行这些事件。

我有一个布尔语句来检测匿名函数是否正在接受更多查询请求，但这似乎被忽略了。

是否有某种方法可以暂时忽略匿名函数并重新启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:50:16.947

```
var flag = 0;
$(window).scroll(function() {
if(flag===0){
    if ($(window).scrollTop() + $(window).height() == $(document).height()) {
        //query
      flag = 1;
    }
   flag = 0;
  }
}); 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:14:04.757

只需遵循这种模式，您的布尔条件就可以工作。

```
safeToQuery = true;  //
$(window).scroll(function() {
    ...
    if (safeToQuery) {
        safeToQuery = false;
        //send query request
        $.ajax({...}).done(function(data,etc){
            //do whatever with the results
        }).always(function (){
            //regardless of whether or not the last request resulted 
            //in an error, make it safe to query again
            safeToQuery = true;
        });
    }
}); 
```

注意：`safeToQuery`不必是全局变量，您可以在 [立即调用函数表达式 (IIFE) 中将](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)其声明为局部变量，或者仅将其设为某个对象的属性，该属性至少只要您需要保持滚动处理程序处于活动状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:43:34.323

您只需要在上一个请求完成之前停止查询数据库，这是否正确？

如果这是正确的

```
var chkFlg=0;
$(window).scroll(function() {
    if ($(window).scrollTop() + $(window).height() == $(document).height()) {
        if(chkFlg===1){
           //query your database after you get your result from db assign 1 to chkFlg
            chkFlg = 1;
        }
    }
}); 
```

# sqlalchemy - Sqlalchemy：更新...限制 1，不可能？

> ID：13597779
> 
> 赞同：2
> 
> 时间：2012-11-28T04:21:14.563
> 
> 标签：sqlalchemy

在 MySQL 中，可以限制受更新查询影响的记录数。在理想的世界中，这应该是不必要的，但在某些情况下，有这样的限制确实有助于节省你的培根 :)

我曾认为在 SQLAlchemy 中可以通过以下方式实现：

```
tgt_meta.tables['ps_product'].update(tgt_meta.tables['ps_product'].c.id_product == product_id).values(**upd_product_values).limit(1) 
```

但显然事实并非如此。

```
AttributeError: 'Update' object has no attribute 'limit' 
```

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:54:58.713

Mysql方言有这个作为`update(..., mysql_limit=x)`

[https://docs.sqlalchemy.org/en/latest/dialects/mysql.html#mysql-sql-extensions](https://docs.sqlalchemy.org/en/latest/dialects/mysql.html#mysql-sql-extensions)

# java - 不知道长度时如何构造数组字段？

> ID：13597782
> 
> 赞同：0
> 
> 时间：2012-11-28T04:21:25.733
> 
> 标签：java, arrays

我不知道该怎么做，这是我尝试过的：

```
public class Mage{
    private int hp;
    private int mp;
    private String type;
    private String weakness;
    private int numSpell;//the input will tell you how long the array will be
    public Mage(int ihp, int imp, String itype, String iweakness, int inumSpell, String[] ispells){
        hp=ihp;
        mp=imp;
        type=itype;
        weakness=iweakness;
        private String[] spells = new String[inumSpell];
        for(int i=0;i<ispells.length;i++){
            spells[i]=ispells[i];
        }
    }
} 
```

你会认为我的猜测是正确的吗？任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:26:39.977

尽管您正在做的事情看起来有点奇怪，因为您可以简单地执行 ispells.length 来获取法术数量，而不是为此目的传递另一个 int。无论如何，这是您应该根据原始代码执行的操作：

（您的代码的简化版本）

```
public class Mage {
    private String[] spells;

    public Mage(int noOfSpells, String[] ispells) {
        spells = new String[noOfSpells];
        for (......) {
             // your for loop to copy from ispells to spells
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:33:24.340

在该字段中，它看起来像：`private int[] numSpell;`您缺少括号。

# python - 字符串和列表的元组

> ID：13597784
> 
> 赞同：0
> 
> 时间：2012-11-28T04:21:36.937
> 
> 标签：python, list

假设一周中的日子在有序列表中：

```
 days_week=['mon','tues','wed','thurs','fri','sat'] 
```

我正在制作的函数接收随机出现的元素列表`days_week`：

```
 random_list=['mon','mon','mon','wed','sat','fri','fri','wed'] 
```

然后它应该以正确的顺序输出最高出现日期的元组和每天出现的列表，`days_week`例如首先是所有星期一，然后是所有星期二：

```
 output:('mon',[3,0,2,0,2,1]) 
```

我的第一个想法是构建一个包含一周名称的键和那些日子发生的值的字典：

```
 days_dictionary={}
    for i in random_list:
          if i in days_dictionary:
               days_dictionary[i]+=1
          else:
               days_dictionary[i]=1 
```

这就是我卡住的地方，因为我不确定如何使用字典来形成上面的输出。

编辑：我不能导入数学以外的任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:28:14.773

您应该可以将这两个表达式与您的 days_dictionary 一起使用

```
>>> max(days_dictionary, key=days_dictionary.get)
'mon'
>>> [days_dictionary.get(k, 0) for k in days_week]
[3, 0, 2, 0, 2, 1] 
```

另一种方法是使用`collections.Counter`

```
>>> import random
>>> from collections import Counter
>>> days_week = ['mon', 'tues', 'wed', 'thurs', 'fri', 'sat']
>>> random_list = [random.choice(days_week) for x in range(10)]
>>> random_list
['wed', 'mon', 'mon', 'tues', 'tues', 'mon', 'wed', 'mon', 'wed', 'sat']
>>> c = Counter(random_list)
>>> c.most_common(1)[0][0]
'mon'
>>> [c.get(k, 0) for k in days_week]
[4, 2, 3, 0, 0, 1]
>>> c.most_common(1)[0][0], [c.get(k, 0) for k in days_week]
('mon', [4, 2, 3, 0, 0, 1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:33:49.740

我建议看看[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
>>> days_week=['mon','tues','wed','thurs','fri','sat']
>>> import random
>>> random_list = [random.choice(days_week) for _ in range(10)]
>>> print random_list
['mon', 'fri', 'sat', 'wed', 'sat', 'thurs', 'wed', 'sat', 'tues', 'tues']
>>> import itertools
>>> g = itertools.groupby(sorted(enumerate(random_list), key=lambda x: x[1]), lambda x: x[1])
>>> for day, occur in g:
    print day, list(occur)

fri [(1, 'fri')]
mon [(0, 'mon')]
sat [(2, 'sat'), (4, 'sat'), (7, 'sat')]
thurs [(5, 'thurs')]
tues [(8, 'tues'), (9, 'tues')]
wed [(3, 'wed'), (6, 'wed')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T04:31:19.507

首先：您可以使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)来构建您的字典：

```
from collections import Counter
random_list = ['mon','mon','mon','wed','sat','fri','fri','wed']
counts = Counter(random_list) 
```

然后你可以像这样构建频率列表：

```
days_week = ['mon','tues','wed','thurs','fri','sat']
freqs = [counts[d] for d in days_week if d in counts] 
```

对于最终输出：

```
output = counts.most_common(1)[0][0], freqs ## ('mon', [3, 2, 2, 1]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T04:32:37.707

第一步是获取最常见的一天，如下所示：

```
import operator
most_common = max(days_dictionary.iteritems(), key=operator.itemgetter(1))[0] 
```

然后列出其余事件的列表

```
occur = [days_dictionary[day] for day in days_week] 
```

然后制作元组

```
(most_common, occur) 
```

# javascript - dd/mm/yyyy 格式的 jqueryUI Datepicker plus Validator

> ID：13597785
> 
> 赞同：2
> 
> 时间：2012-11-28T04:21:44.940
> 
> 标签：javascript, jquery, regex, jquery-ui

我有一个带有 jQ​​uery UI Datepicker 的表单，然后使用 jQuery Validation 插件对其进行验证。

日期选择器是使用以下方法创建的：

```
$("#dob").datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: "dd/mm/yy",
        onSelect: function (){
            this.focus();   
        },
    }); 
```

但是，当我要求它使用 dd/mm/yyyy 进行验证时，验证插件似乎以美国格式进行验证。这意味着任何一个月的 12 日之后的任何日期都被视为无效。

我环顾四周，发现了一种添加不同方法来使用正则表达式验证日期的方法：

```
$.validator.addMethod(
    "australianDate",
    function(value, element) {
        return value.match(/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[012])\/((19|20)\\d\\d)$/);
    },
    "Please enter a date in the format dd/mm/yyyy."
); 
```

然后将其添加到规则中：

```
 dob:{
             required:true,
             australianDate: true
        }, 
```

但这对于任何输入似乎仍然失败。

我正在使用的正则表达式是我过去在 php 中使用过的，它比通用 (any2numbers/any2numbers/any4numbers) 表达式更准确，我也希望能够在 javascript 中使用它。

javascript 正则表达式是否需要与 php 采用不同的格式？那是我要去错的地方吗..

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:49:32.747

只是一个评论：

更好的日期验证功能是：

```
// Expects date string in format dd/mm/yyyy
function isValidDate(s) {
  if (s === null || s.length !== 10) {
    return false;
  }
  s = s.split('/');
  var d = new Date(s[2], --s[1], s[0]);
  return d.getFullYear() == s[2] && d.getDate() == s[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:57:18.663

```
^(((((0[1-9])|(1\d)|(2[0-8]))\/((0[1-9])|(1[0-2])))|((31\/((0[13578])|(1[02])))|((29|30)\/((0[1,3-9])|(1[0-2])))))\/((20[0-9][0-9])|(19[0-9][0-9])))|((29\/02\/(19|20)(([02468][048])|([13579][26]))))$ 
```

试试上面的模式，我希望它会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:58:58.547

感谢您的输入。虽然这两个答案都有效，但他们没有验证闰年或 2 月必须是最大 28/29 之类的东西。

我不停地环顾四周，设法找到了另一个 jquery 插件，简称为[date.js](https://code.google.com/p/datejs/)。

链接后，您只需调用该`Date.parseExact`函数：

```
jQuery.validator.addMethod("australianDate", function(value, element) { 
    return Date.parseExact(value, "d/M/yyyy");
}, "Please enter a valid date in the format dd/mm/yyyy."); 
```

验证闰年和我正确测试过的所有其他内容。

# machine-learning - 向训练集 添加属性

> ID：13597792
> 
> 赞同：0
> 
> 时间：2012-11-28T04:22:18.073
> 
> 标签：machine-learning

如果我有一个特征卡路里和另一个特征人数，为什么添加每个人的特征卡路里或添加特征卡路里/10 有助于改进测试？我看不出对两个特征执行简单的算术运算会如何获得更多信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:28:33.480

考虑您正在使用特征空间中线性（或对数线性）的分类器/回归机制。如果您的实例 x 具有特征 x_i，那么线性意味着分数类似于：

y_i = \sum_i x_i * w_i

现在考虑您认为特征之间存在一些重要的相互作用——也许您认为 x_i 只有在 x_j 取相似值时才重要，或者它们的总和比单个值更重要，或者其他什么。合并此信息的一种方法是让算法显式建模交叉产品，例如：

y_i = [ \sum_i x_i * w_i ] + [\sum_i,j x_i * x_j * w_ij]

然而，线性算法无处不在且易于使用，因此将类似交互的术语纳入标准线性分类器/回归机制的一种方法是扩大特征空间，因此对于每一对 x_i, x_j，您创建一个形式为 [x_i * x_j] 或 [x_i / x_j] 或其他。现在，您可以对特征之间的交互进行建模，而无需使用非线性算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:55:27.947

执行该类型的算术允许您在未明确考虑变量非线性组合的模型中使用该信息。一些分类器试图找到最能解释/预测训练数据的特征，而且通常最好的特征可能是非线性的。

使用您的数据，假设您想预测一组人是否会平均体重增加。并且假设“正确”的答案是，如果该组中的人平均每天摄入超过 3,000 卡路里的热量，那么该组的体重就会增加。如果您的输入是`group_size`和`group_calories`，您将需要使用这两个变量来做出准确的预测。但是，如果您还提供`group_avg_calories`（只是`group_calories`/ `group_size`），您可以只使用该单一功能来进行预测。即使前两个特征添加了一些额外的信息，如果你将这三个特征提供给决策树分类器，它几乎肯定会选择`group_avg_calories`作为根节点，您最终会得到一个更简单的树结构。向模型中添加大量任意非线性特征组合也有一个缺点，即它会显着增加分类器的训练时间。

关于`calories/10`，目前尚不清楚为什么要专门这样做，但是对输入特征进行归一化可以提高某些分类器（例如，ANN）的收敛速度，并且还可以为聚类算法提供更好的性能，因为输入特征都是相同的尺度（即，沿不同特征轴的距离是可比较的）。

# php - MySQL 数据库仅使用数字更新

> ID：13597796
> 
> 赞同：1
> 
> 时间：2012-11-28T04:22:27.060
> 
> 标签：php, mysql

我的更新表单脚本只有在我使用数字时才有效，但是如果我尝试使用任何单词，它将不起作用。我需要帮助，谢谢！

```
<?php
if(isset($_POST['teams'])){
  $home_team = $_POST['home_team'];
  $visitor_team = $_POST['visitor_team'];
  $sql = mysql_query("UPDATE table1 
SET home_team = $home_team, visitor_team = $visitor_team
WHERE active = 1") ;
  $retval = mysql_query( $sql, $conn );
  if(! $retval ){ 
die("<p>Error! Could not update team names. Click return button.</p>");
}
echo "<p>Team names set successfully!</p>";
mysql_close($conn);
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:24:39.323

尝试使用`''`您的查询，

```
$sql = mysql_query("UPDATE table1 SET 
            home_team = '".mysql_real_escape_string($home_team)."', 
            visitor_team = '".mysql_real_escape_string($visitor_team)."'
       WHERE active = '1'") ; 
```

还添加`mysql_real_escape_string()`以防止 SQL 注入..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:36:23.387

      传递给 SQL 语句的每个字符串都必须包含在**''** ; 如果不是，则会导致错误。
      话虽如此，将表单中的内容直接放入数据库是非常、非常、非常、非常（我需要另一个非常）糟糕的。任何人都可以简单地擦除您的数据库；这叫做[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)
      为了保护你的数据库，你可以从这篇关于[PDO的好文章开始](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# jquery - 谷歌地图显示在 jquery 弹出窗口中

> ID：13597797
> 
> 赞同：4
> 
> 时间：2012-11-28T04:22:32.413
> 
> 标签：jquery, jquery-ui, google-maps, jquery-plugins, google-maps-api-3

我使用 jQuery 1.7 我的网站，我需要在灯箱中显示谷歌地图。

例如：[http ://dev.visualdrugs.net/mootools/gmapsoverlay/](http://dev.visualdrugs.net/mootools/gmapsoverlay/)

你能帮我用jQuery做同样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T04:26:48.870

下面是一些关于使用 jQuery Colorbox 执行此操作的方法的说明的链接：

[http://www.primecut.gr/2011/06/colorbox-with-google-maps/](http://www.primecut.gr/2011/06/colorbox-with-google-maps/)

这是一些简单的代码。这需要 jQuery 和[Colorbox 插件](http://www.jacklmoore.com/colorbox/)（JavaScript 和 CSS）。

**HTML**

```
<a class="googleMapPopUp" href="https://maps.google.com.au/maps?q=south+australia" target="_blank">
    View location map
</a>​ 
```

**JavaScript**

```
$('.googleMapPopUp').each(function() {
    var thisPopup = $(this);
    thisPopup.colorbox({
        iframe: true,
        innerWidth: 400,
        innerHeight: 300,
        opacity: 0.7,
        href: thisPopup.attr('href') + '&ie=UTF8&t=h&output=embed'
    });
});​ 
```

**[演示](http://jsfiddle.net/mPBXe/1/)**

# c++ - 将 VS 2010 C++ 项目转换为 VS 2008

> ID：13597798
> 
> 赞同：1
> 
> 时间：2012-11-28T04:22:51.833
> 
> 标签：c++, compilation, game-engine

几天前，id Software 发布了[Doom 3 BFG 版的源代码](https://github.com/id-Software/DOOM-3-BFG/)。这是一个 VS 2010 解决方案，其中包含 C++ 项目。我想编译它。由于我没有太多钱每两年购买一个新的 VS 许可证，所以我使用 VS 2008。一年前，当 D3 代码（也是 VS 2010）发布时，有人为 VS 2008 制作了文件并且他们工作了。我不认为这个人会为这个版本做同样的事情。所以我想，我必须自己做。有没有办法自动将 VS 2010 C++ 项目文件转换为 VS 2008 项目，而无需访问 VS 2010？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:27:51.897

您不能简单地下载[免费](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)的Visual C++ 2010 Express 吗？

# facebook - 按地区定位自动 Facebook 帖子

> ID：13597802
> 
> 赞同：0
> 
> 时间：2012-11-28T04:23:32.537
> 
> 标签：facebook, facebook-graph-api

这个 Facebook 页面显示了我如何手动将 Facebook 帖子定位到某些国家，然后在一个国家/地区内，我可以定位到某些州：

[http://www.facebook.com/help/352402648173466/?q=target+page+post&sid=0u5jWnusm7Q1i7IRk](http://www.facebook.com/help/352402648173466/?q=target+page+post&sid=0u5jWnusm7Q1i7IRk)

我试过了，效果很好。我的问题...

有没有办法可以向提交到[https://graph.facebook.com/MyPageNameHere/feed](https://graph.facebook.com/MyPageNameHere/feed)的自动 Facebook 帖子添加其他参数，以在我们的自动 Facebook 发布系统中创建此类区域定位？

有没有办法通过使用 Facebook 的 API 创建的帖子创建相同的区域限制？除了access_token，消息，图片，链接，名称，标题，描述，来源等之外，我还可以传递另一个参数吗？

谢谢，

*   杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:08:16.450

是的，这不是问题。你想要的是`targeting`参数。[此页面](https://developers.facebook.com/docs/reference/api/page/#posts)上有一些详细信息。

# nuget - NuGet.exe 不打包以点开头的目录

> ID：13597805
> 
> 赞同：10
> 
> 时间：2012-11-28T04:24:11.033
> 
> 标签：nuget

我正在使用 NuGet.exe 打包文件目录，它似乎忽略了任何以点开头的目录。即使我尝试在 nuspec 文件中显式使用“文件”条目，它也不会让我包含该目录或其中的任何文件。

有没有办法覆盖这种行为？

这是我的命令行： NuGet.exe pack ..\build\MyPackage.nuspec -OutputDirectory "\someserver\blah" -basePath "c:\temp\packageStaging" -Version "3.0" -NoPackageAnalysis

NoPackageAnalysis 的原因是我正在制作一个用于 Octopus 部署的非标准包。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T06:48:30.880

您可以使用 nuget.exe 的 -NoDefaultExcludes 选项

更多详细信息：http: [//docs.nuget.org/docs/reference/command-line-reference](http://docs.nuget.org/docs/reference/command-line-reference) NoDefaultExcludes 防止默认排除 NuGet 包文件以及以点开头的文件和文件夹，例如 .svn。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-12T12:50:15.693

我知道这是一个旧线程，但我今天遇到了同样的问题，目录“.well-known”没有添加到 nupkg 文件中。

我通过删除目录名称中的“点”并在 nuspec 文件中添加了一个“目标”来解决它：

```
<file src="well-known\**" target="./.well-known/"/> 
```

# drop-down-menu - 下拉索引更改与 sys.webforms.pagerequestmanagerservererrorexception 500

> ID：13597806
> 
> 赞同：1
> 
> 时间：2012-11-28T04:24:10.777
> 
> 标签：drop-down-menu, delegates, updatepanel, updatepanel-progressbar

我使用了代表。在代表中，我正在使用下拉列表索引更改事件。我将其调用到一个 aspx 页面中。在运行时它出现错误。（Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。从服务器返回的状态代码是：500）。我试图通过使用断点找出错误。每个功能都正常工作。在页面卸载方法之后它得到错误。我尝试了按钮事件而不是下拉索引更改。这是工作。但我想要下拉索引更改事件。我该如何解决这个问题？请告诉我解决方案

# c# - 注销在 monotouch-bindings facebook 示例中无法正常工作

> ID：13597807
> 
> 赞同：0
> 
> 时间：2012-11-28T04:24:12.287
> 
> 标签：c#, facebook, xamarin.ios, monotouch.dialog

我刚刚下载了用于 facebook 集成的 monotouch-bindings 示例，它工作正常，但是单击**注销**按钮以进行另一个用户登录，它没有询问凭据，它需要以前的 **凭据**并直接进入下一个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:02:10.313

请尝试[使用 Facebook Graph API](http://developers.facebook.com/docs/reference/api/)。使用基于 JSON 的 API 非常容易。

有一个有用的 JSON 数据处理库[JSON.Net](http://james.newtonking.com/pages/json-net.aspx)用于请求数据序列化和响应数据反序列化。

作为网络传输，可以使用通用[HttpWebRequest](http://msdn.microsoft.com/ru-ru/library/system.net.httpwebrequest.aspx)。

Graph API + JSON.Net + HttpWebRequest 在 MonoTouch 平台下一起工作就像一个魅力。

# ruby-on-rails - 我可以在带有 AMQP 的 Rails 3 中使用请求/回复 - RPC 模式吗？

> ID：13597808
> 
> 赞同：5
> 
> 时间：2012-11-28T04:24:23.467
> 
> 标签：ruby-on-rails, asynchronous, rabbitmq, amqp

出于与[本讨论](http://permalink.gmane.org/gmane.comp.networking.rabbitmq.general/13397)中类似的原因，我正在尝试使用消息传递代替 REST，以实现从一个 Rails 3 应用程序到另一个应用程序的同步 RPC 调用。这两个应用程序都在精简运行。

“服务器”应用程序有一个`config/initializers/amqp.rb`基于[ruby​​amqp.info 文档](http://rubyamqp.info/articles/patterns_and_use_cases/#requestreply_pattern)中的请求/回复模式的文件：

```
require "amqp"

EventMachine.next_tick do
  connection = AMQP.connect ENV['CLOUDAMQP_URL'] || 'amqp://guest:guest@localhost'
  channel    = AMQP::Channel.new(connection)

  requests_queue = channel.queue("amqpgem.examples.services.time", :exclusive => true, :auto_delete => true)
  requests_queue.subscribe(:ack => true) do |metadata, payload|
    puts "[requests] Got a request #{metadata.message_id}. Sending a reply..."
    channel.default_exchange.publish(Time.now.to_s,
                                     :routing_key    => metadata.reply_to,
                                     :correlation_id => metadata.message_id,
                                     :mandatory      => true)
    metadata.ack
  end

  Signal.trap("INT") { connection.close { EventMachine.stop } }
end 
```

在“客户端”应用程序中，我想在视图中呈现对“服务器”的同步调用的结果。我意识到这有点超出了像 amqp gem 这样的固有异步库的舒适区，但我想知道是否有办法让它工作。这是我的客户`config/initializers/amqp.rb`：

```
require 'amqp'

EventMachine.next_tick do
  AMQP.connection = AMQP.connect 'amqp://guest:guest@localhost'  
  Signal.trap("INT") { AMQP.connection.close { EventMachine.stop } }
end 
```

这是控制器：

```
require "amqp"

class WelcomeController < ApplicationController
  def index    
    puts "[request] Sending a request..."

    WelcomeController.channel.default_exchange.publish("get.time",
      :routing_key => "amqpgem.examples.services.time",
      :message_id  => Kernel.rand(10101010).to_s,
      :reply_to    => WelcomeController.replies_queue.name)

    WelcomeController.replies_queue.subscribe do |metadata, payload|
      puts "[response] Response for #{metadata.correlation_id}: #{payload.inspect}"
      @message = payload.inspect
    end   
  end

  def self.channel
    @channel ||= AMQP::Channel.new(AMQP.connection)
  end

  def self.replies_queue
    @replies_queue ||= channel.queue("reply", :exclusive => true, :auto_delete => true)
  end
end 
```

当我在不同的端口上启动两个应用程序并访问`welcome#index`视图时。 `@message`在视图中为 nil，因为尚未返回结果。结果在视图渲染后几毫秒到达并显示在控制台上：

```
$ thin start
>> Using rack adapter
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop
[request] Sending a request...
[response] Response for 3877031: "2012-11-27 22:04:28 -0600" 
```

这里毫不奇怪：`subscribe`显然不适合同步调用。令人惊讶的是，我在 AMQP gem 源代码或任何在线文档中都找不到同步替代方案。是否有替代方案`subscribe`可以提供我想要的 RPC 行为？鉴于系统的其他部分我想使用合法的异步调用，[兔子 gem](https://github.com/ruby-amqp/bunny)似乎不是适合这项工作的工具。我应该再看看吗？

**编辑以回应 Sam Stokes**

感谢 Sam 提供了 throw :async / async.callback 的指针。我以前从未见过这种技术，而这正是我最初试图通过这个实验学习的东西。`send_response.finish`在 Rails 3 中消失了，但我能够让他的示例至少为一个请求工作，只需稍作改动：

```
render :text => @message
rendered_response = response.prepare! 
```

后续请求失败并显示`!! Unexpected error while processing request: deadlock; recursive locking`. 这可能是 Sam 关于让 ActionController 允许并发请求的评论所得到的，但引用的要点仅适用于 Rails 2。添加`config.allow_concurrency = true`development.rb 可以消除 Rails 3 中的这个错误，但会导致`This queue already has default consumer.`来自 AMQP。

我认为这头牦牛已经刮得很干净了。;-)

虽然很有趣，但这对于简单的 RPC 来说显然是多余的。像这样的[Sinatra 流示例](https://gist.github.com/1476463)似乎更适合客户端与回复交互的用例。Tenderlove 也有[一篇博客文章](http://tenderlovemaking.com/2012/07/30/is-it-live.html)，介绍了即将在 Rails 4 中流式传输事件的方法，该方法可以与 AMQP 一起使用。

正如 Sam 在他对 HTTP 替代方案的讨论中指出的那样，REST / HTTP 对于我的系统中涉及两个 Rails 应用程序的 RPC 部分非常有意义。系统的其他部分涉及到 Clojure 应用程序的更经典的异步事件发布。对于这些，Rails 应用程序只需要以即发即弃的方式发布事件，因此 AMQP 可以在没有回复队列的情况下使用我的原始代码在那里正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:00:42.520

您可以获得您想要的行为 - 让客户端发出一个简单的 HTTP 请求，您的 Web 应用程序会异步响应该请求 - 但您需要更多技巧。您需要使用 Thin 对异步响应的支持：

```
require "amqp"

class WelcomeController < ApplicationController
  def index
    puts "[request] Sending a request..."

    WelcomeController.channel.default_exchange.publish("get.time",
      :routing_key => "amqpgem.examples.services.time",
      :message_id  => Kernel.rand(10101010).to_s,
      :reply_to    => WelcomeController.replies_queue.name)

    WelcomeController.replies_queue.subscribe do |metadata, payload|
      puts "[response] Response for #{metadata.correlation_id}: #{payload.inspect}"
      @message = payload.inspect

      # Trigger Rails response rendering now we have the message.
      # Tested in Rails 2.3; may or may not work in Rails 3.x.
      rendered_response = send_response.finish

      # Pass the response to Thin and make it complete the request.
      # env['async.callback'] expects a Rack-style response triple:
      # [status, headers, body]
      request.env['async.callback'].call(rendered_response)
    end

    # This unwinds the call stack, skipping the normal Rails response
    # rendering, all the way back up to Thin, which catches it and
    # interprets as "I'll give you the response later by calling
    # env['async.callback']".
    throw :async
  end

  def self.channel
    @channel ||= AMQP::Channel.new(AMQP.connection)
  end

  def self.replies_queue
    @replies_queue ||= channel.queue("reply", :exclusive => true, :auto_delete => true)
  end
end 
```

就客户端而言，结果与您的 Web 应用程序在返回响应之前阻塞同步调用无法区分；但是现在您的 Web 应用程序可以同时处理许多此类请求。

## 警告！

Async Rails 是一种高级技术；你需要知道你在做什么。Rails 的某些部分不喜欢突然拆除它们的调用堆栈。将`throw`绕过任何不知道捕获并重新抛出它的 Rack 中间件（[这是一个相当古老的部分解决方案](https://github.com/rkh/async-rack)）。ActiveSupport 的开发模式类重新加载将在 之后重新加载您的应用程序的类`throw`，而无需等待响应，如果您的回调引用已重新加载的类，这可能会导致非常混乱的损坏。您还需要[很好地询问 ActionController](https://github.com/mperham/phat/blob/master/config/initializers/disable_locking.rb)以允许并发请求。

## 请求/响应

您还需要匹配请求和响应。就目前而言，如果请求 1 到达，然后请求 2 在请求 1 得到响应之前到达，则不确定哪个请求将接收响应 1（队列上的消息在订阅队列的消费者之间循环分发）。

您可以通过检查correlation_id（顺便说一下，您必须明确设置-RabbitMQ 不会为您这样做！）并重新排队消息（如果它不是您正在等待的响应）来完成此操作。我的方法是创建一个持久的 Publisher 对象，该对象将跟踪打开的请求，侦听所有响应，并根据correlation_id 查找要调用的适当回调。

## 替代方案：只使用 HTTP

您在这里确实解决了两个不同（而且很棘手！）的问题：说服 Rails/thin 异步处理请求，以及在 AMQP 的发布-订阅模型之上实现请求-响应语义。既然你说这是在两个 Rails 应用程序之间调用，为什么不直接使用 HTTP，它已经具有你需要的请求-响应语义？这样你只需要解决第一个问题。如果您使用非阻塞 HTTP 客户端库，例如[em-http-request](https://github.com/igrigorik/em-http-request) ，您仍然可以获得并发请求处理。

# coronasdk - 如何使用其 ID 删除电晕中的视图？

> ID：13597809
> 
> 赞同：0
> 
> 时间：2012-11-28T04:24:25.017
> 
> 标签：coronasdk

我实际上使用循环创建了多个视图，它是一个按钮和一个文本视图，如何使用 id 删除其中一个？

```
for i=1,#displaymovenames do
    moveButton = widget.newButton {
                default = "closeBox.png",
                over = "openBox.png",
                width = 50,
                height = 50,
                onRelease = startMove,
                id = moveID
                }
            moveButton.x = 50; moveButton.y = boxy

    local deletemove = widget.newButton{
        default = "remove.png",
        over = "removeOver.png",
        width = 30,
        height = 30,
        id = moveID,
        alpha = 0,
        onRelease = deleteSelectedItem
        }
    deletemove.x = _W + 20; deletemove.y = deletey

        t = display.newText(displaymovenames[i], 85, texty, native.systemFont , 13)
        t:setTextColor( 0, 0, 0)
        t.id = moveID

        boxy = boxy + 65
        texty = texty + 65
        deletey = deletey + 65
        moveID = moveID + 1
        moveitemscroll:insert ( moveButton )
        moveitemscroll:insert ( t )
        deletemoveGroup:insert ( deletemove )
end 
```

好吧，基本上这段代码所做的是，当按下 deletemove 按钮时`moveButton`，删除`deletemove`，`t`这是负责删除的函数：

```
deleteSelectedItem = function ( event )
   event.target:removeSelf()
end 
```

如您所见，我只能删除正在按下的视图，那么正在按下的其他视图呢？我怎样才能删除它们？我可以正确使用 id 吗？如果是的话怎么办？

# **编辑**

我只是想做的就是这个。将下面的这些项目视为视图。

```
 ------       -------------       -------
 |image1|     |anotherimage1|     |button1|
  ------       -------------       -------

  ------       -------------       -------
 |image2|     |anotherimage2|     |button2|
  ------       -------------       -------

  ------       -------------       -------
 |image3|     |anotherimage3|     |button3|
  ------       -------------       -------

  ------       -------------       -------
 |image4|     |anotherimage4|     |button4|
  ------       -------------       ------- 
```

何时`button1`按下`button1, image1 and anotherimage1`从视图中移除，依此类推。

如果我只是将它们放在一个组中，我可以做到这一点，问题是按钮已经分配给不同的组。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:36:50.020

我不是 UI 库的粉丝，我可能会使用表格来存储按钮，但我认为你可以这样做：

在 for 循环内：

```
deletemove.moveButton = moveButton
deletemove.t = t 
```

功能：

```
deleteSelectedItem = function ( event )
   event.target.moveButton:removeSelf()
   event.target.t:removeSelf()
   event.target:removeSelf()
   -- remove listeners and nil the objects to avoid memory leaks.
end 
```

希望这有效

# java - 在java中使用jar中的html文件

> ID：13597811
> 
> 赞同：1
> 
> 时间：2012-11-28T04:24:32.733
> 
> 标签：java, swing, executable-jar

我想将 html 文件添加到 jar 文件并通过 windows 应用程序项目中的 jar 访问它们我如何访问它们我使用以下代码。

```
 try{
      File f1= new File(getClass.getResource("/path is the src folder/));
     } 
```

但它显示没有找到合适的构造函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:30:19.980

`File`不会`URL`作为参考。像这样的嵌入式资源实际上不是文件，它们是`InputStream`资源的 s。

根据您向他们展示的方式，将决定您需要做什么。

例如，通过它的方法`JEditorPane`获取一个`URL``setPage`

**更新**

您应该能够使用类似的东西将页面直接加载到编辑器窗格中......

```
// editor pane is a reference to a JEditorPane
editorPane.setPage(getClass.getResource("/path is the src folder/")); 
```

# python - PyDev 不能再调试了

> ID：13597812
> 
> 赞同：4
> 
> 时间：2012-11-28T04:24:36.627
> 
> 标签：python, eclipse, pydev

我正在使用 eclipse 4.2.1 和 pydev 2.7.1（以前是 2.6.0）

一切工作正常，直到调试器突然停止工作 - 它打印“pydev debugger：starting”，然后根本不运行程序，只是挂起。

根据我在其他问题报告中找到的一些信息，我更改了一些调试常量（DEBUG_TRACE_LEVEL = 3 和 DEBUG_TRACE_BREAKPOINTS = 3），现在得到了这个输出：

```
pydev debugger: starting
('Executing file ', '/path/to/my/program.py')
('arguments:', "['/path/to/my/program.py']")
('Connecting to ', '127.0.0.1', ':', '40972')
('Connected.',)
('received command ', '501\t1\t1.1')
sending cmd: CMD_VERSION 501    1   1.1

sending cmd: CMD_THREAD_CREATE 103  2   <xml><thread name="pydevd.reader" id="-1"/></xml>

sending cmd: CMD_THREAD_CREATE 103  4   <xml><thread name="pydevd.writer" id="-1"/></xml> 
```

之后什么也没有发生。

**编辑：**我创建了一个新的工作区，pydev 似乎在那里工作。目前正在尝试找出导致问题的元数据文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:05:43.997

我发现从工作区中删除 .metadata/.plugins/org.eclipse.core.resources 解决了这个问题。但它也删除了所有项目，所以我不得不重新导入它们。

# google-apps-script - 如何将可见/不可见下拉列表中的项目正确添加到 flextable？

> ID：13597818
> 
> 赞同：0
> 
> 时间：2012-11-28T04:25:20.047
> 
> 标签：google-apps-script

将“blocksSizeList”和“briquettesSizeList”中的项目添加到 flextable 时遇到问题。例如，它会忽略“blocksSizeList”，即使隐藏也只会添加“briquettesSizeList”中的项目。如何解决这个问题？

```
function doGet(e) {
      var app = UiApp.createApplication();

     //Create horizontal product + other panel
      var productOtherPanel = app.createHorizontalPanel().setId('productOtherPanel')
      .setStyleAttribute('position','relative').setStyleAttribute('left','0%');

      //Create horizontal Product Panel  
      var productPanel = app.createHorizontalPanel().setId('productPanel').setStyleAttribute('position','relative')
      .setStyleAttribute('left','0%').setVisible(true);
      //Create listBox
      var productList = app.createListBox().setName("productList").setId('productList');
      //Add items to listBox
      productList.addItem("8:1 Compressed Blocks");
      productList.addItem("8:1 Compressed Briquettes");

      var handlerC = app.createServerHandler("panelHandler");
      productList.addChangeHandler(handlerC);

      //Create horizontal Compressed Blocks panel
      var blocksPanel = app.createHorizontalPanel().setId('blocksPanel')
      .setStyleAttribute('position','relative').setStyleAttribute('left','0%').setVisible(true);
      //Create Compressed Blocks Size List
      var blocksSizeList = app.createListBox().setName('blocksSizeList').setId('blocksSizeList');
      //addItem fills the Compressed Blocks Size List
      blocksSizeList.addItem("5kg");
      blocksSizeList.addItem("20kg");

      //Create horizontal Briquettes panel
      var briquettesPanel = app.createHorizontalPanel().setId('briquettesPanel')
      .setStyleAttribute('position','relative').setStyleAttribute('left','0%').setVisible(false);
      //Create Briquettes Size List
      var briquettesSizeList = app.createListBox().setName('briquettesSizeList').setId('briquettesSizeList');
      //addItem fills the Briquettes Size List
      briquettesSizeList.addItem("250g");
      briquettesSizeList.addItem("650g");

      //Create hidden app      
      var hidden = app.createHidden().setName('hidden').setId('hidden').setValue('1')
      //Create button handler
      var handlerB = app.createServerHandler("buttonHandler");
      // pass the listbox into the handler function as a parameter and the hidden widget as well
      handlerB.addCallbackElement(productList).addCallbackElement(hidden);
      handlerB.addCallbackElement(blocksSizeList).addCallbackElement(hidden);
      handlerB.addCallbackElement(briquettesSizeList).addCallbackElement(hidden);

      //Create flextable 
      var quotesFlexTable = app.createFlexTable().setId("quotesFlexTable")
      .setStyleAttribute('position','relative').setStyleAttribute('left','0%');

      //Create flex table style attributes
        quotesFlexTable.setStyleAttribute("border-style", "solid");
        quotesFlexTable.setStyleAttribute("border-width", "1px");  
        quotesFlexTable.setCellPadding(5);

      //Create flex table headers  
      quotesFlexTable.setWidget(0, 0, app.createLabel("Product Type")).setStyleAttribute("color", "blue");
      quotesFlexTable.setWidget(0, 1, app.createLabel("Size")); 

      var button = app.createButton("+", handlerB);

      // add all widgets to the app

      //Add all widgets to the app

      app.add(quotesFlexTable).add(hidden);
      app.add(productOtherPanel);
      productOtherPanel.add(productPanel);
      productPanel.add(productList);
      productOtherPanel.add(blocksPanel);
      blocksPanel.add(blocksSizeList);
      productOtherPanel.add(briquettesPanel);
      briquettesPanel.add(briquettesSizeList);
      productOtherPanel.add(button);

      return app;
    }

    function buttonHandler(e) {
      var app = UiApp.getActiveApplication();
      // get the position (is a string)
      var pos = e.parameter.hidden;
      // initial condition, hidden widget is empty
      // convert to number
       pos=Number(pos);
      var quotesFlexTable = app.getElementById("quotesFlexTable");
      // add the new item at the right place
      quotesFlexTable.insertRow(pos).insertCell(pos, 0).setText(pos, 0, e.parameter.productList)
      .setText(pos, 1, e.parameter.blocksSizeList).setText(pos, 1, e.parameter.briquettesSizeList);
      // increment position
      ++pos;
      // save value
      app.getElementById('hidden').setValue(pos);
      // update app
      return app;
      }

    function panelHandler(event) {
      var app = UiApp.getActiveApplication();
      if (event.parameter.productList == "8:1 Compressed Blocks") {
        app.getElementById('blocksPanel').setVisible(true);
        app.getElementById('briquettesPanel').setVisible(false);
      }
      else if (event.parameter.productList == "8:1 Compressed Briquettes") {
        app.getElementById('blocksPanel').setVisible(false);
        app.getElementById('briquettesPanel').setVisible(true);
      }
      return app;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:57:32.947

您在 buttonHandler 函数中设置了两次弹性表格单元格。第二次总是覆盖第一次，所以你只会看到添加的煤球大小。将其更改为以下内容：

```
if (e.parameter.productList == "8:1 Compressed Blocks") {
  quotesFlexTable.insertRow(pos).insertCell(pos, 0).setText(pos, 0, e.parameter.productList).setText(pos, 1, e.parameter.blocksSizeList);
    }
else {
  quotesFlexTable.insertRow(pos).insertCell(pos, 0).setText(pos, 0, e.parameter.productList).setText(pos, 1, e.parameter.briquettesSizeList);
} 
```

# java - Jackson 2.0 Afterburner 缺少节点的问题

> ID：13597819
> 
> 赞同：1
> 
> 时间：2012-11-28T04:25:24.620
> 
> 标签：java, json, jackson, deserialization

我在连接 Jackson 的 Afterburner 模块时遇到了一些问题。下面的测试用例可以最好地总结这个问题。为冗长的例子道歉；对于这个练习，我尽量保持简短。当您注释掉注册模块的行并在您将其保留时失败时，测试有效。

我将 Jackson 2.1.1 用于注释、核心和加力。

我会很感激你可能有的任何想法。

谢谢！

帽子

```
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.module.afterburner.AfterburnerModule;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertNull;

public class AfterburnerTest {

    @Test
    public void mapOccupancyNoMaxAdults() throws IOException {

        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.registerModule(new AfterburnerModule());

        final JsonNode node = objectMapper.readTree(
                "{" +
                    "\"max\":3," +
                    "\"adults\": {" +
                        "\"min\":1" +
                    "}," +
                    "\"children\":{" +
                        "\"min\":1," +
                        "\"max\":2" +
                    "}" +
                "}");

        final Occupancy occupancy = objectMapper.reader(Occupancy.class).readValue(node);

        assertNull(occupancy.getAdults().getMax());
        assertNotNull(occupancy.getChildren().getMax());

    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static class Occupancy {

        private Integer max;
        private Guests adults;
        private Guests children;

        public Occupancy() {
        }

        public Occupancy(Integer max, Guests adults, Guests children) {
            this.max = max;
            this.adults = adults;
            this.children = children;
        }

        public Integer getMax() {
            return max;
        }

        public Guests getAdults() {
            return adults;
        }

        public Guests getChildren() {
            return children;
        }

    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static class Guests {

        private Integer min;
        private Integer max;

        public Guests() {
        }

        public Guests(Integer min, Integer max) {
            this.min = min;
            this.max = max;
        }

        public Integer getMin() {
            return min;
        }

        public Integer getMax() {
            return max;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:36:43.490

我可以尝试看看你得到了什么错误，但值得注意的一点是 Afterburner 通常不会对基于树模型的访问速度有太大帮助。为什么？因为那些不使用基于反射的 getter/setter 访问，所以没有太多需要优化的地方。

在您的示例代码中，第二部分（从树模型转换为 POJO）应该有一些加速，因为它确实通过常规访问。只是不是第一部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T12:32:26.830

我有一个类似的问题，我这样解决：

> 新的 AfterburnerModule().setUseOptimizedBeanDeserializer(false)

问题是，也许正因为如此，我看不到 Afterburner 的性能改进......

# html - html 表单作为具有上下文的不同页面中的 iFrame

> ID：13597831
> 
> 赞同：0
> 
> 时间：2012-11-28T04:26:47.877
> 
> 标签：html, forms, mobile, iframe

我正在制作一个事件注册表单，我希望使用 iframe 和 url id（上下文）将其加载到所有不同类型的事件页面中。id 将在表单之前显示相关图像，然后从正在工作的下拉菜单中选择适当的事件。

它适用于桌面和移动设备，使用 html、css 和 javascript，然后在提交时运行 php 脚本。

iFrame 是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:31:01.157

使用来自[jquery ui的](http://jqueryui.com/)[模态](http://jqueryui.com/dialog/#modal-form)。这是最好的选择。与 iframe 相比，这也更安全

# .net - 关于带主题\generic.xaml 的资源查找系统的问题

> ID：13597834
> 
> 赞同：3
> 
> 时间：2012-11-28T04:27:12.940
> 
> 标签：.net, wpf, xaml, generic.xaml

我注意到 generic.xaml 中定义的资源不能简单地通过

```
this.TryFindResource("someKey"); 
```

相反，它们只能通过以下方式引用

```
this.TryFindResource(new ComponentResourceKey(typeof(SomeTypeInAssembly), "someKey")) 
```

但是，假设我在另一个程序集中有一个自定义控件，该控件在 generic.xaml 中具有默认样式......这是如何在我的 WPF 应用程序中工作的，而无需传递 ComponentResourceKey？

```
this.TryFindResource(typeof(CustomControl)); 
```

它如何知道要查找哪个 generic.xaml，尤其是当我在多个引用的控件库中有多个主题\generic.xaml 资源字典时？

无论如何要获取应用程序中引用的所有程序集中的所有主题词典的集合吗？（例如，您的应用程序引用了多个控件库，每个控件库都有自己的 generic.xaml）

WPF 是否甚至在任何时间点都知道应用程序范围内所有主题/generic.xaml 字典的存在？我得到的印象是，当您提供 ComponentResourceKey 时，当前 WPF 应用程序只会“发现”主题字典，这会在 WPF 中提供查找位置的线索（但是为什么 TryFindResource(typeof(CustomControl)) 起作用？）

# ruby-on-rails - Rails] 在 Heroku 上新提交后删除的图像

> ID：13597837
> 
> 赞同：2
> 
> 时间：2012-11-28T04:27:27.543
> 
> 标签：ruby-on-rails, image, heroku, carrierwave

我正在使用 Carrierwave 上传图片，我的应用程序现在在 Heroku 上。除非我向 heroku 推送新的提交，否则图像会成功上传。当新的提交进入时，我在推送之前上传的图像似乎被删除了。有谁知道背后的原因以及如何解决这个问题？

**更新：** 问题变成了，*在没有像 Amazon EC3 这样的存储服务器的 Heroku 上使用carrierwave*。Heroku 不会将文件保存在默认情况下carrierwave 上传的公共文件夹中。

**应用程序/上传程序/image_uploader.rb：**

```
 def store_dir
   "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end 
```

您需要将其更改为 tmp 文件夹中的某个位置，以便在每次提交后保留您的图像文件。我试图将其更改为

```
"#{Rails.root}/tmp/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}" 
```

但它不起作用。我检查了我的本地环境，图像成功存储在正确的位置。所以我想如果我只是将路线设置到正确的位置，这可能会奏效。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T04:22:55.593

由于 Heroku 不允许存储静态文件（除非它与应用程序本身相关联），因此您应该`Carrierwave`使用`fog`. 每次用户上传文件时，该文件都会自动上传到您的 S3 存储而不是 Heroku。

# r - 是否可以在不移动光标的情况下在 RStudio 中运行当前行或选择？

> ID：13597843
> 
> 赞同：8
> 
> 时间：2012-11-28T04:28:11.153
> 
> 标签：r, rstudio

**更新（2013 年 4 月）：**根据[下面的答案](https://stackoverflow.com/a/15848337/180892)，RStudio 不再在选择时跳转光标。

* * *

我正在运行 RStudio 0.97.168。

我喜欢像控制台一样使用 RStudio 中的脚本编辑器。因此，我运行了一行代码，然后稍微编辑它并重新运行它。我还经常通过选择一些代码并运行选择然后逐渐改变选择来探索对象。目前 RStudio 总是在运行一行代码后移动光标。光标可以移动到各种地方。通常，光标会移动到 R 代码的下一行，但根据上下文，它可能会移动到代码块的末尾或下一行。不得不不断地将光标移回我想要的位置真是令人沮丧。

虽然我经常欣赏默认的光标移动行为，但我希望可以选择在不移动光标的情况下运行选择或当前行。我已将此作为[对 RStudio 支持的建议](http://support.rstudio.org/help/discussions/suggestions/1762-option-to-retain-selection-after-running-selected-r-code)。

我希望能够使用像“Cmd+Alt+Enter”这样的快捷键来运行当前行或选择，并且不会在脚本编辑器中移动光标。我意识到目前不支持此功能，但**我想知道是否有一些创造性的技巧可以使光标在运行命令甚至补丁或某种外部宏后无法移动。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-03-16T01:13:54.263

对于 2020 年来到这里的任何人：

*   **Ctrl（或 Cmd）+ Enter：**将运行当前行并跳转到下一行。如果选择了代码部分，则运行所选代码而无需进一步跳转。
*   **Alt + Enter：** - 将运行当前代码行而不将光标移动到下一行，如果您想多次运行它很有用。

（[来源](https://appsilon.com/r-studio-shortcuts-and-tips/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:52:40.390

对于这种灵活性，我建议您使用编辑器`Sublime Text 2`，添加 Will Bond 的软件包安装程序，然后安装该`SublimeREPL`软件包，这将允许您同时在 ST2 中使用 R 解释器（或 BASH 提示符、Python / Ruby / 任何解释器）如果你希望）。

然后，您可以在您的代码和解释器之间切换，而无需将手指从键盘上移开*，并且*每次您想要切换回来时，您的光标都将位于同一点。

Sublime Text 还允许您编写自定义键绑定来自动执行此任务。

我不建议在为 R 编码时使用 Sublime Text 2 足够高。如果您喜欢使用绘图窗格，您甚至可以非常轻松地将文件直接从 ST2 传递到 RStudio（使用 ST2 中的包很容易做到`SidebarEnhancements`）。

RStudio 在很多方面都很棒——尤其是现在使用 Knitr、构建等。但是带有 R REPL 的 ST2 在一般代码编写/编辑方面比 RStudio 强大许多数量级。

抱歉，它不是 RStudio 特定的，但它是一个很好的解决方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:41:13.853

[我使用每日构建](http://www.rstudio.org/download/daily/desktop/)部分更新到 RStudio 的 0.98.83 版本。

似乎在最近版本的 RStudio 中，当从脚本窗口中的选择中运行代码时，光标不再跳跃。

这真是个好消息。

# python - 如何从 django 中的 form_valid 函数重定向到表单无效

> ID：13597856
> 
> 赞同：4
> 
> 时间：2012-11-28T04:30:23.377
> 
> 标签：python, django

我正在执行一些更多的验证，主要形式已经过验证。我正在使用基于类的视图

```
def form_valid(self, request, *args, **kwargs):
    some custom logic
    if(false)
    Here i want to return to form invalid page with my custom message 
```

我正在处理 form_valid 中的文件，这有很多步骤，我需要检查更多验证。所以我不想将所有这些逻辑移到另一个函数中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T04:32:09.853

您不应该在`form_valid`. 以表格形式进行，无论是 in`Form.clean`还是`Form.clean_FOO`。请参阅[有关表单验证的 Django 文档](https://docs.djangoproject.com/en/2.1/ref/forms/validation/)。

如果您坚持破坏您的代码库，请尝试以下操作：

```
def form_valid(self, request, *args, **kwargs):
    is_actually_valid = some_custom_logic()
    if not is_actually_valid:
        return self.form_invalid(request, *args, **kwargs) 
```

# java - pdf文件传输

> ID：13597858
> 
> 赞同：0
> 
> 时间：2012-11-28T04:31:01.750
> 
> 标签：java, file, udp, file-transfer

`txt file`我已经实现了将在 java 中使用**udp**套接字传输任何内容的程序。我`printwriter`用来写作和阅读。但是使用它我无法传输除 txt 以外的任何文件（比如我想传输 pdf）。在这种情况下应该怎么做。我正在使用以下函数进行文件写入。

```
Output_File_Write = new PrintWriter("dummy.txt");
Output_File_Write.print(new String(p.getData())); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:42:01.310

Writers / PrintWriters are for writing text files. They take (Unicode-based) character data and encode it using the default character encoding (or a specified one), and write that to the file.

A PDF document (as you get it from the network) is in a binary format, so you need to use a FileOutputStream to write the file.

* * *

It is also a little bit concerning that you are attempting to transfer documents using UDP. UDP provides no guarantees that the datagrams sent will all arrive, or that they will arrive in the same order as they were sent. Unless you can always fit the entire document into a single datagram, you will have to do a significant amount of work to detect that datagrams have been dropped or have arrived in the wrong order ... and take remedial action.

Using TCP would be far simpler.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T04:41:18.223

AFAIK `PrintWriter` is meant to be used with Text. Quote from [doc](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)

> Prints formatted representations of objects to a text-output stream. This class implements all of the print methods found in PrintStream. It does not contain methods for writing raw bytes, for which a program should use unencoded byte streams.

To be able to send binary data you would need to use apt API for it, for example `PrintStream`

# eclipse - Eclipse 工作区在启动时崩溃

> ID：13597862
> 
> 赞同：19
> 
> 时间：2012-11-28T04:31:36.107
> 
> 标签：eclipse, crash, startup, workbench

我正在使用 Spring Tool Suite(STS) 3.0.0 版本（eclipse.buildId=3.0.0.201208091018-RELEASE-e42）。它运行了几个月，但最近我的主工作区在闪屏上崩溃，出现错误，如本文最后一部分所示。

我已经尝试过“STS.exe -clean”并将安装（通过新工作台）恢复到早期配置..但似乎没有任何效果。

我把它作为一个单一的工具来驱动（即几乎所有与开发相关的任务，甚至像连接到服务器、数据库），所以这非常令人沮丧:-(。

任何帮助将不胜感激。

```
 !ENTRY org.eclipse.ui.workbench 4 2 2012-11-28 08:56:53.195
            !MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
            !STACK 1
            org.eclipse.core.runtime.CoreException: Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:186)
                at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
                at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
                at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
                at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
                at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
                at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            Caused by: java.lang.NullPointerException
                at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
                at java.lang.Class.newInstance0(Class.java:372)
                at java.lang.Class.newInstance(Class.java:325)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
                ... 11 more
            !SUBENTRY 1 org.eclipse.equinox.registry 4 1 2012-11-28 08:56:53.195
            !MESSAGE Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
            !STACK 0
            java.lang.NullPointerException
                at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
                at java.lang.Class.newInstance0(Class.java:372)
                at java.lang.Class.newInstance(Class.java:325)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
                at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
                at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
                at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
                at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
                at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
                at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            !SUBENTRY 1 org.eclipse.equinox.registry 4 1 2012-11-28 08:56:53.196
            !MESSAGE Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
            !STACK 0
            java.lang.NullPointerException
                at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
                at java.lang.Class.newInstance0(Class.java:372)
                at java.lang.Class.newInstance(Class.java:325)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
                at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
                at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
                at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
                at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
                at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
                at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

            !ENTRY org.eclipse.ui 4 4 2012-11-28 08:56:53.210
            !MESSAGE Unhandled Exception

            !ENTRY org.eclipse.equinox.p2.ui.sdk.scheduler 4 0 2012-11-28 08:56:53.213
            !MESSAGE Unable to execute early startup code for an extension
            !STACK 1
            org.eclipse.core.runtime.CoreException: Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:186)
                at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
                at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
                at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
                at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
                at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
                at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            Caused by: java.lang.NullPointerException
                at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
                at java.lang.Class.newInstance0(Class.java:372)
                at java.lang.Class.newInstance(Class.java:325)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
                ... 11 more
            !SUBENTRY 1 org.eclipse.equinox.registry 4 1 2012-11-28 08:56:53.213
            !MESSAGE Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
            !STACK 0
            java.lang.NullPointerException
                at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
                at java.lang.Class.newInstance0(Class.java:372)
                at java.lang.Class.newInstance(Class.java:325)
                at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
                at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
                at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
                at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
                at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
                at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
                at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

            !ENTRY org.eclipse.core.runtime 4 2 2012-11-28 08:56:53.250
            !MESSAGE Problems encountered starting up plug-in: "org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.wst.web_1.1.600.v201204190200 [797]".
            !STACK 0
            org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.wst.web_1.1.600.v201204190200 [797]
                at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:315)
                at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
                at org.eclipse.core.internal.runtime.InternalPlatform.start(InternalPlatform.java:923)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:360)
                at org.eclipse.core.internal.plugins.PluginDescriptor.getPlugin(PluginDescriptor.java:340)
                at org.eclipse.core.runtime.Platform.getPlugin(Platform.java:738)
                at org.eclipse.core.internal.preferences.legacy.InitLegacyPreferences.init(InitLegacyPreferences.java:43)
                at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.applyRuntimeDefaults(PreferenceServiceRegistryHelper.java:147)
                at org.eclipse.core.internal.preferences.PreferencesService.applyRuntimeDefaults(PreferencesService.java:368)
                at org.eclipse.core.internal.preferences.DefaultPreferences.applyRuntimeDefaults(DefaultPreferences.java:166)
                at org.eclipse.core.internal.preferences.DefaultPreferences.load(DefaultPreferences.java:237)
                at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:410)
                at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:663)
                at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:805)
                at org.eclipse.core.internal.preferences.PreferencesService$5.run(PreferencesService.java:623)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.core.internal.preferences.PreferencesService.getNodes(PreferencesService.java:607)
                at org.eclipse.core.internal.preferences.PreferencesService.getString(PreferencesService.java:676)
                at org.eclipse.wst.project.facet.ProductManager.getProperty(ProductManager.java:67)
                at org.eclipse.wst.project.facet.ProductManager.shouldUseViewerSyncForWebservices(ProductManager.java:127)
                at org.eclipse.jst.j2ee.internal.webservice.startup.WebserviceListener.earlyStartup(WebserviceListener.java:79)
                at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.wst.web_1.1.600.v201204190200 [797]
                ... 26 more
            Root exception:
            org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.wst.web_1.1.600.v201204190200 [797]
                at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:315)
                at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
                at org.eclipse.core.internal.runtime.InternalPlatform.start(InternalPlatform.java:923)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:360)
                at org.eclipse.core.internal.plugins.PluginDescriptor.getPlugin(PluginDescriptor.java:340)
                at org.eclipse.core.runtime.Platform.getPlugin(Platform.java:738)
                at org.eclipse.core.internal.preferences.legacy.InitLegacyPreferences.init(InitLegacyPreferences.java:43)
                at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.applyRuntimeDefaults(PreferenceServiceRegistryHelper.java:147)
                at org.eclipse.core.internal.preferences.PreferencesService.applyRuntimeDefaults(PreferencesService.java:368)
                at org.eclipse.core.internal.preferences.DefaultPreferences.applyRuntimeDefaults(DefaultPreferences.java:166)
                at org.eclipse.core.internal.preferences.DefaultPreferences.load(DefaultPreferences.java:237)
                at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:410)
                at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:663)
                at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:805)
                at org.eclipse.core.internal.preferences.PreferencesService$5.run(PreferencesService.java:623)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.core.internal.preferences.PreferencesService.getNodes(PreferencesService.java:607)
                at org.eclipse.core.internal.preferences.PreferencesService.getString(PreferencesService.java:676)
                at org.eclipse.wst.project.facet.ProductManager.getProperty(ProductManager.java:67)
                at org.eclipse.wst.project.facet.ProductManager.shouldUseViewerSyncForWebservices(ProductManager.java:127)
                at org.eclipse.jst.j2ee.internal.webservice.startup.WebserviceListener.earlyStartup(WebserviceListener.java:79)
                at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

            !ENTRY org.eclipse.core.runtime 4 2 2012-11-28 08:56:53.258
            !MESSAGE Problems encountered starting up plug-in: "org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]".
            !STACK 0
            org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:315)
                at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
                at org.eclipse.core.internal.runtime.InternalPlatform.start(InternalPlatform.java:923)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:360)
                at org.eclipse.core.internal.plugins.PluginDescriptor.getPlugin(PluginDescriptor.java:340)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.lang.reflect.Method.invoke(Method.java:601)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getPluginForCompatibility(EarlyStartupRunnable.java:149)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:113)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                ... 15 more
            Root exception:
            org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:315)
                at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
                at org.eclipse.core.internal.runtime.InternalPlatform.start(InternalPlatform.java:923)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:360)
                at org.eclipse.core.internal.plugins.PluginDescriptor.getPlugin(PluginDescriptor.java:340)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.lang.reflect.Method.invoke(Method.java:601)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getPluginForCompatibility(EarlyStartupRunnable.java:149)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:113)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

            !ENTRY org.eclipse.ui 4 4 2012-11-28 08:56:53.261
            !MESSAGE Unhandled Exception

            !ENTRY org.eclipse.jst.ws.jaxws.utils 4 0 2012-11-28 08:56:53.263
            !MESSAGE Unable to execute early startup code for an extension
            !STACK 0
            java.lang.reflect.InvocationTargetException
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.lang.reflect.Method.invoke(Method.java:601)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getPluginForCompatibility(EarlyStartupRunnable.java:149)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:113)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            Caused by: org.eclipse.core.runtime.CoreException: Problems encountered starting up plug-in: "org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]".
                at org.eclipse.core.internal.plugins.PluginDescriptor.throwException(PluginDescriptor.java:296)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:362)
                at org.eclipse.core.internal.plugins.PluginDescriptor.getPlugin(PluginDescriptor.java:340)
                ... 10 more
            Caused by: org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:315)
                at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
                at org.eclipse.core.internal.runtime.InternalPlatform.start(InternalPlatform.java:923)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:360)
                ... 11 more
            Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                ... 15 more
            Root exception:
            org.eclipse.core.runtime.CoreException: Problems encountered starting up plug-in: "org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]".
                at org.eclipse.core.internal.plugins.PluginDescriptor.throwException(PluginDescriptor.java:296)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:362)
                at org.eclipse.core.internal.plugins.PluginDescriptor.getPlugin(PluginDescriptor.java:340)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.lang.reflect.Method.invoke(Method.java:601)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getPluginForCompatibility(EarlyStartupRunnable.java:149)
                at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:113)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
            Caused by: org.osgi.framework.BundleException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:315)
                at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
                at org.eclipse.core.internal.runtime.InternalPlatform.start(InternalPlatform.java:923)
                at org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:360)
                ... 11 more
            Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException: The bundle's start level is not met.  Cannot transient start the bundle: org.eclipse.jst.ws.jaxws.utils_1.0.200.v201201032002 [553]
                ... 15 more

            !ENTRY org.eclipse.ui 4 4 2012-11-28 08:56:53.266
            !MESSAGE Bad extension specification

            !ENTRY org.eclipse.jst.ws.jaxws.utils 4 0 2012-11-28 08:56:53.268
            !MESSAGE startup class must implement org.eclipse.ui.IStartup

            !ENTRY org.eclipse.ui.workbench 4 2 2012-11-28 08:56:53.422
            !MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
            !STACK 0
            java.lang.NullPointerException
                at org.springframework.ide.eclipse.maven.internal.legacyconversion.LegacyProjectChecker.earlyStartup(LegacyProjectChecker.java:36)
                at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)
                at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
                at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
                at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

            !ENTRY org.eclipse.ui 4 4 2012-11-28 08:56:53.424
            !MESSAGE Unhandled Exception 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-05-29T11:44:41.317

我遇到了同样的问题。我按照这些步骤，它工作正常，

1.  转到您的工作区，例如 C:\Workspace

2.  然后从您的工作区打开 .metadata.plugins 文件夹。

3.  删除以下2个文件夹，

    *   org.eclipse.e4.workbench
    *   org.eclipse.equinox.p2.ui.sdk

Eclipse 应该在此之后启动。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-18T22:00:25.620

`workspace\.metadata\.plugins\org.eclipse.e4.workbench`通过消除目录来解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-05T14:57:03.787

在使用 Luna 打开 Kepler 工作区然后切换回 Kepler 后，我遇到了同样的问题。似乎 Luna 添加了一些开普勒意想不到的数据。

我不得不删除 .metadata 文件夹并再次配置工作区。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-14T13:36:59.230

对我来说，唯一的解决方案是在**`eclipse.ini`**.

该文件位于Eclipse 安装的**根文件夹中。**

* * *

在该`-vmargs`行之前添加以下内容：

> -vm
> 
> C:\Program Files\Java\jre7\bin\javaw.exe

例子：

> -vm
> 
> C:\Program Files\Java\jdk1.8.0_241\bin\javaw.exe
> 
> -vmargs

* * *

### 指定 JVM

最推荐使用的选项之一是为 Eclipse 指定一个特定的 JVM 来运行。这样做可以确保您绝对确定 Eclipse 将在哪个 JVM 中运行，并使您免受系统更改的影响，这些更改可能会改变您系统的“默认”JVM。许多用户被绊倒了，因为他们认为他们知道默认情况下会使用什么 JVM，但他们认为错了。`eclipse.ini`让你确定。

以下示例`eclipse.ini`演示了 -vm 选项的正确用法。

注意选项的格式`-vm`- 准确很重要：

*   `-vm`选项及其值（路径）必须位于不同的行上。
*   该值必须是 Java 可执行文件的完整绝对或相对路径，而不仅仅是 Java 主目录。
*   该`-vm`选项必须出现在其他特定于 Eclipse 的选项（例如`-product,` `--launcher`.* 等）之后，但在该`-vmargs`选项之前，因为之后`-vmargs`的所有内容都直接传递给 JVM。
*   对于 32 位 Eclipse 可执行文件（`eclipse.exe`在 Windows 上），必须使用 32 位 JVM，对于 64 位 Eclipse 可执行文件，必须使用 64 位 JVM。

* * *

> ### 重要提示：32 位 Eclipse 不适用于 64 位 JVM

* * *

### 参考：

*   [https://wiki.eclipse.org/Eclipse.ini](https://wiki.eclipse.org/Eclipse.ini)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-16T20:35:55.473

当我遇到这个问题时，我所做的是删除崩溃工作区的 .metadata 文件夹中的 .lock 。

作为一个魅力工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-12T11:11:02.870

通过删除 workspace.metadata.plugins 文件夹中的 org.eclipse.e4.workbench 删除了错误... :)

# java - 如何在 Android 中将 Drawable 文件夹中的图像存储到 SDCard？

> ID：13597863
> 
> 赞同：1
> 
> 时间：2012-11-28T04:31:49.103
> 
> 标签：java, android, android-layout

我想将图像从 Drawable 文件夹存储到 Android 中的 SDCard。我尝试了很多，但找不到解决方案。请有人帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:32:59.943

这些drawable文件夹中的图片可以通过BitmapFactory访问，你可以将位图保存为PNG或JPG。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    File sd = Environment.getExternalStorageDirectory();
    String fileName = "test.png";
    File dest = new File(sd, fileName);
    try {
        FileOutputStream out;
        out = new FileOutputStream(dest);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
        out.flush();
        out.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

对于其他类型的图像，我认为将它们放入 assets 文件夹是一种更好的方法。

# ember.js - 什么是 Ember RunLoop，它是如何工作的？

> ID：13597869
> 
> 赞同：96
> 
> 时间：2012-11-28T04:32:36.297
> 
> 标签：ember.js

我试图了解 Ember RunLoop 的工作原理以及它的运行原理。我查看[了文档](http://emberjs.com/api/classes/Ember.run.html)，但仍然有很多问题。我有兴趣更好地了解 RunLoop 的工作原理，以便我可以在其名称空间中选择适当的方法，当我不得不推迟执行某些代码时。

*   Ember RunLoop 何时开始。它是否依赖于路由器或视图或控制器或其他东西？
*   大约需要多长时间（我知道这很愚蠢，并且依赖于许多事情，但我正在寻找一个一般的想法，或者如果运行循环可能需要最短或最长的时间）
*   RunLoop 是一直在执行，还是只是表示从执行开始到结束的一段时间，可能有一段时间不运行。
*   如果一个视图是从一个 RunLoop 中创建的，是否保证在循环结束时它的所有内容都会进入 DOM？

如果这些是非常基本的问题，请原谅我，我认为理解这些将有助于像我这样的菜鸟更好地使用 Ember。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-01-12T18:07:52.030

**2013 年 10 月 9 日更新：查看运行循环的交互式可视化：[https :](https://machty.s3.amazonaws.com/ember-run-loop-visual/index.html) **//machty.s3.amazonaws.com/ember-run-loop-visual/index.html****

 ****2013 年 5 月 9 日更新：以下**所有基本概念仍然是最新的，但截至[本次提交](https://github.com/emberjs/ember.js/commit/a8b6e3042244af1dd315e94c9349722450bca301)，Ember Run Loop 实现已拆分为一个名为[backburner.js](https://github.com/ebryn/backburner.js)的单独库，API 差异很小。

首先，阅读这些：

[http://blog.sproutcore.com/the-run-loop-part-1/](http://blog.sproutcore.com/the-run-loop-part-1/)

[http://blog.sproutcore.com/the-run-loop-part-2/](http://blog.sproutcore.com/the-run-loop-part-2/)

它们对 Ember 不是 100% 准确，但 RunLoop 背后的核心概念和动机仍然普遍适用于 Ember；只有一些实现细节不同。但是，关于你的问题：

### Ember RunLoop 何时开始。它是否依赖于路由器或视图或控制器或其他东西？

所有基本的用户事件（例如键盘事件、鼠标事件等）都会启动运行循环。这保证了捕获的（鼠标/键盘/计时器/等）事件对绑定属性所做的任何更改都会在整个 Ember 的数据绑定系统中完全传播，然后再将控制权返回给系统。因此，移动鼠标、按键、单击按钮等都会启动运行循环。

### 大约需要多长时间（我知道这很愚蠢，并且依赖于许多事情，但我正在寻找一个一般的想法，或者如果运行循环可能需要最短或最长的时间）

RunLoop 永远不会跟踪通过系统传播所有更改所花费的时间，然后在达到最大时间限制后停止 RunLoop；相反，RunLoop 将始终运行到完成，并且不会停止，直到所有过期的计时器都被调用，绑定传播，也许*它们的*绑定传播等等。显然，需要从单个事件传播的更改越多，RunLoop 完成所需的时间就越长。这是一个（非常不公平的）示例，说明与另一个没有运行循环的框架（骨干网）相比，RunLoop 如何因传播更改而陷入困境：http: [//jsfiddle.net/jashkenas/CGSd5/](http://jsfiddle.net/jashkenas/CGSd5/). 故事的寓意：RunLoop 对于您想要在 Ember 中做的大多数事情都非常快，这也是 Ember 的强大功能所在，但是如果您发现自己想用 Javascript 以每秒 60 帧的速度制作 30 个圆圈，那么可能比依赖 Ember 的 RunLoop 更好。

### RunLoop 是一直在执行，还是只是表示从执行开始到结束的一段时间，可能有一段时间不运行。

它不是一直执行的——它必须在某个时候将控制权返回给系统，否则你的应用程序会挂起——它不同于服务器上的运行循环，它有一个`while(true)`并且一直持续到无穷大直到服务器收到关闭信号...... Ember RunLoop 没有这样的信号，`while(true)`但仅在响应用户/计时器事件时启动。

### 如果一个视图是从一个 RunLoop 中创建的，是否保证在循环结束时它的所有内容都会进入 DOM？

让我们看看我们是否能解决这个问题。从 SC 到 Ember RunLoop 的一个重大变化是`invokeOnce`，`invokeLast`Ember 为您提供了一个“队列”列表，而不是在在运行循环的过程中，您可以通过指定动作所属的队列来安排动作（在运行循环期间调用的函数）（来自源的示例：）`Ember.run.scheduleOnce('render', bindView, 'rerender');`。

如果您查看`run_loop.js`源代码，您会看到`Ember.run.queues = ['sync', 'actions', 'destroy', 'timers'];`，但是如果您在 Ember 应用程序的浏览器中打开 JavaScript 调试器并评估`Ember.run.queues`，您会得到更完整的队列列表：`["sync", "actions", "render", "afterRender", "destroy", "timers"]`. Ember 保持他们的代码库非常模块化，它们使您的代码以及库的单独部分中的自己的代码可以插入更多队列。在这种情况下，Ember Views 库插入`render`和`afterRender`排队，特别是在`actions`队列之后。我马上就会明白为什么会这样。一、RunLoop算法：

RunLoop 算法与上面 SC 运行循环文章中描述的几乎相同：

*   您在 RunLoop`.begin()`和之间运行您的代码`.end()`，只有在 Ember 中您才希望在 内部运行您的代码`Ember.run`，这将在内部为您调用`begin`和`end`。（只有 Ember 代码库中的内部运行循环代码仍然使用`begin`and `end`，所以你应该坚持使用`Ember.run`）
*   在`end()`被调用之后，RunLoop 就会启动以传播由传递给`Ember.run`函数的代码块所做的每一个更改。这包括传播绑定属性的值、将视图更改渲染到 DOM 等。这些操作（绑定、渲染 DOM 元素等）的执行顺序由上述`Ember.run.queues`数组确定：
*   运行循环将从第一个队列开始，即`sync`. 它将运行代码安排到`sync`队列中的所有操作`Ember.run`。这些动作本身也可能在同一个 RunLoop 期间安排更多动作执行，并且由 RunLoop 确保它执行每个动作，直到所有队列都被刷新。它这样做的方式是，在每个队列的末尾，RunLoop 将查看所有先前刷新的队列，并查看是否已安排任何新操作。如果是这样，它必须从具有未执行的预定操作的最早队列的开头开始并清除队列，继续跟踪其步骤并在必要时重新开始，直到所有队列完全为空。

这就是算法的本质。这就是绑定数据通过应用程序传播的方式。您可以预期，一旦 RunLoop 运行完成，所有绑定的数据都将完全传播。那么，DOM 元素呢？

队列的顺序，包括由 Ember 视图库添加的队列，在这里很重要。注意`render`和`afterRender`之后`sync`, 和`action`。队列包含传播绑定数据的`sync`所有动作。(`action`之后，仅在 Ember 源代码中很少使用)。基于上述算法，可以保证在 RunLoop 进入`render`队列时，所有数据绑定都已完成同步。这是设计使然：您不希望在*之前执行渲染 DOM 元素的昂贵任务*同步数据绑定，因为这可能需要使用更新的数据重新渲染 DOM 元素——显然是清空所有 RunLoop 队列的一种非常低效且容易出错的方法。`render`因此，Ember 在渲染队列中的 DOM 元素之前智能地完成所有数据绑定工作。

所以，最后，要回答你的问题，是的，你可以预期到完成时任何必要的 DOM 渲染都会发生`Ember.run`。这是一个 jsFiddle 来演示：http: [//jsfiddle.net/machty/6p6XJ/328/](http://jsfiddle.net/machty/6p6XJ/328/)

## 关于 RunLoop 的其他须知

### 观察者与绑定

需要注意的是，观察者和绑定虽然具有响应“监视”属性更改的类似功能，但在 RunLoop 上下文中的行为完全不同。正如我们所见，绑定传播被安排到`sync`队列中，最终由 RunLoop 执行。另一方面，观察者会在被监视的属性发生变化时*立即*触发，而不必首先将其安排到 RunLoop 队列中。如果一个观察者和一个绑定都“监视”同一个属性，观察者总是会在 100% 的时间被调用，然后再更新绑定。

### `scheduleOnce`和`Ember.run.once`

Ember 的自动更新模板的一大效率提升是基于这样一个事实，即借助 RunLoop，多个相同的 RunLoop 动作可以合并（“去抖动”，如果你愿意的话）为一个动作。如果您查看`run_loop.js`内部结构，您会看到促进此行为的函数是相关函数`scheduleOnce`和`Em.run.once`. 它们之间的区别并不像知道它们存在那么重要，以及它们如何丢弃队列中的重复操作以防止在运行循环期间进行大量臃肿、浪费的计算。

### 计时器呢？

尽管 'timers' 是上面列出的默认队列之一，但 Ember 仅在其 RunLoop 测试用例中引用了该队列。根据上述文章中关于计时器是最后触发的一些描述，在 SproutCore 时代似乎会使用这样的队列。在 Ember 中，`timers`不使用队列。相反，RunLoop 可以由内部管理的`setTimeout`事件（见`invokeLaterTimers`函数）启动，它足够智能，可以循环所有现有的计时器，触发所有过期的计时器，确定最早的未来计时器，并设置一个内部`setTimeout`仅适用于该事件，它会在触发时再次启动 RunLoop。这种方法比让每个定时器调用 setTimeout 并唤醒自己更有效，因为在这种情况下，只需要调用一次 setTimeout，并且 RunLoop 足够聪明，可以触发所有可能同时关闭的不同定时器时间。

### `sync`使用队列进一步去抖动

这是运行循环中的一个片段，位于运行循环中所有队列的循环中间。注意`sync`队列的特殊情况：因为`sync`是一个特别不稳定的队列，其中数据在各个方向传播，`Ember.beginPropertyChanges()`被调用以防止任何观察者被触发，然后调用`Ember.endPropertyChanges`. 这是明智的：如果在刷新`sync`队列的过程中，对象上的属性完全有可能会在其最终值上发生多次更改，并且您不希望通过每次更改立即触发观察者来浪费资源.

```
if (queueName === 'sync') 
{
    log = Ember.LOG_BINDINGS;

    if (log) 
    {
        Ember.Logger.log('Begin: Flush Sync Queue');
    }

    Ember.beginPropertyChanges();
    Ember.tryFinally(tryable, Ember.endPropertyChanges);

    if (log) 
    { 
        Ember.Logger.log('End: Flush Sync Queue'); 
    }
} 
else 
{
   forEach.call(queue, iter);
} 
```

希望这可以帮助。为了写这个东西，我肯定需要学习很多东西，这很重要。**

# matlab - 通过直方图比较两个图像并绘制在一个图中

> ID：13597877
> 
> 赞同：-1
> 
> 时间：2012-11-28T04:33:26.450
> 
> 标签：matlab, graph, plot, histogram

我想使用直方图比较两个大脑图像并绘制它们或在一个图中制作两个图表。我怎样才能做到这一点？我可以在两个不同的图形中制作两个直方图，但不能将它们绘制在一个图中，因为我是 matlab 新手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:02:44.093

我不确定这是最好的方法，因为很难比较数据。但是要显示 2 个直方图，请使用`hold on`并更改每个直方图的颜色，以使其更容易相互转换。（但可能还需要更改透明度）。我使用了`bar`因为`hist`在调用本身中不直接支持颜色。所以这更容易。

```
close all;
clear all;

x = -4:0.1:4;
y1 = randn(200,1);
[n,x] = hist(y1,x);
bar(x,n,'r');

hold on
y2 = randn(200,1);
[n,x] = hist(y2,x);
bar(x,n,'b'); 
```

![在此处输入图像描述](../Images/74363807818e496ac567e319d0ebb46d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:12:02.777

不要`bar`在 Nasser M. Abbasi 的代码中使用，请使用`stem`并查看是否有帮助。

# ffmpeg - libavcodec 如何解码音频帧？

> ID：13597878
> 
> 赞同：2
> 
> 时间：2012-11-28T04:33:26.650
> 
> 标签：ffmpeg, libavcodec, libav, libavformat

这是我使用 ffmpeg 的 libav* 解码音频流的过程

> [videofile]-->（读取音频包）--> [pkts queue]-->（解码器）-->扬声器的样本缓冲区

出于某种原因，我需要在解码器之后插入一个缓冲区

> [videofile]--> (读取音频包)--> [pkts queue] --> (decoder)--> [samples buffer] --> 说话者的样本缓冲区

中的音频样本`samples buffer`是 LPCM 16 位。为了保存音频的 pts，`sample buffer`我保存了第一个样本的 pts。通过这种方式，我可以计算缓冲区中任何样本的 pts。

问题是只有当音频流包含连续的音频样本时计算才是正确的。ffmpeg 的解码音频帧是否总是包含连续的样本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:38:40.890

为什么不是这样呢？解码器将按照呈现给上层的顺序给出数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T10:40:12.107

ffmpeg 的解码音频帧可能包含平面或非平面格式的样本。您可以使用

```
av_sample_fmt_is_planar(frame->format) 
```

检查 您应该确保将正确格式的样本传递给扬声器的[文档。](http://ffmpeg.org/doxygen/trunk/samplefmt_8c.html)

如果没有，那么您可以使用 libswresample 进行示例格式转换。

[在这里](https://stackoverflow.com/questions/18888986/what-is-the-difference-between-av-sample-fmt-s16p-and-av-sample-fmt-s16)解释了 AVFrame 如何包含平面和非平面数据

# xcode - UIView的滑动更新

> ID：13597881
> 
> 赞同：0
> 
> 时间：2012-11-28T04:33:41.650
> 
> 标签：xcode, uitableview, cocoa-touch, uiview, ios6

我希望更新我的 UIView 的值，就像使用下一首歌曲按钮时 iOS 的音乐应用程序所做的一样。我的意思是当用户单击最后一首歌曲按钮时 UIView 更新从左侧滑入，当用户单击下一首歌曲按钮时从右侧滑入。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:12:04.650

看看自定义控件 DYNavigationController [https://github.com/dyang/DYNavigationController](https://github.com/dyang/DYNavigationController)

此链接[http://iappexperience.com/post/23551184719/chromeless提供了使用相同的教程](http://iappexperience.com/post/23551184719/chromeless)

# python - 我想让python输出一个png文件

> ID：13597883
> 
> 赞同：3
> 
> 时间：2012-11-28T04:33:54.717
> 
> 标签：python, image, numpy, png, output

我目前正在尝试获取一张我拥有的图片，甚至是我可以链接到的网络上的一张图片，以从 if 语句中的 python 代码输出。

这是代码：

```
if c >= 50:
    print '\nYou have been mauled by a bear\n'
    # I want to output a picture of a bear here
    quit() 
```

我有一个 c 的计数器，如果它达到 50，我希望它打印出你被熊伤害了，然后在屏幕上弹出一个熊，熊的图像是否只是同一个文件夹中的一个文件，或者如果它链接到我托管熊图像的网页。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:40:54.213

在 Mac 上：

```
from subprocess import call
call(["open", "hi.jpg"]) 
```

如果您将“打开”替换为用于打开图像的任何程序，这也应该适用于其他系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:42:44.513

有很多方法可以做到这一点，我会使用[PIL的图像模块](http://www.pythonware.com/library/pil/handbook/image.htm)

```
from PIL import Image
im = Image.open("bear.png")
im.show() 
```

其他方法是使用以下方法之一：wxWindows、pyQt、pyGTK 或 Tkinter

# error-handling - 未找到果园退货页面

> ID：13597886
> 
> 赞同：0
> 
> 时间：2012-11-28T04:34:04.113
> 
> 标签：error-handling, orchardcms

我是 Orchard CMS 的新手。如果有任何错误，我需要向管理员创建电子邮件通知。我制作了一个自定义模块，因此它会向管理员发送电子邮件。另外，我已经从错误页面重定向到模块。

这是我的`NotFound.cshtml`自定义主题中的代码

```
<script type="text/javascript" language="javascript">
    function ToError() {
        window.location.href = '/FourOFour?LastURL=' +
            (window.location.host + window.location.pathname);
    }
    window.onload = ToError;
</script> 
```

这是我创建的模块中的自定义路线

```
new RouteDescriptor {
    Priority = 11,
    Route = new Route(
        "FourOFour",
        new RouteValueDictionary {
            {"area", "Prenagen.ErrorEmailing"},
            {"controller","Utama"},
            {"action","Error404"}
        },
        new RouteValueDictionary(),
        new RouteValueDictionary{
            {"area", "Prenagen.ErrorEmailing"}
        },
        new MvcRouteHandler())
} 
```

因此未找到的页面将重定向到`/FourOFour`. 当我在 localhost 中测试它时，一切正常。`NotFound`我键入一个不存在的页面，然后它重定向到`/FourOFour?LastURL=page`. 并且电子邮件被发送给管理员。当我将它发布到服务器时，未找到重定向到 FourOFour，但未找到该页面。我该如何解决这个问题？请任何人帮助我。

编辑：它会创建一个无限循环，因为`FourOFour`找不到它并不断重定向到同一页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:05:05.277

你的动态编译被禁用了吗？

如果是这样，并且您只复制了已更改的文件，这可能是您出现问题的原因。

可能导致问题的另一件事是，您所做的更改是否需要创建添加到项目中的新文件。如果是这种情况，您还应该将 .csproj 文件复制到服务器，以指示 Orchard 将新添加的文件包含在动态编译中。

尝试在发布模式下重建您的模块并将整个模块复制到服务器，而不是仅复制您更改的文件，看看是否有效..

# javascript - 从javascript中的事件onclick获取值时出错？

> ID：13597889
> 
> 赞同：0
> 
> 时间：2012-11-28T04:34:18.263
> 
> 标签：javascript

我有一个示例代码：

```
<span id="app_name_1"></span><a onclick="addSelectApplication('name 1');" href="#">Add name 1</a>                   
<span id="app_name_2"></span><a onclick="addSelectApplication('name 2');" href="#">Add name 2</a>               
<span id="app_name_3"></span><a onclick="addSelectApplication('name 3');" href="#">Add name 3</a> 
```

和 javascript

```
<script>
function addSelectApplication(title) {
    for(var i=0; i<3; i++) {
        parent.document.getElementById('app_name_'+i).innerHTML = title;
    }    
}
</script> 
```

当我点击`Add name 1`时，结果是

```
<span id="app_name_1">name 1</span> 
<span id="app_name_2">name 1</span>
<span id="app_name_3">name 1</span> 
```

如何修复结果是：

点击时`Add name 1`

```
<span id="app_name_1">name 1</span> 
<span id="app_name_2"></span>
<span id="app_name_3"></span> 
```

点击时`Add name 2`

```
<span id="app_name_1"></span>   
<span id="app_name_2">name 2</span>
<span id="app_name_3"></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:40:46.003

您正在遍历所有跨度并设置标题。您需要以某种方式确定您单击了哪一个，这里从标题本身来看：

```
function addSelectApplication(title) {
    // Extract the link clicked from the title text
    var i = title.replace(/.*(\d)/, "$1");

    // Set the content
    parent.document.getElementById('app_name_'+i).innerHTML = title;
} 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:09:39.247

```
<span id="app_name_1"></span>   
<span id="app_name_2"></span>
<span id="app_name_3"></span>

<a title="name 1" onclick="addSelectApplication(this);" href="#">Add name 1</a>              
<a title="name 2" onclick="addSelectApplication(this);" href="#">Add name 2</a>             
<a title="name 3" onclick="addSelectApplication(this);" href="#">Add name 3</a>
<script>
    function addSelectApplication(obj) {     
    for(var i=1; i<=3; i++) {        
        var no = obj.title.split(' ');
        if (no[1] == i) {
            document.getElementById('app_name_'+i).innerHTML = obj.title;     
        } else {
            document.getElementById('app_name_'+i).innerHTML = '';     
        }
    }   
    return false;    
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:53:55.497

对于您当前的 html 格式，最简单的方法是：

```
 <span id="app_name_1"></span><a onclick="this.previousSibling.innerHTML = 'name 1';" href="#">Add name 1</a>               
    <br />
    <span id="app_name_2"></span><a onclick="this.previousSibling.innerHTML = 'name 2';"  href="#">Add name 2</a>               
    <br />
    <span id="app_name_3"></span><a onclick="this.previousSibling.innerHTML = 'name 3';"  href="#">Add name 3</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T04:47:10.527

尝试这个

```
 function addSelectApplication(title)
    {
        var splitStr = title.split(' ');

        for (var i = 1; i < 4; i++)
        {
            if (splitStr[1] == i.toString())
            {
                parent.document.getElementById('app_name_' + i).innerHTML = title;
            }
            else
            {
                parent.document.getElementById('app_name_' + i).innerHTML = "";
            }
        }
    } 
```

# iphone - iphone的sqlite数据库中的数据没有更新

> ID：13597890
> 
> 赞同：-4
> 
> 时间：2012-11-28T04:34:19.367
> 
> 标签：iphone, sqlite

我在我的 iPhone 应用程序中实现了 sqlite 数据库。我可以从数据库中读取，但数据库甚至没有更新。代码如下。提前致谢

////// 将数据库复制到文件管理器的函数

```
-(void)copyToFileManager
{

    NSString *databaseName = @"kwest.sqlite";

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    BOOL success=[fileManager fileExistsAtPath:databasePath];

    if (!success) {

        NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

        // Copy the database from the package to the users filesystem
        [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];  
    }
    else{
        NSLog(@"file Exists");
    }

} 
```

/// 从数据库读取的函数

```
-(NSMutableArray *)getQuestList{

    NSMutableArray *qusArray = [[NSMutableArray alloc]init];
    @try {
       NSString *databaseName = @"kwest.sqlite";
       // Get the path to the documents directory and append the databaseName
       NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
       NSString *documentsDir = [documentPaths objectAtIndex:0];
       NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

       if(!sqlite3_open([databasePath UTF8String],&data)==SQLITE_OK){
          NSLog(@"An error occured");

       }
       const char *sql ="SELECT *from Quest"; 
       sqlite3_stmt *sqlStatement;
       if(sqlite3_prepare(data , sql, -1, &sqlStatement, NULL) != SQLITE_OK)
       {
           NSLog(@"Problem with prepare statement");
       }
       while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
          Quest *questlist = [[Quest alloc]init];
          questlist.q_id = sqlite3_column_int(sqlStatement, 0);
          questlist.q_name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
           questlist.solved = sqlite3_column_int(sqlStatement, 2);
           questlist.hint1 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 3)];
           questlist.hint2 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
           questlist.levelactive = sqlite3_column_int(sqlStatement, 5);
           [qusArray addObject:questlist];
       }

    }
    @catch (NSException *exception) {
       NSLog(@"An exception occured:%@",exception);
   }
   @finally {
     sqlite3_close(data);
     return qusArray;
   }
 } 
```

/////更新数据库的函数

```
-(void)updateQuestSolved:(NSInteger)solved:(NSInteger)q_id{

    NSString *databaseName = @"kwest.sqlite";

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    @try {
        if(!sqlite3_open([databasePath UTF8String],&data)==SQLITE_OK){
            NSLog(@"An error occured");

    }
    NSString *querystr = [NSString stringWithFormat:@"Update Quest set solved = '%d' where q_id = '%d'",solved,q_id+1 ];
  //  const char *sql ="Update Quest set solved=? where q_id=?"; 
    sqlite3_stmt *sqlStatement;
    if(sqlite3_prepare_v2(data , [querystr UTF8String], -1, &sqlStatement, NULL) == SQLITE_OK)
    {
        NSLog(@"query executed");
    }
   /* sqlite3_bind_int(sqlStatement, 0, q_id+1);
    sqlite3_bind_int(sqlStatement, 2 , solved);  
    char* errmsg;
    sqlite3_exec(data, "COMMIT", NULL, NULL, &errmsg);

    if(SQLITE_DONE != sqlite3_step(sqlStatement))
        NSLog(@"Error while updating. %s", sqlite3_errmsg(data));
    else 
         sqlite3_reset(sqlStatement);
    *///      
}
@catch (NSException *exception) {
    NSLog(@"An exception occured:%@",exception);
}
@finally {
    sqlite3_close(data);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:52:08.930

这条线导致了这个问题。

```
NSString *querystr = [NSString stringWithFormat:@"Update Quest set solved = '%d' where q_id = '%d'",solved,q_id+1 ]; 
```

字段`solved`和`q_id`是整数类型。你正在用字符串检查它，这就是问题所在。

将查询字符串更改为：

```
NSString *querystr = [NSString stringWithFormat:@"Update Quest set solved = %d where q_id = %d",solved,q_id+1 ]; 
```

还要更改准备条件，例如：

```
if(sqlite3_prepare_v2(data , [querystr UTF8String], -1, &sqlStatement, NULL) == SQLITE_OK)
{
   sqlite3_step(sqlStatement);
   NSLog(@"query executed");
} 
```

# ruby-on-rails - 如何将一个模型的值保存在另一个模型中？

> ID：13597891
> 
> 赞同：0
> 
> 时间：2012-11-28T04:34:25.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我有`user model`并且`Language model`语言模型在哪里包含不同的语言，我希望用户从该模型中选择语言，并且应该为相应的用户存储它。考虑有五种语言`A, B, C, D, E`，然后用户必须从这些语言中进行选择。假设`user 1`选择`A and C`而`user 2`选择`B and D`则必须为该用户存储语言。我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:01:07.343

您需要为[多对多](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)关系建模。如链接中所述，这可以通过声明来完成

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :languages
end

class Language < ActiveRecord::Base
  has_and_belongs_to_many :users
end 
```

并创建一个名为`language_users`存储`user_id`和的新表`language_id`。此表中的每条记录都表示特定用户选择了特定语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:06:51.590

您可以通过关联来做到这一点，在您的情况下，您可以尝试：

`class User < ActiveRecord::Base`

`has_and_belongs_to_many :languages`

`end`

和

`class Language < ActiveRecord::Base`

`has_and_belongs_to_many :users`

`end`

或者您可以通过以下链接进行浏览。

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

[http://www.tutorialspoint.com/ruby-on-rails/rails-models.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-models.htm)

# github - 如何更改 GitHub 上存储库的语言？

> ID：13597892
> 
> 赞同：55
> 
> 时间：2012-11-28T04:34:26.017
> 
> 标签：github

GitHub 搜索允许按语言过滤存储库。如何将存储库设置为特定语言？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-11-24T07:15:42.417

您还可以覆盖某些文件

```
$ cat .gitattributes
*.rb linguist-language=Java 
```

[来源](http://github.com/github/linguist#overrides)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-28T07:14:14.970

纯粹是从代码内容推导出来的。

正如[佩德罗](https://stackoverflow.com/users/2812/petros) [所说](https://stackoverflow.com/questions/3305147/github-language-tag#comment10099503_3305168)：

> 请注意，我们计算每种语言文件的总字节数（我们检查扩展名）以确定百分比。
> 这意味着如果你看到你的项目报告了一个 JavaScript，但你发誓你使用 Ruby，那么你可能有一个比你的 Ruby 代码更大的 JS 库

如“ [GitHub 将存储库更改为错误的语言](https://stackoverflow.com/a/34715182/6309)”中所述，您可以添加一个`.gitattributes`文件，您可以在其中：

*   忽略项目的一部分（不考虑用于语言检测）

    ```
     static/* linguist-vendored 
    ```

*   将项目的一部分视为文档：

    ```
     docs/* linguist-documentation 
    ```

*   指示某些具有特定扩展名的文件（例如`*.rb`）应被视为特定语言：

    ```
     *.rb linguist-language=Java 
    ```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-22T14:07:21.020

您还可以制作一些文件`vendor`-ed。`.gitattributes`只需在主目录中创建一个文件。如果您想从语言统计信息中排除 CSS，请在文件中写入类似这样的内容。 `client/stylesheets/* linguist-vendored`

这将从`client/stylesheets/`语言统计信息中隐藏所有文件。就我而言，这些是 .css 文件。

这部分解决了您的问题，因为隐藏了最常用的语言并选择第二个作为主要语言。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-04-20T13:19:37.177

有点蛮力，但我使用了这个*.gitattributes*文件：

```
* linguist-vendored
*.js linguist-vendored=false 
```

它说要忽略除 .js 之外的所有文件，因此 JavaScript 成为唯一可能的语言。我的项目[https://github.com/aim12340/jQuery-Before-Ready](https://github.com/aim12340/jQuery-Before-Ready)被列为 HTML，这将其更改为 JavaScript。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-02-24T13:47:06.567

正如[VonC 在评论中提到的那样，您可以将您的库放在“供应商”或“第三方”下，并且](https://stackoverflow.com/questions/13597892/how-to-change-the-language-of-a-repository-on-github#comment25664240_13599737)[linguist](https://github.com/github/linguist/blob/master/lib/linguist/vendor.yml#L66)不会分析文件，这是 GitHub 用来分析代码中语言的工具。

```
# Vendored dependencies
- third[-_]?party/
- 3rd[-_]?party/
- vendors?/
- extern(al)?/ 
```

后来，他们添加了更多文件夹名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-15T04:03:21.307

在文件夹的根目录中创建 .gitattributes 文件。假设您希望语言是 Java，只需复制粘贴

`*.java linguist-detectable=true *.js linguist-detectable=false *.html linguist-detectable=false *.xml linguist-detectable=false`

在 .gitattributes 文件中并将文件推送到存储库中。重新加载您的 GitHub 页面以查看语言更改。

作为参考，请使用[此 GitHub 存储库](https://github.com/saifsms91/AmazonAppiumFramework/blob/master/.gitattributes)。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-11-13T12:53:34.107

使用添加的扩展名重命名存储库中代码文件的名称。

例如：

*   将 abc 更改为 Python 的 abc.py
*   用于 Java 文件的 abc 到 abc.java
*   abc 到 abc.html 用于 HTML

# svn - 同步 tfs 和颠覆

> ID：13597894
> 
> 赞同：1
> 
> 时间：2012-11-28T04:34:39.943
> 
> 标签：svn

我正在寻找一种可以在 TFS 2012 和颠覆之间合并/同步更改的工具。是否有此工具或我必须手动执行此操作？我认为这不是 TFS 2012 或颠覆中的内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:35:12.593

我目前正在研究这样的工具。主要是为了我自己——我的公司切换到 TFS 2010，我更喜欢使用 SVN。主要关注点是持续的后台同步，但也可能用于迁移。尚未尝试使用 TFS 2012。

这是链接： http: [//ficusdev.com/SvnTfsSync](http://ficusdev.com/SvnTfsSync)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:06:22.847

恐怕，但除了[SVNBridge你什么都没有](http://svnbridge.codeplex.com/)

# passwords - 在保存到数据库之前我应该 散列哪些信息？

> ID：13597896
> 
> 赞同：0
> 
> 时间：2012-11-28T04:34:45.450
> 
> 标签：passwords, md5

我知道在将其保存到数据库之前我应该​​ md5(password.salt) 。但我有一些奇怪的问题： + 我是否也应该 md5 内容/文本字符串（使用密码作为盐）？示例：如果数据库泄露，攻击者无法读取已关闭论坛的内容 + 如果我不应该对内容进行 md5 处理，并将它们全部保存为纯文本，那么攻击者试图获取用户密码的意义何在？有数据库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:41:11.597

散列密码的目的是防止获得您数据库访问权限的第三方了解用户的密码是什么。如果您的数据库内容已经到了那么远，那么它们已经受到了损害，因此论坛内容已经暴露出来。您不希望人们的密码被泄露，因为许多人在多个网站上使用相同的密码。

如果您有一个安全的论坛，那么您需要防止攻击者访问数据库。如果他们进入，您的论坛帖子就会暴露。不要费心试图进一步保护他们。这个想法是，*如果*攻击者获得了对数据库的访问权限，那么您已经限制了损害的表面积。您的站点数据被泄露，但希望不是用户的凭据。有些人会在您的网站上使用他们的银行用户名和密码，这就是您要保护的内容。

请记住，散列函数是一种方法。您无法取消散列数据。这对密码来说很好：你不需要知道人们的密码是什么，你只需要能够比较它们。它不适用于论坛帖子。散列不是加密。加密的数据可以被解密。散列数据不能取消散列。

# node.js - 是否有适用于 Node.js 的 Google API 库？

> ID：13597897
> 
> 赞同：11
> 
> 时间：2012-11-28T04:35:10.137
> 
> 标签：node.js, google-api, npm

是否有一个 Node.js 库将 Google 的所有 API 包含在一个 API 中？（谷歌通讯录、谷歌日历、谷歌地理定位 API 等）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-06T20:55:08.850

**注意**：我是`googleapis`模块的作者。

Google 为其 API 发布了官方支持的节点客户端库。[https://github.com/google/google-api-nodejs-client](https://github.com/google/google-api-nodejs-client) npm 上也有：

```
npm install googleapis 
```

加载带有句柄和版本的 API，然后发出请求：

```
googleapis.discover('urlshortener', 'v1').execute(function(err, client) {
  // make requests here
  client.urlshortener.url.get({ shortUrl: 'http://goo.gl/DdUKX' }).execute(console.log);
}); 
```

它还支持批处理请求和 OAuth 2.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:38:37.907

我没有尝试过，但通过 npmjs.org 搜索找到了它：[https ://npmjs.org/](https://npmjs.org/)

[https://github.com/JimmyBoh/node-google-api](https://github.com/JimmyBoh/node-google-api)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:11:41.437

Temboo SDK 可用于 Node.js，并提供了一种访问大量 Google API 的统一方式：

*   OAuth 身份验证
*   分析
*   查看
*   日历
*   联系人
*   方向
*   距离矩阵
*   驾驶
*   海拔
*   地理编码
*   邮箱
*   地方
*   加
*   电子表格

请参阅[https://live.temboo.com/library/Library/Google/](https://live.temboo.com/library/Library/Google/) - SDK 是一个开放下载，但您需要一个（免费）Temboo 帐户才能使用它。

（全面披露：我在 Temboo 工作。）

# webservice-client - 支持 WSDL 2.0 + HTTP 的 Web 服务测试客户端？

> ID：13597898
> 
> 赞同：1
> 
> 时间：2012-11-28T04:35:11.760
> 
> 标签：webservice-client, rest-client, wsdl-2.0

我正在寻找具有 WSDL 2.0 服务识别和 HTTP 绑定扩展支持的应用程序或浏览器插件，以进行彻底的 Web 服务测试。

我知道 XMLSpy 有一个支持 WSDL 2.0 的[SOAP 客户端/调试器](http://www.altova.com/xmlspy/soap-client-debugger.html)，但不支持 HTTP 绑定......

我对讨论 WADL 或 WSDL + REST 的弊端不是很感兴趣。

也许是 2012 年的白日梦？

# c# - Windows 程序 > 失败的程序集区域是：MyComputer

> ID：13597899
> 
> 赞同：0
> 
> 时间：2012-11-28T04:35:16.717
> 
> 标签：c#, .net, windows, winforms, gac

我编写了一个基于 .NET Framework 3.5 SP1 的 Windows 窗体应用程序，它在 windows server 2003 版上运行。我试图添加另一个用户来使用这个程序并得到以下错误

```
The Zone of the assembly that failed was: MyComputer

2012-04-11 13:30:43,326 [1] ERROR UclUserLogin - [btnSubmit_Click] The type initializer for 'Oracle.DataAccess.Client.OracleConnection' threw an exception. 
System.TypeInitializationException: 
The type initializer for 'Oracle.DataAccess.Client.OracleConnection' threw an exception. --->               
System.TypeInitializationException: The type initializer for 'Oracle.DataAccess.Client.RegAndConfigRdr' threw an exception. --->   
System.Security.SecurityException: Requested registry access is not allowed.
at System.ThrowHelper.ThrowSecurityException(ExceptionResource resource)
at Microsoft.Win32.RegistryKey.OpenSubKey(String name, Boolean writable)
at Microsoft.Win32.RegistryKey.OpenSubKey(String name)
at Oracle.DataAccess.Client.RegAndConfigRdr..cctor()
The Zone of the assembly that failed was:
MyComputer
--- End of inner exception stack trace ---
at Oracle.DataAccess.Client.RegAndConfigRdr.ReadEntriesForRegistryAndConfig()
at Oracle.DataAccess.Client.OracleInit.Initialize()
at Oracle.DataAccess.Client.OracleConnection..cctor()
--- End of inner exception stack trace ---
at Oracle.DataAccess.Client.OracleConnection..ctor(String connectionString) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:59:58.500

由于用户没有完全控制权限，Oracle 客户端无法访问某些注册密钥。

您需要使用 regedit，导航到注册表项并右键单击具有上述名称的文件夹。然后选择权限，您可以更改每个用户的权限。

一个可能的关键是

```
`HKLM/Software/Policies/Microsoft/Windows/Installer`

```

如果您找不到正确的密钥，您可以使用进程监视器来检查它到底是什么。

进程监视器可以下载[微软](http://technet.microsoft.com/en-US/sysinternals)

# iphone - 如何禁用 UIDatePicker 中的某些日期？

> ID：13597900
> 
> 赞同：2
> 
> 时间：2012-11-28T04:35:27.153
> 
> 标签：iphone, datepicker, uidatepicker

我有 UIDatePicker 的对象，我想禁用某些日期，例如周末和节假日，这可能吗？如何？

```
typePicker=[[UIDatePicker alloc] initWithFrame:frame];
[typePicker setMinimumDate: [NSDate date]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:44:36.677

这是不可能的。下一个最好的事情可能是设置最小和最大日期，并在选择您不希望用户选择的日期后，滚动到用户可以选择的最近日期。

或者，您可以创建自己的 UIPickerView 来实现此行为。但是，对此进行编码并非易事。

# php - 使用 PHP 在 DOM 上查找（XML）节点

> ID：13597901
> 
> 赞同：0
> 
> 时间：2012-11-28T04:35:38.713
> 
> 标签：php, xml, dom, wsdl

我无法使用 DOMDocument PHP 在 WSDL (XML) 文档上找到某个节点。当我使用 getElementsByTagName 时，它​​总是返回 NULL。我要找到的是 xsd:complexType 但是当我尝试不同的节点时，比如说类型，它会返回一个对象。

这是我的 WSDL (XML) 文档

```
<definitions xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:routeDx2" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="urn:routeDx2">
<types>
<xsd:schema targetNamespace="urn:routeDx2"
>
 <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
 <xsd:import namespace="http://schemas.xmlsoap.org/wsdl/" />
 <xsd:complexType name="inputCashin">
  <xsd:all>
   <xsd:element name="userName" type="xsd:string"/>
   <xsd:element name="signature" type="xsd:string"/>
   <xsd:element name="productCode" type="xsd:string"/>
   <xsd:element name="merchantCode" type="xsd:string"/>
   <xsd:element name="terminal" type="xsd:string"/>
   <xsd:element name="merchantNumber" type="xsd:string"/>
   <xsd:element name="transactionType" type="xsd:string"/>
   <xsd:element name="recipientNumber" type="xsd:string"/>
   <xsd:element name="recipientName" type="xsd:string"/>
   <xsd:element name="amount" type="xsd:string"/>
   <xsd:element name="feeAmount" type="xsd:string"/>
   <xsd:element name="traxId" type="xsd:string"/>
   <xsd:element name="timeStamp" type="xsd:string"/>
  </xsd:all>
 </xsd:complexType>
 <xsd:complexType name="inputCashout">
  <xsd:all>
   <xsd:element name="userName" type="xsd:string"/>
   <xsd:element name="signature" type="xsd:string"/>
   <xsd:element name="productCode" type="xsd:string"/>
   <xsd:element name="merchantCode" type="xsd:string"/>
   <xsd:element name="terminal" type="xsd:string"/>
   <xsd:element name="merchantNumber" type="xsd:string"/>
   <xsd:element name="transactionType" type="xsd:string"/>
   <xsd:element name="recipientNumber" type="xsd:string"/>
   <xsd:element name="recipientName" type="xsd:string"/>
   <xsd:element name="amount" type="xsd:string"/>
   <xsd:element name="feeAmount" type="xsd:string"/>
   <xsd:element name="verifyingCode" type="xsd:string"/>
   <xsd:element name="traxId" type="xsd:string"/>
   <xsd:element name="timeStamp" type="xsd:string"/>
  </xsd:all>
 </xsd:complexType>
</xsd:schema>
</types>
<definitions> 
```

我将要找到的是 xsd:complexType 或者如果可能的话，如何通过具有唯一值的属性名称（verifyingCode 或其他）查​​找，我如何通过 PHP 和 DOMDocument 完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:06:29.507

除了`<definitions>`（最后一行）不正确的结束标签外，我没有看到问题。

```
$doc = new DOMDocument();
$doc->loadXML($xml);
$complexTypes = $doc->getElementsByTagName('complexType');
printf('<p>Found %d complexType elements</p>', $complexTypes->length);
foreach ($complexTypes as $complexType) {
    echo $complexType->getAttribute('name'), '<br>';
} 
```

演示 - [http://codepad.viper-7.com/95XDsS](http://codepad.viper-7.com/95XDsS)

您可能`xsd`在标签名称查询中包含命名空间。如果您阅读[文档](http://www.php.net/manual/en/domdocument.getelementsbytagname.php)，您将看到`getElementsByTagName()`指定的参数

> 要匹配的标记的本地名称（无命名空间）

# java - 如何清除 Java 中的 JList？

> ID：13597903
> 
> 赞同：19
> 
> 时间：2012-11-28T04:35:46.843
> 
> 标签：java, swing, jlist, defaultlistmodel

我在 gui 中有一个 jList，我可以在其中使用添加按钮添加一些数据。我想添加另一个名为 Clear 的按钮，它将清除所有元素。我试过这个：

```
private void jButtonClearActionPerfomed(java.awt.event.ActionEvent evt)
{
    DefaultListModel listmodel=new DefaultListModel();
    jList1 = new JList(listmodel);
    if(evt.getSource()==jButtonClear) JList.setListData(new String[0];
    else listmodel.removeAllElements();
} 
```

当我单击添加按钮时，这将添加元素。

当我单击清除按钮时，这会删除元素。

但是当我重新点击添加按钮时，里面什么都没有`jList1`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T04:50:15.480

您不应该仅仅为了从中删除一些项目而重新初始化整个 JList 小部件。相反，您应该操作列表模型，因为对它的更改会“自动”同步回 UI。假设您确实在使用`DefaultListModel`，这足以实现您的“全部清除”功能：

```
private void jButtonClearActionPerfomed(java.awt.event.ActionEvent evt) {
    if(evt.getSource()==jButtonClear) {
        DefaultListModel listModel = (DefaultListModel) jList1.getModel();
        listModel.removeAllElements();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T04:48:10.607

有很多问题，首先是您的示例充满了编译问题，所以我希望这不是您的实际代码。

`JList`没有调用静态方法`setListData`。我想你的意思是`jList1`相反。

每次单击清理按钮时，您都在创建一个新模型和组件...

```
private void jButtonClearActionPerfomed(java.awt.event.ActionEvent evt)
{
    // ??
    DefaultListModel listmodel=new DefaultListModel();
    jList1 = new JList(listmodel);
    // ??
    if(evt.getSource()==jButtonClear) jList1.setListData(new String[0]);
    else listmodel.removeAllElements();
} 
```

您已成功取消引用曾经`jList1`指向的内容，因此无论何时您尝试与之交互，您都不再与屏幕上的组件进行交互。

另一个问题是您为该方法提供了一个空数组`setListData`，这基本上就像在说“请不要在我的列表中添加任何内容”

尝试这样的事情；

```
private void jButtonClearActionPerfomed(java.awt.event.ActionEvent evt)
{
    DefaultListModel listmodel = (DefaultListModel)jList1.getModel();
    if(evt.getSource()==jButtonClear) {
        listmodel.removeAllElements();
    } else {
        listModel.addElement(new String[]{"Hello"});
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-19T22:56:55.790

试试这个：

```
DefaultListModel model = new DefaultListModel();
model.clear();
jList1.setModel(model); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-19T23:06:17.237

试试这个：

```
DefaultListModel listmodel=new DefaultListModel();

JList.setModel(listmodel); 
```

# sql-server - TSQL，重命名用户函数中返回表的列

> ID：13597906
> 
> 赞同：0
> 
> 时间：2012-11-28T04:36:39.560
> 
> 标签：sql-server, tsql, function, rename

我已经定义了返回包含 2 列的表的函数。我可以重命名这些列，以便生成的表如下所示：

```
Press name  |  Sum of pages 
```

?

```
CREATE FUNCTION F_3
(@press nvarchar(255))
RETURNS @table TABLE ( Press nvarchar(255),
                       PagesSum int )
AS
BEGIN
    INSERT @table SELECT @press, SUM(Books.Pages)
    FROM Books, Press
    WHERE Press.Name = @press AND
        Books.Id_Press = Press.Id
    GROUP BY Press.Name

    RETURN
END
GO

SELECT * FROM F_3('BHV')
GO 
```

我试过这样做

```
Press AS 'Press name' nvarchar(255) 
```

但这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:01:48.453

你是这个意思吗？

```
CREATE FUNCTION F_3
(@press nvarchar(255))
RETURNS @table TABLE ( [Press name]  nvarchar(255),
                   [Sum of pages] int )
AS
BEGIN
    INSERT @table SELECT @press, SUM(Books.Pages)
    FROM Books, Press
    WHERE Press.Name = @press AND
        Books.Id_Press = Press.Id
    GROUP BY Press.Name

    RETURN
END
GO

SELECT * FROM F_3('BHV')
GO 
```

我刚刚更改了您的函数的 RETURNS 行。除此之外，这个函数的性能很差，因为它不是一个内联表值函数。查看 MSDN 在[http://technet.microsoft.com/en-us/library/ms177499(v=sql.90).aspx提供的示例](http://technet.microsoft.com/en-us/library/ms177499(v=sql.90).aspx)

# android - 在安卓中开始游戏

> ID：13597908
> 
> 赞同：7
> 
> 时间：2012-11-28T04:36:58.317
> 
> 标签：android

我有 PAC MAN 游戏代码如何在 android 中调用这个游戏作为一项活动.. 我想在 android 应用程序中调用在线游戏而不是如何在链接上调用 android 应用程序中的在线游戏，如果用户单击该特定游戏链接，比在线游戏午餐形式网.. 像吃豆人这样的游戏。谢谢

```
public class Board extends JPanel implements ActionListener {

    Dimension d;
    Font smallfont = new Font("Helvetica", Font.BOLD, 14);

    FontMetrics fmsmall, fmlarge;
    Image ii;
    Color dotcolor = new Color(192, 192, 0);
    Color mazecolor;

    boolean ingame = false;
    boolean dying = false;

    final int blocksize = 24;
    final int nrofblocks = 15;
    final int scrsize = nrofblocks * blocksize;
    final int pacanimdelay = 2;
    final int pacmananimcount = 4;
    final int maxghosts = 12;
    final int pacmanspeed = 6;

    int pacanimcount = pacanimdelay;
    int pacanimdir = 1;
    int pacmananimpos = 0;
    int nrofghosts = 6;
    int pacsleft, score;
    int deathcounter;
    int[] dx, dy;
    int[] ghostx, ghosty, ghostdx, ghostdy, ghostspeed;

    Image ghost;
    Image pacman1, pacman2up, pacman2left, pacman2right, pacman2down;
    Image pacman3up, pacman3down, pacman3left, pacman3right;
    Image pacman4up, pacman4down, pacman4left, pacman4right;

    int pacmanx, pacmany, pacmandx, pacmandy;
    int reqdx, reqdy, viewdx, viewdy;

    final short leveldata[] =
    { 19, 26, 26, 26, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 22,
      21, 0,  0,  0,  17, 16, 16, 16, 16, 16, 16, 16, 16, 16, 20,
      21, 0,  0,  0,  17, 16, 16, 16, 16, 16, 16, 16, 16, 16, 20, 
      21, 0,  0,  0,  17, 16, 16, 24, 16, 16, 16, 16, 16, 16, 20, 
      17, 18, 18, 18, 16, 16, 20, 0,  17, 16, 16, 16, 16, 16, 20,
      17, 16, 16, 16, 16, 16, 20, 0,  17, 16, 16, 16, 16, 24, 20, 
      25, 16, 16, 16, 24, 24, 28, 0,  25, 24, 24, 16, 20, 0,  21, 
      1,  17, 16, 20, 0,  0,  0,  0,  0,  0,  0,  17, 20, 0,  21,
      1,  17, 16, 16, 18, 18, 22, 0,  19, 18, 18, 16, 20, 0,  21,
      1,  17, 16, 16, 16, 16, 20, 0,  17, 16, 16, 16, 20, 0,  21, 
      1,  17, 16, 16, 16, 16, 20, 0,  17, 16, 16, 16, 20, 0,  21,
      1,  17, 16, 16, 16, 16, 16, 18, 16, 16, 16, 16, 20, 0,  21,
      1,  17, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 20, 0,  21,
      1,  25, 24, 24, 24, 24, 24, 24, 24, 24, 16, 16, 16, 18, 20,
      9,  8,  8,  8,  8,  8,  8,  8,  8,  8,  25, 24, 24, 24, 28 };

    final int validspeeds[] = { 1, 2, 3, 4, 6, 8 };
    final int maxspeed = 6;

    int currentspeed = 3;
    short[] screendata;
    Timer timer;

    public Board() {

        GetImages();

        addKeyListener(new TAdapter());

        screendata = new short[nrofblocks * nrofblocks];
        mazecolor = new Color(5, 100, 5);
        setFocusable(true);

        d = new Dimension(400, 400);

        setBackground(Color.black);
        setDoubleBuffered(true);

        ghostx = new int[maxghosts];
        ghostdx = new int[maxghosts];
        ghosty = new int[maxghosts];
        ghostdy = new int[maxghosts];
        ghostspeed = new int[maxghosts];
        dx = new int[4];
        dy = new int[4];
        timer = new Timer(40, this);
        timer.start();
    }

    public void addNotify() {
        super.addNotify();
        GameInit();
    }

    public void DoAnim() {
        pacanimcount--;
        if (pacanimcount <= 0) {
            pacanimcount = pacanimdelay;
            pacmananimpos = pacmananimpos + pacanimdir;
            if (pacmananimpos == (pacmananimcount - 1) || pacmananimpos == 0)
                pacanimdir = -pacanimdir;
        }
    }

    public void PlayGame(Graphics2D g2d) {
        if (dying) {
            Death();
        } else {
            MovePacMan();
            DrawPacMan(g2d);
            moveGhosts(g2d);
            CheckMaze();
        }
    }

    public void ShowIntroScreen(Graphics2D g2d) {

        g2d.setColor(new Color(0, 32, 48));
        g2d.fillRect(50, scrsize / 2 - 30, scrsize - 100, 50);
        g2d.setColor(Color.white);
        g2d.drawRect(50, scrsize / 2 - 30, scrsize - 100, 50);

        String s = "Press s to start.";
        Font small = new Font("Helvetica", Font.BOLD, 14);
        FontMetrics metr = this.getFontMetrics(small);

        g2d.setColor(Color.white);
        g2d.setFont(small);
        g2d.drawString(s, (scrsize - metr.stringWidth(s)) / 2, scrsize / 2);
    }

    public void DrawScore(Graphics2D g) {
        int i;
        String s;

        g.setFont(smallfont);
        g.setColor(new Color(96, 128, 255));
        s = "Score: " + score;
        g.drawString(s, scrsize / 2 + 96, scrsize + 16);
        for (i = 0; i < pacsleft; i++) {
            g.drawImage(pacman3left, i * 28 + 8, scrsize + 1, this);
        }
    }

    public void CheckMaze() {
        short i = 0;
        boolean finished = true;

        while (i < nrofblocks * nrofblocks && finished) {
            if ((screendata[i] & 48) != 0)
                finished = false;
            i++;
        }

        if (finished) {
            score += 50;

            if (nrofghosts < maxghosts)
                nrofghosts++;
            if (currentspeed < maxspeed)
                currentspeed++;
            LevelInit();
        }
    }

    public void Death() {

        pacsleft--;
        if (pacsleft == 0)
            ingame = false;
        LevelContinue();
    }

    public void moveGhosts(Graphics2D g2d) {
        short i;
        int pos;
        int count;

        for (i = 0; i < nrofghosts; i++) {
            if (ghostx[i] % blocksize == 0 && ghosty[i] % blocksize == 0) {
                pos =
 ghostx[i] / blocksize + nrofblocks * (int)(ghosty[i] / blocksize);

                count = 0;
                if ((screendata[pos] & 1) == 0 && ghostdx[i] != 1) {
                    dx[count] = -1;
                    dy[count] = 0;
                    count++;
                }
                if ((screendata[pos] & 2) == 0 && ghostdy[i] != 1) {
                    dx[count] = 0;
                    dy[count] = -1;
                    count++;
                }
                if ((screendata[pos] & 4) == 0 && ghostdx[i] != -1) {
                    dx[count] = 1;
                    dy[count] = 0;
                    count++;
                }
                if ((screendata[pos] & 8) == 0 && ghostdy[i] != -1) {
                    dx[count] = 0;
                    dy[count] = 1;
                    count++;
                }

                if (count == 0) {
                    if ((screendata[pos] & 15) == 15) {
                        ghostdx[i] = 0;
                        ghostdy[i] = 0;
                    } else {
                        ghostdx[i] = -ghostdx[i];
                        ghostdy[i] = -ghostdy[i];
                    }
                } else {
                    count = (int)(Math.random() * count);
                    if (count > 3)
                        count = 3;
                    ghostdx[i] = dx[count];
                    ghostdy[i] = dy[count];
                }

            }
            ghostx[i] = ghostx[i] + (ghostdx[i] * ghostspeed[i]);
            ghosty[i] = ghosty[i] + (ghostdy[i] * ghostspeed[i]);
            DrawGhost(g2d, ghostx[i] + 1, ghosty[i] + 1);

            if (pacmanx > (ghostx[i] - 12) && pacmanx < (ghostx[i] + 12) &&
                pacmany > (ghosty[i] - 12) && pacmany < (ghosty[i] + 12) &&
                ingame) {

                dying = true;
                deathcounter = 64;

            }
        }
    }

    public void DrawGhost(Graphics2D g2d, int x, int y) {
        g2d.drawImage(ghost, x, y, this);
    }

    public void MovePacMan() {
        int pos;
        short ch;

        if (reqdx == -pacmandx && reqdy == -pacmandy) {
            pacmandx = reqdx;
            pacmandy = reqdy;
            viewdx = pacmandx;
            viewdy = pacmandy;
        }
        if (pacmanx % blocksize == 0 && pacmany % blocksize == 0) {
            pos =
 pacmanx / blocksize + nrofblocks * (int)(pacmany / blocksize);
            ch = screendata[pos];

            if ((ch & 16) != 0) {
                screendata[pos] = (short)(ch & 15);
                score++;
            }

            if (reqdx != 0 || reqdy != 0) {
                if (!((reqdx == -1 && reqdy == 0 && (ch & 1) != 0) ||
                      (reqdx == 1 && reqdy == 0 && (ch & 4) != 0) ||
                      (reqdx == 0 && reqdy == -1 && (ch & 2) != 0) ||
                      (reqdx == 0 && reqdy == 1 && (ch & 8) != 0))) {
                    pacmandx = reqdx;
                    pacmandy = reqdy;
                    viewdx = pacmandx;
                    viewdy = pacmandy;
                }
            }

            // Check for standstill
            if ((pacmandx == -1 && pacmandy == 0 && (ch & 1) != 0) ||
                (pacmandx == 1 && pacmandy == 0 && (ch & 4) != 0) ||
                (pacmandx == 0 && pacmandy == -1 && (ch & 2) != 0) ||
                (pacmandx == 0 && pacmandy == 1 && (ch & 8) != 0)) {
                pacmandx = 0;
                pacmandy = 0;
            }
        }
        pacmanx = pacmanx + pacmanspeed * pacmandx;
        pacmany = pacmany + pacmanspeed * pacmandy;
    }

    public void DrawPacMan(Graphics2D g2d) {
        if (viewdx == -1)
            DrawPacManLeft(g2d);
        else if (viewdx == 1)
            DrawPacManRight(g2d);
        else if (viewdy == -1)
            DrawPacManUp(g2d);
        else
            DrawPacManDown(g2d);
    }

    public void DrawPacManUp(Graphics2D g2d) {
        switch (pacmananimpos) {
        case 1:
            g2d.drawImage(pacman2up, pacmanx + 1, pacmany + 1, this);
            break;
        case 2:
            g2d.drawImage(pacman3up, pacmanx + 1, pacmany + 1, this);
            break;
        case 3:
            g2d.drawImage(pacman4up, pacmanx + 1, pacmany + 1, this);
            break;
        default:
            g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
            break;
        }
    }

    public void DrawPacManDown(Graphics2D g2d) {
        switch (pacmananimpos) {
        case 1:
            g2d.drawImage(pacman2down, pacmanx + 1, pacmany + 1, this);
            break;
        case 2:
            g2d.drawImage(pacman3down, pacmanx + 1, pacmany + 1, this);
            break;
        case 3:
            g2d.drawImage(pacman4down, pacmanx + 1, pacmany + 1, this);
            break;
        default:
            g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
            break;
        }
    }

    public void DrawPacManLeft(Graphics2D g2d) {
        switch (pacmananimpos) {
        case 1:
            g2d.drawImage(pacman2left, pacmanx + 1, pacmany + 1, this);
            break;
        case 2:
            g2d.drawImage(pacman3left, pacmanx + 1, pacmany + 1, this);
            break;
        case 3:
            g2d.drawImage(pacman4left, pacmanx + 1, pacmany + 1, this);
            break;
        default:
            g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
            break;
        }
    }

    public void DrawPacManRight(Graphics2D g2d) {
        switch (pacmananimpos) {
        case 1:
            g2d.drawImage(pacman2right, pacmanx + 1, pacmany + 1, this);
            break;
        case 2:
            g2d.drawImage(pacman3right, pacmanx + 1, pacmany + 1, this);
            break;
        case 3:
            g2d.drawImage(pacman4right, pacmanx + 1, pacmany + 1, this);
            break;
        default:
            g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
            break;
        }
    }

    public void DrawMaze(Graphics2D g2d) {
        short i = 0;
        int x, y;

        for (y = 0; y < scrsize; y += blocksize) {
            for (x = 0; x < scrsize; x += blocksize) {
                g2d.setColor(mazecolor);
                g2d.setStroke(new BasicStroke(2));

                if ((screendata[i] & 1) != 0) // draws left
                {
                    g2d.drawLine(x, y, x, y + blocksize - 1);
                }
                if ((screendata[i] & 2) != 0) // draws top
                {
                    g2d.drawLine(x, y, x + blocksize - 1, y);
                }
                if ((screendata[i] & 4) != 0) // draws right
                {
                    g2d.drawLine(x + blocksize - 1, y, x + blocksize - 1,
                                 y + blocksize - 1);
                }
                if ((screendata[i] & 8) != 0) // draws bottom
                {
                    g2d.drawLine(x, y + blocksize - 1, x + blocksize - 1,
                                 y + blocksize - 1);
                }
                if ((screendata[i] & 16) != 0) // draws point
                {
                    g2d.setColor(dotcolor);
                    g2d.fillRect(x + 11, y + 11, 2, 2);
                }
                i++;
            }
        }
    }

    public void GameInit() {
        pacsleft = 3;
        score = 0;
        LevelInit();
        nrofghosts = 6;
        currentspeed = 3;
    }

    public void LevelInit() {
        int i;
        for (i = 0; i < nrofblocks * nrofblocks; i++)
            screendata[i] = leveldata[i];

        LevelContinue();
    }

    public void LevelContinue() {
        short i;
        int dx = 1;
        int random;

        for (i = 0; i < nrofghosts; i++) {
            ghosty[i] = 4 * blocksize;
            ghostx[i] = 4 * blocksize;
            ghostdy[i] = 0;
            ghostdx[i] = dx;
            dx = -dx;
            random = (int)(Math.random() * (currentspeed + 1));
            if (random > currentspeed)
                random = currentspeed;
            ghostspeed[i] = validspeeds[random];
        }

        pacmanx = 7 * blocksize;
        pacmany = 11 * blocksize;
        pacmandx = 0;
        pacmandy = 0;
        reqdx = 0;
        reqdy = 0;
        viewdx = -1;
        viewdy = 0;
        dying = false;
    }

    public void GetImages()
    {

      ghost = new ImageIcon(Board.class.getResource("../pacpix/ghost.png")).getImage();
      pacman1 = new ImageIcon(Board.class.getResource("../pacpix/pacman.png")).getImage();
      pacman2up = new ImageIcon(Board.class.getResource("../pacpix/up1.png")).getImage();
      pacman3up = new ImageIcon(Board.class.getResource("../pacpix/up2.png")).getImage();
      pacman4up = new ImageIcon(Board.class.getResource("../pacpix/up3.png")).getImage();
      pacman2down = new ImageIcon(Board.class.getResource("../pacpix/down1.png")).getImage();
      pacman3down = new ImageIcon(Board.class.getResource("../pacpix/down2.png")).getImage(); 
      pacman4down = new ImageIcon(Board.class.getResource("../pacpix/down3.png")).getImage();
      pacman2left = new ImageIcon(Board.class.getResource("../pacpix/left1.png")).getImage();
      pacman3left = new ImageIcon(Board.class.getResource("../pacpix/left2.png")).getImage();
      pacman4left = new ImageIcon(Board.class.getResource("../pacpix/left3.png")).getImage();
      pacman2right = new ImageIcon(Board.class.getResource("../pacpix/right1.png")).getImage();
      pacman3right = new ImageIcon(Board.class.getResource("../pacpix/right2.png")).getImage();
      pacman4right = new ImageIcon(Board.class.getResource("../pacpix/right3.png")).getImage();

    }

    public void paint(Graphics g)
    {
      super.paint(g);

      Graphics2D g2d = (Graphics2D) g;

      g2d.setColor(Color.black);
      g2d.fillRect(0, 0, d.width, d.height);

      DrawMaze(g2d);
      DrawScore(g2d);
      DoAnim();
      if (ingame)
        PlayGame(g2d);
      else
        ShowIntroScreen(g2d);

      g.drawImage(ii, 5, 5, this);
      Toolkit.getDefaultToolkit().sync();
      g.dispose();
    }

    class TAdapter extends KeyAdapter {
        public void keyPressed(KeyEvent e) {

          int key = e.getKeyCode();

          if (ingame)
          {
            if (key == KeyEvent.VK_LEFT)
            {
              reqdx=-1;
              reqdy=0;
            }
            else if (key == KeyEvent.VK_RIGHT)
            {
              reqdx=1;
              reqdy=0;
            }
            else if (key == KeyEvent.VK_UP)
            {
              reqdx=0;
              reqdy=-1;
            }
            else if (key == KeyEvent.VK_DOWN)
            {
              reqdx=0;
              reqdy=1;
            }
            else if (key == KeyEvent.VK_ESCAPE && timer.isRunning())
            {
              ingame=false;
            }
            else if (key == KeyEvent.VK_PAUSE) {
                if (timer.isRunning())
                    timer.stop();
                else timer.start();
            }
          }
          else
          {
            if (key == 's' || key == 'S')
          {
              ingame=true;
              GameInit();
            }
          }
      }

          public void keyReleased(KeyEvent e) {
              int key = e.getKeyCode();

              if (key == Event.LEFT || key == Event.RIGHT || 
                 key == Event.UP ||  key == Event.DOWN)
              {
                reqdx=0;
                reqdy=0;
              }
          }
      }

    public void actionPerformed(ActionEvent e) {
        repaint();  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:10:40.943

您不能简单地“调用游戏代码”。您可以学习、理解和重用逻辑并在 Android 中构建新游戏。即使重用这段代码也需要大量的重构。

如果你想构建安卓游戏，那么你可以使用像 Cocos2D 这样的框架。

这是一个很好的教程：

[http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)

# javascript - 如何使用 q.js 承诺处理多个异步操作

> ID：13597909
> 
> 赞同：23
> 
> 时间：2012-11-28T04:37:12.723
> 
> 标签：javascript, asynchronous, callback, task-queue

[注意：这个问题也在此处](https://groups.google.com/forum/#!topic/q-continuum/nY0R3010GM4)的 Q.js 邮件列表中交叉发布。

* * *

我遇到了多个异步操作的情况，[我接受的答案](https://stackoverflow.com/a/13585086/80353)指出，使用诸如 q.js 之类的库来使用 Promises 会更有益。

我确信要重构我的代码以使用 Promises，但由于代码很长，我已经修剪了不相关的部分并将关键部分导出到单独的 repo 中。

repo 在[这里](https://github.com/simkimsia/learn-promises-javascript)，最重要的文件是[this](https://github.com/simkimsia/learn-promises-javascript/blob/master/testqjs.html)。

要求是我希望**pageSizes**在遍历所有拖放文件后不为空。

问题是**getSizeSettingsFromPage**函数中的 FileAPI 操作导致**getSizeSettingsFromPage**是异步的。

所以我不能放置**checkWhenReady();** 像这样。

```
function traverseFiles() {
  for (var i=0, l=pages.length; i<l; i++) {
    getSizeSettingsFromPage(pages[i], calculateRatio);   
  }
  checkWhenReady(); // this always returns 0.
} 
```

这可行，但并不理想。`pages`在所有成功地完成了这个函数 calculateRatio之后，我更喜欢只调用一次 checkWhenReady 。

```
function calculateRatio(width, height, filename) {
  // .... code 
  pageSizes.add(filename, object);
  checkWhenReady(); // this works but it is not ideal. I prefer to call this method AFTER all the `pages` have undergone calculateRatio
  // ..... more code...
} 
```

**如何重构代码以在 Q.js 中使用 Promises？**

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-28T06:02:54.620

下面是我使用 Q.js 的建议。关键是任何时候你想异步做某事，你应该返回一个promise，一旦任务完成你应该解决这个promise。这允许函数的调用者监听要完成的任务，然后做其他事情。

和以前一样，我用 评论了我的更改`// ***`。如果您还有其他问题，请告诉我。

```
 function traverseFiles() {
            // *** Create an array to hold our promises
            var promises = [ ];
            for (var i=0, l=pages.length; i<l; i++) {
                // *** Store the promise returned by getSizeSettingsFromPage in a variable
                promise = getSizeSettingsFromPage(pages[i]);
                promise.then(function(values) {
                    var width = values[0],
                        height = values[1],
                        filename = values[2];
                    // *** When the promise is resolved, call calculateRatio
                    calculateRatio(width, height, filename);
                });
                // *** Add the promise returned by getSizeSettingsFromPage to the array
                promises.push(promise);
            }
            // *** Call checkWhenReady after all promises have been resolved
            Q.all(promises).then(checkWhenReady);
        }

        function getSizeSettingsFromPage(file) {
            // *** Create a Deferred
            var deferred = Q.defer();
            reader = new FileReader();
            reader.onload = function(evt) {
                var image = new Image();
                image.onload = function(evt) {
                    var width = this.width;
                    var height = this.height;
                    var filename = file.name;
                    // *** Resolve the Deferred
                    deferred.resolve([ width, height, filename ]);
                };
                image.src = evt.target.result;
            };
            reader.readAsDataURL(file);
            // *** Return a Promise
            return deferred.promise;
        } 
```

* * *

## 编辑

`defer`创建一个**Deferred**，它包含两部分，a`promise`和`resolve`函数。由`promise`返回`getSizeSettingsFromPage`。基本上，返回一个承诺是一个函数说“我稍后会回复你”的一种方式。一旦函数完成它的任务（在这种情况下，一旦`image.onload`事件被触发），该`resolve`函数将用于解决承诺。这表明任何等待任务已完成的承诺。

这是一个更简单的例子：

```
function addAsync(a, b) {
    var deferred = Q.defer();
    // Wait 2 seconds and then add a + b
    setTimeout(function() {
        deferred.resolve(a + b);
    }, 2000);
    return deferred.promise;
}

addAsync(3, 4).then(function(result) {
    console.log(result);
});
// logs 7 after 2 seconds 
```

该`addAsync`函数添加两个数字，但在添加它们之前等待 2 秒。由于它是异步的，它返回一个 Promise ( `deferred.promse`) 并在 2 秒等待 ( ) 后解决该 Promise `deferred.resolve`。该`then`方法可以在 Promise 上调用，并传递一个回调函数以在 Promise 解决后执行。回调函数在 promise 的分辨率值中传递。

在您的情况下，我们有一系列承诺，我们需要在执行函数之前等待*所有承诺都完成，因此我们使用***了 Q.all**。这是一个例子：

```
function addAsync(a, b) {
    var deferred = Q.defer();
    // Wait 2 seconds and then add a + b
    setTimeout(function() {
        deferred.resolve(a + b);
    }, 2000);
    return deferred.promise;
}

Q.all([
    addAsync(1, 1),
    addAsync(2, 2),
    addAsync(3, 3)
]).spread(function(result1, result2, result3) {
    console.log(result1, result2, result3);
});
// logs "2 4 6" after approximately 2 seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:00:48.133

看起来您应该使用该`Q.all`函数创建一个对应于所有 getSizeSettings 承诺何时实现的主承诺。

[https://github.com/kriskowal/q#combination](https://github.com/kriskowal/q#combination)

```
var ps = [];
for (var i=0, l=pages.length; i<l; i++) {
   ps[i] = getSizeSettingsFromPage(pages[i], calculateRatio);   
}

Q.all(ps).then(function(){ callWhenReady() }) 
```

大多数 Promise 库应该提供类似的方法来进行这种同步。如果你遇到了一个你不能做的事情，那就是将每个单独的 Promise 挂钩到一个回调，该回调会在调用时增加一个共享计数器。当您的计数器到达`n`时，您知道您已经解决了所有承诺，因此您也可以让增量回调调用“真实”回调。

```
//If you did not have Q.all available
//Or had to code this without a promise library

var to_go = pages.length;
for (var i=0, l=pages.length; i<l; i++) {
   getSizeSettingsFromPage(pages[i], calculateRatio)
   .then(function(){
       to_go--;
       if(to_go == 0){
           callWhenReady()
       }
   });
} 
```

请注意，到目前为止，在这些情况下，异步调用都允许并行运行。如果您需要它们按顺序运行，那么通常唯一的方法是将 for 循环重写为递归函数

```
var go = function(i){
    if(i>=pages.length){
        return call_next_step()
    }else{
        return do_ith_calculation(i)
        .then(function(){
            return go(i+1)
        })
    }
};
go(0); 
```

# iphone - 使用Objective c在后台调用类方法

> ID：13597910
> 
> 赞同：12
> 
> 时间：2012-11-28T04:37:13.323
> 
> 标签：iphone, objective-c, ios, performselector

在下面的摘录中，

```
/*A ClassName with instanceMethod and ClassMethod  */

-(void)instanceMethod;

+(void)ClassMethod;

/*To call a instance method in background */

ClassName  class1obj = [ClassName alloc] init];

[class1obj performSelectorInBackground:@selector(instanceMethod) withObject:nil]; 
```

同样，如何在后台调用 ClassMethod 使用`performSelectorInBackground`？

如果可能，请解释一下！请大伙儿牵手..

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T04:46:02.870

打电话

```
[ClassName performSelectorInBackground:@selector(ClassMethod) withObject:nil]; 
```

因为类本身就是对象，所以这将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:36:50.417

请尝试`self`代替班级名称

```
 [self performSelectorInBackground:@selector(methodTobeCalled) withObject:nil]; 
```

希望这对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T12:02:35.450

你应该看看GCD（Grand Central Dispatch），它解决了一般问题“如何在后台执行代码”。不管是调用类方法、调用实例方法、掷骰子、写入文件等等。

例子：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSLog (@"This is code running in the background");
    [MyClass someClassMethod];
    [myInstance someMethodWithInt:1 bool:YES string:@"some string"];
    NSLog (@"Finished with the background code");
}); 
```

适用于任意代码；无需使用选择器，无需编写方法只是为了让选择器在后台运行，无需将参数转换为 NSObject（您不能将 performSelector 与 int 或 BOOL 参数一起使用）。Xcode 会自动为你填写大部分内容。

# ruby-on-rails - Rspec失败/错误测试设计和cancan

> ID：13597916
> 
> 赞同：0
> 
> 时间：2012-11-28T04:37:58.547
> 
> 标签：ruby-on-rails, ruby, rspec, rspec2

我对使用 Rails 进行测试非常陌生，并且似乎让自己迷失在测试的世界中。我目前正在测试我的仪表板控制器，当我从控制器中删除**load_and_authorize_resource**行时，一切都通过了。我正在使用 cancan 进行授权。

**仪表板控制器.rb**

```
def update
@dashboard = Dashboard.find(params[:id])

respond_to do |format|
  if @dashboard.update_attributes(params[:dashboard])
    format.html { redirect_to dashboards_path, notice: 'dashboard was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @dashboard.errors, status: :unprocessable_entity }
  end
end
end 
```

**dashboard_controller_spec.rb**

```
require 'spec_helper'

describe DashboardsController do

  login_user
  before :each do 
    @dashboard = create(:dashboard, dashboard_name: "My Own Dashboard", id: 1)
  end

  describe "GET #index" do

    it "should have a current_user" do 
      subject.current_user.should_not be_nil
    end

    it "renders the :index view" do
      get :index
      response.should render_template :index
    end

    it "Creates new dashboard" do 
      get :new
      response.should render_template :new
    end

  end

  describe "Get #edit" do 

    it "assigns dashboard to @dashboard" do 
      get :edit, id: @dashboard
      assigns(:dashboard).should == @dashboard
    end

    it "renders the :edit template" do 
      get :edit, id: @dashboard
      response.should render_template :edit
    end

  end

end 
```

**我从控制台收到的错误**

```
 1) DashboardsController Get #edit renders the :edit template
 Failure/Error: response.should render_template :edit
   expecting <"edit"> but rendering with <"">
 # ./spec/controllers/dashboard_controller_spec.rb:37:in `block (3 levels) in <top (required)>' 
```

无论如何绕过这个错误而不删除我的dashboard_controller中的load_and_authorize_resource？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:35:42.893

当涉及到 Devise 时测试控制器是一件非常棘手的事情。你没有提供你的 login_user 代码，但我猜它并没有涵盖所有的基础。根据[官方的 Devise 文档](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)，您需要与守望者、Devise 的实用方法等一起提供帮助。我会在这里重复一遍，但它会更长一些，您也可以访问源代码。最相关的部分是：

> 如果您使用任何设计的实用程序方法，控制器规格将无法开箱即用。
> 
> 从 rspec-rails-2.0.0 和 devise-1.1 开始，将设计放入规范的最佳方法是将以下内容添加到 spec_helper...

然后添加他们的示例 controller_macros.rb 并调整一些其他的东西，你应该很高兴。但是，请注意，测试您的控制器规格与测试请求规格不同，您可能会在该解决方案无法解决的不同场景中遇到挂断（请参阅我自己的一些痛苦和发现，网址为[https://stackoverflow.com/ a/13275366/9344](https://stackoverflow.com/a/13275366/9344)）。

# php - 如何监控php变量？

> ID：13597917
> 
> 赞同：0
> 
> 时间：2012-11-28T04:38:09.797
> 
> 标签：php, php-extension

在调试php程序时，我经常使用该函数`var_dump()`来监视变量值的变化，以找出意外发生的地方。这需要很多句子，当然不是正式的方法。像 Zend Studio 这样的 IDE 可以做到这一点，但我更喜欢更简单的方式，比如`var_dump()`. 我认为可能有一个扩展可以做到这一点，它可以用来监视指定的变量并显示它们值的所有变化。但是我无法通过我的努力找到它，你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:56:02.193

尝试使用[http://xdebug.org](http://xdebug.org)。它是免费的，并且能够在错误条件下显示堆栈跟踪，作为分析器等。

# apache - 为什么页面不使用 www 重定向到？

> ID：13597918
> 
> 赞同：1
> 
> 时间：2012-11-28T04:38:13.303
> 
> 标签：apache, .htaccess, http-redirect

在我网站的根目录中，我创建了一个名为`.htaccess`. 并将以下代码放入其中。但是当我访问 **example.com/test.html**时。

它不会重定向到[http://www.example.com/test.html](http://www.example.com/test.html)

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example.com$ [NC];
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

谢谢，请问是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:56:59.337

删除第二行的分号。

尝试这个

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:58:25.760

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# android - 使用 Android 应用内结算出现一些奇怪的行为

> ID：13597921
> 
> 赞同：2
> 
> 时间：2012-11-28T04:39:00.357
> 
> 标签：android, unity3d, google-play, in-app-billing, prime31

在将应用内计费集成到客户的项目中时，我遇到了很多看起来很奇怪的行为。我希望有人可以阐明可能是根本原因的原因以及我可以对它们做些什么（如果有的话）。到目前为止几天的谷歌搜索（很多结果导致堆栈溢出）和一些额外的搜索似乎与我们的问题不太一样，但确实给出了一些类似的问题。

作为购买的背景知识，它是购买一个简单益智游戏的世界/关卡包。我们会显示一个手推车来表明该物品是可购买的，一个旋转/加载图标来表明正在进行购买，并且我们会在购买完成时显示世界信息（这个世界中完成的关卡等）。显示微调器时，您无法开始尝试购买（按钮已禁用），但您可以继续正常玩游戏的可用部分。

这似乎适用于相当多的设备，包括现在他们的一个设备，当他们借给我测试时它无法工作，在对代码进行一些小的更改之后，现在每次都可以工作。为了快速列出我们似乎遇到的问题：

1.  测试用户购买成功，他们会看到默认的 Google Play Toast，但我最多 5 分钟都没有收到购买成功的消息（到目前为止，我们等待的时间最长）。微调器始终显示。
2.  与上述相同，但我们根本没有得到任何回应。将设备放置了一个多小时，但没有任何结果。旋转器永远不会消失。
3.  更令人不安的是，有人告诉我，我的一个客户设备在被告知购买成功后显示了我们期望在购买失败时看到的行为。（即微调器被替换为手推车图标，而不是水平数据）。仅当我在购买后收到失败消息时才会发生这种情况。但是，我没有从这个案例中获得任何日志信息，所以我无法确认。
4.  注意：此特定错误不再发生，但因此我不得不对代码进行一些更改，如果可能的话我想取消这些更改。按“接受并购买”后，用户会看到一条消息“'错误'此时无法处理您的付款。您可能会收到一封电子邮件，要求您验证您的帐户'。” 发生此错误时，我会同时收到成功和失败响应。
5.  在确认付款之前的某个时间点退出购买会导致根本没有收到任何响应，微调器永远不会消失。同样，我没有步骤来重现它，因为描述相当模糊并且没有日志。

请注意，在我们大约一半的测试设备和测试帐户上，购买效果非常好。通常会在 30 秒内收到响应并交付产品。另请注意，Restore Transactions 在所有这些情况下都按预期工作（1、2 和 3 都返回成功响应，而 4 不返回任何内容）。由于问题 2 和 3，我现在将应用程序标记为在启动购买提示后下次启动应用程序时执行恢复事务调用，这似乎是一种解决方法，但问题发生得太频繁以至于无法令人满意.

对于一些快速的技术规格，我使用 Unity3D 和最新版本的 Prime31 插件。我相信这些不是问题，因为我获得的日志信息（通常在问题 2 的情况下）和我自己收集的日志显示没有关于购买状态更改事件的信息，而通常在收到消息时有几个。其中第一个在传递给应用程序之前由设备本身记录。

明天当我访问我的客户办公室时，我应该能够获得受影响设备的列表以及一些日志。但是我认为这与设备无关，因为他们有 2 个 ASUS Nexus 7 可供测试，其中一个始终有效，第二个仍然偶尔显示错误。

任何人都可以对这些问题有所了解吗？这是我第一次尝试使用 Google Play 进行应用内计费，但​​它并不像最初看起来那么简单。

谢谢

# django-models - 在 Django/Python 中将函数作为字段添加到模型中

> ID：13597922
> 
> 赞同：2
> 
> 时间：2012-11-28T04:39:06.050
> 
> 标签：django-models, python-2.7, django-admin, django-1.3, django-admin-filters

**楷模**

```
class A(SiteAwareModel):

    name = models.CharField(max_length = 255, blank = False)
    description = models.TextField(blank = True, null = True)

    class Meta:
        def key_count(self):
            return B.objects.count(self) 
```

**行政**

```
class AAdmin(admin.ModelAdmin):
    list_display = ('key_count')
    list_filter = ('key_count')

admin.site.register(A, AAdmin) 
```

**问题**

我有一个模型 A，它有自己的字段（名称、描述）。此外，模型A通过使用模型B（无外键关系）计算键数。

我想访问管理面板中的 key_count。我可以在管理员中看到一列，意思是 list_display 有效，但是当我尝试在 list_filter 中使用它时，它会引发错误。

“AAdmin.list_filter [1](http://zmsmith.com/2010/04/using-custom-django-querysets/) ”指的是“key_count”，它不指代字段。

**最终结果**

我想制作一个显示 key_count > 10 的过滤器

**我做了什么（没有成功）**

我已经尝试在[这篇](http://zmsmith.com/2010/04/using-custom-django-querysets/)博文的帮助下通过经理来做这件事

**我不想要的**

我不想通过编写新的迁移来改变我的模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:35:34.557

您可以尝试为您的目的创建一个自定义字段类[https://docs.djangoproject.com/en/dev/howto/custom-model-fields/](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)

不想*写*迁移，就让南来做吧^^

[http://south.aeracode.org/](http://south.aeracode.org/)

祝你好运！

# php - PHP - 提交页面返回内部服务器错误

> ID：13597925
> 
> 赞同：1
> 
> 时间：2012-11-28T04:39:28.233
> 
> 标签：php, html, css, login, flat-file

我正在制作一个平面文件登录系统，当我单击 login.php 页面上的提交按钮时，它会转到 protected.php 并返回内部服务器错误，但是当我只加载 protected.php 页面而不使用表单时结果很好。

登录.php

```
<html>
    <link rel="stylesheet" type="text/css" href="style.css">
    <body>
        <center><img src="logo.png"></center>
        <div id="login">
            <form action="protected.php" method="post">
            </br>
            Username  <input type="text" name="user" class="text"/>
            <p></p>
            Password <input type="password"" name="pass" class="text" />
            <p></p>
                <input type="submit" value="Login" class="button">
            </form>
        </div>
    </body>
</html> 
```

受保护的.php

```
<?php
$usr = "admin";
$pass = "admin";

$iusr = $_POST["user"];
$ipass = $_POST["pass"];

if ($iuser !== $usr || $ipass !== $ipass) {
?>
<html>
<script type="text/javascript">
<!--
window.location = "login.php"
//-->
</script>
</html>
<?php
}
?>
<html>
    <link rel="stylesheet" type="text/css" href="style.css">
    <body>

    </body>
</html> 
```

请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:56:01.493

“内部服务器错误”可能意味着几件事，但很可能意味着您的 PHP 代码中有错误。这需要`display_errors`在您的 php.ini 中将属性设置为“1”。问题也可能是启动错误，因此您可能还希望考虑该`display_startup_errors`属性。

[http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

关于代码的两条评论，与您的问题无关：1）表达式`$ipass !== $ipass`似乎是一个错字，因为它总是 return `FALSE`，以及 2）通过关闭 javascript 很容易绕过这个“安全性”。考虑改用`header()`for 重定向。

[http://us2.php.net/manual/en/function.header.php](http://us2.php.net/manual/en/function.header.php)

**编辑：**`$iuser` ...在这种特定情况下，错误是使用未定义的变量。您之前已将其声明为`$iusr`. 打开错误报告或查看日志将为您提供良好的错误消息，以便轻松找到此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:43:43.927

问题是在你的`protected.php`文件中你写了一个错误的条件你的代码`($iuser !== $usr` 应该`if ($iusr !== $usr || $ipass !== $pass) {` 也是条件`$ipass !== $ipass` 应该像`$ipass !== $pass`下面是更新的protected.php文件

```
<?php
$usr = "admin";
$pass = "admin";

$iusr = $_POST["user"];
$ipass = $_POST["pass"];

if ($iusr !== $usr || $ipass !== $pass) {
    ?>
    <html>
        <script type="text/javascript">
            window.location = "login.php"
        </script>
    </html>
    <?php
}
?>
<html>
    <link rel="stylesheet" type="text/css" href="style.css">
    <body>
        Login success
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:23:05.997

登录.php

```
<html>
<link rel="stylesheet" type="text/css" href="style.css">
<body>
    <center><img src="logo.png"></center>
    <div id="login">
        <form action="protected.php" method="POST">
        </br>
        Username  <input type="text" name="user" class="text"/>
        <p></p>
        Password <input type="password"" name="password" class="text" />
        <p></p>
            <input type="submit" name="submit" value="Login" class="button">
        </form>
    </div>
</body> 
```

受保护的.php

```
<?php
$usr = "admin";
$pass = "admin";

$iusr = $_POST["user"];
$ipass = $_POST["password"];
if(isset($_POST["submit"])){
if ($iusr != $usr || $ipass != $pass) {
?>
<html>
<script type="text/javascript">

window.location = "login.php"

</script>
</html>
<?php
}}
?>
<html>
<link rel="stylesheet" type="text/css" href="style.css">
<body>

</body> 
```

# php - 如何回显数组中的变量？

> ID：13597927
> 
> 赞同：-4
> 
> 时间：2012-11-28T04:39:29.347
> 
> 标签：php

是否可以在数组中回显变量？我试图通过 PHP 创建 CSS：

```
class headerStyle{
    // now  creating our CONSTRUCTOR function
    function __construct($args=array()) {
        $this->fields = array('background','color','fontSize','backgroundUrl','imagePosition','Width','Height','backgroundSize','margin','padding','backgroundRepeat');
        foreach ($this->fields as $field) {
            $this->{"$field"} = $args["$field"];
        }
    }
}

$value = $_POST['mainHeaderBg'];

setcookie("TestCookie", $value);
setcookie("TestCookie", $value, time()+3600); 
$var=($_COOKIE["TestCookie"]);
$style = new headerStyle(
       array(
         'background'=>echo $var,
         'color'=>"#F5F3F4",
         'fontSize'=>"24px",
         //backgroundUrl=>"_images/bodyBg1.jpg",
         'backgroundSize'=>"50% 50%",
         'padding'=>"10px 0px 0px 0px",
         'margin'=>"0px 0px 0px 0px",
         'width'=>"100%",
         'height'=>"60px",
         'imagePosition'=>"top-left",
       )
); 
```

我需要传递一个动态变量，以便它可以显示在索引中。我无法在数组中回显变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:51:14.007

你应该`background'=>echo $var`改为`'background'=> $var`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:29:38.780

是的，同意其他用户这条线需要更正

```
'background'=>echo $var, 
```

回到调试，

要获取用于调试目的的数组内容，请将此行放在要检查数组内容的任何位置。最好在“查看源”模式下查看结果（如在 Firefox 中查看源）

```
print_r($yourArray); 
```

# python - 在 python 中，两组列表括号放在一起意味着什么？

> ID：13597930
> 
> 赞同：2
> 
> 时间：2012-11-28T04:39:38.767
> 
> 标签：python, list

例如在 python 中：

```
employees[x][i] = float(employees[x][i]) 
```

很抱歉在手机上发布此内容，因此无法提供太多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:42:28.970

像大多数语言一样，它指的是多维列表中的元素：

```
l = [[0,1,2,3], [1,1,1,1]]
l[1] == [0,1,2,3]
l[1][2] == 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:41:05.603

两个括号表示您正在访问列表（或字典）列表中的元素

所以在这个例子中，它可能看起来像这样

```
In [17]: employees = {'joe': ['100', 0], 'sue': ['200', 0]}
In [18]: x = 'joe'
In [19]: i = 0
In [20]: employees[x][i]
Out[20]: '100' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T05:07:58.297

**python中[]的语法含义：**

在 python 中，[] 运算符至少用于三个目的（可能不完整）：

1.  用字面量定义一个数组，例如 xx = [0,1,2,3]
2.  数组元素索引，如 x1 = xx[1]，要求索引为整数或求值为整数
3.  字典成员检索，如 s = person['firstname'] // person = {'firstname':'san', 'lastname':'zhang'}，在这种情况下，索引可以是 dict 标签可以是的任何内容

将 [] 嵌入 [] 中或 [] 旁边的 [] 时，事情变得复杂，请参见下面的示例：

```
matrix = [[0,1],[2,3]]
e01 = matrix[0][1]

people = [{'fname':'san','lname':'zhang'}, {'fname':'si', 'lname':'li'}]
last1 = people[1]['lname'] 
```

[[]] 和 [][] 互为倒数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T04:41:23.960

我添加了额外的括号来显示如何评估

```
(employees[x])[I] = float((employees[x])[i]) 
```

和一个例子

```
>>> foo = dict(name="Foo", salary=10.00)
>>> bar = dict(name="Bar", salary=12.00)
>>> employees = dict(foo=foo, bar=bar)
>>> employees
{'foo': {'salary': 10.0, 'name': 'Foo'}, 'bar': {'salary': 12.0, 'name': 'Bar'}}
>>> employees['foo']['name']
'Foo'
>>> employees['bar']['salary']
12.0 
```

员工也可以是一个列表（或任何其他类型的容器）

```
>>> employees = [foo, bar]
>>> employees
[{'salary': 10.0, 'name': 'Foo'}, {'salary': 12.0, 'name': 'Bar'}]
>>> employees[0]['name']
'Foo'
>>> employees[1]['salary']
12.0 
```

# intellij-idea - 如何在我写一个 { 左大括号后立即阻止 IntelliJ IDEA 添加右大括号 }

> ID：13597931
> 
> 赞同：1
> 
> 时间：2012-11-28T04:39:53.480
> 
> 标签：intellij-idea, settings

使用 IntelliJ IDEA 时，我写了一个 { 大括号，然后 IDE 立即写一个右大括号 }。

当我编辑代码时，这更令人讨厌。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:31:40.213

有`Settings -> Editor -> Smart keys -> Insert pair bracket`

![在此处输入图像描述](../Images/eb080c68b8e1479bc771856e8226a049.png)

# lwuit - LWUIT：如何用另一个按钮显示菜单命令

> ID：13597932
> 
> 赞同：4
> 
> 时间：2012-11-28T04:39:57.033
> 
> 标签：lwuit, nokia-s40

在 LWUIT 中，我们可以将命令按钮添加到表单中，其`addCommand`功能类似于此链接[http://lwuit.java.net/tutorial/events.html](http://lwuit.java.net/tutorial/events.html)。因为我目前正在开发诺基亚 Asha Full Touch 应用程序以便显示这些命令，所以我只需单击左上角的按钮即可。

但是，我已经创建了自定义标题栏，所以现在我将容器内的 Button 作为我制作的标题栏

![我制作的自定义栏](../Images/a1c27f190e68ba17b14b6663db31dd15.png)

上面的 3 个条纹是带有图像的按钮。

LWUIT 有像 Android 那样的显示菜单`Activity.openOptionMenu`吗？

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:35:39.883

你好！（我在stackoverflow的第一篇文章）

您必须使用 com.nokia.mid.ui 的 PopupList 组件。将它与 LWUIT 一起使用没有问题。

[弹出列表 javadoc](http://www.developer.nokia.com/Resources/Library/Java/_zip/GUID-237420DE-CCBE-4A74-A129-572E0708D428/com/nokia/mid/ui/PopupList.html)

正如您在 javadoc 中看到的那样。这是一个例子：

```
PopupList list1 = new PopupList();
PopupListItem item1 = new PopupListItem("Item1");
PopupListItem item2 = new PopupListItem("Item1", image1);
list1.appendItem(item1);
list1.appendItem(item2);
list1.setVisible(true); 
```

菜单的位置将有利于您的目标。

# asp.net-mvc - .Net SimpleMembership UserProfile 表索引优化

> ID：13597933
> 
> 赞同：1
> 
> 时间：2012-11-28T04:40:01.287
> 
> 标签：asp.net-mvc, authentication, ef-code-first, simplemembership

我正在使用 .Net Simple Membership 并让它在我的 SQL DB 中构建表。
我注意到由以下命令构建的 UserProfiles 表

```
WebSecurity.InitializeDatabaseConnection("MyContext", "UserProfiles", "UserId", "UserName", true); 
```

仅在 UserId 列上有索引。用户名也不应该有约束/索引吗？

登录命令

```
WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe) 
```

看起来它只会知道用户名，因此会执行表扫描以获取用户。

我在这里错过了什么吗？

谢谢

# java - 通过 Android 连接到 Web 服务器上的 Access 的问题

> ID：13597934
> 
> 赞同：1
> 
> 时间：2012-11-28T04:40:02.680
> 
> 标签：java, android, ms-access, odbc, dsn

这是我的问题。我正在为客户端开发一个应用程序，以便他们可以将数据更新到位于 Web 服务器上的 MS Access 数据库中。服务器是为 ODBC 设置的，我确实设置了 DSN。我认为在实际连接到数据库时，我在语法中遗漏了一些东西。设置当前代码后，我收到了“没有合适的驱动程序”异常。

我用“user”和“pass”替换了明显的un/pw。我还用 web 服务器的 url 地址替换了 url，用 myDB.mdb 替换了数据库文件名

这是我的代码：

```
//gets the connection driver
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    } catch (ClassNotFoundException e) {
        System.err.println("Driver name is incorrect or unable to be found.");
        e.printStackTrace();
    }
    try {
        Connection connect = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=D:url/db/myDB.mdb;","user","pass");
        connect.close();
    } catch (java.sql.SQLException ex) {
        // handle any errors
        error.setText(String.valueOf("SQLException: " + ex.getMessage()));
    } 
```

我是使用 Java 连接数据库的新手，所以我确定我遗漏了一些简单的东西，但如果我能得到任何帮助，我将不胜感激。

我已经在网上研究了几个小时，但没有找到任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:27:12.107

您不应该直接从手机连接到位于某处服务器上的数据库。

更好的解决方案是在服务器上设置允许您读取/更新数据库的 Web 服务，然后从 Android 应用程序调用该 Web 服务。

# delphi - 在 Delphi 中填充 TStringGrid

> ID：13597935
> 
> 赞同：1
> 
> 时间：2012-11-28T04:40:20.983
> 
> 标签：delphi, delphi-xe2, tstringgrid

我的 delphi 表单上有一个 TStringGrid 说 StringGrid1 和一个文本框说 textbox1 。当我在 textbox1 中输入任何内容时，它会出现在 StringGrid1 的下一行。

我希望 StringGrid1 中的新条目应该位于顶部而不是底部。我应该更改哪个属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:37:57.693

AFAIK 没有属性可以调整以在 StringGrid 的某个位置*插入一行。*

但是，您始终可以*更改*代码以在网格中为新行腾出空间。

假设您有第一行和第一列*标题*，您可以将其编码为：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
begin
  StringGrid1.RowCount := StringGrid1.RowCount + 1;
  for I := StringGrid1.RowCount - 1 downto 1 do
    StringGrid1.Rows[I] := StringGrid1.Rows[I - 1];
  StringGrid1.Cols[1][1] := Edit1.Text;
  //the commented line comes from my quick test.
  //Edit1.Text := IntToStr(StringGrid1.RowCount);
end; 
```

# php - PHP web 服务，发送大尺寸的 xml 数据

> ID：13597953
> 
> 赞同：0
> 
> 时间：2012-11-28T04:42:21.840
> 
> 标签：php, web-services

下面是我的任务。

我有一个在 codeigniter 中开发的应用程序，该应用程序总是通过 Web 服务从客户那里获取数据。在大多数情况下，数据 (xml) 的大小会很大。这是我卡住的地方。如何通过 Web 服务将这些潜在客户数据发送到服务器。我计划使用 REST Web 服务来实现它

一种选择是读取 xml 数据并将内容作为参数与请求一起发送。喜欢...

```
$xmlfile = "leads.xml";
$xmlRaw = file_get_contents($xmlfile);

include 'RestClient.class.php';

$url = "http://localhost/apps/index/";
$ex = RestClient::post($url,array('requestType' =>'sendLead',
                                                        'username' => $name,
                                                         'pass' =>$pass,
                                                         'leadXML'=>$xmlRaw)); 
```

## 但是在大文件的情况下，我认为它不会正常工作..

另一种选择是这样的......

```
Client side                                                                          server
------------------                                                                  --------------------

// send a request to the server with xml file name             

rest::sendLeads("leads.xml"){                                  |    sendLeads(){
                                                               |
                                                               |     $filename =$this->post('filename');
}                                                              |  // calling a client side function and collecting the xml data
                                                               | $xmldata =  getdata($filename);
                                                               |        }
getdata(filename){                                             |

reading xml content and send back it to the server

return $xmldata;
} 
```

是否有可能实现这样的事情。这里我们不需要将内容作为参数发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:20:53.350

也许您应该每 5（？）分钟在服务器上使用 cron 一次？在客户端，您将发送最后解析的数据。 [cron](http://en.wikipedia.org/wiki/Cron)

# macos - CustomPopup 不工作 Safari，JRE 1.7 Mac OS

> ID：13597959
> 
> 赞同：0
> 
> 时间：2012-11-28T04:42:38.457
> 
> 标签：macos, safari, java, java-7, browser-plugin

我不确定问题出在我的代码上还是与 Mac OS 的 Safari 的 JRE 1.7 插件有关，因为自定义弹出窗口似乎在上述组合中不起作用

但是，当我们尝试进行服务器调用以在由 JComboBox 扩展的自定义组合框中的自定义弹出窗口中填充数据时，它会闪烁弹出窗口几微秒，然后消失。

相同的代码适用于 Mac OS 的 Safari 的 JRE 1.6 插件以及适用于 Windows OS 的 IE 的 JRE 1.7、JRE 1.6 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:19:51.653

没有办法将 1.7 回滚到 1.6。苹果已经确保你不能轻易回去。我已经尝试了网络上的所有修复。没有任何效果。在终端 java -version 中顽固地显示 1.7。除了重新加载 OS X 之外，我没有其他办法。

# java - 以 CSV 格式获取 Excel 数据

> ID：13597965
> 
> 赞同：0
> 
> 时间：2012-11-28T04:43:46.267
> 
> 标签：java, excel, csv, io, jexcelapi

请看下面的代码。我在用`JExcel API`

```
import java.io.*;
import jxl.*;
import java.util.*;

class  ConvertCSV
{
  public static void main(String[] args) 
  {
    try
    {
      //File to store data in form of CSV
      File f = new File("input.csv");

      OutputStream os = (OutputStream)new FileOutputStream(f);
      String encoding = "UTF8";
      OutputStreamWriter osw = new OutputStreamWriter(os, encoding);
      BufferedWriter bw = new BufferedWriter(osw);

      //Excel document to be imported
      String filename = "C:/Users/yohan/Documents/NetBeansProjects/ExcelTest/input.xlsx";
      WorkbookSettings ws = new WorkbookSettings();
      ws.setLocale(new Locale("en", "EN"));
      Workbook w = Workbook.getWorkbook(new File(filename),ws);

      // Gets the sheets from workbook
      for (int sheet = 0; sheet < w.getNumberOfSheets(); sheet++)
      {
        Sheet s = w.getSheet(sheet);

        bw.write(s.getName());
        bw.newLine();

        Cell[] row = null;

        // Gets the cells from sheet
        for (int i = 0 ; i < s.getRows() ; i++)
        {
          row = s.getRow(i);

          if (row.length > 0)
          {
            bw.write(row[0].getContents());
            for (int j = 1; j < row.length; j++)
            {
              bw.write(',');
              bw.write(row[j].getContents());
            }
          }
          bw.newLine();
        }
      }
      bw.flush();
      bw.close();
    }
    catch (UnsupportedEncodingException e)
    {
      System.err.println(e.toString());
    }
    catch (IOException e)
    {
      System.err.println(e.toString());
    }
    catch (Exception e)
    {
      System.err.println(e.toString());
    }
  }
} 
```

我不想将数据写入 CSV 文件，但我**必须**将“字段”加载到名为“filedsBuffer”的 StringBuffer 中，并将数据作为逗号分隔值加载到名为“dataBuffer”的 StringBuffer 中。

但是，当我运行这个程序时，我得到了以下异常。

```
jxl.read.biff.BiffException: Unable to recognize OLE stream 
```

我该如何解决这个问题？如果我不能用这个 API 做到这一点，请随时使用不同的 API 来回答。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:29:38.680

您可以考虑使用[apache-poi](http://poi.apache.org/spreadsheet/quick-guide.html)。它支持最新版本的 ms-excel。这是可以帮助[入门](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/ToCSV.java)的代码-

# wpf - WPF单例用户控件？

> ID：13597966
> 
> 赞同：0
> 
> 时间：2012-11-28T04:43:55.257
> 
> 标签：wpf, user-controls, singleton, single-instance

有没有办法让 UserControl 成为单例？

例如：
我有一个 MainWindow 和 2 个用户控件 {UserControl 'A' 和 UserControl 'B'}
MainWindow 有 2 个按钮 {Button 'UCA' 和 Button 'UCB'}
UserControl 'A' 有一个文本框。
在启动时，我将 UserControl 'A' 加载到 MainWindow。
当我单击按钮“UCB”时，用户控件“B”将替换用户控件“A”，当我单击按钮“UCA”时，用户控件“A”将替换用户控件“B”。

我的问题是：
当 UserControl 'A' 被激活时，我在 TextBox 上键入“Test”，然后我切换到 UserControl 'B'。当我切换回 UserControl 'A' 时，我希望 TextBox 上的文本仍然存在。我的解决方案是创建单例 UserControl 但我不知道该怎么做。

注意：上面只是简单的例子，我想要实现的比在 UserControl 之间切换时在 TextBox 中保持一个文本更复杂。但是，关键是如何在不创建新实例的情况下调用同一个 UserControl 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:46:19.023

相反，您应该在 MainWindow 中加载两个用户控件，并在按下按钮时切换它们的可见性。例如，如果您的 UserControls 被命名`A`并且`B`在 Xaml 中，您将在代码隐藏中为`UCB.Click`处理程序执行以下操作：

```
B.Visibility = Visibility.Visible;
A.Visibility = Visibility.Collapsed; 
```

而`UCA.Click`处理程序则相反。

# java - 使用 java 的 SHA 1 校验和的输出与给出的示例不匹配

> ID：13597969
> 
> 赞同：1
> 
> 时间：2012-11-28T04:44:02.120
> 
> 标签：java, cryptography, sha1

我正在编写代码以使用 java 生成 SHA-1 校验和。我提到了这个链接[http://code.wikia.com/wiki/SHA_checksum](http://code.wikia.com/wiki/SHA_checksum)。我的java代码如下：

```
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class SHAHashing{

    public static void main(String[] args)throws Exception{
            String password = "ABC0010|txnpassword|0|Test Reference|1.00|20110616221931";
            MessageDigest md = MessageDigest.getInstance("SHA-1");
            md.update(password.getBytes("UTF-8")); 
            System.out.println("Converting SHA digest output to Hex String : "+byteArrayToHexString(SHAsum(password.getBytes("UTF-8"))));
            System.out.println("Converting md.digest output to Hex String  : "+byteArrayToHexString(md.digest()));
    }

    public static byte[] SHAsum(byte[] convertme) {
        MessageDigest md = null;
        try {
            md = MessageDigest.getInstance("SHA-1");
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
        return md.digest(convertme);
    }

    public static String byteArrayToHexString(byte[] b) {
         String result = "";
         for (int i=0; i < b.length; i++) {
             result += Integer.toString( ( b[i] & 0xff ) + 0x100, 16).substring( 1 );
         }
         return result;
    }
} 
```

上面的输出是：

> 将 SHA 摘要输出转换为十六进制字符串：`7871d5c9a366339da848fc64cb32f6a9ad8fcadd`
> 将 md.digest 输出转换为十六进制字符串：`7871d5c9a366339da848fc64cb32f6a9ad8fcadd`

我有一个输入字符串：`"ABC0010|txnpassword|0|Test Reference|1.00|20110616221931"` 其对应的输出是：`01a1edbb159aa01b99740508d79620251c2f871d`根据我用来生成指纹的参考文档。

任何人都可以提供有关上述内容的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:41:16.897

这是一个包含参考文档很有帮助的案例。该示例*似乎*来自此文档：[http ://www.securepay.com.au/uploads/Integration%20Guides/SecureFrame_Integration_Guide.pdf](http://www.securepay.com.au/uploads/Integration%20Guides/SecureFrame_Integration_Guide.pdf)

该文档的第 3.3.5 节“交易金额”指定金额字段必须采用“基本货币单位”。所以`1.00`你的字符串需要以美分而不是美元为单位。

如果将 更改为`1.00`，`100`您将获得文档期望的 SHA-1 总和。

但是，这两者都不是您报告的金额。

重新检查您的文档并确认您没有遗漏基础数据的转换。

# java - 10 英尺 UI 轮播布局菜单

> ID：13597973
> 
> 赞同：2
> 
> 时间：2012-11-28T04:44:56.300
> 
> 标签：java, user-interface

这有点难以解释，但我想做一个类似于这个的 UI

![截屏](../Images/c8d67400a5a200d6380b887526dec9db.png)

在爪哇。我一直在考虑使用[这个库](http://code.google.com/p/java-universal-tween-engine/)，但有更好的选择吗？

# servicestack - 如何动态注册/注销服务

> ID：13597979
> 
> 赞同：1
> 
> 时间：2012-11-28T04:45:53.230
> 
> 标签：servicestack

我知道您可以通过在 AppHostExtensions.cs 中的 appHost 扩展方法中调用 RegisterService 方法在运行时注册服务。效果很好。有没有办法在运行时取消注册服务或清除所有服务并重新注册它们？

我需要这个，因为我想要一个插件类型结构，其中一个 dll 可以放在一个文件夹中，并且 servicestack 在运行时注册所有服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:07:24.657

不， [ServiceStack](http://www.servicestack.net/)不支持在运行时取消连接和取消注册单个服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:37:21.323

我想出了一个对我有用的简单的蛮力方法。更愿意加载和卸载单个服务，但这种方法可以。

我在我的 AppHost 文件中添加了一个方法

```
public static void Clear()
{
    Instance = null;
} 
```

然后在我想重新加载服务堆栈的 mvc 控制器方法中，我调用

```
AppHost.Instance.Dispose();
AppHost.Clear();
new AppHost().Init(); 
```

这将重新加载所有内容并重新初始化可以获取新插件服务 dll 的服务

# visual-studio - Visual Studio 2012 视频问题

> ID：13597986
> 
> 赞同：1
> 
> 时间：2012-11-28T04:46:31.857
> 
> 标签：visual-studio, video

![在此处输入图像描述](../Images/7fd21d2af60ca066acb57fa5d6963bb4.png)

有没有其他人遇到过如所附屏幕截图中所示的问题？当我运行 VS 2012 时，如果我将鼠标悬停在文本上，我会看到这些彩色框，如果我将鼠标悬停在菜单上，下面的文字就会消失。安装程序中也出现了类似的问题，如果您在源代码编辑器中进出标签，有时您会看到填满整个屏幕的巨大文本。

从 VS 2012 Web express 截取的屏幕截图，但它也发生在 C# express 上。2008和2010安装在同一台机器上没有问题。

这是一台 Razer Blade 笔记本电脑（660M 显卡），安装了最新的 nVidia 驱动程序和 Win 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:59:52.767

更新：我通过在 VS 选项菜单中关闭硬件加速来解决视觉故障。希望对 VS 或驱动程序更新的修复将允许重新打开加速而不会产生奇怪的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T07:43:04.517

我遇到了这个问题，只是在搜索 VS2012 显示故障并遇到相反的情况，我看到选择文本是零星的问题（例如，当我从第 1 行拖到第 4 行时，它会在视觉上选择第 1 行和第 4 行，留下 2 和 3未标记。）

快速打字时光标响应也很慢，一般来说，任何文本编辑器的性能都很差。

我把它归结为运行win8 VM和我遇到的其他一些问题，但是在阅读您的答案时，我检查了性能设置，发现硬件加速已关闭，因为它具有“根据性能自动调整设置”选择的选项。

重新打开硬件加速解决了我的问题！有点与您的问题相反，但认为值得添加。

# ios5 - ios 的 Twitter 框架 - 我怎样才能让登录页面出现？

> ID：13597989
> 
> 赞同：2
> 
> 时间：2012-11-28T04:46:41.760
> 
> 标签：ios5, frameworks, twitter, xcode4.5

我一直在四处寻找，似乎找不到答案。如果用户没有在他们的设备上登录 Twitter 并且他们进入了我的应用程序..如果他们点击了我提供的 Twitter 按钮，我如何将他们引导到 Twitter 登录页面？

他们是 Twitter 框架提供的登录页面吗？还是我需要引导用户转到设置页面并通过那里登录？

任何能引导我走向正确方向的帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:56:46.027

正如我在评论中所说，由于通过此链接此处无法显示 twitter 登录屏幕，因此他们正在显示警报

[在 iOS5 中使用 Twitter 框架提示登录警报？](https://stackoverflow.com/questions/9667921/prompt-login-alert-with-twitter-framework-in-ios5)

# jakarta-ee - 在 Tomcat 和 Jersey 中提供相同静态页面的多个 URL？

> ID：13597993
> 
> 赞同：0
> 
> 时间：2012-11-28T04:47:27.157
> 
> 标签：jakarta-ee, tomcat, servlets, jersey

我正在使用backbone.js 在我的Web 应用程序上进行客户端路由。

为了让这个客户端路由工作，我需要所有 URL 返回相同的 html 页面，然后路由将在 JavaScript 中在该页面上完成。

我将 Jersey + Tomcat 用于我的静态页面和 servlet。如何让所有 URL 提供相同的页面？（即所有与 MyWebbApp/App/** 匹配的 URL 以提供我的 index.html 页面）。

提前致谢！

编辑：

我会使用什么正则表达式？我想要 MyWebApp/App MyWebApp/App/MyWebApp/App/other MyWebApp/App/other/other...

都包括在内。我试图这样做，但由于某种原因，我无法获得 1 个正则表达式来涵盖所有这些情况。我得到的最接近的是：

@Path("MyWebApp/App/{some_var_name_i_never_use: .*}")

但这不包括 MyWebApp/App 或 MyWebApp/App/ 案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:49:49.613

您可以将 Jersey 的过滤器用于静态内容。这是一篇关于它的[博客文章](http://www.flamingpenguin.co.uk/blog/2010/09/02/serving-static-content-and-jersey/)。您只需要定义另一个过滤器来处理将所有内容映射到您的 index.html 页面。请注意，在 Jersey 2.0 中，参数名称已更改为`jersey.config.servlet.filter.staticContentRegex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:06:06.773

您可以使用 servlet 并将所有页面重定向到特定页面

您可以使用正则表达式来获取所有需要重定向的页面

```
response.sendRedirect("page"); 
```

# hadoop - 如何使用 hadoop 在 cassandra 中运行字数统计示例？

> ID：13597995
> 
> 赞同：1
> 
> 时间：2012-11-28T04:48:04.153
> 
> 标签：hadoop, count, word, cassandra

我可以使用 hadoop 进行字数统计，现在我想将 cassandra 与 hadoop 一起使用。我想在 cassandra 中运行字数统计示例，但我不明白该怎么做。我通读了示例中的自述文件，但没有提及如何或何时启动 hadoop。我有点困惑。我怎样才能做到这一点？逐步解释将非常有帮助。

问候，

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-28T21:50:52.517

我做过一次，在这里做了一些笔记

[http://blog.alvazan.com/165/how-to-set-up-the-cassandra-wordcount-example/](http://blog.alvazan.com/165/how-to-set-up-the-cassandra-wordcount-example/)