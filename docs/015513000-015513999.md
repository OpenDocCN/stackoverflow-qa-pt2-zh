# StackOverflow 问答 15513000-15513999

# xcode - ios 6.1 twitter 和 facebook 设置不显示允许的应用程序

> ID：15513004
> 
> 赞同：1
> 
> 时间：2013-03-20T00:18:00.067
> 
> 标签：xcode, facebook, twitter, settings, acaccountstore

我有一个 ios 6.1 模拟器的大问题。我的应用程序未显示在手机（模拟器）设置中。见上图：

![脸书设置](../Images/d2b8c272a6cf7b4b4eebb4fa6c505f81.png)

![在此处输入图像描述](../Images/02496cc59ec3b6cee737bed7f8860647.png)

请求帐户允许的代码是正确的，在物理设备上有效：

```
ACAccountStore *account = [[ACAccountStore alloc] init];
ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:
                              ACAccountTypeIdentifierTwitter];

[account requestAccessToAccountsWithType:accountType options:nil
                              completion:^(BOOL granted, NSError *error)
 {
     if (!granted){
         NSLog(@"____TW not granted:%@ ",error.localizedDescription);
     } else {
         NSLog(@"____TW granted");
     }

 }]; 
```

怎么解决呢？我试图重新初始化模拟器但没有效果。

谢谢

# c# - 使用 Storyboard 为 3D 对象设置动画

> ID：15513005
> 
> 赞同：1
> 
> 时间：2013-03-20T00:18:05.700
> 
> 标签：c#, wpf, animation

我正在使用 C# 中的 3D 对象，并且我一直在尝试为立方体设置动画以使其在自己的轴上旋转。此外，我需要能够控制旋转方向并能够暂停动画。

我目前的方法是创建一个故事板并尝试访问在 XAML 上定义的“立方体”对象，但无济于事。谁能指出我做错了什么？

```
 this.RegisterName("cube", cube);    
    myStoryboard = new Storyboard(); 
    RotateTransform3D myRotateTransform = new RotateTransform3D(new AxisAngleRotation3D(new Vector3D(0, 1, 0), 0));
    Rotation3DAnimation myRotationAnimation =  new Rotation3DAnimation(Rotation,AnimationSpeed);
    myRotationAnimation.RepeatBehavior = RepeatBehavior.Forever;
    myRotateTransform.Rotation.BeginAnimation(AxisAngleRotation3D.AxisProperty, myVectorAnimation);
    myStoryboard.Children.Add(myRotationAnimation);
    Storyboard.SetTargetName(myRotationAnimation, "cube");
    Storyboard.SetTarget(myRotationAnimation,cube.Transform);
    myStoryboard.Begin(); 
```

此代码产生的错误是：

```
Cannot animate '(0)' on an immutable object instance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:55:25.427

当你说无济于事时，你现在处于什么情况？如果您当前在程序开始时遇到异常，我的猜测是尝试`Storyboard`在 xaml 中定义您的，或者相反地在 c# 中定义您的多维数据集并调用`RegisterName`您的`FrameworkElement`. 如果不是，请详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:03:49.727

我会在 XAML 中声明 StoryBoard（因为您可以在 Blend 中非常轻松地创建您想要的内容，或者在 XAMl 中创建所有内容，然后在 C# 中对其进行调整，无需在代码中创建所有内容（这是一场噩梦） ）。

这是 XAML 中的多维数据集

我在这里做了一个旋转的 3d 立方体：http: [//www.codeproject.com/Articles/30078/WPF-A-3D-screensaver-written-in-WPF](http://www.codeproject.com/Articles/30078/WPF-A-3D-screensaver-written-in-WPF)

# opennlp - 什么是使用 OpenNLP 查找颜色、单位、大小的好策略

> ID：15513008
> 
> 赞同：0
> 
> 时间：2013-03-20T00:18:12.910
> 
> 标签：opennlp

假设我们有一个这样的字符串：

```
4 pallets of books with a weight of 437 kg. The pallets measure 80 x 120 x 120 cm each and are protected with red shrinkwrap. 
```

使用 OpenNLP 提取此类信息（尤其是颜色、重量和尺寸）的最佳方法是什么……考虑一些定制的语料库和自己的培训……但我不知道哪种方法是最好的开始。

```
<pallet amount>4</pallet amount> pallets of <product>books</product> with a weight of <weight>437</weight> <weightUnit>kg</weightUnit>. The pallets measure <height>80</height> x <width> 120 </width> x <length>120 </length> <measurementUnit>cm</measurementUnit> each and are protected with <color>red</color> shrinkwrap. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T18:15:37.037

您只列出了一种方法（使用 OpenNLP 进行定制培训），所以我不知道您认为您的其他选择是什么。这种方法几乎可以肯定是您最好的方法，除非您要搜索的短语是 (a) 常规短语和 (b) 与其他短语不同的短语，在这种情况下，您可以使用正则表达式。

有各种各样的软件包可以让你训练和标记：OpenNLP 是其中之一，Stanford NE 是另一个。他们使用不同的训练方法，这会影响你的结果。但是一旦你有了你的训练数据，你就可以用不同的引擎进行尝试，看看效果如何。

# java - 将文本文件信息存储到数组

> ID：15513012
> 
> 赞同：1
> 
> 时间：2013-03-20T00:18:38.197
> 
> 标签：java, arrays, text

我正在尝试显示迄今为止玩过的游戏的结果，我有 3 个文本文件（`results`和`fixtures`）`teamsOrPlayers`。我希望能够将其读`teamNames`入一个数组，然后能够描绘出类似的结果（阿森纳 2:1 曼城）

```
 1:    import java.io.*;
 2:    import java.util.*;
 3:    import javax.swing.JOptionPane;
 4:
 5:    public class Text3
 6:    {
 7:        public static void main(String args[])
 8:        {
 9:
10:           // Declaring the text files
11:           File results = new File ("PremiershipResults.txt");
12:           File fixtures = new File ("PremiershipFixtures.txt");
13:           File teamsOrPlayers = new File("PremiershipTeamsOrPlayers.txt");
14:
15:           String lineFromFile ;
16:
17:           //Decalring 2 arrays to store the fixtures and results in
18:                 int fixturesArray [] ;
19:           int resultsArray [] ;
20:
21:                 //Im not sure whether these are needed just something i found on the                             internet
22:                 int count = 0 , teamsCount = 0 , teamNumber;

23:         //This is stating how many teams there are and adding 1 to count everytime there is a team

24:                 Scanner input = new Scanner (teamOrPlayers)
25:         while (input.hasNext())
26:         {
27:             input.nextLine();
28:             count++;
29:         }
30:         input.close();
31:
32:         String teamNames [] = new String [count] ;
33:         Scanner input = new Scanner (teamsOrPlayers);
34:         while (input.hasNext())
35:          {
36:             lineFromFile = input.nextLine();
37:             //The text files are seperated by commas eg. Results file would be as follows - 1,2,3 and this means fixture 1 and the result is 2-3
38:
39:             teamsArray = lineFromFile.split(",") ;
40:
41:
42:
43:         //This is the code i got off a friend and he said it would work if i can store the info into arrays

44:
45:
46:             for(int i = 0; i < results.get(0).size(); i++)
47:             {
48:              int homeTeam = Integer.parseInt(fixtures.get(1).get(i));
49:              int awayTeam = Integer.parseInt(fixtures.get(2).get(i));
50:              String homeTeamStr = teamsOrPlayers.get(1).get(homeTeam - 1);
51:              String awayTeamStr = teamsOrPlayers.get(1).get(awayTeam - 1);
52:
53:              int homeResult = Integer.parseInt(results.get(1).get(i));
54:              int awayResult = Integer.parseInt(results.get(2).get(i));
55:
56:              System.out.printf("%s %s - %s %s\n", homeTeamStr, homeResult, awayResult,     awayTeamStr);
57:          }
58:      }
59:      }
60:  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:43:49.460

代码审查意见......

*   您的缩进不一致。使其保持一致将使您的代码更容易阅读。标准是什么并不重要，但你应该有一个标准，尽管我建议在编写 Java 代码时遵循 Java 标准。
*   就像写散文一样，空格很重要。将执行类似操作的代码组合在一起，并使用换行符分隔它们，就像使用段落一样。这将使您的代码更易于阅读 - 对您和其他人都是如此。注释和他们注释的代码之间通常不应该有空行。
*   您在第 25 行有一个循环来预处理文件并计算出您有多少行。我怀疑您这样做是因为您使用的是数组，而您还没有了解 Vector 之类的类。对于家庭作业，这无关紧要，但如果这是调用数千次的生产代码，它可能会变成瓶颈。您最终将学习如何编写高效的代码，因此请将此评论视为对该主题的非常简短的介绍。
*   命名您的变量以表示它们真正包含的内容。例如，teamArray 似乎包含来自 PermierShipTeamsOrPlayers.txt 的一行，它似乎代表了单场比赛的结果。将其命名为“teamsArray”意味着它包含一组不同团队的数组 - 一个列表。一个更好的名字是gameResult。此外，您不需要在变量名中指定变量的类型。查找“反向波兰表示法”，您会发现将类型放在名称中通常是代码维护问题。

# python - 如何计算 Python 文本文件中两个单词出现的次数？

> ID：15513020
> 
> 赞同：-2
> 
> 时间：2013-03-20T00:19:46.427
> 
> 标签：python, file, text, count

我有一个名为 dogs.txt 的文本文件，其中包含以下几行。

> '#'颜色体毛类型
> 
> 白大硬保守
> 
> 黄色大硬保守
> 
> 棕色大号软暴力
> 
> 黄色大号软保守
> 
> 棕色小硬保守
> 
> 棕色小硬保守
> 
> 白色小硬保守
> 
> 黄色小软暴力
> 
> 黄色小硬暴力
> 
> 棕色大硬保守
> 
> 白色大软保守
> 
> 黄色小软暴力
> 
> 棕色小软保守
> 
> 棕色大硬暴力
> 
> 棕色小硬保守
> 
> 黄色小硬暴力

每条线代表一只狗。当人员输入 dogs.txt 时，我希望输出显示两件事。

1.  有多少只狗？查看

2.  有多少狗是黄色和暴力的？

输出会告诉你有 16 条狗。

接下来我需要做的是找出这 16 条狗中有多少是黄色和暴力的。我一直坚持如何做到这一点。我想我将不得不使用 infile.read() 但我不确定如何。请帮助各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:05:38.140

这是检查黄色和暴力号码的快速方法：

```
with open('dogs.txt') as f:
    f.readline() # Skip first line
    print sum({'yellow','violent'}.issubset(line.split()) for line in f) 
```

但是，当我添加行号检查时，它并不那么优雅

```
with open('dogs.txt') as f:
    f.readline() # Skip first line
    i, num_dogs = 0, 0
    for line in f:
        num_dogs += {'yellow','violent'}.issubset(line.split())
        i += 1
    print i, num_dogs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:23:24.290

```
yellow_and_violent = 0    
for line in infile:
    if line.strip() and line[0]!='#':               
        lines+=1
    if ('yellow' in line) and ('violent' in line'):
        yellow_and_violent += 1 
```

还有几件事：

*   如果找不到文件，而不是将变量设置为不分析文件，您可以引发自定义异常
*   你不应该使用类名作为变量名（例如`file`）

这使：

```
import os.path

filename = input("Enter name of input file >")
try:
    infile = open(filename, "r")
except IOError:
    raise Exception("Error opening file '%s', analysis will not continue" % filename)

dogs = 0
yellow_and_violent = 0

for line in infile:
    if line.strip() and line[0]!='#':               
        dogs += 1
    if ('yellow' in line) and ('violent' in line):
       yellow_and_violent += 1
print("Total dogs =",dogs)
print("Yellow and violent dogs = ", yellow_and_violent) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T00:25:52.297

使用正则表达式：

```
import os.path
import sys 
import re
reg = re.compile("^yellow.*violent")
try:
    file=sys.argv[1]
    infile=open(file,"r")
except IOError:
      raise Exception("open '%s' failed" % filename)
lines=0
yv=0
for line in infile:
  if line.strip() and line[0]!='#':
    lines+=1
    if reg.match(line):
      yv+=1
print("Total dogs =",lines)
print("Total yv dogs =",yv) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T03:58:20.413

```
dog_counter = 0
yellow_and_violent = 0
with open('dog.txt', 'r') as fd:
    for line in fd.readlines():
        if line.startswith("'#'") or (not line.strip()):
            continue
        dog_counter += 1
        if ('yellow' in line) and ('violent' in line):
            yellow_and_violent += 1
print("Total dogs: %d" % dog_counter)
print("yellow and violent dogs: %d" % yellow_and_violent) 
```

# heroku - 静态资产的路由错误

> ID：15513022
> 
> 赞同：0
> 
> 时间：2013-03-20T00:19:50.520
> 
> 标签：heroku, assets

我的静态资产出现路由错误问题。我的日志中不断出现以下错误：

```
2013-03-20T00:11:12+00:00 app[web.1]: Started GET "/assets/sprite-8bit.png" for 67.231.196.182 at 2013-03-20 00:11:12 +0000
2013-03-20T00:11:12+00:00 app[web.1]: 
2013-03-20T00:11:12+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/assets/sprite-8bit.png"):
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:54:in `process'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
2013-03-20T00:11:12+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/thin.rb:13:in `run' 
```

我什至找不到在我的代码或资产中调用 sprite-8bit.png 文件的位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:06:02.620

问题在于添加 Hello Bar。我未能将图像添加到它试图访问的资产管道中。

# typo3 - GMENU 不显示图像

> ID：15513027
> 
> 赞同：0
> 
> 时间：2013-03-20T00:20:23.467
> 
> 标签：typo3, typoscript

GMENU 不显示插入有印刷文字的图像。当我查看我的页面代码源时，我发现从typo3temp/menu 中插入了一个图像，但问题是这个文件夹是空的。我的代码是：

```
lib.menuhoriz = HMENU
lib.menuhoriz {
     wrap = <div class="themeMenu">|</div>
     entryLevel = 1

     1 = GMENU
     1 {

     NO {
        wrap = <div class="themeMenuItem">|</div>
        37 = IMAGE
        37.file = fileadmin/templates/templatePortail/images/cooperation.gif
    }

   }

} 
```

谢谢你。

# c# - 如何使用流利的断言比较列表？

> ID：15513030
> 
> 赞同：20
> 
> 时间：2013-03-20T00:20:41.177
> 
> 标签：c#, unit-testing, xunit, fluent-assertions

我想比较一个对象列表，忽略列表中对象的顺序，只比较对象中的一些属性，目前我正在使用以下代码执行此比较：

```
actual.Should().NotBeNull();
actual.Count.Should().Be(expected.Count);
//compare ignoring order
foreach (var exp in expected)
    actual.Should().Contain(act =>
        act.IndividualId.Equals(exp.IndividualId)
        && act.Email.Equals(exp.Email)
        && act.FirstName.Equals(exp.FirstName)
        && act.LastName.Equals(exp.LastName)
    ); 
```

然而，这似乎不太理想，因为当出现故障时，您不会打印出预期值。是否有使用流利断言执行此比较的内置机制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T06:06:06.810

不是现在。我们确实有 FA 2.0 的新[等效断言](http://www.continuousimprover.com/2012/09/asserting-object-graph-equivalence.html)语法，但这也将验证对象是否以正确的顺序出现。对于 FA 2.1，我正在尝试支持这一点，但我不确定这是否可行。这基本上意味着它必须将集合项后面的整个对象图与集合中每个其他项的对象图进行比较。肯定会比较慢。

# php - 使用 AJAX 和 PHP 进行身份验证

> ID：15513031
> 
> 赞同：0
> 
> 时间：2013-03-20T00:20:43.890
> 
> 标签：php, mysql, ajax

我制作了一个简单的程序来模拟使用 AJAX 和 PHP 的身份验证。以下是我的代码。它将重定向到“/？” 但什么也没发生。我尝试`checkLogin(); return false;`在`onclick`事件中使用，但它没有用。

**索引.php**

```
<script type="text/javascript" src="validation.js"></script>
<form>
    <p>
        <label>Username <abbr title="Required">*</abbr></label>
        <input id="usernamelogin" type="text" value="" />
    </p>
    <p>
        <label>Password <abbr title="Required">*</abbr></label>
        <input id="passwordlogin" type="text" value="" />
    </p>                
    <p>
        <input id="login" type="submit" value="Login" onclick="checkLogin()" />
    </p>
</form> 
```

**验证.js**

```
function checkLogin(){
    var u = document.getElementById("usernamelogin").value;
    var p = document.getElementById("passwordlogin").value;

    if(window.XMLHttpRequest){
        xmlhttp = new XMLHttpRequest();
    }
    else{
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onReadystatechange = function(){
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
            if(xmlhttp.responseText == u){
                alert(':)');
            }
            else{
                alert(':(');
            }
        }
    }

    xmlhttp.open("GET", "login.php?u=" + u + "&p=" + p, true);
    xmlhttp.send(); 
} 
```

**登录.php**

```
<?php
    $u = $_GET['u'];
    $p = $_GET['p'];

    $host = 'localhost';
    $user = 'root';
    $pass = '';
    $db = 'db';

    $con = mysql_connect($host, $user, $pass);
    if(!$con) die("Could not connect: " . mysql_error());

    mysql_select_db($db, $con);
    $query = "select username from login where username = '" . $u . "' and password = '" . $p . "'";
    $result = mysql_query($query);
    $row = mysql_fetch_array($result);
    echo $row['username'];
    mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:04:24.510

我更改以下代码

```
xmlhttp.onReadystatechange 
```

到

```
xmlhttp.onreadystatechange 
```

它有效。并且还用于`onclick="checkLogin(); return false;"`输入`type="submit"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:23:19.273

您可以做的是从输入 type="submit" 中删除 onclick 事件并将其添加到表单中：

```
<form onsubmit="return checkLogin()"> 
```

要让它工作，你必须添加

```
return false 
```

到你的javascript函数，就在你关闭函数之前

# bash - Bash + SFTP shell：对过滤后的文件列表进行排序？

> ID：15513032
> 
> 赞同：1
> 
> 时间：2013-03-20T00:20:56.653
> 
> 标签：bash, shell, sftp

我在与 SFTP 服务器交互时遇到了一个奇怪的问题。我需要做的是登录，找到满足特定条件的最新文件，然后下载。所有这些都来自 bash 脚本。到目前为止，它的完成方式是简单地运行`ls -lt`并获取输出的第一行：

```
echo "ls -lt" > tmp.sftp
sftp -b tmp.sftp user@ftps.server.com:/inbox 1>sftp.log 2>&1

FILE=$(cat sftp.log | sed -n 3p |  awk '{print $NF}')

echo "get $FILE" > tmp.sftp
sftp -b tmp.sftp user@ftps.server.com:/inbox 
```

但是，他们最近开始将其他文件（我不关心）放到同一个文件夹中。我尝试将代码更改为 do `ls -lt blah*`，但由于某种原因，当存在通配符过滤器时，文件列表以相反的顺序排序......

我觉得我解决这个问题的方式很荒谬，应该有更好的方法。我看哪个方向？卷曲？得到？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:39:24.747

您可以通过添加*-r*标志来反转*ls的输出顺序。*

 *```
ls -ltr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:02:46.390

如果你能做到`sftp`，你可以做到`ssh`和`scp`。它们都使用相同的守护进程`sshd`：：

这可能会使您的任务比尝试通过`scp`.

使用`ssh`，您可以执行远程命令并将该远程命令报告回您的系统：

```
$ ssh user@ftps.server.com ls -lt inbox 
```

这将按名称顺序列出远程系统上的文件。顺便说一句，为什么整个命令都包含`-l`在`ls`命令中？为什么不简单地这样做：

```
$ ls -t | head -1 
```

这将为您列出最新的文件，您可以远程执行此操作：

```
$ FILE=$(ssh user@ftps.server.com ls -t inbox | head -1) 
```

拥有该文件后，您可以使用`scp`它来复制它：

$ scp user@ftps.server.com:/inbox/$FILE 。*

# makefile - GNU Make 默认为低分辨率时间？

> ID：15513033
> 
> 赞同：4
> 
> 时间：2013-03-20T00:21:00.507
> 
> 标签：makefile, gnu-make

GNU Make 默认使用文件的高分辨率时间戳。有没有办法为整个makefile关闭它？（不只是在[.LOW_RESOLUTION_TIME 特殊目标](http://www.gnu.org/software/make/manual/html_node/Special-Targets.html)中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-04T05:04:53.230

不，默认情况下，您不能对整个 makefile 使用低分辨率。

# javascript - 使用 polyfill 可以在多大程度上模拟 Shadow DOM？

> ID：15513039
> 
> 赞同：20
> 
> 时间：2013-03-20T00:21:49.083
> 
> 标签：javascript, dom4, shadow-dom, toolkitchen

Shadow DOM W3C 草案能否通过提供用于搜索和遍历 DOM 的自定义函数在 JavaScript 中进行 polyfill？这已经完成了吗？我发现的尝试是相当温和的垫片，并且似乎没有做出太多努力来模仿规范。

我很感激这不是一件容易的事，但肯定有人仔细考虑过吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T18:50:11.030

在过去的几个月里，我一直在研究这个确切的问题。

底线有一个适用于常青浏览器的polyfill [https://github.com/webcomponents/polyfills/tree/master/packages/webcomponentsjs](https://github.com/webcomponents/polyfills/tree/master/packages/webcomponentsjs)

*^ 像 @host 这样的 CSS 功能的 polyfill 还没有，即将推出*

所以，是的，polyfill 是一件很难的事情，特别是因为我们必须发明二级 DOM 树。我们试图使其尽可能用户友好，这需要使用相当侵入性的包装技术。

换句话说，如果你`div = document.createElement('div')`，你会得到一个看起来像 DIV 并且工作起来像 DIV 的东西，但实际上是一个 Wrapper 对象。当然，最终目标是让您的代码无论是在 polyfill 下还是在本机实现下运行，看起来都一样。

它不是 100% 防弹的。特别是我们不可能为`document`你包装，所以你必须自己做，有点像这样：

```
wrap(document).querySelector(...) 
```

除了`document`问题之外，包装器旨在透明地工作。这是全新的，所以我为缺乏文档道歉。我们正在努力解决这个问题。

如果您有任何疑问或问题，请[提出](https://github.com/webcomponents/polyfills/issues)问题，我们乐于获得反馈。还有一个电子邮件频道用于讨论这个 polyfill（以及该组织中的其他 polyfill），地址为 polymer-dev@googlegroups.com。

> > 我怀疑这些东西是否被广泛实施

没错，但至少在 Chrome 中。

# c# - 如何创建本地日历？

> ID：15513040
> 
> 赞同：2
> 
> 时间：2013-03-20T00:21:59.947
> 
> 标签：c#, iphone, ios, xamarin.ios, eventkit

我正在尝试创建一个新的 iOS 本地日历来存储与我的应用程序相关的事件。这样做而不是仅仅存储 EventIdentifiers 的原因是因为这个应用程序可以在多个设备之间同步。由于 EventIdentifier 是只读的......这不会很好地同步。

我正在这样做：

```
EKCalendar ticklerCalendar = new EKCalendar () { Title = "ClientTickler" }; 
```

它需要传递给构造函数的 3 个重载之一......但是，我不知道如何形成它需要传入的对象。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:44:38.240

如果通过*3 个重载*，您的意思是：

```
public EKCalendar (IntPtr handle);
public EKCalendar (NSObjectFlag t);
public EKCalendar (NSCoder coder); 
```

那么这些**不是**你要找的。它们主要用于与本机代码的互操作或继承。

您可以使用的是静态方法`EKCalendar.Create`。你给它一个`EKEntityType`类型（`Event`或`Reminder`）和一个`EKEventStore`商店。这个[答案](https://stackoverflow.com/q/3924128/220643)有 Objective-C 这样做。

# android - 意图不加载下一个活动

> ID：15513044
> 
> 赞同：-1
> 
> 时间：2013-03-20T00:22:22.697
> 
> 标签：android

是什么原因会影响我不加载下一个活动的意图我已经修复了我的清单意图是正确的按钮是好的并且活动很好基本上我没有任何错误或我没有看到任何可以任何人为我清除这些东西我需要帮助..如果你想检查它，这是我的意图

```
***Home activity***
package com.bpi.gears;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;

public class Home extends Activity {

 ImageButton btn_profile;
 Intent intent;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    btn_profile = (ImageButton)findViewById(R.id.btn_profile);

 final Intent intent = new Intent();
      intent.setClass(Home.this, Profile.class);
      btn_profile.setOnClickListener(new OnClickListener() {
     public void onClick(View v) {
         startActivity(intent);
            }});
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.main, menu);
return true;

}
}

 **MainActivity**
package com.bpi.gears;

import java.io.IOException;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

Button btn_login;
EditText ID_username;
EditText ID_password;
TextView message;
Intent intent;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainactivity);

    btn_login = (Button) findViewById(R.id.btn_login);
    ID_username = (EditText) findViewById(R.id.ID_username);
    ID_password = (EditText) findViewById(R.id.ID_password);
    message = (TextView) findViewById(R.id.ID_login);

        btn_login.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {

            if("".equals(ID_username.getText().toString()) || "".equals(ID_password.getText().toString())){

                Toast toast = Toast.makeText(MainActivity.this,     "Please type in Username and Password.", Toast.LENGTH_LONG);
                toast.show();

            } else {
                authenticateUser();

            }

        }
    });

}

protected void authenticateUser() {
    (new AuthenticateUserTask(this)).execute();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;

}

private class AuthenticateUserTask extends AsyncTask<Void, Void, Boolean> {

    @SuppressWarnings("unused")
    Context mContext;
    protected boolean willContinue;

    public AuthenticateUserTask(Context context) {
        super();

        mContext = context;

    }

    @Override
    protected Boolean doInBackground(Void... params) {
        .....
 username="+ID_username.getText().toString()+"&password="+ID_password.getText().toString());
        willContinue = false;

        try{

            ....

            Log.d("Response",""+resp);

            if(resp == 200){
                willContinue = true;
                Log.d("doInBackground","Response is true.");
            }
            else {
                willContinue = false;
                Log.d("doInBackground","Response is false from try.");
            }

        } catch (IOException e) {

            e.printStackTrace();
            willContinue = false;
            Log.d("doInBackground","Response is false from catch.");
        }

        return willContinue;

}

          protected void onPostExecute(Boolean willContinue) {

            if(willContinue){
                Log.d("Response From onPostExecute","willContinue is true, starting Home activity.");
                Toast.makeText(getApplicationContext(), "Login Successful.", Toast.LENGTH_LONG).show();

                /*Intent todashboard = new Intent(MainActivity.this,Home.class);
                startActivity(todashboard);
                finish();*/

            btn_login.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            final Intent intent = new Intent(MainActivity.this, Home.class));
        startActivity(intent);
                    }});

                }

                else{
                Log.d("Response From onPostExecute","willContinue is false.");
                Toast.makeText(getApplicationContext(), "Login Failed.",     Toast.LENGTH_LONG).show();

            }

           }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:21:09.320

把你的`onClickListener`拿出来`AsyncTask`放在你`onCreate()`的`Activity`

并改变这个

```
final Intent intent = new Intent();
intent.setClass(MainActivity.this, Home.class); 
```

到

```
final Intent intent = new Intent(MainActivity.this, Home.class));
startActivity(intent); 
```

并将其全部放入您的`onClick()`. 希望这会有所帮助......让我知道

# objective-c - 如何在 Objective-C 中使用符号断点获取参数

> ID：15513045
> 
> 赞同：37
> 
> 时间：2013-03-20T00:22:24.337
> 
> 标签：objective-c, xcode, debugging, lldb

我有一个看起来像这样的断点

```
-[UITableViewCell setSelected:] 
```

它有效，但我无法弄清楚如何获取正在传递的值。

我已经尝试过`-[UITableViewCell setSelected:(BOOL)what]`，`-[UITableViewCell setSelected:what]`但它根本不起作用。

**如何访问参数？**

如果这不起作用，我将不得不做一个`DebugUITableViewCell`只是为了看看发生了什么，这很麻烦并且涉及很多代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-20T01:04:25.553

如果您在设备上调试代码，当您遇到断点时，参数将始终位于寄存器 r0、r1 和 r2 中。如果您使用`po $r0`，您将看到对象接收 setSelected。如果你使用`po $r1`，你会得到“没有可用的 Objective-C 描述”，因为那是选择器。检查 $r2 以查看 selected 是否设置为 YES 或 NO。这是 i386 上的类似故事，但我不记得使用了哪些寄存器。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-12T19:09:53.690

在模拟器上使用 LLDB

`p $arg3`

对于第一个参数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T01:13:41.957

您可以`-[UITableViewCell setSelected:]`用自己的实现替换以进行调试。下面，`UITableViewCellSetSelected`将被调用而不是 UIKit 的方法。

```
static void (*__originalUITableViewCellSetSelected)( UITableViewCell *, SEL, BOOL ) ;
static void UITableViewCellSetSelected( UITableViewCell * self, SEL _cmd, BOOL b )
{
    // your code here... (or set a breakpoint here)
    NSLog(@"%@<%p> b=%s\n", [ self class ], self, b ? "YES" : "NO" ) ;

    (*__originalUITableViewCellSetSelected)( self, _cmd, b ) ; // call original implementation:
}

@implementation UITableViewCell (DebugIt)

+(void)load
{
    Method m = class_getInstanceMethod( [ self class ], @selector( setSelected: ) ) ;
    __originalUITableViewCellSetSelected = (void(*)(id, SEL, BOOL))method_getImplementation( m ) ;
    method_setImplementation( m, (IMP)UITableViewCellSetSelected ) ;
}

@end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-17T11:48:29.320

对于没有源代码的方法，以下工作： 放置一个符号断点，以便调试器在方法的第一行停止。确保选择了顶部堆栈帧。然后：

在 Objectice-C 方法中

*   `po $arg1`打印自我
*   `po $arg3`打印第一个参数，在 , 等中的剩余`$arg4`参数`$arg5`。

在 C 函数中，参数开始于`$arg1`

这适用于 IOS 设备和模拟器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-19T15:27:00.783

基于`-[UIApplication sendAction:toTarget:fromSender:forEvent:]`符号，我们可以添加符号断点来检查哪个发送者向哪个目标发送了一个动作。

我们使用以下命令创建符号断点：

*   象征：`-[UIApplication sendAction:toTarget:fromSender:forEvent:]`
*   调试器命令行操作：
    *   `po "Target"`
    *   `po $arg4`
    *   `po "Sender"`
    *   `po $arg5`

输出将是： `"Target" <project.TargetViewController: 0x14ddb1470> "Sender" <UIButton: 0x14de86000; frame = (331 7; 49 30); opaque = NO; layer = <CALayer: 0x174237020>>`

正如@Dan 所说，方法参数从参数 3 ( `po $arg3`) 开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-10T07:41:47.827

你可以使用 lldb 命令：

“图像查找 -rn 关键字”

关键字等于您要搜索的功能，例如，显示

然后，您将看到如下输出，

总结：ApplSlate`closure #2 (__C.UIBarButtonItem) -> () in ApplSlate.BaseTableViewController.showLoading(includeTabBar: Swift.Bool) -> () at BaseTableViewController.swift:98 地址：FullSlate[0x0000000100154a60] (FullSlate.__TEXT. __文本 + 1378752)

你得到的符号名称是：`closure #2 (__C.UIBarButtonItem) -> () in ApplSlate.BaseTableViewController.showLoading(includeTabBar: Swift.Bool) -> ()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-14T03:08:49.343

# 回答

`XCode`的`lldb`获取`ObjC`第一个参数是：`$arg3`

->

*   `lldb`打印第一个参数值：`po $arg3`
    *   [![在此处输入图像描述](../Images/e18473d7691b15396172dfa52b7bb8ce.png)](https://i.stack.imgur.com/qoFCU.png)
*   XCode添加符号断点条件：仍然使用`arg3`
    *   例如
        *   健康）状况：`(BOOL)($arg3 == NULL)`
            *   [![在此处输入图像描述](../Images/7ed7004bc563386ed0a29ba1b7bc054b.png)](https://i.stack.imgur.com/dZnH4.png)

## 有关的

*   剩余参数为：`$arg4`, `$arg5`, ...
*   `$arg0`不存在
    *   例如

        ```
        (lldb) po $arg0
        error: <user expression 3>:1:1: use of undeclared identifier '$arg0'
        $arg0
        ^ 
        ```

*   `$arg1`是函数类型
    *   `-`方法`Instance`
        *   例如

            ```
            (lldb) po $arg1
            _ 
            ```

    *   `+`方法`Class`
*   `$arg2`是函数指针self，使用`SEL`可以解析为函数名
    *   例如

        ```
        (lldb) po $arg2
        8203662366

        (lldb) po (SEL)$arg2
        "stringByAppendingString:" 
        ```

# elasticsearch - 索引和范围查询_timestamp数据

> ID：15513046
> 
> 赞同：0
> 
> 时间：2013-03-20T00:22:28.817
> 
> 标签：elasticsearch

我正在努力理解 _timestamp 以及如何正确使用它。我正在存储日志数据，因此时间戳非常重要。我希望能够存储时间戳并按范围查询。每当我使用名称为 _timestamp 的字段时，当我查询它时，我似乎永远无法获得任何结果。无论我使用 ISO 8601 文本格式还是使用millis as longs 存储和查询，都会发生这种情况。有人有这个工作的完整例子吗？

使用文本格式时的测试代码（FWIW，这是作为本地节点运行的单元测试代码）。

```
client.admin().indices().create(new CreateIndexRequest(indexName).mapping("log",
            "{\"_timestamp\": {\"enabled\": true, \"store\": \"yes\"}}"));
client.prepareIndex(indexName, "log", auditEvent.getId().toString())
        .setSource(jsonBuilder()
                .startObject().
                field("eventType", auditEvent.getEventType().toString()).
                field("_timestamp", auditEvent.getEventTime().toString(ISODateTimeFormat.dateTime())).
                field("userId", auditEvent.getUserId()).
                endObject())
                .execute()
                .actionGet();

SearchResponse response = client.prepareSearch(indexNames.toArray(new String[] {})).setTypes("log")
            .setQuery(
                    QueryBuilders.
                    boolQuery()
                    .must(QueryBuilders.fieldQuery("eventType", eventType))
                    .must(QueryBuilders.rangeQuery("_timestamp")
                            .from(interval.getStart().toString())
                            .to(interval.getEnd().toString())
                            )
                    )
                    .addField("_timestamp")
                    .execute().actionGet(); 
```

当我对匹配项执行相同的查询时，我可以看到时间戳字段。

```
"hits" : {
  "total" : 2,
  "max_score" : 1.0,
  "hits" : [ {
    "_index" : "audit-events-2013-03-04",
    "_type" : "log", 
    "_id" : "3d584830-8506-11e2-8365-24be05270b5c",
    "_score" : 1.0,
    "fields" : {
      "_timestamp" : "2013-03-04T20:01:02.003Z"
    }
  }, {
    "_index" : "audit-events-2013-03-04",
    "_type" : "log",
    "_id" : "e6e382e0-84f5-11e2-8365-24be05270b5c",
    "_score" : 1.0,
    "fields" : {
      "_timestamp" : "2013-03-04T18:04:05.006Z"
    }
  } ] 
```

我不明白什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:39:59.477

答案是需要使用 IndexRequest 的 timestamp 方法显式设置时间戳。仅将其设置在名为 _timestamp 的字段上是行不通的。

```
IndexRequestBuilder indexRequestBuilder = client.prepareIndex(indexName, "type1", auditEvent.getId().toString())
                .setSource(jsonBuilder()
                        .startObject().
                        field("eventType", auditEvent.getEventType().toString()).
                        auditEvent.getEventTime().toString(ISODateTimeFormat.dateTime())).
                        field("userId", auditEvent.getUserId()).                          endObject()).setTimestamp(Long.toString(auditEvent.getEventTime().getMillis()));
indexRequestBuilder
        .execute()
        .actionGet(); 
```

# python - Google App Engine 找不到 Python 模块

> ID：15513047
> 
> 赞同：0
> 
> 时间：2013-03-20T00:22:40.080
> 
> 标签：python, google-app-engine

我正在尝试用 python 编写一个 Google App Engine 程序，当我尝试部署它时，我在启动器的日志中不断收到错误消息

```
ImportError: No module named pygeocoder 
```

当我在用于 App Engine 程序的目录中时，在 Python 命令行中键入“import pygeocoder”，就可以了。我对此有点菜鸟，不知道如何导入它。这是我的代码

```
import webapp2
import cgi
import jinja2
import os
import time
from pygeocoder import Geocoder 
jinja_environment = jinja2.Environment(
loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
  def get(self):
    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render())

class Map(webapp2.RequestHandler):
  def post(self):

    line = cgi.escape(self.request.get('line_name'))
    self.getPositions(line)
def getPositions(self, line):
    current=str(time.mktime(time.gmtime())) #Gets current time for web feed
    stations = urllib2.urlopen('http://webservices.nextbus.com/service/publicXMLFeed?command=vehicleLocations&a=sf-muni&r=' + line + '&t='+current)
    tree=ET.parse(stations)
    root=tree.getroot() 
    vehid=list()
    latitude=list()
    longitude=list()
    head=list()
    spd=list()
    address=list()
    for info in root.iter('vehicle'):
        veh_id=info.get('id')
        lat   =float(info.get('lat'))
        lon   =float(info.get('lon'))
        address1=Geocoder.reverse_geocode(lat, lon)
        street=str(address1[0])
        heading = info.get('heading')
        speed=info.get('speedKmHr')
        vehid.append(veh_id)
        latitude.append(lat)
        longitude.append(lon)
        head.append(heading)
        spd.append(speed)
        address.append(street)
    template_values={
    'latitude': latitude,
    'longitude': longitude,
    'heading': head,
    'speed': spd,
    'address':address,
    'vehid': vehid
    }

    template = jinja_environment.get_template('map.html')
    self.response.out.write(template.render(template_values))
app = webapp2.WSGIApplication([('/', MainPage),
                          ('/map', Map)],
                          debug=True) 
```

这是我的 app.yaml 文件：

```
application: munipositions
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
script: munipositions.app

libraries:
- name: jinja2
version: latest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:28:58.280

谢谢，我只需要将它放在我的应用程序目录中，它现在就可以工作了。

# python - iPython notebook 中的 Sympy：打印整个函数

> ID：15513054
> 
> 赞同：3
> 
> 时间：2013-03-20T00:23:21.553
> 
> 标签：python, sympy

目前在 SymPy 中打印方程时，它只打印方程的“右手边”，不包括“左手边”。例如

```
>>> a = b*d
>>> a
b*d 
```

而我想要的是：

```
>>> a = b*d
>>> a
a = b*d 
```

其中很大一部分是 mathjax 提供的良好格式，当我向非程序员的同事展示时，它的可读性更高。有没有办法在输出中包含方程的主题？

注意抱歉，我的数学术语不是很好

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T01:36:51.667

Python 不能那样工作。Python 中的变量只是标签。

SymPy 是一个 Python 库，而不是围绕 Python 包装的东西，因此它符合该语言的语法和语义。当您编写时，`a=b`您正在创建一个标签`a`，该标签指向与标签指向的对象相同的对象（基于或不基于 SymPy）`b`。有关更多详细信息，请查看变量在 Python 中的工作方式。

当您创建 SymPy 表达式时，您将从类的对象实例开始`Symbol`并构建。构造函数的参数`Symbol`是一个主要用于打印的名称。你可以写`a = b = c = Symbol('fancy_name')`，所有三个标签都指向同一个对象：`Symbol('fancy_name')`实例。查看 Sympy 文档中的教程。

大多数时候，您使用的是 SymPy 表达式，而不是函数。作为初学者，您不需要关心函数。

最后，如果由于某种原因您希望将等式或不等式作为表达式（大多数时候您不需要这个），您可以使用

```
>>> relational.Eq(x, y)
x=y 
```

# ruby - 在 Sequel 中急切地加载多对多关联

> ID：15513059
> 
> 赞同：2
> 
> 时间：2013-03-20T00:24:03.487
> 
> 标签：ruby, sequel

我正在编写一个应用程序，我有两个模型，一个 Post 模型和一个 Tag 模型。他们有一个多对多的关联。我想在检索帖子时加载帖子的所有标签，因此我不必多次访问数据库。

模型看起来大致是这样的（我省略了一些私人细节）：

```
class Post < Sequel::Model
  many_to_many :tags
end

class Tag < Sequel::Model
  many_to_many :posts
end 
```

我已经尝试过`Post.eager_graph(:tags)[id]`，它取得了一些成功，但它只加载了第一个标签并在所有标签列名称前加上前缀，`tags_`而不是将其放入数组或其他东西中。有没有办法让它一次加载所有标签，还是我必须让它们分开查询？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:04:26.137

除非您急切地加载多个帖子，否则在检索帖子时自动加载标签是没有意义的。无论如何，除非您加入，否则它将需要多个查询，而且我猜测在考虑 Sequel 拆分 JOINed 结果所需的额外开销时，一个 JOIN 将比两个单独的查询慢。

# android - 具有国家/地区代码的值的资源目录名称无效

> ID：15513060
> 
> 赞同：6
> 
> 时间：2013-03-20T00:24:14.710
> 
> 标签：android, android-resources

我有更多语言的 android 应用程序。如果我有一个名为：**values-en**的文件夹，我没有错误，一切正常。

如果我将目录的名称重命名为**values-en_GB**我收到此错误：`android-apt-compiler: [NAMEOFAPP] invalid resource directory name: [path]\res/values-en_GB`

为什么这是无效的？或者对于相同的语言（在本例中为 en）我应该做什么不同的值取决于位置（在本例中为 US 或 GB）

我正在使用 Idea 12、Java 1.7、Android 4.2

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-20T00:27:02.370

您的目录格式不正确。请参阅：[文档](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

采用：

```
res/values-en-rGB 
```

基本上：

> 该语言由两个字母的 ISO 639-1 语言代码定义，后跟两个字母的 ISO 3166-1-alpha-2 区域代码（前面是小写的“r”）。
> 
> 代码不区分大小写；r 前缀用于区分区域部分。您不能单独指定区域。

# three.js - 创建线性纹理环绕的修饰符？多个 3d 模型

> ID：15513061
> 
> 赞同：1
> 
> 时间：2013-03-20T00:24:26.133
> 
> 标签：three.js, textures, modifier, texture-wrapping

所以我有两个几何形状不同的 3d 模型，所以当应用纹理时，它们会以不同的方式包裹，使纹理看起来很有趣且不均匀。我想知道是否有一个修改器可以改变纹理的应用方式？

例子：

3dmax 有一个名为 MAP_SCALER 的修改器，您可以将其添加到任何具有大量顶点、面的模型中，并且它仍然以无缝和线性的方式显示纹理。如果有人可以帮忙！！我的心一定会被炸飞的！！我需要尽快解决这个问题！

# php - PHP openssl_sign DIES

> ID：15513063
> 
> 赞同：2
> 
> 时间：2013-03-20T00:24:34.503
> 
> 标签：php, apache, xampp, ssl-certificate

我正在尝试在 PHP 中使用 openssl_sign，但每次页面都显示：

无法显示页面。它抛出错误。

如果我把死（“你好”）；就在 openssl_sign 函数之前，它会显示你好，但如果我在之后输入，我得到 internet explorer 错误无法显示页面，连接已终止或任何消息...

我尝试了 ini 设置和错误报告以及检查 php 和 apache 的日志，并且没有错误。

有人有任何线索或至少可以解释我吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T15:04:44.177

我在使用 Google PHP Client Library 时遇到了这个问题。按照本主题中的答案： [PHP openssl_public_encrypt 导致页面超时/连接重置？](https://stackoverflow.com/questions/8423799/php-openssl-public-encrypt-causing-page-timeout-connection-reset)，我的问题解决了。希望这篇笔记也能对你有所帮助。

> 替换 xampp/apache/bin 文件夹中的以下两个文件：
> 
> *   libeay32.dll
> *   ssleay32.dll 与您的 xampp/php 文件夹中的同名文件。这个问题立即为我解决了。

# google-app-engine - --address=0.0.0.0 参数在升级到 App Engine 1.7.6 后不起作用

> ID：15513064
> 
> 赞同：7
> 
> 时间：2013-03-20T00:24:49.760
> 
> 标签：google-app-engine, dev-appserver, dev-appserver-2

我刚刚升级到最新版本的 App Engine，这通常是一件好事并且可以正常工作。现在，当我尝试启动 dev_appserver（新的多线程版本）时，我得到：

dev_appserver.py：错误：无法识别的参数：--address=0.0.0.0

我已经查看了新参数，但没有看到我需要将此参数更改为什么，以便我仍然可以使用我真正喜欢使用的 machineName.local:port 语法通过我的网络访问 dev_appserver。

有任何想法吗？

* * *

Google 指出我可以在短期内使用 old_dev_appserver.py。这是很好的反馈。我也在寻找长期解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T01:29:36.690

我相信这个参数被重命名为 --host

# multithreading - 从不同线程读取和写入同一变量时的硬件状态

> ID：15513067
> 
> 赞同：0
> 
> 时间：2013-03-20T00:25:21.803
> 
> 标签：multithreading, hardware, race-condition

我的问题范围严格限于同时读取和写入内存中的地址以及硬件中发生的情况。

我对了解竞态条件以及在程序继续执行后它们可能携带的内容不感兴趣，方法是使用发生竞态的值。如果 pc 的逻辑被破坏，是的，它们也可能会导致崩溃，但这里我的问题完全是关于硬件和同时线程中 WRITE+READ 的影响。

问题：假设我从一个线程写入一个变量，并从另一个线程读取相同的变量。会发生什么？

1.  只是破坏了变量的值，因此所有后续线程都会由于此读/写的交错而读取错误的值？

或者

1.  在某些情况下，也可能导致应用程序关闭，因为在某些情况下这可能是某种硬件违规。

本质上，我想更多地了解同时物理读取和写入变量的过程以及 PC 的行为。

我正在使用 LINUX 和 C++，我对 2 个案例感兴趣

*   同一物理内核上的 2 个线程

*   2 个独立内核上的 2 个线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:41:24.450

这一切都取决于什么样的硬件和变量的大小。对整数的访问通常是原子的，但对双精度数的访问通常不是。即使对于简单的小值，不同的硬件也可能有非常不同的行为。您需要获取硬件手册的副本。这是一篇讨论这个领域的帖子：[一条汇编指令是否总是以原子方式执行？](https://stackoverflow.com/questions/1091099/does-one-assembler-instruction-always-execute-atomically?rq=1)

除非硬件设计不佳，否则读取不会改变写入的行为，但如果读取看到写入的一部分而不是其余部分，则写入可能会导致读取的值不正确。

# c# - int[] 和 string[] 类在哪里定义？

> ID：15513070
> 
> 赞同：6
> 
> 时间：2013-03-20T00:26:05.410
> 
> 标签：c#, arrays, string, int

```
int a = 0;
int[] b = new int[3];

Console.WriteLine( a.GetType() );
Console.WriteLine( b.GetType() ); 
```

* * *

**a**的类型是`System.Int32`结构。**b**的类型是`int[]`。

`Int32`我可以在 Visual Studio中看到 的定义。位置的定义在哪里`int[]`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T00:28:36.690

对于给定`T`的 type ，类型`T[]`是通过组合预定义的。等等`T[][]`等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T00:46:28.440

[系统数组](http://msdn.microsoft.com/en-us/library/system.array.aspx)

> Array 类是支持数组的语言实现的基类。但是，只有系统和编译器可以显式地从 Array 类派生。用户应该使用该语言提供的数组结构。

* * *

更详细：

> 从 .NET Framework 2.0 开始，Array 类实现 System.Collections.Generic.IList、System.Collections.Generic.ICollection 和 System.Collections.Generic.IEnumerable 泛型接口。**这些实现在运行时提供给数组**，因此对文档构建工具不可见。因此，泛型接口不会出现在 Array 类的声明语法中，并且没有接口成员的参考主题，只能通过将数组转换为泛型接口类型（显式接口实现）才能访问这些成员。将数组强制转换为这些接口之一时要注意的关键是添加、插入或删除元素的成员会抛出 NotSupportedException。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T00:37:24.830

C＃：

```
static void Main(string[] args)
        {
            int a = 0;
            int[] b = new int[3];
        } 
```

伊利诺伊：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  //        11 (0xb)
  .maxstack  1
  .locals init ([0] int32 a,
           [1] int32[] b)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  ldc.i4.3
  IL_0004:  **newarr**     [mscorlib]System.Int32
  IL_0009:  stloc.1
  IL_000a:  ret
} 
```

你可以看到“newarr” 这里是关于 newarr 的详细信息 [http://www.dotnetperls.com/newarr](http://www.dotnetperls.com/newarr)

newarr 指令不是很有趣。但它确实暴露了 .NET Framework 的一个重要设计决策。向量（一维数组）与二维数组是分开的。而这些知识会影响你在程序中选择的类型。

# actionscript-3 - 难以获得真正的随机结果 AS3

> ID：15513072
> 
> 赞同：0
> 
> 时间：2013-03-20T00:26:25.493
> 
> 标签：actionscript-3, math, random

所以，我试图让我的游戏中一些小行星随机移动，如果你击中一颗，它会移动到其他地方，并有一条新的、也是随机的飞行路径。我的问题是当我撞上一颗小行星时，它确实创建了一条新路径，但如果我击中它 3 次以上，它只会不断重置到同一路径的同一位置。谁能帮我这个？（常规层）导入 flash.events.Event；addEventListener(Event.ENTER_FRAME, massGain); 停止（）;

```
var speedX = (Math.random() * 20 - 10);
var speedY = (Math.random() * 20 - 10);
var speedX1 = (Math.random() * 20 - 10);
var speedY1 = (Math.random() * 20 - 10);
var speedX2 = (Math.random() * 20 - 10);
var speedY2 = (Math.random() * 20 - 10);
var speedX3 = (Math.random() * 20 - 10);
var speedY3 = (Math.random() * 20 - 10);
var speedX4 = (Math.random() * 20 - 10);
var speedY4 = (Math.random() * 20 - 10);
var speedX5 = (Math.random() * 20 - 10);
var speedY5 = (Math.random() * 20 - 10);
var speedX6 = (Math.random() * 20 - 10);
var speedY6 = (Math.random() * 20 - 10);

function massGain(e:Event)
{

Mouse.hide();

Cosmo.x = mouseX;
Cosmo.y = mouseY;

Asteroid5.x = Asteroid5.x + speedX;
Asteroid5.y = Asteroid5.y + speedY;
if (Asteroid5.x > 1100 || Asteroid5.x < -100)
{
    speedX = -speedX
}
if (Asteroid5.y > 800 || Asteroid5.y < -100)
{
    speedY = -speedY
}

Asteroid6.x = Asteroid6.x + speedX1;
Asteroid6.y = Asteroid6.y + speedY1;
if (Asteroid6.x > 1100 || Asteroid6.x < -100)
{
    speedX1 =  -  speedX1;
}
if (Asteroid6.y > 800 || Asteroid6.y < -100)
{
    speedY1 =  -  speedY1;
}

Asteroid7.x = Asteroid7.x + speedX2;
Asteroid7.y = Asteroid7.y + speedY2;
if (Asteroid7.x > 1100 || Asteroid7.x < -100)
{
    speedX2 =  -  speedX2;
}
if (Asteroid7.y > 800 || Asteroid7.y < -100)
{
    speedY2 =  -  speedY2;
}

Asteroid8.x = Asteroid8.x + speedX3;
Asteroid8.y = Asteroid8.y + speedY3;
if (Asteroid8.x > 1100 || Asteroid8.x < -100)
{
    speedX3 =  -  speedX3;
}
if (Asteroid8.y > 800 || Asteroid8.y < -100)
{
    speedY3 =  -  speedY3;
}

Deathroid1.x = Deathroid1.x + speedX4;
Deathroid1.y = Deathroid1.y + speedY4;
if (Deathroid1.x > 1100 || Deathroid1.x < -100)
{
    speedX4 =  -  speedX4;
}
if (Deathroid1.y > 800 || Deathroid1.y < -100)
{
    speedY4 =  -  speedY4;
}

Deathroid2.x = Deathroid2.x + speedX5;
Deathroid2.y = Deathroid2.y + speedY5;
if (Deathroid2.x > 1100 || Deathroid2.x < -100)
{
    speedX5 =  -  speedX5;
}
if (Deathroid2.y > 800 || Deathroid2.y < -100)
{
    speedY5 =  -  speedY5;
}

Deathroid3.x = Deathroid3.x + speedX6;
Deathroid3.y = Deathroid3.y + speedY6;
if (Deathroid3.x > 1100 || Deathroid3.x < -100)
{
    speedX6 =  -  speedX6;
}
if (Deathroid3.y > 800 || Deathroid3.y < -100)
{
    speedY6 =  -  speedY6;
}

} 
```

（动作层）var mySound1:Sound = new menuSelectionClick(); var mySound2:Sound = 新的爆炸（）；var nCount1:Number = 0;

```
timer_Text1.text = nCount1.toString();
addEventListener(Event.ENTER_FRAME,massCollect);

function massCollect(e:Event)
{

if (Cosmo.hitTestObject(Asteroid5))
{

    mySound1.play();
    nCount1++;
    timer_Text1.text = nCount1.toString();

    Asteroid5.y = (Math.random() * 20 - 5);
    Asteroid5.x = (Math.random() * 20 - 15);
    Asteroid5.x = Asteroid5.x + (Math.random() * 20 - 15);//+ speedAgainX1;
    Asteroid5.y = Asteroid5.y + (Math.random() * 20 - 5);//+ speedAgainY1;
}

if (Asteroid5.x > 1100 || Asteroid5.x < -100)
{
    Asteroid5.x = Asteroid5.x * -1;

}

if (Asteroid5.y > 800 || Asteroid5.y < -100)
{
    Asteroid5.y =  -  Asteroid5.y * -1;

}

if (Cosmo.hitTestObject(Asteroid6))
{

    mySound1.play();
    nCount1++;
    timer_Text1.text = nCount1.toString();

    Asteroid6.y = (Math.random() * 20 - 5);
    Asteroid6.x = (Math.random() * 20 - 15);
    //Asteroid6.x = Math.floor(Math.random() * 20 - 15);
    // Asteroid6.y = Math.floor(Math.random() * 20 - 5);
    Asteroid6.x = Asteroid6.x + (Math.random() * 20 - 15);//+ speedAgainX1;
    Asteroid6.y = Asteroid6.y + (Math.random() * 20 - 5);//+ speedAgainY1;
}

if (Asteroid6.x > 1100 || Asteroid6.x < -100)
{
    Asteroid6.x =  -  Asteroid6.x * -1;
}

if (Asteroid6.y > 800 || Asteroid6.y < -100)
{
    Asteroid6.y =  -  Asteroid6.y * -1;

}

if (Cosmo.hitTestObject(Asteroid7))
{

    mySound1.play();
    nCount1++;
    timer_Text1.text = nCount1.toString();

    Asteroid7.y = (Math.random() * 20 - 5);
    Asteroid7.x = (Math.random() * 20 - 15);
    Asteroid7.x = Asteroid7.x + (Math.random() * 20 - 15);//+ speedAgainX1;
    Asteroid7.y = Asteroid7.y + (Math.random() * 20 - 5);//+ speedAgainY1;
}
if (Asteroid7.x > 1100 || Asteroid7.x < -100)
{
    Asteroid7.x =  -  Asteroid7.x * -1;

}

if (Asteroid7.y > 800 || Asteroid7.y < -100)
{
    Asteroid7.y =  -  Asteroid7.y * -1;

}

if (Cosmo.hitTestObject(Asteroid8))
{

    mySound1.play();
    nCount1++;
    timer_Text1.text = nCount1.toString();

    Asteroid8.y = (Math.random() * 20 - 5);
    Asteroid8.x = (Math.random() * 20 - 15);
    Asteroid8.x = Asteroid8.x + (Math.random() * 20 - 15);//+ speedAgainX1;
    Asteroid8.y = Asteroid8.y + (Math.random() * 20 - 5);//+ speedAgainY1;
}

if (Asteroid8.x > 1100 || Asteroid8.x < -100)
{
    Asteroid8.x =  -  Asteroid8.x * -1;

}

if (Asteroid8.y > 800 || Asteroid8.y < -100)
{
    Asteroid8.y =  -  Asteroid8.y * -1;

}

if (Cosmo.hitTestObject(Deathroid1))
{
    mySound2.play();
    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);
    gotoAndStop(352, "Scene 1");
}
if (Cosmo.hitTestObject(Deathroid2))
{
    mySound2.play();
    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);
    gotoAndStop(352, "Scene 1");
}

if (Cosmo.hitTestObject(Deathroid3))
{
    mySound2.play();
    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);
    gotoAndStop(352, "Scene 1");
}

if (nCount1 >= 25)
{
    removeEventListener(Event.ENTER_FRAME,massCollect);
    removeEventListener(Event.ENTER_FRAME,massGain);
    gotoAndStop(351, "Scene 1");

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:02:43.593

我没有看到您的代码为 speed of`Asteroid6`和其他 on分配了新值`hitTestObject`。这很可能是您的问题的根源。

但是，您似乎需要更多的帮助——您至少有 3 个相似`Asteroid`的对象，以及控制它们的 3 组相同的代码。首先，研究`Array`，您可以使用它来对小行星进行分组，然后对其进行迭代，对每个小行星应用相同的代码。其次，关于类的研究，毕竟这些小行星都是一类的对象，即`asteroid`“所有**小行星**s”。所以，上一堂课`Asteroid`，放一个方法来做你的随机分配，确保小行星的速度也被更新，然后放另一个方法，如果坐标超出范围，将按速度移动小行星并更新速度值。顺便说一句，您可以绘制一个小行星并将其用作库资源，如果您为其指定与您的类相同的名称，当您需要动态制作小行星时，您不需要重做图形！

# image - SVG：相同的SVG图像，不同的样式

> ID：15513073
> 
> 赞同：0
> 
> 时间：2013-03-20T00:26:34.410
> 
> 标签：image, svg

从 SVG 图像（如[http://www.somerandomdude.com/work/iconic/](http://www.somerandomdude.com/work/iconic/)），我希望能够使用一些 CSS 样式来更改图像的颜色。

我只有这个：

```
<image xlink:href="/icons/plus-alt.svg" x="20" y="4" height="16px" width="16px" /> 
```

由于 .svg 文件包含一个带有单个 PATH 元素的 SVG 元素，CSS 有什么方法可以访问这个 PATH 元素吗？

如果不是，是否可以将 PATH 元素复制并粘贴为“def”并使用 xlink:href 属性引用它，如下所示：

```
<image xlink:href="#plusImage" x="20" y="4" height="16px" width="16px" /> 
```

（我无法让它工作）

请注意，可以使用 USE 标签来引用 DEF，但是您会失去 IMAGE 标签的非常有用的高度/宽度属性。

请赐教。

# css - Firefox 和 Chrome/IE 的显示差异

> ID：15513075
> 
> 赞同：4
> 
> 时间：2013-03-20T00:26:48.537
> 
> 标签：css, google-chrome, firefox

我不明白为什么与 Chome 和 IE 相比，我在 Firefox 中的不同位置显示 HTML 元素。我正在使用 position:absolute 将标题和副标题文本放置在我希望它们所在的标题中，但 FF 和 Chrome/IE 之间的文本元素的水平位置似乎有大约 30px 的差异

HTML 很简单，如下所示：

```
<div id="mainPage">
<div id="mainContent" class="mainRounded">
    <div id="header">
        <div id="title"><h1>Longer Title Text</h1></div>
        <div id="subtitle"><h2>Subtitle text</h2></div>
        <div id="banner"></div>
    </div>
</div>
</div> 
```

CSS是这样的：

```
.mainRounded {
margin: 0 auto;
width: 1000px;
border-radius: 30px;
background-color:#e9d7dc;
box-shadow: 5px 5px 3px #888888;
overflow:hidden;
margin-bottom: 25px;
}
#header #banner {
background-color: #0033CC;
height: 150px;
opacity:0.4;
filter:alpha(opacity=40); /* For IE8 and earlier */
position: relative;
overflow:hidden;
border-radius: 30px 30px 0 0;
}
#header #title {
padding: 0 ;
position: absolute;
top: -40px;
left: 710px;
}
#header #subtitle {
padding: 0 ;
position: absolute;
top: 95px;
left: 870px;
}
#header #title h1 {
font-family: Georgia;
    font-size: 54px;
    font-style: italic;
    font-weight: normal;
text-shadow: 2px 2px 5px #0033CC;
}
#header #subtitle h2 {
font-family: Georgia;
    font-size: 26px;
    font-style: italic;
    font-weight: normal;
} 
```

您可以在此处的测试页面上看到这一点：http: [//mardona.org/test.php](http://mardona.org/test.php) 老实说，我不明白有什么区别，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:11:02.333

您应该给`position: relative;`，`.mainRounded`然后将您的边距值在边距顶部的其他定位值中更正为 0，然后它必须按您的意愿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:46:57.297

每个不同的浏览器都有不同的行为来显示 HTML 样式。你需要重置你的CSS：

希望有用[http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)尤其是 IE [IE 样式](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:49:04.020

我在 FF 16 和 Chrome 25 中查看了您的测试页面 - DIV 元素在两种浏览器中都正确对齐。

不过，H1 和 H2 文本的呈现方式似乎不同，这可能就是它看起来具有不同水平位置的原因。

看看这个：[https ://stackoverflow.com/a/5082824/1443797](https://stackoverflow.com/a/5082824/1443797)

# java - android中的SQLiteOpenDatabase问题

> ID：15513080
> 
> 赞同：0
> 
> 时间：2013-03-20T00:27:15.120
> 
> 标签：java, android, sqlite

我正在使用我需要的 2 个表（user_table 和 prod_table）设置我的数据库类

遵循本指南： http: [//www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

看起来不错，但从未说过我如何执行典型的“getConnection()”方法。例如，我在一个活动中，我想 insertUserRow() 我需要传递 SQLiteOpenConnection 数据库和用户对象。我在每个 Helper 中创建了一个 Singleton，如下所示：

```
public class UserEdbHelper extends SQLiteOpenHelper {

    static final String dbName = "edb";
    static final String userTable = "user_table";
    private static UserEdbHelper mInstance = null;

    /* --- user_table columns --- */

    static Context appContext;

    UserEdbHelper(Context context) {
        super(context, dbName, null, 33);
        this.appContext = context;
    }

    public static UserEdbHelper getInstance(Context ctx) {
        if (mInstance == null) {
            mInstance = new UserEdbHelper(ctx.getApplicationContext());
        }
        return mInstance;
    } 
```

我还尝试跟进另一个示例，该示例告诉执行以下操作：

```
public class AppCore extends Application{
    // create the 2 helpers that creates the respective tables
    public static UserEdbHelper userHelper; 
    public static ProductEdbHelper productHelper;

    public static void init(Context context )
    {
        // this is supposed to instantiate the helpers or what? what does this do?
        userHelper = new UserEdbHelper(context);
        productHelper = new ProductEdbHelper(context);
    }

} 
```

我脑子里有些东西不见了。

另外，我为每个 Helper 创建了两个类，UserEdbHelper 和 ProductEdbHelper，对吗？这些中的每一个都创建自己的表，并有自己的方法。（基本上和我上面添加的链接结构相同，你可以在那里查看）

其中一个属性是“dbName”，我需要将该属性添加到两个类还是只添加一个？

有点丢了:(

我很想得到一些帮助，

提前致谢，

马里亚诺。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:13:40.397

有人向我建议，最好谈论做某事的正确方法，而不是担心所有错误的方法。让我建议一些我怀疑对您有用的东西，而不是查看您问题中的代码：

```
public class AppCore extends Application {
    public UserEdbHelper userHelper;
    public ProductEdbHelper productHelper;

    // onCreate and such stuff...

    public SQLiteDatabase getUserDb() {
        if (null == userHelper) { userHelper = new UserEdbHelper(this); }
        return userHelper.getWritableDatabase();
    }

    public SQLiteDatabase getProductDb() {
        if (null == productHelper) { productHelper = new ProductEdbHelper(this); }
        return productHelper.getWritableDatabase();
    }

    // other code

} 
```

我可以引用你的话：“我脑子里有些东西不见了”吗？:-)

# c++ - MySQL 在连接函数中崩溃

> ID：15513082
> 
> 赞同：0
> 
> 时间：2013-03-20T00:27:22.633
> 
> 标签：c++, mysql, visual-studio-2012

我有 x64 位，下载了 32 位（那是因为 lib 文件几乎没有错误，所以我必须使用 32 位）在这里做了一切：http: [//dev.mysql.com/doc/refman/5.6/ zh/connector-cpp-apps-windows-visual-studio.html#connector-cpp-application-build-dynamic](http://dev.mysql.com/doc/refman/5.6/en/connector-cpp-apps-windows-visual-studio.html#connector-cpp-application-build-dynamic)

但是程序在“连接”功能处崩溃：

[http://imageshack.us/photo/my-images/827/25478716.jpg/](http://imageshack.us/photo/my-images/827/25478716.jpg/)

该怎么办？这是我要编译的源代码。

```
#include <stdlib.h>
#include <iostream>
#include <Windows.h>

/*
  Include directly the different
  headers from cppconn/ and mysql_driver.h + mysql_util.h
  (and mysql_connection.h). This will reduce your build time!
*/
//__declspec(dllexport)
#include "mysql_connection.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
using namespace std;

int main(void)
{
cout << endl;
cout << "Running 'SELECT 'Hello World!' » AS _message'..." << endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver->connect("tcp://127.0.0.1:3306", "root", "pass");//
  /* Connect to the MySQL test database */
  con->setSchema("test");

  stmt = con->createStatement();
  res = stmt->executeQuery("SELECT 'Hello World!' AS _message");
  while (res->next()) {
    cout << "\t... MySQL replies: ";
    /* Access column data by alias or column name */
    cout << res->getString("_message") << endl;
    cout << "\t... MySQL says it again: ";
    /* Access column fata by numeric offset, 1 is the first column */
    cout << res->getString(1) << endl;
  }
  delete res;
  delete stmt;
  delete con;

} catch (sql::SQLException &e) {
  cout << "# ERR: SQLException in " << __FILE__;
  cout << "(" << __FUNCTION__ << ") on line " << __LINE__ << endl;
  cout << "# ERR: " << e.what();
  cout << " (MySQL error code: " << e.getErrorCode();
  cout << ", SQLState: " << e.getSQLState() << " )" << endl;
}

cout << endl;

return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:46:44.400

您可以尝试以不同的方式构建连接：

```
#include <mysql.h>
#include <stdio.h>
#include <stdlib.h>

// just going to input the general details and not the port numbers
struct connection_details
{
    char *server;
    char *user;
    char *password;
    char *database;
};

MYSQL* mysql_connection_setup(struct connection_details mysql_details)
{
     // first of all create a mysql instance and initialize the variables within
    MYSQL *connection = mysql_init(NULL);

    // connect to the database with the details attached.
    if (!mysql_real_connect(connection,mysql_details.server, mysql_details.user, mysql_details.password, mysql_details.database, 0, NULL, 0)) {
      printf("Conection error : %s\n", mysql_error(connection));
      exit(1);
    }
    return connection;
}

MYSQL_RES* mysql_perform_query(MYSQL *connection, char *sql_query)
{
   // send the query to the database
   if (mysql_query(connection, sql_query))
   {
      printf("MySQL query error : %s\n", mysql_error(connection));
      exit(1);
   }

   return mysql_use_result(connection);
}

int main()
{
  MYSQL *conn;      // the connection
  MYSQL_RES *res;   // the results
  MYSQL_ROW row;    // the results row (line by line)

  struct connection_details mysqlD;
  mysqlD.server = "localhost";  // where the mysql database is
  mysqlD.user = "mysqlusername";        // the root user of mysql   
  mysqlD.password = "mysqlpassword"; // the password of the root user in mysql
  mysqlD.database = "mysql";    // the databse to pick

  // connect to the mysql database
  conn = mysql_connection_setup(mysqlD);

  // assign the results return to the MYSQL_RES pointer
  res = mysql_perform_query(conn, "show tables");

  printf("MySQL Tables in mysql database:\n");
  while ((row = mysql_fetch_row(res)) !=NULL)
      printf("%s\n", row[0]);

  /* clean up the database result set */
  mysql_free_result(res);
  /* clean up the database link */
  mysql_close(conn);

  return 0;
} 
```

[看这里](http://www.codingfriends.com/index.php/2010/02/17/mysql-connection-example/)完整的例子

# java - 清除按钮.Android问题上的文本

> ID：15513083
> 
> 赞同：0
> 
> 时间：2013-03-20T00:27:27.593
> 
> 标签：java, android

我正在为 android 制作一个井字游戏应用程序，当我运行我的清除按钮功能时：

```
 b1.setText("");
    b1.setEnabled(true);
    b1.setBackgroundColor(Color.LTGRAY); 
```

为了清除按钮的文本并为新游戏启用它们，按钮之间的空间消失了，9 个按钮网格看起来像一个实心正方形。当我单击按钮的位置时，仍然会显示“X”，因此它们仍然存在，但是我缺少什么使它们融合在一起？

获胜组合代码是：

```
 if ((b1.getText() == "X") && (b2.getText() == "X") && (b3.getText() == "X"))
    {
        disableButtons();
        b1.setBackgroundColor(Color.RED);
        b2.setBackgroundColor(Color.RED);
        b3.setBackgroundColor(Color.RED);
        Toast.makeText(getApplicationContext(), "Congrats! You Win!", Toast.LENGTH_LONG).show();
    } 
```

编辑这里是发生了什么的图像 ![第一的](../Images/316e6c1d4681eb2bc6c183e814086391.png)

![第二](../Images/e832a6ec878c040c5d7d97d22f3f0f61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:58:36.363

您需要将背景图像设置回默认的 9patch 图像。尝试这个：

```
b1.setBackgroundResource(android.R.drawable.btn_default);
b2.setBackgroundResource(android.R.drawable.btn_default);
b3.setBackgroundResource(android.R.drawable.btn_default); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:36:39.513

也许删除这一行：

```
b1.setBackgroundColor(Color.LTGRAY); 
```

# php - 无法使用 jQuery 发送 CORS POST 请求

> ID：15513084
> 
> 赞同：1
> 
> 时间：2013-03-20T00:27:31.023
> 
> 标签：php, jquery, http, cors

我正在尝试通过 ajax 向单独的子域发送 POST 请求。预检请求 (OPTIONS) 成功，但以下 XMLHttpRequest 请求返回“Origin [http://app.example.com](http://app.example.com) is not allowed by Access-Control-Allow-Origin”。

客户端 (app.example.com) 代码如下所示：

```
var settings = {
    url: 'http://api.example.com/auth',
    type: 'POST',
    contentType: 'application/json',
    crossDomain: true,
    headers: {"X-Requested-With": "XMLHttpRequest"},
    username: data.username,
    success: callback,
    error: callback
};

$.ajax(settings); 
```

服务器端代码 (api.example.com) 如下所示：

```
$this->output->set_header('Content-Type: application/json; charset=utf-8');
$this->output->set_header('Access-Control-Allow-Origin: http://app.example.com');
$this->output->set_header('Access-Control-Allow-Methods: GET, PUT, POST, DELETE, HEAD, OPTIONS');
$this->output->set_header('Access-Control-Allow-Headers: X-Requested-With, Origin, X-Csrftoken, Content-Type, Accept');
$this->output->set_header('Access-Control-Allow-Credentials: true'); 
```

OPTIONS 请求返回 200 状态。我希望有人能够告诉我我错过了什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:57:35.450

您需要：

1.  完全删除`Access-Control-Allow-Credentials`标头（这不会在请求中发送任何 cookie），或者：
2.  将以下内容添加到您的 ajax 请求中：`xhrFields: { withCredentials: true },`

第二个选项将在请求中包含 cookie。有关更多详细信息，请参见此处：[使用跨域帖子发送凭据？](https://stackoverflow.com/questions/2054316/jquery-sending-credentials-with-cross-domain-posts)

您可能想先尝试第一个选项，以确保跨域请求正常工作，然后再添加 cookie（以使调试更容易）。

# python - PyGraphViz agraph.layout() 抛出 I0 错误

> ID：15513085
> 
> 赞同：1
> 
> 时间：2013-03-20T00:27:38.833
> 
> 标签：python, pygraphviz

运行以下 Python 代码后：

```
import pygraphviz as pgv
G=pgv.AGraph()
G.add_edge(1,2)
G.add_edge(2,3)
G.add_edge(3,4)
G.layout(prog='dot')
G.draw('1.png') 
```

我在 IDLE 中得到了这个跟踪：

```
 File "<pyshell#7>", line 1, in <module>
   G.layout(prog='dot')
 File "C:\Python27\lib\site-packages\pygraphviz\agraph.py", line 1302, in layout
   data=self._run_prog(prog,' '.join([args,"-T",fmt]))
 File "C:\Python27\lib\site-packages\pygraphviz\agraph.py", line 1275, in _run_prog
   raise IOError("".join(errors))
 IOError: 'C:\Program' is not recognized as an internal or external command,
 operable program or batch file. 
```

请帮忙，我正在做一个课程项目。信息：正确安装了 Graphviz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:06:49.773

看起来这是您的 PyGraphViz 和 Windows 版本的错误。我发现[了这个描述它的错误票](https://github.com/networkx/networkx/issues/582)，但它显然已在 2011 年修复。看起来他们实际上还没有发布更新，但如果你可以切换到它，它应该在他们的 SVN 中。

如果没有，并且您不介意自己编辑源代码，那么他们所做的实际修复[确实是微不足道](https://networkx.lanl.gov/trac/changeset/1986/networkx-svn-archive)的。只需找到`agraph.py`，然后更改此行：

```
runprog=self._get_prog(prog) 
```

到

```
runprog=r'"%s"'%self._get_prog(prog) 
```

# c++ - DirectX9 独立分辨率

> ID：15513086
> 
> 赞同：0
> 
> 时间：2013-03-20T00:27:45.323
> 
> 标签：c++, directx, resolution, resolution-independence

如何更改分辨率并将整个游戏扩展到新的分辨率？我希望我的游戏有一个基本分辨率，当我改变它以拉伸到新的分辨率时。我看到了一些类似的问题，但所有答案都表明我应该更改演示参数。如果我这样做，我的屏幕分辨率会改变，但我所有其他对象的大小保持不变并且绘制在错误的位置。

我使用 LPD3DXSPRITE 对象将纹理绘制到屏幕上，一些 DirectX 文本和定义如下的顶点：

```
#define D3DFVF_VERTEX (D3DFVF_XYZRHW | D3DFVF_DIFFUSE) 
```

我尝试将 D3DXSPRITE_OBJECTSPACE 放在 sprite->Begin() 并使用投影、视图和世界矩阵，但没有成功。

有人可以告诉我这种方法是否可行，我该怎么做？我还阅读了另一种建议渲染到表面，然后拉伸表面的方法，但我不知道如何实现。我是 DirectX 的初学者。我用谷歌搜索了第二种方法，但找不到解释它的人，而且我认为我不能从精灵绘制到表面。

编辑：

我设法使用 CreateRenderTarget、SetRenderTarget 和 StretchRect 方法做到这一点，首先打印到表面，然后在后台缓冲区上拉伸它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:45:50.453

您可以通过使用 DIP（与设备无关的像素或与设备无关的单位）测量坐标而不是物理像素来实现此目的。您还必须将您的游戏标记为可识别 DPI，以便操作系统在您更改分辨率时不会缩放您的 UI。有关 DPI 的详细信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/windows/desktop/ff684173%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:57:45.333

我设法使用 CreateRenderTarget、SetRenderTarget 和 StretchRect 方法做到这一点，首先打印到表面，然后在后台缓冲区上拉伸它。

# javascript - 淘汰赛js foreach网格不起作用

> ID：15513087
> 
> 赞同：1
> 
> 时间：2013-03-20T00:27:45.040
> 
> 标签：javascript, knockout.js

这是小提琴：http: [//jsfiddle.net/7RDc3/2096/](http://jsfiddle.net/7RDc3/2096/)

“添加服务”按钮不起作用。我需要它来反映“添加硬件”按钮的功能。下面的代码有问题：您可以在上面的小提琴中看到它的实际效果。

```
var viewModel = function(hardware, services) {
    var self = this;
    self.hardwares = ko.observableArray(hardware);
    self.services = ko.observableArray(services);

    self.addHardware = function() {
        self.hardwares.push({
            name: "",
            price: ""
        });
    };

    self.removeHardware = function(hardware) {
        self.hardwares.remove(hardware);
    };

     self.addService = function() {
        self.services.push({
            name: "",
            price: ""
        });
    };

    self.removeService = function(services) {
        self.services.remove(services);
    };
    self.save = function(form) {
        var allModel = [];
            ko.utils.arrayForEach(services(), function (service) {
                allOrders.push(ko.toJS(service));
            });
            ko.utils.arrayForEach(hardwares(), function (hardware) {
                allOrders.push(ko.toJS(hardware));
            });
            alert("Could now transmit to server: " + ko.utils.stringifyJson(allOrders));
    };
};

var FinalViewModel = new viewModel([]);
ko.applyBindings(FinalViewModel); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:36:30.273

`services`构造视图模型时，您没有为参数传递参数：

```
var FinalViewModel = new viewModel([], []); 
ko.applyBindings(FinalViewModel); 
```

**更新小提琴：http:** [//jsfiddle.net/7RDc3/2097/](http://jsfiddle.net/7RDc3/2097/)

如果未提供参数，您还可以扩充构造函数以使用空数组：

```
var viewModel = function(hardware, services) {
    var self = this;
    self.hardwares = ko.observableArray(hardware || []);
    self.services = ko.observableArray(services || []);
    /* snip */
}; 
```

# c# - SOAP 和 REST 端点公开的 WCF 服务中的自定义用户/密码身份验证

> ID：15513089
> 
> 赞同：0
> 
> 时间：2013-03-20T00:28:03.653
> 
> 标签：c#, wcf, authentication

我有一个需要一些身份验证功能的 WCF 服务

*   该服务由一个 SOAP 端点和一个 REST 端点公开。（即认证机制应该可用于两种类型的客户端）

*   我在后端有自定义用户/密码身份验证。

*   我需要以明文形式从客户端传递凭据，即未加密（服务在公司 VPN 中运行，密码已经散列）。

处理这个最优雅的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:27:05.513

对于用户名+密码认证，目前推荐的方式是使用 UserNameSecurityTokenHandler：

[http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.usernamesecuritytokenhandler.aspx](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.usernamesecuritytokenhandler.aspx)

您需要最新版本的 System.IdentityModel，不要误认为是 Microsoft.IdentityModel。

当您能够在客户端生成代理类时，它非常适用于 SOAP。您只需向客户端代理类提供凭据并通过上述令牌处理程序处理服务器端的逻辑。

我强烈建议将此博客用作参考，只需搜索包含单词 WCF 的博客评论即可。Dominick 是该领域的顶级专家之一。

[http://www.leastprivilege.com/](http://www.leastprivilege.com/)

# java - 使用 Java 并行创建对象

> ID：15513091
> 
> 赞同：0
> 
> 时间：2013-03-20T00:28:12.867
> 
> 标签：java, multithreading

在Java中，我有一个代码：

```
Graph[] graphs = new Graph[100];
for (int i = 0; i < 100; i++) {
    graphs[i] = new Graph();
    Graph g = graphs[i];
    g.subgraphs = new Graph[100 - i];
    g.leaves = new HashSet<Integer>();
    g.targets = new HashMap<Integer, int[]>(l - i);
    g.weights = new HashMap<Integer, Integer>(l - i);
} 
```

我想写一个并行代码。你能帮我在这里学习Java线程吗？所以我添加了这段代码：

```
Thread[] threads = new Thread[3];
for (int i = 0; i < threads.length; i++) {
    threads[i] = new Thread(new Runnable() {
        public void run() {
            // some code to run in parallel
        }
    });
    threads[i].start();
}

// as far as I understood this waits until threads above are finishing
for (int i = 0; i < threads.length; i++) {
    try {
        threads[i].join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

现在，当我创建自定义`Graph`对象时，我可以从循环中复制代码，但我需要以某种方式将索引`i`（即 from `0`to `100`）传递给`run()`方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:29:18.023

如果您的目标是最大化性能，那么您最好的选择几乎可以肯定是*这里根本不做并行*。创建几百个`HashMap`s 几乎肯定会比启动任何新线程便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:27:20.663

在`Java`你只能引用`final`来自匿名内部类的字段，所以你需要声明一个`final`变量`j`来访问索引：

```
Thread[] threads = new Thread[3];
for (int i = 0; i < threads.length; i++) {
  final int j = i;
  threads[i] = new Thread(new Runnable() {
    public void run() {
      // some code to run in parallel
      System.out.println(j);
    }
  });
  threads[i].start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T01:53:54.607

我知道多线程不适合实例化对象，但我支持你亲自练习编码技巧。所以只需尝试并从实际结果中学习。

实际上，从 Java SE 1.5 开始，很少使用低级多线程代码。因为并发包出现了。尝试向`Executor`和`ExecutorService`学习`CompletionService`。

请参阅[并行执行 N 个任务](http://www.javapractices.com/topic/TopicAction.do?Id=247)和[了解 java.util.concurrent.CompletionService](http://markusjais.com/understanding-java-util-concurrent-completionservice/)

# mysql - 如何扩展 MySQL 子查询/连接以包含所有行

> ID：15513092
> 
> 赞同：-1
> 
> 时间：2013-03-20T00:28:19.043
> 
> 标签：mysql, join, subquery

下面的这个查询非常适合生成`horse_id = 1`...的结果，但我想对数据库中的所有马匹执行此操作。谁能与我分享如何调整此查询以便我可以做到这一点？

```
SELECT  figures.entry_id,
        max(figures.beyer)
FROM
        ( SELECT  hrdb_lines.horse_id,
                  hrdb_entries.entry_id,
                  hrdb_lines.beyer
          FROM hrdb_entries
            INNER JOIN hrdb_lines 
                ON hrdb_lines.horse_id = hrdb_entries.horse_id
          WHERE hrdb_lines.horse_id = 1
          ORDER BY hrdb_lines.line_date DESC
          LIMIT 2
        ) as figures 
```

也许我也做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:40:54.187

如果我理解你的问题，这样的事情应该很接近：

```
SELECT
    figures.horse_id,
    figures.entry_id,
    max(figures.beyer)
FROM
    (SELECT
        hrdb_lines.horse_id,
        hrdb_entries.entry_id,
        hrdb_lines.beyer
    FROM hrdb_entries
        INNER JOIN hrdb_lines ON hrdb_lines.horse_id = hrdb_entries.horse_id
    ORDER BY hrdb_lines.line_date DESC
    ) as figures
GROUP BY figures.horse_id 
```

将 MAX 限制为最近的 2 个 beyer 字段的一种选择是在结果中添加一个行号，并且只包括第 1 行和第 2 行。

```
SELECT
    figures.horse_id,
    figures.entry_id,
    max(figures.beyer)
FROM
    (SELECT
        @rn:=if(@prev_horse_id=horse_id,@rn+1,1) rn,
        hrdb_lines.horse_id,
        hrdb_entries.entry_id,
        hrdb_lines.beyer,
        @prev_horse_id:=hrdb_lines.horse_id
    FROM hrdb_entries
        INNER JOIN hrdb_lines ON hrdb_lines.horse_id = hrdb_entries.horse_id
        INNER JOIN (SELECT @rn:=0) r
    ORDER BY hrdb_lines.horse_id, hrdb_lines.line_date DESC
    ) as figures
WHERE rn <= 2
GROUP BY figures.horse_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:41:07.937

我认为以下会产生预期的结果：

```
SELECT `entry_id`, `beyer`
FROM (SELECT hrdb_entries.entry_id,
        MAX( hrdb_lines.beyer )
    FROM hrdb_entries
    INNER JOIN hrdb_lines 
        ON hrdb_lines.horse_id = hrdb_entries.horse_id
    GROUP BY hrdb_lines.horse_id
    ORDER BY hrdb_lines.line_date DESC
    ) AS figures 
```

# sql - SQL Server 2005 按别名分组

> ID：15513094
> 
> 赞同：2
> 
> 时间：2013-03-20T00:28:26.233
> 
> 标签：sql, sql-server, sql-server-2005, group-by

我有

```
 select CustID,

case permission
When 'read' then 'X'
end as 'Read',

case permission
when 'write' then 'X'
end as 'Write',

case permission
when 'own' then 'X'
end as 'Own',

case permission
when ‘destroy’ then ‘X’
end as ‘Destroy’

from rights

group by custID, permission 
```

我只想为每个 custID 写一行。相反，我得到：

```
CustID    |  Read | Write |  Own | Destroy

208345482     X     NULL    NULL   NULL| 
208345482    NULL   NULL     X     NULL|
208345482    NULL   NULL    NULL      X|
208345482    NULL    X      NUL    NULL|
8093657522   NULL   NULL    NULL     X|
8093657522   NULL   NULL     X    NULL| 
```

我试图按别名子查询分组，但无济于事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:29:35.980

您不能在其中使用别名，`GROUP BY`因为它在应用别名之前已被解析。您可以使用别名的唯一位置是在`ORDER BY`子句中，因为它是唯一`SELECT`在定义别名之后解析的子句。

典型的解决方法是重复`GROUP BY`子句中的表达式：

```
SELECT x = CASE ... END, SUM(something)
  FROM dbo.somewhere
  GROUP BY CASE ... END; 
```

或使用 CTE：

```
;WITH src AS
(
  SELECT x = CASE ... END, something
    FROM dbo.somewhere
)
SELECT x, SUM(something)
  FROM src
  GROUP BY x; 
```

或使用子查询：

```
SELECT x, SUM(something)
  FROM
  (
    SELECT x = CASE ... END, something
      FROM dbo.somewhere
  ) AS src
  GROUP BY x; 
```

这些都应该进行类似的优化，但您应该测试您的特定场景以确定。

在你的情况下，你可以这样写：

```
SELECT CustID,
  [Read]    = MAX(CASE permission WHEN 'read'    THEN 'X' END),
  [Write]   = MAX(CASE permission WHEN 'write'   THEN 'X' END),
  [Own]     = MAX(CASE permission WHEN 'own'     THEN 'X' END),
  [Destroy] = MAX(CASE permission WHEN 'destroy' THEN 'X' END)
FROM dbo.rights
GROUP BY custID; 
```

或者像这样：

```
SELECT CustID,
  MAX([Read]), MAX([Write]), MAX([Own]), MAX([Destroy])
FROM
(
  SELECT CustID,
   [Read]    = CASE permission WHEN 'read'    THEN 'X' END,
   [Write]   = CASE permission WHEN 'write'   THEN 'X' END,
   [Own]     = CASE permission WHEN 'own'     THEN 'X' END,
   [Destroy] = CASE permission WHEN 'destroy' THEN 'X' END
  FROM dbo.rights
) AS src
GROUP BY custID; 
```

请不要使用单引号来分隔列或表`'alias'`。不仅不推荐使用语法，而且还使实体看起来像字符串文字。如果必须对其进行转义（例如，如果您选择了错误的列名），请使用`[square brackets]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:35:07.860

您可以[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)直接在一个查询中使用表运算符来执行此操作，而不是使用这些`CASE`表达式。

它将执行您正在寻找的进一步步骤，即使用`CASE`表达式传播记录后对记录进行分组。就像是：

```
SELECT 
  CustId, 
  read, 
  write, 
  own, 
  Destroy
FROM
( 
   SELECT custid, permission, x
   FROM tablename
) AS t
PIVOT
(
   MAX(x)
   FOR permission IN('read', 
                     'write', 
                     'own', 
                     'Destroy')
) AS p; 
```

在您的查询中，如果`x`是字符串文字而不是标识符，那么您通常可以在锚查询中将其选择为带有别名的字符串文字，`SELECT custid, permission, 'x' AS x FROM tablename`那么上面的查询应该可以正常工作。

# javascript - 在 Razor 中为 ViewData 赋值

> ID：15513099
> 
> 赞同：0
> 
> 时间：2013-03-20T00:28:43.553
> 
> 标签：javascript, asp.net-mvc-3, razor, viewdata

我想将一些用户输入存储到客户端的 cookie 中。使用 MVC3/Razor。数据输入到几个 DropDownLists。下面的一个例子：

```
<div style="float: left;">
  @Html.Telerik().DropDownList()
     .Name("name").BindTo((SelectList)@ViewBag.Filter1SelectList)
     .Placeholder("All")
     .ClientEvents(events => events
     .OnChange("onChangeFilter1"))
</div> 
```

我创建了以下 JavaScript 以尝试在下拉值更改时存储值。

```
 function onChangeFilter1(e) {
    var filter1 = document.getElementById('name').value;        
    '<%= ViewData["Filter1Value"]%>' = filter1.toString();        
} 
```

这个想法是从多个下拉列表中收集几个过滤器。在提交按钮上过滤数据。这甚至可能吗？我只看到了一个示例并仔细复制了它，但出现了上述错误：Microsoft JScript 运行时错误：无法分配给'[string]'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-27T05:41:59.837

尝试在 ViewData 之前放置 @ 符号，它将允许您将过滤器值分配给 ViewData

```
@ViewData["Filter1Value"] = filter1.toString(); 
```

# r - 修改 geom_ribbon 边框

> ID：15513103
> 
> 赞同：10
> 
> 时间：2013-03-20T00:29:02.193
> 
> 标签：r, plot, ggplot2

我正在使用下面的代码随着时间的推移绘制一系列均值和标准偏差，并尝试使用 geom_ribbon 来显示 sd，见下文。

由于显着重叠，我想为色带添加一个与相应变量颜色相同但为虚线的边框，但我无法弄清楚代码中的哪个位置。我知道以某种方式涉及“颜色”和“线型”命令......

谢谢！

```
graph.msd <- ggplot(data=g.data, aes(x=quarter,y=mean,group=number)) 
graph.msd <- graph.msd + geom_line(aes(colour = number),size=1)+geom_ribbon(aes(ymin=mean-sd,ymax=mean+sd,fill=number),linetype=2,alpha=0.1) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T01:10:08.283

您需要将值传递 `colour`给类似的`geom_ribbon`东西

```
graph.msd <- graph.msd + 
 geom_line(aes(colour = number),size=1)+
 geom_ribbon(aes(ymin = mean-sd, ymax = mean+sd, 
                 fill = number,colour = number), linetype=2, alpha=0.1) 
```

带有可重现的示例（使用示例中的变体`?geom_ribbon`

```
huron <- data.frame(year = 1875:1972, level = as.vector(LakeHuron))
library(plyr) # to access round_any
huron$decade <- round_any(huron$year, 10, floor)

ggplot(huron, aes(x =year, group = decade)) + 
  geom_ribbon(aes(ymin = level-1, ymax = level+1, 
      colour = factor(decade), fill = factor(decade)), 
    linetype = 2, alpha= 0.1) 
```

![在此处输入图像描述](../Images/d86a3ab187f588f6a33438535e468b61.png)

# ruby - 将ruby中的数组拆分为多个随机大小的较小数组的最佳方法是什么

> ID：15513108
> 
> 赞同：4
> 
> 时间：2013-03-20T00:29:25.423
> 
> 标签：ruby, arrays, random, slice

我有多个可变长度的 ruby​​ 数组，从 1 到 40 ：

@items 是一个典型的数组，长度可以从 1 到 40 不等。例如

```
@items = [1, 2, 3, 4, 5, 6] 
```

我想将数组随机拆分为长度为 1、2 或 3 的较小数组，以给出（例如）的结果

```
@items = [[1, 2],[3],[4,5,6]] 
```

或者

```
@items = [[1],[2, 3],[4],[5,6]] 
```

ETC

我知道您可以使用 @items.each_slice(3)... 拆分数组，其中 3 是固定长度。但我想随机地将可变长度的大型数组随机拆分为 1,2 或 3 的数组大小......实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T00:40:12.940

```
items, @items = @items.dup, []
@items.push(items.shift(rand(1..3))) until items.empty? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T00:38:56.083

```
a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
b = []
until a.empty?
  b << a.shift((1..a.size).to_a.sample)
end
# b => [[1, 2], [3, 4, 5, 6, 7], [8, 9], [10]]
# change everytime though 
```

`a.size`您可以通过替换`3`或任何您想要的来限制子数组的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T01:37:17.007

只是为了恶心，我想我会尝试一种没有变异方法的纯函数形式来解决这个问题：

```
( (0..@items.size)
    .inject([0]) { |m,_| m + [m.last + 1 + rand(3)] }
    .take_while  { |i| i < @items.size } + [@items.size] ).
  each_cons(2).
  map { |s,e| @items[s...e] } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T02:27:08.727

这个解决方案可能使用了太多的局部变量，但它对输入数组没有破坏性，并且在数组窗口最大值上很灵活。

```
def rotateAndTake inputArray, windowSize
  rotator, returnArray, breaker = 0, [], true
  while breaker do
    window = rand(windowSize)+1
    if(rotator + window > inputArray.length) then
      window = inputArray.length - rotator
      breaker = false
    end
    returnArray << inputArray.rotate(rotator).take(window) if window > 0
    rotator += window
  end
  returnArray
end 
```

另外，我只是想写一个使用“旋转”方法的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T07:16:34.670

这是另一个功能解决方案：

```
( [0]+
  (1..a.length-1)
    .to_a
    .sample(rand(a.length))
    .sort+
  [a.length]
).each_cons(2).map{|i,j| a[i..j-1]} 
```

# mysql - 无法使用 JSON 解析 MySql TIMEstamp

> ID：15513109
> 
> 赞同：2
> 
> 时间：2013-03-20T00:29:33.250
> 
> 标签：mysql, json, parsing, serialization, timestamp

在尝试解析以下 JSON 字符串时：

```
{
    marketplaceId:"MKPL",
    asin:"ASIN1",
    sourceTimestamp:2013-03-19T23:38:24.054Z,
    orderId:"ORD1",
    vendorId:"SUPR1",
    warehouseId:"SEA8",
    inventoryOwnerGroup:376,
    lastUpdatedAt:2013-03-19T23:38:23.919Z,
    isHighConfidence:true,
    quantityArriving:2,
    expectedDeliveryDate:2013-03-19T23:38:23.919Z
} 
```

我得到以下异常：

```
org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.sql.Timestamp out of VALUE_EMBEDDED_OBJECT token
 at [Source: N/A; line: -1, column: -1] (through reference chain: com.amazon.freshwombat.po.PurchaseRecord["lastUpdatedAt"])
    at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:219)
    at org.codehaus.jackson.map.deser.std.StdDeserializer._parseDate(StdDeserializer.java:580)
    at org.codehaus.jackson.map.deser.std.TimestampDeserializer.deserialize(TimestampDeserializer.java:28)
    at org.codehaus.jackson.map.deser.std.TimestampDeserializer.deserialize(TimestampDeserializer.java:19) 
```

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:31:59.133

JSON 不支持“日期”的概念。它只支持[简单的数据类型](http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example)，如字符串、数字、数组、布尔值等。因此，将您的日期表示为字符串。例如：

```
lastUpdatedAt: "2013-03-19T23:38:23.919Z", 
```

您必须使用其他 JavaScript 工具/第三方库进行实际日期解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T17:28:02.017

如果您使用**Jackson**进行 JSon 到 Object 的转换，您必须指定`DateFormat`一个`mapper`实例应该使用以便从代表日期的字符串值生成 Date 或`timestamp`.

在 ( `mysql`)的情况下`timestamp`：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
ObjectMapper mapper = new ObjectMapper();
mapper.setDateFormat(format)
Entity entity = mapper.readValue("{ }", Entity.class); 
```

如此密切地遵循@SimpleCoder 的建议和这个片段，我想你不应该有问题。

# .net - 是否可以更改默认 ADFS 安装文件夹？

> ID：15513119
> 
> 赞同：0
> 
> 时间：2013-03-20T00:30:52.870
> 
> 标签：.net, wif, adfs2.0, adfs

是否可以将 ADFS 安装在不同的驱动器中（除了放置 OS 的默认 C: 驱动器）？这些配置在哪里设置？无论如何它会影响性能吗？这种定制的原因是我们在操作系统驱动器中的磁盘空间限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:16:47.683

使用[微软指南](http://technet.microsoft.com/en-us/library/cc756119%28v=ws.10%29.aspx)，但不支持。可能使用将 c:\ADFS 指向另一个驱动器的符号链接会是更好的解决方案？

# c - 在 C 程序中使用 malloc() 和 free() 而不获取 (lldb)

> ID：15513122
> 
> 赞同：0
> 
> 时间：2013-03-20T00:31:05.923
> 
> 标签：c, malloc

这是我使用`malloc()`and编写的第一个程序`free()`。它对我来说看起来是正确的，当我参考我的书时，它看起来与书中的示例非常相似。但是，当我运行程序时，我会收到`(lldb)`提示。

例如，我输入 8 作为元素数，输入 2 作为初始化值。我的 xcode 编译器回复“（lldb）”。

谁能引导我朝着正确的方向前进？

```
#include <stdio.h>
#include <stdlib.h>
int * make_array(int elem, int val);
void show_array(const int ar[], int n);
int main(void)
{
int *pa;
int size;
int value;

printf("Enter the number of elements: ");
scanf("%d", &size);
while (size > 0) {
    printf("Enter the initialization value: ");
    scanf("%d", &value);
    pa = make_array(size, value);
    if (pa)
    {
        show_array(pa, size);
        free (pa);
    }
    printf("Enter the number of elements (<1 to quit): ");
    scanf("%d", &size);
}
printf("Done.\n");
return 0;
}

int * make_array(int elem, int val)
{
int index;
int * ptd;

ptd = (int *) malloc(elem * sizeof (int));

for (index = 0; index < elem; index++)
    ptd[index] = val;

return ptd;
}

void show_array(const int ar[], int size)
{
int i;
for (i = 0; i < size; i++)
    printf("%d",ar[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:36:10.590

您的程序编译并运行（可能如您所料）。这是示例输出：

```
Enter the number of elements: 5
Enter the initialization value: 12
1212121212
Enter the number of elements (<1 to quit): 8
Enter the initialization value: 2
22222222
Enter the number of elements (<1 to quit): 100
Enter the initialization value: 34
34343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434
Enter the number of elements (<1 to quit): -1
Done. 
```

# input - 可以角度过滤输入

> ID：15513128
> 
> 赞同：1
> 
> 时间：2013-03-20T00:31:49.367
> 
> 标签：input, filter, angularjs

有没有办法过滤Angular中的输入？我会想象

```
var input = e.$filter(/a-zA-Z/); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:15:30.977

我不确定是否理解您的问题，但您可以使用 ngPattern 指令强制输入模式。

```
<form name="theForm" novalidate>
   <input type="text" ng-model="foo" ng-pattern="/a-zA-Z/" required/>
   <button ng-click="update()" ng-disabled="theForm.$invalid">SAVE</button>
</form> 
```

# unit-testing - 如何在 Zend Framework 2 中使用 PHPUnit 测试转发的请求？

> ID：15513131
> 
> 赞同：2
> 
> 时间：2013-03-20T00:32:06.583
> 
> 标签：unit-testing, phpunit, zend-framework2, forwarding, controller-action

我有一个简单的控制器动作

```
class CatalogController extends AbstractActionController {

    public function indexAction() {
        return new ViewModel();
    }
    // ...
} 
```

并对其进行单元测试：

```
class CatalogControllerTest extends AbstractHttpControllerTestCase
{
    public function testIndexActionCanBeAccessed()
    {
        $this->routeMatch->setParam('action', 'index');
        $result   = $this->controller->dispatch($this->request);
        $response = $this->controller->getResponse();
        $this->assertEquals(200, $response->getStatusCode());
        $this->assertInstanceOf('Zend\View\Model\ViewModel', $result);
} 
```

它工作得很好。

现在我正在[转发](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.plugins.html#forward-plugin)请求

```
public function indexAction() {
    return $this->forward()->dispatch('Catalog/Controller/Catalog', array('action' => 'list-cities'));
} 
```

并在之后通过单元测试得到错误`$this->controller->dispatch($this->request);`：

```
PHP Fatal error:  Call to a member function getEventManager() on a non-object in /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/Plugin/Forward.php on line 147 
```

你如何/应该如何用前锋测试动作方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:56:51.067

你试过这样的调度吗？我刚刚尝试在我的一个控制器操作中转发，并且单元测试工作正常。这是我的代码：

```
use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase

class IndexControllerTest extends AbstractHttpControllerTestCase
{

    public function setUp()
    {
        require APPLICATION_PATH . '/init_autoloader.php';
        $testConfig = include APPLICATION_PATH . '/config/test.php';
        $this->setApplicationConfig($testConfig);
        parent::setUp();
    }

    public function testFoo()
    {
        $this->dispatch('/catalogue');
        $this->assertResponseStatusCode(200);
        $this->assertModuleName('Catalogue');
        $this->assertControllerName('Catalogue\Controller\Index');
        $this->assertControllerClass('IndexController');
        $this->assertActionName('index');
        $this->assertMatchedRouteName('logcataloguen');
    }

} 
```

# ruby-on-rails - Rails 3.2.7 和 link_to

> ID：15513134
> 
> 赞同：0
> 
> 时间：2013-03-20T00:32:19.200
> 
> 标签：ruby-on-rails, ruby, link-to, actioncontroller

首先，对 Rails 来说还是很新的。我一直在关注使用“link_to”命令的教程——基本上，我有一些带有“关于我们”、“常见问题”、“联系我们”的链接，我希望它们链接到各自的页面。

按照教程，我的 contact_us.html.erb 文件中的代码如下所示：

```
<%= link_to "About Us", {:controller => ‘static_pages’, :action => ’about_us’} %> 
```

我的控制器被调用，我在该文件中`static_pages_controller.rb`有一个方法，其中没有代码：`about_us`

```
def about_us
end 
```

我的控制器代码是：

```
class StaticPagesController < ApplicationController
  def about_us
  end

  def faq
  end

  def contact_us
  end

  def t_and_c
  end

  def t_and_c_competition
  end

  def show
  end
end 
```

我得到错误：

> 静态页面中的名称错误#contact_us
> 
> 未定义的局部变量或方法`'static_pages'......等

有什么想法有什么问题吗？我认为这可能是因为本教程适用于 ruby​​ 1.8.6 和 Rails 2.0.2，而我有 Ruby 1.8.7 和 Rails 3.2.7。我听说 Rails 因不向后兼容而臭名昭著。我应该更改我的代码吗？到什么？谢谢你的帮助。

C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:47:04.947

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:21:28.043

我将此添加到我的 routes.rb 中：

获取“static_pages/about_us”

现在它可以工作了。谢谢你的帮助！

# c# - 使用密码填充防止“彩虹表”逆向工程的密码哈希保护

> ID：15513135
> 
> 赞同：0
> 
> 时间：2013-03-20T00:32:19.767
> 
> 标签：c#, asp.net, passwords, cryptography, rainbowtable

我遇到过[这篇文章](http://crackstation.net/hashing-security.htm)，它描述了在数据库中存储“未加盐”密码哈希的危险，可能会使用所谓的“[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)”进行逆向工程。

它还附带这个[C# 代码示例](http://crackstation.net/hashing-security.htm#aspsourcecode)，基本上需要在您的用户密码数据库表中存储两个哈希列（而不是传统的 - 一个。）对我来说这种方法的问题是我已经建立了一个带有未加盐用户密码的数据库表散列，添加新列将需要重组数据库。所以在我这样做之前，我一直在寻找一个不同的选择，这就是我想出的。

这是一个函数，它不是简单地计算密码上的 SHA1 哈希，而是用一长串伪随机（但一致）数据填充它，然后计算哈希：

```
byte[] computeSecureHash(string strUserPassword)
{
    //RETURN: = SHA1 byte array on the 'strUserPassword'

    //Make simple junk array based on the password
    ushort v = 117;
    byte[] arrJunk = new byte[24];
    for (int c = 0, i = 0; i < arrJunk.Length; i++)
    {
        v ^= strUserPassword[c++];
        v *= 7;
        arrJunk[i] = (byte)v;

        if (c >= strUserPassword.Length)
            c = 0;
    }

    //Make crypto byte array based on the password
    Rfc2898DeriveBytes pbkdf2 = new Rfc2898DeriveBytes(strUserPassword, arrJunk);
    pbkdf2.IterationCount = 1000;
    byte[] arrCrypto = pbkdf2.GetBytes(128);

    //Pad actual password
    string strUserPassword_Padded = "";

    const string strChars2Use = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`-=[]\\;',./~!@#$%^&*()_+{}|:\"<>?";
    int nHalfArrCrypto = arrCrypto.Length / 2;

    //Left side
    for (int i = 0; i < nHalfArrCrypto; i++)
    {
        strUserPassword_Padded += strChars2Use[arrCrypto[i] % strChars2Use.Length];
    }

    strUserPassword_Padded += strUserPassword;

    //Right side
    for (int i = nHalfArrCrypto; i < arrCrypto.Length; i++)
    {
        strUserPassword_Padded += strChars2Use[arrCrypto[i] % strChars2Use.Length];
    }

    //For user's password "123"
    //the 'strUserPassword_Padded' becomes:
    //"bwDR]_B>H5t-k:eIq?r_wGBWqWfs#tcAE~DQ5?(Pbj#<+Cw:9(r!B[f_.S<pCjn-123b9l3<Sz^D~>G}v)?NuHT4BZ-pI2$W[kW1e4KO\"`rTg3H`}&jmtrFh1J5c72:})tQ"

    //And now compuse SHA1 on the padded password
    SHA1 sha1 = new SHA1CryptoServiceProvider();
    byte[] bytesInputData = System.Text.Encoding.UTF8.GetBytes(strUserPassword_Padded);
    return sha1.ComputeHash(bytesInputData);
} 
```

所以我的问题是，有人可以查看这段代码并告诉我这样做的危险与作者在[他的代码](http://crackstation.net/hashing-security.htm#aspsourcecode)中所建议的相比有什么危险吗？对于我的代码示例，我只需要在数据库中存储一个散列而不是两个（密码散列 + 盐散列。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:35:20.013

仅从密码派生的盐几乎毫无意义。您刚刚创建了一个稍微不同（但不变）的散列函数。可以使用单个彩虹表（尽管是自定义的）来定位整个数据库。

此外，如果从密码中派生盐，则相同的密码将显示为相同的“密码哈希”。简单密码可能会显示为重复密码 - 实际上您正在生成自己的彩虹表。

为每个密码存储一个**唯一的**、**独立生成的**salt 的全部意义在于，每个密码都使用**唯一的**哈希函数进行哈希处理。因此，不会有可以在整个数据库中使用的单一彩虹表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T00:41:44.760

这只会部分缓解问题。您所做的实际上是创建了一个键控散列函数。

有了这样的功能，通用彩虹表将不再适用，但如果攻击者控制了您的整个数据库，您仍然处于危险之中。在这种情况下，他可以根据这个随机字符串创建一个新的彩虹表。使用这张新表，他很有可能闯入您系统中的至少一个帐户。

添加单独的盐相当于为每个密码使用不同的哈希函数，因此您需要为每个可能的盐使用单独的彩虹表，这使得攻击非常昂贵。如果攻击者为一种盐创建彩虹表，他只能破解该盐的密码。

另外，我想指出，如果随机性保持不变，添加多少“静态”随机性并不重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T13:40:17.020

*垃圾*来自密码，因此它没有盐渍效果，仍然可以生成可以应用于整个表的彩虹表。

但是，如果您只想使用一列，答案会更简单：

只需**使用 pbkdf2**直接制作您的哈希，**制作一个 64 位（8 字节）随机盐**，使用更高的迭代次数（4000-10000）。如果您的列只能容纳 160 位（20 字节），则**生成 12 字节**（如果您的列可以容纳更多，我会将其增加到 24 字节）并存储在您的列中**salt + hash concatenated**。

因此，当您进行比较时，您只需**读出前 8 个字节**即可获得盐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T00:43:37.900

您始终可以使用当前数据库散列密码并使用不同的散列算法+盐再次散列它们，就像它们是原始密码一样。在散列之上分层散列是完全安全的，实际上这种方式通常更安全。但请记住，您还必须能够逆转该过程，否则您会破坏事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T05:31:30.117

restructuring of the database to just add an salt field is better option (or the only one really if your going to do it properly, but you could use your currant hash field to store the salt, as other person posted)

when they next log in with an valid user name and password (as this is only when the password hash should change or you do mass force change password on every one) if there is no Salt data then generate large random salt save it and regenerate the hash from the password+salt (ideally using something better then SHA1, pbkdf2 needs to be set higher then 10,000 but depends on your server resources)

# java - 无法在 AWT EventQueue 中过滤 MouseEvent.MOUSE_CLICKED

> ID：15513139
> 
> 赞同：0
> 
> 时间：2013-03-20T00:33:07.557
> 
> 标签：java, swing, mouseclick-event, mouse-listeners, awt-eventqueue

我需要在我自己的 AWT EventQueue 过滤鼠标双击，所以我这样做：

```
public class AppEventQueue extends EventQueue
{
@Override
protected void dispatchEvent(AWTEvent event)
{
    super.dispatchEvent(event);
    if(event instanceof MouseEvent)
    {
        MouseEvent mouseEvent = (MouseEvent) event;
        if(mouseEvent.getModifiers() == MouseEvent.MOUSE_CLICKED)
        {
            //do something
        }
    }
}
} 
```

我遇到的问题是，看起来用鼠标单击正在生成 int 值 16，MouseEvent.MOUSE_CLICKED 的值为 500。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:40:39.953

你想检查身份证：

```
if (mouseEvent.getID() == MouseEvent.MOUSE_CLICKED {

} 
```

# android - 如何在 Android 中为 Vpn 断开连接添加额外的处理？

> ID：15513144
> 
> 赞同：3
> 
> 时间：2013-03-20T00:33:40.487
> 
> 标签：android, vpn

我有一个 VpnService 的自定义实现，它需要在断开连接时执行一些额外的清理。当我使用服务绑定从我的应用程序中停止 VpnService 时，一切正常，但是当客户端使用系统对话框从 Vpn 断开连接时，我需要执行该清理。

那么，我怎样才能捕捉到断开连接并添加一些处理呢？

[在 Android 上获取 VPN 连接状态](https://stackoverflow.com/questions/3461967/get-vpn-connection-status-on-android)- 这可能是解决方案，但它不适用于 android 4+。

从日志的角度来看，只有两个条目：

`03-20 03:27:09.478: INFO/Vpn(504): Switched from org.my.package to [Legacy VPN]` `03-20 03:27:09.478: DEBUG/Vpn(504): setting state=IDLE, reason=prepare`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T16:07:41.790

我刚刚遇到了同样的问题。不调用 VpnService.onRevoke()。

事实证明，这是因为我使用了一个通过 AIDL 定义的自定义 IBinder，我从 onBind() 返回。VpnService 也实现了 onBind() 并返回 VpnService.Callback 的实例。以这种方式实现：

```
private class Callback extends Binder {
    @Override
    protected boolean onTransact(int code, Parcel data, Parcel reply, int flags) {
        if (code == IBinder.LAST_CALL_TRANSACTION) {
            onRevoke();
            return true;
        }
        return false;
    }
} 
```

VpnService.Callback 不使用 AIDL，只检查函数代码 IBinder.LAST_CALL_TRANSACTION 是否已发送。如果是，则执行 onRevoke()。

我将此代码片段集成到我的自定义 IBinder 实现中，现在我收到 onRevoke() 消息。请参见以下示例：

```
private final IBinder mBinder = new ServiceBinder();    
@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}
public final class ServiceBinder extends ICustomVpnService.Stub
{
    ... implement methods defined in ICustomVpnService.Stub ....

    /**
     * Intercept remote method calls and check for "onRevoke" code which
     * is represented by IBinder.LAST_CALL_TRANSACTION. If onRevoke message
     * was received, call onRevoke() otherwise delegate to super implementation.
     */
    @Override
    public boolean onTransact(int code, Parcel data, Parcel reply, int flags)
    throws RemoteException
    {
        // see Implementation of android.net.VpnService.Callback.onTransact()
        if ( code == IBinder.LAST_CALL_TRANSACTION )
        {
            onRevoke();
            return true;
        }
        return super.onTransact( code, data, reply, flags );
    }

    private void onRevoke()
    {
        // shutdown VpnService, e.g. call VpnService.stopSelf()
    }
} 
```

我是怎么想出来的？我在 android 源代码中搜索了实际调用 onRevoke() 的位置。为此，我发现[grepcode (android)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/net/VpnService.java/#VpnService.onRevoke%28%29)非常有用。我经常阅读 android 源代码以了解事情是如何工作的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-20T10:36:10.537

事实证明，这是因为我使用了一个通过 AIDL 定义的自定义 IBinder，我从 onBind() 返回。VpnService 也实现了 onBind() 并返回 VpnService.Callback 的实例。

是的，它是正确的。所以，我认为这是另一种解决方法：

```
@Override
public IBinder onBind(Intent intent) {
    String action = null;
    if (intent != null) {
        action = intent.getAction();
    }

    if (VpnService.SERVICE_INTERFACE == action) {
        return super.onBind(intent);
    }

    return yourBinder;
} 
```

# php - cakephp 2 - 分页 - 不要在 url 中传递变量

> ID：15513148
> 
> 赞同：0
> 
> 时间：2013-03-20T00:34:38.390
> 
> 标签：php, cakephp

我有一个搜索表单，如果有人填写它并且没有要报告的结果，我想让他们知道这一点，然后向他们展示我选择的结果集。问题是，当我向他们展示我选择的这个结果集并且我使用分页器助手进行 prev/next 时，他们想要传递我的 URL 中的搜索词以及页码。

这显然会导致问题，因为结果搜索没有页面：2：termHasNoResults

当我向他们展示我的替代结果集时，如何阻止分页器助手在 URL 中传递我的搜索变量？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:44:43.570

您可以将“url”选项传递给视图中的分页，如下所示：

```
$url = array_merge($this->request->pass, $this->request->named);
unset($url['page']);
$parts = explode('?', $_SERVER['REQUEST_URI'], 2);
if (count($parts) == 2) {
    $url['?'] = $parts[1];
}
$this->Paginator->options(array(
    'url' => $url,
)); 
```

更多在这里：[http](http://api.cakephp.org/2.2/class-PaginatorHelper.html) ://api.cakephp.org/2.2/class-PaginatorHelper.html 在这里：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper::选项](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper::options)

如果您广泛使用过滤器和其他 url 参数 - 制作一个将为您处理它的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:36:28.877

利用
`$this->Paginator->options('url' => array(
'controller' => 'YOUR CONTROLLER', 'action' => 'YOUR ACTION', 'OTHER PARAMS');`

# javascript - IE9 的 JavaScript 问题 - 显示开发人员工具栏时没有问题

> ID：15513150
> 
> 赞同：2
> 
> 时间：2013-03-20T00:34:43.757
> 
> 标签：javascript, internet-explorer, coffeescript

我在 IE9 中遇到了一个非常奇怪的 JavaScript 问题（它在 Chrome、Safari、Firefox 中运行良好）。

当您单击相关的样本时，我有一些 JS 会选择图像的不同颜色。在 IE9 中，似乎完全忽略了这一点，它只是什么都不做。但是，只要我打开 F12 开发人员工具，它就会开始工作——即使没有重新加载页面。我在这里遗漏了什么吗？

**jQuery**

```
$('.product-details-description-colors .circle img').click(function() {

  if(!$(this).hasClass('oos')) {

    url = $(this).parent('label').data('image');
    color_value = $(this).parent('label').prev('input');
    color_value.prop('checked', true);

    $('.circle').find('input').not(color_value).attr('checked', false);
    $(this).css('outline', '1px solid black');
    $('.product-details-description-colors .circle img').not(this).css('outline', 'none');
    $('.product-details-images-showroom img').attr('src', url);

  }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:32:02.447

我假设您尚未发布所有代码。最常见的原因之一是尝试使用该`console`对象，特别是`console.log`. 这仅在 F12 工具打开时可用，如果未打开，则会导致传播`undefined`.

因此，将其放在您的咖啡脚本应用程序中的某个位置是一个好主意：

```
# Fix IE logging issues
if not window.console
  window.console = 
    log: -> 
```

# ruby-on-rails - def to_s 函数是什么？

> ID：15513154
> 
> 赞同：2
> 
> 时间：2013-03-20T00:35:01.103
> 
> 标签：ruby-on-rails, ruby

我正在浏览[Blogger](http://tutorials.jumpstartlab.com/projects/blogger.html#i3%3a-tagging)教程的“标签”部分，但有一点有点困惑：def to_s 函数（在 tag.rb 中）；为什么需要它以及如何包含它。

我已经包含了相关文件的一些相关部分以作为上下文。

***楷模***

**文章.rb**

```
class Article < ActiveRecord::Base
  attr_accessible :tag_list
  has_many :taggings
  has_many :tags, through: :taggings

  def tag_list
    return self.tags.collect do |tag|
      tag.name
    end.join(", ")
  end

  def tag_list=(tags_string)
    self.taggings.destroy_all

      tag_names = tags_string.split(",").collect{|s| s.strip.downcase}.uniq

      tag_names.each do |tag_name|
        tag = Tag.find_or_create_by_name(tag_name)
        tagging = self.taggings.new
        tagging.tag_id = tag.id
      end
    end
  end 
```

**标签.rb**

```
class Tag < ActiveRecord::Base
  has_many :taggings
  has_many :articles, through: :taggings

  def to_s
    name
  end
end 
```

**标记.rb**

```
class Tagging < ActiveRecord::Base
  belongs_to :tag
  belongs_to :article
end 
```

***控制器***

**tags_controller.rb**

```
class TagsController < ApplicationController

  def index
    @tags = Tag.all
  end

  def show
    @tag = Tag.find(params[:id])
  end

  def destroy
    @tag = Tag.find(params[:id]).destroy
    redirect_to :back
  end
end 
```

***帮手***

**article_helper.rb**

```
module ArticlesHelper

  def tag_links(tags)
    links = tags.collect{|tag| link_to tag.name, tag_path(tag)}
    return links.join(", ").html_safe
  end
end 
```

***意见***

**新的.html.erb**

```
<%= form_for(@article, html: {multipart: true}) do |f| %>
  <p>
    <%= f.label :tag_list %>
    <%= f.text_field :tag_list %>
  </p>
  <p>
    <%= f.submit %>
  </p>
<% end %> 
```

**显示.html.erb**

标签：`<%= tag_links(@article.tags) %>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T07:52:29.370

我明白你的意思了。当您在字符串中连接值时，您必须编写例如

```
"hello #{@user.name}" 
```

因此，您可以指定将用户显示为字符串的任何内容，而不是调用@user.name，您可以直接在 to_s 方法中指定，这样您就不需要再次调用 .to_s 只需编写

```
"hello #{@user}" 
```

以上代码行搜索@user 类的.to_s 方法并打印返回值。

同样适用于路由

```
user_path(@user) 
```

会给你 >> ***users/123*** # 其中 123 是 @user 的 id

如果你写

```
def to_params
 self.name
end 
```

然后它将给出 >> ***users/john*** # 其中 john 是 @user 的名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:13:57.247

`to_s`是将 Object 转换为字符串的标准 Ruby 方法。您定义`to_s`何时需要为您的类自定义字符串表示。例子：

```
1.to_s #=> "1"
StandardError.new("ERROR!").to_s #=> "ERROR!" 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T03:16:30.153

`to_s`是一个函数，它返回对象的等效字符串。

在这种情况下，你已经`Tag.to_s`定义了，它允许你做这样的事情

```
tag = Tag.new(:name => "SomeTag")
tag.to_s #=> "SomeTag" 
```

当您想要来自标签的字符串时（例如，在打印到控制台时），您可以添加更多逻辑以`to_s`获得更友好的字符串，而不是对象哈希码。

# asp.net - 绑定 SQL 数据以提取列

> ID：15513157
> 
> 赞同：0
> 
> 时间：2013-03-20T00:35:17.090
> 
> 标签：asp.net, sql, data-binding, datatable, dataview

从我的 ASP.NET c# 应用程序中，我想运行 SQL 查询并存储所有列值，以便我可以在我的应用程序中使用它们。

例如，

```
select name, age, phone, address, work from UserInfo 
```

我想将每一列（姓名、年龄、电话、地址、工作）绑定到我页面中的每个单独的文本框中。

DataView 是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:51:21.910

是的，您当然可以使用[DataView 控件](http://msdn.microsoft.com/en-us/library/fdcwwhez.aspx)来处理 .aspx 页面上的数据。

如果它是“最好的”方式，它取决于很多事情。通常，您可能不会看到更有经验的 ASP.NET 开发人员经常使用它，因为您经常会得到很多类似业务的逻辑和数据访问管道直接放在 .aspx 中的代码。

# html - 在 iphone webapp 中打开 pdf

> ID：15513161
> 
> 赞同：1
> 
> 时间：2013-03-20T00:35:31.400
> 
> 标签：html, jquery-mobile

我正在尝试从我的 JQM webapp 打开一个 pdf。我已经尝试过 iframes/embed/object，但这些都不能像在桌面浏览器上那样在 iphone 上工作（滚动、缩放等）。我已经解决了简单地通过链接打开 pdf 文件`<a href="mypdf.pdf">Link</a>`。这在标准浏览器中运行良好，因为用户可以简单地使用浏览器后退按钮导航回我的应用程序。

我遇到的问题是，当用户将页面保存到他们的主屏幕并使用无铬 safari 浏览器打开它时，他们不再有浏览器后退按钮。我已经尝试添加`target="_blank"`到链接，但显然 JQM 劫持了链接并阻止在新页面中打开，并且我无法让黑客工作。

我也尝试过 pdf.js，但我似乎无法让它工作，因为我的 javascript 知识相当有限，而且示例非常先进。我发现的唯一教程使用了我无法使用的旧版本。

有没有办法绕过 JQM 在新窗口中打开链接（这又会在移动 safari 而不是我的 chromeless web 应用程序中打开），或者对于如何从 web 应用程序打开 pdf 有任何其他建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T01:28:53.780

只需禁用默认的 jQuery Mobile 行为，通过指定`data-ajax=false`.

例如：

```
<a href="somefile.pdf" data-ajax="false">Link</a> 
```

请参阅[http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:05:30.060

对于我的 webApps，我使用[https://docs.google.com/viewer](https://docs.google.com/viewer)将 pdf 嵌入到我的界面中。因此，当我通过主屏幕图标导航 webApp 时，打开 pdf 时应用程序不会关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T03:05:01.340

我遇到了同样的问题：`open pdf in webapp with html5`。

我尝试了几种解决方案：iframe、embed、pdf.js，但没有一个是最好的解决方案。

`tips`: iOS 9.x 上，用iframe打开pdf只显示pdf文件的第一页，调试的时候iframe body会有一个`<img />`tag。

util now 我仍然有这个麻烦的问题，任何人都有解决方案，请在这里写下您的经验。

谢谢你。

# delphi - PCSCConnector 和 Windows 7

> ID：15513170
> 
> 赞同：1
> 
> 时间：2013-03-20T00:37:01.593
> 
> 标签：delphi, windows-7, smartcard, pcsc

我`PCSCConnector`从[http://nobbi.com](http://nobbi.com)使用，最后一次更新 - 2004 年 4 月。在 Windows XP 上一切正常，但在 Windows 7 上出现了一些问题。

当我在 Delphi IDE（终止）中按 CTRL+F2 并且我的软件已打开卡连接时，任何软件（包括我自己的）都无法打开与卡的新连接。我需要物理重新连接卡（在我的情况下是 USB）才能创建新的连接。

我尝试更改`dwScope`为(from ) 和更改`SCardEstablishContext`为( from ) ，但问题仍然存在。`SCARD_SCOPE_SYSTEM``SCARD_SCOPE_USER``dwDisposition``SCardDisconnect``SCARD_LEAVE_CARD``SCARD_RESET_CARD`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:47:19.827

当你使用`Ctrl+F2`时，它是一个强制终止。没有代码有机会正确地清理、关闭或释放任何东西——它只是被关闭了。您对库的退出代码所做的任何更改都无济于事，因为它永远没有机会运行。您已通过强制终止应用程序阻止了这种情况的发生。

`Ctrl+F2`解决方案：除了无法以任何其他方式停止的失控代码外，不要使用任何其他内容。按照应该关闭的方式正常关闭您的应用程序，因此它有机会清理并调用`finalization`代码等。

# box-api - 在 2.0 API 中尝试对 /users/USERID 端点执行 PUT 时出错

> ID：15513171
> 
> 赞同：0
> 
> 时间：2013-03-20T00:37:03.313
> 
> 标签：box-api

我见过其他人有同样的问题......每当我尝试禁用用户或更新他们的标题时，我都会收到以下 json 错误消息。有没有人有这个运气？

我对添加 email_alias 的 POST 方法或将用户文件夹从一个所有者移动到另一个所有者的 PUT 方法没有任何问题。我已经在 perl 和 curl 中尝试过（见下面的示例会话）所以我相对有信心：

1.  我有一个有效的 OAuth2 不记名令牌
2.  我的内容和 URL 格式正确

所以，我试图发布到：

```
PUT /2.0/users/XXXXXXXXXX HTTP/1.1
Authorization: Bearer TOKEN 
```

回复：

```
HTTP/1.1 400 Bad Request

{"type":"error","status":400,"code":"invalid_request_parameters","help_url":"http:\/\/developers.box.com\/docs\/#errors","message":"Invalid input parameters in request","request_id":"1682580609514902d69b5fd"} 
```

更新：下面是 curl 显示请求正文的跟踪：

```
0000: PUT /2.0/users/USERID HTTP/1.1  
00a2: Authorization: Bearer TOKEN  
011f:
=> Send data, 23 bytes (0x17)
0000: {"status" : "inactive"}
<= Recv header, 26 bytes (0x1a)
0000: HTTP/1.1 400 Bad Request
<= Recv data, 207 bytes (0xcf)
0000: {"type":"error","status":400,"code":"invalid_request_parameters"
0040: ,"help_url":"http:\/\/developers.box.com\/docs\/#errors","messag
0080: e":"Invalid input parameters in request","request_id":"718513715
00c0: 514916f1109c2"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:42:48.950

找到了 PUT 上 4xx 错误的答案：框内应用程序的 OAuth2 设置需要检查“管理企业”……我的应用程序自 OAuth2 之前的日子以来一直存在，不知道这个标志。

检查后，我得到 200 响应...一些 PUT 操作仍然没有有效地更改属性，但它们返回 2xx 响应，因此，清除了一个障碍。

# html - 长下划线标签，不是

> ID：15513175
> 
> 赞同：1
> 
> 时间：2013-03-20T00:37:45.417
> 
> 标签：html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:40:23.927

它被称为[水平规则](https://developer.mozilla.org/en-US/docs/HTML/Element/hr)：

```
<hr> 
```

它看起来像这样：

* * *

您还[可以使用 CSS 设置样式](http://www.sovavsiti.cz/css/hr.html)（就像 Stack Overflow 所做的那样），如下所示：

```
hr {
    color: red;
    background-color: red;
    height: 2px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:41:12.843

您正在寻找的标签是：[`<hr>`](https://developer.mozilla.org/en-US/docs/HTML/Element/hr)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-20T00:42:46.363

```
<hr> 
```

您可以使用 HTML5 不支持的 4 个属性。

*   对齐
*   无影
*   尺寸
*   宽度

我在我的网站上使用它：表示屏幕宽度的 99% 和尺寸 1。

```
<hr noshade size=1 width="99%"> 
```

请阅读以下文章以了解您的问题：

*   [http://dev.w3.org/html5/markup/hr.html](http://dev.w3.org/html5/markup/hr.html)
*   [http://www.w3schools.com/tags/tag_hr.asp](http://www.w3schools.com/tags/tag_hr.asp)

# git - Git 签出到第一次提交

> ID：15513179
> 
> 赞同：2
> 
> 时间：2013-03-20T00:37:59.437
> 
> 标签：git

签出第一次提交后，如何列出所有 git 分支？

例如

```
git log --oneline 
```

显示我所有的分支：

```
06c4b5c Version 3 of Hello World
efa167f Version 2 of Hello World
47a33c8 Hello World 
```

如果我检查我的第一次提交

```
git checkout 47a33c8 
```

显示此消息

> 您处于“分离 HEAD”状态。您可以环顾四周，进行实验性更改并提交它们，并且您可以放弃在此状态下所做的任何提交，而不会通过执行另一次签出来影响任何分支......

那么如果我这样做：

```
git log --oneline 
```

现在只显示第一个提交：

> 47a33c8 你好世界

我的问题是，如果我最初不知道 HEAD 的位置在 06c4b5c，那么在签出第一次提交后如何返回该位置？

另外，我收到此错误

> 错误：pathspce '06c4b5c' 与​​ git 已知的任何文件都不匹配。

当我尝试结帐时 06c4b5c

```
git checkout 06c4b5c 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:41:38.013

您可以使用`git reflog`来查看您之前的位置。你会看到一个类似的条目

```
checkout: moving from master to 47a33c8 
```

只需`git checkout master`返回该分支即可。

要列出所有分支，请使用`git branch -l`.

# java - webservice方法上的数组类型不兼容可能存在错误

> ID：15513181
> 
> 赞同：0
> 
> 时间：2013-03-20T00:38:12.700
> 
> 标签：java, web-services, jakarta-ee, netbeans

所以我有这个在 glassfish 服务器中运行的 web 服务，并连接到一个 mysql 数据库，其中包含几个 webmethods，其中包括：

```
@WebMethod(operationName = "getDrops")
public Dropslog[] getDrops(@WebParam(name = "User") Users user, @WebParam(name = "MonsterID") int monsterID){
    return dbmg.getDrops(user, monsterID);
} 
```

如您所见，此方法通过从另一个类调用此方法返回 Dropslog[] 类型的变量：

```
public Dropslog[] getDrops(Users user, int monsterID){
    Dropslog drop;
    Criteria criteria = session.createCriteria(Dropslog.class);      

    criteria.add(Restrictions.eq("monsterId", monsterID));
    drop = (Dropslog) criteria.uniqueResult();

    List<Dropslog> drops = (List<Dropslog>) criteria.list();
    Dropslog[] dropsArray = new Dropslog[drops.size()];
    dropsArray = drops.toArray(dropsArray);

    return dropsArray;
} 
```

此方法以前返回`drops`的类型是，`List<Dropslog>`但我在阅读[此处](http://www.coderanch.com/t/493462/Web-Services/java/java-util-List-webservice)时更改了它，因为 SOAP Web 服务无法返回列表。

现在客户端的应用程序使用以下代码调用 webmethod getDrops：

```
 public static Dropslog[] getDrops(webservice.Users user, int monsterID){
   webservice.PvmWs service = new webservice.PvmWs();
   webservice.ClientHandler port = service.getClientHandlerPort();
   return port.getDrops(user, monsterID);
  } 
```

因此，从您所看到的情况来看，这应该可以完美地工作，但事实并非如此，相反，我在最后一个方法的返回行上标记了 NetBeans 上的不兼容类型错误提示：

```
incompatible types
required: Dropslog[]
found: List<Dropslog> 
```

令人惊讶的是，当我按照 NetBeans 的建议对其进行更改时，它确实可以编译和工作。我想知道为什么会发生这种情况，如果它是某种错误或 netbeans 正在使用旧文件来编译代码，或者 java 是否进行了某种自动转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:58:14.993

JAXB 中数组的默认输出类型是列表。

> 据我所知，在 JAXB`List<T>`中`Array`没有任何区别。在内部，即使您像这样声明您的 WS 操作：

```
public Shape[] echoShapes(Shape[] input) 
```

> JAXB 将创建一个`List<Shape>`实例来保存 Unmarshal 结果，然后用于`List.toArray()`将其转换为数组类型。

[OTN 论坛：Web 服务 ...数组或列表 ...](https://forums.oracle.com/forums/thread.jspa?threadID=885311)

# java - 将不关心扩展为二进制数的递归方法

> ID：15513184
> 
> 赞同：0
> 
> 时间：2013-03-20T00:38:25.830
> 
> 标签：java, algorithm, recursion

我正在尝试编写一个函数，它将像“---”这样的输入转换为 000,001,010,011,100,101,110 和 111。另一个示例是“1--”-> 100,101,110,111。到目前为止，这是我的代码，但它只产生了一些解决方案：

```
static void expandPLA(char[]plaRow){
        boolean sawDontCare=false;
        for(int x = 0; x< plaRow.length; x++){
            if(plaRow[x]=='-'){
                sawDontCare=true;
                plaRow[x]='0';
                expandPLA(plaRow);
                plaRow[x]='1';
                expandPLA(plaRow);
            }
        }
        if(!sawDontCare)
            arrayList.add(plaRow);    
    } 
```

arrayList 保存输出值。任何人都看到有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:28:51.417

我为您创建了一个示例实现，它打印出您在上面指出的值列表。当然，您可以做任何您想做的事情来代替打印到控制台：

```
import java.util.*;
import java.lang.*;

class Main {

    public static void expandPLA(char[] pla) {

        // How many don't cares are we handling
        int empties = 0;
        for (int i = 0; i < pla.length; i++) {
            if (pla[i] == '-') { empties++; }
        }

        // Now we know we're counting from 0 to 2^empties in binary
        for (int j = 0; j < Math.pow(2,empties); j++) {

            // For each value of j we're going to create a new string pattern
            // and fill in each don't care with the correct digit of j
            String pattern = String.copyValueOf(pla);
            String bin = Integer.toBinaryString(j);

            // Pad bin with zeros
            int pad = empties - bin.length();
            for (int z = 0; z < pad; z++) {
                bin = "0" + bin;
            }

            // For each empty spot we're going to replace a single '-' with
            // the next most significant digit
            for (int k = 0; k < empties; k++) {
                char digit = bin.charAt(k);
                pattern = pattern.replaceFirst("-", String.valueOf(digit));
            }

            // We're just going to print this out for now, but you can do
            // whatever it is you want at this point.
            System.out.println(pattern);

        }

    }

    public static void main (String[] args) throws java.lang.Exception {
        Main.expandPLA(new char [] { '1', '-', '-', '1', '-', '1', '-', '-' });
    }

} 
```

**注意**：我上面的算法可能会收紧很多。我懒于如何用 0 填充我的二进制数，并且可能有比字符串替换更好的方法将我的数字放入无关空格。考虑这是一种概念证明，它可能会更节省内存和时间，但我认为它优于递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:37:08.910

如果你真的想要递归，这样的东西应该可以工作：

```
static final char[] digits = new char[]{'0','1'};

private void expandPLA(char[] plaRow, char[] value, int x) {
    if (x == plaRow.length) {
        arrayList.add(value);
        return;
    }
    if (plaRow[x] == '-') {
        for (char digit : digits) {
            value[x] = digit;
            expandPLA(plaRow, value, x + 1);
        }
    } else {
        value[x] = plaRow[x];
        expandPLA(plaRow, value, x + 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:45:21.287

它是递归的，但它不是 Java。

```
(define (expand-pla code)
  (define (cons-of x) (lambda (l) (cons x l)))
  (define cons-1 (cons-of #\1))
  (define cons-0 (cons-of #\0))

  (map list->string
       (let building ((codes  (string->list code)))
         (if (null? codes)
             (list '())
             (let ((rest (building (cdr codes))))
               (case (car codes)
                 ((#\0) (map cons-0 rest))
                 ((#\1) (map cons-1 rest))
                 ((#\-) (append (map cons-0 rest)
                                (map cons-1 rest))))))))) 
```

也许你会觉得它很有趣。而且，它有效：

```
> (expand-pla "1--")
("100" "101" "110" "111") 
```

这是一个尾递归版本。

```
(define (expand-pla code)
  (define (cons-of x) (lambda (l) (cons x l)))
  (define cons-1 (cons-of #\1))
  (define cons-0 (cons-of #\0))
  (define (compose f g) (lambda (x) (f (g x))))

  (let building ((codes (string->list code)) (result (list '())))
    (if (null? codes)
        (map (compose list->string reverse) result)
        (building (cdr codes)
                  (case (car codes)
                    ((#\0) (map cons-0 result))
                    ((#\1) (map cons-1 result))
                    ((#\-) (append (map cons-0 result)
                                   (map cons-1 result)))))))) 
```

# ios - 新创建的 UIViewController 在情节提要中不可用

> ID：15513185
> 
> 赞同：1
> 
> 时间：2013-03-20T00:38:27.077
> 
> 标签：ios, uiviewcontroller, uipopovercontroller, uistoryboard, xcode4.6

我的一个视图控制器遇到了问题，希望有人能帮助我：**我的故事板表现得好像视图控制器不存在**，阻止我与控制器建立连接。

我在情节提要中创建了一个自定义的自由形式视图控制器，其目的是显示在弹出框中，允许用户`UITextLabel`使用弹出框的`UITextView`.

我正在使用以下代码动态实例化弹出框的视图控制器：

```
//create a popover with a text view under a label to be edited,
// allowing the user to edit the label with the popover

                GLAppDelegate* appDelegate = (GLAppDelegate*)[[UIApplication sharedApplication] delegate];
                UIViewController *mvc = (UIViewController *)appDelegate.window.rootViewController;
                PopoverTextViewController* textViewController = [mvc.storyboard instantiateViewControllerWithIdentifier:@"popoverTextViewController"];
                textViewController.textView.text = ((OutlinedLabel*)v.attributedView).text;
                textViewController.label = (OutlinedLabel*)v.attributedView;

                [self.popover dismissPopoverAnimated:YES];
                self.popover = [[UIPopoverController alloc] initWithContentViewController:textViewController];

                [self.popover presentPopoverFromRect:v.attributedView.frame inView:v permittedArrowDirections:UIPopoverArrowDirectionUp|UIPopoverArrowDirectionDown animated:YES]; 
```

在我看来，我制作的视图控制器是一个典型的视图控制器：

![在此处输入图像描述](../Images/b38101c0a7d0cc88417246fa1fbb3132.png)

**我正在运行的问题是自动完成的行为就像我的应用程序中没有这样的视图控制器可用。**即使我在此处手动粘贴它的名称，我也无法将情节提要中的 textView 属性连接到视图控制器。

![在此处输入图像描述](../Images/65d4291b5e59a79c8fd6aa3c7ead0675.png)

当我测试代码时，它可以工作 - 可以使用弹出框编辑标签，但我无法在弹出框内设置文本，因为我无法将文本视图链接到视图控制器。

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:59:06.863

我想出了答案，它是一个复合的，三件式的东西。

1.  我对项目进行了“**清理**”，然后退出 xCode 并重新启动它——这清除了一些奇怪的错误，并且在这种情况下确实有效。我能够在情节提要中添加控制器
2.  我忘了`IBOutlet`在textview旁边：`@property(nonatomic,strong)IBOutlet UITextView* textView;`
3.  在弹出框的情况下，textView**属性为 nil，直到**在弹出框出现后调用 viewDidLoad，因此代码必须重新编写如下：

    ```
    //create a popover under the label with a text view, allowing the user to edit the label with the popover
    GLAppDelegate* appDelegate = (GLAppDelegate*)[[UIApplication sharedApplication] delegate];
    UIViewController *mvc = (UIViewController *)appDelegate.window.rootViewController;
    PopoverTextViewController* textViewController = [mvc.storyboard instantiateViewControllerWithIdentifier:@"popoverTextViewController"];

    [self.popover dismissPopoverAnimated:YES];
    self.popover = [[UIPopoverController alloc] initWithContentViewController:textViewController];

    //before this call, all views of the controller are not loaded
    [self.popover presentPopoverFromRect:v.attributedView.frame inView:v permittedArrowDirections:UIPopoverArrowDirectionUp|UIPopoverArrowDirectionDown animated:YES];

    //once popover is presented, the textView is created and is available
    textViewController.textView.text = ((OutlinedLabel*)v.attributedView).text;
    textViewController.label = (OutlinedLabel*)v.attributedView; 
    ```

我希望有人觉得这很有用。

# php - 显示在值区域中编写的 PHP 代码的 HTML

> ID：15513186
> 
> 赞同：0
> 
> 时间：2013-03-20T00:38:43.923
> 
> 标签：php, html

我有这个 HTML 代码。应该是登记表。它使用 Session 来存储信息以防万一出现问题，这样用户就不必再次重新输入信息。但不知何故，它在值部分中编写了整个 PHP 代码。是的，它的格式是 .php，我使用的是 WAMP 服务器。我也尝试使用 APPServ 但无济于事。这是代码

```
 <form action="register.php" method="post">
    <h1>Register Form</h1>
    <table>
        <tr>
            <td>Login name:</td>
            <td><input type="text" name="login_name" value="<?=(!empty($_POST['login_name'])) ? $_POST['login_name'] : ''?>" /></td>
        </tr>
        <tr>
            <td>First name:</td>
            <td><input type="text" name="first_name" value="<?=(!empty($_POST['first_name'])) ? $_POST['first_name'] : ''?>" /></td>
        </tr>
        <tr>
            <td>Last name:</td>
            <td><input type="text" name="last_name" value="<?=(!empty($_POST['last_name'])) ? $_POST['last_name'] : ''?>" /></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type="password" name="pw1" /></td>
        </tr>
        <tr>
            <td>Confirm password:</td>
            <td><input type="password" name="pw2" /></td>
        </tr>
        <tr>
            <td>Email:</td>
            <td><input type="text" name="email" value="<?=(!empty($_POST['email'])) ? $_POST['email'] : ''?>" /></td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center;"><input type="submit" name="register" value="Register!" /></td>
        </tr>
    </table>
</form> 
```

我遇到的唯一问题是我提到的：文本框显示了我在值部分中编写的 PHP 代码。其他一切工作正常。我在 Window 8 中使用 Chrome。我还应该注意，我将此代码发送给了一位朋友，它工作得很好，我们唯一的区别是他使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:31:03.433

`<?=`是 的缩写形式`<?php echo`。在 WAMP 服务器中，短标签默认是关闭的。您可以通过两种方式解决此问题：

1.  更改`<?=` 为`<?php echo`

    或者

2.  在 wamp 文件夹中找到 php.ini 文件并更改`short_open_tag = On`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:15:14.820

替换 `<?=`到`<?php`

# c# - 从数据库创建临时文件，用相关程序打开它，然后将其删除

> ID：15513188
> 
> 赞同：0
> 
> 时间：2013-03-20T00:38:54.913
> 
> 标签：c#, database, blob, filestream

我正在用 C# 编写一个 Windows 窗体应用程序，我需要在客户端 PC 上安装的相关程序中向用户打开一个文档/文件（.doc、.pdf、.xlsx、.tiff 等）。

该文件应在用户关闭显示程序后立即删除。

我尝试了几种创建和打开文件的选项，但还没有找到金蛋。

```
public static void databaseFileRead(string file_name, byte[] file)
{
    path = file_name;
    int file_size_int = file.Length;
    FileStream create = new FileStream(@path, FileMode.Create, FileAccess.ReadWrite, FileShare.Read, file_size_int, FileOptions.DeleteOnClose);
    create.Write(file, 0, file_size_int);
    FileStream open = File.Open(@path, FileMode.Open, FileAccess.ReadWrite, FileShare.Read);
} 
```

在上述方法中，我得到一个 IOException，在最后一行 ( )上显示“*进程无法访问文件 'xxx'，因为它正被另一个进程使用”。*`FileStream open = ...`

```
public static void databaseFileRead(string file_name, byte[] file)
{
    path = file_name;
    int file_size_int = file.Length;
    FileStream create = File.OpenWrite(@path);
    var attributes = File.GetAttributes(@path);
    File.SetAttributes(@path, attributes | FileAttributes.ReadOnly|FileAttributes.Temporary);
    create.Close();
    Process p = Process.Start(@path);
    p.WaitForExit();
    File.Delete(@path);
} 
```

在这种方法中，我还收到一个 IOException 说明“*该进程无法访问文件'xxx'，因为它正在被另一个进程使用*”在最后一行（`File.Delete(@path);`）意味着该文件仍在使用中，这是正确的。似乎`p.WaitForExit();`不是在等待所有程序，例如 OpenOffice ......

是否可以打开/显示`FileOptions.DeleteOnClose`在外部程序中创建的文件？如果是这样，怎么做？

我确实喜欢这个想法，Windows 会在文件不再使用时立即删除该文件。

重要的是文件会自动从用户硬盘中消失，最好的选择是从流或同等文件中读取和打开文件。但据我所知，这是不可能的......

**解决了：**

但是我不确定这是否是一种捕捉异常并`closeIfReady`再次调用该方法直到文件被释放的探测方法......

```
 public static void databaseFileRead(string file_name, byte[] file)
    {
        var path = file_name;
        int file_size_int = file.Length;
        if (File.Exists(path))
        {
            File.Delete(path);
        }
        FileStream create = File.OpenWrite(path);
        create.Write(file, 0, file_size_int);
        var attributes = File.GetAttributes(path);
        File.SetAttributes(path, attributes | FileAttributes.Temporary);
        create.Close();
        Process p = Process.Start(path);

        while (!p.HasExited)
        {
            Thread.Sleep(500);
        }
        closeIfReady(path);
    }

    static void closeIfReady(string path)
    {
        try
        { File.Delete(@path); }
        catch
        {
            Thread.Sleep(1000);
            closeIfReady(path);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:45:27.140

好的，在评论之后，这是一个有效的第二种方法：

```
void Method2(string file_name, byte[] file)
{
    var path = file_name;
    int file_size_int = file.Length;
    if (File.Exists(path))
    {
        File.Delete(path);
    }
    FileStream create = File.OpenWrite(path);
    var attributes = File.GetAttributes(path);
    File.SetAttributes(path, attributes | FileAttributes.Temporary);
    create.Close();
    Process p = Process.Start(path);

    while (!p.HasExited)  
    {
        Thread.Sleep(100);  
    }

    File.Delete(path);
} 
```

您一开始并不严格需要 if File.Exists/File.Delete，我只需要它来调试我的 - 但是将其保留在那里可能是个好主意，因为如果有人在文件被删除之前退出应用程序它将尝试再次创建它。

然而，这种方法的问题是： `File.SetAttributes(@path, attributes | FileAttributes.ReadOnly|FileAttributes.Temporary);`因为文件是作为只读文件创建的，所以不能使用 File.Delete 删除它。在 Windows 资源管理器中，如果您有管理员，它不关心这一点，这就是为什么您可以从那里删除它，但 C# 确实关心文件属性。我将该行更改为`File.SetAttributes(@path, attributes | FileAttributes.Temporary);`，现在可以使用。

[这个问题](https://stackoverflow.com/questions/9213569/waitforexit-doesnt-work-correctly)是我用于您的 p.WaitForExit 问题的参考。我建议在您的应用程序中的不同线程上启动它，否则您的应用程序将在检查线程退出时挂起（在 Windows 中变为白色/灰色并告诉您它没有响应）。如果您正在使用 wpf，您可以做一些事情，例如使视觉效果无效，或者重新绘制您的 GUI，以便您仍然可以使用它，但这些都是 hacky 并且会消耗大量 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:36:48.897

有几件事。

首先，如果这是在 winforms 应用程序的主 UI 线程中运行的，那么使用任一解决方案，您的应用程序都将变得无响应。

其次，这两种解决方案都依赖于从几个不同的应用程序中优雅地退出。这是有风险的。

如果外部进程未能正确清理文件句柄，您的解决方案将导致无限递归。取决于 Process.HasExited，我也会感到不舒服，因为我已经看到许多关于此属性可靠性的线程。

我建议使用相对于您的应用程序的临时目录，并在应用程序退出和启动时清理该目录（以防您自己的应用程序无法正常退出）。

# java - 阅读网站来源：�字符

> ID：15513189
> 
> 赞同：0
> 
> 时间：2013-03-20T00:38:54.933
> 
> 标签：java, string, url, inputstream, bufferedreader

我正在尝试从浏览器中读取源代码，但是当代码中包含 ã、á、à、õ 等字符时，我会得到�。

我试图`java.nio.Charset.encode`在读取行上应用，但没有结果：同样的事情发生了。

我的代码是：

```
URLConnection connection = ...;
BufferedReader reader = new BufferedReader(connection.getInputStream());
String s = null;

while ((s = reader.readLine()) != null) {
  // got new source line...
} 
```

我要阅读的网站是[这个](http://baixaki.com.br/busca/?q=counter-strike&go=)（PT-BR）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:44:11.557

根据元标记，该页面上的字符集是 ISO-8859-1。尝试使用：

```
Scanner scanner = new Scanner(connection.getInputStream(), "ISO-8859-1"); 
```

# java - 字符替换方法

> ID：15513192
> 
> 赞同：0
> 
> 时间：2013-03-20T00:39:07.407
> 
> 标签：java

请问java中replace()方法的替代函数是什么？因为替换方法会将旧字符替换为新字符，但我的代码就像刽子手，最初你有 _ _ _ _ _ 当我使用 replace() 而不是替换特定的 charAt() 时，比如 charAt(2) = ' A'，它将用 A 替换所有 _。关于替换特定字符的替代方法有什么建议吗？谢谢你

这是我的代码片段。

```
 guessLetter = txtguesswordS.getText().toString();

    char letter = guessLetter.charAt(0);

  int indx = word.indexOf(letter);

  public void convertUnderscore(String word){
        for(int x = 0;x<word.length();x++){
             Uscore += "-";
         }

 public void replaceLetter(char letter, int indx){
         char oldLetter;
         oldLetter = Uscore.charAt(indx);
         update = Uscore.replace(oldLetter, letter);
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:40:38.680

如果你使用`StringBuilder`，当你想要“可修改`String`”时通常应该使用它，那么你可以使用[`StringBuilder.setCharAt(int, char)`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#setCharAt%28int,%20char%29). 您可以使用其方法将 a 转换`StringBuilder`为 a 。`String``toString()`

# java - 多个 JSlider - 识别更改

> ID：15513195
> 
> 赞同：0
> 
> 时间：2013-03-20T00:39:38.983
> 
> 标签：java, swing, events, jslider, changelistener

我可以添加一个更改侦听器并在创建新的 JSlider 时定义它吗？

我需要创建和添加 JSlider 的顺序意味着我无法预先定义它们，所以我真的没有办法预先存储它们。

本质上：我没有命名 JSlider，但需要一种方法来确定哪个已被更改。

如果不太清楚我在问什么，稍后将添加一些示例代码

编辑：

具体来说，假设我有一个 JSlider 代表最小值，一个 JSlider 代表最大值。我需要用它来表示一系列数字，比如说客户 ID，稍后将显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:31:38.693

如果您的滑块定义超出范围（即事件侦听器无法引用变量），那么您可以为滑块提供一个“名称”，您可以查找和比较

```
JSlider slider = new JSlider();
slider.setName("funky");

//...//

public void stateChanged(ChangeEvent e) {
    Object source = e.getSource();
    if (source instanceof JSlider) {
        JSlider slider = (JSlider)source;
        String name = slider.getName();
        if ("funky".equals(name)) {
            // Do funky stuff
        }
    }
} 
```

但是，如果您将您定义`JSlider`为类级别字段，则可以将事件源的引用与定义的滑块进行比较...

```
private JSlider slider;

//...//

slider = new JSlider();
slider.setName("funky");

//...//

public void stateChanged(ChangeEvent e) {
    if (slider == e.getSource()) {
        // Do funky stuff
    }
} 
```

实际上，如果可以的话，您应该为每个滑块提供它自己的侦听器并直接从源头处理它...

```
JSlider slider = new JSlider();
slider.addChangeListener(new ChangeListener() {
    public void stateChanged(ChangeEvent e) {
        JSlider slider= (Slider)e.getSource();
        // Do funky stuff
    }
}); 
```

# vmware - 将 RubyMine 5 与虚拟机一起使用

> ID：15513199
> 
> 赞同：1
> 
> 时间：2013-03-20T00:39:56.087
> 
> 标签：vmware, virtual-machine, rubymine

刚拿到`RubyMine 5.0.2`，应该`Virtual Machines`支持 我已经`VMware Player`安装`CentOS`并`RubyMine 5.0.2`安装在`Windows 8`.

当我使用该路径创建一个新项目时`\\\192.168.118.165\MyProjectRoot`，我会收到一条`"The directory \\\192.168.118.165\MyProjectRoot is not empty. Would you like to create a project from existing sources instead?"`我回答的消息`yes`。

然后在项目选项卡中，我可以看到`root`诸如`"Readme", "Gemfile", "config.ru"`...之类的文件，但我看不到任何文件夹。结构选项卡也是空的。如果我去`files`>open directory ，选择`\\192.168.118.165\MyProjectRoot`，什么都不会导入。

谢谢你的帮助

# php - CodeIgniter 渲染源代码

> ID：15513200
> 
> 赞同：1
> 
> 时间：2013-03-20T00:39:59.593
> 
> 标签：php, codeigniter, templates

出于某种原因，当我调用`$this->load->model('whatever')`我的控制器时，页面会呈现该模型的源代码。这是我的控制器：

```
<?php
class Testing extends CI_Controller {

    function index()
    {
        $this->load->model('Testing');
        $this->load->view('testing/view');
    }

}
?> 
```

如果我忽略模型加载并正常加载视图，它可以正常工作，但是当我加载模型时，视图不会被渲染并且模型源是。

另外，我尝试通过添加一个钩子

```
$hook['pre_controller'] = array(
'class'    => 'Loader',
'function' => 'template',
'filename' => 'ViewTemplate.php',
'filepath' => 'hooks'
); 
```

在我的 hooks.php 然后

```
Class Loader{

    function template($viewName, $data) {
        $this->view('header');
        $this->view($viewName, $data);
        $this->view('footer');
    }

} 
```

在“钩子/ViewTemplate.php”文件中。目标是在控制器中使用模板函数而不是视图，它会自动插入页眉和页脚。钩子在 config.php 中启用。每当我将该部分添加到 hooks.php 时，我在加载视图时得到的唯一输出就是钩子源。

我是否尝试执行此错误？我可以搞砸一些 CI 设置吗？它可能与apache或php有关吗？

我并不担心我的钩子是否有效，而是为什么我不断获取在我的页面上呈现的文件的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:36:43.220

确保`<?php`文件顶部有一个开始标签。这是 CodeIgniter 文件的常见疏忽。

# javascript - 一个变量应该在“if”或“else”中通常被评估为真吗？

> ID：15513201
> 
> 赞同：0
> 
> 时间：2013-03-20T00:40:01.847
> 
> 标签：javascript

如果我有一个数据集中的变量在大多数情况下评估为真，我应该将它放在“if”子句或“else”子句中。一个比另一个快吗？我确信这取决于 JavaScript 引擎和/或操作系统之类的东西，因为它被转换为机器语言。

像这样：

```
var usualyTrue;
// some more code here...
if(usualTrue)
    //do something
else
    //do something else 
```

或像这样：

```
var usualyTrue;
// some more code here...
if(!usualTrue)
    //do something
else
    //do something else 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:45:47.433

它通常没关系，所以你应该做任何使它最易读的事情。

三个原因。

1.  编译器足够聪明，在大多数情况下，它不会太在意这些条件中的哪一个（除非您进行数百万/数十亿次比较，布尔值是最便宜的评估）
2.  分支（在 ISA 级别）确实意味着这无关紧要。像这样的简单比较基本上是通过[流水线](http://en.wikipedia.org/wiki/Pipeline_%28computing%29)同时评估的。
3.  您花在优化这样的事情上的时间会更好地花在思考“如何减少我进行的 AJAX 调用的数量？”上。或“我是否在某些时候不必要地循环遍历 DOM？”

如果您只是对生成的内容感到好奇，您可以使用[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)之类的工具自己编译 JS 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:44:39.170

你不应该担心哪个更快，因为如果有任何差异，它会*稍微*快一点，你只是掉进了过早优化的陷阱。

当前的浏览器（以及除 JavaScript 之外的其他语言的编译器/解释器）对布尔逻辑进行了各种优化，因此您不必担心这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:42:47.913

确实没有严重的性能差异，但检查 if(usualTrue) 似乎更有意义。如果您知道什么通常为真，则可以避免不必要地评估经常为假的表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T00:51:04.420

## 为可读性而写

无论哪种方式都没有性能差异，对您来说重要的是编写可读性，即使用有意义的变量名和适当的逻辑。

例如

```
var errorFound;
// some more code here...
if(errorFound) {
    //do something
} else {
    //do something else
} 
```

避免双重否定：

```
var noErrorFound;
// some more code here...
if(!noErrorFound) {
    //do something
} else {
    //do something else
} 
```

因为这使得它难以阅读 - 输入你正在寻找的 else `!!noErrorFound`- 这只会让调试变得更加困难:)。

# jquery - “ajax”模式下的有效性 jQuery 插件在多次调用时无法正确验证

> ID：15513203
> 
> 赞同：1
> 
> 时间：2013-03-20T00:40:22.933
> 
> 标签：jquery, validation, validity.js

我在我的 Ajax 应用程序中使用 Validity 插件 ( [http://validity.thatscaptaintoyou.com/ )。](http://validity.thatscaptaintoyou.com/)根据文档，由于我没有使用表单，因此我将其称为如下：

```
// This is the validation function:
function validateForm() {

    // Start validation:
    $.validity.start();

    // Validator methods go here:

    for(key in fields) {
        var nextField = fields[key];
        console.log("validating: " + nextField.name);
        nextField.validateField();
    }

    // All of the validator methods have been called:
    // End the validation session:
    var result = $.validity.end();

    console.log("validity result: ");
    console.log(result);
    // Return whether it's okay to proceed with the Ajax:
    return result.valid;
} 
```

我的字段对象中的 validateField() 函数在我的输入（如 require()、assert()、match() 等）上调用 Validity 函数......这在第一次调用时工作正常 - 无效输入被正确标记。但是，当它随后被调用时，无论如何，所有的验证测试都会通过。结果对象为：Object {errors: 0, valid: true}。

在对validity.start()的调用之间我需要调用一些有效性函数吗？（除了调用validity.end()）

# windows-runtime - 带填充裁剪

> ID：15513204
> 
> 赞同：0
> 
> 时间：2013-03-20T00:40:23.600
> 
> 标签：windows-runtime, writeablebitmap, writeablebitmapex

我需要裁剪图像，指定可能超出图像边界的坐标。如果坐标关闭，则应用适当的填充。

一般：

```
+===============+
| Source Bitmap |
|   +-------+   |
|   + Crop  +   |
|   +-------+   |
|               |
+===============+ 
```

`Crop()`...与 WriteableBitmapEx 的扩展配合得很好。但就我而言：

```
+-----------+
+ Crop      +
+           +
+ +===============+
+ | Source Bitmap |
+ |               |
+ +===============+
+           +
+-----------+ 
```

在这种情况下，边界超出了顶部、左侧和底部。生成的位图需要是：

```
+-----------+
+           +
+           +
+ +=========+
+ |         + 
+ |         +
+ +=========+
+           +
+-----------+ 
```

完成此任务的最佳（和最快）方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:12:16.863

最简单的方法是使用最终结果的尺寸创建一个新的 WB，然后使用 Blit() 方法将源区域复制到新目标位图的区域。

顺便说一句，漂亮的 ASCII 艺术工作。:)

# java - 如何将图像用于 JPanel 网格？

> ID：15513206
> 
> 赞同：1
> 
> 时间：2013-03-20T00:40:29.387
> 
> 标签：java, swing, user-interface, jpanel

我正在尝试创建一个由用于棋盘游戏的预制图像组成的 8x8 网格，但是我在加载图像时遇到了困难。

```
 Dimension Size = new Dimension(400, 400);

    layeredPane = new JLayeredPane();
    layeredPane.setPreferredSize(Size);
    getContentPane().add(layeredPane);

    board.setLayout(new GridLayout(8,8));
    board.setPreferredSize(Size);
    board.setBounds(0, 0, Size.width, Size.height);
    layeredPane.add(board, JLayeredPane.DEFAULT_LAYER);

    //  Load squares to board

    for (int i = 0; i < 8; i++)
    {
        for (int j = 0; j < 8; j++)
        {
            JPanel square = new JPanel( new BorderLayout() );
            square. // Load .jpg here?????
            board.add( square );
        }
    } 
```

我知道的唯一方法是 ImageIcon，但这似乎不起作用......所以我被卡住了。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:48:28.513

ImageIcon 应该可以正常工作。有关更多信息和示例，请参阅有关[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)的 Swing 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:48:28.563

[试试这个改编自java2s.com](http://www.java2s.com/Code/Java/Swing-JFC/Panelwithbackgroundimage.htm)的代码片段：

```
class ImagePanel extends JPanel {
private Image img;

public ImagePanel(URL imgURL) {
    this(new ImageIcon(imgURL).getImage());
}

public ImagePanel(Image img) {
    this.img = img;
    Dimension size = new Dimension(img.getWidth(this), img.getHeight(this));
    setPreferredSize(size);
    setMinimumSize(size);
    setMaximumSize(size);
    setSize(size);
    setLayout(null);
}

@Override
public void paintComponent(Graphics g) {
    super.paint(g);
    g.drawImage(img, 0, 0, this);
}
} 
```

您可以在 JPanel 中添加这些 ImagePanel

# drupal - 总是在drupal中显示子菜单

> ID：15513211
> 
> 赞同：0
> 
> 时间：2013-03-20T00:40:49.083
> 
> 标签：drupal, drupal-navigation

是否可以添加插件或代码块以始终显示子菜单？

![在此处输入图像描述](../Images/2b4f7c9e5662b56310bd3330f1118294.png)

我唯一能看到带有红色边框的子菜单是当我单击菜单项“SHOP”时，我希望带有红色边框的子菜单始终在任何页面上可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:16:18.303

您可以通过编辑 page.tpl.php 并打印 $secondary_links 在主题层执行此操作。

您可能也更喜欢使用菜单块模块，它有一些非常方便的配置选项：[http ://drupal.org/project/menu_block](http://drupal.org/project/menu_block)

# java - 我应该如何刷新我的 AutoCompleteTextView 组件？

> ID：15513213
> 
> 赞同：0
> 
> 时间：2013-03-20T00:40:54.307
> 
> 标签：java, android, android-holo-everywhere

我正在使用这段代码：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                Cidade cidade = (Cidade) arg0.getSelectedItem();
                List<Bairro> bairros = RachandoTaxiController.getInstancia().getBairros(cidade);
                myAutoComplete = (AutoCompleteTextView) getView().findViewById(R.id.completeOrigem);
                myAutoComplete.addTextChangedListener(textWatcher);
                myAutoComplete.setAdapter(new ArrayAdapter<Bairro>(getActivity(), android.R.layout.simple_dropdown_item_1line, bairros));

            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

我有一个 Spinner，当我选择一个项目时，我应该根据用户对 Spinner 的选择设置我的 AutoCompleteTextView（来自 holoeverywhere）。如果我静态地这样做，它会起作用。我的自动完成文本视图按预期回答。但是当我将它放入 onItemSelected 时，我的 autocompletetextview 仍然像 edittext.... 没有任何反应... 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:18:56.087

我认为你应该把

```
myAutoCompl = (AutoCompleteTextView) getView().findViewById(R.id.completeOrigem);
myAutoComplete.addTextChangedListener(textWatcher); 
```

这些行在**OnItemClickListener**之外。每当您单击项目时，都会返回来自 findViewById() 的 View 的新实例。TextChangedListener 也一样。因此，尝试将行放在外面可能最好的选择是**onCreate()**方法，它应该可以工作。

# c# - IValidatableObject 中的 Validate 方法在所有情况下都不会返回 ValidationResult

> ID：15513216
> 
> 赞同：0
> 
> 时间：2013-03-20T00:41:05.113
> 
> 标签：c#, asp.net-mvc-3

我一直在使用 Validate 方法进行一些我必须做的条件验证，今天当我这样做时，我开始考虑我的 validate 方法。签名是

```
IEnumerable<ValidationResult> Validate(ValidationContext validationContext); 
```

但是当我实现它时，它不会在所有条件下返回一个可枚举的验证结果。

现在我可能在这里遗漏了一些明显的东西，但通常编译器会抱怨所有代码路径都不返回值，但它从来没有对 Validate 方法这样做。

示例实现

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
    if (IsPremiumCandidateSignup && SelectedProductId < 1)
    {
        yield return
            new ValidationResult("Please choose a membership option", 
                                  new List<string> { "SelectedProductId" });
    }
} 
```

所以在这种情况下，它只会在满足 if 条件时返回。因此，如果有人可以向我解释这一点或指出一些我可以阅读更多相关信息的资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:36:00.250

如果满足以下条件，它将返回一些东西：

```
if(IsPremiumCandidateSignup && SelectedProductId < 1) 
```

因此，如果它不是高级注册并且没有选择任何产品，它将不会返回任何东西。

# jboss - Jboss从文件加载系统属性

> ID：15513223
> 
> 赞同：0
> 
> 时间：2013-03-20T00:41:32.777
> 
> 标签：jboss

我可以让 jboss 从文件中加载系统属性而不为它编写任何**显式代码**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:40:03.083

是的你可以。
在 7.x 之前的 JbossAS 版本中有[PropertiesService](https://community.jboss.org/wiki/PropertiesService)。使用起来非常简单。我将它与 JBoss 5.1.0.GA 一起使用，它就像一个魅力。
不幸的是，JBossAS 7.x 中没有 PropertiesService mbean，但是[官方管理指南](https://docs.jboss.org/author/display/AS71/Admin+Guide#AdminGuide-SystemProperties)中描述了其他方法。

[这](https://community.jboss.org/message/750350#750350)是另一个解决方案。帖子作者声称可以在启动服务器实例时在命令行中列出您的属性文件：

```
./standalone.sh --properties=1.properties --properties=2.properties 
```

并且它们的内容应该添加到系统属性中。

# c - 重新分配字符串数组

> ID：15513226
> 
> 赞同：2
> 
> 时间：2013-03-20T00:42:18.933
> 
> 标签：c, arrays, realloc

目前，我对重新分配数组字符串有些困惑。如果我有这个：

```
char** str = (char**)malloc(100*sizeof(char*));
str[0] = (char*)malloc(sizeof(char)*7); //allocate a space for string size 7
//some other code that make the array full 
```

我的问题是，如果我想重新分配`str[0]`到 size `8`，我是否需要重新分配两者`str`，`str[0]`就像这样：

```
str = (char**)realloc(str,sizeof(char*)*101);
str[0] = (char*)realloc(str[0],sizeof(char)*8); 
```

它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:43:54.910

不，您不需要重新分配字符串数组来延长索引零处的字符串。所有你需要的是

```
str[0] = (char*)realloc(str[0],sizeof(char)*8); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T00:44:01.737

`realloc`当您想要添加字符串（更改字符串的*数量*）时，您是主数组。`realloc`当您想更改该*字符串的长度*时，您是一个单独的字符串。

因此，仅`realloc` `str[0]`当您想更改字符串的缓冲区大小时。

# java - Gradle - Eclipse 部署的父项目战争中缺少子项目 jar

> ID：15513228
> 
> 赞同：2
> 
> 时间：2013-03-20T00:42:40.397
> 
> 标签：java, eclipse, gradle, eclipse-wtp

我有一个这样的多个项目：

```
root
  --core
  --web 
```

当我在 Eclipse 中包含这些项目时，war 项目在类路径中没有核心 jar，因此我无法在服务器中部署我的 war。

如果我将生成的战争从 web/build/libs 部署到我的 tomcat 服务器，一切正常。

但是，如果我从 Eclipse 部署，我会从核心项目中得到类未找到错误。

来自网络的 build.gradle：

```
apply plugin: 'eclipse-wtp'
apply plugin: 'war'

dependencies {
    compile project(':core')
    //runtime project(':core')
    providedCompile 'javax.servlet:servlet-api:2.5'
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:07:59.840

我有同样的问题。解决方案是包括

```
apply plugin: 'eclipse-wtp' 
```

不仅在网络中，而且在每个子项目中。

# php - 教义中的部分合并？

> ID：15513234
> 
> 赞同：2
> 
> 时间：2013-03-20T00:43:32.220
> 
> 标签：php, orm, doctrine-orm

在我正在开发的系统中，我通过 AJAX 将整个表单发送到系统逻辑。该表单允许我更新与单个类相关的一堆数据，但是，我不需要更新类的所有属性，只需更新其中的一部分。一切正常，直到我必须保留数据。当我执行以下操作时：

```
$entityManager->merge($entity); 
```

我收到一条错误消息，指出数据库中不允许使用 NULL 字段，这显然意味着当我执行此类操作时，整个类都会更新其所有字段。这是因为系统仅使用传入数据将从表单发送的数据映射到对象。

所以，我的问题是：我怎样才能只更新传入的数据而不更新其他数据，使用与前面所述类似的语法而不构建`UPDATE`查询？事先谢谢你。

# json - 如何逃避车把中的哈希符号？

> ID：15513241
> 
> 赞同：0
> 
> 时间：2013-03-20T00:43:46.677
> 
> 标签：json, handlebars.js

我正在使用无法更改的外部 API，其中包括返回图像列表，如下所示：

```
"image": [
    {"#text": "http://userserve-ak.last.fm/serve/34/24816431.jpg", "size": "small"},
    {"#text": "http://userserve-ak.last.fm/serve/64/24816431.jpg", "size": "medium"},
    {"#text": "http://userserve-ak.last.fm/serve/126/24816431.jpg", "size": "large"},
    {"#text": "http://userserve-ak.last.fm/serve/252/24816431.jpg", "size": "extralarge"},
    {"#text": "http://userserve-ak.last.fm/serve/_/24816431/Art+Brut+street.jpg", "size": "mega"}
], 
```

但是，当尝试通过 {{image.2.#text}} 使用车把中的其中一个图像时，由于井号符号，它会抛出一个不稳定的图像。

任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:13:47.493

Handlebars 故意简单，因此模板中没有太多功能。但是，仅仅因为某些外部 API 让您感到丑陋并不意味着您必须按原样使用它。在任何东西进入模板之前，我会对 JavaScript 中的数据进行一些了解，就像这样简单：

```
for(var i = 0; i < image.length; ++i) {
    image[i].text = image[i]['#text'];
    delete image[i]['#text'];
} 
```

会让您的模板谈论`{{image.2.text}}`，您的问题就会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T01:42:17.320

我在使用 Backbone 和 Hanledbars 的 Last.fm API 时遇到了同样的问题，这让它在模板中工作：

```
<img src="{{ image.[1].[#text] }}" alt="{{ realname }}" /> 
```

# batch-file - 使用批处理从“manage-bde -get”获取 ID

> ID：15513248
> 
> 赞同：0
> 
> 时间：2013-03-20T00:44:02.833
> 
> 标签：batch-file

我正在尝试使用批处理文件自动将特定密钥发送到 AD。不幸的是，我无法使用任何其他语言。我正在使用以下结果：

```
manage-bde -protectors c: -get 
```

并在下一个代码中使用数字密码 ID：

```
manage-bde -protectors -adbackup c: -id {numerical password ID} 
```

这是我到目前为止所拥有的（只是试图获得正确的密钥）：

```
@echo off  
manage-bde -protectors c: -get  
echo+  
echo+  
echo+
for /f "tokens=1,*" %%a in (' "manage-bde -protectors c: -get" ^| findstr ID') do set npi=%%b
echo+
echo+
echo My Numerical Password ID:
echo %npi%
echo+
pause 
```

我得到的是：

> BitLocker 驱动器加密：配置工具版本 6.1.7601
> 版权所有 (C) Microsoft Corporation。版权所有。
> 
> C卷：[]
> 所有密钥保护
> 
> 数字密码：
> ID：{DEDAF9BC-C42A-45A4-BB5D-609ED1898923}--我想要这个--
> 密码：
> 648712-106084-513103-486041-654894-310619-687401-654068
> 
> TPM :
> ID: {DEDAF9BC-C42A-45A4-BB5D-609ED1898923}
> 
> 我的数字密码 ID:
> {DEDAF9BC-C42A-45A4-BB5D-609ED1898923}
> 
> 按任意键继续。. .

我认为它只会抓住它到达的第一个“ID”，但它一直指向 TPM 下的第二个。

知道我做错了什么吗？

谢谢您的帮助，

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:52:57.797

```
...
echo+
(set npi=)
for /f "tokens=1,*" %%a in (
' "manage-bde -protectors c: -get" ^| findstr ID'
) do IF NOT DEFINED npi set npi=%%b
... 
```

如果 npi 具有现有值，则额外的 SET 强制 npi 为 UNSET。为语句加上括号可确保 npi 未设置为行上的任何尾随空格。

FOR /F 处理每一行输入，因此`npi`首先设置为第一个值，然后设置为第二个值。添加`IF NOT DEFINED`确保 SET 如果`npi`是 er，尚未定义则发生，因此它保留遇到的 FIRST 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:54:08.867

`if not defined`在你的`set`. 正如您在上面的脚本一样，`set`因为有两行匹配，所以被调用了两次`findstr "ID"`。你最终得到第二个，因为这是最后一个被解析的。 `if not defined`捕获第一个，然后忽略其他。

`token=1,*`顺便说一句，当您想要的只是第二个令牌时，没有理由捕获。

```
@echo off  
manage-bde -protectors c: -get  
echo+  
echo+  
echo+
set npi=
for /f "tokens=2" %%a in ('manage-bde -protectors c: -get ^| findstr "ID:"') do if not defined npi set "npi=%%a"
echo+
echo+
echo My Numerical Password ID:
echo %npi%
echo+
pause 
```

想在戴牙套的时候脱掉牙套吗？用以下内容替换该`for`行。

```
for /f "tokens=2 delims={}" %%a in ('manage-bde -protectors c: -get ^| findstr "ID:"') do if not defined npi set "npi=%%a" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T19:23:58.290

我知道这是一个老话题，但我昨天发现了它，它对我很有帮助。我只是想补充一下 rojo 的答案。

在 Windows 10 - 1809 中工作时，我发现返回的 ID 顺序可能因机器而异。如果您想要一个只提取恢复密钥并将其发送到 AD 的脚本，您可以将 -type（或 -t）RecoveryPassword 添加到您的 manage-bde 命令。

rojo 的更新代码如下所示：

```
@echo off    
manage-bde -protectors c: -get -t RecoveryPassword
echo+  
echo+  
echo+
set npi=
for /f "tokens=2" %%a in ('manage-bde -protectors c: -get -t RecoveryPassword ^| findstr "ID:"') do set "npi=%%a"
echo+
echo+
echo My Numerical Password ID:
echo %npi%
echo+

manage-bde -protectors -adbackup c: -ID %npi%
pause 
```

# php - 将日期插入mysql

> ID：15513258
> 
> 赞同：-2
> 
> 时间：2013-03-20T00:45:40.843
> 
> 标签：php, mysql

我的一个表单上有一个文本框，用户以 dd/mm/yy 的形式输入日期，但是当我尝试将其插入数据库中的一个表时，它输入为 0000-00-00。我怎样才能解决这个问题？我希望它在我的数据库 dd/mm/yy 上以这种格式显示

这是我的以下插入，其中 $start 是数据变量

```
 $query = "INSERT INTO paycheck (payCheckId,jobId,payRate,jobLocation,hoursWorked,startPeriod,empId)
  VALUES('','$job_id','$pay_rate','$job_location','$hours','$start','$userId')";
  $result = mysqli_query($db, $query); //we make the query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:52:20.550

您可以选择 MySQL 来执行此操作，也可以让 PHP 为您执行此操作。

对于 MySQL 相关的解决方案，请检查[STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)函数，对于 PHP，函数[date()](http://php.net/manual/en/function.date.php)可以。

中的用法`STR_TO_DATE()`是：

```
STR_TO_DATE( '$startPeriod', '%d/%m/%Y' ) 
```

因此，查询将是：

```
INSERT INTO paycheck (payCheckId, jobId, payRate, 
    jobLocation, hoursWorked, startPeriod, empId)
VALUES( '', '$job_id', '$pay_rate',
    '$job_location', '$hours', 
    STR_TO_DATE( '$startPeriod', '%d/%m/%Y' ), '$userId') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:54:12.577

您需要重新格式化您的日期，以便 MySQL 可以读取它。数据库保存的格式是`yyyy-mm-dd`. 如果您想以原始格式显示日期，只需使用如下`date()`函数：`$date = date("d/m/y", strtotime($dateFromDB));`

这可能是一种冗长的方法，并且有更好的方法，但是，您可以创建自己的函数来重新格式化它：

```
function reformatDate($incorrectFormat) {

  list($d, $m, $y) = explode("/", $input);
  $todaysYearBeginning = substr(0, 2, date("Y", time()));

  if(strlen($d == 1) {
    $d = "0" . $d;
  }
  if(strlen($m == 1) {
    $m = "0" . $m;
  }
  if(strlen($y == 1) {
    $y = "0" . $y;
  }

  return $todaysYearBeginning . $y . "-" . $m . "-" . $d;

}

echo reformatDate("dd/mm/yy"); 
```

继 Dream Eater 的回答之后，您可以像这样使用[DateTime::CreateFromFormat ：](http://php.net/manual/en/datetime.createfromformat.php)

```
$oldDate = DateTime::createFromFormat('d/m/y', $dateFromDB);
$newDate = $oldDate->format('Y-m-d'); 
```

# javascript - 获取 TypeError：无法调用未定义的 getNumber 方法

> ID：15513259
> 
> 赞同：0
> 
> 时间：2013-03-20T00:45:46.950
> 
> 标签：javascript, undefined, typeerror

我正在开发一个简单的二十一点程序。我对 javascript 完全陌生，在调试我的程序时遇到了麻烦。我不断收到 TypeError: cannot call getNumber method of undefined ..... 而且我完全迷路了。我正在尝试获取为每张卡存储的数值，但似乎这就是我在类`printHand()`内的方法中发生的错误`Hand`。当打印出两张或多张牌的手牌时，我会遍历手牌中的每张牌，并调用每手牌的数组在`cards[i].getNumber()`哪里。`cards[]`我没有正确引用卡片 [] 吗？我仔细检查以确保我的方法和变量设置为公共，但我仍然无法弄清楚为什么`getNumber()`在未定义的对象上被调用。我引用这个对象的方式有问题吗？

这是我的代码：

```
 // Card Constructor
function Card (suit, number){
var the_suit = suit;
var the_number = number;

this.getNumber = function(){
    return the_number;
};
this.getSuit = function(){
    return the_suit;    
};
this.getValue = function (){
    // face cards
    if(the_number > 10){
        return 10;

    // aces
    } else if (the_number < 2){
        return 11;

    // other cards
    } else {
        return the_number;
    }   
};
}

function deal (){
// get card suit
var rand1 = Math.floor(Math.random ( ) * 4 + 1);
// get car number
var rand2 = Math.floor(Math.random ( ) * 13 + 1);

var newCard = new Card(rand1, rand2);
}

function Hand (){
// create two cards for initial hand
var card1 = deal();
var card2 = deal();
// store cards in array
var cards = [card1,card2];

// getter
this.getHand = function (){
    return cards;
};

// get the score
this.score = function(){
    var length = cards.length;
    var score = 0;
    var numAces = 0;

    for(i = 0; i < length; i++){
    if (cards[i].getValue() === 11 ){
    numAces++;
    }   
        score += cards[i].getValue();   
    }
    while(score > 21 && numAces !== 0){
        sum -= 10;
        numAces--;
    }
};
this.printHand = function(){
    var length = cards.length;

    for(i=0; i< length; i++){
    var string = string + cards[i].getNumber() + " of suit " + cards[i].getSuit() + ", ";
    }
    return string;
};

this.hitMe = function(){
    var newCard = deal();
    cards.push(newCard);

}
}

function playAsDealer(){
var newHand = new Hand();
while(newHand.score < 17){
    newHand.hitMe();
}
return newHand;
}

function playAsUser(){
var newHand = new Hand();
var choice = confirm("Current hand: "+ newHand.printHand() + ": Hold (Ok) or Stand(Cancel)");
while(choice){
    newHand.hitMe();
    choice = confirm("Current hand: "+ newHand.printHand() + ": Hold (Ok) or Stand(Cancel)");

}
}

function declareWinner(user, dealer){

//user wins case
if (user.score > dealer.score){
console.log("You are the Champion!");
}

// tie game
else if(user.score===dealer.score){
    console.log("Tied!");
}

else{
    console.log("Loser!!");
}

}

function playGame (){
var user = playAsUser();
var dealer = playAsDealer();
console.log("User's Hand: " + user.printHand());
console.log("Dealer's Hand: " + dealer.printHand());
declareWinner();
}

playGame(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:03:23.157

您不会在函数“deal”中返回卡片对象：应该是：

```
function deal (){
   // get card suit
 var rand1 = Math.floor(Math.random ( ) * 4 + 1);
        // get car number
 var rand2 = Math.floor(Math.random ( ) * 13 + 1);

 var newCard = new Card(rand1, rand2);

 return newCard;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:05:51.603

有一些问题，但要让你开始：

我得到的错误是“TypeError：cards[i] is undefined”。既然你这样调用你的 deal() 函数：

```
var card1 = deal(); 
```

您需要在交易功能中退回卡，因此请更改

```
var newCard = new Card(rand1, rand2); 
```

到

```
return new Card(rand1, rand2); 
```

您还需要在打印手牌时将 :cards[i].getNumber() 转换为字符串

# c# - 尝试为 WebDriver 启动 InternetExplorerDriver，得到 InvalidOperandException

> ID：15513261
> 
> 赞同：1
> 
> 时间：2013-03-20T00:45:54.220
> 
> 标签：c#, internet-explorer-9, webdriver

我已经成功地将 WebDriver 与 firefox 浏览器一起使用，但这是我第一次尝试使用 Internet Explorer 浏览器。

我只是这样做：

```
IWebDriver driver = new InternetExplorerDriver(@"C:\bin"); 
```

当我执行时，它会在控制台上显示：

```
已启动 InternetExplorerDriver 服务器（64 位）
2.31.0.0
监听端口 51572

```

但随后抛出以下异常：

```
无效的操作数异常
启动 Internet Explorer 时出现意外错误。IELaunchURL()
为 URL 返回 80070005
'http://localhost:51572/' (NoSuchDriver)

System.InvalidOperationException 未被用户代码处理
H结果=-2146233079
Message=启动 Internet Explorer 时出现意外错误。IELaunchURL() 为 URL 'http://localhost:51572/' (NoSuchDriver) 返回 80070005
源=WebDriver
堆栈跟踪：
    在 OpenQA.Selenium.Remote.RemoteWebDriver.UnpackAndThrowOnError（响应错误响应）
    在 OpenQA.Selenium.Remote.RemoteWebDriver.Execute（字符串 driverCommandToExecute，Dictionary`2 参数）
    在 OpenQA.Selenium.Remote.RemoteWebDriver.StartSession(ICapabilities desiredCapabilities)
    在 OpenQA.Selenium.Remote.RemoteWebDriver..ctor（ICommandExecutor commandExecutor，ICapabilities desiredCapabilities）
    在 OpenQA.Selenium.IE.InternetExplorerDriver..ctor（InternetExplorerDriverService 服务，InternetExplorerOptions 选项，TimeSpan 命令超时）
    在 OpenQA.Selenium.IE.InternetExplorerDriver..ctor（InternetExplorerDriverService 服务，InternetExplorerOptions 选项）
    在 OpenQA.Selenium.IE.InternetExplorerDriver..ctor（字符串 internetExplorerDriverServerDirectory，InternetExplorerOptions 选项）
    在 OpenQA.Selenium.IE.InternetExplorerDriver..ctor（字符串 internetExplorerDriverServerDirectory）

```

# c# - 如果在 Set() 之后立即调用 Reset()，ManualResetEvent.WaitOne() 不会返回

> ID：15513262
> 
> 赞同：4
> 
> 时间：2013-03-20T00:45:56.890
> 
> 标签：c#, multithreading, .net-4.0, manualresetevent

我在生产服务中遇到问题，其中包含一个“看门狗”计时器，用于检查主处理作业是否已冻结（这与 COM 互操作问题有关，遗憾的是无法在测试中重现）。

以下是它目前的工作方式：

*   在处理期间，主线程重置 a [`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/vstudio/2ssskfws%28v=vs.90%29.aspx)，处理单个项目（这不应该花费很长时间），然后设置事件。然后它继续处理任何剩余的项目。
*   每 5 分钟，看门狗就会调用`WaitOne(TimeSpan.FromMinutes(5))`此事件。如果结果为假，则重新启动服务。
*   有时，在正常操作期间，该看门狗会重新启动服务，即使处理时间不到 5 分钟。

原因似乎是当多个项目等待处理时，处理`Set()`第一个项目之后和处理`Reset()`第二个项目之前之间的时间太短，并且`WaitOne()`似乎没有识别出事件已设置。

我的理解`WaitOne()`是，被阻塞的线程保证在[被调用](http://msdn.microsoft.com/en-us/library/58195swd.aspx)[时会收到信号`Set()`](http://msdn.microsoft.com/en-us/library/58195swd.aspx)，但我认为我错过了一些重要的东西。

请注意，如果我允许在调用`Thread.Sleep(0)`后调用上下文切换`Set()`，则`WaitOne()`永远不会失败。

下面包含一个示例，它产生与我的生产代码相同的行为。`WaitOne()`有时等待 5 秒并失败，*即使`Set()`每 800 毫秒调用一次*。

```
private static ManualResetEvent _handle;

private static void Main(string[] args)
{
    _handle = new ManualResetEvent(true);

    ((Action) PeriodicWait).BeginInvoke(null, null);
    ((Action) PeriodicSignal).BeginInvoke(null, null);

    Console.ReadLine();
}

private static void PeriodicWait()
{
    Stopwatch stopwatch = new Stopwatch();

    while (true)
    {
        stopwatch.Restart();
        bool result = _handle.WaitOne(5000, false);
        stopwatch.Stop();
        Console.WriteLine("After WaitOne: {0}. Waited for {1}ms", result ? "success" : "failure",
                            stopwatch.ElapsedMilliseconds);
        SpinWait.SpinUntil(() => false, 1000);
    }
}

private static void PeriodicSignal()
{
    while (true)
    {
        _handle.Reset();
        Console.WriteLine("After Reset");
        SpinWait.SpinUntil(() => false, 800);
        _handle.Set();
        // Uncommenting either of the lines below prevents the problem
        //Console.WriteLine("After Set");
        //Thread.Sleep(0);
    }
} 
```

![上述代码的输出](../Images/57e1c871f26358e6f3c6aa02cad6e53c.png)

* * *

**问题**

虽然我知道`Set()`紧随其后的调用`Reset()`并不能保证所有阻塞的线程都会恢复，但是否也不能保证*任何*等待的线程都会被释放？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T01:30:47.913

不，这从根本上是错误的代码。当您将 MRE 设置保持这么短的时间时，WaitOne() 完成的可能性只有*合理的可能性。*Windows 倾向于释放在事件中被阻止的线程。但是当线程不等待时，这将彻底失败。或者调度程序选择另一个线程，一个以更高优先级运行并且也被解除阻塞的线程。例如，可能是内核线程。MRE 不会保留已发出信号但尚未等待的“记忆”。

Sleep(0) 或 Sleep(1) 都不足以*保证*等待将完成，调度程序绕过等待线程的频率没有合理的上限。尽管您可能应该在程序花费超过 10 秒时关闭程序；）

您需要以不同的方式执行此操作。一个简单的方法是依靠工作者来最终设置事件。所以在你开始等待之前重置它：

```
private static void PeriodicWait() {
    Stopwatch stopwatch = new Stopwatch();

    while (true) {
        stopwatch.Restart();
        _handle.Reset();
        bool result = _handle.WaitOne(5000);
        stopwatch.Stop();
        Console.WriteLine("After WaitOne: {0}. Waited for {1}ms", result ? "success" : "failure",
                            stopwatch.ElapsedMilliseconds);
    }
}

private static void PeriodicSignal() {
    while (true) {
        _handle.Set();
        Thread.Sleep(800);   // Simulate work
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T01:38:07.313

您不能像这样“脉冲”操作系统事件。

除其他问题外，任何在 OS 句柄上执行阻塞等待的 OS 线程都可能被内核模式 APC 临时中断。当 APC 完成时，线程继续等待。如果脉冲发生在中断期间，线程看不到它。这只是如何遗漏“脉冲”的一个示例（[在 Windows 上的并发编程](http://tinyurl.com/ConcurrentProgrammingOnWindows)中进行了详细描述，第 231 页）。

顺便说一句，这确实意味着`PulseEvent`Win32 API[完全损坏了](http://blogs.msdn.com/b/oldnewthing/archive/2005/01/05/346888.aspx)。

在具有托管线程的 .NET 环境中，丢失脉冲的可能性更大。垃圾收集等

在您的情况下，我会考虑切换到一个由工作进程`AutoResetEvent`重复`Set`并在每次`Wait`完成时由看门狗进程（自动）重置的。而且您可能只想通过每分钟左右检查一次来“驯服”看门狗。

# javascript - jQuery 1.9.1 属性选择器

> ID：15513263
> 
> 赞同：16
> 
> 时间：2013-03-20T00:46:05.123
> 
> 标签：javascript, jquery, html, jquery-1.9

**背景**

从 jQuery 1.9 开始，该`.attr(..)`方法不再返回属性值，而是我们现在必须使用`.prop(..)`. 不幸的是，这也适用于通过属性选择器指定的属性，即`$("input[value=]")`

见 [http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)

`.attr`以及关于和之间差异的良好讨论`.prop`：

[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

**我的情况**

我目前正在使用选择器，例如`$("input[value=]")`and`$("select[value=]")` 来选择没有设置值的输入元素。但是，这不再适用于 jQuery 1.9，而是我现在正在做这样的事情：

```
var hasValue = function () { return !!($(this).val().length); };
var hasNoValue = function () { return !($(this).val().length); };
$("input").filter(hasValue);
$("select").filter(hasValue); 
```

我的实际选择器要大一些，检查多个元素是否有值，所以现在我必须将我的 1 个选择器字符串拆分为多个选择器，并在其间调用 .filter(..) 方法。

**问题**

是否有等价于`$("[value=]")`, `$("[value!=]")`，`$("[value='abc']")`它使用属性而不是属性？如果没有，有没有比使用`.filter(hasValue)`and方法更清洁的`.filter(hasNoValue)`方法？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T01:00:28.363

使用`.filter`似乎是唯一的方法，但它并不算太糟糕，你实际上可以通过使用使它更准确一点`.val`：

```
$(":input").filter(function () { return $(this).val() === ""; }); 
```

如果这对你来说真的是应受谴责的，你可以创建一个自定义选择器。

```
$.expr[':'].emptyInput = function (elem) {
    return $(elem).is(":input") && $(elem).val() === "";
}; 
```

[http://jsfiddle.net/ExplosionPIlls/zaZPp/](http://jsfiddle.net/ExplosionPIlls/zaZPp/)

编辑：您也可以使用`this.value`而不是`$(elem).val()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:06:23.693

根据[升级指南](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)：

> 但是，当使用像“input[value=abc]”这样的选择器时，它应该始终通过 value 属性进行选择，而不是用户对属性进行的任何更改，例如从他们输入文本输入。从 jQuery 1.9 开始，它的行为正确且一致。早期版本的 jQuery 有时会在应该使用属性时使用该属性。

所以这回答了你的第一个问题 - 没有直接的等价物，关键是使用属性而不是属性。

您的代码看起来不错，但如果您想要更加标准化和可重用，您可以创建一个额外的过滤器。像这样：

```
(function($) {
    $.expr[':'].hasValue = function(element) {
        var $element = $(element);
        return element.is(':input') && element.val();
    };
}(window.jQuery)); 
```

这将允许您选择类似的东西：

```
// Select input elements with value and select elements without value.
$('input:hasValue,select:not(:hasValue)'); 
```

以及您需要的其他各种组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T00:49:45.480

我遇到了这个问题，只是想发布另一个解决方案，我发现它在某些其他建议的解决方案不合适的情况下有效。

只需将此事件处理程序添加到您的代码中

```
 $('input').on('keyup', function(){  
        var value = $(this).val();
        $(this).attr('value', value);
    }); 
```

# node.js - nodejs 网络根目录

> ID：15513273
> 
> 赞同：4
> 
> 时间：2013-03-20T00:47:13.527
> 
> 标签：node.js

我的印象是，当您运行 nodejs 网络服务器时，网络的根目录是包含实现网络服务器的 js 文件的文件夹。因此，如果您有 C:\foo\server.js 并运行它，那么“/”指的是 C:\foo，“/index.htm”映射到 C:\foo\index.htm

我有一个带有兄弟文件 default.htm 的文件 server.js，但是当我尝试加载 /default.htm 的内容时，找不到该文件。绝对文件路径有效。

“/”在哪里，什么控制它？

* * *

制作一个复制品，我将其简化为：

```
var fs = require('fs');
var body = fs.readFileSync('/default.htm'); 
```

并注意到它正在寻找这个

```
Error: ENOENT, no such file or directory 'C:\default.htm' 
```

所以“/”映射到 C:\

有没有办法控制网络根的映射？

* * *

我注意到相对路径确实有效。所以

```
var fs = require('fs');
var body = fs.readFileSync('default.htm'); 
```

成功。

我相信我的困惑源于我的原始实验项目文件巧合地放置在驱动器的根目录下。这允许对 /default.htm 的引用正确解析；只有当我将东西移动到一个文件夹中以将它们置于源代码控制之下时，这个问题才被发现。

我当然会考虑 express，但你还没有回答我的问题：是否可以重新映射 web 根目录，如果可以，如何？

有趣的是，这是目前的 server.js

```
var http = require('http');
var fs = require('fs');
var sys = require('sys');
var formidable = require('formidable');
var util = require('util');
var URL = require('url');
var QueryString = require('querystring');
var mimeMap = { htm : "text/html", css : "text/css", json : "application/json" };
http.createServer(function (request, response) {
  var body, token, value, mimeType;
  var url = URL.parse(request.url);
  var path = url.pathname;
  var params = QueryString.parse(url.query);  
  console.log(request.method + " " + path);  
  switch (path) {
    case "/getsettings":
      try {
        mimeType = "application/json";
        body = fs.readFileSync("dummy.json"); //mock db 
      } catch(exception) {
        console.log(exception.text);
        body = exception;
      }
      break;  
    case "/setsettings":
      mimeType = "application/json";
      body="{}";
      console.log(params);
      break;  
    case "/": 
      path = "default.htm";
    default:
      try { 
        mimeType = mimeMap[path.substring(path.lastIndexOf('.') + 1)];
        if (mimeType) {
         body = fs.readFileSync(path);
        } else {
          mimeType = "text/html";
          body = "<h1>Error</h1><body>Could not resolve mime type from file extension</body>";
        }
      } catch (exception) {
        mimeType = "text/html";
        body = "<h1>404 - not found</h1>" + exception.toString();
      }
      break;
  }
  response.writeHead(200, {'Content-Type': mimeType});
  response.writeHead(200, {'Cache-Control': 'no-cache'});
  response.writeHead(200, {'Pragma': 'no-cache'});
  response.end(body);  
}).listen(8124);
console.log('Server running at http://127.0.0.1:8124/'); 
```

我不完全确定您所说的“路线”是什么意思，但我怀疑 setsettings 和 getsettings 是您的意思，如果我错了，请纠正我。

* * *

Nodejs 似乎不支持 Web 根目录的任意映射。

所需要的只是在文件系统中使用绝对 Web 路径之前加上一个句点：

```
var URL = require('url');
var url = URL.parse(request.url);
var path = url.pathname;
if (path[0] == '/')
  path = '.' + path; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T00:56:47.567

虽然服务器的根目录是当前工作目录是正确的，但 Node.js 不会直接传递到文件系统上的文件，但毕竟这可能会带来一些安全风险。

相反，您需要为它提供路由，然后再为所发出的请求提供内容。

一个简单的服务器，如

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1'); 
```

只会捕获**任何**请求并以相同的方式响应（但不读取文件系统）。

现在，如果您想提供文件内容，您需要指定某种方式将该文件读入响应流，这可以通过以下几种方式完成：

1.  您可以使用`fs`API 在磁盘上查找文件，将其内容读入内存，然后通过管道将它们输出到响应中。这是一种相当乏味的方法，尤其是当您开始获取大量文件时，但它确实允许您非常直接地控制应用程序中发生的事情
2.  您可以使用类似的中间件服务器[`express.js`](http://expressjs.com/)，IMO 是一种更好的方法来做您想做的事情。在 StackOverflow 上有很多关于在此处使用 Express 的问题和答案，这是您所谈论[的静态服务器的一个很好的例子](https://stackoverflow.com/a/10444923/11388)

# 编辑

随着问题的澄清，原因：

```
var body = fs.readFileSync('/default.htm'); 
```

认为文件所在的结果`C:\default.htm`是因为您使用的是*绝对*路径而不是*相对*路径。如果你有：

```
var body = fs.readFileSync('./default.htm'); 
```

然后它会知道您要相对于当前工作目录进行操作。来自分区的*根目录*`/`并且来自当前*工作目录*。*`./`*

# javascript - 表格后面的空格怎么去掉

> ID：15513274
> 
> 赞同：0
> 
> 时间：2013-03-20T00:47:18.270
> 
> 标签：javascript, jquery, html

如何删除某个元素后的空格？我有这个代码。

```
</table>"&nbsp;&nbsp;" 
```

  是可变的。我正在尝试这个。

```
$("table").each(function() {
    var text = $(this).children();
    text = text.replace('"&nbsp;"', "");
    $(this).text(text);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:53:16.027

您需要替换父级的文本。请注意，使用会`.text`返回`&nbsp;`html 中的空格。这实际上使它更容易更换。

```
$("table").each(function () {
    $(this).parent().text(function (_, text) {
        return text.replace(/"\s+"/, '');
    });
}); 
```

[http://jsfiddle.net/ExplosionPIlls/wrnBG/](http://jsfiddle.net/ExplosionPIlls/wrnBG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:55:50.317

请参阅[如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

该功能将帮助您选择流氓文本节点，您可以从那里将其删除

# c++ - 为什么这段代码会在不同的机器上导致不同的行为？

> ID：15513280
> 
> 赞同：1
> 
> 时间：2013-03-20T00:47:40.367
> 
> 标签：c++, undefined-behavior

显然，有时此代码会进入无限循环，有时会终止或有时会出现分段错误，具体取决于机器。为什么行为不一致？

```
void loop() {
    int x[512]; 
    int i=0; 
    while (i++ <512) { 
        x[i] = 0; 
    } 
} 
int main () { 
    printf("\nCalling loop -->>\n"); 
    loop(); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:52:53.970

因为你正在做**post-increment**。什么时候`i`是 511 它通过了不等式，但随后它增加到 512。分配`x[512]`是对您的应用程序可能拥有或可能不拥有的**内存**的**访问**冲突**（**它是**undefined ）。**如评论中所述，您在不同平台上遇到的行为略有不同，因为此错误会导致所谓的**未定义行为**。换句话说，这个（错误的）操作的结果不是由 C++ 标准定义的。而且由于**不同的**编译器和操作系统有**不同**的底层实现——你会得到**不同的****************行为。**************

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:55:00.783

如果你调用未定义的行为（就像你做的那样），你会得到未定义的行为——这意味着不同的编译器可以在同一台机器上给出不同的结果，不同的编译器在不同的机器上可以给出不同的结果；哎呀，单台机器上的单个编译器可以查看月相并根据它决定做不同的事情！它们都是正确的，因为未定义的行为正是——未定义的。

如果你得到一个无限循环，很可能`&x[512] == &i`当你写零`x[512]`（这是未定义的行为）时，你归零`i`并且循环继续。

如果它崩溃了，很可能`x[512]`与调用堆栈上的一些关键控制信息相吻合，并且通过践踏返回地址或帧指针，您已经完全搞砸了系统。

但是，无论如何，机器和编译器工作正常；你的代码是问题所在。你的循环应该是：

```
while (i < 512)
    x[i++] = 0; 
```******

# ruby-on-rails - rspec+devise：运行 rspec 时 current_user 缺少属性方法

> ID：15513283
> 
> 赞同：0
> 
> 时间：2013-03-20T00:48:03.877
> 
> 标签：ruby-on-rails, rspec, devise

这是为用户控制器运行编辑方法时运行的过滤器方法之一

```
def correct_user?(post)
  post.user == current_user || current_user.admin
end 
```

这是我正在运行的测试

```
describe PostsController do
  subject { page }

  let(:first_user_is_admin) { FactoryGirl.create(:user) }

  describe "Admin user see edit view of someone else's post:" do
    before do 
      sign_in first_user_is_admin
      visit edit_post_path(post)
    end

    describe "Post is not anonymous with user_id" do
      let(:post) { FactoryGirl.create(:post, :user => first_user_is_admin) }
      before do
        visit edit_post_path(post)
      end
      it { current_path.should == edit_post_path(post) }
    end
  end
end 
```

* * *

当这个测试运行时，它失败了，因为

```
 Failure/Error: visit edit_post_path(post)
 NoMethodError:
   undefined method `admin' for nil:NilClass 
```

我觉得这很奇怪，因为`post.user == current_user`部分代码没问题。所以 current_user 可能不是 nil 什么的。

任何人都知道为什么我只在 rspec 测试期间得到这个未定义的方法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:53:51.580

错误在这里

```
visit edit_post_path(post) 
```

您还没有告诉它帖子是什么或它指的是什么。它期望 post 包含一些东西。

这可能是因为您的`let`块是在第一次调用 post 之后声明的。

# meteor - 调试 Meteor 代码的方法？

> ID：15513285
> 
> 赞同：1
> 
> 时间：2013-03-20T00:48:07.580
> 
> 标签：meteor, meteorite

我想通过简单`console.log`和一些代码更改来调试 Meteor 代码，看看我是否可以查明问题。但是，当我编辑 .meteor/local/build/app/packages/livedata/ 文件时，例如，当我再次运行它时，它会被 Meteorite 覆盖。临时更改正在运行的代码的最佳方法是什么？

[解释了如何附加调试器](https://stackoverflow.com/questions/11034941/meteor-debug-on-server-side)，但我对更好的本地开发周期更感兴趣。这样我就可以运行自己的 Meteor 应用程序，但也可以在 Meteor 中修复一些代码，以了解事物是如何交互的。

我怀疑问题出在 Meteorite 上，它会自动替换代码，因此无法通过本地更改运行 Meteor？

# php - smarty 获取字符串替换

> ID：15513292
> 
> 赞同：2
> 
> 时间：2013-03-20T00:48:48.253
> 
> 标签：php, smarty

当使用 $smarty->fetch 时，它会将模板拉入一个变量中。有没有办法对该变量进行预解析的字符串操作？

例子：

PHP：

```
$variable = $smarty->fetch('template.tpl');
$variable = str_replace("{include file='../another_dir", "{include file='", $variable); 
```

模板.tpl

```
{include file='incl.tpl'} 
```

理想的结果是让模板变成：

```
{include file='../another_dir/incl.tpl'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:46:33.933

您必须先编辑模板。然后你可以使用获取。

像这样的东西：

```
$template = file_get_contents('template.tpl');
$template = str_replace("{include file='../another_dir", "{include file='", $template);
$variable = $smarty->fetch('string:' . $template); 
```

Smarty[字符串模板资源](http://www.smarty.net/docs/en/resources.string.tpl)。

# delphi - 如何在 Delphi 中将 SQL 脚本行从 TStringList 记录到文件

> ID：15513298
> 
> 赞同：-2
> 
> 时间：2013-03-20T00:49:24.787
> 
> 标签：delphi

我使用这段代码来记录许多行（SQL.Add），使我必须构建复杂的脚本：

前任：

```
[...]
SQL.Add('ENTITY_ID, PRO_CODE, PHASE_CODE, TASK_CODE, PERIOD_REF');
SQL.Add('from ' + trim(SourceJrnl) + ' where');
SQL.Add('MASTER_ID = ' + IntToStr(TranID) + ' and');...
[...]

{ for debugging only }
for i := 0 to SQL.Count-1 do 
  ShowMessage('Line #' + IntToStr(i+1) + ' : '+ SQL.Strings[i]); 
```

将行从字符串列表或备忘录写入文件的任何简单方法（函数）。

[编辑]对不起。没有备忘录或字符串列表，只有一个简单的日志文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:09:52.690

调用`SQL.SaveToFile`会将查询写入文件，但会破坏以前的文件内容，因此您只能看到一个查询而看不到其他日志。相反，读取`SQL.Text`属性以获取单个字符串中的所有行，然后使用您对程序其余部分使用的任何日志记录技术将其写入日志文件。在紧要关头，将一行文本写入文件的一种简单方法是调用`Writeln`，但[人们之前曾询问过真正的日志库](https://stackoverflow.com/q/72983/33732)。

# php - mysql_fetch_array 和 mysql_query 在来自两个不同表的调用中不返回任何内容

> ID：15513299
> 
> 赞同：0
> 
> 时间：2013-03-20T00:49:31.567
> 
> 标签：php, mysql

我有两个表书和用户。书籍有一个列`id`，用户有一个名为`book_id`. users 表由有关从商店购买书籍的用户的信息填充，包括`book_id`向`id`from books 表推荐的列。

我的问题是，我一直在尝试这样做，但没有成功。

```
$query = mysql_query("SELECT * FROM books, users WHERE books.id='$id' OR users.id='$id' ");
while($row = mysql_fetch_array($query)){
    $info .= $row[0] . " " . $row[1] . "<br/>";
}
echo $info; 
```

表格书籍有一些数据，但用户是空的，我没有得到任何输出！！！我错过了什么？？

其他尝试：

`SELECT * FROM books, users WHERE books.id='$id'`返回空结果

`SELECT * FROM books WHERE books.id='$id'`返回 5 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:29:52.043

你错过了正确的`JOIN`.

> 表格书籍有一些数据**，但用户是空的**，我没有得到任何输出

由于`users`表不包含您需要使用`LEFT | RIGHT`或`FULL`加入来获取结果集的记录，具体取决于您要完成的工作。

因此尝试将您的查询更改为

```
SELECT * 
  FROM books b LEFT JOIN
       users u ON b.id=u.book_id
 WHERE ... 
```

这是**[SQLFiddle](http://sqlfiddle.com/#!2/2699a/6)**

# ios - 在屏幕上停留特定秒数，然后转到下一个？

> ID：15513300
> 
> 赞同：0
> 
> 时间：2013-03-20T00:49:32.753
> 
> 标签：ios, xcode, uiviewcontroller, nstimer

我正在尝试制作一个记忆应用程序，屏幕必须在那里停留大约 10 秒，然后它必须翻转，或者换句话说，进入下一个屏幕？我应该通过使用计时器并将其连接到我需要连接到的屏幕来做到这一点吗？我对它的工作原理有点困惑..

感谢所有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:54:58.943

你可以只使用：

```
[self performSelector:@selector(selector) withObject:nil afterDelay:10]; 
```

并让选择器加载新视图。

# magento - Magento 1.7 数据库错误类别平面数据

> ID：15513302
> 
> 赞同：2
> 
> 时间：2013-03-20T00:49:35.157
> 
> 标签：magento, phpmyadmin

在我的网站上添加了许多产品后，出现了这个错误。

> 重新索引过程类别平面数据的问题

这个网站上的解决方案对我不起作用。我的日志文件中的错误是：

> 一般错误：1005 无法创建表 catalog_category_flat_store_1'（错误号：150）

你有我的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-22T00:31:54.883

我快速搜索了一下，发现了这个：

[http://www.fortwaynewebdevelopment.com/magento-general-error-1005-cant-create-table-fixworkaround/](http://www.fortwaynewebdevelopment.com/magento-general-error-1005-cant-create-table-fixworkaround/)

> ALTER TABLE catalog_category_entity ENGINE=INNODB;
> 
> ALTER TABLE core_store ENGINE=INNODB;

不确定它是否对您的问题有帮助。

# c# - 设置 Gallio 执行日志的日志级别

> ID：15513305
> 
> 赞同：1
> 
> 时间：2013-03-20T00:49:51.057
> 
> 标签：c#, log4net, app-config, mbunit, gallio

如何配置 log4net 或我的 Gallio 测试运行程序（Icarus 和 Echo）以对 Gallio 执行日志和我自己的文件附加程序使用不同的日志记录级别。我希望我的日志文件有一个 DEBUG 日志级别，而 Gallio 有一个 ERROR 日志级别。

我认为这会起作用，但 Gallio 正在阅读两个附加程序：

```
 <log4net>
    <appender name="Console" type="log4net.Appender.ConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%5level [%thread] (%file:%line) - %message%newline" />
      </layout>
    </appender>
    <appender name="File" type="log4net.Appender.FileAppender">
      <file value="test.log" />
      <appendToFile value="false" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%5level [%thread] (%file:%line) - %message%newline" />
      </layout>
    </appender>

    <logger name="TestNamespace">
      <level value="DEBUG" />
      <appender-ref ref="File" />
    </logger>
    <root>
      <level value="ERROR" />
      <appender-ref ref="Console" />
    </root>
  </log4net> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:24:05.773

Gallio 正在将控制台输出重定向到其执行日志。所以我需要将 ConsoleAppender 的阈值设置为我想要的 Gallio 执行日志的级别。

```
 <log4net>
    <appender name="Console" type="log4net.Appender.ConsoleAppender">
      <threshold value="ERROR"/>
      <layout type="log4net.Layout.PatternLayout">
        <!-- Pattern to output the caller's file name and line number -->
        <conversionPattern value="%5level [%thread] (%file:%line) - %message%newline" />
      </layout>
    </appender>
    <appender name="File" type="log4net.Appender.FileAppender">
      <threshold value="DEBUG"/>
      <file value="test.log" />
      <appendToFile value="false" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%5level [%thread] (%file:%line) - %message%newline" />
      </layout>
    </appender>

    <root>
      <appender-ref ref="Console" />
      <appender-ref ref="File" />
    </root>
  </log4net> 
```

# php - PDO bindValue() 没有绑定

> ID：15513309
> 
> 赞同：1
> 
> 时间：2013-03-20T00:50:17.163
> 
> 标签：php, ajax, json, pdo, bindvalue

以下脚本的想法是根据用户单击 jQuery UI 日期选择器日历中的日期来向/从数据库中添加或删除日期，我已设置该日历以获取单击的日期。

我将 jQuery.post() 发送到包含以下代码的 php 页面。

问题是我在 $_POST[] 变量中获取的值不会绑定到 PDO->prepare 语句，我最终只是将 0000-00-00 添加到我的数据库中！

```
if (isset($_POST['edit_date'])) {
$edit_date = htmlspecialchars(trim($_POST['edit_date']), ENT_QUOTES);

require_once '../includes/db_cnx.include.php';

// Check if already exists
$query = $db->prepare("SELECT * FROM `dates` WHERE `date` = :date");
$query->bindValue(':date', $edit_date);
print_r($query);
$query->execute();

$num_rows = $query->rowCount();
echo '(num rows: ' . $num_rows . ')';
if ($num_rows === 0 ) {
    // INSERT NEW
    $query = $db->prepare("INSERT INTO `dates` (`date`) VALUES (:insert_date)");
    $query->bindValue(':insert_date', $edit_date, PDO::PARAM_STR);
    print_r($query);
    $query->execute();
    if ($query->rowCount() === 1) {
        $return_msg = 'Date added to database';
    } else {
        $return_msg = 'Could not add date to database';
    }
} else if ($num_rows === 1) {
    // DELETE EXISTING
    $query = $db->prepare("DELETE FROM `dates` WHERE `date` = :delete_date");
    $query->bindValue(':delete_date', $edit_date, PDO::PARAM_STR);
    print_r($query);
    $query->execute();
    if ($query->rowCount() === 1) {
        $return_msg = 'Date removed from database';
    } else {
        $return_msg = 'Date could not be removed from database';
    }
} else {
    // error??
    $return_msg = 'More than one entry for this date. Please contact the administrator';
}

echo $return_msg . '- ' . $edit_date; 
```

}

如果我输出收到的 $_POST['edit_date'] 我会看到正确的值（例如 2013-03-01）。

如果我在绑定后输出 SELECT 语句，我会看到：

```
PDOStatement Object
(
    [queryString] => SELECT * FROM `dates` WHERE `date` = :date
) 
```

这是否意味着它没有将实际值绑定到 :date ？

即使看到上面显示的 :date 它似乎确实在做它的工作，因为我根据它是否找到日期得到正确的行数。

根据返回的行数，它会落入正确的 if / else 块中。但随后将向我展示例如：

```
(
    [queryString] => INSERT INTO `dates` (`date`) VALUES (:insert_date)
) 
```

如上所述，我输入了 0000-00-00 日期。

它开始驱使我绕过弯道！

即使它没有在输出中显示我，它是否具有约束力？如果是为什么它使用 000-00-00 而不是我的实际值？

谢谢！

编辑...如果有帮助，来自其他页面的 jquery 帖子如下所示：

```
onSelect: function(){
          var day = $("#datepicker").datepicker('getDate').getDate();
          var month = $("#datepicker").datepicker('getDate').getMonth() + 1;
          var year = $("#datepicker").datepicker('getDate').getFullYear();
          var fullDate = year + " - " + month + " - " + day;

          $.post('admin_functions.php', {"edit_date" : fullDate}, function (data) {
            alert(data);
          });
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:21:06.920

在您的 jQuery 代码中，更改以下内容：

```
var fullDate = year + " - " + month + " - " + day; 
```

到

```
var fullDate = year + "-" + month + "-" + day; 
```

**注意：**没有多余的空格被传递。

然后，在您的插入查询中，使用 MySQL[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)将字符串解析为日期。您的准备声明应为：

```
$query = $db->prepare("INSERT INTO `dates` (`date`) 
    VALUES (STR_TO_DATE(:insert_date, '%Y-%c-%e'))"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:21:13.937

如果您的日期变量包含`2013 - 3 - 1`，mysql 或 php 将能够将其识别为有效日期。

假设您在 mysql 中使用日期字段，您需要以以下格式为其提供日期：`yyyy-mm-dd`.

解决您的问题的最简单方法是删除您在 javascript 中添加的空格，以便您的日期变为`2013-3-1`. 现在 php 可以识别它，您可以使用：

```
$date_for_sql = date("Y-m-d", strtotime($_POST['edit_date'])); 
```

当然还有其他（和更强大的......）解决方案来验证您是否有一个有效的日期，您可以爆炸`-`以获取组件等。

# xcode - 在 Xcode 中将 .svg 文件作为文本查看？

> ID：15513310
> 
> 赞同：5
> 
> 时间：2013-03-20T00:50:21.053
> 
> 标签：xcode, svg

我将 xcode 用于我的编辑环境。我正在一个项目中编辑几个 .svg 文件，我需要 xcode 将文件作为文本打开。相反，它将文档呈现为 svg。虽然我很欣赏这在大多数情况下如何帮助（工作和查看 svg），但它现在对我来说是一个障碍。

有谁知道如何告诉 xcode 将 .svg 文件视为常规文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-16T16:40:21.077

有一种简单的方法可以更改任何文件类型的编辑器，尤其是 Xcode 5 中的 SVG（我相信这在以前的版本中也是可能的）：

1.  右键单击项目导航器中的文件，选择“显示文件检查器”
2.  在 File Inspector 中，将 Type 字段更改为例如 XML：

![在此处输入图像描述](../Images/d61560e86a01e39ba611c149738d9480.png)

不过，您必须为每个 SVG 文件执行此操作。仍然可以通过右键单击 Project Navigator -> Open As -> Preview 来查看 SVG 的图形预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T23:12:14.120

在回复 mojuba 并使用文件检查器时，我不确定这是否有区别，但我将位置设置为“相对于工作区”（我的工作区文件和源文件位于同一目录中）并且设置确实存在重新启动 Xcode。我正在使用 Xcode 4.2.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T17:39:13.740

重命名为 .xml（确保 Finder 没有通过在信息面板中编辑名称来隐藏真正的扩展名）确实对我有用——在我的情况下，SVG 不是项目的一部分，因此 @mojumba 的技巧不起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T02:12:13.570

您似乎无法在 Xcode 中查看 .svg 的源代码，我建议您使用[vim](http://www.vim.org)或[TextEdit.app](http://support.apple.com/kb/ta20406)之类的东西，这两者都是您的系统内置的。

# ssrs-2008 - SSRS2008 R2 报告中组级别的条件分页符

> ID：15513313
> 
> 赞同：9
> 
> 时间：2013-03-20T00:50:54.033
> 
> 标签：ssrs-2008, page-break

我在 SSRS 2008 R2 中有一份报告。该报告由一个包含多个分组级别的表组成。如果客户要求查看他们的所有详细信息，我希望在表格的第二个分组级别有一个分页符。如果只请求摘要详细信息，那么我不希望分页符，因为这会导致不必要的分页。如何有条件地控制表中组级别的分页符？

摘要详细信息的计算和返回与 sql 不同，因此我不想隐藏行，只需打开或关闭分页符。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-20T10:37:52.777

您可以使用基于表达式的分页符，根据您的确切表格设置，这可能很有用。

基本上，您设置一个参数来控制是否应用分页符。

在**Group**级别，有**Page Break**选项 - 将**Page Break**属性设置为您需要的，然后将**Disabled**属性设置为基于表达式，例如：

```
=IIf(Parameters!Break.Value, false, true) 
```

![在此处输入图像描述](../Images/99d93981616fe98380e7c4824d19f673.png) ![在此处输入图像描述](../Images/74de3b76af937df354fc66a964a43054.png)

这意味着只有将*Break*参数设置为*true*时才会应用**分页符**。

# php - PHP 5.4 到 5.3 的转换

> ID：15513316
> 
> 赞同：1
> 
> 时间：2013-03-20T00:51:05.650
> 
> 标签：php

当您尝试使用较新版本编写的 PHP 脚本以在较旧版本上工作时，它们是否有任何好的资源？具体是 5.4 到 5.3？

我什至查看了有关更改的文章，但我似乎无法弄清楚我做错了什么。

这是我现在得到的错误：

```
Parse error: syntax error, unexpected '[' in Schedule.php on line 113 
```

它所指的代码：

```
private static $GAMES_QUERY = array('season' => null, 'gameType' => null);
.....
public function getSeason(){
$test = array_keys(self::$GAMES_QUERY)[0]; //<<<<<<<<<< line:113
return($this->query[$test]);
} 
```

我所看到的一切似乎都在说 5.3 具有 self::、array_keys 以及访问类似数组的能力。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:53:33.563

尝试...

```
$test = array_keys(self::$GAMES_QUERY);
$test = $test[0]; 
```

如果我没记错的话，您不能`[0]`像在 5.4 和 javascript 等中那样在 5.3 的同一声明中使用密钥引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T00:53:56.707

该语法实际上是在 5.4 中添加的：http: [//docs.php.net/manual/en/migration54.new-features.php](http://docs.php.net/manual/en/migration54.new-features.php)

所以，你需要一个临时变量来保存函数的结果，然后访问你想要的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T09:45:59.407

在低于 PHP 5.4 的版本中，您可以使用[`list`关键字^(*Docs*)](http://www.php.net/function.list)：

```
list($test) = array_keys(self::$GAMES_QUERY); 
```

这也适用于 PHP 5.4。[但它确实比PHP 5.4 数组取消引用](http://docs.php.net/migration54.new-features)[^(*Docs*)](http://docs.php.net/migration54.new-features)中的新功能更好地处理`NULL`案例。[](http://docs.php.net/migration54.new-features)

# jquery - Jquery Jqgrid Datepicker即使在调整z-index后也隐藏

> ID：15513317
> 
> 赞同：0
> 
> 时间：2013-03-20T00:51:21.130
> 
> 标签：jquery, jqgrid, datepicker, z-index, layer

我有一个网格，我已经搜索了很长时间，试图找到一个解决方案，以在网格具有 cellEdit:true 时显示日期选择器。我发现的许多文章都说必须调整 z-index 但这对我不起作用。我已经尝试在 .htm 头部部分（如下面的代码）以及 jqgrid 的 .css 文件中对其进行调整。如果我单击单元格，则没有任何反应，但如果我单击另一个网页并返回，则会显示日期对话框弹出窗口。是什么在调整 z-index 后仍将其隐藏？下面我放了 !important ，所以希望这些信息不会被覆盖。谢谢。

```
 <style type="text/css">
    .ui-datepicker { width: 17em; padding: .2em .2em 0; display: none; z-index: 2000 !important;}
    </style>

    ==================================================

 {name:'LOCK_EXPIRATION_DATE',index:'LOCK_EXPIRATION_DATE', width:80, width:90, sorttype:"date",align:'left',sortable:'true',editable:true,fixed:true, editoptions: { dataInit: function(el) { setTimeout(function() { $(el).datepicker(); }, 200); } },
    ==================================================
    onSelectRow: function(id){ if(id && id!==lastsel3){ jQuery('#list4').jqGrid('restoreRow',lastsel3); jQuery('#list4').jqGrid('editRow',id,true,pickdates); lastsel3=id; } },

    ==================================================

        cellEdit: true,

    ================================================== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:37:33.047

您可以通过在**datepicker**定义中添加属性来定义`z-index`datepicker 的功能。而不是直接使用. 这将有助于在从**jqGrid**初始化**datepicker时修改****datepicker**`dataInit`**`$(el).datepicker();`**

 ******```
$(el).datepicker({
    beforeShow:function(input,inst){
          setTimeout(function(){
         $(".ui-datepicker").css("z-index", 2000);}, 10); 
    }
}); 
```******

# excel - 单击绘图轴 - 将轴值输出到单元格

> ID：15513321
> 
> 赞同：1
> 
> 时间：2013-03-20T00:51:35.310
> 
> 标签：excel, vba, plot, figure

我想知道是否有人知道在 excel 中使用 VBA 的方法或在 excel 中的任何其他方法：

以交互方式单击 Excel 中绘制的图形的 x 轴，该 x 轴值将输出到单元格。

有人有想法么？我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:59:36.367

不是一个特别容易的任务...

如果您在查看图表/图表轴时创建一个事件处理程序，那将帮助您入门。把它放在工作簿代码模块中。当文件打开时，`Cht`会根据`Workbook_Open`事件进行设置。然后`Private Sub Cht_Select...`将在用户选择图表时运行。如果所选零件是轴，则会显示一个消息框。您将需要想出一种方法来确定光标相对于轴的位置，并进行一些数学运算以尝试计算轴值。

```
Option Explicit

Public WithEvents Cht As Chart
Private Sub Cht_Select(ByVal ElementID As Long, _
    ByVal Arg1 As Long, ByVal Arg2 As Long)

    If ElementID = xlAxis Then
    MsgBox "Call your macro here to identify cursor position in chart..."
    End If

End Sub
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Set Cht = Nothing
End Sub

Private Sub Workbook_Open()
    Set Cht = Sheet1.ChartObjects(1).Chart
End Sub 
```

这里有一些关于获取鼠标光标位置的信息：

[http://support.microsoft.com/kb/152969](http://support.microsoft.com/kb/152969)

然后，您需要获取轴位置和长度并做一些简单的数学运算来计算光标所在的轴值。

这是一个稍微修改的版本，您可以将其放入标准模块中，以返回数组中的 XY 坐标。由您决定如何将这些与图表轴对象、最小/最大值、长度、左侧和顶部值一起使用，以便在选择轴时计算（或近似）光标的轴值。

```
' Access the GetCursorPos function in user32.dll
  Declare Function GetCursorPos Lib "user32" _
  (lpPoint As POINTAPI) As Long
  ' Access the GetCursorPos function in user32.dll
  Declare Function SetCursorPos Lib "user32" _
  (ByVal x As Long, ByVal y As Long) As Long

  ' GetCursorPos requires a variable declared as a custom data type
  ' that will hold two integers, one for x value and one for y value
  Type POINTAPI
     X_Pos As Long
     Y_Pos As Long
  End Type

  ' This function retrieve cursor position:
  Function Get_Cursor_Pos() As Variant

  ' Dimension the variable that will hold the x and y cursor positions
  Dim Hold As POINTAPI
    Dim xyArray(1) As Variant

  ' Place the cursor positions in variable Hold
  GetCursorPos Hold

  ' Display the cursor position coordinates
    xyArray(0) = Hold.X_Pos
    xyArray(1) = Hold.Y_Pos
    Get_Cursor_Pos = xyArray
  End Function

Sub GetCoordinates()
    Dim xyPosition As Variant

    xyPosition = Get_Cursor_Pos

    Debug.Print xyPosition(0)
    Debug.Print xyPosition(1)

    '### Now that you have the x and y position, you will need to perform some
    ' additional computations with the Axis' .top, .left, and its min/max values
    ' in order to get the approximate axis location where you mouse-clicked it.

End Sub 
```

# xaml - 用于 WP8 开发的 XAML 面板

> ID：15513323
> 
> 赞同：0
> 
> 时间：2013-03-20T00:51:44.890
> 
> 标签：xaml, windows-phone-8

我正在尝试在 XAML 中查找用于 WP8 开发的可用面板列表。我问的原因是因为`FlowPanel`，`WrapPanel`并且`UniformGrid`似乎不可用。

我在哪里可以找到可用面板的列表？

# java - 番石榴CacheBuilder性能

> ID：15513325
> 
> 赞同：0
> 
> 时间：2013-03-20T00:51:55.687
> 
> 标签：java, guava

以下微基准测试使用 Guava CacheBuilder。它的执行速度比 ConcurrentHashMap 慢 1 倍。我是否正确使用了 CacheBuilder？

```
 final Cache c = CacheBuilder.newBuilder().concurrencyLevel(10).maximumSize(100).build();
    int num = 10;
    final java.util.concurrent.CountDownLatch startSignal = new java.util.concurrent.CountDownLatch(1);
    final java.util.concurrent.CountDownLatch doneSignal = new java.util.concurrent.CountDownLatch(num);
    int j = 0;
    final Long[] pairs = new Long[] { new Long(5),
            new Long(324235342L), new Long(3242385842L), new Long(8463242363642L),
            new Long(3244532342L), new Long(54654L), new Long(7332742342L),
            new Long(32425345342L), new Long(32453662342L), new Long(63573242342L) };
    Object state = new Object();

    for (Long p : pairs) {
        c.put(p, state);
    }
    Thread [] threads = new Thread[num];
    for (int k = 0 ; k < num ; ++k) {
        final int z = k;
        threads[k] = new Thread(new Runnable() {
            int i = z;
            @Override
            public void run() {
                try {
                    startSignal.await();
                    for (int j = 0 ; j < 100000 ; ++j) {
                        c.getIfPresent(pairs[z]);
                    }
                    doneSignal.countDown();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
    }
    for (Thread t : threads) {
        t.start();
    }
    startSignal.countDown();
    c.getIfPresent(pairs[1]);
    long t = System.currentTimeMillis();
    doneSignal.await();
    System.out.println("done in " + (System.currentTimeMillis() - t)); 
```

ConcurrentHashMap 给了我 9 毫秒。CacheBuilder 给了我 90 毫秒。这是在循环相同的代码几分钟之后。

# android - 如何序列化一个对象，然后通过蓝牙发送它

> ID：15513326
> 
> 赞同：3
> 
> 时间：2013-03-20T00:52:00.807
> 
> 标签：android, bluetooth

我正在制作一个战舰游戏，我想发送一个名为 Ships 的类的数组（其中包含船名、大小、旋转与否等内容以及坐标的数组列表）。我用谷歌搜索了这个并查看了堆栈溢出，我基本上需要序列化数组，但这就是我卡住的地方。我需要使用 ObjectOutputStream，但是如何将其合并到下面的代码中（取自 android 开发站点）。注意我已经使船类实现可序列化。提前致谢

```
public class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket) {
            Log.d(TAG, "connectedthread started");
            // mHandler.obtainMessage(TEST).sendToTarget();
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the input and output streams, using temp objects because
            // member streams are final
            try {

                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();

            } catch (IOException e) {
                Log.e(TAG, "temp sockets not created");
            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;

        }

        public void run() {
            Log.i(TAG, "Begin mConnectedThread");
            byte[] buffer = new byte[1024]; // buffer store for the stream
            int bytes; // bytes returned from read()

            // Keep listening to the InputStream until an exception occurs
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);
                    // Send the obtained bytes to the UI activity
                    Log.i(TAG, "reaaaad msg");
                    mHandler.obtainMessage(SetUpGame.MESSAGE_READ2, bytes, -1, buffer).sendToTarget();
                } catch (IOException e) {
                    Log.e(TAG, "disconnectd");
                    break;
                }
            }
        }

        /*
         * Call this from the main activity to send data to the remote
         * device
         */
        public void write(byte[] buffer) {

            try {

                mmOutStream.write(buffer);
                Log.i(TAG, "writeeee msg");
                mHandler.obtainMessage(SetUpGame.MESSAGE_WRITE, -1,-1, buffer).sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "Exception during write");
            }
        }

        /* Call this from the main activity to shutdown the connection */
        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "close of connect socket failed");
            }
        }

    } 
```

和我的处理程序：

```
 final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(android.os.Message msg) {

            switch (msg.what) {
            case MESSAGE_READ2:

                byte[] readBuf = (byte[]) msg.obj;
                String readMessage = new String(readBuf, 0, msg.arg1);
                break;

            case MESSAGE_WRITE:
                byte[] writeBuf = (byte[]) msg.obj;
                String writeMessage = new String(writeBuf);
                //Toast.makeText(getApplicationContext(),"Me:" + writeMessage, Toast.LENGTH_SHORT).show();
                break; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T01:38:24.447

在上面的代码中，您从连接的套接字获取输入/输出流。

现在您可以使用这些流向/从套接字流式传输数据。

具体如何执行取决于您要流式传输的数据类型。在这种情况下，您有一个可序列化的对象要发送，因此您将把您的流包装在一个过滤器中，该过滤器调整流以与对象一起使用：ObjectOutputStream/ObjectInputStream...

```
ObjectOutputStream oos = new ObjectOutputStream( mmOutStream );
for (Ship ship: ships)
  oos.writeObject( ship ); 
```

此代码遍历 Ships 数组，将每艘船写入流（因此也写入蓝牙套接字）。

接收方是相同的，还有一个额外的复杂性：您不一定知道何时停止或阅读什么。有多种方案来处理这个问题，并且有一些专门处理这个问题的问题。Android 开发者指南的蓝牙页面有示例代码：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

# asp.net - Facebook 从其他网站发布项目

> ID：15513327
> 
> 赞同：0
> 
> 时间：2013-03-20T00:52:01.270
> 
> 标签：asp.net, facebook

我是 Facebook API 开发的新手，我对开发人员如何使用 Facebook 有一些一般性的问题。是否可以使用 FB API 从另一个站点将文本、图像、视频发布到墙上？哪个 API 可以用于此？如果它们是在 Facebook 内发布的，或者它们有不同的外观，它们会看起来像吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:11:22.643

是的，这是可能的。[首先使用http://developers.facebook.com/](http://developers.facebook.com/)在 facebook 上创建一个应用程序。

欲了解更多信息，请访问以下链接

```
 http://developers.facebook.com/docs/concepts/login/ 
```

# java - ToolProvider.getSystemJavaCompiler() 返回 null - 仅安装 JRE 时可用？

> ID：15513330
> 
> 赞同：25
> 
> 时间：2013-03-20T00:52:09.163
> 
> 标签：java, javac

我正在尝试使用*JavaCompiler*类：

*   [http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)

当我调用*ToolProvider.getSystemJavaCompiler()*时，它返回 null。

我认为这是因为我使用的是 JRE 而不是 JDK。

问题是我希望它在所有平台上运行，无论用户使用 JRE 或 JDK 的天气如何。

如果有人知道如何解决此问题或使用其他方法，请发表评论。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-07T20:17:46.270

ToolProvider.getSystemJavaCompiler() 不可用。

类路径中是否缺少 tools.jar？

`Set class path to the tools.jar`可以在 jdk\jre 目录中找到的文件。

`System.setProperty("java.home", "C:\\Program Files\\Java\\jdk1.7.0_02");`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-05T06:10:13.827

以下是未安装 JDK 时如何从应用程序运行 Java 编译器。

首先，将 JDK 中的 tools.jar 文件包含在您的 Java 应用程序中，并将 tools.jar 放入您的类路径中。Oracle 可能不喜欢你这样做。但是，有合法的解决方法。您可以从 openjdk.org (openjdk)、RedHat (IcedTea) 或 Azul Systems (Zulu) 提供的免费 JDK 中获取 tools.jar 文件。

接下来，不使用 ToolProvider.getSystemJavaCompiler() 和 JavaCompiler 类，而是直接调用位于 tools.jar 中的编译器。下面是代码片段：

```
String classpath = ...; // make sure tools.jar is in this path 
String sourcepath = ...; // path to your sources
String putputpath = ...; // directory for generated class files
String filepath = ...; // file path the file you want to compile

String[] args = new String[] {
"-classpath", classpath,
"-sourcepath", sourcepath,
"-d", putputpath,
filePath
};
com.sun.tools.javac.Main javac = new com.sun.tools.javac.Main();
int compileStatus = javac.compile(args); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T00:56:07.897

我认为这是[问题](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6477844)所在。明确指定您使用的 java.exe 版本作为 JDK 目录中的版本。

详情见[这里](https://stackoverflow.com/questions/2543439/null-pointer-exception-while-using-java-compiler-api)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-13T07:03:55.893

另一个解决方案来自： - [http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7181951](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7181951)

将 JDK_HOME/lib/ 中的 tools.jar 复制到 JRE_HOME/lib/ 中。至少对我来说，它神奇地解决了我的问题！

（我没有按照上面的建议做任何事情。我只是在那里复制了它。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-04T04:46:25.397

只需将 tools.jar 文件从 /lib 复制到它就可以了

您可以通过 System.out.println(System.getProperty("java.home")) 获取

大多数时候它就像 C:\Program files\Java\jre(version) [for windows]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-07T15:44:20.553

在 Mac 上，这对我有用：

```
 System.setProperty("java.home", "/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home");
  javax.tools.JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); 
```

（由于某种原因，它不适用于 idk 10）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-15T13:28:06.123

我的 buildPath 中有 JRE 和 JDK ...我刚刚删除了 JRE 并修复了它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-18T04:56:07.220

这是对我有用的简单解决方案

我刚刚将 jre 系统库更改为 .....Program Files\Java\jdk1.7.0_55\jre 而不是 ....Program Files\Java\jdk1.7.0_55\bin ，它对我有用。

# javascript - 如何告诉RequiredJS 在自定义目录中查找text.js 插件？

> ID：15513333
> 
> 赞同：2
> 
> 时间：2013-03-20T00:52:25.927
> 
> 标签：javascript, requirejs

我想将`text.js`插件放在自定义目录中并有一个自定义名称，例如：`/app/some/path/here/to/text-version.js`.

当我`require`使用`text!`RequireJS 的东西试图从配置中`text.js`指定的 url加载时`baseUrl`。

如何告诉 RequireJS 在具有特定**名称的特定****目录**中查找 text.js 插件？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:12:27.383

如果`text.js`库与 AMD 兼容（导出`define`包装功能的语句），则可以在模块的`define`存根中使用完整路径：

```
// yourmodule.js
define(['/app/some/path/here/to/text-version.js'], function(text) {
    // etc
}); 
```

在此处阅读有关 AMD 模块定义的更多信息：[http ://requirejs.org/docs/whyamd.html#amd](http://requirejs.org/docs/whyamd.html#amd)

否则，您将需要在主 RequireJS 配置脚本中填充该库：

```
// main.js
require.config({
  paths: {
    text: '/app/some/path/here/to/text-version.js'
  },

  shim: {
    text : {
      exports : 'text'
    }
  }
});

// yourmodule.js
define(['text'], function(text) {
    // etc
}); 
```

在此处阅读有关 RequireJS 匀场的更多信息：[http ://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T00:49:39.347

我刚刚发现，虽然 RequireJS 会在插件中自动加载，但它本质上是调用`require('text', function (text) { /* ... */ })`. 这意味着配置任何 RequireJS 插件的路径实际上非常容易——只需更改`require.config()`.

```
/**
 * main.js
 */
require.config({
    baseUrl: '/lib/js/',

    paths: {
        text: 'require/plugins/text'
    }
}); 
```

现在，当您需要模块中的插件时，例如

```
/**
 * myModule.js
 */
define([ 'text!/lib/css/stylesheet.css' ], function () {
    // ...
}); 
```

RequireJS 会计算出在`/lib/js/require/plugins/text.js`.**

# java - 获取 Apache POI 错误无法从文本公式单元格中获取数值

> ID：15513334
> 
> 赞同：0
> 
> 时间：2013-03-20T00:52:33.137
> 
> 标签：java, apache-poi

我最近将我的代码降级为使用 JDK 1.4 和 Apache 3.2(Final)。

注意：对于那些问我为什么选择降级的人。我需要将它部署在使用这些设置的服务器上。

在降级所有内容之前，我的代码运行良好并且没有遇到错误。我运行了与以前的代码相同的示例并遇到了这个错误：

```
 java.lang.IllegalStateException: Cannot get a numeric value from a text formula cell
        at org.apache.poi.hssf.usermodel.HSSFCell.typeMismatch(HSSFCell.java:620)
        at org.apache.poi.hssf.usermodel.HSSFCell.checkFormulaCachedValueType(HSSFCell.java:625)
        at org.apache.poi.hssf.usermodel.HSSFCell.getNumericCellValue(HSSFCell.java:650)
        at org.apache.poi.hssf.usermodel.HSSFCell.setCellType(HSSFCell.java:308)
        at org.apache.poi.hssf.usermodel.HSSFCell.setCellType(HSSFCell.java:274)
at com.Generate.Excel.Actions.ProtonMonthlyStatActions.generatePRDXSheet(ProtonMonthlyStatActions.java:292) 
```

错误指向由双星号包围的 else 部分中的这段代码：

```
 for (int x =0 ; x<dataList.getDHourList().size(); x++){ //for loop copying throughput data to excel file

            row = prdX.getRow(x+2);

            //checks if 3rd row in excel contains data (x+2) where x = 0 since excel is zero based
            if (isRowEmpty(prdX.getRow(x+2))== true){
                row = prdX.createRow(x+2); //creates row

                //for Hour Computation
                cell = row.createCell(colVal[2]);//creates column for Hour Computation using the formula specified
                cell.setCellType(HSSFCell.CELL_TYPE_FORMULA);
                cell.setCellFormula("MID("+formulaCell[0]+(x+3)+",12,2)");//fixed formula taken from Excel Template

            }   
            //If row is not empty each cells in every row is iterated and processed
            else {                      

                //for Hour Computation              
                cell = row.getCell(colVal[2], HSSFRow.CREATE_NULL_AS_BLANK);
                **cell.setCellType(HSSFCell.CELL_TYPE_FORMULA);**
                cell.setCellFormula("MID("+formulaCell[0]+(x+3)+",12,2)");

            }
        } 
```

我认为这个错误是指 cell.setCellFormula 部分中的文本值......但是我将如何在 Apache 3.2 中指定一个公式。对此有什么建议吗？

# android - 在 TimePicker 中设置时间并将其与 calendar.hour 和 minute 进行比较？

> ID：15513335
> 
> 赞同：1
> 
> 时间：2013-03-20T00:52:46.760
> 
> 标签：android, time, calendar, timepicker

我有一个 TimePicker，我需要从中获取小时和分钟（-在用户指定时间并点击完成按钮之后），然后将其与当前小时和分钟进行比较，如果这两个时间匹配，则执行操作。

目前我正在使用：

```
int calendarHour = calendar.get(Calendar.HOUR);
    int calendarMinute = calendar.get(Calendar.MINUTE); 
```

获取当前的小时和分钟。经过大量搜索后，与android上的字符串/整数相比，我对工作时间的格式感到困惑。

如何从 TimePicker 中获取小时和分钟？如何检查 TimePicker 时间和日历时间是否匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:57:56.007

如`Calendar.HOUR`范围 [0,12) 中所表示的，您需要使用`Calendar.HOUR_OF_DAY`它在类似于`TimePicker.getCurrentHour()`返回范围的 [0,23) 范围内获取它。

```
int calendarHour = calendar.get(Calendar.HOUR_OF_DAY);
int calendarMinute = calendar.get(Calendar.MINUTE);

int timePickerHour = timePicker.getCurrentHour();
int timePickerMinute = timePicker.getCurrentMinute();

if (calendarHour == timePickerHour && calendarMinute == timePickerMinute) {
    // Same 
} 
```

[时间选择器文档](http://developer.android.com/reference/android/widget/TimePicker.html)

# java - 如何将 Java 枚举类型“翻译”为 JRuby 代码？

> ID：15513344
> 
> 赞同：0
> 
> 时间：2013-03-20T00:53:29.960
> 
> 标签：java, enums, jruby, porting

我将如何将这个 Java 代码翻译成 JRuby：

```
enum Note {

    REST, A4, A4$, B4, C4, C4$, D4, D4$, E4, F4, F4$, G4, G4$, A5;
    public static final int SAMPLE_RATE = 16 * 1024; // ~16KHz
    public static final int SECONDS = 2;
    private byte[] sin = new byte[SECONDS * SAMPLE_RATE];

    Note() {
        int n = this.ordinal();
        if (n > 0) {
            double exp = ((double) n - 1) / 12d;
            double f = 440d * Math.pow(2d, exp);
            for (int i = 0; i < sin.length; i++) {
                double period = (double)SAMPLE_RATE / f;
                double angle = 2.0 * Math.PI * i / period;
                sin[i] = (byte)(Math.sin(angle) * 127f);
            }
        }
    }

    public byte[] data() {
        return sin;
    }
} 
```

# wordpress - Wordpress：根据自定义字段显示帖子

> ID：15513349
> 
> 赞同：0
> 
> 时间：2013-03-20T00:53:58.633
> 
> 标签：wordpress

我的主页有一个滑块脚本（wp nivo 滑块），但如果今天的日期早于 post_end_date（自定义字段），则只想显示幻灯片（帖子）。这样我就不必手动删除不再相关的帖子。

这是加载帖子的代码。任何帮助将不胜感激。

自定义帖子字段：**post_end_date**

```
<?php
    $category = get_option('wpns_category');
    $n_slices = get_option('wpns_slices');
?>
<?php query_posts( 'cat='.$category.'&posts_per_page=$n_slices' ); if( have_posts() ) : while( have_posts() ) : the_post(); ?>
    <?php if ( '' != get_the_post_thumbnail() ) : ?>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>">
            <?php the_post_thumbnail(); ?>
        </a>
    <?php endif ?>
<?php endwhile; endif;?>
<?php wp_reset_query();?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:23:44.027

```
 <?php $meta_values = get_post_meta($post_id, $key, $single); ?> 
```

在这个函数中 $postid 是 wich 的 id 正在循环中，关键是最后在 $single 中的自定义字段的名称，您可以写 true 或 false 之后通过此函数获取自定义字段，然后尝试为您自定义 postfeild 值的 if 条件

希望对你有帮助

# ruby - 电子表格宝石：无法创建空工作簿

> ID：15513352
> 
> 赞同：5
> 
> 时间：2013-03-20T00:54:09.897
> 
> 标签：ruby, spreadsheet

我正在使用[https://github.com/zdavatz/spreadsheet](https://github.com/zdavatz/spreadsheet)版本 0.8.3

我有代码迭代一个集合并在同一个工作簿中为每个项目创建一个工作表。当集合为空时，执行的代码最终看起来像：

```
io = StringIO.new
book = Spreadsheet::Workbook.new
book.write(io) 
```

最后一行提出：

```
TypeError: can't convert nil into Integer
    spreadsheet/excel/writer/workbook.rb:636:in `pack'
    spreadsheet/excel/writer/workbook.rb:636:in `write_window1'
    spreadsheet/excel/writer/workbook.rb:419:in `write_from_scratch'
    spreadsheet/excel/writer/workbook.rb:644:in `write_workbook'
    spreadsheet/writer.rb:12:in `write'
    spreadsheet/workbook.rb:124:in `write' 
```

将我的代码更改为此可以解决问题：

```
io = StringIO.new
book = Spreadsheet::Workbook.new
book.create_worksheet if book.worksheets.empty?
book.write(io) 
```

但我宁愿不必包括对`create_worksheet`. 我的问题是：

a）我在我的代码中做错了什么吗？

b）这是 gem 中的错误还是预期的崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:38:39.697

我给项目的维护者发了电子邮件，他们表示这是意料之中的。

# php - PHP MYSQL 使用数组中的值更新多行

> ID：15513353
> 
> 赞同：0
> 
> 时间：2013-03-20T00:54:11.830
> 
> 标签：php, mysql, arrays, mysqli, sql-update

我已经在这个问题上工作了一段时间，我已经被困了几天。我拥有的是一个基本的博客系统，现在我一直在尝试从列表中删除/隐藏帖子。

```
if(isset($_POST['hideBtn']) && isset($_POST['hidePost'])){
   $checked = $_POST['hidePost'];
   print_r($checked);
} elseif(isset($_POST['hideBtn']) && !isset($_POST['hidePost'])){
   echo "Nothing Selected";
} 
```

列表中显示的每个帖子都有一个复选框。

```
<input type="checkbox" name="hidePost[]" value="<?php echo $post_id;?>"> 
```

现在，当我运行上面的脚本并检查 10、8 和 4 后并按下“hideBtn”按钮时，我得到：

> 数组（ [0] => 10 [1] => 8 [1] => 4 ）

这就是我卡住的地方。我正在尝试获取该数组的值并在 MSQL 查询中使用它们来查找我想要隐藏的 post_id：

```
if(isset($_POST['hideBtn']) && isset($_POST['hidePost'])){
   $checked = $_POST['hidePost'];
   print_r($checked);
   $hide_post = 'UPDATE post SET hide_post=1 
                 WHERE post_id IN (' . implode(',', array_map('intval', $checked)) . ')';
   $db->query($hide_post);
} elseif(isset($_POST['hideBtn']) && !isset($_POST['hidePost'])){
   echo "Nothing Selected";
} 
```

这给了我与以前相同的结果：

> 数组（ [0] => 10 [1] => 8 [1] => 4 ）

并且数据库没有变化。

这是数据库表，hide_post 默认为 0：

> post
> post_id user_id 标题正文 hide_post

# 编辑

好吧，看来我的问题是由于一个连接上的数据库查询过多。

这是我在页面顶部包含的内容：

```
<?php

//get record count
$record_count = $db->query("SELECT * FROM post");

//number of posts per page
$per_page = 4;
//number of pages
$pages = ceil($record_count->num_rows/$per_page);

//get page number
if(isset($_GET['p']) && is_numeric($_GET['p'])){
    $page = $_GET['p'];
}else{
    $page = 1;
}

if($page<=0){
    $start = 0;
}else{
    $start = $page * $per_page - $per_page;
}

$prev = $page - 1;
$next = $page + 1;

//get post information from database
$query = $db->prepare("SELECT post_id, title, LEFT(body, 100) AS body, posted, category, user_name FROM post
                        INNER JOIN categories ON categories.category_id=post.category_id 
                        INNER JOIN user ON user.user_id=post.user_id
                        WHERE hide_post = 0
                        order by post_id desc limit $start, $per_page");

$query->execute();
$query->bind_result($post_id, $title, $body, $posted, $category, $user_name);
?> 
```

从我读到的关于我得到的错误的信息中：`Commands out of sync; you can't run this command now`我想我需要使用`mutli_query`或者`$stmt->store_result()`，但这是我第一次使用 php 和 mysql，我不知道如何去做。

# 编辑 2

好吧，我找到了另一种修复它的方法，我所做的只是将隐藏帖子的查询移动到`while()`运行实际获取帖子信息的查询下方。我希望我能早点意识到这一点，呵呵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:29:09.743

事实证明，我的问题不是由查询本身引起的，而是我放置它的地方。

All I had to do to avoid the error: `Commands out of sync; you can't run this command now` was to take my second query that hides/deletes posts, that are selected by the user, and put the query after the `while()` loop that would `fetch()` each post.

Basically I was trying to make a second query before the first query was finished.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-20T01:11:02.533

使用此代码

```
$checked = array ( 0 => 10, 1 => 8, 2 => 4 );
//print_r($checked);
$hide_post = 'UPDATE post SET hide_post=1 
WHERE post_id IN (' . implode(',', array_map('intval', $checked)) . ')';

echo $hide_post; 
```

您的查询变为

```
UPDATE post SET hide_post=1 WHERE post_id IN (10,8,4) 
```

在中运行相同的查询`phpmyadmin`并检查相同的查询是否返回 ant 错误。

# java - 如何在 ResultSet 的映射中存储多个值（超过 2 个），类似于 HashMap？

> ID：15513356
> 
> 赞同：1
> 
> 时间：2013-03-20T00:54:28.783
> 
> 标签：java, sql, database, hashmap, resultset

我是新的 java 和这个网站，以前从来没有在这里问过问题。

我的问题是，我正在尝试编写一种查询数据库的方法，该查询返回 7 列数据，其中包含“X”行和一个主键。我知道使用 HashMap 您可以存储两个值，键和值，但是是否可以获取每行具有两个以上值的 ResultSet 并将其存储在 HashMap 或类似的东西中。我一直在努力在互联网上找到答案。

我正在尝试将此方法用作缓存，以便应用程序不必在每次需要信息时都查询数据库。但我想存储信息，以便当用户搜索键值（例如 customerId）时，我得到与该“customerId”关联的 6 列信息，应用程序只需从“地图”中获取它而不是查询每次数据库。

任何建议都会有所帮助，如果这个问题是重复的，我很抱歉。它似乎经常在这里发生，但我无法找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:58:02.220

您可以将它们封装在一个类中，例如：

```
public Class EncapsulatedVariables {
    String s;
    int i;
    boolean b;
    public EncapsulatedVariables(String s, int i, boolean b) {
        this.s = s;
        this.i = i;
        this.b = b;
    }
} 
```

然后，您可以使用此类的实例作为 a 中的值`HashMap`，并使用您认为合适的方法来检索和/或处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:00:32.297

创建一个客户类来存储您的值。当您遍历结果集时，为每条记录初始化一个新客户，并使用 customerid 作为键将该对象放入哈希图中。您的地图将被初始化为`Map<String,Customer> cache = new HashMap<String,Customer>();`

# c# - 如何在 C# 中绘制图像

> ID：15513357
> 
> 赞同：0
> 
> 时间：2013-03-20T00:54:30.457
> 
> 标签：c#, wpf, image

在带有 WPF 的 C# 中，如何绘制`Image`? 我尝试过在线搜索，但我似乎找到的所有教程都涉及绘制形状或设置背景`Image`。

我有兴趣尝试创建一个国际象棋程序。我将棋盘设置为背景`Image`，但不知道如何为棋子绘制图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T01:54:11.067

好的，这是我对棋盘的看法：

```
<Window x:Class="MiscSamples.ChessBoard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MiscSamples"
        Title="ChessBoard" Height="300" Width="300">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:ChessPiece}">
            <Image Source="{Binding ImageSource}"/>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <UniformGrid Rows="8" Columns="8" Opacity=".5">
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>

            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>

            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>

            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>

            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>

            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>

            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>

            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>
            <Rectangle Fill="Black"/>
            <Rectangle Fill="White"/>

        </UniformGrid>

        <ItemsControl ItemsSource="{Binding}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid IsItemsHost="True">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="Grid.Row" Value="{Binding Row}"/>
                    <Setter Property="Grid.Column" Value="{Binding Column}"/>
                </Style>
            </ItemsControl.ItemContainerStyle>
        </ItemsControl>
    </Grid>
</Window> 
```

代码背后：

```
using System.Linq;
using System.Windows;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace MiscSamples
{
    public partial class ChessBoard : Window
    {
        public ObservableCollection<ChessPiece> Pieces { get; set; }

        public ChessBoard()
        {
            Pieces = new ObservableCollection<ChessPiece>();
            InitializeComponent();
            DataContext = Pieces;
            NewGame();
        }

        private void NewGame()
        {
            Pieces.Clear();
            Pieces.Add(new ChessPiece() { Row = 0, Column = 0, Type = ChessPieceTypes.Tower, IsBlack = true});
            Pieces.Add(new ChessPiece() { Row = 0, Column = 1, Type = ChessPieceTypes.Knight, IsBlack = true });
            Pieces.Add(new ChessPiece() { Row = 0, Column = 2, Type = ChessPieceTypes.Bishop, IsBlack = true });
            Pieces.Add(new ChessPiece() { Row = 0, Column = 3, Type = ChessPieceTypes.Queen, IsBlack = true });
            Pieces.Add(new ChessPiece() { Row = 0, Column = 4, Type = ChessPieceTypes.King, IsBlack = true });
            Pieces.Add(new ChessPiece() { Row = 0, Column = 5, Type = ChessPieceTypes.Bishop, IsBlack = true });
            Pieces.Add(new ChessPiece() { Row = 0, Column = 6, Type = ChessPieceTypes.Knight, IsBlack = true });
            Pieces.Add(new ChessPiece() { Row = 0, Column = 7, Type = ChessPieceTypes.Tower, IsBlack = true });

            Enumerable.Range(0, 8).Select(x => new ChessPiece()
                {
                    Row = 1, 
                    Column = x, 
                    IsBlack = true, 
                    Type = ChessPieceTypes.Pawn
                }).ToList().ForEach(Pieces.Add);

            Pieces.Add(new ChessPiece() { Row = 7, Column = 0, Type = ChessPieceTypes.Tower, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 1, Type = ChessPieceTypes.Knight, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 2, Type = ChessPieceTypes.Bishop, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 3, Type = ChessPieceTypes.Queen, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 4, Type = ChessPieceTypes.King, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 5, Type = ChessPieceTypes.Bishop, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 6, Type = ChessPieceTypes.Knight, IsBlack = false });
            Pieces.Add(new ChessPiece() { Row = 7, Column = 7, Type = ChessPieceTypes.Tower, IsBlack = false });

            Enumerable.Range(0, 8).Select(x => new ChessPiece()
            {
                Row = 6,
                Column = x,
                IsBlack = false,
                Type = ChessPieceTypes.Pawn
            }).ToList().ForEach(Pieces.Add);

        }
    } 
```

视图模型：

```
 public class ChessPiece: INotifyPropertyChanged
    {
        public bool IsBlack { get; set; }

        public ChessPieceTypes Type { get; set; }

        private int _row;
        public int Row
        {
            get { return _row; }
            set
            {
                _row = value;
                OnPropertyChanged("Row");
            }
        }

        private int _column;
        public int Column
        {
            get { return _column; }
            set
            {
                _column = value;
                OnPropertyChanged("Column");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }

        public string ImageSource 
        {
            get { return "../ChessPieces/" + (IsBlack ? "Black" : "White") + Type.ToString() + ".png"; }
        }
    }

    public enum ChessPieceTypes
    {
        Pawn,
        Tower,
        Knight,
        Bishop,
        Queen,
        King,
    }
} 
```

这是它在我的电脑中的样子：

![在此处输入图像描述](../Images/553923eaf6c55d48b44bd7513f441dcb.png)

请注意，我使用纯 XAML 来创建 UI。我绝不会在代码中创建或操作 UI 元素。WPF 不需要，也不推荐。

WPF 的推荐方法是使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)并了解[UI 不是数据](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)

您可以将我的代码复制并粘贴到 a 中`File -> New Project -> WPF Application`，然后自己查看结果。您将需要以下项目结构：

![在此处输入图像描述](../Images/ba6fa84b33f477341e78fc3752756ab0.png)

另请注意，图像文件需要设置为`Build Action: Resource`.

**请记住：这是 WPF 的`EVERYTHING`**. 您很少需要在 WPF 中的代码中操作 UI 元素，或者执行诸如绘图之类的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:22:55.113

这取决于你想怎么画我通常使用位图，这就是我这样做的方式。

```
//Initialize image and stuff
int Width = 100;
int Height = 100;
int nStride = (Width * PixelFormats.Bgra32.BitsPerPixel + 7) / 8;
Int32Rect ImageDimentions = new Int32Rect(0, 0, Width, Height);
int[] ImageArr = new ImageArr[Height * nStride];

//Manually paint your image
for (int Y = 0; Y < Height; Y++)
{
    for (int X = 0; X < Width; X++)
    {
       //X and Y means pixel(X,Y) in cartesian plane 1 quadrant mirrored around X axis
       //Down is the Y from 0 to height, and right to left is X from 0 to width
       int index = (Y * Width + X) * 4;
       ImageArr[index + 0] = (byte)0;   //Blue
       ImageArr[index + 1] = (byte)0;   //Green
       ImageArr[index + 2] = (byte)0;   //Red
       ImageArr[index + 3] = (byte)255; //Alpha
    }
}

//Push your data to a Bitmap
WriteableBitmap BmpToWriteOn = new WriteableBitmap(Width, Height, 96, 96, PixelFormats.Bgra32, null);
BmpToWriteOn.WritePixels(ImageDimentions, ImageArr, nStride, 0, 0);     

//Push your bitmap to Xaml Image
YourXamlImage.Source = BmpToWriteOn; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:57:59.223

对于位图，您可以使用`BitmapImage`：

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx)

# c# - 如何将列表视图中的项目保存到访问数据库？

> ID：15513359
> 
> 赞同：0
> 
> 时间：2013-03-20T00:54:45.683
> 
> 标签：c#, winforms, listview, ms-access, windows-forms-designer

如何将列表视图项保存在访问数据库中？我做了研究，但我找不到正确的答案。谁能帮我？

我的列表视图有以下列：ItemID、ItemName、Price、Quantity、TotalPrice，并且我的访问数据库具有相同的列数和名称。我想将列表视图中的所有数据保存到访问数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:57:28.800

来自[http://www.csharpfriends.com/Forums/ShowPost.aspx?PostID=79222](http://www.csharpfriends.com/Forums/ShowPost.aspx?PostID=79222)：

要阅读 listview，您应该执行以下操作：

```
void LoadListView() 
{ 
    DataSet ds = new DataSet(); 
    System.Data.OleDb.OleDbConnection con = 
        new System.Data.OleDb.OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;Data Source=C:\accessItems.mdb;");
    System.Data.OleDb.OleDbDataAdapter adpt = 
        new System.Data.OleDb.OleDbDataAdapter("select * from Items", con); 
    adpt.Fill(ds); 
    DataTable table = ds.Tables[0]; 
    this.listView1.Items.Clear(); 
    foreach(DataRow r in table.Rows) 
        this.listView1.Items.Add(
            new ListViewItem(r["Value"].ToString()));//value is the field of name value 
} 
```

要在列表视图中写入新项目，请执行以下操作：

```
void SaveItem(ListViewItem item) 
{ 
    DataSet ds = new DataSet(); 
    System.Data.OleDb.OleDbConnection con = 
        new System.Data.OleDb.OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;Data Source=C:\accessItems.mdb;"); 
    System.Data.OleDb.OleDbCommand cmd = 
        new System.Data.OleDb.OleDbCommand("insert into Items(Value) values(" + item.Text + ")", con); 
    con.Open(); 
    cmd.ExecuteNonQuery(); 
    con.Close(); 
} 
```

# java - 在没有使用 Asterisk 的 Java API 打开通道的情况下，如何获取与扩展/对等点关联的名称？

> ID：15513364
> 
> 赞同：1
> 
> 时间：2013-03-20T00:55:02.203
> 
> 标签：java, asterisk, pbx

我将 FreePBX 与[Asterisk 的 Java API](http://www.asterisk-java.org/development/apidocs/index.html)一起使用。目前，我能够显示我所有的 SIP 对等体及其各自的状态：

```
public void onManagerEvent(ManagerEvent event) 
{
    // Look if the event is a IP phone (Peer entry)
    if(event instanceof PeerEntryEvent)
    {
        PeerEntryEvent ev = (PeerEntryEvent)event;
        // Get the user extension
        peer = ev.getObjectName();
        // Add to the array
        peersName.add(peer);
    }
} 
```

![在此处输入图像描述](../Images/98ae4115651f84f4f830dd22e8f68a59.png)

当频道打开时，我可以显示两个呼叫者的电话号码和姓名：

```
private String GetExtensionPeer(String extension)
{
    for (AsteriskChannel e : channels)
        if (e.number.equals(extension) && e.bridge != null )
            for (AsteriskChannel channel : channels)
                if (z.channel.equals(e.bridge))
                   return "       with " + channel.number + " - " + channel.name;
    return "";
} 
```

![在此处输入图像描述](../Images/aae490b6422e51d24505905d2e628160.png)

但是现在，我想在没有通道连接的情况下显示我的扩展名。

在 FreePBX 的面板中，它看起来像：

![在此处输入图像描述](../Images/99855dafa7ecf2b01cb9e11fb2085be7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:52:48.663

在 freepbx 中，您可以从星号 db 获取扩展列表。要查看信息，请执行

> asterisk -rx "数据库显示"

要获取信息，请使用带有 DBGET 的管理器操作“命令”。

其他选项 - 从 freepbx 的 mysql db 获取该信息。

# django - django最佳实践查询外键

> ID：15513369
> 
> 赞同：0
> 
> 时间：2013-03-20T00:55:59.240
> 
> 标签：django

我试图了解在 django 中构造查询以避免过多的数据库命中的最佳方法。
这类似于问题：[Django best practice with foreign key queries](https://stackoverflow.com/questions/5030131/django-best-practice-with-foreign-key-queries)，但在查询中涉及更大的“深度”。

我的情况：models.py

```
class Bucket(models.Model):
    categories = models.ManyToManyField('Category')

class Category(models.Model):
    name = models.CharField(max_length=50)

class SubCategory(models.Model):
    category = models.ForeignKey(Category)

class SubSubCategory(models.Model):
    subcat = models.ForeignKey(SubCategory) 
```

视图.py

```
def showbucket(request, id):
    bucket = Bucket.objects.prefetch_related('categories',).get(pk=id)
    cats = bucket.categories.prefetch_related('subcategory_set__subsubcategory_set',)
    return render_to_response('showbucket.html', locals(), context_instance=RequestContext(request)) 
```

和相关模板：

```
{% for c in cats %}
    {{c}}
    <ul>
    {% for d in c.subcategory_set.all %}
        <li>{{d}}</li>
        <ul>
        {% for e in d.subsubcategory_set.all %}
            <li>{{e}}</li>
        {% endfor %}
        </ul>
    {% endfor %}
    </ul>
{% endfor %} 
```

尽管使用了 prefetch_related()，但每次评估前两个 for 语句时，我似乎都在访问数据库，例如 {% for c in cats %}，（至少我从阅读 debug_toolbar 中相信如此）。我尝试过的其他方法以 (C x D x E) 数量的数据库命中而告终。这是我使用预取、查询或模型的固有问题吗？可以说，Django 访问具有“深度> 1”的数据库对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:11:55.653

使用 select_related() 代替：

[https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related)

```
bucket = Bucket.objects.select_related('categories',).get(id=id)
cats = bucket.categories.select_related('subcategory_set__subsubcategory_set',) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:07:18.123

所以，我发现这里发生了一些事情：

首先，我目前对 select_related 与 prefetch_related 的理解：

[select_related()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)遵循外键关系，导致更大的结果集，但意味着以后使用 FK 不需要额外的数据库命中。它仅限于 FK 和一对一关系。

prefetch_related() 对每个关系进行单独的查找并将它们连接到 python 中，并且是用于多对多、多对一以及 GenericRelation 和 GenericForeignKey 的方法。

按照书，我应该使用 prefetch()，因为我没有“遵循”外键。这就是我对此的理解，但是在评估模板中给定的 for 循环时，我的模板似乎引起了额外的查询，即使我添加了 {with} 标记的使用。

起初，我以为我发现了与[这个问题](https://github.com/django-debug-toolbar/django-debug-toolbar/issues/187)类似的东西，但是当我构建我的简化示例时，我无法复制。我从使用调试工具栏切换到使用以下模板代码直接检查（在 Karen Tracey 的文章 Tracking SQL Queries for a Request using Django 中，我会链接但链接受限）：

```
{% with sql_queries|length as qcount %}
{{ qcount }} quer{{ qcount|pluralize:"y,ies" }}
{% for qdict in sql_queries %}
{{ qdict.sql }} ({{ qdict.time }} seconds)
{% endfor %}
{% endwith %} 
```

使用这种方法，我只看到使用 pre-fetch() 的 5 个查询（使用 debug_toolbar 的 7 个），并且在使用 select_related() 时查询线性增长（对于 debug_toolbar 使用 +2），我相信这是预期的。

我很乐意采用任何其他建议/工具来处理这些类型的问题。

# jquery - jQuery post ajax 函数

> ID：15513370
> 
> 赞同：0
> 
> 时间：2013-03-20T00:55:59.413
> 
> 标签：jquery, ajax, post

如何从多个选择框中获取选定的变量然后`$.post`向服务器发出请求？

我看到 jQuery 文档下有一个数据输入，它说类型是对象或字符串，但我似乎无法弄清楚如何通过 jQuery 转换从多选框中检索到的选定值，添加另一个名为 {check_industry 的字段和值: "1"} 然后将其添加为下面的数据 {这里}

```
$.post("/get-tree", {here},
                 function(data) {
                   console.log(data);
                 }, 
                 "html"
                ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:08:55.993

扩展@clav 以限制仅选择一项感兴趣的项目：

```
$.post("/get-tree", 
    { check_industry: $('#idOfSelectBox').val() },
    function(data) {
        console.log(data);
    }, 
    "html"
); 
```

# twitter-oauth - https://api.twitter.com/oauth/request_token 在 Blackberry Native SDK 中失败

> ID：15513373
> 
> 赞同：1
> 
> 时间：2013-03-20T00:56:09.650
> 
> 标签：twitter-oauth, blackberry-cascades

我正在尝试通过 oAuth 连接到 Twitter。我正在向 API [https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token)发出 POST 请求。

这是我的基本签名字符串的示例

```
POST&https%3A%2F%2Fapi.twitter.com%2Foauth%2Frequest_token&oauth_callback%3Dhttp%253A%252F%252Fapi.ec2.phunware.com%252Fapi%252Ftwitter%26oauth_consumer_key%3D6jq5dNZcccoPbApAJ0sOaA%26oauth_nonce%3DN2ZiMjViYzhlMDUxNDIyZWIwYjQ4NmU0ZjM1MDg4NTY%3D%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1362843354%26oauth_version%3D1.0 
```

我使用工具[http://quonos.nl/oauthTester/](http://quonos.nl/oauthTester/)来验证我的基本签名。

这是对应的标题

```
OAuth oauth_callback="http%3A%2F%2Fapi.ec2.phunware.com%2Fapi%2Ftwitter",oauth_consumer_key="6jq5dNZcccoPbApAJ0sOaA",oauth_nonce="N2ZiMjViYzhlMDUxNDIyZWIwYjQ4NmU0ZjM1MDg4NTY=",oauth_signature_method="HMAC-SHA1",oauth_signature="7ney2RxElbHUl2t1Jnz57pQpmFs%3D",oauth_timestamp="1362843354",oauth_version="1.0" 
```

我在我的 MAC 终端中尝试了以下命令

```
curl --request 'POST' 'https://api.twitter.com/oauth/request_token' --header 'Authorization: OAuth oauth_callback="http%3A%2F%2Fapi.ec2.phunware.com%2Fapi%2Ftwitter",oauth_consumer_key="6jq5dNZcccoPbApAJ0sOaA",oauth_nonce="N2ZiMjViYzhlMDUxNDIyZWIwYjQ4NmU0ZjM1MDg4NTY=",oauth_signature_method="HMAC-SHA1",oauth_signature="7ney2RxElbHUl2t1Jnz57pQpmFs%3D",oauth_timestamp="1362843354",oauth_version="1.0"' --verbose 
```

我得到 401 未经授权的错误。我试图设置 oauth_callback ="oob" 但我仍然得到同样的错误。

请帮忙。我正在使用 Blackberry Native SDK 进行编码。我在这里粘贴代码。通过 Blackberry 10.1 Simulator 尝试时出现 204 错误。

```
QByteArray Twitter::generateTimeStamp()
{
   QDateTime current = QDateTime::currentDateTime();
   uint seconds = current.toTime_t();
   return QString::number(seconds,10).toUtf8();
}

QByteArray Twitter::generateNonce()
{
    QString nonce = QUuid::createUuid().toString();
    nonce.remove(QRegExp("[^a-zA-Z\\d\\s]"));
    qDebug()<< nonce.toUtf8();
    return nonce.toUtf8().toBase64();
}

QByteArray Twitter::generateSignatureBase(const QUrl& url, HttpMethod method, const QByteArray& timestamp, const QByteArray& nonce,bool addCallbackURL)
{
    QList<QPair<QByteArray, QByteArray> > urlParameters = url.encodedQueryItems();
    QList<QByteArray> normParameters;

    QListIterator<QPair<QByteArray, QByteArray> > i(urlParameters);
    while(i.hasNext()){
            QPair<QByteArray, QByteArray> queryItem = i.next();
            QByteArray normItem = queryItem.first + '=' + queryItem.second;
            normParameters.append(normItem);
    }

    //consumer key
    normParameters.append(QByteArray("oauth_consumer_key=") + consumer->consumerKey());

    //token
    if(accessToken != NULL){
            normParameters.append(QByteArray("oauth_token=") + accessToken->oauthToken());
    }

    //signature method, only HMAC_SHA1
    normParameters.append(QByteArray("oauth_signature_method=HMAC-SHA1"));
    //time stamp
    normParameters.append(QByteArray("oauth_timestamp=") + timestamp);
    //nonce
    normParameters.append(QByteArray("oauth_nonce=") + nonce);
    //version
    normParameters.append(QByteArray("oauth_version=1.0"));

    //callback url
    if(addCallbackURL)
        normParameters.append(QByteArray("oauth_callback=") + QByteArray(CALLBACK_URL).toPercentEncoding());

    //OAuth spec. 9.1.1.1
    qSort(normParameters);
    qDebug()<<normParameters;
    QByteArray normString;
    QListIterator<QByteArray> j(normParameters);
    while (j.hasNext()) {
        normString += j.next().toPercentEncoding();
        normString += "%26";
    }
    normString.chop(3);
    qDebug()<<normString;
    //OAuth spec. 9.1.2
    QString urlScheme = url.scheme();
    QString urlPath = url.path();
    QString urlHost = url.host();
    QByteArray normUrl = urlScheme.toUtf8() + "://" + urlHost.toUtf8() + urlPath.toUtf8();

    QByteArray httpm;

    switch (method)
    {
        case GET:
                httpm = "GET";
                break;
        case POST:
                httpm = "POST";
                break;
        case DELETE:
                httpm = "DELETE";
                break;
        case PUT:
                httpm = "PUT";
                break;
    }
    qDebug()<<"signature base="<<httpm + '&' + normUrl.toPercentEncoding() + '&' + normString;
    //OAuth spec. 9.1.3
    return httpm + '&' + normUrl.toPercentEncoding() + '&' + normString;
}

QByteArray Twitter::generateAuthorizationHeader( const QUrl& url, HttpMethod method,bool addCallbackURL )
{
    QByteArray timeStamp = generateTimeStamp();
    QByteArray nonce = generateNonce();

    QByteArray baseString = generateSignatureBase(url, method, timeStamp, nonce,addCallbackURL);
    QByteArray key = consumer->consumerSecret() + '&';
    if(accessToken != NULL)
        key = key + accessToken->oauthTokenSecret();
    QByteArray signature =  HMACSH1::hmacSha1(key,baseString).toPercentEncoding();
    QByteArray header;
    header += "OAuth ";
    if(addCallbackURL)
        header += "oauth_callback=\"" + QByteArray(CALLBACK_URL).toPercentEncoding() + "\",";
    header += "oauth_consumer_key=\"" + consumer->consumerKey() + "\",";
    header += "oauth_nonce=\"" + nonce + "\",";
    header += "oauth_signature_method=\"HMAC-SHA1\",";
    header += "oauth_signature=\"" + signature + "\",";
    header += "oauth_timestamp=\"" + timeStamp + "\",";
    if(accessToken != NULL)
           header += "oauth_token=\"" + accessToken->oauthToken() + "\",";
    header += "oauth_version=\"1.0\"";
    qDebug()<<"header =" <<header;
    return header;
}

void Twitter::requestForToken()
{
    QUrl url(TWITTER_REQUEST_TOKEN_URL);
    QByteArray oauthHeader = generateAuthorizationHeader(url, POST,true);

    QNetworkRequest req(url);
    req.setRawHeader("Authorization", oauthHeader);
    req.setHeader(QNetworkRequest::ContentTypeHeader, "application/x-www-form-urlencoded");
    req.setHeader(QNetworkRequest::ContentLengthHeader,"0");

    QNetworkReply *reply = networkAccessManager->post(req, QByteArray());
    connect(networkAccessManager, SIGNAL(finished ( QNetworkReply*)), this, SLOT(tokenFetchSuccessfull(QNetworkReply*)));
    connect(reply, SIGNAL(error(QNetworkReply::NetworkError)), this, SLOT(tokenFetchFailed(QNetworkReply::NetworkError)));
    qDebug()<<"Request For Token";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:40:52.590

您提到您使用的是 Native SDK，您是否也在使用 Cascades？如果是这样，使用GitHub中的[bb-cascades-oauth库可能会更好。](https://github.com/blackberry/bb-cascades-oauth)它内置了对 OAuth1 和 OAuth2 的支持。

[此外，根据此处](https://dev.twitter.com/discussions/204)找到的提示，时间戳不正确似乎是一个常见问题，因此请确保您的模拟器具有正确的日期和时间。

[此处](https://dev.twitter.com/discussions/3459)的另一位开发人员发现[http://quonos.nl/oauthTester/](http://quonos.nl/oauthTester/)需要一个不正确的双转义标头，并在发出实际身份验证请求时导致 401 错误。我注意到您使用了相同的测试器，并且在上面的基本签名字符串中也有双重转义，所以您可能想尝试不使用双重转义。

# wordpress - Wordpress 页面主题/布局

> ID：15513375
> 
> 赞同：1
> 
> 时间：2013-03-20T00:56:18.820
> 
> 标签：wordpress, wordpress-theming

我想知道我是否可以为每个页面设置不同的布局和内容？例如，我有 4 个页面，我有 4 个完全不同的布局设计，我是否需要制作 4 个主题然后应用到不同的页面或其他什么？

此外，我可以在不同的页面上显示不同的帖子吗？像第 1 号帖子/或标签 [google] 转到第 1 页，第 5 号帖子/标签 [橙色] 转到第 3 页？

我想学习如何构建这个想法。非常感谢

![在此处输入图像描述](../Images/01425c536c3f5108af588c744e1e1c31.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:33:40.177

为不同的页面制作不同的模板，以在每个页面上显示不同的设计

用于制作模板创建普通 php 文件并在文件顶部通过替换模板名称添加每个模板的代码

```
<?php
/*
Template Name:About Us

 */

  ?> 
```

通过这种方式，您将获得关于我们的不同模板，将您想要在此页面显示的代码设计，然后从该后端从 rignt 手边选项中选择模板并保存该页面。

并且要在不同的页面上显示不同的帖子，您需要在要调用页面的帖子之后创建类别，调用该类别的代码

```
<?php Query_post('cat=3&showposts');
      while(have_posts()): the_post();
           the_title();
       endwhile; wp_reset_query(); ?> every time  on different page you just chage the category id   (cat) 
```

# java - 如何通过单击按钮打开新窗口

> ID：15513380
> 
> 赞同：15
> 
> 时间：2013-03-20T00:56:50.003
> 
> 标签：java, swing, jframe, jbutton, actionlistener

作为我程序的一部分，我需要一个按钮，当用户单击它时，它会打开一个新窗口。

好吧，我想我应该有一个类来制作框架并通过按钮调用它。但我不知道要开始。我刚刚在程序中获得了我的按钮，但它不起作用。那么有人可以告诉我该怎么做吗？或编码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T01:00:00.133

这是您要执行的操作的简化版本：

```
JButton button = new JButton("New Frame");
button.addActionListener( new ActionActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        // Create a method named "createFrame()", and set up an new frame there
        // Call createFrame()
    }
}); 
```

您可能希望在`ActionListener`而不是在`frame`on中调用一些方法`actionPerformed`。也许是这样的：

```
public static void createFrame()
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                try 
                {
                   UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                   e.printStackTrace();
                }
                JPanel panel = new JPanel();
                panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
                panel.setOpaque(true);
                JTextArea textArea = new JTextArea(15, 50);
                textArea.setWrapStyleWord(true);
                textArea.setEditable(false);
                textArea.setFont(Font.getFont(Font.SANS_SERIF));
                JScrollPane scroller = new JScrollPane(textArea);
                scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
                scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
                JPanel inputpanel = new JPanel();
                inputpanel.setLayout(new FlowLayout());
                JTextField input = new JTextField(20);
                JButton button = new JButton("Enter");
                DefaultCaret caret = (DefaultCaret) textArea.getCaret();
                caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
                panel.add(scroller);
                inputpanel.add(input);
                inputpanel.add(button);
                panel.add(inputpanel);
                frame.getContentPane().add(BorderLayout.CENTER, panel);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
                frame.setResizable(false);
                input.requestFocus();
            }
        });
    } 
```

该框架应该是什么样子：

![在此处输入图像描述](../Images/d71c7b8d00f8fe6a9393d56ffca3f543.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T11:12:56.403

```
new CLASS_NAME().setVisible(true); 
```

例如。新的 NewJFrame().setVisible(true);

# oracle11g - 远程访问Oracle 11g数据库，windows xp server

> ID：15513381
> 
> 赞同：1
> 
> 时间：2013-03-20T00:57:18.810
> 
> 标签：oracle11g, remote-access

几个小时以来，我一直在为此苦苦挣扎。我是 Oracle DB 11g 的新手，它对我来说真的很复杂 :)。

我已经安装它并且它工作正常。使用 SQL Developer 我可以在 localhost 上连接，但它不能在其他机器上工作。

**我必须使用普通主机 - 用户/密码访问。**

我正在尝试**使用 EM 进行编辑**，因为我不想搞砸。我已将其设置为远程工作。现在......我试图配置监听器来监听我的（甚至）内部网络IP。但它不起作用。我听说过编辑 TNSNAMES.ORA，但我在 EM 中找不到它们。

请问有什么帮助吗？我该怎么办，我完全糊涂了，我一直得到

> 网络适​​配器无法建立连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:12:54.033

在 network/admin 文件夹下的 listner.ora 文件中，更改 `HOST = localhost`为`HOST = ComputerName`.

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:34:13.857

使用**netca**工具配置 listener.ora 和 tnsnames.ora 文件。

确保侦听器已启动。使用**tnsping**工具测试连通性。

确保在对 listener.ora 进行任何更改后反弹侦听器。转到 Windows**服务**以重新启动侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T16:46:01.487

终于找到了更简单的解决方案。

使用 Oracle Net Manager 并在同一端口上的 IP（机器）上添加侦听器。重新启动，它工作。

它与 Venu 的解决方案相同，但更简单。

# javascript - Node.js - 在回调之间管理 javascript 范围的更好方法？

> ID：15513382
> 
> 赞同：2
> 
> 时间：2013-03-20T00:57:28.703
> 
> 标签：javascript, node.js, oop, events, callback

我正在使用 Node.JS，并且有两个对象可以通过回调在它们之间移动。我想出了一个解决方案来维护对正确对象的范围引用。我试图弄清楚是否有更好的方法来做到这一点，或者这是否是一种好的做法。

```
function Worker () {}

Worker.prototype.receiveJob = function(callback, bossReference) {
  this.doJob(callback, bossReference);
};

Worker.prototype.doJob = function(callback, bossReference) {
  callback.call(bossReference);
  // callback(); // this will not work
};

function Boss () {
  this.worker = new Worker();
}

Boss.prototype.delegateJob = function() {
  this.worker.receiveJob(this.whenJobCompleted, this);
};

Boss.prototype.whenJobCompleted = function() {
  this.sayGoodJob();
};

Boss.prototype.sayGoodJob = function() {
  console.log('Good job');
};

var boss = new Boss();
boss.delegateJob(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:38:53.993

采用`Function.prototype.bind()`

```
function Worker () {}

Worker.prototype.receiveJob = function(callback) {
  this.doJob(callback);
};

Worker.prototype.doJob = function(callback) {
  callback()
};

function Boss () {
  this.worker = new Worker();
}

Boss.prototype.delegateJob = function() {
  this.worker.receiveJob(this.whenJobCompleted.bind(this));
};

Boss.prototype.whenJobCompleted = function() {
  this.sayGoodJob();
};

Boss.prototype.sayGoodJob = function() {
  console.log('Good job');
};

var boss = new Boss();
boss.delegateJob(); 
```

`bossReference`除非您在函数中需要它，否则您将不再需要那些愚蠢的 s

# ios - NSMutableArray 到 UITableView

> ID：15513384
> 
> 赞同：0
> 
> 时间：2013-03-20T00:57:37.103
> 
> 标签：ios, objective-c, uitableview

这可能是一个愚蠢的问题，但我是 iPhone 开发的新手，无论如何我有一个`NSMutableArray`从服务器加载的信息。我试图把这些信息放在一张桌子上。我四处寻找有关如何执行此操作的一些想法，然后遇到了很多人似乎为了执行此操作而使用的这段代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [myArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath           *)indexPath
  {
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

if (!cell) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"] autorelease];
}

cell.textLabel.text = [myArray objectAtIndex:[indexPath row]];
NSLog(@"Cell is %@", [myArray objectAtIndex:indexPath.row]);
return cell; 
```

}

现在我的问题在 if 语句中，它给了我两个关于 autorelease 的错误：在引用计数模式下不可用且不可用，并且 arc 禁止发送 autorelease 的消息，有什么想法吗？谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:00:00.587

您拥有的代码是较旧的代码，仅适用于手动引用计数 (MRC)。较新的项目默认使用自动引用计数 (ARC)。只需删除对的呼叫`autorelease`，您就会没事的。

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:00:33.160

您正在使用自动引用计数，它会为您处理内存管理（大部分情况下）。删除所有对手动内存管理的引用，例如`autorelease`(and `retain`, `release`, 等)，应用程序将构建。在下面使用这个：

```
if (!cell) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T03:25:23.820

这是一个简单的教程链接，用于将 NSMutableArray 添加到 tableView...[简单教程链接](http://www.theappcodeblog.com/2011/02/21/table-view-tutorial-part-2-populate-a-table-view-with-an-nsmutablearray/)..希望它对您有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T01:39:39.973

这也可以使用免费提供的 Sensible TableView 框架轻松完成。他们有一个叫做 ArrayOfObjectsSection 的东西，你只需将 NSArray 传递给它，它就会自动显示它，以及许多其他东西（包括为你做服务器获取）。

# java - 服务器端共享会话的场景是什么？

> ID：15513388
> 
> 赞同：1
> 
> 时间：2013-03-20T00:58:00.183
> 
> 标签：java, session, jakarta-ee

服务器端共享会话的场景是什么？是否有一些方法可以在 JAVA EE 平台的服务器端共享会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:46:11.963

在 Java EE 上，您必须查看 Servlet 规范，对象 HttpSession 提供了在服务器端管理会话的行为。

[http://docs.oracle.com/javaee/5/tutorial/doc/bnagm.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnagm.html)

尽管您可以在会话中存储任何对象，但这种做法可能很危险，因为对象会一直保留在会话中，直到会话过期或对象被删除，因此如果您的程序不能很好地管理存储在会话中的对象，您可以使用到许多堆内存。

session的对象在过期时被删除，过期时间在部署描述符web.xml中配置，也可以由客户端设置。如果您未指定会话到期时间，则默认值为 30 分钟，这 30 分钟从用户发出的最后一次请求开始计算。

我的建议是不要在会话中存储对象，必须使用对象 HttpServletRequest 以及方法 setAttribute 和 getAttribute 在请求之间传递对象。我需要在会话中存储一个值，您可以存储产品的 ID 而不是整个产品。会话的一个常见用途是存储变量，这些变量必须超过一个请求，并且出于安全原因您不想将其存储在 cockles 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:59:01.037

由于问题没有明确说明需要在哪个会话之间共享对象，我可以建议以下选项：

1）如果您需要在同一服务器（tomcat）上的不同Web应用程序之间共享会话，您可以使用：

```
<Host name="localhost" ...>
  <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
</Host> 
```

2）如果服务器不是tomcat，请参考相应服务器的SSO选项。

3) 您也可以使用成熟的 SSO 产品，例如 CAS ( [http://www.jasig.org/cas](http://www.jasig.org/cas) )，它允许您跨不同服务器的应用程序共享会话，但不能在用户之间共享会话。

4）如果您需要在不同用户之间共享会话，您需要做的就是根据您的共享标准在不同客户端（通常是浏览器）之间传递会话 ID，例如玩相同游戏的人，访问相同的公告板并可以协作更改数据。但是，请理解大多数安全基础设施都是围绕会话 ID 的映射构建的。如果您选择让会话 id 在多个用户之间显式访问，您将不得不自己重新创建许多安全过滤器。

5）或者，最好的方法是管理对象的状态与会话不同。共享对象的状态可以以更符合标准的安全和可审计的方式在多个会话中共享。

# ruby-on-rails - Rails - 在不同的控制器/模型中创建和编辑

> ID：15513389
> 
> 赞同：3
> 
> 时间：2013-03-20T00:58:01.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一个嵌套评论模型，它与专业、职业和学校有多态关联。我希望用户在他们的展示页面上查看这些专业、学校和职业。此外，我希望他们看到他们在个人资料页面上所做的所有评论。

我可以显示评论，但我无法添加、编辑和删除它们，因为我希望他们能够在他们在专业、学校、职业或个人资料页面上看到他们的评论时执行这些操作。

这是我的路线：

```
resources :majors, :schools, :careers do 
  resources :reviews
end 
```

以下是我的联想：

Major.rb、School.rb、Career.rb

> has_many :reviews, as :reviewable

评论.rb

```
belongs_to :user
belongs_to :reviewable, polymorphic: true 
```

用户.rb

> has_many :评论

这是我的reviews_controller.rb：

```
before_filter :reviewable

def index
  @reviews = @reviewable.reviews
  @major = Major.includes(:reviews => :user).find_by_slug(params[:id])
end

def show
  @review = @reviewable.reviews.find(params[:id])
end

def new
  @review = @reviewable.reviews.build
  @review.user = current_user
end

def edit
  @review = @reviewable.reviews.find(params[:id])
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end

def create
  @review = @reviewable.reviews.build(params[:review])
  @review.user = current_user
  @reviews = @reviewable.reviews
end

def destroy
  @review = @reviewable.reviews.find(params[:id])
  @review.destroy
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end

def reviewable
  @reviewable = if params[:major_id]
    Major.find_by_slug!(params[:major_id])
   elsif params[:school_id]
    School.find(params[:school_id])
   elsif params[:career_id]
    Career.find(params[:career_id])
  end
end 
```

例如，为了创建、查看和编辑专业的评论，他们将在主要节目页面上进行。这就是我在 majors_controller.rb 上的内容：

```
def show
  @reviews = Review.includes(:user)
  @reviews_most_liked = Review.order("created_at DESC").limit(4)
end 
```

我正在努力做到这一点，以便他们可以从专业、学校和职业展示页面内的模式窗口中添加和编辑。这是我在模态窗口中的内容：

```
<%= simple_form_for([@reviewable, @review]) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :review %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:33:17.243

我想到了。问题在于使用正确的操作和控制器映射正确的实例变量。大多数实例变量都放在我的majors_controller.rb、school_controller.rb 和careers_controller.rb 中显示动作。这是我的 majors_controller.rb***显示动作***的一部分——我错误地将它们放在创建动作和删除动作中。但是，一旦我坐下来想一想，我意识到这一切都发生在展示页面中。这是我的模型控制器的样子：

```
def show
    @reviewable = @major
    @reviews = @reviewable.reviews #show reviews
    @reviews_most_liked = @reviewable.reviews.order("created_at DESC").limit(2)
    @reviews_most_liked_2 = @reviewable.reviews.order("created_at DESC").limit(2).offset(2)
    @review = @reviewable.reviews.build(params[:review]) #create a review
    @review.user = current_user #connect the created review to the user
end 
```

然后在我的专业 show.html.erb 页面中，我可以通过调用给出评论的人来调用 show 方法：

```
<%= review.user.profile_name %> 
```

和审查本身：

```
<%= review.review %> 
```

显示评论。然后我需要创建、编辑和删除。为了创建，我只需要让实例变量正确。一旦我在正确的控制器和正确的操作（专业控制器显示操作）下正确设置它们，然后在专业显示页面的模式窗口中，我将表单称为部分：

```
 <%= render 'reviews/form' %> 
```

看起来像这样：

```
<%= simple_form_for([@reviewable, @review]) do |f| %>
  <%= f.error_notification %>
  <div class="form-inputs">
    <%= f.input :review, :input_html => { :class => "span4", :rows => 10 }, 
                         label: false, 
                 placeholder: 'Help others by sharing what you\'ve learned as a major.' %>
  </div>
  <div class="modal-footer">
    <button class="btn cancel-modal-review" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <%= f.submit 'Share My Review', :class => "submit-feedback" %>
  </div>
<% end %> 
```

# solr - Solr FunctionQuery：gte、lte、eq 函数

> ID：15513394
> 
> 赞同：6
> 
> 时间：2013-03-20T00:59:01.060
> 
> 标签：solr

Solr FunctionQuery 有一个 DIV(x,y) 函数。我有这样的需求如果y=0，那么y应该等于x。

也就是说，我需要用 FunctionQuery 来表示以下逻辑：

```
if y == 0, return 1 /* i.e. DIV(x,x) */
else, return DIV(x,y) 
```

不知何故，从 Solr 文档中，我找不到任何比较函数，例如 EQ(x, value) 等供我使用。

谁能给我一个提示来使用 FunctionQuery 构建我想要的逻辑？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:52:42.137

感谢 Srikanth Venugopalan 评论，清理这个问题并记录我的最终解决方案：

> 实际上你需要切换参数。exposure_count = 0 被解释为假。所以你的条件是 {!boost b=if(exposure_count,div(1,exposure_count),1)}"

看起来，Lucid 作品[文档](http://docs.lucidworks.com/display/solr/Function+Queries)确实有一个错误。FunctionQuery 解析器不采用比较运算符，例如 ==，至少这是我通过查看源代码发现的。此外，IF() 函数的字段分隔符应该是 ,（逗号）而不是 ;（分号）。

官方的 Solr [wiki](http://wiki.apache.org/solr/FunctionQuery#if)是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T12:38:29.577

对于字符串术语，这有效：

if(termfreq(fieldname,"value"),2,1)

如果“字段名”中包含“值”，则产生 2（termfreq 将 >0）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:58:00.223

您可以将 == 用于等于和 if 条件语句，如下所示：-

例如 `if(y == 0; 1; DIV(x,y))`

检查示例@[文档](http://docs.lucidworks.com/display/solr/Function+Queries)

`if(color=="red"; 100; if(color=="green"; 50; 25))`：
该函数检查文档字段“color”，如果是“red”返回100，如果是“green”返回50，否则返回25。

编辑 ：-

Solr[如果](http://wiki.apache.org/solr/FunctionQuery#if)wiki 提到 ,（逗号）作为分隔符

例如`if(exists(myField),100,0)`

# sass - 在 Sass 中为数字添加单位

> ID：15513395
> 
> 赞同：21
> 
> 时间：2013-03-20T00:59:01.687
> 
> 标签：sass

我正在尝试创建动态值，但到目前为止都失败了。创建的像素值似乎失去了用于计算的能力。

```
$numericValue: 30;

$pixelValue: $numericValue+px;
// also tried $pixelValue: #{$numericValue}px;

$calc: $pixelValue * 2;
// also tried $calc: unquote($pixelValue) * 2; 
```

这会引发错误

语法错误：未定义的操作：“30px 乘以 2”

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-20T02:36:56.427

诀窍是`* 1px`在您想要添加单位时使用。使用`+px`或插值 ( `#{$numericValue}px`) 将其转换为字符串。

```
$numericValue: 30;

$pixelValue: $numericValue * 1px;

$calc: $pixelValue * 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-10T00:42:57.977

您需要定义您将使用的单位。如果您正在使用像素，则可以创建添加`px`到`$numericValue`.

```
$numericValue: 30px;
$pixelValue: $numericValue;
$calc: $pixelValue * 2; 
```

# twitter-bootstrap - 无法使用 Twitter Bootstrap js 运行 PlayFramwork 2.1 IntegrationSpec

> ID：15513400
> 
> 赞同：1
> 
> 时间：2013-03-20T00:59:26.833
> 
> 标签：twitter-bootstrap, playframework-2.0

我有一个 PlayFramework (2.1) 项目，其中 bootstrap.js 包含在 main.scala.html 文件中，每当我从控制台运行“测试”命令时，整个过程都会挂起。这很奇怪，因为我在使用“运行”命令时没有问题。

这真的很容易重现：

*   创建一个新的 PlayFramework 2.1 scala 项目。
*   将 bootstrap.js 或 bootstrap.min.js 添加到 public/javascripts 文件夹
*   在 main.scala.html 中直接在现有 jquery 包含后添加一个脚本标记
*   进入游戏控制台
*   运行“测试”命令

如果 ApplicationSpec 碰巧首先被调用，它将运行，但 IntegrationSpec 永远不会运行，控制台会一直等到被杀死。

我正在使用 PlayFramework 2.1、Bootstrap 2.3.1、Java 1.6.0_43 和 Scala 2.10.0。我在 Ubuntu 12.10 和 Windows 7 上遇到了同样的问题。

我没有从“play new”生成的文件中更改 ApplicationSpec 或 IntegrationSpec 文件。我唯一更改的是将 bootstrap.js 文件添加到 javascripts 目录并将脚本条目添加到 main.scala.html。Eveything else 是一个新创建的标准 play 2 scala 应用程序。

其他人可以验证这是否是一个问题（或只是我）以及问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:21:44.060

当我使用 bootstrap2.3.1 和 jquery-1.9.1（不是 jquery-1.9.0 ）时，我遇到了同样的麻烦。发生这种情况是因为 2.3.1 版的 twitter bootstrap.js 已损坏。我尝试使用 jquery-1.7.1 和 bootstrap-2.0.4 并使用 IntegrationSpec 进行测试，然后它可以正常工作。所以你应该尝试一些jquery和bootstrap的模式。

# ruby - 重复一个字符串，同时避免末尾有空格

> ID：15513401
> 
> 赞同：0
> 
> 时间：2013-03-20T00:59:42.420
> 
> 标签：ruby

我想知道如何摆脱字符串末尾的空格。我正在尝试创建一个重复方法，该方法使用默认值将字符串重复一定次数。这就是我到目前为止所拥有的。

```
 def repeat(word, num = 2)
      num.times do
        print word + " " 
      end
    end

    repeat("hello") 
```

我需要这个给我“你好你好”，但它给了我“你好你好”的空间。我怎样才能摆脱那个额外的空间？我试过剁，但我似乎无法正确实施。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T01:02:37.047

```
def repeat(word, num = 2)
  print ([word] * num).join(" ")
end

repeat("hello") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:03:08.260

如果您为重复方法分配一个新字符串，您可以使用[chop！](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-chop-21).

它将修改字符串，删除您拥有的最后一个空格。之前，调用`chop`将返回字符串的副本，从而留下您拥有的空间。

尝试做：

```
chopped = repeat("hello").chop! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:51:35.813

另一种选择：

```
def repeat(word, num = 2)
  print ("#{word} " * num).strip
end 
```

# sql-server - 存储过程返回结果，sql

> ID：15513402
> 
> 赞同：-2
> 
> 时间：2013-03-20T00:59:46.637
> 
> 标签：sql-server, stored-procedures, sql-server-2012, aggregate-functions

如何使用一个存储过程返回多个聚合函数的结果。我正在尝试使用一个存储过程获取一列的平均值、总计、最大值和最小值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:55:53.270

在您的存储过程中发出以下 SQL 语句：

从表 1 中选择 AVG(col1)、SUM(col1)、MAX(col1)、MIN(col1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:01:38.983

您可以在 sp 中对函数结果调用多项选择，您将返回一个包含 4 个表的数据集。或者，您可以将值选择到表变量中并通过 select 语句返回表。有很多方法可以做到这一点。

# ruby - 如何将屏幕上的所有内容记录到文件中？

> ID：15513403
> 
> 赞同：0
> 
> 时间：2013-03-20T00:59:56.483
> 
> 标签：ruby, logging, rubygems

`rufus/scheduler`我在 Windows 上使用一个 rb 文件。该脚本在计算机启动时执行，并在 cmd 窗口中运行。

如何将 ruby​​ 输出到屏幕的所有内容记录到文件中？我仍然希望能够在屏幕上看到输出。所以我希望在当前行为之上进行日志记录。

*   视窗 7 64 位
*   红宝石 1.9.3p194 (2012-04-20) [i386-mingw32]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:26:43.343

如果您只想让脚本将输出发送到文件而不是控制台，请使用[`IO#reopen`](http://www.ruby-doc.org/core-2.0/IO.html#method-i-reopen)重定向 stdout 和 stderr。

```
def redirect_console(filename)
  $stdout.reopen(filename,'w')
  $stderr.reopen(filename,'w')
end

redirect_console('/my/console/output/file') 
```

如果您需要定向到一个或多个输出流，请使用代理对象和 method_missing 发送给它们

```
class TeeIO
  def initialize(*streams)
    raise ArgumentError, "Can only tee to IO objects" unless streams.all? { |e| e.is_a? IO }
    @streams = streams
  end

  def method_missing(meth, *args)
    # HACK only returns result of first stream
    @streams.map {|io| io.send(meth, *args) }.first
  end

  def respond_to_missing?(meth, include_all)
    @streams.all? {|io| io.respond_to?(meth, include_all) }
  end
end

def tee_console(filename)
  tee_to = File.open(filename, 'w')
  tee_to.sync = true  # flush after each write
  $stdout = TeeIO.new($stdout, tee_to)
  $stderr = TeeIO.new($stderr, tee_to)
end

tee_console('/my/console/output/file') 
```

# sql - 从数据库中检索信息并在 php 中显示

> ID：15513406
> 
> 赞同：0
> 
> 时间：2013-03-20T01:00:00.223
> 
> 标签：sql, database, return

当用户在搜索页面上输入say`PatientID`然后按下搜索按钮时，我希望它进入数据库并根据`PatientID`输入的信息提取所有信息。

我试过这个但是没有运气。它返回一个空白的白色屏幕。

```
<?php
    include 'connect.php';

    $id1 = $_POST['PatientID']; //Text box the user searches in
    $result = mysqli_query($con,"SELECT * FROM PatientRecords WHERE PatientID=$id1");

    while($row = mysqli_fetch_array($result))
    {
        echo 
        $row['PatientID'] . " " . 
        $row['FirstName']. " " . 
        $row['LastName']. " " . 
        $row['DOB']. " " . 
        $row['IDNumber1']. " " . 
        $row['Medication1']. " " . 
        $row['Medication1Dosage']. " " . 
        $row['IDNumber2']. " " . 
        $row['Medication2']. " " . 
        $row['Medication2Dosage']. " " . 
        $row['IDNumber3']. " " . 
        $row['Medication3']. " " . 
        $row['Medication3Dosage']. " " . 
        $row['MedicalNotes'];

        echo "<br />";
    }

    mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:02:53.250

```
SELECT * FROM PatientRecords WHERE PatientID = $id1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:49:51.280

```
Your query in wrong, In your query you are assigning :id1 to PatientID in where clause
that is nothing beacsue your id1 is store is in $id1 so use that instead of :id1 
```

您的查询

```
$result = mysqli_query($con,"SELECT * FROM PatientRecords WHERE PatientID=$id1"); 
```

# infobright - Brighthouse 内存不足错误

> ID：15513408
> 
> 赞同：0
> 
> 时间：2013-03-20T01:00:00.807
> 
> 标签：infobright

我们已经轻松使用 Infobright 社区版一年多了，完全没有任何问题。它甚至与占用空间更大的数据库（postgreSQL 数据库）共享服务器。

突然间，它开始给我们带来错误。“失忆的光明屋”。我尝试将 ServerMainHeapSize 参数从默认的 600 增加到 4000，并将相应的内存参数增加到中间级别大小，但无济于事（这是我第一次尝试调整 Infobright，因为它始终表现完美，更多或更少）。

有人对此有任何猜测吗？日志文件只是报告错误，没有帮助。

在一个可能相关的说明中，几个月前，我们的一个表在数据库中损坏了。错误消息是“属性文件中的错误：格式错误”。即使我尝试删除表（因此无法删除），或者就此而言，如果我尝试删除数据库，也会发生此错误。如何删除此表？（这些表中的数据会定期重新加载，因此 Infobright 数据库本身没有正式的备份）。

--sw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:55:04.523

在我看来，这绝对听起来像是表损坏导致了一些问题，因为如果它在损坏之前运行良好而没有任何问题，这似乎是合乎逻辑的。我是 Infobright 的社区经理，我也听说过这个问题。几个问题问你。

1.  你运行的是什么版本？
2.  电脑有多少内存？
3.  什么是操作系统？
4.  计算机上还运行着什么？
5.  到实例的平均连接数是多少？

# wsdl - 在服务器端使用轴 1.4，在客户端使用轴 2.0

> ID：15513409
> 
> 赞同：0
> 
> 时间：2013-03-20T01:00:13.043
> 
> 标签：wsdl, axis2, wsdl2java, axis

我有一个 wsdl 和 xsd 来创建一个 Web 服务。我打算使用轴的 wsdltojava 来生成存根和骨架。服务器端 Axis 是 1.4 版本，客户端 Axis 是 2.0 版本。在项目的最初阶段，我们使用轴 2 创建了一个虚拟（测试数据有限）Web 服务客户端和服务器代码。到目前为止一切都很好。当谈到真正的一个时，我们意识到服务器端应用程序服务器是轴 1.4。它还托管其他网络服务。因此，我们在这里有 2 个选项来实现新的 Web 服务。

1) 将服务器端 Axis 从 1.4 升级到 2.0。将其他 Web 服务升级到 2.0。并使用axis2 wsdltoJava 生成我的新Web 服务的客户端和服务器存根。

2) 使用 Axis 1.4 wsdltoJava 并生成服务器端存根，并使用 Axis 2.0 wsdltoJava 并生成客户端存根。

任何一种方法都有什么建议/建议？您是否发现第二种方法存在兼容性问题？必须以另一种方式决定。快速响应受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:00:04.687

您可以使用第二种方法。服务器版本和客户端版本是两个不同的东西。如果您喜欢客户端或其他语言或框架，您可以使用 C#。不要紧。因此，随心所欲地创建您的 Web 服务。

但小心点。尽量不要使用 RPC/编码的 WSDL。RPC/编码的 Web 服务与[WS-I](http://en.wikipedia.org/wiki/Web_Services_Interoperability)不兼容。因此，一些类似 JAX-WS 的框架不支持它。

# sql - 在VB中，我想将数据库中的数据转换为视图表

> ID：15513410
> 
> 赞同：1
> 
> 时间：2013-03-20T01:00:15.337
> 
> 标签：sql, vb.net

我已经和数据库建立了连接，我可以从数据库中获取一些数据，但是我只是丢失了第一行数据

代码是

```
If (dbrDB.Read) Then
        Label2.Text = ""
        While (dbrDB.Read)
            Label2.Text = Label2.Text + (dbrDB("LastName") + " " + dbrDB("Firstname")) + Environment.NewLine
        End While

    Else

        Label2.Text = "Color is not Found" 
```

我想假设的数据是这样的

迈克·卡特

凯文杰克

贝克约翰逊

艾比亚当

乔什·理查德

* * *

但我得到的结果是

凯文杰克

贝克约翰逊

艾比亚当

乔什·理查德

* * *

所以我丢失了第一行数据有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:08:47.413

我认为它的组合

```
if (dbrDB.Read) 
```

和

```
while (dbrDB.Read) 
```

这导致第一条记录不显示。在 if 行上放置一个断点并在您的应用程序上运行调试器。在从 if 到 while 的过程中观察 (dbrDB("LastName") 的值。

# opengl-es - OpenGL ES 2：简单绘图是否需要顶点和片段着色器？

> ID：15513414
> 
> 赞同：5
> 
> 时间：2013-03-20T01:00:36.400
> 
> 标签：opengl-es, opengl-es-2.0, shader

我目前正在使用运行时生成的几何图形进行一些绘图例程，并且仅使用纯色。在搜索最小的 GL 设置来进行绘图时*（我正在匹配屏幕分辨率并且我是 iOS，但问题也适用于其他 ES 2 平台）*，我看到大多数示例都使用顶点和片段着色器，但不是全部。

如果我不打算使用任何纹理或照明*（只是直接颜色复制/混合）*并且我不打算进行任何无法通过操作视图矩阵来完成的转换，那么我真的需要设置顶点吗和/或片段着色器？如果没有，使用着色器比无着色器方法有什么优势吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T01:46:00.487

据我所知，是的，它们是必要的。OpenGL ES 2.0 不向后兼容 OpenGL ES 1.x，两者之间的主要区别在于自定义着色器。

使用着色器 (2.0) 与否 (1.x) 的优势取决于应用程序当前和长期的功能，但 1.x 的固定功能管道正在迅速成为过去。最近发布的 OpenGL ES 3.0 规范向后兼容 2.0，但不是 1.x。

OpenGL ES 2.0 使用可编程管道，因此您必须始终声明顶点和片段着色器。您可以为几何 + 颜色声明的最简单的是：

```
// Vertex Shader

attribute vec3 position;

void main(void)
{
     gl_Position = vec4(position, 1.0);
} 
```

和：

```
// Fragment Shader

uniform lowp vec3 color;

void main(void)
{
     gl_FragColor = vec4(color, 1.0);
} 
```

资料来源：[Khronos 网站和文档](http://www.khronos.org/opengles/2_X/)

> “OpenGL ES 2.0 规范的重大变化是不支持 OpenGL 固定函数转换和片段管道。”

# javascript - jQuery :selected 不起作用，总是返回相同的值

> ID：15513418
> 
> 赞同：-2
> 
> 时间：2013-03-20T01:00:58.667
> 
> 标签：javascript, jquery, html

我面临一个非常奇怪的问题，其中 jQuery :selected 总是返回相同的值。

例如，假设我有这个 HTML：

```
<select class="some_select">
   <option value="0">Zero</option>
   <option value="1">One</option>
</select> 
```

然后我在 $(document).ready() 上运行这个 jQuery 代码：

```
 $('.some_select').change(function() {
        alert($(this).attr('value'));
    }); 
```

在上述情况下，警报始终显示所选选项的良好值，但如果我运行以下命令：

```
var type = $('.some_select :selected').attr('value'); 
```

使用此代码，无论选择什么选项，警报始终返回“0”。

我也尝试过：

```
$('.some_select').find(':selected') 
```

和

```
$('.some_select').filter(':selected') 
```

还

```
$('.some_select option:selected') 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:11:34.350

我要对 tldr Explosion Pills 发表评论。您正在寻找的代码是

```
$('.some_select').change(function() {
   console.log($(":selected").attr('value'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:03:23.067

那是因为您需要它，`.change(function(){..})`因此它可以在更改值时更新值，而当值更改时，您拥有的其他代码片段不会更新。还是我误解了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:18:49.377

select 元素没有`value`属性，因此 alerting`$(this).attr('value')`将 alert `undefined`，而不是您声称的所选选项的“好价值”。

您不需要在`:selected`这里使用伪类。只需使用`.val()`select 的方法来检索其当前值：

```
$('.some_select').change(function() {
    alert($(this).val());
}); 
```

这是一个演示：http: [//jsfiddle.net/qGuxt/](http://jsfiddle.net/qGuxt/)

# ios - NSDictionary valueForKey 崩溃

> ID：15513419
> 
> 赞同：1
> 
> 时间：2013-03-20T01:01:08.260
> 
> 标签：ios, objective-c, key-value-coding

`NSMutableArray`如何从下面的数组中检索键值。下面的代码在`isEqualToString`. 但是，我可以在变量视图窗口中看到 nsRet 的值，就像`@\x18\xaa\x01\xc8\a`在运行该语句之前一样。

```
 NSMutableArray* nsMyList = [[NSMutableArray alloc] init];
        [nsMyList addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                             @"valueOfKey", @"Key",
                             nil]];
        NSString *nsRet = [nsMyList valueForKey:@"Key"];
        if ([nsRet isEqualToString:@"deviceClass"])
        {
            NSLog(@"Key value:%@", nsRet);
        } 
```

有人可以在这里帮我获得正确的密钥值吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:03:58.483

您已将 存储`NSDictionary`在一个数组中。基于您的代码的正确访问权限是：

```
NSDictionary *dict = [nsMyList objectAtIndex:0];
nsret = [dict valueForKey:@"Key"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:03:59.230

这是因为你需要`objectForKey:`，而不是`valueForKey:`。该`valueForKey:`方法用于键值编程。此外，呼叫应该在 上`[nsMyList objectAtIndex:0]`，如下所示：

```
NSString *nsRet = [[nsMyList objectAtIndex:0] objectForKey:@"Key"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:04:40.590

看起来您正在尝试获取`valueForKey:`NSMutableArray 而不是字典。

你想要的是：

```
[[nsMyList objectAtIndex:0] valueForKey:@"Key"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T01:08:32.217

我有点失落。

为了访问您刚刚创建的字典，您需要先获取字典中的第一个元素，`NSMutableArray`然后再获取字典。

它会是这样的：

```
NSString *nsRet = [nsMyList[0] objectForKey:@"Key"] 
```

我认为它可以解决它。

# iphone - 如何检测 UITextField 是否是@me 地址？

> ID：15513421
> 
> 赞同：0
> 
> 时间：2013-03-20T01:01:30.843
> 
> 标签：iphone, sdk

我正在构建一个邮件客户端，想知道如何检测文本字段中是否包含@me。最好使用 if 语句。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:05:16.960

检查文本字段的文本属性是否包含“@me.com”作为子字符串。

```
if ([textField.text rangeOfString:@"@me.com"].location != NSNotFound) {

    //@me.com email

} else {

    //not an @me.com email

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:06:10.987

```
NSString *text = someTextField.text;
NSRange range = [text rangeOfString:@"@me"];
if (range.location != NSNotFound) {
    // string has @me in it
} 
```

我更喜欢将代码拆分一下。这使得阅读和调试更容易。如果您需要在代码中进一步使用这些值，它也会变得更容易。

# algorithm - 数组比较方法的时间复杂度

> ID：15513424
> 
> 赞同：0
> 
> 时间：2013-03-20T01:01:33.027
> 
> 标签：algorithm, time-complexity

我有一种方法可以将一个一维数组与二维数组中的每一行进行比较，看看它们是否相等。两个数组的列数相同。例如，{1,0} 和 {{1,0},{1,1}} - 我会将 {1,0} 与 {1,0} 进行比较，然后再与 {1,1} 进行比较。如果二维数组有 n 行，两个数组都有 m 列，那么时间复杂度是多少？是 O(mn) 吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T15:43:52.143

如果任何特定索引处的元素不同，则两个向量的比较可以提前退出。因此，除非您有非常不均匀分布的数据，否则单个向量比较应该是`O(1)`向量是否不同并且`O(m)`它们是否相等。因此，总体时间复杂度将是`O(n + m)`是否有匹配以及`O(n)`没有匹配。这是平均的，当然，最坏的情况是 O(mn)。

# javascript - 在 JS 中编写原型继承的最简洁方法

> ID：15513425
> 
> 赞同：0
> 
> 时间：2013-03-20T01:01:35.770
> 
> 标签：javascript, syntax, prototype

仍然有点 JS 新手，我试图了解使用原型和继承的最佳/最干净的方式。

通常我写这样的对象/原型定义：

```
var Foo = function(data) {
  this.data = data;
};
Foo.prototype = {
  someMethod: function() {
    return "whatever";
  }
}; 
```

我喜欢这个，因为我经常使用几层深的命名空间对象，所以它实际上可能看起来更像这样：

```
App.Model.FooModel = function(){...};
App.Model.FooModel.prototype = {...}; 
```

这很好，因为我不必输入每个方法的全名来编写原型，只需输入名称即可。`someMethod: function(){}`而不是`App.Model.FooModel.prototype.someMethod = function(){}`.

现在，我遇到的问题是我不确定如何使用 JS 中的继承来做到这一点。如果我这样做，我可以让继承正常工作：

```
var Child = function(){...};
Child.prototype = new Parent;
Child.prototype.someMethod = function(){...}; 
```

...但是现在在一个更复杂的应用程序中，我们又回到为每个方法写出对象的全名，我觉得这既乏味又难以阅读。

所以，我的问题是：除了使用对象的全名附加所有子方法之外，是否有一种简洁、直接的方法来编写从另一个对象继承的原型？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:37:48.227

好吧，这是 javascript，您可以随时编写自己的：

```
function construct ( parent, fn, attr ) {
    fn.prototype = new parent();

    for (var x in attr) {
        fn.prototype[x] = attr[x];
    }
    return fn;
} 
```

您可以根据需要进行 hasOwnProperty 检查，但为清楚起见，上述是最简单的实现。该函数将三个步骤合二为一。您现在可以简单地执行以下操作：

```
var Foo = construct(
    Parent,
    function(data) {
        this.data = data;
    },
    {
        someMethod: function() {
            return "whatever";
        }
    }
); 
```

如果你不喜欢这种语法，你总能想出一个更好的。另一种实现是简单地实现 attr 扩展部分并正常进行继承：

```
function extend (obj, attr) {
    for (var x in attr) {
        obj.prototype[x] = attr[x];
    }
    return obj;
} 
```

再次，为清楚起见进行了简化。所以现在的语法变成了：

```
var Foo = function(){...};
Foo.prototype = new Parent;
extend(Foo.prototype,{
    someMethod : function(){...}
}); 
```

# node.js - facebook-pasport 的回调可以动态构造吗？

> ID：15513427
> 
> 赞同：12
> 
> 时间：2013-03-20T01:02:04.127
> 
> 标签：node.js, facebook, passport.js

使用 facebook-passport 时，通常要做的是`redirect_uri`在您使用的 FacebookStrategy thst 的构造函数中指定 ，如下所示：

```
passport.use("facebook", new FacebookStrategy({
    //TODO: Correctly configure me
    clientID: "XXXXXXX"
  , clientSecret: "XXXXXXXXX"
  , callbackURL: "http://localhost:3007/auth/facebook/callback"
  },
  function(accessToken,refreshToken,profile,done) {
    User.findByFacebookId(profile.id, function(err,user) {
      if(err){ return done(err);}
      if(!user){ return done(null,false)}
      return done(null, user);
    });
  })
); 
```

然后你会设置这样的路线：

```
app.get('/auth/facebook/login', passport.authenticate('facebook') );
app.get('/auth/facebook/login_callback', passport.authenticate('facebook', {
    successRedirect:"/login_ok.html"
  , failureRedirect:"/login_failed.html"
  }
)) 
```

是否可以更改回调 url，使其包含传递给初始登录调用的参数的信息？

注意：这个问题更多是为了保存我花了一段时间才解决的信息，以避免其他人走上同样的道路。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-20T01:08:10.837

我使用这里找到的一些信息找到了答案[https://github.com/jaredhanson/passport-facebook/issues/2](https://github.com/jaredhanson/passport-facebook/issues/2)并通过挖掘护照 oauth2 组件确定回调 uris 的方式，以及底部的护照自定义回调的信息此页面[http://passportjs.org/guide/authenticate/](http://passportjs.org/guide/authenticate/)。

这是一个将调用映射`/auth/facebook/login/1234`到使用回调的示例`/auth/facebook/login_callback/1234`

```
app.get('/auth/facebook/login/:id', function(req,res,next) {
  passport.authenticate(
    'facebook', 
     {callbackURL: '/auth/facebook/login_callback/'+req.params.id }
  )(req,res,next);
});

app.get('/auth/facebook/login_callback/:id', function(req,res,next) {
  passport.authenticate(
    'facebook',
     {
       callbackURL:"/auth/facebook/login_callback/"+req.params.id
     , successRedirect:"/login_ok.html"
     , failureRedirect:"/login_failed.html"
     }
   ) (req,res,next);
 }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-23T13:06:00.893

@OMGPOP，在这里您可以将查询参数传递到您的 callbackUrl 中。

```
var Passport = require('passport');
var FacebookStrategy = require('passport-facebook').Strategy;
const Router = require("express").Router();
var fbConfig = {
  display: "popup",
  clientID: "YourFbClientId",
  clientSecret: "YourFbClientSecret",
  callbackURL: "http://localhost:8686/auth/facebook/callback",
  profileFields: ['id', 'name', 'gender', 'displayName', 'photos', 'profileUrl', 'email']
}

Passport.use(new FacebookStrategy(fbConfig,
  function(accessToken, refreshToken, profile, callback) {
    return callback(null, accessToken);
  }
));

Router.get("/auth/facebook", function(req, res, next) {
  var callbackURL = fbConfig.callbackURL + "?queryParams=" + req.query.queryParams;
  Passport.authenticate("facebook", { scope : ["email"], callbackURL: callbackURL })(req, res, next);
});

Router.get("/auth/facebook/callback", function(req, res, next) {
  Passport.authenticate("facebook", {
    callbackURL: fbConfig.callbackURL + "?queryParams=" + req.query.queryParams,
    failureRedirect: "/login",
    session: false
  })(req, res, next) },
  function(req, res) {
  console.log(req.query.queryParams);
  //do whatever you want
}); 
```

查看我的博客了解更多信息：[http ://blog.pingzhang.io/javascript/2016/09/22/passport-facebook/](http://blog.pingzhang.io/javascript/2016/09/22/passport-facebook/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-14T01:07:03.063

我一直在努力专门使用 Angularjs 来做这件事，并且想重定向回启动登录的相同 url。

我的解决方案是在 Angularjs 中创建一个只实现一个位置的路由。我知道这并没有具体回答这个问题，但我认为这对任何想要这样做的人都有帮助。

在服务器上：

```
app.get('/auth/facebook/', passport.authenticate ('facebook'));

app.get('/auth/facebook/callback', function (req, res, next) {
    var authenticator = passport.authenticate ('facebook', {
            successRedirect: '/fbcallback',
            failureRedirect: '/'
    });

    delete req.session.returnTo;
    authenticator (req, res, next);
}) 
```

角路由器：

```
when('/fbcallback', {
    template: "",
    controller: 'fbCtrl' 
}). 
```

角度控制器：

```
app.controller("fbCtrl", function () {
    window.history.back();
}); 
```

您也可以在控制器中执行其他一些客户端路由。

# android - Box2d As3 的棱柱关节不起作用？

> ID：15513429
> 
> 赞同：0
> 
> 时间：2013-03-20T01:02:09.907
> 
> 标签：android, actionscript-3, flash, air, box2d

我试图使用棱柱关节在box2d中创建一个移动平台，所创建的只是一个盒子并且没有明显的关节，我做错了什么？这是我的代码

```
 var prismaticJoint:b2PrismaticJoint;
        ...
        {
         ...
        BodyDef.position.Set(0 / RATIO, 0 / RATIO);
        floorDef.SetAsBox(250 / RATIO, 10 / RATIO);

        fixtureDef.shape = floorDef;
        fixtureDef.friction = 0.5;
        fixtureDef.density = 0.5;
        fixtureDef.restitution = 0;

        movePlatformBody = PhysiVals.world.CreateBody(BodyDef);
        movePlatformBody.CreateFixture(fixtureDef);

        var prismaticJointDef:b2PrismaticJointDef = new b2PrismaticJointDef();
        prismaticJointDef.Initialize(body, movePlatformBody, movePlatformBody.GetWorldCenter(), new b2Vec2(0,1));
        prismaticJointDef.enableLimit = true;
        prismaticJointDef.enableMotor = true;
        prismaticJointDef.lowerTranslation = 0;
        prismaticJointDef.maxMotorForce = 100;
        prismaticJointDef.motorSpeed = 1;
        prismaticJointDef.upperTranslation = 270 / PhysiVals.RATIO;
        PhysiVals.world.CreateJoint(prismaticJointDef);
        //prismaticJoint = PhysiVals.world.CreateJoint(prismaticJointDef as b2JointDef) as b2PrismaticJoint; 
```

我尝试了两种在世界上创建它的方法，我不知道该使用哪一种。如何在 box2d 中创建移动平台？感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:27:50.180

尝试修改您的初始化语句。将第一个参数设置为将要移动的主体（平台），将第二个参数设置为静态主体（世界），第三个参数将是平台中心。

我写了一个非常流行的关于 Box2D 关节的教程，其中包含一个带有源代码的棱柱关节示例，所以如果你仍然有问题，也可以看看 [教程](http://blog.allanbishop.com/box2d-2-1a-tutorial-part-2-joints/)。

# focus - Flex 4 - 将焦点设置为无

> ID：15513430
> 
> 赞同：1
> 
> 时间：2013-03-20T01:02:12.027
> 
> 标签：focus, flash-builder, flex4.6, setfocus

我正在构建一个使用 Flex 4.6 作为 UI 的 Away3d 应用程序。移动 3d 组件需要使用箭头键 - 但是，在使用滑块等组件后，应用程序会为其提供焦点，这意味着箭头键可以控制它。

我找不到任何方法可以将全局应用程序焦点设置为空 - 有没有简单的方法可以做到这一点？

我已经尝试设置应用程序的 focusManager.setFocus(new Button()) 和 null （这会使它崩溃），我确信这很容易，但我只能找到关于如何将焦点设置到组件的建议，而不是设置它一无所有。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:28:51.230

也许尝试在滑块上监听 mouseup 事件，然后将焦点强制回到 3d 组件，如下所示：

```
focusManager.setFocus(3dcomponent); 
```

# python - Python：readline() == 字符串文字永远不会返回 True

> ID：15513433
> 
> 赞同：0
> 
> 时间：2013-03-20T01:02:19.890
> 
> 标签：python, file-io

**编辑：我犯了一个简单的错误 'testing 1,2,3+\n' 应该是 'testing 1,2,3'+'\n' 或 'testing 1,2,3\n'**

我正在尝试有条件地从文件中读取文本。当我将 my_file.readline() 与 some_file.readline() 进行比较时，我无法弄清楚将返回 True 的条件

**my_file.readline() == 'string literal'**总是返回 false。

```
with open('text.txt','w') as my_file:
    my_file.write('testing 1,2,3'+'\n'+'filter me'+'\n')  #writing arbitrary text to my  file

with open('text.txt','r') as my_file:
    str_from_file = my_file.readline()        # first line should be 'testing 1,2,3'
    print str_from_file == 'testing 1,2,3+\n' #both print False
    print str_from_file == 'testing 1,2,3'    #what string literal would print true?
    print str_from_file 
```

显然，我是 python 和编码的大块头。这是我使用 Python 的第五天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:03:17.757

您正在比较字符串：

```
'testing 1,2,3'+'\n'  # 'testing 1,2,3\n' 
```

和

```
'testing 1,2,3+\n' 
```

`'+'`请注意第二个字符串是如何在其中卡住一个附加字符的。

# javascript - focus() 不适用于由 javascript 创建的输入

> ID：15513442
> 
> 赞同：0
> 
> 时间：2013-03-20T01:03:23.053
> 
> 标签：javascript, jquery, onfocus, jquery-1.4

我已经通过使用javascript创建输入框并使用jquery将类分配给输入框然后尝试通过使用类名来使用focus（）来创建一个html页面，但它根本不起作用。当我单击输入框时，不会弹出警报:(

有谁知道这里出了什么问题？我该如何解决这个问题？

html页面：

```
 <table border="0" width="800">
    <tr>
        <td align="center">
            <div id="test">

            </div>       
        </td>
    </tr>
  </table> 
```

javascript:

```
htmlValue = "<input maxlength='4' size='2' type='text'  id='startTime_1' value='" + startTime + "'  />";

$("#test").html(htmlValue );

$('#startTime_1').addClass('test1');

$('#test1').focus(function () {
    alert('inside');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:09:47.017

以下代码：

```
$('.test1').focus(function () {
    alert('inside');
}); 
```

应该改为首先绑定`#test`。

```
$('#test').focus('.test1', function () {
    alert('inside');
}); 
```

* * *

由于您仍在使用 jQuery 1.4.2；您需要使用`.live()`处理程序的方法。

代码应为

```
$('#test').live('focus', '.test1', function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:08:30.960

如果您想为动态创建的内容添加处理程序，您需要在添加内容后添加处理程序，或者更常见的是，只使用事件委托。对于 jQuery，这意味着使用 .on：

```
$('.test1').on('focus', function () {
    alert('inside');
}); 
```

这是了解有关使用 .on的更多信息的[文档。](http://api.jquery.com/on/)

# ruby-on-rails - 当 Rails 3.2.11 实际上是一个删除请求时，它会执行一个 get 请求

> ID：15513444
> 
> 赞同：0
> 
> 时间：2013-03-20T01:03:25.340
> 
> 标签：ruby-on-rails

嘿，伙计们，我不知道该怎么说，我做了一点 ror..我把我所有的工作都改成了新的一圈，我赢了 7，我的大多数项目都使用 ror 3.2.11...问题是当我这样做的时候

```
<%= link_to("Delete", user, :method => :delete, :confirm => "Are you sure that you want to delete this user") %> 
```

它呈现为

```
<a href="/users/1" data-confirm="Are you sure that you want to delete this user" data-method="destroy" rel="nofollow">Delete</a> 
```

但是当我单击此链接时，它实际上会发出一个获取请求，这里是服务器日志

```
Started GET "/users/3" for 127.0.0.1 at 2013-03-20 06:21:40 +0530
Processing by UsersController#show as HTML
  Parameters: {"id"=>"3"}
  User Load (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "3"]]
  Rendered users/show.html.erb within layouts/application (0.0ms)
  Rendered layouts/_header.html.erb (2.0ms)
  User Load (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered layouts/_body.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 19.0ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:06:34.297

这个工作需要 3 件事（你的代码是正确的）

Gemfile 必须包含

```
group :assets do
  gem 'jquery-rails'
end 
```

views/layouts/application.html.（erb 或 haml）必须包含在 header 标签中

```
<%= javascript_include_tag 'application' %> 
```

assets/javascripts/application.js 必须包含

```
//= require jquery
//= require jquery_ujs 
```

# jquery - AJAX 到 JQuery 转换帮助

> ID：15513445
> 
> 赞同：0
> 
> 时间：2013-03-20T01:03:25.693
> 
> 标签：jquery, html, ajax, forms

有人愿意在这个脚本上帮助我吗？

我只需要有人拿这个 AJAX 片段并基本上用 jQuery 对其进行重新编程，这样我就可以研究它并了解有关如何使用 jQuery 的更多信息。这是我正在使用的 AJAX 的当前工作位，我想如果我能在 jQuery 中看到它，它将开始我的学习过程......

所以，如果有人这么好心，这就是脚本：

```
function CreateXmlHttpObject() { //function to return the xml http object
    var xmlhttp = false;
    try {
        xmlhttp = new XMLHttpRequest(); //creates a new ajax object
    } catch(e) {
        try {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); //this is for IE browser
        } catch(e) {
            try {
                req = new ActiveXObject("Msxml2.XMLHTTP"); //this is for IE browser
            } catch(e1) {
                xmlhttp = false; //error creating object
            }
        }
    }
    return xmlhttp;
}

function getMetaID(strURL) {
    var req = CreateXmlHttpObject(); // function to get xmlhttp object
    if(req) {
        req.onreadystatechange = function () {
            if(req.readyState == 4) { //data is retrieved from server
                if(req.status == 200) { // which reprents ok status                    
                    document.getElementById('meta_id').innerHTML = req.responseText; //put the results of the requests in or element
                } else {
                    alert("There was a problem while using XMLHTTP:\n");
                }
            }
        }
        req.open("GET", strURL, true); //open url using get method
        req.send(null); //send the results
    }
} 
```

这是在调用函数（PHP）的页面上：

```
echo '<select name="meta_id" onChange="getMetaID('."'".'http://www.mysite.com/backoffice/meta_tags/ajaxpageid.php?meta_id='."'".'+this.value)">'; 
```

这是一个`<div>`之后。

希望这是足够的信息来使它有意义。我当然感谢任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:06:02.337

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

在使用 jQuery 之前添加这些文件

```
$.ajax(serverUrl, {
   type: "POST",
   data:{ strURL:strUR},
   statusCode: {
      200: function (response) {           
      },
      201: function (response) {           
      },
      400: function (response) {
       },
      404: function (response) {
       );
      }
   }, success: function () {

   },
}); 
```

# authentication - 使用持久 cookie 对用户进行身份验证。需要哈希和盐吗？

> ID：15513447
> 
> 赞同：0
> 
> 时间：2013-03-20T01:03:41.260
> 
> 标签：authentication, cookies, hash

我正在构建一个登录脚本，我希望用户能够勾选“记住我”按钮。我已经阅读了有关此事的页面：http: [//blog.themeforest.net/tutorials/working-with-sessions-and-cookies-in-php-and-mysql/](http://blog.themeforest.net/tutorials/working-with-sessions-and-cookies-in-php-and-mysql/)

他们建议通过将随机字符串与用户名连接起来然后用盐对其进行散列来创建一个 auth_key。

```
$cookie_auth= rand_string(10) . $username;
$auth_key = md5($salt . $cookie_auth);
$auth_query = mysql_query("UPDATE users SET auth_key = '" . $auth_key . "' WHERE username = '" . $username . "'"); 
```

我只是想知道，执行第 1 行和第 2 行实际上有什么意义？你能不能跳过盐和散列，只创建 $auth_key 作为一个长的伪随机字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:19:31.957

一开始并不明显，但如果它纯粹是某种随机字符串，并且在 MD5 散列之前没有与之关联的身份 - 那么您可能会遇到两个用户最终使用相同身份验证密钥的问题。也就是说，MD5 可能对您有用，但从技术上讲应该逐步淘汰（已发现许多冲突使其不再可行） - 尝试寻找更新的单向哈希，例如 SHA-2

# code-generation - 如何用“未定义”常量证明代码正确性引理

> ID：15513452
> 
> 赞同：2
> 
> 时间：2013-03-20T01:03:56.523
> 
> 标签：code-generation, isabelle

鉴于我对代码生成有一个非常简单的定义。它仅针对某些情况定义，否则会引发运行时异常。

```
definition "blubb a = (if P a then True else undefined)" 
```

现在我想显示`blubb`正确。应该忽略抛出异常的情况（从我的角度来看，而不是从数学的角度来看）。但是，我最终得到了一个假设某个任意值`X`是`undefined`. 以下引理或多或少等同于子目标。我想显示`False`，因为我想忽略抛出异常（即`undefined`返回）的情况。

```
lemma "X = undefined ⟹ False" 
```

这是无法证明的。

```
 try

Nitpick found a counterexample for card 'a = 1:
 Free variable:
  X = a1 
```

显示可能引发异常或处理的函数正确性的最佳方法是什么`undefined`？这与[这个](https://stackoverflow.com/questions/15316313/generating-code-from-locales-without-interpretation)问题有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:27:18.363

`undefined`是 Isabelle 中的一个常数，你对此一无所知。特别是，您一般无法证明`X ≠ undefined`.

如果要编写仅对某些输入有效的函数，可以考虑使用`'a option`类型，如下所示：

```
definition "blubb a ≡ (if P a then Some True else None)" 
```

然后在您的证明中假设`blubb a`定义如下：

```
lemma "∃x. blubb a = Some x ⟹ Q (blubb a)"
  ... 
```

或者简单地说：

```
lemma "a ∈ dom blubb ⟹ Q (blubb a)"
  ... 
```

`blubb a`然后可以使用 提取的值`the (blubb a)`。

# c++ - 无法在 C++ 中初始化方法指针映射

> ID：15513453
> 
> 赞同：1
> 
> 时间：2013-03-20T01:03:56.887
> 
> 标签：c++, map, visual-studio-2012

我有如下功能：

```
//Parser.cpp
//...
Parser::Parser(CommandFactory & fact, 
               ArrayList<std::string> & expression)
{

    operations["*"] = &fact.createMultiplyCommand; //error C2276
    operations["/"] = &fact.createAdditionCommand; //error C2276
    operations["+"] = &fact.createAdditionCommand; //error C2276
    operations["%"] = &fact.createModulusCommand; //error C2276
    operations["-"] = &fact.createSubtractionCommand; //error C2276

    infixToPostfix(fact,expression);

}
//...

//Parser.h
//...

    Parser (CommandFactory & fact,
            ArrayList<std::string> & expression);

    Stack<Command*> tempCommandStack;
    ArrayList<Command*> postfix;

    /// Destructor.
    ~Parser (void);

private:
    //syntax is: <return_type> (*)()
    //syntax for a class method is: <return_type> (<class_name> *)();
    //syntax with a typedef is: typedef <return_type> (<class_name> * <typedef_name>)();
    //                          typedef <return_type> (*<typedef_name>)()

    std::map<std::string, Command * (*)()> operations; 
    std::map<std::string,int> precedence;
//... 
```

知道这`CommandFactory`是一个抽象类也可能会有所帮助（传入的是具体的）

我收到的错误是 C2276: '&' : 对绑定成员函数表达式的非法操作。

当我定义映射时，我不知道我在做什么错。有任何想法吗？

**编辑：**

```
//CommandFactory.h
#ifndef _COMMANDFACTORY_H_
#define _COMMANDFACTORY_H_

#include "Subtract.h"
#include "Add.h"
#include "Divide.h"
#include "Multiply.h"
#include "Modulus.h"
#include "Negation.h"
class CommandFactory
{
public:

    virtual Subtract * createSubtractionCommand() = 0;
    virtual Add * createAdditionCommand() = 0;
    virtual Divide * createDivisionCommand() = 0;
    virtual Multiply * createMultiplyCommand() = 0;
    virtual Modulus * createModulusCommand() = 0;
    virtual Negation * createNegationCommand() = 0;
    ~CommandFactory(void);

};

#endif   

//StackCommandFactory.h

#ifndef _STACKCOMMANDFACTORY_H_
#define _STACKCOMMANDFACTORY_H_

#include "Add.h"
#include "Subtract.h"
#include "Divide.h"
#include "Multiply.h"
#include "Modulus.h"
#include "CommandFactory.h"

class StackCommandFactory : public CommandFactory
{
public:

    virtual Subtract * createSubtractionCommand(void);
    virtual Add * createAdditionCommand(void);
    virtual Divide * createDivisionCommand(void);
    virtual Multiply * createMultiplyCommand(void);
    virtual Modulus * createModulusCommand(void);
    virtual Negation * createNegationCommand(void);

protected:
    Subtract * sub;
    Add * add;
    Divide * div;
    Multiply * mul;
    Modulus * mod;
    Negation * neg;

};

#endif   // !defined _STACKCOMMANDFACTORY_H_

//StackCommandFactory.cpp
#include "StackCommandFactory.h"

Subtract * StackCommandFactory::createSubtractionCommand(void)
{
    return sub;
}

Add * StackCommandFactory::createAdditionCommand(void)
{
    return add;
}

Divide * StackCommandFactory::createDivisionCommand(void)
{
    return div;
}

Multiply * StackCommandFactory::createMultiplyCommand(void)
{
    return mul;
}

Modulus * StackCommandFactory::createModulusCommand(void)
{
    return mod;
}

Negation * StackCommandFactory::createNegationCommand(void)
{
    return neg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:26:30.350

您的代码存在一些问题。主要集中在成员函数的使用而不是全局函数上。您尝试从对象中获取成员函数，而您应该从类本身中获取它们。（即，而不是`&fact.createAdditionCommand`你需要`&CommandFactory::createAdditionCommand`。）但这会导致一个未绑定的成员函数，这意味着您需要使用`(fact.*fn)()`- 即使用 CommandFactory 类的对象来调用它。这并不理想 - 也不是您想要的。您正在寻找绑定的成员函数。在非 C++-11 应用程序中使用这些是可能的，但很难看。您可以使用库来真正提供帮助（除了一些样式更改之外，`boost`下面的代码几乎不会改变。）如果您使用的是 C++-11，那么您可以使用 C++-11 函数对象。`std``boost`

这是从您的来源派生的完整示例：

```
#include <vector>
#include <map>
#include <functional>
#include <string>

struct Command {};
struct Subtract : Command {};
struct Add : Command {};

class CommandFactory
{
  public:

    virtual Subtract * createSubtractionCommand() = 0;
    virtual Add * createAdditionCommand() = 0;
};

class StackCommandFactory : public CommandFactory
{
  public:

    virtual Subtract * createSubtractionCommand(void);
    virtual Add * createAdditionCommand(void);

    Subtract * sub;
    Add * add;
};

Subtract * StackCommandFactory::createSubtractionCommand(void) { return sub; }
Add * StackCommandFactory::createAdditionCommand(void) { return add; }

class Parser
{
  public:
    Parser (CommandFactory & fact);

    std::map<std::string, std::function<Command*()> > operations; 
};

Parser::Parser(CommandFactory & fact)
{
  operations["+"] = std::bind(&CommandFactory::createAdditionCommand, &fact);
  operations["-"] = std::bind(&CommandFactory::createSubtractionCommand, &fact);
}

#include <iostream>
int main()
{
  Add add;
  Subtract sub;

  StackCommandFactory command_factory;
  command_factory.add = &add;
  command_factory.sub= &sub;
  Parser parser(command_factory);

  std::cout<<"&add = "<<&add<<std::endl;
  std::cout<<"Add = " <<  parser.operations["+"]() <<std::endl;
  std::cout<<"&sub = "<<&sub<<std::endl;
  std::cout<<"Sub = " <<  parser.operations["-"]() <<std::endl;

  return 0;
} 
```

我得到输出

```
&add = 0x7fff58d538d8
Add = 0x7fff58d538d8
&sub = 0x7fff58d538d0
Sub = 0x7fff58d538d0 
```

表明通过解析器返回的 Add 对象与存储在 CommandFactory 中的对象相同。（对于 Subtract 对象也是如此）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:40:28.023

你不能在标准 C++ 中做到这一点。出于原因，请查看[此处](https://stackoverflow.com/questions/1802059/why-does-this-pointer-to-c-function-code-generate-a-compile-error)和[此处](http://msdn.microsoft.com/en-us/library/850cstw1.aspx)。

**编辑：** 与其将“Command * (*)()”存储到操作中，为什么不将“操作”值类型更改为存储“Command *”？或者重新审视底层设计？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T01:11:26.903

抱歉试试

操作["*"] = fact.createMultiplyCommand;

或者

操作["*"] = fact->createMultiplyCommand;

# csv - 通过命令行批量编辑 CSV 文件？

> ID：15513462
> 
> 赞同：0
> 
> 时间：2013-03-20T01:04:36.883
> 
> 标签：csv, command-line, command

我在某个目录中有大量 CSV 文件。

我需要将所有 CSV 文件上的 A1 字段更改为：电子邮件

有没有办法在一个命令中对所有文件执行所有操作？

**或者，如果这更容易：** 我只需要`Email`成为每个文件的第一行，所以如果有一种方法可以`Email`在每个文件的第一行中大量插入，那也可以完美！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:00:11.940

这是给你的快速而肮脏的例子：

```
replace="Email"
path="./"
ext="csv"

for f in $path*.$ext
do
    search=$(head -1 $f | awk '{print $1}')
    echo Changing: "$f"
    sed -i -e "s/$search/$replace/" "$f" && echo Done
done 
```

# c - 使用缓冲读取实现 getchar

> ID：15513465
> 
> 赞同：0
> 
> 时间：2013-03-20T01:04:56.243
> 
> 标签：c

我试图`getchar()`使用 unistd.h 中的函数来实现函数`read`。

我知道`read(0,buffer,1)`相当于`getchar()`，但是，它需要太多的系统调用。

有没有办法`getchar()`使用更少的系统调用来实现功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:07:38.907

是的——读取一个更大的缓冲区（例如，至少几千字节），里面装满了数据。当用户调用 getchar 时，从缓冲区返回一个字符，除非它是空的。如果为空，则先重新填充缓冲区，然后返回一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T01:35:01.507

这是一个简单的实现`getchar()`：

```
int mygetchar(void)
{
        static char buf[BUFSIZ];
        static char *bufp = buf;
        static int i = 0;

        if (i == 0)
        {
                i = read(0, buf, 1);
                bufp = buf;
        }
        if ( --i >= 0 )
        {
                return  *bufp++;
        }

        return EOF;
} 
```

# java - 尝试在 SQL 数据库中创建自定义主键，需要建议

> ID：15513466
> 
> 赞同：-4
> 
> 时间：2013-03-20T01:04:58.703
> 
> 标签：java, sql, database, string, key

所以我的小组正在尝试找到一种方法来为我们的船员表生成一个唯一的主键。但是我们不希望它是基于整数的，我们希望它是基于字符串的。我们做得对吗？

```
public String crewMemberPrimaryKeyGenerator(int ID){
     String newPrimaryKey = "8";fdasdf
     for (int i = 0; i<ID; i++){
           newPrimaryKey.concat("=");
     }
     newPrimaryKey.concat("D");
     return newPrimaryKey;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:10:12.097

我建议你让数据库为你生成这个作为 GUID。在 SQL 中使用对 newid() 的调用，或者如果您在 MySQL 中，您将使用 UUID()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:55:49.123

1.  您可以使用基于字符串生成的 GUID。

2.  继续使用 int，但将此 int 与后缀组合，例如：N1,N2

# java - 具有实例变量的多态性

> ID：15513467
> 
> 赞同：7
> 
> 时间：2013-03-20T01:05:03.743
> 
> 标签：java, variables, polymorphism, overriding, instance

这是我写的三个类：

```
public class Shape {

    public int x = 0;

    public void getArea() {
        System.out.println("I don't know my area!");
    }

    public String toString() {
        return "I am a shape!";
    }

    public int getX() {
        return x;
    }
}

public class Rectangle extends Shape {

    public int x = 1;

    public int getX() {
        return x;
    }

    public void getArea() {
        System.out.println("L*W");
    }

    public String toString() {
        return "I am a rectangle!";
    }
}

public class Tester {

    public static void main(String[] args) {
        Shape s = new Shape();
        Rectangle r = new Rectangle();

        System.out.println(r);
        System.out.println(r.x + "\n");

        s = r;
        System.out.println(s);
        s.getArea();
        System.out.println(s.x);
        System.out.println(s.getX());
    }
} 
```

Tester 类的 main 方法的输出是：

```
我是长方形！

1

我是长方形！

长*宽

0

1

```

为什么 sx 返回 0 而不是 1？因为变量的当前实例不是 Rectangle 并且该类也声明了相同的实例变量，或者 Rectangle 类中的变量没有覆盖 Shape 类中以前的公共 x 变量，就像它对 getX() 所做的那样矩形类中的方法因此返回 1?

同样作为一般规则，超类只有在该类中也声明了其子类方法时才能访问其实现？这是因为编译器将看到具有相同签名的相同数量的方法在“Shape”类中（具有重写的 Rectangle 实现）并接受这些作为有效的 Shape 方法？

提前致谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T01:29:57.477

Java 中的字段没有多态性。但是，有继承。您实际上所做的是在 Rectangle 类中创建两个具有相同名称的字段。该字段的名称实际上是：

```
public class Rectangle {
    public int Shape.x;
    public int Rectangle.x;
} 
```

*以上并不代表有效的 Java，它只是说明字段在您的类中的作用域*

在 Rectangle 类的整个范围内，同名的超类字段是*隐藏*的。因此，每当您在类中引用简单名称`x`或作用域名称`this.x`时，您指的是在 中定义的字段`Rectangle`。您实际上也可以使用作用域名称访问超类字段`super.x`。

现在，在类之外，访问哪个字段的规则略有不同。范围将由引用该字段的类的***编译时类型确定。***所以在你的代码中：

```
Shape s = new Shape();
Rectangle r = new Rectangle();

s = r;
System.out.println(s.x); 
```

输出是`0`因为编译时类型`s`是`Shape`(not `Rectangle`)。执行此操作时，您可以观察到此行为的变化：

```
Shape s = new Shape();
Rectangle r = new Rectangle();

s = r;
System.out.println(((Rectangle)s).x); 
```

快！您现在的输出是`1`，因为编译器看到您已将字段访问范围限定为`Rectangle`。

浓缩可见性规则：

您可以在 JLS 中阅读更多关于实例变量隐藏的信息[，第 8.3.3.2 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.3.3.2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:20:42.157

子类只继承超类中的变量和方法，反之则不行。因此，为了使 x 等于 1，您必须调用矩形而不是 shape。除非您按照其他人演示的铸造方式进行操作，否则在实际编程中应尽可能避免。另外，您永远不应该使用公共实例变量！如果您希望变量公开，至少使它们成为静态或常量。

# javascript - Chart.js 数据结构，如何用数组和随机颜色动态填充它？

> ID：15513469
> 
> 赞同：3
> 
> 时间：2013-03-20T01:05:18.437
> 
> 标签：javascript, web

我正在使用 chart.js 在我的网站上显示一个圆环图，我希望能够使用从页面上其他位置提取的内容数组动态填充图表中的值。Chart.js 在这个数据结构中存储它的圆环图值

```
var doughnutData = [
            {
                value: 10,
                color:"#F7464A"
            },
            {
                value : 10,
                color : "#46BFBD"
            },
            {
                value : 20,
                color : "#FDB45C"
            },
            {
                value : 50,
                color : "#949FB1"
            }

        ]; 
```

如何在 Javascript 中动态填充此数据结构的值？

我已经知道我将如何使用它生成随机颜色（对于任何感兴趣的人）

```
'#'+Math.floor(Math.random()*16777215).toString(16) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:44:46.320

您将遇到的问题是实际随机性并没有真正被认为是随机的，因此您必须想办法检查每种颜色之间的颜色相似性，以确保它们不会出现难以区分。我以前用三种颜色做过这个（下图）。相反，我建议创建一个您已经知道不同的颜色列表，并从该列表中随机选择。

我试图将我的颜色保持在一定范围内：

```
function getRandomColor() {
    var color = '';
    while (!color.match(/(#[c-e].)([e-f][a-f])([9-c].)/)) {
        color = '#' + Math.floor(Math.random() * (Math.pow(16,6))).toString(16);
    }
    return color;
}

function getColorSimilarityIndex(c1, c2) {
    var index = 0;
    for (i = 1; i <= 6; i++) {
        if (i == 1 || i == 5) {
            if (c1.substring(i, i + 1) === c2.substring(i, i + 1)) {
                index++;
            }
        }
    }
    return index;
}

var color1 = getRandomColor();
var color2 = getRandomColor();
var color3 = getRandomColor();

while (getColorSimilarityIndex(color2, color1) > 0) {
    color2 = getRandomColor();
}
while (getColorSimilarityIndex(color3, color1) > 0 || getColorSimilarityIndex(color3, color2) > 0) {
    color3 = getRandomColor();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T18:56:01.340

您必须使用其中的适当元素构建数组，如下所示：

```
var getcolor = function (num) {
    if (num == 0)
        return "#F38630";
    if (num == 1)
        return "#E0E4CC";
    if (num == 2)
        return "#69D2E7";
    if (num == 3)
        return "#003399";
    if (num == 4)
        return "#969696";
};

var piedata = []
for (i = 0; i <= self.countViolationsByManager().length - 1; i++) {
    piedata.push({
        value: self.countViolationsByManager()[i].Count(),
        label: self.countViolationsByManager()[i].MoneyManagerName(),
        color: getcolor(i)
    });
}

var pieoptions = {
}
var ctx = $("#myPieChart").get(0).getContext("2d");
var myNewChart = new Chart(ctx);
new Chart(ctx).Pie(piedata, pieoptions); 
```

# c++ - 在二叉树中查找父节点的位置

> ID：15513482
> 
> 赞同：6
> 
> 时间：2013-03-20T01:06:32.860
> 
> 标签：c++, tree, binary-tree, parent-child, uncertainty

所以我需要帮助想出一个表达式，它总是会给我一个孩子的父节点在二叉树中的位置。这是我的老师将在我们的考试中提出的问题示例：

“考虑一棵完整的二叉树，它正好有 10,000 个节点，使用从索引 0 开始的数组来实现。通过从左到右一次从树中提取一个级别的元素来按顺序填充数组。假设一个节点存储了它的值在位置 4999。该节点的父节点的值存储在哪里？

我的老师没有告诉我们如何解决这样的问题。她只是说“画一棵二叉树并找到一个模式”。我就是这么做的，但我什么也想不出来！请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T02:50:31.373

以下完全使用整数除法。即小数余数被丢弃。对于任何给定的节点 index `N`，该节点的子节点将始终位于同一数组中的`2N+1`位置。`2(N+1)`

因此，**此类数组****中任何大于 0 的节点的父节点将始终位于 index 处。`N``(N-1)/2`**

父母对孩子的例子：

```
Parent 0: children 1,2
Parent 1: children 3,4
Parent 2: children 5,6
Parent 3: children 7,8
etc... 
```

孩子到父母的例子：

```
Child 8 : Parent = (8-1)/2 = 7/2 = 3
Child 7 : Parent = (7-1)/2 = 6/2 = 3
Child 6 : Parent = (6-1)/2 = 5/2 = 2
Child 5 : Parent = (5-1)/2 = 4/2 = 2 
```

所以对于你的问题：

```
(4999-1)/2 = 4998/2 = 2499 
```

注意：记住这一点，因为当您开始编写基于数组的堆排序算法时，您将*广泛使用它。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T18:10:26.617

感谢您的所有帮助。我找到了我的问题的答案！

查找父节点位置的一般算法是：

[i + (root - 1)] / 2 其中 i 是给定节点的位置，root 是根的位置。所以在上面的给定问题中，根从位置 0 开始。所以找到任何节点的父节点的方程是 [i + (0 - 1)] / 2 = (i - 1) / 2

现在假设根从位置 3 开始，那么等式将是 [i + (3 - 1)] / 2 = (i + 2) / 2 ！！！这是我需要的算法。你们中的大多数人帮助我解决了我提供的一个问题，但我实际上需要一个二叉树的通用解决方案，它的根可以从任何位置开始；不只是零

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T02:02:54.183

似乎这就是数组元素如何根据数组索引映射回树

```
 0
  1     2
3   4 5   6 
```

如果是这样，则索引的父级`n`位于`floor( (n - 1) / 2 )`(for `n != 0`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T01:33:43.917

如果您对请求的数字 (4999) 进行 log2 并取整数部分，它将为您提供最接近数字 (12) 的二的幂。它是 2^12 = 4096。

4096 和 2^13 - 1 之间的节点的父节点是 2^11 和 2^12 - 1 之间的节点。对于第一个范围内的每对节点，您在第二个范围内都有其父节点。因此，您可以将它们映射为差值一半的整数部分（4999 - 4096）并将其添加到父范围开始（2048）。

所以你将有 903 / 2 的楼层，并将其添加到 2048，得到 2499。

请注意，我没有进行精确计算，采取答案的策略而不是结果。

你可以把这个算法放在一个数学表达式中，只需要一点工作。

希望能帮助到你！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-21T02:34:50.630

如果 n 为偶数，则父节点位于 n/2。如果 n 为奇数，则为 (n-1)/2。所以你可以记住它为**math.ceil((n-1)/2)**

# visual-studio-2010 - 如何在 VB 2010 中使用字符串操作方法从文本文件中提取和操作数据

> ID：15513487
> 
> 赞同：0
> 
> 时间：2013-03-20T01:06:52.003
> 
> 标签：visual-studio-2010

我需要有关从特定文本文件 (C:\test.txt) 中提取数据的帮助。文本文件包含学生姓名和分数：

Alice,76,45,87,23 Ben,76,48,85,65 Julie,76,36,49,86 Monica,85,90,83,76

给定等级结构：A (70-100), B(60-69),C(50-59),D(40-49),F(0-39)

应用程序应计算每个学生获得的平均分和成绩 显示获得最高分的学生 显示班级所有学生的平均分 列出获得“C”级的学生

需要使用的方法是 Len, Mid 和 Instr File 逐行处理

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:27:23.910

可以证明它可以被整理，因为我刚刚把它打掉了。

要对其进行测试，请在表单上放置一个多行文本框（名为 textbox1）和一个按钮（名为 button1），然后单击该按钮。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

'-> Data
'   Alice, 76, 45, 87, 23
'   Ben, 76, 48, 85, 65
'   Julie, 76, 36, 49, 86
'   Monica, 85, 90, 83, 76

'-> Variables
Dim strTextLine As String
Dim intCounter As Integer
Dim chrCurrentCharacter As String
Dim strBuffer As String
Dim strResults As String
Dim booNameFound As Boolean

'-> Processing
'1  calculate the average score and grade received by each student 
Dim intIndividualAverage As Integer = 0
'2  Display who received the highest mark 
Dim intHighest As Integer = 0
Dim intTmpHighest As Integer = 0
Dim strHighest As String = ""
'3  Display the average mark of all students in the class 
Dim intGroupAverage As Integer = 0
'4  List students who received grade "C"
Dim strGradeCStudents = ""
Dim strName As String = ""

'-> Grading Rules
'   A (70-100), B(60-69),C(50-59),D(40-49),F(0-39)

'-> Open file and process data one line at a time
Try
  ' Create an instance of StreamReader to read from a file
  Dim objStreamReader As StreamReader = New StreamReader("c:\temp\test.txt")

  ' Read the lines from the file until the end of the file is reached.
  Do
    strTextLine = objStreamReader.ReadLine()
    'if not eof or empty text line
    If Trim(strTextLine) <> "" Then
      'reset vars
      strName = ""
      strBuffer = ""
      strResults = ""
      booNameFound = False
      intIndividualAverage = 0
      For intCounter = 1 To Len(strTextLine)
        chrCurrentCharacter = Mid(strTextLine, intCounter, 1)
        'is this a comma?
        If chrCurrentCharacter = "," Then
          'has the name been found?
          If booNameFound Then
            'this is a grade result(note there is no Grade E!)
            Select Case Val(strBuffer)
              Case 70 To 100
                strResults = strResults & " A"
                intIndividualAverage = intIndividualAverage + Val(strBuffer)
                intGroupAverage = intGroupAverage + Val(strBuffer)
              Case 60 To 69
                strResults = strResults & " B"
                intIndividualAverage = intIndividualAverage + Val(strBuffer)
                intGroupAverage = intGroupAverage + Val(strBuffer)
              Case 50 To 59
                strResults = strResults & " C"
                intIndividualAverage = intIndividualAverage + Val(strBuffer)
                intGroupAverage = intGroupAverage + Val(strBuffer)
                'grade C Students
                If InStr(strGradeCStudents, strName) > 0 Then
                  'alreadylisted inthe grade c list
                Else
                  strGradeCStudents = strGradeCStudents & strName & " "
                End If
              Case 40 To 49
                strResults = strResults & " D"
                intIndividualAverage = intIndividualAverage + Val(strBuffer)
                intGroupAverage = intGroupAverage + Val(strBuffer)
              Case Else
                strResults = strResults & " F"
                intIndividualAverage = intIndividualAverage + Val(strBuffer)
                intGroupAverage = intGroupAverage + Val(strBuffer)
            End Select
            strBuffer = ""
          Else
            'this is name
            booNameFound = True
            strResults = strBuffer
            strName = strBuffer
            strBuffer = ""
          End If
          'if its not a space 
        ElseIf chrCurrentCharacter <> " " Then
          strBuffer = strBuffer & chrCurrentCharacter
        Else
          'Spaces are not processed 
        End If
      Next
      'Process LAST result because there is no comma after it
      'so it must be done after the endof the line
      Select Case Val(strBuffer)
        Case 70 To 100
          strResults = strResults & " A"
          intIndividualAverage = intIndividualAverage + Val(strBuffer)
        Case 60 To 69
          strResults = strResults & " B"
          intIndividualAverage = intIndividualAverage + Val(strBuffer)
        Case 50 To 59
          strResults = strResults & " C"
          intIndividualAverage = intIndividualAverage + Val(strBuffer)
        Case 40 To 49
          strResults = strResults & " D"
          intIndividualAverage = intIndividualAverage + Val(strBuffer)
        Case Else
          strResults = strResults & " F"
          intIndividualAverage = intIndividualAverage + Val(strBuffer)
      End Select
      strBuffer = ""
      'Student average
      strResults = strResults & " (avg=" & (intIndividualAverage / 4) & ")" & vbCrLf & vbCrLf
      TextBox1.Text = TextBox1.Text & strResults
      'Console.WriteLine(strResults)
      'Highest?
      If intHighest = 0 Then
        strHighest = strName
      ElseIf intTmpHighest > intHighest Then
        strHighest = strName
      ElseIf intTmpHighest = intHighest Then
        strHighest = strHighest & " " & strName
      End If
    Else
      'The line was empty 
    End If
  Loop Until strTextLine Is Nothing
  objStreamReader.Close()
  '-> Display Summary
  TextBox1.Text = TextBox1.Text & vbCrLf & "SUMMARY" & vbCrLf
  TextBox1.Text = TextBox1.Text & "Highest Marks: " & strHighest & vbCrLf
  TextBox1.Text = TextBox1.Text & "Group Average: " & ((intGroupAverage / 4) / 4) & vbCrLf
  TextBox1.Text = TextBox1.Text & "Grade C Students: " & strGradeCStudents & vbCrLf
Catch Ex As Exception
  ' Let the user know what went wrong.
  TextBox1.Text = TextBox1.Text & "The file could not be read:"
  TextBox1.Text = TextBox1.Text & Ex.Message
  'Console.WriteLine("The file could not be read:")
  'Console.WriteLine(Ex.Message)
End Try
End Sub 
```

# java - 如何在Java中多重播放整数数组

> ID：15513489
> 
> 赞同：0
> 
> 时间：2013-03-20T01:07:12.453
> 
> 标签：java, arrays, multiplication

我有两个整数数组，我想将它们相乘，如下所示：

```
int[] arr1 = {6, 1}; // This represents the number 16

int[] arr2 = {4, 2}; // This represents the number 24 
```

我想将它们存储在一个新数组中，以便产品显示为：

```
int[] productArray = {4, 8, 3}; 
```

我知道如何通过乘以 2 x 24 之类的数字来做到这一点，因为我可以将这些值推入产品数组中。但是当涉及到超过个位数时，我迷失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:14:02.203

为什么需要这样做？无论如何，这里有一个例子：

```
int total1; // to find what the array represents in #
for (int c = 0; c < arr1.length() - 1; c++) {
 total1 += arr1[c] * Math.pow(10, (c+1)); // takes the number and adds it to the decimal number it should be
}
int total2;
for (int c = 0; c < arr2.length() - 1; c++) {
 total1 += arr2[c] * Math.pow(10, (c+1));
}
String s = Integer.toString(total2*total1);
for (int c = s.length()-1; c >= 0; c--) { // adds int to array backwards
  productArray.add(Integer.parseInt(s.atIndex(c)));
} 
```

注意：我没有对此进行错误测试或通过 JVM 运行它。Java 不是我常用的编程语言，所以我可能犯了一些错误。“productArray”需要是一个 ArrayList<>。我怀疑 Integer.parseInt() 仅适用于字符串，因此您可能必须搜索该函数的 char 版本。此外，您需要包括数学...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:25:33.107

```
int arr1num, arr2num, product;
multiplier = 1;
for (i = arr1.size();i>0;i--){
arr1num = arr1num + (arr1[i] * multiplier);
multiplier = multiplier * 10;
} 
```

--对第二个数组也这样做

-- 现在我们将 arr1num 和 arr2num 作为两个数组的编号，然后得到乘积

```
product = arr1num * arr2num; 
```

-- 现在将它存储在一个数组中

```
int divisor = 10;
int number;
for(i=0;i<int.length();i++){

number = product % divisor;
productArray.add(number);
divisor = divisor * 10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T01:29:51.890

您可以使用它（尽管它不是您可以用来执行此操作的最佳算法）：

```
public static int[] multiplyArrays(int[] a, int[] b){
    //turns arrays into integers
    String num1 = "";
    for (int i = a.length - 1; i > -1; i--){
        num1 += a[i];
    }

    String num2 = "";
    for (int i = b.length - 1; i > -1; i--){
        num2 += b[i];
    }

    //does calculation
    char[] answer = Integer.toString(Integer.parseInt(num1) * Integer.parseInt(num2)).toCharArray();

    //converts char array into int array
    int[] answer2 = new int[answer.length];

    for (int i = 0; i < answer.length; i++){
        answer2[answer.length - i - 1] = Integer.parseInt(String.valueOf(answer[i]));
    }

    return answer2;
} 
```

# python - 是否有用于金字塔显示文档的插件？

> ID：15513500
> 
> 赞同：0
> 
> 时间：2013-03-20T01:08:28.603
> 
> 标签：python, pyramid, documentation-generation

是否有用于金字塔的插件，可以自动显示 pdf 文件或 tex 文件中的文档？像金字塔中的文档这样的常规方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:39:30.293

据我所知 Pyramid 只是使用[Sphinx](http://sphinx.readthedocs.org/en/latest/)，然后通过 Github将其集成到[Read The Docs中。](https://readthedocs.org/)

# css - jQuery 使用自定义 div 和 css 进行验证

> ID：15513503
> 
> 赞同：0
> 
> 时间：2013-03-20T01:08:34.960
> 
> 标签：css, jquery-validate

我有一个 div，我希望登录错误消息进入：

```
<div id="loginMessage" class="blankBox">&nbsp;</div> 
```

当出现验证错误时，我希望这个 div 的类是“errorBox”。当没有验证错误时，我希望 css 为“空白框”。

我有以下 jQuery 验证：

```
<script>
    $(function() {
       $("#loginForm").validate({   
            rules: {
                username: "required",
                password: "required"
            },
            messages: {
                username: "Please enter a username",
                password: "Please enter a password",
            },
            errorLabelContainer: "#loginMessage",
            wrapper: "li",
                            highlight: function(element) {
                                $(element).addClass('errorBox');
                            }, 
                            unhighlight: function(element) {
                                $(element).removeClass('errorBox');
                            },
        });
    });
    </script> 
```

不幸的是，发生的事情是 errorBox css 被应用于输入字段。？！？我不能让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:28:36.207

根据您对另一个答案的评论：

> “我希望 css 在出现错误之前保持中立，然后在错误离开时重置为中立。”

我不知道“中性”是什么意思，但*默认情况下*，当所有错误离开容器时，插件会使容器“隐藏”。换句话说，重要的是容器包含错误时的样式，因为只有在其中有错误时才会看到它。否则，它只是隐藏起来。要实现此初始状态，请将样式设置为`display: none;`。您还可以设置其他属性，以了解何时看到错误。（请参阅 jsFiddle 示例）。

尽管有其他答案，`errorPlacement`但在这种情况下并不好。它仅用于放置单个消息。它与错误容器内的消息无关。

我还删除了您的`highlight`和`unhighlight`回调函数，因为它们是逐个字段触发的，并且与您的错误容器无关。（您还通过使用自己的函数覆盖它们来破坏它们的默认功能。）

**演示：http: [//jsfiddle.net/6dCB7/](http://jsfiddle.net/6dCB7/)**

**jQuery：**

```
$(document).ready(function () {

    $('#loginForm').validate({ // initialize the plugin
        errorLabelContainer: "#loginMessage",
        wrapper: "li",
        rules: {
            // your rules
        }
    });

}); 
```

**HTML**：

```
<div id="loginMessage"></div>
<form id="loginForm">
    ....
</form> 
```

**CSS**：

```
#loginMessage {
    display: none;
    /* also set the properties for when it displays with errors */
} 
```

# javascript - 如何从事件中传递命名函数

> ID：15513505
> 
> 赞同：2
> 
> 时间：2013-03-20T01:08:44.917
> 
> 标签：javascript, jquery

所以，我有一个简单的

```
$(document).on('#happyButton', 'click', function(event) {
    event.preventDefault();
    //more goes here... 
}); 
```

我想把它变成类似于：

```
doStuff = function(event) {
    event.preventDefault();
    //more goes here...
}

$(document).on('#happyButton', 'click', doStuff(event)); 
```

为了能够将此代码放在不同的地方，更重要的是在其他地方运行：

```
$(document).off('#happyButton', 'click', doStuff(event)); 
```

不幸的是，这给了我一个错误：

```
Uncaught TypeError: Cannot call method 'preventDefault' of undefined 
```

现在，*正确*的答案是“使用主干！” 但这是对以前代码的重构，我没有数周的时间来重构它。我也可以做一个简单的

```
$('#happyButton').off() 
```

我会根据需要，但我更喜欢前者作为更清洁的解决方案。

有没有人有其他想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:11:23.950

事件自动传递：

```
$(document).on('click', '#happyButton', doStuff);

function doStuff(event) {
    console.log(event.target);
    //event is available
} 
```

它是：

```
.on(event, selector, handler) 
```

不是：

```
.on(selector, event, handler) 
```

与`off()`

# javascript - 如何在 javascript 中使用构造函数

> ID：15513508
> 
> 赞同：0
> 
> 时间：2013-03-20T01:08:50.163
> 
> 标签：javascript, backbone.js

这是我的问题。

我正在使用 Backbone js，我定义的每个集合都需要对保存或销毁进行相同的检查。除了销毁成功函数需要传递一个元素以在销毁成功时从页面中删除。

我不想将相同的代码复制并粘贴到每个保存或销毁方法中，所以我创建了这个：

```
window.SAVE_TYPE_DESTROY = 'destroy';

window.SaveResponseHandler = function(el,type){
    if (!type){
        this.success = function() {
            this._success();
        };
    }else if (type == window.SAVE_TYPE_DESTROY){
        this.success = function() {
            this._success();
            $(el).remove();
        };
    }

};
SaveResponseHandler.prototype._success = function(model, response, options) {
                if ((response.success * 1) === 0) {
                    persistError(model, {
                        responseText: response.message
                    }, {});
                }
            };
SaveResponseHandler.prototype.error = persistError;

var saveResponseHandler = new SaveResponseHandler(); 
```

我像这样使用它：

```
 destroy: function() {
        var el = this.el;
        var model = this.model;
        this.model.destroy(new SaveResponseHandler(el,'destroy'));
    },
    change: function() {
        this.model.set({
            job_category_name: $($(this.el).find('input')[0]).val()
        });
        var viewView = this.viewView;
        this.model.save(null, saveResponseHandler);
    } 
```

问题是当调用成功时出现以下错误：

> 未捕获的类型错误：对象 [对象窗口] 没有方法 '_success'

任何帮助都感激不尽。我也愿意接受有关更好的处理方法的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:24:22.467

`this`里面`SaveResponseHandler.success`不是`SaveResponseHandler`，是`window`。

```
window.SaveResponseHandler = function(el, type) {
    var self = this;

    if (!type) {
        this.success = function() {
            self._success();
        };
    } else if (type == window.SAVE_TYPE_DESTROY) {
        this.success = function() {
            self._success();
            $(el).remove();
        };
    }
}; 
```

[http://jsfiddle.net/ethagnawl/VmM5z/](http://jsfiddle.net/ethagnawl/VmM5z/)

# ruby-on-rails - 如何避免间歇性 Errno::ETTXTBSY 异常？

> ID：15513509
> 
> 赞同：0
> 
> 时间：2013-03-20T01:08:54.513
> 
> 标签：ruby-on-rails, ruby

在 Rails 应用程序中的部分请求期间，我将目录从一个地方复制到另一个地方，将其视为一个工作区。有时，此复制操作会引发“Errno::ETXTBSY”异常。我似乎无法确定导致它的案例，有什么提示可以发现或完全避免它？

我已经确保目标目录是唯一命名的，所以它不应该是 2 个进程尝试写入同一个地方的情况。除此之外，我没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:48:06.800

ETXTBSY 表示您正在尝试打开以写入当前正在作为程序执行的文件，或者您正在尝试执行当前正在打开以进行写入的文件。既然您说您正在复制文件，而不是执行它们，那么它似乎很可能是前者，而不是后者。

您说您的目标是一个独特的新目标，但我的猜测是这并不完全正确，您实际上是针对现有目录，并且您尝试覆盖的文件之一当前作为正在运行的可执行文本段打开过程。

您还没有发布任何代码，因此很难具体评论。我建议您添加足够的日志记录，以便您确切知道正在处理哪些文件，特别是引发异常的源和目标路径。然后您可以使用[`lsof`](http://linux.die.net/man/8/lsof)查看哪个进程可能会打开该文件。

如果要覆盖当前打开的可执行文件，避免该问题的一种方法是首先[`unlink`](http://www.ruby-doc.org/core-2.0/File.html#method-c-unlink)访问目标文件。正在运行的进程仍将映射旧的 inode 并使用已删除的文件愉快地继续，但您的 open for write 将创建一个不会冲突的新文件。

# sql - SQL查询为许多字段选择行

> ID：15513523
> 
> 赞同：0
> 
> 时间：2013-03-20T01:10:08.137
> 
> 标签：sql

我有一个有 2 列的数据库。

```
PostTown | PostCode 
```

每个 PostTown 我都有 100 个独特的 PostTown 我有数千个 PostCode

我想做的是说：

```
select distinct(PostTown), first(PostCode) from PostData 
```

所以我只想要 PostTown 的第一个 PostCode，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:11:13.887

您没有定义“第一”，但这是一个好方法：

```
select postTown, min(PostCode)
from PostData
group by postTown 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:20:24.900

如果没有 Order By 字段，我不确定您能否保证获得第一条记录。您可以使用 Row_Number 尝试这样的事情：

SQL Server/甲骨文：

```
select
    PostTown, 
    PostCode
from
    (
    select 
        PostTown, 
        PostCode, 
        Row_Number() OVER (Partition By PostTown ORDER BY (SELECT 1)) rn
    from PostData
    ) t
where rn = 1 
```

MySQL：

```
select
    PostTown, 
    PostCode
from
    (
    select 
        @rn:=IF(@PrevPostTown=PostTown,@rn+1,1) rn,
        PostTown, 
        PostCode, 
        @PrevPostTown:=PostTown
    from PostData
    order by PostTown
    ) t
where rn = 1 
```

@GordonLinoff 提供了一种始终获取最小邮政编码的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:32:20.377

如果您确实需要每个 PostTown 的第一个 PostCode，并且您有一个自动递增的 id 列，请尝试以下操作：

```
SELECT 
    PostTown,
    PostCode,
FROM SomeTable sta
WHERE sta.id = (SELECT MIN(id) from SomeTable WHERE PostTown = sta.PostTown) 
```

这是一个奇怪的结构，我不知道它的效率如何，但是当我为每个产品处理多个图像时，它为我提供了可靠的主图像。

# facebook - Facebook PHP SDK 捕获点赞事件

> ID：15513526
> 
> 赞同：0
> 
> 时间：2013-03-20T01:10:20.333
> 
> 标签：facebook, facebook-like

如果用户使用顶部的官方 Facebook 'like' 按钮喜欢 iframe 页面选项卡，我需要记录到数据库中。我在stackoverflow上进行了搜索，发现了一个javascript片段......

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

但它不会为官方按钮触发（仅像添加到页面的按钮）？我在 FB.init 之后和 FB.Canvas 在异步调用中调整大小之前声明它。PHP中有没有办法捕捉到这一点 - 刷新时可能吗？JS 或 PHP 都可以（因为 JS 可以简单地 ajax 一个 php 文件）。签名的请求包含他们是否喜欢该页面，但我需要在它发生（或刚刚发生）时捕获它。非常感谢任何帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:42:21.117

最后用纯粹的PHP方式做了。

1：从 facebook 获取签名请求并提取喜欢的统计信息

2：创建一个变量 $liked 并根据签名请求值设置为“yes”或“no”

3：操纵会话 - 使用会话，因为当您“喜欢”时页面会刷新但会话仍然存在（但请求值会发生变化）

```
if(isset($_SESSION['likestatus'])){
    if($_SESSION['likestatus'] == "no" && $liked == "yes"){
        // do mysql updatestuff cause has liked page since session started  
        $_SESSION['likestatus'] = $liked;
    }
    else{
        $_SESSION['likestatus'] = $liked;
    }    
}
else {
    $_SESSION['likestatus'] = $liked;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:02:30.930

尝试 ：

window.fbAsyncInit = function () { FB.Event.subscribe('edge.create', function (targetUrl) { _gaq.push(['_trackSocial', 'facebook', 'like', targetUrl]); }); };

我认为您只需要在 fbAsyncInit 中设置下标。

# javascript - 如何将父div高度继承给它的孩子

> ID：15513527
> 
> 赞同：0
> 
> 时间：2013-03-20T01:10:23.010
> 
> 标签：javascript, jquery, html, css

我确实有 1 个父 div 和 2 个子 div，我希望这 2 个子 div 将等于其父高度，或者每当 1 个子 div 的内容扩展时，另一个子 div 也会扩展。我喜欢使用 % 而不是 px，这样当你放大或缩小高度时，高度大小保持不变，或者如果你们中的任何人知道一些技巧，我会很感激这是我的 js fiddle [http://jsfiddle。净/deftmagic/29Puw/4/](http://jsfiddle.net/deftmagic/29Puw/4/)

```
<div class="content-wrapper">
    <div class="task-pane">
        <p>sample</p>
        <p>sample</p>
        <p>sample</p>
    </div>
    <div class="tbl-div">
        <p>sample</p>
        <p>sample</p>
        <p>sample</p>
        <p>sample</p>
        <p>sample</p>
        <p>sample</p>
    </div>
</div>

.content-wrapper{
background:#000;
min-height:0;
width:100%;
  overflow:hidden;
    }
.task-pane{
    background:red;
    height:100%;  
    width:20%;
    float:left;
    }
.tbl-div {
    background:green;
     height:100%;
     width:80%;
    float:right;
} 
```

注意：伙计们，我已经搜索了一些同样的问题，它发生了一些确实使用表格，但我与它的冲突是当我使用表格标签时，它无法提供在其中添加我最需要的 div 标签，所以请如果有任何解决方案而不是表格，也许是一些脚本，我会很感激 - 谢谢^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:14:40.353

```
.content-wrapper {
    background:#000;
    overflow:hidden;
    position: relative;
}
.task-pane {
    background:red;
    min-height: 100%;
    width: 20%;
    left: 0px;
    position: absolute;
} 
```

和更新的[小提琴](http://jsfiddle.net/29Puw/6/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:30:44.757

我不得不多次这样做，并且有几个技巧来完成它，并根据情况而有所不同。对于这种情况，我将父级设置为相对大小，较小的子级设置为绝对大小，另一个默认设置，以便容器自行调整大小。

```
.content-wrapper{
    background:#000;
    min-height:0;
    width:100%;
    overflow:hidden;
    position: relative;
}
.task-pane{
    background:red;
    width:20%;
    position: absolute;
    top: 0; bottom: 0;
}
.tbl-div {
    background:green;
    width:80%;
    float:right;
} 
```

更新小提琴：http: [//jsfiddle.net/29Puw/9/](http://jsfiddle.net/29Puw/9/)

# javascript - 如何创建一个包含多个页面的网站，用户无需重新加载网页即可访问？

> ID：15513528
> 
> 赞同：2
> 
> 时间：2013-03-20T01:10:31.623
> 
> 标签：javascript, jquery, html

该网站非常简单，仅包含 4 个使用相同模板的页面。我希望用户能够通过单击顶部的链接无缝浏览不同的页面，而无需重新加载任何内容。

基本上，当用户第一次登陆网站时，应该加载整个网站。然后，在第一个页面完成加载后，用户可以单击顶部的任何链接，并且新网页将显示而无需重新加载任何内容。

我知道我应该使用 Jquery 或 Javascript 来完成此操作。我只是不确定 Jquery / Javascript 函数是做什么的。所有的网页都非常简单和相似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:21:56.703

基本上你只想为每个“页面”（实际上只是 div 或类似的东西）分配一个 id 或类，然后在你的 CSS 文件中，将它们中的每一个设置为 display:none。然后使用 jQuery 的 .show() 和 .hide() 来显示或隐藏它们。

更具体地说，您希望将一些处理程序绑定到导航，例如对于主页导航项：

```
$("#my-home-nav").click(function(){
    $("#my-home-div").show(); // or .fadeIn(), etc.
    $("#my-about-div").hide();
    $("#my-contact-div").hide();
}); 
```

如果页面很多，上述内容可能会使编写这种冗长的内容，并且添加额外的页面会有些困难。类似下面的内容可能更容易添加额外的页面：

```
var pageNames = ["home", "about", "contact"];
var namespace = "my";

var pages = pageNames.map(function(pageName) {
    return {
        nav: pageNameSelector(pageName, "nav"),
        div: pageNameSelector(pageName, "div")
    };
});

pages.forEach(function(page) {
    page.nav.click(function() {
        clearPages(pages);
        page.div.show();
    });
});

function pageNameSelector(pageName, type) {
    return $(["#" + namespace, pageName, type].join("-"));
}

function clearPages(pages) {
    pages.forEach(function(page) {
        page.div.hide();
    });
} 
```

因此，您所要做的就是遵循相同的约定来识别其他页面，其中给出了 nav/div 的 id，`NAMESPACE-PAGENAME-TYPE`并且当您向 中添加额外的页面名称时`pageNames`，显示/隐藏功能将正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:27:53.083

你几乎在描述标签。您可以为此使用 jQuery UI 选项卡：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

或者您也可以滚动您自己的标签 - 隐藏内容，然后在单击链接时显示正确的内容，隐藏所有其他内容。我倾向于自己构建，因为我可以让它完全按照我的意愿工作，而且它没有任何不需要的额外开销“东西”。如果您尝试但它不起作用，那么总有 jQuery UI 可以依靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T01:37:27.300

有一个名为[JQuery Tools](http://jquerytools.org)的 JQuery 插件，它为常见的网页设计功能提供了一个简单的界面，包括您需要的功能。具体来说，[选项卡](http://jquerytools.org/demos/tabs/index.html)功能允许您`<div>`在单击 a 中的链接时加载某些 's `<ul>`。从[http://jquerytools.org/demos/tabs/index.html](http://jquerytools.org/demos/tabs/index.html)：

```
<!-- the tabs -->
<ul class="tabs">
    <li><a href="#">Tab 1</a></li>
    <li><a href="#">Tab 2</a></li>
    <li><a href="#">Tab 3</a></li>
</ul>

<!-- tab "panes" -->
<div class="panes">
    <div>First tab content. Tab contents are called "panes"</div>
    <div>Second tab content</div>
    <div>Third tab content</div>
</div> 
```

您需要的唯一 JavaScript 是：

```
// perform JavaScript after the document is scriptable.
$(function() {
    // setup ul.tabs to work as tabs for each div directly under div.panes
    $("ul.tabs").tabs("div.panes > div");
}); 
```

这将使所有链接`ul.tabs`导航到*直接*为子级的每个 div `div.panes`（因此`>`- 如果需要，请确保它在那里）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T01:40:49.420

您也可以使用框架。一个网页可能包含多个框架，您还可以使其中一些不可见（包括一个开关）。检查此链接： http: [//www.pageresource.com/jscript/jframe1.htm](http://www.pageresource.com/jscript/jframe1.htm)

# vba - 使用 Excel VBA 插入公式

> ID：15513529
> 
> 赞同：0
> 
> 时间：2013-03-20T01:10:52.033
> 
> 标签：vba, excel, excel-formula

我需要在使用 vba 编码时插入一个公式。

目前的代码行是

```
=IF(
    AND(
        Compliance="No",
        OR(
            Delivery <> "",
            C31 <> ""
        )
    ),
    "Please Delete Compliance Data",
    IF(
        AND(
            E11="",
            E13="",
            E23="",
            E25="",
            E26="",
            E28="",
            E30="",
            E31=""),
        VLOOKUP(C15,'Extrapolated RV Calculator'!B:S,18,0),
        "Please complete form / SC request"
    )
)" 
```

代码中的文本部分似乎出错了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:27:36.953

以下是在 VBA 中的字符串中使用引号的四种方法：

*   将 "" 替换为 Chr$(34)。34是引号的ASCII码
*   使用 String(2,Chr$(34)) 做双引号
*   每个使用两个双引号（根据蒂姆的评论）
*   用不同的方法替换两个双引号，例如工作表函数的 ISBLANK。

这些都不是更好的。我通常使用两个双引号来转义它们。但有时我把很多引号放在一起，很难阅读和维护，所以我会使用不同的方法。这是一个例子：

```
Dim aFormula(1 To 5) As String

aFormula(1) = "=IF(AND(Compliance=""No"",OR(Delivery<>" & String(2, Chr$(34))
aFormula(2) = ",C31<>" & String(2, Chr$(34)) & ") ),"
aFormula(3) = Chr$(34) & "Please Delete Compliance Data" & Chr$(34)
aFormula(4) = ",IF(AND(ISBLANK(E11),ISBLANK(E13),ISBLANK(E23),ISBLANK(E25),ISBLANK(E26),ISBLANK(E28),ISBLANK(E30),ISBLANK(E31)),"
aFormula(5) = "VLOOKUP(C15,'Extrapolated RV Calculator'!B:S,18,0),""Please complete form / SC request""))"

Sheet1.Range("R13").Formula = Join(aFormula, vbNullString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:24:27.487

为了将来为您提供支持，当您想在您还不熟悉的 VBA 代码中使用 Excel 中的功能时，我强烈建议您执行以下操作。

转到开发人员菜单，然后按录制宏按钮。

现在在单元格中填写公式，通过按删除清除单元格内容，通过进入单元格并删除所有字符并按回车键清除单元格内容。

现在停止宏。并转到 VBA 窗口。了解如何构建代码来完成这些事情。

每当您想做其他事情时也可以应用此方法，以了解可以使用什么来获得所需的结果，而无需在互联网上浏览很长时间！

还可以在局部变量窗口或调试中观察局部变量。打印您尝试构建的字符串以查看它到目前为止的样子

# .net - 从 Perl 连接到 .NET 远程处理接口

> ID：15513532
> 
> 赞同：0
> 
> 时间：2013-03-20T01:11:02.710
> 
> 标签：.net, perl, remoting

我正在尝试从 Perl (ArGoSoft Mail Server .NET) 控制邮件服务器。它为此目的提供的只是一个 .NET 远程处理接口（在[http://en.wikipedia.org/wiki/.NET_Remoting](http://en.wikipedia.org/wiki/.NET_Remoting)阅读更多内容）。

我对 .NET 不是很熟悉，我所有的系统都基于 Apache 和 Perl（一些在 Windows 上，一些在 Linux 上）。我需要从 Perl 控制邮件服务器，能够查看、添加或删除域和用户以及其他相关内容。所有这些都可以使用远程接口来完成，ArGoSoft Web 接口实际上使用了远程接口，该接口自然只在 IIS 上运行。

我正在尝试找到一种与 Perl 的远程接口进行通信的方法。同样，我对 .NET 不是很熟悉，但似乎是某种使用二进制数据的 Web 服务。如果我尝试从 telnet 连接到它，我将无法执行任何操作，并在我开始输入任何内容时立即回复错误。

此外，我使用嗅探器查看 Web 界面和远程处理界面之间的通信，我得到的 50% 是二进制数据。

所以，我想知道这里是否有人可以想到一个可能的解决方案。

提前致谢，

弗朗西斯科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:38:53.053

我怀疑您唯一合理的解决方案是编写一个与服务器对话并公开 Perl 程序可以访问的接口的 .NET 包装器。选项将是 COM（如果 Perl 可以做 COM...我不知道）、HTTP 接口或自定义 TCP 接口。

直接与 Remoting 界面对话会非常困难。您必须为正在传递的 .NET 对象编写二进制反序列化程序。编写反序列化器可能需要比学习足够多的 .NET 编程（如果您不知道）来编写包装器所需的时间更长。

您可以使用任何 .NET 支持的语言编写 .NET 包装器：C#、F#、Visual Basic .NET、托管 C++ 等。

# wordpress - Wordpress 设置需要哪些表格？

> ID：15513535
> 
> 赞同：0
> 
> 时间：2013-03-20T01:11:15.957
> 
> 标签：wordpress, content-management-system

大家好，我是 wordpress 的新手，也是其他 CMS 平台的新手，我想知道您是否可以给我一些建议。我正在建立一个分类广告网站，我想知道我应该在我的数据库中的哪里为发布的项目和用户创建一个表？

它应该在同一个wordpress DB上吗？我应该创建一个新的数据库吗？如何管理用户和帖子？

谢谢你们，只要你有道理，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T15:14:33.720

你不需要创建一个表，只需要一个数据库。首次访问 WordPress 时，它会将您需要的所有表添加到数据库中。

# vb.net - Visual Basic 如何比较标签中的 3 个值？

> ID：15513536
> 
> 赞同：3
> 
> 时间：2013-03-20T01:11:19.757
> 
> 标签：vb.net

我已经尝试了所有可能的组合，但我就是无法让它正常工作。此游戏需要测试所有 3 个骰子是否相同，如果相同，则点值加 1 并显示为`lblPoints`。

这是我需要更改的特定代码行：

```
 If (lblDice.Text = lblDice2.Text) And (lblDice2.Text = lblDice3.Text) Then
            Points += 1
        End If 
```

如果有帮助，下面是整个游戏：

```
 Dim randomObject As New Random()
    Dim n, m, o, p As Integer
    Dim RollNumber = 1
    Dim TurnNumber As Integer
    Dim Points As Integer

    Private Sub btnRoll_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRoll.Click
        lblPoints.Text = Points

        If (lblDice.Text = lblDice2.Text) And (lblDice2.Text = lblDice3.Text) Then
            Points += 1
        End If

        If btnHold.Enabled = True Then
            Timer1.Enabled = True
        End If
        If btnHold2.Enabled = True Then
            Timer2.Enabled = True
        End If
        If btnHold3.Enabled = True Then
            Timer3.Enabled = True
        End If

        TurnNumber += 1
        lblTurns.Text = TurnNumber

        If TurnNumber = 3 Then
            RollNumber += 1
            TurnNumber = 0
        End If

        lblRolls.Text = RollNumber

        If RollNumber = 5 Then
            btnRoll.Enabled = False
            If Points = 0 Or 1 Then
                lblPoints2.Text = "You have done poorly"
            ElseIf Points = 2 Or 3 Then
                lblPoints2.Text = "Mediocre at best"
            ElseIf Points = 4 Then
                lblPoints2.Text = "Almost perfect"
            ElseIf Points = 5 Then
                lblPoints2.Text = "Almost perfect"
                picJackpot.Visible = True
            End If
        End If

    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        m = m + 1
        If m < 10 Then
            n = randomObject.Next(1, 7)
            lblDice.Text = n
            die1PictureBox.Image = ImageList1.Images(n - 1)
        Else
            Timer1.Enabled = False
            m = 0
        End If
    End Sub

    Private Sub Timer2_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer2.Tick
        m = m + 1
        If m < 10 Then
            n = randomObject.Next(1, 7)
            lblDice2.Text = n
            die2PictureBox.Image = ImageList1.Images(n - 1)
        Else
            Timer2.Enabled = False
            m = 0
        End If
    End Sub

    Private Sub Timer3_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer3.Tick
        m = m + 1
        If m < 10 Then
            n = randomObject.Next(1, 7)
            lblDice3.Text = n
            die3PictureBox.Image = ImageList1.Images(n - 1)
        Else
            Timer3.Enabled = False
            m = 0
        End If
    End Sub

    Private Sub btnHold_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHold.Click
        btnHold.Enabled = False
        btnUnhold.Enabled = True
    End Sub

    Private Sub btnUnhold_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUnhold.Click
        btnHold.Enabled = True
        btnUnhold.Enabled = False
    End Sub

    Private Sub btnHold2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHold2.Click
        btnHold2.Enabled = False
        btnUnhold2.Enabled = True
    End Sub

    Private Sub btnUnhold2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUnhold2.Click
        btnHold2.Enabled = True
        btnUnhold2.Enabled = False
    End Sub

    Private Sub btnHold3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHold3.Click
        btnHold3.Enabled = False
        btnUnhold3.Enabled = True
    End Sub

    Private Sub btnUnhold3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUnhold3.Click
        btnHold3.Enabled = True
        btnUnhold3.Enabled = False
    End Sub

    Private Sub btnRestart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRestart.Click
        Dim msg As String
        Dim title As String
        Dim style As MsgBoxStyle
        Dim response As MsgBoxResult
        msg = "Are you sure you want to start a new game? If not, you can select 'No' to continue with your current game."
        style = MsgBoxStyle.DefaultButton2 Or _
           MsgBoxStyle.Critical Or MsgBoxStyle.YesNo
        title = "New Game"

        response = MsgBox(msg, style, title)
        If response = MsgBoxResult.Yes Then
            Reset()

        End If

    End Sub

    Private Sub ColorChangeToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ColorChangeToolStripMenuItem.Click

        'Notice the ... in the menu...that means a dialog box will come

        Dim dialog As New ColorDialog   ' Color Dialog
        Dim result As DialogResult ' stores Button clicked

        dialog.FullOpen = True ' show all colors
        result = dialog.ShowDialog

        ' do nothing if user clicked dialog's Cancel Button
        If result <> Windows.Forms.DialogResult.Cancel Then
            ' assign new color to Paint object
            Label1.ForeColor = dialog.Color
        End If

    End Sub

    Private Sub FontChangeToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FontChangeToolStripMenuItem.Click
        'Notice the ... in the menu...that means a dialog box will come

        Dim dialog As New FontDialog   ' Font Dialog
        Dim result As DialogResult ' stores Button clicked

        ' show dialog and get result
        result = dialog.ShowDialog()

        ' do nothing if user clicked dialog's Cancel Button
        If result <> Windows.Forms.DialogResult.Cancel Then
            ' assign new font value to TextBox
            If Windows.Forms.DialogResult.OK = MessageBox.Show("Changing Font. Click Ok to Change,\n Cancel for no change to occur.", _
                                     "Warning", MessageBoxButtons.OKCancel) Then
                Label1.Font = dialog.Font
            End If

        End If

    End Sub

    Private Sub SelectAColorToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SelectAColorToolStripMenuItem.Click

        Dim dialog As New ColorDialog   ' Color Dialog
        Dim result As DialogResult ' stores Button clicked

        dialog.FullOpen = True ' show all colors
        result = dialog.ShowDialog()

        ' do nothing if user clicked dialog's Cancel Button
        If result <> Windows.Forms.DialogResult.Cancel Then
            Me.BackColor = dialog.Color
        End If

    End Sub

    Private Sub SelectAnImageToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SelectAnImageToolStripMenuItem.Click
        Dim msg As String
        Dim title As String
        Dim style As MsgBoxStyle
        Dim response As MsgBoxResult
        msg = "Are you sure you want to see what happens when you get a perfect score without actually playing? That's cheating.. and will reset the game!"
        style = MsgBoxStyle.DefaultButton2 Or _
           MsgBoxStyle.Critical Or MsgBoxStyle.YesNo
        title = "New Game"

        response = MsgBox(msg, style, title)
        If response = MsgBoxResult.Yes Then
            Dim FileChooser As New OpenFileDialog()
            Dim result As DialogResult

            result = DialogResult = FileChooser.ShowDialog()

            If result <> Windows.Forms.DialogResult.Cancel Then
                If FileChooser.FileName <> "" Then
                    Me.BackgroundImage = System.Drawing.Image.FromFile(FileChooser.FileName)
                    Reset()
                Else
                    MessageBox.Show("No Change Made. File Not Selected!", "Warning", _
                                    System.Windows.Forms.MessageBoxButtons.OK, _
                                    System.Windows.Forms.MessageBoxIcon.Exclamation)
                End If
            End If
        End If

    End Sub

    Private Sub btnHow_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHow.Click
        MessageBox.Show(" You will have 5 rolls.  In each roll you have up to 3 turns. Your object in each of the turns is to get three of a kind on the dice.  You can hold some die and roll only some of the die, or you can reroll all the dice.  If in a turn you get three of a kind, you get a point.  At the end of 5 turns you could have a maximum of 5 points and you will get a special prize.")
    End Sub

    Sub Reset()
        RollNumber = 1
        lblRolls.Text = RollNumber
        TurnNumber = 0
        lblTurns.Text = TurnNumber
        Points = 0
        lblPoints.Text = Points
        lblPoints2.Text = ""

        btnRoll.Enabled = True
        btnHold.Enabled = True
        btnHold2.Enabled = True
        btnHold3.Enabled = True
        btnUnhold.Enabled = False
        btnUnhold2.Enabled = False
        btnUnhold3.Enabled = False

        die1PictureBox.Image = Nothing
        die2PictureBox.Image = Nothing
        die3PictureBox.Image = Nothing
        lblDice.Text = ""
        lblDice2.Text = ""
        lblDice3.Text = ""
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:19:57.673

发生的情况是，在运行重置子例程和启动程序后，您在“”上得到了有效的比较，因为您的骰子被初始化为相同的值。尝试使用布尔值来表示新游戏，这样当您的骰子从头开始时，您将无法匹配。像这样的东西。

在声明中添加一个布尔变量

```
Dim Restart as Boolean = True 
```

**在您的 BtnRoll_Click 事件处理程序中**

```
If Not restart Then
    If (lblDice.Text = lblDice2.Text) And (lblDice2.Text = lblDice3.Text) Then
        Points += 1
    End If
End If
Restart = False 
```

并将其添加到重置子程序的末尾。

```
Restart = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:36:31.623

尝试

```
If String.Compare(lblDice.Text, lblDice2.Text) = 0 And String.Compare(lblDice2.Text, lblDice3.Text) = 0 Then
    Points += 1
Else 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T20:32:07.900

```
tente (val(text.text)) then   

exemplo  if text1 = (val(text2.text)) then
 text1 =0 
end if 
```

# azure - Azure 网站 - 监控数据

> ID：15513541
> 
> 赞同：2
> 
> 时间：2013-03-20T01:11:34.497
> 
> 标签：azure, azure-web-app-service, azure-diagnostics

我们正在尝试了解 Windows Azure 管理 API 为 Azure 网站（不是 Webroles）返回的监控数据的复杂性

例如，下图描述了为 CPUTime 检索的数据点。这似乎表明在晚上 10:00 到晚上 10:39 的范围内，我已经用完了 3.171 秒的 CPU。这是否可以转化为我们都习惯于在 Perfmon 中看到的 CPU 利用率（以百分比形式）？

这会在每个时钟小时重置吗？TimeGrain 是什么？

有趣的是，“计数”表示“1”——对我来说，这意味着时间段中的测量次数，但即使在对 API 发出后续调用后，计数仍保持为 1（但总值会发生变化）。

最终目标是将捕获的指标转换为每个人都习惯于在 Perfmon 监控期间看到的标准 CPU 利用率百分比。

我猜测需要进行两个相对接近的测量，计算测量之间的增量（以毫秒为单位）并除以测量之间的总跨度（以毫秒为单位） - 以便产生百分比值。它是否正确？

![在此处输入图像描述](../Images/4a0efb4bb4ee5315b9275a43dcc1c39d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:23:52.843

“免费”和“共享”模式下的 Azure 网站在多租户环境中运行。在这种情况下，您无法将 CpuTime 转换为 CPU 利用率 %。在保留模式的情况下，这在技术上是可行的，但当前未公开此值。另请注意，如果您将网站升级到“保留”模式，所有其他网站也将升级并共享相同的保留实例。

# javascript - 在 JavaScript 函数中定义“this”并向函数发送参数

> ID：15513544
> 
> 赞同：2
> 
> 时间：2013-03-20T01:11:46.893
> 
> 标签：javascript

我有一个名为 myFunction() 的函数。

在 myFunction 中，我希望“this”引用父级的“this”。

好的，我将 myFunction 称为`myFunction.call(this)`.

伟大的！

糟糕，现在我需要将参数传递给 myFunction。通常，我只会使用`myFunction(myArg)`，但是那个调用的东西让我很困惑。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:15:10.907

第一个参数之后的参数将作为单独的参数传递给您的函数[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
myFunction.call(this, argument_1, argument_2); 
```

或者，您可以使用 apply 它允许您将参数作为数组（或类似对象的数组）[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)传递：

```
myFunction.apply(this, argsArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:15:01.407

[Javascript调用函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

绑定后，您可以向函数发送所需的所有参数

```
myFunction.call(this,arg1,arg2,...); 
```

# vb.net - 将函数声明为私有与公有之间有什么实际区别？

> ID：15513546
> 
> 赞同：5
> 
> 时间：2013-03-20T01:11:57.823
> 
> 标签：vb.net, oop, class, methods

因此，当我一直在阅读/学习类及其中的方法时，我几乎没有发现将方法声明为公共与私有之间的实际区别。

我知道区别在于私有类只能在类内访问，而公共方法可以从类外的代码（其他类、函数）中访问。但我真正想知道的是：

*   为什么在部署应用程序时想要/不想以一种或另一种方式声明它？
*   是否有最佳实践可以指导是否将方法声明为公有或私有？

另外，我不知道这是否重要，但我主要在 Web 应用程序环境中学习 VB.Net 和 C#，因此具体说明会有所帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T01:38:48.627

**封装**意味着您应该将每个类视为提供服务的机器。例如，椅子可以让您坐在上面，或者割草机可以让您修剪草坪。

**私有**方法与机器的内部工作有关。相反，**公共**方法与您（其他类）如何与机器交互有关。

**示例一：** *椅子...*

坐在椅子上，你不需要知道填充物的体积或订书钉的数量，你基本上只需要知道它是否被占用，是否稳定。

*   公共方法：IsStable、IsOccupied、Sit
*   私有方法：CalculateStuffingVolume、CountNumberOfStaples

**示例二：** *割草机...*

对于割草机，您需要知道它是否有足够的燃料（或已插入电源），刀片是否锋利，以及是否能够打开它。

*   公共方法：GetFuelLevel、IsBladesSharp、TurnOn、TurnOff
*   私有方法：燃烧等，太多无法想象。

**结论：**

*因此，当您开发时，您将看到的只是...*

*示例一：* Chair.Sit、Chair.IsStable 和 Chair.IsOccupied

或者

*示例二：*割草机.GetFuelLevel、割草机.IsBladesSharp、割草机.TurnOn、割草机.TurnOff

作为开发人员，您不必考虑室内装潢中的螺纹数量、油箱盖的颜色、刀片的 RPM 数量或椅子是否粘在一起或装订在一起。这种区别使得将您的应用程序放在一起变得更加容易，而不会被细节淹没。此外，它允许程序员只公开必要的信息，从而增加了安全级别。正如约翰所提到的，这可以防止 Person 类在不应该调用 Lawnmower.Combust(fuel) 时调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T01:14:30.097

如果该方法是私有的，那么您不必考虑外部类错误地调用它。

这样做的好处之一是它允许将类的接口（它的公共部分）与其实现*分开*。如果没有人知道你是如何实现你的类的（也就是说，如果没有取决于你如何实现它的代码），那么你可以自由地改变你实现它的方式，而不会破坏任何其他代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T01:58:38.053

它是面向对象编程中最重要的原则之一——[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

一个类通常提供一个（公共）接口。例如（伪代码）：

```
class Rectangle {
    private length;
    private width;

    public getPerimeter() {
        // return calculatePerimeterOld();
        return calculatePerimeterNew();
    }

    private calculatePerimeterOld() {
        // old variant
    }

    private calculatePerimeterNew() {
        // Here the perimeter is caltulated.
        // so: perimeter = 2 * (length + width)
        // or so: perimeter = 2 * (length) + 2 * (width)
        // or maybe so: perimeter = length + width + length + width - (0.5 * length) + 2 * 0.25 * length)
        return perimeter;
    }

} 
```

我可以随意更改我的私有方法。我可以用其他方法重命名或替换它们。但是我的公共界面将保持不变——它必须保持不变，因为这是我签署的合同，当我将方法定义为`public`. 一切，签署的`private`都是我的“黑匣子”，我可以在那里做任何我想做的事。

这是主要原因。另一个原因是，我们不应该向我们类的用户（-s）提供他们不需要的方法/信息。太多（信息）不好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T02:22:26.597

如果您正在开发一个仅由您维护的一次性网站，您可能会发现公共和私有功能的概念是不必要的。

但是，如果您将软件交付给其他人，并且他们构建在您的软件之上，那么这绝对是一个至关重要的概念。

可以把它想象成一台物理机器，里面有上千个旋钮和开关，但装在一个漂亮的盒子里，外面只有几个清晰标记的旋钮。

*   公共函数和方法是您为外部各方与您的软件交互而创建的函数和方法。
*   私有函数和方法是您为软件创建的与自身交互的函数和方法。

但是，如果它是由单个开发人员维护的一次性网站，那么这些差异就不那么重要了。

# c# - 默认的 asp.net web 应用程序/数据库存储在哪里？

> ID：15513547
> 
> 赞同：0
> 
> 时间：2013-03-20T01:12:00.293
> 
> 标签：c#, asp.net, asp.net-mvc, wcf, wcf-data-services

我创建了一个托管在 Web 应用程序中的 WCF 服务。我想为服务添加授权。现在它使用来自自定义用户名密码提供程序的硬编码用户名/密码。我试图做的是使用默认情况下在 Web 应用程序中的数据库来存储用户。

我转到 Web 应用程序配置页面并添加了一些用户。所以这意味着它必须进入数据库。这具体存储在哪里？或者更准确地说，我如何才能获得它的连接详细信息？使用自定义服务，我应该能够只使用一些验证代码检查任何数据库，而无需对其进行其他更改，那么任何人都可以向我展示通过 C# 中的数据库进行授权的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:19:43.613

数据库通常存储在您的应用程序的 App_Data 文件夹中，因为您使用的是 WCF[这里](http://msdn.microsoft.com/en-us/library/aa702565.aspx)是您为 wcf 实现自定义身份验证提供程序的教程。

# ruby-on-rails - 在 Grape 中使用 Rails ApplicationHelper

> ID：15513548
> 
> 赞同：0
> 
> 时间：2013-03-20T01:12:00.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, module, grape-api

我在 application_helper.rb 中定义了一个方法：

```
def bayarea_cities
[
  ['San Francisco', 'San Francisco'],
  ['Berkeley', 'Berkeley'],
  ...
]
end 
```

我也在使用 Grape 创建 API。它在 Rails 应用程序之外的自己的模块中：

```
module FFREST
  class API_V2 < Grape::API
  ... 
```

我很确定 Grape 是一个 Rack 应用程序，因此它无法正常访问 Rails 模块。当我尝试在其中一种 API 方法中调用“bayarea_cities”方法时，我收到未定义的变量或方法错误。我尝试将 ApplicationHelper 模块包含在“include ApplicationHelper”中，但这不起作用。

如何在 API 类中访问它？

更新：

感谢Deefour的更新。我添加`extend self`到我的 Helpers 模块中，并将这些方法引用为实例/混合方法（而不是模块方法），但我仍然遇到同样的错误。在我的 lib/helpers.rb 文件中，我有：

```
module Helpers
  extend self

  def bayarea_cities
    [
      'San Francisco',
      'Berkeley', 
      'Danville', 
      'Oakland',
      'Daly City', 
      'Sunnyvale'
    ]
  end 

  def us_states
    ['CA']
  end
end 
```

在我的 API 文件中，我有：

```
module FFREST
  class API_V1 < Grape::API
    include Helpers
    version 'v1', :using => :header, :vendor => 'feedingforward'
    ... 
```

当然，我有 config/initializers/helpers.rb 文件说`require "helpers"`

但是，当我调用美国各州 API 方法时，例如，通过转到`http://localhost:5000/api/states`，我得到：

```
undefined local variable or method `us_states' for #<Grape::Endpoint:0x007fd9d1ccf008> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:29:28.123

1.  使用以下内容创建一些`lib/helpers.rb`文件：`module Helpers; end`
2.  将`bayarea_cities`方法移动到此模块定义中
3.  添加一个`config/initializers/helpers.rb`包含`require "helpers"`
4.  在`ApplicationHelpers`类中，添加`include Helpers`
5.  在您的`API_V2`班级内添加`include Helpers`

您现在已经告诉 Rails 使该`Helpers`模块在您的应用程序中可用，并`bayarea_cities`在您的 Grape API 类和 Rails 应用程序中作为方法可用。上面的步骤只是为了理解这一点——你需要把这个通用功能放在一个可以被应用程序的任何部分轻松访问的地方。您可以（并且应该）使用命名空间您的`Helpers`模块。

* * *

另一个提示：添加`extend self`到模块以避免需要将所有内容定义为您在评论中提到的类方法

```
module Helpers
  extend self

  def bayarea_cities
    #...
  end
end 
```

最后，如果您正确地包含模块`include Helpers`，您*应该*能够简单地访问该方法`bayarea_cities`，而不是`Helpers.bayarea_cities`。如果不是这种情况，您绝对应该显示您收到的错误，以便我们为您解决。

# c++ - ofstream 由多个线程共享 - 一段时间后崩溃

> ID：15513549
> 
> 赞同：2
> 
> 时间：2013-03-20T01:12:03.530
> 
> 标签：c++, boost-thread, ofstream

此函数以 ofstream 作为引用，然后构建结构数据包并使用 ofstream 将结构从结构中线程化到一个匹配类。按照匹配距离的顺序返回一个包含 n 个匹配项的堆栈。然后，ofstream、数据包和堆栈通过引用传递给打印函数，该函数将匹配项写入同一输出文件 - 等待 ofstream 不使用时。问题是在写入一半匹配项后 ofstream 崩溃。

ofstream、packet 和 outfile 标头

```
void Match_Import_Start(Trie & tri)
{
    stack<Trie::MatchesT> out;
    ofstream myfile;
    Trie::MatchesT matchSet;

    myfile.open(outFile.c_str() );
    myfile << "DESCRIPTION,SUGGESTED.DESCRIPTION,EDIT" << "\n"; //write header
    myfile.close();

    Match_Import (tri, myfile, out, matchSet);

    return;
} 
```

从记录列表中产生线程

```
void Match_Import(Trie &tri, ofstream &myfile, stack<Trie::MatchesT> out, Trie::MatchesT matchSet)
{   
    out=parse_CSV_file(timeFile); //read in records

    settingT x;

    x.score=0;

    boost::thread_group tgroup; //http://stackoverflow.com/questions/8744279/create-threads-in-a-loop
    while (!out.empty() ) {
        matchSet=out.top();
        out.pop();

        tgroup.create_thread(boost::bind( MaxDistanceCorrections, boost::ref(tri), matchSet, boost::ref(myfile), boost::ref(x) ) );
    }
    tgroup.join_all();

    return;
} 
```

检查匹配的有效返回

```
void MaxDistanceCorrections(Trie & tri, Trie::MatchesT matchSet, ofstream &myfile, settingT &x)
{
    if (!matchSet.candidateStack.empty() ) ) {
        matchSet.candidateStack.sort(compareCorrMain);
        PrintCorrections(tri, matchSet, myfile, x);
        return;

    } else {        
        tri.suggest(matchSet); //send out to trie match

         if (matchSet.candidateStack.empty() ) { }// modify match parameters

        MaxDistanceCorrections(tri, matchSet, myfile, x);
    }
} 
```

并在 ofstream 可用时打印

```
void PrintCorrections(Trie &tri, Trie::MatchesT &matchSet, ofstream &myfile, settingT &x)
{   
    while (true) {
        if (!myfile.is_open() ) { 
          myfile.open(outFile.c_str(), ios::out | ios::app);
          break;
        }  
     }

    while (!matchSet.candidateStack.empty() ) {
        Trie::CorrectionT corr=matchSet.candidateStack.back();
        matchSet.candidateStack.pop_back();

        const bool flagGood=scoreSuggest (corr); //score
        if (flagGood ) x.score++;

        myfile << matchSet.testCase << "," << corr.match << "," << corr.editDistance << "\n";

    }
    myfile.close();

    return;
} 
```

在多线程方面相当新，这些函数作为单线程工作得很好。

是否应该将检查 ofstream 可用放在衍生候选匹配的 while 循环中？一旦 ofstream 可用，则启动打印序列应将 ofstream 与其他线程绑定。

有没有更好的方法来保留由多个线程共享的 ofstream 的使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:23:58.857

如果您不熟悉多线程，那么让这成为您应该使用互斥锁的一个教训。

`fstream`对象就是——一个对象。您必须使用互斥锁来防止同时访问它。

如果您只是希望线程能够将信息写入文件，则可以改为传递文件名（作为 a `string`）而不是`fstream`. 然后线程可以以独占读/写访问权限打开文件。这将使用本地`fstream`对象，并且锁定将由操作系统处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:23:02.623

此代码表现出来自多个线程的未定义行为。请参阅 N3485 27.2.3 [iostreams.threadsafety]/1：

> 除非另有说明 (27.4)，否则多个线程对流对象 (27.8, 27.9)、流缓冲区对象 (27.6) 或 C 库流 (27.9.2) 的并发访问可能会导致数据争用 (1.10)。[注意：数据竞争导致未定义的行为（1.10）。——尾注]

在一般情况下，跨线程使用流是不安全的。您必须使用锁来保护流，例如`std::mutex`.

请注意，即使流可以安全地跨线程访问，此代码也可能不会执行您想要的操作。考虑这一行：

```
myfile << matchSet.testCase << "," << corr.match << corr.editDistance << "\n"; 
```

这与

```
myfile << matchSet.testCase;
myfile << ",";
myfile << corr.match;
myfile << corr.editDistance;
myfile << "\n"; 
```

注意比赛条件。假设您的`operator<<`流实现由实现为您同步。在这个外部代码中你仍然有潜在的竞争。例如，这是跨 2 个线程的一种可能执行：

```
 Thread 1                              Thread 2
======================================================================
myfile << matchSet.testCase;
                                         myfile << matchSet.testCase;
myfile << ",";
                                         myfile << ",";
myfile << corr.match;
myfile << corr.editDistance;
myfile << "\n";
                                         myfile << corr.match;
                                         myfile << corr.editDistance;
                                         myfile << "\n"; 
```

您不会将其写成一行，而是将每个线程的输出混合在一起，从而导致乱码。

# java - 使用数组列表java进行插入排序

> ID：15513553
> 
> 赞同：0
> 
> 时间：2013-03-20T01:12:39.863
> 
> 标签：java, arrays, string, sorting, insertion-sort

我不知道如何打印我的新列表

```
import java.util.ArrayList;
import java.util.List;

  public class InsertionSort {
      public static int insertion(List<String> sorted) {

    sorted = new ArrayList<String>();
    String list[] = {"Banana","Pear","Apple","Peach","Orange"};

    String temp="";
    int f = list.length;
    for(int i=0;i<f;i++){
      for(int j=i+1;j<f;j++){
        if(list[i].compareToIgnoreCase(list[j])>0){
          temp = list[i];
          list[i]=list[j];
          list[j]=temp;
         }
      }
    }
    System.out.print(list);
    return list[].InsertionSort; 
```

对于上面的行，我不断收到此错误 1 ​​发现错误： InsertionSort.java [line: 22] Error: class expected

```
 }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:33:28.100

```
return list[].InsertionSort //what's mean is code? 
```

如果你想打印列表，你可以这样：

```
for(String str:list) //this list is list<String>
{
System.out.println(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:16:43.607

你想使用[for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)，它看起来像这样：

```
 for ( String i : list){
       System.out.print(i);
    } 
```

您不能像在此处那样打印出数组：

```
 System.out.print(list); // DOES NOT WORK 
```

因为 println 接受各种参数，但不是一个数组（尽管一个版本接受一个字符数组）。查看[API](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)

但如果你说，...

```
 System.out.print(list[1]); 
```

例如，它将编译..

不过，您还有其他问题要解决..

# c++ - boost同步服务器客户端编译错误

> ID：15513554
> 
> 赞同：2
> 
> 时间：2013-03-20T01:12:40.630
> 
> 标签：c++, linux

我正在尝试编译这段代码，这是一个简单的同步服务器，写在 boost::asio 库上。

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/thread.hpp>
#include <boost/shared_ptr.hpp>

using namespace std;

using namespace boost::asio;

typedef boost::shared_ptr<ip::tcp::socket> socket_ptr;

int main()
{

    io_service service;
    void client_session(socket_ptr sock);
    ip::tcp::endpoint ep( ip::address::from_string("127.0.0.1"), 2001);
    ip::tcp::acceptor acc(service, ep);
    while (true) {
        socket_ptr sock(new ip::tcp::socket(service));
        acc.accept(*sock);
        boost::thread(boost::bind(client_session,sock));
    }

}

void client_session(socket_ptr sock)
{
    while(true) {
        char data[512];
        size_t len = sock->read_some(buffer(data));
        if (len > 0)
            write(*sock, buffer("ok", 2));
    }
} 
```

编译时出错...

```
[root@kris server]# g++ -o test2 test2.cpp -lboost_system -lpthread

/tmp/cc2mbAsP.o: In function `main':
test2.cpp:(.text+0x13d): undefined reference to `boost::thread::~thread()'
/tmp/cc2mbAsP.o: In function `boost::detail::thread_data_base::thread_data_base()':
test2.cpp:(.text._ZN5boost6detail16thread_data_baseC2Ev[_ZN5boost6detail16thread_data_baseC5Ev]+0x26): undefined reference to `vtable for boost::detail::thread_data_base'
/tmp/cc2mbAsP.o: In function `boost::thread::thread<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >), boost::_bi::list1<boost::_bi::value<boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > > > > >(boost::_bi::bind_t<void, void (*)(boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >), boost::_bi::list1<boost::_bi::value<boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > > > >, boost::disable_if<boost::is_convertible<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >), boost::_bi::list1<boost::_bi::value<boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > > > >&, boost::detail::thread_move_t<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >), boost::_bi::list1<boost::_bi::value<boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > > > > > >, boost::thread::dummy*>::type)':
test2.cpp:(.text._ZN5boost6threadC2INS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEEET_NS_10disable_ifINS_14is_convertibleIRSK_NS_6detail13thread_move_tISK_EEEEPNS0_5dummyEE4typeE[_ZN5boost6threadC5INS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEEET_NS_10disable_ifINS_14is_convertibleIRSK_NS_6detail13thread_move_tISK_EEEEPNS0_5dummyEE4typeE]+0x7c): undefined reference to `boost::thread::start_thread()'
/tmp/cc2mbAsP.o: In function `boost::detail::thread_data<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >), boost::_bi::list1<boost::_bi::value<boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > > > > >::~thread_data()':
test2.cpp:(.text._ZN5boost6detail11thread_dataINS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEED2Ev[_ZN5boost6detail11thread_dataINS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEED5Ev]+0x3b): undefined reference to `boost::detail::thread_data_base::~thread_data_base()'
test2.cpp:(.text._ZN5boost6detail11thread_dataINS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEED2Ev[_ZN5boost6detail11thread_dataINS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEED5Ev]+0x55): undefined reference to `boost::detail::thread_data_base::~thread_data_base()'
/tmp/cc2mbAsP.o:(.rodata._ZTIN5boost6detail11thread_dataINS_3_bi6bind_tIvPFvNS_10shared_ptrINS_4asio19basic_stream_socketINS5_2ip3tcpENS5_21stream_socket_serviceIS8_EEEEEEENS2_5list1INS2_5valueISC_EEEEEEEE[typeinfo for boost::detail::thread_data<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >), boost::_bi::list1<boost::_bi::value<boost::shared_ptr<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > > > > >]+0x10): undefined reference to `typeinfo for boost::detail::thread_data_base'
collect2: ld returned 1 exit status 
```

有任何想法吗？

**固定的：**

使用 g++ -o test2 test2.cpp -lboost_system -lpthread -lboost_thread-mt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:21:58.950

您应该链接到`Boost.Thread`图书馆。添加`-lboost_thread`.

**注意**：您可能有它的多线程版本。然后尝试`-lboost_thread-mt`。

# css - DIV 不会一直延伸到页面底部？

> ID：15513557
> 
> 赞同：0
> 
> 时间：2013-03-20T01:13:09.177
> 
> 标签：css, html, layout, stretch

如果这是一个微不足道的问题，我深表歉意，但我似乎无法弄清楚。我有[这个网站](http://jsfiddle.net/m6DmQ/14/)，我需要侧面的导航栏，以及右侧的矩形（具有“ContentExtender”类的那个）向下延伸到物理页面的底部（嗯，ContentExtender 只需要延伸到内容以使其融合，但这是另一回事）。最简单的方法是什么？我查了一下，发现将 Body 的高度设置为 100% 应该可以，但它没有。我知道有很多代码需要查看，所以这里是代码的实际重要部分（任何以“cc”为前缀的只是注释掉它们的简单方法）：

```
.ContentExtender {
    background-image: url(bgblack.png);
    min-height: 10px;
    ccmin-width: 200px;
    ccwidth:100%;
    margin: 0px 0px 0px 1010px;
    position: absolute;
    top: 110px;
    right: 0px;
    left: 0px;
}
.MainParent {
    position: absolute;
    left:0px;
    top:0px;
    right:0px;
    bottom: 0px;
    background-color:rgba(70,70,70,.7);
    min-height: 600px;
    min-width: 1000px;
    max-width: 1000px;
    height: 100%;
    margin: 0px 10px 0px 10px;
    z-index:100;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:06:46.293

您的问题与子 div 不能直接决定父母的行为有关。

在您的父 div 上尝试其中之一：

```
overflow: auto;

display: table; 
```

或者在子 div 中：

```
display: table-row; 
```

尝试时，尝试省略“height:blabla”属性。

解决了类似的问题：[1]: [CSS - Expand float child DIV height to parent's height](https://stackoverflow.com/questions/4804581/css-expand-child-div-height-to-parents-height)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:15:50.923

你需要给 html, body { height: 100%; 加上你想要的元素的任何其他父母`height: 100%;`，`height: 100%;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:17:05.640

我最近遇到了一个问题，无法延伸到窗口的顶部，这可能是相似的。我设置：

```
body {
  margin: 0px;
} 
```

在您的情况下，它可能是另一个元素。我已经看到有意将所有可能的元素设置为 0 边距，然后重新实现所需的边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T01:20:57.393

似乎您的代码中有一个小错误尝试编辑您的

```
.ContentExtender 
```

并将其更改为

```
#ContentExtender 
```

然后您将能够修复它，如果此方法不起作用，请尝试在 Content 扩展器的 HTML 标记上设置背景 CSS，如下所示

```
html{
height:100%;    
background:#ccc url(bgblack.png); 
```

}

以上是一个例子，所以请即兴发挥

# java - 我无法理解返回值

> ID：15513559
> 
> 赞同：-3
> 
> 时间：2013-03-20T01:13:25.670
> 
> 标签：java, return

所以对于这个程序，我必须使用一个方法，如果第一个圆圈较小，则返回 -1，如果两个圆圈大小相同，则返回 0，如果第一个圆圈较大，则返回 1。基于此方法的返回值，main 方法应打印一行输出，如：绿色圆圈小于红色圆圈。

```
 but i dont know how to program it to where 

    if (r1 > r2)
       return -1;

    so that the main method prints

   r1 is bigger then r2

   BEFORE CHANGES this is what i had when i asked the question

        import java .awt.*; // for the graphics classs
        import java .util.*;// for scanner class
       public class Circles{
        public static void main(String[] args){
        Scanner input = new Scanner(System.in); //scanner object
        DrawingPanel panel=new DrawingPanel(400,300);
        Graphics gObject = panel.getGraphics(); //grahics object
       // get info on circles
       System.out.println("please enter your coordnates for the blue circle");
       int x1=input.nextInt();
       int y1=input.nextInt();
        System.out.println("please enter your radius for the blue circle");
        int r1=input.nextInt();
        System.out.println("please enter your coordnates for the red circle");
        int x2=input.nextInt();
        int y2=input.nextInt();
         System.out.println("please enter your radius for the red circle");
       int r2=input.nextInt();
       System.out.println("please enter your coordnates for the pink circle");
       int x3=input.nextInt();
       int y3=input.nextInt();
       System.out.println("please enter your radius for the pink circle");
       int r3=input.nextInt();
       gObject.setColor(Color.BLUE);
       drawCircle(gObject,x1 ,y1 ,r1);
       gObject.setColor(Color.RED);
      drawCircle(gObject,x2,y2,r2);
      gObject.setColor(Color.PINK);
      drawCircle(gObject,x3,y3,r3);
      compare(r1,r2);
      compare(r1,r3);
      compare(r2,r3);

       }//end of main

      public static void drawCircle(Graphics g, int x1 , int y1 , int r1){
      int X1 = (x1-r1);
      int Y1 = (y1 - r1);

      g.fillOval(X1 , Y1 , 2*r1 , 2*r1);
      }//end of drawcircle
       //start of compare
       public static void compare(int r1 , int r2){
       if (r1<r2){
       System.out.println("Second circle is bigger then The First");

        }
         else if (r1 == r2){
           System.out.println("the circles are the same");

         }
          else if (r1 > r2){
            System.out.println("Second is smaller then First");

            }

       }} 
```

这是由于某种原因增加了错误的修改

```
 import java .awt.*; // for the graphics classs
        import java .util.*;// for scanner class
       public class Circles{
        public static void main(String[] args){
        Scanner input = new Scanner(System.in); //scanner object
        DrawingPanel panel=new DrawingPanel(400,300);
        Graphics gObject = panel.getGraphics(); //grahics object
          // get info on circles
         System.out.println("please enter your coordnates for the blue circle");
         int x1=input.nextInt();
         int y1=input.nextInt();
         System.out.println("please enter your radius for the blue circle");
         int r1=input.nextInt();
         System.out.println("please enter your coordnates for the red circle");
         int x2=input.nextInt();
         int y2=input.nextInt();
         System.out.println("please enter your radius for the red circle");
         int r2=input.nextInt();
         System.out.println("please enter your coordnates for the pink circle");
         int x3=input.nextInt();
         int y3=input.nextInt();
         System.out.println("please enter your radius for the pink circle");
         int r3=input.nextInt();
          gObject.setColor(Color.BLUE);
          drawCircle(gObject,x1 ,y1 ,r1);
          gObject.setColor(Color.RED);
         drawCircle(gObject,x2,y2,r2);
         gObject.setColor(Color.PINK);
         drawCircle(gObject,x3,y3,r3);
        compare(r1,r2);
          compare(r1,r3);
         compare(r2,r3);
         int cmpResult = compare(r1, r2);
          if (cmpResult == -1) {
         System.out.println("r1 is smaller then r2");
         } else if (cmpResult == 0) {
         System.out.println("r1 and r2 are the same");
          } else {
          System.out.println("r1 is bigger then r2");
         }
          System.out.println("Second circle is bigger then The First");
          }//end of main

         public static void drawCircle(Graphics g, int x1 , int y1 , int r1 ){
           int X1 = (x1-r1);
         int Y1 = (y1 - r1);

          g.fillOval(X1 , Y1 , 2*r1 , 2*r1);
          }//end of drawcircle
          //start of compare
          public static int compare(int r1 , int r2, cmpResult){
        if (r1<r2){
         return -1;

          }
            else if (r1 == r2){
          return 0;

         }
          else if (r1 > r2){
          return 1;

          }

            }   } 
```

这是它给我的错误

```
 3 errors found:
    File: J:\CS Projects\Circles.java  [line: 49]
    Error: Syntax error, insert "}" to complete ClassBody
   File: J:\CS Projects\Circles.java  [line: 51]
    Error: Syntax error on token "cmpResult", VariableDeclaratorId expected after this token
   File: J:\CS Projects\Circles.java  [line: 65]
   Error: Syntax error on token "}", delete this token 
```

希望这很清楚......如果你们需要我发布我到目前为止的代码，我会

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:18:37.627

您假设`compareTo`的方法用（不是这样的）特殊代码“编码”比较结果：

*   当第一个圆圈变小时，它需要返回`-1`，
*   当圆圈相同时，需要返回`0`
*   当第一个圆圈更大时，它需要返回`1`。

这意味着 main 方法应该进行相同的解码：

*   当它看到时`-1`，它必须打印“smaller”，
*   当它看到时`0`，它必须打印“相同”，并且
*   当它看到时`1`，它必须打印“greater”。

所有这些都可以通过一系列`if`- `then`-`else`语句来完成：

```
int cmpResult = compareTo(r1, r2);
if (cmpResult == -1) {
    System.out.println("r1 is smaller then r2");
} else if (cmpResult == 0) {
    System.out.println("r1 and r2 are the same");
} else {
    System.out.println("r1 is bigger then r2");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:48:09.703

如果`a=5; b=6`. `a>b`返回`boolean`值，所以你可以这样写：

```
 int compare_radius(int a, int b)
    {  
        return (a > b ? 1 : (a < b ? -1 : 0));
    } 
```

`(condition)? val1 : val2`被称为`ternary`运算符。如果条件是`true`，则返回`val1`else `val2`。在你的情况下，如果`a > b`它返回`1`else 它将检查`a < b`，如果这个 true 然后返回`-1`else 它将`0`返回`a == b`

# javascript - 使用复选框切换 Jquery UI 事件

> ID：15513565
> 
> 赞同：-1
> 
> 时间：2013-03-20T01:14:08.287
> 
> 标签：javascript, jquery-ui

我希望能够在这个页面上运行 jquery UI 效果：

[http://jqueryui.com/toggle/](http://jqueryui.com/toggle/)

但是当用户勾选或取消勾选复选框而不是单击按钮时。我只想要一种效果，所以我不需要选择框。基本上我希望根据用户是否选中或取消选中复选框来滑入或滑出一些表单字段。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:35:37.113

我已经改编了 jQuery UI 中的代码并制作了这个 JS 小提琴：

[http://jsfiddle.net/m5sTY/13/](http://jsfiddle.net/m5sTY/13/)

您甚至可以在复选框上添加一个点击，看看它是否被选中：

```
$( "#effect" ).toggle( false );
$("#run_effect").click(function(){
    if($('#run_effect').is(':checked')){
        runEffect();
        //you can do something else if the checkbox is checked here
    }else{
        runEffect();
        //you can do something else if the checkbox is unchecked here
    }
}); 
```

我删除了 return false 并且它工作正常。试试看。

# mysql - 如何在选择中使用 Group By？

> ID：15513567
> 
> 赞同：0
> 
> 时间：2013-03-20T01:14:13.657
> 
> 标签：mysql

我有一个希望以特定方式返回的结果集

地点、日期

是否可以返回一次位置，但仅返回该位置的多个日期：

例如

```
select location, date from access group by date;

Texas
    3/11/13
    2/21/13
Montana
    1/20/13
Ohio
    12/20/12
    1/18/13
    2/2/13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:24:35.110

按位置、日期从访问组中选择位置、日期；尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:15:49.227

您不想按日期分组，而是按位置分组：

```
SELECT location, GROUP_CONCAT(date) FROM access GROUP BY location 
```

这将选择每个位置和以逗号分隔的日期列表。请注意，[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)它在开始截断字符之前有一个相对较低的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:23:41.437

您不需要`GROUP BY`在您的情况下使用，因为您没有聚合列。您只需要运行简单的 select 语句并在应用程序级别格式化结果。

```
SELECT location, date FROM access 
```

当你想使用`GROUP BY`时，理解为你想聚合一些字段。
请参阅[按功能分组](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

# jquery - 试图理解为什么 .attr('value', 'foo') 有效但 .val('foo') 无效

> ID：15513568
> 
> 赞同：2
> 
> 时间：2013-03-20T01:14:20.283
> 
> 标签：jquery, backbone.js

我以为我理解了整个 prop 与 attr 的关系，但我遇到了一个让我质疑这种理解的案例。

我正在为生成表格的主干视图编写测试，我的测试基本上执行了以下操作：

```
// assert that $table.find('input[value="foo"]').length == 2
$table.find('input[value="foo"]:first').val('bar');
// assert that $table.find('input[value="foo"]').length == 1 
```

奇怪的是，第二个断言失败了。经过大量的头撞墙时间后，我终于尝试了：

```
// assert that $table.find('input[value="foo"]').length == 2
$table.find('input[value="foo"]:first').attr('value', 'bar');
// assert that $table.find('input[value="foo"]').length == 1 
```

瞧，我的测试通过了。

现在，我希望我可以发布所有相关代码的小提琴，但是太多了（表 View 单独是 685 行），但我正在寻找一般理解类型的答案，而不是特定的“修复 X ​​in你的代码”。我想了解的是，为什么会有这样的情况：

```
$table.find('input[value="foo"]:first').val('bar'); 
```

什么都不做，同时：

```
$table.find('input[value="foo"]:first').attr('value', 'bar'); 
```

按预期工作？

PS我不应该说`.val('bar')`什么都没做；如果我`.val()`后来做了，它会显示值已经改变......但是如果我检查了实际元素，或者使用了新的选择器，或者类似的东西，很明显它`val`并没有真正改变任何东西。这只会让我更加困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:10:21.777

一个简单的例子应该能说明一些事情。假设我们从这个 HTML 开始：

```
<input id="t1">
<input id="t2"> 
```

然后我们执行这个 JavaScript：

```
$('#t1').val('pancakes');
$('#t2').attr('value', 'pancakes'); 
```

从视觉上看，两个`<input>`s 看起来都一样，他们都会说`pancakes`. 但是，如果您查看底层 DOM 元素，您会看到：

```
<input id="t1">
<input id="t2" value="pancakes"> 
```

因此，使用[`val`](http://api.jquery.com/val/#val2)或多或少会模拟您使用鼠标和键盘摆弄表单元素；这些都不会改变底层元素。[`attr`](http://api.jquery.com/attr/#attr2)但是，调用会更改底层元素并`#t2`最终得到一个真正完整的`value`属性（如果您想知道原因，请参阅[adeneo 的答案）。](https://stackoverflow.com/a/15513598/479863)

为什么差异很重要？我注意到您正在使用属性选择器，因此值得快速浏览一下：

```
$('input[value=pancakes]').length 
```

那将是`1`因为只有一个`<input>`s 甚至具有`value`属性，更不用说`value`具有我们正在寻找的值的 a 了。

问题不在于：

```
$table.find('input[value="foo"]:first').val('bar'); 
```

不做任何事情，问题是它不做任何属性选择器可以看到的事情，因为[`val`](http://api.jquery.com/val/#val2)根本没有对属性做任何事情。

* * *

上面的简单demo，打开你的控制台看看有趣的东西：http: [//jsfiddle.net/ambiguous/PNtKk/](http://jsfiddle.net/ambiguous/PNtKk/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:17:42.297

`val()`直接更改属性，它不会显示在控制台中，而`attr()`使用本机更改属性`setAttribute()`以便显示在控制台中。

`val()`将是设置元素值的正确方法。

# arrays - 在 Actionscript 中为每个数组内容创建一个新变量

> ID：15513570
> 
> 赞同：1
> 
> 时间：2013-03-20T01:14:24.660
> 
> 标签：arrays, variables, actionscript

又是我，我真的在这个简单的事情上遇到了麻烦-.-

我有一个包含 5 个数字的数组，我希望为每个数字创建一个自己的变量

例如：

```
Array [4, 12, 52, 23, 55]. create:
Variable1 = 4;
Variable2 = 4; 
```

现在，我知道我可以使用 For 循环来做到这一点，但是我根本不知道如何将 NUMBER 附加到我正在定义的变量名称上。我已经有这样的东西了：

```
 var number:int=0;

                for (var bla in xvalue) {
                    var endxvalue+nummer:int = +xvalue[bla];
                    number++;
                } 
```

这样我就得到了变量 endxvalue1 = ..; 结束值2 = ...; 等等，但我无法得到变量名称（endvalue* *1* *、endvalue* *2* * 等）处理后的数字。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:57:50.980

据我所知，局部变量的动态名称是不允许的。但！您可以使用 Object 作为集合来处理您的任务。

```
var xvalue:Array = [4, 12, 52, 23, 55]; 

var endvalues:Object = new Object();
for each (var i:int in xvalue)
{
    endvalues['endxvalue' + i] = i;
}

trace(endvalues.endxvalue4); //traces "4" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:00:21.383

一个简短的回答：使用`this[]`括号中的字符串表达式来创建自定义属性。

```
for (k in yourArray) {
    v=yourArray[k];
    this['Variable'+k]=v;
} 
```

但是，按原样使用数组会更好，寻址为`this.yourArray[index]`.

# git - Git 存储库拆分 - 与原始存储库相比，总存储库大小增加

> ID：15513580
> 
> 赞同：1
> 
> 时间：2013-03-20T01:15:48.823
> 
> 标签：git, split, repository, size

由几个模块组成的大项目被拆分为

```
git filter-branch -f --index-filter "git rm -r -f --cached \
--ignore-unmatch $(ls -w 100500 -xd ^(editor|shared|thirdparty) )" \
--prune-empty -- --all 
```

以及将其余模块的类似命令放入 2 个项目*A*和*B*

原始（未拆分）副本的 .git 存储库大小为**100Mb**，*A*中 .git 的大小为**89Mb**，*B*中 .git 的大小为**110Mb**

对于项目**A**和**B**，我使用清理作为

```
rm -rf .git/refs/original/
git reflog expire --expire=now --all
git gc --prune=now
git gc --aggressive --prune=now 
```

我真的不明白为什么原始存储库被分成 2 个副本，其大小比它的拆分总和**小约 2 倍。**

我试图从**B中的****A**中查找多个文件，并意识到**A**中没有此类文件，但**B**中是匹配的。所以看起来文件（至少是那些）没有重复。我使用了类似的命令

 ******```
git log --all -- **/CryptoInterface.java 
```

为了查找文件。

所以问题 - 如果原始项目是 100mb，我假设 A 应该像 30mb，B 应该像 70mb 或至少 A 和 B 大小的总和不应比原始 100mb 大 2 倍。

我的假设有问题吗？也许我们在项目**A**和**B**中有重复项？我们如何检查并找到重复的对象？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:38:05.013

你试过重新包装你的包裹吗？每次我需要删除 git 中的悬空对象时，我都会使用以下命令

```
rm -rf .git/refs/original/*
git reflog expire --all --expire-unreachable=0
git repack -A -d
git prune 
```******

# ember.js - Ember.js：controllerFor x 需求

> ID：15513585
> 
> 赞同：6
> 
> 时间：2013-03-20T01:16:03.317
> 
> 标签：ember.js

我遇到了问题`controllerFor`，我发现了这个描述弃用的拉取请求`controllerFor`：

[https://github.com/emberjs/ember.js/pull/1896](https://github.com/emberjs/ember.js/pull/1896)

所以这意味着我不能使用`controllerFor`? 如果答案是“不是”，为什么 Ember.js 文档仍然在谈论 using `controllerFor`，如下所示：

[http://emberjs.com/guides/routing/setting-up-a-controller/](http://emberjs.com/guides/routing/setting-up-a-controller/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T01:26:54.663

您链接到的[拉取请求](https://github.com/emberjs/ember.js/pull/1896)弃用`controllerFor`了`Ember.Controller`. 您可以并且应该`controllerFor`在路由器中使用，这就是您引用[的指南中的使用方式。](http://emberjs.com/guides/routing/setting-up-a-controller/)

`controllerFor`您应该使用[本指南](http://emberjs.com/guides/controllers/dependencies-between-controllers/)中讨论的需求机制，而不是使用from 控制器。

# c - C pthreads send()ing 和 recv()ing 在套接字上。单独工作，但没有一起工作。不会退出

> ID：15513588
> 
> 赞同：1
> 
> 时间：2013-03-20T01:16:13.053
> 
> 标签：c, sockets, pthreads

为了满足我对 C 知识的渴望，在连接到我的家庭网络的两个 linux 机器上，我正在编写一种带有`send()`s 和`recv()`s 字符串的骨架 telnet（只是为了获得一些套接字和线程的经验）。服务器侦听，客户端连接并从`stdin`. 我让它们工作，然后我改变它们来实现`pthreads`并且线程版本工作。最后，我将两者放在一个程序中，这样连接的任一端都可以（理论上）发送和接收字符串。客户端和服务器都`strstr()`用来监视`"quit"`然后退出。正如这篇文章的标题所暗示的，当我把它们放在一起时，组合版本会发送字符串，但它不会在它应该退出的时候退出。我不确定出了什么问题。我试图用 gdb 逐步完成它，但我对 gdb 太缺乏经验，无法判断发生了什么。

那么，为什么不退出呢？

退后一步，有没有更好的方法来实现我正在尝试做的事情？

谢谢你的帮助。

客户端服务器.c

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <errno.h>
#include <unistd.h>
#include <pthread.h>
#include <stdlib.h>

int sockfd = 0, send_running = 1, recv_running = 1, status = 0, acptsockfd = 0;
char str_to_send[200], str_rcvd[200];
char *remote_host_addr_str = NULL;
struct sockaddr_in remote_addr, listening_addr;

void *sender(void *threadid);

void *receiver(void *threadid);

int main(int argc, char *argv[])
{
pthread_t threads[2];
long t = 0;

memset(&remote_addr, 0, sizeof remote_addr);
memset(&listening_addr, 0, sizeof listening_addr);
str_to_send[0] = '\0';
str_rcvd[0] = '\0';
if(argc != 2)
{
    fprintf(stderr, "\n Usage: %s <IP of host to connect to> \n", argv[0]);
    return 1;
}
if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
{
    fprintf(stderr, "\n Socket Error %s\n", strerror(errno));
    return 1;
}
remote_addr.sin_family = AF_INET;
remote_addr.sin_port = htons(1234);
remote_host_addr_str = argv[1];
if(inet_pton(AF_INET, argv[1], &remote_addr.sin_addr)<=0)
{
    fprintf(stderr, "\n inet_pton error \n");
    return 1;
}
listening_addr.sin_addr.s_addr = htonl(INADDR_ANY);
listening_addr.sin_port = htons(1234);
status = pthread_create(&threads[t], NULL, receiver, (void *)t);
if(status)
{
    fprintf(stderr, "Error: pthread_create(receiver) returned %d\n", status);
    exit(-1);
}
status = pthread_create(&threads[t+1], NULL, sender, (void *)t);
if(status)
{
    fprintf(stderr, "Error: pthread_create(sender) returned %d\n", status);
    exit(-1);
}
while(send_running && recv_running)
    continue;
pthread_exit(NULL);
return 0;
}

void *sender(void *threadid)
{
if (connect(sockfd, (struct sockaddr *)&remote_addr, sizeof remote_addr) == -1)
{
    fprintf(stderr, "socket error %s", strerror(errno));
    send_running = 0;
}

while(1)
{
    fgets(str_to_send, sizeof str_to_send, stdin);
    send(sockfd, str_to_send, sizeof str_to_send, 0);
    if((strstr(str_to_send, "quit")) || strstr(str_rcvd, "quit"))
    {
        send_running = 0;
        recv_running = 0;
        pthread_exit(NULL);
        break;
    }
}

send_running = 0;
}

void *receiver(void *threadid)
{
bind(sockfd, (struct sockaddr*)&listening_addr, sizeof listening_addr);
listen(sockfd, 5);
acptsockfd = accept(sockfd, (struct sockaddr *)NULL, NULL);
while(1)
{
    recv(acptsockfd, str_rcvd, sizeof str_rcvd, 0);
    if(str_rcvd[0] != '\0') 
        printf("%s", str_rcvd);
    if(strstr(str_rcvd, "quit"))
    {
        close(acptsockfd);
        recv_running = 0;
        send_running = 0;
        pthread_exit(NULL);
        break;
    }
}   
recv_running = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:53:45.193

来自`pthread_exit` [概要](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_exit.html)

> `pthread_exit()`当第一次调用的线程以外的线程`main()`从用于创建它的启动例程返回时，会进行隐式调用。函数的返回值作为线程的退出状态。

你在`pthread_exit()`不必要地打电话。如果您能够正常从函数返回，那么线程将正确完成。如果可以的话，我宁愿从函数中返回。

我想你会发现`send_running`and`recv_running`标志是多余的。基本上，如果发送和接收函数都循环直到它们达到退出条件（发送或接收“退出”），然后它们返回，那么主函数应该能够等待其他两个线程。看[`pthread_join`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)。这将消除`send_running && recv_running`main 函数中的忙等待（循环）。

至于为什么这个过程没有结束？我认为接收器函数永远不会退出，因此在所有线程完成之前该过程不会结束。接收器功能仅检查是否收到“退出”。如果你发送“quit”，发送者函数将正常退出，main 函数也会正常退出，但接收者将不断等待接收值“quit”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:28:38.100

你不应该使用同一个套接字来监听和连接。使用两个插座。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:50:50.973

这是我试图做的固定代码。

```
/*
* clientserver.c -- send and receive strings over a socket using threads
*/

#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/select.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <errno.h>
#include <unistd.h>
#include <pthread.h>
#include <stdlib.h>

const long MYSENDER = 0;    // send thread ID
const long MYRECVR = 1;     // recv thread ID
int sockfd = 0, out_sockfd = 0, status = 0, acptsockfd = 0, fdmax = 0;  // socket file descriptors, exit status, largest file descriptor
char str_to_send[200], str_rcvd[200];   // send and receive buffers
char *remote_host_addr_str = NULL;  // IP address of host to connect to from command line argument
struct sockaddr_in remote_addr, listening_addr; // remote host and listening socket params
fd_set master_fdset;    // file descriptor set for select()
unsigned char flags = 0;    // operating conditions
const unsigned char ACCEPTED_CONNECTION = 1;    // the receive function has accepted a connection
const unsigned char SEND_RUNNING = 1<<1;    // the send function is running
const unsigned char RECV_RUNNING = 1<<2;    // the receive function is running
pthread_mutex_t flag_mutex; // so all threads can safely read & write the flags variable

void *sender(void *threadid);

void *receiver(void *threadid);

int main(int argc, char *argv[])
{
    FD_ZERO(&master_fdset); // initialize file descriptor set
    pthread_t threads[2];   // two threads: send and receive

    pthread_mutex_init(&flag_mutex, NULL);  // initialize flags mutex
    memset(&remote_addr, 0, sizeof remote_addr);    // initialize to zero
    memset(&listening_addr, 0, sizeof listening_addr);  // initialize to zero
    str_to_send[0] = '\0';  // initialize to NULL char
    str_rcvd[0] = '\0';     // initialize to NULL char
    if(argc != 2)   // expecting an IP address
    {
        fprintf(stderr, "\n Usage: %s <IP of host to connect to> \n", argv[0]);
        return 1;
    }
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)  // create listening socket and check for error
    {
        fprintf(stderr, "\n socket() error %s\n", strerror(errno));
        return 1;
    }
    if((out_sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)  // create sending socket and check for error
    {
        fprintf(stderr, "\n socket() Error %s\n", strerror(errno));
        return 1;
    }
    /* fill in details about remote host socket */
    remote_addr.sin_family = AF_INET;
    remote_addr.sin_port = htons(1234);
    remote_host_addr_str = argv[1];
    if(inet_pton(AF_INET, argv[1], &remote_addr.sin_addr)<=0)
    {
        fprintf(stderr, "\n inet_pton error \n");
        return 1;
    }
    /* fill in details about listening socket */
    listening_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    listening_addr.sin_port = htons(1234);
    status = pthread_create(&threads[MYRECVR], NULL, receiver, (void *)MYRECVR);    // start the server thread and check for error
    if(status)
    {
        fprintf(stderr, "Error: pthread_create(receiver) returned %d\n", status);
        exit(-1);
    }
    pthread_mutex_lock(&flag_mutex);
    flags |= RECV_RUNNING;  // server thread is running
    pthread_mutex_unlock(&flag_mutex);
    sleep(1); // wait to see if an incoming connection was accepted
    pthread_mutex_lock(&flag_mutex);
    if(flags & ACCEPTED_CONNECTION) //received an incoming connection
        out_sockfd = acptsockfd;
    pthread_mutex_unlock(&flag_mutex);
    status = pthread_create(&threads[MYSENDER], NULL, sender, (void *)MYSENDER);    // start the client thread and check for error
    if(status)
    {
        fprintf(stderr, "Error: pthread_create(sender) returned %d\n", status);
        exit(-1);
    }
    pthread_mutex_lock(&flag_mutex);
    flags |= SEND_RUNNING;  // client thread is running
    pthread_mutex_unlock(&flag_mutex);
    pthread_join(threads[MYRECVR], NULL);   // main() will wait for the server thread to complete
    pthread_join(threads[MYSENDER], NULL);  // main() will wait for the client thread to complete

    return 0;
}

void *sender(void *threadid)
{
    int c;  // loop counter
    fprintf(stderr, "Connecting to %s\n", remote_host_addr_str);
    for(c = 0; c < 12; ++c)
    {
        if (connect(out_sockfd, (struct sockaddr *)&remote_addr, sizeof remote_addr) == -1) // connect to the remote host.  Retry every 5 sec for 1 min
        {
            fprintf(stderr, "Send socket error: %s\nRetrying in 5 seconds.  %d tries remaining.\n", strerror(errno), (11 - c));
            int d;
            /* show the user a countdown to next retry on the screen */
            fprintf(stderr, " ");
            for(d=5; d>0; --d)
            {
                fprintf(stderr, "\b%d", d);
                sleep(1);
            }
            fprintf(stderr, "\b \b");
            if(c < 11)
                continue;
            else    // failed to connect to remote host.  Shutdown client thread
            {
                pthread_mutex_lock(&flag_mutex);
                flags &= !SEND_RUNNING;
                pthread_mutex_unlock(&flag_mutex);
                return (int*)1;
            }
        }
        else
        {
            fprintf(stderr, "Connected!\n");
            c += 12;
        }
    }

    while(1)
    {
        if(fgets(str_to_send, sizeof str_to_send, stdin) == NULL)   // get input from stdin.  Shutdown client thread on error
            goto shutdown_send_function;
        if((status = send(out_sockfd, str_to_send, strlen(str_to_send)+2, 0)) == -1)    // send the input from stdin and check for error
            fprintf(stderr, "send() error : %s\n", strerror(errno));
        pthread_mutex_lock(&flag_mutex);
        status = (flags & RECV_RUNNING);    // make sure the server thread is still running
        pthread_mutex_unlock(&flag_mutex);
        if((strstr(str_to_send, "quit")) || !status)    // shutdown if the message contains "quit" or the server thread stopped
        {
shutdown_send_function:
            pthread_mutex_lock(&flag_mutex);
            flags &= !SEND_RUNNING;
            pthread_mutex_unlock(&flag_mutex);
            if(out_sockfd != acptsockfd)    // if the sending socket is different than the accepted socket
                if((status = close(sockfd)) == -1)  // close the sending socket
                    fprintf(stderr, "close() error : %s\n", strerror(errno));
            break;
        }
    }
    return 0;
}

void *receiver(void *threadid)
{
    int opt = 1;

    setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &opt, sizeof(opt));
    if(bind(sockfd, (struct sockaddr*)&listening_addr, sizeof listening_addr) == -1)    // bind the listening socket and check for error
        fprintf(stderr, "bind() error : %s\n", strerror(errno));
    fprintf(stderr, "Waiting for incoming connection\n");
    if(listen(sockfd, 5) == -1) // listen for incoming connections
        fprintf(stderr, "listen() error : %s\n", strerror(errno));
    FD_SET(sockfd, &master_fdset);  // add the listening socket to the file descriptor set
    fdmax = sockfd; // keep track of the largest file descriptor for select()
    if((acptsockfd = accept(sockfd, (struct sockaddr *)NULL, NULL)) == -1)  // accept incoming connection request and check for error
        fprintf(stderr, "accept() error : %s\n", strerror(errno));
    FD_SET(acptsockfd, &master_fdset);  // add accepted socket to file descriptor set
    if(acptsockfd > fdmax)  // keep track of the largest file descriptor for select()
        fdmax = acptsockfd;
    pthread_mutex_lock(&flag_mutex);
    flags |= ACCEPTED_CONNECTION;   // a connection has been accepted
    pthread_mutex_unlock(&flag_mutex);
    fprintf(stderr, "Incoming connection detected\n");
    while(1)
    {
        if((status = select(fdmax+1, &master_fdset, 0, 0, NULL)) > 0) // there is data available to be read
        {
            if(recv(acptsockfd, str_rcvd, sizeof str_rcvd, 0) == -1)    // receive the data and check for error
                fprintf(stderr, "recv() error : %s\n", strerror(errno));
            if(str_rcvd[0] != '\0') 
                printf("%s", str_rcvd); // print the message received
            pthread_mutex_lock(&flag_mutex);
            status = (flags & SEND_RUNNING);    // check if the client thread is still running
            pthread_mutex_unlock(&flag_mutex);
            if((strstr(str_rcvd, "quit")) || !status)   // shutdown the server thread if message contains "quit" or client thread stopped
            {
                if((status = close(acptsockfd)) == -1)  // close the accepted socket
                    fprintf(stderr, "close() error : %s\n", strerror(errno));
                pthread_mutex_lock(&flag_mutex);
                flags &= !RECV_RUNNING;
                pthread_mutex_unlock(&flag_mutex);
                break;
            }
        }
        if(status == -1)
            fprintf(stderr, "select() error : %s\n", strerror(errno));
    }
    return 0;
} 
```

# javascript - Mootools .destroy 方法在将元素导入 DOM 并加载后不起作用

> ID：15513593
> 
> 赞同：0
> 
> 时间：2013-03-20T01:16:48.323
> 
> 标签：javascript, mootools

我只是想将 html 导入一个新节点，并用类“.prototype”去除元素：

```
var statics = new Element('div');

statics.load('statics.html')

statics.getElements('.prototype').destroy();

statics.inject($('main')); 
```

这不能按预期工作。具有“.prototype”类的元素仍然存在。有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T23:57:28.427

如果那是未更改的代码，那么该摘录的问题在于`Request.HTML`使 asynchronous `XMLHttpRequest`.

当`.load()`被调用时，它会生成一个`XMLHttpRequest`to `statics.html`，但在它可以返回 HTML 有效负载之前，脚本的执行将继续，并`.getElements('.prototype')`针对`statics`当前为空的 运行`div`，因此没有找到任何元素。

为了作弊，您可以更改 ajax 请求使其异步：

```
statics.set('load', { async: false }); 
```

但是，在保持异步性的同时执行此操作的正确方法是使用`onSuccess`回调：

```
statics.set('load', {
    onSuccess: function() {
        var toDestroy = statics.getElements('.prototype'),
            numDestroy = toDestroy.length,
            x;

        for(x=0;x<numDestroy;x++) {
            toDestroy[x].destroy();
        }
    }
}); 
```

# php - jQuery 显示/隐藏字段未通过 php 验证

> ID：15513596
> 
> 赞同：2
> 
> 时间：2013-03-20T01:17:21.257
> 
> 标签：php, jquery, validation, hide, show

我有一个 jQuery 代码，它根据用户选择选项显示/隐藏一些禁用的字段：

```
$('.fieldcontent').not('.info').hide();

$('#selector_cs').change(function() {
    $('.fieldcontent').customFadeOut(100);
    $('.' + $(this).val()).customFadeIn(900);
    $('input').prop('disabled',false);
    $('textarea').prop('disabled',false);
    $('select').prop('disabled',false);
});

}); 
```

最令人头疼的是：如果一个或多个字段淡入，这些字段不会通过我的 php 验证，也不会提交表单。

如果在所有浏览器上都禁用了 javascript，则表单可以完美运行。

PHP 验证是

```
if(!isset($_POST['products'])) {
$products[2] = clean_var($_POST['products']);
  }
 else {
  $error = 1;
   $products[3] = 'color:#FF0000;';
  } 
```

适用于所有领域

是否有任何 php /jquery 解决方案（请不要使用 ajax，因为我不会再制作整个表单，并且对 ajax 一无所知）？

提前感谢您的帮助

**编辑**：刚刚检测到另一个错误：如果 jquery 脚本淡入表单的另一部分，PHP 不再验证它。为什么？php-jquery 从来没有遇到过这样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:42:10.150

如果您让它们保持启用状态，但将属性更改`type`为`hidden`那么 PHP 应该会在您提交它们时看到这些字段。

**更新**
以下情况如何：

*   显示 5 个字段
*   开始隐藏两个字段 (A+B)
*   '添加'两个`type=hidden`与 A+B 同名的字段，并将它们的当前值从 A+B 复制到 `A+`B
*   PHP 应该会看到这两个隐藏字段，而不是当前正在淡出的字段。
*   如果用户在淡出时没有提交，那么当字段淡出时删除`A+`B字段并将两个淡出字段的属性设置为`hidden`
*   将其反转以再次显示它们的字段。

请注意，这不是由 PHP 引起的问题，而是由浏览器如何/何时将表单字段解释为提交表单时要发送的有效表单字段引起的

# c# - 在 C# 中播放多个 wav 文件

> ID：15513599
> 
> 赞同：3
> 
> 时间：2013-03-20T01:17:55.373
> 
> 标签：c#, winforms, audio, wav

我有一个应用程序，当按下或单击一个键或按钮时，我需要播放一个 wav 文件，我使用 SoundPlayer 类，但是当我尝试同时播放另一个 wav 文件时，正在播放的文件停止了。

有没有办法同时播放多个wav文件？如果是它，你能给我例子或教程吗？

这是我到目前为止得到的：

```
private void pictureBox20_Click(object sender, EventArgs e)
{
    if (label30.Text == "Waiting 15.wav")
    {
        MessageBox.Show("No beat loaded");
        return;
    }
    using (SoundPlayer player = new SoundPlayer(label51.Text))
    {
        try
        {
            player.Play();
        }
        catch (FileNotFoundException)
        {
            MessageBox.Show("File has been moved." + "\n" + "Please relocate it now!");
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T02:10:11.580

你可以在[`System.Windows.Media.MediaPlayer`](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.aspx)课堂上做到这一点。请注意，您需要添加对`WindowsBase`和的引用`PresentationCore`。

```
private void pictureBox20_Click(object sender, EventArgs e)
{
    const bool loopPlayer = true;
    if (label30.Text == "Waiting 15.wav")
    {
        MessageBox.Show("No beat loaded");
        return;
    }
    var player = new System.Windows.Media.MediaPlayer();
    try
    {
        player.Open(new Uri(label51.Text));
        if(loopPlayer)
            player.MediaEnded += MediaPlayer_Loop;
        player.Play();
    }
    catch (FileNotFoundException)
    {
        MessageBox.Show("File has been moved." + "\n" + "Please relocate it now!");
    }
} 
```

编辑：您可以通过订阅`MediaEnded`事件来循环播放声音。

```
void MediaPlayer_Loop(object sender, EventArgs e)
{
    MediaPlayer player = sender as MediaPlayer;
    if (player == null)
        return;

    player.Position = new TimeSpan(0);
    player.Play();
} 
```

根据您的代码，我猜您正在编写某种音乐制作软件。老实说，我不确定这种方法是否每次都能完美循环，但据我所知，这是使用 MediaPlayer 控件循环的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:08:18.650

### 您**不能**使用 SoundPlayer 一次播放两个声音。

SoundPlayer 使用 Native WINAPI [`PlaySound`](http://msdn.microsoft.com/en-us/library/dd757715%28v=VS.85%29.aspx)，它不支持在同一实例中播放多个声音。

更好的选择是参考`WindowsMediaPlayer`

添加对的引用`C:\Windows\System32\wmp.dll`

```
var player1 = new WMPLib.WindowsMediaPlayer();
player1.URL = @"C:\audio_output\sample1.wav";

var player2 = new WMPLib.WindowsMediaPlayer();
player2.URL = @"C:\audio_output\sample2.wav"; 
```

# javascript - 捕获所有“a”点击，包括动态添加的点击

> ID：15513603
> 
> 赞同：1
> 
> 时间：2013-03-20T01:18:34.537
> 
> 标签：javascript, jquery, event-handling

我知道你可以像这样使用 jQuery 绑定点击事件：

```
$('a').click(function(){}); 
```

但是动态添加的 html 元素呢？可以说我有`div`以下内容：

```
<div>
    <a href='location.html'>location</a>
</div> 
```

现在我打电话：

```
$('a').click(
      function(){ 
          console.log("going to " + $(this).attr('href')); 
          return true;
      }); 
```

这会很好。但如果沿线某处我打电话

```
$('div').("<a href='location2.html'>location2</a>"); 
```

如果没有将该事件处理程序显式绑定到该事件，那么事件处理程序将接受它。

是否可以在`a`添加新元素时重新绑定。或者更好的是，当`location.href`属性发生变化时，我可以每次都向它添加一个 get 参数。

例如，如果我绑定到`a`元素上的单击事件，则事件处理程序将是：

```
function(){
    var newid = parseInt(Obj.Request('pageid'), 10) + 1;
    location.href = $(this).attr('href') + '?pageid=' + newid.toString();
    return false;
} 
```

假设`Obj.Request`是一个返回 get 参数的函数。（我已经有了这个）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:24:59.787

以这种方式使用它：

```
$(document).on( 'click', 'a', function() {
      console.log("going to " + $(this).attr('href')); 
      return true;
}); 
```

* * *

处理你的[小提琴](http://jsfiddle.net/L2CG2/4/)链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:20:52.907

您想使用该功能`.on`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T01:24:48.817

```
$('a').on('click', function() {
    //works on non dynamic elements present at page load
});

$('#some_non_dynamic_parent_ID').on('click', 'a', function() {
    //works on dynamic elements added later
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T01:24:35.123

您想使用`.on()`, 但作为委托方法。

将它绑定到最近的静态父级 - 对于这个示例，我将只使用`body`.

```
$('body').on('click', 'a', function(e){
  e.preventDefault();
}); 
```

这将等到事件冒泡到`body`元素并检查事件的原始目标是什么 - 如果它是一个`a`元素，它将触发处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T01:25:49.843

如果您使用 jquery 高于 1.7 版本，则可以使用 .on() 或 live() 函数。关于这些功能的区别，您可以[在本文中阅读](http://www.andismith.com/blog/2011/11/on-and-off/)

# syntax - 了解 VBScript 中的 Const 表达式

> ID：15513606
> 
> 赞同：7
> 
> 时间：2013-03-20T01:18:50.237
> 
> 标签：syntax, vbscript, constants, declaration

`Const` *好吧*，我试图理解`VBScript`. 除了文字，我无法使用任何东西。[文档说](http://msdn.microsoft.com/en-us/library/16twy8ed%28v=VS.84%29.aspx)的是：

> ***文字或其他常量，或包含除Is***之外的所有算术或逻辑运算符的任何组合*。*

 *所以，如果“包括所有算术或逻辑运算符”，那么逻辑上我希望我可以做这样的事情：

```
Const X = (1 + 2) 
```

但这会带来错误“预期的文字常量”。[我在这里](https://stackoverflow.com/a/9424941)找到了一个有趣的答案，它允许在某种程度上作弊，因此可以通过以下方式完成上述操作：

```
Execute "Const X = " & (1 + 2) 
```

但我的问题是关于标准常量声明。如果文档偶然说“表达式只能是文字”之类的话，那么我永远不会问。
那么我还能使用什么（除了文字）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:49:04.037

Script56.chm 在备注部分中说以下内容：

> 默认情况下，常量是公共的。在过程中，常量总是私有的；他们的可见性不能改变。在脚本中，可以使用 Private 关键字更改脚本级常量的默认可见性。
> 
> 要将多个常量声明组合在同一行中，请用逗号分隔每个常量赋值。当以这种方式组合常量声明时，Public 或 Private 关键字（如果使用）适用于所有它们。
> 
> 不能在常量声明中使用变量、用户定义的函数或固有的 VBScript 函数（例如 Chr）。根据定义，它们不能是常量。*您也不能从任何涉及 operator 的表达式创建常量*，也就是说，只允许使用简单的常量。在 Sub 或 Function 过程中声明的常量是该过程的局部变量。在过程之外声明的常量在声明它的整个脚本中定义。您可以在任何可以使用表达式的地方使用常量。

上面斜体字中的位使“或包括除 Is 之外的所有算术或逻辑运算符的任何组合”声明毫无意义。*

# java - 用于对变量进行排名和评估的 Java 函数

> ID：15513612
> 
> 赞同：-1
> 
> 时间：2013-03-20T01:20:00.560
> 
> 标签：java, double, rank, operation, utilization

我有4双

```
double newmanUtil = newmanYard.oreTonnes / time();
double yandi1Util = yandiMine1.oreTonnes / time();
double yandi2Util = yandiMine2.oreTonnes / time();
double miningAreaCUtil = miningAreaC.oreTonnes / time(); 
```

我需要一个操作（和循环）来将结果数字按从最小到最大的顺序排列为四个整数......

```
int NYRank = 0;
int Y1Rank = 0;
int Y2Rank = 0;
int MACRank = 0; 
```

我觉得这是一件简单的事情，有人知道如何快速完成......

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:26:05.890

这将起作用：

```
package com.sandbox;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Sandbox {

    public static void main(String[] args) {
        double newmanUtil = 1;
        double yandi1Util = 3;
        double yandi2Util = 2;
        double miningAreaCUtil = 4;

        List<Double> items = new ArrayList<Double>();
        items.add(newmanUtil);
        items.add(yandi1Util);
        items.add(yandi2Util);
        items.add(miningAreaCUtil);

        Collections.sort(items);

        System.out.println(items);
    }
} 
```

我已经用真实值替换了你的变量，只是为了证明它有效。这是输出：

> [1.0、2.0、3.0、4.0]

我所做的是将这些值放入列表中，然后对列表进行排序。Java 知道如何对`Double`s 的列表进行排序。

# jquery - 搜索大量元素

> ID：15513613
> 
> 赞同：1
> 
> 时间：2013-03-20T01:20:07.107
> 
> 标签：jquery, performance, search

我有一个目标项目列表，以及具有项目、功能和里程碑关联的源项目。[JSFiddle](http://jsfiddle.net/for3v3rforgott3n/Q63Dx/7/)

由于我的列表非常大（总共大约 4000 个元素），我使属于目标项目的源项目可折叠以压缩空间并提高可读性。

示例标记：

```
<div class='projectscontainer'>
    <div id="destarrow" class="arrow-right"></div>
    <span class="item destproject unselectable" title="ID: 426">Kzax-Xrj</span>
    <br>
    <div class="srcprojects" style="display: block; margin-left: 30px;">
        <span class="item srcproject" title="ID: 4760">Lokhxtea</span><br>
    </div>
    <div class="srcprojects" style="display: block; margin-left: 30px;">
        <span class="item srcproject" title="ID: 4760">Zbjamjh</span><br>
    </div>
    <div class="srcprojects" style="display: block; margin-left: 30px;">
        <span class="item srcproject" title="ID: 6034">Jeuzax-Xrjamjhxteaq</span>
        <div id='arrow' class='arrow-right'></div>
        <span class='item srcproject exception' title='Project'>Qiospq</span>
        <div id='arrow' class='arrow-right'></div>
        <span class='item srcproject exception' title='Feature'>Qiospq</span>
        <div id='arrow' class='arrow-right'></div>
        <span class='item srcproject exception' title='Milestone'>Muqewko</span><br>
    </div>
</div> 
```

由于我把所有的源项目都折叠起来了，所以很难找到一个具体的源项目。

如何在 jQuery 中创建一个简单的过滤器，可以使用输入定位某些目标/源项目？我尝试过类似[jQuery Fast Live Filter](http://anthonybush.com/projects/jquery_fast_live_filter/)之类的方法，但它似乎不适用于我的标记。

此外，由于我有 4000 个左右的这些源项目，因此 Destination 项目的扩展和折叠感觉有点反应迟钝（缓慢）。是否有任何修复可以应用于我现有的 jQuery（在 JSFiddle 中），这将有助于解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:41:03.947

那是因为 jQuery 快速实时过滤器在单个级别上工作，而您的项目正在使用多个级别的嵌套。你必须自己动手。它不应该那么难：[https ://github.com/awbush/jquery-fastLiveFilter/blob/master/jquery.fastLiveFilter.js](https://github.com/awbush/jquery-fastLiveFilter/blob/master/jquery.fastLiveFilter.js)

您所要做的就是根据您的要求修改 input.change 中的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:01:55.763

解决您的第二个问题，您可能会通过选择不同的元素来发现轻微的性能优势，但我认为任何改进都不会很好。

你可以试试这个，例如：

```
$('.projectscontainer').on("click", "span.destproject", function () {
    $(this).siblings('.srcprojects').toggle().end().siblings('div.destarrow').toggleClass("arrow-right arrow-down");
}).on("click", "div.destarrow", function () {
    $(this).parent().find("span.destproject").trigger("click");
}); 
```

注意：`destarrow`从一个ID变成了一个类。

演示：http: [//jsfiddle.net/Q63Dx/8/](http://jsfiddle.net/Q63Dx/8/)

# wpf - 适合 WrapPanel 的所有子项，没有滚动条

> ID：15513615
> 
> 赞同：1
> 
> 时间：2013-03-20T01:20:16.060
> 
> 标签：wpf

我想将图像添加到 WrapPanel，并且我想在不滚动的情况下查看所有图像。添加新孩子时，我正在调整图像大小。我有一个继承自的类，`WrapPanel`添加子时将触发 Resize()。这是代码：

```
 public void Resize()
    {
        int c = this.Children.Count;
        int d = 1;
        if (c <= 4 && c>1) d = 2;
        else if (c <= 9 && c>4) d = 3;
        else if (c <= 16 && c > 9) d = 4;

        foreach (UIElement child in this.Children)
        {
            dynamic ctrl = child;
            ctrl.Width = this.Width / d;
        }
    } 
```

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:16:01.143

sa_ddam213 给了我使用`UniformGrid`. 这解决了我的问题。我正在回答我自己的问题，以使这个问题成为“已回答”。

# python - Python & suds - 如何获取有关方法参数类型的信息？

> ID：15513618
> 
> 赞同：8
> 
> 时间：2013-03-20T01:20:30.397
> 
> 标签：python, soap, suds

我正在使用 suds 从我的 Python 代码调用 SOAP API 中的方法。我正在尝试以编程方式确定将哪些信息作为参数发送给 API 中的方法。我正在查看的 WSDL 之一是[here](https://controlpanel.msoutlookonline.net/WebServices/ActiveDirectory/ActiveDirectoryService.asmx?WSDL)。

该 WSDL 中定义了一个具有以下签名的方法：

```
GetActiveDirectoryObjects(FilterOptions filterOptions) 
```

我可以使用 suds 为这个 WSDL 创建一个客户端，然后我可以使用 client.factory.create() 方法，如下所示：

```
from suds.client import Client
client = Client('https://controlpanel.msoutlookonline.net/WebServices/ActiveDirectory/ActiveDirectoryService.asmx?WSDL')
client.factory.create('FilterOptions') 
```

输出是：

```
(FilterOptions){
   AttributesToRead =
      (ArrayOfString){
         string[] = <empty>
      }
   SortBy = None
   SortDirection =
      (SortDirection){
         value = None
      }
   ResultSize = None
   Filter =
      (AndOperation){
         ExtensionData = None
      }
   SearchBase = None
 } 
```

我不知道如何使用 suds 确定“SortBy”是否要分配一个字符串、一个 int 或一个布尔值，或者什么。我知道“AttributesToRead”想要分配一个“ArrayOfString”。我知道“SortDirection”想要分配一个“SortDirection”类型的对象。但是 SearchBase 呢？结果大小？我的程序如何确定自动生成的表单是否应该包含一个验证 int 或 boolean 或字符串的字段？

查看 WSDL XML，我看到以下内容：

```
<s:complexType name="FilterOptions">
    <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="AttributesToRead" type="tns:ArrayOfString"/>
        <s:element minOccurs="0" maxOccurs="1" name="SortBy" type="s:string"/>
        <s:element minOccurs="1" maxOccurs="1" name="SortDirection" type="tns:SortDirection"/>
        <s:element minOccurs="0" maxOccurs="1" name="ResultSize" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="Filter" type="tns:AndOperation"/>
        <s:element minOccurs="0" maxOccurs="1" name="SearchBase" type="s:string"/>
    </s:sequence>
</s:complexType> 
```

所以我通过手动读取 XML 知道“SortBy”想要分配一个字符串——但是我如何使用 suds 以编程方式解决这个问题？我不想花几天时间编写解析 XML 的代码来弄清楚当编写 suds 的人已经密切遵循 SOAP 规范时 - 但是让 suds 告诉我“SortBy”应该是什么的秘诀是什么？输入“字符串”？

# highcharts - Highcharts 方向

> ID：15513621
> 
> 赞同：0
> 
> 时间：2013-03-20T01:20:47.650
> 
> 标签：highcharts

我已经尝试了几天来弄清楚如何使图表的布局类似于以下链接中的布局：

```
http://demos.azimuth1.com/smartdata2/ 
```

有谁知道是否可以让图表看起来像这样以及我应该查看的设置？

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:59:35.470

你应该设置

> 倒置：真

```
chart: {
                renderTo: 'container',
                inverted: true,
                type: 'arearange'
            }, 
```

[示例 JsFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/inverted/ "示例 jsfiddle")

# c - C线程中的自增是安全的吗？

> ID：15513622
> 
> 赞同：16
> 
> 时间：2013-03-20T01:20:48.997
> 
> 标签：c, freertos

我在 FreeRTOS (FreeRTOSV7.4.0\FreeRTOS\Source\tasks.c) 中找到了一些代码：

```
void vTaskSuspendAll( void )
{
    /* A critical section is not required as the variable is of type
    portBASE_TYPE. */
    ++uxSchedulerSuspended;
} 
```

明确表示不需要保护，因为类型是“portBASE_TYPE”，它是“长”类型。我的理解是它假设这种类型的自增是原子的。但是在我拆开它之后我找不到任何证据，它是一个简单的加载->添加->存储。那么有问题吗？

```
void vTaskSuspendAll( void )
{
        /* A critical section is not required as the variable is of type
        portBASE_TYPE. */
        ++uxSchedulerSuspended;
 4dc:   4b03            ldr     r3, [pc, #12]   ; (4ec <vTaskSuspendAll+0x10>)
 4de:   f8d3 2118       ldr.w   r2, [r3, #280]  ; 0x118
 4e2:   1c50            adds    r0, r2, #1
 4e4:   f8c3 0118       str.w   r0, [r3, #280]  ; 0x118
 4e8:   4770            bx      lr
 4ea:   bf00            nop
 4ec:   00000000        .word   0x00000000

000004f0 <xTaskGetTickCount>:
        return xAlreadyYielded;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T01:55:50.303

正如您所记录的，它不是原子的。但在不太严格的意义上它仍然可以是“线程安全的”：a`long`不能处于不一致的状态。这里的危险程度是，如果`n`线程调用`vTaskSuspendAll`then`uxSchedulerSuspended`将增加 1 到`n`.

但是，如果变量不需要完美的话，这可能会很好，比如用户要求暂停多少次的跟踪器。有“线程安全”的意思是“这个操作产生相同的结果，不管它的调用是如何交错的”，还有“线程安全”的意思是“如果你从多个线程调用它不会爆炸”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T01:24:17.817

不，C 中的递增值不能保证是原子的。您需要提供同步，或使用特定于系统的库来执行原子增量/减量。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T09:33:27.740

该操作不是原子的，但它没有说它是原子的。但是，代码是线程安全的，但您必须非常熟悉代码在做什么，以及它如何适应调度程序的设计才能知道这一点。其他任务是否在加载和存储之间修改变量无关紧要，因为当执行任务下一次运行时，它会发现变量与执行原始加载时的状态相同（因此修改和写入部分仍然一致且有效）。

正如之前发布的注释，long 不能处于不一致状态，因为它是运行它的架构的基本类型。但是考虑一下如果代码在 8 位机器（或 16 位）上运行并且变量是 32 位会发生什么。那么它将不是线程安全的，因为完整的 32 位将一次修改一个字节或一个字，而不是一次全部修改。在这种情况下，当上下文切换发生时，一个字节可能会被加载到寄存器中，修改，然后写回 RAM（其他三个字节保持不变）。如果执行的下一个任务读取相同的变量，它将读取一个已修改的字节和三个未修改的字节 - 你有一个主要问题。

# php - zabbix insert Chinese word as item key 失败

> ID：15513628
> 
> 赞同：1
> 
> 时间：2013-03-20T01:21:08.420
> 
> 标签：php, mysql, utf-8, zabbix

当我在zabbix中插入一个项目，其中包含中文，最后会被放入mysql，浏览器显示：

```
Error cannot update item
Error in query [SELECT i.key_,h.host FROM items i,hosts h WHERE i.hostid=h.hostid AND ((i.hostid=10085 AND i.key_='logrt[\"/home/test/event.*.log\",\"失败\",\"GBK\",,]')) AND i.itemid!='23439' LIMIT 1 OFFSET 0] [Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '=']
mysql_fetch_assoc() expects parameter 1 to be resource, boolean given 
[include/db.inc.php:572] mysql_free_result() expects parameter 1 to be resource, boolean given 

[include/db.inc.php:573] 
```

我认为它失败了，因为zabbix不能接受除UTF-8之外的其他编码，但我不知道如何更改它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:02:00.340

好的，我发现了问题。似乎当我创建 zabbix 数据库时，我使用了默认字符集，即 latin1_swedish_ci 但实际上它应该是 utf8。所以我用下面的 sql 重新创建数据库：

```
create database zabbix character set utf8 
```

然后一切正常！

# internet-explorer - GWT BrowserEvent、Internet Explorer 以及在 Input 或 Select 上动态应用的内联样式

> ID：15513631
> 
> 赞同：3
> 
> 时间：2013-03-20T01:21:19.550
> 
> 标签：internet-explorer, gwt, input, event-handling, styles

我正在使用 GWT 2.5.0。

我已经为客户端验证反馈实现了一个自定义抽象基础小部件。我的问题与动态内联样式`<select/>`和`<input type="text"/>`小部件有关，尤其是在 Internet Explorer 中。

我无法让渲染在 Internet Explorer 8/9 上正确且一致地完成其工作。对于其他浏览器，如 Safari、Chrome、Opera、Firefox，我的 impl 功能完全符合我的要求。

基本上，对于待处理的有效输入，我希望上述小部件的背景为黄色，前景色（文本）为蓝色。

我正在使用此处提到的提示和技巧：[https](https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9) ://developers.google.com/web-toolkit/doc/latest/DevGuideIE9 。

我认为基本问题是我与不支持“事件冒泡”的 IE 发生冲突。请参阅[GWT 中的“更改”浏览器事件](https://stackoverflow.com/questions/13452172/change-browser-event-in-gwt)。但我不知道如何解决它。

**更新**

看来我的实施可能会被扣为人质，直到

```
http://code.google.com/p/google-web-toolkit/issues/detail?id=7139 
```

是固定的。

这是我的基本抽象类。`onBrowserEvent`请注意和`render`方法中用于 Internet Explorer 的用户代理“hack” 。（如果有其他方法，请告诉我）。

```
public abstract class AbstractValidatableInputCell<E extends Element> extends AbstractInputCell<String, ValidationData> {

/**
 * The error message text, pop-up, callback, and position offsets -- error message will be displayed near a field that violated constraint.
 */
private String errorMessage;

private DecoratedPopupPanel errorMessagePopup;
private PopupPanel.PositionCallback popupPositionCallback;
private int popupPositionLeft;
private int popupPositionTop;

/**
 * Constructs a ValidatableInputCell that renders its text without HTML
 * markup.
 */
public AbstractValidatableInputCell(String... consumedEvents) {
    super(consumedEvents);
}

public void setErrorMessage(final String errorMessage) {
    this.errorMessage = SafeHtmlUtils.fromSafeConstant(errorMessage).asString();
}

@Override
public void onBrowserEvent(final Context context, final Element parent, final String value,
        final NativeEvent event, final ValueUpdater<String> valueUpdater) {
    super.onBrowserEvent(context, parent, value, event, valueUpdater);

    // Ignore events that don't target the input.
    final E input = getInputElement(parent);
    final Element target = event.getEventTarget().cast();
    if (!input.isOrHasChild(target)) {
        return;
    }

    final String eventType = event.getType();
    final Object key = context.getKey();
    ValidationData vd = getViewData(key);
    final boolean invalid = vd == null ? false : vd.isInvalid();

    if (BrowserEvents.CHANGE.equals(eventType)) {
        finishEditing(parent, value, key, valueUpdater);

    } else if (Window.Navigator.getUserAgent().contains("MSIE")
            && (event.getKeyCode() == KeyCodes.KEY_TAB)) { 
        finishEditing(parent, value, key, valueUpdater);
        getInputElement(parent).focus();

    } else if (BrowserEvents.KEYUP.equals(eventType)) {
        // Record keys as they are typed.
        if (vd == null) {
            vd = new ValidationData(value);
            setViewData(key, vd);
        }
        vd.setCurrentValue(getValue(input));

    } else if (BrowserEvents.MOUSEOVER.equals(eventType)) {
        if (invalid) {
            showErrorMessagePopup(parent);
        }

    } else if (BrowserEvents.MOUSEOUT.equals(eventType)) {
        if (invalid) {
            hideErrorMessagePopup();
        }
    }
}

protected void onFinishEditing(final String value, final E input, final Object key) {
    /*
     * If viewData is null, just paint the contents black. If it is non-null,
     * show the pending value and paint the contents red if they are known to
     * be invalid.
     */
    final ValidationData viewData = getViewData(key);
    final String pendingValue = viewData == null ? null : viewData.getCurrentValue();
    final boolean invalid = viewData == null ? false : viewData.isInvalid();

    String color;
    String backgroundColor;

    if (invalid) {
        color = App.INSTANCE.invalidCellInputTextColor();
        backgroundColor = App.INSTANCE.invalidCellInputTextBackgroundColor();
    } else if (pendingValue != null && !pendingValue.equals(value)) {
        color = App.INSTANCE.pendingCellInputTextColor();
        backgroundColor = App.INSTANCE.pendingCellInputTextBackgroundColor();
    } else {
        color = App.INSTANCE.defaultCellInputTextColor();
        backgroundColor = App.INSTANCE.defaultCellInputTextBackgroundColor();
    }

    // Mark cell as containing a pending change
    input.getStyle().setColor(color);
    input.getStyle().setBackgroundColor(backgroundColor);
}

private void showErrorMessagePopup(final Element parent) {
    errorMessagePopup = new DecoratedPopupPanel(true);
    final FlowPanel messageContainer = new FlowPanel();
    messageContainer.setWidth(App.INSTANCE.errorMessagePopupWidth());
    final Label messageTxt = new Label(errorMessage, true);
    messageTxt.setStyleName(UiResources.INSTANCE.style().error());
    messageContainer.add(messageTxt);
    errorMessagePopup.setWidget(messageContainer);

    final Node child = parent.getChild(0);
    final Element childElement = (Element) child;

    // Reposition the popup relative to input field
    popupPositionLeft = childElement.getAbsoluteLeft() - 15;
    popupPositionTop = childElement.getAbsoluteBottom() + 5;

    popupPositionCallback = new PopupPanel.PositionCallback() {

        @Override
        public void setPosition(final int offsetWidth, final int offsetHeight) {
            errorMessagePopup.setPopupPosition(popupPositionLeft, popupPositionTop);
        }
    };
    errorMessagePopup.setPopupPositionAndShow(popupPositionCallback);
}

private void hideErrorMessagePopup() {
    errorMessagePopup.hide();
}

@Override
public void render(final Context context, final String value, final SafeHtmlBuilder sb) {
    // Get the view data.
    final Object key = context.getKey();
    final ValidationData viewData = getViewData(key);

    final String pendingValue = viewData == null ? null : viewData.getCurrentValue();
    final boolean invalid = viewData == null ? false : viewData.isInvalid();

    String inputValue = value;
    if (pendingValue != null) {
        inputValue = pendingValue;
    }

    String color;
    String backgroundColor;

    if (invalid) {
        color = App.INSTANCE.invalidCellInputTextColor();
        backgroundColor = App.INSTANCE.invalidCellInputTextBackgroundColor();
    } else if (pendingValue != null) {
        color = App.INSTANCE.pendingCellInputTextColor();
        backgroundColor = App.INSTANCE.pendingCellInputTextBackgroundColor();
    } else {
        color = App.INSTANCE.defaultCellInputTextColor();
        backgroundColor = App.INSTANCE.defaultCellInputTextBackgroundColor();
    }

    // shame on you IE!
    if (Window.Navigator.getUserAgent().contains("MSIE") && viewData != null && !viewData.isPended() && !invalid) {
        color = App.INSTANCE.defaultCellInputTextColor();
        backgroundColor = App.INSTANCE.defaultCellInputTextBackgroundColor();
    }

    finishRender(inputValue, color, backgroundColor, sb);
}

protected abstract void finishRender(final String inputValue, final String color, final String backgroundColor, final SafeHtmlBuilder sb);

@Override
protected void finishEditing(final Element parent, final String value, final Object key,
        final ValueUpdater<String> valueUpdater) {
    final String newValue = getNewValue(parent);

    // Get the view data.
    ValidationData vd = getViewData(key);
    if (vd == null) {
        vd = new ValidationData(value);
        setViewData(key, vd);
    }
    vd.setCurrentValue(newValue);

    // Fire the value updater if the value has changed.
    if (valueUpdater != null && !vd.getCurrentValue().equals(vd.getLastValue())) {
        vd.setLastValue(newValue);
        valueUpdater.update(newValue);
    }

    onFinishEditing(value, getInputElement(parent), key);

    // Blur the element.
    super.finishEditing(parent, newValue, key, valueUpdater);
}

@Override
protected E getInputElement(final Element parent) {
    return super.getInputElement(parent).<E> cast();
}

protected abstract String getValue(E element);

protected abstract String getNewValue(Element parent);
} 
```

这是一个示例子类（对于`input`）：

```
public class ValidatableInputCell extends AbstractValidatableInputCell<InputElement> {

interface Template extends SafeHtmlTemplates {

    @Template("<input type=\"text\" value=\"{0}\" size=\"{1}\" style=\"color: {2}; background-color: {3}; display: block; text-align: right\"></input>")
    SafeHtml input(String value, String width, String color, String backgroundColor);
}

private static Template template;

private static final int DEFAULT_INPUT_SIZE = App.INSTANCE.defaultValidatableInputCellSize();

/**
 * Specifies the width, in characters, of the &lt;input&gt; element contained within this cell
 */
private int inputSize = DEFAULT_INPUT_SIZE;

/**
 * Constructs a ValidatableInputCell that renders its text without HTML
 * markup.
 */
public ValidatableInputCell() {
    // Since onBrowserEvent method is overridden, we must register all
    // events that handled in overridden method impl
    // Events below are added in
    // AbstractInputCell#getConsumedEventsImpl(Set<String> userEvents)
    super(BrowserEvents.CHANGE, BrowserEvents.KEYUP, BrowserEvents.MOUSEOVER, BrowserEvents.MOUSEOUT);
    if (template == null) {
        template = GWT.create(Template.class);
    }
}

public void setInputSize(final int inputSize) {
    this.inputSize = inputSize;
}

@Override
public void finishRender(final String inputValue, final String color, final String backgroundColor, final SafeHtmlBuilder sb) {
    sb.append(template.input(inputValue, String.valueOf(inputSize), color, backgroundColor));
}

@Override
protected String getValue(InputElement element) {
    return element.getValue();
}

@Override
protected String getNewValue(Element parent) {
    return getValue(getInputElement(parent));
}

} 
```

这是另一个示例子类（for `select`）：

```
public class ReferenceDataBackedSelectionCell extends AbstractValidatableInputCell<SelectElement> {

interface SelectTemplate extends SafeHtmlTemplates {
    @Template("<select style=\"color: {0}; background-color: {1};\">")
    SafeHtml select(String color, String backgroundColor);
}

interface OptionTemplate extends SafeHtmlTemplates {

    @Template("<option style=\"color: {2}; background-color: {3}; text-align: right\" value=\"{0}\">{1}</option>")
    SafeHtml deselected(String optionSubmitValue, String optionDisplayValue, String color, String backgroundColor);

    @Template("<option style=\"color: {2}; background-color: {3}; text-align: right\" value=\"{0}\" selected=\"selected\">{1}</option>")
    SafeHtml selected(String optionSubmitValue, String optionDisplayValue, String color, String backgroundColor);
}

private static SelectTemplate selectTemplate; 
private static OptionTemplate optionTemplate;

private final Map<String, String> options;

/**
 * Construct a new {@link ReferenceDataBackedSelectionCell} from
 * {@link ReferenceData}.
 * 
 * @param refData data used to create the options in the cell
 */
public ReferenceDataBackedSelectionCell(final ReferenceData refData) {
    super(BrowserEvents.CHANGE);
    if (optionTemplate == null) {
        optionTemplate = GWT.create(OptionTemplate.class);
    }
    if (selectTemplate == null) {
        selectTemplate = GWT.create(SelectTemplate.class);
    }
    if (refData == null) {
        throw new IllegalArgumentException("Reference data for selection cell may not be null");
    }
    options = new LinkedHashMap<String, String>(refData.allData());
}

@Override
public void finishRender(final String inputValue, final String color, final String backgroundColor, final SafeHtmlBuilder sb) {
    final String selectedIndex = inputValue == null ? "" : inputValue;
    sb.append(selectTemplate.select(color, backgroundColor));
    String optionSubmitValue, optionDisplayValue = null;
    for (final Map.Entry<String, String> option : options.entrySet()) {
        optionSubmitValue = option.getValue();
        optionDisplayValue = option.getKey();
        if (optionSubmitValue.equals(selectedIndex)) {
            sb.append(optionTemplate.selected(optionSubmitValue, optionDisplayValue, color, backgroundColor));
        } else {
            sb.append(optionTemplate.deselected(optionSubmitValue, optionDisplayValue, color, backgroundColor));
        }
    }
    sb.appendHtmlConstant("</select>");
}

@Override
protected String getValue(SelectElement element) {
    return element.getValue();
}

@Override
protected String getNewValue(Element parent) {
    final SelectElement select = parent.getFirstChild().cast();
    final Collection<String> optionCollection = options.values();
    final String[] array = optionCollection.toArray(new String[optionCollection.size()]);
    final String newValue = array[select.getSelectedIndex()];
    return newValue;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:49:22.400

**我会尝试 CSS3，因为 IE9 对它有很好的支持。**

## 测试样式.css

```
@charset "utf-8";
/* CSS Document */

INPUT[type="text"]:focus,
INPUT[type="number"]:focus,
INPUT[type="email"]:focus,
INPUT[type="search"]:focus,
INPUT[type="password"]:focus,
INPUT[type="range"]:focus
{
    outline: 1px solid #0033dd;
    background-color: grey;
    color: white;   
} 
```

## 测试.html

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<link rel="stylesheet" type="text/css" href="teststyle.css" />
</head>

<body>
 <input name="" type="text">
</body>
</html> 
```

## IE9截图

![在此处输入图像描述](../Images/5ec8057948bed868ae48da37259ede53.png)

# php - PHP 可以回显包含图像或文件的 DIRECTORY 的地址吗？

> ID：15513632
> 
> 赞同：0
> 
> 时间：2013-03-20T01:21:27.163
> 
> 标签：php, image, directory, kirby

我的问题的简短版本：有没有办法使用 PHP 来回显包含图像的目录的 URL？

长版：大家好，我正在开发一个简单的 CMS（使用 Kirby 以防万一），除了一件事外，我几乎可以完成所有工作。Kirby 是一个基于文件的 CMS，每个文件夹都是它自己的页面。我已将其设置为文件夹中的所有图像都会自动放置在页面上。这一切都很好，但问题是，我想在每个项目文件夹中都有一个子文件夹，其中包含更大版本的图像。我不想使用自动缩略图插件、灯箱或类似的东西。我想手动保存图像的两个版本。我设想了这样的事情：通过单击“缩略图”图像

```
website.com/projects/01-test/cat.jpg 
```

可以打开一个更大的图像

```
website.com/projects/01-test/large/cat-large.jpg) 
```

我希望我能以某种方式使用 PHP 来显示图像目录的完整 URL，而不是图像本身的名称。我最接近的是使用：

```
<?php echo $image->url(); ?> 
```

但这给了[http://website.com/projects/01-test/cat.jpg](http://website.com/projects/01-test/cat.jpg)而我只需要[http://website.com/projects/01-test](http://website.com/projects/01-test)。

如果我能以某种方式自动化这个，那么我想我可以做类似的事情：

```
<a href="<?php echo $image->MYSTERY(); ?>/large/<?php echo $image->name(); ?>-large.jpg"> 
```

好的，我希望这是有道理的。我正在学习 PHP，所以如果之前已经介绍过，我深表歉意——我已经尝试过到处搜索，但可能只是我不太知道要搜索什么。您能提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:44:53.683

您可能正在查看[`dirname()`](http://php.net/dirname)：

```
<?php echo dirname($image->url()); ?> 
```

例如：

```
echo dirname('http://example.org/path/to/picture.jpg');
// http://example.org/path/to 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:26:43.470

将您的 URL 分解为一个数组并删除最后一个元素。`using explode() - array_pop() - implode()`像这样：

```
$arrayofurl = explode("/", $url);
array_pop($arrayofurl);
$final = implode("/",$arrayofurl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:41:36.760

根据您的问题，我假设`$image->url();`返回完整的图像 URL 并`$image->name();`返回图像的名称（不带分机），对吗？

所以我认为这应该可以解决问题，不是吗？

```
$urlPath = str_replace($image->name() . '.jpg', '', $image->url());

printf('<a href="%slarge/%s-large.jpg"><img src="%s"/></a>', $urlPath, $image->name(), $image->url()); 
```

**更新**：忘记这个答案，只需使用`dirname()`.

只是为了好玩，下面是一个 JS 替代方案，它将遍历所有图像链接并设置 XL 图像路径：

```
<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head> 
<body>
<a href="#"><img src="test.jpg"/></a><hr>
<a href="#"><img src="test2.jpg"/></a><hr>
<a href="#"><img src="test3.jpg"/></a>
<script>
    for(var a = document.getElementsByTagName("a"), b = 0;b < a.length;b++) {
      var c = a[b], d = new String(c.children[0].src), e = d.replace(/\\/g, "/").replace(/\/[^\/]*\/?$/, ""), f = d.replace(e, "");
      c.href = e + "/large" + f.replace(".jpg", "-large.jpg")
    }
    ;
</script>
</body>
</html> 
```

# bash - 寻找一些指导的 BASH 脚本

> ID：15513638
> 
> 赞同：1
> 
> 时间：2013-03-20T01:23:01.893
> 
> 标签：bash, shell

好吧，我在这几个小时，我不明白为什么我不能将值保存到变量中：

```
let inicio=${tlinhas[0]}/2+1
tail -n +$inicio $1 | head -n $tlinhas | grep $2 | while read linha
do
    let palavras=$palavras+$(echo $linha | wc -w)
    echo $palavras 
done
printf "%d" $palavras 
```

问题是每次我打印变量 palavras 它总是为零但是如果我在其中打印它而它的值是 14

```
 [leganuno@LegaNuno-PC FichasIndividuais]$ ./exercicio1.sh f1 Licenciatura
 7
 7
 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:27:39.787

尝试

```
palavras = echo $($palavras + $(echo $linha | wc -w) | bc) 
```

# machine-learning - 仅根据同一场比赛的先前数据预测足球比赛获胜者

> ID：15513640
> 
> 赞同：11
> 
> 时间：2013-03-20T01:23:03.703
> 
> 标签：machine-learning, neural-network, regression, prediction

我是一个超级足球迷，对机器学习也很感兴趣。作为我的 ML 课程的一个项目，我正在尝试建立一个模型，根据主队和客队的名字来预测主队获胜的机会。（我查询我的数据集并根据之前的比赛创建数据点这两支球队之间）

我有所有球队几个赛季的数据，但是我有以下问题，我想提出一些建议。 EPL（英超联赛）有 20 支球队在主场和客场比赛（一个赛季总共 380 场比赛）。因此，每个赛季，任何 2 支球队只交手两次。

我有过去 10 多年的数据，导致两个团队有 2*10=20 个数据点。但是我不想超过 3 年，因为我相信球队会随着时间的推移发生相当大的变化（曼城，利物浦），这只会给系统带来更多的错误。

所以这导致每对团队只有大约 6-8 个数据点。但是，对于每个数据点，我确实有几个特征（最多 20 多个），例如两支球队的全场进球、半场进球、传球、射门、黄球、红球等，因此我可以包括最近的形式、最近的主场等特征表格，最近离开表格等

但是，仅使用 6-8 个数据点进行训练的想法对我来说似乎是不正确的。关于如何解决这个问题有什么想法吗？（如果这首先是一个问题，即）

谢谢！

编辑：FWIW，这是我在项目完成时编译的报告的链接。[https://www.dropbox.com/s/ec4a66ytfkbsncz/report.pdf](https://www.dropbox.com/s/ec4a66ytfkbsncz/report.pdf) 。这不是什么“好”的东西，但我认为我设法引出的一些观察结果非常酷（比如我的预测对德甲联赛非常有效，因为拜仁一直赢得联赛冠军）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:26:13.013

这是一个有趣的问题，我认为没有独特的解决方案。但是，如果我处于您的位置，我可以尝试一些小事情。

我分享您关于每节课大约 6-8 分的担忧，因为数据太少而无法建立可靠的模型。所以我会尝试对这个问题进行一些不同的建模。为了为每个班级提供更多数据，而不是 20 个班级，我将只有两个（主场/客场），我会添加两个特征，一个用于主场球队，另一个用于客场球队。在该设置中，您仍然可以预测哪支球队会在主场或客场比赛中获胜，并且您的问题有更多数据来产生结果。

另一个想法是从其他欧洲联赛中获取数据。由于现在球队是一个特征而不是一个类别，它不应该给你的模型增加太多噪音，你可以从额外的数据中受益（假设这些特征在其他联赛中有效）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-09T13:22:56.887

我有一些类似的系统 - 源数据的良好基础是 football-data.co.uk。我为每个联赛使用了最后 N 个赛季并建立了一个模型（相信我，3 年以上是必须的！）。取决于您的标准功能 - 如果标准是最合适的或最大的利润，您可以建立自己的预测模型。

一件非常好的事情是每个联赛都是不同的，博彩公司在比利时的热门主场胜率与在第 5 届英格兰联赛中给出的赔率不同，例如，您可以在其中找到真正有价值的赔率。

从中您可以编写有趣的模型，例如在特定比赛中击败庄家的[投注技巧](http://www.betpro.org)，使用您的模式并进行价值投注。或者，您可以尝试尽可能多地追逐获胜技巧，但可能会赚得更少（即使获胜的抽奖数量较少，抽奖也会赚很多钱）。

希望我给了你一些想法，更多请随时提问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T02:19:30.397

不知道这是否仍然有用，但像全场进球、半场进球、传球、射门、黄球、红球等功能是您想要分类的新比赛所没有的功能。

我会将其视为分类问题（您希望将匹配分类为 3 个类别之一：1、X 或 2）并添加更多功能，您也可以将这些功能应用于新匹配。即：失踪球员的数量（由于受伤/红牌），每支球队在比赛开始前的连续胜/平/负数，即主队（已经提到过），进球数最近几场主客场比赛等等……

有 6-8 场比赛才是真正的问题。这个数据集非常小，会有很多过拟合，但如果你使用我提到的那些特征，我认为你也可以使用旧数据。

# python - 由于 1.7.6 更新，我是否真的需要安装 Xcode 并编译 PyObjC？

> ID：15513642
> 
> 赞同：8
> 
> 时间：2013-03-20T01:23:28.000
> 
> 标签：python, google-app-engine

必须有更简单的方法。

今天尝试启动我的应用程序时收到此警告：

> /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/file_watcher.py:97：
> 
> 用户警告：不支持检测源代码更改，因为您的 Python 版本不包含 PyObjC ( [http://pyobjc.sourceforge.net/](http://pyobjc.sourceforge.net/) )。请安装 PyObjC，或者，如果这不切实际，请在[http://code.google.com/p/appengine-devappserver2-experiment/issues/list](http://code.google.com/p/appengine-devappserver2-experiment/issues/list)提交错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T12:06:18.993

PyObjC 安装程序只需要 Xcode，因为它需要编译器。但是，您无需下载 Xcode 即可轻松获得编译器。

只需[单击此链接](https://developer.apple.com/downloads/)，然后使用您的 Apple 开发者 ID 登录，或者如果您还没有免费的 Apple 开发者帐户，请注册一个。然后在页面中搜索命令行工具，下载并安装它们。

安装命令行工具后，您可以使用网站上的[说明](http://pythonhosted.org/pyobjc/install.html)安装 PyObjC 。

该网站详细介绍了如何使用`pip`、`easy_install`或手动安装。我将简要概述下面的前两种方法（手动安装稍微多一些，您应该阅读网站上的说明。）：

### 点：

```
env CC=clang pip install -U pyobjc-core
env CC=clang pip install -U pyobjc 
```

### 简易安装：

```
easy_install -U pyobjc-core
easy_install -U pyobjc 
```

### 手动安装：

[滚动到此网页的末尾，并阅读相关信息。](http://pythonhosted.org/pyobjc/install.html)

# ios - 更新 tableView 时断言失败

> ID：15513644
> 
> 赞同：5
> 
> 时间：2013-03-20T01:23:34.123
> 
> 标签：ios, objective-c

注意：当我点击该行时，应用程序会崩溃。

我正在尝试在用户的水龙头上添加一个新单元格。我发现在 WWDC 2011 的表格视图演示中有一个类似的例子。这是我的表格视图中的代码。

这是错误：

```
2013-03-19 20:04:28.672 Project[51229:c07] *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070 
```

这是我在表格视图中的代码。

```
@interface MyPFQueryTableViewController : PFQueryTableViewController <PFLogInViewControllerDelegate, PFSignUpViewControllerDelegate>

@property (nonatomic, strong) NSIndexPath *controlRowIndexPath;
@property (nonatomic, strong) NSIndexPath *tappedIndexPath;

@implementation MyPFQueryTableViewController {

    ListItemObject *listDetail;
}

@synthesize controlRowIndexPath;
@synthesize tappedIndexPath;

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        PFObject *object = [self.objects objectAtIndex:indexPath.row];
        [object deleteInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
            [self loadObjects];
        }];
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {
    static NSString *CellIdentifier = @"listCell";

    PFTableViewCell *cell = (PFTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"listCell"];
    if (cell == nil) {
        cell = [[PFTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    // Configure the cell
    cell.textLabel.text = [object objectForKey:self.textKey];
    //cell.imageView.file = [object objectForKey:self.imageKey];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [super tableView:tableView didSelectRowAtIndexPath:indexPath];

    //if user tapped the same row twice let's start getting rid of the control cell
    if([indexPath isEqual:self.tappedIndexPath]){
        [tableView deselectRowAtIndexPath:indexPath animated:NO];
    }

    //update the indexpath if needed... I explain this below
    indexPath = [self modelIndexPathforIndexPath:indexPath];

    //pointer to delete the control cell
    NSIndexPath *indexPathToDelete = self.controlRowIndexPath;

    //if in fact I tapped the same row twice lets clear our tapping trackers
    if([indexPath isEqual:self.tappedIndexPath]){
        self.tappedIndexPath = nil;
        self.controlRowIndexPath = nil;
    }
    //otherwise let's update them appropriately
    else{
        self.tappedIndexPath = indexPath; //the row the user just tapped.
        //Now I set the location of where I need to add the dummy cell
        self.controlRowIndexPath = [NSIndexPath indexPathForRow:indexPath.row + 1   inSection:indexPath.section];
    }

    //all logic is done, lets start updating the table
    [tableView beginUpdates];

    //lets delete the control cell, either the user tapped the same row twice or tapped another row
    if(indexPathToDelete){
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPathToDelete]
                              withRowAnimation:UITableViewRowAnimationNone];
    }
    //lets add the new control cell in the right place
    if(self.controlRowIndexPath){
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:self.controlRowIndexPath]
                              withRowAnimation:UITableViewRowAnimationNone];
    }

    //and we are done...
    [tableView endUpdates];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath   *)indexPath
{
    if([indexPath isEqual:self.controlRowIndexPath]){
        return 45; //height for control cell
    }
    return 70; //height for every other cell
}

- (NSIndexPath *)modelIndexPathforIndexPath:(NSIndexPath *)indexPath
{
    int whereIsTheControlRow = self.controlRowIndexPath.row;
    if(self.controlRowIndexPath != nil && indexPath.row > whereIsTheControlRow)
        return [NSIndexPath indexPathForRow:indexPath.row - 1 inSection:0];
    return indexPath;
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T01:39:59.147

问题出在你的`didSelectRowAtIndexPath`方法上。你有：

```
[tableView beginUpdates];

//lets delete the control cell, either the user tapped the same row twice or tapped another row
if(indexPathToDelete){
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPathToDelete]
                          withRowAnimation:UITableViewRowAnimationNone];
}
//lets add the new control cell in the right place
if(self.controlRowIndexPath){
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:self.controlRowIndexPath]
                          withRowAnimation:UITableViewRowAnimationNone];
}

//and we are done...
[tableView endUpdates]; 
```

在您进行任何调用以告诉表添加或删除任何行之前，您必须通过添加或删除数据来更新您的数据源。该表将检查添加/删除行之前和之后有多少部分和行。更改后的部分和行数必须正确反映您添加/删除的数据量以及添加/删除的行数。

当然，您必须实现该`numberOfRowsInSection`方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T01:33:10.200

你`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`看起来像什么？

当您尝试在 UITableView 中添加或删除一行时会发生此错误，但是您声称在该方法中更新后该部分中的行数与应加载的新数据不一致。

例如，如果您的 numberOfRowsInSection 始终返回 4 并且您在该部分中添加一行，则 tableView 将希望它为 5，但它不会因此它会崩溃。您需要跟踪每个部分中有多少行并返回该数字。

# javascript - 从参数添加天数

> ID：15513651
> 
> 赞同：0
> 
> 时间：2013-03-20T01:24:10.440
> 
> 标签：javascript

我需要使用 JavaScript 中 onclick 事件处理程序的单选按钮中的参数向日期对象添加一定数量的天数。当我只是将日期添加到末尾时，它只会在日期末尾添加 1 等。有任何想法吗？

```
var dateObject = new Date();
var month = dateObject.getMonth();

var monthArray = new Array("January", "February", "March", "April",  
                           "May", "June", "July", "August",
                           "September","October","November","December");

function orderReadyDate(orderTime) 
{
    var dateToday = monthArray[month] + " " + dateObject.getDate() + ", " + dateObject.getFullYear();
    document.forms[0].txtPickupDate.value = dateToday;
} 
```

这是我的输入按钮

```
<input type="radio" name="item" value="print_5x7" onclick="orderReadyDate(1)" />5x7 Prints(1 day)<br />
<input type="radio" name="item" value="poster" onclick="orderReadyDate(1)" />Poster (1 day)<br />
<input type="radio" name="item" value="mug" onclick="orderReadyDate(2)" />Coffee Mug (2 days)<br />
<input type="radio" name="item" value="shirt" onclick="orderReadyDate(3)" />T-shirt (3 days)</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:37:28.000

```
var dateToday = monthArray[month] + " " 
        + (dateObject.getDate() + orderTime) 
        + ", " + dateObject.getFullYear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:50:44.317

您需要尝试以下操作：- 请注意 setDate 方法，该方法将添加日期。

```
 var newdate = new Date();
 newdate.setDate(newdate.getDate() + orderTime);
 var dateToday = monthArray[newdate.getMonth()] + " " + 
                 newdate.getDate() + ", " + 
                 newdate.getFullYear(); 
```

# jquery - 以 AJAX/JSON 返回的 HTML 中的 jQuery 选择器

> ID：15513656
> 
> 赞同：0
> 
> 时间：2013-03-20T01:24:47.623
> 
> 标签：jquery, ajax, jquery-selectors

我有一些 jQuery，它在悬停时为 > 标签的背景颜色设置动画`<div`（并在不再悬停时恢复它们）。

```
$('.row').hover(function() {
    $(this).stop().animate({
        backgroundColor: "#000000"
    }, 250 );
}, function () {
    $(this).stop().animate({
        backgroundColor: "#15181A"
    }, 250 );
}); 
```

我的页面上有一个 AJAX 调用来加载一些额外`<div`的 >，如下所示：

```
$.ajax({
    type : 'POST',
    url : "ajax.php",
    dataType : 'json',
    data: {
        query : $('#search').val()
    },
    success : function(data) {
        if (data.error === true) {
            // Error
        } else {
            $('#more').html(data.msg);
        }
    },
    error : function(XMLHttpRequest, textStatus, errorThrown) {
        // Error
    }
}); 
```

AJAX 调用有效地返回更多`<div`带有“行”类的 >s，但是当它们悬停时，jQuery 不会为其背景颜色设置动画。是否可以使用 jQuery 选择这些行，即使它们是通过 AJAX 加载的？

编辑：这是 AJAX 调用 ajax.php 返回的内容：

```
<?php
$return['error'] = false;
$return['msg'] = '<div class="row" style="background: #15181A;">A row...</div>';
$return['msg'] = '<div class="row" style="background: #15181A;">Another row...</div>';
$return['msg'] = '<div class="row" style="background: #15181A;">Another row...</div>';
echo json_encode($return);
return;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:27:05.073

动态元素需要委托的事件处理程序：

```
$('#more').on({
    mouseenter: function() {
        $(this).stop().animate({
            backgroundColor: "#000000"
        }, 250 );
    },
    mouseleave: function() {
        $(this).stop().animate({
            backgroundColor: "#15181A"
        }, 250 );
    }
}, '.row'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:27:33.670

将其绑定到您的`#more`元素。

```
$("#more").on("mouseenter mouseleave", ".row", function(e){
  if(e.type == "mouseenter"){ 
    // your hover code
  }else{
    // your off-hover code
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:27:22.250

这可能是因为您在实际向页面附加来自 AJAX 请求的新内容之前调用您的方法来设置悬停效果。

例如这样的事情：

```
success: function (data) {
    if (data.error === true) {
        // Error
    } else {
        $('#more').html(data.msg);
        $('.row').hover(function () {
            $(this).stop().animate({
                backgroundColor: "#000000"
            }, 250);
        }, function () {
            $(this).stop().animate({
                backgroundColor: "#15181A"
            }, 250);
        });
    } 
```

`.row`当您在 AJAX 请求成功时附加与选择器匹配的新元素时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T01:28:25.330

您需要`$('.row').hover(function() ...`在您的 AJAX 成功函数中调用 。

# c++ - BOOST 程序选项命令行的格式是什么？

> ID：15513660
> 
> 赞同：0
> 
> 时间：2013-03-20T01:25:00.323
> 
> 标签：c++, boost, options, boost-program-options

我有两个开关，'i' 和 'p' 分别代表 IPAddress 和 Port。

命令行的格式是什么？

我努力了：

```
app -i192.168.1.1 -p12345
app -i 192.168.1.1 -p 12345
app -i=192.168.1.1 -p=12345
app -i='192.168.1.1' -p='12345'
app --IPAddress 192.168.1.1 --Port12345 
```

我的应用程序的 IPAddress 有问题，并且 DDD 的故障排除在我为 vm 获取时无法揭示。

此外，该应用程序作为守护程序运行，因此我的 IP 地址和端口的 cout 语句将被遗忘，并且由于输出值不是 const char* 的事实而阻碍了打印到 syslog。

我也计划将程序选项用于其他事情，但我对此有点不知所措。

```
po::options_description config("Configuration");
        config.add_options()
            ("IPAddress,i","IP Address")
            ("Port,p","Port")
             ;
po::variables_map vm;
        po::store(po::parse_command_line(ac, av, config),
                       vm);

        po::notify(vm);
//...and this is how the values are used

int retval = getaddrinfo((vm["IPAddress"].as< string >()).c_str(),(vm["Port"].as<string>()).c_str(), &hint, &list); 
```

这是一个完整的程序...在“值”之后没有任何内容打印到控制台：

```
#include <sstream>
#include <algorithm>
#include <stdlib.h>
#include <iterator>
#include <string>

//Using boost program options to read command line and config file data
#include <boost/program_options.hpp>
using namespace std;
using namespace boost;
namespace po = boost::program_options;

int main (int argc, char *argv[])
{
    po::options_description config("Configuration");
    config.add_options()
                ("IPAddress,i","IP Address")
                ("Port,p","Port")
                 ;

    po::variables_map vm;
    po::store(po::parse_command_line(argc, argv, config),vm);
    po::notify(vm);

    cout << "Values\n";

    cout << (vm["IPAddress"].as< string >()).c_str();
    cout << " " << (vm["Port"].as<string>()).c_str();

    return 0;

} 
```

输入的值是否无法打印？

* * *

这是gdb输出，似乎是演员问题：

```
28              string address = (vm["IPAddress"].as< string >()).c_str();
(gdb) n
terminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::bad_any_cast> >'
  what():  boost::bad_any_cast: failed conversion using boost::any_cast

Program received signal SIGABRT, Aborted.
0x0000003afd835935 in raise () from /lib64/libc.so.6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:21:28.673

BOOST 程序选项支持 Unix 系统中已知的常见命令行风格。因此这两个应该工作（他们正在为我工​​作）

```
app -i 192.168.1.1 -p 12345
app --IPAddress=192.168.1.1 --Port=12345 
```

评论：

*   带有基本教程的文档[位于 boost.org](http://www.boost.org/doc/libs/1_53_0/doc/html/program_options/tutorial.html)（可能你已经知道了）
*   为此编写一个独立的单元测试当然是一个好建议；boost 还为 C++ 提供了一个易于使用的测试框架

# bash - BASH find -name（读取变量）

> ID：15513661
> 
> 赞同：3
> 
> 时间：2013-03-20T01:25:02.117
> 
> 标签：bash, variables, find

我是 bash 新手，遇到了一个我无法解决的问题。问题是我需要使用 find -name 并将名称定义为变量。部分脚本：

```
read MYNAME
find -name $MYNAME 
```

但是当我运行脚本时，输入 '*sh' 进行读取，结果为 0。但是，如果我直接在终端中输入：

```
find -name '*sh' 
```

它工作正常。

我也试过

```
read MYNAME
find -name \'$MYNAME\' 
```

键入 *sh 进行读取，但没有成功。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:39:12.690

最可能

```
read MYNAME
find -name "$MYNAME" 
```

是您正在寻找的版本。如果没有双引号`"`，shell 将在运行之前`*`在您的`*sh`示例中扩展，`find`这就是您的第一次尝试不起作用的原因

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:40:49.240

你可能想要

```
find -name "$MYNAME" 
```

因为这可以防止`$MYNAME`受到 bash 的路径名扩展（又名“globbing”）的影响，从而导致`*sh`被完整地传递给`find`. 一个关键区别是通配符不会匹配隐藏文件，例如`.ssh`, 而`find -name "*sh"`会。但是，由于您没有定义您正在寻求的预期行为，因此很难确定您需要什么。

# javascript - 异步、回调和 OOP JavaScript：我如何组织它？

> ID：15513663
> 
> 赞同：3
> 
> 时间：2013-03-20T01:25:15.653
> 
> 标签：javascript, oop, asynchronous, xmlhttprequest

我正在构建一个插件，它以 JSON 格式获取一堆图像的信息，然后在某个对话框中显示它们以供选择。不幸的是，我的第一个直觉很清楚地导致了竞争条件：

```
var ImageDialog = function () {};
ImageDialog.prototype.items = [];

ImageDialog.prototype.fetch_images() {
    var parse_images = function(data) {
        // Magically parse these suckers.
        data = awesome_function(data);
        this.items = data;
    };

    magicalxhrclass.xhr.send({"url": 'someurl', "success": parse_images, "success_scope": this});
}

ImageDialog.prototype.render = function () {
    this.fetch_images();
    // XHR may or may not have finished yet...
    this.display_images();
    this.do_other_stuff();
};

var monkey = new ImageDialog();
monkey.render(); 
```

在我的脑海中，我想我可以通过更改`parse_images`回调以包含其余的渲染步骤来解决这个问题。但是，这看起来不太正确。为什么该`fetch_images`方法会调用一堆关于显示图像的东西？

所以：我应该在这里做什么？

我很确定 deferreds 会有所帮助，但可惜：我需要在没有任何外部库的情况下编写它。:(

对其他代码气味的评论也会很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:31:35.170

这个怎么样？

```
var ImageDialog = function () {
    this.items = []; // just in case you need it before the images are fetched
};

ImageDialog.prototype.fetch_images(callback) {
    var that = this;
    function parse_images (data) {
        // Magically parse these suckers.
        data = awesome_function(data);
        that.items = data;
        callback.apply(that);
    };

    magicalxhrclass.xhr.send({"url": 'someurl', "success": parse_images, "success_scope": this});
}

ImageDialog.prototype.render = function () {
    this.fetch_images(function(){
        this.display_images();
        this.do_other_stuff();
    });
};

var monkey = new ImageDialog();
monkey.render(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:36:02.043

一般来说，您可以使用的基本思想是，当常规程序使用 return 语句时（意思是，“我的函数现在完成了，做你的工作！”）异步延续传递程序将改为使用显式获取的 ballcabk 函数叫

```
function fetch_images(callback){
   magicalXHR({
       success: function(data){
           parse_images(data);
           callback(whatever);
       }
   }
} 
```

或者，如果 parse_images 本身就是一个异步函数：

```
parse_images(data, callback) 
```

现在，当您调用 fetch_images 代码进入回调之后，而不是假设 fetch_images 将在它返回时完成

```
fetch_images(function(
   display_images()
}) 
```

通过使用回调，您可以很好地模拟传统程序可以做的事情（实际上它是在另一种形式之间进行相当机械的转换）。您现在将遇到的唯一问题是错误处理变得棘手，循环等语言功能不能很好地与异步回调一起使用，并且回调往往会嵌套在回调地狱中。如果回调开始变得过于复杂，我会使用其中一种 Javascript 方言进行调查，这些方言可以编译为持续传递式 Javascrit（其中一些在运行时不需要额外的库即可工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:49:21.197

这里有一个关于做什么的想法。

```
ImageDialog.prototype.fetch_images() {
    var parse_images = function(data) {
        // Magically parse these suckers.
        data = awesome_function(data);
        this.items = data;
        fetch_images.caller() // Unfortunately, this is nonstandard/not in the spec. :(
    };

    magicalxhrclass.xhr.send({"url": 'someurl', "success": parse_images, "success_scope": this});
}

ImageDialog.prototype.render = function () {
    if (this.items === []) {
        this.fetch_images()
        return;
    } else {
        this.display_images();
        this.do_other_stuff();
    };
}; 
```

这样我就不会将一些实现细节传递给 fetch_images，而是得到缓存来启动。我是否还在努力逃避 CPS，或者这是否明智？

# html - CSS 'display: table-column' 无法正常工作

> ID：15513666
> 
> 赞同：3
> 
> 时间：2013-03-20T01:25:39.187
> 
> 标签：html, css, html-table, css-tables

请问有人能解释一下这样的问题吗？

在[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/CSS/display) `display: table-column`CSS 规则被描述为：*这些元素的行为类似于相应的`<col>`HTML 元素*。

直到现在我才广泛使用 CSS 表格，因为它们在旧版本的 IE 中不受支持，但今天我发现即使对于现代浏览器，CSS 表格也不能被视为 HTML 表格的真正替代品。

```
<style>
    .css_table {
         display: table;
         border: 1px solid black;
         padding: 10px;
    }
    .col {
         display: table-column;
         width: 20px;
    }
    .table_row {
         display: table-row;
    }
    input {
        width: 100%;
        display: table-cell;
    }

    table {
        border: 1px solid black;
        padding: 10px;
    }
    col {
        width: 20px;
    }
</style>

<div class="css_table">
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
    <div class="table_row">
        <input>
        <input>
        <input>
    </div>
    <div class="table_row">
        <input>
        <input style="width:50px;">
        <input>
    </div>
    <div class="table_row">
        <input>
        <input>
        <input>
    </div>
 </div>

<table>
<col>
<col>
<col>
<tr>
    <td><input></td>
    <td><input></td>
    <td><input></td>
</tr>
<tr>
    <td><input></td>
    <td><input style="width:50px;"></td>
    <td><input></td>
</tr>
<tr>
    <td><input></td>
    <td><input></td>
    <td><input></td>
</tr>
</table> 
```

这是一个[小提琴](http://jsfiddle.net/KSe8Z/1/)。如您所见，我的意图是创建一个 3x3 的“矩阵”，并且我想使用表格，以便在某些元素超过单元格宽度时，列将自动调整其宽度。

但是在 CSS 方法的情况下，`table-column`属性不能按预期工作。尽管我连续有三个单元格，但所有单元格都放在第一列。

**所以问题是：是我做错了什么还是 CSS 规则实现有问题？**因为很明显，CSS“列”的行为不像真正的 HTML `<col>`。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:44:57.700

**您不能将输入元素指定为表格单元格。**

由于显示属性因无效而被忽略，因此您的表格行中没有任何列可以应用其属性的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:44:26.147

您需要具有与 html 表类似的结构。

```
<row>
<col>
<col>
</row>

<row>
<col>
<col>
</row> 
```

[http://jsfiddle.net/btevfik/SS3XL/](http://jsfiddle.net/btevfik/SS3XL/)

# java - 在浏览器请求中找不到显示页面

> ID：15513670
> 
> 赞同：0
> 
> 时间：2013-03-20T01:26:07.460
> 
> 标签：java, http, dataoutputstream

我正在尝试显示未从服务器找到的 404 页面

```
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class ex1 {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    final int BUFFER_SIZE=1000;
    char[] buffer=new char[BUFFER_SIZE];
    ServerSocket serverSocket = null; 
    try {
        serverSocket = new ServerSocket(16000); 
    } catch (IOException e) {
        System.out.println("Could not listen on port: 16000");
        System.exit(-1); 
    }
    while (true) {
        Socket clientSocket = null; 
        try {
            System.out.println("Waiting for Connection"); 
            clientSocket = serverSocket.accept(); 
            System.out.println("Connection Accepted");
            DataOutputStream output =new DataOutputStream(clientSocket.getOutputStream());
            output.writeBytes("HTTP/1.1 404 Not Found \r\n");
            output.writeBytes("Content-Type: text/html \r\n\r\n");

            output.flush();
        } catch (IOException e) {
            System.out.println("Failed to accept connection");
            System.exit(-1); 
        }
        try {
            BufferedReader in =
            new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            in.read(buffer);
            System.out.println(buffer);
            in.close();
            clientSocket.close(); 
            System.out.println("Connection terminated");
            serverSocket.close();
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Problem in communicating with the client"); }
    }
}
} 
```

问题是当我在浏览器（谷歌浏览器）中输入 localhost:16000 时，我得到“糟糕！此链接似乎已损坏。” 不是第 404 页

输出是：

```
Waiting for Connection
Connection Accepted
java.net.SocketException: Connection reset
Problem in communicating with the client
Waiting for Connection
Connection Accepted
GET / HTTP/1.1
Host: localhost:16000
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

Connection terminated
Waiting for Connection
Failed to accept connection
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
    at java.io.InputStreamReader.read(InputStreamReader.java:184)
    at java.io.BufferedReader.fill(BufferedReader.java:154)
    at java.io.BufferedReader.read1(BufferedReader.java:205)
    at java.io.BufferedReader.read(BufferedReader.java:279)
    at java.io.Reader.read(Reader.java:140)
    at ex1_Getting_your_hands_dirty.ex1.main(ex1.java:55) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:32:28.510

在我看来，您的 HTTP 响应无效。

```
 HTTP/1.x 404 Not Found 
```

你应该：

*   将 更改`1.x`为适当的版本号，例如`1.0`
*   添加响应正文
*   添加至少一个标题 - 也许`Content-Length`和`Content-Type`

更像...

```
HTTP/1.1 404 Not Found
Content-Length: 9
Content-Type: text/plain

Not Found 
```

# session - IIS 8.0 集成管道 Session RequestAcquireState

> ID：15513674
> 
> 赞同：0
> 
> 时间：2013-03-20T01:26:42.613
> 
> 标签：session, iis, pipeline, locked, integrated

我们正在尝试在 Windows Server 2012 标准版上为基于 ASP.Net 4.0 版构建的应用程序从 IIS 6.0 切换到 IIS 8.0 集成池。我们的 Web 应用程序请求进入上述 Windows Server 上的 IIS 8.0 集成池中的 RequestAcquireState（对于使用相同 sessionid 的并发请求，ASP.Net 会话被锁定）。但是，当我们在 IIS 8.0 上以经典模式运行相同的应用程序时，不会出现这种行为。

Session 存储在 InProc 中。

我们可以在 Windows Server 2012 数据中心上通过修改注册表中的 SessionStateLockedItemPollInterval 来纠正这种情况。但是，该解决方案在 Windows Server 2012 标准版中不起作用。

这让我们很困惑——

为什么我们在以前版本的 IIS 和 IIS 8.0 的经典模式上成功运行的应用程序在 IIS 8.0 集成池中出现 ASP.Net 运行时会话问题？

我们现在如何在 Windows Server 2012 标准版上解决这个问题？

谢谢，如果有人可以提供帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T14:03:30.420

IIS 8 带有 .net 框架 4.5，因此您可能会遇到缺少修复[http://support.microsoft.com/kb/2828842](http://support.microsoft.com/kb/2828842)

第 6 期

症状

当您向 ASP.NET 4.5 Web 应用程序发送多个具有相同 SessionId 的并发请求时，某些请求可能会意外冻结在 RequestAcquireState 阶段。解析度

应用此修复程序后，此修复程序可确保 EndRequest 事件将始终触发。

尝试安装此修复程序，看看是否解决了问题

# sqlite - SQLite 语句的哪些部分可以绑定参数？

> ID：15513675
> 
> 赞同：1
> 
> 时间：2013-03-20T01:26:43.327
> 
> 标签：sqlite

SQLite 语句的哪些部分能够接受绑定参数？例如，我发现以下内容无效：

```
SELECT @column1 FROM @table WHERE @column2 = @criteria 
```

示例中我能够正常工作的唯一参数是 ，这让`@criteria`我认为只有等式右侧的值才能绑定为参数。

我很难在[关于绑定参数的官方文档](http://www.sqlite.org/c3ref/bind_blob.html)和我在互联网上的搜索中找到答案，所以有人可以明确告诉我 SQLite 语句的哪些部分可以绑定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:40:17.460

该文件说：

> 文字可以被参数替换

[文字值](http://www.sqlite.org/lang_expr.html#litvalue)是：

> 某种常数。文字值可以是整数、浮点数、字符串、BLOB 或 NULL。

表名和列名*不是*字符串（尽管 SQLite 有时允许您使用相同的语法来与 MySQL 兼容）。

# java - 用文件夹填充 jList？

> ID：15513678
> 
> 赞同：-2
> 
> 时间：2013-03-20T01:27:04.380
> 
> 标签：java, swing, file, jlist

我试图编写一部分代码来获取目录中的文件夹，然后使用这些文件夹的名称来填充 jlist，以便用户可以从他们想要的特定目录中的文件夹中选择哪个文件夹采用。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:34:06.303

要查找您可以使用的文件夹`File.listFiles()`，然后使用`isDirectory()`. 否则，但稍微复杂一点，您可以使用`FileFilter`.

要填充它，您将文件名保存在一个数组中`String[] data = {"one", "two", "three", "four"};`，然后用它们创建 jlist `JList dataList = new JList(data);`。

# jquery - jQuery Plupload 限制上传次数

> ID：15513689
> 
> 赞同：9
> 
> 时间：2013-03-20T01:27:57.357
> 
> 标签：jquery, plupload

我已经在这段代码上工作了一段时间，现在试图让它正常工作。我想限制使用总共上传超过 2 张图片。

`var upa = $('.uploader').plupload('getUploader');`它给出了 Uncaught TypeError: Object [object Object] has no method 'plupload' 错误的行

```
 var maxfiles=2;
    $('.uploader').each(function(){
        var $uploader = $(this);
        $uploader.pluploadQueue($.extend({
            runtimes: 'html5,flash,html4',
            url : '../admin/extras/upload.php',
            max_file_size : '2mb',
            chunk_size : '2mb',
            unique_names : true,                
            filters : [
                {title : "Image files", extensions : "jpg"}
            ],
            resize : {width : 800, height : 600, quality : 90},
            flash_swf_url : 'js/mylibs/forms/uploader/plupload.flash.swf',
            init : {
                FilesAdded: function(up, files) {
                    plupload.each(files, function(file) {
                        if (up.files.length > maxfiles) {
                            up.removeFile(file);
                        }
                        var upa = $('.uploader').plupload('getUploader');
                        var i = 0;
                        while (i<=upa.files.length) {
                            ultimo = upa.files.length;
                            if (ultimo > 1) {
                                if (i > 0) {
                                    ultimo2 = ultimo - 1;
                                    ii = i-1;
                                    if (ultimo2 != ii) {
                                        if (up.files[ultimo - 1].name == upa.files[i-1].name) {
                                            up.removeFile(file);
                                        }
                                    }
                                }
                            }
                            i++;
                        }
                    });
                    if (up.files.length >= maxfiles) {
                        $('#uploader_browse').hide("slow");
                    }
                },
                FilesRemoved: function(up, files) {
                    if (up.files.length < maxfiles) {
                        $('#uploader_browse').fadeIn("slow");
                    }
                }
            }
        }));
        $uploader.find('.plupload_button').addClass('button grey btn');
        $uploader.find('.plupload_add').addClass('icon-plus');
        $uploader.find('.plupload_start').addClass('icon-ok');
    }); 
```

当我上传图片时会产生错误。我不知道我错过了什么，但非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T09:54:05.023

`while (i<=upa.files.length) {`我不清楚你想在块中实现什么。好像你的页面上有几个上传者，但我无法理解这个想法。

无论如何，我想这应该可以解决问题，因为在单个上传器中最多限制为 2 个文件。

```
FilesAdded: function(up, files) {
                    var maxfiles = 2;
                    if(up.files.length > maxfiles )
                     {
                        up.splice(maxfiles);
                        alert('no more than '+maxfiles + ' file(s)');
                     }
                    if (up.files.length === maxfiles) {
                        $('#uploader_browse').hide("slow"); // provided there is only one #uploader_browse on page
                    }
                }, 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-03T09:55:39.390

好答案jbl。我稍微调整了您的解决方案以使其更通用，并在需要时重新出现“添加文件”按钮。

```
uploader.bind('FilesAdded', function(up, files) {
  if (up.files.length >= up.settings.max_files) {
    up.splice(up.settings.max_files);
    $(up.settings.browse_button).hide();
  }
});

uploader.bind('FilesRemoved', function(up, files) {
  if (up.files.length < up.settings.max_files) {
    $(up.settings.browse_button).show();
  }
}); 
```

`max_files`是 pluploadQueue 设置的一部分

```
$("#uploadBox").pluploadQueue({
  ...
  max_files: 2,
  ...
}); 
```

# c - 在c中打开/读取文本文件

> ID：15513696
> 
> 赞同：-1
> 
> 时间：2013-03-20T01:28:29.477
> 
> 标签：c, file, struct, fread

您好，我正在使用 gcc -Wall -std=c99 和 a./out 在 linux 上运行这个 C 程序。我没有收到任何警告/错误。但是当我打印从文件中读取的信息时，我得到了疯狂的输出。该文件包含：

```
A13
B99
C2
D2
E44
F32
G2
H9 
```

输出是：

```
id:  A
size: 171522370
id:  C
size: 876939826
id:  4
size: 843516466 
```

代码是

```
typedef struct record{

    char id;
    int size;

}record; 

int main ()
{

   record reg;

    FILE *fp = NULL;

    fp = fopen("idSize.txt", "r");

    if ((fp = fopen("idSize.txt", "r")) == NULL){
      printf("error opening file");
      exit(1);
    }

    fread(&reg, sizeof(reg),1,fp);

    while (!feof(fp)){

        printf("id:  %c\n", reg.id);
    printf("size: %d\n", reg.size);

    fread(&reg, sizeof(reg),1,fp);

    }

    fclose(fp);

    return 0;

} 
```

任何帮助将不胜感激！非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:32:05.010

您`fread`正在从文件中读取*二进制*信息，而不是它实际包含的*文本。*我的意思是它希望在文件中找到结构的*内存映像*，这取决于您的实现。

因此，例如（尽管这一切都根据您的实现的填充行为和类型大小而有所不同），它可能期望一个单字节`char`后跟三个填充字节，然后是一个`int`.

您应该考虑`fscanf`改用它，它可以为您转换。例如，以下代码：

```
#include <stdio.h>

typedef struct record {
    char id;
    int size;
} record;

int main (void) {
    record reg;
    FILE *fp;

    if ((fp = fopen ("idSize.txt", "r")) == NULL) {
      printf ("Error opening file\n");
      return 1;
    }

    while (fscanf (fp, "%c%d\n", &(reg.id), &(reg.size)) == 2)
        printf ("id: %c, size: %d\n", reg.id, reg.size);

    fclose(fp);
    return 0;
} 
```

产生：

```
id: A, size: 13
id: B, size: 99
id: C, size: 2
id: D, size: 2
id: E, size: 44
id: F, size: 32
id: G, size: 2
id: H, size: 9 
```

# java - 使用 opencsv 读取远程 .csv 文件

> ID：15513697
> 
> 赞同：9
> 
> 时间：2013-03-20T01:28:34.327
> 
> 标签：java, opencsv

我已经考虑了很长时间了。我正在尝试从[Yahoo!'s Stock API](http://www.gummy-stuff.org/Yahoo-data.htm)下载数据。当您使用 API 时，它会为您提供一个`.csv`文件。我一直在看 opencsv，它看起来很完美，除了**我想避免[下载和保存文件](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)，如果可能的话**。

根据[示例](http://opencsv.sourceforge.net/#how-to-read)，OpenCSV 只能从`FileReader`. 根据 Oracle 上的[文档`FileReader`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)，该文件需要是本地的。

* * *

是否可以在不下载的情况下使用 OpenCSV 从远程文件中读取？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T01:37:49.730

`CSVReader``Reader`根据[文档](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVReader.html)接受一个参数，因此它*不限*于`FileReader`参数 a。

要在`CSVReader`不先保存文件的情况下使用 a ，您可以`BufferedReader`在加载数据的流周围使用 a ：

```
URL stockURL = new URL("http://example.com/stock.csv");
BufferedReader in = new BufferedReader(new InputStreamReader(stockURL.openStream()));
CSVReader reader = new CSVReader(in);
// use reader 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T07:30:15.560

用于读取 csv 文件并保存到数据库的 opencsv 的实现。

```
import com.opencsv.CSVParser;
import com.opencsv.CSVParserBuilder;
import com.opencsv.CSVReader;
import com.opencsv.CSVReaderBuilder;
import com.opencsv.bean.CsvBindByPosition;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import javax.persistence.Column;
import java.io.*;
import java.lang.annotation.Annotation;
import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

@Service
@Slf4j
public class FileUploadService {

    @Autowired
    private InsertCSVContentToDB csvContentToDB;

    /**
     * @param csvFileName location of the physical file.
     * @param type Employee.class
     * @param delimiter  can be , | # etc
     * @param obj    //new Employee();
     *
     *            import com.opencsv.bean.CsvBindByPosition;
     *            import lombok.Data;
     *
     *            import javax.persistence.Column;
     *
     *              @Data
     *              public class Employee {
     *
     *              @CsvBindByPosition(position = 0, required = true)
     *              @Column(name = "EMPLOYEE_NAME")
     *              private String employeeName;
     *
     *              @CsvBindByPosition(position = 1)
     *              @Column(name = "Employee_ADDRESS_1")
     *              private String employeeAddress1;
     *          }
     *
     * @param sqlQuery  query to save data to DB
     * @param noOfLineSkip make it 0(Zero) so that it should not skip any line.
     * @param auditId apart from regular column in csv we need to add more column for traking like file id or audit id
     * @return
     */
    public <T> void readCSVContentInArray(String csvFileName, Class<? extends T> type, char delimiter, Object obj,
                                                  String sqlQuery, int noOfLineSkip, Long auditId) {
        List<T> lstCsvContent = new ArrayList<>();
        Reader reader = null;
        CSVReader csv = null;
        try {
            reader = new BufferedReader(new InputStreamReader(new FileInputStream(csvFileName), "utf-8"));
            log.info("Buffer Reader : " + ((BufferedReader) reader).readLine().isEmpty());
            CSVParser parser = new CSVParserBuilder().withSeparator(delimiter).withIgnoreQuotations(true).build();
            csv = new CSVReaderBuilder(reader).withSkipLines(noOfLineSkip).withCSVParser(parser).build();
            String[] nextLine;
            int size = 0;
            int chunkSize = 10000;
            Class params[] = { Long.class };
            Object paramsObj[] = { auditId };
            long rowNumber = 0;
            Field field[] = type.getDeclaredFields();
            while ((nextLine = csv.readNext()) != null) {
                rowNumber++;
                try {

                    obj = type.newInstance();

                    for (Field f : field) {
                        if(!f.isSynthetic()){
                            f.setAccessible(true);
                            Annotation ann[] = f.getDeclaredAnnotations();
                            CsvBindByPosition csv1 = (CsvBindByPosition) ann[0];
                            Column c = (Column)ann[1];

                            try {
                                if (csv1.position() < nextLine.length) {
                                    if (csv1.required() && (nextLine[csv1.position()] == null
                                            || nextLine[csv1.position()].trim().isEmpty())) {
                                        String message = "Mandatory field is missing in row: " + rowNumber;
                                        log.info("null value in " + rowNumber + ", " + csv1.position());
                                        System.out.println(message);

                                    }

                                    if (f.getType().equals(String.class)) {
                                        f.set(obj, nextLine[csv1.position()]);

                                    }
                                    if (f.getType().equals(Boolean.class)) {
                                        f.set(obj, nextLine[csv1.position()]);

                                    }
                                    if (f.getType().equals(Integer.class)) {
                                        f.set(obj, Integer.parseInt(nextLine[csv1.position()]));

                                    }
                                    if (f.getType().equals(Long.class)) {
                                        f.set(obj, Long.parseLong(nextLine[csv1.position()]));
                                    }
                                    if (f.getType().equals(Double.class) && null!=nextLine[csv1.position()] && !nextLine[csv1.position()].trim().isEmpty()  ) {
                                        f.set(obj, Double.parseDouble(nextLine[csv1.position()]));

                                    }if(f.getType().equals(Double.class) && ((nextLine[csv1.position()]==null) || nextLine[csv1.position()].isEmpty())){
                                        f.set(obj, new Double("0.0"));
                                    }
                                    if (f.getType().equals(Date.class)) {
                                        f.set(obj, nextLine[csv1.position()]);
                                    }
                                }
                            } catch (Exception fttEx) {
                                log.info("Exception when parsing the file: " + fttEx.getMessage());
                                System.out.println(fttEx.getMessage());
                            }
                        }
                    }
                    lstCsvContent.add((T) obj);
                    if (lstCsvContent.size() > chunkSize) {
                        size = size + lstCsvContent.size();
                        //write code to save to data base of file system in chunk.
                        lstCsvContent = null;
                        lstCsvContent = new ArrayList<>();
                    }

                } catch (Exception ex) {
                    log.info("Exception: " + ex.getMessage());
                }

            }
            //write code to save list into DB or file system
            System.out.println(lstCsvContent);
        } catch (Exception ex) {
            log.info("Exception:::::::: " + ex.getMessage());

        } finally {
            try {
                if (csv != null) {
                    csv.close();
                }
                if (reader != null) {
                    reader.close();
                }
            } catch (IOException ioe) {

                log.info("Exception when closing the file: " + ioe.getMessage());
            }
        }
        log.info("File Processed successfully: ");
    }

} 
```

# python - 如何提取在 python 中呈现 HTML 页面期间获得的 url 列表？

> ID：15513699
> 
> 赞同：2
> 
> 时间：2013-03-20T01:28:44.293
> 
> 标签：python, http, http-headers

我希望能够获取当我们尝试打开页面时浏览器将执行 GET 请求的所有 URL 的列表。例如：如果我们尝试打开 cnn.com，在浏览器递归请求的第一个 HTTP 响应中有多个 URL。

我不是试图呈现页面，而是试图获取呈现页面时请求的所有 url 的列表。对 http 响应内容进行简单扫描是不够的，因为 css 中可能存在下载的图像。无论如何我可以在python中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:52:30.617

您可能必须渲染页面（但不一定显示它）以确保您获得所有资源的完整列表。我在类似的情况下[`PyQT`](http://www.riverbankcomputing.com/software/pyqt/intro)使用过。[`QtWebKit`](http://trac.webkit.org/wiki/QtWebKit)尤其是当您开始计算 javascript 中动态包含的资源时，尝试递归地解析和加载页面`BeautifulSoup`是行不通的。

[Ghost.py](http://jeanphix.me/Ghost.py/)是一个出色的客户端，可以帮助您开始使用 PyQT。此外，请查看[QWebView 文档](http://pyqt.sourceforge.net/Docs/PyQt4/qwebview.html)和[QNetworkAccessManager 文档](http://pyqt.sourceforge.net/Docs/PyQt4/qnetworkaccessmanager.html)。

Ghost.py 在打开页面时返回一个 (page, resources) 的元组：

```
from ghost import Ghost
ghost = Ghost()
page, resources = ghost.open('http://my.web.page') 
```

`resources`包括由原始 URL 加载的所有资源作为 HttpResource 对象。您可以使用 检索已加载资源的 URL `resource.url`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:41:09.237

我猜你必须创建一个你不想要的所有已知文件扩展名的列表，然后扫描 http 响应的内容，检查“如果子字符串不在 nono-list 中：”

问题是所有href都以TLD，正斜杠，url传递的变量等结尾，所以我认为检查你知道你不想要的东西会更容易。

# sql-server-ce - SQL Server CE 3.5 兼容性

> ID：15513702
> 
> 赞同：0
> 
> 时间：2013-03-20T01:29:07.057
> 
> 标签：sql-server-ce

我有一个使用 SQL Server Compact Edition 3.5 作为数据库的 C# .Net 3.5 应用程序。

我可以在运行 Windows Vista 的笔记本电脑上 xcopy 部署和运行该应用程序。

但是，如果我将同一组文件复制到运行 Windows 7 或 8 的计算机上，则会出现`Target of Invocation...`错误。

有谁知道 SQL Server CE 3.5 是否与 Windows 7 或 8 兼容？

如果不是，是 SQL Server CE 4.0 吗？（如果我确实需要 SQL Server CE 4.0，我还能使用 .net 3.5 吗？）

是否有图表说明不同操作系统兼容/需要哪些版本的 SQL Server CE？

提前谢谢了。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:42:22.523

是的，SQL Server Compact 3.5 SP2 和 4.0 都与 Windows 7 和 8 兼容。我在这里有一个图表：http: [//erikej.blogspot.dk/2010/11/sql-server-compact-private-deployment.html](http://erikej.blogspot.dk/2010/11/sql-server-compact-private-deployment.html)

我听起来你正面临 x86 和 AMD64 平台的问题，你是否包含这两组 dll 文件？当然，所有包含的 SQL Server Compact 文件都必须具有完全相同的文件版本。

# rest - 通过 REST 编辑 Firebase 优先级

> ID：15513706
> 
> 赞同：1
> 
> 时间：2013-03-20T01:29:40.783
> 
> 标签：rest, firebase

添加子对象时，我想编辑父对象的优先级。我正在使用 PHP 和 REST API，并使用 POST 添加新的孩子。

但似乎 .priority 设置只能使用重置父对象的 PUT 进行。

我已阅读这篇文章并回答： [Push to Firebase via REST API with Priority](https://stackoverflow.com/questions/10924774/push-to-firebase-via-rest-api-with-priority) 但它适用于为新对象设置优先级。

然后我尝试检索父对象的内容并使用 .value 重置它，但这对我不起作用 - 可能是因为被推送的对象是一个复杂的对象，具有它自己的子对象。

那么是否有可能，或者将来是否有可能推送一个新的 .priority 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:40:08.823

*回复 Andrew 作为另一个答案，以便我可以格式化代码：*

您建议的命令将为我提供现有的优先级，但我仍然看不到如何更改优先级。我正在使用 PHP，这是我尝试过的：

```
$url = $urlToParent . '/.priority/.json';
$fields = '{ ".priority" : ' . $timeStamp . ' }';
$result = doSend($url, $fields, 'PUT');

$url = $urlToParent . '/.priority/.json';
$fields = '{ ' . $timeStamp . ' }';
$result = doSend($url, $fields, 'PUT');

$url = $urlToParent . '/.json';
$fields = '{ ".priority" : ' . $timeStamp . ' }';
$result = doSend($url, $fields, 'POST'); 
```

doSend() 是一个使用 POST 或 PUT 发送数据的 PHP 函数。

这些不同的尝试要么删除整个对象，要么删除优先级设置，要么返回错误。我确信一定有一种方法可以做我想做的事，我只是没有找到正确的 URL、参数和发送方法的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:26:26.890

简单的答案是通过将 .priority 附加到 URL 的末尾来直接设置优先级。IE：

```
curl https://SampleChat.firebaseIO-demo.com/users/tom/.priority/.json 
```

如果您想在写入其他数据的同时设置优先级，您也可以这样做。[请参阅文档](https://www.firebase.com/docs/rest-api.html)中的从 REST API 编写优先级。

请注意，优先级只能写入已包含数据的位置。如果您尝试将优先级写入 null 位置，则优先级将被忽略，REST 调用将返回 null。

没有任何命令可以同时推送对象和更新父对象的优先级（我无法为此提出一个好的用例——如果您有任何想法，请发表评论）。

# reflection - 您如何向具有“参数”构造函数的类发出？

> ID：15513711
> 
> 赞同：2
> 
> 时间：2013-03-20T01:30:08.133
> 
> 标签：reflection, f#, cil, reflection.emit

这是我的`Package`班级的定义：

```
type Package ([<ParamArray>] info : Object[]) =
    do
        info |> Array.iter (Console.WriteLine)

    member this.Count = info.Length 
```

这是IL，我正在尝试：

```
let ilGen = methodbuild.GetILGenerator()

ilGen.Emit(OpCodes.Ldstr, "This is 1")
ilGen.Emit(OpCodes.Ldstr, "Two")
ilGen.Emit(OpCodes.Ldstr, "Three")
ilGen.Emit(OpCodes.Newobj, typeof<Package>.GetConstructor([|typeof<Object[]>|]))
ilGen.Emit(OpCodes.Ret) 
```

但这似乎不起作用。我试过：

```
ilGen.Emit(OpCodes.Newobj, typeof<Package>.GetConstructor([|typeof<String>; typeof<String>; typeof<String>|])) 
```

一个井：

```
ilGen.Emit(OpCodes.Newobj, typeof<Package>.GetConstructor([|typeof<Object>; typeof<Object>; typeof<Object>|])) 
```

但它只是在嘲笑我。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:24:04.043

该`[<ParamArray>]`属性向编译器指示方法接受可变数量的参数。但是，CLR 并不真正支持`varargs`方法——它只是 C#/VB.NET/F# 编译器提供的语法糖。

现在，如果你拿走`[<ParamArray>]`，你还剩下什么？

```
(info : Object[]) 
```

这是您尝试调用的构造函数的签名。

因此，您需要使用`newarr`和`stelem`操作码来创建一个数组，将值存储到其中，然后使用该数组作为参数调用构造*函数*。这应该做你想做的（虽然我没有测试过）：

```
let ilGen = methodbuild.GetILGenerator()

// Create the array
ilGen.Emit(OpCodes.Ldc_I4_3)
ilGen.Emit(OpCodes.Newarr, typeof<obj>)

// Store the first array element
ilGen.Emit(OpCodes.Dup)
ilGen.Emit(OpCodes.Ldc_I4_0)
ilGen.Emit(OpCodes.Ldstr, "This is 1")
ilGen.Emit(OpCodes.Stelem_Ref)

// Store the second array element
ilGen.Emit(OpCodes.Dup)
ilGen.Emit(OpCodes.Ldc_I4_1)
ilGen.Emit(OpCodes.Ldstr, "Two")
ilGen.Emit(OpCodes.Stelem_Ref)

// Store the third array element
ilGen.Emit(OpCodes.Dup)
ilGen.Emit(OpCodes.Ldc_I4_2)
ilGen.Emit(OpCodes.Ldstr, "Three")
ilGen.Emit(OpCodes.Stelem_Ref)

// Call the constructor
ilGen.Emit(OpCodes.Newobj, typeof<Package>.GetConstructor([|typeof<Object[]>|]))
ilGen.Emit(OpCodes.Ret) 
```

注意：在这段代码中，我使用`dup`OpCode 来避免创建一个局部变量来保存数组引用，同时存储元素值。这只是可行的，因为这段代码相当简单——如果你想构建更复杂的东西，我强烈建议你创建一个局部变量来保存数组引用。

# command-line - 批量删除包含某些单词的行？

> ID：15513712
> 
> 赞同：0
> 
> 时间：2013-03-20T01:30:11.537
> 
> 标签：command-line, command

我需要从目录中的大量文本文件列表中删除任何包含某些关键字的行。

例如，我需要删除其中包含**任何**这些关键字的所有行：test1、example4、coding9

这是我能找到的最接近的例子：

```
sed '/Unix\|Linux/d' *.txt 
```

注意：这些行不需要包含所有要删除的关键字，只需删除一个即可：)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:22:31.647

看来您正在寻找一些 1 线性命令来读取和写回数千个文件和数百万行。我个人不会那样做，因为我更喜欢用 Perl 编写一个快速而肮脏的脚本。我对非常简单的文件进行了非常简短的测试，它可以工作，但是由于您正在处理数千个文件和数百万行，所以我会先用一些文件测试您在测试目录中编写的任何内容，以便您可以验证。

```
#!/usr/bin/perl

# the initial directory to read from
my $directory = 'tmp';
opendir (DIR, $directory) or die $!;

my @keywords = ('woohoo', 'blah');

while (my $file = readdir(DIR)) {

    # ignore files that begin with a period
    next if ($file =~ m/^\./);

    # open the file
    open F, $directory.'/'.$file || die $!;
    # initialize empty file_lines
    @file_lines = ();

    # role through and push the line into the new array if no keywords are found
    while (<F>) {
        next if checkForKeyword($_);
        push @file_lines, $_;
    }
    close F;

    # save in a temporary file for testing
    # just change these 2 variables to fit your needs
    $save_directory = $directory.'-save';
    $save_file = $file.'-tmp.txt';
    if (! -d $save_directory) {
        `mkdir $save_directory`;
    }
    $new_file = $save_directory.'/'.$save_file;
    open S, ">$new_file" || die $!;
    print S for @file_lines;
    close S;
}

# role through each keyword and return 1 if found, return '' if not
sub checkForKeyword()
{
     $line = shift;
     for (0 .. $#keywords) {
         $k = $keywords[$_];
         if ($line =~ m/$k/) {
           return 1;
         }
     }
     return '';
} 
```

# c# - 如何为具有多个变量的声明编写“XML doc”？

> ID：15513713
> 
> 赞同：3
> 
> 时间：2013-03-20T01:30:13.307
> 
> 标签：c#, documentation, xml-documentation

处理一个相当大的 C# 项目，该项目正在使用许多类似的变量，所以可以说我有这样的一块

```
 double
        TempAngle = 1,
        AngleCountDown = HalfSight,
        SightAngleFromCopter = 0; 
```

我如何像我做方法一样记录它们（见下文）？

```
 /// <summary>
    /// general explanation
    /// </summary>
    /// <param name="a">some hole num</param>
    /// <param name="b">some string</param>
    public MainWindow( int a ,string b)
    {} 
```

最后我想做的是写类似的东西

```
 /// <param name="TempAngle">some</param>
    /// <param name="AngleCountDown">something</param>
    /// <param name="SightAngleFromCopter">something else</param>
    double
        TempAngle = 1,
        AngleCountDown = HalfSight,
        SightAngleFromCopter = 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T01:46:49.453

您必须像这样为每个变量编写

```
/// <summary>
/// general explanation for TempAngle
/// </summary>    
double TempAngle = 1;

/// <summary>
/// general explanation for AngleCountDown 
/// </summary>
double AngleCountDown = HalfSight;

/// <summary>
/// general explanation for sightanglefromcopter
/// </summary>
double SightAngleFromCopter = 0; 
```

此外，这仅适用于类级别变量，不适用于方法级别变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-09T16:53:51.357

[语言规范](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/introduction)告诉您 XML 注释应该出现在哪里以及它们适用于什么。

文档评论[§19.1](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/documentation-comments#introduction)（强调我的）

> 具有特殊形式的注释可用于指导工具从这些注释和它们之前的源代码元素生成 XML。此类注释是以三个斜线 (///) 开头的单行注释，或以斜线和两个星号 (/**) 开头的分隔注释。**它们必须紧跟在用户定义的类型（例如类、委托或接口）或它们注释的成员（例如字段、事件、属性或方法）之前。**属性部分（属性规范）被认为是声明的一部分，因此文档注释必须在应用于类型或成员的属性之前。

在您的情况下，您正在记录这些字段的声明声明。如果该语句中恰好有多个变量声明，则您无法选择文档适用于哪些变量，这不是它的设计方式。

方法声明/定义出现这种方式的唯一原因是参数是定义该方法的一部分，它们不是单独的不同元素。

我不同意您对它“丑陋和臃肿”的评估，在单个语句中声明多个变量可以方便地节省一些击键。当您需要对这些变量中的任何一个做不同的事情时（例如应用不同的修饰符或简单地记录它们），它们必须分开。

# c# - 无法从 Ms Access 中检索图片到图片框

> ID：15513715
> 
> 赞同：1
> 
> 时间：2013-03-20T01:30:36.023
> 
> 标签：c#

```
cn.Open(); 
OleDbDataAdapter da = new OleDbDataAdapter("select Photo Account WHERE UserName like Purchasedby", cn); 
DataSet ds = new DataSet(); 
da.Fill(ds); 
cn.Close(); 
byte[] content = (byte[])ds.Tables[0].Rows[0].ItemArray[0]; 
MemoryStream stream = new MemoryStream(content); 
pictureBox1.Image = Image.FromStream(stream); 
```

它说参数无效>>我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:40:12.417

请先修复您的 SQL。它应该看起来像这样：`select Photo, Account WHERE UserName like '%Purchasedby%'`. 如果您仍然收到错误，请尽可能提供异常消息和调用堆栈。

# couchdb - 为什么我的 CouchDB 视图结果中包含十六进制数字？

> ID：15513716
> 
> 赞同：1
> 
> 时间：2013-03-20T01:30:43.283
> 
> 标签：couchdb

为什么我的 CouchDB 视图结果中包含十六进制数字？我怎样才能摆脱它们？

```
7f
{"total_rows":108,"offset":0,"rows":[
{"id":"5c718dbd01bc0cde8152e08ed6003405","key":"2013-03-19T22:43:27.2683661Z","value":0}
5b
,

...

{"id":"5c718dbd01bc0cde8152e08ed6037404","key":"2013-03-19T23:07:35.5972058Z","value":0}
5b
,
{"id":"5c718dbd01bc0cde8152e08ed60376e5","key":"2013-03-19T23:07:35.6062063Z","value":0}
4

]}
1

0 
```

* * *

**TL;博士**

我是 CouchDB 的新手，正在研究将其用作事件日志的数据库。我创建了一个简单的地图函数来按日期查看事件日志：

```
function(doc)
{
    if (doc.DateTime)
    {
        emit(doc.DateTime, doc);
    }
} 
```

当我使用 Fiddler 通过以下请求测试此视图时：

```
GET http://localhost:5984/stuff/_design/eventlog/_view/datetime

Host: localhost:5984
User-Agent: Fiddler 
```

返回的结果包括不属于 JSON 结构的十六进制数字。因此返回的 JSON 无效。为什么这些十六进制数字包含在结果中，我怎样才能摆脱它们？

我正在使用 Windows (x86) CouchDB 1.2.1 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:29:24.770

奇怪的十六进制数字用于所谓的分块传输编码。这是一种让 HTTP 响应以流格式可用的方式，而不是客户端必须等待整个响应准备好。十六进制数字表示下一个块的长度。

我认为分块的使用与请求的 Accept 值无关，但我不确定。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T01:34:34.657

要获得纯 JSON 结果，您必须`Accept: application/json`在 HTTP 请求中包含标头。

如果您省略`Accept`标头，CouchDB 将以更适合在 Web 浏览器中良好显示的方式返回结果。结果将采用 JSON 格式，但具有 `text/plain`内容类型。

请参阅[Apache CouchDB 1.3 手册第 2.2.1 节。请求标头](http://couchdb.readthedocs.org/en/latest/api-basics.html#http-headers)。

十六进制数是分[块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)的结果。

# objective-c - 如何将 NSData 保存到我的应用程序中的某个位置？

> ID：15513718
> 
> 赞同：1
> 
> 时间：2013-03-20T01:30:55.073
> 
> 标签：objective-c, core-data, uiimage, nsdata

嗨，我对 iOS 编程非常陌生（实际上已经 2 周了），我遇到了这个问题：

在我的应用程序中，我拍照并将它们放入队列中以供上传，我还没有实现上传部分，但我将上传由 ( ) 组成的对象数组（容器），`NSData`但`UIImageJPEGRepresentation`显然`NSData`s 会消耗太多内存，所以我必须想出一些更聪明的东西，而不是持有`NSData`我想要持有`NSURL`的Container 类`NSData`。但`NSData`必须保存在我的应用程序中的某个地方，**而不是**相机胶卷中。

我还在为我的应用程序实现 Core Data 并且加载`NSData`s 可能需要一些时间。

这是我的容器类的样子：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Container : NSManagedObject

@property (nonatomic, retain) NSString * str1;
@property (nonatomic, retain) NSString * str2;
@property (nonatomic, retain) NSData * bigImageData;
@property (nonatomic, retain) NSData * thumbnailData;

@end

@implementation Container

@dynamic str1;
@dynamic str2;
@dynamic bigImageData;
@dynamic thumbnailData; 
```

我不知道它是否有帮助，但这是我获取 UIImage 的方法：

```
UIImage *bigImage = [info objectForKey:UIImagePickerControllerOriginalImage];
UIImageWriteToSavedPhotosAlbum(image,self,nil,nil);

NSData *bigImageData = UIImageJPEGRepresentation(bigImage, 0.1);
//Save NSData to somewhere within my app here 
```

因此，当我开始上传文件时，我会将 NSData 加载回内存中，直到上传完成，然后我将删除 NSData。

我希望我把我的问题说清楚了，如果你有更好的建议，请告诉我，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:47:17.567

将数据写入`Caches`目录。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachesFolder = paths[0];
NSString *fullPath = [cachesFolder stringByAppendingPathComponent:@"imagename.jpg"];

[bigImageData writeToFile:fullPath atomically:YES]; 
```

# c++ - C ++中数字的逗号格式

> ID：15513725
> 
> 赞同：3
> 
> 时间：2013-03-20T01:32:30.860
> 
> 标签：c++

我需要帮助在用户输入的数字中添加逗号，我们将不胜感激一些指导或帮助。到目前为止，我有它存储前三位数字和后六位数字，然后简单地格式化它。

```
#include<iostream>

using namespace std;
int main ( int argc, char * argv[] ) 
{
unsigned long long userInput;
int fthreeDigit;

cout << "Enter a long long number: " << endl;
cin >> userInput;

fthreeDigit = ( userInput / 1000 );
userInput %= 1000;

cout << "Your Number: " << fthreeDigit << "," << userInput << endl;
system("pause");
return 0;
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T01:43:46.007

这是你需要的吗？语言环境将为您正确执行此操作。

```
#include <iostream>
using namespace std;

int main ( int argc, char * argv[] ) 
{
  unsigned long long userInput;
  int fthreeDigit;
  cout << "Enter a long long number: " << endl;
  cin >> userInput;
  std::cout.imbue(std::locale(""));
  std::cout << userInput << std::endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:42:43.760

编辑：我有两个解决方案。第一个不玩数字（**推荐**）和第二个（除法）。第一个解决方案是：

```
#include <cstdlib>
#include <iostream>
#include <locale>
#include <string>
using namespace std;

struct my_facet : public std::numpunct<char>{
        explicit my_facet(size_t refs = 0) : std::numpunct<char>(refs) {}
        virtual char do_thousands_sep() const { return ','; }
        virtual std::string do_grouping() const { return "\003"; }
};

/*
 * 
 */
int main(int argc, char** argv) {

    cout<<"before. number 5000000: "<<5000000<<endl;

    std::locale global;
    std::locale withgroupings(global, new my_facet);
    std::locale was = std::cout.imbue(withgroupings);

    cout<<"after. number 5000000: "<<5000000<<endl;

    std::cout.imbue(was);

    cout<<"and again as before. number 5000000: "<<5000000<<endl;

    return 0;
} 
```

> > 前。数字 5000000: 5000000
> > 之后。数字 5000000: 5,000,000
> 
> 和以前一样。数字 5000000: 5000000
> 
> 运行成功（总时间：54ms）

第二个（不推荐）是：

```
double f = 23.43;
std::string f_str = std::to_string(f); 
```

或这个

```
int a = 1;
stringstream ss;
ss << a;
string str = ss.str(); 
```

然后你可以使用`string::substr()` `string::find()` `string::find_first_of()`和类似的方法来修改和格式化你的字符串。
[类似的话题](https://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c)

* * *

如果你真的想要（必须）划分：（我认为我的版本比其他版本更干净、更高效）

```
unsigned long long userInput;
    std::stringstream ss,s0;
    std::string nr;
        std::cout << "Enter a long long number: " << std::endl;
        std::cin >> userInput;
        int input=userInput;
        int digits;

        while(input>999){
            input=input/1000;
            digits=userInput-input*1000;
            int mdigits=digits;
            while(mdigits<100){s0<<"0";mdigits*=10;}
            std::string s=ss.str();
            ss.str("");
            ss<<","<<s0.str()<<digits<<s;
            userInput=input;
            s0.str("");
        }

        std::string sf=ss.str();
        ss.str("");
        ss<<input<<sf;

        std::cout << "Your Number: " << userInput << ";" << digits <<";"<<ss.str()<<std::endl; 
```

> 输入一个长长的号码：12345678 您的号码：12;345;12,345,678

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:05:58.427

这是蛮力，但可能是最容易理解的方法，在向量的帮助下获得每千位数字。

```
#include<iostream>
#include <algorithm>
#include <vector>
using namespace std;
int main ( int argc, char * argv[] ) 
{
    long long userInput;
    int fthreeDigit;

   cout << "Enter a long long number: " << endl;
   cin >> userInput;
   vector <int> res;  //use vector to store every 3 digits
   while (userInput !=0)
   {
     fthreeDigit = userInput %1000;
     res.push_back(fthreeDigit);
     userInput = userInput / 1000 ;
   }

   std::reverse(res.begin(), res.end());
   for (size_t i = 0; i < res.size()-1; ++i)
   {
     if (res[i] ==0)
     {
        cout << "000"<<",";
     }
     else
     {
       cout << res[i] << ",";
     }
   }

   if (res[res.size()-1] == 0)
   {
       cout << "000";
   }
   else{
       cout << res[res.size()-1];
   }
   cout <<endl;
   cin.get();
   return 0;
} 
```

我用以下案例测试了这段代码：

```
Input: 123456 Output: 123,456
Input: 12     Output: 12
Input: 12345  Output: 12,345
Input: 1234567 Output: 1,234,567
Input: 123456789 Output: 123,456,789
Input: 12345678 Output: 12,345,678 
```

根据您对评论的回复，我想这就是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:36:15.957

你可以这样做：

```
#include <iostream>
#include <string>

using namespace std;

string commify(unsigned long long n)
{
  string s;
  int cnt = 0;
  do
  {
    s.insert(0, 1, char('0' + n % 10));
    n /= 10;
    if (++cnt == 3 && n)
    {
      s.insert(0, 1, ',');
      cnt = 0;
    }
  } while (n);
  return s;
}

int main()
{
  cout << commify(0) << endl;
  cout << commify(1) << endl;
  cout << commify(999) << endl;
  cout << commify(1000) << endl;
  cout << commify(1000000) << endl;
  cout << commify(1234567890ULL) << endl;
  return 0;
} 
```

输出（[ideone](http://ideone.com/kVHRQh)）：

```
0
1
999
1,000
1,000,000
1,234,567,890 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-07T14:33:45.843

```
// Accepts a long number, returns a comma formatted string
CString num_with_commas(long lnumber)
{
    CString num;
    num.Format(%d",lnumber);
    if(num.GetLength() > 3) {num.Insert(num.GetLength()-3, ',');}
    if(num.GetLength() > 7) { num.Insert(num.GetLength()-7, ','); }
    if (num.GetLength() > 12) { num.Insert(num.GetLength()-12, ','); }
    return(num);
} 
```

# sql - HSQLDB UNIQUE 约束和 SQL 数组类型

> ID：15513728
> 
> 赞同：1
> 
> 时间：2013-03-20T01:32:53.403
> 
> 标签：sql, types, hsqldb, ddl, unique-constraint

我正在使用 HSQLDB 2.2.9 进行开发。HSQLDB 是支持 SQL Array 类型的 RDBMS 之一，我想使用此功能来解决我的数据库中的某些功能。

我在开发数据库时一直在运行一些命令行查询，但我不确定 HSQLDB 在为类型为 VARCHAR(24) ARRAY[] 的列声明时如何处理 UNIQUE 约束。我使用的 DDL 如下：

```
CREATE CACHED TABLE Clients ( 
    cli_id       INTEGER              GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mrn          VARCHAR(24) ARRAY    DEFAULT ARRAY[] NOT NULL UNIQUE,
    lastname     VARCHAR(48)          NOT NULL,
    firstname    VARCHAR(24)          NOT NULL,
    dob          INTEGER              DEFAULT 0 NOT NULL
); 
```

mrn 列包含对每个客户端唯一的标识符。当我开发这个数据库时，我了解到一个客户可能有一个或多个 mrn。此问题的一种解决方案是使用 mrn 列来存储每个客户端的 mrn 数组。

在这种情况下，UNIQUE 的语义是什么？HSQLDB 是否断言数组中的每个元素都满足 UNIQUE 列约束？

这个答案[PostgreSQL可以对数组元素有唯一性约束吗？](https://stackoverflow.com/questions/8016776/can-postgresql-have-a-uniqueness-constraint-on-array-elements)表明 Postgres 9.1 无法对 SQL Array 类型元素强制执行 UNIQUE 列约束。我想知道 HSQLDB 是否也可能是这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:43:38.250

HSQLDB 支持对数组的 UNIQUE 约束。数组列上的唯一约束会比较存储在不同行中的整个数组，以确保它们是不同的。

当两个数组在每个索引处具有相等的元素并且数组的长度相同时，它们被认为是相等的。

对于您的应用程序，您必须确保数组不包含空值并且其元素已排序。

# .net - 如何获得自定义错误页面以显示 URL 并将其重写为友好的内容？

> ID：15513730
> 
> 赞同：1
> 
> 时间：2013-03-20T01:33:12.670
> 
> 标签：.net, iis-7, url-rewriting, web-config, custom-error-pages

我一直把头撞在墙上，我认为这是一项非常简单的任务。

快速背景：

1.  我正在使用 IIS7 的 URL 重写
2.  我正在使用重写映射来映射`/ErrorPage.aspx`到`/Error`（以及许多其他）。
3.  我将`<customErrors>`配置元素设置为“开”（在本地测试）并`defaultRedirect`设置为“~/ErrorPage.aspx”。
4.  框架 3.5

我的问题有两个：

1.  `/Error`即使网站上的所有其他重写都在工作，重写也不起作用。
2.  发生异常时，URL 显示`/ErrorPage.aspx?aspxerrorpath=/Blah`.

我不关心错误路径，因为我已经充分捕获了详细的异常消息。

我在[另一个溢出帖子](https://stackoverflow.com/questions/12955642/url-rewriting-net-4-not-working)中读到，将查询字符串添加到`defaultRedirect`将摆脱 aspxerrorpath（它确实如此），但实际的重写仍然没有发生。

有没有办法简单地重写或重定向到`/Error`并实际显示我的错误页面？

我尝试创建一个重写规则来摆脱 aspxerrorpath，但它从未成功。

```
<rule name="RewriteUserFriendlyURL3" stopProcessing="true">
    <match url="^([^/]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Redirect" url="ErrorPage.aspx?aspxerrorpath={R:1}" />
</rule> 
```

然后我在将查询字符串附加到时尝试了一个单独的`defaultRedirect`：

```
<rule name="RewriteUserFriendlyURL3" stopProcessing="true">
    <match url="^([^/]+)/([^/]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="ErrorPage.aspx?{R:1}={R:2}" />
</rule> 
```

但是，唉，两者都不起作用。

但是，我能够`PageNotFound.aspx`使用`<httpErrors>`config 元素和我的 Rewrite Map 实现 404 重写。它正确地重写为`/PageNotFound`. **有没有办法针对所有异常对 ErrorPage 执行此操作？**

```
<httpErrors errorMode="Custom">
    <clear />
    <error statusCode="404" responseMode="Redirect" path="PageNotFound" />
</httpErrors> 
```

我觉得我一定错过了一些非常简单和基本的东西。

# php - 使用 php 在导航类别中添加当前类

> ID：15513732
> 
> 赞同：0
> 
> 时间：2013-03-20T01:33:28.427
> 
> 标签：php, class

我有页面包含帖子我可以使用 php 在 url 中为包含的页面传递一个值来过滤这些帖子，我想在当前类别的标签上添加当前类，用 php 替换另一个类。这是我目前的代码：

```
<div class="top_p_r" style="width:825px; float:left;">
    <span class="cat">Category</span>
    <ul class="ul_cat_blog">
    <?php
    echo'<li class="li_cat_blog"><a class="current" href="/">All</a></li>';
    foreach(Categorie::getAllCategorie()as $categorie ){
    $categorie= new Categorie($categorie->ID_CAT);
    echo '<li class="li_cat_blog"><a class="rotated_link" href="?cat='.$categorie->getIDCategorie().'">'.$categorie->getNomCategorie().'</a></li>';}?>
    </ul>
</div> 
```

我想使用我在 url 中传递的值来将 class="rotated_link" 更改为 class="current" ，我尝试这样但它对我不起作用它总是显示 class='rotated_link' ：

```
<div class="top_p_r" style="width:825px; float:left;">
    <span class="cat">Category</span>
    <ul class="ul_cat_blog">
    <?php 
     $currentPath = $_SERVER['REQUEST_URI']; 
     $currentClass = ' class="current"'; 
     $rotatesdClass = ' class="rotated_link"'; ?>
   <?php
   echo'<li class="li_cat_blog"><a class="current" href="/">All</a></li>';
    foreach(Categorie::getAllCategorie()as $categorie ){
        $categorie= new Categorie($categorie->ID_CAT);

        echo '<li class="li_cat_blog"><a'; if( $currentPath == $id_categorie ) { echo $currentClass; } else {echo $rotatesdClass;} echo' href="?cat='.$categorie->getIDCategorie().'">'.$categorie->getNomCategorie().'</a></li>';
    }?>
    </ul>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:30:04.593

问题是您正在覆盖自己的变量：

```
foreach(Categorie::getAllCategorie()as $categorie ){
    $categorie = new Categorie($categorie->ID_CAT); 
```

在这里，您覆盖了 的值`$categorie`。

# javascript - IndexedBD 和 localStorage 未定义错误

> ID：15513733
> 
> 赞同：0
> 
> 时间：2013-03-20T01:33:37.367
> 
> 标签：javascript, html, local-storage, undefined, indexeddb

我有一个 indexedDB，我试图用它来捕获有关用户注册的表单信息。该部分工作正常，但教授希望使用创建时设置的用户名和密码创建一次帐户，以便他可以登录。

我解决这个问题的方法是使用 localStorage API。我创建了一个函数来检查是否曾经创建过管理员帐户，如果没有创建它，则调用 addAdmin() 函数。

我试图通过复制我的 addObject() 来创建 addAdmin() 但由于某种原因，我的 db 变量在控制台中返回为未定义。

**错误”未捕获的类型错误：无法调用未定义的方法“事务”**

```
var mainForm, fName, lName, uName, pass, email, dob, phone, bio, nl, terms, school, gender, save, reset, db;

//-------------USER DB------------------//
function startDB(){
    mainForm = document.getElementById('mainFormSidebar');
    fname = document.getElementById('fName');
    lName = document.getElementById('lName');
    users = document.getElementById('uName');
    pass = document.getElementById('password');
    email = document.getElementById('email');
    dob = document.getElementById('dob');
    phone = document.getElementById('phone');
    bio = document.getElementById('bio');
    nl = document.getElementById('newsletter');
    terms = document.getElementById('terms');
    school = document.getElementById('school');
    gender = document.getElementsByName('gender');
    save = document.getElementById('save');
    reset = document.getElementById('reset'); 
    reset.addEventListener('click',clearForm);
    databox = document.getElementById('databox');

    mainForm.addEventListener('submit',addObject);

    //open DB
    var request = indexedDB.open('macroPlay'); 
    //if fails
    request.addEventListener('error', showerror); 
    //if succeeds
    request.addEventListener('success', start); 
    //if !exist, create.
    request.addEventListener('upgradeneeded', createdb); 

    //Create Admin account on launch
    chkAdmin();
}
function createdb(e){
    var datababase = e.target.result;
    var myusers = datababase.createObjectStore('users', {keyPath: 'userName'});
}
function start(e){
    db = e.target.result;

showUsers();// Show all values in the object store
}

function addObject(){
    if(confirm('Are you sure you want to resgister?')){
        var fName = document.getElementById('fName').value;
        var lName = document.getElementById('lName').value;
        var userName = document.getElementById('uName').value;
        var pass = document.getElementById('password').value;
        var email = document.getElementById('email').value;
        var dob = document.getElementById('dob').value;
        var phone = document.getElementById('phone').value;
        var bio = document.getElementById('bio').value;
        var nl = document.getElementById('nl').value;
        var terms = document.getElementById('terms').value;
        var school = document.getElementById('school').value;

        //May need to set a loop to find value of radio
        var gender;
        var radios = document.getElementsByName('gender');

        for (var i = 0, length = radios.length; i < length; i++) {
            if (radios[i].checked) {
                gender=radios[i].value;
            }
        }

        //set up transaction
        var mytransaction = db.transaction(['users'], "readwrite"); 

        //get object store
        var myusers = mytransaction.objectStore('users'); 

        //Add item
        var request = myusers.add(new getUser(userName,fName,lName,pass,email,dob,phone,bio,nl,terms,school,gender));
    }

    // Show all results.
    mytransaction.addEventListener('complete', showUsers);  

    //Reset Form Fields
    resetForm();

}
function getUser(userName, fn, ln, pw, em, dob, tel, bio, nl,tm, scl, gender){
    this.userName = userName;
    this.fn = fn;
    this.ln = ln;
    this.pw = pw;
    this.em = em;
    this.dob = dob;
    this.tel = tel;
    this.bio = bio;
    this.nl = nl;
    this.tm = tm;
    this.scl = scl;
    this.gender = gender;
}
//------Create Admin Account-----//
function chkAdmin(){
    alert('before adding admin'); 
     if(localStorage.getItem('admin')!="added"){             
        alert('adding admin');
        addAdmin();
        alert('admin added');
    }
}
function addAdmin(){
    //set up transaction
        var mytransaction = db.transaction(['users'], "readwrite"); 
    //get object store
        var myusers = mytransaction.objectStore('users'); 
        var request = myusers.add(new getUser('admin','Shawn','Smith-Choa','admin'));  
        request.addEventListener('success',showUsers);   
    //Locally store that admin as been created  
        var admin = 'admin'; 
        var value = 'added';
        newItem(admin,value); 
}

//-------------Web Storage API------------//
function newItem(id,style){
    localStorage.setItem(id,style);       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:35:44.017

您没有将值分配`db`给任何东西，因此它始终是未定义的。我认为您的意思是在`createdb`方法中执行此操作，但实际上您应该在处理程序将触发的`start`方法中捕获/分配它`success`（我也无法在`start`任何地方找到该方法）

# c++ - const 引用作为类成员

> ID：15513734
> 
> 赞同：10
> 
> 时间：2013-03-20T01:33:38.643
> 
> 标签：c++, class, reference, constants, member

即使这个话题在这里讨论了很多次，我也找不到关于我的具体案例的结论性解释。会`const`延长`RefTest`临时的寿命吗？下面的例子合法吗？

```
#include <iostream>

class RefTest
{
public:
    RefTest(const std::string &input) : str(input) {}
    ~RefTest () {std::cout << "RefTest" << std::endl;}
private:
    std::string str;
};

class Child
{
public:
    Child (const RefTest &ref) : ref_m(ref) {}
    ~Child () {std::cout << "Test" << std::endl;}
private:
    const RefTest &ref_m;
};

class Test
{
public:
    Test () : child(RefTest("child")) {}//Will the temporary get destroyed here?
    ~Test () {std::cout << "Test" << std::endl;}
private:
    const Child child;
};

int main ()
{
   Test test;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T02:02:44.483

引用不会*延长*生命周期。该代码是合法的，但这只是因为您`ref_m`在构造函数完成后永远不会访问。

临时绑定到构造函数参数，`ref`。稍后绑定另一个对它的引用`ref_m`，不会延长生命周期。如果是这样，您将在堆栈上有一个对象，只要它绑定到的引用成员就必须持续存在，该引用成员可以在堆上分配，因此编译器将无法在构造函数返回时展开堆栈。

收到警告会很好，但编译器并不完美，有些事情很难警告。临时是在与它绑定到引用的位置不同的上下文中创建的，因此编译器只能判断是否打开了 inlinging 或一些巧妙的静态分析。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T02:05:51.287

**C++ 标准**规定：

> 第二个上下文是引用绑定到临时的。引用绑定到的临时对象或作为临时对象绑定的子对象的完整对象的临时对象将在引用的生命周期内持续存在，除非下面指定。 **临时绑定到构造函数的 ctor-initializer (12.6.2) 中的引用成员将持续存在，直到构造函数退出。**临时绑定到函数调用 (5.2.2) 中的引用参数将一直持续到包含调用的完整表达式完成为止。

**注意**：顺便说一下，这是重复的（[1](https://stackoverflow.com/questions/2784262/does-a-const-reference-prolong-the-life-of-a-temporary) , [2](https://stackoverflow.com/questions/2604206/c-constant-reference-lifetime)），你应该更好地搜索，下次...... :)

# perl - 提取在perl中以管道分隔的特定多行记录

> ID：15513736
> 
> 赞同：-2
> 
> 时间：2013-03-20T01:33:51.313
> 
> 标签：perl, perl-module

我有一个看起来像的文件

```
姓名|约翰|东京|日本
年龄|32|M
信息|单身|专业|IT
名称|标记|马尼拉|PH
年龄|37|M
信息|已婚|专业|业务流程外包
姓名|萨曼莎|悉尼|澳大利亚
年龄|37|F
信息|已婚|专业|离岸
姓名|卢克|东京|日本
年龄|27|M
信息|单身|专业|IT
```

我想按国家/地区分开记录。我已将每一行存储到数组变量中`@fields`

```
my @fields = split(/\|/, $_ ); 
```

`$fields[3]`作为我排序的依据。我希望它分成 2 个输出文本文件

输出文本文件 1：

```
NAME|JOHN|TOKYO|JPN
AGE|32|M
INFO|SINGLE|PROFESSIONAL|IT
NAME|LUKE|TOKYO|JPN
AGE|27|M
INFO|SINGLE|PROFESSIONAL|IT 
```

输出文本文件 2

```
NAME|MARK|MANILA|PH
AGE|37|M
INFO|MARRIED|PROFESSIONAL|BPO
NAME|SAMANTHA|SYDNEY|AUS
AGE|37|F
INFO|MARRIED|PROFESSIONAL|OFFSHORE 
```

将来自 JPN 的所有内容输出文本 1 和非日本国家/地区输出文本文件 2

这是试图解决的代码

```
use strict;
use warnings;
use Data::Dumper;
use Carp qw(croak);

my @fields;
my $tmp_var;
my $count;
;
my ($line, $i);

my $filename = 'data.txt';
open(my $input_fh, '<', $filename ) or croak "Can't open $filename: $!";

open(OUTPUTA, ">", 'JPN.txt') or die "wsl_reformat.pl: could not open $ARGV[0]";
open(OUTPUTB, ">", 'Non-JPN.txt') or die "wsl_reformat.pl: could not open $ARGV[0]";

my $fh;
while (<$input_fh>) {

    chomp;
   my @fields = split /\|/;

   if ($fields[0] eq 'NAME') {
    for ($i=1; $i < @fields; $i++) {
        if ($fields[3] eq 'JPN') {
           $fh = $_;
            print OUTPUTA $fh;
        }
        else {
           $fh = $_;
            print OUTPUTB $fh;
        }
    }

}   
}

close(OUTPUTA);
close(OUTPUTB) 
```

仍然没有运气:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:41:13.587

你没有说你需要什么帮助，所以我假设它正在提出一个算法。这是一个很好的：

1.  打开要读取的文件。
2.  打开 JPN 条目的文件。
3.  打开非 JPN 条目的文件。
4.  虽然不是 eof，
    1.  读一行。
    2.  解析行。
    3.  如果它是记录的第一行，
        1.  如果此人的国家是 JPN，
            1.  将当前文件句柄设置为 JPN 条目的文件句柄。
        2.  别的，
            1.  将当前文件句柄设置为非 JPN 条目的文件句柄。
    4.  将该行打印到当前文件句柄。

* * *

```
my $jpn_qfn   = '...';
my $other_qfn = '...';

open(my $jpn_fh,   '>', $jpn_qfn)
   or die("Can't create $jpn_qfn: $!\n");
open(my $other_fh, '>', $other_qfn)
   or die("Can't create $other_qfn: $!\n");

my $fh;
while (<>) {
   chomp;
   my @fields = split /\|/;
   if ($fields[0] eq 'NAME') {
      $fh = $fields[3] eq 'JPN' ? $jpn_fh : $other_fh;
   }

   say $fh $_;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:17:41.430

这是我认为 ikegami 所说的方式，但我以前从未尝试过（尽管它给出了正确的结果）。

```
#!/usr/bin/perl
use strict;
use warnings;

open my $jpn_fh, ">", 'o33.txt' or die $!;
open my $other_fh, ">", 'o44.txt' or die $!;

my $fh;
while (<DATA>) {
    if (/^NAME/) {
        if (/JPN$/) {
            $fh = $jpn_fh;  
        }
        else {
            $fh = $other_fh;
        }
    }
    print $fh $_;
}   

close $jpn_fh or die $!;
close $other_fh or die $!;

__DATA__
NAME|JOHN|TOKYO|JPN
AGE|32|M
INFO|SINGLE|PROFESSIONAL|IT
NAME|MARK|MANILA|PH
AGE|37|M
INFO|MARRIED|PROFESSIONAL|BPO
NAME|SAMANTHA|SYDNEY|AUS
AGE|37|F
INFO|MARRIED|PROFESSIONAL|OFFSHORE
NAME|LUKE|TOKYO|JPN
AGE|27|M
INFO|SINGLE|PROFESSIONAL|IT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:14:45.570

```
#!/usr/bin/env perl

use 5.012;
use autodie;
use strict;
use warnings;

# store per country output filehandles
my %output;

# since this is just an example, read from __DATA__ section

while (my $line = <DATA>) {
    # split the fields
    my @cells = split /[|]/, $line;

    # if first field is NAME, this is a new record
    if ($cells[0] eq 'NAME') {
        # get the country code, strip trailing whitespace
        (my $country = $cells[3]) =~ s/\s+\z//;

        # if we haven't created and output file for this
        # country, yet, do so
        unless (defined $output{$country}) {
            open my $fh, '>', "$country.out";
            $output{$country} = $fh;
        }
        my $out = $output{$country};

        # output this and the next two lines to
        # country specific output file
        print $out $line, scalar <DATA>, scalar <DATA>;
    }
}

close $_ for values %output;

__DATA__
NAME|JOHN|TOKYO|JPN
AGE|32|M
INFO|SINGLE|PROFESSIONAL|IT
NAME|MARK|MANILA|PH
AGE|37|M
INFO|MARRIED|PROFESSIONAL|BPO
NAME|SAMANTHA|SYDNEY|AUS
AGE|37|F
INFO|MARRIED|PROFESSIONAL|OFFSHORE
NAME|LUKE|TOKYO|JPN
AGE|27|M
INFO|SINGLE|PROFESSIONAL|IT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T06:26:47.397

感谢您的帮助堆我能够在perl中解决这个问题，非常感谢

```
#!/usr/local/bin/perl

use strict;
use warnings;
use Data::Dumper;
use Carp qw(croak);

my @fields;
my $tmp_var;
my ($rec_type, $country);

my $filename = 'data.txt';

open (my $input_fh, '<', $filename ) or croak "Can't open $filename: $!";

open  my $OUTPUTA, ">", 'o33.txt' or die $!;
open  my $OUTPUTB, ">", 'o44.txt' or die $!;

my $Combline;
while (<$input_fh>) {

    $_ = _trim($_); 
    @fields = split (/\|/, $_); 
    $rec_type = $fields[0];
    $country = $fields[3];

        if ($rec_type eq 'NAME') {          
            if ($country eq 'JPN') {                            
                *Combline = $OUTPUTA;
            }           
            else {                              
                *Combline = $OUTPUTB;
            }
        }       
   print  Combline;
}   

close $OUTPUTA or die $!;
close $OUTPUTB or die $!;

sub _trim {
    my $word = shift;
    if ( $word ) {      
        $word =~ s/\s*\|/\|/g;      #remove trailing spaces
        $word =~ s/"//g;        #remove double quotes
    }
    return $word;
} 
```

# php - 节点不再存在会话错误

> ID：15513741
> 
> 赞同：0
> 
> 时间：2013-03-20T01:34:28.643
> 
> 标签：php, wordpress, session

我在 wordpress 的插件中使用会话，它给了我如下警告：

```
Warning: session_start() [function.session-start]: Node no longer exists in /----/---/plugins/----.php on line 11

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /----/---.php:11) in /---/---/---.php on line 11 
```

在第 11 行，我有：

```
session_start(); 
```

session_start 之前没有打印输出。我试过把它放在刚开始的时候

```
<?php 
```

但它并没有解决这个错误。供您参考，我在这里没有使用任何 SimpleXMLElement。知道如何解决这个问题，或者为什么我会得到这个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:39:45.027

我没有意识到您指的是wordpress，您需要在初始化插件时检查会话ID不存在，

```
function init_plugin() {
    if (!session_id()) {
        session_start();
    }
}
add_action('init', 'init_plugin'); 
```

# ios6 - 找不到“CoreVideo/CoreVideo.h”文件

> ID：15513742
> 
> 赞同：2
> 
> 时间：2013-03-20T01:34:32.093
> 
> 标签：ios6, frameworks, zxing

当我在我的设备上运行 iOS 应用程序时，会出现此错误

找不到“CoreVideo/CoreVideo.h”文件

不管是什么项目，即使创建一个新项目，一旦在我的设备上运行应用程序，就会出现这个错误

不过模拟器没问题～</p>

我找不到一些框架

Target--Build Phase--Link Binary With Librares--add

像 AVFoundation.framework AudioToolBox.framework

我应该在我的mac上重新安装xcode吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:46:22.010

确保您已将 CoreVideo 框架添加到您的项目中。

以下是我在自己的项目中的做法：

![添加 CoreVideo 项目](../Images/b94dd468144786aa536d465e01a5f254.png)

如果您需要帮助找出它在哪里（它隐藏在 XCode 应用程序包本身中），请告诉我，我可以告诉您。

此外，确保在项目的文件检查器中检查 CoreVideo 的“目标成员资格”。它看起来像这样：

![目标会员集，对吧？](../Images/72f5cac37e81349e3ec35458bd7dd2d4.png)

# asp.net - 在 Visual Studio 2010 中打开 Visual Studio 2012 ASP.Net 项目

> ID：15513746
> 
> 赞同：1
> 
> 时间：2013-03-20T01:34:36.193
> 
> 标签：asp.net, visual-studio

我在 Visual Studio 2012 中创建了我的 asp.net 项目，现在我将其删除并安装了 VS2010。

安装 VS2010 后，我将格式版本的数字版本更改为 11.0.0，但它不起作用，并且出现错误对话框“解决方案中的一个或多个项目未正确加载，请参阅输出窗口了解详细信息”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:03:37.287

CodePlex 中编写了免费的开源工具。

[Visual Studio 项目转换器](http://vsprojectconverter.codeplex.com/)

试试这个对我来说效果很好。

如果那个剂量有效，那么这里有一些其他的 SO 链接以及其他答案来帮助你。

[如何从 Visual Studio 2012 项目降级到 Visual Studio 2008](https://stackoverflow.com/questions/13507901/how-to-downgrade-from-visual-studio-2012-project-to-visual-studio-2008)

# c - Windows已触发断点-C语言

> ID：15513754
> 
> 赞同：0
> 
> 时间：2013-03-20T01:35:49.443
> 
> 标签：c, malloc, heap-memory, breakpoints

我被分配创建一个程序，该程序获取二维数组、行数和列数，然后返回转置矩阵并打印它，只使用指针算术，不允许 []。

我的代码运行良好。它确实打印了转置矩阵，但在那之后，我收到以下消息：

Windows 已在 First Assignment.exe 中触发断点。

这可能是由于堆损坏，这表明 First Assignment.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在 First Assignment.exe 具有焦点时按 F12。

输出窗口可能有更多诊断信息。

谁能帮我这个？我不知道出了什么问题。这是我的代码：

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
int** allocate_matrix(int rows,int columns);
void print_matrix(int** mat1,int rows, int columns);
void scan_matrix(int** mat1,int rows, int columns);
int** transpose_matrix(int** mat1, int rows, int columns);
void main()
{
    int** mat1;
    int** trans_mat1;
    int rows,columns;
    printf("Enter the number of rows and columns you wish to see\n");
    printf("Rows:");
    scanf("%d",&rows);
    printf("Columns:");
    scanf("%d",&columns);
    mat1 = allocate_matrix(rows,columns);
    scan_matrix(mat1,rows,columns);
    printf("the matrix you entered is: \n");
    print_matrix(mat1,rows,columns);
    printf("The transposed matrix is:\n");
    trans_mat1 = transpose_matrix(mat1,rows,columns);
    print_matrix(trans_mat1,columns,rows);
    getch();
    free(mat1);
    free(trans_mat1);
}
int** allocate_matrix(int rows,int columns)
{
    int i;
    int** ptrmatrix;
    ptrmatrix = (int**)malloc(rows*sizeof(int*));
    for(i=0;i<rows;i++)
        *(ptrmatrix+i) = (int*)malloc(columns*sizeof(int));
    return ptrmatrix;
}
void print_matrix(int** mat1,int rows, int columns)
{
    int i,j;
    for(i=0;i<rows;i++)
    {
        for(j=0;j<columns;j++)
            printf("%d ",*(mat1+i*columns+j));
        printf("\n");
    }
}
void scan_matrix(int** mat1,int rows, int columns)
{
    int i,j;
    for(i=0;i<rows;i++)
    {
        printf("Enter %d values for row number %d\n",columns,i+1);
        for(j=0;j<columns;j++)
            scanf("%d",(mat1+i*columns+j));
    }
}
int** transpose_matrix(int** mat1,int rows,int columns)
{
    int i,j;
    int** trans_mat1;
    trans_mat1 = allocate_matrix(columns,rows);
    for(i=0;i<rows;i++)
        for(j=0;j<columns;j++)
            *(trans_mat1+(j*rows)+i)=*(mat1+(i*columns)+j);
    return trans_mat1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:01:21.217

导致问题的指针算法中似乎存在错误。

```
printf("%d ",*(mat1+i*columns+j)); 
```

应该：

```
printf("%d ",*(*(mat1+i)+j)); 
```

您似乎误解了如何分配矩阵。通常在这些类型的分配中，您会将矩阵分配为 NxM 整数的单个数组，然后使用您最初使用的公式。

例子：

```
int rows = 7, cols = 9;
int* matrix = (int*) malloc(rows * cols * sizeof(int));

// Get 3rd row and 5th column value
int value = *(matrix + 3 * rows + 5); 
```

但是你正在做的是分配一个指向整数数组的指针数组。每个整数数组都是代码中的一行。因此，您需要做的是首先访问指针数组中的正确指针`(mat + i)`（表示指向第 i 行数组的指针），获取指针值`*(mat+i)`，然后访问正确的列值。这是您的示例的逐个播放：

```
int rows = 9, cols = 21;

// Allocate the array of pointers to rows
int** matrix = (int**) malloc(rows * sizeof(int*));

// Allocate each row as an array of values
for (int j = 0; j < rows; ++j)
{
    *(matrix + j) = (int*) malloc(cols * sizeof(int));
}

// Access the value at row 5, column 7
int* rowPtr = *(matrix + 5);
int value = *(rowPtr + 7); 
```

编辑：其他建议

解除分配：@mikyra 的回答还建议在使用后解除分配您的阵列。我也推荐这个，但不会将它包含在我的答案中，因为他已经完成了他的工作。请给他功劳。

内存效率：分配额外的指针数组比使用单个 NxM 大小的数组使用更多的内存，前提是所有行都已分配。如果您有一些逻辑试图保留未分配的空行，您可以获得更好的内存性能，但这只会对我认为超出您分配范围的大型稀疏矩阵有益。

我个人更喜欢单数组方法，因为它更容易分配/解除分配和索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T02:19:00.747

在决定不只是为矩阵运算分配行 x 列内存块时，您真的没有帮自己一个忙。特别是如果这是作为指针算术的初学者练习。

访问第 i 行和第 j 列中单元格值的正确表达式实际上是这个：

```
*((*(mat1 + i))+j) 
```

使用以下更正版本，一切都应该按预期工作：

```
void print_matrix(int** mat1,int rows, int columns)
{
    int i,j;

    for(i=0;i<rows;i++)
    {
        for(j=0;j<columns;j++)
          /* this line has been changed */
          printf("%d ", *((*(mat1 + i))+j));
        printf("\n");
    }
}
void scan_matrix(int** mat1,int rows, int columns)
{
    int i,j;
    for(i=0;i<rows;i++)
    {
        printf("Enter %d values for row number %d\n",columns,i+1);
        for(j=0;j<columns;j++)
          /* this line has been changed */
          scanf("%d",(*(mat1+i))+j);
    }
}
int** transpose_matrix(int** mat1,int rows,int columns)
{
    int i,j;
    int** trans_mat1;
    trans_mat1 = allocate_matrix(columns,rows);

    for(i=0;i<rows;i++)
        for(j=0;j<columns;j++)
          /* this line has been changed */
          *((*(trans_mat1 + j))+i) = *((*(mat1 + i))+j);
    return trans_mat1;
} 
```

尽管如此，您仍然缺乏释放矩阵消耗的所有内存的方法。你需要这样的东西：

```
void deallocate_matrix (void* mat, int rows) {
  while (rows--)
    free (*(mat + rows));
  free (mat);
} 
```

真正释放所有分配的内存。

# php - SQL 表达式错误 - 警告：sqlite_query() 期望参数 1 是资源，给定字符串

> ID：15513756
> 
> 赞同：0
> 
> 时间：2013-03-20T01:36:07.677
> 
> 标签：php, sql, database, sqlite

当我尝试将记录插入数据库时​​，我的 php 代码出现了一个奇怪的问题。

```
$db=sqlite_open("Architect.db");

$CustomerNo = sqlite_query($db, "SELECT MAX(CustomerNo) FROM Customer");
$row=sqlite_fetch_array($CustomerNo);
$CustomerNumber= "$row[0]";

echo "CustomerNo: " . $CustomerNumber . "<br>";

$CustomerNumberup= ($CustomerNumber + 1);

echo "CustomerNo: " . $CustomerNumberup . "<br>";

//This is the function that actually adds things to the database.
function Store($Name,$Company,$PhoneNo,$Address1,$Address2,$County,$PostCode,$CustomerNumberup){

}
//this calls the function and passes it the variables
Store($Name,$Company,$PhoneNo,$Address1,$Address2,$County,$PostCode,$CustomerNumberup) 
```

基本上我得到了最高的客户编号，将其加 1，然后将其用作新条目的客户编号。

在输出页面上，我要求它分几个阶段输出客户编号。它显示 CustomerNumber 为 1 它显示 CustomerNumberUp 为 2 然后它给了我确切的错误

```
Warning: sqlite_query() expects parameter 1 to be resource, string given in I:\wwwroot\Year 3\Project Stuff\IP40 Website\addCustomer.php on line 52 
```

其中第 52 行是插入查询。我已经尝试了各种方法来解决这个问题，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:42:14.557

参数 1 看起来像我的名字。客户编号在最后。

顺便说一句，如果您的应用程序变得繁忙，您将使用您的方法获得重复的客户编号。sqllite 没有自动增量字段吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:45:30.890

问题是您的数据库名称

```
$db=sqlite_open("Architect.db"); 
```

如果被删除，它是否按预期工作`.db`？

# python - 如何在python中去除列表的特殊字符？

> ID：15513757
> 
> 赞同：-1
> 
> 时间：2013-03-20T01:36:28.127
> 
> 标签：python, function, csv, strip

我目前正在为班级做一个项目，我需要一些建议/帮助。我有一个要从中提取数据的 csv 文件。（我没有使用 csv 模块，因为我不熟悉，而且讲师警告我们它很复杂。）我已经使用我创建的函数将数据放入列表中。它工作正常，如果值只是一串数字，但如果单元格中有百分号或“N/A”，那么我会收到错误消息。这是代码：

```
def get_values(file, index):

    '''(file object, int) -> list
    Return a list of states and corresponding values at a prticular index in file.'''

    values_list = []
    for i in range(6):
        file.readline()
    for line in file:
        line_list = line.split(',')
        values_list.append(line_list[index])
    values_list = [i.rstrip('%') for i in values_list]
    values_list = [float(i) for i in values_list]
    return values_list

while True:
    try:
        file_name = input('Enter in file name: ')
        input_file = open( file_name, 'r')
        break

    except IOError:
         print('File not found.')

heart_list = get_values(input_file, 1)

input_file.close()
input_file = input_file = open( 'riskfactors.csv', 'r')

HIV_list = get_values(input_file, 8)

input_file.close() 
```

我想去掉 %，但到目前为止我还没有尝试过。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:40:54.170

如果没有看到带有示例输入的完整[SSCCE](http://sscce.org)，很难确定，但我敢打赌，问题是这样的：

```
values_list = [i.rstrip('%') for i in values_list] 
```

这将`'%'`去除每个值末尾的任何字符，但不会去除其他任何地方的任何`'%'`字符。在典型的 CSV 文件中，这还不够好。

我的猜测是你有这样的一行：

```
foo , 10% , bar 
```

这将分为：

```
['foo ', ' 10% ', ' bar\n'] 
```

因此，您添加`' 10% '`to `values_list`，该`rstrip`行将什么也不做，因为它不以 a 结尾`'%'`，而是以 a 结尾`' '`。

或者，或者，它可能只是这样：

```
foo,bar,10% 
```

所以你得到这个：

```
['foo', 'bar', '10%\n'] 
```

......有同样的问题。

如果这个（任何一个版本）是问题，你想要做的是：

```
values_list = [i.strip().rstrip('%')` for i in values_list] 
```

同时，您可以通过摆脱列表理解来简化此操作。当您可以在添加单个值时修复它们时，为什么还要在事后修复每一行？例如：

```
for line in file:
    line_list = line.split(',')
    value = line_list[index]
    value = value.rstrip('%')
    value = float(value)
    values_list.append(value)
return values_list 
```

现在，事情很简单，您可以合并多行而不会降低可读性。

* * *

当然你还是需要处理的`'N/A'`。问题是你是否想把它当作`0.0`, or `None`, 或者跳过它，或者做一些不同的事情，但无论你决定什么，你都可以考虑使用`try`around the`float`而不是检查 for `'N/A'`，以使你的代码更健壮。例如：

```
value = value.rstrip('%')
try:
    value = float(value)
except ValueError as e:
    # maybe log the error, or log the error only if not N/A, or...
    pass # or values_list.append(0.0), or whatever
else:
    values_list.append(value) 
```

* * *

顺便说一句，处理这类事情正是您*应该*使用该`csv`模块的原因。

这是您如何使用`csv`. 而不是这个：

```
for line in file:
    line_list = line.split(',') 
```

只需这样做：

```
for line_list in csv.reader(file): 
```

这很复杂？

它通过去除空格（以及引用和转义以及您会忘记测试的各种其他废话）来处理所有微妙之处。

换句话说，很可能，如果你使用`csv`了 ，除了节省一行代码之外，你一开始就不会遇到这个问题——接下来的 10 个问题中的 8 个也是如此碰到。

但是如果你是从一个认为`csv`太复杂的导师那里学习的……好吧，你有足够的动力去尝试自己解决问题并在课外提出问题，这是一件好事，所以有一些希望……</p>

# google-apps-script - 用户授权后需要授权

> ID：15513762
> 
> 赞同：1
> 
> 时间：2013-03-20T01:37:26.677
> 
> 标签：google-apps-script

我有一个脚本，它首先向用户呈现一个只包含一个按钮的 UI。单击该按钮后，脚本将浏览他们的文档并更改某些文件的所有权。

加载我的脚本后，用户会看到带有红色边框的标准“需要授权”页面。用户单击按钮授予我的应用所需的权限，并被带到带有按钮的页面。

但是，单击按钮后，用户会看到一个对话框，上面写着：

> 遇到错误：需要授权才能执行该操作。

该应用程序设置为在用户执行脚本时执行，并且脚本访问权限设置为“任何人”。

有什么想法可能是错的吗？

我的 doGet():

```
function doGet(e) {
  var app = UiApp.createApplication();

  var button = app.createButton('Transfer');
  app.add(button);

  var handler = app.createServerHandler('init');
  button.addClickHandler(handler);

  return app;
} 
```

init() 方法遍历特定文件夹（由其在脚本中的 ID 静态设置），查找当前用户拥有的文件，并将所有权转移给另一个用户。

```
function init() {
  // Create new log as a a Drive document
  var log = DocsList.createFile("Ownership Transfer Log");

  var user = Session.getActiveUser();

  var targetEmail = "newemail@example.com";
    transferFolderOwnership('[Drive folder ID]', user.getEmail(), targetEmail, log);
} 
```

并转移文件夹所有权：

```
function transferFolderOwnership(folderId, userEmail, targetEmail, log) {
  var rootFolder = DocsList.getFolderById(folderId);
  var files = rootFolder.getFiles();

  // Transfer files
  var file;
  for (var i = 0; i < files.length; i++) {
    file = DriveApp.getFileById(files[i].getId());
    if (file.getOwner() == userEmail) {
      file.transferOwnership(targetEmail);
    }
  }

  // Do the same for folders
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:01:14.187

您正在使用的库需要只有在从脚本编辑器调用时才能授予的授权（请参阅库源代码的结尾：）`function googleOAuth_()`。您看到的第一个授权仅适用于脚本的“本地”部分，另一个如下所示：

![在此处输入图像描述](../Images/2e06e7ba6e7e7d5e8be8bbc1b0b1c22c.png)

这是一个[已知问题，在最后一个](https://code.google.com/p/google-apps-script-issues/issues/detail?id=677)[问题跟踪器帖子](https://code.google.com/p/google-apps-script-issues/issues/detail?id=677)中描述了一种可能的解决方法。我还没有尝试过，但我想这可能是一种方法......

# ruby-on-rails - heroku 运行 rake db:migrate 出错

> ID：15513766
> 
> 赞同：1
> 
> 时间：2013-03-20T01:37:45.867
> 
> 标签：ruby-on-rails, ruby, heroku, dbmigrate

我正在尝试在 Heroku 上运行命令

Heroku 运行`rake db:migrate`

但我得到了错误：

```
Migrating to AddNameToUsers (20130320002032)
== AddNameToUsers: migrating =================================================
-- add_column(:users, :name, :string)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR: relation "users" does not exist
: ALTER TABLE "users" ADD COLUMN "name" character varying(255) 
```

这可能与我在本地服务器上的迁移文件存在一些问题有关。我设法解决了这个问题，不得不删除其中一个文件，但我担心我可能删除了一些我需要但尚未迁移到 heroku 数据库的东西？

我的 github 是[https://github.com/jeremybelcher/omrails](https://github.com/jeremybelcher/omrails)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T01:56:47.267

您以前的迁移丢失了。

你可以做：

```
rake db:create
rake db:schema:load
rake db:migrate 
```

这将根据您的`schema.rb`文件重新创建您的数据库。

# php - 在 PHP 中正确使用“&&”、“||”和“!=”

> ID：15513767
> 
> 赞同：0
> 
> 时间：2013-03-20T01:37:48.377
> 
> 标签：php

我对 PHP 不太确定，但我通常认为它就像数学一样，括号是在其他任何事情之前完成的。

我有这个：

```
if( !strncmp($method_id,'OPTION', 6) && ( ($method_id != 'OPTION_5') || ($method_id != 'OPTION_12') ) )
    unset( $available_methods[ $method_id ] ); 
```

其中`$method_id`等于`OPTION_`1 到 12。

如果选项 5 和 12 可用，则有效地取消设置除这两个之外的所有内容。

**问题** 为什么上述方法不起作用。

* * *

# 编辑

所以我尝试简化它，但我认为我让它更难理解。

这是一个运输循环。可用的方法是`ship:REGULAR_LOCAL`, `ship:EXPRESS_LOCAL`, `ship:PLAT_LOCAL`, `ship:REGULAR_INT`, `ship:EXPRESS_INT`, `ship:PLAT_INT`, 和`FREE_SHIPPING`[where `LOCAL`is within shipping country, and `INT`is international]。

当订单超过 100 美元时，会`FREE_SHIPPING`自动启动，但我也想根据客户的来源来选择其中一个`ship:EXPRESS_LOCAL`或出席。`ship:EXPRESS_INT`

```
if( !strncmp($method_id,'ship:', 5) && ( ($method_id != 'ship:EXPRESS_LOCAL') || ($method_id != 'ship:EXPRESS_INT') ) )
    unset( $available_methods[ $method_id ] ); 
```

这应该只返回`FREE_SHIPPING`， 和 要么`ship:EXPRESS_LOCAL` **要么** `ship:EXPRESS_INT`。

**环形**

```
if( isset( $available_methods['FREE_SHIPPING'] ) ) {
    foreach( $available_methods as $method_id => $method ) {
        if( !strncmp( $method_id, 'ship:', 5 ) && ( ($method_id != 'ship:EXPRESS_LOCAL') && ($method_id != 'ship:EXPRESS_INT') ) )
            unset( $available_methods[ $method_id ] );
    }
}   
return $available_methods; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:44:59.203

你有一些逻辑废话。看第二部分的 or 。如果 method_id 不是 5 或 method_id 不是 12。好吧，如果它不是 5 或 12，那么你会得到一个真实的结果。如果它是 5，你会得到“假或真”，这是真的。如果是 12，你会得到“真或假”，这是真的。所以，整个下半场总是正确的。也许你的意思是 && 而不是 || 或者你想要 == 而不是 !=。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:45:52.477

通常最好对代码进行格式化以更清楚地看到它。

从：

```
if( !strncmp($method_id,'OPTION', 6) && ( ($method_id != 'OPTION_5') || ($method_id != 'OPTION_12') ) ) 
```

至：

```
if(

  !strncmp($method_id,'OPTION', 6)

  &&

  ( 
      ($method_id != 'OPTION_5')
      ||
      ($method_id != 'OPTION_12') 
  ) 

) 
```

这部分总是正确的：

```
 ($method_id != 'OPTION_5')
  ||
  ($method_id != 'OPTION_12') 
```

因为其中之一将永远是真实的，并且`true || false === false || true === true`。

所以`if`将是真的 iff `!strncmp($method_id,'OPTION', 6) === true`，意思`strncmp($method_id,'OPTION', 6)===false`。

检查您要用于它的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:13:21.547

您更新的问题应该已经包含正确的代码；这就是我写它的方式：

```
$localOrInt = array('ship:EXPRESS_LOCAL', 'ship:EXPRESS_INT');

if (isset($available_methods['FREE_SHIPPING'])) {
    foreach ($available_methods as $method_id => $method) {
        if (!strncmp($method_id, 'ship:', 5) && !in_array($method_id, $localOrInt)) {
            unset($available_methods[$method_id]);
        }
    }
} 
```

# r - 需要用于 Windows 二进制文件的 r DMwR 0.2.3.zip 的存档版本

> ID：15513770
> 
> 赞同：-2
> 
> 时间：2013-03-20T01:38:19.453
> 
> 标签：r

需要存档版本的 r DMwR 0.2.3.zip for windows binary 当前版本是 DMwR 0.3.0 我需要旧版本，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:45:14.137

自己建造。

下载适当的`.tar.gz`文件并从源代码构建

以下

```
install.packages("~/Downloads/DMwR_0.2.3.tar.gz", repos = NULL, type = "source") 
```

为我工作！

有一个明显的警告，存档版本是有原因的。

# c# - 如何将参数值传递给 SqlDataSource

> ID：15513772
> 
> 赞同：3
> 
> 时间：2013-03-20T01:38:25.257
> 
> 标签：c#, asp.net, sql, parameters

我正在使用 SqlDataSource 来填充 GridView。这是我的代码：

```
private void DataCall()
{
    //Object gets created for use from the class(clsDataConduit)
    clsDataDictionary AnOrder = new clsDataDictionary();
    //Declaring a new SqlDataSource from the inbuilt class library
    SqlDataSource sqlDS_ItemTable = new SqlDataSource();
    //Using our datasource object being cast onto our objects connectionstring
    sqlDS_ItemTable.ConnectionString = AnOrder.ConnectionString;
    //Our sql statement being passed through to our .SelectCommand method
    sqlDS_ItemTable.SelectCommand = "Select tblOrders.OrderId, tblItem.ItemName, tblOrders.DateOrdered from tblItem, tblOrders where tblItem.ItemId = tblOrders.ItemId AND tblOrders.AuthId = 5";
    //Adding controls to our SqlDataSource object
    this.Controls.Add(sqlDS_ItemTable);
    //Declares the DataSource for our gridview !
    grdOrder.DataSource = sqlDS_ItemTable;
    //Binds the data to refresh every time it's used
    grdOrder.DataBind();
} 
```

正如您在最后的 SQL 语句中看到的那样，我正在这样做`tblOrders.AuthId = 5`。但是我想做这样的事情`tblOrders.AuthId = SessionAuthId .`

我阅读了一些关于单独做某事的帖子，`command.Parameters.Add(new SqlParameter("Name", dogName));`但我不知道如何将其应用于我的代码。

我正在使用其他人的代码（教授）在作业中执行此操作，但我想稍微编辑它，因为我将开发登录系统等。

有人可以看一下该方法，看看我将如何更改它以将参数传递给它。这里还有完整的代码：http: [//pastebin.com/sdrvW5Zn](http://pastebin.com/sdrvW5Zn)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T01:45:39.783

您可以使用该`SelectParameters`属性进行参数化查询。

```
sqlDS_ItemTable.SelectCommand = "Select tblOrders.OrderId, tblItem.ItemName, tblOrders.DateOrdered from tblItem, tblOrders where tblItem.ItemId = tblOrders.ItemId AND tblOrders.AuthId = @authID";

sqlDS_ItemTable.SelectParameters.Add(new SqlParameter("@authID", SessionAuthID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:17:06.330

```
 String authId = SessionAuthID;//pass your session ID to the variable or directly you can     pass this value as the parameter value:

 string strSQL = "Select tblOrders.OrderId, tblItem.ItemName, tblOrders.DateOrdered from   tblItem, tblOrders where tblItem.ItemId = tblOrders.ItemId AND tblOrders.AuthId = @ID";
 SqlCommand cmdItem = new SqlCommand(strSQL, clsMain_Connection.openConn());
 cmdItem.Parameters.AddWithValue("@ID", authId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:30:05.593

TheGreatCO 建议的 string.format 方法看起来适用于您当前的实现，您将 SQL 查询作为字符串传递。

否则，您可以从 SQL 片段创建一个存储过程并将其设置为采用参数。

我假设 sessionAuthId 是一个整数。

```
CREATE PROCEDURE SP_SAMPLEPROCEDURENAME

(
    @p1 int      -- here the input parameter is declared
)

AS
    BEGIN

Select 
tblOrders.OrderId, 
tblItem.ItemName, 
tblOrders.DateOrdered 
from tblItem, tblOrders 
where tblItem.ItemId = tblOrders.ItemId 
AND tblOrders.AuthId = @p1   -- here the input parameter is used

END 
```

要从 c# 调用存储的过程，您需要这样的方法：

```
public YOURReturnObject PopulateGridView(int sessionid)
{

SqlConnection conn = new SqlConnection("YourDBConnectionString);
SqlCommand comm = new SqlCommand("SP_SAMPLEPROCEDURENAME", conn);
comm.CommandType = CommandType.StoredProcedure;
comm.Parameters.AddWithValue("@p1",sessionid);

YOURReturnObject o = new YOURReturnObject();

using (comm.Connection)
{
comm.Connection.Open();
while (reader.Read())
{
//read the results into return object 

} 
```

}
返回 o;

```
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T13:16:47.177

使用“选择参数”

```
sqlDS_ItemTable.SelectParameters.Clear(); 
sqlDS_ItemTable.SelectCommand = "Select tblOrders.OrderId, tblItem.ItemName, tblOrders.DateOrdered from tblItem, tblOrders where tblItem.ItemId = tblOrders.ItemId AND tblOrders.AuthId = @authID";
sqlDS_ItemTable.SelectParameters.Add("authID", SessionAuthID);

// sqlDS_ItemTable.SelectParameters.Add("stringParam",  TypeCode.String, stringParam); //like so for string validation 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-03-20T01:40:50.023

使用`string.Format()` [http://msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

执行以下操作：

```
sqlDS_ItemTable.SelectCommand = string.Format("Select tblOrders.OrderId, tblItem.ItemName, tblOrders.DateOrdered from tblItem, tblOrders where tblItem.ItemId = tblOrders.ItemId AND tblOrders.AuthId = {0}", SessionAuthId); 
```

要回答您的第二个问题，您将更改方法的签名以包含参数。

```
private void DataCall(string SessionAuthId)
{
    // your method here...
} 
```

# javascript - 在 ThreeJS 中从相机中射出一条光线

> ID：15513773
> 
> 赞同：4
> 
> 时间：2013-03-20T01:38:38.140
> 
> 标签：javascript, 3d, three.js

我正在尝试在 ThreeJS 中创建一个简单的第一人称射击游戏，但在从相机中射出光线时遇到了一些麻烦。我正在使用 Doob 先生的 github 上的 PointerLock 示例代码的代码，我只是想在查看框并单击鼠标时更改框的颜色，但我的代码似乎只是随机更改框的颜色。

这是寻找碰撞的代码：

```
function onDocumentMouseDown( event ) {

            event.preventDefault();

            var vector = new THREE.Vector3(0,0,1);

            projector.unprojectVector(vector, camera);
            var rayCam = new THREE.Ray(camera.position, vector.sub(camera.position).normalize() );

            var rayCaster = new THREE.Raycaster(rayCam.origin, rayCam.direction);
            //rayCaster.ray = rayCam;

            var intersects = rayCaster.intersectObjects(scene.children);

            if (intersects.length) {
                intersects[ 0 ].object.material.color.setHex( Math.random() * 0xffffff );
            }
        } 
```

当您站在一个地方时，我的代码可以工作，但是当您开始移动代码时，代码的行为就好像相机仍然在它开始的原点。我如何修改此代码以考虑到我将四处走动的事实？

# backbone.js - 关于如何设计可扩展主干视图的建议

> ID：15513774
> 
> 赞同：0
> 
> 时间：2013-03-20T01:38:44.553
> 
> 标签：backbone.js, backbone-views

我有以下主干应用程序。

这是一个通用的 crud 视图，具有以下模板：

```
<div id="<%= crudId %>">
  <div class="header-view"></div>
  <div class="table-view"></div>
  <div class="form-view"></div>
</div> 
```

你可以在这里看到crud：http: [//bbbootstrap.com.ar/index.html#Wine](http://bbbootstrap.com.ar/index.html#Wine)

视图本身有子视图，要在表格视图和表单视图中呈现。

问题是我希望它是一个基本的 crud 视图，并且易于接受，添加新的子视图，例如，添加一个新面板来发布一些批量操作。

这些是我到目前为止提出的可能的解决方案

1- 继承：创建一个新的 CrudBulkView 继承自 CrudView，修改模板以具有批量视图占位符。

优点：继承可以提供相当优雅和简单的解决方案缺点：它有点限制，我希望能够编写 BulkView 并将其添加到 CrudView。

2-向 crudview 添加一个方法，例如 addView(view, place) ，其中位置类似于“beforeForm”、“afterForm”、“beforeTable”等......（它太硬编码了......

缺点：太硬编码

3-在我要添加的每个子视图中传递一个函数，该函数负责在 CrudView 渲染容器之后创建 dom 并附加到它。该方法可以调用 setEl 并返回新创建的 el。

优点：非常灵活缺点：将子视图附加到 dom 的过程增加了一些复杂性

4-修改 crudView 模板，然后附加到它，如下所示：

```
<div id="<%= crudId %>">
  <div class="header-view"></div>
  <div class="table-view"></div>
  <div class="form-view"></div>
  <div class="bulk-view"></div
</div> 
```

那么 bulkView.el 将是 '.bulk-view'

优点：简单的方法缺点：必须弄乱字符串，而不是处理 dom

我认为我想要达到的目标并不奇怪。我只想在容器视图中添加一个视图，尽可能地解耦，并能够确定它应该在哪里呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:32:05.413

在阅读了您对我之前的回答的回复后，我浏览并修改了我的示例，希望能让您了解如何使用命名视图实现系统，使您可以根据需要控制排序。如果这有帮助，或者您对它的工作原理有任何疑问，请告诉我。

```
var viewCtor = Backbone.View.prototype.constructor;

// Assuming we have a reference to the subviews already
var BaseCrudView = Backbone.View.extend({
  // This is null for an important reason, see comment in constructor
  subViews: null,

  // Override the constructor instead of initialize since this is meant to be a base object, so things that
  // inherit don't have to remember to call the parent inialize every time.
  constructor: function() {
    viewCtor.apply(this, arguments);

    // It is important this is initialized when instantiating the view rather than in the prototype.
    // Backbone's extend() will "copy" the prototype properties of the parent when extending, which really
    // just performs an assignment. If this were initialized above in the prototype then all children
    // that inherit from that prototype would share the exact same instance of the array/object. If a child
    // adds something to the array, it would be changed for all instances that inherit from the parent.
    this.subViews = {
      header: new HeaderView(),
      table: new TableView
    };

    this.subViewOrder = [
      'header',
      'table'
    ];
  },

  addBefore: function(subView, name, beforeView) {
    this.subViews[name] = subView;
    var viewLoc = this.subViewOrder.indexOf(beforeView);
    if(viewLoc == -1) {
      viewLoc = 0;
    }
    this.subViewOrder.splice(viewLoc, 0, name);
  },

  addAfter: function(subView, name, afterView) {
    this.subViews[name] = subView;
    var viewLoc = this.subViewOrder.indexOf(afterView);
    if(viewLoc == -1) {
      viewLoc = this.subViewOrder.length - 1;
    }
    this.subViewOrder.splice(viewLoc + 1, 0, name);
  },

  moveBefore: function(name, beforeView) {
    this.addBefore(this.subViews[name], name, this.subViewOrder.splice(this.subViewOrder.indexOf(name), 1));
  },

  moveAfter: function(name, afterView) {
    this.addAfter(this.subViews[name], name, this.subViewOrder.splice(this.subViewOrder.indexOf(name), 1));
  },

  render: function() {
    var that = this;

    _.each(this.subViewOrder, function(viewName) {
      // Assumes the render() call on any given view returns 'this' to get 'el'
      that.$el.append(this.subViews[viewName].render().el);
    });

    return this;
  }
});

var BulkCrudView = BaseCrudView.extend({
  inialize: function() {
    // Skipping the last parameter causes it to insert at the end
    this.addAfter(new BulkView(), 'bulkView');
  }
}); 
```

有了这个，您可以轻松地在初始化时扩展`BulkCrudView`和修改其`subViews`数组以添加/插入任何您想要的。不过，它也可以实例化 a`BaseCrudView`并使用视图方法。只要感觉更干净和/或漂浮你的船。

# php - ubuntu 12.10 上的 Informix PDO

> ID：15513780
> 
> 赞同：1
> 
> 时间：2013-03-20T01:39:34.863
> 
> 标签：php, ubuntu, pdo, informix

我在 ubuntu 上配置 PDO。

我收到了这个错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20100525/pdo_informix.so' - libifcli.so: cannot open shared object file: No such file or directory in Unknown on line 0 
```

任何线索？，驱动程序设置正确，也 de envvars。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:39:07.627

最后只是将目录从 /opt/IBM/informix 更改为 /opt/informix。

这对我有用。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:46:19.527

这是一个已知的错误，已在[此处报告 #666911](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666911)（那里的数字非常好）`=)`。

只是清除`php5-suhosin`包装。

# ios - 将 UICollectionView 与 rest api 数据问题绑定

> ID：15513782
> 
> 赞同：1
> 
> 时间：2013-03-20T01:39:57.143
> 
> 标签：ios, api, rest, uicollectionview

我正在尝试从外部 API 获取图像并将其绑定到该视图中的 UICollectionView 和 UIImageView 单元格。我能够获取数据并将其打印在日志文件中。但是，我无法在我的 UICollectionView 上看到图像。这是我的数据绑定的代码。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
   ImagesViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];

  // imagesArray is an array with serialized json data.

  NSDictionary *finalImages = [self.imagesArray objectAtIndex:indexPath.row];

  NSLog(@"Entering collection view.....");

  [[cell imageViewCell]setImage:[UIImage imageNamed:[finalImages valueForKey:@"link"]]];

  return cell;
} 
```

数据以 JSON 格式提供。

```
 data
{
  abc: 'abc',
  xyz: 'xyx',
  link: 'link to an online image'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:43:49.650

`UIImage imageNamed:`采用文件名，而不是 URL。

您需要手动将图像文件加载到`NSData`对象中，然后才能显示它。

`NSData dataWithContentsOfURL`会为你做这件事。

```
UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:[finalImages valueForKey:@"link"]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:36:33.707

imageNamed 是一种从包中的图像文件 (image.png) 中获取图像的方法。

如果您想从 URL 获取图像，请将其下载为 Richhard Brown 先生的答案或使用 SDWebImage（直接使用 imageView 设置）

示例 colectionView SDWebImage 代码（非ARC）：[https ://github.com/lequysang/github_zip/blob/master/CollectionViewNonARC.zip](https://github.com/lequysang/github_zip/blob/master/CollectionViewNonARC.zip)

# java - GXT 3：GridSelectionModel SelectionEvent/SelectionChangedEvent 未触发

> ID：15513785
> 
> 赞同：0
> 
> 时间：2013-03-20T01:40:12.870
> 
> 标签：java, gwt, event-handling, grid, gxt

GXT 3 问题：

有谁知道为什么当我选择网格上的任何行时不会触发这两个处理程序？SelectionModel 为 GridSelectionModel，设置为单选。

是否需要进一步申报？就这么简单，不是吗。我为 GXT 2.2 添加事件侦听器没有问题，但 GXT 3 有一些变化。这些事件用于检测行选择，不是吗？

```
SelectionChangedHandler<Summary> gridSelectionChangedHandler = 
  new SelectionChangedHandler<Summary>() {
    public void onSelectionChanged(
      SelectionChangedEvent<Summary> event) {
        Summary rec = event.getSelection().get(0);
        Window.alert("Row = "+ rec.getId());    
    }
  };

SelectionHandler<Summary> gridSelectionHandler =
  new SelectionHandler<Summary>() {
    public void onSelection(SelectionEvent<Summary> event) {
      Summary rec = event.getSelectedItem();
      Window.alert("Row = "+ rec.getId());    
    }
  };

public SummaryViewImpl() {
  uiBinder.createAndBindUi(this);
  this.grid.addSelectionChangedHandler(gridSelectionChangedHandler);
  this.grid.addSelectionHandler(gridSelectionHandler);
} 
```

但是，我对 RowClickEvent 没有任何问题，因为以下内容正在触发：

```
@UiHandler({ "grid" })
void onRowClick(RowClickEvent event){
    int row = event.getRowIndex();
    Window.alert("Row = "+ row);        
} 
```

grid 是 SummaryGrid 的一个实例：

```
public class SummaryGrid
extends Grid<Summary>{

  {
    this.sm = new GridSelectionModel<Summary>();
    this.sm.setSelectionMode(SelectionMode.SINGLE);
  }

  blah ... blah ...

  public HandlerRegistration addSelectionChangedHandler(SelectionChangedHandler<Summary> handler){
    return this.getSelectionModel().addSelectionChangedHandler(handler);
  }

  public HandlerRegistration addSelectionHandler(SelectionHandler<Summary> handler){
    return this.getSelectionModel().addSelectionHandler(handler);
  }

  blah ... blah ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:50:21.253

试试这个`grid.getSelectionModel().addSelectionChangedHandler`

不确定是否需要先设置选择模式，但我的工作代码如下：

```
grid.getSelectionModel().setSelectionMode(SelectionMode.SINGLE);

grid.getSelectionModel().addSelectionChangedHandler(new SelectionChangedHandler<Summary>() {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:28:01.387

没关系！犯了访问本地私有变量而不是访问属性获取/设置方法的错误。

在扩展类中，执行以下操作：

```
this.setSelectionModel(selectionModel);
this.getSelectionModel().setSelectionMode(SelectionMode.SINGLE); 
```

而不是这样做：

```
this.sm =selectionModel;
this.sm.setSelectionMode(SelectionMode.SINGLE); 
```

因为，setter 必须绑定在我直接访问 sm 变量时未执行的选择模型。

强化课程：在扩展类时，应该访问 setter/getter，而不是访问它们关联的局部变量。

# windows - 如何在 Windows 上从源代码构建 cx_freeze？

> ID：15513788
> 
> 赞同：3
> 
> 时间：2013-03-20T01:40:49.477
> 
> 标签：windows, python-3.x, cx-freeze, building

我尝试使用 MSI 在我的计算机（Windows）上安装 cx_freeze，但安装一直失败，提示“找不到一个或多个需要的文件”。因为从预构建的二进制文件安装不是一个选项，所以我决定从源代码构建 cx_freeze。

我下载了 .tar.bz 并解压缩，直到找到包含 .tar.bz 的实际文件夹`setup.py`。我`cd`编辑到目录中，然后运行命令

```
python setup.py install 
```

出现一个cmd窗口并打印出很多“添加名为...的基础模块”的文本，然后打印出来

```
running install
running build
running build_py 
```

但是，安装失败并出现错误

```
error: package directory 'cx_freeze' does not exist 
```

我不知道如何解决这个问题。如果有人能给我关于如何安装 cx_freeze 的工作说明，那就太好了

顺便说一句，我在 python 3.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-09T22:02:30.577

在挣扎了1个半小时后，我找到了解决方案！

我按照以下步骤从 Python 3.3 的源代码编译 CX_Freeze：

1.  安装 Visual Studio 2010 C++（仅 2010 有效！）
2.  从 BitBucket 下载最新版本的 CX_Freeze。你需要这个，CX_Freeze首页的版本少了一个文件！[https://bitbucket.org/anthony_tuininga/cx_freeze](https://bitbucket.org/anthony_tuininga/cx_freeze)
3.  提取文件
4.  启动`cmd`并`cd`进入解压文件夹的目录。（这将避免你的问题）
5.  （可选：python.exe 的路径）`setup.py install`
6.  完毕！

在此期间，我面临一个重大问题。mt.exe 存在一些问题，它以退出状态 31 失败。解决方案是使用 python 并在 Lib/distutils 中编辑 msvc9compiler.py。

搜索以下行：

`ld_args.append(‘/MANIFESTFILE:’ + temp_manifest)`

将其替换为： `ld_args.append(‘/MANIFEST’)`

对我有帮助的来源：

*   [http://fuyun.org/2009/12/install-mysql-for-python-on-windows/](http://fuyun.org/2009/12/install-mysql-for-python-on-windows/)
*   [http://grokbase.com/t/python/tutor/03be598tkx/how-to-install-new-package#20031115zd5eiqq27cbflktokjw4esr4g4](http://grokbase.com/t/python/tutor/03be598tkx/how-to-install-new-package#20031115zd5eiqq27cbflktokjw4esr4g4)

# algorithm - 期望最大化抛硬币示例

> ID：15513792
> 
> 赞同：10
> 
> 时间：2013-03-20T01:41:05.363
> 
> 标签：algorithm, machine-learning, computer-science, data-mining, expectation-maximization

我最近一直在自学期望最大化，并在这个过程中抓住了一些简单的例子：

[http://cs.dartmouth.edu/~cs104/CS104_11.04.22.pdf](http://cs.dartmouth.edu/~cs104/CS104_11.04.22.pdf) 有 3 个硬币 0、1 和 2，投掷时有 P0、P1 和 P2 概率落在正面。掷硬币 0，如果结果是正面，则掷硬币 1 3 次，否则掷硬币 2 3 次。硬币1和2产生的观测数据是这样的：HHH，TTT，HHH，TTT，HHH。隐藏数据是硬币 0 的结果。估计 P0、P1 和 P2。

[http://ai.stanford.edu/~chuongdo/papers/em_tutorial.pdf](http://ai.stanford.edu/~chuongdo/papers/em_tutorial.pdf) 有两个硬币 A 和 B，PA 和 PB 是投掷时正面朝上的概率。每轮随机选择一枚硬币，掷10次，记录结果。观察到的数据就是这两个硬币提供的折腾结果。但是，我们不知道为特定回合选择了哪个硬币。估计 PA 和 PB。

虽然我可以得到计算结果，但我无法将它们的求解方式与原始 EM 理论联系起来。具体来说，在这两个示例的 M-Step 期间，我看不到它们如何最大化任何东西。似乎他们正在重新计算参数，并且不知何故，新参数比旧参数好。而且，这两个E-Step甚至看起来都不相似，更不用说原始理论的E-Step了。

那么这些示例究竟是如何工作的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T06:25:28.603

第二个 PDF 不会为我下载，但我还访问了维基百科页面[http://en.wikipedia.org/wiki/Expectation%E2%80%93maximization_algorithm](http://en.wikipedia.org/wiki/Expectation%E2%80%93maximization_algorithm)，其中包含更多信息。[http://melodi.ee.washington.edu/people/bilmes/mypapers/em.pdf](http://melodi.ee.washington.edu/people/bilmes/mypapers/em.pdf)（声称是一个温和的介绍）可能也值得一看。

EM算法的重点是找到最大化观察数据的可能性的参数。这是第一个 PDF 第 8 页上唯一的要点，即大写 Theta 下标 ML 的等式。

EM 算法在有隐藏数据的地方派上用场，如果你知道它会使问题变得容易。在三个硬币的例子中，这是掷硬币 0 的结果。如果你知道结果，你可以（当然）估计硬币 0 正面朝上的概率。您还将知道硬币 1 或硬币 2 在下一阶段被掷了 3 次，这将允许您估计硬币 1 和硬币 2 出现正面的概率。这些估计是合理的，因为它们最大化了观察数据的可能性，这不仅包括给你的结果，还包括你不是的隐藏数据——硬币 0 的结果。

在 EM 算法中，您说尽管您不知道隐藏数据，但您会得到概率估计，从而可以为它写下概率分布。对于隐藏数据的每个可能值，您可以找到可以优化包括隐藏数据在内的数据的对数似然的参数值，这几乎总是意味着计算某种加权平均值（如果它不是 EM步骤可能太难而不实用）。

EM 算法要求你做的是找到最大化所有可能隐藏数据值给出的对数似然加权和的参数，其中权重由相关隐藏数据的概率给出，给定使用参数的观察值EM步骤的开始。这就是几乎每个人，包括维基百科算法，都称之为 Q 函数。维基百科文章中给出的 EM 算法背后的证明说，如果您更改参数以增加 Q 函数（这只是达到目的的一种手段），您也将更改它们以增加观察到的数据的可能性（您确实关心）。您在实践中往往会发现，如果您知道隐藏数据，您可以使用一种变体来最大化 Q 函数，

在您的示例中，这意味着将每个硬币产生的正面和反面的数量相加。在 PDF 中，他们计算出 P(Y=H|X=) = 0.6967。这意味着您在 Y=H 的情况下使用权重 0.6967，这意味着您将 Y=H 的计数增加 0.6967 并将硬币 1 中 X=H 的计数增加 3*0.6967，并且您将 Y 的计数增加=T 增加 0.3033 并将硬币 2 中 X=H 的计数增加 3*0.3033。如果您有详细的理由说明为什么 A/(A+B) 是标准情况下硬币概率的最大似然，您应该准备好将其转化为为什么这种加权更新方案最大化 Q 函数的理由。

最后，观察到的数据的对数似然（你正在最大化的东西）给你一个非常有用的检查。它应该随着每个 EM 步骤而增加，至少直到您非常接近收敛以至于出现舍入误差，在这种情况下，您可能会有非常小的减少，表明收敛。如果它急剧下降，则说明您的程序或数学存在错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T23:20:58.523

幸运的是，我最近也一直在努力使用这种材料。以下是我的想法：

考虑一种相关但不同的算法，称为分类最大化算法，我们可以将其用作混合模型问题的解决技术。混合模型问题是这样一个问题：我们有可能由 N 个不同过程中的任何一个产生的数据序列，我们知道这些数据的一般形式（例如，高斯），但我们不知道过程的参数（例如，均值和/或方差），甚至可能不知道过程的相对可能性。（通常我们至少知道过程的数量。没有它，我们就进入了所谓的“非参数”领域。）从某种意义上说，生成每个数据的过程是“丢失”或“隐藏”数据的问题。

现在，这个相关的分类最大化算法所做的是从对过程参数的一些任意猜测开始。根据这些参数过程中的每一个对每个数据点进行评估，并生成一组概率——数据点由第一个过程、第二个过程等生成的概率，直到最后的第 N 个过程。然后根据最可能的过程对每个数据点进行*分类。*

此时，我们将数据分为 N 个不同的类。因此，对于每一*类数据，我们可以通过一些相对简单的演算，使用**最大*似然技术优化该集群的参数。（如果我们在分类之前尝试对整个数据集执行此操作，通常在分析上是难以处理的。）

然后我们更新我们的参数猜测，重新分类，更新我们的参数，重新分类等，直到收敛。

期望最大化算法的作用类似，但更通用：我们现在使用软分类，而不是将数据点硬分类为第 1 类、第 2 类……到第 N 类，每个数据点属于每个过程都有一定的概率。（显然，每个点的概率总和需要为 1，因此需要进行一些标准化。）我认为我们也可以将其视为每个过程/猜测对每个数据都有一定的“解释力”点。

所以现在，我们不是针对绝对属于每个类别的点优化猜测（忽略绝对不属于的点），而是在那些软分类或解释能力的背景下重新优化猜测。碰巧的是，如果你以正确的方式编写表达式，你*最大化*的是一个函数，它的形式是一个*期望*。

话虽如此，有一些警告：

1）这听起来很容易。至少对我来说不是。文献中充斥着各种特殊技巧和技术——使用似然表达式而不是概率表达式，转换为对数似然，使用指示变量，将它们置于基向量形式并将它们置于指数中，等等。

一旦你有了大致的想法，这些可能会更有帮助，但它们也会混淆核心想法。

2）无论您对问题有什么限制，都很难将其纳入框架。特别是，如果您知道每个过程的概率，您可能处于良好状态。如果不是，您也在估计这些，并且过程的概率之和必须为 1；他们必须生活在概率单纯形上。如何保持这些约束完好无损并不总是显而易见的。

3）这是一种足够通用的技术，我不知道如何编写通用的代码。这些应用程序远远超出了简单的聚类，并扩展到您实际上缺少数据的许多情况，*或者丢失数据的假设可能对您有所帮助。* 对于许多应用程序来说，这里有一种可怕的独创性。

4）该技术被证明是收敛的，但收敛不一定是全局最大值；警惕。

我发现以下链接有助于提出上述解释：[统计学习幻灯片](http://www.svcl.ucsd.edu/courses/ece271A-F08/ece271A-F08.htm)

以下文章详细介绍了一些令人痛苦的数学细节： [迈克尔柯林斯的文章](http://faculty.washington.edu/fxia/courses/LING572/EM_collins97.pdf)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-11T13:19:45.047

我用 Python 编写了以下代码，解释了Do 和 Batzoglou在您的[第二篇示例论文中给出的示例。](http://ai.stanford.edu/~chuongdo/papers/em_tutorial.pdf)

我建议您首先阅读此[链接](https://math.stackexchange.com/questions/25111/how-does-expectation-maximization-work)，以清楚地了解如何以及为什么获得以下代码中的*“weightA”*和*“weightB”*。

**免责声明：**代码确实有效，但我确信它没有以最佳方式编码。我通常不是 Python 编码器，两周前就开始使用它。

```
import numpy as np
import math

#### E-M Coin Toss Example as given in the EM tutorial paper by Do and Batzoglou* #### 

def get_mn_log_likelihood(obs,probs):
    """ Return the (log)likelihood of obs, given the probs"""
    # Multinomial Distribution Log PMF
    # ln (pdf)      =             multinomial coeff            *   product of probabilities
    # ln[f(x|n, p)] = [ln(n!) - (ln(x1!)+ln(x2!)+...+ln(xk!))] + [x1*ln(p1)+x2*ln(p2)+...+xk*ln(pk)]     

    multinomial_coeff_denom= 0
    prod_probs = 0
    for x in range(0,len(obs)): # loop through state counts in each observation
        multinomial_coeff_denom = multinomial_coeff_denom + math.log(math.factorial(obs[x]))
        prod_probs = prod_probs + obs[x]*math.log(probs[x])

multinomial_coeff = math.log(math.factorial(sum(obs))) -  multinomial_coeff_denom
likelihood = multinomial_coeff + prod_probs
return likelihood

# 1st:  Coin B, {HTTTHHTHTH}, 5H,5T
# 2nd:  Coin A, {HHHHTHHHHH}, 9H,1T
# 3rd:  Coin A, {HTHHHHHTHH}, 8H,2T
# 4th:  Coin B, {HTHTTTHHTT}, 4H,6T
# 5th:  Coin A, {THHHTHHHTH}, 7H,3T
# so, from MLE: pA(heads) = 0.80 and pB(heads)=0.45

# represent the experiments
head_counts = np.array([5,9,8,4,7])
tail_counts = 10-head_counts
experiments = zip(head_counts,tail_counts)

# initialise the pA(heads) and pB(heads)
pA_heads = np.zeros(100); pA_heads[0] = 0.60
pB_heads = np.zeros(100); pB_heads[0] = 0.50

# E-M begins!
delta = 0.001  
j = 0 # iteration counter
improvement = float('inf')
while (improvement>delta):
    expectation_A = np.zeros((5,2), dtype=float) 
    expectation_B = np.zeros((5,2), dtype=float)
    for i in range(0,len(experiments)):
        e = experiments[i] # i'th experiment
        ll_A = get_mn_log_likelihood(e,np.array([pA_heads[j],1-pA_heads[j]])) # loglikelihood of e given coin A
        ll_B = get_mn_log_likelihood(e,np.array([pB_heads[j],1-pB_heads[j]])) # loglikelihood of e given coin B

        weightA = math.exp(ll_A) / ( math.exp(ll_A) + math.exp(ll_B) ) # corresponding weight of A proportional to likelihood of A 
        weightB = math.exp(ll_B) / ( math.exp(ll_A) + math.exp(ll_B) ) # corresponding weight of B proportional to likelihood of B                            

        expectation_A[i] = np.dot(weightA, e) 
        expectation_B[i] = np.dot(weightB, e)

    pA_heads[j+1] = sum(expectation_A)[0] / sum(sum(expectation_A)); 
    pB_heads[j+1] = sum(expectation_B)[0] / sum(sum(expectation_B)); 

    improvement = max( abs(np.array([pA_heads[j+1],pB_heads[j+1]]) - np.array([pA_heads[j],pB_heads[j]]) ))
    j = j+1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:47:38.630

理解这一点的关键是知道使估计变得微不足道的辅助变量是什​​么。我将快速解释第一个示例，第二个示例遵循类似的模式。

用两个二进制变量来增强每个正面/反面序列，这表明使用的是硬币 1 还是硬币 2。现在我们的数据如下所示：

c_11 c_12 c_21 c_22 c_31 c_32 ...

对于每个 i，c_i1=1 或 c_i2=1，另一个为 0。如果我们知道这些变量在我们的样本中的值，参数估计将是微不足道的：p1 将是样本中正面的比例，其中 c_i1= 1，对于 c_i2 也是如此，而 λ 将是 c_i1s 的平均值。

但是，我们不知道这些二进制变量的值。所以，我们基本上做的是猜测它们（实际上，接受它们的期望），然后假设我们的猜测是正确的，然后更新我们模型中的参数。所以E步就是取c_i1s和c_i2s的期望值。M 步骤是在给定这些 cs 的情况下对 p_1、p_2 和 λ 进行最大似然估计。

这是否更有意义？如果您愿意，我可以写出 E 和 M 步骤的更新。然后 EM 只是保证通过遵循这个过程，可能性永远不会随着迭代的增加而降低。

# ios - UILabel 有时不能正确换行（自动布局）

> ID：15513794
> 
> 赞同：41
> 
> 时间：2013-03-20T01:41:09.797
> 
> 标签：ios, autolayout

我在视图中有一个 uilabel 设置。它没有宽度约束，但它的宽度由缩略图图像的前导约束和视图边缘的尾随约束确定。

![在此处输入图像描述](../Images/a426b90d5427b59caad2b49306dd39b7.png)

标签设置为 0 行，并自动换行。我的理解是，这应该会导致 uilabel 的框架增长，而且有时确实会增长。（在自动布局之前，我会在代码中计算和更新标签的框架）。

所以结果是，它在某些情况下可以正常工作，而在其他情况下不能正常工作。看到大多数单元格在那里正常工作，但最后一个单元格似乎太大了。事实上，它的大小是合适的。标题“Fair Oaks Smog Check Test”实际上以“Only”结尾。所以我对单元格大小的计算是正确的，应该是那个大小。但是，无论出于何种原因，标签都不会包装文本。它的框架宽度没有向右延伸，所以这不是问题。

![在此处输入图像描述](../Images/9fc9bf8809534bdbdc76cad954655054.png)

那么这里发生了什么？它是 100% 一致的，总是在那个单元格上而不是在它上面的那个单元格上，这让我认为它与文本的大小有关，一旦这个视图被添加到单元格中，UILabel 就不会重新布局文本（其中使它实际上在宽度方面更小）。

有什么想法吗？

## 一些附加信息

单元格的高度是根据我创建并存储在静态变量中的一个样本单元格计算的：

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (self.items.count == 0) {
        return 60;
    }
    static TCAnswerBuilderCell *cell = nil;
    static dispatch_once_t pred;

    dispatch_once(&pred,
                  ^{
                      // get a sample cellonce
                      cell = [tableView dequeueReusableCellWithIdentifier:TC_ANSWER_BUILDER_CELL];
                  });
    [cell configureCellWithThirdPartyObject:self.items[indexPath.row]];
    return [cell heightForCellWithTableWidth:self.tableView.frame.size.width];
} 
```

我使用我的数据对象动态配置单元格，然后调用我拥有的一个方法，该方法计算具有给定表格宽度的单元格的高度（不能总是依赖最初正确的单元格框架）。

这反过来又在我看来调用了一个高度方法，因为它确实是标签所在的位置：

```
- (CGFloat)heightForCellWithTableWidth:(CGFloat)tableWidth {
    // subtract 38 from the constraint above
    return [self.thirdPartyAnswerView heightForViewWithViewWidth:tableWidth - 38];
} 
```

该方法通过计算出标签的正确宽度来确定高度，然后进行计算：

```
- (CGFloat)heightForViewWithViewWidth:(CGFloat)viewWidth {
    CGFloat widthForCalc = viewWidth - self.imageFrameLeadingSpaceConstraint.constant - self.thumbnailFrameWidthConstraint.constant - self.titleLabelLeadingSpaceConstraint.constant;
    CGSize size = [self.titleLabel.text sizeWithFont:self.titleLabel.font constrainedToSize:CGSizeMake(widthForCalc, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat returnHeight = self.frame.size.height - self.titleLabel.frame.size.height + size.height;
    CGFloat height = returnHeight < self.frame.size.height ? self.frame.size.height : returnHeight;
    return height;
} 
```

**这可以 100% 正确工作。**

单元格显然是在 cellForRowAtIndexPath 中创建并立即配置的：

```
if (self.items.count > 0) {
    TCAnswerBuilderCell *cell = [tableView dequeueReusableCellWithIdentifier:TC_ANSWER_BUILDER_CELL forIndexPath:indexPath];
    [cell configureCellWithThirdPartyObject:self.items[indexPath.row]];
    return cell;
} 
```

在单元格的配置中，我的视图是从笔尖加载的（它在其他地方被重新使用，这就是它不直接在单元格中的原因）。单元格将其添加如下：

```
- (void) configureCellWithThirdPartyObject:(TCThirdPartyObject *)object {
    self.detailDisclosureImageView.hidden = NO;
    if (!self.thirdPartyAnswerView) {
        self.thirdPartyAnswerView = [TCThirdPartyAPIHelper thirdPartyAnswerViewForThirdPartyAPIServiceType:object.thirdPartyAPIType];
        self.thirdPartyAnswerView.translatesAutoresizingMaskIntoConstraints = NO;
        [self.contentView addSubview:self.thirdPartyAnswerView];
        [self.contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[_thirdPartyAnswerView]-38-|" options:NSLayoutFormatAlignAllCenterY metrics:nil views:NSDictionaryOfVariableBindings(_thirdPartyAnswerView)]];
    }
    [self.thirdPartyAnswerView configureViewForThirdPartyObject:object forViewStyle:TCThirdPartyAnswerViewStyleSearchCell];
} 
```

最后我的视图配置如下所示：

```
- (void) configureViewForThirdPartyObject:(TCTPOPlace *)object forViewStyle:(TCThirdPartyAnswerViewStyle) style {
    self.titleLabel.text = object.name;
    self.addressLabel.text = [NSString stringWithFormat:@"%@, %@, %@", object.address, object.city, object.state];
    self.ratingsLabel.text = [NSString stringWithFormat:@"%d Ratings", object.reviewCount];
    NSString *ratingImageName = [NSString stringWithFormat:@"yelp_star_rating_%.1f.png", object.rating];
    UIImage *ratingsImage = [UIImage imageNamed:ratingImageName];
    if (ratingsImage) {
        self.ratingImageView.image = ratingsImage;
    }
    if (object.imageUrl) {
        [self.thumbnailImageView setImageWithURL:[NSURL URLWithString:object.imageUrl] completed:nil];
    }
} 
```

### 一种解决方案，但我不明白为什么

1.  我的子视图设计为 320 宽度，但没有自己的宽度限制
2.  子视图已添加到单元格中，但具有如下所示的水平约束：
    *   `@"|[_thirdPartyAnswerView]-38-|"`
3.  视图是在添加到单元格后立即配置的，这意味着 titleLabel 的文本是在那时设置的。
4.  无论出于何种原因，文本的布局好像视图具有完整的 320 而不是 282。
5.  标签从未更新，即使子视图的框架已更新为 282，并且标签上存在保持其大小正确的约束。
6.  将 xib 中的视图大小更改为 282 可以解决此问题，因为标签的开头大小正确。

**我仍然不明白为什么在父视图的大小更新后标签没有重新布局，因为它同时具有前导约束和尾随约束。**

# 解决了

请参阅下面的马特回答：[https ://stackoverflow.com/a/15514707/287403](https://stackoverflow.com/a/15514707/287403)

如果您没有阅读评论，主要问题是我`preferredMaxLayoutWidth`在设计宽度大于显示宽度的视图时（在某些情况下）是在不知不觉中通过 IB 设置的。`preferredMaxLayoutWidth`用于确定文本换行的位置。因此，即使我的 view 和 titleLabel 正确调整了大小，它`preferredMaxLayoutWidth`仍然是旧值，并导致在意外点处换行。将 titleLabel 设置为自动大小（IB 中的⌘=），并在调用 super 之前`preferredMaxLayoutWidth`动态更新 in是关键。`layoutSubviews`谢谢马特！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-20T03:22:08.520

我是一个编写了一个应用程序的人，该应用程序在表格中的一个单元格中使用五个标签的自动布局，其单元格具有不同的高度，其中标签根据其中的内容调整自身大小，并且确实有效。因此，我将建议您遇到问题的原因可能是您的约束未充分确定布局 - 也就是说，您的单元格元素布局不明确。我无法检验该假设，因为我看不到您的限制。`po [[UIWindow keyWindow] _autolayoutTrace]`但是您可以通过在调试器中暂停时使用来轻松检查（我认为） 。

另外我还有另一个建议（很抱歉只是向你扔东西）：确保你设置标签的`preferredMaxLayoutWidth`. 这很关键，因为它是标签停止水平增长并开始垂直增长的宽度。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-13T18:29:11.560

我遇到了同样的问题，并使用[此答案](https://stackoverflow.com/a/13616052/201828)中的建议解决了它。在 UILabel 的子类中，我放置了以下代码：

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    self.preferredMaxLayoutWidth = self.bounds.size.width;
} 
```

我不明白为什么这不是 UILabel 的默认行为，或者至少为什么不能通过标志启用此行为。

我有点担心在布局过程中设置了preferredMaxLayoutWidth，但我认为没有简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-20T13:58:58.197

此外，请检查您是否将整数传递给代码中的布局约束。

对我来说，经过一些计算（例如 convertPoint:toView:)，我传递了类似 23.99999997 的东西，最终这导致一个 2 行标签显示为单行标签（尽管它的框架似乎计算正确） . 就我而言，CGRectIntegral 成功了！

舍入错误可能会杀死你:)

# c++ - 按分隔符拆分字符数组，然后保存结果？

> ID：15513798
> 
> 赞同：1
> 
> 时间：2013-03-20T01:41:36.550
> 
> 标签：c++, c, delimiter, strtok, execvp

我需要能够在我的程序中解析以下两个字符串：

```
cat myfile || sort
more myfile || grep DeKalb 
```

字符串被保存在字符缓冲区 [1024] 中。我最终需要的是一个指向左侧的 char 数组的指针和一个指向右侧的 char 数组的指针，以便我可以使用它们为每一侧调用以下内容：

```
int execvp(const char *file, char *const argv[]); 
```

如果上面的两个字符串保存在字符缓冲区 char buffer[1024] 中，任何人都知道如何为 execvp 命令获取正确的参数；?

我需要 char *left 来保存左侧的第一个单词，然后 char *const leftArgv[] 来保存左侧的两个单词。然后我需要同样的东西来做正确的事情。我已经在 strtok 上玩了两个小时了，我正在碰壁。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:51:34.387

我建议您了解更多关于[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)的知识。为了轻松解决您的问题，您可以使用[Boost.Regex](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html)库，它提供了强大的正则表达式引擎。解决方案只是几行代码，但我鼓励你自己做——这将是一个很好的练习。如果您仍然有问题，请返回一些结果并明确说明您卡在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:11:17.737

您可以使用 std::getline(stream, stringToReadInto, demeter)。

我个人使用我自己的函数，其中包含一些附加功能，如下所示：

```
StringList Seperate(const std::string &str, char divider, SeperationFlags seperationFlags, CharValidatorFunc whitespaceFunc)
{
    return Seperate(str, CV_IS(divider), seperationFlags, whitespaceFunc);
}

StringList Seperate(const std::string &str, CharValidatorFunc isDividerFunc, SeperationFlags seperationFlags, CharValidatorFunc whitespaceFunc)
{
    bool keepEmptySegments     = (seperationFlags & String::KeepEmptySegments);
    bool keepWhitespacePadding = (seperationFlags & String::KeepWhitespacePadding);

    StringList stringList;

    size_t startOfSegment = 0;
    for(size_t pos = 0; pos < str.size(); pos++)
    {
        if(isDividerFunc(str[pos]))
        {
            //Grab the past segment.
            std::string segment = str.substr(startOfSegment, (pos - startOfSegment));
            if(!keepWhitespacePadding)
            {
                segment = String::RemovePadding(segment);
            }

            if(keepEmptySegments || !segment.empty())
            {
                stringList.push_back(segment);
            }

            //If we aren't keeping empty segments, speedily check for multiple seperators in a row.
            if(!keepEmptySegments)
            {
                //Keep looping until we don't find a divider.
                do
                {
                    //Increment and mark this as the (potential) beginning of a new segment.
                    startOfSegment = ++pos;

                    //Check if we've reached the end of the string.
                    if(pos >= str.size())
                    {
                        break;
                    }
                }
                while(isDividerFunc(str[pos]));
            }
            else
            {
                //Mark the beginning of a new segment.
                startOfSegment = (pos + 1);
            }
        }
    }

    //The final segment.
    std::string lastSegment = str.substr(startOfSegment, (str.size() - startOfSegment));
    if(keepEmptySegments || !lastSegment.empty())
    {
        stringList.push_back(lastSegment);
    }

    return stringList;
} 
```

其中 'StringList' 是***std::vector***的 typedef ，而 CharValidatorFunc 是一个函数指针（实际上是 std::function 允许仿函数和 lambda 支持），用于一个函数，该函数采用一个字符并返回一个布尔值。它可以像这样使用：

```
StringList results = String::Seperate(" Meow meow , Green, \t\t\nblue\n   \n, Kitties!", ',' /* delimeter */, DefaultFlags, is_whitespace); 
```

并会返回结果：{"Meow meow", "Green", "blue", "Kitties!"}

保留“喵喵”的内部空白，但删除变量周围的空格、制表符和换行符，并以逗号分隔。

（CV_IS 是一个仿函数对象，用于匹配特定字符或作为字符串文字的特定字符集合。我还有 CV_AND 和 CV_OR 用于组合字符验证器函数）

对于字符串文字，我只需将其放入 std::string() 中，然后将其传递给函数，除非需要极高的性能。打破分隔符很容易自己滚动 - 上述功能只是根据我的项目的典型用法和要求定制的，但您可以随意修改它并为自己声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:57:23.373

如果这让其他人感到悲伤，这就是我解决问题的方法：

```
//variables for the input and arguments
char *command[2];
char *ptr;
char *LeftArg[3];
char *RightArg[3];

char buf[1024]; //input buffer

//parse left and right of the ||
number = 0;
command[0] = strtok(buf, "||");

//split left and right
while((ptr=strtok(NULL, "||")) != NULL)
{
    number++;
    command[number]=ptr;
}

//parse the spaces out of the left side
number = 0;
LeftArg[0] = strtok(command[0], " ");

//split the arguments
while((ptr=strtok(NULL, " ")) != NULL)
{
    number++;
    LeftArg[number]=ptr;
}

//put null at the end of the array
number++;
LeftArg[number] = NULL;

//parse the spaces out of the right side
number = 0;
RightArg[0] = strtok(command[1], " ");

//split the arguments
while((ptr=strtok(NULL, " ")) != NULL)
{
        number++;
        RightArg[number]=ptr;
}

//put null at the end of the array
number++;
RightArg[number] = NULL; 
```

现在你可以在命令中使用 LeftArg 和 RightArg，在你得到正确的管道之后

```
execvp(LeftArg[0], LeftArg);//execute left side of the command 
```

然后管道到命令的右侧并执行

```
execvp(RightArg[0], RightArg);//execute right side of command 
```

# node.js - 如何在 Heroku 上的 Node express 应用程序中设置 proccess.env

> ID：15513800
> 
> 赞同：10
> 
> 时间：2013-03-20T01:41:41.517
> 
> 标签：node.js, mongodb, express

我有一个带有 mongo（通过 mongojs）应用程序的简单节点，该应用程序在本地开发并部署在 heroku 上。在我的开发环境中，我想使用 mongo 的本地实例，而在生产中，我想使用 heroku 通过“process.env.MONGOLAB_URI”提供给我的实例。

我目前的方法是我会根据环境变量设置 datavase url，但我如何*实际*进入生产模式？此外，我该如何配置它，以便当我在本地机器上开发它的开发模式时，当我上传到 heroku 它的生产模式时？

```
app.configure('production', function(){
  // ...
  databaseUrl = "mydb"; // the default
});

app.configure('development', function(){
  // ...
  databaseUrl = process.env.MONGOLAB_URI;
});

db = require("mongojs").connect(databaseUrl); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T02:58:03.940

在本地环境中将 NODE_ENV 环境变量设置为“开发”，在 Heroku 上将其设置为“生产”。[https://devcenter.heroku.com/articles/nodejs#setting-node-env](https://devcenter.heroku.com/articles/nodejs#setting-node-env)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T19:37:33.700

您还可以通过添加以下内容来启动您的应用程序，从而在本地访问您的在线数据库：

```
var mongoose = require( 'mongoose' );
var dbURI = 'mongodb://localhost/Loc8r';
if (process.env.NODE_ENV === 'production') {
    dbURI= process.env.MONGOLAB_URI;
}
mongoose.connect(dbURI); 
```

并使用“NODE_ENV=production nodemon bin/www”启动您的应用程序

# html - 在 chrome 中禁用页面缩放

> ID：15513801
> 
> 赞同：2
> 
> 时间：2013-03-20T01:41:48.003
> 
> 标签：html, google-chrome, zooming

对于 HTML 游戏，我想禁用 Chrome 中的正常缩放功能。

[这个问题](https://stackoverflow.com/questions/13322364/how-to-disable-zoom-in-chrome-on-android)讨论了如何使用`viewport`元标记在 Android 上禁用 Chrome 中的缩放，但这似乎不适用于普通桌面 chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:55:13.677

虽然这不能回答我最初的问题（我询问了 Chrome 中显示的页面），但我只是想记录一下[Chromium](http://en.wikipedia.org/wiki/Chromium_%28web_browser%29)（Chrome 背后的 OSS）似乎有一个标志来控制它是否支持视口元标记：

```
// Enables the use of the viewport meta tag, which allows
// pages to control aspects of their own layout. This also turns on touch-screen
// pinch gestures.
const char kEnableViewport[]                = "enable-viewport"; 
```

[（来源： http](http://src.chromium.org/svn/trunk/src/content/public/common/content_switches.cc) ://src.chromium.org/svn/trunk/src/content/public/common/content_switches.cc ）

因此，如果将游戏打包到自己的 chromium 实例中是一种选择（在我的情况下很可能），则可以通过视口元标记禁用缩放。

# php - 在 MVC 环境中使用 ORM 是否有充分的理由？

> ID：15513803
> 
> 赞同：1
> 
> 时间：2013-03-20T01:42:02.683
> 
> 标签：php, mysql, orm

在使用了有或没有 ORM 的框架后，在我看来，ORM 是模型和数据库包装器之间的冗余抽象层。

大多数框架都有针对不同数据库软件的统一数据库包装器，因此更改软件通常不需要更改代码。

有任何真正的理由使用 ORM 吗？这似乎只是添加了一个不必要的步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:50:27.663

有两件事... ORM 是对象关系映射，即将对象和对象类型映射到数据库，不一定要为后端提供统一的 DAL（数据库抽象层）。因此，您似乎主要使用 DAL 而不是 ORM。在我工作的地方，我们使用 ORM 将作业映射到渲染农场，这使我们能够在任意数量的应用程序中访问这些相同的基本对象，而无需以硬格式（数据库除外）存储数据。当您需要以与应用程序无关的方式访问数据并以相同的形式在许多其他应用程序中共享数据时，它非常有用。啰嗦，我知道——希望这会有所帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:48:44.073

ORM 的目的是帮助开发人员避免编写大量重复的代码来将查询结果集列映射到对象字段，并在将更改的数据保存到数据库时再次返回。

换句话说，ORM 主要是为了开发人员的生产力。

另请参阅[为什么要使用 ORM？](https://stackoverflow.com/questions/448684/why-should-you-use-an-orm/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T01:50:02.207

使用 ORM 的主要原因与非功能性需求有关，这是您需要在不同的 RDBMS（Oracle、MySQL、PostgreSQL）之间移植您的应用程序并减少实施的影响。

如果您不打算在 RDBMS 之间进行更改，那么您可能不需要 ORM，并且您正在将一些复杂性和开销汇总到您的应用程序中

# php - 如何使用 $_SESSION 强制注销

> ID：15513804
> 
> 赞同：2
> 
> 时间：2013-03-20T01:42:03.393
> 
> 标签：php, session, authentication

当用户在我的网站上成功通过身份验证时，我将他们的用户 ID 存储在会话中：`$_SESSION['user_id']`

然后我在整个站点中使用它来检查用户是否可以执行某些操作。例如

```
if(isset($_SESSION['user_id'])){
    //User is logged in, allow the following.
    ...
}

...

if ( $_SESSION['user_id'] == $comment_user ) {
    //User owns the comment, go ahead and delete it.
    ...
} 
```

但是，如果我发现登录用户有恶意目的，我该如何终止他们的登录会话，以便他们无法执行这些安全操作？

要阻止用户，我可以在数据库上使他们的登录详细信息无效，或者将他们添加到在身份验证时检查的阻止列表中，以便他们不再进行身份验证。***但是，这只会在他们下次尝试登录时生效。只要当前会话保持活动状态并且他们的用户 ID 存储在会话中，他们就被认为是经过身份验证的。***

1.  有没有办法取消设置特定会话，强制注销？如何？
2.  如果没有，确保被阻止的用户无法继续访问网站上的安全区域的最佳方法是什么？例如，我唯一的想法不仅仅是检查`if(isset($_SESSION['user_id']))`，还可以添加额外的检查以确保 user_id 没有被添加到数据库上的“被阻止的用户”列表中。我只是不喜欢每次执行某些操作时都会发出另一个数据库请求来检查用户是否进入了阻止列表。尤其是因为阻止用户的情况很少见。有没有办法在不去数据库的情况下检查用户是否被阻止？

谢谢！

**编辑**

到目前为止，大多数答案都解决了如何取消/销毁会话，或如何阻止用户下次登录尝试。我想剩下的唯一问题是如何检查用户当前登录时是否被阻止。有没有一种方法可以做到这一点，而无需每次用户执行时都去数据库检查“被阻止的用户”列表一种行为。这与我的主要问题有关，上面用***粗斜体表示***。如果用户被阻止，那么我可以立即销毁会话（强制注销）并且他们也将被阻止再次进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:47:35.150

当使用会话进行身份验证时，传统上是使用用户名和存储为会话变量的某种散列密码来完成的。这是一个很好的资源：[php sessions to authenticate user on login form](https://stackoverflow.com/questions/1243150/php-sessions-to-authenticate-user-on-login-form)

结束用户的会话：

通过您的设置，您可以简单地删除用户的会话变量以结束他们的会话

```
unset($_SESSION['user_id']); 
```

或者您可以像这样简单地结束会话：

```
session_destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:52:38.060

如果您知道用户 ID，则始终可以执行以下操作：

```
$maliciousUsers = array(1,3,19,24);

if(in_array($_SESSION['user_id'], $maliciousUsers)){
    @session_destroy();
} 
```

我会将`$maliciousUsers`数组作为数据库中的表来处理。这样，如果您看到发生了什么事，将他们的 ID 扔到表中，它就会被反映。如果他们能够验证并接收到`$_SESSION['user_id']`then，这将破坏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:00:02.970

我倾向于在会话表中放入自毁。在他们下次登录时，应用程序会检查这一点。

```
if (!!$_SESSION['data']['self_destruct'])
{
    session_destroy();
    header('Location:/');
    exit;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:03:27.580

假设您正在使用数据库，将会话标识符存储在其中并禁止他们将来登录，那么实现此目的的最简单方法是*另外*从文件系统中删除他们的会话文件。

**查找会话文件**

PHP 会话通常存储在`/temp`or `/tmp`or`/var/lib/php5/`目录中（它会有所不同） - 尽管**默认** [`session.save_path`](http://de3.php.net/manual/en/session.configuration.php#ini.session.save-path)设置为`""`，但您可以使用以下方法设置位置：

```
session_save_path('/path/to/session/dir'); 
```

甚至在您的`.htaccess`文件中：

```
php_value session.save_path /path/to/session/dir/ 
```

**会话文件的存储方式**

会话文件在文件系统中带有前缀`sess_`：

```
-rw-------  1 www-data www-data    0 2013-04-19 05:39 sess_141d2215ce74452ea6b1f69eea228159 
```

其中，在上面的示例中包含：

```
AutoLogout|s:4:"3600";FirstName|s:4:"John";Lang|s:2:"en";LastLogin|s:19:"2013-04-19 17:26:18";LastName|s:8:"Smith";RegDate|s:19:"2012-11-12 17:18:13";TimeOut|i:1366421178;UserEmail|s:22:"johnsmith@domain.com";UserId|s:1:"3";authenticatedUser|s:22:"johnsmith@domain.com";year|s:4:"2013"; 
```

只要您有他们的 ID 记录（假设在您的数据库中），您就可以通过编程方式删除它们。

**使用 PHP 立即删除会话文件**

PHP 提供了删除文件的能力[`unlink()`](http://php.net/manual/en/function.unlink.php)，因此，当禁止用户并阻止他们登录（将来）时，您还可以通过将类似这样的内容附加到您的禁止功能或创建即时踢功能来立即禁止他们，使用类似的东西：

```
$sessionID = 'sess_'.$sessionIdFromDB;
$sessionDir = '/path/to/session/dir'; // Wherever your sessions are stored
unlink($sessionDir."/".$sessionID); 
```

但是，此技术假定您有权删除相关会话文件。如果您不这样做，那么您将需要调整文件权限或使用[`chown()`](http://php.net/manual/en/function.chown.php)和/或[`chmod()`](http://www.php.net/manual/en/function.chmod.php)或在您的文件系统上更改它们。

**手动删除**

您还可以使用终端手动删除会话文件。虽然这看起来毫无意义，但我曾经看到它在过去用于在执行特定业务之前立即将所有用户踢出：

```
//SSH
cd /path/to/session/dir
rm -rf sess_* 
```

一旦执行，它会使所有用户会话无效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-20T02:32:09.623

> 有没有办法取消设置特定会话，强制注销？如何？

最好执行快速注销

> ```
> May be late but commented 
> ```

//相应地改变！

```
function doLogout()
{
        //clear session from globals
        $_SESSION = array();
        //clear session from disk
        session_destroy();
        //delete the session cookie using setcookie.
        $cookieParams = session_get_cookie_params();
        setcookie(session_name(), '', 0, $cookieParams['path'], $cookieParams['domain'], $cookieParams['secure'], $cookieParams['httponly']);
        //unset the session variable
        unset($_SESSION);
        doBlock();   

}

    function doBlock()
        {               

     //Start and Set Blocking session ,presence of it must be 
    //validated at first on any secure Areas Entrance   , 
   //it may not be secure if Session is Cleared by end Mal User) ,
  // if extreme   security is needed  then
 //Ugly block Remote IP is needed //(12-24 hr) Block

 } 
```

您的 Quest 可能有重复项：[完全销毁会话的最佳方法 - 即使浏览器未关闭](https://stackoverflow.com/questions/3948230/best-way-to-completely-destroy-a-session-even-if-the-browser-is-not-closed)
[如何从 PHP 会话数组中删除变量](https://stackoverflow.com/questions/2231332/remove-a-variable-from-a-php-session-array)

# sql-server - 更改数据捕获错误

> ID：15513808
> 
> 赞同：5
> 
> 时间：2013-03-20T01:42:29.467
> 
> 标签：sql-server, sql-server-2012, cdc, change-data-capture

我试图通过传递最小和最大日期来获得启用 CDC 的表的净变化。但是抛出错误。

```
Msg 313, Level 16, State 3, Line 24
An insufficient number of arguments were supplied for the procedure or function cdc.fn_cdc_get_net_changes_ ... . 
```

我的代码如下：

```
DECLARE @CDate DATE = '2013-03-18' --This is the date after the CDC was enabled on the table
DECLARE @count INT;
DECLARE @lsnStartDatetime DATETIME;
DECLARE @lsnEndDateTime DATETIME;

DECLARE @begin_time DATETIME ,
@end_time DATETIME ,
@from_lsn BINARY(10) ,
@to_lsn BINARY(10);

SELECT  @lsnStartDatetime = CAST(CAST(@CDate AS NVARCHAR(10)) + ' 00:00:00' AS DATETIME)
SELECT  @lsnEndDateTime = CAST(CAST(@CDate AS NVARCHAR(10)) + ' 23:59:59' AS DATETIME)

SET @from_lsn = sys.fn_cdc_map_time_to_lsn('smallest greater than or equal',
                                       @lsnStartDatetime);
SET @to_lsn = sys.fn_cdc_map_time_to_lsn('largest less than or equal',
                                     @lsnEndDateTime);

if exists (select * from sys.objects where name = 'EmployeeCDCbyDate' and type = 'u')
drop table etl.EmployeeCDCbyDate
SELECT  *
FROM    cdc.fn_cdc_get_net_changes_employee(@from_lsn, @to_lsn, N'all') 
```

从 sys.fn_cdc_map_time_to_lsn 获取的 from_lsn 和 to_lsn 是否与 cdc 表“员工”不匹配？

下面的代码工作正常；但它会从 min max lsn 获得所有净变化。

```
DECLARE @min_lsn BINARY(10) = sys.fn_cdc_get_min_lsn ('employee')
DECLARE @max_lsn BINARY(10) = sys.fn_cdc_get_max_lsn ()
SELECT * FROM cdc.fn_cdc_get_net_changes_employee(@min_lsn, @max_lsn, 'all') ORDER BY 1 desc 
```

我需要的是获取给定日期的 cdc 实例的最小和最大 lsn，并获取该日期的净变化。有什么线索吗？

**编辑：**

当我在一堆表上启用时，这适用于第一个表。

前任：

```
USE ERP

EXEC sys.sp_cdc_disable_db
EXEC sys.sp_cdc_enable_db

EXEC sys.sp_cdc_enable_table @source_schema = N'dbo', 
@source_name = N'Employee', 
@capture_instance = 'Employee', 
@supports_net_changes =1, 
@role_name = NULL  

EXEC sys.sp_cdc_enable_table @source_schema = N'dbo', 
@source_name = N'StoreListing', 
@capture_instance = 'StoreListing', 
@supports_net_changes =1, 
@role_name = NULL

Go 
```

这适用于 Employee 表。如果我更改启用 CDC 的顺序（如果我将商店列表放在首位，然后将员工放在下一个），那么它适用于员工列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T22:19:17.713

MSDN Social 上有一个类似问题的答案： [Is there bug with cdc.fn_cdc_get_net_changes_.... in SQL Server 2012](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/2629a56c-0f77-454f-aa02-7897b18d48da/)。

它被标记为由主持人回答。这是报价：

> 我在我的服务器上进行了测试。当我在 SQL Server 2008 R2 中运行脚本时，它可以成功运行而没有错误。
> 
> 当我在 SQL Server 2012 中运行脚本时，错误消息与您的相同。我认为您可以尝试应用最新的 SQL Server 2012 Service Pack 以查看是否可以。

[这是微软的错误报告。](http://connect.microsoft.com/SQLServer/feedback/details/782085/is-there-bug-with-cdc-fn-cdc-get-net-changes-in-sql-server-2012)它正在调查中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T16:04:24.587

我收到了这条消息，原因是我有我的起始 LSN 和结束 LSN 号码

我更详细地回答了[https://stackoverflow.com/a/30920333/98802](https://stackoverflow.com/a/30920333/98802)

# visual-studio-2010 - Visual Studio - 根据打开文件类型的窗口布局

> ID：15513811
> 
> 赞同：3
> 
> 时间：2013-03-20T01:42:49.110
> 
> 标签：visual-studio-2010, visual-studio, layout, window

在 Visual Studio 中，是否可以根据打开（刚刚查看）的文件类型设置窗口布局？

例如，当我设计一个图形用户界面时，因此我编辑了一些*xaml*文件，我希望显示*属性窗口*，但是当我编辑任何其他文件时，例如一些*cs*文件，我不使用该属性窗口，所以我不希望此时显示属性窗口。

换句话说，Visual Studio 中的窗口布局可以是“特定于文件类型的”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:18:40.187

我不知道根据当前打开/正在编辑的文件类型自动更改窗口布局。

它不是自动的，但是，如果您还没有，您可以尝试[Layouts O Rama](http://visualstudiogallery.msdn.microsoft.com/35966ad9-430f-4ad7-9186-4394b784e36c)或[Perspectives](http://visualstudiogallery.msdn.microsoft.com/d446d9d3-4994-4d78-853d-f266b0bfd4ec)。我在使用 Perspectives 时遇到了一些问题（一直丢失我保存的窗口布局），但 Layouts O Rama 对我来说效果很好。您可以将布局设置为键盘快捷键，虽然这不是自动的，但您可以将（例如）Tools.LoadWindowsLayout1 映射到显示属性窗口的布局，将 Tool.LoadWindowsLayout2 映射到隐藏它的布局，然后简单地通过按快捷键在它们之间切换。

# c++ - Array2 的变化对 Array（表）有影响

> ID：15513812
> 
> 赞同：1
> 
> 时间：2013-03-20T01:42:55.540
> 
> 标签：c++, arrays

我的桌子有点问题。

```
 int najmniejszy_dzielnik(int m){
                cout<<"Array["<<m<<"] = "<<Array[m]<<endl;
                return Array[m];
    }

    int* czynniki_pierwsze(int m){
            int temp, size, i, helper;
            for(temp=m, i=1; 1 < temp; i++){
                helper=najmniejszy_dzielnik(temp);
                cout<<"test1, array[5] = "<<Array[5]<<endl;

                Array2[i]=helper; //------------------------------problem here
                cout<<"test2, array[5] = "<<Array[5]<<endl;

                temp/=helper;
                cout<<"test3, array[5] = "<<Array[5]<<endl;

                }
                Array2[0]=i;
                return Array2;
    } 
```

这段代码给了我错误的结果，所以我创建了 cout“test1”、“test2”和“test3”，我发现了这个：

```
Array[225] = 3
test1, array[5] = 5
test2, array[5] = 5
test3, array[5] = 5
Array[75] = 3
test1, array[5] = 5
test2, array[5] = 3
test3, array[5] = 3 
```

更改值对`Array2[i]`有影响`Array[ ]`。

这是怎么发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:15:05.913

造成这种影响的原因是 Array[ ] 和 Array2[ ] 使用了相同的堆栈。我应该使用指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:48:38.553

你写了：

```
 for(temp=m, i=1; 1 < temp; i++) 
```

是不是意味着：

```
 for(temp=m, i=1; i < temp; i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:30:58.810

实际上，您的代码似乎没有任何问题。请在此处查看[http://codepad.org/igdzwNnE](http://codepad.org/igdzwNnE)。可能是外部函数同时编辑“数组”

# excel - 如何根据今天的日期更改 ROW 的 BG 颜色

> ID：15513821
> 
> 赞同：0
> 
> 时间：2013-03-20T01:43:32.703
> 
> 标签：excel

两部分问题。我有一个 COL，即 F col，我以`02/16/13`. 在 K COL 中，我想自动插入`03/16/13`同一行（提前 30 天）。

在电子表格的顶部，我在打开时插入 TODAY 日期。如果 TODAY 日期等于或晚于 COL K 中的日期，我希望整个 ROW bg 颜色发生变化。

我厌倦了条件格式，但我不确定语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:50:38.490

对于日期格式，您可以执行类似`=(Today()>=K1)`的操作，然后设置格式规则并将格式复制/粘贴到整个 K 列。

对于 K 列中的日期插入，在 K1 中输入公式：`=F1+30`然后将该公式向下拖动到整个 K 列。

您还可以使用工作表代码模块中的宏在 K 列中插入日期：

```
Private Sub Worksheet_Change(byVal Target as Range)
If Not Intersect(Target,Range("F:F")) Is Nothing Then Exit Sub
    Target.Offset(0,5).Value = DateAdd("d", 30, Target.Value)
End If
End Sub 
```

# jquery - 单击按钮更改 ShareThis 标题

> ID：15513822
> 
> 赞同：0
> 
> 时间：2013-03-20T01:43:43.683
> 
> 标签：jquery, share, sharethis

我正在使用 span 标签在按钮单击时将 sharethis 按钮加载到 fancybox 中：

```
<div style="display:none">
    <div class="social-share">
        <span class='st_facebook_vcount' displayText='Facebook'></span>
        <span class='st_twitter_vcount' displayText='Tweet'></span>
        <span class='st_pinterest_vcount' displayText='Pinterest'></span>
    </div>
</div> 
```

我的问题是：

如何根据单击的按钮更改 st_title 或设置共享内容的标题。例如，我的页面基本上每个帖子都有一个分享按钮，所以如果我想制作一个这样的按钮：

```
 <a class="share-btn" href="#" data-title="First Post">Share This</a> 
```

然后尝试在这里做一些事情：

```
 $('a.share-btn').on('click', function(e){
      //Change shared title

      //launch fancybox containing share <span>'s mentioned above
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T01:45:17.553

您可以通过 data() setter 方法设置标题。

```
$('a.share-btn').on('click', function(e){
      e.preventDefault();
      var titletext='some title';
      $(this).data('title',titletext);
 } 
```

# c# - 如何在asp.net网站中编写页面白名单

> ID：15513827
> 
> 赞同：0
> 
> 时间：2013-03-20T01:44:10.723
> 
> 标签：c#, asp.net

我有一个网站，作为安全选项之一（防止路径遍历），我计划使用可以访问的页面白名单。但我的问题是我不知道该怎么做。你能分享一些如何创建白名单的文章或简单的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:51:53.307

如果我正确理解了这个问题，您希望允许某些用户访问您网站上的某些页面 - 您是否考虑过 ASP.NET 安全修整？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:06:23.527

该网站有多少页？如果没有太多页面并且页面不经常添加/删除，您可以手动创建页面列表。如果您使用母版页，您可以在 Page_Load 方法中进行设置。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            Dictionary<string,string> allowedUrls = LoadAllowedURLs();

            if (!allowedUrls.ContainsKey(Request.Path))
            {
                Response.Redirect("Some_default_redirect_page.aspx");   
            }
        }

    } 
```

现在，如果您确实有很多页面，您将需要更复杂的解决方案，使用 web.config 等等……</p>

# runtime-error - 升级 pip 后出现 DistributionNotFound 错误

> ID：15513840
> 
> 赞同：10
> 
> 时间：2013-03-20T01:45:08.447
> 
> 标签：runtime-error, pip, traceback

[在这里](http://www.virtualenv.org/en/latest/index.html)阅读有关 virtualenv时，我意识到我没有 pip 1.3+，所以我跑了`pip install --upgrade pip`，现在当我运行时，`pip --version`我得到以下信息：

```
Traceback (most recent call last):
  File "/usr/local/bin/pip", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.34-py2.7.egg/pkg_resources.py", line 2807, in <module>
    parse_requirements(__requires__), Environment()
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.34-py2.7.egg/pkg_resources.py", line 594, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: pip==1.2.1 
```

如果它有帮助，或者完全相关，我的`$PATH`样子是这样的：

```
/usr/local/bin:/usr/local/share/python:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin 
```

另外，`which pip`给我`/usr/local/bin/pip`.

不知道如何处理该错误。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T08:40:33.580

### 残酷的方式：

假设您使用的是 Mac 的自制软件（因为我看到 /usr/local/Cellar），我建议

*   删除（或备份）`/usr/local/lib/python2.7`，和
*   `brew rm python && brew install python`.

这肯定会在 python 旁边安装 pip 1.3.3。您的分发也将是 0.6.35。

### 软方式：

从`/usr/local/lib/python2.7/site-packages`刚刚删除：

*   `easy-install.pth`
*   `pip-1.2.1-py2.7.egg` *或您拥有的其他版本的 pip。*
*   `distribute-0.6.34-py2.7.egg` *或其他版本*

那么，`brew rm python && brew install python`。这将使 brew 和已安装的所有其他绑定保持不变。Python、pip 和distribute 将被最新版本取代。

### 此外：

请检查您是否没有位于`/Library/Python/2.7/site-packages`. 该目录被所有 python 2.7 版本（酿造或来自 OS X）重用，并且会干扰 Homebrew 已经安装的 pip/distribute。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-02T14:38:42.787

今天从 OS X Lion 升级到 Mountain Lion 后，我碰巧遇到了类似的状态。

其他提议的解决方案要么不起作用，要么用 brew 版本替换 Apple 版本的 Python，我不确定这是 saclark 要求的。

我所做的修复它是`distribute`手动安装，从而`easy_install`恢复工作，然后安装`pip`它。

命令是：

```
$ curl -O http://pypi.python.org/packages/source/d/distribute/distribute-0.6.45.tar.gz
$ tar -xzvf distribute-0.6.45.tar.gz
$ cd distribute-0.6.45
$ sudo python setup.py install
$ sudo easy_install pip 
```

如果链接不起作用，您始终可以[在此处](https://pypi.python.org/pypi/distribute)找到更新版本的分发。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-08T01:45:23.280

我今天遇到了类似的问题。经过一番研究，我通过使用以下方法重新安装 pip 来解决它：-

```
python -m pip install --upgrade --force-reinstall pip 
```

希望有人会觉得它有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-04T06:44:29.177

顺便说一句，有一种更简单的方法可以做到这一点（我刚遇到这个）。

编辑`/usr/local/bin/pip`并更改对版本号的引用（因此，您希望在下面将“1.5.6”更改为您正在使用的任何版本号）：

```
#!/usr/local/opt/python/bin/python2.7
# EASY-INSTALL-ENTRY-SCRIPT: 'pip==1.5.6','console_scripts','pip'
__requires__ = 'pip==1.5.6'
import sys
from pkg_resources import load_entry_point

if __name__ == '__main__':
    sys.exit(
        load_entry_point('pip==1.5.6', 'console_scripts', 'pip')()
    ) 
```

那么你可能会在这一点上做得很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-29T23:57:02.097

我想知道在哪里需要 pip 1.2.1，但我没有太多时间......所以我只是将 pip 降级到 1.2.1。暂时无能为力，直到修改 pip 或分发包。

这该怎么做？只需在控制台中输入这个（我希望你的分发包很好）：

```
easy_install pip==1.2.1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-24T14:26:03.787

无需卸载 python 并重新安装。安装最新的分发包，然后用它更新 pip 应该可以解决问题。

```
wget https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py
sudo python ez_setup.py
sudo easy_install -U pip 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-28T03:57:30.313

### 分两步修复现代版本（6.x）pip 的正确方法

1.  删除`pip`Python 的`site-package`. 对于 Homebrew Python 2.7，请执行以下操作：

    ```
    rm -r /usr/local/lib/python2.7/site-packages/pip 
    ```

2.  按照官方文档站点上的[说明重新安装它。](https://pip.pypa.io/en/latest/installing.html)`pip`简而言之：

    ```
    curl -O https://bootstrap.pypa.io/get-pip.py
    python get-pip.py 
    ```

对于`pip`6.x，无需安装旧`distribute`包。Just `setuptools`，默认情况下将通过上述`get-pip.py`脚本安装。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T15:44:00.113

嗯..令人费解。想知道 1.2.1 是从哪里来的。只是出于好奇，您可以发布/usr/local/bin/pip 的内容吗？应该只有几行。

您可以尝试使用分发更新 pip（再次），也可以自行分发..

```
easy_install --upgrade distribute
easy_install --upgrade pip 
```

# c# - 创建循环而不是重复 if 语句

> ID：15513843
> 
> 赞同：1
> 
> 时间：2013-03-20T01:45:22.257
> 
> 标签：c#, for-loop, while-loop

我很难解决这个问题，并希望对此有所了解。因此，我正在阅读一份扫描的 PDF 文档，其中包含一个二维码，该二维码始终位于文档的左上角。

由于扫描文件可能会改变文档的方向，我正在检查文档的左上角是否有二维码，如果没有，我将旋转文档并再次检查左上角。这样做的目的是因为 QR 码位于左上角，那么文档的格式符合我的要求。

如何更改我的以下代码以获取 QR 码的文档检查 - 如果未找到，请再次旋转整个文档检查并继续直到找到 QR 码。我也应该循环旋转 90 而不是 90 - 180 - 270。

```
using (var fullImg = new Bitmap(workGif))
{
    var bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
    Bitmap result = fullImg;
    if (Process(bandImg) == null)
    {
        fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone);
        bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, result.Width, result.Height), fullImg.PixelFormat);
        if (Process(bandImg) == null)
        {
            fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone);
            bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, result.Width, result.Height), fullImg.PixelFormat);

            if (Process(bandImg) == null)
            {
                fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone);
                bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, result.Width, result.Height), fullImg.PixelFormat);
            }
         }
    }
    bandImg.Save(@"C:\NewImageTest.png");
    string QRinfo = Process(bandImg);
    MessageBox.Show(QRinfo);
} 
```

**处理方法** 我在这个方法中通过图片来查看是否有二维码可以读取。

```
public string Process(Bitmap bitmap)
{
    var reader = new com.google.zxing.qrcode.QRCodeReader();

    try
    {
        LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
        var binarizer = new HybridBinarizer(source);
        var binBitmap = new BinaryBitmap(binarizer);
        return reader.decode(binBitmap).Text;
    }
    catch (Exception e)
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:49:49.567

像这样的东西不适合你吗？文档只有四种可能的方向，因此您最多必须循环四次。每个循环将图像旋转 90 度。一旦确定 QR 码位于左上角，您就可以`break`退出循环。然后你可以处理二维码或用它做任何你想做的事情。

```
public void Do(string workGif)
{
    // ...
    string qrInfo;
    using (var fullImg = new Bitmap(workGif))
    {
        for (int i = 0; i < 4; i++)
        {
            // Does the image contain a QR code?
            qrInfo = Process(fullImg);
            if (qrInfo = null)
                // No QR code found. Rotate the image.
                fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone);
            else
                // QR code found. Break out of the loop.
                break;
        }
        if (qrInfo == null)
        {
            throw new InvalidOperationException(
                "The document contains no QR code.");
        }
    }
    MessageBox.Show(qrInfo);
    // ...
} 
```

您可以将获取源图像的​​角图像的代码移动到`Process`方法中。

```
private Image GetCornerImage(Image sourceImage)
{
    return sourceImage.Clone(new Rectangle(0, 0, 375, 375), sourceImage.PixelFormat);
}

public string Process(Bitmap bitmap)
{
    var cornerImg = GetCornerImage(bitmap);

    var reader = new com.google.zxing.qrcode.QRCodeReader();
    LuminanceSource source = new RGBLuminanceSource(
        cornerImg, cornerImg.Width, cornerImg.Height);
    var binarizer = new HybridBinarizer(source);
    var binBitmap = new BinaryBitmap(binarizer);
    return reader.decode(binBitmap).Text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:53:02.563

这应该可以正常工作；

```
using (var fullImg = new Bitmap(workGif))
{
    var bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
    int i = 0;
    while(Process(bandImg) == null)
    {
        if (i == 1)
            fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone);
        else if (i == 2)
            fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone);
        else if (i== 3)
            fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone);

            /*
                 Another way in which Rotation Degree can be done
                 First time it rotate by 270, then by 180 & then by 90
                 int i must be initialized with 1
                 int degree_to_rotate = 360 - ((4 - i) * 90)
            */

        bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, result.Width, result.Height), fullImg.PixelFormat);
        i++;
    }
    bandImg.Save(@"C:\NewImageTest.png");
    string QRinfo = Process(bandImg);
    MessageBox.Show(QRinfo);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:49:24.270

如果您在每次轮换中都进行相同的检查，则没有理由不使用循环。只要确保您跟踪执行的旋转次数，否则您将陷入无限循环。

# ios - 给定当前时间 NSDate，更改为午夜并在 iOS / Objective-C 中返回 UNIX 时间

> ID：15513850
> 
> 赞同：-3
> 
> 时间：2013-03-20T01:45:57.367
> 
> 标签：ios, objective-c

给定用户本地时区当前时间的 NSDate 对象，如何将其更改为午夜并在 00:00 返回 UNIX 时间（自纪元以来的秒数）。

例如，如果当前日期和时间是 2013 年 3 月 20 日下午 12:42，给定我有一个代表这一时刻的 NSDate 对象，我如何获得 1363737600（2013 年 3 月 20 日 00:00:00）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:09:37.543

一种选择是获取自 1970 年以来的时间间隔，然后对结果进行四舍五入。

```
time_t unixInterval = [someData timeIntervalSince1970];
time_t unixDate = unixInterval / (24*60*60) * (24*60*60); 
```

只要你用整数类型做第二行，你就会得到想要的结果。

# python - sqlite3.Warning：一次只能执行一条语句

> ID：15513854
> 
> 赞同：26
> 
> 时间：2013-03-20T01:46:21.260
> 
> 标签：python, sqlite

运行此代码时出现错误：

```
import sqlite3

user_name = raw_input("Please enter the name: ")
user_email = raw_input("Please enter the email: ")

db = sqlite3.connect("customer")
cursor=db.cursor()

sql = """INSERT INTO customer
        (name, email) VALUES (?,?);, 
        (user_name, user_email)"""

cursor.execute(sql) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-04-29T16:52:22.680

虽然其他海报对您的语句格式是正确的，但您收到此特定错误，因为您试图在一个查询中执行多个语句（注意 ; 在您的查询中分隔语句）。

来自 Python sqlite3 文档：

> “execute() 只会执行一条 SQL 语句。如果您尝试使用它执行多个语句，它将引发警告。如果您想通过一次调用执行多个 SQL 语句，请使用 executescript()。”

[https://docs.python.org/2/library/sqlite3.html](https://docs.python.org/2/library/sqlite3.html)

现在，即使您使用 executescript()，您的语句也不会正确执行，因为它的格式化方式存在其他问题（请参阅其他发布的答案）。但是您收到的错误特别是由于您的多个陈述。我正在为其他可能在搜索该错误后徘徊在这里的其他人发布此答案。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-01-15T08:15:45.250

使用`executescript`代替`execute`

> execute() 只会执行一条 SQL 语句。如果您尝试使用它执行多个语句，它将引发警告。如果要一次调用执行多个 SQL 语句，请使用 executescript()。

[https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute](https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-20T01:55:43.860

您`;,`在查询字符串的中间有一个 - 这是一个无效的语法。`execute`如果要使用命名参数绑定，请将字典作为第二个参数传递给。

```
sql = "INSERT INTO customer (name, email) VALUES (:name, :email)"
cursor.execute(sql, {'name':user_name, 'email':user_email}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-11T16:47:46.857

试试这个：

```
sql = """INSERT INTO customer
    (name, email) VALUES (?,?)"""

cursor.execute(sql, (user_name, user_email)) 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2020-01-08T23:52:21.107

```
import sqlite3
def DB():    
    List = {"Name":"Omar", "Age":"33"}

    columns = ', '.join("" + str(x).replace('/', '_') + "" for x in List.keys())     
    values = ', '.join("'" + str(x).replace('/', '_') + "'" for x in List.values())

    sql_qry = "INSERT INTO %s ( %s ) values (?,?) ; ( %s )" % ('Table Name', columns, values)

    conn = sqlite3.connect("DBname.db")
    curr = conn.cursor()
#     curr.execute("""create table if not exists TestTable(
#                         Name text, 
#                         Age text
#                         )""")

#     print columns
#     print values
#     print sql

    #     sql = 'INSERT INTO yell (Name , Age) values (%s, %s)'
    curr.execute(sql_qry)    
DB() 
```

# android - Android：停止可运行并重新启动它

> ID：15513858
> 
> 赞同：1
> 
> 时间：2013-03-20T01:46:35.597
> 
> 标签：android, runnable

我刚刚实现了一个简单的应用程序，它随机改变屏幕颜色并在文本视图中显示颜色的十六进制代码。经过大量搜索（尤其是 stackoverflow 上的许多帖子），我几乎有了可以满足我需求的代码；只有一个差异。当我单击以重新启动可运行的颜色闪烁时，它会从停止的位置“恢复”，即它最初不会完全延迟，但似乎只会延迟我停止它时可能停止的时间。

我的完整代码如下。目前，我有一个短按启动屏幕颜色闪烁运行，并长按停止它。

```
package com.example.colorflashingproject;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.os.Handler;
import android.widget.TextView;

public class MainActivity extends Activity {

//initialize a boolean variable (true or false only) 
//to check whether the overlay is tinted or not
boolean isTinted = false;
boolean colorIsFlashing = false;

//initialize a handler that we will use to loop a section of code
//that constantly changes the color of the screen
public Handler mHandler = new Handler();

//this creates the UI and screen view, and sets up some
//other aspects of the program
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //set the current view in the user interface as our xml file:
    setContentView(R.layout.activity_main);

    //set the background color, and the initial overlay tint:
    ((View)findViewById(R.id.background_view)).setBackgroundColor(0xFF000000);
    ((View)findViewById(R.id.overlay_view)).setBackgroundColor(0x00000000);

    //create the overlayView variable that replesents our overlay for tinting
    View overlayView = findViewById(R.id.overlay_view);

    //implement a method that will listen for a short press
    overlayView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //implement function to change tint of our overlay
            if (!colorIsFlashing) {
                colorIsFlashing = true;
                mHandler.post(startColorFlashing);
            } else {

            }
        }
    });     

    //implement a method that will listen for long press:
    overlayView.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {

            //stop the color flashing if it was started:
            if (colorIsFlashing) {
                colorIsFlashing = false;
                stopColorFlashing();
            }

            //return true tells the system that the long press registered
            //return false doesn't. A false return would cause
            //the long click to register as a short click as well
            return true;
        }
    });

}

//this function generates a random color and sets it to the screen
public void randomChangeTint(){
    //generate random color components:
    int randa = (int) Math.round((int) 0xff * (float) Math.random());
    int randr = (int) Math.round((int) 0xff * (float) Math.random());
    int randg = (int) Math.round((int) 0xff * (float) Math.random());
    int randb = (int) Math.round((int) 0xff * (float) Math.random());
    int randColor = Color.argb(randa, randr, randg, randb); 

    //convert color integer to string:
    String strColor = String.format("#%08X", randColor);

    //set overlay to our generated random color:
    ((View)findViewById(R.id.overlay_view)).setBackgroundColor(randColor);
    ((TextView)findViewById(R.id.textView2)).setText(strColor);
}

//this is our 'runnable' that randomly sets the screen color over
//an interval of time in milliseconds (timeInterval)
public Runnable startColorFlashing = new Runnable(){
    //set overlay view to randomly switch colors
    int timeInterval=600;
    public void run() {
        if (colorIsFlashing){
            randomChangeTint();
        } else {

        }
        mHandler.postDelayed(this, timeInterval);
    }
};

//this method stops the color flashing:
public void stopColorFlashing() {

    //pauses the runnable:
    mHandler.removeCallbacksAndMessages(startColorFlashing);

    //re-initializes the runnable as an empty one
    startColorFlashing = new Runnable(){
        public void run() {
            //empty, nothing here
        }
    };
}
} 
```

如果我省略

```
 //re-initializes the runnable as an empty one
    startColorFlashing = new Runnable(){
        public void run() {
            //empty, nothing here
        }
    }; 
```

stopColorFlashing() 的一部分，然后连续多次短按屏幕似乎一遍又一遍地启动可运行对象，在停止它然后用短按重新启动它之后，它又开始闪烁，似乎从它停止的地方恢复。我希望它“重新开始”。

我用 Thread.start() 和 Thread.pause() 尝试了一些东西，但无法弄清楚。有没有办法“杀死”或“摧毁”一个可运行的？

我是java新手（我知道matlab），任何想法或建议都值得赞赏。我确信我的代码写得非常糟糕而且效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:02:45.403

好的，我通过遵循 AOSP 桌面时钟示例找到了一个解决方案，该示例说明了它如何在屏幕保护程序模式下每分钟左右移动时间显示。我认为关键是 Handler 的 removeMessages 方法（这是一个方法，对吗？）。此外，我没有让 Runnable 不断发布 UI 更新，而是让调用的 UI 更新方法 generateRandomColor() 向处理程序发送延迟消息，然后再次调用方法 generateRandomColor()，从而导致循环。我认为这可能仍然不是最好的方法，但它简洁且有效。

下面的代码完全符合我的要求。我希望这可以帮助寻找处理程序类似问题的人......

```
package com.example.testproject04;

/* import necessary libraries for 
 * our objects classes and widgets 
 * that we use here
 */
import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.View;
import android.os.Handler;
import android.widget.TextView;
import android.os.Message;

/* declare the main class/activity of this program */
public class MainActivity extends Activity {

/* initialize a boolean variable (true or false only) to 
 * check whether the screen is flashing new colors or not */
boolean colorIsFlashing = false;

/* update interval in milliseconds */
public int updateDelay = 800; 

/* 'message' to change color (used by handler) */
int CHANGE_COLOR_MSG = 0x0; 

/* this creates the UI and screen view, 
 * and sets up some other aspects of the program */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* set the current view in the 
     * user interface as our xml file:
     */
    setContentView(R.layout.activity_main);

    /* set the background color, 
     * and the initial overlay tint:
     */
    ((View)findViewById(R.id.background_view)).setBackgroundColor(0xFF000000);
    ((View)findViewById(R.id.overlay_view)).setBackgroundColor(0x00000000);

    /* create the overlayView variable that 
     * represents our overlay for tinting
     */
    View overlayView = findViewById(R.id.overlay_view);

    /* implement a method that will listen for a short press, 
     * when short press occurs, if the screen is not currently 
     * flashing, it will start flashing periodically
     */
    overlayView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (!colorIsFlashing){
                colorIsFlashing = true;
                mHandler.sendEmptyMessageDelayed(CHANGE_COLOR_MSG, updateDelay);
            } 
        }
    }); 

    /* implement a listener for long presses on the screen, 
     * when a long press occurs, 
     * if the screen is flashing, it will stop 
     */
    overlayView.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            if (colorIsFlashing) {
                colorIsFlashing = false;
                mHandler.removeMessages(CHANGE_COLOR_MSG);
            }
            return true;
        }
    }); 

}

/* initialize a handler that we will use 
 * to change the color of the screen 
 */
private final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message m) {
        if (m.what == CHANGE_COLOR_MSG) {
            generateRandomColor();
        }
    }
};

/* this function generates a random color
 *  and sets it to the screen 
 */
public void generateRandomColor(){
    if (!colorIsFlashing) return;

    /* generate random color components: */
    int randa = (int) Math.round((int) 0xff * (float) Math.random());
    int randr = (int) Math.round((int) 0xff * (float) Math.random());
    int randg = (int) Math.round((int) 0xff * (float) Math.random());
    int randb = (int) Math.round((int) 0xff * (float) Math.random());
    int randColor = Color.argb(randa, randr, randg, randb); 

    /* convert color integer to string: */
    String strColor = String.format("#%08X", randColor);

    /* set overlay to our generated random color
     *  and update textview to display color in hex code
     */
    ((View)findViewById(R.id.overlay_view)).setBackgroundColor(randColor);
    ((TextView)findViewById(R.id.textView2)).setText(strColor);

    mHandler.sendEmptyMessageDelayed(CHANGE_COLOR_MSG, updateDelay);
}

} 
```

额外的搜索标签/信息：在 UI 线程中循环代码，使用处理程序停止 android 活动中的循环，从处理程序中删除消息，向处理程序发送延迟消息

# unicode - 当路径包含 unicode 字符时，Installshield 2010 失败

> ID：15513859
> 
> 赞同：2
> 
> 时间：2013-03-20T01:46:42.523
> 
> 标签：unicode, installshield, unicode-string, installshield-2010

我正在使用 Installshield 2010 高级版。

当我尝试使用安装包安装我们的软件时，Installshield 总是异常终止。重现顺序如下：

1.  将 Windows（7 或 8）语言环境设置为英语
2.  为 Windows 安装韩语语言包
3.  将 Windows 区域设置从英语更改为韩语
4.  使用韩文字符创建 Windows 用户帐户
5.  使用新用户帐户登录 Windows
6.  将 Windows 区域设置从韩语更改为英语
7.  启动安装
8.  安装异常终止

如果我使用 Installshield 2011 构建安装包，则安装在上述顺序下工作得很好。我发现你的 Installshield 发行说明中的​​文章，unicode 路径中的设置仅支持 Installshield 2011 或更高版本。（[http://kb.flexerasoftware.com/selfservice/viewContent.do?externalId=Q208910](http://kb.flexerasoftware.com/selfservice/viewContent.do?externalId=Q208910)）

是否有任何解决方法可以使 Installshield 2010 支持包含 Unicode 的路径中的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:12:58.987

您没有提到您正在运行哪种安装（InstallScript 或 Windows Installer）。对于在我们引入适当的 Unicode 支持之前的 Windows Installer 设置，有时您可以创建单个 .msi 文件进行安装。（与非代码页 Unicode 路径相关的大部分困难都在 setup.exe 中，因此绕过它可以缓解其中的许多问题。）如果您使用的是 InstallScript 安装，则这不是一个选项，因为它需要 setup.exe发射器。

# c++ - ifstream getline 问题（它只读取第一行）

> ID：15513862
> 
> 赞同：1
> 
> 时间：2013-03-20T01:47:07.730
> 
> 标签：c++, loops, getline

我的循环肯定有问题，因为在读取并执行第一行之后程序结束。

```
if (infile.is_open())
{
    cout << "Input filename: ";
    cin>>filename;
    infile.open(filename.c_str());

    cout<< "Output filename: ";
    cin>>filename;
    outfile.open(filename.c_str());

    while(getline(infile,input))
    {
        string output = "";
        for(int x = 0; x < input.length(); x++)
            output += cipher(input[x]);

        cout<<output<<endl;
        outfile<<output;
    }
} 
```

关于如何使这项工作的任何建议？

**编辑**

遵循了建议并得到了这个：

```
if (infile.is_open()) {

        cout << "Input filename: ";
        cin>>filename;
        infile.open(filename.c_str());
        if (!infile.is_open())
        {
        std::cout << "Failed to open the input file." << std::endl;
        return -1;
        }

        cout<< "Output filename: ";
        cin>>filename;
        outfile.open(ofilename.c_str());
        if (!outfile.is_open())
        {
        std::cout << "Failed to open the output file." << std::endl;
        return -1;
        }

        while(getline(infile,line)){

        string output = "";
        for(int x = 0; x < input.length(); x++) {

        output += cipher(input[x]);

        }

        } 
```

但它仍然只读取第一行......其他一切都很好......只是无法读取第一行以外的任何内容......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:05:15.793

看来您误解了`fstream`'[`is_open()`](http://www.cplusplus.com/reference/fstream/ifstream/is_open/)方法的要点，因为这段代码：

```
if (infile.is_open())
{
    cout << "Input filename: ";
    cin>>filename;
    infile.open(filename.c_str());
    ...
} 
```

检查是否`infile`已成功打开（即*，如果之前对成员的调用`open`成功，或者是否使用参数化构造函数成功构造了对象，
并且从那时起没有调用 close*），如果它打开，则检索输入的名称文件`cin`并打开文件。

好的开始是程序逐行读取输入文件并将这些行写入输出文件而不处理它们：

```
// retrieve the name of the input file and open it:
cout << "Input filename: ";
cin>>filename;
infile.open(filename.c_str());
if (!infile.is_open())
{
    std::cout << "Failed to open the input file." << std::endl;
    return -1;
}

// retrieve the name of the output file and open it:
cout << "Output filename: ";
cin >> filename;
outfile.open(filename.c_str());
if (!outfile.is_open())
{
    std::cout << "Failed to open the output file." << std::endl;
    return -1;
}

std::string line;
while(getline(infile,line))
{
    std::cout << line << std::endl;
    outfile << line;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:28:09.943

所以我建议这个。

1.  写入以返回*任何内容*`char cipher(char ch)`的加密输入。如果您不想加密空格，请不要。但总是返回加密字符或未修改字符。

**   使用`std::transform`、`std::istream_iterator`和`std::ostream_iterator`来转换您的输入和输出文件。

    *   在正确的时间检查您的文件状态。* 

 *一个例子如下所示：

```
#include <iostream>
#include <fstream>
#include <iteraor>
#include <string>
using namespace std;

char cipher(char ch)
{
    if (std::isalpha(ch))
    {
        // TODO: change ch to whatever you want here.
    }

    // but always return it, whether you changed it or not.
    return ch;
}

int main()
{
    int res = EXIT_SUCCESS;

    string in_filename, out_filename;
    cout << "Input filename: ";
    cin >> in_filename;
    cout << "Output filename: ";
    cin >> out_filename;

    // don't skip whitespace
    ifstream infile(in_filename);
    ofstream outfile(out_filename);
    if ((infile >> noskipws) && outfile)
    {
        std::transform(istream_iterator<char>(infile),
                       istream_iterator<char>(),
                       ostream_iterator<char>(outfile),
                       cipher);
    }
    else
    {
        perror("Failed to open files.");
        res = EXIT_FAILURE;
    }
    return res;
} 
```*

# objective-c - How to prevent EXC_BAD_ACCESS from crashing an app?

> ID：15513864
> 
> 赞同：15
> 
> 时间：2013-03-20T01:47:23.403
> 
> 标签：objective-c

Is there a way to prevent an `EXC_BAD_ACCESS` from crashing an app, like with `@try..@catch` you can handle an exception gracefully.

Update:

The code crashes when it attempts to dereference an invalid pointer. This is a third party library and it interfaces with external hardware so I can't debug locally. I am trying to prevent it from crashing and output data to a debugging console on my app.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T02:11:52.857

In ObjC, try/catch do not handle exceptions particularly gracefully. You will still leak memory and leave the system in an undefined state. With rare exception, the expectation is that you are simply catching so you can log some things before crashing. And in general, you should not use `@catch` anywhere but at the top level of your program for this purpose. There are some extraordinary situations where limited use of exceptions may be appropriate, but they are rare in ObjC. See the [Exception Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Exceptions/Exceptions.html) for some more information. See especially the following from the [ObjC ARC documentation](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#exceptions):

> The standard Cocoa convention is that exceptions signal programmer error and are not intended to be recovered from. Making code exceptions-safe by default would impose severe runtime and code size penalties on code that typically does not actually care about exceptions safety. Therefore, ARC-generated code leaks by default on exceptions, which is just fine if the process is going to be immediately terminated anyway. Programs which do care about recovering from exceptions should enable the option [-fobjc-arc-exceptions, which imposes speed and memory penalties on your program].

The same is true of `EXC_BAD_ACCESS`. You can catch it with a signal handler for the purpose of recording some information and then finishing your crash. For a good tool for doing this see [PLCrashReporter](https://code.google.com/p/plcrashreporter/). It is very difficult to write such a handler correctly, so I strongly recommend using an existing framework. You can easily get into deadlocks that drain the user's battery if you catch `EXC_BAD_ACCESS` incorrectly.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-20T02:03:54.620

You get `EXC_BAD_ACCESS` often because you sent a message to a released object. Then you can examine the `NSZombie`. What is an NSZombie? You can see : [this](https://stackoverflow.com/questions/4168327/what-is-nszombie). It will catch the `EXC_BAD_ACCESS` because of sent a message to the released object.

You can set NSZombie like this : Check the `Enable Zombie Objects` ![enter image description here](../Images/4866a564ad91ee7da2e0a10dda215cdf.png)

And you can also get `EXC_BAD_ACCESS` because of the memory warnings level is too high , or your memory is too high , so the apple will shut your app down. This `EXC_BAD_ACCESS` is too hard to prevent . I think the only way is to manage your memory as low as you can , sometimes you can see the log where is `receive memory warning` , when the level is high, it may get`EXC_BAD_ACCESS`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T01:52:45.430

You can rewrite your code to not have these errors. Try not to reference any null pointers and keep references to any object that you want to have access to.

# jquery - 使用 jquery append() 或 html() 时避免换行

> ID：15513867
> 
> 赞同：7
> 
> 时间：2013-03-20T01:47:47.240
> 
> 标签：jquery, html, append, line-breaks

起初我在我的 DOM 中有这个：

```
<li>
  <span>A</span>
</li> 
```

当我这样做时：

`$("li").append("<span>B</span>");`

如果我查看 DOM，这是我得到的：

```
<li>
  <span>A</span>
  <span>B</span>
</li> 
```

但我想拥有

```
<li>
   <span>A</span><span>B</span>
</li> 
```

我需要在同一行显示 span 以避免在两个元素之间显示空白。

使用 javascript innerHTML 问题与 jQuery 相同，将其用于 append 和 html 函数。

[这是一个jsFiddle](http://jsfiddle.net/cm0s/Z9TTd/24/)

感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T09:17:47.250

您可以通过简单地使用代替来解决或至少*避免*该问题：`after()``append()`

```
$("li span").last().after("<span>C</span>"); 
```

```
$("li span").last().after("<span>C</span>");
$('#generatedHTML').text($('li').html());
```

```
#generatedHTML {
  white-space: pre-wrap;
  font-family: mono;
  padding: 0.5em;
  margin: 0;
  background-color: #eee;
}
#generatedHTML::before {
  content: "Created HTML: ";
  color: #999;
  display: block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul>
  <li>
    <span>A</span>
  </li>
</ul>
<div id="generatedHTML"></div>
```

另外，请注意我更正了您的 HTML：an`li`仅*在*a `ul`or的直接子级时有效`ol`（它不应包含在*任何*其他元素中）。

此外，您可以使用更复杂的替代方案：

```
$("li").append("<span>B</span>").contents().filter(function(){
    return this.nodeType === 3;
}).remove(); 
```

```
$("li").append("<span>B</span>").contents().filter(function(){
    return this.nodeType === 3;
}).remove();
$('#generatedHTML').text($('li').html());
```

```
#generatedHTML {
  white-space: pre-wrap;
  font-family: mono;
  padding: 0.5em;
  margin: 0;
  background-color: #eee;
}
#generatedHTML::before {
  content: "Created HTML: ";
  color: #999;
  display: block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul>
  <li>
    <span>A</span>
  </li>
</ul>
<div id="generatedHTML"></div>
```

虽然已经有一段时间了，但我认为还值得添加上面的纯 JavaScript 版本：

```
let htmlToAppend = '<span>B</span>',
  span = document.querySelector('li span');

span.insertAdjacentHTML(
  'afterend', htmlToAppend
);
document.querySelector('#generatedHTML').textContent = span.parentNode.innerHTML; 
```

```
let htmlToAppend = '<span>B</span>',
  span = document.querySelector('li span');

span.insertAdjacentHTML(
  'afterend', htmlToAppend
);
document.querySelector('#generatedHTML').textContent = span.parentNode.innerHTML;
```

```
#generatedHTML {
  white-space: pre-wrap;
  font-family: mono;
  padding: 0.5em;
  margin: 0;
  background-color: #eee;
}

#generatedHTML::before {
  content: "Created HTML: ";
  color: #999;
  display: block;
}
```

```
<ul>
  <li>
    <span>A</span>
  </li>
</ul>
<div id="generatedHTML"></div>
```

参考：

*   JavaScript：
    *   [`document.querySelector()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector).
    *   [`Element.innerHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML).
    *   [`Element.insertAdjacentHTML()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML).
    *   [`let`声明](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/let)。
    *   [`Node.nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType).
    *   [`Node.textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent).
*   jQuery：
    *   [`after()`](http://api.jquery.com/after/).
    *   [`append()`](http://api.jquery.com/append/).
    *   [`contents()`](http://api.jquery.com/contents/).
    *   [`filter()`](http://api.jquery.com/filter/).
    *   [`last()`](http://api.jquery.com/last/).
    *   [`remove()`](http://api.jquery.com/remove/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:09:09.760

因此，答案是您在源代码中看到的情况并非如此：只有一行或几行标记，它们都由浏览器实现为相等的 DOM。空白问题可能是由错误的样式引起的。所以，我建议你先检查一下。

# c# - GUI 窗口大小 C# WPF

> ID：15513868
> 
> 赞同：2
> 
> 时间：2013-03-20T01:47:51.967
> 
> 标签：c#, wpf, size

我想将窗口设置为创建游戏的确切大小，因为我将使用屏幕的 X 和 Y 坐标来移动东西。问题是在设置窗口宽度和高度时，它包括该尺寸的边框，因此您的实际尺寸小于您指定的尺寸。我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:19:18.737

您将宽度和高度设置为窗口内的面板。通常它是一个网格面板，除非你改变了它。然后，您可以设置窗口的 SizeToContent 属性，以便它可以自动调整大小以适应网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:56:09.053

或者你可以这样做：`myForm.Width = yourValue + borderSize;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:57:33.623

如果您的窗口是 WPF 窗口，请尝试使用 AllowsTransparency="True" 和 WindowStyle="None"

# rules - PMML 中的简单规则

> ID：15513870
> 
> 赞同：1
> 
> 时间：2013-03-20T01:48:13.393
> 
> 标签：rules, decision-tree

我们目前正在探索在 hadoop 集群上部署 Zementis ADAPA 或他们的 UPPI 插件。我们计划将 SAS 模型提取到 PMML 并进行部署。

然而，除了从 SAS 中提取的模型之外，我们还需要在 PMML 中表达更简单的“模型”/分类规则。

一个例子是：

```
input: var1, var2
rule: var1 >= var2
output: 'true' of 'false' 
```

我目前正在考虑将其表达为一个非常简单的决策树（PMML 中的 TreeModel）或一个非常简单的规则集（PMML 中的 RuleSet）。

以下是我的问题：

1.  我是否使用了正确的模型？
2.  这甚至是正确的方法吗？在 PMML 中是否有另一种表达规则的方法？
3.  这甚至是对 PMML 提出的正确要求吗？还有其他人使用 PMML 来表达这样的规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:53:42.020

由于 PMML 文档总是期望存在某种“模型”，因此您必须通过放入一个虚拟回归模型来从本质上欺骗它。然后，您将在输入预处理 ( [TransformationDictionary ) 中使用 PMML 的“](http://www.dmg.org/v4-1/Transformations.html) [if-then-else](http://www.dmg.org/v4-1/BuiltinFunctions.html#boolean6) ”构造来执行“规则/逻辑”，以“导出”您的答案字段。之后，您必须使用“[输出](http://www.dmg.org/v4-1/Output.html)”元素输出这个派生字段。

我知道这只是太多的工作，太少的好处。我这样做只是作为概念验证，我们决定不在 PMML 中做简单的规则。

# java - 如何指出字符串中所有重复字符的索引位置

> ID：15513874
> 
> 赞同：0
> 
> 时间：2013-03-20T01:49:02.237
> 
> 标签：java

有没有办法检查字符串中有多少重复字符并指出它的索引位置？我正在使用 indexOf() 方法。但是它只会返回第一个结果。并且其他剩余的相同字母将不会被退回。我也想知道是否有可能知道所有重复字母的索引位置。

这是我当前正在使用的代码片段。

```
 String word = "RASPBERRY";
 char letter = 'R';
 int indx = 0;

 indx = word.indexOf(letter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:01:54.260

是的， indexof 只返回从特定位置开始的第一个匹配位置，对于你的情况，也许循环可以找到这个字符出现在这个字符串中的所有位置。

```
String word = "RASPBERRY";
char letter = 'R';
int start = word.indexOf(letter);

while(start != -1) {
     System.out.println("Found R in: " + start);
     start = word.indexOf(letter, ++start);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:10:14.667

```
String word = "RASPBERRY";
char letter = 'R';
int indx = word.indexOf(letter);

while (indx != -1) {
   System.out.println("Index at " + indx);
   indx = word.indexOf(letter, indx + 1);
} 
```

# java - 需要帮助对整数进行一些特定的格式化（java）

> ID：15513877
> 
> 赞同：1
> 
> 时间：2013-03-20T01:49:10.957
> 
> 标签：java, decimalformat

好吧，我正在做一个广播节目，目前广播频率是整数，例如；107900、87900。

我需要将这样的数字转换成看起来像这样的字符串，

107.9、87.9

我一直在玩 DecimalFormat 但没有任何成功。任何提示或提示表示赞赏！

这是我尝试过的一些事情，

```
frequency = 107900;
double newFreq = frequency / 1000;
String name = String.valueOf(newFreq);
result = 107.0

double freqer = 107900/1000;
DecimalFormat dec = new DecimalFormat("#.0");
result = 107.0

int frequency = 107900;
DecimalFormat dec = new DecimalFormat("#.0");
result = 107900.0 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:52:13.387

为了不与浮点数混淆，并假设它们都是小数点后的一位（因为广播电台在这里，无论如何），您可以使用：

```
String.format ("%d.%d", freq / 1000, (freq / 100) % 10) 
```

例如，请参见以下完整程序：

```
public class Test {
    static String radStat (int freq) {
        return String.format ("%d.%d", freq / 1000, (freq / 100) % 10);
    }

    public static void main(String args[]) {
        System.out.println("107900 -> " + radStat (107900));
        System.out.println(" 87900 -> " + radStat ( 87900));
        System.out.println("101700 -> " + radStat (101700));
    }                          
} 
```

输出：

```
107900 -> 107.9
 87900 -> 87.9
101700 -> 101.7 
```

# r - 如何获取R中句子中单词的频率？

> ID：15513883
> 
> 赞同：-1
> 
> 时间：2013-03-20T01:49:37.697
> 
> 标签：r, frequency

我有一个包含一个段落的输入文件。我需要找到该段落中特定单词的频率。

猫文件：

```
Text    Index
train is good   1
let the train come      5
train is best   3
i m great       3
what is best    2 
```

代码：

```
 input<-read.table("file",sep="\t",header=TRUE)
 paragraph1<-input[1][1]
 word<-"train" 
```

我需要在第 1 段中找到单词“train”的频率。我怎样才能使用 R 获得它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:01:04.233

如果您提供更多信息，我可能会提供更多信息作为回报。使用`qdap`你可以：

```
library(qdap)

dat <- readLines(n=5)
train is good   1
let the train come      5
train is best   3
i m great       3
what is best    2

dat <- do.call(rbind.data.frame, strsplit(dat, "   +"))

colnames(dat) <- c("Text", "Index")

termco(dat$Text, , " train ")

## > termco(dat$Text, , " train ")
##   all word.count     train
## 1 all         16 3(18.75%) 
```

您可能可以使用 . 一次完成所有段落`termco`。有关更多信息，`termco`请参阅[此链接](http://trinker.github.com/qdap_dev/termco.html)。

这在很大程度上取决于分隔段落的内容，阅读方式，缩进方式等。

发帖人发现以下内容很有用：

`length(gregexpr("the", "the dog ate the word the", fixed = TRUE)[[1]])`

# c# - 网络浏览器删除元素的外部 html

> ID：15513891
> 
> 赞同：0
> 
> 时间：2013-03-20T01:50:16.937
> 
> 标签：c#, outerhtml

我有一个 C# 应用程序，它有一个 Web 浏览器，默认导航到指定页面。

我想要做的是当文档完全加载时，通过标签名称（不是ID / Class）选择一个html元素，然后删除它之外的html，但我已经尝试了一段时间但仍然没有成功..

这是我的活动，也是我到目前为止的活动

```
 private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        var elementToDelete = webBrowser1.Document.GetElementsByTagName("form");
    } 
```

我想选择没有 CLASS/ID 的表单元素并删除它之外的所有 html 代码（outer-html），因此它将是页面上唯一可见的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:34:57.483

你说你想删除一个元素，但是在你的代码之后你说你想删除“表单”之外的所有内容。我不确定你真正想要哪个，但你可以用以下方法做第二个。

首先，注意`elementToDelete`实际上是一个集合，而不是单个元素，所以我们需要获取单个元素。

```
var formElements = webBrowser1.Document.GetElementsByTagName("form");
var elementToSave = formElements.FirstOrDefault();
if(elementToSave == null)
    throw new InvalidOperationException("No element named 'form'"); 
```

然后，您可以将`Document.DocumentText`属性设置`InnerHtml`为“表单”的属性。您可能应该包装内部 HTML，使其成为有效页面，但这应该有效：

```
webBrowser1.Document.DocumentText = elementToSave.InnerHtml; 
```

# sql-server - 基于事务表中的逗号分隔值生成视图

> ID：15513905
> 
> 赞同：0
> 
> 时间：2013-03-20T01:51:59.893
> 
> 标签：sql-server

如何根据事务表的逗号分隔值生成视图以显示带有主数据的记录

在管理工作室中获得所需的结果，使用

```
select * from masters_view where parameter1 in (x,y) and parameter2 in (r,s,t) 
```

值 (x,y) 和 (r,s,t) 可作为另一个表中的记录作为 nvarchar

# python - 是否有任何生成 AngularJS 的 Python 库/框架？

> ID：15513907
> 
> 赞同：3
> 
> 时间：2013-03-20T01:52:14.397
> 
> 标签：python, orm, angularjs, web-frameworks, web-frontend

我发现[无状态](http://en.wikipedia.org/wiki/Stateless_protocol) [SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture)架构越来越有用和相关。

例如，它允许您编写一次；部署到：

*   网站（用于在[网络浏览器](http://en.wikipedia.org/wiki/Web_browsers)中查看）
*   本机移动应用程序（使用[Adob​​e PhoneGap](http://phonegap.com)或类似应用程序）
*   [Ubuntu 应用程序](http://developer.ubuntu.com/resources/programming-languages/javascript/)
*   [Windows Metro Store 应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx)（适用于[Windows 8](http://en.wikipedia.org/wiki/Windows_8)）

不幸的是，这种设计有一个主要缺点。较慢的开发时间。使用任何 ORM 和相关的表单生成器，可以非常快速地开发他们的 Web 应用程序。

**是否有任何用于 Python 的 ORM 表单生成器可以将模型转换为 AngularJS 表单？**

[包括 CSRF 令牌和 RESTful 设置；以 JSON 为格式]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:57:16.767

没有。我不得不看，但那里真的没有这样的东西。然而，有很多关于在 Python 中使用 AngularJS 的文章。只需谷歌“AngularJS python”，看看你想出了什么。但是您将不得不自己完成大部分工作！

# android - Google play services sdk：在身份验证期间请求离线访问

> ID：15513909
> 
> 赞同：3
> 
> 时间：2013-03-20T01:52:32.730
> 
> 标签：android, oauth-2.0, google-oauth, google-play-services, google-authentication

有没有办法在 android 上使用 Google play services sdk 请求离线访问？我知道[原始 HTTP api](https://developers.google.com/android-publisher/authorization)可以通过请求刷新令牌来执行此操作，但找不到通过新的[Google Play 服务 sdk](https://developer.android.com/google/play-services/auth.html)来执行此操作的方法。

新的 sdk 使用该`GoogleAuthUtil.getToken()`方法为应用程序提供访问令牌，但访问令牌每小时到期一次。我可以发出原始 http 请求并让用户从 Web 视图或浏览器登录，但我更喜欢使用 sdk 本地执行此操作的方法，因为这对用户来说是更好的体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T01:31:22.863

远近搜索 Google 文档，看起来这是可能的。[Google 在其“混合应用程序”](https://developers.google.com/accounts/cookbook/platforms/Hybrid)类别下将此称为“跨客户端身份” 。

您显然可以按摩您传递给`GoogleAuthUtil.getToken(...)`方法的范围参数的字符串，以诱使它返回“授权代码”而不是 OAuth2 令牌。（对于这些之间的区别，我发现[这张图表](https://developers.google.com/accounts/docs/OAuth2#installed)很有帮助。）

详情在[这里](https://developers.google.com/accounts/docs/CrossClientAuth)，特别是最后一节标题为[“Android 应用获取 Web 后端的离线访问”](https://developers.google.com/accounts/docs/CrossClientAuth#offlineAccess)。

看来您需要将以下内容作为“范围”字符串传递给 getToken：

```
oauth2:server:client_id:<your_server_client_id>:api_scope:<scope_url_1> <scope_url_2> ... 
```

然后，该文档声称：

> 在这种情况下，GoogleAuthUtil.getToken() 将首先要求用户已授权此项目访问这两个范围。假设这没问题，它将返回的不是 OAuth 令牌，而是一个短暂的授权码，可以交换访问令牌和刷新令牌。

免责声明：我自己还没有尝试过；我们的 Android 开发人员很快就会。请报告这是否对您有用。

# jquery - 在页面加载时缩放 DOM

> ID：15513911
> 
> 赞同：0
> 
> 时间：2013-03-20T01:52:43.690
> 
> 标签：jquery, animation, scale, onload

我想在页面加载时缩放 div 元素。根据我的搜索，这是使用 jQuery 的正确或几乎正确的语法；但是当我加载页面时没有任何反应。这肯定是一个简单的修复，我只是太新了，无法发现它。

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <link href="twitter-bootstrap-v2/docs/assets/css/example-fixed-layout.css" rel="stylesheet">
</head>
<body>

    <script src="jquery.js"></script>
    <script>
     $("body").onload(function() {
     $('#div1').effect('scale'{percent:200},1000)
     });
    </script>

<div id="div1"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:57:19.710

试试这个语法（记得包括 jQuery 和 jQueryUI）：

```
$(function () {
    $('#div1').effect('scale', {
        percent: 200
    }, 1000)
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/eC23T/)**

（注意这`$(function () {`是 的简写`$(document).ready(function() {`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:13:31.213

效果不会坚持到底。我建议您为 zoom css 属性设置动画：

```
$(function () {
     $('#div1').animate({
         'zoom':2
    }, 500)
}); 
```

工作示例：http: [//jsfiddle.net/basarat/eC23T/1/](http://jsfiddle.net/basarat/eC23T/1/)

# java - 如何打印出两个六面骰子加到4的次数

> ID：15513913
> 
> 赞同：0
> 
> 时间：2013-03-20T01:52:45.760
> 
> 标签：java, arrays

我之前的问题与此类似，只是我没有提到我的最终目标，

在这段代码中，我有一个骰子，我打印出它掷出 4 的次数。现在我想知道我是否有两个骰子，都是 6 面的，两个骰子会掷出多少次 2 从而加到 4。

但是，我需要使用数组，因为在此分配中它是强制性的。我尝试在`if`语句中添加另一个异常，但我一直意识到我需要在程序中实际使用数组。应该存储 1000 个数组，因为骰子必须滚动 1000 次，因此检查它从滚动中增加到 4 的次数，然后打印次数。

```
import java.io.*;
public class dont {

public static void main(String[] args) throws Exception  {
// System.out.println(input());
int[] counts = new int[13];
System.out.print("The number of times it rolls 4 on two 6  sided dice :" + counts);
}

public static int input () throws IOException {
BufferedReader myInput = new BufferedReader (new InputStreamReader 
System.out.println("Hello and welcome to the program");
System.out.println("In this program two six sided dices will be rolled and one eleven
sided dice will be rolled (1000 times each");

    int sum;
int[] counts = new int[13];

System.out.println("The dices will be rolled to determine the odds of how many times the roll 2 comes up on both dies(Press any key to con't) ");
myInput.readLine();
//int count2=0;
int Sixside;
for (int i = 0; i < 1000; i++) 
{
    // two dice that add to 4, after being rolled one thousand times  
    Sixside = (int)(Math.random ()*6+1)+(int)(Math.random ()*6+1) == 4;  
    //print the number of times they add to 4
    counts[sum]++;

}

counts[i] = Sixside;
{
    //return array to main
    return counts [13]; 
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:18:46.963

您的示例为两个总和为 4 的骰子产生了合理的答案。我怀疑您应该创建一个数组，该数组可以保存总和在 2 到 12 之间的*任何*对的总和，例如：

```
int[] counts = new int[13]; 
```

`if`那么你的循环中就不需要语句了；您可以只增加该总和的计数，例如：

```
counts[sum]++; 
```

该[表](http://en.wikipedia.org/wiki/Dice#Probability)可以帮助您确定您的其他`counts`是否合理。

附录：这是您方法的简化版本：

```
public static int[] input() {
    int[] counts = new int[13];
    for (int i = 0; i < 1000; i++) {
        int sum = // your expression for the sum of two dice
        counts[sum]++;
    }
    return counts;
} 
```

您可以这样调用它并检查任何特定的总数，例如`counts[4]`.

```
int[] counts = input(); 
```

# windows-8 - Windows 8 应用商店：认证期间拒绝 DocumentsLibrary 访问

> ID：15513914
> 
> 赞同：0
> 
> 时间：2013-03-20T01:52:56.307
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

我正在构建一套依赖于彼此数据的应用程序。我想将此共享数据存储库放在 Documents 库文件夹中。

但是，当我尝试将应用程序提交到 Windows 8 商店时，我被拒绝访问该文件夹位置。

我有一个不符合 DocumentLibrary 访问权限的开发者帐户。有人告诉我，因为我不是公司，所以我没有资格获得公司帐户。

离线时如何与其他应用程序共享应用程序数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:09:11.153

是的，公司/个人帐户之间的差异之一是对文档库的访问（[此处](http://blogs.msdn.com/b/jennifer/archive/2012/09/18/what-is-the-difference-between-a-company-vs-individual-account-for-the-windows-store.aspx)的差异的完整列表）。

如果需要脱机，则一种选择是 SQLLite。[请在此处](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)查看 Tim 的帖子。

如果在线就足够了，Windows Azure 移动服务非常棒，因为它提供了一个快速简单的数据库后端。更多细节[在这里](http://www.windowsazure.com/en-us/develop/mobile/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:04:08.337

Windows 应用商店应用在沙盒环境中运行，彼此隔离，因此无法轻松共享数据。

如果两个应用程序都可以连接到自定义在线服务以在它们之间共享数据是不够的，那么您需要用户选择一个文件夹（从两个应用程序中）来存储共享数据。这样你就可以访问它了。

首先[`FolderPicker`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.folderpicker.aspx)用于用户选择文件夹：

```
var picker = new FolderPicker();
picker.FileTypeFilter.Add(".sqldb");
var folder = await picker.PickSingleFolderAsync(); 
```

然后将文件夹添加到，[`FutureAccessList`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageapplicationpermissions.futureaccesslist.aspx)以便即使在应用程序重新启动后您仍可以访问它：

```
var token = StorageApplicationPermissions.FutureAccessList.Add(folder); 
```

您需要存储它`token`以便下次加载它。[`LocalSettings`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)将是一个合适的位置。当您的应用再次运行时，您首先读取令牌并重新获得对所选文件夹的访问权限：

```
var folder = await StorageApplicationPermissions.FutureAccessList.GetFolderAsync(token); 
```

我知道这不是一个完美的解决方案，因为它需要用户干预才能正确设置所有内容，但我认为这是使应用程序之间的此类数据共享成为可能的唯一方法。即便如此，您可能很难使用此功能验证应用程序。

# jquery - 如何在元素上存储数据并将其发送到 jQuery 中的另一个元素？

> ID：15513917
> 
> 赞同：0
> 
> 时间：2013-03-20T01:53:27.153
> 
> 标签：jquery

我正在尝试为投注网站开发优惠券小部件。

我有要点击的链接（几率）。所以这个元素应该带有匹配码，奇数等......

当用户点击时，它应该将所有数据附加到一个 div 中。

```
$('a').click(function(){
$('ul#fs').append('<li id="k401" class="first"><input id="chk401" type="checkbox"><label for="chk401"><strong> Jagellonia - Wisla Krakow</strong></label><a href="#"><i class="icon-remove icon-red"></i></a><span>Mbs:4</span><span class="mTip">FS</span><span class="odd">1: 2,20</span></li>');
  }) 
```

我怎样才能做到这一点？jQuery.data() 是最好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:01:05.027

如果您使用的是 HTML5，我会选择 HTML5 数据属性——它很简单而且有效。

您可以使用 jQuery 的`data()`方法读取它们的值。

看到这个：[http ://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:10:31.450

是的 data() 是将数据与 jquery 对象关联的推荐方法。

```
$('a').click(function(){
  var yourdata = $(this).data('yourproperty'); 
  // Do whatever you want with your data
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:35:26.267

我会将该数据存储在 data 属性上的一个对象中，并对其进行解析以构建您的 html。这是 jsBin 示例，向您展示我的意思。

[http://jsbin.com/enequr/2/edit](http://jsbin.com/enequr/2/edit)

# selenium - 从 webdriver 中的 textarea 读取文本

> ID：15513918
> 
> 赞同：15
> 
> 时间：2013-03-20T01:53:27.607
> 
> 标签：selenium, webdriver, selenium-webdriver

在用 Java 编写 webdriver 测试时，我试图从 textarea 读取文本。出于某种原因，当我使用时，我得到了空值`.getAttribute()`：

```
 WebElement text = wd.findElement(By.id("edit-pi-sample-geo-id"));

     String textagain = text.getAttribute("aaaa"); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-20T03:09:42.383

我得到了这个工作。这是解决方案-

```
 WebElement text = wd.findElement(By.id("edit-pi-analytics-tms-id"));
    String textagain = text.getAttribute("value"); 
```

我在之前发布的代码示例中使用了 textarea 中的实际值，这有点傻。谢谢大家帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-26T04:33:32.953

我正在使用 selenium 3.4 版并使用对我有用的 element.getAttribute("value") 。element.getText() 将为 TextArea 返回空值。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-20T02:36:21.483

所以找到一个元素会返回一个 web 元素。要获取元素的文本，您必须调用 getText()，所以从上面

```
 WebElement element = wd.findElement(By.id("edit-pi-sample-geo-id"));
 String text = element.getText() 
```

# android - Android - 单击点击（索引）方法后显示的文本时显示另一个活动

> ID：15513919
> 
> 赞同：-2
> 
> 时间：2013-03-20T01:53:29.337
> 
> 标签：android, overlay, android-mapview, marker, itemizedoverlay

我是 android 新手，需要一点帮助。我正在开发一个类似于谷歌地图的应用程序。我能够创建地图界面并显示标记以及点击（int index）方法以在单击标记时显示文本。现在，我需要在单击文本（使用 ontap 方法单击标记后出现）时开始另一个活动，就像我们在谷歌地图中看到关于某个位置的评论和其他内容一样。我搜索并找到了一些气球项目覆盖类的实现。

我的问题是是否有另一种方法可以在不使用这个气球项目类的情况下做同样的事情？

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem>{
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:09:03.447

你可以这样做：

```
LayoutInflater cancelInflater = getLayoutInflater();
dialogView = cancelInflater.inflate(R.layout.DIALOG, null);
AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
dialog.setView(dialogView);
dialogView.setOnClickListener(mViewClickListener); 
```

你需要为你的对话框创建一个布局文件，`R.layout.DIALOG`

然后，您可以为布局中的单独小部件 findViewById() 并相应地填充它们。

然后创建一个 onClickListener 来执行单击对话框时需要执行的任何操作。

# office-interop - 为什么不推荐使用 AddressEntry.Members？相同的替代方法是什么？

> ID：15513924
> 
> 赞同：2
> 
> 时间：2013-03-20T01:53:52.490
> 
> 标签：office-interop, outlook-addin, outlook-2007

我最近在 C# 中使用 Outlook 插件。在调用 AddressEntry.Members 属性时，我多次遇到“内部错误”异常。（AddressEntry 是 Microsoft.Office.Interop.Outlook 命名空间中的类）

我在网上搜索，但根据MSDN才发现该属性已被弃用，但既没有提到原因也没有提到替换。任何有关这方面的信息都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:57:17.447

它仍然非常活跃。这是访问分发列表成员的唯一方法。

# dart - 如何在 Dart 的 web_ui 中构建“控制器”？

> ID：15513929
> 
> 赞同：0
> 
> 时间：2013-03-20T01:54:39.437
> 
> 标签：dart, dart-webui

我有以下代码

> xviewcontainer.html

```
<!DOCTYPE html>

<html>
  <head>
    <title>xviewcontainer</title>
    <link rel="components" href="xsearch.html">
    <link rel="components" href="xcard.html">
  </head>

  <body>
    <element name="x-view-container" constructor="ViewContainerComponent" extends="div">
      <template>
        <template instantiate="if view == 'SEARCH_VIEW'">
          <x-search></x-search>
        </template>
        <template instantiate="if view == 'CARD_VIEW'">
          <x-card></x-card>
        </template>
      </template>
    </element>
    <script type="application/dart" src="xviewcontainer.dart"></script>
    <!-- for this next line to work, your pubspec.yaml file must have a dependency on 'browser' -->
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

> xviewcontainer.dart

```
import 'package:web_ui/web_ui.dart';

class ViewContainerComponent extends WebComponent {
  String view = 'SEARCH_VIEW';
} 
```

我在其他一些当前呈现的`x-search`. 如何获得对包含`x-view-container`实例的引用？我希望更改 .view 属性，以便`x-view-container`呈现`x-card`而不是当前呈现的 .view `x-search`。我会对如何从我的事件处理程序的相对位置、如何以绝对方式执行此操作以及如何以任何其他方式执行此操作特别感兴趣。

```
 void openCardView(){
    WHAT_DO_I_PUT_HERE.view = 'CARD_VIEW';
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:56:15.247

您可以使用方法查询您在 DOM 上的元素`query()`。最简单的例子是`query('x-view-container')`。或者在其上分配一个类或一个 id 并对其进行查询。然后访问该`xtag`属性以获取实际的 Web 组件实例。

这是一个例子：

```
import 'package:web_ui/watcher.dart' as watchers;

main() {
  // I'm assuming that the HTML tag is somewhere on the page.
  query('x-view-container').xtag.view = 'CARD_VIEW';

  watchers.dispatch(); // You may need to call this, or use @observable stuff.
} 
```

# c# - 对象引用未设置为对象按钮按下事件的实例

> ID：15513930
> 
> 赞同：-1
> 
> 时间：2013-03-20T01:54:40.700
> 
> 标签：c#, winsockets

我收到一条错误消息，我不知道如何修复它。这是我的原始代码：

```
private void SendMessage(Command cmd, EndPoint sendToEP)
{
    try
    {
        //Create the message to send.
        Data msgToSend = new Data();

        //msgToSend.strName = txtName.Text;   //Name of the user.
        msgToSend.cmdCommand = cmd;         //Message to send.
        msgToSend.vocoder = vocoder;        //Vocoder to be used.

        byte[] message = msgToSend.ToByte();

        //Send the message asynchronously.
        clientSocket.BeginSendTo(message, 0, message.Length, SocketFlags.None, sendToEP, new AsyncCallback(OnSend), null);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "UniProject-SendMessage ()", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

错误消息是（按钮按下事件）

> 你调用的对象是空的。

为什么我会收到此错误消息，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:01:00.290

每次遇到这样的错误 (a `NullReferenceException`) 时，您的代码中都会有一些内容被设置为`null`. 您必须查看您的代码并确定：

1.  错误发生在哪一行（以哪种方法）？
2.  该行上的哪些变量是*引用类型*或可为*空的值类型*？
    普通值类型（例如`struct`，或整数、浮点数、双精度数）不能是`null`。
3.  在这些变量中，哪些*可能*是`null`？
4.  这些变量可能设置在`null`哪里？
    例如，方法参数、方法返回的值或`as`运算符的结果都可能导致变量为`null`.

如果这些都不是，您可能（尽管不太可能）有一个抛出此异常的方法。.NET 基类方法通常不会抛出这样的异常，如果你的代码确实抛出了它，你的堆栈跟踪应该带你到最深的方法和行。

# r - 将字符移到字符的左侧

> ID：15513939
> 
> 赞同：1
> 
> 时间：2013-03-20T01:55:39.880
> 
> 标签：r

给定一些数据

```
hello <- c('13.txt','12.txt','14.txt') 
```

我只想取数字并转换为数字，即删除 .txt

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T02:00:27.783

你想`file_path_sans_ext`从`tools`包里

```
library(tools)
hello <- c('13.txt','12.txt','14.txt')
file_path_sans_ext(hello)
## [1] "13" "12" "14" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T02:11:11.580

您可以使用原始帖子中“hello”对象上的函数 gsub 使用正则表达式来执行此操作。

```
hello <- c('13.txt','12.txt','14.txt')
as.numeric(gsub("([0-9]+).*","\\1",hello))
#[1] 13 12 14 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T02:31:49.630

另一个正则表达式解决方案

```
hello <- c("13.txt", "12.txt", "14.txt")
as.numeric(regmatches(hello, gregexpr("[0-9]+", hello)))
## [1] 13 12 14 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T04:36:29.803

如果你知道你的扩展都是`.txt`那么你可以使用`substr()`

```
> hello <- c('13.txt','12.txt','14.txt')
> as.numeric(substr(hello, 1, nchar(hello) - 3))
#[1] 13 12 14 
```

# timeout - Z3 JAVA-API 用于求解器超时

> ID：15513944
> 
> 赞同：1
> 
> 时间：2013-03-20T01:56:06.603
> 
> 标签：timeout, z3, java

如何为 Z3 JAVA API 设置求解器的超时时间？

再次回到这个问题：

这是我的代码：

```
 Context ctx = getZ3Context();
    solver = ctx.MkSolver();
    Params p = ctx.MkParams();
    p.Add("timeout", 1);
    solver.setParameters(p); 
```

不起作用，求解器只是永远运行查询。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:02:16.380

我没有使用过 Java API，但是从查看官方[Java 示例](http://z3.codeplex.com/SourceControl/changeset/view/8bfbdf1e680d#examples/java/JavaExample.java)和[此代码段](https://stackoverflow.com/questions/10833925/z3-c-api-changing-timeout-at-runtime)中，我假设以下内容应该可以工作：

```
Solver s = ctx.MkSolver();
Params p = ctx.MkParams();
p.Add("timeout", valueInMilliseconds); /* "SOFT_TIMEOUT" or ":timeout"? */
s.setParameters(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T00:28:13.847

好的，终于自己找到了解决办法：

```
Context ctx = getZ3Context();
solver = ctx.MkSolver();
Params p = ctx.MkParams();
/* Also tried
 * p.Add("timeout", 1),
 * p.Add(":timeout", 1), 
 * neither worked.
 */
p.Add("soft_timeout", 1);
solver.setParameters(p); 
```

# c++ - Ad-Hoc 网络控制

> ID：15513948
> 
> 赞同：3
> 
> 时间：2013-03-20T01:56:43.023
> 
> 标签：c++, adhoc

我正在编写一个需要创建自组织网络的程序。一旦创建并连接其他节点，我需要一种方法来确定网络上每个节点的 ip（或形成连接的其他方式。我更喜欢使用 tcp 和/或 udp，但我不必）。一旦我有办法连接到其他节点，我需要确定这台机器和我希望连接的节点之间的跳数。

我环顾四周寻找这些信息，但无济于事......有谁知道是否有一个已经到位的API？如果没有，我将如何创建自己的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T18:29:59.480

我知道这个问题已经很老了，但我在这个领域有丰富的经验。

您需要的是一种自组织路由协议，通常称为 MANET（移动自组织网络）协议。我建议您查看 OLSR，它由 IETF 标准化为 RFC 7181 和 RFC 3636。您可以在[http://www.olsr.org/?q=download](http://www.olsr.org/?q=download)获取 OLSR 的源代码和二进制文件。

通过使用这个，OLSR 将在网络中的所有节点之间创建路由，通过查看路由表，您将能够确定网络中每个节点的 IP 地址，然后可以轻松打开套接字连接（UDP/TCP ) 对其中任何一个。如果需要，您还将获得有关每个链接质量的信息。

# javascript - 试图覆盖警报，它可以工作，但执行两次

> ID：15513949
> 
> 赞同：3
> 
> 时间：2013-03-20T01:56:47.097
> 
> 标签：javascript, prototype, overloading, alert, overriding

所以，叫我懒惰，但我正在尝试向 Javascript 的警报功能添加一些语法糖。这是代码：

```
<script src='jquery.js'></script>
<script>
window.nativeAlert = window.alert
window.alert = function() 
{
    window.nativeAlert(Array.prototype.slice.call(arguments).join(", ")+" window")
    return this
}
Array.prototype.alert = function()
{
    window.nativeAlert(this.toString()+" array")
    return this
}
Object.prototype.alert = function()
{
    window.nativeAlert(this.toString()+" object")
    return this
}
$(function()
{
    var features = $.getJSON("features.json")
    features.alert()
})
</script> 
```

这似乎有效，但发射了两次。知道为什么会这样吗？我的直觉说它与重载有关，但它对数组和 [window.]alert() 工作得很好（触发一次）。

PS 我知道 JSON 还不能正确显示，以后再说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:21:05.243

这是一个棘手的问题，它需要在调试器中逐步遍历调用堆栈才能查看发生了什么。

正在发生的事情是`alert`作为属性添加到*每个*对象。`features.json`这包括从文件反序列化的对象。

一旦`.getJSON`请求完成，jQuery 就会解析从文件返回的 JSON 字符串。当 jQuery 发现对象的属性是一个函数时，它会执行它。由于 your`alert`是对象的属性，因此它调用它。

这很好地说明了为什么向`Object.prototype`. 任何试图遍历对象属性的东西也会遇到自定义原型属性。

# javascript - 如何根据某个js值平滑高效地调整html元素的颜色？

> ID：15513954
> 
> 赞同：1
> 
> 时间：2013-03-20T01:57:17.950
> 
> 标签：javascript

我正在做一个小模拟，草会根据它的能量水平变成不同的颜色。目前，每个草块都会通过 if/else 语句来确定每个游戏循环的颜色。制作足够多的 if 语句以使颜色平滑变化似乎非常占用 CPU，我想知道是否有更有效的方法来做到这一点。

模拟可以在这里找到：http: [//j.mp/Wou7Sl](http://j.mp/Wou7Sl) （关于给草上色的部分是一个名为 colorGrass 的函数，在第 134 行开始）

这不是一个紧急问题或任何问题，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:06:37.353

首先，您可以采取一些措施来显着提高性能。

*   你有很多不必要的电话`$(document).ready`; 这些只会减慢速度。

*   `getElementById`jQuery 选择器与;相比是出了名的慢。在性能很重要的地方使用它，并尝试尽可能少地查找元素。获取元素的句柄并重用它。

*   `.style`比 jQuery 快得多`.css`，在性能很重要时使用它。

*   避免重复引用`foo[bar]`；相反，做`baz = foo[bar]`然后使用`baz`.

这是一个包含上述一些更改[的演示；](http://jsfiddle.net/JurfJ/)您会注意到它运行更流畅，消耗的 CPU 更少，并且可以以更高的帧速率运行。还有更多的优化要做，但你明白了。

现在我们已经把它清理干净了，我们可以处理草地了。你的草代码最初看起来像这样：

```
function colorGrass(i) {
    $(document).ready(function () {
        if (Grasses[i].energy < 25) {
            $('#' + Grasses[i].id + '').css('background-color', '#666600');
        }
        if (Grasses[i].energy > 25 && Grasses[i].energy < 50) {
            $('#' + Grasses[i].id + '').css('background-color', '#669900');
        }
        if (Grasses[i].energy > 50 && Grasses[i].energy < 75) {
            $('#' + Grasses[i].id + '').css('background-color', '#66cc00');
        }
        if (Grasses[i].energy > 75) {
            $('#' + Grasses[i].id + '').css('background-color', 'green');
        }
    });
} 
```

进行上述更改后，它看起来像这样（更干净，你不觉得吗？）：

```
function colorGrass(i) {
    var grass = Grasses[i];
    var el = document.getElementById(grass.id);
    if (grass.energy < 25) {
        el.style.backgroundColor = '#666600';
    }
    else if (grass.energy < 50) {
        el.style.backgroundColor = '#669900';
    }
    else if (grass.energy < 75) {
        el.style.backgroundColor = '#66cc00';
    }
    else {
        el.style.backgroundColor = 'green';
    }
} 
```

现在，为了让草顺利渐变，您应该能够将“能量”值直接转换为“绿色”通道，例如：

```
function colorGrass(i) {
    var grass = Grasses[i];
    var el = document.getElementById(grass.id);
    el.style.backgroundColor = 'rgb(100,' + (grass.energy + 100) + ',0)';
} 
```

它应该看起来如何完全取决于您，因此请根据您认为合适的方式调整这些值，并进行您需要进行的任何其他更改（css 等）以使其看起来不错。

# r - 在 R 的 read.table() 中指定多字符注释标记

> ID：15513956
> 
> 赞同：8
> 
> 时间：2013-03-20T01:57:26.200
> 
> 标签：r, comments, read.table

是否可以在 R 中指定一个包含超过 1 个符号的注释字符？

例如，

```
read.table("data.dat", comment.char="//") 
```

不会工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T02:34:01.793

我不认为你可以，但这里有一个解决方法。一个函数，它读取文件，使用 清理其行`sub`，并将所有内容重新粘贴在一起，然后将其传递给`read.table`：

```
my.read.table <- function(file, comment.char = "//", ...) {
  clean.lines <- sub(paste0(comment.char, ".*"), "", readLines(file))
  read.table(..., text = paste(clean.lines, collapse = "\n"))
   } 
```

测试：

```
file <- textConnection("3 4 //a
                        1 2")
my.read.table(file)
#   V1 V2
# 1  3  4
# 2  1  2 
```

# windows-8 - selenium 在 Windows 8-IE10 上使用 8002 而不是 4444 打开应用程序

> ID：15513957
> 
> 赞同：0
> 
> 时间：2013-03-20T01:57:32.747
> 
> 标签：windows-8, selenium-webdriver, internet-explorer-10

我正在运行一个简单的 java selenium 测试来打开一个应用程序`http://localhost:8000/`，但是当 selenium 在 IE10 中打开应用程序时，它使用 8002 端口而不是 4444 打开。因此，它总是导致 404 错误，当我将端口更改为 4444 时，测试进行得很好. 这只发生在 Windows 8 上的 IE10 上。其他浏览器（chrome/firefox）似乎可以在 Windows 8 上正确运行测试。

我正在使用最新的 selenium v​​2.25.0。这是 webdriver 支持的 selenium，但我使用的是旧版 selenium api（例如`selenium.open()`：）

有人对如何调试此问题有建议吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:17:19.500

您可以在初始化时将端口参数提供给 selenium：

```
selenium = new DefaultSelenium("localhost", 4444, '*firefox', siteUrl); 
```

# php - 函数 callDoDirectPayment() 处的 Magento 付款失败

> ID：15513962
> 
> 赞同：0
> 
> 时间：2013-03-20T01:58:12.717
> 
> 标签：php, debugging, magento, paypal

我无法使用 Paypal Payments Pro 在 Magento 1.6.1 上调试支付网关。它一直失败并显示消息“处理您的订单时出错。请联系我们或稍后再试”。

我已经尝试检查错误日志，并在下面发布了结果。第一次使用这个系统和更多的前端开发，但我正在设法跟随 php。

它似乎失败的关键线是

```
 $this->_importFromResponse($this->_doDirectPaymentResponse, $response); 
```

有人可以准确解释这条线的作用吗？调查这个过程的下一步应该是什么明智的？任何额外的 paypal / magento 特定知识都非常受欢迎！

我猜既然创建了数组，那么转移到贝宝可能会出现问题（我的 api 签名应该没问题 - 快速网关有效） - 我将如何确认或反驳这个假设？

谢谢

（var/exception.log 的前 8 行带有引用的代码片段，以及由 Mage::log() 函数生成的 var/system.log 中的一些额外内容。）

```
exception 'Mage_Core_Exception' with message 'There was an error processing your order.
Please contact us or try again later.' in /var/www/magento/app/Mage.php:563 
```

堆栈跟踪：

```
#0 /var/www/magento/app/code/core/Mage/Paypal/Model/Api/Nvp.php(974):
  Mage::throwException('There was an er...')

if (!$this->_validateResponse($methodName, $response)) {
        Mage::logException(new Exception(
            Mage::helper('paypal')->__("PayPal response hasn't required fields.")
        ));
        Mage::throwException(Mage::helper('paypal')->__('There was an error processing
your order. 
Please contact us or try again later.'));
    }

#1 /var/www/magento/app/code/core/Mage/Paypal/Model/Api/Nvp.php(648):

 Mage_Paypal_Model_Api_Nvp->call('DoDirectPayment', Array)
 public function callDoDirectPayment()
 {
        Mage::log("hello world"); 
```

// 2013-03-20T00:04:50+00:00 调试 (7): 你好世界

```
 $request = $this->_exportToRequest($this->_doDirectPaymentRequest);

        Mage::log($request); 
```

// 2013-03-20T00:04:50+00:00 调试 (7): 数组

```
 $this->_exportLineItems($request);
    if ($this->getAddress()) {
        $request = $this->_importAddresses($request);
    }
    $response = $this->call(self::DO_DIRECT_PAYMENT, $request);

        Mage::log($response); 
```

(

[PAYMENTACTION] => 授权

[IPADDRESS] => 81.98.95.116

[退货详情] => 1

[AMT] => 0.50

[货币代码] => 英镑

[INVNUM] => 100000063

[NOTIFYURL] => [http://www.store.com/paypal/ipn/](http://www.store.com/paypal/ipn/)

[电子邮件] => 你好@电子邮件

[信用卡] => xxxxxxxxxxxxxx

[扩展] => xxxxxx

[CVV2] => XXX

[问题编号] =>

)

```
$this->_importFromResponse($this->_doDirectPaymentResponse, $response);

Mage::log("nothing to see here") 
```

// 这不会向 system.log 返回任何内容，因此我认为这是故障点

```
}

#2 /var/www/magento/app/code/core/Mage/Paypal/Model/Direct.php(343):  
Mage_Paypal_Model_Api_Nvp->callDoDirectPayment()

 // call api and import transaction and other payment information
 /**
 * Place an order with authorization or capture action
 *
 * @param Mage_Sales_Model_Order_Payment $payment
 * @param float $amount
 * @return Mage_Paypal_Model_Direct
 */
 protected function _placeOrder(Mage_Sales_Model_Order_Payment $payment, $amount)
 { //...........(343)

    $api->callDoDirectPayment();
    $this->_importResultToPayment($api, $payment);

    try {
        $api->callGetTransactionDetails();
    } catch (Mage_Core_Exception $e) {
        // if we recieve errors, but DoDirectPayment response is Success, then set    
              Pending status for transaction
        $payment->setIsTransactionPending(true);
    } 
```

(343)

```
 $this->_importResultToPayment($api, $payment);
    return $this;
}

#3 /var/www/magento/app/code/core/Mage/Paypal/Model/Direct.php(178):     
 Mage_Paypal_Model_Direct->_placeOrder(Object(Mage_Sales_Model_Order_Payment), 45)  
#4 /var/www/magento/app/code/core/Mage/Sales/Model/Order/Payment.php(1026): 
 Mage_Paypal_Model_Direct->authorize(Object(Mage_Sales_Model_Order_Payment), 45)
#5 /var/www/magento/app/code/core/Mage/Sales/Model/Order/Payment.php(311): 
 Mage_Sales_Model_Order_Payment->_authorize(true, 45)
#6 /var/www/magento/app/code/core/Mage/Sales/Model/Order.php(855):   
 Mage_Sales_Model_Order_Payment->place()
#7 /var/www/magento/app/code/core/Mage/Sales/Model/Order.php(1073):  
 Mage_Sales_Model_Order->_placePayment()
#8 [internal function]: Mage_Sales_Model_Order->place() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:55:12.200

您是否在 Magento 的 PayPal 设置中启用了调试功能？如果是这样，那么您应该会在 /var/log 中看到一个日志，这样您就可以看到来回发送的 RAW 请求和响应数据。

这将允许您查看响应中返回的实际错误代码和消息，这将帮助您找出究竟出了什么问题。

# c - 将数据块读入文件缓冲区调用函数返回下一个字符

> ID：15513963
> 
> 赞同：0
> 
> 时间：2013-03-20T01:58:27.550
> 
> 标签：c, linux

我需要使用此函数将数据块读入文件缓冲区并有效地执行此操作。对我的函数的调用需要从缓冲区返回下一个字符，或者读取一个新的数据块并从该新块返回第一个字符。这是我到目前为止所拥有的。任何帮助，将不胜感激。

```
int get_next_char(int fd)   {

    static char file_buffer[FILE_BUFFER_SIZE];
    static int next;
    static int i= 0;

    while((next = read( fd,&file_buffer, FILE_BUFFER_SIZE)) > 0) {
        // next equals number of chars actually read from fd
        while(i < next) i++;
    }

    if( next  == -1 || next== '\0') {
        return EXIT_FAILURE;
    } else {
        return file_buffer[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:44:45.120

`fgetc`您可以为此使用系统调用实现自己的内部缓冲版本。一些微不足道的事情如下：

```
#define BUF_SIZE 1024

int fgetc_impl(FILE* fp) {
    static FILE *pBuffered;
    static char buffer[BUF_SIZE];
    static int start = 0, end = 0;

    // conditions under which you'll need to make a syscall to read into
    // the local buffer. Either a new file descriptor has been presented, or
    // we've read to the end of the local buffer and need to re-read a new chunk into it
    if (pBuffered != fp || start == end) {
        pBuffered = fp;
        end = read((int)fp, buffer, BUF_SIZE);
        start = 0;

        // mask the syscall failure and report it as an EOF, change this behaviour if you want.
        if (end < 0) {
            end = 0; 
        }
    }

    // return EOF if the syscall to read failed, or couldn't read any more data from the file descriptor.
    return end == 0 ? EOF : buffer[start++];
} 
```

简单的用法如下：

```
FILE *fp = fopen("test.txt", "r");
int c = 0;
while ( (c = fgetc_impl(fp)) != EOF ) {
    printf("%c", (char)c);
}
fclose(fp); 
```

# parsing - sed - 地址范围内的条件分支

> ID：15513969
> 
> 赞同：0
> 
> 时间：2013-03-20T01:59:20.130
> 
> 标签：parsing, loops, sed, branch, labels

我需要从一些原始文本数据格式化一个批量输入文件。我能够使用 来实现我的大部分解决方案`Sed`，这是首选，但不是绝对必需的（我只想坚持使用这个工具）。当我疯狂地尝试解析 [大量] 以下输入时，问题变得很明显：

```
---- Start Product ----
PartNumber>> 123457
Size04_Req>> 2 
Size02_Req>> 1 
PartColor>> Natural
PartDescription>> Guys Tee 
---- End Product ----
---- Start Product ----
PartNumber>> TPIOO9205
Size05_Req>> 1 
PartColor>> Natural
PartDescription>> Black Hoodie

---- End Product ----

###...with the objective of achieving the following output:

---- Start Product ---
PartNumber>> 123457
Size01_Req>> 0 
Size03_Req>> 0 
Size05_Req>> 0 
Size06_Req>> 0
Size04_Req>> 2 
Size02_Req>> 1 
PartColor>> Natural
PartDescription>> Guys Tee
---- End Product ----
---- Start Product ----
PartNumber>> TPIOO9205
Size01_Req>> 0 
Size02_Req>> 0 
Size03_Req>> 0 
Size04_Req>> 0 
Size06_Req>> 0
Size05_Req>> 1 
PartColor>> Natural
PartDescription>> Black Hoodie
---- End Product ---- 
```

我相信这就像在地址范围内工作一样简单**/----\ Start\ Product\ ----/,/----\ End\ Product\ ----/**并做一些优雅的分支和:label 工作，但显然我的倾向是跳上 awk 或其他东西来实现这个逻辑 - 因为我要疯了 - 也许用另一种工具来实现这一点会更容易。然而，我坚持我最初的愿望是留在 Sed，并且因为我喜欢每天学习一个新的 Sed 技巧，我该怎么做呢？请注意，逻辑是为未考虑的大小 01-06 插入**SizeXX_Req>> 0** ，并且顺序并不重要，这就是为什么我认为 Sed 甚至可以半理智地完成最后一个小部分。总会有至少一个**SizeXX_Req**每个开始/最终产品部分之间的行。任何 Sed(i) 大师都能快速解决这个问题吗？我是否只是从我最近写的大量正则表达式中抽离出来而错过了一个简单的修复？

前进。用另一种随机语言给我看，甚至不用解释你是如何（或为什么）这样做的，我也对此感到失望。提前谢谢，偷看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:23:52.303

对我来说，仅使用 sed 来执行此操作似乎是不可能的，因为您需要一个计数器和某种反向引用。也许我错了，无论如何，使用 Perl：

```
use warnings;
use strict;

my (%sizes, %part);
while(<>) {
  if (/^---- End Product ----/) {
    print "---- Start Product ----\n";
    print "PartNumber>> $part{Number}\n";
    for my $size (map { sprintf "%02d", $_ } 1..6) {
      if (not defined $sizes{$size}) {
        print "<b>Size${size}_Req>> 0</b>\n";
      }   
    }   
    for my $size (keys %sizes) {
      print "Size${size}_Req>> $sizes{$size}\n";
    }   
    print "Part$_>> $part{$_}\n" for ("Color", "Description");
    print "---- End Product ----\n";
    %sizes = (); 
    %part  = (); 
  }
  $sizes{$1} = $2 if (/^Size(\d+)_Req>>\s*(\d+)/);
  $part{$1} = $2 if (/^Part(\w+)>> (.*)/);
} 
```

**采用**

```
perl script.pl input 
```

**输出**

```
---- Start Product ----
PartNumber>> 123457
<b>Size01_Req>> 0</b>
<b>Size03_Req>> 0</b>
<b>Size05_Req>> 0</b>
<b>Size06_Req>> 0</b>
Size04_Req>> 2
Size02_Req>> 1
PartColor>> Natural
PartDescription>> Guys Tee 
---- End Product ----
---- Start Product ----
PartNumber>> TPIOO9205
<b>Size01_Req>> 0</b>
<b>Size02_Req>> 0</b>
<b>Size03_Req>> 0</b>
<b>Size04_Req>> 0</b>
<b>Size06_Req>> 0</b>
Size05_Req>> 1
PartColor>> Natural
PartDescription>> Black Hoodie
---- End Product ---- 
```

# svn - SVN 显示 Windows 防火墙图标而不是绿色勾号

> ID：15513982
> 
> 赞同：1
> 
> 时间：2013-03-20T02:01:01.063
> 
> 标签：svn, tortoisesvn, visualsvn-server

突然一个完全最新的 repo 看起来像这样：

![一种](../Images/791179e3d915364535b924b53b8e9b61.png)

一个单独的 repo 看起来像这样（文件夹名称已编辑） - 如您所见，过期文件仍然具有正确的图标（红色！）：

![b](../Images/6f2a9ae72ebc06f427d38374889ad9a6.png)

在文件夹中，任何最新的文件看起来都一样：

![C](../Images/fd3d1462d8393be4acb7cf47ef4f6e01.png)

我试过*SVN Cleanup -> Refresh shell overlays*，但这没有效果：

![d](../Images/f9591c088a3c8d85a5d3623931fdaace.png)

是什么原因造成的，我怎样才能找回我可爱的绿色复选标记？

![e](../Images/46e0cbcfbfad9fcacfe7c83960e6f1d4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:15:10.467

尝试让 Windows 重建图标缓存。

1.  按`Ctrl`+ `Shift`+`Esc`打开任务管理器。
2.  杀死`explorer.exe`¹（您的任务栏将消失）。
3.  单击菜单*文件*→*新任务*
4.  键入`cmd` `Enter`以打开命令提示符。
5.  输入（或复制粘贴）：

    ```
    del "%localappdata%\IconCache.db" /A 
    ```

    `Enter`

6.  转到任务管理器，然后单击菜单*File* → *New task*。
7.  键入`explorer.exe` `Enter`以重新获得您的任务栏。
8.  重新启动你的电脑，让它重建你的图标缓存²。

¹）资源管理器可能会持有图标缓存文件，在这种情况下您无法删除它。这就是为什么`explorer.exe`必须终止该进程。

²）不是每个人都需要重新启动。

# resize - 检测屏幕尺寸的脚本/代码

> ID：15513986
> 
> 赞同：0
> 
> 时间：2013-03-20T02:01:21.413
> 
> 标签：resize, screen, zooming, detect, dimensions

我的页面上有一个包含图像的 div。由于它高 800 像素，距离页面底部 400 像素，因此在较小的显示器上查看时，我的图像从顶部被截断。我没有在我的网站上使用滚动条。

我在我的 div 中添加了一些 CSS 来缩小/缩放内容...

```
.hello {
width:100%; 
height:800px;
position:fixed; 
top:0;
bottom-margin:400px; 
z-index:0;
-moz-transform: scale(.8);
-webkit-transform: scale(.8);
zoom : .8;
-moz-transform-origin:top center;
-webkit-transform-origin:top center;
} 
```

但是，如果用户的显示器尺寸为 1200px 高或更小，我是否可以实现仅应用缩放/缩放的任何脚本？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:29:35.640

您正在寻找的是屏幕分辨率。见[这里](https://developer.mozilla.org/en-US/docs/DOM/window.screen)。相关位：

```
height
    Returns the height of the screen in pixels.
width
    Returns the width of the screen. 
```

但是，这并不能告诉您窗口有多大，在这种情况下，您将需要窗口尺寸。见[这里](https://developer.mozilla.org/en-US/docs/DOM/window)。相关位：

```
window.innerHeight
    Gets the height of the content area of the browser window including, if rendered, the horizontal scrollbar.
window.innerWidth
    Gets the width of the content area of the browser window including, if rendered, the vertical scrollbar. 
```

我会检测到这一点并适当地更改课程等等。

# spring - 从 Atom 源反序列化/拉取 Spring 的 RestTemplate 响应

> ID：15513988
> 
> 赞同：0
> 
> 时间：2013-03-20T02:01:48.217
> 
> 标签：spring

我正在尝试使用 Spring 的 RestTemplate 从原子源获取响应。有没有办法轻松地从响应中提取值或反序列化它？

响应：

```
<?xml version='1.0' encoding='UTF-8'?>
<entry xmlns='http://www.w3.org/2005/Atom'                                               xmlns:apps='http://schemas.google.com/apps/2006'>
<id>https://apps-apis.google.com/a/feeds/domain/2.0/blah/verification/mx</id>
<updated>2013-03-19T19:47:02.805Z</updated>
<apps:property name='verified' value='false'/>
</entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:03:35.630

[使用Abdera](https://cwiki.apache.org/confluence/display/ABDERA/Getting+Started)或[ROME](https://rometools.jira.com/wiki/display/ROME/Home)解析提要。它们很好地表示了 Atom 提要和提要条目及其所有组成类型。

# php - Unable to display image in PHP generated emails linked from Mad File Manager

> ID：15513993
> 
> 赞同：1
> 
> 时间：2013-03-20T02:02:30.757
> 
> 标签：php, email, tinymce

I have this option whereby the admin can upload files, eg. pictures to the server using Mad File Manager. The "installation" of the File Manager works.

The problem occurs when I want to send an email using PHP, composed the email using TinyMCE, included the picture using the full URL, it shows... but then, when the email arrives at the other end, the image doesn't show.

What I found out is that, eg.

my domain: `www.emailtest.com` upload folder: `uploads`

The url reflected from the image at the recipient's end only shows: `uploads/image.jpg` when it should be `www.emailtest.com/uploads/image.jpg` right?

The domain's name has been truncated.

Can anyone give me a lead on how to go about this? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:54:55.277

Looks like you will need to tweak the tinymce configuration settings a bit. Have a look at the [relative_urls](http://www.tinymce.com/wiki.php/Configuration%3arelative_urls) param.

# java - 为什么 Joda Time 中 LocalTime 的 getLocalMillis() 是受保护的方法？

> ID：15513996
> 
> 赞同：13
> 
> 时间：2013-03-20T02:02:44.453
> 
> 标签：java, jodatime

我想将 joda 时间 LocalTime 转换为毫秒或毫秒。我看到 getLocalMillis 是一个受保护的方法。看起来没有方法可以获取 LocalTime 的毫秒值。

那么，我是否必须以毫秒为单位获取每个字段的值，然后将它们相加以获得总毫秒？为什么 Joda Time 没有获取 Local Millis 的公共方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-20T02:21:47.043

A`LocalTime`不代表时间的绝对瞬间，而是描述任意时区的任何一天中的时间。

如果您正在寻找今天那个时候所描述的那一刻，请将您渲染成`LocalTime`一个`DateTime`通孔。或者，如果您想在另一天获得那个时刻，请构建适当的并查看方法。然后调用。[`LocalTime#toDateTimeToday()`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html#toDateTimeToday%28%29)[`LocalTime#toDateTimeToday(DateTimeZone)`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html#toDateTimeToday%28org.joda.time.DateTimeZone%29)`LocalDate`[`LocalDate#toDateTime(...)`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html#toDateTime%28org.joda.time.LocalTime%29)`DateTime#getMillis()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-20T15:23:36.523

你也可以使用`.toDate().getTime()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-20T01:07:26.390

如果你真的需要时间毫秒，你也可以这样做：

```
LocalTime#get(DateTimeFieldType.millisOfDay()) 
```

# android - Android-动态 overridePendingTransition 持续时间

> ID：15513998
> 
> 赞同：0
> 
> 时间：2013-03-20T02:03:19.343
> 
> 标签：android

我正在创建一个 android 启动器，并且非常深入。我遇到了一个问题。我需要允许用户从设置输入从活动到活动的过渡持续时间。问题是，由于 overridePendingTransition 的结构是

overridePendingTransition(int,int);

代替

overridePendingTransition（动画，动画）；

这意味着我不知道如何动态设置动画速度。我知道如何在动画 xml 中设置持续时间，但这是不可更改的。这是我所拥有的剪辑

`Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage(packages[position]); startActivity(LaunchIntent); overridePendingTransition(R.anim.in,android.R.anim.out);`

我需要动态设置动画速度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:39:55.440

您需要像常规类一样声明自己的动画（意味着不在 xml 中）并使用它。