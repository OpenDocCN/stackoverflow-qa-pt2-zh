# StackOverflow 问答 15915000-15915999

# php - 您可以通过 PHP 3.0 API 将 YouTube 视频的许可证设置为 CreativeCommons 吗？

> ID：15915006
> 
> 赞同：1
> 
> 时间：2013-04-10T00:38:21.147
> 
> 标签：php, youtube-api, google-api-php-client

你应该能够做到这一点，通过这样的事情：

```
$snippet = new Google_VideoSnippet();
$snippet->setTitle("some title");
$snippet->setDescription("some description);
...

$status = new Google_VideoStatus();
$status->setPrivacyStatus("public");
$status->setLicense("creativeCommon");

$video = new Google_Video();
$video->setSnippet($snippet);
$video->setStatus($status); 
```

等等。是的，您会认为 setLicense 的值是“creativeCommons”，但事实并非如此（[https://developers.google.com/youtube/v3/docs/videos#resource](https://developers.google.com/youtube/v3/docs/videos#resource)）。使用“creativeCommons”或“youtube”和“creativeCommon”以外的任何内容都会导致“(500) Bad Request”响应。

但真正的问题是，无论如何，对我来说，一旦视频上传到 YouTube（它正在这样做），无论我指定“youtube”还是“creativeCommon”，我都会获得 YouTube 许可证。那么：这应该有效吗/我做错了吗/有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-06T08:58:30.300

不确定这是否对任何人有帮助，但（几年后）似乎可以使用 api 的 javascript 版本（v3）将 licencetype 设置为 creativeCommon。

```
UploadVideo.prototype.uploadFile = function(file) {
    var metadata = {
        status: {
            privacyStatus: $('#privacy-status option:selected').text(),
            license: "creativeCommon"
        }
    }; 
```

# iphone - '*** -[__NSArrayM objectAtIndex:]: 索引 1 超出范围 [0 .. 0]'

> ID：15915008
> 
> 赞同：0
> 
> 时间：2013-04-10T00:38:38.870
> 
> 标签：iphone, objective-c, xcode

```
cell = [[[NSBundle mainBundle] loadNibNamed:@"Empty" owner:self options:nil] objectAtIndex:0];
    cell = [[[NSBundle mainBundle] loadNibNamed:@"Cell1" owner:self options:nil] objectAtIndex:1]; 
```

我得到一个超出范围的索引错误。我试图改变数字，但没有运气！任何帮助将不胜感激。我一直在谷歌搜索，网上找到的所有解决方案都没有帮助。谢谢。

.m

```
#import "SettingsViewController.h"
@interface SettingsViewController ()

@end

@implementation SettingsViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section {
    return 2;
}
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[[NSBundle mainBundle] loadNibNamed:@"Empty" owner:self options:nil] objectAtIndex:0];
        cell = [[[NSBundle mainBundle] loadNibNamed:@"Cell1" owner:self options:nil] objectAtIndex:1];

    }

    return cell;
}
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *sectionName;
    switch (section)
    {
        case 0:
            sectionName = NSLocalizedString(@"General", @"General");
            break;
        case 1:
            sectionName = NSLocalizedString(@"myOtherSectionName", @"myOtherSectionName");
            break;
            // ...
        default:
            sectionName = @"";
            break;
    }
    return sectionName;
}
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:15:48.737

要加载我正在使用的自定义笔尖，

制作 NSObject 类别类并在其中添加此代码。

```
+ (id)loadNibNamed:(NSString *)NibName {
    NSObject *cl = nil;
    if (NSClassFromString(NibName) != nil) {
        NSArray *arr = [[NSBundle mainBundle] loadNibNamed:NibName owner:self options:nil];
        for (id cls in arr) {
            if([cls isKindOfClass:NSClassFromString(NibName)])
            {
                cl = cls;
                break;
            }
        }
    }
    return cl;
} 
```

并称它为，

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil) {
        cell = (UITableViewCell *)[[class class] loadNibNamed:NSStringFromClass(class)];
    } 
```

它会帮助你。

# java - Java2WS CXF 工具和包 <=> 命名空间关系

> ID：15915010
> 
> 赞同：1
> 
> 时间：2013-04-10T00:39:29.833
> 
> 标签：java, web-services, cxf

我的 java2WS CXF 工具有问题，我的 cproject 是用 Maven 构建的，我有两个模块，一个用于公开服务，另一个用于客户端。

暴露服务的模块结构如下：

```
- WS-服务
  - com.oz.types
    - PersonType.java
  - com.oz.dto
    -AddressDto.java
    - UserDto.java
    -PersonDto.java
  - com.oz.ws.sei
    - 用户管理器
  - com.oz.ws.sei.impl
    - UserManagerImpl

```

我用 ant 运行生成器任务，问题是 dto 包的描述符中的命名空间被放在与 SEI 相同的命名空间中，即[http://sei.ws.oz.com](http://sei.ws.oz.com)而不是[http://dto。](http://dto.oz.com)盎司[.com](http://dto.oz.com)

真正的问题是当我使用相同的 dto 生成其他具有不同包的 WSDL 时，因为两者的客户端都会生成以下内容：

```
- com.oz.ws.sei
    - PersonType.java
    -AddressDto.java
    - UserDto.java
    -PersonDto.java
    - 用户管理器.java
    - ......
 - com.oz.ws.sei2
    - PersonType.java
    -AddressDto.java
    - UserDto.java
    -PersonDto.java
    - SeiTwo.java
    - ......

```

如您所见，两个包中都重复了 dto，我尝试使用 @WebParam 注释在 SEI 中明确定义命名空间：

@WebMethod boolean updateUserInfo(@WebParam(name = "user", targetNamespace = " [http://ws.oz.com/dto](http://ws.oz.com/dto) ") UserDto user);

但是生成的代码只创建了一个包和一个名为 ObjectFactory 的 util 类，而 DTO 仍然留在同一个包中。

怎么能说尊重我的包的生成器工具？

谢谢你的时间。

# html - CSS菜单对齐在野生动物园中表现奇怪？

> ID：15915011
> 
> 赞同：0
> 
> 时间：2013-04-10T00:39:36.287
> 
> 标签：html, css, web

由于某种原因，使用 Safari 时，我的网站菜单显示全部未对齐。网站位于[http://penarthpc.com/~redvaner/](http://penarthpc.com/~redvaner/)

我已经盯着它看了好几个小时，我无法弄清楚。这让我疯狂。下面是“不正确”显示时的外观图像

[http://i.imgur.com/t3hXjry.png](http://i.imgur.com/t3hXjry.png)

下面是我为导航栏编写的 CSS（元素有问题）

(http)pastebin.com/kLDBGnsU

非常感谢您的帮助！我束手无策:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:55:43.160

乍一看，我能注意到的唯一区别是您的链接在 Safari 中带有下划线。其他一切看起来都很好，不像提供的图像。以下 CSS 应解决下划线问题：

```
a{text-decoration:none !important;} 
```

关于提供的图像，也许尝试将以下内容添加到您的`<li>`样式中

```
#nav-bar ul li{display:inline-block;zoom: 1;*display: inline;} 
```

这是一个 ie7 修复，因为内联块元素通常不会在 ie7 中正确呈现

# c# - 实体框架 4.1 无效的对象名称“我们”

> ID：15915013
> 
> 赞同：0
> 
> 时间：2013-04-10T00:40:03.790
> 
> 标签：c#, linq, entity-framework-4

我使用 ef 电动工具对数据库进行逆向工程。它首先使用代码创建类和映射。那里没有问题。

但是当我尝试运行以下代码时：

```
using (var tmp= new PdbContext("nameofdb")
                {

                    try
                    {
                        tmp.Configuration.AutoDetectChangesEnabled = false;

                        var tmpUsr = (from t in tmp.DadosUtilizadores
                                      where t.inactivo == false
                                      select t).ToList();
                    }
                    finally
                    {
                        tmp.Configuration.AutoDetectChangesEnabled = true;
                    }
                } 
```

它会引发以下文本的异常。

> 无效的对象名称“我们”

我在这里搜索并发现通过执行以下操作可以解决我的问题：

```
modelBuilder.Conventions.Remove<PluralizingTableNameConvention>(); 
```

但它仍然不能解决我的问题。所以我检查了表的名称，它是正确的。打开 linqpad 并尝试访问数据，它可以正常工作。一件事引起了我的注意。表有触发器，触发器会在这种情况下引发问题吗？

为了更好地理解以下代码，我引用了名为 PdbContext 的上下文类和名为 UtilizadoresMap 的映射类。

PdbContext 类

```
public class PdbContext:DbContext
    {
        public DbSet<Fltcl> FiltrosClientes { get; set; }
        public DbSet<Fltst> FiltrosStocks { get; set; }
        public DbSet<Bo> DossiersInternos { get; set; }
        public DbSet<Cl> DadosClientes { get; set; }
        public DbSet<Utilizadores> DadosUtilizadores { get; set; }

        public PdbContext(string valueConn):base(valueConn)
        {
            Database.SetInitializer<PdbContext>(null);
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(new FltstMap());
            modelBuilder.Configurations.Add(new FltclMap());
            //modelBuilder.Configurations.Add(new ClMap());
            modelBuilder.Configurations.Add(new UtilizadoresMap());

            //teste
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
            //
            base.OnModelCreating(modelBuilder);
        }
    } 
```

UtilizadoresMap 类

```
public class UtilizadoresMap : EntityTypeConfiguration<Utilizadores>
    {
        public UtilizadoresMap()
        {
         .......
         ToTable("us");
        }
     } 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:39:35.013

最后我想通了。问题是我使用 providerconnectionstring 到数据库而不是只加载字符串并让实体框架创建它。

# mysql - Zend 框架 1.11 - SQLSTATE[HY000] [2003] 无法连接到“localhost”上的 MySQL 服务器 (111)

> ID：15915015
> 
> 赞同：1
> 
> 时间：2013-04-10T00:40:04.787
> 
> 标签：mysql, sql, database, zend-framework

我的应用程序zend框架在银行没有连接，但是一个简单的php脚本连接成功。

错误 zend 框架 SQLSTATE[HY000] [2003] 无法连接到 'localhost' 上的 MySQL 服务器 (111)

我的简单 php 脚本

```
<?
 $banco = "database_test";
 $usuario = "root";
 $senha = "1234";
 $hostname = "localhost";
 $conn = mysql_connect($hostname,$usuario,$senha);
 mysql_select_db($banco) or die( "fail");
 if (!$conn) {echo "error"; exit;}
 else {echo "Sucess.";}
 mysql_close(); 
?> 
```

我正在使用 ubuntu 12.10。在 ubuntu 11.10 中，我的 zend framwrok 应用程序工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:48:27.323

尝试这个：

以root身份登录并执行

setsebool -P httpd_can_network_connect=1

这可能是权限问题

# javascript - 是否可以将参数传递给 AngularJS ng-click 上的函数？

> ID：15915017
> 
> 赞同：4
> 
> 时间：2013-04-10T00:40:21.803
> 
> 标签：javascript, angularjs

我试过这个，但它从来没有奏效。有什么特别的原因，或者这个工作的例子吗？我在想：`ng-click="myFunction('test')"`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T00:45:46.393

当然，这行得通。

`<a ng-click="myName('jz')">Click me</a>`

这是一个简单的例子：

[http://jsfiddle.net/djYbC/1/](http://jsfiddle.net/djYbC/1/)

# php - Mysql 到 Mysqli 很难转换代码

> ID：15915018
> 
> 赞同：1
> 
> 时间：2013-04-10T00:40:37.823
> 
> 标签：php, mysql, mysqli

我正在看 phpacademy.org 的 Alex 几年前的一些教程，他使用 mysql 而不是 mysqli 我知道 mysqli 更好，应该改用，但似乎无法弄清楚如何使这段代码适用于所有人mysqli 代替。有人可以转换它吗？

```
<?php
$connect = mysql_connect('localhost', 'root', 'pass') or die (mysqli_error());
mysql_select_db('jquery');

if (isset($_POST['username'])) {
    $username = mysql_real_escape_string($_POST['username']);
    if (!empty($username)) {
        $username_query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username`='$username'");
        $username_result = mysql_result($username_query, 0);

        if ($username_result == 0) {
            echo 'Username is available!';
        } else if ($username_result == 1) {
            echo 'Sorry, that username is taken.';
        }
    }
}
?> 
```

我试图做的是这个..但`mysqli_result`一直给我错误：

```
<?php
$connect = mysqli_connect('localhost', 'root', 'pass', 'jquery') or die (mysqli_error());

if (isset($_POST['username'])) {
    $username = mysqli_real_escape_string($connect, $_POST['username']);
    if (!empty($username)) {
        $username_query = mysqli_query($connect, "SELECT COUNT(`user_id`) FROM `users` WHERE `username`='$username'");
        $username_result = mysqli_result($username_query, 0);

        if ($username_result == 0) {
            echo 'Username is available!';
        } else if ($username_result == 1) {
            echo 'Sorry, that username is taken.';
        }
    }
}
?> 
```

所以我一直得到的唯一错误是`mysqli_result`说：

> 致命错误：在第 8 行的 \php\username.php 中调用未定义函数 mysqli_result()

我查找了`mysqli_result`在线的用法，并没有找到很多结果来帮助我解决这个问题，希望这里有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:48:10.973

当您使用面向对象的风格时，您属于此类`$username_query`；是一个类而不是一个函数。[`mysqli_result`](http://php.net/manual/en/class.mysqli-result.php)`mysqli_result`

要从结果集中获取一行，您可以执行以下操作（例如）：

```
$username_result = mysqli_fetch_array($username_query); 
```

并且您应该使用 mysqli（或 PDO）而不是`mysql_*`函数的原因不仅仅是后者已被弃用：PDO（和 mysqli）提供准备语句，并且比转义函数提供更好的防止 sql 注入的保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:56:26.953

首先确保表中的用户`unique`名列不会有重复的用户名，因此`$count`正好是 0 或 1，然后试试这个：

```
if (isset($_POST['username']) && $_POST['username'] != '') {

    $connect = new mysqli('localhost', 'root', 'pass', 'jquery') or die (mysqli_error());
    $username       = $_POST['username'];
    $query          = "SELECT COUNT(`user_id`) AS count FROM `users` WHERE `username`=?";
    $username_query = $connect->prepare($query);
    $username_query->bind_param('s', $username);
    $username_query->execute();
    $username_query->bind_result($count);
    $username_query->fetch();
    $username_query->close();
    $connect->close();

    if ($count == 0) {
        echo 'Username is available!';
    } else if ($count == 1) {
        echo 'Sorry, that username is taken.';
    }
} 
```

# jquery - 激活和重置时如何让 jQuery 选项卡标签交换？

> ID：15915022
> 
> 赞同：1
> 
> 时间：2013-04-10T00:41:05.497
> 
> 标签：jquery, dom, jquery-ui-tabs

诚然，我只是在学习 jQuery。我试图寻找这个，但在用尽我可能的研究途径之后，我担心我会让我的问题变得更糟。

只是我正在尝试将 jQuery 用于选项卡。我想在每个选项卡被选中时更改它的文本标签。并在折叠或选择另一个选项卡时返回其原始形式。

我已经能够将标签更改为新的 ID，如[JSFiddle](http://jsfiddle.net/Pelligea/q4F42/)上所见，但它实际上将标签更改为实际的 ID 名称。

```
<div id="tabs">
<ul>
    <li><a href="#tab1" id="tab1-label-link">
        <span id="tab1-label">Label 1</span></a>
        <span id="close-tab1-label" class="no-display">Tab Close</span>
    </li>
    <li><a href="#tab2" id="tab2-label-link">
        <span id="tab2-label">Label 2</span></a>
        <span id="close-tab2-label" class="no-display">Tab Close</span>
    </li>
    <li><a href="#tab3" id="tab3-label-link">
        <span id="tab3-label">Label 3</span></a>
        <span id="close-tab3-label" class="no-display">Tab Close</span>
    </li>
</ul>
<div id="tab1" class="tab-content">Information 1</div>
<div id="tab2" class="tab-content">Information 2</div>
<div id="tab3" class="tab-content">Information 3</div> 
```

这是我目前的 jQuery。

```
$(document).ready(function () {
    $(function () {
        $("#tabs").tabs({
            option: "selected",
            heightStyle: "content",
            collapsible: true,
            active: 'none',
            fx: {
                height: 'toggle',
                duration: 500
            },
            select: function (e, ui) {
                $(ui.tab).html("#close-" + event.target.id);
            }
        });
    });
}); 
```

非常感谢所有帮助。我有一种感觉，我应该比我更多地使用课程，这可能只是我的问题之一。我尝试了很多不同的方法来交换标签，但这是我觉得最接近我的目标的方法。再次感谢您的帮助。

```
.no-display { display: none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:15:56.590

我认为你稍微错过了`$(ui.tab).html("#close-" + event.target.id);`代码在做什么。那就是告诉 jQuery，“让 ui.tab 的内容成为字符串`"#close-" + event.target.id`

为了使生活尽可能简单，我建议将您的“关闭”跨度移动到选项卡链接内，如下所示：

```
<div id="tabs">
    <ul>
        <li><a href="#tab1" id="tab1-label-link">
            <span id="tab1-label">Label 1</span>
            <span id="close-tab1-label" class="no-display">Tab Close</span></a>
        </li>
        <li><a href="#tab2" id="tab2-label-link">
            <span id="tab2-label">Label 2</span>
            <span id="close-tab2-label" class="no-display">Tab Close</span></a>
        </li>
        <li><a href="#tab3" id="tab3-label-link">
            <span id="tab3-label">Label 3</span>
            <span id="close-tab3-label" class="no-display">Tab Close</span></a>
        </li>
    </ul>
    <div id="tab1" class="tab-content">Information 1</div>
    <div id="tab2" class="tab-content">Information 2</div>
    <div id="tab3" class="tab-content">Information 3</div>
</div> 
```

然后，将你的函数换成`select`一个`beforeActivate`函数，如下所示：

```
beforeActivate: function(e, ui) {
    var tab = $(ui.newTab),
        oldTab = $(ui.oldTab);
    tab.find('span').toggleClass('no-display');
    oldTab.find('span').toggleClass('no-display');
} 
```

那应该达到预期的结果。

# scala - 为什么这个异常结果是一个空列表？（玩2.1.0）

> ID：15915025
> 
> 赞同：0
> 
> 时间：2013-04-10T00:41:37.390
> 
> 标签：scala, playframework-2.1, anorm

Scala菜鸟在这里；对于我的生活，我无法理解为什么我没有得到这个 Anorm SQL 调用的结果。当我运行 SQL 调试输出时，它返回的结果很好，但是在运行代码时，我最终得到一个空的 List()。

我的 RowParser 有问题吗？为什么我在调试输出中看到好的 SQL 但我的`result`val 没有收集到它？

我是否在我的 SQL 中遗漏了一些东西`.as()`来正确地将结果行映射到解析器？当我删除最后`result`一行时，我的`result`val 评估为一个 Unit，这绝对是可疑的。

```
// Case class - SQL results rows go into List of these
case class PerformanceData(
    date: String, 
    kwh: String
)

// RowParser
val perfData = {
    get[String]("reading_date") ~ get[String]("kwh") map{ 
        case reading_date~kwh => PerformanceData(reading_date, kwh) 
    }
}

// SQL Call - function ret type is Seq[PerformanceData]
DB.withConnection("performance") { implicit connection => 

    val result: Seq[PerformanceData] = SQL(
    """
        SELECT CONCAT(reading_date) AS reading_date,
           CONCAT(SUM(reading)) AS kwh
        FROM perf
        WHERE reading_date >= DATE_SUB(NOW(), INTERVAL 45 DAY)
        AND sfoid IN ({sf_account_ids})
        GROUP BY reading_date
        ORDER BY reading_date DESC
        LIMIT 30
    """
    ).on(
        'sf_account_ids -> getSQLInValues(SFAccountIDs)
    ).as(
        User.perfData *
    )

//  Logger.debug(result.toString) -> EMPTY LIST!??
    result // Why is this necessary to return proper type?

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:46:46.127

不幸的是，您不需要使用绑定变量，而是替换 IN 子句的字符串值。

另请参阅：[异常中的“In”子句？](https://stackoverflow.com/questions/9528273/in-clause-in-anorm)

编辑：我的意思是这`sf_account_ids`将是一个单一的绑定变量。也许`sfoid IN (?, ?, ?)`是预期的，但声明将是`sfoid IN (?)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:54:25.017

对于第一个问题，id 建议您检查您的`case`陈述`perData`并确保其准确无误。功能`getSQLInValues(...)`也可能是原因。

关于为什么需要最后一个的问题`result`，那是因为 scala 在未明确定义时使用闭包中的最后一个语句来推断返回类型。所以`val result = SQ(...)`作为一个任务会返回`Unit`

为避免这种情况，您可以执行以下操作：

```
DB.withConnection("performance") { implicit connection =>
  SQL(...).on(...).as(...)
} 
```

通过不分配`SQL`它的返回值来推断类型。

# xcode - Xcode项目错误

> ID：15915027
> 
> 赞同：-3
> 
> 时间：2013-04-10T00:41:50.220
> 
> 标签：xcode, error-handling, helper

我不能提供太多信息，当我播放项目时，它会暂停。请按照以下链接在 GitHub 上查看该项目：[https ://github.com/ollie5511/Xcode-Game.git](https://github.com/ollie5511/Xcode-Game.git)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:14:29.863

查看您的代码，您似乎在文件中调用`int`后直接声明了一个变量。变量只能在您的或类的方法中声明。`@implementation``ViewController.m``@interface`

移动或删除`int x = 0;`，你的代码应该执行。

# python - 使用模拟 MongoDB 服务器进行单元测试

> ID：15915031
> 
> 赞同：17
> 
> 时间：2013-04-10T00:42:02.607
> 
> 标签：python, mongodb, python-2.7, pymongo

我必须使用 MongoDB 存储实现 Python 代码的鼻子测试。是否有任何允许我初始化模拟内存 MongoDB 服务器的 python 库？

我正在使用持续集成。所以，我希望我的测试独立于任何运行 MongoDB 的服务器。有没有办法在内存中模拟 mongoDM 服务器以独立于连接到 Mongo 服务器来测试代码？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T14:00:03.887

您可以尝试：[https](https://github.com/vmalloc/mongomock) ://github.com/vmalloc/mongomock ，它旨在成为一个小型库，用于模拟 pymongo 集合对象以进行测试。

但是，与确保某些模拟库功能完整相比，我不确定仅运行 mongodb 的成本是否过高。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T02:10:05.553

我不了解 Python，但我对 C# 也有类似的担忧。我决定在我的工作站上运行一个真实的 Mongo 实例，指向一个空目录。这不是很好，因为代码不是孤立的，但它又快又容易。

只有数据访问层在测试过程中真正调用了 Mongo。其余的可以依赖于数据访问层的模拟。当我真的想验证与 Mongo 的交互是否正确时，我不觉得伪装 Mongo 值得付出努力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-23T00:28:15.717

您可以使用具有内存中 mongo db pymongo 连接替换的 Ming [。](http://merciless.sourceforge.net/tour.html#mongodb-and-ming)

```
import ming
mg = ming.create_datastore('mim://')
mg.conn # is the connection
mg.db # is a db with no name
mg.conn.somedb.somecol
# >> mim.Collection(mim.Database(somedb), somecol)
col = mg.conn.somedb.somecol
col.insert({'a': 1})
# >> ObjectId('5216ac3fe0323a1218f4e9aa')
col.find().count()
# >> 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-21T19:38:03.243

我也在使用*pymongo*并且**MockupDB**对于我的目的（集成测试）运行良好。

使用它很简单：

```
from mockupdb import *
server = MockupDB()
port = server.run()
from pymongo import MongoClient
client = MongoClient(server.uri)
import module_i_want_to_patch
module_i_want_to_patch.client = client 
```

[您可以在此处](https://mockupdb.readthedocs.io/tutorial.html)查看 MockupDB 的官方教程

# c++ - path setting for c++ include headers for vim

> ID：15915032
> 
> 赞同：12
> 
> 时间：2013-04-10T00:42:07.403
> 
> 标签：c++, vim, path, include

My vim has path settings as shown below.

```
path=.,/usr/include,, 
```

I think this is a default setting of 'path' I guess.

Because of this, `g` `f` opens c header files under the cursor.

But on C++ file C++ header files are not opened because the C++ header file location is not added to `path` variable of vim.

```
set path+=/usr/include/c++/4.6 
```

I think that this setting on `vimrc` would be a solution. But the problem is the actual directory location for C++ header file would be changed in every different linux distributions and g++ compiler versions.

How can I set path for c++ header files in a portable manner?

```
let g:gcpp_headers_path = system("g++ --version | grep g++ | awk '{print \"/usr/include/c++/\"$NF}'")

execute 'set path+=' . g:gcpp_headers_path 
```

Now I am using this above: This works with g++ environment. Not tested with other compilers.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T06:40:29.943

If there's a limited number of locations, a simple conditional in `~/.vimrc` will do:

```
if isdirectory('/usr/include/c++/4.6')
    set path+=/usr/include/c++/4.6
elseif isdirectory(... 
```

If you have a lot of different systems, and don't want to maintain all variations in a central place, you can move the system-dependent settings to a separate, local-only file, and invoke that from your `~/.vimrc`, like this:

```
" Source system-specific .vimrc first.
if filereadable(expand('~/local/.vimrc'))
    source ~/local/.vimrc
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-08T13:22:21.777

I recently had the same problem, so here is my solution for documentation purposes:

1) I added the following to my `.bashrc`:

```
# add additional search paths to vim.
VIM_EXTPATHS="$HOME/.vim.extpaths"
if [ ! -e "$VIM_EXTPATHS" ] || [ "/usr/bin/cpp" -nt "$VIM_EXTPATHS" ]; then
    echo | cpp -v 2>&1 | \
    awk '/^#include </ { state=1 } /End of search list/ { state=0 } /^ / && state { print "set path+=" substr($0, 2) "/**2" }' > $VIM_EXTPATHS
fi 
```

2) I added the following to my `.vimrc`:

```
" add extra paths.
let s:extpaths=expand("$HOME/.vim.extpaths")
if filereadable(s:extpaths)
    execute "source ".s:extpaths
endif 
```

On my system, the contents of the `.vim.extpaths` file are as follows:

```
set path+=/usr/lib/gcc/x86_64-linux-gnu/8/include/**2
set path+=/usr/local/include/**2
set path+=/usr/lib/gcc/x86_64-linux-gnu/8/include-fixed/**2
set path+=/usr/include/x86_64-linux-gnu/**2
set path+=/usr/include/**2 
```

The `**2` means that ViM will search two directories deep inside these directories. Now `gf` will find all the C++ headers I need. If you increase the depth, searches will take a lot more time, so don't set this number too high.

@note: for `#include <chrono>`, ViM will go to `/usr/include/boost/chrono`, which, funny enough, is a directory. I wonder why `go file` will open a directory, maybe this should be reported as a bug. To get to the correct `chrono` header you have to type `2gf`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-26T00:59:08.383

The following Vimscript code, intended for a `.vimrc` file, updates `path` to include the search paths used by the preprocessor.

```
if executable('gcc')
  let s:expr = 'gcc -Wp,-v -x c++ - -fsyntax-only 2>&1 | grep "^ " | sed "s/^ //"'
  let s:lines = systemlist(s:expr)
  for s:line in s:lines
    execute 'set path+=' . fnameescape(s:line)
  endfor
endif 
```

I have [similar code](https://github.com/dstein64/dotfiles/blob/9785ef242af879a613a9c5b12ce873a5fa8c1a62/packages/vim/.vimrc#L83-L105) in my `.vimrc`, but with additional special-case handling.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-10T01:42:30.007

There are specific environment variables for the compiler to examine. If you are using gcc/g++ in a linux/Unix environment, then the variables are `C_INCLUDE_PATH` and `CPLUS_INCLUDE_PATH`. If you are using bash/sh then use `export VARIABLE=value` or if you are using csh/tcsh then use `setenv VARIABLE value` or if you are using some other shell then you will need to look that up. In these examples `VARIABLE` is either `C_INCLUDE_PATH` and `CPLUS_INCLUDE_PATH`. I hope this helps.

# sql - 外部查询在内部查询之前运行

> ID：15915035
> 
> 赞同：9
> 
> 时间：2013-04-10T00:42:15.403
> 
> 标签：sql, sql-server, tsql

为什么这不起作用？

```
select *
from
(
    select membership_number
    from members
    where membership_number not like '%[^0-9]%'
) mem
where cast(membership_number as int) > 2 
```

请参阅[SQL Fiddle 演示](http://sqlfiddle.com/#!6/44b38/3)。

子查询应该过滤掉非数字的数据，外部查询将其转换为整数，以便我可以查找大于 2 的任何数据。

似乎它首先运行外部查询的 where 子句。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:09:52.250

也许是：

```
select *
from
(
    select
        membership_number
    from
        members
    where
        membership_number not like '%[^0-9]%'
) mem
where Try_Convert(int, membership_number) > 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:10:44.807

我之前有这个问题。我所做的是：

1，你可以有一个视图：

```
select membership_number
    from members
    where membership_number not like '%[^0-9]%' 
```

2，或者使用临时表

3、还是用例子句：

```
select *
from
(
    select membership_number
    from members
    where membership_number not like '%[^0-9]%'
) mem
where (CASE WHEN ISNUMERIC(membership_number) THEN cast(membership_number as int) ELSE 0 END) > 2 
```

没有一个优雅的解决方案，但希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T01:32:14.923

非常有趣，我试图在 SQL Server 上重现这个，然后找到了。我将您的查询更改为简单，以确保查询不会失败并且我可以看到执行计划：

```
select *
from
(
    select membership_number
    from members
    where membership_number not like '%[^0-9]%'
) mem
where membership_number > '2' 
```

执行计划是有表扫描和谓词：

```
[master].[dbo].[members].[membership_number]>'2' 
    AND NOT [master].[dbo].[members].[membership_number] like '%[^0-9]%' 
```

所以这是因为 SQL 优化引擎以这种方式工作（正如有人所说 - 没有人可以保证 where 子句的顺序）。修复它的一种方法可能是在之前使用 ISNUMERIC

```
select *
from
(
    select membership_number
    from members
    where membership_number not like '%[^0-9]%'
) mem
where ISNUMERIC(mem.membership_number) = 1 and cast(mem.membership_number as int) > 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:14:04.887

注释解释了执行计划如何（有时）选择`cast`评估`like`. 声明可以`case`帮助评估顺序，但正如亚当斯所说，即使这种方法也不是 100%。

```
select  *
from    members
where   case
            when membership_number like '%[^0-9]%' then 0
            when cast(membership_number as int) > 2 then 1
            else 0
        end = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T04:06:26.897

你可以试试这个，在下面的查询中执行第一个条件，如果它失败，那么它不会执行第二个条件

```
select
    membership_number
  from
    members
where 
isnumeric(membership_number) = 1 and 
cast(membership_number as int) > 2 
```

要回答为什么您的查询不起作用，请[在此处查看此说明](https://stackoverflow.com/a/2264085/125551)

# jekyll - 如何限制按前端过滤的帖子？

> ID：15915040
> 
> 赞同：4
> 
> 时间：2013-04-10T00:42:53.403
> 
> 标签：jekyll

我有 Jekyll 博客，其中有些帖子有“特色图片”，有些帖子没有。

特色图片在帖子的前面定义，如下所示：`featured-image: http://path/to/img`

在存档页面上，我想抓取三个具有特色图像的最新帖子并显示它们。

我想这需要一个 if 语句、一个计数器和一个循环，但我无法让这个为我工作：

```
<ul id="archive-featured">
  {% assign count = '0' %}
  {% if count < '4' %}
    {% for post in site.posts %}
      {% if post.featured-image == true %}
        {{ count | plus: '1' }}
        <li><a href="{{ post.url }}"><img src="{{post.featured-image}}" />{{ post.title }}</a></li>
      {% endif %}
    {% endfor %}
  {% endif %}
</ul> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:34:07.910

您的 YAML 问题看起来不错，但我不确定您是否需要计数分配才能完成这项工作。尝试使用 limit 来限制您在存档页面上分配的帖子数量。您也不需要为`{% if %}`语句分配一个“真”值来工作：

```
<ul id="archive-featured">
{% for post in site.posts limit:3 %}
  {% if post.featured-image %}
    <li>
      <a href="{{ post.url }}">
        <img src="{{ post.featured-image }}" />
        {{ post.title }}
      </a>   
    </li>
  {% endif %}
{% endfor %}
</ul> 
```

我相信这些帖子是由最近的帖子自动显示的，所以不需要在那里做额外的工作。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T20:40:32.820

一个很晚的答案：
我认为问题出在`{{count | plus: 1}}`. 这不只是输出计数+ 1，而不是分配它吗？您可以通过在 forloop 结束之前分配一个新变量来解决此问题

```
<ul id="archive-featured">
  {% assign count = 0 %}
  {% if count < 4 %}
    {% for post in site.posts %}
      {% if post.featured-image == true %}

        <li><a href="{{ post.url }}"><img src="{{post.featured-image}}" />{{ post.title }}</a></li>
{% count | plus: 1 %}
      {% endif %}
    {% endfor %}
  {% endif %}
</ul> 
```

一个可能很有趣的解决方法：如果你在前面添加另一个简单的语句，比如`featured: true`你可以使用 where 过滤器来只选择那些帖子。（遗憾的是，where 过滤器似乎不适用于比较）

```
<ul id="archive-featured">
  {% assign posts=site.posts | where "featured", "true" %}
    {% for post in posts | limit: 3%}
        <li><a href="{{ post.url }}"><img src="{{post.featured-image}}" />{{ post.title }}</a></li>
    {% endfor %}
</ul> 
```

# python - 抽象碰撞检测

> ID：15915042
> 
> 赞同：0
> 
> 时间：2013-04-10T00:42:58.550
> 
> 标签：python

我一直在努力解决如何在我正在编写的游戏中实现简单的方形碰撞检测，同时避免使用 Pygame；我想学习如何在不作弊的情况下做到这一点。预期的程序结构如下： 游戏加载一个包含关卡的文本文件。每个级别由 25 行 25 位数字组成（总共 625 位数字）。它被提取到二维数组中以模拟与屏幕对应的笛卡尔网格。从那里程序在屏幕上的适当位置绘制一个 32x32 块。例如，如果位置 [2][5] 处的数字是 1，它将在像素坐标 (96,192) 处绘制一个白色正方形（正方形的计数从零开始，因为它是一个数组）。它还为与原始数组对应的每个位置生成一个由 True 或 False 组成的碰撞数组。

我有一个沿网格自由移动的玩家对象，不限于 32x32 方格。我的问题是：我将如何实现方形碰撞检测？我已经尝试了很多方法，但我不太确定我在哪里卡住了。我将在下面发布我的最新版本和相关代码。

碰撞代码：

```
def checkPlayerEnvCollision(self,player):
    p = player
    c = self.cLayer #this is the collision grid generated when loading the level
    for row in range(25):
        for col in range (25):
            print("checkEnvCollision")
            if c[row][col] != False:
                tileleftx = row*32
                tilerightx = tileleftx + 32
                tilelefty = col*32
                tilerighty = tilelefty+32
                if (abs(tileleftx - p.x) * 2 < (tilerightx + (p.x + 32))) and (abs(tilelefty - p.y) * 2 < (tilerighty + (p.y + 32))):
                    print("OH NO, COLLISION") 
```

将文本文件中的图块加载到数组中的代码：

```
def loadLevel(self, level):
    print("Loading Level")
    levelFile = open(level)
    count=0
    for line in levelFile:
        tempArray = []
        if line.startswith("|"):
            dirs = line.split('|')
            self.north = dirs[1]
            self.south = dirs[2]
            self.east = dirs[3]
            self.west = dirs[4]
            continue

        for item in line:
            if item in self.tileValues:
                tempArray.append(int(item))
        self.tileLayer[count] = tempArray
        count+=1
    for items in self.tileLayer:
        if len(items) > 25:
            print("Error: Loaded Level Too Large")

    count = 0
    for line in self.tileLayer:
        tempArray = []
        for item in line:
            if self.tilePassableValues[item] == False:
                tempArray.append(False)
            else:
                tempArray.append(True)
        self.collisionLayer[count] = tempArray
        count += 1 
```

不确定这是否有用，但这里是绘图方法的简单演示：

```
def levelTiles(self, level):
    row = 0
    for t in level:
        col = 0
        for r in t:
            color = "white"
            if r == 0:
                col+=1
                continue
            elif r == 1:
                color = "red"
            elif r == 2:
                color = "white"
            elif r == 3:
                color = "green"
            self.Canvas.create_rectangle(row*32, col*32, row*32+32, col*32+32, fill=color, width=1,tags='block')
            col += 1
        row += 1 
```

最后，这是我一直在测试的文本文件：

```
1111111111111111111111111
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222233332222222222222221
1222233332222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222233332222222221
1222222222333332332222221
1222222222222222332222221
1222222222222222332222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1222222222222222222222221
1111111111111111111111111
|onescreen2|onescreen2|onescreen2|onescreen2 
```

（最后一行是到达关卡边缘时将地图加载到北、南、东和西的内容；您可以忽略它。）

谢谢您的帮助。有很多问题要问，但我坚持这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:50:40.327

如果玩家被绑在网格上，为什么不测试网格位置：

```
if grid[player.x][player.y] == some_collidable_thing:
    # there was a collision 
```

如果没有，
我还在[这个问题中提供了几乎相同的答案](https://stackoverflow.com/questions/15891592/pygame-collision-with-tiles-not-working/15891630#15891630)

```
def check_col(self, rect):
    for row in self.cLayer:
        for column in row:
            grid_position = (row*element_size, column*element_width)
            collide_x = False
            collide_y = False

            # check x axis for collision
            if self.rect.x + self.rect.w > grid_position[0]:
                collide_x = True
            elif self.rect.x < grid_position[0] + element_width:
                collide_x = True

            # check y axis for collision
            if self.rect.y < grid_position[1] + element_height:
                collide_y = True
            elif self.rect.y + self.rect.h > grid_position[1]:
                collide_y = True

            # act on a collision on both axis
            if collide_x and collide_y:
                # act on the collision
                return True
            else:
                # act on no collision
                return False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:27:42.687

一个更简单的方法是为玩家的运动定义向量，为对象的边界定义线条。然后检查向量是否与任何线碰撞（不应该检查很多线）如下（我假设玩家/对象可以在另一个对象的边界上）：

取由运动矢量和要检查碰撞的线的端点形成的三角形的行列式，并通过行列式取其面积。将其面积与另一个端点形成的三角形面积进行比较。如果它们都是正/负，则没有交集。如果他们的标志不同，那么可能会有一个交叉点。

如果它们的符号不同，则执行与上述相同的操作，只是使用运动矢量的端点而不是直线的端点。（并使用整条线而不是运动矢量）。

如果它们的符号不同，那么肯定有一个交叉点，如果它们相同，那么就没有交叉点。

我希望这会有所帮助（如果没有意义，请发表评论）。

# clojure - Clojure - 索引序列而不使用下一个

> ID：15915043
> 
> 赞同：2
> 
> 时间：2013-04-10T00:43:02.327
> 
> 标签：clojure, indexing, sequence

Clojure 新手，试图弄清楚如何在不使用大量 next 的情况下对序列进行索引。例如说我有序列：

(abcdefgh)

我想将返回序列的第 4 项的功能合并到一个函数中。除了 (next (next (next sequence_name))) 之外肯定还有什么办法？所以我可以将数字 4 传递给函数（或任何其他数字）并从序列中获取该项目。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:54:22.960

几种不同的方式：

```
(take 1 (drop 3 '(a b c d e f g h))) ;; d

(nth '(a b c d e f g h) 3) ;; d

(nth [a b c d e f g h] 3) ;; d

(nth (vec '(a b c d e f g h)) 3) ;;d 
```

我建议您熟悉 Clojure [Cheat Sheet](http://clojure.org/cheatsheet)中的序列操作函数——这完全值得。Clojure 的序列库非常丰富。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:54:46.967

好老人`nth`应该做的伎俩

```
user> (nth '(a b c d e f g h) 4)                                                                                                                                                   
e 
```

（当然是从 0 开始索引的）

# c - 在指向指针链的指针的指针末尾初始化值

> ID：15915046
> 
> 赞同：2
> 
> 时间：2013-04-10T00:43:29.837
> 
> 标签：c, pointers, gcc

好吧，我整天都在忙这个（不是硬件），虽然它可能不是特别有用的代码，但它是一个简洁的概念性东西。我试图找出在末尾设置值的最佳方法，因为没有更好的名称，指向指针链的指针。例如，我声明：

```
int *****ptr; 
```

将每个指针设置为指针段的最佳方法是什么，一直到实际的 int 值？

此代码无法编译，因为它不喜欢我使用和取消引用 void 指针的方式：

```
#include <stdio.h>
#include <stdlib.h>

#define NUMPOINTERS 5

int main(int argc, char **argv)
{
    int *****number;
    *****number = malloc(sizeof(void*));
    void *ptr = *number;

    int i;

    for(i = 1; i < NUMPOINTERS; i++)
    {
        if(i == NUMPOINTERS - 1)
        {
            ptr = malloc(sizeof(int));
            int *iPtr = (int*)ptr;
            *iPtr = 900;
            break;
        }

        *ptr = malloc(sizeof(void*));
        ptr = **ptr;
    }

    printf("%d", *****number);

    return 0;

} 
```

是否有一些文章讨论了指向指针的荒谬数量以及如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:59:08.307

你所拥有的非常接近。不过，您可能想从内到外工作。这是基于您的程序的完整示例（内联注释）：

```
#include <stdio.h>
#include <stdlib.h>

#define NUMPOINTERS 5

int main(void)
{
    void *ptr = malloc(sizeof(int)); // allocate space for the integer value
    *(int *)ptr = 900;               // initialize it 

    // iterate to create the nested pointers
    for (int i = 1; i < NUMPOINTERS; i++)
    {
        void **newptr = malloc(sizeof(void *)); // create a new pointer
        *newptr = ptr;                          // point it at what we have so far
        ptr = newptr;                           // "step out" one level
    }

    int *****number = ptr;        // make our 'int *****' pointer
    printf("%d\n", *****number);  // dereference and print the pointed-to value

    return 0;
} 
```

# java - 大写Java程序

> ID：15915048
> 
> 赞同：0
> 
> 时间：2013-04-10T00:43:37.693
> 
> 标签：java

给出的指导是：编写一个程序，提示并接受用户的一行文本，然后将其打印出来，除了紧跟在空格后面的字符外，每个字符都小写。这些字符要大写。

注意：不要拆分字符串

*   接受来自用户的字符串
*   将所有字符转为小写
*   单独遍历每个字符并将空格后面的字符大写

我当前的代码：

```
import java.util.Scanner;

public class Capitalize
{
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    System.out.print("Enter a line of text:");
    String TextLine = input.next();
    //String FirstLetter = input.next();
    String NewTextLine = " ";
    int Length = TextLine.length();
    System.out.print("The all lower case line of text is: " + TextLine);
    for(int i = 0; i < Length; i++)
    {
        char Letter = TextLine.charAt(i);
        System.out.print(Letter);
        if(Letter != ' ') 
        {
            Letter = Character.toLowerCase(TextLine.charAt(i));
        }
        else
        {
            Letter = Character.toUpperCase(TextLine.charAt(i));
        } 
        NewTextLine = NewTextLine + Letter;
        }
        System.out.print("\nThe new text line of text is: " + NewTextLine);
    }
} 
```

**输出是：**

输入一行文本：aBc Def GHIJ 全小写的文本行是：aBcaBc 新的文本行是：abc

这不是我想要的输出。我想采用“ aBc DeF GHIJ ”并输出所有小写字母“ abc def ghij ”，并将新文本行设为“ Abc Def Ghij ”

有人可以帮我弄清楚我的代码哪里出错了吗？以及如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:45:03.747

您正在将 a`char`与文字进行比较`String` `" "`：

```
if(Letter != " ")
   char      String 
```

通过文字字符更改空格`' '`。

```
if(Letter != ' ') 
```

从[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)：

> 字符和字符串文字
> 
> 始终对字符文字使用“单引号”，对字符串文字使用“双引号”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:46:10.500

改变

```
Letter != " " 
```

至

```
Letter != ' ' 
```

双引号用于字符串，单引号用于字符。

你也可以这样做：

```
Letter != 040  // Octal
Letter != 32   // Integer
Latter != 0x20 // Hexadecimal 
```

这些是 Space 的[ASCII 值](http://www.asciitable.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T00:46:32.450

似乎您已在某处将 Letter 定义为 char 。使用双引号 (" ") 表示字符串。单引号 (' ' ) 表示一个字符。所以，`if(Letter != " ")`改为`if(Letter != ' ')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T00:46:38.027

您正在将 char 与字符串进行比较。对象的原始类型。

将您的代码更改为 if(Letter != ' ')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T01:00:16.257

正如已经指出的那样，您不应该使用`Letter != " "`，而是可以使用[`Character.isSpaceChar(Letter)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isSpaceChar%28char%29)or[`Charater.isWhiteSpace(Letter)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isWhitespace%28char%29)

# c# - 加载 RSS XML 时出错：未找到命名空间名称为“”的元素“通道”。

> ID：15915049
> 
> 赞同：3
> 
> 时间：2013-04-10T00:43:46.167
> 
> 标签：c#, .net, rss

我这里有个例外

```
var stream = e.Result;
var response = XmlReader.Create(stream);
var feeds = SyndicationFeed.Load(response); // IT IS HERE 
```

**例外**

> 未找到名称空间名称为“”的元素“通道”。第 8 行，位置 2。

RSS 看起来像：

```
 <rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
 <atom:link href="http://dallas.example.com/rss.xml" rel="self"
 type="application/rss+xml" /> <channel> <title>News</title>
 <link>http://www.samsung.com/us</link> <description>News</description>
 ... 
```

[http://validator.w3.org/feed/](http://validator.w3.org/feed/)说“这是一个有效的 RSS 提要”。（您可以在这里查看[http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Fwww.samsung.com%2Fus%2Ffunction%2Frss%2FrssFeedItemList.do%3FctgryCd%3D101% 26typeCd%3DNEWS](http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Fwww.samsung.com%2Fus%2Ffunction%2Frss%2FrssFeedItemList.do%3FctgryCd%3D101%26typeCd%3DNEWS) )

所以我不知道发生了什么...... :(

我们可以解决方法来抑制[SyndicationFeed 类](https://www.google.com.uy/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCkQFjAA&url=http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx&ei=YLVkUd-pBobc9QTYvoGgAQ&usg=AFQjCNEKu8-GnZML3UVFSn_bt63Uuc-dEQ&sig2=ADXanIyC3xu_EB74GrT-_g&bvm=bv.44990110,d.eWU)的一些验证消息吗？

感谢您提供任何让我有机会忘记这个例外的解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:27:46.963

如果您查看您列出的 W3 验证的结果，它会显示：

```
line 8, column 0: Undocumented use of atom:link 
```

放置在元素`atom:link`之前的`channel`元素导致`SyndicationFeed`类在加载时失败。您可以通过在本地下载 rss 提要 xml、删除/注释该`atom:link`行并再次运行您的代码来自行测试。如果没有该行，则会加载 xml 并找到提要。这在课堂上曾经[发生过](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/1ecd41a0-83a3-4ac7-9abc-5ff08b52b890/)`SyndicationFeed`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-17T00:36:07.650

感谢[迈克尔的回答](https://stackoverflow.com/a/15915882)，我能够预处理有问题的 XML（它不在我的控制之下）以移动错误的`atom:link`元素：

```
private static readonly XName AtomLink = XName.Get( "link", "http://www.w3.org/2005/Atom" );
private static readonly XName Channel = XName.Get( "channel" );

...
var document = XDocument.Load( stream );
var channel = document.Root.Element( Channel );
foreach( var misplacedLink in document.Root.Elements( AtomLink ) ) {
    misplacedLink.Remove( );
    channel.Add( misplacedLink );
}

using( var reader = document.CreateReader( ) )
    return SyndicationFeed.Load( reader ); 
```

# android - 钛合金编译安装安卓设备失败

> ID：15915050
> 
> 赞同：0
> 
> 时间：2013-04-10T00:43:49.137
> 
> 标签：android, titanium

当我用钛制作时，我第一次尝试运行我的第一个应用程序，然后我托盘将我的应用程序从钛工作室安装到我的设备上。我已将我的设备更改为调试模式，然后我尝试从钛工作室将我的应用程序安装到我的设备，但我从控制台收到此消息错误：

```
[INFO] logfile = C:\Users\user\My Documents\Titanium_Studio_Workspace\DStray\build.log
[DEBUG] C:\Users\zakki.a\AppData\Roaming\Titanium\mobilesdk\win32\3.0.2.GA\android\builder.py install DStray C:\KANTOR\tools\adt-bundle-windows-x86\sdk C:\Users\user\My Documents\Titanium_Studio_Workspace\DStray com.dstray.user 4
[INFO] plugin=C:\Users\user\AppData\Roaming\Titanium\plugins\ti.alloy\1.0\plugin.py
[INFO] Detected compiler plugin: ti.alloy/1.0
[INFO] alloy app found at C:\Users\user\My Documents\Titanium_Studio_Workspace\DStray\app
[INFO] Executing Alloy compile:
[INFO]   alloy.cmd compile C:\Users\user\My Documents\Titanium_Studio_Workspace\DStray\app --no-colors --config platform=android,version=8,simtype=none,devicefamily=none,deploytype=test,
'node' is not recognized as an internal or external command,

operable program or batch file.

[ERROR] Alloy compile failed 
```

谁能帮助我为什么会发生这种情况？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:59:42.193

当我尝试创建一个新的移动项目时（在新的 Titanium Studio 安装之后），我收到以下错误消息：

> 'node' 不是内部或外部命令、可运行程序或批处理文件。

我安装了 Node.JS 版本：v0.8.22 版本。

将 Node.JS ( [http://nodejs.org/](http://nodejs.org/) ) 升级到最新版本：v0.10.9 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:18:24.997

你在你的电脑上安装了nodeJS吗？

# xcode - 同一类中的附加 .m 文件

> ID：15915051
> 
> 赞同：1
> 
> 时间：2013-04-10T00:43:52.163
> 
> 标签：xcode, cocoa, class

在 Cocoa/xCode 中，我有一个类位于一个巨大的 .m 文件中，并且想将 .m 文件拆分为 2 个 .m 文件，但仍然来自同一个类。所以我可以从第一个 .m 文件中调用 [self myFunctionInSecond.mfile] 。

我怎样才能做到这一点 ？
谢谢 ！

# c# - 如何将PictureBox中的JPG部分变白透明

> ID：15915055
> 
> 赞同：1
> 
> 时间：2013-04-10T00:44:27.473
> 
> 标签：c#, transparency, picturebox

我有一个 JPG 图像，并将它放在一个表格的图片框中，但是，它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/uIwVm.png)

我怎样才能使图片的白色部分消失，只出现彩色部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:52:46.430

您可以在 Bitmap 类上使用[MakeTransparent方法。](http://msdn.microsoft.com/en-us/library/8517ckds.aspx)所以它会像

```
Bitmap b = new Bitmap("img.jpg")
b.MakeTransparent(Color.White);
pictureBox.Image = b; 
```

但我建议您使用 PNG 而不是 JPG，原因是：a）更好的质量（对于像这样的图像）c）像这样的图像更小的尺寸 b）对透明背景的原生支持。

看看它们之间有什么区别[http://www.bing.com/search?setmkt=en-US&q=PNG+vs+JPG](http://www.bing.com/search?setmkt=en-US&q=PNG+vs+JPG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:48:03.360

尝试

```
 Bitmap bmp = (Bitmap)Image.FromFile( @"C:\your_k.bmp" ); //Load a bitmap from file
    bmp.MakeTransparent(Color.White) //Do the work!
    //if you have a varient color combination you can use RGB Combination as follows
    //bmp.MakeTransparent( Color.FromArgb( 255, 255 255 ) ); //  (255 255, 255) is  white!
    this.pictureBox1.Image = bmp;
    this.pictureBox1.BackColor = Color.Transparent; //makes humbly only your object! 
```

# jquery - 响应式设计，媒体查询宽度与实际宽度的差异

> ID：15915061
> 
> 赞同：1
> 
> 时间：2013-04-10T00:45:14.203
> 
> 标签：jquery, css, html, media-queries, modernizr

抱歉，如果描述太长，我只是想提供尽可能多的信息。
最近我遇到了一个问题（我修复了它，但我不明白为什么会这样）。
问题是当您调整浏览器的大小时，例如宽度为 768 像素，媒体查询不起作用。为了工作，我不得不将浏览器宽度再减少大约 20-30 像素。

**例如，当宽度小于 750px 时，768px 媒体查询很快就会起作用。** 这是简化的代码。
HTML：

```
<div id="wrapper">
    <header id="header">
        <a href="" class="logo">
        <img src="images/logo-wide.png" alt="logo" />
        </a>
        <a id="menu_button" href="#">menu</a>
        <nav id="nav">
            <ul id="menu">
                <li><a href="" class="home">Home</a></li>
                <li><a href="" class="services">Services</a>
                ... more navidation list items
            </ul>
        </nav>
    </header>
    ... more code which is not relevant
</div> 
```

CSS：

```
@media screen and (max-width: 768px) 
{
    div#wrapper
    {
        max-width:768px;
        margin:0 auto;
    }
    a.logo
    {
        display:block;
        float:left;
        width:80%;
        padding:25px 0;
        height:33px;
    }
    a#menu_button
    {
        width:20%;
        float:left;
        display:block;
        padding:50px 0 15px;
        height:18px;
    }
    /* menu
    ----------------------*/
    nav,
    #nav
    {
        width:100%;
        float:left;
        display:none;
    }
    ul#menu ul
    {
        display:none;
    }
    ul.sub.active
    {
        display:block !important;
    }
    ul#menu li
    {
        float:none;
    }
    ul#menu a
    {
        width:100%;
        padding:20px 0;
        text-align:left;
        text-indent: 70px;
        display:block;
        margin-top: 1px;
    }
}

@media screen and (min-width: 769px) 
{
    div#wrapper
    {
        max-width:960px;
        margin:5px auto;
    }
    a.logo
    {
        display:block;
        float:left;
        padding:20px 35px;
    }
    a#menu_button
    {
        display:none;
    }
    /* menu
    ----------------------*/
    nav,
    #nav
    {
        float:right;
        display:block;
    }
    .activemobile
    {
        display:block !important;
    }
    ul#menu li
    {
        float:left;
    }
    ul#menu a
    {
        width:90px;
        padding:50px 0 5px;
        display:block;
        margin: 0 0 0 2px;
    }
    ul#menu ul
    {
        display:none;
        position:absolute;
        margin-left:2px;
        right:0;
    }
    ul#menu li:hover ul
    {
        display:block;
        z-index:999;
    }
    ul#menu ul li
    {
        float:left;
    }
    ul#menu ul li a
    {
        width:80px;
        padding:5px;
        font-size:12px;
        margin:2px 0 0 2px;
    }
    ...
} 
```

无效的代码：

```
ww = document.body.clientWidth;// i take this on window resize and on load
var adjustMenu = function() {
    if (ww < 768) {
        if (!$("#nav").hasClass("active")) {
            $("#nav").hide();
        } else {
            $("#nav").show();
        }
    ... 
```

有效的代码（我使用modernizr）

```
var adjustMenu = function() {
    if (Modernizr.mq('(max-width: 768px)')) {
        if ($("#nav").hasClass("active"))
            $("#nav").show();
        else
            $("#nav").hide();
... 
```

有人能告诉我为什么媒体查询没有工作有大约 20-30px 的间隙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:55:11.153

`.clientWidth`返回元素的内部宽度，即它不包括边框、边距或垂直滚动​​条宽度

[https://developer.mozilla.org/en-US/docs/DOM/element.clientWidth](https://developer.mozilla.org/en-US/docs/DOM/element.clientWidth)

媒体查询中的 [min|max]-width 媒体功能返回渲染表面或窗口的宽度

[https://developer.mozilla.org/en/docs/CSS/Media_queries#width](https://developer.mozilla.org/en/docs/CSS/Media_queries#width)

这就是你得到区别的地方。

你可以`window.innerWidth`改用；它包括滚动条宽度。

[https://developer.mozilla.org/en-US/docs/DOM/window.innerWidth](https://developer.mozilla.org/en-US/docs/DOM/window.innerWidth)

有关处理所有浏览器怪癖的令人难以置信的彻底解决方案，请参阅[https://github.com/tysonmatanich/viewportSize](https://github.com/tysonmatanich/viewportSize)

# java - 准备好的语句如何与 Apache DBUtils 一起使用？

> ID：15915063
> 
> 赞同：1
> 
> 时间：2013-04-10T00:45:27.090
> 
> 标签：java, prepared-statement, apache-commons-dbutils

准备好的语句如何与 Apache DBUtils 一起使用？

似乎 org.apache.commons.dbutils.* 的大多数方法都需要字符串参数。令人惊讶的是，没有一种方法可以接受 PreparedStatements。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-19T04:32:07.687

Prepared Statements 在 DbUtils 内部使用，但是，prepared statement 的重点不是每次更新时都准备一个语句，而是重用它，只更改参数。假设您必须插入 1000 条记录，您想重用相同的准备好的语句，只更改参数。为此，请使用 QueryRunner.batch 而不是 QueryRunner.update。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:11:16.403

从[示例页面](http://commons.apache.org/proper/commons-dbutils/examples.html)

```
// Execute the query and get the results back from the handler
Object[] result = run.query(
    "SELECT * FROM Person WHERE name=?", h, "John Doe"); 
```

这表明必须使用 PreparedStatement。在我们看到[的查询方法的源代码中](http://svn.apache.org/viewvc/commons/proper/dbutils/trunk/src/main/java/org/apache/commons/dbutils/QueryRunner.java?view=markup)

```
private <T> T query(Connection conn, boolean closeConn, String sql, 
                     ResultSetHandler<T> rsh, Object... params)
...
PreparedStatement stmt = null;
ResultSet rs = null;
T result = null;

try {
    stmt = this.prepareStatement(conn, sql);
    this.fillStatement(stmt, params);
    rs = this.wrap(stmt.executeQuery());
    result = rsh.handle(rs);
} catch (SQLException e) {
... 
```

结论？ `PreparedStatement`s正在使用，完全不用担心。

# asp.net-mvc-4 - 外化剔除模板

> ID：15915065
> 
> 赞同：2
> 
> 时间：2013-04-10T00:45:42.550
> 
> 标签：asp.net-mvc-4, knockout.js

我正在使用 knockout.js 和 asp.netmvc。虽然我熟悉 knockout.js，但我不确定如何将模板外部化。所以，

1.)如何将淘汰模板外部化 2.)有没有办法像我们在 MVC4 中捆绑 css 和 JS 一样捆绑模板

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:49:54.460

你看过[淘汰赛外部模板](https://github.com/ifandelse/Knockout.js-External-Template-Engine)吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:14:44.730

使用 Razor 作为您的视图引擎，您可以为模板创建部分视图，然后将它们包含在`Html.Partial()`：

```
<script type="text/html" id="person-template">
    @Html.Partial("person")
</script> 
```

# r - R 中的 agrep - 在字符串中查找 *all* 匹配项（全局标志）

> ID：15915066
> 
> 赞同：5
> 
> 时间：2013-04-10T00:45:45.027
> 
> 标签：r, agrep

我有一个字符串：

```
string <- "I do not like green eggs and ham!" 
```

和一个图案

```
pattern <- "(egs|ham)" 
```

**我想知道有多少次`pattern`与`string`模糊匹配 (agrep) 匹配**。

`gregexpr`将为正常匹配执行此操作 - 我只想知道`garegexpr`R 中是否有对应的或模拟它的方法而不会太重。

（`aregexec`将只返回第一个匹配的索引，“eggs”，并跳过“ham”）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T01:42:34.360

您没有指定需要基本 R，所以我很乐意建议使用 Hadley Wickham 的“stringr”包中的 str_count(string, pattern) 函数。

```
library(stringr)
string <- "I do not like green eggs and ham!"
pattern <- "(egs|ham)"
str_count(string, pattern)
[1] 1 
```

stringr 确实是一个很棒的 R 包。充满了各种字符串的用处。

# android - 按钮单击显示 android 数据库中的下一张图片

> ID：15915068
> 
> 赞同：0
> 
> 时间：2013-04-10T00:45:48.393
> 
> 标签：android, database, button, gridview, imageview

所以我一直在挠头，想弄清楚该怎么做。

提供更多信息：

我有一个网格视图，其中包含从数据库中获取的一堆图片。当有人点击一张图片时，一个新的活动开始，并且有一个图像视图显示被点击的同一张图片。上面我已经编码了，除了可以改变imageview的按钮。

现在我想实现一个按钮，该按钮基本上显示数据库中的下一张图片（或gridview右侧的下一张图片）。

我正在寻找一个按钮，当按下该按钮时，它将切换图像视图以显示来自我的数据库的不同图像。

我曾尝试使用 imageswitcher、viewswitcher 和其他一些东西，但无济于事。

我有一个名为“GetPic”的函数，它获取单击的图片（来自可绘制）的路径，以便它可以在新活动的图像视图中显示它。

如果需要任何其他信息，我很乐意分享。

谢谢！

编辑：getpic 是我从数据库中获取可绘制路径的函数。如果我放 (GetPic(activity_here.pos)) activity_here.pos 会给 GetPic 来自 gridview 的位置（选择了哪张图片），然后 GetPic 吐出所选图片的路径，以便它可以显示在 imageview

如果我这样做 (GetPic(activity_here.pos+1)) 这将显示下一张图片（这是我想要的），只要我让按钮简单地添加一个到位置，我必须将我的图像视图变成“最终”所以我只能得到下一张图片一次（我不想要），直到我用完图片来展示（我想要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:12:31.743

检查这个：[Android：ImageSwitcher](https://stackoverflow.com/questions/5950831/android-imageswitcher) 这也会帮助你：[https](https://www.youtube.com/watch?v=Jc11oWIjz-w) ://www.youtube.com/watch?v=Jc11oWIjz-w & 不要忘记第三部分。祝你好运 。

# java - 如何从java中的shapefile中获取城市名称

> ID：15915069
> 
> 赞同：1
> 
> 时间：2013-04-10T00:46:03.807
> 
> 标签：java, gis, shapefile

我很难理解 shapefile 的概念。我已经下载了形状文件，到目前为止，我了解到我必须使用 geotool 之类的工具（我使用的是 Java）将这些文件转储到 mysql 中。我的疑问是，如果我有纬度和经度，我怎么能得到这些经纬度所在的城市名称？我不想使用谷歌反向地理编码。我在这方面的知识非常有限，所以如果我的问题不清楚，请告诉我，我会更清楚地解决它......任何链接都会有帮助......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:16:46.157

您可以存储一些结构来存储城市覆盖的纬度、经度范围。您可以将其建模为矩形或圆形的 x,y 坐标。然后你做一个测试

```
if(city.contains(latitude, longitude) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:22:08.437

您可以从查看 GeoTools 的[Shapefile 数据存储](http://docs.geotools.org/latest/javadocs/org/geotools/data/shapefile/ShapefileDataStore.html)开始，以读取和操作您的数据集。

现在，为了“获取城市名称”，除非您提供有关您正在使用的数据的一些信息，否则很难知道您的意思。

# android - iOS 连接到数据库的正确架构？

> ID：15915075
> 
> 赞同：0
> 
> 时间：2013-04-10T00:46:32.127
> 
> 标签：android, ios, security, mobile

我是一名 Web 开发人员，正在着手创建移动 (iOS/Android) 应用程序。

因此，我想了解的是我应该如何构建移动应用程序以访问（发布/更新/删除）存储在中央服务器上的数据。

出于说明目的，假设我正在创建一个移动食谱应用程序（名为“MyRecipeApp”）。我想与 MyRecipeApp 的其他食谱用户分享一些食谱，以及我想对自己保密的一些食谱。

为了共享食谱，所有食谱（私有的和可共享的）都存储在一个集中的（服务器）数据库中，MyRecipeApp 访问该数据库以获取该信息。

因此，我有几个问题：

1.  使用 MyRecipeApp，我如何访问数据库？我是否让 MyRecipeApp 可以与数据库对话，可以公开访问我的数据库？如果是这样，那似乎不安全。

2.  我是否将 SQL 硬编码到 MyRecipeApp 中（例如 SELECT * FROM RECIPES WHERE USER = "John Smith"）以访问数据库以获取食谱？如果是这样，从某种意义上说，这似乎是不安全的，因为有人可以破解我的移动应用程序并更改 SQL 以获取任何信息。

3.  您是否将每次提取的用户名/密码发送到数据库？如果是这样，您如何加密数据库和 MyRecipeApp 之间的流量。

4.  在我应该如何构建移动应用程序时，我还没有考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:50:32.430

1.  通过 API 连接（可能是 RESTful HTTP API）。
2.  不要对 SQL 进行硬编码。相反，进行 API 调用，传递参数。
3.  是的，在每个请求中发送身份验证信息并使用 HTTPS，或者仅在第一次请求时发送用户名和密码并获取会话令牌并在后续请求中使用它，但仍使用 HTTPS。
4.  考虑以 JSON 格式发送和接收数据。

# javascript - 获取 json 文件时出错

> ID：15915082
> 
> 赞同：0
> 
> 时间：2013-04-10T00:47:14.343
> 
> 标签：javascript, jquery, html, json

我有一个用于获取 json 文件的 javascript 文件，如果它成功，它将执行一个功能，如果不是，它会显示一个警告窗口，显示“错误”，但虽然语法看起来正确，但我得到一个每次都有错误的警报窗口。

这是两个文件

```
var firstName = [];
var lastName = [];
var email = [];
var password = [];
var i;

function insertRecord() {
$.ajax({
    type: "GET",
    url: "studio.json",
    dataType: "json",
    success: insertData,
    error: function(){ alert("error"); }
});

function insertData(data) {
    if (localStorage) {
        for (i = 0; i < data.User.length; i++) {
            localStorage.setItem(firstName[i], data.User.firstName[j]);
            localStorage.setItem(lastName[i], data.User.lastName[j]);
            localStorage.setItem(email[i], data.User.email[j]);
            localStorage.setItem(password[i], data.User.password[j]);
        }

        localStorage.setItem(firstName[i], document.getElementById("firstName").value);
        localStorage[firstName[i]] = document.getElementById("firstName").value;
        localStorage.setItem(lastName[i], document.getElementById("lastName").value);
        localStorage[lastName[i]] = document.getElementById("lastName").value;
        localStorage.setItem(email[i], document.getElementById("email").value);
        localStorage[email[i]] = document.getElementById("email").value;
        localStorage.setItem(password[i], document.getElementById("password").value);
        localStorage[password[i]] = document.getElementById("password").value;

        alert(localstorage[firstName]);
    }

    else
        alert("Your browser does not support Local Storage");
} 
```

}

json 文件称为 studio.json

```
{
    "Students":[
           { "first":"Arnold", "last":"Matthews", "class":"Tiny Tutus" },
           { "first":"Keesha", "last":"Franklin", "class":"Breakdancing"},
           { "first":"Dorothy", "last": "Ann", "class":"Acro"},
           { "first":"Wanda", "last": "Li", "class":"Ballet"},
           { "first":"Phoebe", "last": "Terese", "class":"Tap"}
    ],
    "Classes":[
        { "name":"Tiny Tutus", "time":"450","AMPM":"PM", "students":12},
        { "name":"Breakdancing", "time":"230","AMPM":"PM", "students":6},
        { "name":"Acro", "time":"810","AMPM":"AM", "students":15},
        { "name":"Tap", "time":"520","AMPM":"PM", "students":11},
        { "name":"Ballet", "time":"620","AMPM":"PM", "students":15},
        { "name":"Jazz", "time":"740","AMPM":"AM", "students":8 }
    ],
    "User":[
        {
        "firstName": "Michael",
        "lastName": "Jones",
        "username": "MJone",
        "email": "Michael.Jones@email.com",
        "password": "qwerty"
        },
        {
        "firstName": "Michelle",
        "lastName": "Lee",
        "username": "MLee",
        "email": "Michelle.Lee@gmail.com",
        "password": "asdfgh"
        },
        {
        "firstName": "Andrew",
        "lastName": "Bob",
        "username": "ABob",
        "email": "Andrew.Bob@hotmail.com",
        "password": "zxcvbn"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:52:58.477

你知道你可以只存储 JSON 字符串，然后再解析它吗？

```
function storeUser() {
    return $.ajax({
        type: "GET",
        url: "studio.json",
        dataType: "text"
    });
}

if ( ! localStorage.getItem('user') ) {
    storeUser().done(function(json) {
        user = JSON.parse( json );
        localStorage.setItem('user', json);
    });
}else{
    user = JSON.parse( localStorage.getItem('user') );
} 
```

但是您将不得不等待异步调用再次完成！

MDN 也有一个用于 localStorage 的[polyfill](https://developer.mozilla.org/en-US/docs/DOM/Storage)，因此它也适用于不支持的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:03:00.920

你需要做一些叫做“调试”的事情。重写`error`处理程序以获取 jQuery 传递给它的参数，然后使用 console.log 打印它们，或者断点并在调试器中检查它们。这是错误的签名：

> 类型：函数（jqXHR jqXHR，字符串 textStatus，字符串 errorThrown ）
> 
> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象、描述发生的错误类型的字符串和可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。

# c# - 使用 Javascript 折叠 RadFileExplorer

> ID：15915087
> 
> 赞同：2
> 
> 时间：2013-04-10T00:47:30.837
> 
> 标签：c#, javascript, vb.net, telerik, rad-controls

我有一个 RadFileExplorer，我的问题是在关闭 javascript 中的弹出页面后我找不到折叠节点的方法。我的代码不起作用。

```
function collapseNodes() {
        $find("<%= RadAjaxPanel1.ClientID%>").ajaxRequestWithTarget("<%= RadAjaxPanel1.UniqueID %>", "Refresh");
        var explorer = $find("<%=RadFileExplorer1.ClientID%>"); 
        var tree = explorer.get_tree();
        var nodes = tree.get_allNodes(); --> this part is not working
        nodes.forEach(function(node) {   --> this part is not working
            if (node.get_expanded())     --> this part is not working
                node.set_expanded(false);--> this part is not working
        });
    } 
```

* * *

```
<telerik:RadFileExplorer runat="server" ID="RadFileExplorer1" Width="100%" EnableOpenFile="false" 
    EnableCreateNewFolder="true" OnItemCommand="RadFileExplorer1_ItemCommand" OnExplorerPopulated="RadFileExplorer1_ExplorerPopulated"  

    DisplayUpFolderItem="false" >
    <keyboardshortcuts delete="delete" uploadfile="Ctrl+u" newfolder="Ctrl+n" />
</telerik:RadFileExplorer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:59:15.437

您首先需要从树视图对象中**获取 get_nodes() ：** [http](http://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreeview.html) ://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreeview.html 。

然后，**get_count()**将返回计数，以便您可以进行 for 循环，节点集合中没有 forEach 方法：[http ://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreenodecollection .html](http://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreenodecollection.html)。

只有这样，您才能将给定节点的客户端 API 用于 get_expanded() 和 set_expanded()：[http](http://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreenode.html) ://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreenode.html 。看一下第一篇文章中 get_nodes() 方法下面的示例。

# jquery - jQuery 对话框关闭按钮位置更改

> ID：15915093
> 
> 赞同：1
> 
> 时间：2013-04-10T00:48:11.313
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery UI 1.10.x。我想将关闭按钮移到右侧。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:52:28.130

没有用于移动按钮的内置选项。

您可以使用自己的样式表 (css) 来实现它。

* * *

请参阅下面的CSS。

```
.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {
    float: right;
} 
```

# javascript - 在 keyup tinymce 上返回文本长度

> ID：15915098
> 
> 赞同：2
> 
> 时间：2013-04-10T00:48:56.367
> 
> 标签：javascript, tinymce

我需要从 keyup 上的 tinymce 编辑器获取当前文本长度（只有没有 html 标签的文本长度）。我所做的是

1.  使用抓取内容`getContent();`
2.  [使用strip_tags](http://phpjs.org/functions/strip_tags/)剥离标签（不是 php，而是自定义 js）
3.  并返回文本长度。

看：

```
...
setup : function(ed) {
        ed.onKeyUp.add(function(ed, e) {
        var text = strip_tags(tinyMCE.get('long_text').getContent(),'<img>');
        console.log(text.length);
        });
}
... 
```

我得到的是长度：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
this is tag-stripped text 
```

我只需要没有标签甚至 DOCTYPE 的文本长度，例如：

```
this is tag-stripped text 
```

但是，问题是它没有删除 DOCTYPE，我尝试使用删除它`regex replace()`但仍然不起作用。我的英文一点都不好，希望能简单解释一下。目标是从 tinymce 编辑器中抓取文本，甚至没有任何标签，甚至 DOCTYPE 并获取长度。我怎么能正确地做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:57:13.620

使用 jQuery 使用这个 javascript 代码来获取编辑器的文本内容

```
var plain_text = $(tinyMCE.get('long_text').getBody()).text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:29:21.380

你可以试试

```
ed.onKeyDown.add(function(ed, evt) {

  console.log($(ed.getBody()).text().length);

} 
```

无论如何，如果这对您不起作用，请尝试，

```
 ----
 console.log(getStats('long_text').chars);
  -----

// Returns text statistics for the specified editor by id
            function getStats(id) {
                var body = tinymce.get(id).getBody(), text = tinymce.trim(body.innerText || body.textContent);

                return {
                    chars: text.length,
                    words: text.split(/[\w\u2019\'-]+/).length
                };
            } 
```

# html - CSS：在另一个浮动列下浮动一列

> ID：15915100
> 
> 赞同：0
> 
> 时间：2013-04-10T00:48:59.697
> 
> 标签：html, css

我正在尝试对网站进行一些维护，但我注意到一个页面有点不正常。它们是左侧列的容器 div，右侧是内容的容器 div，以及整个页面内容的另一个容器。在页面底部，但在页脚之前，连续三列，它们落入主容器中，都在单独的div中（相同的div类），都向左浮动。

这在每个页面上都可以正常工作，除了一个。右边的内容不足以将三列向下推到左边大列的下方。所以你得到的是一行中的两列浮动在左边的大列上，而不是靠在容器上，第三列浮动在第二列下方。

三个较小列的 CSS 是：

```
.FBG .blok {
    width:270px;
    float:left;
    padding:5px 20px;
    margin:0;
} 
```

每个页面上的代码都是一样的，但就像我说的，这个页面的不同之处在于右 div 中没有足够的内容来下推列。

有没有办法围绕这个问题进行合理的编码？或者我需要在这个页面中添加另一个嵌套的 div 吗？感谢您的任何回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:26:35.603

我刚刚想通了！我所要做的就是创建一个清除浮动的 div 类。这是我在课堂上写的：

```
.clr {
    clear:both;
    padding:0;
    margin:0;
} 
```

我把它放在容器类中，但就在单个列 div 之前。像魅力一样工作！

# c# - 在 ASP.NET MVC 4 中添加控制器数据库错误

> ID：15915104
> 
> 赞同：1
> 
> 时间：2013-04-10T00:49:19.933
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-scaffolding

将添加控制器助手/脚手架与实体框架 CRUD 集成一起使用时，我收到以下错误：

```
Unable to retrieve metadata for 'MyApp.Models.MyModel'. Cannot attach the file 
'C:\Users\Lev\AppData\Local\Temp\2d7daf19-d47f-df24-ac76-d3df4fg2sa\aspnet-MyApp-
20130409170533.mdf' as database 'aspnet-MyApp-20130409170533.mdf'. 
```

问题是：它为什么要在我的临时文件中查找数据库？数据库文件位于：

```
C:\Projects\MyApp\MyApp\App_Data 
```

这是我的连接字符串：

```
Data Source=(LocalDb)\v11.0;
Initial Catalog=aspnet-MyApp-20130409170533;
Integrated Security=SSPI;
AttachDBFilename=|DataDirectory|\aspnet-MyApp-20130409170533.mdf 
```

所以似乎对 |DataDirectory| 的引用 行为不端。如何设置数据目录？如果我手动将正确的路径放入 AttachDBFilename 属性，那么脚手架就可以工作。但我仍然愿意将其保留为|DataDirectory|。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T21:03:16.260

只需重新启动 Visual Studio。这对我的项目有帮助。

# java - 如何从 C++ 调用 Java 以及如何编辑剪贴板

> ID：15915106
> 
> 赞同：1
> 
> 时间：2013-04-10T00:49:27.030
> 
> 标签：java, c++, multithreading, clipboard

我一直在尝试寻找从 C++ 运行 .jar 文件的方法。我这样做是因为我还不知道如何在 Windows 中将文本添加到剪贴板。

作为替代方案，我打算让 C++ 程序将字符串（如果您好奇的话，这是一个 URL）写入文本文件，然后打开 .jar 文件，该文件将打开文件，输入字符串，关闭文件，并以 GUI 格式显示字符串（很可能是 a `JOptionPane.showMessageDialog()`）。

到目前为止，我已阅读

*   [如何从 C++ 调用 java](https://stackoverflow.com/questions/2583501/how-to-call-java-from-c)
*   [http://msdn.microsoft.com/en-us/library/96ayss4b%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=VS.80%29.aspx)
*   [http://msdn.microsoft.com/en-us/library/xwy0k9bb.aspx](http://msdn.microsoft.com/en-us/library/xwy0k9bb.aspx)

在尝试访问第一个站点时，我有点明白他们想要做什么；我自己试了一下，它不会抛出错误，但建议

`_popen("java -jar LinuxTest.jar", r) == 0)`

似乎没有打开`LinuxTest.jar`（它可以工作并且只是打印一个依赖于操作系统的字符串）！

我也尝试过，从第三个元素开始，`_execl("java", "java", "-jar", "LinuxTest.jar", 0);`但这会返回 -1 并抛出 a `FileNotFound`at `errno`。

我想我要求理解多线程（这似乎是不可避免的；我从来没有学过也没有使用过），理解他们在第一个 StackOverflow 帖子中所做的事情以及对锁定/解锁对象的理解。我还要求对剪贴板的工作原理有更多的了解

# c++ - 使用 realloc 时出现运行时错误：“_CrtIsValidHeapPointer(pUserData), dbgheap.c”

> ID：15915109
> 
> 赞同：2
> 
> 时间：2013-04-10T00:49:50.703
> 
> 标签：c++

以下代码是用 C++ 编写的，但使用了 stdlib.h 中的 realloc，因为我对 std::vector 了解不多。

无论如何，我得到了这个奇怪的运行时错误“”_CrtIsValidHeapPointer(pUserData)，dbgheap.c”。

如果您想查看整个方法或代码，请告诉我。

我有 2 个班级，学生和年级。学生包含

```
char _name[21];         
char _id[6];             

int _numOfGrades;
int* _grades;
float _avg; 
```

和等级简单地包含

```
Student* _students;
int _numOfStudents; 
```

而以下工作

`_grades = (int *)realloc(_grades,(sizeof(int)*(_numOfGrades+1)));`

这将产生奇怪的运行时错误：

```
_students = (Student *)realloc(_students,(sizeof(Student)*(_numOfStudents+1))); 
```

_grades 和 _students 都是用 new 创建的，完全没有问题。问题仅在于尝试重新分配_students。

欢迎任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:56:49.960

你不能混合分配器——如果你用 分配内存`operator new[]`，你**必须**用 释放它`operator delete[]`。您不能使用`free()`,`realloc()`或任何其他内存分配器（例如 Windows 的`GlobalFree()`//函数）`LocalFree()`。`HeapFree()`

`realloc()`只能重新分配使用`malloc()`函数族（`malloc()`、、`calloc()`和`realloc()`）分配的内存区域。尝试`realloc`任何其他内存块都是未定义的行为——在这种情况下，你很幸运，C 运行时能够捕捉到你的错误，但如果你不走运，你可能会默默地破坏内存，然后在某个随机点崩溃“不可能”的状态。

# php - 获取当前登录用户 PHP

> ID：15915112
> 
> 赞同：0
> 
> 时间：2013-04-10T00:50:05.017
> 
> 标签：php, login

我很难弄清楚登录后如何在 PHP 中回显当前用户。我知道这很简单，但我想不通。当我这样做时，`<?php echo $_SESSION['usersignedin']; ?>`我得到“用户名”。在此先感谢您的帮助。

这是我正在使用的。

**index.php（登录页面）**

```
<?php

require_once('include.php');

$error = '';

$form = (isset(  $_POST['submit']) ?  $_POST['submit'] : null);

$username = (isset(  $_POST['username']) ?  $_POST['username'] : null);

$password = (isset(  $_POST['password']) ?  $_POST['password'] : null);

if( isset($form) ) {

if( isset($username) && isset($password) && $username !== '' && $password !== '' ) {

$sql = mysql_query("SELECT * FROM `members` WHERE username='$username' and
password='$password';");

if( mysql_num_rows($sql) != 0 ) { //success

$_SESSION['logged-in'] = true;

header('Location: signedin.php');

exit;

} else { $error = "Invalid Username or Password"; }

} else { $error = 'Username and Password not filled out';}

}

?>

<html>
<head>
    <title>Sign In</title>

</head>
<body>

<center><h1>Please sign in.</h1></center> 
<div id="pagewrapper">  <!-- Start pagewrapper div -->

<div id="login_wrapper">
    <div id="login">

        <form action="<?php $PHP_SELF; ?>" method="post" >

           <table>

            <tr>
            <td>Username:</td>
            <td><input type="text" name="username" value="<?php echo "$username";?>" /><br /></td>
            </tr>

            <tr>
            <td>Password:</td>
            <td><input type="password" name="password" /><br /></td>
            </tr>
            </table>
            <br>
            <td>
            <input name="submit" type="submit" value="Login" />
            </td>
<?php

echo "<br /><span style=\"color:red\">$error</span>";

?>

        </form>

    </div>    
</div>  <!-- End login wrapper -->

</div> <!-- End pagewrapper div -->

</body>
</html> 
```

**signedin.php（登录后的页面）**

```
<?php

require_once('include.php');

if ( !isset($_SESSION['logged-in']) || $_SESSION['logged-in'] !== true) {

header('Location: index.php');

exit;

}

$sql = mysql_query("SELECT * FROM `members` WHERE username='$username' and
password='$password';");

?>
<html>
<head>
    <title>Sign in</title>

</head>

<link rel="stylesheet" type="text/css" href="style.css">

<body>

<body class="home">

    <div id="header">

        <div id="welcome"> 

        <p>Hi, <?php echo $_SESSION['usersignedin']; ?> ! <a href="logout.php">logout</a></p>

        </div>

        <div id="links">

<ul>

</ul> 

        </div>
 </div>

        <div id="content">
&nbsp;

<div id= "stuff">

<h3 class="stuffheader">Header</h3>

<p> Text </p>

            </div>

            <div id= "stuff">

<h3 class="stuffheader">Header</h3>

            </div>

</div>

</body>
</html> 
```

**include.php（数据库资料）**

```
<?php

session_start();

$host = "localhost";

$username = "root";

$password = "root";

$db = "intranet";

@mysql_connect($host,$username,$password) or die ("error");

@mysql_select_db($db) or die("error");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:28:55.563

查看代码，您似乎并没有实际设置`$_SESSION['usersignedin'];`（我不知道它是如何获得值“用户名”的）。要设置它，您可以修改以下内容：

```
if( mysql_num_rows($sql) != 0 ) { //success
    $_SESSION['logged-in'] = true;
    header('Location: signedin.php');
    exit;
} else { 
    $error = "Invalid Username or Password"; 
} 
```

对此：

```
if( mysql_num_rows($sql) != 0 ) { //success
    $ui = mysql_fetch_object($sql);
    $_SESSION['logged-in'] = true;
    $_SESSION['usersignedin'] = $ui->username;
    header('Location: signedin.php');
    exit;
} else { 
    $error = "Invalid Username or Password"; 
} 
```

# php - 会话检查后无法登录

> ID：15915113
> 
> 赞同：0
> 
> 时间：2013-04-10T00:50:06.797
> 
> 标签：php, mysql, session

我有访问者的网站页面和客户的页面在 /admin 上管理它

我在 admin/index.php 创建了一个登录系统，它工作正常。但是，如果我在浏览器中输入管理页面的 url（例如 admin/carro_admin.php），即使没有登录，我也可以访问。所以我试图在这个页面（carro_admin）上进行一些会话检查，以阻止访问者并只允许登录访问。

我试图做到这一点：

```
if (isset($_SESSION)) {
  header("location:carro_admin.php");   
}

else {
    header("location:index.php");   
}

exit(); 
```

它阻止了访问并将我发送到 index.php（没错）。但是现在登录系统不起作用。当我输入我的用户名和密码时，我再次被重定向到 index.php。

我的会话代码有问题吗？

Ps.：我已经读过这个问题：[登录后如何设置和检查会话？](https://stackoverflow.com/questions/13400768/how-to-set-and-check-a-session-after-login)但它也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:09:56.770

将此添加到登录过程，即输入用户名/密码并单击提交按钮时。

```
<?php session_start(); 
     /*authenticate the username &^ password*/ 
     if($result) {
         $_SESSION['logged_in']=1; 
     } 
?> 
```

现在在管理页面

```
<?php session_start();
     if(isset($_SESSION['logged_in'])) {
           header("location:carro_admin.php");
     } else {
           header("location:index.php");   
     }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:57:28.737

您的重定向所在页面的顶部是否有 session_start ()？如果没有，它不会设置会话。我可以从非浏览器中访问该页面，并在不重定向的情况下获取您管理页面的所有内容。在用户未登录的情况下，您需要在重定向后终止脚本。此外，您不应使用 isset ($_SESSION)。您应该使用 @$_SESSION["loggedIn"] === TRUE 之类的东西。

# html - 正则表达式/正则表达式“或”

> ID：15915115
> 
> 赞同：0
> 
> 时间：2013-04-10T00:50:30.307
> 
> 标签：html, .net, regex, email

我在这方面苦苦挣扎了一段时间，请您给点提示...

在 Outlook 电子邮件中，我们可以将电子邮件正文中的电子邮件信息转发为：

```
From: Jackson, Peter
Sent: Tuesday, 26 March 2013 08:25 PM
To: **Match, Me**; GGG
Cc: AAA, BBB; CCC, DDD; EEE, FFF
Subject: FW: Good Morning 
```

或者

```
From: Jackson, Peter
Sent: Tuesday, 26 March 2013 08:25 PM
To: AAA; GGG
Cc: BBB; **Match, Me**; DDD; EEE, FFF
Subject: FW: Good Morning 
```

现在，如果“收件人”或“抄送”列表中有“匹配，我”，我想在“已发送”中获取日期时间。

我现在拥有的正则表达式是：

```
(<b>)?Sent:(</b>)?\s(?<MatchDateTime>[A-Z][a-z]{5,8},\s[0-9]{1,2}\s[A-Z][a-z]{2,9}\s[0-9]{4}\s[0-9{1,2}:[0-9][0-9]\s[A-Z]{2})(<br\s?/?>)?(\\r\\n)*?(<b>)?To:(</b>)?\s.[^<]*?(Match, Me).*?(<br\s?/?>)?(\\r\\n)*?(<b>)?Cc:(</b>)?\s.[^<]*?(Match, Me).*?(<br\s?/?>)(\\r\\n)* 
```

这是一些示例文本：

```
<span lang=\"EN-US\" style=\"font-size:10.0pt;font-family:"Tahoma","sans-serif"\"> BBB, AAA [mailto:AAA.BBB@ccc.com.au]\r\n<br>\r\n<b>Sent:</b> Tuesday, 26 March 2013 5:23 PM<br>\r\n<b>To:</b> **Match, Me**; DDD; EEE<br>\r\n<b>Cc:</b> EEE, ZZZ; GGG, FFF<br>\r\n<b>Subject:</b> RE: Good Morning<o:p></o:p></span> 
```

或者

```
<span lang=\"EN-US\" style=\"font-size:10.0pt;font-family:"Tahoma","sans-serif"\"> BBB, AAA [mailto:AAA.BBB@ccc.com.au]\r\n<br>\r\n<b>Sent:</b> Tuesday, 26 March 2013 5:23 PM<br>\r\n<b>To:</b> UUU, AAA, DDD; EEE<br>\r\n<b>Cc:</b> Match, Me; ZZZ; GGG, FFF<br>\r\n<b>Subject:</b> RE: Good Morning<o:p></o:p></span> 
```

我的正则表达式只能匹配一个条件（在 To list 或 Cc list 中），但不能同时匹配两者，请您帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:39:23.033

这就是我想出的：

```
(\<b\>)?Sent:(\</b\>)?\s(?<MatchDateTime>[A-Z][a-z]{5,8},\s[0-9]{1,2}\s[A-Z][a-z]{2,9}\s[0-9]{4}\s[0-9]{1,2}:[0-9][0-9]\s[A-Z]{2}).*?(To|Cc):(\</b\>)?\s[^<]*?(Match, Me) 
```

首先，我认为最好将所有字符`<`和`>`字符转义，因为它们在正则表达式语法中经常使用。在日期匹配组之后，我添加了一个非贪心`.*?`来读取输入，直到遇到第一个`To`or 。`Cc`然后它读取直到匹配`Match, Me`。

# javascript - 使用 Jquery 更改页面

> ID：15915123
> 
> 赞同：0
> 
> 时间：2013-04-10T00:51:03.073
> 
> 标签：javascript, jquery, html, css

所以我正在尝试使用哈希在页面之间进行动画处理。加载（主页）的第一页完美地淡入淡出，但我试图访问的页面，测试（查看哈希内容），根本不会动画/加载。为什么是这样？

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
    <title>Jack Cook</title>
    <style>
    #navbar ul {
        list-style-type: none;
        display: block;
        text-align: center;
    }

    #navbar ul li {
        display: inline-block;
    }

    #navbar img {
        width: 64px;
        height: 64px;
        padding: 0 10px 0 10px;
    }

    #navbar a img:hover {
        opacity: 0.4;
    }
    </style>

    <script type="text/javascript">
    $(document).ready(function () {
      pages = {
        "home": ["Home", "This is my homepage!", "<p>Homepage</p>"],
        "test": ["Test", "This is a testing page", "<p>Testing</p>"]
      };

      page = window.location.hash != "" ? window.location.hash.substr(3) : "home";
      update(page);

      $(document).on("click", "a", function() {
        if ($(this).attr("href").substr(0, 4) != "http") {
          event.preventDefault();
          window.location.hash = "!/" + $(this).attr("href");
        }
      });

      $(window).on("hashchange", function () {
        $("body").fadeOut(1000, function () {
          update(window.location.hash);
        });
      });
    });

    function update(page) {
      $("body").css("display", "none");
      $("#content").html(pages[page][2]);
      $("body").fadeIn(2000);
    }
    </script>
  </head>
  <body>
    <div id="navbar">
      <ul>
        <li><a href="test"><img src="http://cdn4.iconfinder.com/data/icons/devine_icons/128/PNG/Folder%20and%20Places/Home.png" /></a></li>
        <li><img src="http://cdn4.iconfinder.com/data/icons/devine_icons/128/PNG/Folder%20and%20Places/Home.png" /></li>
      </ul>
    </div>

    <div id="content"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:01:08.983

`window.location.hash`将会`'#!/test'`

试试这个：

```
var page = window.location.hash.replace('#!/', '');

update(page); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:03:54.757

看起来您需要更改`page`传递到更新中以取出多余的字符。使用方括号表示法时，您尝试引用的属性必须正是定义它的字符串。就目前而言，您正在尝试获取一个名为 ["#!/"] 的属性，但它不存在。

```
function update(page) {
    $("body").css("display", "none");
    $("#content").html(pages[page.replace("#!/", "")][1]);
    $("body").fadeIn(2000);
} 
```

[jsFiddle 示例](http://jsfiddle.net/tASFe/1/)

# cakephp - CakePHP - 知道用户登录我的应用程序的时间和日期

> ID：15915129
> 
> 赞同：0
> 
> 时间：2013-04-10T00:51:51.287
> 
> 标签：cakephp

是否可以知道用户登录我的应用程序的时间和日期，还是我需要自己将此信息存储在我的用户表中？只是想知道身份验证过程是否已经存在任何类型的日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:58:45.090

是的，您必须将登录信息存储在单独的表中，以便跟踪用户登录历史记录。

cakephp 框架没有提供内置功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:44:04.933

您可能正在寻找类似[http://www.dereuromark.de/2010/09/17/keeping-track-of-usersguests/](http://www.dereuromark.de/2010/09/17/keeping-track-of-usersguests/)

基本上，一个表格，您在每次页面访问时触发更新（或每 x 一次以提高性能）。为特定会话 ID 创建的时间戳会告诉您他们何时登录。last_page_url 和 clicked_from 他们当前所在的位置和来自哪里等。

# php - 使用 PHP 打印 PDF 文件

> ID：15915131
> 
> 赞同：-2
> 
> 时间：2013-04-10T00:52:18.480
> 
> 标签：php

是否可以使用 PHP 打印 PDF 文件？如何？

我不想显示任何对话框或任何东西，我只想执行 PHP 文件并让它为我打印一个 PDF 文件。

PHP 文件将在服务器端执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:07:01.693

这是可能的，我这样做是为了增加一个内部系统。

我所做的方法是使用兄弟打印机驱动程序完成的（因为内部打印机是兄弟制造商的）。

开发的操作系统是 Linux Redhat 服务器。所以我会检查打印机制造商的网站，看看 Windows 或 linux 解决方案上是否有可用的驱动程序，阅读文档并`exec();`使用正确的参数执行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:58:23.740

不，你不能（在浏览器中）。

在这种情况下，您可以：

*   在功能强大的浏览器中显示 PDF 内联（用户必须选择打印 - 或 - 确认打印请求/对话框）
*   提供文件作为下载（用户必须使用合适的查看器打开 PDF 并选择打印）

您可以在服务器上使用`shell_exec()`/`exec()`正如另一个答案中所指出的那样，但这样做并不容易，因为服务器不一定具有这样做所需的驱动程序（或网络容量）。

# javascript - 链接上的自定义鼠标事件

> ID：15915141
> 
> 赞同：0
> 
> 时间：2013-04-10T00:53:33.247
> 
> 标签：javascript, html, hover

[请看这个小提琴](http://jsfiddle.net/uguAA/1/)

如果您将鼠标准确地悬停在链接上，则会出现一个不同的链接。但是，当您将鼠标悬停在链接的左侧或右侧时，也会出现不同的文本。我只想在将鼠标悬停在确切链接上时才制作悬停效果。

我怎样才能做到这一点？

我的`HTML`代码：

```
<ul id="nav">
    <li id="a1"><a href="#">original link 1</a></li>
    <li id="a2" class="hack"><a href="#">hover link 1</a></li>
    <li id="b1"><a href="#">original link 2</a></li>
    <li id="b2" class="hack"><a href="#">hover link 2</a></li>
    <li id="c1"><a href="#">original link 3</a></li>
    <li id="c2" class="hack"><a href="#">hover link 3</a></li>
</ul> 
```

我的`Javascript`代码：

```
$('.hack').hide();
$("#nav li").mouseenter(function() {
    $('#' +this.id.charAt(0)+"2").show();
    $('#' +this.id.charAt(0)+"1").hide();
  }).mouseleave(function() {
    $('#' +this.id.charAt(0)+"1").show();
    $('#' +this.id.charAt(0)+"2").hide();
  }); 
```

请查看小提琴以查看我所指的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:03:33.693

如果您使用事件委托并在元素上添加事件，而不是使用 mouseenter 事件快捷方式会更好`"a"`......

```
$("#nav li").on({
    "mouseenter" : function() { },
    "mouseleave" : function() { }
}, "a"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:03:41.993

尝试以下操作：

```
$('.hack').hide();
$("#nav li a").mouseenter(function() {
    $('#' +this.parentNode.id.charAt(0)+"2").show();
    $('#' +this.parentNode.id.charAt(0)+"1").hide();
  }).mouseleave(function() {
    $('#' +this.parentNode.id.charAt(0)+"1").show();
    $('#' +this.parentNode.id.charAt(0)+"2").hide();
}); 
```

您想在标签而不是s 本身上启动`hover`事件。`a``li`

[**例子**](http://jsfiddle.net/uguAA/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:04:42.827

我想我更新了小提琴。我刚刚添加了这种样式：

```
#nav li {
  display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:06:14.963

在您的 js 中，将您的函数绑定到`"#nav li a"`。

# asp.net - 使用 GET 将用户名/密码从客户端传递到 Web API

> ID：15915144
> 
> 赞同：0
> 
> 时间：2013-04-10T00:53:43.723
> 
> 标签：asp.net, asp.net-web-api

例如，我有一个 Web API：[http](http://example.com/api/product) ://example.com/api/product 。

我有一个 C# 客户端来使用这个 Web API。类似这样的东西可以获得整个产品列表。

```
// List all products.
HttpResponseMessage response = client.GetAsync("api/products").Result;  // Blocking call!

if (response.IsSuccessStatusCode)
{

    // Parse the response body. Blocking!
    var products = response.Content.ReadAsAsync<IEnumerable<Product>>().Result;

    foreach (var p in products)
    {
        Console.WriteLine("{0}\t{1};\t{2}", p.Name, p.Price, p.Category);
    }
}

else
{
    Console.WriteLine("{0} ({1})", (int)response.StatusCode, response.ReasonPhrase);
} 
```

如何将用户名和密码从 C# 客户端传递到服务器的 API？我想要的是当 C# 客户端从 Web API 获取整个产品列表时。

客户端将用户名和密码发送到服务器的 API。如果服务器的 Web API 检查它是否是数据库中的授权用户，如果不是，则不让它获取产品列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:12:07.423

我前段时间在概念验证中使用了以下方法，希望对您有所帮助。

我写了这样的东西，一个“AuthenticationController”，有两种方法：

```
public bool Login(string username, string password, bool rememberMe)
{
    if (Membership.ValidateUser(username, password))
    {
        FormsAuthentication.SetAuthCookie(username, rememberMe);

        return true;
    }

    return false;
}

public void Logout()
{
    FormsAuthentication.SignOut();
} 
```

Login 方法创建一个 cookie，该 cookie 将被发送到客户端；然后，在每个请求中，您需要将其发送回服务器。您可以在控制器操作中使用 [Authorize] 属性来验证允许的角色和权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:12:50.237

我的建议是使用身份验证例程，将令牌分配给客户端。然后，客户端将缓存该令牌并在后续请求中传递该令牌。身份验证例程应该通过 SSL 来防止网络上的嗅探，并且根本不应该存储在设备上（令牌可以缓存到设备中）。

这将使您对客户端有一定的控制权。然后，您的服务处于可以抢先停用客户端的位置（杀死令牌并强制重新验证 - 本质上是超时情况）。您还可以保护客户端上的应用程序（如果应用程序在设备上受到威胁，则不会传递用户凭据）。

您可以使用[DotNetOpenAuth](http://www.dotnetopenauth.net/)让您沿着这条路开始。

```
[System.Web.Mvc.AcceptVerbs(HttpVerbs.Post)]
public ActionResult LogOn(string loginIdentifier)
{
    if (!Identifier.IsValid(loginIdentifier))
    {
        ModelState.AddModelError("loginIdentifier",
                    "The specified login identifier is invalid");
        return View();
    }
    else
    {
        var openid = new OpenIdRelyingParty();
        IAuthenticationRequest request = openid.CreateRequest(
            Identifier.Parse(loginIdentifier));

        // Require some additional data
        request.AddExtension(new ClaimsRequest
        {
            BirthDate = DemandLevel.NoRequest,
            Email = DemandLevel.Require,
            FullName = DemandLevel.Require
        });

        return request.RedirectingResponse.AsActionResult();
    }
} 
```

来源：[示例代码](http://www.dotnetopenauth.net/developers/help/programmatic-openid-relying-party/)

# python - 在 QTreeView 上附加 namedtuple 数据

> ID：15915145
> 
> 赞同：0
> 
> 时间：2013-04-10T00:53:49.290
> 
> 标签：python, pyqt, pyqt4

我正在尝试将 namedtuple 对象的节点附加到 treeView 但我不确定如何将 QAbstractItem 子类化（如果这甚至是正确的方法）。我对 Python 还是很陌生，所以这让我很困惑。这是我的问题代码：

```
Exercise = namedtuple('Exercise','name html list')
e_list = []
for i in range(1,6,1):
    dummy_list = [1,2,3,'a','b','c']
    ntup = Exercise("exercise{0}".format(i),'html here',dummy_list)
    e_list.append(ntup)

for e in e_list:
    item = QtGui.QStandardItem(e) # gives error
    self.tree_model.appendRow(item) # doesnt execute 
```

这是整个程序：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from collections import namedtuple

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButton = QtGui.QPushButton(self)
        self.pushButton.setText("Test 1 - doesn't work")
        self.pushButton.clicked.connect(self.on_pushbutton)

        self.pushButton2 = QtGui.QPushButton(self)
        self.pushButton2.setText("Test 2 - works")
        self.pushButton2.clicked.connect(self.on_pushbutton2)

        self.treeView = QtGui.QTreeView(self)
        self.treeView.clicked[QModelIndex].connect(self.on_clickitem)

        self.tree_model = QtGui.QStandardItemModel()
        self.treeView.setModel(self.tree_model)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.pushButton)
        self.layoutVertical.addWidget(self.pushButton2)
        self.layoutVertical.addWidget(self.treeView)

    def on_pushbutton(self):
        Exercise = namedtuple('Exercise','name html list')
        e_list = []
        for i in range(1,3,1):
            dummy_list = [1,2,3,'a','b','c']
            ntup = Exercise("exercise{}".format(i),'html here',dummy_list)
            e_list.append(ntup)

        for e in e_list:
            item = QtGui.QStandardItem(e) # gives error
            self.tree_model.appendRow(item) # never occurs

    def on_pushbutton2(self):
        txt = 'hello world'
        item = QtGui.QStandardItem(txt)
        self.tree_model.appendRow(item)

    def on_clickitem(self,index):
        item = self.tree_model.itemFromIndex(index) # doesn't work
        print "item name:",item.getName() # doesn't work
        print "item html:",item.getHtml() # doesn't work
        print "item list:",item.getList() # doesn't work

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

我想将节点附加到树中，当我单击一个项目时，我想获取 namedtuple 的值（即“name”、“html”和“alist”的值）。谢谢你的帮助。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:21:24.123

我刚刚结束了使用 QTreeWidget 并像这样设置树项数据：

```
item = QtGui.QTreeWidgetItem()
item.mydata = my_namedtuple 
```

我在这里找到了答案：[QtGui QTreeWidgetItem setData holding a float number](https://stackoverflow.com/questions/11998572/qtgui-qtreewidgetitem-setdata-holding-a-float-number/12012852#12012852)

我不知道你可以动态地为树项创建一个属性。

# python - 列表的循环列表

> ID：15915146
> 
> 赞同：0
> 
> 时间：2013-04-10T00:54:11.040
> 
> 标签：python

我正在尝试遍历 2 个列表，然后加入它们。但是我在构建循环代码时遇到了麻烦。

这是 Softimage（动画 3D 程序）代码，但我希望它有意义。

这就是我所拥有的：

```
import os
import glob
app = Application
storeSelect=[]
mypath = app.ActiveProject.ActiveScene.filename.value
folder=[]
storeAll=[]
listObj=[]
path=[]
storeSelecte=[]
folderAll=[]
#Seleccion
app.SelectObj("*.geometry_cache_grp*")
mySelection = app.Selection

# GETS PATHS FOr each Character Folder

userPath=Application.XSIInputBox ("Direccion de Cache", "Cache")+ "/" 
os.chdir(userPath)

#/loops

for lis in mySelection:
    storeSelect.append(lis)
    members = app.SelectMembers(lis)
    app.SelectObj("*.geometry_cache_grp*")
    mySelection = app.Selection

    for files in sorted(glob.glob("*.scn_c*")):
        folder=files
        for lise in members:
            print lise,folder 
```

但我得到了两次结果，如下所示：

```
# DI_CACHE.lengua Anim_2p.scn_c_DI_rig
# DI_CACHE.vidrios Anim_2p.scn_c_DI_rig
# DI_CACHE.dientes_abajo Anim_2p.scn_c_DI_rig
# DI_CACHE.lengua Anim_2p.scn_c_TOTO_GALLO_rig
# DI_CACHE.vidrios Anim_2p.scn_c_TOTO_GALLO_rig
# DI_CACHE.dientes_abajo Anim_2p.scn_c_TOTO_GALLO_rig
# TOTO_GALLO_cache.lengua Anim_2p.scn_c_DI_rig
# TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_DI_rig
# TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_DI_rig
# TOTO_GALLO_cache.lengua Anim_2p.scn_c_TOTO_GALLO_rig
# TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_TOTO_GALLO_rig
# TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_TOTO_GALLO_rig 
```

有谁知道如何纠正我的循环，所以它只经过一次（仅）？结果应如下所示：

```
# DI_CACHE.lengua Anim_2p.scn_c_DI_rig
# DI_CACHE.vidrios Anim_2p.scn_c_DI_rig
# DI_CACHE.dientes_abajo Anim_2p.scn_c_DI_rig 
# TOTO_GALLO_cache.lengua Anim_2p.scn_c_TOTO_GALLO_rig
# TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_TOTO_GALLO_rig
# TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_TOTO_GALLO_rig 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:51:53.610

我不确定它是否对您有帮助，但您可以执行以下操作：

```
members=[["DI_CACHE.lengua","DI_CACHE.vidrios","DI_CACHE.dientes_abajo"],["TOTO_GALLO_cache.lengua","TOTO_GALLO_cache.dientes_01","TOTO_GALLO_cache.plumas_guantes"]]' 
```

和

```
folders=[["Anim_2p.scn_c_DI_rig"],["Anim_2p.scn_c_TOTO_GALLO_rig"]] 
```

然后

```
for i in xrange(len(a)):
    for n,m in itertools.product(a[i],b[i]):
        print n,m 
```

结果：

```
DI_CACHE.lengua Anim_2p.scn_c_DI_rig
DI_CACHE.vidrios Anim_2p.scn_c_DI_rig
DI_CACHE.dientes_abajo Anim_2p.scn_c_DI_rig
TOTO_GALLO_cache.lengua Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_TOTO_GALLO_rig 
```

# html - 如何并排创建 3 个大小相同的盒子？

> ID：15915149
> 
> 赞同：1
> 
> 时间：2013-04-10T00:54:23.343
> 
> 标签：html, css, alignment

假设我有一个具有以下规格的容器：

```
 .container {
 width: 960px;
 margin: 0 auto;
 height: 500px;
 } 
```

现在在中间，我想添加 3 个水平对齐的框，其规格如下：

```
 .box1 {
 background-color: #000;
 width: 300px;
 height: 200px;
 }
 .box2 {
 background-color: #999;
 width: 300px;
 height: 200px;
 }
 .box3 {
 background-color: #333;
 width: 300px;
 height: 200px;
 } 
```

我尝试在每个上使用 margin-top 和 margin-left ，但这很混乱，而且让它们看起来与它们之间足够的排水沟同样对齐很麻烦。创建这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:00:07.240

您必须输入“float：left;” 在每一堂课上。

```
 .container {
 float:left;
 width: 960px;
 margin: 0 auto;
 height: 500px;
 }

.box1 {
 float:left;
 background-color: #000;
 width: 300px;
 height: 200px;
 }
 .box2 {
 float:left;
 background-color: #999;
 width: 300px;
 height: 200px;
 }
 .box3 {
 float:left;
 background-color: #333;
 width: 300px;
 height: 200px;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:39:39.750

```
.container { width: 960px; margin: 0 auto; height: 500px; }
.container [class*='box'] { width:300px; height:200px; float: left; margin-right: 30px; }
.container .box1 { background-color: #000; }
.container .box2 { background-color: #999; }
.container .box3 { background-color: #333; margin-right: 0; } 
```

[http://jsfiddle.net/DRYBH/#fork](http://jsfiddle.net/DRYBH/#fork)

你也可以试试这个最小代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T00:58:33.780

对于每个 .boxX 项目，添加`display: inline`- 这将为您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:04:01.980

使用 CSS 属性：

```
display: inline-block 
```

在所有 `.box`班级

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-10T09:03:48.263

您可以使用这个简单的代码并排放置三个表格

```
 <!DOCTYPE html>
      <html>
      <head>
    <style> 
    #example1 {
box-sizing: content-box;    
width: 300px;
height: 100px;
padding: 30px;    
border: 10px solid blue;
                    }

       }
      </style>
    </head>
     <body>

       <table><tr><td>
       <div id="example1"></div></td>
              <td><div id="example1"></div> </td>
         <td><div id="example1"></div> </td>

    </tr></table>

   </body>
        </html> 
```

# ruby - 在 ruby 中使用 sort_by 后如何返回哈希？

> ID：15915152
> 
> 赞同：0
> 
> 时间：2013-04-10T00:54:50.753
> 
> 标签：ruby, arrays, hash

当我`sort_by`在频率哈希上使用时，它返回一个数组。如何改为返回哈希？

```
puts frequency.class        #returns hash
frequency = frequency.sort_by {|k,v| v}.reverse
puts frequency.class        #returns array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:06:21.107

[`sort_by`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort_by)只返回一个数组。您可以将其转换回这样的哈希：

```
frequency = frequency.sort_by {|k,v| v}.reverse
frequency = Hash[frequency] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-28T19:55:46.060

这是一个很老的问题，但是使用 Ruby 2.2+ 非常简单：

```
frequency.sort_by { |_, v| -v }.to_h 
```

# excel - 高效的数据清理 - MsExcel 2007

> ID：15915157
> 
> 赞同：0
> 
> 时间：2013-04-10T00:55:20.633
> 
> 标签：excel, excel-2007, vba

我有 2400 家公司的 Excel 电子表格。现在看起来像 -

```
Autumn Ridge Golf Course, Inc.
11420 Auburn Road
Fort Wayne, IN 46845
(260) 637-8727

All Occasion Party Rental
4620 Speedway Drive
Fort Wayne, IN 46825
(260) 484-3964 
```

..... ETC。

我的目标是把它变成友好的表格格式：

```
Autumn Ridge Golf Course  11420 Auburn Road    Fort Wayne IN 46845 (260)637-8727
All Occasion Party Rental 4620 Speedway Drive  Fort Wayne IN 46825 (260)484-3964 
```

我知道“复制”/“特殊粘贴”“转置”excel选项；但它会很慢......与2400家公司有关。

有没有更快的方法来做到这一点？我需要任何可能的方法来将我的数据转换为表格（水平）视图

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:16:28.230

这是一种使用 VBA 将数据存储在数组中，然后写入新工作表的方法。

我假设所有数据集之间都会有空行，并且任何特定数据集*内都没有空行。*

```
Sub HorizontalSplit()
Dim sh1 As Worksheet
Dim sh2 As Worksheet
Dim rng As Range
Dim cl As Range
Dim c As Long: c = 0
Dim r As Long: r = 1
Dim addressInfo() As Variant

Set sh1 = Worksheets("Sheet1") 'Modify as needed`
Set sh2 = Worksheets.Add(After:=sh1) 'Modify as needed, set to an existing sheet, etc.`

With sh1
    Set rng = .Range("A1:A2500") 'Modify as needed to fit your range of address info`
    For Each cl In rng

        If cl.Value = vbNullString Then
        'write out the data (if any), or skip the cell if there is no data in the array`
            If UBound(addressInfo) > 0 Then
                For c = 0 To UBound(addressInfo)
                    sh2.Cells(r, c + 1).Value = addressInfo(c)
                Next

                c = -1
                'clear out our array for the next brand'
                Erase addressInfo
                ReDim addressInfo(0)
                r = r + 1
            End If
        Else:
            'Add this row of data to the array
            c = c + 1
            ReDim Preserve addressInfo(c)
            addressInfo(c) = cl.Value

        End If
    Next
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:56:26.183

如果您的数据完全按照您指定的格式设置，则可能有一种快速简便的非 Excel 方法。

1.  将您的数据复制到一个像样的文本编辑器（例如 Notepad++： http: [//notepad-plus-plus.org/](http://notepad-plus-plus.org/)）
2.  使用“扩展”的搜索模式进行查找/替换，并用一些特殊字符替换多个空行的所有实例。（例如，如果地址之间有一个空格，请查找**\r\n\r\n**并替换为**|**。）
3.  对剩余的空白行执行查找/替换，并用制表符替换。（再次在扩展模式下，查找**\r\n**并替换为**\t**）
4.  再次用新行查找/替换您的特殊字符。（在扩展模式下，查找**|**并替换为**\r\n**）
5.  将生成的文本复制并粘贴到 Excel 中。任何额外的清理都应该在 Excel 公式的范围内。

如果您反对或无法下载其他软件（尽管我强烈推荐 Notepad++），您应该能够使用 MS Word 完成类似的操作。[http://office.microsoft.com/en-us/word-help/find-and-replace-text-or-other-items-HA001230392.aspx#_Toc282602054](http://office.microsoft.com/en-us/word-help/find-and-replace-text-or-other-items-HA001230392.aspx#_Toc282602054)上的文档似乎与我记得的内容一致其中**^p**用于查找段落标记（新行），而**^t**用于查找制表符。

# javascript - DHTMLX 日历 onChange

> ID：15915160
> 
> 赞同：0
> 
> 时间：2013-04-10T00:55:31.440
> 
> 标签：javascript, jquery, dhtml, dhtmlx

我在 DHTMLX 日历中遇到了输入字段中的 onChange 问题。

我正在使用以下代码初始化代码：

```
 jQuery(document).ready(function($){              
        var calendar;
        calendar = new dhtmlXCalendarObject(["date"]);
        calendar.hideTime();
        calendar.setDateFormat("%d/%m/%Y");
        $('.lightbox').lightbox();
        $('#slider').cycle();
    });
    function checkDate() {
        var date = $("[name='date']").val();
        alert(date);
    } 
```

在我使用的表格中：

```
<input type="text" name="date" id="date" onchange="checkDate();" /> 
```

一旦将日期输入到输入字段中，onchange 函数将触发它应该如何（并且正在使用 JQuery UI datepicker）。但是在这种情况下：这个日历的 onchange 什么都不做。

我尝试将以下内容更改为：

```
 jQuery(document).ready(function($){              
        var calendar;
        calendar = new dhtmlXCalendarObject(["date"]);
        calendar.hideTime();
        calendar.setDateFormat("%d/%m/%Y");
        calendar.attachEvent("onChange",function(date, state){
               checkDate();
        });
        $('.lightbox').lightbox();
        $('#slider').cycle();
    });
    function checkDate() {
        var date = $("[name='date']").val();
        alert(date);
    } 
```

但是 onchange 事件发生在输入日期之前，即当我单击输入字段时。

从 JQuery UI 更改为此 DHTMLX 的原因是 JQuery UI Datepicker 不支持所有平台（iPhone/iPad 等）而 DHTMLX 支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T21:44:02.490

我认为它是从输入初始化时日历上的一个错误，问题是一旦您单击输入字段就会触发 onChange 事件（如果您使用 console.log 或打印日期参数，您可以看到这一点），而不是何时有一个真正的用户生成的更改，我遇到了同样的问题，您可以选择使用“onClick”事件（这仅在他们单击选择器时有效，而不是在他们手动更改日期时有效）或使用 JQUERY 来捕获事件，因为您直接从输入字段获取日期，而不是日历发送的日期。

```
calendar.attachEvent("onClick",function(date){
               checkDate();
        }); 
```

# http - http://example.com 和 http://www.example.com 的区别

> ID：15915163
> 
> 赞同：2
> 
> 时间：2013-04-10T00:55:46.050
> 
> 标签：http

当我在做一些网页设计时，我发现了一件有趣的事情。

当我输入

> [http://example.com/xxx/xxx](http://example.com/xxx/xxx)

它总是要求我提供凭据。但是，当我使用

> [http://www.example.com/xxx/xxx](http://www.example.com/xxx/xxx)

它直接让我登录！我知道饼干有问题。

但我真正想知道的是：

**`http://example.com`和 和有什么不一样`http://www.example.com`？**

请告诉我这是浏览器自动将“ `www`”添加到 url。

谢谢， ： ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:11:37.247

www 是与其他任何子[域](http://en.wikipedia.org/wiki/Subdomain)一样的子域（例如[http:// **math** .stackexchange.com/](http://math.stackexchange.com)）。让它指向与主域相同的位置只是一个约定。[这个答案](https://stackoverflow.com/a/486763/622391)有一些关于你*为什么*要使用 www 的优点。

# c# - 如果特定数据库表已添加/更新/删除记录，我如何提醒我的程序？

> ID：15915164
> 
> 赞同：0
> 
> 时间：2013-04-10T00:55:47.810
> 
> 标签：c#, mysql

我有一个服务器应用程序和客户端应用程序，数据库在网络内共享，我想要发生的是，当客户端应用程序从特定表中插入/更新/删除数据时，我希望服务器收到警报并运行一些代码它。

我怎么可能做到这一点？任何想法都会有很大帮助！谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:01:25.370

为推送通知使用触发器，或保留 lastModified 信息以检查拉取通知。你可能想要前者，

*编辑您可以使用*[https://github.com/mysqludf/lib_mysqludf_sys](https://github.com/mysqludf/lib_mysqludf_sys)中的 sys_exec('program') 从触发器调用外部程序。只需使用它来调用您拥有的任何服务器代码。示例和设置说明可以通过 google 找到。例如 [http://bernardodamele.blogspot.com.au/2009/01/command-execution-with-mysql-udf.html](http://bernardodamele.blogspot.com.au/2009/01/command-execution-with-mysql-udf.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T01:10:02.240

你没有说你使用的是什么类型的数据库。如果您使用的是 MS SQL Server，我建议您看看他们的[StreamInsight](http://www.microsoft.com/en-us/sqlserver/solutions-technologies/business-intelligence/streaming-data.aspx)，它可以让您编写“适配器”，以便在保存数据时实时处理数据。

我不知道您是否可以在现有的服务器应用程序中访问/合并它。但是，根据您要实现的目标，您可能不必这样做。

# javascript - MVC 应用程序中的 JavaScript 位置/排序问题

> ID：15915171
> 
> 赞同：0
> 
> 时间：2013-04-10T00:56:28.667
> 
> 标签：javascript, model-view-controller, location

也许这个问题可能已经问过了。但我还没有为以下情况找到令人满意的答案。

我有 MVC 应用程序，其中，当我单击按钮时，它会弹出一个 jquery 对话框。如果我在标题中包含 jquery***.js，它工作正常。但如果我在 Body 之后包含它，它就不起作用。

根据最佳实践，我们应该在正文之后包含所有脚本。那么，为什么当我在底部包含脚本时这个对话框没有打开。

```
**Layout.cshtml**

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    @Content.Css("themes/base/jquery.ui.all.css", Url)
    @Content.Css("Site.css", Url)

    /**** Dialog works fine if I include 
    *** @Content.Script("jquery-1.5.1.min.js", Url) ***
    ***here*****/

</head>
<body>

   *********
   *********

    @Content.Script("jquery-1.5.1.min.js", Url)
    @Content.Script("jquery-ui-1.8.11.min.js", Url)
    @Content.Script("jquery.unobtrusive-ajax.min.js", Url)
</body>
</html>

Index.cshtml

@model ****

<script>
    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            model: true
        });
    });

    function btn1Click() {
        $("#dialog").dialog("open");
    }
</script>

<h2>Index</h2>

@using (Html.BeginForm () )
{
    <input id="btn1" value="Index1" type="button" onclick="btn1Click()"  /> 
    <br />

        <div id="dialog" title="Basic dialog">
        <p>Testing...</p>
        </div>
} 
```

# dojo - dojolazytreegrid 在 websphere 门户 8 中的显示方式不同

> ID：15915176
> 
> 赞同：1
> 
> 时间：2013-04-10T00:57:29.850
> 
> 标签：dojo, websphere-portal, dojox.grid

websphere 门户 8 带有默认的 dojo 1.7.2，如果适用于 dojo 1.7，则此 dojo 文档适用于lazytreegrid [http://dojotoolkit.org/reference-guide/1.7/dojox/grid/LazyTreeGrid.html](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/LazyTreeGrid.html)

但是当我运行文档中的示例时，treegrid 会像 image1 一样显示。但是当我使用相同的示例时，treegrid 在门户 8 中的显示方式不同（image2），这很丑陋，如何获得与文档中相同的外观

![文件](https://i.stack.imgur.com/WktkJ.jpg)

![门户8](https://i.stack.imgur.com/hnEMR.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:08:56.600

Dojo 站点上的示例使用“Claro”，而您的 Portal 站点使用不同的主题（我不确定是哪一个，我认为是 Soria）。不同的主题可以作为模块加载到 Portal 主题中（不要与 Dojo/Dijit 主题混淆）。这是 wiki 页面： [http ://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+8+Product+Documentation#action=openDocument&res_title=Dojo_and_WebSphere_Portal_wp8&content=pdcontent](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+8+Product+Documentation#action=openDocument&res_title=Dojo_and_WebSphere_Portal_wp8&content=pdcontent)

看这一段： tundra 类设置在门户 Web 2.0 主题中的 body 元素上，并且其相应的 CSS 文件也被链接进来。要在特定 portlet 中使用不同的主题，请不要从 portlet 中更改 body 元素的 CSS 类，因为它会对页面上使用 Dijits 的所有其他 portlet 和主题组件产生影响。相反，在 portlet 中使用一个单独的节点来包含该 portlet 使用的所有小部件，并在 portlet 内的容器节点上分配不同的主题类名称。

# java - 如何告诉我的代码在 Android 中检查哪些标签？

> ID：15915177
> 
> 赞同：1
> 
> 时间：2013-04-10T00:57:50.373
> 
> 标签：java, android

我有这段代码来设置一些标签，在将这些行添加到 strings.xml 之后，我设置了两个标签：

```
<item type="id" name="KOLONA1"/>
<item type="id" name="KOLONA2"/>

a1.setTag(R.id.KOLONA1, labelsA.get(0).tag); 
```

在我的 onClickListener 中，我有一些检查标签的代码：

```
if (buttonClicked.getTag().equals(button.getTag())) {

//some code
} 
```

在这个特定的检查中，我的代码应该检查第二个标签，labelsA.get(0).tag，但它没有，它检查第一个，R.id.KOLONA。如何告诉我的代码要检查哪些标签？

![示例按钮](https://i.stack.imgur.com/dG3LL.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:20:32.563

像这样简单的东西可能是您正在寻找的东西：

```
if (buttonClicked.getId() == button.getId()
     && buttonClicked.getTag().equals(button.getTag())) {

    //some code
} 
```

或者，如果您感到非常偏执：

```
if (buttonClicked.getId() == button.getId()
     && buttonClicked.getParent() == button.getParent()
     && buttonClicked.getTag().equals(button.getTag())) {

    //some code
} 
```

**更新**：我刚刚意识到这`getTag()`是多余的，因为如果它们具有相同的 ID 和相同的父级，它们必须相同，所以：

```
if (buttonClicked.getId() == button.getId()
     && buttonClicked.getParent() == button.getParent()) {

    //some code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:00:28.047

您可以使用 id 通过 id 获取特定标签`View.getTag(int tag)`。我认为您正在寻找的是`button.getTag(R.id.KOLONA1)`. 该文档可以在这里找到：http: [//developer.android.com/reference/android/view/View.html#getTag(int)](http://developer.android.com/reference/android/view/View.html#getTag(int))

# ios - iphone横向和纵向的响应式设计

> ID：15915185
> 
> 赞同：2
> 
> 时间：2013-04-10T00:58:39.523
> 
> 标签：ios, css, responsive-design, viewport

我一直在尝试在我的 iphone 4 上测试我的代码，我正在运行 iOS6。

在竖屏模式下，iPhone 内部的一切看起来都很好，但是当我切换到横屏模式时，一切都被放大了！有什么建议么？下面是我的视口代码以及 css 条件。

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.5, user-scalable=0" />

@media screen and (max-device-width: 480px) {
    #sidebar {
        width:38px;
    }
    .menuhide {
        display:none;
    }
    .menushow {
        display:inline;
    }
    #mainframe {
        margin-left:38px;
    }
} 
```

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:15:22.093

也许使用这个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=0"> 
```

# c - UTHash 多级哈希表在 HASH_FIND_STR 上崩溃

> ID：15915187
> 
> 赞同：1
> 
> 时间：2013-04-10T00:59:05.197
> 
> 标签：c, hash, hashmap, uthash

我有两个这样的结构：

```
struct item2_map{
char stringkey[MAX_SIZE];
UT_hash_handle hh;
}

struct item1_map{
int key1;
struct item2_map *item2_map;
UT_hash_handle hh;
} 
```

在我的代码中，我做了这样的事情

```
struct item1_map *retrieved;
struct item2_map *found_value, *tmp;

HASH_FIND(hh, hash_head, key1, &someintvalue, sizeof(int), retrieved)
if(retrieved==NULL)
{
    HASH_ADD(hh, hash_head, key1, sizeof(key1), my_item1);
    my_item1->item2_map = NULL;
    HASH_ADD_STR(my_item1->item2_map, stringkey, my_item2);
} else 
{
    //THIS WORKS
    HASH_ITER(hh, retrieved->item2_map, found_value, tmp)
    { //do something }

    //THIS SEG FAULTS
    HASH_FIND_STR(retrieved->item2_map, &my_item2->stringkey, found_value)
} 
```

这似乎给了我 HASH_FIND_STR() 的段错误。有什么我做错了吗？在此示例中，假设 my_item1 和 my_item2 来自其他地方并且是有效的。我想使用 stringkey 作为键来查找值。

我在条件部分放了一个断点`IF`，所以我知道一开始没有找到它，然后在第二次找到那个键时，`else`进入了块。

有趣的是，如果我使用 HASH_ITER 遍历条目，它似乎“工作”至少没有崩溃，尽管我不相信所有的值都是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:49:06.023

它看起来基本正确。需要仔细检查的几件事

*   检查 my_item1->item2_map 在创建 my_item1 时是否已初始化为 NULL，在 HASH_ADD_STR 之前
*   检查 my_item2->stringkey 在 HASH_FIND_STR 之前是否以 null 结尾并且小于 MAX_SIZE
*   尝试在valgrind下运行看看有没有其他线索

如果您发现任何东西，请告诉我们。

特洛伊

# c++ - 为什么 Qt 使用 d_func() 来实例化指向私有数据的指针？

> ID：15915189
> 
> 赞同：10
> 
> 时间：2013-04-10T00:59:14.940
> 
> 标签：c++, qt, pointers

考虑以下 Qt 类：

```
#include <QScopedPointer>

class MyClassPrivate;
class MyClass
{
    public:
        MyClass();
        ~MyClass();
    private:
        QScopedPointer<MyClassPrivate> d_ptr;
        Q_DECLARE_PRIVATE(MyClass)
} 
```

此类类似于大多数实现私有实现的 Qt 类的结构。该宏`Q_DECLARE_PRIVATE`将导致以下扩展（从 Qt5 开始）：

```
inline MyClassPrivate* d_func()
    { return reinterpret_cast<MyClassPrivate *>(qGetPtrHelper(d_ptr)); }
inline const MyClassPrivate* d_func() const
    { return reinterpret_cast<const MyClassPrivate *>(qGetPtrHelper(d_ptr)); }
friend class MyClassPrivate; 
```

这令人困惑——为什么不`d_ptr`直接在成员函数中使用？换句话说，而不是这样做：

```
Q_D(MyClass);
d->member = 12345; 
```

为什么不这样做？

```
d_ptr->member = 12345; 
```

有一个显式函数（基本上）只返回`d_ptr`并在堆栈上产生额外变量的开销的原因是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T03:06:06.673

如果派生类和基类各有一个Private结构，会浪费更多的内存，因此在Qt中，私有类也是继承的，派生类和基类共享一个d_ptr。这样做的问题是 d_ptr 现在是 BasePrivate 类型。

```
class Base
{
protected:
    BasePrivate * d_ptr;
}

class Derived
{
// There is not d_ptr declared
} 
```

所以你可以看到，在派生类中，当它访问 d_ptr 时，类型是 BasePrivate*。所以它需要将 d_ptr 转换为 DerivedPrivate*。d_func 函数是内联的，一旦编译，它总是将 d_ptr 转换为正确的类型。

[这篇文章](http://qt-project.org/wiki/Dpointer)比我在这里说的更好，我建议你阅读它。

# ios - 嵌入式 UIScrollView 未加载其子视图

> ID：15915190
> 
> 赞同：1
> 
> 时间：2013-04-10T00:59:26.777
> 
> 标签：ios, uiscrollview, instantiation

我在这里可能有一个奇怪的 VC 结构，我只是让它有点陌生，导致它崩溃

UIViewController (contains->) UIContainerView (embeds ->) UIScrollView (contains ->) UIView

我有最终的 UIView，因为我不知道如何使滚动视图遵守某些大小限制，所以我只添加了一个“内容视图”。

问题是，现在“内容视图”的数据没有加载

内容视图的日志是：

```
<UIView: 0x81cd510; frame = (-306 0; 612 792); autoresize = TM+BM; layer = <CALayer: 0x81c2000>> 
```

滚动视图的日志是

```
<UIScrollView: 0x81e5e90; frame = (0 0; 0 0); clipsToBounds = YES; opaque = NO; autoresize = W+H; gestureRecognizers = <NSArray: 0x81e67b0>; layer = <CALayer: 0x81e6060>; contentOffset: {0, 0}> 
```

所以它似乎没有加载......什么给了？如何让它加载？

编辑以澄清：

*   所有这些视图都是通过 IB 创建的
*   不使用 AutoLayouts（虽然这听起来很有趣）
*   NSLog 方法在视图层次链顶部的视图控制器中的 ViewDidAppear 中调用。（也许这就是问题所在？）

编辑：将项目上传到 github，以便人们可以看看 [https://github.com/Pinwheeler/ChiroMatic.git](https://github.com/Pinwheeler/ChiroMatic.git)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T00:44:58.260

我花了很多时间浏览您的项目，但令人沮丧的是，我无法推断出导致问题的原因。但我发现我可以通过重新创建你的场景`PrintViewController`和`PrintContentViewController`场景来解决问题（我必须重新创建两者来解决问题）。我为您的项目创建了一个分支并修复了这两个场景。我尝试在源代码和 git 存储库提交注释中注释我的更改，因此希望您能遵循我所做的更改。我的叉子可在：

*   [https://github.com/robertmryan/ChiroMatic](https://github.com/robertmryan/ChiroMatic)

（当您希望我删除该存储库时让我知道。我很乐意随时删除它，因为我假设您不希望我无限期地在 github 上留下副本。）

几点观察：

1.  你说你没有使用自动布局，但你是。（转到`Document Inspector`情节提要上的第一个选项卡，您会看到“使用自动布局”被选中。）如果您想使用它很好（它现在是 Xcode 中的默认设置），但请注意您将失去对 iOS 版本的向后兼容性如果您使用它，则在 iOS 6 之前。自动布局很强大，但是当您第一次开始使用它时可能会很棘手。这是你的电话。

2.  在您的`PrintContentViewController`中，我最重要的更改是使用标准视图控制器场景配置（其中顶级视图是 a `UIView`），并且我制作了它的`UIScrollView`a 子视图。话虽如此，我不认为你需要的`UIView`子视图`UIScrollView`（如果你有那个中间，你会失去一些滚动视图功能，这是有问题的`UIView`），所以我删除了它，并制作了所有的标签和类似的子视图滚动视图本身。

3.  您到处都在使用容器视图，但令我震惊的是，您正在增加不必要的复杂性。（顺便说一句，如果您不使用这些容器视图，您就不会遇到原始问题中提出的问题。）

    当您想从其子视图控制器中抽象出与容器视图控制器相关联的逻辑时，自定义容器非常有用。但你不是在这里这样做。更糟糕的是，您将通过各种方式来获取`IBOutlet`子控制器的引用并更新容器控制器中的属性。我衷心鼓励您重新考虑使用这些容器视图，并将它们完全从您的项目中删除。

    如果您对容器视图有迫切的需求，请使用它们（我喜欢它们并且一直使用它们），但我认为这里没有任何需要，而且您自己的生活变得更加复杂。

    另外，顺便说一句，使用嵌入 segue 只是 iOS 6 的一项功能，如果您需要向后兼容 iOS 5，这可能是个问题。

最重要的是，在创建新项目和镜像故事板时，我永远无法重现您的问题。`PrintViewController`我也无法通过对您的旧场景和场景进行任何编辑来消除您的问题`PrintContainerViewController`。我只有在重新创建这些场景时才能修复它，而当我这样做时，它就起作用了。

我把你的旧场景留在那里（以“旧”开头，这样故事板就不会混淆），所以也许你可以花时间找出问题所在，但我看不到。也许故事板中有一些错误正在逃避我。也许有一些我没有看到的设置。我所知道的是，当我刚刚重新创建它时，将您的控件复制到我的两个新场景中，它就可以正常工作。

就我个人而言，我建议打破僵局，完全消除容器视图。你的代码会更干净，这类问题不太可能引起他们的丑陋。

这不是一个令人满意的结论（不知道是什么导致了问题），但至少它看起来是固定的。祝你好运。

# c - 在 C 中更改 int 中的位？

> ID：15915198
> 
> 赞同：6
> 
> 时间：2013-04-10T01:00:13.337
> 
> 标签：c, int, bit

所以我有一个 16 位的数字。假设它的变量名是 Bits。我想让 Bits[2:0] = 001、100 和 000，而无需更改任何其他内容。我不知道该怎么做，因为我能想到的只是将我想成为 1 的位与 1 进行或运算，但我不确定如何清除其他位以使它们为 0。如果有人有建议，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T01:04:49.317

清除某些位，`&`与要清除的位相反。然后你可以`|`在你想要的位。

在这种情况下，您希望将低三位（`111`二进制或`7`十进制）清零，因此我们`&`要`~7`清除这些位。

```
Bits = (Bits & ~7) | 1; // set lower three bits of Bits to 001 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T01:19:07.843

`union`结构允许指定变量的位数并单独寻址更大变量的每个位。

```
union {
    short value;
    struct {
        unsigned char bit0 : 1;
        unsigned char bit1 : 1;
        unsigned char bit2 : 1;
        unsigned char bit3 : 1;
        unsigned char bit4 : 1;
        unsigned char bit5 : 1;
        unsigned char bit6 : 1;
        unsigned char bit7 : 1;
        unsigned char bit8 : 1;
        unsigned char bit9 : 1;
        unsigned char bit10 : 1;
        unsigned char bit11 : 1;
        unsigned char bit12 : 1;
        unsigned char bit13 : 1;
        unsigned char bit14 : 1;
        unsigned char bit15 : 1;
    } bits;
} var; 
```

现在您有一个名为的变量`var`，它包含一个 16 位整数，可以由 引用，并且您可以通过`var.value`访问该变量的每个单独位。`var.bits.bit0``var.bits.bit15`

通过设置`var.value = 0;`所有位也设置为 0。通过设置`var.bits.bit0 = 1;`，您可以自动将 的值更改`var.value`为`0x8000`，或者如二进制所示，`1000000000000000`。

如果您打算仅更改最后 3 位，则可以将结构简化为更像这样的结构：

```
union {
    short value;
    struct {
        unsigned short header : 13;
        unsigned char bit13 : 1;
        unsigned char bit14 : 1;
        unsigned char bit15 : 1;
    } bits;
} var; 
```

现在您有了`var.bits.header`13 位变量和 3 个其他 1 位变量，您可以使用它。

但请注意 C++ 不支持这种结构，因此为了获得最佳的 C 到 C++ 的可移植性，您可能更喜欢使用[按位运算](http://www.cprogramming.com/tutorial/bitwise_operators.html)，而不是 @nneonneo 提出的建议。

# java - IntelliJ 无法正确识别特定文件，而是作为文本文件卡住

> ID：15915202
> 
> 赞同：120
> 
> 时间：2013-04-10T01:01:03.737
> 
> 标签：java, intellij-idea, freemarker, file-type

我的 IntelliJ 项目中有一个 freemarker 文件 (ftl) 被错误地识别为文本文件。有许多相同的类型是正确的。

我知道“标记为文本”选项。这可能是该文件被标记为文本的原始原因，但我没有提供“标记为 ftl 文件”选项来将其转回，如果这确实是问题。如果我将其他 ftl 文件标记为 txt，我可以按预期将它们转换回 ftl 文件。

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2013-04-10T06:23:41.513

请确保此文件（或代表它的模式）未在下面列出

`Settings`→ `Editor`→ `File Types`→`Text`

对于 OS X

`Preferences`→ `Editor`→ `File Types`→`Text`

有时文件或模式被卡在下面`File type auto-detected by file content`而不是`Text`.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-11-25T18:07:19.580

第 1 步：单击“文件”==> Windows 的“设置”或 Mac 的“InterlliJ IDEA”==>“首选项”

第 2 步：展开“编辑器”并单击“文件类型”

第 3 步：您将在右侧看到所有文件类型。导航到“文本”条目并单击它

第 4 步：您应该可以在“Registered Patterns”（下框）底部看到您的文件名

第 5 步：从“注册模式”中删除您的文件。问题应该解决了，让你重命名`fileName.java`

第 6 步：如果没有，请从项目中删除文件并使用名称 fileName 再次创建它

[资源](http://www.gisremotesensing.com/2014/11/solution-intellij-not-recognizing.html)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2020-12-31T22:38:59.443

在 2020 年，发布的答案都没有奏效，这就是：

1.  左键单击文件
2.  在顶部工具栏上，选择文件 -> 文件属性 -> 与文件类型关联

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-03-25T13:49:52.573

**操作系统：**

```
Preferences > Editor > File Types > Text 
```

**视窗：**

```
Settings > Editor > File Types > Text Files 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-05-12T11:43:11.500

我有同样的问题，上述解决方案都没有解决它。最后解决的方法是选择模块并进入模块设置（在模块名称上按 F4）

然后在 Sources 选项卡中，选择“java”文件夹并按下 Sources 按钮。这告诉 IntelliJ 有问题的文件夹是源代码文件夹。

然后选择测试文件夹并按测试。

而已。然后它将正确识别文件并根据需要显示错误。

请参阅下面的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/k20IW.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-30T11:13:38.170

我解决了同样的问题

```
Right-click on the file ->  "Override File Type" -> Select the extension type the file has. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-07T11:25:36.263

这对我有用

去

```
File -> Settings -> Editor -> File Types 
```

**从“按内容自动检测文件类型”**选项下的“**文件名模式**”中删除了我的文件

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-19T05:07:25.427

您可能不小心编辑了文件和代码模板中的模板。按**`Ctrl+Alt+S`**

在下面

```
 Settings -> Editor -> File and Code Templates 
```

对我来说，我更改了`FileHeader.java`包含选项卡中的文件。

回忆一下您之前可能更改过的模板类型并将其恢复为默认值。

希望它有效:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-03T11:27:20.073

我的特定 java 文件名未列在“文本文件”（IntelliJ 2019.3）中。

关闭 IntelliJ，然后在 .Intellij2019.3 中查找文件名后，我在这里找到了匹配项：.Intellij2019.3\config\options\filetypes.xml。

删除名称后，IntelliJ 再次将该文件视为 Java 文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-11T12:26:15.720

当我创建一个`BenefitService.java`作为简单文本文件的新界面时出现此错误。错误如下所示：

```
Unable to parse template “Interface”
 Error message: Selected class file name ‘BenefitService.java’ mapped to not java file type ‘Auto-detect file type by content` 
```

所以只需转到 IntellJ 文件 -> 设置 -> 编辑器 -> 文件类型 -> 自动检测文件类型内容并删除您的文件名，例如在我的情况下 BenefitService.java 它将起作用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-19T16:44:21.490

文件没有被着色的另一个原因。我发现 RubyMine 可能会在分析文件时卡住，然后它不会着色。对我来说，当 RubyMine 混淆翻译/获取时，这种情况发生在 .html.slim 文件上来自 yml 文件的键，例如当在单个视图文件的视图和控制器中暗示 yml 文件时。

重命名文件似乎可以修复它，但那是因为它不再卡在解析 yml 文件，但您认为这是文件关联问题。

另一种测试它的方法是注释掉所有内容，在 slim 的情况下使用 /。然后关闭文件并重新打开。然后将其着色以供评论。删除注释并且它可以工作，因为 Rubymine 在打开文件后不会尝试解析 yml 数据。但是关闭然后重新打开，它会因为混淆而再次卡住。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-06-20T09:37:59.943

**解决方法：**重命名文件而不更改文件扩展名。

```
FileName.java 
```

```
NewDifferentFileName.java 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-07-07T18:20:59.960

我在创建新类 java 时遇到了同样的问题，问题出在 Header.java 上，可以使用命令 crt+alt+s 访问并转到 Editor/FileAndCodeTemplates/Includes，这可能是这种格式：

/** * 由 Alex Leporoni 在 ${DATE} 创建。*/

这解决了我的问题，现在我可以再次创建类 :) 我希望这篇文章可以帮助其他有同样问题的人在 IntelliJIdea 上创建类...拥抱所有人。**

# jquery - JSON 有效时 JSON 格式错误？

> ID：15915204
> 
> 赞同：3
> 
> 时间：2013-04-10T01:01:12.367
> 
> 标签：jquery, ajax, json

我正在尝试从外部文件中获取 JSON 对象，但我总是收到错误：malformed ，它指向`{`我的 JSON 文件的第一个。我在这个网站上测试了我的 JSON 文件：http: [//jsonlint.com/](http://jsonlint.com/)它是有效的。

这是我的 JSON 代码：

```
{
  "employees": [{
      "firstName": "John",
      "lastName": "Doe"
    }, {
      "firstName": "Anna",
      "lastName": "Smith"
    }, {
      "firstName": "Peter",
      "lastName": "Jones"
    }
  ]
} 
```

这是我的脚本：

```
$.getJSON("employe.json", function (data) {
  document.write(data.employees[0].firstName);
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:05:25.313

```
<script>
 $(document).ready(function() {
    $.getJSON("employe.json", function(data) {
    document.write(data.employees[0].firstName);
    });
 });
</script> 
```

或者代替文档写入

```
 alert( data.employees[0].firstName); 
```

你很可能想要 $.each 迭代

```
 <script>
 $(document).ready(function() {
    $.getJSON("employe.json", function(data) {
      $.each(data.employees, function(arrayID, employee) {
            alert(employee.firstName);
      });
    });
 });
</script> 
```

# java - 得到异常，我不知道为什么

> ID：15915206
> 
> 赞同：1
> 
> 时间：2013-04-10T01:01:37.837
> 
> 标签：java, runtime-error

```
import java.util.Scanner;               //Import necessary classes 
import java.text.DecimalFormat;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.FileWriter;
import java.io.FileNotFoundException;

public class Lab11
{
    public static void main (String[] args)
    {
        Scanner scan = new Scanner(System.in);
        DecimalFormat fmt = new DecimalFormat("0.00");

        final int LIMIT = 1000, MAX = 10, MIN = -10;        //number of ints to be read into file
        String fileName;            //holds name of file

        System.out.print("Enter the name of the file to hold the integers: ");
        fileName = scan.next();
        PrintWriter outFile = null;         //creates PrintWriter to write to specified file

        try
        {
            outFile = new PrintWriter(new File(fileName));      //TryCatch statement to catch any errors when file opens
        }
        catch (FileNotFoundException e)
        {
            System.out.println("File "+fileName+" doesn't exist.  Exiting program");
            System.exit(-1);
        }

        for (int i = 0; i <= LIMIT; i++) {        //for loop to write to file using random num between -10 and 10
            outFile.print((int)(Math.random()*(MAX+1-MIN)) + MIN + " ");        //makes sure numbers in file are separated by spaces
            outFile.close();        //closes file for output
        }

        Scanner inFile = null;      //creates scanner to read in file
        try     //TryCatch statement to catch errors
        {
            inFile = new Scanner(new File(fileName));       
        }
        catch (FileNotFoundException e)
        {
            System.out.println("File "+fileName+" doesn't exist.  Exiting program");
            System.exit(-1);
        }

        int num, neg = 0, pos = 0, zero = 0;        //variables to hold current number, positives, negatives and average
        double avg = 0;

        while (inFile.hasNext())        // Use a while loop to read in numbers from the file until the end
        {       
            inFile.nextLine();
            fileName = inFile.nextLine();
            avg = 0;
            num = 0;

            while(inFile.hasNextInt())
            {
                num = inFile.nextInt();
                avg += num;         //adds current num to avg

                if (num > 0)
                    pos++;      //checks if positive and adds one to total pos
                if (num < 0)
                    neg++;      //checks is negative and adds one to total neg
                else
                    zero++;     //checks for zeros and adds one to total
            }
            avg = (avg/LIMIT);      //calculates actual average
            inFile.close();     //closes file for input
        }

        outFile = null;         //Opens file for output again

        try
        {
            outFile = new PrintWriter(new FileWriter(fileName, true));      //TryCatch statement to catch any errors when file opens
        }                                                                       //Allows file to be appended to instead of truncated
        catch (IOException e)       
        {
            System.out.println("File "+fileName+" doesn't exist.  Exiting program");
            System.exit(-1);
        }

            System.out.println("\n\nNumber of negative numbers in the file: " + neg);
            System.out.println("\nNumber of positive numbers in the file: " + pos);
            System.out.println("\nNumber of zeroes in the file: " + zero);
            System.out.println("\nAverage of the numbers in the file: " + fmt.format(avg));

            outFile.print("Number of negative numbers in the file: " + neg);
            outFile.print("Number of positive numbers in the file: " + pos);
            outFile.print("Number of zeroes in the file: " + zero);
            outFile.print("Average of the numbers in the file: " + fmt.format(avg));

            outFile.close();
}  // End of main
} 
```

我正在介绍Java，但我对此很残酷。无论我练习或学习多少小时，我都无法理解。我做了这么多，但现在我得到了这个。

```
Exception in thread "main" java.util.NoSuchElementException: No line found
  at java.util.Scanner.nextLine(Scanner.java:1585)
  at Lab11.main(Lab11.java:89) 
```

我不知道我哪里出错了。任何指导都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:33:42.053

专注于 ：`Exception in thread "main" java.util.NoSuchElementException: No line found`

看这段代码。

```
 while (inFile.hasNext())        // Use a while loop to read in numbers from the file until the end
    {       
        inFile.nextLine();
        fileName = inFile.nextLine(); 
```

假设您的文件只有一行。那么，`inFile.nextLine();`已经读过了。之后没有更多的行。所以，删除`inFile.nextLine()`.

您的代码现在应该是：

```
 while (inFile.hasNext())        // Use a while loop to read in numbers from the file until the end
    {       
        fileName = inFile.nextLine(); 
```

另外，正如 syb0rg 所提到的，请不要一次使用太多的 next 函数。你只会把自己弄糊涂。

# interface - D语言无法将接口作为指针传递

> ID：15915207
> 
> 赞同：1
> 
> 时间：2013-04-10T01:01:56.790
> 
> 标签：interface, d

我不知道这里发生了什么。请解释。代码...

```
import std.stdio;

void main(string[] args)
{
    ClassObject ss1 = new ClassObject("First Class");
    writeln(ss1.produce());
    ClassObject ss2 = new ClassObject("Some Class");
    ClassObject* ss3 = &ss2;
    voidclass(ss3);
    ClassObject ss4 = new ClassObject("Final Class");
    passinterface(ss4);
    ClassObject* ss5 = &ss4;
    writeln(ss5.produce());
    voidinterface(ss5);
}

public void voidclass(void* arg)
{
    ClassObject* ss = cast(ClassObject*) arg;
    writeln(ss.produce());
    writeln(ss.produce);
    ClassObject ssnp = *ss;
    writeln(ssnp.produce());
    writeln(ssnp.produce);
}

public void voidinterface(void* arg)
{
    IObject* bob = cast(IObject*) arg;
    writeln(bob.produce());
}

public void passinterface(IObject arg)
{
    writeln(arg.produce());
}

interface IObject
{
    string produce();
}

class ClassObject : IObject
{
    protected string _value;

    this(string value)
    {
        this._value = value;
    }

    public string produce()
    {
        return this._value;
    }
} 
```

输出...

```
First Class
Some Class
Some Class
Some Class
Some Class
Final Class
Final Class
main.ClassObject 
```

最终输出是怎么回事？我将一个类实例传递给一个需要指针的函数。然后，当我将它转换为接口时，它不尊重接口的方法。但是有些人如何能够告诉这个我通过的类的实例？

可悲的是，我绑定到一个 C 库，所以我必须使用 void* 作为参数类型。所以请不要建议不要使用它。

编辑：编译器信息...

```
$ dmd -v
DMD64 D Compiler v2.062
Copyright (c) 1999-2012 by Digital Mars written by Walter Bright
Documentation: http://dlang.org/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T01:30:57.250

D 中的指针不是多态的。只有类引用是。一旦通过指针进行操作，就会失去多态性。

此外，`&ss2`不会导致指向类的指针。它导致指向类引用的指针。D 中不能有指向类对象的指针，只能引用类对象。类型系统并没有真正区分类引用和它所引用的对象，这就是为什么[`std.typecons.Rebindable`](http://dlang.org/phobos/std_typecons.html#Rebindable)如果你想要一个对 const 类对象的非常量引用是必需的。

但是，如果您出于某种原因确实需要使用，则*可以*将类引用转换为往返- 尽管通常您确实应该避免使用它。使用意味着您丢失了类型信息，编译器无法保护您。虽然它偶尔有用（特别是在与 C 交互时），但没有太多理由在 D中使用。`void*``void*``void*``void*`

# grid - 从 html 表中检索行数

> ID：15915213
> 
> 赞同：1
> 
> 时间：2013-04-10T01:03:00.833
> 
> 标签：grid, kendo-ui

如何计算网格的行数？我的网格有数据，但此代码返回`0`：

```
alert($('#Grid').data("kendoGrid").tbody.find('>tr.k-master-row').length); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:49:37.683

首先，一个旁注：查找 `grid`基于的长度`tbody`将**只**显示（那些可见的）中的行数，`view`如果`paging`你不知道那些不可见的。

有几种选择：

1.  根据您所做的：`$("#grid").data('kendoGrid').tbody.find('>tr').length`
2.  不必计算它（解决方案 1 可能很昂贵，因为它必须根据导航 DOM 来计算它）：`$("#grid").data('kendoGrid').tbody[0].rows.length`
3.  基于`dataSource.view`：`grid.dataSource.view().length`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:53:31.947

As OnaBai says, it depends if you want the whole count of lines in the table or only the one visibles.

If you want the **total number of lines**, you can use :

```
$("#grid").data("kendoGrid").dataSource.total(); 
```

and if you only want the **visible ones**, you can use :

```
$("#grid").find("tbody > tr").length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:19:30.363

试试这个@flower

```
$("#grid").data('kendoGrid').tbody[0].rows.length 
```

演示：http: [//jsfiddle.net/SWnSs/1/](http://jsfiddle.net/SWnSs/1/)

# java - SendRedirect “防止重新提交”有保证吗？

> ID：15915217
> 
> 赞同：3
> 
> 时间：2013-04-10T01:03:30.007
> 
> 标签：java, servlets

嗨，我是服务器端编程（java）的新手，正在阅读 SendRedirect 与 Forward 之间的区别。从[Post-redirect-get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)它解释说，这将防止通过点击刷新按钮重新提交修改。但是，如果服务器端的后处理很繁重，并且在服务器处理帖子期间以及在它发回 3xx 重定向之前，用户刷新页面怎么办？服务器如何知道连续忽略第二个传入请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:19:53.667

我明白你的意思，实际上 PRG 保证*只有在先前的重定向完成时才*防止双重 POST 提交，包括后退按钮，因此浏览器现在可以发送 GET 请求。

> **但是，如果在进行重定向之前运行了一个长进程会发生什么？**

我有两种已知的方法来处理这种情况：

*   如果您在重定向之前有一个很长的过程要做，那么 PGR 目标将无法满足是合乎逻辑的；因此，如果有人遇到这种麻烦，`then long-time process should be consider to run in separate thread`那么您只需将重定向发送到可以向用户显示进度的页面（可选），这类似于 Ajax。

*   这个我没有尝试过，但它真的很合乎逻辑**`Synchronization Token pattern`**，所以它基本上是基于在你的页面中设置一个隐藏的令牌，然后当一个 POST 请求被发送到服务器时，你会增加这个令牌的任意数量`store it into session`，所以下次用户单击提交按钮或刷新页面，您可以`compare the token`在每次页面出现存储在会话中的页面时得到解决，这是一种替代方法，您可以避免一遍又一遍地处理与同一用户关联的相同请求。

如果您想了解更多信息，我给您这个链接[http://www.deepakgaikwad.net/index.php/2009/03/19/post-redirect-get-design-pattern.html](http://www.deepakgaikwad.net/index.php/2009/03/19/post-redirect-get-design-pattern.html)

希望它有用...

# pingfederate - 与 PingFederate 和 PHP 集成

> ID：15915223
> 
> 赞同：1
> 
> 时间：2013-04-10T01:04:30.047
> 
> 标签：pingfederate

我们有一个使用 PingFederate 进行 SSO 的客户端。

我们想与他们集成，并且一直在阅读无代理集成文档。

我们是否需要从 Ping Federate（他们的任何服务器）购买任何东西来与我们的客户端集成，或者这是我们可以通过 RESTful 调用来验证来自我们客户端的用户来实现的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:23:18.340

因此，您不能在没有 PingFederate 服务器的情况下许可集成工具包。但是，您可能想从 Ping 中查看[PingOne APS](https://www.pingone.com/#developer)服务。这将为您提供 REST API 集成，并且无需安装任何软件。此外，它还可以让您通过单一集成为您的其他客户支持 SAML 1.1/2.0 [注意：我为 Ping 工作]

伊恩

# wix - 尽管设置了代码页，但带有字符的 Wix 字符串在数据库的代码页中不可用

> ID：15915225
> 
> 赞同：7
> 
> 时间：2013-04-10T01:04:37.920
> 
> 标签：wix

我在 VS2012 中有一个 Wix 安装程序项目，我上次使用它时编译得很好（大约一周前）。我今天回去发现大约 15 个代码页错误：

```
Error   6   A string was provided with characters that are not available in the specified database code page '1252'. Either change these characters to ones that exist in the database's code page, or update the database's code page by modifying one of the following attributes: Product/@Codepage, Module/@Codepage, Patch/@Codepage, PatchCreation/@Codepage, or WixLocalization/@Codepage. 
```

其中第一个发生在以下行：

```
<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine"
         Manufacturer="(株)テイコク" /> 
```

而且我认为 wix 不高兴是因为日语字符。然而，在产品声明中，我将代码页设置为 932，这对于日语应该是正确的：

```
<Product Id="*" Codepage="932" Language="1041"
         Name="各務原市農地支援・畑地管理システムインストーラー" Version="1.1.0.0"
         Manufacturer="(株)テイコク" UpgradeCode="PUT-GUID-HERE"> 
```

我真的不明白错误是什么或如何解决它，特别是因为几天前它运行良好......

这是完整的 Wix 代码，以备不时之需：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:net="http://schemas.microsoft.com/wix/NetFxExtension">
  <Product Id="*" Codepage="932" Language="1041" Name="各務原市農地支援・畑地管理システムインストーラー" Version="1.1.0.0" Manufacturer="(株)テイコク" UpgradeCode="PUT-GUID-HERE">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" Manufacturer="(株)テイコク" />

    <UIRef Id="WixUI_Minimal" />
    <UIRef Id="WixUI_ErrorProgressText" />

    <PropertyRef Id="NETFRAMEWORK40CLIENT" />
    <Condition Message="インストールするには.NETフレームワーク4.0が必要です。フレームワークをインストールしてからもう一度インストーラーを実行してください。">
      <![CDATA[Installed OR NETFRAMEWORK40CLIENT]]>
    </Condition>

    <MajorUpgrade DowngradeErrorMessage="もっと新しいバージョンが既にインストールされています。" />
    <MediaTemplate EmbedCab="yes" />

    <Feature Id="ProductFeature" Title="MapManagerInstaller" Level="1">
      <ComponentGroupRef Id="ProductComponents" />
    </Feature>

    <Icon Id="MapManager.exe" SourceFile="MapManager.exe" />
  </Product>

  <Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLFOLDER" Name="各務原市農地支援・畑地管理システム" />
      </Directory>
      <Directory Id="DesktopFolder" Name="Desktop">
      </Directory>
      <Directory Id="ProgramMenuFolder" Name="Programs">
        <Directory Id ="ProgramMenuDir" Name="各務原市農地支援・畑地管理システム">
        </Directory>
      </Directory>
    </Directory>
  </Fragment>

  <Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
      <Component Id="MapManagerProgramFiles" Guid="*">
        <File Id="MapManagerExe" Name ="MapManager.exe">
          <Shortcut Id="MapManagerDesktopShortcut" Directory="DesktopFolder" Name="各務原市農地支援・畑地管理システム" WorkingDirectory="INSTALLFOLDER" Icon="MapManager.exe" IconIndex="0" Advertise="yes" />
          <Shortcut Id="MapManagerStartMenuShortcut" Directory="ProgramMenuDir" Name="各務原市農地支援・畑地管理システム" WorkingDirectory="INSTALLFOLDER" Icon="MapManager.exe" IconIndex="0" Advertise="yes" />
        </File>
        <File Id="AxInterop.SisLib" Name="AxInterop.SisLib.dll" />
        <File Id="Interop.SisLib" Name="Interop.SisLib.dll" />
        <File Id="ClassMap" Name="ClassMap.dll" />
        <File Id="SuidenManager" Name="SuidenManager.dll" />
        <File Id="HatachiManager" Name="HatachiManager.dll" />
        <File Id="MapManagerShared" Name="MapManagerShared.dll" />
        <RemoveFolder Id="INSTALLDIR" On="uninstall" />
      </Component>
      <Component Id="DesktopShortcut" Guid="*">
        <Shortcut Id="DesktopShortcut" Name="各務原市農地支援・畑地管理システム" Target="[INSTALLFOLDER]MapManager.exe" WorkingDirectory="INSTALLFOLDER" />
        <RemoveFolder Id="DesktopFolder" On ="uninstall" />
        <RegistryValue Root="HKCU" Key="Software\MapMax\各務原市農地支援・畑地管理システム" Type="string" Value="" KeyPath="yes" />
      </Component>
      <Component Id="ProgramMenuDir" Guid="*">
        <RemoveFolder Id="ProgramMenuDir" On ="uninstall" />
        <RegistryValue Root="HKCU" Key="Software\MapMax\各務原市農地支援・畑地管理システム" Type="string" Value="" KeyPath="yes" />
      </Component>
    </ComponentGroup>
  </Fragment>
</Wix> 
```

更新：

用代码页 1252 中的字符替换每个日语字符都可以正常工作。似乎 Wix 忽略了代码页规范并使用默认的 1252 代替...

我也在一个新的 wix 设置项目中尝试过这个并且遇到了同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-08T18:33:58.320

我遇到了同样的问题，但是使用了“è”字符（包含在[CP-1252](http://en.wikipedia.org/wiki/Windows-1252)中，因此默认文化应该可以工作）。用“e”补丁替换它，但这不是一个干净的解决方案。

真正起作用的是添加 .wxl 文件代码页

```
<?xml version="1.0" encoding="utf-8"?>
<WixLocalization Codepage="utf-8" Culture="fr-ca" xmlns="http://schemas.microsoft.com/wix/2006/localization">
</WixLocalization> 
```

也精确 1252 工作

```
<?xml version="1.0" encoding="utf-8"?>
<WixLocalization Codepage="1252" Culture="fr-ca" xmlns="http://schemas.microsoft.com/wix/2006/localization">
</WixLocalization> 
```

然后根据 Wix 文档[“Specifying Cultures to Build”指定要构建](http://wixtoolset.org/documentation/manual/v3/howtos/ui_and_localization/specifying_cultures_to_build.html)的文化。它需要与 .wxl 文件中写入的文化相同。

![在此处输入图像描述](https://i.stack.imgur.com/3dKhG.png)

在 VS2010 中构建项目现在可以工作了。

编辑：只需添加`<Product Codepage="1252"`到 .wxs 文件中也可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T04:24:45.370

如果您使用 .wxl 文件，这些文件可以在构建期间覆盖代码页。确保您的 .wxl 文件都为其添加的字符设置了正确的代码页，并且您最终不会将来自不同代码页的字符与您的产品和从 .wxl 文件本地化的字符串混合。

此外，由于您使用的是 WixUI，它们还包含许多带有代码页的 .wxl 文件。在 WiX.chm 中有一个名为`"Specifying Cultures to Build"`. 这向您展示了如何设置代码页以在 Votive 中构建。具体来说，您需要在 .wixproj的`Cultures to build:`设置中添加“ja-JP”（或其他适当的文化）。`Properties`否则，您可能会从可能是 en-US 的 WixUI 获得默认文化，这将解释 1252 解决方法。

# android - 在 ListView 中使用 clipToPadding 时，项目会过早回收

> ID：15915226
> 
> 赞同：19
> 
> 时间：2013-04-10T01:04:39.303
> 
> 标签：android, android-listview

设置时

```
android:clipToPadding="false" 
```

在 2.3.3 android 设备上的标准 ListView 中，我看到列表项被过早回收。当适配器的视图完全滚动通过填充而不是滚动超过屏幕边缘时，适配器的视图将被删除，从而导致视图被过早删除。有没有人能够解决这个问题？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-18T19:28:13.700

剪辑到填充是默认行为。一旦视图不可见（即通过填充）就回收视图是正常和预期的行为。

您确定您没有尝试设置`clipToPadding`为`false`吗？在这种情况下，ListView 仍然会在其子项进入填充区域后立即对其进行回收。该属性`clipToPadding`仅影响绘图，不考虑布局算法，如`ListView`'s. 我们可以在平台的未来版本中修复此行为，但现在对您没有帮助，抱歉 :(

# javascript - 如何缩短此 JS 代码？

> ID：15915237
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:05:37.073
> 
> 标签：javascript, javascript-events

我正在为班级做作业，这对于我想要的东西来说太多了。我尝试为函数（即 function ）做一个 for 循环，`replacepicture[x]`但不起作用...帮助？

```
var img = new Array("images/flying-car-593.jpg", "images/flyingCar-article.jpg", "images/flying-car-m400.jpg", "images/high-road-aerocar.jpg", "images/log200711a.jpg","images/saucercarSplash_450x325.jpg");
console.log(img);
var caps = new Array("Picture 1","Picture 2","Picture 3","Picture 4","Picture 5","Picture 6");
console.log(caps);
var thumbs = document.getElementsByTagName('img');
console.log(thumbs);

thumbs[0].setAttribute('alt', caps[0]);
thumbs[1].setAttribute('alt', caps[1]);
thumbs[2].setAttribute('alt', caps[2]);
thumbs[3].setAttribute('alt', caps[3]);
thumbs[4].setAttribute('alt', caps[4]);
thumbs[5].setAttribute('alt', caps[5]);

function replacePicture1(events){
    event.preventDefault();
    var fullviewDiv= document.getElementById('fullview');

    while(fullviewDiv.hasChildNodes()){
        fullviewDiv.removeChild(fullviewDiv.lastChild);
    }

    var newImage1 = document.createElement('img');
    newImage1.setAttribute('src', img[0]);
    newImage1.setAttribute('alt', caps[0]);
    fullviewDiv.appendChild(newImage1);

}function replacePicture2(events){
    event.preventDefault();
    var fullviewDiv= document.getElementById('fullview');

    while(fullviewDiv.hasChildNodes()){
        fullviewDiv.removeChild(fullviewDiv.lastChild);
    }

    var newImage2 = document.createElement('img');
    newImage2.setAttribute('src', img[1]);
    newImage2.setAttribute('alt', caps[1]);
    fullviewDiv.appendChild(newImage2);

}

function replacePicture3(events){
    event.preventDefault();
    var fullviewDiv= document.getElementById('fullview');

    while(fullviewDiv.hasChildNodes()){
        fullviewDiv.removeChild(fullviewDiv.lastChild);
    }

    var newImage3 = document.createElement('img');
    newImage3.setAttribute('src', img[2]);
    newImage3.setAttribute('alt', caps[2]);
    fullviewDiv.appendChild(newImage3);

}

function replacePicture4(events){
    event.preventDefault();
    var fullviewDiv= document.getElementById('fullview');

    while(fullviewDiv.hasChildNodes()){
        fullviewDiv.removeChild(fullviewDiv.lastChild);
    }

    var newImage4 = document.createElement('img');
    newImage4.setAttribute('src', img[3]);
    newImage4.setAttribute('alt', caps[3]);
    fullviewDiv.appendChild(newImage4);

}

function replacePicture5(events){
    event.preventDefault();
    var fullviewDiv= document.getElementById('fullview');

    while(fullviewDiv.hasChildNodes()){
        fullviewDiv.removeChild(fullviewDiv.lastChild);
    }

    var newImage5 = document.createElement('img');
    newImage5.setAttribute('src', img[4]);
    newImage5.setAttribute('alt', caps[4]);
    fullviewDiv.appendChild(newImage5);

}

function replacePicture6(events){
    event.preventDefault();
    var fullviewDiv= document.getElementById('fullview');

    while(fullviewDiv.hasChildNodes()){
        fullviewDiv.removeChild(fullviewDiv.lastChild);
    }

    var newImage6 = document.createElement('img');
    newImage6.setAttribute('src', img[5]);
    newImage6.setAttribute('alt', caps[5]);
    fullviewDiv.appendChild(newImage6);

}

function init() {

var fullviewDiv = document.getElementById('fullview');

var picture1 = document.getElementById('picture1');
picture1.addEventListener('click',replacePicture1,false);
var picture2 = document.getElementById('picture2');
picture2.addEventListener('click',replacePicture2,false);
var picture3 = document.getElementById('picture3');
picture3.addEventListener('click',replacePicture3,false);
var picture4 = document.getElementById('picture4');
picture4.addEventListener('click',replacePicture4,false);
var picture5 = document.getElementById('picture5');
picture5.addEventListener('click',replacePicture5,false);
var picture6 = document.getElementById('picture6');
picture6.addEventListener('click',replacePicture6,false);

 }

window.addEventListener('load',init,false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:22:19.320

您应该使用[Currying](http://en.wikipedia.org/wiki/Currying)技术来创建新函数。

由于这是一个课堂作业，我不会给出太多，但基本概念是这样的：

```
function createAdder(a) {
    return function(b) {
        return a + b;
    }
}

var add3 = createAdder(3); // add3 is now function(b) { ... } with a = 3
add3(2) == 3 + 2;
add3(5) == 3 + 5; 
```

您可以应用这种技术来创建一个函数`createPictureReplacer(source, alt)`，该函数又返回一个新函数`replacePicture(event)`；

将它们放在一起，您将使用简单的 for 循环添加以下事件侦听器

```
picture[i].addEventListener(
    'click',
    createPictureReplacer(imgSrc[i], imgAlt[i]),
    false
); // where i is the iterator of a for-loop 
```

# php - 由 msql 选择创建的计数数组

> ID：15915238
> 
> 赞同：1
> 
> 时间：2013-04-10T01:05:42.593
> 
> 标签：php, mysql, count

我需要通过 ID 选择表格中的一些图像（允许重复输入）。

我的主代码：

```
...
$selectedImages = $this->selectImages($selectedNews['ID'][$i]);
//Check values
echo 'Count of Array: '.sizeof($selectedImages)."\n";
if (sizeof($selectedImages) == 0) {
    $this->html[] = '-';
} else {
    for ($j = 0; $j < sizeof($selectedImages); $j++) {
        $this->html[] = '<a class="fancybox single_image" href="/'.$selectedImages['Path'][$j].$selectedImages['Name'][$j].'"><img src="thumbnail/thumb.php?src=../../'.$selectedImages['Path'][$j].$selectedImages['Name'][$j].'&amp;h=50&amp;w=50" alt="'.$selectedImages['Name'][$j].'" /></a>';
    }
}
... 
```

这是我的方法：

```
private function selectImages($id) {
        $selectedImages = array();

        $sql = "SELECT
                    Name,
                    Path
                FROM 
                    News_images
                WHERE
                    Pos = '".mysqli_real_escape_string($this->db, $id)."'
                ";

        $stmt = $this->db->prepare($sql);

        if (!$result = $this->db->query($sql)) {
            echo 'Datenbankfehler\n';
            echo $this->db->error;
        }

        $i = 0;
        while ($row = $result->fetch_assoc()) {
            $selectedImages['Path'][$i] = $row['Path'];
            $selectedImages['Name'][$i] = $row['Name'];
            $i++;
        }

        echo 'Selected: '.$i.' images ,';

        return $selectedImages;
} 
```

我得到以下输出：选择 1 个图像，数组计数：2 选择 0 个图像，数组计数：0 选择 4 个图像，数组计数：2

所选图像的实际数量是正确的。但是 Array 的计数与实际选择的计数不匹配。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:09:04.440

`sizeof($selectedImages);`会给你`2`，因为它实际上有两个元素：“路径”和“名称”。利用：

```
sizeof($selectedImages['Path']) ... 
```

或者

```
sizeof($selectedImages['Name']) ... 
```

尊重您当前的数组结构。

* * *

顺便说一句：像下面这样的数组结构不是更好吗？;)

```
$selectedImages = array (
    array('Path' => '...', 'Name' => '...'),
    array('Path' => '...', 'Name' => '...'),
    ....
); 
```

要实现这一点，您只需简化 mysql 获取代码：

```
$selectedImages = array();
while ($row = $result->fetch_assoc()) {
    $selectedImages[] = $row;
} 
```

# java - Java递归函数复制输出

> ID：15915244
> 
> 赞同：0
> 
> 时间：2013-04-10T01:06:16.847
> 
> 标签：java, performance, sling

我对 Java 和一般的递归函数真的很陌生。我对几件事有点迷茫。为什么由于某种原因我得到重复的输出。似乎只有当我遍历内容时。我知道为什么会发生这种情况，因为我的“isPageParent”函数似乎返回 false 并多次运行该函数。但我想不通为什么？我一直在这上面花了几个小时，而且完全卡住了。我是新手，非常感谢代码示例。

```
public static String generateTest(Page page, Page rootPage, String bc) {

Page parent = page.getParent();

String bread = ""; 
bread += (parent != null) ? "<li><a href=" + parent.getPath() + ">" + parent.getTitle() + "</a>" : "";
bread += "<li>" + "<a href=" + page.getPath() + ">" + page.getTitle() + "</a></li>" + bc;
return (ifPageRoot(parent , rootPage)) ? breadcrumb : generateTest(parent, rootPage, bread);

}

public static boolean ifPageRoot(Page page, Page root) {
return (page == null || root.getPath().equals(page.getPath()));
} 
```

谢谢！

# android - Android.Speech.TextToSpeech 阿拉伯语

> ID：15915252
> 
> 赞同：1
> 
> 时间：2013-04-10T01:07:20.400
> 
> 标签：android, locale, text-to-speech

我想为我的 Android 应用程序添加阿拉伯语支持。有谁知道该怎么做？

我认为这是适用的，因为阿拉伯语“ar_EG”有一个语言环境

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:26:10.697

Android 从 2.3 版本开始确实支持阿拉伯语；因此，您必须选择 2.3 版本作为最低目标，较低版本将不支持阿拉伯语。

您还可以阅读以下内容：[Android 上支持的语言/区域列表是什么？](https://stackoverflow.com/questions/7973023/what-is-the-list-of-supported-languages-locales-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:28:00.063

您希望阿拉伯语支持在哪个级别？如果您正在本地化 UI，那么在管理布局、字体、字符串资源以及视图的方向（从右到左）方面需要付出很多努力

如果您只关注文本转语音，请提供更多详细信息，也许阅读此问题中的答案会 [帮助]（[阿拉伯语 TTS（文本转语音）库 for android](https://stackoverflow.com/questions/8851384/arabic-tts-text-to-speach-library-for-android)）

# indexing - 带有登录页面的双站点

> ID：15915253
> 
> 赞同：0
> 
> 时间：2013-04-10T01:08:13.433
> 
> 标签：indexing, prestashop

情况：我在 plchardware.com.au 上有一个网站。我想在该公司的子域（new.plchardware.com.au）上为同一家公司创建一个新的（prestashop）站点，但希望为 SEO 和顽固用户保留旧站点。

我想要一个来自 plchardware.com.au 的登录页面：有两个选项，一个访问新网站，另一个访问旧/当前网站。

问题：

除了 index.php（我不想更改当前的 index.php）之外，还有其他方法可以登陆登陆页面吗？或者我最好怎么做？也许是一个 js 弹出窗口？

另外，在尝试这样做时我可能会遇到任何潜在的问题吗？

只是需要一些建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:29:43.793

我想你正在使用 Apache。

要使用不同的索引页面，请使用：

```
DirectoryIndex myotherpage.php 
```

在我看来，您将面临针对 SEO（即 Google 排名）的重复内容处罚的危险，所以要小心。

# python - 一次创建多个数组

> ID：15915255
> 
> 赞同：0
> 
> 时间：2013-04-10T01:08:22.880
> 
> 标签：python, arrays, os.walk

我目前正在处理数百个文件，所有这些文件我都想读入并作为一个 numpy 数组查看。现在我正在使用 os.walk 从目录中提取所有文件。我有一个 for 循环，它遍历目录，然后创建数组，但它没有存储在任何地方。有没有办法“随时随地”创建数组或以某种方式为空数组分配一定数量的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:11:11.297

只需将它们附加到列表中即可：

```
lists = []

for dirpath, dirnames, filenames in os.walk(...):
    lists.append(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:15:48.783

Python 的列表是动态的，您可以随时更改它们的长度，因此只需将它们存储在列表中。或者，如果您想通过名称而不是数字来引用它们，请使用字典，其大小也可以随时更改。

# c++ - 区分 C++ 对象是否是动态分配的？

> ID：15915258
> 
> 赞同：2
> 
> 时间：2013-04-10T01:08:53.417
> 
> 标签：c++, memory-management

可以在编译时（在堆栈上）分配 C++ 对象的内存。

```
MyClass mc; 
```

或动态（常用方法）

```
MyClass *mc = new MyClass(); 
```

C++ 语言中是否有任何**内置**方法可以区分对象是以静态方式还是动态方式分配的？内置我的意思是使用模板或关键字等（非编程/算法方法）。

本质上，目标是“标记”未使用`new`运算符分配的对象（动态分配）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T01:42:22.773

不，无法检测对象是静态分配还是动态分配。至少在大多数人使用这些词的意义上：堆栈与堆。C++ 标准考虑了三种类型的存储，*静态*存储（全局变量、类的静态成员、静态局部变量）、动态分配和自动存储。

第三个使事情复杂化，因为具有*自动*存储功能的对象可能被分配为可能在三个领域中的任何一个中分配的更大对象的一部分。例如，考虑一个在堆中分配并由 a 管理的对象`shared_ptr`，它可能是直接用 分配的`new`，或者它可能是通过创建的`make_shared`。在第一种情况下，`new`使用您的类型调用，但在后一种情况下，动态分配更大的块并就地构造对象：

```
std::shared_ptr<T> p = std::make_shared<T>();
std::shared_ptr<T> q( new T() ); 
```

现在有趣的一点是你*为什么*关心对象是如何创建的，因为可能有不同的事情可以解决你的实际*问题*，而不涉及你所要求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:22:21.733

正如 StoryTeller 所说，您可能想要的是使`new`运算符重载。

```
class A{
    private:
        bool isDynamic;

    public:
        void *operator new(size_t size){
            isDynamic = true;
        } 
```

# javascript - 带有 Javascript 的 CSS

> ID：15915263
> 
> 赞同：0
> 
> 时间：2013-04-10T01:09:32.910
> 
> 标签：javascript, css

我想做这样的事情，但它不起作用

```
 window.onresize = center;

 function center() 
 {
      var x=window.innerWidth;
      x = x/2;
      document.getElementById("center_div").style.marginLeft = x;
 } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:12:14.187

您必须添加`px`，`Element.style.marginLeft`不接受数字。它应该是有效的 CSS 属性 ( `margin-left`) 值；它可以是`10px`or`5%`或`auto`;

```
document.getElementById("center_div").style.marginLeft = x + 'px'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:32:06.233

您的代码很好，但缺少一件事。您必须在 X 变量之后加上“px”。换句话说，它应该是： `document.getElementById("center_div").style.marginLeft = x+"px";` 否则，浏览器将不知道它的单位。

我在 jsfiddle 中做了一个示例，这将是一个工作示例。尝试一下。[http://jsfiddle.net/TLPak/](http://jsfiddle.net/TLPak/)

PS。我已经更新了代码以在其中包含 window.onresize。（还有一些改进，考虑了 DIV 的宽度。）[http://jsfiddle.net/TLPak/1/](http://jsfiddle.net/TLPak/1/) 通过单击事件或窗口调整大小事件触发它都可以。希望它对你有一些帮助。

```
function center() {
    var x=window.innerWidth;    
    x = x/2;

    var y = document.getElementById("center_div").offsetWidth;
    y = y/2;

    document.getElementById("center_div").style.marginLeft = x - y + "px"; 
}

window.onresize = center; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:12:45.020

我认为您正在寻找的是 css 属性`margin: auto`。随机示例（不是我的）：[http](http://bluerobot.com/web/css/center1.html) ://bluerobot.com/web/css/center1.html 。此外，你会想要`width: 50%`. 那是你要找的吗？让我知道，如果需要，我会更改答案。:)

# python - HTTP Post 使用 httplib2 错误

> ID：15915264
> 
> 赞同：3
> 
> 时间：2013-04-10T01:09:33.390
> 
> 标签：python, http-post, google-drive-api, httplib2

我正在尝试使用谷歌[在此处](https://developers.google.com/accounts/docs/OAuth2WebServer#refresh)描述的刷新令牌来获取新的访问令牌。谷歌说我需要发出一个 HTTP 请求。我不知道如何做到这一点，所以我从[这里](https://stackoverflow.com/a/4476389/1355232)查找了如何做到这一点。但是，我必须错误地发布帖子，因为我收到`invalid_request`错误。

以下是我的相关代码：

```
h = Http()
post_data = {'POST': '/o/oauth2/token HTTP/1.1', 
             'HOST:': 'accounts.google.com', 
             'Content-Type:': 'application/x-www-form-urlencoded',
             'client_id':ClientID,
             'client_secret':ClientSecret,
             'refresh_token':SavedRefreshToken,
             'grant_type':'refresh_token'}
resp, content = h.request("https://accounts.google.com/o/oauth2/token", 
                          "POST", 
                          urlencode(post_data)) 
```

我得到的回应是：

```
{
  "error" : "invalid_request"
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T01:46:24.733

这实际上只是您`'Content-type'`在正文中发送的时候应该在标题中发送。此外，你不需要`'POST': '/o/oauth2/token HTTP/1.1'`和`'HOST:': 'accounts.google.com'`在你的身体。尝试这样做：

```
h = Http()
post_data = {'client_id':ClientID,
             'client_secret':ClientSecret,
             'refresh_token':SavedRefreshToken,
             'grant_type':'refresh_token'}

headers = {'Content-type': 'application/x-www-form-urlencoded'}

resp, content = h.request("https://accounts.google.com/o/oauth2/token", 
                          "POST", 
                          urlencode(post_data),
                          headers=headers)

print content 
```

它应该打印如下内容：

```
{
  "access_token" : "ya29.AHBS6ZCtS8mBc_vEC9FFBkW2x3ipa7FLOs-Hi-3UhVkpacOm",
  "token_type" : "Bearer",
  "expires_in" : 3600
} 
```

# scala - 如何用部分数据从 json 填充案例类？

> ID：15915266
> 
> 赞同：7
> 
> 时间：2013-04-10T01:09:40.873
> 
> 标签：scala, lift-json

```
import net.liftweb.json._
import net.liftweb.json.JsonParser._

object test02 extends App {
    implicit val formats = DefaultFormats
    case class User(
        id: Int = 0,
        name: String = "John Doe",
        gender: String = "M")

    val s1=""" {"id":1,"name":"Bill","gender":"M"} """
    var r1=Serialization.read[User](s1)
    println(r1)

    val s2=""" {"id":1} """
    var r2=Serialization.read[User](s2)
    println(r2)  

} 
```

第二个 Serialization.read 导致异常：net.liftweb.json.MappingException：名称没有可用值。

我怎么可能将数据表单 json 读入案例类，但是如果某些字段丢失，它们会被案例类的默认值替换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T02:22:30.953

看起来已经有很长一段时间了：[https ://www.assembla.com/spaces/liftweb/tickets/534](https://www.assembla.com/spaces/liftweb/tickets/534)

同时，一种选择是使用`Option`：

```
 case class User(
        id: Int = 0,
        name: Option[String],
        gender: Option[String]) {
      def defaults = copy(
        name   = name   orElse Some("John Doe"),
        gender = gender orElse Some("M"))
    }
    // ...        
    val s2=""" {"id":1} """
    var r2=Serialization.read[User](s2)
    println(r2) 
```

那应该给你：

```
 User(1,None,None) 
```

你可以使用这样的东西来填写默认值：

```
 val r2 = Serialization.read[User](s2).defaults

 // r2: User = User(1,Some(John Doe),Some(M)) 
```

另一种选择是为您的案例类使用额外的构造函数：

```
 case class User(id: Int, name: String, gender: String)
 object User {
   def apply(id:Int): User = User(id, "John Doe", "M")
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-03T08:41:10.650

如何使用 play json 库来做到这一点，但是，您必须在解析器中提供默认值，而不仅仅是值的默认值：

```
case class User(id: Int, name: String, gender: String)

import play.api.libs.json._
import play.api.libs.functional.syntax._

implicit val userReads: Reads[User] = (
  (__ \ "id").read[Int] and
  (__ \ "name").read[String].or(Reads.pure("John Doe")) and
  (__ \ "gender").read[String].or(Reads.pure("Male"))
)(User)

Json.fromJson[User](Json.parse("""{"id":1,"name":"Bill","gender":"M"}"""))

Json.fromJson[User](Json.parse("""{"id":1}""")) 
```

`Reads.pure`我想您可以通过创建 User 的模板实例然后将每个字段的默认值传递给而不是在那里硬编码字符串来提供默认参数的默认值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-05T16:43:18.837

这是一个 Play 解决方案，它不需要您指定两次或在某个奇怪的地方指定默认值——它使用宏在编译时找到适当的默认值。

首先是案例类：

```
case class User(id: Int = 0, name: String = "John Doe", gender: String = "M") 
```

接下来，您需要`DefaultFinder`按照我在[这篇博文中的](http://meta.plasm.us/posts/2013/10/17/explicit-defaults-in-scala/)描述进行定义。然后你实际上完成了：

```
import DefaultFinder._

import play.api.libs.json._
import play.api.libs.functional.syntax._

implicit val userReads: Reads[User] = (
  (__ \ 'id).readNullable[Int] and
  (__ \ 'name).readNullable[String] and
  (__ \ 'gender).readNullable[String]
)((id, name, gender) => new User(
  id = if (id.isEmpty) default else id.get,
  name = if (name.isEmpty) default else name.get,
  gender = if (gender.isEmpty) default else gender.get
)) 
```

最后：

```
scala> Json.fromJson[User](Json.parse("""{ "id": 1, "name": "Foo McBar" }"""))
res0: play.api.libs.json.JsResult[User] = JsSuccess(User(1,Foo McBar,M),)

scala> Json.fromJson[User](Json.parse("""{ "id": 2, "gender": "X" }"""))
res1: play.api.libs.json.JsResult[User] = JsSuccess(User(2,John Doe,X),) 
```

请注意，我没有使用`getOrElse`它是因为宏不支持它，但它可以很容易地变得更通用——它只是一个快速的概念验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T22:25:36.637

大多数 scala JSON 库对此感到窒息。

我们使用内部 JSON 库，该库使用宏为缺失字段提供合理的默认值。（也将 Null 区分为 none 和 Undefined 作为默认值。因此，如果需要，您可以选择默认为 Some 的选项）

希望尽快开源。

编辑：基本上，我不知道有其他人这样做。但它是一个不断变化的生态系统，很想知道是否还有其他人解决了它

# c# - WinRT C# MessageDialog.ShowAsync - Unauthorized Access Exception -

> ID：15915269
> 
> 赞同：2
> 
> 时间：2013-04-10T01:09:54.630
> 
> 标签：c#, xaml, windows-runtime

I don't think I need to paste code. This is C#.

Basically, I have a MessageDialog Created, Show it, and have UICommandInvokedHandler being called from a button.

Inside that Handler, I do other items that could cause another MessageDialog.ShowAsync to be called. However, this second call is giving an Unathorized Access Exception.

I've tried some things like causing an event trying to force the new MessageDialog to be created on the UI THread, but that did the same thing.

Any suggestions on how to get around this? Roughly, I am trying to give a Dialog to say "Are you sure? Yes/No" If yes, it does the guts of execution and can pop up other Dialogs to give random error information.

Ok Code:

```
 public static async void WriteMessageDialog(string message, string buttonText1, UICommandInvokedHandler handler1, string buttonText2, UICommandInvokedHandler handler2)
    {
        MessageDialog msgDlg = new MessageDialog(message);
        msgDlg.Commands.Add(new UICommand(buttonText1, handler1));
        msgDlg.Commands.Add(new UICommand(buttonText2, handler2));

        // Set the default button to be enabled and default on escape key pressed
        msgDlg.DefaultCommandIndex = 0;
        msgDlg.CancelCommandIndex = 0;

        // Show the window
        await msgDlg.ShowAsync();
    } 
```

Later.....

```
// THey original Message Dialog
RTUtilities.WriteMessageDialog(
       _resourceLoader.GetString("DetelePersonConfirm"),         
       _resourceLoader.GetString("Delete"), 
       new UICommandInvokedHandler(this.CommandDeletePersonHandler), _resourceLoader.GetString("Cancel"), 
       new UICommandInvokedHandler(this.CommandCancelHandler)); 
```

Calls this.....

```
 private async void CommandDeletePersonHandler(IUICommand command)
    {
        MessageDialog msgDlg = new MessageDialog(_resourceLoader.GetString("DeleteIndividualError"));
        await msgDlg.ShowAsync();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:50:33.733

Well, the core of the problem is you're trying to bring up a MessageDialog while one is still in play.

There may be more elegant approaches, but you could use the return of [ShowAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog.showasync.aspx) to identify the selected command then explicitly call its handler, that way the first popup is dismissed before the second appears. A quick test on this end indicates that would work.

# active-directory - 是否可以查询 LDAP 以获取扩展的 Active Directory 属性？

> ID：15915271
> 
> 赞同：0
> 
> 时间：2013-04-10T01:09:58.297
> 
> 标签：active-directory

我正在尝试构建一个列出当前锁定在 Active Directory 中的所有帐户的应用程序。据我了解，Active Directory`LockedOut`将对象的属性更改为`true`帐户被锁定时，而依赖其他方法不太可靠，例如查看 if `lockoutTime>1`。

我知道你可以看到这个属性，如果你运行了更多，`get-aduser johndoe -properties *`但我无法通过 LDAP 查询获取所有属性。

换句话说，是否可以`lockedOut`通过 LDAP 查询等方式提取扩展的 AD 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:10:00.677

对不起，我之前的回答确实是错误的。然而，在做了一些研究之后，似乎：

1.  未设置或 0的`lockoutTime`属性可靠地指示帐户**未**锁定。（见本文备注部分[）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676843%28v=vs.85%29.aspx)。

2.  `msDS-User-Account-Control-Computed`位字段属性可靠地指示帐户是否被锁定（如果设置了位`0x10`），但它是一个计算值，不能包含在搜索过滤器中。

因此，最好的解决方案可能是查询所有**可能**使用过滤器锁定的帐户，`(&(objectClass=user)(lockoutTime>=1))`然后通过检查属性`0x10`位以编程方式进一步过滤结果`msDS-User-Account-Control-Computed`，以便获得准确的结果。

[本文](http://www.selfadsi.org/extended-ad/search-locked-users.htm)末尾概述了相同的解决方案。

# c# - 监控/确定何时使用 com 对象

> ID：15915274
> 
> 赞同：0
> 
> 时间：2013-04-10T01:10:12.820
> 
> 标签：c#, winapi, com, mfc

我想知道是否有人可以帮助我。我想做的是在 COM 对象上放置某种类型的触发器，每当创建/加载和使用该对象时，我都想创建一个日志。如果有人可以指导，我对 C# 相当熟悉，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T06:20:40.617

我想你想使用一些嗅探工具来读取 RS232 端口。有很多免费工具可用（我使用了[http://www.hhdsoftware.com/serial-monitor](http://www.hhdsoftware.com/serial-monitor)，但还有很多其他工具）。您所要做的就是告诉这个工具您要监控哪个 RS232 端口并进行 presto。

如果你真的必须从你的应用程序内部监视一些 RS232 通信，我猜它会变得有点棘手（安装过滤器驱动程序等等，这可能是 Win32 下编程的最高艺术）。

问候，斯图尔特

PS：标签“com”用于MS的组件对象模型。最好使用 rs232 作为标签名称。

# regex - 使用 RegEp 在 Perl 上打印文本

> ID：15915280
> 
> 赞同：1
> 
> 时间：2013-04-10T01:11:03.757
> 
> 标签：regex, perl

我想从我的源文本中提取满足这些条件的字符串：

*   字符串的第一个字母既是一行的第一个字母又是一个元音。
*   字符串继续到下一个`.`或`;`（不管换行符）

我试过这个：

```
$_ = join("",<>);

foreach ($text =~ /^[AEIOUaeiou][\w\s,]*[.;]/m)
{
    print "$text\n";
} 
```

这应该如何工作的一个例子：

```
Input:
Lorem ipsum dolor sit amet, consectetur adipiscing elit. In aliquet lobortis vehicula. Sed
augue lectus, mattis nec tempus vel, mattis vel sapien, morbi venenatis faucibus pulvinar,
quisque ut semper leo; Nam porta risus et dui molestie sodales. Sed ullamcorper, orci ut
suscipit cursus, ipsum ipsum scelerisque velit, vel facilisis ligula urna eu felis.
Quisque sed orci eu felis rhoncus fermentum lobortis quis lorem. Nulla hendrerit, ligula
semper sagittis viverra, quam lacus condimentum augue, ut varius augue orci et velit.
Praesent tellus erat, vulputate non congue non, sagittis vel quam. Integer orci metus,
dapibus at suscipit scelerisque, ultrices at neque. Etiam fermentum molestie diam ac
semper. Donec convallis tincidunt augue, vel tincidunt mi aliquam ut. Maecenas rutrum ante
eget mauris lobortis ut consectetur neque congue.

Output:
"augue lectus, mattis nec tempus vel, mattis vel sapien, morbi venenatis faucibus   pulvinar,"
quisque ut semper leo;"
"eget mauris lobortis ut consectetur neque congue." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:19:38.843

试试这个：

```
while($text =~ /(?:(?<!.)|\n)([aeuoi][^;.]*[;.])/img)
{
    print "$1\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:57:19.583

您的正则表达式有效，但您从未设置`$text`，也没有打印匹配项。

你可以这样做：[（ideone demo）](http://ideone.com/llDgl3)

```
use strict;
use warnings;

my $text = join "", <>;

while($text =~ /^[aeiou][^.;]*[.;]/mig)
{
        print "$&\n";
} 
```

输出：

```
augue lectus, mattis nec tempus vel, mattis vel sapien, morbi venenatis faucibus pulvinar,
quisque ut semper leo;
eget mauris lobortis ut consectetur neque congue. 
```

# facebook - 使用 JavaScript SDK 检索 Facebook 用户信息时出错

> ID：15915281
> 
> 赞同：1
> 
> 时间：2013-04-10T01:11:07.460
> 
> 标签：facebook, google-app-engine, facebook-graph-api, facebook-javascript-sdk

我正在尝试在 Google App Engine 上托管的网络应用程序上检索 Facebook 用户信息。

设置如下： 1\. 托管在 Google 的默认 appspot.com 上的 Web 应用程序。2\. 注册一个 Facebook 应用程序，并配置为“使用 Facebook 登录的网站”。

我正在使用 FB JavaScript SDK 通过以下简单代码进行身份验证和检索数据：

```
function login(){
    FB.getLoginStatus(function(r) {
         if(r.status === 'connected') {
                FB.api('/me', function(user) {
                      alert(JSON.stringify(user));
                  });
         }else{
            FB.login(function(response) {
                    if(response.authResponse) {
                        alert("Now.... Thats better with FB!");
                } else {
                    alert("You should connect to FB.");
                }
         });
     }
    });
}; 
```

但是，当我从 FB.api(...) 调用返回“用户”响应时，它是以下 JSON：

```
{"error":{"type":"http", "message":"unknown error"}} 
```

在我的 Facebook 应用程序中，我在 Facebook 应用程序设置的“使用 Facebook 登录的网站”部分中的“站点 URL”指向我的 GAE 应用程序的 https 地址。而且我不确定为什么会出现这样的错误。

我花了很多时间搜索 StackOverflow 和整个网络，但没有提到这一点。有人可以请...真的请帮忙！:)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:58:14.550

经过相当多的调查和尝试/错误，我发现了问题所在:) 我`login()`从 onclick 事件中调用了该函数，如下所示：

```
<a href='' onclick='login();'> 
```

现在，在我的 login() 中调用的 Facebook 登录对话框由于一个问题（功能？）没有正确返回，直到这个日期我都不知道。我需要添加`return false;`到 onclick 函数调用的末尾，以确保浏览器执行其关闭打开窗口的默认行为（其中 FB.login 依赖于存储正确的访问密钥）。因此，由于窗口行为不正常，FB.api 没有存储和找到正确的访问密钥，因此调用失败。长话短说，修复就像这样简单：

```
<a href='' onclick='login();return false;'> 
```

希望这对其他人有帮助。

# jquery - 悬停另一个 div 时在多个图像之间切换（使用 css sprites）

> ID：15915282
> 
> 赞同：1
> 
> 时间：2013-04-10T01:11:07.537
> 
> 标签：jquery, hover, css-sprites

当我将鼠标悬停在另一个 div 上时，我正在使用 jQuery 在多个图像之间进行切换。代码如下：

```
var imgs=['img/image01.png',
    'img/image02.png',
    'img/image03.png',
    'img/image04.png'];
var $img = $('#toons');

$('#logo').on('mouseover', function() {
    var current = imgs.indexOf($img.attr('src'));
    $img.attr('src', imgs[++current] || imgs[0]);
}); 
```

HTML：

```
<img id="toons" src="img/image01.png" /> 
```

每次将鼠标悬停在 div#logo 上时，图像都会来回变化。虽然这很好用，但我想知道是否可以在我的样式表中使用 CSS 精灵和背景图像来实现相同的效果，只需一个带有 4 个图像的画布。我想这是可能的，但我无法弄清楚。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:52:56.267

让我们从一个简单的图形开始，它只是一个“数字条”。这是一个很好的图像来展示你所询问的概念，最重要的是，我已经创建了它。这里是...

[数字 http://www.secretagentorange.com/_test/numbers.png](http://www.secretagentorange.com/_test/numbers.png)

此图像是通过组合六个单独的 40x40 图标制作的。我使用 PS Elements 来完成这项工作，但 GIMP 或许多其他图像编辑器可以完成这项工作。我们的单个位图由六个单独的图像组成，称为“精灵”。我们要做的是通过调整 background-position-x CSS 属性（并确保我们的“光圈”或显示窗口仅大到足以显示一个精灵）来操纵图像一次只显示一个精灵。

给定以下javascript：

```
$( '#logo2' ).on( 'mouseover', function() {
    var current2 = $( '#toons2' ).css( "background-position" ).split( " " );
    current2[0] = parseInt( current2[0].replace( "px", "" ), 10 );
    current2[0] = ( ( current2[0] > -120 ) ? current2[0] - 40 : 0 );
    $( '#toons2' ).css( "background-position", current2[0] + "px 0" )
}); 
```

和 HTML：

```
<div id="toons2"></div>
<div id="logo2">hover2</div> 
```

和 CSS：

```
#toons2 {
    width: 40px;
    height: 40px;
    background: transparent url( 'img/image01.png' ) no-repeat;
    background-position: 0 0;
} 
```

那么我们可以预期，每次我们将鼠标悬停在 div#logo2 上时，div#toons2 的背景图像都会发生变化。（在这种情况下，前四个图标将依次显示并重复。）

div#toons2 的高度和宽度很重要：它必须与单个精灵 (40x40) 的确切高度和宽度匹配。因此，如果我们有一个单独的 sprite 的组合图形，例如每个 35 像素宽 x 90 像素高，那么我们需要将 div#toons2 的高度和宽度设置为 35 的宽度和 90 的高度。这是一切都非常简单。

至于我们的 javascript，我们所做的只是在每次悬停时将 background-position-x 值调整 -40 像素，因为这是每个精灵的宽度。最初，我们看到...

[一个 http://www.secretagentorange.com/_test/number1-open.png](http://www.secretagentorange.com/_test/number1-open.png)

现在，当我们第一次将鼠标悬停时，我们会将“数字条”的 x 位置调整 -40 像素，有效地将 div#toons2 的 CSS 设置为...

```
background-position: -40px 0; 
```

产生...

[两个 http://www.secretagentorange.com/_test/number2-open.png](http://www.secretagentorange.com/_test/number2-open.png)

下次我们将鼠标悬停时，backgroundPositionX 将是 -80px，这将显示为...

[三 http://www.secretagentorange.com/_test/number3-open.png](http://www.secretagentorange.com/_test/number3-open.png)

最后，将 background-position-x 设置为 -120px 会显示图像中的第四个图标，即...

[四 http://www.secretagentorange.com/_test/number1-closed.png](http://www.secretagentorange.com/_test/number1-closed.png)

让我们看一下javascript。这一行：

```
var current2 = $( '#toons2' ).css( "background-position" ).split( " " ); 
```

获取 div#toons2 的 X 和 Y backgroundPosition 值。

在我们的例子中，我们只关心 X 值，如下所示：

```
current2[0] = parseInt( current2[0].replace( "px", "" ), 10 ); 
```

在这里，我们获取第一个索引，去除任何预期的后缀，并将字符串转换为整数。现在我们有了数值，我们可以轻松地操作它。

在我们的示例中，我们必须将图形向左移动 40 像素以显示每个后续精灵，因此我们将从整数中减去 40 来做到这一点。但由于我们只希望看到四张图片，因此与海报的原始条件保持一致，我们会检查以确保我们不会走得太远。如果我们已经显示了第四个精灵，我们会将 X 值重置为零。下一行执行此操作：

```
current2[0] = ( ( current2[0] > -120 ) ? current2[0] - 40 : 0 ); 
```

获得新的 X 值后，我们只需将其插入 backgroundPositionX 属性：

```
 $( '#toons2' ).css( "background-position", current2[0] + "px 0" ) 
```

我们在其中构建定义新值的字符串。（第二个参数 '0' 是 Y 位置，不需要更改。）

这样做。

这是[小提琴（http://jsfiddle.net/UxKyY）](http://jsfiddle.net/UxKyY/)。它包括原始条件以及建议的解决方案。

# javascript - 将对象模型作为单个对象传递给 ArrayController

> ID：15915285
> 
> 赞同：1
> 
> 时间：2013-04-10T01:11:26.270
> 
> 标签：javascript, ember.js

我有一个需要用户输入`apiKey`. 使用该表单数据，我将其传递给我的`deals`路线，然后根据输入的`apiKey`.

我的问题是，当我在 URI 中直接加载交易页面时`apiKey`，它可以正常工作，但是，当从`start`页面上的表单进入并使用 提交时`apiKey`，我收到以下错误：

```
Uncaught Error: assertion failed: an Ember.CollectionView's content must implement Ember.Array. You passed 'asdf' 
```

这是 app.js：

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
});

App.Deal = DS.Model.extend({
  name: DS.attr('string')
});

App.Deal.FIXTURES = [
  {id: 1, name: 'Deal 1'},
  {id: 2, name: 'Deal 2'}
]

App.Router.map(function() {
  this.resource('start', { path: '/' });
  this.resource('deals', { path: '/deals/:api_key' });
});

App.StartController = Ember.ObjectController.extend({
  apiKey: '',
  getDeals: function (model) {
    this.transitionToRoute('deals', this.apiKey);
  }
});

App.DealsRoute = Ember.Route.extend({
  model: function() {
    // return App.Deal.getWonFor(params.api_key);
    return App.Deal.find();
  }
});

App.DealController = Ember.ArrayController.extend({
});

App.DealsView = Ember.View.extend({
  didInsertElement: function() {
    // Add active class to first item
    this.$().find('.item').first().addClass('active');
    this.$().find('.carousel').carousel({interval: 1000});
  }
}); 
```

这是HTML：

```
 <script type="text/x-handlebars">
    <h2>Won Deal Ticker</h2>
    {{outlet}}
  </script>

  <script type="text/x-handlebars" data-template-name="start">
    {{view Em.TextField valueBinding="apiKey" placeholder="API Key" action="getDeals" }}
    <br />
    <button {{action 'getDeals' apiKey}} class="btn btn-large">Get Won Deals!</button>
  </script>

  <script type="text/x-handlebars" data-template-name="deals">
    <div id="carousel" class="carousel slide">
      <div class="carousel-inner">
        {{#each model}}
          <div class="item">
            {{name}}
          </div>
        {{/each}}
      </div>
    </div>
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:53:03.183

The issue here is that when you pass a second argument to `Route#transitionTo`, Ember.js assumes you're passing the model and sets it as the controller's model instead of using the `model` hook.

The problem is here:

```
this.transitionToRoute('deals', this.apiKey); 
```

Now Ember.js believes that `this.apiKey` is the model for your route, and will skip calling the route's `model` hook and directly set what you passed as the controller's model.

I can think of 2 ways around this:

**Method 1 (preferred)**

You can create a new resource that wraps the `deals` resource:

```
this.resource('api', { path: '/:api_key' }, function() {
  this.resource('deals');
}); 
```

And then:

```
App.ApiRoute = Ember.Route.extend({
  model: function(params) {
    return params.api_key;
  }
});

App.DealsRoute = Ember.Route.extend({
  model: function() {
    return App.Deal.getWonFor(this.modelFor('api'));
  }
}); 
```

And:

```
getDeals: function () {
  this.transitionToRoute('deals', this.apiKey);
} 
```

**Method 2**

This below is a quick workaround (probably not optimal), but should work:

```
getDeals: function () {
  var router = this.get('target'),
      url = '/deals/' + this.apiKey;

  Ember.run.once(function() {
    router.get('location').setURL(url);
    router.notifyPropertyChange('url');
  });

  this.router.router.handleURL(url);
} 
```

# javascript - 带有标题和标题的幻灯片放映在幻灯片放映之外

> ID：15915289
> 
> 赞同：0
> 
> 时间：2013-04-10T01:11:35.440
> 
> 标签：javascript, jquery, append, slideshow, jquery-callback

我正在使用[http://responsive-slides.viljamis.com/](http://responsive-slides.viljamis.com/)并且需要显示标题和段落并在幻灯片之外旋转。与此类似的东西：

[http://www.rodale.com/smoothie-ingredients](http://www.rodale.com/smoothie-ingredients)？

我不是一个 JS 人，并尝试了一些选择，但没有成功。我目前的代码是：

```
 <script>
$(function () {

  // Slideshow
  $("#slider").responsiveSlides({
    auto: false,
    pager: false,
    nav: true,
    speed: 500,
    maxwidth: 728,
    namespace: "large-btns",
    before: function(){
        }, // Function: Before callback
    after: function(){
        $(".current").html($(".rslides").find("li#" + $("." + this.namespace +     "1_on").attr("id")).index() + 1);
    } // Function: After callback
  });
$(".total").html($(".rslides li").index() + 1);
}); 
```

我尝试为幻灯片 H3 和 P 附加一个 DIV 以显示，但我无法得到它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:27:49.790

理想情况下，您将编辑库以将当前索引传回给 after 函数。尽管如此，如果您想要快速修复/破解：

你可以这样做：

在这里看到jsfiddle：

[http://jsfiddle.net/L5T6Y/1/](http://jsfiddle.net/L5T6Y/1/)

使用这样的示例 html：

```
<div id="slide_content_body">
    <div id="slide_content_0" class="slide_content">
        <h2>Superfood Smoothies! 1</h2>
    </div>
    <div id="slide_content_1" class="slide_content" style="display: none;">
        <h2>Superfood Smoothies! 2 </h2>
    </div>
    <div id="slide_content_2" class="slide_content" style="display: none;">
        <h2>Superfood Smoothies! 3</h2>
    </div>
</div>

<div class="rslides_container">
    <ul class="rslides" id="slider1">
        <li>
            <img src="http://viljamis.com/responsive-slides/1.jpg" alt="" />
        </li>
        <li>
            <img src="http://viljamis.com/responsive-slides/2.jpg" alt="" />
        </li>
        <li>
            <img src="http://viljamis.com/responsive-slides/3.jpg" alt="" />
        </li>
    </ul>
</div> 
```

js：

```
$(function () {

    // Slideshow 1
    var boo = $("#slider1").responsiveSlides({
        auto: false,
        pager: true,
        nav: true,
        speed: 500,
        maxwidth: 800,
        before: function () {
        }, // Function: Before callback
        after: function () {
            $( '.slide_content' ).hide();
            $( '#slide_content_' + $('.rslides1_on').index() ).show();
        } // Function: After callback
    });
}); 
```

RE 如果你想在 li 中包含内容，你可以这样做：

看看这个小提琴：http: [//jsfiddle.net/dnAC2/2/](http://jsfiddle.net/dnAC2/2/)

更改 js 函数以执行以下操作：

```
 $('#slide_content_panel').html( $('.rslides1_on .content').html() ); 
```

至于 html，它看起来像这样：

```
<div id="slide_content_panel">

</div>

<div class="rslides_container">
    <ul class="rslides" id="slider1">
        <li>
            <img src="http://viljamis.com/responsive-slides/1.jpg" alt="" />
             <div class="content" style="display: none;">
                <h2>Superfood Smoothies! 1</h2>
            </div>
        </li>
        <li>
            <img src="http://viljamis.com/responsive-slides/2.jpg" alt="" />
            <div class="content" style="display: none;">
                <h2>Superfood Smoothies! 2</h2>
            </div>
        </li>
        <li>
            <img src="http://viljamis.com/responsive-slides/3.jpg" alt="" />
            <div class="content" style="display: none;">
                <h2>Superfood Smoothies! 3</h2>
            </div>
        </li>
    </ul>
</div> 
```

# ruby-on-rails - 为非常小的应用程序制作搜索表单的最佳方法是什么？

> ID：15915293
> 
> 赞同：2
> 
> 时间：2013-04-10T01:11:54.870
> 
> 标签：ruby-on-rails, forms, search, sunspot

我正在使用 Rails 在 Rails 中制作一个简单的搜索表单（搜索新闻标题和内容、用户名等）。这个应用程序由 Heroku 托管。我看了看太阳黑子，但它似乎不是免费的（对我不起作用）。我想要一些关于我应该做什么的建议。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:18:39.343

使用 MetaSearch gem。

Meta Search 是一个强大的数据库搜索引擎，可让您轻松构建无 SQL 的搜索查询。您可以使用他们的界面轻松制作搜索表单。我使用它，我发现它非常全面。

[元搜索](https://github.com/ernie/meta_search)

它为您提供各种很酷的方法，例如

```
User.search(:username_like => 'this', :username_not_like => 'that', :id_greater_than => 31) 
```

和各种其他好东西

来自 GitHub 页面的高级查询，

```
# Searches projects that have awesome users
Project.joins(:user).where(:users => {:awesome => true}).search(params[:search]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:48:54.690

我使用[Ransack gem](https://github.com/ernie/ransack/)，它对我很有用。在 railscast 上还有一个关于如何使用它的视频，
希望对您有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:01:38.450

如果它很简单，而您只是想解雇并忘记，您可以做菜鸟的事情并创建一个谷歌自定义搜索。

[http://www.google.com/cse/](http://www.google.com/cse/)

它和简单的火灾和忘记设置。

我相信你甚至可以让它针对某些路由，这样它就只会返回来自 www.foobar.com/blog 或 www.foobar.com/users 的结果。

# vb.net - Query.copyToDataTable 不工作 vb.net

> ID：15915302
> 
> 赞同：0
> 
> 时间：2013-04-10T01:12:57.347
> 
> 标签：vb.net, linq

大家好，我正在使用 Linq 并尝试将结果复制到表对象。但是，我收到了演员表异常。

这是代码：

```
Dim teams As DataTable = citySideDataset.Tables("Teams")
        Dim query = From team In teams.AsEnumerable() Where team.Field(Of String)("Venue ID") = venueID And team.Field(Of Integer)("Division ID") = divisionID Select team
        Dim boundTable As DataTable = query.CopyToDataTable() 
```

有什么建议么？

编辑：

对不起。这是一个 InvalidCastException。

在尝试复制到数据表之前一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:40:02.973

通过评论中的一些探索，我们了解到您`Division ID`在数据库中的数据类型是`long`. 您的查询`of Integer`在尝试从字段中提取值时使用，这将引发错误。我们还了解到您的列支持空值。要修复您的查询，您应该使用`of Nullable(of Long)`，这将使其如下

```
Dim query = From team In teams.AsEnumerable() _
            Where team.Field(Of String)("Venue ID") = venueID _
            And team.Field(Of Nullable(of Long))("Division ID") = divisionID _
            Select team 
```

您应该注意的最后一个考虑因素是，如果没有行通过您使用的任何过滤器，`CopyToDataTable()` *它将引发*自己的异常。因此，如果您的结果有可能为空，您将需要在调用该方法之前检查行。

```
Dim boundTable As DataTable
If query.Any() Then
    boundTable = query.CopyToDataTable()
Else
    'just use empty clone of original table, if applicable
    boundTable = table.Clone() 
End If 
```

# git - 哪个版本控制最适合单个编码器

> ID：15915303
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:13:01.850
> 
> 标签：git, svn, version-control, mercurial

SVN、Git 还是 Mecurial？对于只想备份代码并跟踪更改的单个程序员来说，这是最好的选择。我也不想在任何地方托管它。即使我离线并且无法访问互联网，我也希望能够在本地使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:19:57.660

我刚刚为一个班级项目启动了 git，发现爬上学习曲线是完全值得的。如果您已经对 CLI 感到满意，那么曲线就更少了（我开始时不是，现在是）。我强烈建议您通读本书/手册。这是非常有启发性的，值得你花时间投资它。[Git Book](http://git-scm.com/book)您可以将 git 与远程服务器或本地存储库一起使用。此外，它似乎出现在很多工作列表中，所以还有另一个理由来投入时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:18:56.827

根据您描述的所有要求，到目前为止，Git 是您最好的选择。

*   本地回购
*   轻松分支/合并
*   能够推送到远程服务器
*   拥有大量信息的大型用户社区
*   集成到工具中

这些只是 Git 的一些好处。哦，是的，别忘了 Github。

# ios - 无法为 iOS 构建 OpenCV 框架

> ID：15915305
> 
> 赞同：5
> 
> 时间：2013-04-10T01:13:34.633
> 
> 标签：ios, opencv

我在构建框架时遇到了麻烦。

我从这里克隆了 OpenCV 的副本：[https ://github.com/Itseez/opencv](https://github.com/Itseez/opencv)

然后检查我有最新的cmake 2.8.10.2

然后在 iOS 文件夹中运行 build_framework.py。

例如

```
./opencv/ios/build_framework.py opencv-ios-build 
```

输出是：

```
-- Setting up iPhoneOS toolchain
-- iPhoneOS toolchain loaded
-- Setting up iPhoneOS toolchain
-- iPhoneOS toolchain loaded
-- The CXX compiler identification is Clang 4.2.0
-- The C compiler identification is Clang 4.2.0
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - failed
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - failed
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Failed
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Failed
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Failed
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Failed
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Failed
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Failed
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Failed
...

-- Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE) (Required is at least version "2.0")
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Failed
-- Performing Test HAVE_CXX_WNO_SIGN_PROMO
-- Performing Test HAVE_CXX_WNO_SIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Failed
-- Performing Test HAVE_CXX_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WNO_MISSING_PROTOTYPES - Failed
-- Performing Test HAVE_OBJCXX_FOBJC_EXCEPTIONS
-- Performing Test HAVE_OBJCXX_FOBJC_EXCEPTIONS - Failed
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Failed
-- 
-- General configuration for OpenCV 2.4.9 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Darwin 12.3.0 i386
--     Target:                      iOS
--     CMake:                       2.8.10.2
--     CMake generator:             Xcode
--     CMake build tool:            /Applications/CMake 2.8-10.app/Contents/bin/cmakexbuild
--     Xcode:                       4.6.1
-- 
--   C/C++:
--     Built as dynamic libs?:      NO
--     C++ Compiler:                /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++  (ver 4.2.0)
--     C++ flags (Release):         -stdlib=libc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden -fPIC   -DNDEBUG -O3 -fomit-frame-pointer -ffast-math  -DNDEBUG
--     C++ flags (Debug):           -stdlib=libc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden -fPIC   -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
--     C flags (Release):           -fPIC   -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fPIC   -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib legacy nonfree photo softcascade stitching videostab world
--     Disabled:                    -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera gpu java ocl python superres ts
-- 
--   GUI: 
--     Cocoa:                       YES
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.7)
--     JPEG:                        build (ver 90)
--     WEBP:                        NO
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        NO
--     JPEG 2000:                   NO
--     OpenEXR:                     NO
-- 
--   Video I/O:
--     AVFoundation:                YES
--     QuickTime:                   NO
--     QTKit:                       YES
--     V4L/V4L2:                    NO/NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      YES
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  NO
-- 
--   Python:
--     Interpreter:                 NO
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
-- 
--   Tests and samples:
--     Tests:                       NO
--     Performance tests:           NO
--     C/C++ Examples:              NO
-- 
--   Install path:                  /Users/Ants/Dev/iOS/opencv-ios-build/build/iPhoneOS-armv7/install
-- 
--   cvconfig.h is in:              /Users/Ants/Dev/iOS/opencv-ios-build/build/iPhoneOS-armv7
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/Ants/Dev/iOS/opencv-ios-build/build/iPhoneOS-armv7 
```

但它确实构建了 Xcode 项目。

该过程继续运行编译，但这在 opencv 核心中的 rand.cpp 上失败

```
 /Users/Ants/Dev/iOS/opencv/modules/core/src/rand.cpp:758:8: error: unknown type name 'pthread_key_t'; did you mean 'pthread_attr_t'?
static pthread_key_t tlsRNGKey = 0;
       ^~~~~~~~~~~~~
       pthread_attr_t
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/include/sys/signal.h:157:34: note: 'pthread_attr_t' declared here
typedef __darwin_pthread_attr_t         pthread_attr_t;
                                        ^
/Users/Ants/Dev/iOS/opencv/modules/core/src/rand.cpp:758:22: error: no viable conversion from 'int' to 'pthread_attr_t' (aka '_opaque_pthread_attr_t')
static pthread_key_t tlsRNGKey = 0;
                     ^           ~
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/include/sys/_types.h:64:8: note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'int' to 'const _opaque_pthread_attr_t &' for 1st argument
struct _opaque_pthread_attr_t { long __sig; char __opaque[__PTHREAD_ATTR_SIZE__]; };
       ^
/Users/Ants/Dev/iOS/opencv/modules/core/src/rand.cpp:759:8: error: unknown type name 'pthread_once_t'; did you mean 'pthread_attr_t'?
static pthread_once_t tlsRNGKeyOnce = PTHREAD_ONCE_INIT;
       ^~~~~~~~~~~~~~
       pthread_attr_t
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/include/sys/signal.h:157:34: note: 'pthread_attr_t' declared here
typedef __darwin_pthread_attr_t         pthread_attr_t;
                                        ^
/Users/Ants/Dev/iOS/opencv/modules/core/src/rand.cpp:759:39: error: use of undeclared identifier 'PTHREAD_ONCE_INIT'
static pthread_once_t tlsRNGKeyOnce = PTHREAD_ONCE_INIT;
                                      ^
/Users/Ants/Dev/iOS/opencv/modules/core/src/rand.cpp:774:5: error: use of undeclared identifier 'pthread_once'
    pthread_once(&tlsRNGKeyOnce, makeRNGKey);
    ^
5 errors generated. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:40:04.780

线索在这一行：

`-- Could NOT find PythonInterp (missing: PYTHON_EXECUTABLE) (Required is at least version "2.0")`

我通过编辑`build_framework.py`文件来解决这个问题，将 python 的路径添加到该`cmakeargs`部分（大约第 39 行）：

```
cmakeargs = ("-GXcode " +
             "-DPYTHON_EXECUTABLE=/usr/bin/python " +
             "-DCMAKE_BUILD_TYPE=Release " +
             "-DCMAKE_TOOLCHAIN_FILE=%s/ios/cmake/Toolchains/Toolchain-%s_Xcode.cmake" +
             "-DBUILD_opencv_world=ON " +
             "-DCMAKE_INSTALL_PREFIX=install") % (srcroot, target) 
```

或者（它比从头开始编译要快得多）使用[cocoapods](http://cocoapods.org)来安装依赖项。

# perl - 未建立连接。Mail::Sender 中的错误

> ID：15915307
> 
> 赞同：0
> 
> 时间：2013-04-10T01:14:00.540
> 
> 标签：perl, email

我正在使用 Mail::Sender ，我收到错误消息

> 未建立连接。

我正在使用 OpenMultipart 来填充哈希。

这个错误什么时候会出现？如何解决这个问题？

如果我发送 10 封邮件，只有 2 封邮件成功发送，其余邮件收到此错误。

```
$Msg = new Mail::Sender (
                {
                smtp => $EMAIL_Globals::SMTP_IP,
                from => $FromAddress,
                debug_level => 4,
                }
                );

eval {
        $Msg->OpenMultipart({
                        from => ${$Email_details}[10],
                        to =>  ${$Email_details}[9],
                        subject => $Subject,
                        debug => '/tmp/zkMailFlow.log',
                        multipart => 'related',
                        })
        ->Part({ctype => 'multipart/alternative'})
                ->Part({ctype => 'text/html', disposition => 'NONE', msg => " 
                                <!DOCTYPE html PUBLIC -//W3C//DTD HTML 4.01 Transitional//EN>
                                <html> xxxxx
                                </html>" })
                ->EndPart("multipart/alternative");
        for ( ;$i<= $Length; $i+=4) {
                $Count=$i;
                $Flag = 1;
                $Msg->Attach({
                                description => 'xxxxx',
                                ctype => 'image/jpeg',
                                encoding => 'base64',
                                disposition => "attachment; filename=$Page_id[$i];",
                                file => '/path/files/i',
                                });
        }
        $Msg->Close();
} or print "Error sending mail: $Mail::Sender::Error\n";

if ($Mail::Sender::Error)
{
        if ($Msg->{"error"} eq -3)
        {
                return('FAILURE',$Mail::Sender::Error);
        }
        else
        {
                return('Error',$Mail::Sender::Error);
        }
}

if ( ref ($Msg) ne 'Mail::Sender' ){
        return ('Error',$Mail::Sender::Error);
}
else{
        return('SUCCESS',"Mail Sent Successfully");
} 
```

调试日志文件内容

```
>> 220 nsmtpin.xxxxb.co.in ESMTP Service (Lotus Domino Release 8.5.2) ready at Wed, 10 Apr 2013 00:42:28 +0530
<< EHLO localhost
>> 250-nsmtpin.xxxxb.co.in Hello localhost ([10.2.252.251]), pleased to meet you
>> 250-HELP
>> 250-SIZE 5324800
>> 250 PIPELINING
<< MAIL FROM:<xxxxx@xxxxB.com>
>> 250 xxxxxx@xxxxB.com... Sender OK
<< RCPT TO:<xxx@xxxxB.com>
>> 250 xxx@xxxxB.com... Recipient OK
<< DATA
>> 354 Enter message, end with "." on a line by itself
<< To: xxxx@xxxxB.com
<< From: xxx.xxx@xxxxB.com
<< Subject: Testing
<< Date: Wed, 10 Apr 2013 00:35:42 +0530
<< X-Mailer: Perl script "Email_Resender"
<<  using Mail::Sender 0.8.16 by Jenda Krynicky, Czechlands
<<  running on localhost (127.0.0.1)
<<  under account "root"
<< Message-ID: <20130409_190542_084621.Mitesh.Shah@xxxxB.com>
<< MIME-Version: 1.0
<< Content-type: multipart/related;
<<  boundary="Message-Boundary-by-Mail-Sender-1365534342"
<< 
<< This message is in MIME format. Since your mail reader does not understand
<< this format, some or all of this message may not be legible.
<< 
<< --Message-Boundary-by-Mail-Sender-1365534342
<< Content-Type: multipart/alternative; boundary="Part-Message-Boundary-by-Mail-Sender-1365534342_2"
<< 
<< 
<< --Part-Message-Boundary-by-Mail-Sender-1365534342_2
<< Content-type: text/html
<< Content-transfer-encoding: 7BIT
<< 
<<  
<< 
<<                          <!DOCTYPE html PUBLIC -//W3C//DTD HTML 4.01 Transitional//EN>
<<                          <html>
<<                          
<<                          </html>
<< --Part-Message-Boundary-by-Mail-Sender-1365534342_2--
<< 
<< --Message-Boundary-by-Mail-Sender-1365534342
<< Content-type: image/jpeg; name="20130408_112508_2792230080_1_4.jpg"
<< Content-description: fax1 jpg
<< Content-transfer-encoding: base64
<< Content-disposition: attachment; filename=08042013/20130408_112508_2792230080_1_4.jpg;
<< 
<< /9j/4AAQSkZJRgABAQEAzABiAAD//gAbPFVOU1BFQ0lGSUVEPgoyNzkyMjMwMDgwCv/bAEMABQME
<< BAQDBQQEBAUFBQYHDAgHBwcHDwsLCQwRDxISEQ8RERMWHBcTFBoVEREYIRgaHR0fHx8TFyIkIh4k
<< HB4fHv/AAAsIA+gDIAEBEQD/xAAdAAEAAgMBAQEBAAAAAAAAAAAABQYDBAcCAQgJ/8QAdhAAAQME
<< fWbj6/DL+rsQgf8Ad/VX4L6Wzr/beo2PTcWQpy9N3Fn0JtP/AGRwrACD9St8T9RNf1yRy4DkAFa7
<< gHeqj8nvVvxzHbhfrq+GINvjrkPrPsQkbOvefYB7yK578HfqZL6lYhMeukL4qv0N7b8UoIKWHh4s
<< jkjkT7dBQH2VhR8HzCUFRRdcxSVq5K1kcobPbufW8+wr1/g/4Z/S+Z/rLK/aqUt3RXBokRLDjF2m
<< qDnPxpd3kuOEfilXMer9VbbXSHAkNpQbQ+spAHJdxklR+snxO5r180eA/wBCufeEn95T5o8B/oVz
<< 7wk/vKfNHgP9CufeEn95T5o8B/oVz7wk/vKfNJgP9CufeEn95Uc50G6QuuKcdwKzOOLJUpa0KUpR
<< PmSSrZP1mvnzBdHfzfWP/ZK/aoOgfR4EEdPrHsHf8ir++p+P0z6exw8GsKx5Pjnbn+5zR3217U9u
<< 3u1Wdvp9giEJQnDcd4pAA/3LYPYf/Fr78gMG/I3Hfutj9inyAwb8jcd+62P2KfIDBvyNx37rY/Yp
<< 8gMG/I3Hfutj9ivbWC4U0dtYjYEE+1NsYH/5Ne/kViHLl8lrHsjW/i5ny/1ayxcTxiLJbkxsdtDD
<< zSgttxuC0lSFDyIITsH6xUzxH1/aacR9f2mvoGvf9tKUpSlKUr//2Q==
<< quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:15:38.663

你说

> 如果我发送 10 封邮件，只有 2 封邮件成功发送，其余邮件收到此错误。

和

> 我的代码工作了 6 个月以上，从昨天开始我就遇到了这个问题

这表明它不是您的代码，而是与网络或邮件服务器有关。您将需要捕获调试输出停止工作的部分，以查看到底发生了什么。

这很可能是邮件服务器上的速率限制设置，在这种情况下，每条消息之间的短暂暂停（或不并行发送大量消息）应该会有所帮助。此外 - 当提交无效消息/地址时，某些邮件服务器可能会开始拒绝/减慢连接。

# bash - 将 bash 中的单列 csv 水平拆分为 BASH 中的多个较小的 csv 文件

> ID：15915308
> 
> 赞同：0
> 
> 时间：2013-04-10T01:14:00.713
> 
> 标签：bash, csv, awk, split

我正在使用 bash，我在 csv 中有一个**列** **（不是行）**，没有标题 - samplefile.csv

```
111 
222 
333 
444 
555 
666 
777 
888 
```

在这种情况下，我希望将其拆分为（比如说）2 个**4 行和一列**的 csv 文件（如果奇数表示 9 行，那么 5 和 4）带有数据的 csv 文件

output1.csv（1 列 4 行）

```
111
222
333
444 
```

和 output2.csv（1 列 4 行）

```
555
666
777
888 
```

Csplit 不会创建 csv 文件，如此处所示 [将文件拆分为 x 个文件，其中文件名被编号](https://stackoverflow.com/questions/12995050/split-a-file-into-x-files-where-file-names-are-numbered#new-answer)

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:23:33.013

这很简单`awk`try `awk '{print $0 > ("output"i+1".csv")}!(NR%4){i++}' file`。

**演示：**

```
$ ls 
file

$ cat file 
111 
222 
333 
444 
555 
666 
777 
888

$ awk '{print $0 > ("output"i+1".csv")}!(NR%4){i++}' file

$ ls
file  output1.csv  output2.csv

$ cat output1.csv 
111 
222 
333 
444 

$ cat output2.csv 
555 
666 
777 
888 
```

**解释：**

模运算符是这里的关键，我们希望在每四行之后拆分输入行：

```
$ awk '{print NR%4,$0}' file
1 111
2 222
3 333
0 444
1 555
2 666
3 777
0 888 
```

每四分之一的四的模数*（余数）* 当然为零，所以我们使用这个事实来增加文件计数器。`!(NR%4)`是`NR%4==0`as zero 的简写，评估为 false 并且`NR%4`当我们希望块`{i++}`执行时为零，因此我们否定它。

```
$ awk '{print NR%4,$0,"output"i+1".csv"}!(NR%4){i++}' file
1 111 output1.csv
2 222 output1.csv
3 333 output1.csv
0 444 output1.csv
1 555 output2.csv
2 666 output2.csv
3 777 output2.csv
0 888 output2.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:01:08.920

你在找什么只是拆分命令，带有`-n`选项

```
split -nl/2 input output 
```

将为您完成工作。

从拆分手册页：

```
-n, --number=CHUNKS
              generate CHUNKS output files.  See below
 CHUNKS may be: N       split into N files based on size of input K/N     output Kth of N to stdout l/N     split into N  files  without  splitting  lines  l/K/N
       output Kth of N to stdout without splitting lines r/N     like 'l' but use round robin distribution r/K/N   likewise but only output Kth of N to stdout 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:43:12.987

这对我有用。我在 excel 中打开了生成的 csv，它的格式正确。我还没有弄清楚如何删除尾随逗号，但根据许多 csv 格式定义，这似乎是可以接受的。第一个 xargs 调用将逗号添加到文件的每一行。第二个 xargs 将四个批处理。如果您将其重定向到文件（> new.csv），它可能就是您要查找的内容。

```
>cat my.csv
111
222
333
444
555
666
777
888 
>cat my.csv | xargs -n 1 -i echo \{\}, | xargs -n 4 
111, 222, 333, 444,
555, 666, 777, 888, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:51:49.127

我可以使用`split`命令。

> n= `awk 'END{print int(NR/2)}' file_name`&& 拆分 -l $n 文件名

```
cat output1
111
222
333
444

cat output2 
555
666
777
888 
```

# asp.net - 支持 c# 和 asp 的 MAC 语法高亮文本编辑器

> ID：15915314
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:14:47.017
> 
> 标签：asp.net, .net, macos, text-editor

我主要在 macbook air 上编程。有时我需要对基于 .net 的网站进行一些快速编辑。然而，这些通常并不太复杂，由于我机器的资源，我想避免对我们使用基于 Windows 的程序的虚拟化。

所以我正在寻找能够让我制作和编辑简单的 C# 和 .asp 页面的东西。我不需要代码完成（尽管我不会抱怨）或任何花哨的东西......只是基本的语法突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:53:29.613

我打算回答 Notepad++，但快速查找显示它没有移植到 Mac OS。因此，在 Mac 上使用谷歌搜索 Notepad++ 揭示[了这篇文章](http://studiogreenleaf.wordpress.com/2012/05/10/notepad-on-mac-osx/)，引用：

> 但是，当我使用 Mac OSX 时，我使用的是 TextEdit，它是 OSX 附带的捆绑应用程序，类似于 Window 的写字板。我终于意识到我可以使用 WINE 在 MacOSX 中运行 Notepad++ .exe 文件——果然，Notepad++ v6.1.2 安装程序就像一个魅力，我现在在 OSX 上拥有了一个功能齐全的 Notepad++。

免责声明 - 仅为您搜索此内容；不能保证它会起作用。但如果是这样，你会得到一个很好的编辑器，IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T00:32:31.543

我能够找到满足我要求的一个编辑器是notepad++。我能够使用交叉在我的 Mac 上运行它。这不是免费的，但有免费的轻量级解决方案允许在 Mac 上使用 Windows 编辑器。

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:38:21.370

[Sublime Text 2](http://www.sublimetext.com/)非常酷，它具有 c# 和许多其他语言的语法突出显示

# python - 按下键时使图像移动

> ID：15915315
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:15:07.453
> 
> 标签：python, animation, pygame

我正在尝试在按下键时移动图像。它移动但不流畅，按下按钮时它不会继续移动。

```
import pygame, sys
from pygame.locals import *

white=(255,255,255)
black=(0,0,0)

pygame.init()
window=pygame.display.set_mode((640, 360),0,32)
image=pygame.image.load("white.png")
image.set_colorkey(white)

x,y=0,0
movex,movey=0,0

while True:
    window.fill(black)
    for event in pygame.event.get():
        if event.type==QUIT:
            pygame.quit()
            sys.exit()
        if event.type==KEYDOWN:
            if event.key==K_LEFT:
                movex+=-1
            elif event.key==K_RIGHT:
                movex+=1
            elif event.key==K_UP:
                movey+=-1
            elif event.key==K_DOWN:
                movey+=1
    x=movex
    y=movey

    window.blit(image,(x,y))
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T06:23:11.777

您正在寻找该`K_DOWN`事件，因此您的图像只会在按下按钮的那一刻（或当操作系统告诉您时）移动。

一个更好的主意是检查是否在主循环的每次迭代中按下某些键，使用[`pygame.key.get_pressed()`](http://www.pygame.org/docs/ref/key.html#pygame.key.get_pressed)：

```
...
for event in pygame.event.get():
    if event.type==QUIT:
        pygame.quit()
        sys.exit()

pressed = pygame.key.get_pressed()
if pressed[K_LEFT]:
    movex+=-1
if pressed[K_RIGHT]:
    movex+=1
if pressed[K_UP]:
    movey+=-1
if pressed[K_DOWN]:
    movey+=1

x=movex
y=movey
... 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-10T02:33:46.937

我认为您必须启用某种重复功能。根据[这个（你的）例子](http://sivasantosh.wordpress.com/2012/07/18/keyboard-event-handling-pygame/)，

```
pygame.key.set_repeat(50, 50) 
```

应该做的工作。

[引用的](http://sivasantosh.wordpress.com/2012/07/18/keyboard-event-handling-pygame/)解释：

> 和`set_repeat()`它的两个论点是怎么回事？默认情况下，按键重复功能被禁用，即，当您按住某个键时，默认为无。不会产生任何事件。
> 
> set_repeat 的两个参数是延迟和间隔。当您按住一个键时，第一个事件会在延迟毫秒后生成。并且在间隔毫秒之后生成连续事件。
> 
> 如果这仍然令人困惑，那么这个示例可能会对您有所帮助。考虑一下我拿着向上键。这就是事件生成的样子。
> 
> [第 1 次活动]…[第 2 次活动]…[第 3 次活动]…以此类推。
> 
> [1st up event] 是按键被按住的地方。并在延迟毫秒后生成 [2nd up event]。然后每隔毫秒生成剩余的事件，直到释放密钥。

# spring - 春天结合休眠

> ID：15915317
> 
> 赞同：1
> 
> 时间：2013-04-10T01:15:28.087
> 
> 标签：spring, hibernate, spring-orm

我遇到一个问题，当我在没有 Spring 的情况下使用 hibernate 时，我总是在 hibernate.cfg.xml 中编写以下配置：

```
<property name="current_session_context_class">thread</property> 
```

这将seesion绑定到线程。但是当我将hibernate与Spring一起使用时，我不知道如何实现相同的配置，我也在applicationContext.xml中编写了它，但它不起作用。抛出异常：

> org.hibernate.HibernateException: No Hibernate Session bound to thread，并且配置不允许在这里创建非事务性会话

其实我只是想将session绑定到线程，然后我可以使用sessionfactory的getcurrentSession方法，有没有人和我遇到同样的问题，如何解决。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:02:29.067

尝试`@Transactional`在使用休眠会话的方法上添加注释。

看来您的方法需要交易。

* * *

有很多方法可以配置在 Spring 中使用事务。

下面是其中之一。

只是一个片段，因此您应该以自己的方式使用此代码。

```
<tx:annotation-driven/>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
        p:sessionFactory-ref="sessionFactory" /> 
```

有关更多信息，请参阅[SpringMVC 3.2 hibernate 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/orm.html#orm-hibernate)。

# java - TimePicker onTimeSet 未被调用

> ID：15915318
> 
> 赞同：1
> 
> 时间：2013-04-10T01:15:36.707
> 
> 标签：java, android, datepicker, overriding, timepicker

我正在使用时间选择器让用户输入他想要的时间来执行特定任务，我正在使用支持库中提供的 DialogFragment 类来向后兼容旧的 Android 版本。

这是我创建 TimePickerFragment 类的代码，在单独的文件中创建，取自： http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)：

```
package com.calls.only;
import java.util.Calendar;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.widget.TimePicker;

public class TimePickerFragment extends DialogFragment
                            implements TimePickerDialog.OnTimeSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute, false);
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Do something with the time chosen by the user
    }
} 
```

主要活动：

```
package com.calls.only;

import java.util.Calendar;
import java.util.TimeZone;
import android.os.Bundle;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.DialogFragment;
import android.view.Menu;
import android.view.View;
import android.widget.RadioButton;
import android.widget.TextView;

public class MainActivity extends FragmentActivity {

public void InputStartTime(View v) {
    DialogFragment newFragment = new TimePickerFragment();
    newFragment.show(getSupportFragmentManager(), "timePicker");

}

private TimePickerDialog.OnTimeSetListener mTimeSetListener =
        new TimePickerDialog.OnTimeSetListener() {
                    //Overriding onTimeSet causes an error, see below
            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
               Log.i("TimePicker", "Time picker set!");
            }
        };

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

从日志中可以看出，未调用 onTimeset 方法，如果我尝试覆盖此方法，则会收到错误消息：“新 TimePickerDialog.OnTimeSetListener(){} 类型的方法 onTimeSet(TimePicker, int, int) 必须覆盖超类方法”

谁能告诉我问题是什么？我一直在试图弄清楚它让我感到非常沮丧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T04:19:16.243

> 从日志中可以看出，未调用 onTimeset 方法

好吧，那是因为当您创建 时`TimePickerDialog`，您将片段提供为`OnTimeSetListener`：

```
return new TimePickerDialog(getActivity(), this, hour, minute, false);
                                             ^ 
```

换句话说：您没有看到日志语句，因为`mTimeSetListener`您的活动中的变量永远不会被设置为您在片段中创建的对话框的侦听器。

您可以通过将片段附加到您的 Activity 来轻松解决此问题`MainActivity`，或者，如果您更喜欢可重用的东西，可以通过接口回调它。在这种情况下，您可以重用`OnTimeSetListener`接口，但您也可以设置自己的接口，例如，将`Calendar`对象传递回活动，而不是原始小时/分钟值。

在它的最基本形式中，它看起来有点像这样：

```
public class TimePickerFragment extends DialogFragment {

    @Override public Dialog onCreateDialog(Bundle savedInstanceState) {
        // ... omitted

        if (!(getActivity() instanceof OnTimeSetListener)) throw new IllegalStateException("Activity should implement OnTimeSetListener!");
        OnTimeSetListener timeSetListener =  (OnTimeSetListener) getActivity();

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), timeSetListener, hour, minute, false);
    }
} 
```

然后让你`MainActivity`实现相同的接口，而不是使用匿名内部类：

```
public class MainActivity extends FragmentActivity implements TimePickerDialog.OnTimeSetListener { 

    @Override public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        Log.i("TimePicker", "Time picker set!");
    }
} 
```

* * *

**更新：**如评论中所述，要启用对多个选择器的支持，您有多种选择。一是跟踪托管活动中显示的对话框；如果您只需要区分两个选择器，布尔值就可以了，否则枚举将是实现两个以上状态的合适方法。您需要确保在配置更改期间保留这条信息......

但是，我更喜欢做的是能够`onTimeSet(...)`通过向每个选择器提供一个 id 来识别返回结果的来源。然后将该 id 包含在结果中，以便我们知道它来自哪里。我将在下面概述总体思路：

```
public class TimePickerFragment extends DialogFragment implements OnTimeSetListener {

    private int mId;
    private TimePickerDialogListener mListener;

    private static TimePickerFragment newInstance(int id) {
        Bundle args = new Bundle();
        args.putInt("picker_id", id);
        TimePickerFragment fragment = new TimePickerFragment();
        fragment.setArguments(args);
        return fragment;
    }

    @Override public Dialog onCreateDialog(Bundle savedInstanceState) {
        // ... omitted

        mId = getArguments().getInt("picker_id");
        mListener = getActivity() instanceof TimePickerDialogListener ? (TimePickerDialogListener) getActivity() : null;

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute, false);
    }

    @Override public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        if (mListener != null) mListener.onTimeSet(mId, view, hourOfDay, minute);
    }

    public static interface TimePickerDialogListener {
        public void onTimeSet(int id, TimePicker view, int hourOfDay, int minute);
    }

} 
```

我们在上面所做的更改是将对话框本身注册为`OnTimeSetListener`，然后它将通过 传递数据`TimePickerDialogListener`，前提是托管活动实现了该接口。所以这就是我们下一步需要做的。另外，请注意，我添加了一个静态便捷方法来创建一个`TimePickerFragment`带有 id 的新方法。该值将设置为片段的参数，确保它成为片段状态的一部分，因此您不必担心自己的配置更改 - 框架会为您完成。

所以让我们改变`MainActivity`实现我们的自定义接口，并让它使用`newInstance`方法：

```
public class MainActivity extends FragmentActivity implements TimePickerFragment.TimePickerDialogListener { 

    private static final int START_TIME_PICKER_ID = 1;
    private static final int END_TIME_PICKER_ID = 2;

    public void InputStartTime(View v) {
        // supply the appropriate id - I'm assuming you'll be adding an InputEndTime method somewhere that will then supply END_TIME_PICKER_ID 
        DialogFragment newFragment = TimePickerFragment.newInstance(START_TIME_PICKER_ID);
        newFragment.show(getSupportFragmentManager(), "timePicker");
    }

    @Override public void onTimeSet(int id, TimePicker view, int hourOfDay, int minute) {
        Log.i("TimePicker", "Time picker set from id " + id + "!");

        // here you can compare the id value to figure out what picker this data came from
    }
} 
```

最后一点：我是直接在浏览器中输入的，所以请注意任何明显的拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:24:03.630

我让代码使用它。

```
public class TimePickerFragment extends DialogFragment{
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), (MainActivity)getActivity(), hour, minute, false);
    }
}

public class MainActivity extends FragmentActivity  implements TimePickerDialog.OnTimeSetListener{

    public void InputStartTime(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getSupportFragmentManager(), "timePicker");

    }

    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // TODO Auto-generated method stub
        Log.i("TimePicker", "Time picker set!");
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

# jquery - Chrome 27 window.opener 跨域消息

> ID：15915319
> 
> 赞同：2
> 
> 时间：2013-04-10T01:15:44.417
> 
> 标签：jquery, google-chrome, window.opener

这是在 Chrome 27 上，在此处查看了许多其他答案之后。在父 html 页面中，当用户单击按钮时，将执行此函数：

```
var newWindow = window.open("hello.html"); 
```

现在，hello.html 页面具有以下代码（以及基本的 html 结构）：

```
<script>
    $(document).ready(function() {
        console.log($("#search-button", window.opener));
    });
</script> 
```

关键是能够将一些数据从 hello.html “发送”到父页面。这是 Chrome 的消息：

> 阻止源为“null”的帧访问源为“null”的帧。协议、域和端口必须匹配。

有没有办法做到这一点？

谢谢

# php - 在 Yii 框架中自定义 runtimePath

> ID：15915327
> 
> 赞同：0
> 
> 时间：2013-04-10T01:16:32.800
> 
> 标签：php, yii

我正在将 Yii 框架用于 Web 应用程序。我将运行时文件夹移出受保护的文件夹，并将其放在与 index.php 文件相同的级别。现在在主配置文件 main.php 中我添加了：

`'runtimePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR.'runtime',`

它位于正确设置的 basePath 下方：

```
'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..', 
```

我确保运行时文件夹是可写的。我将 Godaddy 与 Windows IIS7 服务器一起使用。这是我得到的错误：*应用程序运行时路径“D:\Hosting\9434915\html\yii\picbridge\protected\config..\runtime”无效。请确保它是 Web 服务器进程可写的目录。*

我知道它指向错误的文件夹，但我如何让它指向正确的文件夹？我对 runtimePath 使用与 basePath 相同的文件路径约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:27:04.427

你在`..`.
注意错误消息中的路径，它是文件夹`config..`，然后是斜杠：
D:\Hosting\9434915\html\yii\picbridge\protected\config `..`\runtime
应该是：
D:\Hosting\9434915\html\yii\picbridge\protected\ config `\..`\runtime
这里奇怪的是你有`DIRECTORY_SEPARATOR`after `dirname(__FILE__)`，它*应该*产生正确的路径。

**提示：** [不需要](http://us2.php.net/manual/en/ref.filesystem.php#73954) `DIRECTORY_SEPARATOR`，只要 use`/`就可以在任何窗口上正常工作，这仅对从文件系统解析路径有用。

**提示 2：**感谢*Eirik Hoem*的评论，您应该严格将受保护的文件与公共文件分开。我个人使用以下布局：

```
/app/protected/
/app/www/
/framework/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:38:05.600

你不应该把它放在 index.php 级别，把它放在受保护的文件夹中。

在受保护的文件夹中，使用`.htaccess`with`deny from all`以防止直接访问您`mvc style php code`的非传统`html output php code`.

检查[应用程序基本目录](http://www.yiiframework.com/doc/guide/1.1/en/basics.application#application-base-directory)以获取详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:57:01.730

我找到了解决问题的方法，我从 Windows 托管计划切换到了 Linux。切换后，我立即使用 FileZilla 设置文件夹权限，错误消失了。我认为问题与用户在 Godaddy Windows 共享主机计划中设置文件夹权限的能力有限有关。用户只能使用 Godaddy 的 FTP 文件管理器来设置权限，他们不能像在 Linux 共享主机计划中那样使用 FileZilla 来设置权限。

# paypal - Paypal 自适应支付重定向 URL GET 变量

> ID：15915330
> 
> 赞同：0
> 
> 时间：2013-04-10T01:16:50.803
> 
> 标签：paypal, paypal-ipn, paypal-adaptive-payments

到目前为止，我一直在使用 Paypal Payments Standard，制作 Paypal 按钮，让我的客户可以在 Paypal 上付款，然后将他们重定向到我的网站。当他们返回我的站点时，我使用 PDT 显示收据，并使用 IPN 在我的数据库中实际记录交易（因为他们通常不等待自动返回——我使用 PDT 只是向那些这样做的人显示收据）。

我想放弃支付标准并使用自适应支付。我进行了一些基本调用，一切似乎都正常（付款正在沙箱中正确处理），但是当它重定向到我的站点时，它没有像以前使用 PDT 那样传递返回 url 和事务 ID。一旦它重定向到我的网站，我应该如何获取付款信息​​？我知道 PaymentDetails API，但如何获取交易 ID 或支付密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:57:32.507

我不确定这是否有帮助。对于每个付款请求，我都会将其跟踪 ID 和付款密钥保存到数据库中。这个跟踪 id 包含在我的返回 url 正文中，我在[PaymentDetails API](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPaymentDetails)中使用它来检索付款信息。

顺便说一句，这个跟踪 ID 是在我的代码中生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:46:18.440

看看[https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)

并使用 IPNListener（自适应支付 PHP 版本的 samples/IPN/IPNListener.php）

# ocaml - Ocaml 插入排序

> ID：15915331
> 
> 赞同：2
> 
> 时间：2013-04-10T01:16:54.233
> 
> 标签：ocaml

输入：未排序列表/输出：排序列表

我的基本想法是在排序列表中插入一个整数。

（如果我可以将第一个元素插入排序的尾部，我可以对列表进行排序。）

我使用了“插入”，它是辅助函数。

但是，它会溢出。谁能告诉我问题是什么？

```
let rec sort (l: int list) : int list =
    match l with
        []->[]
      | x::[]->[x]
      | x1::x2::xs->let rec insert (n,dest) =
                            match dest with
                                []->[n]
                              | y::[]-> if n<y then [n;y] else [y;n]
                              | y1::y2::ys-> if y1<y2 then n::dest else y2::insert(y1,xs)
                    in insert(x1,sort(x2::xs)) ;; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T10:32:58.243

同样，我有风格建议：

*   您应该将这两个函数分开`sort`，`insert`因为它会使其更具可读性，并且因为该`insert`函数本身就很有用。
*   为什么要给`insert`函数一个元组作为参数？在 OCaml 中，人们会使用 currying 和 write`insert x l`而不是`insert(x,l)`. 这将允许您进行部分应用。
*   为什么将函数的类型限制为`int list -> int list`. OCaml 中的函数可以是多态的，因此您的函数应该具有更通用的类型`'a ist -> 'a list`。

这是您通过所有这些更正获得的代码：

```
let rec insert x l =
  match l with
    | [] -> [x]
    | y::ys -> if x < y then x::y::ys else y::insert x ys

let rec sort l =
  match l with
    | [] -> []
    | x::xs -> insert x (sort xs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T01:30:46.180

这条线对我来说看起来很错误：

```
| y1::y2::ys-> if y1<y2 then n::dest else y2::insert(y1,xs) 
```

在我看来，你知道你`ys`的排序（通过归纳假设）。因此，您应该`n`与您的 比较`ys`，而不是`ys`彼此比较。如果你把这条线理顺，事情可能会有所改善。

对于它的价值，我怀疑你只需要在你的`match`. 我不明白为什么需要将 1 元素列表与任何其他非空列表区别对待。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-19T17:44:06.590

总是在问这样的问题时，人们很难阅读这样的代码，而且大多数情况下他们会忽略该帖子。就像@Thomash 说的那样，首先尝试分成更小的函数，这样更容易看出它失败的地方。

你可以“用你的眼睛调试”这个：

```
let rec insertion_sort el = function  
    | [] -> [el]
    | h::t as ls -> if el > h then h :: insert el t else (el :: ls) 

let sorted_list ls = List.fold_right insertion_sort ls [] 
```

# javascript - 生成的标签不加载 css

> ID：15915333
> 
> 赞同：0
> 
> 时间：2013-04-10T01:16:59.600
> 
> 标签：javascript, css, jquery-mobile

我正在将用户条目附加到列表中。

喜欢：

```
var enterul = document.getElementById('entrylist');
    var entryli = document.createElement("LI");

var entryvalue = document.createTextNode(item.entry);
        entryli.appendChild(entryvalue);
        enterul.appendChild(entryli); 
```

它确实填充了我的 ul，但没有使用 JQM css，只是一个常规的 HTML 列表。

如果我进入 html 并添加一个列表项，例如：`<ul><li>Item</li></ul>`
它显示为 jqm 列表。

`enterul.innerHTML += ...`也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:26:09.687

对于 jQuery Mobile 中的所有内容，如果在呈现后更新标记，则必须告诉 jQuery Mobile 重新呈现控件。使用列表视图，您可以通过方法调用完成此操作：

```
$('#entryList').listview("refresh"); 
```

此方法的文档在[http://jquerymobile.com/demos/1.2.1/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.2.1/docs/lists/lists-methods.html)

# sql - 如何创建带有附加列的表视图，并且其条目与源表不同？

> ID：15915336
> 
> 赞同：0
> 
> 时间：2013-04-10T01:17:09.850
> 
> 标签：sql, sql-server, sql-server-2008, tsql

非常需要专家的帮助，正如在堆栈中向我建议的那样，改为在桌子上创建一个视图。我在这里找到了相同的查询，但其中一些仍未得到答复，有些尚不清楚。我只是想为这个表创建一个表视图，我想在其中分隔 ClockIn 和 Clock Out 条目。我还想在我的视图中添加不同的列，例如 time 和 time_event，其中条目与源表 (ST_EmployeePunches) 不同。time 的示例记录仅是时间，time_event 是 I 和 O。请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:33:51.590

只是为了用更清晰的格式来澄清，你目前拥有的是

```
EmployeeNumber  BusinessDate  ClockIn              ClockOut
60616257        2012-10-01    2012-10-01 07:20:00  2012-10-01 10:49:00 
```

你想要的是：

```
EmployeeNumber  BusinessDate  Time                 Time_Event
60616257        2012-10-01    2012-10-01 07:20:00  I 
60616257        2012-10-01    2012-10-01 10:49:00  O 
```

您可以使用查询来生成它，例如

```
select EmployeeNumber, BusinessDate, ClockIn Time, 'I' Time_Event
from ST_EmployeePunches
union all
select EmployeeNumber, BusinessDate, ClockOut, 'O'
from ST_EmployeePunches 
```

# android - 使用半透明 png 作为纹理并淡化它们 OpenGL ES 2.0

> ID：15915337
> 
> 赞同：3
> 
> 时间：2013-04-10T01:17:32.430
> 
> 标签：android, opengl-es-2.0, textures, alphablending, translucency

我有一些 .png 文件用作我的 2d 游戏四边形精灵的纹理。

其中一些已经有部分透明的像素，我需要能够正确显示它们并将它们淡入/淡出。

最初，我使用以下混合模式绘制它们：

```
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

这适用于刚开始的实心纹理，我可以使用 1.0f 和 0.0f 之间的任何值来引入透明度。到目前为止一切都很好，但是当我尝试使用其中已经具有透明度的 png 时，它们将无法正确显示（它们太暗并且轮廓很暗）。

我做了很多研究，发现我需要为这些类型的纹理更改我的混合模式，因为上面的那个不能正常工作，所以这就是我现在所拥有的（包括我的着色器）...... ..

**片段着色器**

```
String strFShader =
"precision mediump float;" +
"varying vec2 v_texCoords;" +
"uniform sampler2D u_baseMap;" +
"void main()" +
"{" +
"gl_FragColor = texture2D(u_baseMap, v_texCoords);" +
"gl_FragColor.a *= "+1.0f+";"+  //** Where 1.0f is the amount to blend, with 0.0f being completely transparent and 1.0f being as per the original png file.
 "}"; 
```

**代码**

```
GLES20.glEnable(GLES20.GL_BLEND); 
GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA);

GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

GLES20.glDisable(GLES20.GL_BLEND); 
```

如果我在着色器（如上）中使用这个值为 1.0f 绘制半透明纹理，它会画得很好。但是，如果我尝试将其淡出，有些颜色似乎会淡出，而有些则不会，所以当它处于 0.0f 时，我只剩下原始纹理的奇怪颜色版本。

如果有人能告诉我如何正确渲染这些类型的纹理，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:03:26.033

如果它们太暗并且轮廓很暗，这似乎是由于颜色通道被 Alpha 通道预乘造成的。在这种情况下，在纹理非常透明的部分，颜色是暗淡的。假设，如果像素的 alpha 为 0.9，那么预乘的*RGB*颜色将比实际暗 90%。

为了在没有 RGB 通道被 alpha 预乘的情况下加载 PNG 图像，我们使用 3rd 方`PNGDecoder`，然后使用`glTexImage2D()`. 您可以`PNGDecoder`从这里获取库来解码 PNG：http: [//twl.l33tlabs.org/#downloads](http://twl.l33tlabs.org/#downloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:53:56.137

最后我不需要将图像转换为非预乘图像，我只是将它们保持在该格式并将我的着色器中的行更改为：

```
"gl_FragColor *= "+op+";"+ 
```

并且用过......

```
GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

完美运行。

# d3.js - 在 d3.js 中更新数据连接的子元素

> ID：15915343
> 
> 赞同：4
> 
> 时间：2013-04-10T01:18:51.280
> 
> 标签：d3.js, updates

我无法掌握 d3 中的基本操作：为不断变化的数据集更新子元素。子元素需要在第一次传递时“附加”，并为后续传递进行修改。对于可以使用“enter”操作控制的父元素，但我看不到如何将它用于子元素。我正在使用气泡布局，但我认为这不是问题。

```
var node = vis.selectAll("g.node").data(
bubble.nodes(classes(json)).filter(function (d) {
    return !d.children;
}), function (d) {
    return d.className;
});

node.select("circle").attr("r", function (d) {
    return d.r;
});

node.enter().append("g").attr("class", "node")
    .attr("transform", function (d) {
    return "translate(" + d.x + "," + d.y + ")";
});

node.append("circle").attr("r", function (d) {
    return d.r;
}); 
```

这是一个运行代码的 jsfiddle [http://jsfiddle.net/johnpoole/xsafy/131/](http://jsfiddle.net/johnpoole/xsafy/131/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:51:02.047

答案最终来到了我的面前。只需在 enter() 的结果上执行原始“附加”

```
var node = vis.selectAll("g.node").data(
    bubble.nodes(classes(json)).filter(function(d) {
        return !d.children;
    }), function(d) {
        return d.className;
    });

node.select("circle").attr("r", function(d) {
        return d.r;
    }).style("fill", function(d) {
        return fill(d.r);
    });

node.enter().append("g").attr("class", "node")
.attr("transform", function(d) { 
        return "translate(" + d.x + ","+ d.y +     ")";
}).append("circle").attr("r", function(d) {
        return d.r;
}).style("fill", function(d) {
        return fill(d.className);
}); 
```

# javascript - JavaScript 用箭头键移动图像

> ID：15915348
> 
> 赞同：0
> 
> 时间：2013-04-10T01:19:28.967
> 
> 标签：javascript, html, jquery-animate, key, move

我在这里看到很多人问过类似的问题，但似乎没有一个对我有用。我有一个 id 为“字符”的 img。我希望它在左键单击时向左移动，在右键单击时向右移动。这是我的代码：

```
var bound = window.innerWidth;
function left(id) {
    document.getElementById(id).style.left.match(/^([0-9]+)/);
    var current = RegExp.$1; 
    if(current <=bound){
        document.getElementById(id).style.left = current - 0 + 'px';
    }
    else{
        document.getElementById(id).style.left = current - 5 + 'px';
    }
}

function right(id) {
    document.getElementById(id).style.left.match(/^([0-9]+)/);
    var current = RegExp.$1;
    if(current >= (bound - 5){
        document.getElementById(id).style.left = current + 0 + 'px';
    }
    else{
        document.getElementById(id).style.left = current + 1 + 'px';
    }
}

document.onkeyup = KeyCheck;       
function KeyCheck() {

    var KeyID = event.keyCode;
    switch(KeyID)
    {
    case 39:
    right('character');
    break;
     case 37:
    left('character');
    break;
    }
} 
```

我不知道是否应该修复此代码，或者是否有更简单的方法。如果您有更简单的方法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:56:16.340

为什么不使用 jQuery？

```
$("body").keydown(function(e) {
  var max = $('body').width();
  var min = 0;
  var move_amt = 10;
  var position = $("#my_image").offset();
  if(e.which == 37) { // left
    var new_left = ((position.left-move_amt < min) ? min : position.left-move_amt);
    $("#my_image").offset({ left: new_left})
  }
  else if(e.which == 39) { // right
    var new_left = ((position.left+move_amt > max) ? max : position.left+move_amt);
    $("#my_image").offset({ left: new_left})
  }
}); 
```

这是[它的实际演示](http://jsfiddle.net/nhYN3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:46:08.673

您的左右功能步骤不同。使用一个变量来避免这种情况。例子

```
 var step = 5;
function left(id) {
    document.getElementById(id).style.left.match(/^([0-9]+)/);
    var current = RegExp.$1; 
    if(current <=bound){
        document.getElementById(id).style.left = current - 0 + 'px';
    }
    else{
        document.getElementById(id).style.left = current - step + 'px';
    }
}

function right(id) {
    document.getElementById(id).style.left.match(/^([0-9]+)/);
    var current = RegExp.$1;
    if(current >= (bound - 5){
        document.getElementById(id).style.left = current + 0 + 'px';
    }
    else{
        document.getElementById(id).style.left = current + step + 'px';
    }
} 
```

# java - 为什么我的程序拒绝访问创建文件？

> ID：15915349
> 
> 赞同：5
> 
> 时间：2013-04-10T01:19:37.417
> 
> 标签：java, exception, java-io

在我正在阅读的关于 Java 的书中，它通过使用写入文件并将其存储起来的程序演示了序列化。我收到一个奇怪的错误，我不知道如何阅读，它拒绝我访问创建 .txt 文件。这是错误：

```
Exception in thread "main" java.io.FileNotFoundException: C:\testFile.txt (Access is denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at serializableTests.MyProgram.main(MyProgram.java:18) 
```

这是该程序的两个类：

用户等级：

```
public class User implements Serializable {

    private static final long serialVersionUID = 4415605180317327265L;

    private String username;
    private String password;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

这是主要课程：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutput;
import java.io.ObjectOutputStream;
import java.io.OutputStream;

public class MyProgram {
    public static void main(String[] args) throws IOException {
        User user = new User();
        user.setUsername("tpage");
        user.setPassword("password123");

        File file = new File("C:\\testFile.txt");
        OutputStream fileOutputStream = new FileOutputStream(file);
        ObjectOutputStream outputStream = new ObjectOutputStream(fileOutputStream);
        outputStream.writeObject(user);
        System.out.println("I've store the user object in a file called " + file.getName());
    }
} 
```

> 输出

```
2019-04-22 08:40:28,895 [main] INFO  g.t.service.impl.CsvServiceImpl - Directory structure created data/test/tnx-log/tnc.log false 
2019-04-22 08:40:28,895 [main] INFO  g.t.service.impl.CsvServiceImpl - file.getAbsoluteFile() : C:\Users\jigar\apps\workspace\trade-publisher\data\test\tnx-log\tnc.log canWrite() : false
2019-04-22 08:40:28,895 [main] INFO  g.t.service.impl.CsvServiceImpl - txn log file created data/test/tnx-log/tnc.log true 

2019-04-22 08:40:28,957 [main] INFO  g.t.service.impl.CsvServiceImpl - Directory structure created data/test/tnx-log/tnc.log false 
2019-04-22 08:40:28,957 [main] INFO  g.t.service.impl.CsvServiceImpl - file.getAbsoluteFile() : C:\Users\jigar\apps\workspace\trade-publisher\data\test\tnx-log\tnc.log canWrite() : false

@Override
    public void createTxnInfoFile() throws IOException {
        File file = new File(txnLogFile);
        if (!file.exists()) {
            boolean directoryStructureCreated = file.getParentFile().mkdirs();
            logger.info("Directory structure created {} {} ", txnLogFile, directoryStructureCreated);
            logger.info("file.getAbsoluteFile() : " + file.getAbsoluteFile() + " canWrite() : " + file.canWrite());
            boolean fileCreated = file.createNewFile();
            logger.info("txn log file created {} {} ", txnLogFile, fileCreated);
        }
        file = null;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T01:24:59.340

在最新版本的 Windows 上，如果没有提升的权限，您将无法写入系统驱动器的根文件夹。

要使其正常工作，请将位置更改为另一个驱动器或更改为 C 中的子文件夹，例如您的配置文件目录，例如 c:\users\yourname\testfile.txt

（请注意，您使用的是 .txt 结尾，但生成的文件将无法在编辑器中读取。序列化是二进制格式。）

编辑：

在代码更改中实现这一点

```
File file = new File("C:\\testFile.txt"); 
```

类似于

```
File file = new File("C:\\users\\bane\\testFile.txt"); 
```

我使用了您的 SO 名称“bane” - 替换为您 PC 上的任何登录名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T09:36:49.877

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class CopyFiles {
    private File targetFolder;
    private int noOfFiles;
    public void copyDirectory(File sourceLocation, String destLocation)
            throws IOException {
        targetFolder = new File(destLocation);
        if (sourceLocation.isDirectory()) {
            if (!targetFolder.exists()) {
                targetFolder.mkdir();
            }

            String[] children = sourceLocation.list();
            for (int i = 0; i < children.length; i++) {
                copyDirectory(new File(sourceLocation, children[i]),
                        destLocation);

            }
        } else {

            InputStream in = new FileInputStream(sourceLocation);
            OutputStream out = new FileOutputStream(targetFolder + "\\"+ sourceLocation.getName(), true);
            System.out.println("Destination Path ::"+targetFolder + "\\"+ sourceLocation.getName());            
            // Copy the bits from instream to outstream
            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            out.close();
            noOfFiles++;
        }
    }

    public static void main(String[] args) throws IOException {

        File srcFolder = new File("C:\\sourcefolder\\");
        String destFolder = new String("C:\\destination\\");
        CopyFiles cf = new CopyFiles();
        cf.copyDirectory(srcFolder, destFolder);
        System.out.println("No Of Files got Retrieved from Source ::"+cf.noOfFiles);
        System.out.println("Successfully Retrieved");
    }
} 
```

# node.js - Node.js http 获取请求错误事件未获取 404 或 403

> ID：15915352
> 
> 赞同：3
> 
> 时间：2013-04-10T01:20:07.553
> 
> 标签：node.js

我正在为图像发出 HTTP GET 请求。有时图像会以 404 或 403 的形式返回。我很惊讶我必须明确地检查它，而不是在错误事件中选择它。这是它的工作原理还是我在这里遗漏了什么？

```
function processRequest(req, res, next, url) {
    var httpOptions = {
        hostname: host,
        path: url,
        port: port,
        method: 'GET'
    };

    var reqGet = http.request(httpOptions, function (response) {
        var statusCode = response.statusCode;

        // Many images come back as 404/403 so check explicitly
        if (statusCode === 404 || statusCode === 403) {
            // Send default image if error
            var file = 'img/user.png';
            fs.stat(file, function (err, stat) {
                var img = fs.readFileSync(file);
                res.contentType = 'image/png';
                res.contentLength = stat.size;
                res.end(img, 'binary');
            });

        } else {
            var idx = 0;
            var len = parseInt(response.header("Content-Length"));
            var body = new Buffer(len);

            response.setEncoding('binary');

            response.on('data', function (chunk) {
                body.write(chunk, idx, "binary");
                idx += chunk.length;
            });

            response.on('end', function () {
                res.contentType = 'image/jpg';
                res.send(body);
            });

        }
    });

    reqGet.on('error', function (e) {
        // Send default image if error
        var file = 'img/user.png';
        fs.stat(file, function (err, stat) {
            var img = fs.readFileSync(file);
            res.contentType = 'image/png';
            res.contentLength = stat.size;
            res.end(img, 'binary');
        });
    });

    reqGet.end();

    return next();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T01:33:53.627

> 它是这样工作的吗？

是的。`http.get()`并且`http.request()`不要广泛地*判断*响应的内容。他们主要验证是否收到了响应，并且响应的格式是有效的以进行解析。

由您的应用程序执行除此之外的任何验证，包括测试状态代码。

# maven - 如何使用 Eclipse 运行 hornetq 分层项目的示例？

> ID：15915354
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:20:28.677
> 
> 标签：maven, hornetq

我坚持运行集群队列。

该项目为分层项目，深度为3。

如何在 Eclipse 中运行此示例？

```
(root) --> https://github.com/verystrongjoe/hornetq
|  
└ pom.xml
      │
      └  exmaple folder
         │
         ├ pom.xml
         │
         └ jms folder
            │
            └ pom.xml
            │
            └ clustered-queue
               │
               └ pom.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:12:19.670

关于主要官方 HornetQ 项目*主*分支[https://github.com/hornetq/hornetq](https://github.com/hornetq/hornetq)

1.  **[按照README.mq](https://github.com/hornetq/hornetq/blob/master/README.md)末尾的说明将项目导入 Eclipse**。说真的，那里有详细的分步说明。虽然老实说，其中大多数是为那些想为项目贡献代码的人准备的。

2.  *通过在 Eclipse 中将它们作为Maven*目标运行来运行您想要的任何示例（许多示例将需要参数和/或前置步骤，所有这些都在每个示例的 pom.xml 中指定）：

    *   选择`pom.xml`您想要的示例（在导入期间创建的示例的 maven 子项目中）；
    *   `Run As`--> `Maven Build`（第一个），然后设置`Goal`为`verify`.

**请注意，如果**从*SNAPSHOT*版本运行示例，您可能需要安装一些子 POM 依赖项（*如 README.mq 中所述*）。

# c# - 了解 dotPeek 反编译代码中编译器生成的类型

> ID：15915359
> 
> 赞同：17
> 
> 时间：2013-04-10T01:20:49.467
> 
> 标签：c#, decompiler, dotpeek, compiler-generated

嘿。我正在阅读`Digi Traffic Accelerator`的反编译源（我认为这是最好的学习方式），直到我得到一些无法理解的代码！请看一下：

```
 internal class ProxyFarm
  {
    private static Random rand = new Random();
    private static Regex UserPassAtHostPort = new Regex("\r\n                ^\r\n                (?<user>[^:]+?) : (?<pass>[^@]+?)\r\n                @\r\n                (?<host>[^:]+? (?: : \\d+)? )\r\n                $", RegexOptions.IgnorePatternWhitespace);
    private static Regex HostPortUserPass = new Regex("\r\n                ^\r\n                (?<host>[^:]+? : \\d+) : (?<user>[^:]+?) : (?<pass>.+?)\r\n                $", RegexOptions.IgnorePatternWhitespace);
    public const string NEW = "new";
    public const string ACTIVE = "active";
    public const string BLOCKED_BY_GOOGLE = "blocked by Google";
    public const string INACTIVE = "inactive";
    public const string CHECKING = "Checking...";

    static ProxyFarm()
    {
    }

    public static StorageDataSet.ProxiesRow GetRandomProxy(bool WillUseRecaptcha = true)
    {
      // some normal code
    }

    public static WebProxy MakeWebProxy(StorageDataSet.ProxiesRow row)
    {
      // some normal code
    }

    public static void CheckProxy(StorageDataSet.ProxiesRow proxy)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      ProxyFarm.\u003C\u003Ec__DisplayClass5 cDisplayClass5 = new ProxyFarm.\u003C\u003Ec__DisplayClass5();
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.proxy = proxy;
      // ISSUE: reference to a compiler-generated field
      if (cDisplayClass5.proxy == null)
        return;
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.logger = LogManager.GetLogger("Program");
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.state = new ProxyFarm.CallbackState()
      {
        Proxy = cDisplayClass5.proxy,
        Google = ProxyFarm.CheckStatus.NotChecked,
        Post = ProxyFarm.CheckStatus.NotChecked
      };
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r = (HttpWebRequest) WebRequest.Create("http://www.digitrafficgenerator.com/post_test.php");
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r.Method = "POST";
      try
      {
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        cDisplayClass5.r.Proxy = (IWebProxy) ProxyFarm.MakeWebProxy(cDisplayClass5.proxy);
      }
      catch (Exception ex)
      {
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        cDisplayClass5.logger.Warn((object) ("Invalid proxy entered: " + cDisplayClass5.proxy.Address), ex);
        // ISSUE: reference to a compiler-generated field
        ProxyFarm.ChangeStatus(cDisplayClass5.proxy, "inactive");
        return;
      }
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r.ConnectionGroupName = Guid.NewGuid().ToString();
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.byteArray = Encoding.UTF8.GetBytes("q=test");
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r.ContentLength = (long) cDisplayClass5.byteArray.Length;
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r.ContentType = "application/x-www-form-urlencoded";
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r.Referer = "http://www.digitrafficgenerator.com/post_test.php";
      // ISSUE: reference to a compiler-generated field
      cDisplayClass5.r.Timeout = 20000;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      IAsyncResult res = cDisplayClass5.r.BeginGetRequestStream(new AsyncCallback(cDisplayClass5.\u003CCheckProxy\u003Eb__1), (object) null);
      // ISSUE: reference to a compiler-generated field
      WebObject.AbortRequestAfterTimeout(res, cDisplayClass5.r);
      try
      {
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        // ISSUE: reference to a compiler-generated field
        res = cDisplayClass5.r.BeginGetResponse(new AsyncCallback(cDisplayClass5.\u003CCheckProxy\u003Eb__2), (object) cDisplayClass5.r);
      }
      catch (Exception ex)
      {
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        cDisplayClass5.logger.Info((object) ("Got an exception using " + cDisplayClass5.proxy.Address), ex);
      }
      // ISSUE: reference to a compiler-generated field
      WebObject.AbortRequestAfterTimeout(res, cDisplayClass5.r);
      HttpWebRequest request = (HttpWebRequest) WebRequest.Create("http://www.google.com/recaptcha/api/js/recaptcha.js");
      request.Method = "GET";
      // ISSUE: reference to a compiler-generated field
      request.Proxy = (IWebProxy) ProxyFarm.MakeWebProxy(cDisplayClass5.proxy);
      request.Timeout = 20000;
      request.ConnectionGroupName = Guid.NewGuid().ToString();
      // ISSUE: reference to a compiler-generated method
      WebObject.AbortRequestAfterTimeout(request.BeginGetResponse(new AsyncCallback(cDisplayClass5.\u003CCheckProxy\u003Eb__3), (object) request), request);
    }

    protected static void ProxyChecked(IAsyncResult result, HttpWebRequest req, ProxyFarm.CallbackState state)
    {
      ILog logger = LogManager.GetLogger("Program");
      ProxyFarm.CheckStatus checkStatus = ProxyFarm.CheckStatus.NotOk;
      try
      {
        HttpWebResponse httpWebResponse = (HttpWebResponse) req.EndGetResponse(result);
        if (req.RequestUri == httpWebResponse.ResponseUri)
        {
          if (httpWebResponse.StatusCode == HttpStatusCode.OK)
            checkStatus = ProxyFarm.CheckStatus.Ok;
        }
      }
      catch (Exception ex)
      {
      }
      lock (state)
      {
        if (req.RequestUri.Authority.Contains("google.com"))
          state.Google = checkStatus;
        else
          state.Post = checkStatus;
        if (state.Post == ProxyFarm.CheckStatus.NotOk)
        {
          ProxyFarm.ChangeStatus(state.Proxy, "inactive");
          logger.Info((object) ("Marking " + state.Proxy.Address + " as inactive as it cannot POST"));
        }
        else if (state.Google == ProxyFarm.CheckStatus.NotOk)
        {
          ProxyFarm.ChangeStatus(state.Proxy, "inactive");
          logger.Info((object) ("Marking " + state.Proxy.Address + " as inactive as it is blocked by google"));
        }
        else
        {
          if (state.Google != ProxyFarm.CheckStatus.Ok || state.Post != ProxyFarm.CheckStatus.Ok)
            return;
          ProxyFarm.ChangeStatus(state.Proxy, "active");
        }
      }
    }

    public static void ReportBrokenProxy(StorageDataSet.ProxiesRow proxy, bool recaptcha_fail = false)
    {
      // some normal code
    }

    private static void ChangeStatus(StorageDataSet.ProxiesRow Proxy, string status)
    {
      // some normal code
    }

    public enum CheckStatus
    {
      NotChecked,
      Ok,
      NotOk,
    }

    protected class CallbackState
    {
      public StorageDataSet.ProxiesRow Proxy { get; set; }

      public ProxyFarm.CheckStatus Post { get; set; }

      public ProxyFarm.CheckStatus Google { get; set; }
    }
  } 
```

如您所见，似乎在`CheckProxy`方法中，编译器生成了一个新类型！你知道这种方法到底发生了什么吗？我怎样才能理解代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T01:27:59.593

`\u003C`和分别是和`\u003E`的 unicode 表示。`<``>`

这些字符在 IL.. 中有效。因此编译器将生成具有类似名称的变量以避免冲突。

您的反编译器只是不知道如何将其转换为`<>`并且没有删除临时变量。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-07T12:16:42.253

[在dnSpy](https://github.com/0xd4d/dnSpy)中打开它并四处寻找匹配（ish）的方法。它们的顺序不同，但 dnSpy 在反编译 lambda 方面做得不错。

# eclipse - 检查 BufferedImage repaint() 的方法？

> ID：15915360
> 
> 赞同：0
> 
> 时间：2013-04-10T01:21:20.257
> 
> 标签：eclipse, if-statement, mouseevent, repaint

我在 Eclipse 中工作，我想知道我是否可以做一个 if 语句来检查是否`BufferedImage`已在框架上绘制/绘制。出于某种原因，它没有绘制正确的图像，因为可点击区域在不应该出现的情况下出现在该图片上。

例如，当我单击区域从 4>5 开始时，一切都很好。当我从 5 单击到 4 时，我最终在 6 处出现，因为 4 中的“区域”出现在 5 中（图像应始终在显示可点击区域之前绘制）甚至在它被绘制之前。我想限制它以检查图像是否首先被绘制到框架上。

除了我现在拥有的东西之外，我真的不想使用其他任何东西（所以没有实现新的类来完成这项任务），我真的只是想要一种简单而有效的方法来解决这个问题。这就是我所说的：

```
...
MouseAdapter mouseHandler = new MouseAdapter()
      {
          public void mouseClicked(MouseEvent e)
          {
            repaint();
             if(n==0)
            {
              if(e.getX()>=459 && e.getX()<491 && e.getY()>=111 && e.getY()<133
                 {
                     n = 4;
                 }
                 return;
            }
            if(n==5)
            {
                if(...)
                {
                    n = 4;
                }
                    return();
            }
            if(n==6)
            {
               if(...)
                {
                    n = 5;
                }

               if(...)
                {
                    n = 0;
                }

               if(...)
                {
                    n = 6;
                }
                    return();
        }
  }
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:59:16.540

我认为您可能需要提供更多信息。问题可能在于你如何重新粉刷，而不是它是否被粉刷过。如果您将另一个线程作为主程序运行，您可能希望将鼠标事件同步发送到该线程，以便主线程可以处理鼠标单击然后重新绘制。

另一种解决方案可能是覆盖重绘方法并在那里绘制缓冲图像，但您可能已经这样做了。

另外，有点离题，我注意到您使用 for 循环来确定是否在特定区域单击了鼠标。

您可以缩短代码：

```
for(int i=459; i<491; i++){
    if(e.getX()==i){
        for(int j=111; j<133; j++){
            if(e.getY()==j){
                //action taken
            }
        }
    }
} 
```

至：

```
if(e.getX()>=459 && e.getX()<491 && e.getY()>=111 && e.getY()<133{
    //action taken
} 
```

这将在您的代码中占用更少的空间，并减少检查每个像素的时间。

回到你的问题。我不知道判断是否已绘制缓冲图像的功能。您可能遇到的问题可能不在提供的代码中。发布您的其余代码将是有益的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:09:06.763

好的，我找到了解决方案，我忘了回到这个问题，让你知道。问题是由于某种原因鼠标双击。你几乎可以说它是“递归的”。我决定将 mouseListener 从paintComponent 内部移动到它外部，并且肯定足以修复它。

# javascript - 仅用 jQuery 替换 javascript onmouseover

> ID：15915367
> 
> 赞同：0
> 
> 时间：2013-04-10T01:22:09.750
> 
> 标签：javascript, jquery

我有一个显示动态“订单”数量的页面，我有一个“查看”按钮和另一个“打印”按钮。为了显示特定的 OrderNumber，我使用了一个由 onmouseover 触发的 javascript 函数和一个 jQuery ajax 函数来更改按钮文本、创建数据库条目，然后查看或打印另一个页面。问题是从鼠标悬停多次查看或打印订单。如何只使用 jQuery 并调用特定的 OrderNumber？这是我现在使用的代码：

对每个订单重复此代码：

```
<div class="console_orders_details">
<input type="button" value="View" 
id="vieworder'.$row[orderid].'" onmouseover="vieworder('.$row[orderid].');">
</div> 
```

这是查看订单的功能：

```
function vieworder(id){
            $(function(){
                $('#vieworder' + id).click(function(){
                    var orderid = id;
                    var dataString = 'orderid='+ orderid; //string passed to url
                    $.ajax
                    ({
                        url: "includes/ajax/console-view.php", //url of php script
                        dataType: 'html', //json is return type from php script
                        data: dataString, //dataString is the string passed to the url
                        success: function(result) 
                        {
                            window.open("print.php?view=1&orderid="+id+"");

                            $('#vieworder' + orderid + ':input[type="button"]').attr("value", "Viewed!").fadeIn(400);

                         }
                    });
                })
            });
        } 
```

我假设我需要消除“vieworder”函数并使用纯 jQuery 函数。但是，我不知道如何通过订单“id”发送，这就是我使用 javascript 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:27:32.433

您可以定位 ID 以 开头的所有元素`vieworder`，然后将行 ID 存储为数据属性：

```
<div class="console_orders_details">
    <input type="button" value="View" id="vieworder'.$row[orderid].'" data-id="'.$row[orderid].'">
</div> 
```

JS

```
 $(function(){
    $('[id^="vieworder"]').on('click', function(){
        var orderid = $(this).data('id'),
            btn     = $('input[type="button"]', this);
        $.ajax({
            url: "includes/ajax/console-view.php",
            dataType: 'html',
            data: {orderid : orderid}
        }).done(function(result) {
            window.open("print.php?view=1&orderid="+orderid+"");
            btn.val("Viewed!").fadeIn(400);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:27:39.417

首先，没有必须解析的动态 id，并且 html 中没有事件处理程序：

```
<div class="console_orders_details">
   <input type="button" value="View" class="vieworder" data-id="$row[orderid]">
</div> 
```

接下来，为您想要做的事情创建一个事件处理程序。.one() 将事件处理程序设置为仅触发一次：

```
$(document).ready(function (){
    $(".console_orders_details").one("mouseover", ".vieworder" function(){
        var dataString = "orderid=" + $(this).data("id"); 
        $.ajax({
            url: "includes/ajax/console-view.php", //url of php script
            dataType: 'html', //json is return type from php script
            data: dataString, //dataString is the string passed to the url
            success: function(result) {
                window.open("print.php?view=1&" + dataString);
                $(this).val("Viewed!"); 
             }
        });
    });
}); 
```

如果您希望它在单击时起作用，则只需将鼠标悬停更改为单击即可。此外，fadeIn 不适用于值。这是一个具有基础的小提琴：http: [//jsfiddle.net/iGanja/EnK2M/1/](http://jsfiddle.net/iGanja/EnK2M/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:31:27.317

您的 onmouseover 事件可能会被触发多次，从而导致您的问题。这可能有助于阻止不需要的额外呼叫，除非前一个呼叫已完成，否则忽略它们。

```
var activeRequests = {}; // global

function vieworder(id){
  if (activeRequests[id]) { return; }
  activeRequests[id] = true;
  $(function(){
    $('#vieworder' + id).click(function(){
      var orderid = id;
      var dataString = 'orderid='+ orderid; //string passed to url
      $.ajax
      ({
        url: "includes/ajax/console-view.php", //url of php script
        dataType: 'html', //json is return type from php script
        data: dataString, //dataString is the string passed to the url
        success: function(result) {
          delete activeRequests[id];
          window.open("print.php?view=1&orderid="+id+"");
          $('#vieworder' + orderid + ':input[type="button"]').attr("value", "Viewed!").fadeIn(400);
        }
      });
    })
  });
} 
```

# image - 在黑莓浏览器字段中显示图像

> ID：15915374
> 
> 赞同：0
> 
> 时间：2013-04-10T01:22:48.130
> 
> 标签：image, blackberry, browserfield

我有这个来自网络服务的 html，里面有一个 img 标签，问题是当在 BrowserField 上显示 html 内容时，图像无法解析，所以它们不会显示。

有没有办法让 browserField 在他们的 url 上查找这些图像？

这是我的代码：

```
BrowserFieldConfig bfc = new BrowserFieldConfig();
bfc.setProperty(BrowserFieldConfig.NAVIGATION_MODE, BrowserFieldConfig.NAVIGATION_MODE_CARET);
bfc.setProperty(BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE);

BrowserField bf = new BrowserField(bfc);
bf.displayContent(m.getHtml(),"text/html; charset=UTF-8", "");
add(bf); 
```

# php - while 循环进入数组

> ID：15915375
> 
> 赞同：2
> 
> 时间：2013-04-10T01:22:58.183
> 
> 标签：php, arrays, while-loop

我想做的是从一个while循环中收集数据，将其存储到一个变量中。然后稍后在我的代码中，我查看某个变量是否等于数组中的一个值，然后回显我从 while 循环中获得但等于该值来自的行的另外两个列值。我已经尝试了一堆不同的东西，并且非常接近，但无法完全理解。

```
 while($row = mysql_fetch_assoc($query)){

$team[] .= "{$row['team']}";
$winslosses .= "({$row['wins']} - {$row['losses']})"; 
```

这
会返回类似

```
 $team = (bears, badgers, wildcats)
      $winslosses = ((42-24), (55-23), (32-21)) 
```

然后稍后在我的代码中，我想看看它是否等于数组中的一个值，然后回显 $winslosses。

```
 if(in_array(bears, $team) ) {echo '$winslosses';} 
```

这显示了每支球队的所有胜利和失败。我希望它只显示熊的记录。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:27:46.137

您可以使用[array_search()](http://php.net/manual/en/function.array-search.php)来获取数组中项目的索引。然后，您可以在查询 $winlosses 时使用该索引：

```
$team = array(bears, badgers, wildcats);
$winslosses = array("(42-24)", "(55-23)", "(32-21)");

$key=array_search(bears, $team);
echo $winslosses[$key] 
```

结果是：

```
(42-24) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:28:10.633

您最好的选择是将它们存储在关联数组中。

```
while($row = mysql_fetch_assoc($query)){
    $winslosses[$row['team']] = "({$row['wins']} - {$row['losses']})";
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:28:30.593

你的主要问题是你目前有`$winslosses`一个字符串，而不是一个数组，所以你不能轻易地取出一个团队的赢/输记录。

有几种方法可以做到这一点。对我来说似乎最简单的方法是将它放在前面作为一个数组。

就像是...

```
while($row = mysql_fetch_assoc($query)){
    $teams[$row['team']] = "({$row['wins']} - {$row['losses']})";
} 
```

然后后来...

```
if(array_key_exists("bears",$teams)) {
    echo $teams["bears"];
} 
```

或者更好的是，将赢/输存储为子数组，这样您就有了结构化数据，您可以在以后随意格式化。

```
while($row = mysql_fetch_assoc($query)){
    $teams[$row['team']] = array("wins" => $row['wins'], "losses" => $row['losses']);
}

echo $teams['bears']['wins']; // for example 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:30:49.773

使用关联数组：

```
while($row = mysql_fetch_assoc($query)){

  $team[] = {$row['team']};
  $winslosses[$row['team']] = "{$row['wins']} - {$row['losses']}";

} 
```

然后像这样检索它：

```
 if(in_array(bears, $team) ) {
         echo $winslosses['bears'];
   } 
```

事实上，如果您不需要将团队名称放在单独的数组中，您可以只使用一个关联数组然后检索它。

```
if (array_key_exists('bears', $winslosses)) {
    echo $winslosses['bears'];
} 
```

# c# - 实现通用存储库和工作单元模式

> ID：15915381
> 
> 赞同：2
> 
> 时间：2013-04-10T01:23:42.923
> 
> 标签：c#, asp.net-mvc-4, ninject, unit-of-work

我正在尝试根据本[教程](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)实现通用存储库和工作单元模式。除了这些模式之外，我还使用 Ninject 为我的 Web 应用程序进行依赖注入。

我使用的特定绑定在这里：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind(typeof(IGenericRepository<>))
          .To(typeof(GenericRepository<>)).InSingletonScope();
    kernel.Bind<IUnitOfWork>()
          .To<UnitOfWork>();
} 
```

但是根据教程，我需要将 传递`DbContext`给我的类中的每个存储库属性，`UnitOfWork`以便所有存储库将只共享一个`DbContext`实例，如下所示：

```
public GenericRepository<Course> CourseRepository
{
    get
    {
        if (this.courseRepository == null)
        {
            this.courseRepository = new GenericRepository<Course>(context);
        }
        return courseRepository;
    }
} 
```

问题是，每当Ninject 注入实例时，如何将`DbContext`实例（驻留在`UnitOfWork`类中）传递给`GenericRepository`构造函数？`GenericRepository`我知道该`WithConstructorArgument`方法，但我不能在`kernel.Bind`调用中使用它，因为那时我将无法访问`DbContext`实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:43:55.087

恕我直言，您的问题不是依赖注入解决问题，而是创建 GenericRepository 对象时的实例依赖（您需要依赖于解析 IGenericRepository 的 UnityOfWork 类的 dbcontext 的特定实例）

因此，我建议您使用工厂来创建您的 IGenericRepository 实例。

[您可以在此处](https://stackoverflow.com/questions/1943576/is-there-a-pattern-for-initializing-objects-created-via-a-di-container)找到更多详细信息

# python - 创建二进制 Cx_Freeze Python 后添加库

> ID：15915382
> 
> 赞同：0
> 
> 时间：2013-04-10T01:24:19.423
> 
> 标签：python, import, cx-freeze

我有一段代码可以动态地导入一些库并使用它。它工作得很好。问题是我正在使用 Cx_Freeze 将 python 代码转换为 exe。它工作正常，但我需要在创建 exe 文件后添加一些库。

当我创建 exe 文件时，一些库保存在一个 zip 文件中。如果我需要在创建 exe 文件后添加一些额外的库，我必须将这个库放在哪里？我必须放置哪些文件？假设我想添加包/库 win32gui。我该怎么做？在简历中：我的 .exe 代码具有类似的内容：

```
__import__("module.py", fromlist=["main"]) 
```

module.py 有这样的东西：

```
import win32gui
main():
#Something else 
```

因为 .exe 库中不包含 win32gui 包，所以出现错误

> “没有名为 win32gui 的模块”

我可以在哪里添加什么来让它工作？

如果您需要更多信息，请直接说出来。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:41:34.373

Try this:

```
__import__("module", fromlist=["main"])
from module import win32gui 
```

# java - BigIntegers, gcd , 模数逆找到公钥

> ID：15915383
> 
> 赞同：2
> 
> 时间：2013-04-10T01:24:28.863
> 
> 标签：java, rsa, biginteger, modulus, greatest-common-divisor

因此，我使用 java 来查找 RSA 密码的公钥。现在我不确定我在做什么，也不确定它是否正确。

我有公钥的这些信息。

```
C = 5449089907 
n = p*q = 8271344041 
q = 181123
p = n/q = 45667
d = 53
phi(n) = (p-1)(q-1) = 8271117252 
```

使事情复杂化的是 BigIntegers，对于 int 和 longs 来说，数字非常大，所以我必须使用笨拙的 BigIntegers。据我了解，我有以下等式要解决。

```
e*5198987987 - x*8271117252 = 1 
```

我正在尝试使用 euklidske 算法来解决它。在Java中，我认为我可以使用以下方法：

我将代码基于 phi(n) = 8271117252 和 d = 53。然后我在 for 循环中使用 gcd，尝试将 for 循环中的 i 数转换为 phi(n) 上的 gdc。如果结果为 1，我将 e 设置为 i 的迭代次数。然后我在 e 和 phi(n) 上使用模数反函数。当且仅当它等于 phi(n) 我得到了答案。（我认为，它可能是错误的）。

无论如何，这是代码。一般来说，任何输入都会很棒，因为它让我有点发疯。

```
import java.math.BigInteger;
public class RSADecrypt {

    BigInteger p = new BigInteger("53"); // Input privatekey.
    BigInteger r = new BigInteger("8271344041");
    BigInteger variabel_i;
    BigInteger modinv;
    BigInteger e;

    public RSADecrypt () {

        for (BigInteger bi = BigInteger.valueOf(1000000000);
                bi.compareTo(BigInteger.ZERO) > 0;
                bi = bi.subtract(BigInteger.ONE)) {

            if(gcdThing(bi).equals(BigInteger.ONE))
                e = bi;

                  if(modinv(e) == p) {
                    System.out.println(" I er "+ bi);
            } 
        }

        System.out.println("Ikke noe svar for deg!");       
    }

    // Gcd funksjon.
    public BigInteger gcdThing(BigInteger i) {
        BigInteger b2 = new BigInteger(""+i);
        BigInteger gcd = r.gcd(b2);
        return gcd;
    }

    // Modinverse
    public BigInteger modinv (BigInteger e2) {
        variabel_i = new BigInteger(""+e2);
        modinv = r.modInverse(variabel_i);
        return modinv;
    }

} 
```

# javascript - 如何从远程网站获取数据？

> ID：15915384
> 
> 赞同：0
> 
> 时间：2013-04-10T01:24:48.667
> 
> 标签：javascript, jquery, api

假设有一个网址，例如 www.website.com/data.jsp

该链接具有以下 JSON 数据

```
{"successful":"true","rows":[{"zip":"65472","user_id":"10843","name":"Rufio"}]} 
```

我只想能够在运行时提取这些数据但是我很难使用 getJSON

```
$.getJSON("test2.jsp",function(result){
                $("div").append(result.rows[0].user_id + " ");
            }); 
```

现在，如果我使用本地文件运行它，数据位于 test2.jsp 中，如上所示，它会附加 user_id。但是，当我尝试访问“www.website.com/data.jsp”时，什么也没有发生。我也不相信该网站已配置为使用 JSONP。

我需要一种方法来弄清楚如何在运行时从网站中提取这些数据。有没有人有任何解决方案或解决方法？

ps 这是否可能需要在另一端进行整理？拥有该网站的人将此场景设置为就像一个虚假的 api 调用一样，通常您会传入参数以获取您需要的特定信息。在此端点或 url 的情况下，它只返回一条记录，或者文件只包含上面列出的数据。他们希望我在运行时从他们的 url 中提取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:56:27.140

[由于同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法对其他域进行正常的 ajax 调用。

您可以使用 JSONP 加载远程页面，但是查看该示例输出您将无法访问数据，除非为 JSONP 设置远程站点（将 JSON 分配给变量、调用回调函数等）。

您可以创建自己的服务器端直通脚本。你没有提到你有什么服务器端技术可用，但如果你可以使用 PHP，你可以像这样进行传递：

```
<?php
echo file_get_contents("http://www.website.com/data.jsp");
?> 
```

PHP（或任何其他服务器端语言）可以获取远程数据，现在您可以使用 ajax 调用您*自己的*脚本（因为您在同一个域上，所以可以使用）。

# javascript - Can I generate a JSON file with javascript?

> ID：15915385
> 
> 赞同：4
> 
> 时间：2013-04-10T01:24:52.893
> 
> 标签：javascript, jquery, json, parsing

I want to make a page on domain "example1.com" and get/parse a JSON file on another domain "example2.com/json.json". Can the json file be generated with javascript (on example2.com)? I think this can be done with php, but I want to do it with javascript. If it is not possible to generate a json file with javascript, is it possible to get/parse an object from a javascript file? EX: "example1.com" to "example2.com/js.js"

EDIT: Ok, so it is not possible to get/parse an object from a javascript file, because it is client side. So my only option is to generate a JSON file. Is it possible to do that with Javascript? I know it's probably not the best way, but I want to do it in JS, not PHP.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:32:08.620

json is just a javascript object in a string format so javascript can make json data:

```
 var animal = {name: "cat", sound: "meow"};
   json = JSON.stringify(animal); //json is a JSON string 
```

javascript does not allow ajax calls across to other sites (cross-site scripting) though becuase it is a security risk. you could look into jsonP which is a work-around this rule.

Also you cannot call to another website or your own server to run javascript to return something becuase javascript only runs in the clients browser (unless you are using a javascript server like node.js). A server has to be listening somewhere for a request.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:39:57.417

To parse a JSON object with Javascript, I would use jQuery.

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

Like anthonybell said most browsers do not allow cross-site scripting so you need to look into jsonP or work on the same domain.

Also to generate JSON you can create an object using javascript then either loop though it and output it or just output your data in JSON format which you can read about here:
[http://www.w3schools.com/json/](http://www.w3schools.com/json/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:38:34.363

You can use JSONP - essentially wrap your JSON in a callback function on domain2.com like so:

```
jsonCallback(
    {
        "sites":
        [
            {
                "siteName": "JQUERY4U",
                "domainName": "http://www.jquery4u.com",
                "description": "#1 jQuery Blog for your Daily News, Plugins, Tuts/Tips &amp; Code Snippets."
            },
            {
                "siteName": "BLOGOOLA",
                "domainName": "http://www.blogoola.com",
                "description": "Expose your blog to millions and increase your audience."
            },
            {
                "siteName": "PHPSCRIPTS4U",
                "domainName": "http://www.phpscripts4u.com",
                "description": "The Blog of Enthusiastic PHP Scripters"
            }
        ]
    }
); 
```

Then you can call it from domain1.com like so:

```
(function($) {
var url = 'http://www.jquery4u.com/scripts/jquery4u-sites.json?callback=?';

$.ajax({
   type: 'GET',
    url: url,
    async: false,
    jsonpCallback: 'jsonCallback',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(json) {
       console.dir(json.sites);
    },
    error: function(e) {
       console.log(e.message);
    }
});

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:39:48.793

You cannot replace PHP with JavaScript (unless you've got NodeJS or something).

Generating your JSON using PHP will return JSON to the client.

Having Javascript generate your JSON will return Javascript to the client. If you're doing that theres no point even usng JSON.

If you want to have a JSON Document generated (from data sources on your server) instead of a static JSON file you will need some sort of server-side programming.

If you want to use JavaScript you will need to install and configure NodeJS (and possibly some other services like a web-server, or create a server with NodeJS) and write scripts that generate and serve your JSON.

Creating the scripts to generate the JSON (and creating the basic server to host it) is not all that difficult. Installing and configuring Node can be more difficult.

If you already have access to PHP (and webserver) on your server, use that.

If your output file can be static, (and your running windows) you could possibly use JScript to generate your static file. This would require you to physically run the script (or possibly create a scheduled task to run it for you). So you'd be replacing your static file with newly generated JSON every so often. Probably not what you want though!

# python - 如何获得骨架的坐标点？

> ID：15915387
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:24:57.257
> 
> 标签：python, opencv, image-processing, mathematical-morphology, scikit-image

我从二进制图像创建骨架图像，[就像那样](http://homepages.inf.ed.ac.uk/rbf/HIPR2/images/art7skl1.gif)

我使用 mahotas python 库检测到骨架的端点，但它返回完整的图像数组，端点值为 1，其他值为 0。我更喜欢检测端点的坐标。我怎样才能得到它们？

我的计算端点的代码：

```
branch1=np.array([[2, 1, 2], [1, 1, 1], [2, 2, 2]])
branch2=np.array([[1, 2, 1], [2, 1, 2], [1, 2, 1]])
branch3=np.array([[1, 2, 1], [2, 1, 2], [1, 2, 2]])
branch4=np.array([[2, 1, 2], [1, 1, 2], [2, 1, 2]])
branch5=np.array([[1, 2, 2], [2, 1, 2], [1, 2, 1]])
branch6=np.array([[2, 2, 2], [1, 1, 1], [2, 1, 2]])
branch7=np.array([[2, 2, 1], [2, 1, 2], [1, 2, 1]])
branch8=np.array([[2, 1, 2], [2, 1, 1], [2, 1, 2]])
branch9=np.array([[1, 2, 1], [2, 1, 2], [2, 2, 1]])

endpoint1=np.array([[0, 0, 0], [0, 1, 0], [2, 1, 2]])
endpoint2=np.array([[0, 0, 0], [0, 1, 2], [0, 2, 1]])
endpoint3=np.array([[0, 0, 2], [0, 1, 2], [0, 2, 1]])
endpoint4=np.array([[0, 2, 1], [0, 1, 2], [0, 0, 0]])
endpoint5=np.array([[2, 1, 2], [0, 1, 0], [0, 0, 0]])
endpoint6=np.array([[1, 2, 0], [2, 1, 0], [0, 0, 0]])
endpoint7=np.array([[2, 0, 0], [1, 1, 0], [2, 0, 0]])
endpoint8=np.array([[0, 0, 0], [2, 1, 0], [1, 2, 0]])

jpg = 'skel.jpg'
skel = cv2.imread(jpg, 0)

sk = pymorph.binary(skel)

complete_path = 'skel.jpg'
print pymorph.gray(sk).dtype

br1=mah.morph.hitmiss(sk,branch1)
br2=mah.morph.hitmiss(sk,branch2)
br3=mah.morph.hitmiss(sk,branch3)
br4=mah.morph.hitmiss(sk,branch4)
br5=mah.morph.hitmiss(sk,branch5)
br6=mah.morph.hitmiss(sk,branch6)
br7=mah.morph.hitmiss(sk,branch7)
br8=mah.morph.hitmiss(sk,branch8)
br9=mah.morph.hitmiss(sk,branch9)

ep1=mah.morph.hitmiss(sk,endpoint1)
ep2=mah.morph.hitmiss(sk,endpoint2)
ep3=mah.morph.hitmiss(sk,endpoint3)
ep4=mah.morph.hitmiss(sk,endpoint4)
ep5=mah.morph.hitmiss(sk,endpoint5)
ep6=mah.morph.hitmiss(sk,endpoint6)
ep7=mah.morph.hitmiss(sk,endpoint7)
ep8=mah.morph.hitmiss(sk,endpoint8)

br=br1+br2+br3+br4+br5+br6+br7+br8+br9
ep=ep1+ep2+ep3+ep4+ep5+ep6+ep7+ep8 
```

br 和 ep 是我想要获取坐标的所有分支和端点的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:41:56.830

那么`ep`应该只是一个`numpy`仅在端点坐标处为 1 的二进制数组吗？在这种情况下，您可以使用`numpy.where`或`numpy.nonzero`来获取 中的非零值的索引`ep`：

```
pseudo_ep = (np.random.rand(512,512) > 0.9)
rows,cols = np.where(pseudo_ep) 
```

这些应该对应于端点的 y,x 坐标

# visual-studio-2012 - 将整个解决方案/项目回滚到 TFS 中的特定变更集？

> ID：15915390
> 
> 赞同：15
> 
> 时间：2013-04-10T01:25:09.090
> 
> 标签：visual-studio-2012, tfs, rollback, changeset, checkin

我在变更集 121。

我想回滚到版本 112，忽略从那以后我所做的所有更改。

我找到[了这个](https://stackoverflow.com/a/15301567/75500)答案，但我在菜单中找不到命令。我现在正在为此苦苦挣扎一个多小时，但找不到真正的解决方案。我要做的就是回滚到变更集 112，而忽略自那时以来所做的所有更改。就像回到过去完全抹去过去一样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-04-01T21:42:51.137

你实际上可以这样做。在源代码管理中，查看解决方案项目的历史记录，然后选择所有变更集，直到您要回滚到的那个，然后右键单击-> 回滚。这将按顺序回滚所有变更集，有效地撤消对解决方案文件夹所做的所有更改

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T03:02:43.940

> 就像回到过去完全抹去过去一样。

tfs 不允许您这样做。此回滚操作将是一个新的变更集 122，它将所有内容回滚到 112。

[回滚变更集](http://msdn.microsoft.com/en-us/library/ms194956%28v=vs.110%29.aspx)

# effects - 没有 Jquery 的 Javascript 中的幻灯片效果

> ID：15915391
> 
> 赞同：0
> 
> 时间：2013-04-10T01:25:28.210
> 
> 标签：effects

我正在自己的库中工作，我认为幻灯片效果功能会很有用，另外，我正在制作日历/时钟网络应用程序，它的目标是尽可能地填充效果。到目前为止我还没有。对不起。我在网上搜索了所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:14:37.160

如果您试图让文本滑入或滑出，CSS 将是最有效的。您可以在 for 循环中使用 Javascript setTimeout 方法，但 CSS 动画看起来最流畅。[我在这里](http://jsfiddle.net/ERR2g/44/)做了一个 JSFiddle 。

这是它背后的CSS。

```
div.slide {
    transition: left, 2s;
    -moz-transition: left, 2s;
    -webkit-transition: left, 2s;
    -ms-transition: left, 2s;
    position:relative;
    left:-150px;
    border: solid black 2px;
    width:50px;
}
div.hov {
    border:solid black 2px;
    position:absolute;
    width:100px;
}
div.hov:hover div.slide {
    left:48px;
} 
```

突出显示“日历”以查看效果。

# python - 如何使用 HTML 运行 Python？

> ID：15915392
> 
> 赞同：0
> 
> 时间：2013-04-10T01:25:36.407
> 
> 标签：python, html, batch-file

我试图让我的 html 文件使用 python-multitouch 批处理文件执行 python 源代码。

文件名是

```
C:\Users\Alien\Desktop\PYMT\pymt.bat 
```

我从

```
C:\Users\Alien\Desktop\Multitouch\website template\home.html 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:30:37.573

只需做这样的事情就应该有可能..

```
<a href="../../PYMT/pymt.bat">RUN PYTHON</a> 
```

翻转

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:01:55.190

您可以做一件简单的事情...使用 Ajax 在 javascript 中编写代码，以从 document.ready() 函数调用 python 文件中的函数。

例如

```
 $(document).ready(function(){

    $.ajax
            ({  
                type: "GET",
                    url: "/topythonFunction/", 
                data: { },
                success: function (data) 
                {   
    }
    });
}); 
```

# php - ./my/path/ 不是托管服务器中的目录

> ID：15915407
> 
> 赞同：0
> 
> 时间：2013-04-10T01:27:36.683
> 
> 标签：php, directory, codeigniter-2, captcha

我正在使用 codeigniter 验证码助手。我已按照[手册](http://ellislab.com/codeigniter/user-guide/helpers/captcha_helper.html)进行操作，并且在本地服务器上运行良好。但是当我将它移到托管服务器时，它不再工作了。我跟踪了问题，发现我的验证码目录路径**“./captcha/”**未被识别为目录。那有什么问题？就像在我的本地服务器上一样，**“./”**应该指向我的根目录。我错了吗？

这是我的验证码功能：

```
protected function captcha($font_size,$width,$height,$exp)
    {
        $vals = array(
            'img_path'   => './captcha/',
            'img_url'    => base_url().'/captcha/',
            'font_path'  => './fonts/AntykwaBold.ttf',
            'font_size'  => $font_size,
            'img_width' => $width,
            'img_height' => $height,
            'expiration' => $exp
        );

        if ($cap = create_captcha($vals)){
            $data = array(
                'captcha_time'  => $cap['time'],
                'ip_address'    => $this->input->ip_address(),
                'word'              => ($cap['word'])
            );
            $query = $this->db->insert_string('captcha', $data);
            $this->db->query($query);
            return $cap;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:43:51.450

通常， ./ 是不必要的，至少在标准目录格式中是这样。“/captcha”应该指向您的验证码目录。试试看它是否有效。祝你好运。

# ios - iOS tableview 在需要时也不会推送视图

> ID：15915414
> 
> 赞同：0
> 
> 时间：2013-04-10T01:28:10.730
> 
> 标签：ios, xcode, parsing, nsarray, nsxmlparser

我有一个表视图，其中包含使用 NSXML 解析器解析的 xml 链接列表，然后将解析结果推送到新视图。但是，它的行为非常奇怪。解析操作发生在用户选择单元格时，然后使用 NSXML 委托方法 didEndDocument，它通知带有 tableview 的对象继续并推送由解析结果填充的新视图控制器。在推送到新视图之前，我使用结果检查数组以确保它不为空。如果是，我不会推送新视图而只显示警报视图。每当我选择一个我知道将返回填充数组的单元格时，它都会认为该数组是空的并且不会推送视图。但随后我再次选择单元格并将其推送到新视图，显示正确的数据。它不会在解析操作完成之前过早地推送到新的视图控制器，除非过早调用 didEndDocument 委托方法。任何帮助将不胜感激。

代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    activity.center = selectedCell.accessoryView.center;

    selectedCell.accessoryType = UITableViewCellAccessoryNone;
    selectedCell.accessoryView = activity;

    [activity startAnimating];

    departmentName = [[sortedArray objectAtIndex:indexPath.row] objectForKey:@"name"];

    [self performSelector:@selector(parse:) withObject:[[sortedArray objectAtIndex:indexPath.row] objectForKey:@"link"] afterDelay:0];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)parse:(NSString *)link {

    NSLog(@"Link = %@", link);

    kxmlParser = [[KMXMLParser alloc] loadXMLByURL:link delegate:self];
}

- (void)parserDidStartDocument:(NSXMLParser *)parser {

    NSLog(@"Did Start");
}

- (void)parserDidEndDocument:(NSXMLParser *)parser {

    NSLog(@"Did End");

    NSLog(@"Array = %@", kxmlParser.posts);

    [activity stopAnimating];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];
    MainViewController *main = [storyboard instantiateViewControllerWithIdentifier:@"main"];
    [main setDepartmentname:departmentName];

    [self.navigationController pushViewController:main animated:YES];
} 
```

# angularjs - Angular.js - 使用过滤器更改变量

> ID：15915417
> 
> 赞同：0
> 
> 时间：2013-04-10T01:28:37.920
> 
> 标签：angularjs

这听起来很简单，但谷歌搜索正在成为王牌。我有一个包含多个类别的下拉选择：

```
<select ng-model="orderProp" >
  <option ng-repeat="cats in categories" value="{{cats}}">{{cats}}</option>
</select> 
```

我还有一张使用[Angular Google Maps](http://nlaplante.github.io/angular-google-maps/#!/api)的地图，它使用 JSON 数据来绘制标记。这些标记的数据称为`$scope.markersProperty`

当用户使用选择框时，我想动态更改markersProperty 的值。使用 Angular 的 HTML `{{}}`，我可以通过一个简单的方法得到我想要的结果：

`{{markersProperty|filter:orderProp}}`

但是我一辈子都无法弄清楚如何获得类似的功能来更新数组`$scope.markersProperty`。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:36:28.430

如果您的意思是要更新范围变量，那么您可以使用该`$filter`服务：

```
.controller('MainCtrl', function ( $scope, $filter ) {
  $scope.markersProperty = // ...

  $scope.$watch( 'orderProp', function ( val ) {
    $scope.filteredMarkersProperty = $filter('filter')($scope.markersProperty, val);
  });
}); 
```

# php - apache中的mod_rewrite问题

> ID：15915424
> 
> 赞同：0
> 
> 时间：2013-04-10T01:29:23.640
> 
> 标签：php, mod-rewrite

这不是 mod_rewrite 的真正问题，而是我的问题。我很确定我的错误非常愚蠢，但我无法解决它。我在 Mac OS X Lion 上设置了一个非常简单的 XAMPP 安装，其中包含一个什么都不做的简单 index.php 脚本。我只是想学习如何在 php 中使用友好的 url，所以，如果我收到了这种格式的 url

```
http://localhost/project/controller_name/action_name/id 
```

所以，如果我收到这个

```
http://localhost/project/user/delete/7 
```

可以在内部使用这样的东西

```
http://localhost/project/index.php?controller=user&action=delete&id=7 
```

我用这个内容在项目文件夹上创建了一个 .httacess

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /aletta/index.php?controller=$1&action=$2&id=$3 [L] 
```

我检查了是否启用了 mode_rewrite 并且确实启用了。但不起作用。我键入 `http://localhost/project/user/delete/7`并且页面显示“找不到对象！”

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:42:04.707

If you want to remap */project/$alphanum1/$alphanum2/$numeric* into */project/index.php?controller=$alphanum1&action=$alphanum2&id=$numeric*, then you could give this configuration directives a try:

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^project/([a-z0-9-_]+)/([a-z0-9-_]+)/([0-9]+)/?$ /project/index.php?controller=$1&action=$2&id=$3 [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:39:11.333

试试这个，`.htaccess`文件放在根目录：

```
Options +FollowSymLinks -MultiViews

<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    # set project dir to RewriteBase
    RewriteBase /aletta/
    RewriteRule ^([0-9a-zA-Z\-]+?)/([0-9a-zA-Z\-]+?)?/([0-9a-zA-Z\-]+?)?$ index.php?controller=$1&action=$2&id=$3

</IfModule> 
```

并运行`http://localhost/user/delete/7`，在`index.php`集合中`var_dump($_GET);`，结果将是：

```
array (size=3)
  'controller' => string 'user' (length=4)
  'action' => string 'delete' (length=6)
  'id' => string '7' (length=1) 
```

# java - 扫描仪问题。拆分问题。找不到符号 - java

> ID：15915425
> 
> 赞同：0
> 
> 时间：2013-04-10T01:29:27.943
> 
> 标签：java

这是我返回的，我不知道是什么错误：找不到符号

```
 C:\Users\testuser\Desktop\TestFile.java:33: error: cannot find symbol
                            Scanner sc = new Scanner(System.in);
                            ^
      symbol:   class Scanner
      location: class TestFile
    C:\Users\testuser\Desktop\TestFile.java:33: error: cannot find symbol
                            Scanner sc = new Scanner(System.in);
                                             ^
      symbol:   class Scanner
      location: class TestFile
    C:\Users\testuser\Desktop\TestFile.java:44: error: cannot find symbol
                            String[] tabs = prep.Split(" ");
                                                ^
      symbol:   method Split(String)
      location: variable prep of type String
    3 errors 
```

这是我的代码。

```
public class TestFile {

    String[] preps = {
        "about", "above", "across", "after", "against",
        "along", "among", "around", "at", "before",
        "behind", "below", "beneath", "beside", "between",
        "by", "concerning", "down", "during", "except",
        "for", "from", "in", "inside", "into",
        "like", "near", "of", "onto", "out",
        "over", "through", "to", "toward", "under",
        "up", "upon", "with", "within", "without"
    };

    String[] errorpreps = {
        "will", "would", "shall", "should", "can",
        "could", "may", "might", "must", 
    };

    String[] question = {
    };

    public static void main(String[] args) {

        TestFile f = new TestFile();

        f.generatecode("hi");

    };

    public String generatecode(String code){

        Scanner sc = new Scanner(System.in);
        String inp = sc.nextString();

        String prep = "";

        for (int i=0; i<preps.length+1; i++){ //retuns all inputed things into prep

            prep = preps + preps[i] + " ";

        }

        String[] tabs = prep.Split(" "); //splits the inputed thing and puts it into tab

        for (int f=1; f<tabs.length+1; f++){
            String prox = tabs[f];

            if(prox.contains(".")){
                prep = "Found a .!";
            } else if(prox.contains("?")){
                prep = "Found a ?!";
            } else if(prox.contains("!")){
                prep = "Found a !!";
            } else if(prox.contains(",")){
                prep = "Found a ,!";
            }
        }

        return prep;

    }

    public String printcode(String code){

        return "";

    }

} 
```

现在问题是我对 Scanner 不太了解。我没有导入任何东西。我知道一些关于拆分方法的知识。我无法弄清楚为什么我的语法不正确。我相信其他示例的语法是正确的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:32:18.547

你有两个问题：

*   您不导入 Scanner 类；如果您不明白为什么需要这样做，请参阅[此](http://beginwithjava.blogspot.com/2008/06/import-statements.html)内容。将其放在代码的开头：

    `import java.util.Scanner;`

*   `String.split()`是小写。

    你写： `String[] tabs = prep.Split(" ");`
    应该是： `String[] tabs = prep.split(" ");`

# ios - 在 UIImage iOS 6.0 的所有四个面上添加阴影

> ID：15915429
> 
> 赞同：9
> 
> 时间：2013-04-10T01:29:44.160
> 
> 标签：ios, shadow

我正在尝试向 imageView 的所有四个侧面添加阴影。我看到了： self.shadowView.layer.shadowOffset = CGSizeMake(10, 20); 在两侧放一个阴影。如何在所有四个侧面上放置阴影？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-10T01:47:01.630

只需设置`shadowOffset`为 (0,0) 或接近的值。`shadowRadius`如果您希望阴影更大，请进行调整。默认值为 3，但您可能需要增加它。您可能还想`shadowOpacity`确定阴影的可见性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-11T11:42:46.140

```
_yourImageView.layer.shadowRadius = 10.0; 
```

这条线玩游戏。尝试增加你的`shadowRadius`. 因此，您将在所有 4 个面上得到阴影。

# git - git 的“rebase --preserve-merges”到底做了什么（为什么？）

> ID：15915430
> 
> 赞同：382
> 
> 时间：2013-04-10T01:29:50.193
> 
> 标签：git, git-rebase

Git 的[命令](https://git-scm.com/docs/git-rebase)[文档`rebase`](https://git-scm.com/docs/git-rebase)非常简短：

```
--preserve-merges
    Instead of ignoring merges, try to recreate them.

This uses the --interactive machinery internally, but combining it
with the --interactive option explicitly is generally not a good idea
unless you know what you are doing (see BUGS below). 
```

那么当你使用时实际发生了什么`--preserve-merges`？它与默认行为（没有该标志）有何不同？“重新创建”合并等是什么意思？

* * *

## 回答 #1

> 赞同：491
> 
> 时间：2013-04-10T01:29:50.193

与普通的 git rebase 一样，git with`--preserve-merges`首先识别在提交图的一部分中进行的提交列表，然后在另一部分的顶部重播这些提交。`--preserve-merges`选择哪些提交进行重播以及重播如何用于合并提交的差异。

为了更明确地了解正常和保留合并的 rebase 之间的主要区别：

*   保留合并的 rebase 愿意重播（一些）合并提交，而普通的 rebase 完全忽略合并提交。
*   因为它愿意重放合并提交，保留合并的 rebase 必须定义重放合并提交的*含义*，并处理一些额外的皱纹
    *   从概念上讲，最有趣的部分可能是选择新提交的合并父项应该是什么。
    *   重放合并提交还需要显式检查特定的提交 ( `git checkout <desired first parent>`)，而普通的 rebase 不必担心这一点。
*   保留合并的 rebase 考虑了一组较浅的重放提交：
    *   特别是，它只会考虑重放自最近的合并基础以来所做的提交——即*最近*一次两个分支分歧的时间——而正常的 rebase 可能会回放两个分支*第*一次分歧的提交。
    *   暂时且不清楚，我相信这最终是一种筛选重放已经“合并到”合并提交中的“旧提交”的方法。

首先，我将尝试“足够准确地”描述 rebase`--preserve-merges`的作用，然后会有一些示例。如果这看起来更有用，当然可以从示例开始。

**“简报”中的算法**

如果您想真正深入了解杂草，请下载 git 源并浏览文件`git-rebase--interactive.sh`。（Rebase 不是 Git 的 C 核心的一部分，而是用 bash 编写的。而且，在幕后，它与“交互式 rebase”共享代码。）

但在这里，我将勾勒出我认为的本质。为了减少要考虑的事情的数量，我采取了一些自由。（例如，我不会尝试以 100% 的准确度捕捉计算发生的精确顺序，并忽略一些不太集中的主题，例如如何处理已经在分支之间挑选出来的提交）。

首先，请注意非合并保留变基相当简单。或多或少：

```
Find all commits on B but not on A ("git log A..B")
Reset B to A ("git reset --hard A") 
Replay all those commits onto B one at a time in order. 
```

Rebase`--preserve-merges`比较复杂。这就像我能够做到的那样简单，而不会丢失看起来非常重要的东西：

```
Find the commits to replay:
  First find the merge-base(s) of A and B (i.e. the most recent common ancestor(s))
    This (these) merge base(s) will serve as a root/boundary for the rebase.
    In particular, we'll take its (their) descendants and replay them on top of new parents
  Now we can define C, the set of commits to replay. In particular, it's those commits:
    1) reachable from B but not A (as in a normal rebase), and ALSO
    2) descendants of the merge base(s)
  If we ignore cherry-picks and other cleverness preserve-merges does, it's more or less:
    git log A..B --not $(git merge-base --all A B)
Replay the commits:
  Create a branch B_new, on which to replay our commits.
  Switch to B_new (i.e. "git checkout B_new")
  Proceeding parents-before-children (--topo-order), replay each commit c in C on top of B_new:
    If it's a non-merge commit, cherry-pick as usual (i.e. "git cherry-pick c")
    Otherwise it's a merge commit, and we'll construct an "equivalent" merge commit c':
      To create a merge commit, its parents must exist and we must know what they are.
      So first, figure out which parents to use for c', by reference to the parents of c:
        For each parent p_i in parents_of(c):
          If p_i is one of the merge bases mentioned above:
            # p_i is one of the "boundary commits" that we no longer want to use as parents
            For the new commit's ith parent (p_i'), use the HEAD of B_new.
          Else if p_i is one of the commits being rewritten (i.e. if p_i is in R):
            # Note: Because we're moving parents-before-children, a rewritten version
            # of p_i must already exist. So reuse it:
            For the new commit's ith parent (p_i'), use the rewritten version of p_i.
          Otherwise:
            # p_i is one of the commits that's *not* slated for rewrite. So don't rewrite it
            For the new commit's ith parent (p_i'), use p_i, i.e. the old commit's ith parent.
      Second, actually create the new commit c':
        Go to p_1'. (i.e. "git checkout p_1'", p_1' being the "first parent" we want for our new commit)
        Merge in the other parent(s):
          For a typical two-parent merge, it's just "git merge p_2'".
          For an octopus merge, it's "git merge p_2' p_3' p_4' ...".
        Switch (i.e. "git reset") B_new to the current commit (i.e. HEAD), if it's not already there
  Change the label B to apply to this new branch, rather than the old one. (i.e. "git reset --hard B") 
```

带`--onto C`参数的变基应该非常相似。不是在 B 的 HEAD 开始提交播放，而是在 C 的 HEAD 开始提交播放。（并使用 C_new 而不是 B_new。）

**示例 1**

例如，采取提交图

```
 B---C <-- master
 /                     
A-------D------E----m----H <-- topic
         \         /
          F-------G 
```

m 是与父母 E 和 G 的合并提交。

假设我们使用正常的、非保留合并的 rebase 在 master (C) 之上 rebase 主题 (H)。（例如，*结帐主题；rebase master*。）在这种情况下，git 会选择以下提交进行重播：

*   选D
*   选E
*   选F
*   选G
*   选H

然后像这样更新提交图：

```
 B---C <-- master
 /     \                
A       D'---E'---F'---G'---H' <-- topic 
```

（D' 是 D 的重放等价物。）

请注意，未选择合并提交 m 进行重播。

如果我们改为在`--preserve-merges`C 之上对 H 进行 rebase（例如，*checkout topic; rebase --preserve-merges master*。）在这种新情况下，git 将选择以下提交进行重播：

*   选D
*   选E
*   选择 F（在“子主题”分支中选择 D'）
*   选择 G（到“子主题”分支中的 F'）
*   选择将分支“子主题”合并到主题中
*   选H

现在选择 m*进行*重播。另请注意，在合并提交 m 之前选择了合并父级 E 和 G 进行包含。

这是生成的提交图：

```
 B---C <-- master
/     \                
A      D'-----E'----m'----H' <-- topic
        \          / 
         F'-------G' 
```

同样，D' 是 D 的精选（即重新创建）版本。对于 E' 等也是如此。每个不在 master 上的提交都已重播。E 和 G（m 的合并父级）都被重新创建为 E' 和 G' 以充当 m' 的父级（在 rebase 之后，树历史仍然保持不变）。

**示例 2**

与普通 rebase 不同，保留合并的 rebase 可以创建上游头部的多个子级。

例如，考虑：

```
 B---C <-- master
 /                     
A-------D------E---m----H <-- topic
 \                 |
  ------- F-----G--/ 
```

如果我们在 C（master）之上 rebase H（topic），那么为 rebase 选择的提交是：

*   选D
*   选E
*   选F
*   选G
*   选米
*   选H

结果是这样的：

```
 B---C  <-- master
 /    | \                
A     |  D'----E'---m'----H' <-- topic
       \            |
         F'----G'---/ 
```

**示例 3**

在上面的示例中，合并提交及其两个父级都是重放提交，而不是原始合并提交具有的原始父级。但是，在其他变基中，重放的合并提交可能会以合并之前已经在提交图中的父级结束。

例如，考虑：

```
 B--C---D <-- master
 /    \                
A---E--m------F <-- topic 
```

如果我们将主题 rebase 到 master（保留合并），那么重播的提交将是

*   选择合并提交 m
*   选F

重写的提交图将如下所示：

```
 B--C--D <-- master
                    /       \             
                   A-----E---m'--F'; <-- topic 
```

这里重放的合并提交 m' 获取提交图中预先存在的父级，即 D（master 的 HEAD）和 E（原始合并提交 m 的父级之一）。

**示例 4**

在某些“空提交”情况下，保留合并的 rebase 可能会混淆。至少这只是一些旧版本的 git（例如 1.7.8）。

拿这个提交图：

```
 A--------B-----C-----m2---D <-- master
                    \        \         /
                      E--- F--\--G----/
                            \  \
                             ---m1--H <--topic 
```

请注意，提交 m1 和 m2 都应该包含来自 B 和 F 的所有更改。

如果我们尝试将`git rebase --preserve-merges`H（主题）放到 D（主）上，则选择以下提交进行重放：

*   选择m1
*   选H

请注意，合并在 m1 中的更改 (B, F) 应该已经合并到 D 中。（这些更改应该已经合并到 m2 中，因为 m2 将 B 和 F 的子级合并在一起。）因此，从概念上讲，在D 可能应该是无操作或创建一个空提交（即连续修订之间的差异为空的提交）。

然而，git 可能会拒绝在 D 之上重放 m1 的尝试。您可能会收到如下错误：

```
error: Commit 90caf85 is a merge but no -m option was given.
fatal: cherry-pick failed 
```

看起来好像忘记向 git 传递一个标志，但潜在的问题是 git 不喜欢创建空提交。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2018-05-27T19:26:37.743

Git 2.18（2018 年第二季度）将`--preserve-merge`通过添加一个新选项显着改进该选项。

" `git rebase`"学会" `--rebase-merges`"将**提交图的整个拓扑移植到别处**。

（注：Git 2.22, Q2 2019, 实际上[*弃用* `--preserve-merge`](https://github.com/git/git/commit/fa1b86e45743fd5895c33adcd3769782e608bb40)了，Git 2.25, Q1 2020,[停止在“ `git rebase --help`”输出](https://github.com/git/git/commit/0c51181ffb178a6581ecb471091cbd2d0c48f165)中宣传它）

参见[提交25CFF9F](https://github.com/git/git/commit/25cff9f109afbd6d21b199a38d15911b1f0c5069)，[提交7543F6F](https://github.com/git/git/commit/7543f6f4441a0ec76460a54f90ab8674fe424786)，[提交1131EC9](https://github.com/git/git/commit/1131ec98189e993dcc48043c4f8e8b0128f52055)，[提交7CCDF65](https://github.com/git/git/commit/7ccdf65b63f2f4a5e751d70b9788af3c9e16b6ab)，[提交537E7D6](https://github.com/git/git/commit/537e7d61359233e95d2ca6ef6b9059afca8daa81)，[提交A9BE29C](https://github.com/git/git/commit/a9be29c9817067128a2818a609450db6e6722ffd)，[提交8F6AED7](https://github.com/git/git/commit/8f6aed71d27f33096449d28c4711d3b68159632e)，[提交1644C73](https://github.com/git/git/commit/1644c73c6d4fe35d4d3304b9c03c9586de51626f)，[提交D1E8B01](https://github.com/git/git/commit/d1e8b0114bef98e8efe3f8d35430300ff9e00443)，[提交4C68E7D](https://github.com/git/git/commit/4c68e7ddb59457efe9d3a141dc600feda86cbe67) [，](https://github.com/git/git/commit/bf5c0571d6542d992380467c26cb7bdcab23fcb5) COM​​MAN 4C68EE7D，COM​​MAN 9055E40 ，提交CB5E40，2526 EAPRAB5112.APR.2APR A NAPRA A NAPRA A NAPR A N01，A01 ，[A01](https://github.com/git/git/commit/9055e401dd63a422a4401a454ef2a0e2ef727ace)，[a 0.Aptra](https://github.com/git/git/commit/cb5206eab196544a3b271afdff9865c103e6dbce) [a n01](https://github.com/git/git/commit/a01c2a5f59cc0f28daeab33355ae4a45490ce7e6)，[A](https://github.com/git/git/commit/2f6b1d13aa730901fe328fc2d88f208ea44d4f9e) .[约翰内斯辛德林](https://github.com/dscho)( [)](https://github.com/dscho) . 请参阅[Stefan Beller ( ) 的](https://github.com/stefanbeller)[提交 f431d73](https://github.com/git/git/commit/f431d73d9c9a4ee16df2f7ef66abe518c77c73d6)（2018 年 4 月 25 日[）](https://github.com/stefanbeller)。[`dscho`](https://github.com/dscho)
[`stefanbeller`](https://github.com/stefanbeller)
请参阅[Phillip Wood ( ) 的](https://github.com/phillipwood)[提交 2429335](https://github.com/git/git/commit/24293359ccf8a7bc2ac68a9b9bf61d6b59c873ad)（2018 年 4 月 25 日[）](https://github.com/phillipwood)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 2c18e6a](https://github.com/git/git/commit/2c18e6ae2434a6caa5b3a7256608470948e73f66))^(中，2018 年 5 月 23 日）)[`phillipwood`](https://github.com/phillipwood)
^([`gitster`](https://github.com/gitster))

> ## `pull`: 接受`--rebase-merges`重新创建分支拓扑

> `preserve`与简单地将选项传递`--preserve-merges` 给`rebase`命令的模式类似，`merges`模式只是传递 `--rebase-merges`选项。
> 
> 这将允许用户在拉取新提交时方便地 rebase 非平凡的提交拓扑，而不会使它们变平。

* * *

`git rebase`手册页现在有一个[完整的部分，专门用于使用 merges 重新定位历史](https://github.com/git/git/blob/25cff9f109afbd6d21b199a38d15911b1f0c5069/Documentation/git-rebase.txt#L806-L937)。

提炼：

> 开发人员可能想要重新创建合并提交有正当理由：在处理多个相互关联的分支时保持分支结构（或“提交拓扑”）。
> 
> 在以下示例中，开发人员处理一个重构按钮定义方式的主题分支，以及另一个使用该重构实现“报告错误”按钮的主题分支。
> 的输出`git log --graph --format=%s -5`可能如下所示：
> 
> ```
> *   Merge branch 'report-a-bug'
> |\
> | * Add the feedback button
> * | Merge branch 'refactor-button'
> |\ \
> | |/
> | * Use the Button class for all buttons
> | * Extract a generic Button class from the DownloadButton one 
> ```
> 
> 开发人员可能希望在保持分支拓扑的同时将这些提交变基为更新`master` ，例如，当第一个主题分支预计`master`比第二个主题分支更早集成时，例如，以解决与更改的 `DownloadButton`类的合并冲突它进入`master`.
> 
> 可以使用该`--rebase-merges`选项执行此变基。

* * *

请参阅[提交 1644c73](https://github.com/git/git/commit/1644c73c6d4fe35d4d3304b9c03c9586de51626f)以获取一个小示例：

> ## `rebase-helper` `--make-script`: 引入一个标志来重新合并

> 定序器刚刚学习了旨在重新创建分支结构的新命令（**在精神上与 类似`--preserve-merges`，但设计的破坏性大大降低**）。
> 
> 让我们允许`rebase--helper`使用这些命令生成待办事项列表，这些命令由新`--rebase-merges`选项触发。
> 对于这样的提交拓扑（HEAD 指向 C）：
> 
> ```
> - A - B - C (HEAD)
>    \   /
>      D 
> ```

> 生成的待办事项列表如下所示：
> 
> ```
> # branch D
> pick 0123 A
> label branch-point
> pick 1234 D
> label D
> 
> reset branch-point
> pick 2345 B
> merge -C 3456 D # C 
> ```

* * *

有什么区别`--preserve-merge`？
[提交 8f6aed7](https://github.com/git/git/commit/8f6aed71d27f33096449d28c4711d3b68159632e)解释说：

> 曾几何时，这个这里的开发人员想：如果说，如果 Git for Windows 的补丁在核心 Git 之上可以表示为一个灌木丛，并在核心 Git 之上重新建立，这不是很好吗？维护一套可挑选的补丁系列？
> 
> 回答这个问题的最初尝试是：`git rebase --preserve-merges`.
> 
> 但是，该实验从未打算作为交互式选项，它只是被捎带，`git rebase --interactive`因为该命令的实现看起来已经非常非常熟悉：它是由设计的同一个人设计的`--preserve-merges`：真正的你。

作者用“你的真心”指的是他自己： **[Johannes Schindelin ( `dscho`)](https://github.com/dscho)**，他是我们拥有 Git For Windows 的主要原因（与其他几位英雄——Hannes、Steffen、Sebastian...）（尽管[回到过去——2009 年——这并不容易](https://stackoverflow.com/a/1704687/6309)）。[他自 2015 年 9 月以来](http://git.661346.n2.nabble.com/On-a-personal-note-td7638864.html)
一直在微软工作，考虑到微软现在大量使用 Git 并需要他的服务，这是有道理的。 这种[趋势实际上始于 2013 年的 TFS](https://blogs.msdn.microsoft.com/mvpawardprogram/2013/11/13/git-for-tfs-2013/)。从那时起，微软管理[着地球上最大的 Git 存储库](https://blogs.msdn.microsoft.com/bharry/2017/05/24/the-largest-git-repo-on-the-planet/)！而且，[自 2018 年 10 月起，微软收购了 GitHub](https://blogs.microsoft.com/blog/2018/10/26/microsoft-completes-github-acquisition/)。

您可以在2018 年 4 月的 Git Merge 2018视频中看到[Johannes 的演讲。](https://www.youtube.com/watch?v=oOMzi983Qmw&t=13s)

> 一段时间后，其他一些开发人员（我在看着你，安德烈亚斯！;-)）决定允许`--preserve-merges`与`--interactive`（有警告！）和 Git 维护者（嗯，临时 Git 维护者）结合是一个好主意在朱尼奥缺席期间，即）同意，那是`--preserve-merges`设计的魅力开始迅速而乏味地分崩离析的时候。

Jonathan 在这里谈论的是来自 Suse 的**[Andreas Schwab 。](https://github.com/andreas-schwab)**[您可以在 2012 年](https://public-inbox.org/git/7vwqzrmbk1.fsf@alter.siamese.dyndns.org/)
看到他们的一些讨论。

> 原因？**在`--preserve-merges`mode 中，合并提交（或就此而言，*任何*提交）的父级没有明确说明，但 通过传递给command的提交名称*暗示*`pick`**。
> 
> **例如，这使得重新排序 commits 变得不可能**。
> 更不用说在分支之间移动提交，或者上帝禁止将主题分支分成两个。
> 
> 唉，这些缺点也阻止了该模式（其最初目的是为 Git 服务于 Windows 的需求，并希望它也可能对其他人有用）为 Git 服务于 Windows 的需求。
> 
> 五年后，当在 Git for Windows 中拥有一个部分相关、部分不相关的补丁系列变得非常笨拙、大杂烩变得真的站不住脚时，这些补丁不时地重新基于核心 Git 的标签（引起了开发人员不应有的愤怒）命运多舛的 `git-remote-hg`系列首先淘汰了 Git for Windows 的竞争方法，后来在没有维护者的情况下被放弃）真的站不住脚，“ [Git 花园剪刀](https://github.com/msysgit/msysgit/blob/master/share/msysGit/shears.sh)”[诞生](https://github.com/git-for-windows/build-extra/blob/master/shears.sh)了：一个脚本，搭载在交互式 rebase 之上，这将首先确定要重新定位的补丁的分支拓扑，创建一个伪待办事项列表以供进一步编辑，将结果转换为真正的待办事项列表（大量使用`exec`命令来“实现”缺少的待办事项列表命令），最后在新的基本提交之上重新创建补丁系列。

（此补丁在[提交 9055e40](https://github.com/git/git/commit/9055e401dd63a422a4401a454ef2a0e2ef727ace)中引用了 Git 园艺剪刀脚本）

> 那是在 2013 年。
> 大约花了三周时间才提出设计并将其作为树外脚本实施。毋庸置疑，实施需要相当长的时间才能稳定下来，而设计本身证明自己是合理的。
> 
> **有了这个补丁，Git 花园剪刀的优点就体现`git rebase -i`出来**了。
> **传递该`--rebase-merges`选项将生成一个易于理解的待办事项列表，并且很明显如何重新排序提交**。
> 可以通过插入`label`命令和调用来引入新的分支`merge <label>`。
> **一旦这种模式变得稳定并被普遍接受，我们就可以弃用曾经的设计错误`--preserve-merges`**。

* * *

Git 2.19（2018 年第三季度）`--rebase-merges`通过使其与`--exec`.

“”的“ `--exec`”选项`git rebase --rebase-merges`将执行命令放置在错误的位置，已更正。

请参阅[Johannes Schindelin ( ) 的提交](https://github.com/dscho)[1ace63b](https://github.com/git/git/commit/1ace63bc39a339a1616477644d6c43f570716bcb) （ 2018 年 8 月 9 日）和[提交 f0880f7](https://github.com/git/git/commit/f0880f77abcbd2dbc948917e995680171eff28b0)（2018 年 8 月 6 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 750eb11](https://github.com/git/git/commit/750eb11d8f53feba4a797c1be1a0ad2f68f88879))^(中，2018 年 8 月 20 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## `rebase --exec`：让它与`--rebase-merges`

> 的想法`--exec`是`exec`在每个`pick`.
> 
> 自从引入`fixup!`/s`quash!`提交以来，这个想法被扩展为适用于“pick，可能后跟一个 fixup/squash 链”，即不会在 a`pick`和它的任何对应的 `fixup`or`squash`行之间插入一个 exec。
> 
> 当前的实现使用了一个肮脏的技巧来实现这一点：它假设只有 pick/fixup/squash 命令，然后 在除第一个之外的任何行之前*插入*行，并附加最后一个。`exec``pick`
> 
> 使用 生成的待办事项列表`git rebase --rebase-merges`，这个简单的实现显示了它的问题：当有和命令时`label`，它会产生完全错误的东西。`reset``merge`
> 
> 让我们改变实现来做我们想做的事：**寻找 `pick`行，跳过任何修正/壁球链，然后插入`exec` 行**。起泡，冲洗，重复。
> 
> 注意：我们尽可能在注释行*之前*插入，因为空提交由注释掉的选择行表示（我们希望在这样的行*之前*插入前面的选择的 exec 行，而不是之后）。
> 
> 同时在命令`exec`之后添加行`merge`，因为它们在本质上与`pick`命令相似：它们添加新的提交。

* * *

Git 2.22（2019 年第 2 季度）修复了使用 refs/rewritten/ 层次结构来存储变基中间状态，这本质上是每个工作树的层次结构。

请参阅[Nguyễn Thai Ngọc Duy (](https://github.com/pclouds) [)的](https://github.com/pclouds)[提交 b9317d5](https://github.com/git/git/commit/b9317d55a37f93c47d48f12a7b3e45a71434d0e7)、[提交 90d31ff](https://github.com/git/git/commit/90d31ff5d470286a8480311384429ebee8bbc939)、[提交 09e6564](https://github.com/git/git/commit/09e65645e3b092e4d93bb8513b14474c68df23d8)（2019 年 3 月 7 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 917f2cd](https://github.com/git/git/commit/917f2cd1c2396c694ae956a1a26d9c92bf50b847))^(中，2019 年 4 月 9 日）)[`pclouds`](https://github.com/pclouds)
^([`gitster`](https://github.com/gitster))

> ## 确保 refs/rewritten/ 是每个工作树的

[a9be29c](https://github.com/git/git/commit/a9be29c9817067128a2818a609450db6e6722ffd)（sequencer：make refs 由`label`命令 worktree-local，2018-04-25，Git 2.19 生成）添加`refs/rewritten/`为每个工作树的参考空间。
不幸的是（我的错）有几个地方需要更新以确保它真的是每个工作树。

> *   `add_per_worktree_entries_to_dir()`已更新以确保 ref 列表查看每个工作树`refs/rewritten/`而不是每个 repo 一个。
>     
>     
> *   `common_list[]`已更新，以便`git_path()`返回正确的位置。这包括“ `rev-parse --git-path`”。
>     
>     
> 
> 这个烂摊子是我造成的。
> 我开始尝试通过引入`refs/worktree,`所有 refs 将在每个工作树中的位置来解决它，而无需特殊处理。
> 不幸的 refs/rewritten 出现在 refs/worktree 之前，所以这就是我们所能做的。

* * *

借助 Git 2.24（2019 年第四季度），“ `git rebase --rebase-merges`”学会了驱动不同的合并策略并将策略特定选项传递给它们。

请参阅[Elijah Newren ( ) 的](https://github.com/newren)[提交 476998d](https://github.com/git/git/commit/476998d05bc62b9baaed240da0893ec5d80d676a)（2019 年 9 月 4 日[）](https://github.com/newren)。 See [commit e1fac53](https://github.com/git/git/commit/e1fac531ea9f9dc710f6eeae37ea2b38dd5f9fae) , [commit a63f990](https://github.com/git/git/commit/a63f990d9205d1a781aec310e44edf35e29063a2) , [commit 5dcdd74](https://github.com/git/git/commit/5dcdd7409ad3b3e8d5e79871bfb9d5f4215d4a13) , [commit e145d99](https://github.com/git/git/commit/e145d993478befd0db6999822aa31d422b283a3b) , [commit 4e6023b](https://github.com/git/git/commit/4e6023b13ae1159277a7c3053f8d074c23456812) , [commit f67336d](https://github.com/git/git/commit/f67336dabf8b77f1eee0341790c8fbbe5c6d81dd) , [commit a9c7107](https://github.com/git/git/commit/a9c71073dace0d1ddbd12291604d191064b1ae94) , [commit b8c6f24](https://github.com/git/git/commit/b8c6f24255d3224438ee8c591b7b08d665433b6b) , [commit d51b771](https://github.com/git/git/commit/d51b771dc0a2ea71c44f3c4c54230f140588bacd) , [commit c248d32](https://github.com/git/git/commit/c248d32cdb302812585823231cf29027db33571e) , [commit 8c1e240](https://github.com/git/git/commit/8c1e24048a0a159329743a8e76251412c0f727d9) , [commit 5efed0e](https://github.com/git/git/commit/5efed0ecf936596377c241aa0e0bd40839bafbd5) , [commit 68b54f6](https://github.com/git/git/commit/68b54f669de27c66e42793977df5b4d5a4a3fc5b) , [commit 2e7bbac](https://github.com/git/git/commit/2e7bbac6be6b905773ad091bdcd7c897286c17d0) , [commit 6180b20](https://github.com/git/git/commit/6180b202390a04c4c4f63453cdc75142bb2c8fae) , [commit d5b581f](https://github.com/git/git/commit/d5b581f228fb8b2ec3a9d6225f657dff7d28925d) (31 2019 年 7 月）[`newren`](https://github.com/newren)
[约翰内斯辛德林（`dscho`）](https://github.com/dscho)。
^(（由[Junio C Hamano 合并`gitster`——](https://github.com/gitster)在[提交 917a319](https://github.com/git/git/commit/917a319ea59c130a14cff7656537ba14f593568b)中，2019 年 9 月 18 日）)

* * *

在 Git 2.25（2020 年第一季度）中，用于区分工作树本地和存储库全局引用的逻辑是固定的，以促进保留合并。

请参阅[SZEDER Gábor ( ) 的](https://github.com/szeder)[提交 f45f88b](https://github.com/git/git/commit/f45f88b2e483649cd063a7dc7826c03025683e56)、[提交 c72fc40](https://github.com/git/git/commit/c72fc40d0904cbf3199258c2f471c2351e024b1e)、[提交 8a64881](https://github.com/git/git/commit/8a64881b44e03264fb0c3c26fc00a01c12cd67ff)、[提交 7cb8c92](https://github.com/git/git/commit/7cb8c929d76c12750fdece2e5da75d207938d3b9)、[提交 e536b1f](https://github.com/git/git/commit/e536b1fedf777ad8958a6f299d9d59db6299e697)（2019 年 10 月 21 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 db806d7](https://github.com/git/git/commit/db806d7064ee132c2dbb3d36d26da9adb5066260))^(中，2019 年 11 月 10 日）)[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

> ## [`path.c`](https://github.com/git/git/commit/f45f88b2e483649cd063a7dc7826c03025683e56): 不要调用`match`没有值的函数`trie_find()`
> 
> ^(签字人：SZEDER Gábor)

> “logs/refs”不是特定于工作树的路径，但由于[提交 b9317d55a3](https://github.com/git/git/commit/b9317d55a37f93c47d48f12a7b3e45a71434d0e7)（确保 refs/rewritten/ 是每个工作树，2019-03-07，v2.22.0-rc0）“ `git rev-parse --git-path`”一直在返回虚假路径如果存在尾随“ `/`”：
> 
> ```
> $ git -C WT/ rev-parse --git-path logs/refs --git-path logs/refs/
> /home/szeder/src/git/.git/logs/refs
> /home/szeder/src/git/.git/worktrees/WT/logs/refs/ 
> ```
> 
> 我们使用`trie`数据结构来有效地确定路径是属于公共目录还是特定于工作树。
> 
> 碰巧[b9317d55a3](https://github.com/git/git/commit/b9317d55a37f93c47d48f12a7b3e45a71434d0e7)`trie`触发了一个与实现本身一样古老的错误，在[4e09cf2acf](https://github.com/git/git/commit/4e09cf2acf00c63848c365479c61d80af62eceba)中添加（“ `path`：优化公共目录检查”，2015-08-31，Git v2.7.0-rc0 -在[批次 #2](https://github.com/git/git/commit/f5b6079871904ba5b0a8548f91545f126caf898b)中列出的[合并](https://github.com/git/git/commit/297ae7151f85b677e58d6804d35e88d1375abaeb)）。
> 
> *   根据描述的评论`trie_find()`，它应该只调用给定的匹配函数'fn'，以获得“trie 包含值的键的/-或-\0-终止前缀”。
>     这不是真的：trie_find() 在三个地方调用了 match 函数，但其​​中一个地方缺少对值是否存在的检查。
>     
>     
> *   [b9317d55a3](https://github.com/git/git/commit/b9317d55a37f93c47d48f12a7b3e45a71434d0e7)向 中添加了两个新键`trie`：
>     
>     
> *   ' `logs/refs/rewritten`' 和
>     
>     
> *   ' `logs/refs/worktree`'，在已经存在的 ' ' 旁边`logs/refs/bisect`。
>     这导致了一个`trie`具有路径“ `logs/refs/`”的节点，该节点以前不存在，并且没有附加值。
>     对 ' ' 的查询`logs/refs/`会找到该节点，然后点击该`match`函数的一个调用点，该调用点不检查该值是否存在，从而使用as 值调用该`match`函数。`NULL`
>     
>     
> *   当`match`函数`check_common()`被调用时`NULL`，返回0，表示查询的路径不属于公共目录，最终导致如上所示的虚假路径。
>     
>     
> 
> 添加缺失条件，`trie_find()`使其永远不会使用不存在的值调用匹配函数。
> 
> `check_common()`然后将不再需要检查它是否获得了非 NULL 值，因此删除该条件。
> 
> 我相信没有其他路径可以导致类似的虚假输出。
> 
> AFAICT 导致使用`NULL`值调用匹配函数的唯一其他键是' `co`'（因为键' `common`'和' `config`'）。
> 
> 但是，由于它们不在属于公共目录的目录中，因此需要生成特定于工作树的路径。

* * *

确保使用 Git 2.34（2021 年第四季度），以避免内存泄漏。

请参阅Ævar Arnfjörð Bjarmason ( ) 的[提交 6e65854](https://github.com/git/git/commit/6e658547d35515da6ba55d285d6699b7f04cb939)、[提交 0c52cf8](https://github.com/git/git/commit/0c52cf8e00f65bb198800a08caaadc95eaf4419a)（2021 年 10 月 13 日）和[提交 e5a917f](https://github.com/git/git/commit/e5a917fcf42d2e22017ae501ffdd1c2108a1431e) [（`avar`](https://github.com/avar) 2021 年 10 月 7 日[）](https://github.com/avar)。
请参阅[Junio C Hamano ( ) 的](https://github.com/gitster)[提交 9d05b45](https://github.com/git/git/commit/9d05b459c78a64ed7cc9d94f98196b731e845b49)（2021 年 10 月 7 日[）](https://github.com/gitster)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 bfa646c](https://github.com/git/git/commit/bfa646c2cbad55cf652344415616eadc9e20f3c4))^(中，2021 年 10 月 25 日）)[`gitster`](https://github.com/gitster)
^([`gitster`](https://github.com/gitster))

> ## [`sequencer`](https://github.com/git/git/commit/6e658547d35515da6ba55d285d6699b7f04cb939): 修复内存泄漏`do_reset()`
> 
> ^(签字人：Ævar Arnfjörð Bjarmason)

> 修复了[9055e40](https://github.com/git/git/commit/9055e401dd63a422a4401a454ef2a0e2ef727ace)中引入的内存泄漏（“ `sequencer`：引入新命令以重置修订版”，2018-04-25，Git v2.18.0-rc0 -批处理中列出的[合并](https://github.com/git/git/commit/2c18e6ae2434a6caa5b3a7256608470948e73f66)[#6](https://github.com/git/git/commit/e144d126d74f5d2702870ca9423743102eec6fcd)），它`setup_unpack_trees_porcelain()`在没有相应调用的情况下调用`clear_unpack_trees_porcelain()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-04T15:07:12.323

对于那些仅仅因为他们拉动并收到消息而在这里结束的人：

```
git pull
(...)
warning: git rebase --preserve-merges is deprecated. Use --rebase-merges instead. 
```

查看您的 ~/.gitconfig 和 /etc/gitconfig 并搜索此选项：

```
[pull]
  rebase = preserve 
```

然后根据您的需要前往该文档了解和修复：[https ://www.git-scm.com/docs/git-config#Documentation/git-config.txt-pullrebase](https://www.git-scm.com/docs/git-config#Documentation/git-config.txt-pullrebase)

# c# - 尝试对数据网格进行排序时出错 (XAML / C#)

> ID：15915432
> 
> 赞同：0
> 
> 时间：2013-04-10T01:30:21.273
> 
> 标签：c#, datagrid

应该是一个简单的问题，但我找不到解决方法。我在我的 c# 中收到这些错误：

> 'System.Windows.Controls.DataGrid' 不包含'Sort' 的定义，并且找不到接受'System.Windows.Controls.DataGrid' 类型的第一个参数的扩展方法'Sort'（您是否缺少 using 指令还是汇编参考？）

和

> “System.Windows.Controls.DataGrid”不包含“Ascending”的定义，并且找不到接受“System.Windows.Controls.DataGrid”类型的第一个参数的扩展方法“Ascending”（您是否缺少 using 指令还是汇编参考？）

这是我的代码：

XAML：

```
<DataGrid Grid.Row="0" Grid.Column="0" Grid.RowSpan="5" Margin="0 0 25 0"  AutoGenerateColumns="True" Name="studentData" IsReadOnly="True" ItemsSource="{Binding}" /> 
```

C＃：

```
private void sortByName_Click(object sender, RoutedEventArgs e)
    {
        studentDataGrid.ItemsSource = studentClass;
        studentDataGrid.Sort(studentDataGrid.Columns[0], studentDataGrid.Ascending);
    } 
```

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:01:44.633

`DataGrid`没有`Sort`方法。有[很多](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5d3942c8-e3e1-4284-b1b3-0b8b94150d86/)关于如何在代码中对数据网格应用排序的博客文章和[文章](http://dotnetgui.blogspot.com.au/2011/02/how-to-properly-sort-on-wpf-datagrid.html)。

# ios - 只能通过覆盖 heightForRowAtIndexPath 来更改静态 UITableViewCell 的高度？

> ID：15915442
> 
> 赞同：3
> 
> 时间：2013-04-10T01:31:37.263
> 
> 标签：ios, objective-c, uitableview

我已经查看了很多关于如何`UITableViewCell`通过覆盖来隐藏静态的示例`heightForRowAtIndexPath`，虽然我现在已经让它工作了，但它看起来很麻烦，我想看看我是否做错了什么。

我有一个`UITableViewController`大约有 8 行的表格视图。我的应用程序中的这个屏幕显示了一个对象，例如，一行是描述，一个是图像，一个是地图视图，等等。所有的行都是静态的。

在某些情况下，显示的某些对象没有地图，因此我想隐藏包含`mapview`. 由于它是一个静态行，我在想通过为该行设置一个出口属性（例如`@property (weak, nonatomic) IBOutlet UITableViewCell *mapViewRow;`），然后我可以以某种方式将该行的高度设置为 0 或将该行隐藏在`viewDidLoad`or中`viewWillAppear`。但是，似乎唯一的方法是重写该`heightForRowAtIndexPath`方法，这有点烦人，因为我需要在我的代码中硬编码地图行的索引，例如

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 6 && self.displayItem.shouldHideMap) {
        return 0;
    }
    return [super tableView:tableView heightForRowAtIndexPath:indexPath];
} 
```

当然，没什么大不了的，但只是在 a 中调整*静态*行大小的整个方式`tableview`似乎违背了首先在情节提要中设置它们的意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:49:32.243

**编辑**- 我回答背后的理由

要更改行的高度，您必须重新加载整个表或包含该行的子集。B/c 在表格中有一行零高度有点奇怪，我更喜欢修改您的数据源，以使表格中不存在该行。

有很多方法可以做到这一点。您可以从 displayItem 构建一个数组，其中数组中的每一行对应于表中带有适当数据的行。您将重建此数组，然后调用`[tableView reloadData]`. 我最初的答案还将通过将每个数据元素视为具有 0 或 1 行的部分来消除不需要的行。

**原始答案**

您的 tableview 是普通样式还是分组样式？如果它是一种简单的样式，您可以将每一行视为一个包含 0 或 1 行的部分。在您的 tableView 数据源和委托方法中，您将使用部分索引来识别`self.displayItem`您关心的该部分中的数据。

您的代码将类似于：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 8; // max number of possible rows in table
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger rows = 1;

    // set self.mapSectionIndex during initialization or hard code it
    if (section == self.mapSectionIndex && self.displayItem.shouldHideMap) {
        rows = 0;
    }
    return rows;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:indexPath
{
    return 60.0f; // whatever you want the height to be
}

// also modify tableView:cellForRowAtIndexPath: and any other tableView delegate and dataSource methods appropriately 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T05:08:21.353

您可以覆盖 `heightForRowAtIndexPath`并在其中写入`return UITableViewAutomaticDimension;`这将使单元格自动计算高度，因为`UILabel`高度是 >= 。它对我有用。

# php - 我可以取回 MySQL 表中列名的默认值吗？

> ID：15915445
> 
> 赞同：7
> 
> 时间：2013-04-10T01:31:45.813
> 
> 标签：php, mysql, pdo

我可以获取表的列名，但有没有办法检索每列的默认数据值？

这是我用来获取表格列名的内容：

```
$q = $dbh->query("DESCRIBE tablename"); 
$table_fields = $q->fetchAll(PDO::FETCH_COLUMN);

print_r($table_fields); 
```

这会打印一个列名数组，但我也在尝试获取每个列名的默认数据值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T02:05:03.063

另一种选择是转到数据字典并在`Information_Schema.Columns`. 这允许您将结果限制为单个列。

```
$query = <<< endsql
 SELECT Column_Default
  FROM Information_Schema.Columns
  WHERE Table_Schema = '$yourSchema'
    AND Table_Name = '$yourTableName'
    AND Column_Name = '$yourColumnName'
endsql; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T01:53:49.947

尝试这个：

```
$query = "SHOW FULL COLUMNS FROM tableName";
// ... 
```

列`Default`。

我希望我有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T01:54:26.443

只需在您的 FETCH_COLUMN 之后给出一个索引。我没有尝试您的代码，但根据[DESCRIBE 手册](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/explain.html)，它将返回 6 个描述列。因此，如果您已阅读[本文](http://www.php.net/manual/en/pdostatement.fetchall.php)，您可能会得到解决方案。我已经阅读了它们，我认为只需在您的代码中添加第 4 个索引，如下所示即可。

```
$table_fields = $q->fetchAll(PDO::FETCH_COLUMN,4); 
```

# python - 为什么 numpy.random.dirichlet() 不接受多维数组？

> ID：15915446
> 
> 赞同：4
> 
> 时间：2013-04-10T01:31:58.977
> 
> 标签：python, numpy

在[numpy页面上](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.dirichlet.html)，他们给出了示例

```
s = np.random.dirichlet((10, 5, 3), 20) 
```

这一切都很好，很棒；但是如果你想从一个二维的 alpha 数组中生成随机样本呢？

```
alphas = np.random.randint(10, size=(20, 3)) 
```

如果您尝试
`np.random.dirichlet(alphas)`,
`np.random.dirichlet([x for x in alphas])`或
`np.random.dirichlet((x for x in alphas))`,

它会导致 `ValueError: object too deep for desired array`. 唯一似乎有效的是：

```
y = np.empty(alphas.shape)
for i in xrange(np.alen(alphas)):
    y[i] = np.random.dirichlet(alphas[i])
    print y 
```

...这对于我的代码结构来说远非理想。为什么会这样，谁能想到一种更“类似numpy”的方式来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:01:56.260

`np.random.dirichlet`编写用于为单个 Dirichlet 分布生成样本。该代码是根据 Gamma 分布实现的，并且该实现可以用作矢量化代码的基础，以从不同的分布中生成样本。在下面，`dirichlet_sample`采用形状为 (n, k) 的数组`alphas`，其中每一行是`alpha`Dirichlet 分布的向量。它还返回一个形状为 (n, k) 的数组，每一行都是来自 的相应分布的样本`alphas`。当作为脚本运行时，它会使用`dirichlet_sample`和`np.random.dirichlet`来生成样本，以验证它们是否生成相同的样本（直到正常的浮点差异）。

```
import numpy as np

def dirichlet_sample(alphas):
    """
    Generate samples from an array of alpha distributions.
    """
    r = np.random.standard_gamma(alphas)
    return r / r.sum(-1, keepdims=True)

if __name__ == "__main__":
    alphas = 2 ** np.random.randint(0, 4, size=(6, 3))

    np.random.seed(1234)
    d1 = dirichlet_sample(alphas)
    print "dirichlet_sample:"
    print d1

    np.random.seed(1234)
    d2 = np.empty(alphas.shape)
    for k in range(len(alphas)):
        d2[k] = np.random.dirichlet(alphas[k])
    print "np.random.dirichlet:"
    print d2

    # Compare d1 and d2:
    err = np.abs(d1 - d2).max()
    print "max difference:", err 
```

样品运行：

```
dirichlet_sample:
[[ 0.38980834  0.4043844   0.20580726]
 [ 0.14076375  0.26906604  0.59017021]
 [ 0.64223074  0.26099934  0.09676991]
 [ 0.21880145  0.33775249  0.44344606]
 [ 0.39879859  0.40984454  0.19135688]
 [ 0.73976425  0.21467288  0.04556287]]
np.random.dirichlet:
[[ 0.38980834  0.4043844   0.20580726]
 [ 0.14076375  0.26906604  0.59017021]
 [ 0.64223074  0.26099934  0.09676991]
 [ 0.21880145  0.33775249  0.44344606]
 [ 0.39879859  0.40984454  0.19135688]
 [ 0.73976425  0.21467288  0.04556287]]
max difference: 5.55111512313e-17 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T01:57:55.040

我想你正在寻找

```
y = np.array([np.random.dirichlet(x) for x in alphas]) 
```

为了您的列表理解。否则你只是传递一个 python 列表或元组。我想`numpy.random.dirichlet`不接受您的 alpha 值列表的原因是因为它没有设置为 - 它已经接受了一个数组，`k`根据文档，它期望有一个维度。

# spring-security - Spring Security、OpenID 和 mod_proxy

> ID：15915453
> 
> 赞同：0
> 
> 时间：2013-04-10T01:33:07.923
> 
> 标签：spring-security, openid, mod-proxy

我有一个使用 spring-security 的 OpenID 实现的应用程序。应用服务器位于代理后面。代理是带有 mod_proxy 的 apache httpd。如果代理通过 HTTP 连接到应用服务器，应用程序将告诉 OpenID 身份验证器通过 HTTP 而不是我希望的 HTTPS 重定向回来。它似乎动态地拉协议并且只看到HTTP。如果我将代理配置为使用 HTTPS，我会遇到[这个问题](https://serverfault.com/questions/496888/ssl-issue-with-mod-proxy?noredirect=1#comment557272_496888)。那么有没有办法在使用 HTTP 的代理后面操作 Spring Security？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:09:51.067

一点额外的 mod_proxy 和 Glassfish 配置为我解决了这个问题：

[https://serverfault.com/questions/496888/ssl-issue-with-mod-proxy](https://serverfault.com/questions/496888/ssl-issue-with-mod-proxy)

# bash - Node.js exec：杀死子管道及其所有子管道的最佳方法

> ID：15915456
> 
> 赞同：4
> 
> 时间：2013-04-10T01:33:14.483
> 
> 标签：bash, node.js

我有一个 bash 命令，它将音频流从 avconv/ffmpeg 传输到另一个必须使用 sudo 运行的 bash 脚本：

`avconv -i http://8273.live.streamtheworld.com:3690/WQHTFMAAC_SC -f wav -ac 1 -ar 22050 - | sudo ./pifm -`

node.js 脚本用于时不时停止脚本：

```
var exec = require("child_process").exec,
    signal = null;

var signal = exec("avconv -i http://8273.live.streamtheworld.com:3690/WQHTFMAAC_SC -f wav -ac 1 -ar 22050 - | sudo ./pifm -")
setTimeout(function() {
    signal.kill('SIGINT')
},10000) 
```

不幸的是，这不会杀死管道中的任何一个进程。

一些进一步的信息：

*   管道进程 ( `console.log(signal.pid)`) 的结果 PID 不代表任何一个进程的 PID，我认为这与它是管道的事实有关？
*   我能够`avconv`通过在 中添加一个来可靠地杀死第一个孩子 ( ) `signal.pid`，但是第二个进程的 PID（可能是因为它是 sudo ）`signal.pid`与`top | grep`
*   `process`我还尝试使用节点模块终止进程：

    ```
    process.kill(this.current.pid,'SIGINT'); 
    ```

    这也不起作用。

*   我宁愿避免使用 Node 在两个进程之间进行管道传输，因为我在低内存环境中运行它

我怀疑管道 bash 进程在某些方面是独一无二的，但我对 bash 的结局有点不满意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T11:30:36.530

尝试

```
process.kill(-signal.pid); 
```

终止整个进程组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T18:54:53.453

我只记得我有一个类似的问题并通过使用 awk 推送命令来解决它，

```
awk '{system("avconv -i http://8273.live.streamtheworld.com:3690/WQHTFMAAC_SC -f wav -ac 1 -ar 22050 - | sudo ./pifm -")}'
PID=$!

setTimeout(function() {
    sudo kill $PID #(Can try to force it with kill -9 instead)
},10000) 
```

这样你就真的杀死了拥有该命令的进程。我不确定它是否会在您遇到困难的情况下起作用。告别朋友希望我帮助你！

# node.js - Node.js 中具有唯一随机标记的 URL

> ID：15915458
> 
> 赞同：1
> 
> 时间：2013-04-10T01:33:27.087
> 
> 标签：node.js, token

对于我的项目，我希望用户在到达网站时被重定向到他们自己的唯一网址。

例如，用户访问 mydomain.com 他们被重定向到 mydomain.com/xyz123

我有这个工作。但是我有两个问题：

1.  **理想情况下，随机令牌应该**有多少个字符？**（是否有计算代币总量的公式？）**
***   如何**阻止机器人**不断访问网站并占用这些令牌？**

 **谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:03:21.880

1.  这取决于您希望拥有多少访问者（用户？）。如果您只使用拉丁字母和数字，并且区分大小写，那么每个字符（26 * 2 + 10）为您提供 62 种唯一可能性，因此 62^n 其中 n 是 URL 中的字符数。62^5 刚刚超过 9.16 亿，应该会持续一段时间。
2.  这要困难得多。基本上，您需要查看用户代理字符串并确定访问者是否是机器人。如果是，请不要费心重定向它们。请参阅：[如何使用 php 识别机器人？](https://stackoverflow.com/questions/422969/how-to-recognize-bots-with-php)**

# html - 在交互式 PDF 中加载 HTML5 拖放问答

> ID：15915460
> 
> 赞同：0
> 
> 时间：2013-04-10T01:33:45.827
> 
> 标签：html, drag-and-drop, html5-canvas

我们目前有一本带有热点的交互式 pdf 书籍，供学生教授社会科学。一旦在 pdf 中单击热点，它就会在弹出窗口中加载以下全部使用 Flash 制作的数据：

1.  加载弹出窗口时增长的条形图
2.  就像在 PowerPoint 中一样，在点击时加载的标题。一个标题在另一个之下。所以每次点击都会加载另一个标题
3.  拖放问题的回答 - 最好选择拖动问题的答案并在不正确时使其反弹。
4.  视频

我们希望所有这些都用 HTML5 制作，但我们不确定我们是否可以做到这一切并使其与现在用 Flash 制作的一样好。

*让我们专注于我需要使用 HTML5 运行的一项*

**拖放问答**

[根据（jQuery 插件）在多项选择测验中拖放答案](https://stackoverflow.com/questions/12769639/jquery-plugin-to-drag-drop-answers-in-multiple-choice-quiz)似乎不存在拖放问题的答案。拖放当然可以，但也许还有更多代码可以用来拖动问题的答案并确认答案是否正确？

**更新**

Moodle 确实使用拖放匹配 2 年左右，所以有可能：[https](https://moodle.org/mod/forum/discuss.php?d=165923) ://moodle.org/mod/forum/discuss.php?d= 165923 需要看看我是否可以为 WordPress 重构他们的代码或独立使用。

有没有人有这方面的经验？当这个脚本或另一个脚本被拖动到错误的框或区域时，是否可以使拖动的答案反弹？

# c# - 具有完整对象访问的 LINQ Group-by

> ID：15915464
> 
> 赞同：3
> 
> 时间：2013-04-10T01:34:17.420
> 
> 标签：c#, linq

我想要用代码更好地解释。我有这个查询：

```
var items = context.Items.GroupBy(g => new {g.Name, g.Model})
                .Where(/*...*/) 
                .Select(i => new ItemModel{
                                Name=g.Key.Name,
                                SerialNumber = g.FirstOrDefault().SerialNumber //<-- here
                                     }); 
```

有没有更好的方法来获取序列号或密钥中未使用的其他一些属性？我能想到的唯一方法是使用 FirstOrDefault。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:26:19.980

为什么不通过您声明的匿名类型将序列号作为密钥的一部分包含在内：

```
var items = context.Items.GroupBy(g => new {g.Name, g.Model, g.SerialNumber })
            .Where(/*...*/) 
            .Select(i => new ItemModel {
                    Name=g.Key.Name,
                    SerialNumber = g.FirstOrDefault().SerialNumber //<-- here
             }); 
```

或者，或者，使您的对象成为关键：

```
var items = context.Items.Where(...).GroupBy(g => g)
    .Select(i => new ItemModel {...}); 
```

有时更容易理解查询语法（在这里，我将`Item`对象投影为键的一部分）：

```
var items = from i in context.Items
            group i by new { Serial = g.Serialnumber, Item = g } into gi
            where /* gi.Key.Item.GetType() == typeof(context.Items[0]) */
            select new ItemModel { 
                 Name = gi.Key.Name, 
                 SerialNumber = gi.Key.Serial 
                 /*...*/ 
            }; 
```

编辑：您可以尝试在投影后进行分组，如下所示：

```
var items = context.Items.Where(/*...*/).Select(i => new ItemModel { /*...*/})
    .GroupBy(g => new { g.Name, g.Model }); 
```

你可以从中得到一个 `IGrouping<AnonymousType``1, IEnumerable<ItemModel>>`，以你的任意`group by`作为键，你的 ItemModels 作为分组集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:03:44.073

我强烈建议您不要这样做。序列号是任意选择的，因为您在查询中没有排序。如果您确切地指定选择哪个序列号会更好，如果查询以与“上次”不同的顺序返回项目，这并不奇怪。

话虽如此，我认为投影分组并选择您需要的字段并获取第一个结果会更干净。它们都将具有相同的键值，因此将保持不变，然后您可以添加所需的任何其他字段。

```
var items = context.Items.GroupBy(i => new { i.Name, i.Model })
    .Where(/*...*/) 
    .Select(g =>
        g.OrderBy(i => i.Name).Select(i => new ItemModel
        {
            Name = i.Name,
            SerialNumber = i.SerialNumber,
        }).FirstOrDefault()
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:18:44.220

由于您需要所有数据，因此您需要将所有组数据存储到您的值中（在 KeyValuePair 中）。

我面前没有确切的语法，但它看起来像：

```
/* ... */
.Select(g => new {
                     Key = g.key,
                     Values = g
                 }); 
```

之后，您可以循环访问`Key`以获取您的`Name`组。在该循环内部，包含一个循环`Values`以获取您的`ItemModel`（我猜这是包含 1 个元素的对象）。

它看起来像：

```
foreach (var g in items) 
{ 
    Console.WriteLine("List of SerialNumber in {0} group", g.Key); 
    foreach (var i in g.Values) 
    { 
        Console.WriteLine(i.SerialNumber); 
    } 
} 
```

希望这可以帮助！

您可能想查看[Linq 101 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)以获取有关不同查询的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:15:16.467

如果序列号对于名称和型号是唯一的，则应按对象将其包含在您的组中。

如果不是，那么您有一个按名称和型号列出的连续剧列表，并且选择 first 或 default 可能是完全错误的，也就是说，我想不出您想要这样的场景。

# python - linux mod_wsgi 的 Django 部署问题

> ID：15915465
> 
> 赞同：0
> 
> 时间：2013-04-10T01:34:22.317
> 
> 标签：python, django, apache, mod-wsgi

在 linux 服务器机智和 mod_wsgi 上部署我的 django 应用程序后，我遇到以下错误 -

```
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229] mod_wsgi (pid=20033): Exception occurred processing WSGI script '/var/www/html/appletrade/django.wsgi'.
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229] Traceback (most recent call last):
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 272, in __call__
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     response = self.get_response(request)
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 169, in get_response
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 218, in handle_uncaught_exception
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     return callback(request, **param_dict)
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/utils/decorators.py", line 93, in _wrapped_view
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     response = view_func(request, *args, **kwargs)
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/views/defaults.py", line 30, in server_error
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     t = loader.get_template(template_name) # You need to create a 500.html template.
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/template/loader.py", line 157, in get_template
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     template, origin = find_template(template_name)
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]   File "usr/lib/python2.6/site-packages/django/template/loader.py", line 138, in find_template
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229]     raise TemplateDoesNotExist(name)
[Wed Apr 10 05:21:52 2013] [error] [client 117.199.125.229] TemplateDoesNotExist: 500.html 
```

我无法获得我错过的配置。请帮我。

如果需要有关配置的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:36:17.000

在 debug=False 时部署 Django。您必须`500.html`在您的模板路径之一中包含一个模板。您可以只创建一个名为的空文件`500.html`

文档中的更多信息：

[https://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view](https://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view)

# lync - 如何获取在 Lync 2013 中单击的联系人的电话号码？

> ID：15915466
> 
> 赞同：0
> 
> 时间：2013-04-10T01:34:27.753
> 
> 标签：lync, lync-client-sdk

我想知道获取在 Lync 中右键单击联系人并选择呼叫然后单击号码时单击的电话号码的正确方法。

预期是一个带有被点击号码的电话字符串。

有人可以概述一下我们在这种情况下将使用的事件以及检索号码的代码吗？

目前，我正在使用该`ConversationManager.ConversationAdded`事件并从联系人端点 URI 中检索号码，但这仅在一半时间内有效，因为有时即使我点击了实际的电话号码，默认端点也会以 SIP 字符串的形式出现。

这里是代码。

```
Private Sub ConversationManager_ConversationAdded(ByVal sender As Object, ByVal e As Microsoft.Lync.Model.Conversation.ConversationManagerEventArgs) Handles m_lyncConversationManager.ConversationAdded

Dim ConvParticipants As IList(Of Participant) = e.Conversation.Participants
Dim ContactURI() As String = ConvParticipants.Item(1).Contact.Uri.ToString().Split(":")
If e.Conversation.Modalities(ModalityTypes.AudioVideo).State = ModalityState.Connecting Then

Dim outboundContact As Contact = ConvParticipants.Item(1).Contact
Dim _ContactSettings As IDictionary(Of ContactSetting, Object) = outboundContact.Settings
Dim outObject As Object = Nothing
Dim PhoneNumber() As String

If _ContactSettings.TryGetValue(ContactSetting.DefaultContactEndpoint, outObject) Then
PhoneNumber = DirectCast(outObject, ContactEndpoint).Uri.Split(":") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-18T17:16:53.553

我假设你想要这个用于音频/视频通话。

你必须像你一样得到参与者，但你必须得到那个参与者的模态，然后得到端点。

C#代码：

```
ContactEndpoint ep = Participant.Modalities[ModalityTypes.AudioVideo].Endpoint 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:55:28.353

很可能您会得到一个带有电话参数的 Sip Uri，如下所示：`sip:user@domain.ext;user=phone`. 这会告诉您的 Lync 服务器您要与该用户发起电话呼叫，然后它将根据它所拥有的关于该用户的信息来决定如何进行相应的路由。

如果您想要电话号码，请获取`ContactCard`此联系人的电话号码，其中包含（除其他外）电话号码。

# java - 我不断收到字符串越界错误，有人可以帮助修复我的代码吗？

> ID：15915467
> 
> 赞同：1
> 
> 时间：2013-04-10T01:34:40.147
> 
> 标签：java, string, methods, char, return

错误是字符串索引超出范围：0。老实说，我什至不知道我所做的是否正确。

我必须创建一个 wholeName 方法和一个初始方法。他们的名字不言自明，几乎整个名字都会根据用户给我的内容打印出名字。如果他们只给了我一个名字和姓氏，那我就回来了。

缩写是相同的位。它从名称输入中获取第一个字母，并且只返回首字母。就像约翰·李·史密斯会是 JLS

谁能帮我理解什么是错的？如果你不能告诉我只是一个初学者。

我有一个测试程序，它返回错误 java.lang.StringIndexoutofboundexception: String index out of Range: 0 at java.lang.String.charAt(String.java:658) at PersonName.Initials(PersonName.java:131) atTestPersonName2。 testOneName(TestPersonName2.java:50)

```
import java.util.StringTokenizer;

public class PersonName
{

   private int numberOfNames ;
    private String firstName;
    private String middleName;
    private String lastName;
    private String suffixName;

        PersonName(){
        firstName=""; 
        middleName=""; 
        lastName=""; 
        suffixName=""; 
        numberOfNames=0;

    }
    public String getFirstName(){

        return firstName;
    }
    public String getMiddleName(){
        return middleName;
    }
    public String getLastName(){
        return lastName;
    }
    public String getSuffixName(){
        return suffixName;
    }
    public void setFirstName(String f){
        if((f.length() == 0) && (firstName.length() == 0)){
          numberOfNames = numberOfNames;   
        }else if(( f.length() > 0) && (firstName.length() == 0)){
            numberOfNames++;
        }
        firstName = f;
    }
    public void setMiddleName(String m){
         if((m.length() == 0) && (middleName.length() == 0)){
          numberOfNames = numberOfNames;   
        }else if(( m.length() > 0) && (middleName.length() == 0)){
            numberOfNames++;
        }
        middleName = m;
    }
    public void setLastName(String l){
         if((l.length() == 0) && (lastName.length() == 0)){
          numberOfNames = numberOfNames;   
        }else if(( l.length() > 0) && (lastName.length() == 0)){
            numberOfNames++;
        }
        lastName = l;
    }
    public void setSuffixName(String s){
        if((s.length() == 0) && (suffixName.length() == 0)){
          numberOfNames = numberOfNames;   
        }else if(( s.length() > 0) && (suffixName.length() == 0)){
            numberOfNames++;
        }
        suffixName = s;
    }
    public int getNumberOfNames(){

        return numberOfNames;
    }
        PersonName(String wholename)
    {   firstName=""; middleName=""; lastName=""; suffixName=""; numberOfNames=0;

        // store the name passed in to the method
       final int MAXNAMES = 4;
        String [] words = new String [MAXNAMES];
        String testname=wholename;
         // initialize number of names found
        int numnames=0;
         // on each iteration remove one name
       StringTokenizer st = new StringTokenizer(wholename);
       while (st.hasMoreTokens()) {
         words[numnames++]=st.nextToken();
     }

     if (numnames ==1)
      {  setFirstName(words[0]);}
     else if (numnames == 2)
      {  setFirstName(words[0]);
        setLastName(words[1]);
      }
     else if (numnames == 3)
      {  setFirstName(words[0]);
        setMiddleName(words[1]);
        setLastName(words[2]);
      }
     else if (numnames == 4)
      {  setFirstName(words[0]);
        setMiddleName(words[1]);
        setLastName(words[2]);
        setSuffixName(words[3]);

      }

    }
    public String EntireName(){
         String EntireName = " ";
        //String EntireName = getFirstName() + " " + getMiddleName() + " " + getLastName() + " " + getSuffixName();
        if(getNumberOfNames() == 0){
            EntireName = " ";
        }else if(getNumberOfNames() == 1){
            EntireName = getFirstName();
        }else if(getNumberOfNames() == 2){
            EntireName = getFirstName() + " " + getMiddleName();
        }else if(getNumberOfNames() == 3){
            EntireName = getFirstName() + " " + getMiddleName() + " " + getLastName();
        }else {
            EntireName = getFirstName() + " " + getMiddleName() + " " + getLastName() + " " + getSuffixName();
        }
        return EntireName;
    }
    public String Initials(){
        String f = getFirstName(); 
        char fChar = f.charAt(0);

        String m = getMiddleName();
        char mChar = m.charAt(0);

        String l = getLastName();
        char lChar = l.charAt(0);

        String s = getSuffixName();
        char sChar = s.charAt(0);

        String initial = " ";

          if(getNumberOfNames() == 0){
            initial = " ";
        }else if(getNumberOfNames() == 1){
            initial = fChar + ".";
        }else if(getNumberOfNames() == 2){
            initial = fChar + "." + mChar + ".";
        }else if(getNumberOfNames() == 3){
            initial = fChar + "." + mChar + "." + lChar + ".";
        }

        //String initial = fChar + "." +  mChar + "." + lChar ;
       return initial; 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:40:16.277

调用函数时，firstname 为空；现在在函数中，语句

```
 String f = getFirstName(); 
  char fChar = f.charAt(0); 
```

被执行。由于 f 为空（firstName =""; 最初已完成），因此 fChar 给出了该异常。

将其更新为：

```
 String s = getSuffixName();
    char sChar = s.charAt(0);

    String initial = " ";

      if(getNumberOfNames() == 0){
        initial = " ";
    }else if(getNumberOfNames() == 1){
        String f = getFirstName(); 
        char fChar = f.charAt(0);
        initial = fChar + ".";
    }else if(getNumberOfNames() == 2){
         String f = getFirstName(); 
         char fChar = f.charAt(0);
         String m = getMiddleName();
         char mChar = m.charAt(0);
         initial = fChar + "." + mChar + ".";
    }else if(getNumberOfNames() == 3){
         String f = getFirstName(); 
         char fChar = f.charAt(0);
         String m = getMiddleName();
         char mChar = m.charAt(0);
         String l = getLastName();
         char lChar = l.charAt(0);
        initial = fChar + "." + mChar + "." + lChar + ".";
    } 
```

**评论：**

请注意，在代码中，如果 getNumberOfNames() == 1，则假设它是名字。确保这始终有效。如果没有，那么您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:44:09.310

玛纳斯打败了我。但是，我还会检查您的设置方法（即 setFirstName()）

```
public void setFirstName(String f){
    if((f.length() == 0) && (firstName.length() == 0)){
      numberOfNames = numberOfNames;   
    }else if(( f.length() > 0) && (firstName.length() == 0)){
        numberOfNames++;
    }
    firstName = f; // FIRST NAME IS SET OUTSIDE OF CONDITION, WHETHER f.length() == 0 OR NOT
} 
```

此外，您的 numberOfNames 计数器有缺陷。如果只设置了中间名，则计数器将递增 1，但将返回 firstName 而不是 middle。尝试重新思考逻辑并重构代码

祝你好运 ：）

# objective-c - 如何使 SDWebImage 在 UITableViewCell 中保持大小

> ID：15915469
> 
> 赞同：1
> 
> 时间：2013-04-10T01:35:05.837
> 
> 标签：objective-c, uitableview, sdwebimage

cell.imageView 在第一次加载时正确显示。在 UITableViewCell 移出屏幕并重新打开后，突然 cell.imageView 的大小已更改为填充单元格的高度。当单元格设置为突出显示状态时也是如此。cell.imageView 在界面生成器中创建。

```
 (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    NSDictionary *dataType = [self.dataTypes objectAtIndex:indexPath.row];
    [cell.imageView setImageWithURL:[NSURL URLWithString:[dataType valueForKey:@"imageURL"]]
                   placeholderImage:nil];

    cell.titleLabel.text = [data valueForKey:@"name"];
    cell.descriptionLabel.text = [data valueForKey:@"info"];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:49:05.337

尝试以下答案并对其进行必要的更改

[https://stackoverflow.com/a/15331306/1713478](https://stackoverflow.com/a/15331306/1713478)

在这个答案中添加

```
cell.titleLabel.text = [data valueForKey:@"name"];
cell.descriptionLabel.text = [data valueForKey:@"info"]; 
```

只需使用**CustomCell**更改**SimpleTableCell**并在**imageURL**中输入您的图像 URL

 ****并进行其他必要的更改。

可能你的问题会解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:17:54.947

受到 Pratik 回答的启发，我决定从界面构建器中删除 UIImageView 并动态创建它。这可以按预期工作，但我不确定为什么会有所不同。可能与 IB 约束有关。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    NSDictionary *data = [self.dataTypes objectAtIndex:indexPath.row];

    UIImageView *thumb = [[UIImageView alloc]initWithFrame:CGRectMake(11, 10, 52, 74)];
    [thumb setImageWithURL:[NSURL URLWithString:[data valueForKey:@"imageURL"]]
                   placeholderImage:nil];
    [cell addSubview:thumb];
    [thumb release];

    cell.titleLabel.text = [data valueForKey:@"name"];
    cell.descriptionLabel.text = [data valueForKey:@"info"];

    return cell;
} 
```****

# sql-server - 在 SQL Server 中，如何比较两个日期并找出日期差是否在 3 个月内？

> ID：15915472
> 
> 赞同：0
> 
> 时间：2013-04-10T01:35:31.273
> 
> 标签：sql-server

有谁知道如何比较两个日期并找出 SQL Server 中的日期差异是否在 3 个月内？

例如，如果我有 2 个日期：

```
Start_Date = '2013-02-01'
End_Date = '2013-04-10' 
```

如何比较两个日期并确定 SQL Server 中的日期差异是否在 3 个月内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:37:42.680

研究使用`DATEDIFF`：

```
SELECT *
FROM YourTable
WHERE DATEDIFF(month, start_date, end_date) <= 3 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/cbaa9/1)

MSDN：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:08:42.040

这是使用您在问题中提供的两个日期的答案。我给了你两种方式。第一列是是否在3个月内的比较。第二列只是 SQL Server 系统函数的结果`DATEDIFF`。

```
DECLARE @Start_Date DATE = '2013-02-01',
        @End_Date   DATE = '2013-04-10'

SELECT CASE
           WHEN datediff(MONTH, @Start_Date, @End_Date) <= 3 THEN
               'True'
           ELSE
               'False'
       END AS [WithinThreeMonths]
     , datediff(MONTH, @Start_Date, @End_Date) [Months] 
```

# c++ - ISO 禁止声明没有类型的“标识符”。

> ID：15915476
> 
> 赞同：2
> 
> 时间：2013-04-10T01:35:56.697
> 
> 标签：c++, types, header, iso

好的，我知道这个特定问题有数百万种变体，我已经（拼命地）尝试过所有这些，看看它们是否适用，但无济于事。

目前我正在尝试在头文件中声明一个双端队列，由于提到的错误，该死的东西不会让我这样做。在我的很多项目中，同样的事情发生在我身上，我认为这只是我对 c++ 类语法知识缺乏的基本知识。

主文件

```
#include <iostream>
#include <fstream>
#include <string>
#include <deque>
#include "Card.h"
#include "random.h"

using namespace std;

void            createloop();
int             get_option();
deque <Card>    make_new_deck();
deque <Card>    load_new_deck();

int main()
{
    createloop();
    return 0;
} 
```

为了清楚起见，我没有显示文件的其余部分，我非常有信心这不是问题所在。错误出现在 Card.h 中：

卡片.h

```
#ifndef CARD_H
#define CARD_H

class Card
{
    public:
        Card();

        deque<string> param_name_deque;
        deque<double> param_value_deque;
        virtual ~Card();
    protected:
    private:
};

#endif // CARD_H 
```

卡片.cpp

```
#include "Card.h"

Card::Card()
{
    //ctor
}

Card::~Card()
{
    //dtor
} 
```

任何可以提供帮助的人 - 在此先感谢！当我明白这里有什么问题时，我会很高兴！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T01:38:42.670

您必须在头文件中包含 std::deque 和 std::string`card.h`

```
#include <string>
#include <deque> 
```

同时，

```
deque<string> param_name_deque;
deque<double> param_value_deque; 
```

应该

```
std::deque<std::string> param_name_deque;
std::deque<double> param_value_deque; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T01:39:14.257

声明and时需要指定`namespace`in ：`card.h``param_name_deque``param_value_deque`

```
std::deque<std::string> param_name_deque;
std::deque<double> param_value_deque; 
```

并包括正确的标题：

```
#include <string>
#include <deque> 
```

我会避免[使用命名空间 std](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)，它可能看起来很方便，但最终会给你带来问题。

# java - 新对象实例未被识别 - Java

> ID：15915478
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:36:24.723
> 
> 标签：java, instances

我无法让随机生成器实例被识别为对象，并且它不允许在另一个 .class 文件中使用。随机整数生成器的基本代码是这样的：

```
package RandomInstanceGenerator;
import java.util.Random;

/** Generate 10 random integers in the range 0..99\. */
public final class RandomInteger {

  public static final void main(String... aArgs){
    log("Generating 10 random integers in range 0..99.");

    //note a single Random object is reused here
    Random randomGenerator = new Random();
    for (int idx = 1; idx <= 10; ++idx){
      int randomInt = randomGenerator.nextInt(100);
      log("Generated : " + randomInt);
    }

    log("Done.");
  }

  private static void log(String aMessage){
    System.out.println(aMessage);
  }
} 
```

我试图让下面的代码作为新实例运行上面的代码。我尝试了几种从其他学习中对我来说很明显的方法，但它们使我失败了，因此我请求其他人的知识以帮助理解。我说，在理解我从另一个来源复制和粘贴基本代码时，它作为它自己的小 .class 运行。这是尝试创建新实例的代码：

```
package RandomInstanceGenerator;
import java.util.Random;
class Inst {
  public static void main (String args[]) {
    RandomInteger rig=new RandomInteger();
    rig.main(args);
  }
} 
```

我确定两者都需要编辑，希望我能解决这个问题，这样它对我有用。

尝试更改的列表：

1) 尝试导入 RandomInteger.class。返回的错误说它找不到符号“随机整数”。

我使用了代码`import RandomInstanceGenerator.RandomInteger;`。

2）稍后进行下一次尝试..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:24:10.777

当 Java 执行一个程序时，它会寻找一个`main`函数；在这种情况下，在您的第二堂课中。然后该类实例化您的第一个类（通过`new RandomInteger()`）。然后，您尝试调用第一个类的 main 方法。

但请注意，该方法标记为`static`。静态方法只能在类上执行，而不是在特定的实例化对象上执行。如果您要使用 RandomInteger.main() 您可能会得到不同的结果：

```
class Inst {
  public static void main (String args[]) {
    RandomInteger.main(args);
  }
} 
```

但请注意，这相当于只运行 RandomInteger 作为它自己的程序。如您所说，如果您想将程序作为对象上的方法运行，这就是您想要的：

```
public final class RandomInteger {
  private Random randomGenerator = new Random(); //A single object can reuse this component

  //function prints out x random numbers between low and high
  //Note that your function should do ONE thing, therefore do not make it also interpret
  //your program arguments!
  public void logXRandomNumbers(int x, int low, int high){ 
    log("Generating " + x + " random integers in range " + low ".." + high);

    int range = high - low;
    //you really should do a sanity check here to ensure the range is valid.

    //note a single Random object is reused here
    for (int idx = 1; idx <= x; ++idx){
      int nextResult = this.randomGenerator.nextInt(range) + low;
      log("Generated : " + nextResult);
    }

    log("Done.");
  }

  //This function is probably overkill
  private static void log(String aMessage){
    System.out.println(aMessage);
  }
} 
```

现在你所要做的就是从你的 main 函数中调用它：

```
public static void main (String args[]) {
  RandomInteger generator = new RandomInteger();
  generator.logXRandomNumbers(10, 0, 100);
} 
```

至于您的导入，两个类应该具有相同的包。为简单起见，让我们说一下`Generator`：

```
package Generator; 
```

只有你的第二个类（不是很好命名的 Inst）需要导入你的生成器/日志类：

```
import Generator.*; 
```

或者

```
import Generator.RandomInteger; 
```

确保这两个文件都位于名为“Generator”的同一目录中，并且您正在`javac`从上面的目录运行。

# php - CodeGear Delphi For PHP - 为什么 readItemIndex() 返回 -1？

> ID：15915481
> 
> 赞同：2
> 
> 时间：2013-04-10T01:35:27.960
> 
> 标签：php, delphi-for-php

`Window`我打算使用对象 ( )创建一个对话框`class Window extends QWidget`。

包含这些元素的对话框：

*   一个列表框 ( `ListBox1`)
*   2 个标签 ( `Label1`& `Label2`)
*   一个按钮

`onClick()`列表框的功能：

```
function ListBox1Click($sender, $params)
{
   $selected = $this->ListBox1->readItemIndex();
   $this->Label1->setCaption($selected); 
} 
```

这段代码的目的是从列表框中选择一个项目，然后显示 ( `ListBox1Click`) 它的索引`Label1`。

However, when an item is selected, `readItemIndex()`returns numerical value `-1.

包含的项目`ListBox1`

```
(Key / Value)
32432 / dfdfwsf
43543 / csdcsdc 
```

例如，如果我`dfdfwsf`从列表框中选择，它应该返回 index/key `32432`；而是`-1`返回。

# c# - 在 C# 中使用异步套接字连接到多个设备

> ID：15915484
> 
> 赞同：0
> 
> 时间：2013-04-10T01:37:41.173
> 
> 标签：c#, asp.net, sockets, tcp-ip

我正在编写一个 ASP.net 应用程序来从 Web 浏览器控制嵌入式设备。在用户操作中，ASP.net 应用程序需要向多个嵌入式设备发送命令并等待所有设备的响应并向最终用户显示成功消息。如果在与一台设备通信时发生错误，我们需要将其显示为错误消息。我通过回调了解了异步客户端示例。但我被卡住了如何放置一个循环来打开多个套接字并根据各个设备的响应更新状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:48:09.800

使用框架的 TcpClient？

将连接的地址保存在字典中并使用不同的线程进行轮询。

# asp.net - 在 IIS 7.5 上不使用 web.config 的目录浏览

> ID：15915486
> 
> 赞同：1
> 
> 时间：2013-04-10T01:37:56.680
> 
> 标签：asp.net, iis

我正在尝试为我的 IIS 服务器（Windows 2008 上的 7.5）具有只读访问权限的文件共享设置目录浏览。我尝试使用 IIS 管理器配置目录浏览，也尝试直接编辑`\Windows\system32\inetsrv\config\applicationHost.config`文件。

尽管每次我尝试在 IE 中查看我的虚拟目录时都尽了最大努力，但我遇到了一个`HTTP Error 500.19 (Cannot read configuration file)`例外。似乎 IIS 正在尝试在物理文件共享中查找 web.config 文件（显然不存在）。

鉴于我的文件共享永远是只读的，有没有办法在我的虚拟目录上配置目录浏览，而不需要物理目录中的 web.config 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:22:59.977

在花了相当多的时间之后，我终于承认了这个`HTTP 500.19`错误。尽管我尽最大努力说服它，但`IIS`坚持`web.config`存在于文件共享中。

我最终编写了自己的文件系统包装器，它基本上产生了与默认目录浏览器相同的输出，然后使用具有读取访问权限的专用服务帐户部署它。

# javascript - drawImage() 不工作

> ID：15915488
> 
> 赞同：0
> 
> 时间：2013-04-10T01:38:22.400
> 
> 标签：javascript, canvas, drawimage

我正在使用带有 PhoneGap 的 HTML、CSS 和 JavaScript 为 iPhone 和 Android 制作应用程序。我正在使用 HTML5 画布。我的 ctx.drawImage(); 功能不起作用，我不知道为什么。这是我的代码。

```
var imageReady = false;
var image = new Image();
image.onload = function () {
    imageReady = true;
};
image.src = "http://urlToImage.com";
ctx.drawImage(image, 0, 0, 300, 180); 
```

我验证了 src 链接并且它有效。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T01:42:13.357

您的`drawImage`调用应该在异步回调中（在加载图像时执行）。目前它在图像加载*之前*被调用。

```
var imageReady = false;
var image = new Image();
image.onload = function () {
    imageReady = true;
    ctx.drawImage(image, 0, 0, 300, 180);
};
image.src = "http://urlToImage.com"; 
```

# c# - 将图标添加到 Windows 8 应用程序的进度环

> ID：15915492
> 
> 赞同：0
> 
> 时间：2013-04-10T01:38:54.093
> 
> 标签：c#, xaml, windows-8

我正在构建一个 Windows 8 应用程序，我想将我的进度环更改为图片或图标，而不是像常规环那样的点。

有人对如何在 c# 或 xaml 中进行编码有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:19:49.910

您需要将[默认 ProgressRing 样式与 Control Template](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709924.aspx)一起使用，并以您想要的方式进行更改。如您所见，这种样式有 6 个椭圆，代表进度环中的点。您需要将它们中的每一个更改为您想要的任何内容：图像或矩形或其他内容。查看这篇文章[快速入门：样式控件（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465381.aspx)

# sql - 数据建模：带维度的项目（一对多）

> ID：15915500
> 
> 赞同：0
> 
> 时间：2013-04-10T01:39:40.870
> 
> 标签：sql, sql-server, database, sql-server-2008-r2, data-modeling

我需要有关如何正确建模项目记录及其所有相应维度的建议。
考虑以下：

```
|  ITEM_ID | ITEM_DESCRIPTION | ITEM_PRICE  | SIZE | LENGTH | COLOR
|   SH01   |   POLO SHIRT     |   22.95     | LARGE|        |
|   PA02   |  KHAKI PANTS     |    9.95     |  38  |   32   |
|   BR22   |   BRACELET       |   10.95     |      |        | GREEN 
```

所有物品都有不同的尺寸，可能/可能不会被其他物品使用。衬衫和裤子有尺寸和长度。然而，手镯只有一种颜色。

此外，随着新项目的添加（重量、图案等），可能需要新的尺寸。

我看过 EAV（实体属性值），但据我了解，使用这种模型进行报告将是一场噩梦。
如何管理每个项目的尺寸？任何和所有的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:32:45.463

通过使用“维度”一词，您暗示您正在构建星型模式。这些“可选”属性的物理表示主要取决于您的查询工具和所需的性能。

恕我直言，在维度建模中，您不应该害怕非常宽的维度，特别是如果它们使查询更容易。

如果用户对包括手表和裤子在内的*所有*产品尺寸进行查询，将手表等放入 N/A 尺寸是否有意义？

EAV 在许多方面与维度建模相反。维度建模是通过在 ETL 过程中重新排列数据来使查询尽可能快速和简单。

如果您找到预先证明的设计方法并坚持下去，设计通常会更容易。

# asp.net - 获取绑定到超链接的asp.net listview中的选定ID

> ID：15915502
> 
> 赞同：0
> 
> 时间：2013-04-10T01:39:54.047
> 
> 标签：asp.net

我是asp.net的新手，请原谅我的新手问题。我有一个列表视图，它显示所有项目信息（项目 ID、项目名称）。我将项目名称绑定到超链接控件。现在我想做的是，当我单击超链接时，我想获取 ID 并导航项目详细信息页面。我尝试使用选定的索引，但它仍然返回 null。这是我的代码。

关于listview itemTemplate 代码

```
<asp:HyperLink ID="HyperLink1" runat="server" 
NavigateUrl="ItemDetails.aspx"> <%# Eval("[ItemName]") %> 
</asp:HyperLink>

<asp:Label ID="Label1" runat="server"  Text='<%# Eval("[ItemID]") %>'/> 
```

请帮助。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:10:55.157

我在 ItemTemplate 中使用 LinkBut​​ton 而不是超链接 如果您想将 selectedId 传递到下一页，您可以使用 Query String 传递

```
<asp:TemplateField HeaderText="Edit" HeaderStyle-HorizontalAlign="Center" HeaderStyle-Width="120px">
 <ItemTemplate>
 <asp:LinkButton ID="lnk_ViewDetails" runat="server" Text='View Details' PostBackUrl='<%#"~/ViewDetailss.aspx?Id="+Eval("ID")%>'></asp:LinkButton>
 </ItemTemplate>
  </asp:TemplateField> 
```

如果你想加密查询字符串请参考[这个链接](http://www.codeproject.com/Articles/25719/Query-string-encryption-for-ASP-NET)

# json - .NET NewtonSoft JSON 反序列化映射到不同的属性名称

> ID：15915503
> 
> 赞同：338
> 
> 时间：2013-04-10T01:39:56.200
> 
> 标签：json, c#-4.0, serialization, deserialization, json.net

我有以下从外部方收到的 JSON 字符串。

```
{
   "team":[
      {
         "v1":"",
         "attributes":{
            "eighty_min_score":"",
            "home_or_away":"home",
            "score":"22",
            "team_id":"500"
         }
      },
      {
         "v1":"",
         "attributes":{
            "eighty_min_score":"",
            "home_or_away":"away",
            "score":"30",
            "team_id":"600"
         }
      }
   ]
} 
```

我的映射类：

```
public class Attributes
{
    public string eighty_min_score { get; set; }
    public string home_or_away { get; set; }
    public string score { get; set; }
    public string team_id { get; set; }
}

public class Team
{
    public string v1 { get; set; }
    public Attributes attributes { get; set; }
}

public class RootObject
{
    public List<Team> team { get; set; }
} 
```

问题是我不喜欢`Attributes` *类名*和类中的字段`attributes` *名*`Team`。相反，我希望它被命名`TeamScore`，并从字段名称中删除`_`并给出正确的名称。

```
JsonConvert.DeserializeObject<RootObject>(jsonText); 
```

我可以重命名`Attributes`为`TeamScore`，但是如果我更改字段名称（`attributes`在`Team`类中），它将无法正确反序列化并给我`null`. 我该如何克服呢？

* * *

## 回答 #1

> 赞同：673
> 
> 时间：2013-04-10T02:55:50.737

[Json.NET - Newtonsoft](http://james.newtonking.com/)有一个`JsonPropertyAttribute`允许你指定 JSON 属性的名称，所以你的代码应该是：

```
public class TeamScore
{
    [JsonProperty("eighty_min_score")]
    public string EightyMinScore { get; set; }
    [JsonProperty("home_or_away")]
    public string HomeOrAway { get; set; }
    [JsonProperty("score ")]
    public string Score { get; set; }
    [JsonProperty("team_id")]
    public string TeamId { get; set; }
}

public class Team
{
    public string v1 { get; set; }
    [JsonProperty("attributes")]
    public TeamScore TeamScores { get; set; }
}

public class RootObject
{
    public List<Team> Team { get; set; }
} 
```

文档：**[序列化属性](http://www.newtonsoft.com/json/help/html/SerializationAttributes.htm)**

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2015-07-17T20:54:52.010

如果您想使用动态映射，并且不想用属性使模型混乱，这种方法对我有用

用法：

```
var settings = new JsonSerializerSettings();
settings.DateFormatString = "YYYY-MM-DD";
settings.ContractResolver = new CustomContractResolver();
this.DataContext = JsonConvert.DeserializeObject<CountResponse>(jsonString, settings); 
```

逻辑：

```
public class CustomContractResolver : DefaultContractResolver
{
    private Dictionary<string, string> PropertyMappings { get; set; }

    public CustomContractResolver()
    {
        this.PropertyMappings = new Dictionary<string, string> 
        {
            {"Meta", "meta"},
            {"LastUpdated", "last_updated"},
            {"Disclaimer", "disclaimer"},
            {"License", "license"},
            {"CountResults", "results"},
            {"Term", "term"},
            {"Count", "count"},
        };
    }

    protected override string ResolvePropertyName(string propertyName)
    {
        string resolvedName = null;
        var resolved = this.PropertyMappings.TryGetValue(propertyName, out resolvedName);
        return (resolved) ? resolvedName : base.ResolvePropertyName(propertyName);
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-24T16:06:35.207

添加到 Jacks 解决方案。我需要使用 JsonProperty 和 Serialize 反序列化，同时忽略 JsonProperty（反之亦然）。ReflectionHelper 和 Attribute Helper 只是获取属性列表或属性的帮助器类。如果有人真正关心，我可以包括在内。使用下面的示例，即使 JsonProperty 是“RecurringPrice”，您也可以序列化视图模型并获得“Amount”。

```
 /// <summary>
    /// Ignore the Json Property attribute. This is usefule when you want to serialize or deserialize differently and not 
    /// let the JsonProperty control everything.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    public class IgnoreJsonPropertyResolver<T> : DefaultContractResolver
    {
        private Dictionary<string, string> PropertyMappings { get; set; }

        public IgnoreJsonPropertyResolver()
        {
            this.PropertyMappings = new Dictionary<string, string>();
            var properties = ReflectionHelper<T>.GetGetProperties(false)();
            foreach (var propertyInfo in properties)
            {
                var jsonProperty = AttributeHelper.GetAttribute<JsonPropertyAttribute>(propertyInfo);
                if (jsonProperty != null)
                {
                    PropertyMappings.Add(jsonProperty.PropertyName, propertyInfo.Name);
                }
            }
        }

        protected override string ResolvePropertyName(string propertyName)
        {
            string resolvedName = null;
            var resolved = this.PropertyMappings.TryGetValue(propertyName, out resolvedName);
            return (resolved) ? resolvedName : base.ResolvePropertyName(propertyName);
        }
    } 
```

用法：

```
 var settings = new JsonSerializerSettings();
        settings.DateFormatString = "YYYY-MM-DD";
        settings.ContractResolver = new IgnoreJsonPropertyResolver<PlanViewModel>();
        var model = new PlanViewModel() {Amount = 100};
        var strModel = JsonConvert.SerializeObject(model,settings); 
```

模型：

```
public class PlanViewModel
{

    /// <summary>
    ///     The customer is charged an amount over an interval for the subscription.
    /// </summary>
    [JsonProperty(PropertyName = "RecurringPrice")]
    public double Amount { get; set; }

    /// <summary>
    ///     Indicates the number of intervals between each billing. If interval=2, the customer would be billed every two
    ///     months or years depending on the value for interval_unit.
    /// </summary>
    public int Interval { get; set; } = 1;

    /// <summary>
    ///     Number of free trial days that can be granted when a customer is subscribed to this plan.
    /// </summary>
    public int TrialPeriod { get; set; } = 30;

    /// <summary>
    /// This indicates a one-time fee charged upfront while creating a subscription for this plan.
    /// </summary>
    [JsonProperty(PropertyName = "SetupFee")]
    public double SetupAmount { get; set; } = 0;

    /// <summary>
    /// String representing the type id, usually a lookup value, for the record.
    /// </summary>
    [JsonProperty(PropertyName = "TypeId")]
    public string Type { get; set; }

    /// <summary>
    /// Billing Frequency
    /// </summary>
    [JsonProperty(PropertyName = "BillingFrequency")]
    public string Period { get; set; }

    /// <summary>
    /// String representing the type id, usually a lookup value, for the record.
    /// </summary>
    [JsonProperty(PropertyName = "PlanUseType")]
    public string Purpose { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-12T02:38:12.017

扩展[Rentering.com 的](https://stackoverflow.com/a/32766061/75500)答案，在需要处理多种类型的整个图表并且您正在寻找强类型解决方案的情况下，此类可以提供帮助，请参阅下面的用法（流畅）。它作为每种类型的黑名单或白名单运行。一个类型不能两者兼有（[Gist](https://gist.github.com/weitzhandler/9dd5575bea2393a8bff3165a0c73a8eb) - 还包含全局忽略列表）。

```
public class PropertyFilterResolver : DefaultContractResolver
{
  const string _Err = "A type can be either in the include list or the ignore list.";
  Dictionary<Type, IEnumerable<string>> _IgnorePropertiesMap = new Dictionary<Type, IEnumerable<string>>();
  Dictionary<Type, IEnumerable<string>> _IncludePropertiesMap = new Dictionary<Type, IEnumerable<string>>();
  public PropertyFilterResolver SetIgnoredProperties<T>(params Expression<Func<T, object>>[] propertyAccessors)
  {
    if (propertyAccessors == null) return this;

    if (_IncludePropertiesMap.ContainsKey(typeof(T))) throw new ArgumentException(_Err);

    var properties = propertyAccessors.Select(GetPropertyName);
    _IgnorePropertiesMap[typeof(T)] = properties.ToArray();
    return this;
  }

  public PropertyFilterResolver SetIncludedProperties<T>(params Expression<Func<T, object>>[] propertyAccessors)
  {
    if (propertyAccessors == null)
      return this;

    if (_IgnorePropertiesMap.ContainsKey(typeof(T))) throw new ArgumentException(_Err);

    var properties = propertyAccessors.Select(GetPropertyName);
    _IncludePropertiesMap[typeof(T)] = properties.ToArray();
    return this;
  }

  protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
  {
    var properties = base.CreateProperties(type, memberSerialization);

    var isIgnoreList = _IgnorePropertiesMap.TryGetValue(type, out IEnumerable<string> map);
    if (!isIgnoreList && !_IncludePropertiesMap.TryGetValue(type, out map))
      return properties;

    Func<JsonProperty, bool> predicate = jp => map.Contains(jp.PropertyName) == !isIgnoreList;
    return properties.Where(predicate).ToArray();
  }

  string GetPropertyName<TSource, TProperty>(
  Expression<Func<TSource, TProperty>> propertyLambda)
  {
    if (!(propertyLambda.Body is MemberExpression member))
      throw new ArgumentException($"Expression '{propertyLambda}' refers to a method, not a property.");

    if (!(member.Member is PropertyInfo propInfo))
      throw new ArgumentException($"Expression '{propertyLambda}' refers to a field, not a property.");

    var type = typeof(TSource);
    if (!type.GetTypeInfo().IsAssignableFrom(propInfo.DeclaringType.GetTypeInfo()))
      throw new ArgumentException($"Expresion '{propertyLambda}' refers to a property that is not from type '{type}'.");

    return propInfo.Name;
  }
} 
```

用法：

```
var resolver = new PropertyFilterResolver()
  .SetIncludedProperties<User>(
    u => u.Id, 
    u => u.UnitId)
  .SetIgnoredProperties<Person>(
    r => r.Responders)
  .SetIncludedProperties<Blog>(
    b => b.Id)
  .Ignore(nameof(IChangeTracking.IsChanged)); //see gist 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-04T13:12:01.627

我在序列化时使用 JsonProperty 属性，但在使用以下反序列化时忽略它们`ContractResolver`：

```
public class IgnoreJsonPropertyContractResolver: DefaultContractResolver
    {
        protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
        {
            var properties = base.CreateProperties(type, memberSerialization);
            foreach (var p in properties) { p.PropertyName = p.UnderlyingName; }
            return properties;
        }
    } 
```

只是将`ContractResolver`每个属性设置回类属性名称（从 Shimmy 的解决方案中简化）。用法：

```
var airplane= JsonConvert.DeserializeObject<Airplane>(json, 
    new JsonSerializerSettings { ContractResolver = new IgnoreJsonPropertyContractResolver() }); 
```

# objective-c - 如何测试 Objective-C 类以确定它是否响应静态选择器（类方法）？

> ID：15915518
> 
> 赞同：3
> 
> 时间：2013-04-10T01:41:11.307
> 
> 标签：objective-c

用一个简短的例子可以很容易地解释这一点。假设我有以下协议和类定义：

```
@protocol ProtocolA <NSObject>
@optional
+ (BOOL)methodA;
@end

@interface ClassA : NSObject <ProtocolA>
@end 
```

`ClassA`可以定义也可以不定义`methodA`。如果我正在使用 的实例`ClassA`和实例方法，我可以使用`respondsToSelector:`. 但是，在这种情况下，我想不出任何干净的方法来确定 if `ClassA`defined (respons to) `methodA`。

**编辑：** 我很傻，没有让我的例子足够具体，这意味着问题的答案并不完全是我问题的解决方案——所以我包含了更多代码和我收到的警告：

```
Class <ProtocolA> classRef = [ClassA class];

if([classRef respondsToSelector:@selector(methodA)]) {} 
```

上面的代码抛出以下警告：“`respondsToSelector:`找到实例方法''而不是类方法' `respondsToSelector:`'”

我现在才注意到，如果我明确地`classRef`转换为，`(Class)`那么警告就会消失。我仍然觉得这很奇怪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T01:42:56.790

`[[instance class] respondsToSelector:@selector(methodA)]`

类的每个实例都有一个指向它的类对象的指针，可以通过调用`class`. 这个对象（类是Objective C中的对象）可以`respondsToSelector:`像任何其他对象一样被探测。

# c++ - Qt中最快的代码更改像素动画

> ID：15915520
> 
> 赞同：1
> 
> 时间：2013-04-10T01:41:33.137
> 
> 标签：c++, qt, animation, optimization

我想通过将其像素的颜色更改相同的值来为小（100x20）图像设置动画。例如，将红色通道值每帧增加 1，然后再减少。图像具有 alpha 通道，动画速度为 30...100 fps（取决于平台；30 对于 linux 就足够了，但 windows 需要 ~70 才能看起来流畅）。

据我所知，在 QImage 中完成绘图更快，但使用 QPixmap 显示更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:02:28.990

我喜欢`QGraphicsEffect`s和`QPropertyAnimation`s。白色不会着色，但黑色会。

```
#include <QLabel>
#include <QPixmap>
#include <QGraphicsColorizeEffect>
#include <QTimerEvent>
#include <QPropertyAnimation>
#include <QShowEvent>
#include <QDebug>

class Widget : public QLabel
{
    Q_OBJECT
    Q_PROPERTY(qreal redness READ getRedness WRITE setRedness)

public:
    Widget(QWidget *parent = 0)
    {
        QPixmap p(300, 300);
        p.fill(Qt::black);
        this->setPixmap(p);
        colorize = new QGraphicsColorizeEffect();
        colorize->setColor(Qt::red);
        redness = 0;
        colorize->setStrength(redness);
        this->setGraphicsEffect(colorize);

        animation = new QPropertyAnimation(this,"redness");
        animation->setDuration(2000);
        animation->setLoopCount(10);
        animation->setStartValue(0.0);
        animation->setEndValue(1.0);
        animation->setEasingCurve(QEasingCurve::CosineCurve);
        animation->start();
    }

    ~Widget(){}
    qreal getRedness()
    {
        return redness;
    }
    void setRedness(qreal val)
    {
        redness = val;
        colorize->setStrength(redness);
        this->update();
//        qDebug() << redness;
    }

public slots:
    void showEvent(QShowEvent *)
    {
        animation->start();
    }

private:
    qreal redness;
    QGraphicsColorizeEffect * colorize;
    QPropertyAnimation * animation;

}; 
```

这是main.cpp

```
#include <QApplication>
#include "widget.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();

    return a.exec();
} 
```

希望有帮助。

# c# - 如何与同一台机器上的其他用户共享 SQL LocalDb？

> ID：15915521
> 
> 赞同：9
> 
> 时间：2013-04-10T01:41:36.120
> 
> 标签：c#, sql-server-2012, localdb

我正在寻找使用 sqllocaldb 命令实用程序的 share 命令在用户之间访问 LocalDb 数据库的方法，但我看不到在另一个用户中创建的数据库。

这是我的步骤：

1.  在 Windows 7 上登录用户 User1

2.  使用 sqlcmd 创建一个名为 test 的新数据库，如下所示

    sqlcmd -S (localdb)\v11.0 创建数据库测试

3.  与User2共享实例v11.0如下

    sqllocaldb 共享域\User2 v11.0 myinstance

4.  切换到用户 2

5.  如下登录共享实例

    sqlcmd -S (localdb)\.\myinstance

    从 sys.master_files 中选择名称

    上面的查询不显示测试数据库。

为什么我无法看到在用户 2 中共享后在用户 1 中创建的数据库？

我认为它必须基于博客（方法2）[http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-2-instance- Krzysztof Kozielczyk 的所有权.aspx#SharedLocalDB](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-2-instance-ownership.aspx#SharedLocalDB)但它没有。

任何帮助/建议表示赞赏。

谢谢 削价

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-19T12:40:39.790

这不起作用的原因是因为您发出了错误的命令。sqllocaldb.exe 的使用说明如下：

```
share|h ["owner SID or account"] "private name" "shared name" 
```

基于此，您的第二个命令应该是*创建*实例的 SID 或帐户，而不是您要与之共享实例的帐户。共享与机器上的*所有*帐户共享一个实例。

假设您的帐户创建了您要共享的实例，那么您应该发出的命令是：

```
sqllocaldb share v11.0 myinstance 
```

否则，它应该是：

```
sqllocaldb share "<account that created the instance>" v11.0 myinstance 
```

在任何一种情况下，您还需要确保您正在运行提升的命令窗口，以便可以成功共享它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T21:47:06.373

问题是 LocalDB 作为当前用户拥有的进程运行，这意味着每个用户都运行自己的 LocalDB 实例。这就是使其零配置且非常易于使用的原因。不幸的是，这也意味着很难拥有一个共享的 LocalDB 实例。我遇到了类似的问题，只是切换到使用 SQL Express 来开发一个我需要由多个用户在开发中访问的数据库。

# android - Android Dropbox Auth 屏幕曾经是意图，现在是网页？

> ID：15915533
> 
> 赞同：0
> 
> 时间：2013-04-10T01:42:44.470
> 
> 标签：android, authentication, android-intent, authorization, dropbox

我一直在研究启用应用程序的 Dropbox，当该人选择连接到 Dropbox 时，身份验证过程在应用程序内启动了一个意图，一旦弹出窗口，我就能够接受访问，应用程序照常恢复，一切都很好.

当我将代码交给实现时发生了一些变化，现在当我选择连接到 Dropbox 时，应用程序会启动一个网页进行身份验证而不是意图。此外，在我将应用程序授权到保管箱后，应用程序中不会调用“简历”。

我查看了通常的地方，但无法确定为什么会发生这种变化..想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:29:22.940

您最近是否获得了 Dropbox SDK 的更新版本？最近的更新使用了改进的授权流程。如果您的应用正在使用新流程，并且您还没有支持该流程的 Dropbox Android 应用版本，那么您的 API 应用将回退到使用基于浏览器的授权。一旦 Dropbox Android 应用在 Google Play 中更新，这种情况就会消失。

web-auth 流仍应以与委派身份验证流相同的方式将控制权返回给您的应用程序。如果您在那里发现问题，您应该联系 Dropbox 支持。您可以使用 dropbox.com/developers 上的“API 支持”链接提交工单

# ios - 为什么这个数组总是空的？

> ID：15915537
> 
> 赞同：1
> 
> 时间：2013-04-10T01:42:59.027
> 
> 标签：ios, objective-c, cocoa-touch, uiimagepickercontroller, core-image

我试图弄清楚如何从用户的相机胶卷中获取图像并在其上运行一些核心图像操作（检测面部）。我能够成功地将图像加载到 uiimageview 中，但由于某种原因，我无法使用该图像来使用核心图像检测人脸。有问题的数组是代码的最后一点，这个数组应该包含 CIFaceFeatures，但它一直是空的。我尝试过使用不同的图像，但仍然无法正常工作。有任何想法吗？

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
[self dismissViewControllerAnimated:YES completion:nil];
UIImage *image =  [info valueForKey:@"UIImagePickerControllerOriginalImage"];
self.facePicture.image = image;

CIImage* image = [CIImage imageWithCGImage:self.facePicture.image.CGImage];

CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                          context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];

NSArray* features = [detector featuresInImage:image]; //***features array is empty
NSLog(@"array count is %i",features.count); //returns 0
//Code continues with face detection stuff

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:59:22.673

尝试更改以下行

```
UIImage *image =  [info valueForKey:@"UIImagePickerControllerOriginalImage"]; 
```

至：

```
UIImage *image =  [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

重要的部分是从 using`@"UIImagePickerControllerOriginalImage"`到 using的转变`UIImagePickerControllerOriginalImage`。其原因`UIImagePickerControllerOriginalImage`是声明如下：

```
extern NSString *const UIImagePickerControllerOriginalImage; 
```

在其他地方，在 Apple 的实际实现文件中，`UIImagePickerControllerOriginalImage`实际定义如下：

```
NSString *const UIImagePickerControllerOriginalImage = @"someStringLiteral"; 
```

Apple 选择使用的实际字符串字面值可以是任何值，并且不一定必须与变量的名称相同。通过调用`[info objectForKey:@"UIImagePickerControllerOriginalImage"]`，您基本上是在假设实际是`UIImagePickerControllerOriginalImage` **，**`@"UIImagePickerControllerOriginalImage"`但不一定是这种情况。

我假设原始行导致返回值为`nil`，这意味着没有为 key 找到对象`@"UIImagePickerControllerOriginalImage"`。如果`image`是这样`nil`，那么其余的代码基本上会“默默地失败”。如果您按照代码进行操作，则基本上等同于执行以下操作：

```
self.facePicture.image = nil;

CIImage* image = [CIImage imageWithCGImage:NULL]; // likely returns nil

NSArray* features = [detector featuresInImage:nil]; //***features array is empty
NSLog(@"array count is %i", features.count); //returns 0 
```

# json - 泽西 JSON 上传失败

> ID：15915544
> 
> 赞同：0
> 
> 时间：2013-04-10T01:43:32.863
> 
> 标签：json, jaxb, glassfish, jersey, jax-rs

我有一个实体类，看起来像这样。

```
@XmlRootElement
public class ImageSuffix {

    @XmlAttribute
    private boolean canRead;

    @XmlAttribute
    private boolean canWrite;

    @XmlValue;
    private String value;
} 
```

我写的一个 JAX-RS 资源类看起来像这样。

```
@Path("/imageSuffixes")
public class ImageSuffixesResource {

    @GET
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public List<ImageSuffix> read() {
        // ...
    }

    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})    
    @PUT
    public void update(final List<ImageSuffix> imageSuffixes) {
        // ...
    }

    @GET
    @Path("/{name: .+}")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public Response readImageSuffix(@PathParam("name") final String name) {
        // ...
    }

    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    @PUT
    @Path("/{name: .+}")
    public void updateImageSuffix(@PathParam("name") final String name,
                                  final ImageSuffix imageSuffix) {
        // ...
    }
} 
```

这是结果

```
GET /imageSuffixes     in application/xml
PUT /imageSuffixes     in application/xml
GET /imageSuffixes/png in application/xml
PUT /imageSuffixes/png in application/xml

GET /imageSuffixes     in application/json
PUT /imageSuffixes     in application/json FAIL: 400
    -> The request sent by the client was syntactically incorrect (Bad Request)
GET /imageSuffixes/png in application/json
PUT /imageSuffixes/png in application/json FAIL: fields don't get values 
```

这里是`/imageSuffixes in application/json`.

```
{
    "imageSuffix": [
        {
            "$": "jpg",
            "@canRead": "true",
            "@canWrite": "true"
        },
        {
            "$": "bmp",
            "@canRead": "true",
            "@canWrite": "true"
        },
        {
            "$": "wbmp",
            "@canRead": "true",
            "@canWrite": "true"
        },
        {
            "$": "jpeg",
            "@canRead": "true",
            "@canWrite": "true"
        },
        {
            "$": "png",
            "@canRead": "true",
            "@canWrite": "true"
        },
        {
            "$": "gif",
            "@canRead": "true",
            "@canWrite": "true"
        }
    ]
} 
```

这是`/imageSuffixes/png in application/json`.

```
{
    "$": "png",
    "@canRead": "true",
    "@canWrite": "true"
} 
```

这是正常的还是泽西的错？

当我依赖以下依赖项时，它适用于一些不同的 JSON 输出。

```
<dependency>
  <groupId>com.fasterxml.jackson.jaxrs</groupId>
  <artifactId>jackson-jaxrs-json-provider</artifactId>
  <version>2.1.4</version>
</dependency> 
```

```
{
    "canRead": true,
    "canWrite": true,
    "value": "png"
} 
```

真正的问题是 GlassFish（带球衣）没有解析他（或她）打印出来的 JSON 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:36:49.253

通过细微的更改，您的代码对我来说就可以了。请注意，在您当前的配置中，您正在使用 Jackson 库来处理传入/传出的 JSON 消息。默认情况下，在反序列化数据时，如果遇到未知属性（即 JSON 中存在的属性，在 Java 对象上没有相应的属性映射），Jackson 将***失败。***避免此错误的一种方法是使用[`@@JsonIgnoreProperties`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonIgnoreProperties.html)注释。

```
@XmlRootElement
@JsonIgnoreProperties(ignoreUnknown=true)
public class ImageSuffix {

    @XmlAttribute
    private boolean canRead;

    @XmlAttribute
    private boolean canWrite;

    @XmlValue;
    private String value;
} 
```

似乎在测试接受值列表的资源方法时，您发送的是单个对象。确保发送一个实际的 JSON 数组：

```
[
    {
        "$": "jpg",
        "@canRead": "true",
        "@canWrite": "true"
    },
    {
        "$": "bmp",
        "@canRead": "true",
        "@canWrite": "true"
    }
] 
```

最后，在您使用的任何测试客户端中，不要忘记添加请求标头`Accept: application/json`和`Content-Type: application/json`.

# windows - 如何实现 WebServiceHost 身份验证？

> ID：15915545
> 
> 赞同：1
> 
> 时间：2013-04-10T01:43:36.293
> 
> 标签：windows, vb.net, web-services, http, webservicehost

我知道 webservicehost 类的身份验证不完全符合身份验证标准（当用户输入不正确的凭据时，返回 403 禁止而不是提示输入另一组凭据）。

我仍然想实现这个基本身份验证（会话开始时的用户名和密码，不需要 HTTPS - 见下图），因为它适合我对小型家庭项目的需求。

![我想要的身份验证类型](https://i.stack.imgur.com/CkmhA.png)

我为 myService 提供的代码如下：

```
Imports System.IO
Imports System.Text
Imports System.ServiceModel
Imports System.ServiceModel.Web
Imports System.ServiceModel.Channels

<ServiceContract()>
Public Class myService
    <OperationContract(), WebGet(UriTemplate:="/xml/{argument1}/{argument2}")>
    Public Function XML(argument1 As String, argument2 As String) As Stream
        requestCounter += 1
        Console.WriteLine("xml data request at " & DateTime.Now.ToString() & ", request count= " & requestCounter)
        Console.WriteLine(WebOperationContext.Current.IncomingRequest.UserAgent.ToString())
        Return _ReturnXML("<xmlresponse><data><argument1>" & argument1 & "</argument1><argument2>" & argument2 & "</argument2></data><server><serverlivesince>" & serverStart.ToString() & "</serverlivesince><pageservetime>" & DateTime.Now.ToString() & "</pageservetime><requestcount>" & requestCounter & "</requestcount></server></xmlresponse>")
        'returns the first two parameters, and the time and date
    End Function

    Private Shared Function _ReturnXML(_result As String) As Stream
        Dim data = Encoding.UTF8.GetBytes(_result)

        WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml; charset=utf-8"
        WebOperationContext.Current.OutgoingResponse.ContentLength = data.Length

        Return New MemoryStream(data)
    End Function
End Class 
```

然后我有类似的代码来返回 HTML 以及接受其他参数组合。

在我的 Main 类中，我将这个服务实例化并打开为：

```
Dim varWebService = New WebServiceHost(GetType(MyWebService), New Uri("http://0.0.0.0/"))
varWebService.Open() 
```

谁能给我提供代码来实现这个简单的身份验证？或者指点我一个详尽的教程？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T06:54:55.950

您可以通过继承来编写自定义 WebServiceHost 并更改一些默认参数，如下所示。

您的代码中唯一的变化是

```
Dim varWebService = New AuthenticatedWebServiceHost(GetType(MyWebService), New Uri("http://0.0.0.0/")) 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IdentityModel;
using System.IdentityModel.Selectors;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.ServiceModel.Security;
using System.ServiceModel.Description;

namespace StackOverflow
{
    public class AuthenticatedWebServiceHost : WebServiceHost
    {
        public AuthenticatedWebServiceHost(Type type, Uri url)
        {
            IDictionary<string, ContractDescription> desc = null;
            base.InitializeDescription(type, new UriSchemeKeyedCollection());
            base.CreateDescription(out desc);
            var val = desc.Values.First();

            WebHttpBinding binding = new WebHttpBinding();
            binding.Security.Mode = WebHttpSecurityMode.TransportCredentialOnly;
            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;

            base.Credentials.UserNameAuthentication.UserNamePasswordValidationMode = UserNamePasswordValidationMode.Custom;
            base.Credentials.UserNameAuthentication.CustomUserNamePasswordValidator = new CustomUserNamePasswordValidator();

            base.AddServiceEndpoint(val.ContractType, binding, url);
        }

        //Possible next question:
        //"How can I get the name of the authenticated user?"
        public static string UserName
        {
            get
            {
                if (OperationContext.Current == null) return null;
                if (OperationContext.Current.ServiceSecurityContext == null) return null;
                if (OperationContext.Current.ServiceSecurityContext.PrimaryIdentity == null) return null;
                return OperationContext.Current.ServiceSecurityContext.PrimaryIdentity.Name;
            }
        }

        public class CustomUserNamePasswordValidator : UserNamePasswordValidator
        {
            public override void Validate(string userName, string password)
            {
                //Your logic to validate username/password
                if (userName != password)
                    throw new SecurityAccessDeniedException();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T13:25:14.213

I4V 提供的答案就像一个魅力，转换为 VB 并在下面复制，以防其他人在花费大量时间搜索网络后需要它。

调用它的线路是按照 I4V 提供的代码。

```
Dim varWebService = New AuthenticatedWebServiceHost(GetType(MyWebService), New Uri("http://0.0.0.0/")) 
```

VB.Net代码

```
Imports System.IdentityModel.Selectors
Imports System.ServiceModel
Imports System.ServiceModel.Description
Imports System.ServiceModel.Security
Imports System.ServiceModel.Web

Public Class AuthenticatedWebServiceHost
    Inherits WebServiceHost

    Public Sub New(ByVal type As Type, ByVal url As Uri)
        Dim desc As IDictionary(Of String, ContractDescription) = Nothing
        MyBase.InitializeDescription(type, New UriSchemeKeyedCollection())
        MyBase.CreateDescription(desc)
        Dim val = desc.Values.First()
        Dim binding As WebHttpBinding = New WebHttpBinding()
        binding.Security.Mode = WebHttpSecurityMode.TransportCredentialOnly
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic
        MyBase.Credentials.UserNameAuthentication.UserNamePasswordValidationMode = UserNamePasswordValidationMode.Custom
        MyBase.Credentials.UserNameAuthentication.CustomUserNamePasswordValidator = New CustomUserNamePasswordValidator()
        MyBase.AddServiceEndpoint(val.ContractType, binding, url)
    End Sub

    Public Shared ReadOnly Property UserName As String
        Get
            If OperationContext.Current Is Nothing Then Return Nothing
            If OperationContext.Current.ServiceSecurityContext Is Nothing Then Return Nothing
            If OperationContext.Current.ServiceSecurityContext.PrimaryIdentity Is Nothing Then Return Nothing
            Return OperationContext.Current.ServiceSecurityContext.PrimaryIdentity.Name
        End Get
    End Property

    Public Class CustomUserNamePasswordValidator
        Inherits UserNamePasswordValidator

        Public Overrides Sub Validate(ByVal userName As String, ByVal password As String)
            If userName <> password Then Throw New SecurityAccessDeniedException()
        End Sub
    End Class
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T22:57:11.820

夏多，你是最棒的！谢谢！这就是我搜索了数周的内容！我扩展了 vb 代码以便将其与 https: VB.NET 一起使用：

```
Public Class AuthenticatedWebServiceHost
   Inherits WebServiceHost
    Public Sub New(ByVal type As Type, ByVal url As Uri, MyThumbprint As String)
        Dim desc As IDictionary(Of String, ContractDescription) = Nothing
        MyBase.InitializeDescription(type, New UriSchemeKeyedCollection())
        MyBase.CreateDescription(desc)
        Dim val = desc.Values.First()
        Dim binding As WebHttpBinding = New WebHttpBinding()
        'binding.Security.Mode = WebHttpSecurityMode.TransportCredentialOnly
        binding.Security.Mode = BasicHttpsSecurityMode.TransportWithMessageCredential
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic
        MyBase.Credentials.UserNameAuthentication.UserNamePasswordValidationMode = UserNamePasswordValidationMode.Custom
        MyBase.Credentials.UserNameAuthentication.CustomUserNamePasswordValidator = New CustomUserNamePasswordValidator()
        MyBase.Credentials.ClientCertificate.SetCertificate(System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine, System.Security.Cryptography.X509Certificates.StoreName.My, System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint, MyThumbprint)
        MyBase.AddServiceEndpoint(val.ContractType, binding, url)
    End Sub

    Public Shared ReadOnly Property UserName As String
        Get
            If OperationContext.Current Is Nothing Then Return Nothing
            If OperationContext.Current.ServiceSecurityContext Is Nothing Then Return Nothing
            If OperationContext.Current.ServiceSecurityContext.PrimaryIdentity Is Nothing Then Return Nothing
            Return OperationContext.Current.ServiceSecurityContext.PrimaryIdentity.Name
        End Get
    End Property

    Public Class CustomUserNamePasswordValidator
        Inherits UserNamePasswordValidator
        Public Overrides Sub Validate(ByVal userName As String, ByVal password As String)
            If userName <> password Then
                Console.WriteLine("Error: Access denied")
                Throw New SecurityAccessDeniedException()
            End If
        End Sub
    End Class
End Class 
```

# javascript - 在页面上加载屏幕 reload();

> ID：15915550
> 
> 赞同：0
> 
> 时间：2013-04-10T01:44:15.687
> 
> 标签：javascript, jquery, cordova

我有一个小型 Phonegap 应用程序，单击按钮我让它通过以下方式刷新页面：

window.location.reload();

它加载速度非常快。但是，虽然速度很快，但您可以看到一些元素在其他元素之前被加载。我想在这段时间里做一些加载屏幕，我认为这将是一个不错的选择。

对我来说最好的方法是什么？它不会在应用程序启动时，而是以某种方式与要求刷新页面的按钮相关联。

顺便说一句，我没有使用 Jquery Mobile 或 Zepto 。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:49:45.990

我对 phonegap 不太了解，但我相信这只是普通的 HTML、CSS 和 JS，不是吗？那么为什么不只是有一个获取数据的[AJAX 请求](http://api.jquery.com/jQuery.ajax/)，所以页面本身实际上并没有被刷新，而是容器内的数据。然后只需在包含加载程序信息（旋转 gif、加载等）的刷新调用的主体前[添加一个 div。](http://api.jquery.com/prepend/)然后在 ajax 回调中消失。

# java - 学习递归，调用类时出错

> ID：15915552
> 
> 赞同：0
> 
> 时间：2013-04-10T01:44:38.650
> 
> 标签：java

```
public class recursion  {

    public static void main(String[] args)

    {
        thisclass(0);
    }

    public static void thisclass(int z)
    {
        int x = 1;
        int y = 3;
        if (z==10)
        {
            System.out.println("Done");
        }
        else
        {
            System.out.println(x/y);
            x++;
            y= y+2;
            thisclass(z++);
        }
    }

} 
```

我现在正在学习递归，当我进入`thisclass`方法中的 else 语句时，在打印出异常数量的零后出现错误。

我希望程序做的是运行 10 次并按照 Print 1/3 2/5 3/7 等的方式执行一些操作。

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:48:39.717

这一行：

```
thisclass(z++); 
```

不做你认为它做的事。它递增“z”，然后在 z 的原始值上调用这个类。这很像：

```
int temp = z;
z = z + 1;
thisclass(temp); 
```

您想在这里使用 preincrement 而不是 postincrement：

```
thisclass(++z); 
```

DrinkenRabbit 和 Serdalis 发布的答案也是有效的。在您完成所有这些更改之前，它不会正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T01:53:00.030

据我所知（除了命名约定）三件事会导致您的程序无法按预期运行。

(1) 您在打印中进行整数除法，因此 1/3 将为 0（整数中没有小数）。

解决方案：将and更改为`int x`and 。`int y``double x``double y`

(2) 当您将 z 传递给递归调用时，您正在增加它，这意味着递归调用看不到新值，而是看到旧值。

解决方案：预增量 z `thisclass(++z)`。

(3) 您也可能意味着在您的方法之外拥有`x`和`y`声明，以便它们的更新值持续存在。（相反，您只需打印 10 次相同的值）。

解决方案：

```
double x = 1.0;
double y = 3.0;
public static void thisclass(int z){ ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T01:47:16.767

你得到所有这些`0`是因为你在做`integer division`，不支持`1/3`等等。

您应该更改代码以使用`float`'s 来`0`解决问题。

例如

```
float x = 1.0;
float y = 3.0; 
```

您还会在`y`每次调用时重置 的值，因此`y`将始终`3`在调用开始和`5`结束时进行。您应该检查 的值`z`以查看 的值`y`应该是多少。

的值也可以这样说`x`。

每次通话时都会出现，这将导致每次通话时的值`z`不会增加，您应该将通话更改为：[`post-incremented`](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)`z`

```
thisclass(++z); 
```

使价值[`pre-incremented`](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)。否则这个电话将永远持续下去。

另外，请不要调用您的方法`thisclass`，这很混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T01:49:51.537

在 else 条件中递增 x 和 y 不会影响递归调用变量。将递归视为对同一方法的新调用。因此，在进行递归调用时，x 和 y 被初始化回 1 和 3。您可以将 x 和 y 作为参数传递，以便可以将更新后的值传递给每个递归调用。这是解决这个问题的一种方法...

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T03:01:31.487

笔记：

*   最好使用调用递归函数本身的初始调用函数进行初始化

*   使用`static`数据，否则它们将不会通过递归调用保留

*   `recur(z++)`将像`recur(z)`导致无限重复一样执行，请`recur(z+1)`改用

代码：

```
public class recursion
{
    public static void main(String[] args)
    {
        startRecursive(0);
    }

    // using static data
    private static int x = 1, y = 3;

    // initial call
    public static void startRecursive (int initZ)
    {
        x = 1;
        y = 3;

        // avoid infinite recurrence
        if (initZ > 10) initZ = 0;

        recur(initZ);
    }

    // recursive function
    public static void recur(int z)
    {
        if (z == 10)
        {
            System.out.println("Done");
        }
        else
        {
            System.out.println(x/y);

            x += 1;
            y += 2;

            recur(z+1); // z++ will return z
        }
    }
} 
```

# apprequests - 我们可以对非游戏应用使用“请求”吗？

> ID：15915553
> 
> 赞同：2
> 
> 时间：2013-04-10T01:44:55.237
> 
> 标签：apprequests, facebook-app-requests, facebook-requests

我不清楚 Facebook 请求（用户对用户）是否只能用于游戏应用程序 - 或者其他基于 Web 的 FB 应用程序是否也可以使用请求。

我们有一个基于网络的 FB 应用程序 - 在我们的网站上，用户可以连接 FB 并开始筹款活动。我们希望用户能够邀请 FB 朋友查看他们的活动。但我们不清楚我们如何才能与我们的注册用户 FB 朋友交流。我们可以为此使用请求吗？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:49:41.270

如果您只是想邀请用户加入您的应用，[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)是最简单的方法：

```
FB.ui({method: 'apprequests',
      message: 'My Great Request'
    }, yourCallbackFunction); 
```

# rename - 如何为 Stata 12 中的所有变量添加公共前缀

> ID：15915561
> 
> 赞同：1
> 
> 时间：2013-04-10T01:46:41.587
> 
> 标签：rename, stata

我在一个 .dta 文件中有 100 个变量，我想在每个变量名之前添加一个前缀“1”。查看文档看起来我必须使用=。但这需要指定哪些变量。我如何将它用于所有变量？谁能帮我吗？（此外，命令“renpfix”已在 STATA 12 中被取代。）

编辑：想通了；代码是 .ren _all (prefix)=

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:39:04.733

作为记录，

诸如数字之类的数字作为`1`变量名中的第一个字符是非法的。

在 Stata 12中使用没有任何问题`renpfix`。它只是一个旧命令，可以执行更通用的许多事情之一`rename`，因此它被标记为过时，但如果你知道语法，它会只要您要求的是合法的，就可以工作。（如上所述，数字前缀是不合法的。）

“Stata”是正确的拼写。正如用“c”或“JAVA”写程序是错误的一样，“STATA”也不正确。

# erlang - Erlang 依赖未启动错误

> ID：15915564
> 
> 赞同：3
> 
> 时间：2013-04-10T01:46:46.307
> 
> 标签：erlang, dependencies

我正在尝试运行启动脚本，但最终出现以下错误。

```
{"init terminating in do_boot",{{case_clause,{error,{not_started,ranch}}},[{egs,ensure_started,1,[{file,"src/egs.erl"},{line,84}]},{egs,start,0,[{file,"src/egs.erl"},{line,49}]},{init,start_it,1,[]},{init,start_em,1,[]}]}} 
```

我可以编译具有多个依赖项的整个文件夹，这是唯一一个出错的文件夹。我使用'make'进行编译，它应该是'make run'才能运行，但这不起作用。这就是我收到此错误的原因吗？任何关于如何解决它的想法将不胜感激。

我从中得到错误的文件如下。

```
-module(egs).
-export([start/0, stop/0, global/1, warp/4, warp/5]). %% API.

%% Player and account-related types.

-type gid() :: 0..16#ffffffff.
-type lid() :: 0..1023 | 16#ffff.
-type character_slot() :: 0..3.
-export_type([gid/0, lid/0, character_slot/0]).

%% Location related types.

-type uniid() :: 21 | 26..254 | 16#ffffffff.
-type questid() :: 0..16#ffffffff. %% @todo What's the real max?
-type zoneid() :: 0..16#ffff. %% @todo What's the real max?
-type mapid() :: 0..9999.
-type entryid() :: 0..16#ffff. %% @todo What's the real max?
-type area() :: {questid(), zoneid(), mapid()}. %% @todo Probably remove later.
-type position() :: {X::float(), Y::float(), Z::float(), Dir::float()}.
-export_type([uniid/0, questid/0, zoneid/0, mapid/0, entryid/0,
area/0, position/0]).

%% API.

-spec start() -> ok.
start() ->
ensure_started(crypto),
ensure_started(public_key),
ensure_started(ssl),
ensure_started(cowboy),
ensure_started(ranch),
application:start(egs).

-spec stop() -> ok.
stop() ->
Res = application:stop(egs),
ok = application:stop(cowboy),
ok = application:stop(ranch),
ok = application:stop(ssl),
ok = application:stop(public_key),
ok = application:stop(crypto),
Res.

%% @doc Send a global message.
-spec global(string()) -> ok.
global(Message) when length(Message) > 511 ->
io:format("global: message too long~n");
global(Message) ->
egs_users:broadcast_all({egs, notice, top, Message}).

%% @doc Warp all players to a new map.
-spec warp(questid(), zoneid(), mapid(), entryid()) -> ok.
warp(QuestID, ZoneID, MapID, EntryID) ->
egs_users:broadcast_all({egs, warp, QuestID, ZoneID, MapID, EntryID}).

%% @doc Warp one player to a new map.
-spec warp(gid(), questid(), zoneid(), mapid(), entryid()) -> ok.
warp(GID, QuestID, ZoneID, MapID, EntryID) ->
egs_users:broadcast({egs, warp, QuestID, ZoneID, MapID, EntryID}, [GID]).

%% Internal.

-spec ensure_started(module()) -> ok.
ensure_started(App) ->
case application:start(App) of
ok -> ok;
{error, {already_started, App}} -> ok
end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:53:17.057

The order of application startup is important. In particular, `cowboy` depends on `ranch` and `crypto`. Also, `public_key` depends on `crypto` and must be started before `ssl`. The correct start order is:

```
ok = application:start(crypto),
ok = application:start(public_key),
ok = application:start(ssl),
ok = application:start(ranch),
ok = application:start(cowboy),
ok = application:start(egs). 
```

For applications built with Rebar, the startup dependencies are listed in `[app]/src/[app].app.src`. See the [LYSE chapter](http://learnyousomeerlang.com/building-otp-applications#the-application-resource-file).

The reason it didn't work out of the box is probably that EGS depends on Cowboy's master branch, which quite recently introduced Ranch as a dependency.

# c++ - 通过在c ++中传递地址来修改字符串

> ID：15915569
> 
> 赞同：-2
> 
> 时间：2013-04-10T01:47:34.887
> 
> 标签：c++, string

我想通过外部函数修改主函数中存在的字符串变量，方法是传递相同的地址。

下面是我写的代码

```
void change(char * str)
{
    str="Max";
}

void main() 
{    
    char a[]="Test";
    change(a);

    cout<<a;
} 
```

如果我错了请纠正我

请注意，我使用的是 Borland Turbo C++ 4.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:50:28.707

我猜你的意思是通过引用传递，你可以简单地通过引用外部函数传递给定的字符串，如下所示：

```
void modifyString( string& str)
{
   //modify the string
} 
```

在里面`main`，你可以调用这个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:09:19.393

你要这个：

```
void change(char * str)
{
    strcpy(str,"Max");
} 
```

回想一下指针是什么，指针本身不能仅更改它所指向的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T01:53:44.377

首先你不应该使用Turbo C/C++，它是很久以前最后一次更新的，

您可以按如下方式更改函数中的字符串，

```
void change(char * str)
{
   *(str+0)='M';
   *(str+1)='A';
   *(str+2)='X';
   *(str+3)='\0';
}

int main() 
{
  char a[]="Hello";
  change(a) ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:26:34.727

你问，

> “如果我错了，请纠正我”

呈现此代码后：

```
void change(char * str)
{
  str="Max";
}

void main() {

char a[]="Test";
change(a);
cout<<a;
} 
```

所以，这里是：

*   `str="Max";`
    只改变本地指针`str`。使用符合 C++11 标准的编译器，它甚至不会编译，因为`str`它被声明为`char*`while 文字`"Max"`是 type `char const [4]`，并且 C++11 不再支持从字符串文字到指向非的指针的隐式转换`const`。

*   `void main`
    无论哪种标准，都不会使用任何符合标准的 C 或 C++ 编译器进行编译。但是，Visual C++ 将在没有诊断的情况下编译它。并且可能旧的 turbo c++ 也是如此，但请注意，turbo c++*早于*第一个 C++ 标准（于 1998 年推出）。该标准要求普通托管 C++ 实现的`int`结果类型。`main`

*   `cout<<a;`
    `<iostream>`如果不包含并具有`using`声明或指令 ，则不会使用符合标准的编译器进行编译。请注意，这随着标准化而改变。在 1998 年标准之前，在 ARM C++ 中，您可以包含`<iostream.h>`和使用 unqualified `cout`.

用现代 C++ 编写程序的正确方法是

```
#include <iostream>    // std::cout, std::endl
#include <string>      // std::string
using namespace std;

string foo() { return "Max"; }

int main()
{
    string a = "Test";
    a = foo();    // Changed!
    cout << a << endl;
} 
```

[另一个答案](https://stackoverflow.com/a/15915735/464581)，在我写这篇文章时，你选择了“解决方案”，建议使用原始指针和`strcpy`，而不是**`std::string`**. 使用原始指针和数组是一个建议，如果你遵循它会让你不开心。例如，很容易在不经意间写入超出所提供缓冲区的末尾，从而造成灾难性的后果。所有权处理非常难以正确进行，等等。该建议可能是在*回答字面问题的 Stack Overflow 传统中给出的*不考虑问题的真正含义，这是获得 Stack Overflow 声誉积分的好方法（它让我觉得它们如此令人向往，愚蠢的 T 恤或任何真正不值得的东西），但代价是为他人制造严重问题，有点像为了偷一小块巧克力而伤害一些旁观者。

# python - 用 catch all re 不渲染 css 来捕获 url

> ID：15915570
> 
> 赞同：1
> 
> 时间：2013-04-10T01:47:35.217
> 
> 标签：python, google-app-engine, templates

我正在 Python 中的 Google App Engine 中的 webapp2 框架上构建一个应用程序。我一直使用 Jinja2 作为我的模板引擎和 Twitter Bootstrap 用于样式设置。在构建了一个不错的“layout.html”并让所有其他模板都继承自“layout.html”之后，我进行了部署。所有页面呈现属性，除了一个，它的 url 是动态的。

这是 WSGI 处理程序的样子：

```
webapp2.WSGIApplication = ([('/login', LoginPage),
                           ('/updates', Update),
                           ('/updates/.*', Individual)],
                           debug = True)

# as you can see I'm using the catchall regex for Individual 
```

**从功能上讲， Individual**处理的每个动态生成的 url 都可以正常运行。这是处理程序，再次，此处理程序中的所有内容都将被执行。

```
class Individual(Handler):
    def get(self):
            url_u = str(self.request.url)
            posit = url_u.find('updates')
            bus1 = url_u[posit+8:]
            bus = bus1.replace('%20', chr(32))
            b = BusUpdates.all()
            this_bus = b.order('-timestamp').filter('bus = ', bus).fetch(limit=10)
            name = users.get_current_user()
            user = None
            if name:
                    user = name.nickname()
            logout = users.create_logout_url(self.request.uri)

            self.render("individual.html", bus=bus, user=user, this_bus=this_bus, logout=logout) 
```

典型的 URL 如下所示： [http ://www.megabusfinder.appspot.com/updates/St%20Louis,%20MO-Chicago,%20IL-4-12-930AM-310PM](http://www.megabusfinder.appspot.com/updates/St%20Louis,%20MO-Chicago,%20IL-4-12-930AM-310PM)

这是我的 app.yaml 文件

```
application: megabusfinder
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /static/stylesheets
  static_dir: static/stylesheets

- url: /twitter-bootstrap-37d0a30
  static_dir: twitter-bootstrap-37d0a30

- url: /static/xml
  static_dir: static/xml

- url: .*
  script: main.app

builtins:
- remote_api: on

libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: latest 
```

现在，我以前有从我的“layout.html”继承的“individual.html”。大约一个小时前，我不再这样做了，我已经手动将我在“layout.html”中使用的所有必要引导程序添加到“individual.html”中。即使这样，也没有任何样式生效。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:03:59.747

问题是您正在为样式表使用相对 URL 路径，而不是绝对路径。你正在这样做：

```
<link href="styles/bootstrap.css" rel="stylesheet"> 
```

当你应该这样做时：

```
<link href="/styles/bootstrap.css" rel="stylesheet"> 
```

`href`问题在于，浏览器会通过将现有 URL 与您（或`src`JavaScript 文件）中提供的相对 URL 结合起来来请求相对 URL 。

在您的*根*页面上，浏览器向 megabusfinder.appspot.com/styles/bootstrap.css 发出请求。在您的非根页面上，它会请求 megabusfinder.appspot.com/some/sub/path + styles/bootstrap.css ... 不存在，导致 404（和无样式页面）。

提供前导斜杠可确保浏览器将当前路径*替换*`href`为路径，而不是组合路径。

有关如何合并 URI 的更多信息，请参阅[RFC 3986 。](http://www.ietf.org/rfc/rfc3986.txt)

# html - 如何使我的导航在不同的屏幕尺寸上完好无损？

> ID：15915571
> 
> 赞同：1
> 
> 时间：2013-04-10T01:47:41.887
> 
> 标签：html, css, cross-browser, navigation

我刚开始作为一名前端开发人员，我注意到很多我必须学习的东西。关键之一是我的屏幕目前是 13 英寸长，所以当我设计它时它看起来很完美，但是当我选择更大的尺寸时，比如 24 或更高，菜单选项看起来更靠左而不是居中或他们在我的屏幕尺寸上的样子。

我知道跨浏览器的问题，但从来没有这样的事情。展望未来，无论屏幕大小如何，确保网站看起来都一样的最佳方法是什么？我将非常感谢任何提示。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:26:10.337

尝试使“无论屏幕大小如何，网站看起来都一样”通常不是一个好主意。首先，*它看起来不一样*，其次，为不同的屏幕尺寸提供不同的样式是个好主意，尤其是非常小的屏幕尺寸（移动）。

当您搜索“响应式设计”时，您会发现大量相关信息。最重要的是使用相对单位，例如`%`和`em`而不是绝对单位，例如`px`. 当你想把事情集中起来时，你试过`text-align: center;`吗？

# css - 如果字体超过给定大小，则更改 css 属性

> ID：15915572
> 
> 赞同：0
> 
> 时间：2013-04-10T01:47:52.327
> 
> 标签：css

我想要一种简单的方法，可以针对低于 18px 的所有字体大小来应用较低的`font-weight`值。

目前这在 CSS 上可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:20:13.917

由于您没有提到内联样式或 css 样式，因此这是一种解决方案。虽然不优雅.. :) 对于内联样式（即使它不是使用内联样式的标准方式）

[http://jsfiddle.net/J3x4j/](http://jsfiddle.net/J3x4j/)

## html

```
<p style="font-size:11px;">11</p>
<p style="font-size:12px;">12</p>
<p style="font-size:13px;">13</p>
<p style="font-size:14px;">14</p>
<p style="font-size:15px;">15</p>
<p style="font-size:16px;">16</p> 
```

## CSS

```
[style*=font-size\:11px],[style*=font-size\:12px],[style*=font-size\:13px],[style*=font-size\:14px],[style*=font-size\:15px]
{
    color: blue;
    font-weight:normal !important;
}
p
{
font-weight:bold;
} 
```

对于 css 样式，您必须使用 jquery 或 javascript，据我所知，使用 css 您可以量化或应用数字表达式。 [http://jsfiddle.net/J3x4j/11/](http://jsfiddle.net/J3x4j/11/)

```
$('p').each(function(){
    //replace px or em or whatever unit
    var fontsize = parseInt($(this).css('font-size').replace('px'));
    if(fontsize < 18)
    {
        $(this).css('font-weight','normal');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:22:07.643

所以基本上，您希望 18px 以下的所有文本都不是粗体？基本上，所有超过 18px 的文本都是粗体。最简单的方法（最容易理解）就是制作不同的类。例如：

```
.twentypnt{
font-size:20px;
font-weight:bold;
}

.twelvepnt{
font-size:12px;
} 
```

或者，您可以编写一个 javascript 语句。

```
function checkWeight(){
if(parseInt(document.getElementById('thing').style.fontsize) > 18)
document.getElementById('thing').style.fontweight = "bold";
} 
```

我认为这行得通，但是你必须为每组文本运行它。

# r - termstrc 数据流导入 estim_nss dyncouponbonds

> ID：15915575
> 
> 赞同：0
> 
> 时间：2013-04-10T01:48:26.730
> 
> 标签：r

我正在尝试使用 termstrc 来计算 nelson siegal parm 估计的时间序列。我试图让下面的代码运行，但我认为我的数据格式不正确。我不确定如何正确地将数据组织为“dyncouponbonds”类。我得到的错误是：

(pos_cf[i] + 1) 中的错误：pos_cf[i + 1] : NA/NaN 参数另外：警告消息：在 max(n_of_cf) 中：max 没有非缺失参数；返回-Inf

抱歉，如果我没有以正确的格式询问等。第一次使用 stackoverflow

```
importdatastream <- function(datafiles){
  #datafiles = c("france S.csv", "france AC.csv", "france CP.csv")

  rawdata <- read.csv(datafiles[1], dec=".",sep=",",colClasses = "character")
  rawdata_AC <- read.csv(datafiles[2], dec=".",sep=",",colClasses = "character", header=TRUE, check.names=FALSE)
  rawdata_CP <- read.csv(datafiles[3], dec=".",sep=",",colClasses = "character", header=TRUE, check.names=FALSE)

  DATES <- as.character(as.Date(names(rawdata_AC)[-(1:2)], format="%d.%m.%y"))
  DATES <- paste(substring(DATES,9,10),substring(DATES,6,7),substring(DATES,1,4),sep="")

  AC <- rawdata[,"ACCRUED"]
  CP <- rawdata[,"PRICE"]

  dslist <- list()

  for(i in 1:length(DATES)){
    TODAY <- DATES[i]
    AC <- rawdata_AC[-(1:2)][,i]
    CP <- rawdata_CP[-(1:2)][,i]

    datastreamlist <- function(rawdata, TODAY, AC, CP){
      data <- list()
      data$ISIN <- rawdata[,"ISIN"]
      data$MATURITYDATE <- as.Date(rawdata[,"MATURITYDATE"],format="%d%m%Y")
      data$ISSUEDATE <- as.Date(rawdata[,"ISSUEDATE"],format="%d%m%Y")
      data$COUPONRATE <- as.numeric(rawdata[,"COUPONRATE"])
      data$PRICE <- as.numeric(CP)
      data$ACCRUED <- as.numeric(AC)
      data$CASHFLOWS <- list()
      data$TODAY <- as.Date(TODAY,format="%d%m%Y")

      NEXTCOUPON <- ifelse(as.Date(paste(rawdata[,"COUPONDATE"],substring(TODAY,5,8),sep=""),format="%d%m%Y") > data$TODAY,
                           paste(rawdata[,"COUPONDATE"],substring(TODAY,5,8),sep=""),
                           paste(rawdata[,"COUPONDATE"],as.character(as.numeric(substring(TODAY,5,8))+1),sep=""))
      NCOUPON <- as.numeric(substring(rawdata[,"MATURITYDATE"],5,8)) - as.numeric(substring(NEXTCOUPON,5,8))

      # cash flows ISIN
      data$CASHFLOWS$ISIN <- vector()
      for(i in 1:length(NCOUPON)){
        data$CASHFLOWS$ISIN <-  c(data$CASHFLOWS$ISIN,rep(data$ISIN[i],NCOUPON[i]+1))

      }

      # cash flows
      data$CASHFLOWS$CF <- vector()
      for(i in 1:length(NCOUPON)){
        data$CASHFLOWS$CF <- c(data$CASHFLOWS$CF,c(rep(data$COUPONRATE[i]*100,NCOUPON[i]),100+data$COUPONRATE[i]*100))
      }

      # cash flow dates
      data$CASHFLOWS$DATE <- vector()
      for(i in 1:length(NCOUPON)){
        data$CASHFLOWS$DATE <- c(data$CASHFLOWS$DATE,paste(rawdata[i,"COUPONDATE"],as.numeric(substring(NEXTCOUPON[i],5,8)) + seq(0,NCOUPON[i]),sep=""))
      }

      data$CASHFLOWS$DATE <- as.Date(data$CASHFLOWS$DATE,format="%d%m%Y")

      data
    }
    dslist[[i]] <- datastreamlist(rawdata, TODAY, AC, CP)
  }
  dslist
}  

datafiles = c("france S.csv", "france AC.csv", "france CP.csv")
govbondsts <- importdatastream(datafiles)

class(govbondsts)="couponbonds"
#class(govbondsts)="dyncouponbonds"

ns_res <- estim_nss(govbondsts, c("FRANCE"), matrange="all" ,method = "ns", tauconstr = list(c(0.2, 7, 0.2)), optimtype = "allglobal") 
```

新的工作 R 代码：

```
 if (!("termstrc" %in% installed.packages())) install.packages("termstrc")
library(termstrc)

datafiles = c("france S.csv", "france AC.csv", "france CP.csv")

rawdata <- read.csv(datafiles[1], dec=".", sep=",", colClasses = "character")
rawdata_AC <- read.csv(datafiles[2], dec=".",sep=",",colClasses = "character", header=TRUE, check.names=FALSE)
rawdata_CP <- read.csv(datafiles[3], dec=".",sep=",",colClasses = "character", header=TRUE, check.names=FALSE)

DATES <- as.character(as.Date(names(rawdata_AC)[-(1:2)], format="%d.%m.%y"))
DATES <- paste(substring(DATES,9,10),substring(DATES,6,7),substring(DATES,1,4),sep="")

AC <- rawdata[,"ACCRUED"]
CP <- rawdata[,"PRICE"]

dslist <- list()

for(i in 1:length(DATES)) {
  TODAY <- DATES[i]
  AC <- rawdata_AC[-(1:2)][,i]
  CP <- rawdata_CP[-(1:2)][,i]

  datastreamlist <- function(rawdata, TODAY, AC, CP){
    data <- list()
    data$ISIN <- rawdata[,"ISIN"]
    data$MATURITYDATE <- as.Date(rawdata[,"MATURITYDATE"],format="%d%m%Y")
    data$ISSUEDATE <- as.Date(rawdata[,"ISSUEDATE"],format="%d%m%Y")
    data$COUPONRATE <- as.numeric(rawdata[,"COUPONRATE"])
    data$PRICE <- as.numeric(CP)
    data$ACCRUED <- as.numeric(AC)
    data$CASHFLOWS <- list()
    data$TODAY <- as.Date(TODAY,format="%d%m%Y")

    NEXTCOUPON <- ifelse(as.Date(paste(rawdata[,"COUPONDATE"],substring(TODAY,5,8),sep=""),format="%d%m%Y") > data$TODAY,
                         paste(rawdata[,"COUPONDATE"],substring(TODAY,5,8),sep=""),
                         paste(rawdata[,"COUPONDATE"],as.character(as.numeric(substring(TODAY,5,8))+1),sep=""))
    NCOUPON <- as.numeric(substring(rawdata[,"MATURITYDATE"],5,8)) - as.numeric(substring(NEXTCOUPON,5,8))

    # cash flows ISIN
    data$CASHFLOWS$ISIN <- vector()
    for(i in 1:length(NCOUPON)){
      data$CASHFLOWS$ISIN <-  c(data$CASHFLOWS$ISIN,rep(data$ISIN[i],NCOUPON[i]+1))

    }

    # cash flows
    data$CASHFLOWS$CF <- vector()
    for(i in 1:length(NCOUPON)){
      data$CASHFLOWS$CF <- c(data$CASHFLOWS$CF,c(rep(data$COUPONRATE[i]*100,NCOUPON[i]),100+data$COUPONRATE[i]*100))
    }

    # cash flow dates
    data$CASHFLOWS$DATE <- vector()
    for(i in 1:length(NCOUPON)){
      data$CASHFLOWS$DATE <- c(data$CASHFLOWS$DATE,paste(rawdata[i,"COUPONDATE"],as.numeric(substring(NEXTCOUPON[i],5,8)) + seq(0,NCOUPON[i]),sep=""))
    }

    data$CASHFLOWS$DATE <- as.Date(data$CASHFLOWS$DATE,format="%d%m%Y")

    data
  }
  dslist[[i]] <- list(FRANCE=datastreamlist(rawdata, TODAY, AC, CP))
  class(dslist[[i]]) <- "couponbonds"
}

class(dslist) <- "dyncouponbonds"

dl_res <- estim_nss(dslist, c("FRANCE"), method = "dl", lambda = 1/3)
plot(dl_res) 
```

# c - 按顺序遍历x个节点

> ID：15915576
> 
> 赞同：0
> 
> 时间：2013-04-10T01:48:36.840
> 
> 标签：c, binary-tree, traversal

我知道这可能是一个简单的问题，但是自从我完成任何 C 编程以来已经有一段时间了。我正在尝试在 x 节点上执行中序遍历，其中 x 是我传递给函数的某个数字。我的中序函数递归地调用自己，在我的一生中，我无法弄清楚如何在其访问的 x 节点之后停止遍历。这是我的中序遍历函数：

```
void inorder(node h)
 {

     if (h != NULL)
     {
        inorder(h->l);

        printf(" %d\n",h->item);

        inorder(h->r);
     }
      return;

 } 
```

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:33:54.647

假设“访问次数”是您想要从有序遍历中打印出来的节点数。一种解决方案是让`inorder`函数返回要打印的节点数，并在遍历树时对其进行检查。

```
int inorder(node h, int x)
{
    // I mimic your current code. The code is indeed shorter, but it will
    // do extra recursion, compared to the other approach of checking
    // for the subtree and value of x before the recursive call.
    if (h != NULL && x > 0)
    {
        x = inorder(h->l, x);

        if (x > 0) {
            printf(" %d\n",h->item);
            x--;
        }

        x = inorder(h->r, x);
    }

    return x;
} 
```

实现中的另一个细微变化是将指针传递给包含 的变量`x`，并使用它来更新计数器。如果以这种方式编写，该函数不需要返回任何内容。

```
void inorder(node h, int *x)
{
    // I mimic your current code. The code is indeed shorter, but it will
    // do extra recursion, compared to the other approach of checking
    // for the subtree and value of x before the recursive call.
    if (h == NULL && *x > 0)
    {
        inorder(h->l, x);

        if (*x > 0) {
            printf(" %d\n",h->item);
            (*x)--;
        }

        inorder(h->r, x);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:01:54.030

试试这个 - 应该只适用于访问的 x 个节点（访问的节点数是被打印的候选节点）；

```
int inorder(node h, int x)
 {

     if (h != NULL && x > 0)
     {
        x = inorder(h->l, x);

        if (x > 0) {
           printf(" %d\n",h->item);
           x--;
        }
        if (h->r && x > 0)
           x = inorder(h->r, x);
     }
      return x;

 } 
```

[**编辑**：**@nhahtdh**在对访问的节点的定义进行了一些讨论并减少了 x 的值后，更正了此代码。工作测试代码可以在[这里](http://ideone.com/k9oOkH)看到。

# ios - 在 iOS 中将 iPodMusicPlayer 的音量调到 50%

> ID：15915578
> 
> 赞同：0
> 
> 时间：2013-04-10T01:48:41.193
> 
> 标签：ios, objective-c, mpmusicplayercontroller

我知道您可以轻松地[设置音乐播放器的音量属性](https://stackoverflow.com/questions/10286744/how-to-change-device-volume-on-ios-not-music-volume)，但我想像谷歌地图一样顺利地完成它，当他们使用画外音进行导航说明时。

我想知道最好的方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:31:14.117

我会尝试使用重复的 NSTimer。每次计时器触发时，您都会降低音量。当它达到目标值时，您会使计时器无效。

获得重复事件的其他方法（以便您可以随着时间逐渐分阶段做某事）是`DISPATCH_SOURCE_TYPE_TIMER`和 CADisplayLink。但我认为计时器可能是最简单的入门方法。

如果您正在播放预先存在的声音，则完全不同的解决方案是在开始播放*之前*对其应用淡出（然后以相同的音量播放，因为声音*本身会*淡出，请执行你看）。AVFoundation 为您提供了执行此操作的工具（例如`setVolumeRampFromStartVolume:toEndVolume:timeRange:`）。

# html - 在文本中间浮动图像

> ID：15915579
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:48:43.657
> 
> 标签：html, css

如何在如下图像周围环绕文字？

```
+----------------------------+
|----[This is text]----------|
|----------------------------|
|-------+-----------+--------|
|-------|           |--------|
|-------|  [Image   |--------|
|-------|    here]  |--------|
|-------+-----------+--------|
|----------------------------|
|----------------------------|
|----------------------------|
|----------------------------|
+----------------------------+ 
```

是的，我知道这无法做到，但如果将来提供此功能，我们会不会很高兴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:38:53.033

没有任何 CSS 属性可以做到这一点。我能想到的一件笨拙的事情是，如果您使用的是等宽字体，您可能可以使用 JavaScript 解决一些问题，但这会非常复杂。这将涉及找到图像的位置并在其后面手动留白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:41:45.280

它可以通过使用两种不同的分区来完成，一个放在右边，另一个放在左边。

# iphone - 在 Mpmovieplayer 或 Mpmusicplayer ios 中播放 youtube 视频

> ID：15915580
> 
> 赞同：0
> 
> 时间：2013-04-10T01:48:45.367
> 
> 标签：iphone, ios, objective-c, xcode, mpmovieplayercontroller

我想用 Mpmovieplayer 或 Mpmusicplayer 播放 youtube 视频。我想这样做是因为我需要让应用程序继续在后台模式下播放视频，而这在 uiwebview 中是完全不可能的。如果您能回答，请记住播放背景模式音频。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:54:43.903

您可以使用 MPMovieplayerviewcontroller 并且它看起来像 iPhone 的默认播放器。

这是我的答案：[如何从 url 为直播的摄像机播放直播](https://stackoverflow.com/questions/14352473/how-to-play-live-streaming-from-url-for-a-camera-that-broadcasting-live/14352956#14352956)

`FOR BACKGROUND:`对于后台播放，请在 ViewDidLoad 方法中写入以下行 -

```
NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
    newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL]; 
```

并对您的`info.plist`下图进行一些小改动： ![在此处输入图像描述](https://i.stack.imgur.com/hbLr8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T21:52:42.303

我成功找到了 UIWebView 的解决方案，在看到这个 hack [https://gist.github.com/romainbriche/2308668](https://gist.github.com/romainbriche/2308668)

在 IO5/6 和 IOS7 上是不同的。

您将遇到的问题是当应用程序进入后台时不会停止声音。我们在这里工作[https://github.com/0xced/XCDYouTubeVideoPlayerViewController/issues/10#issuecomment-34252488](https://github.com/0xced/XCDYouTubeVideoPlayerViewController/issues/10#issuecomment-34252488)

我找到了一些解决方案，但并不完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-02T13:05:25.000

在 didFinishLaunchingWithOptions 中编写 Given below 代码

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
NSError *setCategoryError = nil;

BOOL success = [audioSession setCategory:AVAudioSessionCategoryPlayback error:&setCategoryError];
if (!success) { NSLog(@"Error"); } else {NSLog(@"Success");}

NSError *activationError = nil;
success = [audioSession setActive:YES error:&activationError];
if (!success) { NSLog(@"Error"); } else {NSLog(@"Success");} 
```

# actionscript-3 - 调用 addEventListener 时是否必须设置 removeEventListener？

> ID：15915583
> 
> 赞同：2
> 
> 时间：2013-04-10T01:49:13.763
> 
> 标签：actionscript-3

我是ActionScript 3的初学者。最近我正在尝试使用`addEventListener`调用函数。我发现有一些示例`removeEventListener`在调用函数时添加了 a，例如：

```
public function Away3DMultiMarkerDemo()
    {
        addEventListener(Event.INIT, initIN2AR);
        super();
    }

    private function initIN2AR(e:Event = null):void
    {
        removeEventListener(Event.INIT, initIN2AR);

        in2arLib.init( workW, workH, maxPoints, maxReferences, 100, stage );
        in2arLib.setupIndexing(12, 10, true);
        in2arLib.setUseLSHDictionary(true);

        in2arLib.addReferenceObject( ByteArray( new DefinitionaData0 ) );
        in2arLib.addReferenceObject( ByteArray( new DefinitionaData1 ) );

        in2arLib.setMaxReferencesPerFrame(2);

        in2arLib.setMatchThreshold(40);

        intrinsic = in2arLib.getIntrinsicParams();

        initCamera();
        initAway3D();
        initText();
        initListeners();
    } 
```

`removeEventListener`我的问题是我每次打电话时都需要设置一个`addEventListener`吗？我做了一些研究，添加的目的`removeEventListener`是释放内存，否则程序会保留监听事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:27:05.497

当您不再需要监听器时，最好删除它们。但这是您在每种情况下都必须做出的决定。

默认情况下添加一个事件监听器将挂在它被添加到的事物的引用上。所以如果你给一个movieclip添加一个监听器，然后删除那个movieclip，它就不会被垃圾回收，因为事件监听器仍然有它的引用。出于这个原因，最好在删除过程中删除对象上的所有侦听器。当然你也可以在`addEventListener`方法中使用“弱引用”参数，这样监听器就不会阻止垃圾收集器销毁对象。

对于`Event.INIT`您示例中的事件；这应该只触发一次，因此事件处理程序是确保您删除侦听器的理想场所。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:50:25.323

不，如果您希望事件**只执行一次**，您只需执行此操作。当您不再需要侦听器时，您也会调用它，这样它就不会浪费内存。

如果您将它作为触发事件时调用的函数中的第一条语句调用，它将确保只调用一次侦听器。

# html - 输入字段宽度不是我设置的，未对齐。输入中的附加边框

> ID：15915584
> 
> 赞同：0
> 
> 时间：2013-04-10T01:49:31.213
> 
> 标签：html, css

[http://jsfiddle.net/HnnHf/1/](http://jsfiddle.net/HnnHf/1/)

试图理解我做错了什么。普通表格，我希望输入框均匀地填充单元格。在第一行，您会看到 2 个输入，第二行有一个跨单元格的输入。

他们的右侧不匹配。为什么？当我运行检查器时，它会显示额外的像素？

我的 HTML 的一部分：

```
<div style="width: 1000px; margin-left: auto; margin-right: auto; padding-left: 20px; padding-top: 10px;">
            <table>
                <tr>
                    <td style="width: 80px;"><label>From&nbsp;</label></td>
                    <td style="width: 120px;">
                        <input type="text" class="fill-space" />
                    </td>
                    <td style="width: 80px;"><label>To&nbsp;</label></td>
                    <td style="width: 120px;">
                        <input type="text" class="fill-space" />
                    </td>
                    <td style="width: 80px;"><label>Sort by&nbsp;</label></td>
                    <td></td>
                </tr>
                <tr>
                    <td colspan="6">&nbsp;</td>
                </tr>
                <tr>
                    <td></td>
                    <td colspan="3">
                        <input type="text" class="search" />
                    </td>
                    <td></td>
                    <td>
                        Refresh button
                    </td>
                </tr>
            </table>
        </div> 
```

风格：

```
 td label {
        width: 100%;
        color: #F1F1F1;
        text-align: right;
        vertical-align: central;
    }

    input.fill-space {
        width: 100%;
    }

    input.search {
        width: 100%;
        background-image: url("/images/Search.png");
        background-position: right center;
        background-repeat: no-repeat;
    }
</style> 
```

我的现场网站错位：

![在此处输入图像描述](https://i.stack.imgur.com/taGfg.jpg)

另外，如果我设置背景，为什么我会在输入中获得另一个边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:27:03.820

**工作小提琴：http:** [//jsfiddle.net/ghUEw/](http://jsfiddle.net/ghUEw/)

表格元素的默认填充和边距在不同的浏览器中有所不同。所以你最好在表格元素上使用 CSS 重置。

```
table * {
    margin: 0;
    padding: 0;
} 
```

然后，`border-collapse`财产来了。它确定表格边框是*折叠*成单个边框还是单独渲染，比如说相邻的表格单元格。您需要将其设置如下以使它们折叠，因为每个表格行有不同数量的单元格。

```
table {
    border-collapse: collapse;
} 
```

然后，如果您希望它们看起来相同，则需要在表格中设置输入的边框。

```
table input {
    border: 1px solid #aaa;
} 
```

如果您不希望出现任何边框，请将其替换为`border: none;`

然后，在您的 CSS 中，为了让标签以您想要的方式出现，您可以应用`float:right;`（也更正`vertical-align: middle;`）

```
td label {
    width: 100%;
    color: #F1F1F1;
    text-align: right;
    vertical-align: middle;
    float:right;
} 
```

# ruby-on-rails - 将 sqlite 数据库表复制到 Postgres

> ID：15915587
> 
> 赞同：1
> 
> 时间：2013-04-10T01:49:47.320
> 
> 标签：ruby-on-rails, sqlite, postgresql

有没有办法在生产中将我的本地 sqlite 数据库表复制到我的 postgres 数据库中？我对 Rails 很陌生，因此感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:18:51.927

你可以使用[水龙头](https://github.com/ricardochimal/taps)

**注意**

前几天我看到你有一个关于 heroku 的问题。这个问题与 Heroku 有关吗？如果是这样，您不应该在本地使用 sqlite 和远程使用 postgres。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:26:44.353

您需要一个工具来从 Sqlite 导出数据并将其导入 Postgres。您可以使用[https://github.com/ricardochimal/taps](https://github.com/ricardochimal/taps)。

这是一个教程：[http ://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:01:42.740

查看[yaml_db](https://github.com/ludicast/yaml_db)转储和加载数据。便于使用。

# sql - AS 在子查询中被忽略

> ID：15915596
> 
> 赞同：1
> 
> 时间：2013-04-10T01:50:58.117
> 
> 标签：sql, database

仍然在这里学习 SQL ......我有一个子查询的一部分：

```
(Select MAX(cost) AS Cost_of_Car FROM Car_Purchase) 
```

但它不带我的标签只是使用表中的一个，在这种情况下是“成本”

有任何想法吗？

**编辑：刚刚意识到我可以在我的 SELECT 语句中调用“列名”，但是为什么它在子查询中不接受 AS？**

**发布完整的查询**

```
SELECT CAR.name, Car_Purchase.cost_per_night, Car_Purchase.description
FROM Car_Purchase
JOIN CAR ON Car_Purchase.purchase_id = CAR.purchase_id
GROUP BY CAR.name, Car_Purchase.cost_per_night, Car_Purchase.description
HAVING Car_Purchase.cost = (SELECT MAX(cost) AS Cost_of_Car FROM Car_Purchase) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:03:43.240

`AS`关键字没有被忽略。您在`where`子句中使用子查询。请记住，`where`子句用于过滤查询结果，而不是用于显示数据。

如果你想看看`AS`子查询是如何工作的，试试这个：

```
SELECT CAR.name, Car_Purchase.cost_per_night, Car_Purchase.description, Cost_of_Car
FROM Car_Purchase 
JOIN CAR ON Car_Purchase.purchase_id = CAR.purchase_id
join (SELECT MAX(cost) AS Cost_of_Car FROM Car_Purchase) subquery
ON Car_Purchase.cost = subquery.Cost_of_Car
GROUP BY CAR.name, Car_Purchase.cost_per_night, Car_Purchase.description 
```

在这个查询中，我将子查询放在`from`子句中。因此，您的查询结果现在有`Cost_of_Car`列，您可以在`select`子句中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:12:22.517

事实上，正如其他人所指出的那样，由于 Max(Cost) 没有在查询的其他地方使用，因此您根本不需要别名。而且由于您在 sql 中的任何地方都没有聚合函数，因此它不需要是 group By 查询

```
Select cp.name, cp.Cost CostOfCar, 
     cp.cost_per_night, cp.description
From Car_Purchase cp Join Car c 
     On c.purchase_id = cp.purchase_id
Where cp.cost = (SELECT MAX(cost) FROM Car_Purchase) 
```

足够了，应该可以工作

# asp.net-mvc - ASP.Net MVC - 默认模型绑定器忽略某些属性

> ID：15915597
> 
> 赞同：0
> 
> 时间：2013-04-10T01:51:00.477
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model

在我的 ASP.Net MVC 3 应用程序中，我将表单从强类型视图发布到**控制器**，但是我发现模型中的某些属性没有填充表单中发送的内容。

经过进一步调查，我发现`DefaultModelBinder`忽略了**模型**的一些属性。

该`GetModelProperties`方法返回完整的`PropertyDescriptorCollection`，但是`BindProperty`没有为所有这些属性调用该方法。具体来说，它没有被要求用于`enum`属性，尽管我不确定这是否只是一个巧合。

如何解决这个问题？如果您还可以解释为什么会发生这种情况，那就太好了。

# php - 在 PHP 中从桌面版切换到移动版

> ID：15915600
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:51:47.830
> 
> 标签：php, android, iphone, mobile, desktop

我正在使用以下 php 在我的网站的移动版本和桌面版本之间切换

```
$mobile_browser = '0';

if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android)/i', strtolower($_SERVER['HTTP_USER_AGENT']))) {
    $mobile_browser++;
}

if ((strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml') > 0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
    $mobile_browser++;
}    

$mobile_ua = strtolower(substr($_SERVER['HTTP_USER_AGENT'], 0, 4));
$mobile_agents = array(
'w3c ','acs-','alav','alca','amoi','audi','avan','benq','bird','blac',
'blaz','brew','cell','cldc','cmd-','dang','doco','eric','hipt','inno',
'ipaq','java','jigs','kddi','keji','leno','lg-c','lg-d','lg-g','lge-',
'maui','maxo','midp','mits','mmef','mobi','mot-','moto','mwbp','nec-',
'newt','noki','oper','palm','pana','pant','phil','play','port','prox',
'qwap','sage','sams','sany','sch-','sec-','send','seri','sgh-','shar',
'sie-','siem','smal','smar','sony','sph-','symb','t-mo','teli','tim-',
'tosh','tsm-','upg1','upsi','vk-v','voda','wap-','wapa','wapi','wapp',
'wapr','webc','winw','winw','xda ','xda-');

if (in_array($mobile_ua,$mobile_agents)) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini') > 0) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'windows') > 0) {
    $mobile_browser = 0;
}

if ($mobile_browser > 0) {
   // do something
}
else {
   // do something else
} 
```

应该是 if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'OperaMini')>0)

或者应该是 if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini')>0)

使用 ALL_HTTP 时出现调试错误，但使用 HTTP_USER_AGENT 时错误消失

下面是调试错误，如下： Debug Notice: Undefined index: ALL_HTTP in header.php on line 29

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T02:00:25.083

ALL_HTTP 是一个 IIS（Microsoft 服务器）变量。请参阅：http: [//msdn.microsoft.com/en-ca/library/ms524602](http://msdn.microsoft.com/en-ca/library/ms524602%28v=vs.90%29.aspx) (v=vs.90).aspx 。ALL_HTTP 用于 ASP（活动服务器页面），并且您使用的是 PHP（PHP：超文本预处理器）

$_SERVER['HTTP_USER_AGENT'] 将返回用户代理，这听起来像你想要的基于你的问题，所以使用： if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'OperaMini')>0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:00:09.080

[我认为使用Detect Mobile Browsers](http://detectmobilebrowsers.com)中的代码可能会更好

```
<?php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://detectmobilebrowser.com/mobile');
?> 
```

> 平板电脑 Android 平板电脑、iPad、Kindle Fires 和 PlayBooks 在设计上未检测到。要添加对平板电脑的支持，请将 |android|ipad|playbook|silk 添加到第一个正则表达式。

# actionscript-3 - AS3：ScaleX/ScaleY 和宽度/高度的问题

> ID：15915601
> 
> 赞同：0
> 
> 时间：2013-04-10T01:51:56.660
> 
> 标签：actionscript-3, flash, class, sprite

我正在使用 FlashDevelop 来测试我想用于游戏的菜单类型系统，但我在确定宽度和高度或 ScaleX 和 ScaleY 时遇到了严重问题（我不太确定哪一组是Sprite 子类的问题）。我已经阅读了许多似乎可以解决我的问题的内容，包括在添加任何子类后调整 sprite 子类的大小，但似乎都不起作用。现在，我有 3 个单独的课程。

主要的：

```
public class Main extends Sprite 
{

public function Main():void 
{
    if (stage) init();
    else addEventListener(Event.ADDED_TO_STAGE, init);
}

private function init(e:Event = null):void 
{
    removeEventListener(Event.ADDED_TO_STAGE, init);
    // entry point
    var BF:BFi = new BFi;
    this.addChild(BF);
    this.width = 640;
    this.height = 480;

    trace(this + "Dimensions: " + width + ", " + height);
    trace(this + "Coordinates: " + x + ", " + y);
}

} 
```

高保真：

```
public class BFi extends Sprite
{
    public function BFi() 
    {
        var BFMenu:BFiMenu = new BFiMenu;
        addChild(BFMenu);
        trace(getChildAt(0));
        this.x = this.y = 0;
        this.width = 640;
        this.height = 480;
        BFMenu.x = this.y = 0;
        BFMenu.width = 640;
        BFMenu.height = 480;
        trace(this + "Dimensions: " + width + ", " + height);
        trace(this + "Coordinates: " + x + ", " + y);
    }

} 
```

和 BFiMenu：

```
public class BFiMenu extends Sprite
{
    [Embed(source = "../Assets/Button1.png")]private var Button1:Class;

    public function BFiMenu() 
    {
        var Bounds:Sprite = new Sprite;
        Bounds.graphics.lineStyle(2, 0, 1);
        Bounds.graphics.drawRect(0, 0, 640, 480);
        addChild(Bounds);

        var NewButton:ComplexButton = new ComplexButton(220, 405, 200, 50, Button1, "PLAY", "Block", 50, 0x000000, function Button1(e:MouseEvent):void { /*parent.removeChildAt(0);*/ } );
        //var NewButton:ComplexButton = new ComplexButton(0, 0, 200, 50, Button1, "PLAY", "Block", 50, 0x000000, function Button1(e:MouseEvent):void { parent.removeChildAt(0); } );
        addChild(NewButton);

        this.width = 640;
        this.height = 480;

        trace(this + "Dimensions: " + width + ", " + height);
        trace(this + "Coordinates: " + x + ", " + y);
        trace(NewButton + "Dimensions: " + NewButton.width + ", " +NewButton.height);
        trace(NewButton + "Coordinates: " + NewButton.x + ", " + NewButton.y);
    }
} 
```

名为“Bounds”的矩形具有我想要的高度和宽度（640x480），但我放置的按钮应该有一个大约 450 的 y 坐标，而不是一个接近 800 的 y 值，并且是明显失真，但仍然在屏幕上，尽管高度只有 480。

调用的“ComplexButton”类是我自己的按钮类，我已经对其进行了足够的测试，知道它可以正常工作。当我运行这个程序时，它扭曲了一切，没有什么是我想要的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:01:51.647

几点注意事项：

每次创建显示对象时，初始 x 和 y 坐标默认为零，因此您不需要自己将它们初始化为 0。

更改空显示对象的宽度和高度将无济于事。如果显示对象具有图形内容，那么它将缩放该内容以匹配所需的宽度和高度，这也会改变缩放因子。

如果您要在 Disp.Object 中绘制一个形状来为其指定宽度和高度，则不需要显式设置这些值。

尝试删除您明确设置这些值的 3 个位置中的每一个。

# javascript - 尝试将一组查询结果从 Django 传递给 Javascript

> ID：15915602
> 
> 赞同：0
> 
> 时间：2013-04-10T01:52:19.677
> 
> 标签：javascript, jquery, html, django

正如标题所说，我正在尝试将一组 MySQL 查询结果从 django 传递给 javascript。不幸的是，我的页面源显示了一个包含查询结果的字符串数组。这是我的 Django 代码：

```
resultFEs = []
for result in results:
    fes = FrameElements.objects.filter(frame_name=result.name)
    resultFEs.append(serializers.serialize('json', fes))
results_json = serializers.serialize('json', results)

return render_to_response('newInstance.html',{'scene_id':scene_id,'corpus_id':corpus_id,'sentence_id':sentence_id,'word':word,'word_position':word_position,'results':results_json,'resultFEs':resultFEs}) 
```

这是我的html：

```
<script type="text/javascript">
    var word = '{{word}}';
    var wordPosition = '{{word_position}}';
    var sceneId='{{scene_id}}';
    var corpusId='{{corpus_id}}';
    var sentenceId='{{sentence_id}}';
    var results ={{results|safe}};
    var resultFEs={{resultFEs|safe}};
</script> 
```

这是生成的页面源：

```
<script type="text/javascript">
        var word = ' the ';
        var wordPosition = '0:0';
        var sceneId='1';
        var corpusId='1';
        var sentenceId='2';
        var results =[{"pk": 1, "model": "annotation_tool.frames", "fields": {"framenet_id": 234234, "name": "Using", "frame_type": "FRAMENET", "timestamp": null, "has_lexicalization": 1, "annotator": 19, "semiotic_status": "LITERAL"}}, {"pk": 2, "model": "annotation_tool.frames", "fields": {"framenet_id": 234234, "name": "Use_computer", "frame_type": "FRAMENET", "timestamp": null, "has_lexicalization": 1, "annotator": 19, "semiotic_status": "LITERAL"}}];
        var resultFEs=['[{"pk": 1, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Agent", "frame": 1, "framenet_id": null, "frame_name": "Using", "core_status": "CORE"}}, {"pk": 2, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Instrument", "frame": 1, "framenet_id": null, "frame_name": "Using", "core_status": "CORE"}}, {"pk": 13, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Self", "frame": 1, "framenet_id": null, "frame_name": "Using", "core_status": "CORE"}}]', '[{"pk": 3, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Agent", "frame": 2, "framenet_id": null, "frame_name": "Use_computer", "core_status": "CORE"}}, {"pk": 4, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Computer", "frame": 2, "framenet_id": null, "frame_name": "Use_computer", "core_status": "CORE"}}, {"pk": 14, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Self", "frame": 2, "framenet_id": null, "frame_name": "Use_computer", "core_status": "CORE"}}, {"pk": 19, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Desk", "frame": 2, "framenet_id": null, "frame_name": "Use_computer", "core_status": "CORE"}}, {"pk": 20, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Chair", "frame": 2, "framenet_id": null, "frame_name": "Use_computer", "core_status": "CORE"}}, {"pk": 21, "model": "annotation_tool.frameelements", "fields": {"fe_name": "Chair", "frame": 2, "framenet_id": null, "frame_name": "Use_computer", "core_status": "CORE"}}]'];
</script> 
```

请注意，在结果页面源代码中，resultFE 的每个元素周围都有引号。基本上，我不想要这些引号，所以我有一个二维的 json 对象数组，而不是一个一维的字符串数组。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:08:49.357

如果您使用 jQuery，您可以使用 parseJSON 方法安全地将字符串转换为 JSON 对象：

```
var resultFEs = jQuery.parseJSON( {{resultFEs|safe}} ); 
```

请参阅 parseJSON 文档：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# java - Java if 语句没有转到正确的语句

> ID：15915604
> 
> 赞同：0
> 
> 时间：2013-04-10T01:52:34.683
> 
> 标签：java, if-statement

这是一个学校计划，您可以输入银行的支票数量并计算当月的费用。当我放入超过 20 张支票的金额时，它使用了错误的 else if 语句！

主类：

```
import java.text.DecimalFormat;
public class WeSavU
{
private int amountOfChecks, amountOver10, amountOver20, amountOver30;
private double total;
private String message, formatTotal;
public WeSavU(int checks)
{
    amountOfChecks = checks;
}

public void setNumChecks(int checks)
{
    amountOfChecks = checks;
}

public String getTotalPrice()
{
    DecimalFormat df = new DecimalFormat("#,##0.00");
    if (amountOfChecks <= 10)
    {
        total = (amountOfChecks * .14) + .50;
        formatTotal = df.format(total);
        message = "Your total is: $" + formatTotal;
    }

    else if (amountOfChecks == 0 )
    {
        message = "Total is $0.50";
    }

    else if (amountOfChecks <0)
    {
        message = "Invalid amount of checks... Total is $0.50";
    }

    else if (amountOfChecks >=11)
    {
        amountOver10 = amountOfChecks - 10;
        total = (10*.14) + (amountOver10*.13) + .50;
        formatTotal = df.format(total);
        message = "Your total is: $" + formatTotal;
    }

    else if (amountOfChecks >= 21)
    {
        amountOver20 = amountOfChecks - 20;
        total = 2.7 + (amountOver20* .12) + .42;
        formatTotal = df.format(total);
        message = "Your total is: $" + formatTotal;
    }

    else if (amountOfChecks > 1000)
    {
        message = "You need a corporate account!";
    }

    else if (amountOfChecks >= 31 && amountOfChecks < 1001)
    {
        amountOver30 = amountOfChecks - 30;
        total = 3.9 + (amountOver30*.11) + .50;
        formatTotal = df.format(total);
        message = "Your total is: $" + formatTotal;
    }

    return message;
    }
    } 
```

对话框类：

```
import javax.swing.JOptionPane;

public class WeSavUDialog
{
public static void main(String[] args)
{
    String checks;
    int Check;
    checks = JOptionPane.showInputDialog("Enter the amount of checks:");

    Check = Integer.parseInt(checks);

    WeSavU check = new WeSavU(Check);

    JOptionPane.showMessageDialog(null, check.getTotalPrice());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:57:47.773

基于此条件，如果amountOfChecks 为20，则满足以下条件，将进入此if 条件。

```
else if (amountOfChecks >=11) 
```

将其更改为

```
else if (amountOfChecks >= 11 && amountOfChecks < 21) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:57:49.897

if 条件按顺序执行。那是导致错误的原因。

公共字符串 getTotalPrice() { DecimalFormat df = new DecimalFormat("#,##0.00");

```
if (amountOfChecks == 0 )
{
    message = "Total is $0.50";
}

else if (amountOfChecks <0)
{
    message = "Invalid amount of checks... Total is $0.50";
}

else if (amountOfChecks <= 10)
{
    total = (amountOfChecks * .14) + .50;
    formatTotal = df.format(total);
    message = "Your total is: $" + formatTotal;
}

else if (amountOfChecks > 1000)
{
    message = "You need a corporate account!";
}

else if (amountOfChecks >= 31 && amountOfChecks < 1001)
{
    amountOver30 = amountOfChecks - 30;
    total = 3.9 + (amountOver30*.11) + .50;
    formatTotal = df.format(total);
    message = "Your total is: $" + formatTotal;
}

else if (amountOfChecks >= 21)
{
    amountOver20 = amountOfChecks - 20;
    total = 2.7 + (amountOver20* .12) + .42;
    formatTotal = df.format(total);
    message = "Your total is: $" + formatTotal;
}

else if (amountOfChecks >=11)
{
    amountOver10 = amountOfChecks - 10;
    total = (10*.14) + (amountOver10*.13) + .50;
    formatTotal = df.format(total);
    message = "Your total is: $" + formatTotal;
}
return message;
} 
```

在你的情况下，你也会有 case amountOfChecks <0 的错误。这是因为如果amountOfChecks 是-5，那么在检查它不等于0 但小于10 之后，它会进入第二个条件，即amountofChecks <= 10，并且不会进入所需的条件。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:59:01.357

你写：

```
if(...)
else if (amountOfChecks >=11)//always stops here
{
    ...
}
else if (amountOfChecks >= 21)//never reached.
{
    ...
} 
```

这里的第一个条件总是包括第二个，所以你永远不会到达第二个。也就是说，只要大于 21，检查的次数就大于 11，所以你应该按照从大到小的顺序检查，从 开始`if(amount>1001)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:59:56.853

当前代码的排序方式是，代码在检查 21 之前检查 amountOfChecks 是否大于/等于 11。假设您输入了 25 个检查。25 >= 11，它也是 >= 21。因为您的程序首先检查 >= 11，所以永远不会达到 else if(amountOfChecks >= 21)。切换顺序以便首先检查较大的数字，或者更改顺序以便检查范围。

示例：else if(amountOfChecks >= 11 && amountOfChecks<21){ }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T02:03:54.003

花点时间想想你的逻辑。

假设`amountOfChecks == 9`.

*   `amountOfChecks <= 10`is `true`，因此没有`if`检查其他语句，这意味着它正在跳过`== 0`并且`< 0`

更好的说法是...

```
if (amountOfChecks > 0 && amountOfChecks <= 10) {...}
else if (amountOfChecks == 0) {...}
else if (amountOfCheck < 0) {...} 
```

现在，如果`amountOfChecks == 11`...

*   `amountOfChecks >= 11`is`true`并且不再`if`检查任何语句。

    else if (amountOfChecks > 10 && amountOfChecks < 21) {...} else if (amountOfChecks > 20 && amountOfChecks < 31) {...} else if (amountOfChecks > 30 && amountOfChecks < 1000) {...} else { ...} // 其他所有内容

`if`您需要在给定语句本身内允许范围。

（我不敢相信我要说这个）办公桌用一张纸和笔检查你的逻辑会非常有用......

# mysql - 选择不同的时间戳作为 DD/MM/YYYY mysql

> ID：15915606
> 
> 赞同：9
> 
> 时间：2013-04-10T01:53:06.123
> 
> 标签：mysql, sql

我有多行`itemDate`（时间戳），如下所示：

```
itemDate
2013-04-09 17:24:31
2013-04-09 10:24:31
2013-04-08 12:20:30 
```

当我使用`SELECT DISTINCT(itemDate) FROM item;`2013-04-08 时，我得到了两行。

我想获取不同日期的日期（基于`YYYY-MM-DD`），而忽略同一天的时间是否不同。

当我从该表查询时，我需要的结果应该如下所示：

```
itemDate
2013-04-09
2013-04-08 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T01:54:40.973

那是因为这些价值观不同。如果您尝试按日期执行此操作，请使用以下[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)功能：

```
SELECT DISTINCT(DATE(itemDate)) FROM item; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T01:57:55.790

另一个答案的替代方法是使用`DATE_FORMAT()`

```
SELECT DATE_FORMAT(itemDate, '%Y-%m-%d') ItemDate 
FROM   Item
GROUP  BY DATE_FORMAT(itemDate, '%Y-%m-%d') 
```

[http://www.sqlfiddle.com/#!2/bfaf5e/3](http://www.sqlfiddle.com/#!2/bfaf5e/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-30T08:52:30.073

在我这边，我尝试了上面建议的不同选项，但我使用的 Sybase DB 拒绝了我：

```
Error: Function 'DATE' not found. If this is a SQLJ function or SQL function, use sp_help to check whether the object exists (sp_help may produce a large amount of output). 
```

我的同事给了我这个并且工作正常

```
SELECT distinct(CONVERT(varchar(20), timestamp, 111)) FROM HistoOrder 
```

我使用 111 但你可以在这里找到代码列表 [http://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

# forms - CodeIgniter 从表单发送完整的选择而不是单个选项元素

> ID：15915608
> 
> 赞同：1
> 
> 时间：2013-04-10T01:53:19.757
> 
> 标签：forms, codeigniter, select, option, setvalue

这是我在模型下的功能..

```
 public function get_categories_select() {
    // output
    $output = "";

    // query
    $this->db->select("*");
    $this->db->from("categories");
    $query = $this->db->get();

    // zero result(s)
    if ($query->num_rows() == 0) {
        return $output = "No Results Found";
    }

    // result(s)
    $output .= "<select name=\"category\">";
    foreach ($query->result_array() as $row) {
        $output .= "<option value=\"{$row['name']}\">{$row['name']}</option>\n";
    }
    $output .= "</select>";

    // return
    return $output;
} 
```

这是我的控制器..

```
public function add_cellphone() {
    // loading
    $this->load->model("category_model");
    $this->load->model("brand_model");
    // controlling
    $data['categories'] = $this->category_model->get_categories_select();
    $data['brands']     = $this->brand_model->get_brands_select("cell phones");
    if ($this->validate_cellphone() === FALSE) {
        // on failure
        $to_view = "add_cellphone";
    } else {
        // on success
        $data['category'] = set_value('category');
        $data['brand']    = set_value('brand');
        $data['model']    = set_value("model");
        $data['price']    = set_value("price");

        $this->load->model("product_model");
        $this->product_model->add_product($data);
        $to_view = "add_cellphone_success";
    }
    // viewing
    $this->load->view("admin/templates/header");
    $this->load->view("admin/pages/{$to_view}", $data);
    $this->load->view("admin/templates/footer");
}

public function validate_cellphone() {
    // laoding
    $this->load->helper("form");
    $this->load->library("form_validation");
    // validation rules
    $config = array(
            array(
                "field" => "category",  
                "label" => "Category",  
                "rules" => "required",  
            ),
            array(
                "field" => "brand", 
                "label" => "Brand", 
                "rules" => "required",  
            ),
            array(
                "field" => "model", 
                "label" => "Model", 
                "rules" => "required",  
            ),
            array(
                "field" => "price", 
                "label" => "Price", 
                "rules" => "required",  
            ),
            array(
                "field" => "released",  
                "label" => "Released",  
                "rules" => "required",  
            ),
            array(
                "field" => "status",    
                "label" => "Status",    
                "rules" => "required",  
            )
        );
    // controlling
    $this->form_validation->set_rules($config);
    $this->form_validation->set_error_delimiters('<span class="error">', '</span>');
    if ($this->form_validation->run() === FALSE) {
        return FALSE;
    }
    else {
        return TRUE;
    }
    // no viewing
} 
```

这里`$data['cartegory'] and $data['brand']`包含带有子选项元素的完整选择元素，而不仅仅是从表单视图中选择的选项元素。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:01:49.180

你想做什么？对不起，我不明白。如果您的 add_cellphone 函数在验证后尝试获取数据，我们应该使用它`$this->input->post("name")`来获取数据，不是吗？set_value 的用途是什么？

# javascript - 如何实现 twitter 引导手风琴？

> ID：15915615
> 
> 赞同：8
> 
> 时间：2013-04-10T01:54:13.543
> 
> 标签：javascript, jquery, css, twitter-bootstrap, accordion

我正在尝试实现 twitter bootstrap collapse 插件（[http://twitter.github.io/bootstrap/2.3.2/javascript.html#collapse](http://twitter.github.io/bootstrap/2.3.2/javascript.html#collapse)），但我似乎无法让它工作。认为这是我的开发环境有问题，我设置了一个 JSfiddle，但我仍然遇到同样的问题。这是jsfiddle：

[http://jsfiddle.net/qdqrT/1/](http://jsfiddle.net/qdqrT/1/)

这是直接从引导示例复制的 HTML。

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Collapsible Group Item #1
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
</div> 
```

CSS 和 javscript 直接取自 bootstrap 自定义页面，只有折叠 CSS 和 JS 以及 trasition JS（它是折叠插件的依赖项）。

有谁知道这是为什么坏了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T02:23:34.373

我让它工作了。我认为您可能没有包括所有必需的资源。

我最终包含了来自[BootstrapCDN的 bootstrap CSS 和 JS 的托管版本](http://www.bootstrapcdn.com/)

```
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" rel="stylesheet"> 
```

这是工作版本：http: [//jsfiddle.net/qdqrT/3/](http://jsfiddle.net/qdqrT/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T14:29:11.950

我使用较新版本的引导程序（3.3.4）进行了尝试，当包含正确的文件时，问题中的代码有效。

没有必要使用 CDN 版本的引导程序（但如果您愿意，也可以使用）。

我在子目录中有引导程序，在我的 HTML 中有以下内容：

```
<!-- Bootstrap CSS (put this in the header of your HTML file)-->
<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">

<!-- Bootstrap Javascript (put this at the end of your HTML file)-->
<script src="bootstrap/js/bootstrap.min.js"></script> 
```

（我意识到这个问题很老，但我认为我的答案比接受的答案更新，希望它会帮助某人）

# sitecore - Sitecore 中的空白页面

> ID：15915619
> 
> 赞同：0
> 
> 时间：2013-04-10T01:54:37.200
> 
> 标签：sitecore

我有一个大型 Sitecore 站点，几乎没有问题，但有一个特定页面呈现为空白。没有菜单或布局，也没有错误。数据库中没有记录错误。

当我通过 CMS 预览同一页面时，没问题。

该页面已发布，其布局和模板也已发布。

有没有人经历过这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:13:51.633

好吧，这有点尴尬 - 实际上我的网站下有一个目录，与我正在浏览的页面同名。当然，IIS 不会将请求传递给 Sitecore，它只是说“嘿，我找到了那个资源”，在我的例子中，它返回一个空白页面。

在这种情况下，我会期待目录列表或错误消息，但我得到的是空白页。

与 Sitecore 无关，但它可能会影响使用 CMS 的任何人。

（PS 这是我最近开始工作的一个预先存在的网站）。

# javascript - 带有 ng-options 的 AngularJS DropDown

> ID：15915622
> 
> 赞同：3
> 
> 时间：2013-04-10T01:54:44.810
> 
> 标签：javascript, angularjs

假设我有一个这样的控制器：

```
function MockController($scope) {
$scope.objs = [{"a": "true"},{"b": "false"}];
$scope.Value = "";
} 
```

在 html 视图中，我会有类似的内容：

```
 <select class="input-block-level" ng-model="Value" 
  ng-options="(obj.key, obj.value) for obj in objs" required> 
```

但是，无论我如何尝试，angular 似乎都不喜欢元组表示法。我试过没有括号也没有骰子。是否有一种通用的方法来处理 ng-repeat 中的哈希表/字典？也就是说，假设您不知道密钥的名称，并且它们的密钥本身应该像这样使用：

```
<option value={{obj.key}}>{{obj.value}}</option> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T08:16:31.697

我认为不可能在`ng-options`.

我可能会尝试在途中的某个地方为数据编写一个包装器，将其转换为以下内容：

```
[{"key": "a", "value": "true"},
 {"key": "b", "value": "false"}] 
```

（这个问题太有趣了，我实际上已经写了一个：http: [//jsfiddle.net/RCU8M/](http://jsfiddle.net/RCU8M/) - 但是在没有 ECMAScript5 支持的浏览器中它不起作用，所以你可能想通过使用更优雅的解决方案来解决这个问题，就像在[JavaScript 中获取 json-object 的键](https://stackoverflow.com/questions/8430336/get-keys-of-json-object-in-javascript)一样。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T02:37:05.437

是不是

```
<select ... ng-options="(key, value) in objs" ...> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T08:47:09.843

这应该像这样使用：

```
<select>
<option ng-repeat="objin objs" value="{{obj.key}}">{{obj.value}}</option>
</select> 
```

# vim - Vim表格插件对齐两列文本？

> ID：15915624
> 
> 赞同：3
> 
> 时间：2013-04-10T01:55:15.090
> 
> 标签：vim, tabular

通过许多[表格](https://github.com/godlygeek/tabular)页面工作，但无法弄清楚这一点。我想对齐两列文本。第一列是一个单词，第二列是该行的其余部分：

```
alpha one oclock hey
beta two oclock hey
phi three oclock hey 
```

我想将其对齐为：

```
alpha one oclock hey
beta  two oclock hey
phi   three oclock hey 
```

此外，这些行可能已经缩进，因此第一个单词的左侧可以有空格和制表符。

我无法弄清楚实现这一点的正则表达式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:20:24.407

试试这个命令：

```
:Tabularize /^\S\+\zs/l0c1l0 
```

*   `^\S\+\zs`将匹配第一列之后的位置
*   `l0c1l0`表示列对齐和宽度。

# matlab - 在 MATLAB 中以矩阵形式绘制椭圆

> ID：15915625
> 
> 赞同：0
> 
> 时间：2013-04-10T01:55:30.097
> 
> 标签：matlab, geometry, ellipse

我有一个二维椭圆，由正定矩阵 X 定义如下：如果 x'*X*x <= 1，点 x 在椭圆中。如何在 matlab 中绘制这个椭圆？我做了一些搜索，但发现却很少。

实际上想出了答案：我会将此作为答案发布，但它不会让我（新用户）：

经过一番折腾后想通了。基本上，我们将椭圆边界 (x'*X*x = 1) 上的点表示为 X 的特征向量的加权组合，这使得一些数学运算更容易找到这些点。我们可以只写 (au+bv)' *X* (au+bv)=1 并计算出 a,b 之间的关系。Matlab 代码如下（对不起，它很乱，只是使用了与笔/纸相同的符号）：

```
function plot_ellipse(X, varargin)
% Plots an ellipse of the form x'*X*x <= 1

% plot vectors of the form a*u + b*v where u,v are eigenvectors of X

[V,D] = eig(X);
u = V(:,1);
v = V(:,2);
l1 = D(1,1);
l2 = D(2,2);

pts = [];

delta = .1;

for alpha = -1/sqrt(l1)-delta:delta:1/sqrt(l1)+delta
    beta = sqrt((1 - alpha^2 * l1)/l2);
    pts(:,end+1) = alpha*u + beta*v;
end
for alpha = 1/sqrt(l1)+delta:-delta:-1/sqrt(l1)-delta
    beta = -sqrt((1 - alpha^2 * l1)/l2);
    pts(:,end+1) = alpha*u + beta*v;
end

plot(pts(1,:), pts(2,:), varargin{:}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-16T09:42:46.610

我在搜索这个主题时偶然发现了这篇文章，即使它已经解决了，我想如果矩阵是对称的，我可能会提供另一个更简单的解决方案。

另一种方法是使用在 Matlab 中实现的半定正矩阵 E 的 Cholesky 分解作为`chol`函数。它计算一个上三角矩阵 R，使得 X = R' * R。使用这个，x'*X*x = (R*x)'*(R*x) = z'*z，如果我们将 z 定义为 R *X。

因此，要绘制的曲线变成了 z'*z=1，这是一个圆。因此，一个简单的解决方案是 z = (cos(t), sin(t))，对于 0<=t<=2 pi。然后乘以 R 的倒数得到椭圆。

翻译成以下代码非常简单：

```
function plot_ellipse(E)
 % plots an ellipse of the form xEx = 1
 R = chol(E);
 t = linspace(0, 2*pi, 100); % or any high number to make curve smooth
 z = [cos(t); sin(t)];
 ellipse = inv(R) * z;
 plot(ellipse(1,:), ellipse(2,:))
end 
```

希望这可能会有所帮助！

# jquery - jquery 验证 url，禁止协议、子域或查询字符串

> ID：15915626
> 
> 赞同：0
> 
> 时间：2013-04-10T01:55:49.200
> 
> 标签：jquery, regex, jquery-validate

我`jQuery validate`在我的项目中使用 url，并希望阻止用户输入任何协议（http://、ftp://、www 等）、子域或查询字符串。我只想要一个像这样的干净域来验证：

```
example.com 
```

这是当前使用的默认正则表达式：

`// contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/ return this.optional(element) || /^(?!.:\/\/)(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);`

我无法从这个正则表达式中获得任何真正的意义，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:41:01.367

我使用以下内容来形成正确的匹配：

```
/^(?!.:\/\/).[a-zA-Z0-9]+\.[a-zA-Z0-9]{2,4}?$/i 
```

# c# - 为什么调用 Dispose()？不会发生内存泄漏？

> ID：15915627
> 
> 赞同：12
> 
> 时间：2013-04-10T01:55:55.870
> 
> 标签：c#, memory-management, memory-leaks, idisposable

**编辑**：我的问题没有得到我正在寻找的主要答案。我不清楚。我真的很想知道两件事：

1.  不能调用`Dispose()`导致内存泄漏？
2.  如果您有一个大型程序并且从不对任何 IDisposable 对象调用 Dispose()，那么可能发生的最糟糕的事情是什么？

`Dispose()`我的印象是，如果不在对象上调用，可能会发生内存泄漏`IDisposable`。

根据关于这个[线程](https://stackoverflow.com/a/2803393/279516)的讨论，我的看法是不正确的；`Dispose()`如果不调用，则不会发生内存泄漏。

那为什么还要麻烦打电话`Dispose()`呢？是否只是立即释放资源，而不是稍后的某个时间？如果您有一个大型程序并且从不调用`Dispose()`您的任何`IDisposable`对象，那么可能发生的最糟糕的事情是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T02:00:01.223

`Dispose`用于释放*非托管*资源。如果一个类分配了非托管内存，这可能意味着内存，但更常见的是本地对象和资源，如打开的文件和数据库连接。

您经常需要对本身没有任何非托管资源的类调用 Dispose，但它确实包含另一个可丢弃的类并且可能具有非托管资源。

有时对开发人员来说，实现 dispose 以确保确定性最终确定也很有用——保证资源被释放的顺序。

另请注意，实现 dispose 的类通常还有一个终结器，如果`Dispose`不调用，则释放资源。具有终结器的对象与没有终结器的类具有不同的生命周期。当它们准备好进行 GC 时，GC 将看到它们有一个终结器，而不是在 GC 准备好时立即收集对象，而是将其放入终结队列。这意味着该对象存在一个额外的 GC 迭代。当您调用 dispose 时，实现通常（但不是必须）调用`GC.SuppressFinalize()`，这意味着不再需要调用终结器。

**如果一个类实现`IDisposable`，你应该总是调用`Dispose()`.**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T02:07:46.653

虽然其他一些答案似乎暗示您可以不调用它而侥幸逃脱，*但这确实是个糟糕的建议*。您应该*始终*调用`Dispose`任何`IDisposable`资源。

一些 .NET 对象具有所谓的“终结器”——您也可以在自己的类中定义它，但您很少看到在典型的 C# 程序员代码中完成。终结器是在垃圾收集器销毁对象时运行的，*有时*它会调用`Dispose`——但前提是类的实现者这样做了。

最好的做法是永远`Dispose`——无论如何。我使用过很多库，其中不调用`Dispose`资源会导致内存泄漏、连接泄漏、操作系统资源泄漏或其他类型的可怕。垃圾收集器不会解决问题，因为它们没有实现任何自定义终结器。

请参阅相关：[垃圾收集器会为我调用 IDisposable.Dispose 吗？](https://stackoverflow.com/questions/45036/will-the-garbage-collector-call-idisposable-dispose-for-me)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T04:27:58.837

不调用 Dispose 永远不会（*参见关于错误实现的注释 2）导致传统的[“内存泄漏”](http://en.wikipedia.org/wiki/Memory_leak)（内存在进程结束之前永远不会被释放）。

与记忆有关的“唯一”事情是它将在未来的不确定时刻被释放。

非对象的一个​​有趣情况`Dispose`是当非常小的托管对象拥有大量非托管内存时（即使用某种 Win32 内存管理函数即[HeapAlloc](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366597%28v=vs.85%29.aspx)分配）。在这种情况下，托管内存管理器可能无法正确检测内存压力以触发 Gen2 GC，并且（尤其是在 x86 - 32 位进程的情况下）它可能会过早地无法为您的进程分配托管内存。这种情况下的另一个问题是“等待 GC 被解除分配”（同样主要是在 x86 情况下）导致地址空间碎片 - 当分配较小的本机内存块时，它们之间有一些相对较大的空间，从而阻止分配大块托管内存管理所需的。

笔记：

1.  这个答案明确地谈到了[真正的内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)/内存分配问题，因为不处理`IDisposable`对象管理内存。虽然这种做法确实不会导致“真正的内存泄漏”，但大多数人会将内存使用量的增长视为内存泄漏（类似于在应用程序的生命周期内将大量对象存储在静态列表/字典中）。
2.  可以创建管理本机内存并错误地实现`IDisposable`模式的对象。在这种情况下，可能真的会泄漏本机内存（无论调用如何`Dispose`）。
3.  在大多数情况下，实现的对象`IDisposable`根本不管理内存。对于大多数实际的 C# 程序，由此类对象管理的本地资源是系统资源的句柄，例如文件、位图、字体、同步对象或 COM 本地对象。不及时处理会导致其他问题。

**妥善处理所有物品**。没有理由不这样做。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T02:03:09.117

约定是，如果一个对象实现了 IDisposable，您应该调用 Dispose() 或使用“使用”模式。Dispose() 和等待析构函数（终结器）执行的区别在于 Dispose() 被立即调用，可用于释放一些重要资源，如 db 连接、文件、设备、非托管 oeject 等。

所以总结一下 - 如果它是 IDisposable - Dispose() 它！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T01:58:46.043

`Dispose()`旨在释放垃圾收集器不会释放的资源，例如数据库连接。这些资源也应该在终结器中释放，但是终结器比`Dispose()`方法慢得多。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-10T02:02:49.267

为了我：

`Dispose`可以在 using() 范围内使用。这可以帮助我确定`IDisposeable`组件的使用寿命。我通常在`StreamWriter`/Reader 或`SqlConnection`类中使用它。

另一个用途`Dispose`是它可以明确地结束组件的生命周期。比如`Form.Dispose()`在C#中调用winform会关闭窗体。但是，对于`SqlConnection`，人们说仅`Dispose`单独调用而不显式调用`Close`并不能保证连接被关闭。建议同时调用`Close`和`Dispose`。我还没有尝试过这个。

还有一件事，在`Dispose()`被调用之后，GC 可以立即释放内存，因为他们知道对象的生命周期已经结束，而不是等待生命周期结束。

类似的问题可能是[C# 处理 IDisposable](https://stackoverflow.com/questions/5462742/c-sharp-disposing-idisposable)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-09T05:19:33.760

> 不能调用 Dispose() 导致内存泄漏？

是的当然。下面只是一个例子。

假设您的应用程序中有一个主窗口，并且您创建了一个对主窗口具有事件订阅的子控件。您在 Dispose 上取消订阅它们。如果您不释放，主窗口可以保留对您的子控件的引用，直到您关闭应用程序。

> 如果您有一个大型程序并且从不对任何 IDisposable 对象调用 Dispose()，那么可能发生的最糟糕的事情是什么？

更糟糕的情况是在您关闭应用程序之前不会释放一些不需要的内存。

另一个问题是，如果您在需要时从不实现 IDisposable 或 finalization 怎么办？

内存泄漏的最坏情况是保留该内存，直到您重新启动 PC。仅当您拥有非托管资源并且未实施 dispose/finalize 时，才会发生这种情况。如果你实现了 Idisposable 接口并实现了终结器，终结过程将为你执行 Dispose。

您应该调用 Dispose 的另一个原因是禁止完成。

正如我之前指出的，如果有任何对象具有 Finalize 方法并且您没有调用 Dispose。该对象可以在内存中驻留两个 GC 周期。在第一个周期中，它将该实例排入终结队列，并在 GC 过程之后发生终结。因此，只有下一个 GC 周期才能释放该内存。

# ruby - 如何从红宝石哈希中删除项目？

> ID：15915628
> 
> 赞同：1
> 
> 时间：2013-04-10T01:55:59.777
> 
> 标签：ruby, arrays, hash

我有一种方法可以计算字符串中单词的频率。我手动包含了一些应该删除的单词。我发现对于短字符串，“the”被删除......对于较长的字符串，例如下面的字符串，该方法仍然打印“the”。关于为什么会这样以及如何解决它的任何想法？

```
def count_words(string)
    words = string.downcase.split(' ')

    delete_list = ['the']
    delete_list.each do |del|
        words.delete_at(words.index(del))
    end

    frequency = Hash.new(0)
    words.each do |word|
        frequency[word.downcase] += 1
    end

    return frequency.sort_by {|k,v| v}.reverse
end

puts count_words('Pros great benefits fair compensation reasonable time off Cons middle management are empty suits, void of vision and very little risk taking
politics have gotten out of control since gates left the building..
sales metrics often do not reflect the contributions of the role, which demonstrates that line management is out of touch of what the individual contributors role really does
middle management does not care about the career of his/her directs, 90% of the time management competes directly with their people, or takes credit for their work
lots of back stabbing going on
Microsoft changes the organization or commitment or comp model, faster than the average deal cycle, making it next to near impossible to develop momentum in role or a rhythm of success
execs promote themselves in years when they freeze employees merit increases
only way to advance is to step on your peers/colleagues and take credit for work you had no impact on, beat your chest loud enough and you get "visibility" you need to advance
visibility is not based on performance by enlarge, it is based on being in your manager\'s swim lane for advancement
I have observed people get promoted in years when they did not meet their quota, nor did the earn the highest performance on the team, they kissed their way to the promotion
Advice to Senior Management 1, get back to risk taking and teaming, less politics please, you are killing the company
2, set realistic commitments and stick to them for multiple years, stop changing the game faster than your people can react
3, stop over engineering commitments and over segmenting the company, people are not willing to collaborate or be corporate citizens
4, too many empty suits in middle management, keep flattening out the company and getting rid of middle managers that run reports all day, get back to a culture where managers also sell and drives wins
5, keep your word microsoft, you said stability, but you keep tinkering with the org too much for any changes to take affect A great Culture
Limitless opportunities
Supportive Management team who are passionate about people
A company that really does want you to have a good work life balance and backs it up with policies that enable you to manage how and where you work.
Cons Support resources are constrained
Can be overly competitve and hard to get noticed
Sales rewards are definitely prioritised and marketing cuts are always prioritised.
Consumer organisation is still far from ideal.
Advice to Senior Management Focus on getting the internal organisation simplified to improve performance and increase empowerment.
Get some REAL consumer focus and invest for the long term
Start connecting with people, focussing on telling stories rather than selling products.') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:57:54.760

只需使用`words.delete("the")`. 您需要做的就是给它钥匙。

您的程序的更简单版本是：

```
def count_words(string)
  words = string.downcase.split(' ').each_with_object(Hash.new(0)) { |w,o| o[w] += 1 }

  delete_list = ['the']

  delete_list.each { |del| words.delete(del) }

  frequency.sort_by {|k,v| v}.reverse
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:26:11.567

在分析 SEO 网页时，这是一个非常常见的问题。这是我写的快速版本：

```
require 'pp'

STOP_WORDS = %w[a and of the]

def count_words(string)

  word_count = string
    .downcase
    .gsub(/[^a-z ]+/, '')
    .split
    .group_by{ |w| w }

  STOP_WORDS.each do |stop_word|
    word_count.delete(stop_word)
  end

  word_count
    .map{ |k,v| [k, v.size]}
    .sort_by{ |k, c| [-c, k] }
end

pp count_words(<<EOT)
Pros great benefits fair compensation reasonable time off Cons middle management are empty suits, void of vision and very little risk taking
politics have gotten out of control since gates left the building..
Start connecting with people, focussing on telling stories rather than selling products.
EOT 
```

为了便于阅读，我特意截断了示例数据。

`<<`在该主题上，当您必须传入大量文本时，您可以使用 here-to (" ") 来改进代码的格式。另一种方法是插入一个`__END__`标记并将其全部放在它之后，然后使用特殊的 IO 对象`DATA`来读取该尾随块：

```
pp count_words(DATA.read)

__END__
Pros great benefits fair compensation reasonable time off Cons middle management are empty suits, void of vision and very little risk taking
politics have gotten out of control since gates left the building..
Start connecting with people, focussing on telling stories rather than selling products. 
```

无论哪种情况，代码都会输出：

```
[[“的”，2]，
 [“和”, 1],
 [“是”，1]，
 [“好处”，1]，
 [“建筑开始”，1]，
 [“补偿”，1]，
 [“连接”，1]，
 [“缺点”，1]，
 [“控制”，1]，
 [“空”，1]，
 [“公平”，1]，
 [“聚焦”，1]，
 [“大门”，1]，
 [“得到”，1]，
 [“伟大”，1]，
 [“有”，1]，
 [“左”，1]，
 [“小”，1]，
 [“管理”，1]，
 [“中间”，1]，
 [“关闭”，1]，
 [“开”，1]，
 [“出”，1]，
 [“人”，1]，
 [“产品”，1]，
 [“优点”，1]，
 [“相当”，1]，
 [“合理”，1]，
 [“风险”，1]，
 [“销售”，1]，
 [“自从”，1]，
 [“故事”，1]，
 [“西装”，1]，
 [“采取政治”，1]，
 [“告诉”，1]，
 [“比”，1]，
 [“时间”，1]，
 [“非常”，1]，
 [“愿景”，1]，
 [“无效”，1]，
 [“与”，1]]

```

[`gsub(/[^a-z ]+/, '')`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort_by)去掉任何不是字母或空格的东西。Enumerable[`group_by`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-group_by)正在做繁重的工作。此外，Enumerable[`sort_by`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort_by)可以很容易地通过计数和单词进行反向排序。

在删除停用词时，我使用哈希而不是数组，因为迭代`STOP_WORD`列表通常比尝试迭代语料库中的单词更快。一个大语料库中的单词很可能比停用词多得多。

# c# - 选择到数组

> ID：15915635
> 
> 赞同：0
> 
> 时间：2013-04-10T01:56:36.590
> 
> 标签：c#, mysql, arrays, executereader

我用`ExecuteReader()`. 它只返回最后一个结果。我想将结果显示为 , 等中`tbid_1.Text`的`tbid_1.Text`数组`tbid_1.Text`。

```
 public void Select(FrmVIRGO frm)
                {

                string query = "SELECT* FROM tb_patient_information ";
                if (this.OpenConnection() == true)
                { //Create Command
                    MySqlCommand cmd = new MySqlCommand(query, connection);
                    //Create a data reader and Execute the command

          MySqlDataReader dataReader = cmd.ExecuteReader();
                        while (dataReader.Read())
                        {

// I think use like this
                       frm.tbid_1.Text = dataReader["id_patient"][1].ToString(); //... id_patient1
                       frm.tbid_2.Text = dataReader["id_patient"][2].ToString(); //... id_patient2
                       frm.tbid_3.Text = dataReader["id_patient"][3].ToString(); //... id_patient3

                        }

                        //close Data Reader
                    dataReader.Close();

                    //close Connection
                    this.CloseConnection();
                    }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:18:59.470

您的代码似乎期望一旦您调用`dataReader.Read()`，您就可以通过索引访问所有记录。

`IDataReader`您的数据阅读器是.NET 数据访问库用来表示“读取查询结果”概念的接口的一个实例。`IDataReader`一次只能访问一条记录。每次调用`dataReader.Read()`时，`IDataReader`前进到下一条记录。当它返回时`false`，表示您已到达结果集的末尾。

例如，您可以将上面的代码转换为以下内容：

```
 dataReader.Read();  // dataReader is at 1st record
        frm.tbid_1.Text = dataReader["id_patient"].ToString();

        dataReader.Read();  // dataReader is at 2nd record
        frm.tbid_2.Text = dataReader["id_patient"].ToString();

        dataReader.Read();  // dataReader is at 3rd record
        frm.tbid_3.Text = dataReader["id_patient"].ToString(); 
```

请注意，这**不是**您应该这样做的方式，我只是用它来说明 a 的`DataReader`工作方式。

如果您期望准确返回 3 条记录，则可以使用类似于上面代码的内容。但是，我会修改它以在您从每条记录中读取数据之前验证它是否`dataReader.Read()`返回`true`，并以一种没有意义的方式处理它的情况（例如，抛出一个解释错误的异常、记录错误等）。

不过，一般来说，如果我使用原始 ADO.Net（而不是使用[OR/M](http://en.wikipedia.org/wiki/Object-relational_mapping)），我更愿意事先将 中的每条记录转换`IDataReader`为字典，然后使用它们。

例如，您可以为 编写以下扩展方法`DataReader`：

```
public static class DataReaderExtensions
{
    public static IList<IDictionary<string, object>> ListRecordsAsDictionaries(this IDataReader reader)
    {
        var list = new List<IDictionary<string, object>>();

        while (reader.Read())
        {
            var record = new Dictionary<string, object>();

            for (var i = 0; i < reader.FieldCount; i++)
            {
                var key = reader.GetName(i);
                var value = reader[i];
                record.Add(key, value);
            }

            list.Add(record);
        }

        return list;
    }
} 
```

此方法遍历`IDataReader`，并将每一行的值粘贴到`Dictionary<string, object>`. 我发现这种模式在处理原始 ADO 内容时通常非常有用。

这种方法有几个注意事项：

*   在从服务器接收到*所有*数据之前，您无法访问记录（字典实例） 。如果您在`DataReader`使记录可用时单独处理记录，您实际上可以在其中一些数据仍在传输中时开始处理数据。（注意：这可以通过使此方法返回`IEnumerable<IDictionary<string, object>>`而不是 来解决`IList<IDictionary<string, object>>`，并`yield return`在每条记录可用时使用它来生成。）
*   如果您正在迭代一个大型数据集，您可能不想实例化那么多字典。最好单独处理每条记录。
*   您无法访问可以提供有关记录的某些信息（例如，您在遍历记录`DataReader`时无法使用）。`DataReader.GetDataTypeName`

# javascript - 用jquery替换html页面中的单词或单词中的某些字符

> ID：15915636
> 
> 赞同：1
> 
> 时间：2013-04-10T01:56:36.837
> 
> 标签：javascript, jquery, regex

我发现jquery代码（我忘记了原始站点）正在将html页面中的一个单词替换为星号（*），并且代码运行良好，但该代码只能用于替换每个单词, 不能改变单词的部分并且区分大小写。

jQuery代码：

```
String.prototype.repeat = function(num){
  return new Array(num + 1).join(this);
}

/* Word or Character to be replace */
var filter = ['itch','asshole', 'uck', 'sex'];
$('body').text(function(i, txt){
  // iterate over all words
  for(var i=0; i<filter.length; i++){
    // Create a regular expression and make it global
    var pattern = new RegExp('\\b' + filter[i] + '\\b', 'g');
    // Create a new string filled with '*'
    var replacement = '*'.repeat(filter[i].length);
    txt = txt.replace(pattern, replacement);
  }
  // returning txt will set the new text value for the current element
  return txt;
}); 
```

词过滤器：

```
 ['itch','asshole', 'uck', 'sex']; 
```

结果：

```
sex -> ***    // successfully replacing
SEX -> SEX    // not replaced, i want this word also replaced to ***
bitch -> bitch // not replaced, i want this word replaced to b**** 
```

如何修改这个jquery代码，以便可以用来改变单词中的一些字符而不区分大小写？

小提琴：http: [//jsfiddle.net/bGhq8/](http://jsfiddle.net/bGhq8/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:03:20.200

使用区分大小写的选项，不需要边界。

```
String.prototype.repeat = function(num){
  return new Array(num + 1).join(this);
}

/* Word or Character to be replace */
var filter = ['itch','asshole', 'uck', 'sex'];
$('body').text(function(i, txt){
  // iterate over all words
  for(var i=0; i<filter.length; i++){
    // Create a regular expression and make it global

    var pattern = new RegExp(filter[i] , 'gi'); // Add the "i" modifier for case insensitivity
    // Create a new string filled with '*'
    var replacement = '*'.repeat(filter[i].length);
    txt = txt.replace(pattern, replacement);
  }
  // returning txt will set the new text value for the current element
  return txt;
}); 
```

更新小提琴：http: [//jsfiddle.net/bGhq8/3/](http://jsfiddle.net/bGhq8/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:04:16.007

您提供的代码中的以下行：

```
var pattern = new RegExp('\\b' + filter[i] + '\\b', 'g'); 
```

匹配单词边界（例如空格）。换句话说，它是`filter`数组中每个单词的全词匹配。

要匹配过滤器中出现的*任何*单词，无论它们是否作为部分单词出现，您都可以`'\\b'`从正则表达式的开头、结尾或两端删除。

然而，这种方法并不理想。大量合法的、非冒犯性的词 - `itch`、`sextet`等 - 将被您的过滤器审查。如果没有以下任何一项，这不是一件容易解决的事情：

*   保持原代码中的单词边界约束

*   为您希望审查的每个冒犯性词编写自定义正则表达式（可能太耗时）

您应该注意，没有一种方法不会没有误报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:11:55.143

您看到您提到的行为的原因是您编写的正则表达式（在下面重复）：

```
var pattern = new RegExp('\\b' + filter[i] + '\\b', 'g'); 
```

对于初学者，要让它以不区分大小写的方式替换值，您需要添加 'i' 标志以不区分大小写

```
var pattern = new RegExp('\\b' + filter[i] + '\\b', 'gi'); 
```

此外，它只替换整个单词的原因是单词边界标志 (\b) 被放置在搜索条件周围。如果您不想将自己限制为替换整个单词，则需要考虑哪些其他模式可以替换，以及您希望如何替换它们。通过在模式之前允许零个或一个字母来让您更接近的一种可能的解决方案是：

```
var pattern = new RegExp('\\b([A-Z]?)' + filter[i] + '\\b', 'gi');
var replacement = '$1'+'*'.repeat(filter[i].length);
txt = txt.replace(pattern, replacement); 
```

作为旁注[http://regexpal.com/](http://regexpal.com/)是测试（并因此学习）正则表达式的好地方。

# jwplayer - 在视频的特定时间内禁用 JW Player 控制栏

> ID：15915637
> 
> 赞同：1
> 
> 时间：2013-04-10T01:56:38.430
> 
> 标签：jwplayer

就像标题所说的那样，我如何创建一个在视频的特定时间内禁用控制栏的事件？我正在使用 JW Player 5.10。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T17:16:47.680

如果您需要强制执行此操作，您可以通过创建两个都使用相同视频/播放列表的 jwplayer 来强制执行此操作。

一个隐藏控件，一个显示控件。

这是棘手的部分，设置一个“超时”，持续到达您想要隐藏控件的视频部分所需的时间。

```
var timeout = setTimeout(function(){"Hide the jwplayer with controls, unhide the other jwplayer"}, 30000); 
```

30000 表示以毫秒为单位的时间量。

从那里你有一个事件可以让你隐藏带有控件的 jwplayer（将 div 元素设置为隐藏）。最后，将另一个 jwplayer div 设置为不隐藏。

# mysql - MySQL IF...ELSE 或 IF EXISTS 语句

> ID：15915640
> 
> 赞同：1
> 
> 时间：2013-04-10T01:57:31.180
> 
> 标签：mysql, insert-select

快速提问。我目前正在使用 INSERT...SELECT 语句来检查用户在成为教练之前是否拥有基本会员帐户。此代码工作正常：

```
INSERT into coaches (U_Name, P_word, M_ID)
SELECT members.U_Name,members.P_word,members.M_ID FROM members
WHERE members.U_Name="bob1" AND members.P_word="123"
ON DUPLICATE KEY UPDATE U_Name = members.U_Name, P_word = members.P_word; 
```

如您所见，如果他们已经存在，我目前只是用相同的数据更新他们的帐户。我现在要做的是，如果用户是会员并且已经成为教练，则显示一条消息，通知他们他们已经注册为教练。
所以我的问题是，我是否将其包装在 IF...ELSE 语句中，或者我是否使用 IF EXISTS 语句，例如[如果不存在则插入，否则只需在 mysql 中选择](https://stackoverflow.com/questions/2278837/insert-if-not-exists-else-just-select-in-mysql)
正在考虑以下几点：

```
IF EXISTS(SELECT coaches.U_Name,coaches.P_word,coaches.M_ID FROM coaches 
WHERE coaches.U_Name="bob1" AND coaches.P_word="123")
ELSE
BEGIN
INSERT into coaches (U_Name, P_word, M_ID)
SELECT members.U_Name,members.P_word,members.M_ID FROM members
WHERE members.U_Name="bob1" AND  members.P_word="123"
END; 
```

在这里也看过这个例子：[MySql IF exists select ELSE insert](https://stackoverflow.com/questions/12676322/mysql-if-exists-select-else-insert)但不确定我将如何实现它。任何关于从这里去哪里的说明将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:01:15.323

INSERT ... ON DUPLICATE KEY UPDATE 语法可以帮助您解决问题。它从 mySQL 5.0 开始可用

参考：[http ://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# mysql - 如何使用 tmhOAuth 将存储在 mysql DB 中的图像发送到 twitter

> ID：15915641
> 
> 赞同：-1
> 
> 时间：2013-04-10T01:57:32.070
> 
> 标签：mysql, json, twitter, media

我正在使用下面的代码将状态和图像发布到 Twitter。该库是 tmhOAuth，图像来自我的 mysql 数据库中的一个 blob，mime 类型和文件名也是如此。

基本上，如果找到存储在数据库行中的图像，那么它会使用“update_with_media”的帖子发送到 twitter，如果没有找到图像，那么它只会使用“update”单独发送状态更新。“更新”工作正常，但我无法通过媒体工作获得更新。我尝试了各种网站的几种变体，包括 Twitter 的开发网站，但没有任何乐趣。我真的很感激这方面的任何帮助。

```
if(!empty($imgid)) {

$getimg = mysql_query("SELECT filedata, filename, mime_type FROM post_images WHERE id = $imgid");
$img = @mysql_fetch_array($getimg); 

$imagedata = $img['filedata'];
$imagename = $img['filename'];
$imagetype = $img['mime_type'];                                     

$theimg = "@{$imagedata};type=$imagetype;filename={$imagename}";
$hasimg = "y";                  
}

if($hasimg == "y") {
    $code = $connection->request( 'POST',  
    $connection->url('https://upload.twitter.com/1/statuses/update_with_media.json'),
   array(
        'media[]'  => $theimg,
        'status'   => $thetweet),
    true, // use auth
    true  // multipart
);
} else {
    $code = $connection->request('POST', 
    $connection->url('1.1/statuses/update'), 
    array('status' => $thetweet));
}

// A response code of 200 is a success
if ($code == 200) {
  print "Tweet sent";
} else {
  print "Error: $code";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:06:38.043

如果其他人有类似的问题，我的问题是格式化。我没有使用变量“$theimg”，而是替换了

```
'media[]'  => $theimg, with 'media[]'  => "$imagedata; type=$imagetype; filename=$imagename" 
```

希望对某人有所帮助...

和平！

# java - 为什么我对项目 euler 1 的解决方案不起作用？

> ID：15915649
> 
> 赞同：0
> 
> 时间：2013-04-10T01:58:16.087
> 
> 标签：java

我决定尝试获取仅达到 10 的小示例，如所示示例。

> 如果我们列出所有小于 10 且是 3 或 5 的倍数的自然数，我们会得到 3、5、6 > 和 9。这些倍数的总和是 23。
> 
> 求 1000 以下所有 3 或 5 的倍数之和。

```
public class project1 {

    public static void main(String[] args) {
        int three=0;
        int tot3=0;
        int five=0;
        int tot5=0;
        int total;

        while (tot3<10) {
            three+=3;
            tot3=tot3+three;
        };
        while (tot5<10) {
            five+=5;
            tot5=tot5+five;
        };

        total=tot3+tot5;

        System.out.println("Three's: " + tot3);
        System.out.println("Five's: " + tot5);
        System.out.println("Combined: " + total);
    }

} 
```

我的输出如下所示：

> 三人：18
> 五人：15
> 综合：33

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:05:49.083

既是 3 和 5 的倍数（例如 15）的数字会被计算两次 - 每个循环一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:29:31.550

通过循环跟踪你的变量，你会发现问题：for tot3

*   =3
*   =9
*   =18
*   =30

您正在跟踪总和，而不是跟踪倍数。这个问题部分解决了

> 而（三<10）

同样，通过循环跟踪变量，您会发现这是错误的 - 它停在 12，而不是您想要的 9。将其更改为

> While(three<9) //即限制之前的最后一个可整除的数字，或者如果它可整除的限制（在 5 的情况下）

总而言之，一个更加优雅的解决方案将涉及模数和一个不错的小 if 语句。我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T02:08:34.990

我建议考虑使用模块化运算符来解决这个问题。在 java 中 % 将允许您执行模运算。例如 3 的任意倍数，例如 9 % 3 = 0 而 9 % 2 = 1。它可以被认为是第一个数除以第二个数后剩下的数。由该数字修改的数字的所有倍数都将返回零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T02:06:01.327

```
while (tot3<10) {
        three+=3;
        tot3=tot3+three;
}; 
```

我想你的意思是

```
while (tot3<10) {
        three += tot3; // Add this multiple of 3 to the total.
        tot3+=3;       // increment the "next multiple"
    } 
```

（5个一样）

孤星云也提出了一个很好的观点——你需要在“5”循环中添加逻辑，以检查它是否还没有计入 3 循环。mod (%) 运算符可以提供帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T02:06:17.147

第一的，

```
while (tot3<10) {
    three+=3;
    tot3=tot3+three;
};
while (tot5<10) {
    five+=5;
    tot5=tot5+five;
}; 
```

这应该是

```
while (three<10) {
    three+=3;
    tot3=tot3+three;
};
while (five<10) {
    five+=5;
    tot5=tot5+five;
}; 
```

因为你关心的是什么时候开始计算超过 10 的数字，而不是你的总和超过 10 的时候。

其次，您的解决方案将计算三的倍数和五的倍数两次。例如，15 将被添加两次。了解模运算符 ,`%`以提出解决方案（例如，不将 5 添加到 tot5 计数 if `five % 3 == 0`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T02:17:08.030

```
public class project1 {

    public static void main(String[] args) {
        int number = 0;
        int total = 0;

        while (number < 10) {
            System.out.println(number);

            if ((number % 3) == 0) {
                System.out.println(number + " is a multiple of 3");
                total = total + number; 
            }
            else if ((number % 5) == 0) {
                System.out.println(number + " is a multiple of 5");
                total = total+number;   
            }
            number++;
        }
        System.out.println("total = "+ total);
    }
} 
```

看看我有多慢，我做了和其他人大致相同的事情，但换成了模数函数。模数函数为您提供第一个数字除以第二个数字的余数（int），并且可以与另一个整数进行比较。这里我用它来检查当前数字是否可以直接被 3 或 5 整除，如果值为 true，则将其添加到总数中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-07T07:37:08.337

[尝试这个](https://interviewquizandanswers.blogspot.com/2020/04/project-euler-1-multiples-of-3-and-5.html)

```
import java.util.*;

public class Solution {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        int t = in.nextInt();
        for(int a0 = 0; a0 < t; a0++){
            long n = in.nextLong()-1;
            System.out.println((n-n%3)*(n/3+1)/2 + (n-n%5)*(n/5+1)/2 - (n-n%15)*(n/15+1)/2);
        }
    }
} 
```

# python - 在线程服务器中调用 select.select() 的正确方法

> ID：15915651
> 
> 赞同：2
> 
> 时间：2013-04-10T01:58:44.210
> 
> 标签：python, multithreading, python-2.7, vpn, tunnel

我正在尝试编写一个 VPN 服务器，多个客户端可以在虚拟网络上相互连接。所以我需要一个线程服务器来同时向/从客户端发送和接收数据。可以为每个客户端创建一个隧道接口，它代表客户端在服务器上的虚拟接口。

我有两种使用`select()`函数在服务器上读取/写入隧道的解决方案：

1.  使用单个线程调用`select([tun0,tun1,tun2],[tun0,tun1,tun2],[])`所有隧道的函数，并使用缓冲区来阻止流量。
2.  `select([tun0],[tun0],[])`在特定客户端的线程上单独调用函数。

我的问题是：哪种方式更好？

# ios - UIWebView : 捕获 UIWebView 进行的中间调用

> ID：15915654
> 
> 赞同：0
> 
> 时间：2013-04-10T01:59:12.700
> 
> 标签：ios

我正在使用 UIWebView 打开一个 URL。在 UIWebView 中运行的 Java 脚本发出中间请求，有没有办法获取有关这些请求和响应的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:48:19.017

The UIWebViewDelegate method webView:shouldStartLoadWithRequest:navigationType: will let you inspect all the requests for a UIWebView before they are made.

# python-2.7 - Python SSL网页抓取

> ID：15915656
> 
> 赞同：1
> 
> 时间：2013-04-10T01:59:38.197
> 
> 标签：python-2.7

我正在尝试使用 Python 2.7 和 BeautifulSoup 抓取网页，但我无法克服对我来说没有多大意义的协议错误。这只发生在我需要这样做的特定网站上：[https ://edd.telstra.com/telstra](https://edd.telstra.com/telstra)

我仅用于基本测试的代码：

```
#! /usr/bin/python

from urllib import urlopen
from BeautifulSoup import BeautifulSoup
import re

# Copy all of the content from the provided web page
webpage = urlopen("https://edd.telstra.com/telstra/").read() 
```

我收到以下错误（在 Ubuntu 12.10 上运行）：

```
Traceback (most recent call last):
File "e.py", line 8, in <module>
webpage = urlopen("https://edd.telstra.com/telstra/").read()
File "/usr/lib/python2.7/urllib.py", line 86, in urlopen
return opener.open(url)
File "/usr/lib/python2.7/urllib.py", line 207, in open
return getattr(self, name)(url)
File "/usr/lib/python2.7/urllib.py", line 436, in open_https
h.endheaders(data)
File "/usr/lib/python2.7/httplib.py", line 958, in endheaders
self._send_output(message_body)
File "/usr/lib/python2.7/httplib.py", line 818, in _send_output
self.send(msg)
File "/usr/lib/python2.7/httplib.py", line 780, in send
self.connect()
File "/usr/lib/python2.7/httplib.py", line 1165, in connect
self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
File "/usr/lib/python2.7/ssl.py", line 381, in wrap_socket
ciphers=ciphers)
File "/usr/lib/python2.7/ssl.py", line 143, in __init__
self.do_handshake()
File "/usr/lib/python2.7/ssl.py", line 305, in do_handshake
self._sslobj.do_handshake()
IOError: [Errno socket error] [Errno 1] _ssl.c:504: error:1408F119:SSL routines:SSL3_GET_RECORD:decryption failed or bad record mac 
```

有人可以告诉我是否需要指定一些参数才能让这个页面在 Python 中下载？似乎这只是这个网页上的问题，因为上面的代码（加上我尝试过的许多其他代码）在我尝试过的其他 HTTPS/SSL 页面上运行良好。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T11:47:57.750

我可以推荐使用 requests lib ：

```
def get_page(login, password):
    '''Docstring 
    '''
    url = 'https://qwe.qwe'

    payload = {
        'user': login,
        'pass': password
    }

    with requests.Session() as my_session:
        my_session.post(url, data=payload)
        data = my_session.get(url)
    return data.text 
```

更多信息：[http ://docs.python-requests.org/en/latest/user/advanced/#session-objects](http://docs.python-requests.org/en/latest/user/advanced/#session-objects)

# c++ - VS2012 C++ 中奇怪的正则表达式行为

> ID：15915659
> 
> 赞同：0
> 
> 时间：2013-04-10T02:00:04.813
> 
> 标签：c++, regex, c++11

此代码片段：

```
smatch m;
auto   a = regex_search ("uyiu #23->45 kjlk",    regex ("->"));
auto   b = regex_match  ("uyiu #23->45 kjlk", m, regex ("->"));

cout << a << " " << b; 
```

产生（在 VS2012 C++ 中）：

```
1 0 
```

并且`m`是空的。为什么不`1 1`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:02:53.223

来自 regex_match 的文档：

**整个目标序列**必须与该函数的正则表达式匹配才能返回 true。

[http://www.cplusplus.com/reference/regex/regex_match/](http://www.cplusplus.com/reference/regex/regex_match/)

# database - 如何转到旧版本的架构？

> ID：15915664
> 
> 赞同：0
> 
> 时间：2013-04-10T02:00:40.273
> 
> 标签：database, django, heroku, django-south, schema-migration

我在 Heroku 中有一个 Postgre SQL 数据库。我遇到了一些问题。我需要删除一些本地迁移文件并创建包含所有迁移的全新架构迁移文件（有效）。

我的 Heroku 数据库中已经存在来自这个新模式迁移文件的关系，当我尝试迁移时，出现此错误：

```
django.db.utils.DatabaseError: relation "quizzer_speaker" already exists 
```

我怎样才能让 Heroku 真正进行迁移？或者我怎样才能让它转到不存在该关系的先前版本，所以我可以毫无问题地迁移？

# ios - iOS 数据库教程

> ID：15915668
> 
> 赞同：2
> 
> 时间：2013-04-10T02:01:32.720
> 
> 标签：ios, database, sqlite

我是 iOS 新手，正在尝试学习如何远程设置数据库并使我的项目连接到它。我一直在网上搜索教程，但似乎找不到任何好的教程。所以我想知道是否有人可以向我推荐一些好的教程，以学习如何将我的 iOS 项目连接到数据库。

任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:23:03.903

您可以从连接 MySQL 数据库开始，因为设置 MySQL 非常简单。试试[这个](http://www.karlkraft.com/index.php/2010/06/02/mysql-and-objective-c/)。

这似乎是一个类似的问题。我建议您学习 PHP 的基础知识，通过 PHP 连接到 MySQL 并读取所有数据库内容并将其作为 JSON 回显，您的移动客户端可以使用[JSON 解析器](https://stackoverflow.com/questions/4025349/is-there-an-3rd-party-library-for-parsing-json-on-the-iphone/4025379#4025379)来解析并为您提供回显的有效信息你的 PHP 脚本。

要设置 Apache、MySQL、PHP，您可以使用[MAMP for mac](http://www.mamp.info/en/index.html)，或者如果 windows 尝试[WAMP 服务器](http://www.wampserver.com/en/)

我用 MAMP 做了一个小服务，只是将 JSON 回显给客户端

```
<?php
// Returns: ["Apple","Banana","Pear"]
echo json_encode(array(fruit1=>"Apple", fruit2=>"Banana", fruit3=>"Pear",fruit4=>"JackFruit",fruit5=>"Guava",fruit6=>"Pomogrenate"));
 ?> 
```

因此，您应该从 MySQL 数据库中获取结果并回显它，而不是硬编码值。

```
<?php
$con=mysqli_connect("localhost or host name","username","password","databasename");
// Check connection
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT * FROM Persons");

while($row = mysqli_fetch_array($result))
{
echo json_encode(array(firstname=>$row['FirstName'],lastname=>$row['LastName']));
echo "<br />";
}

mysqli_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:05:49.553

[Ray Wenderlich](http://raywenderlich.com)有一些很棒的教程，用于在您的应用程序中本地设置 Core Data。[从这里](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)开始。从那里开始，它可以像将数据库与[StackMob](http://stackmob.com)等云服务同步一样简单。您最终使用的确切服务显然取决于您的项目目标，但是这两种服务都提供了详尽的文档，并且是一个很好的起点。

# android - 如何在没有 createBitmap 的情况下调整 bimap 的大小以避免 oom 问题

> ID：15915669
> 
> 赞同：0
> 
> 时间：2013-04-10T02:01:43.650
> 
> 标签：android, bitmap, resize, out-of-memory

经过研究，我只找到 InSampleSize 来调整位图的大小

但我正在寻找可以让我将位图大小调整为更大或更小的东西，具体取决于屏幕分辨率

由于 bitmap.createBitmap 会导致 OOM，我必须使用其他东西......

请帮忙

这是我调整位图大小的代码，每次调整位图大小时都会产生 5mb~10mb 的凹凸

```
Bitmap createdBitmap = Bitmap.createScaledBitmap(bitmap, newWidth, newHeight, true); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:24:42.170

您可以使用它来获取当前正在运行的屏幕：

```
@Override
public void onSizeChanged(int w, int h, int oldw, int oldh)
{
    super.onSizeChanged(w, h, oldw, oldh);
    screenW = w;
    screenH = h;
} 
```

然后使用它来加载位图，以便您将其合理地加载到内存中：

```
 BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(selectedImagePath, options);
        int imageHeight = options.outHeight;
        int imageWidth = options.outWidth;
        String imageType = options.outMimeType;
        if(imageWidth > imageHeight){
            options.inSampleSize = calculateInSampleSize(options,screenH,screenW);

        }else{
            options.inSampleSize = calculateInSampleSize(options,screenW,screenH);

        }
        options.inJustDecodeBounds = false;
        photo = BitmapFactory.decodeFile(selectedImagePath,options); 
```

方法：

```
public int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {

    // Calculate ratios of height and width to requested height and width
    final int heightRatio = Math.round((float) height / (float) reqHeight);
    final int widthRatio = Math.round((float) width / (float) reqWidth);

    // Choose the smallest ratio as inSampleSize value, this will guarantee
    // a final image with both dimensions larger than or equal to the
    // requested height and width.
    inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
}

return inSampleSize;
} 
```

# android - ListView 在自定义 ViewGroup 的 ViewPager 中不可见

> ID：15915671
> 
> 赞同：1
> 
> 时间：2013-04-10T02:01:53.550
> 
> 标签：android, android-listview, android-custom-view, viewgroup

我有`ViewGroup`一个`ViewPager`小时候的习俗。这是因为我想在其中添加一个静态标题`ViewPager`并弄乱标题`onDraw()`以使标题随`ViewPager`内容垂直滚动。我小时候`ViewPager`有一个。`ListView`我能够创建`ListView`和 适配器，甚至可以将适配器设置为`ListView`. 当我阅读`wallList.getAdapter().getItemAt(0).toString()`它时，它会返回我希望它返回的数据。但由于某种原因，我根本看不到`ListView`。

仍然按预期工作，`ViewPager`其他四页暂时有任意文本。但是应该包含的中心页面`ListView`显示一个空白屏幕。我不知道发生了什么，但这听起来与我之前在[这里](https://stackoverflow.com/questions/14993439/calling-setadapter-in-facebook-oncomplete)遇到的问题相似，并且能够破解我的方式以获得可接受的东西，但无法回答我原来的问题。

似乎您只能`setAdapter()`在某些地方调用，不仅必须在 UI 线程上（我认为），而且在某些自定义或覆盖的方法中似乎很难做到这一点。这是我的自定义 ViewGroup 代码。

```
public class CustomProfilePager extends ViewGroup{

Bitmap coverPhoto, profilePhoto;
Paint coverStyle, profileStyle;
String name;
int coverHeight;
ViewPager pager;
ProfilePagerAdapter pagerAdapter;
ListView wallList;
Context context;

public CustomProfilePager(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    Log.i("CustomPager", "calling onLayout()");
    pager.layout(0, coverHeight+240, getWidth(), getHeight());
//      for(int i=0; i<getChildCount(); i++){
//          getChildAt(i).layout(l, t, r, b);
//      }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

@Override
protected void onDraw(Canvas canvas) {
    Log.i("CustomPager", "calling onDraw()");
    super.onDraw(canvas);
    if(coverPhoto!=null){
        canvas.drawBitmap(coverPhoto, 0, 0, coverStyle);
    }
}

public void init(String name){
    Log.i("CustomPager", "calling init()");
    this.name = name;
    coverStyle = new Paint();
    coverHeight = (int) (getWidth()/2.7);
    profileStyle = new Paint();
    wallList = new ListView(context);
    pagerAdapter = new ProfilePagerAdapter();
    pager = new ViewPager(context);
    pager.setAdapter(pagerAdapter);
    addView(pager);
    pager.setCurrentItem(2);
    pager.setOffscreenPageLimit(4);
}

public void setCoverPhoto(Bitmap bitmap){
    Log.i("CustomPager", "calling setCoverPhoto()");
    int initialWidth = bitmap.getWidth();
    int initialHeight = bitmap.getHeight();
    int finalHeight = (int) (initialWidth/2.7);
    int initialYoffset = (int) (initialHeight-finalHeight)/2;
    this.coverPhoto = Bitmap.createBitmap(bitmap, 0, initialYoffset, bitmap.getWidth(), finalHeight);
    invalidate();
}

public void setProfilePhoto(Bitmap bitmap){
    this.profilePhoto = bitmap;
}

public ViewPager getViewPager(){
    return pager;
}

public void setWallAdapter(Profile.WallAdapter adapter){
    Log.i("CustomPager", "calling setWallAdapter()");
    wallList.setAdapter(adapter);
}

public class ProfilePagerAdapter extends PagerAdapter {
    @Override
    public void destroyItem(ViewGroup collection, int position, Object view) {
        ((ViewPager) collection).removeView((View) view);
    }
    @Override
    public Object instantiateItem(ViewGroup collection, int position) {
        ViewPager parent = (ViewPager) collection;
        switch (position) {
        case 2: // Wall
            wallList.setDividerHeight(0);
            parent.addView(wallList);
            return wallList;
        default:
            TextView testText = new TextView(context);
            testText.setText(String.valueOf(position) + ": " + name);
            testText.setTextSize(46);
            testText.setGravity(Gravity.CENTER);
            parent.addView(testText);
            return testText;
        }
    }
    @Override
    public int getCount() {
        return 5;
    }
    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:14:13.987

我也有经验，我的 ViewPager 中的一些视图迷路了。当调试知道它在 ViewPager 中只包含 2 个（有时甚至 1 个）视图时。但实际上必须有 3 个视图，因为我实现了循环 viewpager。

经过多次试验和错误方法后，我评论了 destoryItem 中的 removeView 行，我很惊讶，它工作得很好。

我不确定这会解决您的问题，因为 destroyItem 的文档说

> 删除给定位置的页面。适配器负责从其容器中删除视图，尽管它只必须确保在从 finishUpdate(ViewGroup) 返回时完成此操作。

对我来说，我的 ViewPager 中应该总是有 3 个视图。因为它是一个圆形的 ViewPager。

```
public class ProfilePagerAdapter extends PagerAdapter {
    @Override
    public void destroyItem(ViewGroup collection, int position, Object view) {

    }
    @Override
    public Object instantiateItem(ViewGroup collection, int position) {
        ViewPager parent = (ViewPager) collection;
        switch (position) {
        case 2: // Wall
            wallList.setDividerHeight(0);
            parent.addView(wallList);
            return wallList;
        default:
            TextView testText = new TextView(context);
            testText.setText(String.valueOf(position) + ": " + name);
            testText.setTextSize(46);
            testText.setGravity(Gravity.CENTER);
            parent.addView(testText);
            return testText;
        }
    }
    @Override
    public int getCount() {
        return 5;
    }
    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:53:16.273

您可能只需要打电话

```
notifyDataSetChanged() 
```

在 PagerAdapter 上，然后 ListView 将正确显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:11:03.650

您是否在您的 customViewGroup 上调用了 setWillNotDrawEnabled(false)？

默认情况下 ViewGroups 不调用 onDraw 方法，也尝试实现 onDispatchDraw 而不是 onDraw 方法

[Android 自定义布局 - onDraw() 永远不会被调用](https://stackoverflow.com/questions/13056331/android-custom-layout-ondraw-never-gets-called)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:23:19.023

这个问题并不是很明显，我不确定到底是什么原因造成的。我所要做的就是 sublass`FrameLayout`而不是`ViewGroup`一切正常。

# php - 更改所有像素而不是某种颜色

> ID：15915678
> 
> 赞同：0
> 
> 时间：2013-04-10T02:03:09.533
> 
> 标签：php, image, syntax, gd, rgb

只是为了我的问题，让我们说这个功能：

```
int imagecolorexact ( resource $image , int $red , int $green , int $blue ) 
```

我们可以像这样简单地调用它：

```
$index = imagecolorexact($image, 0, 0, 0); 
```

显然，因为我们正在讨论的示例是关于 RGB 颜色的，因此 $red、$green 和 $blue 的值介于 0 和 255 之间。此函数返回具有该 rgb 化合物的像素的索引。

我需要的是获取它们的复合**不是**（0、0、0）的所有像素的索引，所以我想这样做：

```
for($i = 0; $i <= 255; $i++) {
    for($j = 0; $i <= 255; $i++) {
        for($k = 0; $i <= 255; $i++) {
            $index[] = imagecolorexact($image, $i, $j, $k);
        }
    }
} 
```

但这将运行 255*255*255 次，我很怀疑。

**我的问题是：有没有办法简化这个？**

**我为什么要问这个？** 我正在尝试将图像中的所有黑色像素更改为黄色，因此将是：

```
$image = imagecreatefrompng("./test.png");
imagecolorset($image, imagecolorexact($image, 0, 0, 0), 255, 255, 0); 
```

而且我需要将同一图像中的所有非黑色像素更改为黑色，因此（我想？）：

```
for($i = 1; $i <= 255; $i++) {
    for($j = 1; $i <= 255; $i++) {
        for($k = 1; $i <= 255; $i++) {
            $index = imagecolorexact($image, $i, $j, $k);
            imagecolorset($new, $value, 0, 0, 0);
        }
    }
} 
```

**因此，我问是否有更好的优化方法？**

# iphone - iOS-如何使 UIImage 看起来像素化而不是模糊

> ID：15915679
> 
> 赞同：1
> 
> 时间：2013-04-10T02:03:09.890
> 
> 标签：iphone, ios, image-processing, uiimage

我什至不知道如何表达这个问题......但基本上我有一个小图像，我想拉伸它以覆盖屏幕。由于放大，图像很模糊，我希望它看起来像块状，所以我可以看到单个像素为正方形。有没有什么简单的方法可以达到这个效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:07:58.193

将图像绘制为图层的内容，然后通过放大图层将其放大（给它一个缩放变换，或者更好的是，使用该`contentsRect`属性使图像小区域填充图层）。该层仅由原始位图支持，因此您现在将看到位图的位。IIRC 如果您使用`shouldRasterize`.

# jquery - jsoup css 选择器：不是

> ID：15915680
> 
> 赞同：0
> 
> 时间：2013-04-10T02:03:09.820
> 
> 标签：jquery, css-selectors, jsoup

我想知道 jsoup 是否支持这个 css 选择器：

```
$('select[name=bankType] option:not([value=])') 
```

它适用于**jQuery 1.8**，但不适用于**jsoup 1.7.2**。我想知道是否有任何等效的语法来执行此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:35:07.423

`:not(selector)` *elements that do not match the selector.*

Check out the documentation about [jsoup cssSelector](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)

Example : `div:not(.logo)` *finds all divs that do not have the "logo" class.*

# bash - 在 bash 脚本中设置别名

> ID：15915684
> 
> 赞同：3
> 
> 时间：2013-04-10T02:03:27.533
> 
> 标签：bash

我正在尝试在这样的脚本中创建别名：

```
#!/bin/bash
shopt -s expand_aliases

#Currently just using 'git' to try and get it working
#It'll be replaced with the following line when it works
#compgen -c | while read x;
echo 'git' | while read x;
  do
    a=`echo $x | tr '[:lower:]' '[:upper:]'`;
    echo $a;
    echo $x;
    if [ "$a" != '' ]
    then
      echo 'got here';
      alias $a=$x;
      alias;
      GIT;
    fi
done 
```

虽然一个简单的测试脚本有效（`testme`添加到我当前 shell 的别名中）：

```
#!/bin/bash
shopt -s expand_aliases
alias testme="echo It Worked"
alias
testme 
```

第一个脚本的输出：

```
GIT
git
got here
alias GIT='git'
alias grep='grep --colour=auto'
alias ls='ls --color=auto'
GIT: command not found 
```

`GIT`显示在别名中，但无法执行。我试过用`. ./script.sh`and来调用它`source script.sh`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T03:33:54.283

这可能是别名扩展*时的问题。*bash 手册页有以下内容：

> 关于别名的定义和使用的规则有些混乱。在执行该行的任何命令之前，Bash 总是读取至少一个完整的输入行。别名在读取命令时扩展，而不是在执行命令时扩展。...

手册页中有更多信息，但是当执行复合语句（例如`while`循环中的列表）时，扩展将在第一次读取输入时发生，而不是在执行时发生。由于`GIT`在读取输入时未定义，因此会出现错误。

以下代码段显示了该问题：

```
#!/bin/bash
shopt -s expand_aliases

while read x; do
    a=`echo $x | tr '[:lower:]' '[:upper:]'`
    alias $a=$x
    GIT   # <--- this fails to execute git
done < <(echo 'git')

GIT # <--- this executes git 
```

一旦执行了 while 循环，别名就会变得可用。手册页中的详细信息有点粗略，但似乎函数中定义的别名的注释将适用。

此外，在使用诸如`echo foo | while read x; do stuff; done`. 循环将`while`在子shell中执行，在子shell中所做的任何更改都不会持续到`while`循环之外。上面的示例显示了一种方法，以便 while 循环在当前 shell 中执行，但从执行的命令中获取其输入。

**更新：**

如果上面的脚本以原始形式编写，它将如下所示：

```
#!/bin/bash
shopt -s expand_aliases

#Currently just using 'git' to try and get it working
#It'll be replaced with the following line when it works
#compgen -c | while read x;

echo 'git' | while read x; do
    a=`echo $x | tr '[:lower:]' '[:upper:]'`
    alias $a=$x
    GIT   # <--- this fails to execute git
done

GIT # <--- this also fails executes git because the alias' were set in a subshell. 
```

在这种情况下，别名永远不会被执行。这样做的原因是管道`|`星一个新的子外壳并将进程链接在一起。在`echo`一个进程中运行，在另一个进程中`while read ...`运行，通过管道连接。设置别名时，它们是在运行`while`循环的子外壳进程的环境中设置的。但是，当`while`循环完成时，该进程终止并丢弃其环境，以及对其环境所做的任何更改，例如添加别名。结果，第二次尝试执行`GIT`将失败，因为别名信息已被丢弃。

当您使用第一个脚本中显示的拓扑时，`while`循环在当前脚本中运行，因此对环境所做的任何更改都会在循环结束后持续存在。

*如果您执行*脚本而不是采购它，您也会注意到这种行为。如果您希望能够在这样的脚本中配置一组别名，请运行脚本，让它们在您的环境中可用，您会遇到同样的问题，因为您的脚本在父 shell 的单独进程中运行，创建别名，随后在脚本退出时被丢弃。

```
$ ./create_aliases
$ alias  # <--- Ooops, no aliases defined. 
```

您必须像这样获取脚本，它将在当前进程中运行脚本的内容，从而修改当前环境。

```
$ source ./create_aliases
$ alias # <--- Yay, new aliases present. 
```

这就是为什么 bash 将源文件如`~/.bashrc`，以便您在该文件中所做的更改将存在于当前环境中。

# java - Java套接字绑定两次无异常

> ID：15915685
> 
> 赞同：0
> 
> 时间：2013-04-10T02:03:35.173
> 
> 标签：java, sockets, networking

当我的应用程序启动时，它绑定在给定的端口上：

```
public boolean checkIsAlreadyStart() {
    try {
        final ServerSocket server = new ServerSocket();
        server.setReuseAddress(false);
        server.bind(new InetSocketAddress("127.0.0.1",APPLICATION_PORT ));
        if (server.isBound()){
            logger.debug("binding to port: {}", APPLICATION_PORT);
            return false;
        }
        return true;
    } catch (IOException e) {
        logger.error("cannot bind to port", e);
        return true;
    }
} 
```

但是，当我同时运行应用程序的两个实例时，第二个实例仍然可以在没有 IOException 的情况下运行该方法。我必须调用 accept() 方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:57:13.927

无法重现：

```
10/04/2013 3:55:34 PM S checkIsAlreadyStart
INFO: Bound to port: 9,999
10/04/2013 3:55:34 PM S checkIsAlreadyStart
SEVERE: cannot bind to port
java.net.BindException: Address already in use: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.bind(ServerSocket.java:286)
    at S.checkIsAlreadyStart(S.java:33)
    at S.main(S.java:63) 
```

然而，作为`server`一个局部变量，它可能允许垃圾收集`ServerSocket,`将关闭它。如果您打算保持端口打开，您应该创建`server`一个实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:33:00.363

您确定应用程序的第一个实例仍在运行吗？您可以在应用程序中放置一个 Thread.sleep 以确保在您启动第二个实例时它仍在运行。

如您所愿，我运行了两次，第二次失败了。

```
 public static void main(String args[]) {
    Menu m = new Menu();
    m.checkIsAlreadyStart();
    try {
    Thread.sleep(20000);
    } catch (Exception e){}
} 
```

# php - php图像调整大小并在上传时转换为jpg

> ID：15915692
> 
> 赞同：0
> 
> 时间：2013-04-10T02:04:08.227
> 
> 标签：php, resize, image-conversion

如何在上传时调整图像大小并转换为 .jpg？基本上类似于这里的帖子

[如何使用 GD 调整上传图像的大小并将其转换为 PNG](https://stackoverflow.com/questions/22259/how-do-i-resize-and-convert-an-uploaded-image-to-a-png-using-gd)

但是我需要转换为JPG...

我尝试`imagejpeg()`了，`imagepng()`但它仍然将其保存为 png。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:09:39.517

您链接到的那个线程，接受的答案正在转换为 png，如下所示：

`imagepng($newImage, $destFile);`

您的代码只需稍有不同：

`imagejpg($newImage, $destFile);`

请参阅[PHP 文档](http://php.net/manual/en/function.imagejpeg.php)和[此线程](https://stackoverflow.com/questions/5060835/how-to-convert-all-images-to-jpg-format-in-php)以获取更多参考：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:13:45.047

你可以申请：

```
imagejpeg($this->image,$filename,$compression); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:10:50.753

有一个可以使用的类，你可以试试 - [http://wideimage.sourceforge.net/](http://wideimage.sourceforge.net/)

# java - 更改 Swarm Connect 的排行榜功能

> ID：15915693
> 
> 赞同：0
> 
> 时间：2013-04-10T02:04:14.073
> 
> 标签：java, android, leaderboard

现在下面是我的排行榜的样子。

![在此处输入图像描述](https://i.stack.imgur.com/AA0la.png)

我有两个问题：

1.  用户如何设置他们的名字？当我使用 Facebook 登录时，系统会自动为我选择“pub_6997”。我在玩应用程序时搜索了设置，但找不到任何有用的东西。

2.  有没有办法在排行榜中添加另一列？例如，一列是不会以任何方式影响排名顺序的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:02:58.560

Swarm 的首席开发人员在这里。

1) 不久前，我们改变了将发布者帐户和用户帐户分开的做法。许多开发人员已经拥有两个帐户（pub/user）并被合并。没有用户帐户的发布商会自动获得一个，这就是您所看到的。给我们发电子邮件（admin@swarmconnect.com），让我们知道您想要什么用户名，我们可以为您手动切换：）

2) 我们目前不支持在排行榜中显示字符串，抱歉。

# python - 正则表达式、Python 和文档注释

> ID：15915696
> 
> 赞同：1
> 
> 时间：2013-04-10T02:04:51.110
> 
> 标签：python, python-2.7, beautifulsoup

我在 Python 2.7 中编程，我正在使用 beautifulsoup4 从一系列文档的标签中提取信息。但是，该文档具有以下字符串：

```
<!-- PJG ITAG l=90 g=1 f=4 --> 
```

我想摆脱它们，但是我不是正则表达式的专家。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:09:04.663

首先在 BeautifulSoup 中加载您的 HTML：

```
from bs4 import BeautifulSoup, Comment
soup = BeautifulSoup(the_html) 
```

然后，删除所有评论：

```
comments = soup.find_all(text = lambda text:isinstance(text, Comment))
for comment in comments:
    comment.extract() 
```

# javascript - 如何检查给定的正则表达式是否无效

> ID：15915707
> 
> 赞同：-3
> 
> 时间：2013-04-10T02:06:55.067
> 
> 标签：javascript, regex

我知道这不会经常发生，但是每隔一段时间，你就会得到无效的正则表达式，当我正在制作一个查找和替换程序时，我想知道你将如何测试这种无效的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:21:11.350

您可以使用[www.debuggex.com](http://www.debuggex.com/)。

如果您的正则表达式中有任何解析/语义错误，它将为您突出显示确切的位置并告诉您出了什么问题。

如果您尝试捕获逻辑错误，它将为您提供正则表达式的可视化，并允许您逐步完成匹配，以便您可以查明正则表达式的行为不正确的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:08:49.287

您始终可以使用此工具测试您的 javascript 正则表达式 - [http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

该页面采用正则表达式，您的字符串并向您显示匹配项。这样，您可以验证并测试给定字符串的正则表达式。

# objective-c - viewDidLoad 没有被调用

> ID：15915713
> 
> 赞同：0
> 
> 时间：2013-04-10T02:07:04.477
> 
> 标签：objective-c

我正在开发一个小型应用程序，我希望在应用程序启动后立即显示一个警报框。我认为将代码放入 viewDidLoad 会导致这种情况发生，但似乎不是。

我希望能够做的是两次出现警报。第一个将用于玩家 1，第二个用于玩家 2。现在我正在努力让第一个工作。

这是解决此问题的正确方法还是有更好的方法？谢谢。

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"here...");
// Do any additional setup after loading the view.
UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Player 1" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;
[alert show];
[alert release];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
NSLog(@"Entered: %@",[[alertView textFieldAtIndex:0] text]);
} 
```

* * *

视图控制器仅包含以下方法：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    BoxView* myView = [[BoxView alloc]
                      initWithFrame:[[UIScreen mainScreen] bounds]];
    self.view = myView;
    [myView release];
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:14:30.460

问题是`viewDidLoad`太早了。还没有界面！至少等到`viewDidAppear:`。

在这里查看我非常相似的答案：

[https://stackoverflow.com/a/15867468/341994](https://stackoverflow.com/a/15867468/341994)

# google-apps-script - 启动谷歌脚本

> ID：15915717
> 
> 赞同：0
> 
> 时间：2013-04-10T02:07:20.070
> 
> 标签：google-apps-script

当我访问[http://script.google.com](http://script.google.com)时，我看到一个看起来像 Google 脚本的屏幕，但是：

1.  没有像教程视频中那样的侧边栏。
2.  我不能输入任何东西。
3.  该文档是空白的，我没有看到教程显示的图像。

### 图片来自教程

![教程图片](https://i.stack.imgur.com/gROaY.png)

我使用 Gmail 帐户登录。这是我第一次使用这个程序，所以我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:21:53.453

如果您要创建不属于电子表格的 GAS 项目，则需要将脚本组件添加到驱动器以编辑脚本。您可以通过“创建”按钮然后“连接更多应用程序”添加它，然后在 Chrome 商店中找到“Google Apps 脚本”应用程序。

如果您的域禁用了 Chrome 商店，那么此 URL 将直接带您创建新脚本： [https](https://script.google.com) ://script.google.com （https 是关键 - http 将您定向到 GAS 信息页面）

要在没有脚本小程序的情况下编辑脚本，您可以获取 share-url 并将其用作脚本编辑视图的直接链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:15:29.453

尝试去驱动，然后创建电子表格，然后去工具，然后选择脚本编辑器。祝你好运，知道（据我所知）它唯一的 javascript。

另请查看：[https ://developers.google.com/apps-script/](https://developers.google.com/apps-script/)

# python - 带有 Numpy 的 Aptana Studio 上的 Python？

> ID：15915719
> 
> 赞同：1
> 
> 时间：2013-04-10T02:07:25.667
> 
> 标签：python, numpy, configuration, aptana

我需要帮助使用 python numpy 设置 aptana studio。

我已经用工作室配置了 python。[我从http://www.numpy.org/](http://www.numpy.org/)下载了 numpy 包。

如何使用此 API 配置我的 IDE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:25:24.313

因此，除非我自己遗漏了某些东西，否则 API 将是错误的术语，“应用程序编程接口”不是指库。

正确安装 numpy 后，只需告诉 ipython 或您的代码“导入 numpy”即可使其在该代码中可用。我相信，也有一些方法可以只导入某些部分，但这是快速、标准和简单的方法。

附加帮助：

[无法在 Python 中导入 Numpy](https://stackoverflow.com/questions/1273203/cant-import-numpy-in-python)

[http://www.scipy.org/Getting_Started#head-7343a18c246cbb5151cb9950b341731acc9060fa](http://www.scipy.org/Getting_Started#head-7343a18c246cbb5151cb9950b341731acc9060fa)

# wordpress - 在 wordpress 页面上列出 Amazon s3 存储桶中的文件

> ID：15915720
> 
> 赞同：1
> 
> 时间：2013-04-10T02:07:37.270
> 
> 标签：wordpress, amazon-s3, amazon

如何在 wordpress 页面上列出亚马逊 s3 存储桶中的所有文件（每个文件的链接）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T16:33:58.263

您可能需要安装一个插件来为您执行此操作。

例如，这个插件允许您在任何帖子/页面上放置一个短代码以显示 S3 文件：[http ://codecanyon.net/item/wordpress-aws-s3-browser/6470423](http://codecanyon.net/item/wordpress-aws-s3-browser/6470423)

在这里查看现场演示：[http ://www.awss3.redwanhilali.net/?page_id=5#](http://www.awss3.redwanhilali.net/?page_id=5#)

# python - Django ORM - 没有级联删除多对多关系

> ID：15915724
> 
> 赞同：3
> 
> 时间：2013-04-10T02:07:56.123
> 
> 标签：python, django, orm

我正在创建一个 Django 应用程序（使用开箱即用的 ORM）来维护披萨订单。我有以下型号：

```
class Employee(models.Model):
    name = models.CharField(max_length=50)

class PizzaPlace(models.Model):
    name = models.CharField(max_length=50)
    employees = models.ManyToManyField(Employee)

class Order(models.Model):
    description = models.CharField(max_length=50)
    pizzaplace = models.ForeignKey(PizzaPlace)
    chef = models.ForeignKey(Employee) 
```

我正在使用 modelformset_factory 来维护每个 Pizza Place 的员工。我想要的是，无论员工是被解雇还是离开 Pizza Place，他们履行的订单都保持完好，并且可供 Pizza Place 使用。当前发生的情况是，当从 Pizza Place 删除员工记录时，删除是级联的。

保持与保留订单的关联的最佳方法是什么 - 特别是保持订单已在过去由被删除的员工完成，即使他们不再与披萨店相关联？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T02:14:03.133

你可以：

*   不删除从 a 中删除的员工，`PizzaPlace`而是设置一个标志
*   使用`on_delete`参数将员工字段设置为空：`chef = models.ForeignKey(Employee, null = True, on_delete = models.SET_NULL)`

* * *

查看[django 文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)中`ForeignKey`的a 选项以找到适合您用例的内容。`on_delete`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:24:14.713

在删除员工之前清除关系

```
e = Employee.objects.get(id=1)
e.order_set.clear()
e.delete() 
```

我相信订单仍将引用已删除的员工，您将不得不处理它，但删除将不再级联删除所有订单。

# c# - .NET 4.0 Async CTP 术语与其 .NET 4.5 类似物之间的等价或转换矩阵？

> ID：15915732
> 
> 赞同：2
> 
> 时间：2013-04-10T02:09:00.230
> 
> 标签：c#, .net-4.5, async-await, c#-5.0, async-ctp

我正在使用[Async CTP（版本 3）](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=9983) + [SP1](http://www.microsoft.com/en-us/download/details.aspx?id=28568)在 Windows XP SP3 上的 Visual Studio 2010 SP1 中进行开发和测试，主要是因为我的客户（以及我）在 Windows XP SP3 上。查看相关主题：

*   在 MSDN 论坛上：[“如果我以 .net 4.0 为目标，但在具有 .net 4.5 的机器上运行，.net 4.0 WPF 错误仍然存​​在吗？”](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/c05a8c02-de67-47a9-b4ed-fd8b622a7e4a/)
*   我关于 SO 的问题：[“使用 VS2010 Async CTP 的主要风险与好处是什么？？”](https://stackoverflow.com/questions/15873354/what-are-the-major-risks-vs-benefits-of-using-vs2010-async-ctp)

让我在这里引用[Async CTP (Version 3)](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=9983)下载页面：

> 包括用于生产的新 EULA。注意 - 此许可不鼓励您将 CTP 用于您的生产代码。CTP 仍然是不受支持且使用风险自负的技术预览。**但是，我们收到了许多开发人员要求将 CTP 用于生产代码的请求**，因此我们更改了许可以允许这样做。

有关 .NET 4.5 (C# 5.) 的所有 MSDN 文档和在线代码示例以及其中的新功能。
目前，当我的 .NET 4.0+VS2010 失败时，我正在搜索`<My Documents>\Microsoft Visual Studio Async CTP\Samples`为 .NET 4.0 + VS2010 安装 Async CTP。我找不到 C# 4.0（.NET 4.0，VS2010）和异步扩展与 C# 5.0（.NET 4.5 + VS 2012）或只是文章之间的任何转换或比较矩阵或差异列表（更改）

之间是否有任何等价或转换矩阵？
已知的差异是什么？

相关问题：

*   [`TaskEx.Run()`和`TaskEx.RunEx()`方法有什么区别](https://stackoverflow.com/questions/9334818/when-to-use-taskex-run)

# c# - Listview 项目在 C# 中添加为列而不是行如何修复？

> ID：15915738
> 
> 赞同：0
> 
> 时间：2013-04-10T02:09:37.160
> 
> 标签：c#, winforms, listview

我有一个子列表视图对象的问题。我的设置方式与正常运行的方式完全相同。问题是当我在每个语句中添加项目时，它们被添加为行而不是列。希望这很简单。

我的构造函数代码

```
String userstring;

        this.Users.Columns.Add("User");

        foreach (User user in UserListing.userListing)
        {
            userstring = "";
            userstring += user.getUsername() + " "; 
            userstring += " Has Admin Rights:" + user.getRights().ToString() + " "; 
            userstring += " Has Write Access:" + user.getRights().ToString();
            this.Users.Items.Add(new ListViewItem(userstring));
        }
        this.Show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-13T14:25:41.643

我有同样的问题，我通过改变从

```
myListView.View = View.LargeIcon; 
```

至

```
myListView.View = View.Details; 
```

也应该解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-05T07:16:35.217

好吧，我只想补充一点，我正在使用 Visual Studio 中的属性并将视图更改为列表。那是我的问题的解决方案。

[点击这里查看图片](https://i.stack.imgur.com/qyGNV.jpg)

# javascript - 如何在 JavaScript 中访问二维数组的范围？

> ID：15915743
> 
> 赞同：3
> 
> 时间：2013-04-10T02:09:57.080
> 
> 标签：javascript, arrays, multidimensional-array

给定一个二维数组 a[m][n] 其中 m,n > 0，我如何访问该数组的特定部分（例如在 Matlab 或 Python 中）：

```
a[2:5][3:] 
```

我意识到该`slice()`命令适用于一维数组，但我无法让它在更高维度上做我想做的事情。

这在Javascript中（很容易）可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T02:12:45.917

```
a.slice(2,3).map(function(m) {return m.slice(3);}); 
```

假定相对最新的浏览器和/或 shim。

# c# - 澄清事件调用

> ID：15915750
> 
> 赞同：0
> 
> 时间：2013-04-10T02:10:57.083
> 
> 标签：c#, events, delegates

```
public delegate void EventHandler(object sender, EventArgs e);
public class Button: Control
{
   public event EventHandler Click;
   protected void OnClick(EventArgs e) {
      if (Click != null) Click(this, e);
   } 
```

}

本书通过以下方式解释了上面的代码：

> Button 类中的 OnClick 方法“引发”Click 事件。引发事件的概念完全等同于调用由事件表示的委托——因此，引发事件没有特殊的语言结构。请注意，委托调用之前有一个检查，以确保委托为非空。

当每个事件处理程序都有一个委托实例时，为什么它暗示事件中只有一个委托？一个实例是一个实例，一个事件可以包含许多连接到实际方法的委托实例。

如果有人能为我理解这一段，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:56:20.500

> 现在“事件代表的代表”是什么意思？

从引发它的代码*的角度来看*，这就是事件的样子。该事件是使用标准方法调用语法（与某些“特殊”语法相反）引发的，它依次[以无特定顺序](https://stackoverflow.com/a/1645554/533120)调用所有订阅的事件处理程序。

> “确保委托非空的检查”是什么意思？

如果没有订阅事件的事件处理程序，则“代表事件的委托”为空。因此，要引发事件，您应该执行以下操作：

```
class MyClass {

    public delegate void MyEventHandler(MyEventArg arg);

    public event MyEventHandler MyEvent;

    void RaiseMyEvent(MyEventArg arg) {
        var handler = MyEvent;
        if (handler != null) // Any subscribers?
            handler(arg);
    }

} 
```

[顺便说一句，出于这个原因](https://stackoverflow.com/a/2582595/533120)，将事件复制到局部变量 ( `handler`) 被认为是一种好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:37:15.480

[这是深入的](http://blog.monstuff.com/archives/000040.html)，可能不是您正在寻找的。但是，它非常详细地分解了事件和代表之间的差异……一直到 IL。

否则：[这个 SO 已经在更简单的基础上得到了回答](https://stackoverflow.com/questions/29155/what-are-the-differences-between-delegates-and-events)

# android - 从 Android 中的 WindowManager 添加的 View 中捕获 onTouch 或 onClick 事件

> ID：15915751
> 
> 赞同：3
> 
> 时间：2013-04-10T02:11:11.653
> 
> 标签：android, onclick, touch-event, android-windowmanager

几天来我一直被一个问题困扰，我的谷歌搜索开始没有可能的解决方案。我正在尝试创建一个添加 View 并接收 onTouch 事件或 onClick 事件的类，就像 UndoBar 库一样。问题是永远不会调用 onTouch/onClick 事件，除非我将视图添加到 ViewGroup 而不是 WindowManager。这是我下面的非工作代码：

```
 final LayoutInflater mLayoutInflater = (LayoutInflater) 
            context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    final View mView = mLayoutInflater
            .inflate(R.layout.test, null);

    final TextView clickTextView = (TextView) 
            mView.findViewById(R.id.clickTextView);  

    WindowManager mWindowManager = (WindowManager)
            context.getSystemService(Context.WINDOW_SERVICE);

    final WindowManager.LayoutParams params = new WindowManager.LayoutParams();

    params.height = WindowManager.LayoutParams.WRAP_CONTENT;
    params.width = WindowManager.LayoutParams.WRAP_CONTENT;

    params.flags = WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON;

    params.format = PixelFormat.TRANSLUCENT;      
    params.type = WindowManager.LayoutParams.TYPE_TOAST;

    mWindowManager.addView(mView, params);

    clickTextView.setOnTouchListener(new OnTouchListener() 
    {

        @Override
        public boolean onTouch(View v, MotionEvent event) 
        {

            Log.i("onTouch", "onTouch has been called");

            return false;

        }
    });

} 
```

请注意：这里传递的Context是一个Activity Context。

为了使这段代码正常工作，我需要获取 Activity 的根布局并将 View 添加到其中。我的问题，可能是一个菜鸟问题，为什么我不能获得添加到 WindowManager 的 View 事件的 onTouch/onClick 呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:57:58.050

这是使这项工作的代码，但仍然没有找到对我的问题的解释。

```
 final View mView = mLayoutInflater
            .inflate(R.layout.test, activityViewGroup, false);

    activityViewGroup.addView(mView); 
```

# c# - 在 Windows、MonoForAndroid 和 MonoTouch 上实现界面的差异

> ID：15915752
> 
> 赞同：3
> 
> 时间：2013-04-10T02:11:18.187
> 
> 标签：c#, .net, visual-studio, xamarin.ios, xamarin.android

我正在移植 Windows Mobile 上的一些旧代码。该代码可以很好地为 .NET 3.5 CE 编译。我在 MonoForAndroid 中创建了一个项目并引用了相同的代码（引用为链接的 .cs 文件），它为 Android 构建得很好。

但是，当我为 MonoTouch 创建一个项目并引用相同的 C# 代码文件时，它无法构建并抛出错误，指出方法未实现。

这是我所拥有的：

```
public interface IJobController
{
   IUser User {get; }
}

public class BaseController 
{
   public virtual IUser User {get;set;}
}

public class BaseJobController : BaseController
{
   public new User User {get;set;}
}

public class JobController : BaseJobController, IJobController
{
  // some code here that uses the User property  
} 
```

错误说`JobController`没有实现方法`IUser User { get;}`候选者是其中之一，`BaseJobController`但类型与 不`IUser`匹配`User`。

相同的代码已经在 Windows Mobile .NET 3.5 CE 上运行了很多年，并且相同的代码在 MonoForAndroid 上编译得很好。但是，它不能在 MonoTouch 上编译。

我担心的是在 MonoTouch 中实现继承和接口实现的方式存在差异，我还有很多工作要做（很多代码要移植），所以我应该期待更多这样的惊喜吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:37:03.483

好吧，这显然是一个错误，因为您的代码*确实*在这些其他平台上编译。我建议您向他们[提交错误](https://bugzilla.xamarin.com/)。`new`同样清楚的是，编译器会因为您对虚拟方法使用关键字而感到困惑。这是一种耻辱。

话虽如此，解决方法很容易，至少在修复之前是这样。只需使用显式接口实现：

```
public class JobController : BaseJobController, IJobController
{
    IUser IJobController.User
    {
        get { return User; }
    }
} 
```

在 Xamarin 生成修复程序之前，这应该足够了。

# ios - 报亭应用程序：现有的杂志格式库

> ID：15915755
> 
> 赞同：3
> 
> 时间：2013-04-10T02:12:14.017
> 
> 标签：ios, swipe, newsstand-kit

我正在为 ipad 构建一个报亭应用程序，其中问题的内容是杂志格式（列和图片中的标题详细信息），用户可以在文章内容较长时水平滑动，此外，在滑动期间，应用程序将滚动到新的当我们到达当前文章的最后一页时。我只是想知道是否有现有的图书馆来处理我上面描述的需求。我感谢你的所有建议。

# c++ - 正弦模式生成数据

> ID：15915756
> 
> 赞同：1
> 
> 时间：2013-04-10T02:12:16.633
> 
> 标签：c++, visual-c++, visual-studio-2012

数据数组（0>359deg）=相位+（（正弦值*增益+-归一化为增益噪声值）+偏差）

y=(G x sin(θ+φ)+-N)+偏置

这就是我到目前为止所拥有的。由于某种原因，在 Excel 中设置图表时，噪音无法正确显示。

```
#include "stdafx.h"
#include <iostream>
#include <math.h>
#include <ctime> // convert time value to string
#include <cstdlib>  // standard general utilities library "# generator"
#include <fstream>  // writing data to disk

using namespace std;

#pragma warning(disable:4996)

int _tmain(int argc, _TCHAR* argv[])

{

srand((unsigned)time(0));

// declarations
FILE *fptr;
char fileName[50] = "";
double freq;
double gain;
double phase;
double bias;
double rand_noise = ((double)rand()/ ((RAND_MAX)) - 0.5); 
char save;
double noise;

const long double PI = acos((long double) -1);

// user inputs for sine wave values

cout<<"Enter Frequency: [1-10Mhz] ";
cin>>freq;
cout<<"Enter Gain of Sine Wave: [1-10] ";
cin>>gain;
cout<<"Enter Phase Angle: [0-180] ";
cin>>phase;
cout<<"Enter Bias (offset) [+/- 10] ";
cin>>bias;
cout<<"Enter % Noise level introduced to sine (percent) [0 - 100%] ";
cin>>noise;
cout<<"Do you want to save the data [y/n]: ";
cin>>save;

if (save == 'y'){
cout<<"Enter a file name you wish to use: ";
    cin>> fileName;
}

double timeint = (double)1/freq/360;
long double interval = (2*PI)/360;
long double sinevalue;
if (save == 'y') {
sprintf(fileName, "%s.csv", fileName);
fptr = fopen(fileName, "w");
fprintf(fptr, "%s,", "Time(1/f)");
fprintf(fptr, "%s\n", "Sine Pattern");
}

for(int i=0; i<=360; i++){
sinevalue = (gain*sin((interval*i)+phase)+(rand_noise*(noise/100)*gain))+bias;
if (save == 'y') {
    fprintf(fptr, "%f,", timeint*i);
    fprintf(fptr, "%f\n", sinevalue);

}

}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:23:27.883

您的`rand()`函数会生成一个介于 0 和[RAND_MAX](http://www.cplusplus.com/reference/cstdlib/RAND_MAX/)之间的随机数。

要使其介于 -0.5 和 0.5 之间，您需要执行以下操作： [rand() 介于 0 和 1 之间](https://stackoverflow.com/questions/9878965/c-rand-between-0-and-1)

```
#include <cstdlib>

//...
for(int i=0; i<=360; i++){

  double rand_noise = ((double)rand()/ ((RAND_MAX)) - 0.5; //divide rand() by RAND_MAX to get between 0 and 1, then subtract 0.5 to be between -0.5 and 0.5.
  sinevalue = (gain*sin((interval*i)+phase)+(rand_noise*(noise/100)*gain))+bias;

  if (save == 'y') {
    fprintf(fptr, "%f,", timeint*i);
    fprintf(fptr, "%f\n", sinevalue);

  }

} 
```

# 3d - 3D：找到屏幕上显示场景内点的像素

> ID：15915757
> 
> 赞同：0
> 
> 时间：2013-04-10T02:12:19.250
> 
> 标签：3d, 2d, coordinates, pixels

正如标题所说。我不确定用什么样的数学方法来找出 3D 场景中的对象当前在计算机屏幕上的位置（假设 3D 场景以全屏模式显示）。

谢谢！

# iphone - 在 UIScrollView 内时停止 UIPanGestureRecognizer 垂直移动 UIView

> ID：15915762
> 
> 赞同：0
> 
> 时间：2013-04-10T02:13:04.547
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uigesturerecognizer

我想要一个仅水平移动 UIView 的平移手势。

到目前为止，在平移手势开始时，只允许水平移动，但是**一旦开始平移手势，UIView 就会水平和垂直移动**。

*   如何**阻止 UIView 始终垂直移动**？
*   有什么办法可以**让 UIView 的顶部始终位于屏幕的顶部**？

即它永远不会从其设定位置垂直移动

这是我当前的代码：

```
- (void)panePanned:(UIPanGestureRecognizer *)gestureRecognizer
{    
    switch (gestureRecognizer.state) {
        case UIGestureRecognizerStateBegan: {
            self.paneStartLocation = [gestureRecognizer locationInView:self.mainView];
            self.paneVelocity = 0.0;
            break;
        }
        case UIGestureRecognizerStateChanged: {
            CGPoint panLocationInPaneView = [gestureRecognizer locationInView:self.mainView];
            CGFloat velocity = -(self.paneStartLocation.x - panLocationInPaneView.x);
            CGRect newFrame = self.mainView.frame;

            newFrame.origin.x += (panLocationInPaneView.x - self.paneStartLocation.x);
            if (newFrame.origin.x < 0.0) newFrame.origin.x = 0.0;
            self.mainView.frame = newFrame;

            if (velocity != 0) {
                self.paneVelocity = velocity;
            }
            break;
        }
        case UIGestureRecognizerStateEnded: {
            [self animate];
            break;
        }
        default:
            break;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:31:34.310

尝试在状态开始时禁用滚动并在状态结束时重新启用它。

```
[scrollView setScrollEnabled:NO];    // in case UIGestureRecognizerStateBegan
[scrollView setScrollEnabled:YES];   // in case UIGestureRecognizerStateEnded 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:41:16.203

通过自己构建它，我确实学到了一些东西。我认为平移逻辑可以简化，并且我认为它可以在不禁用滚动的情况下工作。

试试这个：创建一个新的单视图应用程序项目。在情节提要中添加滚动视图。添加一个名为“scrollView”的出口连接到 ViewController。在 ViewController.m 中添加以下代码：

```
@interface ViewController ()
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;  // connected in storyboard
@end

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    for (int i=0; i<60; i++) {
        UIView *draggableView = [[UIView alloc] initWithFrame:CGRectMake(10, i*40, 34, 34)];
        draggableView.backgroundColor = [UIColor redColor];

        UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
        [draggableView addGestureRecognizer:pan];

        [self.scrollView addSubview:draggableView];
    }
    self.scrollView.contentSize = CGSizeMake(320, 60*40);
} 
```

这为滚动视图添加了一堆可拖动视图，为每个视图提供了一个平移手势识别器。我做了一个像你一样的平底锅方法，除了简单得多......

```
- (void)pan:(UIPanGestureRecognizer *)gr {

    switch (gr.state) {
        case UIGestureRecognizerStateBegan: {
            break;
        }
        case UIGestureRecognizerStateChanged: {
            UIView *view = gr.view;
            CGRect frame = view.frame;

            gr.view.frame = CGRectMake([gr translationInView:view].x, frame.origin.y, frame.size.width, frame.size.height);
            break;
        }
        case UIGestureRecognizerStateEnded: {
            break;
        }
        default:
            break;
    }
} 
```

而已。我没有禁用滚动，但我们得到了我认为您正在寻找的行为。很高兴您的解决方案正在运行，但请尝试这样的项目，看看它是否能告诉您有关您在做什么的任何信息。

# javascript - 使用 ID 选择器定义其宽度和高度时，HTML5 画布执行不一致

> ID：15915763
> 
> 赞同：1
> 
> 时间：2013-04-10T02:13:18.280
> 
> 标签：javascript, html, canvas

我的 html 文件非常简单：

```
<body>
<canvas id="canvas" width="900" height="400"></canvas>
<button onclick="DrawSVG()">Draw SVG</button>
</body> 
```

单击按钮时，我使用 canvg.js 在画布上绘制 SVG

```
var opts = {
  ignoreMouse: false,
  ignoreClear: true,
  ignoreDimensions : true,
  offsetX: 0,
  offsetY: 0
};
canvg(canvas, "face.svg", opts); 
```

脸.svg：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" >
<rect x="0" y="0" width="80" height="80" rx="6" fill="blue" stroke="red" stroke-
width="1px" fill-opacity="0.7" />
</svg> 
```

这似乎是正确的。

但是当我在头部定义宽度和高度时：

```
<style type="text/css">
#canvas {
width: 900px;
height: 400px;
} 
```

画布上的 svg 比以前大 4 倍。有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:18:50.173

解释在这里： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#attr-canvas-width](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#attr-canvas-width)

> 画布元素的内在尺寸等于坐标空间的大小，数字以 CSS 像素解释。但是，可以通过样式表任意调整元素的大小。**在渲染过程中，图像被缩放以适应此布局大小。**

（我从[这里借了这个！](https://stackoverflow.com/questions/5034529/size-of-html5-canvas-via-css-versus-element-attributes)因为它值得重复。）

# java - 无法访问 Person 类型的封闭实例

> ID：15915769
> 
> 赞同：0
> 
> 时间：2013-04-10T02:14:18.090
> 
> 标签：java

我想知道是否有人能告诉我为什么我在第 175 行出现错误

```
Student george= new Student("George Flintstone", 21, "Politics", 3.1); 
```

这是说没有可访问类型的封闭实例。我已经查看了其他类似的问题，但我对 java 不是很熟悉，所以我并没有真正找到答案，至少我理解得足够好。这是我的 Java 课程介绍中的作业。我在常见问题解答中没有看到任何内容说我不能寻求家庭作业的帮助，但我承认我没有仔细阅读它，所以如果我违反了某些规则，请告诉我。

另外，很抱歉发布了这么多代码，我不确定它的哪些部分可能很重要。

```
Public class Person {

    String name;
    int age;

    public Person(String n, int a)
    {
        name = n;
        age = a;
    }

    public Person()
    {
        name = "Bob";
        age = 24; 
    }

    public void set_Person(String n)
    {
        name = n;
    }

    public void set_Person(int a)
    {
        age = a;
    }

    public void set_Person(String n, int a)
    {
        name = n;
        age = a;
    }

    public String get_Name()
    {
        return name;
    }

    public int get_Age()
    {
        return age;
    }

    public boolean equals(Object ob)
    {
        Person p = (Person)ob;
        if(ob == null)
            return false;
        if(name.equals(p.name) && age == p.age)
            return true;
        else
            return false;
    }

    public String toString()
    {
        String temp = name + " is " + age + " years old ";
        return temp;
    }

class Student {

    String major;
    double gpa;
    Person p = new Person();

    Student(String n, int a, String m, double g )
    {
        p.set_Person(n,a);
        major = m;
        gpa = g;
    }

    Student()
    {
        p.set_Person("Ben", 10);
        major = "compsci";
        gpa = 3.5;
    }

    public void set_Student(String n, int a, String m, double g)
    {
        p.set_Person(n,a);
        major = m;
        gpa = g;
    }

    public void set_Student(String n)
    {
        p.set_Person(n);
    }

    public void set_Student(int a)
    {
        p.set_Person(a);
    }

    public String getStudentName()
    {
        String temp = p.get_Name();
        return temp;
    }

    public int getStudentAge()
    {
        return p.get_Age();
    }

}

class Family {

    Person [] per_array;
    int person_count = 0;
    Person temp = new Person();

    Family(int members)
    {
        Person[] per_array = new Person[members];
    }

    public void addPerson(Person p)
    {
        boolean check = false;

        for(int count = 0; count < per_array.length; count++){
            if(per_array[count].equals(p))
            {
                System.out.println("That person is already a member of this family");
                check = true;
            }
        }
        if(check = false){
            per_array[person_count] = p;
            person_count++;
        }
    }

    public void addPerson(Student s)
    {
        temp.set_Person(s.getStudentName(), s.getStudentAge());
        boolean check = false;

        for(int count = 0; count < per_array.length; count++){
            if(per_array[count].equals(temp))
            {
                System.out.println("That person is already a member of this family");
                check = true;
            }
        }

        if(check = false){
            per_array[person_count] = temp;
            person_count++;
        }

    }

    public void printOutFamily()
    {
        for(int count = 0; count < per_array.length; count++)
        {
            per_array[count].toString();
        }
    }
}

    public static void main(String[] args) {
        Person fred= new Person("Fred Flintstone", 50);
        System.out.println("created " + fred);

        Person wilma = new Person("Wilma Flintstone", 48);
        Student george= new Student("George Flintstone", 21, "Politics", 3.1);
        System.out.println("created " + george);

        Student sue= new Student("Sue Flintstone", 24, "Nursing", 3.3);
        Student anotherGeorge= new Student("George Flintstone", 21, "Math", 3.4);
        Person yetAnotherGeorge= new Person("George Flintstone", 21);

        Family f = new Family(10);
        f.addPerson(fred);
        f.addPerson(wilma);
        f.addPerson(george);
        f.addPerson(sue);
        f.addPerson(anotherGeorge);
        f.addPerson(yetAnotherGeorge);

        anotherGeorge.set_Student("Georgie Flintstone");
        f.addPerson(anotherGeorge);

        f.printOutFamily();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:20:44.747

`Student`是与特定实例相关联的内部类，`Person`这意味着调用无效

```
new Student("George Flintstone", 21, "Math", 3.4);* 
```

制作内部类`static`将允许它工作。静态内部类，也就是嵌套类，在这里不需要外部类的实例`Person`。

# asp.net - 在 asp.net 中使用多个 AjaxFileUpload 控件时出错

> ID：15915770
> 
> 赞同：2
> 
> 时间：2013-04-10T02:14:27.683
> 
> 标签：asp.net, ajax, asp.net-ajax

问题是：

在默认页面中，我有两个 AjaxFileUpload 控件，并且我按照规则完成了代码，当我在两个上传按钮中单击上传时，一张一张图片将仅存储在一个文件夹中（即相同的第一个文件夹）。

**页面代码如下**

```
<form id="form1" runat="server">
<asp:ScriptManager ID="sm1" runat="server">
</asp:ScriptManager>
<div>
    <asp:Image ID="Image1" runat="server" />
    <ajaxToolkit:AjaxFileUpload ID="AjaxFileUpload1" runat="server" OnUploadComplete="FileUploadCompleteEvent1"
        ThrobberID="Image1" Width="400" />
</div>
<div>
    <asp:Image ID="Image2" runat="server" />
    <ajaxToolkit:AjaxFileUpload ID="AjaxFileUpload2" runat="server" ThrobberID="Image2"
        OnUploadComplete="FileUploadCompleteEvent2" Width="400" />
</div>    
</form> 
```

和 Default.aspx.cs 是

```
 protected void FileUploadCompleteEvent1(object o,AjaxControlToolkit.AjaxFileUploadEventArgs e)
   {    
      string file = Server.MapPath("~/i/") + e.FileName;
      AjaxFileUpload1.SaveAs(file);
    }
    protected void FileUploadCompleteEvent2(object o, AjaxControlToolkit.AjaxFileUploadEventArgs eve)
    {
        string file = Server.MapPath("~/i1/") + eve.FileName;
        AjaxFileUpload2.SaveAs(file);
    } 
```

我想将这些文件存储在单独的文件夹（i 和 i1）中，我附上了我正在使用的代码。

# spring - 如何让 Hibernate 绑定参数值显示在 Junit 测试中？

> ID：15915775
> 
> 赞同：0
> 
> 时间：2013-04-10T02:14:47.490
> 
> 标签：spring, hibernate, parameters, junit, log4j

我正在使用 Maven 3.0.3、SPring 3.1.1.RELEASE、Hibernate 4.1.0.Final 和 log4j 1.2.15。在我的 Maven 项目中，我在 src/test/resources 中有这个 log4j.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
    <log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">
    <appender name="consoleAppender" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
                    <param name="ConversionPattern" value="[%p]: %c - %m%n" />
        </layout>
    </appender>

    <logger name="org.mainco.subco">
        <level value="debug" />
    </logger>

    <logger name="log4j.logger.org.hibernate.SQL">
        <level value="DEBUG" />
    </logger>

    <logger name="log4j.logger.org.hibernate.type">
        <level value="TRACE" />
    </logger>

    <root>
        <priority value ="info" />
        <appender-ref ref="consoleAppender"/>
    </root>

</log4j:configuration> 
```

我的数据源在我的测试应用程序上下文中配置如下：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${test.mysql.dataSource.driverClassName}" />
    <property name="url" value="${test.mysql.dataSource.url}" />
    <property name="username" value="${test.mysql.db.user}" />
    <property name="password" value="${test.mysql.db.password}" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="packagesToScan" value="org.mainco.subco" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaPropertyMap" ref="jpaPropertyMap" />
</bean>

<util:map id="jpaPropertyMap">
    <entry key="hibernate.show_sql" value="true" />
    <entry key="dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
    <entry key="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.EhCacheRegionFactory"/>
    <entry key="hibernate.cache.provider_class" value="org.hibernate.cache.EhCacheProvider"/>
    <entry key="hibernate.cache.use_second_level_cache" value="true" />
    <entry key="hibernate.cache.use_query_cache" value="false" />
    <entry key="hibernate.generate_statistics" value="true" />
</util:map> 
```

但是，当我运行 JUnit 测试时，虽然显示了 SQL，但绑定到 SQL 的参数却没有。如何更改上述任何内容以使绑定参数通过 System.out（或控制台）显示？- 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:08:18.637

由于您使用的是 log4j.xml，因此记录器配置应该是

```
<logger name="org.hibernate.type"> 
```

不是

```
<logger name="log4j.logger.org.hibernate.type"> 
```

后者是 log4j.properties 样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:03:31.857

```
### Hibernate logging configuration ###  

### Log everything (a lot of information, but very useful for troubleshooting) ###  
#log4j.logger.org.hibernate=info  

### Log HQL and SQL ASTs during query parsing ###  
log4j.logger.org.hibernate.hql.ast.AST=DEBUG, SQL_APPENDER  
log4j.additivity.org.hibernate.hql.ast.AST=false  

### log just the SQL  
log4j.logger.org.hibernate.SQL=DEBUG, SQL_APPENDER  
log4j.additivity.org.hibernate.SQL=false  

### log JDBC bind parameters. Very userfull, when debug parameterized queries ###  
log4j.logger.org.hibernate.type=TRACE, SQL_APPENDER  
log4j.additivity.org.hibernate.type=false  

### log schema export/update ###  
#log4j.logger.org.hibernate.tool.hbm2ddl=info  

### log HQL parse trees  
#log4j.logger.org.hibernate.hql=debug  

### log cache activity ###  
#log4j.logger.org.hibernate.cache=info  

### log transaction activity  
#log4j.logger.org.hibernate.transaction=debug  

### Log all JDBC resource acquisition  
#log4j.logger.org.hibernate.jdbc=debug 
```

# objective-c - iPhone iOS如何通过旋转以编程方式截取屏幕截图？

> ID：15915776
> 
> 赞同：4
> 
> 时间：2013-04-10T02:14:51.190
> 
> 标签：objective-c, ipad, uiview, ios6, screenshot

我知道如何拍摄 iPhone/iPad 屏幕的常规矩形屏幕截图（代码如下）。但是，我正在寻找一种方法来获取旋转任意度数的屏幕截图

**如何截取`UIView`使用任意旋转的矩形的屏幕截图？**

```
 //this is the rotation of the rectangle
        NSNumber* savedRotation = [NSNumber numberWithFloat: 0.35]; //radians, get the real number from a gesture recognizer

        //create a screenshot
        CGSize screenshotSize;

//screenshot size has to be adjusted for the rotation, or multiplied by the square root of 2
        if( UIDeviceOrientationIsLandscape([[UIApplication sharedApplication]statusBarOrientation]))
        {
            screenshotSize  =  CGSizeMake(1024,768);
        }else
        {
            screenshotSize  =  CGSizeMake(768, 1024);

        }

        if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
            UIGraphicsBeginImageContextWithOptions(screenshotSize, NO, [UIScreen mainScreen].scale);

        else
            UIGraphicsBeginImageContext(screenshotSize);

        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSaveGState(context);

    //this does the proper rotation, but there's some kind of extra translation required to make it capture what's under the rectangle
        CGContextRotateCTM(context, -savedRotation.floatValue);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

        UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();

        CGContextRestoreGState(context); 
```

这是上面代码的结果，它似乎部分工作，但需要对 CTM 进行一些额外的翻译才能完美匹配捕获矩形。此外，我需要将上下文的边界更改为更宽（可能是 1024 * sqrt(2) 宽度和高度），以允许任何旋转而不进行裁剪。

![在此处输入图像描述](https://i.stack.imgur.com/JqTtO.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:33:12.327

这是基于简单矩形裁剪图像所需的代码。

我不确定您如何跟踪矩形的旋转，但是从那里应用此解决方案应该很简单；

```
// Create rectangle from middle of current image
CGRect croprect = CGRectMake(image.size.width / 4, image.size.height / 4 ,
(image.size.width / 2), (image.size.height / 2));

// Draw new image in current graphics context
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], croprect);

// Create new cropped UIImage
UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];

CGImageRelease(imageRef); 
```

希望能帮助到你。

# xcode - iOS 库的尖括号导入失败

> ID：15915783
> 
> 赞同：3
> 
> 时间：2013-04-10T02:15:35.517
> 
> 标签：xcode, import, linker

我正在构建一个 iOS 项目，我想从 OpenSceneGraph 链接到一个静态库。现在，我已经将头文件导入到项目中。

在我的 ViewController 中，我有以下声明：

```
#import "osg/Geode" 
```

这不会出错。

（我最初尝试过

```
#import <osg/Geode> 
```

但 Xcode 告诉我我需要使用引号。）

但是，当我尝试编译项目时，Xcode 在导入 osg/Geode 时遇到了问题。该文件包括该行

```
#import <osg/Node> 
```

当 Xcode 尝试编译时，它会导入“osg/Geode”，然后它会尝试 import ，但是尖括号在那里也不起作用，所以它失败了。

我该如何解决这个问题？谢谢！

![我的代码](https://i.stack.imgur.com/CxiWh.png) ![OSG 代码](https://i.stack.imgur.com/TIcWs.png)

## 更新

根据 Reck Hou 的建议，我在构建设置中编辑了我的“标题搜索路径”。

```
"$(SRCROOT)"      - recursive 
```

现在，当我尝试编译时，我收到来自头文件的错误。前任。“未知类型名称'namespace'”，“预期';' 在顶级声明符之后”。我也收到错误“找不到'ostream'字段”。 ![其他错误](https://i.stack.imgur.com/rCtGi.png) ![流错误](https://i.stack.imgur.com/SS996.png)

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T04:28:36.310

进入您的项目设置，然后找到您的构建目标-> `build settings`。

找到`Header search paths`然后将您的标题路径添加到其中。

例如：

> "$(SRCROOT)/[你的头文件路径]"

建议，添加父目录路径无效。

例如，您应该将静态库添加到`Build Phases`->`Link Binary With Libraries`以防止链接错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:12:01.713

'namespace' 不是有效的 Objective-C 关键字。ScopedLock 文件的扩展名是什么？是.mm吗？您需要告诉 xCode 将其编译为 C++。

为此，请转到您的项目设置，选择目标 -> 构建设置 -> Apple LLVM 编译器 XX - 语言 -> 将源编译为。将其设置为允许混合使用 Objective-C 和 C++ 的 Objective-C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:18:57.293

我很确定您将需要在构建设置中编辑标题搜索路径。

# google-app-engine - Google App Engine 应用无法获得 Google Big Query 服务器到服务器授权

> ID：15915784
> 
> 赞同：1
> 
> 时间：2013-04-10T02:15:48.167
> 
> 标签：google-app-engine, authorization, google-bigquery

我正在尝试授权我的 Google App Engine (GAE) Java Web 应用程序使用 Google Big Query (GBQ) 服务。我已经在 xxxxxx.com 下注册了一个 Google 业务应用程序和域，并在我的业务空间中以用户身份创建了 GAE 应用程序。然后我按照此处描述的说明进行操作：

[https://developers.google.com/bigquery/docs/authorization](https://developers.google.com/bigquery/docs/authorization)

=======================================

使用 App Engine 服务帐号

App Identity API 为 App Engine 应用程序向 Google 标识自己以进行服务器到服务器 API 授权提供了一种方法。如果您正在创建 App Engine 应用程序，则可以授权您的应用程序的服务帐户访问 Google API。典型用例包括在调用 BigQuery 之前不需要明确用户授权的公共数据可视化或仪表板应用。

要允许您的 App Engine 应用对 BigQuery API 进行授权服务帐户调用：复制在“管理”->“应用程序设置”选项卡下找到的 App Engine 服务帐户名称（格式为 your_app_id@appspot.gserviceaccount.com）。

访问您的 Google API 控制台项目的团队选项卡，并将服务帐户名称添加为具有“可以编辑”权限的项目团队成员

=================================================

但是，当我将 your_app_id@appspot.gserviceaccount.com 作为队友复制并粘贴时，我会收到以下问候：**只有域 xxxxxx.com 中的用户可以添加到项目**中。为什么我的 GAE 应用程序不被视为我域的一部分，尤其是当我进入 GAE 管理控制台时，它清楚地显示我已经创建它并以我的 biz 域成员身份登录？？？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:04:11.463

我们遇到了同样的问题。

解决方法是在您的应用程序帐户上创建一个组电子邮件帐户（例如`bigquery@yourdomain.com`）并添加`your_app_id@appspot.gserviceaccount.com`为成员，然后`bigquery@yourdomain.com`在 BQ 控制台的团队选项卡下添加。

# c# - 如何使我的richTextBox 搜索不区分大小写？

> ID：15915789
> 
> 赞同：0
> 
> 时间：2013-04-10T02:16:27.410
> 
> 标签：c#, winforms, visual-studio, find

我正在做一个文字处理器。字处理器具有允许用户在richTextBox 中搜索文本的功能。

目前，我的“查找”代码包括：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Basic_Word_Processor
{
    public partial class Find : Form
    {
        public Find()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            int index = 0;
            string temp = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text;
            Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text = "";
            Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text = temp;
            while (index < Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text.LastIndexOf(textBox1.Text))
            {
                Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Find(textBox1.Text, index, Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.TextLength, RichTextBoxFinds.None);
                Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionBackColor = Color.Yellow;
                index = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text.IndexOf(textBox1.Text, index) +1;
            {
        }
    }
}

        private void Find_FormClosing(object sender, FormClosingEventArgs e)
        {
            Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionBackColor = Color.White;
        }
    }
} 
```

但是，如果richTextBox 包含单词“TEST”，并且用户搜索“test”，则不会找到任何结果。

我在 MSDN 论坛上问了同样的问题，但有人告诉我将 textBox 和richTextBox ToLower 转换，这有效，但它使richTextBox 中的文本小写。我不希望它更改richTextBox 中的实际文本。

有什么建议么？

**编辑**

textBox 位于 Find 表单上，richTextBox 位于 Basic_Word_Processor 表单上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:22:06.397

我相信 C# 默认情况下区分大小写，但是 LastIndexOf（可能是 IndexOf）有一个重载，允许通过指定参数（例如 StringComparison.InvariantCultureIgnoreCase（或类似的东西））进行不区分大小写的搜索。请参阅[http://msdn.microsoft.com/en-us/library/ms224422.aspx](http://msdn.microsoft.com/en-us/library/ms224422.aspx)。

编辑：

为了澄清，我建议将代码更改为：

```
string findText = textBox1.Text;
string currentText = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text;
int index = currentText.IndexOf(findText, StringComparison.InvariantCultureIgnoreCase);
while (index >= 0)
{
    Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Find(findText, index, currentText.Length, RichTextBoxFinds.None);
    Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionBackColor = Color.Yellow;
    index = currentText.IndexOf(findText, index+1, StringComparison.InvariantCultureIgnoreCase);
} 
```

但是，现在我考虑一下，您应该能够做一些更简单的事情，例如：

```
int index = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Find(findText, RichTextBoxFinds.None);
while (index >= 0)
{
    Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionBackColor = Color.Yellow;
    index = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Find(findText, index+1, RichTextBoxFinds.None);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:55:06.587

您可以使用[正则表达式](http://www.dotnetperls.com/regex-match)

```
 private void button1_Click(object sender, EventArgs e)
        {
            Regex reg = new Regex("text",RegexOptions.IgnoreCase);
            foreach (Match find in reg.Matches(richTextBox1.Text))
            {
                richTextBox1.Select(find.Index, find.Length);
                richTextBox1.SelectionColor = Color.Red;
            }
        } 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/vxUAn.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:19:35.413

调用`text1.Text.ToLower()`不会使富文本框中的文本变为小写，因为它只是返回值。

您可以将其保存在一个字符串中：

`string text = text1.Text.ToLower();`

然后使用字符串文本来处理搜索。

此外，我不太确定该`Find`方法，但它应该有一个忽略大小写选项。如果不是，请确保将比较的文本也转换为小写。

编辑：

我可能弄错了哪个是richTextBox，`text1`或者`Basic_Word_Processor.Instance.richTextBoxPrintCtrl1`

如果情况是 Basic_Word_processor 中的情况，那么在 MSDN 链接中您在评论中给出：

```
 string temp = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text.ToLower();
    Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text = "";
    Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text = temp; 
```

它基本上说：

*   将 RichTextBox 中的文本转换为小写。保持在温度
*   将 RichTextBox 文本设置为空
*   用 temp 替换 RichTextBox 文本

当然，它会使您的 RichTextBox 小写。

编辑2：

好的，似乎用户想通过给定的关键字突出显示所有找到的文本，但它不起作用。我会试着回答它。

首先，不要在富文本框中使用 Find() 方法，而是使用`SelectionStart`and `SelectionLength`。我看不到 Find() 方法可以进行不区分大小写的比较。

例子：

```
string richText = Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.Text.ToLower();
string keyText = textBox1.Text.ToLower(); 
```

在 while 语法中，使用重载字符串 LastIndexOf 进行不区分大小写的比较。这可能不是现在的问题，因为富人已经处于较低的状态。

```
while (index < richText.LastIndexOf(textBox1.Text, StringComparison.InvariantCultureIgnoreCase)) 
```

然后要查找文本，请使用以下命令：

```
index = richText.IndexOf(keyText, index); 
```

然后像这样设置颜色：

```
Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionStart = index;
Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionLength = keyText.Length;
Basic_Word_Processor.Instance.richTextBoxPrintCtrl1.SelectionBackColor = Color.Yellow; 
```

# perl - 如何计算perl中输出的长度

> ID：15915791
> 
> 赞同：0
> 
> 时间：2013-04-10T02:17:00.893
> 
> 标签：perl, function, module, cpan

我需要能够计算我下面的程序的输出，输出基本上应该看起来像

```
website-name.com - Breaking news, opinion, politics, entertainment, sports and culture.
Length 89008
Lines 1517 
```

我已尝试创建它，但它似乎正在工作，因此将不胜感激

只是为了一点背景信息，我正在编写脚本的程序正在使用 LWP::UserAgent; 从网站获取内容并显示它，所以我想做的是计算输出并获取字符数量。

```
#!/usr/bin/perl

use strict;
use warnings;
require LWP::UserAgent;

 my $size = length(content);

 my $ua = LWP::UserAgent->new;
 $ua->timeout(10);
 $ua->env_proxy;

 my $response = $ua->get('http://kmra.org/');

 if ($response->is_success) {
     print $response-> title();
     print "$size\n";

 }
 else {
     die $response->status_line;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:47:25.693

得到响应*后*需要获取内容：

```
#!/usr/bin/perl

use strict;
use warnings;
require LWP::UserAgent;

my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->env_proxy;

my $response = $ua->get('http://kmra.org/');

if ($response->is_success) {
  my $size = length($response->content());
  print $response->title();
  print "$size\n";
} else {
  die $response->status_line;
} 
```

# jquery - Rails - JQuery - 表单 - 基于另一个自动填充字段

> ID：15915795
> 
> 赞同：0
> 
> 时间：2013-04-10T02:17:22.357
> 
> 标签：jquery, ruby-on-rails, onchange

我有一个表格，其中有许多取决于要填写的第一项，Student_ID（葡萄牙语中的 id_aluno）的项目。

我有一个集合选择来选择“aluno”。它显示名称，但将 id 写入数据库。

```
<%= f.collection_select :id_aluno, Aluno.order('nome'), :id, :nome %> 
```

第二项是学生支付的计划的 ID。它是学生表中称为“plano”的列。

```
<%= f.text_field :plano %> 
```

我需要根据第一项（学生）填写第二项。我认为它被称为“onchange”。

```
class Pagamento < ActiveRecord::Base   <---- class of the FORM
belongs_to :pag1, :class_name => "Aluno", :foreign_key => "id_aluno"
has_one :pag2, :class_name => "Aluno", :foreign_key => "id_plano"
end

class Aluno < ActiveRecord::Base
has_many :pag3, :class_name => "Pagamento", :foreign_key => "id_aluno"
end 
```

我需要帮助来为此编写 JQuery。

谢谢！

# arcpy - Arcpy：平均值和非统计值的汇总统计？

> ID：15915797
> 
> 赞同：-1
> 
> 时间：2013-04-10T02:17:45.203
> 
> 标签：arcpy

我正在尝试编写一个脚本，我可以在其中计算三个单独字段的平均值、最小值和最大值。我可以开始设想，并且通过其他 SO 帖子查找了一段时间，我知道可以做一个字典或搜索光标，但鉴于我对 python 还是新手，我认为如果可能的话调用摘要统计工具会更容易。

但是，似乎只能输出所需的统计信息，并且无法控制在输出中包含与之相关的其他字段/行，例如，在具有 id 字段、state_name 字段的 .dbf 和一个死亡率字段，脚本将找到最高死亡率并使用 id 输出，但不使用 state_name。是否可以在 arcpy 中以某种方式对其进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:23:28.980

你有没有尝试过：

```
Statistics_analysis(in_table, out_table, statistics_fields;statistics_fields..., case_field;case_field...}) 
```

计算表中字段的汇总统计信息。

如果您需要控制输入哪些行，您可以在计算统计数据之前进行选择（如 w/arcpy.SelectLayerByAttribute_management()）。

# hadoop - 我如何知道在 SQL 查询中映射了什么以及减少了什么？

> ID：15915798
> 
> 赞同：1
> 
> 时间：2013-04-10T02:18:00.583
> 
> 标签：hadoop, hive

我阅读了 MapReduce wiki 页面，但我认为我并不完全理解。我了解查询分为 map 步骤和 reduce 步骤。因此，为了利用这一点，我们应该`GROUP BY`更多地使用 s 并将工作从 map 步骤转移到 reduce 步骤。我不确定这是如何工作的。这似乎太神奇了。我想知道一组编写 SQL 查询以利用 MapReduce 的指南。

我如何知道哪些子句在 map 步骤或 reduce 步骤中？它背后的理论是什么？我想了解该理论及其内部工作原理，以便我可以编写更好的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:22:02.820

Hive 将尝试根据查询尽可能优化它所做的 map/reduce 的数量（以及 map 和 reduce 之间的工作）。如果你想控制 map/reduce 行为，你可以在 java 中编写自己的 map/reduce，Hive 的全部意义在于它可以让你使用熟悉的语法 (SQL) 来表达你想要得到的结果，它会创建一个有效的 map/reduce 序列来获得该结果

出于性能原因，您可能希望在映射阶段获得尽可能多的工作 - 因为通常映射器比减速器多，并且您不需要移动数据。请注意，有时聚合函数可以使用来自[Hive 站点](https://cwiki.apache.org/Hive/languagemanual-groupby.html)的组合器（尽管我认为 Hive 以不同方式处理）在地图端部分执行：

> Group By 的地图端聚合
> 
> hive.map.aggr 控制我们如何进行聚合。默认值为假。如果设置为true，Hive会直接在map任务中做一级聚合。这通常会提供更好的效率，但可能需要更多内存才能成功运行。
> 
> 设置 hive.map.aggr=true; 从表 2 中选择计数（*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:43:35.603

Map 函数是`data preparation stage`Mapper 可以`prepare and filter`将数据传递给它，以便它可以像输入一样传递给`reducer function`. Reducer 从 Mapper 获取输入，如果在查询中指定，则尝试减少数据。例如，reducer 将`count,max,min of a column`根据 mapper 给出的数据计算聚合。例如我你有要求`finding word count for the words not in set a,an and the`。

```
not filtering is done by mapper.

counting is done by by reducer. 
```

据我了解，Hive 查询中的三件事将导致 reducer 功能。

```
1.group by

2.join

3.multi row function 
```

其余大部分将导致 Mapper 功能。

# python - 在 GeoDjango 中获取最近几何图形的最快方法

> ID：15915801
> 
> 赞同：1
> 
> 时间：2013-04-10T02:18:23.413
> 
> 标签：python, django, geodjango

我在 WGS84 坐标系中有大量点（约 150 万）。这些点跨越很大的区域，所以我不能使用投影坐标系。我想找到最接近给定输入坐标对的点。我有一个工作视图，但执行时间太长（~2.5 秒）。

这是我的模型：

```
from django.contrib.gis.db import models

class Point(models.Model):

    id = models.IntegerField(primary_key=True)
    geom = models.PointField(srid=4326, spatial_index=True)

    objects = models.GeoManager() 
```

这是视图中的查询（我从另一个 SO 问题中得到）：

```
input_point = GEOSGeometry('POINT({0} {1})'.format(lon, lat))
point = Point.objects.distance(input_point).order_by('distance')[0] 
```

有没有办法更快地做到这一点？我在 SQLAlchemy/GeoAlchemy2 中有一个等效的查询，执行时间不到 0.5 秒，所以我知道这是可能的。

```
from geoalchemy2.elements import WKTElement

pt = WKTElement('POINT({0} {1})'.format(lon, lat), srid=4326)
q = session.query(Point).order_by(Point.geom.distance_box(pt)).first() 
```

有没有更好的方法来使用 GeoDjango 进行“最近点”查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:39:31.233

不确定，这可能会更快。您可以使用 google 投影 ( `900913`) 以米为单位获取数据。

```
from django.contrib.gis.measure import D

DISTANCE_LIMIT_METERS = 5000

input_point = Point(lon, lat, srid=4326)
input_point.transform(900913)
ModelContainingPoint.objects.filter(geom__dwithin=(input_point , D(m=DISTANCE_LIMIT_METERS))) 
```

参考：

[https://docs.djangoproject.com/en/dev/ref/contrib/gis/db-api/#distance-queries](https://docs.djangoproject.com/en/dev/ref/contrib/gis/db-api/#distance-queries)

# javascript - 将 Twitter Bootstrap 与 requireJS 一起使用 - 未定义不是函数

> ID：15915802
> 
> 赞同：1
> 
> 时间：2013-04-10T02:18:30.977
> 
> 标签：javascript, twitter-bootstrap, requirejs, undefined, amd

在阅读了[以下问题](https://stackoverflow.com/questions/13377373/shim-twitter-bootstrap-for-requirejs)后，我将编译的引导 JS 插件文件包装在 AMD 模块中，如下所示：

```
define(['zepto'], function($){ ...Bootstrap pasted here... }); 
```

然后这就是我的*main.js*文件的配置：

```
require.config({
    baseUrl: 'js',
    paths: {
        'zepto': 'lib/zepto',
        'underscore': 'lib/underscore',
        'backbone': 'lib/backbone',
        'text': 'lib/text',
        'bootstrap': 'lib/bootstrap'
    },
    shim: {
        'zepto': {
            exports: '$'
        },
        'underscore': {
            exports: '_'
        },
        'backbone': {
            deps: ['zepto', 'underscore'],
            exports: 'Backbone'
        }
    }
});
require([
    'app',
    'zepto',
    'underscore',
    'backbone',
    'bootstrap'
    ],
    function(App){
        //start the app
        App.initialize();
}); 
```

但是在控制台中，我在*bootstrap.js*文件中收到以下错误：

```
Uncaught TypeError: undefined is not a function 
```

即使 $ 被传递到模块中，它似乎也没有定义。完整包装的引导模块可[在此处](http://jsfiddle.net/2tQdS/)获得。

我正在使用应该与 Bootstrap 兼容的 zepto，并且正在从 shim 中导出 $，所以看不出为什么这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:50:42.467

我通过在引导 JS 文件中添加以下代码行来解决此问题。

Where`window.jQuery`被传递到修改 this 以包含 Zepto 全局对象的函数中，也像这样`window.jQuery || window.Zepto`

更多信息在这里：

[带引导程序的 Zepto](https://github.com/madrobby/zepto/commit/1d5daef9f8abd9b92340c135bfbb11a7ce1a83a6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T22:03:32.930

既然你有`define(['zepto'], function($){ ...Bootstrap pasted here... });`，你可以`window.jQuery`把函数调用调用中的all 替换为`$`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T19:42:09.063

我刚遇到同样的问题。我为 bootsrap 添加了一个垫片，现在它似乎可以工作了。这将是您其他垫片的补充。

```
shim: {
    'bootstrap': {
        deps: ['zepto']
    },
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T10:02:24.793

如果您不想编辑引导 JS 文件，可能值得考虑这个 shim，它应该在引导加载之前设置 jQuery 对象。

```
 'zepto': {
    exports: '$',
    init: function() {
      window.jQuery = $;
    }
  } 
```

# android - android在横向模式下强制启动活动

> ID：15915804
> 
> 赞同：1
> 
> 时间：2013-04-10T02:18:38.660
> 
> 标签：android, android-activity, orientation, screen-orientation, android-orientation

我正在尝试以横向模式启动 MyActivity。问题是它目前以纵向模式启动，然后进入横向模式。

我在 AndroidManifest.xml 中定义了 MyActivity，如下所示：

```
<activity
        android:name="com.myproject.MyActivity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:launchMode="singleTop"
        android:screenOrientation="landscape"
        android:taskAffinity="com.myproject"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
</activity> 
```

**有什么方法可以强制将活动启动为横向模式？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:33:14.617

尝试覆盖该`onConfigurationChanged`方法。

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-02T22:28:30.047

您需要这两个部分来保证性能。

在`MainActivity.java`中，输入以下内容：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} 
```

然后在 中`AndroidManifest.xml`，包括以下内容以防止配置更改：

```
 <activity
        android:name="com.myproject.MyActivity"
        android:configChanges="orientation|screenSize"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

那应该工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T10:49:57.293

Below example works:

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Me = this;
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-14T11:41:40.283

1.  在`AndroidManifest.xml`，在`<activity>`您想以横向模式强制启动时，添加`android:screenOrientation="locked"`.

2.  在您想强制以横向模式启动的选项中，`onCreate`添加`Activity``requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_USER_LANDSCAPE`

解释：

*   当您启动一个 Activity 时，**默认** `Activity`会获取您设备的当前方向，如果您的设备是纵向的，则 Activity 是纵向的。如果您的设备是横向的，则 Activity 是横向的。因此，您需要先锁定方向。
*   然后你需要在Activity的onCreate中设置方向，如果你不这样做，应用程序就会崩溃。
*   您也可以在 , 中设置方向`onStart`，`onResume`但如果您只需要设置一次方向，则只需设置为`onCreate`。

# c# - 绑定到一些嵌入的对象属性

> ID：15915805
> 
> 赞同：0
> 
> 时间：2013-04-10T02:18:38.957
> 
> 标签：c#, wpf, binding

我有一辆汽车`IEnumerable`：

```
public IEnumerable<ICars> Cars { get; private set; } 
```

对象“Car”实际上包含对另一个 Ibrand 类型对象的引用：

```
public interface ICar
{
    // Parent brand accessor
    IBrand Brand { get; set; }

    // Properties
    int CarId { get; set; }
    string CarName { get; set; }
} 
```

Ibrand 接口有一些属性：

```
public interface IBrand
{
    // Properties
    string LogoName { get; set; }
    string Sector { get; set; }
} 
```

我将此 Cars IEnumerable 绑定到 DataGrid -**这非常好**：

```
<DataGrid Name="Cars"
          ItemsSource="{Binding}"
          SelectedItem="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}, AncestorLevel=2}, Path=SelectedCar, Mode=TwoWay}">
  <DataGrid.Columns>
    <DataGridTextColumn Header="Car Id"
                        Binding="{Binding CarId}"
                        IsReadOnly="True" />
    <DataGridTextColumn Header="Car Name"
                        Binding="{Binding CarName}"
                        IsReadOnly="True" />
  </DataGrid.Columns> 
```

**我的问题是我也想绑定品牌的一些属性**（所有汽车通用），例如徽标。**这个合成器虽然不起作用**：

```
<DataGridTextColumn Header="Logo Name"
                    Binding="{Binding Brand.LogoName}"
                    IsReadOnly="True" /> 
```

关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:25:33.650

当您使用虚线路径时，您需要`Path`明确指定关键字。这应该有效：

```
<DataGridTextColumn Header="Logo Name" Binding="{Binding Path=Brand.LogoName}" IsReadOnly="True" /> 
```

# asp.net - Facebook 在 ASP.Net 中登录并保留用户

> ID：15915808
> 
> 赞同：0
> 
> 时间：2013-04-10T02:18:49.330
> 
> 标签：asp.net, facebook, facebook-graph-api, login

我允许用户使用 facebook 登录我的网站，每当用户下次访问并使用 facebook 作为登录方法时，我应该能够将该用户识别为现有用户。

为了您的理解，这是流程应该如何工作：新用户访问网站并选择 Facebook 登录，用户被重定向到 FB 登录页面，用户填写用户名和密码，一旦我收到来自 FB 的访问令牌代码，我将将该信息存储在我的数据库中。下次用户访问该站点并选择 Facebook 作为登录方式时，在 Facebook 页面上进行身份验证后，它应该返回与第一次返回相同的访问代码，因此我可以将其与已存储的访问令牌代码进行比较并决定无论是现有用户还是我需要创建新帐户。

为了实现上述目的，我指的是[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

由于某种原因，访问令牌不断过期，并且与已存储在 Db 中的访问令牌不匹配，我做错了什么/可能是我误解了这里的概念。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T11:58:07.160

我知道这已经晚了，但我正在处理类似的问题并试图找到解决方案。

您的问题是 Facebook 发出一个访问令牌，这有点像用户对您的应用程序的会话密钥。它确实过期了，应该计划好。发生这种情况时，您需要在下一次用户访问时请求新的。如果您希望滚动会话过期，则需要将*已经有效*的访问令牌换成稍后过期的新访问令牌。

当您进行后续登录时，您还将获得 facebook 用户 ID 以及新令牌。这就是您应该在数据库中比较以确定它是谁。

我自己有点坚持持久登录。

# java - 如何取消注册按钮点击？

> ID：15915812
> 
> 赞同：0
> 
> 时间：2013-04-10T02:19:03.650
> 
> 标签：java, android

我有这个代码：

```
final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;

            public void onClick(View v) {
                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
             } else if (buttonClicked.getParent() != button.getParent()) {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        Toast.makeText(Spojnice.this, "Correct", Toast.LENGTH_SHORT).show();
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                    } else {
                        Toast.makeText(Spojnice.this, "Wrong", Toast.LENGTH_SHORT).show();

                    }
                 buttonClicked = null;
                }       
            }

     }; 
```

我按下一个按钮，然后按下另一个按钮，现在它检查两个按钮是否来自同一个父级，如果是，则在 if 语句中继续。但是，如果它们不是来自同一个父级，则代码将 else if 语句退出到 buttonClicked = null;。在这里，我有一个问题。第二次点击后是第三次点击，我需要注销第一次点击，就像它从未发生过一样，因为现在我需要比较第二次和第三次点击。在我的情况下会发生什么，第一次单击一直保持活动状态，并等到 else if 语句的条件检查为正，然后继续执行下一个 if 语句。这对我不利。

那么，如何像从未发生过一样取消注册第一次点击，并只激活最近的两次点击，所以在这种情况下是第 2 次和第 3 次？当我按下第 4 个按钮取消注册第 2 个时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:57:18.767

我想这就是你要找的。如果它们没有相同的标签，此代码会将第二个按钮更改为第一个单击的按钮。

```
//This has to be a global variable so that last clicked button can be retained. 
//Earlier when it was local to the listener so its value was always set to null whenever a button was clicked
private Button buttonClicked=null;

final OnClickListener clickListener = new OnClickListener() {

     public void onClick(View v) {
         Button button = (Button) v;
         button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

         if (buttonClicked == null) {
                // first button is clicked
                buttonClicked = button;
         } 

//else if (buttonClicked.getParent() != button.getParent()) {//THIS was the culprit
 else if (buttonClicked != button) {//Direct comparison of buttons was the solution                    
// second button is clicked
 if (buttonClicked.getTag().equals(button.getTag())) {
        Toast.makeText(Spojnice.this, "Correct", Toast.LENGTH_SHORT).show();
        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
        buttonClicked.setEnabled(false);
        button.setEnabled(false);
        //Moved this line inside if condition so that button click is only set to null when there is a match.
        buttonClicked = null;
        } else {
                            Toast.makeText(Spojnice.this, "Wrong", Toast.LENGTH_SHORT).show();

                        /*
                        * IMPORTANT: change the color here to the original unclicked 
button color. Now in the else condition i.e. there was not a match we need to make the last clicked button to look like an unclicked button so we need to change it to original color and then make the new clicked button to be the current clicked button.
                            */
                            buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                            //Make the second button the current cliked one
                            buttonClicked = button;

                    }

                }       
            }
     }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:46:57.830

很难理解你到底在做什么，所以我不会用手引导你，而是试着澄清你的算法。我认为伪代码看起来像这样。

```
When clicking a button with nothing else selected ("clicked button" is null):
    Set the background colour
    Disable the button
    Note clicked button
When clicking a button with its pair "clicked button" selected (different parents, equal tags)
    Set the background colour
    Disable the button
    Note second clicked button
When clicking a button with a non-pair "clicked button" selected (different parents, different tags)
    Reset the "clicked button" background colour
    Enable the "clicked button"
    Set "clicked button" to null
    if "second clicked button" is not null
        Reset the "second clicked button" background colour
        Enable the "second clicked button"
        Set "second clicked button" to null
    Perform processing in "When clicking a button with nothing else selected" 
```

我看到你有很多关于这个问题的问题；我认为，来源是您还没有清楚算法。请注意，此算法意味着您无法从一对按钮中取消选择按钮，因为它们已禁用。想想你将如何允许取消选择 - 如果点击的按钮被启用，那么我们需要处理第二次点击。

# performance - 如何避免在该算法中使用循环？

> ID：15915814
> 
> 赞同：1
> 
> 时间：2013-04-10T02:19:21.213
> 
> 标签：performance, algorithm, r, loops, apply

我试图避免 R 中的循环，但似乎我必须使用它有时：

```
X=rnorm(100)
Y=matrix(rnorm(200*100),ncol=100)
Beta=function(y,period){  # y is a vector, maybe one row of Y
  num.col=length(y)-period+1
  ret=matrix(NA,1,num.col)  # store the result
  for(i in period:(length(y))){
    lm.sol=lm(y[(i-period+1):i]~X[(i-period+1):i])
    ret[i-period+1]=lm.sol$coefficients[2]
    }
  return(ret)
}
beta.30=apply(Y,1,Beta,period=30)
beta.30=t(beta.30) 
```

我尝试通过使用来避免循环`apply`，但是函数中仍然存在`for`循环`Beta`，并且计算速度不够快，有没有什么方法可以避免`for`这种算法中的循环？或者有什么方法可以加速算法？

谢谢！

我能想到的一种方法是`Beta`通过以下方式编译函数：

```
require(compiler)
enableJIT(3) 
```

但仍然不够快，我想我需要修改算法本身。

`lm.fit`很有帮助！它大大提高了速度。

```
Beta1=function(y,period){
  num.col=length(y)-period+1
  ret=matrix(NA,1,num.col)
  for(i in period:(length(y))){
    A=matrix(c(rep(1,period),X[(i-period+1):i]),ncol=2)
    lm.sol=lm.fit(A,y[(i-period+1):i])
    ret[i-period+1]=lm.sol$coefficients[2]
  }
  return(ret)
}
system.time(apply(Y,1,Beta,period=30))
user system elapsed
19.08 0.00 19.08
system.time(apply(Y,1,Beta1,period=30))
user system elapsed
1.09 0.00 1.09 
```

# javascript - 刷新jsp页面上的特定div而不是整个页面

> ID：15915817
> 
> 赞同：0
> 
> 时间：2013-04-10T02:19:30.560
> 
> 标签：javascript, ajax, jsp, jquery

我想根据输入刷新一个 div ...这是一个示例代码：

```
<%@ page language="java" contentType="text/html; charset=windows-1256"
    pageEncoding="windows-1256"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1256">
</head>
<body>
<input type="button" id="1" value="1" onClick="javaScript:update('1');"/>
<input type="button" id="2" value="2" onClick="javaScript:update('2');"/>
<%
int value=1;
%>
<div id="refresh">
<%=value %>
</div>
<script type="text/javascript">

function update(input)
{
        value=input;
        alert(value);
}

</script>
</body>
</html> 
```

所以这就是我在页面加载时想要的，它会打印 1，因为值是用 1 初始化的，但是如果我单击 2，我希望该 div 打印 2，其值在 java 脚本的更新函数中得到更新......我不想刷新整个页面只是想刷新那个 div ...我不想使用 JQUERY.load 因为它在 div 中加载整个页面我只想刷新那个 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:20:36.340

```
function update(input)
{
        $("#refresh").html(input)
} 
```

这应该就是你所需要的

`.html()`是改变元素的innerHTML 的jQuery 函数。

对于 ajax，您可以在[此处](http://api.jquery.com/jQuery.ajax/)查看 jquery 文档，[这是 jQUery + php 的一个不错的示例](http://www.jonsuh.com/blog/jquery-ajax-call-to-php-script-with-json-return)

# windows - bat 不返回正确的退出状态

> ID：15915820
> 
> 赞同：0
> 
> 时间：2013-04-10T02:19:36.650
> 
> 标签：windows, batch-file, cmd, dos, exit

我有两个 bat 文件。callexcode.cmd 调用 excode.cmd，它只是调用不存在的文件 'saurabh'。当我想在调用者中打印错误代码时（在本例中为 callexcode.cmd，我得到 0 表示成功。但错误代码为 1，因为没有名为“saurabh”的文件。我正在打印退出两个bat文件中的代码。callie显示退出代码为1，而调用者显示退出代码为0。任何人都可以看看，让我知道我哪里出错了。退出代码是否有任何原因弄乱。

```
callExcode.cmd

 IF "%1"=="abc" (
  SET good=%2
 )
 IF /I "%good%" == "pqr" ( 
 CALL exCode
 echo ' in file callexcode, error level ret = %ERRORLEVEL%'
 @EXIT /B %ERRORLEVEL% 
 )

excode.cmd

CALL saurabh 
echo 'in file excode'
echo 'exit code %ERRORLEVEL%'
@EXIT /B %ERRORLEVEL% 
```

输出 C:\docs>callExcode.cmd abc pqr

C:\docs>IF "abc" == "abc" (SET good=pqr)

C:\docs>IF /I "pqr" == "pqr" ( CALL exCode echo ' 在文件 callexcode 中，错误级别 ret = 0'

)

C:\docs>CALL saurabh 'saurabh' 不是内部或外部命令、可运行程序或批处理文件。

C:\docs>echo 'in file excode' 'in file excode'

C:\docs>echo 'exit code 1' 'exit code 1' ' in file callexcode, error level ret = 0'

提前致谢！

索拉布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:28:35.790

当您在**( )**中有代码时，解释器认为这是一行代码。环境变量在解析行时展开，而不是在执行时展开。您可以通过在脚本顶部使用这行代码来解决此问题：

```
setlocal enableextensions enabledelayedexpansion 
```

一旦你有了那条线，你就可以使用

```
!ERRORLEVEL! 
```

代替

```
%ERRORLEVEL% 
```

**！** _ 而不是**%**来命名环境变量名称意味着“在执行代码行时扩展此变量，而不是在解析时。”

账单

# javascript - 每晚检测 Firefox

> ID：15915821
> 
> 赞同：0
> 
> 时间：2013-04-10T02:19:44.027
> 
> 标签：javascript, jquery, firefox, nightly-build

我一直在使用 firefox 的 nightly build 有一段时间了，今天我注意到我的网站存在问题（特别是 css3 的 column-width 属性/jquery）。我一直在尝试解决这个问题，但直到现在都没有成功，所以我只想切换到另一个样式表，就像使用 IE 一样。有什么方法可以检测夜间构建？谢谢！

# configuration - Prestashop 承运人在结帐时不可用。显示错误

> ID：15915824
> 
> 赞同：1
> 
> 时间：2013-04-10T02:20:04.273
> 
> 标签：configuration, checkout, backend, prestashop, online-store

好吧，我有一个奇怪的问题。我使用图片中的设置设置了我的 prestashop 运营商：![后台运营商配置](https://i.stack.imgur.com/Yd1PH.jpg)

现在，当我使用属于印度国家（位于亚洲大陆）的地址结帐时，它说

> 有 1 个错误
> 
> 1.  没有送货到您选择的地址的承运人。

我的配置有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-15T07:20:56.877

首先转到标题上的运输选项卡..然后单击运输子菜单..然后滚动页面并到达页面底部。现在您可以看到..费用选项卡。在那里选择承运人并检查区域或范围是否正确设置该运营商..我可以与您共享图像，但我没有 10 个声誉来共享图像..很抱歉..但是以这种方式检查..这会有所帮助

或者我认为您没有为您的承运人设置价格范围或重量范围..转到运输选项卡并单击价格范围或重量范围子菜单..然后单击添加新按钮以添加价格范围或重量范围..之后肯定会出现在前端

# java - 共享图书馆战略

> ID：15915836
> 
> 赞同：0
> 
> 时间：2013-04-10T02:21:37.750
> 
> 标签：java, osgi, design-patterns, infrastructure

我工作的客户端有大约 150 个在 WebSphere 上运行的 Web 应用程序，它是各种 Java 模式、框架等（Spring、JSF、GWT、WebServices、RESTful 等）的混搭。必须减少 jar 版本和功能的重复性，以改善我们的环境和开发生命周期。

例如，我们需要 WebApp_A 来使用 CompanyJar_v1.1.jar，我们需要 WebApp_B 来使用 CompanyJar_v1.5.jar。

我知道 OSGi 是一种选择，但我听说 Spring 和 OSGi 可能存在一些问题，而且我们的应用程序严重依赖 Spring。这可能是也可能不是问题。另一个问题是升级我们的应用程序以利用 OSGi 的工作量。我们了解更新我们的应用程序所需的任何方法、时间和精力，但我们希望将其保持在最低限度。但是，如果最好的长期解决方案需要更多的精力来更新应用程序，那就这样吧。

我们也可以利用 WebSphere 的共享库功能，但我们不喜欢使用 WebSphere 特定的解决方案。从服务器的角度来看，这也很麻烦，因为我们有太多需要管理的版本化 jar。

有没有人将他们复杂的环境迁移到更模块化的环境中？如果是这样，团队应该问自己什么问题？我们应该考虑哪些技术？

谢谢，肖恩

# date - 如何从日期减去 1 周并取回自定义日期格式

> ID：15915837
> 
> 赞同：2
> 
> 时间：2013-04-10T02:21:47.790
> 
> 标签：date, vbscript

所以我有一个这种格式的日期 2012 年 11 月 20 日，我想做的是减去一周的时间，然后在 2012 年 11 月 13 日回来我试过这个：`DateAdd("ww", -1, DatePart("d", Date) & "-" & MonthName(DatePart("m", Date), 1) & "-" & DatePart("yyyy", Date) )`

但我得到了错误的日期格式：13/12/2012 有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T02:28:14.760

格式化进入 DateAdd 函数的日期可能不会影响输出。尝试类似：

```
weekEarlier=DateAdd("ww", -1, Date)
document.write(DatePart("d", weekEarlier) & "-" & MonthName(DatePart("m", weekEarlier), 1) & "-" & DatePart("yyyy", weekEarlier)) 
```

# php - 为登录系统从数组 php codeigniter 创建一个对象

> ID：15915838
> 
> 赞同：0
> 
> 时间：2013-04-10T02:21:52.503
> 
> 标签：php, codeigniter, getter-setter, magic-methods

我有一个简单的问题，我正在创建一个简单的登录系统，我想在成功登录后将用户信息分配给模型类，

示例模型

```
class user extends CI_Model {
    public $id=FALSE,$name,$role;

    public function __construct(){
        parent::__construct();

    //load user information
        if($this->session->userdata('user')){
            $u=$this->session->userdata('user');
            $this->id=$u->id;
            $this->role=$u->role;
            $this->name=$u->name;
        }

    }
    function login(){......} 
```

但这对我来说看起来不正确！它丑陋而不干燥..

那么我应该使用魔法_set *，* _get 吗？或者我可以做类似的事情吗`$this=$this->session->userdata('user');`

对我来说，目标是因为这个模型在我的自动加载上，我希望能够使用简单的`$id=$user->id`或 从任何其他模型/控制器获取用户信息`if($user->id)echo"hello".$user->name;`

现在如果我这样做。

```
 private $data;

    public function __construct(){
        parent::__construct();
        $this->data = (object) $this->session->userdata('user');
    }
    public function __get($name) {
    if(isset($this->data->$name)){
        return $this->data->$name;
        }
    } 
```

这将创建一个错误“调用非对象上的成员函数 userdata()”

我认为那是因为 __get 捕获 $this->session ！那么我该如何解决这个问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:49:35.317

为什么不简单...

```
if($this->session->userdata('user')){
    $this->data = $this->session->userdata('user');
} 
```

...然后稍后您可以访问`$user->data->id`. 此外，如果您向用户数据添加更多属性，这种方法将来会更加灵活。

# javascript - phonegap 中没有 javascript 代码执行

> ID：15915841
> 
> 赞同：0
> 
> 时间：2013-04-10T02:22:14.307
> 
> 标签：javascript, cordova

我的问题是，当在应用程序的某些部分编译和测试我的应用程序时，似乎没有执行 javascript 代码

我注意到，当我在第一次加载时尝试浏览器中的相同部分时，与已编译的应用程序具有相同的行为，但是当我重新加载页面时执行代码 javascritp

行为可以在这个链接中看到

[http://jeanca.com/clientes/bluepages/search/specialist.html](http://jeanca.com/clientes/bluepages/search/specialist.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:24:26.807

您如何为 PhoneGap 包装此应用程序存在几个问题：

1.  您正在包含来自远程服务器（重定向到另一台服务器）的 javascript 文件（prettify.js）。在您的构建中本地包含此文件

2.  在您的代码中的至少一个地方，您正在创建本地链接而不是正确限定的 URL，例如

    $('#especialidades').append('<dd><a href="specialistList.html?id=' + data[0][i]+'">'+data[1][i]+'< /a></dd>');

在 PhoneGap 内部，该 href 将被解释为`href=file://specialistList.html?...`. 您应该将完全限定的 URL 放在那里，例如`href://yourserver.com/specialistList.html?...`

您还应该确保您使用的所有外部服务器都在 PhoneGap 项目配置中列入白名单。

# c - msp430g2452 从交换机捕获中断时遇到问题

> ID：15915845
> 
> 赞同：2
> 
> 时间：2013-04-10T02:22:41.827
> 
> 标签：c, microcontroller, interrupt, msp430

我正在尝试为 msp430g2452 mcu 编写一些代码。它应该循环使用中断和 switch 语句来打开或关闭 LED 的几种模式。我才刚刚开始学习编码、c 和 python :) 所以我不确定出了什么问题。

据我所知，一切正常，除了我没有捕获 p1.3 上的中断，p1.3 是我的启动板仿真/开发板上的一个按钮。如果我使用 code composer studio 5 进行调试并暂停仿真，然后更改 P1IFG.3 的位并恢复仿真，正确的事件链就会发生。所以在我看来，问题在于捕捉那个开关边缘。

如果有人对这里发生的事情有任何想法，我将非常感激。 有兴趣的人可以使用[mcu 数据表。](http://www.ti.com/lit/ds/symlink/msp430g2452.pdf)我用来遵循的代码：

```
#include <msp430g2452.h>

#define button BIT3 // set button to p1.3
#define grnLED BIT6 // set green led to p1.6
#define redLED BIT0 // set red led to p1.0

volatile unsigned int stateID = 0; // declare and clear stateID

void main(void) {
WDTCTL = WDTPW | WDTHOLD;     // Stop watchdog timer

P1DIR |= (grnLED + redLED); // set bit0 and bit6 to output, led's
P1OUT &= ~(grnLED + redLED); // both led's off

P1IE |= button; // enable interrupts on button
P1REN |= button; // enable pull-up resistor on button
P1IFG &= ~button; // flag for button off

_EINT(); // enable interrupts

// loop forever
while (1){
      switch(stateID){ //switch based on state of stateID
      case 1:
      {
              P1OUT = grnLED; //turn green led on
              break;
      }
      case 2:
      {
              P1OUT = redLED; //turn red led on
              break;
      }
      case 3:
      {
              P1OUT = (grnLED + redLED); // turn both led's on
              break;
      }
      case 4:
      {
              stateID = 0; // reset stateID
              break;
      }
      default:
      {
              P1OUT &= ~(grnLED + redLED); // turn both led's off again
              break;

      }
      }
}
}

// interrupt handler
#pragma vector=PORT1_VECTOR
__interrupt void Port_1 (void){
  _DINT(); // disable interrupts to avoid nesting
  stateID=(stateID+1); // increment stateID
  P1IFG &= ~button; // clear interrupt flag on button
  _EINT(); // re-enable interrupts
} 
```

这是固定代码

```
#include <msp430g2553.h>

/* written by: rob j loranger
* date: april  2013
*
* this program should emulate a typical headlamp operation,
* from a power off state one button press should turn on the lamp in mode one.
* each successive press should cycle through modes until it returns to an off state
*
* main.c
*/

#define button BIT3 // set button to p1.3
#define grnLED BIT6 // set green led to p1.6
#define redLED BIT0 // set red led to p1.0

volatile unsigned int stateID = 0; // declare and clear stateID

void main(void) {
WDTCTL = WDTPW | WDTHOLD;     // Stop watchdog timer

P1DIR |= (grnLED + redLED); // set bit0 and bit6 to output, led's
P1OUT &= ~(grnLED + redLED); // both led's off
P1OUT |= button; // set button to output

/* i set button to an output and i set the edge high 
*  for the interrupt as well.
*/

P1IE |= button; // enable interrupts on button
P1IES |= button; // set edge high
P1REN |= button; // enable pull-up resistor on button
P1IFG &= ~button; // flag for button off

_EINT(); // enable interrupts

/* i then made some changes to my loop to prevent the output 
*  state on button from being changed
*/

// loop forever
while (1){
      switch(stateID){ //switch based on state of stateID
      case 1:
      {
              P1OUT |= grnLED; //turn green led on
              break;
      }
      case 2:
      {
              P1OUT &= ~grnLED; // turn green led off
              P1OUT |= redLED; //turn red led on
              break;
      }
      case 3:
      {
              P1OUT |= grnLED; // turn green led on, both are on now
              break;
      }
      case 4:
      {
              stateID = 0; // reset stateID
              break;
      }
      default:
      {
              P1OUT &= ~(grnLED + redLED); // turn both led's off again
              break;

      }
      }
}
}

// interrupt handler
#pragma vector=PORT1_VECTOR
__interrupt void Port_1 (void){
  _DINT(); // disable interrupts to avoid nesting
  stateID=(stateID+1); // increment stateID
  P1IFG &= ~button; // clear interrupt flag on button
  _EINT(); // re-enable interrupts
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:04:33.937

[该](http://www.ti.com/general/docs/lit/getliterature.tsp?baseLiteratureNumber=SLAU144&fileType=pdf "MSP430x2xx 系列用户指南")数据表可能更有用，特别是第 8 节。

我建议您考虑确保引脚确实配置为 IO（P1SEL.x P1SEL2.x 两者 = 0），或者检查“中断边沿选择”（P1IES.x）设置。

祝你好运！

# python - 在 Python 中检查一个数字是否进入另一个数字的问题

> ID：15915846
> 
> 赞同：0
> 
> 时间：2013-04-10T02:22:44.470
> 
> 标签：python, arrays, algebra

我目前正在尝试创建一个可以分解三项式的计算机程序。对于我的算法的一部分，我需要检查最小的系数是否进入了较大的系数。目前，我一直将系数存储在一个数组中（按升序排序）。要检查数字是否相互匹配，我使用以下代码：

```
if (array[1] % array[0]) and (array[2] % array[0]) == 0:
    print "YAY"
else:
    print "FAIL" 
```

但是，当我尝试将值 3、6 和 9 输入到我的数组中时，程序以`FAIL`. 为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:25:27.533

我觉得你需要改变

```
if (array[1] % array[0]) and (array[2] % array[0]) == 0: 
```

对此，

```
if (array[1] % array[0]) == 0 and (array[2] % array[0]) == 0: 
```

我所知道的任何语言都不允许您尝试编写的比较类型。另一种表达方式，可能更符合其逻辑，是：

```
if array[1] % array[0] == array[2] % array[0] == 0: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:27:29.050

这里的问题在于 if 条件中的逻辑。事实上，它正在测试：

```
1\. if (array[1] % array[0]) ) is TRUE
2\. if (array[2] & array[0]) == 0 
```

将其更改为：

```
if (array[1] % array[0]) == 0 and (array[2] % array[0]) == 0: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:25:46.317

你可能想要

```
if (array[1] % array[0] == 0) and (array[2] % array[0] == 0): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T02:25:52.347

您的条件有两个组成部分，但您只比较第二个。尝试这个：

```
if (array[1] % array[0]) == 0 and (array[2] % array[0]) == 0:
    print "YAY"
else:
    print "FAIL" 
```

您的问题是`(array[1] % array[0])`单独测试 - 如果余数为零，就像在您的示例中一样，它的计算结果为假（0 为假，<> 0 为真）。

# jquery - JQuery Mobile：在图库中标记图像的选项

> ID：15915847
> 
> 赞同：0
> 
> 时间：2013-04-10T02:22:56.930
> 
> 标签：jquery, html, jquery-mobile

我有一些从相机拍摄的照片，文件名是自动生成的，我有一个标签列表，我需要用户分配给每张照片。使用 JQuery/Mobile 执行此操作的最佳方法是什么？

我正在考虑使用“选择菜单”选项，但它无法在其上显示图像。

谢谢哈洛曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T17:24:56.897

假设您首先在某个移动平台上工作，尽管您没有提到它。Jquery mobile 是一个 javascript 库，可用于开发移动支持网页。它还使用 jquery 简化了方法。jquery mobile 不能单独使用来访问移动系统。它只会将网络技术增强到移动设备。您需要使用 phoneGap（另一个带有插件的 js 库来构建混合应用程序）来使用 java 脚本使用移动功能。

[http://jquerymobile.com/demos/1.1.0/docs/pages/phonegap.html](http://jquerymobile.com/demos/1.1.0/docs/pages/phonegap.html)

[http://docs.phonegap.com/en/2.7.0/index.html](http://docs.phonegap.com/en/2.7.0/index.html)

使用 jqm 设计 UI 并使用 phonegap 访问移动文件系统。

# asp.net-mvc-4 - 带有 ID 的 Html.Actionlink

> ID：15915861
> 
> 赞同：7
> 
> 时间：2013-04-10T02:25:05.300
> 
> 标签：asp.net-mvc-4

我有这个代码：

```
@Html.ActionLink("Back To Blog","Blog","Home", new {Model.BlogId}, null) 
```

该代码正在生成此 HTML：

```
<a href="/Home/Blog?BlogId=1">Back To Blog</a> 
```

但我**希望**它生成的是这样的：

```
<a href="/Home/Blog/1">Back To Blog</a> 
```

我该如何解决？

PS - 我在 SO 上看到了这篇文章，这似乎表明我的做法是正确的，但我没有得到我想要的结果。我正在使用 MVC4，最新版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T02:39:39.460

我怀疑您没有为`Home/Blog/{BlogId}`. 因此，如果您希望能够编写此代码（如您在代码中显示的那样）：

```
@Html.ActionLink("Back To Blog","Blog","Home", new { Model.BlogId}, null) 
```

你需要有这样的路线：

```
routes.MapRoute(
    name: "DefaultBlog",
    url: "{controller}/{action}/{blogid}",
    defaults: new { controller = "Home", action = "Blog", 
            blogid = UrlParameter.Optional }
); 
```

注意 url 的第三部分，它被命名为`blogid`. 但是，如果您不想配置另一条路线，那么您可以将链接重写为：

```
@Html.ActionLink("Back To Blog","Blog","Home", new { id = Model.BlogId}, null) 
```

注意`id`参数上的。

# java - 找到适用于 Java 的 iTunes 控制器 API，我如何播放特定歌曲？

> ID：15915862
> 
> 赞同：0
> 
> 时间：2013-04-10T02:25:07.223
> 
> 标签：java, api, com, itunes, jacob

```
 //Using iTunes Controller
        iTunes itc = new iTunes();
        itc.playFile(filePath); // Takes type String 
```

似乎是正确的行动方针。但是，我希望用户能够简单地指定歌曲标题......

我可以使用提示让艺术家和专辑查看要浏览的文件夹，因为这就是 iTunes 存储文件的方式......（例如 C:\Users\username\Music\iTunes\iTunes Media\Artist\Album\song )

有谁知道我可以直接进入指定歌曲的方法吗？我一直在寻找一段时间。

如果有帮助，这里是我正在使用的 API 的文档[http://www.dot-totally.co.uk/software/itunescon/javadoc-0.2/index.html](http://www.dot-totally.co.uk/software/itunescon/javadoc-0.2/index.html)

更新 - - - - - - - - - - - - - - - - -

于是我起身......

```
//Using iTunes Controller -- Still doesn't work
iTunes itc = new iTunes();
ITSourceCollection sc = (ITSourceCollection) itc.getSources();
ITSource source = sc.getItemByName(song);
int trackID = source.getTrackID();
// Now what to do with the track id? Look for getTrack by ID, then track.play();
// Found that a TrackCollection can return a Track by ID.
// Need to find out how to get the TrackCollection of the library 
```

我被困住了.... :(

编辑：

想我可以根据从 sourcecollection 获得的信息手动创建一个轨道。虽然对构造函数感到困惑......

ITTrack(com.jacob.com.Dispatch d)

？？？谁能澄清创建 ITTrack 对象的正确语法是什么？这是它的javadoc，我不明白。

[http://www.dot-totally.co.uk/software/itunescon/javadoc-0.2/com/dt/iTunesController/ITTrack.html](http://www.dot-totally.co.uk/software/itunescon/javadoc-0.2/com/dt/iTunesController/ITTrack.html)

更新 - - - - - - - - - - - - - - - - - - -

好的。所以我使用了 fetchDispatch() 方法来创建一个 ITTrack 类。 [http://www.dot-totally.co.uk/software/itunescon/javadoc-0.2/com/dt/iTunesController/ITObject.html#fetchDispatch()](http://www.dot-totally.co.uk/software/itunescon/javadoc-0.2/com/dt/iTunesController/ITObject.html#fetchDispatch())

```
//Using iTunes Controller -- work in progress
iTunes itc = new iTunes();
ITSourceCollection libsource = (ITSourceCollection) itc.getSources();
ITSource trackToPlay = libsource.getItemByName(song);
ITTrack track = new ITTrack(trackToPlay.fetchDispatch());
track.play(); 
```

我现在遇到一个例外：

```
Exception in thread "main" java.lang.NoSuchMethodError: com.jacob.com.Dispatch.call(Lcom/jacob/com/Dispatch;Ljava/lang/String;Ljava/lang/Object;)Lcom/jacob/com/Variant;
at com.dt.iTunesController.ITSourceCollection.getItemByName(ITSourceCollection.java:49)
at Build.Clapper3.process(-----.java:117)
at Build.Clapper3.main(-----.java:232) 
```

gahhh 这么近！所以我在输入项目“名称”的方法上做错了......但是什么？

我想也许如果我输入：

```
System.out.println(libsource.toString()); 
```

查找来源的名称....但我猜它没有 toString() 方法？输出是：

```
com.dt.iTunesController.ITSourceCollection@118278a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:27:35.637

我最终废弃了 iTunes 控制器 API 并使用 JacobGen 生成了我自己的。我发现索引 1 是库源，对于 IITPlaylistCollection，索引 1 是库播放列表（所有歌曲），然后在 IITTrack 对象上调用 play()。工作得很好，如果它还没有打开，甚至可以打开 iTunes！

```
ActiveXComponent iTunesCom = new ActiveXComponent("iTunes.Application");
Dispatch iTunesController = new Dispatch(iTunesCom.getObject());
IiTunes it = new IiTunes(iTunesController);
IITSourceCollection sourceList = it.getSources();
IITSource s = sourceList.getItem(1); // Index 1 is library source
IITPlaylistCollection pc = s.getPlaylists();
IITPlaylist p = pc.getItem(1); // Index 1 is library playlist
IITTrackCollection tracks = p.getTracks();
IITTrack track = tracks.getItemByName(songName);
track.play(); 
```

与播放列表类似：

```
ActiveXComponent iTunesCom = new ActiveXComponent("iTunes.Application");
Dispatch iTunesController = new Dispatch(iTunesCom.getObject());
IiTunes it = new IiTunes(iTunesController);
IITSourceCollection sourceList = it.getSources();
IITSource s = sourceList.getItem(1); // Index 1 is library source
IITPlaylistCollection pc = s.getPlaylists();
IITPlaylist playlist = pc.getItemByName(playlistName);
playlist.playFirstTrack(); 
```

感谢您的所有指点，希望这可以帮助任何有类似问题的人。我花了很长时间才弄清楚如何让 JacobGen 工作，因为互联网上几乎没有任何文档。如果有人有任何问题，我很乐意就此发表一篇文章。

# c - 使用 main(int argc,char *argv[]) 的问题

> ID：15915869
> 
> 赞同：2
> 
> 时间：2013-04-10T02:26:06.263
> 
> 标签：c, main, argv

```
#include<stdio.h>
#include<string.h>
int main(int argc,char *argv[])
{
    char string[]="#";
    printf("%s\n",argv[1]);
    printf("%s\n",argv[2]);
    printf("%s\n",argv[3]);
    strcat(argv[1],string);
    printf("argv[1] is %s\n",argv[1]);
    printf("argv[2] is %s\n",argv[2]);
    printf("argv[3] is %s\n",argv[3]);
    return 0;
} 
```

当我使用 strcat() 在 argv[1] 末尾添加一些内容时，argv[2] 将丢失（使用 strcat 后 strlen(argv[2]) 变为 0）。但 argv[3] 没有变化。为什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:49:30.383

您不能将内容直接附加到，`argv[]`因为每个`argv[]`都被序列化分配到内存中只能保存其原始大小的空间。

要了解正在发生的事情，想象一下`argv`是这样的：

```
char buffer[] = "./program\0one\0two\0three\0";
char *argv[4] = { &buffer[0], &buffer[10], &buffer[14], &buffer[18] }; 
```

正如你所看到的，如果你写了一些东西，`"one"`你会覆盖`"two"`并破坏整个东西，因为它们是在内存中序列化的。

要解决此问题，您必须将每个缓冲区复制`argv[]`到一个更大的缓冲区，您可以在其中安全地进行修改。例如：

```
char buf[1024];
strcpy(buf, argv[1]);
strcat(buf, string);
printf("argv[1] is %s\n", buf); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T02:37:28.047

请记住，C 中的“字符串”是以零结尾的字符数组。假设原来的四个参数是“一”、“二”、“三”和“四”；然后这四个参数存储在内存中

```
one\0two\0three\0four\0 
```

当您在 argv[1] 之后添加 # 时（strcat 也会添加一个 \0），内存内容变为：

```
one\0two#\0hree\0four\0 
```

您现在可以验证 argv[2] 是否指向 \0 字符，因此它是一个空字符串。argv[3] 仍然正确指向，并且保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:29:22.747

您不应该修改 argv[] = 效果未定义

# audio-streaming - 如何在 vvvv 中播放音乐和使用节拍检测器

> ID：15915874
> 
> 赞同：0
> 
> 时间：2013-04-10T02:26:27.067
> 
> 标签：audio-streaming, beat-detection

有谁知道在节拍检测器与 vvvv 一起工作时如何收听歌曲的音频？现在我可以将文件流节点的输出引脚连接到节拍检测器节点并且它可以工作，我也可以将输出引脚连接到音频输出节点并听歌曲，但我不能同时做这两个.. 。 可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T21:13:57.550

我相信你设置了两个流节点。一个用于节拍检测器，一个用于音频输出。这很奇怪，但这似乎是这样做的方式。您是否在音频输入或流节点上检查了 F1。它可能有一个例子来说明这一点。

# android - 为什么当我的桌面屏幕和移动屏幕具有相同的分辨率时，它们显示的内容不一样？

> ID：15915875
> 
> 赞同：0
> 
> 时间：2013-04-10T02:26:30.863
> 
> 标签：android, css, pixel, mobile-website

例如，在我的桌面上查看我的一个 50px 宽按钮中的一个，它看起来像预期的那样占据了大约 5% 的屏幕空间。但在我的 Android 设备上以相同的水平分辨率查看时，它看起来占据了大约 15%。

谁能解释这是为什么以及我能做些什么来阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:29:37.957

不同的显示器具有不同的像素大小。您听到这被称为 DPI 或每英寸点数，即物理上每英寸有多少像素。在您的情况下，您的桌面比您的 Android 设备具有更小的像素（更高的 DPI），因此 50px 占用的物理空间更少。

您可以通过指定物理尺寸来解决此问题，例如`cm`或`in`。查看[规格](http://www.w3.org/TR/CSS21/syndata.html#length-units)。

# java - android多个项目共享同一个库问题

> ID：15915889
> 
> 赞同：1
> 
> 时间：2013-04-10T02:28:14.360
> 
> 标签：java, android, dependencies, shared-libraries, multiple-projects

我正在使用 android sdk 开发 android 应用程序。我有一个由多个项目共享的公共库。这些项目使用共享库中的相同代码，但具有自己的资源、图像和声音等。但是如果这些项目安装在同一设备上，当我运行其中一个时，它会调出其他应用程序共享库。任何人都可以帮助我解决这个问题吗？谢谢 ![在此处输入图像描述](https://i.stack.imgur.com/aOjLv.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:43:19.047

您似乎没有使用真正的 Android 库项目，如下所述：http: [//developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)。

触发 Intent 以加载`Activity`可能不在同一应用程序中的 Intent 时，会出现“使用完成操作”对话框。

请验证您是否通过 Android 库项目共享资源和代码。

使用 Android 库项目，您可以在多个不同的应用程序之间共享资源，这些应用程序通过单独的 .APK 分发，而不会在组件之间造成混淆。它一直由许多开发人员完成。

# html - html - 如何对这些无序列表使用带锚的行条带化？

> ID：15915894
> 
> 赞同：1
> 
> 时间：2013-04-10T02:28:42.933
> 
> 标签：html, css, html-lists

我正在尝试使用将被拖动的行进行布局。

![在此处输入图像描述](https://i.stack.imgur.com/Tsgf9.png)

我可以很好地剥离表格（右侧带有绿色边框的表格），但是当我添加锚标签以使这些成为大的可拖动单元格（它们将被拖动）时，条带消失并且它们具有灰色背景（表格在左边有黄色边框）。

HTML/CSS：

```
<html>
  <head>
  <style>
    #categorizer { padding: 20px; }
    #left  {
      color: green;
      background-color: yellow;
      display: inline;
      border: solid;
      border-color: pink, 10px
      padding: 20px;
      margin: 20px;
    }   
    #right {
      color: yellow;
      background-color: green;
      display: inline;
      border: solid;
      border-color: pink, 10px
      padding: 20px;
      margin: 20px;
    }   
    ul  
    {   
      padding: 30px;
      margin: 30px;
      float:left;
      list-style:none;
    }   
    li {
    padding: 20px;
    }   
    li:nth-child(even) { background-color: #000 }
    li:nth-child(odd) { background-color: #666 }
  </style>
  </head>
  <body>
    <div id="categorizer">
      <ul id="left">
        <a href="#"><li>1</li></a>
        <a href="#"><li>2</li></a>
        <a href="#"><li>3</li></a>
        <a href="#"><li>4</li></a>
      </ul>
      <ul id="right">
        <li>a</li>
        <li>b</li>
        <li>c</li>
        <li>d</li>
        <li>e</li>
      </ul>
    </div>
  </body>
</html> 
```

我怎样才能拥有“显示手”的大可拖动单元格 - 不仅仅是在字母上，而是整个单元格 - 这很重要 - 但仍然应用表格条带（也可以是 20+ 行，这是动态的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:32:36.253

您不能将 a`<a>`作为 a 的直接子级`<ul>`或`<ol>`只有 a`<li>`有效 - 只需为您的第一个列表 ( `#left`) 切换顺序并将其设置`<a>`为`display: block;`

```
<ul id="left">
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
 </ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:37:51.893

移动您的所有`<a>`标签`<li>` 并添加到您的 css`cursor:move`中，以便为每个元素`li`添加一只手。`li`

[jsLint 演示](http://jsfiddle.net/Class/MRSct/)

HTML：

```
<li><a href="#">1</a></li>
<li><a href="#">2</a></li>
<li><a href="#">3</a></li>
<li><a href="#">4</a></li> 
```

CSS：

```
li {
    cursor:move;
} 
```

你可能想在你的css中更改`li{`为`li, li > a`让你的`a`标签不显示指针，除非你想要那样。

# android - 从现有数据库创建一个新数据库（或者只是创建新表？）

> ID：15915896
> 
> 赞同：2
> 
> 时间：2013-04-10T02:28:55.377
> 
> 标签：android, database, android-sqlite

我的应用程序正在与数据库通信（只读，存储在资产文件中），用户可以显示来自该数据库的内容列表。例如，可以在列表视图中显示该数据库中的数千个元素，用户可以单击任何元素并获取更多信息。

我想添加一个新功能，允许用户创建“收藏夹”列表。所以，每次用户点击数据库中的一个元素时，他可以点击一个按钮“添加到收藏夹”，然后从主菜单中会有一个“收藏夹”按钮打开一个列表视图，其中只有用户决定的元素首先添加。

我已经有一个扩展 SQLiteOpenHelper 的 DatabaseHelper 类，以及一个指定与我的第一个表的交互的 DatabaseAdapter 类。

**据我了解，我可以保留一个数据库（然后重新使用我的 DatabaseHelper 类）并创建一个新的 DatabaseAdapter2 类，定义新表的方法（添加新元素、删除元素等）以及字段我的桌子。这样对吗？我不太确定，因为我的 DatabaseHelper 是在“只读”中定义的，以保护我的主表免受任何修改，但第二个表应该必须在“写+读”中，所以也许有第二个 databaseHelper 会更好?** 这可能是一个微不足道的问题，但我找不到太多关于从现有表/数据库创建新表/数据库的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:32:00.313

你描述你的应用程序的方式，我会考虑把它作为一个数据库，即使它需要你打开你的 mainTable 来编写。如果您正在从您的收藏夹数据库中读取，然后从您的 mainTable 数据库中提取后续数据，这将比您从一个数据库中的两个表中提取复杂查询要慢得多。

# haskell - 为什么这不是很好的类型？

> ID：15915901
> 
> 赞同：0
> 
> 时间：2013-04-10T02:29:22.043
> 
> 标签：haskell

我正在编写一个函数来生成一组字符串的所有排列——“foo”应该返回 {“foo”、“ofo”、“oof”}。我已经在 Clojure 中这样做了，所以我知道这种方法是正确的，但我想我会在 Haskell 中进行练习。下面是我所拥有的。

```
import qualified Data.Set as Set

substr :: String -> Int -> Int -> String
substr s start end = take (end - start) . drop start $ s

substrs :: String -> Set.Set (Char, String)
substrs s = let len = length s
            in foldl (\acc x -> Set.insert (s !! x, ((substr s 0 x)++(substr s (succ x) len))) acc) Set.empty [0..len-1]

-- not sure about the type
permute [] = Set.empty
permute s = Set.map recurFunc (substrs s)
  where recurFunc (c, s) = Set.map (c:) (permute s)

main :: IO ()
main = print $ permute "foo!" 
```

当然，这不会编译，否则我不会问。我得到：

```
permute.hs:12:21:
Couldn't match expected type `String'
            with actual type `Set.Set [Char]'
Expected type: (Char, String) -> String
  Actual type: (Char, String) -> Set.Set [Char]
In the first argument of `Set.map', namely `recurFunc'
In the expression: Set.map recurFunc (substrs s) 
```

`Set.map`被声明为`(a -> b) -> Set a -> Set b`。据我所知，`recurFunc`接受一组`(Char, String)`对，并返回一组字符串。`substrs`返回一组`(Char, String)`对。那么这怎么不一致呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T02:57:43.823

只是一个简短的说明：`type String = [Char]`。

`Set.map`接受一个普通函数并将其映射到一个集合上。既然你有一个`Set (Char, String)`并且你想要一个`Set String`，这个函数应该有类型`(Char, String) -> String`。

但是，您`recurFunc`返回一个*集合*而不仅仅是一个字符串。也就是说，它有一个类型`(Char, String) -> Set String`。（我认为类型实际上更通用一点，但这并不重要。）所以当你将它映射到一个集合上时，你会得到一组集合：类似于`Set (Set String)`.

这就是您的错误以略微倾斜的方式所说的：它期望 a`Set String`但得到了`Set (Set String)`. 但是，由于错误是 about `recurFunc`，它只告诉您函数的问题：`Set String`应该只是`String`。

希望这可以为您提供足够的信息来修复您的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:15:07.420

`String`使用s 只是 s 列表的事实，`Char`您可以快速编写：

```
import Data.List

permute = Eq a => [a] -> [[a]]
permute = nub . permutations 
```

预定义`permutations`实际上可以完成您想要的所有工作，并且`nub`只需删除重复项。

请注意，这种方法不是很有效（*O(n^2)*），只能用于少量数据！

# c# - 使用 Visual Studio 2010 将 XML 批量加载到 SQL Server 2012

> ID：15915903
> 
> 赞同：1
> 
> 时间：2013-04-10T02:29:28.373
> 
> 标签：c#, .net, sql, bulk-load

我需要弄清楚如何使用 Visual Studio 2010 将 XML 批量加载到 Microsoft SQL Server 2012 中。我已按照[此处](http://msdn.microsoft.com/en-us/library/ms171878.aspx)的说明进行操作，但这给了我一长串错误（包括在下面）。

此外，我不完全确定我应该如何处理 #8 的说明：“将 Main() 方法替换为以下代码。更新 ConnectionString 属性以及模式和数据文件的文件路径。” 有人可以给我一个快速的纲要吗？

虽然我不确定它是否会有所帮助，但我还添加了 SQL DB 作为数据源。

错误一：

> 'SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class' 类型没有定义构造函数 C:\Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - Bulk Load\Aztech - Bulk Load\Program.cs 15 64 Aztech - Bulk Load

错误2：

> “SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class”不包含“ConnectionString”的定义，并且找不到接受“SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class”类型的第一个参数的扩展方法“ConnectionString”（您是否缺少 using 指令或程序集引用？） C： \Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - 批量加载\Aztech - 批量加载\Program.cs 16 23 Aztech - 批量加载

错误 3：

> 'SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class' 不包含'ErrorLogFile' 的定义，并且找不到接受'SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class' 类型的第一个参数的扩展方法'ErrorLogFile'（您是否缺少 using 指令或程序集引用？）C： \Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - 批量加载\Aztech - 批量加载\Program.cs 17 23 Aztech - 批量加载

错误 4：

> “SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class”不包含“KeepIdentity”的定义，并且找不到接受“SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class”类型的第一个参数的扩展方法“KeepIdentity”（您是否缺少 using 指令或程序集引用？）C： \Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - 批量加载\Aztech - 批量加载\Program.cs 18 23 Aztech - 批量加载

错误 5：

> 'SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class' 不包含'Execute' 的定义，并且找不到接受'SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class' 类型的第一个参数的扩展方法'Execute'（您是否缺少 using 指令或程序集引用？） C： \Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - 批量加载\Aztech - 批量加载\Program.cs 19 23 Aztech - 批量加载

错误6：

> 无法嵌入互操作类型“SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class”。请改用适用的接口。C:\Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - 批量加载\Aztech - 批量加载\Program.cs 15 35 Aztech - 批量加载

错误 7：

> 无法嵌入互操作类型“SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class”。请改用适用的接口。C:\Users\coopere.COOPERE-PC\documents\visual studio 2010\Projects\Aztech - 批量加载\Aztech - 批量加载\Program.cs 15 86 Aztech - 批量加载

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:23:47.100

除了我使用 Visual Studio 2012 之外，我正在做同样的事情。使用 SQLXMLBULKLOADLib.SQLXMLBulkLoad4 而不是 SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class 它对我有用。示例中的其他所有内容都应该可以正常工作。一旦您构建了您的应用程序，如果您的 xsd 或 xml 文件中存在问题，您将收到运行时 COM 错误。

main 方法中的代码执行批量加载。您的第一个错误是因为 SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class 没有构造函数（例如，新建 SQLXMLBULKLOADLib.SQLXMLBulkLoad4Class 时调用的方法）。类对象的实例化应该类似于：

SQLXMLBULKLOADLib.SQLXMLBulkLoad4 objBL = new SQLXMLBULKLOADLib.SQLXMLBulkLoad4();

就 data.xml 和 schema.xml 文件而言，它们要么需要与可执行文件位于同一文件夹中，要么您需要放置完整路径。希望这有助于让我知道您是否需要进一步澄清。

给您的问题....您是否能够找到示例引用的映射模式 xsd 文件。这不是什么大不了的事，但我收到了很多信息消息，因为该文件未包含在 Visual Studio xsd 文件中。我到处搜索，但只能找到文件内容的一些旧帖子，而当前批量加载文档中没有所有内容。

# html - 将带有svg的html转换为pdf

> ID：15915906
> 
> 赞同：2
> 
> 时间：2013-04-10T02:29:32.813
> 
> 标签：html, ruby-on-rails, view, svg, gem

我有一个视图，其中包含一些 html 以及对返回 svg 代码的方法的调用。现在，问题是我想让用户能够将视图的 svg 部分保存为 pdf，而我似乎没有找到合适的 gem 来执行此操作。还有一种方法可以将整个视图（html + svg）转换为 pdf 吗？

# javascript - wowslider 的 Slider 中的图像映射

> ID：15915910
> 
> 赞同：1
> 
> 时间：2013-04-10T02:30:12.197
> 
> 标签：javascript, jquery, html

我想在由 WowSlider.PFB 代码生成的 Slider 中的每张幻灯片上添加图像映射

```
function ws_blur(p,n,c){var h=jQuery;var b=!p.noCanvas&&!window.opera&&!!document.createElement("canvas").getContext;if(b){try{document.createElement("canvas").getContext("2d").getImageData(0,0,1,1)}catch(m){b=0}}var d;function k(q,e,r){q.css({opacity:0,visibility:"visible"});q.animate({opacity:1},e,"linear",r)}function i(q,e,r){q.animate({opacity:0},e,"linear",r)}var l;this.go=function(e,q){if(l){return -1}l=1;var u=h(n.get(q)),s=h(n.get(e));var t;if(b){if(!d){d='<canvas width="'+c.width()+'" height="'+c.height()+'"/>';d=h(d+d).css({"z-index":8,position:"absolute",width:"100%",height:"100%",left:0,top:0,visibility:"hidden"}).appendTo(c)}t=g(u,30,d.get(0))}if(b&&t){var r=g(s,30,d.get(1));k(t,p.duration/3,function(){c.find("ul").css({visibility:"hidden"});i(t,p.duration/6);k(r,p.duration/6,function(){t.css({visibility:"hidden"});c.find("ul").css({left:-e+"00%"}).css({visibility:"visible"});i(r,p.duration/2,function(){l=0})})})}else{b=0;t=g(u,8);t.fadeIn(p.duration/3,"linear",function(){c.find("ul").css({left:-e+"00%"});t.fadeOut(p.duration/3,"linear",function(){t.remove();l=0})})}return e};function g(v,u,q){var A=(parseInt(v.parent().css("z-index"))||0)+1;if(b){var D=q.getContext("2d");D.drawImage(v.get(0),0,0);if(!j(D,0,0,q.width,q.height,u)){return 0}return h(q)}var E=h("<div></div>").css({position:"absolute","z-index":A,left:0,top:0,width:"100%",height:"100%",display:"none"}).appendTo(c);var C=(Math.sqrt(5)+1)/2;var s=1-C/2;for(var t=0;s*t<u;t++){var w=Math.PI*C*t;var e=(s*t+1);var B=e*Math.cos(w);var z=e*Math.sin(w);h(document.createElement("img")).attr("src",v.attr("src")).css({opacity:1/(t/1.8+1),position:"absolute","z-index":A,left:Math.round(B)+"px",top:Math.round(z)+"px",width:"100%",height:"100%"}).appendTo(E)}return E}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function j(ah,P,N,q,r,Y){if(isNaN(Y)||Y<1){return}Y|=0;var ac;try{ac=ah.getImageData(P,N,q,r)}catch(ag){console.log("error:unable to access image data: "+ag);return false}var v=ac.data;var W,V,ae,ab,E,H,B,t,u,M,C,O,K,S,X,F,A,G,I,R;var af=Y+Y+1;var T=q<<2;var D=q-1;var aa=r-1;var z=Y+1;var Z=z*(z+1)/2;var Q=new f();var L=Q;for(ae=1;ae<af;ae++){L=L.next=new f();if(ae==z){var w=L}}L.next=Q;var ad=null;var U=null;B=H=0;var J=o[Y];var s=a[Y];for(V=0;V<r;V++){S=X=F=t=u=M=0;C=z*(A=v[H]);O=z*(G=v[H+1]);K=z*(I=v[H+2]);t+=Z*A;u+=Z*G;M+=Z*I;L=Q;for(ae=0;ae<z;ae++){L.r=A;L.g=G;L.b=I;L=L.next}for(ae=1;ae<z;ae++){ab=H+((D<ae?D:ae)<<2);t+=(L.r=(A=v[ab]))*(R=z-ae);u+=(L.g=(G=v[ab+1]))*R;M+=(L.b=(I=v[ab+2]))*R;S+=A;X+=G;F+=I;L=L.next}ad=Q;U=w;for(W=0;W<q;W++){v[H]=(t*J)>>s;v[H+1]=(u*J)>>s;v[H+2]=(M*J)>>s;t-=C;u-=O;M-=K;C-=ad.r;O-=ad.g;K-=ad.b;ab=(B+((ab=W+Y+1)<D?ab:D))<<2;S+=(ad.r=v[ab]);X+=(ad.g=v[ab+1]);F+=(ad.b=v[ab+2]);t+=S;u+=X;M+=F;ad=ad.next;C+=(A=U.r);O+=(G=U.g);K+=(I=U.b);S-=A;X-=G;F-=I;U=U.next;H+=4}B+=q}for(W=0;W<q;W++){X=F=S=u=M=t=0;H=W<<2;C=z*(A=v[H]);O=z*(G=v[H+1]);K=z*(I=v[H+2]);t+=Z*A;u+=Z*G;M+=Z*I;L=Q;for(ae=0;ae<z;ae++){L.r=A;L.g=G;L.b=I;L=L.next}E=q;for(ae=1;ae<=Y;ae++){H=(E+W)<<2;t+=(L.r=(A=v[H]))*(R=z-ae);u+=(L.g=(G=v[H+1]))*R;M+=(L.b=(I=v[H+2]))*R;S+=A;X+=G;F+=I;L=L.next;if(ae<aa){E+=q}}H=W;ad=Q;U=w;for(V=0;V<r;V++){ab=H<<2;v[ab]=(t*J)>>s;v[ab+1]=(u*J)>>s;v[ab+2]=(M*J)>>s;t-=C;u-=O;M-=K;C-=ad.r;O-=ad.g;K-=ad.b;ab=(W+(((ab=V+z)<aa?ab:aa)*q))<<2;t+=(S+=(ad.r=v[ab]));u+=(X+=(ad.g=v[ab+1]));M+=(F+=(ad.b=v[ab+2]));ad=ad.next;C+=(A=U.r);O+=(G=U.g);K+=(I=U.b);S-=A;X-=G;F-=I;U=U.next;H+=q}}ah.putImageData(ac,P,N);return true}function f(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}};// -----------------------------------------------------------------------------------

    jQuery("#wowslider-container1").wowSlider({effect:"blur",prev:"",next:"",duration:60*100,delay:60*100,width:960,height:360,autoPlay:true,stopOnHover:true,loop:false,bullets:0,caption:true,captionEffect:"slide",controls:true,onBeforeStep:0,images:[{src:"./collage.png",title:"IaaS",usemap:"#1"},{src:"./collage_DBaas.png",title:"DBaaS"},{src:"./collage_Paas.png",title:"PaaS"},{src:"./collage_Saas.png",title:"SaaS"}]});

html code

       <div class="ws_images"><ul>
        <li><img src="data1/images/collage.png" alt="IaaS" title="IaaS" id="wows1_0"       usemap="#1"/>
</li>
</ul>
<map name="1" id="1">

<area shape="rect" coords="12,5,384,135" href="http://aws.amazon.com" />
<area shape="rect" coords="27,140,128,191" href="http://lunacloud.com" />
<area shape="rect" coords="187,147,339,199" href="http://hpcloud.com" />
<area shape="rect" coords="7,202,355,294" href="http://rackspace.com" />
<area shape="rect" coords="388,3,733,100" href="http://linode.com" />
<area shape="rect" coords="399,112,681,194" href="http://joyent.com" />
<area shape="rect" coords="419,222,670,290" href="http://reliacloud.com" />
<area shape="rect" coords="740,42,947,240" href="http://appengine.google.com" />
<area shape="rect" coords="702,245,932,287" href="http://opsource.com" />
<area shape="rect" coords="685,181,738,236" href="http://appengine.google.com" />
</map>
</div> 
```

任何帮助表示赞赏

# android - 在 ActionBarSherlock 库中的数组适配器上使用 setOnClickListner

> ID：15915915
> 
> 赞同：0
> 
> 时间：2013-04-10T02:31:30.293
> 
> 标签：android, android-fragments, actionbarsherlock, android-arrayadapter

我想在 ActionBarSherlock 的 ArrayAdapter 上添加 setOnClickListner ，这样当我单击该项目时，它会更改片段，但顶部的操作栏保持显示相同的栏（就像除了操作栏之外的完整布局发生更改）

如何在此代码中添加 setOnClickListner。这是片段之一的代码：

```
 public class DetailsFragment extends SherlockListFragment{

        /** An array of items to display in ArrayList */
        String details_data[] = new String[]{
            "Personal Info",
            "Emergency Contacts",
            "Application Codes",
        };

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
            /** Creating array adapter to set data in listview */
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_multiple_choice, details_data);

            /** Setting the array adapter to the listview */
            setListAdapter(adapter);

            return super.onCreateView(inflater, container, savedInstanceState);
        }

        @Override
        public void onStart() {
            super.onStart();

            /** Setting the multiselect choice mode for the listview */
            getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:33:05.273

片段可以向操作栏提供项目，但操作栏与活动相关联，而不是片段。如果您删除并添加另一个片段，操作栏将保持不变。

# java - Handling exceptions in the catch block?

> ID：15915917
> 
> 赞同：0
> 
> 时间：2013-04-10T02:31:45.983
> 
> 标签：java, exception

This may be a dumb question, but I haven't been able to find the answer anywhere else. I have a class that will read and write to a file for saves. Now, I'm trying to handle some possible errors that could come my way. What I want to know is if this is legal or common practice in Java:

```
try {
    in = new ObjectInputStream(new FileInputStream(fileName));
    score = (Score)in.readObject();
} catch() {
    ...
} 
```

The problem I'm having is if the file is empty, it cannot read the file. The program will crash, so I want to know is common or regular practice to create some data in the file from the catch statement, then try/catch it again. Then at the second catch I can crash the program.

The reason I have for wanting to do it this way is in the case that the user erases the data in the file.

If it's legal, would this be the syntax?

```
try {
    // try something here
} catch(//Exception here) {
    // Create a new file and try again.
    try {
        // try again
    } catch() {
        // Crash the program
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:35:36.937

Why don't you just check if the file doesn't exist or is empty before you try and use it?

```
try {
    File file = new File( fileName);
    if( !file.exists() || file.length() == 0) { 
        // Create the file, initialize it with some default value
    }
    in = new ObjectInputStream(new FileInputStream( file));
    score = (Score)in.readObject();
} catch() {
    ...
} 
```

Note that there is a small race condition, where it is possible for the user to delete the file between when you check for the file's existence, and actually using it within the `FileInputStream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:38:44.107

It's generally bad form to do work like this in a catch block. If you want to do a retry on failure, use a loop like

```
int retryCount = 0;
boolean success = false;
while(!success && retryCount < 2) {
    retryCount++;
    try {
        ...
        success = true;
    } catch (Exception ex) {
        // log exception
    }
} 
```

# c++ - 来自 gethostbyname 的 malloc_consolidate 的段错误

> ID：15915920
> 
> 赞同：2
> 
> 时间：2013-04-10T02:31:58.717
> 
> 标签：c++, c, segmentation-fault, gethostbyname

## 一些背景资料：

我正在为我的网络课程做一个小组项目。我们将实施一个由 3 个部分组成的密钥分发中心；KDC 本身，发起者 (A) 和响应者 (B) 在大学拥有的 RedHat 6 服务器上使用 c++ 和 g++。

我们一直在使用这个[Practical Sockets](http://cs.ecs.baylor.edu/%7Edonahoo/practical/CSockets/practical/)库，事情进展得相对顺利。

## 问题：

我和我的伙伴在专门在[fillAddr() 函数](http://cs.ecs.baylor.edu/%7Edonahoo/practical/CSockets/practical/PracticalSocket.cpp)中调用 Unix 的 gethostbyname() 函数时开始出现段错误。

```
// Function to fill in address structure given an address and port
static void fillAddr(const string &address, unsigned short port, 
                     sockaddr_in &addr) {
  memset(&addr, 0, sizeof(addr));  // Zero out address structure
  addr.sin_family = AF_INET;       // Internet address

  hostent *host;  // Resolve name
  if ((host = gethostbyname(address.c_str())) == NULL) { /* offending line */
    // strerror() will not work for gethostbyname() and hstrerror() 
    // is supposedly obsolete
    throw SocketException("Failed to resolve name (gethostbyname())");
  }
  addr.sin_addr.s_addr = *((unsigned long *) host->h_addr_list[0]);

  addr.sin_port = htons(port);     // Assign port in network byte order
} 
```

我们已经使用 valgrind、GDB、“cout s”等进行调试，但一直在取得*负面进展*。以下是 GDB 回溯告诉我们的内容（服务器名称被审查，使用的典型“server.college.edu”地址）：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000039b1a7621b in malloc_consolidate () from /lib64/libc.so.6
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.107.el6.x86_64 libgcc-4.4.7-3.el6.x86_64 libstdc++-4.4.7-3.el6.x86_64
(gdb) backtrace
#0  0x00000039b1a7621b in malloc_consolidate () from /lib64/libc.so.6
#1  0x00000039b1a79385 in _int_malloc () from /lib64/libc.so.6
#2  0x00000039b1a7a911 in malloc () from /lib64/libc.so.6
#3  0x00000039b1b03265 in gethostbyname () from /lib64/libc.so.6
#4  0x00000000004033f7 in fillAddr (address="KDC", port=9284, addr=...)
    at PracticalSocket.cpp:72
#5  0x0000000000404484 in UDPSocket::sendTo (this=0x7fffffffe410, buffer=0x6102a0, bufferLen=40, foreignAddress=
    "KDC", foreignPort=9284) at PracticalSocket.cpp:299
#6  0x00000000004085e2 in sendRecv (sock=..., message="2007|137.28.8.164|SERVER_B|1234", addr=
    "KDC", port=9284) at initiator.cpp:144
#7  0x0000000000407a3f in getSessionKey (sock=..., kdc_addr=0x40aa84 "KDC",
    resp_addr=0x40aa98 "RESPONDER", nonce="1234") at initiator.cpp:88
#8  0x0000000000407546 in main (argc=1, argv=0x7fffffffe548) at initiator.cpp:49 
```

## 让我解释一下*负面进展*：

似乎我们编译、测试、调试等的次数越多，只需要额外的 std::cout 之类的小改动，我们的代码执行的就越少。这个 fillAddr() 函数至少被成功地使用了几次。现在将可靠地由 malloc_consolidate() 引起段错误。

以下是目前的情况：

```
*** glibc detected *** ./kdc: malloc(): memory corruption: 0x000000000132b7d0 ***

*** glibc detected *** ./kdc: malloc(): memory corruption: 0x000000000132b7d0 ***

...

*** glibc detected *** ./kdc: malloc(): memory corruption: 0x000000000132b7d0 *** 
```

这填满了我们的 KDC 控制台窗口。

任何帮助将不胜感激。如果您想了解更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:39:22.193

如果你在 -type 函数的内部崩溃了`malloc`，你几乎肯定已经破坏了内存领域。

在某些时候，您（例如）分配了 30 个字节，然后尝试用 60 个字节的数据填充它。

您需要找出这个问题的根本原因，不幸的是，它*不在*您显示的代码中。它更有可能在您自己的代码中，在您调用`gethostbyname()`. 寻找分配堆内存的任何地方，然后写入它。

你的“消极”进步也很好地表明了这种问题，因为一个废弃的竞技场会导致无数问题。

# android - 线程以未捕获的异常退出 - 但应用程序仍按设计运行

> ID：15915923
> 
> 赞同：0
> 
> 时间：2013-04-10T02:32:17.393
> 
> 标签：android, multithreading

从 Eclipse 将我的应用程序安装到模拟器时，*有时*会在日志“线程退出但未捕获的异常”中出现错误。其他 SO 帖子都提到了这一点，但“原因”通常是开发人员构建的活动。我的原因似乎是一些 Android 类。我已经尝试过 Project>Clean，但这并没有改变任何东西。此外，即使出现此错误，该应用程序也可以正常运行。它的出现似乎没有任何押韵或理由。想法？

在此处登录：

```
04-09 21:22:49.487: W/dalvikvm(1462): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
04-09 21:22:49.497: E/AndroidRuntime(1462): FATAL EXCEPTION: main
04-09 21:22:49.497: E/AndroidRuntime(1462): java.lang.RuntimeException: Unable to instantiate application com.example.blobtag2.GlobalAppContext: java.lang.NullPointerException
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.LoadedApk.makeApplication(LoadedApk.java:501)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4124)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.ActivityThread.access$1300(ActivityThread.java:130)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.os.Looper.loop(Looper.java:137)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at dalvik.system.NativeStart.main(Native Method)
04-09 21:22:49.497: E/AndroidRuntime(1462): Caused by: java.lang.NullPointerException
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:377)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:320)
04-09 21:22:49.497: E/AndroidRuntime(1462):     at android.app.LoadedApk.makeApplication(LoadedApk.java:493)
04-09 21:22:49.497: E/AndroidRuntime(1462):     ... 11 more 
```

编辑 - 清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.blobtag2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:name=".GlobalAppContext"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <service android:name=".service.RESTService" />

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ResultsActivity"
        android:label="@string/title_activity_results_activity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.blobtag2.MainActivity" />
    </activity>
    <activity
        android:name=".PlaceActivity"
        android:label="@string/title_activity_place_activity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.blobtag2.ResultsActivity" />
    </activity>
</application>

</manifest> 
```

全局应用上下文代码：

```
public class GlobalAppContext extends Application {
private static VenueList venueList;

@Override
public void onCreate() {
    venueList = new VenueList();
}

public static VenueList getVenueList() {
    return venueList;
}

/*do I still need this, since I have it in the venueList class?
public static void setPlaceName(String s) {
    venueList = s;
}
**/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:29:19.277

将 GlobalAppContext.java 更改为：

```
public class GlobalAppContext {

    private static VenueList mVenueList = null;

    //----------------------------
    // Uses the Singleton method of Bill Pugh.
    // https://en.wikipedia.org/wiki/Singleton_pattern
    //----------------------------

    // --- Singleton code
    private GlobalAppContext() { }

    private static class GlobalAppContextHolder {
        public static final GlobalAppContext INSTANCE = new GlobalAppContext();
    }

    public static GlobalAppContext getInstance() {
        if (mVenueList == null) {
            mVenueList = new VenueList();
        }
        return GlobalAppContext.INSTANCE;
    }
    // --- End Singleton code

    public static VenueList getVenueList() {
        return mVenueList;
    }
} 
```

并使用以下内容调用这个全局类：

```
... snip ....
private static GlobalAppContext mGlobal = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (mGlobal == null) {
        mGlobal = GlobalAppContext.getInstance();
    }

    setContentView(R.layout.your_layout);
} 
```

现在您可以像这样访问“VenueList”：

```
VenueList venueList = mGlobal.getVenueList(); 
```

# asp.net - 如何更改每个页眉？

> ID：15915924
> 
> 赞同：1
> 
> 时间：2013-04-10T02:32:24.813
> 
> 标签：asp.net, visual-studio-2010, master-pages

这似乎是一个愚蠢的问题，但我使用的是 VS 2010，并且在 Site.Master 页面中，有一个标签`<h1>` 允许用户输入标题标题。

例如![在此处输入图像描述](https://i.stack.imgur.com/qxtNs.png)

在这种情况下，标题是“ASP.NET 应用程序”

我想在我的应用程序的每一页都有不同的标题。

如何更新每个 .aspx 页面中的标题？在页面的 HeaderContent 部分？

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:50:19.700

您想要做的与模板的意图不同。该模板的构造使内容`<h1>`成为您的站点徽标或站点名称。这就是为什么他们将其硬编码为`Site.Master`as：

```
<div class="title">
    <h1>
        My ASP.NET Application
    </h1>
</div> 
```

它并不是要每页更改。

如果您想每页更改它，那么您有几个选择。这是*一个*。

由于您引用了站点管理员的标题部分：假设您希望将标题文本设置为实际页面标题。你可以这样做：

```
<div class="title">
    <h1>
        <asp:Label ID="_pageTitle" runat="server"></asp:Label>
    </h1>
</div> 
```

所以你`My ASP.NET Application`用一个标签替换，这样你就可以在后面的代码中轻松地更改它。

然后，在你后面的代码中，你有类似的东西：

```
protected void Page_Load(object sender, EventArgs e)
{
    _pageTitle.Text = Page.Title;
    //rest of your  code
} 
```

这会将标签的文本设置为页面的页面标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T03:56:49.880

在 Site.Master 页面中，更改以下块

```
<h1>
     My ASP.NET Application
 </h1> 
```

至

```
<h1><%= Page.Title%></h1> 
```

然后，在每个内容页面中，在 page 指令中设置页面标题：

```
<%@ Page Title="Home Page" Language="vb" MasterPageFile="~/Site.Master" AutoEventWireup="false"
CodeBehind="Default.aspx.vb" Inherits="WebApplicationTest._Default" %> 
```

*   注意**Title="Home Page"**属性。

或从代码隐藏：

```
Page.Title = "Home Page" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T02:37:13.923

您需要做的就是更新母版页中的标题，然后使用该母版页的每个网页都会自动更新标题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-06T20:09:49.787

如果希望将一些文本从每个 .aspx 页面传递到母版页，请尝试以下操作。我有类似的情况，我将其解决为：

在母版页上放置一个`label`控件。`ID="lblOnMasterPage"`

```
<asp:Label ID="lblOnMasterPage" runat="server"></asp:Label> 
```

在母版页的代码隐藏文件上创建一个公共属性

```
 public string LabelValue
        {
            get { return this.lblOnMasterPage.Text; }
            set { this.lblOnMasterPage.Text = value; }
        } 
```

并使用以下代码为应用程序的每个页面传递您想要的标题/文本..

```
((yourMasterPage)this.Master).LabelValue = "text you want to pass from each page"; 
```

# select - 改进 ProLog 中的 select/3

> ID：15915925
> 
> 赞同：2
> 
> 时间：2013-04-10T02:32:31.723
> 
> 标签：select, prolog

我想通过在给定列表中选择多个元素（而不是一个）来改进序言中的*select/3*。例如，如果我在此列表中选择*X = 1*和*Y = 2* *[1,2,3]*，那么结果将是*[3]*。

这是我到目前为止所拥有的：

```
select_pair(X,Y,[X|Xs],Xs) :- member(Y,Xs).
select_pair(X,Y,[H|T1],[H|T2]) :- select_pair(X,Y,T1,T2). 
```

结果是：

```
?- select_pair(X,Y,[1,2,3],Zs).
X = 1,
Y = 2,
Zs = [2, 3] ;
X = 1,
Y = 3,
Zs = [2, 3] ;
X = 2,
Y = 3,
Zs = [1, 3] ; 
```

但是，正确的结果应该是 Zs = [3]、[2]、[1]。我知道我必须以某种方式将这两个值相交；因此，这里是 intersect 方法：

```
intersect([],M,[]).
intersect([X|L],M,[X|I]) :- member(X,M), intersect(L,M,I).
intersect([X|L],M,I) :- \+ member(X,M), intersect(L,M,I). 
```

我想我必须以某种方式使用 intersect 方法而不是*成员*方法。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:41:53.790

你这么近！使用`select/3`代替`member/2`：

```
select_pair(X, Y, [X|Xs], Result) :- select(Y, Xs, Result).
select_pair(X, Y, [H|T1], [H|T2]) :- select_pair(X,Y,T1,T2). % unmodified

?- select_pair(X, Y, [1,2,3], Z).
X = 1,
Y = 2,
Z = [3] ;
X = 1,
Y = 3,
Z = [2] ;
X = 2,
Y = 3,
Z = [1] ;
false. 
```

为了比较，我很想像这样编写代码：

```
select_pair(X, Y, In, Out) :- 
  select(X, In, Mid), select(Y, Mid, Out). 
```

不过，这实际上会产生排列而不是组合，我推断这不是您想要的。

我不认为你将能够相交来解决这个问题。直观地说，你想做的是这样的：

```
select_pair(X, Y, In, Out) :- intersection([X,Y], Out, In). 
```

问题是`intersect/3`上面或内置的 SWI`intersection/3`都不会生成那样的。他们为什么不这样做是有道理的：没有办法根据它们的交集知道两组的内容，因为这些数据根本无法生存。

# python - 解析隐含与显式时间运算符

> ID：15915928
> 
> 赞同：1
> 
> 时间：2013-04-10T02:32:42.423
> 
> 标签：python, parsing, ply, lalr

我一直在使用 ply 编写一个 LALR 解析器，并且在尝试解析乘法时遇到了不一致。

由于完整的解析器[链接](https://github.com/sn6uv/Mathics/blob/PLYParser/mathics/core/parser.py)长达数千行，我不会在此处包含它，但我创建了一个简单的演示：

```
import ply.lex as lex
import ply.yacc as yacc

tokens = (
    'int',
    'times',
    'plus',
)

precedence = (
    ('left', 'plus'),
    ('left', 'times'),
)

t_ignore = ' \t\n '
t_int = r' \d+ '
t_plus = r' \+ '
t_times = ' \* '

def p_int(args):
    'expr : int'
    args[0] = int(args[1])

def p_times(args):
    '''expr : expr times expr
            | expr expr %prec times'''
    if len(args) == 3:
        args[0] = args[1] * args[2]
    elif len(args) == 4:
        args[0] = args[1] * args[3]

def p_plus(args):
    'expr : expr plus expr'
    args[0] = args[1] + args[3]

lex.lex()
parser = yacc.yacc()

while True:
    s = raw_input('>> ')
    print " = ", parser.parse(s) 
```

PLY 没有报告移位/减少冲突或减少/减少冲突，但我得到以下不一致：

```
 >>  1 + 2 3
     =  9
    >>  1 + 2 * 3
     =  7 
```

这对我来说似乎很奇怪，因为显式和隐式时间规则具有相同的优先级。但我认为这可能是因为 PLY 为“times”令牌分配了优先级，因此将其转移到堆栈上，以支持使用 p_plus 规则减少表达式。我怎样才能解决这个问题？

编辑：更简单的演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:51:50.900

快速破解：将`int`令牌添加到优先级规范（具有时间优先级）。然后`int`令牌将被适当地转移到符号堆栈上。那是（根据原始问题），

```
precedence = (
    ('left', 'plus'),
    ('left', 'times', 'int'),
) 
```

这可行，但在处理可能大量的标记（左括号、符号、浮点数等）时会很混乱。

```
>>  1 + 2 3
 =  7 
```

我仍然想知道是否有更优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-13T07:54:43.813

有一个更合适的解决方案：放弃运算符优先级并以通常的方式定义非终结符号`expr`, `term`, 和`factor`。原因？隐含乘法没有作为优先级决策基础的特征标记，并且您不想手动恢复非终结符的第一组。此外，随着你语法的增长，第一组也会随之增长。

在 BNF 中，考虑类似于：

```
expr -> term | expr + term | expr - term
term -> factor | term * factor | term factor | term / factor
factor -> number | variable | ( expr ) 
```

顺便说一句，您可能想要创建一个额外的非终结层来表示这样一个事实，即隐式邻接乘法通常被认为具有比除法更高的优先级，而显式乘法通常被解释为具有相同的优先级.

这并不特定于任何特定的解析器生成器框架。

# ios - 我的标签栏控制器在推送后消失

> ID：15915930
> 
> 赞同：1
> 
> 时间：2013-04-10T02:32:55.567
> 
> 标签：ios, uitabbarcontroller, push, uitabbar, segue

这是我的应用程序的设置：

导航-

-loginVC -如果登录有效，则将 segue 推送到-

```
 tab bar controller with 3 tabs:
      -in the first tab, is a profile display which modal pushes to a profile editor(not
       issue here)
      -second tab is a searchVC that pushes to a tableVC that shows results. This is  
       where the tab bar disappears
      -The third view is just a VC for updating the database this is linked to. 
```

从字面上看，这就是它在情节提要上的工作方式，并且我确保从 searchVC 到 tableVC 的转场是推送转场。

如何防止标签栏控制器在第二个视图中消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:14:55.490

结构应该是

```
loginViewController -->modal segue--> tabBarController
                                        |
                                        |
                                        |-->NavController->Item1ViewController
                                        |
                                        |-->NavController->Item2ViewController
                                        |
                                        |-->NavController->Item3ViewController 
```

目前，当您从项目 2 的第一个 viewController 推进时，第二个选项卡项目上的“推送”会将整个选项卡栏控制器推开。

如果你想在你的 loginViewController 上有一个导航栏（为了保持一致性），将它嵌入它自己的 navigationController 但确保你不要从那里继续：`modal`segue 或 present with`[self presentViewController:tabBarViewController animated:yes completion:nil]`

每个标签栏项目的导航控制器都是可选的（取决于您所追求的导航，显然您确实需要一个用于项目 2） - 但您可能希望每个项目都有一个以保持一致性。

*更新*
@rdelmar 建议这种使用登录屏幕作为根视图控制器的方法——在该控制器之上应用程序的其余部分是“模态”呈现的——是对模态序列的滥用，并建议在而是第一个选项卡项。我理解这一点并将给它更多的思考，但同样我发现替代方案有点不舒服......选项卡项目应该在 tabVC 中共享相同的权重 - 所以让第一个项目呈现一个模式登录控制器，整个应用程序都依赖于它感觉不是很好的程序流程。如果一个应用程序需要用户登录，我看不出登录有什么问题以某种方式支撑它。

我在这里的答案中有一个更完整的描述版本：（[如何处理 UINavigationControllers 和 UITabBarControllers iOS 6.1](https://stackoverflow.com/questions/15400827/how-to-handle-uinavigationcontrollers-and-uitabbarcontrollers-ios-6-1/15454094#15454094)）。这还有一个好处，如果您在应用程序的任何位置提供一个注销按钮，则返回到第一个登录屏幕的展开切换 - 有效地*取消*显示整个登录的应用程序堆栈 - 将很好地工作。

一个不同的解决方案 - 与@rdelmar's 一致 -*如果第一个 viewController 不在选项卡栏控制器中，*则以模态方式显示登录屏幕。这可能在我前面提到的答案中起作用，因为登录后的第一个屏幕是一个嵌入导航控制器的视图控制器。但是，从展开到注销不会那么干净。

最后，我怀疑这可能只是一种风格，只要流逻辑保持健壮，我们就不应过于纠结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:14:14.523

除非您有另一个未提及的导航控制器，否则您的推送来自作为初始控制器的导航控制器。因此，从中推，将 tableVC 放在导航控制器的视图控制器中的选项卡栏控制器的顶部。

我建议您将标签栏控制器设置为窗口的根视图控制器。让 loginVC 从控制器的第一个选项卡（从其 viewDidAppear 方法）以模态方式呈现，以便在应用程序启动时首先出现。第二个选项卡应该有一个导航控制器作为它的根控制器，searchVC 作为导航控制器的根视图控制器。

# javascript - 使用for循环从多维数组中删除元素时遇到问题（javascript）

> ID：15915937
> 
> 赞同：2
> 
> 时间：2013-04-10T02:33:47.287
> 
> 标签：javascript, multidimensional-array, splice

我正在用我的菜鸟头撞墙...

我有以下代码：

```
var guns2 = 
[
["Model 17", "Glock"],
["Model 19", "Glock"],
["PPQ", "Walther"],
["P2000", "HK"],
["Model 92", "Beretta"],
["Model 34", "Glock"]
]

var gunsMake = function () {
    for (i=0; i<guns2.length; i++){
        var make = guns2[i][1];
            if (make ==="Glock"){
                }
            else {
                guns2.splice(i,1);
                }
        };
    };
gunsMake();
console.log(guns2); 
```

我在控制台中得到的结果如下：

```
[["Model 17", "Glock"], ["Model 19", "Glock"], ["P2000", "HK"], ["Model 34", "Glock"]] 
```

我想看到的是：

```
[["Model 17", "Glock"], ["Model 19", "Glock"], ["Model 34", "Glock"]] 
```

"["P2000", "HK"]"*不应该*在那里......我感觉它与 for 循环中的 "guns2.length" 参数有关......它似乎正在跳过后续数组每次它拼接时，但我无法完全解决问题。

请有人引导我正确:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T02:39:57.503

在迭代数组时修改数组通常不是一个好主意，因为很难跟踪索引和退出条件。要么将所需结果插入单独的数组，要么使用本机`filter`方法返回过滤后的数组。

```
var gunsMake = function (guns, desiredMake) {
    return guns.filter(function(v,i,a){
        return v[1] == desiredMake;
    });
};
guns2 = gunsMake(guns2, "Glock");
console.log(guns2); 
```

更多关于`filter`MDN 上的 Array 方法：[Array filter method](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:42:43.793

就地修改数组并不总是很糟糕。如果您决定这样做，`i`请在删除元素时递减。

[http://jsfiddle.net/kVzLn/](http://jsfiddle.net/kVzLn/)

```
var guns2 = 
[
["Model 17", "Glock"],
["Model 19", "Glock"],
["PPQ", "Walther"],
["P2000", "HK"],
["Model 92", "Beretta"],
["Model 34", "Glock"]
]

var gunsMake = function () {
    for (i=0; i<guns2.length; i++){
        var make = guns2[i][1];
            if (make ==="Glock"){
                }
            else {
                guns2.splice(i--,1); // Decrement i here
                }
        };
    };
gunsMake();
console.log(guns2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T02:40:36.243

当您使用固定索引循环遍历数组时，您正在从数组中删除（拼接）节点。因此，您没有检查所有元素。

如果您检查元素#1 并决定删除它，那么当您检查#2 时，您实际上是在检查#3。

# android - 无法将 int 与 SQLite put 方法一起使用，编译器错误，Android

> ID：15915938
> 
> 赞同：1
> 
> 时间：2013-04-10T02:33:50.280
> 
> 标签：android, sqlite

我在 Eclipse 中遇到 SQLite 类的 put 方法的编译器错误，“put”带有下划线，我收到消息“将“KEY_CHECKBOX_STATUS”的类型更改为 String”

```
 contentValues.put(KEY_CHECKBOX_STATUS, checkBoxStatus); 
```

我怎样才能解决这个问题，所以我可以使用整数？还是不能将 int 用于 put 方法？我是否必须对所有内容都使用字符串并在需要时将其从字符串转换回整数？

数据库变量：

```
 public static final String MYDATABASE_NAME = "my_database";
    public static final String MYDATABASE_TABLE = "my_table";
    public static final int MYDATABASE_VERSION = 1;
    public static final int KEY_CHECKBOX_STATUS = 0;
    public static final String KEY_CHECKBOX_LABEL = "Example Label";

  //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
     "CREATE_TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
     + KEY_CHECKBOX_STATUS + " BIT, " + KEY_CHECKBOX_LABEL + " TEXT NOT NULL);"; 
```

插入方法：

```
 public void insert(Integer checkBoxStatus){

          ContentValues contentValues = new ContentValues();
          contentValues.put(KEY_CHECKBOX_STATUS, checkBoxStatus); // <-- compiler error
          sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:38:14.513

方法中的第一个参数`put`必须是字符串，`checkBoxStatus`可以是整数。只是改变

```
public static final int KEY_CHECKBOX_STATUS = 0; 
```

至

```
public static final String KEY_CHECKBOX_STATUS = "check_box_status; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:40:53.073

Key 需要一个 String 对象。int 是原始类型，所以它不会有 toString() 等方法。使用 Integer 代替 int，并调用 toString 方法。

# php - 在 symfony 项目中通用扩展学说表

> ID：15915942
> 
> 赞同：2
> 
> 时间：2013-04-10T02:34:28.790
> 
> 标签：php, symfony1, doctrine, doctrine-1.2, symfony-1.2

我有一个 symfony 项目（1.2）。我想要做的是确保当 symfony 构建发生时，而不是创建扩展学说表的表，而是扩展 custom_table 。

这样，我可以使我使用的所有表都具有附加功能，而无需修改教义表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:48:41.120

是的，您可以，如下所示（至少在 Symfony 1.4 中，我假设 1.2 也是如此）：

```
// config/ProjectConfiguration.class.php

class ProjectConfiguration extends sfProjectConfiguration
{
  public function configureDoctrine(Doctrine_Manager $manager)
  {
    $manager->setAttribute(Doctrine_Core::ATTR_TABLE_CLASS, 'yourDoctrineTable');
  }
} 
```

然后定义`class yourDoctrineTable`扩展`Doctrine_Table`。

所有新生成的 *Table 类现在都将扩展`yourDoctrineTable`而不是`Doctrine_Table`.

请参阅： [http ://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/configuration.html#configure-table-class](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/configuration.html#configure-table-class)

# javascript - 验证电子邮件表单在 IE 中不起作用

> ID：15915946
> 
> 赞同：0
> 
> 时间：2013-04-10T02:34:51.497
> 
> 标签：javascript, jquery, internet-explorer, validation, email

我正在尝试构建一个表单，该表单将在选中复选框时验证字段。它适用于除 IE 之外的所有浏览器。关于让它在 IE 中也能工作的任何建议？

```
<form id="serviceForm" action="MAILTO:myemail@me.com" onSubmit="required(this);" method="POST" enctype="text/plain">
        <label for="AgencyRequesting">*Agency Requesting Facility:</label>
        <br />
        <input id="AgencyRequesting" required="required" maxlength="50" name="Agency Requesting Facility" size="50" type="text" />
        <br />
        <br />
        <label for="AgencyContact">*Agency Contact:</label>
        <br />
        <input id="AgencyContact" required="required" maxlength="50" name="Agency Contact" size="50" type="text" />
        <br />
        <br />
        <label for="AgencyPhone">*Contact Phone Number:</label>
        <br />
        <input id="AgencyPhone" required="required" maxlength="14" name="Agency Phone Number" size="14" type="text" />
        <br />
        <br />
        <br />*Area of Facility Requesting: 
        <br /><p style="font-size:.8em;padding:0;">(If interested in reserving the range for your agency, please complete the form below and submit to us.  Once we  receive it, we will email you confirmation and availability.)<br />
            (** Submitting this form does NOT secure your reservation on our facility, it is merely a request.)</p>
        <br />

<!--Gymnasiun checkbox
    *********************************************************************************************************-->  
<input id="gym" name="Gymnasium" type="checkbox" value="Checked" />Gymnasium
    <br />
    <span id="togggym" style="display:none;">
            <span id="togg2" style="display:inline;">
                <lable for="gymStartDate">*Start Date:</lable>
                    <input id="gymStartDate" maxlength="10" name="Start Date" size="10" />
            </span>
            <span id="togg2" style="display:inline;">
                <lable for="gymEndDate">*End Date:</lable>
                    <input id="gymEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
            </span>
            <span id="togg2" style="display:inline;">
                <lable for="gymStartTime">*Start Time:</lable>
                    <input id="gymStartTime" maxlength="7" name="Start Time" size="7" />
            </span>
            <span id="togg2" style="display:inline;">
                <lable for="gymEndTime">*End Time:</lable>
                    <input id="gymEndTime" maxlength="7" name="End Time" size="7" /><br />
            </span>
    </span>
<!--Classroom checkbox
    *********************************************************************************************************-->
<input id="classroom" name="Classroom" type="checkbox" value="Checked" />Classroom
    <br /> 
    <span id="toggclass" style="display:none;">
            <span id="togg2" style="display:inline;">
                <lable for="classStartDate">*Start Date:</lable>
                    <input  id="classStartDate" maxlength="10" name="Start Date" size="10" />
            </span>
            <span id="togg2" style="display:inline;">
                <lable for="classEndDate">*End Date:</lable>
                    <input id="classEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
            </span>
            <span id="togg2" style="display:inline;">
                <lable for="classStartTime">*Start Time:</lable>
                    <input id="classStartTime" maxlength="7" name="Start Time" size="7" />
            </span>
            <span id="togg2" style="display:inline;">
                <lable for="classEndTime">*End Time:</lable>
                    <input id="classEndTime" maxlength="7" name="End Time" size="7" /><br />
            </span>
    </span>
<!--Upper checkbox
    *********************************************************************************************************-->
<input id="upper" name="Upper Track" type="checkbox" value="Checked" />Upper Track
<input id="lower" name="Lower Track" type="checkbox" value="Checked" />Lower Track
<input id="both" name="Both Upper and Lower Track" type="checkbox" value="Checked" />Both
    <br /> 
    <span id="toggupper" style="display:none;">
        <span id="togg2" style="display:inline;">
            <lable for="upperStartDate">*Start Date:</lable>
                <input  id="upperStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="upperEndDate">*End Date:</lable>
                <input id="upperEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="upperStartTime">*Start Time:</lable>
                <input id="upperStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="upperEndTime">*End Time:</lable>
                <input id="upperEndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--Lower Checkbox
    *********************************************************************************************************-->
    <span id="togglower" style="display:none;">
        <span id="togg2" style="display:inline;">
            <lable for="lowerStartDate">*Start Date:</lable>
                <input  id="lowerStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="lowerEndDate">*End Date:</lable>
                <input id="lowerEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="lowerStartTime">*Start Time:</lable>
                <input id="lowerStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="lowerEndTime">*End Time:</lable>
                <input id="lowerEndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--Both checkbox
    *********************************************************************************************************-->
    <span id="toggboth" style="display:none;">
        <span id="togg2" style="display:inline;">
            <lable for="bothStartDate">*Start Date:</lable>
                <input  id="bothStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="bothEndDate">*End Date:</lable>
                <input id="bothEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="bothStartTime">*Start Time:</lable>
                <input id="bothStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="bothEndTime">*End Time:</lable>
                <input id="bothEndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--East Pistol Checkbox
    *********************************************************************************************************-->
<input id="east" name="East Pistol" type="checkbox" value="Checked" />East Pistol
    <br />
    <span id="toggeast" style="display:none;">
        <span id="togg2" style="display:inline;">
            <lable for="eastStartDate">*Start Date:</lable>
                <input  id="eastStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="toggeast" style="display:inline;">
            <lable for="eastEndDate">*End Date:</lable>
                <input id="eastEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="toggeast" style="display:inline;">
            <lable for="eastStartTime">*Start Time:</lable>
                <input id="eastStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="toggeast" style="display:inline;"
            <lable for="eastEndTime">*End Time:</lable>
                <input id="eastEndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--West Pistol Checkbox
    *********************************************************************************************************-->
<input id="west" name="West Pistol" type="checkbox" value="Checked" />West Pistol
    <br /> 
    <span id="toggwest" style="display:none">
        <span id="togg2" style="display:inline;">
            <lable for="westStartDate">*Start Date:</lable>
                <input  id="westStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="westEndDate">*End Date:</lable>
                <input id="westEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="westStartTime">*Start Time:</lable>
                <input id="westStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="westEndTime">*End Time:</lable>
                <input id="westEndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--Rifle Checkbox
    *********************************************************************************************************-->
<input id="rifle" name="Rifle" type="checkbox" value="Checked" />Rifle
    <br /> 
    <span id="toggrifle" style="display:none">
        <span id="togg2" style="display:inline;">
            <lable for="rifleStartDate">*Start Date:</lable>
                <input  id="rifleStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="rifleEndDate">*End Date:</lable>
                <input id="rifleEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="rifleStartTime">*Start Time:</lable>
                <input id="rifleStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="rifleEndTime">*End Time:</lable>
                <input id="rifleEndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--360 Range Checkbox
    *********************************************************************************************************-->
<input id="360" name="360 Range" type="checkbox" value="Checked" />360&#176 Range
    <br /> 
    <span id="togg360" style="display:none">
        <span id="togg2" style="display:inline;">
            <lable for="360StartDate">*Start Date:</lable>
                <input  id="360StartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="360EndDate">*End Date:</lable>
                <input id="360EndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="360StartTime">*Start Time:</lable>
                <input id="360StartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="360EndTime">*End Time:</lable>
                <input id="360EndTime" maxlength="7" name="End Time" size="7" /><br />
        </span>
    </span>
<!--Sims Trailers Checkbox
    *********************************************************************************************************-->
<input id="sims" name="Sims Trailers" type="checkbox" value="Checked" />Sims Trailers
    <br /> 
    <span id="toggsims" style="display:none">
        <span id="togg2" style="display:inline;">
            <lable for="simsStartDate">*Start Date:</lable>
                <input  id="simsStartDate" maxlength="10" name="Start Date" size="10" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="simsEndDate">*End Date:</lable>
                <input id="simsEndDate" maxlength="10" name="End Date" size="10" /><br /><br />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="simsStartTime">*Start Time:</lable>
                <input id="simsStartTime" maxlength="7" name="Start Time" size="7" />
        </span>
        <span id="togg2" style="display:inline;">
            <lable for="simsEndTime">*End Time:</lable>
                <input id="simsEndTime" maxlength="7" mane="End Time" size="7" /><br />
        </span>
    </span>

    <br />
    <br />
    <label for="description">Comments:</label>
    <br />
    <textarea name="Comments" cols="40" rows="5"></textarea>
    <br />
    <br />* denotes required fields
    <br />
    <input type="submit" id="submit" value="SUBMIT" />
</form> 
```

这是JavaScript

```
/*Gym
    ********************************************************************************/
    $(document).ready(function(){
        $("#gym").change(function(){              
            $("#togggym").toggle(this.checked);
            $("#gymStartDate").toggleClass("required");
            $("#gymEndDate").toggleClass("required");
            $("#gymStartTime").toggleClass("required");
            $("#gymEndTime").toggleClass("required");

    if(this.checked){
           $("#gymStartDate").attr('required','required');
           $("#gymEndDate").attr('required','required');
           $("#gymStartTime").attr('required','required');
           $("#gymEndTime").attr('required','required');
      }
      else{
           $("#gymStartDate").removeAttr('required')
           $("#gymEndDate").removeAttr('required')
           $("#gymStartTime").removeAttr('required')
           $("#gymEndTime").removeAttr('required')
      }

        });
    });
/*Classroom
    *******************************************************************************/
    $(document).ready(function(){
        $("#classroom").change(function(){              
            $("#toggclass").toggle(this.checked);
            $("#classStartDate").toggleClass("required");
            $("#classEndDate").toggleClass("required");
            $("#classStartTime").toggleClass("required");
            $("#classEndTime").toggleClass("required");

    if(this.checked){
           $("#classStartDate").attr('required','required');
           $("#classEndDate").attr('required','required');
           $("#classStartTime").attr('required','required');
           $("#classEndTime").attr('required','required');
      }
      else{
           $("#classStartDate").removeAttr('required')
           $("#classEndDate").removeAttr('required')
           $("#classStartTime").removeAttr('required')
           $("#classEndTime").removeAttr('required')
      }

        });
    });
/*Upper
    *******************************************************************************/
        $(document).ready(function(){
        $("#upper").change(function(){              
            $("#toggupper").toggle(this.checked);
            $("#upperStartDate").toggleClass("required");
            $("#upperEndDate").toggleClass("required");
            $("#upperStartTime").toggleClass("required");
            $("#upperEndTime").toggleClass("required");

    if(this.checked){
           $("#upperStartDate").attr('required','required');
           $("#upperEndDate").attr('required','required');
           $("#upperStartTime").attr('required','required');
           $("#upperEndTime").attr('required','required');
      }
      else{
           $("#upperStartDate").removeAttr('required')
           $("#upperEndDate").removeAttr('required')
           $("#upperStartTime").removeAttr('required')
           $("#upperEndTime").removeAttr('required')
      }

        });
    });
/*lower
    *******************************************************************************/
        $(document).ready(function(){
        $("#lower").change(function(){              
            $("#togglower").toggle(this.checked);
            $("#lowerStartDate").toggleClass("required");
            $("#lowerEndDate").toggleClass("required");
            $("#lowerStartTime").toggleClass("required");
            $("#lowerEndTime").toggleClass("required");

    if(this.checked){
           $("#lowerStartDate").attr('required','required');
           $("#lowerEndDate").attr('required','required');
           $("#lowerStartTime").attr('required','required');
           $("#lowerEndTime").attr('required','required');
      }
      else{
           $("#lowerStartDate").removeAttr('required')
           $("#lowerEndDate").removeAttr('required')
           $("#lowerStartTime").removeAttr('required')
           $("#lowerEndTime").removeAttr('required')
      }

        });
    });
/*Both
    *******************************************************************************/
        $(document).ready(function(){
        $("#both").change(function(){              
            $("#toggboth").toggle(this.checked);
            $("#bothStartDate").toggleClass("required");
            $("#bothEndDate").toggleClass("required");
            $("#bothStartTime").toggleClass("required");
            $("#bothEndTime").toggleClass("required");

    if(this.checked){
           $("#bothStartDate").attr('required','required');
           $("#bothEndDate").attr('required','required');
           $("#bothStartTime").attr('required','required');
           $("#bothEndTime").attr('required','required');
      }
      else{
           $("#bothStartDate").removeAttr('required')
           $("#bothEndDate").removeAttr('required')
           $("#bothStartTime").removeAttr('required')
           $("#bothEndTime").removeAttr('required')
      }

        });
    });
/*East Pistol
    *******************************************************************************/
        $(document).ready(function(){
        $("#east").change(function(){              
            $("#toggeast").toggle(this.checked);
            $("#eastStartDate").toggleClass("required");
            $("#eastEndDate").toggleClass("required");
            $("#eastStartTime").toggleClass("required");
            $("#eastEndTime").toggleClass("required");

    if(this.checked){
           $("#eastStartDate").attr('required','required');
           $("#eastEndDate").attr('required','required');
           $("#eastStartTime").attr('required','required');
           $("#eastEndTime").attr('required','required');
      }
      else{
           $("#eastStartDate").removeAttr('required')
           $("#eastEndDate").removeAttr('required')
           $("#eastStartTime").removeAttr('required')
           $("#eastEndTime").removeAttr('required')
      }

        });
    });
/*West Pistol
    *******************************************************************************/
        $(document).ready(function(){
        $("#west").change(function(){              
            $("#toggwest").toggle(this.checked);
            $("#westStartDate").toggleClass("required");
            $("#westEndDate").toggleClass("required");
            $("#westStartTime").toggleClass("required");
            $("#westEndTime").toggleClass("required");

    if(this.checked){
           $("#westStartDate").attr('required','required');
           $("#westEndDate").attr('required','required');
           $("#westStartTime").attr('required','required');
           $("#westEndTime").attr('required','required');
      }
      else{
           $("#westStartDate").removeAttr('required')
           $("#westEndDate").removeAttr('required')
           $("#westStartTime").removeAttr('required')
           $("#westEndTime").removeAttr('required')
      }

        });
    });
/*Rifle
    *******************************************************************************/
        $(document).ready(function(){
        $("#rifle").change(function(){              
            $("#toggrifle").toggle(this.checked);
            $("#rifleStartDate").toggleClass("required");
            $("#rifleEndDate").toggleClass("required");
            $("#rifleStartTime").toggleClass("required");
            $("#rifleEndTime").toggleClass("required");

    if(this.checked){
           $("#rifleStartDate").attr('required','required');
           $("#rifleEndDate").attr('required','required');
           $("#rifleStartTime").attr('required','required');
           $("#rifleEndTime").attr('required','required');
      }
      else{
           $("#rifleStartDate").removeAttr('required')
           $("#rifleEndDate").removeAttr('required')
           $("#rifleStartTime").removeAttr('required')
           $("#rifleEndTime").removeAttr('required')
      }

        });
    });
/*360 Range
    *******************************************************************************/
        $(document).ready(function(){
        $("#360").change(function(){              
            $("#togg360").toggle(this.checked);
            $("#360StartDate").toggleClass("required");
            $("#360EndDate").toggleClass("required");
            $("#360StartTime").toggleClass("required");
            $("#360EndTime").toggleClass("required");

    if(this.checked){
           $("#360StartDate").attr('required','required');
           $("#360EndDate").attr('required','required');
           $("#360StartTime").attr('required','required');
           $("#360EndTime").attr('required','required');
      }
      else{
           $("#360StartDate").removeAttr('required')
           $("#360EndDate").removeAttr('required')
           $("#360StartTime").removeAttr('required')
           $("#360EndTime").removeAttr('required')
      }

        });
    });
/*Sims Trailers
    *******************************************************************************/
        $(document).ready(function(){
        $("#sims").change(function(){              
            $("#toggsims").toggle(this.checked);
            $("#simsStartDate").toggleClass("required");
            $("#simsEndDate").toggleClass("required");
            $("#simsStartTime").toggleClass("required");
            $("#simsEndTime").toggleClass("required");

    if(this.checked){
           $("#simsStartDate").attr('required','required');
           $("#simsEndDate").attr('required','required');
           $("#simsStartTime").attr('required','required');
           $("#simsEndTime").attr('required','required');
      }
      else{
           $("#simsStartDate").removeAttr('required')
           $("#simsEndDate").removeAttr('required')
           $("#simsStartTime").removeAttr('required')
           $("#simsEndTime").removeAttr('required')
      }

        });
    }); 
```

JavaScript 可能非常失控，但我对使用它进行编程非常陌生，还有很多东西要学。感谢您提供的所有帮助，如果有更好的方法来写这个，我愿意接受每一个建议。

**Update-Here 是对实际表单的一个[小技巧](http://jsfiddle.net/brandon7575/JcMZK/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:11:55.820

看来您是使用 Javascript/jQuery 验证表单的新手。

我建议使用 jQuery.validate 之类的 jQuery 插件来验证您的表单前端。该插件将确保验证工作跨浏览器，包括 Internet Explorer。

推荐文章：

1.  [基本的 JQUERY 表单验证示例（2 分钟）](http://www.jquery4u.com/forms/basic-jquery-form-validation-tutorial/)

另外，不要忘记前端验证只是成功的一半，您还需要验证后端！确保传递给表单数据处理脚本的数据的安全性和有效性。

# php - 接收“找不到文件”Zend PDF

> ID：15915947
> 
> 赞同：0
> 
> 时间：2013-04-10T02:34:58.087
> 
> 标签：php, zend-framework, pdf, zend-pdf

下面的代码是一个示例，它可以工作（从文件加载 pdf，绘制单个字符串，成功），但是如果我将 invoice.pdf（教程中的示例 pdf）更改为我的 pdf，buyersguide.pdf 我收到一个错误火狐，找不到文件。

```
 <?php
   header("Content-Type: application/x-pdf");
   //header("Content-Disposition: attachment; filename=invoice-". date("Y-m-d-H-i") . ".pdf");
   header("Cache-Control: no-cache, must-revalidate");

   require_once 'zendframework/library/Zend/Loader/Autoloader.php';
   //Zend_Loader::registerAutoload();   

   $loader = Zend_Loader_Autoloader::getInstance();

   // load the invoice

   $invoice = Zend_Pdf::load("invoice.pdf");
   $page = $invoice->pages[0];

   $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_TIMES_BOLD);

   $page->setFont($font, 12);

   // invoice information*/
   $page->drawText('success ', 420,642);

   // output the PDF
   echo $invoice->render();
?> 
```

文件名更改的代码：

```
 <?php
   header("Content-Type: application/x-pdf");
   //header("Content-Disposition: attachment; filename=invoice-". date("Y-m-d-H-i") . ".pdf");
   header("Cache-Control: no-cache, must-revalidate");

   require_once 'zendframework/library/Zend/Loader/Autoloader.php';
   //Zend_Loader::registerAutoload();   

   $loader = Zend_Loader_Autoloader::getInstance();

   // load the invoice

   $invoice = Zend_Pdf::load("buyersguide.pdf");
   $page = $invoice->pages[0];

   $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_TIMES_BOLD);

   $page->setFont($font, 12);

   // invoice information*/
   $page->drawText('success ', 420,642);

   // output the PDF
   echo $invoice->render();
?> 
```

买家指南 PDF 取自政府网站。PDF 在 adobe reader 中正常加载。买家指南 PDF： http: [//www.consumer.ftc.gov/articles/pdf-0083-buyers-guide.pdf](http://www.consumer.ftc.gov/articles/pdf-0083-buyers-guide.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:25:20.883

以下代码演示了 ZF1 (1.12.3) 的最新稳定版本将成功处理您遇到问题的文件：

```
<?php
set_include_path("PATH/TO/zf1/library" . PATH_SEPARATOR . get_include_path());
require_once 'Zend/Loader/Autoloader.php';
$loader = Zend_Loader_Autoloader::getInstance();

// Grab a copy of the file from the remote server
// This is just for demo purposes only
// Obviously you'd want to keep a copy of this file locally
$source = "http://www.consumer.ftc.gov/articles/pdf-0083-buyers-guide.pdf";
file_put_contents("template.pdf", file_get_contents($source));

// load the invoice
$invoice = Zend_Pdf::load("template.pdf");
$page = $invoice->pages[0];

$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_TIMES_BOLD);

$page->setFont($font, 12);

// invoice information*/
$page->drawText("success ", 320, 700);

// Save the file to disk
$filename = "invoice-" . date("Y-m-d-H-i") . ".pdf";
file_put_contents($filename, $invoice->render());

// output the PDF
header("Content-Type: application/pdf");
header("Content-Disposition: attachment; filename=\"$filename\"" );
header("Cache-Control: no-cache, must-revalidate");
header("Content-Length: " . filesize( $filename ));
readfile( $filename ); 
```

这段代码远未准备好生产，但它可以工作。如果它对您不起作用，那么您应该打印出每个函数调用的返回码，直到您确定哪一行失败。

# c# - 更快地更新 Web 表单中的数百万条记录

> ID：15915949
> 
> 赞同：0
> 
> 时间：2013-04-10T02:35:16.830
> 
> 标签：c#, performance, linq

因此，我需要使用`TextBox`. 我试图用 LINQ 做到这一点，但这需要很长时间......

**第一个问题**：最好的解决方案是什么？

我注意到，如果我在 SQL (MSSQL) 中运行更新，它只需要 20-30 秒，这是可以接受的时间。

**第二个问题**：我应该在 SQL 中创建程序并将它们导入我的项目并调用程序吗？这会给我更好的时间吗？基本上，使用导入的过程是否会缩短该查询在 SQL 中运行所需的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:39:37.367

如果通过普通查询运行它更快，请创建一个接受参数的存储过程：

```
using (SqlConnection con = new SqlConnection("connection string here")) {
    using (SqlCommand cmd = new SqlCommand("sp_Stored_Proc_Name_Here", con)) {
      cmd.CommandType = CommandType.StoredProcedure;

      cmd.Parameters.Add("@VariableNameHere", SqlDbType.VarChar).Value = textBoxNameHere.Text;

      con.Open();
      cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:40:17.817

存储过程应该是最好的解决方案。

但是，您可以使用 ADO.NET 调用这些存储过程，而无需将它们导入您的项目中。

存储过程是 SQL 注入安全的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T15:28:37.367

使用它在您的应用程序上获得高性能：

1) 创建一个在调用它时接受 TVP（表值参数）的存储过程。

*   这样，您只调用一次 proc 并一次刷新所有数据
*   您必须使用 ADO.Net 来调用它（LINQ 不支持 TVP）
*   以下是资源：
    *   *定义过程* [http://technet.microsoft.com/en-us/library/bb510489.aspx](http://technet.microsoft.com/en-us/library/bb510489.aspx)
    *   *从 C# 调用* [http://msdn.microsoft.com/en-us/library/bb675163(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb675163%28v=vs.110%29.aspx)

2) 确保您的 TVP 使用与目标表的预期索引匹配的列数据类型中的表值数据类型（以便 SQL 可以有效地使用索引或任何所需的内容）。

3）在您的过程中使用正确的事务隔离级别。例如，“READ COMMITTED”，它给出了很好的响应。

4) 将“SET NOCOUNT ON”添加到您的存储过程中，因此每次执行 T-SQL 语句时，该过程都不会向 ADO.Net 发出信号。

5) 在您的 SqlConnection 对象上（在 C# 中），将 PacketSize 属性设置为介于 3000 和 8000 之间的某个值。使用这些值直到获得正确的响应时间。[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.packetsize.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.packetsize.aspx)

# cygwin - 在 Cygwin 中启用 Postgresql

> ID：15915952
> 
> 赞同：8
> 
> 时间：2013-04-10T02:35:50.413
> 
> 标签：cygwin

我安装`Cygwin`了 Perl 并`Postgresql`启用了软件包。

然后输入：

```
 /usr/bin/cygserver-config (This will install the service) 
```

然后输入：

```
net start cygserver(This starts the service) 
```

接下来我需要在 Cygwin 中启用 Postgresql，所以我尝试了下面提到的命令：

```
cygrunsrv -S cygserver

initdb -D /usr/share/postgresql/data

pg_ctl start -D /usr/share/postgresql/data -l /var/log/postgresql.log

createdb

psql 
```

我收到一个错误：

```
$ initdb -D /usr/share/postgresql/data
-bash: initdb: command not found

$ pg_ctl start -D /usr/share/postgresql/data -l /var/log/postgresql.log
-bash: pg_ctl: command not found 
```

有人可以告诉我如何正确处理它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T02:48:47.537

Postgresql`initdb`和`pg_ctl`可执行文件位于`/usr/sbin`.

我猜这`/usr/sbin`不在您的`PATH`设置中。添加它应该可以解决问题。

我使用了一个我一直在`$HOME/bin`调用的启动/停止脚本`pg`。这是[要点](https://gist.github.com/buruzaemon/5351379)。

# google-chrome - webRequest API 未捕获来自应用程序的所有页面请求

> ID：15915954
> 
> 赞同：3
> 
> 时间：2013-04-10T02:36:13.963
> 
> 标签：google-chrome, webrequest

我正在尝试`JSON`从 Web 应用程序下载数据。这`URL/API`是静态的，我可以用它来调用返回数据的网页。有一个会话变量参数需要添加到`URL/API`调用以连接到服务器并下载`JSON`启动应用程序时创建的数据，但如果应用程序没有被积极使用则超时。我当前的过程是打开开发人员工具，启动 Web 应用程序，当发出特定`JSON`请求时，我复制参数值，然后将其添加到模拟页面请求并下载`JSON`数据的脚本中。

我试图避免手动复制和粘贴此会话变量参数。我希望能够自动捕获 Web 请求，解析出我需要的值，在我的机器上设置一个 cookie，然后通过 php 脚本获取 cookie，以`JSON`使用有效的会话值启动数据下载。

*`chrome.webRequest.onResponseStarted`*我已经研究过使用以下代码在 chrome 中创建扩展：

```
chrome.webRequest.onCompleted.addListener(function(details) { 
   console.log(details); 
   chrome.cookies.set(
     { url: "http://localhost/MySite/", name: "MyCookie", value: "Tested" }
   );
}, {urls:["<all_urls>"]} ); 
```

此代码适用于主要 Web 请求，但它不会`JSON`获取应用程序发出的所有数据请求。该应用程序是 swf 格式，这很可能是问题所在，但我可以在开发人员工具的网络面板选项卡中看到请求，并且使用它们捕获`chrome://net-internals`它们，这让我相信我应该能够以某种方式捕获它们。

我已经调查过了*`chrome.devtools.network`*，但我似乎无法弄清楚它应该如何工作。任何建议或方向将不胜感激。

# ios - 在重新加载之前删除表行

> ID：15915955
> 
> 赞同：1
> 
> 时间：2013-04-10T02:36:15.600
> 
> 标签：ios, uitableview

我想在重新加载数据之前删除表视图中的所有行，但似乎无法让它工作。

在我的视图控制器中，我从这个 AFNetworking 请求中获取了我的数组。

```
- (void)viewDidLoad
    [[LocationApiClient sharedInstance] getPath:@"locations.json" 
                                     parameters:nil 
                                        success:
                ^(AFHTTPRequestOperation *operation, id response) {
                    NSLog(@"Response: %@", response);
                    NSMutableArray *location_results = [NSMutableArray array];
                    for (id locationDictionary in response) {
                       Location *location = [[Location alloc] initWithDictionary:locationDictionary];
                       [location_results addObject:location];  
                    }
                    self.location_results = location_results;
                    [self.tableView reloadData];
                    }
                                    failure:
                ^(AFHTTPRequestOperation *operation, NSError *error) {
                    NSLog(@"Error fetching locations!");
                    NSLog(@"%@", error);
                }];  
} 
```

我想删除数据然后用这个按钮重新加载它

```
- (IBAction)locationPressed:(id)sender {

    [[Location sharedSingleton].locationManager startUpdatingLocation];
    [self viewDidLoad];
    NSMutableArray *location_results = [NSMutableArray array];
    [location_results removeAllObjects];
    [self.tableView reloadData];

} 
```

但它不会删除行。我看到重新加载发生在已经存在的行的顶部。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:14:39.543

请**不要**`viewDidLoad`手动拨打电话。

创建一个类似的方法

```
- (void)reloadDataWithCompletion:(void(^)(NSArray *locations))completion
                         failure:(void(^)(NSError *error))failure {
    [[LocationApiClient sharedInstance] getPath:@"locations.json" 
                                     parameters:nil 
                                        success:
            ^(AFHTTPRequestOperation *operation, id response) {
                NSLog(@"Response: %@", response);
                NSMutableArray *location_results = [NSMutableArray array];
                for (id locationDictionary in response) {
                   Location *location = [[Location alloc] initWithDictionary:locationDictionary];
                   [location_results addObject:location];  
                }
                    if(completion)
                        completion(location_results);
                }
                                failure:
            ^(AFHTTPRequestOperation *operation, NSError *error) {
                if(failure)
                    failure(error);
            }];  
} 
```

并在需要重新加载数据时调用它

```
- (void)viewDidLoad {
    [super viewDidLoad]; // Don't forget the call to super!

    [self reloadDataWithCompletion:^(NSArray *locations) {
        self.location_results = locations;
        [self.tableView reloadData];
    } failure:^(NSError *error) {
        NSLog(@"Error fetching locations!");
        NSLog(@"%@", error);
    }];
}

- (IBAction)locationPressed:(id)sender {
    [[Location sharedSingleton].locationManager startUpdatingLocation];
    [self reloadDataWithCompletion:^(NSArray *locations) {
        self.location_results = locations;
        [self.tableView reloadData];
    } failure:^(NSError *error) {
        NSLog(@"Error fetching locations!");
        NSLog(@"%@", error);
    }];
} 
```

为了实现重新加载表格的图形效果，您可以做（假设您只有一个部分），替换

```
[self.tableView reloadData]; 
```

和

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade]; 
```

# ios - 如何启用在 UITextView 中移动光标

> ID：15915956
> 
> 赞同：0
> 
> 时间：2013-04-10T02:36:43.910
> 
> 标签：ios, uitextview

我务实地创建 UItextView，当我在 UITextView 中点击移动光标时，它不起作用。但它使用IB工作。我应该为 UItextView 或 UIView 设置一些属性吗？

```
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0,320, 460)];

textView.userInteractionEnabled = YES;
textView.editable = YES;
textView.multipleTouchEnabled =YES;

[self.view addSubview:textView];
textView.delegate = self; 
```

我发现默认的长按不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T15:31:08.767

我在自定义单元格内为手势识别器添加子视图时遇到问题。当我阻止它或移至后台时，它已经开始工作：

```
contentView.insertSubview(view, atIndex: 0) 
```

其中 view 是带有手势识别器的视图。

# android - 从实时视频流中获取帧

> ID：15915967
> 
> 赞同：0
> 
> 时间：2013-04-10T02:37:31.340
> 
> 标签：android, ffmpeg, h.264, 3gp

我正在使用 MediaRecorder 类将实时视频从我的 Android 手机上的相机流式传输到我的计算机。

```
recorder.setCamera(mCamera);
recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);          
recorder.setOutputFile(uav_UDP_Client.pfd.getFileDescriptor());                     
recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264); 
```

这是基本的想法。所以我想实时显示这个流。我的计划是使用 FFMpeg 将最新帧转换为 .bmp 并在每次有新帧时在我的 C# 程序上显示 .bmp。

问题是在我停止录制之前没有标题。所以除非有标题，否则我不能使用 FFMpeg。我看过 spydroid 并使用 RTP，但出于各种原因我不想使用这种方法。

关于如何轻松做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:29:38.410

您可以考虑流式传输 a`MPEG2 TS`并在屏幕上播放它，或者您也可以流式传输`H.264`数据`RTP`并使用客户端对其进行解码和显示。

在 Android 中，有一个示例可执行文件执行流的`RTP`打包`H.264`并通过网络流式传输。您可以`MyTransmitter`从此[文件](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/rtsp/MyTransmitter.h)中找到有关 的更多详细信息，这可以作为您解决方案的一个很好的参考。

**附加信息** 在 Android 4.2.0 以后的版本中，有一个类似的功能由称为`Miracast`或`Wi-Fi Display`由`Wi-Fi`论坛标准化的框架支持，这是一个稍微复杂的用例。

# mongodb - 从 MongoDB 中的数组中选择不同的值

> ID：15915968
> 
> 赞同：10
> 
> 时间：2013-04-10T02:37:35.403
> 
> 标签：mongodb, aggregation-framework

我有一个集合名称 Alpha_Num，它具有以下结构。我试图找出哪个字母数字对将出现最大次数？

如果我们只使用下面的数据，对 abcd-123 出现两次，所以对 efgh-10001，但第二个对我来说不是一个有效的案例，因为它出现在同一个文档中。

```
{
    "_id" : 12345,
    "Alphabet" : "abcd",
        "Numerals" : [
            "123",
            "456",
            "2345"
        ]
}
{
    "_id" : 123456,
    "Alphabet" : "efgh",
    "Numerals" : [
            "10001",
            "10001",
            "1002"
        ]
}

{
    "_id" : 123456567,
    "Alphabet" : "abcd",
        "Numerals" : [
            "123"
        ]
} 
```

我尝试使用聚合框架工作，如下所示

```
db.Alpha_Num.aggregate([
                     {"$unwind":"$Numerals"},
                     {"$group":
                              {"_id":{"Alpha":"$Alphabet","Num":"$Numerals"},
                               "count":{$sum:1}}
                     },
                     {"$sort":{"count":-1}}
                     ]) 
```

此查询中的问题是它两次给出对 efgh-10001。问题：如何在上述条件下从数组“数字”中选择不同的值？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-22T03:55:28.540

问题解决了。

```
db.Alpha_Num.aggregate([{
     "$unwind": "$Numerals"
}, {
     "$group": {
             _id: {
                     "_id": "$_id",
                     "Alpha": "$Alphabet"
             },
             Num: {
                     $addToSet: "$Numerals"
             }
     }
}, {
     "$unwind": "$Num"
}, {
     "$group": {
             _id: {
                     "Alplha": "$_id.Alpha",
                     "Num": "$Num"
             },
             count: {
                     "$sum": 1
             }
     }
}]) 
```

使用 $addToSet 进行分组并再次展开就可以了。从 10gen 在线课程之一中得到了答案。

# json - 如何从 JAXB 注释类生成 JSON 模式？

> ID：15915971
> 
> 赞同：3
> 
> 时间：2013-04-10T02:38:01.943
> 
> 标签：json, jaxb, jackson, jsonschema

我有一个实体类，看起来像这样。

```
@XmlRootElement
public class ImageSuffix {

    @XmlAttribute
    private boolean canRead;

    @XmlAttribute
    private boolean canWrite;

    @XmlValue;
    private String value;
} 
```

我正在使用以下依赖项来生成 JSON。

```
<dependency>
  <groupId>com.fasterxml.jackson.jaxrs</groupId>
  <artifactId>jackson-jaxrs-json-provider</artifactId>
  <version>2.1.4</version>
</dependency> 
```

当我尝试使用以下代码时，（参考[Generating JSON Schemas with Jackson](http://wiki.fasterxml.com/JacksonJsonSchemaGeneration)）

```
@Path("/imageSuffix.jsd")
public class ImageSuffixJsdResource {

    @GET
    @Produces({MediaType.APPLICATION_JSON})
    public String read() throws JsonMappingException {

        final ObjectMapper objectMapper = new ObjectMapper();

        final JsonSchema jsonSchema =
            objectMapper.generateJsonSchema(ImageSuffix.class);

        final String jsonSchemaString = jsonSchema.toString();

        return jsonSchemaString;
    }
} 
```

服务器抱怨以下错误消息

```
java.lang.IllegalArgumentException: Class com.googlecode.jinahya.test.ImageSuffix would not be serialized as a JSON object and therefore has no schema
        at org.codehaus.jackson.map.ser.StdSerializerProvider.generateJsonSchema(StdSerializerProvider.java:299)
        at org.codehaus.jackson.map.ObjectMapper.generateJsonSchema(ObjectMapper.java:2527)
        at org.codehaus.jackson.map.ObjectMapper.generateJsonSchema(ObjectMapper.java:2513) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T21:33:54.187

您是否尝试过将 ObjectMapper 配置为包含 jaxb 内省器？我们使用 spring mvc3 来实现 REST 服务，并使用相同的模型对象序列化成 xml/json。

```
AnnotationIntrospector introspector = 
    new Pair(new JaxbAnnotationIntrospector(), new JacksonAnnotationIntrospector());
objectMapper.setAnnotationIntrospector(introspector);
objectMapper.generateJsonSchema(ImageSuffix.class); 
```

**编辑**：这是我从杰克逊那里得到的输出：

```
{
  "type" : "object",
  "properties" : {
    "canRead" : {
      "type" : "boolean",
      "required" : true
    },
    "canWrite" : {
      "type" : "boolean",
      "required" : true
    },
    "value" : {
      "type" : "string"
    }
  }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T15:20:14.670

提供的答案有点老了，现在有些东西已经被弃用了。`Jackson`因此，请使用最新和带`JAXB/Moxy`注释的类尝试以下代码：

方法一

```
class JsonSchemaGenerator{

  public static void main(String[] args) throws JsonProcessingException {
    ObjectMapper objectMapper = new ObjectMapper();
    TypeFactory typeFactory = TypeFactory.defaultInstance();
    AnnotationIntrospector introspector = new JaxbAnnotationIntrospector(typeFactory);
    objectMapper.getDeserializationConfig().with(introspector);
    objectMapper.getSerializationConfig().with(introspector);

    //To force mapper to include JAXB annotated properties in Json schema
    objectMapper.registerModule(new JaxbAnnotationModule());
    SchemaFactoryWrapper visitor = new SchemaFactoryWrapper();
    objectMapper.acceptJsonFormatVisitor(objectMapper.constructType(Customer.class), visitor);

    JsonSchema inputSchema = visitor.finalSchema();
    String schemaString = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(inputSchema);

    System.out.println(schemaString);
  }

} 
```

方法-2：

```
class JsonSchemaGenerator{
  public static void main(String[] args) throws JsonProcessingException, ClassNotFoundException {
    final ObjectMapper mapper = new ObjectMapper();
    final TypeFactory typeFactory = TypeFactory.defaultInstance();
    final AnnotationIntrospector introspector = new JaxbAnnotationIntrospector(typeFactory);
    mapper.getDeserializationConfig().with(introspector);
    mapper.getSerializationConfig().with(introspector);
    final JsonSchema jsonSchema = mapper.generateJsonSchema(Class.forName("com.jaxb.Customer"));
    System.out.println(jsonSchema);
  }
} 
```

# html - WCAG 2.0 AA 验证背景图片错误

> ID：15915975
> 
> 赞同：0
> 
> 时间：2013-04-10T02:38:09.390
> 
> 标签：html, css

当背景图像被禁用时，我们的页面无法通过 wcag 2.0 AA 验证。（由于背景颜色）

我们希望保持目前的深色背景，但如果禁用图像，则将背景设为白色。以下是解决问题的聪明方法吗？

bg_top 是主要的背景图像。bg_secNavigation 是作为渐变的深色背景。

```
background-image: url(../images/bg_top.jpg), url(../images/bg_secNavigation.jpg);
background-repeat: no-repeat, repeat-x;
background-color: #fff;
background-position: center top, left top; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:05:48.987

如何禁用背景图像？

为什么你没有一个带有简单深色背景的 div，然后在同一个 div 中你有你的背景图像......

# c++ - SQLite 停止在 252 个条目

> ID：15915979
> 
> 赞同：2
> 
> 时间：2013-04-10T02:38:18.737
> 
> 标签：c++, sqlite

因此，我编写了一些 C++ 代码来从一个数据库中选择数据并将`INSERT`其放入另一个数据库中。源数据库中有超过 50,000 个条目。目标数据库的表定义如下：

```
CREATE TABLE evidence_master
( id INTEGER NOT NULL,
    person_id TEXT NOT NULL,
    message TEXT,
    eid INTEGER NOT NULL,
    frequency INTEGER,
    string TEXT,
    CONSTRAINT id_pk PRIMARY KEY (id),
    CONSTRAINT eid_fk FOREIGN KEY (eid) REFERENCES evidences(eid)
);

CREATE TABLE evidences
(
    eid INTEGER NOT NULL,
    evidence_name TEXT,
    CONSTRAINT eid_pk PRIMARY KEY (eid)
); 
```

源数据库是在这里找到的：[http ://wing.comp.nus.edu.sg/SMSCorpus/](http://wing.comp.nus.edu.sg/SMSCorpus/)

我的问题是，当它到达第 252 个条目时，它声称它无法打开数据库（编辑：目标数据库）。尽管成功完成了 251 个条目的工作。

为什么会发生这种情况？

编辑：这是从源代码中选择的代码：

```
dbOpenFail=sqlite3_open("../../../db/smscorpus.db", &dbCorpus);
if(dbOpenFail)
{
    cerr << "Can't open sms corpus: " << sqlite3_errmsg(dbCorpus);
}

if(sqlite3_prepare(dbCorpus, 
    queryCorpus.data(), 
    queryCorpus.length() + 1, 
    &preparedCorpusQuery, NULL) != SQLITE_OK)
{
    cerr << "Failed to prepare corpus query: " << queryCorpus << zErrMsg << endl;
    sqlite3_free(zErrMsg);
}
rowSelectCorpus=sqlite3_step(preparedCorpusQuery);
while(rowSelectCorpus != SQLITE_DONE)  //need to go through 51652 messages from corpus
{
    if(rowSelectCorpus == SQLITE_ROW)
    {
        personID = sqlite3_column_text(preparedCorpusQuery, 0); //get sender ID
        messageContent = sqlite3_column_text(preparedCorpusQuery, 1); //get message itself
        db_entry d1(string(reinterpret_cast<const char *>(personID)), 
            string(reinterpret_cast<const char *>(messageContent)));
        insertResult = d1.insertIntoDatabase();
        if(insertResult == -1)
        {
            return 0; //exit
        }

    }
    rowSelectCorpus=sqlite3_step(preparedCorpusQuery);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:17:25.773

一些 C 运行时库的默认限制是每个进程 256 个打开文件句柄。

显然，您的程序正在为每个`INSERT`操作打开数据库，而忘记关闭它。

您应该只打开每个数据库一次。

# php - match all images starting with pics.domain.com

> ID：15915980
> 
> 赞同：2
> 
> 时间：2013-04-10T02:38:27.157
> 
> 标签：php, regex

How can i match all images starting with `pics.domain.com`?

what i've tried

```
preg_match_all('/<img .*src=(pics.domain.com*)["|\']([^"|\']+)/i', $row['story'], $matches); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:48:23.220

Use [`DOMDocument`](http://php.net/domdocument) and simply iterate over each `<img>` tag; then use `parse_url()` to find the host of each image path:

```
$doc = new DOMDocument;
libxml_use_internal_errors(true);
$doc->loadHTML($row['story']);
libxml_clear_errors();

foreach ($doc->getElementsByTagName('img') as $img) {
    if (parse_url($img->getAttribute('src'), PHP_URL_HOST) === 'pics.domain.com') {
        echo "Yay, image found\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T02:41:59.697

I've used the regex in the past, it works outside of `<img>` tags as well.

```
'@[\'"](https?://)?([^\.][^\'"]*?)(/)?([^\'"/]*?)\.(jpg|jpeg|png|gif|bmp)[\'"]@' 
```

A more specific version:

```
'@[\'"](https?://)?pics\.domain\.com[^\'"]*?\.(jpg|jpeg|png|gif|bmp)[\'"]@' 
```

In English:

[start quote](http or https or neither)pics.domain.com(anything that isn't a quote)(some image extension)[end quote]

# jquery - 这个 Jquery 插件是否总是返回一个数组？

> ID：15915987
> 
> 赞同：0
> 
> 时间：2013-04-10T02:39:10.870
> 
> 标签：jquery, arrays, object

我正在使用[这个插件](https://github.com/jaysalvat/jquery.facedetection)进行照片人脸检测。它可以工作，但是当图片中没有可检测到的人脸时，不会调用错误函数。而是调用“完整”函数。

我想当它无法检测到人脸时，它不返回数组，或者返回未定义的对象，或者 null，或者其他东西，所以我试过了：

```
//also tried null this way
if(typeof coords[i].confidence === 'undefined') {
alert("you have little aptitude for programming."); 
}

if(coords instanceof Array) {

        alert("good job!!");
} else {
alert("not even close!!");
}

if(!(coords.length)) {
alert("you have a distorted perception of your own abilities.");
}

if (positionX > coords.length) {

alert(coords[i].confidence);
} 
```

当检测到人脸时，它会显示适当的警报，但当没有检测到人脸时，不会显示警报。它只是调用“完整”函数。

这是脚本。让我知道是否应该提供更多代码。

```
<script>
    $(function() {
        $('#try').click(function() {
            var $this = $(this);

            var coords = $('img').faceDetection({

                complete:function(img, coords) {
                    $this.text('Done!');

                },
                error:function(img, code, message) {
                    $this.text('error!');
                    alert('Error: '+message);
                }

            });

            for (var i = 0; i < coords.length; i++) {

//Here is where I have been putting those conditional statements.  

//This part, which appends a bordered div (#face) to the div containing the face pic, works fine.

                $('<div>', {
                    'class':'face',
                    'id':'face',
                    'css': {
                        'position': 'absolute',
                        'left':     coords[i].positionX +'px',
                        'top':      coords[i].positionY +'px',
                        'width':    coords[i].width +'px',
                        'height':   coords[i].height    +'px'
                    }

                })
                .appendTo('#content');                               

            } 
        });

        return false;
    });
    </script>

<a href="#" id="try">TRY IT NOW!</a>               

<div id="content">
 <img src="pic.jpg" id="myPicture"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:37:21.187

`complete`无论成功与否，都确实被调用。如果无法检测到任何面孔插件会返回空数组，这就是您看不到任何警报的原因。您的`for`循环未执行。

# multithreading - 线程可以改变它的所属进程吗？

> ID：15915989
> 
> 赞同：1
> 
> 时间：2013-04-10T02:39:33.957
> 
> 标签：multithreading, process, semantics

其实是一道微软面试题，

```
About the Thread and Process in Windows, which description(s) is(are) correct:(3 Points)
   A. One application in OS must have one Process, but not a necessary to have one Thread
   B. The Process could have its own Stack but the thread only could share the Stack of its parent Process
   C. Thread must belongs to a Process
   D. Thread could change its belonging Process 
```

我已经搜索过，但仍然无法得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:58:05.863

线程是否可以更改其所属进程 - 不。

# ios - 如何使用 Flurry 记录 iOS App 中的每次点击

> ID：15915994
> 
> 赞同：-1
> 
> 时间：2013-04-10T02:39:50.267
> 
> 标签：ios, flurry

如何使用 Flurry 记录 iOS 应用程序中的每个按钮点击？我想在我的应用程序中实现点击流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:47:29.730

在 AppDelegate 中

```
#import "Flurry.h"
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{     
     [Flurry startSession:@"sessionkey"];
     ...   
} 
```

和..

```
-(IBAction) Click_Search:(id)sender
{     
     [Flurry logEvent:@"Seach"]; // remain logEvent 
     ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:02:15.313

一种有效的方法是子类化`UIApplication`并覆盖该`-sendEvent:`方法，如下所示：

```
- (void)sendEvent:(UIEvent *)event {
    [super sendEvent:event];

    NSSet * allTouches = [event allTouches];
    if ([allTouches count] > 0) {
        UITouch *touch = [allTouches anyObject];
        if (touch.phase == UITouchPhaseBegan) {
             CGPoint touchLocation = [touch locationInView:touch.window];
             NSDictionary *params = @{
                 @"touch" : @{
                     @"x" : @(touchLocation.x),
                     @"y" : @(touchLocation.y)
                 }
             };
             [Flurry logEvent:@"Seach" withParameters:params];
        }
    }
} 
```

然后你只需要更改`UIApplication`要使用的类`main.m`。例如，如果您的`UIApplication`子类被调用`MyApplication`，您的 main 将变为

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([MyApplication class]));
    }
} 
```

**免责声明**
这可能会极大地影响您的应用程序的性能。明智地使用它。

# javascript - 使用 jquery 从页面中删除元素时出现奇怪的浏览器行为

> ID：15915995
> 
> 赞同：1
> 
> 时间：2013-04-10T02:39:52.973
> 
> 标签：javascript, jquery, html

我有一个允许用户评论文本文档（如谷歌文档）的应用程序。当我允许用户从页面中删除这些评论时，我遇到了一些奇怪的行为。根据删除请求，我运行了一些代码，从评论中提取原始内容，然后从页面中删除评论。

删除代码如下所示

```
html = html + $(this).html()
$(this).children().andSelf().unbind();
$(this).contents().unwrap()
$(this).remove() 
```

该代码是从一段较大的代码中提取的，但我不认为该代码的其余部分是隔离此问题所必需的。事实上，我什至不确定这段代码是否需要修复它。

无论如何，当用户删除评论（使用上面的代码）然后尝试在同一个地方留下另一个评论时，就会出现问题。无论他们试图对什么发表评论，如果它甚至包含旧评论中的部分内容，浏览器都会自动选择旧评论中的所有内容。

奇怪的是，我已经彻底扫描了 html，并且没有基于 html 的旧评论残余。浏览器中剩下的所有内容（当我检查元素时）都是断引号，其中注释用于开始和结束。

这是一个带有注释的摘录（它是带有 hl 类的跨度）

```
<span class="T1">Lorem ipsum hendrerit in 
    <span class="hl s_240" highlight_id="s_240">
        <span class="remove_highlight" style="display: none;">Remove</span>
        "vulputate"
    </span> velit esse
</span> 
```

这是删除注释后提取的代码

```
<span class="T1">Lorem ipsum "vulputate" velit esse </span> 
```

请注意先前突出显示的单词周围的引号，这是当我发表新评论时发生的情况，仅选择 veluptuate 中的 e 和以下单词中的 v

```
<span class="T1">"Lorem ipsum hendrerit in "
    <span class="hl new_hl s_421" highlight_id="s_421">
        <span class="remove_highlight">Remove</span>
        "vulputate v"
    </span>
    "elit esse"
</span> 
```

如您所见，浏览器会自动假设我想突出显示整个单词 vulputate，即使我只选择了其中的一部分。

如果有人能告诉我为什么会发生这种情况或如何解决它，我将不胜感激！