# StackOverflow 问答 15643000-15643999

# ios - 如何在 ios 模拟器上模拟碰撞手势？

> ID：15643000
> 
> 赞同：0
> 
> 时间：2013-03-26T16:57:40.907
> 
> 标签：ios, ios-simulator

有谁知道如何在 ios 模拟器上模拟碰撞手势？这甚至可能吗？我正在使用 xcode 4.6。

对此主题的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:31:41.907

我使用[iSimulate](http://www.vimov.com/isimulate/)在模拟器中使用加速度计。它由您链接的仅模拟器库和您在设备上运行的应用程序组成。当您在模拟器中启动应用程序时，您设备上的应用程序将在本地网络上连接到它，并将所有触摸和加速度计事件中继到模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:14:33.543

所以最终的答案是它根本不可能，因为 ios 模拟器没有加速度计。根据 Mike C，iSimulate 是该问题的替代方案。

# javascript - Rails 4 上的 TinyMCE，资产管道不适合我

> ID：15643002
> 
> 赞同：3
> 
> 时间：2013-03-26T16:57:50.340
> 
> 标签：javascript, ruby-on-rails, tinymce, asset-pipeline, ruby-on-rails-4

我在 vendor/assets/javascripts/ 中有 tiny_mce 文件夹。在我的 application.js 文件中，我有：

```
//= require tiny_mce/tiny_mce_src.js 
```

在开发中，Tiny mce 编辑器工作。在heroku上的生产中它没有。

```
TypeError: this.getDoc(...) is undefined
[Break On This Error]   

... get source for: http://www.example.com/assets/application-fcf26d0749f321ac7...

applic...2815.js (line 31035)

Failed to load: http://www.example.com/entries/1//themes/advanced/editor_template.js

applic...2815.js (line 27236)

Failed to load: http://www.example.com/entries/1//langs/en.js 
```

这是 tiny_mce 的具体代码：

```
tinyMCE.init({
  document_base_url : "http://www.example.com/",
  mode : "textareas"
}); 
```

我认为问题是由于这些双斜杠而出现的：

```
Failed to load: http://www.example.com/entries/1//themes/advanced/editor_template.js
Failed to load: http://www.example.com/entries/1//langs/en.js 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T17:15:15.273

经过进一步调试，我发现这是一个资产问题。我通过将其添加到 config/enviroments/production.rb 的文件中来解决了这个问题。

```
config.assets.digest = false

# Add to settle tinymce issue
config.assets.debug = true 
```

# c - 不明白这个 for 循环是如何工作的

> ID：15643005
> 
> 赞同：3
> 
> 时间：2013-03-26T16:57:57.607
> 
> 标签：c

有人可以解释这个循环是如何工作的吗？整个函数用于找出在哈希中放置某些字符串的位置，代码如下：

```
//determine string location in hash
int hash(char* str)
{
    int size = 100;
    int sum;

    for(; *str; str++)
        sum += *str;

    return sum % size;
} 
```

它似乎逐个字符地迭代字符串，直到它达到空值，但是为什么简单的 *str 可以作为条件工作？为什么 str++ 会移动到下一个字符，它不应该是这样的：*(str+i) 其中 i 随每个循环递增并根据 *str 地址移动内存中的“i”位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:00:46.973

在 C 中，字符和整数隐式转换为布尔值：0 - 假，非零 - 真；

所以`for(; *str; str++)`迭代直到`*str`为零。（或无）

`str`是一个指向字符数组的指针。`str++`递增此指针以指向数组中的下一个元素，因此指向字符串中的下一个字符。

所以不是按索引索引。您正在移动指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:00:45.527

循环中的条件`for`是一个测试零值的表达式。末尾的 NUL 字符`str`为零。

这个条件的更明确的形式当然是`*str != '\0'`，但这是等价的，因为当等于`!=`时产生零。`*str``'\0'`

至于为什么`str++`移动到下一个字符：这`++`就是在指针上定义的方式。当你增加 a`char*`时，你将它指向`char`内存中下一个大小的单元格。您的`*(str + i)`解决方案也可以，只是需要更多的输入（即使它可以缩写`str[i]`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T17:07:32.407

这个 for 循环利用了[指针算法](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)。有了它，您可以递增/递减指针或添加/减去偏移量以导航到数组中的某些条目，因为数组是连续的内存块，您可以这样做。

`str`指向一个字符串。字符串`C`总是以终止符结尾`\0`。

`*str` [取消引用](http://en.wikipedia.org/wiki/Dereference_operator)实际指针以获取 char 值。

for 循环的中断条件等价于：

```
*str != '\0' 
```

和

```
str++ 
```

将指针向前移动到下一个元素。

孔for循环相当于：

```
int len = strlen(str);
int i;
for(i = 0; i < len; i++)
    sum += str[i]; 
```

你也可以写成while循环：

```
while(*str)
    sum += *str++; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T17:01:32.687

它与 C 如何将值转换为“True”和“False”有关。在 C 中，0 是“假”，其他都是“真”

由于 null（字符）恰好也为零，因此它的计算结果为“False”。如果字符集的定义不同并且空字符的值为“11”，那么上述循环将不起作用！

至于问题的后半部分，指针指向内存中的“位置”。递增该指针使其指向内存中的下一个“位置”。指针的类型在这里也很重要，因为“下一个”位置取决于所指向的东西有多大

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T17:14:03.813

```
Why does str++ moves to the next character, shouldn't it be something like this
instead: *(str+i) where i increments with each loop and moves "i" places in 
memory based on *str address? 
```

在 C/C++ 中，string 是一个指针变量，其中包含字符串文字的地址。最初 Str 指向第一个字符。*(str) 返回字符串的第一个字符。

Str++ 指向第二个字符。因此 *(str) 返回字符串的第二个字符。

```
why does simple *str works as a condition? 
```

每个 c/c++ 字符串都包含空字符。这些空字符表示 C 中字符串的结尾**。NUL 字符的 ASCII 码是 0**。

```
In C/C++,0 means FALSE.Thus, NUL Character in Conditional statement 
means FALSE Condition. 

for(;0;)/*0 in conditions means false, hence the loop terminates 
when pointer points to Null Character.
{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T17:01:12.447

当指针指向一个空字符时，它被认为是假的。这发生在指针中。我不知道是谁定义的，但它确实发生了。

这可能只是因为 C 将 0 视为假，而将其他所有事物视为真。

例如在下面的代码中。

```
if(0) {
           puts("true");
} else {
           puts("false"); 
} 
```

`false`将是输出

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T17:07:48.497

一元`*`操作符是一个*解引用*操作符——`*str`意思是“指向的值`str`”。`str`是一个指针，所以用`str++`（或`++str`）递增它会将指针更改为指向下一个字符。所以这是在for循环中递增的正确方法。

任何整数值都可以视为布尔值。`*str`因为for循环的条件采用指向的值`str`并确定它是否非零。如果是这样，则循环继续。一旦遇到空字符，它就会终止。

# unix - 如何在 kdevelop 中递归地忽略符号链接或目录？

> ID：15643009
> 
> 赞同：3
> 
> 时间：2013-03-26T16:58:00.930
> 
> 标签：unix, filesystems, kdevelop

我正在使用 KDevelop 4.2.3，并且在我的项目目录中有指向大量测试实例的符号链接。我想告诉 kdevelop 忽略这些目录。有可能将一个名为的文件`.kdev_ignore`放入应该被忽略的目录中。不幸的是，此功能不会传播到子目录中。

那么，有没有办法排除一个目录及其所有子目录而不把`.kdev_ignore`文件放在任何地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:24:24.513

**使用 Makefile（不是 CMake）更新：**

我还发现了一个已有四年历史的 Makefile 符号链接递归[错误](https://bugs.kde.org/show_bug.cgi?id=173924) ，该错误最初是在 Kdevelop 3.5 中修补的（加上可能对同一问题的[第二次引用）。](https://bugs.kde.org/show_bug.cgi?id=103297)

如果您决定提交新的错误报告，并且我个人认为您应该提交，您应该参考这两个链接来演示回归。

# javascript - 如何使用 JustGage 按扇区显示颜色

> ID：15643012
> 
> 赞同：7
> 
> 时间：2013-03-26T16:58:10.917
> 
> 标签：javascript, php, jquery, justgage

我试图让我的仪表按扇区显示颜色（即在 var g1 上，我想要绿色 0-10、橙色 11-22 和红色 23-34）。

可以选择这样做，但是对于像我这样的菜鸟没有明确的说明。

任何帮助，将不胜感激。

[http://www.justgage.com](http://www.justgage.com)

```
<script>
  var g1 = new JustGage({
    id: "score", 
    value: <?php
print $content['field_anger_score'][0]['#markup'];
?>, 
    min: 0,
    max: 34,
    title: "Your Anger Score",
levelColorsGradient: false
  }); 
 var g2 = new JustGage({
    id: "passive-aggressive", 
    value: <?php
print $content['field_passive_aggressive_score'][0]['#markup'];
?>, 
    min: 0,
    max: 14,
    title: "Passive Aggressive"
  }); 
var g3 = new JustGage({
    id: "aggressive", 
    value: <?php
print $content['field_aggressive_score'][0]['#markup'];
?>, 
    min: 0,
    max: 6,
    title: "Aggressive"
  }); 
var g4 = new JustGage({
    id: "assertive", 
    value: <?php
print $content['field_assertive_score'][0]['#markup'];
?>, 
    min: 0,
    max: 4,
    title: "Assertive"
  });

</script> 
```

东风

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T17:37:12.803

我看到您`levelColorsGradient: false`在设置第一个量具（g1）时正在使用。那应该根据文档来做。

文件说

> 选择显示值的基于扇区的颜色表示。这意味着对于所有低于 33% 的值，颜色将保持绿色，从 34% 到 66% 为黄色。把它超过 67%，你的仪表会发红光。这三种是默认颜色。

如果您想定义自己的颜色，文档会说

> // levelColors : 字符串[]
> 
> // 指标颜色，从下到上，RGB 格式

因此，创建您自己的颜色变量，将下面的 RGB 值更改为您想要的颜色。

```
var myColors = [
  "#a9d70b",
  "#f9c802",
  "#ff0000"
] 
```

然后在设置仪表时设置此选项。

```
levelColors : myColors 
```

或者，如果您想将它们保持在一起，请跳过变量并执行此操作。我将中间值更改为橙色。

```
 levelColors : [  "#a9d70b", "#F27C07",  "#ff0000" ] 
```

仪表现在是否显示默认颜色？我不认为你可以改变行业，它们是基于百分比的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-06T12:07:28.197

您可以使用 customSectors 属性设置颜色

```
var g1 = new JustGage({
  id: "score", 
  value: <?php
    print $content['field_anger_score'][0]['#markup'];
   ?>, 
  min: 0,
  max: 34,
  title: "Your Anger Score",
  customSectors : [{"lo":0,"hi":10,"color":"#a9d70b"},
                   {"lo":11,"hi":22,"color":"#f9c802"},
                   {"lo":23,"hi":34,"color":"#ff0000"}],
  levelColorsGradient: false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T01:39:14.973

如果您设置 3 种颜色，则每种颜色将代表 33%。如果设置 5 种颜色，则每种颜色为 20%。对于 100% 比例的最大化控制，您可以设置一个 100 个元素的数组，每个元素代表 1%。颜色可以重复，因此前 20 种颜色可能全部为“#ff0000”，前 20% 为红色。等等。这在说明中对我来说并不清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T16:26:34.620

您可以将 customSectos 与 percents:true 一起使用，

```
######September 26, 2016\. - release 1.2.9

######customSectors receives structural update + additional "percents" feature (define ranges in %).   
    customSectors: {
          percents: true,
          ranges: [{
            color : "#43bf58",
            lo : 0,
            hi : 50
          },{
            color : "#ff3b30",
            lo : 51,
            hi : 100
          }]
        } 
```

参考：[https ://github.com/toorshia/justgage](https://github.com/toorshia/justgage)

# grails - Grails 构建战争文件失败，没有说明原因

> ID：15643015
> 
> 赞同：5
> 
> 时间：2013-03-26T16:58:12.453
> 
> 标签：grails

尝试从运行应用程序（运行良好，完全没有问题）转移到在 Tomcat 上运行。但是，当我们运行`grails test war`该`Building War File...`步骤时会失败。

这是控制台输出，我不确定如何强制它告诉我构建的问题。

```
Loading Grails 2.2.0
| Configuring classpath.
| Environment set to test.....
| Packaging Grails application.....
| Compiling 1 source files.....
| Compiling 33 GSP files for package [infogriz]..
| Compiling 5 GSP files for package [debug].
| Compiling 4 GSP files for package [databaseMigration]..
| Building WAR file..... 
```

并且弹出窗口打开了`'grails test war' has encountered a problem. Problem executing: test war.`真正有用的。

“详细信息”按钮提供了更多详细信息。

```
Problem executing: test war --stacktrace --verbose
Command terminated with an error code (see details for output)
------System.out:-----------
Loading Grails 2.2.0
| Configuring classpath.
| Environment set to test.....
| Packaging Grails application.....
| Compiling 2 source files.....
| Compiling 33 GSP files for package [infogriz]..
| Compiling 5 GSP files for package [debug].
| Compiling 4 GSP files for package [databaseMigration]..
| Building WAR file.....
------System.err:----------- 
```

有任何想法吗？我尝试添加 --stacktrace 但它仍然没有告诉我为什么它失败了。

编辑。

感谢 Ian 的评论，从命令行运行。新的错误是：

``| Error Error executing script War: : c:\Users\me\git\infogriz\grails -app\migrations does not exist.`

我猜我会在午饭后建立那个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:50:41.660

我曾经遇到过这个错误，我通过在预期位置创建迁移文件夹来修复它......

您可能最近更新到了较新版本的 Grails，或者您使用了比项目属性中配置的 Grails 版本更新的 Grails 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T02:56:58.410

您是否为您的项目使用版本控制？

当我将 CVS 配置为修剪空目录时，我也发生了类似的错误。我关闭了这个功能，Grails 构建成功完成。

# django - Django 表单模型中的 DateTime 字段

> ID：15643019
> 
> 赞同：11
> 
> 时间：2013-03-26T16:58:18.077
> 
> 标签：django, datetime, django-models, django-forms

在使用`DateTimeField`in `ModelForm`s 时，它们看起来像文本字段。我怎样才能让它们在管理员中看起来像？（当我去管理员并添加一个节目时，我将这些字段视为日期字段）

```
# models.py
class Show(models.Model):
    ...
    start_time = models.DateTimeField("Event Time")
    sale_end_time = models.DateTimeField("Sale End Time")

class ShowForm(ModelForm):

    class Meta:
        model = Show 

# views.py
def createshow(request):
    if request.method == 'POST':
        form = ShowForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/showsaved')
    else:
        form = ShowForm()
        return render(request, 'BizCreateShow.html', {'ShowForm' : form}) 
```

在模板中：

```
<form class="form-horizontal well" action="" method="post">
 {% csrf_token %}
    {{ ShowForm }} </br>
    <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T18:52:04.647

您可以使用 django 小部件来执行此操作。它非常简单且易于实施。下面详细介绍如何使用小部件来使用它。

在**forms.py中**

```
from django.contrib.admin import widgets

class ShowForm(ModelForm):
    class Meta:
        model = Show 
    def __init__(self, *args, **kwargs):
        super(ShowForm, self).__init__(*args, **kwargs)
        self.fields['start_time'].widget = widgets.AdminSplitDateTime()
        self.fields['sale_end_time'].widget = widgets.AdminSplitDateTime() 
```

在**模板中**

```
<script type="text/javascript" src="/my_admin/jsi18n/"></script>
<script type="text/javascript" src="/media/admin/js/core.js"></script>

<link rel="stylesheet" type="text/css" href="/media/admin/css/forms.css"/>
<link rel="stylesheet" type="text/css" href="/media/admin/css/base.css"/>
<link rel="stylesheet" type="text/css" href="/media/admin/css/global.css"/>
<link rel="stylesheet" type="text/css" href="/media/admin/css/widgets.css"/> 
```

就是这个。如果我不太清楚，请告诉我。或者您面临任何错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T19:17:26.697

您可能应该使用 jQuery UI 的[datepicker 小部件](http://jqueryui.com/datepicker/)之类的东西：

> 日期选择器与标准表单输入字段相关联。专注于输入（单击或使用 Tab 键）以在小叠加层中打开交互式日历。选择一个日期，单击页面上的其他位置（模糊输入），或按 Esc 键关闭。如果选择了日期，则反馈显示为输入值。

# c# - C# SQL 内部连接致命错误

> ID：15643022
> 
> 赞同：-4
> 
> 时间：2013-03-26T16:58:22.700
> 
> 标签：c#, sql

尝试通过 C# 连接到 SQL 数据库时出现错误：

```
SqlConnection sqlc = new SqlConnection("Server=sql09.freemysql.net,3306;Database=rekklamirajmee;Uid=trubilord;Pwd=******;");
sqlc.Open() 
```

通过 HeidiSQL 连接时，一切正常，设置如下：

![在此处输入图像描述](../Images/e177910eb465ff8614df2ed1763a4ec7.png)

默认为高级。

我一直在尝试修复它，已经用谷歌搜索了一个多小时，但我似乎无法修复它；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:02:31.953

除非我失去理智，否则问题是您正在使用`SqlConnection`并且您应该使用[`MySqlConnection`](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlconnection.html). 您可以从[http://dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)获取该库。这是您需要在项目中包含的完全不同的程序集。

`SqlConnection`连接到 Microsoft SQL Server。

# stata - Stata：隐藏命令行

> ID：15643023
> 
> 赞同：5
> 
> 时间：2013-03-26T16:58:25.313
> 
> 标签：stata

```
. sysuse auto, clear
(1978 Automobile Data)

. di "I am getting some summary statistics for PRICE"
I am getting some summary statistics for PRICE

. su price

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       price |        74    6165.257    2949.496       3291      15906

. 
end of do-file 
```

我想隐藏命令行，只显示结果如下：

```
I am getting some summary statistics for PRICE

        Variable |       Obs        Mean    Std. Dev.       Min        Max
    -------------+--------------------------------------------------------
           price |        74    6165.257    2949.496       3291      15906 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T19:00:44.013

user1493368 的答案是正确的，但是对于更复杂的示例，编写这样的代码很乏味且容易出错。另一个答案就是学习如何编写 Stata 程序！把它放在一个do-file编辑器窗口中并运行它

```
program myprog 
    qui sysuse auto, clear
    di "I am getting some summary statistics for PRICE"
    su price
end 
```

然后交互输入

```
myprog 
```

在实践中，一个人会犯很多小错误，比如第一行

```
capture program drop myprog 
```

是个好主意。

这确实是显着且有据可查的：从 [U] 中的后面章节开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T17:15:23.290

试试这个：输出文本文件 (quiet_noise.txt) 将包含您想要的文件。

```
quietly {
     log using quiet_noise.log, text replace
     sysuse auto
     noisily: di "I am getting some summary statistics for PRICE"
     noisily: su price
     log close
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-10T18:54:25.407

评论 Stata 输出，尤其是当您想要共享日志文件成为问题时，这在您的问题中得到了很好的反映。

正如尼克考克斯很好地解释的那样，编写一个程序来显示文本是一个非常好的主意。但是，在程序中包含文本是有代价的，即您不能将该程序与其他变量一起使用。例如，如果您编写一个程序来使用给定变量运行回归，如果您对结果进行评论，则不能将该程序与其他变量一起使用。换句话说，写关于特定发现的评论会使程序的可用性降低。结果，您最终将为每个分析编写一个程序，这并不吸引人。

那么我的建议是什么？使用**[MarkDoc](http://www.haghish.com/statistics/stata-blog/reproducible-research/markdoc.php)** pakcage 来评论您的结果。

在 MarkDoc (ssc install markdoc) 中，您可以使用 Markdown / HTML /LaTeX 编写评论并将其导出到 Stata 中的动态文档。在您的示例中，它将如下所示：

```
 qui log using example, replace

    sysuse auto, clear

    /***
    Writing comments in Stata logfiles
    ==================================

    I am getting some summary statistics for PRICE
    ***/

    summarize price

    qui log c
    markdoc example, replace export(pdf) 
```

MarkDoc 将为您生成一个 PDF，将您的评论解释为 Markdown。除了**pdf**之外，您还可以将相同的日志文件转换为其他格式，例如**docx**、**html**、**tex**、Open Office **odt**、**slide**以及**epub**。

PDF 和 HTML 格式还将使用[Statax Syntax Highlighter](http://www.haghish.com/statax/statax.php)为 Stata 命令提供语法高亮显示。

# php - Swiftmailer 发送后删除附件

> ID：15643027
> 
> 赞同：2
> 
> 时间：2013-03-26T16:58:32.297
> 
> 标签：php, symfony, swiftmailer

我试图在使用**Symfony 2.1**和**Swiftmailer**发送电子邮件后删除附件文件，但如果我在返回响应对象（重定向）之前删除文件，则电子邮件不会发送。

我想这是因为 symfony 在响应中发送电子邮件，所以当电子邮件发送时，附件已经被删除。

例如：

```
<?php

// DefaultCotroller.php

$message = \Swift_Message::newInstance($subject)
    ->setFrom('no-reply@dasi.es')
    ->setTo($emails_to)
    ->setBody($body, 'text/html')
    ->attach(\Swift_Attachment::fromPath('backup.rar'));

$this->get('mailer')->send();

unlink('backup.rar');  // This remove the file but doesn't send the email!

return $this->redirect($this->generateUrl('homepage')); 
```

一个选项是创建一个 crontab 来清理文件，但我不喜欢使用它。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T17:16:53.123

您可以在此处查看处理内存线轴的代码： [https ://github.com/symfony/SwiftmailerBundle/blob/master/EventListener/EmailSenderListener.php](https://github.com/symfony/SwiftmailerBundle/blob/master/EventListener/EmailSenderListener.php)

这用于批处理要发送的电子邮件。

您可以在`send()`通话后和通话前添加此内容，`unlink()`以模仿发送电子邮件的行为

```
 $transport = $this->container->get('mailer')->getTransport();  

        $spool = $transport->getSpool();

        $spool->flushQueue($this->container->get('swiftmailer.transport.real')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:15:23.807

我不确定，但消息假脱机可能会导致此问题。在 SF2 中，默认使用内存假脱机，这意味着消息是在内核终止事件上发送的。

因此，您必须在删除文件之前冲洗线轴。

如果这是您的问题的原因，请在此处查找解释清楚的解决方案： [http ://sgoettschkes.blogspot.de/2012/09/symfony-21-commands-and-swiftmailer.html](http://sgoettschkes.blogspot.de/2012/09/symfony-21-commands-and-swiftmailer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-01T15:55:51.737

为了完成 james_t 的非常好的答案，如果您使用[多个邮件](https://symfony.com/doc/current/reference/configuration/swiftmailer.html#using-multiple-mailers)程序，则需要进行一些更改。

代替

```
//  Default mailer
$mailer = $this->container->get('mailer');

$subject  = '...';
$from     = '...';
$to       = '...';
$body     = '...';

$message = \Swift_Message::newInstance()
    ->setSubject($subject)
    ->setFrom($from)
    ->setTo($to)
    ->setBody($body, 'text/html')
;

//  Put e-mail in spool
$result = $mailer->send($message);

//  Flush spool queue
$transport      = $mailer->getTransport();  
$spool          = $transport->getSpool();
$realTransport  = $this->container->get('swiftmailer.transport.real')
$spool->flushQueue($realTransport); 
```

经过

```
//  Custom mailer
$mailerServiceName  = 'myCustomMailer';
$customMailer       = $this->container->get("swiftmailer.mailer.".$mailerServiceName);

$subject  = '...';
$from     = '...';
$to       = '...';
$body     = '...';

$message = \Swift_Message::newInstance()
    ->setSubject($subject)
    ->setFrom($from)
    ->setTo($to)
    ->setBody($body, 'text/html')
;

//  Put e-mail in spool
$result = $customMailer->send($message);

//  Flush spool queue
$transport      = $customMailer->getTransport();  
$spool          = $transport->getSpool();
$realTransport  = $this->container->get('swiftmailer.mailer.'.$mailerServiceName.'.transport.real');
$spool->flushQueue($realTransport); 
```

# java - 替换所有出现的特定字符并获得所有变体

> ID：15643034
> 
> 赞同：4
> 
> 时间：2013-03-26T16:58:54.627
> 
> 标签：java, string, replace, variations

我有一个词需要用星号替换某个字符，但我需要从这个词中获取所有替换的变体。例如。我想用星号替换字符'e'：

```
String word = telephone; 
```

但是要得到这个列表：

```
List of words = [t*lephone, tel*phone, telephon*, t*l*phone, t*lephon*, tel*phon*, t*l*phon*]; 
```

有没有一种快速的方法可以在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:14:24.973

以下代码将以递归方式执行此操作：

```
public static Set<String> getPermutations(final String string, final char c) {
    final Set<String> permutations = new HashSet<>();
    final int indexofChar = string.indexOf(c);
    if (indexofChar <= 0) {
        permutations.add(string);
    } else {
        final String firstPart = string.substring(0, indexofChar + 1);
        final String firstPartReplaced = firstPart.replace(c, '*');
        final String lastPart = string.substring(indexofChar + 1, string.length());
        for (final String lastPartPerm : getPermutations(lastPart, c)) {
            permutations.add(firstPart + lastPartPerm);
            permutations.add(firstPartReplaced + lastPartPerm);
        }
    }
    return permutations;
} 
```

它将原始内容添加`String`到输出中，因此：

```
public static void main(String[] args) {
    String word = "telephone";
    System.out.println(getPermutations(word, 'e'));
} 
```

输出：

```
[telephone, t*lephone, tel*phone, t*l*phone, telephon*, t*lephon*, tel*phon*, t*l*phon*] 
```

但是你总是可以用原词调用`remove`返回的。`Set`

# twitter-bootstrap - 如何在 Bootstrap 中更改悬停在表格上的悬停颜色？

> ID：15643037
> 
> 赞同：116
> 
> 时间：2013-03-26T16:59:12.970
> 
> 标签：twitter-bootstrap

我有一张带有“table-hover”类的桌子。默认悬停在颜色上的是白色/浅灰色。如何更改此颜色？

我尝试通过将以下内容添加到我的主要样式表中来覆盖默认值

```
.table-hover tbody tr:hover > th {
  background-color: #D1D119;
} 
```

不幸的是，以上不起作用

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-03-26T17:05:02.397

试试这个：

```
.table-hover tbody tr:hover td, .table-hover tbody tr:hover th {
  background-color: #color;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-30T15:37:47.170

这是imo最简单的方法，它对我有用。

```
.table-hover tbody tr:hover td {
    background: aqua;
} 
```

不知道为什么要将标题颜色更改为与行相同的悬停颜色，但如果这样做，则可以使用上述解决方案。如果你只是想要

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-10-03T19:01:11.603

这对我有用：

```
.table tbody tr:hover td, .table tbody tr:hover th {
    background-color: #eeeeea;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-15T16:04:06.687

**这适用于通过 grunt 或其他一些任务运行器编译的 bootstrap v4**

您需要更改`$table-hover-bg`以在悬停时设置突出显示

```
$table-cell-padding:            .75rem !default;
$table-sm-cell-padding:         .3rem !default;

$table-bg:                      transparent !default;
$table-accent-bg:               rgba(0,0,0,.05) !default;
$table-hover-bg:                rgba(0,0,0,.075) !default;
$table-active-bg:               $table-hover-bg !default;

$table-border-width:            $border-width !default;
$table-border-color:            $gray-lighter !default; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-06T11:24:06.143

**HTML 代码**：

```
<table class="table table-hover">
    <thead>
        <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>John</td>
            <td>Doe</td>
            <td>john@example.com</td>
        </tr>
        <tr>
            <td>Mary</td>
            <td>Moe</td>
            <td>mary@example.com</td>
        </tr>
        <tr>
            <td>July</td>
            <td>Dooley</td>
            <td>july@example.com</td>
        </tr>
    </tbody> 
```

**CSS 代码**

```
.table-hover thead tr:hover th, .table-hover tbody tr:hover td {
    background-color: #D1D119;
} 
```

**css代码表明：**

*鼠标悬停在行上：*

> .table-hover > thead > tr:hover

*th 的背景颜色将更改为 #D1D119*

> th

*tbody 也会发生同样的动作*

> .table-hover tbody tr:hover td

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-11T13:39:05.480

```
.table-hover tbody tr:hover td {
    background: #ffffff;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-13T13:49:38.787

尝试：

```
.table-hover > tbody > tr.active:hover > th {
                background-color: #color;
            } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-03T10:01:19.443

对我来说@pvskisteak5 的回答导致了“闪烁效应”。要解决此问题，请添加以下内容：

```
 .table-hover tbody tr:hover,
            .table-hover tbody tr:hover td,
            .table-hover tbody tr:hover th{
                background:#22313F !important;
                color:#fff !important;
            } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-01T20:35:01.027

我发现我必须覆盖引导程序使用的“CSS 自定义属性”，该属性称为`bs-table-accent-bg`...

```
.table-hover > tbody > tr:hover { --bs-table-accent-bg: #f8f8f8; } 
```

路径是引导程序本身使用的。我是从检查页面中得出的。

因为如果我做了其他解决方案所做的事情，我无法让突出显示变得比已经应用的引导程序*更轻。*这样，它就可以工作（即我可以让悬停颜色变浅）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-29T06:49:34.463

```
.table-hover tbody tr:hover td {
    background: aqua;
} 
```

这是迄今为止我能想到的最好的解决方案。它在这样的场景中完美运行

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-30T21:02:10.887

您可以通过多种方式做到这一点，

1.  **原则性和简短的方法：**使用 sass 覆盖您需要的 sass 变量：

```
// Your variable overrides
$table-hover-bg: #d00; // what's that you need
$table-striped-bg: #fff;

// Bootstrap and its default variables
@import "node_modules/bootstrap/scss/bootstrap"; 
```

2.  **使用 CSS 变量：**

```
.table {
    --bs-table-hover-bg: #d00;
} 
```

或者

```
#thetable tr:hover, #thetable tr td:hover {
   background-color: #d00;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-23T09:52:43.807

不要更改默认的 table-hover 类，而是创建一个新类（ anotherhover ）并将其应用于您需要此效果的表。

代码如下；

```
.anotherhover tbody tr:hover td { background: CornflowerBlue; } 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-04-15T04:51:48.760

例如，尝试使用 Bootstrap 的`.table-hover`类来实现[可悬停的行](https://getbootstrap.com/docs/4.4/content/tables/#hoverable-rows)

```
<table class="table table-hover">
  ...
</table> 
```

# php - 针对多个文件输入检查现有文件名

> ID：15643038
> 
> 赞同：0
> 
> 时间：2013-03-26T16:59:17.250
> 
> 标签：php, javascript, jquery, ajax

我有一个文件验证过程，它通过进行 ajax 调用来检查文件名是否已经在数据库中。如果在 existing-filenames.php 中仅回显 1 个文件名，则此方法有效，但我不知道如何循环返回数据以检查多个文件输入中的每个文件名与现有文件名的每个结果。php环形。非常感谢任何建议。谢谢

```
var file = $('#file')[0];
$.get('existing-filenames.php', function(data){

  for (var i=0; i<file.files.length; i++) {
       var fname = file.files[i].name;

        if(fname == data){ 
          alert("these files already exist:" + data); 
          return false;
        }
      }
  }); 
```

并在“现有文件名.php”中

```
$allfiles = $db->query("SELECT filename FROM files WHERE email = '$_SESSION[email]'");

    while($result = $allfiles ->fetch_assoc()) {
    echo $result['filename'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:06:28.730

在您的 PHP 文件中，您只是打印所有文件路径，没有空格或换行符。此外，您应该为您的查询使用准备好的语句，包括`$_SESSION['email']`没有任何检查是不安全的。

顺便说一句，尝试像这样编辑您的 PHP 文件：

```
$allfiles = $db->query("SELECT filename FROM files WHERE email = '$_SESSION[email]'");

$fileList = array();
while($result = $allfiles ->fetch_assoc()) {
    $fileList[] = $result['filename'];
}

echo json_encode($fileList); 
```

你的JS代码是这样的：

```
$.get('existing-filenames.php', function(data){
      for (var i=0; i<file.files.length; i++) {
       var fname = file.files[i].name;

        if(data.indexOf(fname) >= 0){ 
          alert("these files already exist:" + data); 
          return false;
        }
      }
  }, 'json'); 
```

未经测试，但它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:06:31.823

尝试将您的 JS 更改为：

```
var file = $('#file')[0];
$.getJSON('existing-filenames.php', function(data){

  for (var i=0; i<file.files.length; i++) {
     var fname = file.files[i].name;

      if(~data.indexOf(fname)){ 
        alert("these files already exist:" + data); 
        return false;
      }
  }
}); 
```

在你的 PHP 文件中：

```
$result = [];
while( $files = $allfiles ->fetch_assoc() ){
    $result[] = $files['filename'];
}
echo json_encode($result); 
```

... 我认为。我几乎没有写过 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:07:22.143

```
var fileNames = $('.file-name').text();

fileNames.forEach(function(fileName){
     $.get('url',{filename: fileName},function(data){
                  ....
       });
 }); 
```

我的方法是将文件名放入一个数组中，并每次使用不同的参数发出 get 请求

# svn - 在 Powershell 中获取当前凭据并将它们传递给 SVN 提交命令？

> ID：15643039
> 
> 赞同：0
> 
> 时间：2013-03-26T16:59:27.327
> 
> 标签：svn, powershell

所以当我做一个 SVN -ci -m "My reason"

SVN 要求我输入密码。有什么方法可以从当前登录的用户那里捕获该密码并将其作为变量等传递给 SVN 命令？我正在使用powershell 2.0。原因是脚本将以非交互方式运行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:31:01.310

如果您想要无密码提交，请通过 URI 检查源`svn+ssh://`并使用 SSH 公钥身份验证。

# ruby - 如何使用 Selenium WebDriver 和 Ruby 确定该元素是可点击的？

> ID：15643040
> 
> 赞同：4
> 
> 时间：2013-03-26T16:59:29.833
> 
> 标签：ruby, selenium-webdriver

在我的网页上，页面加载但页面的子选项卡在 20 秒内不可点击（有时超过此时间）。页面内容是 -

```
<nav id="subTabHeaders">
 <div class="selected" data-name="ab">AB</div>
 <div class="" data-name="cd">CD</div>
 <div class="" data-name="ef">EF</div>
 <div class="" data-name="gh">GH</div>
</nav> 
```

我必须单击子选项卡，因此我按以下方式尝试了此操作 - 放置睡眠然后 element.click 但睡眠不是理想的处理方式，因为有时可能会发生子选项卡元素在时间之前或之后可点击睡觉。

使用睡眠，我做了以下 -

```
element = WAIT.until { driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]")}
sleep 20
element.click 
```

如果元素在超过睡眠时间后可点击并且我们在睡眠时间到期后立即点击元素，（我的意思是（使用上面的代码）假设元素在 30 秒后变为可点击，但我们在 20 秒后立即点击元素），实际的点击动作不会发生并且 click 也不会返回任何错误。

是否有 Ruby 方法来检查元素是否可点击？这样我们就会知道什么时候点击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:28:23.820

从[ruby​​ 绑定页面](https://code.google.com/p/selenium/wiki/RubyBindings)：（请参阅驱动程序示例）

```
# wait for a specific element to show up
wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
wait.until { driver.find_element(:id => "foo") } 
```

所以通常你可以做类似的事情：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 40)
wait.until do
  element = driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]")
  element.click
end 
```

或者更简洁

```
wait = Selenium::WebDriver::Wait.new(:timeout => 40)
wait.until { driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]").click } 
```

但是，由于您说单击不会引发错误，听起来单击实际上是有效的，只是您的页面还没有真正准备好显示该选项卡。我猜这里有一些异步 javascript。
因此，您可以尝试在等待块内，检查单击是否导致所需的更改。我猜，但你可以尝试类似：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 40)
wait.until do
  driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]").click
  driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3][@class='selected']")
end 
```

这里重要的是[#until](http://selenium.googlecode.com/git/docs/api/rb/Selenium/WebDriver/Wait.html#until-instance_method)将等待并重复，直到块得到一个真实的结果或超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:59:29.067

怎么样

```
WebDriverWait wait = new WebDriverWait(driver,30);
wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(subTabHeaders))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:32:56.883

希望对您有所帮助：

```
begin

    element = WAIT.until { driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]")}
    sleep 20
    element.click

rescue Selenium::WebDriver::Error::StaleElementReferenceError

    p "Indicates that a reference to an element is now “stale” - the element no longer appears in the DOM of the page."

end 
```

**或者**

你可以试试这个：

```
begin

    wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
    wait.until { driver.title.include? "page title" }
    driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]")}.click

rescue Selenium::WebDriver::Error::StaleElementReferenceError

    p "element is not present"

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-09T05:15:23.210

这是我使用的 - 测试链接是否可点击，否则转到另一个 URL：

```
 if (logOutLink.Exists() && ExpectedConditions.ElementToBeClickable(logOutLink).Equals(true))
    {
        logOutLink.Click();
    }
    else
    {
        Browser.Goto("/");
    } 
```

# python - 在 SQLAlchemy 中使用 expire_on_commit 和自动提交

> ID：15643042
> 
> 赞同：1
> 
> 时间：2013-03-26T16:59:31.767
> 
> 标签：python, sqlalchemy, autocommit

由于各种原因，我已将 sessionmaker 配置为`autoflush=False, expire_on_commit=False, autocommit=True`. 主要是，我只想要自动提交行为。由于 SQLAlchemy 文档中的警告，设置了其他标志：

> 在没有划界事务的情况下，会话无法就何时应发生自动刷新或何时应发生自动过期做出适当的决定，因此应使用 autoflush=False、expire_on_commit=False 禁用这些功能。
> 
> [http://docs.sqlalchemy.org/en/latest/orm/session.html#autocommit-mode](http://docs.sqlalchemy.org/en/latest/orm/session.html#autocommit-mode)

如果没有这种`expire_on_commit`行为，我经常发现自己不得不手动使对象过期，所以使用`expire_on_commit=True`. 我的问题是，这个警告仍然准确吗？`expire_on_commit`当某些东西过期时听起来很清楚，所以我不知道它是否与文档一致。

# ruby-on-rails - Ruby on Rails 中更好的递归循环

> ID：15643044
> 
> 赞同：0
> 
> 时间：2013-03-26T16:59:37.940
> 
> 标签：ruby-on-rails, ruby

使用 Rails 3.2。假设我想要 2 个选项：

1.  获取所有旅行照片。
2.  获取第一张旅行照片。

我有以下代码：

```
# trip.rb
class Trip < ActiveRecord::Base
  has_many :trip_days

  def trip_photos
    if (photos = trip_days.map(&:spots).flatten.map(&:photos).flatten.map)
      photos.each do |photo|
        photo.url(:picture_preview)
      end
    end 
  end

  def trip_photo
    trip_photos.first
  end
end

# trip_day.rb
class TripDay < ActiveRecord::Base
  belongs_to :trip
  has_many :trip_day_spots
  has_many :spots, :through => :trip_day_spots
end

# trip_day_spot.rb
class TripDaySpot < ActiveRecord::Base
  belongs_to :trip_day
  belongs_to :spot
end

#spot.rb
class Spot < ActiveRecord::Base
end

# trips_controller.rb
class TripsController < ApplicationController
  def index    
    @trips = Trip.public.paginate(:page => params[:page], :per_page => 25)
  end
end 
```

正如预期的那样，该`trip_photos`方法生成了大量的 SQL 查询。我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:57:37.193

代码工作正常，但要急切加载，只需添加`:include`：

```
# trips_controller.rb
class TripsController < ApplicationController
  def index    
    @trips = Trip.public.paginate(:include => [:trip_days => [:spots => :photos]], :page => params[:page], :per_page => 25)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:11:41.383

这可能不是最常见的方式，但如果你真的想一次击中所有的位置，你可以这样做：

```
def spots
 Spot.joins("join trip_days_spots on spots.id = trip_days_spots.spot_id join trip_days on trip_days.id = trip_days_spots.trip_day_id join trips on trips.id = trip_days.trip_id").where("trips.id = ?", self.id)
end 
```

然后将循环更改为：

```
def trip_photos
  spots.map(&:photos).flatten.each do |photo|
    photo.url(:picture_preview)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:29:52.357

这是因为 N+1 个查询。在这种情况下，我们需要预先加载基础对象的所有关联，这样当您调用它的关联对象时，它不会触发任何查询来获取它们，而只是从其缓存的对象中获取它们。

希望这会奏效，但未经测试。我假设并编写了以下查询。

```
def trip_photos
  user_trip_days = trip_days.includes(:spots => :photos)
  photos = user_trip_days.collect {|trip_day| trip_day.spots.map(&:photos).flatten}.flatten
  photos.each do |photo|
    photo.url(:picture_preview)
  end if photos
end 
```

如果您有任何错误，请告诉我。

有关在 ActiveRecord 中急切加载关联对象的更多信息，请参阅

[Rails](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)和[Rails cast](http://railscasts.com/episodes/22-eager-loading)和[Rails Tips指南](http://rubyquicktips.com/post/6411587940/eager-loading)

# reporting-services - 将图表添加到矩阵中，跨越多行

> ID：15643046
> 
> 赞同：1
> 
> 时间：2013-03-26T16:59:43.817
> 
> 标签：reporting-services, charts, merge, rows

我在 Report Builder 3 中遇到了障碍，想知道是否有人可以让我直截了当。

我有一个矩阵，按收入类别显示 7 个重要数字，按地区，按月拆分。

效果很好。

我在“总计”部分中列出了这 7 个数字中的每一个，以显示该地区的整体表现如何。

这也很好用。

我在收入类别中添加了折线图，如下图所示。

效果很好。

我似乎无法弄清楚如何在总计部分中添加相同的折线图，我在下图中绘制了大红色“X”。在现有折线图所在的空间中，我设法将所有东西都放在一个单元格中。正如您在图像中看到的那样，总部分并非如此。它是 7 个单独的单元格。我没有选择合并那些特定的 7 个单元格（但我确实在红色“X”左侧的 7 个单元格中获得了选项......如果该图表与所有收入类别）。

我一直在摆弄团体无济于事......我对SSRS很陌生，所以我希望我只是做错了什么并且可以做到......我不知道还有什么可以尝试的。

我们欢迎所有的建议！！

WELLLLLLLLLLL，crud....毕竟，我没有足够的声望点来包括我的屏幕截图....把这些放在一起并使用数字不费吹灰之力使数学排列起来，所以请忽略数字！

简而言之，希望在 TOTAL 部分中有一个图表，但我已经设法使该区域有 7 个不同的行，我似乎无法像收入类别分组时那样重新回到一个行中。

```
Region |   Revenue Category |                      |              |   Jan   |  Feb  |  etc.
   NW        Direct Sales        <working chart>       Net Sales      $100     $200       
                                        |              Budget         $50      $200
                                        |              Variance       $50      $0
                                   <same chart>        % to Budget    200%     100%
                                        |              Forecast       $100     $200
                                        |              Forecast Var   $50      $0
                              <bottom of same chart>   Forecast %     200%     100%
             ------------------------------------------------------------------------------
             Internet Sales      <working chart>       Net Sales      $100     $200       
                                        |              Budget         $50      $200
                                        |              Variance       $50      $0
                                   <same chart>        % to Budget    200%     100%
                                        |              Forecast       $100     $200
                                        |              Forecast Var   $50      $0
                              <bottom of same chart>   Forecast %     200%     100%
             --------------------------------------------------------------------------------
             TOTAL               Want a chart HERE     Net Sales      $200     $400       
                                 that spans these      Budget         $100     $400
                                 seven rows like       Variance       $100      $0
                                 it does above, but    % to Budget    200%     100%
                                 I can not get these   Forecast       $200     $400
                                 rows grouped into     Forecast Var   $100      $0
                                 a single cell!        Forecast %     200%     100% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:17:02.360

嘿，您可以做的是在该表的两行中添加一个组。

我认为如果您使用的是报告生成器工具，您可以在底部看到“ROW 组”，您可以在其中看到您创建的组。右键单击它，您可以在其中看到一个添加总计字段，单击它。它会自动为上述列创建一行并添加数据。现在运行报告，您可以看到确切的数据。但我不确定您使用的是哪个工具。

# java - 如何使用 Mockito 覆盖抽象基类行为

> ID：15643049
> 
> 赞同：2
> 
> 时间：2013-03-26T16:59:51.160
> 
> 标签：java, mockito

我有这样的代码：

```
class Outer {
  private External external;
  class MyCallback extends ExternalAbstractCallback {
    void somethingHappened() { if (super.someCondition()) { ... }; }
  }

  public Outer() {
     external = ...;
  }

  public setExternal(External e) { external = e; } // test support

  public void doIt() {
    external.setCallback(new MyCallback());
    external.doSomething();
  }
} 
```

我想测试`MyCallback`何时`doIt()`被调用的行为。我使用 Mockito 创建一个模拟 External，然后可以`external.doSomething()`执行 MyCallback.somethingHappened。我可以控制第`super.someCondtion`4 行调用的返回值吗？我可以重新安排实现以提高可测试性吗？`External`和的实现`ExternalAbstractCallback`不能更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:05:06.197

你的问题是你不能`new`用 Mockito 模拟。简而言之，您要测试的代码不应该调用`new`.

解决方法：

*   为回调添加一个 getter/setter。
*   移动`new MyCallback()`到您在测试中覆盖的新受保护辅助方法

# ios - 为 iOS 应用程序设计特定的 BarButtonItems

> ID：15643052
> 
> 赞同：1
> 
> 时间：2013-03-26T16:59:56.770
> 
> 标签：ios

我正在使用 iOS 5 外观 API 将所有 baritembuttons 设置为特定样式，如下所示：

```
 id barButtonAppearance = [UIBarButtonItem appearance];
      [barButtonAppearance setBackgroundImage:[theme imageForBarButtonNormal] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

一切正常，除了现在我有一个确认 barbuttonitem 我想以不同的方式设置样式。我尝试使用以下代码在控制器中对其进行样式设置：

```
self.confirmBarButtonItem.tintColor = [UIColor greenColor]; 
```

但它仍然采用 UIAppearance 样式。如何以不同的方式设置 UIBarButtonItem 的样式？

# c - 将函数指针作为参数传递

> ID：15643054
> 
> 赞同：6
> 
> 时间：2013-03-26T17:00:01.410
> 
> 标签：c, function, function-pointers

我正在使用以下简单代码重新访问 C 中的函数指针：

```
unsigned TestFn(unsigned arg)
{   
    return arg+7;
}

unsigned Caller(unsigned (*FuncPtr)(unsigned), unsigned arg)
{
    return (*FuncPtr)(arg);
} 
```

我用它来调用它

```
Caller(TestFn, 7)  //and
Caller(&TestFn, 7) 
```

两者都给出了相同的输出： 14\. 这是什么解释。我之前一直在使用第二种调用方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:08:20.520

函数在这里工作有点像数组。假设你有：

```
char hello[5]; 
```

您可以直接将此变量的地址引用为`hello`- 变量名称“衰减”为指针 - 或 as `&hello`，它显式获取地址。

函数是一样的：如果你把`TestFn`它写成函数指针。但你也可以使用`&TestFn`. 后一种形式可能更好，因为它为更多人所熟悉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:08:56.580

就像您在不使用 & 符号的情况下传递字符串的地址一样`'&'`，您不需要使用 & 符号来表示您正在传递一个`function pointer`. 您可以通过 K&R 搜索该书。它包含一个很好的解释

# machine-learning - 什么是决策树中的多元分类？

> ID：15643055
> 
> 赞同：10
> 
> 时间：2013-03-26T17:00:02.897
> 
> 标签：machine-learning, artificial-intelligence, decision-tree

我是人工智能领域的新手，正在阅读决策树。我指的是 AIMA 书，它几乎是推荐的标准 AI 介绍书。在决策树的章节中，他们在书中讨论了一个案例，即第一个属性分裂后，没有剩余的属性，但正负示例仍然没有分离，这意味着这些示例具有完全相同的描述。 ..他们建议的这种情况的解决方案是“**返回剩余示例的复数分类**”。我想知道加粗的那部分是什么意思？返回一组示例的“复数分类”是什么意思？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T17:04:07.980

如果只有两个班级，他们会说多数班级。复数只是将多数泛化到超过 2 个类别。这只是意味着取该叶子中最频繁的类并将其作为您的预测返回。例如，如果您正在对球的颜色进行分类，并且一片叶子中有 3 个蓝球、2 个红球和 2 个白球，则返回蓝色作为您的预测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-27T19:18:03.777

在决策树中，当您到达叶节点但仍不清楚将其分配给的类时，您必须返回多个分类，这意味着考虑叶子父节点的所有示例并查看最常见的类在数据集中。

# html - 三星智能电视 SDK 互联网浏览器不可用

> ID：15643059
> 
> 赞同：1
> 
> 时间：2013-03-26T17:00:11.523
> 
> 标签：html, samsung-smart-tv, television

我最近刚刚下载并安装了三星智能电视 SDK 4（没有 IDE，只有模拟器）。我这样做是因为我只想测试 Web 浏览器，没有别的。

但是，当我启动模拟器（2012 版）时，我在 smarthub 上找不到任何应用程序。我创建了三星帐户，但看不到通常会出现在电视上的默认应用程序，甚至连互联网浏览器也看不到。

有什么我想念的吗？！我只是想测试互联网浏览器。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T11:06:27.833

if i write an app with just location.href = "[http://example.com/](http://example.com/) is working (i have sdk 5.0) but the browser i get on the TV is not the same browser i get on the tv if i just lunch the integrated web browser app. The big difference i see is that my app has a browser without the top bar with navigation controls and also there is no mouse pointer and i need to connect an external usb mouse to the tv

how should i do to implement this ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:02:48.630

提供模拟器是为了测试您自己的应用程序，而不是运行购买电视/BRP/等的人使用他们的设备获得的应用程序。

只有您编写并放置在`apps/`目录中的应用程序才会出现。

也就是说，您可以编写一个除了以下内容之外什么都不做的应用程序：

```
location.href = "http://example.com/"; 
```

# c# - 可以精确表示为浮点数/双精度数的整数范围

> ID：15643067
> 
> 赞同：6
> 
> 时间：2013-03-26T17:00:34.510
> 
> 标签：c#, java, floating-point, integer, double

可以表示[为](https://stackoverflow.com/a/15629079/586086)双精度（分别是浮点数）的（连续）整数的确切范围是多少？

那是

1.  不能精确表示为双精度（分别是浮点数）的最小正整数`m`是多少？`m+1`
2.  不能精确表示为双精度（分别是浮点数）的最大负整数`-n`是多少？`-n-1`（可能与上述相同）。

这意味着 和 之间的每个整数`-n`都`m`具有精确的浮点表示。我基本上是在寻找`[-n, m]`浮点数和双打的范围。

让我们将范围限制为[标准 IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point) 32 位和 64 位浮点表示。我知道浮点数有 24 位精度，双精度数有 53 位（两者都有隐藏的前导位），但由于浮点表示的复杂性，我正在为此寻找权威答案。请不要挥手！

（理想的答案将证明从`0`to的所有整数`m`都是可表达的，但事实`m+1`并非如此。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:15:36.917

由于您询问的是 IEEE 浮点类型，因此语言无关紧要。

```
#include <iostream>
using namespace std;

int main(){

    float f0 = 16777215.; // 2^24 - 1
    float f1 = 16777216.; // 2^24
    float f2 = 16777217.; // 2^24 + 1

    cout << (f0 == f1) << endl;
    cout << (f1 == f2) << endl;

    double d0 = 9007199254740991.; // 2^53 - 1
    double d1 = 9007199254740992.; // 2^53
    double d2 = 9007199254740993.; // 2^53 + 1

    cout << (d0 == d1) << endl;
    cout << (d1 == d2) << endl;
} 
```

输出：

```
0
1
0
1 
```

所以浮点数的限制是 2^24。双倍的限制是 2^53。负数是相同的，因为唯一的区别是符号位。

# c# - 许多具有相同属性的字段

> ID：15643068
> 
> 赞同：1
> 
> 时间：2013-03-26T17:00:35.520
> 
> 标签：c#, syntax, coding-style, attributes

我发现自己写了很多这样的东西：

```
[SameAttribute]
ClassA fieldA;

[SameAttribute]
ClassB fieldB;

[SameAttribute]
ClassC fieldC;

... 
```

C# 中是否有允许我一次标记具有相同属性的多个字段的语法？可能有关于这种情况的编码约定可以使该代码不那么冗长且更具可读性吗？

编辑：澄清一下，我不希望类的*每个*字段都具有此属性，它们有很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:01:29.227

**没有**。您必须`[SameAttribute]`单独将 应用于每个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:02:01.903

如果要`SomeAttribute`应用到类中的所有字段，可以将属性应用到整个类。但是，即使`SomeAttribute`允许以类为目标，其在这样做时的确切行为也取决于`SomeAttribute`. 否则不，您必须将属性单独应用于每个字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:19:44.483

除了上面的其他答案之外，[PostSharp](http://www.postsharp.net/)允许“面向方面的编程”，它允许您定义将应用于类中每个成员的属性。您可以使用它来制作自定义属性，将您所需的属性应用于所有成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:14:11.797

据我所知，没有任何开箱即用的功能，但是您可以使用像 ReSharper 这样的 Visual Studio 插件来创建实时模板，以便在您使用某个模板时自动添加您希望使用的属性

[http://www.jetbrains.com/resharper/features/code_templates.html](http://www.jetbrains.com/resharper/features/code_templates.html)

# vb6 - VB6 发送表单帖子

> ID：15643076
> 
> 赞同：0
> 
> 时间：2013-03-26T17:00:48.817
> 
> 标签：vb6, form-post

这是我正在使用的代码：

```
Dim httpReq As New WinHttp.WinHttpRequest
Dim strLineOut As String
Dim strReturn As String
Dim strStatus As String

lblResponse1.Caption = ""
DoEvents
strLineOut = "<form name=""form1"" method=""post"" enctype=""multipart/form-data"">" & vbCrLf
strLineOut = strLineOut & "  <input name=""hdntype"" type=""hidden"" id=""hnd1"" value=""1"">" & vbCrLf
strLineOut = strLineOut & "  <input name=""hnd1"" type=""hidden"" id=""hnd1"" value=""Value1"">" & vbCrLf
strLineOut = strLineOut & "  <input name=""hdn2"" type=""hidden"" id=""hdn2"" value=""Value2"">" & vbCrLf
strLineOut = strLineOut & "  <input type=""submit"" name=""Submit"" value=""Submit"">" & vbCrLf
strLineOut = strLineOut & "</form>" & vbCrLf

httpReq.Open "POST", "http://www.XXXX.com/XMLProjects/vb6test/form_post.asp", False
httpReq.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
'text/xml
'application/x-www-form-urlencoded
'httpReq.StatusText
'httpReq.Status
'httpReq.SetRequestHeader "Content-Length", Len(strLineOut)
httpReq.Send (strLineOut)
strStatus = httpReq.StatusText
strReturn = httpReq.ResponseText
Debug.Print strReturn & vbCrLf & strStatus
lblResponse1.Caption = strReturn & vbCrLf & strStatus
Set httpReq = Nothing 
```

捕获表单的asp似乎无法识别表单。它看到一个包含一个项目的表单。asp中的catch代码是：

```
Response.Write Request.Form("hdntype") 
Response.Write "the form object is " & Request.Form.Item(1) & vbCrLf 
```

来自asp的响应是：

```
the form object is "form1"method="post"enctype="multipart/form-data">
<inputname="hdntype"type="hidden"id="hnd1"value="1">
<inputname="hnd1"type="hidden"id="hnd1"value="Nick">
<inputname="hdn2"type="hidden"id="hdn2"value="Arnone">
<inputtype="submit"name="Submit"value="Submit"></form> 
```

它看不到项目 hdntype 或表单中的任何其他项目。它看到 1 个项目，整个表单。

如果我执行 Request.TotalBytes，我可以在 asp 中看到所有内容。如果我添加一个查询字符串对象，我可以看到每个对象。我看不到表单对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-09T21:30:04.787

在 VB6 中，如果您发送这样的数据：

```
strIDJob = "34"
strAuthString = "supertest"

DataToPost = ""
DataToPost = DataToPost & "IDJob=" & strIDJob & "&"
DataToPost = DataToPost & "AUTH=" & strAuthString & "&" 
```

（我使用 CreateObject("Msxml2.XMLHTTP.6.0") 组件将其发送到 ASP 页面）

（使用 POST 发送，仅包含此标头：“application/x-www-form-urlencoded”）

然后，您可以使用下面的代码（在 ASP 中）一一检索每个项目：

```
IDJob = Request.Form.Item(1)   'here is the core point of this post. This is the line that matters
AUTH = Request.Form.Item(2)   'here is the core point of this post. This is the line that matters

response.write "IDJob = " & IDJob & "<BR>"
response.write "AUTH = " & AUTH & "<BR>"
Response.End 
```

asp中的这段代码产生以下返回/输出：

IDJob = 34
AUTH = 超级测试

# .net - VB.NET - 无法构建数据驱动测试

> ID：15643078
> 
> 赞同：0
> 
> 时间：2013-03-26T17:00:57.603
> 
> 标签：.net, vb.net, mstest

我正在尝试在 VB.NET 中编写 MSTest 数据驱动测试。代码非常简单：

```
<TestMethod(), DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "AlgorithmTestData.CSV", "AlgorithmTestData#CSV", DataAccessMethod.Sequential)>
Public Sub ScoreAllData()
    Dim server = New Server.ScoringData

    Dim q1 = Convert.ToByte(TestContext.DataRow(1))
    Dim q2 = Convert.ToByte(TestContext.DataRow(2))
    Dim q3 = Convert.ToByte(TestContext.DataRow(3))
    Dim q4 = Convert.ToByte(TestContext.DataRow(4))
    Dim q5 = Convert.ToByte(TestContext.DataRow(5))
    Dim q6 = Convert.ToByte(TestContext.DataRow(6))
    Dim q7 = Convert.ToByte(TestContext.DataRow(7))
    Dim q8 = Convert.ToByte(TestContext.DataRow(8))
    Dim q9 = Convert.ToByte(TestContext.DataRow(9))
    Dim q10 = Convert.ToByte(TestContext.DataRow(10))
    Dim q11 = Convert.ToByte(TestContext.DataRow(11))
    Dim q12 = Convert.ToByte(TestContext.DataRow(12))

    Dim item = New AlgorithmItem(q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11, q12)
    Dim result = server.Score(item)
    Assert.AreEqual(47.86814688, result)        
End Sub 
```

但是，此代码不会构建。我收到与 TestContext.DataRow 调用有关的以下错误（每个调用一个）

```
Reference to a non-shared member requires an object reference 
```

我见过的每个 C# 示例都使用相同的静态调用。我的项目似乎具有所有正确的导入，包括 System.Data 但这不会构建。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:05:07.997

抱歉，这是在 C# 中，但同样适用于您。在我们的测试类中，我们有以下属性。似乎对我们有用（尽管我不知道是否需要它，或者是否有人只是为了好玩才决定添加它）

```
/// <summary>
///Gets or sets the test context which provides
///information about and functionality for the current test run.
///</summary>
public TestContext TestContext { get; set; } 
```

# maven - 在 JBoss 中部署 maven 应用程序不起作用

> ID：15643080
> 
> 赞同：0
> 
> 时间：2013-03-26T17:01:03.277
> 
> 标签：maven, jboss

我正在开发我的第一个 Maven 应用程序，现在我遇到了这个问题，我执行了以下命令

mvn compile mvn package mvn jboss-as-deploy

部署过程结束没有错误，但在我的 JBOSS_HOME\standalone\deployments 我没有找到 .war

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:09:06.890

尝试设置 targetDir 选项（也许默认值在您的环境中被覆盖？）。请参阅[http://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-mojo.html](http://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-mojo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:26:22.393

该`$JBOSS_HOME/standalone/deployments`目录不是存储部署的位置。如果您查看该目录，则有一个 README 文件解释了该目录的用途。

使用`jboss-as-maven-plugin`部署 API 将内容部署到服务器。这通常以`$JBOSS_HOME/standalone/data/content`独立服务器结束。尽管您真的不应该对该目录中的文件做任何事情。

# jquery - jQuery Cycle，当我添加超时时，过渡效果不起作用

> ID：15643081
> 
> 赞同：0
> 
> 时间：2013-03-26T17:01:05.503
> 
> 标签：jquery, jquery-cycle

请参阅[此参考 URL](http://www.graphictankclients.co.uk/veredor/)以更好地了解我的意思。

当我添加超时以自动转换幻灯片时，jQuery Cycle 插件出现问题，转换效果（在本例中为淡入淡出）停止工作。

这些是我正在使用的选项。

```
$('#slideshow').cycle({ 
fx:     'fade', 
speed:  'normal', 
timeout: 5000, 
}); 
```

如果有人能给我任何想法，那将是一个很大的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:03:37.937

最后一个逗号使代码无效。

利用：

```
$('#slideshow').cycle({ 
fx:     'fade', 
speed:  'normal', 
timeout: 5000
}); 
```

# java - Java：JTable 中的 JComboBox - setSelectedIndex 对 GUI 没有影响

> ID：15643082
> 
> 赞同：0
> 
> 时间：2013-03-26T17:01:07.887
> 
> 标签：java, swing, indexing, jtable, jcombobox

我有一个有两列的 JTable。在第二列中，每一行都有不同的编辑器（JTextField、JComboBox 和 CheckComboBox）。到目前为止这工作正常但是我已经实现了一个重置​​选项，它将整个 JTable 更改回原始状态（重置所有更改）。

我现在面临的问题是，当我以编程方式更改组合框的索引时，`setSelectedIndex`我在 GUI 中看不到任何结果，尽管模型触发了它的更改，`fireTableDataChanged`并且也被`TableModelListener`表中的一个接收到。当我查找更改后的 ComboBox 时，我也得到了正确的索引，但它没有显示在 GUI 中。我也尝试了这些方法`revalidate`，但`updateUI`没有`repaint`任何改变。

问题可能在于它的架构（也许是渲染器？）。这是我的编辑器/渲染器类。

```
class VEachRowEditor implements TableCellEditor, TableCellRenderer {

protected Hashtable<Integer, TableCellEditor> editors;
protected TableCellEditor editor, defaultEditor, renderer;
JTable table;
VEachRowEditorManager rowmanager;

public VEachRowEditor(JTable table, VEachRowEditorManager rowmanager) {
    this.table = table;
    editors = new Hashtable<Integer, TableCellEditor>();
    defaultEditor = new DefaultCellEditor(new JTextField());
    this.rowmanager = rowmanager;
}

public void setEditorAt(int row, TableCellEditor editor) {
    if (editor instanceof DefaultCellEditor)
        ((DefaultCellEditor) editor).setClickCountToStart(1);
    editors.put(new Integer(row), editor);
}

public Component getTableCellEditorComponent(JTable table, Object value,
        boolean isSelected, int row, int column) {
    editor = (TableCellEditor) editors.get(new Integer(row));
    if (editor == null) {
        editor = defaultEditor;
    }
    return editor.getTableCellEditorComponent(table, value, isSelected,
            row, column);
}

public Object getCellEditorValue() {
    return editor.getCellEditorValue();
}

public final boolean stopCellEditing() {
    return editor.stopCellEditing();
}

public void cancelCellEditing() {
    editor.cancelCellEditing();
}

public boolean isCellEditable(EventObject anEvent) {
    selectEditor((MouseEvent) anEvent);
    return editor.isCellEditable(anEvent);
}

public void addCellEditorListener(CellEditorListener l) {
    editor.addCellEditorListener(l);
}

public void removeCellEditorListener(CellEditorListener l) {
    editor.removeCellEditorListener(l);
}

public boolean shouldSelectCell(EventObject anEvent) {
    selectEditor((MouseEvent) anEvent);
    return editor.shouldSelectCell(anEvent);
}

protected void selectEditor(MouseEvent e) {
    int row;
    if (e == null) {
        row = table.getSelectionModel().getAnchorSelectionIndex();
    } else {
        row = table.rowAtPoint(e.getPoint());
    }
    editor = (TableCellEditor) editors.get(new Integer(row));
    if (editor == null) {
        System.out.println(editor);
        editor = defaultEditor;
    }
}

@Override
public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {
    renderer = (TableCellEditor) editors.get(new Integer(row));
    if (renderer == null) {
        renderer = defaultEditor;
    }

    return renderer.getTableCellEditorComponent(table, value, isSelected,
            row, column);
} 
```

}

`getTableCellEditorComponent`错了吗？

`rowmanager`包含所有模型的所有 JComboBoxes 和 CheckComboBoxes 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:24:35.470

> 当我使用 setSelectedIndex 以编程方式更改组合框的索引时，我在 GUI 中看不到任何结果

渲染器和编辑器只显示模型中的数据。不要重置编辑器组件。

重置模型中的数据。即>

```
table.setValueAt(...); // or
table.getModel().setValueAt(...); 
```

# php - PHP生成的表格不显示？

> ID：15643091
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:01:26.607
> 
> 标签：php, html

`php`我正在尝试通过访问数据库从代码中创建一个 html 表，`mysql`但使用该标签显示的是一个空页面。

我将代码删减如下：

```
<html>
<body>
<?php
ini_set('display_errors', 'On');
error_reporting(E_ALL);
echo "<b>Value1</b>";
echo "<table border="1"><tr><td>row 1, cell 1</td></tr></table>";
?>
</html>
</body> 
```

我仍然得到空白页，有人可以指出错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:03:16.507

您需要替换此行：

```
"<table border="1"><tr><td>row 1, cell 1</td></tr></table>" 
```

有了这条线：

```
"<table border='1'><tr><td>row 1, cell 1</td></tr></table>" 
```

您需要转义边界值周围的引号。

此外，当您以错误的顺序关闭它们时，请务必交换`</html>`和舍入，如下所示：`</body>`

```
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:05:35.217

错误在行

```
echo "<table border="1"><tr><td>row 1, cell 1</td></tr></table>"; 
```

由于您将字符串括在双引号中，因此您的语法在 "1..

利用

```
echo "<table border=1><tr><td>row 1, cell 1</td></tr></table>"; 
```

或者

```
echo '<table border="1"><tr><td>row 1, cell 1</td></tr></table>'; 
```

我会更喜欢第二个 .. 因为当您将字符串括在双引号中时，它会查找 php 变量并因此增加解析时间 .... 在您的情况下绝对没有必要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:03:49.367

以下行包含需要转义的引号：

```
echo "<table border="1"><tr><td>row 1, cell 1</td></tr></table>"; 
```

将其更改为：

```
echo "<table border=\"1\"><tr><td>row 1, cell 1</td></tr></table>"; 
```

基本上，发生的事情是当您的代码看到它时`"1"`，它认为您正在离开字符串以输入一些 PHP 代码。因为您接下来没有放置有效的东西（例如`.`or `;`），所以它会引发语法错误。

为了让它意识到你的意思是那些作为实际的语音标记，你需要在它们前面加上一个斜线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:04:18.810

```
<table border="1" 
```

php中打开和关闭的双引号表示回显功能关闭并再次打开。因此，使用单引号将起作用..

```
<table border='1'> 
```

应该管用

# python - Python 2.7 版：XML ElementTree：如何遍历子元素的某些元素以找到匹配项

> ID：15643094
> 
> 赞同：11
> 
> 时间：2013-03-26T17:01:34.433
> 
> 标签：python, xml, elementtree

我是一名编程新手，很少使用 python，所以请耐心等待我尝试解释我正在尝试做的事情:)

我有以下 XML：

```
<?xml version = "1.0" encoding = "utf-8"?>
<Patients>
    <Patient>
               <PatientCharacteristics>
                   <patientCode>3</patientCode>
               </PatientCharacteristics>
               <Visits>
                   <Visit>
                          <DAS>
                               <CRP>14</CRP>
                               <ESR/>
                               <Joints>
                                       <DAS_PROFILE>28/28</DAS_PROFILE>
                                       <SWOL28>20</SWOL28>
                                       <TEN28>20</TEN28>
                               </Joints>
                          </DAS>
                          <VisitDate>2010-02-17</VisitDate>
                   </Visit>
                   <Visit>
                          <DAS>
                               <CRP>10</CRP>
                               <ESR/>
                               <Joints>
                                       <DAS_PROFILE>28/28</DAS_PROFILE>
                                       <SWOL28>15</SWOL28>
                                       <TEN28>20</TEN28>
                               </Joints>
                          </DAS>
                          <VisitDate>2010-02-10</VisitDate>
                   </Visit>
               </Visits>
    </Patient>
    <Patient>
        <PatientCharacteristics>
                   <patientCode>3</patientCode>
        </PatientCharacteristics>
               <Visits>
                   <Visit>
                          <DAS>
                               <CRP>14</CRP>
                               <ESR/>
                               <Joints>
                                       <DAS_PROFILE>28/28</DAS_PROFILE>
                                       <SWOL28>34</SWOL28>
                                       <TEN28>0</TEN28>
                               </Joints>
                          </DAS>
                          <VisitDate>2010-08-17</VisitDate>
                   </Visit>
                   <Visit>
                          <DAS>
                               <CRP>10</CRP>
                               <ESR/>
                               <Joints>
                                       <DAS_PROFILE>28/28</DAS_PROFILE>
                                       <SWOL28></SWOL28>
                                       <TEN28>2</TEN28>
                               </Joints>
                          </DAS>
                          <VisitDate>2010-07-10</VisitDate>
                   </Visit>
                   <Visit>
                          <DAS>
                               <CRP>9</CRP>
                               <ESR/>
                               <Joints>
                                       <DAS_PROFILE>28/28</DAS_PROFILE>
                                       <SWOL28>56</SWOL28>
                                       <TEN28>6</TEN28>
                               </Joints>
                          </DAS>
                          <VisitDate>2009-07-10</VisitDate>
                   </Visit>
               </Visits>

    </Patient>
</Patients> 
```

我在这里要做的就是更新某些“SWOL28”值，如果它们与我存储在文本文件中的 PatientCode 和 VisitDate 匹配。据我了解， elementtree 不包含父引用，就好像它包含一样，我可以从根目录使用 findall() 并从那里向后工作。就目前而言，这是我的伪代码：

1.  对于文本文件中的每一行：
2.  将 Visit_Date Patient_Code New_SWOL28 放入变量中
3.  对于每个患者元素：
4.  如果患者代码 = Patient_Code
5.  对于每个访问元素：
6.  如果 VisitDate = Visit_Date
7.  如果此访问存在 SWOL28 元素
8.  将 SWOL28 更新为 New_SWOL28

但我被困在第 5 步。如何获得要迭代的访问列表？如果这是一个非常愚蠢的问题，我深表歉意，但我已经从高处和低处寻找答案，我向你保证！我已将我的代码精简为我需要在下面修复的部分的简单示例：

```
import xml.etree.ElementTree as ET
tree = ET.parse('DB3.xml')
root = tree.getroot()
for child in root: # THIS GETS ME ALL THE PATIENT ATTRIBUTES
    print child.tag 
    for x in child/Visit: # THIS IS WHAT I CANNOT FIND THE CORRECT SYNTAX FOR
        # I WOULD THEN PERFORM STEPS 6, 7 AND 8 HERE 
```

我将非常感谢你们中的任何人对此可能有的任何想法。我肯定不是天生的编程者！

在此先感谢，莎拉

**编辑1：**

根据下面 SVK 的建议，我尝试了以下方法：

```
import xml.etree.ElementTree as ET
tree = ET.parse('Untitled.xml')
root = tree.getroot()
for child in root:
    print child.tag 
    child.find( "visits" )
    for x in child.iter("visit"):
        print x.tag, x.text 
```

但我得到的唯一输出是：Patient Patient 并且没有较低的标签。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:04:33.873

您可以直接在元素“元素”下遍历所有“访问”标签，如下所示：

```
for x in element.iter("visit"): 
```

您可以找到与某个标签匹配的元素的第一个直接子元素：

```
element.find( "visits" ) 
```

看起来您首先必须找到“visit”元素，它是“visit”的父元素，然后遍历它的“visit”子元素。把它们放在一起你会得到这样的东西：

```
for patient_element in root:
    print patient_element.tag 
    visits_element = patient_element.find( "visits" )
    for visit_element in visits_element.iter("visit"):
        print visit_element.tag, visit_element.text
        # ... further processing of each visit element here 
```

一般来说，请查看 xml.etree.ElementTree 文档中的“查找有趣元素”部分：http: [//docs.python.org/2/library/xml.etree.elementtree.html#finding-interesting-elements](http://docs.python.org/2/library/xml.etree.elementtree.html#finding-interesting-elements)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T17:28:06.460

这是未经测试的，它应该与您想要的非常接近。

```
for patient in root:
    patient_code =  patient.find('PatientCharacteristics').find('patientCode')
    if patient_code.text == code:
            for visit in patient.find('Visits'):
                    visit_date = visit.find('VisitDate')
                    if visit_date.text == date:
                        swol28 = visit.find('DAS').find('Joints').find('SWOL28')
                        if swol28.text:
                            visit.find('DAS').find('Joints').set('SWOL28', new_swol28) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:39:01.127

如果使用`lxml.etree`，可以使用`xpath`来查找需要更新的元素。

例如

```
doc.xpath('Patient[PatientCharacteristics/patientCode=$patient]/Visits/Visit[VisitDate=$visit]',patient="3",visit="2009-07-10") 
```

所以

```
from lxml import etree

doc = etree.parse("DB3.xml")

changes = [
  dict(patient='3',visit='2010-08-17',swol28="99"),
]

def update_doc(x,d):
  for row in d:
    for visit in x.xpath('Patient[PatientCharacteristics/patientCode=$patient]/Visits/Visit[VisitDate=$visit]',**row):
      for swol28 in visit.xpath('DAS/Joints/SWOL28'):
        swol28.text = row['swol28']

update_doc(doc,changes)

print etree.tostring(doc) 
```

应该为您提供包含以下内容的内容：

```
<Patient>
  <PatientCharacteristics>
    <patientCode>3</patientCode>
  </PatientCharacteristics>
  <Visits>
    <Visit>
      <DAS>
      <CRP>14</CRP>
      <ESR/>
      <Joints>
        <DAS_PROFILE>28/28</DAS_PROFILE>
        <SWOL28>99</SWOL28>
        <TEN28>0</TEN28>
      </Joints>
    </DAS>
    <VisitDate>2010-08-17</VisitDate>
    </Visit>
  </Visits>
</Patient> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:09:23.133

您可以使用 CssSelector 从 Patient 元素中获取所需的节点：

```
from lxml.cssselect import CSSSelector
visitSelector = CSSSelector('Visit')
visits =  visitSelector(child) 
```

您可以执行相同的操作来获取 PatientCode 标签和 SWOL28 标签，然后您可以使用访问和修改元素的文本`element.text`

# facebook - 是否可以通过在帖子中标记它来与 Facebook 应用程序进行通信？

> ID：15643095
> 
> 赞同：0
> 
> 时间：2013-03-26T17:01:34.810
> 
> 标签：facebook, tags, comments

我一直在尝试找到一种从我的应用程序用户那里接收命令的方法，但一直找不到。理想情况下，我希望用户能够在帖子或评论中标记应用程序或页面，获得通知并处理命令。但是，似乎没有一种方法可以检索应用程序的标签，而且无论我为页面尝试什么，“标签”连接始终为空（但确实为我的测试用户帐户返回数据）。

有没有办法做到这一点？即使有`read_stream`权限，我也只能看到我的用户发表的帖子，但我看不到他们朋友页面上留下的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:22:21.343

这是无法通过 api 通知实现的。您将不得不处理消息的正文并使用一些正则表达式查找标签和命令

例如，Hubot 在 IRC 和 Twitter 中执行此操作。

[https://github.com/MathildeLemee/hubot-twitter/blob/master/src/twitter.coffee](https://github.com/MathildeLemee/hubot-twitter/blob/master/src/twitter.coffee)

# android - 许多 Imageview 的 OnClickListener 仅更改最后一个 imageview

> ID：15643099
> 
> 赞同：0
> 
> 时间：2013-03-26T17:01:47.857
> 
> 标签：android, android-imageview

我正在尝试根据游戏难度创建动态数量的图像视图。我动态创建所需的图像视图数量，并使用`onclick`侦听器将它们设置为可点击。我的问题是，无论我点击什么图像视图，它只会改变最后一张图像。有什么方法可以让`onclick`听众知道我正在点击什么图像视图并让它改变那个特定的视图？

```
public class MainActivity extends Activity {

private static int ROWS;
private static int COLUMNS;

private int gameDifficulty;
private Drawable backCard;
private RelativeLayout mainView;
private ImageView iView;
private LinearLayout layout;

private ClickListener clickListener = new ClickListener();

private ArrayList<Drawable> cards = new ArrayList<Drawable>();

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);

    LoadImages();

    mainView = (RelativeLayout)findViewById(R.id.mainView);

    Button easy = (Button) findViewById(R.id.button1);
    easy.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) {
            gameDifficulty = 1;
             StartGame();

        }
    });

    Button normal = (Button) findViewById(R.id.button2);
    normal.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) {
            gameDifficulty = 2;
             StartGame();

        }
    });

    Button hard = (Button) findViewById(R.id.button3);
    hard.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) {
            gameDifficulty = 3;
             StartGame();

        }
    });        
}

public void LoadImages()
{
    backCard = getResources().getDrawable(R.drawable.star);

    cards.add(getResources().getDrawable(R.drawable.test1));
    cards.add(getResources().getDrawable(R.drawable.test2));
    cards.add(getResources().getDrawable(R.drawable.test3));
    cards.add(getResources().getDrawable(R.drawable.test4));
    cards.add(getResources().getDrawable(R.drawable.test5));
    cards.add(getResources().getDrawable(R.drawable.test6));
}

public void StartGame()
{
    mainView.removeView(findViewById(R.id.button1));
    mainView.removeView(findViewById(R.id.button2));
    mainView.removeView(findViewById(R.id.button3));

    if (gameDifficulty == 1)
    {
        ROWS = 4;
        COLUMNS = 2;
        CreateCard(ROWS, COLUMNS);
        System.out.println("Creating card");

    } 

    if (gameDifficulty == 2)
    {
        ROWS = 4;
        COLUMNS = 3;
        CreateCard(ROWS, COLUMNS);

    } 

    if (gameDifficulty == 3)
    {
        ROWS = 4;
        COLUMNS = 4;
        CreateCard(ROWS, COLUMNS);

    } 

}

public void CreateCard(int rows, int columns)
{

    //Amount of stars going down
    for (int x = 0; x < columns; x++) 
    {           
        LinearLayout row = new LinearLayout(this);
        row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        //Number of rows
        for (int y = 0; y < rows; y++)
        {
            iView = new ImageView(this);
            iView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            iView.setBackgroundDrawable(backCard);
            iView.setId(y + 1 + (x * 4));
            iView.setClickable(true);
            iView.setOnClickListener(clickListener);            
            row.addView(iView);             
        }

         layout.addView(row);
         setContentView(layout);
    }       

}

class ClickListener implements OnClickListener
{

    @Override
    public void onClick(View v) 
    {
        System.out.println("Clicking card");
        System.out.println(iView.getId());
        iView.setBackgroundDrawable(cards.get(2));          
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:05:46.073

在侦听器中尝试使用 v.getId () 而不是 iView.getId ()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:05:24.723

使用传递给的变量`onClick()`：

```
public void onClick(View v) 
{
    ImageView i = (ImageView) v;
    System.out.println("Clicking card");
    System.out.println(i.getId());
    i.setBackgroundDrawable(cards.get(2));          
} 
```

问题是 onClickListener 内的代码在单击视图时运行，而不是在循环执行时运行，因此`iView`引用循环中的最后一个值......

# java - 在 xpath 中返回节点本身的类型

> ID：15643106
> 
> 赞同：0
> 
> 时间：2013-03-26T17:02:12.697
> 
> 标签：java, xpath, cfml

具有以下xml

```
<xml>
 <property href="abc">b</property>
 <element attr="def">k</element>
</xml> 
```

如何使以下 xpath 逐字返回`element`。

```
*[@attr='def'] 
```

就其本身而言，这似乎是一件奇怪的事情，但是使用上面的 xpath 我找不到节点类型本身（只有属性和子节点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:16:12.233

如果您想要元素节点的名称，请使用`name(*[@attr = 'def'])`或`local-name(*[@attr = 'def'])`。

# r - 在 LatLong 中工作时，gridDistance 是否计算大地距离？（R中的光栅包）

> ID：15643107
> 
> 赞同：2
> 
> 时间：2013-03-26T17:02:21.127
> 
> 标签：r, distance, raster

R（光栅包）中的 gridDistance 函数生成具有给定值的单元格的距离图。该函数以当前投影的单位给出距离，如果在 LatLong 中工作，则以米为单位。我想知道使用 LatLong 距离是否被“校正”（大地测量）。否则我可能需要重新投影到等距投影。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:03:07.557

调查真正优秀的`raster`软件包的来源，看起来你的直觉是正确的......

```
# From gridDistance() when lonlat is true
if (lonlat) {
    distance <- pointDistance(

# From pointDistance()
if (! longlat ) {
    return( .planedist(p1[,1], p1[,2], p2[,1], p2[,2]) )
} else { 
    return( .haversine(p1[,1], p1[,2], p2[,1], p2[,2], r=6378137) )
}

# Finally from .haversine()
.haversine <- function(x1, y1, x2, y2, r=6378137) {
adj <- pi / 180
x1 <- x1 * adj
y1 <- y1 * adj
x2 <- x2 * adj
y2 <- y2 * adj
x <- sqrt((cos(y2) * sin(x1-x2))^2 + (cos(y1) * sin(y2) - sin(y1) * cos(y2) * cos(x1-x2))^2)
y <- sin(y1) * sin(y2) + cos(y1) * cos(y2) * cos(x1-x2)
return ( r * atan2(x, y) )
} 
```

所以简而言之，是的，你得到了超精确的大地距离。

# javascript - 即使我已经包含并绑定了它，stretch.js 似乎也无法正常工作

> ID：15643112
> 
> 赞同：0
> 
> 时间：2013-03-26T17:02:32.370
> 
> 标签：javascript, stroll.js

当用户滚动浏览它时，我正在使用 walk.js 将 CSS 转换添加到一个长列表中。

[这是 github 上的链接。](https://github.com/hakimel/stroll.js)

我包含了 walk.js 文件，将其绑定到列表中，并将效果类型的类添加到列表中，但它似乎不起作用。

我将不胜感激任何帮助使其正常工作。

这是一个无法正常工作的页面的实时示例：[https ://dl.dropbox.com/u/270523/help/stroll/index.html](https://dl.dropbox.com/u/270523/help/stroll/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:41:02.060

您应该添加带有转换的 css [http://lab.hakim.se/scroll-effects/css/stroll.css](http://lab.hakim.se/scroll-effects/css/stroll.css) + 来自此要点的样式：[https ://gist.github.com/a-ignatov-parc/5252292](https://gist.github.com/a-ignatov-parc/5252292)

# c# - LINQ 中的 if 语句（如果没有值做某事......）

> ID：15643114
> 
> 赞同：0
> 
> 时间：2013-03-26T17:02:35.090
> 
> 标签：c#, linq, linq-to-xml

我正在尝试制作一个显示公交时间的应用程序，包括公交号码、目标时间和预期时间。

我从`HttpWebRequest`. 我对请求的响应存储在 XML 格式的字符串变量中。

我可以得到我想要的所有信息；比如公交时间、目标时间和预期时间。

问题是，如果没有预期时间，则不会显示任何内容。我喜欢在没有预期时间的情况下，我的代码只采用与目标时间相同的值：

一个例子

```
Bus | Aimed | Execepted
-----------------------
1   | 17:05 | 17:07
2   | 17:05 | <nothing> so take value of aimed -> 17:05 
```

我已经有以下代码

```
//XMLResponse put in documentRoot
//responseFromServer is a string variable in XML format with all the information
XElement documentRoot = XDocument.Parse(responseFromServer).Root;
XNamespace ns = "http://www.siri.org.uk/";

var buses = (from tblBuses in documentRoot.Descendants(ns + "PublishedLineName")
             select tblBuses.Value).ToList();
var expHours = (from tblHours in documentRoot.Descendants(ns + "ExpectedDepartureTime")
               select tblHours.Value).ToList();

foreach (var bus in buses)
{
    string output = bus.Substring(bus.IndexOf('T') + 1);
    int index = output.IndexOf(".");

    if (index > 0)
        output = output.Substring(0, index);

    listBox1.Items.Add("Bus: " + output);
}

//Show every ExpectedDepartureTime
//If there is no expectedTime take value AimedDepartureTime
foreach (var expH in expHours)
{
    string output = expH.Substring(expH.IndexOf('T') + 1);
    int index = output.IndexOf(".");

    if (index > 0)
        output = output.Substring(0, index);

    lstHours.Items.Add(output);
} 
```

为了更清楚地了解我的 XML 响应，下面是我的 XML 响应示例（一个带有 AimedDeparturetime 和 Expected，一个没有 Expected）

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Siri version="1.0" xmlns="http://www.siri.org.uk/">
<ServiceDelivery>
<ResponseTimestamp>2013-03-26T16:09:48.181Z</ResponseTimestamp>
<StopMonitoringDelivery version="1.0">
<ResponseTimestamp>2013-03-26T16:09:48.181Z</ResponseTimestamp>
<RequestMessageRef>12345</RequestMessageRef>

<MonitoredStopVisit>
<RecordedAtTime>2013-03-26T16:09:48.181Z</RecordedAtTime>
<MonitoringRef>020035811</MonitoringRef>
<MonitoredVehicleJourney>
<FramedVehicleJourneyRef>
<DataFrameRef>-</DataFrameRef>
<DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
</FramedVehicleJourneyRef>
<VehicleMode>bus</VehicleMode>
<PublishedLineName>2</PublishedLineName>
<DirectionName>Elstow P+R</DirectionName>
<OperatorRef>STB</OperatorRef>
<MonitoredCall>
<AimedDepartureTime>2013-03-26T16:11:00.000Z</AimedDepartureTime>
<ExpectedDepartureTime>2013-03-26T16:11:28.000Z</ExpectedDepartureTime>
</MonitoredCall>
</MonitoredVehicleJourney>
</MonitoredStopVisit>
---------------------------------------------------

<MonitoredStopVisit>
<RecordedAtTime>2013-03-26T16:09:48.181Z</RecordedAtTime>
<MonitoringRef>020035811</MonitoringRef>
<MonitoredVehicleJourney>
<FramedVehicleJourneyRef>
<DataFrameRef>-</DataFrameRef>
<DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
</FramedVehicleJourneyRef>
<VehicleMode>bus</VehicleMode>
<PublishedLineName>53</PublishedLineName>
<DirectionName>Wootton</DirectionName>
<OperatorRef>STB</OperatorRef>
<MonitoredCall>
<AimedDepartureTime>2013-03-26T16:19:00.000Z</AimedDepartureTime>
</MonitoredCall>
</MonitoredVehicleJourney>
</MonitoredStopVisit>
</StopMonitoringDelivery>
</ServiceDelivery>
</Siri> 
```

所以此刻我的应用程序并没有显示公共汽车的每个出发时间。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:49:48.670

Apologies upfront, because this is not the greatest XML parsing ever, but I would adjust my LINQ query:

```
var buses = from tblBuses in documentRoot.Descendants(ns + "MonitoredVehicleJourney")
            select new
                   {
                       LineName = tblBuses.Descendants(ns + "PublishedLineName").Single().Value,
                       AimedHours = tblBuses.Descendants(ns + "AimedDepartureTime").Single().Value,
                       ExpectedHours = tblBuses.Descendants(ns + "ExpectedDepartureTime").Select(el => el.Value).SingleOrDefault()
                   }; 
```

This will create an `IEnumerable` of some anonymous type which allows you to access the bus data more easily in subsequent code:

```
foreach (var bus in buses)
{
    // Take ExpectedHours, or AimedHours if the first is null
    string expH = bus.ExpectedHours ?? bus.AimedHours

    // Same code as before here
    string output = expH.Substring(expH.IndexOf('T') + 1);
    int index = output.IndexOf(".");
    if (index > 0)
        output = output.Substring(0, index);
    lstHours.Items.Add(output);
} 
```

In your original code, buses that did not have an `<ExpectedDepartureTime>` were never iterated over because they never show up in your `expHours` List. In contrast, this LINQ query will contain all buses. It assumes that they all have a single `<AimedDepartureTime>` and an optional `<ExpectedDepartureTime>`.

For the expected departure time, I used a `Select` to get the element value for each of the descendants. Using `SingleOrDefault().Value` cannot be used, because the query might yield no elements and `get_Value()` would be called on a `null` reference.

One last comment about my query: for production code I would refrain from using `Descendants` and do more strict querying of the XML structure.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:10:59.227

您可以在一个 linq 查询中执行所有操作，并使用`?:`条件运算符选择正确的输出：

```
var buses = 
    (from tblBuses in documentRoot.Descendants(ns + "PublishedLineName")
     let bus = tblBuses.Value
     let output = bus.Substring(bus.IndexOf('T') + 1)
     let index = output.IndexOf(".")
     select (index > 0) ? output.Substring(0, index) : output);

foreach (var bus in buses)
{
    listBox1.Items.Add("Bus: " + bus);
} 
```

甚至

```
var buses =
    (from ...
     select "Bus: " + ((index > 0) ? output.Substring(0, index) : output));
    .ToArray();

listBox1.Items.AddRange(buses); 
```

相同的模式可以应用于`expHours`.

# string - 如何在matlab中用字符串动态填充矩阵？

> ID：15643119
> 
> 赞同：0
> 
> 时间：2013-03-26T17:02:58.060
> 
> 标签：string, matlab, matrix, matlab-uitable

我想通过 打印一个表格`uitable`，表格条目的数据存储在一个名为`plot`. 每个条目都应该是一个字符串，由 2 个字符组成，即`p0`, `u1`... 矩阵应该填充在两个嵌套的 for 循环中。

但是每当我想将字符串存储为元素时。即`plot(i,j)='a1'`我得到错误

```
"??? Assignment has more non-singleton rhs dimensions than non-singleton subscripts" 
```

另一方面，当我在开始时完全初始化矩阵时，即

```
plot=['aa' 'ab';'ba' 'bb'] 
```

它似乎工作得很好。

我将非常感谢有关该问题的任何想法。有什么方法可以解决单元阵列的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:06:53.880

要存储字符串，请使用元胞数组。另外，不要调用你的 matrix `plot`，这是内置函数的名称。例如：

```
plotData{1,2} = 'hello';
plotData{1,1} = 'hi'; 
```

要访问元胞数组中的项目：

```
plotData{1,1}
ans = hi 
```

# r - 在 R 中创建预填充分配表

> ID：15643122
> 
> 赞同：2
> 
> 时间：2013-03-26T17:02:59.553
> 
> 标签：r

~~~~~~~~~ 更新 - 谢谢！我应该在我原来的问题中更具体。我正在尝试创建一个分配表以在投资组合优化程序中使用。因此，列将是证券，每一行是不同的分配。每行必须加起来 1（或 100%），我希望能够指定增量。例如，如果有三只证券，我希望增量为 1%，那么第一行可能是 98%、1%、1%。下一行可能是 97%、1%、2% 等等。最后，我将有一个大表，其中包含每个可能的分配组合（基于指定的时间间隔）。这有帮助吗？~~~~~~

我正在寻找在 R 中创建一个分配表，但我碰壁了。我已经在多本书籍和网站中研究过这个问题，但似乎找不到直接的方法。

在最基本的形式中，我希望生成一个类似于下面的表格。

假设只有三个变量，每行加起来必须为 1。

```
 v1   v2   v3 v1...v2...v3
1 0.25 0.25 0.50            1
2 0.25 0.50 0.25            1
3 0.50 0.25 0.25            1
4 0.75 0.25 0.00            1
5 0.75 0.00 0.25            1
6 1.00 0.00 0.00            1
7 0.50 0.25 0.25            1
8 0.25 0.25 0.50            1 
```

理想情况下，我想返回一个矩阵。到目前为止，我没有运气使用 R 来做到这一点。谁能帮我吗？我什至不知道从哪里开始。

非常感谢，

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:56:12.407

### 根据评论更新答案

听起来您正在寻找的是一种生成排列的方法。在这种情况下，请尝试`permutations`使用“gtools”包。首先，生成*所有*排列，然后仅选择行总和为 100 的排列。

```
> ## install.packages(gtools)
> library(gtools)
> x <- permutations(101, 3, 0:100, repeats.allowed=TRUE)
> y <- x[rowSums(x) == 100, ]
> head(y)
     [,1] [,2] [,3]
[1,]    0    0  100
[2,]    0    1   99
[3,]    0    2   98
[4,]    0    3   97
[5,]    0    4   96
[6,]    0    5   95
> tail(y)
        [,1] [,2] [,3]
[5146,]   98    0    2
[5147,]   98    1    1
[5148,]   98    2    0
[5149,]   99    0    1
[5150,]   99    1    0
[5151,]  100    0    0 
```

### 原始答案

希望我没有过于简单化，但也许你可以尝试这样的事情。您没有指定是否应包含负数。我假设不是。

创建一个使用 R 的随机数生成器之一的小函数。我`runif`在我的功能中使用过。函数参数包括您想要的列数（我已将默认值设置为 3）、最小值和最大值。

```
myFun <- function(n = 3, min = 0, max = 1) {
  temp <- runif(n = n, min = min, max = max)
  temp/sum(temp)
} 
```

用于`replicate`获取所需的*行*数。在这里，我说过做 5 行。

```
set.seed(1)
y <- t(replicate(5, myFun()))
y
#           [,1]      [,2]      [,3]
# [1,] 0.2193406 0.3074170 0.4732425
# [2,] 0.4522318 0.1004252 0.4473430
# [3,] 0.4227516 0.2957136 0.2815348
# [4,] 0.1390588 0.4635751 0.3973661
# [5,] 0.3731857 0.2086423 0.4181721 
```

验证每一行是否确实加起来为 1：

```
rowSums(y)
# [1] 1 1 1 1 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:55:32.653

确定性方法：

如果您想要`n`非负变量中的所有可能组合，总和为 1 并将区间等分，您可以使用以下代码`[0,1]`：`s`

`n`首先是一个函数，它给出总和为 的整数的排列`s`：

```
perms <- function(n, s)
{
    if(n==1) return(matrix(s,nrow=1,ncol=1))

    do.call(rbind, lapply(0:s, function(i) cbind(perms(n-1, s-i), i, deparse.level=0)))
} 
```

现在定义列数和“剪切”数，并重新缩放：

```
> perms(3,4)/4
      [,1] [,2] [,3]
 [1,] 1.00 0.00 0.00
 [2,] 0.75 0.25 0.00
 [3,] 0.50 0.50 0.00
 [4,] 0.25 0.75 0.00
 [5,] 0.00 1.00 0.00
 [6,] 0.75 0.00 0.25
 [7,] 0.50 0.25 0.25
 [8,] 0.25 0.50 0.25
 [9,] 0.00 0.75 0.25
[10,] 0.50 0.00 0.50
[11,] 0.25 0.25 0.50
[12,] 0.00 0.50 0.50
[13,] 0.25 0.00 0.75
[14,] 0.00 0.25 0.75
[15,] 0.00 0.00 1.00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:36:37.993

只是一个想法，但是...

您希望如何确定每列的值并不完全清楚。`seq(0, 1, .25)`从您的样本中猜测，只要行加起来，这些值似乎是随机抽样`1`

```
set.seed(222)
vals <- seq(0, 1, .25)

TotalRows <- 12
TotalCols <- 3
Lim       <- 1

# First Column
myDF <- data.frame(sample(vals, TotalRows, TRUE))

# Each next column, except last
for (i in 2:(TotalCols-1))
    myDF[, i] <- apply(myDF, 1, function(x) sample(vals[vals + sum(x) <= Lim], 1))

# Last column is difference from Lim (ie, from 1)
myDF[, TotalCols] <- apply(myDF, 1, function(x) Lim - sum(x) )

# Set Colnames if needed
colnames(myDF) <- paste0("Col", 1:TotalCols)

# Total Column if needed
myDF[, "TOTAL"] <- apply(myDF, 1, sum)

myDF

 #     Col1 Col2 Col3 TOTAL
 #  1  1.00 0.00 0.00     1
 #  2  0.00 0.75 0.25     1
 #  3  0.50 0.50 0.00     1
 #  4  0.00 0.00 1.00     1
 #  5  1.00 0.00 0.00     1
 #  6  1.00 0.00 0.00     1
 #  7  0.25 0.00 0.75     1
 #  8  0.50 0.00 0.50     1
 #  9  0.50 0.50 0.00     1
 #  10 0.00 0.25 0.75     1
 #  11 0.50 0.00 0.50     1
 #  12 0.00 0.50 0.50     1 
```

* * *

作为一个不错的功能：

```
# example call:
creatTable(TotalRows=12, TotalCols=8)

# definition:
creatTable <- function(TotalRows, TotalCols, Lim=1, vals=seq(0, 1, .25), columnPrfx="Col")  {
  myDF <- data.frame(sample(vals, TotalRows, TRUE))
  for (i in 2:(TotalCols-1))
      myDF[, i] <- apply(myDF, 1, function(x) sample(vals[vals + sum(x) <= Lim], 1))
  myDF[, TotalCols] <- apply(myDF, 1, function(x) Lim - sum(x) )
  colnames(myDF) <- paste0(columnPrfx, 1:TotalCols)
  myDF[, "TOTAL"] <- apply(myDF, 1, sum)
} 
```

# javascript - 使用 jQuery 不区分大小写搜索表行

> ID：15643126
> 
> 赞同：0
> 
> 时间：2013-03-26T17:03:10.687
> 
> 标签：javascript, php, jquery, html-table

我正在尝试这个漂亮的小 jQuery 脚本来搜索这里找到的表：

[使用 jQuery 搜索表格行](http://www.edpriceishungry.com/2011/03/01/searching-table-rows-with-jquery/)

它工作得很好，但是我不希望它区分大小写，例如，如果我的表中的值是值一，我希望能够搜索值一或值一并且仍然得到正确的结果。

这是控制它的 Jquery：

```
<script>
$(document).ready(function(){
$('input[name="search"]').keyup(function(){
  var searchterm = $(this).val();
  if(searchterm.length > 3) {
   var match = $('tr.data-row:contains("' + searchterm + '")');
   var nomatch = $('tr.data-row:not(:contains("' + searchterm + '"))');
   match.addClass('selected');
   nomatch.css("display", "none");
  } else {
   $('tr.data-row').css("display", "");
   $('tr.data-row').removeClass('selected');
  }
});
});
</script> 
```

谁能帮我使它不区分大小写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:11:27.537

您可以使用 toLowerCase() 方法将两个字符串都转换为小写。

它应该看起来像这样：

```
$(document).ready(function(){
$('input[name="search"]').keyup(function(){
  var searchterm = $(this).val();
  searchterm=searchterm.toLowerCase();  
  if(searchterm.length > 3) {
   var match = $('tr.data-row:contains("' + searchterm + '")');
   var nomatch = $('tr.data-row:not(:contains("' + searchterm + '"))');
   match.addClass('selected');
   nomatch.css("display", "none");
  } else {
   $('tr.data-row').css("display", "");
   $('tr.data-row').removeClass('selected');
  }
});
}); 
```

你也需要重写 jQuery 方法！看起来像这样的东西...

```
$.expr[":"].contains = $.expr.createPseudo(function(arg) {
    return function( elem ) {
        return $(elem).text().toLowerCase().indexOf(arg.toLowerCase()) >= 0;
    };
}); 
```

这很简单，你所做的就是在比较它们之前强制两个字符串都是小写的。这样你就可以跳过不同的案例问题。

希望这有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T17:11:01.580

最好的办法可能是编写自己的选择器表达式，如下所示：

```
$.expr[":"].containsCI = $.expr.createPseudo(function(arg) {
    return function( elem ) {
        return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T17:06:54.260

您可以在此处找到解决方案：[链接](http://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/)，这将覆盖原始的“:contains”选择器

```
$.expr[":"].contains = $.expr.createPseudo(function(arg) {
return function( elem ) {
    return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
};
}); 
```

# perl - Perl LWP Curl 错误：“SSL 对等证书不正确”

> ID：15643130
> 
> 赞同：0
> 
> 时间：2013-03-26T17:03:18.817
> 
> 标签：perl, curl, lwp

这是我的代码：

```
my $lwpcurl = LWP::Curl->new(CURLOPT_SSL_VERIFYHOST => 0,CURLOPT_SSL_VERIFYPEER=>0);
my $content;
$content = $lwpcurl->get($url); 
```

我收到此错误：

```
`SSL peer certificate was not ok` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:59:56.100

[LWP::Curl](http://cpan.me/LWP%3a%3aCurl)的构造函数不接受`CURLOPT_SSL_VERIFYHOST`/`CURLOPT_SSL_VERIFYPEER`参数！

使用[LWP::Protocol::Net::Curl](http://cpan.me/LWP%3a%3aProtocol%3a%3aNet%3a%3aCurl)代替：

```
use LWP::Protocol::Net::Curl ssl_verifyhost => 0, ssl_verifypeer => 0;
use LWP::UserAgent;

my $ua = LWP::UserAgent->new;
my $content = $ua->get($url); 
```

注意 LWP::Protocol::Net::Curl 改变了默认的 LWP::UserAgent 行为，所以你仍然使用`$ua = LWP::UserAgent->new`, 而它在`libcurl`内部使用。

# gcc - 如何使'gcc -E'在#error上停止

> ID：15643131
> 
> 赞同：0
> 
> 时间：2013-03-26T17:03:19.480
> 
> 标签：gcc, c-preprocessor

有没有办法让 GCC 的预处理器在发现 #error 时停止，当使用 option 运行它时`-E`？

例如，在以下程序中：

```
#error 在这里停止
int main() {
  返回0；
}

```

在此程序上运行`gcc`会导致第 1 行的编译中断，但运行`gcc -E`会输出同一行，然后继续进行预处理。

注意：我的问题类似于[GCC #pragma to stop compilation](https://stackoverflow.com/questions/2124968/gcc-pragma-to-stop-compilation)，但是关于`-E`标志，所以也许两者都应该合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:37:16.303

最简洁的答案是不。处理器指令（例如 #error ）用于向编译器发出命令。通过使用 -E 选项，编译器永远不会运行，因此它没有理由停止。-E 标志旨在打印所有与您的程序一起编译的代码，而无需实际编译。

# java - Android HttpURLConnection PUT 到 Amazon AWS S3 403 错误

> ID：15643135
> 
> 赞同：4
> 
> 时间：2013-03-26T17:03:31.810
> 
> 标签：java, android, amazon-s3, httpurlconnection, put

使用具有签名、过期和访问密钥的预签名 URL 将文件上传到 Amazon S3，使用以下代码我可以使用普通 java 代码上传文件，但 Android 中的相同代码给我 403 错误。使用 Amazon SDK 生成预签名 URL

我已阅读[http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html) 和[http://android-developers.blogspot.com/2011/09/androids-http-clients.html](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)但无法阅读弄清楚我应该使用什么标头参数，我猜在 android 中它是在服务器拒绝的请求中设置标头

```
 HttpURLConnection connection=(HttpURLConnection) url.openConnection();
    connection.setDoOutput(true);
    connection.setRequestMethod("PUT"); 
    OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());
    out.write("This text uploaded as object.");
    out.close();
    int responseCode = connection.getResponseCode(); 
```

例外：403；签名不匹配：-o

有没有人遇到过这个问题？或者更多的细节是从 android 库在幕后添加了哪些 Header-parameters？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-07T11:40:51.710

请像这样设置您的内容类型：

```
connection.setRequestProperty("Content-Type"," "); 
```

因为 HttpsUrlConnection 的默认自动生成内容类型为：

```
"Content-Type: application/x-www-form-urlencoded" 
```

这将导致签名不匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:24:06.600

所以经过一些试验/错误/搜索后发现了问题：

在创建预签名 URL 时，指定 Content-Type（基于您的数据）很重要，否则您将不断收到 403 Signature don't match，您在此处指定的 contentType 应在 HttpURLConnection 连接对象中提及

```
 string s3url = s3Client.GetPreSignedURL(new GetPreSignedUrlRequest()
                   .WithBucketName(bucketName)
                   .WithKey(keyName)
                   .WithContentType("application/octet-stream") // IMPORTANT
                   .WithVerb(HttpVerb.PUT)
                   .WithExpires(<YOUR EXPIRATION TIME>); 
```

在您的连接内..在（“PUT”）之后将其添加到有问题的代码中

```
 connection.setFixedLengthStreamingMode(< YOUR DATA.LENGTH ?>);        
    connection.setRequestProperty("Content-Type","application/octet-stream"); 
```

检查这个[错误](https://forums.aws.amazon.com/thread.jspa?messageID=435180)，最新的 SDK 应该让你设置 Content-Type

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-28T09:38:48.250

URL的生成方式：

```
private static URL generateRUL(String objectKey, String ACCESS_KEY, String SECRET_KEY, String BUCKET_NAME) {
    AmazonS3 s3Client = new AmazonS3Client(new BasicAWSCredentials(ACCESS_KEY, SECRET_KEY));
    URL url = null;

    try {
        GeneratePresignedUrlRequest request  = new GeneratePresignedUrlRequest(BUCKET_NAME, objectKey);
        request.setMethod(com.amazonaws.HttpMethod.PUT);
        request.setExpiration(new Date( System.currentTimeMillis() + (60 * 60 * 1000)));

        // Very important ! It won't work without adding this! 
        // And request.addRequestParameter("Content-Type", "application/octet-stream") won't work neither
        request.setContentType("application/octet-stream");

        url = s3Client.generatePresignedUrl(request ); 
    } catch (AmazonServiceException exception) { 
    } catch (AmazonClientException ace) { }

    return url;
} 
```

上传文件的方式：

```
public int upload(byte[] fileBytes, URL url) {
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setDoOutput(true);
    connection.setRequestMethod("PUT");
    connection.setRequestProperty("Content-Type", "application/octet-stream"); // Very important ! It won't work without adding this!
    OutputStream output = connection.getOutputStream();

    InputStream input = new ByteArrayInputStream(fileBytes);
    byte[] buffer = new byte[4096];
    int length;
    while ((length = input.read(buffer)) > 0) {
        output.write(buffer, 0, length);
    }
    output.flush();

    return connection.getResponseCode();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:09:53.017

您正在使用[适用于 Android 的 AWS 开发工具包](http://aws.amazon.com/sdkforandroid/)吗？它具有正确的 API，我怀疑使用它上传到 S3 会更容易，而且更安全。我相信他们那里也有教程、代码示例和演示。

还有一个[用于 S3 的 API](http://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/)和您可能需要的其他类。PutObjectRequest[可以](http://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/model/PutObjectRequest.html)帮助您从电话客户端上传文件，并且在您的情况下很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-12T04:58:45.133

我有同样的问题。这就是我面对它的原因：

> 预签名 URL 允许您访问 URL 中标识的对象，前提是预签名 URL 的创建者有权访问该对象。也就是说，如果您收到用于上传对象的预签名 URL，则**只有当预签名 URL 的创建者具有上传该对象的必要权限时，您才能上传该对象**。

[http://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html)

一旦我给了我的 lambda 函数 PutObject 对该 s3 存储桶的权限，它就可以工作了！

# php - Pinterest 小部件与 jquery 选项卡冲突

> ID：15643137
> 
> 赞同：1
> 
> 时间：2013-03-26T17:03:35.093
> 
> 标签：php, javascript, jquery, widget, pinterest

我正在尝试使用 jQuery 将 Pinterest 小部件放入我网站上的选项卡中，但它不显示任何内容。但是，当我将它放在选项卡之外时，它可以工作。

我正在使用这个 jQuery 代码：

```
<script="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {

    //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });
});
</script> 
```

这适用于 Pinterest（第二行就在 body 标签上方，按照说明）：

```
<a data-pin-do="embedUser" href="http://pinterest.com/thisismycyprus/"></a>
<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

这是标签代码

```
 <ul class="tabs">
    <li><a href="#tab1">Tab 1</a></li>
    <li><a href="#tab2">Tab 2</a></li>
</ul>
<div class="tab_container">
    <div id="tab1" class="tab_content"><h2>Tab 1</h2><p>Content </p></div>
    <div id="tab2" class="tab_content"><h2>Tab 2</h2><p><a data-pin-do="embedUser" href="http://pinterest.com/thisismycyprus/"></a></p></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:46:33.467

**`$(window).load(function(){ });`** 您已在检查[此小提琴](http://jsfiddle.net/lesson8/4pAqv/)中添加脚本

```
//<![CDATA[ 
$(window).load(function(){
//Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });
});//]]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T18:49:17.760

我的回答是关于 Pinterest/JQuery（不是 jquery 选项卡）

我不得不在幻灯片中使用 Pinterest 提要小部件（[http://business.pinterest.com/widget-builder/#do_embed_pin](http://business.pinterest.com/widget-builder/#do_embed_pin)），我遇到了同样的错误：当 div 容器`display:none;`在页面加载时，Pinterest 内容为空.

我`visibility:hidden;`在我的 div 容器上使用，初始化我的幻灯片（在开始前等待 4 秒），设置`display:none;visibility:visible;`然后我可以使用 JQuery `show();`/`hide();`

# c# - XElement 中的通配符搜索

> ID：15643138
> 
> 赞同：0
> 
> 时间：2013-03-26T17:03:35.860
> 
> 标签：c#, xml, wildcard, xelement

我正在使用 XElement 搜索用户通过 openfiledialog 选择的 XML 文档。

这是代码：

```
private void dothis()
    {
        string query;

        XElement xml = XElement.Load(path);
        XNamespace ns = xml.GetDefaultNamespace();
        IEnumerable<XElement> symptoms = 

        from item in xml.Descendants(ns + "section")

        where (string) item.Element(ns + "text") == queryString.Text
        select item;

        // Execute the query 
        foreach (var complaints in symptoms)
        {
            // Instantiate the writer
            _writer = new TextBoxStreamWriter(txtConsole);
            // Redirect the out Console stream
            Console.SetOut(_writer);

            Console.WriteLine(complaints);

        }

        //Pause the application 
        Console.ReadLine();
    } 
```

我想让基于 queryString.text 的查询成为通配符。

因此文本字段可能包含 Confusion、Nausea、Headache

如果我只是在我的 queryString 文本框中输入混淆，那么我仍然希望它能够定位该元素和节点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:04:38.197

所以听起来你想要的只是：

```
where item.Element(ns + text).Value.Contains(queryString.Text) 
```

这对你有用吗？

# language-agnostic - 开始 VST 开发的最简单方法

> ID：15643141
> 
> 赞同：3
> 
> 时间：2013-03-26T17:03:37.153
> 
> 标签：language-agnostic, signal-processing, vst

编写 VST 插件的最简单方法是什么？

我是 IT 教育专业的二年级学生，我可能需要编写一个 VST 作为数字信号处理课程的分配项目。这意味着我可能必须实现一个实际的 DSP 算法，所以如果我没记错的话，那将超越所有图形模块化 VST 制作软件。

我目前手头有 C++ (CodeBlocks + MinGW)、Java (Eclipse)、Python 和 Octave。我还可以获得 Visual Studio、Matlab 或一些免费的语言/环境来完成这项任务。我还发现了[Faust](http://faust.grame.fr/)，它是一种函数式语言，我可能会在这个项目中学习它，因为我喜欢学习新语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:31:48.113

[SynthEdit](http://www.synthedit.com/)可能是创建工作 VST 插件同时有机会编写低级 DSP 代码的最简单方法。SynthEdit 可以使用自定义 C++ 模块进行扩展。您可以编写一个包含自定义 DSP 代码的模块，以满足您的课程要求，同时将 SynthEdit 用于 GUI 和其他 VST“胶水”类型代码。编写 DSP 代码只是从头开始构建 VST 插件的一小部分。

如果您必须编写 VST 插件并且不能使用 SynthEdit 或类似环境，我认为下一个最简单的方法是 C++ 和[JUCE](http://rawmaterialsoftware.com/juce.php)。我也不使用，但 AFAIK 大多数插件都是用 C++ 编写的，而且 JUCE 经常受到称赞。

存在其他 VST 框架选项，例如[VST.NET](http://vstnet.codeplex.com/)或[Delphi ASIO 和 VST 库](http://sourceforge.net/projects/delphiasiovst/)，但这些选项使用较少，如果遇到问题，您可能会更多地靠自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:59:56.317

我认为有 VST 模块化合成器允许您自定义编程 DSP 逻辑，[SynthEdit 浮现](http://www.synthedit.com/)在脑海中，但还有更多。搜索“vst 模块化合成器”。

如果您想冒险进入 .NET 世界，[VST.NET](http://vstnet.codeplex.com)非常适合初学者。它有一个构建和简化 VST 插件标准的框架，并附带演示常见插件场景的示例。

# c# - 在 Visual Studio 2012 中找不到用户关键字部分

> ID：15643145
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:03:51.423
> 
> 标签：c#, visual-studio-2012

对于视觉工作室 2012 。我在工具/选项/字体和颜色/显示项目/用户关键字和许多 C# 项目中找不到？请任何人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:26:23.203

请看下文。我签入了 VS 2010 Pro 和 VS 2012 Professional 的两个副本，并且两者都具有相同的用户定义类型（关键字）等设置。请参见下面的屏幕快照。

![在此处输入图像描述](../Images/948ef8c8007acdbf95a8032b018b0b50.png)

希望这可以帮助。

您需要找到**VS2012 的 Developer Command Prompt**并**以管理员身份运行它**。如果您使用的是 Windows8，则需要搜索它，或者典型路径可能是

```
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Microsoft Visual Studio 2012\Visual Studio Tools 
```

在任何其他版本的 Windows 上，您都可以在开始菜单的

```
Visual Studio 20xx > Visual Studio Tools > Visual Studio Command Prompt 
```

然后只需运行**`devenv.exe /setup`**命令。希望这能解决您的问题。

# ruby - 将组添加到 Redmine 中的项目

> ID：15643146
> 
> 赞同：1
> 
> 时间：2013-03-26T17:03:52.720
> 
> 标签：ruby, redmine, member

我正在编写这个脚本-> [http://www.redmine.org/plugins/default_members](http://www.redmine.org/plugins/default_members) <- by Sajin Andrei

我已经完全修改了钩子以满足我的需要，但我意识到它实际上添加了作为已定义组成员的每个用户。

相反，我想要做的是将整个组添加到项目中，这样如果我将其他任何人添加到同一组中，我就不必更新每个项目。

这是我的代码：

```
# Debuggin [Default: commented/disabled]
#require 'logger'

class DefmembersHook < Redmine::Hook::ViewListener
  def controller_projects_new_after_save(context={ })
    #log = Logger.new('/usr/local/share/redmine/log/plugin.log')
    params = context[:params]
    project = context[:project]
    roles = Role.find_all_givable
    setting_group = Setting.plugin_redmine_default_members[:group] ? Setting.plugin_redmine_default_members[:group] : 'Manager'
    groups ||= setting_group.split(",")
    groups.each do |gp|
      #log.error "gp: #{gp}"
      group = Group.find(:first, :conditions => ["LOWER(lastname) = ?", gp.to_s.downcase])
      #log.error "group: #{group}"
      users = User.active.in_group(group).all(:limit => 100)
      users.each do |user|
        if user[:lastname] != 'Admin' && user[:lastname] != 'Anonymous'
          #log.error "inizio per #{user}"
          rs = Role.find_by_name(group.to_s)
          #log.error "rs: #{rs}"
          m = Member.new(:user => user, :roles => [rs])
          project.members << m
          #log.error "fine per #{user}"
        end
      end
    end
  end
end 
```

并且实际上按照 Sajin Andrei 的预期工作，从组中添加单个用户。

我想做这样的事情

```
m = Member.new(:group => group, :roles => [rs])
project.members << m 
```

但它不起作用（显然）......希望有人能提供帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:19:52.680

找到了解决方案：

```
# Modificata da CARLO RUGGIERO per RETINA
# Permette di aggiungere interi gruppi ad un progetto in automatico!
class DefmembersHook < Redmine::Hook::ViewListener
  def controller_projects_new_after_save(context={ })
    params = context[:params]
    project = context[:project]
    #roles = Role.find_all_givable
    setting_group = Setting.plugin_redmine_default_members[:group] ? Setting.plugin_redmine_default_members[:group] : 'Manager'
    groups ||= setting_group.split(",")
    groups.each do |gp|
      group = Group.find(:first, :conditions => ["LOWER(lastname) = ?", gp.to_s.downcase])
      rs = Role.find_by_name(group.to_s) 
      project.members << Member.new(:principal => group, :roles => [rs])
    end
  end
end 
```

问题是**:user**标签只接受用户元素将其更改为**:principal**我已经让它工作了

```
m = Member.new(:principal => group, :roles => [rs])
project.members << m 
```

希望有人觉得这很有用

# django - 使用 django-guardian 进行基于角色的访问

> ID：15643155
> 
> 赞同：0
> 
> 时间：2013-03-26T17:04:10.170
> 
> 标签：django, django-forms, django-templates, django-admin, django-guardian

我使用 django-guardian 提供基于角色的权限，使用 django-userena 进行用户分析。我有三种用户管理员，子管理员，员工。管理员可以添加子管理员，子管理员可以添加员工。我为三种用户类型创建了三个监护人组。当用户注册时，我为该用户分配了一个员工组。

```
class Profile(UserenaBaseProfile):
    class Meta:
    permissions = ( 
                ( "add_admin", "Can add admin" ),
                ( "add_subadmin", "Can add sub admin" ),
                ( "add_employee", "Can add employee" ),
            )
    user = models.OneToOneField(User,
                            unique=True,
                            verbose_name='user',
                            related_name='profile')
    first_name = models.CharField('First name',max_length=100,blank=False,null=False)
    def save(self, *args, **kwargs):
        super(Profile, self).save(*args, **kwargs)
        employee_group = Group.objects.get('employee')
        self.groups.add(employee_group) 
```

我想使用 Django Admin 并赋予 Admin 和 sub-admin 更改用户组的能力。

如何使用 AdminModel 在管理面板中添加下拉菜单或单选按钮，以便更改用户组。或者有没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:38:27.197

您正在寻找[管理员操作](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/#admin-actions)，您必须编写一些自定义管理员操作。

### 更新

创建管理员时，您可以检查当前`request.user`是否能够看到该操作。我们可以说，如果用户不是管理员，那么自定义操作方法应该返回`None`或者只是`pass`. 在代码中的任何地方都有一个用于获取当前用户的应用程序，当您无权访问当前用户请求时，它被称为[`django-cuser`](https://github.com/Alir3z4/django-cuser). 这将适合您需要确定使用是管理员还是子管理员以使自定义操作可供他使用的情况。

从[**有条件地启用或禁用操作开始**](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/#conditionally-enabling-or-disabling-actions)

# ios - UISwipeGestureRecognizer 应用于窗口

> ID：15643161
> 
> 赞同：0
> 
> 时间：2013-03-26T17:04:31.053
> 
> 标签：ios, uigesturerecognizer

如果我应用于`UISwipeGestureRecognizer`视图，则当设备旋转时，滑动方向会按预期工作。但是，如果`UISwipeGestureRecognizer`在 AppDelegate 或 rootViewController（self.view.window 等）中将其应用于主窗口，则只有在设备处于纵向且底部主页按钮方向时才能正确检测到方向。

有什么建议如何处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:18:23.957

这种行为的原因是窗口不支持界面旋转。只有`rootViewController`那些为你做的（或任何`viewController`会做的）。我建议您看一下`[UIApplication sharedApplication].statusbarorientation`以检测正确的设备方向。完成此操作后，您可以通过比较滑动的开始和结束点来自己检测特定的滑动手势，具体取决于旋转...

除此之外，您是否有任何重要的理由想要这样做？你为什么不添加`UISwipeGestureRecognizer`到让我们说`rootViewController`？

# entity-framework - 在 MVC4 中，如何从回发中将数据保存在 Controller 中？（仅视图中的那些字段）

> ID：15643167
> 
> 赞同：0
> 
> 时间：2013-03-26T17:04:37.470
> 
> 标签：entity-framework, razor, asp.net-mvc-4

我有一个编辑“存储”表的视图。这一切都很好，但是视图不会显示所有字段，当我尝试保存时，它会抛出错误，说不在视图帖子中的字段不能为空白。好吧，当然，但是这些字段无论如何都不应该被覆盖，视图没有编辑它们。

这是我的帖子功能

```
[HttpPost]
    public ActionResult Edit(Store storeModel) {
        if (ModelState.IsValid) {
            Store storeContext = database.Stores.Find(storeModel.ID);
            database.Entry(storeContext).CurrentValues.SetValues(storeModel);
            database.SaveChanges();
        }
    } 
```

在线搜索，显然问题在于 MVC 不知道您正在编辑哪些字段，并且仅将每个字段视为已编辑，即使回发中不存在该字段也是如此。要“告诉”您正在视图中编辑哪个字段，您必须这样做：

```
 //Store contextStore = new Store { ID = postBackStore.ID };
            //database.Stores.Attach(contextStore );
            //contextStore .Name = postBackStore.Name;
            //contextStore .Address = postBackStore.Address;
            //contextStore .City = postBackStore.City;
            //contextStore .Postal = postBackStore.Postal;
            //contextStore .Phone = postBackStore.Phone;
            //contextStore .StoreNumber = postBackStore.StoreNumber;
            //contextStore .IsActive = postBackStore.IsActive;
            //database.Entry(contextStore).State = EntityState.Modified; 
```

但是，这对我不起作用，因为 MVC 抱怨它已经在跟踪 Store 对象并且无法创建具有相同 ID 的新对象。另外，当我已经在视图中定义了所有字段时，我不喜欢如何再次定义它们。

**无论如何，我可以让 MVC 仅将更改保存到视图中的字段（与模型中的每个字段相反），而不必明确定义视图中的字段吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:11:08.147

为什么不使用仅参与字段的视图模型？

# java - 字符串格式的文件位置

> ID：15643170
> 
> 赞同：0
> 
> 时间：2013-03-26T17:04:45.737
> 
> 标签：java, string, string.format

在 Java 中，这些是否相同：

```
new File (a.getPath() + filename); 
```

```
new File (String.format(a.getPath() + filename)); 
```

我在 findbugs 中收到了一些警告，第二个选项似乎可以修复它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:05:39.937

两者都是国际海事组织的糟糕选择。如果想法是将目录名与文件名结合起来，请使用`File`专门为此设计的构造函数：

```
new File(a.getPath(), filename) 
```

（我不明白为什么 using`String.format`会修复警告，但由于我们不知道警告是什么，所以很难猜测。但它肯定会使它更加脆弱，因为字符串将被解释为格式模式，大概不是。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:07:03.600

[`String.format()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)[除非您的字符串是格式字符串](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)并且您添加了额外的参数，否则不会执行任何操作，因此在这种情况下，您似乎只是在隐藏警告。FindBugs 很可能知道这`new File(a + b);`可能是一个错误，但无法判断是否`new File(someFunction());`是一个错误。

根据[PT_RELATIVE_PATH_TRAVERSAL 的文档](http://findbugs.sourceforge.net/bugDescriptions.html#PT_RELATIVE_PATH_TRAVERSAL)：

> 该软件使用 HTTP 请求参数来构造应位于受限目录中的路径名，但它不能正确中和诸如“..”之类的序列，这些序列可以解析到该目录之外的位置。有关详细信息，请参阅 [http://cwe.mitre.org/data/definitions/23.html](http://cwe.mitre.org/data/definitions/23.html)。
> 
> **FindBugs 只查找最明显、最明显的相对路径遍历情况。**如果 FindBugs 发现了任何漏洞，则几乎可以肯定您还有更多 FindBugs 未报告的漏洞。如果您担心相对路径遍历，您应该认真考虑使用商业静态分析或渗透测试工具。

所以，这个`String.format()`技巧奏效了，因为 FindBugs 只能捕捉到明显的情况，但更大的问题似乎是这会导致安全漏洞：

> 这允许攻击者遍历文件系统来访问受限目录之外的文件或目录。

目前尚不清楚究竟是什么导致 FindBugs 显示此警告，因为您没有发布您的代码，但听起来它可能非常严重。您可能希望实际解决此问题，而不是忽略警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:08:27.237

1.  那些是一样的。

2.  用于`String.format`传递静态值很奇怪。不要这样做。

3.  并非 Findbugs 报告的所有内容都是问题。Findbugs 可以报告“误报”。

如上所述，用于`new File(a.getPath(), filename)`将路径段添加到另一个路径。这也可以解决您的 Findbugs 问题。

# ruby - 将委托方法设为私有

> ID：15643172
> 
> 赞同：17
> 
> 时间：2013-03-26T17:04:50.847
> 
> 标签：ruby, delegates, activesupport

我委托了几种方法，并且还希望它们都是私有的。

```
class Walrus
  delegate :+, :to => :bubbles

  def bubbles
    0
  end
end 
```

我可以说`private :+`，但我必须对每种方法都这样做。有没有办法返回委托方法列表或让委托创建私有方法？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-03-08T02:59:00.497

因为`delegate`返回传入的符号列表，您可以像这样链接方法调用：

```
private *delegate(:foo, :bar, :to => :baz) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T17:35:49.247

添加一个辅助方法的猴子补丁`Module`，就像`ActionSupport`pack 所做的那样：

```
class Module
  def private_delegate *methods
    self.delegate *methods
    methods.each do |m|
      unless m.is_a? Hash
        private(m)
      end
    end
  end
end

# then
class Walrus
  private_delegate :+, :to => :bubbles

  def bubbles
    0
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-23T13:51:02.517

对于那些使用 Rails 6+ 的人，感谢 Tomas Valent 现在[您可以通过 private 选项将委托方法设为私有](https://github.com/rails/rails/pull/31944)：

```
delegate :method, to: :object, private: true 
```

# vba - VSTO 加载项迁移到 Office 365

> ID：15643176
> 
> 赞同：4
> 
> 时间：2013-03-26T17:05:05.770
> 
> 标签：vba, sharepoint, vsto, excel-2010, office365

我在一个学术实验室工作，一直在研究 VSTO Add-In to Excel（主要用于处理复杂的数据分析和生成报告，我认为这是 VSTO 的生计）。在实验室，我们几乎只有 Office 2010（大学就是这样）。我们正在与使用 Office 365 的制药公司合作。

他们想使用我一直在开发的同一个插件，所以我们都在同一个页面上。如果有任何许可问题，我已经让我们的技术转让办公室知道，因为我认为这不是我需要解决的问题。

在技​​术方面，我一直在试图弄清楚插件是否可以与 365 一起使用。我在 VS-2012（专业的学术版）中构建了它，它在 Excel 2010 中运行良好（尽管我一直在添加给它）。

我读过了：

[https://blogs.msdn.com/b/donovanf/archive/2011/06/29/office-365-developer-guidance-and-resources.aspx?Redirected=true](https://blogs.msdn.com/b/donovanf/archive/2011/06/29/office-365-developer-guidance-and-resources.aspx?Redirected=true)

这听起来并不乐观，直到我意识到如果他们获得高级版，它仍然包括本地安装：

[https://office.microsoft.com/en-us/business/office-online-microsoft-office-365-for-small-businesses-FX103037625.aspx](https://office.microsoft.com/en-us/business/office-online-microsoft-office-365-for-small-businesses-FX103037625.aspx)

**所以我的问题是，如果有人使用本地安装的 365 高级版，那么为 2010 年构建的 VSTO 是否仍然有效？** 几天后我可能会在我亲自见到他们时回答这个问题（并因此尝试一下），但如果可能的话，我想提前知道答案。

如果不是，最好的解决方案是回到 VBA（这似乎是倒退）或尝试使用 SharePoint（这是我生命中的第一次）。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T01:06:46.563

好吧，希望有人可以通过知道它实际上可以与 365 的高级添加一起使用来省去一些担忧。我能够将加载项部署到他们的 365 本地安装中而不会出现问题。我认为它不适用于较低的版本，但我还没有机会测试它。

# ruby-on-rails - gmaps4rails = NilClass:Class 的未定义方法“model_name”

> ID：15643185
> 
> 赞同：0
> 
> 时间：2013-03-26T17:05:23.873
> 
> 标签：ruby-on-rails

我正在使用 gmaps4rails，在尝试创建新位置时出现错误消息：'undefined method `model_name' for NilClass:Class'

```
Extracted source (around line #1):

1: <%= form_for(@location) do |f| %>
2:   <% if @location.errors.any? %>
3:     <div id="error_explanation">
4:       <h2><%= pluralize(@location.errors.count, "error") %> prohibited this location from being saved:</h2> 
```

这是控制器：

```
class LocationsController < ApplicationController
  # GET /locations
  # GET /locations.json

  def index
    @locations = Location.all
    @json = Location.all.to_gmaps4rails
    end
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @locations }
    end
  end

  # GET /locations/1
  # GET /locations/1.json
  def show
    @location = Location.find(params[:id])
    @json = Location.all.to_gmaps4rails
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @location }
    end
  end

  # GET /locations/new
  # GET /locations/new.json
  def new
    #@location = Location.new
    @json = Location.all.to_gmaps4rails

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @location }
    end
  end

  # GET /locations/1/edit
  def edit
    @location = Location.find(params[:id])
    @json = Location.all.to_gmaps4rails
  end

  # POST /locations
  # POST /locations.json
  def create
    #@location = Location.new(params[:location])
    @json = Location.all.to_gmaps4rails
    respond_to do |format|
      if @location.save
        format.html { redirect_to @location, notice: 'Location was successfully created.' }
        format.json { render json: @location, status: :created, location: @location }
      else
        format.html { render action: "new" }
        format.json { render json: @location.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /locations/1
  # PUT /locations/1.json
  def update
    @location = Location.find(params[:id])
    @json = Location.all.to_gmaps4rails
    respond_to do |format|
      if @location.update_attributes(params[:location])
        format.html { redirect_to @location, notice: 'Location was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @location.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /locations/1
  # DELETE /locations/1.json
  def destroy
    @location = Location.find(params[:id])
    @location.destroy
    @json = Location.all.to_gmaps4rails
    respond_to do |format|
      format.html { redirect_to locations_url }
      format.json { head :no_content }
    end
  end 
```

模型如下所示：

```
class Location < ActiveRecord::Base
  attr_accessible :college_id, :course_id, :id, :name, :latitude, :longitude, :gmaps, :address

  belongs_to :college
  has_many :courses
  acts_as_gmappable

  def gmaps4rails_address
    address
  end

end 
```

和完整的跟踪：

```
activemodel (3.2.9) lib/active_model/naming.rb:163:in `model_name_from_record_or_class'
activemodel (3.2.9) lib/active_model/naming.rb:158:in `param_key'
actionpack (3.2.9) lib/action_view/helpers/form_helper.rb:369:in `form_for'
app/views/locations/_form.html.erb:1:in `_app_views_locations__form_html_erb___716241816_58056000'
actionpack (3.2.9) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.9) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.9) lib/action_view/template.rb:143:in `render'
actionpack (3.2.9) lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
actionpack (3.2.9) lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
actionpack (3.2.9) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.9) lib/action_view/renderer/partial_renderer.rb:237:in `render'
actionpack (3.2.9) lib/action_view/renderer/renderer.rb:41:in `render_partial'
actionpack (3.2.9) lib/action_view/helpers/rendering_helper.rb:27:in `render'
app/views/locations/new.html.erb:3:in `_app_views_locations_new_html_erb___791287105_46366992'
actionpack (3.2.9) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.9) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.9) lib/action_view/template.rb:143:in `render'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.9) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.9) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.9) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.9) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.9) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.9) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.9) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.9) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
C:/Ruby192/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
activesupport (3.2.9) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.9) lib/active_support/callbacks.rb:414:in `_run__350059794__process_action__911521287__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.9) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:601:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__341585242__call__226313936__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.9) lib/rails/engine.rb:479:in `call'
railties (3.2.9) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
C:/Ruby192/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
C:/Ruby192/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
C:/Ruby192/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

有人可以指出我正确的方向吗？

谢谢你！

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:53:15.920

实际上，您并没有在控制器中创建任何位置，`@location`而是`nil`. 这些行不应**被**评论：

```
@location = Location.new # in locations#new

@location = Location.new(params[:location]) # in locations#create 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T21:39:20.390

控制器代码底部缺少结束标记........不要再说了......

# qt - 在 Qt 的同一层上绘制线条和复选框

> ID：15643187
> 
> 赞同：0
> 
> 时间：2013-03-26T17:05:24.883
> 
> 标签：qt, user-interface, qt-creator

我想使用 Qt 设计一个 GUI。其中包含行和复选框，它们像这样相互连接：

----------[ ]-----------

------[ ]---------[ ]-------------

（其中破折号表示行，[] 表示复选框）

线条是动态创建的。并且选中该复选框将禁用相应的行。所以基本上线条和复选框应该在同一层。

任何有关实施的提示/链接表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:18:49.217

您将需要[QFrame](http://doc-snapshot.qt-project.org/4.8/qframe.html#Shape-enum)、[QCheckBox](http://doc-snapshot.qt-project.org/4.8/qcheckbox.html)和[QHBoxLayout](http://qt-project.org/doc/qt-4.8/qhboxlayout.html)的组合。对于一些更花哨的东西，您可以为每个部分子类化您自己的 QWidget，并将它们增量添加到 QVBoxLayout。像这样的东西...

```
class CheckLine : public QWidget
{
    Q_OBJECT
public:
    CheckLine(int numboxes = 1, QObject* parent = 0) :
        QWidget(parent)
    {

        m_layout = new QHBoxLayout;
        m_layout->setSpacing(0);  //you can also set the margins to zero if need be
        setLayout(m_layout);

        QFrame* firstline = new QFrame();
        firstline->setFrameShape(QFrame::HLine);
        m_layout->addWidget(firstline);
        m_lines.append(firstline);

        for(int i = 0; i < numboxes; ++i)
            addBox();
    }

    void addBox()
    {
        QCheckBox* newbox = new QCheckBox("");  //add text here - or leave it blank if you want no label
        m_newbox->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
        m_layout->addWidget(newbox);
        m_boxes.append(newbox);

        QFrame* newline = new QFrame();
        newline->setFrameShape(QFrame::HLine);
        m_layout->addWidget(newline);
        m_lines.append(newline);

        /* link each checkbox to disable the line after it */
        connect(newbox, SIGNAL(toggled(bool)), newline, SLOT(setEnabled(bool)));
//      connect(newbox, SIGNAL(toggled(bool)), this, SLOT(setEnabled(bool)));  //use this instead if you want it to disable the entire row
    }

private:
    QHBoxLayout* m_layout;
    QList<QCheckBox*> m_boxes;
    QList<QFrame*> m_lines;
}; 
```

然后，创建一个带有 QVBoxLayout 和`new`CheckLine 的小部件，每次递增`numboxes`1。如果您希望*任何*复选框禁用整行，请调整代码。

# jquery - JQuery 仅在将 Alert() 放置在其前面时才执行

> ID：15643189
> 
> 赞同：0
> 
> 时间：2013-03-26T17:05:33.007
> 
> 标签：jquery, html, twitter-bootstrap, collapse

每次用户单击“获取报价”按钮时，都会显示一个 GIF 动画并隐藏旧的显示。

我查询一个后端服务，它返回一些我刚刚转储到页面上的 HTML（鉴于我糟糕的前端技能，我利用 API 中的 SMARTY 来处理我的格式）。当发生错误时，返回 JSON 而不是 HTML（因此有点向后尝试捕获，在这种情况下，“成功”发生在“捕获”中，“失败”发生在“尝试”中）。

发生错误时，HandleMessages() 获取响应，并处理存储在那里的消息（这工作正常）。处理完错误后，GIF 应该会消失（因为它在 .collapse 中并且我将其隐藏了）。这不会发生，只有当我向页面发出警报（）时才会发生这种情况。如果 alert() 被注释或丢失，这不起作用。

我敢肯定这是非常愚蠢或愚蠢的事情，但您的帮助总是很感激。

这是代码：

```
$('#findCarriers').click(function(){

    var data = new Object();

    $('#carrierLoad').collapse('show');
    $('#carriers').collapse('hide');

    data.general = {
        'code': $('#warehouse').val(),
        'shipper': $('#shipper_zip').val(),
        'consignee': $('#consignee_zip').val(),
        'shipment_type': $('#direction').val(),
        'total_weight': $('#total_weight').text(),
    };

    data.accessorials = [];

    $('#accessorials').find('input:checkbox:checked').each(function(acc_index){

        data.accessorials.push($(this).val());

    });

    data.units = [{
        'num_of': $('#total_pallets').val(),
        'type': 'pallet',
        'weight': 0
    }];

    data.products = [];

    $('#items tr').each(function(index){

        data.products.push({
            'pieces': 1,
            'weight': parseFloat($(this).find('.weight').val(), 10),
            'class': parseInt($(this).find('.class').val(), 10)
        }); 

    });

    $.post('index.php?p=api&r=html&c=ctsi&m=lcc', data, function(resp){
        try {

            resp = $.parseJSON(resp);
            handleMessages(resp);

            carriersClear('find carriers');
            alert('good'); // comment out or remove and the show and hide on the collapse never happens
            $('#carrierLoad').collapse('hide');
            $('#carriers').collapse('show');
        } catch(err) {

            $('#carriers').html(resp);
            alert('fail'); // comment out or remove and the show and hide on the collapse never happens
            $('#carrierLoad').collapse('hide');
            $('#carriers').collapse('show');

        }

    });

    return false;

}); 
```

辅助功能：

```
function setError(e_title, e_msg, e_type) {

    $.pnotify({
        title: e_title,
        text: e_msg,
        type: e_type
    });

}

function handleMessages(jsResponse) {

    $.each(jsResponse.message, function(){

        setError(this.traceroute[0] + '-' + this.traceroute[1] + '-' + this.traceroute[2], this['message'], this['type'])

    });

}

function carriersClear(reason) {

    $('#carriers').html('');

    //alert(reason);

} 
```

这是HTML：

```
<div class="row">

<div class="span10">

    <h3 class="heading" data-toggle="collapse" data-target="#carrierSelect">Carriers</h3>

    <div class="bg-light collapse in bg-light" id="carrierSelect">

        <div class="row spacer-top spacer-bottom">

            <div class="span2 offset8">
                <a href="#" class="btn btn-primary" id="findCarriers">Get Quote</a>
            </div>

        </div>

        <div class="row spacer-bottom collapse" id="carrierLoad">
            <div class="span2 offset4"><img class="center-block" src="view/img/load.gif" /></div>
        </div>

        <div class="row">

            <div class="span10 bg-x-light collapse in spacer-top" id="carriers">

            </div>

        </div>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:01:04.697

您需要将carrierClear() 之后的行作为回调传递给carrierClear 函数。像这样：

```
$.post('index.php?p=api&r=html&c=ctsi&m=lcc', data, function(resp){
    try {

        resp = $.parseJSON(resp);
        handleMessages(resp);

        carriersClear('find carriers', function(){
            $('#carrierLoad').collapse('hide');
            $('#carriers').collapse('show');
        }
    } 
```

然后：

```
function carriersClear(reason,callback) {
    $('#carriers').html('');
    callback();
} 
```

# java - 如何在 jenkins 上跨多个项目构建作业管理通用 ant 构建脚本？

> ID：15643191
> 
> 赞同：4
> 
> 时间：2013-03-26T17:05:35.087
> 
> 标签：java, ant, jenkins, continuous-integration

我有一组来自不同 git 存储库的 java 项目，我想用 Jenkins 构建它们。

它们都共享相同的 ant 构建脚本，该脚本通过 ant 导入机制使用项目特定的配置部分（例如编译类路径）。

目前我手动进行此共享，但这在更改公共部分时非常容易出错。

所以我的问题是：在 jenkins 服务器上跨多个构建作业管理共享 ant 构建脚本的好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T21:37:27.943

正如@whiskeyspider 所说，这不是一个不常见的问题，它不仅限于詹金斯。在我看来，这也是阻碍大型遗留 ANT 构建的问题之一。随着时间的推移，由于有理由担心它会破坏依赖构建，因此更改通用逻辑变得越来越难。

将通用逻辑保存在单独的存储库或 git 子模块中是合理的建议，因为它启用了对该逻辑的版本控制。另一种选择是将通用逻辑打包为[ANT 库](http://ant.apache.org/manual/Types/antlib.html)

```
<project ... xmlns:common="antlib:com.example.commonbuild">

    <taskdef uri="antlib:com.example.commonbuild">
        <classpath>
             <fileset dir="${lib.dir}" includes="commonbuild-1.0.jar"/>
        </classpath>
    </taskdef>

    ..
    ..

    <target name="build">
        <common:compileAndPackage srcDir="${src.dir}" buildDir="${build.dir}" jarFile="${build.dir}/${ant.project.name}.jar"/>
    </target> 
```

虽然看起来更复杂，但我坚持创建这些类型的常见任务可以使构建文件更具可重用性和可读性。它还使您的组织的定制是什么变得一目了然。我发现它对于隐藏可能涉及讨厌的嵌入式脚本的实现细节特别有用。

最后，我非常喜欢使用[ivy](http://ant.apache.org/ivy/)来管理我的 3rd 方依赖项。这意味着我可以轻松地从我的存储库中下载构建所需的任何版本的通用逻辑。

# 如何创建一个 ANT 库

```
├── build.xml
└── src
    └── com
        └── example
            └── commonbuild
                └── antlib.xml 
```

## antlib.xml

```
<antlib>
    <macrodef name="compileAndPackage">
        <attribute name="srcDir"/>
        <attribute name="buildDir"/>
        <attribute name="jarFile"/>
        <sequential>
            <mkdir dir="@{buildDir}/classes"/>
            <javac srcdir="@{srcDir}" destdir="@{buildDir}/classes" includeantruntime="false"/>
            <jar destfile="@{jarFile}" basedir="@{buildDir}/classes"/>
        </sequential>
    </macrodef>
</antlib> 
```

笔记：

*   这个例子有一个任务。实际上，您的通用构建逻辑将提供多个宏定义。

## 构建.xml

只需将 XML 文件 jar 起来：

```
<target name="build" description="Create jar">
    <jar destfile="${build.dir}/commonbuild-${version}.jar" basedir="${src.dir}"/>
</target> 
```

[我的构建逻辑还会将此 jar 文件发布到我的存储库中，以便其他构建可以使用ivy](http://ant.apache.org/ivy/)将其拉下。也意味着通用的构建逻辑可以有一个单独的正式的发布管理生命周期（在大型组织中非常重要）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:20:40.757

几个想法...

1.  将 Ant 脚本存储在您的各个项目可以从中提取的工件存储库中，就像任何其他依赖项一样。
2.  创建一个包含构建脚本的父 Git 项目。在您的父项目中，将每个单独的子项目下拉为[Git 子模块](http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/)。您可能需要对脚本进行一些小的修改，以便参数化构建脚本中的子项目引用。

这个答案不是 Jenkins 特有的，应该可以移植到其他构建服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T09:19:02.680

我自己也找到了另一种选择：

将通用构建脚本中的“可覆盖”部分声明为“中性”元素，例如，对于路径定义，定义一个空路径：

```
<path id="additional-classpath" /> 
```

可以选择在中性定义之后导入另一个构建脚本以使其覆盖现有的：

```
<import file="compile-classpath.xml" optional="true" /> 
```

在导入的文件中，您现在可以定义元素以满足要构建的项目的个人需求。

# html - 导航栏边框没有改变颜色

> ID：15643195
> 
> 赞同：1
> 
> 时间：2013-03-26T17:05:38.453
> 
> 标签：html, css

我想更改导航栏上边框的颜色，但它对我不起作用。这是我的代码：

```
<!DOCTYPE html>
<html>
      <head>
        <title> site </title>
      </head>
    <style type="text/css">
body 
    {
      background-color:#75b5d6;
      color:white;
      font-family:"Arial";
      text-align:center;
    }
      a:link
    {
      color:white;
    }
      a:visited
    {
      color:white;
    }
      a:hover
    {
      color:white;
    }
      a:active
    {
      color:white;
    }
.nav
    {
      border:3px solid white;
      border-width:0px;
      list-style:none;
      margin:2;
      padding:2;
      text-align:center;
      background-color:orange;
      font-family:"Bookman Old Style";
    }
    .nav li{
    display:inline;
    }
.nav a
    {
    display:inline-block;
    padding:10px;
    }
h1
    {
      font-size:40;
      font-family:"Lucida Handwriting";
    }
h2
    {
      font-size:27.5;
      text-decoration:underline;
    }
p
    {
      font-size:12;
    }
    </style>
      <body>
        <h1> Kevril.net </h1>
        <ul class="nav">
        <li><a href="x">Home</a></li>
        <li><a href="x">site1</a></li>
        <li><a href="x">site2</a></li>
        </ul>
        <h2>Welcome</h2>
        <p>Hellow</p>
      </body>
</html> 
```

我做错了什么？它是css部分还是html中的东西？如果您能提供帮助，我将非常高兴。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:08:14.737

我假设您的意思是 .nav 类。如果是这样，您有：

```
 border:3px solid white;
  border-width:0px; 
```

确保它有一个宽度，你会看到你设置的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:07:47.553

你`border-width:0px;`的风格中有一个`.nav`让你的边框不出现的风格。`border`删除那条线（无论如何，你在简写定义中设置你的宽度）它应该可以工作。

对于这类事情，使用 Chrome 的“Inspect Element”等开发人员工具来帮助您找出破坏它的风格是很方便的。

（IE 有“开发者工具”，Firefox 有类似的内置，或者你可以安装 firebug）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:08:18.080

那是因为`.nav`你已经指定了`border-width:0;`.

即使您`3px`在`border`样式中指定，这也有效地呈现了没有宽度的边框。

把它取下来，它就起作用了。

演示：http: [//jsfiddle.net/cVNwn/](http://jsfiddle.net/cVNwn/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:09:43.510

`border-width:0px;`从你的删除`.nav`，它应该工作

演示：http: [//jsfiddle.net/zRQdj/](http://jsfiddle.net/zRQdj/)

# silverstripe - SilverStripe GridField：创建了太多版本的 DataObject

> ID：15643199
> 
> 赞同：1
> 
> 时间：2013-03-26T17:05:48.580
> 
> 标签：silverstripe

***TL;DR**创建/保存与某个页面相关的版本化 DataObject 时，会在相应的版本表中创建两个条目（而不是一个）。*

我正在尝试对某些 DataObject 进行版本化，并按如下方式应用版本化扩展：

```
class Testobject extends DataObject {
    static $has_one = array(
        'Page' => 'Page'
    );
    static $extensions = array(
        "Versioned('Stage', 'Live')",
    ); 
```

测试对象在某个页面上的 GridField 中进行管理，如下所示：

```
class PageContent extends Page {
    public static $has_many = array(
        "Testobjects" => "TestObject"
    );
    public function getCMSFields() {
        $fields = parent::getCMSFields();
        $config = GridFieldConfig_RelationEditor::create();
        $gridField = new GridField(
            'Testobjects',
            'Testobject', 
            $this->Testobjects(),
            $config);
        $fields->addFieldToTab('Root.Main', $gridField);
    } 
```

现在，每当我在 GridField 的 EditForm 中添加或保存一些 Testobject 时， Testobject_versions 表中就会出现**两个**新条目。为了比较，当我在 SiteTree 中保存页面时，仅在相应的版本表中创建**一个条目。**

由于页面上会有数千个这样的数据对象，我担心这种重复会填满我的数据库。有没有办法解决这个问题？

**进一步的认可：**

*   在创建新的 Testobject 时，versions 表中的第一个条目的 PageID 字段设置为 0，第二个条目设置了相应页面的实际 PageID。

*   如果我`$this->Testobjects()`在 GridField 构造中替换为，则版本表中`Testobject::get()`只显示*一个条目。*

*   onBeforeWrite 在使用时被调用两次`$this->Testobjects()`

所以似乎设置与页面的关系发生在第一个'write（）'之后，然后调用另一个'write（）'。但是这在代码中的什么地方发生了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:19:51.633

如果你在 CMS 的主要部分（@'/admin/pages'）编辑你的页面/测试对象，你可以在你的 TestObject 类中尝试这个有点骇人听闻的技巧

```
public function getCMSFields(){
    $fields = parent::getCMSFields();
    $fields->push( new HiddenField('PageID','PageID', Controller::curr()->CurrentPageID());
    return $fields;
} 
```

这并不理想，原因如下：

*   难以用单元测试控制器进行测试
*   恕我直言，对模型中控制器的认识不好

但如果它对你有用，它可能是一个合理的修复

# curl - 加载或准备就绪后使用 wget 获取页面

> ID：15643200
> 
> 赞同：1
> 
> 时间：2013-03-26T17:05:49.487
> 
> 标签：curl, wget

我不太确定，如何恰当地提出这个问题。

我正在尝试获取[http://www.youtube-mp3.org/#v=9MzikThwfPE](http://www.youtube-mp3.org/#v=9MzikThwfPE)形式的页面的 HTML 内容。
如果我在浏览器中打开它，我必须等待对应于 youtube id [-> here is v=9MzikThwfPE] 的 youtube 视频转换为 mp3，然后出现下载链接。
我要做的是在此下载链接存在或可见时获取网页的 HTML 内容。
如果我只是尝试使用 wget 获取页面，我不会获取内容，一旦视频处理完毕，我将获取内容。
我怎样才能用 wget 或 curl 做到这一点？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:23:20.887

我设法用[phantomjs](http://phantomjs.org)做到了这一点。

正如@Barmar 提到的，不可能使用 wget 或 curl 获取动态生成的 HTML 内容，因为它们不支持 js 或不支持 js 引擎。

另一方面，phantomjs 支持 js 并且可以像浏览器一样运行，我们可以发布请求、存储 cookie 以及您可以使用支持 java 的浏览器执行的许多其他操作。
这是完成这项工作的示例 js 脚本 [托管页面、获取动态 HTML 内容和存储 cookie]

```
var page = require('webpage').create(),
system = require('system');

if (system.args.length < 2 || system.args.length > 2) {
    console.log('Usage: dl.js URL');
    phantom.exit(1);
}
else{ 
    var url=system.args[1];
    page.open(url,
          function (status) {
      if (status !== 'success') {
          console.log('Unable to access network');
      } else {
          window.setTimeout(function(){
              steps = page.content;
              console.log(steps);
              phantom.exit();
          },10000);
      }
      }); 
} 
```

谢谢你。

# ruby - 使用 Rvm 安装 Ruby 1.9.3 时出现问题

> ID：15643205
> 
> 赞同：0
> 
> 时间：2013-03-26T17:06:20.560
> 
> 标签：ruby, installation, rvm, homebrew, ruby-1.9.3

我正在尝试使用本指南安装 ruby​​ 1.9.3：[http](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/) ://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/ 。

当我运行时`rvm install 1.9.3`出现此错误

```
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p392.
Continuing with compilation. Please read 'rvm mount' to get more information on binary         rubies.
Installing requirements for osx, might require sudo password.
Skipping `brew update` make sure your formulas are up to date.
Cowardly refusing to continue, please read 'rvm autolibs'. 
```

然后我跑`brew update`，我得到

```
Already up-to-date. 
```

我也试过跑步`brew doctor`，我得到了

```
Your system is raring to brew. 
```

怎么了？我该如何解决？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T18:30:22.617

我有同样的问题，这对我有用：

```
\curl -L https://get.rvm.io | bash -s stable --rails --autolibs=enabled 
```

资源：

[https://rvm.io/](https://rvm.io/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:13:24.580

尝试：

```
rvm list known 
```

如果没有返回任何内容，或者不包含您正在寻找的 ruby​​ 版本，请尝试更新

```
rvm get stable 
```

然后尝试再次安装您想要的 ruby​​ 版本。

# jquery - jQuery - .draggable() 可以粘在浏览器边框上吗？

> ID：15643206
> 
> 赞同：2
> 
> 时间：2013-03-26T17:06:21.150
> 
> 标签：jquery

我有一个可拖动的 div。现在，我希望该 div 坚持浏览器窗口的边框。这可能吗？或者也许有一些扩展插件可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:18:10.897

由于我无法`window`在 jsfiddle 的框架中进行模仿，因此我将`html`在此示例中使用。

使用[`snap`](http://api.jqueryui.com/draggable/#option-snap)和[`snapMode`](http://api.jqueryui.com/draggable/#option-snapMode),

```
$(document).ready(function(){
    $(selector).draggable({
        snap:"html",
        snapMode: "inner"});
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/38/](http://jsfiddle.net/dirtyd77/SLGdE/38/)

希望这能为您指明正确的方向。需要帮助请叫我！

# php - PHP按相同值合并数组

> ID：15643220
> 
> 赞同：3
> 
> 时间：2013-03-26T17:07:08.060
> 
> 标签：php, arrays, array-merge

我有两个大数组，大约有 1000 个键，并且每天都在增长。如何将这些数组按值合并为`array1[]['uid']`一个`array2[][7]`

请注意，正确的值可能是例如`array1[45]['uid']`和`array2[155][7]`或 `array1[444]['uid']`等`array2[666][7]`。

```
array1
    0 => 
    array
      'login' => string '104' (length=5)
      'uid' => string '1363861889.100' (length=14)
    1 => 
    array
      'login' => string '131' (length=5)
      'uid' => string '1363863722.126' (length=14)
    etc... 
```

和另一个

```
array2
     0 => 
    array
      0 => string '2013' (length=4)
      1 => string '03' (length=2)
      2 => string '25' (length=2)
      3 => string '15' (length=2)
      4 => string '39' (length=2)
      5 => string '49' (length=2)
      6 => string 'anonymous' (length=9)
      7 => string '1363863722.126' (length=19)
    1 => 
    array
      0 => string '2013' (length=4)
      1 => string '03' (length=2)
      2 => string '25' (length=2)
      3 => string '12' (length=2)
      4 => string '39' (length=2)
      5 => string '42' (length=2)
      6 => string 'anonymous' (length=9)
      7 => string '1363861889.100' (length=19)
    etc... 
```

`array1[0]['uid']`在这里`array2[1][7]` 我想得到相同的值：

```
 array
      0 => string '2013' (length=4)
      1 => string '03' (length=2)
      2 => string '25' (length=2)
      3 => string '12' (length=2)
      4 => string '39' (length=2)
      5 => string '42' (length=2)
      6 => string 'anonymous' (length=9)
      7 => string '1363861889.100' (length=19)
      'login' => string '104' (length=5)
      'uid' => string '1363861889.100' (length=14) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:14:27.593

```
$array1_inverted = array();
foreach ($array1 as $subarray) {
  $array1_inverted[$subarray['uid']] = $subarray;
}
foreach ($array2 as &$element) {
  $array1_element = $array1_inverted[$element[7]];
  $element['uid'] = $array1_element['uid'];
  $element['login'] = $array1_element['login'];
} 
```

[演示](http://ideone.com/FpCivB)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:13:54.033

```
foreach($array1 as $value)
{
  foreach($array2 as $value1)
  {
    if($value['uid'] == $value1[7])
  {
     $value1['uid'] = $value['uid'];
     $value1['login'] = $value['login'];
  }
 }
} 
```

同时尝试一下，我会想到一些更好的选择

# c# - 使用 Mono 的 DNS 刷新超时

> ID：15643223
> 
> 赞同：2
> 
> 时间：2013-03-26T17:07:09.477
> 
> 标签：c#, dns, mono, xamarin, system.net

尽管当前`Mono`项目的`ServicePointManager`类在`DnsRefreshTimeout`其界面中启用了该属性。相关属性未实现。

示例调用：

```
ServicePointManager.DnsRefreshTimeout = 10*60*1000; // 10 minutes 
```

运行我的应用程序时，我在运行时遇到下一个异常：

```
The requested feature is not implemented. (System.NotImplementedException) at System.Net.ServicePointManager.set_DnsRefreshTimeout (Int32 value) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/ServicePointManager.cs:213 
```

下面是实际的实现：

```
[MonoTODO]
public static int DnsRefreshTimeout
{
    get {
        throw GetMustImplement ();
    }
    set {
        throw GetMustImplement ();
    }
} 
```

我认为我没有足够的知识来独自实现这个功能，因为我从上个月开始开发 C# Mono 应用程序。

那么，有谁知道一种解决方法？或者我应该为 Mono 项目团队请求功能实现吗？

我正在开发一个 Xamarin 跨平台应用程序，我确实需要缓存我的 DNS 解析至少 10 分钟。

[在https://bugzilla.xamarin.com/show_bug.cgi?id=11424](https://bugzilla.xamarin.com/show_bug.cgi?id=11424)请求的 Ps 功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T22:38:43.853

我没有修复，但我有一个解决方法：

```
var request = (HttpWebRequest)WebRequest.Create("http://www.google.com/");

// Disable KeepAlive so we don't reuse  connections
request.KeepAlive = false;

// Clear out the cached host entry
var hostField     = typeof(ServicePoint).GetField("host", BindingFlags.NonPublic | BindingFlags.Instance);
var hostFieldLock = typeof(ServicePoint).GetField("hostE", BindingFlags.NonPublic | BindingFlags.Instance);
var hostLock      = hostFieldLock.GetValue(request.ServicePoint);
lock (hostLock)
    hostField.SetValue(request.ServicePoint, null); 
```

这是基于单声道的 ServicePoint 当前版本，您可以[在此处](https://github.com/mono/mono/blob/master/mcs/class/System/System.Net/ServicePoint.cs)查看截至 2015 年 3 月的版本。

# ios - Monotouch中UILabel中的文本下划线（移植ObjC代码）

> ID：15643232
> 
> 赞同：4
> 
> 时间：2013-03-26T17:07:33.093
> 
> 标签：ios, xamarin.ios, uilabel, nsattributedstring

我想在 UILabel 中给文本加下划线。我找到了 ObjC 的以下代码：

```
NSDictionary *underlineAttribute = @{NSUnderlineStyleAttributeName: @1}
myLabel.attributedText = [[NSAttributedString alloc] initWithString:@"Test string" 
                                                     attributes:underlineAttribute]; 
```

我正在尝试将其移植到 C#，但它不起作用。我正在尝试以下操作：

```
var keys = new object[] { "NSUnderlineStyleAttributeName" };
var objects = new object[] { 1 };
NSDictionary underlineAttribute = NSDictionary.FromObjectsAndKeys(objects, keys);
label.AttributedText = new NSAttributedString(@"Test",underlineAttribute); 
```

而不是 1，我还尝试了“1”和 NSUnderlineStyle.Single，但没有任何效果

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T18:10:32.803

尝试这个：

```
label.AttributedText = new NSAttributedString (
    "Test", 
    underlineStyle: NSUnderlineStyle.Single); 
```

# vim - 在 vim 中重新映射选项卡完成

> ID：15643234
> 
> 赞同：1
> 
> 时间：2013-03-26T17:07:42.097
> 
> 标签：vim, tab-completion

我有一个疯狂的小挑战。我想将 tab 和 shift + tab 重新映射到 vim 中的基本选项卡完成。这是我开始的地方：

```
set completeopt=
inoremap <tab> <C-n>
inoremap <S-tab> <C-p> 
```

这根本没有任何效果，我也意识到它可能会弄乱我的片段插件。我四处搜寻，发现了这个：[http://vim.wikia.com/wiki/Smart_mapping_for_tab_completion](http://vim.wikia.com/wiki/Smart_mapping_for_tab_completion)，但实施任何建议都没有运气。

我想映射到选项卡和 shift + 选项卡，而不会丢失片段功能。任何帮助都会摇滚！

**更新：**我现在运气也试过了。它没有明显的效果。

```
fu! InsertTabWrapper(direction)
  let char_before = col('.') - 1
  if !char_before || getline('.')[char_before - 1] !~ '\k'
    return "\<tab>"
  elseif "backward" == a:direction
    return "\<c-p>"
  else
    return "\<c-n>"
  endif
endfu
inoremap <tab> <c-r>=InsertTabWrapper("forward")<cr>
inoremap <s-tab> <c-r>=InsertTabWrapper("backward")<cr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:53:11.467

我同意你的观点，映射`<tab>`在 vim 中是一件令人头疼的事情。

就我个人而言，我有**SuperTab**、**Neocompletecache**、**Snipmate**和**pydiction** .... 让它们一起工作确实需要一些时间，**`<tab>`**即使不（也许）完美，也足以满足我的日常使用。

回到您的问题，您可以考虑安装一个名为`superTab`（[https://github.com/ervandew/supertab](https://github.com/ervandew/supertab)）的插件，并在您`.vimrc`添加以下行：

```
let g:SuperTabDefaultCompletionType = 'context'
let g:SuperTabContextTextOmniPrecedence = ['&omnifunc','&completefunc']
let g:SuperTabRetainCompletionType=2

inoremap <expr><Enter>  pumvisible() ? "\<C-Y>" : "\<Enter>"
inoremap <expr><TAB>  pumvisible() ? "\<C-n>" : "\<TAB>" 
```

然后....祝您好运...我希望它可以满足您的要求。

# ruby-on-rails - RSpec 测试和控制台不匹配

> ID：15643236
> 
> 赞同：0
> 
> 时间：2013-03-26T17:07:44.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, ruby-on-rails-3.2

我在 Rails 中有一个 setter 方法，可以打印出姓氏（调试信息）：

```
def password=(new_password)

    logger.info 'DEBUG: self.lastname: ' + self.lastname

    self.password_hash = SCrypt::Password.create(new_password, :key_len => 512, :salt_size => 32)

end 
```

如果我使用控制台（开发或测试环境），我会得到：

```
2.0.0p0 :001 > u = User.new
 => #<User uuid: nil, account_id: nil, username_id: nil, password_hash: "", can_login: true, firstname: "", lastname: "", phone: "", mobile: "", fax: "", role: 0, created_at: nil, updated_at: nil>
2.0.0p0 :002 > u.lastname = "some lastname"
 => "some lastname"
2.0.0p0 :003 > u.password = "test"
DEBUG: self.lastname: some lastname
=> "test" 
```

但是，当我运行 RSpec 测试并跟踪 log/test.log 和 grep 以进行调试时，我只是得到：

```
DEBUG: self.lastname: 
```

好像在 RSpec 测试中无法访问姓氏（这是用户模型的 RSpec 测试）。它是 RSpec 中的错误还是我在这里做错了什么？

工厂定义为：

```
FactoryGirl.define do
  factory :user do
    account
    current_username 'user@domain.com'
    password 'iTho6chi'
    can_login true
    firstname 'John'
    lastname 'Doe'
    phone '555-1234'
    mobile '555-4321'
    fax '555-4321'
  end
end 
```

和：

```
require 'spec_helper'

describe User do

  it 'should create a new user using the FactoryGirl registration of user' do

    FactoryGirl.create(:user).should be_valid

  end

end 
```

给出：

```
Finished in 0.376 seconds
1 example, 0 failures 
```

并且 test.log 文件给出：

```
DEBUG: self.lastname: 
```

（姓氏在任何地方都没有设置，需要在模型中设置，所以在测试通过后设置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:38:14.773

看起来这与您在 FactoryGirl 中定义事物的顺序有关。您在设置姓氏之前设置了密码，因此在它调用您的`password=`方法时，该`lastname`属性为 nil。

如果您更改顺序，您将看到预期的调试信息。

# sql - 如何维护6个月的历史数据？

> ID：15643241
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:08:05.453
> 
> 标签：sql, oracle10g

我对 DBA 概念非常陌生。作为工作的一部分，我创建了一个内部数据集市。通过使用数据库链接，我已经连接到不同的来源，并且要求任何数据都将信息存储在这个集市中。我们要求我通过数据库链接连接的数据源每天都在变化。所以我们想跟踪这些数据的变化。所以我创建了一个物化视图并编写了一个程序来每月刷新一次这些表。意味着主表总是每月刷新一次新数据，我们会将旧数据发送到历史表。所以在刷新这些表之前，我编写了一个简单的逻辑来将数据从主表移动到历史表。示例：假设该员工表作为主表，为了维护该表的历史记录，我正在编写一个简单的语句，例如

`create table employee_hst as select * from employee;`（带时间戳）

但这个简单的陈述不符合我的目的。

因为我的要求是我应该只保留 6 个月的历史记录。我的意思是历史表应该只保存 6 个月的历史数据。因此，请告诉我如何在历史数据中仅存储 6 个月大的数据，超过 6 个月的数据应自动删除。

请帮助您的建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:35:32.220

这是基于 scott.emp 表的您可能需要的简化版本。首先是向您展示查询和输出。您还可以使用 INTERVAL 或 ADD_MONTHS 来获取过去 6 个月的数据：

```
SELECT * FROM
(
 SELECT deptno, empno, ename, end_date AS hiredate
      , TRUNC(MONTHS_BETWEEN(sysdate, end_date)) months_of_service  
  FROM emp_test
)
WHERE months_of_service <= 6 -- past 6 moths data only
ORDER BY 1
/

DEPTNO    EMPNO    ENAME     HIREDATE    MONTHS_OF_SERVICE
------------------------------------------------------------
10        7782     CLARK     11/2/2012    4
10        7934     MILLER    9/2/2012     6
...
20        7902     FORD      9/2/2012     6
20        7566     JONES     10/2/2012    5
...
30        7935     WALSH     12/2/2012    3
30        7900     JAMES     9/2/2012     6
30        7844     TURNER    1/27/2013    1
... 
```

下面的示例基于您的帖子 - 您希望每次都重新创建表并用数据填充它。您也可以截断表并重新插入数据 - 由您决定。我个人会选择截断/插入而不是动态删除/创建表。

使用表名作为参数创建过程，或手动运行块，或使用 DBMS_SCHEDULER 或其他工具安排它，以便在您传递给 SCHEDULER 的每个时间间隔自动运行。

在表名之前添加架构名称。如果在 Drop table 部分下运行之前表已经存在，则从代码中删除异常部分。如果你得到“ORA-00942：表或视图不存在”，那么你需要一个例外。

```
DECLARE
  v_tab_name VARCHAR2(100):= 'emp_test2';
BEGIN
  EXECUTE IMMEDIATE 'DROP TABLE '|| v_tab_name; -- may truncate then insert 
  -- This exception will handle ORA-00942: table or view does not exist
  -- If table already exists before you run this then you may remove it from code
  EXCEPTION WHEN OTHERS 
  THEN
    BEGIN
      EXECUTE IMMEDIATE 'CREATE TABLE '||v_tab_name||' AS -- or insert into select...
                  SELECT * FROM
                   (
                   SELECT deptno, empno, ename, end_date
                        , TRUNC(MONTHS_BETWEEN(sysdate, end_date)) months_of_service  
                     FROM emp_test
                   )
                   WHERE months_of_service <= 6
                  ORDER BY 1'; 

       EXCEPTION WHEN OTHERS THEN dbms_output.put_line(SQLCODE||' '||SQLERRM); 
    END;
 END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:47:36.060

Can you create a trigger on the employee table that will execute on INSERT/UPDATE/DELETE, which would do two things: 1) copy the current record in the history table. The history table would have a separate field as a varchar[20] or something similar that would hold the action "INSERT/UPDATE/DELETE" as well as a timestamp field. The second action that it would do is to delete any records in the history table older than 180 days.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:42:54.860

您可以创建一个存储过程

1.  插入历史
2.  刷新物化视图
3.  从历史中删除`where DateCreated < Sysdate - 180`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:04:28.317

几乎所有 RDBMS 都具有某种完整的调度服务，包括[Oracle](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm)。

您最好的选择是向此服务添加一个预定的作业，删除所有超过 6 个月（或 180 天或您有什么）的历史记录。

# javascript - 在带有嵌入式 youtube 播放器的网页上。如何在全屏视频上方显示图像？

> ID：15643242
> 
> 赞同：0
> 
> 时间：2013-03-26T17:08:09.343
> 
> 标签：javascript, html, youtube-api, youtube-javascript-api

我有一个带有嵌入式 youtube 播放器的网页。我需要在全屏播放视频（闪光灯）上显示图像。我曾尝试使用 z-index，但它似乎并没有超过全屏播放器。昨天我以类似的方式问了这个问题（[如何在嵌入我网页的全屏 youtube 视频之上呈现信息？](https://stackoverflow.com/questions/15623751/how-can-i-present-information-on-top-of-a-full-screened-youtube-video-embedded-o)），但我想在这里更清楚、更具体。该网页使用 HTML + Javascript。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:22:51.403

您可以尝试使用 JW Player 播放 Youtube 视频，您可以在播放器顶部添加自定义水印/徽标/图像。虽然我认为你必须为“专业”版本付费，但可以在[这里找到更多信息](http://www.longtailvideo.com/support/jw-player/28839/embedding-the-player#logo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:20:58.420

我能想到的最接近的方式：

使用“videobackground”
搜索 Flashden.com 或 Activeden.com 搜索“youtube 视频背景”
，这会将 youtube 视频作为真实背景（最低-z）播放，
因此您甚至可以将整个网站放在上面。
它将具有全屏/全浏览器框架大小...有些还具有覆盖控件。

[http://activeden.net/search?utf8=%E2%9C%93&term=youtube+video+background](http://activeden.net/search?utf8=%E2%9C%93&term=youtube+video+background)

这个似乎有很多选择：

[http://activeden.net/item/youtube-flash-video-background/158732?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=dSKY](http://activeden.net/item/youtube-flash-video-background/158732?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=dSKY)

使用一些额外的代码，您可以通过普通视频播放器或页面上的链接打开带有 youtube-background 的此类页面。

或者，如果您编辑自己的视频：
您将图像添加到视频本身。

或者，如果您自己上传了视频：
Youtube 可以选择添加一个小的叠加文本/框
因为有一段时间我看到他们现在也允许将真实图片作为覆盖，
您可以设置它出现的时间，而
不是限制最大尺寸是......如果它的（图片）可能只适用于合作伙伴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:29:35.007

您不能在全屏 Flash 视图上添加任何内容（反正我不知道），如果您单击 Youtube 播放器上的展开/全屏视图按钮，它会在一个全新的 Flash 窗口中自行打开，因此您真的不会我猜可以在上面放任何东西。

# c - 使用 sscanf 将双精度从 char 解析为二维数组

> ID：15643243
> 
> 赞同：0
> 
> 时间：2013-03-26T17:08:13.650
> 
> 标签：c, arrays, parsing, multidimensional-array, scanf

对于 C 初学者来说，我在理解数组、指针和数组指针时遇到了一些问题。不幸的是，这里提供的信息对我没有多大帮助，因为它们都处理“更简单”的问题。这是我的代码：

```
/* random.c */
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

int main(){
    double particles[4][22];
    int seed,i,x,y;
    double px_buf, py_buf, pz_buf;

    seed=time(NULL);
    srand(seed);

    /* The random numbers are generated between 1E-12 and 10E-12 */
    /*Double precision floats support up to 15 decimal places*/
    for(i=0;i<20;i++){
        px_buf=((double)rand()/RAND_MAX)*9001E-15;
        py_buf=((double)rand()/RAND_MAX)*9001E-15;
        pz_buf=((double)rand()/RAND_MAX)*9001E-15;
        particles[0][i]=px_buf;
        particles[1][i]=py_buf;
        particles[2][i]=pz_buf;
        printf("(step: %i) The following noise momentum was generated: (%.15E,%.15E,%.15E)\n",i,px_buf,py_buf,pz_buf);
    }

    sscanf("p[20] = nullvector(45.0000000000106,33.03951484238976,14.97124733712793,26.6317895033428)", \
    "p[20] = nullvector(%lf,%lf,%lf,%lf)",&particles[3][20],&particles[0][20],&particles[1][20],&particles[2][20]);

    for(y=0;y<22;y++){
        for(x=0;x<3;x++){
            printf("%.15E \t", particles[x][y]);
        }
        printf("\n");
    }
    return 0;
} 
```

这段代码运行良好，但如您所见，最后四个 (y=21) 数组条目是“空的”，我想以与现在使用 sscanf 行相同的方式填充它。

我想用合适的解析器函数替换 sscanf 部分，但我完全不知道如何正确传递指针，尤其是如何为 sscanf 使用地址 (&) 一元运算符。这是我的初步解析器功能：

```
/* parse.c */
void parser(char *input, double **particles){
    sscanf(input, "p[20] = nullvector(%lf,%lf,%lf,%lf)", \
    &particles[3][20],&particles[0][20],&particles[1][20],&particles[2][20]);
    printf("energy: %E, p: (%E, %E, %E)\n",particles[3][20], \
    particles[0][20],particles[1][20],particles[2][20]);
} 
```

正如你所看到的，我主要对前面有“nullvector(”的四个双精度值感兴趣，我想从字符串中取出这些值并将它们写入多数组“粒子”的第 21“行”。

但是当我添加一个

```
#include "parse.c"
(...)
parse("p[20] = nullvector(45.0000000000106,33.03951484238976, \
14.97124733712793,26.6317895033428)",particles); 
```

到主要功能，它给了我以下错误：

```
[darillian@quantumbox rng]$ gcc random.c -Wall -pedantic -o ../../bin/random 
random.c: In function ‘main’:
random.c:29:2: warning: passing argument 2 of ‘parse’ from incompatible pointer type [enabled by default]
In file included from random.c:4:0:
parse.c:1:6: note: expected ‘double **’ but argument is of type ‘double (*)[22]’ 
```

我究竟做错了什么？;D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:28:47.823

因为您事先知道表示粒子的向量的大小，所以反转数组索引更有意义：

```
#define NUM_PARTICLES 22
/* ... */
double particles[NUM_PARTICLES][4]; 
```

然后，这会更改您的解析函数，使其更易于编写：

```
void parser(char *input, double particles[][4]){
  sscanf(
    input, 
    "p[20] = nullvector(%lf,%lf,%lf,%lf)", 
    &particles[20][3], &particles[20][0],
    &particles[20][1], &particles[20][2]
  );
} 
```

这将编译并执行您想要的操作。作为一个额外的好处，解析器不需要知道场中有多少粒子。相反，它只需要知道粒子是如何表示的（应该如此）。

解析器需要知道该字段中有多少粒子这一事实是一种很大的代码气味，表明有问题。更改程序以使其更有意义也可以很好地解决您的错误！

作为提示，请考虑如下二维数组：

```
double arr[rows][columns]; 
```

新[文件](https://gist.github.com/bricef/5247433)将在使用 GCC 4.6 的 Linux 上无错误地编译。

## 澄清

> 为什么我们需要为解析器函数提供列数？

因为否则该函数将没有足够的信息来计算给定值的偏移量。

一维数组看起来像这样：

```
|value0|value1|value2|... 
```

`value`通过告诉编译器这是一个`double`数组来指定宽度。

所以当你访问这个数组时，假设`arr[17]`计算机实际上是这样做的：

```
address of value (bytes) = 17 * width of double (bytes) 
```

现在考虑一个多维数组`double arr[17][2]`：

```
|va0|vb0|va1|vb1|va2|vb2|... 
```

例如，当您尝试访问一个值时，`arr[3][1]`计算机将执行以下计算：

```
address of value (bytes) = (3 * width of inner array) + (1 * size of element) 
```

在哪里

```
width of inner array = no of elements * size of elements. 
```

在我们上面的例子中，内部数组的元素个数是 2，它们的大小是双精度数。

因此，它需要内部数组（“列”）的宽度来找到值的真实地址，否则它无法在索引时计算偏移量。

这是因为 C 使用[row-major ordering](http://en.wikipedia.org/wiki/Row-major_order)。

# android - 如何将自己的应用程序添加到 SMS 上下文菜单？

> ID：15643250
> 
> 赞同：1
> 
> 时间：2013-03-26T17:08:24.720
> 
> 标签：android, contextmenu

目前，如果我长按 SMS 消息，则会有一个上下文菜单。其中一项是发送（或共享-不确定英文的确切名称）。然后在这里我看到了 Add To Pocket、Add to Springpad、蓝牙、Gmail、Skype 等应用程序。我怎样才能在那里添加自己的应用程序？我将能够获得什么样的 SMS 数据（除了 SMS 文本）？

# css - 试图制作一个水平导航栏，但这很棘手

> ID：15643252
> 
> 赞同：0
> 
> 时间：2013-03-26T17:08:26.770
> 
> 标签：css, image, resize, rollover

我正在尝试为我的网站创建一个水平导航栏，就在横幅下方。我希望我的导航栏由我在 Photoshop 中制作的图像制成。无论我做什么，我都无法让它工作。我也尝试使用翻转链接来实现它。

有人可以告诉我我做错了什么吗？此代码是我的 master.dwt 文件的一部分。它位于我的根目录中名为“templates”的文件夹中。

谢谢！

这是CSS：

```
#navigation {
    width: 800px;
    height: 36px;
    background-color: transparent;
    margin-left:auto;
    margin-right:auto;
}
#navbar {
    list-style: none;
    height: 36px;
}
#navbar li {
    float: left; }
#navbar a {
display:block;
background:url(../nav bar2.png);
width:200px;
text-indent:-9000px;
}
#navbar a.link1:hover {background-position:0px -36px;}
#navbar a.link2 {background-position:-200px 0px;}
#navbar a.link2:hover {background-position:-200px -36px;}
#navbar a.link3 {background-position:-400px 0px;}
#navbar a.link3:hover{background-position:-400px -36px;}
#navbar a.link4 {background-position:-600px 0px;}
#navber a.link4:hover {background-position:-600px -36px;} 
```

这是HTML：

```
<div id="navigation">
<ul id="navbar">
<li><a href="default.html" class="link1">home</a></li>
<li><a href="about.html" class="link2">about</a></li>
<li><a href="portfolio.html" class="link3">portfolio</a></li>
<li><a href="contact.html" class="link4">contact</a></li>
</ul>
</div> 
```

这是照片：http: [//i.stack.imgur.com/uEdO8.png](http://i.stack.imgur.com/uEdO8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:32:25.393

**主要问题**

(1) 如果`url()`图像的路径包含空格，则需要将整个路径放在引号中：

```
background:url("../nav bar2.png"); 
```

话虽如此，网站文件在文件名中包含空格并不是一个好主意。用连字符或下划线替换空格，或者干脆去掉空格会更安全。

(2) 在其中一个 CSS 选择器中有错字：

```
#navber a.link4:hover    /* Wrong */
#navbar a.link4:hover    /* Right */ 
```

**小问题**

(1) 如果您还没有这样做（可能使用 reset.css），请删除`ul`标签中的默认间距；否则，4 个菜单项（`200px`每个）将不适合`800px`容器。

```
#navbar {
    padding-left: 0;
    margin-left: 0;
} 
```

# asp.net-mvc-4 - Entity Framework 和 MVC4：使用视图而不是基表在 MVC 视图中显示父子关系

> ID：15643255
> 
> 赞同：0
> 
> 时间：2013-03-26T17:08:40.877
> 
> 标签：asp.net-mvc-4, entity-framework-5

我有一种情况，我想循环数据库视图中的记录，并且我想包含相关表中的子记录。当然，视图没有外键意义上的“相关表”。

当我遍历基表的记录时，EF 可以很容易地包含相关的子记录。但是当 View 是父级时，它似乎变得混乱。我尝试在我的数据库视图和相关表之间手动创建关联，但这会导致映射错误，这是有道理的，因为数据库中确实没有外键（而且不可能）代表这种关系。

希望我的问题有意义——我想在 MVC 视图中显示父子关系，其中父 IEnumerable 对应于视图而不是基表。

# php - 破解php，但保留提取结果

> ID：15643258
> 
> 赞同：-4
> 
> 时间：2013-03-26T17:08:52.877
> 
> 标签：php, html, mysql, break, extraction

基本上我正在编写一些代码，从数据库中提取有关用户的数据，然后通过 php/html 显示它。我有大量的 html 来显示这些数据，我认为我应该摆脱 PHP 而不是逃避一切，比如`style=\"foo\"`

但是，如果我这样做，那么带有 html 的 php 内联将无法返回从数据库中提取的变量。例如：

```
$sql = "SELECT u.name, u.surname FROM users AS u, bookings AS b WHERE u.ID = '".$bookings['booker_ID']."';";
$result=mysql_query(sql)

if ($r=mysql_fetch_array($result)){
    extract($r);
}

<table class="table">
    <tbody>
    <tr>
        <td style="width:300px">
            Host:
        </td>
        <td>
            <a>
            <?$name?> <?$surname?>
            </a>
........ 
```

不起作用，但是，这样做：

```
$sql = "SELECT u.name, u.surname FROM users AS u, bookings AS b WHERE u.ID='".$bookings['booker_ID']."';";
$result=mysql_query(sql)

if ($r=mysql_fetch_array($result)){
    extract($r);
}

echo "<table class=\"table\">
<tbody>
    <tr>
        <td style=\"width:300px\">
        Host:
        </td>
        <td>
            <a>
            ".$name" ".$surname."
            </a>
        ...... 
```

这涉及到更多的 html，它看起来很难看/难以阅读，而且逃避一切都很烦人，有没有更好的方法来做到这一点/打破 php 但保留与提取结果相关的变量mysql查询？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:11:28.747

您可以随意进出 PHP。从你的例子：

```
<?php

$sql = "SELECT u.name, u.surname FROM users AS u, bookings AS b WHERE u.ID = '".$bookings['booker_ID']."';";
$result=mysql_query(sql)

...

if ($r=mysql_fetch_array($result)){
extract($r);
}

?>

<table class="table">
<tbody>
<tr>
<td style="width:300px">
Host:
</td>
<td>
<a>
<?php echo $name ?> <?php echo $surname ?>
</a> 
```

如果您可以控制您的`php.ini`文件，您还可以打开短标签并使用以下内容：

```
<?= $name ." ". $surname ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:13:51.593

您可以使用`<?=`for 评估：

```
$sql = "SELECT u.name, u.surname FROM users AS u, bookings AS b WHERE u.ID = '".$bookings['booker_ID']."';";
$result=mysql_query(sql)

if ($r=mysql_fetch_array($result)){
    extract($r);
}

<table class="table">
    <tbody>
    <tr>
        <td style="width:300px">
            Host:
        </td>
        <td>
            <a>
            <?= $name ?> <?= $surname?>
            </a>
........ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:25:15.350

你已经打破你的双引号来评估你的变量

```
<a>".$name" ".$surname."</a> 
```

那么为什么不使用单引号来`echo`输出您的内容呢？

```
echo '<table class="table">...'.$name.'...'; 
```

您不必转义双引号，但可以转义单引号。使用双引号的好处是它将评估 PHP 语句而无需退出引号。

```
echo "...<a>$name $surname</a>..." 
```

您的另一个选择是打破 PHP，然后`echo`是你需要的变量

```
?>
<table class="table">
...
<?php echo $name; ?>
... 
```

请注意，这`<?=`是`<?php echo`. 这是 php.ini 中的设置，可能不适用于所有服务器。此外，您可以查看[Heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)语法。

# c# - Windows 窗体 - 如果 form_load 事件失败，则使用 BeginInvoke

> ID：15643259
> 
> 赞同：0
> 
> 时间：2013-03-26T17:08:53.703
> 
> 标签：c#, winforms, event-handling

今天我注意到我的代码中有一个错误，我认为我之前已经处理过了。我正在处理应用程序，我经常`Windows Forms`使用该事件。`form_load`为了处理`Form_load`事件中出现问题并引发异常的情况，我使用以下代码：

```
catch (Exception ex)
{
    LogErrorAndShowMessage(ex, Resources.ERROR_LOAD);

    //Otherwise Error : "Cannot call Close() while doing CreateHandle()".
    this.BeginInvoke(new InvokeDelegate(CloseTheForm));
    LoadForm<Materials>(closeAlreadyOpened : false);
} 
```

这就是我声明委托和方法的方式：

```
public delegate void InvokeDelegate();//used if form load fails
private void CloseTheForm()
{
    this.Close();
} 
```

从今天开始它运行良好。发生了什么 -`Form_load`如果我`DataSource`为我的 ComboBoxes 设置了，并且碰巧从`SetDataSource`方法中抛出了一个错误，最终导致我在使用之前遇到的完全相同的错误`BeginInvoke`- `Cannot call Close() while doing CreateHandle()`。

这是异常行为，如果从其他地方抛出异常，代码仍然可以正常工作，只有在设置数据源期间出现错误。

有什么建议可能导致这种异常行为，我该如何解决？

附言

这就是我创建新表单的方式：

```
protected void LoadForm<T>(ToolStripButton/*ToolStripDropDownButton*/ formButton, 
                           string buttonText, 
                           long? loadEntityId = null, 
                           bool closeAlreadyOpened = true) where T : BaseForm
{
    MainForm parentFrm = GetParentForm();

    if (parentFrm != null)
    {
        if (formButton != null)
        {
            parentFrm.SetForeColor(formButton);
        }

        T openForm = SingletonFormProvider.GetInstance<T>(parentFrm, 
                                                          closeAlreadyOpened);
        openForm.LoadEntityId = loadEntityId;
        openForm.MdiParent = parentFrm;
        openForm.Dock = DockStyle.Fill;
        openForm.Show();
        openForm.Activate();
    }
    else
    {
        MessageBox.Show("Parent form not found!", "Error", 
                        MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

也许`Hans Passant`我应该提出来`try-catch`解决`openForm.Show()`这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:50:55.347

Load 事件就是这样麻烦。它*通常*在调用表单的 Show() 方法时触发。但如果表单构造函数中的初始化代码需要创建原生窗口，它*可以提前触发。*相当不健康，因为表单对象尚未完全初始化。您始终可以通过在 Load 事件处理程序中设置断点并查看调试器的调用堆栈窗口来找出执行此操作的代码。

一般来说，您应该避免 Load 事件，仅在您需要知道窗口的实际大小的极少数情况下才需要它。其他所有内容都属于构造函数，就像它对常规 .NET 类所做的一样。您需要做一些关于捕获和记录异常的事情，最好使用类工厂来完成。样板工厂可能如下所示：

```
 public static Form1 CreateInstance() {
        try {
            var frm = new Form1();
            frm.Show();
            return frm;
        }
        catch (Exception ex) {
            LogErrorAndShowMessage(ex);
            return null;
        }
    } 
```

# node.js - 将函数作为单独的 node.js 进程运行？

> ID：15643263
> 
> 赞同：5
> 
> 时间：2013-03-26T17:09:06.820
> 
> 标签：node.js, asynchronous, concurrency, parallel-processing

是否可以将函数作为完全独立的 node.js 进程运行？例如：

```
var parallel = require("parallel");
parallel(function(){
    var app = require("express")();
    app.on("/",function(req,res){ res.send("hi"); });
    app.listen(80);
},function callback(err,stdout){
    console.log("process terminated!")
}); 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:21:12.573

首先，尝试使用惯用的负载平衡方式。对于节点，这是异步设计。有关更多信息，请参阅这些其他答案：

*   [https://stackoverflow.com/a/8685968/538551](https://stackoverflow.com/a/8685968/538551)
*   [https://stackoverflow.com/a/11278689/538551](https://stackoverflow.com/a/11278689/538551)

不过有一些选择：

*   线程：[threads_a_go_go](https://npmjs.org/package/threads_a_gogo)（[github上的源代码](https://github.com/xk/node-threads-a-gogo)）。
*   纤维：[节点纤维](https://github.com/laverdet/node-fibers)
    *   注意，这只是并发，而不是并行；它更多的是代码结构而不是并行处理（[更多here](http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/)）
*   [apache thrift](http://thrift.apache.org/) [nodejs 插件](http://thrift.apache.org/tutorial/nodejs/)：不是你想要的，但这是我要走的路线。我会用一些低级的东西（比如C）来实现困难的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:25:51.647

基于[多核机器上的 node.js](https://stackoverflow.com/questions/2387724/node-js-on-multi-core-machines)和[Dave Dopson 的回答](https://stackoverflow.com/a/8685968/1479606)

基本上，您可以运行多个进程并让它们相互通信。

# jquery - jQuery cycle2 插件：如果只有 1 个图像，则隐藏控件

> ID：15643264
> 
> 赞同：2
> 
> 时间：2013-03-26T17:09:09.253
> 
> 标签：jquery, controls, slideshow, show-hide

我创建了一个 wordpress 网站，在其中将 cycle2 插件集成到图库中。当用户添加超过 1 个图像时，控件会显示并开始幻灯片转换。我希望控件在只有 1 个图像时隐藏。我有一段代码可以帮助开发过程，但尝试将 css display:none 添加到函数中，但没有任何反应。如果有人可以指导我，那就太好了，因为我尝试了不同的方法。

插件： http: [//www.malsup.com/jquery/cycle2/](http://www.malsup.com/jquery/cycle2/)

CSS：

```
.cycle-slideshow {
    height:400px;
    z-index:0;
}
.cycle-slideshow  img{
    width:100%;
    height:100%;
    z-index:3;
}
.center {
    display:block;
}
.center a{
    z-index:4;
    position:absolute;
    margin-top:-48px;
}
.center a:hover {
    display:block;
}
.center a#prev, .center a#next{
    position:relative;
    width:4%;
    height:60px;
    width:60px;
    margin-top:-60px;
    font-size:40px;
    text-align:center;  
    color:#FFF;
}
.center a#next{
    float:right;
    background:url(images/next.png) center -2px no-repeat;
}
.center a#prev {
    float:left;
    background:url(images/prev.png) center -2px no-repeat;
} 
```

HTML：用于此的 html 很大，并集成到 php 函数中，但大致如下：

```
<div class="cycle-slideshow" 
    data-cycle-fx=fadeout
    data-cycle-timeout=1000
    data-cycle-pause-on-hover="true">
    <img src="http://malsup.github.com/images/p1.jpg">
    ...
</div> 
```

jQuery的片段（我很困惑）：

```
$(document).ready(function () {   
            $('.cycle-slideshow').on( 'cycle-initialized', function( e, opts ) {
            if ( opts.slideCount > 1 ) {
                $(".center").css("display", "none");
            }
            });
        }); 
```

我的控制台也没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:42:47.143

您说您希望控件在只有一张图像时隐藏。但是有：

```
if ( opts.slideCount > 1 ) {
    $(".center").css("display", "none");
} 
```

当有多个图像时，您将它们隐藏起来。

# javascript - 响应中的 XML 在刷新时消失

> ID：15643267
> 
> 赞同：0
> 
> 时间：2013-03-26T17:09:13.330
> 
> 标签：javascript, ajax, jsp

这里有一个奇怪的，这肯定让我摸不着头脑。

**程序：** 通过 iFrame/AJAX 将电子表格上传到服务器。.JSP/APACHE POI 以 XML 格式读取、验证和返回数据。JavaScript 读取 XML 并将其显示在表格中以进行视觉确认。

**问题：** 程序运行良好——直到用户刷新页面。XML 未正确返回，保持格式但缺少数据。上传不同的文件或再次刷新不会改变任何内容，XML 响应保持不变。

**XML:**

```
<records>
    <groups>
        <group>
            <name>
                <cell>B9</cell>
                <value>Group Name</value>
                <error></error>
            </name>

            <...more data...>

        </group>
    </groups>

    <data>
        <groups>3</groups>
        <users>0</users>
        <errors>5</errors>
    </data>
</records> 
```

它应该是如何出现的，但是在刷新时返回是：

```
<records>
    <groups />

    <data>
        <groups>3</groups>
        <users>0</users>
        <errors>5</errors>
    </data>
</records> 
```

底部的三个数字（组、用户和错误）是 .jsp 变量，它们在验证过程中递增，这意味着它们必须有数据才能具有值。每次运行页面时，变量都设置为默认值 0、空白等。

据我所知，只有两种可能：

*   AJAX 正在返回一个缓存页面
*   .JSP 正在记住上一个请求

但我探索了无缓存标头、文件重命名等，但无济于事。

**其他注意事项：** iFrame/AJAX 每次都成功上传文件到服务器 正确的文件名被传递到验证 .jsp 页面 第一次运行总是完美的

验证代码很长，但如果真的需要，我可以在某个地方发布它（但由于代码第一次运行完美，我认为这一定是与通信/缓存相关的问题）。如果有人有任何想法，我在听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:42:01.847

我睡在上面，今天早上我似乎已经解决了。

无论出于何种原因，每次调用 .JSP 文件时，它都使用与以前完全相同的过程，而不是每次都从头开始重新加载和重做页面。我不知道为什么，但我想这可能是我不知道的服务器上的设置。

我重申了主程序中的变量重置为默认值，它现在可以正常工作。

# c# - 在忘记密码过程中显示电子邮件地址是否安全？

> ID：15643268
> 
> 赞同：1
> 
> 时间：2013-03-26T17:09:16.613
> 
> 标签：c#, asp.net, security, user-experience

我有一个 asp.net 应用程序。在这个应用程序中，我处理`[Forget password]`. 当用户忘记密码时，我会通过电子邮件发送密码重置链接。

许多用户抱怨忘记了他们在应用程序中输入的电子邮件地址。他们希望我在该`[Forget password]`部分显示他们的电子邮件地址，以便他们检查目标邮件。

这安全吗？如果不是如何保障呢？

我的团队负责人建议我只显示电子邮件中的第一个字母，以便用户能够识别他的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:15:02.007

如果您需要我的建议，这是一个非常糟糕的主意。如果电子邮件应该是私人的，甚至不要显示它的信件，因为这对于黑客来说将是很多信息。

很多网站所做的是，当用户输入他们的电子邮件并单击提交时，您可以告诉他们他们输入的电子邮件是否在数据库中。如果是，则发送电子邮件。如果它不在数据库中，请显示一条消息并让他们重试。如果他们有 2 封电子邮件，他们会很快找到好一封，而无需查看电子邮件的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:05:49.360

我认为向他们注册的电子邮件发送重置链接是一种常见的做法。 **但是**，当您考虑到您无法控制该电子邮件帐户是否（或更可能是*如何*）被盗用的事实时（人们将 IMAP 设置到客户端电子邮件应用程序而没有未来的密码挑战，孩子们会找出妈妈和爸爸的密码，或者你的名字——不一定是尼日利亚的一些邪恶的黑客），那么这种方法可能看起来不那么安全。部分取决于您要保护的内容。

至于您的客户不记得他们使用了哪个电子邮件帐户——这是一个问题——但我不一定会通过在屏幕上显示他们的电子邮件地址（甚至是其中的一部分）来解决这个问题。我宁愿完全采用不同的方法，提供安全问题，或者如果需要，甚至让他们创建一个新帐户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:14:26.050

仅显示电子邮件的有限字符并没有真正的危险，您可以继续使用它。

理想情况下，我总是创建两个链接。第一个是“忘记用户名”，要求用户回答他/她的秘密问题。

此外，大多数网站（包括 google、facebook 等）都确保您输入备用用户联系方式，例如辅助电子邮件/手机。这有助于保护用户名，并且您可以稍后通过识别您选择的通信方式来重置密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T17:20:41.913

你给用户的每一个信息，你也给了攻击者。如果用户忘记了他的密码和他输入的电子邮件，他仍然可以检查他所有的电子邮件帐户，不是吗？我不会因为那些不记得他们的密码并且不记得他们拥有的所有电子邮件帐户的人而稍微降低应用程序的安全性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T17:13:23.873

我建议只显示电子邮件地址的一部分。例如，而不是`joe.smith@gmail.com`显示：

```
joe.smith@*****
joe.*****@gmail.com
j*****@gmail.com 
```

等等...

# oracle - Oracle 触发器检查一个表中的课程持续时间，如果课程是特定日期，则阻止更新

> ID：15643270
> 
> 赞同：2
> 
> 时间：2013-03-26T17:09:22.010
> 
> 标签：oracle, plsql, triggers

如果我所问的问题已经在其他地方得到解答，请提前道歉，但是我很难找到合适的答案。我知道如何基于一个表创建简单的触发器，但是我试图实现跨两个表的链接更新。场景如下： course 表中有一个 duration 列，而 products 表中有一个 start_date 列。课程是提供课程并且两个表（课程和课程）通过 course_id 链接的实例。如果对应的课程持续时间为 5 天，我需要创建一个触发器，以防止产品表在 1 月期间具有开始日期。我已尝试创建此触发器并可以发布我的努力，但我敢肯定，我绝对远离。

```
CREATE OR REPLACE TRIGGER check_duration
  BEFORE UPDATE on offering
  FOR EACH ROW
BEGIN
  SELECT c.duration
  INTO duration
  FROM course c
  WHERE c.duration = 5
IF(:new.start_date BETWEEN to_date('01/01/2013', 'DD/MM/YYY') AND to_date('31/01/2013', 'DD/MM/YYY')
  THEN RAISE_APPLICATION_ERROR(20100, 'Cannot run particular course during this month')
END IF;
END; 
```

课程表：

```
Course_id(pk) | Title | Duration | Cost 
```

供品表：

```
offering_id(pk) | start_date | location | instructor | course_id(fk) 
```

还有另外两个表出勤和学生我认为我不需要为这个问题发布这些表的构造

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:35:43.590

如果有关于表格的任何新信息，您可能需要对此进行调整，但这里有一个基于您的评论的初步刺伤，即表格中有一个 courseid 列`offering`：

```
CREATE OR REPLACE TRIGGER check_duration
  BEFORE UPDATE on offering
  FOR EACH ROW
DECLARE
  isFound NUMBER;
BEGIN
  -- Just want to know if there's a duration 5 record for the course...
  SELECT 1 INTO isFound FROM DUAL WHERE EXISTS (
    SELECT * FROM course c
    WHERE c.course_id = :NEW.course_id AND c.duration = 5);
  -- Fallthrough to here means a course was found with duration 5\. Is
  -- it scheduled for January (month #1) of any year?
  IF EXTRACT(MONTH FROM :NEW.start_date) = 1 THEN
    THEN RAISE_APPLICATION_ERROR(20100, 'Cannot run particular course during this month');
  END IF;
EXCEPTION
  -- If the query didn't find a course with duration 5 it throws
  -- a NO_DATA_FOUND exception. Ignore the exception because not
  -- finding a course means it's OK to add the row.
  WHEN NO_DATA_FOUND THEN
    NULL;
END; 
```

# google-apps-script - Google Apps 脚本 - 获取 doPost 的 IP 并在电子表格中跟踪

> ID：15643277
> 
> 赞同：3
> 
> 时间：2013-03-26T17:09:53.840
> 
> 标签：google-apps-script

有没有一种简单的方法来捕获广告`oPost(e)`请求的 IP 并将其与 POST 的传入值一起存储以跟踪请求的来源？

它似乎无法通过`e.parameter`.

我找不到其他属性或方法的完整列表`e`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:55:32.440

今天无法在 or 中获取传入请求的 IP 地址或用户`doGet`代理`doPost`。[请在我们的问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)中记录增强请求以及您的用例的详细信息。

# javascript - Jquery递增向下点击

> ID：15643279
> 
> 赞同：1
> 
> 时间：2013-03-26T17:09:54.897
> 
> 标签：javascript, jquery, counting

我似乎无法弄清楚为什么这不起作用，如果您检查下面的链接，然后添加 3 位客人，然后删除一位，柜台就会变得精神恍惚。

[http://www.waterfrontexeter.co.uk/preordernew/](http://www.waterfrontexeter.co.uk/preordernew/)

```
 var count = 1;
    $(".removeOrder").on('click', function(){

                count--;
                $("#counter").html("Total Number of Guest: " + count);
                $("input[id=totalguest]").val("Total Number of Guest: " + count);

        }); 
```

到目前为止，这是我的代码，我认为一切看起来都很好？我尝试了相反的方法，它加起来很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:37:03.073

您将遇到的一个问题是每次单击添加访客按钮时都会创建新的单击处理程序...

```
$(".add").click(function () {
    $(".removeOrder").on('click', function(){
        $(this).parents(".duplicate").remove();
        count--;
        $("#counter").html("Total Number of Guest: " + count);
        $("input[id=totalguest]").val("Total Number of Guest: " + count);
    });
}); 
```

当你运行它时会发生什么，你添加了很多额外的点击处理程序。

根据经验，永远不要在事件回调中添加点击处理程序。

要修复它，您应该将点击处理程序移动到委托事件...

```
$(document).on('click', '.removeOrder', function(){
    $(event.target).closest(".duplicate").remove();
    count--;
    $("#counter").html("Total Number of Guest: " + count);
    $("input[id=totalguest]").val("Total Number of Guest: " + count);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:14:00.077

我认为，问题在于您网站上的 js 代码结构不完善。为了避免此类错误，我建议您以更灵活的方式进行操作：

```
...
count = $(".duplicate").length; 
... 
```

或者，更好的是，您可以直接编写字符串而不将计数器存储在变量中：

```
var strCount = '';
...
strCount = "Total Number of Guest: " + $(".duplicate").length;
$("#counter").html(strCount);
$("input[id=totalguest]").val(strCount); 
```

# java - 将 BigDecimal 舍入为 *always* 有两位小数

> ID：15643280
> 
> 赞同：238
> 
> 时间：2013-03-26T17:09:58.020
> 
> 标签：java, math, bigdecimal, rounding

我正在尝试将 BigDecimal 值向上舍入到小数点后两位。

我在用着

```
BigDecimal rounded = value.round(new MathContext(2, RoundingMode.CEILING));
logger.trace("rounded {} to {}", value, rounded); 
```

但它并没有始终如一地做我想要的：

```
rounded 0.819 to 0.82
rounded 1.092 to 1.1
rounded 1.365 to 1.4 // should be 1.37
rounded 2.730 to 2.8 // should be 2.74
rounded 0.819 to 0.82 
```

我不关心有效数字，我只想要两位小数。如何使用 BigDecimal 执行此操作？还是有另一个更适合这个的类/库？

* * *

## 回答 #1

> 赞同：443
> 
> 时间：2013-03-26T17:14:50.210

```
value = value.setScale(2, RoundingMode.CEILING) 
```

# java - 从另一个数组填充数组

> ID：15643281
> 
> 赞同：0
> 
> 时间：2013-03-26T17:10:05.777
> 
> 标签：java, arrays, nullpointerexception

我正在编写代码，并且不断弹出以下消息：

```
Exception in thread "main" java.lang.NullPointerException
    at age.TokenizeNumbers.setYears(TokenizeNumbers.java:30)
    at age.AgeNo.main(AgeNo.java:18) 
```

第30行的第一个让我很难过。我正在尝试用 array2[]（日期）的内容填充 array1[]（年），并且我只想要存储在 array2[] 中的数字的前两位。那个简单的 for() 循环有问题。只要我写 years=dates 它返回 array1[] (years) 就好了。一旦我尝试循环，我就会收到一个错误。这是代码。谢谢朱拉杰

```
package age;

import java.io.IOException;

public class TokenizeNumbers {
        int lines;
        long[] dates;
        long[] years;
        long[] dateNum;
        long[] convertedYears;
        long annum = 100000000;

    public TokenizeNumbers() throws IOException{
        String[] dates;
        String[] years;

        Vek v = new Vek("C:\\Users\\Juraj\\workspace\\Mackin\\src\\age\\rc.txt");
        lines = v.readLines();
        long[] dateNum = v.openFile();

    }

    public long[] getDateArray(long[] dateNum){
        dates = dateNum;
        return dates;
    }

    public long[] setYears(){
        for(int k = 0; k<dates.length; k++){    
        years[k]=dates[k]/annum;
        }
        return years;
    }

    public void printYears(){
        int y;

        for(y=0; y<lines; y++){
            System.out.println(years[y]);

        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:16:00.340

在这条线上：

```
years[k] = dates[k]/annum; 
```

您正在尝试将值分配给`years[k]`但未`years`在提供的代码中初始化。你可以做

```
long[] years = new long[SIZE]; 
```

这同样适用于`dateNum`。

你也有`String`数组`dates`，并且`years`在你的构造函数中`TokenizeNumbers`虽然没有使用可能会导致混乱。

查看[Arrays#copyOf](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf%28long%5B%5D,%20int%29)用于复制数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:16:37.477

我认为问题出`dates.length`在您的代码中：

```
public long[] setYears(){
     for(int k = 0; k<dates.length; k++){    
        years[k]=dates[k]/annum;
     }
     return years;
} 
```

您必须`dates.length`在设置（初始化）之前使用它。因此，当您执行时`dates.length`，它会说`NPE`，因此请确保`dates`在使用之前进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:28:19.377

日期[] 和年份[]

没有初始化，你需要用“new”关键字来初始化它们

# asp.net-mvc - 对于空的非必填字段，ModelState 被标记为无效

> ID：15643282
> 
> 赞同：11
> 
> 时间：2013-03-26T17:10:10.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

有点神秘。我有一个带有 Year 属性的视图模型：

```
public class TradeSpendingSalesViewModel
{       
    public string ProductCode { get; set; }
    public IEnumerable<SelectListItem> AllowTypeSelect { get; set; }
    public string AllowType { get; set; }
    public IEnumerable<SelectListItem> YearsSelect { get; set; }
    public int Year { get; set; }
} 
```

如果我将一个空视图模型发布到我的控制器：

```
[HttpPost]
public ActionResult Index(TradeSpendingSalesViewModel vm)
{
    var allErrors = ModelState.Values.SelectMany(v => v.Errors);
    foreach (var e in allErrors)
    {
        Response.Write(e.ErrorMessage);
    }
} 
```

然后我收到一条错误消息：“需要年份字段”。

由于我没有使用该`Required`属性注释 viewmodel Year 字段，因此我不清楚为什么会生成此错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T17:43:56.893

默认情况下，ValueType 被隐式标记为`Required`在 mvc 中。实际上，这样做是有目的的，因为根据定义，它们是不可为空的。

我建议您设置`Year`为`int?`，否则，如果您的情况不正确，您可能会更改为 false

`DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes`

在 Global.asax.cs 中。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-26T17:35:58.703

我的第一个猜测是它抛出了一个你没有设置年份并且它为空的异常？如果您将 year 设为 Nullable<int> ，它不会抛出所需的消息吗？

我仍然不希望它是必需的，它是在黑暗中拍摄的

# html - Ember 视图高度

> ID：15643287
> 
> 赞同：11
> 
> 时间：2013-03-26T17:10:28.990
> 
> 标签：html, ember.js, height, footer

我试图让我的 Ember 应用程序的根视图具有完整（100%）的高度，但到目前为止没有成功。

为什么我需要那个？我有一个页脚，即使页面内容没有填满整个高度，我也希望它与底部对齐。为此，我有以下 CSS：

```
.push {
  height: 60px;
}

.content {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 auto -60px;
} 
```

和 HTML（使用 Twitter Bootstrap）：

```
<body>
  <div class="navbar navbar-fixed-top"><!-- ... --></div>
  <div class="content">
    <div class="push"><!--//--></div>
    <div class="container">
  <!-- page content -->
    </div>
    <div class="push"><!--//--></div>
  </div>
  <footer>Copyright ... 2013</footer>
</body> 
```

这在没有 Ember 的情况下效果很好。现在，介绍 Ember：

```
<script type="text/x-handlebars" data-template-name="application">
  <div class="navbar navbar-fixed-top"><!-- ... --></div>
  <div class="content">
    <div class="push"><!--//--></div>
    <div class="container">
  {{outlet}}
    </div>
    <div class="push"><!--//--></div>
  </div>
  <footer>Copyright ... 2013</footer>
</script> 
```

现在它不再起作用了！

该死的东西插入了一个`<div id="emberXYZ" class="ember-view">`包含整个东西的东西，它本身就很好，除了 div 没有完整的高度，并且页脚只是挂在内容之后的页面中间。

我用谷歌搜索了一个解决方案，但找不到任何可以让我解决这个问题的东西。我的猜测是最简单的方法是让 Ember 将根视图设置为 100% 高度（似乎无法找到如何做到这一点），但也许还有其他一些聪明的技巧可以完成我想要的。无论是哪种解决方案，我都需要它至少与 IE8 兼容。

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-03T15:58:14.183

我在尝试让粘性页脚与 Ember JS 和 Bootstrap 一起工作时遇到了同样的问题。正如您所指出的，问题在于 Ember JS 在`div`没有获得 100% 高度的容器中创建视图。

由于 Ember 仅`.ember-view`向`<body>`（即应用程序视图）呈现 1 个直接子级。我们可以使用这个可以在浏览器中工作的 CSS，包括 IE8。

```
/* Works in all browsers, does not effect other views within your application */
body > .ember-view {
    height: 100%;
} 
```

它不会影响`.ember-view`应用程序中的任何子视图，因为它们不会是您页面的直接子视图`<body>`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-03T17:23:36.967

如果您定义应用程序视图，则可以自定义类之类的内容：

```
App.ApplicationView = Ember.View.extend({
    classNames: ["ember-app"]
}) 
```

然后你可以定义你的CSS：

```
.ember-app {
    height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:45:18.817

在这里，我可以给出两个实际上与 Ember.JS 无关的答案
1）如何将 EMberApp 高度的根元素设置为 100%——您不需要在 Ember App 代码中进行任何调整。在 CSS 中，只需将 ember-view 类的高度设置为 100%。

```
.ember-view {
 height: 100%;
} 
```

如果您想避免使用此样式的其他视图，您可以使用视图的 id 作为您在此处指定的一个`emberXYZ`。

但您的实际要求是
2) 使页脚仅占据页面底部 - 您实际上可以制作页脚`absolute`并将`bottom`值设置为`0`.

```
footer {
position:absolute;
bottom: 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-24T13:23:29.990

我最近遇到了这个问题，我花了一些时间来解决它，我只是想与你们分享我的解决方案。

“ember-cli”：“2.13.1”
“引导程序”：“^4.0.0-alpha.6”

因此，正如[user510159](http://stackoverflow.com/users/510159/user510159)所写，问题在于正在设置的 ember-view 类。[Scott](https://stackoverflow.com/users/1295344/scott)将属性添加到 ember-view 类的

解决方案是解决方案的一半。 `height: 100%;`

```
/* Works in all browsers, does not effect other views within your application */
    body > .ember-view {
    height: 100%;
} 
```

为了让它在我的情况下工作，我必须为`div`我的 html 的内部元素设置高度属性。

```
<div class=ember-view>
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
</div> 
```

sccs:

```
#header {
    height: 20%;
}

#content{
    height: 70%;
}

#footer {
    height: 10%;
} 
```

我希望这有帮助。

# java - 打开用java创建的csv文件时如何设置分隔符

> ID：15643288
> 
> 赞同：0
> 
> 时间：2013-03-26T17:10:37.130
> 
> 标签：java, csv

我用java创建了一些csv文件：

```
 FileWriter writer = new FileWriter("test.csv");
        PrintWriter out = new PrintWriter(writer);
        out.println(sb.toString());
        writer.flush();
        writer.close(); 
```

现在当我想用 libre office 打开这个文件时，仍然存在应该使用哪个分隔符的问题。我如何设置一些默认分隔符并跳过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:13:14.517

您使用的分隔符是您用来构造`sb`.

另外，您想调用`flush()`and `close()`on `out`，而不是`writer`. 您的代码可能会将一些数据缓冲在文件中，`PrintWriter`并且无法正确输出到文件中。

# spring - Spring - 使用“JDBCTemplate”时出错：方法“X”指的是缺少的类型 DataAccessException

> ID：15643289
> 
> 赞同：2
> 
> 时间：2013-03-26T17:10:37.610
> 
> 标签：spring, jdbc

我正在 STS 中开发，当我要使用 JDBC 模板时，我遇到了几个错误：S...

我有我的 DAOImplementation，我想重新定义 JDBCTemplate，但是我重新定义的所有方法都返回错误，例如：

*org.springframework.dao.DataAccessException 类型无法解析。它是从所需的 .class 文件中间接引用的 JdbcTemplate 类型的方法 query(String, RowMapper) 指的是缺少的类型 DataAccessException*

具体来说，方法有：

*   更新。
*   查询字符串。
*   询问。

我已经为 Maven 导入了所有依赖项，我不知道发生了什么...

我希望你能帮助我，谢谢大家:)。

胡安迪。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-25T07:14:15.020

在 spring 3 中，整个 jar 结构已经重新组织。没有像以前那样一体化的 spring.jar。你必须选择你需要的东西。DataAccessException 在 org.springframework.transaction-3.0.0.RELEASE.jar

将此 jar 包含在类路径中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-23T05:50:08.420

我有同样的问题添加`spring-tx-XXX.jar`到你的项目 xxx 意味着版本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-13T07:59:24.043

在spring framework 4.1中，“org.springframework.transaction.xxx.jar”将被导入而不是spring-tx-xxx.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-23T04:07:21.747

在我的情况下也是如此，我使用了 Spring-mvc 4.3.0 并在那里有一个 spring-tx.4.3.0 和 DataAccessException。

但我有一个像你这样的错误。

解决方案：我刚刚删除了 maven repo (.m2/repository/) 中的 Spring-tx 文件夹依赖项并再次更新依赖项。解决了我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-15T07:25:50.200

添加 org.springframework.transaction-3.0.1.RELEASE-A.jar

解决我的问题

# javascript - jQuery 仅应用于单个按钮，而不是它的所有实例

> ID：15643294
> 
> 赞同：0
> 
> 时间：2013-03-26T17:10:54.257
> 
> 标签：javascript, jquery, html

我有一个页面，其中包含动态数量的按钮，所有按钮的 ID 为“删除按钮”。我的 jQuery 效果很好，但只在“#delete-button”的第一个实例上。

```
$(document).ready(function(){
    $('#delete_button').mouseenter(function() {
        $(this).closest('tr').css('border-left', 'solid');
        $(this).closest('tr').css('border-left-width', '2px');
        $(this).closest('tr').css('border-left-color', '#dd3333');
    });
    $('#delete_button').mouseleave(function() {
        $(this).closest('tr').css('border-style', 'none');
    });
}); 
```

这是什么感冒引起的？我不能拥有多个具有相同 ID 的按钮吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:11:47.807

如果有多个元素具有相同的 id，则 id 选择器只会获取第一个。您应该改用类名。例如

```
$('.delete_button').mouseleave(... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:12:11.777

**Id**应该是唯一的（只有一个）。请改用 .delete_button**类**。

```
 <button id="delete_button1" class="delete_button"></button>
    <button id="delete_button2" class="delete_button"></button>
    ....
    <button id="delete_buttonN" class="delete_button"></button>

    $(function(){
     $('body').on('mouseenter', '.delete_button', function() {
        $(this).closest('tr').css({
                                  'border-left' : 'solid',
                                  'border-left-width' : '2px',
                                  'border-left-color' : '#dd3333'
                                 });
     });

     $('body').on('mouseleave', '.delete_button', function() {
        $(this).closest('tr').css('border-style', 'none');
     });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:15:22.523

两个答案都是正确的，但要详细说明一下。有效的 html 规定您不能在给定页面中的多个元素上使用相同的 id。Id 是元素的唯一标识符。Jquery 将此视为页面上确实只有一个 id，因此一旦找到匹配 id 选择器的更多元素，它将停止在 dom 中查找。如果您想通过相同的调用将逻辑应用于多个元素，则必须为这些元素分配一个类，因为它们将被多次使用。jquery 知道这一点，并将找到与您的类选择器匹配的所有元素。

# matlab - 频率范围的快速傅立叶逆变换

> ID：15643298
> 
> 赞同：0
> 
> 时间：2013-03-26T17:11:10.157
> 
> 标签：matlab, fft, ifft

我的问题是基于反 fft 从幅度谱 (fft) 中获取原始信号，但仅适用于某些频率范围。8-12赫兹。有人可以帮我吗？我尝试使用：

```
xdft=fft(x); 
ixdft=ifft(xdft(a:b)), %where xdft(a:b) is |Y(f)| for freq 8-12 Hz. 
```

但它不想工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:16:47.843

您可以将 的所有值设置`xdft`为零，除了您想要的值，即

```
xdft = fft(x);
xdft = xdft(1:ceil(length(xdft) / 2));
xdft(1:a) = 0;
xdft(b+1:end) = 0;
ixdft = ifft(xdft, 'symmetric'); 
```

我只采用原始 FFT 数据的一半的原因是，您的结果将关于 Fs / 2 对称（其中 Fs 是采样率），并且如果您不对频率的任一侧做同样的事情中心，你会得到一个复杂的信号。我没有手动对两边做同样的事情，而是取了一侧，修改了它，并告诉`ifft`它必须通过附加你传递的镜像来重建整个频率范围的数据；这是通过使用`'symmetric'`选项调用它来完成的。

如果您需要确定某个频率应该是什么`a`，`b`您可以首先创建一个执行 FFT 的频率向量，然后找到您范围内的那些频率，如下所示：

```
xdft = fft(x);
xdft = xdft(1:ceil(length(xdft) / 2));
f = linspace(0, Fs / 2, length(xdft));
keepInd = f >= 8 & f <= 12; % Keep frequencies between 8 and 12 Hz
xdft(~keepInd) = 0; 
```

请注意，在此示例中，我实际上省略了两个变量的使用，`a`并`b`选择了逻辑索引，这`Fs`就是采样率。

# python - 从模板中反转复杂的管理 URL

> ID：15643300
> 
> 赞同：0
> 
> 时间：2013-03-26T17:11:14.973
> 
> 标签：python, django, django-templates

我发现自己需要更多的灵活性，而不是我理解的基于 Django 文档来反转管理 URL 所能做的事情。我正在做类似的事情：

```
{% url admin:billing_creditcardtoken_add %}?customer={{ user.id }} 
```

这可行，但感觉我应该能够在不离开模板标签的情况下做到这一点。

如果我想`CreditCardToken`从计费应用程序中找到属于当前用户的所有对象，我发现自己在做：

```
{% url admin:billing_creditcardtoken %}?customer={{ user.id }} 
```

...但这完全失败了。有没有更优雅的方式来获取这些 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:37:16.233

我看错了。尽管：

```
{% url admin:billing_creditcardtoken_add %}?customer={{ user.id }} 
```

...可能有点难看，添加语法的唯一作用是尝试构造一个查询字符串，无论如何这不是一个反转 URL 来正常做的事情。所以这是完成这项任务的一种可接受的方法。

我在第二个中寻找的是：

```
{% url admin:billing_creditcardtoken_changelist %}?customer={{ user.id }} 
```

...`changelist`事实证明，它不显示更改历史记录，而是创建可能更改的项目列表。添加查询字符串会应用我需要的正确过滤器。

# c - 静态库“la”库和“a”库有什么区别

> ID：15643301
> 
> 赞同：2
> 
> 时间：2013-03-26T17:11:19.730
> 
> 标签：c, linux, static-libraries

我构建了一个开源应用程序，我发现编译器生成库`.la`文件和`.a`库文件

这两个文件有什么区别？

# cocoa - +[NSColor selectedMenuItemColor] 如何神奇地绘制渐变？

> ID：15643303
> 
> 赞同：4
> 
> 时间：2013-03-26T17:11:21.853
> 
> 标签：cocoa, appkit, nscolor

我正在实现一个自定义 NSMenuItem 视图，当用户将鼠标悬停在它上面时会[显示一个突出显示。](https://stackoverflow.com/questions/6054331/highlighting-a-nsmenuitem-with-a-custom-view)为此，代码`NSRectFill`在设置`[NSColor selectedMenuItemColor]`为活动颜色后调用。然而，我注意到结果*不仅仅是*纯色——它实际上是绘制了一个**渐变**。非常好，但想知道这个“魔法”是如何工作的——也就是说，如果我想定义我自己的颜色，而不仅仅是绘制纯色，我会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:57:45.967

我不知道这*实际上是*如何工作的，但我找到了一种使用自定义渐变（或任何其他绘图操作）复制行为的方法。“技巧”是使用 a `CGPatternRef`，它允许您指定用于绘制模式的回调函数。通常，此回调函数绘制模式的一个“单元格”，但您可以指定一个非常大的模式大小（例如`CGFLOAT_MAX`），以便能够在一次回调调用中填充整个区域。

为了演示该技术，这里有一个类别`NSColor`，允许您从`NSGradient`. 当您`set`使用该颜色然后使用它填充一个区域时，将绘制渐变（线性，从下到上，但您可以轻松更改）。这甚至适用于描边路径或填充非矩形路径，例如`[[NSBezierPath bezierPathWithOvalInRect:NSMakeRect(0, 0, 100, 100)] fill]`因为`NSBezierPath`自动剪辑绘图。

```
//NSColor+Gradient.h
#import <Cocoa/Cocoa.h>

@interface NSColor (Gradient)

+ (NSColor *)my_gradientColorWithGradient:(NSGradient *)gradient;

@end

//NSColor+Gradient.m
#import "NSColor+Gradient.h"
#import <objc/runtime.h>

static void DrawGradientPattern(void * info, CGContextRef context)
{
    NSGraphicsContext *currentContext = [NSGraphicsContext currentContext];
    CGRect clipRect = CGContextGetClipBoundingBox(context);
    [NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithGraphicsPort:context flipped:NO]];
    NSGradient *gradient = (__bridge NSGradient *)info;
    [gradient drawInRect:NSRectFromCGRect(clipRect) angle:90.0];
    [NSGraphicsContext setCurrentContext:currentContext];
}

@implementation NSColor (Gradient)

+ (NSColor *)my_gradientColorWithGradient:(NSGradient *)gradient
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreatePattern(NULL);
    CGPatternCallbacks callbacks;
    callbacks.drawPattern = &DrawGradientPattern;
    callbacks.releaseInfo = NULL;
    CGPatternRef pattern = CGPatternCreate((__bridge void *)(gradient), CGRectMake(0, 0, CGFLOAT_MAX, CGFLOAT_MAX), CGAffineTransformIdentity, CGFLOAT_MAX, CGFLOAT_MAX, kCGPatternTilingConstantSpacing, true, &callbacks);
    const CGFloat components[4] = {1.0, 1.0, 1.0, 1.0};
    CGColorRef cgColor = CGColorCreateWithPattern(colorSpace, pattern, components); 
    CGColorSpaceRelease(colorSpace);
    NSColor *color = [NSColor colorWithCGColor:cgColor];
    objc_setAssociatedObject(color, "gradient", gradient, OBJC_ASSOCIATION_RETAIN);
    return color;
}

@end 
```

使用示例：

```
NSArray *colors = @[ [NSColor redColor], [NSColor blueColor] ];
NSGradient *gradient = [[NSGradient alloc] initWithColors:colors];
NSColor *gradientColor = [NSColor my_gradientColorWithGradient:gradient];
[gradientColor set];
NSRectFill(NSMakeRect(0, 0, 100, 100));
[[NSBezierPath bezierPathWithOvalInRect:NSMakeRect(100, 0, 100, 100)] fill]; 
```

结果：

![截屏](../Images/e7c3be97509087e7c47a5abf04e22904.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:11:21.853

我最好的猜测是它被定义为某种[图案图像](http://christiankienle.blogspot.com/2010/07/drawing-patterns.html)，但这并不能完全回答我的问题，因为看起来这些图案通常会被平铺而不是拉伸。

[苹果工程师在 cocoa-dev 上](http://lists.apple.com/archives/cocoa-dev/2009/Dec/msg01259.html)的帖子证实了这一点，该帖子指出：

> > [[NSColor selectedMenuItemColor] 设置]; NSRectFill(someRect);
> 
> 这是因为 selectedMenuItemColor 是一个碰巧绘制渐变的模式。你可以很容易地用图案画出几乎任何东西 […]

不过，他没有详细说明如何将这些图案拉伸而不是平铺，就像突出显示的菜单项背景一样。该线程中的另一篇文章声称这是“绘图代码中的[特殊情况](http://lists.apple.com/archives/cocoa-dev/2009/Dec/msg01208.html)”，但他可能只是在猜测。

# windows-server-2008 - Windows Server 2008 卡在准备配置 Windows

> ID：15643314
> 
> 赞同：1
> 
> 时间：2013-03-26T17:11:50.413
> 
> 标签：windows-server-2008, windows-server-2008-r2, windows-server

我在 linux-xen 上有一个 Windows Server 2008 Datacenter Edition VM。直到几天前它一直运行良好，显然它试图安装更新。我已经尝试了所有我能想到的方法来通过“准备配置 Windows”启动画面。

我努力了：

1.  启动到安全模式的所有三个选项，所有三个都执行相同的启动屏幕步骤和无限的重启周期。
2.  启动到最后一次正确的配置，再次启动到启动画面
3.  F8，开机进入修复，打开cmd，使用dism.exe /image:d:\ /remove-package PackageName:，结果出现一个错误，我在google上找不到相关信息。
4.  我曾尝试删除 windows\winsxs\pending.xml，它当前已被删除，但仍尝试配置更新。
5.  将 dism.exe 与 /revertpendingactions 开关一起使用，这仍然让我回到启动状态。

    `dism /image:D:\ /cleanup-image /revertpendingactions`

6.  尝试通过安装光盘进行修复，它没有操作系统修复选项，内存诊断、命令提示符和系统恢复三个选项相同

我没有意识到 Windows Server 2008 DC 版没有默认启用系统还原点。显然我没有可恢复的还原点。

我想找到一些成功的方法来通过这个启动屏幕来配置 Windows 更新。如果 pending.xml 文件丢失，那么我不明白它是如何仍然尝试配置更新的。

我很茫然，任何额外的故障排除步骤或建议将不胜感激。在建议方面，我现在意识到我需要仔细检查恢复点是否已启用并定期进行 Windows 系统恢复磁盘映像备份，以便将来拥有更好的恢复能力。

由于这是在 linux-xen 客户机上，我可以复制它并尝试其他方法，但我不确定还有什么可做的。

我可以在不破坏所有许可、rdp 用户、配置文件、数据 ETC 的情况下再次重新安装 windows 2008 服务器并取得某种成功吗？此服务器不是 AD 环境的成员。它只是一个独立的服务器，允许 10-12 个用户通过 RDP 访问一些应用程序。

但是，无论我如何转发服务器上的数据，即使我选择创建一个全新安装的新 VM 以供他们使用。

是否可以通过在引导选项中添加特定开关来通知 Windows 在引导期间跳过更新安装/配置过程？目前它有：

`/NOEXECUTE=OPTOUT`

我很好奇它是否有像 linux 那样的替代运行级别，这可能会让我绕过这种悲惨的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T21:52:42.433

我的卡住了，直到我点击`CTRL`++ 。似乎是一个服务包做到了。我等了几个小时才完成，而事实上我所要做的就是点击++ 。`ALT``DEL``CTRL``ALT``DEL`

# arrays - 我的程序随机中断

> ID：15643315
> 
> 赞同：-2
> 
> 时间：2013-03-26T17:11:57.447
> 
> 标签：arrays, vb.net, random, numbers

我的程序随机决定停止工作。没有错误消息，只是按下播放按钮没有任何反应，我检查了我的卡片摘要，发现对应玩家的 QuantityInteger 减去了一张卡片并添加到弃牌堆，但没有将新卡片添加到他们的手上。然而，这是完全随机的，因为它在随机间隔内工作或不工作。

T 是我代码的核心。目前我只为两个播放器模式实现了它。如果 T = 0 则执行玩家 1 的代码，如果 T = 1 则执行玩家 2 的代码。

ChecksDynamic 表示 For 循环上的范围，因为这些数字表示该玩家在数组中发现的有效数字。

攻击对话框代表您决定攻击的玩家。（只能在 2 人模式下攻击一个人，因为您无法攻击自己）。

T 还将不同玩家数量的整数放入一个用例中。用例的输出变量 = player 分配给 T 的特定值。

然后，我使用一个用例转换所有玩家卡片，以使我的代码动态地检查特定玩家的复选框。

If 语句然后查看复选框是否被选中，并且选择了正确播放器的数量整数（来自选择案例的 SelectPlayer）。

然后根据卡片伤害值减去生命值。

如果卡片是武器，玩家可以选择保留或丢弃卡片。如果不丢弃，除了生命值之外没有任何变化。

在 GrabFromDeckandDiscard 过程中，我再次使用 T 和 Select Case 从正确的玩家物品库存中减去

然后将对应的牌加入弃牌堆

然后我运行一个函数来随机选择一张牌组数量整数中可用的牌。我再次运行 Select 案例，然后将随机生成的数字中的需要卡添加到相应的玩家库存中。

然后最后一个主要部分涉及将 T 切换到下一个值。出于测试目的，我在我的表单上放了一个随机标签，并用它来查看 T 的值。T 似乎并没有失败，据我所知。

```
Private Sub PlayButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PlayButton.Click
        Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}
        Dim HitPoints() As Label = {Nothing, HitPoints1, HitPoints2, HitPoints3, HitPoints4, HitPoints5}
        Dim n, SelectPlayer As Integer
        Label1.Text = T.ToString
        'Player 1
        If T = 0 And (CardCheckBoxArray(0).Checked = True Or CardCheckBoxArray(1).Checked = True Or CardCheckBoxArray(2).Checked = True Or CardCheckBoxArray(3).Checked = True Or CardCheckBoxArray(4).Checked = True) Then
            AtkPlayerDialog.Player1.Enabled = False
            AtkPlayerDialog.Player2.Enabled = True
            AtkPlayerDialog.Player3.Enabled = True
            AtkPlayerDialog.Player4.Enabled = True
            AtkPlayerDialog.Player5.Enabled = True
            ChecksDynamicA = 0
            ChecksDynamicB = 4
            'Player 2
        ElseIf T = 1 And (CardCheckBoxArray(0).Checked = True Or CardCheckBoxArray(1).Checked = True Or CardCheckBoxArray(2).Checked = True Or CardCheckBoxArray(3).Checked = True Or CardCheckBoxArray(4).Checked = True) Then
            AtkPlayerDialog.Player1.Enabled = True
            AtkPlayerDialog.Player2.Enabled = False
            AtkPlayerDialog.Player3.Enabled = True
            AtkPlayerDialog.Player4.Enabled = True
            AtkPlayerDialog.Player5.Enabled = True
            ChecksDynamicA = 5
            ChecksDynamicB = 9
            'Player 3
        ElseIf T = 2 And (CardCheckBoxArray(0).Checked = True Or CardCheckBoxArray(1).Checked = True Or CardCheckBoxArray(2).Checked = True Or CardCheckBoxArray(3).Checked = True Or CardCheckBoxArray(4).Checked = True) Then
            AtkPlayerDialog.Player1.Enabled = True
            AtkPlayerDialog.Player2.Enabled = True
            AtkPlayerDialog.Player3.Enabled = False
            AtkPlayerDialog.Player4.Enabled = True
            AtkPlayerDialog.Player5.Enabled = True
            ChecksDynamicA = 10
            ChecksDynamicB = 14
            'Player 4
        ElseIf T = 3 And (CardCheckBoxArray(0).Checked = True Or CardCheckBoxArray(1).Checked = True Or CardCheckBoxArray(2).Checked = True Or CardCheckBoxArray(3).Checked = True Or CardCheckBoxArray(4).Checked = True) Then
            AtkPlayerDialog.Player1.Enabled = True
            AtkPlayerDialog.Player2.Enabled = True
            AtkPlayerDialog.Player3.Enabled = True
            AtkPlayerDialog.Player4.Enabled = False
            AtkPlayerDialog.Player5.Enabled = True
            ChecksDynamicA = 15
            ChecksDynamicB = 19
            'Player 5
        ElseIf T = 4 And (CardCheckBoxArray(0).Checked = True Or CardCheckBoxArray(1).Checked = True Or CardCheckBoxArray(2).Checked = True Or CardCheckBoxArray(3).Checked = True Or CardCheckBoxArray(4).Checked = True) Then
            AtkPlayerDialog.Player1.Enabled = True
            AtkPlayerDialog.Player2.Enabled = True
            AtkPlayerDialog.Player3.Enabled = True
            AtkPlayerDialog.Player4.Enabled = True
            AtkPlayerDialog.Player5.Enabled = False
            ChecksDynamicA = 20
            ChecksDynamicB = 24
        End If
        'Code for choosing which player to attack
        AtkPlayerDialog.ShowDialog()
        If AtkPlayerDialog.DialogResult = 1 Then
            n = 1
        ElseIf AtkPlayerDialog.DialogResult = 2 Then
            n = 2
        ElseIf AtkPlayerDialog.DialogResult = 3 Then
            n = 3
        ElseIf AtkPlayerDialog.DialogResult = 4 Then
            n = 4
        ElseIf AtkPlayerDialog.DialogResult = 5 Then
            n = 5
        End If
        'CheckedLoop
        For Me.Checks = ChecksDynamicA To ChecksDynamicB
            'Supplement Numbers(1-5) variable in loop
                NumberChecks = NumberArray(Checks)
            'Select the Player
            Select Case T
                Case 0
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger
                Case 1
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger2
                Case 2
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger3
                Case 3
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger4
                Case 4
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger5
            End Select
            'Convert arrays to correct textboxes
            Select Case Checks
                Case 0, 5, 10, 15, 20
                    TextBoxInteger = 0
                Case 1, 6, 11, 16, 21
                    TextBoxInteger = 1
                Case 2, 7, 12, 17, 22
                    TextBoxInteger = 2
                Case 3, 8, 13, 18, 23
                    TextBoxInteger = 3
                Case 4, 9, 14, 19, 24
                    TextBoxInteger = 4
            End Select
            'Play Card(s)
            If CardCheckBoxArray(TextBoxInteger).Checked = True AndAlso SelectPlayer > 0 Then
                'Subtract Hitpoints when damage is delt
                Player1HandGroup(n).HitPoints -= Player1HandGroup(NumberChecks).DamageInteger
                HitPoints(n).Text = Player1HandGroup(n).HitPoints.ToString
                'When player plays hand, card quantity is removed from hand to the discard pile.
                If Player1HandGroup(NumberChecks).CardType = "Weapon" Then
                    DiscardDialog.ShowDialog()
                    'Choose if to Discard Weapon after usage
                    If DiscardDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                        Call GrabFromDeckAndDiscard()
                    End If
                Else
                    Call GrabFromDeckAndDiscard()
                End If
            End If

            ChecksLabel.Text = Checks.ToString
        Next

        Dim CardCheckBoxInteger As Integer
        'Clear Check Boxes when turn is finished
        For CardCheckBoxInteger = 0 To 4
            CardCheckBoxArray(CardCheckBoxInteger).Checked = False
        Next

        'Turn off play button
        PlayButton.Enabled = False
    End Sub
    Private Sub GrabFromDeckAndDiscard()
        'ReDeclare CheckBox Array for Private sub
        Dim n As Integer
        Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}
        'Discard
        Select Case T
            Case 0
                Player1HandGroup(NumberChecks).QuantityInteger -= 1
            Case 1
                Player1HandGroup(NumberChecks).QuantityInteger2 -= 1
            Case 2
                Player1HandGroup(NumberChecks).QuantityInteger3 -= 1
            Case 3
                Player1HandGroup(NumberChecks).QuantityInteger4 -= 1
            Case 4
                Player1HandGroup(NumberChecks).QuantityInteger5 -= 1
        End Select
        'Add Card to Discard Pile
        DiscardGroup(NumberChecks).QuantityInteger += 1
        'Shuffle Deck from Discard Pile if Deck is out of cards
        Call DiscardPile()
        'Reset Number Generator, unless weapon isn't discard
        Dim validDeckGroupsIndexes As New List(Of Integer)
        For ndx As Integer = 0 To (DeckGroup.Count - 1)
            If DeckGroup(ndx).QuantityInteger > 0 Then
                validDeckGroupsIndexes.Add(ndx)
            End If
        Next ndx
        Dim deckGroupNdx As Integer = Rnd.Next(0, validDeckGroupsIndexes.Count)
        Number = DeckGroup(deckGroupNdx).ID

        If DeckGroup(Number).QuantityInteger > 0 Then
            'Grab New Card From Deck
            DeckGroup(Number).QuantityInteger -= 1
            Select Case T
                Case 0
                    Player1HandGroup(NumberChecks).QuantityInteger += 1
                Case 1
                    Player1HandGroup(NumberChecks).QuantityInteger2 += 1
                Case 2
                    Player1HandGroup(NumberChecks).QuantityInteger3 += 1
                Case 3
                    Player1HandGroup(NumberChecks).QuantityInteger4 += 1
                Case 4
                    Player1HandGroup(NumberChecks).QuantityInteger5 += 1
            End Select
            ' assign card type to chosen card and assign "number" to corresponding cards number as well
            CardTypeArray(Checks) = Player1HandGroup(Number).CardType
            NumberArray(Checks) = Number
        End If
        'Switch to next player
        Select Case T
            Case 0
                For CardCheckBoxInteger = 0 To 4
                    Select Case CardCheckBoxInteger
                        Case 0
                            n = 5
                        Case 1
                            n = 6
                        Case 2
                            n = 7
                        Case 3
                            n = 8
                        Case 4
                            n = 9
                    End Select
                    CardCheckBoxArray(CardCheckBoxInteger).Text = Player1HandGroup(NumberArray(n)).CardNameString
                Next
                T += 1
            Case 1
                If GameSize = 2 Then
                    For CardCheckBoxInteger = 0 To 4
                        CardCheckBoxArray(CardCheckBoxInteger).Text = Player1HandGroup(NumberArray(CardCheckBoxInteger)).CardNameString
                    Next CardCheckBoxInteger
                    T -= 1
                End If
                If GameSize > 2 Then
                    T += 1
                End If
            Case 2
            Case 3
            Case 4

        End Select
        Label1.Text = T.ToString
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:24:44.087

我认为如果你清理你的代码，解决方案会更容易找到。例如，这里至少有 20 行只是粗略一瞥就被删除了。

```
 Private Sub PlayButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PlayButton.Click
        Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}
        Dim HitPoints() As Label = {Nothing, HitPoints1, HitPoints2, HitPoints3, HitPoints4, HitPoints5}
        Dim n, SelectPlayer As Integer
        Label1.Text = T.ToString
        'Player 1
        If CardCheckBoxArray(0).Checked Or CardCheckBoxArray(1).Checked Or CardCheckBoxArray(2).Checked Or CardCheckBoxArray(3).Checked Or CardCheckBoxArray(4).Checked Then
            AtkPlayerDialog.Player1.Enabled = Not (0=T)
            AtkPlayerDialog.Player2.Enabled = Not (1=T)
            AtkPlayerDialog.Player3.Enabled = Not (2=T)
            AtkPlayerDialog.Player4.Enabled = Not (3=T)
            AtkPlayerDialog.Player5.Enabled = Not (4=T)
            ChecksDynamicA = 5 * T
            ChecksDynamicB = 5 * T + 4
        End If
        'Code for choosing which player to attack
        AtkPlayerDialog.ShowDialog()
        n = AtkPlayerDialog.DialogResult
        'CheckedLoop
        For Me.Checks = ChecksDynamicA To ChecksDynamicB
            'Supplement Numbers(1-5) variable in loop
            NumberChecks = NumberArray(Checks)
            'Select the Player
            Select Case T
                Case 0
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger
                Case 1
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger2
                Case 2
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger3
                Case 3
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger4
                Case 4
                    SelectPlayer = Player1HandGroup(NumberChecks).QuantityInteger5
            End Select
            'Convert arrays to correct textboxes
            TextBoxInteger = Checks Mod 5
            'Play Card(s)
            If CardCheckBoxArray(TextBoxInteger).Checked AndAlso SelectPlayer > 0 Then
                'Subtract Hitpoints when damage is delt
                Player1HandGroup(n).HitPoints -= Player1HandGroup(NumberChecks).DamageInteger
                HitPoints(n).Text = Player1HandGroup(n).HitPoints.ToString
                'When player plays hand, card quantity is removed from hand to the discard pile.
                If Player1HandGroup(NumberChecks).CardType.Equals("Weapon") Then
                    DiscardDialog.ShowDialog()
                    'Choose if to Discard Weapon after usage
                    If DiscardDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                        Call GrabFromDeckAndDiscard()
                    End If
                Else
                    Call GrabFromDeckAndDiscard()
                End If
            End If

            ChecksLabel.Text = Checks.ToString
        Next

        Dim CardCheckBoxInteger As Integer
        'Clear Check Boxes when turn is finished
        For CardCheckBoxInteger = 0 To 4
            CardCheckBoxArray(CardCheckBoxInteger).Checked = False
        Next

        'Turn off play button
        PlayButton.Enabled = False
    End Sub 
```

和这个！

```
 For CardCheckBoxInteger = 0 To 4
                Select Case CardCheckBoxInteger
                    Case 0
                        n = 5
                    Case 1
                        n = 6
                    Case 2
                        n = 7
                    Case 3
                        n = 8
                    Case 4
                        n = 9
                End Select
                CardCheckBoxArray(CardCheckBoxInteger).Text = Player1HandGroup(NumberArray(n)).CardNameString
            Next 
```

变成：

```
 For CardCheckBoxInteger = 0 To 4
                CardCheckBoxArray(CardCheckBoxInteger).Text = Player1HandGroup(NumberArray(CardCheckBoxInteger+5)).CardNameString
            Next 
```

# python - 检测键序列

> ID：15643317
> 
> 赞同：2
> 
> 时间：2013-03-26T17:12:00.327
> 
> 标签：python, qt, python-2.7, pyqt, qtextedit

我正在使用 pyqt 的 Qshortcut 来尝试检测组合键以触发某些操作，即当用户键入 **->** 进入 QtextEdit 小部件时，我想打印“更改模式”。我见过其他涉及 CTRL+E 或其他一些 CTRL 或 shift 键组合的键序列示例，

```
 self.shcut1 = QtGui.QShortcut(self)
    self.shcut1.setKey("CTRL+E")
    self.connect(self.shcut1, QtCore.SIGNAL("activated()"), self.close) 
```

但我真的很想陷进去**->**（连字符后跟一个大于号）。关于如何做到这一点的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:20:01.057

`QShortCut`只接受[QtCore.Qt::KeyboardModifiers](http://doc-snapshot.qt-project.org/4.8/qt.html#KeyboardModifier-enum)的组合。尝试使用事件过滤器：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QTextEdit):
    modeChanged = QtCore.pyqtSignal(bool)
    _seenMinus  = False
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.installEventFilter(self)

        self.modeChanged.connect(self.on_modeChanged)

    def on_modeChanged(self):
        print "Changing Mode."

    def eventFilter(self, obj, event):
        if event.type() == QtCore.QEvent.KeyPress:
            if event.key() == QtCore.Qt.Key_Minus:
                self._seenMinus = True

            elif event.key() == QtCore.Qt.Key_Greater \
            and  event.modifiers() == QtCore.Qt.ShiftModifier \
            and  self._seenMinus:
                self.modeChanged.emit(True)
                self.setStyleSheet("""
                    background-color: lightgray;
                """)

            elif event.modifiers() != QtCore.Qt.ShiftModifier:
                if self._seenMinus == True:
                    self.modeChanged.emit(False)
                    self._seenMinus = False
                    self.setStyleSheet("")

        return super(MyWindow, self).eventFilter(obj, event)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:22:32.427

只需捕捉信号`QTextEdit::textChanged()`，每个用户都进行更改，扫描文本以查找“->”。授予每次扫描整个文本块的蛮力方法并不漂亮；另一种选择是仅扫描文本的最后两个字符。但是，这忽略了用户通过删除“-”和“>”字符之间的文本来创建“->”的情况。如果您不担心这种情况，那么就选择最后两个。 `QTextEdit::cursorPositionChanged`可能允许您在插入/删除点进行精确测试。

# java - 将页面名称与 jsf web.xml 中的文件名解耦

> ID：15643318
> 
> 赞同：0
> 
> 时间：2013-03-26T17:12:00.853
> 
> 标签：java, jsf-2, tomcat7, web.xml, facesservlet

我希望为响应 specific1.xhtml、specific2.xhtml 等请求而提供页面 generic.xhtml...

有没有办法设置 web.xml 以便多个请求映射到一个文件而不进行重定向？应始终向用户显示特定的.xhtml 名称。

特定名称与特定模式不匹配，例如以单词 specific 开头。我有一个特定名称的列表，这些名称都是用一页实现的。

这等效于具有 generic.xhtml?name=specific1 ，只是 name 参数是请求中的文件名。

如果这不能通过 web.xml 或其他配置文件处理，还有什么方法？

页面由 Tomcat 7 提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:08:47.500

我认为你应该使用[Tuckey 的 UrlRewriteFilter](http://tuckey.org/urlrewrite/)。你应该很容易想出规则来实现你想要的。假设用户访问您的页面`www.yourserver.com/context/subContext/specificX.xhtml`，我认为以下规则应该可以实现您的目标（您需要测试：P）：

```
<urlrewrite >
    <rule>
        <name>Specific to Generic forward</name>
        <condition next="or" type="path-info">/subContext/specific1.xhtml</condition>
        <condition next="or" type="path-info">/subContext/specific2.xhtml</condition>
        <from>^(.*)$</from>
        <to type="forward">/generic.xhtml</to>
    </rule>
</urlrewrite> 
```

# c++ - 如何创建节点结构类型的 Min stl priority_queue

> ID：15643319
> 
> 赞同：2
> 
> 时间：2013-03-26T17:12:01.340
> 
> 标签：c++, c, vector, stl, priority-queue

```
struct node
{
node *right;
node *left;
int data;   
}; 
```

这是我的结构节点。现在我正在使用 stl 优先级队列来提取最小值，即像这样从优先级队列中提取最小值

```
 std::priority_queue<node*, std::vector<node*>, std::greater<node*> > mypq; 
```

但是我没有得到最小值并且用谷歌搜索，我发现（更大），它用于整数，我得到了另一个答案，我像这样实现

```
 struct compare  
 {  
 bool operator()(const node*& l, const node*& r)  
  {  
   return l > r;  
   }  
 }; 
```

而我是这样使用的

```
 std::priority_queue<node*, std::vector<node*>,compare > mypq; 
```

但它显示错误我很沮丧，请任何人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:15:01.853

比较函数应该接受两个参数，它们是优先级队列中元素的类型。你的元素的类型是`node*`，所以你的函数应该定义为`bool operator()(node* l, node* r)`。现在，您可以在考虑到这一点的情况下编写比较函数：

```
struct compare  
{  
  bool operator()(node* l, node* r)  
  {  
    return l->data > r->data;  
  }  
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:14:19.160

```
struct compare  
 {  
 bool operator()(const node*& l, const node*& r)  
  {  
   return l->data > r->data;  
   }  
 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:18:28.930

假设您想使用`data`结构的字段进行比较，这种类型的仿函数应该可以工作：

```
struct compare  
{  
  bool operator()(const node* l, const node* r)  const
  {  
    return l->data > r->data;  
  }  
}; 
```

这`bool operator()`是`const`因为调用它不应该改变它的状态。C++ 标准不要求它是 const 方法，但某些实现可能需要它，从而导致编译错误。

# android - 使用 ksoap 发送数据集

> ID：15643329
> 
> 赞同：2
> 
> 时间：2013-03-26T17:12:43.857
> 
> 标签：android, android-ksoap2

在我的应用程序中，我必须将一个大数据集发送回我们的服务器进行处理。我正在使用我`ksoap`的所有请求从服务器中提取具有正常 xml 属性和属性的内容，但在一次调用中，我必须使用数据集来发送信息。

android 库中是否有任何东西`ksoap`可以使整个过程更容易？

基本上现在我只是用所有这些标题、标签和一个 shcema 构建这个巨大的字符串

例子：

```
String header = "<mmAps diffgr:id=\"mmApps"+String.valueOf(count)+"\" msdata:rowOrder=\"0\" diffgr:hasChanges=\"inserted\">\n";
String ecmmaID = "<ECMMAID>"+c.getString(c.getColumnIndex(Apparatus.APP_ECMMAID))+"</ECMMAID>\n";
etc..

String datasetToSend = header+ecmmaID+....; 
```

然后我会让请求传入大字符串

请告诉我有一些更简单的方法可以做到这一点。

也不可能改变数据集，因为它超出了我的控制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:24:44.517

JSON 是您可以轻松与 KSOAP 一起使用的最佳选择。这将是结构化的，并且比您生成的字符串要好得多。

**1\. 在 android 和你的服务器（C#.Net、Java 等）中创建相同的 Model 类**

```
// In Android
class MyData {
    String someThing;
    public getSomeThing() {}
    //...
} 
```

**2\. 使用模型类将该数据集编码为 Android 中的 JSONArray**

```
// Create JSON Objects in loop for entire dataset
JsonObject jo = new JsonObject();
jo.add(myData.getSomthing());
// Add all JSON Objects in JSONArray
JSONArray jArray = new JSONArray();
jArray.add(jo); 
```

**3\. 使用 KSOAP 将此 JSON 作为字符串发送**

```
String toSendViaKsoap = jArray.toString(); 
```

**4\. 将该字符串从 json 解码为服务器上的模型类列表。**

根据您的服务器语言，解码该字符串并在此处以本地语言创建与步骤 1 类似的类的对象，然后做任何您想做的事情。如果你有 .NET 服务器应用程序，有很多免费的库可以对 json 进行解码，包括内置的 json 支持。但我会更喜欢[这个](http://james.newtonking.com/projects/json-net.aspx)。

希望这可以帮助..：）

# jquery - 如何在 jQuery Mobile 中隐藏搜索类型的输入字段？

> ID：15643331
> 
> 赞同：1
> 
> 时间：2013-03-26T17:12:52.733
> 
> 标签：jquery, search, mobile, input, hide

好的，所以我有两个搜索输入字段，如下所示： ![搜索字段](../Images/13aa576bdd6d0d0b8c6290e71fd557e3.png)

我最初想隐藏第二个/底部一个，但是将 html 中的输入标签设置为*display: none*，结果如下：

```
<input id="start" type="search" value="" placeholder="From">
<input id="end" type="search" value="" placeholder="To" style="display: none;"> 
```

给出：![在此处输入图像描述](../Images/682ec1082a952dd55777218a38dbdef3.png)

而且我无法在 $(document).ready() 上使用 jQuery 动态隐藏元素，因为这些输入位于单独的 jQM 页面上，该页面尚未“渲染”（就 jqm 的样式而言） - 所以类似于$('#end').parent().hide() 将隐藏两个搜索栏的父级。

据我所知，我的选择是在需要时动态创建第二个搜索表单，或者是否有办法中断/添加到 jQM 页面呈现例程。必须/应该有更好的方法，但我没有找到它！

欢迎提出建议:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:54:03.283

是的，所以在经过大量的谷歌搜索和搜索之后，我最终再次找到了答案，解决方案是在页面可见之前绑定到一个事件 jqm 调用（在它应用它的标记之后）：

```
$( '#mypage' ).on( 'pagebeforeshow',function(event){
    $("#end").parent().hide(); //hide the newly jqm-created div around my input
}); 
```

这给出了预期的行为，它可能不是最好的方法（使用 parent()），但它是它的要点。

我不会接受这个作为官方答案，以防有人提出更好的方法。

# binary - 二进制补码；0FFFh 正，0FFFFh 负？

> ID：15643332
> 
> 赞同：2
> 
> 时间：2013-03-26T17:13:08.153
> 
> 标签：binary, x86, twos-complement

从《*装配艺术*》一书中，我复制了这句话：

> 在二进制补码系统中，数字的 HO 位是符号位。如果HO位为零，则为正数；如果 HO 位为 1，则该数为负数。例子：
> 
> 对于 16 位数字：
> 
> `8000h`为负，因为 HO 位为 1。
> 
> `100h`为正，因为 HO 位为零。
> 
> `7FFFh`是积极的。
> 
> `0FFFFh`是负数。
> 
> `0FFFh`是积极的。

我不明白最后两个例子。如果将这两个示例转换为二进制，则会得到`0000 1111 1111 1111 1111`第一个和`0000 1111 1111 1111`第二个。为什么前者为负，后者为正？在我看来，两者的最高位都是 0，因此两者都应该是正数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:18:38.860

> 在 0FFFFH 上以 0 开头的原因是为了给汇编器/编译器一个提示，即 F 是数字的一部分。并不是所有的汇编程序都需要这个。

所以负数实际上是FFFFh，所以1111 1111 1111 1111，那么是负数。

[computer-programming-forum.com/46-asm/1b99282efbac3bcf.htm](http://computer-programming-forum.com/46-asm/1b99282efbac3bcf.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:26:25.050

文字说：**16位**数字。因此，您需要查看右侧的第 16 位。在 0FFFF 中，这将是一个 1。至于前导零，它的符号提示该值是一个数字，而不是一个单词（即不是一个变量）。

如果您建立一个有效数字只能以数字开头的约定，则解析器（包括汇编器）可以更轻松地解析数字文字。一些人类也是如此。你知道，DEADBEEF 是一个有效的十六进制数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:29:51.803

> 你能解释一下为什么 0FFFF 有 5 位数字吗？和FFFF一样吗

这是不一样的。汇编器会将普通的 FFFFh 解释为*符号*。你会得到一个编译错误，因为它找不到任何名为“FFFFh”的符号。将 0 放在它前面可确保汇编器将其解释为数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:18:49.590

如果数字应该是 16 位，则第 16 位作为符号位。首先，

> 0FFFFh

第 16 位是 1

> 0000 1111 1111 1111 1111

在第二个例子中，

> 0FFFh

第 16 位是 0

> 0000 1111 1111 1111

第 16 位为 0，虽然多于 16 位，但二进制只考虑前 16 位。所以，第一个是负数，第二个是正数

# .net - DataTemplate 中的 ComboBox，MouseOver 上未突出显示的项目

> ID：15643336
> 
> 赞同：1
> 
> 时间：2013-03-26T17:13:20.047
> 
> 标签：.net, wpf, combobox, datatemplate, highlight

这是我的问题：我有一个绑定到列表的 ListBox，其中 ItemTemplate 是一个包含 ComboBox 的 DataTemplate，因此，对于列表中的每个项目，我可以显示不同的组合框。

一切正常，除了组合框中的项目没有突出显示。当我放下组合框时，我会看到所有项目，当我单击其中一个项目时，它会在组合框中被选中，但是当鼠标悬停在其中一个项目上时，它仍然是“白色”，它不会像突出显示的那样变暗。我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T23:07:48.313

我已经解决了！在你的组合框中添加这个：

```
<ComboBox.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}">#3399FF</SolidColorBrush>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}">White</SolidColorBrush>
</ComboBox.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:40:16.253

您是否编辑了默认样式？您可以尝试从[MSDN](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)获取 ComboBox ControlTemplate Example并根据您的需要进行相应更改。另一个编辑样式的好工具是 Expression Blend

# javascript - jQuery 真假

> ID：15643341
> 
> 赞同：-4
> 
> 时间：2013-03-26T17:13:25.673
> 
> 标签：javascript, asp.net

```
<script type="text/javascript">
        function abc() {
            var name = $("#name").val();
            $.get("/Game/CheckName", { plName: name }, function (data) {
                alert(data); // here data = true
                    if (data == true) { // i tried so (if (data)) but it didn't work too
                        window.location.href = '@Url.Action("List", "Game")';
                    } else {
                        alert("Name is already use!");
                    }
            });            
        } 
```

在此代码中，`(if (data == true))`值始终 = false。为什么？我怎样才能改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:16:07.983

假设以下假设是正确的（这通常是此类问题的原因）：

> `/Game/CheckName`返回一段文本，要么是单词“true”，要么是单词“false”

那么解决方案是：

比较**字符串**，而不是布尔值。

```
if (data === "true") {} 
```

注意输出中的空格。它将停止匹配精确字符串的代码。您可以通过检查结果中任何位置出现的子字符串“true”来避免这种可能性：

```
if (data.indexOf('true') >= 0) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:14:50.863

比较它像字符串数据 == 'true'

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-03-26T17:14:36.177

尝试

```
if (data === true) 
```

反而

# wpf - 根据上一行值更改 DataGrid 单元格样式

> ID：15643344
> 
> 赞同：2
> 
> 时间：2013-03-26T17:13:53.653
> 
> 标签：wpf, datagrid

在 DataGrid 中 - 有没有办法根据上一行中单元格的值设置单元格样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:24:58.253

在绑定期间，您可以通过访问[RelativeSourceMode Enumeration](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesourcemode.aspx)来访问集合中的先前值。具体来说，`RelativeSource PreviousData`。

> 字符串标记 PreviousData; 对应于创建时将其[Mode](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.mode.aspx)属性设置为[PreviousData的](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesourcemode.aspx)[RelativeSource](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.aspx)。

这是我在 XAML 中创建逗号分隔的项目列表并确保最后一个值不包含尾随逗号时使用的示例：

```
<DataTemplate>
    <TextBlock FontFamily="Segoe Print">
        <TextBlock x:Name="Comma" Text="," />
        <TextBlock Text="{Binding}" />
    </TextBlock>

    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource PreviousData}}" Value="{x:Null}">
            <Setter TargetName="Comma" Property="Visibility" Value="Collapsed" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

# android - Android - 创建内核级函数并将其公开给更高 Java 级别的步骤

> ID：15643349
> 
> 赞同：0
> 
> 时间：2013-03-26T17:14:13.657
> 
> 标签：android, linux, kernel, gpio

目标本质上是提供某些控制 GPIO 输出的方法，例如。打开和关闭 LED，然后在 ContentProvider 中实现这些方法，可能有几个。

这将允许各种应用程序访问 ContentProvider，并且当触发某些通常会插入或返回数据的操作时，可以执行 GPIO 操作。我相信这部分没问题，它只是达到了可以从 Java 级别调用内核级别函数的地步。

可能吗？这不值得麻烦吗？理想情况下，希望在应用程序之间共享低级 GPIO 功能，并允许另一方自己开发应用程序，但能够使用这些 GPIO 交互功能。

这是可以实现的吗？如果是这样，关于如何去做的任何指示？

干杯

# openid - 使用 Google OpenID 获取用户电子邮件地址

> ID：15643351
> 
> 赞同：1
> 
> 时间：2013-03-26T17:14:20.843
> 
> 标签：openid, dotnetopenauth, asp.net-4.5, google-openid

我正在尝试使用 DotNetOpenAuth 通过 OpenID 从 Google 检索用户的电子邮件地址。

到目前为止，我的代码为当前用户正确重定向到 Google，并请求我的应用程序读取电子邮件地址的权限。然而，在被转移回我的页面后，它直接反弹回谷歌。我明白为什么会发生这种情况（因为页面永远不会进入回发状态），但是您如何区分请求和响应数据，以便我可以正确读取页面中的电子邮件地址？

**是否有推荐的/行业标准方法？**

我只是刚开始使用 OpenID 和 DotNetOpenAuth，但拥有强大的 ASP.NET 技能，所以请保持你的答案清晰（！）

谢谢

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    ltl.Text = "Welcome " & User.Identity.Name

    If Not Page.IsPostBack Then
        Dim openid As New OpenIdRelyingParty
        Dim req As IAuthenticationRequest = openid.CreateRequest(User.Identity.Name)
        Dim fetch As New FetchRequest
        fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email)
        fetch.Attributes.AddRequired(WellKnownAttributes.Name.FullName)
        req.AddExtension(fetch)
        req.RedirectToProvider()
    Else
        Dim openid As New OpenIdRelyingParty
        Dim resp As IAuthenticationResponse = openid.GetResponse()
        If resp IsNot Nothing Then
            Dim fetch As FetchResponse = resp.GetExtension(Of FetchResponse)()
            If fetch IsNot Nothing Then
                Trace.Warn(fetch.GetAttributeValue(WellKnownAttributes.Contact.Email))
            Else
                Trace.Warn("fetch was Nothing")
            End If
        Else
            Trace.Warn("resp was Nothing")
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:48:27.697

您是否[在 SourceForge 上](http://sourceforge.net/projects/dnoa/files/releases/v4.2/v4.2.2/)找到了 DotNetOpenAuth 示例？

这是推荐的模式：

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    ltl.Text = "Welcome " & User.Identity.Name

    Dim openid As New OpenIdRelyingParty
    Dim resp As IAuthenticationResponse = openid.GetResponse()
    If resp Is Nothing Then
        Dim req As IAuthenticationRequest = openid.CreateRequest(User.Identity.Name)
        Dim fetch As New FetchRequest
        fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email)
        fetch.Attributes.AddRequired(WellKnownAttributes.Name.FullName)
        req.AddExtension(fetch)
        req.RedirectToProvider()
    Else
        Dim fetch As FetchResponse = resp.GetExtension(Of FetchResponse)()
        If fetch IsNot Nothing Then
            Trace.Warn(fetch.GetAttributeValue(WellKnownAttributes.Contact.Email))
        Else
            Trace.Warn("fetch was Nothing")
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:57:45.443

`IsPostBack`您可以添加查询字符串参数并检查其是否存在，而不是检查。您可以在用户请求登录或提供者返回时执行此操作。

下面的这段代码检查是否存在指示提供程序已重定向回您的页面的查询字符串参数。

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    ltl.Text = "Welcome " & User.Identity.Name

    If Not Request.QueryString(your_parameter) Is Nothing Then
        'Read Response
        ...
    Else
        'Send Request
        Dim openid As New OpenIdRelyingParty
        Dim req As IAuthenticationRequest = openid.CreateRequest(User.Identity.Name)

        'Specify the url the provider should redirect to
        'this would be whatever url brings you to this page plus query string 
        req.AddCallbackArguments("returnUrl", your_url);
        ...
    End If
End Sub 
```

# cpu - XMM 寄存器总数或每个内核

> ID：15643356
> 
> 赞同：7
> 
> 时间：2013-03-26T17:14:28.303
> 
> 标签：cpu, multicore, sse, cpu-registers, cpu-architecture

在多核 CPU 中，每个内核是否都可以访问自己的 XMM 寄存器组？例如，如果一个芯片被列为具有 16 个 XMM 寄存器 (XMM0-XMM15)，那么每个内核是 16 个寄存器还是共享 16 个？

我的理解是每个内核都有自己的寄存器组，我假设 XMM 寄存器也是如此，但我无法找到支持这个假设的参考。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T17:31:55.247

是的，每个内核都有自己的寄存器。

值得注意的是，每个内核实际上有大约一百个物理寄存器。只有 16 个寄存器*名称*。这适用于 GPR 和 XMM 寄存器。

# android - 将 GLSurfaceView 与 MapView 同步（Google Map API v2）

> ID：15643358
> 
> 赞同：0
> 
> 时间：2013-03-26T17:14:41.317
> 
> 标签：android, google-maps-android-api-2, glsurfaceview

是否可以在 MapView 顶部的 GLSurfaceView 中渲染一些 OpenGL 对象并将它们与纬度和经度一起放置（同步 2 个表面）。

我可能需要将纬度和经度转换为屏幕位置，但这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:40:11.447

我通过使用`Renderer`绘制场景然后使用`glReadPixels`. 之后，我只需要使用位图将 a 添加`GroundOverlay`到我的地图中。

# excel - 让纸张大小适合 Excel 中的打印区域

> ID：15643360
> 
> 赞同：0
> 
> 时间：2013-03-26T17:14:43.360
> 
> 标签：excel, pdf, printing, pdf-generation

我在 MS Excel 2010 中写了一个 10*5 的表格。然后我打算把这个表格打印成 PDF 文件。

默认情况下，它会在常规页面上打印此表，例如 Letter(8.5*11)。这给出了大部分区域都是空白的打印纸。

我可以将此表格打印到具有最少空白空间的 PDF 文件吗？

换句话说，让纸张大小适合打印区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:23:40.487

是的，您可以通过将正常打印区域设置为 pdf 中所需的区域并将打印边距设置设置为最小，并将页面设置设置为适合 x x y 页。

如果那仍然会让您的 pdf 页面上空无一物，那么您的区域就太小了。通过增加该区域内的文本大小来增加其大小，直到您在 PDF 保存中看到您填满了整个区域。

不幸的是，似乎没有一个单一的魔法设置。您必须自己找到“纸张”的大小和文本的大小......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:59:06.307

如果确实存在该选项，则文本将非常大，因为您实际上只是放大了..

我建议在页面布局视图（goto **View** -> **Page Layout**）中查看您的表格并摆弄表格的行和列，直到它占用整个空间。

# ios - 验证 UITextField 不包含字母

> ID：15643361
> 
> 赞同：1
> 
> 时间：2013-03-26T17:14:44.727
> 
> 标签：ios, objective-c, cocoa-touch, nsstring, uitextfield

如何查看我`UITextField`的信件中的文字？我希望我`UITextField`只包含数字字符、破折号、+ 符号、空格等，但**不**包含字母。

那么如何检查我的`UITextField.text`是否**不**包含字母？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:19:31.630

我认为这应该有效：

```
if ([myTextField.text rangeOfCharacterFromSet:[NSCharacterSet letterCharacterSet]].location != NSNotFound) {
  NSLog(@"This string contains letters.");
} 
```

所有可用的字符集都记录在这里：[NSCharacterSet](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html "NSCharacterSet")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T15:00:49.253

为了增加更多好处并防止错误，如果您使用故事板，请选择`UITextField`并打开属性检查器（右侧列，顶部有盾牌图标），在该视图的中点有 5 个下拉菜单，其中之一这就是所谓的`Keyboard`。你有几个控制器，其中一个是`Numbers and Punctuation`.

这会将您的键盘设置为仅显示数字和所有可用的标点符号。将其与：

```
//SET LEGAL CHARACTERS
NSCharacterSet* tSet = [NSCharacterSet characterSetWithCharactersInString:
                        @"abcdef1234567890ABCDEF"];//whatever amount or type of characters you want to use
NSCharacterSet* invSet = [tSet invertedSet]; 

if (yourString rangeOfCharacterFromSet:invSet].location != NSNotFound){
    [[[UIAlertView alloc] initWithTitle:@"Input Error"
                                message:@"Make sure the value entered is numerical or punctual only."
                               delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil] show];

} 
```

并且您有一个简单易用的应用程序，可以防止用户意外或故意造成错误。

# java - 如何在android中进行测验？

> ID：15643362
> 
> 赞同：-3
> 
> 时间：2013-03-26T17:14:46.117
> 
> 标签：java, android

对于我最后一年的申请，我需要做一个测验或琐事游戏。基本上，我需要做的只是一份包含 26 个问题的问卷，其中包含图像和多个答案。我找到了一个网站，但现在我意识到这不允许多个答案。实际上它真的很酷，因为最后它显示了正确的答案，我知道如何将它集成到我的应用程序中。我的问题是 - 你知道一个为 Android 提出问题的好网站吗，或者至少你有没有找到一个相关项目的链接？

我知道，这不是一个很好的问题，可能会被关闭，但我真的很接近完成我的申请，这是唯一缺少的东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:19:50.043

请查看[github 开源存储库](https://github.com/search?q=trivia%20game%20android&ref=commandbar)或[“测验”存储库](https://github.com/search?q=android%20quiz&ref=commandbar)以获取您想要的信息。

# php - Opencart 登录类别

> ID：15643367
> 
> 赞同：0
> 
> 时间：2013-03-26T17:14:56.067
> 
> 标签：php, login, opencart

我需要为所有类别创建一个登录名，除了一个有自己的 ID 的类别，比如“192”

在 controller/category.php 我添加了以下...

```
if (!$this->customer->isLogged()) {
    $this->session->data['redirect'] = $this->url->link('account/account', '', 'SSL');
    $this->redirect($this->url->link('account/login', '', 'SSL'));
} 
```

但这显然为所有类别添加了登录信息。

添加到上面的代码以使类别“192”不必登录查看的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:35:17.430

从任何地方打开`catalog/controller/product/category.php`并删除上面的代码。然后找到

```
if ($category_info) { 
```

之后，放

```
if (!$this->customer->isLogged() && $category_id != 192) {
    $this->session->data['redirect'] = $this->url->link('account/account', '', 'SSL');
    $this->redirect($this->url->link('account/login', '', 'SSL'));
} 
```

# java - (Java) 为什么 Math.ceil(15/10) 是 1.0 而不是 2.0？

> ID：15643372
> 
> 赞同：1
> 
> 时间：2013-03-26T17:15:02.633
> 
> 标签：java, casting, double, integer-division

为什么是`Math.ceil(15/10)`1.0 而不是 2.0 ？相反，当我运行时，`Math.ceil((double)15/10)`我得到了预期的 2.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:15:54.473

因为将一个整数除以另一个整数会得到一个整数：`15/10`is `1`。

从[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17)：

> 整数除法向 0 舍入。也就是说，在二进制数值提升（第 5.6.2 节）之后为整数的操作数 n 和 d 产生的商是一个整数值 q，其幅值尽可能大，同时满足 |d · q|。≤ |n|。此外，当 |n| 时 q 为正 ≥ |d| 并且 n 和 d 具有相同的符号，但是当 |n| 时 q 为负 ≥ |d| n 和 d 符号相反。

您应该使用`Math.ceil(15.0/10)`或`Math.ceil(15f/10)`（第一个使用双打，第二个使用浮动）。

# c - glibc 检测到无效指针

> ID：15643375
> 
> 赞同：1
> 
> 时间：2013-03-26T17:15:06.507
> 
> 标签：c, pointers, memory-management

因此，对于我的一项学校作业，我必须实现自己的内存分配包。我使用一个结构块来表示一个空闲的内存块，并创建一个这些块的列表，显示我的内存堆上的空闲空间在哪里，也称为我的“空闲列表”。下面是我创建的块结构。

```
 typedef struct block {
    struct block *next;
    struct block *prev;
    int size;
    unsigned char *buffer;
} block; 
```

my_malloc() 实现（见下文）在我的测试下似乎工作正常。

```
void *my_malloc(int size){
    //if my_malloc has never been called before create the first
    // free block who's data buffer spans the entire heap
    if(!initialized){
        initialized = 1; //Next time, we've already inited
        // Create the first block
            *(block *)head = (block){NULL, NULL, 0, NULL};
            block *p = (block *)head;
            //try setting size to 128KB and point buffer properly
            p->size = 1024*128;
            p->buffer = p+ 1;
            printf("Address of buffer is %p\n", p->buffer);
            // set the program break 
            brk(head + (sizeof(block)+p->size));

    }
    block *p = (block *)head;   //point to the head, we don't want to move the head...
    // find the appropriate free block and check for nullity
    block *selected = find_block(size);
    if(selected==NULL){
        printf("Had no space first time around!\n");
        //go to the end of the free list
        while(p->next!=NULL){
            p=p->next;
        }
        // increase it's size by 128KB
        p->size=p->size+(128*1024);
        // move the program break by additional 128KB
        sbrk(128*1024);
        //now the last free block has enough space, so make it the selected block
        selected=p;
    }
    block *new_block; // new block we will create
    // if the block we have to allocate is pointed by head, we need a new
    // head
    if ((block *)selected==(block *)head){
        //shift head
        head = selected->buffer+ size;
        //Create a new block there, it wil be our new head and we don't return it
        *(block *)head = (block){NULL, NULL, 0, NULL};
        block *new_block = (block *)head;
        new_block->prev = selected->prev;
        new_block->next = selected->next;
        new_block->size = selected->size-size;
        new_block->buffer = new_block +1;
        printf("The split new_block->buffer points to %p\n", new_block->buffer);
        //return the pointer to original head, not the new one.
        total_malloced=+size;
        return selected->buffer;
    }
    // The selected node is not the head so we don't move the head
    else{
        new_block = selected->buffer+size;
        new_block->prev = selected->prev;
        new_block->next = selected->next;
        new_block->size = selected->size-size;
        new_block->buffer = new_block +1;
        //remove that selected block from the free list
        (selected->prev)->next=new_block;
        total_malloced=+size;
        return selected->buffer;
    }

} 
```

将返回的 my_malloc 指针发送到 my_free() 之类的方法时会出现此问题。

```
void my_free(void *ptr) {
    printf("Dummy instruct.\n");
} 
```

我收到以下错误：

```
*** glibc detected *** ./myMalloc: munmap_chunk(): invalid pointer: 0x0804a17e ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x75ee2)[0xb7e7cee2]
/lib/i386-linux-gnu/libc.so.6(+0x765c5)[0xb7e7d5c5]
./myMalloc[0x80485b1]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb7e204d3]
./myMalloc[0x8048401]
======= Memory map: ========
08048000-08049000 r-xp 00000000 00:3d 8557227    /home/2009/gkrink/os/myMalloc
08049000-0804a000 r--p 00000000 00:3d 8557227    /home/2009/gkrink/os/myMalloc
0804a000-0804b000 rw-p 00001000 00:3d 8557227    /home/2009/gkrink/os/myMalloc
0804b000-0808c000 rw-p 00000000 00:00 0          [heap]
b7e06000-b7e07000 rw-p 00000000 00:00 0 
b7e07000-b7faa000 r-xp 00000000 00:11 4370765    /lib/i386-linux-gnu/libc-2.15.so
b7faa000-b7fab000 ---p 001a3000 00:11 4370765    /lib/i386-linux-gnu/libc-2.15.so
b7fab000-b7fad000 r--p 001a3000 00:11 4370765    /lib/i386-linux-gnu/libc-2.15.so
b7fad000-b7fae000 rw-p 001a5000 00:11 4370765    /lib/i386-linux-gnu/libc-2.15.so
b7fae000-b7fb1000 rw-p 00000000 00:00 0 
b7fbb000-b7fd7000 r-xp 00000000 00:11 6829467    /lib/i386-linux-gnu/libgcc_s.so.1
b7fd7000-b7fd8000 r--p 0001b000 00:11 6829467    /lib/i386-linux-gnu/libgcc_s.so.1
b7fd8000-b7fd9000 rw-p 0001c000 00:11 6829467    /lib/i386-linux-gnu/libgcc_s.so.1
b7fd9000-b7fdd000 rw-p 00000000 00:00 0 
b7fdd000-b7fde000 r-xp 00000000 00:00 0          [vdso]
b7fde000-b7ffe000 r-xp 00000000 00:11 4370778    /lib/i386-linux-gnu/ld-2.15.so
b7ffe000-b7fff000 r--p 0001f000 00:11 4370778    /lib/i386-linux-gnu/ld-2.15.so
b7fff000-b8000000 rw-p 00020000 00:11 4370778    /lib/i386-linux-gnu/ld-2.15.so
bffdf000-c0000000 rw-p 00000000 00:00 0          [stack]
Aborted 
```

这是我的测试功能：

```
void main(void){
    printf("Testing initiated...\n");
    printf("head is located at %p\n\n", head);
    void * tester;
    printf("mallocing 100...\n");
    tester = my_malloc(100);
    printf("The allocated memory starts at %p\n", tester);
    printf("mallocing 150...\n");
    tester=my_malloc(150);
    printf("The allocated memory starts at %p\n", tester);
    printf("head is located at %p\n\n", head);
    printf("brk is firstly located at %p\n", sbrk(0));
    printf("mallocing 10...");
    tester=my_malloc(10);
    printf("The allocated memory starts at %p\n", tester);
    printf("brk is still at %p\n", sbrk(0));
    free(tester);
} 
```

并且没有将返回的 my_malloc() 指针发送到 my_free() 我得到正确的输出，例如：

> 测试已启动...头部位于 0x804a054
> 
> mallocing 100... buffer 的地址是 0x804a064 split new_block->buffer 指向 0x804a0d8 分配的内存从 0x804a064 mallocing 150... split new_block->buffer 指向 0x804a17e 分配的内存从 0x804a0d8 开始 head 位于 0x804a16e
> 
> brk 首先位于 0x806a064 mallocing 10...拆分的 new_block->buffer 指向 0x804a198 分配的内存从 0x804a17e 开始 brk 仍然在 0x806a064

为什么我不能像那样发送指向另一个函数的指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:21:07.413

如果这是实际代码，则您调用的是标准库`free`而不是您自己的版本：

```
free(tester); 
```

将指针传递给您尚未分配的内存`malloc`肯定不会做好事。

# php - 仅抓取网页的主要内容（忽略页眉、页脚和侧边栏）

> ID：15643376
> 
> 赞同：7
> 
> 时间：2013-03-26T17:15:07.337
> 
> 标签：php, xpath, screen-scraping

我熟悉在 php 中抓取和使用 XPATH 来解析 DOM 以从页面中获取我想要的内容。我想听到一些关于如何以编程方式忽略页面上的页眉、页脚和侧边栏的建议，并且只提取主体内容。

给出的情况是没有特定的目标，所以我不能简单地忽略特定的ID，比如#header 和#footer，因为每个页面的写法都略有不同。

我知道谷歌这样做，我知道这一定是可能的，我只是不知道从哪里开始。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:51:42.237

没有确定的方法来确定它，但您可以使用启发式方法获得合理的结果。一条建议：

从同一个网站上抓取两个或多个页面，然后从顶层开始逐块比较它们，深入几层，直到块足够相等。比较不会是 == 而是相似性指数，例如[`similar_text`](http://www.php.net/manual/en/function.similar-text.php). 超过一定相似性百分比的块很可能是页眉、页脚或菜单。您必须通过实验找出哪个阈值有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:59:38.697

没有小而快的方法可以从网页中抓取内容。我已经做了很多这些。这没有简单的规则。在基于 html3/table 的设计时代的早期，有不同的识别方式，并且网站设计本身受到限制。屏幕尺寸有限，因此菜单通常位于顶部，右侧或左侧面板没有空间。然后是带有桌子设计的面板的时代。现在是浮动内容的时代。然后我们甚至使用溢出：隐藏，所以它更难通过字数等来了解正文。

在编写 html 文件时，代码永远不会被标记为内容或菜单。您有时可以从类名中派生出它，但这不是通用的。内容从 CSS 中获取其大小和位置。所以你的解析器永远无法确定页面的正文部分。如果您使用嵌入式 html 查看器并在渲染后使用 DHTML/JS 来定位块的大小，可能有一些方法可以做到这一点，但它仍然永远不会通用。我的建议是制作你的解析器并逐个改进它。

对于 google，它已经为大多数 html 设计组合制作了程序。但即使对于谷歌来说，制作一个通用解析器，我认为也是不可能的。

# android - 绘制带有路径和缩放功能的地图

> ID：15643378
> 
> 赞同：0
> 
> 时间：2013-03-26T17:15:11.040
> 
> 标签：android, canvas, path

我正在绘制带有预定义路径的地图。地图可以移动，可以放大和缩小。这在我的 Android 4.0.4 上放大时效果很好，快速流畅，看起来不错。

由于我得到了 4.1.2 的更新，一切都不同了：当放大形状时，现在会变得像素化（不清晰，如附图中所示）并且移动地图非常抖动。我没有更改代码。

令人惊讶的是，在模拟器 (AVG) 中它在缩放时看起来也不错（见下面的截图）

我所做的是： - 我在大约 x=0-2000 和 y=0-1500 的区域中有很多路径 - 我只绘制在我的屏幕尺寸之间可见的路径 - 缩放我用 canvas.scale(x ,x) 在我的自定义视图的 onDraw() 方法中 - 移动地图是由我的自定义视图的 onDraw() 方法中的 canvas.translate(x,y) 完成的

我尝试了什么：

*   我试图用缩放而不是使用 canvas.scale() 来转换所有路径 -> 这会起作用，但我的形状变大了，所以无法绘制：“形状路径太大而无法渲染成纹理”

*   用大坐标重新创建路径。同样的问题，而且速度很慢->“形状路径太大而无法渲染为纹理”

*   将形状分成几个形状不是解决方案，因为它之前已经在我的 4.0.4 上工作过，而且我也喜欢正确绘制边框。（例如海岸线）

![在此处输入图像描述](../Images/415e30d9be535962e353c23c6782ce08.png)

模拟器

![在此处输入图像描述](../Images/3ace6aa9b30ddd0234a4c0e6012c5f61.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:50:32.560

我发现了问题：我的新 JellyBean 更新硬件加速默认为开启，而硬件加速接缝有问题。我不得不在 AndroidManifest.xml 中明确错误的“硬件加速”：

```
 <application
   android:hardwareAccelerated="false"
    android:icon="@drawable/ic_launcher" 
```

问候

# java - 内存中有任何文件系统库吗？

> ID：15643388
> 
> 赞同：0
> 
> 时间：2013-03-26T17:15:20.037
> 
> 标签：java, c++, .net, c, go

我想知道内存中是否有任何用于 c、c++、golang、java、.net 的文件系统库

目的是将临时文件保存在内存中，不供用户访问，仅供程序内部使用，所以我不需要ram驱动器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-21T12:33:13.983

有一个名为[JimFS](https://github.com/google/jimfs)的 Google 开发库，用于使用 Java NIO 创建内存文件系统，它是在 Apache 2 许可证下开源的，可在[GitHub](https://github.com/google/jimfs)上找到 它非常易于使用

```
try (FileSystem fs = Jimfs.newFileSystem(Configuration.unix())) {
  Path foo = fs.getPath("/foo");
  Files.createDirectory(foo);

  Path hello = foo.resolve("hello.txt"); // /foo/hello.txt
  Files.write(hello, ImmutableList.of("hello world"), StandardCharsets.UTF_8);

  // Close the FileSystem when you're done with it so it can be garbage collected.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:25:56.397

如果使用 java : [commons vfs](http://commons.apache.org/proper/commons-vfs/filesystems.html)支持[RAM](http://commons.apache.org/proper/commons-vfs/filesystems.html#ram)文件系统类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:25:47.053

在 C++ 中，最简单的解决方案是将 `std::ostringstream`数据放入字符串中，然后 `std::istringstream`重新读取它。尽管已弃用， `strstream`但可以避免动态分配和副本（假设您事先知道数据的最大大小）。或者您可以轻松编写自己的代码`streambuf`来完成。或者，如果您不需要格式化，当然，您可以将数据推送到`std::vector`.

IIRC，Java 也有基于内存的流（我认为是基于 Byte[]）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:27:43.303

.Net 有一个可以使用的 MemoryStream 类（System.IO）：http: [//msdn.microsoft.com/en-us/library/system.io.memorystream.aspx](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)

# numbers - Java将数字加在一起+得分？

> ID：15643393
> 
> 赞同：0
> 
> 时间：2013-03-26T17:15:24.600
> 
> 标签：numbers, int

嗨，我做了这个来添加到评分系统中。

```
public int Cascore = 0;
public int Dascore = 0;
        public int dascore () {
        return Dscore = + 5;
    }
    public int cascore () {
        return Cscore = + 3;
    }
    public int ddascore () {
        return Dscore = + 1;
    } 
```

我在代码中添加到评分系统的点期间将这些方法称为 dascore() cascore()，但总体 Dascore 和 Cascore 似乎只有 3 或 5。

```
 System.out.println("Bad Score: " + Dscore);
          System.out.println("Good Score: " + Cscore); 
```

只需输出 5 和 3。什么时候应该是 160/130 之类的......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:24:55.063

这不起作用，因为您没有编写正确的代码。好吧，你的 IDE 应该会产生一个错误......

java中没有类似下面的东西！

```
= + 
```

与其他语言一样，Java 支持 +=

在 java 中，甚至 + = 也是错误的。因为这两个运算符之间不能有空格。

```
public int Cascore = 0;
public int Dascore = 0;
    public int dascore () {
    return Dscore += 5;
}
public int cascore () {
    return Cscore += 3;
}
public int ddascore () {
    return Dscore += 1;
} 
```

为了更好地理解，在使用常量之前，不要以大写字母开头变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:19:48.597

我们试试看 ：

> Dscore **+=** 5

不是**=+**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:20:30.897

看起来你想要这个

```
public int Cascore = 0;
public int Dascore = 0;
    public int dascore () {
        return Dscore +=  5;
    }
public int cascore () {
        return Cscore +=  3;
    }
public int ddascore () {
        return Dscore +=  1;
    } 
```

# vector - 如何在 CC3Camera 或 CC3MeshNode 上设置原点轴

> ID：15643395
> 
> 赞同：0
> 
> 时间：2013-03-26T17:15:32.807
> 
> 标签：vector, rotation, cocos3d

所以我在 Obj-C 中使用 Cocos3D。

由于我最初的问题似乎不够清楚，无法得到任何答案，所以我再次写了一遍。

我正在制作一个 3D 查看器，因此我希望能够在屏幕上拖动手指并使我的 object( `Dobj`) 自行旋转。

```
-(void) startRotatingObjectOnXYAxis { saveXYAxisStartLocation = Dobj.rotation; }
-(void) rotateObjectOnXYAxisBy: (CGPoint) aMovement
{
    CC3Vector rotateVector = CC3VectorMake(aMovement.y, aMovement.x, 0.0f);
    Dobj.rotation = CC3VectorAdd(saveXYAxisStartLocation, rotateVector);
} 
```

问题是，当我这样做时，对象轴也会旋转，并且经过一些拖动，X 轴将是垂直的（而不是水平的），旋转变得非常混乱。

所以我想在每次拖动后将轴重置为原点。

像这样的东西：

```
-(void) startRotatingObjectOnXYAxis { saveXYAxisStartLocation = Dobj.rotation; }
-(void) rotateObjectOnXYAxisBy: (CGPoint) aMovement
{
    [Dobj moveMeshOriginTo:CC3VectorMake(0.0f, 0.0f, saveXYAxisStartLocation.z)];
    CC3Vector rotateVector = CC3VectorMake(aMovement.y, aMovement.x, 0.0f);
    Dobj.rotation = CC3VectorAdd(saveXYAxisStartLocation, rotateVector);
} 
```

但它没有任何作用...

在我的例子`aMovement`中是`(UIPanGestureRecognizer*) gesture.translation`值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:55:41.853

好的，我终于以这个解决方案结束了：

```
-(void) startRotatingObjectOnXYAxis { objectXYAxisStartRotation =  CC3VectorMake(0.0f, 0.0f, 0.0f); }
-(void) rotateObjectOnXYAxisBy: (CGPoint) aMovement
{
    CC3Vector rotateVector = CC3VectorMake(aMovement.y, aMovement.x, 0.0f);
    [Dobj rotateBy:CC3VectorDifference(rotateVector, objectXYAxisStartRotation)];
    objectXYAxisStartRotation = rotateVector;
} 
```

看来 rotateBy 只会旋转对象，而不旋转轴。所以问题解决了

# c# - 如何在c#中将方法参数声明为具体类和接口

> ID：15643398
> 
> 赞同：2
> 
> 时间：2013-03-26T17:15:37.353
> 
> 标签：c#, inheritance

我想编写一个接受参数的方法，该参数是一个框架。在伪 C#

```
public void Foo(FrameworkElement and ISomeInterface p){
    ...
} 
```

这可能吗？它必须与这样定义的类一起工作

```
public class MyGrid : Grid, ISomeInterface {
} 
```

众所周知，Grid 是 FrameworkElement 的子类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:17:06.423

您可以创建一个强制执行这些约束的通用方法：

```
public void Foo<T>(T p) 
    where T : FrameworkElement, ISomeInterface 
```

所以在这里你说`Type`传入的对象需要是 a`FrameworkElement`和 implement `ISomeInterface`。

# asp.net - Kendo TabStrip：在 MVC 4 中将动作渲染到选项卡中

> ID：15643401
> 
> 赞同：4
> 
> 时间：2013-03-26T17:15:51.400
> 
> 标签：asp.net, asp.net-mvc, kendo-ui

我一直在尝试将**@Html.RenderAction(...)**渲染和操作到 Kendo Tab Strip 的**.Text()**中，但没有成功。

有没有办法将完整的操作呈现到选项卡中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T17:51:59.883

我找到了：

```
@(Html.Kendo().TabStrip()
  .Name("tabMain")
  .Items(items =>
      {
          items.Add()
               .Text("My Tab Title")
               .Content(Html.Action("Index","MyChildController").ToString());
      })
  ) 
```

诀窍是 在**Html.Action调用上调用****.ToString**。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T12:23:40.707

其他方法，在这种情况下使用 Html.RenderAction 是：

```
@(Html.Kendo().TabStrip()
  .Name("tabMain")
  .Items(items =>
      {
          items.Add()
               .Text("My Tab Title")
               .Content(@<text> @{Html.RenderAction("Action", "Controller", new (or nothing) {data ="" });} </text>);
      })
  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-19T12:53:57.593

我想你也可以使用`LoadContentFrom`：

```
@(Html.Kendo().TabStrip()
    .Name("tabMain")
    .Items(items => {
        items.Add()
            .Text("My Tab Title")
            .LoadContentFrom("Index","MyChildController"));
  }) 
```

)**

# java - 谷歌在多个片段android中映射api v2

> ID：15643408
> 
> 赞同：0
> 
> 时间：2013-03-26T17:16:11.653
> 
> 标签：java, android, google-maps-android-api-2, android-maps-v2

我有一个 FragmentActivity，这是一个标签栏。在第一个选项卡中包含一个片段（Supportmapfragment）。在第二个选项卡中，还包含一个片段（Supportmapfragment）。当我切换到第二个选项卡时，我无法在第二个 supportmapfragment 中做任何事情，但是当屏幕锁定然后解锁时已经可以做到。在这个开关中，我隐藏了第一个片段，因为我需要保持第一个片段的状态。

这是可能的，我该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T07:46:40.033

我尝试的解决方案是在不同选项卡的活动之间切换时，使用 removeView() 在 onpause() 上删除地图，然后在 onResume() 上使用 addView() 再次将其添加回来。

地图在相对布局中膨胀，并从该布局本身添加和删除。

在 onCreate() ：

```
 setContentView(R.layout.rel_layout);
rel = (RelativeLayout)findViewById(R.id.rel);
LayoutInflater inflater = LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
view = inflater.inflate(R.layout.map_layout, null);
rel.addView(view); 
```

onPause() 和 onResume() 方法：

```
 @Override
   protected void onPause() 
   {
        rel.removeView(view);
    super.onPause();
   }

   @Override
   protected void onResume() 
   {
    if (view.getParent()!=rel)
        rel.addView(view);
    super.onResume();
   } 
```

# elasticsearch - 在弹性搜索中按日期过滤

> ID：15643414
> 
> 赞同：25
> 
> 时间：2013-03-26T17:16:37.797
> 
> 标签：elasticsearch

我正在尝试搜索在某个范围内具有日期字段的所有项目，但它失败了（不返回任何结果）

查询：

```
{
  "query": {
    "filtered": {
      "query": {
        "match_all": {}
      },
      "filter": {
        "range": {
          "last_updated": {
            "from": "2013-01-01 00:00:00"
          }
        }
      }
    }
  }
} 
```

映射：

```
{
    "my_doctype": {
        "_timestamp": {
            "enabled": "true"
        },
        "properties": {
            "cards": {
                "type": "integer"
            },
            "last_updated": {
                "type": "date",
                "format": "yyyy-MM-dd HH:mm:ss"
            }
        }
    }
} 
```

结果是：

```
 {
        took: 1
        timed_out: false
        _shards: {
            total: 1
            successful: 1
            failed: 0
        }
        hits: {
            total: 0
            max_score: null
            hits: [ ]
        }
    } 
```

由具有数值的整数字段（“卡片”）的范围过滤的相同查询可以正常工作。将日期更改为非常早的开始 (1900-01-01 00:00:00) 也未显示任何结果。

我究竟做错了什么？

顺便说一句，我知道我在映射中启用了 _timestamp，但这不是我过滤的字段。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-26T17:33:50.040

对我来说似乎工作正常：

```
curl -XPUT localhost:9200/test -d '{
    "settings": {
        "index.number_of_shards": 1,
        "index.number_of_replicas": 0
    },
    "mappings": {
        "doc": {
            "_timestamp": {
                "enabled": "true"
            },
            "properties": {
                "cards": {
                    "type": "integer"
                },
                "last_updated": {
                    "type": "date",
                    "format": "yyyy-MM-dd HH:mm:ss"
                }
            }
        }
    }
}
'
curl -XPOST localhost:9200/test/doc/1 -d '{
    "last_updated": "2012-01-01 12:13:14"
}
'
curl -XPOST localhost:9200/test/doc/2 -d '{
    "last_updated": "2013-02-02 01:02:03"
}
'
curl -X POST 'http://localhost:9200/test/_refresh'
echo
curl -X GET 'http://localhost:9200/test/doc/_search?pretty' -d '{
    "query": {
        "filtered": {
            "query": {
                "match_all": {}
            },
            "filter": {
                "range": {
                    "last_updated": {
                        "gte": "2013-01-01 00:00:00"
                    }
                }
            }
        }
    }
}
' 
```

# jquery - 为什么我的输入类型图像会回发

> ID：15643417
> 
> 赞同：0
> 
> 时间：2013-03-26T17:16:40.713
> 
> 标签：jquery, forms, submit

我有一个非常简单的表单，里面只有两个小按钮。一种类型：隐藏另一种类型：图像。语义结构：

```
<form id = "whatever" method = "post" action = "<?php echo $self; ?>" >  
<input type = "hidden" value ="whateverelse">
<input type = "image" src="www.someweburl.com/resource.gif" id="notsubmit">
</form> 
```

表格看起来不错。问题是，当我单击图像按钮时，它实际上会返回。它不是真正的提交按钮，所以不确定为什么会发生提交。我确实计划让它实际提交，所以有一个 jquery 处理程序来做这样的事情：

```
$('#notsubmit').submit(function(event) {

event.preventDefault();
// do my business logic
// make some food 
// whatever else I want to do
$('#whatever').submit();

}); 
```

就是这样。问题是提交仍然发生，而没有真正执行提交处理程序中的代码。我注释掉了提交功能，但它仍然提交。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:21:52.117

```
$('#notsubmit').click(function(event) {
    // do my business logic
    // make some food 
    // whatever else I want to do
    $('#whatever').submit();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:22:42.997

> 它不是真正的提交按钮，所以不确定为什么会发生提交。

它是一个提交按钮。我引用了关于类型的[HTML 规范：](http://www.w3.org/TR/html401/interact/forms.html#h-17.4.1)`image`

> 创建一个图形[提交按钮](http://www.w3.org/TR/html401/interact/forms.html#submit-button)。该`src`属性的值指定将装饰按钮的图像的 URI。`alt`出于可访问性的原因，作者应通过属性为图像提供替代文本。

* * *

> 问题是提交仍然发生，而没有真正执行提交处理程序中的代码。

这是因为`submit`按钮上永远不会触发事件，永远不会执行您的处理程序，并且永远不会阻止默认操作（表单提交）。您必须将`click`事件处理程序绑定到按钮：

```
$('#notsubmit').click(function(event) {
    event.preventDefault();
}); 
```

该`submit`事件仅在`form`元素上触发。

# powershell - 如何通过 PowerShell 删除 ADFS 依赖方信任加密证书？

> ID：15643420
> 
> 赞同：1
> 
> 时间：2013-03-26T17:16:47.777
> 
> 标签：powershell, adfs2.0

我可以使用以下 PowerShell 命令将加密证书添加到 ADFS 依赖方信任：

```
Set-ADFSRelyingPartyTrust -TargetName "My RP" -EncryptionCertificate $myCert 
```

我可以使用具有不同`EncryptionCertificate`参数变量的相同命令更改证书，但是如何删除证书？不传递变量，传递`null`或空字符串`''`会导致异常：

```
Missing an argument for parameter 'EncryptionCertificate'. 
Specify a parameter of type 'System.Security.Cryptography.X509Certificates.X509Certificate2' 
and try again. 
```

我怎样才能“清除”现有的证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T20:57:50.713

你几乎拥有它。为了从现有依赖方删除加密证书，您必须使用 $null 变量：

```
Set-ADFSRelyingPartyTrust -TargetName "My RP" -EncryptionCertificate $null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T15:13:23.870

使用该 PowerShell 语句不会将其从 ADFS GUI 的“加密”选项卡中删除。因此，虽然它可能具有预期的效果，但从 GUI 中不清楚它是否实际被使用。

```
Set-ADFSRelyingPartyTrust -TargetName "My RP" -EncryptionCertificate $null 
```

# java - JTable 模型数据未显示更新的数据

> ID：15643421
> 
> 赞同：0
> 
> 时间：2013-03-26T17:16:52.527
> 
> 标签：java, swing, jdbc, jtable, defaulttablemodel

我的 Swing 应用程序几乎没有文本文件和 Jtable。当我更新 textFileds 中的值时，这些值在更新数据后没有立即显示在 Jtable 上。我尝试使用 tbmodel.fireTableDataChanged(); 但这没有用。

```
 try {
              String driveID = txtDriverID.getText();
              String trnsCompName = (String)cmbTransCompany.getSelectedItem();
              String trDriverName = txtName.getText();
              String trAddress = txtAddress.getText();
              String trDob = txtDOB.getText();
              String license = txtLicence.getText();
              String telephone = txtTelephone.getText();
              PvtTransportDriver pvtDriver = new PvtTransportDriver(driveID, trnsCompName, trDriverName, trAddress, trDob, license, telephone);
              int res = PvtTransDriverController.updatePvtTransportDriver(pvtDriver);
              tbmodel = (DefaultTableModel) tblAllPvtDrivers.getModel();
              tbmodel.fireTableDataChanged();
              if (res > 0) {
                    JOptionPane.showMessageDialog(null, "Updated");
              }
        } catch (    ClassNotFoundException | SQLException ex) {
              Logger.getLogger(PvtTransDriver.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:01:39.447

是没有必要调用`fireTableDataChanged`的。这是由`TableModel`.

要更新表行，您可以使用[setValueAt](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#setValueAt%28java.lang.Object,%20int,%20int%29)

要添加行，您可以使用[addRow](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)

例如：

```
tbmodel.setValueAt(driveID, 0, 0); 
```

# python - beautifulsoup attrs 匹配太多

> ID：15643423
> 
> 赞同：1
> 
> 时间：2013-03-26T17:16:57.940
> 
> 标签：python, beautifulsoup, matching

Html 是这样的：

```
<div class="score header">text i don't want</div><div class="score">text i want</div> 
```

我像这样做美丽的汤， bs.find("div", attrs={"class":"score"}) 它匹配第一个 div 标签。我很惊讶 bs 会这样。显然我可以做 bs.findAll(...)[1] 但我认为这是一个太丑陋的解决方案。我如何更正确地匹配这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:25:01.203

BeautifulSoup 中的类匹配匹配类属性中的*每个*类。

*要过滤掉与指定类匹配的*元素，您可以使用生成器表达式：

```
next((el for el in bs.find_all("div", attrs={"class":"score"}) if el['class'] == ['score']), None) 
```

这将返回与类*完全匹配的**第一个*元素，不允许其他类。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:25:46.887

首先`<div>`有两个`score`和`header`类。如果你想要没有 的元素`score`，你应该在之后过滤它们

```
items = soup.find_all(...)
good_items = [item for item in items if 'score' not in item['class']] 
```

当然，过滤条件取决于您要精确匹配的内容

```
'score' not in item['class'] 
```

或者

```
['score'] == item['class'] 
```

请记住该项目具有的类别的`item['class']`回报`list`。所以如果你想匹配多个类，那么你应该使用[set](http://docs.python.org/2/library/stdtypes.html#set)

```
set(['foo', 'bar']) == set(item['class']) 
```*

# c# - SqlException 未处理 C#（单元格值已更改）

> ID：15643431
> 
> 赞同：0
> 
> 时间：2013-03-26T17:17:28.077
> 
> 标签：c#, sql, sqlexception, unhandled-exception

我想从单元格中更改一个值（网格视图）。当我更改值时，我得到“SqlException was unhandled In correct syntax near '='”错误。我调试了我在单元格中输入 50 的代码，我看到了

> ```
>  e.value= 50 , 
> 
>   dt.Rows[e.RowHandle]["Operator_ID"] = null 
> ```

```
 private void gridView1_CellValueChanged(object sender, DevExpress.XtraGrid.Views.Base.CellValueChangedEventArgs e)
 {
        DataTable dt = gridControl1.DataSource as DataTable;
        SqlProcess process = new SqlProcess();
        process.updateQuery(@"UPDATE IE_OPERATOR_GID_KTS_PER SET CarpanDegeri ='" + e.Value +
                           "' WHERE IE_OPERATOR_GTD_KTS_PER.Operator_ID= " + dt.Rows[e.RowHandle]["Operator_ID"]);
} 
```

在表中，Operator_ID 列的属性不是 NULL。我该如何解决这个问题？

感谢您的回答。

PS:: 我对 C# 和 SQL 比较新。因此你能明确回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:19:56.433

这几乎可以肯定是因为您正在使用手动添加的值而不是使用参数来构建 SQL。将 SQL 更改为：

```
UPDATE IE_OPERATOR_GID_KTS_PER SET CarpanDegeri = @CarpanDegeri
WHERE IE_OPERATOR_GTD_KTS_PER.Operator_ID = @OperatorID 
```

...然后为这些参数提供值。我不清楚`SqlProcess`是什么，但如果它不支持参数化查询，那么它从根本上被破坏了:(

[`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)有关如何使用参数的示例，请参阅文档。您应该*始终*为值执行此操作：

*   它避免了[SQL 注入攻击](http://bobby-tables.com)
*   它避免了数据转换问题
*   它使您的代码（SQL）和数据（参数值）分开 - 看看上面的 SQL 比所有字符串连接的版本更容易阅读

# jquery - 使用 Phonegap + jQuery Mobile 滚动

> ID：15643433
> 
> 赞同：2
> 
> 时间：2013-03-26T17:17:34.873
> 
> 标签：jquery, cordova, mobile, scroll, swipe

我的应用程序有问题，使用 Phonegap Cordova + jQuery Mobile 制作（或制作）。我用我的 iPad 试用了这个应用程序，但只用 iPhone 版本。

Y 在 config.xml 中将 UIWebViewBounce 指令更改为 false，因为 Safari Scroll 。但我有一个列表视图。如果我向上滑动（不是向下，仅向上），视图会向上滚动几个像素，与 iOS 顶部栏（带有小时、电池等的栏）相同的像素。

我尝试使用此 JS 代码：

```
document.ontouchmove = function (e) {
    e.preventDefault();
}; 
```

但是，我的视图滚动也不起作用，尽管它们具有可滚动类。

我试过这个：

```
document.ontouchmove = function (e) {
var touchstart = e.pageY;
if(touchstart < 35) {
    e.preventDefault();
}}; 
```

当我从标题向上滑动时它可以工作，应用程序不会滚动，好的，但是如果我滚动到列表的底部，最后一个元素，然后我继续向下滚动（向上滑动），应用程序会用标题，只有那个像素，然后停止滚动......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:52:11.060

我找到了解决办法。在这篇文章中：

[iOS Safari – 如何禁用过度滚动但允许可滚动的 div 正常滚动？](https://stackoverflow.com/questions/10238084/ios-safari-how-to-disable-overscroll-but-allow-scrollable-divs-to-scroll-norma)

第二个答案，来自 Tyler Dodge

# javascript - 在模块javascript中调用公共方法

> ID：15643436
> 
> 赞同：1
> 
> 时间：2013-03-26T17:17:42.503
> 
> 标签：javascript, node.js

我试图从模块模式中调用一个公共方法。

我使用模块模式是因为它允许拆分成各种不同的 JS 文件，以使代码更有条理。

但是，当我调用公共方法时，我得到 a`TypeError`并且`typeof`仍然未定义。

请帮忙！！提前致谢。

### main.js

```
function MainObject() {
    this.notify = function(msg) { console.log(msg); }
}

var connObj = require("./myextobj");

var mainObj = new MainObject();

connObj.connection.handle = mainObj;

console.log(typeof connObj.connection.connect); // undefined

connObj.connection.connect(); // TypeError: Object has no method 'connect' 
```

### 我的extobj.js

```
module.exports = {

    connection: function () {

        this.handle = eventhandle;

        this.connect = function() {

            // connect to server
            handle.notify("completed connection....");

        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:24:57.717

这是因为您正在导出一个包含 的对象`connection: function ()`，这是一个构造函数，需要*newing-up*。然后您可以访问`this`附加到该特定实例的属性：

```
var connection = require("./myextobj").connection; // reference the constructor function

var conn = new connection(); // new-up connection

console.log(typeof conn.connect); // -> function 
```

**编辑：**

如果唯一出口的东西`myextobj.js`是构造函数，则无需将其包装在文字对象中。即你可以这样做：

```
module.exports = function Connection() {    
    this.handle = eventhandle;
    this.connect = function() {
        handle.notify("completed connection....");
    }
} 
```

然后像这样使用：

```
var Connection = require("./myextobj"); 
```

注意：`.connection`不再附加到末尾以引用该函数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-31T13:38:29.277

试一试。

```
 var module = {};
module.exports = {

    connection: function () {

        return {
            handle: eventhandle,

            connect: function () {

                // connect to server
                handle.notify("completed connection....");

            }
        }
    }()
}

module.exports.connection.connect() 
```

# java - Geotools - 创建一个点

> ID：15643438
> 
> 赞同：3
> 
> 时间：2013-03-26T17:17:53.253
> 
> 标签：java, geotools, jts

我正在使用 GeoTools Java 库进行一些几何计算。就我而言，我使用的是一个包含某个城市的所有邻域多面体的形状文件。我想知道该城市中每个可能的坐标，它对应于哪个社区。所以我的方法是简单地循环整个邻域多面体并检查给定点是否在其中。这是一段提到的代码：

```
public String getNeighborhoodId(Coordinates c){
    for(Feature f : neighborhoods){
        MultiPolygon m = (MultiPolygon) f.getProperty("geometry").getValue();

        GeometryBuilder builder = new GeometryBuilder(DefaultGeographicCRS.WGS84);
        Point p = builder.createPoint(c.getLat(),c.getLng());

        if(m.contains((Geometry) point)){
            return f.getProperty("neighborhoodId").getValue().toString();
        }   
    }
    return "";
} 
```

邻域是先前从形状文件中读取的所有特征。问题是在这一行：

```
Point p = builder.createPoint(c.getLat(),c.getLng()); 
```

我正进入（状态`org.geotools.factory.FactoryNotFoundException: No factory of kind "PrimitiveFactory" found.`

我只是简单地遵循了文档，但没有取得多大成功（[这种](http://docs.geotools.org/stable/userguide/library/jts/geometry.html)方法也不起作用）。请注意，我使用的是 9-SNAPSHOT 版本的 GeoTools。

关于如何摆脱这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-22T00:27:41.393

我有一个类似的问题。通过跟踪堆栈，我发现没有可供 GeometryBuilder() 查找的几何工厂。如果没有工厂，GeometryBuilder 会抛出 No factory of kind "<your factory type here>" 异常。解决方案位于[http://docs.geotools.org/latest/userguide/unsupported/geometry/index.html](http://docs.geotools.org/latest/userguide/unsupported/geometry/index.html)。该插件包括使用 org.geotools.geometry 类所必需的工厂。

我在 Eclipse 上使用 GeoTools 11.0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T22:47:40.987

好吧，我终于找到了一个可能的解决方案。首先，我必须说我犯了一个错误，因为我的多面点是 UTM 格式而不是 WGS84 格式，所以需要之前的转换。另一方面，我认为我使用了错误版本的 GeometryFactory 类，因为在我的代码重构过程之前，我无法通过以下方式实例化它：

```
public String getNeighborhoodId(Coordinates c){
    GeometryFactory geometryFactory = new GeometryFactory();
    String utm = converter.latLon2UTM(c.getLat(), c.getLng());
    Coordinate coords = new Coordinate(Double.valueOf(utm.split(" ")[2]),Double.valueOf(utm.split(" ")[3]));
    Geometry point = geometryFactory.createPoint(coords);
    for(Feature f : neighborhoods){
        MultiPolygon m = (MultiPolygon) f.getProperty("geometry").getValue();
        if(m.contains(point)){
            return f.getProperty("neighborhoodId").getValue().toString();
        }
    }
    return "";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T19:49:22.463

创建一个点

点是大多数其他几何图形的构建块。以下部分解释了如何操作点：

有几种方法可以创建一个点。GeometryBuilder 有许多用于创建几何图形的实用方法，因此您不必担心工厂。但是您也可以直接使用工厂，也可以使用 WKT 解析器来创建点。

作为 GeometryBuilder 的一部分提供了几个 createPoint 方法。这是使用其中之一的示例：

```
GeometryBuilder builder = new GeometryBuilder( DefaultGeographicCRS.WGS84 );
Point point = builder.createPoint( 48.44, -123.37 ); 
```

使用工厂 在某些环境中，您只能使用正式的 gt-opengis 接口，下面是使用 PositionFactory 和 PrimitiveFactory 的示例：

```
Hints hints = new Hints( Hints.CRS, DefaultGeographicCRS.WGS84 );
PositionFactory positionFactory = GeometryFactoryFinder.getPositionFactory( hints );
PrimitiveFactory primitiveFactory = GeometryFactoryFinder.getPrimitiveFactory( hints );

DirectPosition here = positionFactory.createDirectPosition( new double[]{48.44, -123.37} );

Point point1 = primitiveFactory.createPoint( here );

PositionFactory has a helper method allowing you to save one step:

Hints hints = new Hints( Hints.CRS, DefaultGeographicCRS.WGS84 );
PrimitiveFactory primitiveFactory = GeometryFactoryFinder.getPrimitiveFactory( hints );

Point point2 = primitiveFactory.createPoint(  new double[]{48.44, -123.37} );

System.out.println( point2 ); 
```

使用 WKT 您可以使用 WKTParser 从众所周知的文本中创建一个点：

```
WKTParser parser = new WKTParser( DefaultGeographicCRS.WGS84 );
Point point = (Point) parser.parse("POINT( 48.44 -123.37)"); 
```

您还可以创建 WKTParser 以使用一组特定的工厂：

```
Hints hints = new Hints( Hints.CRS, DefaultGeographicCRS.WGS84 );

PositionFactory positionFactory = GeometryFactoryFinder.getPositionFactory(hints);
GeometryFactory geometryFactory = GeometryFactoryFinder.getGeometryFactory(hints);
PrimitiveFactory primitiveFactory = GeometryFactoryFinder.getPrimitiveFactory(hints);
AggregateFactory aggregateFactory = GeometryFactoryFinder.getAggregateFactory(hints);

WKTParser parser = new WKTParser( geometryFactory, primitiveFactory, positionFactory, aggregateFactory );

Point point = (Point) parser.parse("POINT( 48.44 -123.37)"); 
```

# php - 即使提交基于 PRG 的表单，Chrome 也会跟踪 2 个历史记录条目

> ID：15643439
> 
> 赞同：3
> 
> 时间：2013-03-26T17:17:53.327
> 
> 标签：php, forms, node.js, google-chrome, browser-history

在提交实现“发布 + 同一页面重定向 + 获取”方法的表单时，Chrome 会跟踪两个历史记录条目，而不仅仅是一个。

## 展示这种奇怪行为的步骤。

1 - 我浏览到表单页面 裸表单页面：demo.html。裸表单页面： ![裸表单页面 (demo.html)](../Images/d25598e1898d62cf129ca6f329a64acf.png)

2 - 我填写表格。填写的表格：

![填写的表格（demo.html）](../Images/b840f7713ec99caecc0cbe2e26b9ace3.png)

3 - 我提交表格。提交 - 因此为空 - 表单（在 demo.html，从我的基于 PRG 的重定向到相同页面.php 重定向）：

![在此处输入图像描述](../Images/8903560f06ee650eb07b9ec2f4a74e09.png)

4 - 我单击浏览器的“返回”按钮一次。

### Chrome 跳回填好的表单（步骤）

![在此处输入图像描述](../Images/01df6af28b43e458be7d17fde8b3d0d0.png)

5 - 我需要再次单击浏览器的“返回”按钮才能到达我正在浏览的页面，然后才进入该表单页面（比如我的浏览器的“google”默认页面）： ![在此处输入图像描述](../Images/a81d7e0cd3f2593e78c7f1b0dd1eba61.png)

Chrome（版本 25.0.1364.172）和 Safari（6.0.2）会发生这种情况

## 我期待什么

我希望有一个浏览器的“后退”点击以到达表单之前的页面。这实际上是 Firefox (19.0.2) Opera (12.11) 和 IE（从版本 6 到最新 10）的行为方式。

## 我的源代码

演示.html

```
<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
    <form action="redirect-to-same-page.php" method="post">
    Type something and submit: <input type="text" name="something" /> <!-- optional: autocomplete="off" -->
    <input type="submit" value="submit" />
    </form>

</body>
</html> 
```

重定向到相同的page.php

```
<?php
header('Location: demo.html', true, 302); // not any of true/false 302/303 combinations are working
// not working either: header("Refresh: 0; demo.html");
exit;
?> 
```

## Chrome 的网络检查器揭示了什么......

1 提交前： ![在此处输入图像描述](../Images/6f12530afcf381b3a0c98497d1f51006.png)

2 提交后： ![在此处输入图像描述](../Images/2f944ad145f2d0a6aca480a1548cd657.png)

## 我的问题

我阅读了类似的问题和可能的答案，但没有一个能解决我的问题。

这种行为是 Chrome/Safari 问题还是功能*？（* 如果提交失败，它会保留您填写的表格的完整备份）

node.js 或 php 是否有正确或更具防御性的代码来避免这种行为？

谢谢你的帮助

# bash - sed/awk - 如何删除少于 3 列的行

> ID：15643440
> 
> 赞同：4
> 
> 时间：2013-03-26T17:17:57.857
> 
> 标签：bash, sed, awk

很简单的问题。当少于 3 列时，我只需要从列表中删除行

例如：

```
a b c
a b      <--- This one needs to disappear
a b c 
```

我很确定 awk NF 做到了，但我似乎无法做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T17:21:01.720

sed、grep、awk 都可以完成这项工作。既然你更喜欢 awk，看看这是否有帮助？

```
awk 'NF>=3' file 
```

# android - 多次实例化同一个线程有什么问题吗？

> ID：15643443
> 
> 赞同：0
> 
> 时间：2013-03-26T17:18:02.647
> 
> 标签：android

我有一个应用程序，我使用线程从网络读取一些信息并将其显示在屏幕上。我还有一个按钮，点击后会刷新屏幕。由于我需要使用同一个线程来获取和显示此类信息并且线程无法重新启动，因此每次点击此按钮时我都会创建该线程的一个新实例。这是一个好习惯，还是会因为创建了这么多线程而占用了太多内存资源？还值得指出的是，线程每次启动时都会依次创建新对象，例如：

```
new PrintWriter(new BufferedWriter(new OutputStreamWriter(app.socket
                        .getOutputStream())), true);

new BufferedReader(new InputStreamReader(app.socket.getInputStream())); 
```

永远不会被删除，不确定当线程停止运行时它们是否会自动删除，但我想不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:18:58.313

如果您担心使用过多的资源，则可以仅使用一个 Handler 实例将线程排队。使用 Handler.post(new runnable())...这将使您的线程排队并确保您的对象正确获得 GC。

# java - 通过 JSP 连接 MySQL

> ID：15643446
> 
> 赞同：0
> 
> 时间：2013-03-26T17:18:07.270
> 
> 标签：java, mysql

我正在尝试建立与 MySQL 数据库的连接以读取和写入数据。但是，尝试运行此代码时出现错误：

```
public void openConnection() throws SQLException {
  Class.forName("com.mysql.jdbc.Driver");
  Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/jared_bookoo",                                          "root", "pass");
  Statement stmt = conn.createStatement();
} 
```

奇怪的是，当我运行 JUnit 测试时，我的所有测试都通过了。我能够正确地从数据库中读取并返回正确的数据。但是，一旦我将它连接到 JSP 并尝试从本地托管的网页中读取它，我就会收到以下错误：

```
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/jared_bookoo
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at jared.simpledatabase.DBInterface.openConnection(DBInterface.java:42)
    ... 
```

发生了什么，我该如何解决？驱动程序已安装（并且正在工作；我可以在测试中从数据库中读取），所以我看不出可能出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:31:50.747

将 MySQL 驱动程序 jar 放入您的 WEB-INF/lib 库中。你可以在[这里](http://dev.mysql.com/downloads/connector/j/)找到它。另外，请确保在生成 war 文件时，MySQL 驱动程序 jar 位于`web_app_name/WEB-INF/lib`.

另一个建议（以防万一，因为您没有指定调用该方法的位置）：您**永远不**应该尝试直接在 JSP 中使用 Java 代码。有关详细信息，请参阅[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/q/3177733/1065197).

还有一个建议，在现实世界的 Web 应用程序中，您将使用[数据源](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html)来获取`Connection`. 由于您没有指定使用哪个应用程序服务器，因此我将举一个有关[在 Tomcat 7 中配置数据源](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)的示例。

# sql - 使用 OR 条件的多个内部连接的错误结果

> ID：15643447
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:18:08.783
> 
> 标签：sql, ruby-on-rails, activerecord, left-join, inner-join

我有三个模型`Event`：`Comment`和`Photo`。一个事件同时具有`has_many :comments`和`has_many :photos`。

我的目标是找到在过去 24 小时内收到新评论和/或照片的所有活动。

假设存在两个事件，一个带有最近的评论，另一个带有最近的照片。

如果我用一个连接单独查询它们，一切都会按预期工作：

```
Event.joins(:comments).where("comments.created_at >= :today", :today => Time.now.beginning_of_day) 
```

返回：`[#<Event id: 1>]`

```
Event.joins(:photos).where("photos.created_at >= :today", :today => Time.now.beginning_of_day) 
```

返回：`[#<Event id: 2>]`

为什么当我结合两个联接时会出现这种情况：

```
Event.joins(:comments, :photos)
    .where("comments.created_at >= :today OR photos.created_at >= :today", :today => Time.now.beginning_of_day) 
```

我收到`[#<Event id: 2>, #<Event id: 2>]`- 两次 #2，但不是 #1？

ARel生成的SQL是

```
SELECT "events".*
FROM   "events"
       INNER JOIN "comments"
               ON "comments"."event_id" = "events"."id"
       INNER JOIN "photos"
               ON "photos"."event_id" = "events"."id"
WHERE  ( comments.created_at >= '2013-03-25 23:00:00.000000'
          OR photos.created_at >= '2013-03-25 23:00:00.000000' ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:28:15.493

我相信是因为`INNER JOIN`. 此查询将只带来`events`两者兼有`photos`并`comments`与之相关联的查询。
您可以尝试在您的 RDBMS 上使用`LEFT JOIN`，而不是`INNER`查看是否获取了两个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:24:39.240

这是一个 SQL 问题：您必须指定 LEFT JOIN 而不是 INNER JOIN。 `include`会为你做的：

```
Event.include(:comments, :photos).where(...).uniq 
```

# asp.net - ASP.NET 页面可以向 Access 数据库插入日期，但不能更新

> ID：15643448
> 
> 赞同：0
> 
> 时间：2013-03-26T17:18:09.100
> 
> 标签：asp.net, ms-access, sql-update

我有一个 ASP.NET 页面，需要将一些数据推送到 MS Access 2003 数据库。该过程需要对一条记录进行选择，插入一条新记录并更新一条记录。我正在通过连接连接到 Access 数据库`OleDbConnection`。到目前为止，Select 和 Insert 功能完全按预期工作（所以我知道我的连接良好）。但是，更新无法更新任何行。更新记录的函数如下所示：

```
public static int UpdateDeviceDates(int deviceId, DateTime nextTestDate)
{
    var conn = DbConnect.AccessConnection();
    var sqlString = WebConfigurationManager.AppSettings["UpdateDeviceDates"];
    using (var cmd = new OleDbCommand(sqlString, conn))
    {
        cmd.Parameters.AddWithValue("@DeviceID", deviceId);
        cmd.Parameters.AddWithValue("@NextTestDate", nextTestDate);
        cmd.CommandType = CommandType.Text;
        conn.Open();
        var result = cmd.ExecuteNonQuery();
        return result;
    }
} 
```

从 web.config 文件中拉回的 sqlString 如下所示：

```
UPDATE tblDevice 
SET tblDevice.NextTestDate = @nextTestDate, 
    tblDevice.FirstNoticeDate = Null, 
    tblDevice.SecondNoticeDate = Null 
WHERE DeviceID=@deviceId; 
```

如果您将其粘贴到新的 Access 查询窗口并点击运行，则此查询可以正常工作，因此我知道语法是正确的。我做了很多测试，`@nextTestDate`发现是导致它失败的领域。当我从 SQL 字符串中取出它时，它按预期更新了记录。这令人不安，因为我传递给插入函数的日期工作得很好。

我环顾四周，发现最接近答案的是“[无法将 aspx 中的日期更新为 MS-ACCESS 表](https://stackoverflow.com/questions/2653373/cant-update-date-in-aspx-to-a-ms-access-table)”。主要的答案是将参数更改为 a `ShortDateString`。我试过没有效果。还建议将日期括在 中`#`，因为这是 Access 在其自己的查询中所做的。不幸的是，这也不起作用。

我不知道为什么其中任何一个都是必要的，因为日期的格式与 Insert 语句中的格式完全相同，而且效果很好。我在这里束手无策，因为我发现使该查询起作用的唯一方法是删除日期参数（这会破坏查询的主要目的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:32:35.030

在您的查询中，参数的顺序不同，顺序必须匹配：

```
 cmd.Parameters.AddWithValue("@NextTestDate", nextTestDate);     
    cmd.Parameters.AddWithValue("@DeviceID", deviceId); 
```

匹配：

```
UPDATE tblDevice 
SET tblDevice.NextTestDate = @nextTestDate, <--- Param 1
    tblDevice.FirstNoticeDate = Null, 
    tblDevice.SecondNoticeDate = Null 
WHERE DeviceID=@deviceId;                   <--- Param 2 
```

# javascript - 概念 - 为异步资源设计可折叠队列

> ID：15643450
> 
> 赞同：3
> 
> 时间：2013-03-26T17:18:11.630
> 
> 标签：javascript

我注意到请求文件的大小会影响 ajax 调用的响应时间。因此，如果我对不同大小的文件发出 3 个 ajax GET 请求，它们可能会以任何顺序到达。我想要做的是在我将文件附加到 DOM 时保证排序。

如何设置队列系统，以便在触发 A1->A2->A3 时。我可以保证它们按 A1->A2->A3 的顺序附加。

例如，假设 A2 在 A1 之前到达。我希望该操作在 A1 到达和加载时等待。

一个想法是使用定时回调来创建状态检查器

```
// pseudo-code
function check(ready, fund) {
    // check ready some how
    if (ready) {
        func();
    } else {
        setTimeout(function () {
            check(ready, fund);
        }, 1); // check every msec
    }
} 
```

但这似乎是一种资源繁重的方式，因为我每 1 毫秒触发一次相同的函数，直到加载资源。

这是完成这个问题的正确途径吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:36:48.747

> 使用 1 毫秒定时回调的状态检查器 - 但这似乎是一种资源繁重的方式；这是完成这个问题的正确途径吗？

不，你应该看看[Promises](http://wiki.commonjs.org/wiki/Promises)。这样，您可以像这样轻松地制定它：

```
var a1 = getPromiseForAjaxResult(ressource1url);
var a2 = getPromiseForAjaxResult(ressource2url);
var a3 = getPromiseForAjaxResult(ressource3url);

a1.then(function(res) {
    append(res);
    return a2;
}).then(function(res) {
    append(res);
    return a3;
}).then(append); 
```

例如，jQuery 的`.ajax`函数实现了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:29:40.050

你可以尝试这样的事情：

```
var resourceData = {};
var resourcesLoaded = 0;

function loadResource(resource, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        var state = this.readyState;
        var responseCode = request.status;

        if(state == this.DONE && responseCode == 200) {
            callback(resource, this.responseText);
        }
    };

    xhr.open("get", resource, true);
    xhr.send();
}

//Assuming that resources is an array of path names
function loadResources(resources) {
    for(var i = 0; i < resources.length; i++) {
        loadResource(resources[i], function(resource, responseText) {

            //Store the data of the resource in to the resourceData map,
            //using the resource name as the key. Then increment the
            //resource counter.
            resourceData[resource] = responseText;
            resourcesLoaded++;

            //If the number of resources that we have loaded is equal
            //to the total number of resources, it means that we have
            //all our resources.
            if(resourcesLoaded === resources.length) {
                //Manipulate the data in the order that you desire.
                //Everything you need is inside resourceData, keyed
                //by the resource url. 
                ...
                ...
            }                    
        });
    }
} 
```

如果某些组件*必须*在其他组件（如某些 JS 文件）之前加载和执行，您可以将 AJAX 请求排队，如下所示：

```
function loadResource(resource, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        var state = this.readyState;
        var responseCode = request.status;

        if(state == this.DONE && responseCode == 200) {
            //Do whatever you need to do with this.responseText
            ...
            ...

            callback();
        }
    };

    xhr.open("get", resource, true);
    xhr.send();
}

function run() {
    var resources = [
        "path/to/some/resource.html",
        "path/to/some/other/resource.html",
        ...
        "http://example.org/path/to/remote/resource.html"
    ];

    //Function that sequentially loads the resources, so that the next resource 
    //will not be loaded until first one has finished loading. I accomplish
    //this by calling the function itself in the callback to the loadResource 
    //function. This function is not truly recursive since the callback 
    //invocation (even though it is the function itself) is an independent call 
    //and therefore will not be part of the original callstack.
    function load(i) {
        if (i < resources.length) {
            loadResource(resources[i], function () {
                load(++i);
            });
        }
    }
    load(0);
} 
```

这样，在前一个文件完成加载之前，不会加载下一个文件。

如果您不能使用任何第三方库，您可以使用我的解决方案。但是，如果您按照[Bergi 的](https://stackoverflow.com/users/1048572/bergi) [建议](https://stackoverflow.com/a/15643799/263004)进行操作并使用[Promises](http://wiki.commonjs.org/wiki/Promises) ，您的生活可能会轻松得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:29:48.253

无需`check()`每毫秒调用一次，只需在 xhr 中运行即可`onreadystatechange`。如果您提供更多代码，我可以进一步解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T17:51:53.807

我将有一个要执行的函数队列，每个函数都会在执行之前检查先前的结果是否已完成。

```
var remoteResults[] 

function requestRemoteResouse(index, fetchFunction) {
  // the argument fetchFunction is a function that fetches the remote content
  // once the content is ready it call the passed in function with the result.
  fetchFunction(
    function(result) { 
      // add the remote result to the list of results
      remoteResults[index] = result
      // write as many results as ready.
      writeResultsWhenReady(index);
    });
}

function writeResults(index) {
  var i;
  // Execute all functions at least once
  for(i = 0; i < remoteResults.length; i++) {
    if(!remoteResults[i]) {
      return;
    }
    // Call the function that is the ith result
    // This will modify the dom.
    remoteResults[i]();
    // Blank the result to ensure we don't double execute
    // Store a function so we can do a simple boolean check.
    remoteResults[i] = function(){}; 
  }
}

requestRemoteResouse(0, [Function to fetch the first resouse]);
requestRemoteResouse(1, [Function to fetch the second resouse]);
requestRemoteResouse(2, [Function to fetch the thrid resouse]); 
```

请注意，为简单起见，当前为 O(n^2)，如果您在具有 hasRendered 属性的 remoteResults 的每个索引处存储一个对象，它会变得更快但更复杂。然后，您只会向后扫描，直到找到尚未发生的结果或已呈现的结果。

# android - 使用 PackageInfo 获取所有服务

> ID：15643458
> 
> 赞同：0
> 
> 时间：2013-03-26T17:18:36.693
> 
> 标签：android, android-intent, uninstallation

我的应用程序有问题。我使用此代码卸载从服务触发的包：

```
Uri packageUri = Uri.parse("package:"+packageName);
Intent uninstallIntent = new Intent(Intent.ACTION_UNINSTALL_PACKAGE, packageUri);
uninstallIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(uninstallIntent); 
```

问题是，我从使用此应用程序的人那里听说，Sony Xperia Z 上没有打开卸载对话框。它适用于我的三星手机，一款使用 Touchwiz，一款使用 Cyanogenmod，也适用于我的 Nexus 7。

我试图将意图更改为：

```
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageUri); 
```

这也适用于我的设备，但不适用于他的设备。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:23:44.140

尝试这个：

```
Intent deleteIntent = new Intent(Intent.ACTION_DELETE, Uri.fromParts("com.the.package",
getPackageManager().getPackageArchiveInfo(apkUri.getPath(), 0).packageName,null));
startActivity(deleteIntent); 
```

希望能帮助到你

# powershell - 在PowerShell中实现使用时出错

> ID：15643460
> 
> 赞同：0
> 
> 时间：2013-03-26T17:18:43.210
> 
> 标签：powershell, using

当我尝试在 Powershell 中实现使用功能时，关注这篇[文章](http://www.sbrickey.com/Tech/Blog/Post/IDisposable_in_PowerShell)

```
Function cUsing {
    param (
        [System.IDisposable] $inputObject = $(throw "The parameter -inputObject is required."),
        [ScriptBlock] $scriptBlock = $(throw "The parameter -scriptBlock is required.")
    )
    Try { &$scriptBlock }
    Finally {
        if ($inputObject -ne $null) {
            if ($inputObject.psbase -eq $null) {
                $inputObject.Dispose()
            } else {
                $inputObject.psbase.Dispose()
            }
        }
    }
}

    cUsing($sqlConnection = New-Object System.Data.SqlClient.SqlConnection)
{
$sqlConnection.ConnectionString = "Server=myserver; Database=master; Integrated Security= True"
$sqlConnection.Open()
$sqlCmd = New-Object System.Data.SqlClient.SqlCommand
$sqlCmd.CommandText = "SELECT STATEMENT"
$sqlCmd.Connection = $sqlConnection
$dsValues = New-Object System.Data.DataSet
$daValues = New-Object System.Data.SqlClient.SqlDataAdapter($sqlCmd)
$daValues.Fill($dsValues)
Write-Host $dsValues.Tables[0]
} 
```

错误：

```
[ScriptBlock] $scriptBlock = $(throw  <<<< "The parameter -scriptBlock is required.") 
```

**编辑[格雷默]**

当我像下面这样移动花括号时

```
cUsing($sqlConnection = New-Object System.Data.SqlClient.SqlConnection){
....
....
 Write-Host $dsValues.Tables[0]} 
```

我没有收到任何错误，但我得到的输出是

```
 $sqlConnection.ConnectionString = "Server=myserver; Database=master; Integrated Security= True"
$sqlConnection.Open()
$sqlCmd = New-Object System.Data.SqlClient.SqlCommand
$sqlCmd.CommandText = "Select query"
$sqlCmd.Connection = $sqlConnection
$dsValues = New-Object System.Data.DataSet
$daValues = New-Object System.Data.SqlClient.SqlDataAdapter($sqlCmd)
$daValues.Fill($dsValues)
Write-Host $dsValues.Tables[0] 
```

**编辑 [Ansgar Wiechers]**

当我将 scriptblock 行更改为

```
Function cUsing {
param (
    [System.IDisposable] $inputObject = $(throw "The parameter -inputObject is required."),
    [ScriptBlock] $scriptBlock = ${throw "The parameter -scriptBlock is required."}
) 
```

我没有收到任何错误，但我得到了与上面**编辑**中显示的相同的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:47:16.850

您的代码的问题在于您没有将脚本块作为参数提供，而是作为自己的命令提供。Powershell 中的命令位于一行中。您的代码仅使用 using 参数运行命令，但失败。然后你声明一个脚本块。

您在这里有两个选择；转义换行符（不好的做法），或将左大括号向上移动一行，以便将其视为`cusing`命令的一部分。像这样：

```
cUsing($sqlConnection = New-Object System.Data.SqlClient.SqlConnection) {
    $sqlConnection.ConnectionString = "Server=myserver; Database=master; Integrated Security= True"
...
..
.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:02:23.630

```
 Add-Type @"
        using System;

        public class Code : System.IDisposable
        {
            public bool IsDisposed { get; set; }
            public void Dispose() 
            {
                Dispose(true);
                GC.SuppressFinalize(this);      
            }

            protected virtual void Dispose(bool disposing)
            {
                if (!IsDisposed)
                {
                    IsDisposed = true;   
                }
            }
        }
    "@

    function using-block {
        param (
            [System.IDisposable]$InputObject = $(throw "The parameter -inputObject is required."),
            [ScriptBlock]$ScriptBlock = $(throw "The parameter -scriptBlock is required.")
        )
        try { &$ScriptBlock }
        finally {
            if ($InputObject) {
                if ($InputObject.PSBase) {
                    $InputObject.PSBase.Dispose()
                } else {
                    $InputObject.Dispose()
                }
            }
        }
    }

    using-block($c = New-Object Code) {
        $c.IsDisposed
    }
    $c.IsDisposed 
```

输出：

错误的

真的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:41:40.727

脚本块是通过花括号定义的，而不是通过`$()`. 像这样：

```
[ScriptBlock]$scriptBlock = { throw "The parameter ..." } 
```

`$()`是评估子表达式的运算符。

# dynamics-crm-2011 - Dynamics CRM 2011 - 确保无法更新或删除自定义实体的最佳方法是什么？

> ID：15643463
> 
> 赞同：0
> 
> 时间：2013-03-26T17:18:53.943
> 
> 标签：dynamics-crm-2011

我创建了一个自定义实体，一旦创建，我不希望它更新或删除。插件是确保这一点的最佳方法还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:37:37.383

最好的方法是将安全角色应用于此自定义实体。创建仅具有读取操作的角色并应用于您的用户或团队。

**编辑：**

我记得另一个选项，“读取优化表单”。看看有一个[链接](http://blogs.msdn.com/b/crm/archive/2012/03/22/read-optimized-forms.aspx)。

# php - 如何从 PHP 到 Android 检索像“Hello world”这样的简单文本

> ID：15643465
> 
> 赞同：0
> 
> 时间：2013-03-26T17:19:02.740
> 
> 标签：php, android

我是 Android 开发的新手。我想测试用 PHP 连接我的应用程序。我用谷歌搜索了很多，但它们都很复杂。

首先，我想了解连接并仅检索一个简单的文本，例如“Hello world”，然后在我的 Android 应用程序中打印出来。

什么是示例或简单示例的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:26:49.553

这是一个开始使用的示例。这只是一个复制粘贴，但它应该工作。

您的请求的输出存储在 myString 中。

哦，千万不要在 GUI 线程上执行这样的操作；在单独的线程中运行它们。

```
// An the Android manifest, add:
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

String myString;
String url = "http://www.yoursite.com/yourphpscript.php";
HttpClient httpclient = new DefaultHttpClient();

HttpGet request;
try {
    request = new HttpGet(new URI(url));

    request.addHeader("User-Agent", "Android");

    HttpResponse response = httpclient.execute(request);

    StatusLine statusLine = response.getStatusLine();
    if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        response.getEntity().writeTo(out);
        out.close();
        myString = out.toString();
    }
}
catch (URISyntaxException e1) {

    e1.printStackTrace();
}
catch (ClientProtocolException e) {

    e.printStackTrace();
}
catch (IOException e) {

    e.printStackTrace();
}
catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:22:27.803

Java Code Geeks 有一篇关于使用 GSON（库）解析 JSON 的精彩文章，*[Android JSON Parsing with Gson Tutorial](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)*。如果您开始将“hello world”作为 Web 服务提供，它将为您提供所需的所有连接位以及如何扩展您的解决方案。

# asp.net-mvc - 有一个类名“系统”

> ID：15643466
> 
> 赞同：0
> 
> 时间：2013-03-26T17:19:03.477
> 
> 标签：asp.net-mvc, entity-framework

我正在使用 .NET 创建一个 MVC 项目。数据库已经存在，我正在使用实体框架来访问数据库。

数据库中的一张表称为“系统”。因此，EF 使用该名称创建一个类。这显然与“系统”命名空间有冲突。

在这一点上重命名表是不切实际的。还有另一种方法可以在我的项目中使用 EF 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:16:47.270

这不是问题，您只需要通过其命名空间引用该类。

例如：

如果您生成的实体类位于命名空间 AppName.EntityModel 下，则以下内容将起作用

```
global::AppName.EntityModel.System
AppName.EntityModel.System
EntityModel.System // if already under the AppName namespace 
```

# angularjs - 如何加速 AngularJS 应用程序？

> ID：15643467
> 
> 赞同：27
> 
> 时间：2013-03-26T17:19:04.680
> 
> 标签：angularjs, performance

我有一个带有分页网格（两个嵌套的 ng-repeat）的 AngularJS 应用程序。一页大约有 25x40 个输入元素。刚开始绑定 1000 次，分页性能尚可。

但是随后页面的复杂性增加了：动态类、不同的上下文菜单、网格每个单元格的条件内容。并且估计有 6000 个绑定（每个输入元素 6 个），分页变得无法使用缓慢。

我的问题是：我通常如何处理 AngularJS 中的性能问题？显而易见的第一步是测量。但是 Chrome Profiler 的结果并没有告诉我太多，远不知道如何进行。

```
 Self      Total                           Function
-----------------------------------------------------------------
24 ms    2.79 s    angular.js:7997         Scope.$digest
 1 ms       1 ms   controllers.js:365      setViewportData
16 ms     692 ms   angular.js:13968        ngRepeatWatch
 8 ms      22 ms   angular.js:6439         extend.literal
 9 ms    1.22 s    angular.js:14268        ngSwitchWatchAction
16 ms      45 ms   angular.js:12436        ngModelWatch
 0        621 ms   angular-ui-4.0.js:264   initDateWidget
 0         13 ms   angular.js:12859        ngClassWatchAction
 0         70 ms   angular.js:14184        ngStyleWatchAction
 1 ms       5 ms   angular-ui-4.0.js:261   getOptions
 0         16 ms   angular.js:579          copy
 0          1 ms   angular.js:4558         interpolateFnWatchAction
 1 ms       2 ms   angular.js:5981         token.fn.extend.assign
 0         37 ms   angular.js:8151         Scope.$eval
 1 ms       1 ms   angular.js:6137         extend.constant
14 ms      16 ms   angular.js:651          equals
 1 ms       1 ms   angular.js:4939         $interpolate.fn 
```

另外：“Object.observe()”是否有可能在未来加快速度（忽略“initDateWidget”，这显然是一个不同的话题）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-26T17:39:18.250

你能做的最能加速你的 Angular 应用程序的事情就是尽可能减少那些绑定。一种方法是创建一个指令，使用 DOM 操作而不是使用 ng-repeats 为您构建表。这将减少您必须处理的整体手表数量，并使 $digest 更快。

我知道这样做很难看，但 Angular 并不是真的要设置 3000 多个绑定。因为它做了一个摘要并且它不是一个观察者模式，所以它真的减慢了设置这么多的东西。

您甚至可以使用混合方法，仍然使用 ng-repeat，但所有值都放置在 DOM 中，并通过自定义指令直接进行 DOM 操作，从而避免了所有绑定。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-29T21:35:12.477

如果您还没有这样做，请安装 AngularJS Chrome 插件 Batarang，它将帮助您查明哪些绑定导致您不快。 [https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en)

正如另一个答案所暗示的那样，您正在寻找的可能是您的表格的无限滚动设置的小案例，您绑定到的模型是您在屏幕上显示的子集。

ng-grid 组件实现了这一点，直接使用它或窃取技术可能值得一看。 [http://angular-ui.github.com/ng-grid/](http://angular-ui.github.com/ng-grid/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-12T11:34:03.533

# 资源

[这篇关于大型列表](http://tech.small-improvements.com/2013/09/10/angularjs-performance-with-large-lists/)中 angularJS 性能的文章很好地概述了您用于性能调整的选项。

上面的答案（除了 Batarang 插件）也被提及。这只是该文章中提示的概述。

# 使用limitTo（分页）减少数据

更明显的解决方案之一是通过减少视图中的项目数量来减少绑定数量。数据的分页可以通过打开`limitTo`过滤器来完成`ng-repeat`。

如何在巨大的数据集（ angular.js [）上提高 ngRepeat 的性能？](https://stackoverflow.com/questions/17348058/how-to-improve-performance-of-ngrepeat-over-a-huge-dataset-angular-js)那篇文章还链接[了一个 jsbin 示例](http://jsbin.com/ilugum/2/edit)。

还要确保不要使用内联方法来提供数据，因为这将在每个 $digest 上进行评估。

```
<li ng-repeat="item in filteredItems()"> // Bad idea, since very often evaluated.
<li ng-repeat="item in items"> // Way to go! 
```

# 使用 bindonce 删除绑定

另一个明显的解决方案是删除特定元素的绑定。当然，这意味着更新将不再反映在视图中。

bindonce**解决**方案不仅仅是删除 2 路绑定。基本上它会在绑定被删除之前等待值被绑定一次。最好自己读。检查[bindonce 项目](https://github.com/Pasvaz/bindonce)以获取详细信息。

在上面列出的文章中，还有关于使用 2 个列表的模式的信息。一个用于可视化，一个作为数据源。

# 使用 ng-grid

`Ng-grid`优点是它只渲染当前可见的元素。[在http://angular-ui.github.io/ng-grid/](http://angular-ui.github.io/ng-grid/)阅读更多内容。

类似`ng-if`从 DOM 树中完全删除隐藏的元素，同时`ng-show`仅将它们保持在原位但隐藏。考虑到`ng-if`在再次显示时将放置原始元素的副本（原始元素是关键，而不是更改）。

# 过滤提示

这篇文章还有一些过滤列表的好技巧。

就像使用`ng-show`隐藏过滤掉的元素一样，因为这样就不必为数据创建子列表。

而另一种技术被称为“去抖用户输入”。最后一个选项是等待过滤，直到用户停止输入。包括[一个 jsfiddle 示例](http://jsfiddle.net/Warspawn/6K7Kd/)。

# 更多的

更多提示可以在链接的文章中找到。那里也列出了资源，所以这应该是一个很好的起点。我相信这里列出了最明显的一次和快速胜利。

另一个不错的[文章是数据绑定在 AngularJS 中是如何工作的？](https://stackoverflow.com/questions/9682092/databinding-in-angularjs/9693933#9693933)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-07-11T10:31:00.350

有点晚了，但也许这对你有用：

[https://github.com/Pasvaz/bindence](https://github.com/Pasvaz/bindonce)

您可以在那些不打算更改的绑定上使用它，因此 $digest 将不再处理它们。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-11-23T09:03:04.227

在 Angular 1.3 及更高版本中，您可以使用 :: 绑定一次，无需使用其他 3 方 js

```
<li ng-repeat="item in :: items"> 
```

如果项目不会更改，这很好，因此您可以绑定它们一次

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-02T13:23:25.260

当数据网格组件中的侦听器数量超过 1000 时，我遇到了性能问题。

我解决了这个问题，使用了一个使用 react.js 构建我的视图的指令。该指令公开了一个更新功能。

每次数据发生变化（在控制器中），更新函数都会触发指令，然后 react.js 引擎高效地进行渲染。

我知道在 Angular 项目中使用第二个主要框架的开销很大，这不是真正的数据绑定魔法。但它的工作速度要快得多。

最终我停止使用 angular.js 并转向 react.js + FLUX 。我认为它更好，但我知道从角度转变并不容易，但它是值得的。

[使用 react.js 的 Angular 指令](http://www.williambrownstreet.net/blog/2014/04/faster-angularjs-rendering-angularjs-and-reactjs/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-05T22:06:34.263

限制手表的数量通常会有很长的路要走。以下是对减少手表数量有效的技术摘要

[http://www.syntaxsuccess.com/viewarticle/547a8ba2c26c307c614c715e](http://www.syntaxsuccess.com/viewarticle/547a8ba2c26c307c614c715e)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-03T22:54:55.083

[我在使用大数据的 ng-grid 时遇到了性能问题，通过用Angular Grid](http://www.angulargrid.com)替换它来解决。它网站上的演示显示它可以轻松管理 100,000 行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-04T19:22:41.270

我已经为此苦苦挣扎了几个星期。我发现有两件事有很大的不同：

(i) 一次性绑定：尽可能使用一次性绑定；(ii) DEBOUNCE：对于不需要我立即传播但可以等待 250 毫秒的输入，设置去抖动设置。这对我的大型 ng-repeat 表产生了难以置信的影响。我无法强调去抖动设置的有效性。（见这里：[https](https://docs.angularjs.org/api/ng/directive/ngModelOptions) ://docs.angularjs.org/api/ng/directive/ngModelOptions ）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-20T11:32:32.207

您还可以通过[禁用调试数据来提高性能](https://docs.angularjs.org/guide/production)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-18T05:48:20.517

bject.observe() 是一种为浏览器带来真正数据绑定的提议机制。它公开了一种机制来观察对象和数组的变化，通知其他人这些对象发生的变化。

```
<!DOCTYPE html>
<html>
<head>
<base target="_blank">
<title>Object.observe()</title>

<link rel="stylesheet" href="../css/main.css" />

</head>

<body>

<div id="container">

  <h1><a href="https://shailendrapathakbits.wordpress.com/" title="code_lab_by_shail ">code_lab_by_shail</a> Object.observe()</h1>

    <p>An object <code>o</code> is created and <code>Object.observe()</code> is called on it.</p>

  <p>Three changes are made to <code>o</code> and <code>Object.observe()</code> records these changes as shown below.</p>

  <p>Use the console to find out what happens if you make further changes to <code>o</code>: it's defined in global scope.</p>

  <p>Call <code>Object.unobserve(o, observer)</code> to stop observing changes.</p>

  <p id="data" style="font-size: 14px;"></p>

  <script src="js/main.js"></script>

  <a href="https://github.com/shailendra9/objectobserver/blob/master/index.html" title="View source for this page on GitHub" id="viewSource">View source on GitHub</a>

</div>

<script src="../js/lib/ga.js"></script>

</body>
</html> 
```

# node.js - node.js - socket.io index.html 没有响应

> ID：15643471
> 
> 赞同：0
> 
> 时间：2013-03-26T17:19:14.077
> 
> 标签：node.js, socket.io, response

如果我启动服务器并转到 localhost:4000，服务器会给出 index.html。但是 index.html 没有加载它的 style.css 并且没有连接到服务器。但是，如果我双击本地 index.html 文档，它会连接到服务器。我的回复有什么问题？

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app)
, fs = require('fs')

app.listen(4000);

function handler (req, res) {
    fs.readFile(__dirname + '/public/index.html',
 function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {...} 
```

索引.html

```
<!DOCTYPE HTML>
<html>
  <head>

    <link rel="stylesheet",type="text/css" href="styles.css"/>
    <script type="text/javascript" src="node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js">></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

  </head>
  <body>

<script>
var socket = io.connect('http://localhost:4000');

socket.on('connect', function(){...} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:45:19.657

在您的处理程序函数中，您似乎通过向用户提供 index.html 来响应所有请求。这就是没有返回您的 CSS 样式表和 Javascript 文件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:35:00.500

您是否尝试过像这样引用 socket.io.js？

`<script src="/socket.io/socket.io.js"></script>`

# java - 使用 https 时删除 Proxy-Authorization 标头

> ID：15643473
> 
> 赞同：2
> 
> 时间：2013-03-26T17:19:17.323
> 
> 标签：java, https, proxy, apache-httpclient-4.x

我正在尝试通过需要在 java 中进行身份验证的代理访问 https url，并且 Proxy-Authorization 标头未传递给代理。

我知道网络方面正在发挥作用，因为我可以使用 curl 准确地执行我需要的操作：

$ curl -H "代理授权：基本##########" -x my_proxy_host:80 my_https_url -v

当我访问 http url 时，我的代码似乎可以工作，但是当我尝试访问 https url 时，我得到了 403 Forbidden，并且我在日志中看到 Proxy-Authorization 标头没有从 Java 传递到代理。

这是我的代码：

```
public static void main(String args[]) {
    try {

        HttpHost proxy = new HttpHost(my_proxy_host, 80, "http");

        DefaultHttpClient cli = new DefaultHttpClient();

        cli.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);

        HttpHost target = new HttpHost(my_https_endpoint, 443, "https");

        HttpGet get = new HttpGet("/");

        get.setHeader("Proxy-Authorization", "Basic ##############");

        HttpResponse response = cli.execute(target, get);

        HttpEntity entity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        if (entity != null) {
            System.out.println("Response content length: " + entity.getContentLength());
        }

        EntityUtils.consume(entity);                        
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

请注意，如果您更改以下行，则上面的代码有效：

HttpHost 目标 = 新 HttpHost(my_https_endpoint, 80, "http");

任何想法将不胜感激。

谢谢！

* * *

以下是 apache httpclient 生成的日志。

这是不起作用的版本，尝试访问端口 443 上的 https 端点

```
09:43:43.574 [main] DEBUG o.a.h.i.conn.SingleClientConnManager - Get connection for route HttpRoute[{tls}->my_proxy_host:80->my_https_endpoint:443]
09:43:43.653 [main] DEBUG o.a.h.i.c.DefaultClientConnectionOperator - Connecting to my_proxy_host:80
09:43:43.716 [main] DEBUG o.a.h.c.protocol.RequestAuthCache - Auth cache not set in the context
09:43:43.716 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Sending request: CONNECT my_https_endpoint:443 HTTP/1.1
09:43:43.717 [main] DEBUG org.apache.http.wire - >> "CONNECT my_https_endpoint:443 HTTP/1.1[\r][\n]"
09:43:43.720 [main] DEBUG org.apache.http.wire - >> "Host: my_https_endpoint:443[\r][\n]"
09:43:43.721 [main] DEBUG org.apache.http.wire - >> "Proxy-Connection: Keep-Alive[\r][\n]"
09:43:43.721 [main] DEBUG org.apache.http.wire - >> "User-Agent: Apache-HttpClient/4.1.2 (java 1.5)[\r][\n]"
09:43:43.721 [main] DEBUG org.apache.http.wire - >> "[\r][\n]"
09:43:43.721 [main] DEBUG org.apache.http.headers - >> CONNECT my_https_endpoint:443 HTTP/1.1
09:43:43.721 [main] DEBUG org.apache.http.headers - >> Host: my_https_endpoint:443
09:43:43.721 [main] DEBUG org.apache.http.headers - >> Proxy-Connection: Keep-Alive
09:43:43.721 [main] DEBUG org.apache.http.headers - >> User-Agent: Apache-HttpClient/4.1.2 (java 1.5)
09:43:43.762 [main] DEBUG org.apache.http.wire - << "HTTP/1.1 403 Forbidden[\r][\n]"
09:43:43.766 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Receiving response: HTTP/1.1 403 Forbidden
09:43:43.766 [main] DEBUG org.apache.http.headers - << HTTP/1.1 403 Forbidden
09:43:43.768 [main] DEBUG o.a.h.c.p.ResponseProcessCookies - Cookie spec not specified in HTTP context
09:43:43.772 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Connection closed
09:43:43.773 [main] DEBUG o.a.h.impl.client.DefaultHttpClient - CONNECT refused by proxy: HTTP/1.1 403 Forbidden
09:43:43.773 [main] DEBUG o.a.h.i.conn.SingleClientConnManager - Releasing connection org.apache.http.impl.conn.SingleClientConnManager$ConnAdapter@49869a03
HTTP/1.1 403 Forbidden
Response content length: 0 
```

这是有效的版本，通过端口 80 访问 http 端点（显然）

```
09:34:11.510 [main] DEBUG o.a.h.i.conn.SingleClientConnManager - Get connection for route HttpRoute[{}->my_proxy_host:80->my_http_endpoint:80]
09:34:11.646 [main] DEBUG o.a.h.i.c.DefaultClientConnectionOperator - Connecting to my_proxy_host:80
09:34:11.720 [main] DEBUG o.a.h.c.protocol.RequestAddCookies - CookieSpec selected: best-match
09:34:11.742 [main] DEBUG o.a.h.c.protocol.RequestAuthCache - Auth cache not set in the context
09:34:11.743 [main] DEBUG o.a.h.impl.client.DefaultHttpClient - Attempt 1 to execute request
09:34:11.743 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Sending request: GET my_http_endpoint:80/ HTTP/1.1
09:34:11.744 [main] DEBUG org.apache.http.wire - >> "GET my_http_endpoint:80/ HTTP/1.1[\r][\n]"
09:34:11.746 [main] DEBUG org.apache.http.wire - >> "Proxy-Authorization: Basic ###################[\r][\n]"
09:34:11.746 [main] DEBUG org.apache.http.wire - >> "Host: my_http_endpoint:80[\r][\n]"
09:34:11.747 [main] DEBUG org.apache.http.wire - >> "Proxy-Connection: Keep-Alive[\r][\n]"
09:34:11.747 [main] DEBUG org.apache.http.wire - >> "User-Agent: Apache-HttpClient/4.1.2 (java 1.5)[\r][\n]"
09:34:11.747 [main] DEBUG org.apache.http.wire - >> "[\r][\n]"
09:34:11.747 [main] DEBUG org.apache.http.headers - >> GET my_http_endpoint:80/ HTTP/1.1
09:34:11.747 [main] DEBUG org.apache.http.headers - >> Proxy-Authorization: Basic ###################
09:34:11.747 [main] DEBUG org.apache.http.headers - >> Host: my_http_endpoint:80
09:34:11.747 [main] DEBUG org.apache.http.headers - >> Proxy-Connection: Keep-Alive
09:34:11.747 [main] DEBUG org.apache.http.headers - >> User-Agent: Apache-HttpClient/4.1.2 (java 1.5)
09:34:11.880 [main] DEBUG org.apache.http.wire - << "HTTP/1.1 200 OK[\r][\n]"
09:34:11.889 [main] DEBUG org.apache.http.wire - << "Date: Fri, 29 Mar 2013 14:34:10 GMT[\r][\n]"
09:34:11.889 [main] DEBUG org.apache.http.wire - << "Expires: -1[\r][\n]"
09:34:11.889 [main] DEBUG org.apache.http.wire - << "Cache-Control: private, max-age=0[\r][\n]"
09:34:11.889 [main] DEBUG org.apache.http.wire - << "Content-Type: text/html; charset=ISO-8859-1[\r][\n]"
09:34:11.889 [main] DEBUG org.apache.http.wire - << "Set-Cookie: PREF=ID=918523062b63f55d:FF=0:TM=1364567650:LM=1364567650:S=T8IIsiH2_cw1UMLI; expires=Sun, 29-Mar-2015 14:34:10 GMT; path=/; domain=.google.com[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "Set-Cookie: NID=67=OHgx0xi1JDegF7uPjPUfW_pCC5Yn0H9S8-CMxyKbtgrF2vPQ-svFv1G4h5yxwCVEi2gDA23tywtEiYQvbPCHxDpAkefUlDJrWK94fEmXaiwuvua5w50eAej0yy3ysI4N; expires=Sat, 28-Sep-2013 14:34:10 GMT; path=/; domain=.google.com; HttpOnly[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "P3p: CP="This is not a P3P policy! See my_http_endpoint/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "Server: gws[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "X-Xss-protection: 1; mode=block[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "X-Frame-options: SAMEORIGIN[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "Transfer-Encoding: chunked[\r][\n]"
09:34:11.890 [main] DEBUG org.apache.http.wire - << "Connection: close[\r][\n]"
09:34:11.891 [main] DEBUG org.apache.http.wire - << "[\r][\n]"
09:34:11.892 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Receiving response: HTTP/1.1 200 OK
09:34:11.892 [main] DEBUG org.apache.http.headers - << HTTP/1.1 200 OK
09:34:11.892 [main] DEBUG org.apache.http.headers - << Date: Fri, 29 Mar 2013 14:34:10 GMT
09:34:11.892 [main] DEBUG org.apache.http.headers - << Expires: -1
09:34:11.892 [main] DEBUG org.apache.http.headers - << Cache-Control: private, max-age=0
09:34:11.892 [main] DEBUG org.apache.http.headers - << Content-Type: text/html; charset=ISO-8859-1
09:34:11.892 [main] DEBUG org.apache.http.headers - << Set-Cookie: PREF=ID=918523062b63f55d:FF=0:TM=1364567650:LM=1364567650:S=T8IIsiH2_cw1UMLI; expires=Sun, 29-Mar-2015 14:34:10 GMT; path=/; domain=.google.com
09:34:11.892 [main] DEBUG org.apache.http.headers - << Set-Cookie: NID=67=OHgx0xi1JDegF7uPjPUfW_pCC5Yn0H9S8-CMxyKbtgrF2vPQ-svFv1G4h5yxwCVEi2gDA23tywtEiYQvbPCHxDpAkefUlDJrWK94fEmXaiwuvua5w50eAej0yy3ysI4N; expires=Sat, 28-Sep-2013 14:34:10 GMT; path=/; domain=.google.com; HttpOnly
09:34:11.892 [main] DEBUG org.apache.http.headers - << P3p: CP="This is not a P3P policy! See my_http_endpoint/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
09:34:11.892 [main] DEBUG org.apache.http.headers - << Server: gws
09:34:11.892 [main] DEBUG org.apache.http.headers - << X-Xss-protection: 1; mode=block
09:34:11.892 [main] DEBUG org.apache.http.headers - << X-Frame-options: SAMEORIGIN
09:34:11.892 [main] DEBUG org.apache.http.headers - << Transfer-Encoding: chunked
09:34:11.892 [main] DEBUG org.apache.http.headers - << Connection: close
09:34:11.916 [main] DEBUG o.a.h.c.p.ResponseProcessCookies - Cookie accepted: "[version: 0][name: PREF][value: ID=918523062b63f55d:FF=0:TM=1364567650:LM=1364567650:S=T8IIsiH2_cw1UMLI][domain: .google.com][path: /][expiry: Sun Mar 29 09:34:10 CDT 2015]"
09:34:11.917 [main] DEBUG o.a.h.c.p.ResponseProcessCookies - Cookie accepted: "[version: 0][name: NID][value: 67=OHgx0xi1JDegF7uPjPUfW_pCC5Yn0H9S8-CMxyKbtgrF2vPQ-svFv1G4h5yxwCVEi2gDA23tywtEiYQvbPCHxDpAkefUlDJrWK94fEmXaiwuvua5w50eAej0yy3ysI4N][domain: .google.com][path: /][expiry: Sat Sep 28 09:34:10 CDT 2013]". 
HTTP/1.1 200 OK
Response content length: -1
09:34:11.925 [main] DEBUG o.a.h.i.conn.SingleClientConnManager - Releasing connection org.apache.http.impl.conn.SingleClientConnManager$ConnAdapter@303459ed
09:34:11.925 [main] DEBUG o.a.h.i.conn.SingleClientConnManager - Released connection open but not reusable.
09:34:11.926 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Connection shut down 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:25:42.260

试试这个变体，看看它是否能满足您的需求：

```
public static void main(String args[]) {
    try {

        HttpHost proxy = new HttpHost(my_proxy_host, 80, "http");

        DefaultHttpClient cli = new DefaultHttpClient();

        cli.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
        cli.getCredentialsProvider().setCredentials(
            new AuthScope(proxy.getHostName(), proxy.getPort()),
            new UsernamePasswordCredentials("username", "password"));

        HttpHost target = new HttpHost(my_https_endpoint, 443, "https");

        HttpGet get = new HttpGet("/");

        // Example from: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html#d5e1032
        BasicAuthCache authCache= new BasicAuthCache();
        // Target the proxy not target host
        authCache.put(proxy, new BasicScheme(ChallengeState.PROXY));
        BasicHttpContext context= new BasicHttpContext();
        context.setAttribute(ClientContext.AUTH_CACHE, authCache);
        HttpResponse response = cli.execute(target, get, context);

        HttpEntity entity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        if (entity != null) {
            System.out.println("Response content length: " + entity.getContentLength());
        }

        EntityUtils.consume(entity);                        
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

理想情况下，代理应该在初始请求中响应 HTTP 407 Proxy Authentication Required 而不是 403 Forbidden。403 基本上是在说 GO-AWAY！当 407 说：“嘿——你想通过吗？给我一个理由吗？” 通过使用“Proxy-Authenticate:”标头进行响应，您必须通过“Proxy-Authorization:”标头使用您的凭据进行响应。

通过先发制人的身份验证，您实际上是在没有被询问时向主机发送凭据，有点像将您的社会安全号码以大写字母钉在您的额头上。

*编辑*我想我可能已经找到了一些可能让你克服困难的东西： [HttpClient 4.2.2 和带有用户名/密码的代理，](https://stackoverflow.com/questions/13288038/httpclient-4-2-2-and-proxy-with-username-password)看看它是否能启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:02:34.023

我通过在亚马逊 EC2 上创建自己的代理解决了我的问题。

我的目标是能够从运行在 Heroku 上的应用程序访问需要 IP 白名单的 https 服务，因此我没有可以列入白名单的静态 IP 或 IP 范围，因此我需要一个具有静态 IP 的代理。

我试图使用 proximo heroku 插件并且遇到了我上面描述的问题。

感谢戴夫 G 的帮助！

# ios - 从 MyClass 继承：UIViewController 导致错误“找不到接口声明”

> ID：15643474
> 
> 赞同：0
> 
> 时间：2013-03-26T17:19:29.290
> 
> 标签：ios, objective-c

我有一个名为 StreamController 的 UIViewController。它有一个带有 UITableViewController 的 XIB。

我想构建这个 StreamController 的另一个稍微不同的视图，但使用原始提供的相同代码，所以我创建了另一个名为 Stream2Controller 的控制器。Stream2Controller 继承自 StreamController 并拥有自己的 XIB 文件。

我的意图是让 Stream2Controller XIB 文件中的引用出口指向 StreamController.h 文件。我很确定我过去在这方面取得了成功，但由于某种原因，我收到了这个错误：

`Cannot find interface declaration for StreamViewController, superclass of Stream2Controller; did you mean SomeOtherController?`

这个错误发生在`Stream2Controller.h`

**更新**：这是一些来源

`StreamController.h'

```
@interface StreamViewController : UIViewController 
```

`Stream2Controller.h'

```
#import "StreamViewController.h"

@interface Stream2Controller : StreamViewController 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:47:50.003

看起来我在项目的其他地方有一个递归包含导致这个错误。

虽然不是一个非常直观的错误消息。:)

# ios - Xcode iOS 中的单元测试

> ID：15643480
> 
> 赞同：3
> 
> 时间：2013-03-26T17:19:41.727
> 
> 标签：ios, objective-c, xcode, unit-testing, tdd

我在Objective-C方面没有那么经验，但我想开始使用TDD在iOS中开发，为此我有几个新手问题:)

什么人在使用 iOS 的 TDD？我想在使用 Xcode 中已有的测试框架时，它好吗？或任何更好的选择？

我试图为单元测试做一些练习，我正在创建一个示例，其中我有一个 TableViewControllerClass，使用 CoreLocation，使用以下方法：

```
 -(void)startFindLocation
    {
        [self.cllManager startUpdatingLocation];
    }

    -(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
    {
        [self.cllManager stopUpdatingLocation];
        CLLocation *actualLocation = [locations lastObject];

        NSLog(@"latitude: %f", actualLocation.coordinate.latitude);
        NSLog(@"longitude: %f", actualLocation.coordinate.longitude);
    } 
```

我想测试的，很简单，就是看CLLocation有没有经纬度，而不是用NSLong。为此，我真的需要在我的测试类中分配和初始化这个 TableViewController 类吗？或者有任何类似于 Rspec 的框架（例如，ruby/rails），我可以在其中检查应用程序屏幕中的特定标签是否具有此纬度和经度值？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:38:04.573

我有一系列关于 iOS TDD 的截屏视频，从[https://qualitycoding.org/objective-c-tdd/开始](https://qualitycoding.org/objective-c-tdd/)

关于您的特定问题，单元测试需要以以下三种方式之一检查结果：

1.  返回值验证
2.  状态验证
3.  行为验证

我在 -locationManager:didUpdateLocations: 中看不到任何导致任何这些的东西。也许您想改为使用 TDD 辅助方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:49:22.920

按照本教程了解基础知识：[http ://www.raywenderlich.com/3716/unit-testing-in-xcode-4-quick-start-guide](http://www.raywenderlich.com/3716/unit-testing-in-xcode-4-quick-start-guide)

然后，您将能够决定如何编写自己的测试套件。祝你好运

# java - 如何获得 NumPad 布局

> ID：15643483
> 
> 赞同：1
> 
> 时间：2013-03-26T17:19:49.277
> 
> 标签：java, swing, applet, japplet

我需要键盘上的小键盘布局。我得到了大部分，我遇到的唯一问题是“进入”按钮应该一直到底部。但是当我使用 Panel p4 并将其设置为 SOUTH 时，“进入”按钮不会到达底部。这是代码。

这是它的样子

![在此处输入图像描述](../Images/51d2163399d33927381098268948ed6e.png)

这就是我想要的

![在此处输入图像描述](../Images/649d40319698b5d921128359faf13657.png)

```
public class NumPad extends Applet
{   
  public void init() {
  setLayout(new BorderLayout());

  Panel p1 = new Panel();
  p1.setLayout(new GridLayout(1, 0));
  p1.add(new Button("Num"));
  p1.add(new Button("/"));
  p1.add(new Button("*"));
  p1.add(new Button("-"));
  add(p1, BorderLayout.NORTH);

  Panel p2 = new Panel();
  p2.setLayout(new GridLayout(3, 0));
  p2.add(new Button("7"));
  p2.add(new Button("8"));
  p2.add(new Button("9"));
  p2.add(new Button("4"));
  p2.add(new Button("5"));
  p2.add(new Button("6"));
  p2.add(new Button("1"));
  p2.add(new Button("2"));
  p2.add(new Button("3"));
  add(p2, BorderLayout.CENTER);      

  Panel p4 = new Panel();
  p4.setLayout(new GridLayout(1, 0, 30, 40));
  p4.add(new Button("0"));
  p4.add(new Button("."));
  add(p4, BorderLayout.SOUTH);      

  Panel p3 = new Panel();
  p3.setLayout(new GridLayout(2, 0));
  p3.add(new Button("+"));
  p3.add(new Button("Enter"));
  add(p3, BorderLayout.EAST);      
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:06:08.547

无需重新安排所有内容，您可以简单地嵌套`p2`并`p4`进入另一个`JPanel` 并将该新面板添加到中心。只要您不在`SOUTH`“主”面板中添加任何内容，您就可以开始了。

顺便说一句，不要使用awt组件，直接使用Swing组件。这将为您节省大量时间并避免令人不安的行为（考虑扩展`JApplet`而不是`Applet`）

看这个小例子：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class NumPad extends JPanel {
    public NumPad() {
        setLayout(new BorderLayout());

        JPanel top = new JPanel(new GridLayout(1, 0));
        top.add(new JButton("Num"));
        top.add(new JButton("/"));
        top.add(new JButton("*"));
        top.add(new JButton("-"));
        add(top, BorderLayout.NORTH);
        JPanel p2p4 = new JPanel(new BorderLayout());
        JPanel p2 = new JPanel(new GridLayout(3, 0));
        p2.add(new JButton("7"));
        p2.add(new JButton("8"));
        p2.add(new JButton("9"));
        p2.add(new JButton("4"));
        p2.add(new JButton("5"));
        p2.add(new JButton("6"));
        p2.add(new JButton("1"));
        p2.add(new JButton("2"));
        p2.add(new JButton("3"));
        p2p4.add(p2, BorderLayout.CENTER);

        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1, 0, 30, 40));
        p4.add(new JButton("0"));
        p4.add(new JButton("."));
        p2p4.add(p4, BorderLayout.SOUTH);
        add(p2p4);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(2, 0));
        p3.add(new JButton("+"));
        p3.add(new JButton("Enter"));
        add(p3, BorderLayout.EAST);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame(NumPad.class.getSimpleName());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                NumPad numPad = new NumPad();
                frame.add(numPad);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:45:43.777

这就是 BorderLayout 的工作原理。 `BorderLayout.EAST`没有延伸到底部。

![在此处输入图像描述](../Images/612a550f4ebd6c0126297c7a1c3ea1a7.png)

尝试[不同的布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)或以不同的方式重新排列组件。看这个例子：

```
JPanel panel = new JPanel();
panel.setLayout(new BorderLayout());

setLayout(new BorderLayout());

Panel p1 = new Panel();
p1.setLayout(new GridLayout(1, 0));
p1.add(new Button("Num"));
p1.add(new Button("/"));
p1.add(new Button("*"));
panel.add(p1, BorderLayout.NORTH);

Panel p2 = new Panel();
p2.setLayout(new GridLayout(3, 0));
p2.add(new Button("7"));
p2.add(new Button("8"));
p2.add(new Button("9"));
p2.add(new Button("4"));
p2.add(new Button("5"));
p2.add(new Button("6"));
p2.add(new Button("1"));
p2.add(new Button("2"));
p2.add(new Button("3"));
panel.add(p2, BorderLayout.CENTER);

Panel p4 = new Panel();
p4.setLayout(new GridLayout(1, 0, 30, 40));
p4.add(new Button("0"));
p4.add(new Button("."));
panel.add(p4, BorderLayout.SOUTH);

Panel p3 = new Panel();
p3.setLayout(new GridLayout(3, 0));
p3.add(new Button("-"));
p3.add(new Button("+"));
p3.add(new Button("Enter"));

add(panel, BorderLayout.CENTER);
add(p3, BorderLayout.EAST); 
```

# c# - 使用 Webbrowser 控件的 ManipulationDelta 事件滚动列表框

> ID：15643485
> 
> 赞同：0
> 
> 时间：2013-03-26T17:19:50.947
> 
> 标签：c#, silverlight, windows-phone-8

我在一个列表框中有多个 webbrowser 控件（层次结构：DataBoundListBox->Multiple ExpandableItems->每个可扩展项在展开时显示一个 webbrowser 控件。）。

问题是，webbrowser 控件捕获了拖动手势，一旦 webbrowser 控件展开，就不可能滚动列表框。如果 webbrowser 的内容太长，用户会被卡住并且无法再滚动，因为 webbrowser 会填满整个屏幕。现在，网络浏览器只需要响应简单的点击事件（按钮）。

webbrowser 控件在内部捕获所有触摸手势和事件，但似乎有一个`border`元素可以在触摸手势到达之前拦截触摸事件`tilehost`并且永远消失：

`Border border = WebViewer.Descendants<Border>().Last() as Border;`

为了捕捉触摸手势，我在边框上添加了一个 ManipulationDelta 事件，因为它不允许我添加像`DragStarted`, `DragDelta`,之类的 Gesture Listener 事件`DragCompleted`。

现在我需要将此 ManipulationDelta 事件数据获取到浏览器所在的列表框中的滚动查看器。

这是一种有效的概念方法吗？有人能够帮助我如何让它运行吗？

PS：我尝试了另一种方式（将点击手势事件从画布覆盖发送到 webbrowser 控制页面内的 javascript 并模拟页面上的点击）但这似乎与触摸坐标和 javascript 效果不太好坐标有一个未知的偏移量。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:12:02.720

事实证明，最后一个使用 javascript 的方法实际上工作得很好，问题是传递给 javascript 的双 x 和 y 值。将其转换为整数后，它检测到底层的 html 元素像素精确。

如果您想知道如何在 webbrowser 元素中将点击事件传输到网站，您需要执行以下操作：

将“LinqToVisualTree”添加到您的项目和文档中（fe：使用 LinqToVisualTree；）！

将此 javascript 代码添加到您的网站（除了 jquery）：

```
function simulateClick(x, y) {
jQuery(document.elementFromPoint(x, y)).click();} 
```

将 silverlight 工具包（搜索 GestureService 以获取信息）添加到您的解决方案中，并将此事件添加到 XAML 文件中的覆盖画布（放置在 webbrowser 元素上的画布元素）（例如，注意我也放在那里的画布。你将不得不用您自己的画布或网格或其他任何东西替换它：

```
<Canvas>
    <toolkit:GestureService.GestureListener>
        <toolkit:GestureListener  Tap="GestureListener_Tap"/>
    </toolkit:GestureService.GestureListener>
</Canvas> 
```

将此添加到您的 xaml 文件 codebehind c# 中（请注意，我从水龙头处重新计算了原始坐标，您可能需要更改数字 1.3499。这是模拟器上按钮的静态偏移因子。）：

```
 private void GestureListener_Tap(object sender, Microsoft.Phone.Controls.GestureEventArgs e)
    {
        Canvas cv = sender as Canvas;
        //!!! You need to change the following search for the webbrowser to your own    xaml structure.
        // It uses "LinqToVisualTree" to find the element! Add it to your document!
        WebBrowser wb = cv.Ancestors<Grid>().First().ElementsBeforeSelf<WebBrowser>().First() as WebBrowser;
        var gesture = e.GetPosition(cv);
        var gx = gesture.X;
        var gy = gesture.Y;
        tapBrowser(wb, gx, gy);
    }

    private static void tapBrowser(WebBrowser wb, double x, double y)
    {
        GeneralTransform gt = wb.TransformToVisual(Application.Current.RootVisual as UIElement);
        Point offset = gt.Transform(new Point(0, 0));
        double rx = (x / 1.3499);
        double ry = (y / 1.3499);
        int ix = (int)rx;
        int iy = (int)ry;
        wb.InvokeScript("simulateClick", ix.ToString(), iy.ToString());
    } 
```

确保您的画布与 webbrowser 元素具有相同的大小！

而已。您现在拥有一个启用了点击功能的浏览器，但您可以将其余手势保留在本机应用程序中，并且浏览器不会捕捉到它们！从理论上讲，您可以重定向更多手势，但您需要有一个 javascript/jquery 函数可以“重新模拟”您想要传递的手势。

# rvm - 无法使用 RVM 安装 Ruby 2.0.0-p0。运行“make -j8”时出错

> ID：15643486
> 
> 赞同：7
> 
> 时间：2013-03-26T17:19:54.480
> 
> 标签：rvm, ruby-2.0

我今天尝试使用 RVM 安装 Ruby 2，但失败了。我更新了 RVM，我所有的 brew 公式等等。这就是我得到的：

```
admin:/$ rvm install ruby-2.0.0-p0
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-2.0.0-p0.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing requirements for osx, might require sudo password.
Already up-to-date.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
Installing Ruby from source to: /Users/admin/.rvm/rubies/ruby-2.0.0-p0, this may take a while depending on your cpu(s)...
ruby-2.0.0-p0 - #downloading ruby-2.0.0-p0, this may take a while depending on your connection...
ruby-2.0.0-p0 - #extracting ruby-2.0.0-p0 to /Users/admin/.rvm/src/ruby-2.0.0-p0
ruby-2.0.0-p0 - #extracted to /Users/admin/.rvm/src/ruby-2.0.0-p0
ruby-2.0.0-p0 - #configuring......................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-2.0.0-p0 - #compiling...............................................................................................................................................................................................................
Error running 'make -j8',
please read /Users/admin/.rvm/log/ruby-2.0.0-p0/make.log
There has been an error while running make. Halting the installation. 
```

有人遇到过这个问题吗？

-编辑 - -

/Users/admin/.rvm/log/ruby-2.0.0-p0/make.log：

```
[2013-03-26 18:16:26] make
    CC = gcc-4.2
    LD = ld
    LDSHARED = gcc-4.2 -dynamiclib
    CFLAGS = -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration   -fno-common -pipe 
    XCFLAGS = -include ruby/config.h -include ruby/missing.h -D_FORTIFY_SOURCE=2 -fstack-protector -fno-strict-overflow -fvisibility=hidden -DRUBY_EXPORT
    CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libxml2/include -I/usr/local/opt/libxslt/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -I/usr/local/opt/sqlite/include   -I. -I.ext/include/x86_64-darwin12.3.0 -I./include -I.
    DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libxml2/lib -L/usr/local/opt/libxslt/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L/usr/local/opt/sqlite/lib  -install_name /Users/admin/.rvm/rubies/ruby-2.0.0-p0/lib/libruby.2.0.0.dylib -current_version 2.0.0 -compatibility_version 2.0.0  -fstack-protector -Wl,-u,_objc_msgSend  -fstack-protector -Wl,-u,_objc_msgSend  
    SOLIBS = 
compiling main.c
compiling dmydln.c
compiling dmyencoding.c
compiling version.c
compiling miniprelude.c
translating probes probes.d
compiling bignum.c
compiling class.c
. ./vm_opts.h
compiling compar.c
compiling complex.c
compiling dir.c
compiling dln_find.c
compiling enum.c
compiling enumerator.c
compiling error.c
compiling eval.c
compiling load.c
compiling proc.c
compiling file.c
compiling gc.c
compiling hash.c
compiling inits.c
compiling io.c
compiling marshal.c
compiling math.c
compiling node.c
compiling numeric.c
compiling object.c
compiling pack.c
compiling parse.c
compiling process.c
compiling random.c
compiling range.c
compiling rational.c
compiling re.c
compiling regcomp.c
compiling regenc.c
compiling regerror.c
compiling regexec.c
compiling regparse.c
compiling regsyntax.c
compiling ruby.c
compiling safe.c
compiling signal.c
compiling sprintf.c
compiling st.c
compiling strftime.c
compiling string.c
compiling struct.c
compiling time.c
compiling transcode.c
compiling util.c
compiling variable.c
compiling compile.c
compiling debug.c
compiling iseq.c
compiling vm.c
compiling vm_dump.c
compiling vm_backtrace.c
compiling vm_trace.c
compiling thread.c
compiling cont.c
compiling ./enc/ascii.c
compiling ./enc/us_ascii.c
compiling ./enc/unicode.c
compiling newline.c
compiling ./enc/utf_8.c
compiling ./missing/setproctitle.c
compiling dmyext.c
compiling dln.c
compiling encoding.c
compiling dmyversion.c
compiling array.c
linking miniruby
generating encdb.h
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:375: [BUG] Stack consistency error (sp: 30, bp: 28)
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]

-- Crash Report log information --------------------------------------------
   See Crash Report log file under the one of following:
     * ~/Library/Logs/CrashReporter
     * /Library/Logs/CrashReporter
     * ~/Library/Logs/DiagnosticReports
     * /Library/Logs/DiagnosticReports
   the more detail of.

-- Control frame information -----------------------------------------------
c:0007 p:0081 s:0030 e:000029 CLASS  /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:375
c:0006 p:0014 s:0026 e:000025 CLASS  /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:354
c:0005 p:0011 s:0024 e:000023 CLASS  /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:341
c:0004 p:0020 s:0020 e:000019 TOP    /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:270 [FINISH]
c:0003 p:---- s:0018 e:000017 CFUNC  :require
c:0002 p:0007 s:0014 E:0006e8 EVAL   ./tool/generic_erb.rb:2 [FINISH]
c:0001 p:0000 s:0002 E:0015f8 TOP    [FINISH]

./tool/generic_erb.rb:2:in `<main>'
./tool/generic_erb.rb:2:in `require'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:270:in `<top (required)>'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:341:in `<class:ERB>'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:354:in `<class:Compiler>'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/erb.rb:375:in `<class:Scanner>'

-- C level backtrace information -------------------------------------------
0   miniruby                            0x0000000102506e44 rb_vm_bugreport + 164
1   miniruby                            0x00000001023de15e report_bug + 302
2   miniruby                            0x00000001023de414 rb_bug + 180
3   miniruby                            0x00000001024fcec0 vm_exec_core + 32080
4   miniruby                            0x00000001024fd09e vm_exec + 94
5   miniruby                            0x00000001024fdf7a rb_iseq_eval + 266
6   miniruby                            0x00000001023e2d72 rb_load_internal + 306
7   miniruby                            0x00000001023e44c1 rb_require_safe + 1313
8   miniruby                            0x00000001024ecc84 call_cfunc_1 + 20
9   miniruby                            0x00000001024f3146 vm_call_cfunc + 1046
10  miniruby                            0x0000000102501d00 vm_call_method + 224
11  miniruby                            0x00000001024f8383 vm_exec_core + 12819
12  miniruby                            0x00000001024fd09e vm_exec + 94
13  miniruby                            0x00000001024fde4e rb_iseq_eval_main + 206
14  miniruby                            0x00000001023e14df ruby_exec_internal + 111
15  miniruby                            0x00000001023e24c2 ruby_run_node + 82
16  miniruby                            0x00000001023a85df main + 79
17  libdyld.dylib                       0x00007fff8544f7e1 start + 0

-- Other runtime information -----------------------------------------------

* Loaded script: ./tool/generic_erb.rb

* Loaded features:

    0 enumerator.so
    1 /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/cgi/util.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:111: [BUG] Stack consistency error (sp: 38, bp: 36)
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]

-- Crash Report log information --------------------------------------------
   See Crash Report log file under the one of following:
     * ~/Library/Logs/CrashReporter
     * /Library/Logs/CrashReporter
     * ~/Library/Logs/DiagnosticReports
     * /Library/Logs/DiagnosticReports
   the more detail of.

-- Control frame information -----------------------------------------------
c:0006 p:0038 s:0038 e:000037 CLASS  /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:111
c:0005 p:0035 s:0034 e:000033 CLASS  /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:107
c:0004 p:0009 s:0032 e:000031 TOP    /Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:85 [FINISH]
c:0003 p:---- s:0030 e:000029 CFUNC  :require
c:0002 p:0098 s:0026 E:002668 EVAL   ./tool/mkconfig.rb:11 [FINISH]
c:0001 p:0000 s:0002 E:0001f8 TOP    [FINISH]

./tool/mkconfig.rb:11:in `<main>'
./tool/mkconfig.rb:11:in `require'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:85:in `<top (required)>'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:107:in `<module:FileUtils>'
/Users/admin/.rvm/src/ruby-2.0.0-p0/lib/fileutils.rb:111:in `<module:NoWrite>'

-- C level backtrace information -------------------------------------------
0   miniruby                            0x0000000101179e44 rb_vm_bugreport + 164
1   miniruby                            0x000000010105115e report_bug + 302
2   miniruby                            0x0000000101051414 rb_bug + 180
3   miniruby                            0x000000010116fec0 vm_exec_core + 32080
4   miniruby                            0x000000010117009e vm_exec + 94
5   miniruby                            0x0000000101170f7a rb_iseq_eval + 266
6   miniruby                            0x0000000101055d72 rb_load_internal + 306
7   miniruby                            0x00000001010574c1 rb_require_safe + 1313
8   miniruby                            0x000000010115fc84 call_cfunc_1 + 20
9   miniruby                            0x0000000101166146 vm_call_cfunc + 1046
10  miniruby                            0x0000000101174d00 vm_call_method + 224
11  miniruby                            0x000000010116b383 vm_exec_core + 12819
12  miniruby                            0x000000010117009e vm_exec + 94
13  miniruby                            0x0000000101170e4e rb_iseq_eval_main + 206
14  miniruby                            0x00000001010544df ruby_exec_internal + 111
15  miniruby                            0x00000001010554c2 ruby_run_node + 82
16  miniruby                            0x000000010101b5df main + 79
17  libdyld.dylib                       0x00007fff8544f7e1 start + 0
18  ???                                 0x0000000000000009 0x0 + 9

-- Other runtime information -----------------------------------------------

* Loaded script: ./tool/mkconfig.rb

* Loaded features:

    0 enumerator.so

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

make: *** [encdb.h] Abort trap: 6
make: *** Waiting for unfinished jobs....
make: *** [.rbconfig.time] Abort trap: 6 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T09:03:52.923

确保安装最新版本`Command Line Tools for Xcode`并遵循以下说明：

```
rvm get stable
rvm autolibs enable
rvm install ruby || rvm install ruby --with-gcc=clang 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T01:42:53.407

从 '/etc/rvmrc' 中删除带有 'rvm_autolibs_flag=' 的行，请手动清理它，然后

```
rvm get stable
rvm autolibs enable
rvm install ruby || rvm install ruby --with-gcc=clang 
```

# java - 我想做一个简化的Java游戏引擎

> ID：15643492
> 
> 赞同：0
> 
> 时间：2013-03-26T17:20:12.350
> 
> 标签：java, lua

我想制作一个易于使用的 Java 游戏引擎，主要是因为它具有更高级别的语言解释器。我想在 LuaJ 解释器中使用 Lua 语言，但我得到了一些非常缓慢的结果......

我需要关于存在哪些其他类似 Lua 的语言（带有可用的 Java 解释器）的建议，这些语言（带有解释器）可以在我的 Java 应用程序上执行得更快（比[LuaJ ）。](http://luaj.org/luaj/README.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:32:39.413

在游戏编程领域，Java 本身被认为很慢。我建议您可以从构建在 Java 之上的代码生成工具开始。我在 Drools、Groovy 和类似的 DSL 上进行了广泛的工作，并且可以保证即使是典型的企业应用程序它们也“慢”。一个问题是基于 java 构建的动态解释层。[您可以在http://www.slideshare.net/michael.galpin/performance-comparisons-of-dynamic-languages-on-the-java-virtual-machine](http://www.slideshare.net/michael.galpin/performance-comparisons-of-dynamic-languages-on-the-java-virtual-machine)查看此比较研究中的典型表现

如果您可以创建一种在编译之前生成代码的语言，那么您将两全其美。这并不意味着您从第一天起就需要了解编译器理论知识。您可以简单地在 Java 中创建实用程序函数，您可以将其作为客户端库分发。但是，您需要彻底了解反射才能以这种方式处理解决方案。由于*没有人*更改正在运行的生产服务器中的代码，因此您会非常好。

# python - 仅当 if 语句为真时如何返回值？

> ID：15643493
> 
> 赞同：2
> 
> 时间：2013-03-26T17:20:14.417
> 
> 标签：python

所以我得到了一段让我头疼的代码。

```
def Handy():
    print "\nMöchten Sie ein neues Handy?"
    print "\n1 - Ja\n2 - Nein"

    handy = raw_input(">>> ")

    if handy == "2":
        print "\nSie möchten kein neues Handy"
    elif handy == "1":
        wunschhandy = raw_input("\nBitte geben Sie den Namen des Handys ein: ")
    else:
        Handy()
    return handy, wunschhandy 
```

如果我选择选项`"1"`一切都好。但是，如果我去做`"2"`它会给我这个错误：`"UnboundLocalError: local variable 'wunschhandy' referenced before assignment"`

我知道为什么会这样，或者至少我认为我知道为什么。这是因为 var`wunschhandy`没有被清除，因为我使用了 option `"2"`。

那么我该如何解决这个问题呢？有没有办法只返回一个值，如果它是由正确的选择分配的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:22:59.130

如果您只想`wunschhandy`在用户选择“1”时返回，则将 return 语句放在 if 块中

```
def Handy():
    print "\nMöchten Sie ein neues Handy?"
    print "\n1 - Ja\n2 - Nein"

    handy = raw_input(">>> ")

    if handy == "2":
        print "\nSie möchten kein neues Handy"
        return handy
    elif handy == "1":
        wunschhandy = raw_input("\nBitte geben Sie den Namen des Handys ein: ")
        return handy, wunschhandy
    else:
        Handy()
        //do you want to return Handy()? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:23:24.370

在你的情况下，我会在声明`wunschhandy = None`之前设置。`if`

在这种情况下，您有一个定义的值，调用者可以对其进行测试。

另一种选择是

```
if handy == "2":
    print "\nSie möchten kein neues Handy"
    return handy,
elif handy == "1":
    wunschhandy = raw_input("\nBitte geben Sie den Namen des Handys ein: ")
    return handy, wunschhandy
else:
    Handy() 
```

它为选项 1 返回一个长度为 2 的元组，为选项 2 返回一个长度为 1 的元组。调用者可以轻松地对其进行测试。

此外，`Handy()`我不会递归调用，而是在其中放置一个循环。否则你可能会以堆栈溢出错误结束......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:26:32.837

只需初始化`wunschhandy`，所以它在范围内：

```
def Handy():
    handy = raw_input("Moechten Sie ein neues Handy?\n1 - Ja\n2 - Nein\n>>> ")

    wunschhandy =  None
    if handy is "2" :
        print "\nSie moechten kein neues Handy"
    elif handy is "1" :
        wunschhandy = raw_input("\nBitte geben sie den Namen des Handys ein: ")
    else :
        Handy()
    return handy, wunschhandy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:22:35.000

仅基于您提供的一小段代码，似乎只有在 'handy == "1"' 时才定义 'wunschhandy' 变量，但最后会返回此变量。我会在 if 语句上方将 wunschhandy 设置为 null，以便在尝试最后返回之前定义变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T17:22:43.600

这是因为变量`wunschhandy`是在声明之前返回的。只有当您输入 1 时，它才会被声明。您可以`wunschhandy`在 if 语句之前声明并为其分配一个默认值。

# delphi - TdwsUnit 中的记录方法

> ID：15643498
> 
> 赞同：1
> 
> 时间：2013-03-26T17:20:33.463
> 
> 标签：delphi, dwscript

有没有办法向 TdwsUnit 中的记录添加方法？似乎 members 属性只允许您添加字段。是否也可以注册构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:47:26.793

还没有，TdwsRecord.DoGenerate 方法还不支持它们......

目前不支持记录构造函数，我正在考虑为真正的构造函数（ala C++）保留语法，您可以通过使用类函数来实现类似Delphi的记录构造函数（尽管由于上述限制，它们目前只能是在脚本代码中声明）。

# ffmpeg - FFMPEG 流式传输 RTP：未设置时基

> ID：15643499
> 
> 赞同：6
> 
> 时间：2013-03-26T17:20:38.587
> 
> 标签：ffmpeg, streaming, h.264, rtp

我正在尝试创建一个小型演示，以感受使用 ffmpeg 以编程方式进行流式传输。我使用[这个问题](https://stackoverflow.com/questions/11691921/trouble-syncing-libavformat-ffmpeg-with-x264-and-rtp)的代码作为基础。我可以编译我的代码，但是当我尝试运行它时，我总是得到这个错误：

> [rtp @ 0xbeb480] 未设置时基

问题是，我已经设置了时基参数。我什至尝试将它们设置为流（以及与流关联的编解码器），尽管据我所知这不是必需的。这是我的代码中的相关部分：

```
AVCodec* codec = avcodec_find_encoder(AV_CODEC_ID_H264);
AVCodecContext* c = avcodec_alloc_context3(codec);
c->pix_fmt = AV_PIX_FMT_YUV420P;
c->flags = CODEC_FLAG_GLOBAL_HEADER;
c->width = WIDTH;
c->height = HEIGHT;
c->time_base.den = FPS;
c->time_base.num = 1;
c->gop_size = FPS;
c->bit_rate = BITRATE;

avcodec_open2(c, codec, NULL);
struct AVStream* stream = avformat_new_stream(avctx, codec);

// TODO: causes an error
avformat_write_header(avctx, NULL); 
```

在接近结尾处调用“avformat_write_header”时发生错误。检查所有可能失败的方法（如avcodec_open2），我只是删除了检查以使代码更具可读性。

挖掘谷歌和 ffmpeg 源代码并没有产生任何有用的结果。我认为这真的很基本，但我被卡住了。谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-10T21:21:41.587

您在错误的编解码器上下文中进行设置。

创建的流`avformat_new_stream()`有自己的内部编解码器上下文，你创建的那个`avcodec_alloc_context3()`是不必要的，对`avformat_write_header()`.

要正确设置变量，请按以下方式设置：

```
AVCodec* codec = avcodec_find_encoder(AV_CODEC_ID_H264);
struct AVStream* stream = avformat_new_stream(avctx, codec);
stream->codec->pix_fmt = AV_PIX_FMT_YUV420P;
stream->codec->flags = CODEC_FLAG_GLOBAL_HEADER;
stream->codec->width = WIDTH;
stream->codec->height = HEIGHT;
stream->codec->time_base = (AVRational){1,FPS};
stream->codec->gop_size = FPS;
stream->codec->bit_rate = BITRATE; 
```

这为我解决了这个特殊问题，我也添加了这里给出的其他答案，因为这就是我设置它的方式，尽管`time_base`如果你一直在与正确的编解码器上下文交谈，你的设置方法可能也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:27:43.083

尝试：

```
c->time_base = (AVRational) {1, FPS}; 
```

# c - 父母试图读取孩子退出状态（或返回值），分叉并等待

> ID：15643502
> 
> 赞同：0
> 
> 时间：2013-03-26T17:20:42.423
> 
> 标签：c, fork, solaris, wait, exit

我很困惑。据说，基于 man 和许多其他来源，例如： [当操作系统杀死您的进程时返回代码](https://stackoverflow.com/questions/742413/return-code-when-os-kills-your-process/747819#747819) wait(&status) 应该使我有可能获得子进程的退出状态或返回值？

这两个代码片段应该让我看到它的孩子的退出值，然后打印它。子进程函数：

```
 int childFunction(char in[],char logPath[]){
        FILE *logFile= fopen( logPath, "a" );
        if(logFile==NULL)
        return 1;
        int c=system(in);
        fclose(logFile);
        return(c);
    } 
```

主要：

```
 {...some unimportant code before this}
        result= fork();
        if(result==0){
            exit(childFunction(inLine,logPath));
        }
        else if(result>0){
            int status=0;;
            int c=(int)waitpid(-1,&status,0);
            printf("a:%d b:%d\n",status, WIFEXITED(status));
        else
            return -1;
        i=0; 
```

我尝试了等待，睡了一段时间，退出，返回，并阅读了几次手册页。要么我对这个功能的理解存在基本错误，要么看了 4 小时后我根本看不到它。

已解决由于某种原因，我绝对不明白，如果您将`return(c)`in childFunction 更改为`if(c!=)return(1);else return(0)`它将起作用。不知道为什么。

已解决 2 好的，现在我想我知道为什么了。看，似乎返回调用或等待将状态减少到 8 个最高有效位 (256)。这意味着什么？这意味着，如果您发送普通 int，则使用第一位，而丢弃后 8 位。同时，当我指定`return (1)`编译器自动将int“缩短”为short int。解决方案是返回一个短数字，或者像我在之前的“已解决”评论中所做的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:30:48.733

问题是您不是在等待孩子退出

> ```
> int c=(int)waitpid(-1,&status,WNOHANG); 
> ```

在这里，父进程检查子进程是否已退出，如果子进程尚未退出，则返回。

在上述情况下，由于您在子进程中打开文件，因此子进程中存在 IO 等待的可能性更大，因此父进程将被执行。

现在父进程将检查状态，因为`WNOHANG`使用它不会在 waitpid 处被阻塞，它会继续，这就是你没有得到正确状态的原因

我建议你使用

> ```
> int c=(int)waitpid(&status); 
> ```

# javascript - 如何禁用 UL 中的特定 LI 元素？

> ID：15643505
> 
> 赞同：36
> 
> 时间：2013-03-26T17:20:49.250
> 
> 标签：javascript, css, html-lists, listitem

我有一个菜单`<ul>`。每个菜单项都是`<li>`当前可点击的。基于某些条件，我想禁用（使其不可点击）特定`<li>`元素。我怎样才能做到这一点？我也尝试在and上使用该`disabled`属性。都没有奏效。有什么建议么？`<li>``list-style:none`

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2016-03-09T21:07:17.823

如果您仍想显示该项目但使其不可点击并使用 CSS 禁用：

CSS：

```
.disabled {
    pointer-events:none; //This makes it not clickable
    opacity:0.6;         //This grays it out to look disabled
} 
```

HTML：

```
<li class="disabled">Disabled List Item</li> 
```

此外，如果您使用的是 BootStrap，它们已经为此目的提供了一个名为 disabled 的类。[请参阅此示例](https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_dropdown-active&stacked=h)。

正如@LV98 指出的那样，用户可以在客户端更改它并提交您没有预料到的选择。您还需要在服务器上进行验证。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-14T08:23:59.807

我通常使用`<li>`包含`<a>`链接。我禁用了这样的点击动作写作；您可能没有包含`<a>`链接，那么您将忽略我的帖子。

```
a.noclick       {
  pointer-events: none;
}
```

```
<a class="noclick" href="#">this is disabled</a>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T17:25:30.117

使用 CSS3：[http ://www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

如果出于任何原因这不是一个选项，您可以尝试提供列表项类：

```
<ul>
<li class="one"></li>
<li class="two"></li>
<li class="three"></li>
...
</ul> 
```

然后在你的CSS中：

```
li.one{display:none}/*hide first li*/
li.three{display:none}/*hide third li*/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T17:29:31.197

使用 JQuery：[http ://api.jquery.com/hide/](http://api.jquery.com/hide/)

```
$('li.two').hide() 
```

在 ：

```
<ul class="lul">
    <li class="one">a</li>
    <li class="two">b</li>
    <li class="three">c</li>
</ul> 
```

准备好文件。

[http://jsfiddle.net/2dDSG/](http://jsfiddle.net/2dDSG/)

# php - 这个嵌套 {* *} 的正则表达式模式有什么问题？

> ID：15643508
> 
> 赞同：0
> 
> 时间：2013-03-26T17:21:01.400
> 
> 标签：php, regex, preg-replace, pattern-matching

我有这个 HTML 文档

```
{*
<h2 class="block_title bg0">ahmooooooooooooooooooooooooooooooooooooooooooodi</h2>
<div class="block_content padding bg0">{welc_msg}</div>
<br/>
    {*
    hii<br /><span>5
    *}

    {*
    hii<br /><span>5

    *}
*} 
```

我想删除它，所以我想删除之间的任何东西`{* *}`

我写了正则表达式模式：

```
preg_replace("#(\{\*(.*?)\*\})+#isx",'',$html); 
```

它可以工作，但理想情况下它不能 100% 工作，它`*}`最终会离开。

你能给我真正的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:30:06.753

您需要一个[递归正则表达式](http://www.php.net/manual/en/regexp.reference.recursive.php)来匹配嵌套括号。它应该如下所示：

```
"#(\{\*([^{}]*?(?R)[^{}]*?)\*\})+#isx" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:48:59.783

如果您的正则表达式引擎支持匹配的嵌套结构（PHP 支持），那么您可以像这样一次性删除（可能是嵌套的）元素：

## 一次性应用递归正则表达式：

```
function stripNestedElementsRecursive($text) {
    return preg_replace('/
        # Match outermost (nestable) "{*...*}" element.
        \{\*        # Element start tag sequence.
        (?:         # Group zero or more element contents alternatives.
          [^{*]++   # Either one or more non-start-of-tag chars.
        | \{(?!\*)  # or "{" that is not beginning of a start tag.
        | \*(?!\})  # or "*" that is not beginning of an end tag.
        | (?R)      # or a valid nested matching tag element.
        )*          # Zero or more element contents alternatives.
        \*\}        # Element end tag sequence.
        /x', '', $text);
} 
```

上面的递归正则表达式匹配*最外层* `{*...*}`的元素，其中可能包含嵌套元素。

但是，如果您的正则表达式引擎不支持匹配的嵌套结构，您仍然可以完成工作，但您不能一次性完成。可以制作匹配*最内层* `{*...*}`元素的正则表达式（即不包含任何嵌套元素的正则表达式）。可以以递归方式应用此正则表达式，直到文本中没有更多元素，如下所示：

## 递归应用的非递归正则表达式：

```
function stripNestedElementsNonRecursive($text) {
    $re = '/
        # Match innermost (not nested) "{*...*}" element.
        \{\*        # Element start tag sequence.
        (?:         # Group zero or more element contents alternatives.
          [^{*]++   # Either one or more non-start-of-tag chars.
        | \{(?!\*)  # or "{" that is not beginning of a start tag.
        | \*(?!\})  # or "*" that is not beginning of an end tag.
        )*          # Zero or more element contents alternatives.
        \*\}        # Element end tag sequence.
        /x';
    while (preg_match($re, $text)) {
        $text = preg_replace($re, '', $text);
    }
    return $text;
} 
```

使用正则表达式处理嵌套结构是一个高级主题，必须*小心行事！*如果有人真的想将正则表达式用于诸如此类的高级应用程序，我强烈建议您阅读有关该主题的经典著作：杰弗里·弗里德尔（ Jeffrey Friedl ）的《[掌握正则表达式》（第 3 版） 。](https://rads.stackoverflow.com/amzn/click/com/0596528124 "关于正则表达式的最佳书籍 - 永远！")老实说，这是我读过的最有用的书。

快乐的正则表达式！

# php - 下拉列表中的 HTML 列表第三类

> ID：15643515
> 
> 赞同：0
> 
> 时间：2013-03-26T17:21:20.253
> 
> 标签：php, javascript, jquery, html

昨天我问我如何为子类别生成第二个下拉列表，所以在第一个下拉列表中我会选择“卡车”，第二个下拉列表会出现“黑色”或“白色”颜色可供选择，或者如果在第一个下拉列表中我选择“汽车”，第二个生成的下拉菜单将具有“红色”、“绿色”或“蓝色”选项，这会导致我在代码中实现的[http://jsfiddle.net/7YeL6/5/](http://jsfiddle.net/7YeL6/5/)并像魅力（我已经在“.js”中添加了更多结果并且正在 100% 工作）。

但现在我面临一个新问题，因为我需要生成第三个类别，而我对 jquery 一无所知。

基于前面的代码，我需要根据第二个下拉列表显示第三个下拉列表，例如：如果我选择“卡车”，那么“黑色”将出现一个新的下拉列表以选择“新”或“使用”，或者如果我选择“汽车”，然后“红色”，将出现一个新的下拉菜单以选择“购买”或“租赁”。

**代码**

```
<select name="category" id="category">
    <option selected value="Please Select">Please Select</option>           
    <option value="Cars">Cars</option>
    <option value="Trucks">Trucks</option>
    <option value="Motorcycles">Motorcycles</option>
    <option value="Boats">Boats</option>
</select>

<div>
<select name="category2" id="truck" class="second">
        <option value="white">white</option>
        <option value="black">black</option>            
</select>

<select name="category2" id="car" class="second">
        <option value="red">red</option>
        <option value="green">green</option>
        <option value="blue">blue</option>           
</select>
</div> 
```

**CSS 代码**

```
#category2{
    display: none;
}
.second{
    display: none;

} 
```

**JS代码**

```
$(document).ready(function(){
$("#category").change(function () {
  var str = "";
str =  $("select#category option:selected").text();
    if(str == "Trucks"){
        $("select.second").not("#truck").hide();
        $("#truck").show();
        $("#truck").fadeIn(1000);
    }
    else if(str == "Cars"){
        $("select.second").not("#car").hide();
        $("#car").show();
        $("#car").fadeIn(1000);
    }

})
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:38:51.907

看起来你想要这个

**演示**：http: [//jsfiddle.net/7YeL6/7/](http://jsfiddle.net/7YeL6/7/)

**代码**

```
<select id="category" class="first">
    <option selected value="Please Select">Please Select</option>           
    <option value="car">Cars</option>
    <option value="truck">Trucks</option>
    <option value="motor">Motorcycles</option>
    <option value="boat">Boats</option>
</select>

<select id="truck" class="second">
        <option selected value="Please Select">Please Select</option>    
        <option value="white">white</option>
        <option value="black">black</option>            
</select>
<select id="car" class="second">
        <option selected value="Please Select">Please Select</option>    
        <option value="red">red</option>
        <option value="green">green</option>
        <option value="blue">blue</option>           
</select>

<select id="truck-white" class="third">
        <option value="size1">truck-white1</option>
        <option value="size2">truck-white2</option>            
</select>
<select id="truck-black" class="third">
        <option value="size1">truck-black1</option>
        <option value="size2">truck-black2</option>            
</select>
<select id="car-red" class="third">
        <option value="1">car-red1</option>
        <option value="2">car-red2</option>
        <option value="3">car-red3</option>           
</select>
<select id="car-green" class="third">
        <option value="1">car-green1</option>
        <option value="2">car-green2</option>
        <option value="3">car-green3</option>           
</select> 
```

**CSS 代码**

```
.second{
    display: none;
}
.third{
    display: none;
} 
```

**查询代码**

```
$(".first").change(function () {
    var str = "";
    str =  $(this).val();
    $('.second').hide();
    $('.third').hide();
    $('#'+str).show();
});
$(".second").change(function () {
    var str = "";
    str =  $(this).val();
    var id = $(this).attr('id');
    $('.third').hide();
    $('#' + id + "-" + str).show();
}) 
```

# ios - 列出可用的输出音频目标 AVAudioSession

> ID：15643516
> 
> 赞同：28
> 
> 时间：2013-03-26T17:21:22.840
> 
> 标签：ios, objective-c, airplay, avaudiosession

我需要列出可供 iOS 应用程序使用的音频输出。我的问题与此类似：[How to list available audio output route on iOS](https://stackoverflow.com/questions/12264697/how-to-list-available-audio-output-route-on-ios)

我试过这段代码：

```
NSError *setCategoryError = nil;
BOOL success = [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback
                                                      error: &setCategoryError];

NSError *activationError = nil;
[[AVAudioSession sharedInstance] setActive: YES error: &activationError];

…
NSLog(@"session.currentRoute.outputs count %d", [[[[AVAudioSession sharedInstance] currentRoute] outputs ] count]);
for (AVAudioSessionPortDescription *portDesc in [[[AVAudioSession sharedInstance] currentRoute] outputs ]) {
    NSLog(@"-----");
    NSLog(@"portDesc UID %@", portDesc.UID);
    NSLog(@"portDesc portName %@", portDesc.portName);
    NSLog(@"portDesc portType %@", portDesc.portType);
    NSLog(@"portDesc channels %@", portDesc.channels);
} 
```

但是，如果我有两个（Airplay 和内置扬声器），我总是只看到一个输出端口（计数为 1）。如果我使用音乐应用程序，我可以看到两个端口并在它们之间切换。在我的应用程序中，我只看到我选择的那个。

还有什么我需要做的吗？

谢谢

**编辑：**

我也试过这段代码：

```
CFDictionaryRef asCFType = nil;
UInt32 dataSize = sizeof(asCFType);
AudioSessionGetProperty(kAudioSessionProperty_AudioRouteDescription, &dataSize, &asCFType);
NSDictionary *audioRoutesDesc = (__bridge NSDictionary *)asCFType;
NSLog(@"audioRoutesDesc %@", audioRoutesDesc); 
```

但字典只列出了一个输出目的地。此外，输入源数组是空的（我有一个 iPhone 4s）

**编辑2：**

我使用 MPVolumeView 得到了一些工作。该组件有一个按钮，可让您选择输出音频路径，就像在音乐应用程序中一样。

如果您愿意，可以使用以下方法隐藏滑块（并且只有按钮）：

```
self.myMPVolumeView.showsVolumeSlider = NO; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-19T03:33:59.363

尝试这样的事情，它比你需要的多，但你可以减少它：

```
 + (NSString *) demonstrateInputSelection
{
    NSError* theError = nil;
    BOOL result = YES;
    NSMutableString *info = [[NSMutableString alloc] init];
    [info appendString: @"     Device Audio Input Hardware\n"];

    NSString *str = nil;
    if( iOSMajorVersion < 7 ){
        str = @"No input device information available";
        NSLog(@"%@",str);
        [info appendFormat:@"%@\n",str];

        return info;
    }

    AVAudioSession* myAudioSession = [AVAudioSession sharedInstance];

    result = [myAudioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:&theError];
    if (!result)
    {
        NSLog(@"setCategory failed");
    }

    result = [myAudioSession setActive:YES error:&theError];
    if (!result)
    {
        NSLog(@"setActive failed");
    }

    // Get the set of available inputs. If there are no audio accessories attached, there will be
    // only one available input -- the built in microphone.
    NSArray* inputs = [myAudioSession availableInputs];
    str = [NSString stringWithFormat:@"\n--- Ports available on %@: %d ---", [UIDevice currentDevice].name , [inputs count]];
    NSLog(@"%@",str);
    [info appendFormat:@"%@\n",str];

    // Locate the Port corresponding to the built-in microphone.
    AVAudioSessionPortDescription* builtInMicPort = nil;
    AVAudioSessionDataSourceDescription* frontDataSource = nil;

    for (AVAudioSessionPortDescription* port in inputs)
    {
        // Print out a description of the data sources for the built-in microphone
        str = @"\n**********";
        NSLog(@"%@",str);
        [info appendFormat:@"%@\n",str];
        str = [NSString stringWithFormat:@"Port :\"%@\": UID:%@", port.portName, port.UID ];
        NSLog(@"%@",str);
        [info appendFormat:@"%@\n",str];
        if( [port.dataSources count] ){
            str = [NSString stringWithFormat:@"Port has %d data sources",(unsigned)[port.dataSources count] ];
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }

        str = [NSString stringWithFormat:@">%@", port.dataSources];
        NSLog(@"%@",str);
   //     [info appendFormat:@"%@\n",str];

        if( [port.portType isEqualToString:AVAudioSessionPortLineIn] ){
            str = @"Line Input found";
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }
        else if( [port.portType isEqualToString:AVAudioSessionPortUSBAudio] ){
            str = @"USB Audio found";
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }
        else if ([port.portType isEqualToString:AVAudioSessionPortBuiltInMic]){
            builtInMicPort = port;
            str = @"Built-in Mic found";
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }
        else if ([port.portType isEqualToString:AVAudioSessionPortHeadsetMic]){
            builtInMicPort = port;
            str = @"Headset Mic found";
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }
        else{
            str = @"Other input source found";
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }

        // loop over the built-in mic's data sources and attempt to locate the front microphone
        for (AVAudioSessionDataSourceDescription* source in port.dataSources)
        {
            str = [NSString stringWithFormat:@"\nName:%@ (%d) \nPolar:%@ \nType:%@ \nPatterns:%@", source.dataSourceName, [source.dataSourceID intValue], source.selectedPolarPattern, port.portType, source.supportedPolarPatterns];
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];

            //           if ([source.orientation isEqual:AVAudioSessionOrientationFront])
            //           {
            //               frontDataSource = source;
            //               break;
            //           }
        } // end data source iteration

    }

    str = @"\n----  Current Selected Ports ----\n";
    NSLog(@"%@",str);
    [info appendFormat:@"%@",str];

    NSArray *currentInputs = myAudioSession.currentRoute.inputs;
//    str = [NSString stringWithFormat:@"\n%d current input ports", [currentInputs count]];
//    NSLog(@"%@",str);
//    [info appendFormat:@"%@\n",str];
    for( AVAudioSessionPortDescription *port in currentInputs ){
        str = [NSString stringWithFormat:@"\nInput Port :\"%@\":", port.portName ];
        NSLog(@"%@",str);
        [info appendFormat:@"%@\n",str];
        if( [port.dataSources count] ){
            str = [NSString stringWithFormat:@"Port has %d data sources",(unsigned)[port.dataSources count] ];
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];

            str = [NSString stringWithFormat:@"Selected data source:%@",  port.selectedDataSource.dataSourceName];
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];

            if( [port.selectedDataSource.supportedPolarPatterns count] > 0 ){
                str = [NSString stringWithFormat:@"Selected polar pattern:%@", port.selectedDataSource.selectedPolarPattern];
                NSLog(@"%@",str);
                [info appendFormat:@"%@\n",str];
            }
        }
    }

    NSArray *currentOutputs = myAudioSession.currentRoute.outputs;
//    str = [NSString stringWithFormat:@"\n%d current output ports", [currentOutputs count]];
//    NSLog(@"%@",str);
//    [info appendFormat:@"%@\n",str];
    for( AVAudioSessionPortDescription *port in currentOutputs ){
        str = [NSString stringWithFormat:@"\nOutput Port :\"%@\":", port.portName ];
        NSLog(@"%@",str);
        [info appendFormat:@"%@\n",str];
        if( [port.dataSources count] ){
            str = [NSString stringWithFormat:@"Port has %d data sources",(unsigned)[port.dataSources count] ];
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];

            str = [NSString stringWithFormat:@"Selected data source:%@",  port.selectedDataSource.dataSourceName];
            NSLog(@"%@",str);
            [info appendFormat:@"%@\n",str];
        }

    }

//    str = [NSString stringWithFormat:@"\Current Route: %@ Source:%@\n", myAudioSession.currentRoute.portName, myAudioSession.preferredInput.selectedDataSource.dataSourceName];
//    NSLog(@"%@",str);
//    [info appendFormat:@"%@\n",str];

    if( myAudioSession.preferredInput.portName ){
        str = [NSString stringWithFormat:@"\nPreferred Port: %@ Source:%@\n", myAudioSession.preferredInput.portName, myAudioSession.preferredInput.selectedDataSource.dataSourceName];
    } else {
        str = @"\nNo Preferred Port set";
    }
    NSLog(@"%@",str);
    [info appendFormat:@"%@\n",str];

    return info;

    if (frontDataSource)
    {
        NSLog(@"Currently selected source is \"%@\" for port \"%@\"", builtInMicPort.selectedDataSource.dataSourceName, builtInMicPort.portName);
        NSLog(@"Attempting to select source \"%@\" on port \"%@\"", frontDataSource, builtInMicPort.portName);

        // Set a preference for the front data source.
        theError = nil;
        result = [builtInMicPort setPreferredDataSource:frontDataSource error:&theError];
        if (!result)
        {
            // an error occurred. Handle it!
            NSLog(@"setPreferredDataSource failed");
        }
    }

    // Make sure the built-in mic is selected for input. This will be a no-op if the built-in mic is
    // already the current input Port.
    theError = nil;
    result = [myAudioSession setPreferredInput:builtInMicPort error:&theError];
    if (!result)
    {
        // an error occurred. Handle it!
        NSLog(@"setPreferredInput failed");
    }

    return info;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-01T08:16:31.307

这将取决于您的 AVAudioSession 类别。

您可以放心地假设在 iPhone 上您至少有一个麦克风作为输入和一个扬声器作为输出。如果您尝试获取蓝牙/AirPlay 输出列表，首先您必须确保您的会话类别正在向您报告它们：

```
do 
{
    try audioSession.setCategory(AVAudioSessionCategoryPlayAndRecord, withOptions: .AllowBluetooth)
    try audioSession.setActive(true)
} 
catch let e
{
    debugPrint("failed to initialize audio session: \(e)")
} 
```

然后，获得可用输出的一种非直观方法是检查`AVAudioSession.availableInputs`蓝牙 HFP 设备通常也会有麦克风。我现在可能假设很多..但这是始终如一地获得可用输出的唯一方法。

更好的方法是使用 MultipleRoute 类别，这将使您更自由地访问`AVAudioSessionPort`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-27T19:29:31.670

```
AVAudioSessionRouteDescription *currentRoute = [[AVAudioSession sharedInstance] currentRoute];
    for (AVAudioSessionPortDescription *output in currentRoute.outputs) {

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-18T01:15:41.007

请查看完整的工作代码。

[音频会话、输出设备句柄和显示在操作表中的完整代码。](https://github.com/sonisuman/AudioPlayer-MultiRoute-Support/tree/master/AudioPlayerMultiRouteSupport/AudioPlayerMultiRouteSupport/AudioPlayerSupport)

给定链接中有以下文件可用。以下是每个文件的简要说明。

**AVAudioSessionHandler.swift ->**

所有必需的方法都可用，这对于根据所选输出设备覆盖路由很有用。

**AudioOutputDeviceHandler.swift->**

所有必需的方法都可用，这对于获取输入设备列表、当前输出设备以及显示所有可用输入设备的操作表很有用。

**SpeakerUIHandler.swift ->**

所有必需的方法都可用，这对于根据所选输出设备更新扬声器 UI 很有用。

**AudioSession.swift ->**

所有方法都可用，这对于创建音频会话和设置音频会话所需的所有参数很有用。

请检查以下代码以获取可用输入设备列表的列表。

```
extension AVAudioSession {

    @objc func ChangeAudioOutput(_ presenterViewController : UIViewController, _ speakerButton: UIButton) {

        let CHECKED_KEY = "checked"
        var deviceAction = UIAlertAction()
        var headphonesExist = false

        if AudioOutputDeviceHandler.sharedInstance.isDeviceListRequired() {

            let optionMenu = UIAlertController(title: nil, message: nil, preferredStyle: .actionSheet)

            for audioPort in self.availableInputs!{

                switch audioPort.portType {

                case AVAudioSession.Port.bluetoothA2DP, AVAudioSession.Port.bluetoothHFP, AVAudioSession.Port.bluetoothLE :

                    overrideBluetooth(audioPort, optionMenu)
                    break

                case AVAudioSession.Port.builtInMic, AVAudioSession.Port.builtInReceiver:

                    deviceAction = overrideBuiltInReceiver(audioPort)
                    break

                case AVAudioSession.Port.headphones, AVAudioSession.Port.headsetMic:

                    headphonesExist = true
                    overrideheadphones(audioPort,optionMenu)
                    break

                case AVAudioSession.Port.carAudio:
                    overrideCarAudio(port: audioPort, optionMenu: optionMenu)
                    break

                default:
                    break
                }
            }

            if !headphonesExist {

                if self.currentRoute.outputs.contains(where: {return $0.portType == AVAudioSession.Port.builtInReceiver}) || self.currentRoute.outputs.contains(where: {return $0.portType == AVAudioSession.Port.builtInMic}) {
                    deviceAction.setValue(true, forKey: CHECKED_KEY)
                }
                optionMenu.addAction(deviceAction)
            }

            overrideSpeaker(optionMenu)

            let cancelAction = UIAlertAction(title: "Cancel", style: .cancel, handler: {
                (alert: UIAlertAction!) -> Void in

            })

            optionMenu.addAction(cancelAction)

            alertViewSetupForIpad(optionMenu, speakerButton)
            presenterViewController.present(optionMenu, animated: false, completion: nil)

            // auto dismiss after 5 seconds
            DispatchQueue.main.asyncAfter(deadline: .now() + 5.0) {
                optionMenu.dismiss(animated: true, completion: nil)
            }

        } else {
            if self.isBuiltInSpeaker {

                if AudioOutputDeviceHandler.sharedInstance.isSpeaker {
                    let port = self.currentRoute.inputs.first!
                    setPortToNone(port)
                    AudioOutputDeviceHandler.sharedInstance.isSpeaker = false
                }
            }
            else if self.isReceiver || self.isBuiltInMic  || self.isHeadphonesConnected {

                setPortToSpeaker()
                AudioOutputDeviceHandler.sharedInstance.isSpeaker = true
            }
        }
    }

    func overrideCarAudio(port: AVAudioSessionPortDescription, optionMenu: UIAlertController) {

        let action = UIAlertAction(title: port.portName, style: .default) { (action) in
            do {
                // set new input
                try self.setPreferredInput(port)
            } catch let error as NSError {
                print("audioSession error change to input: \(port.portName) with error: \(error.localizedDescription)")
            }
        }

        if self.currentRoute.outputs.contains(where: {return $0.portType == port.portType}){
            action.setValue(true, forKey: "checked")
        }

        if let image = UIImage(named: "CarAudio") {
            action.setValue(image, forKey: "image")
        }
        optionMenu.addAction(action)
    }

    func overrideheadphones(_ port: AVAudioSessionPortDescription, _ optionMenu: UIAlertController) {

        let CHECKED_KEY = "checked"
        let HEADPHONES_TITLE = "Headphones"
        let action = UIAlertAction(title: HEADPHONES_TITLE, style: .default) { (action) in
            do {
                // set new input
                try self.setPreferredInput(port)
            } catch let error as NSError {
                print("audioSession error change to input: \(port.portName) with error: \(error.localizedDescription)")
            }
        }

        if self.currentRoute.outputs.contains(where: {return $0.portType == AVAudioSession.Port.headphones}) || self.currentRoute.outputs.contains(where: {return $0.portType == AVAudioSession.Port.headsetMic}) {
            action.setValue(true, forKey: CHECKED_KEY)
        }

        if let image = UIImage(named: "Headphone") {
            action.setValue(image, forKey: "image")
        }

        optionMenu.addAction(action)
    }

    func overrideSpeaker(_ optionMenu: UIAlertController) {

        let SPEAKER_TITLE = "Speaker"
        let CHECKED_KEY = "checked"
        let speakerOutput = UIAlertAction(title: SPEAKER_TITLE, style: .default, handler: {
            [weak self] (alert: UIAlertAction!) -> Void in
            self?.setPortToSpeaker()
        })
        AudioOutputDeviceHandler.sharedInstance.isSpeaker = true

        if self.currentRoute.outputs.contains(where: {return $0.portType == AVAudioSession.Port.builtInSpeaker}){

            speakerOutput.setValue(true, forKey: CHECKED_KEY)
        }

        if let image = UIImage(named: "Speaker") {
            speakerOutput.setValue(image, forKey: "image")
        }
        optionMenu.addAction(speakerOutput)
    }

    func overrideBluetooth(_ port: AVAudioSessionPortDescription, _ optionMenu: UIAlertController) {

        let CHECKED_KEY = "checked"
        let action = UIAlertAction(title: port.portName, style: .default) { (action) in
            do {
                // set new input
                try self.setPreferredInput(port)
            } catch let error as NSError {
                print("audioSession error change to input: \(port.portName) with error: \(error.localizedDescription)")
            }
        }

        if self.currentRoute.outputs.contains(where: {return $0.portType == port.portType}){
            action.setValue(true, forKey: CHECKED_KEY)
        }
        if let image = UIImage(named: "Bluetooth") {
            action.setValue(image, forKey: "image")
        }
        optionMenu.addAction(action)
    }

    func overrideBuiltInReceiver(_ port: AVAudioSessionPortDescription) -> UIAlertAction {

        let IPHONE_TITLE = "iPhone"
        let deviceAction = UIAlertAction(title: IPHONE_TITLE, style: .default) {[weak self] (action) in
            self?.setPortToNone(port)
        }

        if let image = UIImage(named: "Device") {
            deviceAction.setValue(image, forKey: "image")
        }
        return deviceAction
    }

    func setPortToSpeaker() {

        do {
            try self.overrideOutputAudioPort(AVAudioSession.PortOverride.speaker)
        } catch let error as NSError {
            print("audioSession error turning on speaker: \(error.localizedDescription)")
        }
    }

    func setPortToNone(_ port: AVAudioSessionPortDescription) {

        do {
            // remove speaker if needed
            try self.overrideOutputAudioPort(AVAudioSession.PortOverride.none)
            // set new input
            try self.setPreferredInput(port)
        } catch let error as NSError {
            print("audioSession error change to input: \(AVAudioSession.PortOverride.none.rawValue) with error: \(error.localizedDescription)")
        }
    }

    func alertViewSetupForIpad(_ optionMenu: UIAlertController, _ speakerButton: UIButton) {
        optionMenu.modalPresentationStyle = .popover
        if let presenter = optionMenu.popoverPresentationController {
            presenter.sourceView = speakerButton;
            presenter.sourceRect = speakerButton.bounds;
        }
    }
}

extension AVAudioSession {

    static var isHeadphonesConnected: Bool {
        return sharedInstance().isHeadphonesConnected
    }

    static var isBluetoothConnected: Bool {
        return sharedInstance().isBluetoothConnected
    }

    static var isCarAudioConnected: Bool {
        return sharedInstance().isCarAudioConnected
    }

    static var isBuiltInSpeaker: Bool {
        return sharedInstance().isBuiltInSpeaker
    }

    static var isReceiver: Bool {
        return sharedInstance().isReceiver
    }

    static var isBuiltInMic: Bool {
        return sharedInstance().isBuiltInMic
    }

    var isCarAudioConnected: Bool {
        return !currentRoute.outputs.filter { $0.isCarAudio }.isEmpty
    }

    var isHeadphonesConnected: Bool {
        return !currentRoute.outputs.filter { $0.isHeadphones }.isEmpty
    }

    var isBluetoothConnected: Bool {
        return !currentRoute.outputs.filter { $0.isBluetooth }.isEmpty
    }

    var isBuiltInSpeaker: Bool {
        return !currentRoute.outputs.filter { $0.isSpeaker }.isEmpty
    }

    var isReceiver: Bool {
        return !currentRoute.outputs.filter { $0.isReceiver }.isEmpty
    }

    var isBuiltInMic: Bool {
        return !currentRoute.outputs.filter { $0.isBuiltInMic }.isEmpty
    }
}

extension AVAudioSessionPortDescription {

    var isHeadphones: Bool {
        return portType == AVAudioSession.Port.headphones  ||  portType == AVAudioSession.Port.headsetMic
    }

    var isBluetooth: Bool {
        return portType == AVAudioSession.Port.bluetoothHFP || portType == AVAudioSession.Port.bluetoothA2DP || portType == AVAudioSession.Port.bluetoothLE
    }

    var isCarAudio: Bool {
        return portType == AVAudioSession.Port.carAudio
    }

    var isSpeaker: Bool {
        return portType == AVAudioSession.Port.builtInSpeaker
    }

    var isBuiltInMic: Bool {
        return portType == AVAudioSession.Port.builtInMic
    }

    var isReceiver: Bool {
        return portType == AVAudioSession.Port.builtInReceiver
    }
} 
```

# javascript - 使用 AngularJS 在应用程序运行时加载内容时的单元测试

> ID：15643517
> 
> 赞同：13
> 
> 时间：2013-03-26T17:21:29.000
> 
> 标签：javascript, angularjs

我需要我的应用在运行时通过 HTTP 端点运行一些配置。

我写了一个简单的服务来做到这一点：

```
module.factory('config', function ($http, analytics) {
    return {
        load: function () {
            $http.get('/config').then(function (response) {
                analytics.setAccount(response.googleAnalyticsAccount);
            });
        }
    }
}); 
```

接下来，我在我的应用程序模块的运行块中调用此模块：

```
angular.module('app').***.run(function(config) {
        config.load();
    }); 
```

应用程序运行时一切正常，但在我的单元测试中，我收到此错误：“错误：意外请求：GET /config”

我知道这意味着什么，但我不知道当它从运行块发生时如何模拟它。

谢谢你的帮助

**编辑以添加规格**

在每个之前调用它

```
beforeEach(angular.mock.module('app')); 
```

试过这个来模拟 $httpBackend：

```
beforeEach(inject(function($httpBackend) {

    $httpBackend.expectGET('/config').respond(200, {'googleAnalyticsAccount':});

    angular.mock.module('app')

    $httpBackend.flush();
})); 
```

但得到：

```
TypeError: Cannot read property 'stack' of null
        at workFn (/Users/arnaud/workspace/unishared-dredit/test/lib/angular/angular-mocks.js:1756:55)
    TypeError: Cannot read property 'stack' of null
        at workFn (/Users/arnaud/workspace/unishared-dredit/test/lib/angular/angular-mocks.js:1756:55)
    TypeError: Cannot read property 'stack' of null
        at workFn (/Users/arnaud/workspace/unishared-dredit/test/lib/angular/angular-mocks.js:1756:55) 
```

**编辑自更新到 AngularJS 1.0.6**

由于我已经更新到 AngularJS 1.0.6，由 Angular 团队的 Igor 建议，问题已经消失，但现在我有了这个，这听起来更“正常”，但我仍然不知道如何制作有用。

```
Error: Injector already created, can not register a module! 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T16:52:56.610

我为这个错误挣扎了一会儿，但设法想出了一个明智的解决方案。

我想要实现的是成功存根服务并强制响应，在控制器上，可以`$httpBackend`在启动控制器之前使用请求存根或异常。在`app.run()`您加载时，`module`它会初始化对象及其连接的服务等。

我设法使用以下示例对服务进行存根。

```
describe('Testing App Run', function () {
    beforeEach(module('plunker', function ($provide) {
        return $provide.decorator('config', function () {
            return {
                load: function () {
                    return {};
                }
            };
        });
    }));

    var $rootScope;
    beforeEach(inject(function (_$rootScope_) {
        return $rootScope = _$rootScope_;
    }));

    it("defines a value I previously could not test", function () {
        return expect($rootScope.value).toEqual('testing');
    });

}); 
```

我希望这对您`app.run()`将来的测试有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-05T01:58:22.883

我不知道你是否还在寻找这个问题的答案。但这里有一些信息可能会有所帮助。

$injector 是一个应用程序的单例，而不是一个模块。但是， angular.injector 实际上会尝试为每个模块创建一个新的注入器（我想你有一个

```
beforeEach(module("app")); 
```

一开始。

我在使用 Angular、RequireJS、Karma 和 Jasmine 时遇到了同样的问题，我想出了两种解决方法。我在我的测试中为注入器功能创建了一个提供程序作为单独的依赖项。例如 MyInjectorProvider，它提供了一个 $injector 的单例实例。

另一种方法是移动以下语句：

```
beforeEach(module("app"));
beforeEach(inject(function($injector){
    ...
}) 
```

在测试套件描述中。所以这是它以前的样子：

```
define(['services/SignupFormValidator'], function(validator){
    var validator;
    beforeEach(module("app"));
    beforeEach(inject(function($injector){
        validator = $injector.get("SignupFormValidator");
    })

    describe("Signup Validation Tests", function(){
        it("...", function(){...});
    });
}); 
```

应用修复后，它看起来像这样：

```
define(['services/SignupFormValidator'], function(validator){
    var validator;

    describe("Signup Validation Tests", function(){
        beforeEach(module("app"));
        beforeEach(inject(function($injector){
            validator = $injector.get("SignupFormValidator");
        });

        it("...", function(){...});
    });
}); 
```

这两种解决方案都适用于我的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:10:34.103

[您应该使用ngMock.$httpBackend](http://docs.angularjs.org/api/ngMock.%24httpBackend)模拟每个 HTTP 请求。另外，[这里有一个指南](http://docs.angularjs.org/guide/dev_guide.unit-testing)。

* * *

**更新**

你不需要这个`angular.mock.module`东西，只需要注入你的应用程序模块。像这样的东西：

```
var httpBackend;

beforeEach(module('app'));
beforeEach(inject(function($httpBackend) {
  httpBackend = $httpBackend;
  $httpBackend.expectGET('/config').respond(200, {'googleAnalyticsAccount': 'something'});
})); 
```

在您的测试中，当您需要模拟的 http 来回答时，您将调用`httpBackend.flush()`. 这就是我们引用它的原因，因此您不需要在每个测试中都注入它。

请注意，您需要加载 angular-mock.js 才能使其工作。

# c# - 长时间运行的文件操作和执行超时

> ID：15643524
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:22:07.207
> 
> 标签：c#, asp.net, asynchronous, webforms, timeout

我被要求为我工作的组织编写一个文档管理系统，它提供了与不同记录相关的一系列九个不同的工作流程。工作流程包括将文档添加到“文件”或记录，并根据业务规则将这些文档的子集发布到公共网站。

文档几乎无一例外都是 PDF 格式，并且在任何时候，对于任何一条记录，处理的文件通常少于 20 个。

将其构建为 Web 应用程序的一个主要原因是将文件保存在我们的数据中心和高速交换机上，而不是尝试通过远程站点的可能较慢的连接速度在位置之间进行上下复制。

该系统运行完美，直到大量文档（114 个 PDF 文档，总大小为 329MB）在 95% 左右超时。

代码是（IncomingDocuments 的类型是 List<FileInfo>）-

```
List<string> filesSuccessfullyAdded = new List<string>();

foreach (FileInfo incomingFile in IncomingDocuments)
{
    FileOperations.AddDocument(incomingFile, false, ApplicationCode, (targetDirectoryPath.EndsWith(@"\") ? targetDirectoryPath : targetDirectoryPath + @"\"));
    FileInfo copiedDocument = new FileInfo(Path.Combine(targetDirectoryPath, incomingFile.Name));
    if (copiedDocument.Exists && copiedDocument.Length == incomingFile.Length && copiedDocument.LastWriteTime == incomingFile.LastWriteTime)
    {
        filesSuccessfullyAdded.Add(copiedDocument.Name);
    }
}

if (filesSuccessfullyAdded.Any())
{
    SetupConfirmationLiteral.Text += "<p class='info'>The following files have been successfully added to the application file-</p>";

    XDocument successfullyAddedList = new XDocument(
    new XElement("ul", new XAttribute("class", "documentList")));

    foreach (string successfulFile in filesSuccessfullyAdded)
    {
        successfullyAddedList.Root.Add(new XElement("li", successfulFile));
    }

    SetupConfirmationLiteral.Text += successfullyAddedList.ToString();
}

var notSuccessfullyAdded = from FileInfo incomingDocument in IncomingDocuments
                            where !filesSuccessfullyAdded.Contains(incomingDocument.Name)
                            orderby incomingDocument.Name ascending
                            select incomingDocument.Name;

if (notSuccessfullyAdded.Any())
{
    SetupConfirmationLiteral.Text += "<p class='alert'>The following files have <strong>not</strong> been successfully added to the application file-</p>";

    XDocument notAddedList = new XDocument(
    new XElement("ul", new XAttribute("class", "documentList")));

    foreach (string notAdded in notSuccessfullyAdded)
    {
        notAddedList.Root.Add(new XElement("li", notAdded));
    }

    SetupConfirmationLiteral.Text += notAddedList.ToString();

    SetupConfirmationLiteral.Text += "<p>A file of the same name may already exist in the target location.</p>";
} 
```

使用实用方法-

```
public static void AddDocument(FileInfo sourceFile, bool appendName, string applicationCode, string targetPath)
{
    try
    {
        DirectoryInfo targetDirectory = new DirectoryInfo(targetPath);
        if (targetDirectory.Exists)
        {
            string targetFileName = (appendName ? sourceFile.Name.Insert(sourceFile.Name.IndexOf(sourceFile.Extension, StringComparison.Ordinal), " UPDATED") : sourceFile.Name);
            if (targetDirectory.GetFiles(targetFileName).Any())
            {
                //Do not throw an exception if the file already exists. Silently return. If the file exists and matches both last modified and size it won't be reported, and can be archived as normal,
                //otherwise it should be reported to user in the calling method.
                return;
            }
            string targetFileUnc = Path.Combine(targetPath, targetFileName);
            sourceFile.CopyTo(targetFileUnc, overwrite: false);
            Logging.FileLogEntry(username: (HttpContext.Current.User.Identity.IsAuthenticated ? HttpContext.Current.User.Identity.Name : "Unknown User"), eventType: LogEventType.AddedDocument,
                applicationCode: applicationCode, document: sourceFile.Name, uncPath: targetFileUnc);
        }
        else
        {
            throw new PdmsException("Target directory does not exist");
        }
    }
    catch (UnauthorizedAccessException ex)
    {
        throw new PdmsException("Access was denied to the target directory. Contact the Service Desk.", ex);
    }
    catch (PathTooLongException)
    {
        throw new PdmsException(string.Format("Cannot add document {0} to the Site File directory for Application {1} - the combined path is too long. Use the Add Documents workflow to re-add documents to this Site File after renaming {0} to a shorter name.", sourceFile.Name, applicationCode ));
    }
    catch (FileNotFoundException ex)
    {
        throw new PdmsException("The incoming file was not found. It may have already been added to the application file.", ex);
    }
    catch (DirectoryNotFoundException ex)
    {
        throw new PdmsException("The source or the target directory were not found. The document(s) may have already been added to the application file.", ex);
    }
    catch (IOException ex)
    {
        throw new PdmsException("Error adding files - file(s) may be locked or there may be server or network problem preventing the copy. Contact the Service Desk.", ex);
    }
} 
```

进行实际的复制和审核。PdmsException 只是我们用来向用户显示有用的错误消息的特定异常类，允许他们尽可能解决自己的问题，或者至少给出一个可以理解的失败原因。

我知道我可以简单地将 ExecutionTimeout 属性（[http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.executiontimeout.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.executiontimeout.aspx)）增加到默认的 110 秒以上 - 最多说 300 秒- 这可能意味着在这种情况下超时停止发生，但是如果用户试图添加或发布数千个文档怎么办。这个解决方案不能很好地扩展，只是推迟而不是解决问题。

我正在将 .NET 4 与 Visual Studio 2010 一起使用，据我所知，如果我们想要[打包](https://nuget.org/packages/AsyncBridge)使用 ajax 记录和更新进度。为了使用 Microsoft 提供的异步目标包，我无法访问 Visual Studio 2012 甚至比 XP 更新的 Windows。

鉴于这些限制，有没有办法打包/批量处理这些文档以避免超时并（理想情况下）在添加每个批次时向用户提供反馈？如果 F# 易于实现，我愿意探索它。或者，我应该为 Visual Studio 2012 辩护吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T17:30:09.997

无需迁移到完全不同的语言或升级 IDE 工具，这不是当前的问题。手头的问题是，一个从根本上为快速响应而构建的系统（一个 Web 应用程序）正被用于一个长期运行的过程。

在 Web 应用程序中，任何需要花费大量时间的事情都应该异步完成。在 HTTP 的请求/响应模型中，最好（出于多种原因）快速响应客户端发出的请求。

对于长时间运行的进程，我所说的“异步”并不是指使用 AJAX，因为这仍然是一个请求/响应，就像任何其他的一样。

在这种情况下，我所说的“异步”是指您希望有一个单独的服务器端进程来处理 CPU 密集型任务，而 Web 应用程序只是将任务排队等待运行并检查任务的状态人们寻找它。然后它可以在完成后报告任务的结果。

因此，架构的基本概述将是这样的：

*   Web 应用程序中的用户单击按钮以“启动任务”。
*   Web 应用程序将一条记录插入到数据库表中，指示任务已排队（可能带有排队者的用户 ID、时间戳，以及您需要知道的任何其他信息）。
*   一个单独的计划应用程序（很可能是控制台应用程序或 Windows 服务）一直在运行。（无论是在始终运行的 Windows 服务中使用计时器，还是作为控制台应用程序计划反复运行，例如每隔几分钟运行一次。）此应用程序检查数据库表中是否有新的排队任务。
*   当应用程序看到一个任务时，它会在数据库中将其标记为“已启动”（因此应用程序的后续运行不会尝试并行运行相同的任务）并开始运行它。
*   Web 应用程序可以在数据库表中看到任务的状态并将其显示给请求它的用户，因此用户可以看到它仍在运行。
*   任务完成后，更新数据库表中的任务记录，并将结果存储在某处。（取决于结果是什么。数据？在数据库中。某种报告文件？另存为文件。这完全取决于你。）
*   Web 应用程序可以看到任务的完成状态和记录的任何其他信息，用户可以请求查看任务的输出。

这里要记住的主要是将职责分解为**两个应用程序**。Web 应用程序的目的是提供用户界面。Web 应用程序不适合长时间运行的后台任务。因此，该责任被转移到更适合该目的的单独应用程序中。这两个应用程序通过共享数据库进行协调。

因此，正如您在问题末尾所暗示的那样，您可以（并且应该）简单地将任务与应用程序“排队”，并以用户认为合适的各种方式管理该队列。

# c++ - 持有对同一对象的 const 引用的对象。退出时会发生什么？

> ID：15643528
> 
> 赞同：1
> 
> 时间：2013-03-26T17:22:15.877
> 
> 标签：c++, boost

我认为这是一个简单的问题，但我一直在盯着一些复杂的遗留代码，我再也看不到森林的树木了。该应用程序将运行数天，然后在退出时失败（当然对于较短的工作它不会失败！）我怀疑是 SEGV。

我用下面的一些伪代码简化了这个案例（希望我做对了）。

用人类的话来说：我有一个类 XYZ，它有很多东西，包括一个指向简单类 ABC 的指针向量（假设它很简单）。这些指针在 XYZ 的析构函数中被删除；这就是析构函数所做的一切。

然后我有一个简单的基类 TheBase，它只有两个简单的虚拟方法，没有析构函数。

最后，我有三个类，Tom 和 Dick（从 TheBase 派生）和 Harry（不是从 TheBase 派生的）。这三个类都是从对 XYZ 对象的 const 引用构造的；所以他们有一个对 XYZ 对象的 const 引用。它们也没有析构函数。

总的来说， boost::shared_ptr 是为 Tom、Dick 和 Harry 对象中的每一个定义的。然后创建一个 XYZ 对象。接下来，XYZ 对象作为对 Tom、Dick 和 Harry 对象的 const 引用传递。在那之后，发生了一大堆事情并且主要退出。

那么当所有这些事情都超出范围时会发生什么？特别是 XYZ 对象？这会被正确处理吗？似乎某些内容将被多次删除。

```
// A simple class (let's assume it is!)
class ABC
{
  // unimportant stuff.
}

// class XYZ has an array of ABC objects. All the destructor does is delete     those objects.
class XZY 
{
  public:
    XYZ(vector<string> v1,
        vector<string> v2,
        vector<string> v3 );
  virtual ~XYZ(){
          for ( i = 0; i < n, i++ ){
              delete my_abcs[i];
          }
  } 
private:
    vector <ABC*> my_abcs
  // lots of other methods & members
}

// Simple base class with only 2 simple virtual methods
class TheBase
{   
  public:
        virtual void minor_func1();
        virtual void minor_func2();
}

// A class derived from base class. Constructs with a const reference to an XYZ class.
class Tom:TheBase
{
    public:
        Tom( const XYZ & xyz )

    private:
        const XYZ & my_xyz; 
  // lots of other methods & members
}
Tom::Tom(const XYZ & xyz):my_xyz(xyz){
  ...
}

// Another class derived from base class. Constructs with a const reference to an XYZ class.
class Dick:TheBase
{
    public:
        Dick( const XYZ & xyz )

    private:
        const XYZ & my_xyz; 
    // lots of other methods & members
}
Dick::Dick(const XYZ & xyz):my_xyz(xyz){
...
}

// A class NOT derived from base class but still constructs with a const reference to an XYZ class.
class Harry:TheBase
{
  public:
        Harry( const XYZ & xyz )

    private:
        const XYZ & my_xyz; 
    // lots of other methods & members
}
Harry::Harry(const XYZ & xyz):my_xyz(xyz){
...
}

main (...){
  ...

  boost::shared_ptr <Tom> a_tom;
  boost::shared_ptr <Dick> a_dick;
  boost::shared_ptr <Harry> a_harry;
  ...

  XYZ a_xyz( ... );

  a_tom.reset( new Tom( a_xyz) );
  a_dick.reset( new Dick( a_xyz) );
  a_harry.reset( new harry( a_xyz) );

  ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:32:11.143

`shared_ptr`当最后一个`shared_ptr`指向它们的对象被破坏时，由 a 管理的对象将被破坏。局部变量在超出范围时被破坏，其创建顺序与它们的创建顺序相反。在你的情况下，如果没有`shared_ptr`静态生命周期（或伪静态生命周期；即在一个动态分配的对象中，直到离开 main 之后才会被破坏，如果有的话），那么`a_xyz` 将被破坏，然后指向的三个对象`shared_ptr`. _ *如果*这些对象没有 `a_xyz`在它们的析构函数中使用对的引用（并且`shared_ptr`没有被复制到它们将超过 main 的地方），那么应该没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:59:44.420

> 我有一个类 XYZ，它有很多东西，包括一个指向简单类 ABC 的指针向量（假设它很简单）。这些指针在 XYZ 的析构函数中被删除；这就是析构函数所做的一切。

顺便说一句，这个问题的答案是`std::vector<std::unique_ptr<ABC>>`，它封装了在类型中拥有相关指针的事实`std::vector`，并且无需您手动销毁它们。它还会阻止意外复制：如果您曾经实现过非平凡的析构函数，则需要实现或阻止复制构造和复制分配（规则 3）。

使用 a `std::vector<std::unique_ptr<ABC>>`，它只能被移动，所以移动赋值和移动构造是不阻塞的，而复制构造和复制赋值是阻塞的。

`std::unique_ptr<T>`有少量的开销。

`.get()`唯一的成本是当您需要访问底层时的一堆调用`T*`，这基本上是零运行时成本。

> 总的来说， boost::shared_ptr 是为 Tom、Dick 和 Harry 对象中的每一个定义的。然后创建一个 XYZ 对象。接下来，XYZ 对象作为对 Tom、Dick 和 Harry 对象的 const 引用传递。在那之后，发生了一大堆事情并且主要退出。

C++ 中相同范围内的对象按照声明它们的相反顺序被销毁。所以汤姆、迪克和哈利的寿命将比 XYZ 对象更长。

> 最后我有三个类，Tom 和 Dick（从 TheBase 派生）和 Harry（不是从 TheBase 派生的）。这三个类都是从对 XYZ 对象的 const 引用构造的。所以他们有一个对 XYZ 对象的 const 引用。它们也没有析构函数。

引用（在此上下文中）对所引用事物的生命周期没有影响。引用不是智能指针，它们是不安全且未经检查的别名。通常，当您创建对某事物的引用时，您的工作是确保该对象的持续时间比对该对象的引用长。

如果 after`XYZ`超出任何范围`Tom`，`Dick`或`Harry`访问它们的引用- `XYZ`，那么您调用了未定义的行为。如果你没有，你就没有。

即使你没有，依赖它也可能是一个坏习惯，因为你的代码将非常脆弱。

（要清楚：当我说“在此上下文中”时，我的意思是。有一个上下文，其中引用生命周期会改变相关对象的生命周期：当引用*直接*从临时（匿名）对象构造时，该匿名对象的生命周期将延长到引用的生命周期。但是请注意，以这种方式间接构造的引用不具有此属性 - 因此`A& a = A();`将延长匿名对象的生命周期`A`，而`B& b = a;`不会，并且`A& get_A() { return A(); }; A& a = get_A();`确实不起作用，但`A get_A() { return A(); }; A& a = get_A();`确实会延长寿命（最后一个不确定）。）

# ruby-on-rails - 从一个 DB 列渲染 JSON 字符串数组

> ID：15643532
> 
> 赞同：0
> 
> 时间：2013-03-26T17:22:27.050
> 
> 标签：ruby-on-rails, json, controller, rendering

我在这里研究了其他 JSON 渲染问题，但我没有发现任何希望以数组结尾的问题。我发现了很多关于渲染为哈希的帖子，但它们没有帮助。

最近的尝试包括：

```
def create
  params[:_json].each do |ip|
    IpAddress.create(ip: ip)
  end

  ips = IpAddress.pluck(:ip)

  ips.each do |ips|
    ips.to_s
  end

  render json: ips
end 
```

也

```
def create
  params[:_json].each do |ip|
    IpAddress.create(ip: ip)
  end
  render json: IpAddress.all, methods: [:ip]     
end 
```

这两种尝试都返回整个数据库行数组。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:33:56.527

抱歉，我的 def create 操作没有问题。它正在正确渲染，但问题是我的测试失败了，因为在创建之后，它正在点击索引操作以查看数组是否正确保存。所以，我补充说

```
 def index
    render json: IpAddress.pluck(:ip)
  end 
```

我的测试通过了。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:29:12.617

这通常应该有效。只需在创建数据库条目时构建数组，然后返回它。

```
def create
  ips = params[:_json].inject([]) do |a, ip|
    a << IpAddress.create!(ip: ip).ip
    a
  end
  render json: {ips: ips}
end 
```

# mysql - MYSQL周五分组报告

> ID：15643538
> 
> 赞同：1
> 
> 时间：2013-03-26T17:22:45.400
> 
> 标签：mysql

我们需要在周五至周五的基础上运行全年的报告。我没有看到`week()`为此方便的功能。

假设我们有一个表`Summary`，有两列 -`count`和`creation_date`。我需要根据`creation_date`从周五到周五的时间汇总计数。这需要运行几年。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:14:04.487

这是一个查询告诉你从今天开始的上一个星期五和下一个星期四

```
SELECT DATE(week_beg),DATE(week_end) FROM
(SELECT daywk_beg + INTERVAL 0 second week_beg,
daywk_beg + INTERVAL 604799 second week_end
FROM (SELECT (DATE(NOW()) - INTERVAL daysbacktoday DAY) daywk_beg
FROM (SELECT SUBSTR('2345601',wkndx,1) daysbacktoday
FROM (SELECT DAYOFWEEK(dt) wkndx FROM (SELECT DATE(NOW()) dt)
AAAAA) AAAA) AAA) AA) A; 
```

这是今天的结果

```
mysql> SELECT DATE(week_beg),DATE(week_end) FROM
    -> (SELECT daywk_beg + INTERVAL 0 second week_beg,
    -> daywk_beg + INTERVAL 604799 second week_end
    -> FROM (SELECT (DATE(NOW()) - INTERVAL daysbacktoday DAY) daywk_beg
    -> FROM (SELECT SUBSTR('2345601',wkndx,1) daysbacktoday
    -> FROM (SELECT DAYOFWEEK(dt) wkndx FROM (SELECT DATE(NOW()) dt)
    -> AAAAA) AAAA) AAA) AA) A;
+----------------+----------------+
| DATE(week_beg) | DATE(week_end) |
+----------------+----------------+
| 2013-03-22     | 2013-03-28     |
+----------------+----------------+
1 row in set (0.00 sec) 
```

[我在 DBA StackExchange 中写了一个这样的查询](https://dba.stackexchange.com/questions/6045/how-can-i-improve-my-sql-statement-with-weekly-results-with-week-starting-on-thu/6050#6050)

这是一个示例表

```
CREATE TABLE summary
(
    id int not null auto_increment,
    ...
    `count` int not null default 0,
    creation_date date,
    primary key (id)
); 
```

要让您的查询根据星期五计算结果，您需要这个

```
SELECT SUM(`count`) count_sum,friday FROM
(SELECT `count`,DATE(week_beg) friday
(SELECT daywk_beg + INTERVAL 0 second week_beg,
daywk_beg + INTERVAL 604799 second week_end,`count`
FROM (SELECT `count`,(DATE(NOW()) - INTERVAL daysbacktoday DAY) daywk_beg
FROM (SELECT `count`,SUBSTR('2345601',wkndx,1) daysbacktoday
FROM (SELECT `count`,DAYOFWEEK(dt) wkndx FROM
(SELECT `count`,creation_date FROM dt)
AAAAA) AAAA) AAA) AA) A) fri
GROUP BY friday; 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:24:31.667

```
Select 
count, creation_date,
from
(
    SELECT 
    count, creation_date
    DATEDIFF(week, '2013-03-30', date) AS WeekNumber
    FROM Summary
)
GROUP BY
count,
creation_date,
WeekNumber 
```

您将输入您的开始日期来代替`2013-03-30`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:34:01.493

你可以分组

```
YEARWEEK(`date` - INTERVAL 5 DAY) 
```

或者你可以用这个来计算你的`start_week_date`和`end_week_date`：

```
SELECT
  `date`,
  `date` - INTERVAL (DAYOFWEEK(`date`) + 1) % 7 DAY start_week_date,
  `date` + INTERVAL 6 - (DAYOFWEEK(`date`) + 1) % 7 DAY end_week_date
FROM
  dates 
```

请看这个[小提琴](http://sqlfiddle.com/#!2/66686/1)。

所以你的查询可能是这样的：

```
SELECT
  creation_date - INTERVAL (DAYOFWEEK(creation_date) + 1) % 7 DAY start_week_date,
  SUM(count)  --- or your aggregate function
FROM
  Summary
GROUP BY
  creation_date - INTERVAL (DAYOFWEEK(creation_date) + 1) % 7 DAY start_week_date 
```

# java - 与行使用相同格式的 ListActivity 标头

> ID：15643539
> 
> 赞同：0
> 
> 时间：2013-03-26T17:22:54.423
> 
> 标签：java, android

我想在我的 ListActivity 的列表视图上方添加一个标题栏。滚动列表视图时，标题栏不应滚动，因此我没有使用 addHeaderView() 而是在 XML 中定义的自定义视图。它看起来像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
        android:paddingLeft="8dp"
        android:paddingRight="8dp">       
    <LinearLayout
            android:id="@+id/top_control_bar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:orientation="vertical"> 
        <RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"             
                android:orientation="vertical">
                <TextView android:id="@+id/left_text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:text="Some text" />
            <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_alignParentRight="true"
                android:src="@drawable/ic_launcher" />
        </RelativeLayout>           
    </LinearLayout>
    <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
        android:layout_height="match_parent"
            android:layout_weight="1" 
                android:layout_below="@id/top_control_bar"          
        android:drawSelectorOnTop="false" />
</RelativeLayout> 
```

如您所见，标题栏包含一个文本视图和一个图像视图。我现在的问题是：我希望这个标题栏使用与列表视图中的单行完全相同的大小（标题栏高度和字体大小）。我不想硬编码任何尺寸信息。相反，标题栏应该总是和我的列表视图中的单行一样大，Android 还应该从我的标题栏中的不同大小的 ic_launcher 集合中为我的标题栏中的图像视图选择一个适当大小的可绘制的“ic_launcher”。 *.apk 但我认为这是自动完成的。我只需要找到一种方法来告诉标题栏始终与列表视图中的单行一样大，并且标题栏文本视图的字体大小也应该与列表视图行的字体大小相匹配。

谁能告诉我如何实现这一目标？非常感谢！

# c++ - 将基类对象的所有属性分配给派生对象

> ID：15643540
> 
> 赞同：0
> 
> 时间：2013-03-26T17:22:56.703
> 
> 标签：c++

我从基类 B 派生了类 D，如下所示：

```
class D : public B
{
//staff or nothing
} 
```

我想以`B* b`声明的方式处理接收到的指针， 并 使用所有相同的属性值进行`D* d`初始化。如果我无权更改实施，有什么可能或最好的方法？就像是`*d``*b``B`

```
// I have pointer to B object, B* b received as a result of some function
class D : public B
{
//staff or nothing
}
D *d; //declaration 
// I want to initialize d, something like d=b (if that would be legal)
// or d = static_cast <D*>(b); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:03:47.623

## 基本答案

**符号：**

```
B b;
B* pb = &b;
D* pd; 
```

如果您有指针`pb`并且想要一个指针`pd`，其中`*pd`的数据成员（值）与 相同`*pb`，那么您必须将数据从某个（内存）位置复制或移动`*pb`到某个（内存）位置并让`pd`指向该位置。

C++ 不允许在不导致未定义行为的情况下从`&b`隐式`pd`( `pd = &b`) 或显式 ( )转换。`pd = static_cast<D*>(&b)`未定义的行为是最糟糕的，因为您无法保证接下来会发生什么（崩溃，数据损坏，heisenbugs，..）。

* * *

## 关于`static_cast`ptr 转换

让我们从标准中引入一些命名以使事情更清楚：

```
B* pb = &d; 
```

那么*静态类型*是`*pb`，`B`而*动态*`*pb`类型是`D`。静态类型基本上是编译器看到的，而动态类型是运行时实际存在的。

以下转换很好：

```
D d;
pb = &d;  // `pb` points to `B`-type subobject of `d`
pd = static_cast<D*>(pb);  // reverts the cast above to get the original `&d` 
```

最后一行很好，以防`*pb`具有动态类型`D`（或 的派生类型`D`）。否则，未定义的行为。这就是为什么有`dynamic_cast`：

```
pd = dynamic_cast<D*>(pb); 
```

同样，如果`*pb`是动态类型`D`，一切都很好（同上）。但如果`*pb`不是动态类型`D`，则`dynamic_cast`返回空指针值 ( `nullptr`)。这样，没有未定义的行为，您可以检查是否`pd`现在`nullptr`。As`dynamic_cast`比 慢很多`static_cast`，如果你*真的知道*转换会成功，你可以`static_cast`改用（[参见 Qt 示例](http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#eventFilter)）。

* * *

## 将数据复制或移动到新对象

现在，如果您想要一个指针`pd`，使所有数据成员（“属性”）与 的数据成员相同，该`&b`怎么办？您必须创建一个类型的对象`D`并将数据复制或移动`&b`到这个新对象。这是 Subaru Tashiro 在方法 2 中提出的，比如：

```
class D : public B
{
public:
    // copy:
    D(B const& b) : B(b) {} // if you cannot use B-copy-ctor than have to provide own definition
    // move:
    D(B&& b) : B(b) {} // same issue as above
};

B b;
B* pb = &b;

D d1(*pb);  // this is how you can copy
D d2( std::move(*pb) );  // this is how you can move

D* pd = &d1; // or = &d2; 
```

请注意，复制和移动行都创建了一个新的`D`类型对象来存储复制/移动的数据。您不需要同时提供复制和移动支持。

还有其他可能性，例如包装`B`-type 对象，但它们与派生类的方法不同。

* * *

## 一些说明为什么转换`pd = &b`不好

*   首先，田代昴是对的，在`D`子类中引入的数据成员是有问题的。如果`D`该类添加了任何数据成员，C++ / 编译器应该如何知道它们应该如何初始化？它不能只是让它们未初始化，因为这很容易出错（考虑类不变量）。
*   内存问题。示例：想象一个`D`-type 对象在内存中看起来像这样：

    ```
    |DD[BBBB]DDDDDDDD|
        ^start of B sub-object
     ^start of D object 
    ```

    现在，当你这样做时`pd = static_cast<D*>(pb)`，包含的地址`pb`将被解释为*B 子对象的开始，*并减少 2 个字节以获得*D 对象的开始*。

    *   由于您只为对象分配了空间，因此只能保证您可以从to`b`访问内存（不考虑内部对齐）。之前或之后访问内存可能会导致错误，例如 CPU 抱怨您访问尚未映射到物理内存的虚拟内存。更可能的是前后还有其他有意义的数据。通过写入类中引入的任何数据成员，您可以破坏其他数据（不确定其他数据成员）。`(char*)pb``(char*)pb + sizeof(b)``b``(char*)pb``(char*)pb + sizeof(b)``(char*)pb``(char*)pb + sizeof(b)``static_cast<D*>(pb)``D`
    *   通过 访问任何成员时，您可能会遇到对齐问题`*pd`，例如，如果您的编译器假定所有 D 类型对象都以 2 字节边界开始，而所有 B 类型对象都以 4 字节边界开始（棘手且病态，但可能存在问题）。
*   如果 中有一个 vtable `D`，它不会被指针转换初始化。因此，调用类中`static_cast<D*>(pb)`引入的任何虚方法`D`都不是一个好主意。
*   RTTI 也可能会给您带来问题，因为它可以通过将 RTT 信息与对象一起存储来实现。RTTI 可用于异常和`dynamic_casts`，因此受影响的不仅`typeid`是它。
*   C++ 标准说，这种转换会导致未定义的行为。也就是说，即使您可以将 的`B`子对象`*pd`与某些编译器/C++ 实现一起使用而没有问题，也不能保证它适用于所有编译器/版本。以上几点是我想到的一些问题，但我绝不是专家。本质上，当您执行此转换并使用结果的*子对象**时，无法预测/无法保证会发生什么`B``pd`*。

最后的评论：

*   `static_cast`参考：5.2.9/2，最后两句
*   我的回答与 Subaru Tashiro 的不同之处在于我会“谴责”第一种方法。你可以把它写下来，它是一个格式良好的程序（这意味着它应该编译），但你无法预测会发生什么，它是一个 hack（可能有效，但不要在其他地方重复，糟糕的风格，...... ）。如果你真的想这样做，我宁愿建议使用 a`reinterpret_cast`和很多评论来表明你知道你在做什么，并且这是一个 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:34:29.630

**方法一：** 可以使用`static_cast`基类来初始化派生类，但这会导致派生对象不完整。

[资源](http://www.cplusplus.com/doc/tutorial/typecasting/)

> static_cast 可以执行指向相关类的指针之间的转换，不仅可以从派生类到其基类，还可以从基类到其派生类。这确保了如果转换了正确的对象，至少类是兼容的，但是在运行时不执行安全检查来检查正在转换的对象是否实际上是目标类型的完整对象。因此，由程序员来确保转换是安全的。

看这个例子：

这里我们编写了一个基类，它有一个名为“bInt”的公共变量

```
class B {
public:
  int bInt;
}; 
```

在这里，我们创建了一个子类，它也有自己的变量“dInt”

```
class D: public B {
public:
  int dInt;
}; 
```

这里我们有一个基类的新实例。我们初始化基础对象的变量。

```
B * baseObj = new B;
baseObj->bInt = 1; 
```

这里我们使用基类来声明和初始化派生类`static_cast`。注意，此时，`*derivedObj`是不完整的。具体来说，`derivedObj->dInt`具有未定义的值。

```
D * derivedObj = static_cast<D*>(baseObj); 
```

因为 D 是从 B 派生的，所以它也有`bInt`变量。并且因为我们曾经`static_cast`初始化`*derivedObj`，所以它的`bInt`值也和`*baseObj`'s一样`bInt`，所以它们是相等的。

```
if(baseObj->bInt == derivedObj->bInt)
{
  display("it's equal");
} 
```

但是因为基类没有`dInt`变量，这个变量将保持未初始化并且这个过程的结果是未定义的。

```
int myNum = derivedObj->dInt; 
```

如果您打算使用 static_cast，请务必初始化派生类的成员。无论如何，这样做是一个好习惯。

使用 static_cast 时，不需要知道 B 的所有成员。D 自动拥有 B 的所有成员值。但是您尝试做的事情很危险，因为您正在创建一个不完整的对象。

**方法2：**如果你真的需要子类B，那么将D的构造函数编写为一个接受B *并通过复制初始化它的B：

```
D(const B &pass) : B(pass) 
```

因此，当您要声明和初始化 D 类型的对象时，您就是这样做的。

```
B *baseObj = new B;
D *derivedObj = new D(*baseObj); 
```

**所以总而言之，你有两个选择：**

1.  子类 B 并使用 static_cast 初始化 D。确保初始化 D 的成员变量。
2.  子类 B 并编写一个构造函数，该构造函数接受 B 并将其传递给 B 的复制构造函数。

这两种方法具有相同的结果，不同之处在于程序如何在幕后执行此操作。

不幸的是，在您的示例中，使用`d=b`是“非法的”（？），因为您试图将基类分配给派生类。您只能以其他方式使用赋值运算符，例如已初始化的`b=d`给定。`d`

您也可以编写自己的赋值运算符来执行此操作，但我个人不建议这样做。

# delphi - TdwsUnit 性能

> ID：15643543
> 
> 赞同：4
> 
> 时间：2013-03-26T17:23:08.410
> 
> 标签：delphi, dwscript

`dwsMathComplexFunctions.pas`在 TdwsUnit 中注册函数会产生与在单元中注册的常规魔术函数相同的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:35:34.660

通常不会，因为 TdwsUnit 函数和方法的 OnEval 事件得到了完全舒适和安全的处理：

*   调用参数被评估并压入堆栈
*   可以访问 TProgramInfo/IInfo 上下文，因此您可以轻松地按名称访问变量，并且可以反过来轻松地调用脚本中的其他所有内容
*   您的执行受到异常框架的保护

相比之下，魔术函数什么也得不到：它们只是得到参数表达式的列表，仅此而已。没有堆栈上下文，无法轻松访问其他任何内容，因此由您来评估参数并处理所有内容。这使它们更适合需要快速完成的简单任务。

请注意，除了 OnEval 之外，TdwsUnit 中的一些函数现在正在逐步获取 OnFastEval 事件，这是声明魔术函数的另一种方式。

# c# - 为什么 DllImport 不适用于“__Internal”？

> ID：15643549
> 
> 赞同：2
> 
> 时间：2013-03-26T17:23:53.963
> 
> 标签：c#, c++, .net, mono

`int MyFunc()`我有适用于 Linux 和 Windows 的导出方法的 C++ 共享库。

从 C# 中，我`MyFunc`使用以下签名调用。

```
[DllImport(@"__Internal", CharSet = CharSet.Ansi, EntryPoint = "MyFunc")]
static extern unsafe int MyFunc();
// Later I'm using :
MyFunc(); 
```

此代码在 Windows 上运行良好，但在 linux 内部这会引发异常`EntryPointNotFound`。

我已经用 -rdynamic 选项编译了我的 C++ 库，我可以看到 MyFunc 被导出为带有 nm 的 D 标志，但这也对我没有帮助。

如果我简单地更改`DllImport(@"__Internal"`为`DllImport(@"mys.so"`then 将在 linux 上正常工作，但我必须`DllImport(@"mys.dll"`在 Windows 中使用这会破坏代码交叉兼容功能。
所以我想避免这种情况。

我看不出有任何错误说明为什么`__Internal`不能在 Linux 上运行。
请注意，我使用的是单声道。

知道为什么这在 Linux 上不起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:05:03.640

您可以在 windows 和 linux 上使用它：

```
[DllImport ("mys")] 
```

将根据平台添加适当的扩展（这适用于 .NET 和单声道）。

# java - 如何使用 elasticsearch 维基百科河？

> ID：15643550
> 
> 赞同：3
> 
> 时间：2013-03-26T17:23:56.673
> 
> 标签：java, elasticsearch

这可能是一个愚蠢的问题，但我找不到任何有关此的信息。我找到了 github，但是在我使用该命令后什么也没发生。

所以，在我安装了插件之后，它工作得很好，我用这个命令来创建索引。

```
curl -XPUT localhost:9200/_river/my_river/_meta -d '
{
    "type" : "wikipedia",
    "wikipedia" : {
        "url" : "http://download.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2"
    },
    "index" : {
        "name" : "my_index",
        "type" : "my_type",
        "bulk_size" : 100
    }
}
' 
```

我把这个拿回来了。

```
{"ok":true,"_index":"_river","_type":"my_river","_id":"_meta","_version":3} 
```

这也很好用。但除此之外它什么也没做。我期待插件下载和索引文档并使其可搜索。似乎我必须执行其他命令，但我无法在任何地方找到它。顺便说一下，我是弹性搜索的新手。请帮忙。

编辑：日志

```
[2013-03-26 20:17:14,864][INFO ][gateway                  ] [Captain Universe] recovered [0] indices into cluster_state
[2013-03-26 20:18:48,860][INFO ][cluster.metadata         ] [Captain Universe] [_river] creating index, cause [auto(index api)], shards [1]/[1], mappings []
[2013-03-26 20:18:49,266][INFO ][cluster.metadata         ] [Captain Universe] [_river] update_mapping [wikipedia] (dynamic)
[2013-03-26 20:18:49,293][INFO ][river.wikipedia          ] [Captain Universe] [wikipedia][wikipedia] creating wikipedia stream river for [http://download.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2]
[2013-03-26 20:18:49,294][INFO ][river.wikipedia          ] [Captain Universe] [wikipedia][wikipedia] starting twitter stream
[2013-03-26 20:18:49,329][INFO ][cluster.metadata         ] [Captain Universe] [wikipedia] creating index, cause [api], shards [5]/[1], mappings []
[2013-03-26 20:18:49,632][INFO ][cluster.metadata         ] [Captain Universe] [_river] update_mapping [wikipedia] (dynamic)
[2013-03-26 20:18:54,871][INFO ][cluster.metadata         ] [Captain Universe] [wikipedia] update_mapping [page] (dynamic) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:41:17.307

从`"_version":3`您的角度来看，_meta 文档已多次更新。不幸的是，除非您重新创建类型，否则某些河流不会在元文档中获取更改。

尝试使用删除河流（输入 _river 索引）

```
curl -XDELETE localhost:9200/_river/my_river 
```

命令并再次创建 _meta 文档。这将再次创建类型 my_river，这将触发使用新参数创建河流。出现此问题，您最初使用错误的参数创建了河流，而您的正确参数无效。

# c# - 语言本地化仅在调试模式下工作

> ID：15643554
> 
> 赞同：3
> 
> 时间：2013-03-26T17:24:12.413
> 
> 标签：c#, localization, multilingual, visual-studio-debugging

我在我的应用程序中设置了对多种语言的支持。我已经本地化了表单，设置了所有标签，还构建了我的 resX 文件来保存翻译的消息。在 Visual Studio 中以调试模式运行时，这一切正常，但是当我在 Visual Studio 之外运行“发布”版本时，它不会更改语言。

我的主要问题是：发生这种情况是因为我的系统上没有安装该特定语言吗？对于仍然以该语言安装 Windows 的人来说，它会改变语言吗？或者如果他们安装了那种语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:27:57.827

当您在发行版中运行您的应用程序时，您的意思是启动 .exe？如果是这样，请验证您所在的目录是否具有每种语言的文件夹。

例如，如果您的应用程序默认为英语并且您提供法语支持，那么您应该有一个名为“fr”的文件夹，其中包含您的应用程序的资源 dll。

如果您不这样做，我认为它将默认为您的应用程序的基本语言。

# delphi - 隐式使用 TdwsUnit

> ID：15643556
> 
> 赞同：1
> 
> 时间：2013-03-26T17:24:24.230
> 
> 标签：delphi, dwscript

将 TDelphiWebScript 对象分配给 TdwsUnit 的 Script 属性是否足以隐式使用它？（无需将其添加到脚本中的用途）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:27:26.113

是的，这就足够了，除非您启用 coExplicitUnitUses 编译器选项，在这种情况下，脚本需要“使用”所有内容（内部单元除外）。

对于简单的脚本使用，隐式使用效果很好，对于具有大量（或大型）TdwsUnit 的复杂项目，显式使用可用于减少编译时间或更好地控制范围内的内容。

# iphone - 如何在 iOS 中执行此可滑动视图

> ID：15643558
> 
> 赞同：0
> 
> 时间：2013-03-26T17:24:34.327
> 
> 标签：iphone, ios

我附上了一张图片，我想知道如何实现突出显示的可滑动视图以显示图片和一些文本。

谢谢 ![可滑动视图](../Images/c2ea0698f075ea3b7eee5b85d26fc9ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:08:28.140

使用`UIScrollView`与`pagingEnabled = YES`

它下面的点是一个`UIPageControl`，它向用户显示有多少页内容以及他们在内容中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:29:33.743

[使用水平表视图，如此处](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)所示

它的可扩展性更高，将为您节省所有内存管理样板代码，并且在旧版本的 iPhone/iPod（内存少得多）上效率更高。

编辑：只是为了更具体。如果您事先知道您的分页不需要扩大，那么标准页面控制器是一个很好的解决方案。另一方面，如果您不能对页数设置上限，或者如果每页都有大量内存占用，或者需要进行 2d 图像处理，那么水平表格视图可能是一种解决方案。

# db2 - 使用 Unicode 数据的 DataStage DB2 运行时列传播

> ID：15643561
> 
> 赞同：1
> 
> 时间：2013-03-26T17:24:37.423
> 
> 标签：db2, rcp, multibyte, datastage

我正在尝试使用运行时列传播 (RCP) 功能使用 DataStage 9.1 从 DB2 9.7 读取一些数据。一般的方法是通过仅指定连接详细信息和表名来设置 DB2 Connector Stage 以生成查询 SQL。这种方法在大多数情况下都有效，但我遇到了多字节字符的问题。

当我进行此设置并且正在读取的数据来自其中一种 CJK（中文、日文或韩文）语言时，我`^Z`会在我写入的顺序文件中看到字符。当我将此数据写入数据集时，我可以看到架构错误地指定列的数据类型是`string`而不是`ustring`. 从阅读[默认类型转换](http://pic.dhe.ibm.com/infocenter/iisinfsv/v9r1/index.jsp?topic=%2Fcom.ibm.swg.im.iis.ds.pxop.dev.doc%2Ftopics%2Fodg_default_type_conversions.html&resultof%3D%2522%2564%2565%2566%2561%2575%256c%2574%2522%2520%2522%2575%2573%2574%2572%2569%256e%2567%2522%2520%2522%2575%2573%2574%2572%2522%2520)文档看来，DataStage 正在从 DB2 中读取数据，`ustring`但随后尝试将其作为`string`.

当我为表生成表定义时，我可以看到它生成了具有`string`类型的列。但是，当我将表定义加载到 DB2 连接器中时，我看到了一个默认选中的复选框，它将自动将`Unicode`扩展属性添加到字符列。

有了以上所有信息，DataStage 似乎能够生成`ustring`列而不是`string`，但它不能用于运行时列传播。

简而言之：有什么方法可以说服 DataStage 在使用 RCP 时生成 ustring 列？DB2 Connector 阶段是否有设置？项目级别有设置吗？是否有控制这个的环境变量？如果不是，那么我是否需要为每个表构建表定义并编写自定义作业以仅因为我看到的问题而提取该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T16:21:35.887

这不是 DataStage 的问题，而是 DB2 配置问题。

所有使用 DB2 数据的机器都需要将它们的 DB2CODEPAGE 变量设置为相同的值。如果 DB2 服务器将其设置为 1208，但 DataStage 机器上的 DB2 客户端将其设置为另一个值，那么写入的结果将是格式错误的。

确保在安装了 DB2 客户机或服务器的所有机器上将 DB2CODEPAGE 设置为相同的值。

# jquery - IE8 Jquery show() div 增加父 div 的大小

> ID：15643568
> 
> 赞同：0
> 
> 时间：2013-03-26T17:24:46.983
> 
> 标签：jquery, css, internet-explorer-8

我有一个像这样的 Jquery 弹出窗口

```
$("[id=messagelink]").hover(function(e) {
    $(this).next('#popupmessage').show();
}, function() {
    $(this).next('#popupmessage').hide();
}); 
```

div代码：

```
<div>......
<a href='' id='messagelink' name='messagelink' touserid='1' ><img src='images/icons/mail.png' width='15' height='15' /></a>
<div id='popupmessage' class='popup'>Blaaah</div>";
......
</div> 
```

CSS

```
.popup {
display: none;
padding: 10px;
background: #eeeeee;
color: #000000;
border: 1px solid #1a1a1a;
font-size: 90%;
position: absolute;
} 
```

在 FF、Chrome、Opera 中一切正常，但在 IE 中显示了弹出窗口，但它增加了父 DIV 的高度和宽度。更糟糕的是，它通过溢出来向 DIV 添加水平和垂直滚动条。呸！

我从 CSS 中删除了填充，然后问题就解决了。但我需要一个漂亮的弹出消息而不是裁剪消息。

可以做什么？

谢谢你的帮助。科埃诺斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:34:15.160

如果您的目标不是 IE 7 或更低版本，则可以使用 div{box-sizing:border-box;}。您提供的任何填充都将填充到“内部”指定的 DIV 高度和宽度，而不是外部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:02:04.750

尝试使 div 位置相对。我自己从未经历过这种情况。

```
div {
    position: relative;
} 
```

[http://jsfiddle.net/HaJjH/2/](http://jsfiddle.net/HaJjH/2/)

我检查了IE8的模拟器，你可以检查真正的IE8，看看它是否有效

# html - 如何使用 CSS 在 html 元素中的文本之后插入内容？

> ID：15643569
> 
> 赞同：0
> 
> 时间：2013-03-26T17:24:52.093
> 
> 标签：html, css

我在具有 href 属性的锚元素上插入文本时遇到问题：

```
<a href="myfile.pdf"> Contact Us</a> 
```

我正在尝试编写 css 以使图标出现在联系我们之后以及任何锚标记中的任何文本：

```
a[href$=".pdf"]:after { 
width: 16px;
height: 16px;
content: url('/_assets/img/document-type-icons-2.png') no-repeat -84% 0;
} 
```

它不是这样工作的。我如何编写我的 CSS 来实现这一点？

好的，我开始工作了，但是如何设置背景属性的样式，例如无重复和 -84% 0。

它不断重复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:03:01.880

内容仅接受文本。对于空间等特殊包机，您必须使用十六进制格式。我改变它喜欢跟随和工作。但要增加宽度，请重复空格十六进制（\00a0）。

```
a[href$=".pdf"]:after {
background: url('http://cdn1.iconfinder.com/data/icons/fatcow/32x32/file_extension_pdf.png') ;
width: 40px;
height: 40px;
content: "\00a0\00a0\00a0\00a0\00a0"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:50:47.440

将图像设置`background-image`为您的伪元素，或者从属性`:after`中删除任何内容。应该包含一个字符串（或多个字符串）或包装在函数中的图像 url（然后图像将像真实元素一样插入）。`url(path)``content``content``url()``IMG`

考虑到，为了使生成的伪元素可见（如果你将使用`background-image`而不是`content: url(path)`），`content`属性应该至少包含空字符串（`""`）。

# visual-studio-2010 - 来自 CC/NAnt 的 VS2010 devenv 命令失败

> ID：15643572
> 
> 赞同：0
> 
> 时间：2013-03-26T17:24:55.763
> 
> 标签：visual-studio-2010, cruisecontrol.net, nant

我们使用 CruiseControl / NAnt 自动构建，它一直与 VS2005 一起使用。

我们最近升级到 VS2010，现在看到几个项目给出“重建全部”消息，但没有别的：

```
------ Rebuild All started: Project: EventSetup, Configuration: BuildTWinWithPortalSvc Win32 ------
------ Rebuild All started: Project: TempFileManager, Configuration: BuildTWinWithPortalSvc Win32 ------
------ Rebuild All started: Project: Mont, Configuration: BuildTWinWithPortalSvc Win32 ------
------ Rebuild All started: Project: NOTATION, Configuration: BuildTWinWithPortalSvc Win32 ------ 
```

这发生在 100 多个项目中。从 IDE 构建或通过从 cmd 调用 devenv 可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:14:05.567

您可以直接使用 MSBuild 进行构建（请参阅[<msbuild> 任务或带有 NAnt 的 msbuild.exe？](https://stackoverflow.com/questions/1195389/msbuild-task-or-msbuild-exe-with-nant/1202121#1202121)）。使用该`<devenv>`命令需要在构建服务器上安装 Visual Studio。

该方法适用于在 VS 2008、2010 和 2012 以及所有 .NET 版本中构建的项目，因为您直接插入 MSBuild（这也是 Visual Studio 所调用的）。

# c++ - boost::算法::字符串::finder.hpp

> ID：15643576
> 
> 赞同：2
> 
> 时间：2013-03-26T17:25:05.930
> 
> 标签：c++, boost, lastindexof

[已经问过这个问题](https://stackoverflow.com/questions/15557700/java-like-lastindexof-in-c)并收到了有关 c++ STL 的答案，但是 boost 呢？

这是一个关于 boost Finders 的问题。如果您有可描述的 boost 库实现的链接，我将不胜感激它可以更轻松地为实际应用程序寻找 boost 库。

我的问题是哪个 boost finder 最适用于[lastIndexOf](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf(int))？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:38:27.167

首先，如果您要搜索子字符串的最后一次出现，最简单的选择是使用`std::string::rfind`：

```
std::string str = "Hello, World!";
int index = str.rfind("o"); 
```

如果您需要使用 Boost，因为您希望它适用于通用范围，请使用`boost::algorithm::find_last`. 它需要两个范围。在第一个范围内搜索第二个范围。

```
std::string str = "Hello, World!";
iterator_range<std::string::iterator> it = find_last(str, "o");
int index = std::distance(str.begin(), it.begin()); 
```

如果您真的想使用查找器，那么您似乎正在寻找`boost::algorithm::last_finder`. 查找器返回一个以两个迭代器作为参数的函数对象。该函数返回一个`iterator_range`你可以像这样使用它：

```
auto finder = last_finder("o");

std::string str = "Hello, World!";
iterator_range<std::string::iterator> it = finder(str.begin(), str.end());
int index = std::distance(str.begin(), it.begin()); 
```

# c# - 将多个子实体添加到根聚合或调用多个存储库

> ID：15643578
> 
> 赞同：0
> 
> 时间：2013-03-26T17:25:11.643
> 
> 标签：c#, domain-driven-design, entity-framework-5, repository-pattern, aggregateroot

我有一个实体 A，它有三个子实体 X、Y 和 Z。

我还有一个通用存储库，其中一个漂浮在网络上......

在我的服务方法 AXYZ()

我做了多个存储库调用：（伪代码）

```
repoA.Update(objectA);
repoY.Delete(objectA.PK_Id);

foreach:
  objectX.FK_ID = objectA.PK_ID;
  repoX.Add(objectX);

foreach:
  objectY.FK_ID = objectA.PK_ID;
  repoY.Add(objectY);

foreach:
  objectZ.FK_ID = objectA.PK_ID;
  repoZ.Add(objectZ);

  _unitOfWork.Commit(); 
```

现在我问自己，在 repoXXX 上执行所有 foreach.Add 操作是否不够或更好，而只是对子集合执行 Add 操作？：

```
repoA.Update(objectA);
repoY.Delete(objectA.Id);

foreach:
  objectA.CollectionX.Add(objectX);
  objectA.CollectionY.Add(objectY);
  objectA.CollectionZ.Add(objectZ);

  _unitOfWork.Commit(); 
```

旁注：

由于 objects_Y 未加载到上下文中，因此无法在内存中对 repoY 执行删除操作。

你怎么看？

我也用域驱动设计标记了这个问题，也许这个场景与它有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:25:59.337

如果您实际上是从 DDD 的角度来处理这个问题，那么我担心您拥有所有子实体的存储库，而不仅仅是聚合根，`A`. 显然，每个项目都是不同的，而 DDD 是一组通常有意义的指导方针。但是，我希望`repoA`处理加载和持久化所有四个实体，除非 X、Y 和 Z 具有作为聚合根的角色。 如果它们不全部存储在一个记录中，则`RepositoryA`可以处理来自各种来源的加载和持久`X`化 ,`Y`和对象，但我不希望有单独的存储库。`Z`

除了规范的 DDD 正确性之外，我鼓励您考虑这些关系在您的领域层中是如何工作的。该`foreach`方法意味着使用 setter，而集合添加意味着业务对象以一种可以用通用语言表达的方式建立关系。

我认为你的后一种方法更“正确”，但我会稍微改变它：

```
repoA.Update(objectA);
repoY.Delete(objectA.Id);

foreach:
  objectA.addX(objectX);
  objectA.addY(objectY);
  objectA.addZ(objectZ);

  _unitOfWork.Commit(); 
```

改变子实体的操作通常暴露在聚合根本身上，因为它知道如何维护它需要的不变量。

希望这会有所帮助。但是，我不知道你的全部情况。这将有助于更多地了解`AXYZ()`正在做什么。

# c# - 可以将查询结果放在c#中winform的文本字段中吗？

> ID：15643580
> 
> 赞同：-3
> 
> 时间：2013-03-26T17:25:15.067
> 
> 标签：c#, sql, winforms

我想从学生数据库中检索一个字段，比如电子邮件，然后我想打印从数据库中检索到的信息，在 Windows 窗体中的文本框中（在 c# 中）......是否可以这样做.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:53:37.530

您从什么类型的数据库中检索？我假设 SQL Server 7+？如果是这样的话，那么像这样使用 SqlConnection ：

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["NameOfConnectionInAppConfigFile"].ConnectionString); 
```

从这里你可以像这样构建你的命令：

```
SqlCommand command = new SqlCommand("Select [email] from [DBname]",connection); 
```

您现在需要执行命令以将数据转换为可用格式。我会在这里使用 SqlDataAdapter 将所有信息放入 DataTable 中（您也可以使用 SqlDataReader，具体取决于您要执行的操作）。它看起来像这样：

```
DataTable dt = new DataTable();
SqlDataAdapter adpt = new SqlDataAdapter(command);
adpt.Fill(dt); 
```

现在，您可以通过 DataColumn 和 DataRow 访问数据。从那里您将参考您要查找的内容并填充文本框。它看起来像这样：

```
textBox.Text = dt.Rows[0]["email"].ToString(); 
```

还指出，您需要考虑到您可能会返回多封电子邮件。在这种情况下，您需要执行以下操作：

```
foreach (DataRow row in dt.Rows)
{
     //Logic Here
} 
```

我希望这有帮助。

# jquery - 如何为 jquery 1.9 重写代码

> ID：15643582
> 
> 赞同：-4
> 
> 时间：2013-03-26T17:25:15.477
> 
> 标签：jquery, jquery-1.4, jquery-1.9

请帮我重写 jquery 1.9 库的 js 代码。在我使用 1.4 之前。图片。尝试在一页中使用 2 个库而没有冲突。没有结果。

```
jQuery.noConflict()

var ddpowerzoomer={
    dsetting: {defaultpower:2, powerrange:[2,7], magnifiersize:[75, 75]},
    mousewheelevt: (/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel", //FF doesn't recognize mousewheel as of FF3.x
    $magnifier: {outer:null, inner:null, image:null},
    activeimage: null,

    movemagnifier:function(e, moveBol, zoomdir){
        var activeimage=ddpowerzoomer.activeimage //get image mouse is currently over
        var activeimginfo=activeimage.info
        var coords=activeimginfo.coords //get offset coordinates of image relative to upper left corner of page
        var $magnifier=ddpowerzoomer.$magnifier
        var magdimensions=activeimginfo.magdimensions //get dimensions of magnifier
        var power=activeimginfo.power.current
        var powerrange=activeimginfo.power.range
        var x=e.pageX-coords.left //get x coords of mouse within image (where top corner of image is 0)
        var y=e.pageY-coords.top
        if (moveBol==true){
            if (e.pageX>=coords.left && e.pageX<=coords.right && e.pageY>=coords.top && e.pageY<=coords.bottom)  //if mouse is within currently within boundaries of active base image
                $magnifier.outer.css({left:e.pageX-magdimensions[0]/2, top:e.pageY-magdimensions[1]/2}) //move magnifier so it follows the cursor
            else{ //if mouse is outside base image
                ddpowerzoomer.activeimage=null
                $magnifier.outer.hide() //hide magnifier
            }
        }
        else if (zoomdir){ //if zoom in
            var od=activeimginfo.dimensions //get dimensions of image
            var newpower=(zoomdir=="in")? Math.min(power+1, powerrange[1]) : Math.max(power-1, powerrange[0]) //get new power from zooming in or out
            var nd=[od[0]*newpower, od[1]*newpower] //calculate dimensions of new enlarged image within magnifier
            $magnifier.image.css({width:nd[0], height:nd[1]})
            activeimginfo.power.current=newpower //set current power to new power after magnification
        }
        power=activeimginfo.power.current //get current power
        var newx=-x*power+magdimensions[0]/2 //calculate x coord to move enlarged image
        var newy=-y*power+magdimensions[1]/2
        $magnifier.inner.css({left:newx, top:newy}) //move image wrapper within magnifier so the correct image area is shown
    },

    setupimage:function($, imgref, options){
        var s=jQuery.extend({}, ddpowerzoomer.dsetting, options)
        var $imgref=$(imgref)
        imgref.info={ //create object to remember various info regarding image 
            power: {current:s.defaultpower, range:s.powerrange},
            magdimensions: s.magnifiersize,
            dimensions: [$imgref.width(), $imgref.height()],
            coords: null
        }
        $imgref.unbind('mouseenter').mouseenter(function(e){ //mouseenter event over base image
            var $magnifier=ddpowerzoomer.$magnifier
            $magnifier.outer.css({width:s.magnifiersize[0], height:s.magnifiersize[1]}) //set magnifier's size
            var offset=$imgref.offset() //get image offset from document
            var power=imgref.info.power.current
            $magnifier.inner.html('<img src="'+options.largeimagesrc+'"/>') //get base image's src and create new image inside magnifier based on it
            $magnifier.image=$magnifier.outer.find('img:first')
                .css({width:imgref.info.dimensions[0]*power, height:imgref.info.dimensions[1]*power}) //set size of enlarged image
            var coords={left:offset.left, top:offset.top, right:offset.left+imgref.info.dimensions[0], bottom:offset.top+imgref.info.dimensions[1]}
            imgref.info.coords=coords //remember left, right, and bottom right coordinates of image relative to doc
            $magnifier.outer.show()
            ddpowerzoomer.activeimage=imgref
        })
    },

    init:function($){
        var $magnifier=$('<div style="position:absolute;width:100px;height:100px;display:none;overflow:hidden;border:1px solid black;" />')
            .append('<div style="position:relative;left:0;top:0;" />')
            .appendTo(document.body) //create magnifier container and add to doc
        ddpowerzoomer.$magnifier={outer:$magnifier, inner:$magnifier.find('div:eq(0)'), image:null} //reference and remember various parts of magnifier
        $magnifier=ddpowerzoomer.$magnifier
        $(document).unbind('mousemove.trackmagnifier').bind('mousemove.trackmagnifier', function(e){ //bind mousemove event to doc
            if (ddpowerzoomer.activeimage){ //if mouse is currently over a magnifying image
                ddpowerzoomer.movemagnifier(e, true) //move magnifier
            }
        }) //end document.mousemove

        $magnifier.outer.bind(ddpowerzoomer.mousewheelevt, function(e){ //bind mousewheel event to magnifier
            if (ddpowerzoomer.activeimage){
                var delta=e.detail? e.detail*(-120) : e.wheelDelta //delta returns +120 when wheel is scrolled up, -120 when scrolled down
                if (delta<=-120){ //zoom out
                    ddpowerzoomer.movemagnifier(e, false, "out")
                }
                else{ //zoom in
                    ddpowerzoomer.movemagnifier(e, false, "in")
                }
                e.preventDefault()
            }
        })
    }
} //ddpowerzoomer

jQuery.fn.addpowerzoom=function(options){
    var $=jQuery
    return this.each(function(){ //return jQuery obj
        if (this.tagName!="IMG")
            return true //skip to next matched element
        if (typeof options=="undefined")
            options={}
        if (options.largeimage && options.largeimage.length>0){ //preload large image?
            options.preloadimg=new Image()
            options.preloadimg.src=options.largeimage
        }
        var $imgref=$(this)
        options.largeimagesrc=(options.preloadimg)? options.preloadimg.src : $imgref.attr('src')
        if (parseInt(this.style.width)>0 && parseInt(this.style.height)>0) //if image has explicit CSS width/height defined
            ddpowerzoomer.setupimage($, this, options)
        else if (this.complete){ //account for IE not firing image.onload
            ddpowerzoomer.setupimage($, this, options)
        }
        else{
            $imgref.bind('load', function(){
                ddpowerzoomer.setupimage($, this, options)
            })
        }
    })
}

jQuery(document).ready(function($){ //initialize power zoomer on DOM load
    ddpowerzoomer.init($)
}) 
```

尝试在没有冲突但没有结果的一页中使用 2 个库。所有其他脚本使用 1.9 库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:28:27.797

```
<script src="jquery.1.4.js"></script>
<script>
    var $14 = window.jQuery;
</script>

<script src="jquery.1.9.1.js"></script>
<script>
    var $ = window.jQuery;
</script>

<script>
    // Code with 1.4
    console.log( $14('body').html() );

    // Code with 1.9.1
    console.log( $('body').html() );
<script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:29:28.693

你可以使用**jQuery Migrate 插件**来指导你。这里是：[下载 jQuery](http://jquery.com/download/) 只需将其包含在检查浏览器控制台中以查看警告、错误... 包含未压缩的**jQuery Migrate 插件**。压缩后，我在 Liferay 中遇到了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:31:08.090

如果您从旧版本升级到 jQuery 1.9，您需要知道的最重要的事情是在 1.9 中删除了一大堆旧功能。

这些功能在以前的版本中已被弃用，因此暂时不推荐使用它们，但它们被保留以帮助向后兼容。

如果您的代码仍在使用这些功能，您有以下三种选择：

1.  降级回 jQuery 1.8。

2.  重新编写代码以使用正确的技术，而不是使用已弃用的功能。

3.  下载jQuery 开发者与 jQuery 1.9 同时发布的[迁移库。](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)这个库包含从主 jQuery 库中删除的所有旧代码，从而使其与使用已弃用功能的代码再次兼容。

    在短期内，这可能是您最好的解决方案，让您恢复正常运行，但从长远来看，您应该考虑修复您的代码（即我上面的第 2 点）。

# php - 致命错误：在 init_autoloader.php 中找不到类“Zend\Loader\AutoloaderFactory”

> ID：15643585
> 
> 赞同：1
> 
> 时间：2013-03-26T17:25:33.207
> 
> 标签：php, installation, zend-framework2

我已经在我的测试服务器上成功地测试了我的 ZF2 应用程序。当我将应用程序发布到实时服务器时，出现以下错误：

```
Unable to load ZF2\. Run `php composer.phar install` or define a ZF2_PATH environment variable. 
```

将此行添加到我的 index.php 后，此错误消失了。

```
putenv("ZF2_PATH=/opt/zf2/library/"); 
```

但是现在我得到了 AutoloaderFactory-not-found 错误，这意味着 PHP 仍然找不到类。实时服务器是 1und1 (1and1, 1&1) 托管服务器。

`uname -a`产量`Linux infongd8707 2.6.28.8-20120713a-iscsi-ntacker-3ware-sec8-fmon-igb-dif2-grsec #1 SMP Fri Jul 13 13:37:07 CEST 2012 i686 GNU/Linux`

[ZF2 安装说明](http://framework.zend.com/manual/2.0/en/ref/installation.html)中描述的解决方法没有帮助。

*   我不允许在`httpd.conf`.
*   `SetEnv``.htaccess`Apache 的配置似乎忽略了中的语句。
*   如上所述，设置 ZF2_PATH`putenv`确实有点帮助。
*   包括库路径`set_include_path`，绝对和相对都尝试过，但没有帮助，尽管`phpinfo()`表明它被设置为本地值。

有人有同样的经历吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:33:43.483

该解决方案对于 1 和 1 客户来说相当有趣。[似乎](https://www.akeebabackup.com/support/joomlapack-support-11x/general-support/1455-warning-to-11-internet-inc-clients-linux-only.html)在他们的托管服务器上`unzip`，我用来提取我的项目，是一个别名，`unzip -L`它强制所有提取的文件都是小写的。由于我们的测试服务器和实时服务器都对文件和目录区分大小写，因此这种行为使许多目录无法访问。

# actionscript-3 - 按钮未按预期工作

> ID：15643595
> 
> 赞同：0
> 
> 时间：2013-03-26T17:25:58.053
> 
> 标签：actionscript-3, flash-cs5

我想知道是否有人可以阐明我的代码？它似乎可以正常工作而没有任何错误，但某些按钮不起作用。（即进入投资菜单，然后输入“查看投资组合”、“投资”和“确定”按钮将不起作用。）

这是整个代码。

```
import flash.events.MouseEvent;
bg.stop();//Buttons
bg.ok.addEventListener(MouseEvent.CLICK, menu);
function menu(m:MouseEvent):void
{
    trace(m.target.name);
    trace(bg.currentFrame);
    if (bg.currentFrame == 1)
    {
        bg.ok.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(2);
        bg.menubtn.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame == 2 || bg.currentFrame == 4 && m.target.name == "Menubtn4" || bg.currentFrame == 5 && m.target.name == "Menubtn5" || bg.currentFrame == 6 && m.target.name == "backtomain" || bg.currentFrame == 7 && m.target.name == "Menubtn7" || bg.currentFrame == 9 && m.target.name == "Menubtn9" || bg.currentFrame == 13 && m.target.name == "Menubtn13"  || bg.currentFrame == 20 && m.target.name == "backtomenu20" || bg.currentFrame == 24 && m.target.name == "Menubtn24" || bg.currentFrame == 27 && m.target.name == "backtomenu27" )
    {
        if (m.target.name == "menubtn")
        {
            bg.menubtn.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "Menubtn4")
        {
            bg.Menubtn4.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "Menubtn5")
        {
            bg.Menubtn5.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "backtomain")
        {
            bg.backtomain.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "Menubtn7")
        {
            bg.Menubtn7.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "Menubtn9")
        {
            bg.Menubtn9.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "Menubtn13")
        {
            bg.Menubtn13.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "backtomenu20")
        {
            bg.backtomenu20.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "Menubtn24")
        {
            bg.Menubtn24.removeEventListener(MouseEvent.CLICK, menu);
        }
        else if (m.target.name == "backtomenu27")
        {
            bg.backtomenu27.removeEventListener(MouseEvent.CLICK, menu);
        }
        bg.gotoAndStop(3);
        bg.Balinq.addEventListener(MouseEvent.CLICK, menu);
        bg.Transinq.addEventListener(MouseEvent.CLICK, menu);
        bg.Fintrxns.addEventListener(MouseEvent.CLICK, menu);
        bg.invest.addEventListener(MouseEvent.CLICK, menu);
        bg.others.addEventListener(MouseEvent.CLICK, menu);
        bg.passchange.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==3)
    {
        bg.Balinq.removeEventListener(MouseEvent.CLICK, menu);
        bg.Transinq.removeEventListener(MouseEvent.CLICK, menu);
        bg.Fintrxns.removeEventListener(MouseEvent.CLICK, menu);
        bg.invest.removeEventListener(MouseEvent.CLICK, menu);
        bg.others.removeEventListener(MouseEvent.CLICK, menu);
        bg.passchange.removeEventListener(MouseEvent.CLICK, menu);
        if (m.target.name == "Balinq")
        {
            bg.gotoAndStop(2);
            bg.menubtn.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "Transinq")
        {
            bg.gotoAndStop(4);
            bg.Menubtn4.addEventListener(MouseEvent.CLICK, menu);
            bg.okbtn4.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "Fintrxns")
        {
            bg.gotoAndStop(6);
            bg.backtomain.addEventListener(MouseEvent.CLICK, menu);
            bg.transown.addEventListener(MouseEvent.CLICK, menu);
            bg.transthird.addEventListener(MouseEvent.CLICK, menu);
            bg.transanyone.addEventListener(MouseEvent.CLICK, menu);
            bg.billsdeposit.addEventListener(MouseEvent.CLICK, menu);
            bg.billscredit.addEventListener(MouseEvent.CLICK, menu);
            bg.reloadphone.addEventListener(MouseEvent.CLICK, menu);
            bg.reloadwallet.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "others")
        {
            bg.gotoAndStop(20);
            bg.backtomenu20.addEventListener(MouseEvent.CLICK, menu);
            bg.checkbook.addEventListener(MouseEvent.CLICK, menu);
            bg.stoppay.addEventListener(MouseEvent.CLICK, menu);
            bg.enrollacct.addEventListener(MouseEvent.CLICK, menu);
            bg.enrollthird.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "passchange")
        {
            bg.gotoAndStop(24);
            bg.Menubtn24.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "invest")
        {
            bg.gotoAndStop(27);
            bg.backtomenu27.addEventListener(MouseEvent.CLICK, menu);
            bg.viewport.addEventListener(MouseEvent.CLICK, menu);
            bg.viewhist.addEventListener(MouseEvent.CLICK, menu);
            bg.subscribe.addEventListener(MouseEvent.CLICK, menu);
            bg.redeem.addEventListener(MouseEvent.CLICK, menu);
        }
    }
    else if (bg.currentFrame==4)
    {
        bg.Menubtn4.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn4.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(5);
        bg.Menubtn5.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==6)
    {
        bg.backtomain.removeEventListener(MouseEvent.CLICK, menu);
        bg.transown.removeEventListener(MouseEvent.CLICK, menu);
        bg.transthird.removeEventListener(MouseEvent.CLICK, menu);
        bg.transanyone.removeEventListener(MouseEvent.CLICK, menu);
        bg.reloadphone.removeEventListener(MouseEvent.CLICK, menu);
        if (m.target.name == "transown")
        {
            bg.gotoAndStop(7);
            bg.Menubtn7.addEventListener(MouseEvent.CLICK, menu);
            bg.okbtn7.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "transthird")
        {
            bg.gotoAndStop(9);
            bg.Menubtn9.addEventListener(MouseEvent.CLICK, menu);
            bg.okbtn9.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "transanyone")
        {
            bg.gotoAndStop(13);
            bg.Menubtn13.addEventListener(MouseEvent.CLICK, menu);
            bg.okbtn13.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "billsdeposit")
        {
            bg.gotoAndStop(15);
            bg.finbtn15.addEventListener(MouseEvent.CLICK, menu);
            bg.okbtn15.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "billscredit")
        {
            bg.gotoAndStop(28);
            bg.finbtn28.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "reloadphone")
        {
            bg.gotoAndStop(17);
            bg.finbtn17.addEventListener(MouseEvent.CLICK, menu);
            bg.okbtn17.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "reloadwallet")
        {
            bg.gotoAndStop(18);
            bg.finbtn18.addEventListener(MouseEvent.CLICK, menu);
        }
    }
    else if (bg.currentFrame==7)
    {
        bg.Menubtn7.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn7.removeEventListener(MouseEvent.CLICK, menu);
        if (m.target.name == "okbtn7")
        {
            bg.gotoAndStop(8);
            bg.finbtn8.addEventListener(MouseEvent.CLICK, menu);
        }
        } ;/*current frame 8*/
    }
    else if (m.target.name=="finbtn8" || m.target.name=="finbtn10" || m.target.name=="finbtn11" || m.target.name=="finbtn12" || m.target.name=="finbtn14" || m.target.name=="finbtn15" || m.target.name=="finbtn16" || m.target.name=="finbtn17" || m.target.name=="finbtn18" ||m.target.name=="finbtn26" ||m.target.name=="finbtn28")
    {
        if (m.target.name == "finbtn8")
        {
            bg.finbtn8.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn10")
        {
            bg.finbtn10.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn11")
        {
            bg.finbtn11.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn12")
        {
            bg.finbtn12.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn14")
        {
            bg.finbtn14.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn15")
        {
            bg.finbtn15.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn16")
        {
            bg.finbtn16.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn17")
        {
            bg.finbtn17.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn18")
        {
            bg.finbtn18.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn26")
        {
            bg.finbtn26.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "finbtn28")
        {
            bg.finbtn28.removeEventListener(MouseEvent.CLICK, menu);
        }
        bg.gotoAndStop(6);
        bg.backtomain.addEventListener(MouseEvent.CLICK, menu);
        bg.transown.addEventListener(MouseEvent.CLICK, menu);
        bg.transthird.addEventListener(MouseEvent.CLICK, menu);
        bg.transanyone.addEventListener(MouseEvent.CLICK, menu);
        bg.billsdeposit.addEventListener(MouseEvent.CLICK, menu);
        bg.billscredit.addEventListener(MouseEvent.CLICK, menu);
        bg.reloadphone.addEventListener(MouseEvent.CLICK, menu);
        bg.reloadwallet.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==9 || m.target.name=="backbtn11")
    {
        if (bg.currentFrame == 9)
        {
            bg.Menubtn9.removeEventListener(MouseEvent.CLICK, menu);
            bg.okbtn9.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "backbtn11")
        {
            bg.finbtn11.removeEventListener(MouseEvent.CLICK, menu);
            bg.okbtn11.removeEventListener(MouseEvent.CLICK, menu);
            bg.backbtn11.removeEventListener(MouseEvent.CLICK, menu);
        }
        bg.gotoAndStop(10);
        bg.finbtn10.addEventListener(MouseEvent.CLICK, menu);
        bg.okbtn10.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==10)
    {
        bg.finbtn10.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn10.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(11);
        bg.finbtn11.addEventListener(MouseEvent.CLICK, menu);
        bg.okbtn11.addEventListener(MouseEvent.CLICK, menu);
        bg.backbtn11.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==11)
    {
        bg.finbtn11.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn11.removeEventListener(MouseEvent.CLICK, menu);
        bg.backbtn11.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(12);
        bg.finbtn12.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==13)
    {
        bg.Menubtn13.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn13.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(14);
        bg.finbtn14.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==15)
    {
        bg.finbtn15.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn15.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(16);
        bg.finbtn16.addEventListener(MouseEvent.CLICK, menu);
        bg.backbtn16.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==16)
    {
        bg.gotoAndStop(15);
        bg.finbtn15.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==17)
    {
        bg.finbtn17.removeEventListener(MouseEvent.CLICK, menu);
        bg.okbtn17.removeEventListener(MouseEvent.CLICK, menu);
        bg.gotoAndStop(26);
        bg.finbtn26.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==20)
    {
        bg.backtomenu20.removeEventListener(MouseEvent.CLICK, menu);
        bg.checkbook.removeEventListener(MouseEvent.CLICK, menu);
        bg.stoppay.removeEventListener(MouseEvent.CLICK, menu);
        bg.enrollacct.removeEventListener(MouseEvent.CLICK, menu);
        bg.enrollthird.removeEventListener(MouseEvent.CLICK, menu);
        if (m.target.name == "checkbook")
        {
            bg.gotoAndStop(21);
            bg.otherbtn21.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "stoppay")
        {
            bg.gotoAndStop(22);
            bg.otherbtn22.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "enrollacct")
        {
            bg.gotoAndStop(23);
            bg.otherbtn23.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "enrollthird")
        {
            bg.gotoAndStop(25);
            bg.otherbtn25.addEventListener(MouseEvent.CLICK, menu);
        }
    }
    else if (m.target.name=="otherbtn21" || m.target.name=="otherbtn22" || m.target.name=="otherbtn23" || m.target.name=="otherbtn25")
    {
        if (m.target.name == "otherbtn21")
        {
            bg.otherbtn21.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "otherbtn22")
        {
            bg.otherbtn22.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "otherbtn23")
        {
            bg.otherbtn23.removeEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "otherbtn25")
        {
            bg.otherbtn25.removeEventListener(MouseEvent.CLICK, menu);
        }
        bg.gotoAndStop(20);
        bg.backtomenu20.addEventListener(MouseEvent.CLICK, menu);
        bg.checkbook.addEventListener(MouseEvent.CLICK, menu);
        bg.stoppay.addEventListener(MouseEvent.CLICK, menu);
        bg.enrollacct.addEventListener(MouseEvent.CLICK, menu);
        bg.enrollthird.addEventListener(MouseEvent.CLICK, menu);
    }
    else if (bg.currentFrame==27)
    {
        bg.backtomenu27.removeEventListener(MouseEvent.CLICK, menu);
        bg.viewport.removeEventListener(MouseEvent.CLICK, menu);
        bg.viewhist.removeEventListener(MouseEvent.CLICK, menu);
        bg.subscribe.removeEventListener(MouseEvent.CLICK, menu);
        bg.redeem.removeEventListener(MouseEvent.CLICK, menu);
        if (m.target.name == "viewport")
        {
            bg.gotoAndStop(29);
            bg.backtoinvest29.addEventListener(MouseEvent.CLICK, menu);
            bg.okinvest1.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "viewhist")
        {
            bg.gotoAndStop(32);
            bg.backtoinvest32.addEventListener(MouseEvent.CLICK, menu);
            bg.donebtn32.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "subscribe")
        {
            bg.gotoAndStop(35);
            bg.backtoinvest35.addEventListener(MouseEvent.CLICK, menu);
            bg.donebtn35.addEventListener(MouseEvent.CLICK, menu);
        }
        if (m.target.name == "redeem")
        {
            bg.gotoAndStop(42);
            bg.backtoinvest42.addEventListener(MouseEvent.CLICK, menu);
            bg.okinvest4.addEventListener(MouseEvent.CLICK, menu);
        }
        else if (bg.currentFrame==29)
        {
            bg.backtoinvest29.removeEventListener(MouseEvent.CLICK, menu);
            bg.okinvest1.removeEventListener(MouseEvent.CLICK, menu);
            if (m.target.name == "okinvest1")
            {
                bg.gotoAndStop(30);
                bg.backtoinvest30.addEventListener(MouseEvent.CLICK, menu);
            }
            else if (bg.currentFrame ==30)
            {
                bg.backtoinvest30.removeEventListener(MouseEvent.CLICK, menu);
                bg.donebtn30.addEventListener(MouseEvent.CLICK, menu);
                if (m.target.name == "donebtn30")
                {
                    bg.gotoAndStop(31);
                    bg.backtoinvest31.addEventListener(MouseEvent.CLICK, menu);
                }
            }
            else if (m.target.name=="backtoinvest29" || m.target.name=="backtoinvest30" || m.target.name=="backtoinvest31" || m.target.name=="backtoinvest32" || m.target.name=="backtoinvest33" || m.target.name=="backtoinvest34" || m.target.name=="backtoinvest35" || m.target.name=="backtoinvest36" || m.target.name=="backtoinvest37" || m.target.name=="backtoinvest38" ||m.target.name=="backtoinvest39" || m.target.name=="backtoinvest41" || m.target.name=="backtoinvest42" || m.target.name=="backtoinvest43" || m.target.name=="backtoinvest44" || m.target.name=="backtoinvest45" || m.target.name=="backtoinvest46" || m.target.name=="backtoinvest47" || m.target.name=="backtoinvest48")
            {
                if (m.target.name == "backtoinvest29")
                {
                    bg.backtoinvest29.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest30")
                {
                    bg.backtoinvest30.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest31")
                {
                    bg.backtoinvest31.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest32")
                {
                    bg.backtoinvest32.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest33")
                {
                    bg.backtoinvest33.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest34")
                {
                    bg.backtoinvest34.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest35")
                {
                    bg.backtoinvest35.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest36")
                {
                    bg.backtoinvest36.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest37")
                {
                    bg.backtoinvest37.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest38")
                {
                    bg.backtoinvest38.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest39")
                {
                    bg.backtoinvest39.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest41")
                {
                    bg.backtoinvest41.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest42")
                {
                    bg.backtoinvest42.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest43")
                {
                    bg.backtoinvest43.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest44")
                {
                    bg.backtoinvest44.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest45")
                {
                    bg.backtoinvest45.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest46")
                {
                    bg.backtoinvest46.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest46")
                {
                    bg.backtoinvest46.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest47")
                {
                    bg.backtoinvest47.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "backtoinvest48")
                {
                    bg.backtoinvest48.removeEventListener(MouseEvent.CLICK, menu);
                }
                bg.gotoAndStop(27);
                bg.backtomenu27.addEventListener(MouseEvent.CLICK, menu);
                bg.viewport.addEventListener(MouseEvent.CLICK, menu);
                bg.viewhist.addEventListener(MouseEvent.CLICK, menu);
                bg.subscribe.addEventListener(MouseEvent.CLICK, menu);
                bg.redeem.addEventListener(MouseEvent.CLICK, menu);
            }
            else if (bg.currentFrame==32)
            {
                if (bg.currentFrame == 32)
                {
                    bg.backtoinvest32.removeEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn32.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "donebtn32")
                {
                    bg.gotoAndStop(33);
                    bg.backtoinvest33.addEventListener(MouseEvent.CLICK, menu);
                    bg.okinvest2.addEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okinvest2")
                {
                    bg.gotoAndStop(34);
                    bg.backtoinvest33.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okinvest2.removeEventListener(MouseEvent.CLICK, menu);
                    bg.backtoinvest34.addEventListener(MouseEvent.CLICK, menu);
                }
            }
            else if (bg.currentFrame==35)
            {
                bg.backtoinvest35.removeEventListener(MouseEvent.CLICK, menu);
                bg.donebtn35.removeEventListener(MouseEvent.CLICK, menu);
                if (m.target.name == "donebtn35")
                {
                    bg.gotoAndStop(36);
                    bg.backtoinvest36.addEventListener(MouseEvent.CLICK, menu);
                    bg.okinvest3.addEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okinvest3")
                {
                    bg.gotoAndStop(37);
                    bg.backtoinvest37.addEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn37.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==37)
                {
                    bg.backtoinvest36.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okinvest3.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "donebtn37")
                {
                    bg.gotoAndStop(38);
                    bg.backtoinvest38.addEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn38.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==38)
                {
                    bg.backtoinvest37.removeEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn37.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okbtn38")
                {
                    bg.gotoAndStop(39);
                    bg.backtoinvest39.addEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn39.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==39)
                {
                    bg.backtoinvest38.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn38.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okbtn39")
                {
                    bg.gotoAndStop(40);
                    bg.backtoinvest39.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn39.removeEventListener(MouseEvent.CLICK, menu);
                    bg.backtoinvest39.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn40.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==40)
                {
                    bg.okbtn40.removeEventListener(MouseEvent.CLICK, menu);
                    bg.backtoinvest40.addEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okbtn40")
                {
                    bg.gotoAndStop(41);
                    bg.backtoinvest41.addEventListener(MouseEvent.CLICK, menu);
                }
            }
            else if (bg.currentFrame==42)
            {
                bg.backtoinvest42.removeEventListener(MouseEvent.CLICK, menu);
                bg.okinvest4.removeEventListener(MouseEvent.CLICK, menu);
                if (m.target.name == "okinvest4")
                {
                    bg.gotoAndStop(42);
                    bg.backtoinvest43.addEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn43.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==43)
                {
                    bg.backtoinvest43.removeEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn43.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "donebtn43")
                {
                    bg.gotoAndStop(44);
                    bg.backtoinvest44.addEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn44.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==44)
                {
                    bg.backtoinvest44.removeEventListener(MouseEvent.CLICK, menu);
                    bg.donebtn44.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "donebtn44")
                {
                    bg.gotoAndStop(45);
                    bg.backtoinvest45.addEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn45.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==45)
                {
                    bg.backtoinvest45.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn45.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okbtn45")
                {
                    bg.gotoAndStop(46);
                    bg.backtoinvest46.addEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn46.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==46)
                {
                    bg.backtoinvest46.removeEventListener(MouseEvent.CLICK, menu);
                    bg.okbtn46.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okbtn46")
                {
                    bg.gotoAndStop(47);
                    bg.okbtn47.addEventListener(MouseEvent.CLICK, menu);
                }
                else if (bg.currentFrame==47)
                {
                    bg.okbtn47.removeEventListener(MouseEvent.CLICK, menu);
                }
                if (m.target.name == "okbtn47")
                {
                    bg.gotoAndStop(48);
                    bg.backtoinvest48.addEventListener(MouseEvent.CLICK, menu);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:28:00.750

尽管提供“所有代码”很有用，但在这种情况下，您混淆了您正在处理的核心问题。在其中任何地方都找不到“查看投资组合”或“投资”字样，并且对于所有其他按钮注册，需要逐行阅读以查看您是否输入了按钮。

此外，由于这些界面元素似乎不是动态创建的（而是使用 Flash IDE，因此存在于看不见的库中），我们无法判断正确的变量名称应该是什么。

**简明扼要**。提供尽可能少的代码来重现问题。

**简化**。每当您看到重复的代码模式时，这可能意味着您可以使用函数或循环来减少。

所有这些按钮都在为“(MouseEvent.CLICK, menu)”注册或取消注册。例如，您可以使用循环更快地完成此操作...

```
var buttons:Array = [
    bg.ok,
    bg.menubtn,
    bg.Balinq,
    bg.Transinq,
    bg.Fintrxns,
    bg.invest,
    bg.others,
    bg.passchange
]

for (var btn in buttons) {
    btn.addEventListener(MouseEvent.CLICK, menu);
} 
```

现在，当您需要对所有这些按钮进行操作时，您只需查看一个位置。

* * *

单击按钮时，您正在测试对象的名称并取消注册它。您可以避免此测试并简单地取消注册目标。因此，而不是这个：

```
if (m.target.name == "menubtn") {
    bg.menubtn.removeEventListener(MouseEvent.CLICK, menu);
} 
```

做就是了：

```
m.target.removeEventListener(MouseEvent.CLICK, menu); 
```

* * *

另一种简化代码的方法是使用[switch 运算符](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#switch)。像这样的方法...

```
if (m.target.name == "viewport") {
    // do a
}
if (m.target.name == "viewhist") {
    // do b
}
if (m.target.name == "subscribe") {
    // do c
} 
```

可以变成...

```
switch (m.target.name) {
    case "viewport": // do a
        break;
    case "viewhist": // do b
        break;
    case "subscribe": // do c
        break;
} 
```

当您知道您总是比较以测试相同的变量时，这很方便。

* * *

最后，[可重用代码](http://en.wikipedia.org/wiki/Code_reuse)意味着轻量级代码易于维护，减少繁重的工作，并使文档更具可读性。有了你在这里所做的，我相当有信心你可以把它从 650 行代码减少到大约 50 行代码。

# python - ftplib vs urllib2？

> ID：15643609
> 
> 赞同：6
> 
> 时间：2013-03-26T17:26:44.807
> 
> 标签：python, ftp, urllib2, ftplib

我不知道如何在通过 FTP 下载文件之间`ftplib`进行选择。`urllib2`据我所知，它们的效果相当不错，而且大多数建议似乎只是假设其中之一，而没有列出优缺点。此外，还有其他库可以尝试。

一般应该怎么选？这不仅仅是找到有用的东西的问题，我已经用两种不同的方式做到了。我想知道正确的选择是什么。我的基本想法是使用`ftplib`，因为它毕竟是一个 ftp 服务器......

在我的具体情况下，我正在处理公共服务器上的非常大的文件（几个 gb）。我想获得某种进度条。由于文件如此之大，拥有恢复功能会很好......但这些是可选的 - 只是为了对将使用我的代码的人好。我不想使用已经标记为弃用的库。

# android - 安卓 SQLite 触发器

> ID：15643610
> 
> 赞同：1
> 
> 时间：2013-03-26T17:26:47.730
> 
> 标签：android, triggers, sqlite, android-sqlite

这是一个非常具体的问题。我一直在试图弄清楚所需的确切步骤，但我想不出任何可行的方法。

每当将“任务”表中的新任务插入数据库时​​，我需要一个将新记录插入到名为 Records 的表中的触发器。我需要在与任务中的条件匹配的“项目”表中为每个打开的项目插入一条记录。我在声明中的伪代码/尝试如下。

```
CREATE TRIGGER update_item_records ON INSERT INTO tasks
BEGIN
   SELECT item in ITEMS WHERE item.type=new.type AND item.program=new.program
   ....now insert into records - this is where I'm confused
   INSERT  INTO records record.item = item.id, record.program = new.program, 
   record.task=new.id
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:36:40.370

`SELECT`触发器内的语句结果被忽略。但是，该`INSERT`命令[接受一个`SELECT`查询作为 source](http://www.sqlite.org/lang_insert.html)：

```
INSERT INTO records(item, program, task)
SELECT id, new.program, new.id
FROM items
WHERE type = new.type
  AND program = new.program; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T06:30:22.693

> [代码和概念在这里](http://code2concept.blogspot.in/2015/02/android-sqlite-trigger-demo.html)

当某些`procedural code`事件发生在我们的`database`.

> 考虑这个简单的演示，`trigger`它在大学中插入新学生后自动在食堂和图书馆中添加字段。

```
CREATE TRIGGER if not exists add_student   
   AFTER INSERT  
 ON[student]  
   for each row  
     BEGIN  
        insert into library values (2 , new.sid );  
        insert into canteen values (3 , new.sid);  
     END; 
```

# html - 双下划线标签？

> ID：15643614
> 
> 赞同：25
> 
> 时间：2013-03-26T17:26:54.627
> 
> 标签：html, css

我想在 HTML 中为一些文本添加双下划线。

```
<h1><u><i> website </i></u></h1> 
```

我在底部有两条线而不是一条。是否有特定的标签或者我必须在css中做它？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-26T17:29:36.743

您可以尝试添加以下内容：

```
h1.dblUnderlined { border-bottom: 3px double; } 
```

*注意：宽度必须`3px`大于等于总宽度；不是每个边框的宽度。当您增加测量值时，根据定义的测量值被 3 的可分性，线条和空间的宽度可能相等也可能不相等。余数为 1，并且 1 被添加到空间的宽度；余数为 2 将导致每行添加 1。*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-26T17:29:05.157

使用边框**和**下划线：

```
.doubleUnderline {
    text-decoration:underline;
    border-bottom: 1px solid #000;
}

<span class="doubleUnderline">Test</span> 
```

这是[一个工作小提琴](http://jsfiddle.net/SLMcZ/1/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T18:33:53.610

`double`最简单的方法是在 CSS中设置 type 的底部边框。它需要至少 3 像素宽才能创建最小的双边框（两个 1 像素的边框，它们之间的间距为 1 像素）。

细节取决于标记、双线的所需宽度和颜色，以及它是否应该跨越可用宽度。像这样的标记`<h1><u><i> website </i></u></h1>`可能并不严重。使用简单标记`<h1>foobar</h1>`，一种在页面上获得最小双边框的方法是使用

```
h1 {
  border-bottom: double 3px;
} 
```

如果您只想将标题文本“加下划线”，最简单的方法是使用内部标记，如`<h1><span>foobar</span></h1>`和 CSS 代码

```
h1 span {
  border-bottom: double 3px;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-09T13:48:39.017

伙计们/姑娘们，这也可以，但更像是传统的双下划线。

```
.doubleUnderline {
     text-decoration-line: underline;
     text-decoration-style: double;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-30T18:16:46.600

仅供参考，目前，在 Firefox 或 Safari 中可以使用供应商前缀进行以下操作：

```
text-decoration: underline double;
-webkit-text-decoration: underline double; 
```

见[text-decoration-line](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-line)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-12T10:21:54.950

为什么不制作自己的“标签”？

```
<style>
du
{
    text-decoration-line: underline;
    text-decoration-style: double;
}
</style>
<p> I want <du>this stuff</du> double underlined.</p> 
```

[http://jsfiddle.net/eoba541g/2/](http://jsfiddle.net/eoba541g/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-03T14:26:23.637

### 使用以下[http://jsfiddle.net/cKNP4/](http://jsfiddle.net/cKNP4/)

### 或者

为任何 HTML 容器赋予以下**样式：**
`border-top-style:none;border-right-style:none;border-bottom-style:double;border-left-style:none;border-width: 2px solid black;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-19T20:39:14.553

这是我的解决方案（手写笔）：

```
$borderWidth 1px
$textColour black

$double-borders
    &:after
        content ""
        position absolute
        top 100%
        width 5.7em
        right 0
        border-top ($borderWidth * 3) double $textColour

.double-underlined
    @extend $double-borders 
```

请注意，宽度必须是硬编码的（在这种情况下`5.7em`. 如果这不是所需的结果，您也可以使用`border-bottom`上面提到的技术。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-10-17T09:21:43.337

```
<h1 style="text-decoration: underline double;"><u>About Us</u></h1> 
```

仅当您想在 HTML 中添加双下划线时，这才有效。

# asp.net-mvc - TreeView 在呈现的 HTML 中在 ID 之前添加 GUID

> ID：15643617
> 
> 赞同：0
> 
> 时间：2013-03-26T17:26:59.660
> 
> 标签：asp.net-mvc, treeview

在带有 aspx 视图的 .NET MVC 项目中工作。我有这个树视图的部分视图：

```
<%    
 TreeNode treeNode = Model.TreeNode;   
 treeNode.SelectAction = TreeNodeSelectAction.None;
 tv1.Nodes.Add(treeNode);
 tv1.ExpandAll();
%>

<form runat="server" id="form1">
 <asp:TreeView runat="server" ID="tv1"  ShowLines="true" EnableClientScript="true">
 </asp:TreeView>
</form> 
```

但是呈现一个带有 id 的 div 前面有一个 guid 搞砸了 JavaScript 代码以进行展开/折叠（这意味着它不起作用）。为什么？

```
<div id="46ea7e79-e351-46fa-93cc-597e7cfe280b_tv1">
 <table style="border-width:0;" cellpadding="0" cellspacing="0">
  <tbody><tr>
   <td><a id="46ea7e79-e351-46fa-93cc-597e7cfe280b_tv1n0" href="...">..</a></td>
   <td><span id="46ea7e79-e351-46fa-93cc-597e7cfe280b_tv1t0">...</span></td>
  </tr></tbody>
  ...
 </table>
</div> 
```

我正在使用 Ajax 加载部分视图并将内容附加到 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:39:33.440

我相信 GUID 来自 MVC Web 窗体视图引擎，它为创建的 ASP.NET 页面提供随机 ID。在 Web 窗体中，控件 ID 是分层的，因此控件将在其前面附加其父控件的 ID（在这种情况下，页面是祖先）。我不记得它为什么这样做，但我认为这是为了解决一些错误。

话虽如此，在 MVC 中绝对不支持将 a`<form runat="server">`与 ASP.NET Web 窗体控件一起使用。`TreeView`因此，即使您修复了 GUID 问题，仍然不支持在 MVC 中使用 Web 窗体控件。

# c# - 使用 WinForms MDI 子窗口跟随 DRY

> ID：15643619
> 
> 赞同：0
> 
> 时间：2013-03-26T17:27:04.340
> 
> 标签：c#, winforms, dry, mdi

所以我正在使用 WinForms 在 C# 中构建一个 MDI 应用程序。在这种情况下，我一生都无法弄清楚如何遵循 DRY。我正在使用我的主菜单条中的工具条菜单项打开新的 MDI 子项。我重用了“NewChild”方法作为每个事件处理程序。我试图不必为每个子窗口重复自己，因为它们都遵循相同的实例化模式。

我研究了泛型并使用了 Type 类，但它并没有真正让我到达我想要的地方。理想情况下，我只想说

```
 // etc...
    TypeOfForm = ConfigurationForm;
}

new TypeOfForm(); 
```

但我不认为这种丢失的语言结构存在。

```
public partial class MainForm : Form
{
    private AboutForm aboutForm;
    private ConfigurationForm configForm;
    private ResultsForm resultForm;
    private LogForm logForm;

    private void NewChild(object sender, EventArgs e)
    {
        Form newForm;

        if (sender == testConfigurationToolStripMenuItem)
        {
            if (configForm == null)
            {
                configForm = new ConfigurationForm();
            }
            newForm = configForm;
        }
        else if (sender == resultsToolStripMenuItem)
        {
            if (resultForm == null)
            {
                resultForm = new ResultsForm();
            }
            newForm = resultForm;
        }
        else if (sender == logToolStripMenuItem)
        {
            if (logForm == null)
            {
                logForm = new LogForm();
            }
            newForm = logForm;
        }
        else
        {
            return;
        }

        newForm.MdiParent = this;
        newForm.Disposed += new EventHandler(ChildDisposed);
        newForm.Show();
    }
} 
```

在这种情况下实施 DRY 的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:48:54.317

我会不惜一切代价避免检查类型。它确实使代码混乱。

你真的想为这个通用代码使用泛型：

```
// for multiple instance forms (and instantiating a "singleton" form)
private void AddNewChild<T>() where T: Form
{
    T newForm = new T();
    newForm.MdiParent = this;
    newForm.Disposed += new EventHandler(ChildDisposed);
    newForm.Show();   
}

// for "singleton" forms
private void ActivateChild<T>() where T: Form
{
    // off-the-cuff guess, this line may not work/compile
    var child = this.MdiChildren.OfType<T>().FirstOrDefault();

    if (child == null) 
    {
        AddNewChild<T>();
    }
    else
    {
        child.Show();
    }
}

// usage
logToolStripMenuItem.Click += (s,e) => ActivateChild<LogForm>();
testConfigurationToolStripMenuItem.Click += (s,e) => ActivateChild<ConfigurationForm>();
multipleInstanceFormMenuItem.Click += (s,e) => AddNewChild<FormX>();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:04:06.273

这里有一个建议：

使用工具条对象（或使用 Tag 属性）及其匹配的表单或表单类型制作字典

```
// you can't use the UI controls before Init, you could use their Tags
// so this should be considered pseudo code
private Dictionary<string, Type> ToolstripForms = new Dictionary<string, Type>
{
    { testConfigurationToolStripMenuItem, typeof(ConfigurationForm) }, 
    { resultsToolStripMenuItem, typeof(ResultsForm) }, 
}; 
```

并在您的 NewForm 方法中：

```
private void NewChild(object sender, EventArgs e)
{
    Form newForm = null;

    // some casting and exception handling would go well here
    if (sender != null && ToolstripForms.ContainsKey(sender)) // or sender.Tag?
    {
        newForm = Activator.CreateInstance(ToolstripForms[sender]) as Form;
    }
    ...
} 
```

您可能需要一种方法来确定表单是否已经打开并关注它，而不是每次都打开一个新的，但这取决于您。一种方法是使用一对对象作为该字典中的值 - 类型和现有实例，尽管其他方法可能看起来更好。

# java - 标识符预期错误 (Java)

> ID：15643620
> 
> 赞同：0
> 
> 时间：2013-03-26T17:27:09.680
> 
> 标签：java, class, compiler-errors, identifier

我是编程新手，可以伸出援助之手。我创建了一个“Person”类和一个 TestPerson 文件来测试它（是的，这是一个作业。）

我在第 34-36 行（在设置器中）收到三个错误“预期标识符”。显然，这是一个新手错误，但我似乎无法弄清楚。任何帮助，将不胜感激。提前致谢。

```
/******************************************************************
*     program name:      Person.java
*     author:           Nichol Albertson
*     remarks:          describes a Person object
      Date:             3/26/13
********************************************************************/
import java.text.*;

class Person {
    /**********************************************
     *  Local Variables
     ******************************************/
    private String lastName;
    private String firstName;
    private String birthday;

    /**********************************
        *   constructors - just a method
        ***********************************/

    public Person(String lastName, String firstName) {
        setLastName();
        setFirstName();
        setBirthday();
    }

    public Person(String lastName, String firstName, String birthday) {
        initialize(lastName, firstName, birthday);
    }

    /**********************************
    *   set methods  (setters)
    ***********************************/
    public void setLastName(lastName);
    public void setFirstName(firstName);
    public void setBirthday(birthday);

    /**********************************
    *   get methods  (getters)
    ***********************************/
    public String getLastName() {
        return lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getBirthday() {
        return birthday;
    }

    /*******************************
    * other methods
    ********************************/
    public String getFirstLast() {
        System.out.println(firstName + " " + lastName);
    }

    public String getLastFirst() {
        System.out.println(lastName + ", " + firstName);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:29:04.870

您需要为每个 setter 方法中的参数提供一个类型。该类型应与您尝试设置的实例变量的类型相匹配。

此外，您应该为您的 setter 方法提供一个带大括号的方法体`{`，`}`在其中将参数值分配给您的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:29:53.160

由于以下几行而显示错误：

```
public void setLastName(lastName);
public void setFirstName(firstName);
public void setBirthday(birthday); 
```

`Person`既不是`abstract class`也不是`interface`。确实是`concrete class`这样。你不能只在`concrete`类中声明方法。您还必须提供方法体。这可以通过这种方式进行更改：

```
public void setLastName(String lastName){ this.lastName = lastName;}
public void setFirstName(String firstName){ this.firstName = firstName;}
public void setBirthday(String birthday){ this.birthday = birthday;} 
```

此外，以下方法定义完全错误：

```
public String getFirstLast() {
    System.out.println(firstName + " " + lastName);
}

public String getLastFirst() {
    System.out.println(lastName + ", " + firstName);
} 
```

上述两种方法都有返回类型`String`，但您没有返回任何内容。这也是您的代码中的错误。它们应定义如下：

```
public String getFirstLast() {
    return firstName + " " + lastName;
}

public String getLastFirst() {
    return lastName + ", " + firstName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:32:47.850

```
public void setLastName(lastName);
public void setFirstName(firstName);
public void setBirthday(birthday); 
```

如果类是普通类，既不是接口也不是抽象类，所以方法必须有body，另外需要提到变量lastName、firstName和birthday的类型。

```
 public void setLastName(String lastName)
   {
       //method's body
   } 
```

# php - 将 Ushahidi CMS 迁移到新服务器

> ID：15643624
> 
> 赞同：0
> 
> 时间：2013-03-26T17:27:42.573
> 
> 标签：php, mysql, content-management-system, migrate

我刚刚在我的服务器上安装了[Ushahidi](http://en.wikipedia.org/wiki/Ushahidi)，配置了站点并创建了一些用户和报告。**现在，我想将我的平台从我的“localhost”服务器迁移到一个新的“公共”服务器**，**我想，我应该做的是将我的 Ushahidi 数据库迁移到新服务器，然后复制我的 Ushahidi 文件夹**。我不太确定，所以我请求你的帮助，一个明智的答案，也许你们中的一些人以前做过这个任务，可以给我一些提示，让我的方式变得光明。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:06:57.963

我只是想出了一种执行任务的方法，只需创建一个 SQL 脚本将我的数据库导出到新服务器，然后安装我需要的所有 php-apache 模块，将我的应用程序文件夹复制到新的 Web 服务器目录中，重新启动服务器瞧，它起作用了！

# ios - 缩放 CGPath 以适应 UIVIew

> ID：15643626
> 
> 赞同：13
> 
> 时间：2013-03-26T17:27:44.437
> 
> 标签：ios, uiview, core-graphics, cgpath, cashapelayer

我需要知道如何缩小或放大 CGPath 以适应 UIView？

将背景颜色设置为黄色，以便清楚地看到视图

```
self.frame = CGRectMake(0, 0, 181, 154);
self.backgroundColor = [UIColor yellowColor]; 
```

绘制 CAShapeLayer

```
CAShapeLayer *shape = [CAShapeLayer layer];
shape.path = aPath;

shape.strokeColor = [[UIColor blueColor] CGColor];
shape.lineWidth = 5;
shape.fillColor = [[UIColor clearColor] CGColor];

[self.layer addSublayer:shape]; 
```

然后我得到这个： ![在此处输入图像描述](../Images/d1b8a8549646f93f23c997795e625e85.png)

我想要的是这样的： ![在此处输入图像描述](../Images/a76c2ec3e7b8ba65c450c197eb603e96.png)

谢谢开发者:)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-10T21:30:46.850

我假设您想要完全填充（不扭曲）形状以适合您的视图。我还假设您已经有一个带有路径的形状层，因为问题被标记为 CAShapeLayer。

* * *

在这种情况下，您将获得形状图层路径的边界框并计算适当的比例因子以应用于路径。

根据形状的纵横比和它应该适合的视图，宽度或高度决定了比例因子。

获得比例因子后，您将创建一个变换以应用于路径。由于路径可能不是从 (0,0) 开始，您还可以将变换中的路径转换（移动）到边界框的原点。

如果您希望新路径位于视图的中心，则需要计算移动它的距离。如果您不需要它，您可以注释掉该代码，但我也将它包含在其他阅读此答案的人中。

最后你有一个新的路径，所以你要做的就是创建一个新的形状层，分配路径，适当地设置它的样式并将它添加到视图中。

```
// I'm assuming that the view and original shape layer is already created
CGRect boundingBox = CGPathGetBoundingBox(shapeLayer.path);

CGFloat boundingBoxAspectRatio = CGRectGetWidth(boundingBox)/CGRectGetHeight(boundingBox);
CGFloat viewAspectRatio = CGRectGetWidth(viewToFitIn.frame)/CGRectGetHeight(viewToFitIn.frame);

CGFloat scaleFactor = 1.0;
if (boundingBoxAspectRatio > viewAspectRatio) {
    // Width is limiting factor
    scaleFactor = CGRectGetWidth(viewToFitIn.frame)/CGRectGetWidth(boundingBox);
} else {
    // Height is limiting factor
    scaleFactor = CGRectGetHeight(viewToFitIn.frame)/CGRectGetHeight(boundingBox);
}

// Scaling the path ...
CGAffineTransform scaleTransform = CGAffineTransformIdentity;
// Scale down the path first
scaleTransform = CGAffineTransformScale(scaleTransform, scaleFactor, scaleFactor);
// Then translate the path to the upper left corner
scaleTransform = CGAffineTransformTranslate(scaleTransform, -CGRectGetMinX(boundingBox), -CGRectGetMinY(boundingBox));

// If you want to be fancy you could also center the path in the view
// i.e. if you don't want it to stick to the top.
// It is done by calculating the heigth and width difference and translating
// half the scaled value of that in both x and y (the scaled side will be 0)
CGSize scaledSize = CGSizeApplyAffineTransform(boundingBox.size, CGAffineTransformMakeScale(scaleFactor, scaleFactor));
CGSize centerOffset = CGSizeMake((CGRectGetWidth(viewToFitIn.frame)-scaledSize.width)/(scaleFactor*2.0),
                                 (CGRectGetHeight(viewToFitIn.frame)-scaledSize.height)/(scaleFactor*2.0));
scaleTransform = CGAffineTransformTranslate(scaleTransform, centerOffset.width, centerOffset.height);
// End of "center in view" transformation code

CGPathRef scaledPath = CGPathCreateCopyByTransformingPath(shapeLayer.path,
                                                          &scaleTransform);

// Create a new shape layer and assign the new path
CAShapeLayer *scaledShapeLayer = [CAShapeLayer layer];
scaledShapeLayer.path = scaledPath;
scaledShapeLayer.fillColor = [UIColor blueColor].CGColor;
[viewToFitIn.layer addSublayer:scaledShapeLayer];

CGPathRelease(scaledPath); // release the copied path 
```

在我的示例代码（和形状）中，它看起来像这样

![在此处输入图像描述](../Images/d3e6e87e8a36148ac96a4c3604c80197.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-25T12:55:45.183

David Rönnqvist 答案的 Swift 4.0 版本

```
 func resizepath(Fitin frame : CGRect , path : CGPath) -> CGPath{

            let boundingBox = path.boundingBox
            let boundingBoxAspectRatio = boundingBox.width / boundingBox.height
            let viewAspectRatio = frame.width  / frame.height
            var scaleFactor : CGFloat = 1.0
            if (boundingBoxAspectRatio > viewAspectRatio) {
                // Width is limiting factor

                scaleFactor = frame.width / boundingBox.width
            } else {
                // Height is limiting factor
                scaleFactor = frame.height / boundingBox.height
            }

            var scaleTransform = CGAffineTransform.identity
            scaleTransform = scaleTransform.scaledBy(x: scaleFactor, y: scaleFactor)
            scaleTransform.translatedBy(x: -boundingBox.minX, y: -boundingBox.minY)

        let scaledSize = boundingBox.size.applying(CGAffineTransform (scaleX: scaleFactor, y: scaleFactor))
       let centerOffset = CGSize(width: (frame.width - scaledSize.width ) / scaleFactor * 2.0, height: (frame.height - scaledSize.height) /  scaleFactor * 2.0 )
        scaleTransform = scaleTransform.translatedBy(x: centerOffset.width, y: centerOffset.height)
        //CGPathCreateCopyByTransformingPath(path, &scaleTransform)
        let  scaledPath = path.copy(using: &scaleTransform)

        return scaledPath!
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-07T07:51:20.813

Swift 5 版本的 David Rönnqvist，基于 Tarek 的回答，但经过重构并修复了`scaleFactor * 2`错误：

```
extension CGPath {
    func resized(to rect: CGRect) -> CGPath {
        let boundingBox = self.boundingBox
        let boundingBoxAspectRatio = boundingBox.width / boundingBox.height
        let viewAspectRatio = rect.width / rect.height
        let scaleFactor = boundingBoxAspectRatio > viewAspectRatio ?
            rect.width / boundingBox.width :
            rect.height / boundingBox.height

        let scaledSize = boundingBox.size.applying(CGAffineTransform(scaleX: scaleFactor, y: scaleFactor))
        let centerOffset = CGSize(
            width: (rect.width - scaledSize.width) / (scaleFactor * 2),
            height: (rect.height - scaledSize.height) / (scaleFactor * 2)
        )

        var transform = CGAffineTransform.identity
            .scaledBy(x: scaleFactor, y: scaleFactor)
            .translatedBy(x: -boundingBox.minX + centerOffset.width, y: -boundingBox.minY + centerOffset.height)

        return copy(using: &transform)!
    }
} 
```

# c# - LINQ：过滤子对象

> ID：15643627
> 
> 赞同：0
> 
> 时间：2013-03-26T17:27:44.940
> 
> 标签：c#, linq, entity-framework, entity-framework-5

通过实体框架访问数据库时，我有三个可用的实体：

*   stt_dictionary
*   stt_concept
*   stt_term

这些实体中的每一个都具有第四个实体 stt_change_log 的集合。

例如，

```
stt_dictionary.stt_change_log = ICollection<stt_change_log> 
```

前 3 个元素与 stt_change_log 之间的关系是

```
stt_change_log.element_id = (stt_dictionary | stt_concept | stt_term).id; 
```

但是，由于 stt_dictionary、stt_concept 和 stt_term 的 ID 类型均为*int*，因此还需要以下内容：

```
stt_change_log.element_type_id = (7 | 8 | 9) 
```

现在，当我运行如下查询时，它返回具有指定 ID 的所有 stt_change_log 实体，这意味着如果我在 stt_dictionary.id = 1 时想要 stt_change_log 实体，我还会获得与 stt_concept 和 stt_term 实体相关的 stt_change_log 条目，其 ID 也= 1。换句话说，stt_change_log 集合需要额外的过滤。

```
var daoDictionary = (from d in db.stt_dictionary
                         .Include("stt_change_log.stt_change_types")
                     where d.id == id
                     select d).FirstOrDefault(); 
```

如何通过为 stt_change_log 集合中的每个项目指定 element_type_id 属性的值来过滤 stt_change_log 实体？

我还要补充一点，我的意图是在单个查询中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:07:40.237

您最好的选择是为您的日志实体使用逐层表 (TBH) 继承映射。您将定义一个基本实体 stt_change_log，然后为每种类型的日志派生一个实体类。stt_change_type 将是鉴别器。

然后，您的每个“主要”实体都会引用特定于该实体的日志类型，并且过滤会神奇地为您完成；）

阅读以下教程以开始使用：

[http://msdn.microsoft.com/en-us/data/jj618292](http://msdn.microsoft.com/en-us/data/jj618292)

请注意，在您的情况下，您不需要派生实体中的任何其他属性。如果您先使用代码，请先搜索“按层次结构代码表”；这是一个快速准备：http: [//blogs.msdn.com/b/wriju/archive/2011/05/17/code-first-ef-4-1-table-per-hierarchy.aspx](http://blogs.msdn.com/b/wriju/archive/2011/05/17/code-first-ef-4-1-table-per-hierarchy.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:31:58.963

不幸的是 .Include 不允许过滤。

您可以[使用投影](https://stackoverflow.com/a/5666403/141172)来执行过滤服务器大小，也可以根据需要延迟加载项目。

您还可以[投票支持该功能](http://entityframework.codeplex.com/workitem/47)在未来包含。

# plone - 如何为 z3cform 创建一个新的 contenttreewidget

> ID：15643628
> 
> 赞同：3
> 
> 时间：2013-03-26T17:27:47.370
> 
> 标签：plone, z3c.form

我正在尝试覆盖用于相关项目的小部件（敏捷性所以 z3cform），它是 from plone.formwidget.contenttree.widget import MultiContentTreeWidget

我遇到的问题是我不明白为什么我的示例尝试找到 IDataConverter 的组件，其中没有用于 contenttree 小部件的 IDataConverter 并且它是父级。

代码是：

```
#zope
from zope import interface
import z3c.form.interfaces
import z3c.form.widget
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

#plone
from plone.formwidget.contenttree.interfaces import IContentTreeWidget
from plone.formwidget.contenttree.widget import MultiContentTreeWidget
from plone.app.relationfield.widget import RelationListDataManager

#internal

class DatalistManager(RelationListDataManager):
    pass

class IMultiDatalistWidget(IContentTreeWidget):
    """Datalist widget marker for z3c.form """

class MultiDatalistWidget(MultiContentTreeWidget):
    interface.implementsOnly(IMultiDatalistWidget)
    input_template = ViewPageTemplateFile('templates/datalist_input.pt')

    klass = u'html5-datalist-multiselection-widget'
    js_template = """\
    (function($) {
        $().ready(function() {
            console.log('autocomplete ready ?');
        });
    })(jQuery);
    """

    def js_extra(self):
        return ""

@interface.implementer(z3c.form.interfaces.IFieldWidget)
def MultiDatalistFieldWidget(field, request):
    """IFieldWidget factory for DatalistWidget."""
    return z3c.form.widget.FieldWidget(field, MultiDatalistWidget(request)) 
```

和zcml：

```
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:z3c="http://namespaces.zope.org/z3c"
    i18n_domain="collective.z3cform.html5widgets">

    <include package="plone.app.relationfield" />

    <!--  TRY TO OVERRIDE IRelationList default from plone.app.relationfield -->

    <adapter factory=".widget_datalist.MultiDatalistFieldWidget"
           for="z3c.relationfield.interfaces.IRelationList
                .layer.Layer"
           />

</configure> 
```

如果我正在尝试小部件，我有以下回溯：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module plone.z3cform.layout, line 66, in __call__
  Module plone.z3cform.layout, line 50, in update
  Module z3c.form.form, line 208, in update
  Module plone.z3cform.patch, line 21, in BaseForm_update
  Module z3c.form.form, line 150, in update
  Module z3c.form.form, line 134, in updateWidgets
  Module z3c.form.field, line 277, in update
  Module z3c.formwidget.query.widget, line 183, in update
  Module z3c.formwidget.query.widget, line 230, in updateQueryWidget
  Module z3c.form.browser.checkbox, line 45, in update
  Module z3c.form.browser.widget, line 170, in update
  Module z3c.form.widget, line 221, in update
  Module z3c.form.widget, line 130, in update
TypeError: ('Could not adapt', <MultiDatalistWidget 'form.widgets.relatedItems'>, <InterfaceClass z3c.form.interfaces.IDataConverter>) 
```

您可以在 github 上找到存储库：[https ://github.com/toutpt/collective.z3cform.html5widgets](https://github.com/toutpt/collective.z3cform.html5widgets)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T22:28:59.893

I once overrode the widget with this class to enable an upload ability for a webmailer. I think you want to override the generation of the json to make this jQuery compatible. Thanks a lot for that work.

Here is my class: [http://pastie.org/7923172](http://pastie.org/7923172)

Hope it helps.

# ruby-on-rails - 将所有文件下载到 Heroku 中的 zip

> ID：15643639
> 
> 赞同：0
> 
> 时间：2013-03-26T17:28:34.903
> 
> 标签：ruby-on-rails, heroku, amazon-s3, zip

我一直在用 Heroku 敲我的头，同时试图下载一个包含我所有收据文件数据的 zip 文件。

这些文件存储在 amazon s3 上，在我的开发机器上一切正常。

我认为它与 Tempfile 有关，并放弃了以前的解决方案，因为 heroku 对其文件系统有一些严格的政策，所以我使用了 tmp 文件夹，但问题似乎并不存在。我已经尝试直接从 s3（使用 openUri）加载到 zip 文件，但它似乎在 Heroku 上也不起作用。

我的 Heroku 代码没有将文件加载到 zip 可能有什么问题？

这是我的模型方法：

```
def zip_receipts(search_hash=nil)

  require 'zip/zip'
  require 'zip/zipfilesystem'

  t=File.open("#{Rails.root}/tmp/#{Digest::MD5.hexdigest(rand(12).to_s)}_#{Process.pid}",'w')

 # t = Tempfile.new(Digest::MD5.hexdigest(rand(12).to_s))     

  # Give the path of the temp file to the zip outputstream, it won't try to open it as an archive.
  Zip::ZipOutputStream.open(t.path) do |zos|
   logger.debug("search hash Zip: #{search_hash.inspect}")
     self.feed(search_hash).each do |receipt|
      begin
        require 'open-uri'
        require 'tempfile'

        #configures filename
        filen = File.basename(receipt.receipt_file_file_name)
        ext= File.extname(filen)
        filen_noext = File.basename(receipt.receipt_file_file_name, '.*')
        filen=filen_noext+SecureRandom.hex(10)+ext
        logger.info("Info Zip - Filename: #{filen}")
        # Create a new entry on the zip file
        zos.put_next_entry(filen)
     #    logger.info("Info Zip - Added entry: #{zos.inspect}")
        # Add the contents of the file, reading directly from amazon
        tfilepath= "#{Rails.root}/tmp/#{File.basename(filen,ext)}_#{Process.pid}"

      open(tfilepath,"wb") do |file|
        file << open(receipt.authenticated_url(:original),:ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE).read
      end

        zos.print IO.binread tfilepath
      #   logger.info("Info Zip - Extracted from amazon: #{zos.inspect}")
        rescue Exception => e
          logger.info("exception #{e}")
        end  # closes the exception begin
     end #closes receipts cycle
  end #closes zip file stream cycle
  # The temp file will be deleted some time...
   t.close

  #returns the path for send file controller to act
   t.path

  end 
```

我的控制器：

```
 def download_all
    @user = User.find_by_id(params[:user_id])

    filepath = @user.zip_receipts
    # Send it using the right mime type, with a download window and some nice file name.
    send_file(filepath,type: 'application/zip', disposition: 'attachment',filename:"MyReceipts.zip")
  end 
```

我还写了我的视图和路线，以便它可以为任何其他试图实现下载所有功能的人提供服务

路线.rb

```
resources :users do
 post 'download_all'
end 
```

我的观点

```
<%= link_to "Download receipts", user_download_all_path(user_id:user.id), method: :post %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:43:09.790

问题似乎出在搜索哈希和 sql 查询上，而不是代码本身。出于某种原因，收据会被列出，但不会被下载。所以这是一个完全不同的问题

最后我有这个模型的代码

```
 def zip_receipts(search_hash=nil)

  require 'zip/zip'
  require 'zip/zipfilesystem'

  t=File.open("#{Rails.root}/tmp/MyReceipts.zip_#{Process.pid}","w")

 # t = Tempfile.new(Digest::MD5.hexdigest(rand(12).to_s))
  #"#{Rails.root}/tmp/RecibosOnline#{SecureRandom.hex(10)}.zip"

 puts "Zip- Receipts About to enter"
  # Give the path of the temp file to the zip outputstream, it won't try to open it as an archive.
  Zip::ZipOutputStream.open(t.path) do |zos|
     self.feed(search_hash).each do |receipt|
      begin
        require 'open-uri'
        require 'tempfile'

        filen = File.basename(receipt.receipt_file_file_name)
        ext= File.extname(filen)
        filen_noext = File.basename(receipt.receipt_file_file_name, '.*')
        filen=filen_noext+SecureRandom.hex(10)+ext
      #  puts "Info Zip - Filename: #{filen}"
        # Create a new entry on the zip file
        zos.put_next_entry(filen)
        zos.print open(receipt.authenticated_url(:original),:ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE).read
        rescue Exception => e
          puts "exception #{e}"
        end  # closes the exception begin
     end #closes receipts cycle
  end #closes zip file stream cycle
  # The temp file will be deleted some time...
   t.close

  #returns the path for send file controller to act
   t.path

  end 
```

# javascript - div 内的元素不是居中对齐

> ID：15643641
> 
> 赞同：0
> 
> 时间：2013-03-26T17:28:38.093
> 
> 标签：javascript, html, css

如何使 div 内的容器居中对齐....我给了margin left and right auto，但它不起作用....在iphone布局中它变成居中对齐，提供下面的代码....

[http://jsfiddle.net/2a5mW/1/embedded/result/](http://jsfiddle.net/2a5mW/1/embedded/result/)

```
<div class="hide fade in" id="signup-modal" conduit_fixed_handled="true" conduit_orig_mtop_val="-306" style=" display: block;" aria-hidden="false">
    <div class="page-title">Add New Vendor</div>
    <div>
                    <span>Vendor no</span>

100012                  <span style="">Starting no:</span><span style="color: red;">100000</span>
                </div>

    <h4 class="billingAddress">Billing Address</h4>

    <form method="POST" autocomplete="off" id="auth-form">
        <input type="hidden" name="usertype" value="3" readonly="">
        <fieldset>      
            <input type="text" placeholder="Company Name " name="fullname" maxlength="30" required="required" id="id_username">
            <input type="text" placeholder="Contact Name" name="company" maxlength="30" required="required" id="id_company">        
            <input type="text" placeholder="Address1" name="email" maxlength="75" required="required" id="id_email">
            <input type="password" placeholder="Address2" name="password" maxlength="16" required="required" id="id_password">
            <input type="password" placeholder="Address3" name="repassword" required="required" id="id_repassword">
            <input type="text" placeholder="City " name="fullname" maxlength="30" required="required" id="id_username">
            <div class="controls" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:41:55.740

```
#signup-modal, #login-modal {
width: 300px;
background: none repeat scroll 0% 0% rgb(255, 255, 255);
border-radius: 10px 10px 10px 10px;
overflow: hidden;
margin-bottom: 40px;
box-shadow: 0px 1px 0px white inset;
padding: 0px 40px;
margin-left: auto;
margin-right: auto;
} 
```

这适用于 Firefox 和 Chrome。

# php - 非常奇怪的 iOS /PHP - 'if' 语句适用于 iOS 但不适用于浏览器

> ID：15643642
> 
> 赞同：0
> 
> 时间：2013-03-26T17:28:39.273
> 
> 标签：php, html, ios, objective-c, xcode

我在这里很困惑。基本上，我有一个 iOS 应用程序，可以将字符串上传到我的蓝色主机服务器上的 .php 文件。

```
-(IBAction)plus{
if (counter>=0 && counter<240) {
counter=counter+1;
count.text = [NSString stringWithFormat:@"%i",counter];

    NSString* myString = [NSString stringWithFormat:@"%d",counter];

    NSString *receipt1 = @"This should work?";

    NSString *post =[NSString stringWithFormat:@"receipt=%@",receipt1];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding 
allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL 
URLWithString:@"http://www.ryanmediaworks.com/validation.php"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-
Type"];
    [request setHTTPBody:postData];

    NSHTTPURLResponse* urlResponse = nil;
    NSError *error = [[NSError alloc] init];
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request 
returningResponse:&urlResponse error:&error];
    NSString *result = [[NSString alloc] initWithData:responseData   
encoding:NSUTF8StringEncoding];
    NSLog(@"Response Code: %d", [urlResponse statusCode]);

    if ([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 600)
    {
        NSLog(@"Response: %@", result);
    }

}

} 
```

这是我的 .php 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>I hope this works!</title>
</head>
<body>
    <?php

if(_POST)
    {
 if($_POST['receipt'] == 'This should work?')
        {
            echo "post successfull";
        }
        else
    {
        echo "not post";
        }
    }
?>
</body>
</html> 
```

这是奇怪的部分......这是我的浏览器上的内容：

```
<head>
    <title>I hope this works!</title>
</head>
<body>
    not post</body>
</html> 
```

但是这里是 Xcode 中的输出：

```
<head>
    <title>I hope this works!</title>
</head>
<body>
    post successfull</body>
</html> 
```

似乎'if'语句适用于xcode但不适用于浏览器？换句话说，正确的字符串被上传到 .php，因此返回短语 'post sucessfull'。但是，在浏览器中查看时该短语不存在？

我真的很感激这方面的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:48:33.657

似乎很奇怪。尝试这个

```
if(isset($_POST['receipt'])
{
 if($_POST['receipt'] == 'This should work?')
    {
        echo "post successfull";
    }
    else
{
    echo "not post";
    }
}
?> 
```

此外，当您检查浏览器时，是否是在您从同一浏览器发出发布请求（例如通过表单 POST）之后？

您的 iOS 代码正在发帖，这就是它成功返回的原因。如果您只是在同一设备/浏览器上加载 .php 文件而没有在该 .php 页面上进行任何类型的发布，它将显示“未发布”。

# javascript - 时间和日期时钟

> ID：15643644
> 
> 赞同：-2
> 
> 时间：2013-03-26T17:28:44.717
> 
> 标签：javascript, html, css

有谁知道当前时间选项卡下的[时间和日期网站中的时间是如何完成的？](http://www.timeanddate.com/)

我复制了 CSS 和 JavaScript 并将其放在一起，但时间与时间和日期网站不同：[我的网站](http://www.interfaithmedical.com/checksite/test/test.htm)

JavaScript：

```
et=1364486376;function f0(d){return ld[d.getUTCDay()]+','+' '+lm[d.getUTCMonth()]+' '+d.getUTCDate()+','+' '+d.getUTCFullYear()+' at '+((d.getUTCHours()+11)%12+1)+':'+p2(d.getUTCMinutes())+':'+p2(d.getUTCSeconds())+' '+_ap(d);}
function f1(d){return ld[d.getUTCDay()]+','+' '+lm[d.getUTCMonth()]+' '+d.getUTCDate()+','+' '+d.getUTCFullYear()+' at '+p2(d.getUTCHours())+':'+p2(d.getUTCMinutes())+':'+p2(d.getUTCSeconds());}
function f2(d){return ((d.getUTCHours()+11)%12+1)+':'+p2(d.getUTCMinutes());}
function f3(d){return ''+p2(d.getUTCSeconds());}
function f4(d){return ''+_ap(d);}
function f5(d){return ld[d.getUTCDay()];}
function f6(d){return sm[d.getUTCMonth()]+' '+d.getUTCDate()+','+' '+d.getUTCFullYear();}
function f7(d){return ''+sm[d.getUTCMonth()];}
function f8(d){return ''+d.getUTCFullYear();}
function f9(d){return ''+d.getUTCDate();}
function f10(d){return sd1[d.getUTCDay()];}
cks={clk_hm:{t:[{o:-14400,a:'EDT',d:1}],f:f2},ij0:{t:[{o:-14400,a:'EDT',d:1}],f:f3},clk_am:{t:[{o:-14400,a:'EDT',d:1}],f:f4},ij1:{t:[{o:-14400,a:'EDT',d:1}],f:f5},ij2:{t:[{o:-14400,a:'EDT',d:1}],f:f6},cal_m:{t:[{o:-14400,a:'EDT',d:1}],f:f7},cal_y:{t:[{o:-14400,a:'EDT',d:1}],f:f8},cal_d:{t:[{o:-14400,a:'EDT',d:1}],f:f9},cal_w:{t:[{o:-14400,a:'EDT',d:1}],f:f10}};
lm=[];lm[2]='March';sm=[];sm[2]='Mar';ld=[];ld[2]='Tuesday';ld[3]='Wednesday';ld[4]='Thursday';ld[5]='Friday';sd1=[];sd1[2]='Tue';sd1[3]='Wed';sd1[4]='Thu';sd1[5]='Fri';
function _ap(d){var t=Math.floor(d.getTime()/1E3)%86400;if(t===0){return 'Midnight';}if(t==43200){return 'Noon';}if(t<43200){return 'AM';}return 'PM';} 
```

有人可以告诉我我必须修复或添加什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:31:26.127

你有网站的脚本吗？我相信下面需要一些动态代码，例如 JavaScript。

一个快速的谷歌将我带到这里，但可能会有更好的资源； [Javascript 的当前运行时间](http://www.dynamicdrive.com/forums/showthread.php?44981-Current-Running-Time-with-Javascript)

不管你怎么做，你都需要以某种方式每秒更新一次 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:46:01.393

即使我复制整个网站，单击`save as`桌面上的文件夹，时间脚本也不起作用。这清楚地表明，除了`JavaScript,CSS and HTML`，还有一些服务器端脚本（可能是 PHP），它会定期调用，因此时间是相应更新。

即使您从网站复制的代码也包含行

```
/scripts/tzq.php?type=homecity',1,'Set Home Location' 
```

文件在哪里`tzq.php`？因此，简单地复制 javascript 函数是行不通的。我建议，要么将您在网站上显示的时间存储在 javascript 变量中。

```
Eg:
var hh=12;
var mm=16
var ss=16 
```

并每隔一秒调用一次java-script函数并更新上述三个变量。或者编写一个从头开始显示当前服务器时间的 javascript 代码。

**timeanddate.com 也为开发者提供 API。你为什么不试试他们的** [API](http://www.timeanddate.com/services/api/)呢？

# ruby-on-rails - 你如何让 Will_paginate 正确显示洗牌数组的页面

> ID：15643647
> 
> 赞同：0
> 
> 时间：2013-03-26T17:28:48.233
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, will-paginate

我目前在 Rails 3.1 中使用 will_paginate 对数组进行分页

在#show 的控制器中

```
 @items = ["item1", "item2", "item3" ....... "item100"]

 @items.shuffle!
 @items.paginate(:page => params[:page], :per_page => 5) 
```

我面临的问题是每个页面看起来完全不同，即每次查看时项目的不同顺序。例如，如果您查看第 2 页并单击上一页返回第 1 页，第 1 页将显示不同的设置。我确信这是因为控制器中的随机播放。似乎每个页面视图都会生成一个新数组。有办法解决这个问题吗？可能将当前的@items 存储在会话中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:47:34.193

Try this:

```
 @items ||= ["item1", "item2", "item3" ....... "item100"].shuffle!
 @items.paginate(:page => params[:page], :per_page => 5) 
```

# mysql - 超时时间的简单代码

> ID：15643649
> 
> 赞同：0
> 
> 时间：2013-03-26T17:28:50.740
> 
> 标签：mysql, time, limit, alert, hour

我编写了一段代码来计算患者的等待时间，如下所示；

```
 $query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(CURTIME(), Arrival_time)),'%H hours') as Waiting_Time FROM Patient"; 
```

其中显示以下数据：

```
PatientID   Forename  Surname  Gender   Illness       Priority   Waiting Time
 625         Max       Courts    M      non-urgent    moderate    4 hours 
```

如示例所示；等候时间为4小时；`time`当 a为`MORE THAN`4 小时时，我需要一段代码来检测和提醒；回显警报。

我尝试过的示例代码；

```
if $waitingtime == >4 hours 
then echo "patient must be seen!" 
```

编辑完整代码

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(CURTIME(), Arrival_time)),'%H hours') as Waiting_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query");

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting Time</th>
</tr>";

while ($row = $result->fetch_object()){

 echo "<tr>
  <td>" . $row->PatientID . "</td>
  <td>" . $row->Forename . "</td>
  <td>" . $row->Surname . "</td>
  <td>" . $row->Gender . "</td>
  <td>" . $row->Illness . "</td>
  <td>" . $row->Priority . "</td>
  <td>" . $row->Waiting_Time . "</td>
  </tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:34:31.587

我正在使用 mysql_* 进行演示。您应该使用 mysqli_* 或 PDO。

```
$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(CURTIME(), Arrival_time)),'%H') as Waiting_Time FROM Patient";

$result = mysql_query($query);
$row = mysql_fetch_assoc($result);
if ($row['Waiting_Time '] > 4)
{
    echo "patient must be seen!"
} 
```

# java - 使用 BufferedReader 获取字符串输入

> ID：15643650
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:28:56.597
> 
> 标签：java

当我使用 BufferedReader 获取字符串输入时，例如：

```
String a=br.readLine(); 
```

然后当我输入：

```
 if(a=="hello")
    {//statements}
    else{....} 
```

那么即使用户输入 'hello' 作为字符串 a，它也不会执行 if 块中的语句，而只是跳转到 else。当我直接在方法的参数列表中输入字符串而不使用缓冲读取器时，我不会遇到这个问题。怎么了？以及如何在不遇到此问题的情况下使用缓冲读取器进行字符串输入？请帮助。ps 我的程序没有语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:29:43.970

用于`String#equals`检查`String`内容。`==`运算符用于比较引用`Object`。

```
if (a.equals("hello")) 
```

或避免`NPE`，最好使用

```
if ("hello".equals(a))) 
```

# c# - webservice的变化不会反映在客户端？

> ID：15643651
> 
> 赞同：0
> 
> 时间：2013-03-26T17:28:59.023
> 
> 标签：c#, winforms, linq-to-sql, data-binding

我正在使用 WCF-webservice 并`Linq-To-SQL`插入一条新记录。

但是，在 web 服务中，我设置了两个字段，`CreatedBy`并且`Created`，但即使我使用`ref`参数（如[MSDN 上所建议的](http://msdn.microsoft.com/en-us/library/ms733070.aspx)那样），更改也不会反映在客户端上。因此，当我调试服务时，设置了属性并正确插入了记录，但在调用方法中，对象的属性仍未设置。

这将在以后引起问题，例如，如果我尝试删除它，我会得到以下异常，`db.SubmitChanges()`因为这些列是 `non-null`：

> System.Data.SqlTypes.SqlTypeException：SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。

这是客户端的插入方法（winforms应用程序）：

```
private void Add_Status()
{
    using (var db = new ERP_ServiceClient())
    {
        var status = new Erp_ServiceReference.Status();
        status.Name = this.txtStatusNameAdd.Text;
        db.InsertStatus(status, this.IdUser);
        statusBindingSource.Add(status);
    }

    this.txtStatusNameAdd.Text = "";
    this.txtStatusNameAdd.Select();
} 
```

这是网络服务方法：

```
public void InsertStatus(ref Status status, int userID)
{
    using (var db = new ERPDataContext())
    {
        status.CreatedBy = userID;
        status.Created = DateTime.Now;
        db.Status.InsertOnSubmit(status);
        db.SubmitChanges();
    }
} 
```

我究竟做错了什么？我的 wcf、winforms 和 linq-to-sql 技能都生疏了（这就是我选择它们的原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:36:20.503

~~您不能在 Web 服务中通过引用传递。~~ 您可以返回该值。

```
public Status InsertStatus(Status status, int userID)
{
    using (var db = new ERPDataContext())
    {
        status.CreatedBy = userID;
        status.Created = DateTime.Now;
        db.Status.InsertOnSubmit(status);
        db.SubmitChanges();
        return status;
    }
}

private void Add_Status()
{
    using (var db = new ERP_ServiceClient())
    {
        var status = new Erp_ServiceReference.Status();
        status.Name = this.txtStatusNameAdd.Text;
        status = db.InsertStatus(status, this.IdUser);
        statusBindingSource.Add(status);
    }

    this.txtStatusNameAdd.Text = "";
    this.txtStatusNameAdd.Select();
} 
```

# iphone - 如何在矩形中放置一条线

> ID：15643652
> 
> 赞同：0
> 
> 时间：2013-03-26T17:29:00.987
> 
> 标签：iphone, ios, objective-c, math

我正在尝试将 python 算法（此处：[Extending a line segment to fit into a bounding box](https://stackoverflow.com/questions/7237004/extending-a-line-segment-to-fit-into-a-bounding-box)）转换为我的 iPhone 应用程序。但它仅在我的 startPoint.x > 然后 endPointx 时有效

这里要改变什么？我不明白。。

**如果我从左上角到右下角画一条线，它就可以了！但是，如果我从右上角到左下角画一条线，它就会失败。所以它只在一个方向上起作用..我想如果它从右到左我必须改变一些变量**

MIN 为 (0,0)，MAX 取决于设备，但对于 iPhone Retina (300,568)

```
 - (NSMutableArray *) extendAlgorithm:(CGPoint)start withEnd:(CGPoint)end withBorderMin:(CGPoint)min andBorderMax:(CGPoint)max {

    int x1 = (int) start.x;     int y1 = (int) start.y;
    int x2 = (int) end.x;       int y2 = (int) end.y;
    int xmin = (int) min.x;     int ymin = (int) min.y;
    int xmax = (int) max.x;     int ymax = (int) max.y;

    if(y1 == y2) {
        return [[NSMutableArray alloc] initWithObjects:
                [NSNumber numberWithDouble:xmin],
                [NSNumber numberWithDouble:y1],
                [NSNumber numberWithDouble:xmax],
                [NSNumber numberWithDouble:y1],
                nil];
    }

    if(x1 == x2) {
        return [[NSMutableArray alloc] initWithObjects:
                [NSNumber numberWithDouble:x1],
                [NSNumber numberWithDouble:ymin],
                [NSNumber numberWithDouble:x1],
                [NSNumber numberWithDouble:ymax],
                nil];
    }

    double y_for_xmin = y1 + (y2 - y1) * (xmin - x1) / (x2 - x1);
    double y_for_xmax = y1 + (y2 - y1) * (xmax - x1) / (x2 - x1);

    double x_for_ymin = x1  + (x2 - x1) * (ymin - y1) / (y2 - y1);
    double x_for_ymax = x1  + (x2 - x1) * (ymax - y1) / (y2 - y1);

    if(ymin <= y_for_xmin <= ymax) {

        if(xmin <= x_for_ymax <= xmax) {
            return [[NSMutableArray alloc] initWithObjects:
                    [NSNumber numberWithDouble:xmin],
                    [NSNumber numberWithDouble:y_for_xmin],
                    [NSNumber numberWithDouble:x_for_ymax],
                    [NSNumber numberWithDouble:ymax],
                    nil];
        }

        if(xmin <= x_for_ymin <= xmax) {
            return [[NSMutableArray alloc] initWithObjects:
                    [NSNumber numberWithDouble:xmin],
                    [NSNumber numberWithDouble:y_for_xmin],
                    [NSNumber numberWithDouble:x_for_ymin],
                    [NSNumber numberWithDouble:ymin],
                    nil];
        }
    }

    if(ymin <= y_for_xmax <= ymax) {

        if(xmin <= x_for_ymin <= xmax) {
            return [[NSMutableArray alloc] initWithObjects:
                    [NSNumber numberWithDouble:x_for_ymin],
                    [NSNumber numberWithDouble:ymin],
                    [NSNumber numberWithDouble:xmax],
                    [NSNumber numberWithDouble:y_for_xmax],
                    nil];
        }

        if(xmin <= x_for_ymax <= xmax) {
            return [[NSMutableArray alloc] initWithObjects:
                    [NSNumber numberWithDouble:x_for_ymax],
                    [NSNumber numberWithDouble:ymax],
                    [NSNumber numberWithDouble:xmax],
                    [NSNumber numberWithDouble:y_for_xmax],
                    nil];
        }
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:04:21.190

```
if (ymin <= y_for_xmin <= ymax) 
```

没有做你期望的事情（也许在 Python 中，但绝对不是在 C 中），你必须把它写成

```
if (ymin <= y_for_xmin && y_for_xmin <= ymax) 
```

我不知道你的算法是否涵盖所有情况，所以我尝试独立找到一个算法。这就是我得到的：

```
- (NSArray *) extendAlgorithm:(CGPoint)start withEnd:(CGPoint)end withBorderMin:(CGPoint)min andBorderMax:(CGPoint)max
{
    CGFloat u1 = MAXFLOAT;
    CGFloat u2 = -MAXFLOAT;
    CGFloat tmp;
    if (end.x != start.x) {
        tmp = (max.x - start.x)/(end.x - start.x);
        if (tmp > 0 && tmp < u1)
            u1 = tmp;
        else if (tmp < 0 && tmp > u2)
            u2 = tmp;
        tmp = (min.x - start.x)/(end.x - start.x);
        if (tmp > 0 && tmp < u1)
            u1 = tmp;
        else if (tmp < 0 && tmp > u2)
            u2 = tmp;
    }
    if (end.y != start.y) {
        tmp = (max.y - start.y)/(end.y - start.y);
        if (tmp > 0 && tmp < u1)
            u1 = tmp;
        else if (tmp < 0 && tmp > u2)
            u2 = tmp;
        tmp = (min.y - start.y)/(end.y - start.y);
        if (tmp > 0 && tmp < u1)
            u1 = tmp;
        else if (tmp < 0 && tmp > u2)
            u2 = tmp;
    }
    CGPoint newStart, newEnd;
    newStart.x = start.x + u2 * (end.x - start.x);
    newStart.y = start.y + u2 * (end.y - start.y);
    newEnd.x = start.x + u1 * (end.x - start.x);
    newEnd.y = start.y + u1 * (end.y - start.y);
    NSLog(@"%@, %@", NSStringFromCGPoint(newStart), NSStringFromCGPoint(newEnd));

    return [[NSArray alloc] initWithObjects:
            [NSNumber numberWithDouble:newStart.x],
            [NSNumber numberWithDouble:newStart.y],
            [NSNumber numberWithDouble:newEnd.x],
            [NSNumber numberWithDouble:newEnd.y],
            nil];
} 
```

（这个想法是考虑线

```
(x, y) = (start.x, start.y) + u * (end.x - start.x, end.y - start.y) 
```

然后确定参数`u1`，`u2`线穿过边界的位置。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:36:37.527

我没有检查有关算法的任何内容，但跳出来的是以下几行：

```
double y_for_xmin = y1 + (y2 - y1) * (xmin - x1) / (x2 - x1);
// ... 
```

该表达式的结尾是一个整数除法（您将 xmin、x1、x2 等转换为整数）。那些将有整数结果，被截断。因此，如果您期望像 1/2 == 0.5 这样的值，您会对那里的 (int)0 感到惊讶。

尝试将堆栈变量声明为 CGFloat，这就是它们在 CGPoint 结构中的方式。

# sql-server-2008 - 我需要找到前 30 天的每日最大值

> ID：15643656
> 
> 赞同：1
> 
> 时间：2013-03-26T17:29:08.557
> 
> 标签：sql-server-2008, max

我正在使用 Microsft SQL 2008。我需要找到前 30 天运行的单个 Daily Max 值。这是我目前正在使用的查询和我目前得到的示例结果。由于数据只会随着时间的推移而增加，我真的只需要当天的最后一个条目。我知道有不同的方法可以得到我正在寻找的东西我只需要一些帮助才能找到正确的方向。

```
SELECT HISTORY.STATION, HISTORY.NAME, HISTORY.VALUE, HISTORY.TIME
FROM DATA.dbo.HISTORY HISTORY
WHERE (HISTORY.NAME='KWMAXD') AND (HISTORY.TIME>= dateadd("Day",-30,getdate()))
ORDER BY HISTORY.TIME, HISTORY.NAME DESC

SYST    KWMAXD  49040   2013-02-24 12:59:00.000
SYST    KWMAXD  49040   2013-02-24 13:59:00.000
SYST    KWMAXD  49040   2013-02-24 14:59:00.000
SYST    KWMAXD  49040   2013-02-24 15:59:00.000
SYST    KWMAXD  49040   2013-02-24 16:59:00.000
SYST    KWMAXD  49040   2013-02-24 17:59:00.000
SYST    KWMAXD  49040   2013-02-24 18:59:00.000
SYST    KWMAXD  49040   2013-02-24 19:59:00.000
SYST    KWMAXD  49040   2013-02-24 20:59:00.000
SYST    KWMAXD  49040   2013-02-24 21:59:00.000
SYST    KWMAXD  49040   2013-02-24 22:59:00.000
SYST    KWMAXD  49040   2013-02-24 23:59:00.000
SYST    KWMAXD  28160   2013-02-25 00:59:00.000
SYST    KWMAXD  28160   2013-02-25 01:59:00.000
SYST    KWMAXD  28160   2013-02-25 02:59:00.000
SYST    KWMAXD  28160   2013-02-25 03:59:00.000
SYST    KWMAXD  28160   2013-02-25 04:59:00.000
SYST    KWMAXD  30110   2013-02-25 05:59:00.000
SYST    KWMAXD  33390   2013-02-25 06:59:00.000
SYST    KWMAXD  33390   2013-02-25 07:59:00.000
SYST    KWMAXD  33390   2013-02-25 08:59:00.000
SYST    KWMAXD  33390   2013-02-25 09:59:00.000
SYST    KWMAXD  33390   2013-02-25 10:59:00.000
SYST    KWMAXD  33390   2013-02-25 11:59:00.000
SYST    KWMAXD  33390   2013-02-25 12:59:00.000
SYST    KWMAXD  33390   2013-02-25 13:59:00.000
SYST    KWMAXD  33390   2013-02-25 14:59:00.000
SYST    KWMAXD  33390   2013-02-25 15:59:00.000
SYST    KWMAXD  36100   2013-02-25 16:59:00.000
SYST    KWMAXD  40650   2013-02-25 17:59:00.000
SYST    KWMAXD  47040   2013-02-25 18:59:00.000
SYST    KWMAXD  49650   2013-02-25 19:59:00.000
SYST    KWMAXD  49650   2013-02-25 20:59:00.000
SYST    KWMAXD  49650   2013-02-25 21:59:00.000
SYST    KWMAXD  49650   2013-02-25 22:59:00.000
SYST    KWMAXD  49650   2013-02-25 23:59:00.000
SYST    KWMAXD  43090   2013-02-26 00:59:00.000
SYST    KWMAXD  43090   2013-02-26 01:59:00.000
SYST    KWMAXD  43090   2013-02-26 02:59:00.000
SYST    KWMAXD  43600   2013-02-26 03:59:00.000
SYST    KWMAXD  45900   2013-02-26 04:59:00.000
SYST    KWMAXD  50900   2013-02-26 05:59:00.000
SYST    KWMAXD  55290   2013-02-26 06:59:00.000
SYST    KWMAXD  55290   2013-02-26 07:59:00.000
SYST    KWMAXD  55290   2013-02-26 08:59:00.000
SYST    KWMAXD  55290   2013-02-26 09:59:00.000
SYST    KWMAXD  55290   2013-02-26 10:59:00.000
SYST    KWMAXD  55290   2013-02-26 11:59:00.000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:34:52.027

您应该能够使用 SQL Server[排名功能](http://msdn.microsoft.com/en-us/library/ms189798.aspx)，例如`row_number()`：

```
select station,
  name,
  value,
  time
from
(
  SELECT h.STATION, h.NAME, h.VALUE, h.TIME,
    row_number() over(partition by cast(h.time as date) order by h.time desc) rn
  FROM HISTORY h
  WHERE (h.NAME='KWMAXD') 
    AND (h.TIME>= dateadd(DAY,-30,cast(getdate() as date)))
) src
where rn = 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e8ba5/4)

如果您想一次返回多个，则可以将其扩展到`partition`数据，因此查询将是：`name``date``name`

```
select station,
  name,
  value,
  time
from
(
  SELECT h.STATION, h.NAME, h.VALUE, h.TIME,
    row_number() over(partition by h.name, cast(h.time as date) order by h.time desc) rn
  FROM HISTORY h
  WHERE (h.TIME>= dateadd(DAY,-30,cast(getdate() as date)))
) src
where rn = 1; 
```

# sql - 具有百分比和聚合函数的 sql 查询

> ID：15643661
> 
> 赞同：0
> 
> 时间：2013-03-26T17:29:32.150
> 
> 标签：sql, aggregate-functions, aggregate

我正在尝试编写一个 sql 查询，其中我需要按县划分的分数数 > 3，然后对于该列表上的县，我需要生成分数 < 3 的房间百分比。所以我需要三列，县名称，# of各县得分 > 3，各县得分 < 3 的房间百分比

```
 SELECT County = c.Description, [Score > 3] = count(s.Score),  
  ((select count(room.Name) where s.Score< 3) /( select count(room.Name) ) * 100)
    FROM Sites AS s
    inner join Profiles as p on s.Profile_Id = p.Id
    inner join Counties as c on p.County_Id = c.Id
    inner join Rooms as room on s.Id = room.Site_Id
    where s.Score > 3
    Group By c.Description 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:36:41.663

利用`Cast`

```
SELECT County = c.Description, [Score > 3] = count(s.Score), 
    ( Cast(select count(room.Name) where s.Score < 3 ) as float / ( select count(room.Name) ) * 100)
    FROM Sites AS s
    inner join Profiles as p on s.Profile_Id = p.Id
    inner join Counties as c on p.County_Id = c.Id
    inner join Rooms as room on s.Id = room.Site_Id
    where s.Score > 3
    Group By c.Description 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:33:41.593

```
[Score > 3] = count(s.Score) 

...

where s.Score > 3 
```

这两个语句都不需要。事实上，您的 Where 子句将所有操作限制为 s.score >3，当您还尝试从 score <3 中提取数据时，这并不理想。

如果您尝试计算 s.Score>3 和 <3 的情况，则需要使用 CASE 语句

```
SELECT SUM(CASE WHEN s.score < 3 THEN 1  ELSE 0 END) AS Hiscores,  
SUM(CASE WHEN s.score >    3 THEN 1  ELSE 0 END) /count(s.scores) AS percentLowScores 
```

这应该这样做

```
 SELECT c.Description County, 
  SUM(CASE WHEN s.score < 3 THEN 1  ELSE 0 END) AS Hiscores,  
  SUM(CASE WHEN s.score > 3 THEN 1  ELSE 0 END) /count(s.scores) AS percentLowScores

    FROM Sites AS s
    inner join Profiles as p on s.Profile_Id = p.Id
    inner join Counties as c on p.County_Id = c.Id
    inner join Rooms as room on s.Id = room.Site_Id

    Group By c.Description 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:02:38.967

我认为你把问题复杂化了，而不是子选择，你可以限制使用`HAVING`子句返回的数据，然后`CASE`在`COUNT`：

```
SELECT  County = c.Description,
        [Score > 3] = COUNT(CASE WHEN Sites.Score > 3 THEN 1 END),
        [% Score < 3] = 100.0 * COUNT(CASE WHEN Sites.Score < 3 THEN 1 END) / COUNT(1)
FROM    Sites
        INNER JOIN Profiles
            ON Sites.Profile_Id = Profiles.Id
        INNER JOIN Counties 
            ON Profiles.County_Id = Counties.Id
        INNER JOIN Rooms 
            ON Sites.Id = Rooms.Site_Id
GROUP BY c.Description
HAVING  COUNT(CASE WHEN Sites.Score > 3 THEN 1 END) > 0; 
```

**[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/7cc9f/2)**

**编辑**

```
SELECT  County = c.Description,
        [Score > 3] = COUNT(CASE WHEN Sites.Score > 3 THEN 1 END),
        [% Score < 3] = 100.0 * SUM(CASE WHEN Sites.Score < 3 THEN 1 END) / COUNT(*),
        [Score > 3] = SUM(CASE WHEN Sites.Score > 3 THEN RoomCount ELSE 0 END),
        [% Score < 3] = 100.0 * SUM(CASE WHEN Sites.Score < 3 THEN RoomCount ELSE 0 END) / SUM(RoomCount)
FROM    Sites
        INNER JOIN Profiles
            ON Sites.Profile_Id = Profiles.Id
        INNER JOIN Counties 
            ON Profiles.County_Id = Counties.Id
        INNER JOIN 
        (   SELECT Site_Id, RoomCount = COUNT(*)
            FROM   Rooms 
            GROUP BY Site_Id
        ) Rooms
            ON Sites.Id = Rooms.Site_Id
GROUP BY c.Description
HAVING  COUNT(CASE WHEN Sites.Score > 3 THEN 1 END) > 0; 
```

# asp.net - 解析器错误消息“（默认）”不是属性“文化”的有效值

> ID：15643674
> 
> 赞同：1
> 
> 时间：2013-03-26T17:29:58.633
> 
> 标签：asp.net, telerik

解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

> 解析器错误消息：“（默认）”不是属性“文化”的有效值。
> 
> 源错误：
> 
> 第 1 行：<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="HomePage.aspx.cs" Inherits="FundingWebsiteAspnet.HomePage" 第 2 行：MasterPageFile="MasterPageForTheFundingWebsite.master" Culture="(默认)" %> 第 3 行：
> 
> 源文件：/HomePage.aspx 行：1
> 
> 还有这个错误消息Warning 1 C:\Users\shussain2\Documents\CTRP\FundingWebsiteAspnet\FundingWebsiteAspnet\HomePage.aspx: ASP.NET 运行时错误：无法加载文件或程序集 'Telerik.Web.UI, Version=2013.1.220.40, Culture =neutral, PublicKeyToken=121fae78165ba3d4' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040） C:\Users\shussain2\Documents\CTRP\FundingWebsiteAspnet\FundingWebsiteAspnet\HomePage.aspx 1 1 CTRP

我能做些什么来解决这个问题？我有降级的想法，但我希望新控件与之兼容。

代码 HOMEPAGE.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="HomePage.aspx.cs" Inherits="FundingWebsiteAspnet.HomePage"
    MasterPageFile="MasterPageForTheFundingWebsite.master" 
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<asp:Content ID="mainContent" ContentPlaceHolderID="mainContentPlaceholder" runat="server">
    <head>
        <link rel="stylesheet" type="text/css" href="StyleSheetForTheFundingWebsite.css" />
        <style type="text/css">
            .modalBackground
            {
                background-color: Gray;
                filter: alpha(opacity=70);
                opacity: 0.7;
                border: 5px
                border-color: Black;
                border-style: solid;
            }
            .pnlBackGround
            {
                position: fixed;
                top: 10%;
                left: 10px;
                width: 650px;
                height: 300px;
                background-color: White;
                border: solid 3px black;
            }
        </style>
    </head>
    <form id="form1" runat="server">
    <cc1:ToolkitScriptManager ID="TKSM" EnablePageMethods="true" EnableCdn="true" ScriptMode="Release"
        runat="server">
    </cc1:ToolkitScriptManager>
    <asp:GridView ID="GridView1" runat="server" AllowPaging="False" AllowSorting="False"
        AutoGenerateColumns="False" AutoGenerateEditButton="False" CellPadding="4" 
        DataKeyNames="Study_Number" Width="100%" SkinID="Summary" OnRowCommand="grd_ReturnItems_RowCommand"
        DataSourceID="SqlDataSource1" ForeColor="#333333" GridLines="None" Height="236px"
        OnSelectedIndexChanged="GridView1_SelectedIndexChanged">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
        <asp:TemplateField >
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" >Edit</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
            <asp:CommandField EditText="Vaishali" />
            <asp:BoundField DataField="PI" HeaderText="PI" SortExpression="PI" />
            <asp:BoundField DataField="Study_Number" HeaderText="Study_Number" ReadOnly="True"
                SortExpression="Study_Number" />
            <asp:BoundField DataField="Study_Title" HeaderText="Study_Title" SortExpression="Study_Title" />
            <asp:BoundField DataField="Disease_Code" HeaderText="Disease_Code" SortExpression="Disease_Code" />
        </Columns>
        <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
        <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
        <SortedAscendingCellStyle BackColor="#FDF5AC" />
        <SortedAscendingHeaderStyle BackColor="#4D0000" />
        <SortedDescendingCellStyle BackColor="#FCF6C0" />
        <SortedDescendingHeaderStyle BackColor="#820000" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:adm_productionConnectionString %>"
        SelectCommand="SELECT [PI], [Study Number] AS Study_Number, [Study Title] AS Study_Title, [Disease Code] AS Disease_Code FROM [Study_Disease_Code_association]">
    </asp:SqlDataSource>
    <cc1:ModalPopupExtender ID="mpe_EditReturnItemPopup" runat="server" TargetControlID="btn_Hidden1"
        PopupControlID="EditReturnItemDialog" BackgroundCssClass="modalBackground" CancelControlID="btn_EditReturnItemCancel"
        DropShadow="false" PopupDragHandleControlID="EditReturnItemDialogHeader" OkControlID="btnOk"
        X="20" Y="100" />
    <asp:Panel ID="EditReturnItemDialog" runat="server" Style="display: none; width: 300px"
        CssClass="pnlBackGround">

        <br />
        Please Enter Disease Code :
        <table>
            <tr>
                <td>
                    <br />
                    Select Disease Code Type:
                    <telerik:RadDropDownList ID="radDropDownDiseaseType" runat="server">
                    </telerik:RadDropDownList>
                </td>
            </tr>
            <tr>
                <td>
                    <br />
                    Select sub-category :
                    <telerik:RadDropDownList ID="radDropDownSubCat" runat="server">
                    </telerik:RadDropDownList>
                </td>
            </tr>
              <tr>
                <td>

                    Enter Meddra Code :
                   <telerik:RadDropDownList ID="radDropDownMeddra" runat="server">
                    </telerik:RadDropDownList>

                </td>
            </tr>
           <tr>
           <td>

           <asp:Button ID="btn_SaveEditReturnItem" runat="server" Text="Submit" OnClick="btn_SaveEditReturnItem_Click" />&nbsp;&nbsp;&nbsp;
            <asp:Button ID="btn_EditReturnItemCancel" runat="server" Text="Cancel" />
            <br />
            <br />
            <br />
           </td>
           </tr>
                      <tr>
           <td>
            <br />
            <br />
            <br />
           </td>
           </tr>
        </table>
        <br />
        <br />
        <center>
            </center>
        <asp:Button ID="btn_Hidden1" runat="server" Style="display: none" />
    </asp:Panel>
    </form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:33:14.553

`Culture="(Default)"`从 aspx 页面中删除。

`<%@ Register TagPrefix="telerik" .... %>`从 aspx 页面中删除。

将 Telerik 命名空间放在您的 web.config 中。

```
<system.web>
    ...
    <pages>
      <controls>
        ...
        <add tagPrefix="telerik" namespace="Telerik.Web.UI" 
           assembly="Telerik.Web.UI"/>
        ...
      </controls>
    </pages>
    ...
</system.web> 
```

# javascript - 在区域单击时加载另一个 jvectormap

> ID：15643677
> 
> 赞同：13
> 
> 时间：2013-03-26T17:30:04.900
> 
> 标签：javascript, jquery, jvectormap

我正在尝试加载特定区域地图`onRegionClick`。但是，似乎在进行更改后该区域正在加载。这是我的代码：

```
function switchMap(code) {
    $.getScript('maps/'+ code +'.js');
    $('#map').vectorMap({map: code});
}

$('#map').vectorMap({
    map: 'world_mill_en',
    onRegionClick: function(event, code) {
        if (code == "CA") {switchMap(code)}
        if (code == "AF") {switchMap(code)}
        if (code == "AL") {switchMap(code)}
        if (code == "AR") {switchMap(code)}
        if (code == "CH") {switchMap(code)}
    }
}); 
```

控制台输出是这样的：

```
Uncaught Error: Attempt to use map which was not loaded: CA world-map.js:82

OPTIONS file:///C:/Users/D-4/Desktop/find-a-bible/maps/CA.js?_=1364318443130  jquery-1.8.2.js:8416 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-28T13:05:35.070

为了使用 switchMap 函数，您必须在文件完全加载后初始化新的 vectorMap，从而在回调中初始化它。.

```
function switchMap(code) {
    $.getScript('maps/'+ code +'.js' , function (data){
        $('#map').vectorMap({map: code});
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T14:42:53.797

您应该只放置 div 的高度或宽度来正确渲染地图。jvectormap 将自动计算缺失的维度以保持地图的纵横比。如果您使用 javascript 动态更改高度，请确保调用`updateSize`您的地图对象。请注意，您可以使用此获取地图对象，`var mapObject = $('#world-map-gdp').vectorMap('get', 'mapObject');`然后调用`mapObject.updateSize();`

# java - 如何创建返回 ArrayList 的方法

> ID：15643682
> 
> 赞同：0
> 
> 时间：2013-03-26T17:30:21.073
> 
> 标签：java

通过阅读教程和练习 Java，我遇到了一个问题。我创建了一个 String ArrayList，向其中添加了字符串。但是我想要一种方法可以让我向这个arrayList 添加更多字符串，而另一种方法可以让我显示这个arrayList。下面是我解决这个问题的尝试。我的代码只打印一个空的数组列表

```
class apples {
    public static void main(String[] args) {
        viewArrayList(); //prints a empty arraylist
    }

    public static void addString() {
        ArrayList<String> destinationArray = new ArrayList<String>();
        destinationArray.add("example1");
        destinationArray.add("example2");
    }

    static ArrayList GetArrayList() {
        ArrayList<String> destinationArray = new ArrayList<String>();

        return destinationArray;
    }

    public static void viewArrayList() {
        System.out.println(GetArrayList());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:34:08.400

你是不是忘记在 getArrayList() 中添加 addString() 了？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:35:49.773

您的变量`destinationArray`在方法中声明，这意味着它只存在于该方法内部`addString()`，对象之外不再存在，您无法在其他方法中访问它。为此，您必须将其声明为这样的类变量：

```
class apples{
ArrayList<String> destinationArray = new ArrayList<String>();
public static void main(String[] args) 
```

当你的程序执行时，实际上它执行的是 main 方法，因此如果你想执行你的方法`addString()`，你必须在 main 函数中调用它。它看起来像这样：

```
public static void main(String[] args) 
{
    this.addString();
    this.viewArrayList(); //prints a empty arraylist
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T17:31:57.057

创建 a 的对象`ArrayList`并将引用传递给不同的方法。示例在主类中创建一个`ArrayList`对象并将其传递给`addString`&`display`方法。

```
public static void main(String[] args){
    List<String> destinationArray = new ArrayList<String>();
    viewArrayList(destinationArray); 
    displayArrayList(destinationArray);//prints a empty arraylist
}
public static void addString(List destinationArray ){   
    destinationArray.add("example1");
    destinationArray.add("example2");
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:37:32.513

一个问题是您为每种方法使用不同的数组列表。每次使用关键字`new`，您都在创建一个新的（和空的）列表。

在您的班级顶部创建一次 ArrayList ...

```
private ArrayList<String> myList = new ArrayList<String>(); 
```

然后在所有其他方法中引用 myList 而不为其分配新值。

```
public ArrayList<String> getArrayList() {
  return myList;
}

public void addSomeStrings() {
  myList.add("Some String");
  myList.add("Some Other String");
} 
```

并且不要害怕浏览 Java 教程。这是一个基本概念，如果你不巩固你的基础，你可能会感到非常沮丧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T17:34:01.210

我会做这样的事情：

```
class apples
{
  private ArrayList<String> array = new ArrayList<String>();

  public void addString(String addString)
  {   
    this.array.add(addString);
  }

  public ArrayList<String> GetArrayList()
  {
    return array;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T17:48:59.560

数组对象的范围是这里的问题。您正在将字符串添加到 1 个数组并尝试打印另一个数组。删除 addString() 中的静态块和数组声明。像这样在类定义旁边声明数组，

类苹果 { ArrayList destinationArray = new ArrayList(); …………

它应该工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-19T09:37:58.893

代码：

```
public class Apples {
public static void main(String[] args) {
    viewArrayList(); //prints a empty arraylist
}

public static ArrayList<String> addString() {
    ArrayList<String> destinationArray = new ArrayList<String>();
    destinationArray.add("example1");
    destinationArray.add("example2");
    return destinationArray;
}

public static ArrayList<String> GetArrayList() {
    return addString();     
}

public static void viewArrayList() {
    System.out.println(GetArrayList());
} 
```

}

输出：

[示例1，示例2]

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-26T17:45:25.913

编译并运行以下程序。

```
import java.util.ArrayList;

class Apples {
    static ArrayList<String> destinationArray = new ArrayList<String>();
    public static void main(String[] args) {
        System.out.print("First time");
        viewArrayList();
        addString("Example1");
        addString("Example2");
        addString("Example3");

        System.out.print("Second time");
        viewArrayList();
        addString("Example4");
        addString("Example5");
        System.out.print("Third time");
        viewArrayList();
    }

    public static void addString(String example) {
        destinationArray.add(example);
    }

    static ArrayList getArrayList() {
        return destinationArray;
    }

    public static void viewArrayList() {
        System.out.println(getArrayList());
    }
} 
```

# xml - 使用“FOR XML PATH”时如何避免字符编码？

> ID：15643683
> 
> 赞同：60
> 
> 时间：2013-03-26T17:30:30.770
> 
> 标签：xml, sql-server-2005, encoding, for-xml-path

我希望从 SQL Server 2005 表中创建一个以逗号分隔的值列表，就像在[JanetOhara 的问题](https://stackoverflow.com/q/12435284/1383298)中一样。我使用的查询类似于[techdo 对问题的回答](https://stackoverflow.com/a/12435331/1383298)中提出的查询。

一切正常，除了值列表被 XML 编码。应该是什么：

```
Sports & Recreation,x >= y 
```

而是返回为：

```
Sports &amp; Recreation,x &lt;= y 
```

在 SQL Server 中使用“FOR XML”时，有没有办法禁用 XML 字符编码？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-03-26T17:35:38.357

您只需要使用正确的选项`FOR XML`。这是避免编码的一种方法：

```
USE tempdb;
GO

CREATE TABLE dbo.x(y nvarchar(255));

INSERT dbo.x SELECT 'Sports & Recreation'
   UNION ALL SELECT 'x >= y'
   UNION ALL SELECT 'blat'
   UNION ALL SELECT '<hooah>';

-- BAD:
SELECT STUFF((SELECT N',' + y
  FROM dbo.x 
  FOR XML PATH(N'')),1, 1, N'');

-- GOOD:
SELECT STUFF((SELECT N',' + y
  FROM dbo.x 
  FOR XML PATH, 
  TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'');

GO
DROP TABLE dbo.x; 
```

如果您使用的是较新版本的 SQL Server (2017+)，则可以使用[`STRING_AGG()`](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql?view=sql-server-ver15)XML 而完全不用担心：

```
SELECT STRING_AGG(y, N',') FROM dbo.x; 
```

[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=054eca072742658ca829fcdfbf5983b8)演示了这三个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-28T14:54:43.053

你也可以这样做：

```
-- BAD:
SELECT STUFF((SELECT N',' + y
FROM dbo.x 
FOR XML PATH(N'')),1, 1, N'');

-- GOOD:
SELECT STUFF((SELECT N',' + y
FROM dbo.x 
FOR XML PATH(N''), TYPE).value('(./text())[1]','varchar(max)'),1, 1, N''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T23:19:18.093

# http - 使用 HEAD 请求揭示受保护资源的存在是 RESTful 吗？

> ID：15643684
> 
> 赞同：4
> 
> 时间：2013-03-26T17:30:36.043
> 
> 标签：http, rest, architecture

我有一个 RESTful 资源，其表示只能由经过身份验证的客户端检索。如果未经身份验证的客户端发出 GET 请求，将返回 401。

另一方面，我希望未经身份验证的客户端能够确定资源是否存在。在这种情况下，如果资源确实存在，我正在考虑让 HEAD 请求返回 200，如果不存在则返回 404。

RFC 2616 在第 9.4 节中对 HEAD 请求进行了如下说明

> 响应 HEAD 请求的 HTTP 标头中包含的元信息应该与响应 GET 请求发送的信息相同。

这种方法会被认为是适当的 RESTful 吗？

作为替代方案，我可以让 GET 和 HEAD 请求为不存在的资源返回 404，如果请求存在但客户端无权返回 401。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:26:31.617

我会走404/401路线。它更简单，更正交。也因为 HEAD 定义的第一行是：

> HEAD 方法与 GET 相同，只是服务器不能在响应中返回消息体。

这将为不支持 HEAD 的 HTTP 客户端敞开大门。未经身份验证的他们可以简单地执行 GET 来确定资源的存在。无需 HEAD 支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T18:28:00.467

如果您真的要允许未经身份验证的客户端确定资源的存在，我会选择后一种选项（404 表示不存在，401 表示未经身份验证）。如果该存在信息被暴露，则 404/401 是正确的响应：

*   404：我向你确认，未经身份验证的客户端，此资源不存在。
*   401：我拒绝您的请求，因为您没有获得此资源的适当授权。

另外，如果经过身份验证的客户端具有适当的访问权限并且该资源存在，则这允许经过身份验证的客户端将资源用于 200。

# objective-c - 目标-c | 如何使用 Restkit 在获取参数请求中为同一索引添加不同的对象？

> ID：15643685
> 
> 赞同：0
> 
> 时间：2013-03-26T17:30:36.730
> 
> 标签：objective-c, restkit, nsmutabledictionary

我正在尝试获取类似的网址

myserver.com/my_content?categories[]=1&categories[]=2&categories[]=3

使用 restkit 2.0

我正在使用 NSMutableDictionary 创建我的 params 对象，但据我所知，NSMutableDictionary 只允许唯一键。所以如果我做类似的事情

```
NSMutableDictionary *queryParamsCat = [NSMutableDictionary dictionary];
for(Category *item in arr){
    [queryParamsCat setObject:item.id_category forKey:@"categories[]"];
} 
```

只有 id_category 的最后一个值将作为参数发送。任何人都可以提出不同的解决方案吗？我是objective-c的新手，肯定有一个我可以使用的结构，但我不知道:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:11:36.883

我刚刚结束使用索引来创建唯一键并修改服务器端脚本来修剪索引，就像这样

```
int i = 0;
for(TEEventCategory *item in arr){
    [queryParams setObject:item.id_category forKey:[NSString stringWithFormat:@"categories[%d]", i]];
    i++;
} 
```

# c# - 使用键盘选择项目时组合框崩溃

> ID：15643694
> 
> 赞同：1
> 
> 时间：2013-03-26T17:31:24.727
> 
> 标签：c#, combobox

我对下面的代码有疑问，基本上是从存储扩展名为 .config 的文件的路径中读取的，它读取不带扩展名的文件的名称并将它们全部显示在组合框中。这很好用，如果您单击向下箭头并选择一个名称，它实际上会执行应有的操作，但是，一旦我用鼠标从下拉列表中选择了一个项目，然后我返回并开始在组合框中输入内容，我的应用程序就会崩溃抛出异常。

我试过添加一个 try-catch-finally ，但它一直抛出同样的错误。一旦我开始在组合框中输入内容，是否是导致我的应用程序崩溃的循环？

pd 如果我只是使用鼠标从下拉菜单中选择一个项目，我的应用程序工作正常，但是一旦我用鼠标选择了一个项目并使用键盘在组合框中键入另一个项目名称，我的应用程序就会崩溃。任何指针都会有所帮助。

```
// Gets all the file names from the path assigned to templatePath 
// and assigns it to the string array fname
string[] fname = Directory.GetFiles(templatePath); 

// Begin sorting through the file names assigned to the string array fname
foreach (string file in fname)
{
    // Remove the extension from the file names and compare the list with 
    // the dropdown selected item
    if (System.IO.Path.GetFileNameWithoutExtension(file) == cbTemplates.SelectedItem.ToString())
    {
        // StreamReader gets the contents from the found file and assigns
        // them to the labels
        using (var obj = new StreamReader(File.OpenRead(file)))
        {
            lbl1.Content = obj.ReadLine();
            lbl2.Content = obj.ReadLine();
            lbl3.Content = obj.ReadLine();
            lbl4.Content = obj.ReadLine();
            lbl5.Content = obj.ReadLine();
            lbl6.Content = obj.ReadLine();
            lbl7.Content = obj.ReadLine();
            lbl8.Content = obj.ReadLine();
            lbl9.Content = obj.ReadLine();
            lbl10.Content = obj.ReadLine();
            obj.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:38:08.123

我的猜测是这可能导致错误：

```
cbTemplates.SelectedItem.ToString() 
```

当您开始在组合框中键入时，SelectedItem 变为空。

`cbTemplates.SelectedItem`在尝试调用它之前，您应该测试它是否为空`ToString()`。如果您尝试匹配组合框的文本，则可以尝试使用`cbTemplates.Text`。

正如其他人对您的问题所评论的那样，您不需要在`Dispose`里面打电话`using`，您应该考虑文件可能不包含 10 行的可能性。

# php - 使用 php html 生成条形图，使百分比正确显示？

> ID：15643696
> 
> 赞同：0
> 
> 时间：2013-03-26T17:31:34.783
> 
> 标签：php, html, graph

任何人都可以帮助我尝试用 php 和 html 编写一个简单的代码，我的目标是通过数据库获取我的变量并发布数字并在最后添加一个 % 但我的代码让我感到困惑。

最后一个有效，但它是硬编码的。

点击这里查看图片。 [http://i.stack.imgur.com/0Apoh.png](http://i.stack.imgur.com/0Apoh.png) 我要显示的黄色图表为 55%，其余的不会填写，例如底部图表。

```
<style type="text/css">
    .red {background-color: red;}
    .green {background-color: green;}
    .yellow{background-color: yellow;}
    .bar { width: 15%; border: 1px solid #000; background: grey; }
    </style>

    <?php   
    if ($percentage >= 51 && $percentage <= 74) {
    echo "<div class=\"bar\" align=\"left\"><div class=\"yellow\" style=\"width: $percentage %\">$percentage test</div></div>";
    } else if ($percentage >= 75){
    echo "<div class=\"bar\" align=\"left\"><div class=\"green\" style=\"width: $percentage \"%\">$percentage test</div></div>";
    } else if ($percentage >= 0 && $percentage <= 50) {
    echo "<div class=\"bar\" align=\"left\"><div class=\"red\" style=\"width:46%\">$percentage test</div></div>";
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:39:06.807

我看不到您如何获得百分比值，但我可以看到您以 3 种不同的方式定义您的样式：第一种会产生：宽度：33 像素；这在某种程度上是正确的，但第二个是错误的，正确的是：

```
echo "<div class=\"bar\" align=\"left\"><div class=\"red\" style=\"width:$percenage%\">$percentage test</div></div>"; 
```

或者

```
echo "<div class=\"bar\" align=\"left\"><div class=\"red\" style=\"width:".$percentage."%\">$percentage test</div></div>"; 
```

这是为了完成上面的答案。我忘了你也可以使用 !important 参数。... 宽度：$percantage% !important;

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T17:36:24.757

你不能把变量放在这样的字符串中。所以你应该这样做：

```
if ($percentage >= 51 && $percentage <= 74)
    echo "<div class=\"bar\" align=\"left\"><div class=\"yellow\" style=\"width:". $percentage." %\">".$percentage." test</div></div>"; 
```

# android - 签署 .apk 文件 ..getting jarsigner 错误：

> ID：15643709
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:32:20.370
> 
> 标签：android, apk, jarsigner

我从 Internet 下载了 MyFiles.apk 并尝试使用 jarsigner 工具对 MyFiles.apk 进行签名。我跟随每一步

但得到

```
jarsigner error: java.lang.RuntimeException:keystore load: D:\path_to_keystore\mykeystore.keystore(The system cannot find the path specified) 
```

这是什么？怎么解决？

你可以看到我的错误截图的这个链接

![图片](../Images/ca6cca203cd69c54915e2aa44c7313a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:52:13.273

在您发布的屏幕截图中，您告诉 jarsigner 您的密钥库位于`D:\path_to_keystore\mykeystore.keystore`. 这是极不可能的，而且您似乎直接从文档中复制了该命令。尝试提供您的密钥库的实际路径，该文件位于您的系统上

如果您还没有密钥库，则必须生成一个，如文档的[这一](http://developer.android.com/tools/publishing/app-signing.html#cert)部分所示。

# php - PHP从页面x获取一个div

> ID：15643710
> 
> 赞同：1
> 
> 时间：2013-03-26T17:32:29.027
> 
> 标签：php, file-get-contents

我想从页面 Y 中提取一些 html

```
for example site is
<head>xxxx</head>
<body>....<div id="ineedthis_code"> </div> ...</body> 
```

可以这样做 file_get_contents 吗？！我只需要那个 div 没有别的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:42:20.763

不使用特殊库（在大多数情况下这是最好的方法），您可以使用explode-function：

```
$content = file_get_contents($url);
$first_step = explode( '<div id="YOUR ID HERE">' , $content ); // So you will get two array elements

$second_step = explode("</div>" , $first_step[1] ); // "1" depends, if you have more elements with this id (theoretical) 

echo $second_step[0]; // You will get the first element with the content within the DIV :) 
```

请注意，这只是一个没有错误处理的示例。它也仅适用于特殊情况；如果 html 结构发生变化，则不会。即使是简单的空格也可以破坏此代码。所以你应该更好地使用解析库;-)

# knockout.js - 保存不使用淘汰视图模型？

> ID：15643711
> 
> 赞同：0
> 
> 时间：2013-03-26T17:32:31.537
> 
> 标签：knockout.js, single-page-application

当我在视图中添加卡片时，我称之为：

```
innerModel.addCard = function() {
                // This just adds a card to the UI
                var card = new cardViewModel(addCardDto);
                innerModel.cards.push(card);
            }.bind(this); 
```

这会在 UI 中添加一张空卡片并让用户输入一些信息。当他们单击“保存”时，我通过网络发送这个最低限度的包，将其保存在服务器端，然后返回一个更完整的对象。更新也是如此——我只发送需要的东西，然后取回一个完整的对象。这是我的cardViewModel：

```
var cardViewModel = function(data) {
        var self = this;
        ko.mapping.fromJS(data, {}, this);

        self.isNew = ko.observable(false);

        // If the card hasn't been created yet, it won't have a cardId
        if (typeof this.cardId === 'undefined') {
            this.isNew(true);
        }

        this.save = function() {
            // Implement API call here, one for POST, one for PUT.  For now: 
            // Currently just using a hard-coded piece of data 'cardDto' that mocks the result of an API call
            var result = new cardViewModel(cardDto);  // Problem is somewhere around here
            result.editing(false);
            result.isNew(false);
            debugger;
            // trying to re-assign the object to the result here, but it's not working.  No errors from javascript, just no activity when I click "save".
            self = result;
        };

    }; 
```

在我看来，我有：

```
<a data-bind="click: save">save</a> 
```

这是以前的工作，当我的保存方法是这样的：

```
this.save = function() {
                // Implement API call here, one for POST, one for PUT.  For now: 
                this.editing(false);
                this.isNew(false);
     }; 
```

我究竟做错了什么？

我试过这个：

```
this.save = function() {
            // Implement API call here, one for POST, one for PUT.  For now: 
            // Currently just using a hard-coded piece of data 'cardDto' that mocks the result of an API call
            var result = new cardViewModel(cardDto);  // Problem is somewhere around here
            result.editing(false);
            result.isNew(false);
            debugger;
            // trying to re-assign the object to the result here, but it's not working.  No errors from javascript, just no activity when I click "save".

            ko.mapping.fromJS(result, {}, self); // NEW
        }; 
```

但是当我运行它时，chrome 没有任何错误或任何东西就死了，它只是说“Aw snap”。

编辑：我在 IE 中运行，我得到一个“调用堆栈大小超出错误”。现在钻进去...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:40:12.467

`self = result`将变量重新分配`self`给结果，它不会导致对象更新自身或其任何属性。没有什么特别之处`self`会改变 JS 分配的工作方式。

只需调用`ko.mapping.fromJS(result, {}, this)`即可更新对象。

# coffeescript - 如何在 EmberJS 中对包含另一个数组的对象数组指定计算属性依赖项

> ID：15643717
> 
> 赞同：1
> 
> 时间：2013-03-26T17:32:43.223
> 
> 标签：coffeescript, ember.js

我正在使用 EmberJS，我正在尝试设置对计算属性的依赖。一个访问者可以包含多个票（一个数组），并且我可以访问一个包含一组访问者的对象。这是我的计算属性。当票被添加到访问者数组中的任何访问者时，如何重新计算属性？

```
App.AttendanceController = App.SlideBaseController.extend
eligibleVisitors:
    (->
        return @getElegibleVisitors()
    ).property('App.state.session.visitors.@each.type')

allEligibleVisitorsAttending:
    (->
        return _.all @getElegibleVisitors(), (visitor)->
            return visitor.tickets.length > 0 and _.any visitor.tickets, (ticket)->
                return ticket.EventID is content.Event.ID
    ).property('App.state.session.visitors.tickets')

getElegibleVisitors:->
    return _.filter App.state.session.visitors, (visitor)->
        return visitor.type isnt App.VisitorTypes['Infant'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:55:11.437

像这样的东西应该工作：

`.property('App.state.session.visitors.@each.tickets.@each')`

当任何票被添加到任何访客时更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:42:18.977

AFAIK 这现在是不可能的，也不适用于 Ember 1.0。见这里：[https ://github.com/emberjs/ember.js/issues/541](https://github.com/emberjs/ember.js/issues/541)

嵌套`@each`属性不会正确触发观察者。

我遇到了类似的问题（嵌套树结构）——我通过让每个子节点都有一个对父节点的引用属性来解决它，然后添加

```
Node = Ember.Object.extend
  nodeParent: null # to point at parent
  nodeChanged: (->
      @get('nodeParent')?.notifyPropertyChange 'notifier'
  ).observes 'various', 'properties 
```

我使用“通知程序”作为父级上的其他属性可以绑定的通用键；当孩子中的事情发生变化时，它会导致 上的属性发生变化`parent.notifier`，这反过来又会触发您想要的其他属性。

这是一个 hacky 解决方法。优点是它有效，缺点是您必须跟踪孩子与父母的关系；即，对你来说，每个人都`Ticket`需要参考它的`Visitor`

# php - Laravel 中的位置标头

> ID：15643718
> 
> 赞同：9
> 
> 时间：2013-03-26T17:32:43.950
> 
> 标签：php, redirect, header, location, laravel

我正在为我大学的身份验证系统 (Ucam_Webauth) 使用图书馆，这意味着我必须通过其中一种方法重定向到身份验证服务器。`Redirect:to()`不幸的是，由于该库的体系结构，我无法返回 a 。该库本身使用`header('Location: ...');`，但由于某种原因这不起作用。

如果我`die();`在发送标题后制作程序，它可以工作，否则它不会。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-29T16:15:33.347

```
return redirect()->to('url')->send(); 
```

发送 HTTP 标头和内容。在我的应用程序中，send() 方法的作用类似于“exit()”并且是可测试的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T20:01:43.407

我不确定我是否跟随。Laravel 将 Location 头设置为 Redirect::to() 方法的一部分。如果您想更明确地定义响应，您可以这样做。

```
return Response::make( '', 302 )->header( 'Location', $url ); 
```

如果这不起作用，我可能会退回到 php stdlib header() 并返回 null。

如果所有这些仍然没有任何好处，那么可能是分析器把事情搞砸了。如果它已打开，请尝试在配置中禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T04:35:12.803

**尝试**

```
return Redirect::to('url'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-06T11:06:41.950

例如，对于这条路线：

```
Route::get('hello', array('as' => 'hello_name', 'uses' => 'HelloController@getHello')); 
```

在 laravel 中，您可以简单地使用重定向到 url

```
return Redirect::to('hello'); 
```

或者，您可以简单地使用重定向到命名路由

```
return Redirect::route('hello_name'); 
```

# c# - 带有文本样式的下拉列表

> ID：15643719
> 
> 赞同：1
> 
> 时间：2013-03-26T17:32:46.077
> 
> 标签：c#, asp.net

我不知道如何将所有文本样式放在 asp.net 的下拉列表中。你能帮助我吗 ？我是新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:38:40.280

使用**System.Drawing.Text.InstalledFontCollection**类列出服务器上安装的所有字体。请注意，某些这些字体在客户端可能不可用。

```
using System.Drawing.Text;
...
InstalledFontCollection inst = new InstalledFontCollection();
foreach (FontFamily fnt in inst.Families)
{
    comboBox.Items.Add(fnt.Name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:05:47.167

如果您想使用服务器的字体而不关心客户端是否有它们，那么使用 Alexander 的答案来获取可用字体的列表。

如果要显示客户端可用的字体，则可以使用 flash。

**来源：** [https ://github.com/gabriel/font-detect-js](https://github.com/gabriel/font-detect-js)

**演示： http:** [//font-detect.s3.amazonaws.com/index.html](http://font-detect.s3.amazonaws.com/index.html)

# c# - 如何在 GridView 中启用列？

> ID：15643721
> 
> 赞同：1
> 
> 时间：2013-03-26T17:32:53.263
> 
> 标签：c#, asp.net, gridview, rowdatabound

我有一个带有以下数据的 ASP.NET GridView：

![在此处输入图像描述](../Images/cb09c900af423544cffff156548065d9.png)

行将根据 column3 上的值禁用 OnRowDataBound。

**网格视图 ：**

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" 
        onrowdatabound="GridView1_RowDataBound1">
        <Columns>
            <asp:TemplateField HeaderText="Column1">
                <ItemTemplate>
                    <asp:HyperLink ID="hyperlink" runat="server" Text='<% #Eval("Dosage") %>' NavigateUrl='<% #Eval("Dosage") %>'></asp:HyperLink>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Column2">
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<% #Eval("Drug") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Column3">
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<% #Eval("Patient") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Column4">
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<% #Eval("Date") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**行数据绑定：**

```
protected void GridView1_RowDataBound1(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label a = e.Row.FindControl("Label3") as Label;
        if (a.Text == "Sam")
        {
            e.Row.Enabled = false;
            e.Row.Cells[0].Enabled = true;
        }
    }
} 
```

但是，我希望 column1 始终启用，column1 中的超链接应始终可点击。

我试过获取单元格并启用它，但它不起作用。

请告知上述问题的解决方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:34:56.000

您可以通过启用/禁用特定单元格来做到这一点。

```
 protected void GridView1_RowDataBound1(object sender, GridViewRowEventArgs e)
  {
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label a = e.Row.FindControl("Label3") as Label;
        if (a.Text == "Sam")
        {

            e.Row.Cells[0].Enabled = true;
            e.Row.Cells[1].Enabled = false;
            e.Row.Cells[2].Enabled = false;
            e.Row.Cells[3].Enabled = false;

        }
    }
} 
```

# java - 杰克逊自定义映射器将字节数组转换为字符串

> ID：15643723
> 
> 赞同：5
> 
> 时间：2013-03-26T17:33:01.203
> 
> 标签：java, javascript, jackson

我对杰克逊非常陌生，我很难理解如何完成某件事。

我有一些类型`byte[]`的数据（数据在从 JAXB 生成的类中）。在将数据发送到浏览器之前，杰克逊（我相信）将其转换为 JSON，以便网页可以使用它。到目前为止，至少这是我粗略的理解。

JSON 数据将 my 显示`byte []`为字符串，这与我们想要的显示不匹配。例如，实际数据可能是`CAFEDEAD`，但 JSON 字符串看起来像`3q2+78r+`. 我希望 JSON 包含字符串`CAFEDEAD`

我的问题是，我可以为 Jackson 编写一些自定义的东西，在它创建最终 JSON 之前，将`byte[]`数据转换为可读的十六进制字符串吗？或者如果没有，我还有什么其他选择？

我可以访问 javascript，所以如果有办法将 JSON 字符串转回，我也愿意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:59:16.193

Jackson 会将 byte[] 转换为 Base64 编码的二进制数据。这是传递二进制内容的安全方式。否则，无法知道包含的数据可能使用哪种字符编码，因此尝试从中构建字符串将是冒险且容易出错的。

因此，最简单的方法是让接收器 base64 将内容解码回二进制数据。

您也可以添加自定义序列化程序以转换为其他表示形式（十六进制，base85），但这实际上取决于目标是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:59:23.397

**Note:** I'm the [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php) lead and a member of the [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) expert group.

Below is how you could support this use case with MOXy as your JSON-binding provider.

**Java Model**

By default a JAXB implementation will convert a `byte[]` to base64Binary. You can use the `HexBinaryAdapter` to have it represented as hexBinary.

```
package forum15643723;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    private byte[] foo;

    @XmlJavaTypeAdapter(HexBinaryAdapter.class)
    private byte[] bar;

} 
```

**Demo**

In the demo code below we will read the JSON into objects and then write it back to JSON.

```
package forum15643723;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Root.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum15643723/input.json");
        Root root = (Root) unmarshaller.unmarshal(json, Root.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**jaxb.properties**

To specify MOXy as your JAXB provider you need to include a file called `jaxb.properties` in the same package as your domain model (see: [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)).

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**input.json/Output**

The `foo` and `bar` properties represent the same data. `foo` is represented as base64Binary and `bar` is represented as hexBinary.

```
{
   "foo" : "3q2+78r+",
   "bar" : "DEADBEEFCAFE"
} 
```

**For More Information**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T17:41:31.803

您可以在任何属性上使用 @JsonSerialize 和 @JsonDeSerialize 注释。javadoc 在

```
 http://jackson.codehaus.org/1.2.1/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html 
```

我个人会使用序列化/反序列化技术，而不是在客户端进行转换，因为您可能最终会在多个地方进行转换。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T05:44:35.467

没有任何代码，我不得不根据你的问题猜测你在做什么。本教程[JSON 解析到/从使用 Jackson](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)向您展示如何将 ObjectMapper 转换为 JSON 的 Stringfiyed 表示，例如

```
"{"age":29,"messages":["msg 1","msg 2","msg 3"],"name":"mkyong"}" 
```

然后，当 Javascript 客户端收到这个字符串时，您将不得不使用内置的 JSON 解析函数或 jQuery 提供的函数来解析它。喜欢

```
 ... 
    var myJson = JSONString.parse() | jQuery.parseJSON(JSONString);
    ..

   myJson.age;  //29
   myJson.name; //"mkyong" 
```

尝试首先使用 parse() 解析它的原因是避免使用 jQuery，而浏览器已经为此提供了一个内置函数。但是，如果没有检测到这个函数，它会通过 jQuery 对其进行解析。

我希望这有帮助

**为了您的利益**

您的数据示例似乎是某种二进制数据，您正试图通过网络发送它。这可能会导致路由器过滤这些数据。如果您有兴趣，可以先看一下将此数据编码为 Base64，然后再将其流式传输到客户端。这很容易做到，因为那里已经有很多库了。

[有关此主题的一些资源。](https://stackoverflow.com/questions/201479/what-is-the-use-of-base-64-encoding)

所以它会像

```
SERVER
  1) Jackson creates JSON String
  2) Server encodes into Base64
  3) Send

CLIENT
  1) Receive
  2) Decode base64
  3) parse JSON String 
```

# sql - 是否可以使用 LIKE 语句在列中搜索多个术语？

> ID：15643724
> 
> 赞同：0
> 
> 时间：2013-03-26T17:33:02.313
> 
> 标签：sql, sql-server, dynamic-sql

我试图了解上述问题是否可行。我一直在概念上考虑它，基本上我想做的是：

指定可能出现在标题中的关键字。让我们使用“投资组合”和“迈克”这两个术语

我希望生成一个查询，允许我搜索 Portfolio 何时包含在标题或 Mike 中。这两个标题不必在一起。

例如，如果我有一个名为“Portfolio A”的标题和另一个标题“Mike 的最爱”，我希望将这两个标题都返回。

我在使用 LIKE 语句时遇到的问题如下：

```
 WHERE 1=1
 and rpt_title LIKE ''%'+@report_title+'%''' 
```

如果我要输入：'Portfolio，Mike'，它会搜索标题中出现的那个。

编辑：我应该更清楚一点。我相信我有必要将我的变量输入为“投资组合，迈克”，以便它找到多个值。这可能吗？

我假设您可以使用带有子字符串和替换的 charindex？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:36:33.110

是的，多个带有 OR 的 Like 语句可以正常工作——只要确保使用正确的括号：

```
SELECT ...
FROM ...
WHERE 1=1
 and (rpt_title LIKE '%Portfolio%' 
 or rpt_title LIKE '%Mike%') 
```

但是，我可能会建议您考虑使用全文搜索。

[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:56:02.693

我可以提出一个解决方案，您可以指定任意数量的掩码，而无需使用多个 LIKE -

```
DECLARE @temp TABLE (st VARCHAR(100))
INSERT INTO @temp (st)
VALUES ('Portfolio photo'),('- Mike'),('blank'),('else'),('est')

DECLARE @delims VARCHAR(30)
SELECT @delims = '|Portfolio|Mike|' -- %Portfolio% OR %Mike% OR etc.

SELECT t.st
FROM @temp t
CROSS JOIN (
    SELECT substr = 
        SUBSTRING(
            @delims, 
            number + 1,
            CHARINDEX('|', @delims, number + 1) - number - 1)
    FROM [master].dbo.spt_values n
    WHERE [type] = N'P'
        AND number <= LEN(@delims) - 1
        AND SUBSTRING(@delims, number, 1) = '|'
) s
WHERE t.st LIKE '%' + s.substr + '%' 
```

# mqtt - 消息未保留在 Apollo 服务器中

> ID：15643726
> 
> 赞同：1
> 
> 时间：2013-03-26T17:33:04.883
> 
> 标签：mqtt, apollo

我使用 fusesource 代码将 mqtt 消息发布到 Apollo 服务器时遇到问题。我用如下代码编写了消息发布者

```
connection.publish(topic, message.getBytes(),QoS.AT_LEAST_ONCE, true); 
```

我还编写了订阅该主题的消息消费者。如果我先启动消费者，再启动发布者，消费者可以正确获取所有消息。但是，如果我先启动发布者再启动消费者，消费者将不会收到消息。另外，我进入了 Apollo 管理控制台，在队列中找不到任何消息。（请参阅随附的屏幕截图）。

我应该怎么做才能解决这个问题？我不能让我的消费者一直运行，我不想丢失来自发布者的任何消息。当消费者离线时，代理（Apollo）不应该保留所有消息吗？如果是，我怎么看不到？

这似乎是一个愚蠢的问题，但我对 MQTT 很陌生，我确实需要一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:54:34.587

我怀疑一旦没有生产者或消费者附加到该主题，该主题就会被自动删除。要禁用自动删除“功能”，请在 apollo.xml 的 virual_host 配置元素中添加以下 XML 元素：

```
<topic auto_delete_after="0"/> 
```

未来版本的 apollo 将避免在持有保留消息[APLO-319](https://issues.apache.org/jira/browse/APLO-319)时删除该主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:49:47.113

这似乎是一个错误，因为您已将消息标记为保留。但是，我不知道 Apollo 对一个主题的多个保留​​消息的表现如何。您可能想在他们的邮件列表中提出这个问题。

# java - 使用 JPA 将键“PRIMARY”的重复条目持久保存到数据库中

> ID：15643732
> 
> 赞同：6
> 
> 时间：2013-03-26T17:33:38.910
> 
> 标签：java, mysql, hibernate, jpa

我在将 JPA 持久保存到我的数据库时出现错误，当我将第二个文件持久保存到数据库中时会发生错误。我需要导入大量数据集，每个数据集 5 张。即使某些相同的数据已经存在，也需要更新每个表。目前我收到以下错误

**错误**

```
17:26:35,315 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (http-localhost-127.0.0.1-8080-1) SQL Error: 1062, SQLState: 23000
17:26:35,316 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (http-localhost-127.0.0.1-8080-1) Duplicate entry '0' for key 'PRIMARY' 
```

**数据库脚本**

我创建数据库的脚本如下：

```
CREATE DATABASE IF NOT EXISTS sampleDB;

use sampleDB;

CREATE TABLE IF NOT EXISTS `Table1`(`mcc` int(10) NOT NULL,`mnc` int(10) NOT NULL,`operator` varchar(50) DEFAULT NULL,`country` varchar(50) DEFAULT NULL,

    PRIMARY KEY (`mcc`,`mnc`))ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `Table2`(`tac` int(10) NOT NULL,`marketingName` varchar(50) DEFAULT NULL,`manufacturer` varchar(50) DEFAULT NULL,

    `accessCapability` varchar(200) DEFAULT NULL,`model` varchar(50) DEFAULT NULL,`vendorName` varchar(50) DEFAULT NULL,

    `ueType` varchar(20) DEFAULT NULL,`os` varchar(20) DEFAULT NULL,`inputMode` varchar(20) DEFAULT NULL,PRIMARY KEY (`tac`))ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `Table3`(`causeClass` varchar(10) NOT NULL,`description` varchar(255) NOT NULL,PRIMARY KEY (`causeClass`))ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `Table4`(`causeCode` int(5) NOT NULL,`eventId` int(5) NOT NULL,`description` varchar(255) DEFAULT NULL,

    PRIMARY KEY (`causeCode`,`eventId`) ON UPDATE NO ACTION))ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `Table5`(`baseDataTableId` int(11) NOT NULL AUTO_INCREMENT,`dateTime` DATETIME NOT NULL,`eventId` int(5) NOT NULL,`causeClass` varchar(10) NOT NULL,

  `ueType` int(15) NOT NULL,`market` int(10) NOT NULL,`operator` int(10) NOT NULL,`cellId` tinyint(2) DEFAULT NULL,`duration` smallint(7) DEFAULT NULL,

  `causeCode` int(5) NOT NULL,`neVersion` varchar(7) DEFAULT NULL,`imsi` varchar(255) DEFAULT NULL,`hier3Id` varchar(255) DEFAULT NULL,`hier32Id` varchar(255) DEFAULT NULL,

  `hier321Id` varchar(255) DEFAULT NULL,PRIMARY KEY (`baseDataTableId`))ENGINE=InnoDB; 
```

**Java Hibernate 属性**

我的休眠属性如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
   xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
        http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
   <persistence-unit name="primary">
      <jta-data-source>java:jboss/datasources/MySqlDS</jta-data-source>
      <properties>
         <!-- Properties for Hibernate -->
         <property name="hibernate.hbm2ddl.auto" value="update" />
         <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
         <property name="hibernate.show_sql" value="false" />
         <property name="hibernate.format_sql" value="false" />
      </properties>
   </persistence-unit>
</persistence> 
```

**爪哇**

实体类示例：

```
@Entity
@Table(name = "Table3")
public class Table3 {

        @Id
        private int causeClass;
        private String description;

        public Table3(){}

        public Table3(int causeClass, String description) {
            super();
            this.causeClass = causeClass;
            this.description = description;
        }

        // getters & setters

} 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:00:03.467

确保您使用良好的 EntityManager 方法来更新现有实体。您似乎试图对现有实体进行持久化操作而不是合并。持久化对象时，尝试捕获 EntityExistsException 或 PersistenceException 并在 catch 块中调用 merge 方法。例如 ：

```
save(Enity item){
    try{
        //Try to insert your entity by calling persist method    
    }
    catch(EntityExistsException e){
        //Entity you are trying to insert already exist, then call merge method
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-23T10:49:18.653

当您尝试更新已存在的域对象时会发生此错误，例如

```
User user=UserDao.getUserById(1);
session.save(user); 
```

Hibernate 会像保存一个新对象一样对待它，它会发现存在一个重复的对象。

在更新你的对象之前首先从休眠中加载它，比如

```
User updatedUser=(User)session.load(User.class, 1);
updatedUser.setName("user name");
session.saveOrUpdate(updatedUser); 
```

# c# - 任务调度器（Task.Factory）和控制线程数

> ID：15643734
> 
> 赞同：4
> 
> 时间：2013-03-26T17:33:42.183
> 
> 标签：c#, multithreading, task-parallel-library

我一直在阅读多线程，以获得比常规的“将函数推送到线程池并等待它完成”方法更多的东西，这是非常基本的。

基本上，我想要更多地控制线程、传递取消令牌、获取返回值等的能力。使用 Task.factory （任务调度程序），这一切看起来都是可能的，据我所知，它运行在线程池。

如果是这种情况，如果我限制一般线程池上的线程数，那将适用于我的任务调度程序的实现还是？

我还读到使用您自己的线程池比线程池更好，我可以将这两者混合并获得我想要的控制吗？

欢迎任何建议！感谢您花时间解释更多人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:38:15.733

您可以创建一个[限制并发的 TaskScheduler](http://msdn.microsoft.com/en-us/library/ee789351.aspx)。然后，此自定义调度程序可用于创建您自己的`TaskFactory`，并启动使用您希望的控件自定义的任务。

[Parallel Extensions Samples](http://code.msdn.microsoft.com/ParExtSamples)项目包括许多可用作参考的自定义任务计划程序。

> 我还读到使用您自己的线程池比线程池更好，我可以将这两者混合并获得我想要的控制吗？

对于大多数一般用途，我实际上不同意这一点。.NET ThreadPool 非常高效且高度优化。它包括相当多的指标，用于自动缩放使用的线程数等。

话虽如此，如果您愿意，您始终可以`TaskScheduler`使用专用线程或您自己的“线程池”实现。

# mysql - 如何将 sql.gz 文件转储到 mysql

> ID：15643737
> 
> 赞同：13
> 
> 时间：2013-03-26T17:33:59.117
> 
> 标签：mysql, linux, mysqldump, compression

我已经将生产服务器上的几乎所有空间都分配给了我的表空间

现在我有一个大约 20gb 的压缩转储，需要转储到 mysql

问题是服务器没有太多空间来解压缩文件（大约需要 120 GB）

我使用了 beolw 命令，但我失败了，因为它首先解压缩文件，然后将输出重定向到 mysql

```
 gunzip dbdump.sql.gz | mysql -u root -proot123 -S /home/mysql55/tmp/mysql.sock 
```

有什么办法可以让我在不解压缩的情况下转储压缩文件

任何建议都非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T17:35:13.723

你应该告诉`gunzip`写到标准输出。您现在正在做的事情根本不会管道任何输出。

```
gunzip -c dbdump.sql.gz | mysql (args...) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-18T15:47:07.280

我知道这很荒谬，但它被压缩了两次，所以

1.  提炼`filename.sql.gz`
2.  将提取的文件重命名`filename.sql`为`filename.gz`
3.  再次提取

希望它会起作用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-16T06:22:00.413

We can achieve the same with the below command as well. Here i am using gzip

```
gzip -d < dbdump.sql.gz | mysql (args..) 
```

Another way is as given below

```
gzip -c dbdump.sql.gz | mysql (args..) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-25T05:53:32.760

您可以使用它导入。

```
zcat dbdump.sql.gz | mysql -u username -p dbname 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-22T14:24:35.110

您可以尝试即时解压缩文件，例如：

```
$ cat dbdump.sql.gz | gzip -cd | mysql 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-22T14:49:47.153

我建议使用 gunzip。这是 Windows 的一个：http: [//gnuwin32.sourceforge.net/packages/gzip.htm](http://gnuwin32.sourceforge.net/packages/gzip.htm)

解压缩后，您可以上传您的 .sql

# php - mysqli 查询删除

> ID：15643742
> 
> 赞同：0
> 
> 时间：2013-03-26T17:34:14.420
> 
> 标签：php, database, mysqli

我将数据库表中的所有数据显示为页面上的 HTML 表。当管理员选择一行时，它会向 HTML 表中的父行添加一个“删除”类。

然后我想从 mysqli 数据库中删除它。我会将行字段设置为变量并删除数据库中与其匹配的行吗？我不知道该怎么做，有人可以指出我正确的方向吗？

HTML

```
<table>
  <tr class="remove">
    <td>field1</td>
    <td>field2</td>
    <td>field3</td>
  </tr>
  <tr>
    <td>another field</td>
    <td>another field</td>
    <td>another field</td>
  </tr>
</table> 
```

Mysqli（相关示例）

```
 $mysqli->query("DELETE FROM $table WHERE Date="??" LIMIT 1"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:01:33.563

如果您正在使用`JavaScript`，我假设您在选择行时将类添加到行中，您可以执行以下操作：

**1\. 在每一行中包含一个隐藏的禁用输入：**

```
<tr class="remove">
    <td>field1</td>
    <td>field2</td>
    <td>

        field3

        <input type="hidden" disabled name="delete[]" value="<?php echo $id; ?>">

    </td>
</tr> 
```

**2.选择移除时启用隐藏输入：**

我不会猜测你是如何将`remove`类添加到行中的，但是这样做时，它会删除其中包含`disabled`的隐藏`delete[]`输入的属性。

**3\. 发布表格：**

`$_POST['delete']`发布后，您可以运行查询以删除数组中具有 ID 的所有行。

如果您使用准备好的语句，您可以使用以下查询 where `?`is `implode(',', $_POST['delete'])`：

```
"DELETE FROM " . $table . " WHERE FIND_IN_SET(id, ?) != 0" 
```

为了简单起见，我在这里假设您有一个唯一的`id`字段（不包含`,`s 作为其值的一部分）。显然更改为与您的数据库相关的任何内容。

# xml - 在同一服务中具有多端口的 WSDL

> ID：15643746
> 
> 赞同：0
> 
> 时间：2013-03-26T17:34:25.483
> 
> 标签：xml, xml-parsing, wsdl

我想使用编写的 WSDL 文件。

有两种端口类型

```
 <wsdl:portType name="ContentDirectory">
    <wsdl:operation name="GetSortCapabilities">
      <wsdl:input message="tns:GetSortCapabilitiesRequest" />
      <wsdl:output message="tns:GetSortCapabilitiesResponse" />
    </wsdl:operation>
    <wsdl:operation name="GetSystemUpdateID">
      <wsdl:input message="tns:NOTHING_INPUT" />
      <wsdl:output message="tns:GetSystemUpdateIDResponse" />
    </wsdl:operation>
  </wsdl:portType>

  <wsdl:portType name="ConnectionManager">
    <wsdl:operation name="GetCurrentConnectionIDs">
      <wsdl:input message= "tns:NOTHING_INPUT" />
      <wsdl:output message="tns:GetCurrentConnectionIDsResponse" />
    </wsdl:operation> 
    <wsdl:operation name="GetProtocolInfo">
      <wsdl:input message="tns:NOTHING_INPUT" />
      <wsdl:output message="tns:GetProtocolInfoResponse" />
    </wsdl:operation> 
  </wsdl:portType> 
```

和两个绑定

```
 <wsdl:binding name="ContentDirectory" type="tns:ContentDirectory">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="Browse">
      <soap:operation soapAction="http://www.forge.soa4d.org/DPWS/Samples/MediaRenderer/Browse/" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetSystemUpdateID">
      <soap:operation soapAction="http://www.forge.soa4d.org/DPWS/Samples/MediaRenderer/GetSystemUpdateID/" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="ConnectionManager" type="tns:ConnectionManager">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetCurrentConnectionIDs">
      <soap:operation soapAction="http://www.forge.soa4d.org/DPWS/Samples/MediaRenderer/GetCurrentConnectionIDs/" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetProtocolInfo">
      <soap:operation soapAction="http://www.forge.soa4d.org/DPWS/Samples/MediaRenderer/GetProtocolInfo/" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding> 
```

并使用两个端口进行服务

```
 <wsdl:service name="Media">
    <wsdl:port name="ContentDirectory" binding="tns:ContentDirectory">
      <soap:address location="http://localhost:8080/MediaServer/TESTWSDL" />
    </wsdl:port>
    <wsdl:port name="ConnectionManager" binding="tns:ConnectionManager">
      <soap:address location="http://localhost:8080/MediaServer/TESTWSDL" />
    </wsdl:port> 
  </wsdl:service> 
```

当我仅通过一个端口使用此服务时，我的客户端能够读取我的 WSDL。当我在两个端口上使用此服务时出现错误。（不同位置相同）

我在 W3 WSDL 规范中没有发现这方面的问题。

解决办法是什么？

# flash - 在 Flash CS6 中播放帧和声音的暂停

> ID：15643750
> 
> 赞同：1
> 
> 时间：2013-03-26T17:34:46.597
> 
> 标签：flash, flash-builder, flash-cs6

我创建了一个播放和暂停按钮的影片剪辑，这样随着动画的进行，我可以在该帧暂停然后播放以继续。但是，当卡通人物说出声音/声音时，当我暂停它时，声音无法停止。所以，应该在脚本中添加什么，以便在再次播放后，声音将从停止的地方继续播放。

我是否需要每次为脚本更改“var mySound:Sound = new MySound()”，因为声音文件每次都不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:22:02.160

当您通过调用它来播放声音时，`Sound.play()`它会返回一个`SoundChannel`对象。
然后，您可以通过调用来停止声音`SoundChannel.stop()`。

`Sound.play()`可以接收一个 int 参数，告诉从该`Sound`毫秒开始播放。

而且，该`Sound`对象`SoundChannel`有一个`position`属性可以告诉您播放了多少声音（以毫秒为单位）。

总而言之，您可以执行以下操作：

```
private var mySound:Sound = new MySound();
private var mySoundChannel:SoundChannel;
private var latestPosition:int = 0;

public function play():void
{
    mySoundChannel = mySound.play(latestPosition);
}

public function pause():void
{
    latestPosition = mySoundChannel.position;
    mySoundChannel.stop();
}

public function stop():void
{
    latestPosition = 0;
    mySoundChannel.stop();
} 
```

# emgucv - 无法让 EMGU.CV 中的 SURF 示例正常工作？

> ID：15643762
> 
> 赞同：0
> 
> 时间：2013-03-26T17:35:16.380
> 
> 标签：emgucv

我正在尝试检测两个图像中显示的模式。因此，我一直在尝试使用 emgu.CV 中的 SURF 算法，但是给出的“SURFFeature”示例给了我以下错误：

```
 An unhandled exception of type 'Emgu.CV.Util.CvException' occurred in Emgu.CV.dll

Additional information: OpenCV: norm == NORM_L1 || norm == NORM_L2 || norm == NORM_HAMMING 
```

任何想法如何解决这一问题？

当我尝试“Hello World”示例和人脸检测示例时，似乎都可以正常工作。

感谢您的任何建议！

福阿德。

PS：Emgu.CV 可以从这里下载：[http ://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T00:55:22.040

显然构建被搞砸了。

[http://www.emgu.com/bugs/show_bug.cgi?format=multiple&id=74](http://www.emgu.com/bugs/show_bug.cgi?format=multiple&id=74)

> 啊哈，找到了。这里的错误在 Emgu.Cv.Gpu/GpuBruteForceMatcher.cs 第 22 和 27 行。
> 
> 第 22 行当前显示为：L2Dist，
> 
> 它应该是：L2Dist = 4，
> 
> 第 27 行当前显示为：HammingDist
> 
> 它应该是： HammingDist = 6

使用这些更改重建 Emgu.CV.Gpu dll 并且它可以工作。

# jquery - Jquery 自动完成示例 - 不必要的代码？

> ID：15643768
> 
> 赞同：0
> 
> 时间：2013-03-26T17:35:31.900
> 
> 标签：jquery, jquery-mobile, autocomplete

在浏览 Stackoverflow 以解决要解决的自动完成问题时，我找到了我正在寻找的完美解决方案 - [http://jsfiddle.net/ULXbb/48/](http://jsfiddle.net/ULXbb/48/)

唯一的问题是...

```
$('a.ui-input-clear').click(function() {
    $("input[data-type='search']").val('');
    $("input[data-type='search']").trigger('keyup');
}); 
```

我不知道为什么这部分存在：S .... 显然 <a> 标签没有'ui-input-clear'。这意味着这个 jquery 代码不起作用......我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:40:11.433

如果您使用浏览器的开发工具查看生成的 DOM，您将看到以下元素：

```
<a href="#" class="ui-input-clear ui-btn ui-btn-up-c ui-btn-icon-notext ui-btn-corner-all ui-shadow ui-input-clear-hidden" title="clear text" data-theme="c">... 
```

这就是点击事件的目标。它是由 jQuery Mobile 库添加的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:40:24.943

有一个 onload 或`$(document).ready()`函数调用`autocomplete`，对吗？

事实上，它是`autocomplete`jQuery 库中的对象，它将此类添加`ui-input-clear`到附加自动完成功能的链接中。
请参阅[自动完成](http://jqueryui.com/autocomplete/)文档以了解。

# sql - 如何在 varchar2 字段上使用lead() 和 lag()？

> ID：15643770
> 
> 赞同：0
> 
> 时间：2013-03-26T17:35:36.083
> 
> 标签：sql, oracle11g, analytics, sliding-window, varchar2

**Oracle 11g** [到目前为止我在 SQL Fiddle 上的工作](http://sqlfiddle.com/#!4/5224c/1)

我在 varchar2 列上使用了**lead()**和**lag()函数。**使用以下规则，我想生成所需的结果。

1.  如果 lag_val 为空，则 '('
2.  如果 lag_val 与 set_a 相同，则 'and'
3.  如果 lag_val != set_a 那么 'or'
4.  如果lead_val 为空，那么')'

当我使用 nvl() 转换空值以便进行比较时，我得到“无效数字”。

**期望的输出**

```
 SEQNO SET_A LAG_VAL  LEAD_VAL  MENU_ENTRY
   ------------------------------------------
   1      CAKE  <null>  CAKE      (
   2      CAKE  CAKE    BEER      AND
   3      BEER  CAKE    BRATS     OR
   4      BRATS BEER    <null>    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:08:53.483

您的问题是您在字符串上使用“-”运算符，而不是超前/滞后。我想你想要这个：

```
select  seqno,
         set_a,
         lag_val,
         lead_val
    , case 
    when (lag_val ) is null then '('
    when (lead_val ) is null then ')'
    when (lag_val = set_a) then 'and'    
    else  'or'
    end  as menu_entry
from ( select seqno, 
        set_a, 
        lag(set_a,1) over (order by seqno) as lag_val,
--        lag(to_number,'XX') over (order by seqno) as lag_val,
        lead(set_a,1) over (order by seqno) as lead_val       
 from menu_items)
order by seqno 
```

# php - 利用浏览器缓存、标头过期和 Etags 不起作用

> ID：15643775
> 
> 赞同：0
> 
> 时间：2013-03-26T17:35:44.730
> 
> 标签：php, .htaccess, caching, header, etag

我知道已经有很多帖子谈论我的问题。但是，我尝试了一些修改来利用浏览器缓存、标题过期和 Etags（在 PageSpeed 和 Yslow 上）但它不起作用。

我对我的 .htaccess 文件进行了我在网上找到的所有修改。我也在 PHP 中对我的标头进行了很多修改。没有任何效果。

这是我的 .htaccess 的实际源代码：

* * *

```
AddType text/javascript .js

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 1 seconds"
    ExpiresByType image/x-icon "access plus 2692000 seconds"
    ExpiresByType image/jpeg "access plus 2692000 seconds"
    ExpiresByType image/png "access plus 2692000 seconds"
    ExpiresByType image/gif "access plus 2692000 seconds"
    ExpiresByType application/x-shockwave-flash "access plus 2692000 seconds"
    ExpiresByType text/css "access plus 2692000 seconds"
    ExpiresByType text/javascript "access plus 2692000 seconds"
    ExpiresByType application/x-javascript "access plus 2692000 seconds"
    ExpiresByType text/html "access plus 600 seconds"
    ExpiresByType application/xhtml+xml "access plus 600 seconds"
</IfModule>

<IfModule mod_headers.c>
    <FilesMatch "\\.(ico|jpe?g|png|gif|swf|css|js)$">
        Header set Cache-Control "max-age=2692000, public"
    </FilesMatch>
    <FilesMatch "\\.(x?html?|php)$">
        Header set Cache-Control "max-age=600, private, must-revalidate"
    </FilesMatch>
    Header unset ETag
    Header unset Last-Modified
</IfModule> 
```

* * *

有关我的服务器的信息，您可以在这里查看：[http ://www.akioz.com/info.php](http://www.akioz.com/info.php)

# oracle11g - 查询根据单独的状态字段对同一字段执行日期算术？

> ID：15643781
> 
> 赞同：0
> 
> 时间：2013-03-26T17:36:02.417
> 
> 标签：oracle11g

我有一个包含类似于以下数据的 Oracle 表：

```
身份证 | 状态 | 时间
-------------------------------------------
 1 | 输入 | 2013/26/03 00:00
 1 | 输出 | 2013/26/03 07:00
 1 | 输入 | 2013/27/03 03:00
 2 | 输入 | 2013/26/03 01:00
 2 | 输出 | 2013/26/03 06:00
 3 | 输入 | 2013/26/03 01:30
        .
        .

```

STATUS 代表签入和签出，其中 ID 代表个人。

我想出了一个使用子查询的查询，但它似乎不优雅且效率低下。是否可以编写单个查询（意味着没有子查询）来计算每个 ID 的经过时间（IN -> OUT）？

更新：另外，是否可以显示个人外出的经过时间？例如，在上面列出的数据中，个人 #1 的输入时间为 7 小时，但输出时间为 20 小时（2013/27/03 03:00 - 2013/26/03 07:00）。由于这将跨记录计算，我不确定如何编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:39:17.950

尝试这个

```
select timein.id, 24 * (timeout.time - timein.time) ElapsedTime
from t timein 
left outer join t timeout on timein.id = timeout.id
where timein.status = 'IN' and timeout.status = 'OUT' 
```

如果您的时间字段是 char 数据类型，那么您需要这样做

```
select timein.id, 24 * (TO_DATE(timeout.time, 'YYYY-DD-MM hh24:mi') 
                      - TO_DATE(timein.time, 'YYYY-DD-MM hh24:mi')) ElapsedTime
from t timein 
left outer join t timeout on timein.id = timeout.id
where timein.status = 'IN' and timeout.status = 'OUT' 
```

尝试这个几天

```
select timein.id, NUMTODSINTERVAL((timeout.time - timein.time),'day') ElapsedTime
from t timein 
left outer join t timeout on timein.id = timeout.id
where timein.status = 'IN' and timeout.status = 'OUT' 
```

对于进出时间，您可以使用它并根据您的数据进行修改

```
with cte as
(
select t.id, status,
24 * (t.time - LAG(t.time) 
  OVER (partition by id ORDER BY t.time)) AS diff
from t
)
select t1.id, t1.diff timeIn, t2.diff timeOut
from cte t1
LEFT OUTER JOIN
cte t2 on t1.id = t2.id  and t2.status = 'IN' and t2.diff is not null
where t1.status = 'OUT' 
```

# android - ListView 在更新日期后滚动时显示不正确的数据

> ID：15643783
> 
> 赞同：0
> 
> 时间：2013-03-26T17:36:23.823
> 
> 标签：android, database, listview, simplecursoradapter

我在课程中列出了练习清单。用户可以修改此练习以显示或不显示。当他点击练习时，改变状态（显示或不显示）练习。对数据库所做的所有更改都可以正常工作。但是当用户进行更改时，当您滚动图片时，“检查​​”在出现的行中显示不正确。

```
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);   
 ....
 db = new MyDatabase(this);
 getOnListExes();
 db.close();
}
....
    public  void getOnListExes() {  
    onListExesChek = db.getListExes(prog_man, prog_woman, orderBy);         
    sAdapter = new SimpleCursorAdapter(this, 
            R.layout.exeslist, onListExesChek, 
            new String[] {"exes_bodypart", "exes_name", "exes_name"},  
            new int[] {R.id.exesPartlist_chek, R.id.exesNamelist_chek,
 R.id.chek_img}) {

        public View getView(int position, View convertView, ViewGroup parent) {
                View row = super.getView(position, convertView, parent);
                TextView exesPartlist_chek = 
(TextView) row.findViewById(R.id.exesPartlist_chek);
                TextView exesNamelist_chek = 
(TextView) row.findViewById(R.id.exesNamelist_chek);
                ImageView imageGender = 
(ImageView) row.findViewById(R.id.chek_img);
                return row;
        }
    };
    sAdapter.setViewBinder(new MyViewBinder());
    listExesChek.setAdapter(sAdapter);
   }

public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    positionChek = position;
    selectExe_id = Long.toString(id);
    db = new MyDatabase(this);
    onListExesChek = db.getListExes(prog_man, prog_woman, orderBy); 
    onListExesChek.moveToPosition(positionChek);

    if (
onListExesChek.getInt(onListExesChek.getColumnIndex("prog_man_chek")) 
>= Integer.valueOf(prog_man).intValue() &
        onListExesChek.getInt(onListExesChek.getColumnIndex("prog_woman_chek")) 
>= Integer.valueOf(prog_woman).intValue()) {
        if(prog_man.equals("1")) {
            prog_man_chek = new ContentValues();
            prog_man_chek.put("prog_man_chek", "0");    
            int upProg_man_chek = db.setExe(prog_man_chek,
 selectExe_id);
        }
        if(prog_woman.equals("1")) {
            prog_woman_chek = new ContentValues();
            prog_woman_chek.put("prog_woman_chek", "0");
            int upProg_woman_chek = db.setExe(prog_woman_chek,
 selectExe_id);
    } else {
        if(prog_man.equals("1")) {
            prog_man_chek = new ContentValues();
            prog_man_chek.put("prog_man_chek", "1");
            int upProg_man_chek = db.setExe(prog_man_chek,
 selectExe_id); 
        }
        if(prog_woman.equals("1")) {
            prog_woman_chek = new ContentValues();
            prog_woman_chek.put("prog_woman_chek", "1");
            int upProg_woman_chek = db.setExe(prog_woman_chek,
 selectExe_id);
        }
    }
    db.close();
    updateView(position);
}

void updateView(int index){
    db = new MyDatabase(this);
    onListExesChek = db.getListExes(prog_man, prog_woman, orderBy); 
    onListExesChek.moveToPosition(positionChek);
    View v = listExesChek.getChildAt(index - 
            listExesChek.getFirstVisiblePosition());
    if (
    onListExesChek.getInt(onListExesChek.getColumnIndex("prog_man_chek")) 
>= Integer.valueOf(prog_man).intValue() &
    onListExesChek.getInt(onListExesChek.getColumnIndex("prog_woman_chek")) 
>= Integer.valueOf(prog_woman).intValue()
    ) {
        ImageView imageGender = (ImageView) v.findViewById(R.id.chek_img);
        imageGender.setImageResource(R.drawable.check); 
    } else {
        ImageView imageGender = (ImageView) v.findViewById(R.id.chek_img);
        imageGender.setImageResource(R.drawable.notchek);
    }
    db.close();
}

class MyViewBinder implements SimpleCursorAdapter.ViewBinder {  
    public boolean setViewValue (View view, Cursor cursor, int columnIndex) {
        switch (view.getId()) {
        case R.id.chek_img:
            if (onListExesChek.getInt(onListExesChek.
getColumnIndex("prog_man_chek")) 
>= Integer.valueOf(prog_man).intValue() &
onListExesChek.getInt(onListExesChek.getColumnIndex("prog_woman_chek")) 
>= Integer.valueOf(prog_woman).intValue()
                    ) {
                ((ImageView) view).setImageResource(R.drawable.check);
            } else {
                (
(ImageView) view).setImageResource(R.drawable.notchek);
            }     
        return true;
      }
      return false;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T05:40:07.050

ListViews 回收视图，这意味着首先一组基本的列表条目是从 XML 扩展而来的。

更多检查

[android listview 滚动后显示虚假数据（自定义适配器）](https://stackoverflow.com/questions/11972704/android-listview-displays-false-data-after-scrolling-custom-adapter#subheader%20answers-subheader#answer-11983375)

[滚动后 ListView 未显示正确的值](https://stackoverflow.com/questions/8623984/listview-is-not-showing-correct-values-after-scrolling#answer-8624066)

两者都适合我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:57:13.693

这是 ListView 的视图回收的副作用。您没有在 getView 方法中设置默认资源，因此 ImageView 将“保留”您在 updateView 方法中设置的任何内容。这种效果在较长的列表中非常明显，您会看到重复的错误状态。

您应该能够通过在 getView 方法中设置 ImageView 的状态来解决此问题。

# youtube-api - 使用 iv_load_policy=3 删除 Youtube 注释

> ID：15643785
> 
> 赞同：9
> 
> 时间：2013-03-26T17:36:27.333
> 
> 标签：youtube-api

我将附加`iv_load_policy=3`到我的 YouTube URL 的末尾以删除视频上的注释，但我发现它不起作用。看看谷歌，这个问题似乎在一年前就已经解决了。我想知道是否有人知道这个错误是否又回来了或者是否有解决方法？

我已经在 Win7 上的 Chrome、FF、Safari 和 IE9 上进行了测试。

[http://www.youtube.com/watch?v=87kezJTpyMI&hd=1&iv_load_policy=3](http://www.youtube.com/watch?v=87kezJTpyMI&hd=1&iv_load_policy=3) [https://developers.google.com/youtube/player_parameters#iv_load_policy](https://developers.google.com/youtube/player_parameters#iv_load_policy)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T18:16:44.710

您只能在使用播放器 API 之一嵌入视频时使用 iv_load_policy - 您不能只更改 youtube 观看页面网址。

例如，如果您想在没有注释的情况下嵌入上面链接的视频，您可以使用此链接： [http ://www.youtube.com/embed/87kezJTpyMI?hd=1&iv_load_policy=3](http://www.youtube.com/embed/87kezJTpyMI?hd=1&iv_load_policy=3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T18:15:56.253

在扩展中使用它

```
$("div.video-annotations").css("display", "none"); 
```

或者在 Stylebot 扩展中

```
div.video-annotations {display:none;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-30T16:29:39.483

干杯。还想从嵌入的 Youtube 视频中删除注释。刚刚将 &iv_load_policy=3 添加到视频 URL 的末尾。像魅力一样工作：D

# c# - 使用 2 个 UpdatePanel 时出现问题

> ID：15643786
> 
> 赞同：0
> 
> 时间：2013-03-26T17:36:30.437
> 
> 标签：c#, asp.net, vb.net

我有 2 个 UpdatePanel，第一个有一个按钮，第二个有一个中继器，我不知道为什么当我单击查找时，即使单击后数据源发生更改，中继器也不会更改。

```
<asp:UpdatePanel ID="pnl" runat="server" >
 <ContentTemplate>
.
.

<asp:Button ID="btnfind" runat="server" Text="Find "  OnClick="btnfind_Click" />

<ContentTemplate>
</asp:UpdatePanel>

<asp:UpdatePanel ID="upd" runat="server" UpdateMode="Conditional" >
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnfind" EventName="Click" />
    </Triggers>

    <ContentTemplate>
   <asp:Repeater runat="server" ID="rptItems"  EnableViewState="false">
...
</asp:Repeater>
             </div></div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

# android - 如何在自定义适配器中以编程方式使 RadioButton 不膨胀？

> ID：15643787
> 
> 赞同：0
> 
> 时间：2013-03-26T17:36:32.447
> 
> 标签：android, custom-adapter

全部，

我有一个自定义适配器，用于将测验问题/答案膨胀到 ListView 中。每个问题（ListView 中的单个项目）都有可变数量的答案，（但最大答案数 (5) 是静态的）。

除了使用答案字符串填充每个 RadioButton 的文本（使用 setText）之外，我还想使用我的自定义适配器来评估 RadioGroup 中的所有 RadioButtons 是否具有与之关联的答案并相应地对其进行膨胀（或不膨胀）。理想情况下，我想以编程方式“取消膨胀” RadioButton 或等效效果，因为我能够评估自定义适配器中的答案有效性。

我试过了`radioButton.setHeight(0)`，`radioButton.setMaxHeight(0)`但没有运气。

我从中提取 answerStrings 的 xml 资源文件定义如下：

答案 xml 资源文件将所有答案字符串存储在单个字符串数组中，并假设每个问题有 5 个答案以用于索引目的。有效答案由字符串数组中的非空项表示。没有有效的答案由空项目存根表示。

```
<string-array
    name="answer_array">

    <!-- question 1 answers -->
        <item>question 1 answer A</item>
        <item>question 1 answer B</item>
    <item>question 1 answer C</item>
    <item>question 1 answer D</item>
    <item>question 1 answer E</item>

    <!-- question 2 answers --> 
    <item>question 2 answer A</item>
    <item>question 2 answer B</item>
    <item></item>
    <item></item>
    <item></item>

<!-- question 3 answers -->
        <item>question 3 answer A</item>
    <item>question 3 answer B</item>
    <item>question 3 answer C</item>
    <item></item>
    <item></item>

</string-array> 
```

**我的测验布局文件如下：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:padding="4dip"
android:gravity="center_horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="vertical" >

    <!-- quiz question -->
    <TextView
        android:id="@+id/question"  
        android:layout_gravity="left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"/> 

        <!--  answers for each question -->
        <RadioGroup 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:orientation="vertical"
            android:layout_marginTop="5dip"
            android:id="@+id/radiogroup">

                <RadioButton
                    android:id="@+id/A_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:onClick="doNothing"/> 

                <RadioButton
                    android:id="@+id/B_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:onClick="doNothing"/>   

                <RadioButton
                    android:id="@+id/C_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:onClick="doNothing"/> 

                <RadioButton
                    android:id="@+id/D_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:onClick="doNothing"/>   

                <RadioButton
                    android:id="@+id/E_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"            
                    android:onClick="doNothing"/>

        </RadioGroup>   

</LinearLayout>

</LinearLayout> 
```

**在我的自定义适配器中，我正在尝试执行以下操作；**

```
private ViewHolder initRadioButtonText(ViewHolder holder, Custom quiz_row_data) {

    /* check if valid answer */
    int length = (quiz_row_data.getA_AnswerString()).length();

    if(length == 0) {
        holder.A_button.setHeight(0);
        //holder.A_button.setMaxHeight(0);
    }
    else
            holder.A_button.setText(quiz_row_data.getA_AnswerString());

    /* ..... etc etc for the other answer buttons ..... */

    return holder;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:41:45.477

如果`A_button`是您不想显示的按钮，则只需使用

```
holder.A_button.setVisibility(RadioButton.GONE); 
```

`layout`这将在您致电之前将其完全删除

```
holder.A_button.setVisibility(RadioButton.VISIBLE); 
```

如果您不担心将其移除以为其他`View`s 腾出空间，请使用

```
holder.A_button.setVisibility(RadioButton.INVISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:57:01.493

如果您真的想将按钮高度更改为零，正确的方法是使用`LayoutParams`：

```
holder.A_button.setLayoutParams(new RadioGroup.LayoutParams(RadioGroup.LayoutParams.WRAP_CONTENT, 0)); 
```

否则，第二种解决方案是切换可见性，如 codeMagic 所示。

# sql - Scala SQL DSL（内部/外部）

> ID：15643796
> 
> 赞同：2
> 
> 时间：2013-03-26T17:36:45.120
> 
> 标签：sql, scala, dsl

我一直在研究 scala，主要是关于如何构建类似于 C# LINQ/SQL 的 DSL。使用 C# LINQ 查询提供程序后，很容易引入我们自己的自定义查询提供程序，它将 LINQ 查询转换为我们自己的专有数据存储脚本。我在 scala 中寻找类似的东西，例如。

```
 val query = select Min(Close), Max(Close)
 from   StockPrices 
 where  open > 0 
```

首先，这甚至可以使用内部 DSL 在 scala 中实现。

高度赞赏这方面的任何想法/想法。

我还是 Scala 领域的新手，但开始研究 Scala MetaProgramming & Slick。我对 Slick 的抱怨是我想让我的 DSL 接近 SQL 查询——类似于上面的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:33:30.927

没有办法拥有与您提供的示例完全相同的内部 DSL（当前版本）。

使用我仍然从[这个答案](https://stackoverflow.com/questions/14959561/function-type-of-all-methods-of-a-single-class-in-scala)中获得的宏，我能得到的最接近（相对快）是：

```
select(Min(StockPrices.Open), Max(StockPrices.Open))
  .from(StockPrices) 
```

创建一个`real`解决方案需要相当长的时间。如果您愿意这样做，您可以使用宏（不是一个简单的主题）走得很远。

如果您真的想要完全相同的语法，我建议您使用[XText](http://www.eclipse.org/Xtext/)之类的东西，它允许您使用基于 Eclipse 的“免费”编辑器创建 DSL。

上述示例所需的代码（我没有包含提到的宏）：

```
trait SqlElement {
  def toString(): String
}

trait SqlMethod extends SqlElement {
  protected val methodName: String
  protected val arguments: Seq[String]

  override def toString() = {
    val argumentsString = arguments mkString ","
    s"$methodName($argumentsString)"
  }
}

case class Select(elements: Seq[SqlElement]) extends SqlElement {
  override def toString() = s"SELECT ${elements mkString ", "}"
}

case class From(table: Metadata) extends SqlElement {
  private val tableName = table.name
  override def toString() = s"FROM $tableName"
}
case class Min(element: Metadata) extends SqlMethod {
  val methodName = "Min"
  val arguments = Seq(element.name)
}
case class Max(element: Metadata) extends SqlMethod {
  val methodName = "Max"
  val arguments = Seq(element.name)
}

class QueryBuilder(elements: Seq[SqlElement]) {
  def this(element: SqlElement) = this(Seq(element))

  def from(o: Metadata) = new QueryBuilder(elements :+ From(o))
  def where(element: SqlElement) = new QueryBuilder(elements :+ element)
  override def toString() = elements mkString ("\n")
}

def select(args: SqlElement*) = new QueryBuilder(Select(args))

trait Column
object Column extends Column

object tables {

  object StockPrices$ {
    val Open: Column = Column
    val Close: Column = Column
  }
  val StockPrices = StockPrices$
} 
```

然后使用它：

```
import tables._
import StockPrices._

select(Min(StockPrices.Open), Max(StockPrices.Open))
  .from(StockPrices)
  .toString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:58:03.657

这是一个令人钦佩的项目，但它已经开始并在一般版本中可用。

当然，我说的是[Slick](http://slick.typesafe.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T16:19:14.693

如果 Scala / Java 互操作性对您来说不是太大的问题，并且如果您愿意使用与您建议的语法相比具有一些语法怪癖的内部 DSL，那么[jOOQ](http://www.jooq.org)正在成为一种流行的替代方案[光滑](http://slick.typesafe.com/)。[jOOQ 手册](http://www.jooq.org/doc/latest/manual/getting-started/jooq-and-scala/)中的一个示例：

```
for (r <- e
    select (
      T_BOOK.ID * T_BOOK.AUTHOR_ID,
      T_BOOK.ID + T_BOOK.AUTHOR_ID * 3 + 4,
      T_BOOK.TITLE || " abc" || " xy"
    )
    from T_BOOK
    leftOuterJoin (
      select (x.ID, x.YEAR_OF_BIRTH)
      from x
      limit 1
      asTable x.getName()
    )
    on T_BOOK.AUTHOR_ID === x.ID
    where (T_BOOK.ID <> 2)
    or (T_BOOK.TITLE in ("O Alquimista", "Brida"))
    fetch
) {
  println(r)
} 
```

# python - Pyramid：会话和静态资产

> ID：15643798
> 
> 赞同：8
> 
> 时间：2013-03-26T17:36:47.127
> 
> 标签：python, pyramid

让我解释一下问题：

我通过 Pyramid 为我的静态资产提供服务：

```
config.add_static_view(name='static', path='/var/www/static') 
```

它工作正常。

现在，我有一个在数据库中创建会话的自定义会话工厂。它检查浏览器是否提供会话 cookie。如果是这样，它会从数据库中找到一个会话。如果没有，则在 DB 中创建一个新会话，并将一个 cookie 返回给浏览器。

到目前为止，一切都很好。

现在，在我的`home_view`（生成我的主页）内部，我不会以任何方式访问请求变量：

```
@view_config(route_name='home', renderer="package:templates/home.mak")
def home_view(request):
    return {} 
```

因此，当用户访问主页时，不会在服务器上创建会话。我认为这是因为 Pyramid 懒惰地创建会话**-**只有当您访问时`request.session`。因此，主页请求的响应标头不包含任何`Set-Cookie`会话标头。

现在在主页的 mako 模板中，我正在为 JavaScript 和 CSS 文件生成静态 URL...

```
<link rel="stylesheet" href="${request.static_url(...)}"

<script src="${request.static_url(...)}"></script> 
```

现在，由于我从 Pyramid 提供静态资产，因此对这些资产的所有请求都通过整个 Pyramid 机器。

因此，当我的浏览器发送获取静态资产的请求时，Pyramid 会如何创建会话。也就是说，当浏览器发送对静态资产的请求时，Pyramid 正在数据库中创建会话并发送会话 cookie。这是问题#1。

**浏览器并行**发送所有静态资产请求。我正在使用最新版本的 Firefox 和 Chrome。由于对实际 HTML 文档的 HTTP 请求没有返回任何`Set-Cookie`标头，因此对静态资产的请求没有任何 cookie 标头。这意味着 Pyramid 看不到任何请求的会话 cookie，并且它在数据库中为它为静态资产获得的每个请求创建一个新会话。

如果我在我的主页上获取 7 个静态资产，并且创建了 7 个会话条目。这是因为所有这些请求都与服务器并行，并且没有会话 cookie，因此 Pyramid 为每个请求创建一个会话。

如果我故意将会话作为主页请求的一部分访问，则不会出现此问题。它在数据库中创建一个会话并向浏览器发送一个 cookie，然后浏览器将它发送回它从服务器请求的每个静态资产（并行）。

```
@view_config(route_name='home', renderer="package:templates/home.mak")
def home_view(request):
    if request.session: pass
    return {} 
```

我应该如何防止在静态资产请求上创建会话。更好的是，我希望 Pyramid 在收到静态资产请求时甚至不接触会话工厂——这可能吗？

其次，我不明白为什么 Pyramid 在静态请求上创建一个新会话？

***更新***

这是会话工厂。

```
def DBSessionFactory(
        secret,
        cookie_name="sess",
        cookie_max_age=None,
        cookie_path='/',
        cookie_domain=None,
        cookie_secure=False,
        cookie_httponly=False,
        cookie_on_exception=True
    ):

    # this is the collable that will be called on every request
    # and will be passed the request
    def factory(request):
        cookieval = request.cookies.get(cookie_name)
        session_id = None
        session = None

        # try getting a possible session id from the cookie
        if cookieval is not None:
            try:
                session_id = signed_deserialize(cookieval, secret)
            except ValueError:
                pass

        # if we found a session id from  the cookie
        # we try loading the session
        if session_id is not None:
            # _load_session will return an object that implements
            # the partial dict interface (not complete, just the basics)
            session = _load_session(session_id)

        # if no session id from cookie or no session found
        # for the id in the database, create new
        if session_id is None or session is None:
            session = _create_session()

        def set_cookie(response):
            exc = getattr(request, 'exception', None)
            if exc is not None and cookie_on_exception == False:
                return
            cookieval = signed_serialize(session.session_id, secret)
            response.set_cookie(
                cookie_name,
                value=cookieval,
                max_age = cookie_max_age,
                path = cookie_path,
                domain = cookie_domain,
                secure = cookie_secure,
                httponly = cookie_httponly,
            )

        def delete_cookie(response):
            response.delete_cookie(
                cookie_name,
                path = cookie_path,
                domain = cookie_domain,
            )

        def callback(request, response):
            if session.destroyed:
                _purge_session(session)
                delete_cookie(response)
                return

            if session.new:
                set_cookie(response)

            # this updates any changes to the session
            _update_session(session)

        # at the end of request
        request.add_response_callback(callback)

        # return the session from a call to the factory
        return session

    # return from session factory
    return factory 
```

接着，

```
factory = DBSessionFactory('secret')
config.set_session_factory(factory) 
```

***更新***

我的自定义身份验证：

```
class RootFactory:
    __acl__ = [
        (Allow, Authenticated, 'edit'),

        # only allow non authenticated users to login
        (Deny, Authenticated, 'login'),
        (Allow, Everyone, 'login'),
    ]

    def __init__(self, request):
        self.request = request

class SessionAuthenticationPolicy(CallbackAuthenticationPolicy):
    def __init__(self, callback=None, debug=False):
        self.callback = callback
        self.debug = debug

    def remember(self, request, principal, **kw):
        return []

    def forget(self, request):
        return []

    def unauthenticated_userid(self, request):
        if request.session.loggedin:
            return request.session.userid
        else:
            return None 
```

接着，

```
config.set_root_factory(RootFactory)

config.set_authentication_policy(SessionAuthenticationPolicy())
config.set_authorization_policy(ACLAuthorizationPolicy()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:44:41.737

这是一个重现问题的虚拟项目：

1.  设置一个 virtualenv 环境并在其中安装 Pyramid。

2.  安装一个启动项目：`pcreate -s starter IssueApp`

3.  删除所有不必要的文件，以便您拥有这个简单的树：

树

```
.
├── CHANGES.txt
├── development.ini
├── issueapp
│   ├── __init__.py
│   └── static
│       └── pyramid.png
├── README.txt
└── setup.py 
```

请注意，我们会将整个应用程序写入`__init__.py`文件中——因此其他所有内容都将被删除。

现在安装项目：`(env) $ python setup.py develop`这会将您的项目安装到虚拟环境中。

`development.ini`文件：

```
[app:main]
use = egg:IssueApp#main

pyramid.reload_all = true
pyramid.reload_templates = true
pyramid.debug_all = true
pyramid.debug_notfound = true
pyramid.debug_routematch = true
pyramid.prevent_http_cache = true
pyramid.default_locale_name = en

[server:main]
use = egg:waitress#main
host = 0.0.0.0
port = 7777

[loggers]
keys = root, issueapp

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console

[logger_issueapp]
level = INFO
handlers =
qualname = issueapp

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s 
```

`__init__.py`文件：

```
from pyramid.config import Configurator

from pyramid.view import view_config
from pyramid.response import Response

from pyramid.authentication import CallbackAuthenticationPolicy
from pyramid.authorization import ACLAuthorizationPolicy

from pyramid.security import (
    Allow, Deny,
    Everyone, Authenticated,
)

def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    config = Configurator(settings=settings)

    #config.add_static_view('static', 'static', cache_max_age=3600)
    config.add_static_view(name='static', path='issueapp:static')
    config.add_route('home', '/')

    config.set_root_factory(RootFactory)
    config.set_authentication_policy(DummyAuthPolicy())
    config.set_authorization_policy(ACLAuthorizationPolicy())

    config.scan()
    return config.make_wsgi_app()

@view_config(route_name='home')
def home_view(request):
    src = request.static_url('issueapp:static/pyramid.png')
    return Response('<img src='+ src + '>')

class RootFactory:
    __acl__ = [
        (Allow, Authenticated, 'edit'),
        (Deny, Authenticated, 'login'),
        (Allow, Everyone, 'login'),
    ]

    def __init__(self, request):
        self.request = request

class DummyAuthPolicy(CallbackAuthenticationPolicy):
    def __init__(self, callback=None, debug=False):
        self.callback = callback
        self.debug = debug

    def remember(self, request, principal, **kw):
        return []

    def forget(self, request):
        return []

    def unauthenticated_userid(self, request):
        # this will print the request url
        # so we can know which request is causing auth code to be called            
        print('[auth]: ' + request.url)

        # this means the user is authenticated
        return "user" 
```

现在运行应用程序

```
pserve  development.ini  --reload
Starting subprocess with file monitor
Starting server in PID 2303.
serving on http://0.0.0.0:7777 
```

最后，清除浏览器中的所有历史记录（这很重要，否则问题可能不会自行显现）并访问该页面。这会打印在控制台上：

```
[auth]: http://192.168.56.102:7777/static/pyramid.png 
```

这表明正在为静态请求调用身份验证代码。

现在，当我将日志级别设置为 时`DEBUG`，这是控制台在访问页面时的输出：

```
pserve development.ini --reload
使用文件监视器启动子进程
在 PID 2339 中启动服务器。
服务于 http://0.0.0.0:7777
2013-03-27 03:40:55,539 DEBUG [issueapp][Dummy-2] 路由匹配 url http://192.168.56.102:7777/；route_name：'home'，path_info：'/'，模式：'/'，matchdict：{}，谓词：''
2013-03-27 03:40:55,540 DEBUG [issueapp][Dummy-2] debug_authorization of url http://192.168.56.102:7777/（视图名称''针对上下文）：允许（未注册权限）
2013-03-27 03:40:55,685 调试 [issueapp][Dummy-3] 路由匹配 url http://192.168.56.102:7777/static/pyramid.png；route_name：'__static/'，path_info：'/static/pyramid.png'，模式：'static/*subpath'，matchdict：{'subpath'：（'pyramid.png'，）}，谓词：''
[认证]：http://192.168.56.102:7777/static/pyramid.png
2013-03-27 03:40:55,687 DEBUG [issueapp][Dummy-3] debug_authorization url http://192.168.56.102:7777/static/pyramid.png（视图名称''针对上下文）：ACLDenied 权限'__no_permission_required__ ' via ACE '' 在 ACL [('Allow', 'system.Authenticated', 'edit'), ('Deny', 'system.Authenticated', 'login'), ('Allow', 'system.Everyone' , 'login')] 关于主体 ['system.Everyone', 'system.Authenticated', 'user'] 的上下文

```

* * *

请注意，该`[auth]: ...`消息仅打印一次——针对静态资产请求，而不是针对主页请求。这很奇怪，因为这意味着针对静态资产而不是针对正常请求咨询身份验证策略。（当然，除非涉及许可，在我看来不是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:57:03.690

我无法在一个虚拟项目中重现此行为，这使我相信您的某些配置会影响此处未显示的内容。显然，如果调用任何身份验证，将根据您的身份验证策略创建会话。静态资产（默认情况下）已注册，`NO_PERMISSION_REQUIRED`这意味着它们不会调用 Pyramid 中的任何身份验证 API（我已经验证是这种情况）。

对静态资产的请求确实会调用整个请求管道，这意味着如果您在任何订阅者中有任何代码，或者您的根工厂调用`has_permission`或其他安全 API，或者直接接触会话本身，那么这将解释您所看到的行为因为您的会话与您的身份验证相关联。

# php - 显示 JW 播放器

> ID：15643800
> 
> 赞同：1
> 
> 时间：2013-03-26T17:37:02.543
> 
> 标签：php, ajax, jwplayer

我的页面有一个文本输入和一个按钮，用户必须在文本字段中填写一个引用可播放媒体文件（mp4）的 URL，然后单击按钮

单击按钮时，脚本正在运行，并且 ajax 将 url 值传递给 PHP 文件，该文件进行一些验证并将响应发回

如果一切正常，它应该用 JW 播放器替换 DIV 标签，用户可以播放媒体

我通过用纯文本或图像替换DIV标签来测试整个过程，它运行顺利

当我尝试用 jw 播放器组件替换它时，它没有显示任何东西

我通过将它直接插入到 HTML 代码中来测试 jw 并且它运行顺利

## 这是完整的 index.html

```
 <!DOCTYPE html>
    <html>
    <head>
    <script type="text/javascript" src="/ajax4/jwplayer.js"></script>
    <script type="text/javascript">jwplayer.key="RXVe0CXFsIS8pAar5ezgSLJqb9jfx7rDOBxkVw==";</script>
    <script type="text/javascript"><!--

    function get_XmlHttp() {
      var xmlHttp = null;

      if(window.XMLHttpRequest) {       // for Forefox, IE7+, Opera, Safari, ...
        xmlHttp = new XMLHttpRequest();
      }
      else if(window.ActiveXObject) {   // for Internet Explorer 5 or 6
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }

      return xmlHttp;
    }

    // sends data to a php file, via POST, and displays the received answer
    function ajaxrequest(php_file, tagID) {
      var request =  get_XmlHttp();     // call the function for the XMLHttpRequest instance

      // create pairs index=value with data that must be sent to server
      var hiturl = document.getElementById('hit').value;
      var  the_data = 'hiturl='+hiturl;

      request.open("POST", php_file, true);         // set the request

      // adds  a header to tell the PHP script to recognize the data as is sent via POST
      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      request.send(the_data);       // calls the send() method with datas as parameter

      // Check request status
      // If the response is received completely, will be transferred to the HTML tag with tagID
      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          document.getElementById(tagID).innerHTML = request.responseText;
        }
      }
    }
    --></script>

    </head>
    <body>
    <form action="test_form.php" method="post" name="form1" onsubmit="ajaxrequest('hitphp.php', 'myDiv'); return false;">
    <label for="name" id="name_label">hit URL: </label>  
    <input type="text" name="hit" id="hit" size="100"  /> 
    <input type="submit" value="Enter hit UrL" />

    </form>
    <div id="myDiv"></div>

    </body>
    </html> 
```

# 和 hitphp.php 文件

```
 <?php
    // if data are received via POST
    if (isset($_POST['hiturl'])) {
      // get data into variables, deleting the html tags
      $hiturl = strip_tags($_POST['hiturl']);

      // if the form fields are completed
      if (true) {
        if (true) {

    echo'<div id="myElement">nnnnn.....</div><script type="text/javascript">
jwplayer("myElement").setup({

    type:"mp4", 
    bufferlength: "60",
    file: "mediaurl",

});

</script>';

}else{
echo 'sorry not a valid url';
}
      }
      else {
        echo 'Fill in all form fields';
      }
    }
    ?> 
```

# unicode - CSS“内容”属性中允许的字符？

> ID：15643803
> 
> 赞同：11
> 
> 时间：2013-03-26T17:37:05.173
> 
> 标签：unicode, css

[我读过](http://css-tricks.com/css-content/)我们必须[在`content`CSS 属性](https://stackoverflow.com/a/4476362/1071413)中使用 Unicode 值，即`\`后跟特殊字符的十六进制数。

但是，除了字母数字之外，实际上允许将哪些字符按原样放置在`content`属性值中？（谷歌没有任何线索，因此提出了这个问题。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T18:59:08.973

“转义”字符的规则在 CSS 2.1 规范的第 4.1.3 节[Characters and case](http://www.w3.org/TR/CSS21/syndata.html#characters)中。引用字符串的特殊规则，如`content`属性值，在第 4.3.7 节[字符串](http://www.w3.org/TR/CSS21/syndata.html#strings)中。在带引号的字符串中，任何字符都可以这样出现，但用于引用字符串 (`"`或`'`) 的字符、换行符或反斜杠字符除外`\`。

因此，您*必须*使用`\`转义的信息是错误的。如果包含样式表的文档的字符编码不允许您直接输入所有字符，您*可能会*使用它们，甚至可能需要使用它们。但是如果编码是 UTF-8，并且被正确[声明](http://www.w3.org/International/O-charset)，那么你可以写`content: '☺ Я Ω ⁴ ®'`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:43:35.063

据我所知，您可以插入任何 Unicode 字符。（[这是一个有用的 Unicode 字符及其代码列表](http://en.wikipedia.org/wiki/List_of_Unicode_characters)。）

要使用这些代码，您必须对它们进行转义，如下所示：

```
U+27BA Becomes \27BA 
```

或者，或者，我认为您可能只是能够逃脱角色本身：

```
content: '\➺'; 
```

**资料来源： http:** [//mathiasbynens.be/notes/css-escapes](http://mathiasbynens.be/notes/css-escapes)

# asp.net-mvc - 如何将 userId 传递到模型 ASP.NET MVC？

> ID：15643808
> 
> 赞同：3
> 
> 时间：2013-03-26T17:37:17.467
> 
> 标签：asp.net-mvc, entity-framework

我已经进行了彻底的搜索，但真的找不到任何解决我面临的场景的东西（奇怪的是，因为我认为这是一件很常见的事情）。

## 背景

我正在使用 ASP.NET MVC 4 和 Entity Framework 5 Code First 创建一个应用程序。出于这个问题的目的，将其视为一个包含帖子和用户的博客应用程序。

## 项目

帖子模型要求每个帖子都有一个对应的 UserId。

使用 ASP.NET MVC 4 Membership 很容易找到登录用户的用户名

`User.Identity.Name`.

这并不理想，我们想要 ID，但是这样的查询可以在 db 中搜索名称并获取 ID。

`db.UserProfiles.Single(a => a.UserName == User.Identity.Name);`

## 问题

尝试创建帖子时会出现问题。`Model.IsValid`为假，因为没有从视图传入 UserId。显然，因为不希望用户输入他们的 ID。

我尝试将 ID 值放入`ViewBag`并使用`@Html.Hidden()`视图中的字段，但是我没有成功。`Model.IsValid`总是返回假。

是否应该通过创建视图输入此信息？还是应该直接在控制器中完成？这是一个非常令人沮丧的问题，因为我有信息并且只需要弄清楚如何将其传递到模型中。

### 控制器代码

这基本上只是默认的脚手架代码。注释代码是我尝试直接从控制器设置模型值的方式，但这只不过是反复试验。

```
 //
    // POST: /Post/Create

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Create(Post post)
    {
        if (ModelState.IsValid)
        {
            //var userId = db.UserProfiles.Single(a => a.UserName == User.Identity.Name);
            //post.User.UserId = userId.UserId;
            db.Posts.Add(post);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(post);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:41:54.020

小心隐藏字段。任何人都可以在该字段中输入他们想要的任何值（即他们可以欺骗另一个用户）。您最好在登录时在会话中缓存 ID，并使用该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:41:56.133

`EditModel`这是您想要在视图层和控制器层之间创建数据传输对象 (DTO)的典型情况。

创建一个类，该类`BlogPostEditModel`具有您在创建新博客文章时需要用户填写的所有属性。然后，将此类型（例如使用 AutoMapper）映射到您的`BlogPost`实体，并同时填写用户 ID。

要使用内置验证，例如`Model.IsValid()`，请将数据注释属性放在 DTO 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T17:42:41.083

老实说，我会通过控制器分配值。如果有人通过 Firebug 弄乱了您的 html，他们实际上可以在 id 被传递并提交给您的表单之前更改它。我会将其从您的创建视图中删除并从控制器提交。

# iphone - 在 ViewDidLoad 之前在视图之间传递 NSStrings

> ID：15643811
> 
> 赞同：0
> 
> 时间：2013-03-26T17:37:36.540
> 
> 标签：iphone, ios, objective-c, uiwebview

**视图控制器：**

*   初始视图控制器
*   包含切换到 SettingsViewController 的按钮
*   包含带有初始主页 URL 的 UIWebView（值：`homepageURL`= NSString）

**设置视图控制器：**

*   充当应用程序的设置部分
*   包含一个 UITextField: `homepageField`(默认值: `http://google.com/`)
*   UITextField 值：`homepageURL`

**视图控制器.h**

```
#import SettingsViewController.h

@interface ViewController : UIViewController <UIWebViewDelegate> {
    UIWebView *webView;
}

@property (nonatomic, retain) IBOutlet UIWebView *webView;

@end 
```

**视图控制器.m**

```
@synthesize webView;

- (void)viewDidLoad {
    [super viewDidLoad];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:homepageURL]]];
} 
```

**设置视图控制器.h**

```
#import "ViewController.h"

@interface SettingsViewController : UITableViewController <UITextFieldDelegate> {
    UITextField *homepageField;
    NSString *homepageURL;
}

@property (nonatomic, retain) IBOutlet UITextField *homepageField;
@property (nonatomic, retain) NSString *homepageURL; 
```

**设置视图控制器.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *homepageURL = homepageField.text;
} 
```

**错误**

ViewController.m: `[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:homepageURL]]];`-`Use of undeclared identifier 'homepageURL'`

**问题**当应用程序加载时， 如何检索设置的 NSString 值`homepageURL`以在 UIWebView 中加载？- 换句话说，充当主页。我无法使此代码正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:23:36.367

您可以使用 NSUserDefault 将 homepageURL 保存在 SettingsViewController 中，然后随时在您的 ViewController 中获取它

设置使用

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:homepageField.text forKey:@"homepageURL"]; 
```

并得到

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *homepageURL = [defaults objectForKey:@"homepageURL"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:13:06.520

您需要创建一个 SettingsViewController 实例才能获取该字符串。它不是从 xib/storyboard 自动加载的，因为它不是初始/根视图控制器。如果从情节提要加载，您应该给它的场景一个情节提要 ID（比如“settingsVC”），以便您可以访问它，然后

```
SettingsViewController* settingsVC =  
      [self.storyboard instantiateViewControllerWithIdentifier:@"settingsVC"]; 
```

那么你也能：

```
 [webView loadRequest:[NSURLRequest requestWithURL:
                [NSURL URLWithString:settingsVC.homepageURL]]]; 
```

*然而*，这是存储默认字符串的一种非常糟糕的方式，因为您必须加载整个情节提要场景才能获得该值。有许多更好的方法来存储数据。例如，这只是一种适合的事情`NSUserDefaults`：

```
 NSString* homePageURL;
    NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];

      //reading
    homepageURL = [defaults stringForKey:@"homepageURLKey"];

      //writing
    [defaults setString:homepageURL forKey:@"homepageURLKey"]; 
```

NSUserDefaults 管理持久数据，因此任何更改都将在您的应用程序启动之间保留。

`viewDidLoad`由于这是一个默认字符串，如果 userDefaults 中没有保存的，您可以在初始 viewController 中设置它。您的设置 viewController 可以配置为从 / 上的 NSUserDefaults 读取它的数据，并在进行更改时和/或在`viewDidLoad`/`viewWillAppear`上写出更改`viewWillDisappear`。

# text - 如何在要使用 Applescript 编辑的文件中设置索引？

> ID：15643814
> 
> 赞同：-1
> 
> 时间：2013-03-26T17:37:43.353
> 
> 标签：text, indexing, applescript, editing

正如标题中明确指出的那样，如何设置特定索引，类似于文本文件中的 eof，以便我可以从那时起编辑文本？如果我有一个文本文件，我想编辑其中一些最后的字符，我是否必须将其内容保存为字符串，编辑字符串，然后将其写回文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:19:35.953

有关 StandardAdditions 的 AppleScript 字典，其中`write`和`eof`被定义。`starting at`我相信您正在寻找在文本文件中写入位置。请注意，这`write starting at`将覆盖该位置的现有文本。

![](../Images/4816ad184d71392ebf40afa98cb20325.png)

# arrays - 在没有数据类型的 Play2 和 Scala 中解析 JSON

> ID：15643821
> 
> 赞同：15
> 
> 时间：2013-03-26T17:38:13.967
> 
> 标签：arrays, json, scala, playframework, playframework-2.0

```
{
  "people": [
    {
      "name": "Jack",
      "age": 15
    },
    {
      "name": "Tony",
      "age": 23
    },
    {
      "name": "Mike",
      "age": 19
    }
  ]
} 
```

那是我试图解析的 json 样本。我希望能够对每个人进行 foreach 操作并打印他们的姓名和年龄。

当它是单个项目或特定编号的项目时，我知道如何处理 json 数组。我不知道如何遍历所有项目。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-26T18:46:18.373

使用 Play JSON 库有很多方法可以做到这一点。主要区别在于是否使用 Scala 案例类。

给定一个简单的 json

```
val json = Json.parse("""{"people": [ {"name":"Jack", "age": 19}, {"name": "Tony", "age": 26} ] }""") 
```

您可以使用案例类和 Json 宏来自动解析数据

```
import play.api.libs.json._

case class People(name: String, age: Int)

implicit val peopleReader = Json.reads[People]
val peoples = (json \ "people").as[List[People]]
peoples.foreach(println) 
```

或者没有案例类，手动

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

implicit val personReader: Reads[(String, Int)] = (
  (__ \ "name").read[String] and 
  (__ \ "age").read[Int]
).tupled
val peoples = (json \ "people").as[List[(String, Int)]]
peoples.foreach(println) 
```

换句话说，检查关于这个主题的非常完整的文档:) [http://www.playframework.com/documentation/2.1.0/ScalaJson](http://www.playframework.com/documentation/2.1.0/ScalaJson)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-18T10:15:16.397

如果您没有对象类型或不想写读取，您可以使用`.as[Array[JsValue]]`

```
val jsValue = Json.parse(text)
val list = (jsValue \ "people").as[Array[JsValue]] 
```

然后

```
list.foreach(a => println((a \ "name").as[String])) 
```

在旧版本 (2.6.x) 中可以使用`.as[List[JsValue]]`，但新版本仅支持 Array。

# hadoop - 如何在 Scalding 中一次平均几列？

> ID：15643823
> 
> 赞同：1
> 
> 时间：2013-03-26T17:38:15.027
> 
> 标签：hadoop, cascading, scalding

作为使用 Scalding 进行某些计算的最后一步，我想计算管道中列的多个平均值。但是下面的代码不起作用

```
myPipe.groupAll { _average('col1,'col2, 'col3) } 
```

`sum, max, average`有没有什么方法可以在不进行多次传递的情况下计算这些函数？我担心性能，但也许 Scalding 足够聪明，可以以编程方式检测到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:39:34.347

这个问题在[级联用户](https://groups.google.com/forum/?fromgroups=#!topic/cascading-user/YTKQdhJJeBI)论坛中得到了回答。在这里留下答案作为参考

```
myPipe.groupAll { _.average('col1).average('col2).average('col3) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T22:19:13.517

您可以使用以下函数一次性完成大小（也称为计数）、平均值和标准开发。

```
// Find the count of boys vs. girls, their mean age and standard deviation. 
// The new pipe contains "sex", "count", "meanAge" and "stdevAge" fields.
val demographics = people.groupBy('sex) { _.sizeAveStdev('age -> ('count, 'meanAge, 'stdevAge) ) } 
```

找到最大值将需要另一次通过。

# maven - 多模块maven：测试覆盖jacoco sonar

> ID：15643827
> 
> 赞同：0
> 
> 时间：2013-03-26T17:38:26.577
> 
> 标签：maven, jenkins, sonarqube, jacoco

我有一个基本的 Maven 多模块，父模块是 POM，三个子模块：域、服务和网络。

我在 pom 父级中添加了 jacoco 插件和所需的配置，以将测试覆盖率报告附加到声纳轻松定位的单个文件中。

```
<build>
 <plugins>
  <plugin>
   <groupId>org.jacoco</groupId>
   <artifactId>jacoco-maven-plugin</artifactId>
   <version>0.6.2.201302030002</version>
   <configuration>
     <destFile>${project.basedir}/../target/jacoco.exec</destFile>
     <append>true</append> 
   </configuration>
   <executions>
    <execution>
     <id>jacoco-initialize</id>
     <goals>
      <goal>prepare-agent</goal>
     </goals>
    </execution>
   </executions>
  </plugin>
 </plugins>
</build> 
```

我的问题是，Sonar 仅显示第一个模块（作为域）的测试覆盖率（即使我用编辑器打开文件，我看到其他模块的类名附加在其中。

这种配置有什么问题？

对于它的价值，声纳分析是从詹金斯调用的，而不是从 mvn sonar:sonar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:21:31.117

Jenkins 配置是关键：当配置正确时，无需将所有内容附加到单个文件中。

我将此添加到配置中：

```
sonar.modules=xxx-domain,xxx-service,xxx-web 
```

我删除了问题中给出的 pom.xml 中的配置标签。

它就像一个魅力

对于那些为此苦苦挣扎的人，寻找任何有用的东西来指定声纳的詹金斯项目配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:57:10.443

您可以在此处查看我们的示例应用程序：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/maven/ut-maven-jacoco-runTests](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/maven/ut-maven-jacoco-runTests)

您应该能够找到您的配置有什么问题。

# java - Java Scanner 究竟是如何解析 double 的？

> ID：15643829
> 
> 赞同：5
> 
> 时间：2013-03-26T17:38:28.660
> 
> 标签：java, java.util.scanner, locale

我正在使用“控制面板\时钟、语言和区域”为“丹麦”的 Windows 7 机器

根据[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)的文档：

> 扫描仪的初始语言环境是 Locale.getDefault() 方法返回的值；

但是当我运行代码时：

```
System.out.println(Locale.getDefault());
Scanner sc = new Scanner("1.0");
sc.nextDouble(); 
```

它输出“en_US”，然后在 sc.nextDouble() 处抛出 java.util.InputMismatchException。它在扫描仪初始化为“1,0”时工作

但是，如果我明确设置语言环境：

```
Locale.setDefault(Locale.US);
System.out.println(Locale.getDefault());
Scanner sc = new Scanner("1.0");
sc.nextDouble(); 
```

它输出“en_US”，然后解析双精度就好了。我是否遗漏了什么，或者扫描仪的文档有误？

**编辑**按照@Perception 的建议，我在第一个示例中查看了 sc.locale() 。它打印“da_DK”。那么为什么不是“en_US”，而这是 Locale.getDefault() 方法返回的内容呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:44:30.403

有两种不同的[Locale 类别](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.Category.html)，一种用于显示，一种用于格式。扫描仪使用`Locale.getDefault(Locale.Category.FORMAT)`，但如果你打电话`Locale.getDefault()`，你会得到显示的语言环境。该`setLocale(Locale)`方法设置两者。

# c - 在 C 中以字符串格式打印结构

> ID：15643831
> 
> 赞同：2
> 
> 时间：2013-03-26T17:38:32.270
> 
> 标签：c

我的一项任务是，我的任务是以字符串格式打印下面的整个结构。

```
Struct test
{
    int a,
    char char1,char2;
} 
```

输出应该是：结构是 a=10,char1=b,char2=c; 我知道使用它很简单

```
printf("Structure is a=%d,char1=%c, char2= %c", s.a,s.char1,s.char2); 
```

但是在实时，我有很多大结构，我不能为结构的每个元素编写带有访问说明符的 printf 语句。有没有其他方法可以通过指定结构变量或其他方式来打印整个结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:44:17.223

在纯 C 中没有办法做到这一点。一些语言通过称为反射的概念支持这一点，但在 C 中不可用。

Code-that-writes-code 是您最好的选择。编写一个脚本来查找所有结构并构建函数来打印它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-22T13:32:34.950

我能想到的一种可能的解决方案是，您可以借助 fread 功能，您可以使用它一次将结构的全部内容保存到一个临时文件中。使用：

```
fread(&STRUCTURE_OBJECT, sizeof(YOUR_STRUCTURE), 1, FILE_POINTER); 
```

`STRUCTURE_OBJECT`您的结构的数据元素的名称在哪里。然后使用“cat”和“piping”等基于linux的命令来快速浏览输出。

# xpages - IBM Notes Designer 9 - 在 Notes 中预览

> ID：15643832
> 
> 赞同：0
> 
> 时间：2013-03-26T17:38:41.717
> 
> 标签：xpages, preview

是否有其他人遇到您无法从“在 Notes 中预览”工具栏按钮预览 XPage 而没有收到错误“404 找不到请求的资源”的问题？当我将 XPage 设置为应用程序的“启动选项”时，我可以在客户端中加载它。是的，我已经激活了“自动构建”。在浏览器中，它也可以按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:00:09.150

对我来说很好。

XPiNC 有时可以缓存涉及 XPages 的应用程序设置。尝试从“刷新”下拉按钮中“清除私人数据”。或者，我有时需要关闭并重新打开 Notes 以获取更改。

我首选的开发模式是使用浏览器并仅使用 XPiNC 进行最终检查。

# bash - 使用 bash ps 并切在一起

> ID：15643834
> 
> 赞同：34
> 
> 时间：2013-03-26T17:38:52.710
> 
> 标签：bash, unix, cut, ps

我需要从“ps”中提取 PID、UID 和命令字段，我已经尝试过这样的操作：

`ps -L u n | cut -f 1,2,13`

由于某种原因，这表现为没有任何剪切命令。它只是返回正常的 ps 输出。然后，我尝试了

`ps -L u n | tr -s " " | cut -d " " -f 1,2,13`这完全是胡说八道。然后，我尝试使用它并使用它：

`ps -L u n | tr -s " " | cut -d " " -f 2,3,14`

这以某种方式返回了我需要的东西（几乎，我不明白为什么它几乎可以工作），除了它切断了它中间的命令字段。我怎样才能得到我需要的东西？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-26T17:44:35.717

`ps`正在打印空格分隔符，但`cut`不`-d`使用制表符。将`tr -s`空格压缩在一起以获得更多所需的分隔，但请记住，存在初始的一组空格（压缩为一个），因此您需要在每个字段中添加 1。此外，每个单词的命令中都有空格。这应该有效：

```
ps -L u n | tr -s " " | cut -d " " -f 2,3,14- 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-26T18:12:41.360

您可以使用 awk 来清理您的命令，如下所示：

```
ps -L u n | awk '{ print $1,$2,$13 }' 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-26T17:43:56.813

使用 cut 有什么特别的原因吗？

我想这会做你想要的：

```
ps -eopid,uid,cmd 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-12-13T23:01:37.780

**问题是一旦你有了一个清单该怎么做。**我发现**cut** kludgy，所以我**没有 cut**我将列表传递给*while read*循环。“While read”识别一行中的非空白值，因此在本例中，“a”是第一个值，“b”是第二个值，“c”是该行的其余部分。我只对前 2 个值，进程所有者和进程 ID 感兴趣；我基本上滥用案例陈述而不是使用“如果”。（即使 grep 过滤，我也不想杀死所有者名称可能嵌入在行中其他位置的进程）

```
ps -ef | grep owner | grep -v grep | while read a b c; 
do 
 case $a in 
  "owner")
     kill -9 $b  
   ;; 
 esac; 
done 
```

# coldfusion - cfquery.recordcount 在 cfdirectory 上返回 0，但仅在 Windows 上

> ID：15643836
> 
> 赞同：0
> 
> 时间：2013-03-26T17:38:54.770
> 
> 标签：coldfusion, coldfusion-9

我对 Coldfusion 9 中的一个目录进行了查询。为什么这段代码在 mac 上运行给出了预期的结果，但在 windows 上却没有？

```
<cfoutput>
<cfset fileLocation = "d:/tmp"> <!--- On mac set to /tmp --->
<cfdirectory
        action = "list"
        directory = "#fileLocation#"
        name = "files"
        >
Files found #files.recordcount# <br/>
<cfquery name="dir" dbtype="query">
        select  *
        from    files
        where   directory = <cfqueryparam value = "#fileLocation#">
</cfquery>
Query gives #dir.recordcount#
</cfoutput> 
```

两台机器都运行 Coldfusion 10 并且目录存在。mac上的输出是

```
Files found 5
Query gives 5 
```

在窗户上

```
Files found 5
Query gives 0 
```

我错过了显而易见的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:49:53.560

啊，我的猜测是 Windows 将目录名称报告为`D:\tmp`而不是其他斜杠：`D:/tmp`。这就是为什么您`directory = #filelocation#`没有返回任何匹配项的原因。[如本文所述，](http://blogs.adobe.com/cantrell/archives/2003/03/making_your_col_1.html)您也许可以使这个更加独立于平台。

我本可以发誓现在 CF 中有一个内置函数，但我似乎找不到它。

# vim - vim autoread + netrw 防止意外覆盖

> ID：15643837
> 
> 赞同：1
> 
> 时间：2013-03-26T17:38:56.643
> 
> 标签：vim, netrw

`:autoread`在vim中使用`netrw`访问远程文件时有什么等价物吗？

我通过 netrw 远程访问我的工作机器上的文件，然后在我上班时修改那里的文件。但是，如果我回到远程访问，如果文件已经在缓冲区中打开，很容易忘记重新加载文件 - 如果它已在工作机器上修改，那么下一个`:w`将覆盖我在工作。我正在寻找一个“安全网”来降低数据丢失的风险（幸运的是，我还没有因为`.swp`文件丢失任何东西，但这不是一个非常令人放心的网络）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T03:43:44.670

你试过了`:checktime`吗？

```
 Check if any buffers were changed outside of Vim.
        This checks and warns you if you would end up with two
        versions of a file.
        [...]
        Each loaded buffer is checked for its associated file
        being changed.  If the file was changed Vim will take
        action.  If there are no changes in the buffer and
        'autoread' is set, the buffer is reloaded.  Otherwise,
        you are offered the choice of reloading the file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:57:08.463

使用`'autoread'`，Vim 只需要检查文件修改时间。由于*netrw*目标驻留在不同的系统上，因此查找成本最高，您必须自己触发它。一个想法是对`FocusGained`事件进行检查，即当你回到你的（家用机器的）Vim 时。由于在 Windows GVIM 上，netrw 访问会弹出一个控制台窗口（触发另一个`FocusGained`），为了避免过于频繁的检查，让我们将检查限制在一定的时间间隔内，例如最多每 5 分钟一次：

```
:autocmd FocusGained ftp://*,scp://* nested
\   if ! &modified && ! exists('b:lastchecktime') || localtime() - b:lastchecktime > 300 |
\       edit! |
\       let b:lastchecktime = localtime() |
\   endif 
```

# arrays - codeigniter - 从复选框插入数组

> ID：15643840
> 
> 赞同：0
> 
> 时间：2013-03-26T17:39:16.100
> 
> 标签：arrays, checkbox, insert, codeigniter-2

这是我在视图中的复选框值：

```
$data = array(
'name'        => 'gejala[]',
'value'       => $row->id_gejala.",".$row->id_penyakit,
'checked'     => FALSE,
'style'       => 'margin:10px',
); 
```

接下来这是我的控制器：

```
function step2(){

        $a = implode(',',$this->input->post('gejala'));

        $break = explode(',',$a);

        $data = array(

            'id_gejala'=> $break[0],

            'id_penyakit'=>$break[1]

        );

        foreach($data as $penyakit){

            $data[] = array('id_gejala'=> $break[0],'id_penyakit'=>$break[1]);

        }

        print_r($data);

    } 
```

我的浏览器中的示例结果：

```
Array ( [id_gejala] => 58 [id_penyakit] => 6  ) 
```

我的问题，如何将结果插入数据库？也许它看起来像这里：

```
++++++++++++++++++++++++++++
id + id_gejala + id_penyakit
++++++++++++++++++++++++++++
1  +     58    +     6     + 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:21:38.803

在您的控制器中，您需要编写

```
$this->insert_model->insert($data); 
```

在 insert_model 中，您需要以该形式插入数据：

```
class Insert_model extends CI_Model { // Name just for example
    function Insert_model() {
        parent:: __construct();

    }

    function insert($data) {
        $this->db->insert('table_name', $data); // Write the name of table
    }

} 
```

如果您有任何问题，请在评论中告诉我。谢谢

# javascript - `for`循环中的`appendChild`只是替换了`createElement`创建的项目

> ID：15643842
> 
> 赞同：6
> 
> 时间：2013-03-26T17:39:17.167
> 
> 标签：javascript, html, dom, appendchild, createelement

我用谷歌搜索了很多关于创建多个项目的信息`appendChild`，但我不明白它是如何工作的。我`appendChild`只是替换而不是添加许多。

```
var startGame;
var cards = 16;
var newDeck = [];

startGame = function(){
    var startBtn = document.getElementById('start');
    var board = document.getElementById('game-board');
    var backside = document.createElement("div");
    backside.className = 'card';

    startBtn.onclick = function(){
        removeButton = document.getElementById("start");
        removeButton.parentNode.removeChild(removeButton);

        for(var i = 0; i < cards; i++){ 
            board.appendChild(backside);
        }
    };
}; 
```

我还读到你可以用 来做到这一点`innerHTML`，但这也让我感到困惑。有没有人对如何使这项工作有更详细的解释？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:40:50.533

来自[appendChild 上的 MDN](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)：

> 将一个节点添加到指定父节点的子节点列表的末尾。如果节点已经存在，则将其从当前父节点中删除，然后添加到新的父节点。

当您追加一个尚在 DOM 中的元素时，您将其从原来的位置移走。在循环中创建元素：

```
startBtn.onclick = function(){
    removeButton = document.getElementById("start");
    removeButton.parentNode.removeChild(removeButton);

    for(var i = 0; i < cards; i++){ 
        var backside = document.createElement("div");
        backside.className = 'card';
        board.appendChild(backside);
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:41:55.640

您正在创建一个元素并尝试多次重新添加它。您需要创建多个元素。

当您运行在 DOM 中创建元素的 document.createElement 时。AppendChild 只是设置位置。因此，您创建一个元素，然后将其多次移动到同一个位置。相反，您希望创建许多元素并设置它们的位置一次

```
var backside;
startBtn.onclick = function(){
    removeButton = document.getElementById("start");
    removeButton.parentNode.removeChild(removeButton);

    for(var i = 0; i < cards; i++){ 
        backside = document.createElement("div");
        backside.className = 'card';
        board.appendChild(backside);
    } 
```

或者（更短但不太灵活，只能一次性使用）

```
startBtn.onclick = function(){
    removeButton = document.getElementById("start");
    removeButton.parentNode.removeChild(removeButton);

    for(var i = 0; i < cards; i++){ 
        board.appendChild("<div class='card'></div>);
    } 
```

# c# - 列出进程的所有子进程

> ID：15643846
> 
> 赞同：1
> 
> 时间：2013-03-26T17:39:27.073
> 
> 标签：c#, process

我正在尝试列出给定进程的所有子进程（给定它的进程 ID）。经过一些研究，我得出了这个结论：

```
static void Main(string[] args)
{
    listChildProcesses(0);
    Console.ReadKey();
}

public static void listChildProcesses(int parentProcessId)
{
    String myQuery = string.Format("select * from win32_process where ParentProcessId={0}", parentProcessId);
    ObjectQuery objQuery = new ObjectQuery(myQuery);
    ManagementObjectSearcher objSearcher = new ManagementObjectSearcher(objQuery);
    ManagementObjectCollection processList = objSearcher.Get();

    foreach (ManagementObject item in processList)
    {
        try
        {
            int processId = Convert.ToInt32(item["ProcessId"].ToString());

            Console.WriteLine("processId:{0} name:{1} {2}",
                item["ProcessId"],
                item["Name"],
                item["ParentProcessId"]
            );

            // recursive call
            if (processId != parentProcessId)
                listChildProcesses(processId);
        }
        catch (Exception e)
        {
            Console.WriteLine("Error: " + e);
        }
    }
} 
```

我希望这可以让我显示所有进程（因为该方法从 PID=0 开始，然后在从那里找到的每个 PID 上递归调用）。

但这是我在 Windows 8 (x86) 上得到的输出：

```
processId:0 name:System Idle Process 0
processId:4 name:System 0 
processId:300 name:smss.exe 4 
```

它停在那里。我希望它会继续与 System 的每个孩子一起继续，然后是这些孩子的每个孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:09:49.167

你没有做你想做的事...

这样你就只是列出孩子。而你正在通过“0”访问空闲的。

尝试这样的事情来获取所有进程......

```
ManagementClass mngcls = new ManagementClass("Win32_Process");
foreach (ManagementObject instance in mngcls.GetInstances())
{
    Console.Write("ID: " + instance["ProcessId"]);
} 
```

……那你在做什么。

# ruby - 在 Ruby on Rails 的连接表上，过滤有许多按值的关系

> ID：15643847
> 
> 赞同：0
> 
> 时间：2013-03-26T17:39:31.610
> 
> 标签：ruby, ruby-on-rails-3

对于代表朋友的用户模型，我有一个标准的自引用关系。这部分工作正常，但我在连接表中有一个额外的列，表示该关系的来源。

友谊模型

```
# Relationships
belongs_to :user
belongs_to :friend, :class_name => "User"
has_one :source 
```

用户模型

```
has_many :friendships
has_many :friends, :class_name => "User", :through => :friendships 
```

我知道我可以对用户的朋友进行 where 过滤

```
 user.friends.where([some conditions]) 
```

我的问题是，如何获取由 Friendship 中的 :source 关系过滤的用户对象“朋友”列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:54:53.877

刚刚想通了。以防有人好奇。

用户模型

```
 has_many :friendships
 has_many :friends, :class_name => "User", :through => :friendships do 
    def bySource(sourceId)
       where("friendships.source_id = ?", sourceId)
    end
 end 
```

用法

```
 users.friends.bySource(1) 
```

# gwt - Vaadin GWT RPC 设置？

> ID：15643849
> 
> 赞同：0
> 
> 时间：2013-03-26T17:39:49.727
> 
> 标签：gwt, rpc, vaadin

我已经使用 smartGWT 几年了，但已经开始关注 Vaadin。我已经运行了这个示例，但是在编写 RPC 调用时我感到很困惑。

我有一个连接器：

```
public class MyComponent2Connector extends AbstractComponentConnector { 
```

并将其添加到我的 UI 中：

```
@SuppressWarnings("serial")
@Title("StyleSuite Title")
public class MyVaadinUI extends UI
{

    private final MyComponent2Connector c = new MyComponent2Connector(); 
```

但是当我访问该网站时，它说：

> java.lang.NoClassDefFoundError: com/example/suite_local/client/mycomponent2/MyComponent2Connector

gwt.xml 非常简单，只有：

```
<inherits name="com.vaadin.DefaultWidgetSet" /> 
```

我显然做错了什么 - 任何人都有任何设置这个或有一个示例项目的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:11:14.097

Vaadin 是一个服务器端框架，它在客户端使用 GWT 来呈现小部件。通常你只对服务端的东西进行编码，你不需要担心服务器和客户端之间的 RPC 或其他通信，因为 Vaadin 会在后台处理它。但是如果您实现自己的小部件，那么您需要 RPC（或共享状态）。

您的问题是您正在尝试使用`MyComponent2Connector`来自服务器端类 ( ) 的客户端 GWT 类 ( `MyVaadinUI`)，这不起作用（如您所见）。[Vaadin 7 迷你教程](https://vaadin.com/wiki/-/wiki/Main/Vaadin+7)是很好的阅读和[Vaadin 之书，](https://vaadin.com/book)以了解 Vaadin 的工作原理。

# java - 如何在java中停止线程

> ID：15643854
> 
> 赞同：0
> 
> 时间：2013-03-26T17:39:57.910
> 
> 标签：java, multithreading, netbeans

我在一个按钮内用 Java 创建了一个线程来打印一条简单的消息，但我无法停止它。

```
Thread a = new Thread();
a.start();

while(true){
    try{
        Thread.sleep(2000);
        System.out.println("code");
    }catch(Exception e){
    }
} 
```

当我点击它时，它开始打印代码，但它似乎被阻止（按钮）。我想知道。我怎样才能停止线程？如果我停止它，按钮会再次可用吗？

我正在使用 netbeans 7.3，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:41:42.797

```
while(true){
} 
```

启动一个无限循环，因此所有其他操作都被阻塞。

删除那个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:47:24.700

Use [interrupt()](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html). Then handle the `InterruptedException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:44:02.907

您正在启动的线程没有做任何事情。它在您调用时启动`a.start()`并立即终止，因为该线程没有运行代码。在此之后，启动新线程并处理点击事件的同一线程进入无限循环，因此您的用户界面被完全阻塞。

您需要为新线程执行一些代码。为此，您可以传递线程 a`Runnable`或覆盖线程的`run()`方法。例如，要给它一个`Runnable`包含每 2 秒打印一次的循环，您可以这样做：

```
final Thread a = new Thread(new Runnable() {
  @Override public void run() {
    while (true) {
      try {
        Thread.sleep(2000);
        System.out.println("code");
      } catch (InterruptedException e) {
        break;
      }
    }
  }
};
a.start(); 
```

之后，如果您想停止该线程，则需要`a`在字段或其他内容中保存对该线程的引用，然后调用`a.interrupt()`. 这将导致`sleep`抛出一个`InterruptedException`，它将被捕获并执行`break`，这将终止无限循环并允许线程到达`run`方法的末尾，从而终止线程。

例如：

```
private Thread a = null;
... click handler on start button ... {
  if (a == null) {
    a = new Thread(new Runnable() {
      @Override public void run() {
        while (true) {
          try {
            Thread.sleep(2000);
            System.out.println("code");
          } catch (InterruptedException e) {
            break;
          }
        }
      }
    };
    a.start();
  }
}

... click handler on "stop" button ... {
  if (a != null) {
    a.interrupt();
    a = null;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:47:01.540

您不会*停止*Java 中的线程，而是发送[`interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)信号。

线程可能会，也可能不会捕捉到信号。如果它是`waiting`, or `sleeping`or `joining`( [`wait()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28long%29), [sleep()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)或 join()) 已被调用)，[`InterruptedException`](http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html)将引发 an。

线程（在其while循环中）可以通过调用该方法来测试它是否被中断[`isInterrupted()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#isInterrupted%28%29)，然后决定自杀（例如退出循环）。

# jquery - 通过 AJAX /Jquery 检测来自 onclick 的哪个 URL 以加载适当的内容

> ID：15643856
> 
> 赞同：0
> 
> 时间：2013-03-26T17:40:08.287
> 
> 标签：jquery

我已经看了一遍，似乎只能找到更多静态版本（因为缺少更好的词）可以在 AJAX / Jquery 请求中调用哪些 URL：

查询：

```
 $(document.body).ready(function () {
     $("li.span3 a").click(function (e) {
       $('.content').load(this.href);
       e.preventDefault();
          });
        }); 
```

HTML/PHP：

```
while ( $loop->have_posts() ) : $loop->the_post();
    echo 
    '<li class="span3 mobile_width"><a href="http://localhost/sites/wp-osprey/?team=jo-bloggs2">';

        the_content();
        the_title();
        echo '</a></li>';
    endwhile; 
```

我希望它是一个变量，以便它可以侦听单击了哪个 div，然后在 onclick div 处于 while 循环中时显示相应的外部 html。

我是否需要在 onclick 上创建和添加监听事件，以便它可以获取正确的外部 URL，或者是否有不同的方法来编写上述内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:32:58.127

这大多是正确的。要从 a href 获取 URL，您必须使用 $(this).attr('href') 代替。这已经将 onclick 事件绑定到所有“li.span3 a”元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:33:13.500

据我了解，您正在尝试获取单击的标签中的`href`属性值。`<a>`

```
$(document.body).ready(function () {
    $("li.span3 a").click(function (e) {
        var thisURL = $(this).attr("href");
        e.preventDefault();
    });
}); 
```

# c - 我是否需要为 Dirent 结构分配内存

> ID：15643857
> 
> 赞同：0
> 
> 时间：2013-03-26T17:40:11.027
> 
> 标签：c, windows, directory, posix

*   平台：Windows XP Service Pack 3
*   编译器：代码::块版本 12.11

我目前正在编写一个程序，该程序将使用 POSIX 目录函数递归删除给定目录。但是我遇到了 readdir() 及其对应的 dirent 结构的问题。我阅读了 readdir 的[文档](http://pubs.opengroup.org/onlinepubs/7908799/xsh/readdir.html)多次调用该函数将覆盖该函数返回的结构中保存的数据。所以我认为 readdir() 必须为结构本身分配内存，然后简单地将指针地址重新分配给捕获它的返回值的结构。我测试了这个理论，我是正确的 readdir() 为它的成员 d_name 分配了内存。我遇到的问题是当目录流为空时 readdir 返回一个 NULL 指针，所以我使用带有条件 (dirent_ptr != NULL) 的 while 循环来迭代整个目录。但是因为 readdir() 将处理结构的内存分配，所以我只需声明一个 dirent 结构并让 readdir() 完成它的工作。不幸的是，由于某种原因，不同的结构被初始化为 NULL（或者它可能是我的编译器）所以我的循环永远不会开始，因为它' s 条件语句最初不是真的。所以我想我的问题是我在这里做错了什么？

以下是重要的变量声明和包含的库。请注意，所有这些变量都是全局声明的。

```
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>
#include <sys/stat.h>
#include <string.h>

int recursive_delete(const char *path);
int file_delete(const char *path, int file_size);

struct dirent *direntp;
struct stat *statp;

struct switches
{
    int verbose;
    int no_prompt;
    int continue_if_error;
    int files_only;
}; struct switches switches; 
```

我没有解析相对路径，而是简单地 cd 到作为参数给出的路径，然后我使用 . 和 .. 通配符移动目录，以便相对路径（d_names）有效。此外，开关结构只包含命令行开关，应该被忽略，我知道以下代码中有错误，但我无法修复它们，因为我无法解决上述问题。

```
int recursive_delete(const char *path)
{
    DIR *dirp;
    int return_value = 0;
    int recursive_return_value = 0;

    if((chdir(path)) == -1)
    {
        perror("ERROR(3)");
        return 1;
    }
    printf("CDED to \"%s\"\n", path);

    dirp = opendir(".");
    if(dirp == NULL)
    {
        perror("ERROR(4)");
        return 1;
    }
    printf("OPENED \"%s\"\n", path);

    while(direntp != NULL)
    {
        direntp = readdir(dirp);
        if( (direntp == NULL) && (errno != 0) )
        {
            perror("ERROR(5)");
            return 1;
        }
        printf("READ \"%s\" FROM \"%s\"\n", direntp->d_name, path);

        if( (strcmp(direntp->d_name, ".")!=0) && (strcmp(direntp->d_name, "..")!=0) )
        {
            if((stat(direntp->d_name, statp)) == -1)
            {
                perror("ERROR(6)");
                return 1;
            }
            printf("STATED \"%s\"\n", direntp->d_name);

            if(S_ISREG(statp->st_mode))
            {
                printf("DELETING \"...\\%s\\%s\"\n", path, direntp->d_name);
                return_value += file_delete(direntp->d_name, statp->st_size);
                if( (!switches.continue_if_error) && (return_value != 0) )
                {
                    break;
                }
            }
            else if(S_ISDIR(statp->st_mode))
            {
                printf("\n\n\nCALLING RECURSIVE DELETE with \"%s\"\n", direntp->d_name);
                recursive_return_value = recursive_delete(direntp->d_name);
                return_value += recursive_return_value;

                if( (!switches.continue_if_error) && (recursive_return_value != 0) )
                {
                    break;
                }

                if( (!switches.files_only) && (recursive_return_value == 0) )
                {
                    if((chdir("..")) == -1)
                    {
                        perror("ERROR(6)");
                        return 1;
                    }
                    printf("CDED BACK TO \"%s\" FROM \"%s\"\n", path, direntp->d_name);

                    if((rmdir(direntp->d_name)) == -1)
                    {
                        perror("ERROR(7)");
                        return 1;
                    }

                    if(switches.verbose)
                    {
                        printf("DELETED DIRECTORY \"...\\%s\\\"\n\n\n", direntp->d_name);
                    }
                }
            }
        }
    }

    return return_value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:01:12.180

从附加的代码中，尚不清楚 direntp 的初始化位置（`while`循环之前）。可能尝试类似：

```
direntp = readdir(dirp);
while(direntp != NULL)
{
    // all your work here

    direntp = readdir(dirp);
} 
```

此模式确保`direntp`为您的 while 循环初始化和更新。但是，在您的代码的第二眼中，我并不完全确定 while 循环首先应该做什么。你的循环是如何变化的 `direntp`？`dirp`

有可能你可以摆脱一个`if`测试（而不是`while`），让递归调用处理“循环”效果......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:04:16.617

你的代码结构应该是这样的（为了清楚起见，大多数错误检查被省略）：

```
int recursive_delete(const char *path)
{
  DIR* dirp = NULL;
  int return_value = 0;
  char* initial_cur_dir = malloc(1000);

  getcwd(initial_cur_dir, 1000);
  chdir(path);
  dirp = opendir(".");

  while (dirp != NULL)
  {
    struct dirent* direntp;
    struct stat stat;

    direntp = readdir(dirp);

    if (direntp == NULL)
      break;

    stat(direntp->d_name, &stat);

    if (S_ISDIR(statp->st_mode))
    {
      if (strcmp(direntp->d_name, ".") && strcmp(direntp->d_name, ".."))
      {
        return_value += recursive_delete(direntp->d_name);
      }
    }
    else if (S_ISREG(statp->st_mode))
    {
      unlink(direntp->d_name);
    }
  }

  if (initial_cur_dir != NULL)
  {
    chdir(initial_cur_dir);
    rmdir(path);
  }

ErrorLabel: // you should goto here when an error is detected

  if (dirp != NULL)
  {
    closedir(dirp);
  }

  if (initial_cur_dir != NULL)
  {
    chdir(initial_cur_dir);
    free(initial_cur_dir);
  }

  return return_value;
} 
```

# css - 将多个浮动跨度与不同字体大小对齐的“干净方式”是什么？

> ID：15643863
> 
> 赞同：2
> 
> 时间：2013-03-26T17:40:23.223
> 
> 标签：css, css-float, html

我有三个**不同字体大小**的跨度，它们`div`用不同的浮点数包裹起来。

我试图`spans`通过调整 来正确对齐这些`line-height`，但对我来说似乎有点 hacky，因为最后一个浮动`span`是用这种方法溢出容器。

我试图玩`vertical-align`没有运气。

那么在没有黑客攻击（如果可能的话）的情况下，对齐这些的*干净方法是什么？*

这是[jsFiddle](http://jsfiddle.net/bigood/s8CeD/3/)，这里是代码：

## HTML

```
<div class="comTitle">
    <span class="comUserName">admin</span>
    <span class="comUserRank"> - Animator</span>
    <span class="timeCreated">The 13/03/13 at 16:49</span>
</div> 
```

* * *

## CSS

```
.comTitle {
    font-family: 'Open Sans', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);
    /*line-height:22px;*/
}

.comUserName {
    font-weight: bold;
    font-size: 16px;
    color: #444;
    font-variant: small-caps;
    clear:left;
}

.comUserRank {
    font-size: 12px;
    font-style: italic;
    color: grey;
    clear:left;
}

.timeCreated {
    font-style: italic;
    font-size: 12px;
    color: #444;
    float: right;
    /*vertical-align:baseline;*/
    /*line-height:26px;*/
} 
```

**[编辑]**我知道如何处理`position`财产，我可以使它与：

```
.timeCreated {
    ...
    float:right;
    position: relative;
    right: 0px;
    bottom: -4px;
} 
```

或绝对定位，但我想知道是否有可能在不改变元素流的情况下**将最后一个跨度与包装器的基线（而不是顶部）对齐？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:01:06.290

为 span添加一些`padding-top`空间`.timeCreated`- 字体大小的差异（4px）

```
.timeCreated {
    font-style: italic;
    font-size: 12px;
    color: #444;
    float: right;
    padding-top: 4px;
} 
```

和[jsFiddle](http://jsfiddle.net/gguy3/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:52:58.210

我不知道这有多干净，但它很有效，我只是给了它一些定位。[jsFiddle](http://jsfiddle.net/apaul34208/s8CeD/2/)

```
.comTitle {
font-family:'Open Sans', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
border-bottom: 1px solid rgba(0, 0, 0, 0.1);
box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);
/*line-height:22px;*/
position:relative;
}
.comUserName {
font-weight: bold;
font-size: 16px;
color: #444;
font-variant: small-caps;
clear:left;
}
.comUserRank {
font-size: 12px;
font-style: italic;
color: grey;
clear:left;
}
.timeCreated {
font-style: italic;
font-size: 12px;
color: #444;
position:absolute;
bottom:0px;
right:0px;
} 
```

# python - Pythonic 排序列表的方法

> ID：15643865
> 
> 赞同：3
> 
> 时间：2013-03-26T17:40:40.207
> 
> 标签：python, sorting

例如，我会有一个列表

```
lists = ['jack 20', 'ben 10', 'alisdar 50', 'ollie 35'] 
```

我需要根据数字对其进行排序，

```
lists.sort() = ['ben 10', 'jack 20', 'ollie 35', 'alisdar 50'] 
```

可能以某种方式使用 split() 格式化？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T17:42:08.787

使用一个`key`函数：

```
lists.sort(key=lambda s: int(s.rsplit(None, 1)[-1])) 
```

可`key`调用对象被传递到其中的每个元素，`lists`并且该元素根据返回值进行排序。在这种情况下，我们

*   在空白处拆分一次，从右侧开始
*   取拆分的最后一个元素
*   把它变成一个整数

to 的参数`key`可以是任何可调用的，但 lambda 更紧凑。你可以在命令提示符下试一试：

```
>>> key_function = lambda s: int(s.rsplit(None, 1)[-1])
>>> key_function('ben 10')
10
>>> key_function('Guido van Rossum 42')
42 
```

实际上，在对值进行排序时，会使用该函数的返回值进行*扩充*，排序的内容是：

```
[(20, 0, 'jack 20'), (10, 1, 'ben 10'), (50, 2, 'alisdar 50'), (35, 3, 'ollie 35')] 
```

而是（添加第二个值，元素的索引，以在排序键相等的情况下保持原始顺序）。

结果：

```
>>> lists = ['jack 20', 'ben 10', 'alisdar 50', 'ollie 35']
>>> lists.sort(key=lambda s: int(s.rsplit(None, 1)[-1]))
>>> lists
['ben 10', 'jack 20', 'ollie 35', 'alisdar 50'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:41:38.603

使用`key`可以满足您需求的功能：

```
lists.sort(key=lambda e: int(e.split()[1])) 
```

如果您的某些项目不遵循该格式，则您必须编写一些更详细的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:36:16.347

如果你有一个比字符串更合适的数据类型来表示一个人的姓名和年龄，那会更好。一种方法是字典：

```
lists = ['jack 20', 'ben 10', 'alisdar 50', 'ollie 35']
d = dict(item.split(' ') for item in lists) 
```

这从一个二元素列表的流中构造了一个字典。

然后你可以这样排序：

```
print sorted((v, k) for k, v in d.iteritems()) 
```

得到这个：

```
>>> lists = ['jack 20', 'ben 10', 'alisdar 50', 'ollie 35']
>>> d = dict(item.split(' ') for item in lists)
>>> print sorted((v, k) for k, v in d.iteritems())
[('10', 'ben'), ('20', 'jack'), ('35', 'ollie'), ('50', 'alisdar')] 
```

或者您可以将年龄转换为整数：

```
>>> lists = ['jack 20', 'ben 10', 'alisdar 50', 'ollie 35']
>>> person_iter = (item.split(' ') for item in lists)
>>> d = {k: int(v) for k, v in person_iter}
>>> print sorted((v, k) for k, v in d.iteritems())
[(10, 'ben'), (20, 'jack'), (35, 'ollie'), (50, 'alisdar')] 
```

`person_iter`是一个生成成对的名字年龄的生成器。您将其提供给字典理解并将第二个参数转换为整数。

但是，基本的想法是，如果您使用更精确的数据类型来实现您的目的，您将拥有更轻松的时间。

# asp.net - 保护解码算法 - SQL 或 SERVER 端

> ID：15643866
> 
> 赞同：0
> 
> 时间：2013-03-26T17:40:43.133
> 
> 标签：asp.net, sql, security, server-side

在给定的数据库表登录凭据是：用户名，密码，解码的 IP 地址

要验证登录，我需要解码 ip 地址字符串，其中解码它最安全：1）sql 端 - 可编程层 2）服务器端 - 在代码层中硬编码

我不关心维护，最重要的是保护解码算法。

我发现一篇文章说如果数据库被黑客攻击或某些人成功连接到它，如果解码算法将在sql端，它将被揭示，因此如果算法将被硬编码，那么它只有在源代码会被盗。你同意吗？

# javascript - 从数组中提取javascript中的公共元素

> ID：15643869
> 
> 赞同：0
> 
> 时间：2013-03-26T17:40:52.097
> 
> 标签：javascript, jquery, arrays, knockout.js

我对使用 jquery 和淘汰赛 js 的 javascript 中的数组有疑问。

我的代码中有这个结构：

```
var MyModel = function(model) {
     var self = this;
     self.FirstArray = ko.observableArray(ko.utils.arrayMap(model.FirstArray, function(object){
          return new ArrayObj(object);
     }));

     /*--here's the code that i need to implement--*/
}

var ArrayObj = function(obj){
    var self = this;
    self.VarX = obj.VarX;
    self.SeccondArray = ko.observableArray(ko.utils.arrayMap(obj.SeccondArray, function(seccond){
         return new Object2(seccond);
    }));
}

var Object2 = function(obj2) {
    var self = this;
    self.IdObj2 = obj2.IdObj2;
    self.Name = obj2.Name;
} 
```

问题是我需要另一个数组，这取决于 SeccondArray 中的 Object2 数组之间的共同项目。

在一个例子中，它是这样的：

```
Array1 = [{IdObj2: 1, Name: "A"},
          {IdObj2: 2, Name: "B"},
          {IdObj2: 3, Name: "C"}]

Array2 = [{IdObj2: 1, Name: "A"},
          {IdObj2: 3, Name: "C"}]

Array3 = [{IdObj2: 3, Name: "C"}]

FirstArray = [{VarX: J, Array1}, 
              {VarX: K, Array2},
              {VarX: L, Array3}] 
```

所以..我需要的数组必须有：

```
ResultArray = [{IdObj2: 3, Name: "C"}] 
```

因为`{IdObj2: 2, Name: "C"}`这是他们之间唯一的共同点。

我希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:54:50.803

您正在寻找的是一个十字路口。我使用了一个名为 underscore 的库并使用了我在这里找到的一个漂亮的对象交集[How to use underscore's "intersection" on objects？](https://stackoverflow.com/questions/8672383/how-to-use-underscores-intersection-on-objects)

这是它的工作原理

[http://jsfiddle.net/sujesharukil/vyguB/](http://jsfiddle.net/sujesharukil/vyguB/)

```
_.intersectionObjects = _.intersect = function(array) {
    var slice = Array.prototype.slice; // added this line as a utility
    var rest = slice.call(arguments, 1);
    return _.filter(_.uniq(array), function(item) {
      return _.every(rest, function(other) {
        return _.any(other, function(element) { return _.isEqual(element, item); });
      });
    });
  };

var Array1 = [{IdObj2: 1, Name: "A"},
          {IdObj2: 2, Name: "B"},
          {IdObj2: 3, Name: "C"}],

Array2 = [{IdObj2: 1, Name: "A"},
          {IdObj2: 3, Name: "C"}],

Array3 = [{IdObj2: 3, Name: "C"}];

var result = _.intersectionObjects(Array1, Array2, Array3);

console.log(result); 
```

希望有帮助。

干杯!

# c - 读/写结构到文件 - c

> ID：15643870
> 
> 赞同：3
> 
> 时间：2013-03-26T17:41:01.337
> 
> 标签：c, file-io

我正在用 C 语言创建一个学生数据库。我需要能够读取和写入我创建的数据库到文件的最后一件事。所以我已经有了一个充满指向学生结构的指针的数组，我需要将它写入一个文件。写完后，我还需要能够将它读回我的数组中。

我真的不知道该怎么做。这是我的结构：

```
typedef struct student Student;
struct student 
{
    char name[300];
    int age;
    char course1[300];
    char course2[300];
    char remarks[300];
};

Student *Data[30]; 
```

这些是我编写的用于处理文件的函数：

```
void writeDisk()
{
    FILE *file = fopen("disk.dat", "ab");
    fwrite(&Data, sizeof(Student), count, file);
    fclose(file);
}

void loadDisk()
{
    FILE *file = fopen("disk.dat", "rb");
    if (file != NULL)
    {
        fread(&Data, sizeof(Student), count, file);
        fclose(file);       
    }
}

void emptyDisk()
{

    FILE *file = fopen("disk.dat", "rw");
    fopen("disk.dat", "wb");

} 
```

我可以看到我的 disk.dat 文件的大小在我写入它时发生了变化，当我调用 empty 时它变为零，但加载根本不起作用。如果我的程序中的学生数组为零，那么当我调用 load 并尝试显示它时它只会保持为零，但是如果数组中有某些东西，当我调用 load 然后尝试显示它时会出现分段错误。

我可能完全错了。我真的不确定我在做什么。我在想我可以将整个数组写入一个文件，但我不确定这是真的。我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

编辑

我已将代码编辑为如下所示：

```
void writeDisk()
{
    int i = 0;
    FILE *file = fopen("disk.dat", "ab");

    for(i; i <count; i++)
    {
        fwrite(Data[i], sizeof(Student), 1, file);  
    }

    fclose(file);
}

void loadDisk()
{
    char buffer[300];
    int i = 0;

    clearData();

    FILE *file = fopen("disk.dat", "rb");
    while(Data[i] != NULL)
{
    Data[i] = malloc(sizeof(Student));
    fread(Data[i], sizeof(Student), 1, file);
    i++;
}

    fclose(file);       
} 
```

这仍然行不通。写入似乎效果更好，但我没有看到它将学生的年龄写入文件。加载文件中的 clearData() 函数刚开始清除 Data 数组中的所有内容，这样我们就可以有一个干净的状态来读取文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:50:52.653

我相信而不是

```
Student *Data[30]; 
```

你要

```
Student Data[30]; 
```

因为第一个是指针数组，而第二个是你想要的结构数组。

当你写

```
fread(&Data, sizeof(Student), count, file); 
```

它将文件中的数据直接读取到`Data`. 看起来您想要读取和写入实际的结构，因此您必须将它们直接放入数组中，而不是使用指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:23:53.563

如果 Data 确实是指向您的结构的指针数组，那么您要保存的只是指针，而不是您的实际数据。实际上，您永远不应该保存实际指针，因为下次运行时，malloc 可能会返回不同的指针来存储您的数据。

为了保存，您想要做的是迭代您的数组并将实际的结构数据写入文件，例如：

```
for (i = 0; i < numberOfStudents; i++) {
    fwrite(Data[i], sizeof (Student), 1, file);
} 
```

为了恢复，您需要遍历学生、malloc 存储并读取结构，然后设置数据指针，例如：

```
for (i = 0; i < numberOfStudents; i++) {
    Student *p = malloc(sizeof (Student));
    fread(p, sizeof (Student), 1, file);
    Data[i] = p;
} 
```

此外，通常，您应该检查 fopen、fread、fwrite 和 fclose 的返回值以检测错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:51:41.767

我认为这是罪魁祸首：

```
Student *Data[30]; 
```

**这是一个指向`Student`结构**的指针数组。没有为实际分配的存储空间`Students`。

删除`*`, 在您似乎正确使用的其余代码中，`Data`就好像它是一个普通数组一样，因此它不需要修改。

*在不相关的注释上编辑*，您可以在同一语句中声明结构及其别名，如下所示：

```
typedef struct {
    ...
} Student; 
```

# mongoid - Mongoid 3.1 急切加载、json 和字段名称

> ID：15643872
> 
> 赞同：0
> 
> 时间：2013-03-26T17:41:02.750
> 
> 标签：mongoid, mongoid3

最近从 3.0.3 更新到 Mongoid 3.1，这导致我这边出现了一些损坏的代码和混乱。

假设您有一对具有 belongs_to/has_many 关系的类，如下所示：

```
class Band
  include Mongoid::Document
  field :name, type: String
  has_many :members, :autosave => true
end

class Member
  include Mongoid::Document
  field :name, type: String
  belongs_to :band
end 
```

像这样将所有这些保存到数据库中：

```
b = Band.new
b.name = "Sonny and Cher"
b.members << Member.new(name: "Sonny")
b.members << Member.new(name: "Cher")
b.save 
```

我希望在我的 API 中能够像这样返回一个“成员”对象：

```
m = Member.where(name: "Sonny").first
m.to_json 
```

正如预期的那样，这会产生以下结果：

```
{"_id":"<removed>","band_id":"5151d89f5dd99dd9ec000002","name":"Sonny"} 
```

如果需要，我的客户可以通过后续调用请求完整的乐队对象。但是，在某些情况下，我确实想直接包含引用的项目。使用 3.0.3，我只需执行以下操作：

```
m = Member.where(name: "Sonny").first
m[:band] = m.band
m.to_json 
```

这将添加一个包含完整波段信息的新字段。然而，对于 3.1（它可能在早期版本中已经开始，但我没有测试），我现在得到了这个：

```
{"_id":"<removed>","band_id":{"_id":"5151dc025dd99d579e000002","name":"Sonny and Cher"},"name":"Sonny"} 
```

所以，看起来乐队信息已经被急切地加载到现场？为什么它存储在键 ':band_id' 而不是 ':band' 下？我猜 ':band' 是受保护的，但我仍然认为数据不应该存储在 ':band_id' 键下。我怀疑我在这里遗漏了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:45:04.510

您可以像这样指定一个`:include`选项`to_json`：

```
m.to_json(include: :band) 
```

然后 JSON 将具有一个`band`将 Band 对象转换为 JSON 的键，并且`band_id`仍然存在。

# php - 替代插入到mysql？

> ID：15643873
> 
> 赞同：0
> 
> 时间：2013-03-26T17:41:06.110
> 
> 标签：php

我厌倦了在 MySQL 中制作表单、插入等，并手动对 post 字段进行验证。

在 ruby​​ 中这一切都很容易，但是在 PHP 中有类似的东西吗？

我讨厌打字

```
 INSERT INTO something (1million, 1sdlsds,sds,ds,d,sd,sd,sd,sd,sd,s,ds,ds,ds,dds,sds,dsdsds,ds,dsd,sd,sd,sdsdsdsd) values ('@','a,'sds...........) 
```

并对每个帖子字段进行手动验证。

有没有其他方法可以使这变得容易？

在红宝石中它只是：

```
 o = Users.new(:name => "Jesper", :email => "Noget").save! 
```

以及模型中的验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:44:39.690

你总是可以使用像[Laravel](http://laravel.com)这样的框架。

插入的语法是。

```
$user = new User();
$user->name = "Jesper";
$user->eamil = "Noget";

$user->save() 
```

您不一定必须使用 laravel，大多数框架都有自己的风格，将 sql 查询抽象为对象等等。其他流行的选项是[CodeIgniter](http://ellislab.com/codeigniter)、[CakePHP](http://cakephp.org/)、[Kohana](http://kohanaframework.org/) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:42:34.660

只需插入你想要的东西，就像 Ruby 一样。毕竟，PHP、Ruby 等只是位于 MySQL（和其他数据库）之上。它们不会改变这些数据库的功能。

```
INSERT INTO something (name , email ) values ('Jesper','Noget') 
```

此外，您似乎将原始 SQL 与对象、类和框架混淆了。因此，您的比较不公平或不准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:48:03.510

You can use PDO object.

For example :

```
<?php
/* Execute a prepared request passing array values */
$sql = 'SELECT name, color, weight
    FROM fruit
WHERE weight < :weight AND color = :color';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));

$sth->execute(array(':calories' => 150, ':color' => 'red'));
$red = $sth->fetchAll();

$sth->execute(array(':calories' => 175, ':color' => 'yellow'));
$yellow = $sth->fetchAll();
?> 
```

More examples here : [http://www.php.net/manual/fr/pdo.prepare.php](http://www.php.net/manual/fr/pdo.prepare.php)

The good news is the request is sanitized automatically, and you avoid security fails...

Caution : You have to use PHP >= 5.1.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:46:38.257

在 Ruby **on Rails**中，它很简单`Foo.create!(:bar => 1)`

**on Rails**部分是一个框架。您无法将框架与语言进行比较。

如果您想要 PHP 的类似功能，您应该查找使用**MVC 模式的框架，如**[Zend](http://framework.zend.com/)、[Symfony](http://symfony.com/)或类似的。

# xml - Magento 模块 - 第二组不显示

> ID：15643877
> 
> 赞同：1
> 
> 时间：2013-03-26T17:41:29.157
> 
> 标签：xml, magento, module

这是我第一次尝试构建模块，但是下面组中的某些`<categorylog>`内容被破坏了。第一组`<productlog>`工作正常。到目前为止，这会在 System->Configuration 中创建一个名为 Frank 的新选项卡，其中包含一个名为正确日志的部分。任何人都可以看到 group 有什么问题吗？

```
<config>
<tabs>
    <frank>
        <label>Frank</label>
        <sort_order>100</sort_order>
    </frank>
</tabs>
<sections>
    <properlog>
        <tab>frank</tab>
        <class>separator-top</class>
        <label>Proper Log</label>
        <sort_order>100</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>

        <groups>
            <productlog>
                <label>Product Logs</label>
                <frontend_type>text</frontend_type>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
                <sort_order>100</sort_order>
                <fields>
                    <product_logs_enabled>
                        <label>Enable Product Logs</label>
                        <comment>Set to yes to log product updates</comment>
                        <frontend_type>select</frontend_type>
                        <source_model>adminhtml/system_config_source_yesno</source_model>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                        <sort_order>10</sort_order>
                    </product_logs_enabled>

                    <attributes_to_track>
                        <label>Attributes to Track</label>
                        <frontend_type>textarea</frontend_type>
                        <comment>comma deliminated list of product attribues (eg. type,name,box_width)</comment>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                        <sort_order>20</sort_order>
                    </attributes_to_track>
                </fields>
            </productlog>

            <categorylog>
                <label>Category Logs</label>
                <frontend_type>text</frontend_type>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
                <sort_order>200</sort_order>
                <fields>
                    <category_logs_enabled>
                        <label>Enable Category Logs</label>
                        <comment>Set to yes to log category updates</comment>
                        <frontend_type>select</frontend_type>
                        <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>10</sort_order>
                    </category_logs_enabled>
                </fields>
            </categorylog>

        </groups>
    </properlog>
</sections> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:44:57.420

您缺少`show_in`价值观；默认行为是*不*显示：

```
<sections>
    <properlog>
        <groups>
            <categorylog>
                <fields>
                    <category_logs_enabled>
                        <label>Enable Category Logs</label>
                        <comment>Set to yes to log category updates</comment>
                        <frontend_type>select</frontend_type>
                        <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>10</sort_order>
                        <!-- add these -->
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </category_logs_enabled>
                </fields>
            </categorylog>
        </groups>
    </properlog>
</sections> 
```

# linux - 在 LKM 中识别正在将文件复制到计算机外部

> ID：15643884
> 
> 赞同：0
> 
> 时间：2013-03-26T17:41:41.067
> 
> 标签：linux, linux-kernel, filesystems, system-calls

假设我在 linux-kernel 中插入了 Loadable-Kernel-Module 并挂钩了读取、写入、打开和关闭功能。所以现在我可以停止对任何文件的访问，但我想阻止文件被复制到设备外部，比如 USB 设备、卡、磁盘等。我想知道的是，坐在 LKM 中并与函数调用挂钩怎么能我确定正在将文件写入外部设备？

我还想知道在复制操作期间使用了哪些系统调用？我知道一个程序打开文件从中读取（读取系统调用），然后写入第二个文件（写入系统调用），但是当我试图停止对打开一个进程的文件的写访问时，我观察到了奇怪的行为文件从不对该文件调用写入操作以保存文件（检查 pdf 查看器）。

如果有人知道这种奇怪的行为，或者您知道如何停止写入文件，那么也请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:21:41.043

他们可以`mmap`做读/写。或者他们可以将整个原始文件读入内存，关闭它，然后打开目标。

或者他们可以加密文件，然后将其写入 USB 上的新文件。

或者他们可以对内容进行小幅编辑，然后将其保存。

或者他们可以使用 gvfs 访问网络/USB 设备。

或者用户可以重新启动并将文件复制到不同的操作系统中。

* * *

真正突出的是这个问题真的很困难——一个坚定的用户总是会找到一种方法来从他们有权访问的系统中提取数据。

您最好的选择只是为了防止意外泄漏 - 因此在可移动媒体上关闭后扫描文件，并检查它们没有您不想泄漏的内容。如果有，请覆盖并删除。

或者首先阻止设备安装，并禁用 gvfs。

* * *

至于为什么你的钩子没有拦截 write()，或者：

1.  你的钩子实际上并没有拦截操作。
2.  该应用程序没有使用 write() 将内容放入文件中。

# apache-camel - 断电后恢复骆驼处理

> ID：15643893
> 
> 赞同：1
> 
> 时间：2013-03-26T17:42:09.357
> 
> 标签：apache-camel, shiro, terracotta

我目前正在开发一个骆驼集成应用程序，其中从以前的处理状态恢复很重要。例如，当停电时，重要的是不要重新处理所有先前处理的消息。处理应从中断前中断的地方恢复。

我经历了许多可能的解决方案，包括 Terracotta 和[Apache Shiro](http://shiro.apache.org/)。我不确定如何使用它们，因为与 Apache Camel 集成的文档很少。但是，我还没有解决这两个问题。

我正在寻找有关我可以使用的潜在替代方案的建议或指向一些教程的指针以帮助我入门。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:47:13.313

在中断中幸存下来的困难主要在于状态，以及如何处理飞行中的消息。

通常，当您谈论路由中的状态时，解决方案是将其刷新到磁盘或集群中的其他节点。以聚合器模式为例，聚合状态保存在聚合存储库中。默认实现是在内存中，所以如果断电，所有的状态都会丢失。但是，还有其他实现，包括一个用于 JDBC，另一个使用 Hazelcast（一种轻量级的内存数据网格）。我自己没有使用过 Hazelcast，但是 JDBC 会同步写入磁盘。聚合器模式允许您从中断的地方继续。幂等消费也存在类似的解决方案。

第二个问题，关于飞行中的消息有点复杂，很大程度上取决于你从哪里消费。如果您正在处理 Web 服务请求，并且断电了，是否丢失了消息是否重要？用户可以简单地重试。对外部系统的任何影响都可以包装在一个事务中，或者一个具有 JDBC 幂等存储库的幂等消费者。

如果您正在构建基于消息传递的集成，您应该在事务中消费，这样如果您的服务器出现故障，消息会返回到代理并可以重播给另一个消费者。

`seda:`使用或阻塞时要小心`threads`，它们使用内存中的队列来传递线程之间的交换，如果有人绊倒电源线，任何沿着这些路由流过的消息都会丢失。如果您不能承受消息丢失，并且需要这种处理模型，请考虑使用 JMS 队列作为两个路由之间的端点（使用事务确保您从中断的地方继续）。

# vb.net - 使用 vb.net 从 datagridview 打印到热敏打印机

> ID：15643894
> 
> 赞同：0
> 
> 时间：2013-03-26T17:42:10.550
> 
> 标签：vb.net, printing, thermal-printer

这是一个小型计费软件的代码，必须在热敏打印机中进行打印。以下是我的代码，适用于激光打印机。我想知道此代码是否也适用于热敏打印机，或者我是否应该专门为这类打印机更改代码。如果是这样，请帮我一些代码。提前谢谢:)

```
Private Sub PrintDocument1_PrintPage(ByVal sender As System.Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage
    mRow = 0
    Try
        Dim big, small As Font
        big = New Font(Font.FontFamily, 20, FontStyle.Bold)
        small = New Font(Font.FontFamily, 10, FontStyle.Bold)
        newpage = True
        With DGVView
            Dim fmt As StringFormat = New StringFormat(StringFormatFlags.FitBlackBox)
            fmt.LineAlignment = StringAlignment.Near
            fmt.Trimming = StringTrimming.None
            Dim y As Single = e.MarginBounds.Top
            Do While mRow < .RowCount
                Dim row As DataGridViewRow = .Rows(mRow)
                Dim x As Single = e.MarginBounds.Left
                Dim h As Single = 0
                For Each cell As DataGridViewCell In row.Cells
                    Dim rc As RectangleF = New RectangleF(x, y, cell.Size.Width, cell.Size.Height)
                    e.Graphics.DrawRectangle(Pens.Black, rc.Left, rc.Top, rc.Width, rc.Height)
                    If (newpage = True) Then
                        PrintDocument1.PrinterSettings.DefaultPageSettings.PaperSize = New PaperSize("custom format", 300, 300)
                        'e.Graphics.DrawString("                AYYA NADAR JANAKI AMMAL COLLEGE", big, Brushes.Black, 5, 50)
                        e.Graphics.DrawString(DGVView.Columns(cell.ColumnIndex).HeaderText, small, Brushes.Black, rc, fmt)
                    Else
                        e.Graphics.DrawString(DGVView.Rows(cell.RowIndex - 1).Cells(cell.ColumnIndex).FormattedValue.ToString(), .Font, Brushes.Black, rc, fmt)
                    End If
                    x += rc.Width
                    h = Math.Max(h, rc.Height)
                Next
                newpage = False
                y += h
                mRow += 1
                If y + h > e.MarginBounds.Bottom Then
                    e.HasMorePages = True
                    mRow -= 1
                    newpage = True
                    Exit Sub
                End If
            Loop

            mRow = 0
        End With
    Catch
        MsgBox("Unexpected Error Occured. Sorry for the inconvenience")
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:59:04.977

Graphics 方法与设备无关（[图形类](http://msdn.microsoft.com/en-us/library/ac148eb3.aspx) *“封装 GDI+ 绘图表面”*） - 将它们与打印机一起使用时，它们依赖于打印机设备驱动程序，因此您不必更改代码。

免责声明：您有时会发现不同设备的行为略有不同，因此最简单的方法就是尝试一下！

# javascript - 与 jQuery 混淆，第 1 行 $ 未定义

> ID：15643898
> 
> 赞同：0
> 
> 时间：2013-03-26T17:42:29.177
> 
> 标签：javascript, jquery, html

我今天刚开始学习 jQuery，我已经在 javascript 文件中编写了代码。此代码旨在使按钮在悬停时淡出，然后在将鼠标移开后恢复正常。现在正如我刚才所说，我对 jQuery 很陌生，这意味着我认为这是因为设置错误。这是我的 javascript 内容：

```
$(document).ready(function(){
    $(".buttons").mouseenter(function(){
        $(".buttons").fadeTo("fast",0.25);
        });
    $(".buttons").mouseleave(function(){
        $(".buttons").fadeTo("slow",1);
        });
}); 
```

当我将鼠标悬停在它们上面时，这个 javascript 文件说淡化我的类“按钮”。我已经将我的 HTML 文件链接到这个 js 文件：

```
<script type="text/javascript" src="script.js"> 
```

我知道正确链接到 javascript 文件，因为我打开我的 html 并且控制台在第 1 行显示“$ 未定义”。现在这是我的 javascript 的第一行。很明显，我的 html 正在打开我的 JS 文件，但不喜欢第一行的 $。

再说一遍，我对此很陌生，任何应该显而易见的东西对我来说都不明显。感谢我得到的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:44:12.500

美元符号属于 jQuery 库命名空间，因此您需要在使用之前包含 jQuery。包含库后，您可以使用这些功能，例如通过 选择`$('.classname')`。

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script> 
```

这包括缩小版本中的最新 jQuery 版本。您也可以在本地加载和托管此文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:44:21.003

您是否在 html 文件中包含 jQuery？就像是

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

这必须在第一次使用 $ 之前包括在内，因此在包括你的之前`script.js`

# java - Eclipse 编译器设置在 String 上捕获 ==

> ID：15643899
> 
> 赞同：4
> 
> 时间：2013-03-26T17:42:30.417
> 
> 标签：java, eclipse

有没有办法配置 eclipse 将 String 对象上的 == 比较标记为错误？我只是想要一种方法来防止开发人员使用 == 意外或不知不觉地比较字符串。我通过eclipse搜索并找不到任何东西。有任何想法吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:44:54.037

使用 Eclipse 的 PMD 或 Findbugs 插件来执行此操作。这些工具还可以让您发现其他常见的编程错误。

直接链接到 findbug 规则以检测这种情况：[http ://findbugs.sourceforge.net/bugDescriptions.html#ES_COMPARING_STRINGS_WITH_EQ](http://findbugs.sourceforge.net/bugDescriptions.html#ES_COMPARING_STRINGS_WITH_EQ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:45:19.600

Eclipse 中没有内置任何东西可以让您执行此检查，afaik。但是，您可以结合第三方静态分析工具来为您完成这项工作。FindBugs 确实有一个规则来检查您所描述的内容，并且可以通过插件合并到 Eclipse 中。

*   [查找错误](http://findbugs.sourceforge.net/)
*   [FindBugs 字符串相等规则](http://findbugs.sourceforge.net/bugDescriptions.html#ES_COMPARING_STRINGS_WITH_EQ)
*   [FindBugs Eclipse 插件指南](http://findbugs.sourceforge.net/manual/eclipse.html)

您可能想要查看的其他静态分析工具包括[Checkstyle](http://checkstyle.sourceforge.net/)和[PMD](http://pmd.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T17:47:04.847

是的，您可以在 eclipse 中添加 checkstyle，它能够将 String 的“==”显示为错误

Window -> Preferences -> Checkstyle（[在这里下载插件](http://eclipse-cs.sourceforge.net/)）

然后你可以创建一个新的 Checkstyle。

# join - 多个字段值子报告错误

> ID：15643901
> 
> 赞同：0
> 
> 时间：2013-03-26T17:42:33.717
> 
> 标签：join, reporting-services, parameters

我有一个父报表，将其中一个字段值输入子报表。但问题是这个字段值可以包含多条记录。为简单起见，假设此字段值称为颜色，其中可能的值可能是橙色、红色和绿色。我需要将所有这些值传递给子报表，而不仅仅是一个。我尝试以这种方式将值传递到子报表的 Color 参数中：

```
=Fields!Color.Value 
```

但这不起作用并给我一个错误。我也试过：

```
=join(Fields!Color.Value,",") 
```

这也给了我子报告的错误

我还尝试了上述两种方法作为父报告文本框中的表达式，并且在父报告中显示#Error。通过使用类似的表达式和 First 函数，我能够成功地获得第一个出现的值。但是我无法获取所有值以显示在父报表的此文本框中？我怎样才能做到这一点，或者至少将所有值传递给这个子报表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:49:24.603

简单的解决方案是如果 Color 已经是一个参数 - 我会在子报告中传递这个表达式：

=参数！颜色.值

如果颜色不是参数，我将使用 SELECT ... FOR XML 将一列添加到父报表中的驱动数据集，以将相关的颜色值连接在一起。然后您可以将该字段传递给子报表。

# php - PHP 和 OCI，填充下拉菜单

> ID：15643905
> 
> 赞同：0
> 
> 时间：2013-03-26T17:42:51.583
> 
> 标签：php, html

我想用来自数据库的列表查询填充一个 html 下拉菜单。我有以下...

```
<?php
$conn = oci_connect(//connection stuff goes here//);
$stid = oci_parse($conn, "SELECT DESCRIPTION FROM COUNTRY WHERE COUNTRY_ID IS NOT NULL");

$result = oci_execute($stid, OCI_DEFAULT);

echo '<select>';

while ($row = oci_fetch_array($result)) {
echo '<option value=' . $row['DESCRIPTION'] . '</option>';
}
echo '</select>';

?> 
```

与回声线上的 qoute 标记有关吗？这里的任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:52:22.673

这个问题与Oracle无关。只需替换这个：

```
echo '<option value=' . $row['DESCRIPTION'] . '</option>'; 
```

... 有了这个：

```
echo '<option>' . htmlspecialchars($row['DESCRIPTION']) . '</option>'; 
```

你基本上是在生成这个：

```
<option value=Blah Blah Blah</option> 
```

**编辑：**你忘了`COUNTRY_ID`！将其添加到`SELECT`语句中并使用它：

```
echo '<option value="' . htmlspecialchars($row['COUNTRY_ID']) . '">' . htmlspecialchars($row['DESCRIPTION']) . '</option>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:48:07.883

Yes, your assumption was right, you have to enclose your description in double quotes and also insert it inside the tags, like this:

```
echo '<option value="' . $row['DESCRIPTION'] . '">'.$row['DESCRIPTION'].'</option>'; 
```

# java - 同一活动中的多个加载程序

> ID：15643907
> 
> 赞同：29
> 
> 时间：2013-03-26T17:42:57.443
> 
> 标签：java, android

我有两个定制的加载`AsyncTaskLoader`器继承自我想在我的活动中使用。它们中的每一个都返回不同类型的结果。要将我的活动用于回调，我必须实现两个接口：

```
implements LoaderCallbacks<GetSyncListDataResult>, LoaderCallbacks<ErrorResult> 
```

但是，尝试在同一个类中实现所需的方法最终会出现重复方法错误和擦除（???）错误：

```
// Methods for the first loader
public Loader<GetSyncListDataResult> onCreateLoader(int ID, Bundle bundle) ...
public void onLoaderReset(Loader<GetSyncListDataResult> loader) ...
public void onLoadFinished(Loader<GetSyncListDataResult> loader, GetSyncListDataResult result) ...

// Methods for the second loader
public Loader<ErrorResult> onCreateLoader(int ID, Bundle bundle) ...
public void onLoaderReset(Loader<ErrorResult> loader) ...
public void onLoadFinished(Loader<ErrorResult> loader, ErrorResult result) ... 
```

显然，这些方法是冲突的，我需要一种简单的方法来解决这个问题。解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-12-30T12:42:08.003

正确答案是根据@dymmeh 的评论，即不是为了`Activity`实现两个`LoaderCallbacks`接口，而是为了让活动*包含*两个`LoaderCallbacks`实现。例如：在您的活动中初始化您的`LoaderCallbacks`字段...

```
private LoaderCallbacks<GetSyncListDataResult> dataResultLoaderListener
  = new LoaderCallbacks<GetSyncListDataResult>() { ...methods here... };

private LoaderCallbacks<ErrorResult> errorResultLoaderListener
  = new LoaderCallbacks<ErrorResult>() { ...methods here... }; 
```

...并声明您的加载程序ID...

```
private static final int DATA_RESULT_LOADER_ID = 1;
private static final int ERROR_RESULT_LOADER_ID = 2; 
```

...然后初始化您的装载机...

```
getLoaderManager().initLoader(DATA_RESULT_LOADER_ID, dataResultBundle, dataResultLoaderListener);
getLoaderManager().initLoader(ERROR_RESULT_LOADER_ID, errorResultBundle, errorResultLoaderListener); 
```

... 完毕！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-08T22:28:09.987

```
class YourActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks {
// you still implements LoaderManager.LoaderCallbacks but without add <returnType> 
//and you have to cast the data into your needed data type in onLoadFinished()

    Private int loader1 = 1;
    private int loader2 =2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_detail);

    getSupportLoaderManager().initLoader(REVIEW_LOADER, null, this);
    getSupportLoaderManager().initLoader(REVIEW_LOADER, null, this);
}
    @Override
    public Loader onCreateLoader(int id, Bundle args) {
        if (id == loader1 ) {

            //YourLoaderClass1 is you loaderClass where you implement onStartLoading and loadingInBackground() 
            return new YourLoaderClass1();  
        } else if (id == loader2 ) {

            return new YourLoaderClass2();
        }
        return null;
    }

    @Override
    public void onLoadFinished(Loader loader, Object data) {
        int id = loader.getId();// find which loader you called
        if (id == loader1 ) {

            yourMethod1((List< >) data); // eg. cast data to List<String>
        } else if (id == loader2 ) {
            yourMethod1((String) data); // eg. cast data to String
        }
    }

    @Override
    public void onLoaderReset(Loader loader) {
        int id = loader.getId();
        if (id == loader1 ) {

        } else if (id == loader2 ) {

        }
    }
} 
```

我的[Github 示例](https://github.com/lixw1021/Movies/blob/master/app/src/main/java/com/xianwei/movies/MainActivity.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T12:11:07.863

实际上，如果您`LoaderManager.LoaderCallbacks<T>` 在 Activity 类上实现，并使用特定的加载器 id，使用结果进行操作，它会更简单。这样，您的代码更具可读性和功能性（因为内部加载程序回调的接口实现不再重复）。

例如 ：

```
 public class JobListActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks<NetworkResult> {

        public static final  int    SUBMIT_RISK_ASSESSMENT_LOADER = 546;
        public static final  int    LOAD_RISK_ASSESSMENT_LOADER   = 1546;

        public Loader<NetworkResult> onCreateLoader(int id, @Nullable Bundle args) {
            if (id == SUBMIT_RISK_ASSESSMENT_LOADER) {
                return new NetworkLoader( this, args.getString( NetworkLoader.URL_EXTRA ), NetworkLoader.POST, args.getString( BODY ), false ));
            } else if (id == LOAD_RISK_ASSESSMENT_LOADER) {
                return new NetworkLoader( this, args.getString( NetworkLoader.URL_EXTRA ), NetworkLoader.GET, null, false ) );
            }

            return null;
        }

        @Override
        public void onLoadFinished(@NonNull Loader<NetworkResult> loader, NetworkResult data) {
            if (data == null) {
                return;
            }

            Crashlytics.log( Log.INFO, TAG, "onLoadFinished with data [" + data + "]" );

            if (loader.getId() == SUBMIT_RISK_ASSESSMENT_LOADER) {
                    doSemethingElse(data);
            } else if (loader.getId() == LOAD_RISK_ASSESSMENT_LOADER) {
                    doSemethingElse(data);
            }
            LoaderManager.getInstance( this ).destroyLoader( loader.getId() );
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T19:09:39.800

这是没有必要的。实现 LoaderManager.LoaderCallbacks。然后，每次初始化加载程序时，给它一个唯一的 ID。在回调中，您可以检测导致回调的加载程序的 ID 并采取适当的操作。

那是

```
class MyLoader extends Activity implements LoaderManager.LoaderCallbacks<GetSyncDataResult> {
...
private static final int LOADER1 = 1;
private static final int LOADER2 = 2;
...
getLoaderManager().initLoader(LOADER1, null, this);
...
getLoaderManager().initLoader(LOADER2, null, this);
...

public Loader<GetSyncDataResult> onCreateLoader(int loaderId, Bundle args) {

    switch (loaderId) {

    case LOADER1: ...
    case LOADER2: ...
}
... 
```

等等。

# build - 如何在 Sublime text 2 中为 GridWorld 案例研究设置构建？

> ID：15643909
> 
> 赞同：1
> 
> 时间：2013-03-26T17:43:00.967
> 
> 标签：build, classpath, sublimetext2, gridworld

我是 Sublime text 2 的新手，不知道如何设置构建文件。我一直在尝试运行 GridWorld 案例研究，但我不知道如何设置 GridWorld.jar 文件的类路径。这是我目前拥有的版本：

```
 {
     "cmd": ["javac", "$file_name","&&","java", "$file_base_name"],
     "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
     "path": "C:\\Program Files\\Java\\jdk1.7.0_17\\bin\\",
     "selector": "source.java",
     "shell": true
    } 
```

我尝试在我的系统环境变量中创建一个 CLASSPATH 变量，但是当我尝试运行我的 BugRunner 代码时，我得到一个错误：无法找到或加载主类 BugRunner。如果您需要任何其他信息，我会添加更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T20:47:32.523

你需要添加`-cp .`到`java`命令

```
{
 "cmd": ["javac", "$file_name","-cp",".","&&","java", "$file_base_name","-cp","."],
 "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
 "path": "C:\\Program Files\\Java\\jdk1.7.0_17\\bin\\",
 "selector": "source.java",
 "shell": true
} 
```

# java - 在类中声明时无法访问变量。在函数中声明时工作。为什么？

> ID：15643911
> 
> 赞同：0
> 
> 时间：2013-03-26T17:43:13.900
> 
> 标签：java

在下面的代码中，`LinkedList`是一个用于创建-显然-链接列表的类，它具有方法`insertFirst(..)`and `displayList()`。

我试图使用这个类在另一个类中创建一个变量——> FCFS 类。在 FCFS 类中将其声明为私有变量会导致在以下行出现 NullPointerException 错误：`process.insertFirst(..)`和`process.display()`。当我在`work()`方法中声明它时，它工作得很好。

我只是想了解为什么会这样：

```
public class FCFS {   
    public void work(){
      LinkedList process = new LinkedList();  
      process.insertFirst(3);
      process.displayList(); 
    }     
} 
```

虽然这不是：

```
public class FCFS {
    private LinkedList process;

    public void work(){
        process.insertFirst(3); 
        process.displayList(); 
    }     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:44:27.377

在第二个代码示例中，您没有`process`像在第一个代码示例中那样进行初始化。因此，Java 自动将其初始化为`null`，根据[JLS 4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)。利用：

```
private LinkedList process = new LinkedList(); 
```

或者您可以使用构造函数：

```
public FCFS() {
    process = new LinkedList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:44:40.920

在第二个版本中，您永远不会初始化`process`，因此它的默认值为 null。当你取消引用它时，你会得到一个`NullPointerException`.

如果您在局部变量版本中初始化`process`，`null`您将遇到完全相同的问题......如果您`process`在实例字段版本中初始化为非空值，它将起作用。但目前尚不清楚它应该在*哪里*初始化——这将取决于类其余部分的设计。

如果你根本不初始化局部变量，你会得到一个编译时错误：虽然*字段*有默认值（0、null、false 等），但局部变量没有——编译器会确保你没有从未*明确分配*的变量中读取。

请注意，如果您只*需要*一个变量在方法的持续时间内有效 - 如果它在逻辑上不是类状态的一部分 - 无论如何它最好是一个局部变量。

另请注意，Java 已经带有（通用）`LinkedList`类型。我希望此代码仅用于学术目的:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T17:45:54.280

当您在方法中声明它时，您还分配了一个非空值

```
LinkedList process = new LinkedList(); 
```

在类内部，java 编译器使用 null 值初始化流程变量，因此初始化 NPE。要解决您需要将私有变量声明为

```
private LinkedList process = new LinkedList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T17:48:55.073

在第二个中，您没有初始化 LinkedList（而在第一个中您做了）。你应该做这个：

```
public class FCFS {
  private LinkedList process = new LinkedList();

public void work(){

  process.insertFirst(3);

  process.displayList(); 
}

} 
```

或者这个（我通常更喜欢这个）：

```
public class FCFS {
  private LinkedList process;

public FCFS(){
  this.process = new LinkedList();
}

....(work method)

} 
```

在执行 FCFS 的代码中，work() 初始化 FCFS：

```
FCFS myFCFS = new FCFS();
myFCFS.work(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T17:46:35.673

你面临什么样的错误是空指针异常？尝试初始化链表 1st

```
private LinkedList process = new LinkedList(); 
```

# mysql - MySQL 有两个 Join 和一个 Where 子句

> ID：15643912
> 
> 赞同：0
> 
> 时间：2013-03-26T17:43:17.170
> 
> 标签：mysql

我有 3 张桌子要加入。

OFFICE 包含办公室的地址/联系方式。CRIMECAT 包含办公室可能处理的犯罪法类别，并通过“f_id”与 OFFICE 表相关 CIVILCAT 包含办公室可能处理的民法类别，并通过“f_id”与 OFFICE 表相关.

一个办公室可以处理犯罪法、民法的类别，或者两者都不处理。

用户输入一个位置，并在点击搜索之前通过一系列复选框决定他们感兴趣的法律领域。然后，这应该返回处理该位置中任何已检查类别的办公室地址列表。

这对于犯罪类别或民事类别都非常有效，但是一旦选择了其中的一个或多个，查询就会返回零结果。

查询的工作方式如下：

```
SELECT DISTINCT OF.f_id, OF.acc, OF.add1, OF.add2, OF.add3, OF.city, OF.pc, OF.tel
FROM office OF
JOIN crimecat CR ON OF.f_id=CR.f_id
WHERE OF.id ='3946' AND CR.cat = 'crm' 
```

我将头撞在砖墙上的查询是：

```
SELECT DISTINCT OF.f_id, OF.acc, OF.add1, OF.add2, OF.add3, OF.city, OF.pc, OF.tel
FROM office OF
JOIN crimecat CR ON OF.f_id=CR.f_id
JOIN civilcat CI ON OF.f_id=CI.f_id
WHERE OF.id ='3946' AND ((CR.cat = 'crm') OR (CI.cat = 'aap')) 
```

我还尝试使用 WHERE 子句的变体，它也返回零：

```
WHERE (OF.id ='3946' AND CR.cat = 'crm') OR (OF.id ='3946' AND CI.cat = 'aap') 
```

我开始认为问题出在 JOIN(s) 而不是 WHERE 子句上，但想不出更好的编写方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:50:57.277

这样的事情可能会有所帮助。我怀疑你正在寻找任何一个，但你都要求

```
SELECT DISTINCT OF.f_id, OF.acc, OF.add1, OF.add2, OF.add3, OF.city, OF.pc, OF.tel
FROM office OF
LEFT JOIN crimecat CR ON OF.f_id=CR.f_id
LEFT JOIN civilcat CI ON OF.f_id=CI.f_id
WHERE OF.id ='3946' AND ((CR.cat = 'crm') OR (CI.cat = 'aap')) 
```

# xpages - 扩展库名称选择器中的奇怪行为

> ID：15643913
> 
> 赞同：2
> 
> 时间：2013-03-26T17:43:30.710
> 
> 标签：xpages, xpages-extlib

在 IE、Firefox 和 Chrome 中，当我使用扩展库名称选择器时，并未显示所有名称。数据提供者设置为 dominoNABNamePicker。这是853 1。在服务器上。

如果 NAB 有 250 个条目，则最后显示的名称（使用滚动条）以 J 开头。其余名称只能通过在搜索栏中输入条件才能看到，例如：“M”。有什么办法可以通过滚动查看所有条目？

额外的奇怪行为，在 IE 中，如果列表仍然显示默认名称（未输入标准）并且您单击滚动条的底部，期望显示较低的值，它会“跳转”并重置为列表的顶部（实际上并没有去任何地方）。

这一切都在一个普通的页面上，XPage 上没有其他内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:48:55.543

您是否尝试过设置 Sean Cull 在此处提到的 maxRowCount Dojo 属性[http://www.seancull.co.uk/public/seancull.nsf/dx/getting-the-xpage-extension-library-name-pickers-to-show -超过 50 个名字.htm](http://www.seancull.co.uk/public/seancull.nsf/dx/getting-the-xpage-extension-library-name-pickers-to-show-more-than-50-names.htm)

我也遇到了条目数量有限的问题，但直到现在才看到肖恩的链接。[http://www.intec.co.uk/extension-library-value-picker-and-extlib-dijit-pickerlistsearch/](http://www.intec.co.uk/extension-library-value-picker-and-extlib-dijit-pickerlistsearch/)

# php - 数组数据格式redis pub子通道

> ID：15643914
> 
> 赞同：1
> 
> 时间：2013-03-26T17:43:33.773
> 
> 标签：php, javascript, node.js, nosql, redis

我正在尝试通过节点 eg- [1,2,3] 在 redis 通道上发布一个普通的 javascript 数组。然后我通过订阅同一频道通过predis捕获。

但是，数据始终显示为 [object Object]。我已经尝试过 json stringify 但解析或在 print_r 上，该变量仍然在 php.ini 中显示为 [object Object]。

有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:53:13.033

修复了问题。json结构有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:59:31.793

只要确保您没有`toString()`在任何地方使用方法将数组转换为字符串。如果您使用而不是，`[object Object]`这正是您所期望的`toString()``JSON.stringify()`

# javascript - Highcharts 在堆积柱形图中向系列添加和删除数据

> ID：15643915
> 
> 赞同：0
> 
> 时间：2013-03-26T17:43:34.863
> 
> 标签：javascript, jquery, charts, highcharts

我正在尝试通过从 highcharts 堆叠/柱形图中添加/删除数据和类别来编辑堆叠柱形图。但是图表上的类别名称/值/计数不一致。

我的添加函数 /param:data/:

```
 //setting category names
    var categories = this.obj.xAxis[0].categories;
    categories.push(data.name);
    this.obj.xAxis[0].setCategories(categories);
    //adding new points getting the series by name
    this.obj.get("a").addPoint(data);
    this.obj.redraw(); 
```

我的删除功能/参数：名称/：

```
 var self = this;
    var cat;
    var data_series = [];
    $.each(self.obj.series, function(sKey, sVal){
        var j = sVal.data.length - 1;
        var isRemoved = false;
        var dt;
        while(!isRemoved && j >= 0) {
            var dVal = sVal.data[j];
            if (dVal.category === name) {
                dVal.remove();
                isRemoved = true;
            }
            j--;
        }
    });

    var categories = self.obj.xAxis[0].categories;
    categories.splice( $.inArray(name, categories), 1 );
    self.obj.xAxis[0].setCategories(categories);
    self.obj.redraw(); 
```

结果是这样的：我可以正确添加新的类别/点、堆栈和列。我可以正确删除最新的类别，它会向左移动并且渲染得很好。但是当我从类别 [A,B,C,D] 中删除类别 A 时，结果将呈现为 [C,D,3]。但是，它应该是 [B,C,D]。每当我在此之后添加任何新类别时，它都会增加最后一个数字而不是我给出的字符串。

我想知道上面的代码有什么问题，以及在堆积柱形图中添加/删除类别、点、数据的正确方法是什么。

在这里你可以试试：http: [//jsfiddle.net/gencay/UP55k/](http://jsfiddle.net/gencay/UP55k/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:13:16.930

问题是 x 轴的值递增，但从不递减。例如，当 add point -> index for last point 增加时。但是，只要删除了点（不仅是最后一个！），该索引就不会减少。

一般来说，您必须使用`series.xIncrement`或（最好）添加每个点`x`属性。

带有 series.xIncrement 的 jsFiddle：http: [//jsfiddle.net/UP55k/23/](http://jsfiddle.net/UP55k/23/)（仅在选中/取消选中相同值时有效 - 仅显示一般想法）

# model-view-controller - 具有特定声明的用户的 MVC 重定向

> ID：15643918
> 
> 赞同：0
> 
> 时间：2013-03-26T17:43:44.407
> 
> 标签：model-view-controller, wif, claims-based-identity

我有基于声明的身份、身份验证和授权。

在我的 ClaimsAuthenticationManager 中，我转换用户联合令牌声明并将我的应用程序特定声明添加到 ClaimsPrincipal.Identity 的 ClaimsIdentity。

如果联合用户未在应用程序中本地注册，我会生成一个 `"http://xml/claims/newUser"`声明，其值为“true”。

现在，在我的应用程序中，如果用户在其声明集中有此特定声明，我需要重定向到“帐户”控制器中的“注册用户”操作。

这可能很简单，但我只是没有找到这种情况的合乎逻辑的解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:45:41.453

我为我的问题找到的解决方案是用这个简单的 IFilterAttribute 解决的。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple=true)]
public class RedirectOnClaimFilter : ActionFilterAttribute, IActionFilter
{

    public string ClaimType { get; set; }
    public string ClaimValue { get; set; }
    public string Controller { get; set; }
    public string Action { get; set; }

    #region IActionFilter Members

    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        ClaimsIdentity id = (ClaimsIdentity)filterContext.HttpContext.User.Identity;

        if (id.HasClaim(p => p.Type == ClaimType && string.Compare(p.Value, ClaimValue, true) == 0))
            filterContext.Result = RedirectToAction(Controller, Action);

        base.OnResultExecuting(filterContext);
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        //throw new NotImplementedException();
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        ClaimsIdentity id = (ClaimsIdentity)filterContext.HttpContext.User.Identity;

        if (id.HasClaim(p => p.Type == ClaimType && string.Compare(p.Value, ClaimValue, true) == 0))
            filterContext.Result = RedirectToAction(Controller, Action);

    }

    private ActionResult RedirectToAction(string Controller, string Action)
    {
        return new RedirectToRouteResult(new System.Web.Routing.RouteValueDictionary()
                                                {
                                                    {"Controller", Controller},
                                                    { "Action", Action}
                                                });
    }
    #endregion
} 
```

然后我可以选择一个特定的声明来验证 Controller 调用，如下所示：

```
[RedirectOnClaimFilter(Action="WaitForApproval",
    Controller="Account",
    ClaimType = "http://solution/claims/pendinguser",
    ClaimValue="true")]
[RedirectOnClaimFilter(Action = "RegisterFederated",
    Controller = "Account",
    ClaimType = "http://solution/claims/newuser",
    ClaimValue = "true")]
[HandleError(ExceptionType = typeof(SecurityException), View = "Error")]
public class OrganizationController : BaseController
{
    public ActionResult OrganizationAction()
    {
         return View();
    }
} 
```

它将检查委托人的声明集中的特定声明，如果找到，用户将被重定向到特定的控制器和操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:26:34.733

Wifi 风格的方法是使用 ClaimsAuthorizationManager （感谢@leastprivilege[文章](http://leastprivilege.com/2011/04/30/what-i-like-about-wifs-claims-based-authorization/)）：

```
try
{
    ClaimsPrincipalPermission.CheckAccess(“User”, “Newbie”);
}
catch (SecurityException ex)
{
    RedirectToAction("RegisterUser", "Account");
} 
```

CheckAccess 称为 ClaimsAuthorizationManager.CheckAccess() ，您将在其中为这组操作、资源和主体实施具体的声明检查：

```
var principal = (ClaimsPrincipal)Thread.CurrentPrincipal;
if (principal != null)
{
     var newUserClaim =  principal.Claims.SingleOrDefault(c => string.Compare(c.Type, "http://xml/claims/newUser", StringComparison.InvariantCultureIgnoreCase) == 0)
} 
```

更新最简单的方法是 Principal 的 HasClaim() 方法：

```
var principal = (ClaimsPrincipal)Thread.CurrentPrincipal;
If (principal.HasClaim("http://xml/claims/newUser", "true")) 
{
    RedirectToAction("RegisterUser", "Account");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-05T19:08:28.207

您可以使用具有名为**ClaimsAuthorize**的属性的**Thinktecture.IdentityModel**，它将自动将用户重定向到登录页面。为了使用 Thinktecture.IdentityModel 您需要使用 Nuget 将包添加到您的 MVC 应用程序

```
Install-Package Thinktecture.IdentityModel 
```

如果您已经在使用 ClaimsPrincipalPermission，那么您已经拥有 ClaimsAuthorizationManager 类来检查/授权应用程序中的声明，在这种情况下，您无需执行任何其他操作。现在您可以按如下方式装饰您的 MVC 操作方法：

```
[ClaimsAuthorize("View", "About")]
public ActionResult About(int id=0)
{

    return View();
} 
```

如果当前登录的用户没有对“关于”资源的“查看”操作的声明，他/她将被重定向到登录页面。

# ruby-on-rails - 将日志数据从 Rails 应用程序插入到 mongodb 的最佳实践

> ID：15643920
> 
> 赞同：0
> 
> 时间：2013-03-26T17:43:46.183
> 
> 标签：ruby-on-rails, mongodb, logging, analytics

我正在尝试找出将日志数据导入 mongodb 的最佳方法。让我们创建一个简单的 mongo 集合，用于跟踪我网站上的所有流量。我已经想到了一些可能的解决方案，但我不确定它是否干净：

选项 1：在应用程序控制器中添加一个前置过滤器，并在用户访问我的站点时使用 MongoMapper 在 mongo 中创建/更新记录。一个可能的缺点是如果一个页面被缓存并且没有命中 rails 堆栈。我也不喜欢在我已经需要输出到日志时弄乱控制器并投入更多工作的想法。

选项 2：以某种方式跟踪 apache 日志，当新数据进入时，将其放入 mongodb。有没有可以观察/跟踪日志的工具？

有任何改进或更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:26:09.933

不要重新发明轮子，Github 是你的朋友。

简短的搜索咳出这个：[https ://github.com/ClarityServices/semantic_logger](https://github.com/ClarityServices/semantic_logger)

或者这个：

[http://blog.treasure-data.com/post/13766262632/real-time-log-collection-with-fluentd-and-mongodb](http://blog.treasure-data.com/post/13766262632/real-time-log-collection-with-fluentd-and-mongodb)

# rewrite - wget 条件链接重写

> ID：15643923
> 
> 赞同：1
> 
> 时间：2013-03-26T17:43:55.450
> 
> 标签：rewrite, hyperlink, wget

我有以下 wget 命令：

```
wget --http-user='user' --http-password='password' --trust-server-names --quiet -r -p -k -E -e robots=off -P /Users/Sebastian/Desktop/test/ http://somedomain.com 
```

除了以下内容之外，这可以完成我想做的所有事情。它从此重写了我的规范链接：

```
<link rel="canonical" href="http://somedomain.com/somedir/somedir/somedir/folder/" /> 
```

对此：

```
<link rel="canonical" href="index.html" /> 
```

知道如何将规范链接排除在重写过程之外吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:07:04.820

我们能否仅从给定的 URL 中检测 URL 是否被标记为规范？因为一种解决方案就是不下载这些页面。

另一个解决方案 - 只需下载所有内容。比删除那些 Cannonical 标记的文件并按照[此处](https://serverfault.com/questions/287749/can-wget-convert-links-within-a-local-html-document)所述重写。

# iphone - 当 24 小时制关闭时，如何根据 NSLocale 强制 NSDate 对象遵循特定格式？

> ID：15643933
> 
> 赞同：-3
> 
> 时间：2013-03-26T17:44:20.460
> 
> 标签：iphone, ios, objective-c, nsdate

我正在尝试以我的移动应用程序的 Web 服务可以接受的格式获取 NSDate。该应用程序目前`2013-03-26 17:27:55`在老一代设备（iPhone 3GS、4 和 iOS 模拟器）上以格式输出，其中 12 小时时间以下午 5:27 的格式显示在状态栏中。这很好，这是我需要它用于服务器的格式。

当使用更新的设备（包括 iPhone 4S 和 iPhone 5）时，我的问题出现了，其中 12 小时时间以下午 5:27 的格式显示在状态栏中。在这些设备上，应用程序以`2013-03-26 05:27:55 PM`. 这是问题的摘要：

```
Web service accepts yyyy-mm-dd HH:MM:ss
iPhone 4 and earlier yyyy-mm-dd HH:MM:ss (correct)
iPhone 4s and later yyyy-mm-dd HH:MM:ss AM/PM (incorrect and rejected) 
```

那么，如何在用户的常规设置中关闭 24 小时制时，将 4S 及之后的输出日期设为 24 小时制？

编辑：

我正在使用以下`(NSDate *)getCurrentDate`方法尝试修改 NSDate 对象的格式。

```
NSDate *currentDateAndTime = [[NSDate alloc] init];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

NSLog(@"AM Symbol: %@", formatter.AMSymbol);
NSLog(@"PM Symbol: %@", formatter.PMSymbol);

NSString *dateString = [formatter stringFromDate:currentDateAndTime];
NSDate *date = [formatter dateFromString:dateString];

NSLog(@"currentDate: %@ currentDateString: %@", date, dateString);

return [formatter dateFromString:[formatter stringFromDate:currentDateAndTime]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:36:43.787

使用日期格式化程序

```
- (NSString *)dateStringForWebService:(NSDate *)date
{
    //If you call this often, you should cache the date formatter object
    NSDateFormatter * dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"MM/dd/yy HH:mm:ss"];
    NSString * formattedDate = [dateFormatter stringFromDate:date];
    return formattedDate;
} 
```

# c# - 从另一个程序读取标准输出

> ID：15643937
> 
> 赞同：2
> 
> 时间：2013-03-26T17:44:31.373
> 
> 标签：c#, process, io

我有一个程序（服务器）将四行输出打印到控制台，然后开始侦听来自客户端程序的传入连接。

我有另一个程序（测试仪），我想从服务器读取标准输出并对其进行分析。我已经设置了测试程序来启动服务器并得到它的输出，如下所示：

```
Process server = new Process();
server.StartInfo.FileName = "server.exe";
server.StartInfo.UseShellExecute = false;
server.StartInfo.RedirectStandardInput = true;
server.StartInfo.RedirectStandardOutput = true;
server.StartInfo.RedirectStandardError = true;
server.Start();
StreamReader serverOutput = server.StandardOutput;
string line = serverOutput.ReadToEnd();
... 
```

我遇到的问题是，当我自己执行服务器时（或者当我在没有重定向输出的情况下使用测试仪执行它时）我可以在控制台上看到所有四行。但是，当我使用上面的代码将服务器输出重定向到测试程序时，测试程序会挂起“ReadToEnd”命令，就好像它正在等待服务器的更多输出一样。

我还尝试使用“ReadLine”命令并将其放入重复 4 次的 FOR 循环中。当我这样做时，前三行输出被成功拾取，然后它挂在第 4 个“ReadLine”上，并且永远不会检索服务器输出的第 4 行。

最后，我还尝试使用“读取”命令尝试一次获取一个字符，但仍然无法从服务器输出的第 4 行获取任何字符。

关于我在这里缺少什么的任何建议？

**更新：** 经过大量搜索，我终于确定问题与输出缓冲问题有关。服务器程序（用 C++ 编写）写入`cout`，似乎在打印到屏幕时会自动刷新，但在将 stdout 重定向到测试程序时不会自动刷新。我可以添加`setvbuf(stdout, NULL, _IONBF, 0);`到服务器程序以使 stdout 不被缓冲，但我更愿意找到另一个不涉及更改服务器程序的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:12:21.577

ReadToEnd 将在流结束时返回。这发生在程序关闭时。

您可以尝试使用事件处理程序读取数据`server.OutputDataReceived`。这样，您将异步接收它，而不会阻塞您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T09:34:48.173

我昨天在尝试解决这个问题时发现了这个问题，所以我想我会用我找到的解决方案来回答它，只是为了后代。

我遇到的问题是`process.WaitForExit`调用在输出流完成读取之前关闭它们。`ReadLine`通过在几个`Task`s中运行循环，并`Wait`在调用之前对那些循环进行 ing `WaitForExit`，我设法获得了所有输出（在本例中来自 Git 调用）。

希望这可以帮助某人。

```
var psi = new ProcessStartInfo(@"C:\Program Files (x86)\Git\bin\git.exe", "push " + remoteUrl + " " + branch)
{
    UseShellExecute = false,
    RedirectStandardOutput = true,
    RedirectStandardError = true
};

var process = new Process
{
    StartInfo = psi
};

Console.WriteLine("Pushing...");

process.Start();

var stdOutTask = Task.Factory.StartNew(() =>
{
    string str;
    while ((str = process.StandardOutput.ReadLine()) != null)
    {
        Console.WriteLine(str);
    }
});
var stdErrorTask = Task.Factory.StartNew(() =>
{
    string str;
    while ((str = process.StandardError.ReadLine()) != null)
    {
        Console.WriteLine(str);
    }
});

stdOutTask.Wait();
stdErrorTask.Wait();
process.WaitForExit();
process.Close(); 
```

# css - 将 CSS 应用于特定的 p:dataTable 组件而不是所有 p:dataTable 组件

> ID：15643947
> 
> 赞同：6
> 
> 时间：2013-03-26T17:44:56.830
> 
> 标签：css, jsf, primefaces, datatable

我在申请表上有多个数据表。我想删除除一个之外的所有数据表的边框。我使用下面的样式来删除边框。能否请您告诉我如何才能获得只有一个带边框的数据表。截至目前，它删除了所有数据表的边框。

```
.ui-datatable .ui-datatable-data td, .ui-datatable .ui-datatable-data-empty td {
  border-style: none;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T18:42:12.637

给有问题的表一个特定的样式类：

```
<p:dataTable ... styleClass="borderless"> 
```

这样您就可以为此使用更具体的 CSS 选择器：

```
.ui-datatable.borderless .ui-datatable-data tr,
.ui-datatable.borderless .ui-datatable-data-empty tr,
.ui-datatable.borderless .ui-datatable-data td,
.ui-datatable.borderless .ui-datatable-data-empty td {
    border-style: none;
} 
```

*（请注意，我也将选择器扩展为覆盖`tr`；默认情况下它还有一个边框，您的初始选择器仅删除列之间的垂直边框，而不是行之间的水平边框）*

### 也可以看看：

*   [如何使用自定义样式覆盖默认的 PrimeFaces CSS？](https://stackoverflow.com/questions/8768317/how-do-i-override-those-classes-defined-in-primefaces-css/8774997#8774997)

# c# - C# SQL => 运算符含义

> ID：15643948
> 
> 赞同：0
> 
> 时间：2013-03-26T17:45:00.673
> 
> 标签：c#, linq, lambda

在 LINQ 中使用 C# SQL，我遇到了以下语句：

```
var names = database.Browsers.Select(b => b.Name); 
```

做什么`b=>b.Name`？运营商一般是做什么的`=>`？

该代码是 C#.net 框架的一部分，其中数据库是通过 Linq 处理底层数据库的句柄。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:47:35.577

The `=>` indicates the use of a [lambda expression](http://msdn.microsoft.com/en-us/library/bb397687.aspx). In this case `b` is a reference to an instance of the Browser object, while the `Select(b=> b.Name)` will return an enumerable containing only the attribute `Name`.

# javascript - d3.js 介绍的麻烦

> ID：15643949
> 
> 赞同：5
> 
> 时间：2013-03-26T17:45:09.740
> 
> 标签：javascript, html, svg, d3.js

所以我刚刚开始 d3.js 并且我不断收到 JavaScript 错误，我不知道为什么。我刚刚用 svg 创建了三个圆圈，并想用 d3 选择它们。这是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript"></script>        
</head>
<body>
    <svg width="360" height="180">
        <circle class="little" cx="180" cy="45" r="12"></circle>
        <circle class="little" cx="60" cy="90" r="12"></circle>
        <circle class="little" cx="300" cy="135" r="12"></circle>
    </svg>
    <script type="text/javascript">
        var circle = svg.selectAll("circle");
    </script>
</body>
</html> 
```

这应该选择页面上的圆圈，以便我可以操纵它们，但我在我的 Web 控制台中不断收到一个参考错误，说 svg 未定义？但是入门教程没有说明定义 svg 的内容吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:48:07.883

You need to actually select the svg element first before using `svg.selectAll`.

```
var svg = d3.select(document.getElementById('sampleSVGId')),
    circle = svg.selectAll('circle'); 
```

# azure - Windows Azure 网站磁盘空间

> ID：15643950
> 
> 赞同：4
> 
> 时间：2013-03-26T17:45:17.223
> 
> 标签：azure

我有一个以共享模式在 Windows azure 中运行的网站，我对此非常满意。但后来我注意到我只有 1Gb 的可用磁盘空间，这远远不够。所以我想升级，但发现有两个选项都不好：

1) 升级到保留模式提供 10Gb 但对于将在那里运行的所有网站，什么？*最便宜的托管选项为一个*网站提供更多磁盘空间。此外，这对我来说没有意义，因为我对共享模式的速度非常满意。

2) 使用 blob 存储。所以我需要重写我的代码以适应天蓝色？不应该反过来吗？对我来说，选择 azure 而非传统虚拟主机的最重要原因之一是承诺易于升级，但我第一次升级时，这并不容易。

我是否遗漏了什么，有没有更好的方法来为 Windows azure 网站获取更多磁盘空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T18:02:19.937

绝对使用 blob 存储，实际的 azure web 服务器不应该用于存储持久性。使用 blob 存储将允许更好的升级。

azure Web 服务器旨在处理易变的部署。它们旨在仅容纳您的应用程序/服务，并让您灵活地轻松创建和销毁它们的实例。鉴于这种灵活性，如果您将内容存储在实际中，您将面临在放大、缩小和四处放大时丢失这些信息的风险。

然后还有另一种情况，如果您有两个 azure Web 服务器正在运行...请求 #1 转到服务器 #1 并上传文件。这显然会保存到#1 服务器的硬盘驱动器中。现在，如果同一个 #1 用户再次返回（或任何用户），但这次将负载平衡到服务器 #2 并请求该文件 - 服务器 #2 如何知道从哪里获取该文件？

基本上，将文件保存到网络服务器的硬盘驱动器会产生可伸缩性问题。要解决此问题，您必须将所有文件保存到一个集中位置……这就是 Azure Blob 存储发挥作用的地方。

Azure 并不是被设计成一个神奇的独角兽，你只需将应用程序扔给它，它就会神奇地扩展……你需要稍微改变思维方式，从单一服务器应用程序转变为可以在世界各地的多台服务器上运行的应用程序所有这些都需要来自集中位置的相同数据。

# mysql - SQL - SUM() 上的 WHERE 条件

> ID：15643959
> 
> 赞同：4
> 
> 时间：2013-03-26T17:45:36.460
> 
> 标签：mysql, sql, sum, conditional-statements

是否有可能做这样的事情：

```
SELECT 
  `e`.*, 
  `rt`.`review_id`, 
  (SUM(vt.percent) / COUNT(vt.percent)) AS rating 
FROM `catalog_product_entity` AS `e` 
INNER JOIN `rating_option_vote` AS `vt`
  ON vt.review_id = e.review_id 
WHERE (rating >= '0') 
GROUP BY `vt`.`review_id` 
```

特别是我想在除法结果值上放置一个 where 条件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:46:59.200

这可以通过 HAVING 子句来完成：

```
SELECT e.*, rt.review_id, (SUM(vt.percent) / COUNT(vt.percent)) AS rating 
FROM catalog_product_entity AS e 
INNER JOIN rating_option_vote AS vt ON e.review_id = vt.review_id 
GROUP BY vt.review_id
HAVING (SUM(vt.percent) / COUNT(vt.percent)) >= 0
ORDER BY (SUM(vt.percent) / COUNT(vt.percent)) ASC 
```

注意：添加了 where to put`ORDER BY`语句

查询优化器也不应该多次计算平均值，所以这里不应该担心。

正如@jagra's answer中提到的，您应该能够使用`AVG()`而不是`SUM() / COUNT()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:49:04.020

您可以使用`HAVING`子句：

```
SELECT 
  `e`.*, 
  `rt`.`review_id`, 
  (SUM(vt.percent) / COUNT(vt.percent)) AS rating 
FROM `catalog_product_entity` AS `e` 
INNER JOIN `rating_option_vote` AS `vt`
  ON vt.review_id = e.review_id 
GROUP BY `vt`.`review_id` 
HAVING rating >= 0; 
```

由于您的问题被标记为 MySQL，因此该解决方案应该可以工作，如文档所示：

*...在标准 SQL 中，包含 GROUP BY 子句的查询不能引用 HAVING 子句中未在 GROUP BY 子句中命名的非聚合列。MySQL 扩展允许引用此类列以简化计算。...*

此扩展在官方 MySQL 编译中默认启用。

参考：[http](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html) ://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html （页面上第一次出现的单词`HAVING`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:05:19.690

通过聚合函数过滤时需要使用 HAVING 子句：

```
SELECT 
  # `e`.*, => is this needed
  `rt`.`review_id`, 
  (SUM(vt.percent) / COUNT(vt.percent)) AS rating 
  AVG(vt.percent) AS rating1 # same as above 
FROM `catalog_product_entity` AS `e` 
INNER JOIN `rating_option_vote` AS `vt`
  ON vt.review_id = e.review_id 
GROUP BY `vt`.`review_id`
HAVING AVG(vt.percent) > 0 
```

另外两个注意事项：

1) SUM(x)/COUNT(x) <=> AVG(x)

2）您将 e.* 包括在 select 中，但不在 group by 中。MySql 允许您这样做，但其他数据库不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:49:43.333

用于`HAVING`聚合条件（例如您拥有的条件）

```
SELECT `e`.*, `rt`.`review_id`, (SUM(vt.percent) / COUNT(vt.percent)) AS rating 
FROM `catalog_product_entity` AS `e` 
INNER JOIN `rating_option_vote` AS `vt`
    ON vt.review_id = e.review_id 
WHERE ( rating >= '0') 
GROUP BY `vt`.`review_id'
HAVING (SUM(vt.percent) / COUNT(vt.percent)) > 0 
```

# c# - 将外部 DLL 添加到 WIX 项目

> ID：15643960
> 
> 赞同：4
> 
> 时间：2013-03-26T17:45:38.277
> 
> 标签：c#, visual-studio-2012, wix, windows-installer, wix3

我正在尝试在 VS 2012 中使用 Wix 构建安装，但我无法添加“外部”引用

我有我的项目 FirmwareUpload，这是我想要安装的东西，并引用了我们公司的框架。还有 FirmwareUploadSetup 这是我的安装程序项目。我在这个项目中添加了对我的另一个项目的引用并创建了 XML：

```
<ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
  <Component Id="MainEXE">
    <!-- TODO: Insert files, registry keys, and other resources here. -->
    <File Source="$(var.FirmwareUpload.TargetPath)">
      <Shortcut Id="startmenuFWU10" Directory="ProgramMenuDir" Name="Firmware Upload 1.0"
                WorkingDirectory="INSTALLDIR" Advertise="yes" />
      <Shortcut Id="desktopFWU10" Directory="DesktopFolder" Name="Firmware Upload 1.0"
                WorkingDirectory="INSTALLDIR" Advertise="yes" />
    </File>

  </Component>
  <Component Id="AstuFMS">
    <File Source="$(var.Astus.FMS.TargetPath)" Name="Astus.FMS.dll" ShortName="AF" />
  </Component>
  <Component Id="AstusServerBusinessLogic">
    <File Source="$(var.Astus.Server.BusinessLogic.TargetPath)" Name="Astus.Server.BusinessLogic.dll"
          ShortName="ASBL" />
  </Component>
  <Component Id="ETL">
    <File Source="$(var.ETLElectronique.TargetPath)" />
  </Component>
  <Component Id="ETLBusiness">
    <File Source="$(var.ETLElectronique.Business.TargetPath)" Name="ETLElectronique.Business.dll" ShortName="EB" />
  </Component>
  <Component Id="ETLCommon">
    <File Source="$(var.ETLElectronique.Common.TargetPath)" Name="ETLElectronique.Common.dll" ShortName="EC" />
  </Component>
  <Component Id="ETLData">
    <File Source="$(var.ETLElectronique.Data.TargetPath)" Name="ETLElectronique.Data.dll" ShortName="ED" />
  </Component>
  <Component Id="ETLNet">
    <File Source="$(var.ETLElectronique.Net.TargetPath)" Name="ETLElectronique.Net.dll" ShortName="EN" />
  </Component>
  <Component Id="ETLWindows">
    <File Source="$(var.ETLElectronique.Windows.TargetPath)" Name="ETLElectronique.Windows.dll" ShortName="EW" />
  </Component>
</ComponentGroup> 
```

这行得通！当我执行安装程序时，我会在我的目录中获得这些文件。但软件运行还需要其他文件（例如：log4net.dll）

当我编译我的“FirmwareUpload”项目时，我得到了 log4net.dll（和许多其他的）。所以我需要在我的安装中使用这些 DLL，以便程序在安装后运行。

通过以下方式工作：

```
 <ComponentGroup Id="DocumentationComponents" Directory="INSTALLFOLDER" Source="C:\fms\hotfix\v42x\V6\Utilitaire\FirmwareUpload\FirmwareUpload\bin\Debug">
      <Component Id="log4net">
        <File Name="log4net.dll" />
      </Component>
      <Component Id="Astus.Device.Configuration">
        <File Name="Astus.Device.Configuration.dll" />
      </Component>
      <Component Id="Astus.Device">
        <File Name="Astus.Device.dll" />
      </Component>
      <Component Id="Microsoft.Practices.EnterpriseLibrary.Common">
        <File Name="Microsoft.Practices.EnterpriseLibrary.Common.dll" />
      </Component>
      <Component Id="Microsoft.Practices.EnterpriseLibrary.Data">
        <File Name="Microsoft.Practices.EnterpriseLibrary.Data.dll" />
      </Component>
      <Component Id="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling">
        <File Name="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.dll" />
      </Component>
      <Component Id="Microsoft.Practices.ObjectBuilder">
        <File Name="Microsoft.Practices.ObjectBuilder.dll" />
      </Component>
    </ComponentGroup> 
```

但是有没有更少的“硬编码”方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:05:21.387

您可以使用`heat`（“Harvest Tool”）扫描文件夹并生成在该文件夹中包含文件所需的 xml。

见[http://wix.sourceforge.net/manual-wix3/heat.htm](http://wix.sourceforge.net/manual-wix3/heat.htm)

# c# - 留在移动平台上

> ID：15643961
> 
> 赞同：5
> 
> 时间：2013-03-26T17:45:42.467
> 
> 标签：c#, unity3d

我正在 Unity 中编写 2D 平台游戏，并试图让玩家停留在移动平台上。我已经搜索和修补了一两天了，但我没有任何运气。

基本上，我被告知要在角色接触时尽量让角色随着平台移动。首先，如果我使用与 OnTriggerEnter() 相关的任何内容，玩家将直接通过平台。如果我执行 OnCollisionEnter()（在播放器上使用 CharacterController，在平台上使用 BoxCollider），则什么也不会发生。这是我发现建议最多的两件事。另一个是用平台养育玩家，但这显然会导致“问题”（经常说，从未解释过）。

那么，我怎样才能让玩家留在移动平台上呢？这是移动平台的代码：

```
public class MovingPlatform : MonoBehaviour
{
private float useSpeed;
public float directionSpeed = 9.0f;
float origY;
public float distance = 10.0f;

// Use this for initialization
void Start () 
{
    origY = transform.position.y;
    useSpeed = -directionSpeed;
}

// Update is called once per frame
void Update ()
{
    if(origY - transform.position.y > distance)
    {
        useSpeed = directionSpeed; //flip direction
    }
    else if(origY - transform.position.y < -distance)
    {
        useSpeed = -directionSpeed; //flip direction
    }
    transform.Translate(0,useSpeed*Time.deltaTime,0);
} 
```

这里是玩家移动的代码（更新中）：

```
CharacterController controller = GetComponent<CharacterController>();
    float rotation = Input.GetAxis("Horizontal");
    if(controller.isGrounded)
    {
        moveDirection.Set(rotation, 0, 0); //moveDirection = new Vector3(rotation, 0, 0);
        moveDirection = transform.TransformDirection(moveDirection);

        //running code
        if(Input.GetKey(KeyCode.LeftShift) || Input.GetKey(KeyCode.RightShift)) //check if shift is held
        { running = true; }
        else
        { running = false; }

        moveDirection *= running ? runningSpeed : walkingSpeed; //set speed

        //jump code
        if(Input.GetButtonDown("Jump"))
        {
            //moveDirection.y = jumpHeight;
            jump ();
        }
    }
    moveDirection.y -= gravity * Time.deltaTime;
    controller.Move(moveDirection * Time.deltaTime); 
```

编辑：我认为这可能与我如何定义播放器和平台有关，但我尝试了不同的组合。如果平台是一个触发器（在它的对撞机上），玩家会一直通过它。如果没有，我不能使用 OnTrigger 函数。我在播放器和平台上都有一个刚体，但它似乎没有影响任何东西。当玩家在某些设置中确实进入平台时，他会感到不安，并且经常会以失败告终。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:31:57.037

这不是最好的方法，但您可以执行从播放器到移动平台的 RayCast。如果 RayCast 击中“MovingPlatform”，您可以检查 Y 轴上的差异以确定玩家是否足够接近它以被视为“OnThePlatform”。然后你可以像往常一样调整玩家的位置。

一个例子是：

```
private bool isOnMovingPlatform;
private float offsetToKeepPlayerAbovePlatform = 2.2f;
private float min = 0.2f;
private float max = 1.2f;

private void Update()
{
RaycastHit hit;
if(Physics.Raycast (player.position, player.TransformDirection(Vector3.down), out hit))
{
    if(hit.transform.name.Contains("MovingPlatform"))
    {
        Transform movingPlatform  = hit.collider.transform;

        if(movingPlatform.position.y - player.position.y <= min && movingPlatform.position.y - player.position.y >= max)
        {
            isOnMovingPlatform = true;
        }
        else
        {
            isOnMovingPlatform = false;
        }
    }

    if(isOnMovingPlatform)
    {
        player.position = new Vector3(hit.transform.x, hit.transform.y + offsetToKeepPlayerAbovePlatform, 0);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:25:00.667

您需要的似乎是平台上的第二个对撞机。主对撞机必须`isTrigger = false`确保您的角色控制器正常工作。第二个运行时`isTrigger = true`，它的唯一功能是检测玩家在`OnTriggerEnter`被调用时是否依附在平台上并离开平台`OnTriggerExit`。

因为你不能有 2 个相同类型的碰撞器（我猜你需要盒子碰撞器），所以在你的平台游戏对象下构建一个空子对象并将盒子碰撞器分配给它。我通常会使用一种名为 ActionMaterial 的特殊物理材料来清洁我的东西。如果您正在使用图层并调整了碰撞矩阵，请确保您的碰撞由 physX 处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:30:26.763

[这个 Unity Answers 页面](http://answers.unity3d.com/questions/8207/charactercontroller-falls-through-or-slips-off-mov.html)可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-22T17:32:57.617

您也可以简单地使玩家游戏对象变换父级等于平台的变换。这允许玩家在其上时仍保持移动。至于检测，Raycast 有点慢，但可以完成工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T15:47:41.507

我们通过使用 SliderJoint2d 并在移动平台上将角色的重力比例设置为零来解决了这个问题。以下是完整说明的链接：

[http://spacelizardstudio.com/devblog/index.php/2016/03/02/unity-a-guide-to-moving-platforms/](http://spacelizardstudio.com/devblog/index.php/2016/03/02/unity-a-guide-to-moving-platforms/)

# forms - 我将如何制作具有总定价的杂货清单脚本？

> ID：15643963
> 
> 赞同：0
> 
> 时间：2013-03-26T17:45:44.523
> 
> 标签：forms, shopping

我正在尝试编写一个带有购物清单的表单，用户将能够添加商品数量，并在最后显示所有产品的总数。

我把它想象成这样：

鸡蛋（$2.00）[（用户输入他们的数量）3]

奶酪（4.00 美元）[1]

牛奶（3.00 美元）[（留空，因此被忽略）]

* * *

总计：10.00 美元

然后可以将数量和总数发送到电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:56:02.677

假设您希望它通过 AJAX 的魔力进行交互和即时更新，我建议您查看[Knockout JS](http://knockoutjs.com/)或[Angular JS](http://angularjs.org/)。这两个框架都提供了示例，可以帮助您使用数据绑定表单。

# matlab - 在 Matlab 中，如何通过从完整路径中删除当前文件名来计算路径？

> ID：15643964
> 
> 赞同：2
> 
> 时间：2013-03-26T17:45:44.640
> 
> 标签：matlab, file-io

如何通过从完整路径中删除当前文件名来计算路径？到目前为止我有这个：

```
fullPath = mfilename('fullpath')
curMfile = mfilename();
path = 
```

但我不知道该放什么路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:47:33.160

You can use `[pathstr, name, ext] = fileparts(filename)`

# java - MonoDroid Java 绑定：UnsatisfiedLinkError

> ID：15643969
> 
> 赞同：0
> 
> 时间：2013-03-26T17:46:02.930
> 
> 标签：java, binding, xamarin.android

在我的 MonoDroid Java 绑定项目中，我还使用了本机库（somelib.so），它包含在“AndroidNativeLibrary”中

该库似乎已成功加载：

```
"...
Trying to load lib /data/data/AndroidApplication1.AndroidApplication1/app_dynlibs/somelib.so
Added shared lib /data/data/AndroidApplication1.AndroidApplication1/app_dynlibs/somelib.so 
```

但是当这个库中的类的第一个方法被调用时，就会发生错误：

异常 Ljava/lang/ **UnsatisfiedLinkError** ; 初始化 Lcom/abc/def/someclass/ 时抛出未处理的异常：

此类错误的常见原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:08:53.527

哦，天哪，一个简单的“清理”和“重建”就做到了……

发现于

[http://mono-for-android.1047100.n5.nabble.com/java-lang-UnsatisfiedLinkError-Library-monodroid-not-found-td4620040.html](http://mono-for-android.1047100.n5.nabble.com/java-lang-UnsatisfiedLinkError-Library-monodroid-not-found-td4620040.html)

# logging - java.lang.NoSuchMethodError 的 Logback + Janino + Resin 问题

> ID：15643970
> 
> 赞同：0
> 
> 时间：2013-03-26T17:46:04.243
> 
> 标签：logging, slf4j, logback, resin, janino

嗨，我正在使用以下版本的 logback 和 Janino：

```
 <dependency org="ch.qos.logback" name="logback-core" rev="1.0.11" conf="runtime"/>
  <dependency org="ch.qos.logback" name="logback-classic" rev="1.0.11" conf="runtime"/>
  <dependency org="org.codehaus.janino" name="janino" rev="2.6.1" conf="runtime"/> 
```

`<if>`并且使用条件的日志记录配置是：

```
<root level="INFO">
    <if condition='property("xxx").contains("dev")'>
      <then>
        <appender-ref ref="dev" />
      </then>
    </if>
</root> 
```

我看到的错误如下：

7:38:54,729 |-ch.qos.logback.classic.joran.action.RootLoggerAction 中的信息 - 将 ROOT 记录器的级别设置为 INFO 无法实例化 [ch.qos.logback.classic.LoggerContext] 报告异常：java.lang .NoSuchMethodError: org.codehaus.janino.ClassBodyEvaluator.setImplementedInterfaces([Ljava/lang/Class;)V 在 ch.qos.logback.core.joran.conditional.PropertyEvalScriptBuilder.build(PropertyEvalScriptBuilder.java:48) 在 ch.qos。 logback.core.joran.conditional.IfAction.begin(IfAction.java:67) 在 ch.qos.logback.core.joran.spi.Interpreter.callBeginAction(Interpreter.java:276) 在 ch.qos.logback.core。 joran.spi.Interpreter.startElement(Interpreter.java:148) 在 ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:130) 在 ch.qos.logback.core.joran.spi。 ch.qos.logback.core 中的 EventPlayer.play(EventPlayer.java:50)。joran.GenericConfigurator.doConfigure(GenericConfigurator.java:157) 在 ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:143) 在 ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator. java:106) 在 ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:56) 在 ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:75) 在 ch.qos .logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:148) 在 org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:85) 在 org.slf4j.impl.StaticLoggerBinder.(StaticLoggerBinder.java:55)在 org.slf4j.LoggerFactory.bind(LoggerFactory.java:128) 在 org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:107) 在 org.slf4j.LoggerFactory。getILoggerFactory(LoggerFactory.java:295) at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:269) at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:281)

任何想法为什么它会抛出这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-25T18:04:10.090

还应该注意，他们将组 ID 从*janino 更改*为*org.codehasu.janino* ，因此您需要更新的不仅仅是版本。

```
```
<dependency>
    <groupId>org.codehaus.janino</groupId>
    <artifactId>janino</artifactId>
    <version>2.7.8</version>
</dependency>
``` 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T18:16:30.773

该`setImplementedInterfaces(Class[])`方法是`ClassBodyEvaluator`janino 2.6.1 中类的一部分。检查你的类路径，看看是否有不同版本的 Janino 潜伏在某个地方。您的类路径很可能包含不同版本的 Janino。

# java - Nuance / NDEV 文字转语音 [导入声音文件]

> ID：15643972
> 
> 赞同：2
> 
> 时间：2013-03-26T17:46:10.853
> 
> 标签：java, android, text-to-speech, audio

我正在尝试开发一个应用程序，一旦语音“发声器”的细微差别文本完成，就会在 android 手机上生成音频 .wav 文件。谁能让我知道如何做到这一点。这是我的代码示例：

```
static Vocalizer voc;
voc = _speechKit.createVocalizerWithLanguage("en_US", vocalizerListener, new Handler());
String value = "This is a sample Text";
voc.speakString(value, getApplication().getApplicationContext());
//here I want to import the audio file from the "void speakString()" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:35:39.290

在 NMDP SpeechKit 中，他们无法控制音频捕获和播放。但是，他们的 PS 团队提供了一个选项，可以为您提供一个界面，让您能够这样做。

如果你愿意，你可以联系他们询问接口

此外，如果您使用的是股票 android TTS，则有一个名为 SynthesizeToFile() 的方法应该可以满足您的要求

# sql - 使用 COUNT() 和 GROUP BY 进行查询

> ID：15643974
> 
> 赞同：3
> 
> 时间：2013-03-26T17:46:26.077
> 
> 标签：sql

**数据**

```
ID-USER-ROLE-PERM
1   1   1   1
2   1   1   2
3   1   1   3
4   1   1   4
5   1   1   5
6   1   1   6
12  1   1   7
13  1   1   8
9   1   3   1
10  1   3   5
11  1   4   1
14  13  1   8 
```

**查询描述：**有多少用户取值 1 为`ROLE`？

**结果应该是：** 2

因为只有用户号 1 和 13 将值 1 作为`ROLE`

这是我返回 9 的错误查询：

```
SELECT COUNT(*) FROM assigned_roles WHERE ROLE = 1 GROUP BY ROLE 
```

知道如何返回 2 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:47:59.303

To count the number of different users use `COUNT(DISTINCT USER)`.

Also you don't need `GROUP BY ROLE` as your `WHERE` clause ensures that there can only be a maximum of one group.

```
SELECT COUNT(DISTINCT USER) 
FROM assigned_roles 
WHERE ROLE = 1 
```

[SQL Fiddle](http://sqlfiddle.com/#!1/f977c/2)

# css - 使用带有 android 480x800 的媒体查询

> ID：15643976
> 
> 赞同：0
> 
> 时间：2013-03-26T17:46:29.640
> 
> 标签：css

我在我的网站上使用媒体查询来提供以下替代内容：

• iPad 2、3 和 4

• Iphone 3、4 和 5

• 安卓

我的CSS代码如下：

```
@media screen and (min-width: 480px) and (max-width: 900px) {
/* Content for ipad */
}

@media only screen and (max-width: 480px){
/* Content for iphone */
} 
```

使用上面的 css 媒体查询在 ipad 和 iphone 的所有风格中都可以完美运行。但是，我对使用 400x800 高分辨率屏幕的 Android 设备感到困惑。我为 Android 400x800 获得的结果是，在纵向模式下查看时我得到了完美的结果，但是在横向模式下查看时我得到了 ipad 内容..因此，400x800 Android 设备在横向模式下捕获了 ipad 媒体查询.. ..所以我的问题如下：

1.  如何成功定位 Android 400x800（同时仍在使用 ipad 媒体查询）？
2.  另外，我如何定位标准定义的 Android 设备（我的 iphone 媒体查询是否足以满足此要求）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:02:37.153

您的元视口是否适合 dpi？

```
<meta name="viewport" content="width=device-width, target-densityDpi=device-dpi"> 
```

# python - 无法在 Google App Engine 中显示页面

> ID：15643988
> 
> 赞同：0
> 
> 时间：2013-03-26T17:47:05.837
> 
> 标签：python, html, google-app-engine, deployment

以下是我的 app.yaml 和 main.py 文件，我正在尝试使用谷歌应用引擎运行一个小项目，但我失败了

```
application: app
version: 1
runtime: python
api_version: 1

handlers:
- url: /(.*\.(gif|png|jpg|ico|js|css))
  static_files: \1
  upload: (.*\.(gif|png|jpg|ico|js|css))

- url: /robots.txt
  static_files: robots.txt
  upload: robots.txt 

- url: .*
  script: main.py 
```

和

```
import os
from google.appengine.ext import webapp
from google.appengine.ext.webapp import util
from google.appengine.ext.webapp import template

class MainHandler(webapp.RequestHandler):
  def get (self, q):
    if q is None:
      q = 'index.html'

    path = os.path.join (os.path.dirname (__file__), q)
    self.response.headers ['Content-Type'] = 'text/html'
    self.response.out.write (template.render (path, {}))

def main ():
  application = webapp.WSGIApplication ([('/(.*html)?', MainHandler)], debug=True)
  util.run_wsgi_app (application)

if __name__ == '__main__':
  main () 
```

Index.html 未显示，并且我在日志中出现以下异常：

```
ERROR    2013-03-27 11:14:42,078 webapp2.py:1528] index.html
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "C:\Documents and Settings\Administrator\Desktop\MSLS\app\main.py", line 16, in get
    self.response.out.write (template.render (path, {}))
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\template.py", line 89, in render
    t = _load_internal_django(template_path, debug)
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\template.py", line 163, in _load_internal_django
    template = django.template.loader.get_template(file_name)
  File "C:\Program Files\Google\google_appengine\google\appengine\_internal\django\template\loader.py", line 157, in get_template
    template, origin = find_template(template_name)
  File "C:\Program Files\Google\google_appengine\google\appengine\_internal\django\template\loader.py", line 138, in find_template
    raise TemplateDoesNotExist(name)
TemplateDoesNotExist: index.html
ERROR    2013-03-27 11:14:42,483 cgi.py:121] Traceback (most recent call last):
  File "C:\Documents and Settings\Administrator\Desktop\MSLS\app\main.py", line 23, in <module>
    main ()
  File "C:\Documents and Settings\Administrator\Desktop\MSLS\app\main.py", line 20, in main
    util.run_wsgi_app (application)
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\util.py", line 98, in run_wsgi_app
    run_bare_wsgi_app(add_wsgi_middleware(application))
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\util.py", line 116, in run_bare_wsgi_app
    result = application(env, _start_response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1519, in __call__
    response = self._internal_error(e)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2-2.3\webapp2.py", line 1253, in default_dispatcher 
```

为什么我会收到上述异常，我该如何解决？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:00:19.087

`TemplateDoesNotExist: index.html`

你有一个名为 的文件`index.html`吗？你所看到的正是如果你不这样做会发生什么。

# git - Merge part of a pull request

> ID：15643992
> 
> 赞同：9
> 
> 时间：2013-03-26T17:47:28.527
> 
> 标签：git, github, pull-request

New Git and Github user. Is it possible to accept/merge only part of a Pull Request?

For example if there is a Pull Request on Github that has 4 commits but you only want to use 2 of them, is there a way to simply merge the 2 and disregard the other 2?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T17:51:01.040

不，拉取请求是全部或全部。

您可以通过创建一个仅包含您需要的提交并将其合并的分支来重新创建拉取请求。

您可以通过

```
git cherry-pick 
```

或者

```
git rebase -i 
```

# perfmon - duplicate counter entres in perfmon log

> ID：15643998
> 
> 赞同：0
> 
> 时间：2013-03-26T17:47:49.343
> 
> 标签：perfmon

I've been recording several counters in perfmon and one of them occasionally duplicates itself in the output log file, e.g.:

"COUNTER1","counter2","counter3","COUNTER1","counter4","counter5","counter6","COUNTER1","counter7"

The counter in question (COUNTER1 above) is "\MyMachine\Processor(_Total)\% User Time"

I can't work out why that counter should sometimes appear three times. The counters in the perfmon task are fine i.e. the counter in question is only listed once. There's just something in the execution that's sometimes making it record an additional few times...

Has anybody else come across this? Is this intentional depending on factors within the OS environment?

# installation - Executing .sh file in Eclipse using java

> ID：15643999
> 
> 赞同：0
> 
> 时间：2013-03-26T17:47:55.303
> 
> 标签：installation, sh, silent

public class TestNetbeans {

```
public static void main(String[] args) {
    try {
        ProcessBuilder processBuilder = new ProcessBuilder(
                "./netbeans-7.0.1-ml-linux.sh", " --silent");
        // ProcessBuilder("./netbeans-7.0.1-ml-linux.sh"," --silent"," -J-Dnb-base.jdk.location=/home/nayum/Documents/jdk1.6.0_23/jre");
        Process process = processBuilder.start();

        process.waitFor();

    } catch (Exception e) {
        System.out.println(e);
        e.printStackTrace();
    }
} 
```

}

This code when executed on command prompt it works fine for the silent installation of netbeans but when executed in eclipse its execution is terminated. What is the problem and solution ???