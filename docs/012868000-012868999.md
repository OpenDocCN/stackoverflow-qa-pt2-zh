# StackOverflow 问答 12868000-12868999

# c - 具有二维数组的指针

> ID：12868003
> 
> 赞同：4
> 
> 时间：2012-10-12T22:32:55.950
> 
> 标签：c, arrays, pointers, multidimensional-array

请考虑以下代码

```
#include <stdio.h>
#define ROW_SIZE 2
#define COL_SIZE 2

int main()
{
   int a[ROW_SIZE][COL_SIZE]={{1,2},{3,4}};

   // Base address:Pointer to the first element a 1D array
   printf("Base address of array:%p\n",a);

   //The value at the base address: should be the address of 1st 1D array
   printf("Value at the Base address:%p\n",*a);

   return 0;
} 
```

获得的输出：

```
Sample Output:
Base address of array:0xbff77434
Value at the Base address:0xbff77434 
```

**不知何故，我无法理解二维数组的基地址的概念和基地址的值，而基地址又是一维数组的地址。**请解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T22:41:51.927

数组不是指针，在 C 中，多维数组只是数组的数组。在许多情况下，使用数组名称“衰减”为指向该数组第一个元素的指针。这就是您的两个打印语句中发生的情况。在第一种情况下：

```
printf("Base address of array:%p\n",a); 
```

`a`成为指向数组第一个元素的指针 - 即指向数组第一行的指针。在你的情况下，这意味着你得到一个 type 的指针`int (*)[2]`。

在第二种情况下：

```
printf("Value at the Base address:%p\n",*a); 
```

会发生同样的衰减，但随后您取消引用该指针。这意味着您取消引用`int (*)[2]`指向第一行的指针，再次为您留下一个数组（第一行）。该数组*本身*衰减为指向*其*第一个元素的指针，为您提供结果`int *`指针（指向第一行的第一个元素）。

在这两种情况下，地址都是相同的，因为这就是数组在内存中的布局方式。如果我们说您的二维数组从 address 开始`0`，它看起来像这样（假设是 4 字节`int`类型）：

```
 Address       Value
    0            1
    4            2
    8            3
   12            4 
```

第一行的地址和第一行的第一个元素的地址都是`0`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T01:46:41.900

重新构建问题中的图表并整合先前答案中的信息，我正在创建以下答案。

![数组和指针](../Images/86b8d6a6a5b667b78a00165c39bf3a75.png)

### 一维数组

*   考虑一个由 4 个整数组成的数组 a`a[4]`
*   基本规则是两者`a`并且`&a`将指向相同的位置。但它们**没有**指向相同的类型。
*   `&a`将指向整个数组，它是一个`int[]`. 指针类型是`int(*)[]`
*   `a`，当它衰减为指针时，将指向数组的第一个元素，即`int`. 指针类型是`int *`

### 二维数组

*   考虑一个包含两个一维数组的数组，每个数组都有两个元素；`a[2][2]`.
*   由于维度数量增加，我们多了一层层次结构，即`&a`，`a`并且`*a`将指向相同的位置，但它们指向的**不是相同的类型。**
*   `&a`将指向整个数组，即`int[][]`. 指针类型为`int(*)[][]`.
*   `a`，当它衰减为指针时，将指向 2D 数组的第一个元素，即`int[]`. 指针类型是`int(*)[]`
*   通过使用`*a`，我们取消了指向一维数组的指针。因此，我们将`int *`指向二维数组的第一个整数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:54:54.130

我认为你的输出格式会让你失望。你是对的，第一个数组元素的地址（0xbff77434）与*值*（1）不同。%p 试图将两者都强制为“指针”格式而感到困惑。

是的，卡尔也是正确的。

如果您想查看*第*一个元素的内容，您可以说以下任何一种：

```
printf("%i", a[0][0]);

int* p = &a[0][0];    // point 'p' to the beginning of 'a'
// (or)
int* p = a;           // saying "&a[0][0]" is the same as saying "a"
printf("%i", *p);     // here, the dereference is what you want 
```

至于 1D 与 2D 数组，这只是一个解释问题。两个都

```
int x[4]; 
```

和

```
int x[2][2]; 
```

创建 4 个“int-sized”元素的连续块。在这两种情况下，表达式'x' 指的是第0 个条目的地址（例如，数组的地址）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T23:20:17.607

二维数组`a[2][2]`可以看作是一个有 4 个元素的一维数组。想想当你`a`转换为`int*`指针时会发生什么：

```
int a[2][2] = {{ 1, 2 }, { 3, 4 }};
int* p = (int*) a; // == { 1, 2, 3, 4 }

assert(a[1][0] == p[2] == 3); // true

int* a0 = a[0];  // the first row in the bidimensional array
int* p0 = &p[0]; // the first element in the monodimensional array

assert(*a0 == *p0 == 1); // true

// Or the long version:
assert(a[0][0] == *a0 == a0[0] == p[0] == *p0 == p0[0] == 1); // true

// And for the second array in a:
int* a1 = a[1]; // the second row in the bidimensional array
int p2 = &p[2]; // the third element in the monodimensional array

assert(a[1][0] == *a1 == a1[0] == p[2] == *p2 == p2[0] == 3); // true 
```

数组`a`和`a[0]`基本上指向相同的地址，但它们的类型传达了有关如何操作它们的信息。

# regex - 如何完全匹配正则表达式，在开始或结束时没有任何内容？

> ID：12868005
> 
> 赞同：1
> 
> 时间：2012-10-12T22:32:56.883
> 
> 标签：regex

我现在一直在寻找 RegEx 帮助，但我认为我需要一个专业人士来帮助我。我认为这可以通过 RegEx 实现，但无法弄清楚如何。

这是我正在寻找的比赛。如果它不完全符合这个我想知道：

```
\w{2,4}\s\d{4} 
```

我基本上想匹配常见的学校课程名称。要求如下：

1.  第一部分是2-4个字母
2.  第二部分正好是 4 个数字
3.  两者之间必须有空格

如果对此有任何其他变化，我想阻止我的下一段代码运行。我可以轻松地修剪左右端的空格，但我想确保那里没有其他东西。

我的问题是我当前的表达式允许有人输入 COMD 1500-B。我仍然得到匹配，我明白为什么，但我想确保如果有人输入超过 4 个数字，我可以停止并抛出错误。以及超过4个字母。我认为`{}`应该是最大的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:34:38.050

`^`表示字符串的开头，并`$`表示字符串的结尾。因此，`^\w{2,4}\s\d{4}$`确保整个字符串与模式匹配，而不仅仅是字符串匹配的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:47:57.960

你应该使用正则表达式模式

```
^[a-zA-Z]{2,4}\s+\d{4}$ 
```

如果只允许大写字母，则使用正则表达式模式

```
^[A-Z]{2,4}\s+\d{4}$ 
```

如果只允许一个空格字符，则替换`\s+`为`\s`. 如果这样的空间只是空格键字符（是的，我们有更多的空格字符），那么`\s`用空格键字符替换`。`

 ````
^[A-Z]{2,4} \d{4}$ 
````

# ios - 在通讯录中一段时间 后获取更新/创建的联系人

> ID：12868012
> 
> 赞同：0
> 
> 时间：2012-10-12T22:33:18.750
> 
> 标签：ios, abaddressbook

我正在构建一个应用程序，将电话联系人的电子邮件导入应用程序。而是每次都导入整个电话通讯录，我只想在上次更新时间后导入更新/创建的一个。有没有办法做到这一点？

我试图环顾四周，但没有找到任何相关信息。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:16:35.927

添加我的评论作为答案：
可能，您需要记住联系人的唯一 ID，比较邮件值并采用更改..

解释：
由于联系人 API 不知道，你如何处理数据，没有其他办法。基本上这就是更新的工作方式，对吧。有人需要知道，已经存在什么。在这种情况下，这只是您自己的代码。

# python - 类与参数化实例

> ID：12868016
> 
> 赞同：3
> 
> 时间：2012-10-12T22:34:09.983
> 
> 标签：python, oop, class, design-patterns, architecture

假设我有一个类层次结构。通过为实例提供额外的参数，我理论上可以通过单个类来维护其功能。这是一个例子（超级做作，但我想保持简单）：

```
class Base:
  def __init__(self, a):
    self.a = a
  def f(self, x):
    raise NotImplemented # needs to be defined in subclass

class Mult(Base)
  def f(self, x):
    return self.a * x

class Add(Base):
  def f(self, x):
    return self.a + x

m = Mult(5)
a = Add(7)
m.f(10)
a.f(20) 
```

上面的代码可以重构为：

```
class Compute:
  def __init__(self, a, func):
    self.a = a
    self.func = func
  def f(self, x)
    return self.func(self.a, x)

m = Compute(5, operator.mult)
a = Compute(7, operator.add) 
```

我知道对于这个愚蠢的例子，它没有任何区别。所以除了理解我的观点，请不要考虑它。

我想知道在为现实生活中遇到的各种情况做出选择时应该考虑哪些因素？换句话说，使用类与参数化实例的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:03:30.637

在第一个示例中，您为客户端代码提供了执行一组固定操作的固定方式。乘法很容易，但如果你想除法，那就倒霉了。

在第二个示例中，您将实现细节推送到客户端。您现在拥有一个完整*的与操作无关的计算框架*。这需要对客户端代码有更多的了解。

所以，真正不同的是抽象的层次——你希望你的客户有多知识。如果它对所`operator.mult`使用的客户端很重要，而不是其他一些逻辑（例如，XML-RPC 到乘法服务器），那么第二个选项似乎是合适的。如果客户比您更了解如何处理这两个数字，并且您只想提供一个框架（某种包装器），那么第二种选择更好。如果你只是想让人们添加和增加东西，第一个选择更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:59:03.220

这实际上取决于课程的作用。在您的示例中，类中的逻辑是如此之小，很明显您刚刚为方法提供了包装器作为类。拥有计算类更有意义。

在现实生活中，你应该问问自己你想要组合在一起的不同功能的[凝聚力如何。](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)虽然单一责任很重要，但你不需要接受那个荒谬的广告

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:00:45.400

我想这取决于您是否拥有有关转换（？）的所有信息，您将在构建时对可用的对象进行操作。如果你不这样做，你将很难调用更复杂的构造函数。

此外，在将其提交到某个路径之前，保留对“基本”对象执行操作的选项通常是有帮助的，即使在最初设计类时并不明显。

一般来说，我发现创建具有*最少所需参数*的构造函数并通过方法实现任何其他功能是最佳解决方案。

本着随机示例的精神，考虑：

**参数化构造函数**

```
class Image:
    # Some implementation

class Text:
    def __init__(self, image, whitelistChars):
        # This uses OCR to extract the text from an image then filters out 
        #   non-whitelisted characters
        #
        # image is an Image
        # whitelistChars is an interable containing characters that should 
        #   not be filtered out

im = Image('scan.tif')
t = Text(im, 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ134567890'); 
```

**基本构造函数**

```
class Text:
    def __init__(self, image):
        # This uses OCR to extract the text from an image
        #
        # image is an Image

    def filter(self, whitelistChars):
        # This filters out non-whitelisted characters
        #
        # whitelistChars is an interable containing characters that should 
        #   not be filtered out

im = Image('scan.tif')
t = Text(im)
# <-- Are you interested in doing anything to the Text object t here?
t.filter('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ134567890') 
```

在“基本构造函数”实现中，您可以选择在剥离非白名单字符之前使用该`Text`对象。`t`也许这有用？也许更重要的是，*也许这在未来会有用？*

如果您可以自信地说“不”，它没有用而且永远不会有用，那么我认为“参数化构造函数”很好。如果有的话，它消除了额外`filter`调用的需要。

但是，如果您希望重用代码，在转换它之前（在这种情况下过滤文本），保持打开选项来操作`t`，甚至只是检查它通常会很有帮助。

（我的 0.02 美元）

# c# - EF 5 忽略 Int 类型的 [必需] 属性

> ID：12868017
> 
> 赞同：8
> 
> 时间：2012-10-12T22:34:20.410
> 
> 标签：c#, entity-framework, attributes, entity

当包含在 int 字段中时，Entity Framework 5.0.0 似乎忽略了 [Required] 属性，并自动包含 0 值而不是引发异常。但是，如果该字段是字符串，则 required 属性似乎确实有效。下面的简单模型和创建函数不会引发异常。为简洁起见，未显示具有 DbSet 度数的 DbContext 类。

```
public class Degree
{
    public int Id { get; set; }
    public string Name { get; set; }
    [Required]
    public int Field { get; set; }
}

private static void CreateDegree()
{
    var degree = new Degree { Name = "Mechanical Engineering" };
    var db = new Context();
    db.Degrees.Add(degree);

    // try statement
} 
```

这可能是我的一个简单的误解，但任何想法/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T22:39:18.780

该`[Required]`属性指示必须存在一个值。`Degree`构造a 时，`Field`初始化为 0，因为这是`int`s 的默认值。因为 0 是一个值，所以它满足`[Required]`属性。

您可能想尝试一个`[Range]`属性来指定该值必须大于 0。或者您可以将模型更改为具有`int?`，这样`null`除非它被初始化为某个值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T22:40:09.223

您的字段是`int`始终具有值的类型。当您创建`Degree`该类的新实例时，该`Field`属性将被初始化为 0。

如果您希望该列可以为空，请设置属性的类型`int?`。对于可为空的类型，如果值为 EF，则 EF 将引发错误`null`。

```
public class Degree
{
    public int Id { get; set; }
    public string Name { get; set; }
    [Required]
    public int? Field { get; set; }
} 
```

# css - 在导航中对齐图标字体背景，CSS

> ID：12868018
> 
> 赞同：1
> 
> 时间：2012-10-12T22:34:25.257
> 
> 标签：css

我正在为我的主导航中的列表项之一使用图标字体。

我把这个图标放到它自己的类中，并给它一个字体大小，使它与导航的其余部分相匹配。我还必须为图标字体分配一个特定的行高，以便它对齐。

现在的问题是，当我将鼠标悬停在图标上时（我使用的是背景颜色），当您将鼠标悬停在它上面时，下面会出现一个间隙。如果我不使用背景颜色，这不是问题，但我真的很想保留它。

为了说明我的意思，您可以在此处查看图片... [https://dl.dropbox.com/u/94593656/test.jpg](https://dl.dropbox.com/u/94593656/test.jpg)

关于我如何纠正这个问题的任何想法，以便当你悬停时，下面没有间隙？

我在这里上传了 HTML 和 CSS... [http://codepen.io/anon/pen/xeCLj](http://codepen.io/anon/pen/xeCLj)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:41:45.443

这样做的一种方法是一种 hack：您将属性设置`min-height`为类似`20px`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:57:42.633

像这样更改 iconfont 类：

```
.iconfont {
  font-family: 'EntypoRegular';
  font-size: 25px;
  line-height: 20px;
  vertical-align: middle;
} 
```

使用 padding 和 line-height，这个链接变成 40px 高，就像导航栏一样。高度不适用于内联元素链接锚点，因此我使用 line-height 代替。

# ajax - 在运行时针对 TypeScript 中的接口验证“任何”对象

> ID：12868027
> 
> 赞同：12
> 
> 时间：2012-10-12T22:35:10.727
> 
> 标签：ajax, validation, datacontract, typescript

我正在使用打字稿处理应用程序的 UI。与此同时，其他人也在努力为我提供数据。我们就数据合同达成了一致，但是这个过程很容易出错，而且我不断从服务器获取无效的数据对象。所以我的问题是我可以使用打字稿中定义的一些接口以某种方式验证动态对象（在运行时）吗？

* * *

[这个问题是在 2012 年提出的，因此它不能与Check if an object 在运行时使用2015 年提出的[TypeScript 实现接口重复。](https://stackoverflow.com/questions/33800497/check-if-an-object-implements-an-interface-at-runtime-with-typescript)]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T22:43:32.840

就目前而言，TypeScript 接口是*纯粹*的编译时实体，因此无法进行任何类型的运行时验证，更不用说知道在编译时存在哪些接口。因此，答案似乎是以下之一：

1.  编写一些工具将 TypeScript 接口转换为可用于验证对象的运行时对象表示，或者：
2.  将您的 TypeScript 接口复制为一些运行时对象表示

您可以使用 JSON 模式作为运行时表示，因为 Github 上存在许多验证器。TypeScript 接口 --> JSON Schema 转换器是我希望有人在某个时候制作的东西，但据我所知，目前还不存在。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T08:59:21.900

正如 Brian 指出的那样，接口仅在编译时表现出来，并被编译器用作所谓的*命名类型*。语言规范的第 7 节对此进行了如下描述：

> 接口没有运行时表示——它们纯粹是编译时构造。接口对于记录和验证所需的属性形状、作为参数传递的对象以及从函数返回的对象特别有用。

[在规范的第 7.4 节中，对](https://github.com/Microsoft/TypeScript/blob/v3.1.6/doc/spec.md#7.4)Typescript中的动态类型检查有一个很好的描述：

> TypeScript 不提供动态测试对象是否实现特定接口的直接机制。相反，TypeScript 代码可以使用 JavaScript 技术来检查对象上是否存在一组适当的成员......

规范中的示例定义了三个接口：

```
interface Mover {
    move(): void;
    getStatus(): {speed: number;};
}

interface Shaker {
    shake(): void;
    getStatus(): {frequency: number;};
}

interface MoverShaker extends Mover, Shaker {
    getStatus(): { speed: number; frequency: number; }; 
} 
```

`MoverShaker`组合`Mover`成`Shaker`一个新的复合界面。要**在运行时**验证给定类型是否满足 interface `MoverShaker`，您可以使用 Javascript 代码，如下所示：

```
var obj: any = getSomeObject();
if (obj && obj.move && obj.shake && obj.getStatus) {
    var moverShaker = <MoverShaker> obj;
    ...
} 
```

为了在 Typescript 中进行编译时检查，您需要为在应用程序的两个部分之间交换的类型定义接口。目前，您必须手动编写动态检查代码（如上）。因此，如果您忘记同步更新它们，静态类型和动态检查代码可能会在某些时候出现偏差。正如 Brian 指出的那样，拥有一个自动生成代码的工具会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T01:07:02.003

如果您愿意，请尝试我的动态界面检查器，这是一个示例（[完整示例](https://github.com/ysangkok/typescript-interface-to-jsonschema/blob/master/example.ts)）：

```
interface PhysicalObject { color : Color; intact : bool; weight : number; }

class Car implements PhysicalObject {
    public intact = true;
    constructor(public color : Color, public weight : number) {};
}

function scratch(aCar : Car) {
    typeCheck(JSVenv, arguments, schemas, ["PhysicalObject"]);
    console.log("Scratching the car!");
    aCar.intact = false;
} 
```

当调用等效于`scratch({ intact: 42, color: Color.RED })`的代码时，会抛出这样的错误：

```
AssertionError: Runtime typecheck failed on argument number 1:
    Value: { color: 0, weight: 'four', intact: true },
    Schema: ...,
    Error reports (length 1):
    [
      {
        uri: 'urn:uuid:b9b8e6fd-b14b-490d-9372-d2bd22e8a246#/weight',
        schemaUri: 'urn:uuid:c76ddd92-15da-43a6-831e-6717f253efe5#/properties/weight',
        attribute: 'type',
        message: 'Instance is not a required type',
        details: [ 'number' ]
      }
    ] 
```

有关说明，请参见主页：[https ://github.com/ysangkok/typescript-interface-to-jsonschema](https://github.com/ysangkok/typescript-interface-to-jsonschema)

我会添加自动类型检查，但我需要类似[node-falafel](https://github.com/substack/node-falafel)的 TypeScript。

# algorithm - 首次拟合算法

> ID：12868031
> 
> 赞同：0
> 
> 时间：2012-10-12T22:36:12.883
> 
> 标签：algorithm, operating-system, system

假设我有一个带有可用空间的变量分区：地址 32k 的可用空间为 8k，地址 15k 的可用空间大小为 11k。

我需要创建一个第一个适合的免费表。

我在做正确的事吗？

```
+--------+-------+
|address | size  | 
|32      |8      |
|15      |11     |
+--------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:40:38.497

基本上，是的，这是正确的。

虽然，除非您希望分配函数仅适用于 1K 的倍数，否则您可能希望存储字节地址和计数，例如，32K 是 32,768。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:41:02.913

是的。它看起来是正确的。当您有更多可用空间时，您可以使用获胜者树找到第一个合适的空间。

# variables - 如何在 sinatra 中的处理程序（路由）之间传递变量（没有闪存、会话、@@class_variable 或 $global_variable）？

> ID：12868036
> 
> 赞同：1
> 
> 时间：2012-10-12T22:36:52.573
> 
> 标签：variables, sinatra, action

假设你有：

```
 get '/' do
  haml :index
end

get '/form' do
  haml :form
end 

post '/form' do
  @message = params[:message]
  redirect to ('/') --- how to pass @message here?
end 
```

我希望@message 实例变量也可以在“/”操作中使用（传递给），所以我可以在 haml 视图中显示它。在不使用 session、flash、@@class_variable 或 db persistence 的情况下如何做到这一点？

我只想像在方法之间传递值一样传递值。

我不想使用会话 cookie，因为用户可以关闭它们，我不喜欢它是一个暴露给所有代码的类变量，而且我不需要数据库的开销。

谢谢

编辑：

这是另一个问题，解释了在 Rails 中处理此问题的一种非常简单的方法

[在 rails redirect_to 中传递参数](https://stackoverflow.com/questions/1430247/passing-parameters-in-rails-redirect-to)

以下是我从论坛中收集的有关该主题的更多信息，这些信息适用于 Rails，但根据我的经验，不适用于 Sinatra（但请检查一下，因为我可能做错了什么）：

> 如果您在 action1 的末尾重定向到 action2，只需将值附加到重定向的末尾：

```
my_var = <some logic>
redirect_to :action => 'action2', :my_var => my_var 
```

在同一线程上，另一个用户提出以下建议：

```
def action1
  redirect_to :action => 'action2', :value => params[:current_varaible]
end
def action2
 puts params[:value].inspect
end 
```

来源：[http ://www.ruby-forum.com/topic/134953](http://www.ruby-forum.com/topic/134953)

像这样的东西可以在 Sinatra 中工作吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:47:29.570

尝试

```
before do
  @message = params[:message]
end 
```

并且`@message`应该在任何路线上都可用

编辑

```
post '/form' do
  @message = params[:message]
  #redirect to ('/') --- how to pass @message here?
  haml :index, locals: {msg: @message}
end 
```

不要使用`redirect`那么你可能会传递`locals`哈希。在您的 index.haml `msg`变量中应该可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T21:09:55.920

我能想到的唯一方法就是把东西塞进去`̀Thread.current[:variableName]`。我没有声称这是最好或安全的解决方案。特别是，一旦您完成该哈希条目，就应该删除它/将其设置为 nil。

# java - Strassen 算法归零

> ID：12868040
> 
> 赞同：0
> 
> 时间：2012-10-12T22:36:58.597
> 
> 标签：java, algorithm, matrix

这个想法是创建一个计时器，该计时器将返回执行某个功能所需的时间。我坐下来编写了一个矩阵类和一个*应该*相乘的`Strass`函数，我将其输入其中。

 *计时器函数正常工作，因为它返回执行该`Strass`函数所需的时间。但是，该`Strass`函数不返回已相乘的矩阵。它是一个全零矩阵。就好像该`Strass`函数没有为 Matrix C 分配任何东西。

例如，乘以 2x2 矩阵会得到以下结果：

```
 0.00 // P1

 0.00     0.00  // the matrix after multiplication 
 0.00     0.00

 7102000 // the time it took to do this 
```

该`Strass`函数如下所示：

```
public static void Strass(Matrix A, Matrix B, Matrix C) {
    // It has been suggested that P1-P7 should be of size
    // A.size()/2\. Changing this does not fix the problem.
    Matrix P1 = new Matrix(A.size());
    Matrix P2 = new Matrix(A.size());
    Matrix P3 = new Matrix(A.size());
    Matrix P4 = new Matrix(A.size());
    Matrix P5 = new Matrix(A.size());
    Matrix P6 = new Matrix(A.size());
    Matrix P7 = new Matrix(A.size());

    // if n = 1 then
    if (A.size() == 1) {
        C = A.times(B);
    } else {
        if (A.size() != B.size()) throw new RuntimeException("Somehow, the sizes of the matrices aren't equal.");
        int sizeOf = A.size();
        // The ungodly recursive calls.
        Strass(A.partition(1, sizeOf/2, 1, sizeOf/2).plus(A.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf)), B.partition(1, sizeOf/2, 1, sizeOf/2).plus(B.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf)), P1);
        Strass(A.partition(sizeOf/2+1, sizeOf, 1, sizeOf/2).plus(A.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf)), B.partition(1, sizeOf/2, 1, sizeOf/2), P2);
        Strass(A.partition(1, sizeOf/2, 1, sizeOf/2), B.partition(1, sizeOf/2, sizeOf/2+1, sizeOf).minus(B.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf)), P3);
        Strass(A.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf), B.partition(sizeOf/2+1, sizeOf, 1, sizeOf/2).minus(B.partition(1, sizeOf/2, 1, sizeOf/2)), P4);
        Strass(A.partition(1, sizeOf/2, 1, sizeOf/2).plus(A.partition(1, sizeOf/2, sizeOf/2+1, sizeOf)), B.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf), P5);
        Strass(A.partition(sizeOf/2+1, sizeOf, 1, sizeOf/2).minus(A.partition(1, sizeOf/2, 1, sizeOf/2)), B.partition(1, sizeOf/2, 1, sizeOf/2).plus(B.partition(1, sizeOf/2, sizeOf/2+1, sizeOf)), P6);
        Strass(A.partition(1, sizeOf/2, sizeOf/2+1, 1).minus(A.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf)), B.partition(sizeOf/2+1, sizeOf, 1, sizeOf/2).plus(B.partition(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf)), P7);

        C.addPart(1, sizeOf/2, 1, sizeOf/2, (P1.plus(P4)).minus(P5.plus(P7)));
        C.addPart(sizeOf/2+1, sizeOf, 1, sizeOf/2, (P2.plus(P4)));
        C.addPart(1, sizeOf/2, sizeOf/2+1, sizeOf, (P3.plus(P5)));
        C.addPart(sizeOf/2+1, sizeOf, sizeOf/2+1, sizeOf, (P1.plus(P3)).minus(P2.plus(P3)));

    }

} 
```

我已经测试了这个`addPart`功能，据我所知它工作正常。加号和减号功能也是如此。我尽我最大的努力去验证我在所有正确的位置都有正确的尺寸和数字，我非常确定我做到了。所以，在这一切的某个地方，有些地方不对劲。

为了参考和简洁，我在[这里](http://pastebin.com/zSxA6jye)粘贴了所有相关代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:08:22.857

`C = A.times(B);`是不正确的。这将一个*新*矩阵分配给`C`，它不会修改传入的矩阵对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:51:12.490

您应该首先使用 1x1 矩阵乘法进行测试。然后是 2x2，然后是 4x4。这些都将很容易验证。我还想指出，您的代码不能处理不是 2 次方的矩阵尺寸，所以不要尝试使用 100x100 矩阵。同样奇怪的是 P1 到 P7 的大小与 A 相同。它们不应该是 A.Size()/2 吗？*

# javascript - 如何将多个图像叠加到谷歌地图上

> ID：12868044
> 
> 赞同：2
> 
> 时间：2012-10-12T22:37:18.190
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我正在寻找一种优雅的方式将多个图像叠加到我的谷歌地图上，必须有一种简单的方法来做到这一点而无需编写代码页面，但谷歌似乎没有提供如何附加多个自定义叠加层的好线索. 有没有办法在 initialize() 函数中创建多个覆盖变量？

```
<!DOCTYPE html>
<html>
    <head>
    <title>Dopler Scott</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;sensor=true"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
        var windowWidth = document.documentElement.clientWidth ;
        if(windowWidth<1000){zoomValue=6;}else{zoomValue=8;}
        var overlay;
        portlandOverlay.prototype = new google.maps.OverlayView();
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(45.710,-122.959),
                zoom:zoomValue,
                mapTypeId: google.maps.MapTypeId.TERRAIN
            };
            var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
            var swBound = new google.maps.LatLng(43.094, -125.895);
            var neBound = new google.maps.LatLng(48.275, -120.250);
            var bounds = new google.maps.LatLngBounds(swBound, neBound);
            var srcImage = 'http://s3.amazonaws.com/theoatmeal-img/quizzes/sriracha_addict/start_button.png';
            overlay = new portlandOverlay(bounds, srcImage, map);
        }
     function portlandOverlay(bounds, image, map) { // Now initialize all properties.
            this.bounds_ = bounds;
            this.image_ = image;
            this.map_ = map; // We define a property to hold the image's div. We'll actually create this div upon receipt of the onAdd() method so we'll leave it null for now.
            this.div_ = null;
            this.setMap(map); // Explicitly call setMap on this overlay
        }
        portlandOverlay.prototype.onAdd = function() { // Create the DIV and set some basic attributes.
            // Note: an overlay's receipt of onAdd() indicates that the map's panes are now available for attaching the overlay to the map via the DOM.
            var div = document.createElement('div');
            div.style.borderStyle = 'none';
            div.style.borderWidth = '0px';
            div.style.position = 'absolute';
            div.className = 'portland';
            var img = document.createElement('img'); // Create an IMG element and attach it to the DIV.
            img.src = this.image_;
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.position = 'absolute';
            div.appendChild(img);
            // Set the overlay's div_ property to this DIV?
            this.div_ = div;
            // We add an overlay to a map via one of the map's panes. We'll add this overlay to the overlayLayer pane.
            var panes = this.getPanes();
            panes.overlayLayer.appendChild(div);
        }
        portlandOverlay.prototype.draw = function() { // Size and position the overlay. We use a southwest and northeast position of the overlay to peg it to the correct position and size.
            // We need to retrieve the projection from this overlay to do this.
            var overlayProjection = this.getProjection();
            // Retrieve the southwest and northeast coordinates of this overlay in latlngs and convert them to pixels coordinates.
            // We'll use these coordinates to resize the DIV.
            var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
            var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());
            // Resize the image's DIV to fit the indicated dimensions.
            var div = this.div_;
            div.style.left = sw.x + 'px';
            div.style.top = ne.y + 'px';
            div.style.width = (ne.x - sw.x) + 'px';
            div.style.height = (sw.y - ne.y) + 'px';
        }
        startDoingStuff = function(){}
    $(document).ready(startDoingStuff());
    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:57:33.380

你的问题不是“有没有办法创建多个覆盖变量”，你的问题是你创建了覆盖变量。（下一个覆盖变量将覆盖当前）

只需创建对象而不给它一个名称（您不会在脚本中的其他地方使用该名称，因此您根本不需要它）：

```
new portlandOverlay(bounds,  srcImage, map);
new portlandOverlay(bounds2,  srcImage2, map);
new portlandOverlay(bounds3,  srcImage3, map);
//....and so on 
```

# matlab - 如何在 Matlab 中进行多元函数的基本绘图？

> ID：12868046
> 
> 赞同：0
> 
> 时间：2012-10-12T22:37:28.820
> 
> 标签：matlab

我必须计算函数的极限

`(c^(2n) - 1)/(c^(2n) + 1) as n = 1,2,3`... 走向无穷大

函数的行为将取决于参数 c，我想说明的是通过为不同的 c 值绘制序列的前 100 个（左右）值 - 比如说三个图，一个 for `c = 1`，一个 for`-1 < c < 1`和一个 for `c > 1`，如果可能的话，都在一张“图片”中。

在 MATLAB 中解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T04:16:39.870

您需要使用内联函数，保留所有和图例。这是一个简单的例子

```
n=1:100;
f = @(c) (c.^(2.*n) - 1)./(c.^(2.*n) + 1); 
hold all;
plot(n,f(0.7),'.-');
plot(n,f(0.9),'.-');
plot(n,f(0.95),'.-');
plot(n,f(1),'.-');
plot(n,f(1.05),'.-');
plot(n,f(1.3),'.-');
plot(n,f(1.1),'.-');
legend('c=0.7','c=0.9','c=0.95','c=1.0','c=1.05','c=1.3','c=1.1'); 
```

这个的输出看起来像这样 ![在此处输入图像描述](../Images/7eb40ef2345b7fe0bc7b888adaedaeb5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T00:28:46.170

我会做类似的事情：

```
% Clean up, this isn't necessary if you're throwing this in a function
%   and not a script.
close all
clear all
clc

% Define your function
f = @(c,n)( (c^(2*n) - 1)/(c^(2*n) + 1) );

% An array containing the values of c you want to use
C = [0.5, 1, 1.5, 2];

% N will contain 500 points, equally spaced between 1 and 20.
%   (Modify these arguments as necessary)
N = linspace(1,20,500);

% Initialize an output matrix
Y = zeros(length(N), length(C));
for i = [1:length(C)]
    c = C(i);

    for j = [1:length(N)]
        n = N(j);

        % Compute value of function
        y = f(c,n);

        % Store it
        Y(j,i) = y;
    end%for
end%for

% Plot it
plot(N,Y);

% Generate Legend
lt = cell(1,length(C));
for i = [1:length(C)]
    lt{i} = sprintf('C = %s', num2str(C(i)));
end%for
legend(lt); 
```

您可以通过修改函数`f`以接受和返回向量来优化它，但这个显式版本可能会更好地显示正在发生的事情。

# mysql - 制作另一个 MySQL 的一个表列的行名

> ID：12868047
> 
> 赞同：1
> 
> 时间：2012-10-12T22:37:48.163
> 
> 标签：mysql, row

我不知道这是否可能。我有`Table1`以下字段。

```
No

A
B
C
D 
```

我希望`table2's`列名是 table1 的行名（varchar(20) 每个，都是空的）

```
A B C D 
```

如果我在 table1 中添加一行，table2 列也应该被附加。

有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:22:34.200

目前尚不清楚您要做什么。但是，如果您只希望这些行中的数据成为 a 中的行`SELECT`，那么您可以执行以下操作：

```
select 
  max(case when no = 'A' then col end) as A,
  max(case when no = 'B' then col end) as B,
  max(case when no = 'C' then col end) as C,
  max(case when no = 'D' then col end) as D
from table1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bfd45/1)

如果您想采用相反的方式并将列转换为行，那么您可以使用`UNION ALL`：

```
select col1 No
from table1
union all
select col2 No
from table1
union all
select col3 No
from table1
union all
select col4 No
from table1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/0c927/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:04:15.603

这里有一些关于 T-SQL (SQL Server) 中的伪解决方案的信息，其中一些可以转移到 MySQL：[http ://sqlserveradvisor.blogspot.co.uk/2009/03/sql-server-convert-rows -to-columns.html](http://sqlserveradvisor.blogspot.co.uk/2009/03/sql-server-convert-rows-to-columns.html) 但是没有简单的方法。

我能想到的最好的（再次在 T-SQL 中）是这个动态 SQL 解决方案：

```
 declare @tempTable table (ColumnName nvarchar(10))
    declare @sql nvarchar(max) 
    insert @tempTable
    select 'Col1'
    union select 'Col2'
    union select 'Col3'
    select @sql = isnull(@sql+ ',','') + '1 ' + quotename(ColumnName)
    from @tempTable
    set @sql = 'select ' + @sql
    exec(@sql) 
```

- 编辑 -

我已经设法在 MySQL 上试用了一个脚本（通过这里的在线主机：http: [//headfirstlabs.com/sql_hands_on/hf01.htm](http://headfirstlabs.com/sql_hands_on/hf01.htm)）。下面的代码适用于那里的演示数据库，因此应该适用于您的表。通过让列包含带有列号的数据，我让它稍微复杂了一点，因为我有点困惑，但希望这一切都有帮助，所以我现在把它留在里面。

```
set @test:='select';
set @i:=1;
select @test:=concat(@test, ' ',case when @i>1 then ',' else '' end, ' ''Col', @i, ''' as ', last_name) , @i:=@i+1 from my_contacts;
select @test;
PREPARE stmt1 FROM @test;
execute stmt1; 
```

（简化的 MySQL 版本）

```
set @sql:='select';
select @sql:=concat(@sql, case when @sql>'select' then ', ' else ' ' end, '0 as ', last_name) from my_contacts;
select @sql;
PREPARE stmt1 FROM @sql;
execute stmt1; 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:40:09.013

仅使用查询是不可能的，您需要使用服务器端语言来实现这一点。

# javascript - 循环对象属性

> ID：12868052
> 
> 赞同：1
> 
> 时间：2012-10-12T22:38:20.753
> 
> 标签：javascript, knockout.js, knockout-2.0, knockout-mapping-plugin, rotten-tomatoes

我正在编写一个测试程序来从[烂番茄 API](http://developer.rottentomatoes.com/docs/json/v10/Movie_Info)中提取数据，并且想知道在使用映射插件后循环对象属性的最佳方法。数据非常简单，正在通过 jquery ajax 检索。

以下是一小部分数据：

```
"ratings": {
  "critics_rating": "Certified Fresh",
  "critics_score": 99,
  "audience_rating": "Upright",
  "audience_score": 91
 } 
```

这是更大映射的一部分，我在 ajax 回调中执行这样的映射：

```
self.moviedetail = ko.mapping.fromJS(data); 
```

我意识到我可以做以下我正在尝试优化的事情：

```
<div data-bind-"with: moviedetail">
 <ul data-bind="with: ratings">
  <li>Critics Rating: <span data-bind="text: critics_rating"></span></li>
  <li>Critics Score: <span>data-bind="critics_score"</span></li>
   etc
 </ul>
</div> 
```

我还没有确定如何循环每个评级，以某种与数据无关的方式显示它们，而不检查每个评级。使用下划线我可以遍历属性并获取它们的值，但不知道如何在淘汰赛中实现相同的目标。

我正在寻找的最终结果是：

```
<ul>
  <li>critics_rating: Certified Fresh</li>
  <li>critics_score: 99</li>
  ....
</ul> 
```

注意：根据肯定有效的答案之一，我可以像这样预处理数据，但是我正在寻找是否有办法在视图上执行此操作。

```
if (data.ratings!=='undefined') {
  self.ratings.removeAll();
  for(var prop in data.ratings) {
    if(data.ratings.hasOwnProperty(prop)) {
        self.ratings.push({name: prop, value: data.ratings[prop]});                         
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:58:21.700

我认为默认情况下您不能通过淘汰赛来做到这一点。

您可以处理数据数组以将传入数据放入可以以通用方式绑定的结构中，例如：

```
"ratings" : {
    [ "name": "critics_rating", "value": "Certified Fresh" ],
    [ "name": "critics_score", "value": 99 ],
    ...
} 
```

然后使用 HTML 之类的

```
<ul data-bind="foreach: ratings">
    <li>
        <span data-bind="text: name"></span>:
        <span data-bind="text: value"></span>
    </li>
</ul> 
```

# jquery - 访问和设置地图选项（缩放）

> ID：12868054
> 
> 赞同：0
> 
> 时间：2012-10-12T22:38:27.113
> 
> 标签：jquery, google-maps-api-3

您能否查看以下链接并告诉我如何通过单击地图上的按钮来重置（将地图恢复为默认缩放 8）？ [http://jsfiddle.net/Behseini/cbTx5/](http://jsfiddle.net/Behseini/cbTx5/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:46:45.317

您需要将`map`变量移到外面`initialize`并调用`map.setZoom(zoo)`. 这是一个演示这个的小提琴：http: [//jsfiddle.net/cbTx5/2/](http://jsfiddle.net/cbTx5/2/)

编辑 - 修复了演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:30:39.367

`zoom_changed`触发事件时，地图将更改缩放级别。当您调用 setZoom(value) 时，此事件会自动触发。

如果您想更好地控制何时发生这种情况，您可以随时说：

```
$('.classname').click(function(){
  map.zoom=8;
  google.maps.event.trigger(map, 'zoom_changed');
});​ 
```

这将具有相同的效果并且不太优雅，但它可以更好地概述正在发生的事情。

对于操作地图时触发的所有事件，请查看此演示： http: [//gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html)

# html - 为什么body标签使用滚动条？

> ID：12868059
> 
> 赞同：0
> 
> 时间：2012-10-12T22:38:56.023
> 
> 标签：html, css

我的网站不必要地显示水平滚动条。右侧似乎有一个额外的 260 像素宽度。我正在使用 960gs 网格系统。

[http://dev.keep-austin-level.gotpantheon.com/](http://dev.keep-austin-level.gotpantheon.com/)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:04:09.813

看来问题出在您的`div#footer-menu`.

您可以使用其中的`ul.menu`内容来正确安装或执行类似的操作

```
#footer-menu{
overflow-x: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:43:39.747

您可以将 facebook like 按钮的宽度更改为合理的值，或者将溢出设置为隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:00:31.157

问题在于 和 的`#footer-menu ul.menu`定义`#footer-menu ul.menu li`。在这两种情况下，您都在使用`left: 50%`which 移动块。如果您想将它向右对齐，请删除这两个`left: 50%`并添加`float: right`到`#footer-menu ul.menu`.

如果你想让它们居中，你可以这样做：

```
#footer-menu ul.menu {
    list-style-type: none;
    margin: 0 auto;
    padding: 0;
    position: relative;
    display: inline-block;
    text-align: center;
}

#footer-menu ul.menu li {
    position: relative;
    list-style-type: none;
    list-style-image: none;
    margin: 0;
    padding: 6px 6px;
    display: inline-block;
} 
```

# php - PHP/MYSQL 查询优化

> ID：12868065
> 
> 赞同：0
> 
> 时间：2012-10-12T22:39:45.613
> 
> 标签：php, mysql

我有以下代码块来做几件事之一，最重要的是设置我们将从中获取数据库内容的主循环（取决于条件）。

这些条件是：我们是否正在查看一个类别 - 我们是否正在查看一个 ID - 我们是否都没有查看（首页） - 是否使用管理员密码/用户名组合（用于删除/编辑目的）。

$replies 正在抓取（如果我们正在查看 ID）所有具有被调用 ID 的 PARENT 的条目。$quickinfo 用于设置元标签（标题、关键字等）

我唯一（当前）的问题是：这有效吗？如果没有，为什么不呢。

```
$selection = "ID,CONTENT,IP,SUBJECT,CATEGORY,APPROVED,DATE,PARENT,
              PASSWORD,USERNAME,THANKS,DISAPPROVE,IPS,BUMPS";

$id = strip_tags($id);
$category = strip_tags($category);
$threads = mysql_query("SELECT COUNT(*) FROM $board") or die();
list($threadsTotal) = mysql_fetch_row($threads);
$threadsTotal_pages = ceil($threadsTotal / $POSTSPERPAGE);
$threadsPage = intval(@$_GET["page"]);

if (0 == $threadsPage)
{
    $threadsPage = 1;
}

$threadsStart = $POSTSPERPAGE * ($threadsPage - 1);
$threadsMax = $POSTSPERPAGE;

if ($category > "" && $id == ""
    && $passw != <ONE MISTAKE HERE> $adminPass 
    && $username != <ANOTHER MISTAKE HERE> $adminID)
{
    $threads = mysql_query("SELECT $selection FROM $board WHERE PARENT=0
                             AND CATEGORY='$category'
                             ORDER BY ID DESC LIMIT $threadsStart, $threadsMax");
}

if ($category == "" && $id == "" &&
    $passw !== <NOT EQAULS DOES NOT REQUIRE TWO EQUAL SIGNS AGAIN>
    $adminPass && $username != <AND AGAIN> $adminID)
 {
     $threads = mysql_query("SELECT $selection FROM $board WHERE PARENT=0
                              ORDER BY ID DESC LIMIT $threadsStart, $threadsMax");
 }

 // PLEASE CHECK THE NOT EQUALS FUTHER ON....

 if ($id > "" && $passw != $adminPass && $username != $adminID)
 {
     $threads = mysql_query("SELECT $selection FROM $board WHERE PARENT=0
                             AND ID=$id LIMIT 1");

     $quickinfo = mysql_query("SELECT COUNT(*) FROM $board") or die();
     $quickinfo = mysql_query("SELECT ID,CONTENT,SUBJECT,CATEGORY,USERNAME FROM
                               $board WHERE PARENT=0 AND ID=$id LIMIT 1");

     $replies = mysql_query("SELECT COUNT(*) FROM $board") or die();
     $replies = mysql_query("SELECT $selection FROM $board WHERE PARENT=$id
                             ORDER BY ID ASC");

     while (list( $ID, $CONTENT, $SUBJECT, $CATEGORY, $USERNAME) =
            mysql_fetch_row($quickinfo))
     {
         $threadID = $ID;
         $threadContent = $CONTENT;
         $threadSubject = $SUBJECT;
         $threadCategory = $CATEGORY;
         if ($USERNAME > "")
         {
             $threadAuthor = $USERNAME;
         }
         elseif ($USERNAME == "")
         {
             $threadAuthor = "Anonymous";
         }
     }

 } // That is the end of your if

 if ($passw == $adminPass && $username == $adminID)
 {
     $threads = mysql_query("SELECT $selection FROM $board ORDER 
                             BY APPROVED DESC LIMIT $threadsStart,
                                                    $threadsMax");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:11:22.267

Matt- 重新格式化代码，还发现您使用 '!==' 表示 '!-'

此外，您应该考虑使用 mysqli 或 POD。不推荐使用 PHP 的 mysql 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:02:13.850

我想我看到了一个问题。我相信你真的想要这个

```
if ($category > "" && $id == ""
    && $passw != <ONE MISTAKE HERE> $adminPass 
    && $username != <ANOTHER MISTAKE HERE> $adminID) 
```

{

成为这个

```
if ($category > "" && $id == ""
    && ($passw != <ONE MISTAKE HERE> $adminPass 
    || $username != <ANOTHER MISTAKE HERE> $adminID)) 
```

{

或者可能，你可能想要另一个 || 代替另一个&&，我不完全确定类别和ID的逻辑。

否则，您只需在页面上查询一次数据库，这似乎是一个非常有效的设置。

# php - 动态创建 PHP 类函数

> ID：12868066
> 
> 赞同：23
> 
> 时间：2012-10-12T22:39:50.713
> 
> 标签：php

我想迭代一个数组并根据每个项目动态创建函数。我的伪代码：

```
$array = array('one', 'two', 'three');

foreach ($array as $item) {
    public function $item() {
        return 'Test'.$item;
    }
} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-12T22:44:17.507

您可以使用魔术方法代替“创建”函数，[`__call()`](http://php.net/__call)这样当您调用“不存在”的函数时，您可以处理它并执行正确的操作。

像这样的东西：

```
class MyClass{
    private $array = array('one', 'two', 'three');

    function __call($func, $params){
        if(in_array($func, $this->array)){
            return 'Test'.$func;
        }
    }
} 
```

然后你可以调用：

```
$a = new MyClass;
$a->one(); // Testone
$a->four(); // null 
```

演示：http: [//ideone.com/73mSh](http://ideone.com/73mSh)

**编辑**：如果您使用的是 PHP 5.3+，您实际上*可以*在您的问题中做您想做的事情！

```
class MyClass{
    private $array = array('one', 'two', 'three');

    function __construct(){
        foreach ($this->array as $item) {
            $this->$item = function() use($item){
                return 'Test'.$item;
            };
        }
    }
} 
```

这确实有效，只是你不能`$a->one()`直接调用，你需要[将它保存为变量](https://stackoverflow.com/q/7067536/206403)。

```
$a = new MyClass;
$x = $a->one;
$x() // Testone 
```

演示：[http ://codepad.viper-7.com/ayGsTu](http://codepad.viper-7.com/ayGsTu)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-19T15:45:07.940

```
class MethodTest
{
    private $_methods = array();

    public function __call($name, $arguments)
    {
        if (array_key_exists($name, $this->_methods)) {
            $this->_methods[$name]($arguments);
        }
        else
        {
            $this->_methods[$name] = $arguments[0];
        }
    }
}

$obj = new MethodTest;

$array = array('one', 'two', 'three');

foreach ($array as $item) 
{
    // Dynamic creation
    $obj->$item((function ($a){ echo "Test: ".$a[0]."\n"; }));
    // Calling
    $obj->$item($item);
} 
```

上面的示例将输出：

```
Test: one
Test: two
Test: three 
```

# c# - 页面加载时弹出表单

> ID：12868067
> 
> 赞同：0
> 
> 时间：2012-10-12T22:39:54.490
> 
> 标签：c#, asp.net-mvc, telerik-mvc

我是 Telerik 和 MVC 的新手，我正在尝试在 Telerik 的页面加载时弹出一个模型表单（允许用户订阅）。这是 Index.cshtml 中的代码，从未调用过测试代码“hello world”。

```
@model Subscriber
 @{  Html.Telerik().Window()
    .Name("Window")
    .Title("Submit feedback")
    .Content(@<text>
        @using (Html.BeginForm("popupform", "window", FormMethod.Post, new { id = "feedback-form" }))
        {
            <p class="note">Subscribe<strong>not</strong> be saved.</p>

            @Html.LabelFor(model => model.Email)
            @Html.TextBoxFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)

            <div class="form-actions">
                <button type="submit" class="t-button t-state-default">Submit feedback!</button>
            </div>
        }
        </text>)
    .Width(400)
    .Draggable(true)
    .Modal(true)
    .Visible(false)
    .Render();
 } 

 @{
    ViewBag.Title = "Home Page";
 }
@{
Html.Telerik().ScriptRegistrar().OnDocumentReady(
@<text>
    // put some javascript goodness in here
   alert('hello world');
   $('#Window').data('tWindow').center().open();
</text>);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:53:42.130

试试这个：

```
....
@{
    Html.Telerik().ScriptRegistrar().OnDocumentReady(@"OnInit();");
}
<script type="text/javascript">
function OnInit() {
     // put some javascript goodness in here
     alert('hello world');
     $('#Window').data('tWindow').center().open();  
} 
```

我想你的问题出在标签上，但不确定。之前的代码在任何情况下都必须工作。

# ruby-on-rails - Rails TextHelper 截断方法：检查更复杂的分隔符？

> ID：12868072
> 
> 赞同：0
> 
> 时间：2012-10-12T22:40:27.763
> 
> 标签：ruby-on-rails

有没有办法将正则表达式用于更复杂的分隔符？

```
truncate(content, :length=>60, :separator=>' ') 
```

检查标准空间作为分隔符（''）对我来说是不够的。我的主要目标是**检查 \n (enter/a new line)**，所以如果有人知道该怎么做，请告诉我。

我也很好奇是否有一种方法可以检查更广泛的事物。

**编辑：** 对不起，更多细节：我希望**有一个像 => / \r\n/**这样的分隔符，因此在确定省略号的位置时，truncate 方法将在空格和换行符周围分开，但我不能使用正则表达式。看到问题了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:35:58.530

[截断](http://apidock.com/rails/String/truncate)只允许两个可选参数，`:omission`并且`:separator`. 您可以通过以下 truncate 代码看到它仅设置为使用字符串 for `:separator`：

```
# File activesupport/lib/active_support/core_ext/string/filters.rb, line 38
def truncate(length, options = {})
  text = self.dup
  options[:omission] ||= "..."

  length_with_room_for_omission = length - options[:omission].mb_chars.length
  chars = text.mb_chars
  stop = options[:separator] ? (chars.rindex(options[:separator].mb_chars, length_with_room_for_omission) || length_with_room_for_omission) : length_with_room_for_omission

  (chars.length > length ? chars[0...stop] + options[:omission] : text).to_s
end 
```

话虽如此，您应该能够通过以下方式完成您想要实现的目标（如果我正确理解情况）（首先将换行符和诸如此类的东西切换到空格）：

```
truncate(content.gsub(/\s/i, ' '), :length=>60, :separator=>' ') 
```

如果这太简单了，您可能会想出您想要的内容，只需对官方`truncate()`代码进行相当简单的修改......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:15:47.687

这对我有用：

```
truncate(content, :length => 60, :separator => '\n') 
```

# visual-studio-2010 - Visual Studio 2010 创建模板类别

> ID：12868075
> 
> 赞同：1
> 
> 时间：2012-10-12T22:40:44.967
> 
> 标签：visual-studio-2010, templates

在 Visual Studio 中，我为各种语言创建了几个模板，以帮助我的团队更轻松，但我遇到的问题是如何为模板创建自定义类别。我尝试将文件夹添加到 ProjectTemplates 文件夹中，并且我能够在其他类别下生成一个子类别（例如，一个模板位于“Visual C# -> 自定义 -> 自定义 Windows 窗体应用程序”中）但理想情况下我想要创建一个仅显示“客户”或“编程团队名称”之类的类别。关于如何正确执行此操作的任何想法？

# android - eclipse android景观，按钮四处移动

> ID：12868076
> 
> 赞同：0
> 
> 时间：2012-10-12T22:40:51.767
> 
> 标签：android, button, landscape

我正在尝试创建横向模式视图，但是当我将按钮放在 xml 上并在手机上启动应用程序时，按钮被移动了吗？我想在按下按钮时创建一个弹出窗口，其中包含窗口内的一些信息。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/v_ning_3"
        android:src="@drawable/test_karta3" />

    <Button
        android:id="@+id/up3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="14dp"
        android:background="@drawable/button_up"
        android:text="" />

    <Button
        android:id="@+id/down3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginRight="15dp"
        android:layout_toLeftOf="@+id/up3"
        android:background="@drawable/button_down" />

    <Button
        android:id="@+id/V3Flygel3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="10"
        android:layout_height="wrap_content"
        android:layout_below="@+id/down3"
        android:layout_marginRight="59dp"
        android:layout_toLeftOf="@+id/down3" />

</RelativeLayout> 
```

# python - 金字塔模式迁移

> ID：12868078
> 
> 赞同：4
> 
> 时间：2012-10-12T22:41:11.923
> 
> 标签：python, sqlalchemy, pyramid, database-migration, sqlalchemy-migrate

我在 Gentoo 下使用“vanilla” Pyramid 1.4，我想对我的表进行更改并提交它们，而不必删除表（及其所有数据）然后重新创建它。我听说解决方案是模式迁移。

作为一个长期的 Django 用户，我一直在使用`django-south`，但现在我正在使用 Pyramid 我找不到任何处理迁移的方法。我读过关于`sqlalchemy-migrate`，它看起来非常好，但我不确定如何让它与 Pyramid 一起使用。

Pyramid 1.4 中有什么方法可以处理模式迁移吗？如果使用`sqlalchemy-migrate`是明智的选择，我如何让它与 Pyramid 一起使用？

干杯。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T02:35:14.197

虽然这并不能直接回答您的问题：您是否考虑过[Alembic](https://alembic.readthedocs.org/en/latest/)，它是 Mike Bayer 本人（SQLAlchemy 的作者）提供的一种新的 SQLAlchemy 迁移工具？sqlalchemy-migrate 的开发似乎在一月份就停止了，而 Alembic 则相当活跃。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T20:14:43.367

正如 Martin 所说，我建议您使用 Alembic 进行迁移。它来自 SqlAlchemy 的创建者，应该与任何 SqlAlchemy 更改保持同步。

至于将其连接到您的框架中，这取决于您。我在 Bookie 中通过更新 Alembic 中的 env.py 来加载我的 Pyramid .ini 文件来设置它。您可以在此处查看代码中的更改：

[https://github.com/mitechie/Bookie/blob/develop/dbversions/env.py#L8](https://github.com/mitechie/Bookie/blob/develop/dbversions/env.py#L8)

这也会加载模型，以便您可以使用自动生成更改。

然后，我通过 Makefile 中的帮助程序控制迁移，这些帮助程序允许我生成、更新等。

[https://github.com/mitechie/Bookie/blob/develop/Makefile#L67](https://github.com/mitechie/Bookie/blob/develop/Makefile#L67)

这些可能会变成金字塔 p* 命令，但我没有这样做。 [http://pyramid.readthedocs.org/en/latest/narr/commandline.html#writing-a-script](http://pyramid.readthedocs.org/en/latest/narr/commandline.html#writing-a-script)

# php - 仅使用推送器向特定用户显示通知

> ID：12868079
> 
> 赞同：3
> 
> 时间：2012-10-12T22:41:25.090
> 
> 标签：php, pusher

我一直在关注本教程，但如果我将此代码添加到我的应用程序中，它将向所有查看我的应用程序的用户显示通知。我想知道是否可以更改代码以便仅向特定用户显示通知。

[http://pusher.com/tutorials/html5_realtime_push_notifications](http://pusher.com/tutorials/html5_realtime_push_notifications)

# c# - 游戏编程和定时器数量

> ID：12868080
> 
> 赞同：9
> 
> 时间：2012-10-12T22:41:30.533
> 
> 标签：c#, multithreading, timer, directx, game-engine

我使用 C# 和 DirectX 制作了一个简单的 2D 游戏引擎，它对于我为测试它而制作的演示具有完整的功能。我有一个`Timer`使用的对象，`QueryPerformanceCounter`但我不知道什么是更好的选择：在游戏循环中只使用一个计时器来更新游戏中的所有内容，或者在每个需要一个的对象中使用一个独立的计时器。

我担心的是，当我尝试实现线程时，计时器会发生什么？同步会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:12:07.897

您最好为每个游戏对象提供一个更新（用户交互和其他计算，如 hittest）和绘制函数。您的计时器应该调用最顶层的 Update 方法，该方法将调用每个对象的更新方法。绘图可以用另一个计时器或只是一个while循环来完成，直到游戏结束。我的选择是只有一个更新计时器。对于定时器的差异； [比较计时器类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

# glassfish - Glassfish 3.1.2 返回相同的物理连接

> ID：12868082
> 
> 赞同：1
> 
> 时间：2012-10-12T22:41:43.503
> 
> 标签：glassfish, connection, pool

我在 Ubuntu 12.04.1 上运行 Glassfish 3.1.2。

我有一个这样定义的数据库连接池：

```
jdbc-connection-pool validation-table-name="sysibm.sysdummy1" datasource-classname="com.ibm.db2.jcc.DB2DataSource" pooling="false" res-type="javax.sql.DataSource" wrap-jdbc-objects="false" name="eERPnextPool" is-connection-validation-required="true">
      <property name="portNumber" value="12345"></property>
      <property name="databaseName" value="MYDB"></property>
      <property name="driverType" value="4"></property>
      <property name="serverName" value="192.168.0.2"></property>
      <property name="user" value="MYDB"></property>
      <property name="password" value="MYDB"></property>
      <property name="enableNamedParameterMarkers" value="1"></property>
    </jdbc-connection-pool>
    <jdbc-resource pool-name="eERPnextPool" description="" jndi-name="jdbc/eERPnextDataSource"></jdbc-resource> 
```

当我的 EJB 中有这样的代码时：

```
InitialContext initialContext = null;
Connection conn = null;
Connection conn1 = null;
try {
    initialContext = new InitialContext();
    DataSource workDs = (DataSource) initialContext.lookup("jdbc/eERPnextDataSource");
    conn = workDs.getConnection();
    conn1 = workDs.getConnection();

    System.out.println("conn = " + conn + " = " + conn.unwrap(DB2Connection.class));
    System.out.println("conn1 = " + conn1 + " = " + conn1.unwrap(DB2Connection.class));
} catch (Exception e) {
    Log.error("ERROR", e);
} finally {
    conn.close();
    conn1.close();
    initialContext.close();
} 
```

我得到：

```
conn  = com.sun.gjc.spi.jdbc40.ConnectionHolder40@2df6b722 = com.ibm.db2.jcc.t4.b@207130c1
conn1 = com.sun.gjc.spi.jdbc40.ConnectionHolder40@2ebfbc98 = com.ibm.db2.jcc.t4.b@207130c1 
```

所以两个不同的连接持有者背后有相同的物理连接。这是为什么？这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:18:02.913

将 @TransactionManagement(TransactionManagementType.BEAN) 添加到类定义中：

```
@LocalBean                                                                                                                                                                
@TransactionManagement(TransactionManagementType.BEAN)                                                                                                                    
public class HelloBean {  
.....
} 
```

有所作为。现在，如果我调用 workDs.getConnection() 两次，我将获得两个连接。但是现在我必须自己调用回滚/提交，这对我来说更方便。

# c# - 如何从asp.net代码后面打开Colorbox jquery插件模式窗口？

> ID：12868083
> 
> 赞同：1
> 
> 时间：2012-10-12T22:41:48.450
> 
> 标签：c#, asp.net, listview, colorbox, code-behind

我有一个 asp.net`listview`控件，`asp:button`其`itemtemplate`. 我想在`Colorbox`单击它并且满足某些条件时打开它（这就是为什么我在调用 onclientclick 时遇到问题）并且 Colorbox 将显示一个 iframe。我尝试了许多不同的方法并搜索了很多，但没有一个答案对我有用，因为他们都建议`onclientclick`事件而不是 onclick。

我正在使用如下代码在 Colorbox 模式对话框中打开 href 链接：

```
 <script>
                $(document).ready(function () {
                    $(".ajax").colorbox();
                    $(".iframe").colorbox({ iframe: true, 
width: "50%", height: "500px" });
                });
            </script> 
```

但是我不能让它在`itemcommand`asp.net listview 的事件中的代码隐藏中工作。

你能建议一个解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:57:36.347

您可以在页面上创建一个隐藏字段并将其设置在代码隐藏中，然后在`$(document).ready()`.

例如：

页

```
<script>
    $(document).ready(function () {
        $(".ajax").colorbox();
        $(".iframe").colorbox({ iframe: true, width: "50%", height: "500px" });
        if ($('.showColorbox').val()) {
            // show the colorbox
        }
    });
</script> 
```

代码隐藏：

```
// in click event code
showColorbox.Value = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:17:59.220

这是我最终遇到的：

```
<asp:Button ID="btnViewDetails" runat="server" Text="Details" OnClientClick="
                OpenCBox();" />
                <script type="text/javascript">
                    function OpenCBox() {
                        $.colorbox({ href: '<%# Eval("EditLink") %>', iframe: true, width: "50%", height: "500px", 
                        transition: "elastic", onClosed: function () { parent.location.reload(true); } });    
                        return true;                   
                    }
                </script> 
```

# javascript - 使 Openlayers 仅在特定范围内请求 WMS 切片

> ID：12868084
> 
> 赞同：2
> 
> 时间：2012-10-12T22:41:51.180
> 
> 标签：javascript, openlayers, wms

有没有办法告诉 openLayers 不要为特定 WMS 图层请求超出特定范围的切片？

我希望地图的其余部分和其他图层仍然可以访问，因此地图上的 maxExtent 对我来说不是一个选项。我只想将一个 WMS 图层限制在特定范围内。如果视口在边界内并且用户放大良好，openlayer 会请求新的图块！但是如果视口在外面，WMS 应该只用来自该 WMS 层的图块填充有界区域。

这是有道理的，还是有可能？

* * *

### 更新：

1.  我已经在 Layer 上尝试了 maxExtent（WMS 对象从 Layer 扩展），但这仍然不能阻止 OpenLayers 请求 maxExtent 之外的图块。

2.  不，我不是要解决“粉红色瓷砖问题”。

3.  出于性能原因，我需要这个。这个特定的 WMS 层是矢量密集型的。并且 TileCache 不是一个选项，因为我每次都使用动态 SLD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:39:44.180

好的，我解决了。真的很傻，在 WMS 层上设置“maxExtent”确实有效，但只有在“singleTile”选项设置为“false”时才有效。当 Single tile 设置为 true 时，出于某种原因，OpenLayers 会忽略 WMS 层上的 maxExtent，并且只请求边界与视口边界相同的单个 tile！我不确定它是一个错误还是什么，因为它肯定没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:35:47.780

我认为您需要覆盖该方法`OpenLayers.Layer.WMS.getURL`。判断请求的区域是否进入 BBOX 并返回对 WMS 或空图块的引用。

# css - mixin 可以是 SCSS 中的一个类吗？

> ID：12868088
> 
> 赞同：1
> 
> 时间：2012-10-12T22:42:16.433
> 
> 标签：css, less, sass

看起来你可以写一些类似的东西

```
.input-block-level {
  display: block;
  width: 100%;
  min-height: 30px;        // Make inputs at least the height of their button counterpart
  .box-sizing(border-box); // Makes inputs behave like true block-level elements
} 
```

并且`input-block-level`可以用作mixin（带括号）和应用于元素的类。scss中是否有类似的功能？

（示例取自[https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L154](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L154)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:35:53.400

您描述的功能将通过`@extend`.

[http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend)

这是 Sass 文档中的一个示例：

```
.error {
  border: 1px #f00;
  background-color: #fdd;
}
.seriousError {
  @extend .error;
  border-width: 3px;
} 
```

话虽如此，您是否要使用`extend`或`mixin`取决于您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:45:38.700

我无法回答确切的功能，但只能回答“类似的功能”......

```
@mixin input-block-level {
    /* css */
}
.input-block-level {
    @include input-block-level;
} 
```

`@mixin`作为一种猜测，由于定义 mixin 所需的指令，我预计不可能实现确切的功能。

# node.js - NodeJS 将二进制缓冲区写入文件

> ID：12868089
> 
> 赞同：40
> 
> 时间：2012-10-12T22:42:26.517
> 
> 标签：node.js, binary, streamwriter

我无法重写从二进制缓冲区获取的文件，我已经检查了原始文件并且所有字节都相同。

这是从 NodeJS 创建的文件：

```
# hd test.txt  | head
00000000  47 49 46 38 39 61 32 00  32 00 f7 00 00 96 8c 73  |GIF89a2.2.�....s|
00000010  66 5e 45 c6 bb 9f 7b 72  5a 47 47 47 8a 81 65 ca  |f^Eƻ.{rZGGG..e�|
00000020  c1 a6 c9 c1 ac ee ea dd  c8 c5 bc 8c 87 7a d3 c9  |���������ż..z��|
00000030  ab 43 3b 26 eb e5 d1 fa  fa fa e5 e4 e2 a6 9d 83  |�C;&����������..|
00000040  86 7e 67 c1 b4 8e e4 dc  c6 82 82 82 e1 dd d1 e3  |.~g��.���...����|
00000050  dd ca e4 da bc f5 f1 e6  26 25 25 9c 91 73 f8 f3  |���ڼ���&%%..s��|
00000060  e4 c3 b9 9d d3 ca b4 4a  42 2a d1 c6 a2 6c 62 46  |�ù.�ʴJB*�ƢlbF|
00000070  ea e6 db bb b3 9c db d3  bb 5c 54 3d f1 ee e6 dc  |��ۻ�.�ӻ\T=����|
00000080  da d3 e7 e4 dc ce c2 9f  f8 f6 f2 76 6c 53 fc fb  |�������.���vlS��|
00000090  f9 e9 e1 ca 17 13 09 67  4d 00 f8 f4 e8 dc d3 b5  |����...gM.����ӵ| 
```

这是原来的：

```
$ hd runner_small.gif   | head
00000000  47 49 46 38 39 61 32 00  32 00 f7 00 00 96 8c 73  |GIF89a2.2......s|
00000010  66 5e 45 c6 bb 9f 7b 72  5a 47 47 47 8a 81 65 ca  |f^E...{rZGGG..e.|
00000020  c1 a6 c9 c1 ac ee ea dd  c8 c5 bc 8c 87 7a d3 c9  |.............z..|
00000030  ab 43 3b 26 eb e5 d1 fa  fa fa e5 e4 e2 a6 9d 83  |.C;&............|
00000040  86 7e 67 c1 b4 8e e4 dc  c6 82 82 82 e1 dd d1 e3  |.~g.............|
00000050  dd ca e4 da bc f5 f1 e6  26 25 25 9c 91 73 f8 f3  |........&%%..s..|
00000060  e4 c3 b9 9d d3 ca b4 4a  42 2a d1 c6 a2 6c 62 46  |.......JB*...lbF|
00000070  ea e6 db bb b3 9c db d3  bb 5c 54 3d f1 ee e6 dc  |.........\T=....|
00000080  da d3 e7 e4 dc ce c2 9f  f8 f6 f2 76 6c 53 fc fb  |...........vlS..|
00000090  f9 e9 e1 ca 17 13 09 67  4d 00 f8 f4 e8 dc d3 b5  |.......gM.......| 
```

您可以比较这两个文件，每个字节都相同，我猜 NodeJS 的编码不正确。

这是一段代码

```
var foo = "71%73%70%56%57%97%50%0%50%0%247%0%0%150%140%115%102%94%69%198%187%159%123%114%90%71%71%71%138%129%101%202%193%166%201%193%172%238%234%221%200%197%188%140$"
var bytes = foo.split("%");

var b = new Buffer(bytes.length);
for (var i = 0;i < bytes.length;i++) {
        b[i] = bytes[i];
}

fs.writeFile("test.txt", b,  "binary",function(err) {
    if(err) {
        console.log(err);
    } else {
        console.log("The file was saved!");
    }
}); 
```

您可以尝试在您的 NodeJS 上运行它并查看结果是否错误。

我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-01-17T13:31:53.500

我不确定这是否会有所帮助，但尝试将 b 变量更改为下面行中的 bytes 变量，至少您可以在测试编辑器中查看该文件

```
fs.writeFile("test.txt", b,  "binary",function(err) { }); 
```

如果您想将数字空格分开，请尝试以下代码：

```
var fs = require('fs');

var foo = "71%73%70%56%57%97%50%0%50%0%247%0%0%150%140%115%102%94%69%198%187%159%123%114%90%71%71%71%138%129%101%202%193%166%201%193%172%238%234%221%200%197%188%140"
var bytes = foo.split("%");

var b = new Buffer(bytes.length);
var c = "";
for (var i = 0;i < bytes.length;i++) {
    b[i] = bytes[i];
    c = c + " " + bytes[i]
}

fs.writeFile("test.txt", c,  "binary",function(err) {
    if(err) {
        console.log(err);
    } else {
        console.log("The file was saved!");
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-23T22:59:41.320

你可以试试这个：

```
var writeFileSync = function (path, buffer, permission) {
    permission = permission || 438; // 0666
    var fileDescriptor;

    try {
        fileDescriptor = fs.openSync(path, 'w', permission);
    } catch (e) {
        fs.chmodSync(path, permission);
        fileDescriptor = fs.openSync(path, 'w', permission);
    }

    if (fileDescriptor) {
        fs.writeSync(fileDescriptor, buffer, 0, buffer.length, 0);
        fs.closeSync(fileDescriptor);
    }
}

// then writeFileSync('path_to_your_file', your_buffer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-15T00:50:09.767

尝试使用**Buffer.byteLength(string | buffer..)**来处理长度。

# c# - 使用 MVC3 标记服务器上的图像文件

> ID：12868092
> 
> 赞同：0
> 
> 时间：2012-10-12T22:43:18.717
> 
> 标签：c#, .net

我正在尝试编写一个 MVC3 应用程序，它将检索本地存储在服务器上的图像。在网页上显示它们并让用户标记图像以供以后查看。当我说标签时，我的意思是实际修改服务器上文件的“标签”属性。当我运行下面的代码时，我收到以下错误：“调用线程必须是 STA，因为许多 UI 组件需要这个”在“Image imageToTag = new Image(); 行。请帮助！我一直坚持这个大约 3 天，我从来没有做过太多的多线程。

```
Image imageToTag = new Image();      

        BitmapImage myBitmapImage = new BitmapImage();
        var root = @"C:\Images\";
        imageURLProcessed = Path.GetFullPath(@imageURLProcessed);
        // BitmapImage.UriSource must be in a BeginInit/EndInit block
        myBitmapImage.BeginInit();
        if (!imageURLProcessed.StartsWith(root))
        {
            // Ensure that we are serving file only inside the root folder
            // and block requests outside like "../web.config"
            throw new HttpException(403, "Forbidden");
        }
        myBitmapImage.UriSource = new Uri(@imageURLProcessed);
        myBitmapImage.EndInit();
        imageToTag.Source = myBitmapImage;

        imageToTag.Tag = tags; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:59:29.303

但回答你的问题： [http ://social.msdn.microsoft.com/Forums/en-us/csharpgeneral/thread/f5e83bc0-b523-45d2-b77c-b1702124869c](http://social.msdn.microsoft.com/Forums/en-us/csharpgeneral/thread/f5e83bc0-b523-45d2-b77c-b1702124869c)

[http://msdn.microsoft.com/en-us/library/system.drawing.image.setpropertyitem.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.setpropertyitem.aspx)

# actionscript-3 - AS3中的全屏网站

> ID：12868098
> 
> 赞同：0
> 
> 时间：2012-10-12T22:43:44.510
> 
> 标签：actionscript-3, flash-cs5, fullscreen

我有一个 Flash 网站，我想将其设置为 100% 高度和 100% 宽度，但目前我得到了黑色边框。但是，如果我使网站全屏，然后退出全屏模式，边框就会消失......关于如何正确使其填充网页的任何想法？

目前，我在 div 中有 SWF，如下所示：

```
#flashContent { width:100%; height:100%; } 
```

您可以在此处查看该网站[http://edharrisondesign.com/remembrance-site/](http://edharrisondesign.com/remembrance-site/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:41:31.390

我注意到两件事：

1.  SWF 的内容区域始终保持其纵横比锁定。这很好，因为它可以防止内容看起来被拉伸。但是，它确实会导致信箱化（顶部/底部或左侧/右侧的黑色边框）。如果这就是您所指的，我个人会保持原样。信箱比拉伸图像更好。但是，这只是我。
2.  SWF 可以全屏显示，内容不会改变大小。它的大小与进入全屏之前的大小完全相同。我的猜测是，当您全屏显示时，您是否没有将容器的高度和宽度设置为`stage.stageHeight`和`stage.stageWidth`（您显然需要考虑纵横比）。

# java - 在使用 eclipse Juno 运行 testng 测试时调用 com.javabi.sizeof.MemoryUtil.sizeOf() 时出现 NoSuchFieldException

> ID：12868102
> 
> 赞同：0
> 
> 时间：2012-10-12T22:44:45.523
> 
> 标签：java, openjdk

我正在使用 OpenJDK 1.7.0_06-icedtea 并在通过 eclipse 插件运行 testng 测试用例时调用 sizeof 时出现以下异常：

```
FAILED CONFIGURATION: @BeforeMethod setUpBeforeMethod
com.javabi.sizeof.ClassDefinitionInitialisationException: java.lang.NoSuchFieldException: header
at com.javabi.sizeof.ClassDefinitionMap.<init>(ClassDefinitionMap.java:49)
at com.javabi.sizeof.MemoryUtil.sizeOf(MemoryUtil.java:133)
... 
```

任何想法为什么会发生这种情况以及如何解决它？根据标题，我正在运行 eclipse Juno，而其他一些正在运行 eclipse Juno 的同事也有同样的问题。其他同事有不同的配置，可以在不引发异常的情况下运行相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:51:45.000

你的文件里有这个吗？

`import com.javabi.sizeof.MemoryUtil;`

其次，在 JUNO 中为包指定到上述位置的路径。

# jquery - jquery ajax 无法使用脚本访问 doc.ready 上的元素

> ID：12868104
> 
> 赞同：0
> 
> 时间：2012-10-12T22:44:48.470
> 
> 标签：jquery, ajax

我所拥有的是一个使用**ajax**加载一些元素的页面，然后`$.getScript` 从我加载的脚本中，我想访问一些新`html`元素。
问题是，如果我让页面加载并单击对它起作用的元素执行我想做的任何事情的元素。如果我使用**ONLOAD**进行操作`document.ready`，则无法正常工作。
我在这里看到了人们提出类似问题的各种“解决方案”……所有这些似乎都太复杂了——我并不害怕——但是当你知道时，他们不会给出“应该是这样”的感觉你已经按照书本正确地完成了你的工作。

可能有人对此问题有解决方案\另一种方法？

这是运行第一个脚本的相关代码：

```
$('#questions').load('ajax/makeGallery.php', { 'tests' : tests });
    $.getScript('scripts/gallery.js', function(){ Gallery.start() }); 
```

然后，据说加载了 php，在 document.ready 中新加载的 .js 文件中，我得到了：

```
questions = $('.slide').length;
$('#s0').fadeIn(); 
```

这两个命令都引用了来自 php 的新加载的东西 - 并且不起作用，尽管来自控制台或 onclick 函数（在它加载并我点击之后）它们工作

# linux - NFS实现，ubuntu发送空nfs_fh3？

> ID：12868105
> 
> 赞同：1
> 
> 时间：2012-10-12T22:44:50.280
> 
> 标签：linux, networking, tcp, udp, nfs

嗨，我正在尝试编写自己的 NFS 服务器（http://en.wikipedia.org/wiki/Network_File_System）实现，所以在我的第一个测试驱动器上，我在虚拟 PC 上安装了 ubuntu，然后我安装了 nfs 客户端并尝试使用以下命令挂载我的 NFS 共享：

> sudo mount -o soft,intr,rsize=8192,wsize=8192 192.168.0.250: /nfs

然后发生的是，首先调用 NFSPROC3_NULL，然后调用 NFSPROC3_GETATTR 但 nfs_fh3 为零字节！！！

我在 rfc (http://tools.ietf.org/html/rfc1813#page-31) 中一无所获。

所以我在这里不知所措，为什么它用一个空文件处理程序调用 NFSPROC3_GETATTR，我从来没有为它提供一个零字节的文件处理程序......？

我的第一个猜测是 nfs 客户端缓存了无效数据，但是在重新启动甚至重新安装整个虚拟 pc 后，它的行为仍然相同，我是在规范中遗漏了一些东西还是 nfs 客户端做了一些无效的事情？

如果我改为尝试使用 xbmc 挂载共享，我至少可以浏览我的目录结构......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:32:02.387

我发现了问题，我没有正确检查版本，客户端正在使用版本 nfs 版本 4 进行调用...并且该版本的 nfs 具有与 NFSPROC3_GETATTR 相同的 ID 的不同过程...

# css - 如何在我自己的类定义中包含来自 twitter boostrap 的标签信息？

> ID：12868106
> 
> 赞同：0
> 
> 时间：2012-10-12T22:44:53.663
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, less

使用 twitter-bootstrap，我正在尝试定义自己的 css 标签类，但出现错误。

.label-info 在[此文件](https://github.com/twitter/bootstrap/blob/master/less/labels-badges.less)中以这种 方式定义：

```
// Colors
// Only give background-color difference to links (and to simplify, we don't qualifty with `a` but [href] attribute)
.label,
.badge {
  // Important (red)
  &-important         { background-color: @errorText; }
  &-important[href]   { background-color: darken(@errorText, 10%); }
  // Warnings (orange)
  &-warning           { background-color: @orange; }
  &-warning[href]     { background-color: darken(@orange, 10%); }
  // Success (green)
  &-success           { background-color: @successText; }
  &-success[href]     { background-color: darken(@successText, 10%); }
  // Info (turquoise)
  &-info              { background-color: @infoText; }
  &-info[href]        { background-color: darken(@infoText, 10%); }
  // Inverse (black)
  &-inverse           { background-color: @grayDark; }
  &-inverse[href]     { background-color: darken(@grayDark, 10%); }
} 
```

**我想要的是** my_label.css.less：

```
@import "twitter/bootstrap";

.my_label{
    .label;
    .label-info;
} 
```

这`.label works`

但是`.label-info`给了我一个错误：`.label-info is undefined`

那么我怎样才能包括`.label-info`在我的课堂上呢？

我正在使用 rails 和 less-rails-boostrap gem。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:20:14.747

您尝试做的事情没有太多优势，特别是标签的修饰符类，因为涉及的代码很少。从您的示例中可以看出，代码`.label-info`基本上是

```
.label {
  &-info              { background-color: @infoText; };
} 
```

如果你真的想将 .label 类与你的新类结合起来，就像你的例子一样，你最好将它与`.label`类分组以减少代码，如下所示：

```
.label,
.label-notice {
  // declarations
} 
```

尽管请记住，这有点否定引导程序的明显优势和最佳实践之一。

至于自定义类，我的建议是使用与其他修饰符相同的模式添加一个新的语义类，并使用为 定义的背景颜色`.label-info`，如下所示：

```
.label,
.badge {
  // Info (turquoise)
  &-info              { background-color: @infoText; }
  &-info[href]        { background-color: darken(@infoText, 10%); }
  ...

  // Notice (your custom class)
  &-notice            { background-color: @infoText; // extend with your properties here }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:48:45.437

我也想问同样的问题。

我有一个解决这个问题的想法： **将 bootstrap.css 更改为 bootstrap.less**并导入它，然后您可以同时使用 .label 和 .label-info 以及所有其他类。

我希望`less`将来可以支持这个“功能”。

我搜索了“mixin” `less-1.3.3.js`，发现了这个：

```
 //
            // A Mixin call, with an optional argument list
            //
            //     #mixins > .square(#fff);
            //     .rounded(4px, black);
            //     .button;
            //
            // The `while` loop is there because mixins can be
            // namespaced, but we only support the child and descendant
            // selector for now.
            // 
```

所以，我认为带有命名空间的 mixins 将在未来得到支持。

# node.js - Node.js+Express 随机丢弃请求，导致网关超时

> ID：12868107
> 
> 赞同：14
> 
> 时间：2012-10-12T22:44:58.977
> 
> 标签：node.js

**编辑**

经过一番折腾，我终于找到了一些看起来可能是可靠的线索：

当 express 库当前正在使用 Node+OAuth 模块执行多个出站请求（例如，到 Facebook、Twitter 等）时，它无法接受传入请求。我可以通过在我的代码中放置大量日志来确定这一点，我发现在出站请求中间时没有触发“开始请求”日志（如下所述）。

我已经能够证明，当 Node+OAuth 模块发出一些出站请求时，对我的 API 的入站请求（通过浏览器窗口）将挂起并且在其中一个出站 OAuth 请求完成之前不会被接收。

当然，我已经做了：

```
require('http').globalAgent.maxSockets = 999; 
```

根据 IRC 中的建议，我添加了

```
console.log(require('http').globalAgent.requests); 
```

但这似乎总是 === {}，这意味着没有挂起的入站请求 AFAIK。

因此，我只能得出结论，由于出站请求，node.js 或 express 选择阻止传入请求，即使应该有足够的套接字可用......

有人对如何解决这个问题有任何提示吗？

* * *

我有一个使用 Express、Mongoose 等在 node.js 中创建的 API，部署在 Amazon Cloud 上，它在 99% 的时间里运行良好且快速。

除了偶尔，请求似乎以某种方式被丢弃或以其他方式忽略。我说的是通常在几毫秒内完成的请求，随机无响应，没有清楚的**原因**。

症状是连接到 API 端点时出现简单的“网关超时”。一个相同的请求，从同一个客户端发出的具有相同参数的，就在之前或之后，都可以正常工作。

当然，我的第一个想法是“呃，服务器过载！” 所以我花了很多时间优化我的请求、monogoDB 等。最后我发现 CPU/磁盘/RAM 的整体使用率（在 Node.js 服务器和 Mongo 服务器中）**非常**低。我使用 Scout 和 RightScale 实时跟踪我的服务器，并记录任何超过 100 毫秒的请求或查询。我的节点服务器目前有 5GB 的可用 RAM、70% 的可用 CPU（在第一个核心上）等。所以我 99.99% 确定这不是性能问题。

最后，我放弃了绝望的尝试：我为我的客户提出的所有请求附加了一个随机数。然后，在 node.js 应用程序中，我在第一次收到请求并完成时执行 console.log()。例如，这是我在 express 中使用的中间件：

```
var configureAPI = function() {
    return function(req, res, next) {
        if(req.body.ruid)
            console.log(req.body.ruid);

        // more middleware stuff...
    };
}
server.configure(function(){

    server.use(express.bodyParser());
    server.use(configureAPI());
    server.use(onError);

    // ...  more config stuff
} 
```

我的发现让我震惊：显然，**node.js 应用程序甚至没有收到有问题的请求**。我有一个 Javascript webapp，我打印了随请求发送到控制台的“ruid”。每当请求成功时，都会在 node.js 控制台中打印出相应的“ruid”。每当它超时，就没有。

* * *

编辑：更多调试和信息。

我的应用服务器实际上开始（并继续）也为 PHP 提供服务（因此，它们安装了 Apache 等）。我需要[http://streamified.me](http://streamified.me)来服务我的网站（PHP）和[http://api.streamified.me](http://api.streamified.me)来服务我的 API（node.js）......所以我的 httpd.conf 文件中有一行导致对 api.streamified.me（而不是 streamified.me）的请求通过端口 8888 转到 node.js：

```
RewriteCond %{HTTP_HOST} ^api.streamified.me
RewriteRule ^(.*) http://localhost:8888$1 [P] 
```

因此，在同一个 httpd.conf 文件中，我打开了 RewriteLogLevel 5，然后在我的本地主机上创建了一个简单的 PHP+CURL 脚本，以使用随机 URL 访问我的 api.streamified.me（这应该会导致 node.js 触发一个简单的“未找到”响应），直到导致网关超时。在这里，您可以看到它已经发生了——并且重写日志显示该请求肯定被应用服务器接收并转发到端口 8888 ......但它从未被 node.js 接收（或者，至少，中间件第一行中的第一行代码永远不会得到它......）

![在此处输入图像描述](../Images/2d1e613e4005dda41d7fea90899328c7.png)

* * *

我一遍又一遍地检查了我的 node.js 代码，并且很确定我没有阻塞代码，即使我这样做了，我也无法想象它阻塞线程足够长的时间以致错过一个请求，而不会在某处引发红旗。

我错过了什么？传入的套接字是否会被阻塞？我确实通过我的 node.js 应用程序向外部 API 发出了相当数量的 HTTP 请求，但 AFAIK 不应该阻塞传入的套接字。

* * *

当然，我有错误日志记录。我已在进程级别启用它...

```
process.addListener("uncaughtException", function (err) {
    // some logging code
} 
```

在 Express 级别（上面的 onError 处理程序）。我知道我的错误记录功能可以工作，因为我以前见过它们都触发过。但是他们都没有在请求被丢弃的时候报告任何东西，我也没有在控制台中看到任何东西......

* * *

*   快捷版：3.0.0rc5
*   Node.js 版本：0.8.12
*   在标准 Amazon Cloud 设置（m1.large 实例）上运行的 2 个 node.js 应用程序实例，位于 2 个负载均衡器后面，连接到 3 个 MongoDB 副本集（也是 m1.large）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:48:51.213

听起来您将 Node 线程锁定太久，导致传入连接在处理它们之前超时。Node 是单线程的，所以它一次只做一件事，它不能选择阻止传入请求，因为传出请求。它只能因为忙于做其他事情而无法接受传入的请求。你需要弄清楚它在忙什么。

如果您不发出出站请求，一切正常吗？如果是这样，您需要查看发出这些请求的代码，以确保您没有等待响应。

# css - 在 IE8 中无法点击覆盖

> ID：12868108
> 
> 赞同：0
> 
> 时间：2012-10-12T22:45:09.427
> 
> 标签：css, internet-explorer-8

在所有浏览器（例如 Firefox、Chrome、IE9）中，单击我的叠加层会触发我的`onClick`功能。但是在IE8中，就好像盒子不存在一样，不可点击，后面的内容是。这是我的代码：

HTML：

```
<div id="pageblock" onclick="closelogin()"></div>
<div id="loginbox"><!--This is where my form is--></div> 
```

CSS：

```
 #loginbox{
        z-index: 10;
        position: absolute;
        height: 83px;
        top: 105px;
        right: 20px;
        width: 400px
        overflow: hidden;
        padding: 5px;
    }
    #pageblock{
        display: none;
        position: fixed;
        z-index: 7;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: #000;
        opacity: 0.6;
    height: 100%;
    width: 100%;
    } 
```

IE8 和更早的 CSS：

```
#pageblock{
    background: transparent !important;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000,endColorstr=#99000000)";
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000,endColorstr=#99000000);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:54:04.787

正如您已经确定的那样，该错误源于使用 -ms-filter。似乎应用过滤器的行为改变了浏览器计算宽度和高度的方式，因此可点击区域减少到页面块 div 内的文本，而不是整个 div 本身。

最简单的解决方案是使用背景图片：一个小的 5px x 5px 60% 透明黑色 .png 就可以正常工作，为您的整体页面大小增加最小的占用空间，从 IE7 开始支持浏览器，并且不会覆盖您为页面块设置的宽度/高度声明。

我可以看到您发布的代码存在许多其他问题；您应用的 z-indexing 意味着登录框将出现在页面块的顶部（这是故意的吗？）。此外，您已指定登录框应出现在距页面右侧 20 像素的位置，但您已将其宽度设置为 100%。这计算为 100% + 20px 的总宽度，这比您的页面显示的要宽。尽量避免混合测量单位 - 要么基于百分比设置正确的位置，然后从宽度声明中扣除它，要么以像素为单位指定登录框的 with。从长远来看，您将为自己省去很多麻烦。

# opengl - 如何让 GHCi 在 GHC 7.6.1 x86-64 Windows 7 下加载 opengl 包？

> ID：12868117
> 
> 赞同：29
> 
> 时间：2012-10-12T22:46:04.697
> 
> 标签：opengl, haskell, ghci

我可以使用 GHC 成功构建链接到 OpenGL 的可执行文件，但是，我无法将包加载到 GHCi 中。这对我来说绝对是一种回归，因为它适用于 32 位 GHC（至少是我升级的版本）。我认为 GHC 版本并不重要，只是我使用的是 64 位 GHC 系统这一事实。

在维护者的建议下，我成功地将正确的 64 位版本的 opengl32 带入了 GHCi。这似乎是更高层次的问题。

这是相关的输出。不幸的是，详细的输出同样具体。函数 wglGetProcAddress 用于查找 OpenGL API 挂钩在 dll 中的位置。

```
$ ghcii.sh  -package OpenGL   
GHCi, version 7.6.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package OpenGLRaw-1.2.0.0 ... linking ... ghc.exe: unable to load package `OpenGLRaw-1.2.0.0'
ghc.exe: C:\...\cabal\OpenGLRaw-1.2.0.0\ghc-7.6.1\HSOpenGLRaw-1.2.0.0.o: unknown symbol `__imp_wglGetProcAddress' 
```

# ruby - 无法加载此类文件--ruby-wmi (LoadError) & 无法加载此类文件--win32/service (LoadError)

> ID：12868121
> 
> 赞同：7
> 
> 时间：2012-10-12T22:46:27.237
> 
> 标签：ruby, windows, rubygems, chef-infra

我确实安装了下面提到的红宝石东西

![在此处输入图像描述](../Images/8a5ec11b3ea70775024095298c34cc9d.png)

当我尝试执行 chef-client 时，我收到下面提到的错误

```
c:\RubyDevKit>chef-client
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- ruby-wmi (LoadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/lib/chef/provider/env/windows.rb:20:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/lib/chef/providers.rb:49:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/lib/chef.rb:25:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/bin/chef-client:23:in `<top (required)>'
        from C:/Ruby193/bin/chef-client:23:in `load'
        from C:/Ruby193/bin/chef-client:23:in `<main>' 
```

Ruby193 文件夹结构（缺失）

![在此处输入图像描述](../Images/2866d065facedd804bb52925b21bbe94.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T23:55:41.893

出现错误消息`cannot load such file -- ruby-wmi (LoadError)`是因为`chef-client`找不到所需的宝石。

此问题[在常见错误的 Opscode/Chef wiki 页面上](http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-Nosuchfiletoloadrubywmi)得到解决。

如上所述，使用以下命令安装所需的 gem：

```
C:\> gem install win32-open3 ruby-wmi windows-api windows-pr --no-rdoc --no-ri --verbose
C:\> gem install rdp-ruby-wmi 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T14:47:09.050

正如**Prakash Murthy**所说，它缺少 ruby​​-wmi 文件。认为如果有人再次陷入困境会有所帮助

我确实运行了这些命令

```
C:\> gem install win32-open3 ruby-wmi windows-api windows-pr --no-rdoc --no-ri --verbose
C:\> gem install rdp-ruby-wmi 
```

又犯了一个错误

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require': cannot load such file -- win32/service (LoadError) 
```

所以我会推荐

(i) 检查 gem 安装（在 CMD 中）

```
gem list 
```

这将指出丢失的宝石，在我的情况下 win32/service 是错误的

(二)`gem install win32-service`

再次检查 gem list 以确保 & 应该解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T19:35:55.433

较新版本的 Chef 不使用 ruby​​-wmi，因此您不需要 gem。我在尝试运行测试厨房时遇到了这个错误，我已经尝试了上面的解决方案，但它们没有用。

这对我有用：

*   卸载并重新安装 Vagrant
*   删除 C:\Users\USERNAME.vagrant.d\gems 文件夹
*   删除 C:\Users\USERNAME.vagrant.d\plugins.json 文件

之后厨房运行良好。

# r - 使用 as.numeric(levels(f))[f] 将数据框中的因子子集转换为数字

> ID：12868122
> 
> 赞同：3
> 
> 时间：2012-10-12T22:46:36.003
> 
> 标签：r, syntax

我有一个包含 100 个变量的数据框，我希望将其中的一个子集，比如 dataframename[,30:50] 转换为其原始数值（1、2、3、4、5）。

我知道我应该`as.numeric(levels(f))[f]`在转换一个因子时使用，但我只能在一次转换一个因子时才能完成这项工作。我想一次将它们全部转换。

这行不通：

```
as.numeric(levels(dataframename[,30:50]))[dataframename[,30:50]] 
```

这也不会：

```
sapply(dataframename[,30:50],as.numeric(levels(dataframename[,30:50]))    
[dataframename[,30:50]] 
```

我应该阅读任何想法或东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T23:04:21.797

这是一个较小的例子，但这个想法应该成立。您可以使用`lapply`将转换应用于数据框的每一列，然后直接替换这些列。

```
# make example data
dat <- as.data.frame(lapply(as.data.frame(matrix(seq(2*3), ncol = 3)), factor))

factorconvert <- function(f){as.numeric(levels(f))[f]}
dat[, 2:3] <- lapply(dat[, 2:3], factorconvert)
dat
#  V1 V2 V3
#1  1  3  5
#2  2  4  6
#str(dat)
#'data.frame':  2 obs. of  3 variables:
# $ V1: Factor w/ 2 levels "1","2": 1 2
# $ V2: num  3 4
# $ V3: num  5 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T18:56:23.707

我喜欢`@Dason`的回答。有一种方法可以仅在一行中执行此操作，您可以将分解仅应用于感兴趣的列并使用匿名函数，例如：

```
dataframename[,30:50] <- lapply(dataframename[,30:50], function(f) as.numeric(levels(f))[f]) 
```

请注意，列不必是连续的，即您可以使用典型的 c(col1:col10, col20) 子集语法。

# html - 博客文章的微数据使用

> ID：12868125
> 
> 赞同：0
> 
> 时间：2012-10-12T22:47:02.123
> 
> 标签：html, blogs, microdata

我有一个博客页面，但我不确定我是否正确理解了 schema.org 微数据。我有一些我不确定的案例，我认为讨论它们会很好。我的代码：

```
<body lang="en" itemscope itemtype="http://schema.org/WebPage">
    <section class="blog" itemscope itemtype="http://schema.org/Blog">
        <article class="post" itemprop="blogPosts" itemscope itemtype="http://schema.org/BlogPosting">
            <header>
                <time class="publish-date" datetime="2011-11-06T13:42:04+01:00" itemprop="datePublished">
                    November 2011
                </time>
                <h1 itemprop="name"><a href=blog/post-slug.html" itemprop="url">
                    My Title Here
                </a></h1>
            </header>

            <section itemprop="description">
                <p>The lead text here</p>
            </section>

            <section itemprop="articleBody">
                <p>The other text here</p>
            </section>

            <footer>
                This article is published by
                <span itemprop="author">
                    John Doe
                </span>
                at 
                <time datetime="2012-10-01T15:33:04+02:00" itemprop="datePublished">
                    1 October 2012 on 15:33
                </time>
                and listed in the category 
                <a href=""><span itemprop="articleSection">
                    My Category
                </span></a>.
                The article is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Creative Commons Attribution-ShareAlike 3.0</a>.
            </footer>
        </article>

        <h1>Comments</h1>
        <ul class="comments" itemscope itemtype="http://schema.org/UserComments">
            <li itemprop="comment">
                <span itemprop="creator">Jane Doe</span>
                <time itemprop="commentTime" datetime="2011-05-08T19:30">May 8, 7:30pm</time>
                <article itemprop="commentText">
                    <p>A very good comment here</p>
                </article>
            </li>
        </ul>
    </section>
</body> 
```

1.  我可以有多个 itemprop 属性吗？我也在制作作者版权所有者，但我不确定这是否可能；
2.  评论列表是用户评论范围，单个项目是评论的 itemprop，但我不确定这是否可能；
3.  我将文章中的前导文本和正文分开，这样我就可以轻松地列出博客文章。我将前导表示为“描述”，将正文表示为（完整？）文章正文，但我不确定 articleBody 是指完整的文本（包括前导）还是没有前导的文本。
4.  我还犯过其他错误吗？

非常感谢建议和更正！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:13:58.360

即使是通用的 HTML 语法也禁止在一个元素中使用相同的属性两次。但是，您可以嵌套元素并在嵌套元素中具有相同的属性。

验证器[http://validator.w3.org](http://validator.w3.org)还会在您的代码中发现一些其他标记错误。

似乎没有任何证据表明 schema.org 标记被搜索引擎识别，除非在大型商业或社区网站上找到。

# c# - |= 运算符有什么作用？

> ID：12868127
> 
> 赞同：2
> 
> 时间：2012-10-12T22:47:10.067
> 
> 标签：c#

> **可能重复：**
> [|= (单管道相等) 和 &=(单 & 符号相等) 在 c# (csharp) 中是什么意思](https://stackoverflow.com/questions/6942477/what-does-single-pipe-equal-and-single-ampersand-equal-mean-in-c-sharp)

这是使用它的上下文：

```
long dirtyFlag = 0x0000;

if (erd.SupervisorCompType != orgErd.SupervisorCompType) // change has been made?
{
   dirtyFlag |= 0x0001;
   // etc...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T22:48:27.783

`dirtyFlag |= 0x0001`相当于`dirtyFlag = dirtyFlag | 0x0001`。运算符是按位或`|`运算符。在您的情况下，它设置最低的二进制位。一些进一步的例子：

```
1 | 2 = 3 (0001 | 0010 = 0011)
2 | 4 = 6 (0010 | 0100 = 0110)
5 | 1 = 5 (0101 | 0001 = 0101) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T22:49:20.000

```
a |= b 
```

是相同的

```
a = a | b 
```

这对于很多运算符来说都是一样的，比如`+=`or `/=`。

如果您想了解诸如位运算符之类的`|`，请查看[按位运算和用法](https://stackoverflow.com/questions/1746613/bitwise-operation-and-usage/1746642#1746642)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T22:55:19.683

| 是按位或运算符。它需要两个数值并逐位比较它们，如果其中任何一个位等于 1，则该位位置返回 1

```
// Just as
myIntegerValue += 1;
// is the same as writing
myIntegerValue = myIntegerValue + 1;

// It follows that
dirtyFlag |= 0x0001;
// is the same as writing
dirtyFlag = dirtyFlag | 0x0001; 
```

dirtyFlag 变量跟踪哪些字段被编辑。

我会想象有一系列正在比较的值。脏标志会让你知道哪些值需要修改。

```
value0 = 0x0001 in hexadecimal =  1 = 00000001 in binary
value1 = 0x0002 in hexadecimal =  2 = 00000010 in binary
value2 = 0x0004 in hexadecimal =  4 = 00000100 in binary
value3 = 0x0008 in hexadecimal =  8 = 00001000 in binary
value4 = 0x0010 in hexadecimal = 16 = 00010000 in binary 
```

因此，如果您修改了字段 0 和 4，dirtyFlag 将是

```
00010001 = 17 = 0x0011 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T22:52:10.253

它将对您的dirtyFlag执行[按位或，与执行相同](http://en.wikipedia.org/wiki/Bitwise_operation#OR)

```
dirtyFlag = dirtyFlag | 0x0001; 
```

所以基本上它是一个简短的注释，代表 OR 等于。OR 之前的dirtyFlag 是 0x0000 并且它执行 OR 与 0x0001 因为你的两个值都被认为是十六进制值

```
0000
0001
----
0001 
```

所以基本上它会将你的标志设置为1，这就是它所做的一切

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T22:48:28.357

或等于。此代码将设置 1 位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T22:48:34.080

它的意思是`or equals`

```
dirtyFlag = dirtyFlag | 0x0001; 
```

# javascript - javascript中的交叉脚本权限被拒绝

> ID：12868128
> 
> 赞同：-1
> 
> 时间：2012-10-12T22:47:10.823
> 
> 标签：javascript, scripting, cross-domain, permission-denied

在端口 80 上托管一个应用程序 A，主机名为 mycompany.net

将应用 B 托管在主机名为 sub.mycompany.net 的同一服务器的 8080 上。

应用程序 A 的第 1 页打开应用程序 B 的第 2 页。在应用程序 B 的第 2 页的按钮单击时，我希望能够更新应用程序 A 的第 1 页上的一些文本。

已尝试将应用 B 的第 2 页的 document.domain 设置为 mycompany.net。

没运气。如何克服“权限被拒绝”错误。请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:49:57.277

您还需要确保`document.domain`在第 1 页中设置，即使它已经设置为`mycompany.net`（奇怪，我知道）。原因是除非您写入 ，否则`document.domain`端口号将固定为端口 80（即使它不在属性值中），拒绝 Page 2 访问。写入该属性会将此隐藏端口限制设置为空。有关更多详细信息，请参阅[JavaScript 的同源策略。](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)

# javascript - $(document).ready() 不工作

> ID：12868130
> 
> 赞同：-4
> 
> 时间：2012-10-12T22:47:42.007
> 
> 标签：javascript, jquery

代码：

```
var names = [
    'Abstract',
    'Animals',
    'Beach',
    //etc. (removed because it was too long)
    'Volcano'
];

var links = [
    'http://i.imgur.com/MFkuQ.jpg',
    'http://i.imgur.com/QEt72.png',
    'http://i.imgur.com/nmrqv.jpg',
    //etc. (removed because it was too long)
    'http://i.imgur.com/7uy15.png'
];

$(document).ready(function() {
    alert('test');
    for (i = 0; i < names.length; i++) {
        var row = document.createElement('tr');
        var col = document.createElement('td');
        col.appendChild(document.createTextNode(names[i]));
        row.appendChild(col);
        document.getElementById('imagenametable').appendChild(row);
    }
});

function expandbar(s) {
    resetbars();
    $('#' + s).show('slow');
}
function resetbars() {
    for (i = 1; i <= 3; i++) {
        $('#sec' + i).hide('slow');
    }
} 
```

`$(document).ready()`不工作；当我的页面加载时，我没有收到显示“测试”的警报。帮助？

我已经包含了 jQuery。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T23:09:01.827

```
 <script type="text/javascript" src="project.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script> 
```

应该：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="project.js"></script> 
```

该脚本必须在 jQuery 之后加载。

[我在http://pastebin.com/raw.php?i=YeZ77WNr](http://pastebin.com/raw.php?i=YeZ77WNr)中找到了这段代码，他在[另一个问题](https://stackoverflow.com/questions/12867533/add-new-rows-columns-to-a-table)中发布了该代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T23:00:31.080

尝试为整个事物添加一个闭包：

```
(function($){

   // do stuff.... 

})(jQuery); 
```

有了这个，你不需要打电话`$(document).ready()`，并确保你`$`不会与任何其他图书馆发生冲突。只要确保它就在结束`</body>`标签之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T07:30:23.877

**如果没有正确包含 jquery或者**您的 javascript 代码中有一些错误，它将无法工作。[包括在任何包含的 js 文件中]

```
$(document).ready(function() {
$("#q").keyup(function (e) {
    if(e.keyCode == 13) 
        alert('in');
}); 
```

});

它不起作用，因为我包含在 head 中的一个 js 文件中存在一些错误。

**解决方案？**如果您已经加载了 DOM，请**直接使用您的代码。**或者将它放在可以访问 DOM 的地方 [在页脚中]

```
<script>
$("#q").keyup(function (e) {
    if(e.keyCode == 13) 
        alert('in');
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T16:12:15.793

用这个：

```
jQuery(function($) {  })(jQuery); 
```

或者

```
window.onload = function() {
    /* your code */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-04T07:08:40.597

将javascript放在head标签中

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <script>
            $(document).ready(function () {
            alert('calll');
            });
        </script>
    </head>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-04T08:17:10.440

如果您缺少它，只需包含 JQuery。仅包含 JQuery 脚本就解决了我的相同问题。

```
<script src="~/Scripts/jquery.min.js"></script> 
```

# git - 使用 `git show` 创建和应用跨越多个提交的补丁

> ID：12868131
> 
> 赞同：18
> 
> 时间：2012-10-12T22:47:44.610
> 
> 标签：git, diff, patch, git-show

最近我一直在使用`git show <hash>`创建差异以供以后参考，因为它比输入更容易，`git diff <hash>~ <hash>`并且它显示提交信息（时间戳、用户、哈希、评论）。然后，您可以使用`git apply <filename>`来应用补丁。

我发现这`git show -3`将显示最后三个提交以及相同的额外信息。但是，`git apply`它将作为未暂存的更改将其全部压缩到工作目录中，并丢失所有提交信息。

git中有什么东西可以应用所有这些信息吗？只传递一个标志要比将补丁分成三个文件，分别应用它们并创建新提交要简单得多。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T22:56:06.943

您可以使用`git format-patch`生成代表提交的 MIME 电子邮件，包括其元数据（消息、作者身份等）。然后，您可以使用 重新应用这些`git am`。

因此`git format-patch HEAD~3`将为最后 3 次提交生成 3 个补丁，然后您可以将这些全部通过管道传输到`git am`. 如果您想更简单，`git format-patch --stdout HEAD~3`将在标准输出上发送 MIME 消息，这样您就可以将它们通过管道传输到您想要的位置，而不是处理 3 个单独的文件。

当然，如果您想保存提交以供以后参考，为什么不直接标记它们呢？然后，您可以使用`git cherry-pick`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-20T09:58:20.650

在 Linux 中，您可以使用命令对*delta-generator* ---`git-show`或者`git-diff`，例如 --- 进行管道传输`git-apply`。

（始终使用该`-3`选项启用 3 路合并也可能更安全）

```
> git show <sha1> [<path>] | git apply -3
> git diff <sha1-a> <sha1-b> [<path>] | git apply -3 
```

例子：

*   *在abcdef*中制作的特定文件上应用编辑：

```
> git show abcdef dir/file.c | git apply -3 
```

*   对两个不同提交*abcdef*和*123456的文件应用差异*

`> git diff abcdef 123456 foo.h | git apply -3`

另请参阅：[https ://stackoverflow.com/a/12320940/1329340](https://stackoverflow.com/a/12320940/1329340)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T03:26:19.513

尝试`git bundle`发送历史的特定部分。

# eclipse - Eclipse 错误：“找不到 javaw.exe”

> ID：12868135
> 
> 赞同：0
> 
> 时间：2012-10-12T22:48:10.507
> 
> 标签：eclipse, python-2.7

我最近安装了 Python 2.7 和 Django——作为安装的一部分，我必须添加一个带有我的 Python 安装路径的 PATH 环境变量。在我这样做之后，当我启动 Eclipse 时，我收到一条错误消息，提示找不到“javaw.exe”。我的机器上需要 Python 和 Eclipse，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:55:02.220

你需要使用

`java.exe` 使用以下命令启动它

> \eclipse.exe -vm \bin\java.exe -vmargs -Dcom.sun.management.jmxremote

看[PyDev](http://pydev.org/faq.html)`FAQ`的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:55:32.560

你安装了java运行时吗？如果没有，您需要先安装它。如果你已经有了它，你可能需要调整你的路径。

# php - 我们可以在 symfony2 访问控制中使用正则表达式吗？

> ID：12868140
> 
> 赞同：8
> 
> 时间：2012-10-12T22:48:29.363
> 
> 标签：php, symfony

我们可以在 symfony2 安全性的访问控制中使用正则表达式吗？

```
1) /foo/{id} -- [ROLE_ADMIN]
2) /foo/{id}/profile --  [IS_AUTHENTICATED_ANONYMOUSLY] 
```

另一个问题：

如果我从安全性中删除了 access_control，它仍然会转到安全性模块并尝试`Authenticate`从`Security/Authentication/Provider/AuthProvide`.

理想的行为应该是什么？我认为如果没有，它不应该对资源进行身份`access_control`验证`security.yml`。

我的防火墙配置是：

```
 firewalls:
    main:
            pattern: ^/
            anonymous: true
            myapp: true 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T09:36:36.173

是的，您可以使用正则表达式。

但`/foo/{id}/profile`不会符合你想要的。由于 id 可能是一个整数，因此您必须改用：

```
^/foo/[0-9]+/profile$ 
```

或者

```
^/foo/[^/]+/profile$ 
```

# c++ - 与字符串文字比较会导致未指定的行为？

> ID：12868143
> 
> 赞同：14
> 
> 时间：2012-10-12T22:48:59.223
> 
> 标签：c++

我尝试编写的程序有问题。它只是一个 Windows 控制台程序，我对 C++ 很陌生。这只是我的第四个程序。

我遇到的问题是，当我运行我的程序时，我没有错误，但是在我将在下面突出显示的行中有很多警告说“与字符串文字比较会导致未指定的行为”。

当程序运行而不是添加我想要的数字时，无论我输入什么，它都会给我一个随机的巨大数字。

这是代码：

```
#include <iostream>

using namespace std;

int main()
{
     int hold;
     int i;
     int n;
     i = 6;
     int result;
     int * price;
     char items[100][100];

     if (items == 0)
        cout << "No items can be stored";
    else
    {
        for (n=0; n<i; n++)
        {
            cout << "Item#" << n << ": ";
            cin >> items[n];
        }
        cout <<  "\nYou Entered: \n";
        for (n=0; n<i; n++)
            cout << items[n] << ", ";

    }
    for (n=0; n<i; n++)
    {
        if (items[n] == "ab"){
        price[n] = 2650;
        }

        else if (items[n] == "ae"){
        price[n] = 1925;
        }

        else if (items[n] == "ie"){
        price[n] = 3850;
        }

        else if (items[n] == "bt"){
        price[n] = 3000;
        }

        else if (items[n] == "pd"){
        price[n] = 2850;
        }

        else if (items[n] == "ga"){
        price[n] = 2600;
        }

    }

    for (n=0; n<i; n++)
    {
    result = result + price[n];
    }

    cout << "\nTotal gold for this build: " << result;
    cin >> hold;
    return 0;
} 
```

任何帮助表示赞赏。我可能做错了什么大事。if 语句中的名称当前都是占位符，当我可以让它与它需要工作的裸 6 一起工作时，我将添加更多的 if 语句。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T23:18:09.247

在 C++`==`中，仅在内部实现了原始类型，而数组不是原始类型，因此比较`char[100]`和字符串文字只会将它们比较为 2`char*`或更好地说为 2 个指针，并且由于这 2 个指针不能相等，`items[n] == "ae"`所以永远不可能是真的，而不是这个，您应该使用`std::string`将字符串保存为：

```
std::string items[100];
// initialize items
if( items[n] == "ae" ) ... 
```

或者你应该使用`strcmp`比较字符串，但记住`strcmp`返回 0 相等的字符串，所以你的代码将是：

```
char items[100][100];
// initialize items
if( strcmp(items[n], "ae") == 0 ) ... 
```

还有一点`if (items == 0)`是没用的，因为`items`分配在堆栈上而不是堆上！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T22:51:42.510

首先，`int * price;`是一个悬空指针——你永远不会初始化它。你所要做的：

```
int * price = new int[i]; 
```

其次，通常`i`表示迭代器索引，所以我建议您坚持使用它 - 所以

```
for (i=0; i<n; i++) //some more refactoring needed 
```

第三，您需要比较`strncmp`在您的情况下使用的 char 数组。

**第四也是最重要的**- 使用`std::string`and`std::vector`代替。这是 C++，不是 C。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T07:40:23.830

只是让我有点磕磕绊绊的小事，是单引号和双引号之间的区别，请参阅：[C 或 C++ 中的单引号与双引号](https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c)

我将字符串的第一个字符与双引号而不是单引号进行比较 - 这导致了上面的错误消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T22:51:29.950

您正在比较指针，而不是实际的字符串。使用 C++`string`类代替`char*`（或检查[C 字符串如何工作](http://en.wikipedia.org/wiki/C_string_handling)）。

# java - 连接到 lacewing 服务器聊天

> ID：12868146
> 
> 赞同：0
> 
> 时间：2012-10-12T22:49:17.773
> 
> 标签：java, client, connect, libgdx, liblacewing

我正在尝试使用 lacewing 和用于 android 设备的多媒体融合 2 为我的朋友制作一个聊天程序的端口。

我已经成功创建了一个连接到服务器监听套接字的套接字，但我似乎无法发送数据登录并进入聊天。现在登录只需要一个名称，但即使我发送一个数据字符串，服务器似乎也不会回复或接受该数据来让我通过频道。

我知道我可以用其他方式轻松移植它，比如使用多媒体融合 2 导出器的 NDK，但我只想弄清楚它是如何工作的

PS：我正在使用 Java 和 libgdx 进行开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:47:52.677

您需要阅读 liblacewing 中继协议： [https ://github.com/udp/lacewing/blob/0.2.x/relay/current_spec.txt](https://github.com/udp/lacewing/blob/0.2.x/relay/current_spec.txt)

在初始连接时，您必须发送字节 0 来标识您不是 HTTP 客户端。在此之后，您可以交换正常的协议消息。

您需要发送的第一条消息是连接请求（服务器可能会使用拒绝消息拒绝该请求）。这将是：字节 0（2.1.0 请求）（1.2 大小）字节 0（2.1.0.0 连接请求）字符串“修订 3”（2.1.0.0 连接请求 -> 版本）

当服务器以响应 0 (2.2.0.0 Connect) 响应时，您必须先设置名称，然后才能加入任何频道。这是通过消息 2.1.0.1 SetName 完成的，它与上面的结构相同，但不是 2.1.0.0 的字节 0，而是 2.1.0.1 的字节 1，后跟名称作为字符串而不是协议版本.

然后服务器应该以 2.2.0.1 SetName 响应，假设它接受了您的名称更改请求。如果服务器给您的名称与您请求的名称不同，您应该处理此消息。最后，一旦有了名字，就可以使用 2.1.0.2 JoinChannel 加入频道。如果频道尚不存在（例如，还没有人在聊天中），将使用您在此处指定的标志 - 这些应该与 MMF2 项目文件中的标志相匹配。名称也应该匹配。

毕竟，你还没有完成！您必须处理更多消息等。这几乎就像自己编写 RelayClient 类一样。这是一项艰巨的任务，但有了协议规范，您应该能够完成所有工作。

# ios - UITextView 中的单词位置（RTL 和 LTR 问题）

> ID：12868148
> 
> 赞同：1
> 
> 时间：2012-10-12T22:49:24.673
> 
> 标签：ios, xamarin.ios, uitextview, uitextposition

当我尝试在包含来自希伯来语和英语的字符的单词周围获得矩形框时，我的行为非常奇怪。如果我只使用英语，下面的代码给了我一个正确的矩形框，但是如果我使用从右到左对齐的希伯来字母，这个代码不起作用，并且矩形只包含英语字母......

```
pos = GetPosition (BeginningOfDocument, startIndexOfWord);
pos2 = GetPosition (BeginningOfDocument, endIndexOfWord);
range = GetTextRange (pos, pos2);
rec = GetFirstRectForRange (range); 
```

示例-“Acbדדג”给了我“Acb”矩形，“גדגדAA”给了我“AA”矩形

任何其他键为“”和“_”，其他键的行为与英文键相同。所以即使是“שש”返回我“”矩形。真正奇怪的是“ש ש”返回给我一个正确的矩形。我已经在这上面花了很多时间，所以我希望有人能给出答案。谢谢。

# javascript - jquery select-box - 我怎样才能有两个不同宽度的输入

> ID：12868149
> 
> 赞同：0
> 
> 时间：2012-10-12T22:49:27.543
> 
> 标签：javascript, jquery, css, drop-down-menu

我正在使用这个 jquery 插件来使我的选择下拉框看起来更好。[http://code.google.com/p/select-box/](http://code.google.com/p/select-box/)

这是它的工作原理：http: [//jsfiddle.net/FQKax/1/](http://jsfiddle.net/FQKax/1/)

我想让两个下拉菜单的宽度不同，但我尝试将它们包装在 div 中，尝试破解 js 以赋予它们不同的 id，我能想到的一切，但没有乐趣。

我也很惭愧地承认我似乎无法更改实际下拉位中文本的颜色。我可以更改背景颜色等，但如果我可以更改文本的颜色，我会感到厌烦......很奇怪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:04:15.033

有一个选项可以指定使用什么作为`sbHolder`对象的类名，但您不想更改它，因为您需要重写 CSS。如果他们让你设置一个额外的类来申请，那就太好了，但他们没有。

我只是在选择元素周围放置一个包装器并使用 CSS 覆盖默认宽度[http://jsfiddle.net/FQKax/8/](http://jsfiddle.net/FQKax/8/)

```
.wrapper-one .sbHolder{
    width: 500px;
}

.wrapper-two .sbHolder {
    width: 200px;
}

<div class="wrapper-one">
<select id="language">
    <option value="javascript">Javascript</option>
    <option value="objective-c">Objective C</option>
    <option value="python">Python</option>
</select>
</div>
<br/><br/>

<div class="wrapper-two">
<select id="language2">
    <option value="javascript">Javascript</option>
    <option value="objective-c">Objective C</option>
    <option value="python">Python</option>
</select>
</div> 
```

这需要添加一些标记，@cih 的答案没有。它只需要使用 jQuery 相应地标记每个实例[http://jsfiddle.net/FQKax/37/](http://jsfiddle.net/FQKax/37/)

```
$("#language").selectbox();
$("#language2").selectbox();

$(".sbHolder").each(function(index){
    $(this).addClass('instance-' + index);
});

.instance-0.sbHolder{
    width: 500px;
}

.instance-1.sbHolder {
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:11:04.460

试试这个 [http://jsfiddle.net/FQKax/30/](http://jsfiddle.net/FQKax/30/)

```
<link href="http://select-box.googlecode.com/svn/tags/0.2/jquery.selectbox.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript" src="http://select-box.googlecode.com/svn/tags/0.2/jquery.selectbox-0.2.min.js"></script>

<select id="language">
 <option value="javascript">Javascript</option>
 <option value="objective-c">Objective C</option>
 <option value="python">Python</option>
</select>
<br/><br/>

<select id="language2">
  <option value="javascript">Javascript</option>
  <option value="objective-c">Objective C</option>
  <option value="python">Python</option>
 </select>

  ##### JQUERY #######
      $(function () {
        $("#language").selectbox();
        $("#language2").selectbox();
        $(".sbHolder").each(function(){
          var $langDom = $(this);
          if($langDom.prev().attr('id') == 'language'){
            $langDom.addClass("language_1");  
          } else if($langDom.prev().attr('id') == 'language2') {
            $langDom.addClass("language_2");          
         }
       });
     });

    ###### CSSS TO ADD #####
   .language_1{
     width: 1200px;
    }

    .language_2{
      width: 200px;
     } 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:02:33.283

```
$(".sbHolder").first().addClass("first"); 
```

这将添加一个您可以针对您的第一个复选框的类，有更好的方法来遍历多个选择器，请查看[此链接..](http://api.jquery.com/category/selectors/?rdfrom=http://docs.jquery.com/mw/index.php?title=Selectors&redirect=no)

除此之外，乔回答了你剩下的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T22:56:40.487

对于文本颜色，更改`.sbOptions a:link, .sbOptions a:visited {}`和/或`.sbOptions a:hover, .sbOptions a:focus, .sbOptions a.sbFocus {}`.

对于宽度，`.sbOptions`是您的下拉菜单宽度，并且`.sbHolder {}`是“当前选定”项目的宽度。

# ipad - 用于 UISplittview 的 Ipad TableView

> ID：12868167
> 
> 赞同：0
> 
> 时间：2012-10-12T22:51:55.730
> 
> 标签：ipad, uitableview, uipickerview

我有一个 splittView，在 splittview 的左侧我添加了一个 UITable。

```
@interface LeftViewController : UITableViewController 
```

我还添加了我的 Tableview 所需的所有功能。

我还可以查看数据并将其放入我的表格视图中......

现在我试图添加背景图像或将第一个单元格设置为默认单元格，我注意到我的代码中没有声明 tableview （除了 tableview 函数）

这怎么可能，我现在如何设置背景图像或选择第一个单元格？

我知道这是选择单元格的代码，但是没有 myTableView....

```
- (void)viewDidAppear:(BOOL)animated {
    NSIndexPath *indexPath=[NSIndexPath indexPathForRow:0 inSection:0];
    [myTableView selectRowAtIndexPath:indexPath animated:YES  scrollPosition:UITableViewScrollPositionBottom];
} 
```

我必须创建一个新的表格视图吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:56:45.463

自定义通常在 viewDidLoad 方法中完成。由于您使用的是 UITableViewController，因此您可以通过 tableView 属性访问表格视图。

```
[self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionBottom]; 
```

# html - 绘制 Div 的变色序列的最佳方法是什么？

> ID：12868172
> 
> 赞同：1
> 
> 时间：2012-10-12T22:52:47.297
> 
> 标签：html, colors

我有一个 div 网格，需要从一种颜色逐渐动画到另一种颜色。我担心通过设置颜色`style.backgroundColor`会非常慢，因为十六进制颜色值无休止地转换为三个 RGB 十六进制整数，然后被修改并必须转换回整数。

有没有人成功做到这一点？如果这不是正确的方法，那会是什么？在这里实现一个画布是否有意义，如果是这样，它是否可以作为位于它上面的其他元素的背景元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:32:43.797

只是一些思考的食物，但您可以通过简单地淡入和淡出您想要的背景来避免动画。

编辑：这是一个小提琴：http: [//jsfiddle.net/hKBZ9/1/](http://jsfiddle.net/hKBZ9/1/)

# gnuplot - Splot（等高线，查看地图）并在同一图表上绘图

> ID：12868173
> 
> 赞同：2
> 
> 时间：2012-10-12T22:53:13.203
> 
> 标签：gnuplot

我正在尝试绘制两个重叠图。

第一个是一个简单的 xy 点图：

```
plot myfile u 1:2 
```

第二个是 0 级的等高线图，我可以使用以下命令进行绘制：

```
set contour
unset surface
set view map
set cntrparam levels discrete 0
splot a0 + a1*x + a2*y + a3*x**2 + a4*x*y + a5*y**2 + a6*x**3 + a7*x**2*y + a8*x*y**2 + a9*y**3 
```

`a0`-`a9`是常数

两者都使用相同的 xrange 和 yrange。

如何将它们都绘制在同一张图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:54:16.710

这是一个有点棘手的问题。您可以使用将轮廓写入文件

*未经测试*

```
set table 'datafile'
set contour
#contour options
splot ... with contours
unset table 
```

然后您可以用线条绘制该数据：

```
set term ...
set output ...
set view map
splot myfile u 1:2:(0.0), 'datafile'  u 1:2:3 w lines 
```

# javascript - 如何在 JavaScript 中将 Unix 时间戳转换为 ISO 8601？

> ID：12868176
> 
> 赞同：55
> 
> 时间：2012-10-12T22:53:19.523
> 
> 标签：javascript

我有这样的时间戳`1331209044000`，我想将其转换为 ISO 8601 时间戳。如何使用 JavaScript 转换它？

我使用 jQuery“timeago”插件 - [http://timeago.yarp.com/](http://timeago.yarp.com/)

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-12T23:05:01.167

假设您的时间戳以毫秒为单位（或者您可以轻松转换为毫秒），那么您可以使用[`Date`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)和[`date.toISOString()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)。

```
var s = new Date(1331209044000).toISOString();
s; // => "2012-03-08T12:17:24.000Z" 
```

如果您针对不支持 EMCAScript 第 5 版的旧版浏览器，则可以使用以下问题中列出的策略：[如何在 JavaScript 中输出 ISO 8601 格式的字符串？](https://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T19:32:39.020

我使用的解决方案，感谢提供的链接

```
// convert to ISO 8601 timestamp
function ISODateString(d){
    function pad(n){return n<10 ? '0'+n : n}
    return d.getUTCFullYear()+'-'
        + pad(d.getUTCMonth()+1)+'-'
        + pad(d.getUTCDate())+'T'
        + pad(d.getUTCHours())+':'
        + pad(d.getUTCMinutes())+':'
        + pad(d.getUTCSeconds())+'Z'
}

var d = new Date(parseInt(date));
console.log(ISODateString(d)); 
```

# unix - 在 Unix 中显示按链接计数排序的文件列表

> ID：12868178
> 
> 赞同：0
> 
> 时间：2012-10-12T22:53:41.970
> 
> 标签：unix, terminal, ls

如何在 Unix 终端（Mac OS）中显示按硬链接计数排序的文件列表？

**ls -l**在第二列中显示此数据。如何按此列排序？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:58:12.447

`ls -l | sort -n -k 2`应该为你工作。

# paypal - WP 电子商务：Paypal Express 结帐不适用于 Paypal IPN

> ID：12868183
> 
> 赞同：1
> 
> 时间：2012-10-12T22:54:30.143
> 
> 标签：paypal, wordpress, e-commerce, paypal-ipn

MY Paypal IPN 代码仅在未从 wp 电子商务购物车中结账的情况下执行。如果直接通过贝宝付款，那么我的 IPN 可以正常工作。

但是，如果通过 wp 电子商务结账进行付款，那么我的 IPN 代码将根本不会被执行。

在我的 wp 设置中，我确保完成以下操作：我的 API 用户名、密码和签名。IPN 已启用。

在我的贝宝帐户中，我确保完成了以下操作：设置了 IPN URL 并启用了 IPN。

有没有人有同样的问题？我已经做了很多研究，但我仍然无法解决这个问题。我没有“不良行为插件”，有些人认为这是阻止执行的原因。

谢谢！！

# python - GAE 通过表链接查询

> ID：12868184
> 
> 赞同：0
> 
> 时间：2012-10-12T22:54:36.393
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有这些模型（下）。我想运行一个查询，从 Result 中获取 10 个最近条目，其中“站点”ReferenceProperty 是我的一个，基于站点中的“用户”。

我试过了：

```
user = users.get_current_user()
sites = Site.all().filter('user =', user).order('name')
results = Result.all().filter('site IN', sites).fetch(limit=10) 
```

用户和站点查询有效，但结果一个不起作用，因为“站点”不是列表。

```
from google.appengine.ext import db

class Site(db.Model):

users = db.ListProperty(db.Key)
name = db.StringProperty(required=True)
slug = db.TextProperty(required=True)
url = db.TextProperty(required=True)
page = db.TextProperty()
active = db.BooleanProperty()
blackboard = db.BooleanProperty()

class Result(db.Model):

site = db.ReferenceProperty(Site)
timestamp = db.DateTimeProperty(auto_now_add=True)
status = db.StringProperty(required=True)
reason = db.StringProperty(required=True)
headers = db.TextProperty()
extra_info = db.TextProperty() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:29:31.217

可能是因为您实际上并没有执行站点查询；添加一个 .fetch() 调用，如下所示：

```
sites = Site.all().filter('user =', user).order('name').fetch(limit=10) 
```

# php - 如何解码此图像数据以在 HTML 中显示

> ID：12868185
> 
> 赞同：1
> 
> 时间：2012-10-12T22:54:38.170
> 
> 标签：php, mysql, image, base64

我在 MYSQL 中有这样的图像数据

```
0xFFD8FFE000104A46494600010201004800480000FFE10BA44578696600004D4D002A000000080007011200030000000100010000011A00050000000100000062011B0005000000010000006A01280003000000010002000001310002000000140000007201320002000000140000008687690004000000010000009C000000C80000004800000001000000480000000141646F62652050686F746F73686F7020372E3000323030373A30363A32312032313A33383A35350000000003A001000300000001FFFF0000A00200040000000100000064A0030004000000010000009B0000000000000006010300030000000100060000011A00050000000100000116011B0005000000010000011E012800030000000100020000020100040000000100000126020200040000000100000A760000000000000048000000010000004800000001FFD8FFE000104A46494600010201004800480000FFED000C41646F62655F434D0002FFEE000E41646F626500648000000001FFDB0084000C08080809080C09090C110B0A0B11150F0C0C0F1518131315131318110C0C0C0C0C0C110C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C010D0B0B0D0E0D100E0E10140E0E0E14140E0E0E0E14110C0C0C0C0C11110C0C0C0C0C0C110C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0CFFC00011080080005303012200021101031101FFDD00040006FFC4013F0000010501010101010100000000000000030001020405060708090A0B0100010501010101010100000000000000010002030405060708090A0B1000010401030204020507060805030C33010002110304211231054151611322718132061491A1B14223241552C16233347282D14307259253F0E1F163733516A2B283264493546445C2A3743617D255E265F2B384C3D375E3F3462794A485B495C4D4E4F4A5B5C5D5E5F55666768696A6B6C6D6E6F637475767778797A7B7C7D7E7F711000202010204040304050607070605350100021103213112044151617122130532819114A1B14223C152D1F0332462E1728292435315637334F1250616A2B283072635C2D2449354A317644555367465E2F2B384C3D375E3F34694A485B495C4D4E4F4A5B5C5D5E5F55666768696A6B6C6D6E6F62737475767778797A7B7C7FFDA000C03010002110311003F00F5449243C9C8A7168B322F70655534B9EE3E01252441C8CDC3C6FE917D75793DC01FC579D75FFAF59792FF004B1DC71B1C8FA0D30E3AEDFD2583FEA59EC5CD5BD66CDD009E793A933E69BC4B845F5A7FD6AE86DB057F68DC4CEAD6B88D049F76D47C5EBBD232C96D1955970125AE3B4C0D261FB578C1EA4F7561C5C65DC1521D406F6879997367FABF499FF492E24F0BEE608700E69041E08D4275E3FD3FAFE66258EFB35AEA8B481B5A6044CB46D3ED5E83F56BEB3D7D507D97221B98D048810D781F4A3FE11BF9EC4449698977D2492450A49249253FFFD0F545C4FF008C4EAF6555B302B76D611BAD03F39DF98CFECFD35DB120093C05E49F58F299D42C75A3DAE3758E2D3CB4CFD077F65366745D0165E6321E5CEF09FE0500B6C3063BEAB731FA4FACE00031A15AF4FD5CA4004FB7C47299C4CDEDBC8FA176D98E240F9A67D3689241D0085DABFA0B07F364F9E8A27A25607BFBF642CA7DB0F195BED63B4E5DC93E4B6BA6E75B8B632FADE59635C08703F448D74FED23E6F406805D59F92C918EEA1EDF59D0D07846D69810FB874BCE6750C0A7319FE15B2E03B387B6C6FF009E15A5C9FD40EA0DB316EC133BAB8BDB3CC3FDAE6C7E6FB99BFF00EB8BAC520D4309145492492287FFD1F4BEA56D94F4ECAB6A67A96574BDCD67890D26178BE4E436DCC3756E916417B3F381FDD7FF00557A9FD78CDB70BEACE5DB5074BB654E7B625ADB1CDADCFD7E3B578F576DB6E4B1AE77A8EE1A5BC11E29935F8DED7A5543D1161E48F8ABFBA0F0B3F0AC1452C63DC180097B89846FDA7D38B8B7D6648E64A8C365B66C20440FBD57B6D1C4894BED3411A441E0FC50EEB6A92894808DCEDD20C42CCCFA5AC69B4090396F8857DD9D863DAEB181DE122551EA603F19EFACEF68D641F04112AA2EAFD40CCAA8EB1B0BE59995BAB6CF21CD22C6B35FE4B57A3AF1AFAAB60775EE955B61A1D90D744C086CBE355ECAA58ECD59EEA49249396BFFD2EC7FC6039FFF0036322B6805B6BAB6D93CED0EF51DB3F97EC5E4DD2719EFEAB435BF477833DA17B9753C56E5E0DD439BBB7365A39F737DECFF00A6D5E60CE9CDC6EA4735A36B43E764701DFBBFC951CEEFCD9B14411E20B2EAB539AC7B856EBDE44574B4C49F35CD5B856BB29AC7D35D6DD0B9F5D6F21B225C1EE7BBD57B98EF67D05DFB432C683A150B29683A8994D8E9D194C6EB521C5E8B8F686063C1630FD16927423C377BB6A1F5C3733F4558738105CE0CE48F00B6D8C656746C6B2A8E5869CB1BC4E911F34A97BC79C6B6BBC3454C7B5DF9EE6D85A3407F9CDCD7FD2F6FF36B63A4D6FB0963EB7D25CD2C7D6E248E396ADF652D23F8262D6308810913E0B386AF525E3E8C6B9996DD8E2C7D0F9DC342D2C3BB735DFD95EE5D36CC8B7A7E35B9436DEFA98EB47838805CBCD7A474F6E6F5E6D21BFA3BAD1EAC7768F75ADFF319EE5EA69F0B367E8C5940000EA7D5F45249249EC2FF00FFD3F545C87D63E962AB9CF608AEC97567B0275B2BFF00382EBD42F636CA5EC706905A7E9805BFDA94242C2E84F84DBE758B716FC116ECC1534BB8D3940B5D8C722C762B83E82E26B73782D9E5AAB65E8CDE7513C0D54574DB8D101B145D5923D4B036CB0CB6B7731FBCD553AADF8B558DF56D0C6CFD3F3FDD6A76E660DCCF4DD6B370E58F3B48FECBA1CD59F914F4EAAC171B9AE782769759B8347F247E6A0BA9D0C3CD73E96174CC7244481DD48DC6CB98C1AC91A2CEC3BC653DC699754247A9076E9FBA7F396D7D55C5FB575FC60DD5B4937BCF8067D1FF00C15CC486A691335125DDFA8FD22DA9B6752C9ADD5B9F2296BC169F71FD259B1DEEFE4B575A924A6028534E723236A4924915AFFFD4F545C87F8C3FACEDE97D3FF66E3387DB735A43E35D949F6BDFFC975BFCD57FF5C56FACFF008C2FAB3D2EA79665373B207D0C7C522C2E3E1EAB7F42CFE5FE9178F754EA995D533AFCFCB76EBF21DBDF13B40E19537FE0EA6FB18929EA7EAF87DDD16B78FA75BEC681E41DC2B61DBE0111AEA3C08597F5272DA6BCAC071F7022FA8444877B2D03FAAE0C5B5978CF07D5A7E9771E31FF007E504B42436E07407C1AD998CC25B6963773082D7F711FCA59B76332F25BB01DC7711A1D7FB2C62D6AB3AB70DAFF006B8685A794D65F8CD1BA40F824CA24D30461E391E2385D87F8BCC16B702EEA2E1FA5C87FA4C27B575FEEFF005ED2FDEBCFF3F3864DFE9547701C91C05ABF55BEBDB3A0E6E5F4FCF165DD3A1A6AF48073ABB401EB7B5C59BABBB77FDB8CFF0084471FCCC19E5E9F32FAC24B0B07EBCFD53CE6834F52A6B71FCCBCFA2E07C36E47A6B628CAC5C91BB1EEAEE6F8D6E0E1FF00409533592A4924929FFFD5F3C790DB67CCFE08B3C7F1FEE42B7E91F271054984ED03F224A6EF4BCE381D468CB3A358F02C93FE0DDED7FF009BF4D7A3978220F7E085E5860883001D08E5779D0335D9BD1F1DEE336563D2B7FAD5FB67FCCDAA3C8362CD865B8FAB63331F1EE1EF6EBE2342B1B2BA5D479B5E5BFBA5C56E5C3B9558D1EABC0689F25133B8ECC5663D65C1B0D0B9CB89FB45B63A25EE2E93CF25769D5AA15B6AA5A20BDC24792E53AAE31A2E06347EE8FCAA4C7BB1661A7934B77CC1E516AB363B7D6763C7E733DA7FCE67B9027B78A76B948D7763FE7175DD9FF28E5FF37E9FF3F67D1DDF43E97FE6692CBDC36F7E3F0DC92497FFD6F3D7EA5C3EEFBD335DF7478F74E43B79D0F27B79A6DAE1C34C6878292994F6FC8BA2FA979A6ACCBB09C4EDB87A9583FBCDD1FF00F4573DB5D27471F942360643F0B3B1F2C08F49E0BB9FA27DB67FD17212160AE81A907D2325A1CDD1360B40B20F309DDEE64B756B8483E47851A49610635F8287AB6BA34FA8D62CCF03B56013F12B0FEB4E3018B5DC06ADB003F0702174B6326C7D9ACB8CF0B0BEB1B5D6F4FB80693B61E34FDD28C4EA3CD131E93E4F1E743FED4E393F7849C0CC41FB9201C0F07EE2A66A33FCDF97FDF924B6BB67D13C781FDE49253FFFD9FFED105250686F746F73686F7020332E30003842494D0425000000000010000000000000000000000000000000003842494D03ED000000000010004800000001000100480000000100013842494D042600000000000E000000000000000000003F8000003842494D040D000000000004000000783842494D04190000000000040000001E3842494D03F3000000000009000000000000000001003842494D040A00000000000100003842494D271000000000000A000100000000000000013842494D03F5000000000048002F66660001006C66660006000000000001002F6666000100A1999A0006000000000001003200000001005A00000006000000000001003500000001002D000000060000000000013842494D03F80000000000700000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF03E800000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF03E800000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF03E800000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF03E800003842494D040000000000000200013842494D0402000000000004000000003842494D0408000000000010000000010000024000000240000000003842494D041E000000000004000000003842494D041A00000000033D0000000600000000000000000000009B0000006400000004004D0061007200790000000100000000000000000000000000000000000000010000000000000000000000640000009B00000000000000000000000000000000010000000000000000000000000000000000000010000000010000000000006E756C6C000 
```

现在我正在尝试显示这样的图像...

```
<img src="data:image/jpeg;base64,<?php echo $profile_image;?>"> 
```

但它没有显示。我在哪里犯错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:02:54.743

剥离`0x`then 使用[`hex2bin()`](http://php.net/manual/en/function.hex2bin.php)or`pack()`以获得二进制表示，然后再次对其进行 base64_encode。

```
 $hex = substr($hex, 2);
 $binary =  pack("H*", $hex); 
```

通过以下方式输出：

```
 <img src="data:image/jpeg;base64,<?php echo base64_encode($binary);?>"> 
```

您的片段似乎是一个 JPEG/JFIF 文件，但被截断了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T23:18:46.720

我建议您将图像保存到文件系统并从那里加载，原因如下：

*   它在数据库上很昂贵，并且数据库更难扩展
*   它使用许多系统资源来完成一项次要任务
*   Web Explorer，尤其是 IE8，会给超过 34k 长的 src 报错
*   您可以利用缓存......并且只生成不存在的图像......
*   创建缩略图和不同大小等

如果您解码输出[http://pastebin.com/3MmQ9vcv](http://pastebin.com/3MmQ9vcv)它可能不会显示请参阅 [http://codepad.viper-7.com/hRkAYQ](http://codepad.viper-7.com/hRkAYQ)

[它不会在大多数浏览器中显示](http://codepad.viper-7.com/hRkAYQ)

但是如果你保存它...

```
 file_put_contents("x.jpg",  pack("H*", substr($hex, 2))); 
```

并正常显示你会得到

![在此处输入图像描述](../Images/c72a35afa822e444f9ade644e6f75bc1.png)

# c - C 定义：static void (*var_name)();

> ID：12868193
> 
> 赞同：-1
> 
> 时间：2012-10-12T22:55:28.523
> 
> 标签：c, methods

我下载了一个用 C 编写的代码示例，但不理解一条指令。此外，当我尝试编译代码时，编译器会在我不理解的行中向我抛出一个错误。

代码：

```
// Global vars
static int getting_text = 0;
static char *the_text;  // Definition Part
static void (*text_entered)();  // Definition Part 2

// method
int add_text(unsigned char key)
{
  char msg[] = "x";
  int len;

  if(!getting_text) return 0;
  if(key==8) /* backspace */
  {
    len = strlen(the_text);
    the_text[len-1] = '\0';
  }
  else if(key==13 || key==9) // cr or tab ends
  {
    getting_text = 0;
    text_entered(the_text); // Execution Part
  }
  else
  {
    msg[0] = key;
    strcat(the_text, msg);
  }

  glutPostRedisplay();

  return 1;
} 
```

编译器向我抛出一个关于方法调用中有太多参数的错误。但如果它是静态 void (*xxx)() 或其他东西的方法，我不知道。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:15:05.697

编辑：以下仅适用于 C++。您是否使用 g++ 或其他 C++ 编译器而不是 C 编译器？

text_entered 是一个指向不带任何参数的函数的函数指针，因此会出现错误，因为您正在向它传递一个字符指针。我认为它应该更改为，

```
static void (*text_entered)(char*); 
```

这当然是假设 text_enterered 实际上被设置为一个接受 char* 参数的函数，并且它不仅仅是被错误地调用。

# .net - 线程c#中发生异常时进程未终止

> ID：12868197
> 
> 赞同：2
> 
> 时间：2012-10-12T22:56:11.907
> 
> 标签：.net, multithreading, exception, process, terminate

我有一个 System.Timers.Timer，我发现在 ElapsedEventHandler 中有时会发生异常，但进程并*没有*死，但是执行 ElapsedEventHandler 的线程在发生异常的地方完全死了。不好，因为那时我不知道异常。为什么进程没有终止？如果 ElapsedEventHandler 中发生异常，如何以最佳方式终止进程？

我尝试使用 System.Threading.Timer 进行类似操作，然后进程终止。你能解释一下区别吗？

完整代码如下：

```
class Program
{
    static public void DoBad()
    {
        Console.WriteLine("DoBad enter");
        string s = "hello";
        object o = s;
        int i = (int)o; // Ops! Something unexpected happend here... Exception
        Console.WriteLine("DoBad exit");
    }

    static void DoIt1(object sender, System.Timers.ElapsedEventArgs e)
    {
        Console.WriteLine("\nDoIt1 enter");
        DoBad(); // Process is NOT terminated when excpetion occurs in DoBad, thread just dies quietly but process continues. Why is process not terminated?
        Console.WriteLine("DoIt1 exit");
    }

    static void Test1()
    {
        System.Timers.Timer t = new System.Timers.Timer(2000);
        t.Elapsed += new System.Timers.ElapsedEventHandler(DoIt1);
        t.Enabled = true;
    }

    static public void DoIt2(Object o)
    {
        Console.WriteLine("\nDoIt2 enter");
        DoBad(); // Process terminated when exception occurs in DoBad.
        Console.WriteLine("DoIt2 exit");
    }

    static void Test2()           
    {
        System.Threading.Timer timer = new System.Threading.Timer(DoIt2, null, 0, 2000);
    }

    static void Main(string[] args)
    {
        Test1(); // Process NOT terminated when exception occurs in DoBad
        // Test2(); // Process terminated when exception occurs in DoBad

        // Why is process NOT terminated when running Test1 (but terminated when running Test2)?
        // Want process to die. How to do it in best way?

        Console.WriteLine("Main Sleep");
        System.Threading.Thread.Sleep(11000);
        Console.WriteLine("Main Slept");
    }
} 
```

/ 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:32:46.533

这是按设计完成的，您可以在此处看到： ( [system.timers.timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx) )
在 .NET Framework 2.0 版和更早版本中，Timer 组件捕获并抑制 Elapsed 事件的事件处理程序引发的所有异常。此行为可能会在 .NET Framework 的未来版本中发生更改。

system.threading.timer 不这样做，因此异常被传递并终止进程。如果您想了解异常，那么您应该捕获并记录它。
如果您希望所有工作都在主线程中完成，您可以使用 invoke/begininvoke：

```
form1.Invoke((ThreadStart)delegate
                {
                //do something
                }); 
```

或使用 Windows.forms.timer (winforms) / System.Windows.Threading.DispatcherTimer (WPF)

# javascript - 更改所选选项 选择菜单 .attr

> ID：12868203
> 
> 赞同：-1
> 
> 时间：2012-10-12T22:57:02.480
> 
> 标签：javascript, jquery

我正在尝试使用 JSON 预先填写一个包含选择菜单的表单，我使用密钥作为选择菜单的#id 标签，但我似乎无法让它工作我尝试了不同的选择器但仍然没有运气，

这是我的代码

```
 $(document).ready(function () {

     var p = {
         "weight":"39",
         "height":"1.24",
         "age":"34"
     };

     for (var key in p) {
         if (p.hasOwnProperty(key)) {

             if ($("#" + key + " option [value=" + p[key] + "]").length) {
                 $("#" + key + " option [value=" + p[key] + "]").attr('selected', 'selected');
             }

         }
     }
 });

 <select id="age">
 <option value="33">33</option>
 <option value="34">34</option>
 </select>

 <select id="height">
 <option value="1.25">1.25</option>
 <option value="1.24">1.24</option>
 </select>

 <select id="weight">
 <option value="38">38</option>
 <option value="39">39</option>
 </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:00:50.253

删除“option”和“[value=...”之间的空格 - 空格表示“此元素的子元素”。

`$('option [value="123"]')`匹配（例如）`<option><label value="123">...`

`$('option[value="123"]')`火柴`<option value="123">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:01:28.147

删除选择器*选项*和*属性选择器*之间的空格，您还应该用引号将值括起来，否则您将得到像`1.24`.

```
$("#"+key+ " option[value='"+p[key]+"']").prop('selected', true); 
```

[http://jsfiddle.net/3DLbA/](http://jsfiddle.net/3DLbA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:08:02.923

**[检查小提琴](http://jsfiddle.net/sushanth009/ZrTZA/8/)**

我在代码中看到两个错误..一个是删除之间的空格

```
option[value
      ^
    No space here 
```

接下来是为您的价值添加报价..

```
 if ($("#" + key + " option[value='" + p[key] + "']").length) {
      $("#" + key + " option[value='" + p[key] + "']").attr('selected', 'selected'); 
```

**将您的值用单引号括起来**

You dont have a value of `option[value=1.24]`

```
 It should be `option[value='1.24']`
                                  ^    ^
                                 Missing Quotes here 
```

[http://jsfiddle.net/sushanth009/ZrTZA/8/](http://jsfiddle.net/sushanth009/ZrTZA/8/)

# erlang - 模块中不存在 Erlang 函数？

> ID：12868206
> 
> 赞同：5
> 
> 时间：2012-10-12T22:57:25.067
> 
> 标签：erlang

在 lager.elr （[https://github.com/basho/lager](https://github.com/basho/lager)的主模块）中没有名为“debug”的函数，但我有一个应用程序从 lager 模块调用调试函数，如： lager:debug(Str,参数）

我是 Erlang 的初学者，但我知道当我们从模块 lile “mymodule:myfunction”调用函数时，文件 mymodule.erl 中应该有一个名为“myfunction”的函数，但在这种情况下，当我在 lager.erl 中搜索函数时“调试”我找不到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T09:22:08.307

您没有看到提及的原因`lager:debug/2`是因为 lager 使用了*parse transform*。因此，在编译代码时，它通过 lagers parse 转换提供，并且调用`lager:debug/2`替换为对另一个模块函数的另一个调用。

如果您使用正确的解析转换选项编译您的代码，那么该代码将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:19:05.923

“I GIVE CRAP ANSWERS”很好地解释了这种奇怪的行为。我在这里发布了一个代码，该代码应该向您展示在梁文件中生成的代码是什么：

在外壳中：

实用程序：反编译（[yourfile.beam]）。

```
%% Author: PCHAPIER
%% Created: 25 mai 2010
-module(utility).

%%
%% Include files
%%

%%
%% Exported Functions
%%
-export([decompile/1, decompdir/1]).

-export([shuffle/1]).

%%
%% API Functions
%%

decompdir(Dir) ->
    Cmd = "cd " ++ Dir,
    os:cmd(Cmd),
    L = os:cmd("dir /B *.beam"),
    L1 = re:split(L,"[\t\r\n+]",[{return,list}]),
    io:format("decompdir: ~p~n",[L1]),
    decompile(L1).

decompile(Beam = [H|_]) when is_integer(H) ->
    io:format("decompile: ~p~n",[Beam]),
    {ok,{_,[{abstract_code,{_,AC}}]}} = beam_lib:chunks(Beam ++ ".beam",[abstract_code]),
    {ok,File} = file:open(Beam ++ ".erl",[write]),
    io:fwrite(File,"~s~n", [erl_prettypr:format(erl_syntax:form_list(AC))]),
    file:close(File);

decompile([H|T]) ->
    io:format("decompile: ~p~n",[[H|T]]),
    decompile(removebeam(H)),
    decompile(T);

decompile([]) ->
    ok.

shuffle(P) ->
    Max = length(P)*10000,
    {_,R}= lists:unzip(lists:keysort(1,[{random:uniform(Max),X} || X <- P])),
    R.

%%
%% Local Functions
%%
removebeam(L) ->
    removebeam1(lists:reverse(L)).

removebeam1([$m,$a,$e,$b,$.|T]) ->
    lists:reverse(T);
removebeam1(L) ->
    lists:reverse(L). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T03:31:20.420

您在 lager.erl 文件中看不到它，因为它位于 lager.erl 顶部的 lager.hrl 文件中。Erlang 允许您使用 -include("filename.hrl") 指令包含文件。按照惯例，包含文件以 hrl 扩展名结尾，但它实际上可以是任何东西。

[https://github.com/basho/lager/blob/master/include/lager.hrl](https://github.com/basho/lager/blob/master/include/lager.hrl)

# tsql - 是否可以为 SQL Server 2008 r2 中的列设置最大值

> ID：12868213
> 
> 赞同：1
> 
> 时间：2012-10-12T22:58:25.620
> 
> 标签：tsql, sql-server-2008-r2, set, max

我的问题很简单，但我不确定是否可能。

假设我有一个表，它包含下面的列

```
PokemonHappiness    smallint 
```

是否可以为该列设置最大值？

例如，如果我将最大值设置为 10000 并发送这样的查询

```
--Assume that PokemonHappiness is equal to 9990
update mytable set PokemonHappiness = PokemonHappiness+50 
```

它应该变成 10000 而不是 10040

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T23:18:09.637

如果要在 SQL 表的列上设置最大值，您可以做的一件事是`CHECK`为该列添加具有特定条件的约束：

```
ALTER TABLE dbo.mytable ADD CONSTRAINT CK_HAPPINESS_MAX CHECK (PokemonHappiness <= 10000) 
```

但是，这不会以优雅的方式处理越界输入；如果您的输入违反了`CHECK`约束，SQL 将简单地抛出一个错误。

要正确处理此类输入，您可能应该使用`CASE`其他人建议的表达式，并且可能使用`CHECK`约束作为可以插入的内容的硬绑定（以防输入值未经审核）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T23:12:32.523

当您想将其设置为 10000 时，请不要将其设置为 10040。您的“自动更新”会产生副作用并且非常容易出错（考虑到您会忘记它或有人不知道它）。但你可以使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
UPDATE dbo.MyTable 
SET PokemonHappiness = 
       ( CASE 
           WHEN (PokemonHappiness + 50) > 10000 THEN 10000
           ELSE (PokemonHappiness + 50) 
         END
       ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:56:45.280

一个触发器。我对此进行了测试。

```
CREATE TRIGGER dbo.Table_2update
ON dbo.Table_2
FOR INSERT, UPDATE 
AS BEGIN
  UPDATE dbo.Table_2 SET dbo.Table_2.memberID = 10000
  FROM INSERTED
  WHERE inserted.id = Table_2.id 
    AND dbo.Table_2.memberID > 10000
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T23:12:22.437

你可以用这个来实现

```
update mytable set PokemonHappiness=(CASE WHEN (PokemonHappiness+50) > 10000 
                                      THEN 10000 ELSE PokemonHappiness+50 END) 
```

或有两个查询

```
update mytable set PokemonHappiness=PokemonHappiness+50 

update mytable set PokemonHappiness=10000 where PokemonHappiness > 10000 
```

# c - 在 C 中将“ASCII 十进制”转换为整数

> ID：12868214
> 
> 赞同：-1
> 
> 时间：2012-10-12T22:58:29.357
> 
> 标签：c, integer, ascii

我正在尝试将“ASCII 十进制”转换为整数。“ASCII 十进制”最多可以有 10 位数字，如果没有更多数字，则用空格填充（即`36________`，“_”实际上是空格）。我对 C 语言真的很陌生（我上周才开始学习），我完全不知道该怎么做。

例如：

```
int main(int argc, char *argv[])
{
    int fda = open(argv[2], O_RDONLY);
    char arSize[10];
    read(fd, arSize, 10);
    //convert arSize to an int and store in i
    lseek(archive, i, SEEK_CUR);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T07:37:05.947

您可以使用[`atoi`](http://en.cppreference.com/w/cpp/string/byte/atoi)或[`sscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)。

由于您似乎正在打开文件，因此您可能还会发现它[`fscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)很有帮助。

# tfs - 使用 Team Foundation 服务器对报告项目进行版本控制

> ID：12868215
> 
> 赞同：0
> 
> 时间：2012-10-12T22:58:36.673
> 
> 标签：tfs, visual-studio-2005

当我尝试使用 Team Foundation Server 来对带有 Visual 2005 的报表项目进行版本控制时

![在此处输入图像描述](../Images/7173f07d7cd58c6c7defffd1ba33e385.png)

但是当我尝试保存时，出现以下错误

![在此处输入图像描述](../Images/e08d0ddf601790883c199b45d01bee42.png)

你知道如何解决它吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:06:12.393

您需要先设置工作区。本地文件夹尚未映射到 TFS 中的源代码控制文件夹：http: [//msdn.microsoft.com/en-us/library/ms181383.aspx](http://msdn.microsoft.com/en-us/library/ms181383.aspx)

# c# - 如何在 C# 中创建数据包

> ID：12868219
> 
> 赞同：-2
> 
> 时间：2012-10-12T22:58:47.110
> 
> 标签：c#, packets

我一直想知道一个游戏怎么会产生这样的数据包：

```
22 00 11 00 6D 79 75 73 65 72 6E 61 6D 65 00 00 00 00 00 00 6D 79 70 61 73 73 77 6F 72 64 00 00 00 00 00 00

LENGTH-HEADER-USERNAME-PASSWORD 
```

在游戏代码中，他们的功能应该是什么，或者他们如何编写类似的东西？是不是很简单`Encoding.ASCII.GetBytes("Some String Values")`？虽然我怀疑它是这样写的。

每次我试图问某人时，他都认为我想分析数据包。我不知道 - 我想知道我需要做什么才能在 C# 中创建一个像上面这样的数据包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T23:28:14.977

您放置的示例代码应将字符串转换为字节数组。根据您使用的编码（例如 ASCII、Unicode 等），您可能会从同一字符串中获得不同的字节数组。

当您通过网络发送数据时，通常使用术语数据包。但数据包本身只是字节数组。

你得到的信息是我的用户名，我的密码。下面的 C# 代码将为您翻译。

```
 byte[] packet = new byte[] { 0x22, 0x00, 0x11, 0x00, 0x6D, 0x79, 0x75, 0x73, 0x65, 0x72, 0x6E, 0x61, 0x6D, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6D, 0x79, 0x70, 0x61, 0x73, 0x73, 0x77, 0x6F, 0x72, 0x64, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
        string test = Encoding.ASCII.GetString(packet);
        Console.WriteLine(test);
        Console.ReadKey(); 
```

因此，要创建类似的东西，我会尝试：

```
 const int HeaderLength = 2;
    const int UsernameMaxLength = 16;
    const int PasswordMaxLength = 16;
    public static byte[] CreatePacket(int header, string username, string password)//I assume the header's some kind of record ID?
    {
        int messageLength = UsernameMaxLength + PasswordMaxLength + HeaderLength;
        StringBuilder sb = new StringBuilder(messageLength+ 2);
        sb.Append((char)messageLength);
        sb.Append(char.MinValue);
        sb.Append((char)header);
        sb.Append(char.MinValue);
        sb.Append(username.PadRight(UsernameMaxLength, char.MinValue));
        sb.Append(password.PadRight(PasswordMaxLength, char.MinValue));
        return Encoding.ASCII.GetBytes(sb.ToString()); 
    } 
```

然后使用以下代码调用此代码：

```
byte[] myTest = CreatePacket(17, "myusername", "mypassword"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:09:28.000

当然，使用字符串构建器与数据包结构相去甚远，您必须使用 byte[] 并通过索引将值附加到它。

# postgresql - 加入两个索引表与外键之间是否存在性能差异？

> ID：12868221
> 
> 赞同：2
> 
> 时间：2012-10-12T22:58:59.060
> 
> 标签：postgresql

假设没有参照完整性，那么在 2 个索引列上的连接与在两个索引列上的连接（其中一个已被定义为引用另一个）之间有什么区别（尤其是在性能方面）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:14:02.547

看起来性能提升仅来自添加索引；不是来自外键本身（即外键只提供参照完整性）。

[http://postgresql.1045698.n5.nabble.com/indexes-on-primary-and-foreign-keys-td2054279.html](http://postgresql.1045698.n5.nabble.com/indexes-on-primary-and-foreign-keys-td2054279.html)

您可能会对插入（以及涉及外键字段的更新）产生轻微的性能影响，因为系统需要验证该项目是否存在于引用的表中。

# python - Redis 与 Disk 在缓存应用程序中的性能

> ID：12868222
> 
> 赞同：42
> 
> 时间：2012-10-12T22:59:04.633
> 
> 标签：python, performance, caching, redis, generator

我想在 python 中创建一个 redis 缓存，作为任何有自尊的科学家，我做了一个基准测试来测试性能。

有趣的是，redis 的表现并不好。要么 Python 正在做一些神奇的事情（存储文件），要么我的 redis 版本非常慢。

我不知道这是否是因为我的代码的结构方式，或者是什么，但我期待 redis 比它做得更好。

为了制作 redis 缓存，我将二进制数据（在本例中为 HTML 页面）设置为从文件名派生的密钥，有效期为 5 分钟。

在所有情况下，文件处理都是使用 f.read() 完成的（这比 f.readlines() 快约 3 倍，我需要二进制 blob）。

我的比较中是否缺少某些东西，或者 Redis 真的无法与磁盘匹配？Python 是否将文件缓存在某处，并且每次都重新访问它？为什么这比访问redis快那么多？

我在 64 位 Ubuntu 系统上使用 redis 2.8、python 2.7 和 redis-py。

我不认为 Python 做了什么特别神奇的事情，因为我创建了一个函数，将文件数据存储在 python 对象中并永远产生它。

我有四个分组的函数调用：

读取文件 X 次

调用一个函数来查看 redis 对象是否仍在内存中、加载它或缓存新文件（单个和多个 redis 实例）。

一个创建生成器的函数，该生成器从 redis 数据库中产生结果（具有单个和多个 redis 实例）。

最后，将文件存储在内存中并永久生成。

```
import redis
import time

def load_file(fp, fpKey, r, expiry):
    with open(fp, "rb") as f:
        data = f.read()
    p = r.pipeline()
    p.set(fpKey, data)
    p.expire(fpKey, expiry)
    p.execute()
    return data

def cache_or_get_gen(fp, expiry=300, r=redis.Redis(db=5)):
    fpKey = "cached:"+fp

    while True:
        yield load_file(fp, fpKey, r, expiry)
        t = time.time()
        while time.time() - t - expiry < 0:
            yield r.get(fpKey)

def cache_or_get(fp, expiry=300, r=redis.Redis(db=5)):

    fpKey = "cached:"+fp

    if r.exists(fpKey):
        return r.get(fpKey)

    else:
        with open(fp, "rb") as f:
            data = f.read()
        p = r.pipeline()
        p.set(fpKey, data)
        p.expire(fpKey, expiry)
        p.execute()
        return data

def mem_cache(fp):
    with open(fp, "rb") as f:
        data = f.readlines()
    while True:
        yield data

def stressTest(fp, trials = 10000):

    # Read the file x number of times
    a = time.time()
    for x in range(trials):
        with open(fp, "rb") as f:
            data = f.read()
    b = time.time()
    readAvg = trials/(b-a)

    # Generator version

    # Read the file, cache it, read it with a new instance each time
    a = time.time()
    gen = cache_or_get_gen(fp)
    for x in range(trials):
        data = next(gen)
    b = time.time()
    cachedAvgGen = trials/(b-a)

    # Read file, cache it, pass in redis instance each time
    a = time.time()
    r = redis.Redis(db=6)
    gen = cache_or_get_gen(fp, r=r)
    for x in range(trials):
        data = next(gen)
    b = time.time()
    inCachedAvgGen = trials/(b-a)

    # Non generator version    

    # Read the file, cache it, read it with a new instance each time
    a = time.time()
    for x in range(trials):
        data = cache_or_get(fp)
    b = time.time()
    cachedAvg = trials/(b-a)

    # Read file, cache it, pass in redis instance each time
    a = time.time()
    r = redis.Redis(db=6)
    for x in range(trials):
        data = cache_or_get(fp, r=r)
    b = time.time()
    inCachedAvg = trials/(b-a)

    # Read file, cache it in python object
    a = time.time()
    for x in range(trials):
        data = mem_cache(fp)
    b = time.time()
    memCachedAvg = trials/(b-a)

    print "\n%s file reads: %.2f reads/second\n" %(trials, readAvg)
    print "Yielding from generators for data:"
    print "multi redis instance: %.2f reads/second (%.2f percent)" %(cachedAvgGen, (100*(cachedAvgGen-readAvg)/(readAvg)))
    print "single redis instance: %.2f reads/second (%.2f percent)" %(inCachedAvgGen, (100*(inCachedAvgGen-readAvg)/(readAvg)))
    print "Function calls to get data:"
    print "multi redis instance: %.2f reads/second (%.2f percent)" %(cachedAvg, (100*(cachedAvg-readAvg)/(readAvg)))
    print "single redis instance: %.2f reads/second (%.2f percent)" %(inCachedAvg, (100*(inCachedAvg-readAvg)/(readAvg)))
    print "python cached object: %.2f reads/second (%.2f percent)" %(memCachedAvg, (100*(memCachedAvg-readAvg)/(readAvg)))

if __name__ == "__main__":
    fileToRead = "templates/index.html"

    stressTest(fileToRead) 
```

现在结果：

```
10000 file reads: 30971.94 reads/second

Yielding from generators for data:
multi redis instance: 8489.28 reads/second (-72.59 percent)
single redis instance: 8801.73 reads/second (-71.58 percent)
Function calls to get data:
multi redis instance: 5396.81 reads/second (-82.58 percent)
single redis instance: 5419.19 reads/second (-82.50 percent)
python cached object: 1522765.03 reads/second (4816.60 percent) 
```

结果很有趣，因为 a) 生成器每次都比调用函数快，b) redis 比从磁盘读取要慢，c) 从 python 对象读取速度快得离谱。

为什么从磁盘读取比从 redis 读取内存文件要快得多？

编辑：更多信息和测试。

我将功能替换为

```
data = r.get(fpKey)
if data:
    return r.get(fpKey) 
```

结果相差不大

```
if r.exists(fpKey):
    data = r.get(fpKey)

Function calls to get data using r.exists as test
multi redis instance: 5320.51 reads/second (-82.34 percent)
single redis instance: 5308.33 reads/second (-82.38 percent)
python cached object: 1494123.68 reads/second (5348.17 percent)

Function calls to get data using if data as test
multi redis instance: 8540.91 reads/second (-71.25 percent)
single redis instance: 7888.24 reads/second (-73.45 percent)
python cached object: 1520226.17 reads/second (5132.01 percent) 
```

在每个函数调用上创建一个新的 redis 实例实际上对读取速度没有明显影响，从测试到测试的变化大于增益。

Sripathi Krishnan 建议实施随机文件读取。正如我们从这些结果中看到的那样，这就是缓存开始真正发挥作用的地方。

```
Total number of files: 700

10000 file reads: 274.28 reads/second

Yielding from generators for data:
multi redis instance: 15393.30 reads/second (5512.32 percent)
single redis instance: 13228.62 reads/second (4723.09 percent)
Function calls to get data:
multi redis instance: 11213.54 reads/second (3988.40 percent)
single redis instance: 14420.15 reads/second (5157.52 percent)
python cached object: 607649.98 reads/second (221446.26 percent) 
```

文件读取存在巨大的可变性，因此百分比差异并不是加速的良好指标。

```
Total number of files: 700

40000 file reads: 1168.23 reads/second

Yielding from generators for data:
multi redis instance: 14900.80 reads/second (1175.50 percent)
single redis instance: 14318.28 reads/second (1125.64 percent)
Function calls to get data:
multi redis instance: 13563.36 reads/second (1061.02 percent)
single redis instance: 13486.05 reads/second (1054.40 percent)
python cached object: 587785.35 reads/second (50214.25 percent) 
```

我使用 random.choice(fileList) 在每次通过函数时随机选择一个新文件。

如果有人想尝试一下，完整的要点就在这里 - [https://gist.github.com/3885957](https://gist.github.com/3885957)

编辑编辑：没有意识到我正在为生成器调用一个文件（尽管函数调用和生成器的性能非常相似）。这也是来自生成器的不同文件的结果。

```
Total number of files: 700
10000 file reads: 284.48 reads/second

Yielding from generators for data:
single redis instance: 11627.56 reads/second (3987.36 percent)

Function calls to get data:
single redis instance: 14615.83 reads/second (5037.81 percent)

python cached object: 580285.56 reads/second (203884.21 percent) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-13T07:44:39.287

这是一个苹果与橘子的比较。见[http://redis.io/topics/benchmarks](http://redis.io/topics/benchmarks)

Redis 是一种高效的**远程**数据存储。每次在 Redis 上执行命令时，都会向 Redis 服务器发送一条消息，如果客户端是同步的，则阻塞等待回复。因此，除了命令本身的成本之外，您还将支付网络往返或 IPC 的费用。

在现代硬件上，网络往返或 IPC 与其他操作相比非常昂贵。这是由于几个因素：

*   媒体的原始延迟（主要用于网络）
*   操作系统调度程序的延迟（在 Linux/Unix 上不保证）
*   内存缓存未命中是昂贵的，并且当客户端和服务器进程被调度进/出时，缓存未命中的概率会增加。
*   在高端盒子上，NUMA 副作用

现在，让我们回顾一下结果。

比较使用生成器的实现和使用函数调用的实现，它们不会生成相同数量的 Redis 往返。使用生成器，您只需：

```
 while time.time() - t - expiry < 0:
        yield r.get(fpKey) 
```

所以每次迭代1次往返。使用该功能，您可以：

```
if r.exists(fpKey):
    return r.get(fpKey) 
```

所以每次迭代 2 次往返。难怪发电机更快。

当然，您应该重用相同的 Redis 连接以获得最佳性能。运行系统地连接/断开连接的基准是没有意义的。

最后，关于 Redis 调用和文件读取之间的性能差异，您只是将本地调用与远程调用进行比较。文件读取由 OS 文件系统缓存，因此它们是内核和 Python 之间的快速内存传输操作。这里不涉及磁盘 I/O。使用 Redis，您必须支付往返的费用，因此速度要慢得多。

# php - 带有 php 循环的 pdo mysql 只返回 1 行

> ID：12868229
> 
> 赞同：0
> 
> 时间：2012-10-12T23:00:03.793
> 
> 标签：php, mysql, pdo

更新2 - 我设法通过使用子查询来做到这一点，而不是每个数字都有一个$config var，我在我的articles_category 表中添加了一行以获得1或0，如果它有1，则像这样包含它：

```
 $db->sqlquery("SELECT a . * , c.`category_name`
FROM `articles` a
LEFT JOIN `articles_categorys` c ON c.`category_id` = a.`category_id`
WHERE a.`active` =1
AND a.`category_id`
IN (
(

SELECT `category_id`
FROM `articles_categorys`
WHERE `show_in_rss` =1
)
)
ORDER BY a.`date` DESC
LIMIT ?", array($limit)); 
```

UPDATE1 - 我有一个部分解决方案，我需要第二位的帮助（我什至不知道这是否正确，但它让我发疯）。

如果我这样做；

```
 $category_array = explode(',', $config['article_rss_categorys']);

$in_sql = '';
$counter = 0;
// count how many there are
foreach($category_array as $cat)
{

    if ($counter == 0)
    {
        $in_sql .= '?';
    }

    else
    {
        $in_sql .= ',?';
    }

    $counter++;
} 
```

我可以把“$in_sql”放在IN()里面给我个人吗？它有效。现在我需要找到一种方法将 $config['article_rss_categorys'] 内部的每个数字都放入查询的第二部分？

原来的;

$db 是我的数据库类/连接（所有函数都在这个类中）。

好的，这是我的查询：

```
$db->sqlquery("
    SELECT a.*, c.`category_name`
    FROM `articles` a LEFT JOIN `articles_categorys` c
    ON c.`category_id` = a.`category_id`
    WHERE a.`active` = 1
    AND a.`category_id` IN (?)
    ORDER BY a.`date`
    DESC LIMIT ?", array($config['article_rss_categorys'], $limit)
); 
```

我检查了`$config['article_rss_categorys']`is set and its `0,1,2,4,6,7`, also `$limit`is set and it's `15`。

这是我的查询代码（在 $db 调用的 mysql 类中）；

```
 try
    {
        $this->STH = $this->database->prepare($sql);

        foreach($objects as $k=>$p)
        {
            // +1 is needed as arrays start at 0 where as ? placeholders start at 1 in PDO
            if(is_numeric($p))
            {
                $this->STH->bindValue($k+1, (int)$p, PDO::PARAM_INT);
            }
            else
            {
                $this->STH->bindValue($k+1, $p, PDO::PARAM_STR);
            }
        }

        return $this->STH->execute();

        $this->counter++;
    }

    catch (PDOException $e)
    {
        $core->message($e->getMessage());
    } 
```

我用正确的东西替换了 phpmyadmin 中的查询，`?`它确实有效，所以数据库很好。

然后我尝试像这样获取并输出结果；

```
while ($line = $db->fetch())
{
    // make date human readable
    $date = $core->format_date($line['date']);

    $output .= "
        <item>
            <title>{$line['category_name']} > {$line['title']}</title>
            <link>http://www.prxa.info/index.php?module=articles_comments&amp;aid={$line['article_id']}</link>
            <pubDate>{$date}</pubDate>
            <guid>http://www.prxa.info/index.php?module=articles_comments&amp;aid={$line['article_id']}</guid>
        </item>";
} 
```

这是我的获取代码（在 $db 调用的 mysql 类中）；

```
public function fetch()
{
    $this->STH->setFetchMode(PDO::FETCH_ASSOC); 
    return $this->STH->fetch();
} 
```

它只返回一行，最后一行。它应该循环遍历它们，最多可达 15 个。

我不明白为什么它只得到一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:05:44.730

[PDOStatement::fetch()](http://www.php.net/manual/en/pdostatement.fetch.php)只返回一行，你需要[PDOStatement::fetchAll()](http://www.php.net/manual/en/pdostatement.fetchall.php)。

见[http://www.php.net/pdo](http://www.php.net/pdo)

# c# - AutoFixture 作为 Automocking 容器与 Automocking 的区别？

> ID：12868235
> 
> 赞同：12
> 
> 时间：2012-10-12T23:00:41.400
> 
> 标签：c#, .net, moq, autofixture, automocking

我开始使用起订量，但据我了解，即使我真的不关心它们，我也总是必须模拟所有可以调用的方法。

有时需要很长时间来模拟你忘记你想要做什么的东西。所以我一直在研究自动模拟，但我不确定我应该使用哪个。

[AutoFixture 作为自动模拟容器](http://blog.ploeh.dk/2010/08/19/AutoFixtureAsAnAutomockingContainer.aspx)

[自动模拟](http://code.google.com/p/moq-contrib/wiki/Automocking)

我根本不知道如何使用第一个。我有点得到第二个，但从未真正尝试过。

我不确定一个是否比另一个更好。我唯一知道的是我已经在使用 AutoFixtures，这是第一个依赖项。

因此，从长远来看，使用第一个可能是有意义的，但就像我说的那样，我找不到任何关于如何使用它的基本教程。

**编辑**

我正在尝试遵循“Nikos Baxevanis”示例，但遇到了错误。

```
Failure: System.ArgumentException : A matching constructor for the given arguments was not found on the mocked type.
  ----> System.MissingMethodException : Constructor on type 'DatabaseProxyded46c36c8524889972231ef23659a72' not found.

var fixture = new Fixture().Customize(new AutoMoqCustomization());
        var fooMock = fixture.Freeze<Mock<IFoo>>();
       // fooMock.Setup(x => x.GetAccounts(It.IsAny<IUnitOfWork>()));
        var sut = fixture.CreateAnonymous<AdminService>();

        sut.Apply();
        fooMock.VerifyAll(); 
```

我认为这是因为我的 petapoco unitOfWork 财产

```
PetaPoco.Database Db { get; } 
```

不知道我是否必须以某种方式或什么来模拟这个。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-13T07:42:38.677

虽然我从未使用过`moq-contrib Automocking`，但我可能会提供一些关于使用[AutoFixture](https://github.com/autofixture/autofixture)作为自动模拟容器的信息。

目前支持 Moq、Rhino Mocks、FakeItEasy 和 NSubstitute。只需安装适当的扩展[AutoMoq](http://nuget.org/packages/AutoFixture.AutoMoq)、[AutoRhinoMocks](http://nuget.org/packages/AutoFixture.AutoRhinoMocks)、[AutoFakeItEasy](http://nuget.org/packages/AutoFixture.AutoFakeItEasy)和[AutoNSubstitute](http://nuget.org/packages/AutoFixture.AutoNSubstitute)。

一旦你安装了 Auto Mocking 的扩展之一，*额外的*调用是：

```
var fixture = new Fixture()
    .Customize(new AutoMoqCustomization()); 
```

*（或者如果您使用的是 Rhino Mocks）*

```
var fixture = new Fixture()
     .Customize(new AutoRhinoMockCustomization()); 
```

*（或者如果您使用的是 FakeItEasy）*

```
var fixture = new Fixture()
     .Customize(new AutoFakeItEasyCustomization()); 
```

*（或者如果您使用的是 NSubstitute）*

```
var fixture = new Fixture()
     .Customize(new AutoNSubstituteCustomization()); 
```

### 示例 1

```
public class MyController : IController
{
    public MyController(IFoo foo)
    {
    }
}

public interface IFoo
{
} 
```

下面是如何使用 AutoFixture 创建`MyController`类的实例：

```
var fixture = new Fixture()
    .Customize(new AutoMoqCustomization());

var sut = fixture.CreateAnonymous<MyController>(); 
```

现在，如果您检查`sut`变量，您将看到它`IFoo`是一个模拟实例*（具有类似于 Castle.Proxies.IFooProxy 的类型名称）*。

### 示例 2

这个例子扩展了前面的例子。

您可以指示 AutoFixture 使用您自己的、预先配置的、模拟的实例：

```
var fooMock = fixture.Freeze<Mock<IFoo>>();
// At this point you may setup expectation(s) on the fooMock.

var sut = fixture.CreateAnonymous<MyController>();
// This instance now uses the already created fooMock.
// Verify any expectation(s). 
```

* * *

基本上就是这样——但它可以走得更远！

下面是前面使用带有 xUnit.net 扩展名的 AutoFixture[的](http://blog.ploeh.dk/2010/10/08/AutoDataTheoriesWithAutoFixture.aspx)[示例](http://nuget.org/packages/AutoFixture.Xunit/)。

### 示例 1

```
[Theory, AutoMoqData]
public void TestMethod(MyController sut)
{
    // Start using the sut instance directly.
} 
```

### 示例 2

```
[Theory, AutoMoqData]
public void TestMethod([Frozen]Mock<IFoo> fooMock, MyController sut)
{
   // At this point you may setup expectation(s) on the fooMock.
   // The sut instance now uses the already created fooMock.
   // Verify any expectation(s).
} 
```

> [您可以在此](http://nikosbaxevanis.com/2012/07/31/autofixture-xunit-net-and-auto-mocking/)博客文章中找到更多信息，其中包含与 AutoFixture、xUnit.net 和 Auto Mocking 相关的所有内容的链接。

希望有帮助。

# java - 随机数总是以相同的顺序

> ID：12868239
> 
> 赞同：0
> 
> 时间：2012-10-12T23:01:15.313
> 
> 标签：java, random

> **可能重复：**
> [当我设置种子时，Java random 总是返回相同的数字？](https://stackoverflow.com/questions/5533191/java-random-always-returns-the-same-number-when-i-set-the-seed)

我正在使用 Java 的 Random 类和`nextInt()`获取随机数的方法。但似乎数字总是按相同的顺序排列。有没有办法来解决这个问题？我知道一些随机生成器采用种子值，然后您使用系统计时器作为种子。

代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:08:27.570

这是您真正需要参考的内容[https://stackoverflow.com/a/11705615/1143977](https://stackoverflow.com/a/11705615/1143977)。从参考链接中引用我的答案。

有两个问题导致您看到的内容。首先是代码为 Random 实例设置种子值。第二个是实例方法“random”实例化一个新的 Random 对象，然后每次都立即将其种子设置为相同的种子。这两者的结合保证了对于相同的 i 值，“随机”方法将始终返回相同的值，并且它始终是种子始终生成的序列中的第一个。

假设设置种子是强制性的，为了每次都获取序列中的下一个值而不是序列的相同第一个值，Random 的 randnum 实例不能在其下一个方法被调用之前每次都设置其种子。要解决此问题，请将 Random 的 randnum 局部变量实例从随机实例方法的范围移动到类范围。其次，仅在为 random 分配一个 Random 实例或仅从它获得相同的结果序列以重新开始时才设置种子。类 Random 的 setSeed(long seed) 实例方法不能在类范围内执行，因此构造函数必须使用带有 long seed 参数的 Random 构造函数来设置它。以下代码显示了更改：

```
public class RandomDemo { // arbitrary example class name
    // lots of class related stuff may be here...

    // still inside the class scope...
    // private is a good idea unless an external method needs to change it
    private Random randnum = new Random(123456789L);
    // the seed guarantees it will always produce the same sequence
    // of pseudo-random values when the next methods get called
    // for unpredicable sequences, use the following constructor instead:
    // private Random randnum = new Random();

    // lots of code may be here...

    // publicly exposed instance method for getting random number
    // from a sequence determined by seed 123456789L
    // in the range from 0 through i-1
    public int randnum(int i) {
        // don't set the seed in here, or randnum will return the exact same integer
        // for the same value of i on every method call
        // nextInt(i) will give the next value from randnum conforming to range i
        return randnum.nextInt(i);
    } // end randnum

    // lots of more code may be here...

} // end class RandDemo 
```

如前所述，上述内容将为您提供确切问题的确切解决方案。然而，考虑到它的作用，使用强制种子似乎不寻常。

下面解释了更多关于 Random、Random 的种子以及为什么有提供种子的规定。

Random 有两个构造函数：

```
Random() 
```

和

```
Random(long seed) 
```

和一个实例方法

```
setSeed(long seed) 
```

所有这些都会影响从 Random 实例获得的数字序列。实例方法，

```
setSeed(long seed) 
```

将 Random 对象设置为与它刚刚使用与构造函数参数相同的种子实例化时的相同状态。仅使用种子值的低 48 位。

如果 Random 对象在没有种子的情况下被实例化，则种子将与系统时间相同，以毫秒为单位。这确保了除非两个 Random 对象在同一毫秒内被实例化，否则它们将产生不同的伪随机序列。仅使用种子值的低 48 位。这会导致不可预测的伪随机序列。每次调用下一个方法时都不需要和浪费计算资源来获取一个新的 Random 实例。

提供了 Random 的种子参数，以便可以实例化一个 Random 对象，该对象产生可重复的序列。对于给定的种子，无论何时使用该种子，都保证下一个方法中的值序列是相同的序列。这对于测试将使用伪随机序列的软件很有用，其中结果必须是可预测和可重复的。在操作中创建不同的不可预测的伪随机序列是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:14:31.837

要在 Android 中生成随机数，`java.util.Random`可以使用 class。

此类`java.util.Random`提供生成不同类型的伪随机数的方法，例如 int、long、double 和 float。

它支持两个公共构造函数：

1.  `Random()`- 构造一个以当前时间（以毫秒为单位）为初始状态的随机生成器。

2.  `Random(long seed)`- 构造一个以给定种子为初始状态的随机生成器。

有关更多详细信息，请参阅以下链接：

[在Android中生成随机数](http://android-er.blogspot.com/2010/04/generate-random-number-in-android.html)

[生成随机数，Random()](http://android-er.blogspot.com/2011/10/generate-random-number-random.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:04:03.867

这应该每次都给你随机数：

```
Time t = new Time();
t.setToNow();
mRandom = new Random(t.toMillis(false));
int rand = mRandom.nextInt(10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T23:05:53.077

仅创建一次 Random 对象（例如在应用程序的 onCreate 处），并且每次启动应用程序时它都会为您提供相对随机的结果。

# ant - 在 ant build.xml 文件中使用外部 jar 文件

> ID：12868242
> 
> 赞同：1
> 
> 时间：2012-10-12T23:01:36.850
> 
> 标签：ant

我是全新的`Ant`，我不知道如何`classpath`在`Ant`. 我写了一个`Java`类来为我编写一些脚本，我想将它部署为一个`task`in `Ant`. 该类`commons-codec-1.2.jar`用作外部库，在其他方面为我做一些`Unicode`和`MD5`任务。我已经发布了我的`build.xml`文件。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
    <project name="TcZip" basedir="." default="jar">

    <property name="src.dir" value="src" />
    <property name="classes.dir" value="classes" />
    <property name="library.dir" value="library" />

    <path id="external.classpath">
        <pathelement location="${library.dir}/commons-codec-1.2.jar" />
    </path>

    <target name="clean" description="Delete all generated files">
    <delete dir="classes" />
    <delete file="TcZip.jar" />
    </target>

    <target name="compile" description="Compiles the task">
    <mkdir dir="${classes.dir}" />
    <javac srcdir="src" destdir="classes" />
        <classpath>
            <path refid="external.classpath" />
        </classpath>
    </target>

    <target name="jar" description="JARs the Task" depends="compile">
    <jar destfile="TcZip.jar" basedir="classes" />
    </target>

    <target name="use" description="Use the task" depends="jar">
    <taskdef name="tczip" classname="ZipComparision" classpath="${ant.project.name}.jar" />
    <tczip />
    </target>

</project> 
```

在我的`task`目录中，我有：

```
+task
 - build.xml
 - classes
 - library
 - src 
```

`library`并`classes`包含该`commons-codec-1.2.jar`文件。但是，如`build.xml`文件中所示，我`<property>`为`library`. 当我执行时，`ant compile`我得到：

```
compile:
    [javac] C:\workspace\task\build.xml:19: warning: 'includeantr
untime' was not set, defaulting to build.sysclasspath=last; set to false for rep
eatable builds
    [javac] Compiling 3 source files to C:\workspace\task\classes

    [javac] C:\workspace\task\src\Tczip.java:18: error: package o
rg.apache.commons.codec.binary does not exist
    [javac] import org.apache.commons.codec.binary.Hex;
    [javac]                                       ^
    [javac] C:\workspace\task\src\Tczip.java:190: error: cannot f
ind symbol
    [javac]     mdEnc = new String( Hex.encodeHex( digest ));
    [javac]                         ^
    [javac]   symbol:   variable Hex
    [javac]   location: class Tczip
    [javac] C:\workspace\task\src\Tczip.java:254: error: cannot f
ind symbol
    [javac]          mdEnc = new String( Hex.encodeHex( digest ));
    [javac]                              ^
    [javac]   symbol:   variable Hex
    [javac]   location: class Tczip
    [javac] 3 errors

BUILD FAILED
C:\workspace\task\build.xml:19: Compile failed; see the compiler
error output for details. 
```

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:24:26.360

将指令替换`location`为.`pathelement``path`

# java - 如何填充有一个json响应？

> ID：12868250
> 
> 赞同：0
> 
> 时间：2012-10-12T23:02:49.813
> 
> 标签：java, json, jsp, struts2

我正在使用 Struts 2。我正在尝试使用来自数据库的数据填充组合框（选择），这些值由另一个组合框定义。

当我从第一个组合框中选择一个状态时，第二个必须从数据库加载数据。

这就是我所拥有的：

JSP：

```
<script type="text/javascript">
            function cargarMunicipios(estado){
                console.log(estado);
                var estado="estado="+estado;
               $.getJSON('getMunicipios'),estado,function(data){
                    $('.result').html(''+data.estados+'');
                    $.each(data.estados,function(index,value){
                        var opcion=new Option(value);
                        var municipio=document.getElementById("municipios");
                        console.log(value);
                        municipio.add(opcion)
                    })
                } 
            }
        </script>

...

<s:select list="estados" name="estados" listValue="nombre"
                      listKey="nombre" label="Estado" id="estados" onchange="cargarMunicipios(this.value)"/>
            <s:select list="municipios" name="municipios" listValue="nombre"
                      listKey="nombre" label="Municipio" id="municipios"
                      /> 
```

这是对 struts.xml 的操作：

```
 <action name="getMunicipios" class="actions.PrepararMedicosAction" method="loadMunicipios">
            <result type="json">
                <param name="root">nombre</param>
            </result>        
        </action> 
```

这是动作调用的方法：

```
public String loadMunicipios(){
        municipios=fachada.buscaMunicipios(new Estado(Integer.SIZE, estado, ""));
        return SUCCESS;
    } 
```

但是，当我选择一个状态时，第二个保管箱没有被填充，在 Web 控制台上，我将 http 请求显示为“Ok”。

我对 Ajax 和 Struts 2 很陌生..请帮助我..谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:09:49.837

看起来您正在使用 jQuery。尝试这样的事情：

```
$.getJSON('getMunicipios'),estado,function(data){
    $('.result').html(''+data.estados+'');
    $.each(data.estados,function(index,value){
        var opcion= $('<option>').attr('value', value);
        var municipio = $("#municipios");
        console.log(value);
        municipio.append(opcion);
    });
}); 
```

# ios5 - NSInvalidUnarchiveOperationException 与 ContainerView

> ID：12868255
> 
> 赞同：12
> 
> 时间：2012-10-12T23:03:29.520
> 
> 标签：ios5, storyboard, ios6, segue

使用带有嵌入序列的 ContainerView 我得到了这个：

***由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 UIStoryboardEmbedSegueTemplate 的类”

我的搜索没有提供很多，所以：这是否意味着“对不起，仅在 iOS6 上”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T08:44:33.643

是的，这似乎是“仅限 iOS 6”的功能。我也没有在 iOS 5 中看到它......但到目前为止在 Docs 中没有找到它。

# apache - Apache SSL Plone 4.2 随机代理错误

> ID：12868256
> 
> 赞同：0
> 
> 时间：2012-10-12T23:03:29.647
> 
> 标签：apache, ssl, proxy, plone

我使用 Plone 4.2 和 SSL 设置了 Apache，在`ssl.conf`Apache 文件中具有以下规则：

```
RewriteEngine On
ProxyVia On
Redirect permanent / https://mywebsite.com/PloneSite/subfolder
RewriteRule ^/(.*) http://localhost:8080/VirtualHostBase/https/%{SERVER_NAME}:443/VirtualHostRoot/PloneSite/subfolder/$1 [L,P] 
```

但是，大约一天两次（似乎是随机的），该站点会变得非常缓慢并最终开始提供 502 错误（代理错误）。唯一似乎修复它的方法是使用“plonectl restart”重新启动 plone。我真的不知道是什么原因造成的，上面是否有任何似乎不正确的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:56:08.697

这不是代理设置问题；Plone 的 Apache 代理规则要么有效，要么无效。代理错误是由 Plone 不再响应引起的，这就是为什么重新启动 Plone 可以暂时解决问题。

您需要弄清楚为什么 Plone 停止响应。这可能有多种原因，您必须查明发生了什么。

*   在您的网站的一部分中，您可能会遇到一个编程错误，它会永远占用一个线程。一旦你用完了线程，Plone 就不能再处理正常的请求并且你得到你的代理错误。[`Products.signalstack`](http://pypi.python.org/pypi/Products.signalstack)当您的网站不再响应时，您可以使用您的线程来达到峰值。

*   这可能是破坏了您的 ZODB 缓存的东西；例如，如果一个网络爬虫试图在短时间内连续加载您的*所有*站点，它可能会导致大量缓存流失，以至于需要一段时间来重建您的目录缓存。仔细查看您的日志文件（来自 Apache 和 Plone 实例）并寻找模式。

    在这种情况下，您要么必须阻止爬虫，要么安装更好的缓存以减轻 Plone 服务器上的负载（Varnish 在此类缓存设置方面做得很好，并进行了一些仔细的调整）。

*   一些没有经验的目录使用可能会破坏您的 ZODB 缓存，结果相同。在我见过的一个（非常糟糕的）案例中，一些代码会从目录中查找特定类型的*所有*`getObject()`对象，调用这些结果（将每个对象加载到内存中），然后将巨大的集合过滤到一个少数实际需要的对象。相反，在加载对象本身之前，应该使用目录来显着缩小要加载的对象列表。

*   可能是您没有利用 ZODB Blob；大文件存储在磁盘上并直接从磁盘而不是 ZODB 对象提供服务可以显着节省内存缓存。

总而言之，这可能需要一些工作来解决，这取决于根本原因是什么。

# git - Git：从原点添加未跟踪的文件

> ID：12868258
> 
> 赞同：0
> 
> 时间：2012-10-12T23:03:36.200
> 
> 标签：git

我的服务器代码允许上传图片，并使用上传的内容填充`/images`目录。`origin`

我的工作目录，`master`显然没有这些文件，也没有跟踪这些文件。我想将我服务器上新添加的图像拉到我的本地仓库。这可能吗？如果是这样，怎么做？

**起源**

```
/app
  /images
    upload_1.jpg // untracked
    upload_2.jpg // untracked
    upload_3.jpg // untracked
  file_upload.php 
```

**硕士（本地）**

```
/app
  /images
  file_upload.php 
```

我*真的*需要帮助，伙计们。有没有人可以为我回答这个问题？

换个说法，我将未跟踪的文件动态添加到我的远程仓库中。我需要以某种方式将它们放到我的本地工作目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:20:05.283

origin 不是目录。它是为 git repo 配置的远程的名称。如果你有一个源指向你的机器的仓库，并且有一个带有图像目录的工作文件夹，那么你必须在你的过程中包括添加和提交这些的行为：

```
git add -A && git commit -m "more images" 
```

现在您可以从原点获取并获取这些图像。通过快进合并或重置到远程跟踪分支来更新您的本地分支。您可以拉动以结合提取和合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:07:01.003

在提交文件之前，您无法提取文件。当用户上传图像时，您可以制作一个自动提交它们的脚本（可能是临时分支）？

# delphi - OnNewText 事件后何时重绘 VirtualTreeView？

> ID：12868259
> 
> 赞同：3
> 
> 时间：2012-10-12T23:03:46.510
> 
> 标签：delphi, c++builder, virtualtreeview, tvirtualstringtree

我使用此代码填充 VirtualStringTree 并允许重命名项目：

```
//---------------------------------------------------------------------------
// Structure for the tree
//---------------------------------------------------------------------------
struct TVSTdata
{
UnicodeString Name;
};
//---------------------------------------------------------------------------
// Initialization of the tree
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner) : TForm(Owner)
{
VirtualStringTree1->NodeDataSize = sizeof(TVSTdata);
// Fill all nodes with initial data
InitializeTree();
}
//---------------------------------------------------------------------------
// Fill all nodes with data and assign FocusedNode
//---------------------------------------------------------------------------
void TForm1::InitializeTree()
{
TVirtualNode* pNode;
TVirtualNode* pActiveNode;
TVSTdata*     pData;

VirtualStringTree1->BeginUpdate();
VirtualStringTree1->Clear();

pNode = VirtualStringTree1->AddChild(NULL); pData = static_cast<TVSTdata*>(VirtualStringTree1->GetNodeData(pNode)); pData->Name = "This is name 1";
pNode = VirtualStringTree1->AddChild(NULL); pData = static_cast<TVSTdata*>(VirtualStringTree1->GetNodeData(pNode)); pData->Name = "This is name 2";
pNode = VirtualStringTree1->AddChild(NULL); pData = static_cast<TVSTdata*>(VirtualStringTree1->GetNodeData(pNode)); pData->Name = "This is name 3"; pActiveNode = pNode;
pNode = VirtualStringTree1->AddChild(NULL); pData = static_cast<TVSTdata*>(VirtualStringTree1->GetNodeData(pNode)); pData->Name = "This is name 4";
pNode = VirtualStringTree1->AddChild(NULL); pData = static_cast<TVSTdata*>(VirtualStringTree1->GetNodeData(pNode)); pData->Name = "This is name 5";

VirtualStringTree1->Selected[pActiveNode] = true;
VirtualStringTree1->FocusedNode = pActiveNode; // PROBLEM -> if assigned from within OnNewText will still remain NULL and won't be set to pActiveNode!
VirtualStringTree1->EndUpdate();
}
//---------------------------------------------------------------------------
// Just display the text
//---------------------------------------------------------------------------
void __fastcall TForm1::VirtualStringTree1GetText(TBaseVirtualTree *Sender, PVirtualNode Node, TColumnIndex Column, TVSTTextType TextType, UnicodeString &CellText)
{
TVSTdata* pData = static_cast<TVSTdata*>(Sender->GetNodeData(Node));
CellText = pData->Name;
}
//---------------------------------------------------------------------------
// Allow editing
//---------------------------------------------------------------------------
void __fastcall TForm1::VirtualStringTree1Editing(TBaseVirtualTree *Sender, PVirtualNode Node, TColumnIndex Column, bool &Allowed)
{
Allowed = true;
}
//---------------------------------------------------------------------------
// Now this is where ideally I would reload the tree with new data - after rename
//---------------------------------------------------------------------------
void __fastcall TForm1::VirtualStringTree1NewText(TBaseVirtualTree *Sender, PVirtualNode Node, TColumnIndex Column, UnicodeString NewText)
{
NewText = "not important for this example as tree is reloaded anyway";
InitializeTree();  // ERROR is here - after assigning FocusedNode it is still NULL
//Timer1->Enabled = true; // If delayed call FocusedNode is correctly assigned and not NULL
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer1Timer(TObject *Sender)
{
//InitializeTree();
//Timer1->Enabled = false;
}
//--------------------------------------------------------------------------- 
```

**问题**- 当`InitializeTree()`最初被调用并被`VirtualStringTree1->FocusedNode`分配时，它被正确分配（不是 NULL）。

但是，如果在重命名事件后`InitializeTree()`调用此函数以实际从数据库重新加载树 - 分配后它仍然为 NULL。所以很明显，树不能从事件中重新加载和分配。`OnNewText``FocusedNode``FocusedNode``OnNewText`

我实现了延迟调用以重新加载新树并重新分配`FocusedNode`- 通过实现一个快速而肮脏的计时器（可以使用 PostMessage 进行延迟函数调用，但这只是一个愚蠢的例子） - 在计时器内分配后它不再为 NULL 并且按预期工作。

谁能指出实现树重新加载的最佳方法是什么 - 就像使用一个特定的事件，在该事件中可以安全地设置新的`FocusedNode`并且不会重新分配回 NULL？延迟函数调用是实现此目的的唯一方法，还是有更好的事件来捕获（例如，如果一个事件发生在`OnNewText`该事件不允许设置聚焦节点之后）。当然这可行，但如果有更好的方法可以做到这一点，我很感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T12:28:42.370

您无法更改`FocusedNode`处于`tsEditing`树状态的时间，并且在您离开`OnNewText`事件之前，您处于该状态。`OnNewText`本身更多的是用于编辑验证；它是事件，您可以在其中修改已编辑的值。相反，您应该使用`OnEdited`实际完成编辑后触发的事件。因此，将您的数据库更新和树重新加载内容移到那里，如以下 C++ Builder 伪代码所示：

```
void __fastcall TForm1::VirtualStringTree1Edited(TBaseVirtualTree *Sender, 
  PVirtualNode Node, TColumnIndex Column)
{
  // update your database here; with VirtualStringTree1.Text[Node, Column] you
  // can access the current node text after edit; when you update your DB, call
  InitializeTree();
} 
```

# mysql - 在经过清理的输入存储过程中使用准备好的语句有什么意义吗？

> ID：12868265
> 
> 赞同：1
> 
> 时间：2012-10-12T23:04:15.850
> 
> 标签：mysql, stored-procedures, prepared-statement

我不是数据库专家，但我从一个看起来有点严重无能但偶尔会发光发热的人那里继承了相当大的生产 MySQL 数据库的一些责任。大多数问题我都能够自己解决，但是这个问题让我很困惑，我还没有看到任何地方解决它：

是否有任何理智的理由让存储过程只不过是准备好的语句的包装器？

这些方面的东西：

```
CREATE PROCEDURE foo_search (IN searchParam1 int, IN searchParam2 varchar(255))
BEGIN
    SET @local1 = searchParam1;
    SET @local2 = searchParam2;
    PREPARE stmt FROM 
        '...'; --Fairly complex nested select statement
    EXECUTE stmt USING @local1, @local2;
END 
```

就是这样。我对准备好的语句的理解是，它们的好处在于清理输入（已经由我们使用的 PHP 框架处理），并减少来回通信（在存储过程中受到损害）。

这是纯粹而简单的毫无意义的疯狂，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:21:08.750

可能有。

也许这家伙正在使用不支持准备好的语句的数据库连接库，所以他只是想获得等效的效果。

也许他想从触发器中调用该存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:02:23.607

迈克列举了两个很好的理由。这里还有几个：

1.  减少网络通信量，因为`CALL foo_search(searchParam1, searchParam2)`数据量比每次发送整个 SQL 语句的数据量要少。

2.  在服务器上准备语句*可能会*提高性能。在对几种不同的方法进行基准测试后，我们发现对于复杂的 SQL 语句，只***在服务器上***准备一次语句的性能最好。这是一个例子：

* * *

```
CREATE PROCEDURE foo_search (IN searchParam1 int, IN searchParam2 varchar(255))
BEGIN
    SET @local1 = searchParam1;
    SET @local2 = searchParam2;
    IF ISNULL(@foo_search_prepared) THEN
        SET @foo_search_prepared = TRUE;

        PREPARE stmt FROM 
            '...'; --Fairly complex nested select statement
    END IF; 
    EXECUTE stmt USING @local1, @local2;
END 
```

# c - 通过字符串数组进行二进制搜索 - C

> ID：12868267
> 
> 赞同：1
> 
> 时间：2012-10-12T23:04:23.710
> 
> 标签：c, arrays, binary-search

因此，我尝试使用二进制搜索在数组中的单词词典中查找某个单词。目前我的功能是这样的，

```
void binsearch(char letters[], char changeletters[], char **dictionary[], int numwords){

printf("start binsearch\n");
int max = numwords;
int min = 0;
int mid;
int spot;

while (min <= max){

printf("start while in search\n");

    mid = (min + max) / 2;
    spot = strcmp(**dictionary[mid],changeletters);
    printf("%d", spot);

    if (spot == 0){
        printf("word found\n");
        printf("A permutation of %s that is a valid word is %s", letters, changeletters);
    }
    else if (spot < 0){
        printf("word not found and word is lower\n");
        min=spot+1;
    }
    else{
        printf("word no found and word is higher\n");
        max=spot-1;
    }
 }

     if( max > min)
         printf("Sorry, no permutations of %s form a word", letters);
} 
```

随机 printfs 用于检查程序的运行距离。目前它在字符串比较中失败，我不知道为什么。有任何想法吗？

# jquery - 通过 Ajax 更新实体的数据表

> ID：12868268
> 
> 赞同：1
> 
> 时间：2012-10-12T23:04:35.317
> 
> 标签：jquery, jquery-plugins, symfony, datagrid, datatables

当我尝试在 Symfony2 的视图中更新表中的元素时，我不断收到此错误：

**单元格无法更新（服务器错误）**

我不确定问题是什么。是不是路由不正确？

具有 javascript 和表格的 twig(view) 文件。

用于从控制器检索表数据的 javascript：

```
 <script language="JavaScript" type="text/javascript">
    $(document).ready(function () {
        $('#myDataTable').dataTable(

                {
                    "bSort": true,
                    "bFilter": true,
                    "bProcessing": true,
                    "bServerSide": true,
                    "sAjaxSource": "{{ path('CetiucValidateSurveyBundle_renderJson')}}"
                }

        ).makeEditable({

                sUpdateURL: "{{ path('CetiucValidateSurveyBundle_updateChange')}}"

        }
        );

    });
   </script> 
```

控制器中更新实体的方法（在此示例中进行了简化，它仅从请求中检索数据）。

```
public function updateChangeAction(Request $request)
{

    $id = $_REQUEST['id'] ;
    $value = $_REQUEST['value'] ;
    $column = $_REQUEST['columnName'] ;
    $columnPosition = $_REQUEST['columnPosition'] ;
    $columnId = $_REQUEST['columnId'] ;
    $rowId = $_REQUEST['rowId'] ;

return $value;
} 
```

这是更新操作的路由条目

```
CetiucValidateSurveyBundle_updateChange:
    defaults: { _controller: "CetiucValidateSurveyBundle:Validate:updateChangeAction", _format: json }
    pattern:   /update
    requirements: { _format: (json), _method: POST } 
```

这是我调用更新方法时写的日志，我没有发现任何对我的问题有用的东西：

> [2012-10-16 03:25:55] event.DEBUG：通知事件“kernel.request”到监听器“Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onKernelRequest”。[] [] [2012-10-16 03:25:55] request.INFO：匹配路由“CetiucValidateSurveyBundle_renderJson”（参数：“_controller”：“Cetiuc\Bundle\ValidateSurveyBundle\Controller\ValidateController::renderJsonAction”、“_route” ：“CetiucValidateSurveyBundle_renderJson”）[] [] [2012-10-16 03:25:55] event.DEBUG：通知事件“kernel.request”到监听器“Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest”。[] [] [2012-10-16 03:25:55] event.DEBUG：通知事件“kernel.controller”到监听器“ 25:55] event.DEBUG：通知事件“kernel.response”到监听器“Sensio\Bundle\FrameworkExtraBundle\EventListener\CacheListener::onKernelResponse”。[] [] [2012-10-16 03:25:55] event.DEBUG：通知事件“kernel.response”到监听器“Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelResponse”。[] [] [2012-10-16 03:25:55] event.DEBUG：通知事件“kernel.response”到监听器“Symfony\Bundle\WebProfilerBundle\EventListener\WebDebugToolbarListener::onKernelResponse”。[] []

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T23:53:58.527

好的，感谢卡洛斯。我做了一些研究，更新功能不需要任何 json 功能。

由于您的错误是**服务器错误**，如果您能提供您的 symfony2 日志以便我们可以识别服务器端错误，那将是非常好的。

您的更新方法或路由有问题。

# objective-c - ActivityIndi cator 不会停止动画，也不会从 UICollectionViewCell 中的超级视图中删除

> ID：12868270
> 
> 赞同：3
> 
> 时间：2012-10-12T23:04:39.643
> 
> 标签：objective-c, ios, uicollectionview, uicollectionviewcell

我正在尝试实现`UICollectionView`和显示图像。我正在使用`SDWebimage`它在 tableviewcells 中完美运行，但是当我尝试在其中使用它时，`UICollectionviewCell`它不会停止并删除活动指示器。如果没有下载的图像，它会放置占位符图像。我不确定可能导致此问题的 tableviewcell 和 collectionviewcell 之间有什么区别。

这是代码：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"personImageCell";

    PersonCollectionViewCell *cell = (PersonCollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    Person *person = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSString *imgURL=[person.imageurl stringByAppendingString:@"?maxheight=300&maxwidth=400"];

    UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    activityIndicator.hidesWhenStopped = YES;
    activityIndicator.hidden = NO;
    [activityIndicator startAnimating];
    activityIndicator.center = CGPointMake(cell.ivPersonImage.frame.size.width /2, cell.ivPersonImage.frame.size.height/2);
    [cell.ivPersonImage setImageWithURL:[NSURL URLWithString:imgURL] placeholderImage:nil options:SDWebImageProgressiveDownload success:^(UIImage *image, BOOL cached){
        [activityIndicator stopAnimating];[activityIndicator removeFromSuperview];
        NSLog(@"activity indicator should be removed");
    }failure:^(NSError *error){
        [activityIndicator stopAnimating];[activityIndicator removeFromSuperview];
        cell.ivPersonImage.image = [UIImage imageNamed:@"placeholder.png"];
    }];

    [cell.ivPersonImage addSubview:activityIndicator];
    return cell;
} 
```

更新：

当我做`NSLog(@"activity indicator should be removed %@,activityIndicator);`

我得到这个输出：

```
 activity indicator should be removed <UIActivityIndicatorView: 0xa520ab0; frame = (65 90; 20 20); hidden = YES; layer = <CALayer: 0xa520b60>> 
```

它显示它`UIActivityindicator`是隐藏的，但它仍然显示在图像的顶部

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T05:58:43.817

看来您正在重用单元格，所以有多个`UIActivityIndicatorView`s。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"personImageCell";

    PersonCollectionViewCell *cell = (PersonCollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    Person *person = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSString *imgURL=[person.imageurl stringByAppendingString:@"?maxheight=300&maxwidth=400"];

    UIActivityIndicatorView *activityIndicator = [cell.ivPersonImage viewWithTag:10];
    if (activityIndicator) [activityIndicator removeFromSuperview];
    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    activityIndicator.hidesWhenStopped = YES;
    activityIndicator.hidden = NO;
    [activityIndicator startAnimating];
    activityIndicator.center = cell.ivPersonImage.center;
    activityIndicator.tag = 10;

    [cell.ivPersonImage addSubview:activityIndicator];
    [cell.ivPersonImage setImageWithURL:[NSURL URLWithString:imgURL] placeholderImage:nil options:SDWebImageProgressiveDownload success:^(UIImage *image, BOOL cached){
        [activityIndicator stopAnimating];[activityIndicator removeFromSuperview];
        NSLog(@"activity indicator should be removed");
    }failure:^(NSError *error){
        [activityIndicator stopAnimating];[activityIndicator removeFromSuperview];
        cell.ivPersonImage.image = [UIImage imageNamed:@"placeholder.png"];
    }];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:52:30.510

嗯..这很奇怪..你能试着确保activityIndi​​cator在主线程上工作吗？

```
[cell.ivPersonImage setImageWithURL:[NSURL URLWithString:imgURL] placeholderImage:nil options:SDWebImageProgressiveDownload success:^(UIImage *image, BOOL cached){
        dispatch_async(dispatch_get_main_queue(), ^(void){
            [activityIndicator stopAnimating];
            [activityIndicator removeFromSuperview];
        }
        NSLog(@"activity indicator should be removed");
    }failure:^(NSError *error){
        dispatch_async(dispatch_get_main_queue(), ^(void){
            [activityIndicator stopAnimating];
            [activityIndicator removeFromSuperview];
        }
        cell.ivPersonImage.image = [UIImage imageNamed:@"placeholder.png"];
    }]; 
```

我怀疑不是，这就是它没有停止动画的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T13:52:02.253

在当前 View Controller 的 ViewDidLoad 中创建活动指示器

```
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView      alloc]initWithFrame:CGRectMake(150, 225, 20, 30)];
[spinner setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
spinner.color = [UIColor blueColor];
[self.view addSubview:spinner]; 
```

在导致活动的函数的开头使用下面的代码

```
[NSThread detachNewThreadSelector:@selector(threadStartAnimating:) toTarget:selfwithObject:nil]; 
```

声明这两个方法来启动和停止动画

```
-(void)threadStartAnimating:(id)data
{
[spinner startAnimating];
}

-(void)threadStopAnimating:(id)data
{
[spinner stopAnimating];
} 
```

请提供反馈，因为此代码在我自己的项目中运行良好

# sqlite - 用于简单便携式应用程序的嵌入式数据库

> ID：12868271
> 
> 赞同：0
> 
> 时间：2012-10-12T23:04:57.503
> 
> 标签：sqlite, sql-server-ce, portability, embedded-database

我将开发小型 WPF 应用程序。目标平台是 .NET 3.5。主要目标是使其可移植（移动到任何文件夹并且开箱即用）。它应该在 Windows 7 机器上运行，无需任何额外安装。但是我需要一个数据库（不需要ORM支持，只是简单的存储）。您能否建议为此目的更好的数据库？我想到了 SQL CE 4.0，但我不确定它是否需要像 C++ 库这样的额外安装。包括 DLL 是可以的。

# java - java - 遍历值

> ID：12868279
> 
> 赞同：0
> 
> 时间：2012-10-12T23:06:21.710
> 
> 标签：java, for-loop

我正在尝试创建一个嵌套的 for 循环，它将在用户指定的范围内生成所有对，范围从负值到正值。解释起来有点困难，但这是我的代码：

```
public class test method {

    public static void main (String[] args) {

    int a = Integer.parseInt(args[0]);
    int b = Integer.parseInt(args[1]);
    int c = 3;
    int d = 4;

    for (int i = -a; i <= a; i++)
        for (int j = -b; j <= b; j++) {

            System.out.println(a+" and "+b+" vs "+c+" and "+d+"\n");

        }

    }

} 
```

给定命令行参数 1 和 2，我想要的输出将类似于：

-1 和 -2 与 3 和 4

-1 和 -1 与 3 和 4

-1 和 0 与 3 和 4

-1 和 1 与 3 和 4

-1 和 2 与 3 和 4

0 和 -2 与 3 和 4

0 和 -1 与 3 和 4

0 和 0 与 3 和 4

0 和 1 与 3 和 4

0 和 2 与 3 和 4

1 和 -2 与 3 和 4

1 和 -1 与 3 和 4

1 和 0 与 3 和 4

1 和 1 与 3 和 4

1 和 2 与 3 和 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:16:14.787

我认为第一个 for 中缺少括号是复制和粘贴中的一个问题，但如果那是你的真实代码，那么你就有问题了。

```
a = Math.abs(a);
b = Math.abs(b);

for (int i = -a; i <= a; i++) {
    for (int j = -b; j <= b; j++) {
        System.out.println(i+" and "+j+" vs "+c+" and "+d+"\n");
    }
} 
```

两件事情。首先，您应该打印`i`，`j`其次您还应该考虑负值。您`for`的 ' 将失败，因为`-a`if`a = -1`会导致

```
for (int i = 1; i <= -1; i++) 
```

条件将不满足，迭代将不会发生。通过这样做`Math.abs`，您可以获得输入的绝对值，并且可以进行从该负值到正值的迭代。如果两者`a`和`b`都是正数，则该`abs`方法将返回相同的值（分配`a`和`b`具有它们已经具有的相同值）。

无论应该做什么，`c`还有`d`待观察。你想要的输出说你让它们保持原样，所以我现在不会碰它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:09:23.470

看起来很合理，“-a”业务的例外（并打印错误的变量）

假设 a/b 总是积极的，尝试

```
for (int i = (0-a); i <= a; i++)
    for (int j = (0-b); j <= b; j++) {
        System.out.println(i+" and "+j+" vs "+c+" and "+d+"\n"); 
```

# python - 按下按键时停止python循环

> ID：12868282
> 
> 赞同：0
> 
> 时间：2012-10-12T23:06:59.033
> 
> 标签：python, loops

使用 python 2.7

```
import time, os

def foo():
    try:
        a=0
        while 1:
            os.system("bash command")
            a += 1
            time.sleep(1/30)
        print a
    except KeyboardInterrupt:
        print "Interrupted!"

foo() 
```

我正在从 Ubuntu 12.04 64 位下的终端运行它，但我无法停止这个无限循环，为什么它不起作用？

我想有一个无限循环，只有当用户按下某个特定键或任何键时才打破它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:44:52.540

另一种方法是异步。用户输入。在您的情况下，一个数据库或一个简单的文件就足够了。

看看这个 [问题](https://stackoverflow.com/q/8160632/929210)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:22:28.290

问题解决了。

由于 time.sleep() 的低值，循环的执行几乎不可能停止，显然 sleep() 的值越高，应用程序对用户输入的响应就越快，一切正常。

# c - 初始化二维数组时的段错误

> ID：12868283
> 
> 赞同：0
> 
> 时间：2012-10-12T23:06:59.143
> 
> 标签：c, arrays, pointers, multidimensional-array

我找不到这个简单的数组初始化有什么问题。`field[x][y] = ' ';`程序在 0 时出现段错误，x 和 y崩溃（我使用 Code::Blocks 调试器）

```
/* init data structures */
char **field;
int field_width=5,field_height=5;
field = malloc(sizeof(char*)*field_width);
for(x=0;x<field_width;x++)
{
    field[x] = malloc(sizeof(char)*field_height);
    for(y=0;y<field_height;y++)
    {
        field[x][y] = ' ';
    }
} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:15:51.807

```
field = (char*) malloc(sizeof(char*)*field_width); 
```

可能是`char*`演员表？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:34:14.110

我实际上简化了代码片段。`field_width`未初始化。我很惊讶这在构建过程中没有发出警告。而且我真的不知道为什么当x = 0时它会产生段错误。

但是我的问题解决了。谢谢大家，很抱歉给您带来的方便...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:21:20.070

不应该是这个吗？

```
field = (char**)malloc(sizeof(char*)*field_width); 
```

**编辑**

`malloc`可以返回 null，因此检查`field[x] = malloc(sizeof(char)*field_height);`内存块是否有效是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T02:38:41.227

在初始化之前`field_width`，它可能包含随机数据。`field_width`在`malloc`语句中使用然后[触发未定义的行为](https://stackoverflow.com/questions/11962457/why-is-using-an-uninitialized-variable-undefined-behavior-in-c "触发未定义的行为")。编译器可以做它想做的任何事情，从跳过`malloc`到使用碰巧存储在 中的任何垃圾`field_width`，甚至更糟/更奇怪的事情！无论如何，您不太可能得到`malloc`您想要的调用，并且如果它没有运行或返回`NULL`（例如，如果`field_width`包含一个太大而无法`malloc`编辑的值），则结果值`field`不太可能指向有效内存。`field`当您在循环中取消引用时，这将导致段错误。你很幸运，你得到了如此明显的迹象表明出了什么问题——记忆错误并不总是那么明显。

# git - 如何将 Git 存储库的子目录作为新的 Git 存储库发布给外部用户？

> ID：12868285
> 
> 赞同：2
> 
> 时间：2012-10-12T23:07:05.907
> 
> 标签：git, repository

如何将 Git 存储库的子目录作为新的 Git 存储库发布给外部用户？

我有一个 Git 存储库`~/repo.git`；它有子目录`~/repo.git/sub1`和`~/repo.git/sub2`. 我现在需要向`sub1`一群朋友发布/导出/发布（或任何适当的动词），以便他们可以查看和使用`sub1`. 如果他们能将我所做的更新推`repo.git`送到这个公开`sub1`的 .

有什么好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:13:03.070

该[`git subtree`](https://github.com/git/git/tree/master/contrib/subtree)命令可用于执行此操作。

文档位于[`git-subtree.txt`](https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:14:53.950

我会使用子模块来管理这种关系。它们捕获您正在使用的确切版本。您可以使用过滤器分支从这个 repo 的克隆中删除您的私有分支。然后只需在您的存储库中删除该目录并添加指向您刚刚创建的新存储库的子模块。

# javascript - 使用 javascript 在客户端记录统计信息

> ID：12868286
> 
> 赞同：0
> 
> 时间：2012-10-12T23:07:22.020
> 
> 标签：javascript, webserver

我想使用 youtube api 在客户端记录一些有关视频播放的统计信息，但是 javascript 无法在客户端创建和写入文件，我需要使用 javascript 将统计信息传输到服务器端并在服务器端收集统计信息

但我希望这些统计信息不会通过网络传输我可以在客户端所在的同一台机器上设置一个带有 sql 数据库的 php 服务器，所以我在服务器上创建一个 html5 页面（嵌入 youtube 视频和 javascripts 用于统计），并且同一台机器上的用户浏览器访问html5页面，然后通过localhost传输数据包？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:14:14.613

您可以通过发出 AJAX 请求并将它们存储在服务器本身的数据库中来发送统计信息。客户端上的本地存储并非在所有域中都可见。

# javascript - 获取div未溢出部分的高度

> ID：12868287
> 
> 赞同：10
> 
> 时间：2012-10-12T23:07:26.370
> 
> 标签：javascript, height, overflow, offset

假设我有一个包装器 div，`overflow:hidden`上面有一个 div，里面有一个 div，它远远低于可见部分。如何获得内部 div 的可见高度？

```
<div id="wrapper" style="overflow: hidden; height:400px;">
    <div id="inner">
        <!--Lots of content in here-->
    </div>
<div> 
```

我尝试获取内部 div 高度的每种方法都会返回包括隐藏部分在内的完整高度，即 2000 像素。我希望能够仅获得可见部分的高度，因此在本例中为 400px。

我知道我可以得到 的高度`parentNode`，但在生产中，内部 div 可能不是第一个孩子。所以可能有其他 div 将它们分开，因此 的高度`#inner`将为 400 - 无论它和`#wrapper`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T23:23:11.840

作为基本算法，这可以工作：

```
var offset = 0;
var node = document.getElementById("inner");
while (node.offsetParent && node.offsetParent.id != "wrapper")
{
    offset += node.offsetTop;
    node = node.offsetParent;
}
var visible = node.offsetHeight - offset; 
```

但是，如果您正在做这些事情，也许您已经使用了 jQuery，它的`.height()`和`.offset()`功能可能会有所帮助：

```
$("#wrapper").height()-
$("#inner").offset()['top']+
$("#wrapper").offset()['top']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:41:46.273

在 DOM 树上查找的快速`window.getComputedStyle`算法`overflow: hidden`

```
function visibleArea(node){
    var o = {height: node.offsetHeight, width: node.offsetWidth}, // size
        d = {y: (node.offsetTop || 0), x: (node.offsetLeft || 0), node: node.offsetParent}, // position
        css, y, x;
    while( null !== (node = node.parentNode) ){  // loop up through DOM
        css = window.getComputedStyle(node);
        if( css && css.overflow === 'hidden' ){  // if has style && overflow
            y = node.offsetHeight - d.y;         // calculate visible y
            x = node.offsetWidth - d.x;          // and x
            if( node !== d.node ){
                y = y + (node.offsetTop || 0);   // using || 0 in case it doesn't have an offsetParent
                x = x + (node.offsetLeft || 0);
            }
            if( y < o.height ) {
                if( y < 0 ) o.height = 0;
                else o.height = y;
            }
            if( x < o.width ) {
                if( x < 0 ) o.width = 0;
                else o.width = x;
            }
            return o;                            // return (modify if you want to loop up again)
        }
        if( node === d.node ){                   // update offsets
            d.y = d.y + (node.offsetTop || 0);
            d.x = d.x + (node.offsetLeft || 0);
            d.node = node.offsetParent;
        }
    }
    return o;                                    // return if no hidden
} 
```

例如[**小提琴**](http://jsfiddle.net/mXc5H/)（看看你的控制台）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T23:53:14.990

我发现在每种情况下都这样做的唯一方法，包括当有溢出时，`transform: translate()`使用 s，并且在元素和隐藏其溢出的元素之间还有其他嵌套容器是结合`.getBoundingClientRect()`对祖先的引用隐藏元素的溢出：

```
function getVisibleDimensions(node, referenceNode) {
    referenceNode = referenceNode || node.parentNode;

    var pos = node.getBoundingClientRect();
    var referencePos = referenceNode.getBoundingClientRect();

    return {
        "width": Math.min(
            node.clientWidth,
            referencePos.left + referenceNode.clientWidth - pos.left, 
            node.clientWidth - (referencePos.left - pos.left)
        ),
        "height": Math.min(
            node.clientHeight, 
            referencePos.top + referenceNode.clientHeight - pos.top,
            node.clientHeight - (referencePos.top - pos.top)
        )
    }
} 
```

# [**演示**](https://jsfiddle.net/obpez4qd/3/)。

如果没有给出参考节点，则假定父节点：[Demo](https://jsfiddle.net/obpez4qd/4/)。

请注意，这并没有考虑元素是否*在 viewport*中可见，只是可见（由于溢出而不是隐藏）。如果您两者都需要，您可以将功能与[此答案](https://stackoverflow.com/a/442474/2065702)结合使用。它也没有检查`visibility: hidden`，所以如果你需要检查`style.visibility`节点及其所有祖先的属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T14:00:55.100

下面的代码计算元素的可见部分。可见部分是指在**窗口**中可见的部分，但我认为您可以轻松更改它以将计算基于任意容器元素。

```
function computeVisibleHeight ($t) {
        var top = $t.position().top;
        var windowHeight = $(window).height();
        var scrollTop = $(window).scrollTop();
        var height = $t.height();

        if (top < scrollTop && height - scrollTop >= windowHeight) {
            // first case: the top and the bottom of the element is outside of the window
            return windowHeight;
        } else if (top < scrollTop) {
            // second: the top is outside of the viewport but the bottom is visible
            return height - (scrollTop - top);
        } else if (top > scrollTop && top + height < windowHeight) {
            // the whole element is visible
            return height;
        } else {
            // the top is visible but the bottom is outside of the viewport
            return windowHeight - (top - scrollTop);
        }
    } 
```

该代码使用jquery。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-12T23:12:11.883

我认为在它旁边保留一个兄弟姐妹，计算它的 scrollTop 和溢出元素 scrollTop 然后从兄弟姐妹 scoolTop 中减去它可能会起作用

# javascript - 文本框值更改后立即更新 knockout.js 视图模型

> ID：12868290
> 
> 赞同：1
> 
> 时间：2012-10-12T23:07:44.310
> 
> 标签：javascript, html, data-binding, mvvm, knockout.js

如何在文本输入值更改后立即让 knockout.js 更新视图模型？问题是更新仅在字段松散焦点时触发。

来自[knockout.js 文档](http://knockoutjs.com/documentation/value-binding.html)：

> 如果您想实时更新视图模型，“afterkeydown”是最佳选择。

我不觉得这有帮助。在我的系统中，我有一个名为用户令牌的字段。因此用户经常使用鼠标粘贴令牌。

那么如何让 knockout.js 为文本字段中的每个文本更改立即更新它的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T12:40:44.443

正如您在问题中提到的那样，这是由[`valueUpdate`binding](http://knockoutjs.com/documentation/value-binding.html)控制的。

`input`如果您只需要支持“现代浏览器”，则建议使用此值。“非现代浏览器”基本上是指 IE8 及更早版本。从文档：

> [所有`valueUpdate`]选项中，`input`如果您想实时更新视图模型，是最佳选择，并且您只需要支持相当现代的浏览器，例如 IE 9+（而“afterkeydown”对于较旧的浏览器是一个不错的选择浏览器）。例如：

```
<p>Your value: <input data-bind="value: someValue, valueUpdate: 'input'" /></p>
<p>You have typed: <span data-bind="text: someValue"></span></p> <!-- updates in real-time -->

<script type="text/javascript">
    var viewModel = {
        someValue: ko.observable("edit me")
    };
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:53:09.627

至少，它必须集中注意力才能让他们将令牌粘贴到正确的位置？所以也许有一个焦点事件处理程序作为备份运行。

否则总是只有onchange。

这是一篇关于在 knockout.js 中使用 onchange 的 SO 帖子，因为我个人从未使用过它。 [KnockoutJS - 更新文本框值的 ViewModel OnChange 而不是 OnBlur 选项](https://stackoverflow.com/questions/9604961/knockoutjs-updating-viewmodel-onchange-of-textbox-value-instead-of-onblur-opti)

# android - 如何更改生成的活动标题？

> ID：12868295
> 
> 赞同：0
> 
> 时间：2012-10-12T23:09:02.893
> 
> 标签：android, zxing, titlebar

我使用 XZing 库创建了一个简单的条形码生成器。

为此，我使用了一个代码：

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
intent.putExtra("ENCODE_FORMAT", "UPC_A");
intent.putExtra("ENCODE_DATA", "12345678901");
startActivity(intent); 
```

我需要去掉这个活动中的标题（活动顶部的灰色条）！你能告诉我怎么做吗？ [图片](http://www.smrw.lodz.pl/~adamt/Screenshot.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:11:58.387

`this.requestWindowFeature(Window.FEATURE_NO_TITLE);`

`setContentView()`在`onCreate()`要删除标题栏的 Activity之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:19:28.773

您不能更改其他活动的标题栏。如果您有来源，那么您可以使用上述建议。

# c# - C#/XNA 对比 用于简单游戏开发的 java/vectors

> ID：12868297
> 
> 赞同：1
> 
> 时间：2012-10-12T23:09:31.753
> 
> 标签：c#, java

我只是想了解大众对于简单游戏是使用 C# 还是 java 的意见。我将尝试用视觉和声音重现经典的乒乓球游戏。我应该使用vectors和java来做到这一点，还是使用C#和XNA框架对游戏和我从完成项目中获得的经验来说会更好？从我目前所做的研究来看，C# 对于游戏编程来说绝对是一个更好的选择，但我想首先明确地询问：java 还是 C# 用于一个简单的游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:19:57.090

Java 是独立于平台的，因此如果您计划在非 Windows 平台上运行游戏，它必须是您的选择。但是，如果您只需要在 Windows 上运行游戏，那么 C# 替代方案似乎是一个更好的选择。毕竟 XNA 框架是为开发游戏而开发的。它还提供了更多选择，例如为 Xbox 开发（以后可能会变得有用的知识）。此外，Java 已经不像几年前那样了，所以在我看来，更加重视学习 C# 是一种更好的时间投资。

# android - textview 未按预期更新

> ID：12868298
> 
> 赞同：3
> 
> 时间：2012-10-12T23:09:38.003
> 
> 标签：android

我在两个不同的活动中有多个`TextView`和`EditText`领域。当我进入我的编辑屏幕时，我可以输入值并`TextViews`更新相应的值。问题是，如果我只编辑一个`TextView`，那么另一个`TextViews`会变为空白，只有我编辑过的才会显示正确的信息。有什么建议么？附上一段代码。所以基本上，我只希望在`TextView`更改`EditText`字段时更改信息，而不是在`EditText`刚刚选择或滚动时更改信息。

`EditText`代码：

```
editTextName.setOnKeyListener(new View.OnKeyListener() {
    public boolean onKey(View v1, int keyCode1, KeyEvent event1) {
        if ((event1.getAction() == KeyEvent.ACTION_DOWN) && (keyCode1 == KeyEvent.KEYCODE_ENTER)) {
            getSharedPreferences("myprefs", 0).edit().putString("editTextName", editTextName.getText().toString()).commit();
            return true;
        }
        return false;
    }
}); 
```

对应的`TextView`：

```
String newName = getSharedPreferences("myprefs", 0).getString("editTextName", this.getString(R.string.name) );
textViewName.setText("Name: "+newName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:55:08.793

我只是不明白你想说什么，但我想你想知道edittext中的文本何时改变，因为有一个接口，所以你使用这个代码:--

```
 editTextName.addTextChangedListener(new TextWatcher(){
     public void afterTextChanged(Editable s) {
        if ((event1.getAction() == KeyEvent.ACTION_DOWN) && (keyCode== KeyEvent.KEYCODE_ENTER)) {
        getSharedPreferences("myprefs", 0).edit().putString("editTextName", editTextName.getText().toString()).commit();
        return true;
    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after){}
    public void onTextChanged(CharSequence s, int start, int before, int count){}
}); 
```

});

# django - Django PostgreSQL 异步提交

> ID：12868302
> 
> 赞同：4
> 
> 时间：2012-10-12T23:09:58.707
> 
> 标签：django, postgresql

PostgreSQL 支持异步提交——也就是说，即使数据库没有完成预写日志同步，数据库引擎也可以配置为报告成功。

[http://www.postgresql.org/docs/8.3/static/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT](http://www.postgresql.org/docs/8.3/static/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT)

这在运行某些查询之间提供了一种有用的折衷方案，以保证在数据库崩溃的情况下，它会保持一致的状态，但是，一些据称已提交的事务看起来好像它们已被彻底中止。

显然，对于某些事务，提交保持最终状态是至关重要的——这就是为什么可以为每个事务配置标志的原因。

如何在 django 中利用此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:39:32.617

首先我第二次弗兰克的笔记。这就是这样做的方法。

但是，如果您这样做，您可能希望有一个函数在每个可能提交的 API 上设置它。这对我来说似乎很容易出错，所以我可能不会弄乱它，而是会努力将事务批处理到同一个事务中，以达到有意义的程度。我建议在您的模型中进一步使用一种方法来显示设置 ( `SHOW synchronous_commit`)，以便您可以正确地进行单元测试。

再次因为这是一个会话设置，我觉得以这种方式玩有点危险，但如果你采取必要的预防措施，它可以做到。

# windows-8 - 如何将位图图像的大小调整为 <200 KB 并满足平铺限制 (WinRT)

> ID：12868303
> 
> 赞同：2
> 
> 时间：2012-10-12T23:10:00.767
> 
> 标签：windows-8

我正在开发一个例程来缩放一些位图图像，使其成为我的 Window-8 应用程序的平铺通知的一部分

平铺图像的尺寸必须小于 200KB 且小于 1024x1024 像素。我可以使用缩放例程根据需要调整源图像的大小以适应 1024x1024 像素的尺寸限制。

如何更改源图像以确保满足大小限制？

我的第一次尝试是继续缩小图像，直到它清除大小阈值，并用于 `isTooBig = destFileStream.Size > MaxBytes`确定大小。但是，下面的代码会导致无限循环。如何可靠地测量目标文件的大小？

```
 bool isTooBig = true;
        int count = 0;
        while (isTooBig)
        {
            // create a stream from the file and decode the image
            using (var sourceFileStream = await sourceFile.OpenAsync(Windows.Storage.FileAccessMode.Read))
            using (var destFileStream = await destFile.OpenAsync(FileAccessMode.ReadWrite))
            {
                BitmapDecoder decoder = await BitmapDecoder.CreateAsync(sourceFileStream);
                BitmapEncoder enc = await BitmapEncoder.CreateForTranscodingAsync(destFileStream, decoder);

                double h = decoder.OrientedPixelHeight;
                double w = decoder.OrientedPixelWidth;

                if (h > baselinesize || w > baselinesize)
                {
                    uint scaledHeight, scaledWidth;

                    if (h >= w)
                    {
                        scaledHeight = (uint)baselinesize;
                        scaledWidth = (uint)((double)baselinesize * (w / h));
                    }
                    else
                    {
                        scaledWidth = (uint)baselinesize;
                        scaledHeight = (uint)((double)baselinesize * (h / w));
                    }

                    //Scale the bitmap to fit
                    enc.BitmapTransform.ScaledHeight = scaledHeight;
                    enc.BitmapTransform.ScaledWidth = scaledWidth;
                }

                // write out to the stream
                await enc.FlushAsync();

                await destFileStream.FlushAsync();

                isTooBig = destFileStream.Size > MaxBytes;
                baselinesize *= .90d * ((double)MaxBytes / (double)destFileStream.Size);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:57:34.910

考虑到方形瓷砖的瓷砖尺寸为 150x150 或宽瓷砖的瓷砖尺寸为 310x150，您应该能够将图像缩小到适当的尺寸，并且通过 jpeg 压缩，您几乎可以保证低于 200k。将压缩质量设置为 80 左右。它将为您提供良好的压缩比，同时保持良好的图像质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:26:41.077

您不能使用宽度 x 高度 x colourDepth 来计算它吗（其中 colourDepth 以字节为单位，因此 32 位 = 4 字节）。大概你保持纵横比，所以你只需要缩小宽度/高度，直到你发现它小于 200KB。

这假设输出是一个位图，因此是未压缩的。

# java - 给定一个字符串数组，如何创建一个重新排列原始数组的第二个数组？

> ID：12868307
> 
> 赞同：0
> 
> 时间：2012-10-12T23:10:30.080
> 
> 标签：java, shuffle

我正在尝试创建一种方法来获取名称数组并返回列表的副本，其中名称随机重新排列。下面的代码返回一个具有重复名称的新列表。我该怎么做才能改组新列表的名称？

```
public static String[] shuffle(String []names)
{
    int num =0;  
    String [] newArray = new String [names.length];
    Random r = new Random (); 
    for(int i = 0; i<names.length; i++){
        num = r.nextInt(names.length);
        if((i-1)!=num){
            newArray[i]=names[num];
        }
    }
    return newArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:13:24.167

您可以使用[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)随机播放列表。

如果您渴望自己动手 - 看看[Fisher-yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。
（伪代码：）

```
for (i = n-1; i >= 0; i--) 
    swap(names,i,r.nextInt(i+1)); 
```

（`swap()`交换数组中两个元素的标准交换函数在哪里）

（注意，如果您想要一个带有洗牌数组的新实例 - 只需[`Arrays.copyOf()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28U%5B%5D,%20int,%20java.lang.Class%29)在运行算法之前使用复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:12:39.317

Collections.shuffle(列表)

[信息](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)

您可以使用[ToList](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)使其成为随机播放列表，然后使用[ToArray](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html#toArray%28%29)返回数组。

这可能不是最有效的，但它是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:30:25.723

就像其他人建议的那样，已经有其他切割器/简单的方法可以做到这一点，但要解决代码中的问题，您需要将 newArray 设为名称数组的副本（您可以使用 Arrays.copyOf），然后正确交换值，例如：

```
if(i!=num){
   String aux=newArray[i];
   newArray[i]=newArray[num];
   newArray[num]=aux;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T23:14:52.553

```
public String[] shuffle(String[] ss) {
  List<String> list = Collections.shuffle(Arrays.asList(ss));
  return list.toArray(new String[ss.length]);
} 
```

# amazon-ec2 - 使用 CLI 在脚本中为指标“StatusCheckFailed”创建警报

> ID：12868308
> 
> 赞同：0
> 
> 时间：2012-10-12T23:10:44.870
> 
> 标签：amazon-ec2, amazon-web-services, amazon-cloudwatch

我正在使用 cloud watch CLI 编写脚本。作为此脚本的一部分，我需要在状态检查失败时创建警报。遵循的步骤 - 1）首先我为 AMI 创建启动配置 2）然后自动缩放组，向上扩展策略。3) 现在，我需要创建一个警报，以便当属于 Ami 的实例（从步骤 1 开始）失败时，然后发出警报，该警报实质上是创建一个新实例。

我在为此创建警报时遇到问题。帮助表示赞赏。

mon-put-metric-alarm TestAlarm --comparisonoperator LessThanToThreshold --evaluation-periods 1 --metric-name StatusCheckFailed --namespace "AWS/EC2" --period 600 --statistic Average --threshold 1 --alarm-actions arn :aws:autoscaling:TestInstance --dimensions "AutoScalingGroupName=TestAutoScalingGroup"

收到的错误是无法识别状态检查失败。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-15T17:52:46.127

mon-put-metric-alarm AuthServerAlarm --comparison-operator GreaterThanOrEqualToThreshold --evaluation-periods 1 --region us-west-1 --metric-name StatusCheckFailed_Any --namespace "AWS/EC2" --period 600 --statistic Average --threshold 1 --alarm-actions arn:aws:autoscaling:us-west-1:13445335:scalingPolicy:1234:newGuid:autoScalingGroupName/TestAutoScalingGroup:policyName/LaunchNewInstance,arn:aws:sns:us-west-1:123 :Test --dimensions "AutoScalingGroupNameTestAutoScalingGroup"

# cluster-computing - 哪些分布式消息队列支持百万队列？

> ID：12868309
> 
> 赞同：2
> 
> 时间：2012-10-12T23:10:58.847
> 
> 标签：cluster-computing, message-queue, distributed-computing

我正在寻找一个支持数百万个队列的分布式消息队列，每个队列每秒处理数十条消息。

消息会很小（几十个字节），我不希望队列变得很长——每个队列最多有数十条消息，但是当系统运行时，队列应该保持公平空的。

我不确定集群中有多少个节点——可能取决于具体的解决方案，但如果我不得不猜测，我会说十个节点。我希望队列对集群中的单个节点故障具有相对弹性，但是这里和那里丢失的一些消息不会让我失眠。

这样的消息队列存在吗？似乎大多数领域都针对处理数百个具有高吞吐量的队列进行了优化。但是 SQS 建立在什么基础上？肯定不是魔法。

**更新：**

根据要求，它确实可能有助于阐明我的问题域。（我之前遗漏了细节，以免弄得一团糟。）我正在试验分布式元胞自动机，最初的目标是模拟一百万个细胞。在某些 CA 模型中，添加事件模型很有用，这样单元格就可以将事件发送给它的邻居。因此，有一百万个队列，每个队列有一个消费者和 8 个左右的生产者。

现在成本是一个问题，因为我自己资助这些实​​验。（因此亚马逊的 SQS 可能遥不可及。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:51:26.630

根据您的描述，看起来[OMG 的数据分发服务](http://en.wikipedia.org/wiki/Data_distribution_service)可能很合适。它与消息队列技术有关，但我更愿意将其称为分布式数据管理基础架构。它是完全分布式的，并支持高级功能，通过一组丰富的服务质量设置，您可以对数据的分布方式进行大量控制。

不太了解您的问题，我可以猜测可能是什么方法。DDS 是关于将强类型数据项的状态分布为具有类型属性的结构。您可以创建一个描述自动机状态的数据类型。它的属性之一可以是唯一标识系统中自动机的 ID。如果可能的话，这将根据一个方案进行分配，这样每个自动机都知道它的邻居的 ID 是什么（如果它们存在的话）。每个自动机将根据需要发布其状态，从而形成一个包含所有自动机当前状态的分布式数据空间。DDS 支持对该数据空间进行所谓的分区。如果您利用了这一点，那么您机器中的每个节点都将负责所有自动机的明确定义的子集。有线通信只会发生在与不同分区相邻的那些自动机上。由于自动机知道它们邻居的 ID，它们将能够在数据空间中查询它感兴趣的自动机的状态。

没有白板有点难以解释，但最终结果将是大多数自动机的单个实例（这是一种非常轻量级的消息队列），而边界上的那些自动机则有两个或三个实例的一个分区。如果您有十个节点和一百万个自动机，那么每个节点必须能够管理大约十万个自动机。我见过使用这种规模甚至更大的 DDS 构建的系统，每个实例每秒更新数十次。好处是这项技术可以很好地随节点数量扩展，因此您可以通过添加更多节点来降低每个节点的资源负载。

如果这是一个研究项目，那么您甚至可以免费使用商业产品。只是在 dds 研究许可证上谷歌。

# linq - Linq DataContext InsertOnSubmit 语句 只在表中插入 NULL 值

> ID：12868311
> 
> 赞同：0
> 
> 时间：2012-10-12T23:11:17.127
> 
> 标签：linq, insert, null, datacontext, insertonsubmit

请帮忙！！！

我有这段简单的代码，我不知道为什么不做应该做的事情是插入类中包含的数据，我不知道我做错了什么，因为插入语句只产生表中的 NULL 值。

这是代码：

```
 public void InsertData()
    {
        using (CTM dc = new CTM(conn))
        {
            //Table<ValidCCGpn> validCCGpn = dc.GetTable<ValidCCGpn>();

            for (int i = 0; i < 10; i++)
            {
                dc.ValidCCGpn.InsertOnSubmit(
                    new ValidCCGpn
                        {
                            Period = 201209,
                            GPN = "gpn" + i.ToString(),
                            CC_GPN = "cc_gpn" + i.ToString()
                        });
            }
            dc.SubmitChanges();
        }

    } 
```

这是我的 DataContext 和 and 表：

```
public partial class CTM : DataContext
{
    public CTM(string conn) : base(conn) { }

    public Table<ValidCCGpn> ValidCCGpn;
}

[Table(Name = "CAT.ValidCCGpn")]
public class ValidCCGpn
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int Id { get; set; }

    public int Period { get; set; }
    public string GPN { get; set; }
    public string CC_GPN { get; set; }

} 
```

这是创建表的 sql 脚本：

```
 CREATE TABLE [CAT].[ValidCCGpn](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Period] [int] NULL,
    [GPN] [varchar](50) NULL,
    [CC_GPN] [varchar](50) NULL,
 CONSTRAINT [PK_ValidCCGpn] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

这是我在表格中得到的结果：

```
Id  Period  GPN CC_GPN
1   NULL    NULL    NULL
2   NULL    NULL    NULL
3   NULL    NULL    NULL
4   NULL    NULL    NULL
5   NULL    NULL    NULL
6   NULL    NULL    NULL
7   NULL    NULL    NULL
8   NULL    NULL    NULL
9   NULL    NULL    NULL
10  NULL    NULL    NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:22:42.510

您在其他属性上缺少列属性

```
[Table(Name = "CAT.ValidCCGpn")] 
public class ValidCCGpn 
{ 
    [Column(IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)] 
    public int Id { get; set; } 

    [Column]
    public int Period { get; set; } 
    [Column]
    public string GPN { get; set; } 
    [Column]
    public string CC_GPN { get; set; } 

} 
```

# jquery - 通过jQuery跟踪div中的锚点

> ID：12868313
> 
> 赞同：-2
> 
> 时间：2012-10-12T23:11:35.603
> 
> 标签：jquery, html, hyperlink, anchor

有没有办法我可以通过 jQuery 跟踪`<a href=""></a>`特定 div 中有多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T23:12:26.180

您可以使用`length`属性：

```
$('div#specific a').length; 
```

如果你想知道有多少带有空*href*和*内容*的锚点，你可以使用`filter`方法和`:empty`选择器：

```
$('div#specific a:empty').filter(function(){
    return this.href === ""
}).length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:15:25.933

您可以使用长度和大小也可以：

但长度是首选（http://api.jquery.com/length/）

```
$('a').length
$('a').size(); 
```

注意： .length 属性是首选，因为它没有函数调用的开销（礼貌：[http](http://api.jquery.com/size/) ://api.jquery.com/size/ ）

# c# - 如何判断 ListView 正在显示哪些项目？

> ID：12868328
> 
> 赞同：2
> 
> 时间：2012-10-12T23:13:44.630
> 
> 标签：c#, xaml, windows-8, windows-runtime

这个问题与 WinRT 有关。

我如何知道哪些项目当前显示在 ListView 上（部分或全部）？

除此之外，我如何找到 ListView 中的顶部项目是什么？

环顾 ListView 类，并没有真正找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:21:36.933

要找到最上面的，您可以执行以下操作：

```
ListViewItem topItem = listView1.TopItem; 
```

不确定看到多远可见，但如果它有帮助你也可以做......

```
listView1.Items[0].EnsureVisible(); 
```

...使列表中的特定项目可见 - 如果需要，它会自动为您滚动。

# bash - 有没有更好的方法在 BASH 中交换文件名的前半部分和后半部分？

> ID：12868331
> 
> 赞同：1
> 
> 时间：2012-10-12T23:14:05.677
> 
> 标签：bash, shell

所以，我写了一个 BASH shell 脚本来重命名从异常艺术下载的图像文件，所以艺术家的名字是第一位的，然后是艺术作品的名字。（对于不熟悉 dA 的人，系统将可下载的图像文件命名为 imageTitle_by_ArtistsName.extention，这样很难快速组织图像）。它有效......但它看起来很笨重。有没有更优雅的方法来处理这个？

编码：

```
#!/bin/bash
#############################
# A short script for renaming
#Deviant Art files
#############################

echo "Please enter your image directory: "
read NewDir

echo "Please enter your destination directory: "
read DestinationDir

mkdir $DestinationDir
cd $NewDir

ls>>NamePile

ListOfFiles=`cat NamePile`

for x in $ListOfFiles
do

#Pull in the file Names
FileNameVar=$x

#Get the file types
FileType='.'${FileNameVar#*.}

#Chop the Artists name
ArtistsName=${FileNameVar%%.*}
ArtistsName=${ArtistsName##*_by_}

#Chop the pieces name
ImageName=${FileNameVar%%.*}
ImageName=${ImageName%%_by_*}

#Reassemble the New Name
NewFileName=$ArtistsName" "$ImageName$FileType

cp $x ../$DestinationDir/"$NewFileName"

done

rm NamePile
####################################### 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:55:20.480

您可以通过使用正则表达式匹配来大大简化循环。

```
for file in *; do  # Don't parse the output of ls; use pattern matching
  [[ $file =~ (.*)_by_(.*)\.(.*) ]] || continue

  imageName="${BASH_REMATCH[1]}"
  artistsName="${BASH_REMATCH[2]}"
  fileType="${BASH_REMATCH[3]}"

  cp "$file" "../$DestinationDir/$artistsName $imageName.$fileType"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:59:59.897

编写 shell 脚本时，最简单的方法通常是简单地利用现有的 Linux 实用程序。例如，在这种情况下，[`sed`](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)可以为您完成大部分繁重的工作。这可能不是最强大的代码片段，但您明白了：

```
for file in *.jpg; do
    newFile=`echo $file | sed 's/\(.*\)_by_\(.*\)\(\..*\)/\2_\1\3/g'`
    mv $file $newFile
done 
```

# c - 在 C 中发送字符串时，父亲未收到 UNIX 子消息中的未命名管道

> ID：12868332
> 
> 赞同：0
> 
> 时间：2012-10-12T23:14:11.120
> 
> 标签：c, unix, process, pipe

我有两个使用两个未命名管道创建的进程，但我无法弄清楚为什么我不能将消息从儿子发送给父亲。父亲似乎没有收到字符串。儿子正在发送正确的字符串；它只是没有到达目的地，无法弄清楚为什么......你能给我解释一下吗？

```
#include <unistd.h>
#include <sys/wait.h>
#include <sys/types.h>
#include <stdio.h>
#include <strings.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>
#include <time.h>

    #define max_chars_string 1000
    #define n_childs 2

    pid_t childs[n_childs];
    int channel[n_childs][2];

    void read_lines(char * filename, char (*pointer)[max_chars_string],int init_read,int n_lines);
    void get_strings_hash(char (*pointer_strings)[max_chars_string],char (*pointer_hashes)[max_chars_string],int total_lines);

    void worker(int mypipe,char filename[],int n_lines){ // meter as funcoes de ler passwords no filho
        int resources[2];// numero de linhas que cada processo tem de ler
        int i = 0;

        //definicao arrays
        char strings_hashes[n_lines][max_chars_string];//aray de string com as strings lidas do ficheiro
            char * pointer_strings = &strings_hashes[0][0];//ponteiro para o inicio do array das hashes

        read_lines(filename,strings_hashes,0,n_lines); // le as strings do ficheiro e passa para o array

        for(i = 0;i<n_lines;i++){
            printf("%s \n",strings_hashes[i]);
        }
        printf("[%d] My parent is: %d\n", getpid(), getppid());

        //open pipe to write and close pipe to read

        close(channel[mypipe][0]);
        i = 0;
        int incr = 0;
        while (i<n_lines) {
            printf("[Son] Password sent e  %s: \n",strings_hashes[incr]);
             write(channel[mypipe][1], strings_hashes[incr], strlen(strings_hashes[incr]));
             incr++;
             i++;
        }
        exit(0);
    }

    int main(int argc, char **argv)
    {
        char *filename;
        int status;//status do processos filho
        int resources[2];// numero de linhas que cada processo tem de ler
        int n_lines; //numero de linhas do ficheiro
        int i = 0;

          // Create a pipe
        filename = (char*)malloc(strlen(argv[1])*sizeof(char)+1);

        if(argc !=3){
            fprintf(stderr, "Usage : %s [text_file] [cores]",argv[0]);
            exit(0);
        }

        strcpy(filename,argv[1]);

        char get_file [strlen(filename)];
        strcpy(get_file,filename);

     // start the processes
       for(i = 0; i <atoi(argv[2]);i++){
            pipe(channel[i]);
            childs[i] = fork();

            if(childs[i] == -1){
               perror("Failed to fork");
               return 1;
           }
           if (childs[i] == 0)
           {
              worker(i,get_file,n_lines);
           }
           close(channel[i][1]);
       }

               i = 0;
               int k = 0;
               int fd;
               fd_set read_set;
               FD_ZERO(&read_set);
               char string_lida [30];

               // working father
               printf("[%d] I'm the father!\n", getpid());
               printf("[Father]orking ...\n");

                //unammed_pipes connection
                while(k<n_childs){

                    FD_SET(channel[0][0], &read_set);
                    for(i=0;i<n_childs;i++){
                            FD_SET(channel[i][0], &read_set);
                            if(fd<channel[i][0]){      fd=channel[i][0];
                            }
                        }

                    if(select(fd+1,&read_set,NULL,NULL,NULL)>0){
                        for(i=0;i<n_childs;i++){
                            if(FD_ISSET(channel[i][0], &read_set)){                    
                                read(channel[i][0],string_lida,strlen(string_lida));
                                printf("[Father]pipe %d - string lida:%s\n",i,string_lida);

                                k++;                 
                            }
                        }
                    }
                    fd=1;
                }
              //
              //waiting for childs ...
            for(i=0;i<n_childs;i++){
                wait(&status);
                printf("waiting for childs \n");
              }

      return 0;
    }  

    void get_strings_hash(char (*pointer_strings)[max_chars_string],char (*pointer_hashes)[max_chars_string],int total_lines)//vai ao array de strings e corta a parte de hash e mete num array
    {
        int i = 0;
        char *strings;
        char *hash;

        for(i = 0;i<total_lines;i++){
                strings = (char*)malloc(strlen(pointer_strings)*sizeof(char)+1);
                strcpy(strings,*pointer_strings);
                hash = (char*)malloc(strlen(pointer_strings)*sizeof(char)+1);
                find_hash(strings,hash);
                strcpy(*pointer_hashes,hash);
            pointer_hashes++;
            pointer_strings++;
        }

    }

    void read_lines(char * filename, char (*pointer)[max_chars_string],int init_read,int n_lines){ 
        FILE *fp;
        char str[max_chars_string];
        int i =0;

        if((fp = fopen(filename, "r"))==NULL) {
          printf("Cannot open file.\n");
          exit(1);
        }

        if(init_read>0 && init_read<=n_lines){
         for(i = 0;i<init_read;i++){
             fgets(str, sizeof str, fp);
           for(i = init_read;i<n_lines;i++){
               fgets(str, sizeof str, fp);
               strcpy(*pointer, str); //copia para a posicao actula do ponteiro
               pointer++;
           }
         }
        }
        if(init_read<=n_lines && init_read==0){
           for(i = init_read;i<n_lines;i++){
                fgets(str, sizeof str, fp);
               strcpy(*pointer, str); //copia para a posicao actula do ponteiro
               pointer++;
           }
         }

      fclose(fp);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:29:35.177

一个问题是这一行：

```
read(channel[i][0],string_lida,strlen(string_lida)); 
```

因为你没有初始化`string_lida`，所以`strlen`可能会返回任何东西，但我猜它会返回 0（字符串为空），所以你从来没有读过任何东西。你想要`sizeof(string_lida)`。然后，您需要手动 NUL 终止字符串，`string_lida`因为读取不会这样做。因此，您需要检查 的返回值`read`以查看读取了多少个字符（或者它是否是 EOF）。

您也只等待读取总共 n_childs 个字符串——如果每个孩子发送多个字符串，您将不会得到其中的大部分。

# python - 将表达式解析为列表

> ID：12868335
> 
> 赞同：1
> 
> 时间：2012-10-12T23:14:29.890
> 
> 标签：python, parsing, expression

我得到了一个使用括号和 + 的表达式，例如 (((a+b)+c)+(d+e))。

我需要找到它的解析树，然后打印出这个解析树的列表形式，如：[ [ [a, b], c ], [d, e] ]

我在想我会使用类似 ast 的东西，然后是 ast2list。但是，由于我没有完全理解这些，我反复收到语法错误。这就是我所拥有的：

```
import ast
import parser

a = ast.parse("(((a+b)+c)+(d+e))", mode='eval')
b = parser.ast2list(a)

print(b) 
```

谁能指导我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:32:48.033

Colleen 的评论可以通过以下方式实现：

```
str = "(((a+b)+c)+(d+e))"

replacements = [
    ('(','['),
    (')',']'),
    ('+',','),
    # If a,b,c,d,e are defined variables, you don't need the following 5 lines
    ('a',"'a'"),
    ('b',"'b'"),
    ('c',"'c'"),
    ('d',"'d'"),
    ('e',"'e'"),
]

for (f,s) in replacements:
    str = str.replace(f,s)

obj = eval(str)

print(str)       # [[['a','b'],'c'],['d','e']]
print(obj)       # [[['a', 'b'], 'c'], ['d', 'e']]
# You can access the parsed elements as you would any iterable:
print(obj[0])    # [['a', 'b'], 'c']
print(obj[1])    # ['d', 'e']
print(obj[1][0]) # d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T23:52:31.073

查看描述该类的ast 模块[的文档。](http://docs.python.org/library/ast.html)`NodeVisitor`

```
import ast
import sys

class MyNodeVisitor(ast.NodeVisitor):
    op_dict = {
        ast.Add : '+',
        ast.Sub : '-',
        ast.Mult : '*',
    }

    type_dict = {
        ast.BinOp: lambda s, n: s.handleBinOp(n),
        ast.Name: lambda s, n: getattr(n, 'id'),
        ast.Num: lambda s, n: getattr(n, 'n'),
    }

    def __init__(self, *args, **kwargs):
        ast.NodeVisitor.__init__(self, *args, **kwargs)
        self.ast = []

    def handleBinOp(self, node):
        return (self.op_dict[type(node.op)], self.handleNode(node.left), 
                    self.handleNode(node.right))

    def handleNode(self, node):
        value = self.type_dict.get(type(node), None)
        return value(self, node)

    def visit_BinOp(self, node):
        op = self.handleBinOp(node)
        self.ast.append(op)

    def visit_Name(self, node):
        self.ast.append(node.id)

    def visit_Num(self, node):
        self.ast.append(node.n)

    def currentTree(self):
        return reversed(self.ast)

a = ast.parse(sys.argv[1])
visitor = MyNodeVisitor()
visitor.visit(a)
print list(visitor.currentTree()) 
```

看起来像这样：

```
 $ ./ast_tree.py "5 + (1 + 2) * 3"
 [('+', 5, ('*', ('+', 1, 2), 3))] 
```

享受。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T03:38:00.870

如果你真的想做一个解析器，首先*不要*编写任何代码，而是要了解你的语法应该如何工作。[Backus-Naur 格式](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)或 BNF 是用于定义语法的典型符号。[中缀表示法](http://en.wikipedia.org/wiki/Infix_notation)是一个常见的软件工程解析主题，中缀表示法的基本 BNF 结构如下：

```
letter ::= 'a'..'z'
operand ::= letter+
term ::= operand | '(' expr ')'
expr ::= term ( '+' term )* 
```

关键是它`term`包含您的字母操作数*或*包含在 () 中的整个子表达式。该子表达式与整个表达式相同，因此此递归定义负责所有括号嵌套。然后，表达式是一个术语，后跟零个或多个术语，使用二进制“+”运算符添加。（您也可以扩展`term`以处理减法和乘法/除法，但我不会让这个答案变得过于复杂。）

Pyparsing 是一个包，它可以使用 Python 对象轻松地将 BNF 转换为工作解析器（Ply、spark 和 yapps 是其他解析器，它们遵循更传统的 lex/yacc 解析器创建模型）。这是直接使用pyparsing实现的BNF：

```
from pyparsing import Suppress, Word, alphas, Forward, Group, ZeroOrMore

LPAR, RPAR, PLUS = map(Suppress, "()+")
operand = Word(alphas)

# forward declare our overall expression, necessary when defining a recursive grammar
expr = Forward()

# each term is either an alpha operand, or an expr in ()'s
term = operand | Group(LPAR + expr + RPAR)

# define expr as a term, with optional '+ term's
expr << term + ZeroOrMore(PLUS + term)

# try it out
s = "(((a+b)+c)+(d+e))"
print expr.parseString(s) 
```

给予：

```
[[[['a', 'b'], 'c'], ['d', 'e']]] 
```

识别操作优先级的中缀表示法是一个非常常见的解析器，或者是更大解析器的一部分，因此 pyparsing 包含一个帮助器内置调用`operatorPrecedence`来处理所有嵌套/分组/递归等。这是使用 编写的同一个解析器`operatorPrecedence`：

```
from pyparsing import operatorPrecedence, opAssoc, Word, alphas, Suppress

# define an infix notation with precedence of operations
# you only define one operation '+', so this is a simple case
operand = Word(alphas)
expr = operatorPrecedence(operand,
    [
    ('+', 2, opAssoc.LEFT),
    ])

print expr.parseString(s) 
```

给出与以前相同的结果。

可以在 pyparsing wiki 上在线找到更详细的示例——fourFn.py 中的显式实现和[simpleArith.py](http://pyparsing.wikispaces.com/file/view/simpleArith.py)[中](http://pyparsing.wikispaces.com/file/view/fourFn.py)的 operatorPrecedence 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T23:49:55.423

我也会做翻译。通过 ast 来实现*这个目的*有点麻烦。

```
[tw-172-25-24-198 ~]$ cat a1.py 
import re

def multiple_replace(text, adict):
    rx = re.compile('|'.join(map(re.escape, adict)))
    def one_xlat(match):
        return adict[match.group(0)]
    return rx.sub(one_xlat, text)

# Closure based approach
def make_xlat(*args, **kwds):
    adict = dict(*args, **kwds)
    rx = re.compile('|'.join(map(re.escape, adict)))
    def one_xlat(match):
        return adict[match.group(0)]
    def xlat(text):
        return rx.sub(one_xlat, text)
    return xlat

if __name__ == "__main__":
    text = "((a+b)+c+(d+(e+f)))"
    adict = {
        "+":",",
        "(":"[",
        ")":"]",
    }
    translate = make_xlat(adict)
    print translate(text) 
```

应该给

```
[[a,b],c,[d,[e,f]]] 
```

注意 - 我的收藏中一直有这个片段。它来自 Python Cookbook。它对字符串进行多次替换，一次通过字典中的替换键和值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T02:36:50.763

这是一个足够简单的问题，您*可以*从头开始编写解决方案。这假定所有变量名称都是一个字符长，或者表达式已正确转换为标记列表。我投了支票以确保所有括号都匹配；显然你应该换掉`CustomError`你想抛出的任何异常或你想采取的其他行动。

```
def expr_to_list(ex):
    tree = []
    stack = [tree]
    for c in ex:
        if c == '(':
            new_node = []
            stack[-1].append(new_node)
            stack.append(new_node)
        elif c == '+' or c == ' ':
            continue
        elif c == ')':
            if stack[-1] == tree:
                raise CustomError('Unmatched Parenthesis')
            stack.pop()
        else:
            stack[-1].append(c)
    if stack[-1] != tree:
        raise CustomError('Unmatched Parenthesis')
    return tree 
```

测试：

```
>>> expr_to_list('a + (b + c + (x + (y + z) + (d + e)))')
['a', ['b', 'c', ['x', ['y', 'z'], ['d', 'e']]]] 
```

对于多字符变量名称，使用正则表达式进行标记化：

```
>>> tokens = re.findall('\(|\)|\+|[\w]+', 
                        '(apple + orange + (banana + grapefruit))')
>>> tokens
['(', 'apple', '+', 'orange', '+', '(', 'banana', '+', 'grapefruit', ')', ')']
>>> expr_to_list(tokens)
[['apple', 'orange', ['banana', 'grapefruit']]] 
```

# sencha-touch-2 - 使用关闭按钮传递视图

> ID：12868341
> 
> 赞同：0
> 
> 时间：2012-10-12T23:14:54.650
> 
> 标签：sencha-touch-2

我希望关闭按钮是可重用的，所以我创建了自己的类，这样我就可以将它附加到需要它的视图上。我只想能够将附加到视图的视图传递给控制器​​以关闭该视图。它应该相当简单，我怀疑这是多少人这样做，但我无法让它正常工作。我让它关闭视图但得到错误 Uncaught TypeError: Cannot read property 'dom' of null 我理解这通常意味着视图没有被破坏，但我认为这告诉它破坏视图：

```
Ext.Viewport.remove(curView, true); 
```

这是我认为相关的代码控制器：

```
closeView: function(btn, e,opts){             
            var curView = btn.getParent().getParent();
           console.log('From btn: ' + curView + ',' + opts);             
           Ext.Viewport.remove(curView, true);} 
```

看法：

```
Ext.define('SenchaFirstApp.view.DetailView',{
      extend: 'Ext.tab.Panel',
      requires: ['Ext.Toolbar', 'Ext.tab.Panel', 'Ext.form.FieldSet', 'Ext.field.Select'],
      model: ['SenchaFirstApp.model.Details', 'SenchaFirstApp.model.SiteInfo'],
      alias: 'widget.detailview',
//      xtype: 'tabpanel',

    config:
    {
          scrollable: true,
          width: 1500,
          height: 800,
    //      fullscreen: true,
          layout: {type: 'card', animation:{type: 'flip'}},
          centered: true,
          border: 10,
          tabBar: {
              docked: 'top',
          }, 
          formParams: {
        },
      items: 
      [
       {
         //Tab bar 
         xtype:  'tbar',
         title: 'Details View',
             items: [
            {
              xtype: 'closebtn',
              id: 'detailsBtn',
              sourceForm: this
            }]
        },
        {
            title: 'Equipment Monitor',        //first tab
            xtype: 'monitor',
        },                        
        {
            title: 'Site Information',            //second tab
            xtype: 'siteinfo',
        }
    ]                    
} //End Config 
```

我试着用

```
Ext.Viewport.remove(Ext.Viewport.getActiveItem, true) 
```

但这也没有用。我怀疑这可能与我创建该视图的方式有关。我是 Sencha 的新手，所以我可能做错了很多事情，所以我很感激帮助。

我忘了提一下，关闭选项卡面板后，如果不刷新就无法再次打开它，我再次确定这是由于视图没有被破坏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:52:15.753

看来问题出在使用 id 上。我以为我把它们拿出来了，但我想没有。我取出 id 并使用别名并让它工作。我仍然不知道如何传递附加到按钮的视图，但现在

```
Ext.Viewport.remove(Ext.Viewport.getActiveItem, true) 
```

正在工作中。true 属性告诉它在删除视图后销毁视图。

# performance - 捕获所有 Windows 性能监视器计数器

> ID：12868345
> 
> 赞同：0
> 
> 时间：2012-10-12T23:15:35.877
> 
> 标签：performance, performancecounter, perfmon, performance-monitor

我需要监控一些服务器的性能，因此需要为此创建性能计数器。

目前我不得不手动添加计数器来创建数据收集器，这需要很长时间才能完成，因为服务器有不同的自定义计数器。

有没有一种简单的方法可以选择所有计数器并收集它们，而不是一个一个地选择和添加？

谢谢瑞凯诗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T13:22:29.540

是的，有一种方法，您可以随时导出和导入数据收集器集，然后手动调整它。因此，您可以在拥有所需的所有指标后创建它，然后您可以在其他服务器上删除不需要的指标。

要导入您创建的模板，请执行以下操作：

*   展开数据收集器集
*   右键单击用户定义
*   单击新的数据收集器集
*   使用选项使用模板
*   浏览您的模板

![导入数据收集器集](../Images/4767756b7e5a532c71268d5ec8d7b459.png)

# c++ - 自动将指向派生类的指针列表转换为指向基类的指针列表

> ID：12868347
> 
> 赞同：4
> 
> 时间：2012-10-12T23:15:46.187
> 
> 标签：c++, inheritance, stl

假设我有一个基类和派生类，以及一个函数，它采用指向基类的指针的 stl 向量：

```
class A { public: int x; };

class B : public A { };

void foo(const vector<A*> &va) {
    for (vector<A*>::const_iterator it = va.begin(); it < va.end(); it++)
        cout << (*it)->x << endl;
} 
```

有没有办法将指针列表传递给派生类？IE：

```
vector<B*> vb;
// ... add pointers to vb ...
foo(vb); 
```

以上将导致以下编译器错误：

```
error: could not convert ‘vb’ from ‘std::vector<B*>’ to ‘std::vector<A*>’ 
```

即使 B* 可以转换为 A*。

最后，如果有纯指针的解决方案，它是否也适用于 boost 共享指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T23:20:47.703

`std::vector<B*> and std::vector<A*>`技术上不相关。C++ 不允许你想要的东西。

一种解决方法...为什么不使用`std::vector<Base*>`并插入`Derived`对象？这就是多态性、动态调度等的重点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T23:28:30.243

您可以从派生的基指针向量创建基指针的临时向量：

```
std::vector<B*> bv;
foo(std::vector<A*>(bv.begin(), bv.end())); 
```

但这要求 foo 接受 const 引用而不是像您的示例中那样引用，而且效率非常低，需要内存分配和复制，

其他首选解决方案是使您的 foo 成为功能模板：

```
template <class T>
void foo(std::vector<T*>& v); 
```

为确保`foo`仅用于 A 派生，请使用 type_traits 和 SFINAE 技术，请注意您`foo`仅使用第一个参数调用，第二个仅用于消除非从 A 派生的类型的此函数模板（SFINAE）：

```
#include <type_traits>

template <class T>
void foo(std::vector<T*>& av,
         // don't use this second param 
         typename std::enable_if<std::is_base_of<A,T>::value>::type* = 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T23:31:53.630

正如@Science_Fiction 之前所说，拥有一个包含指向基本类型的指针并将指向基本类型和派生类型的指针插入其中的向量更有意义，但是如果您不控制这些数组的创建，则可以使用模板：

```
template <class T>
inline void foo(const vector<T*>& v)
{
    for (vector<T*>::const_iterator it = v.begin(); it < v.end(); ++it)
    {
        A* a = (A*) *it;
        cout << a->x << endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T23:21:02.057

您不能传递 a `vector<B*>`to`foo`因为类型不兼容——`B*`隐式转换为`A*`.

您可以做的是创建一个`vector`正确类型的新的，例如：

```
vector<B*> vb;
// ... add pointers to vb ...

vector<A*> va(vb.size());
std::transform(vb.begin(), vb.end(), va.begin(),
               [] (B* p) { return static_cast<A*>(p); }); 
```

# android - Android - Achartengine XYScatter OnclickListener

> ID：12868349
> 
> 赞同：5
> 
> 时间：2012-10-12T23:15:49.997
> 
> 标签：android, achartengine

我在让 onclicklistener 与 achartengine1.0.0 for android 一起工作时遇到问题。具体来说，我无法从“.getCurrentSeriesAndPoint”（始终为空）返回任何内容。

```
SeriesSelection seriesSelection = gView.getCurrentSeriesAndPoint(); 
```

所以我有一个类来创建我的图表视图，如下所示......

```
public class xyScatter extends Application {
    public GraphicalView getGView(Context context) {

         ...(STUFF)...

          mRenderer.setClickEnabled(true);
          mRenderer.setSelectableBuffer(100);

         ...(STUFF)...

          return ChartFactory.getScatterChartView(context, dataset, mRenderer);
    }
} 
```

然后在我的活动中，我有以下方法

```
private void displayXY() {

   xyScatter xyScat = new xyScatter();
   final GraphicalView gView = xyScat.getGView(this);
   glayout.removeAllViews();
   glayout.addView(gView);

   gView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            SeriesSelection seriesSelection = gView.getCurrentSeriesAndPoint();

            Log.d("seriesSelection", String.valueOf(seriesSelection));

            if (seriesSelection == null) {
                Log.d("OnClickXY", "Nothing Selected");
            } else {
                Log.d("OnClickXY", "Something Selected");
            }
        }
    });

} 
```

这与我在线性布局中将图表添加为 GraphicalView 有关吗？

我尝试搜索了几个网站均无济于事。[例子](https://stackoverflow.com/questions/6273796/achartengine-getting-values-of-plots-on-click)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:18:40.150

如果有人有兴趣查看更多执行此操作的示例，我建议查看官方 AChartEngine 演示代码，特别是在与您的问题相关的[这个示例中。](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)

# ruby-on-rails - rails 中的 caches_page，json 格式

> ID：12868352
> 
> 赞同：2
> 
> 时间：2012-10-12T23:16:06.413
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json, caching

我有一个设置为缓存 json 调用的应用程序。我尝试了各种代码语法，它似乎只有在我有以下情况时才能正确缓存：

```
 caches_page :index, :gzip => true
    cache_sweeper :institutes_sweeper

    respond_to :json, :js

    def index
      @institutes = Institute.select([:id, :name]).all
      render :json => { :institutes => @institutes }
    end 
```

现在，当它被击中时，它会呈现一个 html 文件，并且缓存会按预期工作。Rails 堆栈没有受到影响。

如果我抛出一个格式块并让渲染响应 json，缓存将创建文件；但是，它会在下一次创建另一个文件并忽略已经存在的文件。

apache 是否必须进行不同的配置才能按预期工作？

另外，我想使用 public/cache/ 作为存储缓存的目录。我正确配置了导轨；但是，我想知道如何配置 apache 来提供那些缓存的文件（上面同样的问题发生在文件被创建但没有被提供的地方）。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:42:58.630

只是想在这里解决我的问题。

需要告知 Apache 缓存文件所在的位置。它仅存储在公共区域时起作用的原因是因为这就是 apache 默认的行为方式。将以下配置添加到您定义虚拟主机的任何位置

```
RailsAllowModRewrite On
RewriteEngine On

RewriteCond %{THE_REQUEST} ^(GET|HEAD)
RewriteCond %{REQUEST_URI} ^/([^.]+)$
RewriteCond %{DOCUMENT_ROOT}/cache/%1.json -f
RewriteRule ^/[^.]+$ /cache/%1.json [QSA,L]

RewriteCond %{THE_REQUEST} ^(GET|HEAD)
RewriteCond %{DOCUMENT_ROOT}/cache/index.json -f
RewriteRule ^/$ /cache/index.json [QSA,L]

RewriteCond %{THE_REQUEST} ^(GET|HEAD)
RewriteCond %{REQUEST_URI} ^/([^.]+)$
RewriteCond %{DOCUMENT_ROOT}/cache/%1.html -f
RewriteRule ^/[^.]+$ /cache/%1.html [QSA,L]

RewriteCond %{THE_REQUEST} ^(GET|HEAD)
RewriteCond %{DOCUMENT_ROOT}/cache/index.html -f
RewriteRule ^/$ /cache/index.html [QSA,L] 
```

现在，解决 json 渲染 html 的问题，我发现这是因为我在应用程序控制器中的调用在实际函数执行之前执行。如果我在这些函数上使用 skip_before_filter，我会更近一步。

我还发现将响应包装在格式块中会更好。

```
respond_to do |format| 
  format.json { json: { institutes: @institutes } }
end 
```

这将导致 json 被缓存，并且服务器配置将导致它被正确提供。

我相信对于那些使用 Nginx 的人来说，应该使用以下配置（虽然不是 100% 肯定）

```
 if (-f $request_filename/index.html) {
      rewrite (.*) $1/cache/index.html break;
    }

    if (-f $request_filename/index.json) {
      rewrite (.*) $1/cache/index.json break;
    } 
```

如果有人对上面的代码有任何反馈，我很乐意听到。谢谢！

# session - twitter oAuth 的会话即将到期

> ID：12868361
> 
> 赞同：1
> 
> 时间：2012-10-12T23:18:43.100
> 
> 标签：session, twitter, oauth

我正在使用 Abraham Williams 的 oAuth 库来更新状态。该应用程序没有 UI（除了来自 Twitter 的凭据提示。相反，用户在浏览器中输入 URL。

调用 URL 时，我收到错误消息：“无法发布推文。错误：原因：1”。

我插入了一些测试代码，似乎会话在转换之间丢失了：$_SESSION['tweetmsg'] 在 index.php 的初始调用中设置，但是当切换到 connect.php 时，似乎好像会话丢失了。有任何想法吗？

以下是源代码：

索引.php

```
<?php
include_once '../../winsinclude/tw_config.php';
require_once "../../winsinclude/twitteroauth.php";
require_once "../../winsinclude/OAuth.php";
session_start();
if (empty($_SESSION['access_token'])) {
  $_SESSION['tweetmsg'] = create_tweet_text();
  print "<script>self.location='./connect.php');</script>";
}

$connection = new TwitterOAuth(
  CONSUMER_KEY,
  CONSUMER_SECRET,
  $_SESSION['access_token']['oauth_token'],
  $_SESSION['access_token']['oauth_token_secret']
);

if (!isset($_SESSION['tweetmsg'])) {
  exit('No tweet value in session or from form');
}
$tweetmsg = $_SESSION['tweetmsg'];
$result = $connection->post('statuses/update', array('status' => $tweetmsg));
unset($_SESSION['tweetmsg']);
if (200 === $connection->http_code) {
  echo 'Tweet Posted: '.$tweetmsg;
}
else {
  echo 'Could not post Tweet. Error: '.$httpCode.' Reason: '.
  session_destroy();
}
function create_tweet_text () {
  return 'this is a test';
} 
```

连接.php

```
?php
session_start();
include_once '../../winsinclude/tw_config.php';
require_once "../../winsinclude/twitteroauth.php";
require_once "../../winsinclude/OAuth.php";

$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET);
$request_token = $connection->getRequestToken(OAUTH_CALLBACK.'callback.php');

$_SESSION['oauth_token'] = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];

$url = $connection->getAuthorizeURL($request_token);
print "<script>self.location='$url';</script>"; 
```

回调.php

```
<?php
session_start();
include_once '../../winsinclude/tw_config.php';
require_once "../../winsinclude/twitteroauth.php";
require_once "../../winsinclude/OAuth.php";

if (
  isset($_REQUEST['oauth_token']) 
  && $_SESSION['oauth_token'] !== $_REQUEST['oauth_token']
) {
  echo 'Session expired';
}
else {
  $connection = new TwitterOAuth(
    CONSUMER_KEY,
    CONSUMER_SECRET,
    $_SESSION['oauth_token'],
    $_SESSION['oauth_token_secret']
  );
  $_SESSION['access_token'] = $connection->getAccessToken($_REQUEST['oauth_verifier']);
  print "<script>self.location='index.php';</script>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:36:40.853

最近 Twitter 停用了一些用于 oAuth 的 http url，并将它们替换为 https 等效项。如果您可以在包含中看到 URL 字符串[http://twitter.com/oauth/request_token](http://twitter.com/oauth/request_token)，则意味着您需要关注[https://dev.twitter.com/discussions/10803](https://dev.twitter.com/discussions/10803)并将所有调用更改为 https.. .

# android - android x86 模拟器不尊重 vm.heapSize

> ID：12868366
> 
> 赞同：2
> 
> 时间：2012-10-12T23:19:21.663
> 
> 标签：android, android-emulator, adb, avd

Android x86 ( API-10 ) 模拟器似乎不遵守通过 AVD 管理器指定的 VM 大小。有关从 AVD 管理器创建的 config.ini，请参见下文

```
hw.lcd.density=240
sdcard.size=64M
skin.name=WVGA800
skin.path=add-ons/addon-intel_atom_x86_system_image-intel_corporation-10/skins/WVGA800
hw.cpu.arch=x86
abi.type=x86
hw.keyboard=yes
vm.heapSize=96
hw.ramSize=256
image.sysdir.1=add-ons/addon-intel_atom_x86_system_image-intel_corporation-10/images/x86/ 
```

当我启动应用程序时，我打印出 maxmemory 和一些细节正在使用它：

```
Runtime rt = Runtime.getRuntime();
long maxMemory = rt.maxMemory();
Log.v("onCreate", "maxMemory:" + Long.toString(maxMemory));
ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
int memoryClass = am.getMemoryClass();
Log.v("onCreate", "memoryClass:" + Integer.toString(memoryClass)); 
```

这给了我

```
10-12 17:07:53.817: VERBOSE/onCreate(222): maxMemory:25165824
10-12 17:07:53.827: VERBOSE/onCreate(222): memoryClass:24 
```

使用 Ubuntu 12.04，SDK 工具 20.0.3，平台工具 14。

# php - 在不同的页面 wordpress 网站上显示特色图片

> ID：12868374
> 
> 赞同：0
> 
> 时间：2012-10-12T23:20:18.840
> 
> 标签：php, html, wordpress

我需要能够在单独的页面上显示特色图片（我的 wordpress 网站中的第 4 类），只是图片而不是帖子的其余部分。

我创建了一个名为“ban”的模板，并将其附加到一个名为横幅的页面，在该页面中显示类别 4 图像。

我能够列出类别，但据我所知：

```
<?php wp_list_categories('include=4') ?> 
```

我不知道该怎么做，如果有人可以向我解释，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:16:52.570

如果您想从类别 4 下的帖子中获取所有特色图片，那么这可能是解决方案

```
$the_query = new WP_Query();
$the_query->query("cat=4&nopaging=true");
if ($the_query->have_posts()) : 
while($the_query->have_posts()) : $the_query->the_post();

      if(has_post_thumbnail()) : 
        the_post_thumbnail();
      endif;

endwhile; 
endif; 
wp_reset_postdata(); 
```

如果你想获得图像的真实宽度/高度，你可以使用这个：

```
$image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' ); 
?>
<img src='<?php echo $image[0]; ?>' />
<?php 
```

只需替换 the_post_thumbnail() 函数。希望有帮助！

# linux - 如何通过htaccess删除网址中的点

> ID：12868378
> 
> 赞同：1
> 
> 时间：2012-10-12T23:20:38.543
> 
> 标签：linux, apache, .htaccess, mod-rewrite, url-rewriting

我收到某些 url 的 403 Access Forbidden 错误。我找到了问题的根本原因。只要网址中有一个点（。），我就会得到 403 禁止。

谷歌已经索引了数千个网址，因此我想通过 htaccess 解决。

例如

我想删除以下网址的（点）

从

```
http://www.example.com/zero/one/two/three/four/five/six./seven/eight.html 
```

至

```
http://www.example.com/zero/one/two/three/four/five/six/seven/eight.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:44:30.140

mod rewrite 应该能够做到这一点：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^([^.]*)\.([^.]*)\.?([^.]*)?\.?([^.]*)?\.?([^.]*)?(\.html|php|asp|otherextenstionsdesiredhere$) $1$2$3$4 [NC] 
```

应允许一次删除 1 到 3 个周期。如果您需要更多，只需重复一遍。如果最多只有 1 个周期，则去掉一部分。您可以在[http://regexpal.com/对其进行测试，并在](http://regexpal.com/)[http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)阅读有关重写的更多信息

# c++ - 是否可以专门针对语言链接模板？

> ID：12868383
> 
> 赞同：8
> 
> 时间：2012-10-12T23:21:11.630
> 
> 标签：c++, c++11, sfinae, linkage

函数的语言链接是其类型的一部分：

ISO C++ 标准的 7.5.1 [dcl.link]：

> 所有函数类型、函数名和变量名的默认语言链接是 C++ 语言链接。具有不同语言链接的两个函数类型是不同的类型，即使它们在其他方面相同。

是否可以针对函数指针的链接类型专门化模板，或者以其他方式自省函数指针的类型以确定其在编译时的链接？

第一次尝试似乎不合法：

```
#include <iostream>
#include <typeinfo>

struct cpp {};
struct c {};

extern "C++" void foo()
{
  std::cout << "foo" << std::endl;
}

extern "C" void bar()
{
  std::cout << "bar" << std::endl;
}

template<typename> struct linkage;

template<>
  struct linkage<void(*)()>
{
  typedef cpp type;
};

template<>
  struct linkage<extern "C" void(*)()>
{
  typedef c type;
}

int main()
{
  std::cout << "linkage of foo: " << typeid(linkage<decltype(&foo)>::type).name() << std::endl;
  std::cout << "linkage of bar: " << typeid(linkage<decltype(&bar)>::type).name() << std::endl;
  return 0;
} 
```

`g++-4.6`输出：

```
$ g++ -std=c++0x test.cpp 
test.cpp:26:38: error: template argument 1 is invalid
test.cpp:26:3: error: new types may not be defined in a return type
test.cpp:26:3: note: (perhaps a semicolon is missing after the definition of ‘&lt;type error>’)
test.cpp:32:10: error: two or more data types in declaration of ‘main’ 
```

是否有一些 SFINAE 应用程序可以实现此功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T01:03:10.110

是的，我相信您应该能够根据 C++ 标准根据其语言链接专门化模板。[我用Comeau 编译器在线](http://www.comeaucomputing.com/tryitout/)测试了以下代码，它编译没有错误：

```
#include <iostream>
#include <typeinfo>

struct cpp {};
struct c {};

extern "C++" typedef void(*cppfunc)();
extern "C" typedef void(*cfunc)();

extern "C++" void foo()
{
  std::cout << "foo" << std::endl;
}

extern "C" void bar()
{
  std::cout << "bar" << std::endl;
}

template<typename> struct linkage;

template<>
  struct linkage<cppfunc>
{
  typedef cpp type;
};

template<>
  struct linkage<cfunc>
{
  typedef c type;
};

int main()
{
  std::cout << "linkage of foo: " << typeid(linkage<decltype(&foo)>::type).name() << std::endl;
  std::cout << "linkage of bar: " << typeid(linkage<decltype(&bar)>::type).name() << std::endl;
  return 0;
} 
```

但是，我相信[由于 gcc 错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=2316)，gcc 不会根据语言链接来区分函数类型，因此 gcc 无法做到这一点（而且似乎不确定他们何时会修复此问题）。

# c - OpenSSL GOST 参数集

> ID：12868384
> 
> 赞同：3
> 
> 时间：2012-10-12T23:21:15.483
> 
> 标签：c, cryptography, openssl, gost3410

如果有办法以编程方式将自定义参数插入到 GOST 2001 参数集中，应该使用什么 API？在`EVP_PKEY`通过模拟 OpenSSLs 的函数生成后，我发现参数是绑定到 NID 的，所以需要在那里添加自定义的。任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:33:11.993

下一个方法解决了问题：

1.  `FILL_GOST2001_PARAMS:unsupported parameter set`如果您没有将您`CurveName`的参数设置为现有参数集 NID 之一，则会出现上错误，因此它应该是这样的： `EC_GROUP_set_curve_name(CurveGroup,NID_id_GostR3410_2001_TestParamSet)`.
2.  但是为默认参数设置设置一个并不意味着每次都会使用它，例如在`EC_KEY_check_key()`函数中，您调用它。OpenSSL 所做的是 - 它从您的`EC_KEY`对象中获取参数，因此它很容易定制，只要它们是正确的（点在曲线上等）。

# google-chrome - Google Chrome 扩展程序 - 以编程方式打开弹出窗口

> ID：12868386
> 
> 赞同：5
> 
> 时间：2012-10-12T23:21:29.913
> 
> 标签：google-chrome, google-chrome-extension

当您制作 Google Chrome 扩展程序时，您可以选择“Default_Popup”，有没有办法以编程方式打开弹出窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T18:32:19.827

没有直接的方式以编程方式打开弹出窗口。但是，如果您希望根据键盘快捷键打开它，您可以将[命令 API](http://developer.chrome.com/trunk/extensions/commands.html)与`_execute_browser_action`命令一起使用（该 API 目前仅在 beta 通道上可用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T01:25:58.857

有一个 API，chrome.browserAction.openPopup(function callback)，有望很快推出。请对此错误加注星标：[https ://code.google.com/p/chromium/issues/detail?id=436489](https://code.google.com/p/chromium/issues/detail?id=436489)

# conways-game-of-life - Conway's Game of Life 是如何在 Conway's Game of Life 中实现的？

> ID：12868391
> 
> 赞同：2
> 
> 时间：2012-10-12T23:22:01.810
> 
> 标签：conways-game-of-life

我刚刚遇到[http://www.youtube.com/watch?feature=player_embedded&v=xP5-iIeKXE8](http://www.youtube.com/watch?feature=player_embedded&v=xP5-iIeKXE8)，这是康威生命游戏的实现……康威的生命游戏。

我认为理论上可以做到这一点，因为生命游戏是图灵完备的，但是在这种情况下它是如何实现的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T08:55:53.823

jwz 最近有一篇博客文章讨论了这种结构：[Turtles, all way down。或者滑翔机。或者滑翔龟。](http://www.jwz.org/blog/2012/05/turtles-all-the-way-down-or-gliders-or-glider-turtles/)这段关于“外部全面元胞自动机元像素”的引用几乎说明了一切，我当然不明白：

> 该规则被编码为两列，每列九个食者，其中一列对应于“出生”规则，另一列对应于“生存”。九个食者对应九个不同数量的细胞（0到8）。食者的存在与否表明该细胞是否应该在下一代元代中开启。食者的状态通过两个反平行 LWSS 的碰撞读取，该 LWSS 辐射两个反平行滑翔机（与 PET 扫描仪中的电子-正电子反应不同）。然后这些滑翔机碰撞到蜂箱中，在 Brice 优雅的蜜位反应中，经过的 LWSS 将其恢复。如果食客在场，蜂箱将保持其原始状态，从而允许 LWSS 不受影响地通过；如果食客不在，蜂箱就会恢复，在此过程中消耗 LWSS。等效地，食者的状态映射到 LWSS 的状态。

# java - 总是返回登录屏幕

> ID：12868396
> 
> 赞同：6
> 
> 时间：2012-10-12T23:22:35.083
> 
> 标签：java, android, android-manifest

我有一个应用程序启动`Splash activity screen`5 秒然后打开`Login activity screen`，然后在输入正确的用户名和密码后打开，`Menu activity (listActivity)`然后每行单击打开`MyCity activity`。

**更新：**

**我想要得到的是：**无论您在我的应用程序中的哪个位置，并且您出于任何原因离开我的应用程序，**不仅是在您按下主页按钮时**，而且例如：

1.  您按主页按钮检查另一个应用程序然后想返回我的应用程序。

2.  你有通知在 whatsup 或电子邮件上显示新消息，你打开你的 whatsup 或打开电子邮件，然后返回我的应用程序。

3-你离开你的手机一段时间然后你想再次检查我的应用程序。

4-您按电源按钮关闭手机（锁定屏幕），然后打开锁并想要返回我的应用程序。

我的意思是，任何时候您出于任何原因离开我的应用程序，但不按**返回**按钮，这将退出整个应用程序然后想要再次返回到我的应用程序，必须向您打开**登录屏幕**以重新输入您的用户名和密码。

我呼吁`finish();`启动 Splash 活动和 Login 活动。

我试过：`android:clearTaskOnLaunch="true"`在清单中的登录活动中，但它没有。

任何建议将被认真考虑，

**请编写完整的工作代码。**

登录活动：

```
 public class Login extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    Button b = (Button) findViewById(R.id.loginbutton);

  b.setOnClickListener(new OnClickListener() {

  public void onClick(View v) {

    EditText username = (EditText) findViewById(R.id.login);
    EditText password = (EditText) findViewById(R.id.password);

     if(username.getText().toString().length() > 0 && password.getText().
             toString().length() > 0 ) {
if(username.getText().toString().equals("test") && password.getText().
             toString().equals("test")) {

    Intent intent = new Intent(Login.this, Menu.class);
    startActivity(intent);
       finish(); }
            }   }               
                    });  }  } 
```

菜单活动：

```
 public class Menu extends ListActivity {

      String classes[] = { "City1", "City2", "City3", "City4", "City5"};

          @Override
      protected void onCreate(Bundle savedInstanceState) {
         // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);

      setListAdapter(new ArrayAdapter<String>(Menu.this,
        android.R.layout.simple_list_item_1, classes));
                                   }

     @Override
       protected void onListItemClick(ListView l, View v, int position, long id) {
         // TODO Auto-generated method stub
          super.onListItemClick(l, v, position, id);
         String cheese = classes[position];
   try {
    Class ourClass = Class.forName("com.test.demo.MyCity");
    Intent ourIntent = new Intent(Menu.this, ourClass);
    ourIntent.putExtra("cheese", cheese);
         startActivity(ourIntent);
           } catch (ClassNotFoundException e) {
        e.printStackTrace();
                            }
                    }} 
```

我的城市活动：

```
 public class MyCity extends Activity {
TextView tv1;
String city;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.city);  

    initializeTextViews();}

private void initializeTextViews() {

    tv1=(TextView)findViewById(R.id.city_tv);
     city=getIntent().getStringExtra("cheese");

if(city.equalsIgnoreCase("City1")){

        tv1.setText(Html.fromHtml(getString(R.string.city1)));}

    else if(city.equalsIgnoreCase("City2")){

        tv1.setText(Html.fromHtml(getString(R.string.city2)));}

    else if(city.equalsIgnoreCase("City3")){

        tv1.setText(Html.fromHtml(getString(R.string.city3)));}

    else if(city.equalsIgnoreCase("City4")){

        tv1.setText(Html.fromHtml(getString(R.string.city4)));}

    else if(city.equalsIgnoreCase("City5")){

        tv1.setText(Html.fromHtml(getString(R.string.city5)));}

    }} 
```

我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".Splash"
            android:label="@string/app_name">   
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Login"
            android:label="@string/app_name" 
                 android:clearTaskOnLaunch="true">
            <intent-filter>
                <action android:name="com.test.demo.LOGIN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.test.demo.MENU" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

              <activity
            android:name=".MyCity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.test.demo.MYCITY" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**第二次更新**：我达到了我想要的一半，但仍有一些步骤我无法实现，解释如下：

通过申请 `android:clearTaskOnLaunch="true"`Splash 活动，

并防止菜单活动上的后退按钮行为：

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
       moveTaskToBack(true);
       return true;
            }
    return super.onKeyDown(keyCode, event);
                    } } 
```

所以现在当按下主页按钮离开我的应用程序然后返回我的应用程序时：

直接进入**登录活动**。

**但现在的主要目标是：**

如果 ：

**离开手机时屏幕锁定**，或轻按电源按钮锁定手机。

或者

**来自通知的**已打开消息****

 **或者

**来自通知的**已打开电子邮件****

 **或者

你有**CALL**并回答它，

然后返回我的应用程序**，它不会进入登录活动**，但您将返回您之前的页面。

任何建议，谢谢。

**泰德更新：**

我使用了另一个代码来覆盖主页按钮并控制后退按钮而不是应用：`android:clearTaskOnLaunch="true"`到清单中的 Splash 活动，只需将向下代码应用于菜单活动：

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
       moveTaskToBack(true);
         return true;}

    else if (keyCode == KeyEvent.KEYCODE_HOME) { 
     Intent i=new Intent(Menu.this,Login.class);
       startActivity(i);
          finish();
        return true;}
    return super.onKeyDown(keyCode, event);} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T10:06:42.920

如果我理解你的话，你的目标是用户必须再次输入用户名和密码，当他们回到你的应用程序时。所以我认为实现这一点的最合乎逻辑的方法是在所有活动`onResume()`方法中添加一个检查，以查看您是否有用户名和密码，如果没有，只需转到登录活动。最简单的方法是让 BaseActivity 实现检查并让您的所有其他活动（spash 和登录除外）从该 BaseActivity 继承。

*在伪java代码中*

```
class BaseActivity extends Activity {

    onResume() {
        super.onResume();
        if (!havingUsernameAndPassword()) {
            startActivity(loginActivity);
            finish();
        }
    }
}

class AnyOfYourActivitiesExceptSpashAndLogin extends BaseActivity {

    onResume() {
        super.onResume();
        // ... further code
    }

    // ... further code
} 
```

当然，实施`havingUsernameAndPassword()`取决于您如何在登录活动中存储用户名和密码。一个非常简单的方法是将它们存储在一些静态类成员中，这样只要应用程序运行它们就会存在。

**更新：一个更具体的例子**

我制作了一个新示例，还展示了如何在登录时保存登录数据，以便以后检查。实际上，只有一个标志 'loggedIn' 和一些用户 ID 会更有意义，但这取决于你的实现，所以我会在这里坚持使用用户名/密码。

```
class SimpleDataHolder {
    public static String username = null;
    public static String password = null;
}

class LoginActivity extends Activity {

    // ...
    // when user has entered valid username/password, store them in SimpleDataHolder:
    SimpleDataHolder.username = username;  // <-- store username entered
    SimpleDataHolder.password = password;  // <-- store password entered
}

class BaseActivity extends Activity {

    onResume() {
        super.onResume();
        if (SimpleDataHolder.username == null || SimpleDataHolder.password == null) {
            startActivity(loginActivity); // <-- go to login
            finish();                     // <-- end current activity
        }
    }
}

class AnyOfYourActivitiesExceptSpashAndLogin extends BaseActivity {

    // ... your existing code (if any)

    onResume() {
        super.onResume();  // <-- this calls BaseActivity.onResume() which checks username/password
        // ... your existing code (if any)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T23:47:35.417

应用程序**不能**在不修改框架代码的情况下重新路由主页按钮。抱歉，这是**不可能**的……

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T13:52:33.643

对于您的第二个更新问题，我建议您覆盖[OnResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)方法，但您必须小心您在其中所做的事情。我还建议您研究一下[android 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)是如何工作的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-02T03:58:06.887

这是我的建议：

有一个`key`in`SharedPreferences`称为**exit**。在`onCreate()`设置中exit的值为**false**

```
public void onCreate(Bundle ..)
{
 SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
 SharedPreferences.Editor editor=preferences.edit();
 editor.putString("exit","false");
 editor.commit();
 .....  
} 
```

然后`onResume()`检查**exit**的值。如果是真的，把用户带到登录屏幕，否则什么也不做。

```
public void onResume()
{
 super.onResume();
 SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
 String exit=preferences.getString("exit","");
 if(exit.equals("true"))
 {
   Intent i=new Intent(this_activity.thi,login_activity.class);
   startActivity(i);
  finish()
 }
} 
```

然后`onPause()`将 exit 的值设置为**true**。

```
public void onPause()
{
 super.onPause();
 SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
     SharedPreferences.Editor editor=preferences.edit();
     editor.putString("exit","true");
     editor.commit();
} 
```

你说你已经照顾好了`backbutton`。那么这应该做到。您的应用程序将始终返回登录屏幕。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-30T12:13:41.010

另一种解决方法是创建一个活动（FinisherActivity）并在其 onCreate() 方法中调用 finish()。然后，每当您需要在按下主页按钮或后退按钮时完成一项活动并防止其停留在堆栈上时，只需使用 Intent 调用 FinisherActivity 。但请记住为 Intent.FLAG_ACTIVITY_CLEAR_TOP 的意图设置标志...我知道它不是一种有效的方法，但它应该可以工作..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-01T10:09:59.540

[这是我想出的解决方案。](http://www.sherif.mobi/2012/11/application-which-always-requires-login.html)

请在博文末尾下载项目并进行测试。

测试：

*   运行安卓 4.0.4 的三星 S3
*   运行 android 2.3.1 的模拟器

**基本思想**：我们将创建一个 RequireLoginActivity，它将被除 LoginActivity 之外的所有活动扩展。

*调用onResume*函数时应捕获三种情况：

1.  使用 startActivity 从一个 RequireLoginActivity 跳转到另一个 RequireLoginActivity。
2.  通过完成当前活动，从一个 RequireLoginActivity 跳回到前一个 RequireLoginActivity。
3.  隐藏后返回 RequireLoginActivity（我们应该在这里显示登录信息！）

我的解决方案的基本思想是有 2 个计数器：已启动活动的数量 ( **startCounter** ) 和已暂停活动的数量 ( **pauseCounter** )。每次活动开始时，我们都会增加**startCounter**。同样，当一个活动暂停时，**pauseCounter**应该增加。在我们的*onResume*函数中，我们将通过比较 2 个计数器来决定是否去登录。如果两个计数器相等，我们将 gotoLogin() ！

让我解释一下：在任何时候，案例 1 都可以被捕获，因为在开始新的活动时，我们的**startCounter**总是比**pauseCounter**大1。这是真的，因为我们总是有一个额外的活动开始但没有暂停。

此外，案例 3 很容易捕获，因为一旦您离开我们的应用程序，例如，使用 HOME 按钮，我们将增加**pauseCounter**并且 2 个计数器将变得相等。一旦应用程序恢复，*onResume*将决定***gotoLogin*** ()。

案例 2 有点棘手，但也很简单。诀窍是重写*finish* () 函数并减少**startCounter**一次和**pauseCounter**两次。请记住，当完成活动时，会调用*onPause*并且我们的计数器是相等的。现在通过减少**startCounter**一次和**pauseCounter**两次，我们最终返回到上一个活动的计数器值，并且当上一个活动恢复时， **startCounter**将保持比**pauseCounter大 1。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-12T23:51:58.830

其实我不认为我确定你到底在问什么，你想按下你的 android 设备中内置的 Home 键并开始一个活动吗？

[主键监听器](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HOME)

试试这个：如果它有效，那就太棒了，只需通过那里的意图来调用您的登录活动

```
@Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.KEYCODE_HOME) { 
            Toast.makeText(MainActivity.this, "Home Key is pressed
                    Toast.LENGTH_LONG).show();
            return true;
        }
        Toast.makeText(MainActivity.this, "Didnt work", Toast.LENGTH_SHORT)
                .show();
        return super.dispatchKeyEvent(e);
    }; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-13T06:27:55.843

您不能覆盖主页按钮的默认行为。您可以通过单击返回按钮来获得所需的结果，主页按钮的默认行为是转到主屏幕。我的建议覆盖后退按钮。然后正确使用意图和设置标志，您可以转到登录屏幕。

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        super.onKeyDown(keyCode, event);
        switch(keyCode)
        {
        case KeyEvent.KEYCODE_BACK:
        Intent i= new Intent("yourpackage.login"); 
        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |Intent.FLAG_ACTIVITY_NO_HISTORY); 
        startActivity(i);
        finish();
        break;  
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-22T23:50:50.837

你要问的是反对android的工作方式。

当用户按下主页按钮时，他希望当他返回应用程序时，一切都将保持原样，除非他很长时间不在那里，或者他运行了一个资源消耗应用程序。

就像在 windows 上一样，当您单击 ALT+TAB 时，您不会期望在电子邮件客户端（或 messenger 或您使用的任何应用程序）上看到登录。

在任何情况下，您都可以将 onWindowFocusChanged 与任何[活动功能](http://developer.android.com/reference/android/app/Activity.html)（onResume，onStart，onRestart，onPause，onStop，...）一起使用，并且只处理您希望使用的相关情况。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-28T05:58:43.830

这是不可能的，因为主页按钮是调用启动器应用程序独有的，但您可以将您的应用程序作为启动器应用程序，例如在信息亭模式下运行，查看[它](https://stackoverflow.com/questions/2068084/kiosk-mode-in-android)和[它](https://stackoverflow.com/questions/10625413/is-it-posible-to-use-a-device-to-run-one-application-exclusively)。

要打开启动器活动的活动，请将其添加到 manifest.xml 上的 itentfilter

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.HOME" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-28T09:55:00.663

您的代码几乎是正确的：要在启动应用程序时清除活动堆栈，您应该添加`android:clearTaskOnLaunch="true"` **到您的根活动**中，即`Splash`，不是`Login`（它将是第一个运行的，请参阅[这个](https://stackoverflow.com/questions/5460981/cleartaskonlaunch-howto)关于确定根活动的问题）！

从[文档中：](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)

> 该属性仅对启动新任务的活动（根活动）有意义；**任务中的所有其他活动都会忽略它**。

因此，如果您将清单中的属性从 移动`Login`到`Splash`，它应该可以工作，您的应用程序将始终以启动画面开始。

**更新：**要在来电、屏幕锁定或通知时重新启动您的应用程序，您必须将（[此处](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)`android:noHistory="true"`的文档）添加到您的所有其他活动中，或调用它们的所有方法。`finish()``onPause()`

*值得一提的是，我们的答案是如此不同和复杂，因为你想要实现的完全违背核心 Android 概念（例如，[这里](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)是一篇关于退出应用程序的好文章），所以真的，不要在你的私人之外做任何这样的事情应用程序。*

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-10-29T05:23:50.557

很难确切地说出您在问什么，但是我相信这就是您要寻找的：[如果应用程序已经在内存中，如何使启动画面不加载](https://stackoverflow.com/questions/13112329/how-to-make-splash-screen-not-to-load-if-app-is-already-in-memory)。总结我在那里的帖子：

这是一个设计问题。您的启动器活动不应该是您的启动屏幕活动。相反，在您的主要活动的 onCreate 方法中打开您的启动活动。这样，如果它是全新打开的，则会调用 onCreate 并显示初始屏幕。否则，如果应用程序只是恢复，它调用 onResume，则不会调用打开启动屏幕活动。

然后您可以将清单更改为：

```
<activity
        android:name=".ui.MainActivity"
        android:noHistory="true"
        android:screenOrientation="portrait"
        android:label="@string/app_name">

    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity>

<activity android:name=".ui.SplashActivity"/> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-10-29T19:53:02.627

您是否尝试过 Android Manifest 中的[android:noHistory](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)活动属性（针对您的每个活动）？这听起来正是您正在寻找的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-11-02T09:16:50.650

您应该调用除登录活动之外`finish()`的所有活动方法。`onPause()`你可以调用`startActivity(new Intent (this, LoginPage.this))`他们的`onResume()`方法。因此，每当活动进入前台时，用户将再次被重定向到登录页面。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-11-01T04:27:43.530

我的一点点努力可能会对你有所帮助，我已经成功覆盖`HOME`按钮（Android 4.0以下）

您可以根据您的要求塑造代码。

[**回答 SO**](https://stackoverflow.com/questions/10025660/override-home-and-back-button-is-case-a-boolean-is-true/10025904#10025904)

[**来源在 GITHUB**](https://github.com/hotveryspicy/OverrideHomeButton)

由于您现在可以处理主页按钮，因此您可以轻松创建自己的逻辑来执行您的应用程序流程。

这是你的目标事件

```
@Override
    public boolean dispatchKeyEvent(KeyEvent event) {

        if ( (event.getKeyCode() == KeyEvent.KEYCODE_HOME) && isLock) {
             //Logic when Home button pressed
            return true;
        }
        else
            return super.dispatchKeyEvent(event);
    } 
```

希望这肯定会满足我们的要求。

*注意：所有这些都是为了`Home`为您可以管理的其他人捕获 Button*****

# javascript - 加载元素后如何运行函数？

> ID：12868398
> 
> 赞同：0
> 
> 时间：2012-10-12T23:22:53.153
> 
> 标签：javascript, jquery

在上面的每个循环运行后，我试图运行 List_Sandbox 函数，但无济于事。每个循环选择一组复选框，然后触发一个更改事件，该事件呈现需要选择的其他复选框。List_Sandbox 函数正在进行选择，但在我的脚本可以加载其他新复选框之前运行。我怎么能看透这个？我已经尝试过，.load、.on 和 livequery，但都没有工作。请帮忙...

```
$.each(zone_array, function(index, zone){
    $("ul.zones li input[id='"+zone+"']").attr("checked", "checked").trigger("change");
});
List_Sandbox.select_districts_versions(district_array);
List_Sandbox.select_stores_versions(store_array);

function data_for_districts(zoneid) {
            $.getJSON('/CampaignMgmt/GetDistrictsByZone', {'clientid': clientid, 'zone': zoneid }, function(data){
                $.each(data, function(index, value){
                    $("span.notice_district").remove();
                    var zone = value.toString().substring(0, 1);
                    var li_tag = '<li zone="'+zoneid+'" class="'+ value +'"style="display: list-item; "><label><input id="'+value+'" data-id="'+value+'" data-parent-id="'+zone+'" type="checkbox" name="zone_101" value="' + value + '"><span>'+ value +'</span></label></li>';
                    $("ul.districts").append(li_tag);
                    $('ul.districts li input[id="'+value+'"]').change(function(){
                        Districts.selection(value);
                        Districts.count_districts();
                    });
                });
            });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:34:27.190

目前还不清楚附加复选框的代码在做什么，但您可以尝试以下操作：

```
var arr_length = zone_array.length;
$.each(zone_array, function(index, zone) {
    $("ul.zones li input[id='" + zone + "']").attr("checked", "checked").trigger("change");

    /* run the List_Sandbox functions after last item */
    if (index == arr_length - 1) {
        List_Sandbox.select_districts_versions(district_array);
        List_Sandbox.select_stores_versions(store_array);
    }
}); 
```

编辑：应该使用`prop()`方法而不是`attr()`如果使用 jQuery >= 1.6

# ruby-on-rails-3 - 检查更新的属性

> ID：12868400
> 
> 赞同：0
> 
> 时间：2012-10-12T23:22:57.573
> 
> 标签：ruby-on-rails-3, attributes

我将如何修复此代码以仅在某些内容发生更改时才更新。我正在使用 csv 进行更新，我需要更改确认字段，但前提是记录中的某些内容已更改。

```
 CSV.parse(atdecode,{headers: true, col_sep:  "|", force_quotes:  true, quote_char: "~", converters: :date}) do |row|
                                   @contracts = Contract.unscoped.where(:unique3 => row[0]).first_or_create
                                   @contracts.update_attributes( {
                                    unique3: row[0],
                                    prntkey23: row[1],
                                    prntkey13: row[2],
                                    act_code: row[3],
                                    accounting_confirmation_date: row[4],
                                    act_form: row[5],
                                    act_net: row[6],
                                    agent: row[7],
                                    act_booked: row[8]
                                         })
                                     if @contracts.changed?
                           @contracts.update_attribute( {
                           confirmation: 0
                         })
                       end
                         end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:08:58.160

我认为这会做

```
@contracts.attributes = {unique3: row[0], 
                         prntkey23: row[1],
                         prntkey13: row[2],
                         act_code: row[3],
                         accounting_confirmation_date: row[4],
                         act_form: row[5],
                         act_net: row[6],
                         agent: row[7],
                         act_booked: row[8]
                         }
@contracts.confirmation = 0 if @contracts.changed?
@contracts.save 
```

# javascript - 小谜语：为什么这在 Chrome 上不起作用？

> ID：12868403
> 
> 赞同：0
> 
> 时间：2012-10-12T23:23:19.290
> 
> 标签：javascript, jquery

关于为什么以下代码在使用 FF 时完美“发布”（我可以看到数据库已更新）但在 Chrome 上失败的任何想法？

```
 $("a").click(function() {
$.post("ajax/update_count.php",  {site: 'http://mysite.com'});
     }); 
```

提示：jQuery 版本是`jquery-1.4.3.min.js`

***更新***

问题似乎是，当点击链接时，会加载一个新页面，这似乎正在停止 Chrome 中的帖子......这是一个可能的解释吗？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:55:37.033

您需要防止`<a>`. 用这个：

```
$("a").click(function (e) {
    e.preventDefault();
    // Your code
}); 
```

或者，如果您确实希望链接加载新页面，您可以尝试：

```
$("a").click(function (e) {
    e.preventDefault();
    var href = this.href;
    // Might want to put a "loading" spinner on the page here
    $.post("whatever", {}, function () {
        window.location.href = href;
    });
}); 
```

可能需要稍微改变一下 - 也许使用`$(this).attr("href")`or `$(this).prop("href")`，而不是`this.href`......那些评估的差异可能会或可能不会起作用`window.location.href`（我相信两者都可以）。

# mysql - 改变mysql中的加入

> ID：12868409
> 
> 赞同：1
> 
> 时间：2012-10-12T23:24:08.210
> 
> 标签：mysql, sql, join

我有 2 张桌子，faq 和 faq_categories...我参加了这项工作，到目前为止，我是一个快乐的露营者。

但是...要求改变了，我必须改变加入，但我不知道该怎么做

这是当前运行良好的代码：

```
SELECT faq.* , faq_categories.categoryname 
                                  FROM faq 
                                  JOIN faq_categories
                                  ON ( faq.catid = faq_categories.catid) 
```

到目前为止，所有常见问题都属于一个类别......但是从现在开始，将有不属于任何类别的常见问题......这使事情变得复杂，至少对我来说。

我应该如何更改此代码以显示没有 catid 的常见问题解答？

这是我的表：

```
CREATE TABLE IF NOT EXISTS `faq_categories` (
`catid` int(11) NOT NULL AUTO_INCREMENT,
`parentid` int(11) DEFAULT NULL,
`categoryname` varchar(255) NOT NULL,
`categoryname_en` varchar(255) DEFAULT NULL,
`description` text,
`description_en` text,
`metatags` text,
`metatags_en` text,
`sorder` int(11) NOT NULL,
`visible` tinyint(4) NOT NULL,
`categoryphoto` varchar(255) DEFAULT '',
PRIMARY KEY (`catid`),
KEY `parentid_fk` (`parentid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=204 ;

CREATE TABLE IF NOT EXISTS `faq` (
`faqid` int(11) NOT NULL AUTO_INCREMENT,
`catid` int(11) DEFAULT NULL,
`question` text NOT NULL,
`question_en` text NOT NULL,
`answer` text,
`answer_en` text,
`metatags` text,
`metatags_en` text,
`sorder` tinyint(4) DEFAULT NULL,
`visible` tinyint(4) DEFAULT NULL,
PRIMARY KEY (`faqid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:28:07.000

对于那些没有类别的，我们假设您的意思`faq.catid`是`NULL. Your table definitions don't need to change at all. That will only require changing your`INNER JOIN `to a`LEFT JOIN `. The FAQs with no category will show a`NULL `for`faq_categories.categoryname` 在输出中：

```
SELECT 
  faq.* , 
  faq_categories.categoryname 
FROM
  faq 
  LEFT JOIN faq_categories  ON ( faq.catid = faq_categories.catid) 
```

但是，我现在鼓励您预测常见问题解答必须属于多个类别的时间。为此，您需要创建一个包含 a`faqid`和的连接表`catid`。每个可以有很多行`faqid`：

```
CREATE TABLE faq_in_categories (
  faqid INT(11) NOT NULL,
  catid INT(11) NOT NULL,
  PRIMARY KEY (faqid, catid),
  FOREIGN KEY (faqid) REFERENCES faq (faqid),
  FOREIGN KEY (catid) REFERENCES faq_categories (catid)
); 
```

在此模型下，您将删除该`faq.catid`列，因为类别中的成员资格是在联接表中定义的。这是一个*多对多的关系*。

查询人：

```
SELECT 
  faq.*
  categories.*
FROM
  faq
  JOIN faq_in_categories ON faq.faqid = faq_in_categories.faqid
  JOIN categories ON faq_in_categories.catid = categories.catid
WHERE faq.faqid = 'some faqid' 
```

# c - 我想将两个模块合二为一。第一个是方程；第二个取这个方程的积分

> ID：12868410
> 
> 赞同：0
> 
> 时间：2012-10-12T23:24:14.947
> 
> 标签：c, integration, equation, calculus

> **可能重复：**
> [将两个模块合并为一个。第一个是方程；第二个取这个方程的积分](https://stackoverflow.com/questions/12869004/merging-two-modules-into-one-the-first-is-an-equation-the-second-takes-the-int)

```
#include <stdio.h>
#include <math.h>

double f(double x){
   return (x*x);
}

double integrateF(double (function)(double) ){
    double area;
    double x_width;

    int k; // Counter necessary for For-Loop
    int n; // # of bars

    double min; // Limit min
    double max; // Limit max

    printf("Please enter the limit minima, 'a'==>\n");
    scanf("%lf",&min);
    printf("Please enter the limit maxima, 'b'==>\n");
    scanf("%lf",&max);
    printf("Please enter # of bars needed to span [a,b]==>\n");
    scanf("%d",&n);

   x_width=(max-min)/n;

   for(k=1;k<=n;k++){
      area+=function(min+x_width*(k-0.5));
   }
   area*=x_width;

   return area;
}

int main(void){
   double resultant;
   resultant=integrateF(f);
   printf("The value of the integral is: %f \n",resultant);
   return 0;
} 
```

晚上所有，

我的第一个模块由函数 (x^2) 组成。返回的值继续到integrateF(f)，然后初始化第二个模块。这是事情变得混乱的时候......

这条线有什么作用？

> 双积分F（双（函数）（双））{

重要提示：我的程序运行顺利，但我不知道为什么因为这条线。

有什么办法可以改造这段代码以排除我的第一个模块和这条奇怪的线（以及任何需要去的东西都可以去）所以我只有嵌套 (x^2) 函数的集成模块。

当然，我的 main(void) 模块可以保留。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:28:21.200

您的 integrant 方法将函数指针作为参数，该指针可以是任何符合它所采用参数定义的函数，在这种情况下，任何接受 double 类型的唯一参数并返回 double 的函数。

这是integrateF 中的参数指定的。

在我看来，我会保持设计不变。通过这种方式，您可以以非常干净的方式更改您集成的功能。

如果您没有选择，请替换：

```
 area+=function(min+x_width*(k-0.5)); 
```

而是添加：

```
 value = min+x_width * (k - 0.5);
      value *= value; 
      area += value; 
```

其中 value 是 double，声明如下：

`double value;`

而integrateF 不需要任何参数。

```
double integrateF() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:36:11.470

另一种意见也有可取之处。现在以这样的方式编写integrateF，它可以被提取到另一个库并与函数f分开编译。如果您从没想到会发生这种情况，您可以像这样重写integrateF：

```
double integrateF(){ 
```

...

```
area+=f(min+x_width*(k-0.5)); 
```

...

函数 f 不需要更改。当您想集成另一个函数（不是 x*x）时，只需修改 f() 的主体并重新编译整个程序。

# ios6 - 在更改处理程序中设置 html 选择元素的值在 ios6 上不起作用

> ID：12868412
> 
> 赞同：0
> 
> 时间：2012-10-12T23:24:19.050
> 
> 标签：ios6, html-select

我正在使用 html 选择元素作为活动菜单。当您从中选择一个项目时，它会执行一个操作，然后在某些情况下，该操作的副作用是将菜单的值重置为其他值。

```
function onMenuChangeHandler() {
    var menu = $('#menu');
    var menuChoice = menu.val();
    if (menuChoice == ...) {
        ...
        menu.blur(); // ensure change handler doesn't get fired again
        menu.val(OTHER_VALUE);  // **
    }
}; 
```

这在多个浏览器的桌面上运行良好，在 iOS5 上运行良好。它莫名其妙地停止了在 iOS6 上的工作。结果是它的行为就像`**`上面标记的行不存在一样。

在我不设置值的任何情况下它都可以正常工作。

仅供参考：iOS6 的另一个变化似乎与此无关，但以防万一。选择菜单后，它现在会立即关闭选择器，而不是让它保持打开状态。这就是它在所有其他平台上的工作方式。如果您有多个选择元素，您仍然会得到非标准行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:42:04.920

我花了很多时间试图追踪这一点，最终发现问题是 iOS6 在我的更改处理程序退出后第二次设置控件的值。如果我输入警报，我可以清楚地看到控件更改为`OTHER_VALUE`（警报下方）。然后，当我解除警报时，控制恢复。（没有警报，变化发生得太快而无法看到。）

所以这里有一个解决方法：

```
function onMenuChangeHandler() {
    var menu = $('#menu');
    var menuChoice = menu.val();
    if (menuChoice == ...) {
        ...
        setTimeout(function() {
                menu.blur(); // ensure change handler doesn't get fired again
                menu.val(OTHER_VALUE);
            }, 1);
    }
}; 
```

也许其他人有更好的答案或更好的解释。

# jsf - NullPointerException：使用 CDI 将值从一个 bean 传递到另一个将不起作用

> ID：12868417
> 
> 赞同：0
> 
> 时间：2012-10-12T23:24:49.273
> 
> 标签：jsf, exception, dependency-injection, javabeans, cdi

我在 JSF 页面中使用此代码

```
<h:outputText value="#{writeBean.t}" /> 
```

（我在 WEB-INF 文件夹中有一个 beans.xml）

这是注入后一个 StringBean 的 WriteBean：

```
package huhu.main.managebean;

import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
import javax.enterprise.inject.Default;
import javax.inject.Inject;
import javax.inject.Named;

@Default
@Named
@SessionScoped
public class WriteBean implements Serializable {
   /**
 * 
 */
private static final long serialVersionUID = 1L;

String t;

@Inject StringBean stringbean;

public WriteBean() {
  setT(stringbean.getS());
}

public String getT() {
  return t;
}

public void setT(String t) {
  this.t = t;
}
} 
```

这是设置字符串的 StringBean，我想在 JSF 页面上显示：

```
package huhu.main.managebean;

import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
import javax.enterprise.inject.Default;
import javax.inject.Named;

@Default
@Named
@SessionScoped
public class StringBean implements Serializable {

   /**
* 
*/
   private static final long serialVersionUID = 1L;

   String s = new String("WORKS!!");

   public StringBean(){

   }

   public String getS() {
     return s;
   }

   public void setS(String s) {
  this.s = s;
  }
} 
```

这是一个例外：

```
 HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: java.lang.RuntimeException: java.lang.NullPointerException
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
root cause

com.google.common.collect.ComputationException: java.lang.RuntimeException: java.lang.NullPointerException
    com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:397)
    org.jboss.weld.bean.proxy.ClientProxyProvider.getClientProxy(ClientProxyProvider.java:102)
    org.jboss.weld.el.AbstractWeldELResolver.lookup(AbstractWeldELResolver.java:115)
    org.jboss.weld.el.AbstractWeldELResolver.getValue(AbstractWeldELResolver.java:96)
    org.jboss.as.weld.webtier.jsf.ForwardingELResolver.getValue(ForwardingELResolver.java:46)
    javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:147)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
root cause

java.lang.RuntimeException: java.lang.NullPointerException
    org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:186)
    org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:340)
    org.jboss.weld.bean.proxy.ProxyFactory.create(ProxyFactory.java:240)
    org.jboss.weld.bean.proxy.ClientProxyProvider.createClientProxy(ClientProxyProvider.java:87)
    org.jboss.weld.bean.proxy.ClientProxyProvider.access$000(ClientProxyProvider.java:43)
    org.jboss.weld.bean.proxy.ClientProxyProvider$1.apply(ClientProxyProvider.java:53)
    org.jboss.weld.bean.proxy.ClientProxyProvider$1.apply(ClientProxyProvider.java:46)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingValueReference.compute(ComputingConcurrentHashMap.java:355)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.compute(ComputingConcurrentHashMap.java:184)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.getOrCompute(ComputingConcurrentHashMap.java:153)
    com.google.common.collect.ComputingConcurrentHashMap.getOrCompute(ComputingConcurrentHashMap.java:69)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:393)
    org.jboss.weld.bean.proxy.ClientProxyProvider.getClientProxy(ClientProxyProvider.java:102)
    org.jboss.weld.el.AbstractWeldELResolver.lookup(AbstractWeldELResolver.java:115)
    org.jboss.weld.el.AbstractWeldELResolver.getValue(AbstractWeldELResolver.java:96)
    org.jboss.as.weld.webtier.jsf.ForwardingELResolver.getValue(ForwardingELResolver.java:46)
    javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:147)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
root cause

java.lang.NullPointerException
    huhu.main.managebean.WriteBean.<init>(WriteBean.java:25)
    huhu.main.managebean.WriteBean$Proxy$_$$_WeldClientProxy.<init>(WriteBean$Proxy$_$$_WeldClientProxy.java)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    java.lang.reflect.Constructor.newInstance(Unknown Source)
    java.lang.Class.newInstance0(Unknown Source)
    java.lang.Class.newInstance(Unknown Source)
    org.jboss.weld.util.reflection.SecureReflections$16.work(SecureReflections.java:343)
    org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:173)
    org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:340)
    org.jboss.weld.bean.proxy.ProxyFactory.create(ProxyFactory.java:240)
    org.jboss.weld.bean.proxy.ClientProxyProvider.createClientProxy(ClientProxyProvider.java:87)
    org.jboss.weld.bean.proxy.ClientProxyProvider.access$000(ClientProxyProvider.java:43)
    org.jboss.weld.bean.proxy.ClientProxyProvider$1.apply(ClientProxyProvider.java:53)
    org.jboss.weld.bean.proxy.ClientProxyProvider$1.apply(ClientProxyProvider.java:46)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingValueReference.compute(ComputingConcurrentHashMap.java:355)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.compute(ComputingConcurrentHashMap.java:184)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.getOrCompute(ComputingConcurrentHashMap.java:153)
    com.google.common.collect.ComputingConcurrentHashMap.getOrCompute(ComputingConcurrentHashMap.java:69)
    com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:393)
    org.jboss.weld.bean.proxy.ClientProxyProvider.getClientProxy(ClientProxyProvider.java:102)
    org.jboss.weld.el.AbstractWeldELResolver.lookup(AbstractWeldELResolver.java:115)
    org.jboss.weld.el.AbstractWeldELResolver.getValue(AbstractWeldELResolver.java:96)
    org.jboss.as.weld.webtier.jsf.ForwardingELResolver.getValue(ForwardingELResolver.java:46)
    javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:147)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
note The full stack trace of the root cause is available in the JBoss Web/7.0.13.Final logs.

JBoss Web/7.0.13.Final 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:50:24.517

您只需要创建该方法（替换您的构造函数）：

```
@PostConstruct
public void init() {
    setT(stringbean.getS());
} 
```

from`javax.annotation.PostConstruct`并且它会在 CDI 创建你的 bean 之后被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T09:48:30.373

我认为我的错误很简单：您不能在构造函数中调用注入的属性，因为这意味着尝试访问尚未设置的属性。现在我只是清空了 WriteBean 构造函数并在新方法 writer() 中使用了这行代码：

```
public String writer(){
    setT(stringbean.getS());
    return t;
} 
```

我在 jsf 页面上调用的那个：

```
<h:outputText value="#{writeBean.writer()}" /> 
```

# c# - 将 TextBox 值转换为 DateTime SQL Server

> ID：12868420
> 
> 赞同：1
> 
> 时间：2012-10-12T23:25:26.013
> 
> 标签：c#, asp.net, sql-server

我使用 C# 从 ASP.net 中的日历控件中创建了一个日期选择器。TextBox 中的日期格式为`08/01/2012`.

当我尝试进行插入时，出现此错误：

> 消息：输入字符串的格式不正确。

这是我的代码：

```
cmd.Parameters.Add("@date", SqlDbType.DateTime).Value = 
         Convert.ToDateTime(txtDateins.Text); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:54:28.750

错误来自将文本解析为 DateTime 对象，而不是 SQL。

尝试使用[TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)将字符串转换为 DateTime 对象。然后，在单独的一行中，尝试插入它。这样你就不会再对错误在哪里感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:14:47.090

我将表格列定义为 15,2，然后将其更改为 18,2，一切正常。我不知道为什么会这样。我希望找到一个原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:28:47.170

我会`.AddWithValue()`尝试`DateTime.TryParse()`：

```
DateTime date;
if (DateTime.TryParse(txtDateins.Text, out date) 
{
    cmd.Parameters.AddWithValue("@date", date);
} 
```

这将处理解析错误并确保您在数据库中获取有效数据。

# c++ - 从文件中读取数据并存储在C++中的数组中

> ID：12868421
> 
> 赞同：0
> 
> 时间：2012-10-12T23:26:27.527
> 
> 标签：c++

我希望并想知道是否有人可以帮助我理解如何在 C++ 中执行以下操作： **使用命令行输入重定向将文件的内容存储到二维数组中。**

这些文件将有未知数量的 3 列行。像这样：20 42 0.00 15 67 2.41 70 53 9.88

所以需要制作一个可以容纳x个数组的数组。X 是文件中的行数。每个内部数组将保存该行的一列。

我不知道如何做到这一点，但我真诚地感谢任何和所有帮助和指导如何做到这一点。

提前致谢并致以最诚挚的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:35:43.540

由于这看起来像家庭作业，这里有一些基本提示。

您可以使用管道将一个命令的输出作为另一个命令的输入，例如：

```
cat myfile.txt | myprogram 
```

`myprogram`然后可以使用 读取数据`cin`。

这应该足以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:17:56.273

```
static const size_t START_SIZE = 100;

//allocate array of pointers
double** flt_arr = new double*[START_SIZE];

size_t current_size = START_SIZE;
size_t current_index = 0;

while (!cin.eof())
{
    double flt1, flt2, flt3;

    cin >> flt1 >> flt2 >> flt3;

    //check stream for bad read
    if (cin.fail())
    {
        cerr << "Input error on line " << current_index + 1 << "!" << endl;
        break;
    }

    if (current_size == current_index)
    {
        //grow array
        current_size += START_SIZE;

        double** tmp_arr = new double*[current_size];

        for (size_t count = 0; count < current_index; count++)
        {
            tmp_arr[count] = flt_arr[count];
        }

        delete [] flt_arr;
        flt_arr = tmp_arr;
    }

    //allocate row for current line
    flt_arr[current_index] = new double[3];

    flt_arr[current_index][0] = flt1;
    flt_arr[current_index][1] = flt2;
    flt_arr[current_index][2] = flt3;

    current_index++;
}

//clean up rows
for (size_t count = 0; count < current_index; count++)
{
    delete [] flt_arr[count];
}

//clean up array of pointers
delete [] flt_arr; 
```

# php - cakephp 是否有开箱即用的上传脚手架选项？

> ID：12868424
> 
> 赞同：0
> 
> 时间：2012-10-12T23:27:02.633
> 
> 标签：php, cakephp

使用自动 $scaffold 对我来说非常有用，但如果对于二进制列它会创建一个文件上传输入，那就更好了。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:45:09.180

不是“开箱即用”。

您需要自定义视图以将文件输入/上传字段添加到表单中。 [http://book.cakephp.org/2.0/en/controllers/scaffolding.html#customizing-scaffold-views](http://book.cakephp.org/2.0/en/controllers/scaffolding.html#customizing-scaffold-views)

确保正确创建表单：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create)

您还可以使用一些流行的方法来处理文件上传。当然，如果您只想上传文件，只需几行代码，但如果您需要更多功能，最好使用现有解决方案之一。

[https://github.com/josegonzalez/upload](https://github.com/josegonzalez/upload) * 我的首选。很多功能。写得很好。

[https://github.com/davidpersson/media](https://github.com/davidpersson/media)

[https://github.com/szajbus/uploadpack](https://github.com/szajbus/uploadpack)

[https://github.com/milesj/cake-uploader](https://github.com/milesj/cake-uploader)

# salesforce - SFDC - 将输入传递给 URLFOR

> ID：12868425
> 
> 赞同：0
> 
> 时间：2012-10-12T23:27:10.793
> 
> 标签：salesforce, apex-code, url-for

我目前正在尝试在 Salesforce 上自定义一个对象，并且需要创建一个操作按钮，该按钮将导致一个新的帐户编辑页面。

我想通过 URLFOR 函数传递输入来预填充新帐户页面（见下文）；在我的示例中，不解释参数值。

```
<apex:page>
  <apex:outputLink value="{! URLFOR( $Action.Account.New, null, [acc2='{! Object__c.Name}'] ) }">New Account</apex:outputLink>
</apex:page> 
```

有没有人知道如何在 apex 中通过 URLFOR 传递变量输入？

谢谢你的帮助。

克拉克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:59:25.330

是的，您正确使用了 URLFOR 函数。

使用

```
<apex:outputLink value="{! URLFOR( $Action.Account.New, null, [acc2='Acme'] ) }">New Account</apex:outputLink> 
```

我能够以 Acme 作为帐户名称来加载帐户屏幕。

我认为问题在于您获取名称的调用返回 null 或空白，因此它似乎没有对 Name 字段应用任何内容。

在您的控制器中，您应该有一个属性可以让您访问工作记录。获取类似以下示例的名称。

控制器

```
Object__c MyCustomObject {get;set;} 
```

页

```
<apex:outputLink value="{! URLFOR( $Action.Account.New, null, [acc2=MyCustomObject.Name] ) }">New Account</apex:outputLink> 
```

*如果这不起作用，请尝试更改为 [acc2='MyCustomObject.Name'] 等*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T16:48:30.590

要获得更通用的解决方案，您可以使用： $Action.Account[] 当 actionName 是字符串变量（来自 apexclass 或自定义设置）可以是： View：显示对象的详细信息页面 Edit：在编辑模式下显示对象 Delete：URL用于删除对象 New：用于创建对象新记录的 URL Tab：指向对象主页的 URL

我们也可以通过将对象名称更改为变量来做到更通用

$Action[objectName][actionName]

例如：VFP：

```
<apex:page standardController="Account" extensions="urlForParamCTRL"
           action="{!urlFor($Action[objectName][actionName],account.Id, null, true)}">
</apex:page> 
```

顶点类：

```
public class urlForParamCTRL {
    Public String objectName {get;set;}
    Public String actionName {get;set;}
    public urlForParamCTRL(ApexPages.StandardController controller)
    {
        this.objectName = 'Account';
        this.actionName = 'New';
    }
} 
```

参考：[https ://developer.salesforce.com/docs/atlas.en-us.pages.meta/pages/pages_dynamic_vf_globals_action.htm](https://developer.salesforce.com/docs/atlas.en-us.pages.meta/pages/pages_dynamic_vf_globals_action.htm)

# c++ - C++中嵌套结构的朋友

> ID：12868428
> 
> 赞同：4
> 
> 时间：2012-10-12T23:27:37.893
> 
> 标签：c++, struct, nested

我知道Bruce Eckel 的[Thinking in C++](http://www.mindview.net/Books/TICPP/ThinkingInCPP2e.html)不是参考书，但我发现了一段奇怪的段落，我不明白它今天是否仍然适用：

> 使结构嵌套并不会自动授予它访问私有成员的权限。为此，您必须遵循特定的形式：首先，声明（不定义）嵌套结构，然后将其声明为友元，最后定义结构。结构定义必须与友元声明分开，否则编译器会将其视为非成员。

我实际上在没有将嵌套结构声明为朋友的情况下尝试了这个并且它有效：

```
struct myStruct{
private:
    int bar;
public:
    struct nestedStruct{
        void foo(myStruct *);
    }a;
};

void myStruct::nestedStruct::foo(myStruct * p){
    p->bar = 20;
} 
```

为了修改基类的私有成员，还需要声明嵌套结构友元吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T23:31:30.913

那句话是错误的。嵌套的内部类类型可以访问`private`封闭类类型的所有成员（包括 ）。

在 C++98 中情况并非如此，您的版本可能是指该版本的标准。在 C++03 和 C++11 中，引号不适用。

### 11.7 嵌套类 [class.access.nest]

> 1 嵌套类是成员，因此具有与任何其他成员相同的访问权限。封闭类的成员对嵌套类的成员没有特殊的访问权限；应遵守通常的访问规则（第 11 条）。

# ios - 模拟器能否很好地判断 iOS 兼容性？

> ID：12868429
> 
> 赞同：0
> 
> 时间：2012-10-12T23:27:57.873
> 
> 标签：ios, ios-simulator

这是一个更普遍的问题。如果我正在开发一个 iOS 应用程序（或游戏）并且它在我拥有的设备（例如 iPod 3g、iPhone 4 和 iPad 1 + 2）上运行良好，并且它在我没有的设备的模拟器上运行良好（iPhone 3g、iPhone 5、iPad 3），我可以相信一切都将在真实设备上与模拟器完全相同吗？我已经阅读了所有内容，并且体验了模拟器和真实设备之间的差异。但是，由于我从我拥有的设备和我没有的模拟器中获得了我的期望，如果我绝对无法接触到真实的设备，那么假设我的应用程序会正常运行是否合理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:39:33.900

对于许多事情，您可能是安全的，因为您已经在真实设备上进行了测试。iPhone 5 有更大的屏幕，但 iPhone 5 模拟器应该足以测试您的应用程序在更大的显示器上运行。真正的 iPhone 5 使用的是 armv7s，而不是 armv7。因此，一些高度优化的代码或时序代码可能会有所不同。iPad 3 具有视网膜屏幕，但这可以在视网膜 iPad 模拟器中进行测试。很少有开发者拥有他们支持的每个版本的 iOS 的每台设备。你已经完成了你所拥有的一切。我会对您所做的事情感到满意，但这实际上取决于您的应用程序的功能以及它如何推动操作系统和设备。

我会更关心在您的应用支持的所有 iOS 版本上测试您的应用。iOS 错误得到修复，从 4.3 到 6.0 的行为存在差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:40:37.277

我会同意的。我们在不同的设备上运行了很多应用程序，但例如，我们不在 4S 上进行测试，但我们会在 iOS 4.3、5.0、5.0.1、5.1 和 6.0 上进行测试，因为某些代码取决于操作系统。对于设备，iPhone 3GS、4、5、iPad 1、3。我们省略了 iPad 2 和 iPhone 4S。我们根本不测试任何 iPod Touch。

至于您的问题，这完全取决于您的应用程序的功能，以及是否有任何操作系统特定功能或设备特定功能。如果没有，那么您应该可以依靠模拟器来处理您没有的模拟器。

# iphone - iPhone 的 git 客户端

> ID：12868430
> 
> 赞同：0
> 
> 时间：2012-10-12T23:28:03.833
> 
> 标签：iphone, git

我在 VPS 上有一个私人 git 存储库。我在上面放了一些 word 文档、一些 excel 表格和一些其他非源代码文件，我希望能够在我的 iPhone 上访问它们。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:41:46.740

考虑安装一个简单的 Web 服务器（如`lighttpd`）并连接内置的[Gitweb](https://git.wiki.kernel.org/index.php/Gitweb)界面。它允许您浏览历史记录和查看/下载文件。

# jakarta-ee - 战争不会部署“未解决 " 玻璃鱼 3，网豆 7

> ID：12868434
> 
> 赞同：4
> 
> 时间：2012-10-12T23:28:21.787
> 
> 标签：jakarta-ee, ejb, glassfish-3

我有带有 ejb 和 war 模块的企业应用程序，并且由于我创建了本地界面 web 模块，因此不会部署。它构建良好。EJB 项目在 Web 项目中被引用。

此外，当我从 web.xml 中删除它时`<ejb-local-ref>`，它会部署，但随后查找方法失败。

玻璃鱼错误：

> 严重：部署应用程序 [Projekat-war] 时出现异常：错误：未解决 <ejb-link>：Projekat-ejb.jar#ZaWebSessionBean

简单的界面：

```
@Local
public interface ZaWebSessionBeanLocal {

    String vrati(String str);

}

@Stateless
public class ZaWebSessionBean implements ZaWebSessionBeanLocal {

    @Override
    public String vrati(String str) {
        return "vrati";
    }

    // Add business logic below. (Right-click in editor and choose
    // "Insert Code > Add Business Method")

} 
```

和 web.xml

```
<ejb-local-ref>
    <ejb-ref-name>ZaWebSessionBean</ejb-ref-name>
    <ejb-ref-type>Session</ejb-ref-type>
    <local>za_web.ZaWebSessionBeanLocal</local>
    <ejb-link>Projekat-ejb.jar#ZaWebSessionBean</ejb-link>
</ejb-local-ref> 
```

查找方法（生成）：

```
public class HeaderBean {
    ZaWebSessionBeanLocal zaWebSessionBean = lookupZaWebSessionBeanLocal();

    private ZaWebSessionBeanLocal lookupZaWebSessionBeanLocal() {
        try {
            Context c = new InitialContext();
            return (ZaWebSessionBeanLocal) c.lookup("java:global/Projekat/Projekat-ejb/ZaWebSessionBean!za_web.ZaWebSessionBeanLocal");
        } catch (NamingException ne) {
            Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", ne);
            throw new RuntimeException(ne);
        }
    } 
```

完整日志：

```
SEVERE: Exception while deploying the app [Projekat-war] : Error: Unresolved <ejb-link>: Projekat-ejb.jar#ZaWebSessionBean
SEVERE: Unresolved <ejb-link>: Projekat-ejb.jar#ZaWebSessionBean
SEVERE: Exception while deploying the app [Projekat-war]
SEVERE: Error: Unresolved <ejb-link>: Projekat-ejb.jar#ZaWebSessionBean
java.lang.RuntimeException: Error: Unresolved <ejb-link>: Projekat-ejb.jar#ZaWebSessionBean
    at com.sun.enterprise.deployment.util.EjbBundleValidator.accept(EjbBundleValidator.java:724)
    at com.sun.enterprise.deployment.WebBundleDescriptor.visit(WebBundleDescriptor.java:2004)
    at com.sun.enterprise.deployment.Application.visit(Application.java:1777)
    at com.sun.enterprise.deployment.archivist.ApplicationFactory.openArchive(ApplicationFactory.java:195)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:185)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:94)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:827)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:769)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)

SEVERE: Exception while deploying the app [Projekat-war] : Error: Unresolved <ejb-link>: Projekat-ejb.jar#ZaWebSessionBean 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-02T17:07:29.337

我在尝试部署我的应用程序时遇到了同样的问题，NetBeans 自己在我的 web.xml 中生成了这个代码。

在您的 web.xml 中完全删除

```
<ejb-local-ref>
        <ejb-ref-name>appName</ejb-ref-name>
        <ejb-ref-type>Session</ejb-ref-type>
        <ejb-link>AppName#SomeClass</ejb-link>
    </ejb-local-ref> 
```

它应该在此之后部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:32:08.843

删除 XML 并使用可移植的 JNDI 名称（参见例如关于 EJB 的维基百科文章）。

# sql - 存储库模式和 IQueryable<> 生成错误的 SQL

> ID：12868440
> 
> 赞同：0
> 
> 时间：2012-10-12T23:29:21.513
> 
> 标签：sql, asp.net-mvc-4, repository-pattern, .net-4.5, entity-framework-5

我在一个小型 .NET 4.5、MVC4、EF5 项目上使用存储库模式。

我注意到，如果我更改从存储库传递的 IQueryable 对象的结果，则生成的 SQL 不太理想。

例如，在我的存储库中：

```
 public IQueryable<Entry> GetEntries()
    {
        // (db is an instance of the data context)
        return db.Entries.Where(e => e.UserId == WebSecurity.CurrentUserId);
    } 
```

在我的控制器中，我限制返回的行数并对其进行排序：

```
 public ActionResult Index()
    {
        // (repo is an instance of the repository object)
        var entries = repo.GetEntries().Take(10).OrderByDescending(o => o.Created)
        return View(entries);
    } 
```

这会生成以下 SQL：

```
DECLARE @p__linq__0 int = 1

SELECT 
[Project1].[UserId] AS [UserId], 
[Project1].[Id] AS [Id], 
[Project1].[Created] AS [Created], 
[Project1].[LastModified] AS [LastModified], 
[Project1].[BodyOriginal] AS [BodyOriginal], 
[Project1].[BodyFormatted] AS [BodyFormatted], 
[Project1].[FormatterVersion] AS [FormatterVersion], 
[Project1].[BodyDigest] AS [BodyDigest], 
[Project1].[FollowupId] AS [FollowupId], 
[Project1].[AddMethod] AS [AddMethod], 
[Project1].[Entry_Id] AS [Entry_Id]
FROM ( SELECT 
        [Extent1].[Id] AS [Id], 
        [Extent1].[UserId] AS [UserId], 
        [Extent1].[Created] AS [Created], 
        [Extent1].[LastModified] AS [LastModified], 
        [Extent1].[BodyOriginal] AS [BodyOriginal], 
        [Extent1].[BodyFormatted] AS [BodyFormatted], 
        [Extent1].[FormatterVersion] AS [FormatterVersion], 
        [Extent1].[BodyDigest] AS [BodyDigest], 
        [Extent1].[FollowupId] AS [FollowupId], 
        [Extent1].[AddMethod] AS [AddMethod], 
        [Extent1].[Entry_Id] AS [Entry_Id]
        FROM [dbo].[Entries] AS [Extent1]
        WHERE [Extent1].[UserId] = @p__linq__0
)  AS [Project1]
ORDER BY [Project1].[Created] DESC 
```

如您所见，生成的 SQL 是高度冗余的。

如果我更改存储库方法以包含截断和排序的结果：

```
 public IQueryable<Entry> GetEntries()
    {
        // (db is an instance of the data context)
        return db.Entries.Where(e => e.UserId == WebSecurity.CurrentUserId).Take(10).OrderByDescending(o => o.Created);
    } 
```

生成的 SQL 更好：

```
DECLARE @p__linq__0 int = 1

SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[UserId] AS [UserId], 
            [Extent1].[Created] AS [Created], 
            [Extent1].[LastModified] AS [LastModified], 
            [Extent1].[BodyOriginal] AS [BodyOriginal], 
            [Extent1].[BodyFormatted] AS [BodyFormatted], 
            [Extent1].[FormatterVersion] AS [FormatterVersion], 
            [Extent1].[BodyDigest] AS [BodyDigest], 
            [Extent1].[FollowupId] AS [FollowupId], 
            [Extent1].[AddMethod] AS [AddMethod], 
            [Extent1].[Entry_Id] AS [Entry_Id]
            FROM [dbo].[Entries] AS [Extent1]
            WHERE [Extent1].[UserId] = @p__linq__0
  ORDER BY [Extent1].[Created] DESC 
```

* * *

**我该如何克服这个问题，即利用存储库模式，同时仍然可以灵活地修改存储库的结果，而不会创建结构不佳的 SQL？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T21:33:18.583

这是存储库反模式，最好删除该“存储库”。如果你真的想使用 Repository，定义一个与 EF 无关的接口，并且没有方法返回 IQueryable。此外，是否使用存储库与 EF 如何生成 sql 无关。

# c# - 按钮单击引发 System.NullReferenceException

> ID：12868441
> 
> 赞同：-1
> 
> 时间：2012-10-12T23:29:24.277
> 
> 标签：c#, .net

**System.NullReferenceException：对象引用未设置为对象的实例。**

单击按钮时，我收到该错误。.
**Form1类：**

```
private void button1_Click(object sender, EventArgs e)
    {
        string connectionString = ConfigurationManager.ConnectionStrings["modelConnectionString"].ConnectionString;
        SqlConnection sqlConnection = new SqlConnection(connectionString);
        sqlConnection.Open();
        SqlCommand connect = new SqlCommand("SELECT COUNT(*) From Users WHERE UserName = @user AND Password = @pass", sqlConnection);
        SqlParameter username = connect.Parameters.AddWithValue("@user", userName.Text);
        SqlParameter password = connect.Parameters.AddWithValue("@pass", passWord.Text);

        if ((int)connect.ExecuteScalar() == 1)
        {
            accessPic.BackgroundImage = Res.Accepted;
        }
        else
        {
            accessPic.BackgroundImage = Res.Denied;
        }
        sqlConnection.Close();
    } 
```

**Form1.Designer**

```
 // 
        // button1
        // 
        this.button1.Location = new System.Drawing.Point(95, 90);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(75, 25);
        this.button1.TabIndex = 8;
        this.button1.Text = "button1";
        this.button1.UseVisualStyleBackColor = true;
        this.button1.Click += new System.EventHandler(this.button1_Click); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:34:24.453

单步调试调试器中的代码以查找哪一行抛出异常以及哪个对象为空。

此外，您应该重构要使用的代码，[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)以确保在完成连接后处理连接。如果在打开和关闭连接之间抛出异常，现有代码将不会关闭连接。以下是如何做到这一点：

```
private void button1_Click(object sender, EventArgs e)
{
    string connectionString = ConfigurationManager.ConnectionStrings["modelConnectionString"].ConnectionString;
    using (SqlConnection sqlConnection = new SqlConnection(connectionString))
    {
        sqlConnection.Open();
        using (SqlCommand connect = new SqlCommand("SELECT COUNT(*) From Users WHERE UserName = @user AND Password = @pass", sqlConnection))
        {
            SqlParameter username = connect.Parameters.AddWithValue("@user", userName.Text);
            SqlParameter password = connect.Parameters.AddWithValue("@pass", passWord.Text);

            if ((int)connect.ExecuteScalar() == 1)
            {
                accessPic.BackgroundImage = Res.Accepted;
            }
            else
            {
                accessPic.BackgroundImage = Res.Denied;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:47:41.793

我同意劳伦斯

连接字符串部分应如下所示：

```
<configuration> 
    <connectionStrings>
        <add name="modelConnectionString" connectionString="whatever" providerName="System.Data.SqlClient" />
    </connectionStrings>
 <!-- more stuff here--> 
```

# c - 在C中将浮点数转换为二进制

> ID：12868444
> 
> 赞同：0
> 
> 时间：2012-10-12T23:29:48.407
> 
> 标签：c, unix, floating-point, binary

我正在尝试将浮点数转换为二进制字符串。我注意到很多教程都在将浮点数转换为所谓的“二进制浮点数”。例如数字`8.5`是二进制浮点数`1000.1`。

这是通过使用 modf 函数将尾数除以将整数部分和小数部分作为两个单独的整数来找到的。然后，您使用位操作或仅使用除以 2（对于十进制整数部分）打印这两个整数的二进制表示。

`1000.1`不是我想要的。我想要实际的二进制字符串表示。

```
01000001 00001000 00000000 00000000 
```

我不能保证当使用 modf 函数时，我的浮点数将能够转换为两个整数。

我目前有将整数转换为二进制字符串的函数。我想知道花车是否存在这样的东西。如果是这样，请指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:33:35.327

获取浮点数的地址，将其转换为`int*`（或其他适当的具有相同的整数类型`sizeof`），然后使用您现有的函数：

```
// assert(sizeof(float) == sizeof(int))

float f = 8.5;
convert_int_to_binary_string(*((int*)&f)); 
```

# android - android onActivityResult 套接字超时

> ID：12868446
> 
> 赞同：0
> 
> 时间：2012-10-12T23:30:06.653
> 
> 标签：android, sockets, android-intent, timeout

当我尝试从 onActivityResult 启动套接字时，它总是超时......我试图做的是启动从 onActivityResult 启动套接字连接但没有成功的 Activity，但是当套接字从其他未调用的地方开始没有问题时来自 onActivityResult。这是我调用 startActivityForResult 和 onActivityResult 的代码。我很确定我做错了……朝着正确的方向前进？

```
public void scanNow(View view){
        Intent intent = new Intent("com.blah.Blah.client.android.SCAN");
        intent.putExtra("com.blah.Blah.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
        startActivityForResult(intent, 0);
        Log.d("debug tag", "started activity");

    }
    @Override 
    public void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
       Log.d("debug tag", "inside onActivityResult");
        if (requestCode == 0)
        {
            if (resultCode == RESULT_OK)
            {
                String contents = intent.getStringExtra("SCAN_RESULT");
                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                Log.i("debug tag", "contents: "+contents+" format: "+format);
                Intent myIntent = new Intent(com.blah.Blah.Ads);
                startActivity(myIntent);

                // Handle successful scan
            }
            else if (resultCode == RESULT_CANCELED)
            {
                // Handle cancel
                Log.i("debug tag", "Cancelled from main");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-11T11:31:18.027

如果您可以发布不起作用的实际代码，也许有人可以更好地帮助您。什么是连接工作的“其他地方”？您是否在相同的设备、应用程序、活动中尝试过？两个地方的代码完全一样吗？

检查这些：

*   您在清单中有 Internet 权限
*   实际的网络调用不在主线程中

# c# - C# - 比使用 Javascript 从域中抓取 PDF 文件更好的方法

> ID：12868447
> 
> 赞同：4
> 
> 时间：2012-10-12T23:30:23.440
> 
> 标签：c#, web, watin

我目前正在构建一个基于 watin 的小应用程序，它登录到一个网站，然后开始通过一系列 URL 来使用 Watin 下载 PDF 文件。

该网站使用大量 javascript 来加载嵌入 HTML 中的 pdf。

该程序目前运行良好，但速度很慢，因为 watin 不能非常有效地处理下载（它使用 Firefox 下载系统并在保存前缓慢键入文件名。

我想知道是否有更好的 Web Scraping 框架可以为 Ajax 站点提供相同的支持，但更好/更快地下载文件。

我在网上到处都发现了 selenium，但它在文件下载方面并不比 watin 更有效。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:42:17.550

您可以使用这两个 API 作为主要引擎编写 Google Chrome 扩展程序：

[https://developer.chrome.com/extensions/webRequest.html](https://developer.chrome.com/extensions/webRequest.html) 了解何时以及如何进行身份验证以及何时开始下载，并且：

[https://developer.chrome.com/extensions/downloads.html](https://developer.chrome.com/extensions/downloads.html) 开始下载文件。

无论这两个 API 中缺少什么来实现您的目标，您都可以使用自定义内容脚本来弥补 - 一个 javascript 注入到由扩展程序打开的页面中 - 例如挂钩到 jquery 的 .ready 事件以进行初始化刮。

这些肯定会比 Watin 快，因为为 watin 编写是一个抽象层，而不是直接与浏览器对话。

# php - 修改wordpress管理栏添加自定义消息

> ID：12868448
> 
> 赞同：0
> 
> 时间：2012-10-12T23:30:24.473
> 
> 标签：php, wordpress

我正在尝试将 Wordpress 管理栏转换为对注册用户更有用的东西。我的客户要求我在该栏中添加一个空间来显示即时消息，这些即时消息将出现几秒钟然后消失。这个想法是这个空间将允许在线用户查看是否有人像聊天一样向他们发送消息。

```
class MessageMenu{
    function MessageMenu(){
        add_action( 'admin_bar_menu', array( $this, 'message_section' ) );
    }

    function add_message( $message, $timeout = 2000 ){
        // This function should add a new live message to the admin bar
        // First it should check if there is a current message
        // Then write the new message
        global $wp_admin_bar;
    }

    function message_section(){
        // This function will supposedly create a 
        global $wp_admin_bar;
        $args = array(
            'id'    => 'message_section',
            'title' => __( 'Mensajes' ),
            'parent'=> false,
            'href'  => false,
            'group' => true );
        $wp_admin_bar->add_node( $args );
        $this->add_message( 'Live messages' );
    }
}

function MessageMenuInit(){
    global $MessageMenu;
    $MessageMenu = new MessageMenu();
}
add_action( 'init', 'MessageMenuInit' ); 
```

# html - CSS 冲突样式表

> ID：12868454
> 
> 赞同：2
> 
> 时间：2012-10-12T23:31:45.737
> 
> 标签：html, css, web, stylesheet

我有两个样式表，它们在几个方面相互冲突。因为我使用了 5 个、6 个，有时甚至是 9 个或 10 个完整的插件，每个插件都有三四个样式表，以及我自己的，所以到处都会出现冲突。解决此问题的最佳方法是什么？是不是只能进去修改所有插件的选择器？

编辑：问题是所有插件都使用自己的样式表，这些样式表相互冲突。在不修改所有选择器的情况下，最佳但可能不可能的解决方案是将样式表轻松本地化到页面的某些部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:37:01.497

请记住一些关于样式覆盖的非常基本的技巧：

首先，尽量避免使用肯定会被其他来源使用的通用类名和 id。

其次，!important 可以覆盖样式，但只能以有意义的方式使用......

第三，css的“级联”部分的层次结构是down -> out：

所以

```
#header a{
    color:#fff;
}

#header div a{
    color:#000;
}

#header div.some-class a.active{
    color:#ff0000;
} 
```

底部选择器无论放在哪里都会优先考虑，因为它专门针对可怕的选择器链。因此，也许您需要以一种减少被其他来源覆盖的机会的方式编写您的 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:34:20.787

最好的办法是绝对*不要*修改插件的选择器，除非你自己写插件。您应该修改自己的 classes/ids/css 文件以...没有冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:35:29.190

使你的 CSS 尽可能具体，除非你确信你知道自己的方式，否则我不会修改插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T08:43:23.543

使用特定且适当的 ID 将要本地化的每个部分包装在其自己的 div 中。然后将样式表中的每个选择器修改为以 #specificSectionID 开头。在一个不错的代码编辑器中查找/更改，您将在五分钟内完成。例子：

```
.headersection a {color: #DDD; background: transparent}
//becomes
#topSection .headersection a {color: #DDD; background: transparent} 
```

# c++ - 混淆 Makefile 中的变量扩展

> ID：12868457
> 
> 赞同：1
> 
> 时间：2012-10-12T23:32:22.260
> 
> 标签：c++, makefile

我有以下假设的 Makefile：

```
all: SOURCE = $(wildcard src/*.cpp)
unity: SOURCE = $(wildcard unity/*.cpp)

OBJECTS = $(SOURCE:.cpp=.o)

all: prog

unity: prog

prog: $(OBJECTS)
    $(CXX) $(OBJECTS) -o prog 
```

我需要根据初始目标使用不同的源文件/对象进行编译。在我看来，变量扩展在依赖项上比在目标主体中发生得更早，因为上面的编译器命令用正确的文件名调用就好了，但是 prog 依赖项中的 $OBJECTS 仍然是空的，所以没有一个对象被建成。

unity 文件夹包含一个组合源文件，其中包含用于进行统一构建的所有其他源文件。这个统一文件是由 makefile 生成的，但它被忽略了，实际上可能是多个统一目标文件。

我的设计是失败的原因吗？我是否将不得不求助于递归 make 来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:44:16.563

你不能那样做。因为一般来说，可能有多个目标需要构建。在命令行上，或作为中间目标。因此，设置变量将是模棱两可的。因此，目标特定变量的值“仅在目标命令脚本的上下文中可用（以及在其他目标特定分配中）。” （参见文件：make.info，节点：特定于目标）

但是您可以检查 MAKECMDGOALS 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:49:00.497

您遇到的问题是 RULES 中的变量（目标和依赖项列表）在生成文件为 READ 时被扩展，而为目标设置的变量（如上面的 $(SOURCES)）仅在触发 taget 时设置。这意味着特定于目标的变量仅在 ACTIONS 中有用，因为这是设置它们后唯一发生的事情。

综上所述，你可以通过递归调用 make 来获得你想要的效果：

```
all:
        $(MAKE) SOURCE="$(wildcard src/*.cpp)" prog
unity:
        $(MAKE) SOURCE="$(wildcard unity/*.cpp)" prog

OBJECTS = $(SOURCE:.cpp=.o)

prog: $(OBJECTS)
        $(CXX) $(OBJECTS) -o prog

.PHONY: all unity 
```

但这不是我通常会推荐的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T00:23:19.307

您不能使用 $SOURCE 来表示不同的东西，具体取决于执行的 make 目标。您可以在这里很好地理解 makefile 解析： [http ://www.gnu.org/software/make/manual/make.html#Reading-Makefiles](http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles)

对于您的问题，您必须为每种类型的源文件定义不同的变量。例如：

```
all: SOURCE_ALL = $(wildcard src/*.cpp)
unity: SOURCE_UNITY = $(wildcard unity/*.cpp)

OBJECTS_ALL = $(SOURCE_ALL:.cpp=.o)
OBJECTS_UNITY = $(SOURCE_UNITY:.cpp=.o)
etc ... 
```

# php - 标题和标题的标签使用函数获取

> ID：12868464
> 
> 赞同：0
> 
> 时间：2012-10-12T23:33:40.207
> 
> 标签：php, mysql

我想获取标题和标题的标签。

```
public function titles()
{
     $query=mysql_query("SELECT * FROM title");
     while($row = mysql_fetch_object($query)){
          $data->title[] = $row;
          $data->tag[] = $this->tags($row->id);
     }
     return $data;
}

public function tags($title_id)
{
     $query=mysql_query("SELECT * FROM tag WHERE title_id = '$title_id'");
     while($row = mysql_fetch_object($query)){
           $tag[] = $row;
     }
     return $tag;
} 
```

我正在尝试以这种方式打印

```
$data = titles();
foreach($data->title as $title)
{
     echo $title->topic;
     foreach($data->tag as $tag)
     {
         echo $tag->name;
     }
} 
```

但它不起作用。我能怎么做？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:39:18.690

你应该在你的titles方法中有这样的东西

```
$data = new stdClass();
$data->title = array();
$data->tag = array(); 
```

您还需要添加这样的文件

```
$data->title[$row->id][] = $row;
$data->tag[$row->id][] = $this->tags($row->id); 
```

然后你可以像这样循环

```
foreach($data->title as $id => $title)
{
    echo $title->topic;
    foreach($data->tag[$id] as $tag)
    {
        echo $tag->name;
    }
} 
```

同时启用错误，以便您可以在页面顶部看到 PHP 错误 ..

```
error_reporting(E_ALL);
ini_set("display_errors","On"); 
```

PHP 文档开启`mysql_***`

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代品包括

我认为你的代码应该是什么样子

```
class Somthing {
    private $db;

    function __construct() {
        $this->db = new mysqli("localhost", "user", "password", "db");
    }

    function titles() {
        $data = new stdClass();
        $data->title = array();
        $data->tag = array();

        $result = $this->db->query("SELECT * FROM title");
        while ( $row = $result->fetch_object() ) {
            $data->title[$row->id] = $row;
            $data->tag[$row->id] = $this->tags($row->id);
        }
        return $data;
    }

    function tags($title_id) {
        $tag = array();
        $result = $this->db->query("SELECT * FROM tag WHERE title_id = '$title_id'");
        while ( $row = $result->fetch_object() ) {
            $tag[] = $row;
        }
        return $tag;
    }
}

$somthing = new Somthing();

foreach ($somthing->titles() as $id => $title ) {
    echo $title->topic;
    foreach ( $data->tag[$id] as $tag ) {
        echo $tag->name;
    }
} 
```

# entity-framework - 实体框架代码优先（使用 TPC）和 Wcf 数据服务映射

> ID：12868466
> 
> 赞同：0
> 
> 时间：2012-10-12T23:33:53.377
> 
> 标签：entity-framework, ef-code-first, wcf-data-services

所以，我有一个 TPC（每种具体类型的类型）层次结构，如下所示：

**Order**和**OrderDetail**都是派生自抽象类**AuditableEntity的具体类型**

AuditableEntity 的配置是：

```
 public class AuditableEntityConfig : EntityTypeConfiguration<AuditableEntity>
{
    public AuditableEntityConfig ()
    {
        //this.Property(m => m.IDN).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
        this.HasKey(m => m.IDN);

        this.Property(m => m.Timestamp).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed).IsRowVersion().IsRequired();
        this.Property(m => m.AddedDate).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        this.Property(m => m.ModifiedDate).IsOptional();
        this.Property(m => m.ModifiedByUser).IsOptional();
        this.Property(m => m.RowGuid).IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    }
} 
```

所以想法是在抽象类中为与审计相关的字段进行这种配置，这将应用于所有派生类。初始化模型时使用以下代码：

```
var builder = new DbModelBuilder();
builder.Configurations.Add(new AuditableEntityConfig());
builder.Configurations.Add(new OrderConfig());
builder.Configurations.Add(new OrderDetailsConfig()); 
```

并且 TPC 设置在各自的具体类型配置中：

```
Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Order");
        });

Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("OrderDetail");
        }); 
```

但是，当通过 URL 为*http:localhost:4040/MyService*的 Wcf 数据服务访问它时，只会公开 AuditableEntities 类型，并且*http:localhost:4040/MyService/AuditableEntities*返回两种具体类型的数据，但*http: localhost:4040/MyService/Orders*或*http:localhost:4040/MyService/OrderDetails*不起作用。

但是，如果我删除“builder.Configurations.Add(new AuditableEntityConfig())”，那么具体类型的 URI 会起作用并返回数据，但这违背了为审计相关属性应用抽象配置的目的。

MyDbContext 仅公开 Orders 和 OrderDetails DbSet：

```
public DbSet<Order> Orders { get; set; }
public DbSet<OrderDetail> OrderDetails { get; set; } 
```

Wcf 数据服务在 WPF 窗口中自承载。已授予所有权限。

我缺少什么设置？

补充问题：当我将此服务引用添加到客户端项目时，上下文被命名为“CodeFirstContainer”而不是 MyDbContext。为什么是这样？

谢谢

# .net - 找不到 dbSqlPackage 提供程序

> ID：12868468
> 
> 赞同：0
> 
> 时间：2012-10-12T23:34:16.210
> 
> 标签：.net, msbuild, msdeploy, webdeploy

我正在尝试使用带有 msbuild 的 web 处理管道来使用 web deploy 部署数据库 dacpac。我的项目的 .wpp.targets 文件中有以下代码。

```
<Target Name ="DeployUIConfigDatabase" AfterTargets="AddIisSettingAndFileContentsToSourceManifest" >
    <ItemGroup>
      <MsDeploySourceManifest Include="dbSqlPackage">
        <Source>$(_MSDeployDirPath_FullPath)\Database\Advent.PMW.UIConfig.Database.dacpac</Source>
        <Destination>{UIConfigContext-Web.config Connection String</Destination>
        <Action>Publish</Action>
        <AdditionalProviderSettings>Source;Destination;Action</AdditionalProviderSettings>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target> 
```

但是当我尝试构建包时出现以下错误

> 错误：Web 部署任务失败。（找不到提供程序“dbSqlPackage”。请验证您输入的提供程序名称是否正确。）包失败。

我尝试从命令行使用 dbSqlPackage 提供程序，但我得到了同样的错误。我在 Windows 7 机器上安装了 MSDeploy 3.0。我理解了

> Microsoft Web 部署 dbSqlPackage 提供程序 - enu

安装在我的盒子上。我尝试删除它（如关于此主题的另一篇文章中所建议）但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:09:58.563

MSDeploy v3 中的 dacpac 提供程序是[`dbDacFx`](http://www.iis.net/learn/publish/using-web-deploy/dbdacfx-provider-for-incremental-database-publishing). 此外，您的`Source`属性应该是`Path`，不需要包含在`AdditionalProviderSettings`.

顺便说一句，如果您使用的是 VS2012（或带有最新 Azure SDK 的 2010），您应该能够使用发布对话框包含 dacpac。

# android - 如何再次显示音量更改android应用程序的对话框

> ID：12868470
> 
> 赞同：0
> 
> 时间：2012-10-12T23:34:21.937
> 
> 标签：android

我有一个播放器应用程序，里面有一个用于音量控制的搜索栏。我使用这段代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
    { 
        int index = volumeSeekbar.getProgress(); 
        volumeSeekbar.setProgress(index + 1); 
        return true; 
    } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        int index = volumeSeekbar.getProgress(); 
        volumeSeekbar.setProgress(index - 1); 
        return true; 
    }
    return super.onKeyDown(keyCode, event); 
} 
```

代码运行良好。现在，当我按下硬件音量控制向下/向上按钮时，我的搜索栏会移动。但现在我对 Android 中的音量对话框有疑问。当我按下硬件按钮时，它不再显示。我的意思是图片中的对话框：

![在此处输入图像描述](../Images/00630d68daf32171763038fe17ccd8cd.png)

我该怎么做才能修复它并像往常一样显示音量对话框？

**编辑：**

这是我的使用代码`AudioManager`：

```
 private void initControls() {
     try {
         volumeSeekbar = (SeekBar)findViewById(R.id.seekBar1);
         audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
         volumeSeekbar.setMax(audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC));
         volumeSeekbar.setProgress(audioManager
                               .getStreamVolume(AudioManager.STREAM_MUSIC));   

         volumeSeekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
             @Override
             public void onStopTrackingTouch(SeekBar arg0) {}

             @Override
             public void onStartTrackingTouch(SeekBar arg0) {}

             @Override
             public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {
                 audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);
             }
         });
     }
     ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:38:34.657

该对话框未显示，因为您正在使用`onKeyDown()`函数中的键事件。因此，事件不会进一步传播，并且不会显示音量对话框。

有一个简单的解决方案。在该函数的[文档](http://developer.android.com/reference/android/app/Activity.html#onKeyDown%28int,%20android.view.KeyEvent%29)`onKeyDown()`中，它说您必须返回`false`以防止事件被消耗。现在对话框将再次显示。

不过，我认为您没有使用正确的方法来接收有关音量的信息。当音量对话框出现时，用户可以在其中拖动搜索栏并更改音量，这种更改不会反映在`onKeyDown()`函数调用中。您可以利用[`AudioManager`](https://developer.android.com/reference/android/media/AudioManager.html)它的`getStreamVolume()`功能：

```
AudioManager audioManager = (AudioManager) mContext.getSystemService(Context.AUDIO_SERVICE);
audioManager.getStreamVolume(AudioManager.STREAM_MUSIC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T03:41:51.550

您需要设置一个标志 ( `AudioManager.FLAG_SHOW_UI`)。 [这是一个](https://stackoverflow.com/a/13733061/1226799)帮助我的解决方案。

# wordpress - 在 Wordpress 中列出自定义数据

> ID：12868475
> 
> 赞同：2
> 
> 时间：2012-10-12T23:34:29.410
> 
> 标签：wordpress

我正在开发一个有自己的表的插件。我需要在 Wordpress 前端显示表格中的数据（例如：类别页面）。我不需要将这个表与帖子表连接起来，我只需要显示表中的数据，并带有分页。我需要一个来自我的插件目录的单独页面/自定义模板（在 MVC 框架的上下文中讨论 - 控制器），应该在其上显示和分页此数据。

请给我一个建议，实施它的最佳实践是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:49:12.357

如果我理解您的问题，那么我认为您需要添加`template_include`挂钩以使用插件目录中的自定义模板/页面，您可以这样做

```
add_filter('template_include', 'my_template', 1, 1); 
function my_template($template) { 
    global $post; 
    if($post->post_content == '[myPluginPage]') 
        return dirname(__FILE__) . '/my_pligin_template.php'; 
        return $template; 
} 
```

您应该将上面给出的代码粘贴到您的插件文件中，并在您的插件文件夹中创建一个具有名称`my_pligin_template.php`或任何您想要的文件，但在这种情况下，在第一个返回语句中，您也必须更改文件名。

现在您必须在 wordpress admin 中创建一个页面以在菜单栏中显示该页面并粘贴`[myPluginPage]`为内容。请注意`if($post->post_content == '[myPluginPage]')`，每当您单击任何菜单项时，它都会检查它是否是您的插件页面，如果它`[myPluginPage]`在内容中找到单词，那么它将返回自定义模板，您将在该页面。

现在您需要从数据库中获取数据，并在此自定义模板文件 (my_pligin_template.php) 中编写代码。为此，您可以编写

```
global $wpdb;
$pagenum = isset( $_GET['pagenum'] ) ? absint( $_GET['pagenum'] ) : 1;
$limit = 10;
$offset = ($pagenum-1) * $limit;
$total = $wpdb->get_var( "SELECT COUNT(*) FROM yourtable" );
$num_of_pages = ceil( $total / $limit );

$qry="select * from yourtable LIMIT $offset, $limit";
$result=$wpdb->get_results($qry);
if($result):
    foreach($result as $row)
    {
        // code here
    }

    //Link for Pagination
    $page_links = paginate_links( array(
        'base' => add_query_arg( 'pagenum', '%#%' ),
        'format' => '',
        'prev_text' => __( '&laquo;', 'aag' ),
        'next_text' => __( '&raquo;', 'aag' ),
        'total' => $num_of_pages,
        'current' => $pagenum
    ) );
    if ( $page_links ) {
        echo '<div class="tablenav"><div class="tablenav-pages" style="margin: 1em 0">' . $page_links . '</div></div>';
    }
endif; 
```

# maven - 'log4j:log4j:pom:1.2.15:compile' 的 POM 无效

> ID：12868476
> 
> 赞同：0
> 
> 时间：2012-10-12T23:34:55.650
> 
> 标签：maven, maven-2, log4j

谁能告诉我我在这里做错了什么？

运行 mvn install 时收到以下警告：

```
[WARNING] POM for 'log4j:log4j:pom:1.2.15:compile' is invalid. It will be ignored for artifact resolution. Reason: Cannot read project model from interpolating filter of serialized version. for project log4j:log4j at Artifact [log4j:log4j:pom:1.2.15:compile]
[WARNING] POM for 'log4j:log4j:pom:1.2.15:compile' is invalid. It will be ignored for artifact resolution. Reason: Cannot read project model from interpolating filter of serialized version. for project log4j:log4j at Artifact [log4j:log4j:pom:1.2.15:compile] 
```

Pom 文件有：

```
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <artifactId>mail</artifactId>
                <groupId>javax.mail</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jms</artifactId>
                <groupId>javax.jms</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jmxri</artifactId>
                <groupId>com.sun.jmx</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jmxtools</artifactId>
                <groupId>com.sun.jdmk</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T07:52:50.627

您的依赖声明没有任何问题。因此，我猜想在下载 POM 的过程中出了点问题。

删除本地存储库中的相关文件夹（例如`.m2/repository/log4j/log4j/1.2.15`），然后重试。

# shopify - 字体很棒的图标在 .liquid 文件中变成垃圾

> ID：12868477
> 
> 赞同：3
> 
> 时间：2012-10-12T23:35:15.220
> 
> 标签：shopify, font-awesome

我正在尝试使用 Shopify 和更少的字体真棒。我将我的less文件编译成css并添加了以下图标。

```
.icon-caret-down:before {
  content: "\f0d7";
} 
```

然后我将我的 css 文件重命名为 css.liquid 并上传。当我尝试在 Firefox 中查看图标时，它显示为垃圾。我应该在我的液体文件中放什么，以免它变成垃圾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:55:08.877

我在我的网站上使用了很棒的字体，我唯一更改的部分是文件顶部，以将asset_url 过滤器添加到less 文件中。看看是否有帮助。这是它的样子：

```
@fontAwesomePath: '../font';

@font-face {
  font-family: 'FontAwesome';
  src: url('{{ "fontawesome-webfont.eot" | asset_url }}');
  src: url('{{ "fontawesome-webfont.eot?#iefix" | asset_url }}') format('embedded-opentype'),
    url('{{ "fontawesome-webfont.woff | asset_url }}') format('woff'),
    url('{{ "fontawesome-webfont.ttf" | asset_url }}') format('truetype'),
    url('{{ "fontawesome-webfont.svg#FontAwesome" | asset_url }}') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

# php - 重写为友好的url php

> ID：12868479
> 
> 赞同：0
> 
> 时间：2012-10-12T23:35:25.777
> 
> 标签：php, .htaccess

> **可能重复：**
> [重写任意数量的路径段以查询参数](https://stackoverflow.com/questions/3655893/rewriting-an-arbitrary-number-of-path-segments-to-query-parameters)

htaccess`重写，但我不确定如何重写多个地址获取

我从头开始开发了一个论坛，并想改变

`url = view_topic.php?cat=$cat&sub=$sub&tid=$tid`

说

`view_topic.php?catname/subname/topicname`

一些帮助会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:43:40.560

你有没有尝试过这样的事情？

```
Options +FollowSymlinks
RewriteEngine On

RewriteRule ^viewtopic/([a-z])/([a-z])/([a-z])$ viewtopic.php?cat=$1&sub=$2&tid=$3 [NC,L] 
```

# java - java纸牌游戏有问题

> ID：12868482
> 
> 赞同：1
> 
> 时间：2012-10-12T23:35:42.857
> 
> 标签：java

在我开始之前，是的，这是一项家庭作业，所以显然我不是在要求任何答案，但如果有人能在正确的方向上帮助我或给我一些建议，我将不胜感激。

好的，所以对于一项任务，我正在用 java 制作一个黑杰克游戏。目前我有一个 Card 类、一个 Deck 类和我的 Main (CardGameTester)。现在我只和一个玩家（用户）一起玩游戏，所以它非常基础。我的主班很乱，我可以参加第三节课，但我决定改用这种方式。

我遇到了几个奇怪的错误，我相信这些错误是我弄乱了我的数组列表或与对象有关的东西。如果有人可以帮助我，我将不胜感激，因为我现在很困。

我尝试编译时遇到的错误：

```
6 errors and 1 warning found:
--------------
*** Errors ***
--------------
File: E:\Documents\Java Files\Assignment 3\CardGameTester.java  [line: 17]
Error: The method add(Card) in the type java.util.ArrayList<Card> is not applicable for the arguments (Deck)
File: E:\Documents\Java Files\Assignment 3\CardGameTester.java  [line: 28]
Error: The method add(Card) in the type java.util.ArrayList<Card> is not applicable for the arguments (Deck)
File: E:\Documents\Java Files\Assignment 3\CardGameTester.java  [line: 35]
Error: Type mismatch: cannot convert from Card to int
File: E:\Documents\Java Files\Assignment 3\Deck.java  [line: 15]
Error: The constructor Card() is undefined
File: E:\Documents\Java Files\Assignment 3\Deck.java  [line: 19]
Error: The method shuffle() is undefined for the type java.util.ArrayList<Card>
File: E:\Documents\Java Files\Assignment 3\Deck.java  [line: 30]
Error: c cannot be resolved
-------------
** Warning **
-------------
File: E:\Documents\Java Files\Assignment 3\Card.java  [line: 5]
Warning: The field Card.suits is never read locally 
```

这是 Card.java

```
public class Card
{
  private int rankValue, suitValue;
  private String ranks[] = {"Hearts", "Clubs", "Spades", "Diamonds"};
  private String suits[] = {"Ace", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

  public Card(int rank, int suit)
  {
    rankValue = rank;
    suitValue = suit;
  }

  public String convertToString(int rank){
    return ranks[rank];
  }

  public void setRank(int rank){
    rankValue = rank;
  }

  public void setSuit(int suit){
    suitValue = suit;
  }

  public int getRank(){
    return rankValue;
  }

  public int getSuit(){
    return suitValue;
  }

  public String toString(){
    return "Rank: " + rankValue + "Suit: " + suitValue;
  }
} 
```

这是 Deck.java：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Scanner;

public class Deck
{
  private ArrayList<Card> cards = new ArrayList<Card>();

  public Deck()
  {
    for(int a = 1; a <= 4; a++)
    {
      for(int b = 1; b <= 13; b++)
      {
        Card c = new Card();
        cards.add(c);
      }
    }
    cards.shuffle();
  }

  public void shuffle(){
    Collections.shuffle(cards);
  }

  public String deal(){
    int index = 0;
    cards.get(index);
    cards.remove(index);
    return "You have been dealt a: " + c.toString();
    index++;
  }
} 
```

这是我的主要 CardGametester.java：

```
public class CardGameTester
{
  public static void main(String[] args)
  {
    ArrayList<Card> hand = new ArrayList<Card>();
    Deck d = new Deck();

    Scanner scan = new Scanner(System.in);
    System.out.println("Welcome to the game of Black Jack!\nWould you like to Start?");
    String input = scan.nextLine();
    if(input == "yes")
    {
      d.deal();
      hand.add(d);
    }

    String input2;

    while (input2 == "yes")
    {
      Scanner keyboard = new Scanner(System.in);
      System.out.println("Would you like to hit or stay?");
      input2 = keyboard.nextLine();
      d.deal();
      hand.add(d);
    }

    int total;

    for(int index = 0; index <= hand.size(); index++)
    {
      total = hand.get(index);
    }

    System.out.println("Your total value for you cards are: " + total);

    if(total <= 21){
      System.out.println("Congrats, you have won for not going over 21");
    }
    else
      {
        System.out.println("Sorry, you lose for going over 21");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:41:29.403

您有一个`ArrayList`of`Card`但正在尝试添加不同类型的`Deck`:

```
ArrayList<Card> hand = new ArrayList<Card>();

hand.add(d); // d = Deck 
```

最好在 中返回卡的索引`Deck.deal`以跟踪您的`hand`.

另外，您正在调用：

```
Card c = new Card(); 
```

但构造函数有 2 个参数：

```
public Card(int rank, int suit) 
```

该`deal`方法有2个错误：

```
...
return "You have been dealt a: " + c.toString();
index++;
... 
```

首先在`Card` `c`这里定义。你可以使用：

```
Card c = cards.remove(index); 
```

其次，语句后面不能有`return`语句，所以`index++`不能出现在这里。

下一个：

> 错误：类型不匹配：无法从 Card 转换为 int

```
 total = hand.get(index);
      ^            ^
   int type     Card type 
```

您正在调用一个不存在的方法`ArrayList`

```
cards.shuffle(); 
```

你已经在一个方法中有这个，所以你可以调用

```
shuffle(); 
```

虽然不是编译错误，但使用`==`会导致您的输入字符串无法正确评估，因此请更改

```
if (input == "yes") 
```

到

```
if ("yes".equals(input)) 
```

考虑使用[枚举](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)来管理卡片等级和花色。

# recursion - Prolog 递归返回多个结果

> ID：12868485
> 
> 赞同：4
> 
> 时间：2012-10-12T23:35:55.657
> 
> 标签：recursion, prolog

首先，这是一个摆在我面前的家庭作业问题。

我应该编写一个谓词 btree_height\2 ，它采用二叉树并且（现在）只返回树的高度。

二叉树表示为：

```
node(node(leaf, x, leaf), x, node(leaf, x, leaf)) 
```

其中 x 是节点的整数值。（这只是一个示例树）。

我的代码如下：

```
btree_height(leaf, 0).
btree_height(node(leaf,_,leaf), 1).
btree_height(node(LT,_,RT), D):-
    btree_height(LT, DL), 
    btree_height(RT, DR),
    D is max(DL,DR)+1. 
```

我遇到的问题是，当我调用 btree_height(BT, D) 并为其提供 BT（如果深度为 4）时，它会递归 4 次并“返回”数字 4 四次。根据我的教授的说法，这是一种不正确的行为，因为它应该只返回数字 4 一次。（使用上面的示例，它会返回数字 2 两次）

这是我第一次在 Prolog 中编码，我不知道应该从哪里开始寻找。

如果它有所作为，这在技术上就是 SWI-Prolog...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:52:33.510

Since this is homework, I won't give you the full solution.

When your predicate hits a node that matches `node(leaf, _, leaf)`, it first executes the second clause. That returns one. Then, when you ask it to backtrack, it will also execute the third clause, because that *also* matches the input with `LT=leaf` and `RT=leaf`, so it will recurse twice and hit the `leaf` case both times.

Next time, if you have to debug this kind of problem yourself, `trace/1` is a good tool:

```
2 ?- trace.
true.

[trace] 2 ?- btree_height(node(node(leaf, x, leaf), x, node(leaf, x, leaf)), H).
   Call: (6) btree_height(node(node(leaf, x, leaf), x, node(leaf, x, leaf)), _G821) ? creep
   Call: (7) btree_height(node(leaf, x, leaf), _G903) ? creep
   Exit: (7) btree_height(node(leaf, x, leaf), 1) ? creep
   Call: (7) btree_height(node(leaf, x, leaf), _G903) ? creep
   Exit: (7) btree_height(node(leaf, x, leaf), 1) ? creep
   Call: (7) _G821 is max(1, 1)+1 ? creep
   Exit: (7) 2 is max(1, 1)+1 ? creep
   Exit: (6) btree_height(node(node(leaf, x, leaf), x, node(leaf, x, leaf)), 2) ? creep
H = 2 ;
   Redo: (7) btree_height(node(leaf, x, leaf), _G903) ? creep
   Call: (8) btree_height(leaf, _G903) ? creep
   Exit: (8) btree_height(leaf, 0) ? creep
   Call: (8) btree_height(leaf, _G903) ? creep
   Exit: (8) btree_height(leaf, 0) ? creep
   Call: (8) _G911 is max(0, 0)+1 ? creep
   Exit: (8) 1 is max(0, 0)+1 ? creep
   Exit: (7) btree_height(node(leaf, x, leaf), 1) ? creep
   Call: (7) _G821 is max(1, 1)+1 ? creep
   Exit: (7) 2 is max(1, 1)+1 ? creep
   Exit: (6) btree_height(node(node(leaf, x, leaf), x, node(leaf, x, leaf)), 2) ? creep
H = 2 
```

(Where it says `creep`, I pressed `Enter`.)

# ruby-on-rails - 本地宝石资产未更新

> ID：12868488
> 
> 赞同：3
> 
> 时间：2012-10-12T23:36:03.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, gem, bundler

我已经分叉了一个 gem，并且在尝试更改它时，决定从我的 git 存储库中更改 gemfile（一直在更新）：

```
gem 'bootstrap-wysihtml5-rails', :git => 'git://github.com/Asherlc/bootstrap-wysihtml5-rails.git' 
```

到本地目录（只是克隆的 git 存储库）：

```
gem 'bootstrap-wysihtml5-rails', :path => '/Users/ashercohen/Documents/bootstrap-wysihtml5-rails' 
```

在运行`bundle update`或`bundle install`时，它会在读数中显示正确的版本号（自切换 gem 源后更新）。但是，`/vendor/assets`路径中的所有文件似乎都没有在我的 Rails 应用程序中得到更新。我需要清除某种缓存吗？

我的 Rails 应用程序中没有`/vendor/cache`文件，并且我确信由于 gem 版本在捆绑程序读数中正确更新，因此路径是正确的。

我在这里缺少一些步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:27:59.643

原来 Chrome 只是在积极地缓存 JS。

# html - 基本 CSS 菜单不起作用 - 有什么冲突吗？

> ID：12868491
> 
> 赞同：1
> 
> 时间：2012-10-12T23:36:32.247
> 
> 标签：html, css, drop-down-menu, menu

我没有做任何花哨的事情。而且我已经两次和三次检查了我的代码并尝试了各种方法。我不知道为什么下拉菜单会被切断。这里发生了什么？

[http://nbkclientsite.fuzzpopstudio.com/](http://nbkclientsite.fuzzpopstudio.com/)

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:42:20.327

你已经删除了它，它可以工作`overflow:hidden`。`menu-themainmenu-container`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:41:21.600

您是否检查过 z-index 的下拉列表和与其重叠的容器？在我的“日常”工作中，我无法使用像样的浏览器 ATM ......但看起来 z-index 只是关闭了。

# c# - 永久锁定文件

> ID：12868492
> 
> 赞同：0
> 
> 时间：2012-10-12T23:36:37.240
> 
> 标签：c#, encryption, filestream, file-locking

我正在使用 VS2010 上的 C# 开发文件锁定器/解锁器应用程序。我想要的是使用我的应用程序使用密码锁定文件，然后随时解锁。

事实上，我使用下面的代码来锁定文件，但文件只是在应用程序仍在运行时才被锁定；当我关闭应用程序时，文件被解锁。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Configuration;
using System.Windows.Forms;

namespace LockFile
{
    public enum LockStatus
    {
        Unlocked,
        Locked
    }

    public class LockFilePresenter
    {
        private ILockFileView view;
        private string file2Lock = string.Empty;
        private FileStream fileLockStream = null;

        public LockFilePresenter(ILockFileView view)
        {
            this.view = view;
        }

        internal void LockFile()
        {
            if (string.IsNullOrEmpty(file2Lock) || !File.Exists(file2Lock))
            {
                view.ShowMessage("Please select a path to lock.");
                return;
            }

            if (fileLockStream != null)
            {
                view.ShowMessage("The path is already locked.");
                return;
            }
            try
            {
                fileLockStream = File.Open(file2Lock, FileMode.Open);
                fileLockStream.Lock(0, fileLockStream.Length);
                view.SetStatus(LockStatus.Locked);
            }
            catch (Exception ex)
            {
                fileLockStream = null;
                view.SetStatus(LockStatus.Unlocked);
                view.ShowMessage(string.Format("An error occurred locking the path.\r\n\r\n{0}", ex.Message));
            }
        }

        internal void UnlockFile()
        {
            if (fileLockStream == null)
            {
                view.ShowMessage("No path is currently locked.");
                return;
            }
            try
            {
                using (fileLockStream)
                    fileLockStream.Unlock(0, fileLockStream.Length);
            }
            catch (Exception ex)
            {
                view.ShowMessage(string.Format("An error occurred unlocking the path.\r\n\r\n{0}", ex.Message));
            }
            finally
            {
                fileLockStream = null;
            }
            view.SetStatus(LockStatus.Unlocked);
        }

        internal void SetFile(string path)
        {
            if (ValidateFile(path))
            {
                if (fileLockStream != null)
                    UnlockFile();
                view.SetStatus(LockStatus.Unlocked);
                file2Lock = path;
                view.SetFile(path);
            }
        }

        internal bool ValidateFile(string path)
        {
            bool exists = File.Exists(path);
            if (!exists)
                view.ShowMessage("File does not exist.");
            return exists;
        }
    }
} 
```

和

```
using System;
using System.Collections.Generic;
using System.Text;

namespace LockFile
{
    public interface ILockFileView
    {
        void ShowMessage(string p);
        void SetStatus(LockStatus lockStatus);
        void SetFile(string path);
    }
} 
```

正如我之前所说，该应用程序在运行期间工作正常，但是当我关闭它时，锁定的文件将被解锁。

如果有人对如何做到这一点有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T23:50:07.447

A `Lock` on a `FileStream` just means that your process has exclusive access to the file while it's active; it has nothing to do with password protecting a file.

It sounds like what you want is to encrypt a file with a password. The file class provides Encrypt/Decrypt based on the current user, or, if you want it based on your own custom password there's a sample of using some of the classes in the `System.Security.Cryptography` namespace to encrypt a file with a password here (instead of hard coding you would take it as input presumably) [http://www.codeproject.com/Articles/26085/File-Encryption-and-Decryption-in-C](http://www.codeproject.com/Articles/26085/File-Encryption-and-Decryption-in-C)

Keep in mind, doing security right is *hard*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T23:56:23.173

您正在使用该`FileStream.Lock()`方法锁定特定文件，以便只有运行该文件的进程`FileStream`才能使用它。

[http://msdn.microsoft.com/en-us/library/system.io.filestream.lock.aspx](http://msdn.microsoft.com/en-us/library/system.io.filestream.lock.aspx)

这是一种旨在防止其他进程写入您正在读取/写入的文件的机制，您可以在 Microsoft Excel 等应用程序中看到此方法。

当您关闭应用程序时，该进程不再运行，并且文件上的锁定被解除。

如果您的目标是阻止其他应用程序读取该文件，那么您有一些有限的选择：

1.  加密文件。这意味着应用程序无法在没有解密密钥的情况下从文件中读取可用信息，但应用程序有可能打开和更改加密文件。
2.  将文件保存到只读媒体（如 CD/DVD）或可移动存储中，然后拔下插头并随身携带。

如果您想阻止其他应用程序修改文件，您可以查看 Windows 提供的 ReadOnly 标志：http: [//msdn.microsoft.com/en-us/library/system.io.fileinfo.isreadonly.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.isreadonly.aspx)

请注意，这些仍然是不安全的，因为可以忽略只读标志。

您需要考虑的是您为什么要限制对文件的访问的推理 - 这将有助于确定限制访问的最佳策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:49:32.750

If all you need to do is make sure nothing else can read or modify the file while you've got your application locking it, the below should do the job.

If you need anything more, look into proper file encryption techniques.

Note that if you close the application the lock will no longer be in effect.

```
 System.IO.FileStream fileStream;

    private void LockFile(string FilePath)
    {
        fileStream = System.IO.File.Open(FilePath, System.IO.FileMode.Open, System.IO.FileAccess.ReadWrite, System.IO.FileShare.None);
        //using System.IO.FileShare.None in the above line should be sufficient, but just to go the extra mile...
        fileStream.Lock(0, fileStream.Length);
    }

    private void UnlockFile()
    {
        if (fileStream != null)
        {
            try { fileStream.Unlock(0, fileStream.Length); }
            finally { fileStream.Dispose(); }
        }
    } 
```

# backbone.js - 动态添加/删除区域到布局

> ID：12868494
> 
> 赞同：0
> 
> 时间：2012-10-12T23:36:58.330
> 
> 标签：backbone.js, marionette

是否可以使用 Marionette 在布局中动态添加和删除区域？我的应用程序需要能够从布局中推送和弹出区域。这类似于当您深入研究项目的源代码时 GitHub 推送和弹出视图的方式。他们在呈现下一个视图时有幻灯片动画，然后在您退出时滑回。这个想法是我需要保留以前的观点。另一个类比是 UINavigationControllers 如何在 iOS 上工作。

或者也许我应该只定义一个能够动态处理添加和删除区域的自定义布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:23:45.617

我最终实现了一个容器视图来满足我的需求。它会像您在 Marionette 中所期望的那样清理事件参考。

[https://github.com/ayoung/backbone-vs-marionette/blob/marionette/public/js/views/mainContainer.js](https://github.com/ayoung/backbone-vs-marionette/blob/marionette/public/js/views/mainContainer.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:20:46.297

我不确定，但您可能对某些 html 的存在和该 html 的显示感到困惑？

我的意思是你可以制作一个 Items 的 CompositeView 并且一次只显示一个项目。然后使用 jQuery animate 或其他动画库在 CompositeView 的 Items 中移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T04:00:56.913

对的，这是可能的。这是我使用的代码。

布局：

```
var Layout = Marionette.LayoutView.extend({
    initialize: function(options) {
        options = _.extend({ regionTag: 'div' }, options);
        this.mergeOptions(options, ['regionTag', 'regionName']);
    },

    template: false,

    regions: {},

    append: function(view) {
        var viewClass = 'dynamic-layout-' + this.regionName,
            viewCount = $('.' + viewClass).length + 1,
            viewId = this.regionName + '-view-' + viewCount,
            $el = $('<' + this.regionTag + '/>', {
                id: viewId,
                class: viewClass
            });
        this.$el.append($el);

        var region = Marionette.Region.extend({
            el: '#' + viewId
        });

        this.regionManager.addRegion(viewId, region);
        this.regionManager.get(viewId).show(view);
    },

    appendEmpty: function(id, className, tag) {
        tag = tag || 'div';
        var data = { id: id, className: className, tag: tag };
        var $el = Marionette.Renderer.render('#append-layout-template', data);
        this.$el.append($el);
        var region = Marionette.Region.extend({
            el: '#' + id 
        });
        this.regionManager.addRegion(id, region);   
    },

    customRemove: function(regionId) {
        this.regionManager.removeRegion(regionId);
    }
}); 
```

一个有用的模板：

```
<script type="text/template" id="append-layout-template">
    <<%= tag %> id='<%= id %>' class='<%= className %>'></<%= tag %>>
</script> 
```

控制器：

```
var view = new SomeView();
// the region name will be a part of a unique id
var layout = new Layout({ regionName: 'myRegion' });
// add a dynamic region to the layout and a view to that region
layout.append(view);
// same as above (you have to name the id and class yourself)
var regionId = 'myRegionId';
layout.appendEmpty(regionId, 'someClassName', 'span');
layout.getRegion(regionId).show(view);
// remove a region
layout.customRemove(regionId); 
```

# c++ - 通过网络发送数据的最快 C/C++ 技术？

> ID：12868497
> 
> 赞同：1
> 
> 时间：2012-10-12T23:37:25.883
> 
> 标签：c++, c, linux, sockets, kernel

如果我有两个 Linux 机器并且我正在编写一个 C/C++ 程序以在一个机器上发送消息并在另一个机器上接收，那么最快的方法是什么？

我不确定我听到的各种套接字/网络技术是否只是底层技术的包装，或者它们是否是替代可能性。我只想知道最接近我可以从我的应用程序中实现的“裸机”。

我在想最快的方法包括将我的程序编写为驱动程序并将其加载到内核中。但是，我仍然需要知道最快的套接字实现来使用这个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T02:01:27.637

任何现代 PC 都能够保持以太网芯片缓冲器满载，因此“裸机”编程不会带来任何好处。与网络延迟（即光速限制）相比，通过内核增加的延迟非常小，不值得优化。

对于在两个连接的 Linux 机器之间进行高带宽数据移动的“快速”，TCP 是你的朋友，因为它会优化自身以达到最大的网络能力，而无需你自己检测和调整。直接连接的丢包率可以忽略不计，而且延迟通常很低，因此您不必担心窗口大小等。

如果您想要“快速”以快速处理小请求，请使用 UDP。

如果您对“快速”有其他定义，那么您需要详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:55:34.177

这个问题不完整，因为您没有指定任何要求，除了它必须快速。这里有很多方面需要考虑，例如要使用的协议（TCP 用于可靠性，UDP 用于流式传输等），序列化（您打算通过网络发送什么样的数据，您可以使用序列化库，例如Google Protobuf？）等等。

我的建议是查看各种 RPC 框架，例如 Apache Thrift、Apace Etch 或 ZeroC Ice，并在您决定确实需要使用 BSD 套接字 API 或类似的低级抽象之前对它们进行基准测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:56:37.033

好吧，除非您想为以太网上的自定义通信构建内核模块，否则 libc 中最快的用户空间 API 是 Berkley Sockets API。是的，这是内核 TCP/IP 和 UDP/IP 的包装，它是 IP 上的一层，它是 WWAN、LAN 和以太网的一层，它是其他东西上的一层，但除非你需要如此不可思议和精确的性能，我建议留在用户空间中的简单东西，而不是编写你需要使用更低的内核模块。除非我完全错了，否则无法从用户空间访问原始以太网、WWAN 或 LAN，更不用说实际访问硬件了。

注意：如果您有几年时间重写整个 UNIX 网络堆栈和网卡驱动程序，您可以在以 root 身份运行时从用户空间获得 x86 I/O 端口访问权限`ioperm()`，但我不建议重写整个 UNIX 网络堆。这差不多是 2 年的工作。此外，来自 3-d 方应用程序的直接硬件访问是等待发生的安全灾难。

注意：如果您可以不使用任何传统*硬件*进行网络连接，您可以为双端 USB 电缆编写自定义驱动程序并在其上创建自定义网络协议，因为编写 Linux USB 设备驱动程序可能是最容易编写的驱动程序，因为它有一个很大的 API。我真的不知道这里的速度会如何叠加，因为 USB 2.0 比旧的以太网标准更快，但是他们开始有 1 Gbps 以太网，现在有 SUB 3.0，所以这可能更快或更慢，取决于可用的硬件。这更多是关于易用性。

编辑：为了速度，请永远不要将代码放入内核中。请。您在机器中放置的巨大安全漏洞不值得性能的小幅提升。曾经有一段时间，系统调用非常昂贵，您希望最小化并添加到内核是一种选择，但是对于 Intel 的`sysenter`/`sysexit`和 AMD 的`syscall`/等新标准`sysret`，它们足够便宜，不足以保证安全漏洞。

# performance - 什么时候将长度吸气剂移出循环才有意义？

> ID：12868499
> 
> 赞同：0
> 
> 时间：2012-10-12T23:37:29.810
> 
> 标签：performance, optimization, language-agnostic

考虑以下内容（不是任何特定语言）：

```
for (i=0; i<list.length(); i++) { ... } 
```

有些人喜欢将其重写为：

```
int len = list.length()
for (i=0; i<len; i++) { ... } 
```

`list.length()`如果获取长度不是 O(1)，这将是有意义的。但我看不出有任何理由会出现这种情况。无论数据类型如何，在某处添加一个长度字段并在大小发生变化时更新它应该是微不足道的。

是否存在获取或更新长度不是 O(1) 的常见数据类型？或者还有其他原因为什么有人想要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:40:31.077

这是一种微优化，但却**是有效的**（不是暗示应该这样做，而是它可以提高速度——最有可能是不明显的加速）。这是有效的原因是因为**aliasing**。

`length`可以在循环内修改，非侵入式编译器*可能*无法判断它是否被修改。因此，它每次都必须读取该值，而不是在循环之前访问一次。

如果通过方法调用检索长度，则差异可能会更加明显 - 就像您在 C++ 中所做的那样：

```
int len = vect.size(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:40:53.713

在这种情况下，您是直接访问属性，而不是使用 getter（函数调用）。这可能总是比方法调用快。即使有方法调用，许多语言也足够聪明，可以对其进行优化。

# c# - json检索后排序数组

> ID：12868501
> 
> 赞同：0
> 
> 时间：2012-10-12T23:38:14.760
> 
> 标签：c#, json, sorting

我有以下代码，它可以很好地解析 JSON。

EVENT 和 SQUAD 是 JSON 数组。

我需要什么代码才能对数组进行排序，例如在 TIME 上对 EVENT 进行排序，或者在 RANK 上对 SQUAD 进行排序？

```
void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
        {

            var serializer = new DataContractJsonSerializer(typeof(gameDetails));
            gameDetails jsResult = (gameDetails)serializer.ReadObject(e.Result);

        ...
        }
        [DataContract]
        public class gameDetails
        {
            [DataMember]
            public string HomeTeamScore { get; set; }
            [DataMember]
            public string AwayTeamScore { get; set; }
            [DataMember]
            public string FixtureDate { get; set; }
            [DataMember]
            public string HomeTeamName { get; set; }
            [DataMember]
            public string AwayTeamName { get; set; }
            [DataMember(Name = "EVENT")]
            public EVENT[] EVENTS;
            [DataMember(Name = "SQUADS")]
            public SQUAD[] SQUADS;

        }
        [DataContract]
        public class EVENT
        {
            [DataMember]
            public string TEAMFLAG { get; set; }
            [DataMember]
            public string TIME { get; set; }
            [DataMember]
            public string PLAYER { get; set; }
            [DataMember]
            public string TYPE { get; set; }
        }

        [DataContract]
        public class SQUAD
        {
            [DataMember]
            public string PLSURN { get; set; }
            [DataMember]
            public string PLID { get; set; }
            [DataMember]
            public string PLAYER { get; set; }
            [DataMember]
            public string TEAM { get; set; }
            [DataMember]
            public string PLFORN { get; set; }
            [DataMember]
            public string SQUADNO { get; set; }
            [DataMember]
            public string RANK { get; set; }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:46:22.260

也许这用于排序事件：

```
jsResult.EVENTS = jsResult.EVENTS.OrderBy(e=>e.TIME).ToArray(); 
```

请注意，TIME 是字符串，您可能希望在排序之前对其进行转换。

# google-cloud-storage - 如何在 Google Cloud Storage 上正确设置 Expires 标头？

> ID：12868505
> 
> 赞同：4
> 
> 时间：2012-10-12T23:39:15.320
> 
> 标签：google-cloud-storage

[Google Cloud Storage 开发人员指南](https://developers.google.com/storage/docs/developer-guide)解释了如何设置 Cache-Control 标头，并解释了它们对 api 一致性行为的关键影响，但没有提及 Expires 标头，它们似乎也没有从 Cache-Control 配置继承。

无论 Cache-Control 设置如何，Expires 标头似乎总是等于请求时间加上 1 年，例如。

```
$ gsutil setmeta -h "Cache-Control:300" gs://example-bucket/doc.html 
```

通过以下方式向 Google Cloud Storage 存储桶（example-bucket）中的文档（doc.html）发出请求

```
$ curl -I http://example-bucket.storage.googleapis.com/doc.html 
```

这产生了以下标题

```
HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Oct 3 2012 16:52:30 (1349308350)
Date: Sat, 13 Oct 2012 00:51:13 GMT
Cache-Control: 300, no-transform
Expires: Sun, 13 Oct 2013 00:51:13 GMT
Last-Modified: Fri, 12 Oct 2012 20:08:41 GMT
ETag: "28fafe4213ae34c7d3ebf9ac5a6aade8"
x-goog-sequence-number: 82
x-goog-generation: 1347601001449082
x-goog-metageneration: 1
Content-Type: text/html
Accept-Ranges: bytes
Content-Length: 7069
Vary: Origin 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:33:45.740

不知道为什么你说 Expires 标头显示请求时间加上 1 年。在您的示例中，Expires 标头显示请求日期后一小时的时间戳，这是意料之中的。

我刚刚做了一个实验，通过以下命令将对象的最大年龄设置为 3600，然后设置为 7200：

```
gsutil setmeta "Cache-Control:max-age=7200" gs://marc-us/xyz.txt 
```

然后我使用带有 -D 选项的 gsutil cat 命令检索对象以查看请求/响应详细信息，如下所示：

```
gsutil -D cat gs://marc-us/xyz.txt 
```

在这两个实验中，Expires 标头根据对象的 max-age 设置（即请求时间后一小时和请求时间后两小时）生成预期的时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T02:02:17.263

看起来这是由格式错误的标头引起的。呃。

```
Cache-Control: 300, no-transform 
```

应该

```
Cache-Control: public, max-age=300, no-transform 
```

当事情设置正确时，它们就会起作用。请参阅[RFC 2616 (HTTP/1.1) 第 14.9 节（缓存控制）](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)。

# java - Java Applet HttpPost 通过 HttpClient/HttpPost 和 InputStreamBody 到 apache

> ID：12868509
> 
> 赞同：1
> 
> 时间：2012-10-12T23:39:39.390
> 
> 标签：java, applet, apache2, apache-httpclient-4.x

Program 是一个小程序，用于获取一些文件，处理它们，通过 ZipOutputStream 发送它们，然后将（通常相当大的）zip 文件上传到服务器。它使用 Apache HttpClient 4.2.1（和辅助库）。我的发布请求正在特权空间中执行。我遇到的问题是 Apache/2.2.16 (Win32) 拒绝接受请求。我在 Apache 错误日志中收到一个错误，“禁止分块传输编码”。

如果我使用wireshark 来捕获连接，请求如下所示：

```
POST /data/FileUpload.php?userId=21 HTTP/1.1
Transfer-Encoding: chunked
Content-Type: multipart/form-data; boundary=PjgV56PRG1T0eeWZNfM3Gumc8v0p8j
Host: 192.168.2.16:8000
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.2.1 (java 1.5)
10be

--PjgV56PRG1T0eeWZNfM3Gumc8v0p8j
Content-Disposition: form-data; name="ZipFile"; filename="JavaUploaderZipStream.zip"
Content-Type: application/zip
Content-Transfer-Encoding: binary 
```

执行这个请求的代码是：

```
 HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpClient httpclient = new DefaultHttpClient(params);

    HttpPost httpPost = new HttpPost(url);
    ZipCompressionInputStream zipStream = new ZipCompressionInputStream(fileList);

    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.STRICT);
    InputStreamBody uploadPart = new InputStreamBody(zipStream, "application/zip", "JavaUploaderZipStream.zip");
    reqEntity.addPart("ZipFile", uploadPart);
    httpPost.setEntity(reqEntity);

    HttpResponse response = httpclient.execute(httpPost);
    try {
        HttpEntity responseEntity = response.getEntity();
        EntityUtils.consume(responseEntity);
    } finally {
        httpPost.releaseConnection();
    } 
```

据我所知，Apache 2.2 应该接受分块数据。我没有看到任何拒绝它的开关。它似乎正在接受 HTTP/1.1 连接。我不知道为什么它只是拒绝我尝试的任何东西。

# sql - 将这些数据合并到一个表中？

> ID：12868510
> 
> 赞同：1
> 
> 时间：2012-10-12T23:39:56.637
> 
> 标签：sql, sql-server, nhibernate

我想弄清楚我是否可以摆脱桌子。

现在我有任务和约会。这两个表都有不同的列并存储不同的信息，所以我不能也不会合并这些表。

但是，对于每个任务和约会，您可以设置多个提醒（通过短信、电子邮件和两者发送）。

现在我有 2 个单独的提醒表。它们都具有 FK 所期望的相同列。

![在此处输入图像描述](../Images/3f0aa15afdb41ca816abe599a1cc3aa4.png)

那么是否可以为两者使用同一张表？

我看到这种情况发生的唯一方法是我总是在表中同时拥有两个 FK，但一个始终为空（这似乎是错误的）。

![在此处输入图像描述](../Images/0da596f621b0f8c73787e4851cf2a89f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:45:51.910

你可以这样做

```
Reminder
  - ID
  - ReminderDate
  - EntityID     -- Could be TaskID or AppointmentID
  - EntityType   -- TASK or APPOINTMENT 
```

## 插入

```
INSERT INTO Reminder(@ReminderID, @TaskID, 'TASK') 
INSERT INTO Reminder(@ReminderID, @AppointmentID, 'APPOINTMENT') 
```

## 选择

```
SELECT * FROM Reminder WHERE EntityID=@TaskID AND EntityType='TASK' -- Reminders for Task

SELECT * FROM Reminder WHERE EntityID=@AppointmentID AND EntityType='Appointment' -- Reminders for Appointment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:59:22.710

“我看到这种情况发生的唯一方法是，我总是在表中同时拥有两个 FK，但一个始终为空（这似乎是错误的）。”

我看不出有什么问题。这是您的业务规则。您可以使用检查约束在数据库级别强制执行它（2 个外键 + 检查约束，始终一个字段不能为空，另一个不能为空）。

无论如何，保留此解决方案并拥有适当的外键比使用 EntityID、EntityType 技巧 IMO 更好。

使用数据库功能来强制数据完整性。否则，获得不良数据的可能性会上升。您可以在代码中强制执行一些规则，但您犯错误或强制执行业务规则的可能性远高于使用外键约束等数据库功能。

# xamarin.ios - Monotouch 中的 Web 服务返回 XML 而不是 JSON

> ID：12868511
> 
> 赞同：1
> 
> 时间：2012-10-12T23:40:24.910
> 
> 标签：xamarin.ios, httpwebrequest

我尝试使用 Monotouch 通过 HttpWebRequest 对象获取 JSON 数据。它在 iPhone 模拟器中运行良好，我得到了 JSON。但是当我在设备中运行应用程序时，当调用 Web 服务时，我总是返回 XML 而不是 JSON。

从 iPhone 运行时，是否有任何特定的配置参数需要设置才能以 JSON 格式获得结果？我在 iPhone 5 和 ios 6 上运行它。

这是我的代码..

```
var request = HttpWebRequest.Create(String.Format (@"{0}/GetActiveProductCountAfterID/filter?minID={1}",baseUrl, lastProductNumberInDatabase));
Logger.Debug("Request URL is: " + request.RequestUri);
request.ContentType = @"application/json";  
request.Method = "GET";
try{
     using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
     {
        if (response.StatusCode != HttpStatusCode.OK)
           Console.Out.WriteLine("Error fetching data. Server returned status code: {0}", response.StatusCode);
        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
        {
            string content = reader.ReadToEnd();
........ 
```

当我在模拟器中运行时，我将内容作为整数..例如：3456

但是当我从 iPhone 上运行它时，我得到了

```
<int xmlns="http://schemas.microsoft.com/2003/10/Serialization/">3456</int> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:32:20.627

通过将服务器端 Web 服务设置为将 json 作为默认 Web 服务来解决它。对于那些可能遇到相同问题的人，这是我必须做的以将 Json 作为默认格式（在服务器中 .Net WCF 上的 web.config 文件中）

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true"   defaultOutgoingResponseFormat="Json" />
  </webHttpEndpoint>
</standardEndpoints> 
```

# jsf - 如何获取最初请求页面的 url？

> ID：12868512
> 
> 赞同：2
> 
> 时间：2012-10-12T23:40:25.727
> 
> 标签：jsf, jsf-2

我使用以下 web.xml 设置将未登录用户定向到 /faces/loginPage.xhtml。
在 /faces/loginPage.xhtml 中，我将对用户进行身份验证并将用户重定向到主页。

现在我想将用户重定向到她最初请求的页面，而不是主页。我怎么做？具体来说，如何获取最初请求页面的url？

```
<security-constraint>
    <display-name>MyConstraint</display-name>
    <web-resource-collection>
        <web-resource-name>wrcoll</web-resource-name>
        <description />
        <url-pattern>/faces/secured/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description />
        <role-name>myUser</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>my_ldap_domain</realm-name>
    <form-login-config>
        <form-login-page>/faces/loginPage.xhtml</form-login-page>
        <form-error-page>/error.xhtml</form-error-page>
    </form-login-config>
</login-config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:55:29.170

您似乎是通过 JSF 托管 bean 而不是通过`j_security_check`. 因为如果您使用后者，这已经被自动考虑在内。

基于 FORM 的身份验证登录页面以[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)通常的 Servlet API 方式显示。因此，最初请求页面的请求 URI 可用作请求属性，其名称由 指定[`RequestDispatcher.FORWARD_REQUEST_URI`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#FORWARD_REQUEST_URI)，其值为[`"javax.servlet.forward.request_uri"`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.FORWARD_REQUEST_URI)。

因此，在 EL 上下文中，它可以作为

```
#{requestScope['javax.servlet.forward.request_uri']} 
```

在 JSF 上下文中，它可以作为

```
String originalURL = (String) FacesContext.getCurrentInstance().getExternalContext().getRequestMap().get("javax.servlet.forward.request_uri"); 
```

这需要在初始请求时收集，而不是在表单提交时收集。`@ViewScoped`最简单的方法是在附加到页面的托管 bean 的构造函数中获取它。使用 bean 的另一种方法`@RequestScoped`是在登录表单中使用该值包含纯 HTML`<input type="hidden">`并将其设置为`@ManagedProperty`.

# java - 工作线程阻塞 GUI 重绘

> ID：12868514
> 
> 赞同：3
> 
> 时间：2012-10-12T23:40:33.637
> 
> 标签：java, multithreading, swing, swingworker, event-dispatch-thread

我正在尝试为应用程序制作登录屏幕。在登录期间，将对 MySQL 数据库进行许多 SQL 调用，并且可能需要几秒钟来设置所有内容。我想通过卡片布局显示状态屏幕并在后台线程运行时更新 JLabel。

这是我的工作线程的要点：

```
public class LoginPrepThread extends Thread {

    private final UIMain parent;

    public LoginPrepThread(UIMain w){
        parent = w;
    }

    public void exec(){
        EventQueue.invokeLater(this);
    }

    public void run(){
        try{
            //SqlHelper sql = SqlHelper.instance;
            sleep(500);
            parent.getLoadingLable().setText("Fetching preferences...");
            parent.getMainFrame().revalidate();
            sleep(500);
            parent.getLoadingLable().setText("Scanning workbench...");
            parent.getMainFrame().revalidate();
            sleep(500);
            parent.getLoadingLable().setText("Updating permissions...");
            parent.getMainFrame().revalidate();
            sleep(500);
            parent.getLoadingLable().setText("Finished...Please wait");
            parent.getMainFrame().revalidate();
            sleep(1000);
            parent.getLayout().show(parent.getMainFrame().getContentPane(), "view.main");
        }catch(Exception e){

        }
    }

} 
```

这是我的调用方式（在 JButton 的事件中，经过身份验证后）：

```
setActiveProfile(user);
layout.show(frame.getContentPane(), "view.loading");
frame.repaint();
LoginPrepThread pt = new LoginPrepThread(thisTrick);
pt.exec(); 
```

我现在放了一些虚拟事件，但状态标签没有改变......有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:58:36.783

一个简单的摇摆工人解决了它。我想我在谷歌上做得不够好

```
public class LoginPrepThread extends SwingWorker<String,String> {

    private final UIMain parent;

    public LoginPrepThread(UIMain w){
        parent = w;
    }

    @Override
    protected String doInBackground() throws Exception {
        try{
            publish("Fetching preferences...");
            Thread.sleep(1000);
            publish("Updating permissions...");
            Thread.sleep(1000);
            publish("Scanning workbench...");
            Thread.sleep(1000);
            publish("Finalizing...");
            Thread.sleep(2000);
            publish("Finished...Please wait");
            Thread.sleep(1000);
            parent.getLayout().show(parent.getMainFrame().getContentPane(), "view.main");
        }catch(Exception e){

        }
        return null;
    }

    protected void process(List<String> item) {
        parent.getLoadingLable().setText(item.get(0));
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:09:22.133

理想情况下，您将实现一个 SwingWorker 来执行所有繁重的非 GUI 相关任务。您应该利用事件驱动编程的全部内容。

你需要做的是这样的：

*   为您的 GUI 类实现一个 PropertyChangeListner，监听更新。根据属性更改，更新标签。让单个 GUI 类处理所有与 GUI 相关的更新活动始终是一个好习惯。

*   创建一个 SwingWorker，您将在其中执行后台密集型任务。当有可用更新时，触发属性更改事件并让 GUI 类知道有更新。

这是您可以执行的操作的一个小型[SSCCE示例：](http://sscce.org)

```
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.SwingWorker;

/**
 *
 * @author Sujay
 */
public class SimpleWorkerUI extends javax.swing.JFrame implements PropertyChangeListener{

    /**
     * Creates new form SimpleWorkerUI
     */
    public SimpleWorkerUI() {
        initComponents();
        Worker worker = new Worker();
        worker.addPropertyChangeListener(this);
        worker.execute();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Current Status: ");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel2)
                .addContainerGap(327, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jLabel2))
                .addContainerGap(20, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SimpleWorkerUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SimpleWorkerUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SimpleWorkerUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SimpleWorkerUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new SimpleWorkerUI().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    // End of variables declaration

    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        if("status".equalsIgnoreCase(evt.getPropertyName())){
            String currentStatus = (String) evt.getNewValue();
            jLabel2.setText(currentStatus);
        }
    }
}

class Worker extends SwingWorker<String, String>{

    private static final int FINAL_VALUE = 1000;

    @Override
    protected String doInBackground() throws Exception {
        int counter = 0;

        while(counter < FINAL_VALUE){
            firePropertyChange("status", "", "value is: "+counter);
            try{
                Thread.sleep(100);
            }catch(InterruptedException ixe){
            }
            counter++;
        }
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:58:12.940

您不应在事件分派线程上执行任何长时间运行的操作。您正在执行一个需要 3 秒才能完成的操作。在这 3 秒内，您将独占 EDT，并且不会发生其他 GUI 更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T01:30:47.910

你一开始是出于好意...

```
public class LoginPrepThread extends Thread {

    private final UIMain parent;

    public LoginPrepThread(UIMain w){
        parent = w;
    }

    public void exec(){
        EventQueue.invokeLater(this);
    }

    public void run(){
        try{
            //SqlHelper sql = SqlHelper.instance;
            sleep(500);
            parent.getLoadingLable().setText("Fetching preferences...");
            parent.getMainFrame().revalidate();
            sleep(500);
            parent.getLoadingLable().setText("Scanning workbench...");
            parent.getMainFrame().revalidate();
            sleep(500);
            parent.getLoadingLable().setText("Updating permissions...");
            parent.getMainFrame().revalidate();
            sleep(500);
            parent.getLoadingLable().setText("Finished...Please wait");
            parent.getMainFrame().revalidate();
            sleep(1000);
            parent.getLayout().show(parent.getMainFrame().getContentPane(), "view.main");
        }catch(Exception e){
        }
    }
} 
```

基本上，发生的情况是，当您调用`exec`实际向 EDT 发出请求以调用该`run`方法时，该方法随后在 EDT 内执行，从而导致阻塞。

此外，在您的原始示例中，扩展从`Thread`您从未真正开始它是没有意义的。

为了将来参考，我将仔细研究[Java 中的并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

您是正确的（在您的自我回答中），`SwingWorker`这是一个更容易的解决方案。

# java - 使用多个数组并在其中递增对象

> ID：12868516
> 
> 赞同：1
> 
> 时间：2012-10-12T23:40:51.560
> 
> 标签：java, arrays

假设我有这些课程：

```
public class EdgeI {
  public int from;
  public int to;

  public EdgeI (int a1, int a2) {
    from = a1;
    to = a2;
  }
}

public class VertexI {
  public List neighbors;
  public String info;

  public VertexI (List neig, String str) {
    neighbors = neig;
    info = str;
  }

}

public class vertexWeight {
  public int v;
  public int w;

  public vertexWeight (int vertexNum, int wum) {
    v = vertexNum;
    w = wum;
  }
} 
```

假设我有一个`EdgeI`包含数字对的对象列表。假设我还有一个`VertexI`包含空列表和字符串的对象列表。我想将以下内容添加到空列表中：

假设我将此作为我的 EdgeI 对象列表

```
(1,2), (1,2) (1,2), (1,3), (1,3), (1,4) 
```

对于`VertexI`列表中的第一个对象，我想添加以下列表

```
(2,3) (3,2) 
```

到顶点对象。基本上我想取“to”整数和“to”整数重复的次数，并创建`vertexWeight`要添加到类列表中的`neig`对象`VertexI`。所以`neig`对于第一个`VertexI`对象将是`vertexWeight`对象`(2,3)`和`(3,2)`。为了实现这一点，我创建了这个到目前为止：

```
 public void createGraph () {
    int oldFrom = -1;
    int oldTo = -1;
    for(int i = 0; i < edges.size(); i++) {
      EdgeI e = edges.get(i);
      int from = e.from;
      int to = e.to;
      VertexI v = vertices.get(from);
      v.neighbors.add(new vertexWeight (to, 1));
      if (from == oldFrom && to == oldTo){}
        //have to add increment the number 1 in the vertex weight object somehow
      else {
        oldFrom = from;
        oldTo = to;
      }
    }
  } 
```

我需要一些技巧或方法来实现这个吗？我的逻辑可能不正确，这就是我认为最需要帮助的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:21:32.633

我/我们必须对您想要做的事情做出一些假设——例如，在您的示例中，“to”值是小而简单的整数，但我们没有迹象表明所有“to”值都属于该类别.

我建议为每个“to”值创建一个 HashMap 条目；索引是与您的“to”条目相对应的整数或浮点（或双精度），并且该值包含一个 int，您可以在每次遇到“to”值时递增该值。

如果这不能解决您的问题，也许您可​​以解释更多您需要的内容。

# iphone - 无法更新 iPhone 应用

> ID：12868519
> 
> 赞同：8
> 
> 时间：2012-10-12T23:41:16.927
> 
> 标签：iphone, ios, xcode

在对我前段时间发布的 iPad 应用程序进行更新后，我收到报告称人们无法在不删除并重新安装的情况下实际更新应用程序。但是，据我所知，更新中的任何内容都不应该导致这种情况。（所有的更新都是让人们通过电子邮件发送 PDF 文档，没什么大不了的。）当人们尝试更新时，他们会被要求输入 iTunes 密码，但在输入密码后，它只是返回更新屏幕而没有任何反应。此外，这似乎只发生在我的应用程序中，相关人员对 App Store 上的其他各种应用程序没有任何问题。有谁知道这可能是什么原因以及我该如何解决？

提前致谢！

（另外，如果重要的话，该应用程序是定制的 B2B 应用程序，普通大众无法购买。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:43:46.060

我正在删除我的答案文本，因为它是如此不准确，令人尴尬。我将“B2B”误认为“企业”并据此回答。为了弥补它，我会更多地研究这个问题，如果我发现任何东西，我会相应地编辑这个答案。

* * *

编辑：

好的，我明白你为什么在 SO 上悬赏这个问题；在任何地方都没有关于此类问题的任何数据。坦率地说，一般来说，关于 B2B 的可用信息并不多。无论如何，我会发布我发现的内容，以防它对您有任何帮助。

我在那里找到了 Maggie 问题背后的详细原因。 [每次编辑和更新应用信息](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html)：

> 更新保持相同的 Apple ID 和捆绑 ID，这意味着它们与您的第一个版本相关联并且对您的客户免费

此外，[显然](https://stackoverflow.com/a/2805948/700471)，“如果您想为其发布更新，您无法更改已发布应用的 CFBundleIdentifier，App Store 会在您上传时自动拒绝它。” 这是我可以保证的，在普通应用程序中体验过这一点。我确实知道，对于 B2B 应用程序，您必须将其提交给 Apple 进行审核，但我无法从我找到的文档中判断您是否需要将其实际提交给 App Store，因此它可能不会通过各种检查正常应用程序是否通过，所以这可能是您的问题。

除此之外，根据[VPP 指南，如果您的客户正在使用](http://images.apple.com/business/docs/vpp_business_guide.pdf)[Apple Configurator](https://itunes.apple.com/us/app/apple-configurator/id434433123?mt=12&ls=1)在设备上安装应用程序（根据应用程序商店的评论，现在已损坏），则还必须使用 Configurator 进行更新。你还没有说 Configurator 参与其中，但我确实发现了这个花絮。

> • 使用 Apple Configurator 在新设备或受监督设备上安装应用程序。Mac 上的 Apple Configurator 可以轻松地批量配置和部署集中控制的设备。通过批量购买计划获得的兑换代码电子表格可以由 Apple Configurator 导入，跟踪每台设备上安装的应用程序数量。要使用 Apple Configurator 更新已部署的应用程序，您必须重新连接到安装应用程序的同一台 Mac。在 itunes.apple.com/us/app/apple-configurator 了解更多信息

无论如何，祝你好运。希望我能提供更多帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:19:58.363

你所描述的（假设它是准确的）肯定是苹果方面的一个错误。如果用户试图更新应用程序并且更新没有得到处理，那么苹果需要以某种方式解决这个错误。作为开发人员，您所做的任何事情都不应该导致这种情况发生。我建议联系 Apple 并可能提交错误报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:58:50.410

似乎苹果希望您在最新版本中开发 Iphone 应用程序。有时，当您尝试更新应用程序时，这会导致版本之间的问题（不同版本的 Itunes、OSX、IOS 等）。

尝试在最新版本的 xcode 中发布应用程序。

这在 iphone 开发测试中经常发生。

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:05:16.657

更新应用程序时，iOS 会查找 bundleId，如果有另一个应用程序具有相同的 bundleId，它会更新版本号最高的应用程序。可能版本号设置不正确，或者人们有问题，因为其他应用程序（来自 AppStore 或其他 B2B 应用程序）具有相同的 bundleID 但版本号更高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T21:18:24.997

到目前为止，我还不是 iPhone 专家，但似乎相关的东西可能已在[iOS 6.0.1](http://support.apple.com/kb/DL1606)中修复。

> 修复了阻止 iPhone 5 以无线方式无线安装软件更新的错误

# wpf - WPF 3D 教程和 Blend 示例

> ID：12868528
> 
> 赞同：3
> 
> 时间：2012-10-12T23:42:18.140
> 
> 标签：wpf, animation, 3d, expression-blend

我正在尝试创建 3D 骰子控件。

我很难在 WPF 3D 上找到好的教程或源代码，最好是 Blend 的 3D 动画。

此外，是否有任何已知工具可用于创建具有相应触发器和动画的 3D 模板，我可以使用这些工具为我的应用程序创建可点击的交互式骰子。

虽然这个问题很笼统，但我仍然认为它是合适的，因为关于这个特定主题的材料似乎很难获得。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:15:03.763

[不久前我在这里](http://www.codeproject.com/kb/wpf/3d-bookwriter.aspx)找到了一个很好的例子而且，你可能想看看[helix 工具包](http://helixtoolkit.codeplex.com)它独立于 WPF 工作

# python - 如何在 python 中使用 random.randint 更新变量？

> ID：12868536
> 
> 赞同：1
> 
> 时间：2012-10-12T23:44:03.963
> 
> 标签：python, global-variables, genetic

我有一些 GA 代码，开头是这样的

```
import random

#
# Global variables
# Setup optimal string and GA input variables.

POP_SIZE    = random.randint(100,200) 

# random code that doesn't really matter...

# Simulate all of the generations.
  for generation in xrange(GENERATIONS):
    print "Generation %s... Random sample: '%s'" % (generation, population[0])
    print POP_SIZE 
    weighted_population = [] 
```

重要的部分是`print POP_SIZE`。

它打印出它需要的东西，然后`POP_SIZE`保持不变，但只有当我退出程序并重新启动它时才会随机化。

我希望它在我一开始设置的参数之间有所不同，这是

```
POP_SIZE    = random.randint(100,200) 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:51:04.557

Rather than `print POP_SIZE`, you could `print POP_SIZE()` where:

```
def POP_SIZE():
    return random.randint(100,200) 
```

Each time you call `POP_SIZE()` it will return a new random integer.

```
for generation in xrange(GENERATIONS):
    ...
    print POP_SIZE()
    ... 
```

# maven - Netbeans：pom 类型的 Maven 依赖项

> ID：12868537
> 
> 赞同：14
> 
> 时间：2012-10-12T23:44:06.723
> 
> 标签：maven, netbeans, dependencies, pom.xml

我花了很多时间，我的头已经爆炸了，所以我会非常感谢任何帮助。

我正在将 Netbeans Platform 应用程序从 ant 迁移到 maven，因此我将版本控制存储库中的所有 jar 更改为 maven 依赖项。我在主 maven 存储库中找到了所需的工件，我在 Netbeans 的帮助下将它添加为依赖项，但它是*POM*类型并且被放置在`Non-classpath Dependencies`我不知道如何使用它，因为它没有添加到类路径等...</p>

有人可以解释这些*POM*依赖项是什么以及如何使用它们吗？

先感谢您！！

## 编辑

这是依赖定义`pom.xml`

```
<dependency>
    <groupId>com.kitfox.svg</groupId>
    <artifactId>svg-salamander</artifactId>
    <version>1.0</version>
    <type>pom</type>
</dependency> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T14:19:09.983

添加 pom 依赖只会拉下传递依赖，即在 pom 中定义为依赖的 jar 依赖。由于显而易见的原因，pom 没有被添加到类路径中，但是可以从 pom 访问的传递依赖项将被添加到类路径中。

理想情况下，您需要做的是具有`jar`默认依赖类型为的依赖项`jar`，您可以简单地定义依赖项，而无需在依赖项部分中添加任何`type`元素。

如果你在 Maven Cental 中找到了你需要的 jar 文件，那么你只需要在 dependencies 部分中为每一个提供 groupId artifactId 和 version。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T19:49:48.247

就我个人而言，我想不出任何需要添加`pom`类型依赖的情况。我通常`pom`对项目中的父模块使用打包（指定常见的项目配置，如插件版本、常见的依赖项，`log4j`例如存储库、属性等）和实用程序包模块（组装项目并执行其他一些必要操作的模块） ）。

从我的经验来看（我做过几次），在将项目从 ant 迁移到 maven 时，您应该将项目曾经依赖的所有 jar 文件转换为 maven 依赖项（`groupId:artifactId:version`）。很可能所有这些依赖项都不会有任何`<type>`（例如罐子）。

# directx - 如何在 C++ 中使用 DrawLine（DirectX 图形）

> ID：12868543
> 
> 赞同：1
> 
> 时间：2012-10-12T23:44:27.403
> 
> 标签：directx, kinect, direct2d

```
// Draw a grid background.
        int width = static_cast<int>(rtSize.width);
        int height = static_cast<int>(rtSize.height);

        for (int x = 0; x < width; x += 10)
        {
            m_pRenderTarget->DrawLine(
                D2D1::Point2F(static_cast<FLOAT>(x), 0.0f),
                D2D1::Point2F(static_cast<FLOAT>(x), rtSize.height),
                m_pLightSlateGrayBrush,
                0.5f
                );
        } 
```

这是文档中的示例。我已经包含了“D2d1.h”，我只是不知道如何创建一个“m_pRenderTarget”。我正在写一个 Kinect 项目，我想在图像上画一条线。我真的很新，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:20:45.247

你看到这个页面了吗？

[创建一个 ID2D1HwndRenderTarget](http://msdn.microsoft.com/en-us/library/windows/desktop/dd535473%28v=vs.85%29.aspx#step_3__create_an_id2d1hwndrendertarget)

快速入门教程包含有关如何使用 Direct2D 的详细步骤。

您也可以下载 Windows SDK，示例包含 Direct2D 演示，其中包含如何创建 Direct2D 渲染目标的完整步骤

我写了一个画矩形的程序，稍加改动，就可以画一条线，供大家参考

```
#include <windows.h>
#include <D2D1.h>

#define SAFE_RELEASE(P) if(P){P->Release() ; P = NULL ;}

ID2D1Factory*           g_pD2DFactory   = NULL; // Direct2D factory
ID2D1HwndRenderTarget*  g_pRenderTarget = NULL; // Render target
ID2D1SolidColorBrush*   g_pBlackBrush   = NULL; // A black brush, reflect the line color

VOID CreateD2DResource(HWND hWnd)
{
    if (!g_pRenderTarget)
    {
        HRESULT hr ;

        hr = D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &g_pD2DFactory) ;
        if (FAILED(hr))
        {
            MessageBox(hWnd, "Create D2D factory failed!", "Error", 0) ;
            return ;
        }

        // Obtain the size of the drawing area
        RECT rc ;
        GetClientRect(hWnd, &rc) ;

        // Create a Direct2D render target
        hr = g_pD2DFactory->CreateHwndRenderTarget(
            D2D1::RenderTargetProperties(),
            D2D1::HwndRenderTargetProperties(
            hWnd, 
            D2D1::SizeU(rc.right - rc.left,rc.bottom - rc.top)
            ), 
            &g_pRenderTarget
            ) ;
        if (FAILED(hr))
        {
            MessageBox(hWnd, "Create render target failed!", "Error", 0) ;
            return ;
        }

        // Create a brush
        hr = g_pRenderTarget->CreateSolidColorBrush(
            D2D1::ColorF(D2D1::ColorF::Black),
            &g_pBlackBrush
            ) ;
        if (FAILED(hr))
        {
            MessageBox(hWnd, "Create brush failed!", "Error", 0) ;
            return ;
        }
    }
}

VOID DrawLine(HWND hwnd)
{
    CreateD2DResource(hwnd) ;

    g_pRenderTarget->BeginDraw() ;

    // Clear background color to White
    g_pRenderTarget->Clear(D2D1::ColorF(D2D1::ColorF::White));

    // Draw Rectangle
    g_pRenderTarget->DrawLine(
        D2D1::Point2F(100.0f, 100.0f),
        D2D1::Point2F(500.0f, 500.0f),
        g_pBlackBrush
        );

    HRESULT hr = g_pRenderTarget->EndDraw() ;
    if (FAILED(hr))
    {
        MessageBox(NULL, "Draw failed!", "Error", 0) ;
        return ;
    }
}

VOID Cleanup()
{
    SAFE_RELEASE(g_pRenderTarget) ;
    SAFE_RELEASE(g_pBlackBrush) ;
    SAFE_RELEASE(g_pD2DFactory) ;
}

LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)   
{
    switch (message)    
    {
    case   WM_PAINT:
        DrawLine(hwnd) ;
        return 0 ;

    case WM_KEYDOWN: 
        { 
            switch( wParam ) 
            { 
            case VK_ESCAPE: 
                SendMessage( hwnd, WM_CLOSE, 0, 0 ); 
                break ; 
            default: 
                break ; 
            } 
        } 
        break ; 

    case WM_DESTROY: 
        Cleanup(); 
        PostQuitMessage( 0 ); 
        return 0; 
    }

    return DefWindowProc (hwnd, message, wParam, lParam) ;
}

int WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, int iCmdShow )
{

    WNDCLASSEX winClass ;

    winClass.lpszClassName = "Direct2D";
    winClass.cbSize        = sizeof(WNDCLASSEX);
    winClass.style         = CS_HREDRAW | CS_VREDRAW;
    winClass.lpfnWndProc   = WndProc;
    winClass.hInstance     = hInstance;
    winClass.hIcon         = NULL ;
    winClass.hIconSm       = NULL ;
    winClass.hCursor       = LoadCursor(NULL, IDC_ARROW);
    winClass.hbrBackground = NULL ;
    winClass.lpszMenuName  = NULL;
    winClass.cbClsExtra    = 0;
    winClass.cbWndExtra    = 0;

    if (!RegisterClassEx (&winClass))   
    {
        MessageBox ( NULL, TEXT( "This program requires Windows NT!" ), "error", MB_ICONERROR) ;
        return 0 ;  
    }   

    HWND hwnd = CreateWindowEx(NULL,  
        "Direct2D",                 // window class name
        "Draw Rectangle",           // window caption
        WS_OVERLAPPEDWINDOW,        // window style
        CW_USEDEFAULT,              // initial x position
        CW_USEDEFAULT,              // initial y position
        600,                        // initial x size
        600,                        // initial y size
        NULL,                       // parent window handle
        NULL,                       // window menu handle
        hInstance,                  // program instance handle
        NULL) ;                     // creation parameters

        ShowWindow (hwnd, iCmdShow) ;
        UpdateWindow (hwnd) ;

        MSG    msg ;  
        ZeroMemory(&msg, sizeof(msg)) ;

        while (GetMessage (&msg, NULL, 0, 0))  
        {
            TranslateMessage (&msg) ;
            DispatchMessage (&msg) ;
        }

        return msg.wParam ;
} 
```

# xslt - 解析单个节点以获取值的出现次数

> ID：12868545
> 
> 赞同：3
> 
> 时间：2012-10-12T23:44:42.160
> 
> 标签：xslt

我有一个 XML 元素，其值类似于以下内容。

```
<?xml version='1.0' encoding='UTF-8'?>
<Report_Data>
   <Report_Entry>
     <Address>1234 Address Line 1&amp;#xa;Pleasanton, CA 94588&amp;#xa;United States of America</Address>
</Report_Entry>
<Report_Entry>
     <Address>1234 Address Line 1&amp;#xa;5678 Address Line 2&amp;#xa;Pleasanton, CA 94588&amp;#xa;United States of America</Address>
</Report_Entry>
</Report_Data> 
```

我正在尝试计算以下值的出现次数。

```
<xsl:variable name="String1" select="'&amp;#xa;'"/> 
```

我希望在我的输出中创建一个新变量，第一条记录为 2，第二条记录为 3。

请注意，我将从 For-Each Report_Entry 循环运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:13:58.253

您忘了提及 XSLT 版本。

如果您使用的是 XSLT 2.0，最简单的方法是使用 tokenize() 函数并减去一个，就像这样......

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xsl:output method="text"/>

<xsl:variable name="String1" select="'&amp;#xa;'"/>
<xsl:template match="/*">
  <xsl:for-each select="Report_Entry/Address">There are <xsl:value-of select="count(tokenize(concat(' ',.,' '),$String1)) - 1" /> occurrences.
</xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

...为示例输入提供此输出...

```
There are 2 occurrences.
There are 3 occurrences. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:06:34.233

您正在寻找的模板是**GetNoOfOccurance**

```
<xsl:template name="GetNoOfOccurance">
    <xsl:param name="String"/>
    <xsl:param name="SubString"/>
    <xsl:param name="Counter" select="0"/>
    <xsl:variable name="sa" select="substring-after($String, $SubString)"/>
    <xsl:choose>
        <xsl:when test="$sa != '' or contains($String, $SubString)">
            <xsl:call-template name="GetNoOfOccurance">
                <xsl:with-param name="String" select="$sa"/>
                <xsl:with-param name="SubString" select="$SubString"/>
                <xsl:with-param name="Counter" select="$Counter + 1"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$Counter"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

以上述方式调用模板：-

```
<xsl:variable name="searchStr" select="'&amp;#xa;'"/>
<xsl:call-template name="GetNoOfOccurance">
    <xsl:with-param name="String" select="text()"/>
    <xsl:with-param name="SubString" select="$searchStr"/>
</xsl:call-template> 
```

## XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:variable name="searchStr" select="'&amp;#xa;'"/>
        <xsl:for-each select="//Address">
            <xsl:call-template name="GetNoOfOccurance">
                <xsl:with-param name="String" select="text()"/>
                <xsl:with-param name="SubString" select="$searchStr"/>
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="GetNoOfOccurance">
        <xsl:param name="String"/>
        <xsl:param name="SubString"/>
        <xsl:param name="Counter" select="0"/>
        <xsl:variable name="sa" select="substring-after($String, $SubString)"/>
        <xsl:choose>
            <xsl:when test="$sa != '' or contains($String, $SubString)">
                <xsl:call-template name="GetNoOfOccurance">
                    <xsl:with-param name="String" select="$sa"/>
                    <xsl:with-param name="SubString" select="$SubString"/>
                    <xsl:with-param name="Counter" select="$Counter + 1"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$Counter"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

*模板**GetNoOfOccurance**取自 @Tomalak[答案](https://stackoverflow.com/a/1459647/500725)*

# arrays - Visual Basic 数组 case 语句

> ID：12868546
> 
> 赞同：2
> 
> 时间：2012-10-12T23:44:42.590
> 
> 标签：arrays, vb.net, vba, case

我是 Visual Basic 的新手，一直在使用 vb.net 创建基于控制台/文本的游戏。我想让我的游戏更“聪明”一点。我必须这样做的想法是创建一个yes 的同义词数组和no 的同义词数组，以及over words 的类似数组。我打算使用带有数组的 case 语句来确定用户输入的天气是是或否的同义词。到目前为止我没有运气，我想知道这里是否有人知道如何做到这一点，或者我是否在找错树。也许我有不同的方法来解决这个问题？

我的选择尝试：

```
Select Case userInput
    Case yes(0) To yes(34)
        Console.WriteLine("you said something like yes, you said {0}", userInput)

End Select 
```

我的数组的开头：（到目前为止有 34 个同义词）

```
Dim yes(0 To 34) As String

yes(0) = "yes"
yes(1) = "ok"
yes(2) = "yep"
yes(3) = "yeah" 
```

如果有人可以帮助我，将不胜感激:) 非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:27:13.970

我会创建一个翻译词典

```
Dim translations As New Dictionary(Of String, String)

translations.Add("yes", "yes")
translations.Add("ok", "yes")
translations.Add("yep", "yes")
translations.Add("yeah", "yes")

translations.Add("no", "no")
translations.Add("nope", "no") 
```

使用这些定义，您可以非常轻松地获得答案的标准版本

```
Dim userInput = "yeah"
Dim response As String = Nothing

translations.TryGetValue(userInput, response)
Select Case response
    Case "yes"
        Console.WriteLine("ok")
    Case "no"
        Console.WriteLine("cancel")
    Case Else
        Console.WriteLine("rubbish!")
End Select 
```

字典具有最快的查找时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T00:28:04.637

您不必`Select Case`为此目的使用 a。一个简单`List(Of T).Contains`的就可以了。然后你可以继续把它放在一个函数中，这样你就可以在你的应用程序中多次调用它。

示例代码：

```
Public Enum Answer
    Yes
    No
    Other
End Enum

Public Function GetAnswer(answer As String) As Answer
    Static yesAnswers = New List(Of String)({"yes", "yeah", "yep", "aye"})
    Static noAnswers = New List(Of String)({"no", "nope", "nay"})

    If yesAnswers.Contains(answer.ToLower()) Then
        Return Answer.Yes
    ElseIf noAnswers.Contains(answer.ToLower()) Then
        Return Answer.No
    Else
        Return Answer.Cancel
    End If
End Function 
```

# java - 如何使用 Java Mail API 验证电子邮件和密码？

> ID：12868549
> 
> 赞同：1
> 
> 时间：2012-10-12T23:45:08.353
> 
> 标签：java, api, email, passwords

我正在使用 Java 邮件 API：

```
PasswordAuthentication valid = new PasswordAuthentication(txtEmail.getText(), 
                                                         txtPassword.getText());

if (valid != null) {
    lblInvalid.setText("Correct information!");
} else {
    lblInvalid.setText("Invalid username or password!");
} 
```

我想要它做什么，我希望用户使用他们的 gmail 用户名和密码登录。我想检查该电子邮件用户名和密码是否是真正的 gmail 登录信息。如何检查输入的电子邮件和密码是否是用户的 gmail 帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:56:30.090

在 Java 中，doing`new Anything()`永远不会返回 null。

此外，这个类似乎只是一个占位符数据结构，供 JDK 的其他部分使用。它本质上并不进行验证。

验证电子邮件地址通常使用正则表达式完成，并且保持简单。然后，如果这对您很重要，您应该向用户发送确认消息以验证他们的电子邮件地址。

也可以使用正则表达式验证密码是否正确。

**更新**

更仔细地查看您尝试发出的错误消息，您似乎想自己处理身份验证。有很多方法可以做到这一点，但一个非常简单的纯原型解决方案类似于：

```
// create a static mapping of user/passwords:
private static Map<String, String> logins = new HashMap<String, String>(); 
```

然后在您的处理程序中：

```
if (txtPassword.getText().equals(logins.get(txtEmail.getText()))) {
    lblInvalid.setText("Correct information!");
} else {
    lblInvalid.setText("Invalid username or password!");
} 
```

对于您将在生产中使用的东西，我强烈推荐[Spring Security](http://static.springsource.org/spring-security/site/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:30:22.890

要验证电子邮件地址，您可以参考此链接

[http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/)

验证密码：您只需要从某些数据库或其他安全框架中检索存储的用户密码，并根据用户所做的输入进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T00:06:33.557

这是一个相当大的话题。

身份验证、授权和验证是三个不同的东西（但非常相关）。

如果您是初学者并且您只是尝试使用硬编码凭据进行一些模拟身份验证，您可以通过以下方式改进您的代码：

```
public class Authenticator {

public boolean authenticateWithCredentials(String email, String password) {

    boolean areValidCredentials = false;

    //Validate credentials here with database or hardcoded
    if(email.equals("my_email@emailprovider.com") && password.equals("mypassword")) {
        areValidCredentials = true;
    }

    return areValidCredentials;
} 
```

}

如果你打算只使用这个类的一个实例，你可以使用单例模式：

```
public class Authenticator {

//Singleton pattern
private static Authenticator instance;

public static Authenticator getInstance() {

    if(instance == null) {
        instance = new Authenticator();
    }

    return instance;
}

private Authenticator() {
    //Block creation of Authenticator instances
}

public boolean authenticateWithCredentials(String email, String password) {

    boolean areValidCredentials = false;

    //Validate credentials here with database or hardcoded
    if(email.equals("my_email@emailprovider.com") && password.equals("mypassword")) {
        areValidCredentials = true;
    }

    return areValidCredentials;
} 
```

}

# php - 如何垂直扩展表单域？

> ID：12868551
> 
> 赞同：-1
> 
> 时间：2012-10-12T23:45:48.110
> 
> 标签：php, html

我需要垂直扩展表单域。

我要扩展的表单字段是“评论”字段。

目前它当前水平在一排。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:50:21.740

It depends upon the type of form field. If you want to extend the height, use a `<textarea>` for comments as it's height and width are configurable:

```
<textarea name="comments" cols="30" rows="10"></textarea> 
```

Then play with the `cols` and `rows` values. You can also use css to define it's display properties.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:47:51.853

I don't know whether I understand you right, but you can put the form fields into an list like

```
<ul>
    <li><input...></li>
    ...
</ul> 
```

If you want to format a input or textarea field you can use css, or for textareas the html attribute cols and rows.

# symfony - Symfony2：如何加载考虑到其映射实体的用户？

> ID：12868554
> 
> 赞同：4
> 
> 时间：2012-10-12T23:46:00.713
> 
> 标签：symfony, fosuserbundle

尽管我将 Symfony 2.1 与 FOSUserBundle 一起使用并且一切正常，但我不知道如何解决问题。

基本上，我想知道是否有一种方法可以从数据库中查找（加载或获取）用户，同时考虑到与另一个实体的关系。

这是这种情况：

我已经让用户也可以通过社交网络（谷歌、Facebook、LinkedIn 等）登录我的网站。我还要求他们离线访问，这样我就可以随时访问他们的社交帐户。

由于每个用户都可以拥有任意数量的连接（或者可能没有，因为它们是可选的），因此我决定不将此信息保存在用户表中。我创建了一个名为“SocialConnection”的抽象实体，它由真实实体（Google、Facebook 等）扩展。在这个实体中，我存储了用户通过这些网络（user_id、social_id、access_token 等）登录我的网站时获得的用户信息，因此在我的 User 类中，我映射了一个抽象“SocialEngine”的集合，它允许我将所有网络连接在一起。

为了以后能加推特、雅虎等其他网络，我觉得应该是这样。

所以，现在的问题是，当用户通过任何这些社交网络登录我的网站时，我需要知道他的社交 ID 从数据库中加载他，但我不知道该怎么做。

我已经看到 UserManager 的 $this->findUserBy 方法找到了有关属性的用户，但我认为情况并非如此。

我应该怎么做才能找到一个好的解决方案？

提前致谢。

最好的问候，伊兹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:22:56.033

要实现这一点，您需要更深入地了解教义的 api。基础存储库方法（find、findBy 等）还不够。

您需要使用[学说的 DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)。它看起来像 SQL，但您基于映射元数据而不是直接基于数据库模式进行查询。

如果您的用户`OneToMany` `$socialAccounts`对`SocialEngine`. 您将能够执行以下操作：

```
SELECT u
FROM Bundle:User AS u
JOIN u.socialAccounts AS sa
WHERE sa.id = 34 
```

但是您只能查询 SocialEngine 的属性，而不是子类之一……（即：您不能查询 SocialFacebookEngine 的`facebookId`）。

您要么必须将所有 twitter/facebook/etc 数据放在基`SocialEngine`类中，放在`User`类中。或者您可以为每个“社交引擎”创建一个实体，并在每个引擎和用户之间创建一个 OneToOne 关系关系。

# python - 如何知道 PyMedia 模块是否忙

> ID：12868559
> 
> 赞同：0
> 
> 时间：2012-10-12T23:46:42.650
> 
> 标签：python, tkinter

所以我正在用 PyMedia 模块和 Tkinter 模块制作一个音乐播放器。我一直在谷歌搜索“检查”PyMedia.startPlayback 是否忙于播放歌曲的答案，但到目前为止我一直没有成功。我的目标是在当前歌曲停止播放时能够播放队列中的下一首歌曲。

例如：

```
def Listen(songs):
        global player
        while True:
            songs+=1
            def play(number):
                player.startPlayback(number)
            def pause():
                 player.pausePlayback()
            #init pymedia player
            player= pymedia.Player()
            player.start()
            play(songs)
            #wait till song is done playing...
            #After finished continue on to the next one
            play(songs) 
```

这不是确切的代码，但它是它的要点。我在 Windows 7 上有 python 2.7。感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:52:43.973

[http://pymedia.org/docs/pymedia.player.html](http://pymedia.org/docs/pymedia.player.html)

文档列出`isPlaying`了播放器的功能。他们甚至在 while 循环的示例中使用它。

# objective-c - 如何防止在框架中标记为“项目”的标头被公开复制？

> ID：12868560
> 
> 赞同：3
> 
> 时间：2012-10-12T23:46:56.257
> 
> 标签：objective-c, xcode, frameworks, header

我正在构建一个框架来将我的应用程序的功能分发给第三方。当我构建框架时，我只希望我的一些头文件在框架中公开显示。

据我了解，这样做的方法是在 Xcode 中的 Copy Headers 构建阶段将这些标头标记为“项目”，我已经这样做了。但是，无论如何，标题都被复制了。

我尝试清理我的项目并重建它。那并没有解决问题。我检查了 headers 文件夹并注意到只有我标记为 Public 的 headers 得到了更新（查看 Last Modified 时间戳），所以我认为可能剩下的那些只是以前构建的遗物。所以我删除了这些文件，再次清理，并再次构建项目。

那也没有用。现在我有所有文件的新标题（包括标记为“项目”的文件）并且我没有想法。有谁知道当标有“项目”时可能导致头文件公开复制的原因是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:47:39.697

我有同样的问题，然后我发现了这个：

[https://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)

使用它之后，我只得到了那些我想公开的标题，而其他所有的标题都是私有的。

不能推荐它。

# c - 如何设置字符串以执行功能或命令

> ID：12868562
> 
> 赞同：0
> 
> 时间：2012-10-12T23:47:10.960
> 
> 标签：c

我有一个基本问题要问你，因为它让我发疯。如何将我的函数写入特定的字符串？就像，如果我正在创建一个 while 循环并希望程序结束，我将如何编写它以便当我在请求输入时键入“end”时程序本身结束？

编辑：好的，所以我很容易弄清楚如何通过键入“end”来结束我的函数，但现在由于某种原因，取决于我写了多少句子，我的程序不断重复自己。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void){
int i;
char buf[10];
printf("Command? ");
scanf("%s", buf);

while(buf != "end")
{
    if(strcmp(buf, "end")== 0){
        break;
    }

    switch( buf[i] ){
    //Where the cases will inevitably go
    default:
    puts("I'm sorry, but that's not a command.\n");
    break;
    }
    printf("Command? ");
    scanf("%s", buf);
}
puts("End of Program.");
getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:53:03.777

```
char *myInputString = NULL;
while (1) {
    /* read in myInputString from user input, and test... */
    if (strcmp(myInputString, "foo") == 0)
        break;
}

return EXIT_SUCCESS; 
```

# javascript - How to bind deeper than one level with rivets.js

> ID：12868566
> 
> 赞同：9
> 
> 时间：2012-10-12T23:47:27.713
> 
> 标签：javascript, rivets.js

rivets.js newbie here. I want to bind to an item that will be changing dynamically (store.ActiveItem). I tried the following approach, but although store.ActiveItem is set, store.ActiveItem.(any property) is always undefined. Is there a standard way to bind deeper than one level?

```
<div id="editItemDialog" data-modal="store.ActiveItem < .ActiveItem">
    <a data-on-click="store:ClearActiveItem" href="#">close - works</a>
    <div>
        <div>
        <label>name:</label><input data-value="store.ActiveItem.Name < .ActiveItem"/>
        </div>
        <div>
        <label>price:</label><input data-value="store.ActiveItem.Price < .ActiveItem"/>
        </div>
        <div>
        <label>description:</label><textarea data-value="store.ActiveItem.Description < .ActiveItem"></textarea>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T22:40:35.540

How the binding works is largely determined by the Rivets adapter you are using, although your model could also do the heavy lifting.

## Option 1: Smart Model

If you're using [Backbone.js](http://backbonejs.org), you could take a look at [backbone-deep-model](https://github.com/powmedia/backbone-deep-model), which supports path syntax for nested attributes (Eg. `store.get('ActiveItem.Price')`), though it is still under development. If that doesn't quite meet your needs, there are other *nested model*-type options on the [Backbone plugins and extensions wiki](https://github.com/documentcloud/backbone/wiki/Extensions,-Plugins,-Resources).

## Option 2: Smart Adapter

If that doesn't work for you, you can extend your Rivets adapter to handle path syntax. I've put together a simple example on how to do this at [http://jsfiddle.net/zKHYz/2/](http://jsfiddle.net/zKHYz/2/) with the following naive adapter:

```
rivets.configure({
    adapter: {
        subscribe: function(obj, keypath, callback) { /* Subscribe here */ },
        unsubscribe: function(obj, keypath, callback) { /* Unsubscribe here */ },
        read: function(obj, keypath) {
            var index = keypath.indexOf('.');
            if (index > -1) {
                var pathA = keypath.slice(0, index);
                var pathB = keypath.slice(index + 1);
                return obj[pathA][pathB];
            } else {
                return obj[keypath];
            }
        },
        publish: function(obj, keypath, value) {
            var index = keypath.indexOf('.');
            if (index > -1) {
                var pathA = keypath.slice(0, index);
                var pathB = keypath.slice(index + 1);
                return obj[pathA][pathB] = value;
            } else {
                return obj[keypath] = value;
            }
        }
    }
}); 
```

## Option 3: Dirty Hacks

As of version 0.3.2, Rivets supports [iteration binding](https://github.com/mikeric/rivets#iteration-binding). By creating a Rivets formatter that returns an array, you can "iterate" over your property. Take a look at [http://jsfiddle.net/mhsXG/3/](http://jsfiddle.net/mhsXG/3/) for a working example of this:

```
rivets.formatters.toArray = function(value) {
    return [value];
};

<div data-each-item="store.ActiveItem | toArray < store.ActiveItem"">
    <label>name:</label><input data-value="item.Name < store.ActiveItem"/>
    ...
</div> 
```

I'm not sure if the computed property syntax is required here; you will have to test this with your model to see what works.

## Option 4: Don't bind deeper than one level (Recommended)

The need to bind deeper than one level may be an indication that your design can be improved.

In your example, you have a list of Items in an ItemCollection for a Store. You go about assigning a single Item to the Store's ActiveItem property, setting up events everywhere to try link things together, and then need to be able to bind to the properties of the ActiveItem under the Store, yet have things update whenever the ActiveItem itself changes, etc..

A better way of doing this is by using a view-per-model approach. In your example, you're trying to handle the Store Model, the ItemCollection and the Item Model with a single view. Instead, you could have a parent Store view, a subview for the ItemCollection, and then generate Item views as necessary below that. This way, the views are easier to build and debug, less tightly coupled to your overall Model design, and are more readily reusable throughout your application. In this example, it also simplifies your Model design, as you no longer need the ActiveItem property on the Store to try maintain state; you simply bind the Item View to the selected Item Model, and everything is released with the Item View.

If you're using [Backbone.js](http://backbonejs.org), take a look at [Backbone.View](http://backbonejs.org/#View) as a starting point; there are many examples online, although I'll be the first to admit that things can get somewhat complex, especially when you have nested views. I have heard good things about [Backbone.LayoutManager](https://github.com/tbranyen/backbone.layoutmanager) and how it reduces this complexity, but have not yet had the chance to use it myself.

I've modified your most recent example to use generated Item views at [http://jsfiddle.net/EAvXT/8/](http://jsfiddle.net/EAvXT/8/), and done away with the ActiveItem property accordingly. While I haven't split the Store view from the ItemCollection view, note that I pass their Models into Rivets separately to avoid needing to bind to `store.Items.models`. Again, it is a fairly naive example, and does not handle the full View lifecycle, such as [unbinding Rivets](http://rivetsjs.com/#usage-notes) when the View is removed.

# mobile - 自定义碰撞

> ID：12868569
> 
> 赞同：4
> 
> 时间：2012-10-12T23:47:56.393
> 
> 标签：mobile, lua, coronasdk

我最近被分配使用 Corona SDK 创建一个简单的游戏。游戏的主要支柱是一个简单的事件：用户应该将球放入篮子，我应该能够处理这个事件。

为了更好的理解，放一张图：

![在此处输入图像描述](../Images/c510cbe67bb165c38ccc82b06fe291ce.png)

我成功地为篮子创建了碰撞形状，但是我遇到了这个篮子内部的碰撞问题。我的第一个想法是：

*   创建一个新形状
*   大小和位置以适合这个篮子的“腹部”
*   将其添加到物理世界中，并聆听碰撞。

使用混合绘图，它看起来像这样：

![在此处输入图像描述](../Images/89c2de906f08eed159a7afd3b3513525.png)

但是有一个问题：如果我将这个形状添加到物理中，它不会让球掉进篮子里，它也会把这个形状当作一个固体来处理。

**所以我的问题是**：我怎样才能让这个自定义对象发生碰撞，而不会阻止球通过它？我已经阅读了很多类似问题的论坛帖子，但没有一个得到正确答案。必须有一种优雅的方式来做到这一点。

还有一点注意：**请不要建议手动检查碰撞，用矩形相交**，因为在这种简单的情况下它会起作用，但以后我可能需要改变篮子的形状，然后它就没有用了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T03:33:46.937

Box2D 有一个叫做“传感器”的东西。

您只需将内部碰撞设置为传感器，它就会完全按照您的要求进行操作:)

做就是了：

```
MyInternalCollisionObject.isSensor = true 
```

# watir - Watir-Classic not clicking on element

> ID：12868570
> 
> 赞同：3
> 
> 时间：2012-10-12T23:48:00.043
> 
> 标签：watir, watir-webdriver

```
<span class="titleBar-link">
<a href="javascript:void(0)" data-click-handler="openBYOTView,omnitureClickHandler"     data-omniture-rfrr="ROUNDTRIP">
<span data-icon="roundtrip"></span>See Roundtrip Combinations
</a>
</span> 
```

From the above HTML code, I want to click on element `<span class="titleBar-link">`, for that I used the following code

```
Browser. span(:class => 'titleBar-link').click
```

When I am running this code with IE(Watir-Classic), this step was executed but really it didn’t click on that element. It worked well with Watir-Webdriver.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:32:28.633

尝试点击链接？

```
browser.span(:class => 'titleBar-link').link.click 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T00:48:29.860

你也可以使用

```
browser.link(:xpath => "//span[@class='titleBar-link']/a[0]").click 
```

# html - Ico won't display on tabs

> ID：12868571
> 
> 赞同：3
> 
> 时间：2012-10-12T23:48:06.370
> 
> 标签：html, file, icons, ico

Using converticon.com, I converted my icon png file into an ico file. I placed the following code in my head tags:

```
<link rel="shortcut icon" href="icons/icon.ico"> 
```

I double checked and the file is in the appropriate location. The image has read and write capabilities. I then loaded the page on my browser but I all I get is an empty square box with a dotted border. I'm using XAMPP server. Why isn't the image displaying?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T18:40:44.240

在 MAMP（假设 XAMP 相同/相似）中，您将执行以下操作：

```
- With MAMP running/open, hit the "Stop" button.
- Then go to: File > Edit Template > Apache httpd.conf
- Comment out lines:
    #Alias /favicon.ico "/Applications/MAMP/bin/favicon.ico"
    #Alias /icons/ "/Applications/MAMP/Library/icons/"
- Place your favicon.ico file in your site's root directory
- Start MAMP 
```

你可能可以在这里做各种疯狂的事情。就个人而言，在开发过程中从不担心网站图标。

顺便说一句 - 您不必完全清除浏览器的缓存。只需浏览到 favicon 并刷新它.... localhost:8888/favicon.ico

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T01:57:32.883

您是否尝试在多个浏览器上对此进行测试？不同的浏览器处理网站图标的方式不同。

这里有一些你可以尝试的事情。

**清除缓存**

*   删除收藏夹中链接的所有引用。
*   清除浏览器中的文件缓存。
*   关闭目标浏览器的所有实例。
*   重新打开浏览器并导航到您的网站。

**强制刷新**

*   如果您使用的是 Mozilla Firefox，那么您应该：
*   导航到您的网站
*   导航到您最喜欢的图标的确切位置，例如。www.site.com/favicon.ico。
*   在浏览器窗口中单击鼠标右键，然后选择刷新。

完成此操作后，Firefox 将被迫重新加载图标而不是缓存版本。

**浏览器的默认行为**

指定网站图标的第二种方法依赖于使用预定义的 URI 来识别图像：“/favicon.ico”，它是相对于服务器根目录的。此方法有效，因为某些浏览器已被编程为使用该 URI 查找网站图标，因此我建议将网站图标放在根目录中，看看是否有效。（也将图标重命名为 favicon.ico）。

```
<link rel="shortcut icon"  href="/favicon.ico" type="image/x-icon"/> 
```

**图像格式**

有时，网站图标的格式存在问题。如果您在所有 Web 浏览器中都遇到问题，您可以将 favicon 转换为 gif 或 png 并查看是否可以解决问题。

**强制浏览器更新图标**

您可以通过传递 URL 参数强制浏览器更新您的网站图标。使用 ver 参数，您可以在每次要强制下载新文件时增加版本号。

将此添加到您的标记中。

```
<link rel="shortcut icon"  href="/favicon.ico?ver=2.0" type="image/x-icon"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:53:14.280

只需将 favicon 放在您网站的根目录下，例如“example.com/favicon.ico”（但请确保将其命名为 favicon.ico），然后完全删除上述链接元素。如果不存在，浏览器将默认检查此位置是否有网站图标，即使是 IE。

完成此操作后，请务必在测试时清除缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T23:54:00.507

尝试添加`type`属性。例子：

```
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"> 
```

# javascript - Two different text styles in placeholder

> ID：12868573
> 
> 赞同：4
> 
> 时间：2012-10-12T23:48:23.843
> 
> 标签：javascript, jquery, css, html

Is it possible to have two styles in an input box placeholder?

Here is an example of what I'm looking for: [http://i.imgur.com/uQ3zf.png](http://i.imgur.com/uQ3zf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:13:50.930

选项将是使用具有文本的背景图像，或者使用带有文本的元素覆盖，或者将文本放在输入的后面。

这是一个简单的演示，将文本放在输入后面并将其隐藏在焦点上

[http://jsfiddle.net/GRsQc/1/](http://jsfiddle.net/GRsQc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:55:16.333

一种解决方案是将文本放置在输入字段上，显然它可以设置为您的示例之前的样式，并在选择文本字段时使用 jquery 或 javascript 隐藏文本。如果您想提供一些代码，我可以更具体。

# python - 如何使用正则表达式来引用特定部分？

> ID：12868575
> 
> 赞同：2
> 
> 时间：2012-10-12T23:48:51.133
> 
> 标签：python, regex

我有一个 Python 字符串，其中包含我想使用正则表达式提取的信息。

例子：

```
"The weather is 75 degrees with a humidity of 13%" 
```

我只想拔出“75”和“13”。这是我迄今为止在 Python 中尝试过的。

```
import re

str = "The weather is 75 degrees with a humidity of 13%"
m = re.search("The weather is \d+ degrees with a humidity of \d+%", str)
matched = m.group() 
```

但是，这显然匹配整个字符串，而不仅仅是我想要的部分。如何只提取我想要的数字？我研究了反向引用，但它似乎只适用于正则表达式模式本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:49:48.150

```
m = re.search("The weather is (\d+) degrees with a humidity of (\d+)%", str)
matched = m.groups() 
```

你需要把你想要的东西用括号括起来......

```
>>> s1 = "The weather is 75 degrees with a humidity of 13%"
>>> m = re.search("The weather is (\d+) degrees with a humidity of (\d+)%", s1)
>>> m.groups()
('75', '13') 
```

或者只是用来`findall`从任何字符串中获取数字

```
>>> re.findall("\d+",s1)
['75', '13'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T00:04:13.497

也许您想使用命名组？

```
>>> m = re.search("The weather is (?P<temp>\d+) degrees with a humidity of (?P<humidity>\d+)%", s1)
>>> m.group('temp')
'75'
>>> m.group('humidity')
'13' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T00:21:12.687

当您想从文本中提取类型化数据（例如数字）时，[`parse`](http://pypi.python.org/pypi/parse)这是一个非常有用的库。在许多方面，它与字符串格式相反。它需要一个模式，并且会进行类型转换。

在最简单的情况下，它可以让您避免担心正则表达式组等等。

```
>>> s = "The weather is 75 degrees with a humidity of 13%"
>>> parse("The weather is {} degrees with a humidity of {}%", s)
<Result ('75', '13') {}> 
```

该`Result`对象很容易使用：

```
>>> r = _
>>> r[0]
'75' 
```

我们可以通过指定字段名称和/或类型转换来做得更好。这是我们需要做的所有事情，以使结果为整数：

```
>>> parse("The weather is {:d} degrees with a humidity of {:d}%", s)
<Result (75, 13) {}> 
```

如果我们想使用非索引键，那么添加字段名称：

```
>>> parse("The weather is {temp:d} degrees with a humidity of {humidity:d}%", s)
<Result () {'temp': 75, 'humidity': 13}>
>>> r = _
>>> r['temp']
75 
```

# c++ - Class defined in different translation units

> ID：12868576
> 
> 赞同：0
> 
> 时间：2012-10-12T23:49:13.820
> 
> 标签：c++

As I have understood, a class can be defined in multiple translation units aslong they're identical. With that in mind, consider the following examples:

```
 //1.cpp

class Foo{
 public:
  int i;
};

void FooBar();

void BarFoo(){
  Foo f;
}

int main(){
 FooBar();
 BarFoo();
}

//2.cpp

class Foo{
 public:
  std::string s;
};

void FooBar(){
  Foo f;
} 
```

This compiles and I don't get a crash.

If I do the following changes:

```
//1.cpp
 Foo FooBar();
//2.cpp
 Foo FooBar(){
   Foo f;
   return f;
 } 
```

I get a crash. Why does one result in a crash and the other doesn't. Also, am I not violating ODR in the first example? If I am, why does it compile ok?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:51:24.667

The program is ill-formed for the reason you stated. The compiler is not required a diagnostics, but I don't see a point in discussing reasons for a crash in an ill-formed program.

*Still, let's do it:*

The first example probably doesn't crash because `FooBar`'s behavior doesn't affect the run of `main`. The method is called, it does something, and that's it.

In the second example, you attempt to return a `Foo`. `FooBar` returns the version of `Foo` defined in `2.cpp`. `main` appears in `1.cpp` so it expects the version of `Foo` defined in `1.cpp`, which is a completely different version - different members, sizes. You most likely get a corruption on the destructor. (just a guess)

### EDIT: this does break the one definition rule:

### 3.2 One definition rule [basic.def.odr]

> 6) There can be more than one definition of a class type [...] in a program provided that each definition appears in a different translation unit, and provided the definitions satisfy the following requirements. [...]
> 
> *   each definition of D shall consist of the same sequence of tokens;
> 
> [...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:12:16.183

以下是编译器/链接器的工作方式：

1.  编译器翻译具有提供的标头的 cpp 文件。它生成一个 .obj 文件。在您的情况下， o.bj 文件将引用 data-struct `Foo`。并且不会有任何其他细节。

2.  链接器将 .obj 文件链接在一起。它只比较字符串名称。在您的 obj 文件中，您具有相同的`Foo`. 名称匹配。对于链接器，这是同样的事情。

3.  之后你开始你的程序。它很可能会崩溃。更具体地说，它将显示未定义的行为。它可以进入无限循环，显示奇怪的消息等。

您有责任将 cpp 文件中的相同标题或定义提供为每个 cpp 文件的翻译。现有的软件工具无法为您检查这一点。这就是它的工作原理。

# php - wrapping href around implode variable

> ID：12868579
> 
> 赞同：0
> 
> 时间：2012-10-12T23:49:54.643
> 
> 标签：php, syntax, implode

I have a php implode function to list wordpress custom field keys which works great. The problem is I need to wrap the web urls in an href to make them clickable and can't wrap my head around the function sytnax. The key value is in this format www.site.com, so I had it set up for a single entry like so:

```
<?php if(get_post_meta($post->ID, 'website', true)): ?>
    <strong>Website:</strong> <a href="http://<?php echo get_post_meta($post->ID, 'website', true); ?>" target="_blank"><?php echo get_post_meta($post->ID, 'website', true); ?></a>
<?php endif; ?> 
```

but now we need to be able to hold multiple entries separated by a comma. Here is the code that works, but does not output a clickable url:

```
<?php
if( $website = get_post_meta($post->ID, 'website') ):
    $label = count( $website ) > 1 ? 'Websites' : 'Website';
    ?>
    <strong><?php echo $label; ?>:</strong> <?php echo implode( $website, ', ' ); ?><br />
    <?php
endif;
?> 
```

This is what I've been playing with, which is clearly wrong

```
<?php echo '<a href="http://' . implode('" target="_blank">', $website) . "</a>" . ', '; ?><br /> 
```

Even if it *did* work, it would only output the url, not the text that is linked.

--------------------- EDIT -------------------------

Kai's answer was closest, so I marked it the answer, but it didn't include the label variable. By marrying two of them I came up with this answer which works beautifully

```
<?php
    if( $website = get_post_meta($post->ID, 'website') ):
        $label = count( $website ) > 1 ? 'Websites' : 'Website';
        $links = array_map(
            function($url) {
                 $url = htmlspecialchars($url);
                 return sprintf ('<a href="http://%s">%s</a>', $url, $url);
            },
            $website);
        ?>
        <strong><?php echo $label; ?>:</strong> <?php echo implode(', ', $links); ?><br />
<?php endif ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:57:27.877

```
<?php
if( $website = get_post_meta($post->ID, 'website') ):
    $label = count( $website ) > 1 ? 'Websites' : 'Website';
    ?>
    <strong><?php echo $label; ?>:</strong> 
    <?php foreach($website AS $w): ?>
        <a href="<?php echo $w; ?>" target="_blank"><?php echo $w; ?></a> <br />
    <?php endforeach; ?>      
<?php endif; ?> 
```

这假设您的数组中的每个“网站”都是一个完整的有效 url，包括 http://

我认为这里问题的根源是了解[implode](http://php.net/manual/en/function.implode.php)的作用以及为什么它不能按您想要的方式工作。

**编辑：**

我明白了，您希望它们位于用逗号分隔的内联列表中。你应该使用 Jon 的方法，因为它会比我在这里建议的更优雅地做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:44:18.827

您需要使用装饰器模式。修改下面的示例以满足您的需求

```
interface HtmlElementInterface {
    public function getText();
    public function render();
}

class LinkDecorator implements HtmlElementInterface {

    protected $title;
    protected $text;

    public function __construct($text, $title, $renderNow = false) {
        if (!is_string($text) || empty($text)) {
            throw new InvalidArgumentException("The text of the element must be a non-empty string.");
        }
        $this->text = $text;
        $this->title = $title;
        if ($renderNow) {
            echo $this->render();
        }
    }

    public function getText() {
        return $this->text;
    }

    public function render() {
        // do your magic here
        return "<a href='" . $this->text . "'>" . $this->title . "</a>";
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:56:50.540

您可以以类似于您自己尝试过的方式严重滥用`implode`并使其发挥作用，但这确实不是一个好主意。

您想要的是从 URL 列表移动到锚标记列表，这可以通过以下方式实现[`array_map`](http://php.net/manual/en/function.array-map.php)：

```
if ($website = get_post_meta($post->ID, 'website')) {
    $links = array_map(
        function($url) {
             $url = htmlspecialchars($url);
             return sprintf ('<a href="http://%s">%s</a>', $url, $url);
        },
        $website);

    echo implode(', ', $links);
} 
```

# r - 列出除 R 中的一列之外的所有列

> ID：12868581
> 
> 赞同：68
> 
> 时间：2012-10-12T23:50:02.437
> 
> 标签：r, dataframe

> **可能重复：**
> [删除列 R 数据框](https://stackoverflow.com/questions/4605206/drop-columns-r-data-frame)

假设我有一个包含 c1、c2、c3 列的数据框。

我只想列出 c1 和 c2。我怎么做？

我试过了：

```
head(data[column!="c3"])
head(data)[,2]
head(data[!"c3"]) 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-10-13T00:07:38.657

如果您正在按名称查找负索引（除了[tcash21 的数字索引](https://stackoverflow.com/a/12868602/6409572)），这里有一些我知道的方法，其中一些比其他方法风险更大：

```
mtcars[, -which(names(mtcars) == "carb")]  #only works on a single column
mtcars[, names(mtcars) != "carb"]          #only works on a single column
mtcars[, !names(mtcars) %in% c("carb", "mpg")] 
mtcars[, -match(c("carb", "mpg"), names(mtcars))] 
mtcars2 <- mtcars; mtcars2$hp <- NULL         #lost column (risky)

library(gdata) 
remove.vars(mtcars2, names=c("mpg", "carb"), info=TRUE) 
```

一般我使用：

```
mtcars[, !names(mtcars) %in% c("carb", "mpg")] 
```

因为我觉得它安全有效。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-10-12T23:53:32.153

您可以索引并使用负号删除第 3 列：

```
data[,-3] 
```

或者您可以只列出前 2 列：

```
data[,c("c1", "c2")]
data[,1:2] 
```

不要忘记逗号和引用数据框的工作方式如下：`data[row,column]`

# jsf - 将 inputtext 值作为参数传递

> ID：12868585
> 
> 赞同：4
> 
> 时间：2012-10-12T23:50:23.380
> 
> 标签：jsf, parameter-passing

我想将用户输入作为参数传递到另一个页面。这是我的代码：

```
 <h:form>
     <h:inputText value="#{indexBean.word}"/>
     <h:commandLink value="Ara" action="word.xhtml">
          <f:param value="#{indexBean.word}" name="word"/>
     </h:commandLink>
</h:form> 
```

好吧，这行不通。我可以读取支持 bean 中的 inputtext 值，但无法将其发送到 word.xhtml。

这是我尝试的另一种方法：

```
<h:form>
     <h:inputText binding="#{indexBean.textInput}"/>
     <h:commandLink value="Ara" action="word.xhtml">
          <f:param value="#{indexBean.textInput.value}" name="word"/>
     </h:commandLink>
</h:form> 
```

这也行不通。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:48:28.173

您的具体问题是由于在`<f:param>`请求带有表单的页面时评估的，而不是在提交表单时评估的。所以它保持与初始请求相同的值。

具体的功能需求不是很清楚，但是具体的功能需求基本上可以通过两种方式来解决：

1.  使用纯 HTML。

    ```
    <form action="word.xhtml">
        <input type="text" name="word" />
        <input type="submit" value="Ara" />
    </form> 
    ```

2.  在操作方法中发送重定向。

    ```
    <h:form>
        <h:inputText value="#{bean.word}" />
        <h:commandButton value="Ara" action="#{bean.ara}" />
    </h:form> 
    ```

    和

    ```
    public String ara() {
        return "word.xhtml?faces-redirect=true&word=" + URLEncoder.encode(word, "UTF-8");
    } 
    ```

# java - mouse movement FPS style in Java

> ID：12868592
> 
> 赞同：2
> 
> 时间：2012-10-12T23:51:24.430
> 
> 标签：java, rotation, lwjgl, frame-rate

So I'm trying to implement a simple mouseLook method for exploring a game world in LWJGL. For now I just want it to work on the rotation-Y axis. The movement at first was limited because of the dimensions of the screen stopped the mouse from moving. So i hid the cursor and set the x-position of the mouse to 0 after deltaX is returned. When i wrote it out on paper the calculations seem to be right I think, however when i run it, the rotation keeps snapping back to 0, and creates a jitter effect. How can i solve this?

```
public void rotate() { //rotate the camera

    System.out.println(getGlobalDX() + "   " + MouseInfo.getPointerInfo().getLocation().getX());

    float speed = 0.03f;

    //START OF CODE TO IGNORE
    float ratioX = (float)Display.getWidth() / 360;
    float ratioY = (float)Display.getHeight() / 360;

    float mouseRotX = Mouse.getX() / ratioX;
    float mouseRotY = Mouse.getY() / ratioY;

    //END OF CODE TO IGNORE

    rotY += getGlobalDX() * speed; // add the deltaX of the mouse position X and multiply it by our speed in order to rotate the camera based on the mouse
    lockCursor();
}

public float getGlobalDX() { //returns the difference between the current mouse position and the mouse position during the last frame

    frames += 1; //add 1 to frames variable every frame

    if(frames >= 1.5) { //if 1.5 frames have passed since last method call, run method again. this is to smooth things out since it doesnt work properly every frame

        float mouseX = (float) MouseInfo.getPointerInfo().getLocation().getX(); //get x pos of mouse
        frames = 0; //set frames to zero

        if(lastMouseX != mouseX) { //if the lastmouse position isnt equal to our current mouse position, then continue

            if(mouseX == 963) { //if the mouse position is equal to the centered X position of the screen then continue

                lastMouseX = (float) MouseInfo.getPointerInfo().getLocation().getX(); //set this variable to the new x position
                System.out.println("returning zero"); //debug by checking if this code runs (it does)
                return 0; //return 0 since we dont want to undo the position we returned last frame

            }

            float deltaX = (float) (mouseX - lastMouseX); // difference between current mouse position and last to get the overall change in position
            lastMouseX = (float) MouseInfo.getPointerInfo().getLocation().getX(); //set to new x position
            MouseInfo.getPointerInfo().getLocation().setLocation(MouseInfo.getPointerInfo().getLocation().getX()/2, MouseInfo.getPointerInfo().getLocation().getY()/2); // set mouse position to 0 for infinite movement
            return deltaX; //return the overall change in position and add it to the rotation Y of our camera

        } else { // return 0 if the lastMouse position is equal to the current mouse position, since there was no change in position

            return 0;

        }

    } else { //return 0 since a frame was skipped

        return 0;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:45:43.517

与其自己重置鼠标的位置，不如`Mouse.setGrabbed(true)`在开始使用鼠标之前调用它。

# php - foreach 循环中的array_intersect

> ID：12868593
> 
> 赞同：4
> 
> 时间：2012-10-12T23:51:33.497
> 
> 标签：php, sql, array-intersect

这是我第一次在这里发帖，虽然我在阅读这里的帖子时得到了很多很棒的技巧和技巧。

这是我的目标：

我有 2 个有点相似的表来比较。对于每个表的每一行，我都将我想要的字段放入一个数组中。

我基本上想从一个表中回显出在另一个数组中具有匹配值的任何数组的值。

这是我的代码，也许它会更容易理解。

```
$sql = "SELECT * FROM $i_comp ORDER BY `manufacturer`";
$statement = $objDb->query($sql);
$c_skus = $statement->fetchAll(PDO::FETCH_ASSOC);

$sql = "SELECT `sku_one`,`sku_two`,`qty`,`manufacturer`";
$sql .= "FROM $i_gas ORDER BY `manufacturer`";
$statement = $objDb->query($sql);
$d_skus = $statement->fetchAll(PDO::FETCH_ASSOC);

foreach ( $c_skus as $c_sku ) {
    // i want to see if any values of this array exist in the array created hy
    // the foreach loop below (yes, repeat for each row)
    $c = array($c_sku['sku'],$c_sku['sku_one'],$c_sku['sku_two'],$c_sku['sku_three']);
    foreach ( $d_skus as $d_sku ) {
        $d = array($d_sku['sku_one'],$d_sku['sku_two']);
        $intersect = array_intersect($c, $d);
        echo '<pre>', print_r($intersect), '</pre>';
    }
} 
```

以下是我收到的每次代码迭代的结果：

```
Array
(
)
1 
```

还应该注意的是，我不关心键，只关心值。最终，这些值将在 INSERT 语句中起作用，但目前我只需要得到正确的结果。

无论如何，感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:32:25.137

这通常在 SQL 中完成

如果您想要在另一个表中至少有 1 个匹配 SKU 的整行：

```
$sql = "
SELECT c.* FROM $i_comp AS c 
  JOIN $i_gas AS d 
    ON d.sku_one in (c.sku, c.sku_one, c.sku_two, c.sku_three) 
    OR d.sku_two in (c.sku, c.sku_one, c.sku_two, c.sku_three) 
 ORDER BY c.`manufacturer`";
$statement = $objDb->query($sql);
$c_skus = $statement->fetchAll(PDO::FETCH_ASSOC);
// all rows that have at least 1 matching sku on another table
print_r($c_skus); 
```

如果您只想要 SKU

```
$sql = "
SELECT d.sku_one FROM $i_comp AS c 
  JOIN $i_gas AS d 
    ON d.sku_one in (c.sku, c.sku_one, c.sku_two, c.sku_three) 
UNION
SELECT d.sku_two FROM $i_comp AS c 
  JOIN $i_gas AS d 
    OR d.sku_two in (c.sku, c.sku_one, c.sku_two, c.sku_three) 
 ";
$statement = $objDb->query($sql);
$c_skus = $statement->fetchAll(PDO::FETCH_ASSOC);
// all skus that have at least 1 matching sku on another table
print_r($c_skus); 
```

在 PHP intersect 变体中，您需要单独构建数组，然后使用`array_intersect`

```
$c = array();
foreach ( $c_skus as $c_sku ) {
    $c[] = $c_sku['sku'];
    $c[] = $c_sku['sku_one'];
    $c[] = $c_sku['sku_two'];
    $c[] = $c_sku['sku_three'];
}
$d = array();
foreach ( $d_skus as $d_sku ) {
    $d[] = $d_sku['sku_one'];
    $d[] = $d_sku['sku_two'];
}

$intersect = array_intersect($c, $d);
echo '<pre>', print_r($intersect), '</pre>'; 
```

# objective-c - 发送“NSString *_strong*to _unsafe_unretained id* 类型的参数”更改指针的保留/释放属性

> ID：12868603
> 
> 赞同：0
> 
> 时间：2012-10-12T23:53:36.770
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting

我收到以下错误

`Sending "NSString *_strong*to parameter of type _unsafe_unretained id* "changes retain/release properties of pointer`...

在以下行中： `[theDict getObjects:values andKeys:keys];` 我正在尝试将联系人中的地址添加到我的应用程序中。有人可以向我解释它在抱怨什么吗？我认为这是一个 ARC 问题，可能与手动内存管理有关？但我不确定如何解决它。

```
 - (BOOL)peoplePickerNavigationController:
(ABPeoplePickerNavigationController *)peoplePicker
  shouldContinueAfterSelectingPerson:(ABRecordRef)person
                            property:(ABPropertyID)property
                          identifier:(ABMultiValueIdentifier)identifier

 {
    if (property == kABPersonAddressProperty) {
    ABMultiValueRef multi = ABRecordCopyValue(person, property);

    NSArray *theArray = (__bridge id)ABMultiValueCopyArrayOfAllValues(multi);

    const NSUInteger theIndex = ABMultiValueGetIndexForIdentifier(multi, identifier);

    NSDictionary *theDict = [theArray objectAtIndex:theIndex];

    const NSUInteger theCount = [theDict count];

    NSString *keys[theCount];

    NSString *values[theCount];

    [theDict getObjects:values andKeys:keys]; <<<<<<<<< error here

    NSString *address;
    address = [NSString stringWithFormat:@"%@, %@, %@",
               [theDict objectForKey: (NSString *)kABPersonAddressStreetKey],
               [theDict objectForKey: (NSString *)kABPersonAddressZIPKey],
               [theDict objectForKey: (NSString *)kABPersonAddressCountryKey]];

    _town.text = address;

    [ self dismissModalViewControllerAnimated:YES ];

        return YES;
}
return YES;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:04:25.073

NSDictionary getObjects:andKeys: 的文档显示为：

```
- (void)getObjects:(id __unsafe_unretained [])objects andKeys:(id __unsafe_unretained [])keys 
```

但是您传入的两个值是强 NSString 引用（默认情况下，局部变量和 ivars 是强的。这就是出现 ARC 错误的原因。您的参数与预期的类型不匹配。

改变：

```
NSString *keys[theCount];
NSString *values[theCount]; 
```

到：

```
NSString * __unsafe_unretained keys[theCount];
NSString * __unsafe_unretained values[theCount]; 
```

应该修复编译器问题。

此更改意味着您的数组中的所有对象都不会被安全保留。但是只要 'theDict' 没有超出 'keys' 和 'values' 之前的范围，那么你就可以了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T00:04:14.777

你是正确的，这是一个 ARC 错误，你试图将 NSArrays 分配给 NSStrings 并且你试图创建一个 NSStrings 数组，我不确定它是否会按照你想要的方式工作。

我看不到你以后会在哪里使用它们，但是你会想做的

```
NSArray *keys, *values; 
```

摆脱错误。

# c - 做While还是while？

> ID：12868604
> 
> 赞同：1
> 
> 时间：2012-10-12T23:53:38.733
> 
> 标签：c, loops, while-loop, do-while

我试图让我的程序仅在用户输入 Y 或 y 时运行，但它只运行一次，即使它不是 Y 或 y。输入将是 Y、y、N 或 n

```
printf("Welcome to the Jumble Puzzle Solver!\n\n");
printf("Would you like to enter a jumbled word?\n");
scanf("%s", &answer);

    do{

    printf("What word would you like scored?\n");
    scanf("%s", &letters);

    strcpy(changeletters, letters);

    recursivepermute(letters, changeletters, checkword, k, dictionary ,max, min);

    printf("Would you like to enter a jumbled word?\n");
    scanf("%s", &answer);

    }while (answer == 'Y' || answer == 'y'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:55:07.540

`do { } while()`导致主体总是*至少执行一次*。如果要先检查条件，只需使用 while：

```
// If answer is:
// char answer;

scanf("%c", &answer);
while (answer == 'Y' || answer == 'y')
{
     printf("What word would you like scored?\n");
    // ...

    scanf("%c", &answer);
} 
```

您还需要使用`scanf("%c"`if `answer`is a `char`。这`%s`是扫描一串字符（即：）`char[20]`，并且需要使用类似[`strcmp`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)或类似的方法进行不同的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:59:54.173

如果您希望用户玩一次游戏然后被询问是否再次玩，那么使用`do-while`循环更合适。但是如果你想让用户选择根本不玩游戏，那么使用`while`循环

# intellij-idea - IDEA：如何将复合字符串转换为 StringBuilder？

> ID：12868606
> 
> 赞同：3
> 
> 时间：2012-10-12T23:53:55.640
> 
> 标签：intellij-idea

给定

```
String s = "a" + "b" + "c"; 
```

是否可以将其转换为

```
StringBuilder s = new StringBuilder().append("a").append("b").append("c"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T19:45:47.927

这样做是有目的的，称为*Replace '+' with 'StringBuilder.append()'*。

至少，它是提供给我的——我正在使用 IDEA 12 EAP（早期访问计划）。你可以在这里得到它：[IDEA 12 EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)

当插入符号位于连接序列上时提供意图，而​​不是来自 String 变量声明本身。

当然，转换之后，IDEA 会通知您这样的*append()*序列是愚蠢的，并且会提供简化为常规连接而没有任何缺点。

# sql - 在不使用 DBCC 的情况下确定每个 SQL 表的页数

> ID：12868607
> 
> 赞同：7
> 
> 时间：2012-10-12T23:53:57.030
> 
> 标签：sql, sql-server-2008

我正在尝试压缩数据库中最大的表。我将通过运行 SP_ForEachDB 存储过程来做到这一点。但是我不知道如何查看总页数。我可以使用此查询获取行数...

```
USE DEVELOP04_HiltonUS

GO

SELECT 
    [TableName] = so.name, 
    [RowCount] = MAX(si.rows) 
FROM 
    sysobjects so, 
    sysindexes si 
WHERE 
    so.xtype = 'U' 
    AND 
    si.id = OBJECT_ID(so.name) 
GROUP BY 
    so.name 
ORDER BY 
    2 DESC 
```

返回：

```
 TABLE NAME   ROW COUNT
           PlannedShift  38268660
        BudgetStaffStat  19353104
          BudgetKBIStat  14142631
EmployeeShiftAdjustment  13493745
            Requirement  11020921
     EmployeeShiftError  6857235
      JobclassLaborData  5638692 
```

等等我所有的桌子。

我正在寻找相同的东西，但返回页数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T02:59:44.713

```
SELECT  OBJECT_SCHEMA_NAME(s.object_id) schema_name,
        OBJECT_NAME(s.object_id) table_name,
        SUM(s.used_page_count) used_pages,
        SUM(s.reserved_page_count) reserved_pages
FROM    sys.dm_db_partition_stats s
JOIN    sys.tables t
        ON s.object_id = t.object_id
GROUP BY s.object_id
ORDER BY schema_name,
        table_name; 
```

# r - 位置匹配诡计

> ID：12868611
> 
> 赞同：2
> 
> 时间：2012-10-12T23:54:42.847
> 
> 标签：r, plyr

我编写了这个漂亮的函数来为向量化参数的每个组合应用一个函数：

```
require(plyr)
require(ggplot2)

###eapply accepts a function and and a call to expand grid
###where columns created by expand.grid must correspond to arguments of fun
##each row created by expand.grid will be called by fun independently

###arguments
##fun either a function or a non-empty character string naming the function to be called.
###... vectors, factors, or a list containing thse

###value
###a data frame

##Details
##at this time, elements of ... must be at least partially named to match args of fun
##positional matching does not work

###from the ddply documentation page:
###The most unambiguous behaviour is achieved when fun returns a data frame - in that case pieces will 
###be combined with rbind.fill. If fun returns an atomic vector of fixed length, it will be rbinded 
###together and converted to a data frame. Any other values will result in an error. 

eapply <- function(fun,...){
    if(!is.character(fun)) fun <- as.character(substitute(fun))
    adply(
        expand.grid(...),
        1,
        function(x,fun) do.call(fun,x),
        fun
    )
}

##example use:

m <- function(n,visit.cost){
    if(n*visit.cost < 250){
        c("total.cost"=n*visit.cost)
    }else{
        c("total.cost"=250 + (n*visit.cost-250)*.25)
    }

}

d <- eapply(m, n=1:30, visit.cost=c(40,60,80,100))

ggplot(d,aes(x=n,y=total.cost,color=as.factor(visit.cost),group=visit.cost)) + geom_line() 
```

如何重写函数，使得传递给 expand.grid 的参数不需要命名：

```
d <- eapply(m, 1:30, c(40,60,80,100)) 
```

或者，是否有任何具有类似功能的现有功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:42:20.857

不是最优雅的，但这很有效。最重要的是，它允许您将变量传递给 expand.grid 而不用命名它们。

```
eeyore <- function(fun, ...){
    if(!is.character(fun)) fun <- as.character(substitute(fun))

f <- match.fun(fun)
args <- as.list(substitute(list(...)))[-1]
foo <- expand.grid(llply(args, eval))
foo$F <- apply(foo, 1, function(x) { f(x[[1]], x[[2]])})
foo
}

d <- eeyore(m, 1:30, c(40,60,80,100)) 
```

# wpf - 如何使用在 XAML 中创建的文本框控件并在 C# 代码中使用它？

> ID：12868621
> 
> 赞同：0
> 
> 时间：2012-10-12T23:56:12.693
> 
> 标签：wpf, xaml

我有这段代码来显示/隐藏带有一些文本框的画布，当我按下按钮时，它会将数据从 TextBox1 提交到数据库。问题是我不知道如何在后面的 C# 代码中访问 TextBox1。

例如，这是我的一些 XAML 代码：

```
<ContentControl  Background="{x:Null}" >
  <ContentControl.Template>
     <ControlTemplate>
      <StackPanel Grid.Row="3" Height="500" Name="stack1" Width="280">
        <Canvas x:Name="canvas1"  Height="400" >
              <TextBox Height="23" Name="TextBox1"  Width="70" />

    <Button Content="Submit" Name="submit_button" Click="submit_button_Click" />
        </Canvas>

  <ToggleButton x:Name="toggleshowhide" Content="Show/Hide" IsChecked="True" Height="50" />
      </StackPanel>
     <ControlTemplate.Triggers>
      <Trigger SourceName="toggleshowhide" Property="IsChecked" Value="True">
        <Setter TargetName="canvas1" Property="Visibility" Value="Visible" />
          </Trigger>
      <Trigger SourceName="toggleshowhide" Property="IsChecked" Value="False">
        <Setter TargetName="canvas1" Property="Visibility" Value="Hidden" />
          </Trigger>
    </ControlTemplate.Triggers>
      </ControlTemplate>
  </ContentControl.Template>
     <Button Content="Button" Height="23" Name="submit" Width="74" />
</ContentControl> 
```

这就是我想要实现的目标：

```
private void submit_button_Click(object sender, RoutedEventArgs e)
{
      OleDbCommand cmd = new OleDbCommand("INSERT INTO Table VALUES (this.TextBox1.Text), con); 

      cmd.Connection = con;

         int temp = cmd.ExecuteNonQuery();

        if (temp > 0)
        {
            MessageBox.Show("OK", "Info !");
        }
        else
        {
            MessageBox.Show("Some text !", "Error");
        } 
```

如果有人可以提供帮助，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:07:46.453

在访问从 ControlTemplate 生成的元素时，您需要使用 Template 的 FindName 方法。在这种情况下，为您的 ContnetControl 命名：

```
<ContentControl  Background="{x:Null}" x:Name="MyContentControl"> 
```

在后面的代码中，您可以使用 FindName 方法按名称访问任何生成元素的值：

```
TextBox tb = (TextBox)MyContentControl.Template.FindName( "TextBox1", MyContentControl); 
```

有关详细信息，请参阅：[如何：查找 ControlTemplate 生成的元素](http://msdn.microsoft.com/en-us/library/bb613586.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:11:37.357

给你的 TextBox 一个 x:Name 而不是一个 Name ...甚至 Compile 吗？

xml：

```
<TextBox x:Name="TextBox1" /> 
```

CS ：

```
var s = TextBox1.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T00:00:46.167

```
string v = this.TextBox1.Text;
OleDbCommand cmd = new OleDbCommand('INSERT INTO Table VALUES (' + v + ');'); 
```

顺便说一句，这是一个非常糟糕的主意，请阅读有关 sql 注入的信息...

# ruby-on-rails - ActiveRecord 如何处理关系 CamelCasing

> ID：12868622
> 
> 赞同：2
> 
> 时间：2012-10-12T23:56:13.320
> 
> 标签：ruby-on-rails, activerecord

我有一个关于 Rails 及其关系查询构建器的问题，特别是如何为相关调用转换骆驼大小写。

相关代码

```
class CustomerPlan < ActiveRecord::Base
  attr_accessible :customer_id, :plan_id, :startDate, :user_id

  has_many :planActions
end

class PlanAction < ActiveRecord::Base
  attr_accessible :actionType_id, :customerPlan_id, :notes, :timeSpent

  belongs_to :customerPlan
  belongs_to :actionType
end 
```

getter 和 setter 工作得很好，例如`plan_action.actionType.name`可以正确地从相关模型中提取。但是`customer_plan.planActions.each`返回错误：

```
SQLite3::SQLException: no such column: plan_actions.customer_plan_id: 
  SELECT "plan_actions".* 
    FROM "plan_actions"  
    WHERE "plan_actions"."customer_plan_id" = 1 
```

该列在数据库中定义为`customerPlan_id`，我使用它是不是错了？它适用于所有其他电话，我所有其他关系都很好。甚至 PlanAction -> CustomerPlan。

我浏览了所有[文档](http://guides.rubyonrails.org/active_record_querying.html "文档")，并搜索了我知道的所有其他来源。更改我的列很简单，我只想知道这里发生了什么。

感谢您的时间！

* * *

对此的快速解决方法是显式设置foreign_key。

```
has_many :planActions, :foreign_key => "customerPlan_id", :class_name => "PlanAction" 
```

不过，我认为我在某处遗漏了一些模型命名约定，只是似乎无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:49:03.190

对于 DB 列名，Rails 约定是使用小写字母和由下划线分隔的单词（例如`author_id`、`comments_count`、`updated_at`等）。

我强烈建议您遵守 Rails 约定。这将使您的生活更轻松。要将其更改为 rails 约定，只需创建迁移以将列重命名为适当的样式。

但是，如果您确实想为列名使用自定义样式，rails 会在[has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)`:foreign_key`关系中提供选项来指定预期的外部列名：

```
class CustomerPlan < ActiveRecord::Base
  has_many :plan_actions, :foreign_key => 'customerPlan_id'
end 
```

`alias_attribute`如果您想使用与实际 DB 列名称不同的模型属性名称，也可以使用宏为列名称设置别名。但正如我所提到的，我建议尽可能地遵守 Rails 约定。你以后会感谢我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:20:15.743

Rails 有 3 种基本的命名方案。

一个是常数，它是`ALL_UPPERCASE_SEPARATED_BY_UNDERSCORES`.

一个是用于 Classes 的，它是`AllCamelCaseWithNoUnderscores`.

一种是用于变量和方法名的，一种是`all_lowercase_separated_by_underscores`.

之所以采用这种方式，不仅是为了保持一致性，还因为它使用[这些方法](http://apidock.com/rails/v3.2.8/ActiveSupport/Inflector/camelize)在它们之间自由转换。

因此，要使您发布的代码更符合 Rails-y：

```
class CustomerPlan < ActiveRecord::Base
  attr_accessible :customer_id, :plan_id, :start_date, :user_id

  has_many :plan_actions
end

class PlanAction < ActiveRecord::Base
  attr_accessible :action_type_id, :customer_plan_id, :notes, :time_spent

  belongs_to :customer_plan
  belongs_to :action_type
end 
```

# matlab - Matlab - 绘制两个结构之间的平均值？

> ID：12868632
> 
> 赞同：0
> 
> 时间：2012-10-12T23:57:23.977
> 
> 标签：matlab, plot, average

我是 Matlab 新手，我认为这是一个非常基本的问题..

我有两个数组：

```
 tst

  ans =

          0         0    0.2500    0.2500         0         0         0         0

 prp

    ans =

          0         0         0    0.5333    0.0333    0.0333    0.1667    0.0667 
```

我想在同一个图（作为一条线）上绘制这两者之间的平均值。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:00:30.760

我通常会做类似的事情：

```
# Plot figure
plot(...);

# Calculate the average
avg = mean(tst);

# Add a line to the figure
line(xlim(), [avg avg]); 
```

并重复`prp`。您可以根据[linespec](http://www.mathworks.com/help/matlab/ref/linespec.html)文档对线条进行样式设置。

请注意，您应该在任何会改变 xlimits（ing 和绘制其他内容等）的末尾执行此操作，`hold`因为它取决于`xlim()`.

**编辑**

我可能误解了你的问题。上面的代码将在数组中点的平均值处绘制一条水平线`tst`。

相反，如果您想要一个线图，其点是两个数组的平均值，您需要类似：

```
# Calculate average between arrays
avg = mean([tst;prp]);

# Plot all 3 lines at once
plot([tst;prp;avg]'); 
```

# sql-server - 创建数据库并添加到 Visual Studio 解决方案

> ID：12868636
> 
> 赞同：0
> 
> 时间：2012-10-12T23:57:49.573
> 
> 标签：sql-server, database, visual-studio-2010, entity-framework, ef-model-first

我正在使用 Entity Framework 4 和 Visual Studio 2010 创建一个数据库。

第一步我很好 - 我先做模型，所以我成功创建了模型，现在我的解决方案中有一个有效的 .edmx 文件。

我的目标如下：我想生成数据库并将其添加到解决方案中，以便我可以将解决方案提供给其他人，他们将能够构建并运行它 - 我不希望数据库连接依赖于任何我的本地设置，并且我不希望他们需要重新创建数据库，它会在其中包含一些“种子数据”。这应该是可能的，我看到了类似的解决方案。

我将不胜感激有关如何做到这一点的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:54:28.080

使用 SQL Server Express 并将数据库文件放入 App_Data 目录（用于 Web 应用程序）或将它们复制到其他应用程序的输出中的解决方案项。更改连接字符串以附加文件 - 它应该类似于：

```
AttachDbFileName=|DataDirectory|\YourDB.mdf;Initial Catalog=YourDB;Integrated Security=SSPI 
```

# c# - c# asp.net点击按钮“另存为”，但下载的文件被无意修改

> ID：12868637
> 
> 赞同：0
> 
> 时间：2012-10-12T23:58:05.437
> 
> 标签：c#, asp.net, webforms

我的 C# 代码隐藏中有一个方法可以连接到 SQL 并根据 SQL 数据创建一个 CSV 文件。当用户单击网站上的特定按钮时调用此方法。我正在尝试使用相同的方法在生成 CSV 文件后提示用户“打开”或“另存为”。

我尝试了以下方法：

```
System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
response.AddHeader("Content-Disposition", "attachment; filename=" + "C:\\temp\\report.csv" + ";");           
Response.TransmitFile("C:\\temp\\report.csv"); 
```

确实会提示用户“打开或另存为”。无论哪种情况，CSV 文件中的数据还包含我的 Default.aspx 的整个源代码。我需要对我的代码执行什么操作以防止将额外数据附加到我的 CSV 中？蒂亚...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:03:18.677

您需要先清除响应 -`Response.Clear();`

```
response.Clear();
...
response.AddHeader("Content-Disposition", "attachment; filename=" + "C:\\temp\\report.csv" + ";");           
Response.TransmitFile("C:\\temp\\report.csv"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:03:25.790

您可以致电`response.End()`以阻止您的页面进一步处理。

# java - 是否可以循环使用限制的 HashMap？

> ID：12868640
> 
> 赞同：-1
> 
> 时间：2012-10-12T23:58:43.817
> 
> 标签：java, loops, iterator, hashmap

这是我的问题，因为我正在编写比以前更高级的 Java。所以今天我真的需要你的帮助！砍掉 a 时如何设置限制`HashMap`？我已经尝试了一些代码来限制一个。我的问题是我想要一个来自 HashMap 的 Random 条目，但是当我使用这样的 Random 函数时：

```
Random rand = new Random();
int max = list.size();
int randomNumber = rand.nextInt(max); 
```

问题是有时它会返回“null”。然后我尝试了这个：

```
Iterator it = list.entrySet().iterator();
while (it.hasNext()) {
if(!stop)
    Map.Entry pairs = (Map.Entry)it.next();
    atm = pairs.getValue();
    it.remove();
    stop = true;
} 
```

但这会使我的程序崩溃。那么，有没有更好的方法来为此设置限制？

请附上例子，这是最好的学习方式。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:14:04.097

if list is null then you need to put check on it like

```
int max = null != list ? list.size() : 0; 
```

i hope this is what you looking for

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:58:23.110

如果你想从你的哈希图中随机输入，试试这个单行：

```
Map.Entry<K, V> entry = new ArrayList<Map.Entry<K, V>>(map.entrySet()).get(Math.random() * map.size()); 
```

# php - 如何使用 PHP 删除文件夹中的空格

> ID：12868644
> 
> 赞同：1
> 
> 时间：2012-10-12T23:59:06.870
> 
> 标签：php, directory

给定路径 /books/Aaronovitch, Ben/Rivers of London/9780575097568，我如何使用 PHP 重命名实际文件夹名称以删除空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:54:19.970

您可以尝试以下方法

```
echo renameRecrisive(__DIR__, "xx_x/yyy yyy/zz z/fff"); 
```

输出

```
 /public_html/www/stac/xx_x/yyy_yyy/zz_z 
```

功能

```
/**
 * 
 * @param string $path Current path ending with a slash 
 * @param string $pathname Path you cant to rename
 * @param string $sep Optional Seprator
 */
function renameRecrisive($path, $pathname, $sep = "_") {
    $pathSplit = array_filter(explode("/", $pathname));
    $dir = $path;
    while ( $next = array_shift($pathSplit) ) {
        $current = $dir . "/" . $next;
        if (! is_dir($current)) {
            break;
        }
        if (preg_match('/\s/', $next)) {
            $newName = str_replace(" ", $sep, $next);
            rename($current, $dir . "/" . $newName);
            $dir .= "/" . $newName;
        } else {
            $dir .= "/" . $next;
        }
    }

    return $dir ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:05:17.913

php函数str_replace：

```
$newPath = str_replace(' ', '', $path); 
```

然后使用重命名功能。

```
rename($path, $newPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:22:47.617

这将遍历层次结构的每个级别，如果每个组件包含空格，则重命名它。

```
$patharray = split('/', $path);
$newpatharray = str_replace(' ', '', $patharray);

$oldpath = $patharray[0];
$newpath = $newpatharray[0];
$i = 0;

while (true) {
  if ($patharray[$i] != $newpatharray[$i]) {
    rename($oldpath, $newpath);
  }
  $i++;
  if ($i >= count($patharray) {
    break;
  }
  $oldpath .= "/".$patharray[$i];
  $newpath .= "/".$newpatharray[$i];
} 
```

# c# - FluentNhibernate - HasMany 与复合键的关系

> ID：12868645
> 
> 赞同：3
> 
> 时间：2012-10-12T23:59:19.537
> 
> 标签：c#, nhibernate, fluent-nhibernate

我在尝试使用旧数据库模式创建映射的当前场景中苦苦挣扎：

我有一对由复合键链接的父/子类，我正在使用 FluentNHibernate 创建映射和它们之间的关联。以下是课程：

```
/*Parent Class*/
public class Comprobante : Model<Comprobante>
{    
    public virtual IList<CuotaComprobante> Cuotas { get; protected set; }

    public virtual string NumeroComprobante { get; protected set; }
    public virtual string Tipo { get; protected set; }

    public Comprobante(){ }
}

/*Child Class*/
public class CuotaComprobante : Model<CuotaComprobante>
{
    public virtual Comprobante Comprobante { get; protected set; }

    public virtual string Estado { get; protected set; }
    public virtual DateTime FechaVencimiento { get; protected set; }

    /*!!!Want to get rid of this two properties in the child class*/                     
    public virtual string NumeroComprobante { get; protected set; }
    public virtual string Tipo { get; protected set; }

    public CuotaComprobante(){ }
} 
```

这是数据库模式：

```
Comprobante Table (gva12)
 - ID_GVA12
 - N_COMP (NumeroComprobante property in Comprobante class)
 - T_COMP (Tipo property in Comprobante class)

CuotaComprobante Table (gva46)
 - ID_GVA46
 - N_COMP
 - T_COMP 
```

因此，如您所见，N_COMP 和 T_COMP 字段是复合键的一部分（ID_GVA12 和 ID_GVA46 都不用于数据库中的关系）。我已经尝试过使用 HasMany 关系（如下面的代码所示），但它只使用 T_COMP 字段执行连接，这给了我比预期更多的结果。您可能已经注意到，我只是在子类中创建了属性“NumeroComprobante”和“Tipo”用于映射目的，但我真的很想摆脱它们，因为它是我在父类中已经拥有的信息，或者替换它们引用了 Comprobante 类。

```
HasMany(x => x.Cuotas)
            .KeyColumn("N_COMP").PropertyRef("NumeroComprobante")
            .KeyColumn("T_COMP").PropertyRef("Tipo")
            .Inverse(); 
```

所以我的问题是：有什么办法可以实现吗？我真的没有想法，因为我是一个有映射和谷歌搜索的新手并没有真正提供任何帮助。

提前致谢！

毛里西奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:43:19.583

尝试

```
Component(x => x.ComponentContainingNumeroAndTipo, c =>
{
    c.Map(x => x.NumeroComprobante, "N_COMP");
    c.Map(x => x.Tipo, "T_COMP");
});

HasMany(x => x.Cuotas)
        .KeyColumns.Add("N_COMP", "T_COMP")
        .PropertyRef("ComponentContainingNumeroAndTipo")
        .Inverse(); 
```

# google-app-engine - Google App Engine - ImagesService.getServingUrl() 无法读取图像

> ID：12868646
> 
> 赞同：0
> 
> 时间：2012-10-12T23:59:23.317
> 
> 标签：google-app-engine, blobstore

我通过 HTTP 请求接收图像文件并将其存储在 Blobstore 中。我的代码与此处的代码类似：[https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore][1]。

在为我存储的图像调用 blobkey 上的函数 ImagesService.getServingUrl() 时，我收到以下消息：

```
HTTP ERROR 500

Problem accessing /upload. Reason:

    Failed to read image
Caused by:

java.lang.IllegalArgumentException: Failed to read image
    at com.google.appengine.api.images.ImagesServiceImpl.getServingUrl(ImagesServiceImpl.java:282) 
```

经过数小时的谷歌搜索，试图找到解决方案，我认为问题在于函数 closeFinally() 有问题。我认为这是因为在关闭我制作的新 blob 图像后，与 blob 关联的 FileStats 对象为 hasFinalizedName() 返回 false。然而，对于 isClosed() 和 isFinalized()，blob 返回 true。此外，它的完整路径是这样的：

/blobstore/writable:xFSAF_493dsfAfw489vFa...

如果它被关闭，我认为它不应该是可写的。

所以我的问题是：有没有人解决 getServingUrl 不起作用的问题？有没有人有解决方法getServingUrl？我想要为用户提供图片，并且我希望这些图片以静态文件的形式存在。带 blobstore 的 getServingUrl 似乎是我的最佳选择。我不想使用 Google Cloud Storage，因为对于我看到的每个 Blobstore 与 Google Cloud Storage 的问题，Blobstore 似乎都赢了。

# graphviz - 在graphviz中从节点到边绘制边

> ID：12868654
> 
> 赞同：3
> 
> 时间：2012-10-13T00:00:35.657
> 
> 标签：graphviz

是否可以在graphviz中从节点绘制边缘到现有边缘的中心？我想复制这种类型的反应图，在化学或生物网络中很常见。

![节点到边缘的期望边缘](../Images/a1ce5ebee0474ee69663a41e786f5faa.png)

谢谢！

——彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-26T07:10:09.173

是的，您可以使用不可见的节点，例如在[此示例](https://stackoverflow.com/questions/7374108/graphviz-node-placement-and-rankdir)中。

然后玩为 A 和 B 创建子图，其中

```
rank=same 
```

然后是边缘

```
constraint=false 
```

用于从 C 到不可见节点的连接。这会将前两个放在 C 之上。

# javascript - jQuery URL 在 Firefox 上获取错误

> ID：12868658
> 
> 赞同：0
> 
> 时间：2012-10-13T00:01:23.017
> 
> 标签：javascript, jquery, firefox

谁能指出为什么我的 JavaScript 函数属于错误函数而不是成功函数？Ubuntu 上的火狐

```
$(document).ready(function() {
        console.log( "Start" );
        $.ajax({ type: "GET", dataType: "html", url: "http://slashdot.org",
        error: function(request, status) {
            console.log("Error");
        },
        success: function(data) {
            console.log("Sucess");
        }
        });
            console.log( "End" );
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:25:49.757

由于[同源安全限制](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)，您不能向当前网页域以外的域发出 ajax 调用。

可能的解决方法取决于您的实际问题：

1.  在您的域上构建一个服务器代理，它将为您从其他站点获取网页，以便您可以将请求发送到您自己的域。

2.  使用 iframe 显示来自另一个域的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:32:35.120

这是跨域策略非常常见的问题。如果您使用的是 jQuery Ajax，那么您可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)进行跨域查询。文档位于[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
 $.ajax({ type: "GET", dataType: "json", url: "https://api.instagram.com/v1/tags/stackoverflow/media/recent?client_id=0324ff3396ef4ab49697505678e734f5&callback=?",
      error: function(request, status) {
           console.log(request, status);
      },
      success: function(data) {
           console.log(data);
      }
 }); 
```

# c# - 从 WordNet 数据库中检索单词

> ID：12868659
> 
> 赞同：0
> 
> 时间：2012-10-13T00:01:45.123
> 
> 标签：c#, asp.net, xml, wordnet

我正在寻找一个提供 API 以从英语[WordNet](http://wordnet.princeton.edu/)数据库中检索单词的网站。

我不想下载 WordNet 数据库并在我的服务器中实现它。

只是我想调用 API 并从该网站获取一些 XML 格式的结果。我在 ASP.net 中有一个用 C# 编写的 Web 应用程序。

这里有一个来自 WordNet 的示例，我想在我的 Web 应用程序中做类似的事情。

[WordNet 在线](http://wordnetweb.princeton.edu/perl/webwn)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:49:13.340

似乎没有这样的 API 公开可用。

根据[相关项目网站](http://wordnet.princeton.edu/wordnet/related-projects/#REST)，WordNet 数据的一部分可通过[abbreviations.com](http://www.abbreviations.com/api.php)作为 API 获得：

> Abbreviations.com 创建了基于 REST 调用的免费 API，这些 API 返回格式良好的 XML 结果，提供基于 WordNet 数据库的同义词和定义 API。

但是在[.NET/C# 部分](http://wordnet.princeton.edu/wordnet/related-projects/#.NET)的同一页面上，您可以找到一些公开可用的本地 API，因此您不必自己实现它，而必须下载数据文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:10:15.310

`WordNet`似乎没有公开`REST`可以使用的或类似的 API。也就是说，您可以通过在线搜索并在您的应用程序中使用它并解析响应 html 来派生 URL 模式。

您可能想检查那里的网站以确保这是合法的。

# c# - 浮点数乘法返回意外结果

> ID：12868662
> 
> 赞同：2
> 
> 时间：2012-10-13T00:02:21.020
> 
> 标签：c#, floating-point, double

```
int countBouncy=5;
int count=999899;

double percent = (double)(countBouncy / count) * 100.0; 
```

那句话的结果是出乎意料的，我得了零。

为什么它不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T00:03:55.953

您正在对 进行整数除法`(countBouncy / count)`。将您的代码更改为

```
double percent = ((double)countBouncy / count) * 100.0; 
```

这样， c# 编译器将显式`countBouncy`转换为`double`显式`count`转换为`double`隐式转换，以使其与 (now `double`)兼容`countBouncy`。

否则`(countBouncy / count)`计算为`(5 / 999899) --> 0`因为两者都是整数。

* * *

整数除法是如何工作的？举个例子：

```
7 / 2 = 3 
```

整数除法会丢弃实际除法产生的小数部分。结果被截断为零。您可以使用模运算符获得此除法的其余部分

```
7 % 2 = 1 
```

并像这样执行反向计算

```
2 * (7 / 2) + 7 % 2 = 7 
```

您可以在 Visual Studio 的即时窗口中输入它来测试它：

> ?2 * (7 / 2) + 7 % 2<输入>
> 7

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T00:03:56.683

因为您的除法是整数除法，结果为 0，然后您*将*其转换为双精度数。

您当前的代码实际上与以下代码相同：

```
int temp = countBouncy / count;  // == 0
double percent = (double)temp * 100.0; 
```

您是否先投射其中一项：

```
double percent = ((double)countBouncy / count) * 100.0; 
```

这将导致您的除法预先以双精度完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T00:05:00.780

当您将 an`int`除以 an`int`时，结果始终为 an `int`，因此它将向下舍入到最接近的整数（零）。试试这个：

```
((double)countBouncy / count) * 100.0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T00:06:23.280

你的分子和分母都是`int`s。因此，得到的商是`int`C# 通过向下舍入到 0 来计算的。另外，您正在尝试将类型分配给`double`类型`int`。为了达到您想要的结果，请执行以下操作：

```
double percent = ((double) countBouncy / count) * 100.0; 
```

# php - Paypal IPN 脚本未正确处理

> ID：12868664
> 
> 赞同：0
> 
> 时间：2012-10-13T00:02:30.727
> 
> 标签：php, paypal

我目前正在使用 Paypal IPN，它在 IPN 历史记录中说明它已发送到以下脚本，但由于某种原因我没有收到电子邮件。这意味着要么我没有得到验证，要么我做错了什么。那么我做错了什么？

```
<?php
mysql_connect('localhost','inulled','algaportjava14');
mysql_select_db('inulled_p1');
// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];

    mail('rapidblow@gmail.com', 'Paypal HTTP Error', 'Sorry, we have had a problem processing your request');
} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:31:29.940

代替;

```
if (strcmp ($res, "VERIFIED") == 0) { 
```

经过;

```
if (strcmp (trim($res), "VERIFIED") == 0) { 
```

# java - 在 Java 中计算递归函数

> ID：12868666
> 
> 赞同：0
> 
> 时间：2012-10-13T00:03:14.393
> 
> 标签：java, recurrence

我需要求解这个递归函数：f(n) = 5*f(n-1) - 2*f(n-2)，其中 f(0)=1 和 f(1)=2。我写了下面的代码，但它没有给出正确的答案——它输出 164，例如，当 n = 4 时，虽然正确的答案是 26（假设我的数学运算正确）。

```
public static int recurFunction(int n) {
    if(n == 0) {
        return 1;
    } else if(n == 1) {
        return 2;
    } else {
        n = ((5 * recurFunction(n - 1)) - (2 * recurFunction(n - 2)));
        return n;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T00:11:52.797

你的数学是错误的:)

f(n) = 5*f(n-1) - 2*f(n-2)

```
f(0) = 1
f(1) = 2
f(2) = 5 * f(1) - 2 * f(0) = 5 * 2 - 2 * 1 = 10 - 2 = 8
f(3) = 5 * f(2) - 2 * f(1) = 5 * 8 - 2 * 2 = 40 - 4 = 36
f(4) = 5 * f(3) - 2 * f(2) = 5 * 36 - 2 * 8 = 180 - 16 = 164 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T00:17:36.977

看起来您的 Java 代码是正确的，但您自己的数学是不正确的。

```
f(2) = 5f(1) - 2f(0) = 5 * 2 - 2 * 1 = 10 - 2 = 8
f(3) = 5f(2) - 2f(1) = 5 * 8 - 2 * 2 = 40 - 4 = 36
f(4) = 5f(3) - 2f(2) = 5 * 36 - 2 * 8 = 180 - 16 = 164 
```

# php - 匹配一年中的所有事件

> ID：12868674
> 
> 赞同：1
> 
> 时间：2012-10-13T00:03:48.257
> 
> 标签：php, regex

我正在尝试匹配在字符串中找到的所有日期，这是函数

```
$description = "1999 2008 1998";

if(preg_match("/[12][0-9]{3}/", $description, $matches)){
   print_r($matches);
} 
```

问题是只返回第一个日期，即`1999`我实际上想匹配所有日期。

我应该在正则表达式中更改什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:08:01.320

你是这个意思吗？

```
<?php
$description = "1999 2008 1998";

if(preg_match_all("/[12][0-9]{3}/", $description, $matches)){
   print_r($matches);
} 
```

唯一的区别是`preg_match_all`代替`preg_match`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:44:29.377

```
<?php
$description = "1999 2008 1998";

$a = Array(preg_match_all('/(\d{4})*/', $description, $matches));

$count = count($matches);

for ($i = 0; $i <= $count + 2; $i++) {
    echo $matches[0][$i] . "\n";
}
?> 
```

**输出**

```
1999
2008
1998 
```

# java - tomcat6不读取环境变量

> ID：12868681
> 
> 赞同：0
> 
> 时间：2012-10-13T00:04:16.553
> 
> 标签：java, tomcat, tomcat6

这只是一个假设，但我正在关注 catalina.out 的日志，看起来每次我期望环境变量中的值时都没有。例如：

`java.io.FileNotFoundException: /logs/adminLog.log (No such file or directory)`它应该去哪里`$CATALINA_BASE/logs/adminLog.log`和 $CATALINA_BASE=/var/lib/tomcat6

我已经在文件中设置了这个 webapp 作为系统范围使用的环境变量`/etc/environment`。我已经检查过，重新启动后它们仍然存在。但是tomcat坚持阅读空白。

关于为什么会发生这种情况的任何想法？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:59:45.063

You should put tomcat / webapp specific environment variables into setenv.sh in tomcat's bin directory. Create one if it does not exists.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T01:35:20.620

取决于你如何启动Tomcat。假设您从用户“测试”开始（假设是 unix 机器。）。以“test”身份登录并使用“env”命令检查您的环境中是否存在环境变量。如果它在那里，那么当从该 shell 启动时 Tomcat 将能够使用 tomcat/bin/startup.sh 读取它们。

现在，Tomcat 只会读取它理解的变量。如果您正在设置自己的，那么您的应用程序需要阅读它们。

# nginx - Nginx proxy_next_upstream 不起作用

> ID：12868683
> 
> 赞同：13
> 
> 时间：2012-10-13T00:04:31.533
> 
> 标签：nginx

我希望 nginx 首先在我的本地主机上搜索该文件，并在出现 404 错误时搜索服务器 1.1.1.1。

我能够获取位于本地主机上的文件，但无法从服务器 1.1.1.1 获取。

```
server {
    listen 80;
    server_name  localhost;

    access_log /var/log/nginx/access.log main;

    location /products/ {
        proxy_next_upstream http_404;

        root /var/foo;
    }
}

server {
    listen 80;
    server_name  1.1.1.1;
    location /products/ {
        #########
    }
} 
```

我猜 proxy_next_upstream 没有切换到服务器。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-14T00:36:01.523

proxy_next_upstream指令是一个配置指令，[用于控制来自一组](http://nginx.org/r/proxy_next_upstream)[上游服务器](http://nginx.org/r/upstream)的重新请求，`proxy_pass`如果对其中一个服务器的请求失败。没有定义块是没有意义`proxy_pass`的`upstream`。如果您像这样代理到多个上游服务器，则可以使用它：

```
upstream backends {
    server 192.2.0.1;
    server 192.2.0.2;
    ...
}

server {
    ...

    location / {
        proxy_pass http://backends;
        proxy_next_upstream error timeout http_404;
    }
} 
```

如果您希望 nginx 在磁盘上搜索文件，并且如果找不到 - 代理请求到另一台服务器，请配置它，例如使用`try_files`回退代替：

```
location / {
    root /path/to/root;
    try_files $uri @fallback;
}

location @fallback {
    proxy_pass http://...
} 
```

有关该指令的更多信息，请参阅[http://nginx.org/r/try_files 。](http://nginx.org/r/try_files)`try_files`

# codeigniter - 是否有任何理由使用帮助程序来生成静态 HTML 代码？

> ID：12868684
> 
> 赞同：1
> 
> 时间：2012-10-13T00:04:58.023
> 
> 标签：codeigniter, helper

我正在使用 CodeIgniter 开发一个项目。当然，拥有一个帮助程序非常有用，`language`因为您要打印的字符串可以根据您加载的语言而改变。因此，您可以使用 helper，而不是编写纯 php 代码。

但是，我不清楚辅助函数的含义是什么，例如：

`echo doctype();`

扩展为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

当然，第一个更容易编写，但是每次都必须处理该代码。您以无限执行相同代码为代价节省了几秒钟的编码，这些代码在每个页面上始终具有相同的输出（并且有许多类似的帮助程序，例如，`Form Helper`有很多有效的示例函数生成静态 HTML 代码）。

所以，问题是：如果我没有要添加的动态代码/变量，为什么要使用帮助程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:29:56.570

对于某些事情，它可能没有意义。可能的借口`doctype()`是，如果您想更改几个页面的文档类型，您可以通过更改函数的输出来实现。我个人使用带有文档类型的单个主模板，但不同的人会做不同的事情。

同样的借口适用于类似的东西`heading('My Title', 1)`，有一天您可能需要将输出从 更改`<h1>My Title</h1>`为`<h1><span>My Title</span></h1>`，如果您在整个应用程序中使用了标题功能，那将是微不足道的。您甚至可以添加额外的参数以使其更加灵活。

当然，正如您肯定知道的那样，在特定情况下做最适合您的事情。有时 HTML 助手可以节省您的时间，有时它们只会妨碍您。我不会太担心执行需要多长时间，因为它几乎不重要。

# image - QGraphicsView / QGraphicsScene 图像大小

> ID：12868686
> 
> 赞同：1
> 
> 时间：2012-10-13T00:05:09.177
> 
> 标签：image, qt, size, qgraphicsview, qgraphicsscene

我想用 QGraphicsScene 在 QGraphicsView 中显示图像。我的代码非常基本：

```
QGraphicsScene* scene = new QGraphicsScene(this);
scene->addPixmap(QPixmap(qApp->applicationDirPath() +"/france.gif"));
ui->myGraphicsView->setScene(scene);
ui->myGraphicsView->fitInView(scene->sceneRect()); 
```

我的问题是我的图片尺寸不对。它非常小，比例错误，位于我的 GraphicsView 的中心。使用 qDebug 我知道我的图片加载成功，它的大小约为 100x800px。我的 graphicsView 较小，所以我想调整我的图片大小以使用我的 GraphicsView 大小进行调整。

graphicsView在主窗口Form中设置，场景在标题中声明：“QGraphicsScene场景；”

我尝试世界上一切皆有可能（我认为），但 graphicsView 总是空白或包含图片的小版本。当我复制/粘贴一些互联网代码时，我总是遇到这个问题。我也尝试使用这个例子：[Qt GUI Development - Displaying a 2D grid using QGraphicsView](https://stackoverflow.com/questions/8279567/qt-gui-development-displaying-a-2d-grid-using-qgraphicsview)，同样的问题......

也许我非常非常非常累，但我真的不明白出了什么问题。请帮帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:02:58.047

`sceneRect()`除非您专门设置它，否则可能不是您认为的那样。此外，您`aspectRatioMode`在`fitInview`通话中丢失可能会扭曲图像，有时会导致“小”外观。

```
QGraphicsScene* scene = new QGraphicsScene(this);
QGraphicsPixmapItem p = scene->addPixmap(QPixmap(qApp->applicationDirPath() +"/france.gif"));
ui->myGraphicsView->setScene(scene);
ui->myGraphicsView->fitInView(p, Qt::KeepAspectRatio); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T01:41:01.497

根据我的经验，如果我们在显示场景窗口之前尝试 fitInView，则显示的图像非常小。从技术上讲，sceneRect 的大小在实际显示之前不会按照我们想要的方式设置。因此，我们需要先让场景窗口出现，然后才能正确使用 fitInView。

好吧，我认为解决方案在这里可用 [Qt5 C++ QGraphicsView: Images don't fit view frame](https://stackoverflow.com/questions/17028680/qt5-c-qgraphicsview-images-dont-fit-view-frame)

# eclipse - web.xml 中的多个 URL 模式元素

> ID：12868689
> 
> 赞同：9
> 
> 时间：2012-10-13T00:05:30.250
> 
> 标签：eclipse, jakarta-ee, web.xml

在符合 J2EE Web 应用程序 2.4 版的 web.xml 中的元素中是否可以有多个元素，如下所示：

```
<filter-mapping>
    <filter-name>SomeFilter</filter-name>
    <url-pattern>*.htm</url-pattern>
    <url-pattern>*.do</url-pattern>
</filter-mapping> 
```

我从这里查找了 XSD“web-app_2_4.xsd”文件：http: [//java.sun.com/xml/ns/j2ee/web-app_2_4.xsd](http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd) ，定义如下所示：

```
 <xsd:complexType name="filter-mappingType">
    <xsd:annotation>
      <xsd:documentation>
            some documentation here
      </xsd:documentation>
    </xsd:annotation>

    <xsd:sequence>
      <xsd:element name="filter-name"
           type="j2ee:filter-nameType"/>
      <xsd:choice>
    <xsd:element name="url-pattern"
             type="j2ee:url-patternType"/>
    <xsd:element name="servlet-name"
             type="j2ee:servlet-nameType"/>
      </xsd:choice>
      <xsd:element name="dispatcher"
           type="j2ee:dispatcherType"
           minOccurs="0" maxOccurs="4"/>
    </xsd:sequence>
    <xsd:attribute name="id" type="xsd:ID"/>
  </xsd:complexType> 
```

URL 模式定义如下所示：

所以我认为，我们可以在元素中有多个元素。然而，我的 Eclipse IDE 似乎并不同意我的观点，并且需要一个“调度程序”标签。

见图片： ![日食错误](../Images/4156c647be46a573895149f93c513dbf.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T07:42:42.363

显然没有，但你可以拥有：

```
<filter-mapping>
 <filter-name>SomeFilter</filter-name>
 <url-pattern>*.htm</url-pattern>
</filter-mapping>    

<filter-mapping>
 <filter-name>SomeFilter</filter-name>
 <url-pattern>*.do</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T21:18:03.700

默认是`1`for`maxOccurs`和`minOccurs`in`sequence`元素：
[https](https://msdn.microsoft.com/en-us/library/ms256089(v=vs.110).aspx) ://msdn.microsoft.com/en-us/library/ms256089(v=vs.110).aspx 。

并且`choice`只允许其中一个元素：
[https ://msdn.microsoft.com/en-us/library/ms256109(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms256109(v=vs.110).aspx)

# unix - Unammed Pipes - 从儿子那里读取字符串后，read() 显示奇怪的字符

> ID：12868690
> 
> 赞同：0
> 
> 时间：2012-10-13T00:05:38.990
> 
> 标签：unix, process, pipe, wait

我有两个子进程从文件中读取并将结果发送给父进程，但是当孩子们发送字符串时，父亲收到字符串加上一些其他奇怪的字符......我如何 null 终止接收到的字符串以及如何我是否让父亲在发送一些结果后等待所有可能有更多工作要做的儿子...因为儿子可能稍后会发送其他结果...谢谢您的帮助...

```
#include <unistd.h>
#include <sys/wait.h>
#include <sys/types.h>
#include <stdio.h>
#include <strings.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>
#include <time.h>

    #define max_chars_string 1000
    #define n_childs 2

    pid_t childs[n_childs];
    int channel[n_childs][2];

    void read_lines(char * filename, char (*pointer)[max_chars_string],int init_read,int n_lines);
    void get_strings_hash(char (*pointer_strings)[max_chars_string],char (*pointer_hashes)[max_chars_string],int total_lines);

    void worker(int mypipe,char filename[],int n_lines){ // meter as funcoes de ler passwords no filho
        int resources[2];// numero de linhas que cada processo tem de ler
        int i = 0;

        //definicao arrays
        char strings_hashes[n_lines][max_chars_string];//aray de string com as strings lidas do ficheiro
            char * pointer_strings = &strings_hashes[0][0];//ponteiro para o inicio do array das hashes

        read_lines(filename,strings_hashes,0,n_lines); // le as strings do ficheiro e passa para o array

        for(i = 0;i<n_lines;i++){
            printf("%s \n",strings_hashes[i]);
        }
        printf("[%d] My parent is: %d\n", getpid(), getppid());

        //open pipe to write and close pipe to read

        close(channel[mypipe][0]);
        i = 0;
        int incr = 0;
        while (i<n_lines) {
            printf("[Son] Password sent e  %s: \n",strings_hashes[incr]);
             write(channel[mypipe][1], strings_hashes[incr], strlen(strings_hashes[incr]));
             incr++;
             i++;
        }
        exit(0);
    }

    int main(int argc, char **argv)
    {
        char *filename;
        int status;//status do processos filho
        int resources[2];// numero de linhas que cada processo tem de ler
        int n_lines; //numero de linhas do ficheiro
        int i = 0;

          // Create a pipe
        filename = (char*)malloc(strlen(argv[1])*sizeof(char)+1);

        if(argc !=3){
            fprintf(stderr, "Usage : %s [text_file] [cores]",argv[0]);
            exit(0);
        }

        strcpy(filename,argv[1]);

        char get_file [strlen(filename)];
        strcpy(get_file,filename);

     // start the processes
       for(i = 0; i <atoi(argv[2]);i++){
            pipe(channel[i]);
            childs[i] = fork();

            if(childs[i] == -1){
               perror("Failed to fork");
               return 1;
           }
           if (childs[i] == 0)
           {
              worker(i,get_file,n_lines);
           }
           close(channel[i][1]);
       }

               i = 0;
               int k = 0;
               int fd;
               fd_set read_set;
               FD_ZERO(&read_set);
               char string_lida [30];

               // working father
               printf("[%d] I'm the father!\n", getpid());
               printf("[Father]orking ...\n");

                //unammed_pipes connection
                while(k<n_childs){

                    FD_SET(channel[0][0], &read_set);
                    for(i=0;i<n_childs;i++){
                            FD_SET(channel[i][0], &read_set);
                            if(fd<channel[i][0]){      fd=channel[i][0];
                            }
                        }

                    if(select(fd+1,&read_set,NULL,NULL,NULL)>0){
                        for(i=0;i<n_childs;i++){
                            if(FD_ISSET(channel[i][0], &read_set)){                    
                                read(channel[i][0],string_lida,sizeof(string_lida));
                                printf("[Father]pipe %d - string lida:%s\n",i,string_lida);

                                k++;                 
                            }
                        }
                    }
                    fd=1;
                }
              //
              //waiting for childs ...
            for(i=0;i<n_childs;i++){
                wait(&status);
                printf("waiting for childs \n");
              }

      return 0;
    }  

    void get_strings_hash(char (*pointer_strings)[max_chars_string],char (*pointer_hashes)[max_chars_string],int total_lines)//vai ao array de strings e corta a parte de hash e mete num array
    {
        int i = 0;
        char *strings;
        char *hash;

        for(i = 0;i<total_lines;i++){
                strings = (char*)malloc(strlen(pointer_strings)*sizeof(char)+1);
                strcpy(strings,*pointer_strings);
                hash = (char*)malloc(strlen(pointer_strings)*sizeof(char)+1);
                find_hash(strings,hash);
                strcpy(*pointer_hashes,hash);
            pointer_hashes++;
            pointer_strings++;
        }

    }

    void read_lines(char * filename, char (*pointer)[max_chars_string],int init_read,int n_lines){ 
        FILE *fp;
        char str[max_chars_string];
        int i =0;

        if((fp = fopen(filename, "r"))==NULL) {
          printf("Cannot open file.\n");
          exit(1);
        }

        if(init_read>0 && init_read<=n_lines){
         for(i = 0;i<init_read;i++){
             fgets(str, sizeof str, fp);
           for(i = init_read;i<n_lines;i++){
               fgets(str, sizeof str, fp);
               strcpy(*pointer, str); //copia para a posicao actula do ponteiro
               pointer++;
           }
         }
        }
        if(init_read<=n_lines && init_read==0){
           for(i = init_read;i<n_lines;i++){
                fgets(str, sizeof str, fp);
               strcpy(*pointer, str); //copia para a posicao actula do ponteiro
               pointer++;
           }
         }

      fclose(fp);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:09:40.457

When the child does

```
write(channel[mypipe][1], strings_hashes[incr], strlen(strings_hashes[incr])); 
```

strlen() doesn't count the null terminator of the string. So when the parent reads from the pipe, it doesn't receive a null-terminated string. Then when it does:

```
printf("[Father]pipe %d - string lida:%s\n",i,string_lida); 
```

It keeps printing past the end of what was written, because there's no string terminator.

Also, there's no guarantee that the amount read by read() will match up with the amount written each time write() was called. If the child writes two strings before the parent reads from the pipe, it may get all or parts of both, or it could get even less than was written.

You need to implement a way to indicate where the string boundaries are. You could send the size of the string first as one or two bytes, or you could use a null terminator. When the parent is reading, it needs to do this in a loop until it gets a whole string, and if it goes past the end it may need to save it in a buffer.

# ruby-on-rails - Rails：在用户提交表单后添加到模型

> ID：12868691
> 
> 赞同：2
> 
> 时间：2012-10-13T00:05:59.470
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

`new.html.erb`在我的 Rails 3.2 项目中，我有一个表单可以在其中创建一个新帖子`app/views/posts/`

```
<%= form_for(@post) do |post_form| %>
  ...
  <div class="field">
    <%= post_form.label :title %><br />
    <%= post_form.text_field :title %>
  </div>
  <div class="field">
    <%= post_form.label :content %><br />
    <%= post_form.text_field :content %>
  </div>
  <div class="actions">
    <%= post_form.submit %>
  </div>
<% end %> 
```

然后`create`函数在`posts_controller.rb`

```
def create
  @post = Post.new(params[:post])  
  if @post.save
    format.html { redirect_to @post }
  else
    format.html { render action: "new" }
  end
end 
```

当用户提交帖子时，帖子的`title`和`content`被添加到`Post`模型中。但是，我还想添加到该帖子的另一个字段。对于字段`random_hash`（用户无法指定），我想将其设为 8 个小写字母的字符串，其中前 2 个是标题的前 2 个字母，后 6 个是随机的小写字母。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:11:49.257

```
def create
  @post = Post.new(params[:post])
  @post.random_hash = generate_random_hash(params[:post][:title])
  if @post.save
    format.html { redirect_to @post }
  else
    format.html { render action: "new" }
  end
end

def generate_random_hash(title)
  first_two_letters = title[0..1]
  next_six_letters = (0...6).map{65.+(rand(25)).chr}.join
  (first_two_letters + next_six_letters).downcase
end 
```

把它放在你的控制器中。您显然必须具有`random_hash`Post 模型才能工作的属性。

我正在使用[Kent Fredric 的解决方案来生成六个随机字母。](https://stackoverflow.com/questions/88311/how-best-to-generate-a-random-string-in-ruby)

# c++ - 在 QTableView 中跨越两列的标题

> ID：12868693
> 
> 赞同：2
> 
> 时间：2012-10-13T00:06:11.107
> 
> 标签：c++, qt

我有一个 QTableView。我希望三列共享一个共同的标题。

我的方法是将column3的大小调整为col1+col2+col3的大小，然后将column2的大小调整为col1+col2的大小，并以同样的方式调整colmumn1的大小。

当我尝试使用 resizeSection() 方法时，我最终发现中间列消失在左右列重叠的后面。

从我的实验来看，这不是一个小问题。

我看过[“如何跨越 QTableView 中的标题？” 在 Qt's Technical FAQ 上](https://wiki.qt.io/Technical_FAQ#How_can_I_span_the_headers_in_my_QTableView_.3F)，但它的帮助很小，主要是在理解问题方面。

完成此任务的最简单和最直接的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:23:51.910

我正在采用的方法是在 QTableView 上放置一个新的 QTableView，几何设置为标题大小，以便将其用作一种“标题掩码”，并通过信号和插槽将其连接到其下方的那个。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-13T07:08:02.903

请看一下[qt-app.org 网格视图小部件](http://qt-apps.org/content/show.php/Qt+Grid+View?content=145913)，几个月前我也想知道该怎么做。虽然 Impl 本身并不整洁，但你可以从中得到很多提示。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-05-29T07:40:58.470

我发现这个项目[HierarchicalHeaderView 可以满足](http://qt-apps.org/content/show.php/HierarchicalHeaderView?content=103154)您的需求。标题的组织方式类似于普通的 Qt 树模型，带有父级等。有一些列调整大小的问题，但没什么大不了的。

# firefox - 为什么 Firefox 16 改变了我的线性渐变的方向？

> ID：12868704
> 
> 赞同：12
> 
> 时间：2012-10-13T00:07:24.350
> 
> 标签：firefox, css

示例 CSS：

```
background-image: -moz-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: -ms-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: -o-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: -webkit-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: linear-gradient(90deg, #e8f0ff, #ffffff); 
```

这曾经导致从`#e8f0ff`底部到`#fff`顶部的线性渐变。

在 Firefox 16（几天前发布）之后，渐变现在`#e8f0ff`从左到右`#fff`。

当我删除特定于供应商的 CSS 并留下：

```
background-image: linear-gradient(90deg, #e8f0ff, #ffffff); 
```

没发生什么事。但是，当我删除该行并仅保留特定于供应商的样式时：

```
background-image: -moz-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: -ms-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: -o-linear-gradient(90deg, #e8f0ff, #ffffff);
background-image: -webkit-linear-gradient(90deg, #e8f0ff, #ffffff); 
```

它纠正了问题。

那么FF16中发生了什么新的东西呢？这些`Xdeg`值是否从一个新的方向开始，是否仅在某些情况下才相加？我不知道为什么它会`180deg`同时处理这两者或只处理一般情况，但前提`90deg`是它只是供应商。

问题是，Firefox 的这种新行为的具体细节是什么，对于现在在 FF16 中渐变错误的网站来说，最广泛、最符合标准的解决方案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T00:10:09.953

[标准](http://dev.w3.org/csswg/css3-images/#linear-gradients)规定从 0° = 向上顺时针测量角度。

> ### 使用角度
> 
> 就本论点而言，'0deg' 指向上方，正角表示顺时针旋转，因此 '90deg' 指向*[sic]*向右。

[`-moz-linear-gradient`，另一方面，使用极坐标](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)（强调我的）：

> 最后的语义好奇心仍然存在于带前缀的变体和不带前缀的提议之间。按照最初的 Apple 提议，语法的前缀变体都使用`<angle>`定义的极角，即 0deg 代表东方。为了与 CSS 的其余部分保持一致，规范定义了一个以 0deg 表示北方的角度。**为了防止使用该属性的前缀版本的站点突然损坏，即使在适应其他向前兼容的最终语法时，它们仍保留原始角度定义（0deg = East）。取消属性前缀时，它们将切换到正确的规范。**此外，由于它们并非不兼容，Gecko 支持带前缀和不带 to 关键字的语法。同样，在取消前缀时，没有关键字的语法将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:01:33.700

一个简单的技巧可以是使用关键字`bottom`而不是度数。

# java - 在java中定义一个选择器状态

> ID：12868711
> 
> 赞同：0
> 
> 时间：2012-10-13T00:08:45.633
> 
> 标签：java, android, dynamic, selector

我想在java中动态定义一个选择器。

我使用资源中的drawables，上面我写了一些文字。因此，不能将正常的可绘制和可绘制焦点状态定义到 xml 文件中......

有没有办法在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:19:24.177

你检查[过 StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)吗？

这是您的选择器将创建的可绘制对象的类型。

所以你可以做这样的事情：

```
StateListDrawable drawable = new StateListDrawable();
drawable.addState(new int[]{android.R.attr.state_focused}, mFocusedDrawable);
drawable.addState(new int[]{android.R.attr.state_enabled, android.R.attr.state_pressed}, mEnabledPressedDrawable);
drawable.addState(new int[0], mDefaultDrawable); 
```

# c - 在C中重绘一个数组

> ID：12868712
> 
> 赞同：2
> 
> 时间：2012-10-13T00:08:56.563
> 
> 标签：c, arrays, loops, for-loop

我刚开始使用 C，但我对 PHP 有一些了解，所以我决定做一些“更复杂”的东西，作为初学者:)

我使用了两个嵌套循环来打印一个 50x50 的数组。它不是很慢，但我包含了一个带有箭头键的移动，以在阵列周围移动一个符号 X（玩家）。每次移动时，都需要刷新整个数组，我这样做是：

```
system("cls");
for(x=0;x<50;x++)
{
    for(y=0;y<50;y++)
    {
         printf("%c",table[x][y]);
    }
    printf("\n");
} 
```

这是一个非常草率的解决方案，整个阵列在每次移动后都会“闪烁”。

在 C 中有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:16:28.370

您可能必须使用某种 shell 图形库（例如**ncurses**）来在数组周围移动内容，而不会在重绘时闪烁。当您仅使用 printf 将网格显示为输出时，没有一种简单的方法可以避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:28:30.407

我假设您使用的是 Windows（因为 cls）。

也许 ANSI.SYS 转义序列是没有库的最简单方法。

如果您移动光标并覆盖显示内容而不清除旧内容，您可能可以避免闪烁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T00:52:19.553

有一个使用 Win32 控制台的“读取和写入字符和属性块”的示例：

[http://msdn.microsoft.com/en-us/library/ms685032%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms685032%28v=vs.85%29.aspx)

编辑：解释了链接。

# c# - 为什么我们可以使用这样的任务？

> ID：12868717
> 
> 赞同：3
> 
> 时间：2012-10-13T00:09:30.910
> 
> 标签：c#, .net, c#-4.0

```
task.ContinueWith( x => Process(x));

task.ContinueWith( Process) 
```

我想知道为什么两者都可以工作？

我以为 ContinueWith 至少需要一个 Task 参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:12:35.737

lambda 表达式正在转换为方法组。

> **13.6 方法组转换**
> 
> 与第 13.5 节中描述的隐式匿名方法转换类似，存在从方法组（第 14.1 节）到兼容委托类型的隐式转换。如果 D 是委托类型，并且 E 是分类为方法组的表达式，则 D 与 E 兼容当且仅当 E 包含至少一个适用于其正常形式（第 14.4.2.1 节）的方法具有与 D 的参数类型和修饰符匹配的类型和修饰符的任何参数列表（第 14.4.1 节）。
> 
> 从 E 到 D 的转换的编译时应用与委托创建表达式 new D(E) (§14.5.10.3) 的编译时处理相同。请注意，从 E 到 D 的隐式转换的存在只是表明适用方法的集合不为空，但不能保证转换的编译时应用程序会成功而不会出错。

有关示例，请参见[http://en.csharp-online.net/ECMA-334:_13.6_Method_group_conversions](http://en.csharp-online.net/ECMA-334:_13.6_Method_group_conversions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:13:44.680

这两条线本质上是一回事。下面是一个方法调用，它上面的 lambda 表达式只是被转换成一个类似的方法调用。一样的，只是表达方式不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T00:15:52.443

因为`ContinueWith`需要一个`Action<Task>`as 参数并且`Process`具有正确的签名以及`(x) => Process(x)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T00:16:12.093

x => Process(x) 正在创建一个委托。

委托是一种引用方法的类型。

Task 表示异步操作。

Action 是一种委托。

# c++ - 线程和 fork()。我该如何处理？

> ID：12868724
> 
> 赞同：7
> 
> 时间：2012-10-13T00:10:27.640
> 
> 标签：c++, c, linux, multithreading, fork

> **可能重复：**
> [多线程程序中的分叉](https://stackoverflow.com/questions/1235516/fork-in-multi-threaded-program)

如果我有一个使用 fork() 并且可能被开发为多线程的应用程序，那么安全编程此类应用程序需要考虑哪些经验法则/指南？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:10:27.640

根据各种互联网文章（例如（[http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them，fork](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them) [in multi-threaded program](https://stackoverflow.com/questions/1235516/fork-in-multi-threaded-program) ）） ，基本的经验法则是：

1.  *（主）进程 [0] 单线程 --> fork() --> （子）进程 [1] 多线程*：**好的！**
    如果*Process[1]*崩溃或内存混乱，它*不会*触及*Process[0]*的地址空间（除非您使用共享 R/W 内存......但这是它自己的另一个主题）。
    默认情况下，在 Linux 中，所有*fork()ed*内存都是[Copy On Write](http://en.wikipedia.org/wiki/Copy-on-write)。鉴于*Process[0]*是单线程的，当我们调用*fork()*时，所有可能的互斥原语*通常*应该处于*解锁*状态。

2.  *（主）进程 [0] 多线程 --> fork() --> （子）进程 [1] 单/多线程*：**糟糕！**
    如果你*fork()*一个多线程进程，你的互斥锁和许多其他线程同步原语可能在 Process[1] 中处于*未定义状态。*您可以使用*pthread_atfork()*解决，但如果您使用库，您不妨掷骰子并希望幸运。因为通常你不（想）知道库的实现细节。

*fork()*进入多线程进程的优点是您可以更快地操作/读取/聚合数据（在子进程中），而不必关心您从（主）中*fork()的进程的稳定性。*如果您的主进程具有*大量*内存的数据集并且您不想复制/重新加载它以安全地处理另一个进程（子进程）中的数据，这将非常有用。这样，原始过程是稳定的，并且独立于数据聚合/操作过程（*fork()ed*）。

当然，这意味着原始进程*通常*会比以多线程方式开发时要慢。但同样，这是您可能希望为提高稳定性而付出的代价。

如果您的主进程是多线程的，请*不要*使用*fork()*。以稳定的方式实现它将是一个*适当的混乱。*

干杯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T00:25:53.260

在 Linux 上，线程是根据进程来实现的。换句话说，线程实际上只是一个`fork()`共享内存，而不是完全的写时复制内存。这意味着，当您`fork()`在线程（主线程或其他线程）中使用时，您最终会复制所有线程的整个共享内存空间，以及您调用的线程的线程特定存储`fork()`。

现在所有这些听起来都不错，但这并不意味着这将发生或运作良好。如果您想创建一个克隆进程，请在启动任何其他线程之前尝试执行一个 fork，然后使用只读虚拟内存使 fork 进程与当前内存值保持同步。

所以虽然它可能有效，但我只是建议测试，并尝试先找到另一种方法。并为很多事情做好准备：

```
Segmentation fault 
```

# c# - Razor 引擎的任何好的替代品

> ID：12868729
> 
> 赞同：5
> 
> 时间：2012-10-13T00:11:08.883
> 
> 标签：c#, .net, asp.net-mvc-4

[如您所知，](https://github.com/Antaris/RazorEngine/issues/42) [Razor Engine](http://razorengine.codeplex.com) 无法在`MVC4`.

所以我想知道我们是否可以用`Model object`其他方式生成电子邮件 html 正文。

我们可以使用哪个工具/dll的任何线索。

如果模型中有 100 个字段，我真的不想手动输入属性名称并使用`Replace`方法...

**样本：**

```
<div class="display-label">
        @Html.DisplayNameFor(model => model.Name)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Name)
    </div>
    <div class="clear">
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T09:28:23.600

Razor 引擎现在具有 Razor 2 兼容性（在 3.1 中引入）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T04:56:46.843

我一直在使用 ActionMailer.net 使用 Razor 视图生成 html 电子邮件。您可以在 NuGet 或此处找到它：[https ://bitbucket.org/swaj/actionmailer.net/wiki/Home](https://bitbucket.org/swaj/actionmailer.net/wiki/Home)

# php - if 语句不起作用继续触发函数

> ID：12868731
> 
> 赞同：-1
> 
> 时间：2012-10-13T00:11:34.280
> 
> 标签：php, sql

我使用的脚本有问题。如果 $addcount 不起作用。当我不想要它时，它会继续触发 insertMessage 函数。任何想法为什么？

```
if(($result->data != '') && ($result->data != null)) {
    $wallCount = 0;
    $addCount = 0;
    foreach($result->data as $thread){
        $wallCount++;
        $fromId = $thread->from->id;
        $message = $thread;
        if($fromId == $user['Id']){
            if($addCount < 100) {
                insertMessage($user['Id'], $message, $user['Num']);
                $addCount++;
                sleep(1);
            }
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:25:27.247

在您的脚本中，它将调用 insertMessage 100 次 (0-99)。在 if 语句之前，回显计数器以查看它在做什么：

```
...
echo $addCount."<br />";
if($addCount < 100) {
... 
```

# css - CSS中的一张图片在另一张图片下方

> ID：12868735
> 
> 赞同：1
> 
> 时间：2012-10-13T00:11:52.210
> 
> 标签：css, image

如何使用 CSS 让一张图片出现在另一张图片下方？例如，我正在尝试实现类似

```
[image 1.jpg]
[image 2.jpg] 
```

我是 CSS 初学者

这是我的代码，为什么它不起作用？：

```
<img { display: block; width: 246px; height: 203px; } title="Chocolate Moltres Cake Recipe" src="print_files/chocolatecake.jpg" alt="Chocolate Moltres Cake Recipe" border="0">
<img { display: block; width: 246px }title="Moltres" src="i.imgur.com/simHG.jpg"; alt="Moltres" border="0"> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T00:16:17.360

只需使用这个简单的 CSS 规则：

```
img {
    display: block;
} 
```

所以，在你的情况下：

```
<img style="display: block;" src="xxx.jpg" alt="" /> 
```

它们将显示在彼此下方。

但是，从 XHTML 1.0 开始，内联 CSS 规则 ( `style=""`) 不再有效。您**应该**使用链接到您的 HTML 的外部 CSS 文件。

[JSFiddle 链接](http://jsfiddle.net/MhRcD/)

我建议您阅读有关 CSS的[W3Schools页面。](http://www.w3schools.com/css/default.asp)我从这里学到了。

# iphone - 将 C 数组转换为 UIImage（适用于 iOS）

> ID：12868745
> 
> 赞同：4
> 
> 时间：2012-10-13T00:13:27.633
> 
> 标签：iphone, objective-c, image, uiimage, nsarray

我目前在 C 数组中有一些图像数据，其中包含 RGBA 数据。

```
float array[length][4] 
```

我试图把它放到一个 UIImage 中，看起来这些是用文件、NSData 和 URL 初始化的。由于其他两种方法速度较慢，因此我对 NSData 方法最感兴趣。

我可以将所有这些值放入 NSArray 中，如下所示：

```
for (i=0; i<image.size.width * image.size.height; i++){
    replace = [UIColor colorWithRed:array[i][0] green:array[i][1] blue:array[i][2] alpha:array[i][3]];
    [output replaceObjectAtIndex:i withObject:replace];
} 
```

所以，我有一个充满 UIColor 对象的 NSArray。我尝试了很多方法，但是如何将其转换为 UIImage？

我认为这将是直截了当的。一个类似的函数`imageWithData:data R:0 B:1 G:2 A:3 length:length width:width length:length`会很好，但据我所知没有函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T00:32:43.663

`imageWithData:`用于标准图像文件格式的图像数据，例如内存中的 PNG 或 JPEG 文件。它不适合从原始数据创建图像。

为此，您通常会创建一个位图图形上下文，将您的数组、像素格式、大小等传递给`CGBitmapContextCreate`函数。创建位图上下文后，可以使用 从中创建图像，`CGBitmapContextCreateImage`它会为您提供`CGImageRef`可以传递给`UIImage`方法的图像`imageWithCGImage:`。

这是一个基本示例，它创建一个带有一个红色像素和一个绿色像素的 1×2 像素图像。它只是使用硬编码的像素值来显示颜色分量的顺序，通常，您当然会从其他地方获取这些数据：

```
size_t width = 2;
size_t height = 1;
size_t bytesPerPixel = 4;
//4 bytes per pixel (R, G, B, A) = 8 bytes for a 1x2 pixel image:
unsigned char rawData[8] = {255, 0, 0, 255,  //red
                            0, 255, 0, 255}; //green

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
size_t bytesPerRow = bytesPerPixel * width;
size_t bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);

CGImageRef cgImage = CGBitmapContextCreateImage(context);
//This is your image:
UIImage *image = [UIImage imageWithCGImage:cgImage];
//Don't forget to clean up:
CGImageRelease(cgImage);
CGColorSpaceRelease(colorSpace);
CGContextRelease(context); 
```

# python - 使用 gdata python api 更新电子表格

> ID：12868749
> 
> 赞同：0
> 
> 时间：2012-10-13T00:13:47.320
> 
> 标签：python, gdata, google-spreadsheet-api

首先阅读最后的更新这是我的代码：

```
spreadsheet_key = "0AhBYO002ygGgdDZQTW5pTVhLdjM4NlhHbXJ1cVRCd3c"
worksheet_id = "od6"
spr_client = gdata.spreadsheet.service.SpreadsheetsService()
spr_client.email = 'myemail@gmail.com'
spr_client.password = '<pwd>'
spr_client.source = 'Example Spreadsheet Writing Application'
spr_client.ProgrammaticLogin()

dicti = {}
dicti['Name'] = 'A'
dicti['Metric Name'] = 'A2' 
dicti['Completed Units'] = 10
dicti['Team Size'] = 2
entry = spr_client.InsertRow(dicti, spreadsheet_key, worksheet_id) 
```

每次我运行此代码时，最后一次都会出现此错误：

```
'int' object has no attribute 'decode' 
```

请告诉我应该如何进行...

这是 InsertRow 函数中出现错误的地方：

```
/usr/local/lib/python2.7/site-packages/gdata/spreadsheet/service.py in InsertRow
      new_custom.column = k
      new_custom.text = v
      new_entry.custom[new_custom.column] = new_custom
    # Generate the post URL for the worksheet which will receive the new entry.
    post_url = 'https://spreadsheets.google.com/feeds/list/%s/%s/private/full'%(
        key, wksht_id) 
    return self.Post(new_entry, post_url, 
        converter=gdata.spreadsheet.SpreadsheetsListFromString) 
```

**更新：**将此代码修复为：

```
dicti = {}
dicti['Name'] = 'A'
dicti['Metric Name'] = 'A2' 
dicti['Completed Units'] = '10'
dicti['Team Size'] = '2' 
```

我现在收到此错误：

```
{'status': 400, 'body': 'Attribute name &quot;Name&quot; associated with an element type &quot;ns1:Metric&quot; must be followed by the &#39; = &#39; character.', 'reason': 'Bad Request'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:16:39.477

使用 gdata API 时需要写入字符串值，因此您的“团队规模”和“已完成单位”变量将导致错误，除非将它们转换为字符串。此外，您应该注意，API 引用的列名不保留您的大小写等（您的`Metric Name`列需要称为`metricname`）。因此，您还必须更改它们在字典中的显示方式（请注意，这假设您的列标题已经存在，因为 API 需要知道如何编写字典）：

```
dicti = {}
dicti['name'] = 'A'
dicti['metricname'] = 'A2' 
dicti['completedunits'] = '10'
dicti['teamsize'] = '2'
entry = spr_client.InsertRow(dict, spreadsheet_key, worksheet_id) 
```

顺便说一句（因为这让我有点困惑），在使用`CellQuery`对象并声明范围的`max`and`min`值时也是如此。希望这有助于避免一些混乱:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:12:16.573

您只需要在您的：

```
Spreadsheet('name','metricname','completedunits','teamsize') 
```

[你可以在这里](https://code.google.com/p/gdata-python-client/issues/detail?id=481&colspec=Opened%20Stars%20ID%20Type%20Status%20Priority%20Component%20Summary)阅读更多关于它的信息。

# web-services - 程序化网络搜索的建议

> ID：12868753
> 
> 赞同：1
> 
> 时间：2012-10-13T00:13:55.960
> 
> 标签：web-services, search, bing, web-search

我正在开发一个需要将 URL 与基于关键字的数据相关联的系统。我希望我可以使用网络服务来自动执行基于关键字或标签的全网络搜索，并且结果将采用像 JSON 这样的机器友好格式。

我的第一个想法是谷歌，他们的谷歌自定义搜索服务看起来很不错，并且已经在测试中证明了自己。它有一个简单的类似 REST 的 URL，并以 JSON 格式返回结果。唯一的问题是它每天有 100 个查询的限制。我需要更多像 1000。他们更高配额的付费选项（谷歌网站搜索）不允许全网搜索，所以对我来说没用。

当然，其他人以前也想做程序化网络搜索。Google 是否提供另一种我们可以使用的 B2B 搜索服务？我们很乐意按查询付费、签署协议等。我担心我在 Google 网站上的位置不正确。

当我写这个问题时，我发现了微软的[必应网络服务](http://www.bing.com/developers/)主页。乍一看，它看起来还不错。我对谷歌有一点偏好，但对微软持开放态度。我很想听听有关使用 Microsoft API 的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:30:41.927

谷歌自定义搜索提供了“为 >100 次查询付费”选项，我相信：

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview) （请参阅底部的“付费使用”部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:56:42.150

@Sync 找到了正确的方法，我相信我现在明白了问题所在：Google 有*两个*用于自定义搜索的控制面板，而您无法从另一个控制面板访问其中一个。

我是我的 Google 自定义搜索引擎 (www.google.com/cse/panel) 的小组成员，这让我可以控制搜索引擎的低级方面，唯一的付费选项是转换为 Google Site Search，但这样做我会失去我的全网搜索能力。

Google 的所有 API (code.google.com/apis/console) 还有另一个更高级别的控制面板，其中自定义搜索是其中的一个组件。从这里开始，设置计费以获得更大的配额显然是相关的。

抱歉，我没有提供正确的链接，因为相关页面需要登录才能访问。虽然我认为这个答案是我的问题的权威答案，但我给@sync 打了绿色复选标记，如果没有他的帮助，我将无法弄清楚。不过，我仍然希望看到一些关于 Bing 的 API 的评论！

# google-chrome - 当用户在不同的网络上时Webrtc没有视频

> ID：12868754
> 
> 赞同：2
> 
> 时间：2012-10-13T00:14:01.107
> 
> 标签：google-chrome, signalr, webrtc

所以我建立了一个网站。带有一个 clienta 页面和一个 clientb 页面。

这基本上是该站点的拆分版本： [https ://webrtc-demos.appspot.com/html/pc2.html](https://webrtc-demos.appspot.com/html/pc2.html)

我正在使用信号器（websockets）在客户端之间交换信息。

**当用户在同一台​​计算机上同时打开 cleinta 和 b 时，它工作正常。**

**当用户在一台计算机上打开 clienta 并在另一台计算机上打开 clientb 但两台计算机都在同一网络上时，它工作正常。**

**当用户在一台计算机上打开 clienta 并在另一台计算机上打开 clientb 但在不同的网络上时，没有视频或音频。**

当冰信息被交换时，我传回一个数字，所以我知道它发送的顺序。在另一端，它们并不总是以相同的顺序到达，但音频#1 总是在音频#2 之前到达那里。和视频一样。

在所有情况下，我都使用 chrome dev 24。

我意识到顺序和时间是 webrtc 的一切。我只是不明白它如何在同一网络上的不同电脑上工作，而不是在不同的网络上工作。我应该指出，当我说相同的网络时，我在工作中使用 2 台电脑和在家中使用 2 台电脑进行测试。所以我不认为它是防火墙的事情。

有任何想法吗？

我确实查看了[https://apprtc.appspot.com/](https://apprtc.appspot.com/)，因为它是一个稍微相关的链接。这导致我添加了几个设置超时，尽管它们似乎没有帮助。

最后一件事，我确实提到了冰信息。我还应该注意，双方都发送和接收所有消息。创建报价并创建答案。因此，它在相同的网络机器上工作。

**更新：**

我根据 webrtc.org 使用 jsep 和所有最新语法

**2012 年 11 月 15 日更新：**

那么是否有用于创建媒体中继的开源包？

特别是.net，但可能是 php。当前站点是面向公众的，这就是我能够在多个网络上进行测试的方式。所以看起来我只需要另一个媒体中继端点。

**2012 年 11 月 16 日更新：**

希望我能让它工作或从其他开发人员那里获得有价值的输入，我将我的代码放在 github 上。

[https://github.com/thorst/RTC](https://github.com/thorst/RTC)

**2012 年 11 月 21 日更新**

该代码现在适用于除不同网络连接之外的所有内容。（如本文所述）

**2013 年 5 月 28 日更新**

今年 google io 在解释转弯、眩晕和冰方面要好得多。

[http://www.youtube.com/watch?feature=player_embedded&v=p2HzZkd2A40](http://www.youtube.com/watch?feature=player_embedded&v=p2HzZkd2A40)

供参考，这里是帮助我入门的老年人

[http://www.youtube.com/watch?v=E8C8ouiXHHk](http://www.youtube.com/watch?v=E8C8ouiXHHk)

[http://www.youtube.com/watch?v=dAhhniqwkp8](http://www.youtube.com/watch?v=dAhhniqwkp8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:51:15.150

Chrome 还没有实现 TURN。STUN 仅对某些类型的 NAT 有帮助，但对家庭路由器中流行的对称 NAT 没有帮助。您需要一个具有公共 IP 的媒体中继来连接对称 NAT 后面的两个设备，其标准是 TURN [https://www.rfc-editor.org/rfc/rfc5766](https://www.rfc-editor.org/rfc/rfc5766)。

# multithreading - Windows .net 线程 - 它可以饿很长时间吗？

> ID：12868755
> 
> 赞同：1
> 
> 时间：2012-10-13T00:14:13.750
> 
> 标签：multithreading

.net 中的线程是否可能被长时间阻塞超过 10 秒？还是 .net 或 Windows 在线程之间切换以确保它们被执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:33:50.643

如果线程调用阻塞操作，例如等待事件触发，它可能会被阻塞很长时间：

```
 evt.WaitOne(); 
```

或尝试访问关键部分：

```
 lock( _myLockObject )
  {
     // ...
  } 
```

在这些情况下，您的线程已经放弃了控制权，并且处理器致力于让其他线程运行。

但也许你在问一个线程是否可以被饿死？在所有正常情况下，答案都是“不”——操作系统确保所有线程都获得处理器的一部分。如果一个非常高优先级的线程在循环中搅动，可能会有一个例外，但即使这样，操作系统也不应该完全饿死其他线程。

如果您看到一个线程在很长的时间间隔（如 10 秒）内没有取得进展，那么可能是其他问题。它可能正在执行隐式阻塞（甚至可能是死锁）的操作，或者它可能在创建后从未真正开始。

# javascript - Javascript拆分、推送和加入

> ID：12868756
> 
> 赞同：0
> 
> 时间：2012-10-13T00:14:52.893
> 
> 标签：javascript, join, split, push

为什么`|`调用join方法时没有添加

```
 var array ="12|23|435|566|46|6|666766|24";
    var arraySplit = array.split("|");
    var newArray = [];
    for (i=0; i<arraySplit.length; i++)
    {
        if (arraySplit[i] < 500)
        {
            newArray.push(arraySplit[i]);
        }
    }
    newArray.join("|");
    alert(newArray); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T00:17:35.383

`newArray.join`不修改现有数组。它返回所有数组当前值的新字符串，由您指定的字符串连接。使用以下内容将生成的数组存储在新变量中：

```
var joinedArray = newArray.join("|");
alert(joinedArray); 
```

**演示：http:** [//jsfiddle.net/EH8dB/](http://jsfiddle.net/EH8dB/)

* * *

**参考：**

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:17:36.973

您没有修改 newArray，因为 join() 返回一个新对象。

# jquery - Safari 和 Opera 上基于 jquery 的幻灯片插件问题

> ID：12868768
> 
> 赞同：0
> 
> 时间：2012-10-13T00:16:17.227
> 
> 标签：jquery, css, safari, slideshow, opera

我正在使用一个非常好的基于 jquery 的 css3 动画/过渡插件，名为[Sequence.js](http://www.sequencejs.com/)，并且我将它用于简单的响应式淡入淡出幻灯片放映。

使用 chrome/firefox 一切都按预期正常运行，但在**歌剧**中整个事情都卡住了，在**safari**中发生了一些非常奇怪的事情：
动画以帧淡入开始，在它消失后不久，大约 5 秒后（插件开始下一帧动画的时间）帧重新出现以开始淡出，随后的帧淡入，然后整个事物再次消失，一遍又一遍。

我真的不知道发生了什么，这是一个与工作[http://bit.ly/SQV3Xl的链接](http://bit.ly/SQV3Xl)

如何将其修复为像在 chrome/firefox 中一样工作，甚至可以在后备中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:00:11.713

好的，在 safari 中修补检查员，似乎他不喜欢没有`height`指定容器元素`#sequence`，但我真的不明白为什么。奇怪的是，opera 似乎也很欣赏`height`CSS 中的规定：现在当脚本加载时，有时可以工作，有时不能，我仍然无法真正理解为什么所有这些混乱..

我将关闭该问题，因为这是“已修复”，但我真的很想知道**为什么**会这样。有人可以对此有所了解吗？

# parsing - 静态类型与动态类型是否与使 IDE 更难编写有关？

> ID：12868772
> 
> 赞同：4
> 
> 时间：2012-10-13T00:16:58.810
> 
> 标签：parsing, dynamic, types, static, language-design

编辑：澄清一下，我并不打算建议为动态语言编写 IDE 可能是不可能的。/编辑

根据我的具体经验，我正在考虑多年来关于 JavaScript 的对话/评论，其中许多都在堆栈上，但时不时有人说，JS 没有像样的 IDE 的原因是因为动态类型也能做到难做。

我在为 JS 编写解析器方面考虑过这一点，但我不明白这些类型与自动完成或直接进入东西的定义等特性有什么关系。如果有的话，我可以想象通过动态语言中传递的参数的范围和可用性在没有类型检查问题的情况下更容易建立。尤其是在大多数情况下规则实际上非常简单的 JS 中。

在我开始听到人们将动态类型视为技术阻塞问题之前，我只是假设在大多数动态脚本语言中，您可以从控制台运行，减少冗长并且在实时执行环境中易于测试使调试更容易，从而减少对 IDE 的需求。

那么它是哪一个？关于静态类型的一些东西可以更容易地解析代码以建立范围/可用性，或者我对减少需求是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T00:31:56.427

IDE 是用动态语言发明的。重构是在动态语言中发明的。自动重构工具是用动态语言发明的。

当静态语言甚至没有图形时，动态语言具有图形 IDE，内置支持通过网络进行结对编程。或IDE。或网络支持。

例如，Smalltalk 和 Lisp IDE 仍然领先于 Java 或 C#。事实上，Eclipse*曾经是*一个 Smalltalk IDE！

IDE 的质量取决于花费了多少努力使它变得更好。Smalltalk 和 Lisp 社区花费了数十年的研究、数十名博士和大量资金来构建强大的 IDE。Java 社区也是如此。（实际上，他们花了一大笔钱购买 Smalltalk 公司……）

JavaScript 社区没有。这就是全部的区别。

有些事情需要在两者之间采用不同的方法。以 IntelliSense / Content Assist / Autocompletion 为例。在动态语言中静态尝试确定哪些标识符在范围内基本上等同于解决停机问题，因此您不能这样做。您的 IDE 也需要是动态的，然后它不需要进行静态分析，它可以只查看正在运行的代码并*查看*范围内的标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:32:47.027

Smalltalk 是一种动态语言，并且拥有最早的基于图形的 IDE 之一，包括对重构的支持。还可以查看 Jetbrain 的 RubyMine，了解用于动态语言的更现代 IDE 的示例。

这并非不可能。这更困难......但同样为开发人员编写工具也是如此。

# microsoft-metro - 当文件位于嵌套文件夹中时，是否可以从 Metro Apps 轻松读取/写入文件系统

> ID：12868781
> 
> 赞同：3
> 
> 时间：2012-10-13T00:18:13.990
> 
> 标签：microsoft-metro, windows-runtime

我正在开发一个将一些文件下载到本地存储以进行缓存的应用程序。在线文件有时位于 3 或 4 个嵌套文件夹中，我也想将此层次结构保留在我的缓存文件夹中。

`(await (await folder.GetFolderAsync("dir1")).GetFolderAsync("dir2))`除了不得不等等之外，没有简单的方法吗？现在它用`dir1`and硬编码`dir2`。

当文件路径是类似的字符串时，最简单的方法是`"MyFolder/OtherFolder/lastFolder/file.xml"`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:55:24.707

静态成员函数[`StorageFolder::GetFolderFromPathAsync`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.storagefolder.getfolderfrompathasync)可用于获取`StorageFolder`给定路径的文件夹的对象。

# text - 分隔符 - 如何删除最后 3 个文本项

> ID：12868789
> 
> 赞同：0
> 
> 时间：2012-10-13T00:19:36.487
> 
> 标签：text, applescript, delimiter

## AppleScript 分隔符

### 如何删除最后 3 个文本项？

我的清单如下：

```
{"Water", "Management", "in", "Ancient", "Greek", "Cities", "Jun", "1993", "pdf"} 
```

我想删除最后 3 个文本项（例如：）`"Jun, "1993", and "pdf"`。

到目前为止，这是我的脚本：

```
set AppleScript's text item delimiters to ["USA."]
set stringToUse to "04.Oxford.University.Press.USA.Water.Mngt.in.Ancient.Greek.Cities.Jun.1993.pdf" as string
set stringUSA to last text item of stringToUse
set AppleScript's text item delimiters to ["."]
set pathNames to text item of stringUSA
return pathNames 
```

作为一般规则，重要的是：

1.  列表中文本项的数量可以是变量
2.  要删除的文本项始终是最后三个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:22:48.417

尝试：

```
set AppleScript's text item delimiters to "USA."
set stringToUse to "04.Oxford.University.Press.USA.Water.Mngt.in.Ancient.Greek.Cities.Jun.1993.pdf" as string
set stringUSA to last text item of stringToUse
set AppleScript's text item delimiters to "."
set pathNames to text items 1 thru -4 of stringUSA
set AppleScript's text item delimiters to {""}
return pathNames 
```

# python - 有没有将python程序拆分为独立模块的好方法？

> ID：12868795
> 
> 赞同：1
> 
> 时间：2012-10-13T00:20:48.217
> 
> 标签：python, multithreading, error-handling, automation

我正在尝试使用 python 进行一些机械自动化，但我遇到了问题。

我有执行实际控制的代码、记录代码、提供 GUI 的代码以及其他一些模块，它们都是从单个脚本调用的。

问题是一个模块中的错误会停止所有其他模块。因此，例如 GUI 中的错误会杀死控制系统。

我希望能够让模块独立运行，这样就可以在不停止其他模块的情况下崩溃、重新启动、修补等。

我能找到的唯一方法是将变量存储在 SQL 数据库或文件或其他东西中。

有没有办法让一个 python 脚本对另一个 ..debug 脚本进行排序？以便一个脚本可以读取或更改另一个脚本中的变量？我找不到一种方法可以让脚本独立启动和停止。

有没有人有任何想法或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:31:42.187

一个相当有效的方法是使用消息传递。您的每个模块都是独立的，但它们可以相互发送和接收消息。关于在 Python 中实现这一点的许多方法的一个很好的参考是 Python wiki page for [parallel processing](http://wiki.python.org/moin/ParallelProcessing)。

## 通用策略

将您的程序拆分为有服务器和客户端的部分。然后，您可以使用 0MQ、Apache ActiveMQ 或 RabbitMQ 等中间件在系统的不同部分之间发送数据。

在这种情况下，您的 GUI 可以向日志解析器服务器发送一条消息，告诉它开始工作。完成后，日志解析器将向任何有兴趣的人发送广播消息，告诉世界对结果的引用。GUI 可以是日志解析器订阅的频道的订阅者。收到消息后，它将打开结果文件并显示用户感兴趣的任何内容。

序列化和反序列化速度也很重要。您希望最大限度地减少通信开销。Google Protocol Buffers 和 Apache Thrift 是这里的有效工具。

您还需要某种形式的监督策略，以防止其中一台服务器发生故障而阻塞所有内容。supervisord 将为您重新启动事物，并且非常容易配置。同样，它只是这个领域的众多选择之一。

## 过度杀伤力？

听起来您已经创建了一个简单的实用程序。多处理模块是让程序的不同部分独立运行的绝佳方式。您仍然采用相同的策略（消息传递、不共享共享状态、监督），但采用不同的策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:38:23.897

您想要多个独立的进程，并且您希望它们相互交谈。因此：阅读您的操作系统上可用的进程间通信方法。我推荐套接字（通用，将在 an/w 和 diff 操作系统上工作）。您可以轻松地在 TCP 之上发明一个简单的（可能类似于 http）协议，可能使用[json](http://www.json.org/)来发送消息。Python 发行版附带了一堆类来简化它（SocketServer.ThreadingMixIn、SocketServer.TCPServer 等）。

# ruby-on-rails - Rspec 内容与文本

> ID：12868796
> 
> 赞同：2
> 
> 时间：2012-10-13T00:20:49.387
> 
> 标签：ruby-on-rails, rspec, capybara

我遇到过几个例子，人们用 来测试 html 元素的内容`page.should have_selector "title", content: "my awsome content"`，但这似乎总是通过。正确的调用似乎是`page.should have_selector "title", text: "my awsome content"`（注意`text:`而不是`content:`）。

`content:`这个 Rspec 调用 中的选择器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:21:54.333

简短的回答：

`have_selector`不支持`:content`选项。

长答案：

Rspec 创建将调用转换为的动态方法`[].should be_empty`，`[].empty?.should == true`在您的情况下，`page.should have_selector "title", content: "my awesome content"`转换为`page.has_selector?("title, content: "my awesome content").should == true`.

Capybara提供了[has_selector？](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/matchers.rb#L34-L38)方法，它基本上只是将其参数传递给其`test/unit`样式断言[assert_selector](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/matchers.rb#L83-L89)：

```
def has_selector?(*args)
  assert_selector(*args)
rescue Capybara::ExpectationNotMet
  return false
end 
```

`assert_selector`然后再次将其参数传递给 Capybara finder 方法，如果找到任何匹配项则`all()`返回，`true`如果没有则引发异常（`has_selector?`捕获然后返回`false`）。

```
def assert_selector(*args)
  synchronize do
    result = all(*args)
    result.matches_count? or raise Capybara::ExpectationNotMet, result.failure_message
  end
  return true
end 
```

该`all`方法返回与查询匹配的所有结果。[在这里](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/finders.rb#L102-119)，我们可以找到有关可接受选项的文档：

```
# @overload all([kind], locator, options)
#   @param [:css, :xpath] kind                 The type of selector
#   @param [String] locator                    The selector
#   @option options [String, Regexp] text      Only find elements which contain this text or match this regexp
#   @option options [Boolean] visible          Only find elements that are visible on the page. Setting this to false
#                                              (the default, unless Capybara.ignore_hidden_elements = true), finds
#                                              invisible _and_ visible elements.
# @return [Array[Capybara::Element]]           The found elements 
```

我们可以看到它`content`没有被列为有效选项，因此被忽略了。

# php - CSS 样式不适用于 php 函数。（WordPress）

> ID：12868802
> 
> 赞同：2
> 
> 时间：2012-10-13T00:21:57.877
> 
> 标签：php, css, wordpress, function

我无法让 CSS 样式处理从 wordpress php 函数返回的内容：

```
<span id="featured-excerpt"><?php the_excerpt(); ?></span> 
```

CSS 样式适用于摘录 php 之前或之后的任何内容，但摘录本身拒绝设置样式。我似乎取得任何成功的唯一方法是我尝试将 php 放在 span 标签内，这似乎不太正确，并在 php 输出之后创建一个新的单空格空白行......

```
<span id="featured-excerpt" <?php the_excerpt(); ?></span> 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:34:53.280

在这种情况下......刚刚看了看：[http ://codex.wordpress.org/Function_Reference/the_excerpt](http://codex.wordpress.org/Function_Reference/the_excerpt)

完全有效：

```
<span id="featured-excerpt"><?php the_excerpt(); ?></span> 
```

或者

```
<div id="featured-excerpt"><?php the_excerpt(); ?></div> 
```

**编辑（并给出评论）：**

尝试删除 php 函数并渲染文本，这样我们就会知道这是样式问题还是函数问题：

```
<span id="featured-excerpt">Lord help us!</span> 
```

它是如何显示的？它是否显示在您的 HTML 输出中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T19:15:00.447

the_excerpt 函数与段落标签一起返回。最好的简单解决方案是调用 the_content 函数而不是 the_excerpt

the_content 提供您在内容框中添加的所有 CSS。

# javascript - node.js：while 循环回调未按预期工作

> ID：12868804
> 
> 赞同：9
> 
> 时间：2012-10-13T00:22:08.717
> 
> 标签：javascript, node.js, loops, callback, while-loop

知道当 Node.js 异步工作时，编写如下内容：

```
function sleep() {
    var stop = new Date().getTime();
    while(new Date().getTime < stop + 15000) {
        ;
    }
}

sleep();
console.log("done"); 
```

...将调用 sleep()，在 while 循环期间（15 秒）阻塞服务器，然后将“完成”打印到控制台。据我了解，这是因为 Node.js 只允许 JavaScript 访问主线程，因此这个小子会停止进一步的执行。

所以我理解解决方案是使用回调：

```
function sleep(callback) {
    var stop = new Date().getTime();
    while(new Date().getTime() < stop + 15000) {
        ;
    }
    callback();
}

sleep(function() {
    console.log("done sleeping");
});

console.log("DONE"); 
```

所以我认为这会在 15 秒后打印“完成”。'完成睡眠'，因为 sleep() 函数被调用并被传递一个指向回调函数的指针。当这个函数工作时（while循环），最后一行将被执行（打印'done'）。15 秒后，当 sleep() 函数完成时，它调用给定的回调函数，然后打印“完成睡眠”。

显然我在这里理解了一些错误，因为上述两种方式都阻塞了。有人可以澄清一下吗？

提前致谢， 斯拉格乔约科

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T00:34:23.130

Javascript 和 node.js 是单线程的，这意味着一个简单的`while`块；`while`在块完成之前，不能处理任何请求/事件。回调并不能神奇地解决这个问题，它们只是帮助将自定义代码传递给函数。相反，迭代 using `process.nextTick`，这将为您提供基本相同的结果，但也为要处理的请求和事件留出空间，即它不会阻塞：

```
function doSleep(callback) {
    var stop = new Date().getTime();

    process.nextTick(function() {
        if(new Date().getTime() < stop + 15000) {
            //Done, run callback
            if(typeof callback == "function") {
                callback();
            }
        } else {
            //Not done, keep looping
            process.nextTick(arguments.callee);
        }
    });
}

doSleep(function() {
    console.log("done sleeping");
    console.log("DONE");
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-13T00:26:51.767

您`sleep`立即调用，新`sleep`功能块。它不断迭代，直到满足条件。您应该使用`setTimeout()`以避免阻塞：

```
setTimeout(function () {
    console.log('done sleeping');
}, 15000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T00:26:35.000

回调与异步不同，它们只是在您想从异步操作中获取...回调时很有帮助。在您的情况下，该方法仍然同步执行；Node 不只是神奇地检测到有回调和长时间运行的操作，并使其提前返回。

*真正的*解决方案是在另一个线程上使用`setTimeout`而不是繁忙的循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T00:33:24.097

如前所述，异步执行应该通过 setTimeout() 而不是 while 来实现，因为 while 将冻结在一个“执行帧”中。

此外，您的示例中似乎存在语法错误。

这个工作正常：http: [//jsfiddle.net/6TP76/](http://jsfiddle.net/6TP76/)

# c++ - 如何在 Cygwin 和 MinGW 中判断 C++ 库路径

> ID：12868808
> 
> 赞同：5
> 
> 时间：2012-10-13T00:23:42.630
> 
> 标签：c++, compiler-construction, cygwin, mingw

我在 Windows XP 上使用 Cygwin 安装开发 C++ 程序。

我还安装了 MinGW，因为我想使用它的 g++ 版本，而不是 Cygwin 附带的版本。

那部分似乎设置正确。当我开始 Cygwin 会话时，我看到：

> $哪个g++
> /cygdrive/c/MinGW/bin/g++

这是正确的，g++ 指向我的 MinGW 安装。

我不明白的是，当我编写包含库代码的代码（例如，来自`Winsock/BerkleySockets API 的头文件）时，我如何知道编译器在哪里找到该头文件？

例如，如果我`#include "winsock.h"`的代码中有，编译器在哪里找到那个头文件？

如果我在我的计算机上对 winsock.h 进行一般搜索，我会得到：

> C:\MinGW\include
> C:\cygwin\usr\include\w32api

两者都有一个 winsock.h 的副本（尽管它们的文件大小不完全相同，因此它们不能相同）。

谢谢您的帮助。

我还应该指出，`C:\MinGW\bin`在我的 Windows PATH 环境变量中，以及`/etc/profile file`在 Cygwin 中配置的相同路径。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T00:42:18.160

我猜为**MingW编译的 g++ 具有与标准****g++**相同的命令行参数。查看[g++ 手册页](http://linux.die.net/man/1/g++)。

要将包含路径添加到您的编译中，请使用该`-I`标志。

```
g++ -I/include/path/here -I/another/include/path -o prog src.cpp 
```

要将库路径添加到您的链接，请使用该`-L`标志。

```
g++ -L/lib/path/here -L/another/lib/path -o prog src.cpp 
```

[MingW 站点](http://www.mingw.org/wiki/IncludePathHOWTO)解释了包含文件搜索如何在MingW 上工作，以及如何修改它。

该网站还说，如果您想在编译期间查看包含文件搜索，请将**详细**标志 ( `-v`) 传递给编译器。

```
g++ -v -o prog src.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:31:37.037

我相信它指的是 MinGW/include 中的那个。查看[Minigw 文档以了解包含路径](http://www.mingw.org/wiki/IncludePathHOWTO)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:02:50.847

如果您使用的是 eclipse 环境，您可以在项目设置中指定包含路径，同时指定您选择的编译器，即在您的情况下为 mingw。如果您仍有问题，请告诉我们。

# jquery - 设置稍后在点击事件期间调用的函数

> ID：12868809
> 
> 赞同：0
> 
> 时间：2012-10-13T00:24:11.177
> 
> 标签：jquery, function, animation

我有一个动画功能，每次单击一堆按钮时都会发生，它们都会发生特定的事情，但动画每次都会发生。现在我已经设置好了，所以它是点击的一部分，所以我每次都重新定义，我如何设置一次，然后为每个按钮说点击时运行该功能？

现在它是这样设置的：

```
$("#animation1").click(function() {
$("#clinic_850_CONTAINER").animate({
    height: box_TOTAL_ht + 20
}, 300);

$("#staff_850_CONTAINER").animate({
    marginTop: staff_850_CONTAINER_ht * -1
}, 300);

$("#profile_850_HEADER").delay(160).animate({
    top: 10
}, 270);
$("#profile_850_BIO").delay(330).animate({
    top: profile_850_HEADER_ht + 20
}, 400);
$("#profile_850_EDU").delay(450).animate({
    top: profile_850_HEADER_ht + profile_850_BIO_ht + 20
}, 400);
$("#profile_850_CONTACT").delay(570).animate({
    top: profile_850_HEADER_ht + profile_850_BIO_ht + profile_850_EDU_ht + 20
}, 400);

}); 
```

像这样设置它在页面加载时运行，你如何防止它运行直到点击发生但保持它们分开

```
function profile_850_close_animation() {
$("#staff_850_CONTAINER").animate({
    marginTop: 0
}, 300);

$("#clinic_850_CONTAINER").animate({
    height: staff_850_CONTAINER_ht
}, 300);

$("#profile_850_HEADER").animate({
    top: box_TOTAL_ht + 20
}, 300);
$("#profile_850_BIO").animate({
    top: box_TOTAL_ht + 50
}, 450);
$("#profile_850_EDU").animate({
    top: box_TOTAL_ht + 60
}, 450);
$("#profile_850_CONTACT").animate({
    top: box_TOTAL_ht + 70
}, 450);  
}

$("#profile_850_CLOSE").click(profile_850_open_animation()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:38:06.540

这两种方法都可以：

```
$("#animation1, #animation2, #animation3").click(function() {
    // existing code
}); 
```

或者

```
function animate() {
    //existing code
}
$("#animation1").click(animate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:34:40.397

设置要应用这些的类。我需要查看 html 结构以更好地优化您的点击处理程序和动画，但您可以指定相对于动画点击，或者检查 id 以确定要动画的其他元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T00:31:44.123

```
function animation() {
// Animation code goes here
}

$("#animation1").click(animation); 
```

此外，您可以使用 jquery 选择器来选择所有按钮并立即分配它们的 onclick 事件。例如，如果所有动画按钮都是类按钮

```
$(".animation").click(animation); 
```

# html - HTML/CSS：图像/div 没有出现在 Mozilla 中，但出现在 IE 中？

> ID：12868812
> 
> 赞同：1
> 
> 时间：2012-10-13T00:24:55.080
> 
> 标签：html, css

无法弄清楚为什么仅在 IE 中显示 div 容器时图像没有出现 Mozilla。有人知道任何解决方案吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Featured</title>
</head> 
<body>
<!--#include virtual="/header.html" -->
<!--#include virtual="/alpha.html" -->
<div id="WhiteBody">
    <center>
        <p class="HeaderFont">FEATURED</p>
    </center>
    <div style=background-color:#D9BA26; height:480px; width:320px; >
        <img src="images/Magic Hat #9.jpg" style=width:100%;height:100%; />
    </div>
</div>
<!--#include virtual="/alpha.html" -->
<!--#include virtual="/footer.html" -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:27:01.787

您需要在 CSS 属性周围加上引号

```
<div id="WhiteBody">
    <center>
        <p class="HeaderFont">FEATURED</p>
    </center>
    <div style="background-color:#D9BA26; height:480px; width:320px;" >
        <img src="images/Magic Hat #9.jpg" style="width:100%;height:100%;" />
    </div>
</div> 
```

并尽量避免在图像名称中使用空格和特殊字符 - 让它`Magic_Hat_9.jpg`

# linux - [[ -s 在 linux shell 中是什么意思

> ID：12868820
> 
> 赞同：3
> 
> 时间：2012-10-13T00:27:04.560
> 
> 标签：linux, shell

我找到了这个命令。我了解源重新加载了 bash 配置文件并修复了 Ubuntu 所需的 Ruby 权限。但是 && 之前的部分是什么意思？

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:35:15.923

让我们分解一下：

`[[`和`]]`启用了更类似于传统编程语言的高级功能，允许使用像代替`||`和`-o`代替`&&`的结构`-a`。

有关这方面的更多信息，请参阅[如何使用双括号或单括号、括号、花括号，](https://stackoverflow.com/questions/2188199/bash-double-or-single-bracket-parentheses-curly-braces)但据我所知`-s`不需要额外的功能，双括号可以用单括号替换）

测试文件是否`-s`存在且非空

`&&`只要左边的命令执行没有错误返回码，就会自动运行右边的命令。

因此，该语句测试文件是否存在且非空，如果是，它将源它到当前的 shell 环境中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:28:53.137

[[ ... ]] 部分允许使用运算符测试条件。把它想象成一个 if 语句。在您的示例中，您使用的是 -s 运算符，它测试引用的文件是否为空。

因此，本质上，如果 rvm 文件不为空，您发布的命令将获取该文件的来源

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T00:31:55.593

`[[`是bash内置的测试功能。`-s`如果以下文件的大小大于零，则返回 true。请参阅[man bash（条件构造）](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)。向下滚动一点到`[[...]]`

# angularjs - 捕捉 $resource.ready 事件

> ID：12868824
> 
> 赞同：0
> 
> 时间：2012-10-13T00:27:33.500
> 
> 标签：angularjs

我在 angularjs 中使用 $resource 服务从服务器异步加载 json 内容。加载内容时，我会在页面上显示一个 gif 加载器。我需要知道异步请求何时完成，以便删除加载程序。我怎样才能捕捉到准备好的事件，以便我可以删除装载机？

```
function PlaylistController($scope, $route, $http, Song,Artists,Albums,Drive,Children){
    function render(){
        $scope.songs = Song.list()

        //Obviously this removes the loading class immediately
        //I want to remove it when Song.list() is complete
        $('body').removeClass('loading');
    }

    $scope.$on("$routeChangeSuccess", function($currentRoute, $previousRoute){
    //When the route changes,update the $scope variables
    render();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:09:14.723

您不应该在控制器内部进行 DOM 操作。

`$scope.loading = true`和怎么样`<body ng-class="loading && 'loading'">`？

当您设置`$scope.loading`为 true 时，`loading`该类将被添加到正文中，当设置为 false 时，它​​将被删除。

如果您需要从子控制器更改它，请将其放在对象（如`$scope.data.loading = true`）中或创建函数来更改它，如`$scope.startLoading = function(){ $scope.loading = true; }`

# asp.net - Asp.net Session Url Asp.net Page.IsPostBack getuserinfo 错误

> ID：12868826
> 
> 赞同：0
> 
> 时间：2012-10-13T00:27:40.793
> 
> 标签：asp.net, sql-server, url, session, login

好的，其他错误现在已修复，此时我的其他页面需要更新其代码：

错误：对象引用未设置为对象的实例。

```
 public partial class Controls_GetUserScraps : System.Web.UI.UserControl

{

DataBaseClass dbClass = new DataBaseClass();
public DataTable dt;

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {

        GetUserScraps(int.Parse(Session["UserId"].ToString()));
    }
}
public void GetUserScraps(int Id)
{
    string getUserScraps = "SELECT u.Id as UserId,u.FirstName,,u.LastName,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID as ScrapId FROM [User] as u, Scrap as s WHERE u.Id=s.FromId AND s.ToId='" + Request.QueryString["Id"].ToString() + "'";
    dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
    if (dt.Rows.Count > 0)
    {
        GridViewUserScraps.DataSource = dt;
        GridViewUserScraps.DataBind();
    }
} 
```

我将 Session ID 替换为 UserId 并删除了错误，现在它显示了另一个错误。

错误：对象引用未设置为对象的实例。 ![在此处输入图像描述](../Images/b27a1225ad91493ace3310884cbbba4b.png)

```
string getUserScraps = "SELECT u.Id as       UserId,u.FirstName,,u.LastName,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID as ScrapId FROM [User] as u, Scrap as s WHERE u.Id=s.FromId AND s.ToId='" +   Request.QueryString["Id"].ToString() + "'"; 
```

添加您的修复程序创建了这个新错误： ![在此处输入图像描述](../Images/2c4f527bad936e55384845b3c1af5f73.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:37:31.210

我认为最简单的方法是让该`private bool UserAuthenticate`方法采用一个`out`参数，您可以使用该参数从数据库中返回实际的用户名。

```
private bool UserAuthenticate(string UserName, string Password, out string actualUserName) 
{ 
    actualUserName = string.Empty;

    bool boolReturnValue = false; 
    //-------------------------------- 
    //Check UserID From Config File 
    if (UserName == "User" && Password == "Pass") 
    { 
        boolReturnValue = true; 
        return boolReturnValue; 
    }     
    else 
    { 
        //-------------------------------- 
        dt = new DataTable(); 
        string chkUser = "Select * FROM [User] where Email='" + UserName + "' AND Password='" + Password + "'"; 
        dt = dbClass.ConnectDataBaseReturnDT(chkUser); 
        if (dt.Rows.Count > 0) 
        { 
            //TODO: grab the actual user name from the row and assign it to actualUserName. For example:
            actualUserName = dt.Rows[0]["FullName"];

            boolReturnValue = true; 
            Session["UserId"] = dt.Rows[0]["Id"].ToString(); 
            string updateLastLogin = "Update [User] SET LastLogin='" + System.DateTime.Now.ToString() + "' where Id='" + Session["UserId"].ToString() + "'"; 
            dbClass.ConnectDataBaseToInsert(updateLastLogin); 
        } 
        return boolReturnValue; 
    } 
} 
```

之后，您将需要在`OnAuthenticate`方法中执行以下操作：

```
string actualUserName;
Authenticated = UserAuthenticate(ctlLogin.UserName, ctlLogin.Password, out actualUserName); 
```

重定向现在是：

```
Response.Redirect("Home.aspx/" + actualUserName); 
```

# javascript - 从 url 获取 css id

> ID：12868830
> 
> 赞同：0
> 
> 时间：2012-10-13T00:28:10.193
> 
> 标签：javascript, css, url

这可能是一个愚蠢的问题，但有没有办法从 url 中选择 css id？例如在这样的网址中：

```
www.website.com#adiv 
```

使用`#adiv`Javascript/jQuery？

**编辑**

到目前为止我的脚本：

```
$(document).ready(function() {
    var c = window.location.hash;
    $(c).addClass('current');
    $('a').click(function (){
        $('.current').removeClass('current');
        $(this).addClass('current');
    });
}); 
```

html:

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Title</title>
  <link rel="stylesheet" href="style.css">
  <script src="jquery-1.4.2.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
        var c = window.location.hash;
        $(c).addClass('current');
        $('a').click(function () {
            $('.current').removeClass('current');
            $(this).addClass('current');
        });
        $('a[href*=#]').click(function() {
            if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
            && location.hostname == this.hostname) {
                var $target = $(this.hash);
                $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');
                if ($target.length) {
                    var targetOffset = $target.offset().top;
                    $('html,body').animate({scrollTop: targetOffset}, 1000);
                    return false;
                }
            }
        });
    });
    </script>
</head>
<body>
    <nav>
        <a href="#header">First</a>
        <a href="#second">Second</a>
    </nav>
    <section id="header">
        ...
    </section>
    <section id="history">
        ...
    </section>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T00:29:15.527

那将是[`window.location.hash`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)

```
var hash = window.location.hash;
$(hash).addClass(...); 
```

或者直接

```
$(window.location.hash).addClass(...); 
```

# c# - 使用 DropNet 从 Dropbox 下载文件

> ID：12868832
> 
> 赞同：1
> 
> 时间：2012-10-13T00:28:18.760
> 
> 标签：c#, dropbox, dropbox-api, dropnet

我正在尝试下载文件列表，但不确定如何继续。正如主题所说，我正在使用 DropNet，这是我尝试下载文件的过程：

获取我的应用程序专用文件夹中所有文件的列表，并将它们作为字符串存储在列表中。

然后尝试以下操作：

```
foreach (string file in files)
{
    _client.GetFileAsync("/" +file,
        (response) =>
        {
            using(FileStream fs = new FileStream(path +file +".gttmp", FileMode.Create))
            {
                for(int i = 0; i < response.RawBytes.Length; i++)
                {
                    fs.WriteByte(response.RawBytes[i]);
                }
                fs.Seek(0, SeekOrigin.Begin);
                for(int i = 0; i < response.RawBytes.Length; i++)
                {
                    if(response.RawBytes[i] != fs.ReadByte())
                    {
                        MessageBox.Show("Error writing data for " +file);
                        return;
                    }
                }
            }
        },
        (error) =>
        {
            MessageBox.Show("Could not download file " +file, "Error!");
        });
} 
```

不幸的是，它似乎根本不起作用。任何使用 DropNet 的人都可以向我推荐一些可行的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T04:55:32.250

您异步下载文件的代码工作正常，我尝试了以下方式并且它继续没有错误。

```
client.GetFileAsync("/novemberrain.mp3",
                (response) =>
                {
                    using (FileStream fs = new FileStream(@"D:\novemberrain.mp3", FileMode.Create))
                    {
                        for (int i = 0; i < response.RawBytes.Length; i++)
                        {
                            fs.WriteByte(response.RawBytes[i]);
                        }
                    }
                    MessageBox.Show("file downloaded");
                },
                (error) =>
                {
                    MessageBox.Show("error downloading");
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:54:12.193

改为使用同步方法：

```
foreach (string file in files)
{
    var fileBytes = _client.GetFile("/" + file);
    using (FileStream fs = new FileStream(path +file + ".gttmp", FileMode.Create))
    {
        for (int i = 0; i < fileBytes.Length; i++)
        {
            fs.WriteByte(fileBytes[i]);
        }
        fs.Seek(0, SeekOrigin.Begin);
        for (int i = 0; i < fileBytes.Length; i++)
        {
            if (fileBytes[i] != fs.ReadByte())
            {
                MessageBox.Show("Error writing data for " + file);
                break;
            }
        }
    }
} 
```

# c# - 从串口根据格式读取数据包

> ID：12868835
> 
> 赞同：1
> 
> 时间：2012-10-13T00:28:48.847
> 
> 标签：c#, .net, winforms, serial-port, packet-capture

我正在使用根据以下格式将数据发送到 PC 串行端口的微控制器：

```
Start Byte = 0x7E
Data Bytes ...........
StopByte = 0x7E 
```

所以基本上我想在字节数组中读取这些数据包。我正在尝试使用类的`DataReceived`事件来做到这一点`SerialPort`，但它只是失败并且永远不会完全接收到一个好的数据包：

```
private List<int> _readBuffer = new List<int>();

private void Connection_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    var sp = (SerialPort)sender;
    var indata = sp.ReadChar();

    if (indata == 0x7E && _readBuffer.Count == 0)
        _readBuffer.Add(indata);

    if(_readBuffer.Count > 0 && indata != 0x7E)
        _readBuffer.Add(indata);

    if(_readBuffer.Count > 0 && indata == 0x7E)
    {
        _readBuffer.Add(indata);

        //Dump packet to textbox
        Invoke(new EventHandler((o, args) =>
        {
           foreach(var i in _readBuffer)
           {
               tbIn.Text += string.Format("{0:X} ", i);
           }

            _readBuffer = new List<int>(); //Renew the reading buffer array!
        }));
    }
} 
```

我不知道可能是什么问题，我只得到文本框的开始和结束字节，例如：

```
7E 7E 
```

虽然我知道正确的数据包是：

```
7E 0 43 00 FF FF 0 0 7E 
```

期待您的提示/技巧！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:21:40.763

嗯......所以让我们看看那个代码。我添加了一些我在下面引用的评论。

```
var sp = (SerialPort)sender;
var indata = sp.ReadChar();  // A

if (indata == 0x7E && _readBuffer.Count == 0) // B
    _readBuffer.Add(indata);  

if(_readBuffer.Count > 0 && indata != 0x7E) // C
    _readBuffer.Add(indata);

if(_readBuffer.Count > 0 && indata == 0x7E) // D
{
    _readBuffer.Add(indata);

    //Dump packet to textbox
    Invoke(new EventHandler((o, args) =>
    {
       foreach(var i in _readBuffer)
       {
           tbIn.Text += string.Format("{0:X} ", i);
       }

        _readBuffer = new List<int>(); //Renew the reading buffer array!
    }));
} 
```

你打电话给`sp.ReadChar()`“A”

在“B”处，您测试它可能等于 0x7E，并且您有一个空列表，因此您将 7E 添加到列表中。

"C"**不**计算为真，因为 indata 实际上等于 7E

“D”**确实**评估为真，因为 indata 仍然等于 7E，并且您在列表中有 1 个东西。

所以现在 7E 两次出现在列表中。您现在刚刚复制了两次相同的字节。

然后将两个列表项推入文本框... 7E 两次。

你只打过`sp.ReadChar`一次电话。如果要获取该数据，则需要从 SerialPort 读取其余数据。这样做，我想你会找到你正在寻找的所有字节。

# crystal-reports - 水晶交叉表需要限制列数

> ID：12868840
> 
> 赞同：1
> 
> 时间：2012-10-13T00:29:44.603
> 
> 标签：crystal-reports, crosstab

我正在使用 Crystal 交叉表。我的行是实验室结果，我的列是日期。我按降序对日期进行排序，以便首先列出最新日期。我知道我可以使用 TopN 公式将行限制为一定数量的行，但我需要将其限制为一定数量的列，最好是 10。在下面的示例中，我不想在 2011 年 10 月 10 日之后显示任何内容.

```
 10/1/12  9/3/12  7/16/12  5/8/12  4/22/12  3/17/12  1/9/12  12/3/11  11/15/11 10/10/11  9/23/11  8/18/11 7/7/11  6/8/11 
```

钙 8.5 9 9.1 9 8.9 8.9 9 9 9 9 9 9 8.9 9 维生素 D 45 45 51 49 56 50 51 55 60 66 60 59 60 61

任何指导将不胜感激。谢谢吉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:48:00.503

我认为交叉表只能在指定名称的情况下限制列，而日期是不可能的。

我能想到两种可能的解决方法：

1 - 通过查询限制：

转到报告 > 选择专家 > 记录并选择日期字段，单击公式然后添加此公式（适用于 2011 年 10 月 10 日）：

```
{Mytable.DateField} < Date (2011, 10, 10) 
```

或动态日期（超过 1 年）：

```
{Mytable.DateField} < DateAdd ("yyyy", -1, CurrentDate) 
```

2 - 另一个选项是将交叉表创建为标准报告，这意味着日期将是垂直的而不是水平的。您可以按日期将组添加到报告中，然后将每种类型的值添加为摘要，如果您愿意，请告诉我，我可以更详细地解释。

# asp.net - 使用 ExtensionMethods.WebControls 动态绑定到对象列表的 ASP.NET 中继器创建 HtmlTable；

> ID：12868841
> 
> 赞同：0
> 
> 时间：2012-10-13T00:29:58.520
> 
> 标签：asp.net

我正在尝试创建一个转发器控件并以编程方式在 webform 中创建模板。我在[这里找到了](https://stackoverflow.com/questions/11110594/creating-an-htmltable-using-an-asp-net-repeater-dynamically-bound-to-an-object-l) [使用动态绑定到对象列表的 ASP.NET 中继器创建 HtmlTable的帖子](https://stackoverflow.com/questions/11110594/creating-an-htmltable-using-an-asp-net-repeater-dynamically-bound-to-an-object-l)

但它有一个 ExtensionMethods.WebControls 的 using 语句。这似乎有一个名为 RenderHtml 的 GenericHtmlControl 方法。

如何在我的项目中获取 ExtensionMethods.WebControls？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:25:48.433

很可能是该问题的作者自己创建的一些代码。要自己作为扩展方法执行此操作，您可以执行以下操作：

```
public static string RenderControl(this Control control) 
{
    StringBuilder stringBuilder = new StringBuilder();

    using(StringWriter stringWriter = new StringWriter(stringBuilder))
    {
        using(Html32TextWriter htmlWriter = new Html32TextWriter(stringWriter))
        {
            control.RenderControl(htmlWriter);
            return stringBuilder.ToString();
        }
    }
} 
```

参考：[http ://weblogs.asp.net/srkirkland/archive/2007/11/05/dynamically-render-a-web-user-control.aspx](http://weblogs.asp.net/srkirkland/archive/2007/11/05/dynamically-render-a-web-user-control.aspx)

# python - 如何调试在 wxpython/python 线程中崩溃的 wxpython 应用程序

> ID：12868843
> 
> 赞同：0
> 
> 时间：2012-10-13T00:30:40.780
> 
> 标签：python, wxpython

我有一个名为 h2hh 的 wxpython 应用程序。OSX 上的用户反复崩溃并提供了附加的崩溃转储。

我什至不知道从哪里开始调试这个！帮助？我该如何开始？即使是一些可能给我线索的问题，我也会很感激......

谢谢！

[http://gregories.net/images/crashdump.txt](http://gregories.net/images/crashdump.txt)上的完整故障转储

```
Date/Time:       2012-10-13 00:40:50 +0200
OS Version:      10.8.2 (Build 12C60)
Architecture:    x86_64
Report Version:  11

Command:         h2hh
Path:            /Applications/h2hh.app/Contents/MacOS/h2hh
Version:         2.1.4 Beta (2.1.4 Beta)
Parent:          launchd [225]

PID:             31842
Event:           hang
Duration:        1.97s
Steps:           20 (100ms sampling interval)

Hardware model:  MacBookAir3,2
Active cpus:     2
Free pages:      311652 pages (-1327)
Pageins:         16 pages
Pageouts:        0 pages

Process:         h2hh [31842]
Path:            /Applications/h2hh.app/Contents/MacOS/h2hh
Architecture:    x86_64
Parent:          launchd [225]
UID:             501
Task size:       20328 pages (+470)
CPU Time:        1.936s

  Thread 0x69ee1    DispatchQueue 1          priority <multiple> cpu time   0.935s
  20 start + 52 (h2hh) [0x100000e24]
    20 main + 1438 (h2hh) [0x100004b6e]
      20 start + 13830 (h2hh) [0x1000043f6]
        20 PyRun_SimpleFileExFlags + 392 (Python) [0x1018c3da8]
          20 PyRun_FileExFlags + 164 (Python) [0x1018c2af4]
            20 PyEval_EvalCode + 54 (Python) [0x1018a4326]
              20 PyEval_EvalCodeEx + 2103 (Python) [0x1018a42a7]
                20 PyEval_EvalFrameEx + 18189 (Python) [0x1018a109d]
                  20 ??? (Python + 672856) [0x1018a4458]
                    20 PyEval_EvalCodeEx + 2103 (Python) [0x1018a42a7]
                      20 PyEval_EvalFrameEx + 3188 (Python) [0x10189d604]
                        20 PyEval_EvalCode + 54 (Python) [0x1018a4326]
                          20 PyEval_EvalCodeEx + 2103 (Python) [0x1018a42a7]
                            20 PyEval_EvalFrameEx + 18189 (Python) [0x1018a109d]
                              20 ??? (Python + 672739) [0x1018a43e3]
                                20 PyEval_EvalFrameEx + 18725 (Python) [0x1018a12b5]
                                  20 PyObject_Call + 97 (Python) [0x101808be1]
                                    20 ??? (Python + 109079) [0x10181aa17]
                                      20 PyObject_Call + 97 (Python) [0x101808be1]
                                        20 ??? (Python + 202123) [0x10183158b]
                                          20 PyEval_EvalCodeEx + 2103 (Python) [0x1018a42a7]
                                            20 PyEval_EvalFrameEx + 20406 (Python) [0x1018a1946]
                                              20 wxPySwigInstance_Check(_object*) + 223711 (_core_.so) [0x101d7244f]
                                                20 wxPyApp::MainLoop() + 76 (_core_.so) [0x101d26c3c]
                                                  20 wxAppConsoleBase::MainLoop() + 72 (libwx_osx_cocoau-2.9.4.0.0.dylib) [0x101fac6d8]
                                                    20 wxCFEventLoop::Run() + 55 (libwx_osx_cocoau-2.9.4.0.0.dylib) [0x1020a7607]
                                                      20 wxGUIEventLoop::DoRun() + 51 (libwx_osx_cocoau-2.9.4.0.0.dylib) [0x1021d40b3]
                                                        20 -[NSApplication run] + 517 (AppKit) [0x7fff8f48e283]
                                                          20 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128 (AppKit) [0x7fff8f496ed2]

blah blah

    1  CFArrayGetFirstIndexOfValue + 35 (CoreFoundation) [0x7fff8d575a83]
                                                                                                                                                                                                                                                                                          1  <executing in user space>
                                                                                                                                                                                  2  ??? (Python + 672739) [0x1018a43e3]
                                                                                                                                                                                    1  PyEval_EvalFrameEx + 18189 (Python) [0x1018a109d]
                                                                                                                                                                                      1  ??? (Python + 672856) [0x1018a4458]
                                                                                                                                                                                        1  PyEval_EvalCodeEx + 2103 (Python) [0x1018a42a7]
                                                                                                                                                                                          1  PyEval_EvalFrameEx + 18011 (Python) [0x1018a0feb]
                                                                                                                                                                                            1  ??? (Python + 925773) [0x1018e204d]
                                                                                                                                                                                              1  ??? (Python + 955601) [0x1018e94d1]
                                                                                                                                                                                                1  PyEval_CallObjectWithKeywords + 180 (Python) [0x10189bd94]
                                                                                                                                                                                                  1  PyObject_Call + 97 (Python) [0x101808be1]
                                                                                                                                                                                                    1  PyUnicodeUCS2_Join + 521 (Python) [0x10187b939]
                                                                                                                                                                                                      1  PyUnicodeUCS2_FromEncodedObject + 69 (Python) [0x101879155]
                                                                                                                                                                                                        1  <executing in user space>
                                                                                                                                                                                    1  PyEval_EvalFrameEx + 22213 (Python) [0x1018a2055]
                                                                                                                                                                                      1  PyThread_release_lock + 22 (Python) [0x1018d4e06]
                                                                                                                                                                                        1  OSAtomicCompareAndSwap64Barrier$VARIANT$mp + 8 (libsystem_c.dylib) [0x7fff8e78ec9c]
                                                                                                                                                                                          1  <executing in user space>
                                                                                                                                                            1  ??? (Python + 672856) [0x1018a4458]
                                                                                                                                                              1  PyEval_EvalCodeEx + 2103 (Python) [0x1018a42a7]
                                                                                                                                                                1  PyEval_EvalFrameEx + 20406 (Python) [0x1018a1946]
                                                                                                                                                                  1  wxGBPosition_helper(_object*, wxGBPosition**) + 14799 (_core_.so) [0x101ddbc5f]
                                                                                                                                                                    1  PyEval_RestoreThread + 62 (Python) [0x1018a44fe]
                                                                                                                                                                      1  PyThread_acquire_lock + 107 (Python) [0x1018d4ecb]
                                                                                                                                                                        1  __psynch_cvwait + 10 (libsystem_kernel.dylib) [0x7fff848c50fa]
                                                                                                                                                                         *1  psynch_cvcontinue + 0 (mach_kernel) [0xffffff80005b5d30] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:41:10.997

确保您没有直接从线程调用 wx 方法。如果你这样做了，那么你正在做一些未定义的事情并且会导致问题。您必须改用 wx 线程安全方法，例如 wx.CallAfter、wx.CallLater 或 wx.PostEvent。如果你从一个线程中调用 myControlSetValue() 之类的东西，你就会遇到问题。

I recommend asking over on the wxPython mailing list as well. There are several Mac guys there including a couple of core devs.

# symfony1 - 我可以直接使用 sf_sandbox 作为我的 symfony 项目吗？

> ID：12868854
> 
> 赞同：0
> 
> 时间：2012-10-13T00:32:00.907
> 
> 标签：symfony1

sf_sandbox 已经搭建好了 symfony 环境，为什么不直接在沙箱中开发，然后上传到服务器呢？与手动配置相比，沙盒的缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:52:52.337

我认为遵循这种方法没有缺点。`sf_sandbox`是一个预配置的 symfony 项目。优点之一是可以节省您创建项目和初始化空应用程序的时间（默认情况下称为`frontend`）。

这更多的是品味问题，而不是对与错的问题。由你决定！

注意：如果您遵循这种方法，您必须进行一些初始配置（如果您从头开始项目，则无论如何都会完成步骤 1、2、3）：

1.  重命名项目
2.  更改`config/properties.ini`文件
3.  更改`config/databases.yml`文件（默认`sf_sandbox`使用`sqlite`数据库）
4.  删除`data/sandbox.db`数据库文件

# android - 如何让按钮显示在 WebView 上方

> ID：12868856
> 
> 赞同：0
> 
> 时间：2012-10-13T00:32:08.650
> 
> 标签：android, button, webview

我知道以前有人问过这个问题，但是我已经尝试了其他问题的所有“解决方案”，但我仍然无法实现我想要做的事情。我已经搜索和搜索，并尝试过。请原谅我。我只是想在我的 WebView 上方显示我的按钮行，以便它与我的应用程序中的其余活动保持一致（它们都在顶部有按钮行）。似乎我已经尝试了所有可能的布局组合，但无济于事。它在图形布局（Eclipse）中正确显示，但在手机和模拟器上它只显示 WebView、全屏、没有按钮......任何帮助将不胜感激！

这是我的xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:orientation="horizontal" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/menu_panel">

                    <ImageButton
                        android:id="@+id/bHomeMenu"
                        android:layout_margin="-8dip"
                        android:layout_width="65dp"
                        android:layout_height="90dp"
                        android:background="@drawable/menu_btn_hcu_light_blue"
                        android:src="@drawable/icon_menu_home"
                        android:adjustViewBounds="true"
                        android:scaleType="centerInside"
                        style="@style/ButtonText"
                        android:textSize="13sp"
                        android:text="Home" />

                    <ImageButton
                        android:id="@+id/bItsMe247Menu"
                        android:layout_toRightOf="@+id/bHomeMenu"
                        android:layout_margin="-8dip"
                        android:layout_width="65dp"
                        android:layout_height="90dp"
                        android:background="@drawable/menu_btn_selected_hcu_light_blue"
                        android:src="@drawable/icon_menu_login"
                        android:adjustViewBounds="true"
                        android:scaleType="centerInside"
                        style="@style/ButtonText"
                        android:textSize="13sp"
                        android:text="It'sMe" />

                    <ImageButton
                        android:id="@+id/bFindUsMenu"
                        android:layout_toRightOf="@+id/bItsMe247Menu"
                        android:layout_margin="-8dip"
                        android:layout_width="65dp"
                        android:layout_height="90dp"
                        android:background="@drawable/menu_btn_hcu_light_blue"
                        android:src="@drawable/icon_menu_find_us"
                        android:adjustViewBounds="true"
                        android:scaleType="centerInside"
                        style="@style/ButtonText"
                        android:textSize="13sp"
                        android:text="FindUs" />

                    <ImageButton
                        android:id="@+id/bEmailMenu"
                        android:layout_toRightOf="@+id/bFindUsMenu"
                        android:layout_margin="-8dip"
                        android:layout_width="65dp"
                        android:layout_height="90dp"
                        android:background="@drawable/menu_btn_hcu_light_blue"
                        android:src="@drawable/icon_menu_email"
                        android:adjustViewBounds="true"
                        android:scaleType="centerInside"
                        style="@style/ButtonText"
                        android:textSize="13sp"
                        android:text="Email" />

                    <ImageButton
                        android:id="@+id/bRatesMenu"
                        android:layout_toRightOf="@+id/bEmailMenu"
                        android:layout_margin="-8dip"
                        android:layout_width="65dp"
                        android:layout_height="90dp"
                        android:background="@drawable/menu_btn_hcu_light_blue"
                        android:src="@drawable/icon_menu_rates"
                        android:adjustViewBounds="true"
                        android:scaleType="centerInside"
                        style="@style/ButtonText"
                        android:textSize="13sp"
                        android:text="Rates" />

    </LinearLayout>

                        <WebView xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/wvItsMe"
                            android:layout_width="fill_parent"
                            android:layout_height="0dp"
                            android:layout_weight="1" />

</LinearLayout> 
```

**编辑**：这是我的java代码，下面有一个注释：

```
 package com.dummyapp.app;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

import com.dummyapp.app.SimpleGestureFilter.SimpleGestureListener;

public class ItsMe247 extends Activity implements SimpleGestureListener{

    private SimpleGestureFilter detector;

    private WebView itsMeLogin;

//  ImageButton menuHome, menuFindUs, menuEmail, menuRates;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.itsme247);

//      menuHome = (ImageButton)findViewById(R.id.bHomeMenu);
//      menuFindUs = (ImageButton)findViewById(R.id.bFindUsMenu);
//      menuEmail = (ImageButton)findViewById(R.id.bEmailMenu);
//      menuRates = (ImageButton)findViewById(R.id.bRatesMenu);

        detector = new SimpleGestureFilter(this,this);

        itsMeLogin = new WebView(this);

        Toast.makeText(this, "Just Swipe To Exit", Toast.LENGTH_LONG).show();

        itsMeLogin.getSettings().setJavaScriptEnabled(true); // JavaScript enabled

        getWindow().requestFeature(Window.FEATURE_PROGRESS); // Show progress bar of page loading

        final Activity itsMeActivity = this;

        itsMeLogin.setWebChromeClient(new WebChromeClient() {

            public void onProgressChanged(WebView view, int progress){

                // Activities and WebViews measure progress with different scales.
                // The progress meter will automatically disappear when we reach 100%
                itsMeActivity.setProgress(progress * 100);

            }

        });

        itsMeLogin.setWebViewClient(new WebViewClient(){

            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl){

                Toast.makeText(itsMeActivity, "Oh no! " + description, Toast.LENGTH_SHORT).show();

            }

        });

        itsMeLogin.loadUrl("http://www.google.com");
        setContentView(itsMeLogin);

//      itsMeLogin.setWebViewClient(new WebViewClient() {
//          @Override
//          public boolean shouldOverrideUrlLoading(final WebView view, final String url) {
//              return super.shouldOverrideUrlLoading(view, url);
//          }
//      });

//******************* MENU BUTTONS START HERE ********************************************************//        

//      menuRates.setOnClickListener(new View.OnClickListener() {
//          
//          public void onClick(View v) {
//              // TODO Auto-generated method stub
//              Intent ratesIntent = new Intent(ItsMe247.this, Rates.class);
//              ItsMe247.this.startActivity(ratesIntent);
//              
//          }
//          
//      });
//      
//      
//      menuFindUs.setOnClickListener(new View.OnClickListener() {
//          
//          public void onClick(View v) {
//              // TODO Auto-generated method stub
//              Intent contactIntent = new Intent(ItsMe247.this, Contact.class);
//              ItsMe247.this.startActivity(contactIntent);
//              
//          }
//      });
//      
//      menuEmail.setOnClickListener(new View.OnClickListener() {
//          
//          public void onClick(View v) {
//              // TODO Auto-generated method stub
//              Intent emailIntent = new Intent(ItsMe247.this, Email.class);
//              ItsMe247.this.startActivity(emailIntent);
//              
//
//          }
//      });
//      
//      menuHome.setOnClickListener(new View.OnClickListener() {
//          
//          public void onClick(View v) {
//              // TODO Auto-generated method stub
//              Intent itsMeIntent = new Intent(ItsMe247.this, MainActivity.class);
//              ItsMe247.this.startActivity(itsMeIntent);
//          }
//      });

//***************************** MENU BUTTONS END HERE ********************************************************//

    }//end onCreate method

    @Override 
      public boolean dispatchTouchEvent(MotionEvent me){ 
        this.detector.onTouchEvent(me);
       return super.dispatchTouchEvent(me); 
      }

        public void onSwipe(int direction) {

                   switch (direction) {

                   case SimpleGestureFilter.SWIPE_RIGHT: 

                       Intent funIntent = new Intent(ItsMe247.this, MainActivity.class);
                       ItsMe247.this.startActivity(funIntent);
                       //ItsMe247.this.finish();

                       break;

                   case SimpleGestureFilter.SWIPE_LEFT:  

                       Intent funIntent2 = new Intent(ItsMe247.this, Contact.class);
                       ItsMe247.this.startActivity(funIntent2);
                       //ItsMe247.this.finish();

                       break;

                   case SimpleGestureFilter.SWIPE_DOWN:  

                       break;

                   case SimpleGestureFilter.SWIPE_UP:   

                       break;                                               
                   } 

        }//end onSwipe method

      public void onDoubleTap() {

      }

} 
```

我已经注释掉了所有的菜单按钮（我试图在 webview 上方显示的按钮），直到我最终让它们通过 xml 显示。但是，每当我取消注释按钮及其侦听器时，应用程序会在尝试进入此活动时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:04:45.283

您的代码没有使用您的 XML 布局，而是在代码中创建自己的 WebView 并将其设置为视图，以便它完全绕过您的 XML。

我在这里提供了一些应该使它起作用的更改。请特别注意 setContentView 行和以下行，这些都是使用 XML 布局的内容。您可能需要更改布局的名称 (R.layout.whatever) 和 webview id (R.id.webview)。我把它放在这里可能有一些解析错误，可能错过了一个右括号。为了简单起见，我删除了许多注释掉的代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView( R.layout.xmlLayout );

    itsMeLogin = (WebView)findViewById( R.id.webview );

    detector = new SimpleGestureFilter(this,this);

    Toast.makeText(this, "Just Swipe To Exit", Toast.LENGTH_LONG).show();

    itsMeLogin.getSettings().setJavaScriptEnabled(true); // JavaScript enabled

    getWindow().requestFeature(Window.FEATURE_PROGRESS); // Show progress bar of page loading

    final Activity itsMeActivity = this;

    itsMeLogin.setWebChromeClient(new WebChromeClient() {

        public void onProgressChanged(WebView view, int progress){

            // Activities and WebViews measure progress with different scales.
            // The progress meter will automatically disappear when we reach 100%
            itsMeActivity.setProgress(progress * 100);

        }

    });

    itsMeLogin.setWebViewClient(new WebViewClient(){

        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl){

            Toast.makeText(itsMeActivity, "Oh no! " + description, Toast.LENGTH_SHORT).show();

        }

    });

    itsMeLogin.loadUrl("http://www.google.com");
} 
```

这也是来自类似布局的我的 XML 文件，尽管您可能会使用编辑后的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:columnCount="3"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
>
<EditText
    android:ems="4"
    android:imeOptions="actionNext"
    android:inputType="number"
    android:layout_gravity="center_horizontal"
    android:maxLength="4"
    android:selectAllOnFocus="true"
/>
<EditText
    android:ems="4"
    android:imeOptions="actionDone"
    android:inputType="textCapCharacters|textNoSuggestions"
    android:layout_gravity="center_horizontal"
    android:maxLength="3"
    android:selectAllOnFocus="true"
/>
<Button android:id="@+id/submit"
/>
<WebView android:id="@+id/webview"
    android:layout_columnSpan="3"
    android:layout_gravity="fill"
    android:layout_height="0dp"
    android:layout_width="0dp"
/>
</GridLayout> 
```

# c# - WPF 子窗口 Aero 玻璃显示不正确

> ID：12868857
> 
> 赞同：1
> 
> 时间：2012-10-13T00:32:11.330
> 
> 标签：c#, .net, wpf, aero, aero-glass

我有一个 WPF 窗口，可以在其`SourceInitialized`事件期间启用玻璃本身。这完美地工作。我将使用最简单的示例（只有一个窗口对象）来演示问题所在。

```
public partial class MainWindow : Window
{
    public bool lolz = false;
    public MainWindow()
    {
        InitializeComponent();
        this.SourceInitialized += (x, y) =>
            {
                AeroExtend(this);
            };
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        if (!lolz)
        {
            MainWindow mw = new MainWindow();
            mw.lolz = true;
            mw.ShowDialog();
        }
    }
} 
```

这会创建两个`MainWindow`s。当我在 Visual Studio 中调试它时，一切都按预期工作。 ![完美的！](../Images/15c79bb6012b02172ccdf1c71daa8789.png)

当我在没有调试的情况下运行时，没有那么多。 ![不完美...](../Images/9068c490d45caab6d8c985ae6d47ec54.png)

子窗口有一个奇怪的、错误应用的玻璃框架......但只有在没有 Visual Studio 调试的情况下直接运行它时。相同的代码运行了两次，但结果不同。当我创建第二个窗口时并不重要，我将它绑定到具有相同输出的按钮单击。

有任何想法吗？

编辑：这是我使用的代码的摘录`AeroExtend`

```
[DllImport("dwmapi.dll")]
private static extern int DwmExtendFrameIntoClientArea(IntPtr hWnd, ref MARGINS pMargins);

[DllImport("dwmapi.dll", PreserveSig = false)]
private static extern bool DwmIsCompositionEnabled();

[StructLayout(LayoutKind.Sequential)]
private class MARGINS
    {
        public MARGINS(Thickness t)
        {
            cxLeftWidth = (int)t.Left;
            cxRightWidth = (int)t.Right;
            cyTopHeight = (int)t.Top;
            cyBottomHeight = (int)t.Bottom;
        }
        public int cxLeftWidth, cxRightWidth,
            cyTopHeight, cyBottomHeight;
}

...

static public bool AeroExtend(this Window window)
{
    if (Environment.OSVersion.Version.Major >= 6 && DwmIsCompositionEnabled())
    {
        IntPtr mainWindowPtr = new WindowInteropHelper(window).Handle;
        HwndSource mainWindowSrc = HwndSource.FromHwnd(mainWindowPtr);
        mainWindowSrc.CompositionTarget.BackgroundColor = Colors.Transparent;

        window.Background = System.Windows.Media.Brushes.Transparent;

        MARGINS margins = new MARGINS(new Thickness(-1));

        int result = DwmExtendFrameIntoClientArea(mainWindowSrc.Handle, ref margins);
        if (result < 0)
        {
            return false;
        }
         return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:27:40.063

问题是您将 MARGINS 定义为一个类。您会注意到，如果您尝试使用一组不同的边距值（例如，每条边缘 10 像素），它仍然会尝试填充整个区域。此外，正如我在前几天的评论中提到的那样，您会注意到即使在未以模态方式显示的原始窗口中，右下角也有一个工件。如果您只是将 MARGINS 从类更改为结构，则不会出现问题。例如

```
[StructLayout(LayoutKind.Sequential)]
private struct MARGINS 
```

或者，您可以将 MARGINS 保留为一个类，但是您应该更改 DwmExtendFrameIntoClientArea 的定义方式。例如

```
[DllImport("dwmapi.dll")]
private static extern int DwmExtendFrameIntoClientArea(IntPtr hWnd, [MarshalAs(UnmanagedType.LPStruct)] MARGINS pMargins); 
```

# java - 无法使用 Tiles 启动 GAE

> ID：12868859
> 
> 赞同：3
> 
> 时间：2012-10-13T00:32:37.830
> 
> 标签：java, eclipse, google-app-engine, apache-tiles

在过去的几天里，我一直在寻找解决此问题的方法，但没有找到解决方案。我在 Eclipse 中有一个 GAE 应用程序，我正在尝试使用 Tiles。我将 Tiles jar 放在 WEB-INF/lib/ 目录中，并将它们全部添加到 Java Build Path 中。

这是我现在的 web.xml。

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>
 <listener>
    <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
</listener>
<servlet>
    <servlet-name>Tiles Dispatch Servlet</servlet-name>
    <servlet-class>org.apache.tiles.web.util.TilesDispatchServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Tiles Dispatch Servlet</servlet-name>
    <url-pattern>*.tiles</url-pattern>
</servlet-mapping>
</web-app> 
```

但是，当我尝试运行应用程序时，我收到以下消息：

```
2012-10-12 20:10:42.057 java[33932:707] [Java CocoaComponent compatibility mode]: Enabled
2012-10-12 20:10:42.058 java[33932:707] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000
Oct 13, 2012 12:10:43 AM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Oct 13, 2012 12:10:43 AM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed /Users/nblue/Workspaces/Eclipse/WhatsOnBB/war/WEB-INF/appengine-web.xml
Oct 13, 2012 12:10:43 AM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed /Users/nblue/Workspaces/Eclipse/WhatsOnBB/war/WEB-INF/web.xml
Oct 13, 2012 12:10:45 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Failed startup of context com.google.appengine.tools.development.DevAppEngineWebAppContext@7041a12f{/,/Users/nblue/Workspaces/Eclipse/WhatsOnBB/war}
java.lang.NullPointerException
    at org.apache.tiles.el.JspExpressionFactoryFactory.getExpressionFactory(JspExpressionFactoryFactory.java:61)
    at org.apache.tiles.extras.complete.CompleteAutoloadTilesContainerFactory.createELEvaluator(CompleteAutoloadTilesContainerFactory.java:242)
    at org.apache.tiles.extras.complete.CompleteAutoloadTilesContainerFactory.createAttributeEvaluatorFactory(CompleteAutoloadTilesContainerFactory.java:182)
    at org.apache.tiles.factory.BasicTilesContainerFactory.createContainer(BasicTilesContainerFactory.java:88)
    at org.apache.tiles.startup.AbstractTilesInitializer.createContainer(AbstractTilesInitializer.java:114)
    at org.apache.tiles.startup.AbstractTilesInitializer.initialize(AbstractTilesInitializer.java:64)
    at org.apache.tiles.web.startup.AbstractTilesListener.contextInitialized(AbstractTilesListener.java:53)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:202)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:248)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
Oct 13, 2012 12:10:45 AM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:8888/
Oct 13, 2012 12:10:45 AM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:8888/_ah/admin 
```

我见过类似的消息，但没有一个与此完全匹配。我剥离了其他 servlet 的 web.xml 以查看它们是否导致了问题，但得到了相同的结果。有什么建议么？

# java - 从其他 json 对象创建 json 对象

> ID：12868863
> 
> 赞同：0
> 
> 时间：2012-10-13T00:32:51.453
> 
> 标签：java, json

我有两个 json 对象——不是字符串，拜托——我想将它们组合成一个 json 对象，如下所示。

两个对象：

```
JSONObject pen = {"plastic":"blue"}
JSONObject book = {"Maya":"Bird"} 
```

期望的结果：

```
JSONObject bag = {"plastic":"blue","Maya":"Bird"} 
```

有没有一种优雅的方式来做到这一点？我的意思是不提取每个值，`pen`然后`book`将它们重新插入到`bag`使用类似的东西中

```
bag.put("plastic","blue"); 
```

`org.codehaus.jettison.json.JSONObject`如果需要该信息，我正在使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:45:44.797

天真地，您似乎可以执行以下操作：

```
Iterator it = pen.keys();
while(it.hasNext())
{
    String k = it.next();
    bag.put(k, pen.getJSONObject(k));
}
// bag now has the combined key,value pairs. 
```

但它有其明显的局限性。

# java - 如何让我的顶级 Jpanel 设置其相对于另一个 jpanel 网格中的 jlabel 的位置？

> ID：12868865
> 
> 赞同：2
> 
> 时间：2012-10-13T00:32:54.403
> 
> 标签：java, swing, jpanel, jlabel

场景：我有一个 UI，其中包含一个`JPanel`（调用它），在顶层`topGrid`有一个网格布局。`JFrame`在 内`topGrid`，我放置了另一个`JPanel`( `midGrid`) 与网格布局。内部`midGrid`, 是另一个`JPanel`( `bottomGrid`) ，`JLabel`我根据数组填充图像以及它们在该数组中的实例。

目标：我希望将`topGrid`其视图集中在`bottomGrid`. （想象一个游戏，当玩家图标移动时，游戏的网格会移动到该图标的中心，并且当游戏开始时，它已经以用户为中心。）

我考虑过从中获取点`bottomGrid`并尝试将其传递给`topGrid`但似乎没有提取正确的信息。我知道找到玩家所在位置的唯一方法是遍历所有组件并检查实例。这必须为 topGrid 执行一次，然后再为 midGrid 执行一次以在 bottomGrid 处找到玩家。然后传递点数据。然后使用 setLocation() 适当`JPanel`减去距中心的距离。

有没有其他人尝试过这个并且有更有效或更优雅的方式来解决它？我还可以探索哪些其他选择？

感谢您的任何反馈。

`topGrid`在's中创建网格`JPanel`：

```
public void createTopGrid()
{
    int rows = galaxy.getNumRows();
    int columns = galaxy.getNumColumns();

    pnlGrid.removeAll();
    pnlGrid.setLayout(new GridLayout(rows, columns));

    for (int row = 0; row < rows; row++)
    {
        for (int col = 0; col < columns; col++)
        {
            Position pos = new Position(galaxy, row, col);
            Sector sector = galaxy.getSector(pos);
            GalaxySector sectorUI = new GalaxySector(sector);
            pnlGrid.add(sectorUI);
        }
    }
} 
```

`midGrid`在's中创建网格`JPanel`：

```
public void createOccupantIcons()
{
    pnlGridOccupants.removeAll();

    Occupant[] occs = sector.getOccupantsAsArray();

    for ( Occupant occ : occs )
    {
         GalaxyOccupant occupant = new GalaxyOccupant(occ, sector);
         pnlGridOccupants.add(occupant);
    }
} 
```

中每个乘员的图像图标`midGrid`从类`IconRep` `String`中的模型中提取，并根据需要添加到中。`bottomGrid``JPanel``JLabel``FlowLayout`

视觉参考：

![图片](../Images/7a68eaa9161df7adfbcce9113adcab13.png)

其中绿色方块是`topGrid` `JPanel`红色方块`midGrid` `JPanel`，黑色方块是`bottomGrid` `JPanel`其中的玩家图像的白色圆圈`JLabel`。蓝色圆圈代表用户将通过的*视口*，并且是我希望玩家图标居中的位置。目前，用户可以使用视口周围区域中非常不雅的按钮来移动网格。这可能就足够了，但在游戏开始时，玩家必须四处移动网格，直到他们可以找到他们的图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:50:21.733

你也可以看看[`JScrollNavigator`](http://www.javalobby.org/java/forums/t21355.html)，检查[这里](https://stackoverflow.com/a/11744971/230513)。它将允许您在整个世界的缩略图上导航，在相邻的滚动窗格中以全尺寸显示。

![图片](../Images/ba923908248c6c8b8c421c331678682a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:23:47.443

在我的脑海中，我会将您想要的所有参考存储在某种模型中。

您可以使用此模型根据选择要求更新视图。

这使您可以集中查找和更新元素的逻辑，而无需了解或关心其他 UI 元素

# javascript - JS 分页/JSON Conern。编码实践

> ID：12868872
> 
> 赞同：0
> 
> 时间：2012-10-13T00:34:02.713
> 
> 标签：javascript, jquery

目前，我正在预缓存一个最大限制为 500 的数据集。基本上，Ajax 会去获取所有数据。前端加载它，然后创建分页等。一切都很好。

问题 - 我们正在切换后端架构，现在系统一次只能反馈 100 个。鉴于当前的 js 前端实现，我可以配置它，但是在 100 之后，他们会收到一条消息以“优化他们的搜索”。当返回“500”时，没关系。但是现在，他们想要获得 500 的完整计数，显示分页但去并根据请求获取 100 的分组。

我的顾虑。因为这些数据现在被分成 3 个单独的数据集。本地的，国家的，国际的。当我前面加载 500 时，一切都很好。但是，现在一次获得 100 个，我真的不知道该怎么做。

看..分页是这样的。

左箭头- 1 | 2 | 3 | 4 | 5 | 6 - 右箭头

现在，使用新方法，当他们点击两个时 - 我去请求第二组 100。太好了。我可以将数据发布到我已经创建的存储桶中。好吧，没那么快。如果他们选择“4”或“6”怎么办。它不正常。此外，当任何特定页面让我们说（例如）时会发生什么。

用户进入页面。前 100 个负载。合计数据如下。

```
Local - 150 items
National - 220 items 
international - 300 items 
```

当前分页的工作方式是，首先是所有本地的，然后是国家的，然后是国际的。这样，每个后续页面都只是前一个页面的导引。

如果使用新系统的用户不按顺序单击...收集该数据并使用它做什么的协议/方式是什么。你看到我的苦恼了吗？它不正常。我是否应该担心“缓存”这些数据，而只是在他们请求时显示它并在他们离开页面后将其丢弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:39:17.880

您可以使用 jquery When (http://api.jquery.com/jQuery.when/) 并获得 500 个结果并在完成后显示它们。

与旧的 1 相比，它进行 5 次网络调用，因此效率较低，但那时一切都将保持不变。

# jquery - 在这个例子中如何访问外部选择器

> ID：12868876
> 
> 赞同：0
> 
> 时间：2012-10-13T00:34:51.673
> 
> 标签：jquery

我有以下标记：

```
<div class='header-vals' data-item-id='23'>
  <input type='text' name='some-input' />
  <input type='text' name='some-other-input' />
</div> 
```

并希望通过类似这样的方式访问数据项 ID（但这不起作用）：

```
$('.header-vals').on('keyup','input',function(){
  var item_id=$(this).data('item-id');
}); 
```

有没有办法将这个引用到外部，以便我可以获得数据项 ID？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:38:59.237

这样做： -

```
$('.header-vals').on('keyup','input',function(){
  alert($(this).parent().attr('data-item-id'));
});​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/79dEd/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:37:40.693

```
var item_id = $(this).parent().attr('data-item-id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T00:37:41.563

菲利克斯是正确的（谢谢哥们）..

$(this) 是指输入...检查下面的代码，只需添加父项：

您的代码将起作用，只需使用 attr 切换数据

```
$('.header-vals').on('keyup','input',function(){
  var item_id=$(this).parent.attr('data-item-id');
}); 
```

.data() 函数用于将数据绑定到元素，而不是选择属性 [http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T00:39:04.547

试试这个：

```
$('.header-vals').on('keyup','input',function(){ 
  var item_id=$(this).parent().attr('data-item-id'); 
}); 
```

或者

```
$('.header-vals').on('keyup','input',function(){ 
  var item_id=$(this).parent().data('item-id'); 
}); 
```

这是一个使用数据功能的[演示。](http://jsfiddle.net/79dEd/1/)

# verilog - Verilog：I2C 读操作

> ID：12868878
> 
> 赞同：0
> 
> 时间：2012-10-13T00:34:59.800
> 
> 标签：verilog, i2c

在 Verilog 仿真中，我必须与 Microchip 的 64K I2C EEPROM 通信。每次从从机获得确认时，我都会在给定的时钟周期内将我的 SDA 驱动到高阻抗。现在，为了从从站获取数据，我是否必须对 SDA 遵循相同的操作？简而言之，是否必须将 SDA 端口驱动到高阻抗状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:18:56.657

在物理 I2C 电路中，当 SCL 和 SDA 的输出处于高阻抗状态时，有上拉电阻使 SCL 和 SDA 变为高电平。与上拉电阻等效的 Verilog 是 TRI1。当信号处于高阻抗状态时，这将使线路定义而不是浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:03:09.233

一般来说，如果`SDA`线路具有[开漏](http://en.wikipedia.org/wiki/Open_drain)设计，则无需将其置于高阻抗状态（可能不能），但应将其设置为逻辑“1”。但是如果它是一个[三态](http://en.wikipedia.org/wiki/Three-state_logic)IO 引脚，那么是的，你应该把它置于高阻抗状态，否则你可能会损坏你的电路。

# java - Java中的递归泛型

> ID：12868881
> 
> 赞同：2
> 
> 时间：2012-10-13T00:35:18.137
> 
> 标签：java, generics

我正在尝试实现一个表示 XML 树的类，如下所示：

```
 public class XML<T extends XML<T>> {

        private final List<MarkupLanguage> nodeList = new ArrayList<>();

        private final Map<String, String> attributeList = new HashMap<>();

        public T attr(final String key, final String value) {
            if (value != null) {
                this.attributeList.put(key, value);
            } 
            return (T) this;
        }

        public T appendTo(final T node) {
            node.add(this);
            return (T) this;
        }
        ...
    } 
```

我的问题是输入这些子句 - 我正在为“return (T) this;”获得未经检查的演员表。

以及当我尝试单独使用 XML 类时：

```
 final XML url = new XML("url");
    new XML("loc")
        .add("http://goout.cz")
        .appendTo(url); 
```

我正进入（状态：

```
 Unchecked cast to call appendTo(T) as a member of raw type XML. 
```

如何改进我的代码以获得更好的打字效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:37:59.757

只需输入：

```
final XML<T> url = new XML<T>("url");
new XML<T>("loc")
    .add("http://goout.cz")
    .appendTo(url); 
```

看起来你真的想使用`XML<T>`你的方法，而不是`T`，所以你可以避免强制转换（但我可能是错的）：

```
public XML<T> attr(String key, String value) {
    if (value != null) {
        this.attributeList.put(key, value);
    } 
    return this;
}

public XML<T> appendTo(XML<T> node) {
    node.add(this);
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:01:32.207

下面的方法怎么样（简单继承加上泛型方法）：

```
import java.util.ArrayList;
import java.util.List;

import org.junit.Test;

public class XmlTest {

    @Test
    public void test() {
        XMLFirstSubclass url = new XMLFirstSubclass("url");
        XMLSecondSubclass xmlSecondSubclassInstance = new XMLSecondSubclass(
                "loc").add("http://goout.cz").appendTo(url);
    }
}

abstract class XML {

    private final List<String> texts = new ArrayList<String>();

    private final List<XML> nodes = new ArrayList<XML>();

    private final String nodeName;

    protected XML(String nodeName) {
        this.nodeName = nodeName;
    }

    @SuppressWarnings("unchecked")
    public <R extends XML> R add(String text) {
        texts.add(text);
        return (R) this;
    }

    @SuppressWarnings("unchecked")
    public <R extends XML, T extends XML> R add(T node) {
        nodes.add(node);
        return (R) this;
    }

    @SuppressWarnings("unchecked")
    public <R extends XML, T extends XML> R appendTo(T node) {
        node.add(this);
        return (R) this;
    }
}

class XMLFirstSubclass extends XML {
    public XMLFirstSubclass(String nodeName) {
        super(nodeName);
    }
}

class XMLSecondSubclass extends XML {
    public XMLSecondSubclass(String nodeName) {
        super(nodeName);
    }
} 
```

请注意，泛型方法允许从一种类型 T 获取节点并返回实例的类型 R，它可以不同于参数的类型。T 可以不同于 R，但都继承 XML。

**关于问题中提出的方法的评论**

到目前为止，您使用的方法可能会导致奇怪的情况。让我们用一个例子来说明这一点。

下面，我们尝试编写第一个专门用于 XML 的类：

```
public class XMLFirstSubclass extends XML<OtherXMLSubclass> { ... } 
```

如果我们正在编写第一个 XML 子类，OtherXMLSubclass 唯一可能的值是 XMLFirstSubclass 或根本不声明泛型类型。

第一个选项：

```
public class XMLFirstSubclass extends XML<XMLFirstSubclass> { ... } 
```

第二：

```
public class XMLFirstSubclass extends XML { ... } 
```

如果你选择在你的类设计中使用泛型，第二个选项似乎很糟糕。
仔细研究第一个选项，它打开了获取子类的可能性，例如：

```
class XMLSecondSubclass extends XML<XMLFirstSubclass> {
    ... 
} 
```

请注意，这可以完美编译，但会在运行时导致 XMLSecondSubclass 方法调用中的类转换异常。

# android - 使用 webintent 时不断出现错误

> ID：12868882
> 
> 赞同：1
> 
> 时间：2012-10-13T00:35:35.593
> 
> 标签：android, android-intent, cordova, webintents

我正在尝试使用以下代码打开带有cordova的网页：

```
window.plugins.webintent.startActivity({action: WebIntent.ACTION_VIEW,url: 'geo:0,0?q=' +            address}, 
function() {}, 
function() {alert('Failed to open URL via Android Intent')}
) 
```

但我不断收到此错误：

```
ReferenceError: WebIntent is not defined 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:50:02.477

如果您正在使用`Cordova 2.0`，请确保您有以下条目`config.xml`：

```
<plugin name="WebIntent" value="com.borismus.webintent.WebIntent" /> 
```

该`WebIntent.java`文件还需要存储在：

```
src\com\borismus\webintent\ 
```

最后确保在 cordova.js 之后包含 webintent.js：

```
<script src="cordova-2.2.0.js"></script>
<script src="js/webintent.js"></script> 
```

# php - php/perl 或其他能够对启用 SmartCard 的网站进行自动身份验证的 Web 脚本

> ID：12868883
> 
> 赞同：3
> 
> 时间：2012-10-13T00:35:45.983
> 
> 标签：php, perl, x509, smartcard

我有一个 php 脚本，它转到 rss 提要 url 并拉下 xml，对其进行处理，然后将我需要的数据加载到数据库中。该脚本一直在完美运行，直到站点所有者使用智能卡身份验证（军事 CAC）对其进行保护。

我一直在想办法从我的智能卡中获取我的 x.509 证书，并通过 php 或任何其他脚本语言将其呈现给托管 rss 的网络服务器。我无法弄清楚这一点。

操作概念： 1\. 请求 rss url 2\. rss url 请求身份验证 3\. 提供证书 + pin（我将安全地存储 pin 以供脚本使用，我知道该怎么做） 4\. rss url 验证我的证书和发布数据。

谢谢！-担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:53:12.110

在 PHP 中这是否可行（使用[phpseclib，一个纯 PHP X.509 实现](http://phpseclib.sourceforge.net/index.html)）？：

```
<?php
include('File/X509.php');

$x509 = new File_X509();
$cert = $x509->loadX509('...');
echo $x509->validateSignature() ? 'valid' : 'invalid';
?> 
```

下面列出了您可以验证的其他内容：

[http://phpseclib.sourceforge.net/x509/examples.html#validate](http://phpseclib.sourceforge.net/x509/examples.html#validate)

# assembly - 在 Intel 8086 程序集中将小写转换为大写。如果已经大写 DO_NOTHING 并继续 SAVING

> ID：12868884
> 
> 赞同：0
> 
> 时间：2012-10-13T00:36:04.617
> 
> 标签：assembly, uppercase, x86-16

;我创建了这个程序（Intel 8086 Assembly）来读取字符并存储它们并在将它们转换为大写字母后以相反的顺序打印它们。我知道您可以使用 (sub AL, 20h) 转换为大写；但是如何放置条件（IF）循环？

```
org 100h
mov BX, 0800h
mov DS, BX      ;Set segment register
mov BX, 0000h   ;Set offset register
mov CX, 0       ;Set counter to 0      

;mov CH, 0

readwrite:      ;Top of read/write loop
mov AH, 01h     ;Get ready to read a character
int 21h         ;Read character into AL 

;jb readwrite

mov [BX], AL    ;Move AL into memory at DS:BX

add CX, 1       ;Increment Counter 
add BX, 1       ;Increment offset      

cmp AL, '$'     ;Compare entered to $
jg readwrite    ;if (C > 0) loop

;Reverse Printing

mov BX, 0800h
mov DS, BX      ;Set segment register
mov BX, 0000h   ;Set offset register            
add BX, CX
sub BX, 2            

mov AH, 0eh  

mov AL, 010 ;NL
int 10h
mov AL, 013 ;CR  
int 10h

revprinting:
mov AL, [BX]
int 10h    
sub BX, 1
sub CX, 1
cmp CX, 1
jg revprinting

ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-29T01:09:13.730

如果您知道您的字节是字母（不是`0..9`或其他非字母），您可以跳过 IF 部分。

您可以无条件地设置或清除 Bit Nr，而不是`20h`用作 ASCII 中大写和小写之间的区别。5（ASCII 字符：第 7 位、...、第 0 位）。

通过将 ASCII 字符的第 5 位设置为 1，您会得到一个小写字母。通过将第 5 位设置为 0，您将获得大写字母。( [http://asciitable.com/](http://asciitable.com/) )

**获取大写。**通过与设置了所有其他位的掩码进行与运算，将**位 5 清除为 0 ：**

```
and al, 0xdf   ; you may use 0dfH instead of 0xdf in your notation, or ~0x20 
```

**获取小写字母。将位 5 设置为 1：**

```
or al, 0x20    ; 20h 
```

* * *

这对于检查字符是否为字母也很有用。您只需将所有字母设置为大写。之后，您使用“cmp”检查字符是低于“A”还是高于“Z”。如果不是，那就是一封信。甚至更好，

```
and   al, 0xdf      ; force uppercase (if it was a letter to start with)

sub   al, 'A'       ; letters turn into AL in [0..25]
cmp   al, 'Z'-'A'
ja   non_letter     ; unsigned compare: lower ASCII codes wrap to high values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:57:19.590

要有条件地进行转换，您通常会使用几个比较：

```
 cmp al, 'a'
    jl  not_lower
    cmp al 'z'
    jg  not_lower

    sub al, 20h

not_lower: 
```

根据情况，还有另一种可能更可取：

```
 mov bl, al
    sub bl, 'a'
    cmp bl, 'z'-'a'   ; 25
    ja  not_lower

    sub al, 20h

not_lower: 
```

让您只用一个 jmp 而不是两个，并有助于使其更可预测。

# opencl - clGetProgramInfo CL_PROGRAM_BINARY_SIZES 结果不正确？

> ID：12868889
> 
> 赞同：0
> 
> 时间：2012-10-13T00:37:06.900
> 
> 标签：opencl

我正在尝试将程序缓存在文件中，以便它不需要编译为程序集。因此，我试图转储二进制文件。我遇到了一个问题，即返回的二进制程序最后交替有垃圾数据。

为清楚起见省略了错误检查（但没有发生错误）：

```
clGetProgramInfo(kernel->program, CL_PROGRAM_BINARY_SIZES, 0,NULL, &n);
n /= sizeof(size_t);

size_t* sizes = new size_t[n];
clGetProgramInfo(kernel->program, CL_PROGRAM_BINARY_SIZES, n*sizeof(size_t),sizes, NULL); 
```

我已经确认 kernel->program 在两次之间是相同的。在上面的代码中，“n”始终为 1，但 size[0] 在 2296 和 2312 交替运行之间变化。

问题是 2296 数字似乎更准确 - 在输出中的最后一个右大括号之后，有三个换行符，然后是三个空格。

对于 2312 数字，在输出中最后一个右大括号之后，有三个换行符，一行垃圾数据，然后是三个空格。

自然，垃圾数据这一行是有问题的。我不知道如何摆脱它，我很确定这不是我的错误。

NVIDIA GeForce GTX 580M，在 Windows 7 上使用驱动程序 305.60。

**更新：**我已将代码更改为以下内容：

```
//Get how many devices there are
size_t n;
clGetProgramInfo(kernel->program, CL_PROGRAM_NUM_DEVICES, 0,NULL, &n);

//Get the list of binary sizes
size_t* sizes = new size_t[n];
clGetProgramInfo(kernel->program, CL_PROGRAM_BINARY_SIZES, n*sizeof(size_t),sizes, NULL);

//Get the binaries
unsigned char** binaries = new unsigned char*[n];
for (int i=0;i<(int)n;++i) {
    binaries[i] = new unsigned char[sizes[i]];
}
clGetProgramInfo(kernel->program, CL_PROGRAM_BINARIES, n*sizeof(unsigned char*),binaries, NULL); 
```

现在，代码有 n = 4，但只有 sizes[0] 包含有意义的信息（因此 sizes[1] 的分配在循环中失败）。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:39:37.537

我通过以下行获得设备数量：

clGetProgramInfo(kernel->program, CL_PROGRAM_NUM_DEVICES, sizeof(cl_uint), &n, NULL);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:18:53.347

带有 CL_PROGRAM_BINARY_SIZES 和 CL_PROGRAM_BINARIES 的 clGetProgramInfo 需要一个指向数组的指针，而不仅仅是指向单个变量，因为它会为您在构建程序时提供的每个设备创建二进制文件。这就是为什么第一行什么都不返回的原因。第二个例子的 n 应该是设备的数量。

不确定为什么每次运行的第二个示例都不同...您确定每次都在为同一设备构建吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T09:35:21.520

```
clGetProgramInfo(kernel->program, CL_PROGRAM_NUM_DEVICES, 0,NULL, &n); 
```

需要是：

```
clGetProgramInfo(kernel->program, CL_PROGRAM_NUM_DEVICES, sizeof(size_t), &n, NULL); 
```

# javascript - jQuery 隐藏和显示表单

> ID：12868890
> 
> 赞同：3
> 
> 时间：2012-10-13T00:37:14.970
> 
> 标签：javascript, jquery, forms, hide

我创建了一个链接，单击该链接时会打开并显示“联系表”。它可以很好地打开、验证、提交和发送电子邮件。当我尝试关闭表单时遇到问题。

HTML

```
<div id="blanket"><div id="myForm">
    <p style="text-align:right; margin: 0; padding: 0;"><a href="#" id="close" onClick="onClickClose();">Close</a></p>
    <table width="400" border="0" cellspacing="0" cellpadding="5"><tr><td>
    <form name="form1" method="POST" action="_sendmail.php" onSubmit="return CheckAll(this);">
    <input name="fieldnm_1" type="radio" value="M." /> M. 
    <input name="fieldnm_1" type="radio" value="Mme" /> Mme. 
</td></tr><tr><td width="400">
    <input name="fieldnm_2" type="text" id="left_form" placeholder="Pr&eacute;nom *" tabindex="1"/><input name="fieldnm_4" type="text" id="right_form" placeholder="Courriel *" tabindex="3"/>
</td></tr><tr><td width="400">
    <input name="fieldnm_3" type="text" id="left_form" placeholder="Nom *" tabindex="2"/>
    <input name="fieldnm_5" type="text" id="right_form" placeholder="T&eacute;l&eacute;phone *" tabindex="4"/>
</td></tr><tr><td width="400">
    <select name="fieldnm_7" id="left_list" >
    <option value="">Nombre de chambres *</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>
    <select name="fieldnm_8" id="right_list">
    <option value="">Nombre de pieds carr&eacute;s</option>
    <option value="600-800">600-800</option>
    <option value="800-1000">800-1000</option>
    <option value="1000-1250">1000-1250</option>
    <option value="Plus de 1250">Plus de 1250</option>
    </select>
</td></tr><tr><td>
    <textarea name="fieldnm_9" id="comment" placeholder="Commentaire*" tabindex="5"></textarea>
</td></tr><tr><td>
    <input type="submit" name="Submit" value="Soumettre" tabindex="6">
<input type="reset" name="Submit2" value="Reset">
</td></tr></table></form></div>
</div> 
```

JS

```
<script type="text/javascript">
onClickRegister = function(){
    b = $("#blanket");
    b.css("display","block");
    b.css("position","fixed");
    b.css("width", window.innerWidth);
    b.css("height", window.innerHeight);
    b.css("background-color", "rgba(0, 0, 0, 0.7)");
    f=$("#myForm");
    f.css("position", "fixed");
    f.css("top", "33%");
    f.css("left", "33%");
}
window.onResize(function(){
    if($("#blanket").length>0){
        b.css("width", window.innerWidth);
        b.css("height", window.innerHeight);
    }
});
onClickClose = function(){
    $("#blanket").css("display","none");
}
</script> 
```

我什至尝试向 onClickClose 添加警报，但没有任何反应。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T00:46:55.787

您可以使用：

```
function onClickClose(){
    $("#blanket").hide();
} 
```

*如果您不希望 JQuery 在其缓存中保存稍后要恢复的显示属性的值（如此[处](http://api.jquery.com/hide/)所述），您可以只使用：

```
function onClickClose(){
    $("#blanket").css("display","none");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:49:51.667

```
$("#close").click(function() {
 $("#blanket").hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T01:38:06.170

实际上，您的问题不在于`onClickClose`，而是`window.onResize()`直接在此之前。它应该是`window.onresize`，没有驼峰式，它不是一个函数，而是一个事件处理程序。你应该有的是

```
window.onresize = function () {
    if ($("#blanket").length > 0) {
        b.css("width", window.innerWidth);
        b.css("height", window.innerHeight);
    }
}; 
```

你拥有它的方式导致了一个错误，随后该`onClickClose`函数没有被解析。[在MDN](https://developer.mozilla.org/en-US/docs/DOM/element.onresize)上阅读所有相关信息。

PbxMan 的答案有效的原因是提升。通过将其从函数表达式更改为函数声明，该函数被提升到作用域的顶部，因此在错误*之前*被解析。因此，虽然它有效，但它实际上是在回避实际问题。

[Angus Croll](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)有一篇关于函数声明与函数表达式和提升的好文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T02:24:37.673

```
$('#close').click(
function(abc){
    $("#blanket").css("display","none");
abc.preventDefault(); // this will cancel the default action for href
} 
```

# jquery - jquery如何在一页中显示标题和描述

> ID：12868892
> 
> 赞同：0
> 
> 时间：2012-10-13T00:37:26.530
> 
> 标签：jquery, html, flip

嗨，如何通过 jquery 在同一页面中制作标题和描述。像这个[http://www.st-andrews.ac.uk/its/projects/](http://www.st-andrews.ac.uk/its/projects/)当点击每个项目名称时，描述将在下面打开，然后点击另一个之前打开的 div 将关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:41:40.860

**工作演示** [http://jsfiddle.net/tTD4D/](http://jsfiddle.net/tTD4D/)

使用的 API： http: [//api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

或者像 Zoltan 提到的那样：http: [//jqueryui.com/accordion/](http://jqueryui.com/accordion/)

这应该适合您的需要`:)`

**代码**

```
$(".title").click(function() {
    $this = $(this);
    $content = $this.next(".content");
    if (!$content.is(":visible")) {
        $(".content:visible").slideToggle(100);
        $content.slideToggle(500);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:47:13.227

以下是基础知识

```
$('.title').on('click', function() {
   if($(this).hasClass('open')) {
      $(this).removeClass('open');
   } else {
      $('.title').removeClass('open');
      $(this).addClass('open');
   }
}); 
```

Html 会是这样的

```
<div class="title">
  title here to be clicked
  <p class="desc">blah</p>
</div> 
```

CSS可能是这样的

```
.title p {
   display: none
}

.title.open p {
   display:block
} 
```

滑动效果之类的只是锦上添花，你可以用谷歌搜索

# c# - 如何遍历所有 Model Display(Name=) 属性值

> ID：12868901
> 
> 赞同：2
> 
> 时间：2012-10-13T00:38:28.113
> 
> 标签：c#, asp.net-mvc, reflection

我发现[@RichTebb](https://stackoverflow.com/questions/5015830/get-the-value-of-displayname-attribute)的代码很棒，它返回了 Model 属性 DisplayName。

但是如何遍历所有 Model Display(Name=) 属性值呢？

感谢您提供任何线索！

@RichTebb 代码

```
public static class HelperReflectionExtensions
    {
        public static string GetPropertyDisplayString<T>(Expression<Func<T, object>> propertyExpression)
        {
            var memberInfo = GetPropertyInformation(propertyExpression.Body);
            if (memberInfo == null)
            {
                throw new ArgumentException(
                    "No property reference expression was found.",
                    "propertyExpression");
            }

            var displayAttribute = memberInfo.GetAttribute<DisplayAttribute>(false);

            if (displayAttribute != null)
            {
                return displayAttribute.Name;
            }
// ReSharper disable RedundantIfElseBlock
            else
// ReSharper restore RedundantIfElseBlock
            {
                var displayNameAttribute = memberInfo.GetAttribute<DisplayNameAttribute>(false);
                if (displayNameAttribute != null)
                {
                    return displayNameAttribute.DisplayName;
                }
// ReSharper disable RedundantIfElseBlock
                else
// ReSharper restore RedundantIfElseBlock
                {
                    return memberInfo.Name;
                }
            }
        }

        public static MemberInfo GetPropertyInformation(Expression propertyExpression)
        {
            Debug.Assert(propertyExpression != null, "propertyExpression != null");
            var memberExpr = propertyExpression as MemberExpression;
            if (memberExpr == null)
            {
                var unaryExpr = propertyExpression as UnaryExpression;
                if (unaryExpr != null && unaryExpr.NodeType == ExpressionType.Convert)
                {
                    memberExpr = unaryExpr.Operand as MemberExpression;
                }
            }

            if (memberExpr != null && memberExpr.Member.MemberType == MemberTypes.Property)
            {
                return memberExpr.Member;
            }

            return null;
        }

        public static T GetAttribute<T>(this MemberInfo member, bool isRequired)
            where T : Attribute
        {
            var attribute = member.GetCustomAttributes(typeof(T), false).SingleOrDefault();

            if (attribute == null && isRequired)
            {
                throw new ArgumentException(
                    string.Format(
                        CultureInfo.InvariantCulture,
                        "The {0} attribute must be defined on member {1}",
                        typeof(T).Name,
                        member.Name));
            }

            return (T)attribute;
        }

    } 
```

**样本：**

```
string displayName = ReflectionExtensions.GetPropertyDisplayName<SomeClass>(i => i.SomeProperty); 
```

![在此处输入图像描述](../Images/fda65698102181ccbbc02542be0b809f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T01:55:59.043

3个小时，我找到了解决方案。

首先

```
 [Display(Name = "Employed: ")]
  public Nullable<bool> Employed { get; set; } 
```

和

```
 [DisplayName("Employed: ")]
  public Nullable<bool> Employed { get; set; } 
```

不一样。:) 对于 MVC，我们必须使用这种语法`[DisplayName("Employed: ")]`

类元数据属性也应该看起来像

```
[MetadataType(typeof(PatientMetadata))]
public partial class Patient
{
....
 internal sealed class PatientMetadata
        { 
```

最后是[代码](http://alandjackson.wordpress.com/2011/01/06/c-display-name-from-property-using-reflection/)

```
 public static class DisplayNameHelper
    {
        public static string GetDisplayName(object obj, string propertyName)
        {
            if (obj == null) return null;
            return GetDisplayName(obj.GetType(), propertyName);

        }

        public static string GetDisplayName(Type type, string propertyName)
        {
            var property = type.GetProperty(propertyName);
            if (property == null) return null;

            return GetDisplayName(property);
        }

        public static string GetDisplayName(PropertyInfo property)
        {
            var attrName = GetAttributeDisplayName(property);
            if (!string.IsNullOrEmpty(attrName))
                return attrName;

            var metaName = GetMetaDisplayName(property);
            if (!string.IsNullOrEmpty(metaName))
                return metaName;

            return property.Name.ToString(CultureInfo.InvariantCulture);
        }

        private static string GetAttributeDisplayName(PropertyInfo property)
        {
            var atts = property.GetCustomAttributes(
                typeof(DisplayNameAttribute), true);
            if (atts.Length == 0)
                return null;
            var displayNameAttribute = atts[0] as DisplayNameAttribute;
            return displayNameAttribute != null ? displayNameAttribute.DisplayName : null;
        }

        private static string GetMetaDisplayName(PropertyInfo property)
        {
            if (property.DeclaringType != null)
            {
                var atts = property.DeclaringType.GetCustomAttributes(
                    typeof(MetadataTypeAttribute), true);
                if (atts.Length == 0)
                    return null;

                var metaAttr = atts[0] as MetadataTypeAttribute;
                if (metaAttr != null)
                {
                    var metaProperty =
                        metaAttr.MetadataClassType.GetProperty(property.Name);
                    return metaProperty == null ? null : GetAttributeDisplayName(metaProperty);
                }
            }
            return null;
        }
    } 
```

如何使用：

```
var t = patient.GetType();

                foreach (var pi in t.GetProperties())
                {
                    var dn = DisplayNameHelper.GetDisplayName(pi);
                } 
```

完毕！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:42:59.067

```
 Type t = model.GetType();
 foreach (PropertyInfo pi in t.GetProperties())
 {
     var attr = pi.GetCustomAttribute(DisplayNameAttribute, true);
     if (attr != null) ...

 } 
```

# ruby-on-rails-3 - Rails - 取消redirect_to调用

> ID：12868906
> 
> 赞同：0
> 
> 时间：2012-10-13T00:39:42.450
> 
> 标签：ruby-on-rails-3, routing

[根据我在这里](https://stackoverflow.com/questions/12858528/rails-attaching-image-through-paperclip-on-nested-fields-causes-unwanted-unavo)遇到的另一个未解决的问题，我遇到了一个问题，我只需要同时快速解决这个问题，这样我就可以进入项目的下一个部分，稍后我会回来正确解决这个问题。

我想知道，`redirect_to`如果之前在控制器方法中调用了某个动作，那么 Rails 中有没有办法“取消”一个动作？我不想这样做`redirect_to :nothing`，我只想让它好像没有调用 redirect_to 一样。

# javascript - IE 窗口名称被忽略？

> ID：12868910
> 
> 赞同：0
> 
> 时间：2012-10-13T00:40:26.083
> 
> 标签：javascript, internet-explorer, firefox, window

我编写了一个 HTML 页面，它在通过该`onload`方法加载时为其窗口命名。然后单击页面上的按钮会打开另一个窗口，其中包含一个表单，其搜索结果应返回并显示在命名的原始窗口中。这在 Firefox 中运行良好。然后我工作的血腥公司在 IE 上标准化，其中表单搜索结果显示在与表单窗口本身相同的窗口中，显然忽略了在现有原始窗口中打开 window.open 的方向。

想法？

# c++ - HugeInt 的重载除法运算符

> ID：12868911
> 
> 赞同：5
> 
> 时间：2012-10-13T00:41:00.297
> 
> 标签：c++, algorithm, math, division

> **可能重复：**
> [数字很大的除法](https://stackoverflow.com/questions/12233968/division-with-really-big-numbers)

我需要重载 / 运算符来处理两个 HugeInt 对象，它们被简单地定义为 30 个短裤的数组。这是家庭作业，顺便说一句，但我已经为这个问题绞尽脑汁好几天了。

我已经重载了 * 运算符：

```
HugeInt HugeInt::operator*(const HugeInt &op2){
HugeInt temp;
short placeProducts[hugeIntSize + 1][hugeIntSize] = {0};
short product;
int carry = 0;
int k, leftSize, rightSize, numOfSumRows;

leftSize = getDigitLength();
rightSize = op2.getDigitLength();

if(leftSize <= rightSize) {

    numOfSumRows = leftSize;

    for(int i = (hugeIntSize - 1), k = 0; k < numOfSumRows; i--, k++) {

        for(int j = (hugeIntSize - 1); j >= k; j--) {

            product = integer[i] * op2.integer[j] + carry;

            if (product > 9) {

                carry = product / 10;

                product %= 10;

            } else {

                carry = 0;
            }
            placeProducts[k][j - k] = product;
        }
    }

} else {
    numOfSumRows = rightSize;

    for(int i = (hugeIntSize - 1), k = 0; k < numOfSumRows; i--, k++) {

        for(int j = (hugeIntSize - 1); j >= k; j--) {

            product = integer[j] * op2.integer[i] + carry;

            if (product > 9) {

                carry = product / 10;

                product %= 10;

            } else {

                carry = 0;
            }
            placeProducts[k][j - k] = product;
        }
    }
}
sumProductsArray(placeProducts, numOfSumRows);

for(int i = 0; i < hugeIntSize; i++)
{
    temp.integer[i] = placeProducts[hugeIntSize][i];
}

return temp;} 
```

但是我如何重载 / op？我的主要问题不在于 C++ 代码或语法，而在于我的算法划分。当我相乘时，我能够逐位进行。我在我的二维数组中存储每个产品（也就是上面每个数字的 1 位数字，然后使用我的进位算法在上面每个 num 的 10 位数字时间）。每次我得到新产品时，它都会向左偏移 n + 1，这会将它“乘”以所需的 10 次方。然后我只是总结所有列。

I can't for the life of me figure out how to code the long division method. Since I'm dealing with two arrays it has to be digit by digit, and I suspect it might be as easy as reversing the multiplication algorithm. Nested loops and subtraction? I would need a variable for the quotient and reminder? Is there a better method? I just need to be pointed in the right direction.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:17:43.410

在整数的计算除法中，有一些有趣的结果：

*   分子 < 分母意味着商 = 0
*   分子 == 分母意味着商 = 1
*   分子 > 分母，需要长除法来确定商。

前两个条件可以通过 for 循环来满足。您可以重载小于和等于关系运算符来封装此行为。

对于长除法，您将需要乘法运算符以及重载的小于和减法运算符，以及附加数字成员函数来执行运算。

这是蛮力，但应该完成工作。

# c# - 在 ASP.NET MVC 4 C# Code First 中指定 ON DELETE NO ACTION

> ID：12868912
> 
> 赞同：32
> 
> 时间：2012-10-13T00:41:15.210
> 
> 标签：c#, asp.net-mvc, entity-framework, foreign-keys, code-first

如何在我的模型设计中指定 ON DELETE NO ACTION 外键约束？

目前，我有：

```
public class Status
{
    [Required]
    public int StatusId { get; set; }

    [Required]
    [DisplayName("Status")]
    public string Name { get; set; }
}

public class Restuarant
{
    public int RestaurantId { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    [EmailAddress]
    public string Email { get; set; }
    [Required]
    public string Telephone { get; set; }
    [Required]
    public int StatusId { get; set; }
    public List<Menu> Menus { get; set; }

    // NAVIGATION PROPERTIES
    public virtual Status Status { get; set; }
}

public class Menu
{
    public int MenuId { get; set; }

    [Required]
    public int RestaurantId { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    public int StatusId { get; set; }

    // NAVIGATION PROPERTIES
    public virtual Status Status { get; set; }
    public virtual Restaurant Restaurant { get; set; }
} 
```

还有我的 DbContext：

```
public class MenuEntities : DbContext
{
    public DbSet<Status> Statuses { get; set; }
    public DbSet<Restaurant> Restaurants { get; set; }
    public DbSet<Menu> Menus { get; set; }
} 
```

如你看到的：

*   一家餐厅有很多菜单
*   餐厅有一个状态
*   菜单属于 1 家餐厅
*   **餐厅和菜单都有 1 个状态。（现场、隐形、草稿）**

自然，如果状态被删除，我当然不想级​​联，因为这会搞砸一切。

**更新：**

Mark Oreta 在下面的示例中提到使用以下内容：

```
modelBuilder.Entity<FirstEntity>() 
    .HasMany(f => f.SecondEntities) 
    .WithOptional() 
    .WillCascadeOnDelete(false); 
```

我把这段代码放在哪里？在我的 MenuEntities / DbContext 类中？任何人都可以提供一个使用这个的例子吗？

**更新：** 现在开始工作了，但是这在尝试为数据库播种时产生了多重性约束错误......

```
Multiplicity constraint violated. The role 'Menu_Status_Source' of the relationship 'LaCascadaWebApi.Models.Menu_Status' has multiplicity 1 or 0..1. 
```

我的数据库初始化程序：

[http://pastebin.com/T2XWsAqk](http://pastebin.com/T2XWsAqk)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-13T01:21:02.667

您可以通过删除 OnModelCreating 方法中的级联删除约定来为整个上下文禁用它：

```
 protected override void OnModelCreating( DbModelBuilder modelBuilder )
  {
     modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
  } 
```

或者，您可以使用流畅的映射（也在 OnModelCreating 中）为每个关系执行此操作：

**编辑：你会把它放在你的菜单实体中**

```
public class MenuEntities : DbContext
{
    public DbSet<Status> Statuses { get; set; }
    public DbSet<Restaurant> Restaurants { get; set; }
    public DbSet<Menu> Menus { get; set; }

      protected override void OnModelCreating( DbModelBuilder modelBuilder )
      {

         modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();

     modelBuilder.Entity<Menu>()
        .HasRequired( f => f.Status )
        .WithRequiredDependent()
        .WillCascadeOnDelete( false );

     modelBuilder.Entity<Restaurant>()
        .HasRequired( f => f.Status )
        .WithRequiredDependent()
        .WillCascadeOnDelete( false );

      }

} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2018-03-07T05:39:48.060

只需将 FK 属性设置为可为空，然后级联删除就会消失。

```
public int? StatusId { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-22T08:55:12.697

对模型进行更改后，请确保通过添加 -Force 参数重新生成迁移文件。

Add-Migration MigrationName -Force

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-12T13:32:04.783

将此行添加到上下文中字段的末尾；

.OnDelete(DeleteBehavior.Restrict);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-14T19:23:27.897

把它放到你的`MenuEntities`班级（来自 的班级`DbContext`）：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
   modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>(); 
} 
```

# c# - 使用 OnlineIdAuthenticator 对 Windows 8 应用商店应用程序进行长期身份验证

> ID：12868920
> 
> 赞同：1
> 
> 时间：2012-10-13T00:42:00.880
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

[我有一个 Windows 8 应用程序，它使用OnlineIdAuthenticator](http://msdn.microsoft.com/en-us/library/windows/apps/hh701028.aspx)对象成功地将用户签名到 Live Connect 。但是，从登录过程中检索到的用户访问令牌将在大约一个小时后过期。[Live Connect](http://msdn.microsoft.com/en-us/library/live/hh243649.aspx)文档解释了如何在服务器端场景中使用刷新令牌来更新用户的访问令牌 。

是否可以在 Win 8 应用程序中使用刷新令牌来让用户登录超过一个小时？如果是这样，我如何获得第一个刷新令牌（我在返回的 UserIdentity 或 OnlineIdServiceTicket 对象中看不到它）？

如果无法使用刷新令牌，是否有另一种方法可以让用户在 Windows 8 应用程序中登录其 Microsoft 帐户超过一个小时？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:41:47.057

我会查看[DataProtection API](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465034.aspx)以获取有关跨会话存储敏感数据的更多信息。

# sml - 我想将列表拆分为奇数和偶数元素的元组

> ID：12868924
> 
> 赞同：3
> 
> 时间：2012-10-13T00:42:40.240
> 
> 标签：sml

大家好，我是编程新手，我正在为学习和享受做一个问题。我在这一点上有点卡住了..问题来自`Introduction to Programming using Sml 5.9`

我想拆分一个列表`[x1, x2, x3, ... ,xn] = ([x1, x3,....], [x2, x4,...])`

这是我到目前为止所做的：

```
fun split [] =  []
  | split (x1::x2::x3::x4::xs) = ([x1, x3], [x2, x4])::split xs

val test1split = split [1, 1, 2, 3]; 
```

从这里我得到：

`[([1, 2], [1, 3])]`....（我想要一个带有拆分列表的元组，这显然不是）

如果元素超过 4 个，则该功能不起作用。也许我需要一个辅助函数来首先对列表中的偶数和奇数元素进行排序？我希望有人可以帮助我朝着正确的方向追踪我的思想，直到那时我一直在努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:16:15.167

```
fun split [] = ([], [])   
  | split [x] = ([x], [])  
  | split (x1::x2::xs) = 
               let 
                 val (ys, zs) = split xs
               in 
                ((x1::ys), (x2::zs))
              end;

val test1split = split [1, 1, 2, 3, 5, 6] = ([1, 2, 5], [1, 3, 6])
val test2split = split [8, 7, 6, 5, 4, 3] = ([8, 6, 4], [7, 5, 3])
val test3split = split [8, 7] = ([8], [7])
val test4split = split [8] = ([8], []) 
```

解决了...不完全确定如何大声笑，需要更多练习才能掌握它。没有指针就无法做到...非常感谢尼克巴恩斯的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T01:32:07.360

我会尽量不要放弃太多，但这里有一些提示：

*   您需要两种基本情况 - 一种用于`[]`，一种用于`[x]`。
*   您的一般情况只需要处理两个元素，而不是四个（将一个放在第一个列表中，一个放在第二个列表中）
*   目前，您`split`返回的是一个列表，而不是一个元组。您的第一个基本案例的结果应该是`([],[])`.
*   在一般情况下，递归`split xs`将返回一个 tuple `(ys,zs)`。您需要提取这些值，并根据 、 和 构建结果`ys`元组。`zs``x1``x2`

**（编辑）**关于您修改后的解决方案的几点：

*   您一次只需要处理两个元素 - 一般情况应该是`split x1::x2::xs`
*   `split [x,y]`由一般情况处理 - 不需要另一个基本情况。
*   你错过了递归调用！元素最终出现在两个列表中，因为您将`xs`直接放入输出的两半 - 您需要先将其拆分。从...开始
    `let (ys, zs) = split xs in ...`

# objective-c - ios int to float 比较总是计算为 true

> ID：12868929
> 
> 赞同：0
> 
> 时间：2012-10-13T00:43:38.977
> 
> 标签：objective-c, ios

我正在尝试将 CGFloat 与整数值进行比较。基于这个值，执行一个有条件的......非常标准。但是，出于某种原因，这将始终是正确的。我什至打印出这些值，它们显然小于 800....纯粹基于它的二进制值，所以我尝试了这个有风险的小演员操作......有什么想法吗？

```
CGPoint textViewPoint = [scroller convertPoint:[textView center] toView:(UIView *)self.view];
        NSLog(@"the y coord is %f", textViewPoint.y);

    int size = (int)textViewPoint.y;
    NSLog(@"the yint %d", size);
    //move the main view, so that the keyboard does not hide it.
    //if  (self.scroller.frame.origin.y >= 0 && textViewPoint.y > 800.0);
    if(size > 800);
    {
        NSLog(@"moving up"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:51:57.157

问题在于行`;`尾`if(size > 800);`，而不是 int 与 float 的比较。删除它，一切都应该没问题。

这是因为这个分号被解释为你的`if`语句的主体，这就是当条件为真时执行的这个 NO-OP 语句。然后，该`if`空主体旁边的其​​余代码位于主体之外，`if`因此无论条件值如何都将执行。这就像你写的那样：

```
if(size > 800)
{
}
{
    NSLog(@"moving up");
} 
```

* * *

### *编译器警告提示*

编译器通常会警告您此错误。确保在您的项目构建设置（编译器标志）中**激活了“空循环体”警告**`-Wempty-body`：这样下次您犯此错误时，您将收到有关它的警告，并且会知道什么是错误的以及如何修复它。

# ruby - 使用 Dalli gem 连接到 Kestrel（或 Heroku 兼容的 gem 以通过 memcached 接口连接到 Kestrel）

> ID：12868932
> 
> 赞同：1
> 
> 时间：2012-10-13T00:45:17.823
> 
> 标签：ruby, heroku, memcached, dalli, kestrel

我无法使用[Dalli](https://github.com/mperham/dalli)（一个 memcached 客户端）gem连接到[Kestrel 。](https://github.com/robey/kestrel)dalli 与红隼不兼容吗？

```
require 'dalli'
dc = Dalli::Client.new('localhost:221133')
dc.set('abc', 123) 
```

从 IRB/Pry 执行此操作返回：

```
I, [2012-10-12T17:38:03.994201 #19524]  INFO -- : localhost:22133 failed (count: 2)
Dalli::RingError: No server available
from /Users/eli/.rbenv/versions/1.9.3-p194-perf/lib/ruby/gems/1.9.1/gems/dalli-2.2.1/lib/dalli/ring.rb:45:in `server_for_key' 
```

然而，使用 memcached gem 做同样的事情效果很好：

```
require 'memcached'
mc = Dalli::Client.new('localhost:221133')
mc.set('abc', 123)
mc.get('abc') 
```

* * *

请注意，我尝试从 memcached gem 切换到 dalli 的唯一原因是我无法让 Heroku 安装 memcached gem：

```
rlibmemcached_wrap.c: In function ‘Init_rlibmemcached’:
rlibmemcached_wrap.c:13776: error: implicit declaration of function ‘sasl_client_init’
rlibmemcached_wrap.c:13776: error: ‘SASL_OK’ undeclared (first use in this function)
make: *** [rlibmemcached_wrap.o] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:38:21.893

Dalli 与 Kestrel 不兼容。Dalli 只使用[二进制内存缓存协议](http://cloud.github.com/downloads/memcached/memcached/protocol-binary.txt)，而 Kestrel 只使用[文本内存缓存协议](https://github.com/memcached/memcached/blob/master/doc/protocol.txt)。

Heroku 支持人员告诉我，[memcached gem](https://github.com/evan/memcached)与他们的 Cedar 堆栈不兼容。

因此，在 Heroku 上支持 Kestrel 的最佳选择是使用较旧的[memcache-client gem](https://github.com/mperham/memcache-client)，它是 Dalli 的前身。

# visual-studio-2012 - Visual Studio 2012 和 Silverlight 5

> ID：12868935
> 
> 赞同：0
> 
> 时间：2012-10-13T00:46:23.490
> 
> 标签：visual-studio-2012, silverlight-5.0

VS 2012 是否带有 SL 5？，如果没有，我该怎么办？，我猜为 VS 2010 安装的工具不适用于 VS 2012。

如果我不卸载 VS 2010，Silverlight 5 是否可以在 VS 2012 中运行而无需执行任何操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:52:44.870

根据[MS SilverLight 论坛](http://forums.silverlight.net/t/256578.aspx/1)。

> 有谁知道 Silverlight 5 Tools for Visual Studio 是否与 Visual Studio 2012 rc 兼容？我还没有找到 vs2012 特定的版本。

有了这个答案

> 你好，
> 
> 你不需要那个。您可以直接在 Visual Studio 2012 RC 中创建 Silverlight 项目。更多 Visual Studio 2012 RC 兼容性问题请参考：
> 
> [http://msdn.microsoft.com/en-us/library/hh266747(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh266747(v=vs.110).aspx)
> 
> 此致 Allen Chen Microsoft 在线社区支持
> 
> 如果有帮助，请记住将回复标记为答案，如果没有提供帮助，请取消标记。

所以我认为 RTM 版本也是如此。

# c++ - C++，我可以禁止特定的策略组合吗？

> ID：12868938
> 
> 赞同：1
> 
> 时间：2012-10-13T00:47:06.223
> 
> 标签：c++, templates, typetraits

给定一个采用两个策略模板参数的类：

```
template<typename PolicyA, typename PolicyB>
class widget; 
```

以及以下可用的策略类 A1、A2、A3、B1、B2、B3。如何传达 1s 和 2s 相互兼容但 A3 仅与 B3 兼容？也就是说，只允许以下实例化：

```
widget<A1, B1> w11;    // All valid.
widget<A1, B2> w12;
widget<A2, B1> w21;
widget<A2, B2> w22;
widget<A3, B3> w33;

// No other combination allowed. 
```

我在专业化中使用 std::enable_if 的失败尝试遇到了编译错误：

```
template<typename A, typename B>
class<A3, enable_if<is_same<B, B3>::value, B3>::type>
{}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:38:03.317

```
class A1; class A2; class A3; class B1; class B2; class B3;

/// Generic type
template <typename T1, typename T2>
class widget
{
  static_assert(std::is_same<T1, A3>::value ^ !std::is_same<T2, B3>::value,
    "Incompatible policy types selected.");
};

/// Some specialization
template <>
class widget<A1, A2>
{
};

widget<A1, B1> w11;
widget<A1, B2> w12;
widget<A2, B1> w21;
widget<A2, B2> w22;
widget<A3, B3> w33;
//widget<A1, B3> w13; // error C2338: Incompatible policy types selected.
//widget<A3, B2> w32; // error C2338: Incompatible policy types selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:51:20.647

听起来您已经了解[专用模板](http://www.cprogramming.com/tutorial/template_specialization.html)。

无论如何，一个想法是为不兼容的类型定义一个专门的模板，自动抛出一个`IncompatibleException`或一些东西。

所以从技术上讲，用户可以定义类型，但它是不可用且完全显而易见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:01:56.897

简单的解决方案是对每个不兼容的情况进行专门化，并让它包含一些会触发编译错误的东西。像这样的东西：

```
template <>
class widget<A1, B3> {
  char error__policies_A1_and_B3_are_incompatible[0];
}; 
```

长度为 0 的 char 数组会使编译器关闭，“消息”将出现在编译错误的某处。

# json - 有没有办法获得用 arbor.js 构建的图形的 JSON 表示？

> ID：12868943
> 
> 赞同：3
> 
> 时间：2012-10-13T00:48:19.743
> 
> 标签：json, arbor.js

我正在使用[arbor.js](http://arborjs.org)库构建图表。

我使用 arbor.js 的 addNode() 和 addEdge() 函数构建我的图表。现在我想使用类似 .toJson() 的东西来检索构建的图形，它应该具有以下形式：

`{nodes:{}, edges:{}}`

其中节点属性包含节点名称到数据对象的映射。例如，

```
{ nodes:{foo:{color:"red", mass:2},
         bar:{color:"green"}} } 
```

并且边缘属性包含嵌套对象以将源标识符映射到目标，然后将目标映射到边缘数据对象。例如，

```
{ edges:{bar:{foo:{similarity:0},
              baz:{similarity:.666}} } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:38:40.267

我将从 、 和 方法开始`eachNode`，使用`eachEdge`它们来处理整个图形并使用这些方法返回的内容创建一个 json 对象。看起来没有“遍历图形并构建 json 对象”的内置方法。`getNodes``getEdges`

# ruby-on-rails - 保存新创建的对象

> ID：12868948
> 
> 赞同：1
> 
> 时间：2012-10-13T00:49:10.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在 Rails 控制器代码中

```
def create
  @post = Post.new(params[:post])
  @post.random_hash = generate_random_hash(params[:post][:title])
  if @post.save
    format.html { redirect_to @post }
  else
    format.html { render action: "new" }
  end
end 
```

定义的前两行是否应该放在里面`if @post.save`？如果post没有保存，创建的Post对象`Post.new`还会存入数据库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:57:25.420

1.  > 如果`@post.save`或不应该将定义的前两行放在里面吗？

    绝对不是。如果按照您的建议将其更改为以下内容：

    ```
    def create
      if @post.save
        @post = Post.new(params[:post])
        @post.random_hash = generate_random_hash(params[:post][:title])
        format.html { redirect_to @post }
      else
        format.html { render action: "new" }
      end
    end 
    ```

    然后它根本不起作用。没有`@post`可调用`save`的。

2.  > 如果帖子没有保存，`Post`创建的对象`Post.new`还会存入数据库吗？

    当然不是。这就是保存的作用：将对象保存在数据库中。如果您不调用`save`对象`Post`或`save`返回`false`（由于验证失败而发生这种情况），则该对象*未*存储在数据库中。`Post.new`只是在内存中创建一个新`Post`对象——它根本不接触数据库。

# python - Python - 使用线程或队列迭代调用函数的 for 循环

> ID：12868956
> 
> 赞同：3
> 
> 时间：2012-10-13T00:50:43.860
> 
> 标签：python, multithreading, for-loop, queue, python-2.6

我对 python 相当陌生，正在制作一个脚本，允许将点云数据从其他程序带入 Autodesk Maya。我的脚本运行良好，但我想做的是让它更快。我有一个 for 循环，它遍历编号文件的列表。即datafile001.txt、datafile002.txt等。我想知道是否有办法让它一次做一个以上的事情，可能使用线程或队列？下面是我一直在处理的代码：

```
 def threadedFuntion(args):
         if len(sourceFiles) > 3:
             for count, item in enumerate(sourceFiles):
                     t1=Thread(target=convertPcToPdc,args=(sourceFiles[filenumber1], particlesName, startframe, endframe, pdcIncrements, outputDirectory, variableFolder, acceptableArrayforms, dataType))
                     t1.start()
                     t2=Thread(target=convertPcToPdc,args=(sourceFiles[filenumber2], particlesName, startframe, endframe, pdcIncrements, outputDirectory, variableFolder, acceptableArrayforms, dataType))
                     t2.start()
                     t3=Thread(target=convertPcToPdc,args=(sourceFiles[filenumber3], particlesName, startframe, endframe, pdcIncrements, outputDirectory, variableFolder, acceptableArrayforms, dataType))
                     t3.start()
                     t4=Thread(target=convertPcToPdc,args=(sourceFiles[filenumber4], particlesName, startframe, endframe, pdcIncrements, outputDirectory, variableFolder, acceptableArrayforms, dataType))
                     t4.start() 
```

由于多种原因，这显然不起作用，首先它只会创建 4 个线程，我希望能够提供或多或少的选项。第二个错误是因为它试图重用一个线程？就像我说的那样，我对 python 很陌生，而且有点过头了，我已经在这里阅读了几篇文章，但无法让一篇文章完全正确地工作。我认为队列可能是我需要但无法弄清楚的东西，我尝试了条件语句和连接语句，但再次无法得到我想要的。

我想更具体地说，我想要实现的是该函数正在读取文本文件，检索坐标，然后将它们导出为二进制文件以供 Maya 读取。这些文本文件中的一个通常具有 5-1000 万个 x、y、z 坐标，这需要相当长的时间。在一台非常糟糕的计算机上完成一个文件大约需要 30 分钟到 1 小时，任务管理器说 python 只使用 12% 的处理器和大约 1% 的内存，所以如果我可以一次执行多个这些，它会做这 100 个或更多文件的速度要快得多。我认为多线程/排队 for 循环并不难，但我已经迷失了大约一周的时间并尝试了失败的解决方案。

谢谢大家的帮助，我真的很感激，并认为这个网站很棒。这是我的第一篇文章，但我觉得我只是通过阅读这里完全学会了 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:25:39.093

子类 threading.Thread 并将您的工作函数作为 run() 的一部分放在该类中。

```
import threading
import time
import random

class Worker(threading.Thread):
    def __init__(self, srcfile, printlock,**kwargs):
        super(Worker,self).__init__(**kwargs)
        self.srcfile = srcfile
        self.lock = printlock # so threads don't step on each other's prints

    def run(self):
        with self.lock:
            print("starting %s on %s" % (self.ident,self.srcfile))
        # do whatever you need to, return when done
        # example, sleep for a random interval up to 10 seconds
        time.sleep(random.random()*10)
        with self.lock:
            print("%s done" % self.ident)

def threadme(srcfiles):
    printlock = threading.Lock()
    threadpool = []
    for file in srcfiles:
        threadpool.append(Worker(file,printlock))

    for thr in threadpool:
        thr.start()

    # this loop will block until all threads are done
    # (however it won't necessarily first join those that are done first)
    for thr in threadpool:
        thr.join()

    print("all threads are done")

if __name__ == "__main__":
    threadme(["abc","def","ghi"]) 
```

根据要求，要限制线程数，请使用以下命令：

```
def threadme(infiles,threadlimit=None,timeout=0.01):
    assert threadlimit is None or threadlimit > 0, \
           "need at least one thread";
    printlock = threading.Lock()
    srcfiles = list(infiles)
    threadpool = []

    # keep going while work to do or being done
    while srcfiles or threadpool:

        # while there's room, remove source files
        # and add to the pool
        while srcfiles and \
           (threadlimit is None \
            or len(threadpool) < threadlimit):
            file = srcfiles.pop()
            wrkr = Worker(file,printlock)
            wrkr.start()
            threadpool.append(wrkr)

        # remove completed threads from the pool
        for thr in threadpool:
            thr.join(timeout=timeout)
            if not thr.is_alive():
                threadpool.remove(thr)

    print("all threads are done")

if __name__ == "__main__":
    for lim in (1,2,3,4):
        print("--- Running with thread limit %i ---" % lim)
        threadme(("abc","def","ghi"),threadlimit=lim) 
```

请注意，这实际上将反向处理源（由于列表 pop()）。如果您要求它们按顺序完成，请在某处反转列表，或使用 deque 和 popleft()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:56:39.327

我建议为此使用[mrjob](http://packages.python.org/mrjob/)。

Mr Job 是[map reduce](http://en.wikipedia.org/wiki/MapReduce)的 python 实现。

下面是对大量文本文件进行多线程字数统计的 mr 作业代码：

```
from mrjob.job import MRJob

class MRWordCounter(MRJob):
    def get_words(self, key, line):
        for word in line.split():
            yield word, 1

    def sum_words(self, word, occurrences):
        yield word, sum(occurrences)

    def steps(self):
        return [self.mr(self.get_words, self.sum_words),]

if __name__ == '__main__':
    MRWordCounter.run() 
```

此代码并行映射所有文件（计算每个文件的字数），然后将各种计数减少为一个总字数。

# javascript - AJAX - 在 $.post 侧设置对象属性，'self'引用不起作用

> ID：12868964
> 
> 赞同：0
> 
> 时间：2012-10-13T00:52:23.390
> 
> 标签：javascript, ajax, properties

这真让我抓狂。

它似乎无法从 AJAX 内部设置属性的值。

下面是我的代码

```
function Captcha(userKey) {
    var self = this;

    this.key;
    this.getCaptchaKey = function(userKey) {
        $.post('/api/captcha/get-key',data, function(data, status,jqXHR) {
            if(status) {
                self.key = data.data.captchaKey;

            }
        },"json");
    };
    this.getCaptchaKey(userKey);
} 
```

我将“this”设置为“self”以从 AJAX 调用内部引用。

然后当我 console.log() 这个对象本身在对象之外时，它告诉我该值已经设置。

```
self.captcha = new Captcha(self.userKey);
    self.captchaKey = self.captcha.key

    console.log(self.captcha); 
```

所以'self.captcha'返回从AJAX调用中设置的'key'正确值的对象。

但是当我 console.log(self.captcha.key) 时，它说'未定义'

我一直在到处搜索，但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:01:55.700

我认为您的问题是您将异步调用视为同步的事实。您正在 Ajax 调用返回之前读取该值。

# javascript - Node.js 中的管道/流式处理 JavaScript 对象

> ID：12868969
> 
> 赞同：8
> 
> 时间：2012-10-13T00:53:50.793
> 
> 标签：javascript, node.js, object, stream, pipe

我正试图围绕 Node.js 流转转，并不是说我对 JavaScript 和节点很陌生，我真正掌握的最后一种语言是 Perl 和 PHP :-D

我已经阅读了 @nodejs.org 的 Buffer/Streams 文档，观看了 James Halliday [@LXJS](https://www.youtube.com/watch?v=lQAV3bPOYHo)，阅读了他的流手册和 Thorsten Lorenz[事件流帖子](http://thlorenz.com/#/blog/post/event-stream)。我开始了解基础知识:)

我处理在 RDF 中序列化的数据（既不是 JSON 也不是 XML）。我设法获取数据（通过请求在真实代码中）并使用`rdfstore`模块将其解析为 JS 对象。

到目前为止，我这样做：

```
s.createReadStream('myRDFdata.ttl').pipe(serialize()).pipe(process.stdout); 
```

`serialize()`现在同时解析序列化代码的工作在哪里。我使用`through`模块来连接流。

现在我有更多方法（不是真正的函数声明，但我希望你明白这一点）：

*   `getRecipe(parsedRDF)`-> 获取已解析的 RDF（作为 JavaScript 对象）并告诉我如何使用它
*   `createMeal(parsedRDF, recipe)`-> 从上面获取已解析的 RDF 和配方，并从中创建一个新的 RDF 对象
*   这个新对象需要被序列化并发送到浏览器
*   （在现实世界`getRecipe`中将不得不在浏览器中进行用户交互）

当我稍后增强代码时，我喜欢通过管道将它们链接在一起以获得更高的灵活性的想法。但我不想每次都将它序列化为 RDF 序列化，而只是发送 JS 对象。根据我在文档中阅读的内容，我可以使用该`stringify`模块从每个步骤中获取一个字符串，以便将其传递到下一步。但：

*   这真的有意义吗？就我是否增加了不必要的开销或者这可以忽略不计？
*   我不知道如何将 parsedRDF 提供给`getRecipe`具有必须首先调用的依赖项的两种方法，并且输出也是输入`createMeal`。有没有可以帮助我的模块？
*   可能是我必须向用户询问最终的配方选择，所以我可能需要将内容发送到那里的浏览器以获得最终答案。当管道“等待”时，我可以在套接字上做这样的事情吗？

我希望这表明我正在尝试做的事情，如果没有，我会尝试提供更多细节/改写。

更新：睡过之后，我想出了更多的东西：

*   如果有官方的序列化格式，将像 RDF 这样的格式序列化为非标准的格式可能没有意义。`stringify`因此，我将简单地在步骤之间传递官方 RDF 序列化，而不是使用
*   这确实意味着我在每个步骤中解析/序列化对象，这肯定会增加开销。问题是我在乎吗？我可以扩展我用来从流中解析并序列化的 RDF 模块
*   我可以通过简单地从to中添加一些信息来解决 和 之间的依赖问题`getRecipe`，这可以通过 RDF 轻松完成，而不会破坏原始数据模型。但是我仍然很想知道我是否可以使用管道处理这样的依赖项`createMeal``getRecipe``parseRDF`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T00:17:43.780

是的，创建一个 js 对象流是可以的，你只需要记住在将流写入 IO 之前通过管道将它再次序列化。

我建议编写一个名为 rdfStream 的模块来解析和序列化 rdf，你会像这样使用它

```
var rdf = require('rdf-stream')

fs.createReadStream(file) //get a text stream
  .pipe(rdf.parse())      //turn it into objects 
  .pipe(transform)        //optional, do something with the objects
  .pipe(rdf.stringify())  //turn back into text
  .pipe(process.stdout)   //write to IO. 
```

它也可以被其他在 node 中使用 rdf 的人使用，太棒了！

# html - HAML 中的条件 HTML 标记

> ID：12868977
> 
> 赞同：21
> 
> 时间：2012-10-13T00:55:56.603
> 
> 标签：html, haml

如何格式化 HAML 以输出类似于用于跨浏览器定位的条件 HTML 标记的样式？

```
<!doctype html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

如果我添加条件，它也会将整个页面包装在条件中。我曾考虑`:plain`在顶部使用 HAML 的过滤器并在底部手动添加`</html>`，但这对我来说似乎不太理想。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-15T17:01:57.807

其中前三个非常简单，因为它们只是普通的 HTML 注释，您可以使用[Haml 对条件注释](http://haml.info/docs/yardoc/file.REFERENCE.html#conditional_comments_)的支持：

```
/[if lt IE 8] <html class="no-js ie7 oldie" lang="en">
/[if IE 8] <html class="no-js ie8 oldie" lang="en">
/[if IE 9] <html class="no-js ie9 oldie" lang="en"> 
```

最后[一个有点不同](https://stackoverflow.com/questions/9107681/ie-conditional-comments-in-haml/9119406#9119406)。分解它，你想要的是围绕`html`开始标签的两条评论，所以第二条评论是`html`元素的第一个内容。此外，您不能将 Haml 语法用于条件注释，您必须使用文字注释。在 Haml 中，这看起来像：

```
<!--[if gt IE 9]><!-->
%html{:class => 'no-js', :lang => 'en'}
  <!--<![endif]--> 
```

这将产生如下 HTML：

```
<!--[if gt IE 9]><!-->
<html class='no-js' lang='en'>
  <!--<![endif]--> 
```

如果您愿意，可以使用[空格删除语法](http://haml.info/docs/yardoc/file.REFERENCE.html#whitespace_removal__and_)使生成的 HTML 更像您的示例：

```
<!--[if gt IE 9]><!-->
%html{:class => 'no-js', :lang => 'en'}<>
  <!--<![endif]--> 
```

把它们放在一起：

```
!!!
/[if lt IE 8] <html class="no-js ie7 oldie" lang="en">
/[if IE 8] <html class="no-js ie8 oldie" lang="en">
/[if IE 9] <html class="no-js ie9 oldie" lang="en">
<!--[if gt IE 9]><!-->
%html{:class => 'no-js', :lang => 'en'}<>
  <!--<![endif]-->
  content here 
```

产生：

```
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--><html class='no-js' lang='en'><!--<![endif]-->
content here</html> 
```

另一种技术是使用[Haml 的环绕助手](http://haml.info/docs/yardoc/Haml/Helpers.html#surround-instance_method)：

```
= surround "<!--[if gt IE 9]><!--><html class='no-js' lang='en'><!--<![endif]-->", "</html>" do
  content here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T02:10:20.747

```
<!doctype html>
/[if lt IE 8] <html class="no-js ie7 oldie" lang="en">
/[if IE 8] <html class="no-js ie8 oldie" lang="en">
/[if IE 9] <html class="no-js ie9 oldie" lang="en">
/ [if gt IE 9]><!
%html.no-js{:lang => "en"}
  / <![endif] 
```

# maven - 如何在 JRuby 中管理 Java/Maven 依赖项

> ID：12868978
> 
> 赞同：2
> 
> 时间：2012-10-13T00:55:59.507
> 
> 标签：maven, rubygems, jruby

我在 jruby 应用程序/库中寻找管理 java 依赖项的最佳方法。前段时间我读了一篇关于通过 ruby​​gems 获取基于 Maven 的 java 依赖项的文章。我试图对此进行跟进，并发现一些信息表明此功能已在 JRuby 1.7 中删除。我还发现了一些项目，如 ruby​​_maven 和 jbundler，但它们看起来正在进行中。

我对与 b​​undler 和 gemspec 的集成特别感兴趣。我不是 maven 的粉丝，更喜欢 ruby​​ / bundler 方式。

如果 jruby pro 可以对当前状态有所了解，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:47:23.047

我和我的同事正在开发一种工具来处理混合的 Java/JRuby 项目。我们希望这周能完成它，所以下周检查一下，看看它是否满足您的需求。（我们还需要稍微更新一下文档。）

[https://github.com/sam/doubleshot](https://github.com/sam/doubleshot)

您曾提到 JBundler 看起来像是一项正在进行的工作，但它确实有效。如果您迫不及待地想尝试我们的项目，我建议您试一试。

# c# - 向 DataTable 添加新行

> ID：12868980
> 
> 赞同：0
> 
> 时间：2012-10-13T00:56:10.843
> 
> 标签：c#, winforms, gridview, datatable, devexpress

我的表单中有一个 GeidView，我有一个按钮，它通过向 Datatable 添加一行来向 GridView 添加新记录，然后将此 DataTable 作为 GridContol 的数据源。

问题是当我添加一条新记录时，它会显示在 GridView 中，但是当我添加另一个 rocord 时，它不会显示在 GridView 中，GridView 始终包含我添加到 DataTable 的第一行！

那么请你帮我解决这个问题吗？

这是源代码：

```
private DataTable recompensesTable;

private void AjoutLivre_Load(object sender, EventArgs e)
        {
          recompensesTable = MakeRecomponsesTable();
          recompenseGridControl.DataSource = recompensesTable;
        }
private DataTable MakeRecomponsesTable()
        {
            DataTable recmpensesTable = new DataTable("Recompenses");

            var anneeColumn = new DataColumn();
            anneeColumn.DataType = Type.GetType("System.Int32");
            anneeColumn.ColumnName = "Année";
            recmpensesTable.Columns.Add(anneeColumn);

            var prixLiteraireColumn = new DataColumn();
            prixLiteraireColumn.DataType = Type.GetType("System.String");
            prixLiteraireColumn.ColumnName = "Prix Litéraire";
            recmpensesTable.Columns.Add(prixLiteraireColumn);

            return recmpensesTable;
        }

private void nouveauRecompense_Click(object sender, EventArgs e)
        {
            DataRow row = recompensesTable.NewRow();

            row[0] = ajoutRecompense.KeyWordAnnee;
            row[1] = ajoutRecompense.KeyWordPrixLiteraire;
            recompensesTable.Rows.Add(row);

            recompenseGridControl.DataSource = recompensesTable;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:14:34.170

In your Page_Load you have `recompensesTable = MakeRecomponsesTable();`. That overwrites the changes and recreate the datatable values

On page postback, variables are restored to their default values and they need to be recreated. You can use Session to maintain your values

```
private void AjoutLivre_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
   {
     DataTable recompensesTable = MakeRecomponsesTable();
     Session["recompensesTable"] = recompensesTable; //Save it to session the first time
     recompenseGridControl.DataSource = recompensesTable;
   }
} 
```

and retrieve the session preserved value

```
private void nouveauRecompense_Click(object sender, EventArgs e)
{
    DataTable recompensesTable = (DataTable) Session["recompensesTable"]; //retrieve it from session
    DataRow row =  recompensesTable.NewRow();

    row[0] = ajoutRecompense.KeyWordAnnee;
    row[1] = ajoutRecompense.KeyWordPrixLiteraire;
    recompensesTable.Rows.Add(row);

    Session["recompensesTable"] = recompensesTable; //save it back to session

    recompenseGridControl.DataSource = recompensesTable;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:16:44.303

改变你的

```
private void AjoutLivre_Load(object sender, EventArgs e)
    {
      recompensesTable = MakeRecomponsesTable();
      recompenseGridControl.DataSource = recompensesTable;
    } 
```

至

```
private void AjoutLivre_Load(object sender, EventArgs e)
    {
      if(!IsPostback)
         recompensesTable = MakeRecomponsesTable();
      recompenseGridControl.DataSource = recompensesTable;
    } 
```

您还必须将数据表保存到会话

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T01:13:23.287

the recmpensesTable is always a new DateTable, you should save it to session for next use.

# android - listView 的自定义视图 - 字体

> ID：12868982
> 
> 赞同：2
> 
> 时间：2012-10-13T00:56:34.163
> 
> 标签：android, android-layout, fonts, android-listview

我在为我的 ListView 设置自己的字体时遇到问题，我不知道如何使用自己的 Adapter 类以及我需要什么 xml（除了我放置 ListView 的那个）。我希望（在 ListView 中）仅用于具有自己字体的居中文本。那是我的适配器：

```
public class MyAdapter extends BaseAdapter {

private String[]       objects; // no objects just String array
private final Context   context;

public MyAdapter(Context context, String[] objects) {
    this.context = context;
    this.objects = objects;
}

@Override
public int getCount() {
    return objects.length;
}

@Override
public Object getItem(int position) {
    return objects[position];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    Object obj = objects[position];

    TextView tv = new TextView(context);
    tv.setText(obj.toString());
    Typeface tf = Typeface.createFromAsset(getAssets(),"fonts/kolejRogFont.ttf");
    tv.setTypeface(tf);

    return tv;
}
} 
```

它在 Lista.java 中调用

```
ListView lv = new ListView(this);
    lv.setAdapter(new MyAdapter(this, listview_array)); 
```

代码来自 StackOverFlow 上的另一个主题。

1.  我在线收到错误（未定义的方法）：

    字体 tf = Typeface.createFromAsset(getAssets(),"fonts/kolejRogFont.ttf");

2.屏幕上什么都没有出现。我应该为 ListView 布局制作 XML 吗？它应该包含什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T01:11:21.820

将 MyAdapter 代码更改为：

```
public class MyAdapter extends BaseAdapter {

Typeface tf;
private String[]       objects; // no objects just String array
private final Context   context;

public MyAdapter(Context context, String[] objects) {
    this.context = context;
    this.objects = objects;
    tf = Typeface.createFromAsset(context.getAssets(),"fonts/kolejRogFont.ttf");
}
////Your code ...

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    Object obj = objects[position];

    TextView tv = new TextView(context);
    tv.setText(obj.toString());
    tv.setTypeface(tf);
    return tv;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:09:35.747

`getAssets()`来自`Context`，因此它未定义到您的适配器。尝试使用这个：

```
Typeface tf = Typeface.createFromAsset(context.getAssets(),"fonts/kolejRogFont.ttf"); 
```

编辑：作为旁注，我会将该行移至构造函数并设置`tf`为类变量。确实没有必要在每次获得视图时都加载字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T12:57:41.723

关于为列表视图设置边距的答案，您应该在 list_view_items.zml 中设置边距。例如，在您的线性布局中设置边距或填充。

# android - 如何更改操作栏中 NAVIGATION_MODE_LIST 中的“小三角形颜色”

> ID：12868985
> 
> 赞同：5
> 
> 时间：2012-10-13T00:56:43.793
> 
> 标签：android, android-actionbar, android-spinner

在我设置`action bar`为`NAVIGATION_MODE_LIST`

```
getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

然后为它设置一个适配器。

该列表按预期显示，但我需要更改列表的“小三角形”颜色，因为*默认颜色*非常接近我的*背景颜色*。

是否有可能做到这一点，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T11:44:18.223

您要更改的小三角形`Spinner`位于`ActionBar`. 背景是一个[状态列表 drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)。状态列表drawable的项目是9-patch drawables，就像这个（这个特定的一个是Holo light主题默认状态的hdpi版本）：

![在此处输入图像描述](../Images/06520daa0511f3d9b615014f730db483.png)

要更改三角形的颜色，您必须更改这些 9-patch 可绘制对象中的几组 - 每个 dpi 和状态组合的可绘制对象。您还需要可绘制的自定义状态列表作为`Spinner`小部件的背景。

要更改小部件背景，您必须调整主题。如果您使用的是[ActionBarSherlock](http://actionbarsherlock.com/) (ABS) 更改`actionDropDownStyle`项和本机 ActionBar 更改`android:actionDropDownStyle`项（即使您使用 ABS，本机 ActionBar 也用于运行 Android 4.0 及更高版本的设备）。

主题应该是这样的：

```
<style name="MyTheme" parent="SomeParentStyle>
    <item name="actionDropDownStyle">@style/MyActionBarSpinnerStyle</item><!-- if you use ABS -->
    <item name="android:actionDropDownStyle">@style/MyActionBarSpinnerStyle</item>
</style> 
```

`MyActionBarSpinnerStyle`应该是这样的：

```
<style name="MyActionBarSpinnerStyle" parent="@style/MyDropDownActionBarStyle">
    <item name="android:background">@drawable/my_custom_state_list_drawable</item>
</style> 
```

如果您使用 ABS 或仅针对本机 ActionBar `MyDropDownActionBarStyle`，应该在哪里代替。`Widget.Sherlock.Light.Spinner.DropDown.ActionBar``Widget.Holo.Light.Spinner.DropDown.ActionBar`

# actionscript-3 - AS3 弹跳球

> ID：12868990
> 
> 赞同：0
> 
> 时间：2012-10-13T00:58:10.423
> 
> 标签：actionscript-3

好的，在线学习教程后，我正在尝试在AS3中制作一个弹跳球。

到目前为止，这是我的代码：

```
var count:Number = 0;
var bounceHeight:Number = 100;
var floorHeight:Number = 300;
var speed:Number = .1;

function run(e:Event):void
{
ball_mc.y = floorHeight - Math.abs(Math.cos(count)) * bounceHeight;
count += speed;
}

{
this.addEventListener(Event.ENTER_FRAME(run));
} 
```

在此先感谢您的帮助！

**编辑：**编译器错误是

> 场景 1，图层“图层 1”，第 1 帧，第 13 行 1195：尝试通过静态类型 Class 的引用访问无法访问的方法 ENTER_FRAME。
> 
> 场景 1，图层“图层 1”，第 1 帧，第 13 行 1136：参数数量不正确。预计2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:36:34.923

在您的闭包中，`addEventListener`需要一个类型参数和一个侦听器函数。

你的类型是`Event.ENTER_FRAME`，你的处理程序是`run`，这意味着调用`run`你需要的每一帧：

```
addEventListener(Event.ENTER_FRAME, run); 
```

因此，您的代码应该是：

```
function run(e:Event):void
{
    ball_mc.y = floorHeight - Math.abs(Math.cos(count)) * bounceHeight;
    count += speed;
}

this.addEventListener(Event.ENTER_FRAME, run); 
```

# css - CSS3多个背景图像不起作用

> ID：12868991
> 
> 赞同：1
> 
> 时间：2012-10-13T00:58:12.447
> 
> 标签：css, background-image

我有两个背景图像，我想将它们放在包装器 div 的左侧和右侧。我正在使用 CSS3 background-image 属性来执行此操作，但它不起作用。任何人都可以理解为什么这在任何浏览器中都不起作用。我还想知道，一旦我在现代浏览器上使用它，它会在像 IE 7 这样的旧浏览器上运行吗？

这是我想要完成的视觉效果，我已经有了导航（绿色横幅），所以我需要把棘手的红色横幅放在上面并圈出背景。

我认为将红色横幅的边缘与圆形背景一起切开并应用下面的代码会起作用，但这并不是说我需要边保持与边齐平。

![在此处输入图像描述](../Images/5ef866adde22b9843fe3e7d2810d6b51.png)

```
body{ 
    background-color:#e5e5e5; 
    background-image: url("../img/background_left.png"),url("../img/background_right.png");
    background-position: right top, left top; 
    background-repeat: no-repeat, no-repeat;
    background-attachment: fixed, fixed;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:03:33.110

为您添加高度`<body>`，它会起作用 -[**演示**](http://jsfiddle.net/XjJR6/)

```
html, body {
    height: 100%;
}

body{ 
    background-attachment: fixed, fixed;
    background-color:      #e5e5e5; 
    background-image:      url(http://lorempixel.com/300/200), url(http://lorempixel.com/200/300);
    background-position:   right top, left top; 
    background-repeat:     no-repeat, no-repeat;
} ​ 
```

但它不适用于较旧的 IE-s -[支持多种背景](http://caniuse.com/#feat=multibackgrounds)

# php - 正则表达式替换文本之间

> ID：12868992
> 
> 赞同：2
> 
> 时间：2012-10-13T00:58:18.757
> 
> 标签：php, regex, preg-replace

我有一个 css 文件，里面有 `url('PTN77F-webfont.eot')`- 用于字体名称和 `@import url("layout.css");`导入。

我需要在`"PTN77F-webfont.eot"`with之前添加一些文本，`preg_replace`在`"layout.css"`. 这只是示例，它可以是那里的任何文本。基本上我需要在里面添加一些文本，在里面添加`url('abc')`另一个文本`@import url("def")`。

到目前为止我所做的是：

```
$new_file_content = preg_replace("/([^import]\s*\burl\s*\('|\")(.*)('|\"\))/i", '$1'.JURI::base().'$2$3', $new_file_content); 
```

这工作正常，`url('PTN77F-webfont.eot')`但我的变量也被添加到里面`@import url("layout.css")`，这不好。

期待您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:42:04.043

那么对于第一个，您可以使用[preg_replace 的 limit 参数](http://php.net/manual/en/function.preg-replace.php)。

```
$new_file_content = preg_replace("/([^import]\s*\burl\s*\('|\")(.*)('|\"\))/i",
'$1'.JURI::base().'$2$3', $new_file_content,1); 
```

# opengl - Opengl 顶点数组对象

> ID：12868994
> 
> 赞同：2
> 
> 时间：2012-10-13T00:58:38.123
> 
> 标签：opengl, vao

OpenGL 的顶点数组对象是否存储在 VRam 中？

我真正要问的是：如果我加载模型，例如使用 Assimp，然后将顶点和索引数据读入顶点数组对象；我会在 Ram 中复制数据，还是将其复制到 GPU？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T01:04:44.217

这里似乎缺乏对 OpenGL 术语的理解。

您不能将“顶点和索引数据”读入[Vertex Array Objects](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Array_Object)。他们实际上并不*存储*数据；数据数组存储在[缓冲区对象](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object)中。VAO 仅*引用*它们。VAO 描述了这些缓冲区中的数据是如何格式化的，以便 OpenGL 可以理解它们的含义。

如果您询问[客户端顶点数组](http://www.opengl.org/wiki/Client-Side_Vertex_Arrays)（请注意缺少“对象”一词，尽管您可以将客户端顶点数组与 VAO 一起使用），那么根据定义，它们不会存储在 GPU 上。客户端顶点数组的“客户端”是用户的代码。IE：您分配、拥有和管理的内存。

如果您询问[缓冲区对象](http://www.opengl.org/wiki/Buffer_Object)的使用，是的，缓冲区对象存储驻留在“服务器”上（即：OpenGL 实现拥有的内存）。您无法确定它是否在任何特定时间点实际在 GPU 上。但是，在您调用`glBufferData`、`glBufferSubData`或其他更新缓冲区对象的此类函数之后，服务器已复制了该数据。

# html - HTML/CSS：图像没有出现在网络浏览器中，只是空的 div？

> ID：12868995
> 
> 赞同：0
> 
> 时间：2012-10-13T00:58:53.203
> 
> 标签：html, css

> **可能重复：**
> [HTML/CSS：图像/div 未出现在 Mozilla 中但在 IE 中？](https://stackoverflow.com/questions/12868812/html-css-image-div-is-not-appearing-in-mozilla-but-is-in-ie)

我正在使用 Dreamweaver，图像在那里显示得很好，但是一旦我将页面和图像上传到服务器，所有显示的是空 div。

我已尝试删除“.jpq”，并且已从图像名称中删除了空格，但在通过 Internet 提取时仍然没有显示图像。

```
<div style="background-color:#D9BA26; height:480px; width:320px;" >
        <img src="images/Magic Hat #9.jpg" style="width:100%;height:100%;" />
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T01:02:26.573

当涉及到 URL 时，使用下划线或连字符而不是空格是一种很好的做法，您也不能使用哈希，因为它们是为页面中的锚保留的。基本上，将图像名称另存为没有空格或哈希的其他名称，就可以了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T01:03:12.153

将图像名称以上述格式保存在服务器上

```
Magic_Hat_9.jpg 
```

将html标签替换为

```
<img src="images/Magic_Hat_9.jpg" style="width:100%;height:100%;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:09:39.047

您不应该使用主题标签，因为它们是保留的。

尝试类似的东西

```
 Magic-Hat-9.jpg 
```

或者，如果您真的必须使用空格，请使用它。

```
 <img src="images/Magic%20Hat%209.jpg style="width:100%;height:100%;" /> 
```

# c# - 在 EF 中永久禁用 Configuration.ProxyCreationEnabled？

> ID：12868996
> 
> 赞同：10
> 
> 时间：2012-10-13T00:58:59.293
> 
> 标签：c#, entity-framework, configuration, proxy, entity

不必对每个查询都执行以下操作，有没有办法在全局范围内设置该值？模型视图中有延迟加载设置，但似乎没有针对 ProxyCreation 的设置。

```
 using (var context = new LabEntities())
        {
            **context.Configuration.ProxyCreationEnabled = false;**

            var Query = from s in context.EAssets
                        .Include("Server").Include("Type").Include("Type.Definition")
                        where (s.Type.Definition.b_IsScannable == true) &&
                        (s.Server.s_Domain == Environment.UserDomainName || s.Server.s_Domain == null)
                        select s;
           var Entities = Query.ToList();
        } 
```

我不完全理解这个选项的好处，但我知道在 Visual Studio 中，我所有的对象都带有乱码的序列后缀，这使得使用调试器变得不合理。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-13T01:16:09.223

您可以在构造函数中禁用它，以便在您创建新上下文时将其禁用：

```
public class LabEntities : DbContext
{
   public LabEntities()
   {
      Configuration.ProxyCreationEnabled = false;
   }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-06T21:27:39.680

如果您使用的是模型优先方法，这意味着您有一个 .edmx 文件，则永久禁用此选项的方法是修改 .Context.tt 文件。此文件是构建过程用于生成 DbContext 派生类的代码生成模板。

打开此文件并找到构造函数：

```
public <#=Code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
<#
        WriteLazyLoadingEnabled(container);
#>
        //add the following line of code

        this.Configuration.ProxyCreationEnabled = false;
    } 
```

然后添加代码行将此属性设置为 false。重建您的项目并验证生成的上下文是否包含该行。

# django - 带有 ModelForm 和 ModelFormSet 的 Django WizardView（这个不渲染）

> ID：12868997
> 
> 赞同：2
> 
> 时间：2012-10-13T00:59:12.710
> 
> 标签：django, django-forms, formset, django-formwizard

我正在尝试创建一个 FormWizard，以便用户仅输入一次“日期”（在步骤 1 中），然后（在步骤 2 中）输入一些具有相关金额的名称。对于每个“名称”和相关的“金额”，我想保存一个模型的实例（字段：日期、名称、金额）。

对于第 2 步，我尝试使用 FormSet，但向导视图根本不呈现任何字段。它仅显示“第 2 步，共 2 步”和“提交”按钮。

```
# In forms.py

class FormForDate(forms.Form):
'''Only for date'''

    date = forms.DateField(initial = datetime.date.today()) 

class AccountaModelForm(ModelForm):

    class Meta:
        model = Account #model has 3 field: name, date, amount
        exclude = ['date']

class AccountsFormSet(forms.Form):

    amount_formset = modelformset_factory(Account, form=AccountaModelForm, extra=10, exclude=('date'))
    amount_s_formset = amount_formset(queryset=Account.objects.none(),) 
```

在 urls.py （其中包括）：

```
url(r'^form/$', AccountMultiple.as_view([FormForDate, AccountsFormSet])) 
```

在views.py

```
class AccountMultiple(SessionWizardView):

    def done(self, form_list, **kwargs):

        for form in form_list:
            print form #I am just doing something

        return render_to_response('app/formset.html', {
            'form': [form.cleaned_data for form in form_list],
        }) 
```

我在这段代码中做错了吗？还是模板有问题（我使用了 Django 文档中的模板：[here](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#creating-templates-for-the-forms)）或者我错过了第三种可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:46:40.830

有多个问题：

*   您`AccountsFormSet`似乎不是模型形式集，因为它源自`Form`.

*   `WizardView.done()`提交最后一步且表单有效时调用方法。所以渲染表单集可能不是你想要的。

*   您需要为步骤 2 指定正确呈现表单集的不同模板。

# ios - 为什么 UIWebView 不应该放在 UIScrollView 中？

> ID：12868999
> 
> 赞同：11
> 
> 时间：2012-10-13T00:59:24.443
> 
> 标签：ios, uiwebview, uiscrollview, uikit

## 问题

**有谁知道避免在 iOS 上的滚动视图中使用 Web 视图的技术原因**（假设您愿意自己禁用在 Web 视图中的滚动）？

如果您查看[UIWebView 的 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)，他们会说：

> **重要提示：**您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。

## 我受过教育的猜测

看起来他们可能会警告您不要将滚动视图放在另一个滚动视图中，因为内部滚动视图和外部滚动视图之间的触摸可能会混淆。

但是，有一个非常正当的理由要`UIWebView`在滚动视图中放置一个。Web 视图*不仅仅是*滚动视图。`UIWebView`可以轻松显示范围广泛的**网页**内容。

如果不需要允许在自身内滚动，**并且**`UIWebView`您使用以下任一方法关闭滚动：

```
webView.userInteractionEnabled = NO; 
```

或者

```
webView.scrollView.scrollEnabled = NO; 
```

那么这个设计真的有问题吗？

我想知道这是否部分是原始`UIWebView`界面的工件，它没有让您[直接（和记录）访问](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/scrollView)其嵌入式`UIScrollView`（以便能够轻松禁用其滚动）。也许 Apple 文档中的这个声明是它的遗产？

## 项目背景

我问是因为我正在维护一个应用程序（由其他人编写），该应用程序在滚动视图中使用少数 Web 视图，允许在它们之间水平滚动。Web 内容必须被认为是固定的（不可更改），并且每个 HTML 页面只显示一页内容。用户需要能够在页面之间滚动，因此为此选择了多个`UIWebViews`内部`UIScrollView`。到目前为止，它似乎*可以*正常工作。

但是，页面显示全屏图像，并且滚动性能是一个问题。但是，我正在尝试确定滚动视图中 Web 视图的基本嵌套（Apple 警告不要这样做）是否真的是问题的一部分。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-13T01:12:10.917

苹果不建议将您解释的内容放入其中的唯一原因：因为滚动可能会在两个滚动视图之间混淆`UIWebViews`。`UIScrollViews`

我猜他们写这个是因为，由于`UIWebView`继承`UIView`而不是`UIScrollView`，因此它本身不是滚动视图（但嵌入了滚动视图），这对于没有经验的用户来说可能并不明显，因为 Web 内容可以根据 HTML 滚动，其中如果有的话，会弄乱容器滚动视图。所以这可能只是对这个案例的提醒。

但是如果你禁用滚动，我看不出有什么原因会出错。

请注意，在滚动视图上禁用用户交互与禁用滚动不同。如果您的 HTML 内容包含链接或其他可点击/可点击的内容，禁用用户交互也会禁用它们。要仅禁用滚动但保持用户交互（如简单的点击），请使用`webview.scrollView.scrollEnabled = NO`而不是`webview.scrollView.userInteractionEnabled = NO`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:55:40.927

我遇到了至少一个其他原因：

UIWebView 在滚动时似乎*不*运行任何 JavaScript。我的 JavaScript 动画内容在 Web 视图滚动时被冻结，并在滚动结束后继续从中断处继续。

想必，这是一个性能优化。现在，当我们滚动包含 Web 视图的滚动视图时，Web 视图不会意识到它们正在移动，因此不会暂停它们的 JavaScript。

当然，问题是这是否会显着影响性能，以及在哪些 iPad 型号上。