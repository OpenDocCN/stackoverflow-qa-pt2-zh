# StackOverflow 问答 15320000-15320999

# ruby-on-rails - Ruby on Rails 使用现有文件夹生成控制器

> ID：15320000
> 
> 赞同：0
> 
> 时间：2013-03-10T07:35:27.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller

我对此很陌生，我不想弄乱我当前的应用程序。我目前正在研究 HTML/CSS 的东西，但我对如何让事情正常工作有一点了解。

我只是通过做一个新的控制器

```
rails generate controller sign_up 
```

我在`index.html.erb`自动生成的 rails 的 sign_up 文件夹中创建了一个索引文件 ( )。现在我想添加更多文件，我可以通过输入来添加更多文件吗

```
rails generate controller sign_up send_page more_page other_pages 
```

`send_page`, `more_page`,会`other_pages`自动合并到现有`sign_up`文件夹中吗？如果我希望rails自动添加其他文件，这是添加页面的正确方法吗？我只是想让它毁掉我到目前为止所拥有的东西，所以我不想自己尝试，因为我对此还是很陌生，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:00:58.340

要回答您的问题：

新文件将添加到现有文件夹中，但不会合并现有文件，您必须通过在新旧文件之间进行选择来解决冲突。

在我看来，您正在尝试为您的应用程序中需要的每个操作使用生成器：

具有示例结构的脚手架很棒，但是一旦您开始真正构建控制器，您就需要远离它：手动扩展控制器、模型和视图。这是您开始真正了解事情如何运作的唯一途径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:54:44.623

如果你再次运行生成器，它会抱怨与现有文件的冲突。然后，您必须选择是否覆盖（丢失对控制器的现有更改）或不覆盖（在这种情况下，您将不会获得新的自动生成的方法等）。

您可以为要添加的每个附加页面创建一个新的控制器操作和一个新视图（当然还有一个单元测试！）。如果您使用非标准/非 RESTful 操作名称，您还必须编辑`config/routes.rb`以路由它们。

查看示例中的名称以及对“页面”的引用，我怀疑您真正想要做的是为`send_page`and创建单独的控制器`more_page`。如果是这种情况，您将为每个新控制器单独运行生成器。

# jquery-plugins - 使 jquery 插件不在同一个插件中共享私有变量

> ID：15320007
> 
> 赞同：0
> 
> 时间：2013-03-10T07:36:12.957
> 
> 标签：jquery-plugins, scope

```
<script>
(function () {
  jQuery.fn.szThreeStateColor = function (settings) {
    var cfg = {
      "overBgColor": "green",
      "overFgColor": "white",
      "clickBgColor": "blue",
      "clickFgColor": "white"
    };
    if(settings) {
      $.extend(cfg, settings);
    }
    var clickIdx = -1;
    $thisObj = $(this);
    var iniBgColor = $thisObj.find("tbody td").css("background-color");
    var iniFgColor = $thisObj.find("tbody td").css("color");
    var iniHeight = $thisObj.find("tr").css("height");
    $thisObj.find("tbody tr").bind("mouseover", function (e) {
      if($(this).index() != clickIdx) {
        $(this).css({
          "background-color": cfg.overBgColor,
          "color": cfg.overFgColor
        });
      }
    });
    $thisObj.find("tbody tr").bind("mouseout", function (e) {
      if($(this).index() != clickIdx) {
        $(this).css({
          "background-color": iniBgColor,
          "color": iniFgColor
        });
      }
    });
    $thisObj.find("tbody tr").bind("click", function (e) {
      //console.log($(this).index() + ":" + clickIdx);
      if($(this).index() != clickIdx) {
        if(clickIdx >= 0) {
          $thisObj.find("tbody tr:eq(" + clickIdx + ")").css({
            "background-color": iniBgColor,
            "color": iniFgColor
          });
        }
        $(this).css({
          "background-color": cfg.clickBgColor,
          "color": cfg.clickFgColor
        });
        clickIdx = $(this).index();
      }
    });
    return this;
  }
})($);
$(document).ready(function () {
  $("#table1")
    .szThreeStateColor({
    "overBgColor": "#34ef2a",
    "overFgColor": "#000000",
    "clickBgColor": "#333333"
  });
  $("#table2").szThreeStateColor();
});
</script>
</HEAD>

<BODY>

<table id="table1" width='300' border='1'>
<thead>
<tr><td>name</td><td>city</td><td>age</td></tr>
</thead>
<tbody>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
</tbody>
</table>

<table id="table2" width='300' border='1'>
<thead>
<tr><td>name</td><td>city</td><td>age</td></tr>
</thead>
<tbody>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
<tr>
<td>1</td><td>2</td><td>3</td>
</tr>
</tbody>
</table> 
```

这个插件在事件`mouseover, mouseout, click`触发时设置不同的单元格颜色。该插件适用于单个表，但在使用多个表时工作异常。也许变量`clickIdx`由每个表共享。如何防止共享该变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:52:47.903

您可以通过将插件包装在`return this.each(function() {...})`.

```
jQuery.fn.szThreeStateColor = function (settings) {
   // ...
   return this.each(function() {
       // variables that need to be private go in here
   });
} 
```

# php - 看不到使用 ajax 和 php 从服务器响应的 html 代码

> ID：15320009
> 
> 赞同：0
> 
> 时间：2013-03-10T07:36:29.327
> 
> 标签：php, javascript, html, ajax

**1.带有Ajax的Jquery脚本**

```
$('#location').change(function(){
    var l = $('#location :selected').val();
    $.ajax({
    type:'POST',
        url : 'function/get_location.php',
        dataType:'html',
        data : { loc : l},
        success: function(data){
            $('#advertise_record').html(data);
        }   
    });
}); 
```

我想在我的网页中查看名为#advertise_record 的博客div 中显示的来自服务器的响应的html 代码。但是当右键单击查看源代码时，我没有在该博客中看到该 html 代码，但它的结果显示在这里。

**2.html代码**

```
<div id="advertise_record"></div> 
```

我需要来自服务器的响应显示在这里的结果。它显示了结果，但是当我右键单击查看源代码时，我没有看到该代码。

**3.get_location.php**

```
<?php

    include_once (dirname(__FILE__). '/dbconfig.php');

    define('ADVERTISE_DIRECTORY','../advertise/');

    if(isset($_POST['loc'])) $loc = mysql_real_escape_string($_POST['loc']);

    switch($loc){
        case 0 : $sql = 'SELECT * FROM tblads';break;
        case 1 : $sql = 'SELECT * FROM tblads WHERE loc_id="'.$loc.'"'; break;
        case 2 : $sql = 'SELECT * FROM tblads WHERE loc_id="'.$loc.'"'; break;
        case 3 : $sql = 'SELECT * FROM tblads WHERE loc_id="'.$loc.'"'; break;
        default:"";
    }
    ?>
    <table border="1" cellpadding="5" cellspacing="5" width="850px;">
        <tbody>
            <tr>
                <td><input type="file" name="filename" id="filename" class="text"/></td>
                <td><label class="title">Name :</label><input type="text" name="ads_name" id="ads_name" class="text" style="width:150px;"></td>
                <td><label class="title">URL :</label><input type="text" name="url" id="url" class="text" style="width:150px;"/></td>
                <td><input type="button" name="update" id="update" class="button button_update"/></td>
            </tr>
    <?php
    $output = mysql_query($sql) or die(mysql_error());
    while($row = mysql_fetch_array($output)){
        ?>
        <tr>
            <td colspan="3" align="center">
                <div style="width: 700px;height: auto;overflow-x: scroll;">
                    <img src='<?php echo ADVERTISE_DIRECTORY.$row['image_name']?>' alt='<?php echo $row['ads_name'];?>' />  
                </div>
            </td>
            <td align="center"><a href='#tab-advertise?edit=<?php echo $row['ads_id']?>' >Edit</a></td>
        </tr>   
        <?php
    }
?>  
        </tbody>
    </table> 
```

所以我的代码有什么问题。真的很感谢你有时间回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:44:25.053

您不会在源中看到最初不存在的任何内容。如果您想查看 ajax 调用返回的 html，请检查浏览器开发工具中的 network/net 选项卡。此外，您正在为不正确的图像设置内容类型，因为您的输出是一个 html 表。

# c++ - 函数签名末尾的 && 是什么意思（在右括号之后）？

> ID：15320015
> 
> 赞同：36
> 
> 时间：2013-03-10T07:37:09.997
> 
> 标签：c++

在[Workarounds for no 'rvalue references to *this' feature](https://stackoverflow.com/questions/14562984/workarounds-for-no-rvalue-references-to-this-feature)中，我看到以下成员函数（转换运算符）：

```
template< class T >
struct A
{
    operator T&&() && // <-- What does the second '&&' mean?
    {
        // ...
    }
}; 
```

第二对`&&`是什么意思？我不熟悉那种语法。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-10T07:43:29.767

这是一个参考值限定符。这是一个基本示例：

```
// t.cpp
#include <iostream>

struct test{
  void f() &{ std::cout << "lvalue object\n"; }
  void f() &&{ std::cout << "rvalue object\n"; }
};

int main(){
  test t;
  t.f(); // lvalue
  test().f(); // rvalue
} 
```

输出：

```
$ clang++ -std=c++0x -stdlib=libc++ -Wall -pedantic t.cpp
$ ./a.out
lvalue object
rvalue object 
```

取自[这里](https://stackoverflow.com/questions/8610571/what-is-rvalue-reference-for-this)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-10T07:41:26.170

它表明该函数只能在右值上调用。

```
struct X
{
      //can be invoked on lvalue
      void f() & { std::cout << "f() &" << std::endl; }

      //can be invoked on rvalue
      void f() && { std::cout << "f() &&" << std::endl; }
};

X x;

x.f();  //invokes the first function
        //because x is a named object, hence lvalue

X().f(); //invokes the second function 
         //because X() is an unnamed object, hence rvalue 
```

[**现场演示**](http://liveworkspace.org/code/4Gr0VK%244)输出：

```
f() &
f() && 
```

希望有帮助。

# jquery - Rails 试图在 ajax 调用后重新加载数据

> ID：15320019
> 
> 赞同：0
> 
> 时间：2013-03-10T07:37:46.960
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, ruby-on-rails-3

我有 2 个模型 - 安排和联系。

在我的**/views/arrangements/index.html.erb**页面中，我试图显示一个联系人表。

我的**安排/index.html.erb**上还有一个带有此表单的模型窗口：

```
<%= form_for @new_to_contact, :remote => true, :id => 'new_item' do |f| %>
    <%= f.label :family_name %>
    <%= f.text_field :family_name %>
    <%= f.label :action %>
    <%= f.text_area :action, :rows => 3 %>
    <%= button_tag "Save", :type => 'submit' %>
    <%= button_tag "Cancel", :type => 'button', :data => {:dismiss => 'modal' } %>
  <% end %> 
```

这是我的`arrangements_controller#index`方法

```
def index
    @arrangements = Arrangement.find(:all, :order => 'location_id')
    @new_to_contact = Contact.new

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @arrangements }
    end
  end 
```

这是我的`contacts_controller#create`方法

```
def create
    @to_contact = Contact.new(params[:to_contact])

    respond_to do |format|
      if @to_contact.save
        format.js
        format.html { redirect_to @to_contact, notice: 'To contact was successfully created.' }
        format.json { render json: @to_contact, status: :created, location: @to_contact }
      else
        format.html { render action: "new" }
        format.json { render json: @to_contact.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是我的**/views/contacts/create.js.erb**

```
console.log('TEST');
$('#myModal').modal('hide'); 
```

**我的问题是，如何从我的create.js.erb**文件中重新加载我的安排索引文件中的联系人列表？

我尝试将此行添加到我的**create.js.erb**文件中，但这引发了模板错误：

```
$(".table").html("<%= escape_javascript(render(Contact.all)) %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:54:22.510

根据 Rails 方式，您应该将 new_contact 表单从安排/index.html.erb 提取到联系人/_form.html.erb 并在安排/index.html.erb 中呈现此部分。

然后，您可以使用以下内容轻松地从您的 js.erb 文件中呈现此模板：

```
$('.table tr:last').after("<%= escape_javascript(render :partial => 'form', :locals => {:contact => @to_contact}) %>") 
```

# android - Android：停止意图并返回主要活动

> ID：15320021
> 
> 赞同：1
> 
> 时间：2013-03-10T07:38:04.350
> 
> 标签：android, android-intent

我开发了一个应用程序，在某处有一个图像按钮。

```
ImageButton buttoncalllog = (ImageButton)findViewById(R.id.imageButton2);
    buttoncalllog.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            Intent showCallLog = new Intent();
            showCallLog.setAction(Intent.ACTION_VIEW);
            showCallLog.setType(CallLog.Calls.CONTENT_TYPE);
            startActivity(showCallLog);
            finish();
        }
    }); 
```

这个按钮，当它被点击时，它会打开联系人列表。问题是我无法返回我的应用程序！当我按下返回按钮到我的设备时，什么也没有发生......如果我杀死我的应用程序并再次打开它，第一个屏幕又是联系人列表！我必须重新启动设备或重新安装应用程序！有什么帮助吗？

**编辑 ：**

我删除了对 的调用`finish()`，但是当我按回车键时它仍然没有返回。我更新的代码：

```
ImageButton buttoncalllog = (ImageButton)findViewById(R.id.imageButton2);
    buttoncalllog.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            Intent showCallLog = new Intent();
            showCallLog.setAction(Intent.ACTION_VIEW);
            showCallLog.setType(CallLog.Calls.CONTENT_TYPE);
            startActivity(showCallLog);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:39:29.383

`finish()`启动`Intent`. _

**[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)***用于杀死一个 Activity，只有当你想完成*你的 Activity时才应该调用它。由于您在启动 Intent 后正在终止您的应用程序，因此当您按下返回按钮时，应用程序无法返回任何内容。

```
ImageButton buttoncalllog = (ImageButton)findViewById(R.id.imageButton2);
    buttoncalllog.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            Intent showCallLog = new Intent();
            showCallLog.setAction(Intent.ACTION_VIEW);
            showCallLog.setType(CallLog.Calls.CONTENT_TYPE);
            startActivity(showCallLog);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:42:29.323

首先不要打电话`finish`

此外，您应该调用`startActivityForResult`以接收用户选择的选项

阅读[此处](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:55:09.010

你检查你的清单文件了吗？您可能需要确保为应用程序定义了父活动。`<meta-data android:value="com.example.parentactivity"`在您的活动标签下检查

# javascript - for循环内的JavaScript setTimeout函数只发生一次

> ID：15320022
> 
> 赞同：0
> 
> 时间：2013-03-10T07:38:04.827
> 
> 标签：javascript, jquery, for-loop, settimeout, delay

我有一个 for 循环，其中有一个 setTimeout 函数，旨在延迟循环的每次迭代。虽然循环中的其余代码正在正确迭代，但 setTimeout 函数只工作一次，就好像 for 循环在其中一样，而不是相反。这是我的代码：

```
 for (x = 0; x <= roll; x ++) {
        setTimeout(function() {
            space = $(".player." + turn).parents("td").attr("id");
            space = parseInt(space);
            player = $(".player." + turn);
            $(".player." + turn).remove();
            nextSpace = space + 1;
            $("#" + nextSpace).append(player);
        }, 500);
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T07:41:18.417

试试这个：

```
setTimeout(function() {
    // your code
}, 500 * x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:45:54.933

这不是 setTimeout 的工作方式。这不是同步延迟。如果要延迟循环的每次迭代，则需要通过递归调用内部函数来实现。

```
function inner_function(x, max_x) {
    space = $(".player." + turn).parents("td").attr("id");
    space = parseInt(space);
    player = $(".player." + turn);
    $(".player." + turn).remove();
    nextSpace = space + 1;
    $("#" + nextSpace).append(player);

    setTimeout(inner_function, 500, x+1, max_x);
}

inner_function(0, 500); 
```

# javascript - 如何在 IE 8 中使用 moment.js

> ID：15320029
> 
> 赞同：2
> 
> 时间：2013-03-10T07:38:45.130
> 
> 标签：javascript, html, momentjs

在所有关于 moment 的文档中，您只需使用一个名为 moment 的变量。在除 IE 8 之外的所有浏览器中，这都有效。在 IE 8 中它说

**属性 'moment' 的值为 null 或未定义，不是 Function 对象**

这个 moment 变量位于 moment js 文件的第一行，但是我怎样才能告诉我的浏览器进入 moment 并找到它？？？？

我正在使用这个库解析过去的日期。

这是我对 moment.js 的脚本声明

```
<script src="https://raw.github.com/timrwood/moment/2.0.0/moment.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:06:09.810

这可能是因为您尝试直接从 GitHub 加载它，尝试下载本地副本并使用相对链接链接到它：

```
<script src="moment.js""></script> 
```

我构建了一个快速测试页面，看起来如果您尝试直接从 GitHub 加载脚本，它们会返回 HTTP 代码`200 OK`，但响应为空。由于它加载的文件是空的，`moment`因此确实从未定义过。

# c++ - C++中的实时编程

> ID：15320030
> 
> 赞同：-5
> 
> 时间：2013-03-10T07:38:53.800
> 
> 标签：c++, real-time, robotics

我有两个 C++ 类，`objecManip`和`updater`. 该`updater`课程有一个计时器来检查我的应用程序的机器人手臂的状态。

如果它在移动，则什么也不做，否则从动作队列中获取下一个动作（）。

动作队列由 class 填充`objectManip`。我有一个全局变量：`current_status`我需要的机械臂`objectManip`。

问题是，当填写动作队列时，`current_status`不是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:50:56.923

问题很不清楚，所以这确实是在黑暗中刺伤，但是您需要使用原子数据类型。使用 C++11，你有`std::atomic`（见[这里](http://en.cppreference.com/w/cpp/atomic/atomic)或[这里](http://www.cplusplus.com/reference/atomic/atomic/atomic/)。对于早期版本的 C++，我认为你需要使用一些库或编译器特定的数据类型，它提供原子数据类型。

如果您对多线程如何适用于您的 CPU 和操作系统做出一些假设，那么您*可能*只需声明共享变量`volatile`并在使用临时变量时读取值即可。`volatile`确实适用于读取硬件映射值之类的情况，其中每次都必须从内存中读取值，因此不可能进行很多优化。它本身并不能保证原子更新，因为修改值的线程可能会在更新过程中被中断，然后另一个读取可能会读取无效的、部分更新的值。对于布尔值，这应该是相当安全的。对于不跨越内存字边界和字长或更小的整数，这在许多 CPU 上可能是安全的，这不会在写入单个内存字的过程中中断线程。否则，就是等待发生的数据损坏。一些（今天不常见的）CPU 也不会在多个 CPU 内核之间同步缓存，在这种情况下`volatile`也无济于事，不同的线程可能会看到不同的缓存值。所以结论：使用`volatile`作为最后的黑客攻击！

# node.js - 将 Jade 编译为 JSON？

> ID：15320033
> 
> 赞同：0
> 
> 时间：2013-03-10T07:39:23.663
> 
> 标签：node.js, pug

奇思妙想，不过想找最简单的办法，在 Jade 中定义一些数据文件，然后直接转成 JSON。

我查看了扩展 Jade 以支持自定义文档类型，但很快就迷失在代码中。例如：

```
doctype json 
```

我能想出的唯一手动hacky方法是将Jade转换为带有jade的XML文件，然后使用better-require将节点中的XML文件作为对象读取，然后JSON.stringify对象（yikes）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:18:04.903

如果你想在jade中使用data/JSON，而不是在jade中定义一些数据，你可以直接将json通过`response.locals`或者`response.render(view, [locals], callback)`从[node](http://expressjs.com/api.html#res.locals)返回时传递给response 。

在你的 app.js

```
res.local.data=JSON.stringify(dataobj);
//or pass variable when rendering
res.render('/index', {
    data : JSON.stringify(dataobj)
}); 
```

在你的玉

```
function yourfunc(){
  var data = !{dataobj};
} 
```

这是动态的，您可以控制要发送到文件中的变量，这与在翡翠中静态定义它们不同。

# php - PHP 存储过程参数

> ID：15320036
> 
> 赞同：0
> 
> 时间：2013-03-10T07:39:55.130
> 
> 标签：php, mysql, stored-procedures, mysqli

我创建了一个测试数据库，如下所示：

```
USE test;
DROP TABLE IF EXISTS test;
DROP PROCEDURE IF EXISTS testparams;
CREATE TABLE test
(
  inparm INT,
  inoutparam INT,
  outparm INT
);

INSERT INTO test VALUES (0, 0, 0);

DELIMITER $$
CREATE PROCEDURE testparams(IN i INT, INOUT io INT, OUT o INT)
BEGIN
   UPDATE test SET inoutparm = io + 1, outparm = FLOOR(RAND() * 1000)
               WHERE inparm = i; 

   SELECT outparm INTO o FROM test WHERE inparm = i;
   SELECT inoutparam INTO io FROM test WHERE inparm = i;

END $$ 
```

我还有一个 PHP 脚本：

```
<?php

$c = new mysqli('localhost', 'test', 'test', 'test') or die('Cannot connect');
echo "Connected\n";

$in = 0;
$out = -1;
$inout = 3;

echo "In: $in Out: $out: Inout: $inout\n";

$s = $c->prepare('CALL testparams(?, ?, ?)') or die('Unable to prepare: ' . $c->error);
$s->bind_param('iii', $in, $inout, $out);
#$s->bind_result($out, $inout);
$s->execute();

echo "After execute SP\nIn: $in Out: $out: Inout: $inout\n";

echo "End of SP\n";
$s = $c->prepare('SELECT inparm, inoutparam, outparm FROM test');

# $s->bind_result($in, $inout, $out); - Get a error here

$s->execute();
while ($s->fetch())
{
    echo "In: $in Out: $out: Inout: $inout\n";
}

?> 
```

我的问题是存储过程似乎没有被调用。这是由于使用`OUT`和`INOUT`参数吗？如果是这样，您如何在 PHP 中使用这些参数？

生成以下输出的脚本证明了这一点

```
Connected
In: 0 Out: -1: Inout: 3
End of SP
In: 0 Out: 0: Inout: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:09:00.177

> **[调用语法](http://dev.mysql.com/doc/refman/5.0/en/call.html)**
> 
> 对于用提供 MySQL 接口的语言编写的程序， **没有本地方法可以直接从 CALL 语句中检索 OUT 或 INOUT 参数的结果。**要获取参数值，请将用户定义的变量传递给 CALL 语句中的过程，然后执行 SELECT 语句以生成包含变量值的结果集。要处理 INOUT 参数，请在 CALL 之前执行一条语句，将相应的用户变量设置为要传递给过程的值。

这似乎在 MySQL 5.6 中发生了变化

> 在 MySQL 5.6 中，C 程序可以使用prepared-statement 接口来执行CALL 语句并访问OUT 和INOUT 参数。... **提供 MySQL 接口的语言可以使用准备好的 CALL 语句直接检索 OUT 和 INOUT 过程参数。**

那会做到的

```
<?php

$c = new mysqli('localhost', 'test', 'test', 'test') or die('Cannot connect');
echo "<pre>Connected<br>";

$in = 0;
$out = -1;
$inout = 3;

echo "Before executing SP<br>In: $in Inout: $inout Out: $out<br>";

$s = $c->prepare('SET @i = ?, @io = ?') or die('Unable to prepare: ' . $c->error);
$s->bind_param('ii', $in, $inout);
$s->execute();

$s = $c->prepare("CALL testparams(@i, @io, @o)") or die('Unable to prepare: ' . $c->error);
$s->execute();

$s = $c->prepare('SELECT @io, @o');
$s->execute();
$s->bind_result($inout, $out);
$s->fetch();

echo "After execute SP<br>In: $in Inout: $inout Out: $out<br>";

echo "End of SP<br></pre>";

?> 
```

输出

```
Connected
Before executing SP
In: 0 Inout: 3 Out: -1
After execute SP
In: 0 Inout: 4 Out: 851
End of SP 
```

顺便说一句，SP中有一个错字。这条线

```
UPDATE test SET inoutparm = io + 1, outparm = FLOOR(RAND() * 1000) 
```

应该

```
UPDATE test SET inoutparam = io + 1, outparm = FLOOR(RAND() * 1000)
                        ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:23:17.023

我认为`$s->bind_param('sss', $in, $inout, $out`）；应该

`$s->bind_param('iii', $in, $inout, $out)`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:00:00.743

'sss' 应该是 'iii' 因为你处理的是整数，而不是字符串。

# ruby - Rails 中 ActiveRecord::Base 中的回调类是什么

> ID：15320042
> 
> 赞同：-1
> 
> 时间：2013-03-10T07:40:38.787
> 
> 标签：ruby, ruby-on-rails-3.2

有人可以解释本指南中的 16 个回调类吗[http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:13:17.187

好的，我想我理解你的问题：

PictureFileCallbacks 中的 after_destroy 方法将被 rails 自动调用：

当 rails 销毁您的 PictureFile 对象时，它会实例化一个 PictureFileCallbacks 对象并尝试在其中运行 after_destroy 方法。

一切都按惯例工作，如果你正确地遵循命名，一切都会开箱即用。

在一个虚拟项目上试一试，如果你在做这项工作时遇到问题，请返回一些代码来显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T02:47:03.423

一切都按约定进行，您可以尝试以下示例：

```
#generate PictrueFile model with name attribute and generate seed
rails g model PictureFile name:string
#seeds.rb
3.times do |i|
  PictureFile.create(name: "name#{i}")
end

#create picture_file.rb and picture_file_callbacks.rb in model directory
#picture_file_callbacks.rb
class PictureFileCallbacks
  def after_destroy(picture_file)
    PictureFile.create(name: "demo")
  end
end

#picture_file_callbacks.rb
class PictureFile < ApplicationRecord
  after_destroy PictureFileCallbacks.new
end

execute the command in rails c
PictureFile.first.destroy 
PictrueFile.pluck(:name) #=>["name1", "name2", "demo"] 
```

# javascript - 通过多个链接从多个隐藏字段更新 1 个文本区域

> ID：15320045
> 
> 赞同：0
> 
> 时间：2013-03-10T07:40:55.813
> 
> 标签：javascript, jquery, html, hidden-field

基本布局：

```
<textarea id="courseText"></textarea>

<ul class="chapter-items">

    <li id="chap1link">Chapter 1</li>
    <input id="chap1value" type="hidden" value="I am he as you are he as you are me and we are all together" />

    <li id="chap2link">Chapter 2</li>
    <input id="chap2value" type="hidden" value="See how they run like pigs from a gun, see how they fly" />

    <li id="chap3link">Chapter 3</li>
    <input id="chap3value" type="hidden" value="I'm crying" />

</ul> 
```

每当使用相应**隐藏字段**中的值单击**li**时，是否可以更新 textarea **courseText**？

 ****如果单击 chap1link li，它会将 chap1value 的值加载到文本区域。

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:43:57.473

尝试：

```
$(".chapter-items li").click(function(){    
    $("#courseText").val($(this).next('input[type=hidden]').val());
}); 
```

[样本](http://jsfiddle.net/HaE9P/)

但是我建议使用以下 html 标记（a 中的任何内容都`ul`必须在 an 中`li`）

```
<ul class="chapter-items">
    <li id="chap1link">Chapter 1
    <input id="chap1value" type="hidden" value="I am he as you are he as you are me and we are all together" />    
    </li>
    <li id="chap2link">Chapter 2
     <input id="chap2value" type="hidden" value="See how they run like pigs from a gun, see how they fly" />
    </li>
    <li id="chap3link">Chapter 3
    <input id="chap3value" type="hidden" value="I'm crying" />
    </li>
</ul> 
```

以及下面的js代码：

```
$(".chapter-items li").click(function(){    
    $("#courseText").val($(this).find('input[type=hidden]').val());
}); 
```

[样品 2](http://jsfiddle.net/HaE9P/2/)****

# css - 为什么我的 a:hover:nth-child 代码不起作用？

> ID：15320048
> 
> 赞同：0
> 
> 时间：2013-03-10T07:41:52.223
> 
> 标签：css, hover, css-selectors

这个简单的代码不起作用：

HTML：

```
<div id="topnav">
    <ul>
        <li><a href="a.html">Aaaaaaa</a></li>
        <li><a href="b.html">Bbbbbbbb</a></li>
        <li><a href="c.html">Ccccccccc</a></li>
    </ul>
</div> 
```

CSS：

```
#topnav li a:hover:first-child{
    color:#ff0000;
    }

#topnav li a:nth-child(2):hover{
    color:#FF7700;
}

#topnav li a:nth-child(3):hover{
    color:#FFFF00;
} 
```

每个链接应该有不同的悬停颜色。它们都显示为红色。为什么？

JSFiddle：http: [//jsfiddle.net/jeZHD/](http://jsfiddle.net/jeZHD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:43:43.377

`<a>`因为每个父元素只有一个。这意味着，every`<a>`是其 parent 的第一个孩子`<li>`。

试试吧`<li>`。

工作示例：http: [//jsfiddle.net/jeZHD/2/](http://jsfiddle.net/jeZHD/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:46:37.237

这里：

```
#topnav li:nth-child(1) a:hover { color:#ff0000; }
#topnav li:nth-child(2) a:hover { color:#FF7700; }
#topnav li:nth-child(3) a:hover { color:#FFFF00; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T07:46:54.430

在这上面浪费了这么多时间之后，我才意识到第 n 个孩子应该在`li`'s 上，而不是`a`'s 上。像这样：

```
#topnav li:first-child a:hover{
    color:#ff0000;
    }

#topnav li:nth-child(2) a:hover{
    color:#FF7700;
    }

    #topnav li:nth-child(3) a:hover{
    color:#FFFF00;
    } 
```

# javascript - 奇怪的 Firefox 相关 setTimeout 问题

> ID：15320049
> 
> 赞同：0
> 
> 时间：2013-03-10T07:42:07.123
> 
> 标签：javascript, jquery, firefox, settimeout

这是来自 firefox JS 控制台的错误：

> [07:30:41.692] NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数 arg 0 [nsIDOMWindow.getComputedStyle] @ [http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:5](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:5)

该问题仅在应该发生 setTimeout 时出现在 Firefox 中。[您可以在http://codemagic.gr](http://codemagic.gr)中查看该问题的实时示例。以下是重现问题的方法：打开 codeMagic，按“设置”图标，选择不同的配色方案。在 webkit 浏览器中，setTimeout 的回调函数将在 500 毫秒内执行，这会将 #left 的背景颜色更改为与 .ace_gutter 相同的颜色（以便整个左侧“适合”）。在 Firefox 中，由于 setTimeout 没有执行，左侧现在看起来“坏了”。

这是应该执行的行的链接：[https ://github.com/varemenos/codemagic/blob/master/assets/js/main.js#L149-L176](https://github.com/varemenos/codemagic/blob/master/assets/js/main.js#L149-L176)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:42:27.177

我曾经`$("#console-editor").css("color", $(this).css("color"));`在 .each 函数内部，从上面的几行开始，所以这`this`部分的目标是 .ace_gutter。

在 setTimeout 中使用`this`关键字时，您实际上指的是`window`而不是`setTimeout`代码的容器

# html - src 和 data-src 属性之间有什么区别？

> ID：15320052
> 
> 赞同：112
> 
> 时间：2013-03-10T07:42:34.847
> 
> 标签：html, image

使用标签的任何一个`data-src`或`src`属性有什么区别和后果（好的和坏的） ？`img`我可以同时使用两者来获得相同的结果吗？如果是这样，什么时候应该使用它们？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-03-10T08:25:23.083

属性`src`和`data-src`没有任何共同之处，只是它们都被 HTML5 CR 允许并且都包含字母`src`。其他一切都不一样。

该`src`属性在 HTML 规范中定义，并且具有功能意义。

该`data-src`属性只是无限的`data-*`属性集之一，它们没有定义的含义，但可用于在元素中包含不可见的数据，用于脚本（或样式）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-10T07:56:03.420

如果您希望图像加载并显示特定图像，请使用`.src`加载该图像 URL。

如果您想要一条可以包含 URL 的元数据（在任何标签上），请使用`data-src`或任何`data-xxx`您想要选择的。

关于 data-xxxx 属性的 MDN 文档：[https ://developer.mozilla.org/en-US/docs/DOM/element.dataset](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)

`src`图像为您加载 JPEG 并显示它的图像标签示例：

```
<img id="myImage" src="http://mydomain.com/foo.jpg">

<script>
    var imageUrl = document.getElementById("myImage").src;
</script> 
```

尚未加载图像的非图像标签上的“data-src”示例 - 它只是 div 标签上的一段元数据：

```
<div id="myDiv" data-src="http://mydomain.com/foo.jpg">

<script>
    // in all browsers
    var imageUrl = document.getElementById("myDiv").getAttribute("data-src");

    // or in modern browsers
    var imageUrl = document.getElementById("myDiv").dataset.src;
</script> 
```

`data-src`用作存储备用图像 URL 的位置的图像标记示例：

```
<img id="myImage" src="http://mydomain.com/foo.jpg" data-src="http://mydomain.com/foo.jpg">

<script>
    var item = document.getElementById("myImage");
    // switch the image to the URL specified in data-src
    item.src = item.dataset.src;
</script> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-10T07:46:14.833

第一个`<img />`是无效的 -`src`是必需的属性。`data-src`是一个属性，例如 JavaScript 可以利用，但没有表示意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-23T18:29:02.800

src 将立即呈现该值，它是使用单一来源的图像、视频和 iframe 的默认值。

延迟加载时使用 data-src 以防止在页面加载时加载默认图像。大多数延迟加载库将使用交叉点观察器，并在加载图像时将 data-src 值复制到 src。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-03-10T07:50:58.127

那么 data src 属性仅用于绑定数据，例如 ASP.NET ...

[W3School src 属性](http://www.w3schools.com/tags/tag_img.asp)

[MSDN datasrc 属性](http://msdn.microsoft.com/en-us/library/ms533709%28VS.85%29.aspx)

# css - Twitter bootstrap响应输入宽度不正确

> ID：15320058
> 
> 赞同：1
> 
> 时间：2013-03-10T07:43:28.393
> 
> 标签：css, twitter-bootstrap

最近我开始使用 twitter bootstrap 创建我的第一个响应式设计。

我的问题是我尝试了一些仍然无法正常工作的东西，如果我用一类跨度包裹我，输入宽度不正确

![在此处输入图像描述](../Images/261bf360989913dfe686874c69f847c1.png)

代码

```
<div class="container">
    <div class="row-fluid">

    <form class="span4" method="POST" action="http://localhost/mjb/index.php/" accept-charset="UTF-8">
        <label for="username">Username</label>      <input class="span4" type="text" name="username" value="" id="username">
        <label for="password">Password</label>      <input class="span4" type="password" name="password" id="password">
        <button class="btn btn-block btn-success">Login</button>
    </form>
</div>
</div> 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:57:32.650

解决了。

需要添加`class="input-block-level"`到输入字段

# r - 从 RevoEnt-10817.enterprise.tar.gz 文件构建 Revolution R Enterprise？

> ID：15320060
> 
> 赞同：0
> 
> 时间：2013-03-10T07:43:31.950
> 
> 标签：r, revolution-r

如何从 Revolution Analytics 网站下载的 RevoEnt-10817.enterprise.tar.gz 文件构建 Revolution R Enterprise？

我的系统是 Windows 7。我已经安装了 R 2.15 和 Rstudio。它会覆盖原来的 R 安装吗？

任何人都可以指导我逐步完成一些文件/材料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:13:10.503

我无法在 RevoR 网站上快速找到描述如何安装此源程序包的说明。就像@agstudy 建议的那样，您可以在他们的支持论坛上发帖，看看他们是否可以帮助您。如果您想使用您下载的 RevoR 版本，您似乎需要从源代码构建 R，这需要您安装一些额外的工具。这些工具可能与您需要为普通 R 安装的工具相同，可以在[此处](http://cran.r-project.org/bin/windows/Rtools/)找到。

但是为什么需要 RevoR？普通 R 同样强大，并且您已经安装了 R 和 Rstudio，所以您可以开始使用了。

# c# - 在 wp8 应用程序中获取“命名空间中不存在类型或命名空间可序列化...”错误

> ID：15320067
> 
> 赞同：1
> 
> 时间：2013-03-10T07:44:57.523
> 
> 标签：c#, visual-studio-2012, windows-phone-8, protobuf-net

所以我对这个 protobuf-net 的东西以及 wp8 开发还是很陌生，我在我的项目中使用 protogen 生成的 .cs 文件时遇到了问题。特别是文件的这一行：

```
 [global::System.Serializable, global::ProtoBuf.ProtoContract(Name=@"Person_PB")] 
```

导致问题标题中的错误消息。我在尝试使用序列化的代码中也遇到了其他问题。

```
using (var file = File.Create("person.bin")) {
    Serializer.Serialize(file, person);
} 
```

无法识别序列化程序，我不知道要在文件顶部添加什么来修复它（即要添加什么“使用”的东西）

任何人都知道在我的项目中包含什么以便序列化工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:12:44.603

您需要调整如何调用 protogen；IIRC（我不在个人电脑上）补充说：`-p:lightFramework`应该为你解决这个问题。这里的问题是，`[Serializable]`并非所有框架都存在。

有关信息，`-p:help`应该告诉您所有可用的选项。

# javascript - 如何防止用户在文本框中粘贴文本？

> ID：15320069
> 
> 赞同：28
> 
> 时间：2013-03-10T07:45:11.777
> 
> 标签：javascript, html, validation

我有这个 JS 函数可以防止用户输入字符

```
<script type="text/javascript">
function validate(evt) {
  var theEvent = evt || window.event;
  var key = theEvent.keyCode || theEvent.which;
  key = String.fromCharCode(key);
  var regex = /[0-9]|\./;
  if(!regex.test(key)) {
    theEvent.returnValue = false;
    if(theEvent.preventDefault) theEvent.preventDefault();
  }
}
</script>

<span>Radio Receive:</span>
<input name="ReceiveNo" type="text" class="txtbox" onkeypress='validate(event)' maxlength="11" value="${cpCon.receiveNo}" required tabindex="34" /> 
```

但我注意到当用户试图从这个文本框中粘贴一个单词时，可以输入文本。如何在不禁用粘贴的情况下防止这种情况？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-05-22T02:38:38.633

**非常简单的解决方案：**

```
<input name="ReceiveNo" type="text" class="txtbox" onkeypress='validate(event)' maxlength="11" value="${cpCon.receiveNo}" required tabindex="34" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false" autocomplete=off /> 
```

这对我很有用。现在没有人可以使用鼠标右键粘贴选项或从键盘按 ctrl+v 粘贴到您的文本框中。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-10T07:52:38.920

// 禁用粘贴功能

```
$(document).ready(function(){
  $('#txtInput').bind("paste",function(e) {
      e.preventDefault();
  });
}); 
```

// 下面一个可能对您的功能有所帮助。

```
$(document).ready(function(){
  $('#txtInput').bind("paste",function(e) {
    validate(e);
  });
}); 
```

**或者**

`OnTabOut()`或者`onblur()`您可以验证输入/粘贴的文本，而不是处理粘贴功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-03T11:45:57.367

我在我的 Angular 项目中尝试了这个，没有 jQuery 也能正常工作。

```
<input type='text' ng-paste='preventPaste($event)'> 
```

在脚本部分：

```
$scope.preventPaste = function(e){
   e.preventDefault();
   return false;
}; 
```

在非角度项目中，使用 'onPaste' 代替 'ng-paste' 和 'event' 代替 '$event'。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-30T13:24:17.470

**VanillaJS 解决方案**

```
function pasteNotAllowFunc(xid){
 let myInput = document.getElementById(xid);
     myInput.onpaste = (e) => e.preventDefault();
} 

pasteNotAllowFunc('pasteInput')
```

```
Paste
<input id="pasteInput" value="paste not allow"/>
<hr/>
Textarea
<textarea id="test" value="Copy me and try to paste"></textarea>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-26T10:07:31.053

如果您只需要不可编辑的 kendoComboBox()，则可以改用 kendoDropDownList()。

在我的情况下，我需要根据用户权限启用/禁用它，所以这是我想出的解决方案（这可以防止键输入和粘贴值）：

```
if (user.hasRight()) {

  var myinput = $("#myinput").data("kendoComboBox");
  myinput.input.on("keydown", function (e) { e.preventDefault(); });
  myinput.input.bind("paste", function (e) { e.preventDefault(); });

} 
```

你可以[在这里测试](http://refork.com/x4bd)

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-03-10T07:49:27.500

jQuery：

```
 $(this).click(function () {
    $(".txtbox").attr("disabled", "disabled"); 

  }); 
```

或CSS：

```
.txtbox{
 display: none;
 visibility: hidden;
 } 
```

或 html 属性：

```
 set disabled="disabled"; 
```

# html - 如何在 html 中使用 Marquee？

> ID：15320070
> 
> 赞同：-4
> 
> 时间：2013-03-10T07:45:15.567
> 
> 标签：html

我是 html 新手，我想知道如何使用 Marquee。我希望文本以交替的方式从右到左和从左到右移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:47:58.653

在您的 html 文件中的代码下方

```
 <marquee direction="left">
        Your  text 
</marquee> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:48:01.837

您可以使用`<marquee>`标签创建滚动字幕（即滚动文本或滚动图像）。您可以使文本/图像从右到左、从左到右、从上到下或从下到上滚动 - 这是您的选择！此外，您还可以使用它创建酷炫的文字效果。

可以创建一个向左滚动的选框，如下所示：

```
<marquee behavior="alternate" direction="left">
        Your slide-in text goes here
</marquee> 
```

有关[此链接的更多信息](http://www.quackit.com/html/codes/html_marquee_code.cfm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T07:48:22.497

要么使用选框标签（如果它在浏览器上实现），要么使用动态 HTML（javascript/variants + CSS）。

老实说，字幕是邪恶的，因为它们将用户的注意力从内容转移到文本上，这应该只用于练习目的，仅此而已。

# android - 创建两个线程同时侦听两个套接字连接。

> ID：15320072
> 
> 赞同：-1
> 
> 时间：2013-03-10T07:45:26.290
> 
> 标签：android, multithreading, sockets

我将创建两个线程，它们将侦听两个套接字连接，每个线程将与每个套接字连接，并将接收数据，但这里应该注意的一件事是它将同时运行并永远获取数据。例子：

**线程 1**

```
Thread {
    //fetch data from socket 1234
} 
```

**线程 2**

```
Thread 2 {
    //fetch data from socket 5678
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:45:21.160

对于单处理器设备，两个线程永远不会同时运行。两个线程都将被分配时隙来执行它们的任务。但是，当您创建两个不同的线程时，两个线程从套接字接收数据，因此不会因替代线程调度而丢失数据。您可以简单地执行以下操作

```
 Thread thread1 = new Thread(){
        public void run(){
         //do something
        }
     }
    Thread thread2 = new Thread(){
         public void run(){
          //do something
          }
      }
    thread1.start();
    thread2.start(); 
```

在您的情况下，接收数据不会有问题。

# c# - 可空对象必须有值异常

> ID：15320074
> 
> 赞同：2
> 
> 时间：2013-03-10T07:45:44.500
> 
> 标签：c#, plugins, dynamics-crm-2011

我是 CRM 2011 插件的新手。我写了一个插件来更新税值。但是在下面的行会引发错误

> “可空对象必须有值”

```
double Tax = (double)(QuoteProduct.BaseAmount - QuoteProduct.ManualDiscountAmount - 
             QuoteProduct.VolumeDiscountAmount) / 20; 
```

发生错误时，值为：基础金额=0，
手动折扣金额=空，
批量折扣金额=0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:05:12.160

假设您的所有变量都是 type `Nullable<T>`，您可以使用`GetValueOrDefault`() 方法（[MSDN](http://msdn.microsoft.com/en-us/library/72cec0e0.aspx)文章）。

该方法将返回对象具有的值，或者在 null 的情况下返回该类型的默认值（0.0 表示双精度）。

```
double Tax = (double)(QuoteProduct.BaseAmount.GetValueOrDefault() - QuoteProduct.ManualDiscountAmount.GetValueOrDefault() - 
             QuoteProduct.VolumeDiscountAmount.GetValueOrDefault()) / 20; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T07:55:11.807

您不能将 null 转换为 double。

```
double x = null; 
```

产生错误：

> 无法将 null 转换为“double”，因为它是不可为 null 的值类型

因此，您必须确保您的值是 0（零）而不是 null。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T07:56:34.023

你不能从 null 中减去！

```
if (... != null) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T09:45:06.150

我从你发表的另一篇文章中认出了这个公式。通常，在这种情况下，我会使用如下很好的语法。（其他回复者提到的*GetValueOrDefault*的语法是可以的，但往往会使您的代码可读性降低，并且行会变得很*长*。）

考虑以下更改（我假设每个部分都可能碰巧为*null*。

```
decimal tax = QuoteProduct.BaseAmount ?? 0;
tax -= QuoteProduct.ManualDiscountAmount ?? 0;
tax -= QuoteProduct.VolumeDiscountAmount ?? 0;
QuoteProduct.Attribute["tax"] = tax / 20; 
```

（我假设这与[您的其他问题有关](https://stackoverflow.com/questions/15320363/unhandled-exception-on-savechanges-crm-2011-plugin)。）

# macos - 如何在 mac osx 中使用 glx.h 编译 fox-toolkit

> ID：15320085
> 
> 赞同：0
> 
> 时间：2013-03-10T07:47:54.003
> 
> 标签：macos, opengl, osx-mountain-lion, fox-toolkit

我正在尝试在 Mac OSX 山狮（10.8）中构建具有 opengl 支持的[Fox-toolkit 。](http://www.fox-toolkit.org/)我已经修改了配置文件

> 总帐/gl.h 总帐/glu.h

至

> OpenGL/gl.h OpenGL/glu.h

它可以在配置过程中找到这两个文件。但是它找不到 glx.h 没有 GL/glx.h、OpenGL/glx.h 和 GLUT/glx.h

我安装了正确链接的 XQuartz。我可以在 /opt/X11/include/GL/glx.h 中看到 glx.h，但 fox-toolkit ./configure 找不到它。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:22:07.577

[经过长时间的搜索和尝试，我终于在sourceforge](http://sourceforge.net/mailarchive/forum.php?thread_name=89951EE9-904F-4013-933E-D902E891ACE6@algonet.se&forum_name=foxgui-users)找到了解决这个问题的方法

根据上面帖子中的 Anders F Björklund（非常感谢他）所说——

对于 10.7 Lion 及更高版本，命令是-

CXXCPP="g++ -E" CXX="g++ -arch i386 -arch x86_64" CPPFLAGS="-I/usr/X11/include -I/usr/X11/include/freetype2" LDFLAGS="-L/usr/X11/ lib" ./configure --with-x --with-xft --with-opengl --x-includes=/usr/X11/include --x-libraries=/usr/X11/lib make make install

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:47:21.277

GLX 是 X11 的 OpenGL 扩展协议扩展。虽然 MacOS X 有 X11 服务器，但它的 OpenGL 支持不太好。你当然想使用 MacOS X 原生的 OpenGL 框架。这意味着：没有GLX！

我不太了解 Fox 工具包，但它可能是（请有人对此有所了解），它还不包含对 MacOS X 上的 OpenGL 小部件的支持。

# c# - C# 中的 C 方法 Fread() 等效性

> ID：15320087
> 
> 赞同：0
> 
> 时间：2013-03-10T07:48:05.380
> 
> 标签：c#, c

我正在研究 LOTUS Notes API，在此过程中，我遇到了这样的功能，

```
bytesRead = fread (Buffer, 1, (WORD) Length, hCDFile); 
```

现在我发现了一些 C# 等效方法，例如，它在一个 while 循环中运行。在第一次迭代时，该方法似乎工作正常（当我调试 c 版本的代码和 C# 版本时，结果是相同的）。但是在第二次迭代中假设dwLengthHost = 35的值，在这个方法之前我调用了另一个方法

`NSFDUMPReadFromFile(hCDFile, ref RecordTypeCanonicalPtr, sizeof (ushort))`它调用`fread`函数并给出 value `RecordTypeCanonicalPtr=149`。但在那之后，当稍后调用相同的方法时`RecordTypeCanonicalPtr`，`dwLengthHost` 值会自动更改。

```
[DllImport("msvcrt.dll")]
public static extern UInt32 fread(ref IntPtr Buffer, uint Size, uint Count, IntPtr Stream);

private bool NSFDUMPReadFromFile(IntPtr hCDFile,
                                        ref IntPtr Buffer,
                                        UInt32 Length)
{
    UInt32 bytesRead = NotesApi.fread(ref Buffer, 1, (uint)Length, hCDFile);
    /* Read bytes from the file */ 
    if (bytesRead == Length)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:15:05.370

看起来你需要使用[`FileStream`](http://msdn.microsoft.com/en-us/library/y0bs3w9t.aspx)

您可以使用创建它[`File.Open`](http://msdn.microsoft.com/en-us/library/system.io.file.open.aspx)

与以下行为完全相同：

```
bytesRead = fread (Buffer, 1, (WORD) Length, hCDFile); 
```

应提供以下 C# 代码

```
bytesRead = file.Read(Buffer, 0, Length) 
```

完整的例子可能如下

```
using(file = File.Open("test.bin", FileMode.Open))
{
    var length = 256;
    var buffer = new byte[length];
    var bytesRead = file.Read(buffer, 0, length);
} 
```

# c# - 从 OLE 二进制字符串中解析 MathType MTEF 数据

> ID：15320088
> 
> 赞同：4
> 
> 时间：2013-03-10T07:48:18.143
> 
> 标签：c#, openxml, ole, unmarshalling, mathtype

需要将 MS-WORD 2003 或更低版本中的 MathType 方程转换为 MathML，以便在 Web 上很好地呈现。MathType 的内置函数“Publish to MathPage”可以很好地完成这项工作，但我想将方程转换过程集成到我的 C# 应用程序中。因为我找不到任何关于 MathPage 导出接口是由 MathType SDK 提供的 API 引用，所以我需要自己想办法进行单独的方程转换。

当前的程序是将 MS-WORD 2003 或以下文档转换为 Open XML 格式（docx）。docx转换后可以看到打开的xml中保存了MathType嵌入的ole对象二进制字符串，也就是docx。然后下一步是从嵌入对象二进制字符串中解码MTEF数据，所以我尝试通过参考MathType MTEF标头的官方文档来提取MTEF。

代表 MathType 创建的嵌入对象的[base64 二进制字符串](https://dl.dropbox.com/u/4625393/Base64.txt)是从[MS-WORD 测试 DOCX 文件](https://dl.dropbox.com/u/4625393/t1.docx)中提取的。

**MTEF 标头定义：**

> MTEF 数据保存为对象的本机数据格式。每当将方程对象写入 OLE“流”时，都会写入一个 28 字节的标头，然后是 MTEF 数据。此标头的 C 结构如下：

```
struct EQNOLEFILEHDR {
    WORD    cbHdr;     // length of header, sizeof(EQNOLEFILEHDR) = 28 bytes
    DWORD   version;   // hiword = 2, loword = 0
    WORD    cf;        // clipboard format ("MathType EF")
    DWORD   cbObject;  // length of MTEF data following this header in bytes
    DWORD   reserved1; // not used
    DWORD   reserved2; // not used
    DWORD   reserved3; // not used
    DWORD   reserved4; // not used
}; 
```

> cf 成员是调用 Windows API 函数 RegisterClipboardFormat("MathType EF") 的返回值。

然后我尝试将其转换为 C# 版本：

```
[StructLayout(LayoutKind.Sequential, Pack=1)]
struct EQNOLEFILEHDR
{
    public UInt16 cbHdr;
    public UInt32 version;
    public UInt16 format;
    public UInt32 size;
    public UInt32 reserved1;
    public UInt32 reserved2;
    public UInt32 reserved3;
    public UInt32 reserved4;
} 
```

准备好标头结构后，以下代码尝试从嵌入式对象二进制字符串中填充标头结构中的信息。

```
foreach (EmbeddedObjectPart eop in wordDoc.MainDocumentPart.EmbeddedObjectParts)
{
    Stream stream = eop.GetStream();
    byte[] buffer = new byte[int.Parse(stream.Length.ToString())];
    using (BinaryReader reader = new BinaryReader(stream))
    {
        int res = reader.Read(buffer, 0, int.Parse(stream.Length.ToString()));
    }
    GCHandle hdl = GCHandle.Alloc(buffer, GCHandleType.Pinned);
    IntPtr intp = Marshal.AllocHGlobal(buffer.Length);
    Marshal.Copy(buffer, 0, intp, Marshal.SizeOf(typeof(EQNOLEFILEHDR)));
    EQNOLEFILEHDR header = (EQNOLEFILEHDR)Marshal.PtrToStructure(intp, typeof(EQNOLEFILEHDR));
    Marshal.FreeHGlobal(intp);
} 
```

但是，在标头结构中填充的数据不正确，这让我认为这不是从 DOCX 文件中的嵌入对象二进制字符串中解析 MTEF 数据的正确方法。

我还查看了 MathType SDK 下载中的示例 .NET 代码，发现 IDataObject 用于包含 MathType 信息和转换程序。所以另一种方法是使用`BinaryFormatter`代码来查看它是否可以将二进制字符串反序列化为 IDataObject 类型的对象`BinaryFormatter.Deserialize(stream)`。但是也不行，提示异常`Binary stream '0' does not contain a valid BinaryHeader`

我尝试用来解析 MTEF 数据的方法有什么问题吗？

# opencv - 多人脸检测

> ID：15320093
> 
> 赞同：0
> 
> 时间：2013-03-10T07:49:03.133
> 
> 标签：opencv, object-detection

我在 OpenCV（C++ 中）中有一个代码，它使用“haarcascade_mcs_upperbody.xml”来检测上身。它检测单个上身。我怎样才能让它检测到多个上半身。我认为 CV_HAAR_FIND_BIGGEST_OBJECT 只检测到最大的物体。但我不知道如何解决这个问题

代码如下：

```
int main(int argc, const char** argv)
{
CascadeClassifier body_cascade;
body_cascade.load("haarcascade_mcs_upperbody.xml");

VideoCapture captureDevice;
captureDevice.open(0);

Mat captureFrame;
Mat grayscaleFrame;

namedWindow("outputCapture", 1);

//create a loop to capture and find faces
while(true)
{
    //capture a new image frame
    captureDevice>>captureFrame;

    //convert captured image to gray scale and equalize
    cvtColor(captureFrame, grayscaleFrame, CV_BGR2GRAY);
    equalizeHist(grayscaleFrame, grayscaleFrame);

    //create a vector array to store the face found
    std::vector<Rect> bodies;

    //find faces and store them in the vector array
    body_cascade.detectMultiScale(grayscaleFrame, faces, 1.1, 3,                                                                                                                                     
    CV_HAAR_FIND_BIGGEST_OBJECT|CV_HAAR_SCALE_IMAGE, Size(30,30));    
    //draw a rectangle for all found faces in the vector array on the original image
    for(int i = 0; i < faces.size(); i++)
    {
        Point pt1(bodies[i].x + bodies[i].width, bodies[i].y + bodies[i].height);
        Point pt2(bodies[i].x, bodies[i].y);

        rectangle(captureFrame, pt1, pt2, cvScalar(0, 255, 0, 0), 1, 8, 0);
    }

    //print the output
    imshow("outputCapture", captureFrame);

    //pause for 33ms
    waitKey(33);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:01:25.157

您的代码似乎有些不一致，因为`face_cascade`没有在任何地方定义，但我认为它的类型是`CascadeClassifier`.
`detectMultiScale`将所有检测到的对象存储在`faces`向量中。你确定它只包含一个对象吗？
尝试删除`CV_HAAR_FIND_BIGGEST_OBJECT`标志，因为您希望检测到所有对象，而不仅仅是最大的对象。
此外，请确保正确设置`minSize`和`maxSize`参数（请参阅[文档](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)），因为这些参数决定了可检测对象的最小和最大尺寸。

# c# - 使用 Viewbox 缩放/拉伸在 WPF 中保持固定粗细的线条

> ID：15320099
> 
> 赞同：8
> 
> 时间：2013-03-10T07:49:39.310
> 
> 标签：c#, wpf, antialiasing, viewbox

我有一个`<Grid>`包含一些垂直和水平`<Line>`的s。我希望网格可以随窗口大小缩放，并保持其纵横比，因此它包含在`<Viewbox Stretch="Uniform">`.

但是，我还希望线条始终以 1 像素的宽度呈现，所以我使用：

```
Line line = new Line();
line.SetValue(RenderOptions.EdgeModeProperty, EdgeMode.Aliased);
// other line settings here... 
```

这使得线条的初始外观很理想，但是一旦您开始调整窗口大小，就会开始拉伸/缩放，线条再次变成 1 和 2 像素粗的混合。

有什么方法可以让线条始终为 1 像素粗并且还允许调整窗口/网格的大小？

**更新 - 根据 Clemens 的建议使用路径几何**

@Clemens - 感谢您强调线条和路径之间的渲染差异。当我尝试使用您的示例重新编写我的代码时，我有一种下沉的感觉，我正在为自己挖掘更多的漏洞，并没有真正掌握整个概念（完全是我的错，不是你的错，我只是 WPF 的新手） .

我将添加一些屏幕截图来说明以下描述：

我正在制作一个游戏板（用于[Go](http://en.wikipedia.org/wiki/Go_(game))游戏，以防有助于理解布局）。我有一个 9x9 的网格，我打算通过简单地将椭圆添加到特定的网格单元来放置游戏片段。

然而，要在棋盘上绘制底层线，我需要在棋盘上绘制与单元格中间相交的线（在 Go 中，棋子放置在交叉点上，而不是单元格的中间）。

很可能是我采取了完全错误的方法，请随时告诉我从另一条路线重新开始，而不是在当前结构中四处乱窜。

到目前为止，这就是我所做的（由于坐标的计算方式，我正在以编程方式添加路径。不确定是否可以全部在 XAML 中完成）：

XAML：

```
<Grid MinHeight="400" MinWidth="400" ShowGridLines="False" x:Name="boardGrid">
    <Grid.Resources>
        <ScaleTransform x:Key="transform"
            ScaleX="{Binding ActualWidth, ElementName=boardGrid}"
            ScaleY="{Binding ActualHeight, ElementName=boardGrid}" />
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <!-- more rows, 9 in total -->
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition></ColumnDefinition>
        <!-- more columns, 9 in total -->
    </Grid.ColumnDefinitions>

    <!-- example game pieces -->
    <Ellipse Stroke="Black" Fill="#333333" Grid.Row="3" Grid.Column="2" />
    <Ellipse Stroke="#777777" Fill="#FFFFFF" Grid.Row="4" Grid.Column="4" />
</Grid> 
```

C＃：

```
int cols = 9;
int rows = 9;

// Draw horizontal lines
for (int row = 0; row < rows; row++)
{
    var path = new System.Windows.Shapes.Path();
    path.Stroke = Brushes.Black;
    path.StrokeThickness = 1;
    path.SetValue(RenderOptions.EdgeModeProperty, EdgeMode.Aliased);
    Grid.SetRow(path, row);
    Grid.SetColumnSpan(path, cols);
    Grid.SetZIndex(path, -1);

    double cellWidth = boardGrid.ColumnDefinitions[0].ActualWidth;
    double cellHeight = boardGrid.RowDefinitions[0].ActualHeight;
    double x1 = (cellWidth / 2) / boardGrid.ActualWidth;
    double y1 = (cellHeight / 2) / boardGrid.ActualHeight;
    double x2 = ((cellWidth * cols) - (cellWidth / 2)) / boardGrid.ActualWidth;
    double y2 = (cellHeight / 2) / boardGrid.ActualHeight;

    path.Data = new LineGeometry(new Point(x1, y1),
                                 new Point(x2, y2), 
                           (ScaleTransform)boardGrid.TryFindResource("transform"));
    boardGrid.Children.Add(path);
}

// Similar loop code follows for vertical lines... 
```

这是我使用上面的代码时得到的

![使用路径时的结果](../Images/987bbada99d4b177dd5f6f078e4fe68d.png)

这几乎就是我想要的样子。它又为我提出了两个问题：

1) 我是否采用了正确的方法来计算`x1`、和值`x2`，通过将它们除以总板宽度来创建一个介于 0 和 1 之间的数字，以便随后可以将 ScaleTransform 应用于它们？`y1``y2`

2）现在我不再使用a`Viewbox`了，如何实现固定比例缩放？如果我放大我的窗口，板会不成比例地伸展（见下图）。（不过，它不再对线条进行抗锯齿，这很棒。）

![拉伸板失去纵横比](../Images/bd0f18f2ab0a00685da1fd14dcb9579c.png)

我知道这将成为一个单一的帖子。我非常感谢您的耐心和回复。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T14:19:26.820

Viewbox 只能“直观地”缩放其子元素，包括任何渲染笔画的粗细。您需要的是仅适用于线条（或其他形状）的几何形状，但不影响笔画的缩放。

您可以通过使用转换后的[LineGeometries](http://msdn.microsoft.com/en-us/library/ms635204.aspx)作为其属性`Line`的对象来绘制线条，而不是使用对象。您可以通过使用 Grid 的宽度和高度作为 x 和 y 方向的缩放因子来创建从逻辑坐标缩放到视口坐标的坐标。每个 LineGeometry（或任何其他几何）将使用 0..1 范围内的逻辑坐标：[`Path`](http://msdn.microsoft.com/en-us/library/ms615632.aspx)[`Data`](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path.data.aspx)[`ScaleTransform`](http://msdn.microsoft.com/en-us/library/ms635521.aspx)

```
<Grid x:Name="grid">
    <Grid.Resources>
        <ScaleTransform x:Key="transform"
                        ScaleX="{Binding ActualWidth, ElementName=grid}"
                        ScaleY="{Binding ActualHeight, ElementName=grid}"/>
    </Grid.Resources>
    <Path Stroke="Black" StrokeThickness="1">
        <Path.Data>
            <LineGeometry StartPoint="0.1,0.1" EndPoint="0.9,0.9"
                          Transform="{StaticResource transform}"/>
        </Path.Data>
    </Path>
</Grid> 
```

* * *

为了获得统一的缩放，您可以简单地将 ScaleTransform`ScaleX`和`ScaleY`属性绑定到Grid`ActualWidth`或`ActualHeight`Grid 中：

```
<Grid x:Name="grid">
    <Grid.Resources>
        <ScaleTransform x:Key="transform"
                        ScaleX="{Binding ActualWidth, ElementName=grid}"
                        ScaleY="{Binding ActualWidth, ElementName=grid}"/>
    </Grid.Resources>
    ...
</Grid> 
```

您还可以从宽度和高度的最小值计算统一比例因子，后面有一些代码：

```
<Grid x:Name="grid" SizeChanged="grid_SizeChanged">
    <Grid.Resources>
        <ScaleTransform x:Key="transform"/>
    </Grid.Resources>
    ...
</Grid> 
```

使用这样的 SizeChanged 处理程序：

```
private void grid_SizeChanged(object sender, SizeChangedEventArgs e)
{
    var transform = grid.Resources["transform"] as ScaleTransform;
    var minScale = Math.Min(grid.ActualWidth, grid.ActualHeight);
    transform.ScaleX = minScale;
    transform.ScaleY = minScale;
} 
```

# java - 拒绝前导/结束非字母数字字符的单词边界

> ID：15320104
> 
> 赞同：0
> 
> 时间：2013-03-10T07:50:27.593
> 
> 标签：java, regex, alphanumeric, word-boundary

现在我正在学习 Java 上的正则表达式，我对单词边界有疑问。因此，当我在 Java 正则表达式上查找单词边界时，我得到了这个 \b 接受以非单词字符为边界的单词，所以这个正则表达式 `\b123\b` 将接受这个字符串`123 456`但会拒绝`456123456`。现在我发现像这个词这样的条件`!$@#@%123^^%$#`还是`"123"`被上面的正则表达式接受了。是否有任何单词边界/模式拒绝像上面的示例那样以非字母数字（空格除外）为边界的单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:06:55.407

您想使用`\s`而不是`\b`. 这将寻找一个空白字符而不是一个单词边界。

但是，如果您希望您的第一个示例`123 456`匹配，那么您还需要使用锚点`123`在字符串的立即开始或结束处接受。这可以通过`(\s|^)123(\s|$)`. 克拉`^`匹配字符串的开头并`$`匹配字符串的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:52:15.223

```
(?<!\S)123(?!\S) 
```

`(?<!\S)`匹配*前面*没有非空白字符的位置。（消极的后视）

`(?!\S)`匹配*后面*没有非空白字符的位置。（负前瞻）

我知道这看起来很复杂，但那是因为`\b`隐藏了很多复杂性。这相当于：

```
(?<=\w)(?!\w)|(?=\w)(?<!\w) 
```

...表示*前面*有一个单词字符但后面没有*一个*的位置，或者*后面*有一个单词字符但*前面*没有一个的位置。

# ruby - 如何防止 has_many 关系的父母多次数据库往返

> ID：15320106
> 
> 赞同：1
> 
> 时间：2013-03-10T07:50:36.020
> 
> 标签：ruby, mongodb, mongoid, errbit

我可能在这里遗漏了一些东西，但这似乎是一个性能疏忽。[当我查看Errbit](http://errbit.github.com/errbit/)的查询日志并注意到针对相同对象的数百个查询时，我首先注意到了这一点。

似乎关系的所有子项在`has_many`通过关系加载后都没有对其父对象的引用。即访问`parent.children.map &:parent`将每次从数据库中获取父级，`child`而不是使用内存中的副本进行设置`parent`

## 例子：

使用非常简单的`belongs_to`/`has_many`设置：

```
class Person
  include Mongoid::Document
  field :name
  has_many :posts, :inverse_of => :person
end

class Post
  include Mongoid::Document
  field :text
  belongs_to :person, :inverse_of => :posts
end 
```

然后，在 Rails 控制台中，进行一个简单的演示：

```
Loading development environment (Rails 3.2.12)
[1] pry(main)> tom = Person.create(:name => 'Tom')
[2] pry(main)> tom.posts.create(:text => 'stuff')
[3] pry(main)> tom.posts.create(:text => 'other stuff')
[4] pry(main)> Person.first.posts.map {|post| post.person.object_id}
=> [50687740, 50719060] 
```

**注意最后一行**，每个`person`引用指向不同的 ruby​​ 对象。我使用 ruby​​ 的`object_id`属性来强调这些实际上是不同的对象这一事实，这需要两次往返数据库。

**为什么通过 has_many 关系加载后**，父关系不只是对父对象的引用？****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:39:51.533

事实证明这是一个已知的缺陷，并且[计划](https://github.com/mongoid/mongoid/issues/2882#issuecomment-14679020)在 4.0 版中添加此功能。

同时，您可以通过启用[Mongoid Identity Map大幅减少重复查询并提高性能](http://mongoid.org/en/mongoid/docs/identity_map.html)**

# javascript - jQuery - 使用 Ajax 加载内容后使用 javascript

> ID：15320107
> 
> 赞同：0
> 
> 时间：2013-03-10T07:50:40.760
> 
> 标签：javascript, jquery, slider, flexslider

当单击锚元素时，我想用 jQuery 加载 flexslider 库。图库应在 div#slider-loader 中加载

问题是 HTML 已正确加载，但 Javascript 似乎不会影响注入的元素，即使我读到在这种情况下我将使用 .on()。

```
$(document).on('click', '.cliccami' , function() {
        var href = $(this).attr('href');
        $('#slider-loader').load(href);
        return false;
}); 
```

先感谢您！

--

> 使用回调函数在加载完成时执行操作，如下所示

甜的！有效！尽管使用这种解决方案， .on() 事件变得无用。现在我想出了这个并且它有效：

```
$('.cliccami').click(function() {
    var href = $(this).attr('href');
    var gallery_height = $('.flexslider').css('height');
    $('#slider-loader').hide().fadeIn('slow', 'swing').load(href , function(){
        $('.flexslider').flexslider({
            animation: "slide"
        });

    })
    return false;
}); 
```

唯一的问题是代码的注入非常分散。我想让 div 容器“#slider-loader”根据“.flexslider”高度调整其高度，并带有平滑的动画。

我试图做的是：

```
$(document).ready(function(){
    $('#slider-loader').hide();
});

$(document).on( 'click', '.cliccami', function() {

    var href = $(this).attr('href');
    var gallery_height = $('.flex-viewport').css('height');

    $('#slider-loader').load(href , function(){
        $('.flexslider').flexslider({
                animation: "slide"
        });
        $('#slider-loader').css('height' , gallery_height);
        $('#slider-loader').slideDown(10000);
    });
    return false;
}); 
```

问题是，一旦我单击锚元素，#slider-container 开始滑动显示其内容，但对于我设置为变量并使用 .css( ） 方法。它向下滑动了几个像素，然后突然变成了整个 .flexslider 的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:58:43.543

使用回调函数在加载完成时执行操作，如下所示

```
$(document).on('click', '.cliccami' , function() {
        var href = $(this).attr('href');
        $('#slider-loader').load(href , function(){
                                  // some thing to happen when loading is done
                                });
        return false;
}); 
```

# sitecore - 将 MVC Web 迁移到 Sitecore 的最佳实践

> ID：15320113
> 
> 赞同：6
> 
> 时间：2013-03-10T07:51:46.967
> 
> 标签：sitecore, sitecore6

我们有几个 MVC 3.0 Web 应用程序，其中一些在项目/解决方案中结合了 Web 表单和 MVC3.0。

我对 sitecore 很陌生，有人可以帮助我了解有关将现有应用程序迁移到 Sitecore 的以下内容吗？

1.  在什么类型的场景下，我们应该将 MVC3.0 剃须刀视图移至 sitecore？

2.  将 MVC3.0 迁移到 sitecore 的关键问题是什么？

3.  我需要在 sitecore 管道上注入任何东西吗？

4.  我是否需要更改任何导航链接才能在 sitecore 下工作？

5.  任何指向迁移现有 Web 应用程序的 sitecore 最佳实践的链接都很好。

我关注了下面的博客，但仍然不清楚为什么以及何时应该将 Web 控制和剃刀视图转换为 Sitecore 渲染。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T10:29:55.487

将 MVC 应用程序迁移到 Sitecore 解决方案时，您有几个可用选项 - 根据您要迁移的组件的性质，您必须选择最合适的选项。

我将尝试解决您的 5 个具体问题：

**1\. 何时使用 Razor 视图**

我不确定问题是“何时使用 Razor 视图”还是“何时使用 Sitecore 视图渲染”——我假设是后者。

如果您正在编写不需要任何业务逻辑并且只处理渲染项目的演示组件，则视图渲染非常有用。如果您正在考虑在 Razor 视图中添加代码，您可能应该考虑控制器渲染是否更合适，或者可能自定义`mvc.getModel`管道。

**2\. 迁移陷阱**

将 MVC 应用程序迁移到 Sitecore 时可能会引起您注意的一些事情。

*   基于组件的控制器 - 在 MVC 中，每页有一个控制器。Sitecore 支持 ControllerRenderings 的概念，它允许您在一个页面上拥有多个控制器（注意：总会有一个路由控制器可以被视为主要控制器）。
*   项目路由 - Sitecore 有一条对映射到项目路径的所有路径都有效的包罗万象的路由。标准 MVC 路由和“项目路由”可以愉快地共存。项目路由当前不支持路由参数（例如，您不能在项目路由上指定 {action} 或其他参数）。
*   MVC4 - 目前没有对 MVC4 的官方支持（这不会持续很长时间 - 但同时看看[http://herskind.co.uk/blog/2012/10/sitecore-66-mvc4](http://herskind.co.uk/blog/2012/10/sitecore-66-mvc4)）
*   区域 - 目前不完全支持区域。
*   不知道要使用什么渲染类型以及何时将现有功能转换为组件。

**3.流水线定制**

您不必自定义 Sitecore 管道。我可以看到一些示例，其中在迁移故事的上下文中修改管道会很有用。我最近在 Sitecore 用户组谈到的一个示例涉及添加一个`ActionFilter`全局（通过`mvc.resultExecuting`管道），它将一个 ASP.Net MVC 应用程序注入到 Sitecore 占位符中。在我的示例中，我将 MVC 音乐商店注入占位符并让 Sitecore 控制窗口修饰（页眉/页脚/菜单）。通过这种方式，我可以将现有的 MVC 应用程序引入 Sitecore，而无需进行太多更改。

**4.导航链接**

如果您的导航端点是 Sitecore 项目路由（即网站上项目的路径），您应该使用 Sitecore`LinkManager`生成适当的链接。如果端点是标准 MVC 路由`RouteLink`并且`ActionLink`应该可以正常工作。

我想如果没有具体的例子，答案将是“也许”。

**5\. 最佳实践迁移博客文章**

我不知道有任何博客文章或文章涉及 Sitecore MVC 迁移最佳实践。请记住，完整的 MVC 支持是 Sitecore 最近新增的功能，而且还没有多少人从头到尾看到这一旅程。

**为什么以及何时转换为 Sitecore 渲染**

您在结束问题时表示您仍然对何时以及为何将控件和 Razor 视图转换为 Sitecore 渲染感到困惑。以下是一些可以作为 Sitecore 渲染候选对象的指标：

*   它是一个可以在许多页面上重复使用的组件。
*   您希望 Sitecore 用户能够将组件添加到页面。（想想页面编辑器）
*   您想利用 Sitecore 的组件级缓存。
*   您想利用 Sitecore 安全性来限制谁可以使用/查看该组件。
*   您想通过个性化、规则来控制组件或在其上运行 MVT。

在 MVC 的上下文中，这里有一些指标表明将某些内容转换为 Sitecore 渲染可能是不正确的：

*   它严重依赖于路由和路由参数。

我确信这个答案中的许多观点都可以扩展，我知道对此没有明确的规则 - 但我希望这个答案有助于消除一些困惑......

# javascript - 如何使用javascript自动填充级联选择？

> ID：15320115
> 
> 赞同：0
> 
> 时间：2013-03-10T07:52:01.230
> 
> 标签：javascript

我正在编写一个程序来自动填写网页中的表格空白。使用 javascript，我可以处理普通的空白，如用户名输入和 passwd 输入。但是当涉及到级联选择时，比如一些网页要求你输入地址信息，有3个选择：选择国家、选择省和选择城市。第二个菜单的内容是在第一个菜单的onchange事件时加载的，以进行第三个选择。

我想知道如何自动填充这 3 个选择，因为我已经知道每个选择的值。有人可以帮忙吗？

以下代码似乎不起作用：

```
 document.getElementById("selProvinces").value='11';
 document.getElementById("selProvinces").onchange(); 
 document.getElementById("selCities").value='113';
 document.getElementById("selCities").onchange(); 
 document.getElementById("selDistricts").value='1190'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:09:33.603

你在这里可能会遇到一些问题。

1.  在某些浏览器中，调用`.onchange()`实际上不会触发事件。[请参阅如何以编程方式在输入上强制 onchange 事件的](https://stackoverflow.com/a/136810/11569)答案？更多细节。

2.  如果您正在填写的页面在级联中的下一批值中进行 ajaxing，则“selCities”可能还没有包含值 113。您可以设置超时并定期轮询以查看“selCities”中是否有一些值，然后再设置值

3.  它实际上可能不是他们用于级联的 onchange 事件。老式的方式曾经是 onclick。他们可能正在做它。可能很愚蠢，但值得一看源头以确保:)

# drools - JBPM - 捕捉中间信号有时会失败

> ID：15320120
> 
> 赞同：0
> 
> 时间：2013-03-10T07:52:50.820
> 
> 标签：drools, jbpm

[正如我在上一个问题](https://stackoverflow.com/questions/14473411/jbpm-5-human-task-recall)中给出的那样，我已将“信号中间事件”作为边界事件添加到人工任务中。

有时信号被成功处理，**有时**它**不是**。JBPM 运行时只更新 process-instance-info 并且不处理信号。

我正在使用*StatefulKnowledgeSession.signalEvent()*，它只是在后端更新 ProcessInstanceInfo 并且事件不会取消当前正在进行的活动

可能是什么问题呢 ？与此“信号中间事件”相关的任何错误？.

**日志：**

选择 processins0_.InstanceId 作为 InstanceId1_0_，processins0_.id 作为 id1_0_，processins0_.lastModificationDate 作为 lastModi3_1_0_，processins0_.lastReadDate 作为 lastRead4_1_0_，processins0_.processId 作为 processId1_0_，processins0_.processInstanceByteArray 作为 processI6_1_0_，processins0_.startDate 作为 startDate1_0_，processins0_作为 state1_0_。 .OPTLOCK 作为 OPTLOCK1_0_ 来自 ProcessInstanceInfo processins0_ where processins0_.InstanceId=? 08:34:39,014 INFO [stdout] (http--0.0.0.0-8280-20) Hibernate: 更新 ProcessInstanceInfo 设置 id=?, lastModificationDate=?, lastReadDate=?, processId=?, processInstanceByteArray=?, startDate=?,状态=?, OPTLOCK=? 其中 InstanceId=? 和 OPTLOCK=? processins0_.processId 作为 processId1_0_，processins0_.processInstanceByteArray 作为 processI6_1_0_，processins0_.startDate 作为 startDate1_0_，processins0_.state 作为 state1_0_，processins0_.OPTLOCK 作为 OPTLOCK1_0_ 来自 ProcessInstanceInfo processins0_ where processins0_.InstanceId=？08:34:39,014 INFO [stdout] (http--0.0.0.0-8280-20) Hibernate: 更新 ProcessInstanceInfo 设置 id=?, lastModificationDate=?, lastReadDate=?, processId=?, processInstanceByteArray=?, startDate=?,状态=?, OPTLOCK=? 其中 InstanceId=? 和 OPTLOCK=? processins0_.processId 作为 processId1_0_，processins0_.processInstanceByteArray 作为 processI6_1_0_，processins0_.startDate 作为 startDate1_0_，processins0_.state 作为 state1_0_，processins0_.OPTLOCK 作为 OPTLOCK1_0_ 来自 ProcessInstanceInfo processins0_ where processins0_.InstanceId=？08:34:39,014 INFO [stdout] (http--0.0.0.0-8280-20) Hibernate: 更新 ProcessInstanceInfo 设置 id=?, lastModificationDate=?, lastReadDate=?, processId=?, processInstanceByteArray=?, startDate=?,状态=?, OPTLOCK=? 其中 InstanceId=? 和 OPTLOCK=? 0-8280-20) 休眠：更新 ProcessInstanceInfo 设置 id=?, lastModificationDate=?, lastReadDate=?, processId=?, processInstanceByteArray=?, startDate=?, state=?, OPTLOCK=? 其中 InstanceId=? 和 OPTLOCK=? 0-8280-20) 休眠：更新 ProcessInstanceInfo 设置 id=?, lastModificationDate=?, lastReadDate=?, processId=?, processInstanceByteArray=?, startDate=?, state=?, OPTLOCK=? 其中 InstanceId=? 和 OPTLOCK=?

环境：JBPM 5.4.0.Final，Jboss 7.1.0.Final

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:26:08.890

When you say that the engine updates the ProcessInstanceInfo, I assume you are referring to the last read date only (in case the process instance is not moving forward as expected)? Or other fields as well?

The engine should process each request the same way. So I assume that the process instance itself might not always be in the same state? If the signal for example arrives before or after the human task is active, it will not cause any changes to the process instance itself.

# python - 这个条件运算符是做什么的？

> ID：15320131
> 
> 赞同：1
> 
> 时间：2013-03-10T07:54:16.003
> 
> 标签：python, syntax, conditional-operator

我不太确定如何解释它们，我仍在努力找出它们到底在做什么..

```
color = self.color2

color = self.fill1 if color == self.fill2 else self.fill2 
```

这到底在说什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T08:01:42.833

这称为[条件表达式](http://docs.python.org/3.3/reference/expressions.html#conditional-expressions)。

> 表达式 x if C else y 首先计算条件 C (not x); 如果 C 为真，则计算 x 并返回其值；否则，评估 y 并返回其值。

因此，您的具体示例相当于：

```
if color == self.fill2:
    color = self.fill1
else:
    color = self.fill2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T07:59:19.963

这不是列表理解。它是一种语法糖。具有讽刺意味的是，它旨在提高可读性。

它可以解释为：

```
if color == self.fill2:
    color = self.fill1
else:
    color = self.fill2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T08:07:50.167

这是一个[条件表达式](http://docs.python.org/2/reference/expressions.html#conditional-expressions)参见[PEP-308](http://docs.python.org/2.5/whatsnew/pep-308.html)。

所以像这样

```
x = true_value if condition else false_value 
```

它也可以写成

```
if condition:
    x = true_value
else:
    x = false_value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T08:01:52.230

好吧，它准确地说出它所说的：如果值等于，则将 的值`self.fill1`放入变量中，否则放入。它被称为**三元运算符，您可以**[在此处](http://en.wikipedia.org/wiki/?%3a#Python)找到有关它的更多信息。`color``color``self.fill1``self.fill2`

# regex - 如何设置 Vim 以搜索和排序包含某个字符串的所有行？

> ID：15320137
> 
> 赞同：2
> 
> 时间：2013-03-10T07:54:49.510
> 
> 标签：regex, vim, organization, todo, vimgrep

我正在使用 vim 管理待办事项列表，并想设置一个热键来执行以下操作：

1.  查找包含光标下单词的所有行。世界总是一个标签，格式为：#mytaghere

2.  按其中包含的另一个标签按字母顺序对所有这些行进行排序。该标签再次采用#mytaghere 格式。例如，所有带有标签#priorityA 的行都将按字母顺序排列并放置在所有带有标签#priorityB 的行之上，依此类推。

3.  将所有这些行放入 Vim 的 quickfix 窗口。

通过将以下内容放入我的 .vimrc 文件中，我设法实现了 1 和 3 的有限版本：

```
map <f2> :vimgrep <cword> % <bar> copen <enter>
set iskeyword=@,48-57,_,192-255,95,35 "lets cword include #s and _s 
```

每当光标下的单词包含 # 时，此设置就会失败，并且只要字符是其他字符（例如 _ ），它就会起作用。产生的错误是：“E682：无效的搜索模式或分隔符”，看起来像 # 正在干扰与 vimgrep。

另外，我不知道如何按优先级标签对行进行排序。

提前感谢您的帮助。我只是在学习 Vim，如果我能解决这个问题，我就可以将它用于我所有的组织工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:49:11.967

该`:vimgrep`命令有两种形式：

> ```
> :vim[grep][!] /{pattern}/[g][j] {file} ...
> :vim[grep][!] {pattern} {file} ... 
> ```

对于`/{pattern}/`，实际上可以使用任何非关键字分隔符。当您`<cword>`以 开头时`#`，Vim 将其解释为开始分隔符，然后抱怨因为没有结束分隔符。

选择一个分隔符并将其放在周围`<cword>`；要进行搜索文字，请使用`\V`并转义当前单词，该单词现在通过表达式 register 插入`=`：

```
:noremap <f2> :vimgrep /<C-r>='\V'.escape(expand('<cword>'), '/\')<CR>/ % <bar> copen <enter> 
```

哦，[你应该使用`:noremap`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html); 它使映射不受重新映射和递归的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:56:15.010

感谢 Ingo Karkat，我能够提出以下解决方案：

```
noremap <f2> :vimgrep /<C-r>='\V'.escape(expand('<cword>'), '/\')<CR>/ % <bar> copen <enter> 
```

以上将把光标下的所有内容放入quickfix窗口。

```
:set modifiable
:sort /.*|.*|/ 
```

以上将忽略文件名和行/列信息对快速修复窗口中的所有内容进行排序。

一次做所有事情（查找所有标记的行并按这些行的第一个字符对它们进行排序）：

```
noremap <f2> :vimgrep /<C-r>='\V'.escape(expand('<cword>'), '/\')<CR>/ % <bar> copen <enter> <bar> :set modifiable <enter> <bar> :sort /.*\|.*\|/ <enter> 
```

# matlab - 圆形中值滤波matlab

> ID：15320142
> 
> 赞同：1
> 
> 时间：2013-03-10T07:55:09.277
> 
> 标签：matlab, image-processing, filter, computer-vision, median

如何定义一个类似于中值滤波器 (medfilt2) 的圆形滤波器，但不是 [nn] 的方形邻域，而是在半径为 r 的圆形邻域上执行中值？我需要对 2d 图像执行此操作。（而且最好当然应该快速工作）。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T08:57:56.953

[`ordfilt2`](http://www.mathworks.com/help/images/ref/ordfilt2.html)与循环域一起使用。例如，

```
B = ordfilt2(A, order, domain) 
```

将 A 中的每个元素替换为由 domain 中的非零元素指定的已排序邻居集合中的第一个元素. 在您的情况下，使用类似的东西创建一个循环域

```
domain=fspecial('disk',10)>0; 
```

这会生成一个不错的二进制磁盘（21x21 矩阵），这可能对您的需要来说太大了，因此可以使用`fspecial`or重新调整大小到您需要的任何内容`imresize`。那么中位数就是从域的排序非零元素中得到的中间值，所以：

```
B = ordfilt2(A,round(0.5*numel(find(domain)))),domain); 
```

# php - 使用 sql 数据库更改元素位置

> ID：15320144
> 
> 赞同：1
> 
> 时间：2013-03-10T07:55:16.020
> 
> 标签：php, sql, sqlite, sorting, web-applications

我有`position`属性的元素。这样您就可以选择它们`ORDER BY pos`

```
item | pos
aaa  | 1
bbb  | 2
ccc  | 3 
```

并将它们更改为

```
item | pos
aaa  | 2
bbb  | 3
ccc  | 1 
```

改变定位的常用方法是什么？
我正在使用 PHP+SQLite，但我认为没关系。

我所能想到的就是一步一步地改变它们，每两个调整的东西交换一次。但是如果不调整就会很混乱，例如将位置 x 的元素更改为位置 1。

这方面的常见做法是什么？或者谷歌搜索的关键词是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:14:21.263

刚刚找到[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)。它可用于重新排列然后批量更新数据库值。听起来像一个解决方案，我会试试的。

它很`serialize( options )`适合将新订单传递给服务器脚本。

# java - 在应用程序启动时获取 HttpSessionEventPublisher 异常

> ID：15320146
> 
> 赞同：1
> 
> 时间：2013-03-10T07:55:23.240
> 
> 标签：java, spring, maven, spring-security

该应用程序是使用 spring 和 maven 开发的。我在应用程序开始时收到异常/错误。

```
java.lang.ClassNotFoundException: org.springframework.security.web.session.HttpSessionEventPublisher 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T08:03:29.810

我认为您缺少与弹簧安全相关的库。请确保您的 pom 文件中提到了以下依赖项。

```
<!-- Spring Security --> 
```

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

# c# - 如何为动态生成的工作簿创建下载选项

> ID：15320154
> 
> 赞同：1
> 
> 时间：2013-03-10T07:57:16.703
> 
> 标签：c#, asp.net, excel

我使用下面的代码将 sql 数据转换为 excel 工作簿..通过使用此代码在`C://`驱动器上创建 .xls 文件。如何使它可下载，客户端可以下载它？帮我。我正在使用带有 c# 的 asp.net。下面的代码可以很好地存储 .xls 文件

c:/驱动器。

```
try
    {

        myfilename = subject + "_Sessional" + sessional + "_Batch" + batch;

        string sql = null;
        string data = null;
        int i = 1;
        int j = 0;

        Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
        object misValue = System.Reflection.Missing.Value;

        xlApp = new Excel.ApplicationClass();
        xlWorkBook = xlApp.Workbooks.Add(misValue);
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
        xlWorkSheet.Cells[1, 1] = "Id";
        xlWorkSheet.Cells[1, 2] = "RollNo";
        xlWorkSheet.Cells[1, 3] = "Name";
        xlWorkSheet.Cells[1, 4] = "Branch";
        xlWorkSheet.Cells[1, 5] = "Sem";
        xlWorkSheet.Cells[1, 6] = "Year";
        xlWorkSheet.Cells[1, 7] = "Batch";
        xlWorkSheet.Cells[1, 8] = "Subject";
        xlWorkSheet.Cells[1, 9] = "Sessional";
        xlWorkSheet.Cells[1, 10] = "Attendence";
        xlWorkSheet.Cells[1, 11] = "OutOff";

        using (cnn = new SqlConnection(strConnString))
        {
            cnn.Open();
            sql = "SELECT DISTINCT [st_id], [st_rollno], [st_name], [branch_name], [sem_no], [batch_year] FROM [Student] WHERE (([st_rollno] >=@st_rollno) AND ([st_rollno] <=@st_rollno2) AND ([sem_no] = @sem_no) AND ([branch_name] = @branch_name)) ORDER BY [st_rollno]";

            SqlDataAdapter dscmd = new SqlDataAdapter();
            SqlCommand selectCMD = new SqlCommand(sql, cnn);
            dscmd.SelectCommand = selectCMD;
            selectCMD.Parameters.Add("@st_rollno", SqlDbType.VarChar, 10).Value = firstrollno.Text;
            selectCMD.Parameters.Add("@st_rollno2", SqlDbType.VarChar, 10).Value = lastrollno.Text;
            selectCMD.Parameters.Add("@sem_no", SqlDbType.Int).Value = dpsemno.SelectedItem.Text.ToString();
            selectCMD.Parameters.Add("@branch_name", SqlDbType.VarChar, 5).Value = dpbranchname.SelectedItem.Text.ToString();

            DataSet ds = new DataSet();
            dscmd.Fill(ds);

            for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
                for (j = 0; j <= ds.Tables[0].Columns.Count - 1; j++)
                {

                    data = ds.Tables[0].Rows[i].ItemArray[j].ToString();
                    xlWorkSheet.Cells[i + 2, j + 1] = data;
                    xlWorkSheet.Cells[i + 2, 7] = batch;
                    xlWorkSheet.Cells[i + 2, 8] = subject;
                    xlWorkSheet.Cells[i + 2, 9] = sessional;
                    xlWorkSheet.Cells[i + 2, 11] = outoff;
                }
            }

            xlWorkBook.SaveAs("c:\\" + myfilename + ".xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
            xlWorkBook.Close(true, misValue, misValue);
            xlApp.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlApp);
            lbmsg.Text = "Excel file created,you can find the file in c:\\";
            lbmsg.ForeColor = Color.Green;
            lbmsg.Visible = true;

        }
    }
    catch (SqlException ee)
    {
        lbmsg.Text = ee.Message;
        lbmsg.ForeColor = Color.Green;
        lbmsg.Visible = true;
    }
    finally
    {
        cnn.Close();
    }
}   
    private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
              Label2.Text= "Exception Occured while releasing object " + ex.ToString();
              Label2.ForeColor = Color.Green;
              Label2.Visible = true;

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:56:34.033

很简单，将此代码放在下载按钮上单击

```
 Response.Clear();
 Response.ClearHeaders();
 Response.ClearContent();
 Response.AddHeader("content-disposition", "attachment; filename=" + fileName);
 Response.AddHeader("Content-Type", "application/Excel");
 Response.ContentType = "application/vnd.xls";
 Response.AddHeader("Content-Length", file.Length.ToString());
 Response.WriteFile(file.FullName);
 Response.End(); 
```

希望这有效。

# ruby-on-rails - Mongoid 查找嵌入文档

> ID：15320156
> 
> 赞同：1
> 
> 时间：2013-03-10T07:57:59.703
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在尝试通过其 id 搜索嵌入式文档，并将其返回。这是可能的，但据我所知，只有通过使用 mongo 查找嵌入它的文档，然后在 ruby​​ 中搜索该文档以查找我想要的嵌入文档。像这样：

```
# commenter.rb
  def post
    # todo: find syntax do avoid double query
    if user = User.any_of({'posts.commenter_ids' => self.id}).last
      user.posts.where('commenter_ids' => self.id).last
    end
  end 
```

看起来很简单，但我在 google/SO 搜索中没有找到任何我喜欢的东西。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T18:17:21.087

```
class Order
  embeds_many Products
end

class Product
  embedded_in Order
end

prod_id = "1234" # the embedded doc's _id you request
o = Order.find(product_ids: prod_id)
p = o.products.find(prod_id) 
```

另请参阅[在加载父文档后查询 Mongoid 嵌入文档是否会命中数据库服务器](https://stackoverflow.com/questions/20475455/does-querying-mongoid-embedded-documents-hit-the-database-server-after-loading-a)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T15:23:43.770

我使用这个要点覆盖了我的嵌入式文档上的 find 方法：[https ://gist.github.com/cblavier/7889042](https://gist.github.com/cblavier/7889042)

当我想使用DelayedJob延迟嵌入文档方法时特别方便（因为DJ工作者会使用find(id)来反序列化作业）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-13T20:36:04.940

现在，我将以下功能包含到我的嵌入式文档中。它要求您在嵌套关系上设置 inverse_of 选项。

```
# Returns the parent "embedded_in" relationship for this document
# @return [Mongoid::Relations::Metadata]
def self.parent_relationship
  @parent_relationship ||= relations.values.find do |relation|
    relation.macro == :embedded_in
  end
end

# finds the document off of a root document. This method currently only works correctly if
# you explicitly set the inverse_of value on the embedded_in relationship
# @param [string | Moped::BSON::ObjectId] id
def self.find_using_parent(id)
  id = id.is_a?(Moped::BSON::ObjectId) ? id : Moped::BSON::ObjectId(id)
  parent = parent_relationship.class_name.to_const.where("#{parent_relationship.inverse_of}._id" => id).first
  if parent
    parent.__send__(parent_relationship.inverse_of).find(id)
  end
end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-10T15:32:53.650

如果没有它嵌入的文档，您将找不到资源。如果你只是想要两者之间的关系而不是嵌入它，你应该使用 has_many 而不是 embeds_many [http://mongoid.org/en/mongoid/docs/relations.html#has_many](http://mongoid.org/en/mongoid/docs/relations.html#has_many)。然后，您可以找到没有相关文档的文档。

# vb.net - 空响应 HTTPWebRequest：Windows Phone 8

> ID：15320159
> 
> 赞同：0
> 
> 时间：2013-03-10T07:58:09.283
> 
> 标签：vb.net, json, httpwebrequest, windows-phone-8, windows-phone

我正在制作一个 Windows Phone 应用程序，我正在尝试从 URL 获取 JSON 数据。用户需要登录到网站（托管 JSON 数据）才能获取 JSON 数据，我无法使用 Web 浏览器控件显示数据然后提取字符串，因为浏览器无法识别它（对于某些奇怪的原因）并要求在商店中搜索可以处理该 JSON 文件类型的应用程序。（如果我在 Windows PC 上的桌面浏览器中打开 URL，我可以看到原始 JSON 数据）。我不能使用普通的 HTTPWebRequest 或 WebClient 来获取 JSON 数据，需要设置登录 cookie（JSON 数据是用户特定的），我不能从 Web 浏览器控件中提取 cookie 并将其与 WebClient 或 HTTPWebRequest 一起使用。因此，我能做的最好的事情是使用 WebBrowser 内部使用的 IWebRequestCreate 的特殊内部实例。通过使用该类打开后台 HTTP 请求，cookie 会自动设置，就好像它们是由 WebBrowser 控件创建/发送的一样。但我的代码没有返回 JSON 数据，我得到空白响应，如字符串**分别**为空。

下面是代码：

```
Dim browser = New WebBrowser()
Dim brwhttp = GetType(WebRequestCreator).GetProperty("BrowserHttp")
Dim requestFactory = TryCast(brwhttp.GetValue(Browser, Nothing), IWebRequestCreate)
Dim uri = New Uri("http://api.quora.com/api/logged_in_user?fields=inbox,notifs,following,followers")
Dim req = requestFactory.Create(uri)
req.Method = "GET"
req.BeginGetResponse(New AsyncCallback(AddressOf request_Callback), req)

Private Sub request_Callback(asyncResult As IAsyncResult)
Dim webRequest As HttpWebRequest = DirectCast(asyncResult.AsyncState, HttpWebRequest)
Dim webResponse As HttpWebResponse = DirectCast(webRequest.EndGetResponse(asyncResult), HttpWebResponse)
Dim tempStream As New MemoryStream()
webResponse.GetResponseStream().CopyTo(tempStream)
Dim sr As New StreamReader(tempStream)
Dim resp As String = sr.ReadToEnd
End Sub 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T10:02:44.883

我发现 CopyTo 可以将 Stream 的指针留在缓冲区的末尾，您可能需要在尝试使用 StreamReader 读取它之前将 tempStream 的指针重置为开头，这是代码...

```
webResponse.GetResponseStream().CopyTo(tempStream);

tempStream.Seek(0, SeekOrigin.Begin);

Dim sr As New StreamReader(tempStream); 
```

# html - 如何在图块中浮动不同大小的元素

> ID：15320160
> 
> 赞同：10
> 
> 时间：2013-03-10T07:58:25.127
> 
> 标签：html, css, layout, css-float

问题很简单。我有一堆要制作瓷砖的元素。但是，其中一些具有更长的高度；让我们说是其他人的两倍。我希望它们都通过纯 CSS 样式匹配在一个 tile 中。

这是我所拥有的：

![在此处输入图像描述](../Images/faaa8013ca68092ce3f18929f3e0b342.png)

这就是我想要的：

![在此处输入图像描述](../Images/4a128cc79e9e3c539853d2ca4cea4929.png)

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
div {
    box-shadow: 0 0 1px black inset;
    width: 100px;
    display: inline-block;
}
#d1,
#d2,
#d4,
#d5,
#d6,
#d8,
#d9{
    height: 100px;
    background-color: yellow;
}
#d7,
#d3{
    height: 200px;
    background-color: red;
}
</style>
</head>
<body>
<div id="d1">1</div><div id="d2">2</div><div id="d3">3</div><div id="d4">4</div><div id="d5">5</div><div id="d6">6</div><div id="d7">7</div><div id="d8">8</div><div id="d9">9</div>
</body>
</html> 
```

您可以在 JSBin 上实时试用：http: [//jsbin.com/usovek/1/edit](http://jsbin.com/usovek/1/edit)

**笔记：**

*   内容是动态的
*   盒子的数量可以变化
*   任何盒子都可以更长。并且可能更广泛。
*   框的宽度或高度始终是多个单位。这个例子中的单位是 50，有些盒子是 50，有些是 100px 高。但是，如果问题能解决任意数量的单位（1、2、3 ......它们是 50px、100px、150px、......），那将是完美的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T08:01:43.787

如果您的内容是静态的，则可以在相对定位的容器内使用绝对位置块，但如果内容是动态的，则无法使用 CSS（仅）执行此操作，您需要使用的是

[**jQuery砌体**](http://masonry.desandro.com/)

或者你能做的最好的就是[**这个**](http://jsfiddle.net/PvdVF/)

CSS

```
#d7,
#d3{
    height: 200px;
    background-color: red;
    float: left;
} 
```

第三种可能性：将盒子包裹在容器中并相应地浮动

[**演示**](http://jsfiddle.net/m3b6k/1/)（仅当事情是静态的时候才有可能）:)

# go - TryRecv 返回通道关闭，尽管蜜蜂打开

> ID：15320167
> 
> 赞同：1
> 
> 时间：2013-03-10T07:59:00.507
> 
> 标签：go, channel

我正在尝试在 Go 中编写一个函数来监视通道并记录通过它发送的内容。

```
func monitorChannel(inChannel, outChannel reflect.Value, fid int64, cond *sync.Cond) {
    for {       
    cond.L.Lock()
    var toLog reflect.Value
    var ok bool
    for toLog, ok = inChannel.TryRecv() ; !toLog.IsValid(); { // while no value received
        if !ok {
            cond.L.Unlock()
            return
        }
        cond.Wait()
    }
    outChannel.Send(toLog)
    logMessage("a", "b", inChannel.Interface(), toLog.Interface(), fid)
    cond.L.Unlock()
} 
```

}

这个函数应该是从 inChannel 接收，记录发送的消息并通过 outChannel 发送。由于我希望能够记录双向通道，因此我为每个要记录的通道调用此函数两次，交换 inChannel 和 outChannel。锁是为了防止两个 goroutine 在彼此之间传递消息。“fid”只是日志文件的 id。

但是当我运行以下测试代码时，我遇到了死锁：

```
errsIn := make(chan int64)
errsOut := make(chan int64)
cond := sync.NewCond(&sync.Mutex{})
go monitorChannel(reflect.ValueOf(errsIn), reflect.ValueOf(errsOut), fid, cond)
go monitorChannel(reflect.ValueOf(errsOut), reflect.ValueOf(errsIn), fid,  cond)
errsIn <- 1
if <-errsOut != 1 {
    t.Fatal("lost value through channel send")
}
errsOut <- 1
if <-errsIn != 1 {
    t.Fatal("lost value through channel send")
} 
```

即使我没有关闭通道，TryRecv 的第二个返回值似乎也返回 false。为什么是这样？我该怎么办？

我在 Windows 8 64 位上运行 go 1.0.3。

**编辑**

后来我发现 TryRecv 的行为有些令人困惑，并设法使用反射包和两个 sync.Locker 制作了该函数的通用版本。我还是觉得jnml的解决方案比较优雅，但是如果有人遇到过TryRecv类似的问题，看一下函数中间的注释。

```
func passOnAndLog(in, out reflect.Value, l1, l2 sync.Locker) {
    for {
        l1.Lock()
        val, ok := in.TryRecv()
        for !val.IsValid() { // while nothing received
            l1.Unlock()
            time.Sleep(time.Nanosecond) // pausing current thread
            l1.Lock()
            val, ok = in.TryRecv()
        }
        // if val.IsValid() == true  and ok == false ,the channel is closed
        // if val.IsValid() == false and ok == false ,the channel is open but we received nothing
        // if val.IsValid() == true  and ok == true  ,we received an actual value from the open channel
        // if val.IsValid() == false and ok == true  ,we have no idea what happened  
        if !ok {
            return
        }
        l1.Unlock()
        l2.Lock() // don't want the other thread to receive while I am sending
        out.Send(val)
        LogValue(val) // logging

        l2.Unlock()
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:59:35.550

基于反射的解决方案太复杂了，我无法弄清楚，懒惰，如果它是正确的和或可行的。（我怀疑不是，而是凭直觉。）

我会以一种更简单但非通用的方式来处理这项任务。让我们有一个通道，一些生产者将使用它来写入它，并由一些消费者使用它来读取它。

```
c := make(chan T, N) 
```

可以使用一个小的辅助函数来监控这个通道，例如：

```
func monitored(c chan T) chan T {
        m := make(chan T, M)
        go func() {
                for v := range c {
                        m <- v
                        logMessage(v)
                }
                close(m)
        }()
        return m
} 
```

现在足以：

```
mc := monitored(c) 
```

和

*   传递`c`给生产者，但`mc`传递给消费者。
*   完成后关闭`c`以不泄漏 goroutine。

警告：上面的代码根本没有经过测试。

# xml - 流量控制选择路由器

> ID：15320168
> 
> 赞同：0
> 
> 时间：2013-03-10T07:59:11.553
> 
> 标签：xml, mule, router, flow, choice

在 mule 3.3.0 CE 中，我在配置 XML 文件中添加了这些行：

```
<flow name="muleService" doc:name="muleService">
<http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP"/>
<choice doc:name="Choice">
    <when expression="payload.get('type') == 'normal'" evaluator="groovy">
        <processor-chain>
            <component class="com.mule.routing.routingClass1" doc:name="Java"/>
        </processor-chain>
    </when>
    <when expression="payload.get('type') == 'priority'" evaluator="groovy">
        <processor-chain>
            <component class="com.mule.routing.routingClass2" doc:name="Java"/>
        </processor-chain>
    </when>
    <otherwise>
        <processor-chain>
            <component class="com.mule.routing.routingClass1" doc:name="DefaultQueue"/>
        </processor-chain>
    </otherwise>        
</choice> 
```

当我运行我的项目并输入此url：localhost:8081/priority 或 localhost:8081/normal 我有这个错误：

```
 javax.script.ScriptException: groovy.lang.MissingMethodException: No signature of method: java.lang.String.get() is applicable for argument types: (java.lang.String) values: [type]
Possible solutions: getAt(java.lang.String), grep(), next(), next(), getAt(groovy.lang.Range), getAt(groovy.lang.Range) (org.mule.api.MuleRuntimeException). Message payload is of type: String 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T15:28:21.187

问题出在你的表情上，试试下面这个：

```
expression="payload.equalsIgnoreCase('normal')" 
```

同样作为评估者，您目前正在使用 Groovy，但自 mule 3.3 以来，强烈建议使用[MEL 。](http://www.mulesoft.org/documentation/display/current/Mule+Expression+Language)

# bash - 是否可以在不终止程序的情况下从命令行使用文件输入启动程序？

> ID：15320169
> 
> 赞同：0
> 
> 时间：2013-03-10T07:59:11.997
> 
> 标签：bash, shell

我有一个用户可以使用命令行运行的程序。一旦运行，它就会接收并处理来自键盘的命令。可以使用来自磁盘的输入来启动程序，如下所示`$ ./program < startScript.sh`：但是，一旦脚本完成运行，程序就会退出。有没有一种方法可以使用磁盘输入启动程序`<`，它不会退出程序并允许读取额外的键盘输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:06:14.297

```
(cat foo.txt; cat) | ./program 
```

即，创建一个子shell（这就是括号的作用），它首先输出 foo.txt 的内容，然后复制用户键入的任何内容。然后，获取此子外壳的组合输出并将其通过管道传输到程序的标准输入中。

请注意，这也适用于其他组合。假设你想启动一个总是问同样问题的程序。最好的方法是使用“expect”并确保问题没有改变，但为了快速解决问题，您还可以执行以下操作：

```
(echo y; echo $file; echo n) | whatever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:01:16.707

在你的程序中使用 system("pause")(在 bash 中它只是 "pause")，这样它就不会立即退出。

有替代方案，例如

*   假读
*   无限循环
*   sigsuspend
*   还有很多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:04:13.053

这取决于如何`program`编码。这不能通过在 中编写代码来实现`startScript.sh`，如果这是您想要实现的。

你可以做的是`callingScript.sh`先写一个请求输入然后调用`program < startScript.sh`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T08:11:24.683

为什么不尝试这样的事情

```
BODY=`./startScript.sh`
if [ -n "$BODY" ]
    then cat "$BODY" |./program
fi 
```

# android - 片段中的 TextureView 从不调用 onSurfaceTextureAvailable

> ID：15320175
> 
> 赞同：1
> 
> 时间：2013-03-10T08:00:25.640
> 
> 标签：android, android-fragments

我已经看到很多在主 Activity 中使用 TextureView 的示例，但我正在尝试将其放入片段中。

我已经创建了最简单的示例，它的 onCreateView 被调用，onActivityCreated 也被调用，但是在传回 TextureView 后没有调用 onSurfaceTextureAvailable。

我错过了什么？

谢谢G

```
public class FullscreenActivity extends Activity {

      @Override
      protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_fullscreen);
    }
}

public class TextureViewFragment  extends Fragment
implements TextureView.SurfaceTextureListener {

    private TextureView         mTextureView;

     @Override
     public void onActivityCreated(Bundle savedInstanceState) {
          super.onActivityCreated(savedInstanceState);
     }

     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

          mTextureView = new TextureView(getActivity());
          mTextureView.setSurfaceTextureListener(this);
          mTextureView.setOpaque(false);    
         return mTextureView;
    }

    @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
    }

    @Override
    public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
         // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width,
        int height) {
         // TODO Auto-generated method stub
     }

    @Override
    public void onSurfaceTextureUpdated(SurfaceTexture surface) {
       // TODO Auto-generated method stub   
    }
}

activity_fullscreen.xml:

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             android:background="#0099cc"
             tools:context=".FullscreenActivity" >

     <fragment class="com.example.test.TextureViewFragment"
               android:id="@+id/graphTextureView"
               android:layout_width="0px" android:layout_height="match_parent" />
 </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-02T15:23:11.547

这是因为`TextureView`必须具有非零大小并且可见。根据评论，`layout_width`设置为`0px`。将其更改为非零值。

（老问题，但为后代发布答案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-12T08:45:42.847

您应该将“android:hardwareAccelerated=true”添加到您的 AndroidManifest.xml。

TextureView 需要硬件加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T18:29:53.250

您`TextureView`应该在布局 xml 文件中。而不是`new`用来实例化它，你应该使用这样的东西来获取它：

```
View view = inflater.inflate(R.layout.layout_video, container, false);
mTextureView = (TextureView) view.findViewById(R.id.video_texture_view); 
```

然后在您的**layout_video.xml**文件中，您需要一个`TextureView`id**为 video_texture_view**

# java - JFrame 组件的大小和位置

> ID：15320180
> 
> 赞同：1
> 
> 时间：2013-03-10T08:01:06.533
> 
> 标签：java, swing, jframe, gridbaglayout

我正在学习 `GridBagLayout`并做了非常简单的布局，有两个非常小的困惑
1-`Size of Buttons`我使用 `New.setPreferredSize(new Dimension(70,23));` 的是使所有按钮大小相同的标准方法吗

2-元件的摆放不好看

![在此处输入图像描述](../Images/1b683b470371ecc978b5653c6836e787.png)

现在看到还有更多`padding on all sides of components`，那么如何以正确的方式放置它`from top left corner` ，我应该减小大小`JFrame?` 还是同时使用 `frame.pack();`这两种工作但不知道什么是标准做法（我已经尝试过`pagestart`等），

这就是我的代码的样子

```
 frame= new JFrame("Hello ");
    frame.setSize(300, 150);
    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    frame.addWindowListener(this);  
    frame.setResizable(false);
    frame.setLocation(0, 0);
    p1= new JPanel (new GridBagLayout());

    gbc = new GridBagConstraints();

    lblname= new JLabel("Name");
    gbc.gridx=0; 
    gbc.gridy=0;  

    p1.add(lblname, gbc);

    textname = new JTextField(11);
    gbc.gridx=1; 
    gbc.gridy=0 ; 

    p1.add(textname, gbc);

    New=  new JButton("New"); 
    gbc.gridx=2; 
    gbc.gridy=0;
    New.setPreferredSize(new Dimension(70,23));
    p1.add(New, gbc);

    lblEmail = new JLabel("Email "); 
    gbc.gridx=0; 
    gbc.gridy=1;
    p1.add(lblEmail , gbc); 

    TextEmail = new JTextField(11);
    gbc.gridx=1; 
    gbc.gridy=1; 
    p1.add(TextEmail,gbc);

    Edit = new JButton("Edit") ;
    gbc.gridx= 2 ;
    gbc.gridy=1; 
    Edit.setPreferredSize(new Dimension(70,23));

    p1.add(Edit , gbc); 

    lblgender= new JLabel("Gender"); 
    gbc.gridx=0; 
    gbc.gridy=2; 
    p1.add(lblgender, gbc); 

    TextGender= new JTextField(11);
    gbc.gridx=1; 
    gbc.gridy=2; 
    p1.add(TextGender, gbc); 

    Gender= new JButton("Gender");
    gbc.gridx=2;
    gbc.gridy=2;
    Gender.setPreferredSize(new Dimension(70,23));

    p1.add(Gender, gbc);

    pre= new JButton("<<");
    gbc.gridx=0; 
    gbc.gridy=3; 
    p1.add(pre, gbc);

    count =  new JTextField(5);
    gbc.gridx=1; 
    gbc.gridy=3; 
    p1.add(count, gbc);

    next= new JButton(">>");
    gbc.gridx=2; 
    gbc.gridy=3; 
    next.setPreferredSize(new Dimension(70,23));

    p1.add(next, gbc);

    p1.setVisible(true);
    frame.add(p1);
    frame.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:29:46.517

`GridBagLayout`会让你发疯，它也是 JDK 中最灵活的布局管理器之一。

不要害怕使用复合布局。在下面的示例中，我将导航控件移到了自己的面板中，这使得定义复杂布局变得更加容易（您也可以通过这种方式混合布局管理器）

`GridBagConstraints#fill`允许您确定如何在单元格中填充组件。你有`GridBagConstraints.HORIZONTAL`,`GridBagConstraints.VERTICAL`和`GridBagConstraints.BOTH`... 我认为意义是不言自明的。

在下面的示例中，我曾经`GridBagConstraints.HORIZONTAL`允许按钮填充其单元格/列中的所有可用空间

![在此处输入图像描述](../Images/d8fdbc1735aeb82d589f4be276175b0a.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.LineBorder;

public class TestLayout20 {

    public static void main(String[] args) {
        new TestLayout20();
    }

    public TestLayout20() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.anchor = GridBagConstraints.WEST;
            JLabel lblname = new JLabel("Name");
            gbc.gridx = 0;
            gbc.gridy = 0;

            add(lblname, gbc);

            JTextField textname = new JTextField(11);
            gbc.gridx = 1;
            gbc.gridy = 0;

            add(textname, gbc);

            JLabel lblEmail = new JLabel("Email ");
            gbc.gridx = 0;
            gbc.gridy = 1;
            add(lblEmail, gbc);

            JTextField TextEmail = new JTextField(11);
            gbc.gridx = 1;
            gbc.gridy = 1;
            add(TextEmail, gbc);

            JLabel lblgender = new JLabel("Gender");
            gbc.gridx = 0;
            gbc.gridy = 2;
            add(lblgender, gbc);

            JTextField TextGender = new JTextField(11);
            gbc.gridx = 1;
            gbc.gridy = 2;
            add(TextGender, gbc);

            JButton New = new JButton("New");
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.insets = new Insets(0, 12, 0, 0);
            gbc.gridx = 2;
            gbc.gridy = 0;
            add(New, gbc);

            JButton edit = new JButton("Edit");
            gbc.gridx = 2;
            gbc.gridy = 1;

            add(edit, gbc);

            JButton Gender = new JButton("Gender");
            gbc.gridx = 2;
            gbc.gridy = 2;

            add(Gender, gbc);

            JPanel pnlNav = new JPanel(new GridBagLayout());
            gbc.insets = new Insets(12, 0, 0, 0);
            gbc.gridx = 0;
            gbc.gridy = 3;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(pnlNav, gbc);

            JTextField count = new JTextField(5);
            gbc = new GridBagConstraints();
            gbc.gridx = 1;
            gbc.gridy = 0;
            pnlNav.add(count, gbc);

            JButton pre = new JButton("<<");
            gbc.anchor = GridBagConstraints.WEST;
            gbc.weightx = 1;
            gbc.gridx = 0;
            gbc.gridy = 0;
            pnlNav.add(pre, gbc);

            JButton next = new JButton(">>");
            gbc.anchor = GridBagConstraints.EAST;
            gbc.gridx = 2;
            gbc.gridy = 0;
            pnlNav.add(next, gbc);

        }
    }
} 
```

我强烈建议您阅读[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)以获得更好的解释：P

# c# - 从代码隐藏中绑定 Gridview 内的文字控件。

> ID：15320184
> 
> 赞同：0
> 
> 时间：2013-03-10T08:01:24.830
> 
> 标签：c#, asp.net, gridview

我有一个包含模板字段的网格视图，其中每个模板字段都包含一个文本控件，我想将该网格视图与我的数据集绑定，请查看代码以查找更多信息。

创建数据集的代码-

```
DataTable Record = new DataTable();
Record.Columns.Add("zerker");
DataRow dr = Record.NewRow();
dr["zerker"] = "SomeText";   
Record.Rows.Add(dr);
gvCustomres.DataSource = Record;
gvCustomres.DataBind(); 
```

创建 GridView 的代码-

```
<asp:GridView ID="gvCustomres" runat="server" PageSize="4" AutoGenerateColumns="False" >
    <Columns>
       <asp:TemplateField  HeaderText="Zerker">
           <ItemTemplate>
             <asp:Literal ID="zerkername" runat="server"></asp:Literal>
           </ItemTemplate>
       </asp:TemplateField>
     </columns>
 </asp:GridView> 
```

请帮助我找到正确的方法来做到这一点。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:11:59.837

> 如果您只想将`Column`“zerker”绑定到您的`gridiview`.

您所缺少的只是`Text Property`您的`Literal`控制。

```
<asp:Literal ID="zerkername" runat="server" Text='<%# Eval("zerker") %>'>
</asp:Literal> 
```

# entity-framework - 我无法使用 SQL Server Express 和实体框架创建数据库文件

> ID：15320188
> 
> 赞同：0
> 
> 时间：2013-03-10T08:01:48.077
> 
> 标签：entity-framework, sql-server-express

我有以下代码：

```
public DataInitializer() {
            Database.SetInitializer<DataContext>(null);
            try {
                using (var context = new DataContext()) {
                    if (!context.Database.Exists())
                    {
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

            }
            catch (Exception ex) {
                throw new InvalidOperationException("The Data database could not be initialized", ex);
            }
        } 
```

和

```
 public class DataContext : DbContext
    {
        public DataContext() : base("xxdata") { }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
        public DbSet<Application> Applications { get; set; }
    } 
```

当我逐步执行代码时，代码会被执行，但似乎没有创建数据库文件（SQL Server Express）。

有什么明显的我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:07:24.000

创建一个继承类，如下所示；

```
public class DataContextInitializer : DropCreateDatabaseAlways<DataContext>
    {
        protected override void Seed(DataContext context)
        {
          //Seed data if you want
        }
    } 
```

并将其添加到您的`Global.asax`

```
protected void Application_Start()
{
    //Add your database initializer code 
    Database.SetInitializer(new DataContextInitializer());
} 
```

# ajax - 发生 ViewExpiredException 时未显示 JSF 错误页面

> ID：15320192
> 
> 赞同：1
> 
> 时间：2013-03-10T08:02:12.880
> 
> 标签：ajax, jsf-2, exception-handling, primefaces, omnifaces

当页面内的*视图*过期时，出现以下错误。消息说，`Error page '/home.xhtml' will be shown.`但实际上什么都没有显示，页面保持不变，只是被冻结了。我正在使用*Omnifaces*中的*FullAjaxExceptionHandler*，由[balusC](http://balusc.blogspot.co.at/2012/03/full-ajax-exception-handler.html)描述。

我正在使用 Primefaces 3.5 和 Mojarra 2.1.17。

```
Mär 11, 2013 1:40:30 PM org.apache.catalina.core.ApplicationContext log
SEVERE: FullAjaxExceptionHandlerx: An exception occurred during processing JSF ajax request. Error page '/home.xhtml' will be shown.
javax.faces.application.ViewExpiredException: viewId:/wishes_book.xhtml - View /wishes_book.xhtml could not be restored.
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Mär 11, 2013 1:40:30 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/home.xhtml]
java.lang.NullPointerException
    at org.primefaces.renderkit.CoreRenderer.getWidgetBuilder(CoreRenderer.java:481)
    at org.primefaces.component.menubar.MenubarRenderer.encodeScript(MenubarRenderer.java:36)
    at org.primefaces.component.menu.BaseMenuRenderer.encodeEnd(BaseMenuRenderer.java:40)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeRow(PanelGridRenderer.java:143)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeStaticBody(PanelGridRenderer.java:107)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeBody(PanelGridRenderer.java:63)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeEnd(PanelGridRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeRow(PanelGridRenderer.java:143)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeStaticBody(PanelGridRenderer.java:107)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeBody(PanelGridRenderer.java:63)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeEnd(PanelGridRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.context.PartialViewContextImpl.renderAll(PartialViewContextImpl.java:404)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:289)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:982)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:411)
    at com.meinanliegen.handlers.exceptions.FullAjaxExceptionHandler.renderErrorPageView(FullAjaxExceptionHandler.java:231)
    at com.meinanliegen.handlers.exceptions.FullAjaxExceptionHandler.handleAjaxException(FullAjaxExceptionHandler.java:200)
    at com.meinanliegen.handlers.exceptions.FullAjaxExceptionHandler.handle(FullAjaxExceptionHandler.java:145)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Mär 11, 2013 1:40:30 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/MeinAnliegen] threw exception 
```

你能帮我提出一个建议，我该如何解决他的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:26:54.863

这是由 PrimeFaces 3.5 引起的。他们添加了一个在渲染响应阶段`PhaseListener`创建并放置一个上下文属性。`WidgetBuilder`然而`FullAjaxExceptionHandler`，当尚未处于渲染响应阶段时，会强制在当前阶段直接渲染。这导致在`WidgetBuilder`PrimeFaces`null`组件和 NPE 的编码期间。此外，当当前阶段是渲染响应时，它仍然无法工作，因为`FullAjaxExceptionHandler`在渲染之前有点过于激进地清除整个上下文属性映射（唯一的原因是强制重新注入 JSF 资源依赖项，如 CSS/JS 文件） ，包括 PrimeFaces `WidgetBuilder`。

这被报告为[OmniFaces 问题 120](http://code.google.com/p/omnifaces/issues/detail?id=120)。已`FullAjaxExceptionHandler`改进以在当前未处于渲染响应阶段时将渲染委托给 JSF，并仅从上下文属性映射中删除特定属性。您需要将 OmniFaces 更新到至少 1.4（当前为 1.4.1）才能使其正常工作。

# android - 从安卓浏览器获取网址

> ID：15320195
> 
> 赞同：1
> 
> 时间：2013-03-10T08:03:15.920
> 
> 标签：android, android-browser

每当从 android 浏览器打开一个 url 时是否有可能获得回调。

getallvisitedurls() 方法只返回 url，我希望它是实时的并带有访问的时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:07:42.740

这是不可能的。每当用户在其中打开 URL 时，Android 浏览器都不会发出广播或类似的东西。此外，用户可能正在使用第三方浏览器而不是默认浏览器。

您可以做到这一点的唯一方法是制作自己的浏览器应用程序并让用户使用该应用程序而不是他们的 ROM 附带的默认浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:08:54.000

我相信可以通过使用`retrieveRequestToken`.

Twitter API 返回 OAuth 的回调，所以我认为这是可能的。

看看[这个帖子](http://www.helloandroid.com/tutorials/communicating-between-activity-and-browser-callback)。它解释了它是如何完成的，这对我来说听起来很好。

**注意：**我自己没有尝试过。所以没有保证。:)

# c++ - 有什么方法可以避免在存储（子）指针时声明虚拟方法？

> ID：15320196
> 
> 赞同：2
> 
> 时间：2013-03-10T08:03:25.357
> 
> 标签：c++, pointers, virtual

我最近遇到了一个烦人的问题，我对自己的解决方法不满意：我有一个程序维护一个指向基类的指针向量，并且我在那里存储了所有类型的子对象指针。现在，每个子类都有自己的方法，主程序可能会或不会调用这些方法，具体取决于对象的类型（请注意，尽管它们都大量使用基类的通用方法，因此这证明了继承的合理性）。

我发现有一个“对象标识符”来检查类类型（然后调用或不调用方法）很有用，这已经不是很漂亮了，但这不是主要的不便之处。主要的不便之处在于，如果我想真正能够使用基类指针调用派生类方法（或者甚至只是将指针存储在指针数组中），那么需要在基类中将派生方法声明为虚拟班级。

从 C++ 编码的角度来看是有意义的.. 但这对我来说是不切实际的（从*开发*的角度来看），因为我计划在不同的文件中创建许多不同的子类，可能是由不同的人创建的，而我不想每次都调整/维护基类，添加虚拟方法！

这该怎么做？本质上，我要问的（我猜）是如何实现类似 Objective-C NSArrays 的东西——如果你向一个没有实现该方法的对象发送消息，那么什么都不会发生。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:37:22.673

您可以执行您在 C++ 中描述的操作，但不能使用函数。顺便说一句，这有点可怕，但我想在某些情况下它*可能*是一种合法的方法。

这样做的第一种方法：

在基类上定义一个带有类似签名的函数`boost::variant parseMessage(std::string, std::vector<boost::variant>);`，也许还有一串具有通用签名的便利函数，并在基类上包含一个带有仿函数的消息查找表。在每个类构造函数中，将其消息添加到消息表中，然后 parseMessage 函数将每条消息打包到类上的正确函数中。

它又丑又慢，但它应该可以工作。

第二种方法：

在层次结构中进一步定义虚函数，因此如果要添加`int foo(bar*);`，首先添加一个将其定义为虚拟的类，然后确保每个想要定义的类`int foo(bar*);`都继承自它。然后`dynamic_cast`，您可以在尝试调用`int foo(bar*);`. 这些接口添加类可能是纯虚拟的，因此可以使用多重继承将它们混合到各个点，但这可能有其自身的问题。

这不如第一种方式灵活，并且需要实现函数的类相互链接。哦，它仍然很丑。

但大多数情况下，我建议您尝试编写 C++ 代码，例如 C++ 代码而不是 Objective-C 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:49:20.530

这可以通过添加某种内省功能和元对象系统来解决。本演讲[元数据和 C++ 中的反射 — Jeff Tucker](http://nwcpp.org/january-2013.html)演示了如何使用 C++ 的模板元编程来做到这一点。

如果您不想自己实现一个，那么使用现有的会更容易，例如`Qt`'[元对象系统](http://qt-project.org/doc/qt-4.8/metaobjects.html)。请注意，由于元对象编译器的限制，此解决方案不适用于多重继承：[QObject Multiple Inheritance](https://stackoverflow.com/questions/8578657/qobject-multiple-inheritance)。

安装后，您可以查询方法的存在并调用它们。手动执行此操作非常繁琐，因此调用此类方法的最简单方法是使用[信号和槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html#signals-and-slots)机制。

还有非常相似的[GObject](https://developer.gnome.org/gobject/stable/)，还有其他的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T11:33:48.393

而不是这个：

```
// variant A: declare everything in the base class
void DoStuff_A(Base* b) {
  if (b->TypeId() == DERIVED_1) 
      b->DoDerived1Stuff();
  else if if (b->TypeId() == DERIVED_2) 
      b->DoDerived12Stuff();
} 
```

或这个：

```
// variant B: declare nothing in the base class
void DoStuff_B(Base* b) {
  if (b->TypeId() == DERIVED_1) 
      (dynamic_cast<Derived1*>(b))->DoDerived1Stuff();
  else if if (b->TypeId() == DERIVED_2) 
      (dynamic_cast<Derived2*>(b))->DoDerived12Stuff();
} 
```

做这个：

```
// variant C: declare the right thing in the base class
b->DoStuff(); 
```

请注意，每个必须完成的东西在基础中都有一个虚拟功能。

如果您发现自己更喜欢变体 A 或 B 而不是变体 C，请停下来重新考虑您的设计。您将组件耦合得太紧，最终会适得其反。

> 我计划在不同的文件中创建许多不同的子类，可能是由不同的人制作的，我不想每次都调整/维护基类来添加虚拟方法！

`DoStuff`每次添加派生类时都可以调整，但调整`Base`是不行的。我可以问为什么吗？

如果您的设计不适合 A、B 或 C 模式，请展示您所拥有的，因为如今千里眼是罕见的壮举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:43:36.547

如果您是`planning to create many different children classes in different files, perhaps made by different people`，而且我猜您不想更改每个子类的主代码。然后我认为你需要在你的基类中做的是定义几个（不是很多）虚拟函数（具有空实现）但是这些函数应该用于在逻辑中标记它们被称为“AfterInsart”的时间或“BeforeSorting”等。
通常在逻辑中你希望派生类执行自己的逻辑的地方并不多。

# windows-phone-8 - WP8 - WebBrowser 类：如何处理文件下载？

> ID：15320199
> 
> 赞同：2
> 
> 时间：2013-03-10T08:03:56.517
> 
> 标签：windows-phone-8, download, webbrowser-control

我在 WP8 中创建了一个简单的应用程序来使用 Microsoft.Phone.Controls.WebBrowser 类显示网页。我能够加载页面、导航链接、在历史记录中前后移动。除了这个基本功能之外，我还想提供下载无法在浏览器中显示的文件的方法，比如 .ppt 或 .mp3。

我无法在 WebBrowser 类文档中找到任何内容来启动下载。只有一个 Navigate 函数需要一个 URL 来加载。

那么可以使用 WebBrowser 类进行下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:24:03.753

您必须拦截导航事件并自行处理。

以下代码示例应为您指明正确的方向。（你会想要完善它，我只是把它放在一起以表明它可以与我搜索测试 mp3 文件时出现在 Google 上的随机 mp3 网站一起使用）

```
using Microsoft.Phone.Controls;
using System;
using System.IO;
using System.IO.IsolatedStorage;
using System.Net;
using System.Threading.Tasks;
using System.Windows;

namespace PhoneApp2
{
    public partial class MainPage
    {
        public MainPage()
        {
            InitializeComponent();
            MyWebBrowser.Navigate(new Uri("http://robtowns.com/music/"));
        }

        private async void MyWebBrowser_OnNavigating(object sender, NavigatingEventArgs e)
        {
            if (!e.Uri.AbsolutePath.EndsWith(".mp3")) return; //Find a more reliable way to detect mp3 files

            e.Cancel = true; // Cancel the browser control navigation, and take over from here

            MessageBox.Show("Now downloading an mp3 file");
            var fileWebStream = await GetStream(e.Uri);

            using(var isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                var filePath = "downloadedfile.mp3";
                var localFile = isolatedStorage.CreateFile(filePath);
                await fileWebStream.CopyToAsync(localFile.AsOutputStream().AsStreamForWrite());
                fileWebStream.Close();
                MessageBox.Show("File saved as 'downloadedfile.mp3'");
            }
        }

        public static Task<Stream> GetStream(Uri url)
        {
            var tcs = new TaskCompletionSource<Stream>();
            var wc = new WebClient();
            wc.OpenReadCompleted += (s, e) =>
            {
                if (e.Error != null) tcs.TrySetException(e.Error);
                else if (e.Cancelled) tcs.TrySetCanceled();
                else tcs.TrySetResult(e.Result);
            };
            wc.OpenReadAsync(url);
            return tcs.Task;
        }
    }
} 
```

# mysql - 无法开始使用 clojure kORMa

> ID：15320201
> 
> 赞同：2
> 
> 时间：2013-03-10T08:04:10.390
> 
> 标签：mysql, clojure, compojure, korma

我正在尝试将 clojure kORMa 与 compojure 一起使用，webapp 在这里[nepleaks](https://github.com/iPrayag/nepleaks/blob/master/src/hotel/conf/datasource.clj)。

首先我添加了 kORMa 依赖项

```
[korma "0.3.0-RC4"] 
```

`lein deps`工作很酷，然后创建`src/hotel/conf/datasource.clj`如下：

```
(ns hotel.conf.datasource)
   (use [korma.db])
   (use [korma.core])
)

(defdb db (mysql {:db "nepleaks"
                     :user "root"
                     :password "mysql55"}))

(defentity users) 
```

`lein ring server`既不抛出任何异常也不创建数据库实体。

**我错过了什么吗？**我需要更多配置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T08:49:12.933

我的理解是 Korma 不会为您创建数据库或数据库表，因此您需要事先手动创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T21:34:00.193

本着一个值得 1000 字的例子的精神，我建议查看 luminus clojure Web 框架。见[http://www.luminusweb.net/](http://www.luminusweb.net/)这个框架设置了很多非常有用的库，包括非常基本的示例使用，包括 korma、ragtime、ring、compojure 和其他一些不错的库。默认模板向您展示了许多使用这些库的好方法以及如何集成它们。然后你可以选择你想要的位。您需要做的就是开始运行

```
lein new luminus <your project> +mysql 
```

该网站具有良好的文档，代码非常干净且易于理解。在想要启动和运行您仍在接受的新库时节省数小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T09:07:08.477

你需要[lein ragtime 插件](https://github.com/weavejester/ragtime)来管理数据库。

# html - 当我没有告诉它时，表格中的粗体文本

> ID：15320204
> 
> 赞同：0
> 
> 时间：2013-03-10T08:04:49.647
> 
> 标签：html, css

我有这个非常奇怪的问题。当我在我的服务器上运行这个页面时，当我没有在任何地方告诉它是粗体时，表格的文本就会变成粗体。顶部显示注销和返回的按钮没有粗体，但整个表格都是粗体。现在真的很烦我！请帮忙！

```
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>RHS Year 13 - Administration</title>

<link href="style_ric.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="header"> <img src="header.jpg" width="260px" height="50"/>
</div>
<h1>Administration Panel
</h1>
<p class="form"><a href="users.php?logout=yes">Logout</a> - <a href="view.php">Back</a></p>
<h1>
  <hr />

<?php

include_once 'database_login.php'; 

if (isset($_GET["page"])) { $page  = $_GET["page"]; } else { $page=1; }; 
$start_from = ($page-1) * 20; 
$sql = "SELECT * FROM login ORDER BY last_name ASC LIMIT $start_from, 20"; 
$rs_result = mysqli_query ($con, $sql); 

echo '</p>';
echo '<table border="0" class="form">';
echo '<tr><td>Student ID</td><td>Last Name</td><td>First Name</td><td>Form Class</td></tr>';

while ($row = mysqli_fetch_assoc($rs_result)) { 

            echo '<tr>';
            echo '<td>' . $row["student_id"] . '</td>';
            echo '<td>' . $row["last_name"] . '</td>';
            echo '<td>' . $row["first_name"] . '</td>';
            echo '<td>' . $row["form_class"] . '</td>';
            echo '</tr>';
}; 
echo '</table>';

$sql = "SELECT COUNT(last_name) FROM login"; 
$rs_result = mysqli_query($con, $sql); 
$row = mysqli_fetch_row($rs_result); 
$total_records = $row[0]; 
$total_pages = ceil($total_records / 20); 

  echo '<p class="form">';
for ($i=1; $i<=$total_pages; $i++) { 
              echo '<a href="users.php?page=' . $i . '">' . $i . '</a>'; 
}; 

echo '</p>';
?>

</body>
</html> 
```

样式表：

```
@charset "UTF-8";
/* CSS Document */

p {
    font-size:12px;
    color:#000;
    padding:0;
    font-family: Arial, Helvetica, sans-serif;
}

h2 {
    font-size:12px;
    color:#000;
    padding:0;
    font-family: Arial, Helvetica, sans-serif;
    font-weight:bold;
}

h1 {
    font-weight:bold;
    font-size:16px;
    font-family: Arial, Helvetica, sans-serif;
}

.form {
    font-size:12px;
    color:#000;
    padding:0;
    font-family: Arial, Helvetica, sans-serif;

}

.nopadding {
    padding: 0px;
    margin-bottom: 0px;
}

.italics_note {
    font-size:12px;
    color:#000;
    padding:0;
    font-family: Arial, Helvetica, sans-serif;
    font-style:italic;
}

.error {
    font-size:12px;
    color:#ffffff;
    background-color:#F00;
    padding:0;
    font-family: Arial, Helvetica, sans-serif;
}

.done {
    font-size:12px;
    color:#ffffff;
    background-color:#060;
    padding:0;
    font-family: Arial, Helvetica, sans-serif;
}

#header {
    width:auto;
    height:50px;
    background-color:#020154;
    color: #000000;
}

#error {
    width:200px;
    height:14px;
    padding:1px;
    background-color:#F00;
    color: #000000;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T08:09:33.310

您打开了一个`<h1>`未关闭的标签。由于您的`logout`按钮位于`<h1>`标签之前，因此它看起来很正常。并且您的粗体属性`<h1>`将应用于所有其他元素。

# javascript - 使用 .click 时图像元素消失

> ID：15320207
> 
> 赞同：0
> 
> 时间：2013-03-10T08:05:06.063
> 
> 标签：javascript, html, css

在过去的几个小时里，我一直在努力解决这个问题，但是如果没有最后一个 jquery 函数，我将无法继续，当我点击它时，我试图让卡片（国王是一张测试卡片）跟随我的鼠标. 当我点击它就消失了。

html:

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Well, I've Never!!</title>
    <link type="text/css" rel="stylesheet" href="ivenever.css" />

  </head>

  <body>
      <aside>
          <input type="button" id="newgame" value="New Game" onclick="newGame()"/>
      </aside>

    <div id="table">

      <!--Containers for the computer's hand-->
      <div id="computer">
        <div id= "computerTableDown"></div>
        <div id= "computerTableUp"></div>
        <div id= "computerHand"></div>
      </div><!--computer container end-->

      <!--Container for the cards in the middle-->
      <div id="middle">
        <div id="undealtCards"></div>
        <div id="middleCards"></div>
      </div><!--middle container end-->

      <!--Containers for the Player's hand-->
      <div id="player">
        <div id= "playerTableDown"></div>
        <div id = "playerTableUp"></div>
        <div id= "playerHand"></div>
      </div><!--player container end-->

    </div><!--Table end-->

    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="carddeck.js"></script>
  </body>
</html> 
```

JS/JQUERY：

```
// the array that holds the cards
var deck;
//the deck of cards object
var newDeck;

//the players hand
var playerHand;
var playerUp;
var playerDown;
//the computer's hand
var compHand;
var compUp;
var compDown;

//the cards in the middle
var middleCards;

//Players turn
var playersTurn = true;

function Card (rank, suit, url)
{
    this.rank= rank;
    this.suit = suit;
    this.url = url;
}
//the function that will return the rank of the card
Card.prototype.getRank = function ()
{
    return this.rank;
}
//the function that returns the suit (not really needed for my game)
Card.prototype.getSuit = function ()
{
    return this.suit;
}
//the function for returning the url of the card for displaying
Card.prototype.getUrl = function ()
{
    return this.url;
}

function CardDeck ()
{
    deck = [];
    //fill array diamonds
    for (var i=0; i < 13; i++)
    {
        var cardD = new Card(i+1, "diamonds", ( "images/diamonds/" + (i+1)+"diamond.png"));
        deck.push(cardD);
    }

    //fill array clubs
    for (var i=0; i < 13; i++)
    {
        var cardC = new Card(i+1, "clubs", ("images/clubs/" + (i+1)+"club.png"));
        deck.push(cardC);
    }

    //fill array hearts
    for (var i=0; i < 13; i++)
    {
        var cardH = new Card(i+1, "hearts", ("images/hearts/" + (i+1)+"heart.png"));
        deck.push(cardH);
    }

    //fill array spades
    for (var i=0; i < 13; i++)
    {
        var cardS = new Card(i+1, "spades", ("images/spades/" + (i+1)+"spade.png"));
        deck.push(cardS);
    }
}

//displaying the deck (mostly for debugging etc)
CardDeck.prototype.showDeck = function ()
{
    var allCards ="";
    for (var i =0 ; i < deck.length; i++)
        allCards += "card with the rank " + deck[i].getRank() +" of " + deck[i].getSuit() + " has an image url of " + deck[i].getUrl()+"\n";
    alert(allCards);
}

//shuffle the cards
CardDeck.prototype.shuffle = function ()
{
    var shuffledDeck = deck;
    for (var i =0; i< 10; i++)
    {
        for (var i = 0; i < shuffledDeck.length; i++)
        {
            var random = Math.floor((Math.random()*51));
            var tmp = shuffledDeck[i];
            var tmp2 = shuffledDeck[random];
            shuffledDeck[i]= tmp2;
            shuffledDeck[random]= tmp;
        }

    }
    deck=shuffledDeck;
}

//deal a card as long as there at least one left in the deck
CardDeck.prototype.dealCard = function ()
{
    if (deck.length >0)
    {
        var dealtCard = deck[0];
        deck.shift();
        return dealtCard;
    }
    else
    {
        //jquery to get rid of the image element
        $('#undealtCards').replaceWith('<img src="images/cardempty.png" class="noHand" height="100" width="69"/>');
    }
}

//create the deck that will be used
function makeDeck()
{
    iveNever = new CardDeck();
}

function newGame()
{
    //reset everything
    //$('#computerTableDown').replaceWith('');
    //initialize deck
    makeDeck();
    iveNever.shuffle();
    $('#undealtCards').append('<img src="images/cardback.png" class="hand" height="100" width="69" onclick="drawCard()"/>');

    //initialize player's hand
    playerHand = [];
    playerUp=[];
    playerDown=[];

    //initialize computer's hand
    compHand = [];
    compUp=[];
    compDown=[];

    initialDeal();
    showHands();
}

function initialDeal()
{
    for (var i =0; i<6; i++)
    {
        if (i % 2 === 0)
            compDown.push(iveNever.dealCard());
        else
            playerDown.push(iveNever.dealCard());
    }

    for (var i =0; i<6; i++)
    {
        if (i % 2 === 0)
            compUp.push(iveNever.dealCard());
        else
            playerUp.push(iveNever.dealCard());
    }

    for (var i =0; i<6; i++)
    {
        if (i % 2 === 0)
            compHand.push(iveNever.dealCard());
        else
            playerHand.push(iveNever.dealCard());
    }
}
//function for showing hands (currently for debugging)
function showHands()
{

    //show the down cards
    for (var i=0; i < 3; i++)
    {
        //computers down cards
        $('#computerTableDown').append('<img src="images/cardback.png" class="cardsTable" height="100" width="69">');
        $('#playerTableDown').append('<img src="images/cardback.png" class="cardsTable" height="100" width="69">');
    }

    //show the down cards
    for (var i=0; i < 3; i++)
    {
        //computers up cards
        $('#computerTableUp').append('<img src="' + compUp[i].getUrl() + '" class="cardsTable" height="100" width="69">');
        $('#playerTableUp').append('<img src="' + playerUp[i].getUrl() + '" class="cardsTable" height="100" width="69">');
    }

    //show the Hand cards
    for (var i=0; i < 3 ; i++)
    {
        $('#playerHand').append('<img src="' + playerHand[i].getUrl() + '" class="cardsHand" height="100" width="69" onclick="pickupCard()"> ');
        $('#computerHand').append('<img src="' + compHand[i].getUrl() + '" class="cardsHand" height="100" width="69"> ');
    }

}

function drawCard()
{
    //only for player at this moment
    if (playersTurn)
    {
        playerHand.push(iveNever.dealCard());
        updatePlayerHand();
    }
    else
    {
        //compHand.push(iveNever.dealCard());
        //updateComputerHand();
    }
}

function updatePlayerHand()
{
    //show the player's Hand cards
    for (var i=playerHand.length-1; i < playerHand.length ; i++)
    {
        $('#playerHand').append('<img src="' + playerHand[i].getUrl() + '" class="cardsHand" height="100" width="69" onclick="pickupCard()">');//onclick="pickupCard()"
    }
}

function updateComputerHand()
{
    //show the Hand cards
    for (var i=compHand.length-1; i < compHand.length ; i++)
    {
        $('#computerHand').append('<img src="' + compHand[i].getUrl() + '" class="cardsHand" height="100" width="69">');
    }

}

$('#playerHand').click(function(e){
    $('img.heh').css
    ({
        'top': (e.clientY - 20), 
        'left': (e.clientX - 20)
    });
}); 
```

CSS：

```
body{

}
#table{
    width:1000px;
    height:800px;
    background-image: url('images/felt.png');
    position:absolute;
    z-index: 0;

}

#computer{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:0px;
    width:900px;
    height: 300px;
    margin-left: auto;
    margin-right: auto;
}

#computerTableDown{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:150px;
    width:300px;
    height: 125px;
    margin-left: auto;
    margin-right: auto;
}

#computerTableUp{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:150px;
    width:300px;
    height: 125px;
    margin-left: auto;
    margin-right: auto;
}

#computerHand{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:5px;
    width:900px;
    height: 125px;
    margin-left: auto;
    margin-right: auto;
    border-style: dashed;
    border-width: 2px;
    border-color: black;
}

#middle{
    position:absolute;
    left:0;
    right:0;
    margin-left:auto;
    margin-right:auto;
    top:300px;
    width:500px;
    height:200px;
}

#middleCards{
    position:absolute;
    left:0;
    right:0;
    margin-left:auto;
    margin-right:auto;
    top:0px;
    width:300px;
    height:200px;
    border-style: dotted;
    border-width: 2px;
    border-color: black;
    cursor: default;
}

#undealtCards{
    postion:absolute;
    left:0;
    right:0;
    top:0;
    margin-left: 10px;
    margin-top: 50px;
    top:10px;
    width:70px;
    height:100px;

}

.hand{
    cursor: hand; 
    cursor: pointer;
}

.noHand{
        cursor: default; 
}

#player{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:500px;
    width:900px;
    height: 300px;
    margin-left: auto;
    margin-right: auto;
}

#playerTableDown{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:15px;
    width:300px;
    height: 125px;
    margin-left: auto;
    margin-right: auto;
}

#playerTableUp{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:15px;
    width:300px;
    height: 125px;
    margin-left: auto;
    margin-right: auto;
}

#playerHand{
    position:absolute;
    left:0;
    right:0;
    margin-left: auto;
    margin-right: auto;
    top:160px;
    width:900px;
    height: 125px;
    margin-left: auto;
    margin-right: auto;
    border-style: dashed;
    border-width: 2px;
    border-color: white;
}

.cardsTable {
    margin-top:10px;
    margin-left:24px;
}

.cardsHand{
    margin-top:10px;
    margin-left:24px;
    cursor: hand; 
    cursor: pointer;
}

.heh{
    display:block;
    position:absolute;
    z-index: 2000;
} 
```

现在，我试图让图像跟随我的鼠标，但是当我点击它时它就消失了。它不会引发任何控制台错误，它只是消失了。我被要求发布整个代码，所以我已经完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:33:00.477

也为我工作。你需要分享你的整个代码或提供一个不起作用的小提琴

[http://jsfiddle.net/SVKeE/](http://jsfiddle.net/SVKeE/)

```
$(function() {
$('#playerHand').click(function(e){
    //$(this).removeClass('cardsHand');
    //$(this).addClass('clickedCard');
    $('img.heh').css
    ({
        'top': (e.clientY - 20), 
        'left': (e.clientX - 20)
    });
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:11:53.230

我尝试了您帖子中的代码。但除了卡片生成之外，它似乎并没有做太多事情。我认为您需要查看[http://jqueryui.com/draggable](http://jqueryui.com/draggable)

如果您可以拖动纸牌，您的纸牌游戏会更有用。

# database - 如何使用自己的位置数据库在 Web 应用程序中进行基于位置的搜索

> ID：15320210
> 
> 赞同：4
> 
> 时间：2013-03-10T08:05:39.447
> 
> 标签：database, google-places-api

我想在我的网站上实现基于位置的搜索（即位置 + 半径）。这些位置将添加到我的数据库中。我以为我会使用 Google Places API，但我找不到如何使它与自己的位置数据库一起使用。有可能吗？我会很感激一个例子或一些教程的链接。如果没有，还有其他解决方案可以解决问题吗？请记住，我无法在服务器上安装任何东西，因此无法向 DB 添加一些地理扩展。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:39:32.263

您可以使用 Google[**地理编码**](https://developers.google.com/maps/documentation/geocoding/)服务来查找您所在位置的坐标。然后，您可以使用这些坐标在数据库中查找位置。如果您的服务器上有 PHP/MySQL，则下面的代码使用使用[**PDO的**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)[**Haversine 公式**](http://rosettacode.org/wiki/Haversine_formula)。[](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

 **```
$stmt = $dbh->prepare("SELECT  name, lat, lng, (6372 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM mytable HAVING distance < 1 ORDER BY distance ASC LIMIT 0 , 20");
    // Assign parameters
    $stmt->bindParam(1,$center_lat);//Coordinates of location
    $stmt->bindParam(2,$center_lng);//Coordinates of location
    $stmt->bindParam(3,$center_lat); 
```

如果使用公里数，则为 6372，英里数为 3959

在这个[**DEMO中使用了这个查询**](http://daviestrachan.co.uk/maps/stationmap8a.php)**

# php - 尝试检索项目 PHP Asana 类时出错

> ID：15320214
> 
> 赞同：0
> 
> 时间：2013-03-10T08:06:19.960
> 
> 标签：php, api, error-code, asana

我正在使用[此类](https://github.com/ajimix/asana-api-php-class)来获取项目及其任务。我成功地得到了这个项目。但是当试图获得任务时，它会返回。

```
Error while trying to connect to Asana, response code: 400 
```

下面是代码，它完全来自示例。当 asana 在另一个示例中返回它时我得到的项目代码，我可以在其中获取项目列表。

```
<?php
require_once("../asana.php");

// See class comments and Asana API for full info

$asana = new Asana("xxxxxxxxxxxxxxxxx"); 

// Your API Key, you can get it in Asana
$projectId = 'xxxxxxxxxxxxx'; // Your Project ID Key, you can get it in Asana

$result = $asana->getProjectTasks($projectId);

// As Asana API documentation says, when response is successful, 
we receive a 200 in response so...

if($asana->responseCode == "200" && !is_null($result)){
    $resultJson = json_decode($result);

    var_dump($resultJson);

} else {
    echo "Error while trying to connect to Asana, response code: {$asana->responseCode}";
} 
```

这是类中的代码。

```
<?php
/**
*
* A PHP class that acts as wrapper for Asana API. Lets make things easy! :)
*
* Read Asana API documentation for fully use this class http://developer.asana.com/documentation/
*
* Copyright 2012 Ajimix
* Licensed under the Apache License 2.0
*
* Author: Ajimix [github.com/ajimix]
* Version: 1.0
*
*/
class Asana {

    private $timeout = 10;
    private $debug = false;
    private $advDebug = false; // Note that enabling advanced debug will include debugging information in the response possibly breaking up your code
    private $asanaApiVersion = "1.0";

    public $responseCode;

    private $endPointUrl;
    private $apiKey;
    private $taskUrl;
    private $userUrl;
    private $projectsUrl;
    private $workspaceUrl;
    private $storiesUrl;
    private $tagsUrl;

    public function __construct($apiKey){
        if(substr($apiKey, -1) != ":") $apiKey .= ":"; // If the API key is not ended by ":", we append it
        $this->apiKey = $apiKey;

        $this->endPointUrl = "https://app.asana.com/api/{$this->asanaApiVersion}/";
        $this->taskUrl = $this->endPointUrl."tasks";
        $this->userUrl = $this->endPointUrl."users";
        $this->projectsUrl = $this->endPointUrl."projects";
        $this->workspaceUrl = $this->endPointUrl."workspaces";
        $this->storiesUrl = $this->endPointUrl."stories";
        $this->tagsUrl = $this->endPointUrl."tags";

        define("METHOD_POST", 1);
        define("METHOD_PUT", 2);
        define("METHOD_GET", 3);
    }

    /**
     * **********************************
     * User functions
     * **********************************
     */

    /**
     * Returns the full user record for a single user.
     * Call it without parameters to get the users info of the owner of the API key.
     *
     * @param string $userId
     * @return string JSON or null
     */
    public function getUserInfo($userId = null){
        if(is_null($userId)) $userId = "me";
        return $this->askAsana($this->userUrl."/{$userId}");
    }

    /**
     * Returns the user records for all users in all workspaces you have access.
     *
     * @return string JSON or null
     */
    public function getUsers(){
        return $this->askAsana($this->userUrl);
    }

    /**
     * **********************************
     * Task functions
     * **********************************
     */

    /**
     * Function to create a task.
     * For assign or remove the task to a project, use the addProjectToTask and removeProjectToTask.
     *
     *
     * @param array $data Array of data for the task following the Asana API documentation.
     * Example:
     *
     * array(
     *     "workspace" => "1768",
     *     "name" => "Hello World!",
     *     "notes" => "This is a task for testing the Asana API :)",
     *     "assignee" => "176822166183",
     *     "followers" => array(
     *         "37136",
     *         "59083"
     *     )
     * )
     *
     * @return string JSON or null
     */
    public function createTask($data){
        $data = array("data" => $data);
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl, $data, METHOD_POST);
    }

    /**
     * Returns task information
     *
     * @param string $taskId
     * @return string JSON or null
     */
    public function getTask($taskId){
        return $this->askAsana($this->taskUrl."/{$taskId}");
    }

    /**
     * Updates a task
     *
     * @param string $taskId
     * @param array $data See, createTask function comments for proper parameter info.
     * @return string JSON or null
     */
    public function updateTask($taskId, $data){
        $data = array("data" => $data);
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl."/{$taskId}", $data, METHOD_PUT);
    }

    /**
     * Returns the projects associated to the task.
     *
     * @param string $taskId
     * @return string JSON or null
     */
    public function getProjectsForTask($taskId){
        return $this->askAsana($this->taskUrl."/{$taskId}/projects");
    }

    /**
     * Adds a project to task. If successful, will return success and an empty data block.
     *
     * @param string $taskId
     * @param string $projectId
     * @return string JSON or null
     */
    public function addProjectToTask($taskId, $projectId){
        $data = array("data" => array("project" => $projectId));
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl."/{$taskId}/addProject", $data, METHOD_POST);
    }

    /**
     * Removes project from task. If successful, will return success and an empty data block.
     *
     * @param string $taskId
     * @param string $projectId
     * @return string JSON or null
     */
    public function removeProjectToTask($taskId, $projectId){
        $data = array("data" => array("project" => $projectId));
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl."/{$taskId}/removeProject", $data, METHOD_POST);
    }

    /**
     * Returns task by a given filter.
     * For now (limited by Asana API), you may limit your query either to a specific project or to an assignee and workspace
     *
     * NOTE: As Asana API says, if you filter by assignee, you MUST specify a workspaceId and viceversa.
     *
     * @param array $filter The filter with optional values.
     *
     * array(
     *     "assignee" => "",
     *     "project" => 0,
     *     "workspace" => 0
     * )
     *
     * @return string JSON or null
     */
    public function getTasksByFilter($filter = array("assignee" => "", "project" => "", "workspace" => "")){
        $url = "";
        $filter = array_merge(array("assignee" => "", "project" => "", "workspace" => ""), $filter);
        $url .= $filter["assignee"] != ""?"&assignee={$filter["assignee"]}":"";
        $url .= $filter["project"] != ""?"&project={$filter["project"]}":"";
        $url .= $filter["workspace"] != ""?"&workspace={$filter["workspace"]}":"";
        if(strlen($url) > 0) $url = "?".substr($url, 1);

        return $this->askAsana($this->taskUrl.$url);
    }

    /**
     * Returns the list of stories associated with the object.
     * As usual with queries, stories are returned in compact form.
     * However, the compact form for stories contains more information by default than just the ID.
     * There is presently no way to get a filtered set of stories.
     *
     * @param string $taskId
     * @return string JSON or null
     */
    public function getTaskStories($taskId){
        return $this->askAsana($this->taskUrl."/{$taskId}/stories");
    }

    /**
     * Adds a comment to a task.
     * The comment will be authored by the authorized user, and timestamped when the server receives the request.
     *
     * @param string $taskId
     * @param string $text
     * @return string JSON or null
     */
    public function commentOnTask($taskId, $text = ""){
        $data = array(
            "data" => array(
                "text" => $text
            )
        );
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl."/{$taskId}/stories", $data, METHOD_POST);
    }

    /**
     * Adds a tag to a task. If successful, will return success and an empty data block.
     *
     * @param string $taskId
     * @param string $tagId
     * @return string JSON or null
     */
    public function addTagToTask($taskId, $tagId){
        $data = array("data" => array("tag" => $tagId));
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl."/{$taskId}/addTag", $data, METHOD_POST);
    }

    /**
     * Removes a tag from a task. If successful, will return success and an empty data block.
     *
     * @param string $taskId
     * @param string $tagId
     * @return string JSON or null
     */
    public function removeTagFromTask($taskId, $tagId){
        $data = array("data" => array("tag" => $tagId));
        $data = json_encode($data);
        return $this->askAsana($this->taskUrl."/{$taskId}/removeTag", $data, METHOD_POST);
    }

    /**
     * **********************************
     * Projects functions
     * **********************************
     */

    /**
     * Function to create a project.
     *
     * @param array $data Array of data for the project following the Asana API documentation.
     * Example:
     *
     * array(
     *     "workspace" => "1768",
     *     "name" => "Foo Project!",
     *     "notes" => "This is a test project"
     * )
     *
     * @return string JSON or null
     */
    public function createProject($data){
        $data = array("data" => $data);
        $data = json_encode($data);
        return $this->askAsana($this->projectsUrl, $data, METHOD_POST);
    }

    /**
     * Returns the full record for a single project.
     *
     * @param string $projectId
     * @return string JSON or null
     */
    public function getProject($projectId){
        return $this->askAsana($this->projectsUrl."/{$projectId}");
    }

    /**
     * Returns the projects in all workspaces containing archived ones or not.
     *
     * @param boolean $archived Return archived projects or not
     * @param string  $opt_fields Return results with optional parameters
     */
    public function getProjects($archived = false, $opt_fields = ""){
        $archived = $archived?"true":"false";
        $opt_fields = ($opt_fields != "")?"&opt_fields={$opt_fields}":"";
        return $this->askAsana($this->projectsUrl."?archived={$archived}{$opt_fields}");
    }

    /**
     * Returns the projects in provided workspace containing archived ones or not.
     *
     * @param string $workspaceId
     * @param boolean $archived Return archived projects or not
     */
    public function getProjectsInWorkspace($workspaceId, $archived = false){
        $archived = $archived?"true":"false";
        return $this->askAsana($this->projectsUrl."?archived={$archived}&workspace={$workspaceId}");
    }

    /**
     * This method modifies the fields of a project provided in the request, then returns the full updated record.
     *
     * @param string $projectId
     * @param array $data An array containing fields to update, see Asana API if needed.
     * Example: array("name" => "Test", "notes" => "It's a test project");
     *
     * @return string JSON or null
     */
    public function updateProject($projectId, $data){
        $data = array("data" => $data);
        $data = json_encode($data);
        return $this->askAsana($this->projectsUrl."/{$projectId}", $data, METHOD_PUT);
    }

    /**
     * Returns all unarchived tasks of a given project
     *
     * @param string $projectId
     *
     * @return string JSON or null
     */
    public function getProjectTasks($projectId){
        return $this->askAsana($this->taskUrl."?project={$projectId}");
    }

    /**
     * Returns the list of stories associated with the object.
     * As usual with queries, stories are returned in compact form.
     * However, the compact form for stories contains more
     * information by default than just the ID.
     * There is presently no way to get a filtered set of stories.
     *
     * @param string $projectId
     * @return string JSON or null
     */
    public function getProjectStories($projectId){
        return $this->askAsana($this->projectsUrl."/{$projectId}/stories");
    }

    /**
     * Adds a comment to a project
     * The comment will be authored by the authorized user, and timestamped when the server receives the request.
     *
     * @param string $projectId
     * @param string $text
     * @return string JSON or null
     */
    public function commentOnProject($projectId, $text = ""){
        $data = array(
            "data" => array(
                "text" => $text
            )
        );
        $data = json_encode($data);
        return $this->askAsana($this->projectsUrl."/{$projectId}/stories", $data, METHOD_POST);
    }

    /**
     * **********************************
     * Tags functions
     * **********************************
     */

    /**
     * Returns the full record for a single tag.
     *
     * @param string $tagId
     * @return string JSON or null
     */
    public function getTag($tagId){
        return $this->askAsana($this->tagsUrl."/{$tagId}");
    }

    /**
     * Returns the full record for all tags in all workspaces.
     *
     * @return string JSON or null
     */
    public function getTags(){
        return $this->askAsana($this->tagsUrl);
    }

    /**
     * Modifies the fields of a tag provided in the request, then returns the full updated record.
     *
     * @param string $tagId
     * @param array $data An array containing fields to update, see Asana API if needed.
     * Example: array("name" => "Test", "notes" => "It's a test tag");
     *
     * @return string JSON or null
     */
    public function updateTag($tagId, $data){
        $data = array("data" => $data);
        $data = json_encode($data);
        return $this->askAsana($this->tagsUrl."/{$tagId}", $data, METHOD_PUT);
    }

    /**
     * Returns the list of all tasks with this tag. Tasks can have more than one tag at a time.
     *
     * @param string $tagId
     * @return string JSON or null
     */
    public function getTasksWithTag($tagId){
        return $this->askAsana($this->tagsUrl."/{$tagId}/tasks");
    }

    /**
     * **********************************
     * Stories and comments functions
     * **********************************
     */

    /**
     * Returns the full record for a single story.
     *
     * @param string $storyId
     * @return string JSON or null
     */
    public function getSingleStory($storyId){
        return $this->askAsana($this->storiesUrl."/{$storyId}");
    }

    /**
     * **********************************
     * Workspaces functions
     * **********************************
     */

    /**
     * Returns all the workspaces.
     *
     * @return string JSON or null
     */
    public function getWorkspaces(){
        return $this->askAsana($this->workspaceUrl);
    }

    /**
     * Currently the only field that can be modified for a workspace is its name (as Asana API says).
     * This method returns the complete updated workspace record.
     *
     * @param array $data
     * Example: array("name" => "Test");
     *
     * @return string JSON or null
     */
    public function updateWorkspace($workspaceId, $data = array("name" => "")){
        $data = array("data" => $data);
        $data = json_encode($data);
        return $this->askAsana($this->workspaceUrl."/{$workspaceId}", $data, METHOD_PUT);
    }

    /**
     * Returns tasks of all workspace assigned to someone.
     * Note: As Asana API says, you must specify an assignee when querying for workspace tasks.
     *
     * @param string $workspaceId The id of the workspace
     * @param string $assignee Can be "me" or user ID
     *
     * @return string JSON or null
     */
    public function getWorkspaceTasks($workspaceId, $assignee = "me"){
        return $this->askAsana($this->taskUrl."?workspace={$workspaceId}&assignee={$assignee}");
    }

    /**
     * Returns tags of all workspace.
     *
     * @param string $workspaceId The id of the workspace
     *
     * @return string JSON or null
     */
    public function getWorkspaceTags($workspaceId){
        return $this->askAsana($this->workspaceUrl."/{$workspaceId}/tags");
    }

    /**
     * Returns users of all workspace.
     *
     * @param string $workspaceId The id of the workspace
     *
     * @return string JSON or null
     */
    public function getWorkspaceUsers($workspaceId){
        return $this->askAsana($this->workspaceUrl."/{$workspaceId}/users");
    }

    /**
     * This function communicates with Asana REST API.
     * You don't need to call this function directly. It's only for inner class working.
     *
     * @param string $url
     * @param string $data Must be a json string
     * @param int $method See constants defined at the beginning of the class
     * @return string JSON or null
     */
    private function askAsana($url, $data = null, $method = METHOD_GET){
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); // Don't print the result
        curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, $this->timeout);
        curl_setopt($curl, CURLOPT_TIMEOUT, $this->timeout);
        curl_setopt($curl, CURLOPT_FAILONERROR, true);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0); // Don't verify SSL connection
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0); //         ""           ""
        curl_setopt($curl, CURLOPT_USERPWD, $this->apiKey);
        curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
        curl_setopt($curl, CURLOPT_HTTPHEADER, array("Content-Type: application/json")); // Send as JSON
        if($this->advDebug){
            curl_setopt($curl, CURLOPT_HEADER, true); // Display headers
            curl_setopt($curl, CURLOPT_VERBOSE, true); // Display communication with server
        }
        if($method == METHOD_POST){
            curl_setopt($curl, CURLOPT_POST, true);
        } else if($method == METHOD_PUT){
            curl_setopt($curl, CURLOPT_CUSTOMREQUEST, "PUT");
        }
        if(!is_null($data) && ($method == METHOD_POST || $method == METHOD_PUT)){
            curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
        }

        try {
            $return = curl_exec($curl);
            $this->responseCode = curl_getinfo($curl, CURLINFO_HTTP_CODE);

            if($this->debug || $this->advDebug){
                echo "<pre>"; print_r(curl_getinfo($curl)); echo "</pre>";
            }
        } catch(Exception $ex){
            if($this->debug || $this->advDebug){
                echo "<br>cURL error num: ".curl_errno($curl);
                echo "<br>cURL error: ".curl_error($curl);
            }
            echo "Error on cURL";
            $return = null;
        }

        curl_close($curl);

        return $return;
    }
} 
```

[这是 Asana API 文档](http://developer.asana.com/documentation/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T01:04:54.743

很可能您的项目 ID 不正确。确保通过回显获取正确的项目 ID，然后在 Asana 中检查它（在 Asana 中查看项目/任务时，它是 url 中的第一个长数字）。

验证项目 ID 正确后，您的代码应该可以工作。我验证了下面的代码对我有用。

这是我用来获取任务列表的确切代码：

```
    $tasks = $asana->getProjectTasks($project_ID); //直接从 Asana 中的 url 获取 $project_ID。
                $tasksJson = json_decode($tasks);
                if($asana->responseCode == "200" && !is_null($tasks)){
                    foreach ($tasksJson->data as $task){
                        回声“+”。$任务->名称。" (id " . $task->id . ")" . “] 
”；
                    }
                } 别的 {
                    echo "尝试连接 Asana 时出错，响应代码：{$asana->responseCode}";
                }

```

# ruby - 将函数应用于数组中的每个元素并将结果存储在数组中

> ID：15320217
> 
> 赞同：2
> 
> 时间：2013-03-10T08:07:15.577
> 
> 标签：ruby, arrays

我有一个`toWords`将整数转换为单词的函数

例如`toWords(500, tableWords)`给`fivehundred`

我有一个数字数组`h = (1..999).to_a`，我想遍历这个数组并将每个数字转换为一个单词并将其存储在一个新数组中。我目前的尝试是：

```
h = (1..999).to_a
Lh = h.each do |i| toWords(i, tableWords) end 
```

但是， 的内容`Lh`只是从 1 到 999 的整数，而不是我的`toWords`函数的输出。我该怎么做呢？我正在考虑类似于`sapply`R 中的内容。

更好的是，如果我的新数组 Lh 可以有两列，第一列包含数字格式的整数，第二列将是相应的单词数。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T08:20:38.253

要获取您的两列，您可以执行以下操作

```
(1..999).map {|x| [x, toWords(x, tableWords)]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T08:16:55.407

根据 Cicada 的评论，答案是：

```
Lh = h.map{|x| toWords(x, tableWords)} 
```

# python - 如何从 python 中 mongodb 的 pymongo 查询中获取单个值？

> ID：15320221
> 
> 赞同：4
> 
> 时间：2013-03-10T08:07:45.757
> 
> 标签：python, arrays, mongodb, pymongo

我正在尝试使用 pymongo。到目前为止一切正常，我可以连接到 mongodb，插入和进行查询。我面临的问题是将数据从`find()`python 数组中获取。

这是我的代码

```
>>> a = db.sensor.find({'sensor_id':3})
>>> a
<pymongo.cursor.Cursor object at 0x637f70>
>>> for bla in a:
...     print bla
... 
{u'date': datetime.datetime(2013, 3, 4, 21, 8, 23, 907000), u'_id': ObjectId('51350d4772ab8a691c370453'), u'sensor_id': 3, u'value': -1625.0}
{u'date': datetime.datetime(2013, 3, 4, 21, 20, 12, 694000), u'_id': ObjectId('5135100c72ab8a695b54a4f3'), u'sensor_id': 3, u'value': -1875.0}
{u'date': datetime.datetime(2013, 3, 4, 21, 22, 4, 985000), u'_id': ObjectId('5135107c72ab8a69851a5a95'), u'sensor_id': 3, u'value': -1812.0}
{u'date': datetime.datetime(2013, 3, 4, 21, 26, 11, 758000), u'_id': ObjectId('5135117372ab8a69b285b4c7'), u'sensor_id': 3, u'value': -1312.0} 
```

有没有办法制作类似的东西`myValues[i] = bla.value`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T08:42:25.223

“bla”只是一个字典，所以

```
myValues[i] = bla['value'] 
```

就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T10:44:20.303

```
a = db.sensor.find({'sensor_id':3})
#your values are in dictionary format..
for key, val in a.items():
     print(val) 
```

> 如果你想要特定的列值，试试这个..

```
a = db.sensor.find({'sensor_id':3})
#your values are in dictionary format..
for key, val in a.items():
    if 'date' in key:
       print(val) #now you got only date column values 
```

# mysql - WAMP-Mysql 服务未启动

> ID：15320223
> 
> 赞同：0
> 
> 时间：2013-03-10T08:07:58.137
> 
> 标签：mysql, wamp

MySQL 服务不是从 WAMP 开始的，这是我得到的错误日志：

```
130309 22:37:18 [Note] Plugin 'FEDERATED' is disabled.
130309 22:37:18 [Note] Plugin 'InnoDB' is disabled.
130309 22:37:18 [ERROR] wampmysqld: unknown option '--skip-locking'
130309 22:37:18 [ERROR] Aborting <enter code here> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:51:09.907

编辑 my.ini（使用 wampmanager -> MYSQL -> My.ini 菜单链接）

将参数 skip-locking 更改为 skip-external-locking

# java - 与 Apache commons math 绑定的小型 Java 开源数学表达式评估器

> ID：15320224
> 
> 赞同：2
> 
> 时间：2013-03-10T08:08:15.517
> 
> 标签：java, parsing, math, expression, complex-numbers

我已经在谷歌搜索了一段时间，但找不到我需要的东西。我需要一个开源数学表达式解析器和求值器——其中有无数个——但它可以链接到像 Apache Commons Math 这样的体面的数学库。我需要复杂的算术、sin 等基本函数、在复平面上工作的 log 以及 gamma、erf 等函数。

我找到的最接近的答案是[用于在 Java 中评估数学表达式的内置方法](https://stackoverflow.com/questions/7258538/free-java-library-for-evaluating-math-expressions)- 但除了编写无数帮助函数之外，我看不到如何绑定

*   jexpr
*   朱比
*   杰瓦尔
*   javax.script

与Commons 数学。此外，修改我自己现有的（实值）表达式解析器以绑定所有函数也需要相当多的工作。

另外，在我的应用程序中包含一个完整的脚本编程语言（如 python/ruby）似乎有点矫枉过正，我想做的只是一个老式的袖珍计算器。

**不是已经有人做过这种事了**吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:08:13.427

您可能想查看我创建的实现：

[https://github.com/uklimaschewski/EvalEx](https://github.com/uklimaschewski/EvalEx)。

它基于`java.math.BigDecimal`并支持基本的数学和布尔运算。这是一个非常紧凑的实现：只有一个类文件，对其他库没有任何依赖关系。此外，它可以通过自定义函数和运算符轻松扩展。

您的`gamma(1.8)`示例可以通过这种方式添加：

```
Expression e = new Expression("gamma(1.8)");

e.addFunction(e.new Function("gamma", 1) {
    @Override
    public BigDecimal eval(List<BigDecimal> parameters) {
        BigDecimal gamma = MyMathLibraryGammaCalculation(parameters.get(0));
        return gamma;
    }
});

e.eval(); // returns gamma(1.8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:21:14.877

我们曾经使用 ScriptEngine for javascript 来执行此操作 - 不确定这是否足以满足您的要求......这是 SA 中的参考：

[Java 中有 eval() 函数吗？](https://stackoverflow.com/questions/2605032/using-eval-in-java)

# objective-c - 目标 C - 设计建议：存储体重值的类

> ID：15320227
> 
> 赞同：0
> 
> 时间：2013-03-10T08:08:44.013
> 
> 标签：objective-c, oop, object

作为学习目标 c/oop 的帮助，我正在设计一个 iOS 应用程序来存储定期体重测量值。我希望能够以各种单位（Kg、Lb 等）检索体重。对于每个体重实例，我可以/应该使用自定义 getter 子类化 NSNumber 以正确单位返回重量吗？也许我应该简单地将 NSObject 子类化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:13:01.937

> 我可以/应该使用自定义 getter 子类化 NSNumber 吗？它以正确的单位返回重量？也许我应该简单地将 NSObject 子类化？

你可以吗？是的。你应该？不，NSNumber 实例实际上永远不是 NSNumber。NSNumber 充当它的各种子类的分配器，这意味着当您对它进行子类化时，您基本上承诺重新实现 NSNumber 的类分配方面（NSArray 和 NSString 也是如此）。

尝试在 NSNumber 上编写一个类别，而不是尝试对其进行子类化，即使这样，NSNumber 也从未设计用于操作和数学运算。数字本质上是不可变的构造，因此最好编写一个方法，在控制器对象中的某处使用原语计算事物。在您的特定情况下， NSNumber 仅适用于持久性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:46:05.747

不，根本不要使用`NSNumber`，甚至不要给它添加一个类别——这个类（集群）如果设计用于当你需要将原始类型存储为对象而不是其他的时候。

如果您希望封装一个权重，请编写一个类来执行此操作，类似于（在终端键入的代码）：

```
@interface Weight : NSObject

@property double kilos:
@property double pounds;
// etc

@end

@implementation Weight
{
   double value; // stored in a suitable unit, kg, lb, oz, g, etc.
}

// implement getters and setters converting between unit of property and unit of value

// implement dependent property methods to setting, say, pounds produces a KVO
// notification for both pounds and kilos, etc. E.g.:

+ (NSSet *) keyPathsForValuesAffectingPounds
{
   return [NSSet setWithObject:@"kilos"];
}

@end 
```

现在，您可以将值设置为一个单位，将其作为另一个单位读取，并在设置时获取所有属性的 KVO 通知。

您将需要添加构造函数（例如`newWeightWithKilos:`），也许是操作（例如`addWeight:`- 它可以只添加内部值），并且需要确定 a`Weight`是可变的还是不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:15:17.897

您不需要子类 NSNumber 而是您可以子类 NSObject 并添加一个属性以设置基本单位的重量（例如：kg's），然后您可以添加几个以基本单位为单位的重量并以单位返回转换器值的方法您指定（磅等）。

# java - 使用javascript将用户重定向到liferay登录页面

> ID：15320232
> 
> 赞同：0
> 
> 时间：2013-03-10T08:09:00.613
> 
> 标签：java, javascript, liferay

当发生一些内部错误时，我想将用户重定向到登录页面。Javascript 函数得到了内部错误的响应，所以我想通过这个 javascript 函数将用户重定向到 Liferay 登录页面。我应该调用什么函数来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:13:19.360

当您需要将浏览器重定向到新页面时更改对象`href`的属性：`location`

```
location.href = '/login/page'; 
```

# c - 如果我使用 O_NDELAY，为什么 errno 会设置 EAGAIN？从 dev/tty 读取

> ID：15320233
> 
> 赞同：0
> 
> 时间：2013-03-10T08:09:21.440
> 
> 标签：c, unix, system-calls

我有这个：

```
//...
      if ((tty = open("/dev/tty",O_RDONLY | O_NDELAY) ) == -1 )
        {
                perror("/dev/tty");
                return 1;
        }
        //...
        if (-1 == (fi = open(argv[1], O_RDONLY)) )
        {
                perror(argv[1]);
                return 1;
        }
        //...
        while (1)
        {
                printf("you have five seconds to enter a line number %d", line); 
                sleep(5);
                i = read(tty, buf, 257);
                printf("read %d\n", i);
                if ( i == -1) {
                        perror("dev/tty/"); 
                        // if nothing was entered read always returns -1
                        //and perror prints: Resource temporarily unavailable. it's STRANGE!!!
                }
                if ( i == 0 )
                {
                        lseek(fi, 0, SEEK_SET);
                        while((i = read(fi, buf, BUFSIZ)) > 0) 
                              write(1, buf, i);
                        return 0;
                }
                //...
                if ( 0 == read(fi, buf, lines_length[line]))
                {
                        fprintf(stderr,"can't read\n");
                        return 1;
                }
                write(1, buf, lines_length[line]);
        }
 //... 
```

所以我用 O_NDELAY 标志打开 /dev/tty ，但它似乎有问题，因为稍后读取返回 -1（它必须返回 0）。我不知道出了什么问题。还有一个问题：为什么**printf("you have 5 sec")在****write(1, buf, lines_length[line]);**之后打印

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:12:40.850

> 如果未输入任何内容，则 read 总是返回 -1 并且 perror 打印：资源暂时不可用。真奇怪！！！

这正是`O_NDELAY`应该做的。它不会等待读取操作完成。如果它不能立即执行，而不是阻止它返回`-1`并设置`errno = EAGAIN`。

* * *

至于你的第二个问题，你没有刷新输出。试试：`fflush(stdout)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:02:38.697

在早期版本的 UNIX 系统中，用于非阻塞操作的标志是 O_NDELAY。如果设置了 O_NDELAY，则 read 返回 0。由于它与 Unix 约定相矛盾（返回 0 表示文件结束），POSIX.1 定义了非阻塞模式的标志 - O_NONBLOCK。现在标志 O_NDELAY 仅用于兼容性，不应在现代应用程序中使用。**

# jquery - 如何从 .done() 内部调用 .fail() 来处理一般错误？

> ID：15320235
> 
> 赞同：8
> 
> 时间：2013-03-10T08:09:52.563
> 
> 标签：jquery, promise

jQuery 的 AJAX`.fail()`是一个很好的错误处理程序，可以处理“404 Not Found”等错误，但是我们如何从内部故意调用它`.done()`来处理一般错误情况，例如当用户提供的数据不正确时？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T08:22:17.960

您可以使用在每种情况下都会在错误时调用的通用函数。

```
$.ajax( 'url' )
    .done( function( data, textStatus, jqXHR ) {
        if( data == 'Invalid' ) {
            ajaxError( jqXHR, "usererror" );
        }
    })
    .fail( ajaxError );

function ajaxError( jqXHR, textStatus, errorThrown ) {
    console.log( 'Ajax error: ' + textStatus );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T15:58:52.060

@Juhana 的代码适用于大多数情况。

但是，如果可能出现无法通过`data`单独检查来可靠预测的错误，请考虑以下变体：

```
$.ajax( 'url' ).done( function( data, textStatus, jqXHR ) {
    try {
        var dataLooksGood = ......;//(boolean) Test data for predictable data errors here
        if( !dataLooksGood ) throw( new Error("data invalid"); )
        //Handle data here.
        //Any naturally-ocurring errors or further manually-thrown errors will be caught below.
    }
    catch(err) {
        ajaxError( jqXHR, "AJAX successful but: " + err.message );
    }
}).fail( ajaxError ).always(function() {
    //Here do whatever is necessary after success or error
});

function ajaxError( jqXHR, textStatus, errorThrown ) {
    console.log( 'AJAX error: ' + textStatus );
} 
```

通过捕获错误，`always`即使发生不可预测的错误，处理程序也将被允许触发。因此，无论是否发生错误，您都可以更好地保证“正在加载...”消息或微调器图形被终止。

# linux - Linux shell - 检查并设置二进制文件的最后一个字节

> ID：15320246
> 
> 赞同：1
> 
> 时间：2013-03-10T08:12:00.503
> 
> 标签：linux, command-line

我有一组要处理的文件。我无法控制文件的创建或删除。但是我知道每个文件的最后一个字节总是 xFF 并且未使用。

我想处理文件并修改最后一个字节，这样我就可以知道它们已被处理。我在 shell 中找不到任何单字节操作的具体示例。

伪代码

```
for file in *
do
if (lastbyteof($file) == xFF)
then
    # Process this file
    ...
    # Mark the file so we don't process it again
    lastbyteof($file) = xF0
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:08:40.107

我将我的要求从最后一个字节更改为第四个字节并像这样处理它。非常欢迎任何改进或替代建议。

```
for file in *.ts
do
    # Get the value of the fourth byte (skip the first 3)
    checkByte=`hexdump -n1 -s3 -e'"" 1/1 "%02xf"' "$file"`
    if [ $checkByte == "ff" ]
    then
        # Process this file

        # Change the fourth byte to 0xFE
        echo -ne \\xFE | dd conv=notrunc bs=1 count=1 seek=3 of="$file"
    fi
done 
```

# jsf-2 - 命令按钮在第二次单击时起作用，并且手风琴的第一个选项卡内容为空

> ID：15320248
> 
> 赞同：0
> 
> 时间：2013-03-10T08:12:13.013
> 
> 标签：jsf-2, primefaces

我有一个带有学生列表的手风琴面板，并且我设置了 dynamic="true"，在手风琴面板的选项卡中，我有一个命令按钮，它调用支持 bean 中的方法。这里第一个选项卡的内容是空的，其余的都很好。为了纠正这个问题，我设置了 dynamic="false" 现在选项卡的内容正在出现，但是命令按钮单击不会在第一次单击时调用支持 bean 的方法。我不确定发生了什么.. 我使用的是 prime faces 3.4 和 jsf2

```
<p:accordionPanel  value="#{testBean.students}" var="stud"  dynamic="true"  activeIndex="#{systemManagedBean.formBean.id}">  

              <p:tab title="#{stud.name}" id="studId">  
             <p:commandButton process="@this"  value="edit" icon="ui-icon-pencil" styleClass="btn-primary" style="margin-left:734px;" action="#{testBean.edit}">

            <f:setPropertyActionListener target="#{testBean.stydent}" value="#{stud}"></f:setPropertyActionListener>

            </p:commandButton> 
```

我试过 proceess=@form 没有做任何改变..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:21:15.400

以下代码正在工作：

xhtml：

```
<h:form>
    <p:accordionPanel value="#{so15320248.students}" var="student">
        <p:tab title="#{student.name}">
            <p:commandButton icon="ui-icon-pencil" value="Edit" actionListener="#{so15320248.edit(student)}"/>
        </p:tab>
    </p:accordionPanel>
</h:form> 
```

托管bean：

```
@ManagedBean(name = "so15320248")
@ViewScoped
public class SO15320248 implements Serializable {

    private static final long serialVersionUID = -2285963068688871710L;

    private List<Student> students;

    @PostConstruct
    public void init() {
        students = new ArrayList<Student>();
        students.add(new Student("Student 1"));
        students.add(new Student("Student 2"));
    }

    public void edit(Student student) {
        System.out.println("===========================");
        System.out.println(student.getName());
        System.out.println("===========================");
    }

    public List<Student> getStudents() {
        return students;
    }

    public void setStudents(List<Student> students) {
        this.students = students;
    }
} 
```

# apache - Apache mod_proxy 不转发所有请求

> ID：15320249
> 
> 赞同：0
> 
> 时间：2013-03-10T08:12:14.627
> 
> 标签：apache, mod-proxy, bottle

我有一个在 localhost:3000 上运行的 Bottle/Python 应用程序，我正在使用 Apache mod_proxy 将请求转发到。它有 99% 的时间都在工作，除非我尝试访问如下网址：

[http://m2t.openseedbox.com/api/upload/http%3A%2F%2Ftorrents.thepiratebay.se%2F6753175%2FPioneer_One_S01E04_720p_x264-VODO.6753175.TPB.torrent](http://m2t.openseedbox.com/api/upload/http%3A%2F%2Ftorrents.thepiratebay.se%2F6753175%2FPioneer_One_S01E04_720p_x264-VODO.6753175.TPB.torrent)

（基本上，有一个 URL 是 URL 的一部分，但它是通过 encodeURIComponent 运行的）。在这种情况下，Apache 返回它自己的 404 页面，而不是将 url 传递给后端服务器。

我的apache配置如下：

```
<VirtualHost *:80>
        ServerName m2t.openseedbox.com

        ProxyPass / http://127.0.0.1:3000/ retry=0
        ProxyPassReverse / http://127.0.0.1:3000/
        ProxyPreserveHost On
</VirtualHost> 
```

为什么 Apache 不代理此 URL？（您可以自己访问它以查看应有 Bottle 页面的 Apache 404 页面）

编辑：我通过将 URL 作为 GET 参数传递来解决它。我仍然不知道为什么 Apache 没有像宣传的那样工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T08:37:31.710

默认情况下，Apache 不会通过其中包含 %2F 的 url。有关更多信息，请参阅下面的链接。

[URL 中断中的 %2F 并且不引用所需的 .php 文件](https://stackoverflow.com/questions/9206835/2f-in-url-breaks-and-does-not-reference-to-the-php-file-required)

# git - 为 ruby 项目轻松上传到 github

> ID：15320255
> 
> 赞同：0
> 
> 时间：2013-03-10T08:13:03.840
> 
> 标签：git, ubuntu

我一个人在做一个 Sinatra 项目。每天甚至更多时候，我都会通过说将代码上传到 github

```
git add .
git commit -m "my comment"
git push origin master 
```

我知道这个问题可能与红宝石无关，但无论如何：我如何轻松地制作这个例程？我只想简单地说：`"github-commit "my comment" "`没有别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:17:55.047

写一个 .sh 脚本？

像这样的东西：

```
#push.sh
git add .
git commit -m $1
git push origin master 
```

然后你可以做 push.sh “你的提交信息”

（只是给你一个想法，未经测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:08:59.210

为了让您灵活，我建议您使用一些简短的[git 别名](https://git.wiki.kernel.org/index.php/Aliases)。

例如，要完成您在问题中显示的内容，命令可能如下所示：

```
gaa
gc "Awesome changes to my code"
gpm 
```

与您的 github-commit 命令相比，它会减少输入，减去注释字符串的 8 个字符，但仍然很灵活。我基于助记符“git add all”和“git commit”和“git push master”的命令

您可以在 .bashrc 中[定义别名](https://www.gnu.org/software/bash/manual/bash.html#Aliases)，例如，遵循以下模式：

```
alias gpp='git pull --rebase && git push' 
```

尽管您可能需要一个 shell 函数来接受您的`gc`功能的参数，或者提供一个编辑器（我的偏好）来放置您的提交评论。

# c# - `Marshal.StructureToPtr` 抛出异常试图获取结构的字节数组表示

> ID：15320256
> 
> 赞同：0
> 
> 时间：2013-03-10T08:13:05.477
> 
> 标签：c#, exception, marshalling

我将保存`DataTable`到 *.dbf 文件 (dBase IV)。所以我有一个这样的结构：

```
[StructLayout(LayoutKind.Explicit, Pack = 1)]
public struct DbfHeader
{
    [FieldOffset(0)]
    private byte versionNumber;

    [FieldOffset(1)]
    private byte yearOfLastUpdate;

    [FieldOffset(2)]
    private byte monthOfLastUpdate;

    [FieldOffset(3)]
    private byte dayOfLastUpdate;

    [FieldOffset(4)]
    private Int32 numberOfRecords;

    [FieldOffset(8)]
    private Int16 lengthOfHeader;

    [FieldOffset(10)]
    private Int16 lengthOfEachRecord;

    [FieldOffset(12)]
    private Int16 reserved1;

    [FieldOffset(14)]
    private byte incompleteTransaction;

    [FieldOffset(15)]
    private byte encryptionFlag;

    [FieldOffset(16)]
    private byte[] freeRecordThread;

    [FieldOffset(20)]
    private byte[] reserved2;

    [FieldOffset(28)]
    private byte mdxFlag;

    [FieldOffset(29)]
    private byte languageDriver;

    [FieldOffset(30)]
    private Int16 reserved3;

    public DbfHeader(int numberOfRecords, int numberOfFields, short recordLength, Encoding encoding)
    {
        // some code that initialize each field
    }

} 
```

另外，我有一种将`DbfHeader`变量转换为`byte[]`数组的方法，如下所示：

```
public static byte[] StructureToByteArray<T>(T structure)
{
    int len = Marshal.SizeOf(structure);
    byte[] result = new byte[len];
    IntPtr ptr = Marshal.AllocHGlobal(len);
    Marshal.StructureToPtr(structure, ptr, true);
    Marshal.Copy(ptr, result, 0, len);
    Marshal.FreeHGlobal(ptr);
    return result;
} 
```

但是这种方法行不通。在这`Marshal.StructureToPtr(structure, ptr, true)`条线上，我得到了这个例外：

```
Attempted to read or write protected memory. 
This is often an indication that other memory is corrupt. 
```

有谁知道出了什么问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:40:19.760

你为什么要传递`fDeleteOld`真实的`Marshal.StructureToPtr()`？

你应该在`false`我能看到的地方通过。

我认为您还应该在复制内存后调用 Marshal.DestroyStructure() ：

```
public static byte[] StructureToByteArray<T>(T structure)
{
    int len = Marshal.SizeOf(structure);
    byte[] result = new byte[len];
    IntPtr ptr = Marshal.AllocHGlobal(len);
    Marshal.StructureToPtr(structure, ptr, false);
    Marshal.Copy(ptr, result, 0, len);
    Marshal.DestroyStructure(ptr, typeof(T));
    Marshal.FreeHGlobal(ptr);
    return result;
} 
```

它之前崩溃的原因是因为传递`fDeleteOld`as true 假设您*已经*调用`Marshal.StructureToPtr()`了该 IntPtr。因为你没有，所以它崩溃了（内存块没有以 StructureToPtr() 期望的方式初始化）。

`Marshal.DestroyStructure()`但是，您仍然需要按照我上面的示例调用来清理内存。这是清理用于包含引用的结构的数据所必需的。（您的特定示例结构不包含引用，但您可以将这样的结构传递给您的`StructureToByteArray()`）。

最后，请注意，如果您这样做，它不会崩溃（此代码除了演示如何使用`fDeleteOld`标志之外毫无意义）：

```
Marshal.StructureToPtr(structure, ptr, false); // First time; must be false.
Marshal.StructureToPtr(structure, ptr, true); // Second time: Now it can be true. 
```

# ruby - 将 + 运算符应用于子类化数组

> ID：15320262
> 
> 赞同：0
> 
> 时间：2013-03-10T08:14:02.337
> 
> 标签：ruby, arrays

我试图连接两个子类数组。

但它返回一个数组类而不是 MyArray。

```
class MyArray < Array
end

foo = MyArray.new
bar = MyArray.new
p foo.class #=> MyArray
p (foo + bar).class #=> Array 
```

如何连接 MyArray 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:44:19.413

在 MyArray 类中定义方法并使用`super`. 你也可以只使用 alias_method :+, :concat

```
def concat(some_array)
  super
end

p foo.concat(bar).class #=> MyArray 
```

# python - 无法使用 Python 游标从存储过程返回结果

> ID：15320265
> 
> 赞同：16
> 
> 时间：2013-03-10T08:14:32.043
> 
> 标签：python, mysql, stored-procedures

出于某种奇怪的原因，我无法从 Python 测试应用程序中的 callproc 调用中获得结果。MqSQL 5.2.47 中的存储过程如下所示：

```
CREATE PROCEDURE `mytestdb`.`getperson` (IN personid INT)
BEGIN
   select person.person_id,
          person.person_fname,
          person.person_mi,
          person.person_lname,
          person.persongender_id,
          person.personjob_id
     from person
    where person.person_id = personid;
END 
```

现在，将 PyCharm 与 Python 3.3 一起使用，调用此存储过程时我似乎无法检索任何内容。这段代码让我得到了想要的结果：

```
import mysql.connector

cnx = mysql.connector.connect(user='root', host='127.0.0.1', database='mytestdb')
cnx._open_connection()
cursor = cnx.cursor()

cursor.execute("select * from person where person.person_id = 1")
people = cursor.fetchall()

for person in people:
    print(person)

cnx.close() 
```

但是这段代码使用 cursor.fetchall() 或 cursor.fetchone()...

```
import mysql.connector

cnx = mysql.connector.connect(user='root', host='127.0.0.1', database='mytestdb')
cnx._open_connection()
cursor = cnx.cursor()

cursor.callproc("getperson", [1])
people = cursor.fetchall()

for person in people:
    print(person)

cnx.close() 
```

...返回“mysql.connector.errors.InterfaceError：没有要从中获取的结果集。” 像这样使用 cursor.execute() 方法还有一个额外的奇怪行为......

```
import mysql.connector

cnx = mysql.connector.connect(user='root', host='127.0.0.1', database='mytestdb')
cnx._open_connection()
cursor = cnx.cursor()

cursor.execute("call getperson(1)")
people = cursor.fetchall()

for person in people:
    print(person)

cnx.close() 
```

...因为它产生“mysql.connector.errors.InterfaceError: Use cmd_query_iter for statements with multiple queries”后跟“mysql.connector.errors.InterfaceError: Use multi=True when execution multiple statements”尽管我是只返回一个查询结果而不是多个结果集。MySQL Python 连接器是否将存储过程上的执行调用视为双重查询？我怎样才能调用存储过程并取回我的结果？我真的不想在我的代码中使用动态 SQL。提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T08:36:52.640

您是否尝试过选择其中一个结果集？

```
for result in cursor.stored_results():
    people = result.fetchall() 
```

即使您只有一个`SELECT`stmt，它也可能分配给多个结果集。我知道在 PHP 的 MySQLi 存储过程中这样做是为了允许 INOUT 和 OUT 变量返回（同样，你没有，但也许它无论如何都在分配）。

我正在使用的完整代码（正在运行）是：

```
import mysql.connector

cnx = mysql.connector.connect(user='me',password='pw',host='localhost',database='mydb')
cnx._open_connection()
cursor = cnx.cursor()

cursor.callproc("getperson",[1])

for result in cursor.stored_results():
    people=result.fetchall()

for person in people:
    print person

cnx.close() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-31T15:53:26.857

调用后获取存储过程的结果`cursor.callproc`取决于以下因素：

*   调用过程的结果是否分配给 INOUT 或 OUT 参数
*   结果是由单行还是一个结果集（或多个结果集）组成
*   用于进行调用的 python 包

DBAPI[规范](https://www.python.org/dev/peps/pep-0249/#callproc)有这样的说法`cursor.callproc`：

> 调用具有给定名称的存储数据库过程。对于过程期望的每个参数，参数序列必须包含一个条目。调用的结果作为输入序列的修改副本返回。输入参数保持不变，输出和输入/输出参数替换为可能的新值。
> 
> 该过程还可以提供结果集作为输出。然后必须通过标准的 .fetch*() 方法使其可用。

实际上，`cursor.callproc`只有当过程返回单行且列数与 INOUT 和 OUT 参数的数量相匹配时，才能使用 的返回值，因此处理结果的方式会有所不同。

* * *

[以下是主要的 MySQL Python 连接器包 - MySQL Connector](https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-callproc.html)、[mysqlclient (MySQLdb)](https://mysqlclient.readthedocs.io/user_guide.html#cursor-objects)和[PyMySQL](https://pymysql.readthedocs.io/en/latest/modules/cursors.html#pymysql.cursors.Cursor.callproc)是如何处理这些情况的。

**单行结果，通过 INOUT 或 OUT 参数返回**

*   **MySQL 连接器**返回输入序列的修改副本作为`cursor.callproc`;的返回值 该值是一个元组。

    ```
    params = [in_param, out_param1, out_param2]
    in_, out1, out2 = cursor.callproc("test_proc", params) 
    ```

*   **mysqlclient**和**PyMySQL**要求向数据库查询输出参数，然后通过游标获取结果；该值是元组的元组。要查询的参数名称的形式为`'@_{procedure_name}_{params.index(param)}'`

    ```
    cursor.callproc("test_proc", params)
    cursor.execute("""SELECT @_test_proc_0, @_test_proc_1""")
    result = cursor.fetchall() 
    ```

**单个结果集中的一行或多行，未定义 INOUT 或 OUT 参数**

*   **MySQL 连接器**通过游标的[stored_results](https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-stored-results.html)方法公开结果（`cursor.stored_results`不是 DBAPI 规范的一部分）

    ```
    cursor.callproc("test_proc", params)
    results = [r.fetchall() for r in cursor.stored_results()] 
    ```

*   **mysqlclient**和**PyMySQL**通过游标的 fetch* 方法公开结果

    ```
    cursor.callproc("test_proc", params)
    results = cursor.fetchall() 
    ```

**多个结果集，未定义 INOUT 或 OUT 参数**

*   **MySQL 连接器**`stored_results`通过游标的方法公开结果

    ```
    cursor.callproc("test_proc", params)
    results = [r.fetchall() for r in cursor.stored_results()] 
    ```

*   **mysqlclient**和**PyMySQL**要求通过游标获取每个结果集，同时调用[cursor.nextset](https://www.python.org/dev/peps/pep-0249/#nextset)前进到下一个结果集。请注意，可能会返回一个额外的空结果集，这是调用过程的结果（如果结果集是通过`cursor.nextset`而不是仅调用`cursor.fetchall`一次来检索的，那么在前面的示例中也会发生这种情况）。

    ```
    cursor.callproc("test_proc", params)
    results = [cursor.fetchall()]
    while cursor.nextset():
        results.append(cursor.fetchall()) 
    ```

* * *

版本信息

```
$ mysql --version
mysql  Ver 15.1 Distrib 10.1.41-MariaDB, for debian-linux-gnu (x86_64) using readline 5.2

$ pip list | grep -i mysql
mysql-connector-python 8.0.18 
mysqlclient            1.4.6  
PyMySQL                0.9.3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:22:58.180

为什么不这样尝试

```
cursor.callproc("getperson", ['1']) 
```

# android-layout - Android 资源 ID - 它们是如何创建的？

> ID：15320266
> 
> 赞同：0
> 
> 时间：2013-03-10T08:14:49.520
> 
> 标签：android-layout

我看到Android为我们在布局中创建的每个资源创建了一个唯一的ID并存储在R.java中；这些 ID 似乎是十六进制数字；不是 GUID；它们有何独特之处？它们是如何创建的？这个问题只是出于好奇；请不要再次向我解释资源，而是唯一 ID 生成背后的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:18:16.750

您的 IDE，即 Eclipse，有一个用于 Android 开发的[ADT 插件。](http://developer.android.com/tools/sdk/eclipse-adt.html)它会自动重新生成 R.java 文件并将唯一 ID 分配给新资源。

# opencv - 在 pkg-config 搜索路径中找不到包 opencv

> ID：15320267
> 
> 赞同：72
> 
> 时间：2013-03-10T08:14:53.153
> 
> 标签：opencv, apt-get, pkg-config

[我已经使用https://help.ubuntu.com/community/OpenCV](https://help.ubuntu.com/community/OpenCV)中的说明安装了 OpenCV

```
$ sudo su
$ sudo apt-get install build-essential
$ sudo apt-get install libavformat-dev
$ sudo apt-get install ffmpeg
$ sudo apt-get install libcv2.3 libcvaux2.3 libhighgui2.3 python-opencv opencv-doc libcv-dev libcvaux-dev libhighgui-dev 
```

现在当我执行“pkg-config --cflags --libs opencv”时，我得到这个错误：

```
Package opencv was not found in the pkg-config search path.
Perhaps you should add the directory containing `opencv.pc'
to the PKG_CONFIG_PATH environment variable
No package 'opencv' found 
```

我该如何解决这个问题？

**- - - -更新 - - - -**

好的，我想出了如何解决这个问题......

我创建了一个名为“opencv.pc”的文件并将其复制到“/usr/local/lib/pkgconfig”然后我将这两行添加到“.bashrc”：

```
PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig
export PKG_CONFIG_PATH 
```

而已！现在一切正常。

该文件的内容是：

```
prefix=/usr
exec_prefix=${prefix}
includedir=${prefix}/include
libdir=${exec_prefix}/lib

Name: opencv
Description: The opencv library
Version: 2.x.x
Cflags: -I${includedir}/opencv -I${includedir}/opencv2
Libs: -L${libdir} -lopencv_calib3d -lopencv_imgproc -lopencv_contrib -lopencv_legacy -lopencv_core -lopencv_ml -lopencv_features2d -lopencv_objdetect -lopencv_flann -lopencv_video -lopencv_highgui 
```

**更新 - 2014**

看来ubuntu社区已经完成了关于安装openCV的文档，你现在要做的就是从[https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/opencv_latest.sh](https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/opencv_latest.sh)下载安装脚本并执行它。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-02-03T09:48:20.450

根据您的问题，我猜您正在使用 Ubuntu（或衍生产品）。如果您使用：

`apt-file search opencv.pc`

然后你看到你必须安装`libopencv-dev`.

这样做之后，`pkg-config --cflags opencv`应该`pkg-config --libs opencv`会按预期工作。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2019-10-08T16:38:19.070

使用opencv 4.0；

*   添加`-DOPENCV_GENERATE_PKGCONFIG=ON`到构建参数
*   `pkg-config --cflags --libs opencv4` 而不是opencv

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-04T20:26:37.130

看来ubuntu社区已经完成了关于安装openCV的文档，

所以你现在要做的就是从[这里](https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/opencv_latest.sh)下载安装脚本并执行它。

不要忘记使其可执行：

```
chmod +x opencv_latest.sh 
```

然后

```
./opencv_latest.sh 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-22T16:09:12.717

当你运行 cmake 添加附加参数 -D OPENCV_GENERATE_PKGCONFIG=YES （这将生成 opencv.pc 文件）

然后像以前一样 make 和 sudo make install 。

使用名称 opencv4 而不仅仅是 opencv 例如：-

`pkg-config --modversion opencv4`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-01T11:36:51.440

[我按照https://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html](https://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html)上的步骤安装了 opencv

除了第 2 步，使用： cmake -D CMAKE_BUILD_TYPE=Release **-D OPENCV_GENERATE_PKGCONFIG=YES** -D CMAKE_INSTALL_PREFIX=/path/to/opencv/ ..

然后找到 opencv4.pc 文件，我的是在 opencv/build/unix-install/

现在运行： $ export PKG_CONFIG_PATH=/path/to/the/file

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-31T20:55:52.270

您好，首先我希望您使用“Synaptic Package Manager”。您只需要转到 ubuntu 软件中心并搜索突触包管理器。它的美妙之处在于，您需要的所有包都可以在这里轻松获得。其次，它将自动配置您的所有路径。现在安装它，然后在那里搜索opencv包，如果你找到带有绿色框的包然后安装它，但是包不在正确的位置，所以你需要重新安装它，但这次来自包管理器。如果安装了那么你只能这样做，你只需要用 opencv 的路径填充 OpenCV_DIR 变量（包含 OpenCVConfig.cmake 文件）

```
 export OpenCV_DIR=<path_of_opencv> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-06T14:43:05.563

尝试在 Debian 9.8 上编译 Go 包时遇到同样的错误：

```
# pkg-config --cflags  -- libssl libcrypto
Package libssl was not found in the pkg-config search path.
Perhaps you should add the directory containing `libssl.pc' 
```

问题是在文件中`pkg-config`搜索包元信息。`.pc`此类文件来自 dev 包。所以，即使我已经`libssl`安装，我仍然得到错误。它通过运行解决：

```
sudo apt-get install libssl-dev 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-06T08:05:06.627

```
$ ./configure --enable-libopencv
ERROR: opencv not found using pkg-config

$ cat /usr/lib64/pkgconfig/opencv.pc
# Package Information for pkg-config

prefix=/usr
exec_prefix=${prefix}
libdir=${exec_prefix}/lib64
includedir_old=${prefix}/include/opencv
includedir_new=${prefix}/include

Name: OpenCV
Description: Open Source Computer Vision Library
Version: 3.1.0
Libs: -L${exec_prefix}/lib64 -lopencv_shape -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_ccalib -lopencv_cvv -lopencv_dnn -lopencv_dpm -lopencv_fuzzy -lopencv_hdf -lopencv_line_descriptor -lopencv_optflow -lopencv_plot -lopencv_reg -lopencv_saliency -lopencv_stereo -lopencv_structured_light -lopencv_rgbd -lopencv_surface_matching -lopencv_tracking -lopencv_datasets -lopencv_text -lopencv_face -lopencv_video -lopencv_ximgproc -lopencv_calib3d -lopencv_features2d -lopencv_flann -lopencv_xobjdetect -lopencv_objdetect -lopencv_ml -lopencv_xphoto -lopencv_highgui -lopencv_videoio -lopencv_imgcodecs -lopencv_photo -lopencv_imgproc -lopencv_core
Libs.private: -L/usr/lib64 -lQt5Test -lQt5Concurrent -lQt5OpenGL -L/lib64 -lwebp -lpng -ltiff -ljasper -ljpeg -lImath -lIlmImf -lIex -lHalf -lIlmThread -lgdal -lgstvideo-1.0 -lgstapp-1.0 -lgstbase-1.0 -lgstriff-1.0 -lgstpbutils-1.0 -lgstreamer-1.0 -lucil -lunicap -lpangoft2-1.0 -lpango-1.0 -lgobject-2.0 -lfontconfig -lfreetype -lglib-2.0 -ldc1394 -lv4l1 -lv4l2 -lgphoto2 -lgphoto2_port -lexif -lQt5Core -lQt5Gui -lQt5Widgets -lhdf5_hl -lhdf5 -lz -ldl -lm -ltesseract -llept -lpthread -lrt -lGLU -lGL
Cflags: -I${includedir_old} -I${includedir_new}

$ pkg-config --cflags --libs opencv
-I/usr/include/opencv -lopencv_shape -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_ccalib -lopencv_cvv -lopencv_dnn -lopencv_dpm -lopencv_fuzzy -lopencv_hdf -lopencv_line_descriptor -lopencv_optflow -lopencv_plot -lopencv_reg -lopencv_saliency -lopencv_stereo -lopencv_structured_light -lopencv_rgbd -lopencv_surface_matching -lopencv_tracking -lopencv_datasets -lopencv_text -lopencv_face -lopencv_video -lopencv_ximgproc -lopencv_calib3d -lopencv_features2d -lopencv_flann -lopencv_xobjdetect -lopencv_objdetect -lopencv_ml -lopencv_xphoto -lopencv_highgui -lopencv_videoio -lopencv_imgcodecs -lopencv_photo -lopencv_imgproc -lopencv_core

$ uname -a
Linux fedora-23-x64 4.8.13-100.fc23.x86_64 #1 SMP Fri Dec 9 14:51:40 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-06T18:55:57.043

$ apt-file search opencv.pc $ ls /usr/local/lib/pkgconfig/ $ sudo cp /usr/local/lib/pkgconfig/opencv4.pc /usr/lib/x86_64-linux-gnu/pkgconfig/opencv.pc $ pkg-config --modversion opencv

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-01T02:10:35.083

专门为 MacOS 用户编写此答案。

首先安装opencv使用：

```
brew install opencv 
or brew install opencv@x (x = 2,4) 
```

我们需要在 PKG_CONFIG_PATH 中有 opencv.pc 的路径以避免这个错误。当您使用 brew 安装 opencv 时，它会在控制台上显示类似这样的内容

```
 For pkg-config to find opencv@2 you may need to set:
  export PKG_CONFIG_PATH="/opt/homebrew/opt/opencv@2/lib/pkgconfig" 
```

由于错误提示原因是 opencv 不在 PKG_CONFIG_PATH 变量中。首先使用以下方法检查变量内部的内容：

```
echo $PKG_CONFIG_PATH 
```

要将 opencv.pc 的位置包含到 PKG_CONFIG_PATH 中，请使用此

```
 echo 'export PKG_CONFIG_PATH="/opt/homebrew/opt/opencv/lib/pkgconfig:$PKG_CONFIG_PATH"' >> ~/.zshrc 
```

# jsf - 如何使用 p:dataTable 的 rowIndex 隐藏/显示另一个组件？

> ID：15320268
> 
> 赞同：4
> 
> 时间：2013-03-10T08:15:04.807
> 
> 标签：jsf, primefaces

我正在尝试使用 p:dataTable。我有三列。在第二列中，我有命令按钮，当单击它时，它应该在第三列的相应行上显示输入框。第三列的输入框已设置 style="display:none"

我的 xhtml

```
<h:form>
    <p:dataTable var="name" value="#{model.namelist}" rowIndexVar="rowIndex">
        <p:column>
                <h:outputText value="#{name} -----"></h:outputText>
        </p:column>
        <p:column>
                <p:commandButton value="click" onclick="som_#{rowIndex}.show();"></p:commandButton>
        </p:column>
        <p:column>
        <p:inputText widgetVar="som_#{rowIndex}" style="display:none">
                </p:inputText>                  
        </p:column>

    </p:dataTable>
    </h:form> 
```

我认为它应该工作，但我不知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T08:47:25.207

当我运行您的代码时，我在 js 中遇到错误，就像`som_0.show`不是函数一样。~~我猜 widgetVar 不支持 el。这就是你的代码不起作用的原因~~。但这应该可以解决您的问题：

```
<h:form>
    <p:dataTable var="name" value="#{model.nameList}" rowIndexVar="rowIndex">
        <p:column>
            <h:outputText value="#{name} -----"></h:outputText>
        </p:column>
        <p:column>
            <p:commandButton value="click" onclick="$('.som_#{rowIndex}').show();"/>
        </p:column>
        <p:column>
            <p:inputText styleClass="som_#{rowIndex}" style="display:none"/>
        </p:column>

    </p:dataTable>
</h:form> 
```

作为`styleClass`支持`el`。所以我`styleClass`用一点 jQuery 做了同样的事情。

## 编辑：

您可能需要在代码中的某处添加以下行：

```
<h:outputScript library="primefaces" name="jquery/jquery.js" /> 
```

## 编辑：

这是你的动态`widgetVar`版本：

```
<h:form>
    <p:dataTable var="name" value="#{so15320268.nameList}" rowIndexVar="rowIndex" widgetVar="table">
        <p:column>
            <h:outputText value="#{name} -----"></h:outputText>
        </p:column>
        <p:column>
            <p:commandButton value="click" onclick="textVar_#{rowIndex}.getJQ().show();"/>
        </p:column>
        <p:column>
            <p:inputText styleClass="som_#{rowIndex}" widgetVar="textVar_#{rowIndex}" style="display:none"/>
        </p:column>
    </p:dataTable>                                  
</h:form> 
```

在深入研究了 primefaces 的 js 源之后，我才知道like中没有`show`方法。所以你需要从后面提取jQuery对象，可以通过or来完成。这两个被定义为：`PrimeFaces.widget.InputText``PrimeFaces.widget.Dialog``widgetVar``widgetVar.getJQ()``widgetVar.jq``PrimeFaces.widget.BaseWidget`

```
PrimeFaces.widget.BaseWidget = Class.extend({

    init: function(cfg) {
        this.cfg = cfg;
        this.id = cfg.id;
        this.jqId = PrimeFaces.escapeClientId(this.id),
        this.jq = $(this.jqId);

        //remove script tag
        $(this.jqId + '_s').remove();
    },

    //used mostly in ajax updates, reloads the widget configuration
    refresh: function(cfg) {
        return this.init(cfg);
    },

    //returns jquery object representing the main dom element related to the widget
    getJQ: function(){
        return this.jq;
    }

}); 
```

我已经删除了我之前的评论，因为它是错误的。`widgetVar`确实支持el。希望它会有所帮助。

# php - 使用 jQuery 和 Ajax 制作通知系统

> ID：15320270
> 
> 赞同：0
> 
> 时间：2013-03-10T08:15:08.720
> 
> 标签：php, jquery, ajax, json, setinterval

我需要构建一个基于 jQuery 和 Ajax 的通知系统，我整理了一些 PHP 代码来显示 JSON，如下所示：

```
{ "msg_new": "1", "note_new": "2", "frd_new": "2", "frd_link": "" } 
```

如何`<span></span>`使用 jQuery 和 将此“通知”加载到标签中`setInterval`？我有点困惑，有人可以帮帮我吗？

**编辑**

目前，这是我尝试使用的代码，但它似乎不起作用：

```
<span id="new_msgs"></span>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    function get_new() {
        $.getJSON("update_new.php", function(data) {
            $('#new_msgs').html(data["msg_new"]);
        });
    }

    setInterval(get_new, 1000);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:31:39.213

给你一个例子：

HTML：

```
<span id="result">
  <span id="note"></span>
</span> 
```

JavaScript：

```
function loadIt() {
  $.get('ajax/test.php', function(data) {
    var jdata = JSON.parse(data);
    $('#result #note').html(jdata.note);
    ...
  });
}
setInterval(loadIt, 1000); 
```

这显示了如果您的变量，复制粘贴并更改其余部分，如何进行山丘当然 test.php 返回您的 json，而 1000 是 1 秒（以毫秒为单位）。

# uiactionsheet - 使用 UIActionSheet 播放、暂停、停止音乐

> ID：15320272
> 
> 赞同：0
> 
> 时间：2013-03-10T08:15:22.880
> 
> 标签：uiactionsheet, audio-player

我是 Xcode 的新手，我需要一些掌握 xcode 的经验。我正在尝试使用 UIActionSheet 播放、暂停、停止音乐，但是当我点击暂停和停止按钮时，它们不会停止甚至暂停，只有播放按钮有效。有人可以帮我吗？这是我的代码。

```
 #import <AVFoundation/AVFoundation.h>
 @interface MainViewController () <UIActionSheetDelegate,AVAudioPlayerDelegate>
 @property(nonatomic,retain)AVAudioPlayer *playAudio;
 @end

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *buttonTitle =[actionSheet buttonTitleAtIndex:buttonIndex];
    NSURL *url =[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/MusicName.mp3",[[NSBundle mainBundle] resourcePath]]];
    NSError *error;

    self.playAudio=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];

    if (buttonIndex==0) {

        [self.playAudio play];

    }
    if ([buttonTitle isEqualToString:@"Pause"]) {

        [self.playAudio pause];
    }
    if (buttonIndex==2) {
        [self.playAudio stop];
    }
}
- (IBAction)Music:(id)sender {

    UIActionSheet *musicSheet =[[UIActionSheet alloc]initWithTitle:@"Choose" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Play",@"Pause",@"Stop", nil];
    [musicSheet showInView:self.view];

} 
```

. 我是越南人，所以我的英语技能会让你很难理解我说的话。感谢您的时间 。我期待看到你的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:24:55.453

首先：你不应该依赖按钮标题。使用按钮索引来识别按下了哪个按钮，这就是它的用途。

第二：你确定你的按钮索引是对的吗？您可以尝试使用 switch 语句。

如 ：

```
switch (buttonIndex) {
        case 0:
            [self.playAudio play];
            break;
        case 1:
            [self.playAudio pause];
            break;
        case 2:
            [self.playAudio stop];
            break;
        default:
            break;
} 
```

# nosql - 创建键空间时出现 TTransportException

> ID：15320274
> 
> 赞同：0
> 
> 时间：2013-03-10T08:15:38.077
> 
> 标签：nosql, cassandra

我`cassandra-cli -h localhost`用来创建键空间。

我试过这个命令：`create keyspace reddit with strategy_options = [{replication_factor:1}];`和这个：`create keyspace reddit with strategy_options = {replication_factor:1};`，但我得到的是这个：

```
org.apache.thrift.transport.TTransportException 
```

我在 ArchLinux（由 AUR 构建）上尝试了 Cassandra 1.1.6 和 1.2.2。（我正在运行 Cassandra `systemctl start cassandra`）。

另外，当我尝试`use reddit;` **在**创建键空间之前它返回时`Keyspace 'reddit' not found.`，但**在**尝试创建键空间之后它返回`Login failure. Did you specify 'keyspace', 'username' and 'password'?`。

**编辑：**忘了提，但`create keyspace test;`效果很好，但是当我使用 replication_factor 创建键空间时，它会引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:48:01.787

通过使用此查询解决：

```
create keyspace reddit with placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy' and strategy_options = [{replication_factor:1}]; 
```

我通过阅读 /var/log/cassandra/system.log 来到这里：

```
CustomTThreadPoolServer.java (line 217) Error occurred during processing of message.
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
        at org.apache.cassandra.locator.AbstractReplicationStrategy.createReplicationStrategy(AbstractReplicationStrategy.java:230)
        at org.apache.cassandra.thrift.CassandraServer.system_add_keyspace(CassandraServer.java:1342)
        at org.apache.cassandra.thrift.Cassandra$Processor$system_add_keyspace.getResult(Cassandra.java:3960)
        at org.apache.cassandra.thrift.Cassandra$Processor$system_add_keyspace.getResult(Cassandra.java:3948)
        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:32)
        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:34)
        at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:199)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at org.apache.cassandra.locator.AbstractReplicationStrategy.createReplicationStrategy(AbstractReplicationStrategy.java:226)
        ... 9 more
Caused by: org.apache.cassandra.exceptions.ConfigurationException: replication_factor is an option for SimpleStrategy, not NetworkTopologyStrategy
        at org.apache.cassandra.locator.NetworkTopologyStrategy.<init>(NetworkTopologyStrategy.java:66)
        ... 14 more 
```

# web-services - 在 WP7 中使用 NetSuite 服务，CookieContainer 不工作

> ID：15320279
> 
> 赞同：2
> 
> 时间：2013-03-10T08:15:58.483
> 
> 标签：web-services, windows-phone-7, cookies, soap, netsuite

我在我的 WP7 项目中使用 NetSuite 网络服务。

这是我使用的链接（较新版本）： [https ://webservices.na1.netsuite.com/wsdl/v2012_1_0/netsuite.wsdl](https://webservices.na1.netsuite.com/wsdl/v2012_1_0/netsuite.wsdl)

这在我的 C# 控制台应用程序中运行良好，但在 WP7 中却不行。

在 WP7 中，它成功登录，但是在添加任何内容（员工、客户、时间表……）时，我收到以下错误：

```
"Your connection has timed out.  Please log in again" 
```

更新：

这是我的控制台代码：

```
 NetSuiteService service = new NetSuiteService();

    service.CookieContainer = new CookieContainer();

    Passport passport = new Passport();
    passport.account = "TSTDRVxxxxxx";
    passport.email = "hamzeh.soboh@para-solutions.com";

    RecordRef role = new RecordRef();
    role.internalId = "3";
    passport.role = role;

    passport.password = "passxxxx";
    Status status = service.login(passport).status; 
```

以下是我的 WP7 代码：

```
 NetSuitePortTypeClient service = new NetSuitePortTypeClient();

    // service.CookieContainer = new CookieContainer();

    Passport passport = new Passport();
    passport.account = "TSTDRVxxxxxx";
    passport.email = "hamzeh.soboh@para-solutions.com";

    RecordRef role = new RecordRef();
    role.internalId = "3";
    passport.role = role;

    passport.password = "passxxxx";
    service.loginAsync(passport); 
```

取消注释第二条语句会导致运行时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-05T01:17:28.663

尝试不使用 cookie，如下所示：

```
 // Instantiate the NetSuite web services
        netSuiteService = new DataCenterAwareNetSuiteService(*yourAccountNumber*);
        netSuiteService.Timeout = 1000 * 60 * 60;

        var appInfo = new ApplicationInfo();
        //App info from application netsuite
        appInfo.applicationId = *yourApplicationId*;

        // Prepare login credentials for request level login
        netSuiteService.passport = new Passport()
        {
            email = yourEmail*,
            password = *yourPassword*,
            account = *yourAccountNumber*
        };

        netSuiteService.applicationInfo = appInfo;

        Prefs = new Preferences();
        netSuiteService.preferences = Prefs;
        SearchPreferences = new SearchPreferences();
        netSuiteService.searchPreferences = SearchPreferences;
        Prefs.warningAsErrorSpecified = true;
        Prefs.warningAsError = false; 
        SearchPreferences.bodyFieldsOnly = false; 
```

# wpf - 在 DataTemplate 中使用 MVVM Light EventToCommand

> ID：15320280
> 
> 赞同：2
> 
> 时间：2013-03-10T08:16:26.237
> 
> 标签：wpf, mvvm-light, eventtocommand

所以我有一个 WPF 用户控件：

```
<UserControl x:Class="BI_Builder.Views.ObjectTreeView"
             x:Name="UC1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:BI_Builder"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                 xmlns:viewModels="clr-namespace:BI_Builder.ViewModels"
             xmlns:command="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" DataContext="{Binding}">

    <UserControl.Resources>
        <ContentControl x:Key="Context" Content="{Binding}" />

        <DataTemplate x:Key="DataSourceTemplate">
            <TextBlock Text="{Binding Path=Name}" >
     <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <command:EventToCommand Command="{Binding Path=DataContext.OpenCommand, Mode=OneWay,ElementName=UC1}"                />
                </i:EventTrigger>
            </i:Interaction.Triggers>
               </TextBlock>
        </DataTemplate>

        <HierarchicalDataTemplate x:Key="ItemTemplate"
                                          ItemsSource="{Binding Children}"
                                          ItemTemplate="{StaticResource DataSourceTemplate}">
            <StackPanel>
                <TextBlock Text="{Binding Header}">
                </TextBlock>
            </StackPanel>
        </HierarchicalDataTemplate> 
    </UserControl.Resources>

    <Grid>
        <TreeView Name="TreeView" ItemsSource="{Binding Items}" ItemTemplate="{StaticResource ItemTemplate}" >
        </TreeView>
    </Grid>
</UserControl> 
```

这是用户控件的主视图模型：

```
public class ObjectTreeViewModel : ObservableObject       {

        public  ObservableCollection<ItemViewModel> Items  {
            get {
                if (_items != null) return _items;
                _items =  new ObservableCollection<ItemViewModel>();
                _items.Add(DataSources);
                return _items;

            }
            set { _items = value;
            }
        }

        public ItemViewModel DataSources {
            get { return _dataSources ?? (_dataSources = new ItemViewModel() { Header = "Data Sources", Children = new ObservableCollection<object>(DataSourceList) }); }
            set { _dataSources = value; }
        }

        public List<DataSource> DataSourceList;

        public ICommand OpenCommand    {
            get { if (_openCommand == null) { return _openCommand = new RelayCommand(OpenDataSource); } return _openCommand; }

        }

        private void OpenDataSource()           {
            MessageBox.Show("Test");
        }

        public ObjectTreeViewModel()      {
             DataSourceList = new List<DataSource>();
                DataSourceList.Add(new DataSource() { Name = "Test" });
        }

        private ItemViewModel _dataSources;
        private ObservableCollection<ItemViewModel> _items;
        private RelayCommand _openCommand;
    }
} 
```

我已经尝试了我在网络上遇到的所有方法来触发 DataSourceTemplate DataTemplate 中的 EventToCommand。事实上，我很确定它知道 OpenCommand 在哪里，因为如果我将路径更改为 gobbledygook，输出窗口会抛出一个错误，提示“ObjectTreeView”（这是绑定到UserControl) 没有 gobbledygook 属性。所以我想我已经正确设置了 DataContext ...

但是每当我点击文本块时......什么都没有。

真的试图避免代码隐藏（感觉不对）和完全披露，我使用的是 MVVM Light 的 EventToCommand 但不是完整的工具包，尽管我很想重写我到目前为止的内容以查看是否使用服务定位器将解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T08:21:47.690

该`TextBlock`控件**没有`Click`事件**。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx)。

您应该改用该[`MouseLeftButtonDown`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttondown.aspx)事件：

```
<i:EventTrigger EventName="MouseLeftButtonDown">
   <!-- ... -->
</i:EventTrigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:07:31.923

你可以在你的文本块中放置一个超链接并将命令绑​​定到超链接吗？请注意，如果需要，您可以将超链接设置为看起来像纯文本块。

```
<TextBlock>
     <Hyperlink Command="{Binding Path=DataContext.OpenCommand" Text="{Binding Path=Name}" />
</TextBlock> 
```

还要确保 ObjectTreeView 类被实例化并加载到用户控件的 DataContext 中。

# php - chr( ) UTF-8 编码问题

> ID：15320281
> 
> 赞同：0
> 
> 时间：2013-03-10T08:16:31.077
> 
> 标签：php, utf-8, character-encoding

我所有的东西都用 utf-8 编码。所有非 ascii 字符都可以正常工作，但是当我使用 php 的 chr() 函数时会出现问题。

该行工作正常（带有±字符）

```
echo '<a class="page_contents_right_cat" href="/page-contents/">Top ±300</a>'; 
```

但它没有，并且显示出无法识别的字符。

```
echo '<a class="page_contents_right_cat" href="/page-contents/">Top '. chr(241) .'300</a>'; 
```

如何解决这个问题？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:26:03.100

来自 chr 的手册页：

```
Returns a one-character string containing the character specified by ascii. 
```

从[该页面上的评论中](http://www.php.net/manual/en/function.chr.php#88611)：

```
<?php
/**
 * Return unicode char by its code
 *
 * @param int $u
 * @return char
 */
function unichr($u) {
    return mb_convert_encoding('&#' . intval($u) . ';', 'UTF-8', 'HTML-ENTITIES');
}
?> 
```

在任何地方提问之前，您确实应该查看手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T08:21:51.527

使用等效的 HTML 实体，即`&#177;`或`&plusmn;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T07:01:01.647

您需要使用 UTF-8 字符代码而不是 241。

对于 ± 使用代码 177： [http ://unicode-table.com/ru/#00B1](http://unicode-table.com/ru/#00B1)

并将其转换为多字节。

摘要将如下所示：

```
mb_convert_encoding(chr(177),'UTF-8') 
```

# windows-phone-7 - 视窗电话 | 基于帧的动画和内存占用

> ID：15320283
> 
> 赞同：0
> 
> 时间：2013-03-10T08:17:13.877
> 
> 标签：windows-phone-7, animation, silverlight-4.0

我正在为 Windows Phone 开发一个基于 Silverlight 动画的小游戏。一些动画使用 Silverlight 动画框架，如 Trandforms API，一些动画是基于帧的。我正在做的是，我正在运行一个持续时间非常短的故事板，当它完成的事件触发时，我正在那里更改图像框架。因此，每次触发完成的事件时，图像都会被替换。但我认为这会导致我的游戏出现内存泄漏，并且内存占用会随着时间的推移而增加。

1.  我想问这是做帧基础动画的正确方法还是在silverlight中有更好的方法？
2.  我可以做些什么来减少内存消耗，使其不随时间增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:12:05.120

作为一般规则，请注意动画任何无法 GPU 加速或位图缓存的内容。您没有提供足够的信息来判断这是否是您的问题，但首先要监控帧速率计数器、重绘区域和缓存可视化。

您可以使用内置的分析工具检测内存泄漏。
请参阅调试 > 启动 Windows Phone 应用程序分析

# c - 在 c 中制作文件需要帮助

> ID：15320284
> 
> 赞同：0
> 
> 时间：2013-03-10T08:17:20.917
> 
> 标签：c

我有一个关于在 c 中制作文件的快速问题。生成make文件时是否可以有多个目标？我正在生成代码，我只是想知道这是否可能。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T08:51:27.267

[此处](http://mrbook.org/tutorials/make/)对 makefile 的介绍 在该页面的示例中：

```
all: hello

hello: main.o factorial.o hello.o
    g++ main.o factorial.o hello.o -o hello

main.o: main.cpp
    g++ -c main.cpp

factorial.o: factorial.cpp
    g++ -c factorial.cpp

hello.o: hello.cpp
    g++ -c hello.cpp

clean:
    rm -rf *o hello 
```

all, hello, clean 都是不同的目标，所以可以输入`make all`，`make clean`等等。

# scala - 为什么一些 Scala 方法使用多态参数而不是使用 Any/Nothing？

> ID：15320287
> 
> 赞同：7
> 
> 时间：2013-03-10T08:17:40.187
> 
> 标签：scala, polymorphism, any, nothing

例如，[`Exception.allCatch`](http://www.scala-lang.org/api/current/index.html#scala.util.control.Exception%24)定义为

```
def allCatch[T]: Catch[T] 
```

为什么不只是

```
val allCatch: Catch[Nothing] 
```

它的论点何时`Catch`是协变的？

或者，为什么[`PartialFunction`](http://www.scala-lang.org/api/current/index.html#scala.PartialFunction%24)对象定义

```
def empty[A, B]: PartialFunction[A, B] 
```

而不仅仅是

```
val empty: PartialFunction[Any,Nothing] 
```

?

**更新：**到目前为止，答案似乎没有抓住重点。因此，请在您的答案中包含一个真正针对该问题的具体示例。例如：显示一段可以`def empty[A, B]: PartialFunction[A, B]`与`val empty: PartialFunction[Any,Nothing]`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:50:27.360

`PartialFunction` [查看available here](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/PartialFunction.scala#L1)的来源，我们可以看到它实际上调用了`PartialFunction`对象的私有方法：

`private[this] val empty_pf: PartialFunction[Any, Nothing]`

所以空的返回类型将永远是`PartialFunction[Any, Nothing]`。至于背后的原因我不知道。也许其他人对原因有更好的了解。您也可以尝试语言邮件列表...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:29:46.537

如果对类型进行硬编码，例如`PartialFunction[Any,Nothing]`，则不能限制函数采用比 . 更具体的参数`Any`。

通过使用泛型类型参数，您最终可以更灵活地满足所有情况，尤其是使函数安全。

假设您想要一个函数，其目标是采用`Animal`as 参数并返回`Integer`.

让我们假设函数被声明为：

```
def myFunction: PartialFunction[Any,Nothing] 
```

首先， PartialFunction 不会专门用于`Animal`参数端，而是专门用于`Any`. 如果我传递一个`Human`as 参数怎么办......，它会通过.. 安全呢？

其次，如果这个函数被声明为返回`Nothing`，你不能从它返回任何值，但是`Nothing`！事实上，`Nothing`它是 Scala 中所有类的子类。这导致了一个已知规则，即返回类型参数必须始终是协变的，以使函数有趣，而不是`Nothing`.

事实上，只有`Nothing`在处理`empty`. `PartialFunction`逻辑，因为根据定义，空`PartialFunction`不涉及任何返回，应该被迫这样做:)

你会问：“那我们为什么不把返回类型改成`Any`呢？” 答：因为您将失去通用擦除时间的所有好处，使编译器自动添加所需的强制转换=>您不会直接检索 Integer 值，而是 Any。恼人的..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T11:37:47.347

这节省了稍后进行强制转换的需要，并允许将 args 类型视为 T 而不是 Any，这通常更方便。

这是一个例子：

```
scala> def func1[T](arg : T) : T = { arg }
func1: [T](arg : T)T

scala> def func2(arg : Any) : Any = { arg }
func2: (arg: Any)Any

scala> func1(4)
res4: Int = 4

scala> func2(4)
res7: Any = 4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T22:44:42.823

实际上，似乎 Scala 标准库有更多的地方泛型类型参数是多余的（因为类型差异）。例如，请参阅我[关于](https://stackoverflow.com/questions/14094477/whats-the-point-of-generic-type-in-foreach)`foreach`. 根据@Peter 的回答，我的猜测是这些冗余的泛型使界面更加清晰。多亏了他们，我们不必记住哪些类型是协变的、逆变的和不变的。此外，对于不熟悉方差的人来说，这让事情变得更简单，这是 Scala 的一个高级特性。

# ruby-on-rails - 当文本“资产”显示在您的 RoR 网站上时，这是什么意思？

> ID：15320289
> 
> 赞同：0
> 
> 时间：2013-03-10T08:17:57.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图在我的 Ruby on Rails 网站上实现一个评论系统。我基本上遵循了这个线程中的这些准则：[Micropost's comments on users page (Ruby on Rails)](https://stackoverflow.com/questions/9669221/microposts-comments-on-users-page-ruby-on-rails)

但是，当我发布评论时，评论不会显示，并且每个评论框的顶部都会显示文本“资产”。这是从哪里来的？

使用代码更新：我正在使用三个模型来尝试使评论正常工作，如上面的链接所示

用户.rb

```
class User < ActiveRecord::Base
has_many :microposts, dependent: :destroy
  has_many :comments 
```

微博.rb

```
 class Micropost < ActiveRecord::Base
  attr_accessible :content, :image, :comment_content
  belongs_to :user
  has_many :comments, dependent: :destroy
  validates :user_id, presence: true
  validates :content, presence: true

  default_scope order: 'microposts.created_at DESC'

  def self.from_users_followed_by(user)
    followed_user_ids = "SELECT followed_id FROM relationships
                         WHERE follower_id = :user_id"
    where("user_id IN (#{followed_user_ids}) OR user_id = :user_id", 
          user_id: user.id)
  end
end 
```

评论.rb

```
class Comment < ActiveRecord::Base
  attr_accessible :comment_content

  belongs_to :user
  belongs_to :micropost

  validates :comment_content, presence: true
  validates :user_id, presence: true
  validates :micropost_id, presence: true  
end 
```

评论控制器

```
class CommentsController < ApplicationController
     def create
    @micropost = Micropost.find(params[:micropost_id])
    @comment = Comment.new(params[:comment])
    @comment.micropost = @micropost
    @comment.user = current_user
    if @comment.save
       redirect_to(:back)
    else
      render 'shared/_comment_form'
    end
  end
end 
```

微柱控制器

```
class MicropostsController < ApplicationController
  before_filter :signed_in_user
  before_filter :correct_user, only: :destroy

    def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Posted"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end

  def destroy
    @micropost.destroy
    redirect_to root_path
  end

  private

    def correct_user
      @micropost = current_user.microposts.find_by_id(params[:id])
      redirect_to root_path if @micropost.nil?
    end
end 
```

用户控制器

```
def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
    @comment = Comment.new
  end 
```

意见表

```
<%= form_for([micropost, @comment]) do |f| %> 
```

路线.rb

```
resources :microposts do
  resources :comments
end 
```

微博视图

```
<li>
  <span class="content"><%= simple_format(micropost.content) %></span>
  <%= image_tag micropost.image_url(:thumb).to_s %><br>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
 <%= render 'shared/comment_form', micropost: micropost %>
 <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method: :delete,
                                     confirm: "You sure?",
                                     title: micropost.content %><br>

  <% end %>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:48:21.640

也许您在其中一个部分或表单控件中有一些静态信息，可以为评论呈现您的文本区域？

检查您的控制器视图，或者它可能位于`'static_pages/home'`

编辑：只需在您的项目中完整搜索文本资产，也许您会找到图像的图像 alt="assets" 标记并且图像不可用。

# ibm-mq - MQMessage deos 不发送整个消息

> ID：15320291
> 
> 赞同：2
> 
> 时间：2013-03-10T08:18:15.283
> 
> 标签：ibm-mq, mq

我对 MQMessage 代理相当陌生。在我的项目中，我想发送一条 xml 消息。一切都很好，但是当消息大于 500 字节时，我的代码会将损坏的消息发送到队列。我正在做的是

```
//queueManager has been initialized in the class constructor and connected to a channel.
        public MQResponse WriteMsg(string QueueName, string strInputMsg)
        {
            MQResponse response = new MQResponse();
            try
            {
                queue = queueManager.AccessQueue(QueueName,
                    MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING );

                queueMessage = new MQMessage();
                queueMessage.DataOffset = 0;
                //queueMessage.MessageLength = 2000000;
                queueMessage.ResizeBuffer(6 * strInputMsg.Length);
                queueMessage.WriteString(strInputMsg);
                queueMessage.Format = MQC.MQFMT_STRING;

                queuePutMessageOptions = new MQPutMessageOptions();
                queue.Put(queueMessage, queuePutMessageOptions);
                response.Message = "Message sent to the queue successfully";
                response.Status=MQResponseStatus.WriteSuccessful;
            }
            catch (MQException MQexp)
            {
                response.Message = "Exception: " + MQexp.Message;
                response.Status=MQResponseStatus.WriteFail;
                response.CatchedException=MQexp;
            }
            catch (Exception exp)
            {
                response.Message = "Exception: " + exp.Message;
                response.Status=MQResponseStatus.WriteFail;
                response.CatchedException=exp;
            }
            return response;
        }
```

我猜 queueMessage 应该正确初始化，以便我们能够发送整个消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:18:32.567

首先，您如何确定消息已损坏？您是否尝试接收发送的消息并与原始消息进行比较，或者您使用 MQExplorer 或其他方式查看了该消息。MQExplorer 默认显示消息的前 1000 个字节。要查看更多内容，您需要更改面板中的`Max data bytes displayed`设置。`Window/Preferences/Messages`

WebSphere MQ 可以处理大小高达 100 MB 的消息。

关于上面的代码片段：几行代码足以构建和发送消息。

```
 queueMessage = new MQMessage();
            queueMessage.Format = MQC.MQFMT_STRING; 
            queueMessage.WriteString(strInputMsg);
            queuePutMessageOptions = new MQPutMessageOptions();
            queue.Put(queueMessage, queuePutMessageOptions); 
```

# c# - 没有 try/catch ASP.NET Response.Redirect() 不起作用

> ID：15320294
> 
> 赞同：1
> 
> 时间：2013-03-10T08:18:23.493
> 
> 标签：c#, asp.net, multithreading, exception, response.redirect

我有一个麻烦，我之前没有用`ASP.NET`. 我无法使用该方法重定向到某个位置`Response.Redirect()`

我已经阅读了其他主题，并且可能会告诉您，我到底尝试了什么：

*   我不使用`Response.Redirect()`in`try/catch`块，这可能会导致`ThreadAbortException`（但如果您尝试忽略此异常 - 您必须被重定向，即使在这种情况下我也无法重定向）
*   我尝试使用`Boolean`values ，在方法末尾使用它们作为标志`Page_Load()`来进行重定向
*   我什至尝试将 JS 调用与`location`属性一起使用，但 ASP.NET 忽略了它......正如我所见，我可以调用 JS 中的任何函数，它将被忽略
*   试图设置为`false`方法的第二个参数的值`Response.Redirect()`

我将粘贴`ONLY`其中一个变体，因为我在写上部时尝试了不同的方法，但没有成功。

代码：http: [//ideone.com/Y8Fwpt](http://ideone.com/Y8Fwpt)

即使`58th`有`ThreadAbortException`. 在线调用 JS 场景`62nd`- 也会忽略。

即使我删除`try/catch block`- 什么都不会改变。

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:35:49.283

如果我删除了`onclick()`您在登录表单上的内容，我可以使重定向工作 - 我认为您的查询字符串没有正确出现，所以您最终只是快速刷新页面。所以，我会提出两个建议：

**一**，删除所有你想要做的脚本和 Ajax 东西，首先让它与正常的回发一起工作——然后你可以回去尝试异步的东西。

**第二**，我不会在这一点上创建您自己的 cookie - MySQLConnector 库具有`Membership`和`Role`您可以使用的提供程序，它们用于连接到 MySQL 数据库。

简而言之，我在开发时所坚持的成语是“做最简单的有效的事情”，在这种情况下，它只是“经典”的 ASP.NET 回发......

HTH。

# wolfram-mathematica - 用第三个变量扩展 ListPointPlot3D？

> ID：15320296
> 
> 赞同：0
> 
> 时间：2013-03-10T08:18:41.690
> 
> 标签：wolfram-mathematica

我正在尝试扩展这样的功能：（4x4 正方形）

```
ListPointPlot3D[Table[{x, y, 0}, {x, 0, 4, 1}, {y, 0, 4, 1}]] 
```

变成这样的东西：（一个 4x4x4 立方体）

```
ListPointPlot3D[Table[{x, y, z}, {x, 0, 4, 1}, {y, 0, 4, 1}, {z, 0, 4, 1}]] 
```

通过添加第三维。

但是，后者的尺寸似乎不正确。它似乎形成了一个 3d 点的 2x2 矩阵，而不是一个列表。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:01:36.817

如果你再仔细看一下，你会看到这个表达式

```
Table[{x, y, z}, {x, 0, 4, 1}, {y, 0, 4, 1}, {z, 0, 4, 1}] 
```

返回一个带有`5x5x5`三元组的结构。这正是表达式应该返回的内容。如果将`Dimensions[]`函数应用于返回的结构，您可以看到这一点。

有几种方法可以将表格变成125个三元组的列表，一种是这样`Flatten`使用

```
Flatten[Table[{x, y, z}, {x, 0, 4, 1}, {y, 0, 4, 1}, {z, 0, 4, 1}], 2] 
```

或者您可以直接生成您的三胞胎列表；对于您的示例，一种替代方法是

```
Tuples[Range[0, 4], 3] 
```

# c - cp中的二维数组

> ID：15320302
> 
> 赞同：0
> 
> 时间：2013-03-10T08:19:59.510
> 
> 标签：c

```
#include<stdio.h>
int main(){
 int i=0,j=0;
 char a[5][2];
 for(i=0;i<5;i++){
  for(j=0;j<2;j++){
   scanf("%c",&a[i][j]);
  }
 }
 for(i=0;i<5;i++){
  for(j=0;j<2;j++){
   printf("\n %c \n",a[i][j]);
   printf("\t");
  }
  printf("\n");
 }
 return 0;
} 
```

i/p：一个 gu sd ec

我没有输出。

我在二维数组上尝试了一个简单的程序。我无法获得输出并且输入不占用 5*2 个字符，而是只占用 4*2 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:24:22.780

粘贴我的代码，在 %c 前留一个空格。

```
 #include<stdio.h>
    int main(){
     int i=0,j=0;
     char a[5][2];
     for(i=0;i<5;i++){
      for(j=0;j<2;j++){
       scanf(" %c",&a[i][j]);
      }
     }
     for(i=0;i<5;i++){
      for(j=0;j<2;j++){
       printf("\n %c \n",a[i][j]);
       printf("\t");
      }
      printf("\n");
     }
     return 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:27:05.740

在您的输入空间也被视为字符，因为在您看来，只有 4*2 输入被采用。输入没有空格，您将能够输入 5*2 字符。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-10T08:25:53.760

原因是您在 scanf("%c") 中使用的数据类型。

由于 Table、NewLine、Space 都是可用的字符。因此，如果您插入类似以下内容：

```
 a \n 
```

a[0][0] 将是“a”，a[0][1] 将是“\n”。

如果你使用下面的代码来测试，这个结论可以得到验证：

```
#include<stdio.h>                                                                                                                           
int main(){
  int i=0,j=0;
  int a[5][2];
  for(i=0;i<5;i++){
    for(j=0;j<2;j++){
      printf("i=%d,j=%d:\n",i,j);
      scanf("%d",&a[i][j]);
    }
  }
  for(i=0;i<5;i++){
    for(j=0;j<2;j++){
      printf("\n %d \n",a[i][j]);
      printf("\t");
    }
    printf("\n");
  }
  return 0;
} 
```

# node.js - ClientJade - 执行 jam.render() 时遇到问题

> ID：15320306
> 
> 赞同：1
> 
> 时间：2013-03-10T08:20:36.530
> 
> 标签：node.js, pug

我在我正在开发的 Node.js 应用程序的客户端代码中遇到了问题。
这背后的想法是在套接字接收到事件时立即更新浏览器。

这是客户端的脚本块：

```
script(src='/scripts/jadeTemplate.js')
script(src='/socket.io/socket.io.js')
script(type='text/javascript')
  var socket = io.connect();
  socket.on('obj', function(obj) {
    var newsItem = document.createElement("item");
    jade.render(newsItem, 'objTemplate', { object: obj });
    $('#newsfeed').prepend(newsItem);
    alert(obj);
  }); 
```

当`alert()`放置在 之前时`jade.render()`，它会发出警报，但如果插入之后，它不会执行（因此，我认为这是 的问题`jade.render()`）。

这是 objTemplate.jade，在第 7 行中提到：

```
p #{object}
// That's it. 
```

这是来自 app.js 的相关片段：

```
var server = dgram.createSocket('udp4');
server.bind(41234);
server.on('message', function(buf, rinfo) {
    isOnline = true;
    var message = buf.toString();
    io.sockets.emit('obj', message);
}); 
```

* * *

更新：

[这是指向 的链接](http://pastebin.com/h8CwqFgD)，`/public/scripts/jadeTemplate.js`IMO 对于问题来说太长了。

如果我需要提供更多片段或文件，请告诉我。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:10:54.990

您的模板不需要属性`object`，它需要**`obj`**. 试试这个：

```
socket.on('obj', function(obj) {
    var newsItem = document.createElement("item");
    jade.render(newsItem, 'objTemplate', { obj: obj }); // changed object to obj
    $('#newsfeed').prepend(newsItem);
    alert(obj);
}); 
```

[http://jsfiddle.net/trevordixon/VeYBY/](http://jsfiddle.net/trevordixon/VeYBY/)显示它工作。如果您将属性改回`object`，您将在控制台中收到一个 javascript 错误。

# php - 致命错误：调用未定义的函数聚合（）

> ID：15320309
> 
> 赞同：0
> 
> 时间：2013-03-10T08:20:45.707
> 
> 标签：php, mongodb, aggregation-framework

我将 mongo 放在我的 Mac 上，使用 mongo.so 复制 5.2 和 5.4 mongoCollection 没有聚合方法！！！！我在我的aws上测试了相同的php并且在那里工作

我试过了`var_dump(get_class_methods('MongoCollection'))`；在我的本地：

```
array (size=24)
0 => string '__construct' (length=11)
1 => string '__toString' (length=10)
2 => string '__get' (length=5)
3 => string 'getName' (length=7)
4 => string 'getSlaveOkay' (length=12)
5 => string 'setSlaveOkay' (length=12)
6 => string 'drop' (length=4)
7 => string 'validate' (length=8)
8 => string 'insert' (length=6)
9 => string 'batchInsert' (length=11)
10 => string 'update' (length=6)
11 => string 'remove' (length=6)
12 => string 'find' (length=4)
13 => string 'findOne' (length=7)
14 => string 'ensureIndex' (length=11)
15 => string 'deleteIndex' (length=11)
16 => string 'deleteIndexes' (length=13)
17 => string 'getIndexInfo' (length=12)
18 => string 'count' (length=5)
19 => string 'save' (length=4)
20 => string 'createDBRef' (length=11)
21 => string 'getDBRef' (length=8)
22 => string 'group' (length=5)
23 => string 'distinct' (length=8)` 
```

在 aws 上：

`array(28) { [0]=> string(11) "__construct" [1]=> string(10) "__toString" [2]=> string(5) "__get" [3]=> string(7) "getName" [4]=> string(12) "getSlaveOkay" [5]=> string(12) "setSlaveOkay" [6]=> string(17) "getReadPreference" [7]=> string(17) "setReadPreference" [8]=> string(4) "drop" [9]=> string(8) "validate" [10]=> string(6) "insert" [11]=> string(11) "batchInsert" [12]=> string(6) "update" [13]=> string(6) "remove" [14]=> string(4) "find" [15]=> string(7) "findOne" [16]=> string(13) "findAndModify" [17]=> string(11) "ensureIndex" [18]=> string(11) "deleteIndex" [19]=> string(13) "deleteIndexes" [20]=> string(12) "getIndexInfo" [21]=> string(5) "count" [22]=> string(4) "save" [23]=> string(11) "createDBRef" [24]=> string(8) "getDBRef" [25]=> string(5) "group" [26]=> string(8) "distinct" [27]=> string(9) "aggregate" }`

当我在终端（本地）上使用聚合时，它可以工作

看起来很奇怪，任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:25:15.680

[MongoCollection::aggregate (PECL mongo >=1.3.0)](http://php.net/manual/en/mongocollection.aggregate.php)

因此 - 您在 aws 上使用 >= 1.3.0 的驱动程序版本，在您的 mac 上使用 < 1.3.0。

请注意，[聚合是在 monogoDB 2.2 版中引入的](http://docs.mongodb.org/manual/aggregation/)

# perl - 如何从perl中的多个模式匹配中获取许多匹配的模式

> ID：15320312
> 
> 赞同：0
> 
> 时间：2013-03-10T08:20:53.087
> 
> 标签：perl, pattern-matching

有没有办法从“许多'|'中获得多匹配模式 正则表达式”匹配。

这是我的代码，

```
#! /usr/bin/perl
@matches = qw(google intel hp qualcomm app);

$keyword = join('|', @matches);

$string = "hello google app";

@founded = ($string =~ /($keyword)/);

print "Founded keyword is:" . join(" ", @founded); 
```

我希望得到'google and app'，因为这个关键字都在字符串中匹配。但是多么可悲，只是得到“谷歌”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:28:14.630

我认为您正在寻找两个列表的交集：

```
use Array::Utils qw(:all);

my @matches = qw(google intel hp qualcomm app);
my @find = qw(hello google app);

my @result = intersect(@matches, @find);
print "Founded keyword(s): ", join(" ", @result) . "\n"; 
```

此解决方案使用[Array::Utils](http://search.cpan.org/perldoc?Array%3a%3aUtils)模块

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T08:24:25.587

只需在匹配中添加一个[`/g`修饰符：](http://perldoc.perl.org/perlre.html#Modifiers)

```
@found = ($string =~ /($keyword)/g); 
```

你会这样得到所有的比赛。

# java - XYSeries.add(x,y) 方法上的 aChartEngine NullPointerException

> ID：15320321
> 
> 赞同：0
> 
> 时间：2013-03-10T08:22:44.923
> 
> 标签：java, android, achartengine

嗨，我正在尝试实现 aChartEngine 库，当我在代码中添加值时（就像在[JavaCodeGeeks](http://www.javacodegeeks.com/2012/12/achartengine-a-charting-library-for-android-applications.html)的本教程中一样）它工作得很好，但是如果我使用一个函数，应用程序会崩溃并给出`NullPointerException`mCurrentSeries.add(x, y)。当我调试以查看问题时 mCurrentSeries.add(x,y) 重复两次（在同一个周期中）然后崩溃。

这是课

```
package com.example.achartengine;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.model.XYSeries;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;

import com.towel.math.Expression;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;

public class MainActivity extends Activity {

    private GraphicalView mChart;
    private XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();
    private XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
    private XYSeries mCurrentSeries;
    private XYSeriesRenderer mCurrentRenderer;

    private Expression function;
    private EditText textFunction;

    public void initChart() {
        mCurrentSeries = new XYSeries("Sample Data");
        mDataset.addSeries(mCurrentSeries);
        mCurrentRenderer = new XYSeriesRenderer();
        mRenderer.addSeriesRenderer(mCurrentRenderer);
    }

    View.OnClickListener handler = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            addGraphData();         
        }
    };

    private void addGraphData(){
        String f = textFunction.getText().toString();
        function = new Expression(f);

        Double y;
        for (int x = 0; x < 15; x++){
            function.setVariable("x", x);
            y = function.resolve();
            mCurrentSeries.add(x, y);
        }

        LinearLayout layout = (LinearLayout) findViewById(R.id.chart);
        if(mChart==null){
            initChart();
            mChart = ChartFactory.getCubeLineChartView(this, mDataset, mRenderer, 0.3f);
            layout.addView(mChart);
        } else {
            mChart.repaint();
        }

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button draw = (Button) findViewById(R.id.buttonDraw);
        draw.setOnClickListener(handler);

        textFunction = (EditText) findViewById(R.id.textFunction);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是logcat

```
03-10 08:11:24.609: D/AndroidRuntime(2450): Shutting down VM
03-10 08:11:24.609: W/dalvikvm(2450): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-10 08:11:24.619: E/AndroidRuntime(2450): FATAL EXCEPTION: main
03-10 08:11:24.619: E/AndroidRuntime(2450): java.lang.NullPointerException
03-10 08:11:24.619: E/AndroidRuntime(2450):     at com.example.achartengine.MainActivity.addGraphData(MainActivity.java:54)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at com.example.achartengine.MainActivity.access$0(MainActivity.java:46)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at com.example.achartengine.MainActivity$1.onClick(MainActivity.java:42)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at android.view.View.performClick(View.java:4204)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at android.view.View$PerformClick.run(View.java:17355)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at android.os.Handler.handleCallback(Handler.java:725)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at android.os.Looper.loop(Looper.java:137)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at java.lang.reflect.Method.invokeNative(Native Method)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at java.lang.reflect.Method.invoke(Method.java:511)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-10 08:11:24.619: E/AndroidRuntime(2450):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:28:57.367

```
 mCurrentSeries = new XYSeries("Sample Data"); 
```

在您收到错误的那一行之前没有被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T08:30:16.070

在使用它之前，您需要调用它`initChart`来初始化.`mCurrentSeries``onClick`

# sql - SQL Server - 更快的记录检索

> ID：15320324
> 
> 赞同：1
> 
> 时间：2013-03-10T08:23:07.023
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我有这种情况：我们在 SQL Server 数据库中的一张表已经有 5000 万行。我们不时分批插入行。每个批次的行具有相同的批次 ID 和日期时间戳，并且批次一次最多可以有 100k 行。

一天中有很多批次运行。`batchID`使用and获取第一批行的最佳查询方式是`datetimestamp`什么？

我们一直在使用批处理 id 的 min 并使用相应的 datetimestamp 有一段时间了，但它似乎没有有效地运行。您能否就可以做些什么来改善这一点提供一些见解？感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:13:24.140

您应该为`EDate`-Column 添加一个索引，包括`BatchID`.

```
create nonclustered index Index_EDate_Table 
 on YourTable 
   (EDate ASC)
 include 
   (BatchID) 
```

然后，您可以查询按时间戳排序的当天批次

```
select distinct BatchID
    from YourTable
   where EDate >= Cast(GetDate() as Date)
   order by EDate 
```

这应该足够快。

# javascript - 扩展创建失败，没有任何信息

> ID：15320327
> 
> 赞同：5
> 
> 时间：2013-03-10T08:23:29.223
> 
> 标签：javascript, safari, safari-extension, browser-extension

我有一个可以在 Firefox、IE 和 Chrome 中运行的浏览器扩展程序，我目前正在将它移植到 safari。

我按照苹果开发者网站上的说明进行操作，并将扩展文件夹重命名为`myext.safariextension`. 我获得了证书，并且我认为 safari 扩展构建器可以识别它。

但是，由于某种原因，创建扩展失败。我收到以下消息：

![失败，不知道为什么](../Images/20e251ee33da1781c3a4bffb562ed7b2.png)

我不知道如何解决这个问题。谷歌搜索、SO 搜索和在 SO 聊天室中询问没有产生任何结果。

任何帮助将不胜感激，即使它只是引导我找到正确的解决方案。如果有帮助，这是 Windows 上的 Safari 5。

# javascript - 面向服务的架构

> ID：15320329
> 
> 赞同：-1
> 
> 时间：2013-03-10T08:23:45.810
> 
> 标签：javascript, html, xml, jsp, soa

我有一个已经存在的代码，我想将其转换为面向服务的体系结构。为此，我将 MYSQL 数据库视为服务提供者，它具有一些服务，例如生成天数报告等。服务使用者是来自 GUI 的任何请求服务的用户。我在 GUI 上有显示可用服务列表的服务目录。用户可以从 GUI 中选择所需的服务。现在，当他点击他需要的服务时，它会要求输入天数等输入。所有这些代码都是用 html、java script、jsp 编写的。它接受输入并将输入传递到另一个页面，并编写一个 shell 脚本来生成所需的 pdf。我可以将用 html、java 脚本、jsp 编写的代码转换为 xml。我正在接近的方式是面向服务的架构吗？我不能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:35:49.333

SOA 并不真正适用于您正在做的事情。XML 也不是实现 SOA 的标准。

无论如何，SOA 与最终用户没有太大关系。这是在具有多个应用程序的企业中构建应用程序设计的一种方法。

简而言之，面向服务的体系结构是一种体系结构风格，用于创建具有明确定义的接口的服务，用于在应用程序之间（有时在内部）进行信息交换。例如，不是应用程序直接读取彼此的数据库表，而是可以定义一个 Web 服务，在数据库表前面定义一个接口。但 SOA 不限于 SOAP/WS/WSDL/BPEL 或任何其他 XML 技术。

使用 SOA 服务将 GUI 与数据库后端分离是不常见的（我认为这是您想要实现的目标）。在一个应用程序中解耦不同的应用程序或域组件更为常见。

# javascript - jquery中的文本区域计数器

> ID：15320330
> 
> 赞同：1
> 
> 时间：2013-03-10T08:23:58.073
> 
> 标签：javascript, jquery

我有一个脚本来计算文本区域中的字母数量。每条消息都是 160 个字母，所以我计算文本以查看用户发送了多少条消息。我这样做了：

```
var msg = len / max; 
```

但如果他有 170 封信，我会收到 1.1 封邮件。我不想有像 xx 这样的东西，如果它是 1.1，这意味着它是两条消息。我想让它成为 2 而不是 1.1。

我该如何实施？

```
 $('#msg').keyup(function () {
      var max = 10;
      var len = $(this).val().length;
      if (len >= max) {
        var msg = len / max ;
        $('#charNum').text(' you have Started a new Message , number of messages is ' + msg);
        $('#msgNum').text('you Created a New  Message');
      } else {
        var char = max - len;
        $('#charNum').text(char + ' characters left');
        $('#msgNum').text('1 Message');
      }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:25:20.110

要获取消息数，请使用您拥有的浮点值

```
var msg = Math.ceil(len / max); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:28:18.007

如果你使用

```
Math.ceil(len / max); 
```

它会给出更高的价值。

如果你使用

```
Math.floor(len / max); 
```

它会给出较低的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:26:41.807

尝试：

```
var msg = Math.ceil(len / max); 
```

这会将结果向上舍入到最接近的整数

# java - 使用 java 继承和接口调用的方法版本不正确

> ID：15320331
> 
> 赞同：2
> 
> 时间：2013-03-10T08:24:05.930
> 
> 标签：java, inheritance, interface

我有一个简单的继承层次结构和一个单一的接口。考虑将由 B 类扩展的 A 类。我希望这两个类都实现接口 I 并且 A 类是抽象的。在java中，我大致有以下内容：

```
public interface I {
    public double foobar();
    public void print();
}

public abstract class A implements I {
    @Override public double foobar() { /*return foo*/}
    @Override public void print() {
        System.out.print(foobar());   
    }
}

public class B extends A {
    @Override public double foobar() { /*return bar*/ }
    @Override public void print() {
        super.print();
        System.out.print(foobar);
    }
} 
```

我的意图是，当我实例化 B 类型的对象并调用它的 print() 时，让 B 类型的对象首先打印 A 类的 foo，然后打印 B 类的 bar；但是，当我编译执行此代码时，它在两种情况下都从 B 类调用 foobar()。例如，如果 foo 等于 1 并且 bar 等于 2，则上述代码的输出将如下所示：

2 2

但我希望它是 1 2

我尝试过使用各种类型转换调用该方法，但没有运气。有什么建议么？

编辑：感谢您的许多建议，并澄清一下，我希望 A 的每个潜在子类都实现 I 并且我为没有明确说明而道歉。此外，我目前通过在 A privateFooBar() 中添加一个由 A 的 print 和 A 的 foobar 调用的附加方法来获得工作代码；但是，我仍然想知道是否有更优雅的方法来完成这项任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T08:28:21.650

`foobar()`在 B 类中被覆盖。因此，每次在 B 类的实例上调用它时，都会调用该方法的 B 类版本。这就是多态性的全部意义所在。

如果您希望 A 中的 foobar() 方法始终返回 A 的 foobar 版本，并且不希望子类中的方法更改它，`foobar()`则应`final`在 A 中进行。

或者您可以委托给`private`A 中的方法：

```
public abstract class A implements I {
    @Override 
    public double foobar() { 
        return privateFoobar();
    }

    private double privateFoobar() {
        /* return foo */
    }

    @Override public void print() {
        System.out.print(privateFoobar());   
    }
}

public class B extends A {
    @Override public double foobar() { /*return bar*/ }
    @Override public void print() {
        super.print();
        System.out.print(foobar());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:59:27.743

As Class B Override Class A 的 foobar 方法 Class B 总是调用 Class B 版本的 foobar。

如果您希望 Class B 将更改 so print 的方法行为，它将在不调用 super.print() 的情况下打印 foo 和 bar 的值。

在 B 类中为 bar 定义新方法，而不是 A 类的覆盖方法。

```
public class B extends A {
    public double bar() { /*return bar*/ }
    @Override public void print() {
        System.out.print(bar());
        System.out.print(foobar());
    }
} 
```

当您更改 print() 方法时，重写 print() 而不是 foobar() 方法是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:33:41.893

在您的 A 类中，您正在调用 foobar()，它在 B 类中被覆盖

```
public abstract class A implements I {
    @Override public double foobar() { /*return foo*/}
    @Override public void print() {
        System.out.print(foobar()); // HERE 
    }
} 
```

您可以将方法设为最终方法或私有方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T08:45:55.640

这是一个关于 foobar 的方法。您可以从 B 调用 super.foobar()，并调整覆盖的 print() 方法。final 或 private 将不起作用，因为那样您就无法覆盖该方法。这是代码：

PS：我将返回类型更改为 String 以返回 "foo" 和 "bar" :)

```
public class P4  {
    public static void main (String[] args) {
    new B().print();
    System.out.println();
}}

interface I {
    public String foobar();
    public void print();
}

abstract class A implements I {
    @Override public String foobar() { return "foo";}
    @Override public void print() {
        System.out.print(foobar());   
    }
}

class B extends A {
    @Override public String foobar() { return "bar"; }
    @Override public void print() {
        System.out.print(super.foobar());
        super.print();
    }
} 
```

# java - 在eclipse项目中存储日志文件？

> ID：15320343
> 
> 赞同：0
> 
> 时间：2013-03-10T08:25:19.290
> 
> 标签：java, logging

我想将程序的每个对象的一些值记录到平面文件或 csv 文件中。我正在考虑为这些对象中的每一个创建单独的文件夹，并将它们的日志文件存储在各自的文件夹中。这可能吗 ？如果是，那么是否可取？

顺便说一句，我正在考虑使用一些日志记录 API。但是，我不知道何时适合使用日志记录 API。对此还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:40:11.193

我可以建议您使用[log4j](http://logging.apache.org/log4j/1.2/)库进行日志记录。使用它可以轻松归档您的问题。

尝试为每个类声明单独的附加程序：

```
FileAppender appender = new FileAppender();
// configure the appender here, with file location, etc
appender.activateOptions();

Logger logger = getRootLogger();
logger.addAppender(appender); 
```

## 类似的问题：

*   [使用 log4j 以编程方式创建不同的日志文件](https://stackoverflow.com/questions/1666121/programmatically-creating-different-log-files-using-log4j)
*   [Log4j 多日志文件和常用代码的日志记录](https://stackoverflow.com/questions/10873465/log4j-multiple-log-files-and-logging-in-common-code)

# c++ - 使用 push_back 将对象添加到 vector 工作正常，但使用访问器语法 [ ] 添加对象，不起作用

> ID：15320347
> 
> 赞同：0
> 
> 时间：2013-03-10T08:25:29.330
> 
> 标签：c++, performance, vector

我已经为向量实现了一个合并函数，它基本上结合到一个排序向量中的排序向量。（是的，它用于合并排序算法）。我试图让我的代码更快并避免开销，所以我决定不在向量上使用 push_back 方法，而是尝试使用开销较小的数组语法。但是，有些事情发生了严重错误，当我这样做时输出搞砸了。这是代码：

```
while(size1<left.size() && size2 < right.size()) //left and right are the input vectors
{
             //it1 and it2 are iterators on the two sorted input vectors
    if(*it1 <= *it2)
    {

        final.push_back(*it1); //final is the final vector to output
        //final[count] = *it1; // this does not work for some reason
        it1++;
        size1++;
        //cout<<"count ="<<count<<" size1 ="<<size1<<endl;

    }
    else
    {
        final.push_back(*it2);
        //final[count] = left[size2];
        it2++;
        size2++;
    }
    count++;    
    //cout<<"count ="<<count<<" size1 ="<<size1<<"size2 = "<<size2<<endl;

} 
```

在我看来，这两种方法在功能上应该是等效的。

PS 我已经为最终向量保留了空间，所以这不应该是一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:26:48.250

您*不能*将新对象添加到`vector`using 中`operator[]`。`.reserve()`也不添加它们。您必须使用`.resize()`或`.push_back()`。

此外，您根本没有避免开销；调用成本`operator[]`并没有那么好`push_back()`，所以在你彻底分析你的代码之前，只需使用`push_back`. 您*仍然*可以使用储备来确保不会进行不必要的分配。

在大多数情况下，像这样的“优化”并没有真正的帮助。如果你想让你的代码更快，首先分析它并寻找热路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T08:28:29.870

之间有很大的区别

```
vector[i] = item; 
```

和

```
vector.push_back(item); 
```

差异：

*   第一个*修改*索引处的元素，`i`并且`i`必须是有效的索引。那是，

    > 0 <= i < vector.size() 必须为真

    如果`i`是一个无效的索引，第一个会调用未定义的行为，这意味着任何事情都可能发生。但是，如果无效，您可以使用`at()`which throws exception ：`i`

    ```
    vector.at(i) = item; //throws exception if i is invalid 
    ```

*   第二个在最后向向量*添加*一个元素，这意味着向量的大小增加了*1*。

因为，从语义上来说，他们俩都做不同的事情，所以选择你需要的那个。

# java - Onclick 按钮使应用程序崩溃

> ID：15320348
> 
> 赞同：-5
> 
> 时间：2013-03-10T08:25:34.843
> 
> 标签：java, android, eclipse

我正在添加一个按钮，单击该按钮可将用户返回到主屏幕，但是每次单击该按钮时应用程序都会强制关闭。

[源代码](https://docs.google.com/document/d/1yiU8UoHU3bXXWaIIk1LwwGP-EMiQ9l1gPY3qQz-djhQ/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:31:09.620

我猜你正在获得NPE。

```
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);  <<<<Error is here NPE

Intent intent = new Intent();
Intent intent=new Intent(Intent.ACTION_MAIN);
homeIntent.addCategory(Intent.CATEGORY_HOME);  <<<There must be Compile time error because you did not declare homeIntent
homeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(homeIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:33:51.653

对于我所看到的，我认为您的问题在这里：

```
public void onClick(View v) {
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
Notification noti = new Notification.Builder(this)
.setTicker("Ticker Title")
.setContentTitle("Content Title")
.setContentText("Notifcation Content")
.setSmallIcon(R.drawable.ic_launcher)
.setContentIntent(pIntent).getNotification();
noti.flags=Notification.FLAG_AUTO_CANCEL;
NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
notificationManager.notify(0, noti);

Intent intent = new Intent();
Intent intent=new Intent(Intent.ACTION_MAIN);
homeIntent.addCategory(Intent.CATEGORY_HOME);
homeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(homeIntent);
} 
```

并且更准确地表达了这一行的意图：

```
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0); 
```

您正在尝试将此意图添加到`PendingIntent`实际创建它之前。

你用的是什么`homeIntent`？

# c++ - 带变量的 C++ 幂函数

> ID：15320350
> 
> 赞同：0
> 
> 时间：2013-03-10T08:25:57.873
> 
> 标签：c++, pow

```
#include <cstdlib>
#include <iostream>
#include <cmath>
using namespace std;

int main(int argc, char *argv[])
{
    double amount, rate, time, interest, month;
    interest = rate/(12.0*100);
    month = (amount * rate)/1.0 -(1.0 + interest), pow(time*12);
    cout << "What is the amount of the loan? $ ";
    cin >> amount;
    cout << "What is the annual percentage rate? ";
    cin >> rate;
    cout << "How many years will you take to pay back the loan?  ";
    cin >> time;
    cout <<"\n-------------------------------------------------------\n";
    cout << "Amount        Annual % Interest       Years         Monthly Payment\n\n\n";
    cout <<amount <<"                      " <<rate <<"               " <<time << "        " <<month;
    cout <<"\n\n";
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

我在这里遇到错误，不确定如何正确使用 pow 功能。根据问题的公式是：

```
 Monthly payment = (loan amount)(monthly interest rate) / 1.0 - (1.0 + Monthly interest rate)^-(number of months) 
```

这是我遇到问题的线路

月=（金额*利率）/1.0-（1.0+利息），pow（时间*12）；

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:29:15.347

`std::pow`像这样接受两个参数

```
pow (7.0,3) 
```

所以你的代码应该更像这样

```
month = (amount * rate)/1.0 - std::pow( (1.0 + interest), 12); 
```

您的代码也有其他缺陷，例如在设置值之前进行计算。

# javascript - 嵌套转换元素的低帧率

> ID：15320359
> 
> 赞同：0
> 
> 时间：2013-03-10T08:27:11.853
> 
> 标签：javascript, ipad, css, webkit

我有一个自定义滚动视图实现。它只是通过将滚动元素向左和向右转换来工作。

它在移动 Safari 上提供了相当不错的帧速率。问题是，**一旦我转换了滚动条内的一些元素，帧速率就会突然下降。**

这是**[演示](http://ariaminaei.github.com/FastTouchAndDomExperiments/demos/metro.html)**。

如果您在 chrome 中查看它（启用“模拟触摸事件”），一切都会顺利进行，除了将纹理上传到 GPU 的前几分钟。

但是在 iOS6 iPad 上，只要视图中没有变形的元素，移动是流畅的。但是，如果您进一步向右滚动，我已经用 转换了一些元素`scale3d()`，那么一切都会变得混乱。这就像它在每一帧上重新上传纹理一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:47:13.090

我只是删除了所有

```
-webkit-perspective: 1000;
-webkit-backface-visibility: hidden 
```

应该*是*“强制硬件加速”。

# c# - SaveChanges CRM 2011 插件上未处理的异常

> ID：15320363
> 
> 赞同：2
> 
> 时间：2013-03-10T08:27:35.760
> 
> 标签：c#, plugins, dynamics-crm-2011

我的 CRM 2011 插件有问题。

```
var QuoteProduct = crm.QuoteDetailSet.Where(c 
  => c.QuoteDetailId == QPID).First();
double Tax = (double)(
  (QuoteProduct.BaseAmount 
    - QuoteProduct.ManualDiscountAmount.GetValueOrDefault() 
    - QuoteProduct.VolumeDiscountAmount.GetValueOrDefault()) / 20);
QuoteProduct.Attributes["tax"] = Tax;
crm.UpdateObject(QuoteProduct);
crm.SaveChanges(); 
```

错误发生在保存更改行上。错误详情如下。

> 用户代码未处理 Microsoft.Xrm.Sdk.SaveChangesException
> 消息=处理此请求时发生错误。
> Source=Microsoft.Xrm.Sdk
> StackTrace：位于 C:\Users\mycrm\Desktop\BMSD.QuoteProduct 中 Plugin.TaxCreator（IOrganizationService 服务，Guid QPID）的
> Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.SaveChanges（SaveChangesOptions 选项） 。
> Tax\BMSD.QuoteProduct.Tax\BMSD.QuoteProduct.Tax.cs：
> C:\Users\mycrm\Desktop\BMSD.QuoteProduct.Tax\BMSD.QuoteProduct.Tax\BMSD 中 Plugin.Execute(IServiceProvider serviceProvider) 的第 62 行。 QuoteProduct.Tax.cs：
> Microsoft.Crm.Extensibility.V5PluginProxyStep.ExecuteInternal（PipelineExecutionContext 上下文）的第 38 行
> 在 Microsoft.Crm.Extensibility.VersionedPluginProxyStepBase.Execute(PipelineExecutionContext context)
> InnerException: System.ServiceModel.FaultException Message=System.InvalidCastException: Microsoft Dynamics CRM 遇到错误。管理员或支持的参考号：#BE061894
> Source=Microsoft.Crm.Extensibility
> StackTrace：
> 在 Microsoft.Crm.Extensibility.InprocessServiceProxy 上的 Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.Execute(OrganizationRequest request, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType)
> 。 ExecuteCore（组织请求请求）
> 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.SaveChange（组织请求
> 请求，IList`1 结果）的 Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.Execute（组织请求请求）内部
> 异常：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:43:36.780

从您的堆栈跟踪中有一个`System.InvalidCastException`

这意味着某些属性的值类型不正确。由于您仅更改“税”属性，因此其类型不正确。很可能“税”是一个 Money 字段，所以我想你应该给它分配类型的变量`decimal`，而不是`double`. 尝试这样的事情：

```
decimal Tax = (decimal)((QuoteProduct.BaseAmount 
  - QuoteProduct.ManualDiscountAmount.GetValueOrDefault() 
  - QuoteProduct.VolumeDiscountAmount.GetValueOrDefault()) / 20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:29:04.803

根据提供的信息，当您转换为 double 时，可能是转换问题。问题是 CRM 默认情况下以比您尝试将其装入的精度更高的精度呈现真实值。

*   *double*高 8 个字节，具有 15 位数字的重要性
*   *十进制*是 12 字节高，具有 28 位的重要性

因此，即使您正在处理的实际值适合它们中的任何一个（并且*double*是 C# 中非整数的事实上的标准），计算机也会做出反应并警告您您正在（可能）真正放入某些东西大成一个（相对）小洞。

您需要按如下方式重新*申报税款。*

```
//double tax;
decimal tax = QuoteProduct.BaseAmount 
  - QuoteProduct.ManualDiscountAmount.GetValueOrDefault() 
  - QuoteProduct.VolumeDiscountAmount.GetValueOrDefault();
QuoteProduct.Attributes["tax"] = tax / 20; 
```

或者您可以使用内置转换类手动将*十进制*值转换为*双精度值。*但是，鉴于您将结果放入一个字段（肯定管理*十进制*类型），我认为这是一个不必要的绕道。

[您可以点击此处](http://bit.ly/ZukocH)阅读有关不同类型的更多信息。

# cassandra - 在 java 中使用 cassandra hector 查找列的最大值。

> ID：15320366
> 
> 赞同：0
> 
> 时间：2013-03-10T08:27:43.430
> 
> 标签：cassandra, max

我正在使用 UTF8Type 比较器，并且必须在 Java 中使用 hector cassandra 找到列的最大值。

例如：

我的 cassandra 数据库中有一个名为 Page Count 的列，需要最大页数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:56:55.767

要执行此类操作，您要么必须构建自己的索引来管理它，要么必须在 Hadoop 中使用 map reduce 作业。Cassandra 不支持这类聚合操作。

# c# - 自定义服务器脚本

> ID：15320367
> 
> 赞同：1
> 
> 时间：2013-03-10T08:27:47.400
> 
> 标签：c#, .net

我已经构建了一个基于 HTTPListener 类的小型 HTTP 服务器。

我想知道的是，是否有任何脚本语言可以放入我的 HTML 文件中，可以在 C# 中本地执行？

类似于 PHP 与 HTML 代码混合时的工作方式。

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:31:45.343

您可以使用任何可用的 .NET 模板引擎，例如 WebForms、Razor...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:06:24.063

您可以使用一种：T4。

如果您想在运行时定义模板，则需要提供对 Microsoft.VisualStudio.TextTemplating 的引用，您可以从文章[Processing Text Templates by using a Custom Host](http://msdn.microsoft.com/en-us/library/bb126519.aspx) (at msdn) 中了解如何实用地使用它。

来自文章：

> 要执行文本模板，请调用 Microsoft.VisualStudio.TextTemplating.Engine 的 ProcessTemplate 方法：
> 
> ```
> using Microsoft.VisualStudio.TextTemplating;
> ...
> Engine engine = new Engine();
> string output = engine.ProcessTemplate(templateString, host); 
> ```
> 
> 在 host 参数中，您必须提供一个实现 ITextTemplatingEngineHost 的类。这由引擎回调。

通过这种方法，您可以让程序从文件中读取模板或从资源中加载模板。

文章[演练：创建自定义文本模板主机](http://msdn.microsoft.com/en-us/library/bb126579.aspx)（也在 msdn）将帮助您实现接口 ITextTemplatingEngineHost。

* * *

作为替代方案，如果您预先定义了固定模板，您可以创建 tt 文件并使用以下方法：

```
TestTemplate testTemplate = new TestTemplate();
string output = testTemplate.TransformText(); 
```

其中 TestTemplate 是 VisualStudio 从 TestTemplate.tt 文件生成的类。使用这种方法，模板在编译时是固定的。因此，您将无法在运行时定义它，例如通过从文件中读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:01:28.390

如果您想要一些简单的东西，我建议您查看 T4 模板。你可以从[这里](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)和[这里开始](http://www.goatly.net/2010/11/19/using-t4-to-generate-content-at-runtime.aspx)

# c - 寻找一种在 C 中访问 c ++ 对象的方法，就像我在 c++ 中一样

> ID：15320368
> 
> 赞同：0
> 
> 时间：2013-03-10T08:27:58.920
> 
> 标签：c, linux

我有几个想法：

`char* test = "testInteger(5).workOnReturn("doIt")[10]"`

`int ret = execute(test);`

如果我使用“extern”关键字会怎样？

假设我有一大堆 C++ 实现和类。难道我不能在 C 中用“extern”定义相同的东西并提供一个虚拟实现，并且在运行时，它会使用实际实现访问 C++ 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:54:10.070

也许您可以自定义您的 GCC 编译器（例如，使用[MELT](http://gcc-melt.org/)扩展）以某种方式为您的库生成 C 接口（也许通过使用您自己的`#pragma`-s 注释相关的 C++ 函数 ....）

但是您的问题太模糊，无法得到更准确的答案。

你的 C++ 库是什么，它应该如何在 C++ 中使用？

看看其他 C++ 库如何与 C*接口*；[例如查看PPL](http://bugseng.com/products/ppl/)的源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:19:55.900

如果你想从 C 中使用 C++，它只能以*极其*有限的方式完成，并且只要 C++ 代码是为它显式构建的（这意味着基本上放弃了大部分用于 C++ C++ 的东西）。在你的情况下不会发生。

你的出路是只使用 C++ 或为 C 获取一个库。其他任何事情都会造成太大的伤害而没有任何意义。

# delphi - 关于在 Delphi 中为某些东西设置动画的指针的棘手问题

> ID：15320370
> 
> 赞同：1
> 
> 时间：2013-03-10T08:28:04.530
> 
> 标签：delphi, pointers, jquery-animate

所以，我什至不知道如何写正确的标题。

我想要做的是动画让我们说一个进度条的位置。

可以讨论如何使用计时器和循环等来做到这一点。

但是，我希望能够做这样的事情：

1.  ProgressBar1.Position:=Animate(ToValue); 或者
2.  动画（ProgressBar1.Position，ToValue）；

这可能吗？

创建从整数继承的组件不起作用。

我使用指针尝试了 2 号并进行了此过程

```
procedure TForm1.Animate(ToValue: integer;  var Dest: Integer);
begin    
  Dest:=ToValue;
end; 
```

它确实改变了进度条内部的位置值，但进度条在视觉上没有改变。

如果有人知道如何做到这一点，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:08:05.640

如果你有一个相对较新的 Delphi 版本，这是一个围绕`TTimer`using的动画包装器`anonymous methods`。

```
type
  Animate = class
    private
      class var fTimer : TTimer;
      class var fStartValue : Integer;
      class var fEndValue : Integer;
      class var fProc : TProc<Integer>;
      class Constructor Create;
      class Destructor Destroy;
      class procedure OnTimer(Sender : TObject);
    public
      class procedure Run( aProc : TProc<Integer>; 
                           fromValue, ToValue, AnimationDelay : Integer);
  end;

class constructor Animate.Create;
begin
  fTimer := TTimer.Create(nil);
  fTimer.Enabled := false;
  fTimer.OnTimer := Animate.OnTimer;
end;

class destructor Animate.Destroy;
begin
  fTimer.Free;
end;

class procedure Animate.OnTimer(Sender: TObject);
begin
  if Assigned(fProc) then
  begin
    if (fStartValue <= fEndValue) then
    begin
      fProc(fStartValue);
      Inc(fStartValue);
    end
    else
      fTimer.Enabled := false;
  end;
end;

class procedure Animate.Run( aProc: TProc<Integer>; 
                             fromValue, ToValue, AnimationDelay: Integer);
begin
  fTimer.Interval := AnimationDelay;
  fStartValue := fromValue;
  fEndValue := ToValue;
  fProc := aProc;
  fTimer.Enabled := (fStartValue <= fEndValue);
end; 
```

该类`Animate`在应用程序启动/停止时自初始化和自毁。只能激活一个动画进程。

以这种方式使用它：

```
Animate.Run(
  procedure( aValue : Integer)
  begin 
    ProgressBar1.Position := aValue;
    ProgressBar1.Update;
  end,
  1,100,5
); 
```

* * *

正如评论中所讨论的，上面的代码使用类变量和类函数。缺点是只有一个动画可以激活。

这是一个更完整的动画类，您可以在其中实例化任意数量的动画。扩展功能，可以停止/继续，准备就绪时添加事件，以及更多属性。

```
unit AnimatePlatform;

interface

uses
  System.Classes,System.SysUtils,Vcl.ExtCtrls;

type
  TAnimate = class
    private
      fTimer : TTimer;
      fLoopIx : Integer;
      fEndIx : Integer;
      fProc : TProc<Integer>;
      fOnReady : TProc<TObject>;
      procedure OnTimer(Sender : TObject);
      function GetRunning : boolean;
      procedure SetReady;
    public
      Constructor Create;
      Destructor Destroy; override;
      procedure Run( aProc : TProc<Integer>;
                     FromValue,ToValue,AnimationDelay : Integer); overload;
      procedure Run( aProc : TProc<Integer>;
                     FromValue,ToValue,AnimationDelay : Integer;
                     AReadyEvent : TNotifyEvent); overload;
      procedure Run( aProc : TProc<Integer>;
                     FromValue,ToValue,AnimationDelay : Integer;
                     AReadyEvent: TProc<TObject>); overload;
      procedure Stop;
      procedure Proceed;
      property ActualLoopIx : Integer read fLoopIx write fLoopIx;
      property Running : boolean read GetRunning;
      property OnReady : TProc<TObject> read fOnReady write fOnReady;
  end;

implementation

constructor TAnimate.Create;
begin
  Inherited;
  fTimer := TTimer.Create(nil);
  fTimer.Enabled := false;
  fTimer.OnTimer := Self.OnTimer;
  fOnReady := nil;
end;

destructor TAnimate.Destroy;
begin
  fTimer.Free;
  Inherited;
end;

function TAnimate.GetRunning: boolean;
begin
  Result := fTimer.Enabled;
end;

procedure TAnimate.OnTimer(Sender: TObject);
begin
  if Assigned(fProc) then
  begin
    if (fLoopIx <= fEndIx) then
    begin
      fProc(fLoopIx);
      Inc(fLoopIx);
    end;
    if (fLoopIx > fEndIx) then
      SetReady;
  end
  else SetReady;
end;

procedure TAnimate.Proceed;
begin
  fTimer.Enabled := true;
end;

procedure TAnimate.Run(aProc: TProc<Integer>; FromValue, ToValue,
  AnimationDelay: Integer; AReadyEvent: TNotifyEvent);
begin
  Run(aProc,FromValue,ToValue,AnimationDelay);
  fOnReady := AReadyEvent;
end;

procedure TAnimate.Run(aProc: TProc<Integer>; FromValue, ToValue,
  AnimationDelay: Integer; AReadyEvent: TProc<TObject>);
begin
  Run(aProc,FromValue,ToValue,AnimationDelay);
  fOnReady := AReadyEvent;
end;

procedure TAnimate.Run(aProc: TProc<Integer>; fromValue, ToValue,
  AnimationDelay: Integer);
begin
  fTimer.Interval := AnimationDelay;
  fLoopIx :=         fromValue;
  fEndIx :=          ToValue;
  fProc :=           aProc;
  fTimer.Enabled :=  true;
end;

procedure TAnimate.SetReady;
begin
  Stop;
  if Assigned(fOnReady) then
    fOnReady(Self);
end;

procedure TAnimate.Stop;
begin
  fTimer.Enabled := false;
end;

end. 
```

* * *

**更新：**

这里没有使用基于动画师的版本，而是`TTimer`使用[`anonymous thread`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TThread.CreateAnonymousThread):

```
uses
  SyncObjs;

procedure AnimatedThread( aProc: TProc<Integer>;
                          FromValue, ToValue, AnimationDelay: Integer;
                          AReadyEvent: TNotifyEvent);
begin
  TThread.CreateAnonymousThread(
    procedure
    var
      i: Integer;
      w : TSimpleEvent;
    begin
      w := TSimpleEvent.Create(Nil,False,False,'');
      try
        for i := FromValue to ToValue do begin
          TThread.Synchronize(nil,
            procedure
            begin
              aProc(i);
            end
          );
          w.WaitFor(AnimationDelay);
        end;
      finally
        w.Free;
      end;
      if Assigned(AReadyEvent) then
        TThread.Synchronize(nil,
          procedure
          begin
            AReadyEvent(Nil);
          end
        );
    end
  ).Start;
end;

// Example call

AnimateThread(
  procedure(aValue: Integer)
  begin 
    ProgressBar1.Position := aValue;
    ProgressBar1.Update;
  end,
  1,100,5,nil
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:43:21.020

您可以使用 RTTI 轻松完成此操作。

您无法避免编写循环，但您可以编写一次并为您想要设置的任何对象/属性调用*Animate方法。*当然，编写这样的函数仍然很棘手，因为您必须考虑闪烁、UI 阻塞的时间等。

一个非常简单的例子是：

```
implementation
uses RTTI;

procedure TForm1.Animate(AObj: TObject; APropertyName: string; AValue: Integer);
var
  Context: TRTTIContext;
  OType: TRTTIType;
  Prop: TRTTIProperty;
  StartValue: Integer;
begin
  Context := TRTTIContext.Create;
  OType := context.GetType(AObj.ClassType);
  Prop := OType.GetProperty(APropertyName);
  StartValue := Prop.GetValue(AObj).AsInteger;
  for AValue := StartValue to AValue do
  begin
    Prop.SetValue(AObj, AValue);
    if AObj is TWinControl then
    begin
      TWinControl(AObj).Update;
      Sleep(3);
    end;
  end;
end;

//call it like this:
procedure TForm1.Button1Click(Sender: TObject);
begin
  Animate(ProgressBar1, 'Position', 30);
  Animate(Self, 'Height', 300);
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:35:09.283

正如大卫所说，您将需要使用计时器。这是一些演示原理的代码。我建议你接受这个想法并将它们融入你自己的 TProgressbar 后代。

请注意，在 Vista 和 Windows 7 下，TProgressBar 在增加位置时有一些内置动画。使用您自己的动画时，这可能会产生奇怪的效果。

您没有提及您使用的是哪个版本的 Delphi。此示例是使用 XE2 创建的。如果您使用的是早期版本，您可能需要修复uses 子句中的虚线单元名称，例如Winapi.Windows 应该是Windows。

**代码：**

```
unit Unit11;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls, Vcl.StdCtrls, Vcl.ExtCtrls,
  Vcl.Samples.Spin;

type
  TForm11 = class(TForm)
    ProgressBar1: TProgressBar;
    Timer1: TTimer;
    Button1: TButton;
    Button2: TButton;
    spnIncrement: TSpinEdit;
    Label1: TLabel;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    FDestPos: Integer;
    FProgInc: Integer;
    procedure AnimateTo(const DestPos, Increment: Integer);
  public
    { Public declarations }
  end;

var
  Form11: TForm11;

implementation

{$R *.dfm}

procedure TForm11.Button1Click(Sender: TObject);
begin
  AnimateTo(10, spnIncrement.Value);
end;

procedure TForm11.Button2Click(Sender: TObject);
begin
  AnimateTo(90, spnIncrement.Value);
end;

procedure TForm11.Timer1Timer(Sender: TObject);
begin
  if ((FProgInc > 0) and (ProgressBar1.Position + FProgInc >= FDestPos)) or
     ((FProgInc < 0) and (ProgressBar1.Position + FProgInc <= FDestPos)) then
  begin
    ProgressBar1.Position := FDestPos;

    Timer1.Enabled := FALSE;
  end
  else
  begin
    ProgressBar1.Position := ProgressBar1.Position + FProgInc;
  end;
end;

procedure TForm11.AnimateTo(const DestPos, Increment: Integer);
begin
  FDestPos := DestPos;

  FProgInc := Increment;

  if FDestPos < ProgressBar1.Position then
    FProgInc := -FProgInc;

  Timer1.Enabled := FProgInc <> 0;
end;

end. 
```

**DFM：**

```
object Form11: TForm11
  Left = 0
  Top = 0
  BorderStyle = bsDialog
  Caption = 'Animated Progressbar'
  ClientHeight = 77
  ClientWidth = 466
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  Position = poScreenCenter
  PixelsPerInch = 96
  TextHeight = 13
  object Label1: TLabel
    Left = 309
    Top = 42
    Width = 53
    Height = 13
    Caption = 'Increment:'
  end
  object ProgressBar1: TProgressBar
    Left = 24
    Top = 16
    Width = 417
    Height = 17
    TabOrder = 0
  end
  object Button1: TButton
    Left = 24
    Top = 39
    Width = 75
    Height = 25
    Caption = '10%'
    TabOrder = 1
    OnClick = Button1Click
  end
  object Button2: TButton
    Left = 105
    Top = 39
    Width = 75
    Height = 25
    Caption = '90%'
    TabOrder = 2
    OnClick = Button2Click
  end
  object spnIncrement: TSpinEdit
    Left = 368
    Top = 39
    Width = 73
    Height = 22
    MaxValue = 100
    MinValue = 1
    TabOrder = 3
    Value = 0
  end
  object Timer1: TTimer
    Enabled = False
    Interval = 20
    OnTimer = Timer1Timer
    Left = 240
    Top = 40
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T08:43:55.793

您不能将除整数以外的任何内容分配给进度条的位置。因此，如果要使位置从一个值平滑地移动到另一个值，则需要将位置设置为每个单独的值。

没有方便的捷径。没有什么可以像 jQuery 的 animate() 方法那样开箱即用。您提到了计时器和循环。这些是您需要使用的方法。

# highcharts - Highcharts 图表：鼠标悬停在标签上时的工具提示

> ID：15320376
> 
> 赞同：0
> 
> 时间：2013-03-10T08:28:33.693
> 
> 标签：highcharts, label, tooltip, mouseover

在 Highcharts 图表上，当鼠标悬停在其他工具提示上时，我们是否可以显示工具提示而不是鼠标悬停在列（点）上时显示的工具提示？

谢谢查南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T20:33:58.280

我已经设法实现了这一点 - 您需要两个步骤：
1.）对于 xAxis 或 yXis，设置标签选项；'formatter' 属性应该包含一个 html 标题属性。利用函数进行动态输出。确保“useHTML”属性设置为 true。例如：

```
 useHTML: true,
            formatter: function () {                                                                                    
            return '<div class="label_tip" style="font-size:12px; font-weight:500;" title="'+this.value+'">'+this.value+'</div>'; } 
```

2.) 使用任何工具提示库将标题更改为工具提示。这应该在 Highcharts 加载或重绘事件中触发。

在此示例中，我使用 qTips 创建标签工具提示 - [http://jsfiddle.net/amichaels/quXLg/](http://jsfiddle.net/amichaels/quXLg/)

# html - JSF/PrimeFaces 与 HTML5 存储方法的兼容性

> ID：15320379
> 
> 赞同：2
> 
> 时间：2013-03-10T08:29:09.753
> 
> 标签：html, jsf, primefaces, local-storage, sessionstorage

JSF / PrimeFaces 是否支持 HTML5 存储方法（sessionStorage / localStorage）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:05:26.687

不是开箱即用。但是您可以将必要的 HTML/JS 代码包装在自定义 JSF 组件中。我们以前的一位实习生已经这样做了。您可以在[此 Google 代码存储库](https://code.google.com/p/html5-in-jsf-experiments/)中找到它。检查[POC-SessionStorage](https://code.google.com/p/html5-in-jsf-experiments/source/browse/#hg/POC-SessionStorage)部分的源代码。你可以在[这篇论文](http://jdevelopment.nl/wp-content/uploads/sites/2/2012/07/markvandertol_thesis3.pdf)中找到一篇文章。

就这一点而言，这只是生成正确的 HTML/JS 代码并挂钩 JSF ajax 事件的问题。

# c# - 如果在c#中包含任何单词，则替换同一行

> ID：15320380
> 
> 赞同：-5
> 
> 时间：2013-03-10T08:29:13.247
> 
> 标签：c#, .net

示例：如果有一行[http://google.com/adi/727412;sz=728x90;ord=](http://google.com/adi/727412;sz=728x90;ord=) $RANDOM? 其中包含 adi，希望将其替换为[http://google.com/adi/727412;sz=728x90;click=](http://google.com/adi/727412;sz=728x90;click=) $CLICK;ord=$RANDOM？并将所有其他文本保持不变。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:33:35.023

```
 string url = "http://google.com/adi/727412;sz=728x90;ord=$RANDOM?";
        if(url.Contains("adi")) url = "http://google.com/adi/727412;sz=728x90;click=$CLICK;ord=$RANDOM?";

        string url = "blablablablablahttp://google.com/adi/727412;sz=728x90;ord=$RANDOM?blablabla";
        if(url.Contains("adi")) url.Replace("http://google.com/adi/727412;sz=728x90;ord=$RANDOM?", "http://google.com/adi/727412;sz=728x90;click=$CLICK;ord=$RANDOM?"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:36:46.847

这是一个相当简单的任务：

```
string url = @"http://google.com/adi/727412;sz=728x90;ord=$RANDOM?";

if (url.Contains(@"/adi/"))
{
    int pos = url.IndexOf(";ord"); //// Find first occurence of Ord parameter
    url = url.Insert(pos, ";click=$CLICK"); //// Insert text at position
} 
```

编辑：为了完成多次出现的任务，我使用了[这个](https://stackoverflow.com/questions/541954/how-would-you-count-occurences-of-a-string-within-a-string-c)线程的解决方案。

```
{
    string url = "<google.com/adi/727412;sz=728x90;ord=$RANDOM?>; <google.com/adi/727412;sz=300x250;ord=$RANDOM?>";
    string searchString = @"/adi/";

    int n = 0;

    while ((n = url.IndexOf(searchString, n)) != -1)
    {
        n += searchString.Length;
        int pos = url.IndexOf('?', n);
        url = url.Insert(pos, ";click=$CLICK");
    }
} 
```

# php - 如何使用 PHP 和 MySQL 根据当前表行生成随机且唯一的 id？

> ID：15320382
> 
> 赞同：0
> 
> 时间：2013-03-10T08:29:19.433
> 
> 标签：php, mysql

我有一个具有自动增量“id”的表。我在同一个表中有另一列有一个“键”，我希望它基于自动增量“id”。这将确保永远不会有重复的“密钥”。我希望最好有一个 6 个字符的唯一 ID 生成器。我在[网上](http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/)找到了这个，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:55:37.893

```
echo $result['id'] . '_' . uniqid('', true); 
```

这将产生类似 1_513c5858c04967.71142475 的东西，前缀 ID_ 将始终基于数据库当然是唯一的

还不够独特吗？

啊，你想要 6 个字符，怎么样：

```
function randString($length, $charset='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789')
{
    $str = '';
    $count = strlen($charset);
    while ($length--) {
        $str .= $charset[mt_rand(0, $count-1)];
    }

    return $str;
}

  $key = $result['id'] . '_' . randString(6); //this is unique, cause even you get at a chance of a million that you will get 2 same randString(6); you will have always unique prefix ID_ so you will have 1_G7owOq and 2_G7owOq

  //the code below is just an example of how to loop column for unique key and u dont need it :P just maybe someone else needs it.
  while(mysqli_num_rows(mysqli_query($con, "SELECT id FROM table WHERE key = '".mysqli_real_escape_string($con, $key)."'")) > 0) { 
    $key = $result['id'] . '_' . randString(6); 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:28:35.197

然后是我在这里发布您的最后一种方式：

```
$key = randString(6);
while(mysqli_num_rows(mysqli_query($con, "SELECT id FROM table WHERE key = '".mysqli_real_escape_string($con, $key)."'")) > 0) { 
    $key = randString(6); 
} 
```

它总是会创建随机的 6 个字符键，因为如果它命中 db 中已经存在的键，它将重新创建新的键，依此类推，直到其唯一：] 这是你最好的方式，我也在使用这种方式:]

实际上最好的方法是使用所有现有的唯一键 (62^6) * 每个键 6 个字节 -> 317 GB 如果我没记错的话（早上）:] 我不认为你会达到 1/10000其中:]

# android - 使用许多路径和绘制对象时，Android 画布会被清理

> ID：15320386
> 
> 赞同：1
> 
> 时间：2013-03-10T08:29:47.857
> 
> 标签：android, canvas, path, ondraw

有人能解释一下为什么这段代码不能画出每个对象吗？

```
public class A extends View {
private Paint paint = new Paint();
private Path path = new Path();
ArrayList<Pair<Path, Paint>> paths = new ArrayList<Pair<Path, Paint>>();

public A(Context context) {
    super(context);
}

@Override
protected void onDraw(Canvas canvas) {
    for (Pair<Path, Paint> p : paths) {
        canvas.drawPath(p.first, p.second);
    }
    canvas.drawPath(path, paint);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();
    paint.setAntiAlias(true);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(3f);

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            int color = Color.rgb(new Random().nextInt(255),
                                new Random().nextInt(255), 
                                new Random().nextInt(255));
            paint.setColor(color);
            path.reset(); //new stroke, get old one erased
            int historySize = event.getHistorySize();
            for (int i = 0; i > historySize; i++) {
                path.moveTo(eventX, eventY);
            }
             path.moveTo(eventX, eventY);

            return true;
        case MotionEvent.ACTION_MOVE:
            path.lineTo(eventX, eventY);
            return true;
        case MotionEvent.ACTION_UP:
            path.lineTo(eventX, eventY);
            // End of stroke, add this to the collection
            paths.add(new Pair<Path, Paint>(path, paint));
            break;
        default:
            break;
    }
    // Schedules a repaint.
    invalidate();
    return true;
} 
```

}

我正在使用 onTouchEvent 捕捉每个笔画，并创建存储在一对对象中的不同路径/绘画对象。可悲的是，当我尝试绘制它们时，在我的 OnDraw 中它失败了。我读过一些主题但没有找到正确的答案。每次有人建议在位图中创建和工作并将其绘制到屏幕上，但我想避免这种解决方案。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:39:35.390

问题是你总是使用相同的`Path`和`Paint`对象。您应该创建新的`Path`并且`Paint`每次都`MotionEvent.ACTION_DOWN`被解雇

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:29:21.330

在 switch 条件下删除 path.reset。抽奖有效。但是颜色确实会改变，即使是之前的平局。您重置清除上一次绘制的路径。

每次绘制时，我都会使用不同的一对（路径和绘画）。

如果您想使用画布进行绘制，下面的代码就可以了。我还会添加一个颜色选择器以允许用户选择他选择的颜色。

```
 public class MyView extends View {

    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SCREEN));
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T16:57:55.013

您只需要使用一个 Path 和 Paint 对象。

实际上可以在这里找到关于这整个事情的详细教程： [在 Android 上制作一个基本的单点触控绘图应用程序 - Creative Punch](http://creative-punch.net/2014/03/make-basic-single-touch-drawing-app-android/ "在 Android 上制作一个基本的单点触控绘图应用程序")

# haskell - 本地数据声明/实例提案

> ID：15320391
> 
> 赞同：21
> 
> 时间：2013-03-10T08:30:28.037
> 
> 标签：haskell, local, typeclass

我很好奇，并且一直无法在 Haskell 中找到类似的提案。考虑是否`sort`已写但未写`sortBy`。

```
sortBy :: forall a. (a -> a -> Ordering) -> [a] -> [a]
sortBy f = map getX . sort . map X
    where
    newtype X = X { getX :: a }
    instance Ord X where
        compare (X a) (X b) = f a b 
```

有人看过这个提议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:22:16.750

显然，本地实例已在 Haskell Prime 邮件列表中进行了简要讨论：http: [//web.archiveorange.com/archive/v/eKcS7T2qBpy7czBE2Jei](http://web.archiveorange.com/archive/v/eKcS7T2qBpy7czBE2Jei) ，在Oleg 的论文“功能明珠：隐式配置”的第 6 章中进行^了更全面的讨论。不过，我几乎没有听说过本地数据声明。

# c# - 调用在我的网站后台运行的服务器端函数

> ID：15320392
> 
> 赞同：0
> 
> 时间：2013-03-10T08:30:39.697
> 
> 标签：c#, javascript, jquery, asp.net, master-pages

我想调用一个将在我的网站后台运行的服务器端函数（当用户在页面之间导航并继续正常工作时）。

我想在我的 Main.Master.cs 页面中编写该方法，从内容页面的客户端调用它，并在执行结束时显示一个弹出窗口。

可能吗？如何从内容页面客户端调用 Main.Master.cs 方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:56:00.213

我有类似的问题。
我使用`jQuery ajax`reuring`generic http handler`我`json`
创建了处理程序并将我的业务逻辑放在那里。
它以`json`
我迭代`json`使用 jquery 的形式返回结果。
并创建了我的 html 表单。

## 编辑 1

这里有一些有用的链接
[http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev](http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev)
[http://www.sharepointnutsandbolts.com/2010/11/sp2010- ajax-part-4-returning-json-from.html](http://www.sharepointnutsandbolts.com/2010/11/sp2010-ajax-part-4-returning-json-from.html)

## 编辑 2

如果你想从服务器到页面显示一些东西，你也可以利用 jtemplate。
[http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/](http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/)
[http://encosia.com/use-jquery- and-aspnet-ajax-to-build-a-client-side-repeater/](http://encosia.com/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:56:06.080

是的，如果您在应用程序中使用 Ajax，这是可能的。

这是有关如何执行此操作的详细文章。 [http://www.dotnetcurry.com/ShowArticle.aspx?ID=109](http://www.dotnetcurry.com/ShowArticle.aspx?ID=109)

# java - 如何读取 Json 格式

> ID：15320393
> 
> 赞同：-2
> 
> 时间：2013-03-10T08:30:50.547
> 
> 标签：java, android, json

我是一名 android 应用程序程序员，现在正在研究 JSON，我有一种 json 格式，如下所示。我正在为我的 android 程序获取这种格式的表单服务器，但问题是无法在 listview 中显示结果。可以为我提供读取该 json 格式的逻辑。

```
{
"1":
    {
        "sub1":{"marks":"10",
            "maxmarks":"60",
            "grade":"D"
            },
        "sub2":{"marks":"",
            "maxmarks":"60",
            "grade":""
            }
    },
"2":
    {
        "sub3":{"marks":"30",
            "maxmarks":"60",
            "grade":"B"
            },
        "sub4":{"marks":"",
            "maxmarks":"60",
            "grade":""
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:37:48.043

在 Android 中使用 JSONObject：http: [//developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

这是一个很好的教程：[http ://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)

例如：

```
JSONObject json = new JSONObject(<your json string>); 
JSONObject objectOne = json.getJSONObject("1");
JSONObject subOne = objectOne.getJSONObject("sub1");
string marksOne = subOne.getString("marks");
string maxMarksOne = subOne.getString("maxmarks");
string gradeOne = subOne.getString("grade"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:49:43.937

你想在你的 ListView 中显示什么信息？这将帮助我们帮助您解析它。

对于初学者，您可以使用...将数据与两个对象分开

```
 //Assuming your original object is named responseObj
    JSONObject obj1 = responseObj.getJSONObject("1");
    JSONObject obj2 = responseObj.getJSONObject("2");

    //Now to get each piece of data
    JSONObject s1 = obj1.getJSONObject("sub1");
    string marks1 = s1.getString("marks");
    string maxMarks1 = s1.getString("maxmarks");
    string grade1 = s1.getString("grade");

    JSONObject s3 = obj2.getJSONObject("sub3");
    string marks3 = s3.getString("marks");
    string maxMarks3 = s3.getString("maxmarks");
    string grade3 = s3.getString("grade"); 
```

从这里你有所有的数据，并可以将它们添加到 TextView 中的 ListView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:35:05.337

有许多库可以帮助您完成任务，例如[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)或[GS​​ON](https://sites.google.com/site/gson/gson-user-guide)

# lua - 在构造函数中为对象提供坐标。电晕

> ID：15320395
> 
> 赞同：0
> 
> 时间：2013-03-10T08:31:02.520
> 
> 标签：lua, coronasdk

我有一个汽车课：

```
local car={};
local car_mt = { __index=car };
function car.new(_x, _y)
    local ncar=
    {
        img=display.newImageRect("test_car.png",50,120,true);
    }
    function ncar:set()
        self.img.xOrigin=_x;
        self.img.yOrigin=_y;
    end
    ncar:set();
    return setmetatable(ncar,car_mt);
end
return car; 
```

当我这样称呼它时：

```
local pcar=require("car")
local car1=pcar:new(200,200); 
```

x 运动不起作用。当我将 xOrigin 和 yOrigin 更改为 x 和 y 时，没关系。但是当我这样称呼它时：

```
local pcar=require("car")
local car1=pcar:new(200,200);
car1.img.x=200;
car1.img.y=200; 
```

结果没问题。此外， car1.x 是 nil ，我不明白，没有父母的坐标，img 怎么会有自己的坐标。我应该在 set() 函数中写什么来为我的汽车参考提供阶段 x 和 y？有没有可能真的把它给参考，而不是给img？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:51:40.607

您应该调用不带冒号的构造函数

```
local car1=pcar.new(200,200); 
```

# parsing - 在哪里可以找到 InlinePageParser 类？

> ID：15320402
> 
> 赞同：0
> 
> 时间：2013-03-10T08:32:00.203
> 
> 标签：parsing, razor, dynamic-compilation

`InlinePageParser`找到了几个解析 cshmtl 文件的示例后，我想自己进行一些实验，但在任何可用的程序集或命名空间中都找不到该类。我用 VS 2012 安装了 MVC3 和 4，我有 WebMatrix。

我正在查看的示例具有导入：

```
using Microsoft.WebPages.Compilation;
using Microsoft.WebPages.Compilation.Parser; 
```

有的readin显示`Microsoft.WebPages`已经被替换了`System.Razor`，但是新的命名空间只有`System.Web.Razor.Parser`一无所知`InlinePageParser`。一个班级怎么会就这样消失？它做了什么可怕的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:48:10.767

这个类现在被调用[`RazorParser`](http://msdn.microsoft.com/en-us/library/system.web.razor.parser.razorparser%28v=vs.111%29.aspx)并且是`System.Web.Razor.dll`程序集的一部分。

# jquery - Jquery字体大小调整为divs高度？

> ID：15320405
> 
> 赞同：0
> 
> 时间：2013-03-10T08:32:49.077
> 
> 标签：jquery, html, css

有没有办法将字体大小调整为 div 框或 ? 的高度。我知道有很多方法可以将字体大小调整为父元素的宽度，但我找不到将字体大小调整为高度的方法。

我在一个表中有几行：

```
 <table>
 <tr>
 <td> Line 1 </td>
 </tr>
 <tr>
 <td> Line 2 </td>
 </tr>
 <tr>
 <td> Line 3 </td>
 </tr>
 </table> 
```

表格的高度为视口的 100%。因此，每个 td 的高度为 33.33%。这意味着每行的字体高度应该占视口的 33.3%！不知道如何实现这一目标！我很高兴每个有用的链接或答案！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:40:50.430

jQuery 的[height()](http://api.jquery.com/height/)对你有用吗？

```
var height = $('td').height();
$('td').each(function() {
  $(this).css({'font-size': height + 'px', 'line-height': height + 'px'});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:03:15.727

如果您不需要[支持旧浏览器](http://caniuse.com/#feat=viewport-units)，您可以使用[CSS3 中的新视口单元](http://css-tricks.com/viewport-sized-typography/)：

```
html, body {
    height: 100%;
    font-size: 100vh;
}
table {
    height: 100%;
}
td {
    font-size: 33.3%;
} 
```

[http://jsfiddle.net/ZaJ8w/](http://jsfiddle.net/ZaJ8w/)

# spring - org.hibernate.AnnotationException：没有为实体指定标识符 - 即使它是

> ID：15320408
> 
> 赞同：53
> 
> 时间：2013-03-10T08:33:17.370
> 
> 标签：spring, hibernate, spring-data, spring-data-jpa

我有以下配置：

```
<bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="jpaDataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="packagesToScan">
        <list>
            <value>com.example.domain</value>
            <value>com.example.repositories</value>
        </list>
    </property>
</bean> 
```

我在 com.example.domain 中有我的 Geoname 类：

```
@Entity
@Table(name="geonames")
public class Geoname implements Serializable {

    @Id
    @Column(name="geonameid")
    private Long geonameid = null;
} 
```

然而，在运行时，我得到以下异常：

> 引起：org.hibernate.AnnotationException：没有为实体指定标识符：com.example.domain.Geoname at org.hibernate.cfg.InheritanceState.determineDefaultAccessType(InheritanceState.java:277) at org.hibernate.cfg.InheritanceState.getElementsToProcess( InheritanceState.java:224) 在 org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:664) 在 org.hibernate.cfg.Configuration$MetadataSourceQueue.processAnnotatedClassesQueue(Configuration.java:3449) 在 org.hibernate.cfg.Configuration $MetadataSourceQueue.processMetadata(Configuration.java:3403) 在 org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1330) 在 org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1730)

任何想法为什么？

旁注：我在这个项目中结合了 mongodb 和 hibernate/mysql。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-03-10T15:22:07.293

我有以下

```
import org.springframework.data.annotation.Id; 
```

自然应该是：

```
import javax.persistence.Id; 
```

感谢@JB Nizet

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-07-11T16:39:55.750

我遇到了同样的错误。我解决了它并发现我没有在我的实体类的 id 字段中添加@Id 注释。

```
@Entity
@Table(name="geonames")
public class Geoname implements Serializable {

    @Column(name="geonameid")
    private Long geonameid = null;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-10T08:35:07.113

试试这个

```
 @Column(name="geonameid",unique=true,nullable=false) 
```

# css - 如何使中间 div 成为小屏幕上的第一个

> ID：15320427
> 
> 赞同：5
> 
> 时间：2013-03-10T08:36:25.563
> 
> 标签：css

当屏幕很宽时，我有 3 个并排显示的 div：

```
<div class="div1"></div><div class="div2"></div><div class="div3"></div> 
```

* * *

## | div1 | div2 | div3 |

（所有都只是漂浮在左边）

这些工作正常，但是当屏幕变小时，我希望它们显示为：

* * *

## | div2 |

## | div1 | div3 |

所以中间的 div 是什么必须被拉出并成为顶部的 div

我可以用 css 做到这一点吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:48:57.903

您是否能够编辑 HTML 并使用绝对定位？我倾向于从小屏幕到大屏幕工作，一种选择是使用以下内容：

HTML

```
<div class="div2"></div><div class="div1"></div><div class="div3"></div> 
```

CSS

```
div {
    float: left;
} 
```

然后，当屏幕足够大时（使用媒体查询检查）：HTML 保持不变

CSS

```
div.div1 {
    float: none;
    position: absolute;
    top: 0;
    left: 0;
}
div.div2 {
    display: inline; /* pesky older IE */
    margin-left: "width of div.div1 (%/em/px)";
} 
```

# asp.net - ASP.NET ConnectionString AttachDbFilename=|数据目录|

> ID：15320428
> 
> 赞同：5
> 
> 时间：2013-03-10T08:36:31.193
> 
> 标签：asp.net, sql, connection-string

这是关于带有 Visual Studio 2012 Ultimate 和 SQL Server Express 2012 的 ConnectionStrings / ASP.NET MVC。

在此处跟进本教程：[http](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4) ://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4我遇到了一个问题我的 web.config 中的这两个连接字符串：

```
<connectionStrings>
    <add name="DefaultConnection" 
         connectionString="Data Source=(LocalDb)\v11.0;
                           Initial Catalog=aspnet-MvcMovie-users;
                           Integrated Security=SSPI;
                           AttachDBFilename=|DataDirectory|\aspnet-MvcMovie-users.mdf"
         providerName="System.Data.SqlClient" />

    <add name="MovieDBContext" 
         connectionString="Data Source=(LocalDB)\v11.0;
                           AttachDbFilename=|DataDirectory|\Movies.mdf;
                           Integrated Security=True" 
         providerName="System.Data.SqlClient" />
</connectionStrings> 
```

该网站运行良好，但我无法弄清楚为什么第一个数据库是在 App_Data 文件夹中创建的，而第二个数据库是在“C:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\DATA”中创建的？！我认为两者都将在 App_data 中创建，因为两者都使用此属性：AttachDBFilename=|DataDirectory|！

注意：教程提到它应该在 App_Data 中，他们添加了一个屏幕截图，确实显示了它！

我一直在寻找答案并陷入了 SQL 的共谋（我认为用户实例可能是解决方案），但无法找到答案：|

（这可能有助于了解用户实例[http://msdn.microsoft.com/en-us/library/bb264564(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/bb264564(v=sql.90).aspx)）

任何想法都非常感谢。提前致谢。

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T10:15:34.353

经过研究/测试，结果如下：

VS 将查看 DataContext 的类名，并查看您是否提供了与类名同名的连接字符串；例如：

```
public class MovieDataContext : DbContext 
```

和

```
<connectionStrings><add name="MovieDataContext" ... 
```

如果它设法找到匹配的连接字符串，它将根据您在相应数据字符串中指定的条件创建数据库（要将数据库添加到 App_Data，请将数据库的路径设置为 |DataDirectory|，如提到的两个连接字符串中所示在问题中）；**如果名称不匹配或者您没有提供任何连接字符串，VS 将回退到默认设置并在默认位置/设置**（通常是 C:\Program Files\Microsoft SQL Server\MSSQL11\. SQLEXPRESS\MSSQL\DATA）。

请注意，“集成安全性”设置和“初始目录”都不会对此发挥任何作用（我能够在 App_Data 中创建具有集成安全性 = True 和集成安全性 = SSPI 并且有/没有初始目录的数据库）。

希望这可以帮助。感谢所有参与的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:35:22.593

我遇到过同样的问题。我相信区别在于集成安全设置。我安装了 SQLExpress，并使用 MS SQL Server Management Studio 在其中找到了我的电影数据库。

查看此响应以获得更好的解释。[Integrated Security = True 和 Integrated Security = SSPI 之间的区别](https://stackoverflow.com/questions/1229691/difference-between-integrated-security-true-and-integrated-security-sspi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:50:23.137

AMT 给出的完全正确。将连接字符串与 .mdf 和 .sdf 文件一起使用很令人困惑。

不过，我有另一个指针，您可以更改默认设置，在该设置中，应用程序通过覆盖 DBContext 的构造函数并提供参数 nameOrConnectionString 来查找名称与上下文类的类名匹配的连接字符串，如下所示

> ```
> public BlogsContext()
>             : base("name=EFBlogs")
>         {
>         } 
> ```

然后应用程序搜索名为 EFBlogs 的连接字符串，如果找不到连接字符串，则创建名为 EFBlogs 的数据库，而不是 BlogsContext

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-09T01:19:39.483

嗨，我注意到添加数据库时有所不同，如果单击“是”，它会询问您是否希望将其放置在 app_data 文件夹中，然后它会转到 app_data 文件夹，并且 mdf 的完整路径名也在 app_data 文件夹中您使用文件资源管理器。

# php - PHP 回显表

> ID：15320429
> 
> 赞同：0
> 
> 时间：2013-03-10T08:36:33.973
> 
> 标签：php, html, mysql, css

**概述**

我在 MySql 数据库中存储了一些与产品相关的数据。我正在尝试检索此数据并将其显示在使用 HTML 表的页面上。PHP 和 MySql 运行良好，所有数据都已检索到，但显示方式非常混乱。

这是我的布局：

![在此处输入图像描述](../Images/e2aa06b0712cc17a3c7daf7be05e8760.png)

我的目标是进一步划分结果表添加更多列行以使数据更具可读性

像这样的东西；

![在此处输入图像描述](../Images/5ad26cc4db68cfdc1e555377b73f530b.png)

代码：PHP、MySQL 和 HTML：

```
<?php

    session_start();

    include('connect_mysql.php');

    $product_name = 'product_name';
    $product_qua = 'product_qua';
    $product_price = 'product_price';
    $product_image = 'product_image';
    $product_des = 'product_des';

$sql = mysql_query("SELECT * FROM products");

 echo "<table id='display'>";

while($rows = mysql_fetch_array($sql))
{
    echo"<br>";
    echo"<tr><td>";
    echo"$rows[$product_name]<br></td>";

    echo"<td><img src=$rows[$product_image] height='200px' width='200px'><br></td>";
    echo"<td>Avalible: $rows[$product_qua]<br></td>";
    echo"<td>Price: $rows[$product_price]<br></td>";
    echo"<td>Description: $rows[$product_des]<br></td>";    
    echo"</tr>";

}

echo "</table>";
?> 
```

CSS负责这部分：

```
#display{
    float:left;
    border: 5px solid black;
    margin-left:100px;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T08:42:31.083

只需向表格单元格添加一些填充或边框：

```
table#display td{
    border: 1px solid black;
    padding:0 8px;

} 
```

编辑：你也可以做的：

```
<table id='display'>
<?php while($rows = mysql_fetch_array($sql)): ?>
    <!-- <br>  <- why a break? it's not in the correct spot anyway --> 
<tr><td>
<?php echo $rows[$product_name]; ?><br>
</td>
<td> - </td>
<td><img src="<?php echo $rows[$product_image]; ?>" height='200px' width='200px'><br></td>
<td> - </td>
<td>Avalible: <?php echo $rows[$product_qua]; ?><br></td>
<td> - </td>    
<td>Price: <?php echo $rows[$product_price]; ?><br></td>
<td> - </td>
<td>Description: <?php echo $rows[$product_des]; ?><br></td>
</tr>
<?php endwhile; ?>
</table> 
```

提示：我更喜欢使用 while/endwhile；在向用户显示数据时使用方括号而不是使用方括号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T08:40:47.073

首先不要使用 PHP 回显那么多 HTML，而是这样做

```
<?php
    session_start();

    include('connect_mysql.php');

    $product_name = 'product_name';
    $product_qua = 'product_qua';
    $product_price = 'product_price';
    $product_image = 'product_image';
    $product_des = 'product_des';

$sql = mysql_query("SELECT * FROM products"); ?> 

<table id='display'> 
    <?php 
        while($rows = mysql_fetch_array($sql)) { 
    ?>
       <tr><td><?php echo $rows[$product_name]; ?></td>
       <!-- And so on--> 
     <?php   
        } 
     ?> 
 </table> 
```

其次，通过查看您的图像，您的表格似乎需要边框，因此请使用

```
table, td {
   border: 1px solid #000000;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T08:42:24.627

添加以下 css 以在表格单元格上应用边框：

```
#display td{ border: 2px solid red; } 
```

并可选择添加到您的 #display { ：

```
border-collapse: collapse; 
```

# linux - 当用户更改到特定目录时向终端打印一条消息？

> ID：15320430
> 
> 赞同：3
> 
> 时间：2013-03-10T08:36:34.330
> 
> 标签：linux, shell, unix, administration

在 unix 中，是否有可能在用户更改（cd）到特定目录后显示系统消息？

我知道 motd，但我想知道是否有类似于在 shell 中导航的东西。例如，如果我输入

```
cd /etc/apache2/ 
```

一条消息可以打印到屏幕上......类似于：

> “此目录下最新修改的配置是……” “请谨慎修改……和……”

所有用户都可能看到的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:33:32.523

您可以在进入文件夹时要执行的每个文件夹中创建一个脚本文件。然后你可以使用环境变量`PROMPT_COMMAND`来检查它并执行。例如：

```
export PROMPT_COMMAND='test -x ./.prompt_command && ./.prompt_command' 
```

`.prompt_command`仅当当前文件夹存在并设置了可执行位时，这才会执行在当前文件夹中调用的脚本。

# three.js - 如何在 THREE.js 中将网格从 Object3D 动态添加到新对象

> ID：15320432
> 
> 赞同：1
> 
> 时间：2013-03-10T08:36:49.733
> 
> 标签：three.js

我是 3d 编程的完全新手，并且已经使用 three.js 一个多星期了。我已经设法加载了多个 collada 和 obj 文件，并设法从示例中获得了视角、轨迹球和一切工作。但是，现在我被困住了，需要一些帮助。作为参考，您可以在以下网址查看我发布的文件：

[http://shaman-labz.appspot.com/webgl_loader_obj_mtl.html](http://shaman-labz.appspot.com/webgl_loader_obj_mtl.html)

这个页面基本上直接来自示例，除了我正在加载一个 obj 文件，该文件将所有这些对象作为网格。我现在正在做的是在加载 obj 之后，我将遍历对象中的所有几何图形并提取它们，以便我可以在需要它们时将它们放置在场景中，或者让它们像漂浮一样气泡什么的。我在想也许可以尝试使用菲涅耳示例，但这是我遇到了我的理解界限的地方，有些术语让我无法理解。

我的问题是，当它运行时，加载后返回并添加到场景中的对象将所有这些宝石放在一起。

因此，而不是以下几行：

```
var loader = new THREE.OBJMTLLoader();
loader.addEventListener( 'load', function ( event ) {
    var object = event.content;
    object.position.y = - 100;
    scene.add( object );
});
loader.load( 'obj/gems/24.obj', 'obj/gems/24.mtl' ); 
```

所以我正在做的是当对象返回时，我在调试/中断模式下查看内部结构，我看到它是一个 object3D 和 object.children 是一个由 25 个网格组成的数组......每个网格都是我想单独使用的“宝石”之一。

所以这就是我迷路的地方......当我抓住“网格”时，我是否需要剥离底层的几何图形并创建一个新的网格？

在这个页面上，你可以看到我试图完成的事情：

[http://shaman-labz.appspot.com/webgl_loader_obj_mtl2.html](http://shaman-labz.appspot.com/webgl_loader_obj_mtl2.html)

唯一的主要区别在于这部分代码：

```
var loader = new THREE.OBJMTLLoader();
loader.addEventListener( 'load', function ( event ) {
        var object = event.content;
        var pos=0;
        for(var i=0; i< object.children.length; i++){
            var m = object.children[i];
            var gem = new THREE.Object3D();
            gem.name=m.name;
            gem.add(m);                     
            gem.position.x = -10;
            gem.position.y = -10;
            gem.position.z = pos;
            scene.add( gem );
            pos = pos - 10;
    }
});
loader.load( 'obj/gems/24.obj', 'obj/gems/24.mtl' ); 
```

请注意，25 颗宝石中只有 13 颗出现在集合中，并注意它们是如何分散的，这表明它们仍以某种方式与一些我无法正确设置位置的高阶关系相关联（就像每个网格都是以某种方式相对于它在加载的原始对象中的原始位置偏移......认为这与世界矩阵有关？

# uiview - Monotouch - UIView.Animate 在子视图中什么都不做，为什么？

> ID：15320437
> 
> 赞同：0
> 
> 时间：2013-03-10T08:37:50.640
> 
> 标签：uiview, xamarin.ios

我有一个名为 DoRotate() 的虚拟函数，它执行子视图旋转的动画。很简单......它是从一个计时器事件中触发的，并且总是在主线程上调用。

这就像一个魅力......

现在，我对整个视图进行子类化，并创建另一个尝试做同样事情的视图。它显示为主视图的子视图（全屏）......现在， UIView.Animate() 是一个无操作......它根本不会执行块内的代码。它实际上是在另一个视图中调用的完全相同的函数......它试图为子视图设置动画（原始视图的子子视图......

但这就像操作系统只是在说“太糟糕了，太可悲了，我们不再工作了......” - 这是操作系统的典型特征，但这是另一个话题......

最初，我试图让这个视图成为另一个可以从基本视图翻转到的视图，但显然，如果没有导航控制器，它将无法工作，如果你有一个，那么我创建的弹出菜单将不再弹出...

```
 UIView.Animate (tm, 0, UIViewAnimationOptions.CurveLinear, () =>
        {
            MapRotating = true;
            _DoRotate ();
        },
        () => {
            MapRotating = false;});
        } 
```

MapRotating = true; 永远不会被调用..我已经把它放在动画调用之前，但是如果动画失败它就不会再尝试了......这样，它会永远失败......

_DoRotate 计算要旋转的角度并旋转它（设置变换）...

是否有一个 UIView.LastError() 方法，我可以调用它来告诉我为什么它忽略我的请求......（哦，如果我们传递了它不喜欢的东西，抛出异常怎么样？）

-克里斯

# c++ - 为什么我会从这个无符号整数中得到段错误？

> ID：15320447
> 
> 赞同：4
> 
> 时间：2013-03-10T08:40:25.737
> 
> 标签：c++, c, segmentation-fault, sieve-of-eratosthenes

我正在尝试初始化一个整数数组并将所有元素设置为 1。我需要该数组的上限为 4294967295，或 32 位可能的最大数量`unsigned int`。

这对我来说似乎是一项微不足道的任务，应该是，但我遇到了`segfault`. 我可以`for`空循环运行它，它似乎工作正常（虽然速度很慢，但它正在处理近 43 亿个数字，所以我不会抱怨）。当我尝试在循环中执行任何类型的操作时，问题似乎出现了。我在下面的指令 - `primeArray[i] = 1;`- 导致`segfault`错误。据我所知，这不应该导致我超出数组。如果我注释掉那一行，没有`segfault`。

已经很晚了，我疲惫的眼睛可能只是错过了一些简单的东西，但我可以用另一副。

这是我所拥有的：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <stdint.h>

#define LIMIT 0xFFFFFFFF;

int main(int argc, char const *argv[])
{
    uint32_t i;

    uint32_t numberOfPrimes = LIMIT;        // hardcoded for debugging
    int *primeArray = (int*) malloc(numberOfPrimes * sizeof(int));

    for (i = 0; i < numberOfPrimes; ++i) {
        primeArray[i] = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T08:43:07.967

检查返回代码`malloc()`以确保实际分配了数组。我怀疑以下测试会失败：

```
int *primeArray = (int*) malloc(numberOfPrimes * sizeof(int));

if (primeArray != NULL) {  /* check that array was allocated */
    for (i = 0; i < numberOfPrimes; ++i) {
        primeArray[i] = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T08:50:42.020

您的`malloc`呼叫向系统请求 16 GB 的内存。如果您没有那么多可用的虚拟内存，或者如果您在任何 32 位系统上运行，则调用将失败。如果您不检查 的失败`malloc`，因为您的代码没有检查，则数组将是`NULL`并且任何后续对其元素的访问都将导致分段错误。

如果你真的需要处理这么大的数组，你要么需要一个具有大量内存的 64 位系统，要么重写你的程序以使用较小的工作集，然后将其余部分保存到磁盘。

# css - 如何在此屏幕截图中将点作为带有内联文本的水平分隔符？

> ID：15320448
> 
> 赞同：4
> 
> 时间：2013-03-10T08:40:31.567
> 
> 标签：css, frontend

前几天我在浏览[这个 iA 博客文章](http://informationarchitects.net/blog/responsive-typography-the-basics/)，并试图弄清楚**他们是如何在日期周围使用点作为分隔符的**。

我查看了 CSS，发现只有使用他们自己的特殊字体才有可能。有没有办法在不使用他们的字体的情况下做到这一点？如果不使用图像来做同样的事情，会有什么黑客行为？

截图如下：

* * *

![博客](../Images/f8cc3fb7cb824624f18b568df03ceb69.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:22:24.607

我曾经有同样的问题，我想出了这个：

```
.lined{ display:table-row; width:auto; white-space:nowrap; position:relative; }
.lined:before,.lined:after {content:''; 
display:table-cell; 
width:50%;
position:relative;
height:20px;
background: url(http://www.xpy.gr/css/img/text-deco.png) 7px no-repeat;
} 
```

我使用伪元素和一些类似表格的功能。它有一些限制，但它总是会伸展到全宽。您所要做的就是更改`background`并将类添加到您选择的元素中。

演示：[http ://dabblet.com/gist/2172806](http://dabblet.com/gist/2172806)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T09:41:07.893

我使用负（相对 em）边距将标题放在包含块的虚线顶部边框上。这应该在字体大小更改时保存代码。有关示例，请参见[CodePen](http://codepen.io/anon/pen/puyqJ)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T08:43:18.917

例如，您可以使用`div`顶部带有虚线边框的 a ，就像在这个[jsFiddle](http://jsfiddle.net/9pYMh/1/)中一样。

基本上，您可以将文本放在边框上（即使用绝对定位）并为其应用白色背景。

```
<div>
    <p>I. JUNE 2012</p>
</div>

div {
  border-top: 2px dotted #eee;
  position: relative;
  text-align: center;        
}

p {
  background: white;
  position: absolute;
  top: -25px;
  padding: 0 10px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T08:43:41.597

创建一个带有虚线边框的元素，并在其中居中放置一个具有白色背景且位置超出父级高度的元素。

一个粗略的例子：

**HTML**

```
<div class="title_container">
    <div class="title">I. June 2012</div>
</div> 
```

**CSS**

```
.title_container {position:relative;height:20px;border-bottom:1px dotted #000;}

.title_container .title {display:table;position:relative;top:10px;left:0;right:0;margin:0 auto;padding:0 10px;background:#FFF;} 
```

参见**[jsFiddle 演示](http://jsfiddle.net/soboaz/MrtXj/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T08:55:49.513

你可以使用这样的[东西](http://jsfiddle.net/3wtNT/)。但它对字体和大小变化可能不是很健壮。

HTML：

```
<div id='container'>
    <div class='dotted'>
        <span>2013-03-10</span>
    </div>
</div> 
```

CSS：

```
#container {
    width: 30em;
}

.dotted {
    text-align: center;
    position: relative;
    top: 1em;
    border-top: 1px dotted #888;
    overflow-y: visible;
}

.dotted span {
    display: inline-block;
    position: relative;
    top: -0.75em;
    background: #fff;
    padding: 0 1ex;
} 
```

# c# - 从字符串 c# 中获取 Control 类型

> ID：15320449
> 
> 赞同：1
> 
> 时间：2013-03-10T08:40:40.243
> 
> 标签：c#, types

我有一个这样的字符串：

```
typeStr = label1.GetType().ToString(); 
```

现在我想`type`通过`typeStr`.

我尝试了一些类似`Type.GetType(typeStr)`但没有帮助的功能。

有什么简单的获取方法`type`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:47:34.047

您可以传递全`Type`名

```
Type type = Type.GetType("System.Windows.Forms.Label"); 
```

这将创建类型并创建您可以使用的对象实例`Activator.CreateInstance`

```
object obj = Activator.CreateInstance(type); 
```

* * *

## 使用`Type`已加载`AppDomain.CurrentDomain.GetAssemblies()`

```
 private void btnAddDymanicLabel_Click(object sender, EventArgs e)
    {
        Type type = GetTypeNameFromDomain("System.Windows.Forms.Label");
        Label lbl = (Label) Activator.CreateInstance(type);
        this.Controls.Add(lbl);
        lbl.Text = "dynamic created control";

    }

    private Type GetTypeNameFromDomain(string typename)
    {
        return AppDomain.CurrentDomain.GetAssemblies().SelectMany(assembly => assembly.GetTypes().Where(type => type.FullName == typename)).FirstOrDefault();
    } 
```

一个简单的例子：

```
static void Main(string[] args)
{
    Type type = Type.GetType("System.Int32");
    object obj = Activator.CreateInstance(type);
    int num = (int) obj;
    num = 10;
    Console.WriteLine(num); // prints : 10
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:53:12.800

您的意思是您只想从这样的字符串中获取该类型的实例吗

```
classname instance = Activator.CreateInstance("<assemblyname>","<classname>") as classname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:45:27.943

尝试获取名称

```
typeStr = label1.GetType().GetFullName(); 
```

然后

```
type = Type.GetType(typeStr); 
```

# c - 按字母顺序排列二维数组

> ID：15320452
> 
> 赞同：0
> 
> 时间：2013-03-10T08:41:04.097
> 
> 标签：c, string, multidimensional-array, openvms

我正在用 C 语言做一个带有字符串的练习，我必须对文本中的一些单词进行排序。

```
#include <stdio.h>
#include <string.h>

main(){
        int cch=0, cw=0, i, j, w=0, ord=0, f=0; //counter and index
        char testo[80];
        char alfa[50][25];
        char swap[25];

        printf("Write the test:\n");
        gets(testo);

        if(testo[0]!='\0'){
                cw=1;   
                for(i=0;testo[i]!='\0';i++){
                        cch++;
                        if(testo[i]==' '){
                                cw++;
                        }
                }
        }

        for(i=0;i<cch;i++){
                if(testo[i]==' ' && testo[i+1]==' '){
                        cw--;
                }
        }

        if(testo[0]==' '){
                cw--;
                w--;
        }

        printf("\nIn the test there are %d characters\n", cch);
        printf("In the test there are %d words\n", cw);

        if(cw>0){
                printf("\nUsed words:\n");
                for(j=0;j<cch;j++){
                        if(testo[j]==' ' && testo[j+1]==' '){
                                //nothing to do       
                        }
                        else{
                                if(testo[j]!=' '){
                                        alfa[w][f]=testo[j];
                                        f++;
                                }
                                else if(testo[j]=='\0'){
                                        alfa[w][f]='\0';
                                        f=0;
                                        w=0;
                                }
                                else{
                                        alfa[w][f]='\0';
                                        w++;
                                        f=0;
                                }
                        }
                }

                for(i=0;i<cw;i++){
                        printf("%d> %s\n", i+1, &alfa[i]);
                }

                //order
                f=1;
                printf("\nWord used in alphabetical order:\n");
                while(f==1){
                        f=0;
                        for(i=0;i<cw-1;i++){
                                ord=strcmp(alfa[i],alfa[i+1]);
                                if(ord>-1){
                                        strcpy(swap,alfa[i]);
                                        strcpy(alfa[i],alfa[i+1]);
                                        strcpy(alfa[i+1],swap);
                                        f=1;
                                }       
                        }
                }

                for(i=0;i<cw;i++){
                        printf("%d> %s\n", i+1, alfa[i]);
                }
        }
        else{
                printf("You haven't written any word.\n");
        }
} 
```

问题是，如果有两个相同的词，而且词多于2，我有一个循环，我没有任何结果，我该怎么办？在 OpenVMS 上测试。谢谢你。

PS：我知道目前有很多错误，但我遇到了解决这个问题的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T08:45:21.097

```
if(ord>-1){
    /* ... */
} 
```

如果两个单词相同`strcmp`将返回`0`。这将交换这两个词，直到你的下一个电费账单进来并且你关闭你的程序。相反，检查结果是否大于零：

```
if(ord > 0){
    /* ... */
} 
```

也可以看看：[`strcmp`](http://en.cppreference.com/w/cpp/string/byte/strcmp)

# javascript - 带有 CSS 的彩色 SVG 图像

> ID：15320453
> 
> 赞同：0
> 
> 时间：2013-03-10T08:41:06.343
> 
> 标签：javascript, svg

有没有办法可以将颜色应用到整个 SVG 图像？不去我拥有的每条路径和圈子和线并一一做吗？

我试图将我的 svg 元素与

```
<g class="myImage"> 
```

在 myImage 类中，我放了 fill:red 以使其适用于该组中的所有元素，但这不起作用！

我怎样才能使它只能应用一次颜色，然后它会应用于整个图像或组中的元素？

--添加代码

这是我的 SVG 文件（这只是一个示例，我知道圆圈重复了 3 次）

```
<?xml version="1.0" standalone="no"?>
<?xml-stylesheet href="../css/logo.css" type="text/css"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">

<g class="logo">  
    <circle cx="50%" cy="50%" r="35%"/>
    <circle cx="50%" cy="50%" r="35%"/>
    <circle cx="50%" cy="50%" r="35%"/>
</g>
</svg> 
```

在我的 logo.css 文件中我有一个类

```
.logo {
    fill:red;
} 
```

希望这可以帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:40:40.390

你做对了。填充应该从`<g>`元素继承，所有的圆圈都是红色的，一个在另一个上面。Firefox 显示一个大红色圆圈。

# jquery - 仅在 iframe 中放置元素，否则还原

> ID：15320455
> 
> 赞同：4
> 
> 时间：2013-03-10T08:41:33.833
> 
> 标签：jquery, jquery-ui, iframe, jquery-ui-draggable, jquery-droppable

编辑：1

这是drag.html（主页）-

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Sortable - Handle empty lists</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" />
<style>
.drag {padding:10px;border:1px solid blue;margin:20px;}
</style>
<script>
$(function() {

    $( ".drag" ).draggable({ helper: "clone",iframeFix: true, revert : 'invalid',cursor: "move"});

$('#frame').load(function(){
    $('#frame').contents().find('#sortable3').droppable({
        accept: ".drag",
        drop: function( event, ui ) {
            var html = '<div class="droptrue">'+ ui.draggable.html() + '</div>';
            //alert(html);
            $(this).append(html);   
        }
    });

});

});
</script>
</head>
<body>

<div class="drag" style="display:inline">
    Drag 1
</div>
<div class="drag " style="display:inline">
    Drag 2
</div>
<div class="drag " style="display:inline">
    Drag 3
</div>
<div class="drag " style="display:inline">
    Drag 4
</div>

<br/><br/><br/><br/><br/>

<iframe id="frame" src="iframe.html" width="700" height="400"></iframe>

<br style="clear: both;" />
</body>
</html> 
```

这是 iframe 代码 -

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Sortable - Handle empty lists</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" />
<style>
.droptrue {padding:5px;margin:5px 0px;border:1px solid green;}
</style>
</head>
<script>

$(function() {

    $( "#sortable3" ).sortable({
        placeholder: "ui-state-highlight"
    });

    $( ".droptrue" ).disableSelection();
});

</script>
<body>

<div id="sortable3" style="width:500px;height:300px;border:1px solid red;">

</div>

</body>
</html> 
```

[而且我知道没有 iframe，我可以像这里](http://dharmeshdhakan.com/examples/no_iframe.html)那样轻松地实现这一点 但是对于我当前的项目，我无法消除 iframe。所以，请帮助我。

[在这里](http://dharmeshdhakan.com/examples/drag.html)查看演示

红色框位于 iframe 内，如果您将元素拖放到红色框内，则可以正常工作。但是如果将它们放在框的底部，它会恢复原状。

此外，如果您将拖动框放在 iframe 附近（就在 iframe 上方），它也会成功删除。

我想要的是只有当它在红色框内恢复时才应该删除拖动框。

检查[这个](http://dharmeshdhakan.com/examples/no_iframe.html)

使用 iframe 时，可放置区域出现问题，但找不到解决方案。

提前致谢！

# java - 在 Java 中将 Oracle 函数作为字符串传递

> ID：15320456
> 
> 赞同：0
> 
> 时间：2013-03-10T08:41:46.660
> 
> 标签：java, sql, oracle, jdbc

我有这样的查询..

```
String query = "UPDATE tbl_customer_policies SET "+
        "start_date = ?," + 
        "next_pay_date = ?,"+
        "maturity_date = ?, " + 
        "modified_at = CURRENT_TIMESTAMP,"+
        "modifier = ?, status = ? " + 
        "WHERE id = ?"; 
```

现在代替占位符， `start_date`我想传递一个像`SYSDATE`.

我现在正在做的是将该字符串设置在一个名为的变量中`String startDate = "SYSDATE"`并将其绑定到该占位符。但我想它似乎不起作用。我得到了这个例外

**ORA-01858: 在需要数字的地方发现了一个非数字字符**

我必须通过这样的 Oracle 函数。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:57:32.630

如果它永远是`sysdate`你不需要参数化它。像这样直接在查询中设置它：

```
String query = "UPDATE tbl_customer_policies SET "+
        "start_date = sysdate," + // or "start_date = ADD_MONTHS(SYSDATE, 12),"
        "next_pay_date = ?,"+
        "maturity_date = ?, " + 
        "modified_at = CURRENT_TIMESTAMP,"+
        "modifier = ?, status = ? " + 
        "WHERE id = ?"; 
```

并像以前一样设置所有其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:16:07.500

例如使用函数 TO_DATE ( [docs](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions203.htm#SQLRF06132) )

```
 "UPDATE tbl_customer_policies SET "+
     "start_date = TO_DATE(?, 'DD-MON-RR')," + 
    "next_pay_date = TO_DATE(?, 'DD-MON-RR'),"+ 
```

在这种情况下，不要忘记以“27-OCT-98”等格式传递参数。

PS我误解了这个问题，所以试着纠正我的答案。

所描述的问题是针对 PreparedStatement Java 类的限制。PreparedStatement 对象用于存储对某些预编译（和优化）SQL 语句的引用。
因此，您必须只提供参数值来填充它们。函数必须在使用它们的结果之前进行评估，并且它们不能被放置在那里。

我想您可以使用 Oracle 结构化类型的解决方法。您可以使用 PreparedStatement 的 setRef() 方法将它们作为引用类型传递。使用函数可以在对象的构造函数中使用包装器来实现。我没有尝试过，但在我看来这是一个可能的解决方案。

# mysql - 警告：mysql_query() 期望参数 2 是资源，在 /var/www/ 中给出的字符串

> ID：15320457
> 
> 赞同：2
> 
> 时间：2013-03-10T08:42:00.973
> 
> 标签：mysql, class, warnings

```
Warning: mysql_query() expects parameter 2 to be resource, string given
in /var/www/xxxxx/data/www/xxxxx.ru/xxxxx/classes/mysql.class.php on line 51 
```

```
 public function query($query, $comment = "") {
    if ($this -> conn) {
        $this -> conn = $this -> connect();
    }
    $start = microtime();
    if (!($result = mysql_query($query, $this -> conn)))  // <<-- line 51
    {
        exit(mysql_error());
    }
    $end*emphasized text* = microtime(); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:46:38.800

`$conn`很可能不会被初始化。

确保您`NULL`在构造函数中将 $conn 设置为并检查`if(!$this->conn)`（注意感叹号）或在构造函数中进行连接。

如果出现这样的错误消息，请考虑使用`var_dump`来检查相关变量的内容。

此外，只是为了完整起见：`mysql`-functions 被 -functions 取代`mysqli`。请考虑改用这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:47:49.690

你在这里有一个错误：

```
if ($this->conn) {
    $this->conn = $this -> connect();
} 
```

应该是`if (!$this->conn) {`。否则`$this->conn`永远不会初始化，并且您不会将资源传递给后续`mysql_query`。

（*我相信您在课堂上将其声明为空字符串`public $conn = '';`*：）

顺便说一句，您知道`mysql`扩展已被弃用，对吧？

# ruby - 安装 nokogiri 时出错

> ID：15320462
> 
> 赞同：9
> 
> 时间：2013-03-10T08:42:38.153
> 
> 标签：ruby, windows, nokogiri, jekyll

我正在尝试使用带有 ruby​​ 的启动命令提示符来使用 jekyll 和 jekyll-s3。使用时`gem install jekyll-s3`出现错误，提示缺少 libxml2，我应该访问[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)以获取安装依赖项的帮助。当我访问该页面时，它只是说我需要使用`gem install nokogiri`. 但是，当我这样做时，我会遇到类似的错误。

我在这里发现了一个类似的问题[错误安装 Nokogiri 1.5.0 with rails 3.1.0 和 ubuntu](https://stackoverflow.com/questions/8003523/error-installing-nokogiri-1-5-0-with-rails-3-1-0-and-ubuntu)但是，我不能使用 sudo 命令，因为我正在使用 Windows。[在安装 nokogiri 的 gem devkit（windows）时](https://stackoverflow.com/questions/6456762/libxml2-missing-when-installing-nokogiris-gem-devkit-windows)，我还发现这个问题libxml2 丢失，并尝试使用问题中包含的命令，我得到了问题中包含的相同错误输出。那里的评论似乎没有帮助。

我已经包含了下面安装 nokogiri 时出错的整个输出。我猜我需要安装某种先决条件包/库，但我不知道如何。我应该怎么做才能让这些宝石正常工作？

```
ruby 2.0.0p0 (2013-02-24) [x64-mingw32]

C:\Users\Ryan Lang>gem install nokogiri
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

C:/Ruby200-x64/bin/ruby.exe extconf.rb
The system cannot find the path specified.
checking for libxml/parser.h... no
-----
libxml2 is missing.  please visit http://nokogiri.org/tutorials/installing_nokog
iri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/Ruby200-x64/bin/ruby
    --with-zlib-dir
    --without-zlib-dir
    --with-zlib-include
    --without-zlib-include=${zlib-dir}/include
    --with-zlib-lib
    --without-zlib-lib=${zlib-dir}/
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/
    --with-xml2-dir
    --without-xml2-dir
    --with-xml2-include
    --without-xml2-include=${xml2-dir}/include
    --with-xml2-lib
    --without-xml2-lib=${xml2-dir}/
    --with-xslt-dir
    --without-xslt-dir
    --with-xslt-include
    --without-xslt-include=${xslt-dir}/include
    --with-xslt-lib
    --without-xslt-lib=${xslt-dir}/
    --with-libxslt-config
    --without-libxslt-config
    --with-pkg-config
    --without-pkg-config
    --with-libxml-2.0-config
    --without-libxml-2.0-config
    --with-pkg-config
    --without-pkg-config
    --with-libiconv-config
    --without-libiconv-config
    --with-pkg-config
    --without-pkg-config

Gem files will remain installed in C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/nokog
iri-1.5.6 for inspection.
Results logged to C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/nokogiri-1.5.6/ext/nok
ogiri/gem_make.out

C:\Users\Ryan Lang> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T16:42:42.063

我认为 Windows 上的 Ruby 2.0.0 和 x64 的 nokogiri 尚不受支持。我有一个类似的问题。

请访问：[https](https://github.com/sparklemotion/nokogiri/issues/864) ://github.com/sparklemotion/nokogiri/issues/864并转到底部以“观看”线程以获取更新。

# image - 允许放大图像但带有“放大镜”界面的深度缩放脚本

> ID：15320463
> 
> 赞同：1
> 
> 时间：2013-03-10T08:42:46.733
> 
> 标签：image, leaflet, zooming, deepzoom, magnify

我正在寻找一个基于图块的缩放脚本，它允许放大图像但具有“放大镜”界面。

通过“放大镜”界面，我的意思是类似于 Wadda，用户可以单击图像的某个部分并放大周围区域。放大的区域包含在覆盖缩略图的圆圈中。Wadda的演示可以在这里看到：http: [//maxpert.github.com/wadda/](http://maxpert.github.com/wadda/)

这个解决方案非常适合我的预期用途，除了脚本需要在任何事情发生之前加载整个高清图像这一重要事实。这对我的项目来说是不可行的，因为我的高清图像可以达到 5000x5000px 或更高。

而不是加载整个高清图像，像 Leaflet - Leafletjs.com 这样的基于图块的缩放解决方案会更合适。但我仍然希望“放大镜”缩放 UX 类似于瓦达。

我的问题是：**是否有脚本（或脚本的修改）将 Wadda 的 UX 与 Leaflet 的基于图块的深度缩放相结合？**

用户将能够单击较小缩略图的一部分，并在圆形叠加层中看到放大的区域 - 其中放大的区域是使用基于图块的加载来加载的。

PS：抱歉标题太长了。很难用一句话来描述我在寻找什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:27:48.443

高层次的回答，有一些疑问：

Leaflet`TileLayer`类有一个`tileload`您可以订阅的事件。Leaflet 中的瓦片是`img`元素，因此在这种情况下，您可以将`title`img 元素的属性设置为瓦片的高分辨率版本，这正是 wadda 所需要的。

问题是普通的瓦片服务器提供大小相同的瓦片。如果放大，您将获得更高分辨率的图块，但区域更小。*为了使 wadda 工作，我认为您需要相同*区域的高分辨率瓷砖。因此，如果原始图块是 256x256 像素，并且您想放大到 2 倍，则高分辨率 URL 必须提供相同区域的 512x512 像素图块。

从好的方面来说，考虑到一台服务器（或者可能是两台服务器），我怀疑它会像这样非常可行..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:57:41.097

我不知道这有多大帮助，但我想我会补充一点， http: [//openseadragon.github.com/](http://openseadragon.github.com/)（与 Leaflet 类似的技术）使用画布渲染到（当然，在支持画布的浏览器上） ，所以它可能更符合你想要做的事情。您可能会创建一个 OpenSeadragon 查看器，然后在它创建的画布上使用一个剪辑区域。您当然需要管理它的缩放和平移状态，以及在屏幕上移动它以匹配用户的鼠标。

就此而言，也许您可​​以通过在其包含的 div 上放置一个非常大的边界半径来对 Leaflet 做同样的事情。

无论如何，这两种解决方案都需要一些开发，但似乎是可能的。

我参与了 OpenSeadragon 项目，所以如果你最终使用它，我很想听听！

# javascript - Javascript 暂停

> ID：15320464
> 
> 赞同：0
> 
> 时间：2013-03-10T08:42:48.343
> 
> 标签：javascript, settimeout

我在我的 javascript 函数中使用下面的代码。我想在 10 秒后调用这个函数。但是该功能立即被触发！？！不知道发生了什么。

```
<script>
  function testing() {
    //other stuff
    setTimeout(testing2('value'), 10000);
  }
  function testing2(value) {
    //other stuff
  }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:44:05.763

`testing2`被立即调用，因为你用参数写了它。
`setTimeout`需要一个函数作为第一个参数。

如果你写`testing2('value')`javascript 当然必须首先执行你`testing2`的得到结果，然后才将结果传递给`setTimeout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:45:01.770

您需要将函数作为参数传递，而不是调用该函数。

```
setTimeout(function(){
    // Inside the callback we do what we want.
    testing2('value');
}, 10000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T08:45:59.490

问题是您将返回的值`testing2('value')`而不是函数传递给`setTimeout`.

尝试这个。

```
setTimeout(function() {
    testing2('value');
}, 10000); 
```

# php - 使用ajax刷新javascript

> ID：15320467
> 
> 赞同：0
> 
> 时间：2013-03-10T08:43:09.107
> 
> 标签：php, javascript, html, ajax, reload

当我使用 ajax 在页面上重新加载 div 时，它可以工作，但当我尝试重新加载脚本时却不行。我的 javascript 是动态的，来自数据库，我的 div 也是如此。这是我的代码：

```
 <ul id="classes">
            <?php
            $email = 'thomas990428@me.com_classes';

            $result = mysqli_query($con,"SELECT * FROM `$email` ORDER BY period"); if (!$result) echo mysqli_error(); else // ok, do your thing.

            $classcount = 1;

            while($row = mysqli_fetch_array($result))
              {

              $period = $row['period'];
              $teacher = $row['teacher'];
              $subject = $row['subject'];
              $subjecto = strtolower($subject);
              $subjecto = str_replace(' ', '', $subjecto);
              $grade = $row['grade'];

              echo "<li id='button" . $classcount . "' class='button' onclick='" . $subjecto . "(),homework" . $classcount . "()'><div class='deletebutton' onclick='deleteclass" . $subjecto . "()'>X</div><span class='course'>" . $classcount . ". " . $subject . "</span></li>\n";

              $classcount += 1;

              }

            ?>
    <script>

        <?php
        $email = 'thomas990428@me.com_classes';

        $result = mysqli_query($con,"SELECT * FROM `$email`");

        while($row = mysqli_fetch_array($result))
          {

          $period = $row['period'];
          $teacher = $row['teacher'];
          $subject = $row['subject'];
          $subjecto = strtolower($subject);
          $subjecto = str_replace(' ', '', $subjecto);
          $grade = $row['grade'];

          echo "function deleteclass" . $subjecto . "() { \n";
          echo "var hi = confirm('Are you absolutely sure you want to permantly delete this class? This cannot be undone.'); \n";
          echo "if (hi==true) \n";
          echo "{ \n";
          echo "document.getElementById('hiddenframe').src='deleteclass.php?class=".$subjecto."';";
          echo "closeedit();";
          echo "refreshclasses();";
          echo "} \n";
          echo "else \n";
          echo "{} \n";
          echo "} \n";

          }

        ?>

    </script>
        </ul>
        <iframe id="hiddenframe"></iframe> 
```

所以基本上它会刷新 ul 而不是脚本。我需要它来刷新两者，以便做我需要它做的事情。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:51:42.260

先看评论，然后...

在检查你的代码时，你为什么不这样做呢？

```
function deleteClass(subjecto, period, teacher, ...) 
```

和

```
onclick='deleteClass(" . $subjecto . ", " . $period. ", " . $teacher. ")' 
```

如果你现在只想让它工作，你可以这样做：

代替：

```
<div class='deletebutton' onclick='deleteclass" . $subjecto . "()'>X</div> 
```

至：

```
<div class='deletebutton' onclick='deleteclass(" . $subjecto . ")'>X</div> 
```

并将整个 echo <script> 部分替换为：

```
function deleteclass(subjecto){
    var hi = confirm('Are you absolutely sure you want to permantly delete this class? This cannot be undone.');
    if (hi==true)
    {
        document.getElementById('hiddenframe').src='deleteclass.php?class='+subjecto;
        closeedit();
        refreshclasses();
    }
}
</script> 
```

# xcode - Xcode 中的处理

> ID：15320468
> 
> 赞同：1
> 
> 时间：2013-03-10T08:43:13.793
> 
> 标签：xcode, user-interface, processing

我通过处理创建了一个应用程序/草图。但是现在我想在它周围添加一个用户界面（而不是处理 ui）。最好的方法是什么？我正在考虑在 Xcode 中创建一个应用程序，并以某种方式在我的 Xcode 应用程序中运行我的处理草图或应用程序。无论如何要这样做/最好的方法是什么/我应该尝试除xcode之外的东西吗？我可以将我的草图导出为 .pde 或 .java。基本上，将部分处理组合到更好的 UI 构建器（如 Xcode）是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:58:12.790

有很多像[ControlP5](http://www.sojamo.de/libraries/controlP5/)这样的处理 GUI 库，如果您想要更接近本机控件（具有本机外观和感觉），您总是可以使用来自 Processing 的 Java 的[Swing组件。](http://docs.oracle.com/javase/tutorial/uiswing/)

如果您更喜欢使用本机组件，将您的处理代码移植到[openFrameworks](http://www.openframeworks.cc)可能会更简单，这是一个类似于 Processing 并受其启发的项目。您可能还想看看[ofxNativeGUI 插件](https://github.com/ofZach/ofxNativeGui)

![ofxNativeGUI](../Images/b5f83f7b73a5db0b2d2c78ae6e5b2f6b.png)

# asp.net - MVC - 无法导航到详细信息视图 ASP.NET

> ID：15320472
> 
> 赞同：0
> 
> 时间：2013-03-10T08:43:40.440
> 
> 标签：asp.net, asp.net-mvc, c#-4.0

嗨在我的 MVC 应用程序中，我正在尝试导航到详细信息视图

**这是我在控制器中的代码**

```
 public class CustomerController : Controller
{
    //
    // GET: /Customer/

    public ActionResult Index()
    {
        NorthWindEntity db = new NorthWindEntity();
        var Data = db.Customers;
        return View(Data);
    }
    public ActionResult Details(string id)
    {
        NorthWindEntity db = new NorthWindEntity();
        var Data = db.Customers.Where(e => e.CustomerID == id).Select(e => e).Single();
        return View(Data);
    }
} 
```

**这是全局 asax 中的代码**

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Customer", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

**这是导航主页中的代码**

```
 <td>
            <%: Html.ActionLink("Edit", "Edit",new { id=item.CustomerID }) %> |
            <%: Html.ActionLink("Details", "Details", new { id = item.CustomerID })%> |
            <%: Html.ActionLink("Delete", "Delete", new { id=item.CustomerID })%>
        </td> 
```

**我已经像这样创建了详细信息视图**

![在此处输入图像描述](../Images/0b3ecd8806a8424d3608a4ae48297e76.png)

但问题是当我尝试导航到详细信息视图时出现此错误

```
 The resource cannot be found.
 Description: HTTP 404\. The resource you are looking for (or one of its dependencies)
 could have been removed, had its name changed, or is temporarily unavailable. 
 Please review the following URL and make sure that it is spelled correctly.

 Requested URL: /Customer/Details/1 
```

我很困惑，因为页面已经存在，我错过了什么。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:49:01.603

您可以尝试将 aspx 重命名为 cshtml。请在全局 asax 中查看您的 ProviderBinders 和 Routing

# java - Java中的变量和方法阴影

> ID：15320474
> 
> 赞同：6
> 
> 时间：2013-03-10T08:43:54.503
> 
> 标签：java, static, instance, instance-variables, shadowing

基本上我想知道为什么静态方法不能被实例方法遮蔽，（我知道为什么，它会在某些情况下导致歧义），而静态变量可以被实例变量遮蔽（它仅适用于子类）。

例子：

```
public class Apartment{

    static int area = 10;

    public static int getArea(){
        return area;
    }
}

class BedroomFlat extends Apartment {

    int area = 10;// no problem at all 

    public int getArea(){ // illegal line it cannot hide the super static method
        return area;
    }
} 
```

因此，如果我尝试在超类中声明`int area`（实例变量）以及`static int area`它会给出一个错误，但在子类中声明时它不会发生，即使`static int area`从子类中仍然可见。

尝试使用实例方法隐藏静态方法和尝试使用实例变量隐藏静态变量之间的行为究竟有什么区别。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:45:56.840

没有人可以继承静态方法和字段，因为它们属于类。

在您的情况下，您**没有**从父级覆盖`getArea();`，您正在尝试创建具有相同签名的方法 - 这会导致编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:42:17.050

在您的子类（BedroomFlat）中，编译器不允许您在基类中声明与静态方法同名的实例方法，因为方法覆盖仅适用于实例方法。扩展类仅使子类可以使用实例方法进行覆盖（而不是类方法，即静态方法）。此外，当您尝试声明与静态方法具有相同签名的方法时，编译器将抛出错误，指出您无法覆盖静态方法，因为覆盖发生在实例方法上。

但是编译器不会阻止你从超类中声明一个与静态变量同名的实例变量，因为变量不是覆盖的候选者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:53:28.203

问题是：你根本没有在这里隐藏任何东西......

您的实例变量可以通过我的命名直接访问，通常您必须编写 ClassName.staticVar 之类的内容才能访问静态变量。Java 仅允许您在引用静态变量时省略类名。

这很清楚，不是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T08:57:44.590

Java中的静态方法和字段只属于类，不能被对象继承，否则会导致编译错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T09:21:23.420

我们知道子继承父，但我们也知道静态方法不能被覆盖。因此，在这种情况下，您将在孩子中有两个具有相同方法签名的方法。这将产生问题，因为 java 不支持相同签名的两种方法，尽管这里一种方法是静态的，另一种是非静态的。但对于静态变量，情况并非如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-27T14:32:41.017

我的猜测是，这会给多态性（或至少如何实现）带来一些问题。假设你做了这样的事情`Apartment x = new BedroomFlat();`。调用该方法`getArea()`，它不知道它是隐藏方法还是被覆盖，因为如果它是隐藏的（静态）它应该调用类中的方法`Apartment`，但如果它被覆盖它应该调用实例之一。

当然，通常应该避免这些情况（它会带来不必要的头痛）。

编辑：我找到了这个链接，在页面底部，您可以看到静态方法和实例方法之间的方法隐藏/覆盖表。不知道为什么会这样，但至少我们知道它写在某个地方（[https://docs.oracle.com/javase/tutorial/java/IandI/override.html](https://docs.oracle.com/javase/tutorial/java/IandI/override.html)）

# yii - Yii 的后端和前端设置

> ID：15320490
> 
> 赞同：4
> 
> 时间：2013-03-10T08:46:02.643
> 
> 标签：yii, frontend, backend

目前我的后端和前端都有 2 个 Yii 安装设置。但是在处理这个问题时，它会变得有点混乱，我想知道这是否以正确的方式完成。下面是如何设置我的文件夹结构的示例。

```
- backend
  - assets
  - css
  - images
  - js
  - protected
         - components
         - config
                main.php

         - controllers
         - data
         - extensions
         - models
         - modules
         - runtime
         - views
              - layouts
              - site

         .htaccess
         yiic
         yiic.php

  - themes
  - upload
  index.php
  .htaccess

frontend

  - assets
  - css
  - images
  - protected
         - commands
         - components
         - config
                main.php

         - controllers
         - data
         - extensions
         - models
         - modules
         - runtime
         - views
              - layouts
              - site

         .htaccess
         yiic
         yiic.php

  - themes
  index.php
  .htaccess 
```

反正可以告诉我这是个好办法。或者这是一种愚蠢的方式。这样做的正常方法是什么。我查看了文档，但它都不完整或不具体。我想要的是为 Yii 设置后端和前端结构的最常用方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T13:44:07.667

我认为，最好的方法是不要破坏封装并使用如下设置：

*   [http://www.yiiframework.com/wiki/63/organize-directories-for-applications-with-front-end-and-back-end-using-webapplicationend-behavior/](http://www.yiiframework.com/wiki/63/organize-directories-for-applications-with-front-end-and-back-end-using-webapplicationend-behavior/)
*   [http://habrahabr.ru/post/117457/](http://habrahabr.ru/post/117457/)（俄语）

在这种情况下：

*   您将能够将所有控制器和视图存储在一个地方
*   在模块结构上（当你将使用它时）不会破坏它们的封装，你将能够轻松地在你的站点之间共享它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:04:20.170

您还可以查看 Yii 项目站点 [YiiProject 目录结构的目录结构](http://www.yiiframework.com/wiki/155/the-directory-structure-of-the-yii-project-site) 或下载 Clevertech 的 yii 样板并查看它们的文件夹结构。这里是链接[YiiBoilerplate](http://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/)

# android - 不同的活动取决于多个复选框/Android

> ID：15320494
> 
> 赞同：0
> 
> 时间：2013-03-10T08:46:23.110
> 
> 标签：android, checkbox

我有一个链接到另一个活动的按钮，当我单击它时，它会转到我想要的 layout.xml

这是主/第一个屏幕的 java 文件

```
Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    addListenerOnButton();
}

public void addListenerOnButton() {

    final Context context = this;

    button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, App2Activity.class);
            startActivity(intent);   

        }

    });

} 
```

我现在在第一个屏幕/活动上有 3 个复选框，并且按钮标记为“下一个”，我想制作这样，如果您选中不同的框，“下一个”按钮将链接到不同的活动示例：标记为 1、2 的复选框和 3，当你检查 1 和 2 并点击 next yoy 时，去一个活动 =3 ，如果你检查 2 和 3，你去 5

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:52:33.087

你可以做这样的事情：

```
button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        if (checkBoxA.isChecked())
        {
            Intent intent = new Intent(context, AppActivityA.class);
            startActivity(intent);  
        } 
        else if (checkBoxB.isChecked())
        {
            Intent intent = new Intent(context, AppActivityB.class);
            startActivity(intent);  
        }
        else if (checkBoxC.isChecked())
        {
            Intent intent = new Intent(context, AppActivityC.class);
            startActivity(intent);  
        }
    }
}); 
```

现在没有IDE，所以我没有检查它，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:02:46.087

您应该涵盖所有可能性

```
 @Override
    public void onClick(View arg0) {
        int add1 = cb1.isChecked() ? 1:0;
        int add2 = cb2.isChecked() ? 2:0;
        int add3 = cb3.isChecked() ? 3:0;
        switch(add1+add2+add3) {
        case 0: Intent intent = new Intent(context, App0Activity.class); break;
        case 1: Intent intent = new Intent(context, App1Activity.class); break;
        case 2: Intent intent = new Intent(context, App2Activity.class); break;
        case 3: Intent intent = new Intent(context, App3Activity.class); break;
        case 4: Intent intent = new Intent(context, App4Activity.class); break;
        case 5: Intent intent = new Intent(context, App5Activity.class); break;
        case 6: Intent intent = new Intent(context, App6Activity.class); break;
        }
        startActivity(intent);   

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T08:54:19.547

首先执行此操作...当您单击按钮时，获取您选中的复选框...

```
CheckBox cb=(CheckBox)findViewById(R.id.yourview);
boolean checked=cd.isChecked();// status of checkbox

if(checked){
   // perform action 
} 
```

# php - Web 服务器 - 访问文件时如何执行 PHP 脚本？

> ID：15320505
> 
> 赞同：1
> 
> 时间：2013-03-10T08:48:19.737
> 
> 标签：php, web-services, web, modx

我想在访问 Web 服务器上的文件时运行 PHP 代码（例如 /../../somefile.pdf）。

当用户第一次访问网站时，我需要显示免责声明。每次访问网页时，我都可以执行 PHP 脚本，但我不知道如何在访问网页文件时运行脚本。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:57:03.177

当您要跟踪下载时，有两种方法：

1.  将下载 URL 更改为通过 PHP 文件，而不是`<a href="/../../somefile.pdf">..</a>`尝试`<a href="/download.php?file=/../../somefile.pdf">..</a>`
2.  使用 .htaccess (Apache Rewrite mod) 中的 rewrite 将下载 URL 首先重定向到 PHP 文件，例如： `RewriteRule ^download_directory/(.*)$ /download.php?file=$1 [L,QSA]`

在您的文件 download.php 中，您再次有两个选项：

1.  使用参数中的路径读取文件`file`，并使用 PHP 回显输出。（此方法不安全，因为用户可能会修改`file`参数中的路径并获取他不应该访问的文件。）
2.  由于您的文件位于 webroot 中（即它们可以直接访问），一旦您的跟踪代码完成执行，最好将用户重定向到实际文件，使用`header('Location: ' . $_GET['file']);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:43:32.400

对于原作者来说可能有点晚了，但这正是 MODX[静态资源](http://rtfm.modx.com/display/revolution20/Static+Resource)的完美之处。

静态资源是托管在您的服务器上的真实文件的抽象，在这种情况下，您可以像处理标准网页请求一样执行您已经在使用的相同片段/插件。不需要 .htaccess 模组或自定义标头。

更多信息：

*   [MODX 静态资源](http://rtfm.modx.com/display/revolution20/Static+Resource)
*   [静态资源/下载PDF](http://forums.modx.com/index.php?topic=44920)

# javascript - 有什么方法可以检测有多少浏览器窗口可见？

> ID：15320508
> 
> 赞同：2
> 
> 时间：2013-03-10T08:49:01.187
> 
> 标签：javascript, css, browser

这可能是一个模糊的问题，所以我提前道歉。我只是想知道是否有任何方法（Javascript、服务器端或其他）可以以某种方式检测浏览器窗口的任何部分是否在屏幕上不可见。

例如，也许我几乎最大化了我的浏览器窗口，然后抓住它并将它的一些拖出屏幕......这可以触发任何 Javascript / ajax 事件以找出有多少视口是“不可见的”，启用我要在文档中添加一个类或可以调整样式的东西，还是不能与 Web 应用程序通信的操作系统级事件/变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:54:31.707

jQuery Waypoints 插件[http://imakewebthings.github.com/jquery-waypoints/](http://imakewebthings.github.com/jquery-waypoints/)

您可以使用该插件检测元素何时在视口中。

我发现另一个有用的教程（不知道它是否与您相关）是[http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html](http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html)

这是通过 AJAX 加载内容的一种方法，可以加快初始加载时间并改善用户体验。

这取决于您到底想达到什么目标:)

# vba - Outlook 中的 VBA 获取电子邮件对话的“已回复”或“转发”状态？

> ID：15320510
> 
> 赞同：4
> 
> 时间：2013-03-10T08:49:10.037
> 
> 标签：vba, outlook, imap

我在 Outlook 中有一个 VBA 脚本，旨在根据项目放置在文件夹中的时间进行一些自动电子邮件处理。这按预期工作，但我试图让它更智能一点，以便脚本可以查看放入文件夹的电子邮件是否已得到回复。

目前，在将邮件放入文件夹 X 的那一刻，脚本会自动回复该电子邮件，然后将该邮件标记为未读。但是，如果邮件已经被标记为“已回复”，无论脚本是否回复了邮件，或者是否有人在将邮件放入文件夹 X 之前发送了回复，我想确保脚本不会发送回复，并且简单地将邮件标记为未读。这是可以通过读取 IMAP 属性标签来完成的吗？如果是这样，我在寻找哪个标签？我一直在努力弄清楚如何做到这一点。任何帮助，将不胜感激。

作为参考，这是我拥有的脚本（删除了识别细节）：

注意：我知道我有一些声明的变量但没有被引用。稍后我将使用这些来做其他事情。

```
Option Explicit
 '##############################################
 '### all code for the ThisOutlookSession module
 '### Module level Declarations
 'expose the items in the target folder to events
Dim WithEvents ackSpamMsgs As Items
Dim WithEvents ackPhishMsgs As Items
Dim WithEvents fwdMsgs As Items
 '###############################################
Private Sub Application_Startup()
     'some startup code to set our "event-sensitive"
     'items collection
    Dim objNS As Outlook.NameSpace
    Dim ackFolder As Folder
    Dim compFolder As Folder

    Set objNS = Application.GetNamespace("MAPI")
    Set ackMsgs = objNS.Folders("Inbox").Folders("Folder X").Items
    Set fwdMsgs = objNS.Folders("Inbox").Folders("Folder Y").Items
End Sub

 '#################################################
 '### this is the ItemAdd event code
Sub ackMsgs_ItemAdd(ByVal Item As Object)
     'when a new item is added to our "watched folder"
     'we can process it
    Dim msg As MailItem
    Set msg = Item.Reply
    'This is where I want to check if the mail has been replied to, and skip the "with"
    'below if it has been replied to.
    With msg
        .Subject = "RE: " & Item.Subject
        .HTMLBody = "Body of email here"
        .Send
        Set msg.UnRead = True
    End With

End Sub

Sub fwdMsgs_ItemAdd(ByVal Item As Object)
    Dim msg As MailItem
    Dim newMsg As MailItem

    Set msg = Item.Forward
    msg.Recipients.Add ("email@email.com")
    msg.Send

End Sub

 '#################################################
Private Sub Application_Quit()

    Dim objNS As Outlook.NameSpace
    Set ackMsgs = Nothing
    Set fwdMsgs = Nothing
    Set objNS = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T15:07:06.510

The property you are after is PR_LAST_VERB_EXECUTED (DASL name is `http://schemas.microsoft.com/mapi/proptag/0x10810003`); you should be able to access it using `MailItem.PropetyAccessor.GetProperty`.

Take a look at a message with [OutlookSpy](http://www.dimastr.com/outspy) - click IMessage button to see the available MAPI properties.

# clojure - 如何防止此 clojure 函数返回列表

> ID：15320513
> 
> 赞同：1
> 
> 时间：2013-03-10T08:49:39.550
> 
> 标签：clojure

我想在 clojure 中编写一个函数，它会返回一个地图，给出一个形式为“key1$value1,key2$value2”的字符串。我想出了这个。

```
(defn get-map
  "Returns a map of key value pairs from a string formatted in the form 'key1$value1,key2$value2'"
  [line]
  (let [result {}]
    (for [item (split line #",")]
      (let [pair (split item #"\$")]
        (assoc result (nth pair 0)
          (if (= (.size pair) 2) (nth pair 1) "")))))) 
```

虽然它有效，但此代码的唯一问题是它在列表中返回地图。

```
=>(get-map "key1$value1,key2,value2")
({"key1" "value1"} {"key2" "value2"}) 
```

我试图将结果作为第一个 let 表单的最后一个表达式返回，但结果是一个空映射。

```
(defn get-map
  "Returns a map of key value pairs from a string formatted in the form 'key1$value1,key2$value2'"
  [line]
  (let [result {}]
    (for [item (split line #",")]
      (let [pair (split item #"\$")]
        (assoc result (nth pair 0)
          (if (= (.size pair) 2) (nth pair 1) ""))))
    result))

=>(get-map "key1$value1,key2,value2")
{} 
```

两个问题——

1.  我应该如何修改函数以仅返回地图，而不使用列表包装器？
2.  为什么将结果作为第一个 let 表单的最后一个表达式返回一个空映射？

此外，如果您有建议以更好、更惯用的 clojure 方式编写相同的函数，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:45:29.980

```
(defn get-map
  "Returns a map of key value pairs from a string formatted in the form 'key1$value1,key2$value2'"
  [line]
  (->> (clojure.string/split line #",")
       (mapcat #(clojure.string/split % #"\$"))
       (apply hash-map)))

user> (get-map "key1$value1,key2$value2")
{"key1" "value1", "key2" "value2"} 
```

问题 1 的答案/提示： For 总是返回一个序列。它是 Clojure 中的列表推导。

关于问题 2 的回答/提示：Clojure 的数据结构是不可变的。这意味着在现有地图上关联不会改变现有地图，而是返回一个新地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T15:29:34.567

该`for`表单执行惰性列表理解，因此不适合顺序更新结构。您可以使用`for`来生成对列表，并将`reduce`它们打包到地图中。或者，使用`into`，它会减少：

```
(defn get-map [line]
  (into {}
    (for [item (split line #",")]
      (split item #"\$")))) 
```

另一种可能的实现使用`re-seq`：

```
(defn get-map [s]
  (into {} (map #(subvec % 1) (re-seq #"([^\$]+)\$([^,]+),*" s)))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T16:19:55.987

在 Clojure 中，`for`不是循环，而是列表推导。基本上，它获取集合中的每个项目并将其绑定到您指定的任何名称（`item`在本例中），然后评估表达式（`let [pair...`在本例中）。每个评估的结果都按顺序返回。

例如：

```
(for [item (split "key1$value1,key2$value2" #",")] 
  item)
;returns: ("key1$value1" "key2$value2") 
```

在您的函数中，它`for`实际上创建了列表。绑定的名称`let`是不可变的，因此每次`for`评估其表达式`result`仍然是一个空映射。这就是为什么你会得到一个地图列表，每个地图都有一个条目。

这是一种生成键值对列表的方法，该列表使用未找到的功能在`nth` 缺少 $ 时提供默认值：

```
(for [item (split "key1$value1,key2$value2,key3" #",")]
  (let [pair (split item #"\$")] 
    [(nth pair 0) (nth pair 1 "")]))
;returns: (["key1" "value1"] ["key2" "value2"] ["key3" ""]) 
```

然后你可以用`into`它把它变成一张地图。这是完整的功能：

```
(defn get-map   
  "Returns a map of key value pairs from a string formatted in the form 'key1$value1,key2$value2'"
  [line]
  (into {}
    (for [item (split line #",")]
      (let [pair (split item #"\$")] 
        [(nth pair 0) (nth pair 1 "")])))) 
```

# html - html中的排序框

> ID：15320522
> 
> 赞同：0
> 
> 时间：2013-03-10T08:51:15.383
> 
> 标签：html

我想以 html 形式订购我的盒子。我的盒子是无序的，我不知道如何订购它们，也不知道在哪里放置盒子和每个文本前面的按钮/

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<body>
MAC Adress : <input type="text" name="mac-addr">
<input type="submit" value="change"><br>
IP Adress : <input type="text" name="ip-addr">
<input type="submit" value="change"><br>
Gateway Adress : <input type="text" name="gate-addr">
<input type="submit" value="change"><br>
Subnet Mask : <input type="text" name="sub-msk">
<input type="submit" value="change"><br>
Ntp Server IP :  <input type="text" name="ntp-ip">
<input type="submit" value="change"><br>
</head>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:55:34.250

你应该这样做

```
<label for="#">MAC Adress : </label>
<input type="text" name="mac-addr"><br />

label {
    display: inline-block;
    margin-top: 50px;
} 
```

[**演示**](http://jsfiddle.net/TjYa6/)

[**演示 2（带按钮）**](http://jsfiddle.net/TjYa6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:01:44.130

您可以使用此代码：

```
<body>
    <table><tr><td>
        MAC Adress : </td><td><input type="text" name="mac-addr"></td><td>
        <input type="submit" value="change"></td>
        </tr><tr><td>IP Adress : </td><td><input type="text" name="ip-addr"></td><td>
        <input type="submit" value="change"></td></tr>
        <tr><td>Gateway Adress : </td><td><input type="text" name="gate-addr"></td><td>
            <input type="submit" value="change"></td></tr>
            <tr><td>Subnet Mask : </td><td><input type="text" name="sub-msk"></td><td>
                <input type="submit" value="change"></td></tr><tr>
                <td>Ntp Server IP :  </td><td><input type="text" name="ntp-ip"></td><td>
                <input type="submit" value="change"></td></td></table>
    </body> 
```

这是预览：http: [//jsfiddle.net/Gn7aU/](http://jsfiddle.net/Gn7aU/)

更新 ：

这是使用 div 订购商品的最佳方式：

```
<div class="tbl">
        <div class="tbl-row">
            <div class="tbl-cell">
                MAC Adress :
            </div>
            <div class="tbl-cell">
                <input type="text" name="mac-addr">
            </div>
            <div class="tbl-cell">
                <input type="submit" value="change">
            </div>
        </div>
        <div class="tbl-row">
            <div class="tbl-cell">
                IP Adress :
            </div>
            <div class="tbl-cell">
                <input type="text" name="ip-addr">
            </div>
            <div class="tbl-cell">
                <input type="submit" value="change">
            </div>
        </div>
        <div class="tbl-row">
            <div class="tbl-cell">
                Gateway Adress :
            </div>
            <div class="tbl-cell">
                <input type="text" name="gate-addr">
            </div>
            <div class="tbl-cell">
                <input type="submit" value="change">
            </div>
        </div>
        <div class="tbl-row">
            <div class="tbl-cell">
                Subnet Mask :
            </div>
            <div class="tbl-cell">
                <input type="text" name="sub-msk">
            </div>
            <div class="tbl-cell">
                <input type="submit" value="change">
            </div>
        </div>
        <div class="tbl-row">
            <div class="tbl-cell">
                Ntp Server IP :
            </div>
            <div class="tbl-cell">
                <input type="text" name="ntp-ip">
            </div>
            <div class="tbl-cell">
                <input type="submit" value="change">
            </div>
        </div>
    </div> 
```

你应该为此添加css样式：

```
.tbl
{
    display:table;
}
.tbl-row
{
    display:table-row;
}
.tbl-cell
{
    display:table-cell;
} 
```

这是预览：http: [//jsfiddle.net/aksVm/](http://jsfiddle.net/aksVm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:09:29.100

首选的解决方案是使用 CSS 来设置表格的样式（请参阅 Alien 先生的回答）。

只需使用 XHTML 来实现这一点，您就可以使用表格来格式化您的数据（尽管这种方法不受欢迎）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head></head>
<body>
<table>
  <tr>
    <td>MAC Adress :</td>
    <td><input type="text" name="mac-addr"></td>
    <td><input type="submit" value="change"></td>
  </tr>
  <tr>
    <td>IP Adress :</td>
    <td><input type="text" name="ip-addr"></td>
    <td><input type="submit" value="change"></td>
  </tr>
  <tr>
    <td>Gateway Adress :</td>
    <td><input type="text" name="gate-addr"></td>
    <td><input type="submit" value="change"></td>
  </tr>
  <tr>
    <td>Subnet Mask :</td>
    <td><input type="text" name="sub-msk"></td>
    <td><input type="submit" value="change"></td>
  </tr>
  <tr>
    <td>Ntp Server IP :</td>
    <td><input type="text" name="ntp-ip"></td>
    <td><input type="submit" value="change"></td>
  </tr>
</table>
</body>
</html> 
```

在旁注中，您的结束**头部**标签应该在您的开始**身体**标签之前。

# mysql - 如何检查记录是否存在，如果不使用 vb.net 插入？

> ID：15320544
> 
> 赞同：0
> 
> 时间：2013-03-10T08:54:13.617
> 
> 标签：mysql, vb.net

我卡在检查数据库中是否存在记录。这在 php 中很容易，但我在 vb.net 中找不到一个好的教程。如果数据库中不存在，我想从文本框中插入值。

这是我的代码：

```
Using SQLConnection As New MySqlConnection(connString)

        Using sqlCommand As New MySqlCommand()
            With sqlCommand
            'check if record exist 

            'if not execute these
                .CommandText = "INSERT INTO bookrecords (Title, Author, Edition, Publisher, ISBN) values (@title,@author,@edition,@publisher,@isbn)"
                .Connection = SQLConnection
                .CommandType = CommandType.Text
                .Parameters.AddWithValue("@title", txtTitle.Text)
                .Parameters.AddWithValue("@author", txtAuthor.Text)
                .Parameters.AddWithValue("@edition", txtEdition.Text)
                .Parameters.AddWithValue("@publisher", txtPublisher.Text)
                .Parameters.AddWithValue("@isbn", txtISBN.Text)

            End With

            Try
                SQLConnection.ConnectionString = "Server=localhost;Database=booksdb;Uid=root;Pwd=;"
                SQLConnection.Open()
                sqlCommand.ExecuteNonQuery()
                iReturn = True
                'MessageBox.Show("Connection Opened")

            Catch ex As MySqlException
                MessageBox.Show("Error: " & ex.ToString())
                iReturn = False
            Finally
                SQLConnection.Close()
                'MessageBox.Show("Connection Closed")
            End Try

        End Using
    End Using 
```

我只是希望@isbn 成为确定记录是否已经存在的关键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:04:06.737

显而易见的事情（不涉及数据库模式）是向数据库发送计数查询以获取所需的 ISBN。
这可以通过 ExecuteScalar 适当的查询来完成

```
Using con = new MySqlConnection(connectionString)
    Using sqlCommand As New MySqlCommand()
        With sqlCommand
            .Connection = con
            .Parameters.AddWithValue("@isbn", txtISBN.Text)
            .CommandText = "SELECT COUNT(*) FROM  bookrecords WHERE ISBN = @isbn"
        End With
        con.Open()
        Dim result = sqlCommand.ExecuteScalar()
        if Convert.ToInt32(result) = 0 Then
            ' ISBN doesn't exist ....
            sqlCommand.Parameters.Clear()
            ' rest of your insert code ... 
```

如果命令返回计数为零，请记住为后续插入查询清除参数集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T08:18:28.117

您可以在一个查询中执行此操作，如下所示：

```
.CommandText = "INSERT INTO bookrecords (Title, Author, Edition, Publisher, ISBN) " & _
"SELECT * FROM (SELECT @title, @author, @edition, @publisher, @isbn AS ISBN) t " & _
"WHERE NOT EXISTS(SELECT ISBN FROM bookrecords b WHERE t.ISBN = b.ISBN ) " 
```

# c++ - 如何获得工作的 Qt mysql 驱动程序？

> ID：15320548
> 
> 赞同：0
> 
> 时间：2013-03-10T08:55:24.547
> 
> 标签：c++, mysql, qt

我想用 Qt 连接到 mysql。我测试了一些不起作用的方法我写了这些代码：

```
C:\QtSDK\QtSources\4.8.1\src\plugins\sqldrivers\mysql>qmake "INCLUDEPATH+=C:\\Pr
ogram Files\\MySQL\\MySQL Server 5.6\\include" "LIBS+=C:\\Program Files\\MySQL\\
MySQL Server 5.6\\lib\\libmysql.lib" mysql.pro

C:\QtSDK\QtSources\4.8.1\src\plugins\sqldrivers\mysql>make
make -f Makefile.Debug all
make[1]: Entering directory `/c/QtSDK/QtSources/4.8.1/src/plugins/sqldrivers/mys
ql'
g++ -c -fno-keep-inline-dllexport -g -frtti -fexceptions -mthreads -Wall -DUNICO
DE -DQT_LARGEFILE_SUPPORT -DQT_NO_CAST_TO_ASCII -DQT_NO_CAST_FROM_ASCII -DQT_DLL
 -DQT_PLUGIN -DQT_SQL_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_SSE -DQT_HAVE_MM
XEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I'../../../../include/QtCore' -I'../../
../../include/QtSql' -I'../../../../include' -I'c:/Program' -I'Files/MySQL/MySQL
' -I'Server' -I'5.6/include' -I'../../../../include/ActiveQt' -I'tmp/moc/debug_s
hared' -I'../../../../mkspecs/win32-g++-4.6' -o tmp/obj/debug_shared/main.o main
.cpp
cc1plus.exe: error: unrecognized command line option "-fno-keep-inline-dllexport
" 
```

这是我的错误：

```
make[1]: *** [tmp/obj/debug_shared/main.o] Error 1
make[1]: Leaving directory `/c/QtSDK/QtSources/4.8.1/src/plugins/sqldrivers/mysq
l'
make: *** [debug-all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:59:00.667

好吧，我自己在 Windows 上编译 Qt MySql 插件时遇到了很多困难。所以这是我的建议：使用 ODBC 网关连接您的 MySql 基础：ODBC 插件在构建 Qt 时没有编译问题；MySql ODBC 连接器可以从[http://dev.mysql.com/downloads/connector/odbc下载](http://dev.mysql.com/downloads/connector/odbc)

抱歉，这不是您问题的完全答案，但至少可以让您继续前进。

# java - 如何在 Spring 输入标签中隐藏默认绑定值？

> ID：15320549
> 
> 赞同：2
> 
> 时间：2013-03-10T08:55:27.517
> 
> 标签：java, html, spring, spring-mvc, jsp-tags

我在我的jsp 中使用了Spring 表单标签。

```
 <form:form modelAttribute="myAttribute" method="POST"
        action="/doSomething" >

        <form:input path="name" type="text" value="" />
.
. 
```

现在我的 modelAttribute 已经包含“name”的值，因此我得到一个文本框，其中已经指定了值。

但我不想向用户展示这种价值。我希望用户在文本框中输入一个新值。

如何隐藏绑定值不显示在文本框中？请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:59:14.903

在第一次显示表单之前，将模型属性的`name`属性设置为控制器中的空字符串。

这样，如果用户提交表单时出现验证错误，表单将重新显示，其中表单字段预先填充了他输入的值。

# windows - 为什么在 Windows 8 上忽略 SeCreateSymbolicLinkPrivilege？

> ID：15320550
> 
> 赞同：29
> 
> 时间：2013-03-10T08:55:31.370
> 
> 标签：windows

我想让我的标准用户帐户（即未提升）能够调用 CreateSymbolicLink。

但是，在 Win8 上，即使在本地组策略下将“所有人”添加到 SeCreateSymbolicLinkPrivilege（secpol.msc 中的“创建符号链接”）仍然会导致 STATUS_PRIVILEGE_NOT_HELD。为什么？

![](../Images/0b9672bea333e310bdccd2049d6b88f5.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-11T03:00:19.903

正如克里斯蒂安所怀疑的那样，这确实是 UAC。

[MSDN：用户帐户控制兼容性的 Windows Vista 应用程序开发要求](http://msdn.microsoft.com/en-us/library/bb530410.aspx)：

> 过滤后的令牌包含哪些权限取决于原始令牌是否包含上面列出的任何受限 RIDS（编辑：AKA，如果您是非提升管理员）。如果令牌中有任何受限制的 RID，则**所有权限都将被删除，除了**：
> 
> *   SeChangeNotifyPrivilege
> *   SeShutdownPrivilege
> *   SeUndockPrivilege
> *   SeReserveProcessorPrivilege
> *   SeTimeZonePrivilege

# vim - 是否有任何内置方法可以列出上次编辑文件的所有保存时间？

> ID：15320554
> 
> 赞同：1
> 
> 时间：2013-03-10T08:56:01.227
> 
> 标签：vim, time-tracking

我作为 Web 程序员的工作涉及使用 vim 从远程服务器编辑大量文件。我需要报告解决一个特定案例需要多少时间，我对此有点麻烦：我无法习惯时间跟踪软件，因为我总是忘记我需要跟踪我的时间这一事实。这只是在需要一点时间（大约 5 到 60 分钟）的情况下才会出现的问题。

但是，就我在 vim 中完成的所有工作而言，我想知道是否有任何方法可以查看何时保存了哪个文档。当然，我可以定义一些自动命令，将当前时间和文件名保存到某个文件，但是有内置功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:56:57.537

如果你仍然打开 Vim，你可以列出所有列出的缓冲区的文件修改时间：

```
for bufnr in filter(range(1, bufnr('$')), 'buflisted(v:val)')
    echo bufname(bufnr) strftime('%c', getftime(bufname(bufnr)))
endfor 
```

如果您使用*MRU*插件，您可以从那里检索最后编辑的文件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:53:43.443

如果有人感兴趣，我有自己的自动命令解决方案：

```
function! ReportFileSaveTime()
" Saves current time and file to a certain file
    call system('echo `date +"%Y-%m-%d %H:%M:%S"` ' . @% . ' >> ' . g:fileSaveLog)
endfunction
au! BufWritePost * call ReportFileSaveTime()
let fileSaveLog='~/.vim/filesave' 
```

例如，您可以`$ tail -n 30 ~/.vim/filesave`查看 30 个上次文件保存时间标记。

# java - 如何在Java中打开不同路径的pdf文件

> ID：15320558
> 
> 赞同：1
> 
> 时间：2013-03-10T08:56:34.263
> 
> 标签：java, netbeans-7

我有一个 PDF 文件，我想用我的 java 应用程序打开它。当我使用 Netbeans 运行该程序时打开 PDF 文件。但是当我从 .Jar 文件运行该程序时，该 PDF 文件没有打开。

```
 try {
            String p1[] = getClass().getResource("/Scholars_Management_System_Help.pdf").toString().split("file:/");
            String helppath = p1[1].replace("%20", " ");
            Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + helppath);
        } catch (IOException ex) {
            JOptionPane.showMessageDialog(null, ex, "Error", JOptionPane.ERROR_MESSAGE);
            Logger.getLogger(Home.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:16:49.940

我认为`getClass().getResource("/Scholars_Management_System_Help.pdf")`在您的项目根目录中找到一个名为 Scholars_Management_System_Help.pdf 的文件，当您创建 jar 文件时，该文件可能不包含在 jar 中，这就是它不起作用的原因。您可能应该从命令行运行 jar，以便查看是否引发了任何异常。这样您就可以确定问题的原因。

再次，而不是与您一起运行应用程序（pdf 阅读器），`Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + helppath);`而应该使用`Desktop.getDesktop().open(file_name);`它使其更便携。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-14T07:35:59.003

朋友

尝试使用此方法在 netbeans 中打开 pdf 文件

```
import java.awt.Desktop;
import java.File;

 public class pdfdemo{
    public ststic void main(String args[]) throws Exception
      {
       try{

           String fil = "d:\\text.pdf";
           Desktop.getDesktop().open(new File(fil));
          }
       catch(Exception e){
          System.out.println(e);
           }
      } 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:11:35.417

您正试图让 rundll32 程序打开一个不存在的文件，因为 PDF 文件*在*您的 jar 中，而不是在文件系统上。如果您希望可以从外部程序访问它，请将其存储在 jar 之外。

当你有一个 IOException 时，而不是仅仅显示“错误”，你为什么不打印异常的消息和堆栈跟踪：它会解释你为什么以及在哪里得到错误：

```
ex.printStackTrace(); 
```

# python - 你能建议如何处理 JSONDecoderError 之类的错误吗？

> ID：15320562
> 
> 赞同：0
> 
> 时间：2013-03-10T08:57:18.970
> 
> 标签：python

之前有人问过这个问题，但答案是建议`print`哪个不好。

[Python：没有返回时处理 JSON 解码错误](https://stackoverflow.com/questions/8381193/python-handle-json-decode-error-when-nothing-returned)

鉴于这种：

```
class BitbucketError(Exception):
    pass

try:
    response = requests.get('https://bitbucket.org/.......')
    return response.json()['data']

# because JSONDecoderError inherits from ValueError
except (json.JSONDecoderError, ValueError) as e: 
    raise BitbucketError(response.status_code) 
```

没关系。但是如果我要在另一个项目中使用这个模块，我会在哪里

```
# save to dabase, example 1
raw_code = mymodule.bitbucket.file(...)
db.save(raw_code)

# return json back to user (api server, example 2)
raw_code = mymodule.bitbucket.file(...)
return {'data': raw_code} 
```

我确定我想在上面的代码段中捕获异常。但问题是，我应该让原始的传播或自己定义一个例外吗？

我正在尝试了解如何正确处理错误，因为错误可能是由于 404、405 甚至 500 造成的。

希望这个问题有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:28:23.697

这在很大程度上取决于第二段代码的上下文。例如，它是否用于您的应用程序中的一些内部自动化？在这种情况下，捕获异常并将类似于 Django 错误邮件（带有完整的堆栈跟踪、变量等）的电子邮件发送给组织中可以处理它的人可能是一个好主意。如果是针对某些最终用户应用程序，您可能想要记录错误（例如到邮件中）并给用户一些反馈。在这种情况下，您将希望以不同的方式处理不同的错误代码。

# bash - linux文件描述符混淆

> ID：15320563
> 
> 赞同：1
> 
> 时间：2013-03-10T08:57:20.493
> 
> 标签：bash, pipe, io-redirection

为什么这不起作用？

我看到它的方式是打开 fd 3 并将其发送到 dev nul。

然后稍后您的路线 fd 3 到 fd 2。

我想要完成的是在我的脚本中使用 fd 3 作为默认管道到 void 但如果需要可以路由到 stderr 或文件进行检查的标准信息。

MyScript.bash

```
exec 3>/dev/null
echo spo >&3 
```

这对标准错误没有任何影响：

```
./MyScript.bash 3>&2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:03:14.777

当您*运行*脚本时，shell 会将文件描述符 3 附加到 stderr。

但是，*在*您的脚本中，它用于`exec`将文件描述符 3 数据发送到位存储桶，基本上覆盖了您在运行脚本时所做的事情。

解决此问题的一种方法是在启动脚本时不进行重定向。而是将可选参数与您要使用的文件一起传递：

```
./MyScript               # with no parameter
./MyScript /tmp/xyzzy    # with a parameter 
```

然后让你的脚本完全控制：

```
fd3file=/dev/null
if [[ "$1" != "" ]] ; then
    fd3file="$1"
fi
exec 3>${fd3file} 
```

它不需要使用参数，您可以使用*任何*信息源，例如环境变量、配置文件条目等。然而，基本前提是 - 让脚本做出决定。

现在，您可以利用以下事实在多个层（shell 和脚本重定向）上执行此操作：

*   如果您尝试为实际上未打开的输出复制文件描述符，则将其视为重定向错误；和
*   `exec`如果发生重定向错误，将失败并返回代码 1。

以下脚本显示了这一点。它尝试复制`fd 3`并`fd 4`检测失败。失败意味着`fd 3`未打开，因此我们将其连接到`/dev/null`. 成功意味着它是打开的，所以我们不要管它，因为用户已经将它连接到了某个东西：

```
#!/bin/bash

# Try and duplicate fd 3 (without ugly error message)

( exec 4>&3 ) 2>/dev/null

# Figure out whether fd3 was open.

if [[ $? -eq 1 ]] ; then
    # It was not open so we need redirect.

    echo 'redirect failed, need to exec 3>/dev/null'
    exec 3>/dev/null
else
    # It was, open so we leave fd3 alone (and close fd4 duplicate).

    echo 'redirect worked, leave fd3 alone'
    exec 4>-
fi

echo 'fd3 content' >&3 
```

以下记录显示了它的实际应用。首先，没有基于 shell 的重定向导致脚本连接`fd 3`到`/dev/null`：

```
pax> ./qq.sh
redirect failed, need to exec 3>/dev/null

pax> cat qq
cat: qq: No such file or directory 
```

接下来，一个*基于*shell 的重定向 (to `qq`) 不理会`fd 3`，然后您可以看到重定向到`qq`已经发生：

```
pax> ./qq.sh 3>qq
redirect worked, leave fd3 alone

pax> cat qq
fd3 content 
```

# c# - 渲染纹理的后台线程

> ID：15320566
> 
> 赞同：1
> 
> 时间：2013-03-10T08:57:39.163
> 
> 标签：c#, multithreading, opentk, raycasting

我正在使用 OpenTK 在 C# 中编写一个简单的光线投射器。我希望我的视图每秒刷新 60 次，所以我有一个计时器调用我的 Render() 函数，它在屏幕上显示纹理。

我想使用递归函数通过将场景划分为较小的矩形并渲染每个矩形来渲染我的场景，直到矩形大小为 1px。我的递归将像素的颜色写入字节数组，我需要将其转换为纹理。递归非常慢，所以每当我的场景发生变化时，我都想在背景线程中运行它。

同步线程的正确方法是什么，以便一个写入纹理数组（大约需要一秒钟），但另一个线程每 1/60 秒读取一次并在屏幕上打印？

```
 byte[, ,] texture; 
```

递归：

```
 public void RenderAdaptively(int top, int left, int width, int height)
    {
        Color color = getColor(top, left);
        for (int i = top; i < top + width + 1; i++)
        {
            for (int j = left; j < left + height; j++)
            {
                texture[i, j, 0] = color.R;
                texture[i, j, 1] = color.G;
                texture[i, j, 2] = color.B;
            }
        }

        int halfw = width / 2;
        int halfh = height / 2;
        int newwidth = width - halfw;
        int newheight = height - halfh;

        if (width > 1 && height > 1)
        {
            RenderAdaptively(top, left, halfw, halfh, false);
            RenderAdaptively(top + halfw, left + halfh, newwidth, newheight, false);
            RenderAdaptively(top, left + halfh, halfw, newheight, false);
            RenderAdaptively(top + halfw, left, newwidth, halfh, false);
        }
    } 
```

在另一个线程中：

```
 raycasting_texture = TexUtil.CreateRGBTexture(width, height, texture); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:01:28.150

你有几个选择可以尝试，但是我会这样做：

*   有两个缓冲区用于将纹理存储为字节数组，例如`0`和`1`，

*   在一个缓冲区中进行纹理计算，

*   完成后，通过将 a 设置`volatile int updated_buffer`为更新的缓冲区索引来发出信号。

*   定期读取另一个线程`updated_buffer`，并保留其最新值的副本。当该副本和 int 不同步时，更新副本并将纹理上传到内存，

请注意，此解决方案依赖于几件事：

1.  只有两个线程处理字节数组缓冲区，

2.  `updated_buffer`仅由（纹理）消费者线程读取并由生产者线程写入，

3.  最重要的是，纹理上传明显比计算*快。*

如果 #2 或 #3 损坏，您将不得不对纹理缓冲区使用更严格的同步方法，如互斥锁，以确保纹理缓冲区在仍在上传时不会被覆盖。

最后，您的递归计算可以通过移动到低于某个阈值（例如 8*8 像素块）的迭代得到轻微的提升，而不是一直下降到 1px。事实上，迭代地做这一切应该更快（如果在单个内核上的单个线程中完成），尽管它在很大程度上取决于计算像素的算法。

# joomla - Joomla 2.5：如何在没有菜单的模式窗口中显示组件？

> ID：15320570
> 
> 赞同：0
> 
> 时间：2013-03-10T08:58:20.880
> 
> 标签：joomla, joomla2.5

我正在使用 JHTML::_('behavior.modal'); 从链接启动组件

```
 <a href="/index.php?option=com_contact&view=contact&id=1&tmpl=component" 
class="modal" title="contact us" rel="{handler: 'iframe', size: {x: 680, y: 370}}">
 Contact example</a> 
```

它显示联系页面以及其他项目，如菜单和其他模块。有没有办法避免它并只显示 com_contact 页面？我读到可以使用 &tmpl=component 但它不起作用。我正在使用 J2.5

编辑：如果我查看视图模板源代码，我看到 tmpl 变量已被删除....为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:25:27.490

```
&tmpl=component 
```

指示 Joomla 在模板的根目录中查找名为“component.php”的文件，即 /templates/your_template/component.php。

确保文件在那里......否则你可以达到类似的结果

```
&format=raw 
```

这是完全不同的，因为它根本不包含模板，所以你不会得到任何脚本和 css。

# python - 如何检查在 python 程序中打印点处理了多少行？

> ID：15320571
> 
> 赞同：0
> 
> 时间：2013-03-10T08:58:57.187
> 
> 标签：python, python-3.x

我只想检查程序运行期间处理的行数。（我处理大约百万行的txt文件。）

要检查运行期间处理的行数，我使用下面的代码

```
lineCnt = 0
for line in lines:
    lineCnt += 1
    if lineCnt % 2500 == 0:
        sys.stdout.write('.')
    if lineCnt % 100000 == 0:
        print("") 
```

当处理 2500 行时，我希望在屏幕上打印 1 个点。但是，我只能看到同时打印 40 个点。当处理 100000 行时。

我怎样才能修复它以获得我想要的结果？TT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:33:25.047

尝试`sys.stdout.flush()`在`sys.stdout.write('.')`.

你可以在那里使用 print 。如果您不想在点后换行，请像这样调用 print：

在 Python 3.X 中： `print('.', end='')`

在 Python 2.X 中： `print '.',`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:09:36.020

当点很多时，您想一次打印 40 个点吗？

```
lineCnt = 0
for line in lines:
    lineCnt += 1
    if lineCnt > 100000:
        if lineCnt % 100000 == 0:
            print("." * 40)
    elif lineCnt % 2500 == 0:
        sys.stdout.write('.') 
```

# php - 无法加载子文件夹中的控制器

> ID：15320572
> 
> 赞同：2
> 
> 时间：2013-03-10T08:59:00.113
> 
> 标签：php, codeigniter, codeigniter-routing

大家早，

我在使用控制器/uri 和子文件夹时遇到了很多麻烦，目录如下所示：

```
application/
     controllers/
         d2/
         mc/
             cp/
             --- login.php
     ... 
```

是`routes.php`：

```
$route["cp"] = "mc/cp/login/login_form";
$route["cp/login"] = "mc/cp/login/login_form"; 
```

而且`login.php`是：

```
class Login extends CI_Controller {
    public function login_form() {
        echo "hey!";
    }
} 
```

在日志文件中，我可以看到：

```
ERROR - 10/03/2013, 09:45:00 --> 404 Page Not Found --> mc/cp 
```

但是，当我尝试输入`http://localhost/mc/cp`或`http://localhost/mc/cp/login`返回 404 错误时，问题到底出在哪里？将控制器移动到`controllers/mc`文件夹后，文件加载没有问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:16:48.283

我发现了问题。仔细阅读[用户指南](http://ellislab.com/codeigniter/user-guide/general/controllers.html#subfolders)，我发现我没有很好地阅读如何处理控制器的子目录：

> 只需在您的应用程序/控制器目录中创建文件夹并将您的控制器类放在其中。

不能是目录的子目录，而是直接的目录，像这样：

```
application/
    controllers/
        d2/
        mc/
        cp/
        --- login.php
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:52:46.343

这显然是我在另一篇文章的链接中找到的一种解决方法，尽管我没有尝试过。

[http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/](http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/)

仅供参考，您可以在大多数其他位置使用子目录，特别是`views`,`models`和`helpers`.

# node.js - GruntJS/NPM package.json：从本地安装？

> ID：15320578
> 
> 赞同：4
> 
> 时间：2013-03-10T08:59:31.487
> 
> 标签：node.js, gruntjs

使用 GruntJS/NPM package.json

如果我已经将一个模块从 github 克隆到本地，我如何在我的 package.json 中引用它，以便它从本地版本安装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:08:11.573

您可以在 Github 上创建原始 repo 的分叉版本，并[在`package.json`](https://npmjs.org/doc/json.html#Git-URLs-as-Dependencies). 您甚至可以在等待上游接受您可能拥有的任何补丁时指定分支或标签。

```
"dependencies": {
  "my-task": "git://github.com/username/repo.git#branch"
} 
```

或者，您可以使用[`npm link`](https://npmjs.org/doc/link.html)来引用位于硬盘驱动器上的项目。如果您是唯一的开发人员，这很好用，但无论如何部署都会有点棘手。（上面的选项是迄今为止最好的选项）

# android - 闪烁的操作栏图标

> ID：15320580
> 
> 赞同：1
> 
> 时间：2013-03-10T08:59:36.600
> 
> 标签：android

我有一个 ActionBar 图标，它是一个聊天消息屏幕的按钮。我有两个图标副本。一种标准灰色，一种黄色。

当我显示黄色图标表示有消息等待时，我希望它缓慢闪烁。

这可以通过操作栏图标实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:04:18.507

您可以尝试使用 MenuItem 的[setIcon](http://developer.android.com/reference/android/view/MenuItem.html#setIcon%28android.graphics.drawable.Drawable%29)方法。由于它需要一个 Drawable，因此您可以使用[AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)来实现慢闪效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-08T03:14:41.250

我可能以一种狡猾的方式做到了这一点，因为我对 Android 还是很陌生，但也许它会帮助某人/某人会纠正我。

我有一个 500 毫秒的计时器，它定期执行运行“invalidateOptionsMenu();” 这将导致菜单被重绘，一旦发生这种情况，您只需在里面隐藏/显示您的图标，下面我正在闪烁一个“无信号”图标。只需将您的计时器设置为您想要的任何闪光时间。

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.menu, menu);

    if(!AppStates.InternetAvailable || !AppStates.ServerContactable)
    {
        if(!NoSignalFlashState) NoSignalFlashState=true;
        else NoSignalFlashState=false;
        menu.findItem(R.id.ActionNoSignal).setVisible(NoSignalFlashState);
    }
    else menu.findItem(R.id.ActionNoSignal).setVisible(false);

   super.onCreateOptionsMenu(menu);

    return true;
} 
```

# jquery - 向上/向下滚动jquery

> ID：15320585
> 
> 赞同：0
> 
> 时间：2013-03-10T09:01:11.567
> 
> 标签：jquery, scroll

我想向下滚动到页面中的 div，然后向上滚动一点。

使用jQuery。

我得到了这个 onclick 绑定：

```
{
 $.scrollTo( $('#theDestDiv'), 1000);
 window.scrollTo(0, (window.pageYOffset)-100 );
} 
```

问题是：window.scroll 在页面完成滚动到 theDestDiv 之前触发，然后 pageYOffset 得到错误的值。

我尝试了 setTimeout ，只有当超时是向下滚动所需的时间时才有效。

任何想法如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:37:21.770

```
$.scrollTo( $('#theDisclaimer'), 1000);
scroll_up_disclaimer();

function scroll_up_disclaimer(){
    $("html, body").animate({scrollTop:"-=68"})
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:56:57.790

你试过使用jquery的动画完成回调函数吗？您可以在动画完成后运行代码。下面是一个例子。

```
var scrollTo = $('#theDestDiv').offset(); //find the target
$('html, body').animate({scrollTop:scrollTo}, 1000, function(){
    //on animation complete, scroll back up
    var scrollUp = scrollTo.top-100;
    $('html, body').animate({scrollTop:scrollUp}, 1000);
}); 
```

如果您想给它一种“反弹”，我建议您改用 jquery.easing 插件。您想要使用的缓动是 easeOutBack 以便动画通过其最终位置并缓慢返回。[http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

# jquery - 重命名一个 jQuery 已经绑定的事件

> ID：15320587
> 
> 赞同：1
> 
> 时间：2013-03-10T09:01:21.863
> 
> 标签：jquery, events, bind

我的 jQuery 插件为预定事件触发事件，例如`plugin:json`和`plugin:params`. 现在，我正试图阻止自定义事件传播到其他父母，所以我通过命名事件来完成一半。但是，当一个人在没有命名空间的情况下绑定事件时，该事件不会触发。

所以不是`$(el).on('plugin:json', function(){})`，人必须输入`$(el).on('plugin:json.namespace', function(){});`，但这是一种绑定事件的新方法，我的上一个插件版本对旧版本的插件没有这个要求，如果人们升级或代码重构可能会破坏现有代码可能太多了。

那么，我可以检查元素是否具有绑定事件，并使用正确的命名空间重命名它们吗？我知道`$._data`jQuery 中未记录的内容可以列出事件，我希望插件具有高性能，同时仍然能够正确重命名它。就像在所有 DOM 元素中触发所有事件一样，根据它们是否“回答”我的触发器，重命名它们。

# java - . bean 名称中的字符并在 SpEL 中使用

> ID：15320588
> 
> 赞同：0
> 
> 时间：2013-03-10T09:01:23.793
> 
> 标签：java, spring, spring-el

我有一个简单的弹簧上下文文件如下：

```
<bean id="acl.provider" class="com.provider.ProviderType" factory-method="getInstance">
    <constructor-arg index="0" value="${provider}"/>
</bean>

<bean id="acl.authentication" class="com.provider.AuthenticationFactory">
    <constructor-arg index="0">
        <value>#{ @acl.provider==T(com.provider.ProviderType).A
                  ?'classpath:cfg/a.spax'
                  :null}</value>
    </constructor-arg>
</bean> 
```

当我初始化上述上下文时，出现以下错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'acl' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1083)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:274)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.context.expression.BeanFactoryResolver.resolve(BeanFactoryResolver.java:44)
    ... 124 more 
```

当我将`acl.provider`bean 名称更改为`aclprovider`（删除`.`字符）时，一切正常。

我的问题是：为什么`.`字符在 bean 名称中使用并在中使用`SpEL`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:07:29.090

我发现解决方案`""`的用途`SpEL`如下：

```
<bean id="acl.provider" class="com.provider.ProviderType" factory-method="getInstance">
    <constructor-arg index="0" value="${provider}"/>
</bean>

<bean id="acl.authentication" class="com.provider.AuthenticationFactory">
    <constructor-arg index="0">
        <value>#{ @"acl.provider"==T(com.provider.ProviderType).A
                  ?'classpath:cfg/a.spax'
                  :null}</value>
    </constructor-arg>
</bean> 
```

我的问题解决了。

# org-mode - org 模式下的类似堆栈的文档结构

> ID：15320590
> 
> 赞同：1
> 
> 时间：2013-03-10T09:01:39.907
> 
> 标签：org-mode

在 org-mode 中，如果不开始一个新的标题，就无法在给定的标题级别结束您正在写的内容，但我经常想回到更高级别的标题。例如，我将编写文档的某个部分，并且我想在其中的某个部分中间放置一个扩展部分。做这个的最好方式是什么？我一直在使用列表，但它们的处理方式与标题不同。例如，列表项没有标题/正文的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:28:23.943

你看过“内联任务”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:04:03.433

如果您绝对需要在文档中间插入一个小节，则可以使用[内联任务。](http://orgmode.org/worg/org-faq.html#closing-outline-sections)

这个问题已经出现了好几次（链接包含邮件列表中关于这个的主题），以及在[这个问题](https://stackoverflow.com/questions/11718401/how-to-use-todo-tags-in-org-mode-without-defining-headlines)中。

由于 Org 是一个大纲工具，因此无法返回到更高级别的大纲（没有另一个标题的给定部分没有定义的“结束”。

要返回等效的水平标题，您可以创建一个没有标题的标题。

# php - Yii - 我如何从管理页面上的外键/相关键中搜索列？

> ID：15320592
> 
> 赞同：2
> 
> 时间：2013-03-10T09:02:05.247
> 
> 标签：php, search, activerecord, yii, foreign-keys

在我的数据库中，我有两个表，制造商和塑料：

```
CREATE TABLE `manufacturer` (                                                                   
  `id` int(11) NOT NULL AUTO_INCREMENT,                                                                          
  `name` varchar(64) DEFAULT NULL,                                                                               
  PRIMARY KEY (`id`)                                                                                             
) ENGINE=InnoDB AUTO_INCREMENT=30 DEFAULT CHARSET=utf8

CREATE TABLE `plastic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL DEFAULT '',
  `manufacturer_id` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`,`manufacturer_id`),
  KEY `manufacturer_id` (`manufacturer_id`),
  CONSTRAINT `plastic_ibfk_1` FOREIGN KEY (`manufacturer_id`) REFERENCES `manufacturer` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=68 DEFAULT CHARSET=utf8 
```

如您所见，塑料与制造商具有 Yii 所说的 BELONGS_TO 关系——一个制造商可以制造几种不同的塑料。

我试图让从默认塑料管理页面中按制造商名称搜索成为可能，但搜索字段未显示在制造商列中。我遵循[了本指南](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)，我想我快到了，但我被困在一个小细节上。

在我的塑料模型类中，根据上面的链接，我有：

```
class Plastic extends CActiveRecord
{
public $manufacturer_search; //<-- added per the above link

public function rules()
{
    return array(
        array('manufacturer.name', 'length', 'max'=>64),
        array('name', 'length', 'max'=>64),
        array('name, manufacturer.name, manufacturer_search', 'safe', 'on'=>'search'),
    );
}

public function relations()
{
    return array(
        'manufacturer' => array(self::BELONGS_TO, 'Manufacturer', 'manufacturer_id'),
    );
}

public function search()
{
    $criteria=new CDbCriteria;
    $criteria->with=array('manufacturer');
    $criteria->compare('name',$this->name,true);
    $criteria->compare('manufacturer.name',$this->manufacturer_search, true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

}

管理页面使用 CGridView 小部件来显示所有内容（这是默认设置，除了 'columns' 属性我没有更改任何内容）：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'plastic-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'name',
        'manufacturer.name',
        array(
            'class'=>'CButtonColumn',
        ),  
    ),  
)); ?> 
```

令人抓狂的是搜索确实有效：如果我点击高级搜索，然后在制造商字段中输入一些内容，那就有效了。但我不能让搜索框出现在网格视图中。

[这](http://imgur.com/a/VQBLg)是一些截图：当我将manufacturer_id传递到小部件时的管理页面截图，当我像上面的代码一样传递manufacturer.name时的截图，当我传递manufacturer_search时的截图（我没想到无论如何都能工作） ，最后是高级搜索正常工作的截图。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T09:37:10.477

您必须`filter`专门为以下内容创建一个`$manufacturer_search`：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'plastic-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'name',
        array(
            'name'=>'manufacturer.name',
            'filter'=>CHtml::activeTextField($model,'manufacturer_search'),
        ),
        array(
            'class'=>'CButtonColumn',
        ),  
    ),  
)); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:46:37.823

如果您只使用“manufacturer_search”作为列的名称，它也可以工作，如您上面提到的教程中所示。

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'plastic-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'name',
        array(
            'name'=>'manufacturer_search',
            'value'=>'$data->manufacturer->name'
        ),
        array(
            'class'=>'CButtonColumn',
        ),  
    ),  
)); ?> 
```

# asp.net - 在客户端调用服务器验证

> ID：15320596
> 
> 赞同：1
> 
> 时间：2013-03-10T09:03:14.297
> 
> 标签：asp.net, asp.net-mvc-3, jquery, asp.net-mvc-4

我已经`Ajax.BeginForm`在服务器上应用了多种不同类型的数据注释，因此它可以按预期工作。现在我想从不同的 ajax 表单提交所有这些 ajax 表单，使用`jqueryform.submit();`我可以设法发布表单，但每当我尝试时， `$("#form1").validate();`我认为我应该加强我的服务器验证以及错误，但情况似乎并非如此。

只是想知道我想要实现的目标是否可能。

我尽量保持简单......让我解释一下我的情况。我有一个屏幕的多个选项卡视图，即项目视图，每个选项卡都有单独的 Ajax.BeginForm 作为嵌入式视图，在服务器端我有自定义条件验证器属性应用于我的模型让说 CR 运行或基本上被激活仅给定项目状态，例如已批准，否则默认验证就足够了，我还验证复选框 n 单选按钮业务规则的列表。对于正常的业务场景，每个选项卡视图，即 Ajax.BeginForm 与默认值分开工作，或者换句话说，没有我的自定义验证，我有一个这样的要求 ve 根据项目状态将所有这些表单提交到服务器我需要以某种方式将客户端验证更新为 CR，但情况并非如此，因为服务器基于默认属性或没有自定义 CR 验证呈现客户端验证。因此，一旦我的表单被提交到服务器，我可以看到模型状态为 IsValid 为 false 主要是因为 CR 属性被触发......但问题是我的整个用例都被这样做破坏了。我只想在发布/提交表单之前在客户端上调用 CR 验证。我希望这是有道理的。我只想在发布/提交表单之前在客户端上调用 CR 验证。我希望这是有道理的。我只想在发布/提交表单之前在客户端上调用 CR 验证。我希望这是有道理的。

# java - java，xenserver，有人知道如何在虚拟机上运行命令吗？

> ID：15320600
> 
> 赞同：1
> 
> 时间：2013-03-10T09:03:38.663
> 
> 标签：java, virtual-machine

我正在使用 XenServer，我正在连接池，获取所有 VM 的列表。现在我需要登录到虚拟机。并在所有 VM 上执行一个 exe 文件。有人知道吗？

谢谢！

```
connection = new Connection(url);
Session.loginWithPassword(connection, userName, Password, APIVersion.latest().toString());

Map<VM, VM.Record> vms = VM.getAllRecords(connection);
for (VM.Record record : vms.values()){
    if (!record.isATemplate){
        // now i need somehow to connect with the VM username and password
        // now i need to run an exe file.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:52:34.453

据我所知，XenServer API 没有提供任何可以在 VM 中执行命令的 api。恕我直言，像 XenServer 或 VMware 这样的 VMM 不应该有权在其托管的任何 VM 中执行命令。那么，为什么不获取所有 vm 的 ip 并使用一些 ssh 库来执行命令呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:13:45.313

使用 sshj`Session.exec()`通过 ssh 执行远程命令。在 Github repo 中有[一个这样做的例子](https://github.com/shikhar/sshj/blob/master/src/main/java/examples/Exec.java)。

# python - 使用python创建共享windows文件夹的权限

> ID：15320605
> 
> 赞同：1
> 
> 时间：2013-03-10T09:03:55.000
> 
> 标签：python, windows, acl, pywin32

我在 python 3.3 中使用这个代码和 pywin32 库来共享一个文件夹。我现在如何向文件夹添加权限？以下代码不对共享文件夹设置任何权限。我想将特定用户添加为读/写

```
import win32net
import win32netcon

shinfo={}

shinfo['netname']='python test'
shinfo['type']=win32netcon.STYPE_DISKTREE
shinfo['remark']='data files'
shinfo['permissions']=0
shinfo['max_uses']=-1
shinfo['current_uses']=0
shinfo['path']='C:\\sharedfolder'
shinfo['passwd']=''
server='192.168.1.100'

win32net.NetShareAdd(server,2,shinfo) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:37:49.607

你应该尝试使用`win32security`模块。[这个](http://timgolden.me.uk/python/win32_how_do_i/add-security-to-a-file.html)网站展示了一个使用它来设置用户权限的例子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:54:26.930

该模块的替代方案`win32security`是 wimp out 并使用该`cacls`程序，该程序更易于使用，例如参见[http://support.microsoft.com/kb/162786/en-us ：](http://support.microsoft.com/kb/162786/en-us)

```
from subprocess import *

proc = Popen("echo y|cacls filename /E /G BUILTIN\\Users:R", shell=True) 

proc.wait()

print "Child exited with",proc.returncode 
```

这`echo y`是因为这个愚蠢的程序会问“你确定吗？” 问题。在 Windows 7 上，不推荐使用 cacls（但仍然有效），请`icacls`改用（或`xcalcs`从资源工具包中）。

当然，为此创建子进程不会像调用 Win32 API 那样高效。

# php - WordPress 连接被重置？错误 101

> ID：15320610
> 
> 赞同：0
> 
> 时间：2013-03-10T09:04:31.200
> 
> 标签：php, wordpress-theming, wordpress

我`Wordpress MU`用来托管两个 wordpress 网站。突然之间，两个站点都关闭了。

我记得昨天添加了一些插件，我修改`page.php`了响应主题。我做了一个备份，所以现在我将 page.php 改回原来的样子。

我托管的所有其他网站都可以工作，我托管了一个 webail 客户端和一个 Web 应用程序，它们运行良好，所以托管不是问题。我在我的机器上托管，所以当我去本地主机时，它仍然给出相同的 101 错误。

有任何想法吗？

我得到了标准：错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。

更新：我正在使用带有域映射的 wordpress MU，并且我在本地计算机上托管，因此我的 IP 地址经常更改。我没有在域映射器中更改它。

我什至无法在本地使用`http://localhost`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:05:00.380

尝试从另一台计算机访问它。错误 101 通常是客户端浏览器问题。

如果是 Chrome： http: [//support.google.com/chrome/bin/answer.py ?hl=en&answer=117804](http://support.google.com/chrome/bin/answer.py?hl=en&answer=117804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T11:26:42.907

我今天也遇到了这个问题，系统工程师告诉我这是代码中的错误。但由于某种原因，我无法相信。于是我开始了我的调查：

*   DNS 正确解析（在客户端使用 nslookup 或 dig）
*   浏览器找不到给出“连接已重置”错误的页面，因此服务器上的某些内容不正确。
*   我在浏览器中打开了 Mozilla Network Inspector，发现了一些值得注意的事情：当我尝试打开网站时，我向服务器发送了一个请求，但服务器没有回复我的浏览器。所以这证实了它确实与服务器有关。否则我至少会得到 200/403/404/501 HTTP 响应。
*   我重命名了 .htaccess 和 Wordpress 的所有插件文件夹，这样 Wordpress 就无法再加载它们了。没有结果。
*   我检查了网站上的文件是否可以通过直接请求访问，确实如此。所以我创建了一个 phpinfo.php 作为内容`<?php phpinfo(); ?>`并查找了 memory_limit 和 post_size 限制。将这些设置为默认的 32M/64M 可能会导致此类问题。它设置得非常高（512MB）。所以这也不是原因。

经过一段时间的搜索，我的脑海中突然出现了一个问题：当您找不到原因的逻辑原因时，只需重新启动服务并重试即可。可能服务部分崩溃并且没有被某些错误机制捕获。就像 Microsoft Windows 一样，当您遇到硬件或新安装的软件问题时，您必须定期重新启动。

所以我要求工程师重新启动 Apache / httpd 守护进程，你怎么看？一切都恢复正常了。就像真的什么都没发生一样。

以 root 身份重新启动 HTTP 守护程序的可能命令：

```
/etc/init.d/apache2 restart
/etc/init.d/httpd restart
/etc/init.d/apache restart 
```

或通过：

```
service apache2 restart
service httpd restart
service apache restart 
```

希望这可以帮助一些人！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T16:09:53.877

我重新启动了网络服务器并确保 DNS 指向我的 ip。

重新启动 Web 服务器 (httpd) 似乎有效，因为我无法访问`http://localhost`

# html - 缩放时形状变形

> ID：15320612
> 
> 赞同：1
> 
> 时间：2013-03-10T09:05:03.830
> 
> 标签：html, css

我有一个包含两个输入元素和一个文本区域的表单。当我放大/缩小对象的大小时，会发生变化。有没有办法阻止这种行为？在 100% 缩放时看起来不错，但如果有人使用 90% 或 110% 缩放的浏览器，它看起来会变形。

```
<table class="upload" cellpadding="0">
    <tr>
        <td>
                <p><b>Name:</b></p>
        </td>
        <td>
                <input type="text" name="appname" size="50" maxlength="32">
        </td>
   </tr>
    <tr>
        <td>
            <p><b>Age:</b></p>
        </td>
        <td>
                <textarea  name="adtext" cols="39" rows="2" maxlength="75" style="resize: none;"></textarea>
        </td>
    </tr>
    <tr>
        <td>
            <p><b>Website:</b></p>
        </td>
        <td>
            <input type="text" name="marketlink" size="50" maxlength="254">
        </td>
        <td>
            <button type="button" onclick="drawAd()">Test link</button>
         </td>
    </tr>
</table> 
```

CSS：

```
table.upload {
 border-spacing:0;
  border-collapse:collapse;

}
table.upload td {
border:0px solid black;
margin:0;
padding:0;
}
table.upload td input{
outline: #388c91;
margin-left:4px;
}

table.upload td textarea{
margin-left:4px;
} 
```

结果：

![在此处输入图像描述](../Images/02c28e99f345ea15ddd6c7af8d879203.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:08:51.053

`size`停止使用/属性设置元素宽度`cols`并改用 CSS：

```
table.upload td input, table.upload td textarea {
    width: 250px;
} 
```

[http://jsfiddle.net/Vrd2q/](http://jsfiddle.net/Vrd2q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:08:07.337

这可能是因为输入大小的计算`em`是相对于`font-size`（随着不同的缩放级别而变化）。尝试以绝对单位指定宽度，例如`px`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:21:16.360

阻止人们放大或缩小是一种可用性嘘。不要使用标签属性 'size' 和 'cols' （删除这些属性，正如@MarcinJuraszek 提到的），而是使用 CSS 为输入和 textarea 字段提供相等的绝对（px）或相对（em）宽度。IE

```
input,
textarea {
    width: 15em;
} 
```

在 em 的情况下（可以说是首选），字段的宽度将根据缩放因子进行缩放，但至少它们都将缩放相同。

# c# - 打开嵌入 Microsoft Word 的窗口？

> ID：15320614
> 
> 赞同：1
> 
> 时间：2013-03-10T09:05:25.297
> 
> 标签：c#, .net, ms-word, ms-office

是否可以在 C# 中打开一个嵌入了 Microsoft Word 2010 富文本编辑器的窗口？这将是一个出色的 HTML/RTF 编辑器。显然，这只适用于已经安装了 Word 的 PC。这可能吗？

显而易见的方法是使用[MS Word 对象库](https://stackoverflow.com/a/1994274/1294758)`Word.Application`互操作库中的对象，但我想知道是否有更优雅的解决方案。

# c# - 将pdf保存在用户文件夹中

> ID：15320616
> 
> 赞同：0
> 
> 时间：2013-03-10T09:05:54.153
> 
> 标签：c#, winforms, itextsharp

在我的 Windows 窗体中，我使用 iTextSharp 生成 pdf。

我已经硬编码了保存 pdf 的位置，但我想询问用户保存此 pdf 的位置。我该怎么做？

这是我的代码：

```
private void button1_Click_1(object sender, EventArgs e)
{
  using (Bitmap b = new Bitmap(this.Width, this.Height))
  {
    using (Graphics g = Graphics.FromImage(b))
    {
      g.CopyFromScreen(this.Location, new Point(0, 0), this.Size);
    }
    Document doc = new Document();
    iTextSharp.text.Image i = iTextSharp.text.Image.GetInstance(b, System.Drawing.Imaging.ImageFormat.Bmp);
    PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(@"C:\Temp\output.pdf", FileMode.Create));
    doc.SetPageSize(new iTextSharp.text.Rectangle(this.Size.Width + doc.LeftMargin + doc.RightMargin, this.Size.Height + doc.TopMargin + doc.BottomMargin));

    doc.Open();
    doc.Add(i);
    doc.Close();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:11:11.830

用于[`SaveFileDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx)显示标准保存对话框，允许用户选择文件保存位置。

使用示例：

```
SaveFileDialog dialog = new SaveFileDialog();
dialog.Title = "Save file as...";
dialog.Filter = "Text files (*.txt)|*.txt|All files (*.*)|*.*";
dialog.RestoreDirectory = true;

if (dialog.ShowDialog() == DialogResult.OK)
{
    MessageBox.Show(dialog.FileName);
} 
```

当然，您必须`dialog.FileName`在创建 FileStream 时使用：

```
PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(dialog.FileName, FileMode.Create)); 
```

# c# - 如何在 C# 中编写基于文本的游戏中的游戏事件

> ID：15320617
> 
> 赞同：0
> 
> 时间：2013-03-10T09:05:55.993
> 
> 标签：c#

所以我试图创建一个基于文本的游戏，它的用户界面（而不是真正的基于文本的解析和所有有趣的东西）基本上是一个角色扮演游戏。为此，游戏有许多可能发生的不同事件（但不能保证会发生，也不能以任何整体顺序发生），我想知道最有效的编码方式。

目前，我的想法是创建一个名为 GameState 的静态类，其中包含其他信息，其中包含一个数组和一个枚举。为了对话或多选项事件选择，该数组*可能是字节，其中 0 表示事件未发生，然后数字 1 - X 表示选择了 X 个可能的选项。*像这样的东西：

```
public enum GameEvents{
                       Event 1,
                       Event 2,
                       Event 3 };

public static byte[] GameEventStates = new byte[Enum.GetNames(typeof(GameEvents)).Length]; 
```

所以在事件和东西中，我可以做这样的事情：

```
if(GameState.GameEventStates[GameState.GameEvents.Event2] == 1)
{
  Stuff Here;
} 
```

或者

```
GameState.GameEventStates[GameState.GameEvents.Event4] = 1; 
```

（注意：对于严格意义上的“已看过”事件，未看过为 0，看过为 1）。

不过，这其中的一部分只是让人感到被迫，就像有一种我根本想不到的更优雅的方式。我不知道它会是什么，但它仍然允许我

A）在事件发生时可以全局访问它以更改值并允许检查它们的发生，

B) 随着游戏内容随着时间的推移而扩展，轻松添加更多事件，并且

C) 轻松将值保存到保存文件或从保存文件加载。

这*真的*是最好的方法吗？我是第一个承认我能想出的……“创造性”的方法，但对解决问题并不那么好。第二意见真的很感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:20:08.210

这看起来像是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的经典示例。

您需要创建将保存游戏状态的类，如果状态发生变化，它将通知所有订阅者。

```
public class GameStateManager 
{
 public GameStateFileReader fileReader = new GameStateFileReader() //this class can read gamestate to file, and save it back 

 public void SaveState() {//save using fileReader}
 public void LoadState() {//load}

 public event Action<GameEvents> StateChanged;

} 
```

并且 Game 类可以订阅 StateChanged 事件：

```
 gameStateManager.StateChanged += OnStateChanged;
 //....
 public void OnStateChanged(GameEvents event)
  {
     //react on new game state
  } 
```

一些游戏代理可以改变游戏状态（例如，用户用愤怒的老板开门），所以 GameStateManager 应该提供一种改变游戏状态的方法。

```
public void SetNewState (GameEvents newEvent) 
  {
     //Save new state to some Property
     //...

     //and notify everybody about new state
     if(StateChanged != null)
     {
        StateChanged(newEvent);
     }
   } 
```

如果某个类想要被告知游戏状态被某人改变了，它也应该订阅这个事件。

我不想把你和`Action`. 你可以在这里阅读它们： [解释动作](http://simpleprogrammer.com/2010/09/24/explaining-what-action-and-func-are/)

此外，有关事件的更多信息： [C# 中的事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

# forms - 在 Oracle 表单中使用 host 命令调用带参数的 url

> ID：15320620
> 
> 赞同：0
> 
> 时间：2013-03-10T09:06:22.373
> 
> 标签：forms, oracle, host

我正在使用表单 [32 位] 版本 6.0.8.26.0

在 Oracle Forms 触发器中，我使用 host 命令调用带有参数的 url。我的这部分代码的示例如下：

```
HOST('cmd /c start http://localhost/TestServlet?p1=A&p2=B'); 
```

但是浏览器是使用输出 url 调用的，该 url 一直显示到 & 符号并停止：

```
http://localhost/TestServlet?p1=A 
```

关于如何使用 Oracle 表单中的 HOST 命令获取完整 url 的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T07:32:26.307

replace spaces by %20 and use ^&

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:27:31.913

`&`用于分隔命令。因此我们可以使用`^`来逃避`&`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T22:00:01.393

尝试丢失“cmd /c”。

这对我有用：

```
PROCEDURE call_url_from_forms6i(i_user_id           varchar2
                               ,i_section_id        varchar2) is
  /* http://stackoverflow.com/questions/15320620/using-host-command-to-call-a-url-with-parameters-in-oracle-forms */                               
  p_user_id      varchar2(200) := '&P_USER_ID='||nvl(i_user_id,'1');
  p_section_id   varchar2(200) := '&P_SECTION_ID='||nvl(i_section_id, '0');
  p_report_name  varchar2(200) := '&report_name=REPNAME';  
  p_url         varchar2(200) := 'http://website.com/folder/';
  v_servlet_name varchar2(200) := 'servletname?';
  p_report       varchar2(200) := 'report=REPORT';    
  p_url_hdr      varchar2(200) := p_url||v_servlet_name;
  p_url_params   varchar2(2000);
  p_url_host_call varchar2(2000);
BEGIN
  p_url_params := p_report||p_user_id||p_section_id||p_report_name;
  --display in browser
  p_url_host_call := 'start "" "'||p_url_hdr||p_url_params||'"';
  host(p_url_host_call);
EXCEPTION 
  WHEN OTHERS THEN
    --message('Error running report in browser: '||sqlerrm);pause;
    return;
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T09:19:46.077

您可以替换`&`为`%26`内部 URL

# debugging - 使用 Web Essentials 进行 TypeScript 调试和捆绑不起作用

> ID：15320622
> 
> 赞同：1
> 
> 时间：2013-03-10T09:06:47.680
> 
> 标签：debugging, typescript, web-essentials

我正在使用 Web Essentials 2.5.1、IE 10 和 Visual Studio 2012 运行 TypeScript 8.3.1。我有一个应用程序，我的所有 ts 代码都位于一个应用程序文件夹中。我已经为该文件夹设置了一个 Web Essentials 捆绑包，并且正在生成地图文件。

当我查看捆绑 Js 的输出时，其中包含所有源映射。下面是它的一个片段。

```
///#source 1 1 /app/controllers/featured-carousel-controller.js

(my code sits here)

//@ sourceMappingURL=featured-carousel-controller.js.map 
```

但是，我似乎无法使用此模型进行 TypeScript 调试。如果我创建一个新的 Visual Studio 项目，它可以开箱即用地调试，但不能使用这个捆绑。我注意到`sourceMappingURL`它不像 JS 文件那样包含文件夹路径。那是对的吗？

我已经检查以确保 bundled.js 在我的 default.html 中并且应用程序运行正常。谁能想到我可能需要做的其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:04:36.763

他们从 WebEssentials 中删除了一些东西并将其放入 WebTools 2012.2

[http://www.asp.net/vnext/overview/fall-2012-update](http://www.asp.net/vnext/overview/fall-2012-update)

下载：

[https://www.microsoft.com/web/handlers/webpi.ashx/getinstaller/ASPDOTNETandWebTools2012_2.appids](https://www.microsoft.com/web/handlers/webpi.ashx/getinstaller/ASPDOTNETandWebTools2012_2.appids)

我记得在我家里有的 VS2013 Pro 中没有这个功能。现在我想知道在那个版本中需要什么来获得相同的效果。如果你知道，请告诉我。

更新 2：

Sheet....它工作了大约一分钟，然后它告诉我没有符号可以打破。

# google-chrome - 在 chrome 扩展中搜索现有的书签 url

> ID：15320623
> 
> 赞同：1
> 
> 时间：2013-03-10T09:06:51.453
> 
> 标签：google-chrome, google-chrome-extension, bookmarks

我正在开发一个与书签相关的 chrome 扩展，我已经在一个变量中获取了当前页面的 url，我需要将 url 与现有的书签 url 进行比较。我的扩展名仅限于书签中的单个文件夹。我有文件夹的ID。如何使用 chrome 中的搜索功能在文件夹中搜索现有 url 的存在，如下所示：

```
chrome.bookmarks.search(query, function(results) {

}); 
```

谢谢

# iphone - NSSortDescriptor，获取按日期排序的最新 5 条记录

> ID：15320624
> 
> 赞同：0
> 
> 时间：2013-03-10T09:07:26.447
> 
> 标签：iphone, ios, objective-c

对于我的聊天应用程序，我只想最后 5 条消息，按日期排序。如果我设置了 fetchLimit，chatMessages 会正确排序，但我会得到按日期排序的前 5 条消息。

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

 [fetchRequest setFetchLimit:5]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T09:10:13.797

更改`ascending`为`NO`,

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

[fetchRequest setFetchLimit:5]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T09:10:38.150

将 更改`NSSortDescriptor`为`ascending:NO`。然后将结果的顺序颠倒`NSArray`。

# angularjs - AngularJS，如何获得模型的完整路径/名称？

> ID：15320626
> 
> 赞同：0
> 
> 时间：2013-03-10T09:07:30.523
> 
> 标签：angularjs, angularjs-scope, angularjs-ng-repeat

我正在尝试更改引用其模型的输入框值。输入框位于 ng-repeat 中，它从函数而不是变量中获取其元素。

应用程序有没有办法打印模型完整路径/名称，以便我可以从控制器中引用它？（请注意，模型正在工作，因为它下面的一个带有 ng-show 的分区会正确响应正在填充的输入模型。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:19:38.790

通常，您不应该在 ngRepeat 中使用函数。随着摘要循环的工作方式，您的函数最终将被多次调用。这不是很有效。相反，您应该从控制器运行该函数并将其分配给您传递给 ngRepeat 的范围变量。

事实证明，这使您的问题的解决方案变得非常容易。例如，您可以使用每个项目`$index`从控制器中引用它。

如果您发布小提琴或 plunker，我可以用更具体的内容更新此答案。但是如果没有一些代码，很难说更多。

# width - HTMLEditorExtender 宽度不适合 %100

> ID：15320627
> 
> 赞同：1
> 
> 时间：2013-03-10T09:08:02.450
> 
> 标签：width, htmleditorextender

使用 ajaxcontroltoolkit.as 我的恐怖片。

即使我调整 Web 浏览器的大小，HTMLEditorExtender 仍保持其预渲染宽度

它不检测宽度调整：保持原样。

并且需要完全刷新浏览器 (F5) 使 HTMLEditorExtender 重新计算其宽度。

所以。

有没有解决这个问题的标准方法？否则我会用jquery来拍它。或者删除这个恐怖控制。

```
<asp:TextBox ID="tbEditor" runat="server"
            TextMode="MultiLine" Rows="10" style="width:100%">
</asp:TextBox>
        <asp:HtmlEditorExtender ID="tbEditor_HtmlEditorExtender" runat="server" 
            Enabled="True" TargetControlID="tbEditor">
        </asp:HtmlEditorExtender> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:19:55.327

一个CSS规则

```
.containerClass .ajax__html_editor_extender_container
        {
            width: 100% !important;/*important is really important at here*/
        } 
```

和一个周围的 div，解决了问题。

```
<div class="containerClass">
            <asp:TextBox ID="tbEditor" runat="server"
            TextMode="MultiLine" Rows="10" style="width:100%">
</asp:TextBox>
        <asp:HtmlEditorExtender ID="tbEditor_HtmlEditorExtender" runat="server" 
            Enabled="True" TargetControlID="tbEditor">
        </asp:HtmlEditorExtender>
        </div> 
```

解决了我的问题。希望这对某人也有帮助。

# java - 使用 AsyncTask 持续刷新蓝牙 RSSI

> ID：15320632
> 
> 赞同：2
> 
> 时间：2013-03-10T09:09:15.243
> 
> 标签：java, android

我想让手机在手机远离其他设备的同时不断刷新其他设备的RSSI值。

为了使屏幕显示不断更新新的 RSSI 值，我选择使用 AsyncTask 以免冻结我的 UI。

但不知何故，我的代码不起作用。每次运行时，应用程序都会死掉。出于调试目的，我在那里放了一个 Toast.makeText。但屏幕上什么也没有出现。所以也许这意味着我的 AsyncTask 实际上根本没有执行？

异步任务代码：

```
 private class Refresh extends AsyncTask<Void, Void, Void> {
    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        while(true){
            Toast.makeText(getApplicationContext(), "Loop is being executed", Toast.LENGTH_SHORT).show();
            init();
            startDiscovery();
        }
    }
} 
```

OnCreat() 代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    init();
    startDiscovery();

    new Refresh().execute();
} 
```

请帮帮我！我哪里错了？

时间

# vb.net - VB.net 调用和事件时如何传递附加参数

> ID：15320634
> 
> 赞同：3
> 
> 时间：2013-03-10T09:09:26.340
> 
> 标签：vb.net, event-handling

```
Public Event DocumentCompleted As WebBrowserDocumentCompletedEventHandler

Dim arg() As Object = {homeTeam, guestTeam}
        AddHandler browser.DocumentCompleted, New 
WebBrowserDocumentCompletedEventHandler(AddressOf DoStuff)

Private Sub DoStuff(ByVal sender As Object, ByVal e As WebBrowserDocumentCompletedEventArgs)

End Sub 
```

触发 DocumentCompleted 事件时如何传递 homeTeam 和 guestTeam。我想将上述内容转换为 Dostuff 方法内部的值。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:42:58.780

首先，你不能把它挂在不知名的地方：

```
Dim arg() As Object = {homeTeam, guestTeam}
AddHandler browser.DocumentCompleted,
           New WebBrowserDocumentCompletedEventHandler(AddressOf DoStuff) 
```

`AddHandler`可能需要使用某种`Initialize`方法，可能是 inside `Sub New`、 after`InitializeComponent`或 inside `Form_Load`，或者在您期望它被触发时（在特定事件之后）。请注意，您使用的是本机 .NET 组件的默认事件，具有默认事件类型。在这种情况下，您不能在触发时直接使用它已经提供的东西以外的任何东西。请参阅[MSDN 上的 WebBrowser.DocumentCompleted 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)。

但是，您可以覆盖所有相关类并拥有自己的 MyWebBrowser 控件和您自己的事件，其中将包含其他属性。请参见下面的示例：

```
Public Class Form1
  Sub New()
    ' This call is required by the designer.
    InitializeComponent()

    Dim browser As New MyWebBrowser
    AddHandler browser.MyDocumentCompleted, AddressOf DoStuff
  End Sub

  Private Sub DoStuff(ByVal sender As Object, ByVal e As MyWebBrowserDocumentCompletedArgs)
    Dim guestTeam As String = e.GuestTeam 'guest team
    Dim homeTeam As String = e.HomeTeam 'and home team are both accessible
    'so you can do some processing on them
  End Sub

  Public Class MyWebBrowserDocumentCompletedArgs : Inherits WebBrowserDocumentCompletedEventArgs
    Dim _homeTeam As String
    Dim _guestTeam As String
    Public ReadOnly Property HomeTeam
      Get
        Return _homeTeam
      End Get
    End Property
    Public ReadOnly Property GuestTeam
      Get
        Return _guestTeam
      End Get
    End Property

    Sub New(url As Uri, homeTeam As String, guestTeam As String)
      MyBase.New(url)
      _homeTeam = homeTeam
      _guestTeam = guestTeam
    End Sub
  End Class

  Public Class MyWebBrowser : Inherits WebBrowser
    Public Delegate Sub MyWebBrowserDocumentCompletedEventHandler(e As MyWebBrowserDocumentCompletedArgs)
    Public Event MyDocumentCompleted As MyWebBrowserDocumentCompletedEventHandler

    Protected Overrides Sub OnDocumentCompleted(e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs)
      MyBase.OnDocumentCompleted(e)
      'homeTeam and guestTeam need to be extracted from the current instance of MyWebBrowser, and passed further
      RaiseEvent MyDocumentCompleted(New MyWebBrowserDocumentCompletedArgs(e.Url, "homeTeam", "guestTeam"))
    End Sub
  End Class
End Class 
```

如果您的项目相对较小，您确实可以将它们作为全局变量，正如@Vlad 在评论中所建议的那样。

# objective-c - 如何为 iOS 创建二维码阅读器

> ID：15320635
> 
> 赞同：11
> 
> 时间：2013-03-10T09:09:27.590
> 
> 标签：objective-c, camera, qr-code

我正在为我们的本地企业开发一个应用程序。我已经在 a 中安装了实时摄像头`UIImageView`，现在我需要知道如何读取 QR 码`UIImageView`并在标签中显示内容 (0000-KKP0-2013)。

所以基本上我需要一个二维码扫描仪来读取二维码并将内容保存在字符串中。我已经使用过 ZXing（“斑马线”），但它与 iOS 6 不兼容，无法使用。是否有一个简单的代码来获取字符串中的二维码内容？

谢谢！

这是我在 .m 文件中使用的代码：

```
#import "ZBarSDK.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize vImagePreview;             

- (void)viewDidUnload
{
    [super viewDidUnload];

    vImagePreview = nil;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    //----- SHOW LIVE CAMERA PREVIEW -----
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPreset352x288;

    /*CALayer *viewLayer = self.vImagePreview.layer;
    NSLog(@"viewLayer = %@", viewLayer);*/

    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

    captureVideoPreviewLayer.frame = self.vImagePreview.bounds;
    [self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

    AVCaptureDevice *device = [self frontCamera];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);

        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"QReader"
                              message:[NSString stringWithFormat:@"ERROR: Versuch die Kamera zu öffnen ist fehlgeschlagen [%@]",error]
                              delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        alert.tag = 1;

        [alert show];
    }
    [session addInput:input];

    [session startRunning];

    }

- (AVCaptureDevice *)frontCamera {
    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    for (AVCaptureDevice *device in devices) {
        if ([device position] == AVCaptureDevicePositionFront) {
            return device;
        }
    }
    return nil;
} 
```

现在我需要知道如何使用 ZBarSDK 从 vImagePreview 读取 QR 码。而且我不能使用 UIPickerView

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T09:12:35.667

试试 ZBar：http: [//zbar.sourceforge.net/iphone/sdkdoc/install.html](http://zbar.sourceforge.net/iphone/sdkdoc/install.html)

我们在支持 iOS 4 到 iOS 6.1 的应用程序中成功使用了它

就我而言，我使用`ZBarReaderView`- 查看相机预览，它会自动检测并返回扫描的代码。

你需要：

```
#import "ZBarSDK.h"  

ZBarReaderView *readerView; 
```

添加这个：`<ZBarReaderViewDelegate>`

进而：

```
[readerView.scanner setSymbology:ZBAR_QRCODE config:ZBAR_CFG_ENABLE to:0]; 
readerView.readerDelegate = self;

[readerView start];

- (void)readerView:(ZBarReaderView *)view didReadSymbols: (ZBarSymbolSet *)syms fromImage:(UIImage *)img
{
    for(ZBarSymbol *sym in syms) 
    {  
        NSLog(@"Did read symbols: %@", sym.data);

    }
} 
```

无论如何，只需按照以下说明进行操作：

[http://zbar.sourceforge.net/iphone/sdkdoc/tutorial.html](http://zbar.sourceforge.net/iphone/sdkdoc/tutorial.html)

然后试一试——看看它是否适合你。

**编辑**

在这里，我上传了从这里获取的示例项目：[https ://github.com/arciem/ZBarSDK](https://github.com/arciem/ZBarSDK)

它启用了前置摄像头。**经测试 -使用前置摄像头**成功读取二维码：

[http://www.speedyshare.com/fkvqt/download/readertest.zip](http://www.speedyshare.com/fkvqt/download/readertest.zip)

或者

一旦应用程序启动 - 显示前置摄像头 - 扫描仪大小为 200x200，并作为子视图。 [http://www.speedyshare.com/QZZU5/download/ReaderSample-v3.zip](http://www.speedyshare.com/QZZU5/download/ReaderSample-v3.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T09:32:50.233

不久前，我们对此进行了研究。ZBar 看起来不错，但它是 LGPL 许可的，[不适合在 App Store 上使用](https://stackoverflow.com/a/9070734/15371)。最后我选择了[ZXingObjC](https://github.com/TheLevelUp/ZXingObjC)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T14:51:38.647

如果您想在这里测试二维码，这里有一些适用于 iphone 的应用程序可能会派上用场。[iphone qr扫描仪](http://www.iphonestop.net/best-5-iphone-qr-barcode-scanner-apps/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-13T14:51:45.397

OP 两年前一直在寻找支持 iOS6 的东西，但对于其他人来说，我选择的这个包含了内置的 iOS7 功能：

[https://github.com/mikebuss/MTBBarcodeScanner](https://github.com/mikebuss/MTBBarcodeScanner)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-11T15:54:11.243

任何希望在 Swift 中实现这一点的人。看看这个： [https ://github.com/aeieli/swiftQRCode](https://github.com/aeieli/swiftQRCode)

需要更改一些语法错误，否则完全可以在 iOS 8.1 上运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-05T04:36:22.140

[用苹果本地实现的二维码](https://github.com/JxbSir/JxbScanQR)检查一下

# mysql - 基于列中时间戳的交集将一个 MySQL 表的信息附加到另一个表

> ID：15320641
> 
> 赞同：2
> 
> 时间：2013-03-10T09:10:32.127
> 
> 标签：mysql, sql, sqlite, timestamp

我正在使用 MySQL 存储某些事件，其中包含有关谁完成了此事件以及某个事件发生时的时间戳的信息。我目前将这些信息存储在两个表中，“Cycles”和“Movement_Load”。

现在我想将“Movement_Load”中包含的信息附加到“Cycles”表中。此操作的好处是我将所有相关信息存储在一个表中。

表周期：

```
(1, '00:50:c2:63:10:1a',  1351508100,    1351508200, 'center', 0, 0); 
```

表运动_负载：

```
(1, 'move_sensor1',  1351508090,     'movement start'), 
(2, 'move_sensor1',  1351508120,     'movement end'),   -- 20 not 30, because it starts at 1351508100 
(3, 'move_sensor1',  1351508140,     'movement start'), 
(4, 'move_sensor1',  1351508170,     'movement end'),   -- 30 
(5, 'move_sensor1',  1351508190,     'movement start'),   
(6, 'move_sensor1',  1351508210,     'movement end'),   -- 10 not 20, because it ends at 1351508200
                                                        -- movement sum is 60
(7,'load_sensor1',  1351508130,     'load start'), 
(8,'load_sensor1',  1351508180,     'load end'), -- 50 
(9,'load_sensor1',  1351508185,     'load start'), 
(10,'load_sensor1', 1351508220,     'load end')  -- 15 not 35, because it ends at 1351508200
                                                  -- load sum is 65 
```

结果应如下所示，运动 (60) 和负载 (65) 现在存储在此表中：

```
(1, '00:50:c2:63:10:1a',  1351508100,    1351508200, 'center', 60, 65 ) 
```

要解决这个问题，请看我准备的小提琴：[http ://sqlfiddle.com/#!2/b1113](http://sqlfiddle.com/#!2/b1113)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:02:13.763

```
UPDATE Cycles
SET movement_time =
    (SELECT IFNULL(SUM(CASE event
                       WHEN 'movement start' THEN -timestamp
                       WHEN 'movement end'   THEN timestamp
                       ELSE                       0
                       END), 0)
            + CASE (SELECT event
                    FROM Movement_load
                    WHERE timestamp BETWEEN Cycles.startTimestamp
                                        AND Cycles.endTimestamp
                      AND event LIKE 'movement %'
                    ORDER BY timestamp
                    LIMIT 1)
              WHEN 'movement end' THEN -Cycles.startTimestamp
              ELSE                     0
              END
            + CASE (SELECT event
                    FROM Movement_load
                    WHERE timestamp BETWEEN Cycles.startTimestamp
                                        AND Cycles.endTimestamp
                      AND event LIKE 'movement %'
                    ORDER BY timestamp DESC
                    LIMIT 1)
              WHEN 'movement start' THEN Cycles.endTimestamp
              ELSE                       0
              END
     FROM Movement_Load
     WHERE timestamp BETWEEN Cycles.startTimestamp
                         AND Cycles.endTimestamp) 
```

（类似的`load`）

# php - 显示来自不同表的两个用户的名称

> ID：15320646
> 
> 赞同：1
> 
> 时间：2013-03-10T09:11:25.433
> 
> 标签：php, mysql, sql

保持清洁和重点：

我有两个 MySQL 表，用户（id、nick）和禁令（id、banned、bannedBy、长度）。我想在表格中显示禁令列表，但我不想显示被禁止的 ID 和被禁止的 ID，而是显示他们的昵称。我可以使用 JOIN 来获得其中一个的昵称，如下所示：

```
SELECT bans.id,bans.banned,bans.bannedBy,bans.length,users.nick
FROM bans
JOIN users ON users.id=bans.banned 
```

但是我不能得到bannerBy的昵称，反之亦然。

我希望我很清楚，在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:13:42.890

您必须在不同的键上加入`users`两次表。

```
SELECT
    bans.id,
    bans.banned,
    bans.bannedBy,
    bans.length,
    u.nick as 'banedNick',
    u2.nick as 'bannedByNick'
FROM
    bans
JOIN 
    users u ON users.id = bans.banned
JOIN
    users u2 ON users.id = bans.bannedBy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:14:24.030

您可以使用两个连接：

```
SELECT bans.id,bans.banned,b.nick as bannedBy,bans.length,u.nick
FROM bans
JOIN users u ON u.users.id=bans.banned
JOIN users b ON b.users.id=bans.bannedBy 
```

# javascript - Jscript open.window

> ID：15320647
> 
> 赞同：0
> 
> 时间：2013-03-10T09:11:27.323
> 
> 标签：javascript

```
function OpenPopup()
{
    window.open('myUpload.aspx', '', 'width=200,height=100');
} 
```

`Permission denied`当我运行上述代码时，我收到 Microsoft JScript 运行时错误： 。我正在使用 IE9 和 VisualStudio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:18:06.957

代码中的 Url 参数应该是您的网站/应用程序的完全限定 URL。

像这样 ：

```
function OpenPopup()
{
    window.open('http://yourwebsite.com/myUpload.aspx', '', 'width=200,height=100');
} 
```

如果您在本地机器上进行调试，您可以将“ [http://yourwebsite.com/](http://yourwebsite.com/) ”更改为您的本地主机运行实例 URL 以及端口号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:13:33.700

尝试使用这个：

```
function OpenPopup(formname)
{
    window.open('http://localhost/myUpload.aspx', '', 'width=200,height=100');
} 
```

将第一个参数从更改`window.open`为您的网址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:37:49.260

可能您已启用弹出窗口阻止程序。

# javascript - 是否可以在外部 JS 文件中使用 Mojolicious 标签助手？

> ID：15320651
> 
> 赞同：4
> 
> 时间：2013-03-10T09:11:44.100
> 
> 标签：javascript, jquery, perl, mojolicious, mojo

我目前正在清理我用 Mojolicious 编写的一个小网络应用程序。作为清理工作的一部分，我将我的 javascript 从我的 html.ep 文件中分离到公共目录中。

我遇到的问题是我似乎无法再引用标签助手，例如“url_for”，甚至无法引用存储中的值，例如“<% $stashvalue %>”。

任何关于如何或是否可以做到这一点的想法都非常感谢。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T16:50:19.557

目录中的内容`public`是静态服务的，最好由您的网络服务器提供，而不是由`Mojolicious`或 Plack 提供，因此该文件不会被 处理`Mojolicious`，因此`<% $stashvalue %>`没有任何意义。

一种解决方案是将需要访问服务器端变量的 javascript 部分嵌入到 mojo 模板中——相当丑陋，但要编写的代码更少。

另一种方法是在加载时从您的 javascript 文件中进行 ajax 调用，并获取服务器发送的值 - 更优雅，但要编写更多代码。

我能想到的另一个方法是将这些 javascript 文件移动到一个由其处理的文件夹下，`Mojolicious`并将它们参数化 - 在`html.ep`需要该 js 文件的文件中，执行以下操作：

```
<script type="text/javascript" src="http://example.com/url/served/by/mojo/?param1=<% $stashvalue %>&param2=<% $stashvalue2 %>"></script> 
```

并且，在响应的控制器中`/url/served/by/mojo/`，渲染该 js 文件，并将参数替换为查询中的参数。作为替代方案，您也可以在`session`

通常在 Perl 中，有不止一种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T22:34:10.310

我通常做的是将我的大部分 javascript 封装在纯 javascript 文件中的函数调用或对象中。然后在我的模板中包含那些纯 javascript 文件并使用我在模板中构建的这些文件中的 api，将服务器端变量插入到函数的参数中。您可以仔细阅读[Galileo](https://github.com/jberger/Galileo)的代码以查看几个示例。

例如，看看[这个模板](https://github.com/jberger/Galileo/blob/master/lib/Galileo/files/templates/page/edit.html.ep)如何将存储值传递给[这个纯 javascript 文件](https://github.com/jberger/Galileo/blob/master/lib/Galileo/files/public/galileo-edit.js)的功能。

# django - Django Feed 设置要在 URL 参数中返回的项目数

> ID：15320655
> 
> 赞同：1
> 
> 时间：2013-03-10T09:12:39.333
> 
> 标签：django, feed

我正在使用 Django 1.4 Feed 类为我的数据库条目返回 RSS 提要。我想让用户指定要在 URL 中返回的提要数量，我尝试了一些方法，但由于某种原因它不起作用。这是我到目前为止所拥有的：

网址.py

```
urlpatterns = patterns('',
    url(r'^latest/feed/(?P<count>[0-9]+)/$',LatestPostsFeed(),name="feed"),
) 
```

提要.py

```
from django.contrib.syndication.views import Feed
from django.core.urlresolvers import reverse
from blog.models import Post
from django.utils import text, html

class LatestPostsFeed(Feed):
    title="Latest Posts"
    link="feeds"
    description="Latest posts"

    def items(self,count):
        print count
        return Post.objects.order_by('-created')[:count]

    def item_title(self,item):
        return item.title

    def item_description(self,item):
        return text.truncate_html_words(item.content,50)

    def item_link(self,item):
        return item.get_absolute_url() 
```

当我尝试通过 print 获取 count 的值时，它在服务器上返回 None 。我应该在哪里添加我的 count 参数，以便它的值被类识别？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:35:46.793

它看起来像`get_object`需要你需要的 kwargs，并且应该返回一个描述提要的对象。在您的情况下，您只需要计数：

```
def get_object(self, request, *args, **kwargs):
    return int(kwargs['count']) 
```

然后你的`items`方法就会奏效。

# c++ - 如何在 C++ 中将 int 类型更改为 double

> ID：15320657
> 
> 赞同：0
> 
> 时间：2013-03-10T09:13:07.280
> 
> 标签：c++, types, numbers, primitive-types

有什么方法可以将变量初始化为通用数字类型或 int 然后将其类型更改为例如 double ？

```
TYPE x = 4;
// commands changing its type
here it(variable x) became double. 
```

我知道这很奇怪。

变量必须具有相同的名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T09:16:35.370

不，C++ 是一种静态类型的语言。声明变量时，类型是固定的。

您可以使用工会做您所描述的事情，但需要非常小心，例如

```
union DoubleInt
{
  int i;
  double d;
};

DoubleInt X;
X.i = 4;

// ... whatever

X.d = X.i;
X.d += 0.25; 
```

但工会真的只是一个明智的选择，你不顾一切地打包。您还可以创建一个可以表现为 double 或 int 的类，但实际上，您所说的听起来不像是在以 C++ 方式思考。

最后，[boost::variant](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)可能会做你想做的事？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:09:12.983

虽然无法更改变量的类型，但您可以定义能够表示各种类型的变量的*类型*。这通常称为*变体*。去获取[Boost.Variant](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)，它允许你编写如下代码：

```
boost::variant<int, double> t_either_int_or_double;

t_either_int_or_double = 1;

// now it is "int"
assert(boost::get<int>(t_either_int_or_double);

t_either_int_or_double = 1.0;

// now it is "double"
assert(boost::get<double>(t_either_int_or_double); 
```

# android - 弹出窗口：ShowAsDropDown 作为右上角而不是左下角？

> ID：15320662
> 
> 赞同：4
> 
> 时间：2013-03-10T09:14:05.747
> 
> 标签：android, popupwindow

是否可以使用`showAsDropDown`并`PopupWindows`使其在右上角滑动打开？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T09:16:34.727

是的，这是可能的。你可以试试这个

```
mWindow.showAtLocation(mRootView, Gravity.TOP|Gravity.RIGHT, 0, distanceFromTop); 
```

# html - 在 HTML5 画布中移动、删除和检索添加的矩形位置

> ID：15320663
> 
> 赞同：1
> 
> 时间：2013-03-10T09:14:13.123
> 
> 标签：html, canvas

我在下面有这个代码来向画布添加一个矩形，我对此有一些疑问。

*   创建后是否可以移动添加的矩形？
*   是否可以删除已添加的矩形？
*   在我添加了一堆矩形之后，我可以通过单击一个按钮来检索所有添加的矩形位置（x、y、宽度和高度）吗？

    ```
     <script>
      function rect()
      {
      var canvas = document.getElementById('drawing'),
      ctx = canvas.getContext('2d'),
      rect = {},
      drag = false;
      function init() {
      canvas.addEventListener('mousedown', mouseDown, false);
      canvas.addEventListener('mouseup', mouseUp, false);
      canvas.addEventListener('mousemove', mouseMove, false);
      }
      function mouseDown(e) {
      rect.startX = e.pageX - this.offsetLeft;
      rect.startY = e.pageY - this.offsetTop;
      drag = true;
      }
      function mouseUp() {
      drag = false;
      }
      function mouseMove(e) {
      if (drag) {
      rect.w = (e.pageX - this.offsetLeft) - rect.startX;
      rect.h = (e.pageY - this.offsetTop) - rect.startY ;
      //ctx.clearRect(0,0,canvas.width,canvas.height);
      draw();
      }
      }
      function draw() {
      ctx.globalAlpha=0.5; // Half opacity
      ctx.fillStyle= "#b0c2f7";
      //ctx.fillStyle = "rgba(255, 255, 255, 0.05)";
      ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
      }
      init();
      }
      </script>

    <div id="canvasDiv">
      <canvas id="drawing" width="580px" height="788px" style="border:2px solid #000; background: #FFF;"></canvas>
      </div>
      <script>
      var canvas = document.getElementById('drawing');
      var context = canvas.getContext('2d');
      var imageObj = new Image();

     imageObj.onload = function() {
      context.drawImage(imageObj, 69, 50);
      };
      imageObj.src = 'http://localhost/test/Images/DSC0273446.jpg';
      </script>

    <div id="rect"> 
      <p><button onclick="rect();">Rectangle</button></p>
      </div> 
    ```

    非常感谢我在这件事上能得到的所有帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:21:49.367

> 创建后是否可以移动添加的矩形？

不，一旦绘制它只是像素，在`canvas`. “移动”一个形状的常用方法是移动`canvas`到`clearRect()`（或整个`canvas`），然后`fillRect()`在[`requestAnimationFrame`受控](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)循环中稍微不同的位置。

> 是否可以删除已添加的矩形？

只要您存储了绘制它的位置，您就可以[`clearRect()`](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Drawing_shapes). 请注意，这会清除像素区域，而不是对象 - 先前绘制操作的结果不会自动重新出现。

> 在我添加了一堆矩形之后，我可以通过单击一个按钮来检索所有添加的矩形位置（x、y、宽度和高度）吗？

不`canvas`，不存储绘制的对象，只存储像素图像数据。如果要跟踪已绘制的对象，则必须自己进行。如果你想操作形状而不是像素，那么有像[fabric.js](http://fabricjs.com/)这样的库，它在上面添加了一个对象操作层`canvas`，或者你可以使用[一个`svg`元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-map-element.html#svg-0)来代替它，让你用[普通的 DOM 方法](https://stackoverflow.com/a/5210940/8655)[创建图形](http://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html)。

# git - 无法“取消跟踪”文件（忽略对跟踪文件的进一步更改）

> ID：15320664
> 
> 赞同：1
> 
> 时间：2013-03-10T09:14:16.553
> 
> 标签：git, gitignore

我有一个关于 git 的问题。最近我犯了一个错误，并使用 git add -f path/to/folder 在我的 repo 中添加了一个目录。现在我非常努力地忽略这个文件夹，但没有任何效果。到目前为止，我做到了：

```
git update-index --assume-unchanged path/to/folder 
```

上面的命令完成了这项工作，但是一旦我使用 chmod -R 777 授予该文件夹的权限，更改就会再次出现在 git status 中：

```
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   app/tmp/cache/models/myapp_cake_model_default_contractsign_attachments
#   modified:   app/tmp/cache/models/myapp_cake_model_default_contractsign_list
#   modified:   app/tmp/cache/models/myapp_cake_model_default_contractsign_signatures
#   modified:   app/tmp/cache/models/myapp_cake_model_default_contractsign_users
#   modified:   app/tmp/cache/persistent/myapp_cake_core_cake_dev_eng
#   modified:   app/tmp/cache/persistent/myapp_cake_core_cake_dev_fre
#   modified:   app/tmp/cache/persistent/myapp_cake_core_cake_dev_spa
#   modified:   app/tmp/cache/persistent/myapp_cake_core_cake_eng
#   modified:   app/tmp/cache/persistent/myapp_cake_core_cake_fre
#   modified:   app/tmp/cache/persistent/myapp_cake_core_cake_spa
#   modified:   app/tmp/cache/persistent/myapp_cake_core_default_eng
#   modified:   app/tmp/cache/persistent/myapp_cake_core_default_fre
#   modified:   app/tmp/cache/persistent/myapp_cake_core_default_spa
#   modified:   app/tmp/cache/persistent/myapp_cake_core_file_map
#   modified:   app/tmp/cache/persistent/myapp_cake_core_method_cache
#   modified:   app/tmp/logs/error.log
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

编辑：也许我之前有点不清楚。所以基本上对于我的项目，我希望添加它们文件夹的当前内容`tmp/`，但 git 不再跟踪更改。所以我这样做了：

```
$ git update-index --assume-unchanged app/tmp/
Ignoring path app/tmp/ 
```

但是现在，为了让我的应用程序再次运行，我需要为文件夹中的文件提供写权限，所以我做了：

```
sudo chmod -R 777 app/tmp/ 
```

但是一旦我这样做了，我就会在**Changes not staged for commit:**下看到你可以在上面看到的日志。我不希望跟踪这些更改，只是忽略。

仅供参考，这是我的 gitignore 中的内容：

```
/app/tmp/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:28:19.687

你似乎把不同的东西混合在一起，因为你不知道它们做什么。

将文件标记为“假定未更改”将忽略对跟踪文件的进一步更改——这不是你所说的你想要的。*（注意：问题最初是说 OP 想要取消跟踪文件）*

使用`git rm --cached`只从索引（暂存区）中删除一个文件，但不会告诉 Git 从现在开始忽略它的任何事情，所以你走在了正确的轨道上，但你并没有一路走好。

删除文件后（它现在再次未跟踪，但 Git 总是会告诉您未跟踪的内容），您必须在 Git 中的一个忽略文件中另外添加一个条目；那么它将不会在状态消息中再次显示它。

为此，请将此条目附加到存储`.gitignore`库根目录中的文件（如果该文件尚不存在，则创建该文件）：

```
/full/path/to/my_file_name 
```

当然，不要直接使用它，而是使用实际路径。请注意，在这种情况下，前导斜杠不是指“文件系统根”，而是“repo 的根”。

* * *

**编辑：**提供更多信息后，您的问题就更清楚了。您实际上并不想*取消跟踪*某些文件（即从版本控制中删除它们），而只是忽略对它们的*进一步*更改。

为此，“assume-unchanged”确实是正确的做法，但**假设-unchanged 不能递归地在目录上工作**。这意味着您必须在要忽略其更改的每个文件上显式设置它。您可以在单个命令中执行此操作：

```
git update-index --assume-unchanged -- file1 file2 file3 ... 
```

如果有很多文件，则可以编写脚本，但是由于您似乎只有大约 15 个文件，因此制作脚本（文件位于不同的目录中）比您将路径复制粘贴到一个命令。

# python - 加入元组元素 - 列表理解

> ID：15320665
> 
> 赞同：0
> 
> 时间：2013-03-10T09:14:21.640
> 
> 标签：python, python-2.7

我们有这个：

```
lst = [('543', 'Tom', '- Jerry'), ('544', 'X-man - ', 'Hulk')]`
lst = [h+a for n,h,a in lst]
lst =[name.split(' - ') for name in lst] 
```

我想首先，将每个元组中的元素`[1]`和`[2]`元素连接在一起，然后在`-`拆分代码上将它们拆分，但加入它们的列表理解不起作用。

我们希望最终输出为：

`[('534', 'Tom, 'Jerry'), ('544', 'X-man', 'Hulk')]`

使用上面的代码，我们只得到：

`[('Tom, 'Jerry'), ('X-man', 'Hulk')]`

**@编辑**

我还有另一个问题：有时我的元组仅包含 2 个这样的项目（第二个元组）： `[('534', 'Tom, 'Jerry'), ('544', 'X-man - Hulk')]` 我想通过下面的列表理解摆脱`-`so 我想出了这个修改后的版本： `lst = [tuple(i.split(' - ') if len(tup) == 2 else tuple(i.strip(' - ') for i in tup) for tup in lst]`但是会引发`invalid syntax`异常。

我很抱歉大家再次询问类似的问题，但列表理解对我来说是一个相当新的概念，但如果我在上面做对了，我将完成我的程序，所以我太不耐烦了，现在无法研究关于该主题的整个文档.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:21:25.263

也许我错了，但你真的只想去掉空格和'-'吗？

```
In [15]: lst = [('543', 'Tom', '- Jerry'), ('544', 'X-man - ', 'Hulk')]

In [16]: [tuple(i.strip(' -') for i in tup) for tup in lst]
Out[16]: [('543', 'Tom', 'Jerry'), ('544', 'X-man', 'Hulk')] 
```

# asp.net - 匿名身份验证显示弹出窗口？

> ID：15320667
> 
> 赞同：0
> 
> 时间：2013-03-10T09:14:25.587
> 
> 标签：asp.net, firefox, authentication, anonymous

如果您使用 Firefox[访问此网站](http://mosab2a.elkedeseen.org)，您将看到如下弹出窗口：

![在此处输入图像描述](../Images/3695c83ba9c8765dd190338ae93d17de.png)

如果您使用谷歌浏览器访问该网站，您将看不到任何弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:22:22.660

您似乎包含了一些受以下保护的脚本`Basic Authentication`：

```
<script src="WebServices/LoginService.asmx/jsdebug" 
        type="text/javascript">
</script> 
```

Chrome 似乎忽略了它的 Authorization 标头，但 FireFox 显示了这个登录弹出窗口。

# ruby - Ruby on Rails - 集成测试 - 未定义的方法“get”

> ID：15320668
> 
> 赞同：0
> 
> 时间：2013-03-10T09:14:45.247
> 
> 标签：ruby, ruby-on-rails-3, methods, integration-testing, undefined

我使用的是 Rails 版本 3.2.12，但我的集成测试存在一些问题（单元和功能测试运行良好）。

我使用以下命令创建集成测试：

```
rails generate integration_test user_stories 
```

然后我填充了“user_stories_test.rb”文件，如下所示：

```
require 'test_helper'

class UserStoriesTest < ActionDispatch::IntegrationTest

  LineItem.delete_all
  Order.delete_all
  ruby_book = product(:ruby)

  get "/"
  assert_response :success
  assert_template "index"

  xml_http_request :post, '/line_items', product_id: ruby_book.id
  assert_response :success
  cart = Cart.find(session[:cart_id])
  assert_equal 1, cart.line_items.size
  assert_equal ruby_book, cart.line_items[0].product

  get "/orders/new"
  assert_response :success
  assert_template "new"

  post_via_redirect "/orders",
                    order: { name: "Dave Thomas",
                             address: "123 The Street",
                             email: "dave@example.com",
                             pay_type: "Check" }
  assert_response :success
  assert_template "index"
  cart = Cart.find(session[:cart_id])
  assert_equal 0, cart.line_items.size

  orders = Order.all
  assert_equal 1, orders.size
  order = orders[0]
  assert_equal "Dave Thomas", order.name
  assert_equal "123 The Street", order.address
  assert_equal "dave@example.com", order.email
  assert_equal "Check", order.pay_type
  assert_equal 1, order.line_items.size
  line_item = order.line_items[0]
  assert_equal ruby_book, line_item.product

  mail = ActionMailer::Base.deliveries.last
  assert_equal ["dave@example.com"], mail.to
  assert_equal 'Sam Ruby <depot@example.com>', mail[:from].value
  assert_equal "Pragmatic Store Order Confirmation", mail.subject

end 
```

这就是我的“test_helber.rb”文件的样子：

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'

class ActiveSupport::TestCase
  fixtures :all
end 
```

首先，我的固定装置没有加载，在我无法按照[这些](https://github.com/rails/rails/issues/4971)说明修复此问题后，我已经结束手动创建测试数据，如下所示：

```
 #ruby_book = product(:ruby)

  ruby_book = Product.new
  ruby_book.title = 'Programming Ruby 2.0'
  ruby_book.price =  49.50
  ruby_book.image_url = 'ruby.png'
  ruby_book.description = 'description'
  ruby_book.save! 
```

这解决了夹具加载的问题，现在我的“get”方法出现“方法未定义”错误。更重要的是，在我评论了所有“get”方法之后，我在下一个方法 - “xml_http_request”上遇到了同样的错误。

我做错了什么？为什么 rails 找不到这些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:20:08.060

运行此代码时，您不在测试的上下文中。

Test::Unit 案例的格式如下：

```
require 'test_helper'

class UserStoriesTest < ActionDispatch::IntegrationTest
  def test_it_works_as_it_should  # <-- this is the part you're missing!
    # Your test code goes here
  end
end 
```

仅将测试代码放在一个类中并不能完成 Test::Unit 期望测试正确运行的所有正确设置。

有关在 Rails 中进行测试的更多信息：http: [//guides.rubyonrails.org/testing.html#integration-testing](http://guides.rubyonrails.org/testing.html#integration-testing)

# java - WAS 7.0.0.0 上的 ClassLoader 问题 - DocumentBuilderFactoryImpl

> ID：15320669
> 
> 赞同：4
> 
> 时间：2013-03-10T09:14:48.663
> 
> 标签：java, websphere, classloader, classcastexception, apache-cocoon

我正在使用一个用 cocoon 框架 (Java) 编写并在 WAS 7.0.0.0 上运行的 Web 应用程序。在 WAS 6.XXX 上运行时，一切正常。

但是，在运行时的 WAS 7 上，我收到以下错误：

`java.lang.ClassCastException org.apache.xerces.jaxp.DocumentBuilderFactoryImpl incompatible with javax.xml.parsers.DocumentBuilderFactory at javax.xml.parsers.DocumentBuilderFactory.newInstance`

我们怀疑这是一个 ClassLoader 问题。

我已经尝试了很多步骤来克服这个问题：

1.  我试图在 WAS 管理控制台中添加一个新的自定义属性：

    应用程序服务器 -> 服务器名称 -> 进程定义 -> Java 虚拟机 -> 自定义属性

    *   名称 = javax.xml.parsers.DocumentBuilderFactory
    *   值 = org.apache.xerces.jaxp.DocumentBuilderFactoryImpl

    但这并没有解决问题！

2.  我尝试在 WAS 管理控制台中更改 WAS 管理控制台中的 WAS 类加载器顺序，在父级优先和父级最后 - 这两个选项都没有解决问题。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:15:58.473

因为 was7 必须内置这些罐子。您需要从您的耳朵/战争中删除这些罐子，然后部署。相同 jar 的多个副本存在冲突。

问候，

# mongodb - Mongodb：$pull 运算符未从数组中删除给定值

> ID：15320670
> 
> 赞同：0
> 
> 时间：2013-03-10T09:15:02.387
> 
> 标签：mongodb, database

# 编辑：

文件结构：

```
{"tags" : ["a"], "name" : "a", "creator" : "Nick here", "users" : [ "Nick here"], "connected" : 1, "ra" : 0.3967885102611035, "_id" : ObjectId("513c3e42071a103c09000003")} 
```

* * *

我对 MongoDB $pull 运算符有疑问。它不会从数组中删除值。这是我的查询：

```
db.rooms.update({users: ["Nick here"]},{$pull: {users: ["Nick here"]}}) 
```

用户字段如下所示：

(...) `,"users" : [ "Nick here" ],`(...)

* * *

如果我这样写：

`db.rooms.update({users: "Nick here"},{$pull: {users: ["Nick here"]}})`

或者

`db.rooms.update({users: "Nick here"},{$pull: {users: "Nick here"}})`

返回一个错误：

> 无法将 $pull/$pullAll 修饰符应用于非数组

* * *

这些查询有什么问题？当“用户”字段为空时，我想拉/推用户的昵称并删除文档。

提前致谢， 米哈乌

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:19:40.993

我写了测试...检查你的语法。询问：

```
db.rooms.update({'users': 'Nick here'}, {$pull: {'users': 'Nick here'}}) 
```

可能在您的查询中需要用到`{ multi: true }`。例如：

```
db.rooms.update({'users': 'Nick here'}, {$pull: {'users': 'Nick here'}}, { multi: true }) 
```

完整日志：

```
MongoDB shell version: 2.2.3
connecting to: so
> db.rooms.insert({"tags" : ["a"], "name" : "a", "creator" : "Nick here", "users" : [ "Nick here"], "connected" : 1, "ra" : 0.3967885102611035, "_id" : ObjectId("513c3e42071a103c09000003")} )
> db.rooms.findOne()
{
    "_id" : ObjectId("513c3e42071a103c09000003"),
    "tags" : [
        "a"
    ],
    "name" : "a",
    "creator" : "Nick here",
    "users" : [
        "Nick here"
    ],
    "connected" : 1,
    "ra" : 0.3967885102611035
}
> db.rooms.update({'users': 'Nick here'}, {$pull: {'users': 'Nick here'}})
> db.rooms.findOne()
{
    "_id" : ObjectId("513c3e42071a103c09000003"),
    "connected" : 1,
    "creator" : "Nick here",
    "name" : "a",
    "ra" : 0.3967885102611035,
    "tags" : [
        "a"
    ],
    "users" : [ ]
}
> 
```

# javascript - 在 javascript、html 或 asp 用户控件中使用变量创建字符串

> ID：15320673
> 
> 赞同：0
> 
> 时间：2013-03-10T09:15:32.417
> 
> 标签：javascript, asp.net, html

每当我必须创建一些需要在其中包含一些变量的 html 时，我通常会花很多时间卡住，然后通过点击和试用得到一些可行的解决方案。但我相信，我不了解背后的实际技术，因为我以某种方式得到了解决方案并且不小心离开了。有人可以指导这样做的技术理解。这是我以某种方式创建并且也在工作的字符串之一（在 ascx 控制 ascx 的 asp.net 中创建）：

*   创建锚标记：

    ```
    <a style='<%# "background-image: url(&#39;" + Eval("url") + "&#39;)&#59;" %>' id="ancrTag" href='<%# Eval("link") %>' runat="server"><%# Eval("name") %></a> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:52:48.097

你真的不需要这样做。asp.net 的美妙之处在于您可以从后面的代码中设置这些东西。

说

```
<asp:Hyperlink runat="server" id="hy1" /> 
```

* * *

```
hy1.Text = "Click me";
hy1.NavigateUrl = "www.google.com"; 
```

你明白了。

[http://asp.net-tutorials.com/basics/code-behind/](http://asp.net-tutorials.com/basics/code-behind/)

# java - 封装：字段不可见？

> ID：15320674
> 
> 赞同：0
> 
> 时间：2013-03-10T09:15:57.477
> 
> 标签：java

我对 Java 很陌生。我写了一个小程序来了解封装和访问方法。代码是：

```
package practise;

public class EncapTest {

    private String name;
    String surname;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

```
package practise;

public class RunEncap {

    public static void main(String[] args) {

        EncapTest encapObj = new EncapTest();

        encapObj.setName("Prabh");
        encapObj.surname = "Rana";

        System.out.println("Name :" + encapObj.getName());
        System.out.println("Surname :" + encapObj.surname);
    }

} 
```

* * *

现在，如果我创建另一个包“practice2”并使用导入并尝试创建“EncapTest”的对象，我可以访问变量名称，但是当我尝试访问姓氏时，它显示字段姓氏不可见的错误..

```
package practise2;

import practise.EncapTest;

public class Runencap2 {

    public static void main(String[] args) {

        EncapTest encapObj = new EncapTest();

        encapObj.setName("Prabh");
        encapObj.surname = "Rana";     // <<<<getting error here

        System.out.println("Name :" + encapObj.getName());
        System.out.println("Surname :" + encapObj.surname);        
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:18:23.530

您的`surname`字段具有默认（包私有）访问级别，这意味着该字段仅对在同一包中声明的类可见。

```
String surname; // access level implicitly sets to package-private 
```

Java中有四种访问级别：

*   上市
*   受保护
*   包私有（无显式修饰符）
*   私人的

如果您的类成员没有显式修饰符 - 它会自动设置为包私有。它在官方教程中有完整的[描述。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:57:13.223

我建议阅读/理解 java 中的访问说明符（公共、私有、受保护和默认）。理解这些概念本身就会回答你的问题。

在上面的示例中，您已声明具有默认访问权限的实例变量“surname”（如果未指定为公共、私有或受保护，则使用隐式访问说明符）。默认访问仅允许您使变量/方法只能在同一个包中访问。因此，您可以在“RunEncap”类中访问它，但不能在“Runencap2”中访问，因为该变量对其他包不可见。此外，作为一种良好的编程习惯，建议将变量声明为私有并编写 getter/setter 方法来访问它们。

这是一个示例链接，您可以参考了解访问说明符 - [http://www.aoiblog.com/java-access-specifier/](http://www.aoiblog.com/java-access-specifier/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T09:22:20.660

这是因为你的两个类在不同的包中。从[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)中：

> 可以使用修饰符 public 声明一个类，在这种情况下，该类对任何地方的所有类都是可见的。如果一个类没有修饰符（默认值，也称为包私有），则它仅*在其自己的包*中可见（包被命名为相关类的组 - 您将在后面的课程中了解它们。）
> 
> 在成员级别，您也可以像顶级类一样使用公共修饰符或无修饰符（包私有），并且具有相同的含义。对于成员，还有两个额外的访问修饰符：private 和 protected。private 修饰符指定该成员只能在其自己的类中访问。protected 修饰符指定该成员只能在其自己的包中访问（与 package-private 一样），此外，它的类在另一个包中的子类也可以访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:39:58.570

来自 vmoksha 的 Sunilkumar

请进行更深入的导航它将起作用为类创建对象并再次为对象创建的类创建setter/getter

# java - 如何从 URL 对象获取文件路径

> ID：15320675
> 
> 赞同：0
> 
> 时间：2013-03-10T09:15:58.513
> 
> 标签：java, file-io

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer;
    try {
        transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        URL url = getClass().getResource("CustomerDedupeRules.xml");
        StreamResult result = new StreamResult(new File(url.getPath()));
        transformer.transform(source, result);
    } catch (Exception e) {
        logger.error(e);
    } 
```

我正在尝试更新我的类文件夹中存在的 xml 文件。但是如果我使用 url.getPath() 或 url.getFile()，我会收到文件未找到异常。如果我硬编码文件路径而不是使用 URL 对象，则代码工作正常。请告诉我我的方法有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:39:51.327

我认为您无法从类路径资源中获取文件。因为类路径资源通常打包在 JAR 文件中。恕我直言，更新当前正在使用的 JAR 文件是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:42:46.820

这个文件在哪里？如果它在 jar 中，您应该使用[openStream()](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openStream%28%29)方法来访问内容。如果它不在 jar 中，则使用[getAbsolutePath()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getAbsolutePath%28%29)打印文件的绝对路径并验证它是否存在。

# java - 仪表化导致常量池损坏

> ID：15320676
> 
> 赞同：2
> 
> 时间：2013-03-10T09:16:09.667
> 
> 标签：java, instrumentation

我有一个方法 A.passLong(Long) 接收 long 作为参数。我检测类 B，并添加对该方法的调用，并传递一个长常量。

当我调试调用的方法 A.passLong(Long) 时，我看到该方法接收到的数字不是我作为参数传递的数字。

我使用“javap -verbose”来反编译带有检测代码的类的转储，看起来从常量池中读取的数字（我在调试器中看到的数字）是预期数字和以下数字的串联在常量池中。

这不是 JIT 问题，因为它会在调试和禁用 JIT 时重现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:23:18.367

这看起来像是 Sun Java1.5_04 中的一个[已知问题](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6394084)。此后，他们添加了一些代码来保护类中的反射（和常量池），同时重新定义它们。请参阅[发行说明](http://www.oracle.com/technetwork/java/javase/releasenotes-142123.html)。我知道 Sun 的 1.5_12 运行良好。

那么，您使用的是哪个 JVM？

# java - 将数组转换为更小的数组

> ID：15320677
> 
> 赞同：1
> 
> 时间：2013-03-10T09:16:26.753
> 
> 标签：java, arrays

我从存储在字节数组中的相机获取图像。我将此字节数组传递给本机函数。

问题：图像包含本机函数不关心的颜色信息。黑/白信息位于数组的前半部分。

所以基本上我想做的是：

```
byte[1000] image;
nativecall((byte[500])image); 
```

这背后的原因是对 jni 函数的调用意味着我的图像的内存副本。如果我只通过图像的相关部分，我可以使用 30 fps 节省一些时间和内存。

任何解决方案的限制是两个数组必须指向相同的数组/内存。因此，简单地将数组的前半部分创建为较小的数组不是一种选择。

像这样的事情可以用 Wea​​kReference 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:00:54.013

在您的 jni 代码中尝试[GetByteArrayElements 。](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#wp17382)根据 JVM 实现，它要么复制数组，要么在 java 内存中为您提供指向它的直接指针。我只在android上使用它，它确实给了我一个直接的指针，但我不知道它现在是否适用于HotSpot。

如果失败，[nio 直接缓冲区](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#nio_support)是在 java 和 jni 代码之间共享内存而无需复制的另一种方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T09:46:49.243

您似乎甚至没有考虑过明显的答案，即将长度和数组传递给本机方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:42:04.573

与其将获得的图像存储在 byte[1000] 数组中，不如从一开始就将其存储在 2 byte[500] 数组中，然后只需将您感兴趣的图像传递给您的本机函数即可。

您可以制作一个辅助类，例如

```
class MyImage {
    public byte[500] grayInfo;
    public byte[500] colorInfo;
} 
```

由于数组长度不是类型的一部分，因此在这里强制转换无济于事。

# ios - 主体前的 UITableViewCell（分组）子视图

> ID：15320682
> 
> 赞同：0
> 
> 时间：2013-03-10T09:16:59.120
> 
> 标签：ios, uitableview, uiimageview

我正在设计一个 UITableView （分组），图像在最左边。我的问题是分组表视图具有圆形外边框，并且图像与这一轮重叠。

看看这里：[http ://cl.ly/image/3q2t150g1s2z](http://cl.ly/image/3q2t150g1s2z)

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:31:58.077

`UIImageView`您可以通过其 layer 属性来圆角。

```
#import <QuartzCore/QuartzCore.h>

UIImageView *image = [[UIImageView alloc] initWithImage: [UIImage imageNamed:@"something.jpg"]];
image.layer.cornerRadius = 10.0; 
```

您可以使用角半径值来匹配分组表视图的角。当然，这将使图像的所有 4 个角都变圆。我从来不需要只选择角落，但如果你有需要，[这个问题可能会有所帮助](https://stackoverflow.com/questions/4847163/round-two-corners-in-uiview)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:32:19.963

1.简单的方法是将图像框架更改为圆角

2.或将单元格的图层更改为矩形角，然后将图层添加到单元格，这可能需要更多操作。

你可以试试这个： cell.layer.cornerRadius="你想要的形状"

确保在您的应用中使用框架

# java - 如何使我的 TextView 宽度为其父级的一半？

> ID：15320683
> 
> 赞同：11
> 
> 时间：2013-03-10T09:17:00.653
> 
> 标签：java, android, xml, user-interface, textview

如果我想让我的 TextView 宽度完全等于其父级的宽度，我可以使用

```
android:layout_width="fill_parent" 
```

如果我想让它成为零件宽度的一半怎么办？或者，一般来说，设置相对于父宽度的宽度？

**编辑：**我正在使用相对布局

我的屏幕是这样的。

![我的屏幕是这样的。](../Images/d457c2eee0545a4a3e1d29d09d9193ad.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T09:42:32.743

快速而肮脏的方式是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:weightSum="2">

        <TextView
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#ff0000"
            />

    </LinearLayout>

</RelativeLayout> 
```

您必须将其包装在另一个容器中，然后仅使用父项重量总和的一半。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-10T09:19:41.413

使用`android:layout_weight="0.5"`它将适用于`linearLayout`

```
<LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:weightSum="1"
                android:gravity="center"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/feedback"
                    android:layout_width="wrap_content"
                    android:layout_weight="0.5"
                    android:textSize="15pt" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-22T14:21:24.693

如果你想使用RelativeLayout，那么最好的方法是在屏幕中央放置一个虚拟视图，并将第一个视图放在虚拟视图的右侧，第二个放在虚拟视图的左侧，如下所示；

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_contentt"
        android:background="#ff0000"
        android:layout_toLeftOf="@id/dummyView/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#ff0000"
         android:layout_toRightOf="@id/dummyView"/>
     <View
        android:id="+@id/dummyView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        android:layout_centerInParent="true"/>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T09:22:11.533

首先不要使用“fill_parent”，它是一个不推荐使用的眼泪，使用“match_parent”。

其次，您想将半父母`TextView`放在父母的哪里？

当您使用 RelativeLayout 时，此操作有点困难，请尝试从代码中执行此操作，如下所示：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
int myWidth = (int) (parentHeight * 0.5);
super.onMeasure(MeasureSpec.makeMeasureSpec(myWidth, MeasureSpec.EXACTLY),  
heightMeasureSpec);
} 
```

参考： [如何根据父级的尺寸调整 Android 视图的大小](https://stackoverflow.com/questions/2159320/how-to-size-an-android-view-based-on-its-parents-dimensions)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T09:23:43.197

您可能需要设置 parent 的 weightSum `LinearLayout`，如下所示：-

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_horizontal"
    android:padding="6dp"
    android:weightSum="2">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:text="@string/hello"
        android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T09:30:37.413

像@rj 和@djhacktorreborn 建议的那样，用线性布局包装你的TextView，然后把整个东西放到一个相对布局中。

# core-data-migration - Coredata轻量级迁移“找不到迁移的映射模型”

> ID：15320686
> 
> 赞同：3
> 
> 时间：2013-03-10T09:17:25.180
> 
> 标签：core-data-migration

我正在使用 xcode4.5 中的轻量级迁移进行 coredata 数据库迁移，当我将“NSInferMappingModelAutomaticallyOption”设置为“NO”时，我不断收到“找不到用于迁移的映射模型”。如果我将“NSInferMappingModelAutomaticallyOption”设置为“YES”，轻量级迁移将毫无问题地通过。

这是我遵循的步骤：

1.  添加新模型版本 .xcdatamodelId
2.  对实体进行更改（包括添加新实体）
3.  选择较新版本的数据模型作为当前版本，生成新的 NSManagedObject 子类，并对代码进行相应的更改。
4.  创建映射模型并使源指向旧数据模型版本，目标指向新数据模型版本
5.  创建自定义迁移策略并将其与映射模型中的一个映射挂钩
6.  设置“NSInferMappingModelAutomaticallyOption”等于“NO”的轻量级迁移。
7.  使用来自旧版本的数据库在模拟器上测试迁移。

我遵循了关于苹果文档的所有步骤，并且在创建映射后没有对实体架构进行任何更改。我尝试清理 xcode 中的 DerivedData 文件夹，并且我检查了包含正确的“VersionInfo.plist”我的数据模型的版本。对于未更改的实体，它们的哈希键是匹配的。

但是，当我尝试进行迁移时，我仍然会收到此错误....现在很沮丧..任何人都可以帮助我解决这个问题吗？

# interface - 使用 CouchDB 作为接口。是合适的方式吗？

> ID：15320693
> 
> 赞同：3
> 
> 时间：2013-03-10T09:18:50.117
> 
> 标签：interface, couchdb, mustache

我们的设备（带摄像头的显微镜）为每张图像生成图像和附加信息。现在中间件供应商希望将这些设备连接到实验室自动化系统。他们必须获取数据，而我们必须提供数据。令我惊讶的是他们的界面建议 - 一种非常神秘的令牌分隔格式（ASTM E1394-97）。不幸的是，他们甚至无法在其协议中容纳图像，并且旨在获取文件路径。

我认为这不是最新的方法。在寻找替代品时，我看到了 CoachDB。所以，我的想法是，我们的设备将在 CoachDB 中导入包括图像在内的数据，并且他们可以获得数据。甚至，使用 mustache，我们可以生成他们想要的格式（ascii-text）并将 URL 放置为图像引用而不是路径。

我的问题是，是否有人已经将 CoachDB 应用于这样的用例？这似乎是对 CoachDB 的一点误用，因为主要目的是接口而不是数据存储。还有一点让我感到不安的是，CoachDB 的发明者去了另一个项目 Coachbase。这是否意味着未来对 CoachDB 的支持不足？

非常感谢您的任何见解和建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:29:03.393

It's ok use-case and actually we're using CouchDB in such way - as proxing middleware between medical laboratory analyzers and LIS. Some of them publish images or pdf data on shared folders and we'd just loading them into related document as attachments.

More over you'd like to know, CouchDB is able to serve external processes (aka [`os_daemons`](http://davispj.com/2010/09/26/new-couchdb-externals-api.html)) and take care about their lifespan: restarting if someone had terminated and starting right after you update config options through HTTP interface. This helps to setup ASTM client and server processes since this protocol is different from HTTP (which is native for CouchDB) which communicates with devices and creates documents as regular CouchDB clients. In same way you may setup *daemons* to monitor shared folders for specific files. And all this is just CouchDB with few "low bounded" plugins.

# jenkins - Jenkins 构建失败并出现 SVNException（处理 REPORT 请求响应失败）

> ID：15320694
> 
> 赞同：3
> 
> 时间：2013-03-10T09:18:53.987
> 
> 标签：jenkins

我将 Jenkins 设置为自动构建由 SVN 控制的项目。我遇到了一个问题，项目签出失败。

我并不总是遇到这个问题。其实我只遇到过一次。

你能给我一些关于问题根本原因的指导吗？我怎样才能避免问题再次发生。谢谢：-）

例外情况如下：

```
 Failed to check out http://ziyue.corp.com/svn/repos/process_tools/trunk/stevsssion
    org.tmatesoft.svn.core.SVNException: svn: REPORT /svn/repos/process_tools/!svn/vcc/default failed
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:298)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:283)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:271)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.doReport(DAVConnection.java:283)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.runReport(DAVRepository.java:1282)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.update(DAVRepository.java:830)
        at org.tmatesoft.svn.core.wc.SVNUpdateClient.update(SVNUpdateClient.java:564)
        at org.tmatesoft.svn.core.wc.SVNUpdateClient.doCheckout(SVNUpdateClient.java:942)
        at hudson.scm.subversion.CheckoutUpdater$1.perform(CheckoutUpdater.java:84)
        at hudson.scm.subversion.WorkspaceUpdater$UpdateTask.delegateTo(WorkspaceUpdater.java:136)
        at hudson.scm.SubversionSCM$CheckOutTask.perform(SubversionSCM.java:788)
        at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:769)
        at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:753)
        at hudson.FilePath.act(FilePath.java:865)
        at hudson.FilePath.act(FilePath.java:838)
        at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:743)
        at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:685)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1342)
        at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout        (AbstractBuild.java:683)
        at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:588)
        at hudson.model.Run.execute(Run.java:1568)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:237)
    Caused by: org.tmatesoft.svn.core.SVNErrorMessage: svn: REPORT /svn/repos/process_tools/!svn/vcc/default failed
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:200)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:146)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:89)
        ... 25 more
    Caused by: org.tmatesoft.svn.core.SVNException: svn: REPORT request failed on '/svn/repos/process_tools/!svn/vcc/default'
    svn: Processing REPORT request response failed: The element type "S:prop" must be terminated by the matching end-tag "</S:prop>". (/svn/repos/process_tools/!svn/vcc/default) 
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64)
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:662)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:292)
        ... 24 more
    Caused by: org.tmatesoft.svn.core.SVNErrorMessage: svn: REPORT request failed on '/svn/repos/process_tools/!svn/vcc/default'
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:200)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:660)
        ... 25 more
    Caused by: org.tmatesoft.svn.core.SVNErrorMessage: svn: Processing REPORT request response failed: The element type "S:prop" must be terminated by the matching end-tag "</S:prop>". (/svn/repos/process_tools/!svn/vcc/default) 
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:200)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:181)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:133)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.readData(HTTPConnection.java:790)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.readData(HTTPConnection.java:741)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPRequest.dispatch(HTTPRequest.java:218)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:379)
        ... 25 more 
```

# android - Android JUnit 和解析 xml 数据 - 测试什么

> ID：15320695
> 
> 赞同：0
> 
> 时间：2013-03-10T09:18:55.427
> 
> 标签：android, xml-parsing, xmlpullparser, junit3

我正在尝试获得更多关于 JUnit 及其在 Android 中的使用的经验。参考this official Android training [Parsing XML data](http://developer.android.com/training/basics/network-ops/xml.html)我想知道是否有人可以提供一个关于如何测试一些使用的方法的示例。

特别是您将如何测试 StackOverflowXmlParser 类中包含的方法以及方法 loadXmlFromNetwork() 和 downloadUrl() [class NetworkActivity.java]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:17:11.547

关于单元测试，我能给你的最好建议是首先真正理解什么是测试单元。当我编写测试，特别是单元测试时，我确保我的测试单元是一个类。其他一切都被嘲笑，我的测试确保类上的每个公共方法都做到了它所承诺的。

也就是说，您要询问的方法是[EVIL UNTESTABLE CODE](http://googletesting.blogspot.com/2008/07/how-to-write-3v1l-untestable-code.html)。看到这样的代码来自谷歌工程师，有点令人震惊。我的猜测是它是一个前端 Web 开发人员，因为变量都是在方法的顶部声明的，Javascript 样式和每个局部变量的初始化都没有值`null`表明编写示例[的人不是很有经验爪哇](http://www.javapractices.com/topic/TopicAction.do?Id=14)。

您将不得不对方法进行重大重构以使它们进入可测试状态。例如`loadXmlFromNetwork`，提出了一个说谎的 API。它不是从网络“加载” xml，而是`List<Entry>`在完成后将其解析为 then ，它通过将这些条目中的数据塞进 HTML 格式的字符串然后返回它来做更多的事情。

仅此方法的第一个问题是它在自身内部创建对象，而不是询问它需要什么。这给测试带来了问题，因为您无法模拟这些对象来测试逻辑。在测试中，您不希望必须建立网络依赖关系，因此您需要模拟`HttpURLConnection`并模拟行为来练习您的代码。

要为您指明正确的方向，请观看 Google 首席测试布道者的这段视频：

[http://www.youtube.com/watch?v=wEhu57pih5w](http://www.youtube.com/watch?v=wEhu57pih5w)

# php - 用于文件上传和缓存的 Amazon S3

> ID：15320696
> 
> 赞同：0
> 
> 时间：2013-03-10T09:19:02.047
> 
> 标签：php, yii, amazon-s3, amazon-ec2

我目前正在使用 PHP 中的 Yii 框架编写一个应用程序，该应用程序存储应用程序用户上传的大量文件。我决定，由于文件的数量将不断增加，使用 Amazon S3 存储这些文件是有益的，并且在请求时，服务器可以检索文件并将其发送给用户。（服务器是同区的EC2实例）

由于这些文件都是机密文件，因此服务器必须在允许用户接收文件之前验证用户的身份及其凭据。在这种情况下，有没有办法直接从 S3 将文件发送给用户，或者我必须先将数据拉到服务器，然后再将其提供给用户。

如果是的话，有什么办法可以将最近上传的文件缓存在本地服务器上，这样就不用去s3找文件了。在大多数情况下，最近上传的文件会被多个客户端重复请求。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:29:40.303

经过身份验证的客户端可以通过在向客户端显示页面/url 之前在服务器上签署适当的 URL 来直接从 S3 下载文件。

有关更多信息，请参阅：[http ://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)

请注意，对于机密文件，您可能还需要考虑服务器端/客户端加密。最后，对于静态文件（例如图像），您可能还需要设置适当的缓存头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-17T11:22:18.863

使用 AWS Cloud Front 来处理这些静态文件。与其将文件发送给用户，不如向他们发送文件的链接。链接需要是云前端链接，而不是指向 S3 存储桶的直接链接。

这样做的好处是可以保持服务器上的低负载以及缓存靠近用户的文件以获得更好的性能。

此处提供更多详细信息[通过 CloudFront 提供私有内容](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html)

# java - actionPerformed 和 ActionListener 的问题

> ID：15320697
> 
> 赞同：-3
> 
> 时间：2013-03-10T09:19:10.740
> 
> 标签：java, swing

我已经开始使用 Java 进行编程，但 Swing 有一个问题。单击按钮后，我想重复椭圆动画`przycisk`。所以这就是为什么我`RamkaAnimacjaKola mojeGUI= new RamkaAnimacjaKola();`在我的`ActionPerformed`. 那么我应该改变什么？

我打电话`Thread.sleap`是因为那是我书中的一个例子。当我尝试只运行我的代码一次时，它会起作用。这意味着没有动作监听器和按钮`przycisk`源如下：

```
package Kurs;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class RamkaAnimacjaKola implements ActionListener {

    JFrame ramka;
    Panel mojPanel;

    int x=40;
    int y=40;

    public void zacznijAnimacje(){
        mojPanel = new Panel();
        ramka= new JFrame();
        JButton przycisk= new JButton("repeat");
        ramka.getContentPane().add(BorderLayout.SOUTH, przycisk);
        przycisk.addActionListener(this);
        ramka.getContentPane().add(BorderLayout.CENTER, mojPanel);
        ramka.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ramka.setSize(300, 300);
        ramka.setVisible(true);

        for (int i=0 ; i <40 ;i++){
            x++;
            ramka.repaint();
            try{
                Thread.sleep(50);
            } catch (Exception ex){ }   
        }
        for (int i=0 ; i <40 ;i++){
            y++;
            ramka.repaint();
            try{
                Thread.sleep(50);
            } catch (Exception ex){ }
        }
        for (int i=0 ; i <40 ;i++){
            x--;
            ramka.repaint();
            try{
                Thread.sleep(50);
            } catch (Exception ex){ }
        }
        for (int i=0 ; i <40 ;i++){
            y--;
            ramka.repaint();
            try{
                Thread.sleep(50);
            } catch (Exception ex){ }
        }
    }

    public void actionPerformed(ActionEvent zdarzenie) {
        RamkaAnimacjaKola mojeGUI= new RamkaAnimacjaKola();
        mojeGUI.zacznijAnimacje();
    }

    class Panel  extends JPanel {
        public void paintComponent(Graphics g){
            g.setColor(Color.green);
            g.fillOval(x, y, 40, 40);
        }
    }
} 
```

我使用我的测试类开始这段代码：

```
package Kurs;

public class UruchomGUI {
/**
 * @param args
 */
public static void main(String[] args) {
        RamkaAnimacjaKola mojeGUI = new RamkaAnimacjaKola();
        mojeGUI.zacznijAnimacje();
    }
} 
```

你能解释一下为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:36:40.477

您不应该在 Event Dispatching Thread 中执行任何会阻止它的操作。

除其他事项外，EDT 负责处理重绘请求。您所做的任何阻止 EDT 处理这些事件（如`Thread.sleep`）的操作都会使其显示为您的应用程序已冻结。SO上有很多很好的例子。

看看[Multiple bouncing balls thread issue](https://stackoverflow.com/questions/14593678/multiple-bouncing-balls-thread-issue/14593761#14593761)和[Java Bouncing Ball](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)和[图像没有加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)一些例子......

您可能还想阅读一下[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# ibm-mobilefirst - HTTP 适配器错误“运行时：无法解析 JSON 字符串”

> ID：15320711
> 
> 赞同：4
> 
> 时间：2013-03-10T09:20:32.080
> 
> 标签：ibm-mobilefirst

我正在使用 IBM Worklight Studio，并尝试创建从外部 http 服务器检索 JSON 对象的 HTTP 适配器。

当我只是使用 HTTP Get 访问（例如使用浏览器）访问目标 http 服务器时，我知道他们的响应类似于以下数组样式 JSON 格式：

```
[
  { "xxx":"aaa", "yyy":"bbb", ... },
  { "xxx":"ccc", "yyy":"ddd", ... },
    :
  { "xxx":"eee", "yyy":"fff", ... } 
] 
```

我创建了可以检索上述信息的 HTTP 适配器

```
var input = {
  method : 'get',
  returnedContentType : 'json',
  path : path
};

return WL.Server.invokeHttp(input); 
```

现在我尝试使用“Run As -> Invoke Worklight Procedure”调用此适配器，然后收到以下错误消息：

```
{
   "errors": [
      "Runtime: Failed to parse JSON string\n\n[\n  {\n
   (raw JSON data) } ],
   "info": [],
   "isSuccessful": false,
   "warnings": []
} 
```

在我的日志控制台中，worklight 显示以下错误消息：

```
FWLSE0101E: Caused by: java.io.IOException: Expecting '{' on line 2, column 2 instead, obtained token: 'Token: [' 
```

从以上信息来看，worklight 似乎希望返回的 JSON 对象需要以“{”开头，而不是“[”。

这是我的猜测吗？有什么解决方法吗？

感谢提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:47:40.550

Worklight 知道如何处理以`[`（JSON 数组）开头的 JSON 对象。在这种情况下，Worklight 将返回响应为：

```
{ "array" : [*the json array*]} 
```

查看 HTTP 适配器的代码，我发现解析不以`[`.

除了更改从 http 服务器返回的响应外，我没有看到解决此问题的方法。

我打开了一个关于这个的内部错误，感谢您帮助我们找到这个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T06:16:33.987

您可以将returnedContentType 更改为“plain”，这将使WL 服务器将内容作为大字符串返回，而不是尝试解析它。然后在您的适配器中，您可以使用 var obj = JSON.parse(response.text)

# android - 如何防止某些特定应用程序接收到来自旋转传感器的信号

> ID：15320713
> 
> 赞同：2
> 
> 时间：2013-03-10T09:20:34.300
> 
> 标签：android, rotation, android-sensors

我注意到 android 旋转我的设备的方式非常烦人（尤其是当您查看图像时......）对于我的应用程序，我可以在清单文件中将其设置为纵向或横向模式（以及在用户需要时设置的设置功能）。

但我想要的是有一个通用设置，可以设置其他应用程序（其他已安装的图像查看器）停止接收来自传感器的信号（以便其他图像查看器可以像我的应用程序一样工作），而其他应用程序仍然可以使用旋转传感器正常工作.

我不知道从哪里开始实现这个功能（我曾想过从传感器拦截广播信号，但那件事似乎很危险）。我应该从哪里开始？任何线索或建议表示赞赏。

谢谢，

# java - PrimeFaces DashBoard 列宽

> ID：15320718
> 
> 赞同：0
> 
> 时间：2013-03-10T09:21:19.610
> 
> 标签：java, primefaces, dashboard

我有一个大问题，直到现在我都找不到解决方案……我寻找了与我的问题相同的类似问题，但我也没有找到解决方案

问题：我想在我的仪表板中为仪表板列添加不同的宽度以进行不同的布局，顺便说一下，我发现了两种创建仪表板的方法，首先是在我的 bean 中创建模型，然后`DashboardColumns`在添加小部件后也在bean 中添加它对它，第二个是通过标签创建列，`<p:dashboardColumn>`这是第一个选项意味着在 xhtml 文件中创建没有真实列的列，这使我可以单独控制每一列的 css，以及我发现我可以编辑默认 css 的方式列

```
.pf-dashboard-column {width:200px;} 
```

并写下我的风格，好的，但这种方式并没有让我能够为列制作不同的大小（宽度），第二个问题`p:dashboardColumn`不在我的 primefaces 库中，尽管我从网站下载了库并且将它添加到我的 IDE（类路径和源代码）注意：在我的开始标签中，我包含`xmlns:p="http://primefaces.org/ui"`使我的 primefaces 组件工作但`<p:dashboardColumn>`不工作的示例，但在使用此标签的示例中，它包含`xmlns:p="http://primefaces.prime.com.tr/ui"`，我在另一个库中找到它，但它没有我的标签像（`p:selectOneMenu`）一样工作，但可以`<p:dashboardColumn>`工作

...这是我的问题，我无法为列设置不同的宽度...任何帮助？？？

还有一件事，当我调整浏览器的大小时，面板的顺序发生了变化，我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T08:10:35.100

看看 CSS nth-child 选择器：

[http://www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

```
.pf-dashboard-columnp:nth-child(1) {
  width: 400px;
}
.pf-dashboard-columnp:nth-child(2) {
  width: 500px;
} 
```

不过要小心你在做什么，你可能会发现其他元素的大小是由素面动态而不是在 CSS 中调整的。

# spring - 依赖服务应该在哪里@Autowired（控制器或服务）？

> ID：15320721
> 
> 赞同：1
> 
> 时间：2013-03-10T09:21:27.730
> 
> 标签：spring, service, architecture, autowired

考虑以下两个选项：

**选项 #1：**在控制器中自动装配所需的服务

```
@Controller
@RequestMapping(value="/foo")
public class FooController {
    @Autowired
    private FooService fooService;

    @Autowired
    private BarService barService;

    @Autowired
    private BazService bazService;

    @RequestMapping(method=RequestMethod.GET)
    public String getFoo(...) {
        Foo foo = fooService.getFooInstance(...);

        List<Foo> foos = fooService.getFooList(foo);
        List<Bar> bars = barService.getBarList(foo);
        Baz baz        = bazService.getBaz(foo);

        ...

        return "view/foo/index.jsp";
    }
} 
```

**选项 #2：**在特定服务中为 UoW 自动装配依赖服务

```
@Controller
@RequestMapping(value="/foo")
public class FooController {
    @Autowired
    private FooService fooService;

    @RequestMapping(method=RequestMethod.GET)
    public String getFoo(...) {
        Foo foo = fooService.getFooInstance(...);

        FooDTO fooInfo = fooService.getFooAllInformation(foo);

        List<Foo> foos = fooInfo.getFoos();
        List<Bar> bars = fooInfo.getBars();
        Baz baz        = fooInfo.getBaz();
        ...

        return "view/foo/index.jsp";
    }
}

@Service
public class FooServiceImpl implements FooService {
    @Autowired
    private FooRepository fooRepository;

    @Autowired
    private BarService barService;

    @Autowired
    private BazService bazService;

    ...

    @Override
    @Transactional
    public FooDTO getFooAllInformation(Foo foo) {
        List<Foo> foos = getFooList(foo);
        List<Bar> bars = barService.getBarList(foo);
        Baz baz        = bazService.getBaz(foo);

        ...
    }
} 
```

好吧，目前我正在使用选项#1，一切正常。但我想知道这种方法是否足够好。它们中的任何一个比另一个有任何显着优势吗？我应该提到我知道服务`@Transactional`的`INSERT`一部分（我在这里省略了）。但是仅仅*读取*数据呢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T09:34:40.570

第二种选择更清洁、更快、更安全。它基本上是使用外观模式。

更干净，因为它将代码业务代码移到 UI 层之外，在它所属的服务层中。

更快，因为由于一切都在同一个事务中进行，您将保存事务的打开和关闭，并从事务缓存中受益（假设您使用 ORM 来获取所需的数据）。如果 UI 和服务层位于单独的 JVM 上，它当然会更快。

更安全，因为因为一切都在同一个事务中，每个服务将从同一个一致的数据库“快照”中获取数据。在第一个选项中，您可以让第一个方法返回一个在调用第二个服务时不再存在的 foo。当然，这取决于数据库的事务隔离级别，但它总是比在多个事务中进行更安全。

# mysql - Hibernate 生成交叉连接而不是左连接

> ID：15320729
> 
> 赞同：2
> 
> 时间：2013-03-10T09:22:14.890
> 
> 标签：mysql, hibernate, hql, left-join, cross-join

我正在使用休眠 3.6.10.Final 和 MySQL 5.5。

我写了一个这样的动态查询：

```
"from " + clazz.getName()+ " ORDER BY "+sortField+" "+sortDirection 
```

我的休眠实体具有多对一的父/子关系。如果查询是按父字段排序的，hibernate 会生成这个 hql 选择：

```
select parent0_.ID as ID10_, parent0_.ID_CHILD as ID6_10_ 
from parent parent0_
order by parent0_.PARENTFIELD ASC 
```

如果查询是按子字段排序的，我有以下 hql：

```
select parent0_.ID as ID10_, parent0_.ID_CHILD as ID6_10_
from parent parent0_
cross join child1_
where parent0_.ID_CHILD = child1_.ID
order by child1_.CHILDFIELD ASC 
```

第二个查询返回较少的结果，因为 parent0_.ID_CHILD 可以为空。有没有办法强制休眠生成左连接？

我需要这样的东西

```
select parent0_.ID as ID10_,
   parent0_.ID_CHILD as ID6_10_
from
parent parent0_
    left join
child child1_
on
parent0_.ID_CHILD = child1_.ID
order by child1_.CHILDFIELD ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:48:11.453

感谢 JB Nizet，我解决了这样的查询：

```
String[] tokens = sortField.split("\\.");
for(int i=0;i<tokens.length-1;i++)
{
    sortby+=" LEFT JOIN parent"+i+"."+tokens[i]+" as child"+i;
}
sortby+=" ORDER BY child"+(tokens.length-2)+"."+tokens[tokens.length-1]+" "+sortDirection;
...
String query = "select parent0 FROM " + clazz.getName()+" as parent0 "+ sortby; 
```

# c# - for 循环 - 高分数组

> ID：15320735
> 
> 赞同：1
> 
> 时间：2013-03-10T09:22:34.497
> 
> 标签：c#, for-loop

所以我试图让这个循环遍历高分数组（scorelist）的每个索引，以检查当前分数（playerScore）是否高于当前索引。如果 if 语句得到“是”，那么它应该沿着索引将所有分数降低（或者更高？）并将 playerScore 放在应该的位置。

```
{
    Console.Write("input name: ");
    string playerName = Console.ReadLine();
    Console.Write("input score: ");
    int playerScore = Convert.ToInt32(Console.ReadLine());

    for (int i = 0; i < 10; i++)
    {
        if (playerScore > scoreList[i])
        {
            int nextNo = 9;
            for (int n = 10; n > 0; n--)
            {

                scoreList[n] = scoreList[nextNo];
                nameList[n] = nameList[nextNo];
                nextNo--;
            }
            scoreList[i] = playerScore;
            nameList[i] = playerName;
        }
    }
} 
```

使用这个当前代码，它只是将 playerScore 放在第一个索引上（如果它高于之前存储在那里的值），然后将它复制到索引的其余部分。对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T09:29:11.167

它可以更容易地完成：

```
int prev = playerScore;
for (int i = 0; i < 10; i++)
{
    if (playerScore > scoreList[i])
    {
        int temp = scoreList[i];
        scoreList[i] = prev;
        prev = temp;
    }
} 
```

我假设您只需要前 10 个结果（并且您的数组中已经有 10 个元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T09:27:53.777

将您的数组更改为 a`List<int>`并使用以下代码：

```
var scorelist = new List<int>();

//populate your scorelist;

var playerScore = someintValue;

var firstlower = scorelist.FirstOrDefault(x => x < playerScore);

if (firstlower != null)
    scorelist.Insert(playerScore, scoreList.IndexOf(firstlower);
else
    scorelist.add(playerScore); 
```

**编辑：**

如果您需要在插入后将列表裁剪为最多 10 个项目，只需：

`scorelist = scorelist.Take(10).ToList();`

# google-maps - 谷歌地图标记性能

> ID：15320736
> 
> 赞同：0
> 
> 时间：2013-03-10T09:22:48.283
> 
> 标签：google-maps, google-maps-markers

在我的网站[http://offersmapper.com/](http://offersmapper.com/)上 ，我有一张必须显示 2000 到 5000 个标记的地图。真的很慢。我按照建议尝试了markercluster，但没有任何结果......很可能我做错了什么......任何可以帮助我的人？​​：

```
function initialize() {  
var mapOptions = {
  zoom: <? echo $zoom; ?>,
  center: new google.maps.LatLng(<? echo $lat ?>, <? echo $lng ?>),
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map"), mapOptions);  

var markers_1 = [];

<?
while($deal=mysql_fetch_assoc($query))
{
$t="
var contentString".$deal['id']."='".$info."';

var InfoWin".$deal['id']."= new google.maps.InfoWindow({
      content: contentString".$deal['id'].",
      maxWidth: 300
    });

var marker".$deal['id']." = new google.maps.Marker({
  position: new google.maps.LatLng(".$deal['lat'].", ".$deal['lng']."),
  icon: ".$icon."
});

google.maps.event.addListener(marker".$deal['id'].", 'click', function() {
    InfoWin".$deal['id'].".open(map,marker".$deal['id'].");
  });

markers_1.push(marker".$deal['id'].");"; 

echo $t;
}
?>
var markerCluster_1 = new MarkerClusterer(map, markers_1, {maxZoom: 7, gridSize: 25, styles: styles[0]} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:37:06.063

尝试减少您的 html 代码：您应该将数据作为 json 对象传递给 javascript。比 javascript 应该遍历所有元素并创建标记等。mutch 排序器 html 代码和更快的加载。

我假设您使用 jQuery 进行 javascript 编码：

```
 ... //your code before the while loop
      <?
      $deals = array();
      while($deal=mysql_fetch_assoc($query)){
           $deals[$deal[$id]] = $deal;
      }?>
      <script type="text/javascript">
         var deals = <?=json_encode($deals)?>;             
         var infoWindow = [];
         var marker =[];
         $.each(deals,function(k,v){ 
              var i = k; 
              infoWindow[i] = new  google.maps.InfoWindow({ 
                 content: v.info, 
                 maxWidth: 300 }); 
              markers[i] = new google.maps.Marker({ 
                 position: new google.maps.LatLng(v.lat, v.lng), icon: v.icon 
              });
              google.maps.event.addListener(markers[i] , 'click', function(){
                  infoWindow[i].open(map,markers[i]);
              });
         });
         var markerCluster_1 = new MarkerClusterer(map, markers, {maxZoom: 7, gridSize: 25, styles: styles[0]} );
      </script> 
```

如果还不够，可以通过ajax加载数据。

# iphone - 正确声明和传递不同大小的 char 数组

> ID：15320738
> 
> 赞同：0
> 
> 时间：2013-03-10T09:22:56.510
> 
> 标签：iphone, objective-c

我喜欢定义一个接收可变大小的 char 数组的方法。

这是我目前的定义：

```
+(int) findStartIndex: (NSData*)buffer  searchPattern: (char*) searchPattern; 
```

这就是我所说的：

```
 const char a[] = {'a','b','c'};
  startIndex = [self findStartIndex:buffer  searchPattern: a]; 
```

像这样

```
 const char b[] = {'1','2'};
  startIndex = [self findStartIndex:buffer  searchPattern: b]; 
```

但我不断收到编译器警告：

```
Sending 'const char[3]' to parameter of type 'char *' discards qualifiers 
```

和

```
Sending 'const char[2]' to parameter of type 'char *' discards qualifiers 
```

分别。

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:30:46.163

因为你声明的参数是char *，但是传递的是const char []。这是一个潜在的风险。您应该进行以下更改。我测试时没有警告。

```
+(int) findStartIndex: (NSData*)buffer  searchPattern: (const char*) searchPattern 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:35:26.017

C 中的限定符首先应用于左侧的关键字，然后回退到右侧。 `const char arr[]`不是对 char 数组的常量引用，它始终是 char 类型。但是，当您将它传递给一个采用指向 char 的指针的方法时，您会失去该类型的 const'ness，并且会收到警告。（为晦涩的 C 东西万岁！）

# android - 如何在 AChartEngine 中设置 CombinedXYChart 的日期格式？

> ID：15320739
> 
> 赞同：2
> 
> 时间：2013-03-10T09:23:09.977
> 
> 标签：android, achartengine

我可以像这样在时间表中设置日期格式

```
final GraphicalView view = ChartFactory.getTimeChartView(context, dataset,
                mRenderer, "dd-MMM-yyyy"); 
```

**但在 ComninedXYChart 的情况下我不能这样做**

```
String[] types = new String[] { TimeChart.TYPE , ScatterChart.TYPE, ScatterChart.TYPE};
final GraphicalView view = 
    ChartFactory.getCombinedXYChartView(context, dataset, mRenderer, types); 
```

**下图：** ![在此处输入图像描述](../Images/fb689b01130bd7ab27117d27c22efeac.png)

**有任何想法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:25:15.187

在 CombinedXYChart 案例中，您将不得不使用自定义标签：

```
// disable the default labels
renderer.setXLabels(0);
// add several such labels
renderer.addXTextLabel(x, "label"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T17:46:21.823

其实我找到了更好的方法。诀窍是使用方法 setXLabelFormat 与重载的 NumberFormat 相结合：

```
 SimpleDateFormat mDateFormatter = new SimpleDateFormat("d MMM");
 renderer.setXLabelFormat(new NumberFormat() {
        @Override
        public StringBuffer format(double value, StringBuffer buffer, FieldPosition field) {
            return mDateFormatter.format(value, buffer, field);
        }

        @Override
        public StringBuffer format(long value, StringBuffer buffer, FieldPosition field) {
            return mDateFormatter.format(value, buffer, field);
        }

        @Override
        public Number parse(String string, ParsePosition position) {
            return mDateFormatter.parse(string, position).getTime();
        }
    }); 
```

当然，如果方法 setXLabelFormat 接受[Format](http://developer.android.com/reference/java/text/Format.html)（它是所有格式的基类）而不是[NumberFormat](http://developer.android.com/reference/java/text/NumberFormat.html)会更好，但是我认为它仍然是优雅且非常简单的解决方案。

# php - 如何将关联数组从 smarty 模板传递给 jquery

> ID：15320742
> 
> 赞同：0
> 
> 时间：2013-03-10T09:24:11.380
> 
> 标签：php, jquery, smarty

我已经将**selection.php**中的两个数组分配给 smarty 像这样

```
$country = array(
         '1' => 'Japan',
         '2' => 'Australia',
         '3' => 'India'
            );      
$city = array(
            '1' => array(
                 '10' => 'Tokyo',
                 '11' => 'Osaka'
               ),
        '2' => array(
                 '20' => 'Sydney',
                 '21' => 'Melbourne'
               ),
        '3' => array(
                 '30' => 'Mumbai',
                 '31' => 'Delhi'
               )
        );      
$smarty->assign('country_select',$country);
$smarty->assign('city_select',$city);
$smarty->display('selection.tpl'); 
```

**selection.tpl**中的代码如下所示。

```
<div>{html_options id='country_select' options=$country_select}</div>
<div>{html_options id='city_select' options=$city_select}</div> 
```

现在我要做的是，编写一个jQuery函数，当我在country_select下拉列表中选择一个国家时，city_select下拉列表中的项目将根据国家选择进行更改。这意味着，如果我在 country_select 下拉菜单中选择“Australia”，则在 city-select 下拉菜单中，除了“Sydney”和“Melbourne”之外，其他选项将被删除。

你能帮我看看jQuery代码是怎样的吗？我未能将 $city_select 数组传递给 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:14:36.757

```
$country = array('1' => 'Japan', '2' => 'Australia', '3' => 'India');    
$city = array(
    '1' => array('10' => 'Tokyo', '11' => 'Osaka'),
    '2' => array('20' => 'Sydney', '21' => 'Melbourne'),
    '3' => array('30' => 'Mumbai', '31' => 'Delhi')
);
$data = array('countries' => $country, 'cities' => $city);

echo json_encode($data); 
```

使用 json_encode 将输出回显到 JSON，结果应如下所示：

```
{"countries":{"1":"Japan","2":"Australia","3":"India"},"cities":{"1":{"10":"Tokyo","11":"Osaka"},"2":{"20":"Sydney","21":"Melbourne"},"3":{"30":"Mumbai","31":"Delhi"}}} 
```

然后你应该使用 jQuery ajax 来获取你的 PHP 并使用 JSON 进行通信

```
$.get("selection.php", function(result) {
    //code here
}, "json"); 
```

我在 Fiddle 上写了一个示例代码，javascript 应该放在上面 jQuery AJAX 的中间。 [http://jsfiddle.net/sing0920/X3dvG/](http://jsfiddle.net/sing0920/X3dvG/)

希望这有帮助。

哎呀，我发现我在这里完全忽略了“聪明”，对此感到抱歉。但仍然希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:34:12.677

您可以使用带有 JSON 数据序列化的 ajax 请求，如上所述。另一方面，您可以省略 ajax 请求，并使用`$.data`功能，将`data-<smth>`属性添加到某些特定元素或主体。此数据元素的值可能类似于：base64_encode(json_encode($data))，然后`$('<elem>').data('<smth>')`在您的 jquery 脚本中使用并使用[http://ntt.cc/2008/01/19/base64-encoder-之类的内容对其进行解码带有javascript.html](http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html)和JSON.parse的解码器。

# c# - 文件上传控件在 ASP.NET 中不起作用

> ID：15320743
> 
> 赞同：1
> 
> 时间：2013-03-10T09:24:29.520
> 
> 标签：c#, asp.net, file-upload

我正在尝试使用 ASP.NET 制作一个简单的上传文件控件，但它不起作用：

## 这是我的代码（.aspx）：

```
<form id="form1" runat="server">
  <div>
    upload a file now.
      <asp:FileUpload ID="fileupload1" runat="server" />
      <asp:Button  ID="button1"  Text="Upload"  runat="server"  Width="73px" 
            onclick="button1_Click" />
    <asp:Label ID="Label1" runat="server"  Font-Bold="True"  ForeColor="#000099">
         </asp:Label>
  </div>  
</form> 
```

## 这是我背后的代码（.cs）：

```
if(fileupload1.HasFile)
{
    try
    {
        if(fileupload1.PostedFile.ContentType ==  "image/jpeg")
        {
            if(fileupload1.PostedFile.ContentLength < 51200000)
            {
               string  filename = Path.GetFileName(fileupload1.FileName);
               fileupload1.SaveAs(Server.MapPath("~/img/") + filename);
               Label1.Text ="File uploaded successfully!";
            }
            else
                Label1.Text ="File maximum size is 500 Kb";
        }
        else
            Label1.Text ="Only JPEG files are accepted!";
    }
    catch(Exception exc)
    {
        Label1.Text = "The file could not be uploaded. The following error occured: "
                           + exc.Message;
    }
  } 
```

该文件未在服务器中显示..有什么想法吗？

当我断点时，它们都有效，应用程序获取代码，一切正常，但不会将其保存到文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:38:06.647

这可能会也可能不会完全起作用，但您需要`enctype`在表单中包含一个属性。

```
<form id="form1" runat="server" enctype="multipart/form-data"> 
```

如果您不这样做，浏览器将不会传输文件。

见这里：[https ://developer.mozilla.org/en-US/docs/HTML/Element/form#attr-enctype](https://developer.mozilla.org/en-US/docs/HTML/Element/form#attr-enctype)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:38:53.243

改变

```
fileupload1.SaveAs(Server.MapPath("~/img/") + filename); 
```

和

```
fileupload1.PostedFile.SaveAs(Server.MapPath("~/img/") + filename); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:46:51.990

我认为问题在于这两行

```
string  filename = Path.GetFileName(fileupload1.FileName);
fileupload1.SaveAs(Server.MapPath("~/img/") + filename); 
```

你为什么用

```
 string  filename = Path.GetFileName(fileupload1.FileName); 
```

应该很简单

```
fileupload1.SaveAs(Server.MapPath("~/img/") + fileupload1.FileName); 
```

# c++ - 为什么右值引用与移动语义相关联？

> ID：15320749
> 
> 赞同：3
> 
> 时间：2013-03-10T09:26:13.223
> 
> 标签：c++, c++11

当我阅读一些文章时，右值引用和移动语义通常是一起描述的。但是，据我了解，右值引用只是对右值的引用，与移动语义无关。甚至可以在不使用右值引用的情况下实现移动语义。所以问题是，为什么要移动 constructor/operator= 使用右值引用？只是为了更容易编写代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T10:05:49.703

考虑问题。我们要支持两种基本的移动操作：移动“构造”和移动“赋值”。我在那里使用引号是因为我们不一定要使用构造函数或移动赋值运算符来实现它们；我们可以用别的东西。

移动“构造”意味着通过从现有对象传输内容来创建新对象，这样删除旧对象不会释放新对象中现在使用的资源。移动“分配”意味着获取一个预先存在的对象并从现有对象转移内容，这样删除旧对象不会释放新对象中现在使用的资源。

好的，所以这些是我们想要做的操作。那么，怎么做呢？

采取行动“建设”。虽然我们不必*通过*构造函数调用来实现它，但我们*真的*很想这样做。我们不想强迫人们进行两阶段移动构建，即使它背后有一些神奇的函数调用。所以我们希望能够将运动作为构造函数来实现。好的。

这是问题 1：构造函数没有名称。因此，您只能根据参数类型和重载分辨率来区分它们。而且我们知道类型对象的移动构造函数`T`必须将类型对象`T`作为参数。而且由于它只需要一个参数，因此它看起来就像一个复制构造函数。

好的，所以现在我们需要一些方法来满足重载。我们可以引入一些标准库类型，a `std::move_ref`. 它会像`std::reference_wrapper`，但它会是一个独特的类型。因此，您可以说移动构造函数是一个带有`std::move_ref<T>`. 好的，好的：问题解决了。

只是没有；我们现在遇到了新问题。考虑这段代码：

```
std::string MakeAString() { return std::string("foo"); }

std::string data = MakeAString(); 
```

忽略省略，C++11 的表达式值类别规则规定从函数按值返回的类型是纯右值。因此，它会*尽可能地*被移动构造函数/赋值运算符*自动*使用。不需要之类的。*`std::move`*

 *要做到这一点，您需要这样做：

```
std::string MakeAString() { return std::move(std::string("foo")); }

std::string data = std::move(MakeAString()); 
```

这两个`std::move`调用都需要避免复制。您必须移出临时值并进入返回值，然后移出返回值并进入`data`（再次忽略省略）。

If you think that this is merely a minor annoyance, consider what else rvalue references buy us: perfect forwarding. Without the special reference-collapsing rules, you could not write a proper forwarding function that forwards copy and move semantics *perfectly*. `std::move_ref` would be a real C++ type; you couldn't just slap arbitrary rules like reference collapsing onto it like you can with rvalue references.

At the end of the day, you need some kind of language construct in place, not merely a library type. By making it a new kind of reference, you get to be able to define new rules for what can bind to that reference (and what cannot). And you get to define special reference-collapsing rules that make perfect forwarding possible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:29:59.210

*连接是从右*值移动是安全的（因为（在没有强制转换的情况下）*右值*指的是在其生命周期结束时的对象），所以一个采用*右值*引用的构造函数可以通过窃取 /从引用的对象移动。

 **从 C++ 语言的角度来看，这是连接的结束，但标准库通过不断地*从左*值复制构造和*从右值*`std::move`构造移动，并通过提供帮助函数（例如可以直接选择是移动还是复制特定对象（通过更改导致复制/移动的表达式中对象的值类别）。

移动语义可以在没有*右值*引用的情况下实现，但它会不那么整洁。需要解决一些问题：

1.  如何通过非常量引用捕获*右值？*

2.  如何区分复制的构造函数和移动的构造函数？

3.  如何确保在任何可以安全优化的地方使用移动？

4.  如何编写适用于可移动和可复制对象的通用代码？***

# jquery - 单击按钮多次加载部分视图

> ID：15320751
> 
> 赞同：2
> 
> 时间：2013-03-10T09:26:21.510
> 
> 标签：jquery, ajax, asp.net-mvc-3, entity-framework, razor

背景：我有 2 个实体，课程和模块。一门课程可以有很多模块。在您更新/添加模块的页面上，它基本上是课程的更新页面，其中每个模块都有一个以手风琴形式呈现的部分页面。看截图：

![在此处输入图像描述](../Images/c38e6f88701c118e6948e3ee46c61d30.png)

我有这个来填充现有的模块：

```
@foreach (var module in Model.Modules)
{
    Html.RenderPartial("~/Views/Module/_Update.cshtml", (RocketLabs.Models.Module)module);
} 
```

每次单击“添加模块”时，如何添加部分渲染（带有新模型）？

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:30:14.490

我建议您查看[`Editing a Variable Length List`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)Steven Sanderson 的文章，他在其中说明了如何使用 AJAX 请求到服务器端部分来动态添加新行。这里的想法是订阅 Add 按钮的 click 事件并触发 AJAX 请求到控制器操作，该操作将返回一个包含要编辑的空白行的新部分。

如果你想要一个纯粹的客户端解决方案，他还写[`an article`](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)了可以使用 knockoutjs 实现相同的地方，例如，无需任何 AJAX 请求即可将新条目添加到列表中。

# cppcheck - 我们可以向 CppCheck 添加/删除编码标准吗？

> ID：15320754
> 
> 赞同：0
> 
> 时间：2013-03-10T09:27:40.780
> 
> 标签：cppcheck

我们可以添加一些 Cppheck 中没有定义的编码标准，或者我们可以删除一些我不想检查的 Cpppcheck 中定义的编码标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T13:57:58.930

通过更改某些配置来定制代码标准是不可能的。但是如果你修改Cppcheck的源代码，你就可以做到。

# c++ - long double C++的范围是多少

> ID：15320756
> 
> 赞同：7
> 
> 时间：2013-03-10T09:27:54.010
> 
> 标签：c++, types, numbers, primitive-types

C++中long double的范围是多少？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T09:32:55.937

[`#include <limits>`](http://en.cppreference.com/w/cpp/types/numeric_limits)

```
std::numeric_limits<long double>::min()
//...
std::numeric_limits<long double>::max() 
```

的定义[`long double`](http://en.wikipedia.org/wiki/Long_double)取决于编译器和平台，它至少与 a 相同`double`，因此，它可能需要 8、12（通常也是 80 位）甚至 16 字节（[float128/四倍精度](http://en.wikipedia.org/wiki/Quadruple-precision_floating-point_format)），并且根据其大小有一个范围.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T09:31:47.170

用于[`std::numeric_limits`](http://en.cppreference.com/w/cpp/types/numeric_limits)找出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T09:29:35.130

它依赖于系统（和处理器、编译器和 ABI）。查看`<limits.h>`和`<math.h>`标准`<float.h>`标题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T09:32:49.137

根据 MSDN - [Data Type Ranges (C++)](http://msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.80%29.aspx)和[www.cplusplus.com](http://www.cplusplus.com/doc/tutorial/variables/)，*long double与**double*相同，占用 8 个字节空间，位于 [-1.7E+308, 1.7E+308] 范围内。

还有其他站点，例如[this](http://www.technoexam.com/c-language-lecture-study-notes-tutorials-material/data-types-enum-typedef.asp)，它说*long double*需要 12 - 16 个字节。

# kineticjs - 无法使用 KineticJS 控制图层的画布大小

> ID：15320761
> 
> 赞同：0
> 
> 时间：2013-03-10T09:28:28.943
> 
> 标签：kineticjs

我正在使用 KineticJS，我想使用许多小图层来获得密集绘图的性能，但我发现（使用萤火虫）设置单个图层大小只是不调整它们各自的画布大小：所有创建的画布都有舞台方面！

小舞台（至少没有太多层）这不是问题，但是如果舞台很大，接近一百层，不会有性能问题吗？

换句话说，这是一个想要的功能还是一个错误？

这是一个简单的测试代码：

```
var stage = new Kinetic.Stage({
    container: 'main',
    width: 400,
    height: 400,
});
for (var i=0; i<5; i++) {
    var layer = new Kinetic.Layer({
        x:i*30+10,
        y:i*30+10,
        width:20,
        height:20,
    });
    layer.add( new Kinetic.Rect({
        width: 20,
        height: 20,
        fill: 'red',
    }));
    stage.add(layer);

    // trying to force layer dimensions
    layer.setWidth(20);
    layer.setHeight(20);
}
stage.draw(); 
```

在这里，我在查看 DOM 时看到的内容：

```
<div id="main">
    <div style="position: relative; display: inline-block; width: 400px; height: 400px;" class="kineticjs-content">
        <canvas width="400" style="width: 400px; height: 400px; position: absolute;" height="400"></canvas>
        <canvas width="400" style="width: 400px; height: 400px; position: absolute;" height="400"></canvas>
        <canvas width="400" style="width: 400px; height: 400px; position: absolute;" height="400"></canvas>
        <canvas width="400" style="width: 400px; height: 400px; position: absolute;" height="400"></canvas>
        <canvas width="400" style="width: 400px; height: 400px; position: absolute;" height="400"></canvas>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:20:54.280

**是的，您无法控制图层画布的大小**

是的，您将获得数百层（=数百个全尺寸画布）的巨大性能冲击。

图层的大小始终与其舞台相同——即使您设置了较小的宽度/高度。宽度/高度属性继承自 Kinetic.Node 并且似乎无效。

此外，具有固定宽度的图层将允许形状从该图层“溢出”（该形状不会被剪辑到该图层中）。

**所以……适度**创建的图层非常适合：

*   分层需要类似重绘计划的对象，
*   z 索引，
*   重绘性能优势。

KineticJS 的创建者 Eric Rowell 做了这个压力测试：[http ://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/](http://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/)

他说：

创建 10 个图层，每个图层包含 1000 个形状以创建 10,000 个形状。这极大地提高了性能，因为从图层中移除圆时，一次只需要绘制 1,000 个形状，而不是全部 10,000 个形状。请记住，层数过多也会降低性能。我发现使用 10 层，每层由 1,000 个形状组成，其性能优于 20 层和 500 个形状或 5 层和 2,000 个形状。

# java - 读取资源最终为空

> ID：15320766
> 
> 赞同：0
> 
> 时间：2013-03-10T09:29:18.000
> 
> 标签：java, null, inputstream

我有以下代码

```
System.out.println("Path::: "+path);
InputStream resource = this.getClass().getResourceAsStream(path); 
```

现在的路径是：src/resources/FF/1-Battle.mp3

这是我的文件夹结构：

```
src 
 |- resources
 |    |- FF
 |    |   |- 1-Battle.mp3
 |- folder
 |    |- prog.java   <- this is the place where the code is run 
```

问题是资源（输入流）最终为空

这需要从 jar 文件中工作，所以我需要它与 jar 文件根目录而不是硬盘目录相关，因此我无法创建文件，因为在 jar 文件中，文件在 java.io.File 下不可分类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:32:48.113

为什么你不能用 阅读它`FileInputStream`？像这样的东西： -

```
InputStream fileStream = new FileInputStream(new File(path)); 
```

并确保路径是正确的相对 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:41:33.673

看起来您正试图从 jar 文件中读取 mp3 文件，因为 mp3 文件位于您的 src 文件夹中。尝试这个：

```
 try {
        ClassLoader cl = this.getClass().getClassLoader();            
        InputStream resource = cl.getResource("resources/1-battle.mp3").openStream();
    }
    catch(Exception ug) {
        System.out.println("Failed to load mp3 from jar:" + ug.toString());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:33:06.587

您是否尝试使用程序执行位置的相对路径？像“../../resources/FF/1-Battle.mp3”？

# javascript - 如何从 Bootstrap 获取移动下拉菜单？

> ID：15320772
> 
> 赞同：1
> 
> 时间：2013-03-10T09:30:02.183
> 
> 标签：javascript, twitter-bootstrap

如果您在手机上访问 bootstrap 的主网站，您会注意到右上角有一个下拉菜单。

这是导航栏的一部分。

我在哪里可以找到这个下拉菜单插件？它不在主站点上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:05:28.940

这是响应式导航栏——在手机上显示的变体。要找到它并查看它的用法，请阅读 Carlo 的评论或转到此处：

[http://getbootstrap.com/components/#navbar-default](http://getbootstrap.com/components/#navbar-default)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:37:35.697

请参阅此示例：http: [//twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

记得添加：

```
<script src="../assets/js/bootstrap-dropdown.js"></script> 
```

和CSS：

```
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

这是代码示例：

```
<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Logged in as <a href="#" class="navbar-link">Username</a>
            </p>
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:36:29.740

我相信这是响应式 CSS 的结果`bootstrap-responsive.css`

由于设备宽度检测，它在移动设备上显示不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T14:18:35.677

如果您想专门下载响应式导航栏组件，您可以继续[**自定义 BootStrap**](http://twitter.github.com/bootstrap/customize.html) ，然后选择导航栏、导航、选项卡和药丸，然后在响应部分中您可以选择响应式导航栏选项和其他媒体组件作为根据您的要求。您还将找到 Select jquery Plugins 部分，您必须在其中下载以下插件才能使导航栏按预期工作：- Affix、Dropdowns、collapse

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-16T08:52:29.860

我知道这已经过时了，但我发现自己正在解决同样的问题，并想为其他发现它的人提供一个准系统示例。它基于 Bootstrap 3。

```
<nav class="navbar container" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main_nav_container" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span> <!-- this are literally the "burger lines" and can be styled -->
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
    </div>      

    <!-- Note the ID here is the data-target of the button!! Critically important-->
    <div id="main_nav_container" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
            <li>your menu item here</li>
        </ul>
    </div>
</nav> 
```

# perl - Perl：启动一个 shell 脚本并继续进行而不等待

> ID：15320784
> 
> 赞同：0
> 
> 时间：2013-03-10T09:32:00.370
> 
> 标签：perl, shell

我有一个运行不同 Perl 脚本的系统，我想截取这些脚本的某些参数并将它们传递给我的自定义 shell 脚本。

这就是我所拥有的：

```
#!/usr/bin/microperl
[...]

if ($number) {
    if (&number_is_b($number)) {
        system("touch $STATE_LOCKED1");
        print 1;
    }
    else {
        system("/script/myscript.sh $number");
        print 2;
    } 
}
else {
    [...]
} 
```

我添加的是

```
system("/script/myscript.sh $number"); 
```

这将调用以下传递参数的 shell 脚本`$number`：

```
#!/bin/sh
result=$(wget -qO- http://x.x.x.x/result?qs=$1)
[...] 
```

现在一切正常，但我希望原始 Perl 脚本继续进行，而无需等待 shell 脚本的结果，因为这`wget`可能需要时间。我需要 Perl 脚本自主进行，而不关心 shell 是否成功完成。

是否有可能让它启动，有些人如何忘记它并继续？

你对我该怎么做有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T09:41:46.000

一种可能使其工作的方法是将 & 附加到您的命令以使其在后台运行。不过，这并不总是适用于每个版本的 unix。但值得一试。

```
system("/script/myscript.sh $number &"); 
```

如果这不起作用，我知道还有另外两个选择。一种方法是使用叉子。[http://perldoc.perl.org/functions/fork.html](http://perldoc.perl.org/functions/fork.html)。这种方法可能需要一些努力。

还有一个模块[Proc::Background](http://metacpan.org/pod/Proc%3a%3aBackground)允许您在 windows 和 unix 的后台运行进程。

# movabletype - 带有 PSGI/Plack 的可移动类型 5.2.3 中的警告

> ID：15320787
> 
> 赞同：1
> 
> 时间：2013-03-10T09:32:47.000
> 
> 标签：movabletype, plack

我在 Apache 反向代理后面的 PSGI/Plack 下运行 MT-5.2.3。服务器是 Starman。Plack 日志显示每个呼叫的警告：

> 警告：自动将 Plack::App::Directory 实例转换为 PSGI 代码引用。如果您在每个请求中都看到此警告，您可能需要在 PSGI 文件中显式调用 to_app() 即 Plack::App::Directory->new(...)->to_app。

我应该怎么做才能解决这个问题？AFAICS，股票 mt.psgi 已经调用`MT::PSGI->to_app()`.

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:51:05.963

Six Apart[报告说，这个问题](https://movabletype.fogbugz.com/default.asp?109552)在[最近对 Movable Type 项目的提交中得到了](https://github.com/movabletype/movabletype/commit/732c3fed7e7e939709050bdddfb1c66802f4c1a8)解决，该项目将成为 Movable Type 未来版本的一部分。

我一般不建议出于生产目的运行未发布版本的 Movable Type，但我认为修补 MT::PSGI 以消除这些警告是可以的。

# c++ - 如何在不将其声明为全局变量的情况下全局使用变量？

> ID：15320794
> 
> 赞同：1
> 
> 时间：2013-03-10T09:32:59.407
> 
> 标签：c++, variables

我有这样的 switch 语句

```
switch(option)
{
case 1:
{
    int randomVariable;
}
case 2:
{

}
case 3:
{
\\ I want to use randomVariable here but it is not letting me since it is not in the same scope
}

}
} 
```

关于如何解决这个问题的任何想法？请注意，`randomVariable`必须在`case 1:`and下声明它`randomVariable`是一个数组。请尽量坚持使用标准库，请不要使用向量，因为这是一个项目，并且在本课程中根本没有讨论向量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:43:26.030

您能够访问变量的区域称为其***作用域***。对于局部非静态变量，此范围的边界用大括号 ( `{`... `}`) 定义，因此：

```
{
    ...
    int a = 0;
    switch (option)
    {
        case 1:
        {
            int b;
            a = 2;
        } // <-- the scope of b ends here
        ...
    }
} // <-- the scope of a ends here 
```

> *请注意，`randomVariable`必须在其中声明，`case 1:`因为这是创建数组的选项*

由于您使用 C++ 编程，而不是 C 样式的数组 use [`std::vector`](http://www.cplusplus.com/reference/vector/vector/)，它是在连续内存块中保存元素的容器，就像数组一样，但它的大小可以改变：

```
#include <vector>
...
{
    std::vector<int> myVector;
    switch (option)
    {
        case 1:
        {
            int size;
            // value retrieved in run-time is assigned into size here
            myVector.resize(size, 0);
        }
        case 2:
        {
            // you can use your vector here:
            if (myVector.size() > 3)
                myVector[2] = 7;
        }
        ...
    }
} // <-- end of myVector's scope 
```

在此示例中，[`myVector.resize(size, 0);`](http://www.cplusplus.com/reference/vector/vector/resize/)调整 vector 内部使用的内存大小，使其足以容纳`size`元素，如果其大小已增加，它还会将新元素插入此内存并将它们初始化为`0`. 这里重要的是，这`myVector`是一个具有自动存储持续时间的对象，这意味着当执行超出其定义的范围时，内存会被自动清理。这使您免于在使用动态分配的 C 样式数组的情况下必须处理的丑陋的内存管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:39:15.087

根据您的限制，它必须在案例 1 中初始化，然后只需将变量设为指针并`variable = new something();`在案例 1 中使用。

顺便说一句，这个范围与“全局”无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T09:39:18.540

**编辑**：

在您发表评论之后，对于您的用例，您可能想要这样的东西：

```
int * myArr = 0;
int myArrSize = 10;

switch (option) {
  case 1:
    if (myArr != 0) {
      // Clean up memory if we are re-initializing
      delete [] myArr;
    }
    myArr = new int[myArrSize];
    break;
  case 2:
    break;
  case 3:
    int test = myArr[1];
    break;
}

// Clean up memory when we are done with the array
delete [] myArr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T09:35:12.143

变量的范围仅在它定义的块内，因此不可能在一个范围内定义变量，即在范围内`case 1:`并在范围外访问它，除非您打算在没有显式块的情况下将 1 和 3 的情况组合在一起`{ ... }`.

在整个 switch 语句中可见的范围内定义`randomVariable`，以便任何情况下都可以访问此变量。

```
{
    int randomVariable;
    switch(option)
    {
        case 1:
            {

            }
        case 2:
            {

            }
        case 3:
            {
                \\ I want to use randomVariable here but it is not letting me since it is not in the same scope
            }

    }
} 
```

开关上方的范围可以是一个函数，也可以是另一个块，具体取决于您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T09:49:08.587

干得好...

*   创建一个新类（例如，superClass）。
*   使用 getter 和 setter 方法创建一个名为 randomVariable 的属性字段存根。
*   将该属性设为静态。（这样它的值就可以在全球范围内使用，即使对象不同）。
*   在放置 switch 语句的类中继承此类。
*   现在，您可以通过设置新值或旧值来初始化和使用随机变量。

希望这会有所帮助..!!!

# macos - 如何使用 AppleScript 获取推文

> ID：15320795
> 
> 赞同：0
> 
> 时间：2013-03-10T09:33:03.880
> 
> 标签：macos, twitter, applescript

我想获取 AppleScript 中的最新推文。但是，“状态”变量无法保存。如何存储推文状态对象？

这是工作 ：

```
tell application "Twitter"
  set tw to text of item 1 of statuses of home timeline of current account
end tell 
```

它不工作：

```
tell application "Twitter"
  set tw to item 1 of statuses of home timeline of current account
  set txt to text of tw
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T11:23:12.017

今天有点晚了，但看看我的应用程序“ [Twitter Scripter](http://www.mousedown.net/mouseware/TwitterScripter.html) ”，它在 Mac AppStore 上免费提供。

这是一个不露面的后台应用程序，旨在使从 AppleScript 访问 Twitter API 变得微不足道。它支持 OS X (10.8+) 中的原生 Twitter 支持，因此您无需自己处理任何身份验证。您可以从 twitter API 检索响应作为结构化 AppleScript 记录。

例如：

```
tell app "Twitter Scripter"
  set myTwitterAccount to item 1 of (available accounts) as string
  -- User timeline: This function retrieves the Tweets for a given user name
  fetch user timeline for username "mousedownsoft" using account myTwitterAccount with excluding replies and including retweets
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:52:47.660

Twitter.app 的 AppleScript 支持有些奇怪，但如果您只需要获取多个属性，则可以使用 tell 块或并行赋值。

```
tell application "Twitter"
    tell item 1 of statuses of home timeline of current account
        set t to text
        set u to url
        properties
    end tell
    -- set {t, u} to {text, url} of item 1 of statuses of home timeline of current account
end tell 
```

或者您可以改用 API 吗？如果您在[dev.twitter.com](https://dev.twitter.com)`sudo gem install twitter`上运行和注册应用程序，这应该可以工作。

```
require 'rubygems'
require 'twitter'

Twitter.configure { |config|
    config.consumer_key = ""
    config.consumer_secret = ""
    config.oauth_token = ""
    config.oauth_token_secret = ""
}

p Twitter.home_timeline.first.text
p Twitter.home_timeline.first.inspect 
```

# sql - 在访问查询中搜索过滤的重复项

> ID：15320798
> 
> 赞同：0
> 
> 时间：2013-03-10T09:33:53.037
> 
> 标签：sql, vba, ms-access-2003

我在 MSACCESS 2003 中有以下问题

我有一个名为 A_Gravur 的查询，其中 3 列 SP1、SP2、SP3

现在我想搜索重复项。

## 查询 A_Gravur：

## SP1 | SP2 | SP3

64 | CB75000 | 3

64 | 空| D

70 | CB70010 | 1

70 | CB70010 | 1

119 | CB70050 | 5

119 | 空| D

165 | S15002 | 沙尔特

165 | S15002 | 沙尔特

194 | R70034 | 波蒂

194 | R10023 | 电位器

196 | S10063 | 沙尔特

196 | S10063 | 沙尔特

197 | S10063 | 沙尔特

198 | S10070 | 3

199 | CB75000 | 5

* * *

首先：从 A_Gravur 过滤 SP1 中的重复项

## 结果：

## SP1 | SP2 | SP3

64 | CB75000 | 3

64 | 空| D

70 | CB70010 | 1

70 | CB70010 | 1

119 | CB70050 | 5

119 | 空| D

165 | S15002 | 沙尔特

165 | S15002 | 沙尔特

194 | R70034 | 波蒂

194 | R10023 | 电位器

196 | S10063 | 沙尔特

196 | S10063 | 沙尔特

* * *

在第一次重复搜索结果太多了！它应该像这样过滤：过滤器（如果 SP3 中的一个结果是字母 D，则不显示它）过滤器（如果 [SP1 和 SP2] = [下一条记录中的 SP1 和 SP2] 然后不显示它

## 第二：从 A_Gravur 过滤 SP2 中的重复项

## SP1 | SP2 | SP3

64 | CB75000 | 3

199 | CB75000 | 5

196 | S10063 | 沙尔特

196 | S10063 | 沙尔特

197 | S10063 | 沙尔特

* * *

我的最终结果应该是这样的，它是带有过滤器的 SP1 重复搜索 + SP2 重复搜索的结果

* * *

## SP1 | SP2 | SP3

194 | R70034 | 波蒂 470k

194 | R10023 | 电位器

196 | S10063 | 沙尔特

197 | S10063 | 沙尔特

64 | CB75000 | 3

199 | CB75000 | 5

* * *

知道如何解决我的问题吗？函数还是 sql 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:37:28.410

我认为这个 SQL 查询会给你你想要的：

```
SELECT SP1, SP2, SP3
  FROM A_Gravur
  WHERE (SP1 IN
    (SELECT SP1
      FROM A_Gravur
      WHERE SP3<>'D'
      GROUP BY SP1
      HAVING COUNT(*)>1)
  OR SP2 IN
    (SELECT SP2
      FROM A_Gravur
      WHERE SP3<>'D'
      GROUP BY SP2
      HAVING COUNT(*)>1))
  AND SP3<>'D'
  ORDER BY SP1, SP2; 
```

[` 你可以在http://sqlfiddle.com/#!2/7351d/16](http://sqlfiddle.com/#!2/7351d/16)玩这个

为了消除完全重复的行，它变得更加复杂：

```
SELECT SP1, SP2, SP3
  FROM A_Gravur
  WHERE (SP1 IN
    (SELECT SP1
      FROM A_Gravur
      WHERE SP3<>'D'
      GROUP BY SP1
      HAVING COUNT(*)>1)
  OR SP2 IN
    (SELECT SP2
      FROM A_Gravur
      WHERE SP3<>'D'
      GROUP BY SP2
      HAVING COUNT(*)>1))
  AND CONCAT(CAST(SP1 AS CHAR),SP2,SP3) NOT IN
    (SELECT CONCAT(CAST(SP1 AS CHAR),SP2,SP3)
      FROM A_Gravur
      WHERE SP3 <> 'D'
      GROUP BY CONCAT(CAST(SP1 AS CHAR),SP2,SP3)
      HAVING COUNT(*)>1)
  AND SP3<>'D'
  ORDER BY SP1, SP2; 
```

这可以在[http://sqlfiddle.com/#!2/7351d/35找到](http://sqlfiddle.com/#!2/7351d/35)

请注意，这`CONCAT(CAST(SP1 AS CHAR),SP2,SP3)`是 SQL Fiddle 的 MySQL 语法。

在 MS Access 中，可以使用`Format(SP1) & SP2 & SP3`

# jquery - 如何使用 jQuery 包含 HTML 文件？

> ID：15320801
> 
> 赞同：19
> 
> 时间：2013-03-10T09:34:00.163
> 
> 标签：jquery, html

我想让我的代码分开，所以我决定将每个代码分成`div`html 文件。每个 HTML 文件都有一些 jQuery 点击事件。我有 2 个文件`index.html`和`menu.html`.

问题是我必须在两个文件中都包含 jQuery 库才能使其工作。

有什么方法可以让我一次包含库并让它在两个文件上都工作？我试图仅将库包含在索引页面中，但是菜单单击不起作用。

我`menu.html`通过 iframe 包含了文件。

```
<iframe src="left-menu.html"></iframe> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-10T09:38:49.597

您可以使用 jQuery方法添加`menu.html`到 DOM 中。这样创建的 jQuery 实例也适用于从.`index.html`[`load()`](http://api.jquery.com/load/)`index.html``menu.html`

例如，`index.html`您可以这样做：

```
$(document).ready(function() {
    $('#some-menu').load('some-local-path/menu.html');
}); 
```

请注意，我们如何`$('#some-menu')`在`index.html`其中加载`menu.html`. 还需要注意的是，由于[same-origin-policy](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)，作为该`load()`方法的一部分执行的 AJAX 请求仅适用于相同域、协议和端口中的文件（除非您使用的是[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-05T15:21:38.160

在您的 HTML 中：

```
<body>
<header>
     <div data-includeHTML="_HeaderPartial.html"></div>
</header>
<main>
    <div>
        This is the main content, from the index file
    </div>
</main>
<footer>
    <div data-includeHTML="_FooterPartial.html"></div>
</footer>
<script>
    $(document).ready(function () {
        $("div[data-includeHTML]").each(function () {                
            $(this).load($(this).attr("data-includeHTML"));
        });
    });
</script>
</body> 
```

在单独的文件“_HeaderPartial.html”中：

```
<div>
    <h1>This is the Header from its _Partial file</h1>
</div> 
```

在单独的文件“_FooterPartial.html”中：

```
<strong>And this is from the footer partial file</strong> 
```

结果：

## 这是其 _Partial 文件的标题

这是主要内容，来自索引文件

**这是来自页脚部分文件**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-14T07:13:28.980

我有另一个解决方案。它似乎使代码更漂亮更短。首先定义包含函数。

```
var include = function(beReplacedId,url){
jQuery.get(url,function(data){
    jQuery(beReplacedId).replaceWith(data);

}); 
```

}

在 html 页面上使用 onload 来触发包含这样的。

```
<img id="partTopicDetail" onload="include(this,this.id+'.html')" src="img/any-image.png" > 
```

编译器运行完成后，它将替换 img 标签并加载您需要的内容。通过上述技巧，我可以附加到 index.html 中的任何位置

# google-places-api - 如何使用 Places API 在附近搜索查询中提供多个关键字

> ID：15320804
> 
> 赞同：1
> 
> 时间：2013-03-10T09:34:20.073
> 
> 标签：google-places-api

我正在尝试使用 Java 中的附近搜索来返回符合过滤要求的地点列表。并说在被退回的企业中，有 3 家企业的名称如下： Harbour food center City Restaurants Harbour & City Foods

如何使用关键字过滤结果，以便只返回同时包含 Harbour 和 City 的地方？我尝试在关键字中使用“Harbour&City”，但这不起作用。注意我不能使用文本搜索，因为它不会重新调整我添加的位置。

```
public PlacesList performNearbySearch(double lat, double lng, String keyword, String    types) throws Exception {
  try {
   System.out.println("Perform Search ....");
  System.out.println("-------------------");
  HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
  HttpRequest request = httpRequestFactory.buildGetRequest(new GenericUrl(PLACES_NEARBY_URL));
  request.getUrl().put("key", API_KEY);
  request.getUrl().put("location", lat+","+lng);
  request.getUrl().put("keyword", "Harbour&City");
  request.getUrl().put("types", types);
  request.getUrl().put("radius", "2000");
  request.getUrl().put("sensor", "false");

  PlacesList places = request.execute().parseAs(PlacesList.class);
  System.out.println("STATUS = " + places.status);
  for (Place place : places.results) {
  System.out.println(place);
  }
  return places;

 } catch (HttpResponseException e) {
 System.err.println(e.getMessage());
 return null;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T19:12:03.050

您可以使用下面的脚本来查看它，

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>What's Near Me</title>
  <meta name="description" content="Find what's near you">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="http://www.gurchet-rai.net/places/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://www.gurchet-rai.net/places/css/style.css">
</head>
<body>

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">NearMe</a>
            <!--
            <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">                        
                <i class="icon-chevron-down"></i>
            </button> -->
            <form id="search" class="navbar-form form-search" action="#">                    
                <div class="input-append">
                    <input id="query" type="text" class="search-query" placeholder="Where to?" >
                    <button type="submit" class="btn"><i class="icon-search"></i></button>

                </div>       
                <!--
                <div class="nav-collapse" style="float: right">
                    <div id="view-type" class="btn-group pull-right" data-toggle="buttons-radio">
                        <button id="map-view" type="button" class="btn active">Map View</button>
                        <button id="list-view" type="button" class="btn">List View</button>
                    </div>
                </div>
                -->
            </form>
        </div>
    </div>
</div>

<div id="content">
<div id="padded-content">
<div id="location-details"></div>
<div id="map_canvas" style="width: 100%; height: 100%"></div>
</div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://www.gurchet-rai.net/places/css/bootstrap.min.css"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>

<script type="text/javascript">

        var loc;
        var map;
        var service;
        var infoWindow;
        var overlays = [];
        var resultList = [];
        var isMobile = $(window).width < 767;

                        loc = new window.google.maps.LatLng(29.750824, -95.362151);
                        //new google.maps.LatLng(coords.latitude, coords.longitude);
                        map = new google.maps.Map(document.getElementById("map_canvas"), {
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            mapTypeControl: false,
                            center: loc,
                            zoom: 13
                        });  

                        service = new google.maps.places.PlacesService(map);                        
                        infoWindow = new google.maps.InfoWindow();            

        function plotResultList(){
            var iterator = 0;                  
            for(var i = 0; i < resultList.length; i++){
                setTimeout(function(){
                    var lat = resultList[iterator].geometry.location.Za;
                    var lng = resultList[iterator].geometry.location.Ya;
                    var name = resultList[iterator].name;
                    var addr = resultList[iterator].formatted_address;
                    var reference = resultList[iterator].reference;

                     var image = {
                                    url:resultList[iterator].icon,
                                    size: new google.maps.Size(71, 71),
                                    origin: new google.maps.Point(0, 0),
                                    anchor: new google.maps.Point(17, 34),
                                    scaledSize: new google.maps.Size(25, 25)
                                  };

            var marker = new google.maps.Marker({
                        position: resultList[iterator].geometry.location,
                        map: map,
                        title: name,
                        icon: image,
                        animation: isMobile? 'undefined' : google.maps.Animation.DROP
                    });
                    overlays.push(marker);

                    google.maps.event.addListener(marker, 'click', function() {
                        infoWindow.close();
                        var request = {
                            reference: reference
                        };

                        service.getDetails(request, function(place, status){
                            var content = "<h6>" + name + "</h6>";
                            if(status == google.maps.places.PlacesServiceStatus.OK){    
                                if(typeof place.rating !== 'undefined'){
                                    var badgeType = '';
                                    if (place.rating < 2){
                                        badgeType = 'badge-important';
                                    } else if (place.rating >= 2 && place.rating <= 3){
                                        badgeType = 'badge-warning';
                                    } else {
                                        badgeType = 'badge-success';
                                    }
                                    content += "<p><small>Rating: <span class='badge " + badgeType + "'>" + place.rating + "</span></small></p>"; 
                                }    

                                if(typeof place.formatted_address !== 'undefined'){
                                    content += "<br><small>" + place.formatted_address + "</small>";
                                }

                                if(typeof place.formatted_phone_number !== 'undefined'){
                                    content += "<br><small><a href='tel:" + place.formatted_phone_number + "'>" + place.formatted_phone_number + "</a></small>";                                 
                                }

                                if(typeof place.website !== 'undefined'){
                                    content += "<br><small><a href='" + place.website + "'>website</a></small>";

                                }
                            }                            

                            infoWindow.setContent(content);
                            infoWindow.open(map, marker);         
                        });
                    });
                    iterator++;
                }, isMobile? 0: (i * 75));
            }
        }

            var query = 'airports,hospitals,atm';//$('#query').val();
            //alert(map);         
            var request = {
                location: map.getCenter(),
                radius: '5000',
                query: query            
            };

            service.textSearch(request, function(results, status, pagination){
                for(var i = 0; i < overlays.length; i++){                   
                    overlays[i].setMap(null);
                }
                resultList.length = 0;
                overlays.length = 0;
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    resultList = resultList.concat(results);
                    plotResultList();
                }
            });

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T12:04:22.293

使用 Google place API，进行布尔搜索似乎是这样的：

```
var request = {
            location: /*your location*/,
            radius: /*your radius*/,              
            keyword: "(cinema) OR (theater)"           
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T12:49:46.450

尝试使用`types=hospital|pharmacy|doctor`

**注意：**使用多个参数将继续返回结果，直到*2017 年 2 月 16 日*，但我们不建议在搜索请求中使用多个类型。在该日期之后，将不再支持具有多种类型的请求。

# workflow - 在 Alfresco Community 4.0.e 中部署新的工作流定义最直接的方法是什么？

> ID：15320807
> 
> 赞同：6
> 
> 时间：2013-03-10T09:34:34.093
> 
> 标签：workflow, alfresco

我很难在 Alfresco Community 4.0.e 中部署新的工作流定义。在社区版中，Alfresco 没有任何用户界面。我也找不到与此相关的任何 Alfresco 附加组件。我看过很多讨论这个问题的页面，例如：

*   [在露天工作流控制台中部署我自己的工作流的困难](https://stackoverflow.com/questions/11601328/difficulties-in-deploying-my-own-workflow-in-alfresco-workflow-console)
*   [将新的工作流程添加到 Alfresco 共享中](https://stackoverflow.com/questions/5963360/add-new-workflow-into-alfresco-share)
*   [https://wiki.alfresco.com/wiki/Custom_Share_Workflow_UI](https://wiki.alfresco.com/wiki/Custom_Share_Workflow_UI)
*   [http://wiki.alfresco.com/wiki/Workflow_Console](http://wiki.alfresco.com/wiki/Workflow_Console)
*   [http://wiki.alfresco.com/wiki/Dynamic_Models#Dynamic_workflow_process_definitions](http://wiki.alfresco.com/wiki/Dynamic_Models#Dynamic_workflow_process_definitions)
*   [http://www.jorambarrez.be/blog/2011/01/05/adhoc-workflow-with-activiti-kickstart/](http://www.jorambarrez.be/blog/2011/01/05/adhoc-workflow-with-activiti-kickstart/)
*   [http://www.jorambarrez.be/blog/2012/11/28/from-design-to-execution-in-a-matter-of-minutes/](http://www.jorambarrez.be/blog/2012/11/28/from-design-to-execution-in-a-matter-of-minutes/)
*   [http://wiki.alfresco.com/wiki/Workflow_on_Share](http://wiki.alfresco.com/wiki/Workflow_on_Share)

但是，我还不能让它工作。由于 BPMS 是 Alfresco 的关键子系统，我几乎可以肯定我没有使用正确的指令。

在 Alfresco 4.0.e 中部署新的工作流定义最直接的方法是什么？是否有任何明确的分步说明，对于傻瓜:) 我可以遵循？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T17:07:19.980

我认为您错过了最重要的 wiki： [http ://wiki.alfresco.com/wiki/WorkflowAdministration](http://wiki.alfresco.com/wiki/WorkflowAdministration)

在这里您可以为 JBPM 安装 Eclipse 插件。确保启用这些属性：

```
### BPM Engine ###
system.workflow.engine.jbpm.enabled=true
system.workflow.engine.jbpm.definitions.visible=true
system.workflow.deployservlet.enabled=true 
```

如果您正确配置插件，则可以自动部署工作流。（部署模型时还是需要重启）

如果您想遵循 activiti 路径，那么： [http ://wiki.alfresco.com/wiki/Workflow_with_Activiti](http://wiki.alfresco.com/wiki/Workflow_with_Activiti)

几乎相同的路径，例如安装 Eclipse 插件或使用另一个 BPMN20 设计器。唯一不同的方面是您需要手动部署工作流（导出为 .bar 文件并在 Activiti 管理控制台中导入）

# android-webview - 我的模拟器不加载网页

> ID：15320820
> 
> 赞同：0
> 
> 时间：2013-03-10T09:36:11.547
> 
> 标签：android-webview

我有一个与 webview 相关的问题。所以我在我的 asstes 文件夹中创建了一个名为 index.html 的文件，如下所示

资产->www->index.html

这是我的 index.html 文件

```
<!DOCTYPE html>
<html>
  <head>
  <title>Page Title</title>
  <link rel="stylesheet" href="/home/namiq/MyWorks/jquery.mobile-1.3.0/jquery.mobile-1.3.0.css" />
  <script src="/home/namiq/MyWorks/jquery-1.9.1.js"></script>
  <script src="/home/namiq/MyWorks/jquery.mobile-1.3.0/jquery.mobile-1.3.0.js"></script>
</head>
<body>

<div data-role="page">

  <div data-role="header">
    <h1>Page Title</h1>
  </div>

  <div data-role="content">
    <p>Page content goes here.</p>   
  </div>

  <div data-role="footer">
    <h4>Page Footer</h4>
  </div>
</div>

</body>
</html> 
```

这是我的 MainActivity.java 文件

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView view = (WebView)findViewById(R.id.webView1);
    view.getSettings().setJavaScriptEnabled(true);
    view.loadUrl("file:///home/namiq/MyWorks/examples/WebApp/assets/www/index.html");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

它在网络浏览器中运行良好。但是当我在我的模拟器中运行它时，它说

**位于*file:///home/namiq/MyWorks/examples/WebApp/assets/www/index.html*的网页可能暂时关闭，或者它可能已永久移动到新地址**

我还向我的清单添加了 inretnet 权限。任何人都可以帮助我提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:47:17.543

您不是在尝试加载网页，而是在尝试从本地计算机加载一个恰好是 .html 文件的文件。

也许用于访问本地文件（您拥有的）的机制与用于访问 URL（您正在使用的功能）的机制不同。

因此，将您的测试页面 (index.html) 放在实际服务器后面，并将该真实 URL 传递给您的代码，而不是文件路径。

或者只是将 URL 更改为真实的 URL（例如 www.google.com），看看它是否“有效”。如果是这样，您将无法使用该功能加载本地文件。

# javascript - 在没有堆栈溢出的情况下在 javascript 中执行无限动画的模式

> ID：15320831
> 
> 赞同：3
> 
> 时间：2013-03-10T09:37:46.757
> 
> 标签：javascript, html, animation, canvas, infinite

我有以下模式来重复动画（本身由 x 帧组成）， t 次：

```
sprite.prototype.loop = function(t,animation_name,frame_delay) {
    if(t > 0) {
        function next_run() {
            this.loop(t-1,animation_name,frame_delay);
        } 
        this.run(animation_name,frame_delay,next_run);
      }
    };

sprite.prototype.run = function(animation_name,frame_delay,frame_count,callback) {
    frame_count ||= 0;
    var s = this;
    if(frame_count < this.paths[animation_name].length) { // x frames
        setTimeout( function () {
            s.blit(s.paths[animation_name][frame_count]);
            s.run(animation_name,frame_delay,frame_count+1);
            }, frame_delay );
        }
    } else {
        if(!!callback) callback();
    }

super_mario.loop(10000,'mushroom_death',40); 
```

显然，如果 x*t 大于最大堆栈深度，就会发生堆栈溢出。

**问题**：这种模式可以扩展到无限次运行动画的情况，还是有更正确的方法来做无限循环的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:03:51.907

`setTimeout`不继承调用者的堆栈帧，所以你只需要担心`t`这里，虽然没有理由不能简单地迭代编写，这样堆栈大小就不是问题了：

```
sprite.prototype.loop = function(t, animation_name, frame_delay){
    while (t--){
        this.run(animation_name, frame_delay);
    }
}; 
```

但是，感觉这段代码并没有按照您的预期进行。这实际上是`t`并行运行动画时间，因为`setTimeout`调用`run`会相互交错。我不确定我能理解这将如何产生预期效果，因为每个`t`延迟回调都会在此处执行完全相同的`blit`操作，因此不会有明显的区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:05:02.263

我会重写你的`loop`函数如下：

```
sprite.prototype.loop = function (t, animation_name, frame_delay) {
    var s = this;
    var frames = s.paths[animation_name];
    var x = frames.length;

    for (var i = 0; i < t; i++) {
        for (var frame_count = 0; frame_count < x; frame_count++) {
            setTimeout(function (frame_count) {
                s.blit(frames[frame_count]);
            }, (i * x + frame_count) * frame_delay, frame_count);
        }
    }
}; 
```

就是这样。不会有任何堆栈溢出，因为没有递归。

**编辑：**正如刚才提到的，您的代码还有另一个问题。两个相同的帧之间不会有任何延迟，因为您*实际上*同时调用`setTimeout`了所有相同的帧。因此，无论 的值是多少，动画都只会出现一次`t`。

# mapreduce - couchdb map/reduce 视图：只计算最近的项目

> ID：15320834
> 
> 赞同：1
> 
> 时间：2013-03-10T09:38:10.663
> 
> 标签：mapreduce, couchdb

我有以下文件。关键字的时间戳位置。

```
{
  _id: willem-aap-1234,
  keyword:aap,
  position: 10,
  profile: { name: willem },
  created_at: 1234
},
{
  _id: willem-aap-2345,
  keyword:aap,
  profile: { name: willem },
  created_at: 2345
},
{
  _id: oliver-aap-1235,
  keyword:aap,
  profile: { name: oliver },
  created_at: 1235
},
{
  _id: oliver-aap-2346,
  keyword:aap,
  profile: { name: oliver },
  created_at: 2346
} 
```

可以通过以下方式查找每个 profile.name 的最新关键字：

```
map: function(doc) {
if(doc.profile)
    emit(
        [doc.profile.name, doc.keyword, doc.created_at], 
        { keyword : doc.keyword, position : doc.position, created_at: doc.created_at }
    );
}

reduce: function(keys, values, rered) {
  var r = values[0];
  for (var i=1; i<values.length; i++)
    if (r.created_at < values[i].created_at)
      r = values[i];
  return r;
} 
```

然后查询数据库

```
reduce : true,
group_level : 2,
startkey : [aname],
endkey : [aname,{}] 
```

这为我提供了名称为 aname 的配置文件的最新文档。

但是现在我想计算每个关键字的所有最新文档，并对这些位置求和。我无法解决这个问题，试图仅使用 map/reduce 来做到这一点。

我的用户案例是：

1.  查找每个 profile.user、每个关键字的最新文档
2.  计算每个关键字的唯一 profile.name 的数量
3.  对每个关键字的最新文档的位置求和

我可以使它工作的唯一方法是使用以下列表函数：

```
function(head, req) {
  var row;
  var counts = {};
  while (row = getRow()) {
    var v = row.value;
    var k = v.keyword;

    if (v.position) {
      if (!counts[k])
        counts[k] = { 
          position : 0,
          count : 0
        }
      counts[k].position += v.position;
      counts[k].count++;
    }
  }

  return JSON.stringify(counts);
} 
```

谁能想到一个更好的方法来做到这一点，只使用 map/reduce？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:50:48.747

有些部分的含义还是有点模糊（例如，什么是“位置”？）。

但从纯粹形式的角度来看，似乎您的列表创建了一个索引，`keyword` 而您的地图创建了一个索引`[profile, keyword, timestamp]`。

如果你真的需要不同的索引，那么你需要几张地图，每个索引一张。唯一的例外是当您已经有一个地图时`[a,b,c]`，您可以更改“组级别”并获取其他两个索引：`[a,b]`和`[a]`。

# c++ - 是否可以将 boost::apply_visitor 的返回值存储在成员变量中？

> ID：15320835
> 
> 赞同：0
> 
> 时间：2013-03-10T09:38:17.480
> 
> 标签：c++, boost, boost-variant, apply-visitor

是否可以将返回值存储`boost::apply_visitor`在类的成员变量中？
我需要让`Test::Do`功能正常工作，但不知道如何。

```
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;
using namespace boost;

class times_two_generic
    : public boost::static_visitor<>
{
public:

    template <typename T>
    void operator()( T & operand ) const
    {
        operand += operand;
    }

};

class Test
{
public:
   Test(){
      times_two_generic visitor;
      //mAppliedVisitor = apply_visitor(visitor);
   }
   ~Test(){}
   void Do(variant<int, string> &v)
   {
      //mAppliedVisitor(v);   // Is it possible to store the value of apply_visitor 
                           // in mAppliedVisitor only once in the constructor of Test? 
                           // and only call mAppliedVisitor member whenever needed.
   }

private:
   // boost::apply_visitor_delayed_t<times_two_generic> mAppliedVisitor;
};

int main(int argc, char **argv) 
{
    variant<int, string> v = 5;
    times_two_generic visitor;

    cout << v << endl;

    apply_visitor(visitor)(v); // v => 10
    boost::apply_visitor_delayed_t<times_two_generic> appliedVisitor = apply_visitor(visitor);
    appliedVisitor(v); // v => 20

   Test t;
   t.Do(v);

    cout << v << endl;
    return 0;
} 
```

# c# - 检测启动的进程是否已关闭

> ID：15320836
> 
> 赞同：2
> 
> 时间：2013-03-10T09:38:21.803
> 
> 标签：c#, process.start

c# 我想检测启动的程序是否已关闭。我目前正在使用命令启动它

```
 Process.Start(Environment.CurrentDirectory + @"\Card Downloader.exe"); 
```

有没有人有办法做到这一点，也许使用不同的启动器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T09:43:24.363

该`Process.Start`方法返回一个[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)实例。在这种情况下，您可以使用一些可用的方法，例如[`WaitForExit`](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)或订阅[`Exited`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)将在此过程结束时触发的事件。

```
var process = Process.Start(Environment.CurrentDirectory + @"\Card Downloader.exe"); 
process.Exited += (sender, e) =>
{
    // this will be called when the process exists
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T09:44:29.903

Process.Start() 方法返回一个 Process 对象。将其分配给一个变量并调用 WaitForExit() on。

来源：http: [//msdn.microsoft.com/en-us/library/fb4aw7b8.aspx](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T09:44:38.193

您可以使用`Process.Exit`事件

```
var myProcess = new Process();
...
myProcess.Exited += new EventHandler(myProcess_Exited);
myProcess.Start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-23T14:59:16.957

您需要订阅流程退出事件，还要将 EnableRaisingEvents 标志设置为 true。

```
var process = Process.Start(Environment.CurrentDirectory + @"\Card Downloader.exe");
process.EnableRaisingEvents = true;
process.Exited += (sender, e) =>
{
    ...
}; 
```

[根据MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.enableraisingevents?view=netcore-3.1)，如果您不设置该标志，则仅当进程在用户执行对 HasExited 属性的调用期间或之前关闭时才会引发事件。

# c++ - 如何在 C++ 中添加属性以存在 IXMLDOMNode？

> ID：15320838
> 
> 赞同：1
> 
> 时间：2013-03-10T09:38:45.437
> 
> 标签：c++, xml

你能给我一个例子来说明如何`IXMLDOMNode`在 C++ 中添加一个存在的属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:48:15.853

我读取了属性的名称和值，然后执行以下操作：

```
CComPtr<IXMLDOMElement> pElement;
 hr = pNodeSrc->QueryInterface(IID_IXMLDOMElement,(void**)&pElement);
 hr = pElement->setAttribute(name,val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:06:03.170

我从未使用过它，但阅读参考资料（[这里是链接](http://msdn.microsoft.com/en-us/library/windows/desktop/dd875276%28v=vs.85%29.aspx)）我认为您可以使用`IXMLDOMDocument::createAttribute`方法。

```
HRESULT createAttribute(
    BSTR bstrName,
    IXMLDOMAttribute** ppAttribute
); 
```

# javascript - 外部 javascript 文件无法在所有内容之上添加 div

> ID：15320844
> 
> 赞同：0
> 
> 时间：2013-03-10T09:39:22.193
> 
> 标签：javascript, html, css

我正在制作将 div 添加到某些页面（作为外部脚本）的 javascript 程序。问题是我无法访问此页面的 html 代码 - 我的客户只是放在`/script src=""/`上面，我被卡住了：
我的 div 必须从页面底部滑动，所以我使用的是固定位置，这里是- 我的 div 隐藏在页面的 flash 元素下方。

所以我需要的是：
无论页面看起来如何，布局中都有什么 - 我必须让我的新滑动 div 显示在所有内容上，而无需对页面本身的 html 代码进行任何更改。

不知道。不知道页面是什么样子的 -`position:relative`我猜不能使用。只是闪光灯在我的 div 上。

//只有在 Chrome 中，我的 div 才超过 flash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:57:52.320

这是由 IE 呈现某些元素和插件的方式引起的。有关详细信息，请参阅[在 IE 中通过 Flash 插入 div](https://stackoverflow.com/questions/3147216/insert-div-over-flash-in-ie)。

您遇到的挑战是您无法编辑页面的来源。我之前也参与过类似的案例，当时我们找到的唯一解决方案就是将 div 替换为`div`，`iframe`然后将 div 的内容放在那里。

# amazon-web-services - 设置 Amazon EC2 和 Amazon RDS

> ID：15320849
> 
> 赞同：0
> 
> 时间：2013-03-10T09:39:59.597
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

我们是 Amazon WS 业务和技术的新手，非常感谢一些帮助和指导。只是一个更高层次的概述而不是详细的解释就可以了。

**这就是问题所在**。

我们运行一个约会网站，并希望从我们的 VPS 转移到 Amazon EC2（一个实例）和 RDS。我们还想安装一个名为 aspnetdating 的新约会脚本，它最初是为 Windows 服务器设计的。代码用 C# 编写并使用 ASP.NET 4.0。

**这是 ASPnetdating 的技术要求**：

Microsoft Windows Vista/7 或 Microsoft Windows Server 2000/2003/2008

Microsoft .NET Framework 4.0（不受中等信任限制）

微软 SQL Server 2005/2008/Express

Microsoft Visual Studio 2010（仅用于源代码自定义）

**我们希望得到帮助的问题**：

1) 我们是否需要以任何方式调整/修改/配置 aspnetdating 脚本才能在 Amazon EC2 上安装和运行？RDS？我们知道您不可能知道约会软件是如何编程来回答这个问题的，因此非常感谢您提供一般方向（在哪里看和做什么）的帮助。

2) 是否有任何 cPanel 或类似工具可以访问 Amazon WS 上的所有服务？我们当前的 VPS 有 cPanel，我们用它来访问文件服务器、phpMyAdmin、cron 作业和其他服务。

3) 我们还需要将现有的域名配置到 AWS 中。如果域名来自第三方提供商，我们将如何在 AWS 中执行此操作？只需将其指向新的 AWS 位置？

4) 我们能否在 EC2 中运行 SQL Server 和 Windows Server - 或者 SQL 端是否应该始终进入 RDS 实例。每个选项的优缺点？

5) 基于上述 ASP 的技术要求，我们希望从 Amazon EC2 设置向导提供的大量选项中做出最佳选择。我们有点迷路了。请帮助我们。

亲切的问候，伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:35:03.117

1.  这是可能的。如果您使用 RDS，您将获得您选择的数据库服务器的托管实例。某些功能可能不可用。

2.  不，但您可以根据需要安装一个。但是，由于整个基础设施都是经过 NAT 的，因此您可能会遇到一些许可问题，因为某些控制面板在将公共 IP 直接分配给机器的情况下运行。

3.  您可以将您的域/dns 保留在其所在的位置。如果您使用的是负载均衡器，Route53 确实通过别名提供了一些优势。

4.  你可以做任何一个。RDS 是自动化和托管的，但通常某些功能不可用或禁用。此外，您通常按小时为 SQL 服务器支付许可费用。如果您自己设置并拥有许可证，则无需额外费用即可运行它。使用您自己的实例，您可以访问 SQL Server 提供的所有功能。

5.  设置向导只是帮助您启动一个实例。最终重要的是您要运行哪个版本的 Windows 和哪个大小的实例。

# asp.net - 复杂系统的客户端 - Web 或 WPF

> ID：15320851
> 
> 赞同：1
> 
> 时间：2013-03-10T09:40:16.947
> 
> 标签：asp.net, wpf, architecture

我有一个复杂的遗留系统，它本质上是一个用于水管理系统的 BI 工具。这个系统的客户端是用winforms写的，有很多问题，而且看起来不太好。

我正在考虑编写一个新客户端，但我不确定是否应该选择在 WPF 或 ASP.NET MVC 等 Web 技术中实现它。

客户端将需要生成报告和图表，并允许管理数据的复杂操作（例如编辑表、树等）。客户端的最终用户只有几十个。

所有这些都将我引向了我也更熟悉的 WFP。但是，开发 WEB 客户端会有一些优势，包括易于部署和最终用户的可接受性。

所以我的问题是，总的来说，在这两个选项之间进行选择的指导方针是什么？如果可能的话，从我的简短描述中可以看出，两者中哪一个更适合我的需求？

提前感谢，奥马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:39:47.687

没有关于如何进行此操作的一般经验法则或指南。除了一般桌面与 Web 应用程序的考虑之外，此决定最终应由该应用程序应满足的要求驱动。只有您和您的用户可能知道这些要求。

尝试按照以下思路进行一些思考或研究：

*   使用 WPF 会将您与 Windows 环境联系起来。您确定将来不会有支持其他环境（例如各种移动设备）的要求吗？此外，由于使用 WPF 的 Windows 8 将您专门绑定到 Windows“桌面”环境。如果需要 Metro 客户端怎么办？

*   Web 客户端是否只是客户端脚本？如果是，则需要以与桌面应用程序类似的方式对其进行处理和分发。尽管通过这种方式，它可以为类似于本机应用程序的多个客户端环境打包和打包。这会给您带来一些好处吗？

*   Web 客户端是否需要托管在服务器上？如果是，它将如何托管？由您、由第 3 方还是由客户/用户在本地？在这种情况下，您将如何维护它并提供支持？

这大概是我在做决定时会想到的。

就个人而言，考虑到当前的一般软件趋势和 Windows 平台的新颖性，我认为这是项目生命周期中将原生桌面应用程序抛在后面的好机会。如果我打算重写一个完整的客户端应用程序，并且如果没有充分的理由使用桌面解决方案，我会使用 Web。

# javascript - 使用 document.createElement 创建的元素会留在内存中吗？

> ID：15320853
> 
> 赞同：12
> 
> 时间：2013-03-10T09:40:25.630
> 
> 标签：javascript, google-chrome-extension

嗨，我正在慢慢做一个chrome扩展，我需要解析一些包含html实体的数据，我需要对其进行解码。我在这里看到一个可以使用的答案`document.createElement`，所以我这样做了：

```
htmlDecode: function(input) {
    if(/[<>]/.test(input)) { // To avoid creating tags like <script> :s
        return "Invalid Input";
    }
    var e = document.createElement('div');
    e.innerHTML = input;
    return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
} 
```

但是我担心会`document.createElement`留下元素，因为这个函数在后台脚本上运行，所以它不会经常刷新，它每 5 分钟运行大约 35000 次。

那么，由 创造的元素是被`document.createElement`释放了，还是留下来了？我的意思是，我不会将它们附加到任何地方，而是将它们分配给局部变量，但我不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T09:52:54.103

他们将被垃圾收集。特别是，由于您正在开发 Chrome 扩展程序，V8 往往会很快回收这样的临时文件，因此不必担心。

如果您通常对此感到担心，一种常见的解决方案是简单地保留一个 div 来完成这项工作。

# ruby - 如何使用轮胎和弹性搜索重新索引一个元素？

> ID：15320857
> 
> 赞同：3
> 
> 时间：2013-03-10T09:41:04.633
> 
> 标签：ruby, elasticsearch, tire

我似乎无法弄清楚如何编辑索引元素。谷歌也没有给我答案。所以，我不确定这是否可能？我之前所做的只是重新索引整个事情，但是随着数据的增长，它变得越来越慢。编辑后如何仅重新索引一个元素。

这就是我现在正在做的事情。

```
def add_ele(ele)

    Tire.index ELE_INDEX do
        store :id => ele.ele_id, :title => ele.title, :tags => ele.tags, :itunes_description => ele.itunes_description

        refresh
    end
end

def delete_ele_index
    Tire.index ELE_INDEX do
        delete
    end
end 
```

所以我只是删除了整个索引并遍历数据库中的所有元素以再次添加它们。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:42:22.813

为了将来参考，这里有一个完整的例子来说明如何使用更新

```
require 'tire'
require 'yajl/json_gem'

Tire.index 'articles' do
  delete
  create

  articles = [
    { :id => '1', :type => 'article', :title => 'one',   :tags => ['ruby']           },
    { :id => '2', :type => 'article', :title => 'two',   :tags => ['ruby', 'python'] },
    { :id => '3', :type => 'article', :title => 'three', :tags => ['java']           },
    { :id => '4', :type => 'article', :title => 'four',  :tags => ['ruby', 'php']    }
  ]

  Tire.index 'articles' do
    import articles
  end

  refresh

  Tire.index 'articles' do
    update 'article', 1, :doc => { :title => 'tone' }
  end

  refresh

  s = Tire.search 'articles' do
    query do
      string 'title:T*'
    end

    filter :terms, :tags => ['ruby']

    sort { by :title, 'desc' }
  end

  s.results.each do |document|
    puts "* #{ document.title } [tags: #{document.tags.join(', ')}]"
  end
end

gives

* two [tags: ruby, python]
* tone [tags: ruby] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:35:04.460

您不需要删除索引 - 如果您再次存储具有相同 id 的文档，它将更新现有的。

还有更新 api，如果您只想更改几个字段，它可以让您不必计算和传输整个文档。在最简单的形式中，您只需传递一个包含要更新的属性的哈希，例如：

```
update type, id, :doc => {:title => 'new title'} 
```

# wordpress - wordpress 3.5.1 升级：管理面板无法正常工作

> ID：15320859
> 
> 赞同：0
> 
> 时间：2013-03-10T09:41:37.027
> 
> 标签：wordpress, upgrade

我刚刚将客户网站更新为 wordpress 3.5.1。安装很顺利，我重新安装了所有似乎也可以正常工作的插件，并且网站的前端工作正常，但是后端管理员似乎有一些错误。

*   侧面板扩展菜单不起作用。您必须单击菜单标题（例如插件）才能打开它。

*   小部件管理区域根本不工作。我无法删除或编辑我当前的任何小部件

停用所有插件后，问题仍然存在。我一直在网上搜索答案，但找不到答案。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:58:43.713

你可以尝试几件事，

1.  转到 /wp-admin/update-core.php 并尝试“立即重新安装”
2.  从 WordPress.org 下载 latest.zip 并手动通过 FTP 上传
3.  可能发生的另一件事是数据库出现故障。通过phpmyadmin备份数据库，然后进去**修复优化。**

您的实例可能存在许多问题，但根据您的描述，我倾向于需要修复损坏的表的数据库问题。祝你好运。

# java - 读取属性文件

> ID：15320863
> 
> 赞同：12
> 
> 时间：2013-03-10T09:41:47.267
> 
> 标签：java, maven

我创建了一个 REST Web 服务，我在其中创建了一个 config.properties 文件来存储和检索整个应用程序中的一些用户名和密码。我将它存储在 /src/main/resources/config.properties 中。

当我尝试从 Eclipse 的 java 代码中加载它时，它工作正常。但是当我在 tomcat 中部署它时，它没有加载。我用来加载属性文件的代码是

```
properties.load(new FileInputStream("src/main/resources/config.properties")); 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-10T09:47:18.743

您部署到 Tomcat 的是一个战争文件。Tomcat 不知道也不关心应用程序*源所在的目录。*

里面的文件被 Maven`src/main/resources`复制到该`target/classes`目录，然后这个目录被复制到已`WEB-INF/classes`部署的 web 应用程序的目录中，该目录位于您的 webapp 的类路径中。所以你只需要使用类加载器加载文件：

```
properties.load(MyClass.class.getResourceAsStream("/config.properties")); 
```

（MyClass 是您的 webapp 的任何类）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T09:43:43.030

如果您的属性文件在 WEB-INF/classes 中，您可以轻松地做到这一点。在这种情况下，只需编写类似

```
Properties props = new Properties();
props.load(getClass().getResourceAsStream("/name.properties")); 
```

显然，该文件可能位于类的子文件夹中。在这种情况下，您必须在调用 getResourceAsStream() 时指定完整路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T09:44:28.140

尝试从类路径加载它：-

```
final Properties properties = new Properties();
properties.load(this.getClass().getResourceAsStream("/config.properties")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T09:56:15.827

假设您想在运行时读取位于 /WEB-INF/props/example.properties 的 example.properties 文件。

```
 Properties properties = new java.util.Properties();  
        InputStream inputStream =     
            getServletContext().getResourceAsStream("/WEB-INF/props/example.properties");  
properties.load(inputStream); 
```

现在，我们准备从 example.properties 文件中获取值。

```
String value = properties.getProperty("propertyName"); 
```

示例属性文件：

例子.properties

属性名称 = 123

# android - 触摸 infoWindow 适配器时删除突出显示

> ID：15320870
> 
> 赞同：8
> 
> 时间：2013-03-10T09:42:50.133
> 
> 标签：android, google-maps

我已经实现了一个自定义的 infoWindow，我编程为在触摸标记时显示它。

当我触摸 infoWindow 时，它会以 Google Maps v2 API 所述的默认蓝色（在果冻豆上）突出显示。问题是我似乎无法禁用此亮点。

我试过添加：

```
<android:clickable="false"> 
```

但它没有用。

我还尝试实现 OnInfoWindowClickListener 并覆盖 onInfoWindowClick 方法，但这也不起作用。

> “帮帮我，欧比旺·克诺比。你是我唯一的希望”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T19:22:42.227

AFAIK 没有 API 可以做到这一点（还），在 gmaps-api-issues 中有一个公认的问题：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4783](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4783)

希望很快就能实现

# eclipse - “org.eclipse.m2e.jdt.JarLifecycleMapping”不可用

> ID：15320874
> 
> 赞同：13
> 
> 时间：2013-03-10T09:43:33.887
> 
> 标签：eclipse, maven, m2eclipse, m2e

如何使用 Eclipse 处理这个 m2e 插件问题：

> 描述资源路径位置类型生命周期映射“org.eclipse.m2e.jdt.JarLifecycleMapping”不可用。要启用完整功能，请安装生命周期映射并运行 Maven->Update Project Configuration。pom.xml /vosao-web 第11行 Maven项目构建生命周期映射问题

有没有人解决了这个问题？或者 Eclipse 根本不支持这个插件？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-08-29T08:25:50.913

今天我遇到了同样的问题，并通过谷歌找到了这个页面。

我解决问题的解决方案右键单击项目，然后单击 Maven > 更新项目...，然后单击确定。就这样！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-14T15:17:36.230

这就是我在 STS 上为解决此问题所做的：

1) 右键单击​​您的项目，选择 Maven -> Disable Maven Nature。

2）右键单击你的项目，选择spring tools -> update maven dependencies

3) 右键单击​​您的项目并选择“配置 -> 转换为 Maven 项目”</p>

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-09T07:38:46.400

今天我通过运行带有“-clean”选项的eclipse解决了这个问题（希望它对将来的人有所帮助）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-30T14:11:33.073

这是一个对我有用的快速解决方案：

1.  禁用项目的 Maven 特性：
    *   右键单击项目
    *   马文
    *   禁用 Maven 自然
2.  启用项目的 Maven 特性
    *   右键单击项目
    *   配置
    *   转换为 Maven 项目

希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-12T18:02:40.270

重新启动eclipse后，我的问题就解决了。

希望这也有帮助:-)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-07T06:08:55.303

只有更新项目没有解决问题。

它强制更新快照/发布并且它有效。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-12T07:28:21.657

我在 spring 工具套件（基于 eclipse）中遇到了同样的问题。我完全卸载了 Maven 支持，然后再次安装。它有帮助！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-05T06:25:22.093

我重新启动我的 STS。然后右键单击maven项目-> Maven -> 更新项目

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-07T02:12:20.653

右键单击您的项目，选择 Maven -> Disable Maven Nature。选择 Maven -> 更新项目

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-29T07:14:17.387

重新启动 STS 工具。比更新您的 Maven 项目。对我来说工作得很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-05T11:14:42.580

您需要做的就是右键单击 Project，Maven -> Update Project -> 勾选“Force Update of Snapshots/Releases”框，然后按 OK。与上述相反，更新项目本身并没有为我解决这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-10T13:00:03.263

尝试了这里提到的所有内容，但对我来说，解决方案是*排除工作区并创建一个新的*.

# java - 我在春季上下文中有一个包含 ${key} 的字符串

> ID：15320875
> 
> 赞同：2
> 
> 时间：2013-03-10T09:43:39.450
> 
> 标签：java, spring

我有一个简单的弹簧上下文如下：

```
<bean id="acl.authentication.provider" class="comprovider.ProviderType" factory-method="getInstance">
    <constructor-arg index="0" value="${key}"/>
</bean> 
```

`${key}`不是属性占位符，它是我真正的字符串，但是 spring 想要从属性占位符中获取它并且找不到它所以抛出异常。我可以`${}`在春季上下文中使用什么作为我的真实字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T09:48:20.007

我不确定它是否有效（因为我手头没有测试它的东西），但我认为您可以通过执行以下操作来欺骗 spring el evaluator：

```
<bean id="acl.authentication.provider" class="comprovider.ProviderType" factory-method="getInstance">
    <constructor-arg index="0" value="#{'$'+'{key}'}"/>
</bean> 
```

# vb.net - 将 rtf 发送到打印机 vb.net

> ID：15320891
> 
> 赞同：0
> 
> 时间：2013-03-10T09:46:32.543
> 
> 标签：vb.net

我有这个代码，我有一个小问题。打印开始，但结果只是空纸。

```
Dim printme As New Printing.PrintDocument
printme.DocumentName = "c:\testprint.rtf"
printme.Print() 
```

有没有其他想法，我如何将 testprinter.rtf 发送到打印机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:09:57.450

根据该物业的[文件](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.documentname.aspx)`PrintDocument.DocumentName`：

> DocumentName 属性不指定要打印的文件。相反，您可以通过处理[PrintPage](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.printpage.aspx)事件来指定要打印的输出。有关示例，请参阅[PrintDocument](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)类概述。

这就解释了为什么您的代码不起作用，因为设置`DocumentName`属性实际上不会导致打印该文档。你会得到一张空纸，因为你没有编写代码来告诉打印机打印任何东西。

因此，请改用此代码：

```
Dim printme As New Printing.PrintDocument
AddHandler printme.PrintPage, AddressOf printme_PrintPage
printme.Print() 
```

然后添加一个`printme_PrintPage`事件处理程序方法，您可以在其中编写代码来打印文件。

# clojure - 如何在 Clojure 中进行 for 循环？

> ID：15320892
> 
> 赞同：4
> 
> 时间：2013-03-10T09:46:35.313
> 
> 标签：clojure, quil

我正在学习一些 Clojure，我正在使用 Quil。我想知道如何将 for 循环转换为 Clojure：

这就是我在 Java 或类似语言中的做法：

```
for ( int i = 0; i < numSides; i++ ) {
    float posX = cos( theta * i );
    float posY = sin( theta * i );
    ellipse( posX, posY, polySize, polySize );
} 
```

我的 Clojure 尝试：

```
 (let [theta (/ PI num-sides)
        angle (range 0 num-sides)
        pos-x (cos (* theta angle))
        pos-y (sin (* theta angle))]
    (dorun (map #(ellipse % % % %) pos-x pos-y poly-size poly-size))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T09:58:19.027

您寻找的所有方法基本上都是使用序列，其中循环是关于执行特定次数的事情。Clojure 提供`dotimes`了一定次数的操作：

```
(dotimes [i 10]
  (println i)) 
```

所以你的代码变成了这样：

```
 (dotimes [i num-sides]
   (let [pos-x (cos (* theta i))
         pos-y (sin (* theta i))]
         (ellipse pos-x pos-y poly-size poly-size))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T10:26:50.503

如果你真的想要一个 C 风格的`for`循环，那么我的[clojure-utils](https://github.com/mikera/clojure-utils)库有一个方便的 for-loop 宏，可以让你执行以下操作：

```
(for-loop [i 0 , (< i num-sides) , (inc i)]
  ... do stuff.....) 
```

但是，通常我会发现自己使用以下方法之一：

*   `(dotimes [i num-sides] ....)`- 做某事特定次数
*   `(doseq [x some-sequence] ....)`- 为序列中的每个元素做一些事情
*   `(for [i (range n)] ...)`- 构造一个包含 n 个元素的列表

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-24T20:36:36.190

也许这有点学术，但我喜欢使用 Clojure 的“用于理解”来处理这类事情。代码如下所示：

```
(dorun
  (for [i (range num-sides)
        :let [pos-x (Math/cos (* i theta))
              pos-y (Math/sin (* i theta))]]
    (quil.core/ellipse pos-x pos-y poly-size poly-size))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-26T20:44:20.583

`Doseq`with`range`通常适用于循环特定数量的值以产生副作用。我将按如下方式实现您的循环：

```
(doseq [i (range 0 num-sides)]
  (ellipse (cos (* theta i)) 
           (sin (* theta i)) 
           poly-size 
           poly-size)) 
```

# error-handling - Python，导入错误：MaxentClassifier

> ID：15320894
> 
> 赞同：2
> 
> 时间：2013-03-10T09:46:38.743
> 
> 标签：error-handling, python-2.7, nltk

我正在准备使用 Python 进行自然语言处理这本书。

[http://rafale.org/~mattoufoutu/ebooks/Doc_diverse/Cours%20Prog/Python/Books/Natural%20Language%20Processing%20with%20Python%20%282009%29.pdf](http://rafale.org/~mattoufoutu/ebooks/Doc_diverse/Cours%20Prog/Python/Books/Natural%20Language%20Processing%20with%20Python%20%282009%29.pdf)

第 7.5 段命名实体识别。

我按照这个例子写：

```
sent = nltk.corpus.treebank.tagged_sents()[22]
print nltk.ne_chunk(sent, binary=True) 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/nltk/chunk/__init__.py", line 176, in ne_chunk
    chunker = load(chunker_pickle)
  File "/usr/local/lib/python2.7/dist-packages/nltk/data.py", line 605, in load
    resource_val = pickle.load(_open(resource_url))
  File "/usr/local/lib/python2.7/dist-packages/nltk/chunk/named_entity.py", line 16, in <module>
    from nltk.classify import MaxentClassifier
ImportError: cannot import name MaxentClassifier 
```

知道为什么它不起作用吗？

谢谢！

编辑：文件内容：/usr/local/lib/python2.7/dist-packages/nltk/classify/init **.pyc**

```
from nltk.classify.api import ClassifierI, MultiClassifierI
from nltk.classify.mallet import config_mallet, call_mallet
from nltk.classify.megam import config_megam, call_megam
from nltk.classify.weka import WekaClassifier, config_weka
from nltk.classify.naivebayes import NaiveBayesClassifier
from nltk.classify.positivenaivebayes import PositiveNaiveBayesClassifier
from nltk.classify.decisiontree import DecisionTreeClassifier
from nltk.classify.rte_classify import rte_classifier, rte_features, RTEFeatureExtractor
from nltk.classify.util import accuracy, apply_features, log_likelihood

# Conditional imports

try:
    from scikitlearn import SklearnClassifier
except ImportError:
    pass

try:
    import numpy
    from nltk.classify.maxent import (MaxentClassifier, BinaryMaxentFeatureEncoding,
                                      TypedMaxentFeatureEncoding,
                                      ConditionalExponentialClassifier)
    import svmlight
    from nltk.classify.svm import SvmClassifier
except ImportError:
    pass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:38:11.433

您需要安装**numpy**：

```
from nltk.classify.maxent import (MaxentClassifier,... 
```

落后

```
import numpy 
```

您应该安装 numpy 并能够毫无错误地导入 numpy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T10:31:44.550

在文件 /usr/local/lib/python2.7/dist-packages/nltk/chunk/named_entity.py 更改

```
from nltk.classify import MaxentClassifier 
```

到

```
from nltk.classify.maxent import MaxentClassifier 
```

# javascript - 将选中的线条转移到彩盒

> ID：15320898
> 
> 赞同：0
> 
> 时间：2013-03-10T09:46:53.883
> 
> 标签：javascript, jquery, colorbox

我想将一组选中的行传输到颜色框，以下代码不起作用，有人知道吗？

```
$(function() {
  var kid = $("input[type=checkbox][checked]").each(function(i) {
    var arr = [];
    arr[i] = $(this).val();
  });

 $("#kontakte_bezButton1_{kontakte_bez:rowNumber}").colorbox({
    href:"testpage1.php?kid=" + arr,
    iframe:true,
    innerWidth:850,
    innerHeight:400,
    opacity:0.1,
    overlayClose:false,
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:51:15.033

您已`arr`在函数中定义

```
function(i) {
var arr = [];
arr[i] = $(this).val();
} 
```

这个`leave it for having only scope within that funct`，

你必须给它`global scope`在其他地方使用它，即。你必须全局定义它

像这样定义：

```
$(function() {
var arr =[]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:53:43.010

您应该构建一个 url 获取参数字符串：

```
 <script>
         $(function() {
              var data = {kid:[]}; // we put here all checkbox value
              $("input[type=checkbox][checked]").each(function() {   //iterate over all checked checkboxes
                   data.kid.push($(this).attr('id'));           //push the id of checkbox to data.kid array
              });

              $("#kontakte_bezButton1_{kontakte_bez:rowNumber}").colorbox({
                   href:"testpage1.php?" + $.param(data),   //create $_GET parameter string
                   iframe:true,
                   innerWidth:850,
                   innerHeight:400,
                   opacity:0.1,
                   overlayClose:false
              });
        });
  </script> 
```

$.param 函数 ( [http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/) ) 从对象生成获取参数字符串。在此示例中，结果如下：

```
 kid[]=1&kid[]=4&....
  (in urlencoded format: kid%5B%5D=1&kid%5B%5D=4 ) 
```

# facebook - 春季安全和Facebook身份验证不起作用

> ID：15320905
> 
> 赞同：1
> 
> 时间：2013-03-10T09:47:30.170
> 
> 标签：facebook, spring, spring-security

我想在使用 Spring Security 的应用程序中使用 facebook 登录 + DB 身份验证。

所以我在 index.jsp 页面中添加了一个发送请求的 fb 按钮，例如，

```
function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
        console.log('Good to see you, ' + response.name + '.' + response.email);
        window.location = "<%=request.getContextPath()%>/j_spring_facebook_security_check";
    });
} 
```

applicationContext-Security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans">
    //spring security 3.
    <security:http auto-config="true" use-expressions="true" access-denied-page="/accessDenied.jsp">
        <security:form-login login-page="/index.jsp"
            default-target-url="/jsp/home.jsp"
            authentication-failure-handler-ref="authenticationFailureHandler"/>

        <security:intercept-url pattern="/jsp/listInBetweenPlaces.jsp"
            access="permitAll" />

        <security:intercept-url pattern="/jsp/home.jsp"
            access="permitAll" />

        <security:intercept-url pattern="/index.jsp"
            access="permitAll" />

        <security:intercept-url pattern="/jsp/*"
            access="isAuthenticated()" />

        <security:logout logout-url="/j_spring_security_logout" logout-success-url="/index.jsp?logout=success" 
            invalidate-session="true"  />

        <security:custom-filter before="FORM_LOGIN_FILTER"
            ref="facebookAuthenticationFilter" />
</security:http>

    <bean id="facebookAuthenticationFilter" class="org.springframework.security.facebook.FacebookAuthenticationFilter">
        <property name="authenticationManager" ref="authenticationManager"/>

        <property  name = "authenticationSuccessHandler">
            <bean  class = "org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
                <property  name = "defaultTargetUrl"  value = "/jsp/home.jsp"  />
                <property  name = "alwaysUseDefaultTargetUrl"  value = "true"  />
            </bean>
        </property>

        <property  name = "authenticationFailureHandler">
            <bean  class = "org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
                <property  name = "defaultFailureUrl"  value = "/fb/failure.jsp"  />
            </bean>
        </property>
    </bean>

    <bean id="authenticationProviderFacebook" class="org.springframework.security.facebook.FacebookAuthenticationProvider">
        <property name="roles" value="ROLE_FACEBOOK_USER" />
    </bean>

    <bean id="facebookHelper"  class="org.springframework.security.facebook.FacebookHelper">
        <property  name="apiKey"  value="my_api_key"  />
        <property  name="secret"  value="my_secret_key"  />
    </bean>

    <bean id="customUserDetailsService" class="com.onmobile.carpool.authentication.CustomUserDetailsService">
        <!--  <property name="carpoolService" ref="carpoolServiceImpl" /> -->
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider user-service-ref="customUserDetailsService">
            <security:password-encoder hash="md5" />
        </security:authentication-provider>
        <security:authentication-provider ref="authenticationProviderFacebook">
        </security:authentication-provider>
    </security:authentication-manager>
</beans> 
```

FacebookAuthenticationFilter.java：

```
public class FacebookAuthenticationFilter extends
                AbstractAuthenticationProcessingFilter implements
                ApplicationContextAware {

    public static final String DEFAULT_FILTER_PROCESS_URL = "/j_spring_facebook_security_check";
    private FacebookHelper facebookHelper = null ;
    private ApplicationContext ctx;
    protected FacebookAuthenticationFilter() {
        super(DEFAULT_FILTER_PROCESS_URL);
    }

    public Authentication attemptAuthentication(HttpServletRequest req,
                        HttpServletResponse res) throws AuthenticationException,
                        IOException, ServletException {

        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        if(facebookHelper == null){
            facebookHelper = (FacebookHelper) ctx
                    .getBean("facebookHelper");
        }

        Long uid = null;
        String sessionkey = null ;
        try {
            uid = facebookHelper.getLoggedInUserId(request, response);
            sessionkey = facebookHelper.lookupSessionKey(request);
        } catch (FacebookUserNotConnected e) {
            throw new AuthenticationCredentialsNotFoundException(
                                        "Facebook user not connected", e);
        }

        FacebookAuthenticationToken token = new FacebookAuthenticationToken(uid);
        token.setSessionkey(sessionkey);
        token.setDetails(authenticationDetailsSource.buildDetails(request));

        AuthenticationManager authenticationManager = getAuthenticationManager();
        Authentication authentication = authenticationManager
                                .authenticate(token);

        return authentication;
    }

    public void setApplicationContext(ApplicationContext ctx)
                        throws BeansException {
        this.ctx = ctx;
    }

    public FacebookHelper getFacebookHelper() {
        return facebookHelper;
    }

    public void setFacebookHelper(FacebookHelper facebookHelper) {
        this.facebookHelper = facebookHelper;
    }

} 
```

我总是遇到这个电话的问题：

```
 uid = facebookHelper.getLoggedInUserId(request, response); 
```

`getLoggedInUserId`FacebookHelper.java 中的详细信息：

```
public Long getLoggedInUserId(HttpServletRequest request,
                    HttpServletResponse response) throws FacebookUserNotConnected {

    FacebookWebappHelper<Document> facebook = new FacebookWebappHelper<Document>(
                        request, response, apiKey, secret);
    Long uid = facebook.getUser();

    if (uid == null)
            throw new FacebookUserNotConnected(
                            "Facebook user id could not be obtained");
    return uid;
} 
```

下面的行总是评估为 null 因为它抛出异常：

```
Long uid = facebook.getUser(); 
```

我从下面的链接中学习了 Facebook 相关课程，

[https://code.google.com/p/spring-security-facebook/source/browse/trunk/src/?r=4#src%2Fmain%2Fjava%2Forg%2Fspringframework%2Fsecurity%2Ffacebook](https://code.google.com/p/spring-security-facebook/source/browse/trunk/src/?r=4#src/main/java/org/springframework/security/facebook)

我的需要是让用户可以通过 DB 检查或通过 FB 身份验证登录到我的应用程序。

我无法继续这样做，有人可以指出我缺少什么。我总是被重定向到 failure.jsp。我需要在 FB 帐户中启用什么吗？或者我将一些不正确的数据从 UI 传递到过滤器？

我无法在任何地方找到完整的教程，有人可以指出正确的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T20:12:28.313

我在最近开发的一个应用程序中做了类似的事情。我研究过使用 Spring-Oauth 项目来执行 oauth 身份验证，但后来意识到 spring-oauth 要求您已经在应用程序中进行了身份验证，而我在网上找到的所有其他解决方案都已过时。

经过几天的努力，这就是我最终要做的。我在我的应用程序中使用 JSF 和 PrimeFaces，但我希望它能给你一个想法。该方法是最初使用 Facebook Javascript API 为您执行 Facebook 身份验证。Facebook 页面上有很多关于如何执行此操作的示例：

## login.xhtml - Facebook API 部分

```
...
FB.Event.subscribe('auth.authResponseChange', function(response) {
  // Here we specify what we do with the response anytime this event occurs. 
  if (response.status === 'connected') {
    //a user has logged in to the app
    var responseToken = response.authResponse.accessToken;
    var responseUserId = response.authResponse.accessToken;
    loginJS([{name:'token', value: responseToken}, {name:'name', value: responseUserId}]);                      
  } 
});
... 
```

在页面正文的某处还添加以下内容：

```
<p:remoteCommand name="loginJS" action="#{userBean.facebookLogin}" immediate="true"  process="@this" />; 
```

*p:remoteCommand*调用托管 bean (userBean) facebookLogin 函数。此函数从请求中检索两个参数（userId、token）。在您的情况下，您需要做的就是从 javascript 调用您的“登录”servlet，并将这两个参数作为请求的一部分传递。

## 用户Bean.java

```
public String facebookLogin(){
    FacesContext context = FacesContext.getCurrentInstance();
    Map<String, String> map = context.getExternalContext().getRequestParameterMap();
    String userToken = map.get("token");
    String name = map.get("name");

    if(logger.isLoggable(Level.FINEST)){
        logger.finest("Login attempt via facebook. Token: "+ userToken);
    }

    Authentication auth = new FacebookTokenAuthentication(userToken, name);

    SecurityContextHolder.getContext().setAuthentication(auth);

    return "home?faces-redirect=true";
} 
```

## FacebookTokenAuthentication.java

```
public class FacebookTokenAuthentication implements Authentication {

    /**
     * 
     */
    private static final long serialVersionUID = 4218179259794454698L;
    private String token;
    private String name;

    public FacebookTokenAuthentication(String token, String name) {
        this.token = token;
        this.name = name;
    }

    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        return new ArrayList<GrantedAuthority>(0);
    }

    @Override
    public Object getCredentials() {
        return token;
    }

    @Override
    public Object getDetails() {
        return null;
    }

    @Override
    public Object getPrincipal() {
        return null;
    }

    @Override
    public boolean isAuthenticated() {
        return false;
    }

    @Override
    public void setAuthenticated(boolean isAuthenticated)
            throws IllegalArgumentException {
    }

    @Override
    public String getName() {
        return name;
    }
} 
```

## FacebookAuthenticationProvider.java

最后一部分是创建一个 facebook 身份验证提供程序。此身份验证提供程序将调用 facebook API 以获取用户信息并在您的数据库中查找匹配的用户。您可以在数据库中映射用户的 facebook id，也可以使用电子邮件地址来查找用户。对于这一部分，我使用 spring-social FacebookTemplate 来获取 facebook 个人资料信息。

```
public class FacebookAuthenticationProvider implements AuthenticationProvider {
    private static final Logger logger = Logger
            .getLogger(FacebookAuthenticationProvider.class.getName());

    /*
     * (non-Javadoc)
     * 
     * @see org.springframework.security.authentication.AuthenticationProvider#
     * authenticate(org.springframework.security.core.Authentication)
     */
    @Override
    public Authentication authenticate(Authentication auth)
            throws AuthenticationException {
        Authentication resultAuth = null;
        if (logger.isLoggable(Level.FINEST)) {
            logger.finest("Attempting to authenticate user via the FacebookAuthenticationProvider.");
        }

        if (auth.isAuthenticated()) {
            return auth;
        }

        if (auth instanceof FacebookTokenAuthentication) {

            FacebookTokenAuthentication fbAuth = (FacebookTokenAuthentication) auth;
            String token = (fbAuth.getCredentials() != null) ? fbAuth
                    .getCredentials().toString() : null;

            if (logger.isLoggable(Level.FINEST)) {
                logger.finest("Creating facebook template. Token:" + token);
            }

            FacebookTemplate fbTemplate = new FacebookTemplate(token);

            FacebookProfile userProfile = fbTemplate.userOperations()
                    .getUserProfile();

            // LOOKUP THE USER IN YOUR DATABASE
            User user = //ADD CUSTOM USER LOOKUP HERE;

            resultAuth = new PreAuthenticatedAuthenticationToken(user, token);
            resultAuth.setAuthenticated(true);
        } else {

            throw new BadCredentialsException("Invalid credentials.");
        }

        return resultAuth;
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.springframework.security.authentication.AuthenticationProvider#supports
     * (java.lang.Class)
     */
    @Override
    public boolean supports(Class<?> auth) {
        return auth.equals(FacebookTokenAuthentication.class);
    }

} 
```

**不要忘记将 AuthenticationProvider 添加到您的 Spring 配置中**

# java - OSX 上的 JavaFX 屏幕捕获无头异常

> ID：15320915
> 
> 赞同：9
> 
> 时间：2013-03-10T09:49:31.670
> 
> 标签：java, macos, awt, javafx-2

我正在将旧的 java 应用程序从 swing 转换为 javafx，但遇到了问题。

我正在使用以下代码来捕获屏幕截图：

```
 public ScreenCapper() {
    ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    gs = ge.getScreenDevices();

    try {
        robot = new Robot(gs[gs.length-1]);
    } catch (AWTException e) {
        LOGGER.getInstance().ERROR("Error creating screenshot robot instance!");
    }
}

public Color capture() {
    Rectangle bounds;

    mode = gs[0].getDisplayMode();
    bounds = new Rectangle(0, 0, mode.getWidth(), mode.getHeight());
    //......
} 
```

这在 Windows 下运行应用程序时工作正常。但是在 OSX 下运行时会出现以下异常：

```
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.awt.HeadlessException
at sun.java2d.HeadlessGraphicsEnvironment.getScreenDevices(HeadlessGraphicsEnvironment.java:72)
at be.beeles_place.roggbiv.utils.ScreenCapper.<init>(ScreenCapper.java:33)
at be.beeles_place.roggbiv.modes.AverageColorMode.start(AverageColorMode.java:31)
at be.beeles_place.roggbiv.modes.ColorModeContext.startCurrentColorMode(ColorModeContext.java:28)
at be.beeles_place.roggbiv.controller.RoggbivController.<init>(RoggbivController.java:42)
at be.beeles_place.roggbiv.RoggbivMain.start(RoggbivMain.java:67)
at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
at java.security.AccessController.doPrivileged(Native Method)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76) 
```

我认为这与在 OSX 上运行的 javafx 似乎是无头模式有关，如下调试警告所示：

```
013-03-10 10:44:03.795 java[1912:5903] *** WARNING: Method userSpaceScaleFactor in class NSView is deprecated on 10.7 and later. It should not be used in new applications. Use convertRectToBacking: instead. 
2013-03-10 10:44:05.472 java[1912:707] [JRSAppKitAWT markAppIsDaemon]: Process manager already initialized: can't fully enable headless mode. 
```

有什么办法可以让它工作吗？或者另一种捕获与 OSX 不冲突的屏幕截图的方法？

完整代码@https [://github.com/beele/Roggbiv](https://github.com/beele/Roggbiv)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T11:16:58.887

JavaFX 不使用 AWT 堆栈，因此它不会在纯 JavaFX 应用程序中启动。由于线程处理细节，AWT 在 Mac 上以无头模式运行，然后从 JavaFX 请求。

有下一个选项可以解决这个问题：

1.  使用一些巫术魔法来初始化 AWT——在静态初始化运行中`java.awt.Toolkit.getDefaultToolkit();` **编辑**这仅在较旧的 JavaFX 中有效，抱歉

2.  更好的选择是选择不使用 JavaFX 的 AWT。您可以使用下一个功能来制作屏幕截图：[http ://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#snapshot%28javafx.util.Callback,%20javafx.scene.SnapshotParameters,%20javafx .scene.image.WritableImage%29](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#snapshot%28javafx.util.Callback,%20javafx.scene.SnapshotParameters,%20javafx.scene.image.WritableImage%29)

3.  **编辑**正如 Alexander 指出的另一种方法是在单独的 VM 中运行 AWT 代码。为此，您可以将屏幕截图功能重构为一个单独的类，并通过以下方式从 JavaFX 应用程序调用它：

    ```
     new ProcessBuilder(
              System.getProperty("java.home") + "/bin/java", 
              "-cp", "classpath", 
              "my.apps.DoScreenshot"
        ).start(); 
    ```

    这个应用程序可以将屏幕截图存储到文件系统。如果您需要经常截屏并遇到性能问题，您可以运行该单独的应用程序一次并通过套接字与其通信。

4.  使用`com.sun.glass.ui.Robot`代替`AWTRobot`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T00:04:03.633

我看到以下可能需要注意的事情：

1.  除了 Sergey Grinev 的第 1 点。 set `javafx.macosx.embedded`：

    ```
    System.setProperty("javafx.macosx.embedded", "true");
    java.awt.Toolkit.getDefaultToolkit(); 
    ```

2.  注意 AWT 的东西是在 EDT 中完成的，而 JavaFX 的东西是在 JavaFX 应用程序线程中完成的。

我最近在 Mac 上处理 JavaFX/Swing 问题，所以这让我很感兴趣。如果您尝试下面的代码，它对您有用吗？（它应该将缩放的屏幕截图作为应用程序窗口的背景。）

```
import java.awt.AWTException;
import java.awt.DisplayMode;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.image.BufferedImage;

import javafx.application.Application;
import javafx.application.Platform;
import javafx.embed.swing.SwingFXUtils;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.Pane;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

import javax.swing.SwingUtilities;

public class SO extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        final Pane pane = new StackPane();
        Scene scene = new Scene(pane, 600, 300);
        stage.setScene(scene);
        Button b = new Button("Snap");
        final ImageView iv = new ImageView();
        iv.fitWidthProperty().bind(pane.widthProperty());
        iv.fitHeightProperty().bind(pane.heightProperty());
        pane.getChildren().add(iv);
        pane.getChildren().add(b);
        b.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        doSnap(iv);
                    }
                });
            }
        });
        stage.show();
    }

    protected void doSnap(final ImageView iv) {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice[] gs = ge.getScreenDevices();

        Robot robot = null;
        try {
            robot = new Robot(gs[gs.length-1]);
        } catch (AWTException e) {
            e.printStackTrace();
            return;
        }
        DisplayMode mode = gs[0].getDisplayMode();
        Rectangle bounds = new Rectangle(0, 0, mode.getWidth(), mode.getHeight());
        final BufferedImage bi = robot.createScreenCapture(bounds);
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                Image im = SwingFXUtils.toFXImage(bi, null);
                iv.setImage(im);
            }
        });
    }

    public static void main(String[] args) {
        System.setProperty("javafx.macosx.embedded", "true");
        java.awt.Toolkit.getDefaultToolkit();
        Application.launch(args);
    }

} 
```

# sql-server - SQL 计数函数在 VB.Net 中无法正常工作

> ID：15320918
> 
> 赞同：1
> 
> 时间：2013-03-10T09:50:30.337
> 
> 标签：sql-server, vb.net

我正在使用 VB.NET 和 SQL SERVER 2005 平台完成我的期末考试项目。当我选择数据库中的特定日期或时间时，我需要检测冲突。

我已经在 sql server 中有我的 sql 查询，它运行良好。但是当我要在我的 vb.net 项目中执行它时，问题开始出现。我很难受。任何帮助将不胜感激。

我的表

```
Item            DateFrom             DateTo             TimeFrom              TimeTo
Diamond        3/10/2013           3/20/2013              NULL                 NULL
Cooler         3/10/2013           3/20/2013              NULL                 NULL
Cooler         3/21/2013              NULL             9:30:00 AM            11:00:00 AM 
Diamond        3/21/2013              NULL             8:00:00 AM            9:30:00 AM 
```

mysql

```
select count(*) from myTable
where '3/21/2013' between(datefrom)and(dateto) and item = 'Diamond'
or datefrom = '3/21/2013'  and timefrom between '8:00 AM' and '10:00 AM' and item = 'Diamond'
or datefrom = '3/21/2013' and  timeto between '8:00 AM' and '10:00 AM'   and item = 'Diamond'
or datefrom = '3/21/2013' and '8:00 AM' between(timefrom)and(timeto) and item = 'Diamond' 
```

结果：1

这是我的 vb.net 代码

```
SQLQUERY = "Select Count(*) as Conflicts from myTable" & _
     "Where '" & dtpTFrom.Value & "' between(datefrom)and(dateto) and item = '" &     cmbItems.Text & "'" & _
     "Or (datefrom = '" & dtpTFrom.Value & "'  and timefrom between '" &    Format(CDate(cmTFrom.Text), "hh:mm tt") & "' and '" & Format(CDate(cmTTo.Text), "hh:mm tt")      & "' and item = '" & cmbItems.Text & "')" & _
     "Or (datefrom = '" & dtpTFrom.Value & "' and  timeto between '" & Format(CDate(cmTFrom.Text), "hh:mm tt") & "' and '" & Format(CDate(cmTTo.Text), "hh:mm tt") & "'  and item = '" & cmbItems.Text & "')" & _
 "    Or (datefrom = '" & dtpTFrom.Value & "' and '" & Format(CDate(cmTFrom.Text), "hh:mm tt") & "' between(timefrom)and(timeto) and item ='" & cmbItems.Text & "')"

com = new sqlcommand(SQLQUERY,con) 
dr = com.ExecuteReader() 
dr.Read()
If dr.HasRows Then
    MsgBox(CInt(dr.GetValue(0)))
    If CInt(dr.GetValue(0)) > 0 Then
                MessageBox.Show("Selected item is not available for that date and time.", AppTitle, MessageBoxButtons.OK, MessageBoxIcon.Information)
    Exit Sub
    End If 
```

万一

消息框结果：0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:52:16.677

您必须`OR`通过将条件放在括号内来对条件进行分组，（*您没有得到不正确结果的原因是条件相互重叠*）

```
SELECT COUNT(*) 
FROM   myTable
WHERE ('3/21/2013' BETWEEN datefrom AND dateto AND item = 'Diamond') OR
      (datefrom = '3/21/2013' AND timefrom BETWEEN '8:00 AM' AND '10:00 AM' AND item = 'Diamond') OR
      (datefrom = '3/21/2013' AND timeto BETWEEN '8:00 AM' AND '10:00 AM'   AND item = 'Diamond') OR
      (datefrom = '3/21/2013' AND '8:00 AM' BETWEEN timefrom AND timeto AND item = 'Diamond') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:59:40.763

不确定，但我需要发布作为答案，因为评论中的代码格式不太好。
让我知道它是否有效

```
com = new sqlcommand(SQLQUERY,con) 
Dim result = com.ExecuteScalar() 
if Convert.ToInt32(result) = 0 Then
    MessageBox.Show("Selected item is not available for that date and time.", ...)
    Exit Sub
End If 
```

还有参数的问题。您需要传递参数以避免 SQL 注入，还需要确保像您这样的字符串被数据库引擎正确解释为查询所需的日期

这是使用参数而不是手工制作的字符串的查询的粗略翻译

```
SQLQUERY = "Select Count(*) as Conflicts from myTable " & _
     "Where @dateFrom  between(datefrom)and(dateto) and item = @item " & _
     "Or (datefrom = @dateFrom and timefrom between @timeFrom and @timeTo and item = @item) " & _
     "Or (datefrom = @dateFrom and   timeto between @timeFrom and @timeTo and item = @item) " & _
     "Or (datefrom = @dateFrom and @timeFrom between(timefrom)and(timeto)and item =@item)"

com = new sqlcommand(SQLQUERY,con) 
com.Parameters.AddWithValue("@dateFrom",  Convert.ToDateTime(dtpTFrom.Value))
com.Parameters.AddWithValue("@item",  cmbItems.Text)
com.Parameters.AddWithValue("@timeFrom",  Convert.ToDateTime(cmTFrom.Text))
com.Parameters.AddWithValue("@timeTo",  Convert.ToDateTime(cmTTo.Text)) 
```

# xpath - xpath查找href链接内容

> ID：15320920
> 
> 赞同：0
> 
> 时间：2013-03-10T09:50:41.157
> 
> 标签：xpath, hpple

```
<td class="subject" id="td_111111">
<a href="thread-htm-fid-75-type-333.html" class="f14 view">[health]</a>
<a href="the link I want" name="readlink" 
 id="a_ajax_880700" class="subject_t f14"><b><font color=#FF0000>how to make this show</font></b></a>&nbsp; 
```

如何通过Xpath在“我想要的链接”上方获取href位置？不仅需要解析一个部分

我用下面来解析，但失败了：@"//a[@class='subject_t f14']/@href"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:00:15.433

你试过这个吗？

```
"//a[@id='a_ajax_880700']//@href" 
```

# android - android gridview 每个网格的宽度/高度不同

> ID：15320922
> 
> 赞同：2
> 
> 时间：2013-03-10T09:50:48.873
> 
> 标签：android, gridview

我试图创建一个具有不同宽度/高度的gridview ..

基本上假设第一列有一个 100x100 的图像，下一列将有一个 50x50 的图像，下一列将有另一个 50x50 的图像。但是对于下一行，第一列将是空的，只有第二列和第三列将被填充

基本上一行看起来像这样

```
 ____  _  _
|    ||_||_|
|____||_||_| 
```

我需要使用网格视图来执行此操作，但无法弄清楚。你可以指定网格的宽度/高度，或者网格的重量，还是我必须为gridview的列合并另一个层？提前致谢。

* * *

更新：我目前的想法是制作 4 列的网格视图。假设我们有两行，这将是这样的：

```
a b c d 
e f g h 
```

其中 a 到 h 是图像。现在，对于 a，但是一个宽度和高度以编程方式设置为重叠 b、f 和 e 的图像，对于 b、f、e 放置一个空白图像..但这似乎是一个非常非常糟糕的方法....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T08:20:33.507

你可以看看[这里](http://www.androidviews.net/2013/01/quiltview-library/)的代码。它使您能够根据一个倍数自定义项目的宽度和高度。

我实现的效果如下图所示。希望它可以帮助你。

```
 _____  _
|_____|| |
|_|_|_||_| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:53:10.557

您可以在带有单列的 GridView 内使用 GridLayout，或者在 ScrollView 内使用 GridLayout（带有 LinearLayout）。

# linq - Linq 按语句分组

> ID：15320927
> 
> 赞同：-1
> 
> 时间：2013-03-10T09:51:49.720
> 
> 标签：linq, join, group-by

我有两张桌子 表 1

```
ID1   Col1_1  
1     "123"   
2     "12331" 
```

表 2 (FK1 = ID1)

```
ID2   FK1   Col2_1      Col2_2
 1     1     "11"     "4.04.2012"
 2     1     "21"     "5.06.2012"
 3     1     "31"     "2.04.2012"
 4     2     "41"     "5.04.2012"
 5     2     "51"     "1.02.2012" 
```

我需要加入这些表，按日期（Col2_2）排序并按 FK1 分组。结果应该看起来像

```
ID2   FK1   Col2_1       Col2_2     Col1_1
 2     1     "21"     "5.06.2012"   "123"
 4     2     "41"     "5.04.2012"   "12331" 
```

可以提出这样的要求吗？我需要以（来自...加入...分组...选择...）形式提出此请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:54:54.217

```
var query = from t1 in Table1
            join t2 in Table2 on t1.ID1 equals t2.FK1
            group new { t1, t2 } by t1.ID1 into g
            let i = g.OrderByDescending(e => DateTime.Parse(e.t2.Col2_2))
                     .FirstOrDefault()
            select new
            {
                ID2 = i.t2.ID2,
                FK1 = i.t2.FK1,
                Col2_1 = i.t2.Col2_1,
                Col2_2 = i.t2.Col2_2,
                Col1_1 = i.t1.Col1_1
            };
var results = query.ToList(); 
```

我已经使用 LINQ to Objects 对其进行了测试，并且您的示例数据和结果符合预期。

# android - 如果条件不起作用，错误代码在哪里？

> ID：15320928
> 
> 赞同：0
> 
> 时间：2013-03-10T09:51:53.800
> 
> 标签：android

```
if (cevabb.getText().toString() == cev0.getText().toString()) {     
    Toast.makeText(test.this,"aaaa", Toast.LENGTH_LONG).show();     
} else {
    Toast.makeText(test.this,"bbb", Toast.LENGTH_LONG).show();
} 
```

`cevabb.getText().toString()="xxx"`和`cev0.getText().toString()="xxx"`，但消息显示“bbb”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T09:53:08.533

用于比较的`String.equals()`方法`String`，因为`==`比较参考文献，而`equals()`用于内容比较。

```
if(string1.equals(string2)){
    // DO Something
} 
```

你的情况：-

```
if(cevabb.getText().toString().equals(cev0.getText().toString())){
    // DO Something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T09:56:03.947

像这样使用。

```
if (cevabb.getText().toString().equals(cev0.getText().toString())) {

....

} 
```

== 和 equals() 方法之间的区别。

== 用于比较参考。和 equals 方法检查字符串变量的内容。

例子。

第一个例子

```
String s1 = "FirstString";
String s2 = "FirstString";

 if(s1 == s2) {
    //This condition matched true because java don't make separate object for these two string. Both strings point to same reference.
 } 
```

第二个例子

```
String s1= "FirstString";
String s2 = new String("FirstString");

if(s1.equals(s2)) {
  //This condition true because same content.
}

if(s1 == s2) {
  //This condition will be false because in this java allocate separate reference for both of them
} 
```

结论：Java 检查字符串是否存在。如果我们使用 new 创建第二个字符串的对象并且具有不同的内容，那么它会创建对象并分配不同的引用，如果我们不使用 new 创建对象并且具有相同的内容，那么它分配与第一个字符串相同的引用包含.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T09:53:24.820

`cevabb.getText().toString()==cev0.getText().toString()`

必须

`cevabb.getText().toString().equals(cev0.getText().toString())`

或者如果您想作为对象进行比较

采用`intern()`

`cevabb.getText().toString().intern()==(cev0.getText().toString())`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T09:59:08.120

= 运算符比较内存中 String 的引用。因此，具有相同值的 String 可能位于不同的内存位置，而 = 运算符给出的结果为 false。

使用 equals 或 equalsIgnorecase 以便比较存储在 String 引用中的值。

# vb.net - 转换日期格式（yyyy-mm-dd 到七位儒略格式

> ID：15320930
> 
> 赞同：0
> 
> 时间：2013-03-10T09:52:02.310
> 
> 标签：vb.net, date, julian-date

我正在开发一个生成 Google 查询的小型应用程序。使用运算符“daterange:”，您可以限制结果。示例（“搜索字符串”日期范围：juliandate）

Google 中的日期范围运算符需要七位朱利安格式。我发现了一些这样的例子

```
 datediff("yyyy","01/01/1900",date) & format(date,"y") 
```

需要帮助找到一些代码解决方案，将普通日期格式转换为七位朱利安格式（VB 代码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:52:45.947

从文件开头的导入开始

```
Imports System.Globalization 
```

要转换您的日期，请使用下面的代码。

```
Dim dt As DateTime
Dim jc As String
dt = DateTime.ParseExact("2012/12/15", "yyyy/MM/dd", CultureInfo.InvariantCulture)
jc = dt.Year.ToString + dt.DayOfYear.ToString 
```

# javascript - 如何在上传文件之前显示文件名。

> ID：15320931
> 
> 赞同：2
> 
> 时间：2013-03-10T09:52:03.433
> 
> 标签：javascript, jquery, html

我想在服务器上传文件之前使用 Javascript 或 jQuery 显示文件的名称。我已经对此进行了研究，而是学习了如何在上传图像之前对其进行预览。但我要上传的文件可能不是图片，所以我需要显示名称。

这是显示图像预览的代码，可以修改它以显示名称吗？：

HTML：

```
<form method="post" name="form" enctype="multipart/form-data">
 <input type="file" name="attachment" onchange="read_input(this);" />
</form> 
```

Javascript + jQuery：

```
function read_input(input) {

    if (input.files && input.files[0]) {

        var reader = new FileReader();

        reader.onload = function (e) {

            result = e.target.result;

            $(".attachment").html('<img src="'+result+'" alt="preview" />');

        }

        reader.readAsDataURL(input.files[0]);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:56:36.217

```
document.getElementById('upload').onchange = uploadOnChange;

function uploadOnChange() {
    var filename = this.value;
    var lastIndex = filename.lastIndexOf("\\");
    if (lastIndex >= 0) {
        filename = filename.substring(lastIndex + 1);
    }
    document.getElementById('filename').value = filename;
} 
```

# visual-studio-2008 - 如何在 Visual Studio 2008 中集成 Clang？

> ID：15320932
> 
> 赞同：2
> 
> 时间：2013-03-10T09:52:08.543
> 
> 标签：visual-studio-2008, clang

我是 Clang 的新手。任何人都可以帮助我使用在 VS2008 上开发的 clang 编译器运行我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-13T12:03:26.107

您可以使用任何兼容的编译器替换底层工具，`Visual Studio 2008`例如 Clang、英特尔编译器和更新版本的 MS 编译器。由于您还需要匹配的头文件和库，因此最简单的方法是安装最新版本`Visual Studio Community`并编辑`Visual Studio 2008`配置文件以指向新环境。配置文件是：

*   `<VS2008PATH>/VC/vcpackages/VCProjectEngine.dll.config`
*   `<VS2008PATH>/VC/vcpackages/AMD64.VCPlatform.config`

我在这里更详细地描述了这些步骤： [Visual Studio 2008 with c++11](https://stackoverflow.com/questions/20302891/visual-studio-2008-with-c11)

# sql - 如何在 where 子句中避免像 UPPER 这样的函数

> ID：15320943
> 
> 赞同：0
> 
> 时间：2013-03-10T09:53:19.577
> 
> 标签：sql, sql-server, oracle

建议不要使用 where 子句中的函数。但是对于以下查询，我该如何避免呢？

```
SELECT empID from EmployeeTable
   WHERE UPPER(FirstName) = UPPER(LastName) 
```

是的，这个例子过于简化了，但我说的是连接不同的表并且无法控制数据的大小写。我只需要把它写在不区分大小写的地方。

编辑：我实际上需要 Oracle 和 SQL Server 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:43:00.947

> “建议不要使用where子句中的函数”

此建议仅适用于以下情况：

1.  列被索引；和
2.  我们想在搜索中使用索引。

您没有提供相关索引的详细信息，并且您说代码示例“过于简化”，因此显然我们无法给您适当的建议。但是，在 WHERE 子句中没有其他标准，因此，在不区分大小写的索引 on 的情况下`(lastname, firstname)`，您可以从您发布的语句中获得的最好结果是对索引进行完全快速扫描。

尽管取决于命中与总行数的比率，您仍可能从全表扫描中获得更快的搜索。在这种情况下，您无论如何都不想使用索引，因此发布的查询就可以了。

此建议适用于 Oracle；我对 SQL Server 的性能知之甚少，无法说出什么在该平台上最有效。关键是查询优化是*关于细节的*。几乎每一个你想提到的“建议”都有例外或警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:28:13.100

在混合大小写数据中，您无法避免 UPPER/LOWER。您可以在 Oracle 中创建基于函数的索引来提高性能：

[http://docs.oracle.com/cd/B28359_01/server.111/b28318/schema.htm#CNCPT1161](http://docs.oracle.com/cd/B28359_01/server.111/b28318/schema.htm#CNCPT1161)

[http://www.oracle.com/pls/db111/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB28359_01%2Fserver.111%2Fb28310%2Findexes003.htm%23ADMIN11730](http://www.oracle.com/pls/db111/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB28359_01%2Fserver.111%2Fb28310%2Findexes003.htm%23ADMIN11730)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:56:06.717

用于`collate`定义不区分大小写的排序规则

```
SELECT empID from EmployeeTable
WHERE FirstName = LastName collate Latin1_General_100_CI_AS 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!3/75e5d/7)

# javascript - sencha touch 应用程序布局不会更改为横向

> ID：15320945
> 
> 赞同：0
> 
> 时间：2013-03-10T09:53:30.367
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我有一个使用 sencha touch 的基本应用程序，可以将用户从一个视图带到另一个视图。当我出于某种原因将模拟器更改为横向时，它的布局保持不变，仍然显示为纵向。我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:24:36.577

在视口上添加orientationchange 事件：

```
initialize: function () {
    // Add a Listener. Listen for [Viewport ~ Orientation] Change.
    Ext.Viewport.on('orientationchange', 'handleOrientationChange', this, {buffer: 50 });
    this.callParent(arguments);
},
handleOrientationChange: function(){
    console.log('handleOrientationChange');
    // Execute the code that needs to fire on Orientation Change.
} 
```

# c++ - 有没有一种简单的方法来获得 std::bitset 的 2 的补码

> ID：15320947
> 
> 赞同：5
> 
> 时间：2013-03-10T09:53:50.843
> 
> 标签：c++, bit-manipulation, bitwise-operators, bitset

我`std::bitset<N>`在我的程序中使用，需要找到最不重要的设置位，并进行了如下简单的计算：

```
int num = 5;
int res = num & (-num); 
```

之后设置最低有效位，`num`其余`res`均为`0`'s。这可以`-5`用 2 的补码表示法表示。

但是我发现`std::bitset<N>`一元没有任何运算符重载，`operator -`这会给我底层位的 2 补码。有没有一种简单的方法来实现 2 的补码`std::bitset<N>`？我总是可以`operator ~`用来翻转比特并循环它们，从 LSB 到 MSB 进行求和和进位，但我正在寻找一种可以避免这种情况的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:39:23.530

`std::bitset`不提供任何补充方法。由于您必须自己计算补码`operator~`和一个额外的循环，因此只需跳过`operator~()`并直接搜索 LSB：

```
template <int N>
size_t least_significant_bit(const std::bitset<N> &bt){
    for(size_t i = 0; i < bt.size(); ++i){
        if(bt.test(i))
            return i;
    }
} 
```

我想它不能比这更微不足道了；）。

请注意，`least_significant_bit`如果根本没有位，则未指定结果。可以返回`N`或更改循环以测试`bt.test(N)`哪个会引发异常，但毕竟在空位集中查找 LSB 并没有真正意义。

进一步注意，如果您对边界检查不感兴趣，可以使用`std::bitset<N>::operator[]`而不是。`std::bitset<N>::test`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-06T02:48:21.103

除非我遗漏了什么，否则应该这样做

`std::bitset<N> twos_comp = std::bitset<N>((~input).to_ulong() + 1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:59:44.323

进行二进制补码的一种非常方便的方法是在您的位集中找到最低有效位 0，将其设置为 1 并将所有较低有效位设置为 0。

伪代码：（假设set[0]是最低有效位，如果不是，转过来）

```
int i = 0;
while (i < set.length && set[i])
  {
     set[i] = 0;
     ++i;
  }

if (i < set.length)
  set[i] = 1; 
```

# javascript - ajax刷新部分页面错误

> ID：15320948
> 
> 赞同：0
> 
> 时间：2013-03-10T09:54:02.017
> 
> 标签：javascript, refresh, reload

出于某种原因，当我的 ajax 重新加载页面的一部分时，我得到了这个奇怪的错误，当您单击其他任何内容时，页面会重新加载。我的页面位于[http://thomaswd.com/organizer/dashboard](http://thomaswd.com/organizer/dashboard)。转到侧边栏并创建一个新类。然后看右边，然后单击其中一个手风琴标题。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:08:56.073

您已将表单设置为将表单值提交到**addclass.php**文件：

```
<form target="hiddenframe" action="addclass.php" method="post" 
                                  onsubmit="hideaddcourse(),refreshclasses()"> 
```

PHP 在服务器端执行，因此您的页面会重新加载。

# python - 如何重新加载树视图内容？

> ID：15320949
> 
> 赞同：0
> 
> 时间：2013-03-10T09:54:18.437
> 
> 标签：python, treeview, gtk, pygtk, gtktreeview

我有一个带有 gtk.TreeView 和 gtk.TreeStore 的 PyGTK 应用程序，我已经填充了几行。这工作得很好，但现在我想重新加载树视图的内容，我真的不明白如何做到这一点。

所以我清除树存储并重新创建所有行。它可以工作，但问题是用户可能已经扩展了某些行。它们现在将被重置，因为树存储的内容已完全重新创建。

有没有更好的方法来重新加载树存储，以便它只更新内容？大多数行实际上是相同的，差异通常只是其中一列中的一个数字。完全重建它的接缝有点过于复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:17:50.550

您将获得一个[gtk.TreeIter](http://www.pygtk.org/docs/pygtk/class-gtktreeiter.html)用于要更改的行，然后使用`gtk.TreeStore.set`and `gtk.TreeStore.set_value`( [gtk.TreeStore](http://www.pygtk.org/docs/pygtk/class-gtktreestore.html) ) 更改该行的内容。本教程还有更多信息：[TreeModel 接口和数据存储](http://www.pygtk.org/pygtk2tutorial/sec-TreeModelInterface.html)

# php - 更改 PayPal 中默认字段的文本？

> ID：15320950
> 
> 赞同：0
> 
> 时间：2013-03-10T09:54:32.530
> 
> 标签：php, button, paypal, customization, dynamically-generated

有什么方法（**不使用 Express Checkout**）可以更改订单摘要 PayPal 付款页面上“项目总计”的默认文本？

**仅**参考我上一个问题中的图片：[将项目总数添加到 PayPal 的订单摘要中，以进行完整的购物车付款](https://stackoverflow.com/questions/15185271/adding-item-total-to-paypals-order-summary-for-full-aggregate-cart-payment/15187987?noredirect=1#15187987)

我只指图像，因为我现在根本不使用购物车上传。相反，我使用 ButtonManagerAPI 来动态创建具有正确总购物车价格的按钮。我现在要做的就是`Item total`将付款页面上的文本更改为，`Total`或者如果可能的话，只需删除该`item total`字段？这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:21:20.517

不，这对于（网站）支付标准（也不是 Express Checkout，请注意）是不可能的。

我们目前不支持在我们的结帐区域内更改文本的各个部分，除非是明确设计的，例如`BRANDNAME`快速结帐中的参数）。

# java - 为什么在android中命名资源不能使用大写？

> ID：15320951
> 
> 赞同：4
> 
> 时间：2013-03-10T09:55:09.393
> 
> 标签：java, android, xml, android-layout

我最近开始在 android 中开发应用程序，很多教程都说我们不应该使用大写来命名资源。这是为什么？此外，不允许提供扩展名，例如 .png 和 .xml。如果我有两个文件 button.png 和 button.xml 应用程序如何区分这两个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:01:06.530

1.  不允许在资源中使用大写字母只是为了严格遵循一些约定

2.  您不能在同一个资源文件夹中使用两种不同类型的同名资源。例如，假设您在 drawable-hpdi 中有两个资源文件。它们是 a.png 和 a.xml。在这里编译编译器会显示错误。但是，如果您将 a.png 放在 drawable-hdpi 中，将 a.xml 放在 drawable-mdpi 中，则不会显示任何错误，因为这两个资源将用于两种完全不同的设备类型。

我发现另一个有趣的事情是，如果您在同一个文件夹中使用 a.png 和 a.xml，那么错误将显示 a.xml 是重复的。但是如果你在同一个文件夹中使用 a.jpg 和 a.png ，那么它会显示 a.png 是重复的。为此，我们可以猜测没有文件类型优先级。编译器遵循自上而下的搜索。由于 a.png 放在 a.xml 上，因此编译器将首先找到 a.png 然后当他们找到同名的 xml 文件时，他们将显示错误。出于同样的原因，在使用 a.jpg 和 a.png 时，a.png 会显示错误。

注意这个答案完全基于我的观察。我没有找到任何关于此的书面文件。因此，如果有人用证据证明我的错误，那将不胜感激

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:29:30.623

由于资源文件的文件名部分将用于在生成的 Java 文件中创建资源 ID，因此
`gen/<your-package-path>/R.java`
您不能在同一目录中使用具有不同扩展名的相同资源文件名。

[请参阅位图文件](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)的资源参考中的资源文件名的使用

由于资源 ID 是 Java 变量，因此最好遵循 Java 提议的变量约定（参见[Wikipedia Naming conventions for Java](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)）以小写字母开头。

# perl - 无法摆脱相同的记录

> ID：15320952
> 
> 赞同：0
> 
> 时间：2013-03-10T09:55:13.773
> 
> 标签：perl

我有一个输入文件存在这么多冗余记录，我尝试编写一个程序来删除部分冗余，但似乎仍然存在一些冗余，但我无法找出它有什么问题

ARGV[0] 是带冗余的输入文件

ARGV[1] 是没有输入文件冗余的输出文件

```
open(Input,"<./$ARGV[0]");
open(Output,">./$ARGV[1]");

while( eof(Input) !=1)
{
    push(@Records,readline(*Input));
}
close Input;

# Solution 2
for($i=0;$i<$#Records;$i++)
{
    for($j=$i+1;$j<$#Records;$j++)
    {
        if($Records[$i] eq $Records[$j])
        {
            $Records[$j] = undef;
        }
    }
}

@Records = grep defined,@Records;

=begin
# Solution 1 have some problems
for($i=0;$i<$#Records;$i++)
{
    for($j=$i+1;$j<$#Records;$j++)
    {
        if($Records[$i] eq $Records[$j])
        {
            splice @Records,$j,1;
            $j = $j-1;  
        }
    }
}
=end
=cut

foreach $Each(@Records)
{
    print Output $Each;
}
close Output; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:21:11.540

这是一个更现代的 perl 解决方案：

```
open(my $fh_input, '<', $ARGV[0]) or die $!;
open(my $fh_output, '>', $ARGV[1]) or die $!;
my %records = ();

while( my $line = <$fh_input> )
{
   $records{$line} = 1;
}

foreach my $record(keys %records)
{
    print $fh_output $record;
}

close $fh_input;
close $fh_output; 
```

如您所见，我使用哈希来避免重复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:00:33.030

您可以简单地使用`uniq()`.

```
my @records;
while( eof(Input) !=1)
{
    push(@records,readline(*Input));
}
close Input;

@records = uniq(@records); ## Unique elements in @records 
```

请在[此处](https://metacpan.org/module/List%3a%3aUniq)查看其文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T10:29:07.927

您的“解决方案 1”是最接近的。将数组元素设置为`undef`不会将其删除，并且如果您应该启用警告，则会导致警告消息。

此解决方案检查索引处的每条记录，`$j`如果`splice`它是重复的，则将其删除（这会将剩余的记录打乱，以便下一个要比较的记录位于*同一索引*处）或将其保留在原位并跳过它递增`$j`。

最佳实践是使用词法文件句柄（如`$infh`）而不是裸词文件句柄（如`Input`）。你也应该使用 的三参数形式`open`，并*经常*检查它是否成功。在这里，我习惯于`autodie`避免`open`明确地检查每一个。`open`如果任何调用失败，它将抛出异常。

```
use strict;
use warnings;
use autodie;

my ($infile, $outfile) = @ARGV;

my @records = do {
    open my $infh, '<', $infile;
    <$infh>;
};

for my $i (0..$#records-1) {
    my $j = $i + 1;
    while ($j < @records) {
        if ($records[$j] eq $records[$i]) {
            splice @records, $j, 1;
        }
        else {
            ++$j;
        }
    }
}

open my $outfh, '>', $outfile;
print $outfh $_ for @records;
close $outfh; 
```

使用哈希的替代解决方案如下所示

```
use strict;
use warnings;
use autodie;

my ($infile, $outfile) = @ARGV;

open my $infh,  '<', $infile;
open my $outfh, '>', $outfile;

my %seen;

while (<$infh>) {
  print $outfh $_ unless $seen{$_}++;
} 
```

# javascript - 从数据数组中删除值

> ID：15320954
> 
> 赞同：0
> 
> 时间：2013-03-10T09:55:24.363
> 
> 标签：javascript, html, arrays, json, option

我有一个数据数组，用于填充三个下拉`<select>`框。我的问题是如何从数组中删除相同的值（不是数组本身，而是从下拉列表中删除（或）禁用相同的值）？

例如：

```
data = {
firstbox_a: ['grpA_1','grpA_2','grpA_3','grpA_4'],
firstbox_b: ['grpB_1','grpB_2','grpB_3','grpB_4'],
grpA_1: ['y','n','un','st'],
grpA_2: ['y','n','un','st'],
grpA_3: ['y','n','un','st'],
grpA_4: ['y','n','un','st'],
grpB_1: ['a','b','avg','unc'],
grpB_2: ['a','b','avg','unc'],
grpB_3: ['a','b','avg','unc'],
grpB_4: ['a','b','avg','unc']
} 
```

`grpA_1`具有`grpA_4`相同的值。如果我为 选择“y” `grpA_1`，则无法选择“y”，方法是禁用或删除`grpA_2`to中的值`grpA_4`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:20:27.473

想到的一种解决方案可能是：

将事件附加到下拉列表中的项目选择。

在这种情况下，添加一个函数 IF:
任何其他下拉列表都已被选择为相同的值。
防止默认。

**例子**

```
$('.target').change(function() {
    // Your code goes in here :)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:25:13.723

根据之前的答案，不确定我是否理解了您的问题。我打算使用您的数据，但不确定如何填充列表。

此代码将创建两个列表。如果在第二个列表中选择了一个选项，则第一个列表中**具有相同索引**的项目也将被禁用。

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}
function toggleClass(element, newStr)
{
    index=element.className.indexOf(newStr);
    if ( index == -1)
        element.className += ' '+newStr;
    else
    {
        if (index != 0)
            newStr = ' '+newStr;
        element.className = element.className.replace(newStr, '');
    }
}
function forEachNode(nodeList, func)
{
    var i, n = nodeList.length;
    for (i=0; i<n; i++)
    {
        func(nodeList[i], i, nodeList);
    }
}

window.addEventListener('load', mInit, false);

function onList2Changed(list2_Element, list1_Element)
{
    var i;

    for (i=0; i<list1_Element.options.length; i++)
    {
        if (i == list2_Element.selectedIndex)
            list1_Element.options[i].setAttribute('disabled', 'true');
        else
            list1_Element.options[i].removeAttribute('disabled');
    }
}

function mInit()
{
    var opt, mSel1, mSel2;
    var i, numOpts = 10;

    mSel1 = newEl('select');
    for (i=0; i<numOpts; i++)
    {
        opt = newEl('option');
        opt.appendChild( newTxt("boxA: " + (i+1)) );
        mSel1.appendChild(opt);
    }
    mSel1.setAttribute('size', i);
    document.body.appendChild(mSel1);

    mSel2 = newEl('select');
    for (i=0; i<numOpts; i++)
    {
        opt = newEl('option');
        opt.appendChild( newTxt("disable BoxA option: " + (i+1)) );
        mSel2.appendChild(opt);
    }
    mSel2.addEventListener('change', myFunc);

    function myFunc()
    {
        onList2Changed(mSel2, mSel1);
    }
    document.body.appendChild(mSel2);
}

</script>
<style>
</style>
</head>
<body>
</body>
</html> 
```

# javascript - 动画形式大小

> ID：15320958
> 
> 赞同：2
> 
> 时间：2013-03-10T09:55:34.557
> 
> 标签：javascript, jquery, forms, css, animation

我想在用户第一次选择输入表单时为输入表单的高度设置动画。所以表格只是说 1 行高，他们去输入它，它变成了大约 10 行高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:38:29.223

这是“仅限css”的方法。

只需在文本区域上使用 :focus 选择器并在焦点状态下更改文本区域的高度

```
textarea{
    height:20px;
    width:150px;
    -webkit-transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
}

textarea:focus{
    height:50px;
} 
```

演示：http: [//jsfiddle.net/NHZzt/](http://jsfiddle.net/NHZzt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:34:05.307

首先，您想使用 a`<textarea/>`来代替，这样您可以操纵`rows`属性显示的文本行数。那是，

```
<textarea rows="10"></textarea> 
```

显示 10 行文本的元素。

关于动画，您可以`.animate()`在扩展和折叠文本行数时使用该方法进行平滑过渡。

我已经将它包装在一个 jQuery 插件中以便于使用。

```
$.fn.expandable = function(){
    return this.each(function(){
        var $self = $(this);
        var isExpanded = false;
        var collapseTimeout;
        $self.on({
            focusin: function(evt) {
                if (isExpanded || evt.keyCode < 46 && evt.keyCode != 8 && evt.keyCode != 32) 
                    return true;
                isExpanded = true;
                clearTimeout(collapseTimeout);
                $self.stop(true).animate({
                    rows: 10
                }, "slow");
            },
            focusout: function() {
                collapseTimeout = setTimeout(function(){
                    $self.stop(true).animate({
                        rows: 1
                    }, "slow");
                }, 200);
                isExpanded = false;
            }
        });
    });
}; 
```

事件`focusin`处理程序将展开元素以显示 10 行文本。它还将清除折叠超时设置以在元素失去焦点后将显示更改为 1 行文本。折叠超时在`focusout`事件处理程序中设置。

动画速度设置为`slow`，折叠超时设置为`200`ms ，要展开的文本`10`行数为文本行数。

以下将初始化`textarea`页面中的所有元素：

```
$("textarea").expandable(); 
```

[你可以在这里看到一个活生生的例子。](http://jsfiddle.net/2P94e/)

# c# - 涉及状态的抽象序列处理

> ID：15320960
> 
> 赞同：1
> 
> 时间：2013-03-10T09:55:42.103
> 
> 标签：c#, linq, sequence, state

假设我有一个从`Animal`和派生的异构类型序列`Food`。

这应该在派生类型的实例中进行转换`Fed`：`NotFed`和`BadFed`.

```
var seq1 = new[] { new Fish(), new FishFood(), new Horse(), new DogFood(), new Dog() }; 
```

应该变成

```
var seq2 = new [] {  new FishFed(), new HorseBadFed(), new DogNotFed() }; 
```

逻辑是：

*   如果 an`Animal`在下一个元素中有适当的食物，`XXXFed`则创建一个实例；

*   如果下一个元素有食物。但对此不好`Animal`-> `XXXBadFed`;

*   否则，如果不是下一个元素中的食物 -> `XXXNotFed`。

在下一项上使用条件处理一个序列，这对于迭代来说并不简单。

如何使用 Linq 或`IEnumerable<T>`扩展方法来抽象涉及状态的序列处理？

我知道`Aggregate`使用累加器功能来做类似的事情；这是我的情况吗？或者更好的可以用它来创建一个新的序列？

在没有命令式代码的情况下使用[memoization](http://en.wikipedia.org/wiki/Memoization)函数解决此类问题是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:27:38.500

我将首先使用 Zip 函数创建对，然后改为处理对的集合。

```
 var seq1 = new object[] { new Fish(), new FishFood(), new Horse(), new DogFood(), new Dog() };
        var count = seq1.Length;
        var foodSeq = seq1.Skip(1).Concat(new object[]{null});
        var dinnerPairs = seq1.Zip(foodSeq, (eater, food) => Tuple.Create(eater as Animal, food as Food)).Where(t => t.Item1 != null);
        var result = dinnerPairs.Select(t => t.Item1.Feed(t.Item2)); 
```

Animal 类的 Feed 方法将被每个动物覆盖。例如对于狗，它会在 null 的情况下返回 DogNotFed，在 DogFood 的情况下返回 DogFad，否则返回 DogBadFed。如果您有严格的命名约定，则可以使用反射动态创建这些类型。

```
public abstract class Animal
{
    public abstract Animal Feed(Food food);
} 
```

编辑：我如何想象 Feed 方法可以使用反射解决您的逻辑，但未经测试。

```
public Animal Feed(Food food)
    {
        var myType = this.GetType().FullName;
        if (food == null) return GetNewObject(myType + "NotFed") as Animal;
        if( food.GetType().FullName == myType+"Food") return GetNewObject(myType+"Fed") as Animal;
        return GetNewObject(myType+"BadFed") as Animal;
    }

    public static object GetNewObject(string typeName)
    {
        try
        {
            var t = Type.GetType(typeName);
            return t.GetConstructor(new Type[] { }).Invoke(new object[] { });
        }
        catch
        {
            return null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T10:18:50.087

在现实生活中，谁负责吃东西、生病、饱或仍然饿着肚子？这将是动物本身。

那么为什么不让一个类型`IConsumeFood`实现一个接口呢？`Animal`它的方法`Consume`会得到一些`food`并返回食物消耗的结果。

然后你就可以对每只动物调用这个方法，把你所有的食物（整个数组）放在那里，让动物决定吃什么，不吃什么，然后返回适当的结果，例如 XXXFed、XXXNotFed ， ETC。

我希望你在这里避免的是使用类型名称或周围有大量“ifs”的操作。即使是原型设计也太脏了。想想责任和顾虑，这就是为什么我们首先要有 OOP :)

# reflection - 是否可以接收所有实现某个接口的结构？

> ID：15320963
> 
> 赞同：1
> 
> 时间：2013-03-10T09:56:01.077
> 
> 标签：reflection, go

我检查了`reflect`包文档，但没有找到任何东西。我要做的是找到所有实现接口x的结构。然后遍历所有结构以执行动作 y。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:18:58.860

使用带有这样接口的类型断言（[游乐场链接](http://play.golang.org/p/GzwtTwd4mG)）。我假设你有一些`struct`例子（可能在`[]interface{}`下面的例子中）。

```
package main

import "fmt"

type Zapper interface {
    Zap()
}

type A struct {
}

type B struct {
}

func (b B) Zap() {
    fmt.Println("Zap from B")
}

type C struct {
}

func (c C) Zap() {
    fmt.Println("Zap from C")
}

func main() {
    a := A{}
    b := B{}
    c := C{}
    items := []interface{}{a, b, c}
    for _, item := range items {
        if zapper, ok := item.(Zapper); ok {
            fmt.Println("Found Zapper")
            zapper.Zap()
        }
    }
} 
```

您还可以[动态定义界面](http://play.golang.org/p/a2dlrinfPL)并在循环中使用`item.(interface { Zap() })`，如果它是一次性的并且您喜欢这种风格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:08:41.273

这不能在运行时完成，只能通过检查程序包（以及递归的所有导入）静态地完成。或者通过静态检查生成的 .{o,a} 文件。

但是，可以手动构建满足接口的类型列表（不仅限于结构，为什么？）：

```
if _, ok := concreteInstance.(concreteInterface); ok {
        // concreteInstance satisfies concreteInterface
} 
```

# asp.net - 通过 Asp.net 后面的代码访问虚拟目录文件夹

> ID：15320967
> 
> 赞同：6
> 
> 时间：2013-03-10T09:56:10.603
> 
> 标签：asp.net, directory, virtual

我正在尝试从代码隐藏访问虚拟目录文件夹。

*   ASP.Net 网站名称：SuperImages
*   物理文件夹：C:\images
*   虚拟目录文件夹：allimages（与 App_Data、Scripts、Properties 文件夹处于同一级别）

我正在尝试访问并计算此文件夹中的项目数，然后将它们显示在网页上。

我该怎么做？

提前致谢！

==================================================== ======================

更新：从下面的帖子来看，似乎 Server.MapPath 会给我正确的物理路径。但是，在我看来，我走错了物理路径。原因应该是我正在运行“调试”模式。

因此，知道如何确保 Server.MapPath 正确指向并在调试模式下运行吗？

==================================================== =====================

**解决方案 ：**

问题是在调试模式下，我使用的是 VS 开发服务器而不是我的本地 IIS。我在本地 IIS 中为我​​的应用程序重新创建了一个虚拟目录。在这个新创建的应用程序中为“allimages”文件夹重新创建了另一个虚拟目录，它解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T10:03:12.963

你可以这样做：

```
DirectoryInfo dir= new DirectoryInfo(Server.MapPath("/allimages")); 
```

然后您可以获取此文件夹中的文件，如下所示：

```
FileInfo[] files = dir.GetFiles(string searchPattern,SearchOption searchOption); 
```

对于文件的数量，您可以简单地进行数组计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:58:05.693

您可以像从普通应用程序访问它一样访问它。我会使用 Directory 类来计算项目的数量。只要确保你有足够的权限。

```
Directory.EnumerateFiles(myPath).Length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:03:28.030

正如帖子中建议的
[文件夹中的文件计数](https://stackoverflow.com/questions/2242564/file-count-from-a-folder)
您可以这样。

您可以使用

**[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)**方法

另请参阅**[Directory.GetFiles 方法（字符串、字符串、搜索选项）](http://msdn.microsoft.com/en-us/library/ms143316.aspx)**

您可以在此重载中指定搜索选项。

**TopDirectoryOnly**：仅包括搜索中的当前目录。

**AllDirectories**：在搜索操作中包括当前目录和所有子目录。此选项包括重新解析点，例如搜索中的已安装驱动器和符号链接。

```
// searches current directory and sub directory
int fCount = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories).Length;
// searches current directory
int fCount = Directory.GetFiles(path, "*.*", SearchOption.TopDirectory).Length; 
```

您将不得不使用`Server.MapPath`您的虚拟目录文件夹。

```
 string dir = Server.MapPath(@"/Content/slideshow/images/image");
  FileInfo[] files;
  int numFiles;
  files = (new System.IO.DirectoryInfo(dir)).GetFiles("filePattern");
  numFiles = files.Length; 
```

# sql - 查询以查找一个表中的行总和，该总和等于另一表上的一个或多个行

> ID：15320968
> 
> 赞同：1
> 
> 时间：2013-03-10T09:56:13.393
> 
> 标签：sql, algorithm, postgresql

我需要查询帮助。任务是获取一个表的行，其数量将汇总为另一个表中的值，反之亦然。

示例说明：

```
Table 1:                                Table2:

  r_id   |    r_date   |   r_amt          p_id   |    p_date   |   p_amt    
---------+-------------+--------        ---------+-------------+--------
    1    |  2/23/2012  |   200              1    |  3/22/2012  |   450
---------+-------------+--------        ---------+-------------+--------
    2    |  3/21/2012  |   100              2    |  5/25/2012  |   530
---------+-------------+--------        ---------+-------------+--------
    3    |  4/12/2012  |   300              3    |  5/26/2012  |   700
---------+-------------+--------        ---------+-------------+--------
    4    |  4/18/2012  |   250              4    |  5/26/2012  |   40
---------+-------------+--------        ---------+-------------+--------
    5    |  5/20/2012  |   130
---------+-------------+--------
    6    |  5/21/2012  |   740
---------+-------------+-------- 
```

现在这些测试数据是这样的，表1的几行加起来会变成表2的一行，反之亦然。

我想要一个查询来分析上述数据，使一个表中的记录总和等于另一个表中的一行。

分析完成后，它应该将数据提供给这样的新表。

让我们称这个表`match`

```
 m_id   |    tbl1     |   tbl2   | match_type
---------+-------------+----------+-----------
    1    |    1,4      |   1      |   n-1
---------+-------------+----------+-----------
    1    |    2,3,5    |   2      |   n-1
---------+-------------+----------+-----------
    1    |     6       |   3,4    |   1-n
---------+-------------+----------+----------- 
```

现在，我正在计算每个表的总和并输入一个临时表，然后与该表进行比较以获得上述结果。但是对于超过 10 行，查询变得非常慢并且挂起我的开发服务器。

### `[Link to my test Queries](http://developers.mrnepal.com/qtest.sql)`

执行此任务的有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:57:04.387

好的，所以这是一个粗略的答案。我还没有测试过。递归 CTE 有一些奇怪的问题，我可能遇到了一个问题，但这应该能让你继续前进。可能还可能进行一些性能调整，但这可能会让您继续前进。

算法大致如下：

1.  生成所有行的所有排列

2.  将一侧的每个排列与另一侧的每一行进行比较

第一个将使用递归 CTE 完成。第二个是简单的连接。

```
WITH RECURSIVE table1_combos as (
     SELECT r_id as last_id, r_id::text as path, r_amt as amount
       FROM table1
  UNION ALL 
     SELECT r.r_id as last_id, p.path || ',' || r_id::text, p.amount + r_amt
       FROM table1_combos p
 CROSS JOIN table1 r
      WHERE r.r_id < p.last_id
),
RECURSIVE table2_combos AS (
     SELECT p_id as last_id, p_id::text as path, p_amt as amount
       FROM table2
  UNION ALL 
     SELECT p_id AS last_id, p.path || ',' || p_id::text, p.amount + p_amt
       FROM table2_combos p
 CROSS JOIN table2 
      WHERE p_id < p.last_id
)
SELECT c.path, p_id::text, c.amount, 'n-1' as type
  FROM table1_combos c
  JOIN table2 t ON c.amount = p_amt
UNION ALL
SELECT r_id::text, c.path, c.amount, '1-n' as type
  FROM table2_combos c
  JOIN table1 t ON r_amt = c.amount; 
```

至于性能，根本问题是您将有大量的搜索空间。不幸的是，没有一种相当简单的方法可以做到这一点。组合空间非常大，每增加一行，它就会变得更大。

嗯，重新审视我的估计。10 行表应生成 630 万个组合，而 11 行表应生成 6860 万个组合。在 PostgreSQL 中，您可以使用以下 SQL 语句检查预期组合的数量：

```
select sum(factorial(11)/factorial(f)) from generate_series(1, 11) f; 
```

对于 11 行表。注意如下：

```
select sum(factorial(100)/factorial(f)) from generate_series(1, 100) f;

         sum                                                                    

--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
----------------------
 1603607401161831447335715093560135199544316103019165207641822220922316539151565
30909999021448995531507013709811500779735358328288932830176709764490323163992001
.00000000000000000000
(1 row) 
```

如果您有一个 100 行的表，您将等待一段时间......

现在，您可以通过限制 CTE 本身来进一步解决这个问题，例如“当你达到另一个表的最大值时停止”。

# jpa - 默认构造函数未定义隐式超级构造函数 QueryDslRepositorySupport()。必须定义显式构造函数

> ID：15320971
> 
> 赞同：0
> 
> 时间：2013-03-10T09:56:19.253
> 
> 标签：jpa, spring-roo, spring-data, spring-data-jpa

我使用**Spring Roo** + **Spring Data** + **QueryDSL**，我有以下类/接口：

```
public interface FamilyAdvertisementRepositoryCustom {
}

@RooJpaRepository(domainType = FamilyAdvertisement.class)
public interface FamilyAdvertisementRepository extends FamilyAdvertisementRepositoryCustom {
}

public class FamilyAdvertisementRepositoryImpl extends QueryDslRepositorySupport implements FamilyAdvertisementRepositoryCustom {
   //NO CONSTRUCTOR
} 
```

全部在以下包中：`com.bignibou.repository;`

使用以下配置：

```
<repositories base-package="com.bignibou.repository" /> 
```

但是，我收到此错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:aspectj-maven-plugin:1.2:compile (default) on project bignibou: Compiler errors : [ERROR] error at public class FamilyAdvertisementRepositoryImpl extends QueryDslRepositorySupport implements FamilyAdvertisementRepositoryCustom { [ERROR] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ [ERROR] /home/julien/Documents/donnees/projets/site-garde-enfants/java/bignibou/src/main/java/com/bignibou/repository/FamilyAdvertisementRepositoryImpl.java:5:0::0 Implicit super constructor QueryDslRepositorySupport() is undefined for default constructor. Must define an explicit constructor 
```

看起来***QueryDslRepositorySupport***类不再具有默认构造函数，而以前是这种情况。这是为什么？？

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:04:45.453

引入更改是为了强制将`Builder`其返回`getBuilder()`到单个域类型。只需创建一个不带参数的构造函数，并使用您为其实现存储库的域类型调用超类的构造函数。

# django - 如何允许用户输入逗号

> ID：15320974
> 
> 赞同：2
> 
> 时间：2013-03-10T09:56:43.460
> 
> 标签：django

我有一个交易模型。该交易模型有一个金额字段（DecimaField）。当我尝试输入**1,000**时，它不允许我保存数据但没有显示错误，它只是刷新。我尝试将本地化放在模型表单中，但它仍然不允许我。

如何让表单接受逗号（1,000）？

这是我的代码：

**表格.py**

```
class AddTransactionForm(forms.ModelForm):
    amount = forms.DecimalField(localize=True)

    class Meta:
        model = Transaction
        exclude = ('envelope', 'uid',)

    def __init__(self, user, *args, **kwargs):
        super(AddTransactionForm, self).__init__(*args, **kwargs)
        //other codes here 
```

**视图.py**

在完全保存之前，我也尝试在视图中替换逗号，但它给了我一个错误。

```
def transaction(request):   
    if request.method == 'POST':
        if request.POST['process'] == 'addtrans':
            tform = AddTransactionForm(request.user, 
                                       request.POST)
            if tform.is_valid():
                if request.POST['type'] == 'withdrawal':
                    trans = tform.save(commit=False)
                    trans.amount = 0 - trans.amount
                    trans.save()
                    messages.success(request,
                        "Transaction created successfully.")
                else:
                    trans = tform.save()
                    messages.success(request,
                        "Transaction created successfully.")

                if not trans.account:
                    env = Envelope.objects.get(
                        user=request.user,
                        name='Unallocated Income')
                    trans.envelope = env
                    trans.save()
                    env.amount += trans.amount
                    env.save()
                    messages.success(request, 
                        "Unallocate income save")               
                return HttpResponseRedirect(reverse('transactions:transaction'))    

    return render(request, 'trans_list.html', {
        .........
    }) 
```

我不想修改我的模型。表单或视图中有方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T00:05:36.677

这取决于您希望逗号具有什么含义。它是用作千位分隔符，还是要启用基于区域设置的数字输入。

假设我们谈论的是代表一千美元和二十三美分的十进制数。

在`en-us`语言环境中，这可以通过`1000.23`或使用千位分隔符作为`1,000.23`. 某些语言环境使用逗号来标记小数点分隔符，因此例如在`de-de`（德语）语言环境中，此数字可以表示为`1000,23`或`1.000,23`。

从示例中可以看出，逗号可以有两种不同的含义。

如果要允许在表单字段中输入千位分隔符，请在文件中设置[USE_THOUSAND_SEPARATOR=True 。](https://docs.djangoproject.com/en/2.2/ref/settings/#std:setting-USE_THOUSAND_SEPARATOR)`settings.py`如果在`en-us`区域设置中，用户将能够输入数字`1,000.23`或`1000.23`表示相同的数字。在`de-de`语言环境中，这将允许为千位分隔符输入一个点。

默认的 Django 语言环境是`en-us`. 如果您还想支持其他语言环境并根据语言环境输入不同的数字格式，则必须添加`django.middleware.locale.LocaleMiddleware`到您的`MIDDLEWARE_CLASSES`. 该中间件将查看 HTTP`Accept-Language`请求标头并根据每个请求设置区域设置，允许您的用户在自己的区域设置中输入数字，而无需您对代码进行任何更改。

顺便说一句，如果您的十进制字段没有出现错误，那么您的视图代码可能也有问题。例如，可能创建了表单，但由于错误的代码路径，`is_valid()`没有进行调用。然后，生成的 POSTed 表单将只呈现一个没有附加错误列表的表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:24:09.337

为了快速而肮脏地修复您描述的情况，您可以`request.POST`在视图开头复制 querydict，从输入中删除有问题的逗号，然后将调整后的 querydict 传递给表单构造函数 -

```
def transaction(request): 
    if request.POST.method == 'POST':
        post = request.POST.copy()
        if 'amount' in post:
            post['amount'] = pos['amount'].replace(',','')
        tform = AddTransactionForm(request.user, post)
        #... 
```

（您不能更改 request.POST 字典本身，因为它是[不可变](https://docs.djangoproject.com/en/1.5/ref/request-response/#django.http.QueryDict)的）。

# java - 背景更改使强制关闭

> ID：15320978
> 
> 赞同：0
> 
> 时间：2013-03-10T09:57:58.423
> 
> 标签：java, android, background, drawable, setbackground

如果我的首选项中的复选框被选中，我只是编写了一些代码来将我的背景更改为可绘制对象，并在没有选中时将其变为白色。该代码在我的 MainActivity 中运行良好，但在另一个 Activity (LinksActivity) 中给出了 NullPointerException。任何人都可以纠正我吗？

```
package nl.plplpl.ccs;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.widget.LinearLayout;

public class LinksActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@SuppressLint("NewApi")
@SuppressWarnings("deprecation")
@Override
protected void onResume() {
    LinearLayout linkslayout = (LinearLayout) findViewById(R.id.linkslayout);
    SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(this);
    Boolean bg = prefs.getBoolean("background", false);
    if (bg){

        if (Build.VERSION.SDK_INT >= 16)
            linkslayout.setBackground(getResources().getDrawable(R.drawable.background));
        else
            linkslayout.setBackgroundDrawable(getResources().getDrawable(R.drawable.background));
    } else {
        linkslayout.setBackgroundResource(R.color.white);
    }
    super.onResume();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T09:59:32.807

您忘记设置活动内容。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_main);
} 
```

# java - 一类中的两个比较器

> ID：15320982
> 
> 赞同：2
> 
> 时间：2013-03-10T09:58:22.437
> 
> 标签：java, list, class, sorting, comparator

我有两个类，都具有 int ID 属性，并且我必须两次创建这个 Comparator 类才能按 ID 对它们进行排序：

```
public class Class1Comparator implements Comparator<Class1> {

/**
 * Comparator Constructor.
 */
public Class1Comparator() {
}

@Override
public int compare(Class1 arg0, Class1 arg1) {
    return arg0.getId() - arg1.getId();
}
} 
```

和完全相同的一个，但 Class2 而不是 Class1，一切正常，但是有没有办法将它们合并到一个类中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:00:35.577

派生`Class1`并`Class2`从包含公共 ID 的基类以及`Comparator<BaseClass>`.

例子：

```
public class BaseClass
{
    private int id;

    //.
    //.
    //.

    public static class CmpID implements Comparator<BaseClass>
    {
        @Override
        public int compare(BaseClass a, BaseClass b) {
            //Could be implemented null safe
            return a.id - b.id;
        }
    }
} 
```

编辑：您还可以实现一个通用接口，例如

```
public interface IdentifiableObject
{
    int getId();
} 
```

由`Class1`和使用`Class2`。在这里，一个单一的实现`Comparator<IdentifiableObject>`就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:09:27.877

创建一个接口 GetId，该接口定义实现它的类必须具有 getId() 方法。让您的类实现该接口，然后创建一个比较器，该比较器将任何实现该接口的类作为其参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:06:48.137

将 Comparatorclass 称为不同的更通用名称，并更改为 . 这将允许您将相同的 Comparator 与不同的类一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:11:41.943

基本上，您的问题没有适当的解决方案，因为如果您尝试比较两个不同类的实例，则会导致 ClassCastException，因为只能在属于同一类的对象之间进行比较。[正如sam](https://stackoverflow.com/users/1175253/sam)所建议的那样，一种解决方案可能是从另一个类扩展一个类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T10:17:42.063

*   如果这些类有一个共同的祖先，则使用它来获取 ID 并
    执行比较。
*   稍微拉伸一下 - 您可以使用反射来获取每个类的 id 属性。此解决方案会很慢且不可取。
*   如果没有共同祖先并且您不控制代码库，那么您就不走运了。您当然可以进一步扩展它并使用动态代理来模拟[java 中的鸭子打字，](http://thinking-in-code.blogspot.in/2008/11/duck-typing-in-java-using-dynamic.html)但投资回报率会非常低:)

# java - 使用 javac 指定编译类的名称

> ID：15320984
> 
> 赞同：1
> 
> 时间：2013-03-10T09:58:40.277
> 
> 标签：java, javac

我有一个名为的类`fence.java`，在使用 javac 编译后，.class 文件被命名`fence.class`，但我希望它被调用`p1`。使用 gcc 编译 C 文件时，我可以使用 -o 选项来执行此操作，但对于 javac，我无法找到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:00:16.620

这是 Java 中使用的约定，您无法更改。该文件的调用方式应与其包含的类相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:02:27.503

在java中，类文件名由源文件的名称决定，这是由编译器自动完成的，如果要使用该`p1`名称，请将源文件的名称更改为编译前的名称（这样做时请记住更改类名以及文件名。）

# ios - UICollectionView - 多个不同的单元格

> ID：15320990
> 
> 赞同：2
> 
> 时间：2013-03-10T09:59:31.220
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewcell

使用 a `UICollectionView`，我正在尝试添加另一个`UICollectionViewCell`. 第一个代码显示了第一个 Cell，它运行良好。当我尝试添加另一个`UICollectionViewCell`.

```
static NSString *identifier = @"Cell"; // Default Cells

UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];
UIImageView *illustrationImage = (UIImageView *)[cell viewWithTag:100];
illustrationImage.image = [UIImage imageNamed:[stackImage objectAtIndex:indexPath.row]];

UILabel *stackLabel = (UILabel *)[cell viewWithTag:12];
[stackLabel setText:[stackTitle objectAtIndex:indexPath.row]]; 
```

在这里，我想在我的`UICollectionView`. 每当我运行这段代码时，整个事情都拒绝启动：

```
static NSString *newIdentifier = @"AddNewCell"; 

UICollectionViewCell *newCell = [collectionView dequeueReusableCellWithReuseIdentifier:newIdentifier forIndexPath:indexPath];

UIImageView *addNewImage = (UIImageView *)[newCell viewWithTag:120];
addNewImage.image = [UIImage imageNamed:[addNew objectAtIndex:indexPath.row]]; // This line makes the app crash

return cell;
return newCell; 
```

**错误信息**

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]”

我怀疑这与`indexPath.row`. 如果我将`indexPath.row`以下代码中的部分替换为“0”，则它不会崩溃，但它不会在以下代码中可见`UICollectionView`：

```
[addNew objectAtIndex:indexPath.row]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T08:22:31.247

首先，我假设您正在运行您在 **collectionView:cellForItemAtIndexPath:**方法中提供的代码片段，而不是代码中的其他地方。

此外，您不能在上述方法中一次创建（也不能返回！！）两个单元格。您应该根据作为参数接收的索引路径来决定出列、实例化和返回的单元格。

现在，关于您收到的“*超出范围的索引*”错误：您正在尝试访问数组中的一个元素，该元素`addNew`在您想要访问它时实际上并不存在于数组中。在您的情况下，您尝试访问数组的第二个元素（索引`1`）并且数组只有一个元素（在索引处`0`）。

*您可能希望在访问数组之前*验证该`addNew`数组是否已正确初始化。

# grails - 在 GSP 文件中通过 id 获取对象

> ID：15320995
> 
> 赞同：0
> 
> 时间：2013-03-10T09:59:48.177
> 
> 标签：grails, gsp

我的域模型的一部分`Conversation`有很多`ChatMessage`

在我的 index.gsp 中，我有以下内容：

```
<g:each in="${allConversations}" var="conversation">
        ${conversation.chatMessages}
    </g:each> 
```

显示特定用户的所有对话，将聊天消息输出为

```
[hi, how are you][another convo, hi again] 
```

这是正确的结果。但我只想得到每个对话的第一条消息。我试过了

```
${conversation.chatMessages[0]} 
```

和

```
${conversation.chatMessages.get(0)} 
```

但无济于事。什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:31:55.957

如果您希望能够通过*索引*引用对话中的单个消息，那么您需要将关联声明为列表：

```
class Conversation {
  static hasMany = [chatMessages: ChatMessage]

  List chatMessages

  // constraints, mapping, other properties...
} 
```

如果你只有`hasMany`没有，`List chatMessages`那么关联将被映射为一个集合而不是一个列表，它允许你迭代但不能通过索引访问。

请参阅grails 文档中的[集合、列表和地图以获取完整的详细信息。](http://grails.org/doc/latest/guide/GORM.html#sets,ListsAndMaps)

# html - 向右浮动div

> ID：15320996
> 
> 赞同：0
> 
> 时间：2013-03-10T09:59:49.017
> 
> 标签：html, css

在以下 HTML 中，.left 具有 float:right，不能更改。是否仍然可以将 .right div 移动到右侧而不更改 .left div 中的 float:right ？

**HTML：**

```
<div class="box">   
    <div class="wrap">
        <div class="left">This should be left.</div>
    </div>
     <div class="right">This should be right</div>    
</div> 
```

**CSS：**

```
.box{
    width: 300px;
    overflow: hidden;
    border: 1px solid red;    
}

.left{
    width: 100px;
    float: right;    /* cannot change */
    border: 1px solid blue;     
}

.right{
    width: 100px;
    float: right;
    border: 1px solid green;
} 
```

**演示：http:** [//jsfiddle.net/y5UEu/](http://jsfiddle.net/y5UEu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:04:56.647

您可以将右 div 放在左 div 之前。

```
<div class="box">   
    <div class="wrap">
        <div class="right">This should be right</div>  
        <div class="left">This should be left.</div>
    </div>

</div> 
```

[JS小提琴](http://jsfiddle.net/y5UEu/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:15:02.253

```
<div class="box">
  <div class="right">This should be right</div>
  <div class="wrap">
    <div class="left">This should be left.</div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T10:12:04.750

试试这个

将此添加到 Css 代码中：

```
 .wrap{ 
```

向左飘浮;
}

HTML：

```
<div class="box">   
   <div class="right">This should be right</div>   
<div class="wrap">
    <div class="left">This should be left.</div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T10:12:18.260

就这样做

html

```
<div class="box">   
    <div class="wrap">
        <div class="left leftCol">This should be left.</div>
    </div>
     <div class="right">This should be right</div>    
</div> 
```

css

```
.box{
    width: 300px;
    overflow: hidden;
    border: 1px solid red;    
}

.left{
    width: 100px;
    float: right;
    border: 1px solid blue;     
}

.right{
    width: 100px;
    float: right;
    border: 1px solid green;
}
.leftCol {
    float:left !important;
} 
```

[**演示**](http://jsfiddle.net/y5UEu/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T10:14:31.500

简单定义：

> .left { 浮动：左！重要；}

这将取代现有的`.left {float:right;}`

*我假设您无法更改 HTML，因此这是一种适用于您将自定义 CSS 应用于现有网站的情况的解决方案。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T10:11:30.687

另一种方式：

如果您无法更改 html 结构，
则可以将一些 css 应用于 wrap 类，
因为它已经存在。

```
.wrap {
    width: 198px;
    float: left;
} 
```

宽度 198px 是为了配合你的边框。
您可以将其更改为您想要的任何内容，以满足您的要求。

.wrap 类上的 float left 属性可以为您提供所需的内容。